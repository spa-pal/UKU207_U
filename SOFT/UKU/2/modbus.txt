; generated by ARM C/C++ Compiler, 4.1 [Build 644]
; commandline ArmCC [--list --debug -c --asm --interleave -o.\EXE\modbus.o --asm_dir=.\ --list_dir=.\ --depend=.\EXE\modbus.d --feedback=.\EXE\UKU_220_IPS_TERMOKOMPENSAT.fed --cpu=Cortex-M3 --apcs=interwork -O1 -IC:\Keil\ARM\CMSIS\Include -IC:\Keil\ARM\INC\NXP\LPC17xx -D__MICROLIB -DUKU_220_IPS_TERMOKOMPENSAT -DUKU2071x --omf_browse=.\EXE\modbus.crf modbus.c]
                          THUMB

                          AREA ||.text||, CODE, READONLY, ALIGN=2

                  CRC16_2 PROC
;;;31     //-----------------------------------------------
;;;32     unsigned short CRC16_2(char* buf, short len)
000000  b570              PUSH     {r4-r6,lr}
;;;33     {
000002  4605              MOV      r5,r0
;;;34     unsigned short crc = 0xFFFF;
000004  f64f70ff          MOV      r0,#0xffff
;;;35     short pos;
;;;36     short i;
;;;37     
;;;38     for (pos = 0; pos < len; pos++)
000008  f04f0300          MOV      r3,#0
;;;39       	{
;;;40         	crc ^= (unsigned short)buf[pos];          // XOR byte into least sig. byte of crc
;;;41     
;;;42         	for ( i = 8; i != 0; i--) 
;;;43     		{    // Loop over each bit
;;;44           	if ((crc & 0x0001) != 0) 
;;;45     			{      // If the LSB is set
;;;46             		crc >>= 1;                    // Shift right and XOR 0xA001
;;;47             		crc ^= 0xA001;
00000c  f24a0401          MOV      r4,#0xa001
000010  e015              B        |L1.62|
                  |L1.18|
000012  5cea              LDRB     r2,[r5,r3]            ;40
000014  ea820000          EOR      r0,r2,r0              ;40
000018  f04f0208          MOV      r2,#8                 ;42
                  |L1.28|
00001c  07c6              LSLS     r6,r0,#31             ;44
00001e  d004              BEQ      |L1.42|
000020  ea4f0050          LSR      r0,r0,#1              ;46
000024  ea800004          EOR      r0,r0,r4
000028  e001              B        |L1.46|
                  |L1.42|
;;;48           		}
;;;49           	else  crc >>= 1;                    // Just shift right
00002a  ea4f0050          LSR      r0,r0,#1
                  |L1.46|
00002e  f1a20201          SUB      r2,r2,#1              ;42
000032  b212              SXTH     r2,r2                 ;42
000034  2a00              CMP      r2,#0                 ;42
000036  d1f1              BNE      |L1.28|
000038  f1030301          ADD      r3,r3,#1              ;38
00003c  b21b              SXTH     r3,r3                 ;38
                  |L1.62|
00003e  428b              CMP      r3,r1                 ;38
000040  dbe7              BLT      |L1.18|
;;;50         		}
;;;51       	}
;;;52       // Note, this number has low and high bytes swapped, so use it accordingly (or swap bytes)
;;;53     return crc;
;;;54     }
000042  bd70              POP      {r4-r6,pc}
;;;55     
                          ENDP

                  modbus_hold_register_transmit PROC
;;;285    //-----------------------------------------------
;;;286    void modbus_register_transmit(unsigned char adr,unsigned char func,unsigned short reg_adr)
;;;287    {
;;;288    char modbus_registers[150];
;;;289    char modbus_tx_buff[50];
;;;290    unsigned short crc_temp;
;;;291    char i;
;;;292    
;;;293    
;;;294    modbus_registers[0]=(char)(load_U/256);					//Πεγ1
;;;295    modbus_registers[1]=(char)(load_U%256);
;;;296    modbus_registers[2]=(char)(load_I/256);					//Πεγ2
;;;297    modbus_registers[3]=(char)(load_I%256);
;;;298    modbus_registers[4]=(char)(Ib_ips_termokompensat/256);		//Πεγ3
000044  b570              PUSH     {r4-r6,lr}
000046  b0b2              SUB      sp,sp,#0xc8
000048  4bff              LDR      r3,|L1.1096|
00004a  8b9c              LDRH     r4,[r3,#0x1c]
00004c  ea4f2414          LSR      r4,r4,#8
;;;299    modbus_registers[5]=(char)(Ib_ips_termokompensat%256);
000050  f88d4078          STRB     r4,[sp,#0x78]
;;;300    modbus_registers[6]=(char)(t_ext[0]/256);				//Πεγ4
000054  8b9c              LDRH     r4,[r3,#0x1c]
000056  f88d4079          STRB     r4,[sp,#0x79]
00005a  7e1c              LDRB     r4,[r3,#0x18]
00005c  f04f0400          MOV      r4,#0
000060  f88d407a          STRB     r4,[sp,#0x7a]
000064  7e1d              LDRB     r5,[r3,#0x18]
000066  f88d507b          STRB     r5,[sp,#0x7b]
;;;301    modbus_registers[7]=(char)(t_ext[0]%256);
00006a  7b1d              LDRB     r5,[r3,#0xc]
00006c  f88d407c          STRB     r4,[sp,#0x7c]
;;;302    modbus_registers[8]=(char)(net_Ua/256);					//Πεγ5
000070  7b1d              LDRB     r5,[r3,#0xc]
000072  f88d507d          STRB     r5,[sp,#0x7d]
000076  7a1d              LDRB     r5,[r3,#8]
000078  f88d407e          STRB     r4,[sp,#0x7e]
00007c  7a1d              LDRB     r5,[r3,#8]
00007e  f88d507f          STRB     r5,[sp,#0x7f]
000082  791d              LDRB     r5,[r3,#4]
;;;303    modbus_registers[9]=(char)(net_Ua%256);		 	
000084  f88d4080          STRB     r4,[sp,#0x80]
;;;304    modbus_registers[10]=(char)(net_Ub/256);				//Πεγ6
000088  791d              LDRB     r5,[r3,#4]
00008a  f88d5081          STRB     r5,[sp,#0x81]
00008e  781d              LDRB     r5,[r3,#0]
000090  f88d4082          STRB     r4,[sp,#0x82]
000094  781b              LDRB     r3,[r3,#0]
000096  f88d3083          STRB     r3,[sp,#0x83]
00009a  4bec              LDR      r3,|L1.1100|
00009c  f9b33000          LDRSH    r3,[r3,#0]  ; NUMIST
;;;305    modbus_registers[11]=(char)(net_Ub%256);
0000a0  ea4f74e3          ASR      r4,r3,#31
;;;306    modbus_registers[12]=(char)(net_Uc/256);				//Πεγ7
0000a4  eb036414          ADD      r4,r3,r4,LSR #24
0000a8  ea4f2524          ASR      r5,r4,#8
0000ac  f88d508a          STRB     r5,[sp,#0x8a]
0000b0  f88d308b          STRB     r3,[sp,#0x8b]
0000b4  4be6              LDR      r3,|L1.1104|
0000b6  f9b33000          LDRSH    r3,[r3,#0]  ; PAR
;;;307    modbus_registers[13]=(char)(net_Uc%256);
0000ba  ea4f74e3          ASR      r4,r3,#31
;;;308    modbus_registers[14]=(char)(net_F3/256);				//Πεγ8
0000be  eb036414          ADD      r4,r3,r4,LSR #24
0000c2  ea4f2524          ASR      r5,r4,#8
0000c6  f88d508c          STRB     r5,[sp,#0x8c]
0000ca  f88d308d          STRB     r3,[sp,#0x8d]
0000ce  4be1              LDR      r3,|L1.1108|
0000d0  f9b33000          LDRSH    r3,[r3,#0]  ; ZV_ON
;;;309    modbus_registers[15]=(char)(net_F3%256);
0000d4  ea4f74e3          ASR      r4,r3,#31
;;;310    modbus_registers[16]=(char)(load_I/256);				//Πεγ9
0000d8  eb036414          ADD      r4,r3,r4,LSR #24
;;;311    modbus_registers[17]=(char)(load_I%256);
0000dc  ea4f2524          ASR      r5,r4,#8
;;;312    modbus_registers[18]=(char)(load_I/256);				//Πεγ10
0000e0  f88d508e          STRB     r5,[sp,#0x8e]
;;;313    modbus_registers[19]=(char)(load_I%256);
0000e4  f88d308f          STRB     r3,[sp,#0x8f]
;;;314    modbus_registers[20]=(char)((LPC_RTC->YEAR)/256);			//Πεγ11
0000e8  4bdb              LDR      r3,|L1.1112|
0000ea  f9b33000          LDRSH    r3,[r3,#0]  ; UBM_AV
0000ee  ea4f74e3          ASR      r4,r3,#31
;;;315    modbus_registers[21]=(char)((LPC_RTC->YEAR)%256);
0000f2  eb036414          ADD      r4,r3,r4,LSR #24
0000f6  ea4f2524          ASR      r5,r4,#8
;;;316    modbus_registers[22]=(char)((LPC_RTC->MONTH)/256);		//Πεγ12
0000fa  f88d5092          STRB     r5,[sp,#0x92]
0000fe  f88d3093          STRB     r3,[sp,#0x93]
;;;317    modbus_registers[23]=(char)((LPC_RTC->MONTH)%256);
000102  4bd6              LDR      r3,|L1.1116|
000104  f9b33000          LDRSH    r3,[r3,#0]  ; TBAT
;;;318    modbus_registers[24]=(char)((LPC_RTC->DOM)/256);			//Πεγ13
000108  ea4f74e3          ASR      r4,r3,#31
00010c  eb036414          ADD      r4,r3,r4,LSR #24
;;;319    modbus_registers[25]=(char)((LPC_RTC->DOM)%256);
000110  ea4f2524          ASR      r5,r4,#8
;;;320    modbus_registers[26]=(char)((LPC_RTC->HOUR)/256);			//Πεγ14
000114  f88d509e          STRB     r5,[sp,#0x9e]
000118  f88d309f          STRB     r3,[sp,#0x9f]
;;;321    modbus_registers[27]=(char)((LPC_RTC->HOUR)%256);
00011c  4bd0              LDR      r3,|L1.1120|
00011e  f9b33000          LDRSH    r3,[r3,#0]  ; UMAX
;;;322    modbus_registers[28]=(char)((LPC_RTC->MIN)/256);			//Πεγ15
000122  ea4f74e3          ASR      r4,r3,#31
;;;323    modbus_registers[29]=(char)((LPC_RTC->MIN)%256);
000126  eb036414          ADD      r4,r3,r4,LSR #24
00012a  ea4f2524          ASR      r5,r4,#8
;;;324    modbus_registers[30]=(char)((LPC_RTC->SEC)/256);			//Πεγ16
00012e  f88d50a0          STRB     r5,[sp,#0xa0]
;;;325    modbus_registers[31]=(char)((LPC_RTC->SEC)%256);
000132  f88d30a1          STRB     r3,[sp,#0xa1]
000136  4bcb              LDR      r3,|L1.1124|
;;;326    modbus_registers[32]=(char)(load_I/256);				//Πεγ17
000138  4ccb              LDR      r4,|L1.1128|
00013a  f9b33000          LDRSH    r3,[r3,#0]  ; UB20
;;;327    modbus_registers[33]=(char)(load_I%256);
00013e  f9b44000          LDRSH    r4,[r4,#0]  ; DU
;;;328    modbus_registers[34]=(char)(load_I/256);				//Πεγ18
000142  eba30404          SUB      r4,r3,r4
;;;329    modbus_registers[35]=(char)(load_I%256);
000146  ea4f75e4          ASR      r5,r4,#31
;;;330    modbus_registers[36]=(char)(load_I/256);		//Πεγ19
00014a  eb046515          ADD      r5,r4,r5,LSR #24
;;;331    modbus_registers[37]=(char)(load_I%256);
00014e  ea4f2625          ASR      r6,r5,#8
;;;332    modbus_registers[38]=(char)(NUMIST/256);		//Πεγ20
000152  f88d60a2          STRB     r6,[sp,#0xa2]
000156  f88d40a3          STRB     r4,[sp,#0xa3]
00015a  4cc4              LDR      r4,|L1.1132|
00015c  f9b44000          LDRSH    r4,[r4,#0]  ; UB0
000160  ea4f75e4          ASR      r5,r4,#31
000164  eb046515          ADD      r5,r4,r5,LSR #24
;;;333    modbus_registers[39]=(char)(NUMIST%256);
000168  ea4f2625          ASR      r6,r5,#8
;;;334    modbus_registers[40]=(char)(PAR/256);		//Πεγ21
00016c  f88d60a4          STRB     r6,[sp,#0xa4]
000170  f88d40a5          STRB     r4,[sp,#0xa5]
000174  ea4f74e3          ASR      r4,r3,#31
000178  eb036414          ADD      r4,r3,r4,LSR #24
00017c  ea4f2524          ASR      r5,r4,#8
;;;335    modbus_registers[41]=(char)(PAR%256);
000180  f88d50a6          STRB     r5,[sp,#0xa6]
;;;336    modbus_registers[42]=(char)(ZV_ON/256);		//Πεγ22
000184  f88d30a7          STRB     r3,[sp,#0xa7]
000188  4bb9              LDR      r3,|L1.1136|
00018a  f9b33000          LDRSH    r3,[r3,#0]  ; USIGN
00018e  ea4f74e3          ASR      r4,r3,#31
000192  eb036414          ADD      r4,r3,r4,LSR #24
000196  ea4f2524          ASR      r5,r4,#8
;;;337    modbus_registers[43]=(char)(ZV_ON%256);
00019a  f88d50a8          STRB     r5,[sp,#0xa8]
;;;338    modbus_registers[44]=(char)(TERMOKOMPENS/256);		//Πεγ23
00019e  f88d30a9          STRB     r3,[sp,#0xa9]
0001a2  4bb4              LDR      r3,|L1.1140|
0001a4  f9b33000          LDRSH    r3,[r3,#0]  ; UMN
0001a8  ea4f74e3          ASR      r4,r3,#31
0001ac  eb036414          ADD      r4,r3,r4,LSR #24
0001b0  ea4f2524          ASR      r5,r4,#8
;;;339    modbus_registers[45]=(char)(TERMOKOMPENS%256);
0001b4  f88d50aa          STRB     r5,[sp,#0xaa]
;;;340    modbus_registers[46]=(char)(UBM_AV/256);		//Πεγ24
0001b8  f88d30ab          STRB     r3,[sp,#0xab]
0001bc  4bae              LDR      r3,|L1.1144|
0001be  f9b33000          LDRSH    r3,[r3,#0]  ; U0B
0001c2  ea4f74e3          ASR      r4,r3,#31
0001c6  eb036414          ADD      r4,r3,r4,LSR #24
0001ca  ea4f2524          ASR      r5,r4,#8
;;;341    modbus_registers[47]=(char)(UBM_AV%256);
0001ce  f88d50ac          STRB     r5,[sp,#0xac]
;;;342    modbus_registers[48]=(char)(load_I/256);		//Πεγ25
0001d2  f88d30ad          STRB     r3,[sp,#0xad]
;;;343    modbus_registers[49]=(char)(load_I%256);
0001d6  4ba9              LDR      r3,|L1.1148|
0001d8  f9b33000          LDRSH    r3,[r3,#0]  ; IKB
;;;344    modbus_registers[50]=(char)(load_I/256);		//Πεγ26
0001dc  ea4f74e3          ASR      r4,r3,#31
;;;345    modbus_registers[51]=(char)(load_I%256);
0001e0  eb036414          ADD      r4,r3,r4,LSR #24
;;;346    modbus_registers[52]=(char)(load_I/256);		//Πεγ27
0001e4  ea4f2524          ASR      r5,r4,#8
;;;347    modbus_registers[53]=(char)(load_I%256);
0001e8  f88d50ae          STRB     r5,[sp,#0xae]
;;;348    modbus_registers[54]=(char)(load_I/256);		//Πεγ28
0001ec  f88d30af          STRB     r3,[sp,#0xaf]
;;;349    modbus_registers[55]=(char)(load_I%256);
0001f0  4ba3              LDR      r3,|L1.1152|
;;;350    modbus_registers[56]=(char)(load_I/256);		//Πεγ29
0001f2  f9b33000          LDRSH    r3,[r3,#0]  ; IZMAX
;;;351    modbus_registers[57]=(char)(load_I%256);
0001f6  ea4f74e3          ASR      r4,r3,#31
;;;352    modbus_registers[58]=(char)(TBAT/256);			//Πεγ30
0001fa  eb036414          ADD      r4,r3,r4,LSR #24
0001fe  ea4f2524          ASR      r5,r4,#8
000202  f88d50b0          STRB     r5,[sp,#0xb0]
000206  f88d30b1          STRB     r3,[sp,#0xb1]
00020a  4b9e              LDR      r3,|L1.1156|
00020c  f9b33000          LDRSH    r3,[r3,#0]  ; IMAX
;;;353    modbus_registers[59]=(char)(TBAT%256);
000210  ea4f74e3          ASR      r4,r3,#31
;;;354    modbus_registers[60]=(char)(UMAX/256);			//Πεγ31
000214  eb036414          ADD      r4,r3,r4,LSR #24
000218  ea4f2524          ASR      r5,r4,#8
00021c  f88d50b2          STRB     r5,[sp,#0xb2]
000220  f88d30b3          STRB     r3,[sp,#0xb3]
000224  4b98              LDR      r3,|L1.1160|
000226  f9b33000          LDRSH    r3,[r3,#0]  ; IMIN
;;;355    modbus_registers[61]=(char)(UMAX%256);
00022a  ea4f74e3          ASR      r4,r3,#31
;;;356    modbus_registers[62]=(char)((UB20-DU)/256);		//Πεγ32
00022e  eb036414          ADD      r4,r3,r4,LSR #24
000232  ea4f2524          ASR      r5,r4,#8
000236  f88d50b4          STRB     r5,[sp,#0xb4]
00023a  f88d30b5          STRB     r3,[sp,#0xb5]
00023e  4b93              LDR      r3,|L1.1164|
000240  f9b33000          LDRSH    r3,[r3,#0]  ; UVZ
000244  ea4f74e3          ASR      r4,r3,#31
000248  eb036414          ADD      r4,r3,r4,LSR #24
00024c  ea4f2524          ASR      r5,r4,#8
;;;357    modbus_registers[63]=(char)((UB20-DU)%256);
000250  f88d50b6          STRB     r5,[sp,#0xb6]
;;;358    modbus_registers[64]=(char)(UB0/256);			//Πεγ33
000254  f88d30b7          STRB     r3,[sp,#0xb7]
000258  4b8d              LDR      r3,|L1.1168|
00025a  f9b33000          LDRSH    r3,[r3,#0]  ; TZAS
00025e  ea4f74e3          ASR      r4,r3,#31
000262  eb036414          ADD      r4,r3,r4,LSR #24
000266  ea4f2524          ASR      r5,r4,#8
;;;359    modbus_registers[65]=(char)(UB0%256);
00026a  f88d50b8          STRB     r5,[sp,#0xb8]
;;;360    modbus_registers[66]=(char)(UB20/256);			//Πεγ34
00026e  f88d30b9          STRB     r3,[sp,#0xb9]
000272  4b88              LDR      r3,|L1.1172|
000274  f9b33000          LDRSH    r3,[r3,#0]  ; TMAX
000278  ea4f74e3          ASR      r4,r3,#31
;;;361    modbus_registers[67]=(char)(UB20%256);
00027c  eb036414          ADD      r4,r3,r4,LSR #24
;;;362    modbus_registers[68]=(char)(USIGN/256);		//Πεγ35
000280  ea4f2524          ASR      r5,r4,#8
000284  f88d50ba          STRB     r5,[sp,#0xba]
000288  f88d30bb          STRB     r3,[sp,#0xbb]
00028c  4b82              LDR      r3,|L1.1176|
00028e  f9b33000          LDRSH    r3,[r3,#0]  ; TSIGN
000292  ea4f74e3          ASR      r4,r3,#31
;;;363    modbus_registers[69]=(char)(USIGN%256);
000296  eb036414          ADD      r4,r3,r4,LSR #24
;;;364    modbus_registers[70]=(char)(UMN/256);		//Πεγ36
00029a  ea4f2524          ASR      r5,r4,#8
00029e  f88d50bc          STRB     r5,[sp,#0xbc]
0002a2  f88d30bd          STRB     r3,[sp,#0xbd]
0002a6  4b7d              LDR      r3,|L1.1180|
0002a8  f9b33000          LDRSH    r3,[r3,#0]  ; TBATMAX
0002ac  ea4f74e3          ASR      r4,r3,#31
;;;365    modbus_registers[71]=(char)(UMN%256);
0002b0  eb036414          ADD      r4,r3,r4,LSR #24
;;;366    modbus_registers[72]=(char)(U0B/256);		//Πεγ37
0002b4  ea4f2524          ASR      r5,r4,#8
0002b8  f88d50be          STRB     r5,[sp,#0xbe]
0002bc  f88d30bf          STRB     r3,[sp,#0xbf]
0002c0  4b77              LDR      r3,|L1.1184|
0002c2  f9b33000          LDRSH    r3,[r3,#0]  ; TBATSIGN
0002c6  ea4f74e3          ASR      r4,r3,#31
;;;367    modbus_registers[73]=(char)(U0B%256);
0002ca  eb036414          ADD      r4,r3,r4,LSR #24
;;;368    modbus_registers[74]=(char)(IKB/256);		//Πεγ38
0002ce  ea4f2524          ASR      r5,r4,#8
0002d2  f88d50c0          STRB     r5,[sp,#0xc0]
0002d6  f88d30c1          STRB     r3,[sp,#0xc1]
0002da  f88d0000          STRB     r0,[sp,#0]
0002de  f88d1001          STRB     r1,[sp,#1]
0002e2  ea4f2012          LSR      r0,r2,#8
;;;369    modbus_registers[75]=(char)(IKB%256);
0002e6  f88d0002          STRB     r0,[sp,#2]
;;;370    modbus_registers[76]=(char)(IZMAX/256);		//Πεγ39
0002ea  f88d2003          STRB     r2,[sp,#3]
0002ee  a819              ADD      r0,sp,#0x64
0002f0  f1a20201          SUB      r2,r2,#1
0002f4  eb000142          ADD      r1,r0,r2,LSL #1
0002f8  f04f0202          MOV      r2,#2
0002fc  466d              MOV      r5,sp
;;;371    modbus_registers[77]=(char)(IZMAX%256);
0002fe  a801              ADD      r0,sp,#4
000300  f7fffffe          BL       mem_copy
;;;372    modbus_registers[78]=(char)(IMAX/256);		//Πεγ40
000304  2106              MOVS     r1,#6
000306  4668              MOV      r0,sp
000308  f7fffffe          BL       CRC16_2
00030c  f88d0006          STRB     r0,[sp,#6]
000310  ea4f2010          LSR      r0,r0,#8
000314  f88d0007          STRB     r0,[sp,#7]
;;;373    modbus_registers[79]=(char)(IMAX%256);
000318  f04f0400          MOV      r4,#0
                  |L1.796|
;;;374    modbus_registers[80]=(char)(IMIN/256);		//Πεγ41
00031c  5d28              LDRB     r0,[r5,r4]
00031e  f7fffffe          BL       putchar0
000322  f1040401          ADD      r4,r4,#1
000326  b2e4              UXTB     r4,r4
000328  2c08              CMP      r4,#8
00032a  d3f7              BCC      |L1.796|
00032c  f04f0400          MOV      r4,#0
                  |L1.816|
000330  5d28              LDRB     r0,[r5,r4]
;;;375    modbus_registers[81]=(char)(IMIN%256);
000332  f7fffffe          BL       putchar_sc16is700
;;;376    modbus_registers[82]=(char)(UVZ/256);		//Πεγ42
000336  f1040401          ADD      r4,r4,#1
00033a  b2e4              UXTB     r4,r4
00033c  2c08              CMP      r4,#8
00033e  d3f7              BCC      |L1.816|
000340  b032              ADD      sp,sp,#0xc8
000342  bd70              POP      {r4-r6,pc}
;;;377    modbus_registers[83]=(char)(UVZ%256);
;;;378    modbus_registers[84]=(char)(TZAS/256);		//Πεγ43
;;;379    modbus_registers[85]=(char)(TZAS%256);
;;;380    modbus_registers[86]=(char)(TMAX/256);		//Πεγ44
;;;381    modbus_registers[87]=(char)(TMAX%256);
;;;382    modbus_registers[88]=(char)(TSIGN/256);		//Πεγ45
;;;383    modbus_registers[89]=(char)(TSIGN%256);
;;;384    modbus_registers[90]=(char)(TBATMAX/256);		//Πεγ46
;;;385    modbus_registers[91]=(char)(TBATMAX%256);
;;;386    modbus_registers[92]=(char)(TBATSIGN/256);		//Πεγ47
;;;387    modbus_registers[93]=(char)(TBATSIGN%256);
;;;388    modbus_registers[94]=(char)(load_I/256);		//Πεγ48
;;;389    modbus_registers[95]=(char)(load_I%256);
;;;390    modbus_registers[96]=(char)(load_I/256);		//Πεγ49
;;;391    modbus_registers[97]=(char)(load_I%256);
;;;392    modbus_registers[98]=(char)(load_I/256);		//Πεγ50
;;;393    modbus_registers[99]=(char)(load_I%256);
;;;394    
;;;395    modbus_tx_buff[0]=adr;
;;;396    modbus_tx_buff[1]=func;
;;;397    modbus_tx_buff[2]=(char)(reg_adr/256);
;;;398    modbus_tx_buff[3]=(char)(reg_adr%256);
;;;399    //modbus_tx_buff[4]=(char)(reg_quantity/256);
;;;400    //modbus_tx_buff[5]=(char)(reg_quantity%256);
;;;401    /*
;;;402    modbus_registers[0]=0x10;
;;;403    modbus_registers[1]=0x11;
;;;404    modbus_registers[2]=0x12;
;;;405    modbus_registers[3]=0x13;
;;;406    modbus_registers[4]=0x14;
;;;407    modbus_registers[5]=0x15;
;;;408    */
;;;409    
;;;410    mem_copy((char*)&modbus_tx_buff[4],(char*)&modbus_registers[(reg_adr-1)*2],2);
;;;411    
;;;412    crc_temp=CRC16_2(modbus_tx_buff,6);
;;;413    
;;;414    modbus_tx_buff[6]=crc_temp%256;
;;;415    modbus_tx_buff[7]=crc_temp/256;
;;;416    
;;;417    for (i=0;i<8;i++)
;;;418    	{
;;;419    	putchar0(modbus_tx_buff[i]);
;;;420    	}
;;;421    for (i=0;i<8;i++)
;;;422    	{
;;;423    	putchar_sc16is700(modbus_tx_buff[i]);
;;;424    	}
;;;425    }
;;;426    
                          ENDP

                  modbus_input_registers_transmit PROC
;;;285    //-----------------------------------------------
;;;286    void modbus_register_transmit(unsigned char adr,unsigned char func,unsigned short reg_adr)
;;;287    {
;;;288    char modbus_registers[150];
;;;289    char modbus_tx_buff[50];
;;;290    unsigned short crc_temp;
;;;291    char i;
;;;292    
;;;293    
;;;294    modbus_registers[0]=(char)(load_U/256);					//Πεγ1
;;;295    modbus_registers[1]=(char)(load_U%256);
;;;296    modbus_registers[2]=(char)(load_I/256);					//Πεγ2
;;;297    modbus_registers[3]=(char)(load_I%256);
;;;298    modbus_registers[4]=(char)(Ib_ips_termokompensat/256);		//Πεγ3
;;;299    modbus_registers[5]=(char)(Ib_ips_termokompensat%256);
;;;300    modbus_registers[6]=(char)(t_ext[0]/256);				//Πεγ4
;;;301    modbus_registers[7]=(char)(t_ext[0]%256);
;;;302    modbus_registers[8]=(char)(net_Ua/256);					//Πεγ5
;;;303    modbus_registers[9]=(char)(net_Ua%256);		 	
;;;304    modbus_registers[10]=(char)(net_Ub/256);				//Πεγ6
;;;305    modbus_registers[11]=(char)(net_Ub%256);
;;;306    modbus_registers[12]=(char)(net_Uc/256);				//Πεγ7
;;;307    modbus_registers[13]=(char)(net_Uc%256);
;;;308    modbus_registers[14]=(char)(net_F3/256);				//Πεγ8
;;;309    modbus_registers[15]=(char)(net_F3%256);
;;;310    modbus_registers[16]=(char)(load_I/256);				//Πεγ9
;;;311    modbus_registers[17]=(char)(load_I%256);
;;;312    modbus_registers[18]=(char)(load_I/256);				//Πεγ10
;;;313    modbus_registers[19]=(char)(load_I%256);
;;;314    modbus_registers[20]=(char)((LPC_RTC->YEAR)/256);			//Πεγ11
;;;315    modbus_registers[21]=(char)((LPC_RTC->YEAR)%256);
;;;316    modbus_registers[22]=(char)((LPC_RTC->MONTH)/256);		//Πεγ12
;;;317    modbus_registers[23]=(char)((LPC_RTC->MONTH)%256);
;;;318    modbus_registers[24]=(char)((LPC_RTC->DOM)/256);			//Πεγ13
;;;319    modbus_registers[25]=(char)((LPC_RTC->DOM)%256);
;;;320    modbus_registers[26]=(char)((LPC_RTC->HOUR)/256);			//Πεγ14
;;;321    modbus_registers[27]=(char)((LPC_RTC->HOUR)%256);
;;;322    modbus_registers[28]=(char)((LPC_RTC->MIN)/256);			//Πεγ15
;;;323    modbus_registers[29]=(char)((LPC_RTC->MIN)%256);
;;;324    modbus_registers[30]=(char)((LPC_RTC->SEC)/256);			//Πεγ16
;;;325    modbus_registers[31]=(char)((LPC_RTC->SEC)%256);
;;;326    modbus_registers[32]=(char)(load_I/256);				//Πεγ17
;;;327    modbus_registers[33]=(char)(load_I%256);
;;;328    modbus_registers[34]=(char)(load_I/256);				//Πεγ18
;;;329    modbus_registers[35]=(char)(load_I%256);
;;;330    modbus_registers[36]=(char)(load_I/256);		//Πεγ19
;;;331    modbus_registers[37]=(char)(load_I%256);
;;;332    modbus_registers[38]=(char)(NUMIST/256);		//Πεγ20
;;;333    modbus_registers[39]=(char)(NUMIST%256);
;;;334    modbus_registers[40]=(char)(PAR/256);		//Πεγ21
;;;335    modbus_registers[41]=(char)(PAR%256);
;;;336    modbus_registers[42]=(char)(ZV_ON/256);		//Πεγ22
;;;337    modbus_registers[43]=(char)(ZV_ON%256);
;;;338    modbus_registers[44]=(char)(TERMOKOMPENS/256);		//Πεγ23
;;;339    modbus_registers[45]=(char)(TERMOKOMPENS%256);
;;;340    modbus_registers[46]=(char)(UBM_AV/256);		//Πεγ24
;;;341    modbus_registers[47]=(char)(UBM_AV%256);
;;;342    modbus_registers[48]=(char)(load_I/256);		//Πεγ25
;;;343    modbus_registers[49]=(char)(load_I%256);
;;;344    modbus_registers[50]=(char)(load_I/256);		//Πεγ26
;;;345    modbus_registers[51]=(char)(load_I%256);
;;;346    modbus_registers[52]=(char)(load_I/256);		//Πεγ27
;;;347    modbus_registers[53]=(char)(load_I%256);
;;;348    modbus_registers[54]=(char)(load_I/256);		//Πεγ28
;;;349    modbus_registers[55]=(char)(load_I%256);
;;;350    modbus_registers[56]=(char)(load_I/256);		//Πεγ29
;;;351    modbus_registers[57]=(char)(load_I%256);
;;;352    modbus_registers[58]=(char)(TBAT/256);			//Πεγ30
;;;353    modbus_registers[59]=(char)(TBAT%256);
;;;354    modbus_registers[60]=(char)(UMAX/256);			//Πεγ31
;;;355    modbus_registers[61]=(char)(UMAX%256);
;;;356    modbus_registers[62]=(char)((UB20-DU)/256);		//Πεγ32
;;;357    modbus_registers[63]=(char)((UB20-DU)%256);
;;;358    modbus_registers[64]=(char)(UB0/256);			//Πεγ33
;;;359    modbus_registers[65]=(char)(UB0%256);
;;;360    modbus_registers[66]=(char)(UB20/256);			//Πεγ34
;;;361    modbus_registers[67]=(char)(UB20%256);
;;;362    modbus_registers[68]=(char)(USIGN/256);		//Πεγ35
;;;363    modbus_registers[69]=(char)(USIGN%256);
;;;364    modbus_registers[70]=(char)(UMN/256);		//Πεγ36
;;;365    modbus_registers[71]=(char)(UMN%256);
;;;366    modbus_registers[72]=(char)(U0B/256);		//Πεγ37
;;;367    modbus_registers[73]=(char)(U0B%256);
;;;368    modbus_registers[74]=(char)(IKB/256);		//Πεγ38
;;;369    modbus_registers[75]=(char)(IKB%256);
;;;370    modbus_registers[76]=(char)(IZMAX/256);		//Πεγ39
;;;371    modbus_registers[77]=(char)(IZMAX%256);
;;;372    modbus_registers[78]=(char)(IMAX/256);		//Πεγ40
;;;373    modbus_registers[79]=(char)(IMAX%256);
;;;374    modbus_registers[80]=(char)(IMIN/256);		//Πεγ41
;;;375    modbus_registers[81]=(char)(IMIN%256);
;;;376    modbus_registers[82]=(char)(UVZ/256);		//Πεγ42
000344  b5f0              PUSH     {r4-r7,lr}
000346  b0bb              SUB      sp,sp,#0xec
000348  461d              MOV      r5,r3
00034a  4b56              LDR      r3,|L1.1188|
;;;377    modbus_registers[83]=(char)(UVZ%256);
00034c  f9b33000          LDRSH    r3,[r3,#0]  ; load_U
;;;378    modbus_registers[84]=(char)(TZAS/256);		//Πεγ43
000350  ea4f74e3          ASR      r4,r3,#31
000354  eb036414          ADD      r4,r3,r4,LSR #24
000358  ea4f2624          ASR      r6,r4,#8
00035c  f88d607c          STRB     r6,[sp,#0x7c]
000360  f88d307d          STRB     r3,[sp,#0x7d]
000364  4b50              LDR      r3,|L1.1192|
;;;379    modbus_registers[85]=(char)(TZAS%256);
000366  f9b33000          LDRSH    r3,[r3,#0]  ; load_I
;;;380    modbus_registers[86]=(char)(TMAX/256);		//Πεγ44
00036a  ea4f74e3          ASR      r4,r3,#31
00036e  eb036414          ADD      r4,r3,r4,LSR #24
000372  ea4f2624          ASR      r6,r4,#8
000376  f88d607e          STRB     r6,[sp,#0x7e]
00037a  f88d307f          STRB     r3,[sp,#0x7f]
00037e  4b4b              LDR      r3,|L1.1196|
;;;381    modbus_registers[87]=(char)(TMAX%256);
000380  f9b33000          LDRSH    r3,[r3,#0]  ; net_U
;;;382    modbus_registers[88]=(char)(TSIGN/256);		//Πεγ45
000384  ea4f74e3          ASR      r4,r3,#31
000388  eb036414          ADD      r4,r3,r4,LSR #24
00038c  ea4f2624          ASR      r6,r4,#8
000390  f88d6080          STRB     r6,[sp,#0x80]
000394  f88d3081          STRB     r3,[sp,#0x81]
000398  4b45              LDR      r3,|L1.1200|
;;;383    modbus_registers[89]=(char)(TSIGN%256);
00039a  f9b33000          LDRSH    r3,[r3,#0]  ; net_F
;;;384    modbus_registers[90]=(char)(TBATMAX/256);		//Πεγ46
00039e  ea4f74e3          ASR      r4,r3,#31
0003a2  eb036414          ADD      r4,r3,r4,LSR #24
0003a6  ea4f2624          ASR      r6,r4,#8
0003aa  f88d6082          STRB     r6,[sp,#0x82]
0003ae  f88d3083          STRB     r3,[sp,#0x83]
0003b2  4b40              LDR      r3,|L1.1204|
;;;385    modbus_registers[91]=(char)(TBATMAX%256);
0003b4  f9b33000          LDRSH    r3,[r3,#0]  ; net_Ua
;;;386    modbus_registers[92]=(char)(TBATSIGN/256);		//Πεγ47
0003b8  ea4f74e3          ASR      r4,r3,#31
0003bc  eb036414          ADD      r4,r3,r4,LSR #24
0003c0  ea4f2624          ASR      r6,r4,#8
0003c4  f88d6084          STRB     r6,[sp,#0x84]
0003c8  f88d3085          STRB     r3,[sp,#0x85]
0003cc  4b3a              LDR      r3,|L1.1208|
;;;387    modbus_registers[93]=(char)(TBATSIGN%256);
0003ce  f9b33000          LDRSH    r3,[r3,#0]  ; net_Ub
;;;388    modbus_registers[94]=(char)(load_I/256);		//Πεγ48
0003d2  ea4f74e3          ASR      r4,r3,#31
;;;389    modbus_registers[95]=(char)(load_I%256);
0003d6  eb036414          ADD      r4,r3,r4,LSR #24
;;;390    modbus_registers[96]=(char)(load_I/256);		//Πεγ49
0003da  ea4f2624          ASR      r6,r4,#8
;;;391    modbus_registers[97]=(char)(load_I%256);
0003de  f88d6086          STRB     r6,[sp,#0x86]
;;;392    modbus_registers[98]=(char)(load_I/256);		//Πεγ50
0003e2  f88d3087          STRB     r3,[sp,#0x87]
;;;393    modbus_registers[99]=(char)(load_I%256);
0003e6  4b35              LDR      r3,|L1.1212|
0003e8  f9b33000          LDRSH    r3,[r3,#0]  ; net_Uc
;;;394    
;;;395    modbus_tx_buff[0]=adr;
0003ec  ea4f74e3          ASR      r4,r3,#31
;;;396    modbus_tx_buff[1]=func;
0003f0  eb036414          ADD      r4,r3,r4,LSR #24
;;;397    modbus_tx_buff[2]=(char)(reg_adr/256);
0003f4  ea4f2624          ASR      r6,r4,#8
0003f8  f88d6088          STRB     r6,[sp,#0x88]
;;;398    modbus_tx_buff[3]=(char)(reg_adr%256);
0003fc  f88d3089          STRB     r3,[sp,#0x89]
;;;399    //modbus_tx_buff[4]=(char)(reg_quantity/256);
;;;400    //modbus_tx_buff[5]=(char)(reg_quantity%256);
;;;401    /*
;;;402    modbus_registers[0]=0x10;
;;;403    modbus_registers[1]=0x11;
;;;404    modbus_registers[2]=0x12;
;;;405    modbus_registers[3]=0x13;
;;;406    modbus_registers[4]=0x14;
;;;407    modbus_registers[5]=0x15;
;;;408    */
;;;409    
;;;410    mem_copy((char*)&modbus_tx_buff[4],(char*)&modbus_registers[(reg_adr-1)*2],2);
000400  4c2f              LDR      r4,|L1.1216|
000402  f9b43002          LDRSH    r3,[r4,#2]  ; bat
000406  ea4f76e3          ASR      r6,r3,#31
00040a  eb036616          ADD      r6,r3,r6,LSR #24
00040e  ea4f2726          ASR      r7,r6,#8
000412  f88d708a          STRB     r7,[sp,#0x8a]
000416  f88d308b          STRB     r3,[sp,#0x8b]
00041a  f9b43008          LDRSH    r3,[r4,#8]  ; bat
00041e  ea4f76e3          ASR      r6,r3,#31
000422  eb036616          ADD      r6,r3,r6,LSR #24
000426  ea4f2726          ASR      r7,r6,#8
00042a  f88d708c          STRB     r7,[sp,#0x8c]
00042e  f88d308d          STRB     r3,[sp,#0x8d]
000432  f9b4300a          LDRSH    r3,[r4,#0xa]  ; bat
000436  ea4f76e3          ASR      r6,r3,#31
00043a  eb036616          ADD      r6,r3,r6,LSR #24
00043e  ea4f2726          ASR      r7,r6,#8
000442  f88d708e          STRB     r7,[sp,#0x8e]
000446  e03d              B        |L1.1220|
                  |L1.1096|
                          DCD      0x40024020
                  |L1.1100|
                          DCD      NUMIST
                  |L1.1104|
                          DCD      PAR
                  |L1.1108|
                          DCD      ZV_ON
                  |L1.1112|
                          DCD      UBM_AV
                  |L1.1116|
                          DCD      TBAT
                  |L1.1120|
                          DCD      UMAX
                  |L1.1124|
                          DCD      UB20
                  |L1.1128|
                          DCD      ||DU||
                  |L1.1132|
                          DCD      UB0
                  |L1.1136|
                          DCD      USIGN
                  |L1.1140|
                          DCD      UMN
                  |L1.1144|
                          DCD      U0B
                  |L1.1148|
                          DCD      IKB
                  |L1.1152|
                          DCD      IZMAX
                  |L1.1156|
                          DCD      IMAX
                  |L1.1160|
                          DCD      IMIN
                  |L1.1164|
                          DCD      UVZ
                  |L1.1168|
                          DCD      TZAS
                  |L1.1172|
                          DCD      TMAX
                  |L1.1176|
                          DCD      TSIGN
                  |L1.1180|
                          DCD      TBATMAX
                  |L1.1184|
                          DCD      TBATSIGN
                  |L1.1188|
                          DCD      load_U
                  |L1.1192|
                          DCD      load_I
                  |L1.1196|
                          DCD      net_U
                  |L1.1200|
                          DCD      net_F
                  |L1.1204|
                          DCD      net_Ua
                  |L1.1208|
                          DCD      net_Ub
                  |L1.1212|
                          DCD      net_Uc
                  |L1.1216|
                          DCD      bat
                  |L1.1220|
;;;411    
;;;412    crc_temp=CRC16_2(modbus_tx_buff,6);
;;;413    
;;;414    modbus_tx_buff[6]=crc_temp%256;
;;;415    modbus_tx_buff[7]=crc_temp/256;
;;;416    
;;;417    for (i=0;i<8;i++)
;;;418    	{
;;;419    	putchar0(modbus_tx_buff[i]);
;;;420    	}
;;;421    for (i=0;i<8;i++)
;;;422    	{
;;;423    	putchar_sc16is700(modbus_tx_buff[i]);
0004c4  f88d308f          STRB     r3,[sp,#0x8f]
0004c8  8a23              LDRH     r3,[r4,#0x10]  ; bat
0004ca  ea4f2613          LSR      r6,r3,#8              ;421
0004ce  f88d6090          STRB     r6,[sp,#0x90]         ;421
0004d2  f88d3091          STRB     r3,[sp,#0x91]         ;421
;;;424    	}
;;;425    }
0004d6  f9b43004          LDRSH    r3,[r4,#4]  ; bat
0004da  ea4f76e3          ASR      r6,r3,#31
0004de  eb036616          ADD      r6,r3,r6,LSR #24
0004e2  ea4f2726          ASR      r7,r6,#8
0004e6  f88d7092          STRB     r7,[sp,#0x92]
0004ea  f88d3093          STRB     r3,[sp,#0x93]
0004ee  f9b43006          LDRSH    r3,[r4,#6]  ; bat
0004f2  ea4f76e3          ASR      r6,r3,#31
0004f6  eb036616          ADD      r6,r3,r6,LSR #24
0004fa  ea4f2726          ASR      r7,r6,#8
0004fe  f88d7094          STRB     r7,[sp,#0x94]
000502  f88d3095          STRB     r3,[sp,#0x95]
000506  4eff              LDR      r6,|L1.2308|
000508  f9b63000          LDRSH    r3,[r6,#0]  ; BAT_C_REAL
00050c  ea4f77e3          ASR      r7,r3,#31
000510  eb036717          ADD      r7,r3,r7,LSR #24
000514  ea4f2c27          ASR      r12,r7,#8
000518  f88dc096          STRB     r12,[sp,#0x96]
00051c  f88d3097          STRB     r3,[sp,#0x97]
000520  f9b4304e          LDRSH    r3,[r4,#0x4e]  ; bat
000524  ea4f77e3          ASR      r7,r3,#31
000528  eb036717          ADD      r7,r3,r7,LSR #24
00052c  ea4f2c27          ASR      r12,r7,#8
000530  f88dc098          STRB     r12,[sp,#0x98]
000534  f88d3099          STRB     r3,[sp,#0x99]
000538  f9b43054          LDRSH    r3,[r4,#0x54]  ; bat
00053c  ea4f77e3          ASR      r7,r3,#31
000540  eb036717          ADD      r7,r3,r7,LSR #24
000544  ea4f2c27          ASR      r12,r7,#8
000548  f88dc09a          STRB     r12,[sp,#0x9a]
00054c  f88d309b          STRB     r3,[sp,#0x9b]
000550  f9b43056          LDRSH    r3,[r4,#0x56]  ; bat
000554  ea4f77e3          ASR      r7,r3,#31
000558  eb036717          ADD      r7,r3,r7,LSR #24
00055c  ea4f2c27          ASR      r12,r7,#8
000560  f88dc09c          STRB     r12,[sp,#0x9c]
000564  f88d309d          STRB     r3,[sp,#0x9d]
000568  f8b4305c          LDRH     r3,[r4,#0x5c]  ; bat
00056c  ea4f2713          LSR      r7,r3,#8
000570  f88d709e          STRB     r7,[sp,#0x9e]
000574  f88d309f          STRB     r3,[sp,#0x9f]
000578  f9b43050          LDRSH    r3,[r4,#0x50]  ; bat
00057c  ea4f77e3          ASR      r7,r3,#31
000580  eb036717          ADD      r7,r3,r7,LSR #24
000584  ea4f2c27          ASR      r12,r7,#8
000588  f88dc0a0          STRB     r12,[sp,#0xa0]
00058c  f88d30a1          STRB     r3,[sp,#0xa1]
000590  f9b43052          LDRSH    r3,[r4,#0x52]  ; bat
000594  ea4f74e3          ASR      r4,r3,#31
000598  eb036414          ADD      r4,r3,r4,LSR #24
00059c  ea4f2724          ASR      r7,r4,#8
0005a0  f88d70a2          STRB     r7,[sp,#0xa2]
0005a4  f88d30a3          STRB     r3,[sp,#0xa3]
0005a8  f9b63002          LDRSH    r3,[r6,#2]  ; BAT_C_REAL
0005ac  ea4f74e3          ASR      r4,r3,#31
0005b0  eb036414          ADD      r4,r3,r4,LSR #24
0005b4  ea4f2624          ASR      r6,r4,#8
0005b8  f88d60a4          STRB     r6,[sp,#0xa4]
0005bc  f88d30a5          STRB     r3,[sp,#0xa5]
0005c0  4cd1              LDR      r4,|L1.2312|
0005c2  69e3              LDR      r3,[r4,#0x1c]  ; bps
0005c4  ea4f76e3          ASR      r6,r3,#31
0005c8  eb036616          ADD      r6,r3,r6,LSR #24
0005cc  ea4f2726          ASR      r7,r6,#8
0005d0  f88d70a6          STRB     r7,[sp,#0xa6]
0005d4  f88d30a7          STRB     r3,[sp,#0xa7]
0005d8  6a63              LDR      r3,[r4,#0x24]  ; bps
0005da  ea4f76e3          ASR      r6,r3,#31
0005de  eb036616          ADD      r6,r3,r6,LSR #24
0005e2  ea4f2726          ASR      r7,r6,#8
0005e6  f88d70a8          STRB     r7,[sp,#0xa8]
0005ea  f88d30a9          STRB     r3,[sp,#0xa9]
0005ee  6aa3              LDR      r3,[r4,#0x28]  ; bps
0005f0  ea4f76e3          ASR      r6,r3,#31
0005f4  eb036616          ADD      r6,r3,r6,LSR #24
0005f8  ea4f2726          ASR      r7,r6,#8
0005fc  f88d70aa          STRB     r7,[sp,#0xaa]
000600  f88d30ab          STRB     r3,[sp,#0xab]
000604  f04f0600          MOV      r6,#0
000608  f88d60ac          STRB     r6,[sp,#0xac]
00060c  7863              LDRB     r3,[r4,#1]  ; bps
00060e  f88d30ad          STRB     r3,[sp,#0xad]
000612  6f23              LDR      r3,[r4,#0x70]  ; bps
000614  ea4f77e3          ASR      r7,r3,#31
000618  eb036717          ADD      r7,r3,r7,LSR #24
00061c  ea4f2c27          ASR      r12,r7,#8
000620  f88dc0ae          STRB     r12,[sp,#0xae]
000624  f88d30af          STRB     r3,[sp,#0xaf]
000628  6fa3              LDR      r3,[r4,#0x78]  ; bps
00062a  ea4f77e3          ASR      r7,r3,#31
00062e  eb036717          ADD      r7,r3,r7,LSR #24
000632  ea4f2c27          ASR      r12,r7,#8
000636  f88dc0b0          STRB     r12,[sp,#0xb0]
00063a  f88d30b1          STRB     r3,[sp,#0xb1]
00063e  6fe3              LDR      r3,[r4,#0x7c]  ; bps
000640  ea4f77e3          ASR      r7,r3,#31
000644  eb036717          ADD      r7,r3,r7,LSR #24
000648  ea4f2c27          ASR      r12,r7,#8
00064c  f88dc0b2          STRB     r12,[sp,#0xb2]
000650  f88d30b3          STRB     r3,[sp,#0xb3]
000654  f88d60b4          STRB     r6,[sp,#0xb4]
000658  f8943055          LDRB     r3,[r4,#0x55]  ; bps
00065c  f88d30b5          STRB     r3,[sp,#0xb5]
000660  f8d430c4          LDR      r3,[r4,#0xc4]  ; bps
000664  ea4f77e3          ASR      r7,r3,#31
000668  eb036717          ADD      r7,r3,r7,LSR #24
00066c  ea4f2c27          ASR      r12,r7,#8
000670  f88dc0b6          STRB     r12,[sp,#0xb6]
000674  f88d30b7          STRB     r3,[sp,#0xb7]
000678  f8d430cc          LDR      r3,[r4,#0xcc]  ; bps
00067c  ea4f77e3          ASR      r7,r3,#31
000680  eb036717          ADD      r7,r3,r7,LSR #24
000684  ea4f2c27          ASR      r12,r7,#8
000688  f88dc0b8          STRB     r12,[sp,#0xb8]
00068c  f88d30b9          STRB     r3,[sp,#0xb9]
000690  f8d430d0          LDR      r3,[r4,#0xd0]  ; bps
000694  ea4f77e3          ASR      r7,r3,#31
000698  eb036717          ADD      r7,r3,r7,LSR #24
00069c  ea4f2c27          ASR      r12,r7,#8
0006a0  f88dc0ba          STRB     r12,[sp,#0xba]
0006a4  f88d30bb          STRB     r3,[sp,#0xbb]
0006a8  f88d60bc          STRB     r6,[sp,#0xbc]
0006ac  f89430a9          LDRB     r3,[r4,#0xa9]  ; bps
0006b0  f88d30bd          STRB     r3,[sp,#0xbd]
0006b4  f8d43118          LDR      r3,[r4,#0x118]  ; bps
0006b8  ea4f77e3          ASR      r7,r3,#31
0006bc  eb036717          ADD      r7,r3,r7,LSR #24
0006c0  ea4f2c27          ASR      r12,r7,#8
0006c4  f88dc0be          STRB     r12,[sp,#0xbe]
0006c8  f88d30bf          STRB     r3,[sp,#0xbf]
0006cc  f8d43120          LDR      r3,[r4,#0x120]  ; bps
0006d0  ea4f77e3          ASR      r7,r3,#31
0006d4  eb036717          ADD      r7,r3,r7,LSR #24
0006d8  ea4f2c27          ASR      r12,r7,#8
0006dc  f88dc0c0          STRB     r12,[sp,#0xc0]
0006e0  f88d30c1          STRB     r3,[sp,#0xc1]
0006e4  f8d43124          LDR      r3,[r4,#0x124]  ; bps
0006e8  ea4f77e3          ASR      r7,r3,#31
0006ec  eb036717          ADD      r7,r3,r7,LSR #24
0006f0  ea4f2c27          ASR      r12,r7,#8
0006f4  f88dc0c2          STRB     r12,[sp,#0xc2]
0006f8  f88d30c3          STRB     r3,[sp,#0xc3]
0006fc  f88d60c4          STRB     r6,[sp,#0xc4]
000700  f50474a8          ADD      r4,r4,#0x150
000704  f8143c53          LDRB     r3,[r4,#-0x53]  ; bps
000708  f88d30c5          STRB     r3,[sp,#0xc5]
00070c  69e3              LDR      r3,[r4,#0x1c]  ; bps
00070e  ea4f77e3          ASR      r7,r3,#31
000712  eb036717          ADD      r7,r3,r7,LSR #24
000716  ea4f2c27          ASR      r12,r7,#8
00071a  f88dc0c6          STRB     r12,[sp,#0xc6]
00071e  f88d30c7          STRB     r3,[sp,#0xc7]
000722  6a63              LDR      r3,[r4,#0x24]  ; bps
000724  ea4f77e3          ASR      r7,r3,#31
000728  eb036717          ADD      r7,r3,r7,LSR #24
00072c  ea4f2c27          ASR      r12,r7,#8
000730  f88dc0c8          STRB     r12,[sp,#0xc8]
000734  f88d30c9          STRB     r3,[sp,#0xc9]
000738  6aa3              LDR      r3,[r4,#0x28]  ; bps
00073a  ea4f77e3          ASR      r7,r3,#31
00073e  eb036717          ADD      r7,r3,r7,LSR #24
000742  ea4f2c27          ASR      r12,r7,#8
000746  f88dc0ca          STRB     r12,[sp,#0xca]
00074a  f88d30cb          STRB     r3,[sp,#0xcb]
00074e  f88d60cc          STRB     r6,[sp,#0xcc]
000752  7863              LDRB     r3,[r4,#1]  ; bps
000754  f88d30cd          STRB     r3,[sp,#0xcd]
000758  6f23              LDR      r3,[r4,#0x70]  ; bps
00075a  ea4f77e3          ASR      r7,r3,#31
00075e  eb036717          ADD      r7,r3,r7,LSR #24
000762  ea4f2c27          ASR      r12,r7,#8
000766  f88dc0ce          STRB     r12,[sp,#0xce]
00076a  f88d30cf          STRB     r3,[sp,#0xcf]
00076e  6fa3              LDR      r3,[r4,#0x78]  ; bps
000770  ea4f77e3          ASR      r7,r3,#31
000774  eb036717          ADD      r7,r3,r7,LSR #24
000778  ea4f2c27          ASR      r12,r7,#8
00077c  f88dc0d0          STRB     r12,[sp,#0xd0]
000780  f88d30d1          STRB     r3,[sp,#0xd1]
000784  6fe3              LDR      r3,[r4,#0x7c]  ; bps
000786  ea4f77e3          ASR      r7,r3,#31
00078a  eb036717          ADD      r7,r3,r7,LSR #24
00078e  ea4f2c27          ASR      r12,r7,#8
000792  f88dc0d2          STRB     r12,[sp,#0xd2]
000796  f88d30d3          STRB     r3,[sp,#0xd3]
00079a  f88d60d4          STRB     r6,[sp,#0xd4]
00079e  f8943055          LDRB     r3,[r4,#0x55]  ; bps
0007a2  f88d30d5          STRB     r3,[sp,#0xd5]
0007a6  f8d430c4          LDR      r3,[r4,#0xc4]  ; bps
0007aa  ea4f77e3          ASR      r7,r3,#31
0007ae  eb036717          ADD      r7,r3,r7,LSR #24
0007b2  ea4f2c27          ASR      r12,r7,#8
0007b6  f88dc0d6          STRB     r12,[sp,#0xd6]
0007ba  f88d30d7          STRB     r3,[sp,#0xd7]
0007be  f8d430cc          LDR      r3,[r4,#0xcc]  ; bps
0007c2  ea4f77e3          ASR      r7,r3,#31
0007c6  eb036717          ADD      r7,r3,r7,LSR #24
0007ca  ea4f2c27          ASR      r12,r7,#8
0007ce  f88dc0d8          STRB     r12,[sp,#0xd8]
0007d2  f88d30d9          STRB     r3,[sp,#0xd9]
0007d6  f8d430d0          LDR      r3,[r4,#0xd0]  ; bps
0007da  ea4f77e3          ASR      r7,r3,#31
0007de  eb036717          ADD      r7,r3,r7,LSR #24
0007e2  ea4f2c27          ASR      r12,r7,#8
0007e6  f88dc0da          STRB     r12,[sp,#0xda]
0007ea  f88d30db          STRB     r3,[sp,#0xdb]
0007ee  f88d60dc          STRB     r6,[sp,#0xdc]
0007f2  f89430a9          LDRB     r3,[r4,#0xa9]  ; bps
0007f6  f88d30dd          STRB     r3,[sp,#0xdd]
0007fa  f8d43118          LDR      r3,[r4,#0x118]  ; bps
0007fe  ea4f77e3          ASR      r7,r3,#31
000802  eb036717          ADD      r7,r3,r7,LSR #24
000806  ea4f2c27          ASR      r12,r7,#8
00080a  f88dc0de          STRB     r12,[sp,#0xde]
00080e  f88d30df          STRB     r3,[sp,#0xdf]
000812  f8d43120          LDR      r3,[r4,#0x120]  ; bps
000816  ea4f77e3          ASR      r7,r3,#31
00081a  eb036717          ADD      r7,r3,r7,LSR #24
00081e  ea4f2c27          ASR      r12,r7,#8
000822  f88dc0e0          STRB     r12,[sp,#0xe0]
000826  f88d30e1          STRB     r3,[sp,#0xe1]
00082a  f8d43124          LDR      r3,[r4,#0x124]  ; bps
00082e  ea4f77e3          ASR      r7,r3,#31
000832  eb036717          ADD      r7,r3,r7,LSR #24
000836  ea4f2c27          ASR      r12,r7,#8
00083a  f88dc0e2          STRB     r12,[sp,#0xe2]
00083e  f88d30e3          STRB     r3,[sp,#0xe3]
000842  f88d60e4          STRB     r6,[sp,#0xe4]
000846  f89430fd          LDRB     r3,[r4,#0xfd]  ; bps
00084a  f88d30e5          STRB     r3,[sp,#0xe5]
00084e  f88d0004          STRB     r0,[sp,#4]
000852  f88d1005          STRB     r1,[sp,#5]
000856  ea4f0045          LSL      r0,r5,#1
00085a  f88d0006          STRB     r0,[sp,#6]
00085e  a91f              ADD      r1,sp,#0x7c
000860  f1a20201          SUB      r2,r2,#1
000864  eb010142          ADD      r1,r1,r2,LSL #1
000868  4602              MOV      r2,r0
00086a  ae01              ADD      r6,sp,#4
00086c  f10d0007          ADD      r0,sp,#7
000870  f7fffffe          BL       mem_copy
000874  2003              MOVS     r0,#3
000876  eb000045          ADD      r0,r0,r5,LSL #1
00087a  b201              SXTH     r1,r0
00087c  a801              ADD      r0,sp,#4
00087e  f7fffffe          BL       CRC16_2
000882  eb060145          ADD      r1,r6,r5,LSL #1
000886  70c8              STRB     r0,[r1,#3]
000888  ea4f2010          LSR      r0,r0,#8
00088c  7108              STRB     r0,[r1,#4]
00088e  f04f0400          MOV      r4,#0
000892  f04f0005          MOV      r0,#5
000896  eb000545          ADD      r5,r0,r5,LSL #1
00089a  e005              B        |L1.2216|
                  |L1.2204|
00089c  5d30              LDRB     r0,[r6,r4]
00089e  f7fffffe          BL       putchar0
0008a2  f1040401          ADD      r4,r4,#1
0008a6  b2e4              UXTB     r4,r4
                  |L1.2216|
0008a8  42a5              CMP      r5,r4
0008aa  d8f7              BHI      |L1.2204|
0008ac  f04f0400          MOV      r4,#0
0008b0  e005              B        |L1.2238|
                  |L1.2226|
0008b2  5d30              LDRB     r0,[r6,r4]
0008b4  f7fffffe          BL       putchar_sc16is700
0008b8  f1040401          ADD      r4,r4,#1
0008bc  b2e4              UXTB     r4,r4
                  |L1.2238|
0008be  42a5              CMP      r5,r4
0008c0  d8f7              BHI      |L1.2226|
0008c2  b03b              ADD      sp,sp,#0xec
0008c4  bdf0              POP      {r4-r7,pc}
;;;426    
                          ENDP

                  modbus_hold_registers_transmit PROC
;;;661    //-----------------------------------------------
;;;662    void modbus_hold_registers_transmit(unsigned char adr,unsigned char func,unsigned short reg_adr,unsigned short reg_quantity)
0008c6  b5f0              PUSH     {r4-r7,lr}
;;;663    {
0008c8  b0b3              SUB      sp,sp,#0xcc
0008ca  461d              MOV      r5,r3
;;;664    char modbus_registers[100];
;;;665    char modbus_tx_buff[100];
;;;666    unsigned short crc_temp;
;;;667    char i;
;;;668    
;;;669    modbus_registers[20]=(char)((LPC_RTC->YEAR)/256);			//Πεγ11  Βπεμ, γξδ
0008cc  4c0f              LDR      r4,|L1.2316|
0008ce  8ba3              LDRH     r3,[r4,#0x1c]
0008d0  ea4f2313          LSR      r3,r3,#8
0008d4  f88d307c          STRB     r3,[sp,#0x7c]
;;;670    modbus_registers[21]=(char)((LPC_RTC->YEAR)%256);
0008d8  8ba3              LDRH     r3,[r4,#0x1c]
0008da  f88d307d          STRB     r3,[sp,#0x7d]
;;;671    modbus_registers[22]=(char)((LPC_RTC->MONTH)/256);		//Πεγ12  Βπεμ, μερφ
0008de  7e23              LDRB     r3,[r4,#0x18]
0008e0  f04f0300          MOV      r3,#0
0008e4  f88d307e          STRB     r3,[sp,#0x7e]
;;;672    modbus_registers[23]=(char)((LPC_RTC->MONTH)%256);
0008e8  7e26              LDRB     r6,[r4,#0x18]
0008ea  f88d607f          STRB     r6,[sp,#0x7f]
;;;673    modbus_registers[24]=(char)((LPC_RTC->DOM)/256);			//Πεγ13  Βπεμ, δενό μερφΰ
0008ee  7b26              LDRB     r6,[r4,#0xc]
0008f0  f88d3080          STRB     r3,[sp,#0x80]
;;;674    modbus_registers[25]=(char)((LPC_RTC->DOM)%256);
0008f4  7b26              LDRB     r6,[r4,#0xc]
0008f6  f88d6081          STRB     r6,[sp,#0x81]
;;;675    modbus_registers[26]=(char)((LPC_RTC->HOUR)/256);			//Πεγ14  Βπεμ, χΰρ
0008fa  7a26              LDRB     r6,[r4,#8]
0008fc  f88d3082          STRB     r3,[sp,#0x82]
;;;676    modbus_registers[27]=(char)((LPC_RTC->HOUR)%256);
000900  7a26              LDRB     r6,[r4,#8]
000902  e005              B        |L1.2320|
                  |L1.2308|
                          DCD      BAT_C_REAL
                  |L1.2312|
                          DCD      bps
                  |L1.2316|
                          DCD      0x40024020
                  |L1.2320|
000910  f88d6083          STRB     r6,[sp,#0x83]
;;;677    modbus_registers[28]=(char)((LPC_RTC->MIN)/256);			//Πεγ15  Βπεμ, μθνσςϋ
000914  7926              LDRB     r6,[r4,#4]
000916  f88d3084          STRB     r3,[sp,#0x84]
;;;678    modbus_registers[29]=(char)((LPC_RTC->MIN)%256);
00091a  7926              LDRB     r6,[r4,#4]
00091c  f88d6085          STRB     r6,[sp,#0x85]
;;;679    modbus_registers[30]=(char)((LPC_RTC->SEC)/256);			//Πεγ16  Βπεμ, ρεκσνδϋ
000920  7826              LDRB     r6,[r4,#0]
000922  f88d3086          STRB     r3,[sp,#0x86]
;;;680    modbus_registers[31]=(char)((LPC_RTC->SEC)%256);
000926  7823              LDRB     r3,[r4,#0]
000928  f88d3087          STRB     r3,[sp,#0x87]
;;;681    modbus_registers[38]=(char)(NUMIST/256);				//Πεγ20  Κξλθχερςβξ βϋοπμθςελει β ρςπσκςσπε
00092c  4bfc              LDR      r3,|L1.3360|
00092e  f9b33000          LDRSH    r3,[r3,#0]  ; NUMIST
000932  ea4f74e3          ASR      r4,r3,#31
000936  eb036414          ADD      r4,r3,r4,LSR #24
00093a  ea4f2624          ASR      r6,r4,#8
00093e  f88d608e          STRB     r6,[sp,#0x8e]
;;;682    modbus_registers[39]=(char)(NUMIST%256);
000942  f88d308f          STRB     r3,[sp,#0x8f]
;;;683    modbus_registers[40]=(char)(PAR/256);					//Πεγ21  Οΰπΰλλελόνΰ πΰαξςΰ βϋοπμθςελει βκλ./βϋκλ.
000946  4bf7              LDR      r3,|L1.3364|
000948  f9b33000          LDRSH    r3,[r3,#0]  ; PAR
00094c  ea4f74e3          ASR      r4,r3,#31
000950  eb036414          ADD      r4,r3,r4,LSR #24
000954  ea4f2624          ASR      r6,r4,#8
000958  f88d6090          STRB     r6,[sp,#0x90]
;;;684    modbus_registers[41]=(char)(PAR%256);
00095c  f88d3091          STRB     r3,[sp,#0x91]
;;;685    modbus_registers[42]=(char)(ZV_ON/256);					//Πεγ22  Ηβσκξβΰ ΰβΰπθινΰ ρθγνΰλθηΰφθ βκλ./βϋκλ.
000960  4bf1              LDR      r3,|L1.3368|
000962  f9b33000          LDRSH    r3,[r3,#0]  ; ZV_ON
000966  ea4f74e3          ASR      r4,r3,#31
00096a  eb036414          ADD      r4,r3,r4,LSR #24
00096e  ea4f2624          ASR      r6,r4,#8
000972  f88d6092          STRB     r6,[sp,#0x92]
;;;686    modbus_registers[43]=(char)(ZV_ON%256);
000976  f88d3093          STRB     r3,[sp,#0x93]
;;;687    modbus_registers[46]=(char)(UBM_AV/256);				//Πεγ24  ΐβΰπθινϋι σπξβενό ξςκλξνενθ νΰοπζενθ ρπεδνει ςξχκθ αΰςΰπεθ, %
00097a  4bec              LDR      r3,|L1.3372|
00097c  f9b33000          LDRSH    r3,[r3,#0]  ; UBM_AV
000980  ea4f74e3          ASR      r4,r3,#31
000984  eb036414          ADD      r4,r3,r4,LSR #24
000988  ea4f2624          ASR      r6,r4,#8
00098c  f88d6096          STRB     r6,[sp,#0x96]
;;;688    modbus_registers[47]=(char)(UBM_AV%256);
000990  f88d3097          STRB     r3,[sp,#0x97]
;;;689    modbus_registers[58]=(char)(TBAT/256);					//Πεγ30  Οεπθξδ οπξβεπκθ φεοθ αΰςΰπεθ, μθνσς.
000994  4be6              LDR      r3,|L1.3376|
000996  f9b33000          LDRSH    r3,[r3,#0]  ; TBAT
00099a  ea4f74e3          ASR      r4,r3,#31
00099e  eb036414          ADD      r4,r3,r4,LSR #24
0009a2  ea4f2624          ASR      r6,r4,#8
0009a6  f88d60a2          STRB     r6,[sp,#0xa2]
;;;690    modbus_registers[59]=(char)(TBAT%256);
0009aa  f88d30a3          STRB     r3,[sp,#0xa3]
;;;691    modbus_registers[60]=(char)(UMAX/256);					//Πεγ31  Μΰκρθμΰλόνξε (ΰβΰπθινξε) νΰοπζενθε βϋοπμθςελει, 0.1Β
0009ae  4be1              LDR      r3,|L1.3380|
0009b0  f9b33000          LDRSH    r3,[r3,#0]  ; UMAX
0009b4  ea4f74e3          ASR      r4,r3,#31
0009b8  eb036414          ADD      r4,r3,r4,LSR #24
0009bc  ea4f2624          ASR      r6,r4,#8
0009c0  f88d60a4          STRB     r6,[sp,#0xa4]
;;;692    modbus_registers[61]=(char)(UMAX%256);
0009c4  f88d30a5          STRB     r3,[sp,#0xa5]
;;;693    modbus_registers[62]=(char)((UB20-DU)/256);				//Πεγ32  Μθνθμΰλόνξε (ΰβΰπθινξε) νΰοπζενθε βϋοπμθςελει, 0.1Β
0009c8  4bdb              LDR      r3,|L1.3384|
0009ca  4cdc              LDR      r4,|L1.3388|
0009cc  f9b33000          LDRSH    r3,[r3,#0]  ; UB20
0009d0  f9b44000          LDRSH    r4,[r4,#0]  ; DU
0009d4  eba30404          SUB      r4,r3,r4
0009d8  ea4f76e4          ASR      r6,r4,#31
0009dc  eb046616          ADD      r6,r4,r6,LSR #24
0009e0  ea4f2726          ASR      r7,r6,#8
0009e4  f88d70a6          STRB     r7,[sp,#0xa6]
;;;694    modbus_registers[63]=(char)((UB20-DU)%256);
0009e8  f88d40a7          STRB     r4,[sp,#0xa7]
;;;695    modbus_registers[64]=(char)(UB0/256);					//Πεγ33  Νΰοπζενθε ρξδεπζΰνθ αΰςΰπεθ οπθ 0γΦ, 0.1Β
0009ec  4cd4              LDR      r4,|L1.3392|
0009ee  f9b44000          LDRSH    r4,[r4,#0]  ; UB0
0009f2  ea4f76e4          ASR      r6,r4,#31
0009f6  eb046616          ADD      r6,r4,r6,LSR #24
0009fa  ea4f2726          ASR      r7,r6,#8
0009fe  f88d70a8          STRB     r7,[sp,#0xa8]
;;;696    modbus_registers[65]=(char)(UB0%256);
000a02  f88d40a9          STRB     r4,[sp,#0xa9]
;;;697    modbus_registers[66]=(char)(UB20/256);					//Πεγ34  Νΰοπζενθε ρξδεπζΰνθ αΰςΰπεθ οπθ 20γΦ, 0.1Β
000a06  ea4f74e3          ASR      r4,r3,#31
000a0a  eb036414          ADD      r4,r3,r4,LSR #24
000a0e  ea4f2624          ASR      r6,r4,#8
000a12  f88d60aa          STRB     r6,[sp,#0xaa]
;;;698    modbus_registers[67]=(char)(UB20%256);
000a16  f88d30ab          STRB     r3,[sp,#0xab]
;;;699    modbus_registers[68]=(char)(USIGN/256);					//Πεγ35  Μθνθμΰλόνξε (ρθγνΰλόνξε) νΰοπζενθε αΰςΰπεθ, 1Β
000a1a  4bca              LDR      r3,|L1.3396|
000a1c  f9b33000          LDRSH    r3,[r3,#0]  ; USIGN
000a20  ea4f74e3          ASR      r4,r3,#31
000a24  eb036414          ADD      r4,r3,r4,LSR #24
000a28  ea4f2624          ASR      r6,r4,#8
000a2c  f88d60ac          STRB     r6,[sp,#0xac]
;;;700    modbus_registers[69]=(char)(USIGN%256);
000a30  f88d30ad          STRB     r3,[sp,#0xad]
;;;701    modbus_registers[70]=(char)(UMN/256);					//Πεγ36  Μθνθμΰλόνξε (ΰβΰπθινξε) νΰοπζενθε οθςΰώωει ρεςθ, 1Β
000a34  4bc4              LDR      r3,|L1.3400|
000a36  f9b33000          LDRSH    r3,[r3,#0]  ; UMN
000a3a  ea4f74e3          ASR      r4,r3,#31
000a3e  eb036414          ADD      r4,r3,r4,LSR #24
000a42  ea4f2624          ASR      r6,r4,#8
000a46  f88d60ae          STRB     r6,[sp,#0xae]
;;;702    modbus_registers[71]=(char)(UMN%256);
000a4a  f88d30af          STRB     r3,[sp,#0xaf]
;;;703    modbus_registers[72]=(char)(U0B/256);					//Πεγ37  Πΰαξχεε νΰοπζενθε οπθ νεββεδεννϋυ αΰςΰπευ, 0.1Β
000a4e  4bbf              LDR      r3,|L1.3404|
000a50  f9b33000          LDRSH    r3,[r3,#0]  ; U0B
000a54  ea4f74e3          ASR      r4,r3,#31
000a58  eb036414          ADD      r4,r3,r4,LSR #24
000a5c  ea4f2624          ASR      r6,r4,#8
000a60  f88d60b0          STRB     r6,[sp,#0xb0]
;;;704    modbus_registers[73]=(char)(U0B%256);
000a64  f88d30b1          STRB     r3,[sp,#0xb1]
;;;705    modbus_registers[74]=(char)(IKB/256);					//Πεγ38  ξκ κξνςπξλ νΰλθχθ αΰςΰπεθ, 0.1ΰ
000a68  4bb9              LDR      r3,|L1.3408|
000a6a  f9b33000          LDRSH    r3,[r3,#0]  ; IKB
000a6e  ea4f74e3          ASR      r4,r3,#31
000a72  eb036414          ADD      r4,r3,r4,LSR #24
000a76  ea4f2624          ASR      r6,r4,#8
000a7a  f88d60b2          STRB     r6,[sp,#0xb2]
;;;706    modbus_registers[75]=(char)(IKB%256);
000a7e  f88d30b3          STRB     r3,[sp,#0xb3]
;;;707    modbus_registers[76]=(char)(IZMAX/256);					//Πεγ39  ξκ ηΰπδΰ αΰςΰπεθ μΰκρθμΰλόνϋι, 0.1ΐ
000a82  4bb4              LDR      r3,|L1.3412|
000a84  f9b33000          LDRSH    r3,[r3,#0]  ; IZMAX
000a88  ea4f74e3          ASR      r4,r3,#31
000a8c  eb036414          ADD      r4,r3,r4,LSR #24
000a90  ea4f2624          ASR      r6,r4,#8
000a94  f88d60b4          STRB     r6,[sp,#0xb4]
;;;708    modbus_registers[77]=(char)(IZMAX%256);
000a98  f88d30b5          STRB     r3,[sp,#0xb5]
;;;709    modbus_registers[78]=(char)(IMAX/256);					//Πεγ40  ξκ οεπεκλώχενθ νΰ αξλόψεε κξλ-βξ βϋοπμθςελει, 0.1ΐ
000a9c  4bae              LDR      r3,|L1.3416|
000a9e  f9b33000          LDRSH    r3,[r3,#0]  ; IMAX
000aa2  ea4f74e3          ASR      r4,r3,#31
000aa6  eb036414          ADD      r4,r3,r4,LSR #24
000aaa  ea4f2624          ASR      r6,r4,#8
000aae  f88d60b6          STRB     r6,[sp,#0xb6]
;;;710    modbus_registers[79]=(char)(IMAX%256);
000ab2  f88d30b7          STRB     r3,[sp,#0xb7]
;;;711    modbus_registers[80]=(char)(IMIN/256);					//Πεγ41  ξκ οεπεκλώχενθ νΰ μενόψεε κξλ-βξ βϋοπμθςελει, 0.1ΐ
000ab6  4ba9              LDR      r3,|L1.3420|
000ab8  f9b33000          LDRSH    r3,[r3,#0]  ; IMIN
000abc  ea4f74e3          ASR      r4,r3,#31
000ac0  eb036414          ADD      r4,r3,r4,LSR #24
000ac4  ea4f2624          ASR      r6,r4,#8
000ac8  f88d60b8          STRB     r6,[sp,#0xb8]
;;;712    modbus_registers[81]=(char)(IMIN%256);
000acc  f88d30b9          STRB     r3,[sp,#0xb9]
;;;713    modbus_registers[82]=(char)(UVZ/256);					//Πεγ42  Νΰοπζενθε βϋπΰβνθβΰώωεγξ ηΰπδΰ, 0.1Β
000ad0  4ba3              LDR      r3,|L1.3424|
000ad2  f9b33000          LDRSH    r3,[r3,#0]  ; UVZ
000ad6  ea4f74e3          ASR      r4,r3,#31
000ada  eb036414          ADD      r4,r3,r4,LSR #24
000ade  ea4f2624          ASR      r6,r4,#8
000ae2  f88d60ba          STRB     r6,[sp,#0xba]
;;;714    modbus_registers[83]=(char)(UVZ%256);
000ae6  f88d30bb          STRB     r3,[sp,#0xbb]
;;;715    modbus_registers[84]=(char)(TZAS/256);					//Πεγ43  Βπεμ ηΰδεπζκθ βκλώχενθ βϋοπμθςελει, ρεκ
000aea  4b9e              LDR      r3,|L1.3428|
000aec  f9b33000          LDRSH    r3,[r3,#0]  ; TZAS
000af0  ea4f74e3          ASR      r4,r3,#31
000af4  eb036414          ADD      r4,r3,r4,LSR #24
000af8  ea4f2624          ASR      r6,r4,#8
000afc  f88d60bc          STRB     r6,[sp,#0xbc]
;;;716    modbus_registers[85]=(char)(TZAS%256);
000b00  f88d30bd          STRB     r3,[sp,#0xbd]
;;;717    modbus_registers[86]=(char)(TMAX/256);					//Πεγ44  εμοεπΰςσπΰ βϋοπμθςελει ΰβΰπθινΰ, 1γΦ
000b04  4b98              LDR      r3,|L1.3432|
000b06  f9b33000          LDRSH    r3,[r3,#0]  ; TMAX
000b0a  ea4f74e3          ASR      r4,r3,#31
000b0e  eb036414          ADD      r4,r3,r4,LSR #24
000b12  ea4f2624          ASR      r6,r4,#8
000b16  f88d60be          STRB     r6,[sp,#0xbe]
;;;718    modbus_registers[87]=(char)(TMAX%256);
000b1a  f88d30bf          STRB     r3,[sp,#0xbf]
;;;719    modbus_registers[88]=(char)(TSIGN/256);					//Πεγ45  εμοεπΰςσπΰ βϋοπμθςελει ρθγνΰλόνΰ, 1γΦ
000b1e  4b93              LDR      r3,|L1.3436|
000b20  f9b33000          LDRSH    r3,[r3,#0]  ; TSIGN
000b24  ea4f74e3          ASR      r4,r3,#31
000b28  eb036414          ADD      r4,r3,r4,LSR #24
000b2c  ea4f2624          ASR      r6,r4,#8
000b30  f88d60c0          STRB     r6,[sp,#0xc0]
;;;720    modbus_registers[89]=(char)(TSIGN%256);
000b34  f88d30c1          STRB     r3,[sp,#0xc1]
;;;721    modbus_registers[90]=(char)(TBATMAX/256);				//Πεγ46  εμοεπΰςσπΰ αΰςΰπεθ ΰβΰπθινΰ, 1γΦ
000b38  4b8d              LDR      r3,|L1.3440|
000b3a  f9b33000          LDRSH    r3,[r3,#0]  ; TBATMAX
000b3e  ea4f74e3          ASR      r4,r3,#31
000b42  eb036414          ADD      r4,r3,r4,LSR #24
000b46  ea4f2624          ASR      r6,r4,#8
000b4a  f88d60c2          STRB     r6,[sp,#0xc2]
;;;722    modbus_registers[91]=(char)(TBATMAX%256);
000b4e  f88d30c3          STRB     r3,[sp,#0xc3]
;;;723    modbus_registers[92]=(char)(TBATSIGN/256);				//Πεγ47  εμοεπΰςσπΰ αΰςΰπεθ ρθγνΰλόνΰ, 1γΦ
000b52  4b88              LDR      r3,|L1.3444|
000b54  f9b33000          LDRSH    r3,[r3,#0]  ; TBATSIGN
000b58  ea4f74e3          ASR      r4,r3,#31
000b5c  eb036414          ADD      r4,r3,r4,LSR #24
000b60  ea4f2624          ASR      r6,r4,#8
000b64  f88d60c4          STRB     r6,[sp,#0xc4]
;;;724    modbus_registers[93]=(char)(TBATSIGN%256);
000b68  f88d30c5          STRB     r3,[sp,#0xc5]
;;;725    
;;;726    
;;;727    modbus_tx_buff[0]=adr;
000b6c  f88d0004          STRB     r0,[sp,#4]
;;;728    modbus_tx_buff[1]=func;
000b70  f88d1005          STRB     r1,[sp,#5]
;;;729    //modbus_tx_buff[2]=(char)(reg_adr/256);
;;;730    //modbus_tx_buff[3]=(char)(reg_adr%256);
;;;731    //modbus_tx_buff[4]=(char)(reg_quantity/256);
;;;732    //modbus_tx_buff[5]=(char)(reg_quantity%256);
;;;733    modbus_tx_buff[2]=(char)(reg_quantity*2);
000b74  ea4f0045          LSL      r0,r5,#1
000b78  f88d0006          STRB     r0,[sp,#6]
;;;734    /*
;;;735    modbus_registers[0]=0x10;
;;;736    modbus_registers[1]=0x11;
;;;737    modbus_registers[2]=0x12;
;;;738    modbus_registers[3]=0x13;
;;;739    modbus_registers[4]=0x14;
;;;740    modbus_registers[5]=0x15;
;;;741    */
;;;742    
;;;743    //if((reg_adr<17)&&(reg_quantity<10))
;;;744    	{
;;;745    	mem_copy((char*)&modbus_tx_buff[3],(char*)&modbus_registers[(reg_adr-1)*2],reg_quantity*2);
000b7c  a91a              ADD      r1,sp,#0x68
000b7e  f1a20201          SUB      r2,r2,#1
000b82  eb010142          ADD      r1,r1,r2,LSL #1
000b86  4602              MOV      r2,r0
000b88  ae01              ADD      r6,sp,#4
000b8a  f10d0007          ADD      r0,sp,#7
000b8e  f7fffffe          BL       mem_copy
;;;746    	}
;;;747    crc_temp=CRC16_2(modbus_tx_buff,(reg_quantity*2)+3);
000b92  2003              MOVS     r0,#3
000b94  eb000045          ADD      r0,r0,r5,LSL #1
000b98  b201              SXTH     r1,r0
000b9a  a801              ADD      r0,sp,#4
000b9c  f7fffffe          BL       CRC16_2
;;;748    
;;;749    modbus_tx_buff[3+(reg_quantity*2)]=crc_temp%256;
000ba0  eb060145          ADD      r1,r6,r5,LSL #1
000ba4  70c8              STRB     r0,[r1,#3]
;;;750    modbus_tx_buff[4+(reg_quantity*2)]=crc_temp/256;
000ba6  ea4f2010          LSR      r0,r0,#8
000baa  7108              STRB     r0,[r1,#4]
;;;751    
;;;752    for (i=0;i<(5+(reg_quantity*2));i++)
000bac  f04f0400          MOV      r4,#0
000bb0  f04f0005          MOV      r0,#5
000bb4  eb000545          ADD      r5,r0,r5,LSL #1
000bb8  e005              B        |L1.3014|
                  |L1.3002|
;;;753    	{
;;;754    	putchar0(modbus_tx_buff[i]);
000bba  5d30              LDRB     r0,[r6,r4]
000bbc  f7fffffe          BL       putchar0
000bc0  f1040401          ADD      r4,r4,#1              ;752
000bc4  b2e4              UXTB     r4,r4                 ;752
                  |L1.3014|
000bc6  42a5              CMP      r5,r4                 ;752
000bc8  d8f7              BHI      |L1.3002|
;;;755    	}
;;;756    
;;;757    for (i=0;i<(5+(reg_quantity*2));i++)
000bca  f04f0400          MOV      r4,#0
000bce  e005              B        |L1.3036|
                  |L1.3024|
;;;758    	{
;;;759    	putchar_sc16is700(modbus_tx_buff[i]);
000bd0  5d30              LDRB     r0,[r6,r4]
000bd2  f7fffffe          BL       putchar_sc16is700
000bd6  f1040401          ADD      r4,r4,#1              ;757
000bda  b2e4              UXTB     r4,r4                 ;757
                  |L1.3036|
000bdc  42a5              CMP      r5,r4                 ;757
000bde  d8f7              BHI      |L1.3024|
;;;760    	}
;;;761    
;;;762    /*	putchar2(modbus_tx_buff[0]);
;;;763    	putchar2(modbus_tx_buff[1]);
;;;764    	putchar2(modbus_tx_buff[2]);
;;;765    	putchar2(modbus_tx_buff[3]);
;;;766    	putchar2(modbus_tx_buff[4]);
;;;767    	putchar2(modbus_tx_buff[5]);
;;;768    	putchar2(modbus_tx_buff[6]);*/
;;;769    //	putchar2(modbus_tx_buff[0]);
;;;770    	//putchar2(modbus_tx_buff[1]);
;;;771    //	putchar2(modbus_tx_buff[2]);
;;;772    //	putchar2(modbus_tx_buff[3]);
;;;773    ///	putchar2(modbus_tx_buff[4]);
;;;774    //	putchar2(modbus_tx_buff[5]);
;;;775    //	putchar2(modbus_tx_buff[6]);
;;;776    }
000be0  b033              ADD      sp,sp,#0xcc
000be2  bdf0              POP      {r4-r7,pc}
;;;777    
                          ENDP

                  modbus_in PROC
;;;56     //-----------------------------------------------
;;;57     void modbus_in(void)
000be4  e92d41f0          PUSH     {r4-r8,lr}
;;;58     {
;;;59     short crc16_calculated;		//βϋχθρλεμΰ θη οπθνςϋυ δΰννϋυ CRC
;;;60     short crc16_incapsulated;	//βρςπξενννΰ β οξρϋλκσ CRC
;;;61     unsigned short modbus_rx_arg0;		//βρςπξεννϋι β οξρϋλκσ οεπβϋι ΰπγσμενς
;;;62     unsigned short modbus_rx_arg1;		//βρςπξεννϋι β οξρϋλκσ βςξπξι ΰπγσμενς
;;;63     unsigned short modbus_rx_arg2;		//βρςπξεννϋι β οξρϋλκσ ςπεςθι ΰπγσμενς
;;;64     unsigned short modbus_rx_arg3;		//βρςπξεννϋι β οξρϋλκσ χεςβεπςϋι ΰπγσμενς
;;;65     unsigned char modbus_func;			//βρςπξεννϋι β οξρϋλκσ κξδ τσνκφθθ
;;;66     
;;;67     
;;;68     
;;;69     mem_copy(modbus_an_buffer,modbus_rx_buffer,modbus_rx_buffer_ptr);
000be8  4e63              LDR      r6,|L1.3448|
000bea  4964              LDR      r1,|L1.3452|
000bec  7872              LDRB     r2,[r6,#1]  ; modbus_rx_buffer_ptr
000bee  f101001e          ADD      r0,r1,#0x1e
000bf2  f7fffffe          BL       mem_copy
;;;70     modbus_rx_counter=modbus_rx_buffer_ptr;
000bf6  7871              LDRB     r1,[r6,#1]  ; modbus_rx_buffer_ptr
000bf8  70b1              STRB     r1,[r6,#2]
;;;71     modbus_rx_buffer_ptr=0;
000bfa  f04f0000          MOV      r0,#0
000bfe  7070              STRB     r0,[r6,#1]
;;;72     bMODBUS_TIMEOUT=0;
000c00  7030              STRB     r0,[r6,#0]
;;;73     	
;;;74     crc16_calculated  = CRC16_2(modbus_an_buffer, modbus_rx_counter-2);
000c02  485e              LDR      r0,|L1.3452|
000c04  f1a10102          SUB      r1,r1,#2
000c08  f100001e          ADD      r0,r0,#0x1e
000c0c  f7fffffe          BL       CRC16_2
000c10  b201              SXTH     r1,r0
;;;75     crc16_incapsulated = *((short*)&modbus_an_buffer[modbus_rx_counter-2]);
000c12  485a              LDR      r0,|L1.3452|
000c14  78b3              LDRB     r3,[r6,#2]  ; modbus_rx_counter
000c16  301e              ADDS     r0,r0,#0x1e
000c18  eb000203          ADD      r2,r0,r3
000c1c  f9322c02          LDRSH    r2,[r2,#-2]
;;;76     
;;;77     modbus_plazma1=modbus_rx_counter;
000c20  80f3              STRH     r3,[r6,#6]
;;;78     modbus_plazma2=crc16_calculated;
000c22  8131              STRH     r1,[r6,#8]
;;;79     modbus_plazma3=crc16_incapsulated;
000c24  8172              STRH     r2,[r6,#0xa]
;;;80     
;;;81     modbus_func=modbus_an_buffer[1];
000c26  7847              LDRB     r7,[r0,#1]  ; modbus_an_buffer
;;;82     modbus_rx_arg0=(((unsigned short)modbus_an_buffer[2])*((unsigned short)256))+((unsigned short)modbus_an_buffer[3]);
000c28  78c3              LDRB     r3,[r0,#3]  ; modbus_an_buffer
000c2a  7884              LDRB     r4,[r0,#2]  ; modbus_an_buffer
000c2c  eb032304          ADD      r3,r3,r4,LSL #8
000c30  b29c              UXTH     r4,r3
;;;83     modbus_rx_arg1=(((unsigned short)modbus_an_buffer[4])*((unsigned short)256))+((unsigned short)modbus_an_buffer[5]);
000c32  7943              LDRB     r3,[r0,#5]  ; modbus_an_buffer
000c34  7905              LDRB     r5,[r0,#4]  ; modbus_an_buffer
000c36  eb032305          ADD      r3,r3,r5,LSL #8
000c3a  b29d              UXTH     r5,r3
;;;84     modbus_rx_arg2=(((unsigned short)modbus_an_buffer[6])*((unsigned short)256))+((unsigned short)modbus_an_buffer[7]);
;;;85     modbus_rx_arg3=(((unsigned short)modbus_an_buffer[8])*((unsigned short)256))+((unsigned short)modbus_an_buffer[9]);
;;;86     
;;;87     
;;;88     if(crc16_calculated==crc16_incapsulated)
000c3c  4291              CMP      r1,r2
000c3e  d16d              BNE      |L1.3356|
;;;89     	{
;;;90     	
;;;91     	if(modbus_an_buffer[0]==MODBUS_ADRESS)
000c40  f8df813c          LDR      r8,|L1.3456|
000c44  7801              LDRB     r1,[r0,#0]  ; modbus_an_buffer
000c46  f9b80000          LDRSH    r0,[r8,#0]  ; MODBUS_ADRESS
000c4a  4281              CMP      r1,r0
000c4c  d166              BNE      |L1.3356|
;;;92     		{
;;;93     		if(modbus_func==3)		//χςενθε οπξθηβξλόνξγξ κξλ-βΰ πεγθρςπξβ υπΰνενθ
000c4e  2f03              CMP      r7,#3
000c50  d109              BNE      |L1.3174|
;;;94     			{
;;;95     			modbus_plazma++;
000c52  88b1              LDRH     r1,[r6,#4]  ; modbus_plazma
000c54  f1010101          ADD      r1,r1,#1
000c58  80b1              STRH     r1,[r6,#4]
;;;96     			modbus_hold_registers_transmit(MODBUS_ADRESS,modbus_func,modbus_rx_arg0,modbus_rx_arg1);
000c5a  462b              MOV      r3,r5
000c5c  4622              MOV      r2,r4
000c5e  4639              MOV      r1,r7
000c60  b2c0              UXTB     r0,r0
000c62  f7fffffe          BL       modbus_hold_registers_transmit
                  |L1.3174|
;;;97     			}
;;;98     
;;;99     		if(modbus_func==4)		//χςενθε οπξθηβξλόνξγξ κξλ-βΰ πεγθρςπξβ	βυξδξβ
000c66  2f04              CMP      r7,#4
000c68  d005              BEQ      |L1.3190|
;;;100    			{
;;;101    			modbus_input_registers_transmit(MODBUS_ADRESS,modbus_func,modbus_rx_arg0,modbus_rx_arg1);
;;;102    			}
;;;103    
;;;104    		else if(modbus_func==6) 	//ηΰοθρό πεγθρςπξβ υπΰνενθ
000c6a  2f06              CMP      r7,#6
000c6c  d156              BNE      |L1.3356|
;;;105    			{
;;;106    			if(modbus_rx_arg0==11)		//Σρςΰνξβκΰ βπεμενθ 
;;;107    				{
;;;108    				LPC_RTC->YEAR=(uint16_t)modbus_rx_arg1;
000c6e  4845              LDR      r0,|L1.3460|
000c70  2c0b              CMP      r4,#0xb               ;106
000c72  d00a              BEQ      |L1.3210|
000c74  e00a              B        |L1.3212|
                  |L1.3190|
000c76  f8b80000          LDRH     r0,[r8,#0]            ;101  ; MODBUS_ADRESS
000c7a  462b              MOV      r3,r5                 ;101
000c7c  4622              MOV      r2,r4                 ;101
000c7e  4639              MOV      r1,r7                 ;101
000c80  e8bd41f0          POP      {r4-r8,lr}            ;101
000c84  b2c0              UXTB     r0,r0                 ;101
000c86  f7ffbffe          B.W      modbus_input_registers_transmit
                  |L1.3210|
000c8a  8785              STRH     r5,[r0,#0x3c]
                  |L1.3212|
;;;109    				}
;;;110    			if(modbus_rx_arg0==12)		//Σρςΰνξβκΰ βπεμενθ 
000c8c  2c0c              CMP      r4,#0xc
000c8e  d101              BNE      |L1.3220|
;;;111    				{
;;;112    				LPC_RTC->MONTH=(uint16_t)modbus_rx_arg1;
000c90  f8805038          STRB     r5,[r0,#0x38]
                  |L1.3220|
;;;113    				}
;;;114    			if(modbus_rx_arg0==13)		//Σρςΰνξβκΰ βπεμενθ 
000c94  2c0d              CMP      r4,#0xd
000c96  d101              BNE      |L1.3228|
;;;115    				{
;;;116    				LPC_RTC->DOM=(uint16_t)modbus_rx_arg1;
000c98  f880502c          STRB     r5,[r0,#0x2c]
                  |L1.3228|
;;;117    				}
;;;118    			if(modbus_rx_arg0==14)		//Σρςΰνξβκΰ βπεμενθ 
000c9c  2c0e              CMP      r4,#0xe
000c9e  d101              BNE      |L1.3236|
;;;119    				{
;;;120    				LPC_RTC->HOUR=(uint16_t)modbus_rx_arg1;
000ca0  f8805028          STRB     r5,[r0,#0x28]
                  |L1.3236|
;;;121    				}
;;;122    			if(modbus_rx_arg0==15)		//Σρςΰνξβκΰ βπεμενθ 
000ca4  2c0f              CMP      r4,#0xf
000ca6  d101              BNE      |L1.3244|
;;;123    				{
;;;124    				LPC_RTC->MIN=(uint16_t)modbus_rx_arg1;
000ca8  f8805024          STRB     r5,[r0,#0x24]
                  |L1.3244|
;;;125    				}
;;;126    			if(modbus_rx_arg0==16)		//Σρςΰνξβκΰ βπεμενθ 
000cac  2c10              CMP      r4,#0x10
000cae  d101              BNE      |L1.3252|
;;;127    				{
;;;128    				LPC_RTC->SEC=(uint16_t)modbus_rx_arg1;
000cb0  f8805020          STRB     r5,[r0,#0x20]
                  |L1.3252|
;;;129    				}
;;;130    			if(modbus_rx_arg0==20)		//ςξκ ρςΰαθλθηΰφθθ δλ πεζθμΰ ρςΰαθλθηΰφθθ ςξκΰ
000cb4  2c14              CMP      r4,#0x14
000cb6  d106              BNE      |L1.3270|
;;;131    				{
;;;132    				if((modbus_rx_arg1>0)&&(modbus_rx_arg1<5))
000cb8  1e68              SUBS     r0,r5,#1
000cba  2804              CMP      r0,#4
000cbc  d203              BCS      |L1.3270|
;;;133    				lc640_write_int(EE_NUMIST,modbus_rx_arg1);  
000cbe  4629              MOV      r1,r5
000cc0  2098              MOVS     r0,#0x98
000cc2  f7fffffe          BL       lc640_write_int
                  |L1.3270|
;;;134    				}
;;;135    			if(modbus_rx_arg0==21)		//ςξκ ρςΰαθλθηΰφθθ δλ πεζθμΰ ρςΰαθλθηΰφθθ ςξκΰ
000cc6  2c15              CMP      r4,#0x15
000cc8  d106              BNE      |L1.3288|
;;;136    				{
;;;137    				if((modbus_rx_arg1==0)||(modbus_rx_arg1==1))
000cca  b10d              CBZ      r5,|L1.3280|
000ccc  2d01              CMP      r5,#1
000cce  d103              BNE      |L1.3288|
                  |L1.3280|
;;;138    				lc640_write_int(EE_PAR,modbus_rx_arg1);  
000cd0  4629              MOV      r1,r5
000cd2  20ca              MOVS     r0,#0xca
000cd4  f7fffffe          BL       lc640_write_int
                  |L1.3288|
;;;139    				}
;;;140    			if(modbus_rx_arg0==22)		//ςξκ ρςΰαθλθηΰφθθ δλ πεζθμΰ ρςΰαθλθηΰφθθ ςξκΰ
000cd8  2c16              CMP      r4,#0x16
000cda  d106              BNE      |L1.3306|
;;;141    				{
;;;142    				if((modbus_rx_arg1==0)||(modbus_rx_arg1==1))
000cdc  b10d              CBZ      r5,|L1.3298|
000cde  2d01              CMP      r5,#1
000ce0  d103              BNE      |L1.3306|
                  |L1.3298|
;;;143    				lc640_write_int(EE_ZV_ON,modbus_rx_arg1);  
000ce2  4629              MOV      r1,r5
000ce4  2086              MOVS     r0,#0x86
000ce6  f7fffffe          BL       lc640_write_int
                  |L1.3306|
;;;144    				}
;;;145    			if(modbus_rx_arg0==23)		//ςξκ ρςΰαθλθηΰφθθ δλ πεζθμΰ ρςΰαθλθηΰφθθ ςξκΰ
000cea  2c17              CMP      r4,#0x17
000cec  d106              BNE      |L1.3324|
;;;146    				{
;;;147    				if((modbus_rx_arg1==0)||(modbus_rx_arg1==1))
000cee  b10d              CBZ      r5,|L1.3316|
000cf0  2d01              CMP      r5,#1
000cf2  d103              BNE      |L1.3324|
                  |L1.3316|
;;;148    				lc640_write_int(EE_TERMOKOMP,modbus_rx_arg1);  
000cf4  4629              MOV      r1,r5
000cf6  20f2              MOVS     r0,#0xf2
000cf8  f7fffffe          BL       lc640_write_int
                  |L1.3324|
;;;149    				}
;;;150    			if(modbus_rx_arg0==24)		//ςξκ ρςΰαθλθηΰφθθ δλ πεζθμΰ ρςΰαθλθηΰφθθ ςξκΰ
000cfc  2c18              CMP      r4,#0x18
000cfe  d104              BNE      |L1.3338|
;;;151    				{
;;;152    				if((modbus_rx_arg1>=0)||(modbus_rx_arg1<=20))
;;;153    				lc640_write_int(EE_UBM_AV,modbus_rx_arg1);  
000d00  4629              MOV      r1,r5
000d02  f44f7019          MOV      r0,#0x264
000d06  f7fffffe          BL       lc640_write_int
                  |L1.3338|
;;;154    				}
;;;155    
;;;156    
;;;157    			if(modbus_rx_arg0==30)		//νΰοπζενθε ρςΰαθλθηΰφθθ δλ πεζθμΰ ρςΰαθλθηΰφθθ νΰοπζενθ
000d0a  2c1e              CMP      r4,#0x1e
000d0c  d148              BNE      |L1.3488|
;;;158    				{
;;;159    				if(modbus_rx_arg1<0)TBAT=0;
;;;160    				else if((modbus_rx_arg1>0)&&(modbus_rx_arg1<=5))modbus_rx_arg1=0;
000d0e  1e69              SUBS     r1,r5,#1
;;;161    				else if(modbus_rx_arg1>=60)TBAT=60;
000d10  4807              LDR      r0,|L1.3376|
000d12  2904              CMP      r1,#4                 ;160
000d14  d838              BHI      |L1.3464|
000d16  f04f0500          MOV      r5,#0                 ;160
000d1a  e03c              B        |L1.3478|
                  |L1.3356|
000d1c  e0b2              B        |L1.3716|
000d1e  0000              DCW      0x0000
                  |L1.3360|
                          DCD      NUMIST
                  |L1.3364|
                          DCD      PAR
                  |L1.3368|
                          DCD      ZV_ON
                  |L1.3372|
                          DCD      UBM_AV
                  |L1.3376|
                          DCD      TBAT
                  |L1.3380|
                          DCD      UMAX
                  |L1.3384|
                          DCD      UB20
                  |L1.3388|
                          DCD      ||DU||
                  |L1.3392|
                          DCD      UB0
                  |L1.3396|
                          DCD      USIGN
                  |L1.3400|
                          DCD      UMN
                  |L1.3404|
                          DCD      U0B
                  |L1.3408|
                          DCD      IKB
                  |L1.3412|
                          DCD      IZMAX
                  |L1.3416|
                          DCD      IMAX
                  |L1.3420|
                          DCD      IMIN
                  |L1.3424|
                          DCD      UVZ
                  |L1.3428|
                          DCD      TZAS
                  |L1.3432|
                          DCD      TMAX
                  |L1.3436|
                          DCD      TSIGN
                  |L1.3440|
                          DCD      TBATMAX
                  |L1.3444|
                          DCD      TBATSIGN
                  |L1.3448|
                          DCD      ||area_number.10||
                  |L1.3452|
                          DCD      ||area_number.6||
                  |L1.3456|
                          DCD      MODBUS_ADRESS
                  |L1.3460|
                          DCD      0x40024000
                  |L1.3464|
000d88  2d3c              CMP      r5,#0x3c
000d8a  d303              BCC      |L1.3476|
000d8c  f04f013c          MOV      r1,#0x3c
000d90  8001              STRH     r1,[r0,#0]
000d92  e000              B        |L1.3478|
                  |L1.3476|
;;;162    				else TBAT=modbus_rx_arg1;
000d94  8005              STRH     r5,[r0,#0]
                  |L1.3478|
;;;163    				lc640_write_int(EE_TBAT,TBAT);
000d96  f9b01000          LDRSH    r1,[r0,#0]  ; TBAT
000d9a  20c2              MOVS     r0,#0xc2
000d9c  f7fffffe          BL       lc640_write_int
                  |L1.3488|
;;;164    	     		}
;;;165    			if(modbus_rx_arg0==31)		//
000da0  2c1f              CMP      r4,#0x1f
000da2  d103              BNE      |L1.3500|
;;;166    				{
;;;167    				lc640_write_int(EE_UMAX,modbus_rx_arg1);
000da4  4629              MOV      r1,r5
000da6  2078              MOVS     r0,#0x78
000da8  f7fffffe          BL       lc640_write_int
                  |L1.3500|
;;;168    	     		}
;;;169    			if(modbus_rx_arg0==32)		//
000dac  2c20              CMP      r4,#0x20
000dae  d106              BNE      |L1.3518|
;;;170    				{
;;;171    				lc640_write_int(EE_DU,UB20-modbus_rx_arg1);
000db0  4835              LDR      r0,|L1.3720|
000db2  f9b00000          LDRSH    r0,[r0,#0]  ; UB20
000db6  1b41              SUBS     r1,r0,r5
000db8  20c8              MOVS     r0,#0xc8
000dba  f7fffffe          BL       lc640_write_int
                  |L1.3518|
;;;172    	     		}
;;;173    			if(modbus_rx_arg0==33)		//
000dbe  2c21              CMP      r4,#0x21
000dc0  d103              BNE      |L1.3530|
;;;174    				{
;;;175    				lc640_write_int(EE_UB0,modbus_rx_arg1);
000dc2  4629              MOV      r1,r5
000dc4  207a              MOVS     r0,#0x7a
000dc6  f7fffffe          BL       lc640_write_int
                  |L1.3530|
;;;176    	     		}
;;;177    			if(modbus_rx_arg0==34)		//
000dca  2c22              CMP      r4,#0x22
000dcc  d103              BNE      |L1.3542|
;;;178    				{
;;;179    				lc640_write_int(EE_UB20,modbus_rx_arg1);
000dce  4629              MOV      r1,r5
000dd0  207c              MOVS     r0,#0x7c
000dd2  f7fffffe          BL       lc640_write_int
                  |L1.3542|
;;;180    	     		}
;;;181    			if(modbus_rx_arg0==35)		//
000dd6  2c23              CMP      r4,#0x23
000dd8  d103              BNE      |L1.3554|
;;;182    				{
;;;183    				lc640_write_int(EE_USIGN,modbus_rx_arg1);
000dda  4629              MOV      r1,r5
000ddc  2082              MOVS     r0,#0x82
000dde  f7fffffe          BL       lc640_write_int
                  |L1.3554|
;;;184    	     		}
;;;185    			if(modbus_rx_arg0==36)		//
000de2  2c24              CMP      r4,#0x24
000de4  d103              BNE      |L1.3566|
;;;186    				{
;;;187    				lc640_write_int(EE_UMN,modbus_rx_arg1);
000de6  4629              MOV      r1,r5
000de8  2084              MOVS     r0,#0x84
000dea  f7fffffe          BL       lc640_write_int
                  |L1.3566|
;;;188    	     		}
;;;189    			if(modbus_rx_arg0==37)		//
000dee  2c25              CMP      r4,#0x25
000df0  d103              BNE      |L1.3578|
;;;190    				{
;;;191    				lc640_write_int(EE_U0B,modbus_rx_arg1);
000df2  4629              MOV      r1,r5
000df4  2094              MOVS     r0,#0x94
000df6  f7fffffe          BL       lc640_write_int
                  |L1.3578|
;;;192    	     		}
;;;193    			if(modbus_rx_arg0==38)		//
000dfa  2c26              CMP      r4,#0x26
000dfc  d103              BNE      |L1.3590|
;;;194    				{
;;;195    				lc640_write_int(EE_IKB,modbus_rx_arg1);
000dfe  4629              MOV      r1,r5
000e00  2088              MOVS     r0,#0x88
000e02  f7fffffe          BL       lc640_write_int
                  |L1.3590|
;;;196    	     		}
;;;197    			if(modbus_rx_arg0==39)		//
000e06  2c27              CMP      r4,#0x27
000e08  d103              BNE      |L1.3602|
;;;198    				{
;;;199    				lc640_write_int(EE_IZMAX,modbus_rx_arg1);
000e0a  4629              MOV      r1,r5
000e0c  2092              MOVS     r0,#0x92
000e0e  f7fffffe          BL       lc640_write_int
                  |L1.3602|
;;;200    	     		}
;;;201    			if(modbus_rx_arg0==40)		//
000e12  2c28              CMP      r4,#0x28
000e14  d103              BNE      |L1.3614|
;;;202    				{
;;;203    				lc640_write_int(EE_IMAX,modbus_rx_arg1);
000e16  4629              MOV      r1,r5
000e18  208c              MOVS     r0,#0x8c
000e1a  f7fffffe          BL       lc640_write_int
                  |L1.3614|
;;;204    	     		}
;;;205    			if(modbus_rx_arg0==41)		//
000e1e  2c29              CMP      r4,#0x29
000e20  d103              BNE      |L1.3626|
;;;206    				{
;;;207    				lc640_write_int(EE_IMIN,modbus_rx_arg1);
000e22  4629              MOV      r1,r5
000e24  208e              MOVS     r0,#0x8e
000e26  f7fffffe          BL       lc640_write_int
                  |L1.3626|
;;;208    	     		}
;;;209    			if(modbus_rx_arg0==42)		//
000e2a  2c2a              CMP      r4,#0x2a
000e2c  d103              BNE      |L1.3638|
;;;210    				{
;;;211    				lc640_write_int(EE_UVZ,modbus_rx_arg1);
000e2e  4629              MOV      r1,r5
000e30  20de              MOVS     r0,#0xde
000e32  f7fffffe          BL       lc640_write_int
                  |L1.3638|
;;;212    	     		}
;;;213    			if(modbus_rx_arg0==43)		//
000e36  2c2b              CMP      r4,#0x2b
000e38  d103              BNE      |L1.3650|
;;;214    				{
;;;215    				lc640_write_int(EE_TZAS,modbus_rx_arg1);
000e3a  4629              MOV      r1,r5
000e3c  2096              MOVS     r0,#0x96
000e3e  f7fffffe          BL       lc640_write_int
                  |L1.3650|
;;;216    	     		}
;;;217    			if(modbus_rx_arg0==44)		//
000e42  2c2c              CMP      r4,#0x2c
000e44  d103              BNE      |L1.3662|
;;;218    				{
;;;219    				lc640_write_int(EE_TMAX,modbus_rx_arg1);
000e46  4629              MOV      r1,r5
000e48  207e              MOVS     r0,#0x7e
000e4a  f7fffffe          BL       lc640_write_int
                  |L1.3662|
;;;220    	     		}
;;;221    			if(modbus_rx_arg0==45)		//
000e4e  2c2d              CMP      r4,#0x2d
000e50  d103              BNE      |L1.3674|
;;;222    				{
;;;223    				lc640_write_int(EE_TSIGN,modbus_rx_arg1);
000e52  4629              MOV      r1,r5
000e54  20c6              MOVS     r0,#0xc6
000e56  f7fffffe          BL       lc640_write_int
                  |L1.3674|
;;;224    	     		}
;;;225    			if(modbus_rx_arg0==46)		//
000e5a  2c2e              CMP      r4,#0x2e
000e5c  d103              BNE      |L1.3686|
;;;226    				{
;;;227    				lc640_write_int(EE_TBATMAX,modbus_rx_arg1);
000e5e  4629              MOV      r1,r5
000e60  20cc              MOVS     r0,#0xcc
000e62  f7fffffe          BL       lc640_write_int
                  |L1.3686|
;;;228    	     		}
;;;229    			if(modbus_rx_arg0==47)		//
000e66  2c2f              CMP      r4,#0x2f
000e68  d103              BNE      |L1.3698|
;;;230    				{
;;;231    				lc640_write_int(EE_TBATSIGN,modbus_rx_arg1);
000e6a  4629              MOV      r1,r5
000e6c  20ce              MOVS     r0,#0xce
000e6e  f7fffffe          BL       lc640_write_int
                  |L1.3698|
;;;232    	     		}
;;;233    			if(modbus_rx_arg0==19)		//βκλ/βϋκλ θρςξχνθκΰ νΰοπ.
;;;234    				{
;;;235    	/*			if(modbus_rx_arg1==1)
;;;236    					{
;;;237    					if(work_stat!=wsPS)
;;;238    						{
;;;239    						work_stat=wsPS;
;;;240    						time_proc=0;
;;;241    						time_proc_remain=T_PROC_PS;
;;;242    						restart_on_PS();
;;;243    						lc640_write_int(EE_MAIN_MENU_MODE,mmmIN);
;;;244    						}
;;;245    					}
;;;246    				if(modbus_rx_arg1==0)
;;;247    					{
;;;248    					if(work_stat==wsPS)
;;;249    						{
;;;250    						work_stat=wsOFF;
;;;251    						restart_off();
;;;252    						}
;;;253    					} */
;;;254    				}
;;;255    			if(modbus_rx_arg0==20)		//βκλ/βϋκλ θρςξχνθκΰ ςξκΰ
;;;256    				{
;;;257    /*				if(modbus_rx_arg1==1)
;;;258    					{
;;;259    					if(work_stat!=wsGS)
;;;260    						{
;;;261    						work_stat=wsGS;
;;;262    						time_proc=0;
;;;263    						time_proc_remain=T_PROC_GS;
;;;264    						lc640_write_int(EE_MAIN_MENU_MODE,mmmIT);
;;;265    						}
;;;266    					}
;;;267    				if(modbus_rx_arg1==0)
;;;268    					{
;;;269    					if(work_stat==wsGS)
;;;270    						{
;;;271    						work_stat=wsOFF;
;;;272    						restart_off();
;;;273    						}
;;;274    					}*/
;;;275    				}
;;;276    			modbus_hold_register_transmit(MODBUS_ADRESS,modbus_func,modbus_rx_arg0);
000e72  f8b80000          LDRH     r0,[r8,#0]  ; MODBUS_ADRESS
000e76  4622              MOV      r2,r4
000e78  4639              MOV      r1,r7
000e7a  e8bd41f0          POP      {r4-r8,lr}
000e7e  b2c0              UXTB     r0,r0
000e80  f7ffbffe          B.W      modbus_hold_register_transmit
                  |L1.3716|
;;;277    			}
;;;278    		} 
;;;279    	//modbus_plazma++;
;;;280    	}
;;;281    // modbus_plazma++;
;;;282    
;;;283    }
000e84  e8bd81f0          POP      {r4-r8,pc}
;;;284    
                          ENDP

                  |L1.3720|
                          DCD      UB20

                          AREA ||area_number.2||, CODE, READONLY, ALIGN=2

                          EXPORTAS ||area_number.2||, ||.text||
                  modbus_register_transmit PROC
;;;285    //-----------------------------------------------
;;;286    void modbus_register_transmit(unsigned char adr,unsigned char func,unsigned short reg_adr)
000000  b5f0              PUSH     {r4-r7,lr}
;;;287    {
000002  b0b3              SUB      sp,sp,#0xcc
;;;288    char modbus_registers[150];
;;;289    char modbus_tx_buff[50];
;;;290    unsigned short crc_temp;
;;;291    char i;
;;;292    
;;;293    
;;;294    modbus_registers[0]=(char)(load_U/256);					//Πεγ1
000004  4bff              LDR      r3,|L2.1028|
000006  f9b33000          LDRSH    r3,[r3,#0]  ; load_U
00000a  ea4f74e3          ASR      r4,r3,#31
00000e  eb036414          ADD      r4,r3,r4,LSR #24
000012  ea4f2524          ASR      r5,r4,#8
000016  f88d5034          STRB     r5,[sp,#0x34]
;;;295    modbus_registers[1]=(char)(load_U%256);
00001a  f88d3035          STRB     r3,[sp,#0x35]
;;;296    modbus_registers[2]=(char)(load_I/256);					//Πεγ2
00001e  4bfa              LDR      r3,|L2.1032|
000020  f9b34000          LDRSH    r4,[r3,#0]  ; load_I
000024  ea4f73e4          ASR      r3,r4,#31
000028  eb046513          ADD      r5,r4,r3,LSR #24
00002c  f3c52307          UBFX     r3,r5,#8,#8
000030  f88d3036          STRB     r3,[sp,#0x36]
;;;297    modbus_registers[3]=(char)(load_I%256);
000034  b2e4              UXTB     r4,r4
000036  f88d4037          STRB     r4,[sp,#0x37]
;;;298    modbus_registers[4]=(char)(Ib_ips_termokompensat/256);		//Πεγ3
00003a  4df4              LDR      r5,|L2.1036|
00003c  f9b55000          LDRSH    r5,[r5,#0]  ; Ib_ips_termokompensat
000040  ea4f76e5          ASR      r6,r5,#31
000044  eb056616          ADD      r6,r5,r6,LSR #24
000048  ea4f2726          ASR      r7,r6,#8
00004c  f88d7038          STRB     r7,[sp,#0x38]
;;;299    modbus_registers[5]=(char)(Ib_ips_termokompensat%256);
000050  f88d5039          STRB     r5,[sp,#0x39]
;;;300    modbus_registers[6]=(char)(t_ext[0]/256);				//Πεγ4
000054  4dee              LDR      r5,|L2.1040|
000056  f9b55000          LDRSH    r5,[r5,#0]  ; t_ext
00005a  ea4f76e5          ASR      r6,r5,#31
00005e  eb056616          ADD      r6,r5,r6,LSR #24
000062  ea4f2726          ASR      r7,r6,#8
000066  f88d703a          STRB     r7,[sp,#0x3a]
;;;301    modbus_registers[7]=(char)(t_ext[0]%256);
00006a  f88d503b          STRB     r5,[sp,#0x3b]
;;;302    modbus_registers[8]=(char)(net_Ua/256);					//Πεγ5
00006e  4de9              LDR      r5,|L2.1044|
000070  f9b55000          LDRSH    r5,[r5,#0]  ; net_Ua
000074  ea4f76e5          ASR      r6,r5,#31
000078  eb056616          ADD      r6,r5,r6,LSR #24
00007c  ea4f2726          ASR      r7,r6,#8
000080  f88d703c          STRB     r7,[sp,#0x3c]
;;;303    modbus_registers[9]=(char)(net_Ua%256);		 	
000084  f88d503d          STRB     r5,[sp,#0x3d]
;;;304    modbus_registers[10]=(char)(net_Ub/256);				//Πεγ6
000088  4de3              LDR      r5,|L2.1048|
00008a  f9b55000          LDRSH    r5,[r5,#0]  ; net_Ub
00008e  ea4f76e5          ASR      r6,r5,#31
000092  eb056616          ADD      r6,r5,r6,LSR #24
000096  ea4f2726          ASR      r7,r6,#8
00009a  f88d703e          STRB     r7,[sp,#0x3e]
;;;305    modbus_registers[11]=(char)(net_Ub%256);
00009e  f88d503f          STRB     r5,[sp,#0x3f]
;;;306    modbus_registers[12]=(char)(net_Uc/256);				//Πεγ7
0000a2  4dde              LDR      r5,|L2.1052|
0000a4  f9b55000          LDRSH    r5,[r5,#0]  ; net_Uc
0000a8  ea4f76e5          ASR      r6,r5,#31
0000ac  eb056616          ADD      r6,r5,r6,LSR #24
0000b0  ea4f2726          ASR      r7,r6,#8
0000b4  f88d7040          STRB     r7,[sp,#0x40]
;;;307    modbus_registers[13]=(char)(net_Uc%256);
0000b8  f88d5041          STRB     r5,[sp,#0x41]
;;;308    modbus_registers[14]=(char)(net_F3/256);				//Πεγ8
0000bc  4dd8              LDR      r5,|L2.1056|
0000be  f9b55000          LDRSH    r5,[r5,#0]  ; net_F3
0000c2  ea4f76e5          ASR      r6,r5,#31
0000c6  eb056616          ADD      r6,r5,r6,LSR #24
0000ca  ea4f2726          ASR      r7,r6,#8
0000ce  f88d7042          STRB     r7,[sp,#0x42]
;;;309    modbus_registers[15]=(char)(net_F3%256);
0000d2  f88d5043          STRB     r5,[sp,#0x43]
;;;310    modbus_registers[16]=(char)(load_I/256);				//Πεγ9
0000d6  f88d3044          STRB     r3,[sp,#0x44]
;;;311    modbus_registers[17]=(char)(load_I%256);
0000da  f88d4045          STRB     r4,[sp,#0x45]
;;;312    modbus_registers[18]=(char)(load_I/256);				//Πεγ10
0000de  f88d3046          STRB     r3,[sp,#0x46]
;;;313    modbus_registers[19]=(char)(load_I%256);
0000e2  f88d4047          STRB     r4,[sp,#0x47]
;;;314    modbus_registers[20]=(char)((LPC_RTC->YEAR)/256);			//Πεγ11
0000e6  4dcf              LDR      r5,|L2.1060|
0000e8  8bae              LDRH     r6,[r5,#0x1c]
0000ea  ea4f2616          LSR      r6,r6,#8
0000ee  f88d6048          STRB     r6,[sp,#0x48]
;;;315    modbus_registers[21]=(char)((LPC_RTC->YEAR)%256);
0000f2  8bae              LDRH     r6,[r5,#0x1c]
0000f4  f88d6049          STRB     r6,[sp,#0x49]
;;;316    modbus_registers[22]=(char)((LPC_RTC->MONTH)/256);		//Πεγ12
0000f8  7e2e              LDRB     r6,[r5,#0x18]
0000fa  f04f0600          MOV      r6,#0
0000fe  f88d604a          STRB     r6,[sp,#0x4a]
;;;317    modbus_registers[23]=(char)((LPC_RTC->MONTH)%256);
000102  7e2f              LDRB     r7,[r5,#0x18]
000104  f88d704b          STRB     r7,[sp,#0x4b]
;;;318    modbus_registers[24]=(char)((LPC_RTC->DOM)/256);			//Πεγ13
000108  7b2f              LDRB     r7,[r5,#0xc]
00010a  f88d604c          STRB     r6,[sp,#0x4c]
;;;319    modbus_registers[25]=(char)((LPC_RTC->DOM)%256);
00010e  7b2f              LDRB     r7,[r5,#0xc]
000110  f88d704d          STRB     r7,[sp,#0x4d]
;;;320    modbus_registers[26]=(char)((LPC_RTC->HOUR)/256);			//Πεγ14
000114  7a2f              LDRB     r7,[r5,#8]
000116  f88d604e          STRB     r6,[sp,#0x4e]
;;;321    modbus_registers[27]=(char)((LPC_RTC->HOUR)%256);
00011a  7a2f              LDRB     r7,[r5,#8]
00011c  f88d704f          STRB     r7,[sp,#0x4f]
;;;322    modbus_registers[28]=(char)((LPC_RTC->MIN)/256);			//Πεγ15
000120  792f              LDRB     r7,[r5,#4]
000122  f88d6050          STRB     r6,[sp,#0x50]
;;;323    modbus_registers[29]=(char)((LPC_RTC->MIN)%256);
000126  792f              LDRB     r7,[r5,#4]
000128  f88d7051          STRB     r7,[sp,#0x51]
;;;324    modbus_registers[30]=(char)((LPC_RTC->SEC)/256);			//Πεγ16
00012c  782f              LDRB     r7,[r5,#0]
00012e  f88d6052          STRB     r6,[sp,#0x52]
;;;325    modbus_registers[31]=(char)((LPC_RTC->SEC)%256);
000132  782d              LDRB     r5,[r5,#0]
000134  f88d5053          STRB     r5,[sp,#0x53]
;;;326    modbus_registers[32]=(char)(load_I/256);				//Πεγ17
000138  f88d3054          STRB     r3,[sp,#0x54]
;;;327    modbus_registers[33]=(char)(load_I%256);
00013c  f88d4055          STRB     r4,[sp,#0x55]
;;;328    modbus_registers[34]=(char)(load_I/256);				//Πεγ18
000140  f88d3056          STRB     r3,[sp,#0x56]
;;;329    modbus_registers[35]=(char)(load_I%256);
000144  f88d4057          STRB     r4,[sp,#0x57]
;;;330    modbus_registers[36]=(char)(load_I/256);		//Πεγ19
000148  f88d3058          STRB     r3,[sp,#0x58]
;;;331    modbus_registers[37]=(char)(load_I%256);
00014c  f88d4059          STRB     r4,[sp,#0x59]
;;;332    modbus_registers[38]=(char)(NUMIST/256);		//Πεγ20
000150  4db5              LDR      r5,|L2.1064|
000152  f9b55000          LDRSH    r5,[r5,#0]  ; NUMIST
000156  ea4f76e5          ASR      r6,r5,#31
00015a  eb056616          ADD      r6,r5,r6,LSR #24
00015e  ea4f2726          ASR      r7,r6,#8
000162  f88d705a          STRB     r7,[sp,#0x5a]
;;;333    modbus_registers[39]=(char)(NUMIST%256);
000166  f88d505b          STRB     r5,[sp,#0x5b]
;;;334    modbus_registers[40]=(char)(PAR/256);		//Πεγ21
00016a  4db0              LDR      r5,|L2.1068|
00016c  f9b55000          LDRSH    r5,[r5,#0]  ; PAR
000170  ea4f76e5          ASR      r6,r5,#31
000174  eb056616          ADD      r6,r5,r6,LSR #24
000178  ea4f2726          ASR      r7,r6,#8
00017c  f88d705c          STRB     r7,[sp,#0x5c]
;;;335    modbus_registers[41]=(char)(PAR%256);
000180  f88d505d          STRB     r5,[sp,#0x5d]
;;;336    modbus_registers[42]=(char)(ZV_ON/256);		//Πεγ22
000184  4daa              LDR      r5,|L2.1072|
000186  f9b55000          LDRSH    r5,[r5,#0]  ; ZV_ON
00018a  ea4f76e5          ASR      r6,r5,#31
00018e  eb056616          ADD      r6,r5,r6,LSR #24
000192  ea4f2726          ASR      r7,r6,#8
000196  f88d705e          STRB     r7,[sp,#0x5e]
;;;337    modbus_registers[43]=(char)(ZV_ON%256);
00019a  f88d505f          STRB     r5,[sp,#0x5f]
;;;338    modbus_registers[44]=(char)(TERMOKOMPENS/256);		//Πεγ23
00019e  4da5              LDR      r5,|L2.1076|
0001a0  f9b55000          LDRSH    r5,[r5,#0]  ; TERMOKOMPENS
0001a4  ea4f76e5          ASR      r6,r5,#31
0001a8  eb056616          ADD      r6,r5,r6,LSR #24
0001ac  ea4f2726          ASR      r7,r6,#8
0001b0  f88d7060          STRB     r7,[sp,#0x60]
;;;339    modbus_registers[45]=(char)(TERMOKOMPENS%256);
0001b4  f88d5061          STRB     r5,[sp,#0x61]
;;;340    modbus_registers[46]=(char)(UBM_AV/256);		//Πεγ24
0001b8  4d9f              LDR      r5,|L2.1080|
0001ba  f9b55000          LDRSH    r5,[r5,#0]  ; UBM_AV
0001be  ea4f76e5          ASR      r6,r5,#31
0001c2  eb056616          ADD      r6,r5,r6,LSR #24
0001c6  ea4f2726          ASR      r7,r6,#8
0001ca  f88d7062          STRB     r7,[sp,#0x62]
;;;341    modbus_registers[47]=(char)(UBM_AV%256);
0001ce  f88d5063          STRB     r5,[sp,#0x63]
;;;342    modbus_registers[48]=(char)(load_I/256);		//Πεγ25
0001d2  f88d3064          STRB     r3,[sp,#0x64]
;;;343    modbus_registers[49]=(char)(load_I%256);
0001d6  f88d4065          STRB     r4,[sp,#0x65]
;;;344    modbus_registers[50]=(char)(load_I/256);		//Πεγ26
0001da  f88d3066          STRB     r3,[sp,#0x66]
;;;345    modbus_registers[51]=(char)(load_I%256);
0001de  f88d4067          STRB     r4,[sp,#0x67]
;;;346    modbus_registers[52]=(char)(load_I/256);		//Πεγ27
0001e2  f88d3068          STRB     r3,[sp,#0x68]
;;;347    modbus_registers[53]=(char)(load_I%256);
0001e6  f88d4069          STRB     r4,[sp,#0x69]
;;;348    modbus_registers[54]=(char)(load_I/256);		//Πεγ28
0001ea  f88d306a          STRB     r3,[sp,#0x6a]
;;;349    modbus_registers[55]=(char)(load_I%256);
0001ee  f88d406b          STRB     r4,[sp,#0x6b]
;;;350    modbus_registers[56]=(char)(load_I/256);		//Πεγ29
0001f2  f88d306c          STRB     r3,[sp,#0x6c]
;;;351    modbus_registers[57]=(char)(load_I%256);
0001f6  f88d406d          STRB     r4,[sp,#0x6d]
;;;352    modbus_registers[58]=(char)(TBAT/256);			//Πεγ30
0001fa  4d90              LDR      r5,|L2.1084|
0001fc  f9b55000          LDRSH    r5,[r5,#0]  ; TBAT
000200  ea4f76e5          ASR      r6,r5,#31
000204  eb056616          ADD      r6,r5,r6,LSR #24
000208  ea4f2726          ASR      r7,r6,#8
00020c  f88d706e          STRB     r7,[sp,#0x6e]
;;;353    modbus_registers[59]=(char)(TBAT%256);
000210  f88d506f          STRB     r5,[sp,#0x6f]
;;;354    modbus_registers[60]=(char)(UMAX/256);			//Πεγ31
000214  4d8a              LDR      r5,|L2.1088|
000216  f9b55000          LDRSH    r5,[r5,#0]  ; UMAX
00021a  ea4f76e5          ASR      r6,r5,#31
00021e  eb056616          ADD      r6,r5,r6,LSR #24
000222  ea4f2726          ASR      r7,r6,#8
000226  f88d7070          STRB     r7,[sp,#0x70]
;;;355    modbus_registers[61]=(char)(UMAX%256);
00022a  f88d5071          STRB     r5,[sp,#0x71]
;;;356    modbus_registers[62]=(char)((UB20-DU)/256);		//Πεγ32
00022e  4d85              LDR      r5,|L2.1092|
000230  4e85              LDR      r6,|L2.1096|
000232  f9b55000          LDRSH    r5,[r5,#0]  ; UB20
000236  f9b66000          LDRSH    r6,[r6,#0]  ; DU
00023a  eba50606          SUB      r6,r5,r6
00023e  ea4f77e6          ASR      r7,r6,#31
000242  eb066717          ADD      r7,r6,r7,LSR #24
000246  ea4f2c27          ASR      r12,r7,#8
00024a  f88dc072          STRB     r12,[sp,#0x72]
;;;357    modbus_registers[63]=(char)((UB20-DU)%256);
00024e  f88d6073          STRB     r6,[sp,#0x73]
;;;358    modbus_registers[64]=(char)(UB0/256);			//Πεγ33
000252  4e7e              LDR      r6,|L2.1100|
000254  f9b66000          LDRSH    r6,[r6,#0]  ; UB0
000258  ea4f77e6          ASR      r7,r6,#31
00025c  eb066717          ADD      r7,r6,r7,LSR #24
000260  ea4f2c27          ASR      r12,r7,#8
000264  f88dc074          STRB     r12,[sp,#0x74]
;;;359    modbus_registers[65]=(char)(UB0%256);
000268  f88d6075          STRB     r6,[sp,#0x75]
;;;360    modbus_registers[66]=(char)(UB20/256);			//Πεγ34
00026c  ea4f76e5          ASR      r6,r5,#31
000270  eb056616          ADD      r6,r5,r6,LSR #24
000274  ea4f2726          ASR      r7,r6,#8
000278  f88d7076          STRB     r7,[sp,#0x76]
;;;361    modbus_registers[67]=(char)(UB20%256);
00027c  f88d5077          STRB     r5,[sp,#0x77]
;;;362    modbus_registers[68]=(char)(USIGN/256);		//Πεγ35
000280  4d73              LDR      r5,|L2.1104|
000282  f9b55000          LDRSH    r5,[r5,#0]  ; USIGN
000286  ea4f76e5          ASR      r6,r5,#31
00028a  eb056616          ADD      r6,r5,r6,LSR #24
00028e  ea4f2726          ASR      r7,r6,#8
000292  f88d7078          STRB     r7,[sp,#0x78]
;;;363    modbus_registers[69]=(char)(USIGN%256);
000296  f88d5079          STRB     r5,[sp,#0x79]
;;;364    modbus_registers[70]=(char)(UMN/256);		//Πεγ36
00029a  4d6e              LDR      r5,|L2.1108|
00029c  f9b55000          LDRSH    r5,[r5,#0]  ; UMN
0002a0  ea4f76e5          ASR      r6,r5,#31
0002a4  eb056616          ADD      r6,r5,r6,LSR #24
0002a8  ea4f2726          ASR      r7,r6,#8
0002ac  f88d707a          STRB     r7,[sp,#0x7a]
;;;365    modbus_registers[71]=(char)(UMN%256);
0002b0  f88d507b          STRB     r5,[sp,#0x7b]
;;;366    modbus_registers[72]=(char)(U0B/256);		//Πεγ37
0002b4  4d68              LDR      r5,|L2.1112|
0002b6  f9b55000          LDRSH    r5,[r5,#0]  ; U0B
0002ba  ea4f76e5          ASR      r6,r5,#31
0002be  eb056616          ADD      r6,r5,r6,LSR #24
0002c2  ea4f2726          ASR      r7,r6,#8
0002c6  f88d707c          STRB     r7,[sp,#0x7c]
;;;367    modbus_registers[73]=(char)(U0B%256);
0002ca  f88d507d          STRB     r5,[sp,#0x7d]
;;;368    modbus_registers[74]=(char)(IKB/256);		//Πεγ38
0002ce  4d63              LDR      r5,|L2.1116|
0002d0  f9b55000          LDRSH    r5,[r5,#0]  ; IKB
0002d4  ea4f76e5          ASR      r6,r5,#31
0002d8  eb056616          ADD      r6,r5,r6,LSR #24
0002dc  ea4f2726          ASR      r7,r6,#8
0002e0  f88d707e          STRB     r7,[sp,#0x7e]
;;;369    modbus_registers[75]=(char)(IKB%256);
0002e4  f88d507f          STRB     r5,[sp,#0x7f]
;;;370    modbus_registers[76]=(char)(IZMAX/256);		//Πεγ39
0002e8  4d5d              LDR      r5,|L2.1120|
0002ea  f9b55000          LDRSH    r5,[r5,#0]  ; IZMAX
0002ee  ea4f76e5          ASR      r6,r5,#31
0002f2  eb056616          ADD      r6,r5,r6,LSR #24
0002f6  ea4f2726          ASR      r7,r6,#8
0002fa  f88d7080          STRB     r7,[sp,#0x80]
;;;371    modbus_registers[77]=(char)(IZMAX%256);
0002fe  f88d5081          STRB     r5,[sp,#0x81]
;;;372    modbus_registers[78]=(char)(IMAX/256);		//Πεγ40
000302  4d58              LDR      r5,|L2.1124|
000304  f9b55000          LDRSH    r5,[r5,#0]  ; IMAX
000308  ea4f76e5          ASR      r6,r5,#31
00030c  eb056616          ADD      r6,r5,r6,LSR #24
000310  ea4f2726          ASR      r7,r6,#8
000314  f88d7082          STRB     r7,[sp,#0x82]
;;;373    modbus_registers[79]=(char)(IMAX%256);
000318  f88d5083          STRB     r5,[sp,#0x83]
;;;374    modbus_registers[80]=(char)(IMIN/256);		//Πεγ41
00031c  4d52              LDR      r5,|L2.1128|
00031e  f9b55000          LDRSH    r5,[r5,#0]  ; IMIN
000322  ea4f76e5          ASR      r6,r5,#31
000326  eb056616          ADD      r6,r5,r6,LSR #24
00032a  ea4f2726          ASR      r7,r6,#8
00032e  f88d7084          STRB     r7,[sp,#0x84]
;;;375    modbus_registers[81]=(char)(IMIN%256);
000332  f88d5085          STRB     r5,[sp,#0x85]
;;;376    modbus_registers[82]=(char)(UVZ/256);		//Πεγ42
000336  4d4d              LDR      r5,|L2.1132|
000338  f9b55000          LDRSH    r5,[r5,#0]  ; UVZ
00033c  ea4f76e5          ASR      r6,r5,#31
000340  eb056616          ADD      r6,r5,r6,LSR #24
000344  ea4f2726          ASR      r7,r6,#8
000348  f88d7086          STRB     r7,[sp,#0x86]
;;;377    modbus_registers[83]=(char)(UVZ%256);
00034c  f88d5087          STRB     r5,[sp,#0x87]
;;;378    modbus_registers[84]=(char)(TZAS/256);		//Πεγ43
000350  4d47              LDR      r5,|L2.1136|
000352  f9b55000          LDRSH    r5,[r5,#0]  ; TZAS
000356  ea4f76e5          ASR      r6,r5,#31
00035a  eb056616          ADD      r6,r5,r6,LSR #24
00035e  ea4f2726          ASR      r7,r6,#8
000362  f88d7088          STRB     r7,[sp,#0x88]
;;;379    modbus_registers[85]=(char)(TZAS%256);
000366  f88d5089          STRB     r5,[sp,#0x89]
;;;380    modbus_registers[86]=(char)(TMAX/256);		//Πεγ44
00036a  4d42              LDR      r5,|L2.1140|
00036c  f9b55000          LDRSH    r5,[r5,#0]  ; TMAX
000370  ea4f76e5          ASR      r6,r5,#31
000374  eb056616          ADD      r6,r5,r6,LSR #24
000378  ea4f2726          ASR      r7,r6,#8
00037c  f88d708a          STRB     r7,[sp,#0x8a]
;;;381    modbus_registers[87]=(char)(TMAX%256);
000380  f88d508b          STRB     r5,[sp,#0x8b]
;;;382    modbus_registers[88]=(char)(TSIGN/256);		//Πεγ45
000384  4d3c              LDR      r5,|L2.1144|
000386  f9b55000          LDRSH    r5,[r5,#0]  ; TSIGN
00038a  ea4f76e5          ASR      r6,r5,#31
00038e  eb056616          ADD      r6,r5,r6,LSR #24
000392  ea4f2726          ASR      r7,r6,#8
000396  f88d708c          STRB     r7,[sp,#0x8c]
;;;383    modbus_registers[89]=(char)(TSIGN%256);
00039a  f88d508d          STRB     r5,[sp,#0x8d]
;;;384    modbus_registers[90]=(char)(TBATMAX/256);		//Πεγ46
00039e  4d37              LDR      r5,|L2.1148|
0003a0  f9b55000          LDRSH    r5,[r5,#0]  ; TBATMAX
0003a4  ea4f76e5          ASR      r6,r5,#31
0003a8  eb056616          ADD      r6,r5,r6,LSR #24
0003ac  ea4f2726          ASR      r7,r6,#8
0003b0  f88d708e          STRB     r7,[sp,#0x8e]
;;;385    modbus_registers[91]=(char)(TBATMAX%256);
0003b4  f88d508f          STRB     r5,[sp,#0x8f]
;;;386    modbus_registers[92]=(char)(TBATSIGN/256);		//Πεγ47
0003b8  4d31              LDR      r5,|L2.1152|
0003ba  f9b55000          LDRSH    r5,[r5,#0]  ; TBATSIGN
0003be  ea4f76e5          ASR      r6,r5,#31
0003c2  eb056616          ADD      r6,r5,r6,LSR #24
0003c6  ea4f2726          ASR      r7,r6,#8
0003ca  f88d7090          STRB     r7,[sp,#0x90]
;;;387    modbus_registers[93]=(char)(TBATSIGN%256);
0003ce  f88d5091          STRB     r5,[sp,#0x91]
;;;388    modbus_registers[94]=(char)(load_I/256);		//Πεγ48
0003d2  f88d3092          STRB     r3,[sp,#0x92]
;;;389    modbus_registers[95]=(char)(load_I%256);
0003d6  f88d4093          STRB     r4,[sp,#0x93]
;;;390    modbus_registers[96]=(char)(load_I/256);		//Πεγ49
0003da  f88d3094          STRB     r3,[sp,#0x94]
;;;391    modbus_registers[97]=(char)(load_I%256);
0003de  f88d4095          STRB     r4,[sp,#0x95]
;;;392    modbus_registers[98]=(char)(load_I/256);		//Πεγ50
0003e2  f88d3096          STRB     r3,[sp,#0x96]
;;;393    modbus_registers[99]=(char)(load_I%256);
0003e6  f88d4097          STRB     r4,[sp,#0x97]
;;;394    
;;;395    modbus_tx_buff[0]=adr;
0003ea  f88d0000          STRB     r0,[sp,#0]
;;;396    modbus_tx_buff[1]=func;
0003ee  f88d1001          STRB     r1,[sp,#1]
;;;397    modbus_tx_buff[2]=(char)(reg_adr/256);
0003f2  ea4f2012          LSR      r0,r2,#8
0003f6  f88d0002          STRB     r0,[sp,#2]
;;;398    modbus_tx_buff[3]=(char)(reg_adr%256);
0003fa  f88d2003          STRB     r2,[sp,#3]
;;;399    //modbus_tx_buff[4]=(char)(reg_quantity/256);
;;;400    //modbus_tx_buff[5]=(char)(reg_quantity%256);
;;;401    /*
;;;402    modbus_registers[0]=0x10;
;;;403    modbus_registers[1]=0x11;
;;;404    modbus_registers[2]=0x12;
;;;405    modbus_registers[3]=0x13;
;;;406    modbus_registers[4]=0x14;
;;;407    modbus_registers[5]=0x15;
;;;408    */
;;;409    
;;;410    mem_copy((char*)&modbus_tx_buff[4],(char*)&modbus_registers[(reg_adr-1)*2],2);
0003fe  a80d              ADD      r0,sp,#0x34
000400  e040              B        |L2.1156|
000402  0000              DCW      0x0000
                  |L2.1028|
                          DCD      load_U
                  |L2.1032|
                          DCD      load_I
                  |L2.1036|
                          DCD      Ib_ips_termokompensat
                  |L2.1040|
                          DCD      t_ext
                  |L2.1044|
                          DCD      net_Ua
                  |L2.1048|
                          DCD      net_Ub
                  |L2.1052|
                          DCD      net_Uc
                  |L2.1056|
                          DCD      net_F3
                  |L2.1060|
                          DCD      0x40024020
                  |L2.1064|
                          DCD      NUMIST
                  |L2.1068|
                          DCD      PAR
                  |L2.1072|
                          DCD      ZV_ON
                  |L2.1076|
                          DCD      TERMOKOMPENS
                  |L2.1080|
                          DCD      UBM_AV
                  |L2.1084|
                          DCD      TBAT
                  |L2.1088|
                          DCD      UMAX
                  |L2.1092|
                          DCD      UB20
                  |L2.1096|
                          DCD      ||DU||
                  |L2.1100|
                          DCD      UB0
                  |L2.1104|
                          DCD      USIGN
                  |L2.1108|
                          DCD      UMN
                  |L2.1112|
                          DCD      U0B
                  |L2.1116|
                          DCD      IKB
                  |L2.1120|
                          DCD      IZMAX
                  |L2.1124|
                          DCD      IMAX
                  |L2.1128|
                          DCD      IMIN
                  |L2.1132|
                          DCD      UVZ
                  |L2.1136|
                          DCD      TZAS
                  |L2.1140|
                          DCD      TMAX
                  |L2.1144|
                          DCD      TSIGN
                  |L2.1148|
                          DCD      TBATMAX
                  |L2.1152|
                          DCD      TBATSIGN
                  |L2.1156|
000484  f1a20201          SUB      r2,r2,#1
000488  eb000142          ADD      r1,r0,r2,LSL #1
00048c  f04f0202          MOV      r2,#2
000490  466d              MOV      r5,sp
000492  a801              ADD      r0,sp,#4
000494  f7fffffe          BL       mem_copy
;;;411    
;;;412    crc_temp=CRC16_2(modbus_tx_buff,6);
000498  2106              MOVS     r1,#6
00049a  4668              MOV      r0,sp
00049c  f7fffffe          BL       CRC16_2
;;;413    
;;;414    modbus_tx_buff[6]=crc_temp%256;
0004a0  f88d0006          STRB     r0,[sp,#6]
;;;415    modbus_tx_buff[7]=crc_temp/256;
0004a4  ea4f2010          LSR      r0,r0,#8
0004a8  f88d0007          STRB     r0,[sp,#7]
;;;416    
;;;417    for (i=0;i<8;i++)
0004ac  f04f0400          MOV      r4,#0
                  |L2.1200|
;;;418    	{
;;;419    	putchar0(modbus_tx_buff[i]);
0004b0  5d28              LDRB     r0,[r5,r4]
0004b2  f7fffffe          BL       putchar0
0004b6  f1040401          ADD      r4,r4,#1              ;417
0004ba  b2e4              UXTB     r4,r4                 ;417
0004bc  2c08              CMP      r4,#8                 ;417
0004be  d3f7              BCC      |L2.1200|
;;;420    	}
;;;421    for (i=0;i<8;i++)
0004c0  f04f0400          MOV      r4,#0
                  |L2.1220|
;;;422    	{
;;;423    	putchar_sc16is700(modbus_tx_buff[i]);
0004c4  5d28              LDRB     r0,[r5,r4]
0004c6  f7fffffe          BL       putchar_sc16is700
0004ca  f1040401          ADD      r4,r4,#1              ;421
0004ce  b2e4              UXTB     r4,r4                 ;421
0004d0  2c08              CMP      r4,#8                 ;421
0004d2  d3f7              BCC      |L2.1220|
;;;424    	}
;;;425    }
0004d4  b033              ADD      sp,sp,#0xcc
0004d6  bdf0              POP      {r4-r7,pc}
;;;426    
                          ENDP


                          AREA ||area_number.3||, CODE, READONLY, ALIGN=2

                          EXPORTAS ||area_number.3||, ||.text||
                  modbus_registers_transmit PROC
;;;285    //-----------------------------------------------
;;;286    void modbus_register_transmit(unsigned char adr,unsigned char func,unsigned short reg_adr)
000000  e92d41f0          PUSH     {r4-r8,lr}
;;;287    {
;;;288    char modbus_registers[150];
;;;289    char modbus_tx_buff[50];
;;;290    unsigned short crc_temp;
;;;291    char i;
;;;292    
;;;293    
;;;294    modbus_registers[0]=(char)(load_U/256);					//Πεγ1
000004  b0b2              SUB      sp,sp,#0xc8
000006  4698              MOV      r8,r3
000008  4bff              LDR      r3,|L3.1032|
00000a  f9b33000          LDRSH    r3,[r3,#0]  ; load_U
00000e  ea4f74e3          ASR      r4,r3,#31
000012  eb036414          ADD      r4,r3,r4,LSR #24
000016  ea4f2524          ASR      r5,r4,#8
;;;295    modbus_registers[1]=(char)(load_U%256);
00001a  f88d5064          STRB     r5,[sp,#0x64]
;;;296    modbus_registers[2]=(char)(load_I/256);					//Πεγ2
00001e  f88d3065          STRB     r3,[sp,#0x65]
000022  4bfa              LDR      r3,|L3.1036|
000024  f9b33000          LDRSH    r3,[r3,#0]  ; load_I
000028  ea4f74e3          ASR      r4,r3,#31
00002c  eb036514          ADD      r5,r3,r4,LSR #24
000030  f3c52407          UBFX     r4,r5,#8,#8
;;;297    modbus_registers[3]=(char)(load_I%256);
000034  f88d4066          STRB     r4,[sp,#0x66]
000038  b2dd              UXTB     r5,r3
;;;298    modbus_registers[4]=(char)(Ib_ips_termokompensat/256);		//Πεγ3
00003a  f88d5067          STRB     r5,[sp,#0x67]
00003e  4bf4              LDR      r3,|L3.1040|
000040  f9b36000          LDRSH    r6,[r3,#0]  ; Ib_ips_termokompensat
000044  ea4f73e6          ASR      r3,r6,#31
000048  eb066313          ADD      r3,r6,r3,LSR #24
00004c  ea4f2723          ASR      r7,r3,#8
;;;299    modbus_registers[5]=(char)(Ib_ips_termokompensat%256);
000050  f88d7068          STRB     r7,[sp,#0x68]
;;;300    modbus_registers[6]=(char)(t_ext[0]/256);				//Πεγ4
000054  4633              MOV      r3,r6
000056  f88d3069          STRB     r3,[sp,#0x69]
00005a  4bee              LDR      r3,|L3.1044|
00005c  f9b33000          LDRSH    r3,[r3,#0]  ; t_ext
000060  ea4f76e3          ASR      r6,r3,#31
000064  eb036616          ADD      r6,r3,r6,LSR #24
000068  ea4f2726          ASR      r7,r6,#8
;;;301    modbus_registers[7]=(char)(t_ext[0]%256);
00006c  f88d706a          STRB     r7,[sp,#0x6a]
;;;302    modbus_registers[8]=(char)(net_Ua/256);					//Πεγ5
000070  f88d306b          STRB     r3,[sp,#0x6b]
000074  4be8              LDR      r3,|L3.1048|
000076  f9b33000          LDRSH    r3,[r3,#0]  ; net_Ua
00007a  ea4f76e3          ASR      r6,r3,#31
00007e  eb036616          ADD      r6,r3,r6,LSR #24
000082  ea4f2726          ASR      r7,r6,#8
;;;303    modbus_registers[9]=(char)(net_Ua%256);		 	
000086  f88d706c          STRB     r7,[sp,#0x6c]
;;;304    modbus_registers[10]=(char)(net_Ub/256);				//Πεγ6
00008a  f88d306d          STRB     r3,[sp,#0x6d]
00008e  4be3              LDR      r3,|L3.1052|
000090  f9b33000          LDRSH    r3,[r3,#0]  ; net_Ub
000094  ea4f76e3          ASR      r6,r3,#31
000098  eb036616          ADD      r6,r3,r6,LSR #24
00009c  ea4f2726          ASR      r7,r6,#8
;;;305    modbus_registers[11]=(char)(net_Ub%256);
0000a0  f88d706e          STRB     r7,[sp,#0x6e]
;;;306    modbus_registers[12]=(char)(net_Uc/256);				//Πεγ7
0000a4  f88d306f          STRB     r3,[sp,#0x6f]
0000a8  4bdd              LDR      r3,|L3.1056|
0000aa  f9b33000          LDRSH    r3,[r3,#0]  ; net_Uc
0000ae  ea4f76e3          ASR      r6,r3,#31
0000b2  eb036616          ADD      r6,r3,r6,LSR #24
0000b6  ea4f2726          ASR      r7,r6,#8
;;;307    modbus_registers[13]=(char)(net_Uc%256);
0000ba  f88d7070          STRB     r7,[sp,#0x70]
;;;308    modbus_registers[14]=(char)(net_F3/256);				//Πεγ8
0000be  f88d3071          STRB     r3,[sp,#0x71]
0000c2  4bd8              LDR      r3,|L3.1060|
0000c4  f9b33000          LDRSH    r3,[r3,#0]  ; net_F3
0000c8  ea4f76e3          ASR      r6,r3,#31
0000cc  eb036616          ADD      r6,r3,r6,LSR #24
0000d0  ea4f2726          ASR      r7,r6,#8
;;;309    modbus_registers[15]=(char)(net_F3%256);
0000d4  f88d7072          STRB     r7,[sp,#0x72]
;;;310    modbus_registers[16]=(char)(load_I/256);				//Πεγ9
0000d8  f88d3073          STRB     r3,[sp,#0x73]
;;;311    modbus_registers[17]=(char)(load_I%256);
0000dc  f88d4074          STRB     r4,[sp,#0x74]
;;;312    modbus_registers[18]=(char)(load_I/256);				//Πεγ10
0000e0  f88d5075          STRB     r5,[sp,#0x75]
;;;313    modbus_registers[19]=(char)(load_I%256);
0000e4  f88d4076          STRB     r4,[sp,#0x76]
;;;314    modbus_registers[20]=(char)((LPC_RTC->YEAR)/256);			//Πεγ11
0000e8  f88d5077          STRB     r5,[sp,#0x77]
0000ec  4ece              LDR      r6,|L3.1064|
0000ee  8bb3              LDRH     r3,[r6,#0x1c]
0000f0  ea4f2313          LSR      r3,r3,#8
;;;315    modbus_registers[21]=(char)((LPC_RTC->YEAR)%256);
0000f4  f88d3078          STRB     r3,[sp,#0x78]
;;;316    modbus_registers[22]=(char)((LPC_RTC->MONTH)/256);		//Πεγ12
0000f8  8bb3              LDRH     r3,[r6,#0x1c]
0000fa  f88d3079          STRB     r3,[sp,#0x79]
0000fe  7e33              LDRB     r3,[r6,#0x18]
000100  f04f0300          MOV      r3,#0
;;;317    modbus_registers[23]=(char)((LPC_RTC->MONTH)%256);
000104  f88d307a          STRB     r3,[sp,#0x7a]
;;;318    modbus_registers[24]=(char)((LPC_RTC->DOM)/256);			//Πεγ13
000108  7e37              LDRB     r7,[r6,#0x18]
00010a  f88d707b          STRB     r7,[sp,#0x7b]
;;;319    modbus_registers[25]=(char)((LPC_RTC->DOM)%256);
00010e  7b37              LDRB     r7,[r6,#0xc]
000110  f88d307c          STRB     r3,[sp,#0x7c]
;;;320    modbus_registers[26]=(char)((LPC_RTC->HOUR)/256);			//Πεγ14
000114  7b37              LDRB     r7,[r6,#0xc]
000116  f88d707d          STRB     r7,[sp,#0x7d]
;;;321    modbus_registers[27]=(char)((LPC_RTC->HOUR)%256);
00011a  7a37              LDRB     r7,[r6,#8]
00011c  f88d307e          STRB     r3,[sp,#0x7e]
;;;322    modbus_registers[28]=(char)((LPC_RTC->MIN)/256);			//Πεγ15
000120  7a37              LDRB     r7,[r6,#8]
000122  f88d707f          STRB     r7,[sp,#0x7f]
;;;323    modbus_registers[29]=(char)((LPC_RTC->MIN)%256);
000126  7937              LDRB     r7,[r6,#4]
000128  f88d3080          STRB     r3,[sp,#0x80]
;;;324    modbus_registers[30]=(char)((LPC_RTC->SEC)/256);			//Πεγ16
00012c  7937              LDRB     r7,[r6,#4]
00012e  f88d7081          STRB     r7,[sp,#0x81]
;;;325    modbus_registers[31]=(char)((LPC_RTC->SEC)%256);
000132  7837              LDRB     r7,[r6,#0]
000134  f88d3082          STRB     r3,[sp,#0x82]
;;;326    modbus_registers[32]=(char)(load_I/256);				//Πεγ17
000138  7833              LDRB     r3,[r6,#0]
00013a  f88d3083          STRB     r3,[sp,#0x83]
;;;327    modbus_registers[33]=(char)(load_I%256);
00013e  f88d4084          STRB     r4,[sp,#0x84]
;;;328    modbus_registers[34]=(char)(load_I/256);				//Πεγ18
000142  f88d5085          STRB     r5,[sp,#0x85]
;;;329    modbus_registers[35]=(char)(load_I%256);
000146  f88d4086          STRB     r4,[sp,#0x86]
;;;330    modbus_registers[36]=(char)(load_I/256);		//Πεγ19
00014a  f88d5087          STRB     r5,[sp,#0x87]
;;;331    modbus_registers[37]=(char)(load_I%256);
00014e  f88d4088          STRB     r4,[sp,#0x88]
;;;332    modbus_registers[38]=(char)(NUMIST/256);		//Πεγ20
000152  f88d5089          STRB     r5,[sp,#0x89]
000156  4bb5              LDR      r3,|L3.1068|
000158  f9b33000          LDRSH    r3,[r3,#0]  ; NUMIST
00015c  ea4f76e3          ASR      r6,r3,#31
000160  eb036616          ADD      r6,r3,r6,LSR #24
000164  ea4f2726          ASR      r7,r6,#8
;;;333    modbus_registers[39]=(char)(NUMIST%256);
000168  f88d708a          STRB     r7,[sp,#0x8a]
;;;334    modbus_registers[40]=(char)(PAR/256);		//Πεγ21
00016c  f88d308b          STRB     r3,[sp,#0x8b]
000170  4baf              LDR      r3,|L3.1072|
000172  f9b33000          LDRSH    r3,[r3,#0]  ; PAR
000176  ea4f76e3          ASR      r6,r3,#31
00017a  eb036616          ADD      r6,r3,r6,LSR #24
00017e  ea4f2726          ASR      r7,r6,#8
;;;335    modbus_registers[41]=(char)(PAR%256);
000182  f88d708c          STRB     r7,[sp,#0x8c]
;;;336    modbus_registers[42]=(char)(ZV_ON/256);		//Πεγ22
000186  f88d308d          STRB     r3,[sp,#0x8d]
00018a  4baa              LDR      r3,|L3.1076|
00018c  f9b33000          LDRSH    r3,[r3,#0]  ; ZV_ON
000190  ea4f76e3          ASR      r6,r3,#31
000194  eb036616          ADD      r6,r3,r6,LSR #24
000198  ea4f2726          ASR      r7,r6,#8
;;;337    modbus_registers[43]=(char)(ZV_ON%256);
00019c  f88d708e          STRB     r7,[sp,#0x8e]
;;;338    modbus_registers[44]=(char)(TERMOKOMPENS/256);		//Πεγ23
0001a0  f88d308f          STRB     r3,[sp,#0x8f]
0001a4  4ba4              LDR      r3,|L3.1080|
0001a6  f9b33000          LDRSH    r3,[r3,#0]  ; TERMOKOMPENS
0001aa  ea4f76e3          ASR      r6,r3,#31
0001ae  eb036616          ADD      r6,r3,r6,LSR #24
0001b2  ea4f2726          ASR      r7,r6,#8
;;;339    modbus_registers[45]=(char)(TERMOKOMPENS%256);
0001b6  f88d7090          STRB     r7,[sp,#0x90]
;;;340    modbus_registers[46]=(char)(UBM_AV/256);		//Πεγ24
0001ba  f88d3091          STRB     r3,[sp,#0x91]
0001be  4b9f              LDR      r3,|L3.1084|
0001c0  f9b33000          LDRSH    r3,[r3,#0]  ; UBM_AV
0001c4  ea4f76e3          ASR      r6,r3,#31
0001c8  eb036616          ADD      r6,r3,r6,LSR #24
0001cc  ea4f2726          ASR      r7,r6,#8
;;;341    modbus_registers[47]=(char)(UBM_AV%256);
0001d0  f88d7092          STRB     r7,[sp,#0x92]
;;;342    modbus_registers[48]=(char)(load_I/256);		//Πεγ25
0001d4  f88d3093          STRB     r3,[sp,#0x93]
;;;343    modbus_registers[49]=(char)(load_I%256);
0001d8  f88d4094          STRB     r4,[sp,#0x94]
;;;344    modbus_registers[50]=(char)(load_I/256);		//Πεγ26
0001dc  f88d5095          STRB     r5,[sp,#0x95]
;;;345    modbus_registers[51]=(char)(load_I%256);
0001e0  f88d4096          STRB     r4,[sp,#0x96]
;;;346    modbus_registers[52]=(char)(load_I/256);		//Πεγ27
0001e4  f88d5097          STRB     r5,[sp,#0x97]
;;;347    modbus_registers[53]=(char)(load_I%256);
0001e8  f88d4098          STRB     r4,[sp,#0x98]
;;;348    modbus_registers[54]=(char)(load_I/256);		//Πεγ28
0001ec  f88d5099          STRB     r5,[sp,#0x99]
;;;349    modbus_registers[55]=(char)(load_I%256);
0001f0  f88d409a          STRB     r4,[sp,#0x9a]
;;;350    modbus_registers[56]=(char)(load_I/256);		//Πεγ29
0001f4  f88d509b          STRB     r5,[sp,#0x9b]
;;;351    modbus_registers[57]=(char)(load_I%256);
0001f8  f88d409c          STRB     r4,[sp,#0x9c]
;;;352    modbus_registers[58]=(char)(TBAT/256);			//Πεγ30
0001fc  f88d509d          STRB     r5,[sp,#0x9d]
000200  4b8f              LDR      r3,|L3.1088|
000202  f9b33000          LDRSH    r3,[r3,#0]  ; TBAT
000206  ea4f76e3          ASR      r6,r3,#31
00020a  eb036616          ADD      r6,r3,r6,LSR #24
00020e  ea4f2726          ASR      r7,r6,#8
;;;353    modbus_registers[59]=(char)(TBAT%256);
000212  f88d709e          STRB     r7,[sp,#0x9e]
;;;354    modbus_registers[60]=(char)(UMAX/256);			//Πεγ31
000216  f88d309f          STRB     r3,[sp,#0x9f]
00021a  4b8a              LDR      r3,|L3.1092|
00021c  f9b33000          LDRSH    r3,[r3,#0]  ; UMAX
000220  ea4f76e3          ASR      r6,r3,#31
000224  eb036616          ADD      r6,r3,r6,LSR #24
000228  ea4f2726          ASR      r7,r6,#8
;;;355    modbus_registers[61]=(char)(UMAX%256);
00022c  f88d70a0          STRB     r7,[sp,#0xa0]
;;;356    modbus_registers[62]=(char)((UB20-DU)/256);		//Πεγ32
000230  f88d30a1          STRB     r3,[sp,#0xa1]
000234  4b84              LDR      r3,|L3.1096|
000236  f9b36000          LDRSH    r6,[r3,#0]  ; UB20
00023a  4b84              LDR      r3,|L3.1100|
00023c  f9b33000          LDRSH    r3,[r3,#0]  ; DU
000240  eba60703          SUB      r7,r6,r3
000244  ea4f73e7          ASR      r3,r7,#31
000248  eb076313          ADD      r3,r7,r3,LSR #24
00024c  ea4f2c23          ASR      r12,r3,#8
;;;357    modbus_registers[63]=(char)((UB20-DU)%256);
000250  f88dc0a2          STRB     r12,[sp,#0xa2]
;;;358    modbus_registers[64]=(char)(UB0/256);			//Πεγ33
000254  463b              MOV      r3,r7
000256  f88d30a3          STRB     r3,[sp,#0xa3]
00025a  4b7d              LDR      r3,|L3.1104|
00025c  f9b37000          LDRSH    r7,[r3,#0]  ; UB0
000260  ea4f73e7          ASR      r3,r7,#31
000264  eb076313          ADD      r3,r7,r3,LSR #24
;;;359    modbus_registers[65]=(char)(UB0%256);
000268  ea4f2c23          ASR      r12,r3,#8
;;;360    modbus_registers[66]=(char)(UB20/256);			//Πεγ34
00026c  f88dc0a4          STRB     r12,[sp,#0xa4]
000270  463b              MOV      r3,r7
000272  f88d30a5          STRB     r3,[sp,#0xa5]
000276  ea4f73e6          ASR      r3,r6,#31
00027a  eb066313          ADD      r3,r6,r3,LSR #24
;;;361    modbus_registers[67]=(char)(UB20%256);
00027e  ea4f2723          ASR      r7,r3,#8
;;;362    modbus_registers[68]=(char)(USIGN/256);		//Πεγ35
000282  f88d70a6          STRB     r7,[sp,#0xa6]
000286  4633              MOV      r3,r6
000288  f88d30a7          STRB     r3,[sp,#0xa7]
00028c  4b71              LDR      r3,|L3.1108|
00028e  f9b33000          LDRSH    r3,[r3,#0]  ; USIGN
000292  ea4f76e3          ASR      r6,r3,#31
;;;363    modbus_registers[69]=(char)(USIGN%256);
000296  eb036616          ADD      r6,r3,r6,LSR #24
;;;364    modbus_registers[70]=(char)(UMN/256);		//Πεγ36
00029a  ea4f2726          ASR      r7,r6,#8
00029e  f88d70a8          STRB     r7,[sp,#0xa8]
0002a2  f88d30a9          STRB     r3,[sp,#0xa9]
0002a6  4b6c              LDR      r3,|L3.1112|
0002a8  f9b33000          LDRSH    r3,[r3,#0]  ; UMN
0002ac  ea4f76e3          ASR      r6,r3,#31
;;;365    modbus_registers[71]=(char)(UMN%256);
0002b0  eb036616          ADD      r6,r3,r6,LSR #24
;;;366    modbus_registers[72]=(char)(U0B/256);		//Πεγ37
0002b4  ea4f2726          ASR      r7,r6,#8
0002b8  f88d70aa          STRB     r7,[sp,#0xaa]
0002bc  f88d30ab          STRB     r3,[sp,#0xab]
0002c0  4b66              LDR      r3,|L3.1116|
0002c2  f9b33000          LDRSH    r3,[r3,#0]  ; U0B
0002c6  ea4f76e3          ASR      r6,r3,#31
;;;367    modbus_registers[73]=(char)(U0B%256);
0002ca  eb036616          ADD      r6,r3,r6,LSR #24
;;;368    modbus_registers[74]=(char)(IKB/256);		//Πεγ38
0002ce  ea4f2726          ASR      r7,r6,#8
0002d2  f88d70ac          STRB     r7,[sp,#0xac]
0002d6  f88d30ad          STRB     r3,[sp,#0xad]
0002da  4b61              LDR      r3,|L3.1120|
0002dc  f9b33000          LDRSH    r3,[r3,#0]  ; IKB
0002e0  ea4f76e3          ASR      r6,r3,#31
;;;369    modbus_registers[75]=(char)(IKB%256);
0002e4  eb036616          ADD      r6,r3,r6,LSR #24
;;;370    modbus_registers[76]=(char)(IZMAX/256);		//Πεγ39
0002e8  ea4f2726          ASR      r7,r6,#8
0002ec  f88d70ae          STRB     r7,[sp,#0xae]
0002f0  f88d30af          STRB     r3,[sp,#0xaf]
0002f4  4b5b              LDR      r3,|L3.1124|
0002f6  f9b33000          LDRSH    r3,[r3,#0]  ; IZMAX
0002fa  ea4f76e3          ASR      r6,r3,#31
;;;371    modbus_registers[77]=(char)(IZMAX%256);
0002fe  eb036616          ADD      r6,r3,r6,LSR #24
;;;372    modbus_registers[78]=(char)(IMAX/256);		//Πεγ40
000302  ea4f2726          ASR      r7,r6,#8
000306  f88d70b0          STRB     r7,[sp,#0xb0]
00030a  f88d30b1          STRB     r3,[sp,#0xb1]
00030e  4b56              LDR      r3,|L3.1128|
000310  f9b33000          LDRSH    r3,[r3,#0]  ; IMAX
000314  ea4f76e3          ASR      r6,r3,#31
;;;373    modbus_registers[79]=(char)(IMAX%256);
000318  eb036616          ADD      r6,r3,r6,LSR #24
;;;374    modbus_registers[80]=(char)(IMIN/256);		//Πεγ41
00031c  ea4f2726          ASR      r7,r6,#8
000320  f88d70b2          STRB     r7,[sp,#0xb2]
000324  f88d30b3          STRB     r3,[sp,#0xb3]
000328  4b50              LDR      r3,|L3.1132|
00032a  f9b33000          LDRSH    r3,[r3,#0]  ; IMIN
00032e  ea4f76e3          ASR      r6,r3,#31
;;;375    modbus_registers[81]=(char)(IMIN%256);
000332  eb036616          ADD      r6,r3,r6,LSR #24
;;;376    modbus_registers[82]=(char)(UVZ/256);		//Πεγ42
000336  ea4f2726          ASR      r7,r6,#8
00033a  f88d70b4          STRB     r7,[sp,#0xb4]
00033e  f88d30b5          STRB     r3,[sp,#0xb5]
000342  4b4b              LDR      r3,|L3.1136|
000344  f9b33000          LDRSH    r3,[r3,#0]  ; UVZ
000348  ea4f76e3          ASR      r6,r3,#31
;;;377    modbus_registers[83]=(char)(UVZ%256);
00034c  eb036616          ADD      r6,r3,r6,LSR #24
;;;378    modbus_registers[84]=(char)(TZAS/256);		//Πεγ43
000350  ea4f2726          ASR      r7,r6,#8
000354  f88d70b6          STRB     r7,[sp,#0xb6]
000358  f88d30b7          STRB     r3,[sp,#0xb7]
00035c  4b45              LDR      r3,|L3.1140|
00035e  f9b33000          LDRSH    r3,[r3,#0]  ; TZAS
000362  ea4f76e3          ASR      r6,r3,#31
;;;379    modbus_registers[85]=(char)(TZAS%256);
000366  eb036616          ADD      r6,r3,r6,LSR #24
;;;380    modbus_registers[86]=(char)(TMAX/256);		//Πεγ44
00036a  ea4f2726          ASR      r7,r6,#8
00036e  f88d70b8          STRB     r7,[sp,#0xb8]
000372  f88d30b9          STRB     r3,[sp,#0xb9]
000376  4b40              LDR      r3,|L3.1144|
000378  f9b33000          LDRSH    r3,[r3,#0]  ; TMAX
00037c  ea4f76e3          ASR      r6,r3,#31
;;;381    modbus_registers[87]=(char)(TMAX%256);
000380  eb036616          ADD      r6,r3,r6,LSR #24
;;;382    modbus_registers[88]=(char)(TSIGN/256);		//Πεγ45
000384  ea4f2726          ASR      r7,r6,#8
000388  f88d70ba          STRB     r7,[sp,#0xba]
00038c  f88d30bb          STRB     r3,[sp,#0xbb]
000390  4b3a              LDR      r3,|L3.1148|
000392  f9b33000          LDRSH    r3,[r3,#0]  ; TSIGN
000396  ea4f76e3          ASR      r6,r3,#31
;;;383    modbus_registers[89]=(char)(TSIGN%256);
00039a  eb036616          ADD      r6,r3,r6,LSR #24
;;;384    modbus_registers[90]=(char)(TBATMAX/256);		//Πεγ46
00039e  ea4f2726          ASR      r7,r6,#8
0003a2  f88d70bc          STRB     r7,[sp,#0xbc]
0003a6  f88d30bd          STRB     r3,[sp,#0xbd]
0003aa  4b35              LDR      r3,|L3.1152|
0003ac  f9b33000          LDRSH    r3,[r3,#0]  ; TBATMAX
0003b0  ea4f76e3          ASR      r6,r3,#31
;;;385    modbus_registers[91]=(char)(TBATMAX%256);
0003b4  eb036616          ADD      r6,r3,r6,LSR #24
;;;386    modbus_registers[92]=(char)(TBATSIGN/256);		//Πεγ47
0003b8  ea4f2726          ASR      r7,r6,#8
0003bc  f88d70be          STRB     r7,[sp,#0xbe]
0003c0  f88d30bf          STRB     r3,[sp,#0xbf]
0003c4  4b2f              LDR      r3,|L3.1156|
0003c6  f9b33000          LDRSH    r3,[r3,#0]  ; TBATSIGN
0003ca  ea4f76e3          ASR      r6,r3,#31
;;;387    modbus_registers[93]=(char)(TBATSIGN%256);
0003ce  eb036616          ADD      r6,r3,r6,LSR #24
;;;388    modbus_registers[94]=(char)(load_I/256);		//Πεγ48
0003d2  ea4f2726          ASR      r7,r6,#8
;;;389    modbus_registers[95]=(char)(load_I%256);
0003d6  f88d70c0          STRB     r7,[sp,#0xc0]
;;;390    modbus_registers[96]=(char)(load_I/256);		//Πεγ49
0003da  f88d30c1          STRB     r3,[sp,#0xc1]
;;;391    modbus_registers[97]=(char)(load_I%256);
0003de  f88d40c2          STRB     r4,[sp,#0xc2]
;;;392    modbus_registers[98]=(char)(load_I/256);		//Πεγ50
0003e2  f88d50c3          STRB     r5,[sp,#0xc3]
;;;393    modbus_registers[99]=(char)(load_I%256);
0003e6  f88d40c4          STRB     r4,[sp,#0xc4]
;;;394    
;;;395    modbus_tx_buff[0]=adr;
0003ea  f88d50c5          STRB     r5,[sp,#0xc5]
;;;396    modbus_tx_buff[1]=func;
0003ee  f88d40c6          STRB     r4,[sp,#0xc6]
;;;397    modbus_tx_buff[2]=(char)(reg_adr/256);
0003f2  f88d50c7          STRB     r5,[sp,#0xc7]
0003f6  f88d0000          STRB     r0,[sp,#0]
;;;398    modbus_tx_buff[3]=(char)(reg_adr%256);
0003fa  f88d1001          STRB     r1,[sp,#1]
;;;399    //modbus_tx_buff[4]=(char)(reg_quantity/256);
;;;400    //modbus_tx_buff[5]=(char)(reg_quantity%256);
;;;401    /*
;;;402    modbus_registers[0]=0x10;
;;;403    modbus_registers[1]=0x11;
;;;404    modbus_registers[2]=0x12;
;;;405    modbus_registers[3]=0x13;
;;;406    modbus_registers[4]=0x14;
;;;407    modbus_registers[5]=0x15;
;;;408    */
;;;409    
;;;410    mem_copy((char*)&modbus_tx_buff[4],(char*)&modbus_registers[(reg_adr-1)*2],2);
0003fe  ea4f0048          LSL      r0,r8,#1
000402  f88d0002          STRB     r0,[sp,#2]
000406  e03f              B        |L3.1160|
                  |L3.1032|
                          DCD      load_U
                  |L3.1036|
                          DCD      load_I
                  |L3.1040|
                          DCD      Ib_ips_termokompensat
                  |L3.1044|
                          DCD      t_ext
                  |L3.1048|
                          DCD      net_Ua
                  |L3.1052|
                          DCD      net_Ub
                  |L3.1056|
                          DCD      net_Uc
                  |L3.1060|
                          DCD      net_F3
                  |L3.1064|
                          DCD      0x40024020
                  |L3.1068|
                          DCD      NUMIST
                  |L3.1072|
                          DCD      PAR
                  |L3.1076|
                          DCD      ZV_ON
                  |L3.1080|
                          DCD      TERMOKOMPENS
                  |L3.1084|
                          DCD      UBM_AV
                  |L3.1088|
                          DCD      TBAT
                  |L3.1092|
                          DCD      UMAX
                  |L3.1096|
                          DCD      UB20
                  |L3.1100|
                          DCD      ||DU||
                  |L3.1104|
                          DCD      UB0
                  |L3.1108|
                          DCD      USIGN
                  |L3.1112|
                          DCD      UMN
                  |L3.1116|
                          DCD      U0B
                  |L3.1120|
                          DCD      IKB
                  |L3.1124|
                          DCD      IZMAX
                  |L3.1128|
                          DCD      IMAX
                  |L3.1132|
                          DCD      IMIN
                  |L3.1136|
                          DCD      UVZ
                  |L3.1140|
                          DCD      TZAS
                  |L3.1144|
                          DCD      TMAX
                  |L3.1148|
                          DCD      TSIGN
                  |L3.1152|
                          DCD      TBATMAX
                  |L3.1156|
                          DCD      TBATSIGN
                  |L3.1160|
000488  a919              ADD      r1,sp,#0x64
00048a  f1a20201          SUB      r2,r2,#1
00048e  eb010142          ADD      r1,r1,r2,LSL #1
000492  4602              MOV      r2,r0
000494  466d              MOV      r5,sp
000496  f10d0003          ADD      r0,sp,#3
;;;411    
;;;412    crc_temp=CRC16_2(modbus_tx_buff,6);
00049a  f7fffffe          BL       mem_copy
00049e  2003              MOVS     r0,#3
;;;413    
;;;414    modbus_tx_buff[6]=crc_temp%256;
0004a0  eb000048          ADD      r0,r0,r8,LSL #1
;;;415    modbus_tx_buff[7]=crc_temp/256;
0004a4  b201              SXTH     r1,r0
0004a6  4668              MOV      r0,sp
0004a8  f7fffffe          BL       CRC16_2
;;;416    
;;;417    for (i=0;i<8;i++)
0004ac  eb050148          ADD      r1,r5,r8,LSL #1
;;;418    	{
;;;419    	putchar0(modbus_tx_buff[i]);
0004b0  70c8              STRB     r0,[r1,#3]
0004b2  ea4f2010          LSR      r0,r0,#8
0004b6  7108              STRB     r0,[r1,#4]            ;417
0004b8  f04f0400          MOV      r4,#0                 ;417
                  |L3.1212|
0004bc  5d28              LDRB     r0,[r5,r4]            ;417
0004be  f7fffffe          BL       putchar0
;;;420    	}
;;;421    for (i=0;i<8;i++)
0004c2  f1040401          ADD      r4,r4,#1
;;;422    	{
;;;423    	putchar_sc16is700(modbus_tx_buff[i]);
0004c6  b2e4              UXTB     r4,r4
0004c8  2c0f              CMP      r4,#0xf
0004ca  d3f7              BCC      |L3.1212|
0004cc  f04f0400          MOV      r4,#0                 ;421
                  |L3.1232|
0004d0  5d28              LDRB     r0,[r5,r4]            ;421
0004d2  f7fffffe          BL       putchar_sc16is700
;;;424    	}
;;;425    }
0004d6  f1040401          ADD      r4,r4,#1
0004da  b2e4              UXTB     r4,r4
0004dc  2c0f              CMP      r4,#0xf
0004de  d3f7              BCC      |L3.1232|
0004e0  b032              ADD      sp,sp,#0xc8
0004e2  e8bd81f0          POP      {r4-r8,pc}
;;;426    
                          ENDP


                          AREA ||.bss||, DATA, NOINIT, ALIGN=0

                  modbus_buf
                          %        20

                          AREA ||area_number.6||, DATA, NOINIT, ALIGN=0

                          EXPORTAS ||area_number.6||, ||.bss||
                  modbus_rx_buffer
                          %        30
                  modbus_an_buffer
                          %        30

                          AREA ||.data||, DATA, ALIGN=1

                  modbus_crc16
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.9||, DATA, ALIGN=0

                          EXPORTAS ||area_number.9||, ||.data||
                  modbus_timeout_cnt
000000  00                DCB      0x00

                          AREA ||area_number.10||, DATA, ALIGN=1

                          EXPORTAS ||area_number.10||, ||.data||
                  bMODBUS_TIMEOUT
000000  00                DCB      0x00
                  modbus_rx_buffer_ptr
000001  00                DCB      0x00
                  modbus_rx_counter
000002  0000              DCB      0x00,0x00
                  modbus_plazma
000004  0000              DCB      0x00,0x00
                  modbus_plazma1
000006  0000              DCB      0x00,0x00
                  modbus_plazma2
000008  0000              DCB      0x00,0x00
                  modbus_plazma3
00000a  0000              DCB      0x00,0x00

                          AREA ||area_number.11||, DATA, ALIGN=1

                          EXPORTAS ||area_number.11||, ||.data||
                  modbus_rx_arg0
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.12||, DATA, ALIGN=1

                          EXPORTAS ||area_number.12||, ||.data||
                  modbus_rx_arg1
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.13||, DATA, ALIGN=1

                          EXPORTAS ||area_number.13||, ||.data||
                  modbus_rx_arg2
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.14||, DATA, ALIGN=1

                          EXPORTAS ||area_number.14||, ||.data||
                  modbus_rx_arg3
000000  0000              DCB      0x00,0x00
