; generated by ARM C/C++ Compiler, 4.1 [Build 644]
; commandline ArmCC [--list --debug -c --asm --interleave -o.\EXE\modbus.o --asm_dir=.\ --list_dir=.\ --depend=.\EXE\modbus.d --feedback=.\EXE\UKU_220_IPS_TERMOKOMPENSAT.fed --cpu=Cortex-M3 --apcs=interwork -O1 -IC:\Keil\ARM\CMSIS\Include -IC:\Keil\ARM\INC\NXP\LPC17xx -D__MICROLIB -DUKU_220_IPS_TERMOKOMPENSAT -DUKU2071x --omf_browse=.\EXE\modbus.crf modbus.c]
                          THUMB

                          AREA ||.text||, CODE, READONLY, ALIGN=2

                  CRC16_2 PROC
;;;31     //-----------------------------------------------
;;;32     unsigned short CRC16_2(char* buf, short len)
000000  b570              PUSH     {r4-r6,lr}
;;;33     {
000002  4605              MOV      r5,r0
;;;34     unsigned short crc = 0xFFFF;
000004  f64f70ff          MOV      r0,#0xffff
;;;35     short pos;
;;;36     short i;
;;;37     
;;;38     for (pos = 0; pos < len; pos++)
000008  f04f0300          MOV      r3,#0
;;;39       	{
;;;40         	crc ^= (unsigned short)buf[pos];          // XOR byte into least sig. byte of crc
;;;41     
;;;42         	for ( i = 8; i != 0; i--) 
;;;43     		{    // Loop over each bit
;;;44           	if ((crc & 0x0001) != 0) 
;;;45     			{      // If the LSB is set
;;;46             		crc >>= 1;                    // Shift right and XOR 0xA001
;;;47             		crc ^= 0xA001;
00000c  f24a0401          MOV      r4,#0xa001
000010  e015              B        |L1.62|
                  |L1.18|
000012  5cea              LDRB     r2,[r5,r3]            ;40
000014  ea820000          EOR      r0,r2,r0              ;40
000018  f04f0208          MOV      r2,#8                 ;42
                  |L1.28|
00001c  07c6              LSLS     r6,r0,#31             ;44
00001e  d004              BEQ      |L1.42|
000020  ea4f0050          LSR      r0,r0,#1              ;46
000024  ea800004          EOR      r0,r0,r4
000028  e001              B        |L1.46|
                  |L1.42|
;;;48           		}
;;;49           	else  crc >>= 1;                    // Just shift right
00002a  ea4f0050          LSR      r0,r0,#1
                  |L1.46|
00002e  f1a20201          SUB      r2,r2,#1              ;42
000032  b212              SXTH     r2,r2                 ;42
000034  2a00              CMP      r2,#0                 ;42
000036  d1f1              BNE      |L1.28|
000038  f1030301          ADD      r3,r3,#1              ;38
00003c  b21b              SXTH     r3,r3                 ;38
                  |L1.62|
00003e  428b              CMP      r3,r1                 ;38
000040  dbe7              BLT      |L1.18|
;;;50         		}
;;;51       	}
;;;52       // Note, this number has low and high bytes swapped, so use it accordingly (or swap bytes)
;;;53     return crc;
;;;54     }
000042  bd70              POP      {r4-r6,pc}
;;;55     
                          ENDP

                  modbus_hold_register_transmit PROC
;;;285    //-----------------------------------------------
;;;286    void modbus_register_transmit(unsigned char adr,unsigned char func,unsigned short reg_adr)
;;;287    {
;;;288    char modbus_registers[150];
;;;289    char modbus_tx_buff[50];
;;;290    unsigned short crc_temp;
;;;291    char i;
;;;292    
;;;293    
;;;294    modbus_registers[0]=(char)(load_U/256);					//Πεγ1
;;;295    modbus_registers[1]=(char)(load_U%256);
;;;296    modbus_registers[2]=(char)(load_I/256);					//Πεγ2
;;;297    modbus_registers[3]=(char)(load_I%256);
;;;298    modbus_registers[4]=(char)(Ib_ips_termokompensat/256);		//Πεγ3
000044  b570              PUSH     {r4-r6,lr}
000046  b0b2              SUB      sp,sp,#0xc8
000048  4bff              LDR      r3,|L1.1096|
00004a  8b9c              LDRH     r4,[r3,#0x1c]
00004c  ea4f2414          LSR      r4,r4,#8
;;;299    modbus_registers[5]=(char)(Ib_ips_termokompensat%256);
000050  f88d4078          STRB     r4,[sp,#0x78]
;;;300    modbus_registers[6]=(char)(t_ext[0]/256);				//Πεγ4
000054  8b9c              LDRH     r4,[r3,#0x1c]
000056  f88d4079          STRB     r4,[sp,#0x79]
00005a  7e1c              LDRB     r4,[r3,#0x18]
00005c  f04f0400          MOV      r4,#0
000060  f88d407a          STRB     r4,[sp,#0x7a]
000064  7e1d              LDRB     r5,[r3,#0x18]
000066  f88d507b          STRB     r5,[sp,#0x7b]
;;;301    modbus_registers[7]=(char)(t_ext[0]%256);
00006a  7b1d              LDRB     r5,[r3,#0xc]
00006c  f88d407c          STRB     r4,[sp,#0x7c]
;;;302    modbus_registers[8]=(char)(net_Ua/256);					//Πεγ5
000070  7b1d              LDRB     r5,[r3,#0xc]
000072  f88d507d          STRB     r5,[sp,#0x7d]
000076  7a1d              LDRB     r5,[r3,#8]
000078  f88d407e          STRB     r4,[sp,#0x7e]
00007c  7a1d              LDRB     r5,[r3,#8]
00007e  f88d507f          STRB     r5,[sp,#0x7f]
000082  791d              LDRB     r5,[r3,#4]
;;;303    modbus_registers[9]=(char)(net_Ua%256);		 	
000084  f88d4080          STRB     r4,[sp,#0x80]
;;;304    modbus_registers[10]=(char)(net_Ub/256);				//Πεγ6
000088  791d              LDRB     r5,[r3,#4]
00008a  f88d5081          STRB     r5,[sp,#0x81]
00008e  781d              LDRB     r5,[r3,#0]
000090  f88d4082          STRB     r4,[sp,#0x82]
000094  781b              LDRB     r3,[r3,#0]
000096  f88d3083          STRB     r3,[sp,#0x83]
00009a  4bec              LDR      r3,|L1.1100|
00009c  f9b33000          LDRSH    r3,[r3,#0]  ; NUMIST
;;;305    modbus_registers[11]=(char)(net_Ub%256);
0000a0  ea4f74e3          ASR      r4,r3,#31
;;;306    modbus_registers[12]=(char)(net_Uc/256);				//Πεγ7
0000a4  eb036414          ADD      r4,r3,r4,LSR #24
0000a8  ea4f2524          ASR      r5,r4,#8
0000ac  f88d508a          STRB     r5,[sp,#0x8a]
0000b0  f88d308b          STRB     r3,[sp,#0x8b]
0000b4  4be6              LDR      r3,|L1.1104|
0000b6  f9b33000          LDRSH    r3,[r3,#0]  ; PAR
;;;307    modbus_registers[13]=(char)(net_Uc%256);
0000ba  ea4f74e3          ASR      r4,r3,#31
;;;308    modbus_registers[14]=(char)(net_F3/256);				//Πεγ8
0000be  eb036414          ADD      r4,r3,r4,LSR #24
0000c2  ea4f2524          ASR      r5,r4,#8
0000c6  f88d508c          STRB     r5,[sp,#0x8c]
0000ca  f88d308d          STRB     r3,[sp,#0x8d]
0000ce  4be1              LDR      r3,|L1.1108|
0000d0  f9b33000          LDRSH    r3,[r3,#0]  ; ZV_ON
;;;309    modbus_registers[15]=(char)(net_F3%256);
0000d4  ea4f74e3          ASR      r4,r3,#31
;;;310    modbus_registers[16]=(char)(load_I/256);				//Πεγ9
0000d8  eb036414          ADD      r4,r3,r4,LSR #24
;;;311    modbus_registers[17]=(char)(load_I%256);
0000dc  ea4f2524          ASR      r5,r4,#8
;;;312    modbus_registers[18]=(char)(load_I/256);				//Πεγ10
0000e0  f88d508e          STRB     r5,[sp,#0x8e]
;;;313    modbus_registers[19]=(char)(load_I%256);
0000e4  f88d308f          STRB     r3,[sp,#0x8f]
;;;314    modbus_registers[20]=(char)((LPC_RTC->YEAR)/256);			//Πεγ11
0000e8  4bdb              LDR      r3,|L1.1112|
0000ea  f9b33000          LDRSH    r3,[r3,#0]  ; UBM_AV
0000ee  ea4f74e3          ASR      r4,r3,#31
;;;315    modbus_registers[21]=(char)((LPC_RTC->YEAR)%256);
0000f2  eb036414          ADD      r4,r3,r4,LSR #24
0000f6  ea4f2524          ASR      r5,r4,#8
;;;316    modbus_registers[22]=(char)((LPC_RTC->MONTH)/256);		//Πεγ12
0000fa  f88d5092          STRB     r5,[sp,#0x92]
0000fe  f88d3093          STRB     r3,[sp,#0x93]
;;;317    modbus_registers[23]=(char)((LPC_RTC->MONTH)%256);
000102  4bd6              LDR      r3,|L1.1116|
000104  f9b33000          LDRSH    r3,[r3,#0]  ; TBAT
;;;318    modbus_registers[24]=(char)((LPC_RTC->DOM)/256);			//Πεγ13
000108  ea4f74e3          ASR      r4,r3,#31
00010c  eb036414          ADD      r4,r3,r4,LSR #24
;;;319    modbus_registers[25]=(char)((LPC_RTC->DOM)%256);
000110  ea4f2524          ASR      r5,r4,#8
;;;320    modbus_registers[26]=(char)((LPC_RTC->HOUR)/256);			//Πεγ14
000114  f88d509e          STRB     r5,[sp,#0x9e]
000118  f88d309f          STRB     r3,[sp,#0x9f]
;;;321    modbus_registers[27]=(char)((LPC_RTC->HOUR)%256);
00011c  4bd0              LDR      r3,|L1.1120|
00011e  f9b33000          LDRSH    r3,[r3,#0]  ; UMAX
;;;322    modbus_registers[28]=(char)((LPC_RTC->MIN)/256);			//Πεγ15
000122  ea4f74e3          ASR      r4,r3,#31
;;;323    modbus_registers[29]=(char)((LPC_RTC->MIN)%256);
000126  eb036414          ADD      r4,r3,r4,LSR #24
00012a  ea4f2524          ASR      r5,r4,#8
;;;324    modbus_registers[30]=(char)((LPC_RTC->SEC)/256);			//Πεγ16
00012e  f88d50a0          STRB     r5,[sp,#0xa0]
;;;325    modbus_registers[31]=(char)((LPC_RTC->SEC)%256);
000132  f88d30a1          STRB     r3,[sp,#0xa1]
000136  4bcb              LDR      r3,|L1.1124|
;;;326    modbus_registers[32]=(char)(load_I/256);				//Πεγ17
000138  4ccb              LDR      r4,|L1.1128|
00013a  f9b33000          LDRSH    r3,[r3,#0]  ; UB20
;;;327    modbus_registers[33]=(char)(load_I%256);
00013e  f9b44000          LDRSH    r4,[r4,#0]  ; DU
;;;328    modbus_registers[34]=(char)(load_I/256);				//Πεγ18
000142  eba30404          SUB      r4,r3,r4
;;;329    modbus_registers[35]=(char)(load_I%256);
000146  ea4f75e4          ASR      r5,r4,#31
;;;330    modbus_registers[36]=(char)(load_I/256);		//Πεγ19
00014a  eb046515          ADD      r5,r4,r5,LSR #24
;;;331    modbus_registers[37]=(char)(load_I%256);
00014e  ea4f2625          ASR      r6,r5,#8
;;;332    modbus_registers[38]=(char)(NUMIST/256);		//Πεγ20
000152  f88d60a2          STRB     r6,[sp,#0xa2]
000156  f88d40a3          STRB     r4,[sp,#0xa3]
00015a  4cc4              LDR      r4,|L1.1132|
00015c  f9b44000          LDRSH    r4,[r4,#0]  ; UB0
000160  ea4f75e4          ASR      r5,r4,#31
000164  eb046515          ADD      r5,r4,r5,LSR #24
;;;333    modbus_registers[39]=(char)(NUMIST%256);
000168  ea4f2625          ASR      r6,r5,#8
;;;334    modbus_registers[40]=(char)(PAR/256);		//Πεγ21
00016c  f88d60a4          STRB     r6,[sp,#0xa4]
000170  f88d40a5          STRB     r4,[sp,#0xa5]
000174  ea4f74e3          ASR      r4,r3,#31
000178  eb036414          ADD      r4,r3,r4,LSR #24
00017c  ea4f2524          ASR      r5,r4,#8
;;;335    modbus_registers[41]=(char)(PAR%256);
000180  f88d50a6          STRB     r5,[sp,#0xa6]
;;;336    modbus_registers[42]=(char)(ZV_ON/256);		//Πεγ22
000184  f88d30a7          STRB     r3,[sp,#0xa7]
000188  4bb9              LDR      r3,|L1.1136|
00018a  f9b33000          LDRSH    r3,[r3,#0]  ; USIGN
00018e  ea4f74e3          ASR      r4,r3,#31
000192  eb036414          ADD      r4,r3,r4,LSR #24
000196  ea4f2524          ASR      r5,r4,#8
;;;337    modbus_registers[43]=(char)(ZV_ON%256);
00019a  f88d50a8          STRB     r5,[sp,#0xa8]
;;;338    modbus_registers[44]=(char)(TERMOKOMPENS/256);		//Πεγ23
00019e  f88d30a9          STRB     r3,[sp,#0xa9]
0001a2  4bb4              LDR      r3,|L1.1140|
0001a4  f9b33000          LDRSH    r3,[r3,#0]  ; UMN
0001a8  ea4f74e3          ASR      r4,r3,#31
0001ac  eb036414          ADD      r4,r3,r4,LSR #24
0001b0  ea4f2524          ASR      r5,r4,#8
;;;339    modbus_registers[45]=(char)(TERMOKOMPENS%256);
0001b4  f88d50aa          STRB     r5,[sp,#0xaa]
;;;340    modbus_registers[46]=(char)(UBM_AV/256);		//Πεγ24
0001b8  f88d30ab          STRB     r3,[sp,#0xab]
0001bc  4bae              LDR      r3,|L1.1144|
0001be  f9b33000          LDRSH    r3,[r3,#0]  ; U0B
0001c2  ea4f74e3          ASR      r4,r3,#31
0001c6  eb036414          ADD      r4,r3,r4,LSR #24
0001ca  ea4f2524          ASR      r5,r4,#8
;;;341    modbus_registers[47]=(char)(UBM_AV%256);
0001ce  f88d50ac          STRB     r5,[sp,#0xac]
;;;342    modbus_registers[48]=(char)(load_I/256);		//Πεγ25
0001d2  f88d30ad          STRB     r3,[sp,#0xad]
;;;343    modbus_registers[49]=(char)(load_I%256);
0001d6  4ba9              LDR      r3,|L1.1148|
0001d8  f9b33000          LDRSH    r3,[r3,#0]  ; IKB
;;;344    modbus_registers[50]=(char)(load_I/256);		//Πεγ26
0001dc  ea4f74e3          ASR      r4,r3,#31
;;;345    modbus_registers[51]=(char)(load_I%256);
0001e0  eb036414          ADD      r4,r3,r4,LSR #24
;;;346    modbus_registers[52]=(char)(load_I/256);		//Πεγ27
0001e4  ea4f2524          ASR      r5,r4,#8
;;;347    modbus_registers[53]=(char)(load_I%256);
0001e8  f88d50ae          STRB     r5,[sp,#0xae]
;;;348    modbus_registers[54]=(char)(load_I/256);		//Πεγ28
0001ec  f88d30af          STRB     r3,[sp,#0xaf]
;;;349    modbus_registers[55]=(char)(load_I%256);
0001f0  4ba3              LDR      r3,|L1.1152|
;;;350    modbus_registers[56]=(char)(load_I/256);		//Πεγ29
0001f2  f9b33000          LDRSH    r3,[r3,#0]  ; IZMAX
;;;351    modbus_registers[57]=(char)(load_I%256);
0001f6  ea4f74e3          ASR      r4,r3,#31
;;;352    modbus_registers[58]=(char)(TBAT/256);			//Πεγ30
0001fa  eb036414          ADD      r4,r3,r4,LSR #24
0001fe  ea4f2524          ASR      r5,r4,#8
000202  f88d50b0          STRB     r5,[sp,#0xb0]
000206  f88d30b1          STRB     r3,[sp,#0xb1]
00020a  4b9e              LDR      r3,|L1.1156|
00020c  f9b33000          LDRSH    r3,[r3,#0]  ; IMAX
;;;353    modbus_registers[59]=(char)(TBAT%256);
000210  ea4f74e3          ASR      r4,r3,#31
;;;354    modbus_registers[60]=(char)(UMAX/256);			//Πεγ31
000214  eb036414          ADD      r4,r3,r4,LSR #24
000218  ea4f2524          ASR      r5,r4,#8
00021c  f88d50b2          STRB     r5,[sp,#0xb2]
000220  f88d30b3          STRB     r3,[sp,#0xb3]
000224  4b98              LDR      r3,|L1.1160|
000226  f9b33000          LDRSH    r3,[r3,#0]  ; IMIN
;;;355    modbus_registers[61]=(char)(UMAX%256);
00022a  ea4f74e3          ASR      r4,r3,#31
;;;356    modbus_registers[62]=(char)((UB20-DU)/256);		//Πεγ32
00022e  eb036414          ADD      r4,r3,r4,LSR #24
000232  ea4f2524          ASR      r5,r4,#8
000236  f88d50b4          STRB     r5,[sp,#0xb4]
00023a  f88d30b5          STRB     r3,[sp,#0xb5]
00023e  4b93              LDR      r3,|L1.1164|
000240  f9b33000          LDRSH    r3,[r3,#0]  ; UVZ
000244  ea4f74e3          ASR      r4,r3,#31
000248  eb036414          ADD      r4,r3,r4,LSR #24
00024c  ea4f2524          ASR      r5,r4,#8
;;;357    modbus_registers[63]=(char)((UB20-DU)%256);
000250  f88d50b6          STRB     r5,[sp,#0xb6]
;;;358    modbus_registers[64]=(char)(UB0/256);			//Πεγ33
000254  f88d30b7          STRB     r3,[sp,#0xb7]
000258  4b8d              LDR      r3,|L1.1168|
00025a  f9b33000          LDRSH    r3,[r3,#0]  ; TZAS
00025e  ea4f74e3          ASR      r4,r3,#31
000262  eb036414          ADD      r4,r3,r4,LSR #24
000266  ea4f2524          ASR      r5,r4,#8
;;;359    modbus_registers[65]=(char)(UB0%256);
00026a  f88d50b8          STRB     r5,[sp,#0xb8]
;;;360    modbus_registers[66]=(char)(UB20/256);			//Πεγ34
00026e  f88d30b9          STRB     r3,[sp,#0xb9]
000272  4b88              LDR      r3,|L1.1172|
000274  f9b33000          LDRSH    r3,[r3,#0]  ; TMAX
000278  ea4f74e3          ASR      r4,r3,#31
;;;361    modbus_registers[67]=(char)(UB20%256);
00027c  eb036414          ADD      r4,r3,r4,LSR #24
;;;362    modbus_registers[68]=(char)(USIGN/256);		//Πεγ35
000280  ea4f2524          ASR      r5,r4,#8
000284  f88d50ba          STRB     r5,[sp,#0xba]
000288  f88d30bb          STRB     r3,[sp,#0xbb]
00028c  4b82              LDR      r3,|L1.1176|
00028e  f9b33000          LDRSH    r3,[r3,#0]  ; TSIGN
000292  ea4f74e3          ASR      r4,r3,#31
;;;363    modbus_registers[69]=(char)(USIGN%256);
000296  eb036414          ADD      r4,r3,r4,LSR #24
;;;364    modbus_registers[70]=(char)(UMN/256);		//Πεγ36
00029a  ea4f2524          ASR      r5,r4,#8
00029e  f88d50bc          STRB     r5,[sp,#0xbc]
0002a2  f88d30bd          STRB     r3,[sp,#0xbd]
0002a6  4b7d              LDR      r3,|L1.1180|
0002a8  f9b33000          LDRSH    r3,[r3,#0]  ; TBATMAX
0002ac  ea4f74e3          ASR      r4,r3,#31
;;;365    modbus_registers[71]=(char)(UMN%256);
0002b0  eb036414          ADD      r4,r3,r4,LSR #24
;;;366    modbus_registers[72]=(char)(U0B/256);		//Πεγ37
0002b4  ea4f2524          ASR      r5,r4,#8
0002b8  f88d50be          STRB     r5,[sp,#0xbe]
0002bc  f88d30bf          STRB     r3,[sp,#0xbf]
0002c0  4b77              LDR      r3,|L1.1184|
0002c2  f9b33000          LDRSH    r3,[r3,#0]  ; TBATSIGN
0002c6  ea4f74e3          ASR      r4,r3,#31
;;;367    modbus_registers[73]=(char)(U0B%256);
0002ca  eb036414          ADD      r4,r3,r4,LSR #24
;;;368    modbus_registers[74]=(char)(IKB/256);		//Πεγ38
0002ce  ea4f2524          ASR      r5,r4,#8
0002d2  f88d50c0          STRB     r5,[sp,#0xc0]
0002d6  f88d30c1          STRB     r3,[sp,#0xc1]
0002da  f88d0000          STRB     r0,[sp,#0]
0002de  f88d1001          STRB     r1,[sp,#1]
0002e2  ea4f2012          LSR      r0,r2,#8
;;;369    modbus_registers[75]=(char)(IKB%256);
0002e6  f88d0002          STRB     r0,[sp,#2]
;;;370    modbus_registers[76]=(char)(IZMAX/256);		//Πεγ39
0002ea  f88d2003          STRB     r2,[sp,#3]
0002ee  a819              ADD      r0,sp,#0x64
0002f0  f1a20201          SUB      r2,r2,#1
0002f4  eb000142          ADD      r1,r0,r2,LSL #1
0002f8  f04f0202          MOV      r2,#2
0002fc  466d              MOV      r5,sp
;;;371    modbus_registers[77]=(char)(IZMAX%256);
0002fe  a801              ADD      r0,sp,#4
000300  f7fffffe          BL       mem_copy
;;;372    modbus_registers[78]=(char)(IMAX/256);		//Πεγ40
000304  2106              MOVS     r1,#6
000306  4668              MOV      r0,sp
000308  f7fffffe          BL       CRC16_2
00030c  f88d0006          STRB     r0,[sp,#6]
000310  ea4f2010          LSR      r0,r0,#8
000314  f88d0007          STRB     r0,[sp,#7]
;;;373    modbus_registers[79]=(char)(IMAX%256);
000318  f04f0400          MOV      r4,#0
                  |L1.796|
;;;374    modbus_registers[80]=(char)(IMIN/256);		//Πεγ41
00031c  5d28              LDRB     r0,[r5,r4]
00031e  f7fffffe          BL       putchar0
000322  f1040401          ADD      r4,r4,#1
000326  b2e4              UXTB     r4,r4
000328  2c08              CMP      r4,#8
00032a  d3f7              BCC      |L1.796|
00032c  f04f0400          MOV      r4,#0
                  |L1.816|
000330  5d28              LDRB     r0,[r5,r4]
;;;375    modbus_registers[81]=(char)(IMIN%256);
000332  f7fffffe          BL       putchar_sc16is700
;;;376    modbus_registers[82]=(char)(UVZ/256);		//Πεγ42
000336  f1040401          ADD      r4,r4,#1
00033a  b2e4              UXTB     r4,r4
00033c  2c08              CMP      r4,#8
00033e  d3f7              BCC      |L1.816|
000340  b032              ADD      sp,sp,#0xc8
000342  bd70              POP      {r4-r6,pc}
;;;377    modbus_registers[83]=(char)(UVZ%256);
;;;378    modbus_registers[84]=(char)(TZAS/256);		//Πεγ43
;;;379    modbus_registers[85]=(char)(TZAS%256);
;;;380    modbus_registers[86]=(char)(TMAX/256);		//Πεγ44
;;;381    modbus_registers[87]=(char)(TMAX%256);
;;;382    modbus_registers[88]=(char)(TSIGN/256);		//Πεγ45
;;;383    modbus_registers[89]=(char)(TSIGN%256);
;;;384    modbus_registers[90]=(char)(TBATMAX/256);		//Πεγ46
;;;385    modbus_registers[91]=(char)(TBATMAX%256);
;;;386    modbus_registers[92]=(char)(TBATSIGN/256);		//Πεγ47
;;;387    modbus_registers[93]=(char)(TBATSIGN%256);
;;;388    modbus_registers[94]=(char)(load_I/256);		//Πεγ48
;;;389    modbus_registers[95]=(char)(load_I%256);
;;;390    modbus_registers[96]=(char)(load_I/256);		//Πεγ49
;;;391    modbus_registers[97]=(char)(load_I%256);
;;;392    modbus_registers[98]=(char)(load_I/256);		//Πεγ50
;;;393    modbus_registers[99]=(char)(load_I%256);
;;;394    
;;;395    modbus_tx_buff[0]=adr;
;;;396    modbus_tx_buff[1]=func;
;;;397    modbus_tx_buff[2]=(char)(reg_adr/256);
;;;398    modbus_tx_buff[3]=(char)(reg_adr%256);
;;;399    //modbus_tx_buff[4]=(char)(reg_quantity/256);
;;;400    //modbus_tx_buff[5]=(char)(reg_quantity%256);
;;;401    /*
;;;402    modbus_registers[0]=0x10;
;;;403    modbus_registers[1]=0x11;
;;;404    modbus_registers[2]=0x12;
;;;405    modbus_registers[3]=0x13;
;;;406    modbus_registers[4]=0x14;
;;;407    modbus_registers[5]=0x15;
;;;408    */
;;;409    
;;;410    mem_copy((char*)&modbus_tx_buff[4],(char*)&modbus_registers[(reg_adr-1)*2],2);
;;;411    
;;;412    crc_temp=CRC16_2(modbus_tx_buff,6);
;;;413    
;;;414    modbus_tx_buff[6]=crc_temp%256;
;;;415    modbus_tx_buff[7]=crc_temp/256;
;;;416    
;;;417    for (i=0;i<8;i++)
;;;418    	{
;;;419    	putchar0(modbus_tx_buff[i]);
;;;420    	}
;;;421    for (i=0;i<8;i++)
;;;422    	{
;;;423    	putchar_sc16is700(modbus_tx_buff[i]);
;;;424    	}
;;;425    }
;;;426    
                          ENDP

                  modbus_input_registers_transmit PROC
;;;285    //-----------------------------------------------
;;;286    void modbus_register_transmit(unsigned char adr,unsigned char func,unsigned short reg_adr)
;;;287    {
;;;288    char modbus_registers[150];
;;;289    char modbus_tx_buff[50];
;;;290    unsigned short crc_temp;
;;;291    char i;
;;;292    
;;;293    
;;;294    modbus_registers[0]=(char)(load_U/256);					//Πεγ1
;;;295    modbus_registers[1]=(char)(load_U%256);
;;;296    modbus_registers[2]=(char)(load_I/256);					//Πεγ2
;;;297    modbus_registers[3]=(char)(load_I%256);
;;;298    modbus_registers[4]=(char)(Ib_ips_termokompensat/256);		//Πεγ3
;;;299    modbus_registers[5]=(char)(Ib_ips_termokompensat%256);
;;;300    modbus_registers[6]=(char)(t_ext[0]/256);				//Πεγ4
;;;301    modbus_registers[7]=(char)(t_ext[0]%256);
;;;302    modbus_registers[8]=(char)(net_Ua/256);					//Πεγ5
;;;303    modbus_registers[9]=(char)(net_Ua%256);		 	
;;;304    modbus_registers[10]=(char)(net_Ub/256);				//Πεγ6
;;;305    modbus_registers[11]=(char)(net_Ub%256);
;;;306    modbus_registers[12]=(char)(net_Uc/256);				//Πεγ7
;;;307    modbus_registers[13]=(char)(net_Uc%256);
;;;308    modbus_registers[14]=(char)(net_F3/256);				//Πεγ8
;;;309    modbus_registers[15]=(char)(net_F3%256);
;;;310    modbus_registers[16]=(char)(load_I/256);				//Πεγ9
;;;311    modbus_registers[17]=(char)(load_I%256);
;;;312    modbus_registers[18]=(char)(load_I/256);				//Πεγ10
;;;313    modbus_registers[19]=(char)(load_I%256);
;;;314    modbus_registers[20]=(char)((LPC_RTC->YEAR)/256);			//Πεγ11
;;;315    modbus_registers[21]=(char)((LPC_RTC->YEAR)%256);
;;;316    modbus_registers[22]=(char)((LPC_RTC->MONTH)/256);		//Πεγ12
;;;317    modbus_registers[23]=(char)((LPC_RTC->MONTH)%256);
;;;318    modbus_registers[24]=(char)((LPC_RTC->DOM)/256);			//Πεγ13
;;;319    modbus_registers[25]=(char)((LPC_RTC->DOM)%256);
;;;320    modbus_registers[26]=(char)((LPC_RTC->HOUR)/256);			//Πεγ14
;;;321    modbus_registers[27]=(char)((LPC_RTC->HOUR)%256);
;;;322    modbus_registers[28]=(char)((LPC_RTC->MIN)/256);			//Πεγ15
;;;323    modbus_registers[29]=(char)((LPC_RTC->MIN)%256);
;;;324    modbus_registers[30]=(char)((LPC_RTC->SEC)/256);			//Πεγ16
;;;325    modbus_registers[31]=(char)((LPC_RTC->SEC)%256);
;;;326    modbus_registers[32]=(char)(load_I/256);				//Πεγ17
;;;327    modbus_registers[33]=(char)(load_I%256);
;;;328    modbus_registers[34]=(char)(load_I/256);				//Πεγ18
;;;329    modbus_registers[35]=(char)(load_I%256);
;;;330    modbus_registers[36]=(char)(load_I/256);		//Πεγ19
;;;331    modbus_registers[37]=(char)(load_I%256);
;;;332    modbus_registers[38]=(char)(NUMIST/256);		//Πεγ20
;;;333    modbus_registers[39]=(char)(NUMIST%256);
;;;334    modbus_registers[40]=(char)(PAR/256);		//Πεγ21
;;;335    modbus_registers[41]=(char)(PAR%256);
;;;336    modbus_registers[42]=(char)(ZV_ON/256);		//Πεγ22
;;;337    modbus_registers[43]=(char)(ZV_ON%256);
;;;338    modbus_registers[44]=(char)(TERMOKOMPENS/256);		//Πεγ23
;;;339    modbus_registers[45]=(char)(TERMOKOMPENS%256);
;;;340    modbus_registers[46]=(char)(UBM_AV/256);		//Πεγ24
;;;341    modbus_registers[47]=(char)(UBM_AV%256);
;;;342    modbus_registers[48]=(char)(load_I/256);		//Πεγ25
;;;343    modbus_registers[49]=(char)(load_I%256);
;;;344    modbus_registers[50]=(char)(load_I/256);		//Πεγ26
;;;345    modbus_registers[51]=(char)(load_I%256);
;;;346    modbus_registers[52]=(char)(load_I/256);		//Πεγ27
;;;347    modbus_registers[53]=(char)(load_I%256);
;;;348    modbus_registers[54]=(char)(load_I/256);		//Πεγ28
;;;349    modbus_registers[55]=(char)(load_I%256);
;;;350    modbus_registers[56]=(char)(load_I/256);		//Πεγ29
;;;351    modbus_registers[57]=(char)(load_I%256);
;;;352    modbus_registers[58]=(char)(TBAT/256);			//Πεγ30
;;;353    modbus_registers[59]=(char)(TBAT%256);
;;;354    modbus_registers[60]=(char)(UMAX/256);			//Πεγ31
;;;355    modbus_registers[61]=(char)(UMAX%256);
;;;356    modbus_registers[62]=(char)((UB20-DU)/256);		//Πεγ32
;;;357    modbus_registers[63]=(char)((UB20-DU)%256);
;;;358    modbus_registers[64]=(char)(UB0/256);			//Πεγ33
;;;359    modbus_registers[65]=(char)(UB0%256);
;;;360    modbus_registers[66]=(char)(UB20/256);			//Πεγ34
;;;361    modbus_registers[67]=(char)(UB20%256);
;;;362    modbus_registers[68]=(char)(USIGN/256);		//Πεγ35
;;;363    modbus_registers[69]=(char)(USIGN%256);
;;;364    modbus_registers[70]=(char)(UMN/256);		//Πεγ36
;;;365    modbus_registers[71]=(char)(UMN%256);
;;;366    modbus_registers[72]=(char)(U0B/256);		//Πεγ37
;;;367    modbus_registers[73]=(char)(U0B%256);
;;;368    modbus_registers[74]=(char)(IKB/256);		//Πεγ38
;;;369    modbus_registers[75]=(char)(IKB%256);
;;;370    modbus_registers[76]=(char)(IZMAX/256);		//Πεγ39
;;;371    modbus_registers[77]=(char)(IZMAX%256);
;;;372    modbus_registers[78]=(char)(IMAX/256);		//Πεγ40
;;;373    modbus_registers[79]=(char)(IMAX%256);
;;;374    modbus_registers[80]=(char)(IMIN/256);		//Πεγ41
;;;375    modbus_registers[81]=(char)(IMIN%256);
;;;376    modbus_registers[82]=(char)(UVZ/256);		//Πεγ42
000344  e92d41f0          PUSH     {r4-r8,lr}
000348  f5ad7d10          SUB      sp,sp,#0x240
;;;377    modbus_registers[83]=(char)(UVZ%256);
00034c  461d              MOV      r5,r3
00034e  4b55              LDR      r3,|L1.1188|
;;;378    modbus_registers[84]=(char)(TZAS/256);		//Πεγ43
000350  f9b33000          LDRSH    r3,[r3,#0]  ; out_U
000354  ea4f74e3          ASR      r4,r3,#31
000358  eb036414          ADD      r4,r3,r4,LSR #24
00035c  ea4f2624          ASR      r6,r4,#8
000360  f88d607c          STRB     r6,[sp,#0x7c]
000364  f88d307d          STRB     r3,[sp,#0x7d]
;;;379    modbus_registers[85]=(char)(TZAS%256);
000368  4b4f              LDR      r3,|L1.1192|
;;;380    modbus_registers[86]=(char)(TMAX/256);		//Πεγ44
00036a  f9b33000          LDRSH    r3,[r3,#0]  ; bps_I
00036e  ea4f74e3          ASR      r4,r3,#31
000372  eb036414          ADD      r4,r3,r4,LSR #24
000376  ea4f2624          ASR      r6,r4,#8
00037a  f88d607e          STRB     r6,[sp,#0x7e]
00037e  f88d307f          STRB     r3,[sp,#0x7f]
;;;381    modbus_registers[87]=(char)(TMAX%256);
000382  4b4a              LDR      r3,|L1.1196|
;;;382    modbus_registers[88]=(char)(TSIGN/256);		//Πεγ45
000384  f9b33000          LDRSH    r3,[r3,#0]  ; net_U
000388  ea4f74e3          ASR      r4,r3,#31
00038c  eb036414          ADD      r4,r3,r4,LSR #24
000390  ea4f2624          ASR      r6,r4,#8
000394  f88d6080          STRB     r6,[sp,#0x80]
000398  f88d3081          STRB     r3,[sp,#0x81]
;;;383    modbus_registers[89]=(char)(TSIGN%256);
00039c  4b44              LDR      r3,|L1.1200|
;;;384    modbus_registers[90]=(char)(TBATMAX/256);		//Πεγ46
00039e  f9b33000          LDRSH    r3,[r3,#0]  ; net_F
0003a2  ea4f74e3          ASR      r4,r3,#31
0003a6  eb036414          ADD      r4,r3,r4,LSR #24
0003aa  ea4f2624          ASR      r6,r4,#8
0003ae  f88d6082          STRB     r6,[sp,#0x82]
0003b2  f88d3083          STRB     r3,[sp,#0x83]
;;;385    modbus_registers[91]=(char)(TBATMAX%256);
0003b6  4b3f              LDR      r3,|L1.1204|
;;;386    modbus_registers[92]=(char)(TBATSIGN/256);		//Πεγ47
0003b8  f9b33000          LDRSH    r3,[r3,#0]  ; net_Ua
0003bc  ea4f74e3          ASR      r4,r3,#31
0003c0  eb036414          ADD      r4,r3,r4,LSR #24
0003c4  ea4f2624          ASR      r6,r4,#8
0003c8  f88d6084          STRB     r6,[sp,#0x84]
0003cc  f88d3085          STRB     r3,[sp,#0x85]
;;;387    modbus_registers[93]=(char)(TBATSIGN%256);
0003d0  4b39              LDR      r3,|L1.1208|
;;;388    modbus_registers[94]=(char)(load_I/256);		//Πεγ48
0003d2  f9b33000          LDRSH    r3,[r3,#0]  ; net_Ub
;;;389    modbus_registers[95]=(char)(load_I%256);
0003d6  ea4f74e3          ASR      r4,r3,#31
;;;390    modbus_registers[96]=(char)(load_I/256);		//Πεγ49
0003da  eb036414          ADD      r4,r3,r4,LSR #24
;;;391    modbus_registers[97]=(char)(load_I%256);
0003de  ea4f2624          ASR      r6,r4,#8
;;;392    modbus_registers[98]=(char)(load_I/256);		//Πεγ50
0003e2  f88d6086          STRB     r6,[sp,#0x86]
;;;393    modbus_registers[99]=(char)(load_I%256);
0003e6  f88d3087          STRB     r3,[sp,#0x87]
;;;394    
;;;395    modbus_tx_buff[0]=adr;
0003ea  4b34              LDR      r3,|L1.1212|
0003ec  f9b33000          LDRSH    r3,[r3,#0]  ; net_Uc
;;;396    modbus_tx_buff[1]=func;
0003f0  ea4f74e3          ASR      r4,r3,#31
;;;397    modbus_tx_buff[2]=(char)(reg_adr/256);
0003f4  eb036414          ADD      r4,r3,r4,LSR #24
0003f8  ea4f2624          ASR      r6,r4,#8
;;;398    modbus_tx_buff[3]=(char)(reg_adr%256);
0003fc  f88d6088          STRB     r6,[sp,#0x88]
;;;399    //modbus_tx_buff[4]=(char)(reg_quantity/256);
;;;400    //modbus_tx_buff[5]=(char)(reg_quantity%256);
;;;401    /*
;;;402    modbus_registers[0]=0x10;
;;;403    modbus_registers[1]=0x11;
;;;404    modbus_registers[2]=0x12;
;;;405    modbus_registers[3]=0x13;
;;;406    modbus_registers[4]=0x14;
;;;407    modbus_registers[5]=0x15;
;;;408    */
;;;409    
;;;410    mem_copy((char*)&modbus_tx_buff[4],(char*)&modbus_registers[(reg_adr-1)*2],2);
000400  f88d3089          STRB     r3,[sp,#0x89]
000404  4b2e              LDR      r3,|L1.1216|
000406  f9b34002          LDRSH    r4,[r3,#2]  ; bat
00040a  ea4f76e4          ASR      r6,r4,#31
00040e  eb046616          ADD      r6,r4,r6,LSR #24
000412  ea4f2726          ASR      r7,r6,#8
000416  f88d708a          STRB     r7,[sp,#0x8a]
00041a  f88d408b          STRB     r4,[sp,#0x8b]
00041e  f9b34008          LDRSH    r4,[r3,#8]  ; bat
000422  ea4f76e4          ASR      r6,r4,#31
000426  eb046616          ADD      r6,r4,r6,LSR #24
00042a  ea4f2726          ASR      r7,r6,#8
00042e  f88d708c          STRB     r7,[sp,#0x8c]
000432  f88d408d          STRB     r4,[sp,#0x8d]
000436  f9b3400a          LDRSH    r4,[r3,#0xa]  ; bat
00043a  ea4f76e4          ASR      r6,r4,#31
00043e  eb046616          ADD      r6,r4,r6,LSR #24
000442  ea4f2726          ASR      r7,r6,#8
000446  e03d              B        |L1.1220|
                  |L1.1096|
                          DCD      0x40024020
                  |L1.1100|
                          DCD      NUMIST
                  |L1.1104|
                          DCD      PAR
                  |L1.1108|
                          DCD      ZV_ON
                  |L1.1112|
                          DCD      UBM_AV
                  |L1.1116|
                          DCD      TBAT
                  |L1.1120|
                          DCD      UMAX
                  |L1.1124|
                          DCD      UB20
                  |L1.1128|
                          DCD      ||DU||
                  |L1.1132|
                          DCD      UB0
                  |L1.1136|
                          DCD      USIGN
                  |L1.1140|
                          DCD      UMN
                  |L1.1144|
                          DCD      U0B
                  |L1.1148|
                          DCD      IKB
                  |L1.1152|
                          DCD      IZMAX
                  |L1.1156|
                          DCD      IMAX
                  |L1.1160|
                          DCD      IMIN
                  |L1.1164|
                          DCD      UVZ
                  |L1.1168|
                          DCD      TZAS
                  |L1.1172|
                          DCD      TMAX
                  |L1.1176|
                          DCD      TSIGN
                  |L1.1180|
                          DCD      TBATMAX
                  |L1.1184|
                          DCD      TBATSIGN
                  |L1.1188|
                          DCD      out_U
                  |L1.1192|
                          DCD      bps_I
                  |L1.1196|
                          DCD      net_U
                  |L1.1200|
                          DCD      net_F
                  |L1.1204|
                          DCD      net_Ua
                  |L1.1208|
                          DCD      net_Ub
                  |L1.1212|
                          DCD      net_Uc
                  |L1.1216|
                          DCD      bat
                  |L1.1220|
;;;411    
;;;412    crc_temp=CRC16_2(modbus_tx_buff,6);
;;;413    
;;;414    modbus_tx_buff[6]=crc_temp%256;
;;;415    modbus_tx_buff[7]=crc_temp/256;
;;;416    
;;;417    for (i=0;i<8;i++)
;;;418    	{
;;;419    	putchar0(modbus_tx_buff[i]);
;;;420    	}
;;;421    for (i=0;i<8;i++)
;;;422    	{
;;;423    	putchar_sc16is700(modbus_tx_buff[i]);
0004c4  f88d708e          STRB     r7,[sp,#0x8e]
0004c8  f88d408f          STRB     r4,[sp,#0x8f]
0004cc  8a1c              LDRH     r4,[r3,#0x10]         ;421  ; bat
0004ce  ea4f2614          LSR      r6,r4,#8              ;421
0004d2  f88d6090          STRB     r6,[sp,#0x90]         ;421
;;;424    	}
;;;425    }
0004d6  f88d4091          STRB     r4,[sp,#0x91]
0004da  f9b34004          LDRSH    r4,[r3,#4]  ; bat
0004de  ea4f76e4          ASR      r6,r4,#31
0004e2  eb046616          ADD      r6,r4,r6,LSR #24
0004e6  ea4f2726          ASR      r7,r6,#8
0004ea  f88d7092          STRB     r7,[sp,#0x92]
0004ee  f88d4093          STRB     r4,[sp,#0x93]
0004f2  f9b34006          LDRSH    r4,[r3,#6]  ; bat
0004f6  ea4f76e4          ASR      r6,r4,#31
0004fa  eb046616          ADD      r6,r4,r6,LSR #24
0004fe  ea4f2726          ASR      r7,r6,#8
000502  f88d7094          STRB     r7,[sp,#0x94]
000506  f88d4095          STRB     r4,[sp,#0x95]
00050a  4eff              LDR      r6,|L1.2312|
00050c  f9b64000          LDRSH    r4,[r6,#0]  ; BAT_C_REAL
000510  ea4f77e4          ASR      r7,r4,#31
000514  eb046717          ADD      r7,r4,r7,LSR #24
000518  ea4f2c27          ASR      r12,r7,#8
00051c  f88dc096          STRB     r12,[sp,#0x96]
000520  f88d4097          STRB     r4,[sp,#0x97]
000524  f9b3404e          LDRSH    r4,[r3,#0x4e]  ; bat
000528  ea4f77e4          ASR      r7,r4,#31
00052c  eb046717          ADD      r7,r4,r7,LSR #24
000530  ea4f2c27          ASR      r12,r7,#8
000534  f88dc098          STRB     r12,[sp,#0x98]
000538  f88d4099          STRB     r4,[sp,#0x99]
00053c  f9b34054          LDRSH    r4,[r3,#0x54]  ; bat
000540  ea4f77e4          ASR      r7,r4,#31
000544  eb046717          ADD      r7,r4,r7,LSR #24
000548  ea4f2c27          ASR      r12,r7,#8
00054c  f88dc09a          STRB     r12,[sp,#0x9a]
000550  f88d409b          STRB     r4,[sp,#0x9b]
000554  f9b34056          LDRSH    r4,[r3,#0x56]  ; bat
000558  ea4f77e4          ASR      r7,r4,#31
00055c  eb046717          ADD      r7,r4,r7,LSR #24
000560  ea4f2c27          ASR      r12,r7,#8
000564  f88dc09c          STRB     r12,[sp,#0x9c]
000568  f88d409d          STRB     r4,[sp,#0x9d]
00056c  f8b3405c          LDRH     r4,[r3,#0x5c]  ; bat
000570  ea4f2714          LSR      r7,r4,#8
000574  f88d709e          STRB     r7,[sp,#0x9e]
000578  f88d409f          STRB     r4,[sp,#0x9f]
00057c  f9b34050          LDRSH    r4,[r3,#0x50]  ; bat
000580  ea4f77e4          ASR      r7,r4,#31
000584  eb046717          ADD      r7,r4,r7,LSR #24
000588  ea4f2c27          ASR      r12,r7,#8
00058c  f88dc0a0          STRB     r12,[sp,#0xa0]
000590  f88d40a1          STRB     r4,[sp,#0xa1]
000594  f9b33052          LDRSH    r3,[r3,#0x52]  ; bat
000598  ea4f74e3          ASR      r4,r3,#31
00059c  eb036414          ADD      r4,r3,r4,LSR #24
0005a0  ea4f2724          ASR      r7,r4,#8
0005a4  f88d70a2          STRB     r7,[sp,#0xa2]
0005a8  f88d30a3          STRB     r3,[sp,#0xa3]
0005ac  f9b63002          LDRSH    r3,[r6,#2]  ; BAT_C_REAL
0005b0  ea4f74e3          ASR      r4,r3,#31
0005b4  eb036414          ADD      r4,r3,r4,LSR #24
0005b8  ea4f2624          ASR      r6,r4,#8
0005bc  f88d60a4          STRB     r6,[sp,#0xa4]
0005c0  f88d30a5          STRB     r3,[sp,#0xa5]
0005c4  4cd1              LDR      r4,|L1.2316|
0005c6  69e3              LDR      r3,[r4,#0x1c]  ; bps
0005c8  ea4f76e3          ASR      r6,r3,#31
0005cc  eb036616          ADD      r6,r3,r6,LSR #24
0005d0  ea4f2726          ASR      r7,r6,#8
0005d4  f88d70a6          STRB     r7,[sp,#0xa6]
0005d8  f88d30a7          STRB     r3,[sp,#0xa7]
0005dc  6a63              LDR      r3,[r4,#0x24]  ; bps
0005de  ea4f76e3          ASR      r6,r3,#31
0005e2  eb036616          ADD      r6,r3,r6,LSR #24
0005e6  ea4f2726          ASR      r7,r6,#8
0005ea  f88d70a8          STRB     r7,[sp,#0xa8]
0005ee  f88d30a9          STRB     r3,[sp,#0xa9]
0005f2  6aa3              LDR      r3,[r4,#0x28]  ; bps
0005f4  ea4f76e3          ASR      r6,r3,#31
0005f8  eb036616          ADD      r6,r3,r6,LSR #24
0005fc  ea4f2726          ASR      r7,r6,#8
000600  f88d70aa          STRB     r7,[sp,#0xaa]
000604  f88d30ab          STRB     r3,[sp,#0xab]
000608  f04f0600          MOV      r6,#0
00060c  f88d60ac          STRB     r6,[sp,#0xac]
000610  7863              LDRB     r3,[r4,#1]  ; bps
000612  f88d30ad          STRB     r3,[sp,#0xad]
000616  6f23              LDR      r3,[r4,#0x70]  ; bps
000618  ea4f77e3          ASR      r7,r3,#31
00061c  eb036717          ADD      r7,r3,r7,LSR #24
000620  ea4f2c27          ASR      r12,r7,#8
000624  f88dc0ae          STRB     r12,[sp,#0xae]
000628  f88d30af          STRB     r3,[sp,#0xaf]
00062c  6fa3              LDR      r3,[r4,#0x78]  ; bps
00062e  ea4f77e3          ASR      r7,r3,#31
000632  eb036717          ADD      r7,r3,r7,LSR #24
000636  ea4f2c27          ASR      r12,r7,#8
00063a  f88dc0b0          STRB     r12,[sp,#0xb0]
00063e  f88d30b1          STRB     r3,[sp,#0xb1]
000642  6fe3              LDR      r3,[r4,#0x7c]  ; bps
000644  ea4f77e3          ASR      r7,r3,#31
000648  eb036717          ADD      r7,r3,r7,LSR #24
00064c  ea4f2c27          ASR      r12,r7,#8
000650  f88dc0b2          STRB     r12,[sp,#0xb2]
000654  f88d30b3          STRB     r3,[sp,#0xb3]
000658  f88d60b4          STRB     r6,[sp,#0xb4]
00065c  f8943055          LDRB     r3,[r4,#0x55]  ; bps
000660  f88d30b5          STRB     r3,[sp,#0xb5]
000664  f8d430c4          LDR      r3,[r4,#0xc4]  ; bps
000668  ea4f77e3          ASR      r7,r3,#31
00066c  eb036717          ADD      r7,r3,r7,LSR #24
000670  ea4f2c27          ASR      r12,r7,#8
000674  f88dc0b6          STRB     r12,[sp,#0xb6]
000678  f88d30b7          STRB     r3,[sp,#0xb7]
00067c  f8d430cc          LDR      r3,[r4,#0xcc]  ; bps
000680  ea4f77e3          ASR      r7,r3,#31
000684  eb036717          ADD      r7,r3,r7,LSR #24
000688  ea4f2c27          ASR      r12,r7,#8
00068c  f88dc0b8          STRB     r12,[sp,#0xb8]
000690  f88d30b9          STRB     r3,[sp,#0xb9]
000694  f8d430d0          LDR      r3,[r4,#0xd0]  ; bps
000698  ea4f77e3          ASR      r7,r3,#31
00069c  eb036717          ADD      r7,r3,r7,LSR #24
0006a0  ea4f2c27          ASR      r12,r7,#8
0006a4  f88dc0ba          STRB     r12,[sp,#0xba]
0006a8  f88d30bb          STRB     r3,[sp,#0xbb]
0006ac  f88d60bc          STRB     r6,[sp,#0xbc]
0006b0  f89430a9          LDRB     r3,[r4,#0xa9]  ; bps
0006b4  f88d30bd          STRB     r3,[sp,#0xbd]
0006b8  f8d43118          LDR      r3,[r4,#0x118]  ; bps
0006bc  ea4f77e3          ASR      r7,r3,#31
0006c0  eb036717          ADD      r7,r3,r7,LSR #24
0006c4  ea4f2c27          ASR      r12,r7,#8
0006c8  f88dc0be          STRB     r12,[sp,#0xbe]
0006cc  f88d30bf          STRB     r3,[sp,#0xbf]
0006d0  f8d43120          LDR      r3,[r4,#0x120]  ; bps
0006d4  ea4f77e3          ASR      r7,r3,#31
0006d8  eb036717          ADD      r7,r3,r7,LSR #24
0006dc  ea4f2c27          ASR      r12,r7,#8
0006e0  f88dc0c0          STRB     r12,[sp,#0xc0]
0006e4  f88d30c1          STRB     r3,[sp,#0xc1]
0006e8  f8d43124          LDR      r3,[r4,#0x124]  ; bps
0006ec  ea4f77e3          ASR      r7,r3,#31
0006f0  eb036717          ADD      r7,r3,r7,LSR #24
0006f4  ea4f2c27          ASR      r12,r7,#8
0006f8  f88dc0c2          STRB     r12,[sp,#0xc2]
0006fc  f88d30c3          STRB     r3,[sp,#0xc3]
000700  f88d60c4          STRB     r6,[sp,#0xc4]
000704  f50474a8          ADD      r4,r4,#0x150
000708  f8143c53          LDRB     r3,[r4,#-0x53]  ; bps
00070c  f88d30c5          STRB     r3,[sp,#0xc5]
000710  69e3              LDR      r3,[r4,#0x1c]  ; bps
000712  ea4f77e3          ASR      r7,r3,#31
000716  eb036717          ADD      r7,r3,r7,LSR #24
00071a  ea4f2c27          ASR      r12,r7,#8
00071e  f88dc0c6          STRB     r12,[sp,#0xc6]
000722  f88d30c7          STRB     r3,[sp,#0xc7]
000726  6a63              LDR      r3,[r4,#0x24]  ; bps
000728  ea4f77e3          ASR      r7,r3,#31
00072c  eb036717          ADD      r7,r3,r7,LSR #24
000730  ea4f2c27          ASR      r12,r7,#8
000734  f88dc0c8          STRB     r12,[sp,#0xc8]
000738  f88d30c9          STRB     r3,[sp,#0xc9]
00073c  6aa3              LDR      r3,[r4,#0x28]  ; bps
00073e  ea4f77e3          ASR      r7,r3,#31
000742  eb036717          ADD      r7,r3,r7,LSR #24
000746  ea4f2c27          ASR      r12,r7,#8
00074a  f88dc0ca          STRB     r12,[sp,#0xca]
00074e  f88d30cb          STRB     r3,[sp,#0xcb]
000752  f88d60cc          STRB     r6,[sp,#0xcc]
000756  7863              LDRB     r3,[r4,#1]  ; bps
000758  f88d30cd          STRB     r3,[sp,#0xcd]
00075c  6f23              LDR      r3,[r4,#0x70]  ; bps
00075e  ea4f77e3          ASR      r7,r3,#31
000762  eb036717          ADD      r7,r3,r7,LSR #24
000766  ea4f2c27          ASR      r12,r7,#8
00076a  f88dc0ce          STRB     r12,[sp,#0xce]
00076e  f88d30cf          STRB     r3,[sp,#0xcf]
000772  6fa3              LDR      r3,[r4,#0x78]  ; bps
000774  ea4f77e3          ASR      r7,r3,#31
000778  eb036717          ADD      r7,r3,r7,LSR #24
00077c  ea4f2c27          ASR      r12,r7,#8
000780  f88dc0d0          STRB     r12,[sp,#0xd0]
000784  f88d30d1          STRB     r3,[sp,#0xd1]
000788  6fe3              LDR      r3,[r4,#0x7c]  ; bps
00078a  ea4f77e3          ASR      r7,r3,#31
00078e  eb036717          ADD      r7,r3,r7,LSR #24
000792  ea4f2c27          ASR      r12,r7,#8
000796  f88dc0d2          STRB     r12,[sp,#0xd2]
00079a  f88d30d3          STRB     r3,[sp,#0xd3]
00079e  f88d60d4          STRB     r6,[sp,#0xd4]
0007a2  f8943055          LDRB     r3,[r4,#0x55]  ; bps
0007a6  f88d30d5          STRB     r3,[sp,#0xd5]
0007aa  f8d430c4          LDR      r3,[r4,#0xc4]  ; bps
0007ae  ea4f77e3          ASR      r7,r3,#31
0007b2  eb036717          ADD      r7,r3,r7,LSR #24
0007b6  ea4f2c27          ASR      r12,r7,#8
0007ba  f88dc0d6          STRB     r12,[sp,#0xd6]
0007be  f88d30d7          STRB     r3,[sp,#0xd7]
0007c2  f8d430cc          LDR      r3,[r4,#0xcc]  ; bps
0007c6  ea4f77e3          ASR      r7,r3,#31
0007ca  eb036717          ADD      r7,r3,r7,LSR #24
0007ce  ea4f2c27          ASR      r12,r7,#8
0007d2  f88dc0d8          STRB     r12,[sp,#0xd8]
0007d6  f88d30d9          STRB     r3,[sp,#0xd9]
0007da  f8d430d0          LDR      r3,[r4,#0xd0]  ; bps
0007de  ea4f77e3          ASR      r7,r3,#31
0007e2  eb036717          ADD      r7,r3,r7,LSR #24
0007e6  ea4f2c27          ASR      r12,r7,#8
0007ea  f88dc0da          STRB     r12,[sp,#0xda]
0007ee  f88d30db          STRB     r3,[sp,#0xdb]
0007f2  f88d60dc          STRB     r6,[sp,#0xdc]
0007f6  f89430a9          LDRB     r3,[r4,#0xa9]  ; bps
0007fa  f88d30dd          STRB     r3,[sp,#0xdd]
0007fe  f8d43118          LDR      r3,[r4,#0x118]  ; bps
000802  ea4f77e3          ASR      r7,r3,#31
000806  eb036717          ADD      r7,r3,r7,LSR #24
00080a  ea4f2c27          ASR      r12,r7,#8
00080e  f88dc0de          STRB     r12,[sp,#0xde]
000812  f88d30df          STRB     r3,[sp,#0xdf]
000816  f8d43120          LDR      r3,[r4,#0x120]  ; bps
00081a  ea4f77e3          ASR      r7,r3,#31
00081e  eb036717          ADD      r7,r3,r7,LSR #24
000822  ea4f2c27          ASR      r12,r7,#8
000826  f88dc0e0          STRB     r12,[sp,#0xe0]
00082a  f88d30e1          STRB     r3,[sp,#0xe1]
00082e  f8d43124          LDR      r3,[r4,#0x124]  ; bps
000832  ea4f77e3          ASR      r7,r3,#31
000836  eb036717          ADD      r7,r3,r7,LSR #24
00083a  ea4f2c27          ASR      r12,r7,#8
00083e  f88dc0e2          STRB     r12,[sp,#0xe2]
000842  f88d30e3          STRB     r3,[sp,#0xe3]
000846  f88d60e4          STRB     r6,[sp,#0xe4]
00084a  f89430fd          LDRB     r3,[r4,#0xfd]  ; bps
00084e  f88d30e5          STRB     r3,[sp,#0xe5]
000852  4b2f              LDR      r3,|L1.2320|
000854  f9b33000          LDRSH    r3,[r3,#0]  ; bps_U
000858  ea4f74e3          ASR      r4,r3,#31
00085c  eb036414          ADD      r4,r3,r4,LSR #24
000860  ea4f2624          ASR      r6,r4,#8
000864  f88d60e6          STRB     r6,[sp,#0xe6]
000868  f88d30e7          STRB     r3,[sp,#0xe7]
00086c  4c29              LDR      r4,|L1.2324|
00086e  f9b43000          LDRSH    r3,[r4,#0]  ; t_ext
000872  f8dfc0a4          LDR      r12,|L1.2328|
000876  4f29              LDR      r7,|L1.2332|
000878  f8dc6000          LDR      r6,[r12,#0]  ; ND_EXT
00087c  b106              CBZ      r6,|L1.2176|
00087e  463b              MOV      r3,r7
                  |L1.2176|
000880  ea4f76e3          ASR      r6,r3,#31
000884  eb036616          ADD      r6,r3,r6,LSR #24
000888  ea4f2826          ASR      r8,r6,#8
00088c  f88d820c          STRB     r8,[sp,#0x20c]
000890  f88d320d          STRB     r3,[sp,#0x20d]
000894  f9b43002          LDRSH    r3,[r4,#2]  ; t_ext
000898  f8dc6004          LDR      r6,[r12,#4]  ; ND_EXT
00089c  b106              CBZ      r6,|L1.2208|
00089e  463b              MOV      r3,r7
                  |L1.2208|
0008a0  ea4f76e3          ASR      r6,r3,#31
0008a4  eb036616          ADD      r6,r3,r6,LSR #24
0008a8  ea4f2826          ASR      r8,r6,#8
0008ac  f88d820e          STRB     r8,[sp,#0x20e]
0008b0  f88d320f          STRB     r3,[sp,#0x20f]
0008b4  f9b43004          LDRSH    r3,[r4,#4]  ; t_ext
0008b8  f8dc6008          LDR      r6,[r12,#8]  ; ND_EXT
0008bc  b106              CBZ      r6,|L1.2240|
0008be  463b              MOV      r3,r7
                  |L1.2240|
0008c0  ea4f76e3          ASR      r6,r3,#31
0008c4  eb036616          ADD      r6,r3,r6,LSR #24
0008c8  ea4f2826          ASR      r8,r6,#8
0008cc  f88d8210          STRB     r8,[sp,#0x210]
0008d0  f88d3211          STRB     r3,[sp,#0x211]
0008d4  f9b44006          LDRSH    r4,[r4,#6]  ; t_ext
0008d8  f8dc300c          LDR      r3,[r12,#0xc]  ; ND_EXT
0008dc  b103              CBZ      r3,|L1.2272|
0008de  463c              MOV      r4,r7
                  |L1.2272|
0008e0  ea4f73e4          ASR      r3,r4,#31
0008e4  eb046313          ADD      r3,r4,r3,LSR #24
0008e8  ea4f2623          ASR      r6,r3,#8
0008ec  f88d6212          STRB     r6,[sp,#0x212]
0008f0  4623              MOV      r3,r4
0008f2  f88d3213          STRB     r3,[sp,#0x213]
0008f6  f04f0400          MOV      r4,#0
0008fa  4e09              LDR      r6,|L1.2336|
0008fc  7833              LDRB     r3,[r6,#0]  ; sk_stat
0008fe  2b01              CMP      r3,#1
000900  d100              BNE      |L1.2308|
000902  461c              MOV      r4,r3
                  |L1.2308|
000904  4f07              LDR      r7,|L1.2340|
000906  e00f              B        |L1.2344|
                  |L1.2312|
                          DCD      BAT_C_REAL
                  |L1.2316|
                          DCD      bps
                  |L1.2320|
                          DCD      bps_U
                  |L1.2324|
                          DCD      t_ext
                  |L1.2328|
                          DCD      ND_EXT
                  |L1.2332|
                          DCD      0xfffffc18
                  |L1.2336|
                          DCD      sk_stat
                  |L1.2340|
                          DCD      sk_av_stat
                  |L1.2344|
000928  783b              LDRB     r3,[r7,#0]  ; sk_av_stat
00092a  2b01              CMP      r3,#1
00092c  d101              BNE      |L1.2354|
00092e  f0440402          ORR      r4,r4,#2
                  |L1.2354|
000932  ea4f73e4          ASR      r3,r4,#31
000936  eb046313          ADD      r3,r4,r3,LSR #24
00093a  ea4f2c23          ASR      r12,r3,#8
00093e  f88dc220          STRB     r12,[sp,#0x220]
000942  4623              MOV      r3,r4
000944  f88d3221          STRB     r3,[sp,#0x221]
000948  f04f0400          MOV      r4,#0
00094c  7873              LDRB     r3,[r6,#1]  ; sk_stat
00094e  2b01              CMP      r3,#1
000950  d100              BNE      |L1.2388|
000952  461c              MOV      r4,r3
                  |L1.2388|
000954  787b              LDRB     r3,[r7,#1]  ; sk_av_stat
000956  2b01              CMP      r3,#1
000958  d101              BNE      |L1.2398|
00095a  f0440402          ORR      r4,r4,#2
                  |L1.2398|
00095e  ea4f73e4          ASR      r3,r4,#31
000962  eb046313          ADD      r3,r4,r3,LSR #24
000966  ea4f2c23          ASR      r12,r3,#8
00096a  f88dc222          STRB     r12,[sp,#0x222]
00096e  4623              MOV      r3,r4
000970  f88d3223          STRB     r3,[sp,#0x223]
000974  f04f0400          MOV      r4,#0
000978  78b3              LDRB     r3,[r6,#2]  ; sk_stat
00097a  2b01              CMP      r3,#1
00097c  d100              BNE      |L1.2432|
00097e  461c              MOV      r4,r3
                  |L1.2432|
000980  78bb              LDRB     r3,[r7,#2]  ; sk_av_stat
000982  2b01              CMP      r3,#1
000984  d101              BNE      |L1.2442|
000986  f0440402          ORR      r4,r4,#2
                  |L1.2442|
00098a  ea4f73e4          ASR      r3,r4,#31
00098e  eb046313          ADD      r3,r4,r3,LSR #24
000992  ea4f2c23          ASR      r12,r3,#8
000996  f88dc224          STRB     r12,[sp,#0x224]
00099a  4623              MOV      r3,r4
00099c  f88d3225          STRB     r3,[sp,#0x225]
0009a0  f04f0400          MOV      r4,#0
0009a4  78f3              LDRB     r3,[r6,#3]  ; sk_stat
0009a6  2b01              CMP      r3,#1
0009a8  d100              BNE      |L1.2476|
0009aa  461c              MOV      r4,r3
                  |L1.2476|
0009ac  78fb              LDRB     r3,[r7,#3]  ; sk_av_stat
0009ae  2b01              CMP      r3,#1
0009b0  d101              BNE      |L1.2486|
0009b2  f0440402          ORR      r4,r4,#2
                  |L1.2486|
0009b6  ea4f73e4          ASR      r3,r4,#31
0009ba  eb046313          ADD      r3,r4,r3,LSR #24
0009be  ea4f2623          ASR      r6,r3,#8
0009c2  f88d6226          STRB     r6,[sp,#0x226]
0009c6  4623              MOV      r3,r4
0009c8  f88d3227          STRB     r3,[sp,#0x227]
0009cc  f88d0004          STRB     r0,[sp,#4]
0009d0  f88d1005          STRB     r1,[sp,#5]
0009d4  ea4f0045          LSL      r0,r5,#1
0009d8  f88d0006          STRB     r0,[sp,#6]
0009dc  a91f              ADD      r1,sp,#0x7c
0009de  f1a20201          SUB      r2,r2,#1
0009e2  eb010142          ADD      r1,r1,r2,LSL #1
0009e6  4602              MOV      r2,r0
0009e8  ae01              ADD      r6,sp,#4
0009ea  f10d0007          ADD      r0,sp,#7
0009ee  f7fffffe          BL       mem_copy
0009f2  2003              MOVS     r0,#3
0009f4  eb000045          ADD      r0,r0,r5,LSL #1
0009f8  b201              SXTH     r1,r0
0009fa  a801              ADD      r0,sp,#4
0009fc  f7fffffe          BL       CRC16_2
000a00  eb060145          ADD      r1,r6,r5,LSL #1
000a04  70c8              STRB     r0,[r1,#3]
000a06  ea4f2010          LSR      r0,r0,#8
000a0a  7108              STRB     r0,[r1,#4]
000a0c  f04f0400          MOV      r4,#0
000a10  f04f0005          MOV      r0,#5
000a14  eb000545          ADD      r5,r0,r5,LSL #1
000a18  e005              B        |L1.2598|
                  |L1.2586|
000a1a  5d30              LDRB     r0,[r6,r4]
000a1c  f7fffffe          BL       putchar0
000a20  f1040401          ADD      r4,r4,#1
000a24  b2e4              UXTB     r4,r4
                  |L1.2598|
000a26  42a5              CMP      r5,r4
000a28  d8f7              BHI      |L1.2586|
000a2a  f04f0400          MOV      r4,#0
000a2e  e005              B        |L1.2620|
                  |L1.2608|
000a30  5d30              LDRB     r0,[r6,r4]
000a32  f7fffffe          BL       putchar_sc16is700
000a36  f1040401          ADD      r4,r4,#1
000a3a  b2e4              UXTB     r4,r4
                  |L1.2620|
000a3c  42a5              CMP      r5,r4
000a3e  d8f7              BHI      |L1.2608|
000a40  f50d7d10          ADD      sp,sp,#0x240
                  |L1.2628|
000a44  e8bd81f0          POP      {r4-r8,pc}
;;;426    
                          ENDP

                  modbus_hold_registers_transmit PROC
;;;661    //-----------------------------------------------
;;;662    void modbus_hold_registers_transmit(unsigned char adr,unsigned char func,unsigned short reg_adr,unsigned short reg_quantity)
000a48  b5f0              PUSH     {r4-r7,lr}
;;;663    {
000a4a  b0b3              SUB      sp,sp,#0xcc
000a4c  461d              MOV      r5,r3
;;;664    char modbus_registers[100];
;;;665    char modbus_tx_buff[100];
;;;666    unsigned short crc_temp;
;;;667    char i;
;;;668    
;;;669    modbus_registers[20]=(char)((LPC_RTC->YEAR)/256);			//Πεγ11  Βπεμ, γξδ
000a4e  4cff              LDR      r4,|L1.3660|
000a50  8ba3              LDRH     r3,[r4,#0x1c]
000a52  ea4f2313          LSR      r3,r3,#8
000a56  f88d307c          STRB     r3,[sp,#0x7c]
;;;670    modbus_registers[21]=(char)((LPC_RTC->YEAR)%256);
000a5a  8ba3              LDRH     r3,[r4,#0x1c]
000a5c  f88d307d          STRB     r3,[sp,#0x7d]
;;;671    modbus_registers[22]=(char)((LPC_RTC->MONTH)/256);		//Πεγ12  Βπεμ, μερφ
000a60  7e23              LDRB     r3,[r4,#0x18]
000a62  f04f0300          MOV      r3,#0
000a66  f88d307e          STRB     r3,[sp,#0x7e]
;;;672    modbus_registers[23]=(char)((LPC_RTC->MONTH)%256);
000a6a  7e26              LDRB     r6,[r4,#0x18]
000a6c  f88d607f          STRB     r6,[sp,#0x7f]
;;;673    modbus_registers[24]=(char)((LPC_RTC->DOM)/256);			//Πεγ13  Βπεμ, δενό μερφΰ
000a70  7b26              LDRB     r6,[r4,#0xc]
000a72  f88d3080          STRB     r3,[sp,#0x80]
;;;674    modbus_registers[25]=(char)((LPC_RTC->DOM)%256);
000a76  7b26              LDRB     r6,[r4,#0xc]
000a78  f88d6081          STRB     r6,[sp,#0x81]
;;;675    modbus_registers[26]=(char)((LPC_RTC->HOUR)/256);			//Πεγ14  Βπεμ, χΰρ
000a7c  7a26              LDRB     r6,[r4,#8]
000a7e  f88d3082          STRB     r3,[sp,#0x82]
;;;676    modbus_registers[27]=(char)((LPC_RTC->HOUR)%256);
000a82  7a26              LDRB     r6,[r4,#8]
000a84  f88d6083          STRB     r6,[sp,#0x83]
;;;677    modbus_registers[28]=(char)((LPC_RTC->MIN)/256);			//Πεγ15  Βπεμ, μθνσςϋ
000a88  7926              LDRB     r6,[r4,#4]
000a8a  f88d3084          STRB     r3,[sp,#0x84]
;;;678    modbus_registers[29]=(char)((LPC_RTC->MIN)%256);
000a8e  7926              LDRB     r6,[r4,#4]
000a90  f88d6085          STRB     r6,[sp,#0x85]
;;;679    modbus_registers[30]=(char)((LPC_RTC->SEC)/256);			//Πεγ16  Βπεμ, ρεκσνδϋ
000a94  7826              LDRB     r6,[r4,#0]
000a96  f88d3086          STRB     r3,[sp,#0x86]
;;;680    modbus_registers[31]=(char)((LPC_RTC->SEC)%256);
000a9a  7823              LDRB     r3,[r4,#0]
000a9c  f88d3087          STRB     r3,[sp,#0x87]
;;;681    modbus_registers[38]=(char)(NUMIST/256);				//Πεγ20  Κξλθχερςβξ βϋοπμθςελει β ρςπσκςσπε
000aa0  4beb              LDR      r3,|L1.3664|
000aa2  f9b33000          LDRSH    r3,[r3,#0]  ; NUMIST
000aa6  ea4f74e3          ASR      r4,r3,#31
000aaa  eb036414          ADD      r4,r3,r4,LSR #24
000aae  ea4f2624          ASR      r6,r4,#8
000ab2  f88d608e          STRB     r6,[sp,#0x8e]
;;;682    modbus_registers[39]=(char)(NUMIST%256);
000ab6  f88d308f          STRB     r3,[sp,#0x8f]
;;;683    modbus_registers[40]=(char)(PAR/256);					//Πεγ21  Οΰπΰλλελόνΰ πΰαξςΰ βϋοπμθςελει βκλ./βϋκλ.
000aba  4be6              LDR      r3,|L1.3668|
000abc  f9b33000          LDRSH    r3,[r3,#0]  ; PAR
000ac0  ea4f74e3          ASR      r4,r3,#31
000ac4  eb036414          ADD      r4,r3,r4,LSR #24
000ac8  ea4f2624          ASR      r6,r4,#8
000acc  f88d6090          STRB     r6,[sp,#0x90]
;;;684    modbus_registers[41]=(char)(PAR%256);
000ad0  f88d3091          STRB     r3,[sp,#0x91]
;;;685    modbus_registers[42]=(char)(ZV_ON/256);					//Πεγ22  Ηβσκξβΰ ΰβΰπθινΰ ρθγνΰλθηΰφθ βκλ./βϋκλ.
000ad4  4be0              LDR      r3,|L1.3672|
000ad6  f9b33000          LDRSH    r3,[r3,#0]  ; ZV_ON
000ada  ea4f74e3          ASR      r4,r3,#31
000ade  eb036414          ADD      r4,r3,r4,LSR #24
000ae2  ea4f2624          ASR      r6,r4,#8
000ae6  f88d6092          STRB     r6,[sp,#0x92]
;;;686    modbus_registers[43]=(char)(ZV_ON%256);
000aea  f88d3093          STRB     r3,[sp,#0x93]
;;;687    modbus_registers[46]=(char)(UBM_AV/256);				//Πεγ24  ΐβΰπθινϋι σπξβενό ξςκλξνενθ νΰοπζενθ ρπεδνει ςξχκθ αΰςΰπεθ, %
000aee  4bdb              LDR      r3,|L1.3676|
000af0  f9b33000          LDRSH    r3,[r3,#0]  ; UBM_AV
000af4  ea4f74e3          ASR      r4,r3,#31
000af8  eb036414          ADD      r4,r3,r4,LSR #24
000afc  ea4f2624          ASR      r6,r4,#8
000b00  f88d6096          STRB     r6,[sp,#0x96]
;;;688    modbus_registers[47]=(char)(UBM_AV%256);
000b04  f88d3097          STRB     r3,[sp,#0x97]
;;;689    modbus_registers[58]=(char)(TBAT/256);					//Πεγ30  Οεπθξδ οπξβεπκθ φεοθ αΰςΰπεθ, μθνσς.
000b08  4bd5              LDR      r3,|L1.3680|
000b0a  f9b33000          LDRSH    r3,[r3,#0]  ; TBAT
000b0e  ea4f74e3          ASR      r4,r3,#31
000b12  eb036414          ADD      r4,r3,r4,LSR #24
000b16  ea4f2624          ASR      r6,r4,#8
000b1a  f88d60a2          STRB     r6,[sp,#0xa2]
;;;690    modbus_registers[59]=(char)(TBAT%256);
000b1e  f88d30a3          STRB     r3,[sp,#0xa3]
;;;691    modbus_registers[60]=(char)(UMAX/256);					//Πεγ31  Μΰκρθμΰλόνξε (ΰβΰπθινξε) νΰοπζενθε βϋοπμθςελει, 0.1Β
000b22  4bd0              LDR      r3,|L1.3684|
000b24  f9b33000          LDRSH    r3,[r3,#0]  ; UMAX
000b28  ea4f74e3          ASR      r4,r3,#31
000b2c  eb036414          ADD      r4,r3,r4,LSR #24
000b30  ea4f2624          ASR      r6,r4,#8
000b34  f88d60a4          STRB     r6,[sp,#0xa4]
;;;692    modbus_registers[61]=(char)(UMAX%256);
000b38  f88d30a5          STRB     r3,[sp,#0xa5]
;;;693    modbus_registers[62]=(char)((UB20-DU)/256);				//Πεγ32  Μθνθμΰλόνξε (ΰβΰπθινξε) νΰοπζενθε βϋοπμθςελει, 0.1Β
000b3c  4bca              LDR      r3,|L1.3688|
000b3e  4ccb              LDR      r4,|L1.3692|
000b40  f9b33000          LDRSH    r3,[r3,#0]  ; UB20
000b44  f9b44000          LDRSH    r4,[r4,#0]  ; DU
000b48  eba30404          SUB      r4,r3,r4
000b4c  ea4f76e4          ASR      r6,r4,#31
000b50  eb046616          ADD      r6,r4,r6,LSR #24
000b54  ea4f2726          ASR      r7,r6,#8
000b58  f88d70a6          STRB     r7,[sp,#0xa6]
;;;694    modbus_registers[63]=(char)((UB20-DU)%256);
000b5c  f88d40a7          STRB     r4,[sp,#0xa7]
;;;695    modbus_registers[64]=(char)(UB0/256);					//Πεγ33  Νΰοπζενθε ρξδεπζΰνθ αΰςΰπεθ οπθ 0γΦ, 0.1Β
000b60  4cc3              LDR      r4,|L1.3696|
000b62  f9b44000          LDRSH    r4,[r4,#0]  ; UB0
000b66  ea4f76e4          ASR      r6,r4,#31
000b6a  eb046616          ADD      r6,r4,r6,LSR #24
000b6e  ea4f2726          ASR      r7,r6,#8
000b72  f88d70a8          STRB     r7,[sp,#0xa8]
;;;696    modbus_registers[65]=(char)(UB0%256);
000b76  f88d40a9          STRB     r4,[sp,#0xa9]
;;;697    modbus_registers[66]=(char)(UB20/256);					//Πεγ34  Νΰοπζενθε ρξδεπζΰνθ αΰςΰπεθ οπθ 20γΦ, 0.1Β
000b7a  ea4f74e3          ASR      r4,r3,#31
000b7e  eb036414          ADD      r4,r3,r4,LSR #24
000b82  ea4f2624          ASR      r6,r4,#8
000b86  f88d60aa          STRB     r6,[sp,#0xaa]
;;;698    modbus_registers[67]=(char)(UB20%256);
000b8a  f88d30ab          STRB     r3,[sp,#0xab]
;;;699    modbus_registers[68]=(char)(USIGN/256);					//Πεγ35  Μθνθμΰλόνξε (ρθγνΰλόνξε) νΰοπζενθε αΰςΰπεθ, 1Β
000b8e  4bb9              LDR      r3,|L1.3700|
000b90  f9b33000          LDRSH    r3,[r3,#0]  ; USIGN
000b94  ea4f74e3          ASR      r4,r3,#31
000b98  eb036414          ADD      r4,r3,r4,LSR #24
000b9c  ea4f2624          ASR      r6,r4,#8
000ba0  f88d60ac          STRB     r6,[sp,#0xac]
;;;700    modbus_registers[69]=(char)(USIGN%256);
000ba4  f88d30ad          STRB     r3,[sp,#0xad]
;;;701    modbus_registers[70]=(char)(UMN/256);					//Πεγ36  Μθνθμΰλόνξε (ΰβΰπθινξε) νΰοπζενθε οθςΰώωει ρεςθ, 1Β
000ba8  4bb3              LDR      r3,|L1.3704|
000baa  f9b33000          LDRSH    r3,[r3,#0]  ; UMN
000bae  ea4f74e3          ASR      r4,r3,#31
000bb2  eb036414          ADD      r4,r3,r4,LSR #24
000bb6  ea4f2624          ASR      r6,r4,#8
000bba  f88d60ae          STRB     r6,[sp,#0xae]
;;;702    modbus_registers[71]=(char)(UMN%256);
000bbe  f88d30af          STRB     r3,[sp,#0xaf]
;;;703    modbus_registers[72]=(char)(U0B/256);					//Πεγ37  Πΰαξχεε νΰοπζενθε οπθ νεββεδεννϋυ αΰςΰπευ, 0.1Β
000bc2  4bae              LDR      r3,|L1.3708|
000bc4  f9b33000          LDRSH    r3,[r3,#0]  ; U0B
000bc8  ea4f74e3          ASR      r4,r3,#31
000bcc  eb036414          ADD      r4,r3,r4,LSR #24
000bd0  ea4f2624          ASR      r6,r4,#8
000bd4  f88d60b0          STRB     r6,[sp,#0xb0]
;;;704    modbus_registers[73]=(char)(U0B%256);
000bd8  f88d30b1          STRB     r3,[sp,#0xb1]
;;;705    modbus_registers[74]=(char)(IKB/256);					//Πεγ38  ξκ κξνςπξλ νΰλθχθ αΰςΰπεθ, 0.1ΰ
000bdc  4ba8              LDR      r3,|L1.3712|
000bde  f9b33000          LDRSH    r3,[r3,#0]  ; IKB
000be2  ea4f74e3          ASR      r4,r3,#31
000be6  eb036414          ADD      r4,r3,r4,LSR #24
000bea  ea4f2624          ASR      r6,r4,#8
000bee  f88d60b2          STRB     r6,[sp,#0xb2]
;;;706    modbus_registers[75]=(char)(IKB%256);
000bf2  f88d30b3          STRB     r3,[sp,#0xb3]
;;;707    modbus_registers[76]=(char)(IZMAX/256);					//Πεγ39  ξκ ηΰπδΰ αΰςΰπεθ μΰκρθμΰλόνϋι, 0.1ΐ
000bf6  4ba3              LDR      r3,|L1.3716|
000bf8  f9b33000          LDRSH    r3,[r3,#0]  ; IZMAX
000bfc  ea4f74e3          ASR      r4,r3,#31
000c00  eb036414          ADD      r4,r3,r4,LSR #24
000c04  ea4f2624          ASR      r6,r4,#8
000c08  f88d60b4          STRB     r6,[sp,#0xb4]
;;;708    modbus_registers[77]=(char)(IZMAX%256);
000c0c  f88d30b5          STRB     r3,[sp,#0xb5]
;;;709    modbus_registers[78]=(char)(IMAX/256);					//Πεγ40  ξκ οεπεκλώχενθ νΰ αξλόψεε κξλ-βξ βϋοπμθςελει, 0.1ΐ
000c10  4b9d              LDR      r3,|L1.3720|
000c12  f9b33000          LDRSH    r3,[r3,#0]  ; IMAX
000c16  ea4f74e3          ASR      r4,r3,#31
000c1a  eb036414          ADD      r4,r3,r4,LSR #24
000c1e  ea4f2624          ASR      r6,r4,#8
000c22  f88d60b6          STRB     r6,[sp,#0xb6]
;;;710    modbus_registers[79]=(char)(IMAX%256);
000c26  f88d30b7          STRB     r3,[sp,#0xb7]
;;;711    modbus_registers[80]=(char)(IMIN/256);					//Πεγ41  ξκ οεπεκλώχενθ νΰ μενόψεε κξλ-βξ βϋοπμθςελει, 0.1ΐ
000c2a  4b98              LDR      r3,|L1.3724|
000c2c  f9b33000          LDRSH    r3,[r3,#0]  ; IMIN
000c30  ea4f74e3          ASR      r4,r3,#31
000c34  eb036414          ADD      r4,r3,r4,LSR #24
000c38  ea4f2624          ASR      r6,r4,#8
000c3c  f88d60b8          STRB     r6,[sp,#0xb8]
;;;712    modbus_registers[81]=(char)(IMIN%256);
000c40  f88d30b9          STRB     r3,[sp,#0xb9]
;;;713    modbus_registers[82]=(char)(UVZ/256);					//Πεγ42  Νΰοπζενθε βϋπΰβνθβΰώωεγξ ηΰπδΰ, 0.1Β
000c44  4b92              LDR      r3,|L1.3728|
000c46  f9b33000          LDRSH    r3,[r3,#0]  ; UVZ
000c4a  ea4f74e3          ASR      r4,r3,#31
000c4e  eb036414          ADD      r4,r3,r4,LSR #24
000c52  ea4f2624          ASR      r6,r4,#8
000c56  f88d60ba          STRB     r6,[sp,#0xba]
;;;714    modbus_registers[83]=(char)(UVZ%256);
000c5a  f88d30bb          STRB     r3,[sp,#0xbb]
;;;715    modbus_registers[84]=(char)(TZAS/256);					//Πεγ43  Βπεμ ηΰδεπζκθ βκλώχενθ βϋοπμθςελει, ρεκ
000c5e  4b8d              LDR      r3,|L1.3732|
000c60  f9b33000          LDRSH    r3,[r3,#0]  ; TZAS
000c64  ea4f74e3          ASR      r4,r3,#31
000c68  eb036414          ADD      r4,r3,r4,LSR #24
000c6c  ea4f2624          ASR      r6,r4,#8
000c70  f88d60bc          STRB     r6,[sp,#0xbc]
;;;716    modbus_registers[85]=(char)(TZAS%256);
000c74  f88d30bd          STRB     r3,[sp,#0xbd]
;;;717    modbus_registers[86]=(char)(TMAX/256);					//Πεγ44  εμοεπΰςσπΰ βϋοπμθςελει ΰβΰπθινΰ, 1γΦ
000c78  4b87              LDR      r3,|L1.3736|
000c7a  f9b33000          LDRSH    r3,[r3,#0]  ; TMAX
000c7e  ea4f74e3          ASR      r4,r3,#31
000c82  eb036414          ADD      r4,r3,r4,LSR #24
000c86  ea4f2624          ASR      r6,r4,#8
000c8a  f88d60be          STRB     r6,[sp,#0xbe]
;;;718    modbus_registers[87]=(char)(TMAX%256);
000c8e  f88d30bf          STRB     r3,[sp,#0xbf]
;;;719    modbus_registers[88]=(char)(TSIGN/256);					//Πεγ45  εμοεπΰςσπΰ βϋοπμθςελει ρθγνΰλόνΰ, 1γΦ
000c92  4b82              LDR      r3,|L1.3740|
000c94  f9b33000          LDRSH    r3,[r3,#0]  ; TSIGN
000c98  ea4f74e3          ASR      r4,r3,#31
000c9c  eb036414          ADD      r4,r3,r4,LSR #24
000ca0  ea4f2624          ASR      r6,r4,#8
000ca4  f88d60c0          STRB     r6,[sp,#0xc0]
;;;720    modbus_registers[89]=(char)(TSIGN%256);
000ca8  f88d30c1          STRB     r3,[sp,#0xc1]
;;;721    modbus_registers[90]=(char)(TBATMAX/256);				//Πεγ46  εμοεπΰςσπΰ αΰςΰπεθ ΰβΰπθινΰ, 1γΦ
000cac  4b7c              LDR      r3,|L1.3744|
000cae  f9b33000          LDRSH    r3,[r3,#0]  ; TBATMAX
000cb2  ea4f74e3          ASR      r4,r3,#31
000cb6  eb036414          ADD      r4,r3,r4,LSR #24
000cba  ea4f2624          ASR      r6,r4,#8
000cbe  f88d60c2          STRB     r6,[sp,#0xc2]
;;;722    modbus_registers[91]=(char)(TBATMAX%256);
000cc2  f88d30c3          STRB     r3,[sp,#0xc3]
;;;723    modbus_registers[92]=(char)(TBATSIGN/256);				//Πεγ47  εμοεπΰςσπΰ αΰςΰπεθ ρθγνΰλόνΰ, 1γΦ
000cc6  4b77              LDR      r3,|L1.3748|
000cc8  f9b33000          LDRSH    r3,[r3,#0]  ; TBATSIGN
000ccc  ea4f74e3          ASR      r4,r3,#31
000cd0  eb036414          ADD      r4,r3,r4,LSR #24
000cd4  ea4f2624          ASR      r6,r4,#8
000cd8  f88d60c4          STRB     r6,[sp,#0xc4]
;;;724    modbus_registers[93]=(char)(TBATSIGN%256);
000cdc  f88d30c5          STRB     r3,[sp,#0xc5]
;;;725    
;;;726    
;;;727    modbus_tx_buff[0]=adr;
000ce0  f88d0004          STRB     r0,[sp,#4]
;;;728    modbus_tx_buff[1]=func;
000ce4  f88d1005          STRB     r1,[sp,#5]
;;;729    //modbus_tx_buff[2]=(char)(reg_adr/256);
;;;730    //modbus_tx_buff[3]=(char)(reg_adr%256);
;;;731    //modbus_tx_buff[4]=(char)(reg_quantity/256);
;;;732    //modbus_tx_buff[5]=(char)(reg_quantity%256);
;;;733    modbus_tx_buff[2]=(char)(reg_quantity*2);
000ce8  ea4f0045          LSL      r0,r5,#1
000cec  f88d0006          STRB     r0,[sp,#6]
;;;734    /*
;;;735    modbus_registers[0]=0x10;
;;;736    modbus_registers[1]=0x11;
;;;737    modbus_registers[2]=0x12;
;;;738    modbus_registers[3]=0x13;
;;;739    modbus_registers[4]=0x14;
;;;740    modbus_registers[5]=0x15;
;;;741    */
;;;742    
;;;743    //if((reg_adr<17)&&(reg_quantity<10))
;;;744    	{
;;;745    	mem_copy((char*)&modbus_tx_buff[3],(char*)&modbus_registers[(reg_adr-1)*2],reg_quantity*2);
000cf0  a91a              ADD      r1,sp,#0x68
000cf2  f1a20201          SUB      r2,r2,#1
000cf6  eb010142          ADD      r1,r1,r2,LSL #1
000cfa  4602              MOV      r2,r0
000cfc  ae01              ADD      r6,sp,#4
000cfe  f10d0007          ADD      r0,sp,#7
000d02  f7fffffe          BL       mem_copy
;;;746    	}
;;;747    crc_temp=CRC16_2(modbus_tx_buff,(reg_quantity*2)+3);
000d06  2003              MOVS     r0,#3
000d08  eb000045          ADD      r0,r0,r5,LSL #1
000d0c  b201              SXTH     r1,r0
000d0e  a801              ADD      r0,sp,#4
000d10  f7fffffe          BL       CRC16_2
;;;748    
;;;749    modbus_tx_buff[3+(reg_quantity*2)]=crc_temp%256;
000d14  eb060145          ADD      r1,r6,r5,LSL #1
000d18  70c8              STRB     r0,[r1,#3]
;;;750    modbus_tx_buff[4+(reg_quantity*2)]=crc_temp/256;
000d1a  ea4f2010          LSR      r0,r0,#8
000d1e  7108              STRB     r0,[r1,#4]
;;;751    
;;;752    for (i=0;i<(5+(reg_quantity*2));i++)
000d20  f04f0400          MOV      r4,#0
000d24  f04f0005          MOV      r0,#5
000d28  eb000545          ADD      r5,r0,r5,LSL #1
000d2c  e005              B        |L1.3386|
                  |L1.3374|
;;;753    	{
;;;754    	putchar0(modbus_tx_buff[i]);
000d2e  5d30              LDRB     r0,[r6,r4]
000d30  f7fffffe          BL       putchar0
000d34  f1040401          ADD      r4,r4,#1              ;752
000d38  b2e4              UXTB     r4,r4                 ;752
                  |L1.3386|
000d3a  42a5              CMP      r5,r4                 ;752
000d3c  d8f7              BHI      |L1.3374|
;;;755    	}
;;;756    
;;;757    for (i=0;i<(5+(reg_quantity*2));i++)
000d3e  f04f0400          MOV      r4,#0
000d42  e005              B        |L1.3408|
                  |L1.3396|
;;;758    	{
;;;759    	putchar_sc16is700(modbus_tx_buff[i]);
000d44  5d30              LDRB     r0,[r6,r4]
000d46  f7fffffe          BL       putchar_sc16is700
000d4a  f1040401          ADD      r4,r4,#1              ;757
000d4e  b2e4              UXTB     r4,r4                 ;757
                  |L1.3408|
000d50  42a5              CMP      r5,r4                 ;757
000d52  d8f7              BHI      |L1.3396|
;;;760    	}
;;;761    
;;;762    /*	putchar2(modbus_tx_buff[0]);
;;;763    	putchar2(modbus_tx_buff[1]);
;;;764    	putchar2(modbus_tx_buff[2]);
;;;765    	putchar2(modbus_tx_buff[3]);
;;;766    	putchar2(modbus_tx_buff[4]);
;;;767    	putchar2(modbus_tx_buff[5]);
;;;768    	putchar2(modbus_tx_buff[6]);*/
;;;769    //	putchar2(modbus_tx_buff[0]);
;;;770    	//putchar2(modbus_tx_buff[1]);
;;;771    //	putchar2(modbus_tx_buff[2]);
;;;772    //	putchar2(modbus_tx_buff[3]);
;;;773    ///	putchar2(modbus_tx_buff[4]);
;;;774    //	putchar2(modbus_tx_buff[5]);
;;;775    //	putchar2(modbus_tx_buff[6]);
;;;776    }
000d54  b033              ADD      sp,sp,#0xcc
000d56  bdf0              POP      {r4-r7,pc}
;;;777    
                          ENDP

                  modbus_in PROC
;;;56     //-----------------------------------------------
;;;57     void modbus_in(void)
000d58  e92d41f0          PUSH     {r4-r8,lr}
;;;58     {
;;;59     short crc16_calculated;		//βϋχθρλεμΰ θη οπθνςϋυ δΰννϋυ CRC
;;;60     short crc16_incapsulated;	//βρςπξενννΰ β οξρϋλκσ CRC
;;;61     unsigned short modbus_rx_arg0;		//βρςπξεννϋι β οξρϋλκσ οεπβϋι ΰπγσμενς
;;;62     unsigned short modbus_rx_arg1;		//βρςπξεννϋι β οξρϋλκσ βςξπξι ΰπγσμενς
;;;63     unsigned short modbus_rx_arg2;		//βρςπξεννϋι β οξρϋλκσ ςπεςθι ΰπγσμενς
;;;64     unsigned short modbus_rx_arg3;		//βρςπξεννϋι β οξρϋλκσ χεςβεπςϋι ΰπγσμενς
;;;65     unsigned char modbus_func;			//βρςπξεννϋι β οξρϋλκσ κξδ τσνκφθθ
;;;66     
;;;67     
;;;68     
;;;69     mem_copy(modbus_an_buffer,modbus_rx_buffer,modbus_rx_buffer_ptr);
000d5c  4e52              LDR      r6,|L1.3752|
000d5e  4953              LDR      r1,|L1.3756|
000d60  7872              LDRB     r2,[r6,#1]  ; modbus_rx_buffer_ptr
000d62  f101001e          ADD      r0,r1,#0x1e
000d66  f7fffffe          BL       mem_copy
;;;70     modbus_rx_counter=modbus_rx_buffer_ptr;
000d6a  7871              LDRB     r1,[r6,#1]  ; modbus_rx_buffer_ptr
000d6c  70b1              STRB     r1,[r6,#2]
;;;71     modbus_rx_buffer_ptr=0;
000d6e  f04f0000          MOV      r0,#0
000d72  7070              STRB     r0,[r6,#1]
;;;72     bMODBUS_TIMEOUT=0;
000d74  7030              STRB     r0,[r6,#0]
;;;73     	
;;;74     crc16_calculated  = CRC16_2(modbus_an_buffer, modbus_rx_counter-2);
000d76  484d              LDR      r0,|L1.3756|
000d78  f1a10102          SUB      r1,r1,#2
000d7c  f100001e          ADD      r0,r0,#0x1e
000d80  f7fffffe          BL       CRC16_2
000d84  b201              SXTH     r1,r0
;;;75     crc16_incapsulated = *((short*)&modbus_an_buffer[modbus_rx_counter-2]);
000d86  4849              LDR      r0,|L1.3756|
000d88  78b3              LDRB     r3,[r6,#2]  ; modbus_rx_counter
000d8a  301e              ADDS     r0,r0,#0x1e
000d8c  eb000203          ADD      r2,r0,r3
000d90  f9322c02          LDRSH    r2,[r2,#-2]
;;;76     
;;;77     modbus_plazma1=modbus_rx_counter;
000d94  80f3              STRH     r3,[r6,#6]
;;;78     modbus_plazma2=crc16_calculated;
000d96  8131              STRH     r1,[r6,#8]
;;;79     modbus_plazma3=crc16_incapsulated;
000d98  8172              STRH     r2,[r6,#0xa]
;;;80     
;;;81     modbus_func=modbus_an_buffer[1];
000d9a  7847              LDRB     r7,[r0,#1]  ; modbus_an_buffer
;;;82     modbus_rx_arg0=(((unsigned short)modbus_an_buffer[2])*((unsigned short)256))+((unsigned short)modbus_an_buffer[3]);
000d9c  78c3              LDRB     r3,[r0,#3]  ; modbus_an_buffer
000d9e  7884              LDRB     r4,[r0,#2]  ; modbus_an_buffer
000da0  eb032304          ADD      r3,r3,r4,LSL #8
000da4  b29c              UXTH     r4,r3
;;;83     modbus_rx_arg1=(((unsigned short)modbus_an_buffer[4])*((unsigned short)256))+((unsigned short)modbus_an_buffer[5]);
000da6  7943              LDRB     r3,[r0,#5]  ; modbus_an_buffer
000da8  7905              LDRB     r5,[r0,#4]  ; modbus_an_buffer
000daa  eb032305          ADD      r3,r3,r5,LSL #8
000dae  b29d              UXTH     r5,r3
;;;84     modbus_rx_arg2=(((unsigned short)modbus_an_buffer[6])*((unsigned short)256))+((unsigned short)modbus_an_buffer[7]);
;;;85     modbus_rx_arg3=(((unsigned short)modbus_an_buffer[8])*((unsigned short)256))+((unsigned short)modbus_an_buffer[9]);
;;;86     
;;;87     
;;;88     if(crc16_calculated==crc16_incapsulated)
000db0  4291              CMP      r1,r2
000db2  d14a              BNE      |L1.3658|
;;;89     	{
;;;90     	
;;;91     	if(modbus_an_buffer[0]==MODBUS_ADRESS)
000db4  f8df80f8          LDR      r8,|L1.3760|
000db8  7801              LDRB     r1,[r0,#0]  ; modbus_an_buffer
000dba  f9b80000          LDRSH    r0,[r8,#0]  ; MODBUS_ADRESS
000dbe  4281              CMP      r1,r0
000dc0  d143              BNE      |L1.3658|
;;;92     		{
;;;93     		if(modbus_func==3)		//χςενθε οπξθηβξλόνξγξ κξλ-βΰ πεγθρςπξβ υπΰνενθ
000dc2  2f03              CMP      r7,#3
000dc4  d109              BNE      |L1.3546|
;;;94     			{
;;;95     			modbus_plazma++;
000dc6  88b1              LDRH     r1,[r6,#4]  ; modbus_plazma
000dc8  f1010101          ADD      r1,r1,#1
000dcc  80b1              STRH     r1,[r6,#4]
;;;96     			modbus_hold_registers_transmit(MODBUS_ADRESS,modbus_func,modbus_rx_arg0,modbus_rx_arg1);
000dce  462b              MOV      r3,r5
000dd0  4622              MOV      r2,r4
000dd2  4639              MOV      r1,r7
000dd4  b2c0              UXTB     r0,r0
000dd6  f7fffffe          BL       modbus_hold_registers_transmit
                  |L1.3546|
;;;97     			}
;;;98     
;;;99     		if(modbus_func==4)		//χςενθε οπξθηβξλόνξγξ κξλ-βΰ πεγθρςπξβ	βυξδξβ
000dda  2f04              CMP      r7,#4
000ddc  d006              BEQ      |L1.3564|
;;;100    			{
;;;101    			modbus_input_registers_transmit(MODBUS_ADRESS,modbus_func,modbus_rx_arg0,modbus_rx_arg1);
;;;102    			}
;;;103    
;;;104    		else if(modbus_func==6) 	//ηΰοθρό πεγθρςπξβ υπΰνενθ
000dde  2f06              CMP      r7,#6
000de0  d133              BNE      |L1.3658|
;;;105    			{
;;;106    			if(modbus_rx_arg0==11)		//Σρςΰνξβκΰ βπεμενθ 
;;;107    				{
;;;108    				LPC_RTC->YEAR=(uint16_t)modbus_rx_arg1;
000de2  481a              LDR      r0,|L1.3660|
000de4  3820              SUBS     r0,r0,#0x20
000de6  2c0b              CMP      r4,#0xb               ;106
000de8  d00a              BEQ      |L1.3584|
000dea  e00a              B        |L1.3586|
                  |L1.3564|
000dec  f8b80000          LDRH     r0,[r8,#0]            ;101  ; MODBUS_ADRESS
000df0  462b              MOV      r3,r5                 ;101
000df2  4622              MOV      r2,r4                 ;101
000df4  4639              MOV      r1,r7                 ;101
000df6  e8bd41f0          POP      {r4-r8,lr}            ;101
000dfa  b2c0              UXTB     r0,r0                 ;101
000dfc  f7ffbffe          B.W      modbus_input_registers_transmit
                  |L1.3584|
000e00  8785              STRH     r5,[r0,#0x3c]
                  |L1.3586|
;;;109    				}
;;;110    			if(modbus_rx_arg0==12)		//Σρςΰνξβκΰ βπεμενθ 
000e02  2c0c              CMP      r4,#0xc
000e04  d101              BNE      |L1.3594|
;;;111    				{
;;;112    				LPC_RTC->MONTH=(uint16_t)modbus_rx_arg1;
000e06  f8805038          STRB     r5,[r0,#0x38]
                  |L1.3594|
;;;113    				}
;;;114    			if(modbus_rx_arg0==13)		//Σρςΰνξβκΰ βπεμενθ 
000e0a  2c0d              CMP      r4,#0xd
000e0c  d101              BNE      |L1.3602|
;;;115    				{
;;;116    				LPC_RTC->DOM=(uint16_t)modbus_rx_arg1;
000e0e  f880502c          STRB     r5,[r0,#0x2c]
                  |L1.3602|
;;;117    				}
;;;118    			if(modbus_rx_arg0==14)		//Σρςΰνξβκΰ βπεμενθ 
000e12  2c0e              CMP      r4,#0xe
000e14  d101              BNE      |L1.3610|
;;;119    				{
;;;120    				LPC_RTC->HOUR=(uint16_t)modbus_rx_arg1;
000e16  f8805028          STRB     r5,[r0,#0x28]
                  |L1.3610|
;;;121    				}
;;;122    			if(modbus_rx_arg0==15)		//Σρςΰνξβκΰ βπεμενθ 
000e1a  2c0f              CMP      r4,#0xf
000e1c  d101              BNE      |L1.3618|
;;;123    				{
;;;124    				LPC_RTC->MIN=(uint16_t)modbus_rx_arg1;
000e1e  f8805024          STRB     r5,[r0,#0x24]
                  |L1.3618|
;;;125    				}
;;;126    			if(modbus_rx_arg0==16)		//Σρςΰνξβκΰ βπεμενθ 
000e22  2c10              CMP      r4,#0x10
000e24  d101              BNE      |L1.3626|
;;;127    				{
;;;128    				LPC_RTC->SEC=(uint16_t)modbus_rx_arg1;
000e26  f8805020          STRB     r5,[r0,#0x20]
                  |L1.3626|
;;;129    				}
;;;130    			if(modbus_rx_arg0==20)		//ςξκ ρςΰαθλθηΰφθθ δλ πεζθμΰ ρςΰαθλθηΰφθθ ςξκΰ
000e2a  2c14              CMP      r4,#0x14
000e2c  d106              BNE      |L1.3644|
;;;131    				{
;;;132    				if((modbus_rx_arg1>0)&&(modbus_rx_arg1<5))
000e2e  1e68              SUBS     r0,r5,#1
000e30  2804              CMP      r0,#4
000e32  d203              BCS      |L1.3644|
;;;133    				lc640_write_int(EE_NUMIST,modbus_rx_arg1);  
000e34  4629              MOV      r1,r5
000e36  2098              MOVS     r0,#0x98
000e38  f7fffffe          BL       lc640_write_int
                  |L1.3644|
;;;134    				}
;;;135    			if(modbus_rx_arg0==21)		//ςξκ ρςΰαθλθηΰφθθ δλ πεζθμΰ ρςΰαθλθηΰφθθ ςξκΰ
000e3c  2c15              CMP      r4,#0x15
000e3e  d13c              BNE      |L1.3770|
;;;136    				{
;;;137    				if((modbus_rx_arg1==0)||(modbus_rx_arg1==1))
000e40  b10d              CBZ      r5,|L1.3654|
000e42  2d01              CMP      r5,#1
000e44  d139              BNE      |L1.3770|
                  |L1.3654|
;;;138    				lc640_write_int(EE_PAR,modbus_rx_arg1);  
000e46  4629              MOV      r1,r5
000e48  e034              B        |L1.3764|
                  |L1.3658|
000e4a  e0d6              B        |L1.4090|
                  |L1.3660|
                          DCD      0x40024020
                  |L1.3664|
                          DCD      NUMIST
                  |L1.3668|
                          DCD      PAR
                  |L1.3672|
                          DCD      ZV_ON
                  |L1.3676|
                          DCD      UBM_AV
                  |L1.3680|
                          DCD      TBAT
                  |L1.3684|
                          DCD      UMAX
                  |L1.3688|
                          DCD      UB20
                  |L1.3692|
                          DCD      ||DU||
                  |L1.3696|
                          DCD      UB0
                  |L1.3700|
                          DCD      USIGN
                  |L1.3704|
                          DCD      UMN
                  |L1.3708|
                          DCD      U0B
                  |L1.3712|
                          DCD      IKB
                  |L1.3716|
                          DCD      IZMAX
                  |L1.3720|
                          DCD      IMAX
                  |L1.3724|
                          DCD      IMIN
                  |L1.3728|
                          DCD      UVZ
                  |L1.3732|
                          DCD      TZAS
                  |L1.3736|
                          DCD      TMAX
                  |L1.3740|
                          DCD      TSIGN
                  |L1.3744|
                          DCD      TBATMAX
                  |L1.3748|
                          DCD      TBATSIGN
                  |L1.3752|
                          DCD      ||area_number.10||
                  |L1.3756|
                          DCD      ||area_number.6||
                  |L1.3760|
                          DCD      MODBUS_ADRESS
                  |L1.3764|
000eb4  20ca              MOVS     r0,#0xca
000eb6  f7fffffe          BL       lc640_write_int
                  |L1.3770|
;;;139    				}
;;;140    			if(modbus_rx_arg0==22)		//ςξκ ρςΰαθλθηΰφθθ δλ πεζθμΰ ρςΰαθλθηΰφθθ ςξκΰ
000eba  2c16              CMP      r4,#0x16
000ebc  d106              BNE      |L1.3788|
;;;141    				{
;;;142    				if((modbus_rx_arg1==0)||(modbus_rx_arg1==1))
000ebe  b10d              CBZ      r5,|L1.3780|
000ec0  2d01              CMP      r5,#1
000ec2  d103              BNE      |L1.3788|
                  |L1.3780|
;;;143    				lc640_write_int(EE_ZV_ON,modbus_rx_arg1);  
000ec4  4629              MOV      r1,r5
000ec6  2086              MOVS     r0,#0x86
000ec8  f7fffffe          BL       lc640_write_int
                  |L1.3788|
;;;144    				}
;;;145    			if(modbus_rx_arg0==23)		//ςξκ ρςΰαθλθηΰφθθ δλ πεζθμΰ ρςΰαθλθηΰφθθ ςξκΰ
000ecc  2c17              CMP      r4,#0x17
000ece  d106              BNE      |L1.3806|
;;;146    				{
;;;147    				if((modbus_rx_arg1==0)||(modbus_rx_arg1==1))
000ed0  b10d              CBZ      r5,|L1.3798|
000ed2  2d01              CMP      r5,#1
000ed4  d103              BNE      |L1.3806|
                  |L1.3798|
;;;148    				lc640_write_int(EE_TERMOKOMP,modbus_rx_arg1);  
000ed6  4629              MOV      r1,r5
000ed8  20f2              MOVS     r0,#0xf2
000eda  f7fffffe          BL       lc640_write_int
                  |L1.3806|
;;;149    				}
;;;150    			if(modbus_rx_arg0==24)		//ςξκ ρςΰαθλθηΰφθθ δλ πεζθμΰ ρςΰαθλθηΰφθθ ςξκΰ
000ede  2c18              CMP      r4,#0x18
000ee0  d104              BNE      |L1.3820|
;;;151    				{
;;;152    				if((modbus_rx_arg1>=0)||(modbus_rx_arg1<=20))
;;;153    				lc640_write_int(EE_UBM_AV,modbus_rx_arg1);  
000ee2  4629              MOV      r1,r5
000ee4  f44f7019          MOV      r0,#0x264
000ee8  f7fffffe          BL       lc640_write_int
                  |L1.3820|
;;;154    				}
;;;155    
;;;156    
;;;157    			if(modbus_rx_arg0==30)		//νΰοπζενθε ρςΰαθλθηΰφθθ δλ πεζθμΰ ρςΰαθλθηΰφθθ νΰοπζενθ
000eec  2c1e              CMP      r4,#0x1e
000eee  d112              BNE      |L1.3862|
;;;158    				{
;;;159    				if(modbus_rx_arg1<0)TBAT=0;
;;;160    				else if((modbus_rx_arg1>0)&&(modbus_rx_arg1<=5))modbus_rx_arg1=0;
000ef0  1e69              SUBS     r1,r5,#1
;;;161    				else if(modbus_rx_arg1>=60)TBAT=60;
000ef2  4842              LDR      r0,|L1.4092|
000ef4  2904              CMP      r1,#4                 ;160
000ef6  d802              BHI      |L1.3838|
000ef8  f04f0500          MOV      r5,#0                 ;160
000efc  e006              B        |L1.3852|
                  |L1.3838|
000efe  2d3c              CMP      r5,#0x3c
000f00  d303              BCC      |L1.3850|
000f02  f04f013c          MOV      r1,#0x3c
000f06  8001              STRH     r1,[r0,#0]
000f08  e000              B        |L1.3852|
                  |L1.3850|
;;;162    				else TBAT=modbus_rx_arg1;
000f0a  8005              STRH     r5,[r0,#0]
                  |L1.3852|
;;;163    				lc640_write_int(EE_TBAT,TBAT);
000f0c  f9b01000          LDRSH    r1,[r0,#0]  ; TBAT
000f10  20c2              MOVS     r0,#0xc2
000f12  f7fffffe          BL       lc640_write_int
                  |L1.3862|
;;;164    	     		}
;;;165    			if(modbus_rx_arg0==31)		//
000f16  2c1f              CMP      r4,#0x1f
000f18  d103              BNE      |L1.3874|
;;;166    				{
;;;167    				lc640_write_int(EE_UMAX,modbus_rx_arg1);
000f1a  4629              MOV      r1,r5
000f1c  2078              MOVS     r0,#0x78
000f1e  f7fffffe          BL       lc640_write_int
                  |L1.3874|
;;;168    	     		}
;;;169    			if(modbus_rx_arg0==32)		//
000f22  2c20              CMP      r4,#0x20
000f24  d106              BNE      |L1.3892|
;;;170    				{
;;;171    				lc640_write_int(EE_DU,UB20-modbus_rx_arg1);
000f26  4836              LDR      r0,|L1.4096|
000f28  f9b00000          LDRSH    r0,[r0,#0]  ; UB20
000f2c  1b41              SUBS     r1,r0,r5
000f2e  20c8              MOVS     r0,#0xc8
000f30  f7fffffe          BL       lc640_write_int
                  |L1.3892|
;;;172    	     		}
;;;173    			if(modbus_rx_arg0==33)		//
000f34  2c21              CMP      r4,#0x21
000f36  d103              BNE      |L1.3904|
;;;174    				{
;;;175    				lc640_write_int(EE_UB0,modbus_rx_arg1);
000f38  4629              MOV      r1,r5
000f3a  207a              MOVS     r0,#0x7a
000f3c  f7fffffe          BL       lc640_write_int
                  |L1.3904|
;;;176    	     		}
;;;177    			if(modbus_rx_arg0==34)		//
000f40  2c22              CMP      r4,#0x22
000f42  d103              BNE      |L1.3916|
;;;178    				{
;;;179    				lc640_write_int(EE_UB20,modbus_rx_arg1);
000f44  4629              MOV      r1,r5
000f46  207c              MOVS     r0,#0x7c
000f48  f7fffffe          BL       lc640_write_int
                  |L1.3916|
;;;180    	     		}
;;;181    			if(modbus_rx_arg0==35)		//
000f4c  2c23              CMP      r4,#0x23
000f4e  d103              BNE      |L1.3928|
;;;182    				{
;;;183    				lc640_write_int(EE_USIGN,modbus_rx_arg1);
000f50  4629              MOV      r1,r5
000f52  2082              MOVS     r0,#0x82
000f54  f7fffffe          BL       lc640_write_int
                  |L1.3928|
;;;184    	     		}
;;;185    			if(modbus_rx_arg0==36)		//
000f58  2c24              CMP      r4,#0x24
000f5a  d103              BNE      |L1.3940|
;;;186    				{
;;;187    				lc640_write_int(EE_UMN,modbus_rx_arg1);
000f5c  4629              MOV      r1,r5
000f5e  2084              MOVS     r0,#0x84
000f60  f7fffffe          BL       lc640_write_int
                  |L1.3940|
;;;188    	     		}
;;;189    			if(modbus_rx_arg0==37)		//
000f64  2c25              CMP      r4,#0x25
000f66  d103              BNE      |L1.3952|
;;;190    				{
;;;191    				lc640_write_int(EE_U0B,modbus_rx_arg1);
000f68  4629              MOV      r1,r5
000f6a  2094              MOVS     r0,#0x94
000f6c  f7fffffe          BL       lc640_write_int
                  |L1.3952|
;;;192    	     		}
;;;193    			if(modbus_rx_arg0==38)		//
000f70  2c26              CMP      r4,#0x26
000f72  d103              BNE      |L1.3964|
;;;194    				{
;;;195    				lc640_write_int(EE_IKB,modbus_rx_arg1);
000f74  4629              MOV      r1,r5
000f76  2088              MOVS     r0,#0x88
000f78  f7fffffe          BL       lc640_write_int
                  |L1.3964|
;;;196    	     		}
;;;197    			if(modbus_rx_arg0==39)		//
000f7c  2c27              CMP      r4,#0x27
000f7e  d103              BNE      |L1.3976|
;;;198    				{
;;;199    				lc640_write_int(EE_IZMAX,modbus_rx_arg1);
000f80  4629              MOV      r1,r5
000f82  2092              MOVS     r0,#0x92
000f84  f7fffffe          BL       lc640_write_int
                  |L1.3976|
;;;200    	     		}
;;;201    			if(modbus_rx_arg0==40)		//
000f88  2c28              CMP      r4,#0x28
000f8a  d103              BNE      |L1.3988|
;;;202    				{
;;;203    				lc640_write_int(EE_IMAX,modbus_rx_arg1);
000f8c  4629              MOV      r1,r5
000f8e  208c              MOVS     r0,#0x8c
000f90  f7fffffe          BL       lc640_write_int
                  |L1.3988|
;;;204    	     		}
;;;205    			if(modbus_rx_arg0==41)		//
000f94  2c29              CMP      r4,#0x29
000f96  d103              BNE      |L1.4000|
;;;206    				{
;;;207    				lc640_write_int(EE_IMIN,modbus_rx_arg1);
000f98  4629              MOV      r1,r5
000f9a  208e              MOVS     r0,#0x8e
000f9c  f7fffffe          BL       lc640_write_int
                  |L1.4000|
;;;208    	     		}
;;;209    			if(modbus_rx_arg0==42)		//
000fa0  2c2a              CMP      r4,#0x2a
000fa2  d103              BNE      |L1.4012|
;;;210    				{
;;;211    				lc640_write_int(EE_UVZ,modbus_rx_arg1);
000fa4  4629              MOV      r1,r5
000fa6  20de              MOVS     r0,#0xde
000fa8  f7fffffe          BL       lc640_write_int
                  |L1.4012|
;;;212    	     		}
;;;213    			if(modbus_rx_arg0==43)		//
000fac  2c2b              CMP      r4,#0x2b
000fae  d103              BNE      |L1.4024|
;;;214    				{
;;;215    				lc640_write_int(EE_TZAS,modbus_rx_arg1);
000fb0  4629              MOV      r1,r5
000fb2  2096              MOVS     r0,#0x96
000fb4  f7fffffe          BL       lc640_write_int
                  |L1.4024|
;;;216    	     		}
;;;217    			if(modbus_rx_arg0==44)		//
000fb8  2c2c              CMP      r4,#0x2c
000fba  d103              BNE      |L1.4036|
;;;218    				{
;;;219    				lc640_write_int(EE_TMAX,modbus_rx_arg1);
000fbc  4629              MOV      r1,r5
000fbe  207e              MOVS     r0,#0x7e
000fc0  f7fffffe          BL       lc640_write_int
                  |L1.4036|
;;;220    	     		}
;;;221    			if(modbus_rx_arg0==45)		//
000fc4  2c2d              CMP      r4,#0x2d
000fc6  d103              BNE      |L1.4048|
;;;222    				{
;;;223    				lc640_write_int(EE_TSIGN,modbus_rx_arg1);
000fc8  4629              MOV      r1,r5
000fca  20c6              MOVS     r0,#0xc6
000fcc  f7fffffe          BL       lc640_write_int
                  |L1.4048|
;;;224    	     		}
;;;225    			if(modbus_rx_arg0==46)		//
000fd0  2c2e              CMP      r4,#0x2e
000fd2  d103              BNE      |L1.4060|
;;;226    				{
;;;227    				lc640_write_int(EE_TBATMAX,modbus_rx_arg1);
000fd4  4629              MOV      r1,r5
000fd6  20cc              MOVS     r0,#0xcc
000fd8  f7fffffe          BL       lc640_write_int
                  |L1.4060|
;;;228    	     		}
;;;229    			if(modbus_rx_arg0==47)		//
000fdc  2c2f              CMP      r4,#0x2f
000fde  d103              BNE      |L1.4072|
;;;230    				{
;;;231    				lc640_write_int(EE_TBATSIGN,modbus_rx_arg1);
000fe0  4629              MOV      r1,r5
000fe2  20ce              MOVS     r0,#0xce
000fe4  f7fffffe          BL       lc640_write_int
                  |L1.4072|
;;;232    	     		}
;;;233    			if(modbus_rx_arg0==19)		//βκλ/βϋκλ θρςξχνθκΰ νΰοπ.
;;;234    				{
;;;235    	/*			if(modbus_rx_arg1==1)
;;;236    					{
;;;237    					if(work_stat!=wsPS)
;;;238    						{
;;;239    						work_stat=wsPS;
;;;240    						time_proc=0;
;;;241    						time_proc_remain=T_PROC_PS;
;;;242    						restart_on_PS();
;;;243    						lc640_write_int(EE_MAIN_MENU_MODE,mmmIN);
;;;244    						}
;;;245    					}
;;;246    				if(modbus_rx_arg1==0)
;;;247    					{
;;;248    					if(work_stat==wsPS)
;;;249    						{
;;;250    						work_stat=wsOFF;
;;;251    						restart_off();
;;;252    						}
;;;253    					} */
;;;254    				}
;;;255    			if(modbus_rx_arg0==20)		//βκλ/βϋκλ θρςξχνθκΰ ςξκΰ
;;;256    				{
;;;257    /*				if(modbus_rx_arg1==1)
;;;258    					{
;;;259    					if(work_stat!=wsGS)
;;;260    						{
;;;261    						work_stat=wsGS;
;;;262    						time_proc=0;
;;;263    						time_proc_remain=T_PROC_GS;
;;;264    						lc640_write_int(EE_MAIN_MENU_MODE,mmmIT);
;;;265    						}
;;;266    					}
;;;267    				if(modbus_rx_arg1==0)
;;;268    					{
;;;269    					if(work_stat==wsGS)
;;;270    						{
;;;271    						work_stat=wsOFF;
;;;272    						restart_off();
;;;273    						}
;;;274    					}*/
;;;275    				}
;;;276    			modbus_hold_register_transmit(MODBUS_ADRESS,modbus_func,modbus_rx_arg0);
000fe8  f8b80000          LDRH     r0,[r8,#0]  ; MODBUS_ADRESS
000fec  4622              MOV      r2,r4
000fee  4639              MOV      r1,r7
000ff0  e8bd41f0          POP      {r4-r8,lr}
000ff4  b2c0              UXTB     r0,r0
000ff6  f7ffbffe          B.W      modbus_hold_register_transmit
                  |L1.4090|
;;;277    			}
;;;278    		} 
;;;279    	//modbus_plazma++;
;;;280    	}
;;;281    // modbus_plazma++;
;;;282    
;;;283    }
000ffa  e523              B        |L1.2628|
;;;284    
                          ENDP

                  |L1.4092|
                          DCD      TBAT
                  |L1.4096|
                          DCD      UB20

                          AREA ||area_number.2||, CODE, READONLY, ALIGN=2

                          EXPORTAS ||area_number.2||, ||.text||
                  modbus_register_transmit PROC
;;;285    //-----------------------------------------------
;;;286    void modbus_register_transmit(unsigned char adr,unsigned char func,unsigned short reg_adr)
000000  b5f0              PUSH     {r4-r7,lr}
;;;287    {
000002  b0b3              SUB      sp,sp,#0xcc
;;;288    char modbus_registers[150];
;;;289    char modbus_tx_buff[50];
;;;290    unsigned short crc_temp;
;;;291    char i;
;;;292    
;;;293    
;;;294    modbus_registers[0]=(char)(load_U/256);					//Πεγ1
000004  4bff              LDR      r3,|L2.1028|
000006  f9b33000          LDRSH    r3,[r3,#0]  ; load_U
00000a  ea4f74e3          ASR      r4,r3,#31
00000e  eb036414          ADD      r4,r3,r4,LSR #24
000012  ea4f2524          ASR      r5,r4,#8
000016  f88d5034          STRB     r5,[sp,#0x34]
;;;295    modbus_registers[1]=(char)(load_U%256);
00001a  f88d3035          STRB     r3,[sp,#0x35]
;;;296    modbus_registers[2]=(char)(load_I/256);					//Πεγ2
00001e  4bfa              LDR      r3,|L2.1032|
000020  f9b34000          LDRSH    r4,[r3,#0]  ; load_I
000024  ea4f73e4          ASR      r3,r4,#31
000028  eb046513          ADD      r5,r4,r3,LSR #24
00002c  f3c52307          UBFX     r3,r5,#8,#8
000030  f88d3036          STRB     r3,[sp,#0x36]
;;;297    modbus_registers[3]=(char)(load_I%256);
000034  b2e4              UXTB     r4,r4
000036  f88d4037          STRB     r4,[sp,#0x37]
;;;298    modbus_registers[4]=(char)(Ib_ips_termokompensat/256);		//Πεγ3
00003a  4df4              LDR      r5,|L2.1036|
00003c  f9b55000          LDRSH    r5,[r5,#0]  ; Ib_ips_termokompensat
000040  ea4f76e5          ASR      r6,r5,#31
000044  eb056616          ADD      r6,r5,r6,LSR #24
000048  ea4f2726          ASR      r7,r6,#8
00004c  f88d7038          STRB     r7,[sp,#0x38]
;;;299    modbus_registers[5]=(char)(Ib_ips_termokompensat%256);
000050  f88d5039          STRB     r5,[sp,#0x39]
;;;300    modbus_registers[6]=(char)(t_ext[0]/256);				//Πεγ4
000054  4dee              LDR      r5,|L2.1040|
000056  f9b55000          LDRSH    r5,[r5,#0]  ; t_ext
00005a  ea4f76e5          ASR      r6,r5,#31
00005e  eb056616          ADD      r6,r5,r6,LSR #24
000062  ea4f2726          ASR      r7,r6,#8
000066  f88d703a          STRB     r7,[sp,#0x3a]
;;;301    modbus_registers[7]=(char)(t_ext[0]%256);
00006a  f88d503b          STRB     r5,[sp,#0x3b]
;;;302    modbus_registers[8]=(char)(net_Ua/256);					//Πεγ5
00006e  4de9              LDR      r5,|L2.1044|
000070  f9b55000          LDRSH    r5,[r5,#0]  ; net_Ua
000074  ea4f76e5          ASR      r6,r5,#31
000078  eb056616          ADD      r6,r5,r6,LSR #24
00007c  ea4f2726          ASR      r7,r6,#8
000080  f88d703c          STRB     r7,[sp,#0x3c]
;;;303    modbus_registers[9]=(char)(net_Ua%256);		 	
000084  f88d503d          STRB     r5,[sp,#0x3d]
;;;304    modbus_registers[10]=(char)(net_Ub/256);				//Πεγ6
000088  4de3              LDR      r5,|L2.1048|
00008a  f9b55000          LDRSH    r5,[r5,#0]  ; net_Ub
00008e  ea4f76e5          ASR      r6,r5,#31
000092  eb056616          ADD      r6,r5,r6,LSR #24
000096  ea4f2726          ASR      r7,r6,#8
00009a  f88d703e          STRB     r7,[sp,#0x3e]
;;;305    modbus_registers[11]=(char)(net_Ub%256);
00009e  f88d503f          STRB     r5,[sp,#0x3f]
;;;306    modbus_registers[12]=(char)(net_Uc/256);				//Πεγ7
0000a2  4dde              LDR      r5,|L2.1052|
0000a4  f9b55000          LDRSH    r5,[r5,#0]  ; net_Uc
0000a8  ea4f76e5          ASR      r6,r5,#31
0000ac  eb056616          ADD      r6,r5,r6,LSR #24
0000b0  ea4f2726          ASR      r7,r6,#8
0000b4  f88d7040          STRB     r7,[sp,#0x40]
;;;307    modbus_registers[13]=(char)(net_Uc%256);
0000b8  f88d5041          STRB     r5,[sp,#0x41]
;;;308    modbus_registers[14]=(char)(net_F3/256);				//Πεγ8
0000bc  4dd8              LDR      r5,|L2.1056|
0000be  f9b55000          LDRSH    r5,[r5,#0]  ; net_F3
0000c2  ea4f76e5          ASR      r6,r5,#31
0000c6  eb056616          ADD      r6,r5,r6,LSR #24
0000ca  ea4f2726          ASR      r7,r6,#8
0000ce  f88d7042          STRB     r7,[sp,#0x42]
;;;309    modbus_registers[15]=(char)(net_F3%256);
0000d2  f88d5043          STRB     r5,[sp,#0x43]
;;;310    modbus_registers[16]=(char)(load_I/256);				//Πεγ9
0000d6  f88d3044          STRB     r3,[sp,#0x44]
;;;311    modbus_registers[17]=(char)(load_I%256);
0000da  f88d4045          STRB     r4,[sp,#0x45]
;;;312    modbus_registers[18]=(char)(load_I/256);				//Πεγ10
0000de  f88d3046          STRB     r3,[sp,#0x46]
;;;313    modbus_registers[19]=(char)(load_I%256);
0000e2  f88d4047          STRB     r4,[sp,#0x47]
;;;314    modbus_registers[20]=(char)((LPC_RTC->YEAR)/256);			//Πεγ11
0000e6  4dcf              LDR      r5,|L2.1060|
0000e8  8bae              LDRH     r6,[r5,#0x1c]
0000ea  ea4f2616          LSR      r6,r6,#8
0000ee  f88d6048          STRB     r6,[sp,#0x48]
;;;315    modbus_registers[21]=(char)((LPC_RTC->YEAR)%256);
0000f2  8bae              LDRH     r6,[r5,#0x1c]
0000f4  f88d6049          STRB     r6,[sp,#0x49]
;;;316    modbus_registers[22]=(char)((LPC_RTC->MONTH)/256);		//Πεγ12
0000f8  7e2e              LDRB     r6,[r5,#0x18]
0000fa  f04f0600          MOV      r6,#0
0000fe  f88d604a          STRB     r6,[sp,#0x4a]
;;;317    modbus_registers[23]=(char)((LPC_RTC->MONTH)%256);
000102  7e2f              LDRB     r7,[r5,#0x18]
000104  f88d704b          STRB     r7,[sp,#0x4b]
;;;318    modbus_registers[24]=(char)((LPC_RTC->DOM)/256);			//Πεγ13
000108  7b2f              LDRB     r7,[r5,#0xc]
00010a  f88d604c          STRB     r6,[sp,#0x4c]
;;;319    modbus_registers[25]=(char)((LPC_RTC->DOM)%256);
00010e  7b2f              LDRB     r7,[r5,#0xc]
000110  f88d704d          STRB     r7,[sp,#0x4d]
;;;320    modbus_registers[26]=(char)((LPC_RTC->HOUR)/256);			//Πεγ14
000114  7a2f              LDRB     r7,[r5,#8]
000116  f88d604e          STRB     r6,[sp,#0x4e]
;;;321    modbus_registers[27]=(char)((LPC_RTC->HOUR)%256);
00011a  7a2f              LDRB     r7,[r5,#8]
00011c  f88d704f          STRB     r7,[sp,#0x4f]
;;;322    modbus_registers[28]=(char)((LPC_RTC->MIN)/256);			//Πεγ15
000120  792f              LDRB     r7,[r5,#4]
000122  f88d6050          STRB     r6,[sp,#0x50]
;;;323    modbus_registers[29]=(char)((LPC_RTC->MIN)%256);
000126  792f              LDRB     r7,[r5,#4]
000128  f88d7051          STRB     r7,[sp,#0x51]
;;;324    modbus_registers[30]=(char)((LPC_RTC->SEC)/256);			//Πεγ16
00012c  782f              LDRB     r7,[r5,#0]
00012e  f88d6052          STRB     r6,[sp,#0x52]
;;;325    modbus_registers[31]=(char)((LPC_RTC->SEC)%256);
000132  782d              LDRB     r5,[r5,#0]
000134  f88d5053          STRB     r5,[sp,#0x53]
;;;326    modbus_registers[32]=(char)(load_I/256);				//Πεγ17
000138  f88d3054          STRB     r3,[sp,#0x54]
;;;327    modbus_registers[33]=(char)(load_I%256);
00013c  f88d4055          STRB     r4,[sp,#0x55]
;;;328    modbus_registers[34]=(char)(load_I/256);				//Πεγ18
000140  f88d3056          STRB     r3,[sp,#0x56]
;;;329    modbus_registers[35]=(char)(load_I%256);
000144  f88d4057          STRB     r4,[sp,#0x57]
;;;330    modbus_registers[36]=(char)(load_I/256);		//Πεγ19
000148  f88d3058          STRB     r3,[sp,#0x58]
;;;331    modbus_registers[37]=(char)(load_I%256);
00014c  f88d4059          STRB     r4,[sp,#0x59]
;;;332    modbus_registers[38]=(char)(NUMIST/256);		//Πεγ20
000150  4db5              LDR      r5,|L2.1064|
000152  f9b55000          LDRSH    r5,[r5,#0]  ; NUMIST
000156  ea4f76e5          ASR      r6,r5,#31
00015a  eb056616          ADD      r6,r5,r6,LSR #24
00015e  ea4f2726          ASR      r7,r6,#8
000162  f88d705a          STRB     r7,[sp,#0x5a]
;;;333    modbus_registers[39]=(char)(NUMIST%256);
000166  f88d505b          STRB     r5,[sp,#0x5b]
;;;334    modbus_registers[40]=(char)(PAR/256);		//Πεγ21
00016a  4db0              LDR      r5,|L2.1068|
00016c  f9b55000          LDRSH    r5,[r5,#0]  ; PAR
000170  ea4f76e5          ASR      r6,r5,#31
000174  eb056616          ADD      r6,r5,r6,LSR #24
000178  ea4f2726          ASR      r7,r6,#8
00017c  f88d705c          STRB     r7,[sp,#0x5c]
;;;335    modbus_registers[41]=(char)(PAR%256);
000180  f88d505d          STRB     r5,[sp,#0x5d]
;;;336    modbus_registers[42]=(char)(ZV_ON/256);		//Πεγ22
000184  4daa              LDR      r5,|L2.1072|
000186  f9b55000          LDRSH    r5,[r5,#0]  ; ZV_ON
00018a  ea4f76e5          ASR      r6,r5,#31
00018e  eb056616          ADD      r6,r5,r6,LSR #24
000192  ea4f2726          ASR      r7,r6,#8
000196  f88d705e          STRB     r7,[sp,#0x5e]
;;;337    modbus_registers[43]=(char)(ZV_ON%256);
00019a  f88d505f          STRB     r5,[sp,#0x5f]
;;;338    modbus_registers[44]=(char)(TERMOKOMPENS/256);		//Πεγ23
00019e  4da5              LDR      r5,|L2.1076|
0001a0  f9b55000          LDRSH    r5,[r5,#0]  ; TERMOKOMPENS
0001a4  ea4f76e5          ASR      r6,r5,#31
0001a8  eb056616          ADD      r6,r5,r6,LSR #24
0001ac  ea4f2726          ASR      r7,r6,#8
0001b0  f88d7060          STRB     r7,[sp,#0x60]
;;;339    modbus_registers[45]=(char)(TERMOKOMPENS%256);
0001b4  f88d5061          STRB     r5,[sp,#0x61]
;;;340    modbus_registers[46]=(char)(UBM_AV/256);		//Πεγ24
0001b8  4d9f              LDR      r5,|L2.1080|
0001ba  f9b55000          LDRSH    r5,[r5,#0]  ; UBM_AV
0001be  ea4f76e5          ASR      r6,r5,#31
0001c2  eb056616          ADD      r6,r5,r6,LSR #24
0001c6  ea4f2726          ASR      r7,r6,#8
0001ca  f88d7062          STRB     r7,[sp,#0x62]
;;;341    modbus_registers[47]=(char)(UBM_AV%256);
0001ce  f88d5063          STRB     r5,[sp,#0x63]
;;;342    modbus_registers[48]=(char)(load_I/256);		//Πεγ25
0001d2  f88d3064          STRB     r3,[sp,#0x64]
;;;343    modbus_registers[49]=(char)(load_I%256);
0001d6  f88d4065          STRB     r4,[sp,#0x65]
;;;344    modbus_registers[50]=(char)(load_I/256);		//Πεγ26
0001da  f88d3066          STRB     r3,[sp,#0x66]
;;;345    modbus_registers[51]=(char)(load_I%256);
0001de  f88d4067          STRB     r4,[sp,#0x67]
;;;346    modbus_registers[52]=(char)(load_I/256);		//Πεγ27
0001e2  f88d3068          STRB     r3,[sp,#0x68]
;;;347    modbus_registers[53]=(char)(load_I%256);
0001e6  f88d4069          STRB     r4,[sp,#0x69]
;;;348    modbus_registers[54]=(char)(load_I/256);		//Πεγ28
0001ea  f88d306a          STRB     r3,[sp,#0x6a]
;;;349    modbus_registers[55]=(char)(load_I%256);
0001ee  f88d406b          STRB     r4,[sp,#0x6b]
;;;350    modbus_registers[56]=(char)(load_I/256);		//Πεγ29
0001f2  f88d306c          STRB     r3,[sp,#0x6c]
;;;351    modbus_registers[57]=(char)(load_I%256);
0001f6  f88d406d          STRB     r4,[sp,#0x6d]
;;;352    modbus_registers[58]=(char)(TBAT/256);			//Πεγ30
0001fa  4d90              LDR      r5,|L2.1084|
0001fc  f9b55000          LDRSH    r5,[r5,#0]  ; TBAT
000200  ea4f76e5          ASR      r6,r5,#31
000204  eb056616          ADD      r6,r5,r6,LSR #24
000208  ea4f2726          ASR      r7,r6,#8
00020c  f88d706e          STRB     r7,[sp,#0x6e]
;;;353    modbus_registers[59]=(char)(TBAT%256);
000210  f88d506f          STRB     r5,[sp,#0x6f]
;;;354    modbus_registers[60]=(char)(UMAX/256);			//Πεγ31
000214  4d8a              LDR      r5,|L2.1088|
000216  f9b55000          LDRSH    r5,[r5,#0]  ; UMAX
00021a  ea4f76e5          ASR      r6,r5,#31
00021e  eb056616          ADD      r6,r5,r6,LSR #24
000222  ea4f2726          ASR      r7,r6,#8
000226  f88d7070          STRB     r7,[sp,#0x70]
;;;355    modbus_registers[61]=(char)(UMAX%256);
00022a  f88d5071          STRB     r5,[sp,#0x71]
;;;356    modbus_registers[62]=(char)((UB20-DU)/256);		//Πεγ32
00022e  4d85              LDR      r5,|L2.1092|
000230  4e85              LDR      r6,|L2.1096|
000232  f9b55000          LDRSH    r5,[r5,#0]  ; UB20
000236  f9b66000          LDRSH    r6,[r6,#0]  ; DU
00023a  eba50606          SUB      r6,r5,r6
00023e  ea4f77e6          ASR      r7,r6,#31
000242  eb066717          ADD      r7,r6,r7,LSR #24
000246  ea4f2c27          ASR      r12,r7,#8
00024a  f88dc072          STRB     r12,[sp,#0x72]
;;;357    modbus_registers[63]=(char)((UB20-DU)%256);
00024e  f88d6073          STRB     r6,[sp,#0x73]
;;;358    modbus_registers[64]=(char)(UB0/256);			//Πεγ33
000252  4e7e              LDR      r6,|L2.1100|
000254  f9b66000          LDRSH    r6,[r6,#0]  ; UB0
000258  ea4f77e6          ASR      r7,r6,#31
00025c  eb066717          ADD      r7,r6,r7,LSR #24
000260  ea4f2c27          ASR      r12,r7,#8
000264  f88dc074          STRB     r12,[sp,#0x74]
;;;359    modbus_registers[65]=(char)(UB0%256);
000268  f88d6075          STRB     r6,[sp,#0x75]
;;;360    modbus_registers[66]=(char)(UB20/256);			//Πεγ34
00026c  ea4f76e5          ASR      r6,r5,#31
000270  eb056616          ADD      r6,r5,r6,LSR #24
000274  ea4f2726          ASR      r7,r6,#8
000278  f88d7076          STRB     r7,[sp,#0x76]
;;;361    modbus_registers[67]=(char)(UB20%256);
00027c  f88d5077          STRB     r5,[sp,#0x77]
;;;362    modbus_registers[68]=(char)(USIGN/256);		//Πεγ35
000280  4d73              LDR      r5,|L2.1104|
000282  f9b55000          LDRSH    r5,[r5,#0]  ; USIGN
000286  ea4f76e5          ASR      r6,r5,#31
00028a  eb056616          ADD      r6,r5,r6,LSR #24
00028e  ea4f2726          ASR      r7,r6,#8
000292  f88d7078          STRB     r7,[sp,#0x78]
;;;363    modbus_registers[69]=(char)(USIGN%256);
000296  f88d5079          STRB     r5,[sp,#0x79]
;;;364    modbus_registers[70]=(char)(UMN/256);		//Πεγ36
00029a  4d6e              LDR      r5,|L2.1108|
00029c  f9b55000          LDRSH    r5,[r5,#0]  ; UMN
0002a0  ea4f76e5          ASR      r6,r5,#31
0002a4  eb056616          ADD      r6,r5,r6,LSR #24
0002a8  ea4f2726          ASR      r7,r6,#8
0002ac  f88d707a          STRB     r7,[sp,#0x7a]
;;;365    modbus_registers[71]=(char)(UMN%256);
0002b0  f88d507b          STRB     r5,[sp,#0x7b]
;;;366    modbus_registers[72]=(char)(U0B/256);		//Πεγ37
0002b4  4d68              LDR      r5,|L2.1112|
0002b6  f9b55000          LDRSH    r5,[r5,#0]  ; U0B
0002ba  ea4f76e5          ASR      r6,r5,#31
0002be  eb056616          ADD      r6,r5,r6,LSR #24
0002c2  ea4f2726          ASR      r7,r6,#8
0002c6  f88d707c          STRB     r7,[sp,#0x7c]
;;;367    modbus_registers[73]=(char)(U0B%256);
0002ca  f88d507d          STRB     r5,[sp,#0x7d]
;;;368    modbus_registers[74]=(char)(IKB/256);		//Πεγ38
0002ce  4d63              LDR      r5,|L2.1116|
0002d0  f9b55000          LDRSH    r5,[r5,#0]  ; IKB
0002d4  ea4f76e5          ASR      r6,r5,#31
0002d8  eb056616          ADD      r6,r5,r6,LSR #24
0002dc  ea4f2726          ASR      r7,r6,#8
0002e0  f88d707e          STRB     r7,[sp,#0x7e]
;;;369    modbus_registers[75]=(char)(IKB%256);
0002e4  f88d507f          STRB     r5,[sp,#0x7f]
;;;370    modbus_registers[76]=(char)(IZMAX/256);		//Πεγ39
0002e8  4d5d              LDR      r5,|L2.1120|
0002ea  f9b55000          LDRSH    r5,[r5,#0]  ; IZMAX
0002ee  ea4f76e5          ASR      r6,r5,#31
0002f2  eb056616          ADD      r6,r5,r6,LSR #24
0002f6  ea4f2726          ASR      r7,r6,#8
0002fa  f88d7080          STRB     r7,[sp,#0x80]
;;;371    modbus_registers[77]=(char)(IZMAX%256);
0002fe  f88d5081          STRB     r5,[sp,#0x81]
;;;372    modbus_registers[78]=(char)(IMAX/256);		//Πεγ40
000302  4d58              LDR      r5,|L2.1124|
000304  f9b55000          LDRSH    r5,[r5,#0]  ; IMAX
000308  ea4f76e5          ASR      r6,r5,#31
00030c  eb056616          ADD      r6,r5,r6,LSR #24
000310  ea4f2726          ASR      r7,r6,#8
000314  f88d7082          STRB     r7,[sp,#0x82]
;;;373    modbus_registers[79]=(char)(IMAX%256);
000318  f88d5083          STRB     r5,[sp,#0x83]
;;;374    modbus_registers[80]=(char)(IMIN/256);		//Πεγ41
00031c  4d52              LDR      r5,|L2.1128|
00031e  f9b55000          LDRSH    r5,[r5,#0]  ; IMIN
000322  ea4f76e5          ASR      r6,r5,#31
000326  eb056616          ADD      r6,r5,r6,LSR #24
00032a  ea4f2726          ASR      r7,r6,#8
00032e  f88d7084          STRB     r7,[sp,#0x84]
;;;375    modbus_registers[81]=(char)(IMIN%256);
000332  f88d5085          STRB     r5,[sp,#0x85]
;;;376    modbus_registers[82]=(char)(UVZ/256);		//Πεγ42
000336  4d4d              LDR      r5,|L2.1132|
000338  f9b55000          LDRSH    r5,[r5,#0]  ; UVZ
00033c  ea4f76e5          ASR      r6,r5,#31
000340  eb056616          ADD      r6,r5,r6,LSR #24
000344  ea4f2726          ASR      r7,r6,#8
000348  f88d7086          STRB     r7,[sp,#0x86]
;;;377    modbus_registers[83]=(char)(UVZ%256);
00034c  f88d5087          STRB     r5,[sp,#0x87]
;;;378    modbus_registers[84]=(char)(TZAS/256);		//Πεγ43
000350  4d47              LDR      r5,|L2.1136|
000352  f9b55000          LDRSH    r5,[r5,#0]  ; TZAS
000356  ea4f76e5          ASR      r6,r5,#31
00035a  eb056616          ADD      r6,r5,r6,LSR #24
00035e  ea4f2726          ASR      r7,r6,#8
000362  f88d7088          STRB     r7,[sp,#0x88]
;;;379    modbus_registers[85]=(char)(TZAS%256);
000366  f88d5089          STRB     r5,[sp,#0x89]
;;;380    modbus_registers[86]=(char)(TMAX/256);		//Πεγ44
00036a  4d42              LDR      r5,|L2.1140|
00036c  f9b55000          LDRSH    r5,[r5,#0]  ; TMAX
000370  ea4f76e5          ASR      r6,r5,#31
000374  eb056616          ADD      r6,r5,r6,LSR #24
000378  ea4f2726          ASR      r7,r6,#8
00037c  f88d708a          STRB     r7,[sp,#0x8a]
;;;381    modbus_registers[87]=(char)(TMAX%256);
000380  f88d508b          STRB     r5,[sp,#0x8b]
;;;382    modbus_registers[88]=(char)(TSIGN/256);		//Πεγ45
000384  4d3c              LDR      r5,|L2.1144|
000386  f9b55000          LDRSH    r5,[r5,#0]  ; TSIGN
00038a  ea4f76e5          ASR      r6,r5,#31
00038e  eb056616          ADD      r6,r5,r6,LSR #24
000392  ea4f2726          ASR      r7,r6,#8
000396  f88d708c          STRB     r7,[sp,#0x8c]
;;;383    modbus_registers[89]=(char)(TSIGN%256);
00039a  f88d508d          STRB     r5,[sp,#0x8d]
;;;384    modbus_registers[90]=(char)(TBATMAX/256);		//Πεγ46
00039e  4d37              LDR      r5,|L2.1148|
0003a0  f9b55000          LDRSH    r5,[r5,#0]  ; TBATMAX
0003a4  ea4f76e5          ASR      r6,r5,#31
0003a8  eb056616          ADD      r6,r5,r6,LSR #24
0003ac  ea4f2726          ASR      r7,r6,#8
0003b0  f88d708e          STRB     r7,[sp,#0x8e]
;;;385    modbus_registers[91]=(char)(TBATMAX%256);
0003b4  f88d508f          STRB     r5,[sp,#0x8f]
;;;386    modbus_registers[92]=(char)(TBATSIGN/256);		//Πεγ47
0003b8  4d31              LDR      r5,|L2.1152|
0003ba  f9b55000          LDRSH    r5,[r5,#0]  ; TBATSIGN
0003be  ea4f76e5          ASR      r6,r5,#31
0003c2  eb056616          ADD      r6,r5,r6,LSR #24
0003c6  ea4f2726          ASR      r7,r6,#8
0003ca  f88d7090          STRB     r7,[sp,#0x90]
;;;387    modbus_registers[93]=(char)(TBATSIGN%256);
0003ce  f88d5091          STRB     r5,[sp,#0x91]
;;;388    modbus_registers[94]=(char)(load_I/256);		//Πεγ48
0003d2  f88d3092          STRB     r3,[sp,#0x92]
;;;389    modbus_registers[95]=(char)(load_I%256);
0003d6  f88d4093          STRB     r4,[sp,#0x93]
;;;390    modbus_registers[96]=(char)(load_I/256);		//Πεγ49
0003da  f88d3094          STRB     r3,[sp,#0x94]
;;;391    modbus_registers[97]=(char)(load_I%256);
0003de  f88d4095          STRB     r4,[sp,#0x95]
;;;392    modbus_registers[98]=(char)(load_I/256);		//Πεγ50
0003e2  f88d3096          STRB     r3,[sp,#0x96]
;;;393    modbus_registers[99]=(char)(load_I%256);
0003e6  f88d4097          STRB     r4,[sp,#0x97]
;;;394    
;;;395    modbus_tx_buff[0]=adr;
0003ea  f88d0000          STRB     r0,[sp,#0]
;;;396    modbus_tx_buff[1]=func;
0003ee  f88d1001          STRB     r1,[sp,#1]
;;;397    modbus_tx_buff[2]=(char)(reg_adr/256);
0003f2  ea4f2012          LSR      r0,r2,#8
0003f6  f88d0002          STRB     r0,[sp,#2]
;;;398    modbus_tx_buff[3]=(char)(reg_adr%256);
0003fa  f88d2003          STRB     r2,[sp,#3]
;;;399    //modbus_tx_buff[4]=(char)(reg_quantity/256);
;;;400    //modbus_tx_buff[5]=(char)(reg_quantity%256);
;;;401    /*
;;;402    modbus_registers[0]=0x10;
;;;403    modbus_registers[1]=0x11;
;;;404    modbus_registers[2]=0x12;
;;;405    modbus_registers[3]=0x13;
;;;406    modbus_registers[4]=0x14;
;;;407    modbus_registers[5]=0x15;
;;;408    */
;;;409    
;;;410    mem_copy((char*)&modbus_tx_buff[4],(char*)&modbus_registers[(reg_adr-1)*2],2);
0003fe  a80d              ADD      r0,sp,#0x34
000400  e040              B        |L2.1156|
000402  0000              DCW      0x0000
                  |L2.1028|
                          DCD      load_U
                  |L2.1032|
                          DCD      load_I
                  |L2.1036|
                          DCD      Ib_ips_termokompensat
                  |L2.1040|
                          DCD      t_ext
                  |L2.1044|
                          DCD      net_Ua
                  |L2.1048|
                          DCD      net_Ub
                  |L2.1052|
                          DCD      net_Uc
                  |L2.1056|
                          DCD      net_F3
                  |L2.1060|
                          DCD      0x40024020
                  |L2.1064|
                          DCD      NUMIST
                  |L2.1068|
                          DCD      PAR
                  |L2.1072|
                          DCD      ZV_ON
                  |L2.1076|
                          DCD      TERMOKOMPENS
                  |L2.1080|
                          DCD      UBM_AV
                  |L2.1084|
                          DCD      TBAT
                  |L2.1088|
                          DCD      UMAX
                  |L2.1092|
                          DCD      UB20
                  |L2.1096|
                          DCD      ||DU||
                  |L2.1100|
                          DCD      UB0
                  |L2.1104|
                          DCD      USIGN
                  |L2.1108|
                          DCD      UMN
                  |L2.1112|
                          DCD      U0B
                  |L2.1116|
                          DCD      IKB
                  |L2.1120|
                          DCD      IZMAX
                  |L2.1124|
                          DCD      IMAX
                  |L2.1128|
                          DCD      IMIN
                  |L2.1132|
                          DCD      UVZ
                  |L2.1136|
                          DCD      TZAS
                  |L2.1140|
                          DCD      TMAX
                  |L2.1144|
                          DCD      TSIGN
                  |L2.1148|
                          DCD      TBATMAX
                  |L2.1152|
                          DCD      TBATSIGN
                  |L2.1156|
000484  f1a20201          SUB      r2,r2,#1
000488  eb000142          ADD      r1,r0,r2,LSL #1
00048c  f04f0202          MOV      r2,#2
000490  466d              MOV      r5,sp
000492  a801              ADD      r0,sp,#4
000494  f7fffffe          BL       mem_copy
;;;411    
;;;412    crc_temp=CRC16_2(modbus_tx_buff,6);
000498  2106              MOVS     r1,#6
00049a  4668              MOV      r0,sp
00049c  f7fffffe          BL       CRC16_2
;;;413    
;;;414    modbus_tx_buff[6]=crc_temp%256;
0004a0  f88d0006          STRB     r0,[sp,#6]
;;;415    modbus_tx_buff[7]=crc_temp/256;
0004a4  ea4f2010          LSR      r0,r0,#8
0004a8  f88d0007          STRB     r0,[sp,#7]
;;;416    
;;;417    for (i=0;i<8;i++)
0004ac  f04f0400          MOV      r4,#0
                  |L2.1200|
;;;418    	{
;;;419    	putchar0(modbus_tx_buff[i]);
0004b0  5d28              LDRB     r0,[r5,r4]
0004b2  f7fffffe          BL       putchar0
0004b6  f1040401          ADD      r4,r4,#1              ;417
0004ba  b2e4              UXTB     r4,r4                 ;417
0004bc  2c08              CMP      r4,#8                 ;417
0004be  d3f7              BCC      |L2.1200|
;;;420    	}
;;;421    for (i=0;i<8;i++)
0004c0  f04f0400          MOV      r4,#0
                  |L2.1220|
;;;422    	{
;;;423    	putchar_sc16is700(modbus_tx_buff[i]);
0004c4  5d28              LDRB     r0,[r5,r4]
0004c6  f7fffffe          BL       putchar_sc16is700
0004ca  f1040401          ADD      r4,r4,#1              ;421
0004ce  b2e4              UXTB     r4,r4                 ;421
0004d0  2c08              CMP      r4,#8                 ;421
0004d2  d3f7              BCC      |L2.1220|
;;;424    	}
;;;425    }
0004d4  b033              ADD      sp,sp,#0xcc
0004d6  bdf0              POP      {r4-r7,pc}
;;;426    
                          ENDP


                          AREA ||area_number.3||, CODE, READONLY, ALIGN=2

                          EXPORTAS ||area_number.3||, ||.text||
                  modbus_registers_transmit PROC
;;;285    //-----------------------------------------------
;;;286    void modbus_register_transmit(unsigned char adr,unsigned char func,unsigned short reg_adr)
000000  e92d41f0          PUSH     {r4-r8,lr}
;;;287    {
;;;288    char modbus_registers[150];
;;;289    char modbus_tx_buff[50];
;;;290    unsigned short crc_temp;
;;;291    char i;
;;;292    
;;;293    
;;;294    modbus_registers[0]=(char)(load_U/256);					//Πεγ1
000004  b0b2              SUB      sp,sp,#0xc8
000006  4698              MOV      r8,r3
000008  4bff              LDR      r3,|L3.1032|
00000a  f9b33000          LDRSH    r3,[r3,#0]  ; load_U
00000e  ea4f74e3          ASR      r4,r3,#31
000012  eb036414          ADD      r4,r3,r4,LSR #24
000016  ea4f2524          ASR      r5,r4,#8
;;;295    modbus_registers[1]=(char)(load_U%256);
00001a  f88d5064          STRB     r5,[sp,#0x64]
;;;296    modbus_registers[2]=(char)(load_I/256);					//Πεγ2
00001e  f88d3065          STRB     r3,[sp,#0x65]
000022  4bfa              LDR      r3,|L3.1036|
000024  f9b33000          LDRSH    r3,[r3,#0]  ; load_I
000028  ea4f74e3          ASR      r4,r3,#31
00002c  eb036514          ADD      r5,r3,r4,LSR #24
000030  f3c52407          UBFX     r4,r5,#8,#8
;;;297    modbus_registers[3]=(char)(load_I%256);
000034  f88d4066          STRB     r4,[sp,#0x66]
000038  b2dd              UXTB     r5,r3
;;;298    modbus_registers[4]=(char)(Ib_ips_termokompensat/256);		//Πεγ3
00003a  f88d5067          STRB     r5,[sp,#0x67]
00003e  4bf4              LDR      r3,|L3.1040|
000040  f9b36000          LDRSH    r6,[r3,#0]  ; Ib_ips_termokompensat
000044  ea4f73e6          ASR      r3,r6,#31
000048  eb066313          ADD      r3,r6,r3,LSR #24
00004c  ea4f2723          ASR      r7,r3,#8
;;;299    modbus_registers[5]=(char)(Ib_ips_termokompensat%256);
000050  f88d7068          STRB     r7,[sp,#0x68]
;;;300    modbus_registers[6]=(char)(t_ext[0]/256);				//Πεγ4
000054  4633              MOV      r3,r6
000056  f88d3069          STRB     r3,[sp,#0x69]
00005a  4bee              LDR      r3,|L3.1044|
00005c  f9b33000          LDRSH    r3,[r3,#0]  ; t_ext
000060  ea4f76e3          ASR      r6,r3,#31
000064  eb036616          ADD      r6,r3,r6,LSR #24
000068  ea4f2726          ASR      r7,r6,#8
;;;301    modbus_registers[7]=(char)(t_ext[0]%256);
00006c  f88d706a          STRB     r7,[sp,#0x6a]
;;;302    modbus_registers[8]=(char)(net_Ua/256);					//Πεγ5
000070  f88d306b          STRB     r3,[sp,#0x6b]
000074  4be8              LDR      r3,|L3.1048|
000076  f9b33000          LDRSH    r3,[r3,#0]  ; net_Ua
00007a  ea4f76e3          ASR      r6,r3,#31
00007e  eb036616          ADD      r6,r3,r6,LSR #24
000082  ea4f2726          ASR      r7,r6,#8
;;;303    modbus_registers[9]=(char)(net_Ua%256);		 	
000086  f88d706c          STRB     r7,[sp,#0x6c]
;;;304    modbus_registers[10]=(char)(net_Ub/256);				//Πεγ6
00008a  f88d306d          STRB     r3,[sp,#0x6d]
00008e  4be3              LDR      r3,|L3.1052|
000090  f9b33000          LDRSH    r3,[r3,#0]  ; net_Ub
000094  ea4f76e3          ASR      r6,r3,#31
000098  eb036616          ADD      r6,r3,r6,LSR #24
00009c  ea4f2726          ASR      r7,r6,#8
;;;305    modbus_registers[11]=(char)(net_Ub%256);
0000a0  f88d706e          STRB     r7,[sp,#0x6e]
;;;306    modbus_registers[12]=(char)(net_Uc/256);				//Πεγ7
0000a4  f88d306f          STRB     r3,[sp,#0x6f]
0000a8  4bdd              LDR      r3,|L3.1056|
0000aa  f9b33000          LDRSH    r3,[r3,#0]  ; net_Uc
0000ae  ea4f76e3          ASR      r6,r3,#31
0000b2  eb036616          ADD      r6,r3,r6,LSR #24
0000b6  ea4f2726          ASR      r7,r6,#8
;;;307    modbus_registers[13]=(char)(net_Uc%256);
0000ba  f88d7070          STRB     r7,[sp,#0x70]
;;;308    modbus_registers[14]=(char)(net_F3/256);				//Πεγ8
0000be  f88d3071          STRB     r3,[sp,#0x71]
0000c2  4bd8              LDR      r3,|L3.1060|
0000c4  f9b33000          LDRSH    r3,[r3,#0]  ; net_F3
0000c8  ea4f76e3          ASR      r6,r3,#31
0000cc  eb036616          ADD      r6,r3,r6,LSR #24
0000d0  ea4f2726          ASR      r7,r6,#8
;;;309    modbus_registers[15]=(char)(net_F3%256);
0000d4  f88d7072          STRB     r7,[sp,#0x72]
;;;310    modbus_registers[16]=(char)(load_I/256);				//Πεγ9
0000d8  f88d3073          STRB     r3,[sp,#0x73]
;;;311    modbus_registers[17]=(char)(load_I%256);
0000dc  f88d4074          STRB     r4,[sp,#0x74]
;;;312    modbus_registers[18]=(char)(load_I/256);				//Πεγ10
0000e0  f88d5075          STRB     r5,[sp,#0x75]
;;;313    modbus_registers[19]=(char)(load_I%256);
0000e4  f88d4076          STRB     r4,[sp,#0x76]
;;;314    modbus_registers[20]=(char)((LPC_RTC->YEAR)/256);			//Πεγ11
0000e8  f88d5077          STRB     r5,[sp,#0x77]
0000ec  4ece              LDR      r6,|L3.1064|
0000ee  8bb3              LDRH     r3,[r6,#0x1c]
0000f0  ea4f2313          LSR      r3,r3,#8
;;;315    modbus_registers[21]=(char)((LPC_RTC->YEAR)%256);
0000f4  f88d3078          STRB     r3,[sp,#0x78]
;;;316    modbus_registers[22]=(char)((LPC_RTC->MONTH)/256);		//Πεγ12
0000f8  8bb3              LDRH     r3,[r6,#0x1c]
0000fa  f88d3079          STRB     r3,[sp,#0x79]
0000fe  7e33              LDRB     r3,[r6,#0x18]
000100  f04f0300          MOV      r3,#0
;;;317    modbus_registers[23]=(char)((LPC_RTC->MONTH)%256);
000104  f88d307a          STRB     r3,[sp,#0x7a]
;;;318    modbus_registers[24]=(char)((LPC_RTC->DOM)/256);			//Πεγ13
000108  7e37              LDRB     r7,[r6,#0x18]
00010a  f88d707b          STRB     r7,[sp,#0x7b]
;;;319    modbus_registers[25]=(char)((LPC_RTC->DOM)%256);
00010e  7b37              LDRB     r7,[r6,#0xc]
000110  f88d307c          STRB     r3,[sp,#0x7c]
;;;320    modbus_registers[26]=(char)((LPC_RTC->HOUR)/256);			//Πεγ14
000114  7b37              LDRB     r7,[r6,#0xc]
000116  f88d707d          STRB     r7,[sp,#0x7d]
;;;321    modbus_registers[27]=(char)((LPC_RTC->HOUR)%256);
00011a  7a37              LDRB     r7,[r6,#8]
00011c  f88d307e          STRB     r3,[sp,#0x7e]
;;;322    modbus_registers[28]=(char)((LPC_RTC->MIN)/256);			//Πεγ15
000120  7a37              LDRB     r7,[r6,#8]
000122  f88d707f          STRB     r7,[sp,#0x7f]
;;;323    modbus_registers[29]=(char)((LPC_RTC->MIN)%256);
000126  7937              LDRB     r7,[r6,#4]
000128  f88d3080          STRB     r3,[sp,#0x80]
;;;324    modbus_registers[30]=(char)((LPC_RTC->SEC)/256);			//Πεγ16
00012c  7937              LDRB     r7,[r6,#4]
00012e  f88d7081          STRB     r7,[sp,#0x81]
;;;325    modbus_registers[31]=(char)((LPC_RTC->SEC)%256);
000132  7837              LDRB     r7,[r6,#0]
000134  f88d3082          STRB     r3,[sp,#0x82]
;;;326    modbus_registers[32]=(char)(load_I/256);				//Πεγ17
000138  7833              LDRB     r3,[r6,#0]
00013a  f88d3083          STRB     r3,[sp,#0x83]
;;;327    modbus_registers[33]=(char)(load_I%256);
00013e  f88d4084          STRB     r4,[sp,#0x84]
;;;328    modbus_registers[34]=(char)(load_I/256);				//Πεγ18
000142  f88d5085          STRB     r5,[sp,#0x85]
;;;329    modbus_registers[35]=(char)(load_I%256);
000146  f88d4086          STRB     r4,[sp,#0x86]
;;;330    modbus_registers[36]=(char)(load_I/256);		//Πεγ19
00014a  f88d5087          STRB     r5,[sp,#0x87]
;;;331    modbus_registers[37]=(char)(load_I%256);
00014e  f88d4088          STRB     r4,[sp,#0x88]
;;;332    modbus_registers[38]=(char)(NUMIST/256);		//Πεγ20
000152  f88d5089          STRB     r5,[sp,#0x89]
000156  4bb5              LDR      r3,|L3.1068|
000158  f9b33000          LDRSH    r3,[r3,#0]  ; NUMIST
00015c  ea4f76e3          ASR      r6,r3,#31
000160  eb036616          ADD      r6,r3,r6,LSR #24
000164  ea4f2726          ASR      r7,r6,#8
;;;333    modbus_registers[39]=(char)(NUMIST%256);
000168  f88d708a          STRB     r7,[sp,#0x8a]
;;;334    modbus_registers[40]=(char)(PAR/256);		//Πεγ21
00016c  f88d308b          STRB     r3,[sp,#0x8b]
000170  4baf              LDR      r3,|L3.1072|
000172  f9b33000          LDRSH    r3,[r3,#0]  ; PAR
000176  ea4f76e3          ASR      r6,r3,#31
00017a  eb036616          ADD      r6,r3,r6,LSR #24
00017e  ea4f2726          ASR      r7,r6,#8
;;;335    modbus_registers[41]=(char)(PAR%256);
000182  f88d708c          STRB     r7,[sp,#0x8c]
;;;336    modbus_registers[42]=(char)(ZV_ON/256);		//Πεγ22
000186  f88d308d          STRB     r3,[sp,#0x8d]
00018a  4baa              LDR      r3,|L3.1076|
00018c  f9b33000          LDRSH    r3,[r3,#0]  ; ZV_ON
000190  ea4f76e3          ASR      r6,r3,#31
000194  eb036616          ADD      r6,r3,r6,LSR #24
000198  ea4f2726          ASR      r7,r6,#8
;;;337    modbus_registers[43]=(char)(ZV_ON%256);
00019c  f88d708e          STRB     r7,[sp,#0x8e]
;;;338    modbus_registers[44]=(char)(TERMOKOMPENS/256);		//Πεγ23
0001a0  f88d308f          STRB     r3,[sp,#0x8f]
0001a4  4ba4              LDR      r3,|L3.1080|
0001a6  f9b33000          LDRSH    r3,[r3,#0]  ; TERMOKOMPENS
0001aa  ea4f76e3          ASR      r6,r3,#31
0001ae  eb036616          ADD      r6,r3,r6,LSR #24
0001b2  ea4f2726          ASR      r7,r6,#8
;;;339    modbus_registers[45]=(char)(TERMOKOMPENS%256);
0001b6  f88d7090          STRB     r7,[sp,#0x90]
;;;340    modbus_registers[46]=(char)(UBM_AV/256);		//Πεγ24
0001ba  f88d3091          STRB     r3,[sp,#0x91]
0001be  4b9f              LDR      r3,|L3.1084|
0001c0  f9b33000          LDRSH    r3,[r3,#0]  ; UBM_AV
0001c4  ea4f76e3          ASR      r6,r3,#31
0001c8  eb036616          ADD      r6,r3,r6,LSR #24
0001cc  ea4f2726          ASR      r7,r6,#8
;;;341    modbus_registers[47]=(char)(UBM_AV%256);
0001d0  f88d7092          STRB     r7,[sp,#0x92]
;;;342    modbus_registers[48]=(char)(load_I/256);		//Πεγ25
0001d4  f88d3093          STRB     r3,[sp,#0x93]
;;;343    modbus_registers[49]=(char)(load_I%256);
0001d8  f88d4094          STRB     r4,[sp,#0x94]
;;;344    modbus_registers[50]=(char)(load_I/256);		//Πεγ26
0001dc  f88d5095          STRB     r5,[sp,#0x95]
;;;345    modbus_registers[51]=(char)(load_I%256);
0001e0  f88d4096          STRB     r4,[sp,#0x96]
;;;346    modbus_registers[52]=(char)(load_I/256);		//Πεγ27
0001e4  f88d5097          STRB     r5,[sp,#0x97]
;;;347    modbus_registers[53]=(char)(load_I%256);
0001e8  f88d4098          STRB     r4,[sp,#0x98]
;;;348    modbus_registers[54]=(char)(load_I/256);		//Πεγ28
0001ec  f88d5099          STRB     r5,[sp,#0x99]
;;;349    modbus_registers[55]=(char)(load_I%256);
0001f0  f88d409a          STRB     r4,[sp,#0x9a]
;;;350    modbus_registers[56]=(char)(load_I/256);		//Πεγ29
0001f4  f88d509b          STRB     r5,[sp,#0x9b]
;;;351    modbus_registers[57]=(char)(load_I%256);
0001f8  f88d409c          STRB     r4,[sp,#0x9c]
;;;352    modbus_registers[58]=(char)(TBAT/256);			//Πεγ30
0001fc  f88d509d          STRB     r5,[sp,#0x9d]
000200  4b8f              LDR      r3,|L3.1088|
000202  f9b33000          LDRSH    r3,[r3,#0]  ; TBAT
000206  ea4f76e3          ASR      r6,r3,#31
00020a  eb036616          ADD      r6,r3,r6,LSR #24
00020e  ea4f2726          ASR      r7,r6,#8
;;;353    modbus_registers[59]=(char)(TBAT%256);
000212  f88d709e          STRB     r7,[sp,#0x9e]
;;;354    modbus_registers[60]=(char)(UMAX/256);			//Πεγ31
000216  f88d309f          STRB     r3,[sp,#0x9f]
00021a  4b8a              LDR      r3,|L3.1092|
00021c  f9b33000          LDRSH    r3,[r3,#0]  ; UMAX
000220  ea4f76e3          ASR      r6,r3,#31
000224  eb036616          ADD      r6,r3,r6,LSR #24
000228  ea4f2726          ASR      r7,r6,#8
;;;355    modbus_registers[61]=(char)(UMAX%256);
00022c  f88d70a0          STRB     r7,[sp,#0xa0]
;;;356    modbus_registers[62]=(char)((UB20-DU)/256);		//Πεγ32
000230  f88d30a1          STRB     r3,[sp,#0xa1]
000234  4b84              LDR      r3,|L3.1096|
000236  f9b36000          LDRSH    r6,[r3,#0]  ; UB20
00023a  4b84              LDR      r3,|L3.1100|
00023c  f9b33000          LDRSH    r3,[r3,#0]  ; DU
000240  eba60703          SUB      r7,r6,r3
000244  ea4f73e7          ASR      r3,r7,#31
000248  eb076313          ADD      r3,r7,r3,LSR #24
00024c  ea4f2c23          ASR      r12,r3,#8
;;;357    modbus_registers[63]=(char)((UB20-DU)%256);
000250  f88dc0a2          STRB     r12,[sp,#0xa2]
;;;358    modbus_registers[64]=(char)(UB0/256);			//Πεγ33
000254  463b              MOV      r3,r7
000256  f88d30a3          STRB     r3,[sp,#0xa3]
00025a  4b7d              LDR      r3,|L3.1104|
00025c  f9b37000          LDRSH    r7,[r3,#0]  ; UB0
000260  ea4f73e7          ASR      r3,r7,#31
000264  eb076313          ADD      r3,r7,r3,LSR #24
;;;359    modbus_registers[65]=(char)(UB0%256);
000268  ea4f2c23          ASR      r12,r3,#8
;;;360    modbus_registers[66]=(char)(UB20/256);			//Πεγ34
00026c  f88dc0a4          STRB     r12,[sp,#0xa4]
000270  463b              MOV      r3,r7
000272  f88d30a5          STRB     r3,[sp,#0xa5]
000276  ea4f73e6          ASR      r3,r6,#31
00027a  eb066313          ADD      r3,r6,r3,LSR #24
;;;361    modbus_registers[67]=(char)(UB20%256);
00027e  ea4f2723          ASR      r7,r3,#8
;;;362    modbus_registers[68]=(char)(USIGN/256);		//Πεγ35
000282  f88d70a6          STRB     r7,[sp,#0xa6]
000286  4633              MOV      r3,r6
000288  f88d30a7          STRB     r3,[sp,#0xa7]
00028c  4b71              LDR      r3,|L3.1108|
00028e  f9b33000          LDRSH    r3,[r3,#0]  ; USIGN
000292  ea4f76e3          ASR      r6,r3,#31
;;;363    modbus_registers[69]=(char)(USIGN%256);
000296  eb036616          ADD      r6,r3,r6,LSR #24
;;;364    modbus_registers[70]=(char)(UMN/256);		//Πεγ36
00029a  ea4f2726          ASR      r7,r6,#8
00029e  f88d70a8          STRB     r7,[sp,#0xa8]
0002a2  f88d30a9          STRB     r3,[sp,#0xa9]
0002a6  4b6c              LDR      r3,|L3.1112|
0002a8  f9b33000          LDRSH    r3,[r3,#0]  ; UMN
0002ac  ea4f76e3          ASR      r6,r3,#31
;;;365    modbus_registers[71]=(char)(UMN%256);
0002b0  eb036616          ADD      r6,r3,r6,LSR #24
;;;366    modbus_registers[72]=(char)(U0B/256);		//Πεγ37
0002b4  ea4f2726          ASR      r7,r6,#8
0002b8  f88d70aa          STRB     r7,[sp,#0xaa]
0002bc  f88d30ab          STRB     r3,[sp,#0xab]
0002c0  4b66              LDR      r3,|L3.1116|
0002c2  f9b33000          LDRSH    r3,[r3,#0]  ; U0B
0002c6  ea4f76e3          ASR      r6,r3,#31
;;;367    modbus_registers[73]=(char)(U0B%256);
0002ca  eb036616          ADD      r6,r3,r6,LSR #24
;;;368    modbus_registers[74]=(char)(IKB/256);		//Πεγ38
0002ce  ea4f2726          ASR      r7,r6,#8
0002d2  f88d70ac          STRB     r7,[sp,#0xac]
0002d6  f88d30ad          STRB     r3,[sp,#0xad]
0002da  4b61              LDR      r3,|L3.1120|
0002dc  f9b33000          LDRSH    r3,[r3,#0]  ; IKB
0002e0  ea4f76e3          ASR      r6,r3,#31
;;;369    modbus_registers[75]=(char)(IKB%256);
0002e4  eb036616          ADD      r6,r3,r6,LSR #24
;;;370    modbus_registers[76]=(char)(IZMAX/256);		//Πεγ39
0002e8  ea4f2726          ASR      r7,r6,#8
0002ec  f88d70ae          STRB     r7,[sp,#0xae]
0002f0  f88d30af          STRB     r3,[sp,#0xaf]
0002f4  4b5b              LDR      r3,|L3.1124|
0002f6  f9b33000          LDRSH    r3,[r3,#0]  ; IZMAX
0002fa  ea4f76e3          ASR      r6,r3,#31
;;;371    modbus_registers[77]=(char)(IZMAX%256);
0002fe  eb036616          ADD      r6,r3,r6,LSR #24
;;;372    modbus_registers[78]=(char)(IMAX/256);		//Πεγ40
000302  ea4f2726          ASR      r7,r6,#8
000306  f88d70b0          STRB     r7,[sp,#0xb0]
00030a  f88d30b1          STRB     r3,[sp,#0xb1]
00030e  4b56              LDR      r3,|L3.1128|
000310  f9b33000          LDRSH    r3,[r3,#0]  ; IMAX
000314  ea4f76e3          ASR      r6,r3,#31
;;;373    modbus_registers[79]=(char)(IMAX%256);
000318  eb036616          ADD      r6,r3,r6,LSR #24
;;;374    modbus_registers[80]=(char)(IMIN/256);		//Πεγ41
00031c  ea4f2726          ASR      r7,r6,#8
000320  f88d70b2          STRB     r7,[sp,#0xb2]
000324  f88d30b3          STRB     r3,[sp,#0xb3]
000328  4b50              LDR      r3,|L3.1132|
00032a  f9b33000          LDRSH    r3,[r3,#0]  ; IMIN
00032e  ea4f76e3          ASR      r6,r3,#31
;;;375    modbus_registers[81]=(char)(IMIN%256);
000332  eb036616          ADD      r6,r3,r6,LSR #24
;;;376    modbus_registers[82]=(char)(UVZ/256);		//Πεγ42
000336  ea4f2726          ASR      r7,r6,#8
00033a  f88d70b4          STRB     r7,[sp,#0xb4]
00033e  f88d30b5          STRB     r3,[sp,#0xb5]
000342  4b4b              LDR      r3,|L3.1136|
000344  f9b33000          LDRSH    r3,[r3,#0]  ; UVZ
000348  ea4f76e3          ASR      r6,r3,#31
;;;377    modbus_registers[83]=(char)(UVZ%256);
00034c  eb036616          ADD      r6,r3,r6,LSR #24
;;;378    modbus_registers[84]=(char)(TZAS/256);		//Πεγ43
000350  ea4f2726          ASR      r7,r6,#8
000354  f88d70b6          STRB     r7,[sp,#0xb6]
000358  f88d30b7          STRB     r3,[sp,#0xb7]
00035c  4b45              LDR      r3,|L3.1140|
00035e  f9b33000          LDRSH    r3,[r3,#0]  ; TZAS
000362  ea4f76e3          ASR      r6,r3,#31
;;;379    modbus_registers[85]=(char)(TZAS%256);
000366  eb036616          ADD      r6,r3,r6,LSR #24
;;;380    modbus_registers[86]=(char)(TMAX/256);		//Πεγ44
00036a  ea4f2726          ASR      r7,r6,#8
00036e  f88d70b8          STRB     r7,[sp,#0xb8]
000372  f88d30b9          STRB     r3,[sp,#0xb9]
000376  4b40              LDR      r3,|L3.1144|
000378  f9b33000          LDRSH    r3,[r3,#0]  ; TMAX
00037c  ea4f76e3          ASR      r6,r3,#31
;;;381    modbus_registers[87]=(char)(TMAX%256);
000380  eb036616          ADD      r6,r3,r6,LSR #24
;;;382    modbus_registers[88]=(char)(TSIGN/256);		//Πεγ45
000384  ea4f2726          ASR      r7,r6,#8
000388  f88d70ba          STRB     r7,[sp,#0xba]
00038c  f88d30bb          STRB     r3,[sp,#0xbb]
000390  4b3a              LDR      r3,|L3.1148|
000392  f9b33000          LDRSH    r3,[r3,#0]  ; TSIGN
000396  ea4f76e3          ASR      r6,r3,#31
;;;383    modbus_registers[89]=(char)(TSIGN%256);
00039a  eb036616          ADD      r6,r3,r6,LSR #24
;;;384    modbus_registers[90]=(char)(TBATMAX/256);		//Πεγ46
00039e  ea4f2726          ASR      r7,r6,#8
0003a2  f88d70bc          STRB     r7,[sp,#0xbc]
0003a6  f88d30bd          STRB     r3,[sp,#0xbd]
0003aa  4b35              LDR      r3,|L3.1152|
0003ac  f9b33000          LDRSH    r3,[r3,#0]  ; TBATMAX
0003b0  ea4f76e3          ASR      r6,r3,#31
;;;385    modbus_registers[91]=(char)(TBATMAX%256);
0003b4  eb036616          ADD      r6,r3,r6,LSR #24
;;;386    modbus_registers[92]=(char)(TBATSIGN/256);		//Πεγ47
0003b8  ea4f2726          ASR      r7,r6,#8
0003bc  f88d70be          STRB     r7,[sp,#0xbe]
0003c0  f88d30bf          STRB     r3,[sp,#0xbf]
0003c4  4b2f              LDR      r3,|L3.1156|
0003c6  f9b33000          LDRSH    r3,[r3,#0]  ; TBATSIGN
0003ca  ea4f76e3          ASR      r6,r3,#31
;;;387    modbus_registers[93]=(char)(TBATSIGN%256);
0003ce  eb036616          ADD      r6,r3,r6,LSR #24
;;;388    modbus_registers[94]=(char)(load_I/256);		//Πεγ48
0003d2  ea4f2726          ASR      r7,r6,#8
;;;389    modbus_registers[95]=(char)(load_I%256);
0003d6  f88d70c0          STRB     r7,[sp,#0xc0]
;;;390    modbus_registers[96]=(char)(load_I/256);		//Πεγ49
0003da  f88d30c1          STRB     r3,[sp,#0xc1]
;;;391    modbus_registers[97]=(char)(load_I%256);
0003de  f88d40c2          STRB     r4,[sp,#0xc2]
;;;392    modbus_registers[98]=(char)(load_I/256);		//Πεγ50
0003e2  f88d50c3          STRB     r5,[sp,#0xc3]
;;;393    modbus_registers[99]=(char)(load_I%256);
0003e6  f88d40c4          STRB     r4,[sp,#0xc4]
;;;394    
;;;395    modbus_tx_buff[0]=adr;
0003ea  f88d50c5          STRB     r5,[sp,#0xc5]
;;;396    modbus_tx_buff[1]=func;
0003ee  f88d40c6          STRB     r4,[sp,#0xc6]
;;;397    modbus_tx_buff[2]=(char)(reg_adr/256);
0003f2  f88d50c7          STRB     r5,[sp,#0xc7]
0003f6  f88d0000          STRB     r0,[sp,#0]
;;;398    modbus_tx_buff[3]=(char)(reg_adr%256);
0003fa  f88d1001          STRB     r1,[sp,#1]
;;;399    //modbus_tx_buff[4]=(char)(reg_quantity/256);
;;;400    //modbus_tx_buff[5]=(char)(reg_quantity%256);
;;;401    /*
;;;402    modbus_registers[0]=0x10;
;;;403    modbus_registers[1]=0x11;
;;;404    modbus_registers[2]=0x12;
;;;405    modbus_registers[3]=0x13;
;;;406    modbus_registers[4]=0x14;
;;;407    modbus_registers[5]=0x15;
;;;408    */
;;;409    
;;;410    mem_copy((char*)&modbus_tx_buff[4],(char*)&modbus_registers[(reg_adr-1)*2],2);
0003fe  ea4f0048          LSL      r0,r8,#1
000402  f88d0002          STRB     r0,[sp,#2]
000406  e03f              B        |L3.1160|
                  |L3.1032|
                          DCD      load_U
                  |L3.1036|
                          DCD      load_I
                  |L3.1040|
                          DCD      Ib_ips_termokompensat
                  |L3.1044|
                          DCD      t_ext
                  |L3.1048|
                          DCD      net_Ua
                  |L3.1052|
                          DCD      net_Ub
                  |L3.1056|
                          DCD      net_Uc
                  |L3.1060|
                          DCD      net_F3
                  |L3.1064|
                          DCD      0x40024020
                  |L3.1068|
                          DCD      NUMIST
                  |L3.1072|
                          DCD      PAR
                  |L3.1076|
                          DCD      ZV_ON
                  |L3.1080|
                          DCD      TERMOKOMPENS
                  |L3.1084|
                          DCD      UBM_AV
                  |L3.1088|
                          DCD      TBAT
                  |L3.1092|
                          DCD      UMAX
                  |L3.1096|
                          DCD      UB20
                  |L3.1100|
                          DCD      ||DU||
                  |L3.1104|
                          DCD      UB0
                  |L3.1108|
                          DCD      USIGN
                  |L3.1112|
                          DCD      UMN
                  |L3.1116|
                          DCD      U0B
                  |L3.1120|
                          DCD      IKB
                  |L3.1124|
                          DCD      IZMAX
                  |L3.1128|
                          DCD      IMAX
                  |L3.1132|
                          DCD      IMIN
                  |L3.1136|
                          DCD      UVZ
                  |L3.1140|
                          DCD      TZAS
                  |L3.1144|
                          DCD      TMAX
                  |L3.1148|
                          DCD      TSIGN
                  |L3.1152|
                          DCD      TBATMAX
                  |L3.1156|
                          DCD      TBATSIGN
                  |L3.1160|
000488  a919              ADD      r1,sp,#0x64
00048a  f1a20201          SUB      r2,r2,#1
00048e  eb010142          ADD      r1,r1,r2,LSL #1
000492  4602              MOV      r2,r0
000494  466d              MOV      r5,sp
000496  f10d0003          ADD      r0,sp,#3
;;;411    
;;;412    crc_temp=CRC16_2(modbus_tx_buff,6);
00049a  f7fffffe          BL       mem_copy
00049e  2003              MOVS     r0,#3
;;;413    
;;;414    modbus_tx_buff[6]=crc_temp%256;
0004a0  eb000048          ADD      r0,r0,r8,LSL #1
;;;415    modbus_tx_buff[7]=crc_temp/256;
0004a4  b201              SXTH     r1,r0
0004a6  4668              MOV      r0,sp
0004a8  f7fffffe          BL       CRC16_2
;;;416    
;;;417    for (i=0;i<8;i++)
0004ac  eb050148          ADD      r1,r5,r8,LSL #1
;;;418    	{
;;;419    	putchar0(modbus_tx_buff[i]);
0004b0  70c8              STRB     r0,[r1,#3]
0004b2  ea4f2010          LSR      r0,r0,#8
0004b6  7108              STRB     r0,[r1,#4]            ;417
0004b8  f04f0400          MOV      r4,#0                 ;417
                  |L3.1212|
0004bc  5d28              LDRB     r0,[r5,r4]            ;417
0004be  f7fffffe          BL       putchar0
;;;420    	}
;;;421    for (i=0;i<8;i++)
0004c2  f1040401          ADD      r4,r4,#1
;;;422    	{
;;;423    	putchar_sc16is700(modbus_tx_buff[i]);
0004c6  b2e4              UXTB     r4,r4
0004c8  2c0f              CMP      r4,#0xf
0004ca  d3f7              BCC      |L3.1212|
0004cc  f04f0400          MOV      r4,#0                 ;421
                  |L3.1232|
0004d0  5d28              LDRB     r0,[r5,r4]            ;421
0004d2  f7fffffe          BL       putchar_sc16is700
;;;424    	}
;;;425    }
0004d6  f1040401          ADD      r4,r4,#1
0004da  b2e4              UXTB     r4,r4
0004dc  2c0f              CMP      r4,#0xf
0004de  d3f7              BCC      |L3.1232|
0004e0  b032              ADD      sp,sp,#0xc8
0004e2  e8bd81f0          POP      {r4-r8,pc}
;;;426    
                          ENDP


                          AREA ||.bss||, DATA, NOINIT, ALIGN=0

                  modbus_buf
                          %        20

                          AREA ||area_number.6||, DATA, NOINIT, ALIGN=0

                          EXPORTAS ||area_number.6||, ||.bss||
                  modbus_rx_buffer
                          %        30
                  modbus_an_buffer
                          %        30

                          AREA ||.data||, DATA, ALIGN=1

                  modbus_crc16
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.9||, DATA, ALIGN=0

                          EXPORTAS ||area_number.9||, ||.data||
                  modbus_timeout_cnt
000000  00                DCB      0x00

                          AREA ||area_number.10||, DATA, ALIGN=1

                          EXPORTAS ||area_number.10||, ||.data||
                  bMODBUS_TIMEOUT
000000  00                DCB      0x00
                  modbus_rx_buffer_ptr
000001  00                DCB      0x00
                  modbus_rx_counter
000002  0000              DCB      0x00,0x00
                  modbus_plazma
000004  0000              DCB      0x00,0x00
                  modbus_plazma1
000006  0000              DCB      0x00,0x00
                  modbus_plazma2
000008  0000              DCB      0x00,0x00
                  modbus_plazma3
00000a  0000              DCB      0x00,0x00

                          AREA ||area_number.11||, DATA, ALIGN=1

                          EXPORTAS ||area_number.11||, ||.data||
                  modbus_rx_arg0
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.12||, DATA, ALIGN=1

                          EXPORTAS ||area_number.12||, ||.data||
                  modbus_rx_arg1
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.13||, DATA, ALIGN=1

                          EXPORTAS ||area_number.13||, ||.data||
                  modbus_rx_arg2
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.14||, DATA, ALIGN=1

                          EXPORTAS ||area_number.14||, ||.data||
                  modbus_rx_arg3
000000  0000              DCB      0x00,0x00
