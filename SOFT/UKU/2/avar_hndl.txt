; generated by ARM C/C++ Compiler, 4.1 [Build 644]
; commandline ArmCC [--list --debug -c --asm --interleave -o.\EXE\avar_hndl.o --asm_dir=.\ --list_dir=.\ --depend=.\EXE\avar_hndl.d --feedback=.\EXE\UKU_220_IPS_TERMOKOMPENSAT.fed --cpu=Cortex-M3 --apcs=interwork -O1 -IC:\Keil\ARM\CMSIS\Include -IC:\Keil\ARM\INC\NXP\LPC17xx -D__MICROLIB -DUKU_220_IPS_TERMOKOMPENSAT -DUKU2071x -DUKU_ZVU --omf_browse=.\EXE\avar_hndl.crf avar_hndl.c]
                          THUMB

                          AREA ||.text||, CODE, READONLY, ALIGN=2

                  avar_hndl PROC
;;;78     //-----------------------------------------------
;;;79     void avar_hndl(void)
000000  b530              PUSH     {r4,r5,lr}
;;;80     {
;;;81     //static unsigned avar_stat_old;
;;;82     char i;
;;;83     //unsigned avar_stat_new,avar_stat_offed;
;;;84     
;;;85     if(net_av)		SET_REG(avar_stat,1,0,1);
000002  48ff              LDR      r0,|L1.1024|
000004  4aff              LDR      r2,|L1.1028|
000006  7801              LDRB     r1,[r0,#0]  ; net_av
000008  6810              LDR      r0,[r2,#0]
00000a  b119              CBZ      r1,|L1.20|
00000c  f0400001          ORR      r0,r0,#1
000010  6010              STR      r0,[r2,#0]  ; avar_stat
000012  e002              B        |L1.26|
                  |L1.20|
;;;86     else	   			SET_REG(avar_stat,0,0,1);
000014  f0200001          BIC      r0,r0,#1
000018  6010              STR      r0,[r2,#0]  ; avar_stat
                  |L1.26|
;;;87     #ifndef UKU_220_IPS_TERMOKOMPENSAT //o_10
;;;88     for(i=0;i<2;i++)
;;;89     	{
;;;90     	if(bat[i]._av&3)	SET_REG(avar_stat,1,1+i,1);
;;;91     	else	   			SET_REG(avar_stat,0,1+i,1);
;;;92     	}
;;;93     #endif //o_10
;;;94     for(i=0;i<18;i++)
00001a  f04f0000          MOV      r0,#0
;;;95     	{
;;;96     	if(bps[i]._av&0xef)	SET_REG(avar_stat,1,3+i,1);
00001e  4dfa              LDR      r5,|L1.1032|
000020  f04f0301          MOV      r3,#1
                  |L1.36|
000024  eb0001c0          ADD      r1,r0,r0,LSL #3
000028  eb011100          ADD      r1,r1,r0,LSL #4
00002c  eb050181          ADD      r1,r5,r1,LSL #2
000030  7849              LDRB     r1,[r1,#1]
000032  f0110fef          TST      r1,#0xef
000036  d00a              BEQ      |L1.78|
000038  f1000403          ADD      r4,r0,#3
00003c  fa03f104          LSL      r1,r3,r4
000040  6814              LDR      r4,[r2,#0]  ; avar_stat
000042  ea240401          BIC      r4,r4,r1
000046  ea440401          ORR      r4,r4,r1
00004a  6014              STR      r4,[r2,#0]  ; avar_stat
00004c  e007              B        |L1.94|
                  |L1.78|
;;;97     	else	   		SET_REG(avar_stat,0,3+i,1);
00004e  f1000103          ADD      r1,r0,#3
000052  6814              LDR      r4,[r2,#0]  ; avar_stat
000054  fa03f101          LSL      r1,r3,r1
000058  ea240401          BIC      r4,r4,r1
00005c  6014              STR      r4,[r2,#0]  ; avar_stat
                  |L1.94|
00005e  f1000001          ADD      r0,r0,#1              ;94
000062  b2c0              UXTB     r0,r0                 ;94
000064  2812              CMP      r0,#0x12              ;94
000066  d3dd              BCC      |L1.36|
;;;98     	}
;;;99     
;;;100    /*for(i=0;i<6;i++)
;;;101    	{
;;;102    	if(av_inv[i])	SET_REG(avar_stat,1,15+i,1);
;;;103    	else	   		SET_REG(avar_stat,0,15+i,1);
;;;104    	}*/
;;;105    
;;;106    /*for(i=0;i<4;i++)
;;;107    	{
;;;108    	if(av_dt[i])	SET_REG(avar_stat,1,21+i,1);
;;;109    	else	   		SET_REG(avar_stat,0,21+i,1);
;;;110    	}  */
;;;111    for(i=0;i<4;i++)
000068  f04f0000          MOV      r0,#0
;;;112    	{
;;;113    	if(sk_av_stat[i]==sasON)	SET_REG(avar_stat,1,24+i,1);
00006c  4de7              LDR      r5,|L1.1036|
                  |L1.110|
00006e  5c29              LDRB     r1,[r5,r0]
000070  2901              CMP      r1,#1
000072  d036              BEQ      |L1.226|
;;;114    	else	   		SET_REG(avar_stat,0,24+i,1);
000074  f1000118          ADD      r1,r0,#0x18
000078  fa03f401          LSL      r4,r3,r1
00007c  6811              LDR      r1,[r2,#0]  ; avar_stat
00007e  ea210104          BIC      r1,r1,r4
000082  6011              STR      r1,[r2,#0]  ; avar_stat
                  |L1.132|
000084  f1000001          ADD      r0,r0,#1              ;111
000088  b2c0              UXTB     r0,r0                 ;111
00008a  2804              CMP      r0,#4                 ;111
00008c  d3ef              BCC      |L1.110|
;;;115    	}
;;;116    
;;;117    //if(uout_av)			SET_REG(avar_stat,1,28,1);
;;;118    //else	   			SET_REG(avar_stat,0,28,1);
;;;119    
;;;120    
;;;121    avar_stat_new=(avar_stat^avar_stat_old)&avar_stat;
00008e  6893              LDR      r3,[r2,#8]  ; avar_stat_old
000090  6810              LDR      r0,[r2,#0]  ; avar_stat
000092  ea200103          BIC      r1,r0,r3
000096  60d1              STR      r1,[r2,#0xc]  ; avar_stat_new
;;;122    
;;;123    avar_ind_stat|=avar_stat_new;
000098  6854              LDR      r4,[r2,#4]  ; avar_ind_stat
00009a  ea440401          ORR      r4,r4,r1
00009e  6054              STR      r4,[r2,#4]  ; avar_ind_stat
;;;124    
;;;125    if((SK_ZVUK_EN[0])) avar_ind_stat&=(~(1UL<<24));
0000a0  49db              LDR      r1,|L1.1040|
0000a2  880d              LDRH     r5,[r1,#0]  ; SK_ZVUK_EN
0000a4  b115              CBZ      r5,|L1.172|
0000a6  f0247480          BIC      r4,r4,#0x1000000
0000aa  6054              STR      r4,[r2,#4]  ; avar_ind_stat
                  |L1.172|
;;;126    if((SK_ZVUK_EN[1])) avar_ind_stat&=(~(1UL<<25));
0000ac  884c              LDRH     r4,[r1,#2]  ; SK_ZVUK_EN
0000ae  b11c              CBZ      r4,|L1.184|
0000b0  6854              LDR      r4,[r2,#4]  ; avar_ind_stat
0000b2  f0247400          BIC      r4,r4,#0x2000000
0000b6  6054              STR      r4,[r2,#4]  ; avar_ind_stat
                  |L1.184|
;;;127    if((SK_ZVUK_EN[2])) avar_ind_stat&=(~(1UL<<26));
0000b8  888c              LDRH     r4,[r1,#4]  ; SK_ZVUK_EN
0000ba  b11c              CBZ      r4,|L1.196|
0000bc  6854              LDR      r4,[r2,#4]  ; avar_ind_stat
0000be  f0246480          BIC      r4,r4,#0x4000000
0000c2  6054              STR      r4,[r2,#4]  ; avar_ind_stat
                  |L1.196|
;;;128    if((SK_ZVUK_EN[3])) avar_ind_stat&=(~(1UL<<27));	
0000c4  88c9              LDRH     r1,[r1,#6]  ; SK_ZVUK_EN
0000c6  b119              CBZ      r1,|L1.208|
0000c8  6851              LDR      r1,[r2,#4]  ; avar_ind_stat
0000ca  f0216100          BIC      r1,r1,#0x8000000
0000ce  6051              STR      r1,[r2,#4]  ; avar_ind_stat
                  |L1.208|
;;;129    
;;;130    
;;;131    avar_stat_offed=~((avar_stat^avar_stat_old)&avar_stat_old);
0000d0  ea230300          BIC      r3,r3,r0
0000d4  ea6f0103          MVN      r1,r3
0000d8  6111              STR      r1,[r2,#0x10]  ; avar_stat_offed
;;;132    
;;;133    if(!AV_OFF_AVT)avar_stat_offed|=0xeffffffe;
0000da  4bce              LDR      r3,|L1.1044|
0000dc  881b              LDRH     r3,[r3,#0]  ; AV_OFF_AVT
0000de  b15b              CBZ      r3,|L1.248|
0000e0  e00e              B        |L1.256|
                  |L1.226|
0000e2  f1000418          ADD      r4,r0,#0x18           ;113
0000e6  fa03f104          LSL      r1,r3,r4              ;113
0000ea  6814              LDR      r4,[r2,#0]            ;113  ; avar_stat
0000ec  ea240401          BIC      r4,r4,r1              ;113
0000f0  ea440401          ORR      r4,r4,r1              ;113
0000f4  6014              STR      r4,[r2,#0]            ;113  ; avar_stat
0000f6  e7c5              B        |L1.132|
                  |L1.248|
0000f8  4bc7              LDR      r3,|L1.1048|
0000fa  ea410103          ORR      r1,r1,r3
0000fe  6111              STR      r1,[r2,#0x10]  ; avar_stat_offed
                  |L1.256|
;;;134    
;;;135    avar_ind_stat&=avar_stat_offed; 
000100  6913              LDR      r3,[r2,#0x10]  ; avar_stat_offed
000102  6851              LDR      r1,[r2,#4]  ; avar_ind_stat
000104  ea010103          AND      r1,r1,r3
000108  6051              STR      r1,[r2,#4]  ; avar_ind_stat
;;;136    
;;;137    avar_stat_old=avar_stat;
00010a  6090              STR      r0,[r2,#8]  ; avar_stat_old
;;;138    
;;;139    //oleg_start
;;;140    
;;;141    
;;;142    
;;;143    rki_avar1_stat=(sk_alarm<<8)|(status_izm_r&0x3F);
00010c  48c3              LDR      r0,|L1.1052|
00010e  49c4              LDR      r1,|L1.1056|
000110  8800              LDRH     r0,[r0,#0]  ; status_izm_r
000112  6809              LDR      r1,[r1,#0]  ; sk_alarm
000114  f000003f          AND      r0,r0,#0x3f
000118  ea402001          ORR      r0,r0,r1,LSL #8
00011c  6150              STR      r0,[r2,#0x14]  ; rki_avar1_stat
;;;144    rki_avar1_stat_new=(rki_avar1_stat^rki_avar1_stat_old)&rki_avar1_stat;
00011e  69d3              LDR      r3,[r2,#0x1c]  ; rki_avar1_stat_old
000120  ea200103          BIC      r1,r0,r3
000124  6211              STR      r1,[r2,#0x20]  ; rki_avar1_stat_new
;;;145    rki_avar1_ind_stat|=rki_avar1_stat_new;
000126  6994              LDR      r4,[r2,#0x18]  ; rki_avar1_ind_stat
000128  ea440401          ORR      r4,r4,r1
;;;146    rki_avar1_stat_offed=~((rki_avar1_stat^rki_avar1_stat_old)&rki_avar1_stat_old);
00012c  ea230300          BIC      r3,r3,r0
000130  ea6f0103          MVN      r1,r3
000134  6251              STR      r1,[r2,#0x24]  ; rki_avar1_stat_offed
;;;147    rki_avar1_ind_stat&=rki_avar1_stat_offed;
000136  ea040401          AND      r4,r4,r1
00013a  6194              STR      r4,[r2,#0x18]  ; rki_avar1_ind_stat
;;;148    rki_avar1_stat_old=rki_avar1_stat;
00013c  61d0              STR      r0,[r2,#0x1c]  ; rki_avar1_stat_old
;;;149    /*
;;;150    rki_avarI1_stat=status_di1;
;;;151    rki_avarI1_stat_new=(rki_avarI1_stat^rki_avarI1_stat_old)&rki_avarI1_stat;
;;;152    rki_avarI1_ind_stat|=rki_avarI1_stat_new;
;;;153    rki_avarI1_stat_offed=~((rki_avarI1_stat^rki_avarI1_stat_old)&rki_avarI1_stat_old);
;;;154    rki_avarI1_ind_stat&=rki_avarI1_stat_offed;
;;;155    rki_avarI1_stat_old=rki_avarI1_stat;
;;;156    
;;;157    rki_avarI2_stat=status_di2;
;;;158    rki_avarI2_stat_new=(rki_avarI2_stat^rki_avarI2_stat_old)&rki_avarI2_stat;
;;;159    rki_avarI2_ind_stat|=rki_avarI2_stat_new;
;;;160    rki_avarI2_stat_offed=~((rki_avarI2_stat^rki_avarI2_stat_old)&rki_avarI2_stat_old);
;;;161    rki_avarI2_ind_stat&=rki_avarI2_stat_offed;
;;;162    rki_avarI2_stat_old=rki_avarI2_stat;
;;;163    */
;;;164    //oleg_end
;;;165    }
00013e  bd30              POP      {r4,r5,pc}
;;;166    
                          ENDP

                  reload_hndl PROC
;;;167    //-----------------------------------------------
;;;168    void reload_hndl(void)
000140  b5f8              PUSH     {r3-r7,lr}
;;;169    {
;;;170    
;;;171    char data[4];
;;;172    unsigned int event_ptr,lc640_adr/*,event_ptr_find*/,event_cnt;
;;;173    
;;;174    event_ptr=lc640_read_int(PTR_EVENT_LOG);
000142  f44f6560          MOV      r5,#0xe00
000146  4628              MOV      r0,r5
000148  f7fffffe          BL       lc640_read_int
;;;175    event_ptr++;	
00014c  f1000001          ADD      r0,r0,#1
000150  4604              MOV      r4,r0
;;;176    if(event_ptr>63)event_ptr=0;	
000152  2c3f              CMP      r4,#0x3f
000154  d901              BLS      |L1.346|
000156  f04f0400          MOV      r4,#0
                  |L1.346|
;;;177    lc640_write_int(PTR_EVENT_LOG,event_ptr);	
00015a  b221              SXTH     r1,r4
00015c  4628              MOV      r0,r5
00015e  f7fffffe          BL       lc640_write_int
;;;178    	
;;;179    event_cnt=lc640_read_int(CNT_EVENT_LOG);
000162  f6406602          MOV      r6,#0xe02
000166  4630              MOV      r0,r6
000168  f7fffffe          BL       lc640_read_int
;;;180    if(event_cnt!=63)event_cnt=event_ptr;
00016c  283f              CMP      r0,#0x3f
00016e  d000              BEQ      |L1.370|
000170  4620              MOV      r0,r4
                  |L1.370|
;;;181    lc640_write_int(CNT_EVENT_LOG,event_cnt); 
000172  b201              SXTH     r1,r0
000174  4630              MOV      r0,r6
000176  f7fffffe          BL       lc640_write_int
;;;182    	
;;;183    lc640_adr=EVENT_LOG+(lc640_read_int(PTR_EVENT_LOG)*32);
00017a  4628              MOV      r0,r5
00017c  f7fffffe          BL       lc640_read_int
000180  f44f6180          MOV      r1,#0x400
000184  eb011440          ADD      r4,r1,r0,LSL #5
;;;184    	
;;;185    data[0]='U';
000188  f04f0055          MOV      r0,#0x55
00018c  f88d0000          STRB     r0,[sp,#0]
;;;186    data[1]=0;
000190  f04f0600          MOV      r6,#0
000194  f88d6001          STRB     r6,[sp,#1]
;;;187    data[2]='R';
000198  f04f0052          MOV      r0,#0x52
00019c  f88d0002          STRB     r0,[sp,#2]
;;;188    data[3]=0;
0001a0  f88d6003          STRB     r6,[sp,#3]
;;;189    lc640_write_long_ptr(lc640_adr,data);
0001a4  4669              MOV      r1,sp
0001a6  4620              MOV      r0,r4
0001a8  f7fffffe          BL       lc640_write_long_ptr
;;;190    
;;;191    data[0]=0;
;;;192    data[1]=0;
;;;193    data[2]=0;
;;;194    data[3]=0;
0001ac  9600              STR      r6,[sp,#0]
;;;195    lc640_write_long_ptr(lc640_adr+4,data);
0001ae  4669              MOV      r1,sp
0001b0  1d20              ADDS     r0,r4,#4
0001b2  f7fffffe          BL       lc640_write_long_ptr
;;;196    
;;;197    data[0]=LPC_RTC->YEAR;
0001b6  4d9b              LDR      r5,|L1.1060|
0001b8  8ba8              LDRH     r0,[r5,#0x1c]
0001ba  f88d0000          STRB     r0,[sp,#0]
;;;198    data[1]=LPC_RTC->MONTH;
0001be  7e28              LDRB     r0,[r5,#0x18]
0001c0  f88d0001          STRB     r0,[sp,#1]
;;;199    data[2]=LPC_RTC->DOM;
0001c4  7b28              LDRB     r0,[r5,#0xc]
0001c6  f88d0002          STRB     r0,[sp,#2]
;;;200    data[3]=0;
0001ca  f88d6003          STRB     r6,[sp,#3]
;;;201    lc640_write_long_ptr(lc640_adr+8,data);
0001ce  4669              MOV      r1,sp
0001d0  f1040008          ADD      r0,r4,#8
0001d4  f7fffffe          BL       lc640_write_long_ptr
;;;202    
;;;203    data[0]=LPC_RTC->HOUR;
0001d8  7a28              LDRB     r0,[r5,#8]
0001da  f88d0000          STRB     r0,[sp,#0]
;;;204    data[1]=LPC_RTC->MIN;
0001de  7928              LDRB     r0,[r5,#4]
0001e0  f88d0001          STRB     r0,[sp,#1]
;;;205    data[2]=LPC_RTC->SEC;
0001e4  7828              LDRB     r0,[r5,#0]
0001e6  f88d0002          STRB     r0,[sp,#2]
;;;206    data[3]=LPC_SC->RSID;
0001ea  488f              LDR      r0,|L1.1064|
0001ec  f8d00180          LDR      r0,[r0,#0x180]
0001f0  f88d0003          STRB     r0,[sp,#3]
;;;207    
;;;208    lc640_write_long_ptr(lc640_adr+12,data);
0001f4  4669              MOV      r1,sp
0001f6  f104000c          ADD      r0,r4,#0xc
0001fa  f7fffffe          BL       lc640_write_long_ptr
;;;209    	
;;;210    data[0]='A';
0001fe  f04f0541          MOV      r5,#0x41
000202  f88d5000          STRB     r5,[sp,#0]
;;;211    data[1]='A';
000206  f88d5001          STRB     r5,[sp,#1]
;;;212    data[2]='A';
00020a  f88d5002          STRB     r5,[sp,#2]
;;;213    data[3]='A';
00020e  f88d5003          STRB     r5,[sp,#3]
;;;214    lc640_write_long_ptr(lc640_adr+16,data);
000212  4669              MOV      r1,sp
000214  f1040010          ADD      r0,r4,#0x10
000218  f7fffffe          BL       lc640_write_long_ptr
;;;215    	
;;;216    data[0]='A';
00021c  f88d5000          STRB     r5,[sp,#0]
;;;217    data[1]='A';
000220  f88d5001          STRB     r5,[sp,#1]
;;;218    data[2]='A';
000224  f88d5002          STRB     r5,[sp,#2]
;;;219    data[3]='A';
000228  f88d5003          STRB     r5,[sp,#3]
;;;220    lc640_write_long_ptr(lc640_adr+20,data);
00022c  4669              MOV      r1,sp
00022e  f1040014          ADD      r0,r4,#0x14
000232  f7fffffe          BL       lc640_write_long_ptr
;;;221    	
;;;222    data[0]='A';
000236  f88d5000          STRB     r5,[sp,#0]
;;;223    data[1]='A';
00023a  f88d5001          STRB     r5,[sp,#1]
;;;224    data[2]='A';
00023e  f88d5002          STRB     r5,[sp,#2]
;;;225    data[3]='A';
000242  f88d5003          STRB     r5,[sp,#3]
;;;226    lc640_write_long_ptr(lc640_adr+24,data);
000246  4669              MOV      r1,sp
000248  f1040018          ADD      r0,r4,#0x18
00024c  f7fffffe          BL       lc640_write_long_ptr
;;;227    	
;;;228    data[0]='A';
000250  f88d5000          STRB     r5,[sp,#0]
;;;229    data[1]='A';
000254  f88d5001          STRB     r5,[sp,#1]
;;;230    data[2]='A';
000258  f88d5002          STRB     r5,[sp,#2]
;;;231    data[3]='A';
00025c  f88d5003          STRB     r5,[sp,#3]
;;;232    lc640_write_long_ptr(lc640_adr+28,data);				
000260  4669              MOV      r1,sp
000262  f104001c          ADD      r0,r4,#0x1c
000266  f7fffffe          BL       lc640_write_long_ptr
;;;233    	
;;;234    	
;;;235    }
00026a  bdf8              POP      {r3-r7,pc}
;;;236    
                          ENDP

                  avar_unet_hndl PROC
;;;237    //-----------------------------------------------
;;;238    void avar_unet_hndl(char in)
00026c  e92d4ff8          PUSH     {r3-r11,lr}
;;;239    {
000270  4604              MOV      r4,r0
;;;240    
;;;241    char data[4];
;;;242    unsigned int event_ptr,lc640_adr,event_ptr_find,event_cnt;
;;;243    
;;;244    
;;;245    if(in==1)
;;;246    	{
;;;247    	net_av|=1; //o_10
000272  4963              LDR      r1,|L1.1024|
;;;248    	net_av_2min_timer=1200;
;;;249    
;;;250    	//beep_init(0x01L,'O');
;;;251    	//a.av.bAN=1;
;;;252    
;;;253    
;;;254    	//beep_init(0x33333333,'A');
;;;255    	 
;;;256    	event_ptr=lc640_read_int(PTR_EVENT_LOG);
;;;257    	event_ptr++;	
;;;258    	if(event_ptr>63)event_ptr=0;	
;;;259    	lc640_write_int(PTR_EVENT_LOG,event_ptr);	
;;;260    	
;;;261         event_cnt=lc640_read_int(CNT_EVENT_LOG);
;;;262    	if(event_cnt!=63)event_cnt=event_ptr;
;;;263    	lc640_write_int(CNT_EVENT_LOG,event_cnt); 
;;;264    	
;;;265    	lc640_adr=EVENT_LOG+(lc640_read_int(PTR_EVENT_LOG)*32);
;;;266    	
;;;267    	data[0]='P';
;;;268    	data[1]=0;
;;;269    	data[2]='A';
;;;270    	data[3]=0;
;;;271    	lc640_write_long_ptr(lc640_adr,data);
;;;272    
;;;273    	data[0]=0;//*((char*)&Unet_store);
;;;274    	data[1]=0;//*(((char*)&Unet_store)+1);
;;;275    	data[2]=0;
;;;276    	data[3]=0;
;;;277    	lc640_write_long_ptr(lc640_adr+4,data);
;;;278    
;;;279    	data[0]=LPC_RTC->YEAR;
000274  4d6d              LDR      r5,|L1.1068|
000276  f04f0600          MOV      r6,#0                 ;258
00027a  7808              LDRB     r0,[r1,#0]            ;247
00027c  f04f0b50          MOV      r11,#0x50             ;267
000280  f04f0841          MOV      r8,#0x41              ;269
000284  f44f6260          MOV      r2,#0xe00             ;256
000288  f6406a02          MOV      r10,#0xe02            ;261
00028c  f44f6780          MOV      r7,#0x400             ;265
000290  2c01              CMP      r4,#1                 ;245
000292  d008              BEQ      |L1.678|
;;;280    	data[1]=LPC_RTC->MONTH;
;;;281    	data[2]=LPC_RTC->DOM;
;;;282    	data[3]=0;
;;;283    	lc640_write_long_ptr(lc640_adr+8,data);
;;;284    
;;;285    	data[0]=LPC_RTC->HOUR;
;;;286    	data[1]=LPC_RTC->MIN;
;;;287    	data[2]=LPC_RTC->SEC;
;;;288    	data[3]=0;
;;;289    	lc640_write_long_ptr(lc640_adr+12,data);
;;;290    	
;;;291    	data[0]='A';
;;;292    	data[1]='A';
;;;293    	data[2]='A';
;;;294    	data[3]='A';
;;;295    	lc640_write_long_ptr(lc640_adr+16,data);
;;;296    	
;;;297    	data[0]='A';
;;;298    	data[1]='A';
;;;299    	data[2]='A';
;;;300    	data[3]='A';
;;;301    	lc640_write_long_ptr(lc640_adr+20,data);
;;;302    	
;;;303    	data[0]='A';
;;;304    	data[1]='A';
;;;305    	data[2]='A';
;;;306    	data[3]='A';
;;;307    	lc640_write_long_ptr(lc640_adr+24,data);
;;;308    	
;;;309    	data[0]='A';
;;;310    	data[1]='A';
;;;311    	data[2]='A';
;;;312    	data[3]='A';
;;;313    	lc640_write_long_ptr(lc640_adr+28,data);				
;;;314    	
;;;315    /*	memo_out0[0]=0x55;
;;;316         memo_out0[1]=0x00+2;
;;;317         memo_out0[2]=1;
;;;318         memo_out0[3]=0x0b;
;;;319         memo_out0[4]=0x55;
;;;320         memo_out0[5]=0x55; 
;;;321         	
;;;322         memo_out0[6]=crc_87(memo_out0,6);
;;;323    	memo_out0[7]=crc_95(memo_out0,6);
;;;324         usart_out_adr0(memo_out0,8); 
;;;325    	*/
;;;326    	snmp_trap_send("Main power alarm, voltage reduced",2,1,0);
;;;327    	}
;;;328    
;;;329    else if(in==2)
;;;330    	{
;;;331    	net_av|=2;	  //o_10
;;;332    
;;;333    	//beep_init(0x01L,'O');
;;;334    	//a.av.bAN=1;
;;;335    
;;;336    
;;;337    	//beep_init(0x33333333,'A');
;;;338    	 
;;;339    	event_ptr=lc640_read_int(PTR_EVENT_LOG);
;;;340    	event_ptr++;	
;;;341    	if(event_ptr>63)event_ptr=0;	
;;;342    	lc640_write_int(PTR_EVENT_LOG,event_ptr);	
;;;343    	
;;;344         event_cnt=lc640_read_int(CNT_EVENT_LOG);
;;;345    	if(event_cnt!=63)event_cnt=event_ptr;
;;;346    	lc640_write_int(CNT_EVENT_LOG,event_cnt); 
;;;347    	
;;;348    	lc640_adr=EVENT_LOG+(lc640_read_int(PTR_EVENT_LOG)*32);
;;;349    	
;;;350    	data[0]='P';
;;;351    	data[1]=0;
;;;352    	data[2]='B';
000294  f04f0942          MOV      r9,#0x42
000298  2c02              CMP      r4,#2                 ;329
00029a  d07d              BEQ      |L1.920|
;;;353    	data[3]=0;
;;;354    	lc640_write_long_ptr(lc640_adr,data);
;;;355    
;;;356    	data[0]=0;//*((char*)&Unet_store);
;;;357    	data[1]=0;//*(((char*)&Unet_store)+1);
;;;358    	data[2]=0;
;;;359    	data[3]=0;
;;;360    	lc640_write_long_ptr(lc640_adr+4,data);
;;;361    
;;;362    	data[0]=LPC_RTC->YEAR;
;;;363    	data[1]=LPC_RTC->MONTH;
;;;364    	data[2]=LPC_RTC->DOM;
;;;365    	data[3]=0;
;;;366    	lc640_write_long_ptr(lc640_adr+8,data);
;;;367    
;;;368    	data[0]=LPC_RTC->HOUR;
;;;369    	data[1]=LPC_RTC->MIN;
;;;370    	data[2]=LPC_RTC->SEC;
;;;371    	data[3]=0;
;;;372    	lc640_write_long_ptr(lc640_adr+12,data);
;;;373    	
;;;374    	data[0]='A';
;;;375    	data[1]='A';
;;;376    	data[2]='A';
;;;377    	data[3]='A';
;;;378    	lc640_write_long_ptr(lc640_adr+16,data);
;;;379    	
;;;380    	data[0]='A';
;;;381    	data[1]='A';
;;;382    	data[2]='A';
;;;383    	data[3]='A';
;;;384    	lc640_write_long_ptr(lc640_adr+20,data);
;;;385    	
;;;386    	data[0]='A';
;;;387    	data[1]='A';
;;;388    	data[2]='A';
;;;389    	data[3]='A';
;;;390    	lc640_write_long_ptr(lc640_adr+24,data);
;;;391    	
;;;392    	data[0]='A';
;;;393    	data[1]='A';
;;;394    	data[2]='A';
;;;395    	data[3]='A';
;;;396    	lc640_write_long_ptr(lc640_adr+28,data);				
;;;397    	
;;;398    	snmp_trap_send("Main power alarm, voltage increased",2,2,0);
;;;399    	}
;;;400    //o_10_s
;;;401    else if(in==0 || in==4)	
00029c  2c00              CMP      r4,#0
                  |L1.670|
00029e  d07c              BEQ      |L1.922|
0002a0  2c04              CMP      r4,#4
0002a2  d0fc              BEQ      |L1.670|
0002a4  e1fe              B        |L1.1700|
                  |L1.678|
0002a6  f0400001          ORR      r0,r0,#1              ;247
0002aa  7008              STRB     r0,[r1,#0]            ;247
0002ac  4860              LDR      r0,|L1.1072|
0002ae  f44f6196          MOV      r1,#0x4b0             ;248
0002b2  8001              STRH     r1,[r0,#0]            ;248
0002b4  4614              MOV      r4,r2                 ;256
0002b6  4620              MOV      r0,r4                 ;256
0002b8  f7fffffe          BL       lc640_read_int
0002bc  f1000001          ADD      r0,r0,#1              ;257
0002c0  4681              MOV      r9,r0                 ;257
0002c2  f1b90f3f          CMP      r9,#0x3f              ;258
0002c6  d901              BLS      |L1.716|
0002c8  f04f0900          MOV      r9,#0                 ;258
                  |L1.716|
0002cc  fa0ff189          SXTH     r1,r9                 ;259
0002d0  4620              MOV      r0,r4                 ;259
0002d2  f7fffffe          BL       lc640_write_int
0002d6  4650              MOV      r0,r10                ;261
0002d8  f7fffffe          BL       lc640_read_int
0002dc  283f              CMP      r0,#0x3f              ;262
0002de  d000              BEQ      |L1.738|
0002e0  4648              MOV      r0,r9                 ;262
                  |L1.738|
0002e2  b201              SXTH     r1,r0                 ;263
0002e4  4650              MOV      r0,r10                ;263
0002e6  f7fffffe          BL       lc640_write_int
0002ea  4620              MOV      r0,r4                 ;265
0002ec  f7fffffe          BL       lc640_read_int
0002f0  eb071440          ADD      r4,r7,r0,LSL #5       ;265
0002f4  f88db000          STRB     r11,[sp,#0]           ;267
0002f8  f88d6001          STRB     r6,[sp,#1]            ;268
0002fc  f88d8002          STRB     r8,[sp,#2]            ;269
000300  f88d6003          STRB     r6,[sp,#3]            ;270
000304  4669              MOV      r1,sp                 ;271
000306  4620              MOV      r0,r4                 ;271
000308  f7fffffe          BL       lc640_write_long_ptr
00030c  9600              STR      r6,[sp,#0]            ;276
00030e  4669              MOV      r1,sp                 ;277
000310  1d20              ADDS     r0,r4,#4              ;277
000312  f7fffffe          BL       lc640_write_long_ptr
000316  f1050520          ADD      r5,r5,#0x20           ;279
00031a  8ba8              LDRH     r0,[r5,#0x1c]         ;279
00031c  f88d0000          STRB     r0,[sp,#0]            ;279
000320  7e28              LDRB     r0,[r5,#0x18]         ;280
000322  f88d0001          STRB     r0,[sp,#1]            ;280
000326  7b28              LDRB     r0,[r5,#0xc]          ;281
000328  f88d0002          STRB     r0,[sp,#2]            ;281
00032c  f88d6003          STRB     r6,[sp,#3]            ;282
000330  4669              MOV      r1,sp                 ;283
000332  f1040008          ADD      r0,r4,#8              ;283
000336  f7fffffe          BL       lc640_write_long_ptr
00033a  7a28              LDRB     r0,[r5,#8]            ;285
00033c  f88d0000          STRB     r0,[sp,#0]            ;285
000340  7928              LDRB     r0,[r5,#4]            ;286
000342  f88d0001          STRB     r0,[sp,#1]            ;286
000346  7828              LDRB     r0,[r5,#0]            ;287
000348  f88d0002          STRB     r0,[sp,#2]            ;287
00034c  f88d6003          STRB     r6,[sp,#3]            ;288
000350  4669              MOV      r1,sp                 ;289
000352  f104000c          ADD      r0,r4,#0xc            ;289
000356  f7fffffe          BL       lc640_write_long_ptr
00035a  f88d8000          STRB     r8,[sp,#0]            ;291
00035e  f88d8001          STRB     r8,[sp,#1]            ;292
000362  f88d8002          STRB     r8,[sp,#2]            ;293
000366  f88d8003          STRB     r8,[sp,#3]            ;294
00036a  4669              MOV      r1,sp                 ;295
00036c  f1040010          ADD      r0,r4,#0x10           ;295
000370  f7fffffe          BL       lc640_write_long_ptr
000374  f88d8000          STRB     r8,[sp,#0]            ;297
000378  f88d8001          STRB     r8,[sp,#1]            ;298
00037c  f88d8002          STRB     r8,[sp,#2]            ;299
000380  f88d8003          STRB     r8,[sp,#3]            ;300
000384  4669              MOV      r1,sp                 ;301
000386  f1040014          ADD      r0,r4,#0x14           ;301
00038a  f7fffffe          BL       lc640_write_long_ptr
00038e  f88d8000          STRB     r8,[sp,#0]            ;303
000392  f88d8001          STRB     r8,[sp,#1]            ;304
000396  e001              B        |L1.924|
                  |L1.920|
000398  e01d              B        |L1.982|
                  |L1.922|
00039a  e0da              B        |L1.1362|
                  |L1.924|
00039c  f88d8002          STRB     r8,[sp,#2]            ;305
0003a0  f88d8003          STRB     r8,[sp,#3]            ;306
0003a4  4669              MOV      r1,sp                 ;307
0003a6  f1040018          ADD      r0,r4,#0x18           ;307
0003aa  f7fffffe          BL       lc640_write_long_ptr
0003ae  f88d8000          STRB     r8,[sp,#0]            ;309
0003b2  f88d8001          STRB     r8,[sp,#1]            ;310
0003b6  f88d8002          STRB     r8,[sp,#2]            ;311
0003ba  f88d8003          STRB     r8,[sp,#3]            ;312
0003be  4669              MOV      r1,sp                 ;313
0003c0  f104001c          ADD      r0,r4,#0x1c           ;313
0003c4  f7fffffe          BL       lc640_write_long_ptr
0003c8  2300              MOVS     r3,#0                 ;326
0003ca  2201              MOVS     r2,#1                 ;326
0003cc  2102              MOVS     r1,#2                 ;326
0003ce  a019              ADR      r0,|L1.1076|
0003d0  f7fffffe          BL       snmp_trap_send
0003d4  e166              B        |L1.1700|
                  |L1.982|
0003d6  f0400002          ORR      r0,r0,#2              ;331
0003da  7008              STRB     r0,[r1,#0]            ;331
0003dc  f44f6060          MOV      r0,#0xe00             ;339
0003e0  f7fffffe          BL       lc640_read_int
0003e4  f1000001          ADD      r0,r0,#1              ;340
0003e8  4604              MOV      r4,r0                 ;340
0003ea  2c3f              CMP      r4,#0x3f              ;341
0003ec  d901              BLS      |L1.1010|
0003ee  f04f0400          MOV      r4,#0                 ;341
                  |L1.1010|
0003f2  b221              SXTH     r1,r4                 ;342
0003f4  f44f6060          MOV      r0,#0xe00             ;342
0003f8  f7fffffe          BL       lc640_write_int
0003fc  4650              MOV      r0,r10                ;344
0003fe  e02b              B        |L1.1112|
                  |L1.1024|
                          DCD      net_av
                  |L1.1028|
                          DCD      ||.data||
                  |L1.1032|
                          DCD      bps
                  |L1.1036|
                          DCD      sk_av_stat
                  |L1.1040|
                          DCD      SK_ZVUK_EN
                  |L1.1044|
                          DCD      AV_OFF_AVT
                  |L1.1048|
                          DCD      0xeffffffe
                  |L1.1052|
                          DCD      status_izm_r
                  |L1.1056|
                          DCD      sk_alarm
                  |L1.1060|
                          DCD      0x40024020
                  |L1.1064|
                          DCD      0x400fc000
                  |L1.1068|
                          DCD      0x40024000
                  |L1.1072|
                          DCD      net_av_2min_timer
                  |L1.1076|
000434  4d61696e          DCB      "Main power alarm, voltage reduced",0
000438  20706f77
00043c  65722061
000440  6c61726d
000444  2c20766f
000448  6c746167
00044c  65207265
000450  64756365
000454  6400    
000456  00                DCB      0
000457  00                DCB      0
                  |L1.1112|
000458  f7fffffe          BL       lc640_read_int
00045c  283f              CMP      r0,#0x3f              ;345
00045e  d000              BEQ      |L1.1122|
000460  4620              MOV      r0,r4                 ;345
                  |L1.1122|
000462  b201              SXTH     r1,r0                 ;346
000464  4650              MOV      r0,r10                ;346
000466  f7fffffe          BL       lc640_write_int
00046a  f44f6060          MOV      r0,#0xe00             ;348
00046e  f7fffffe          BL       lc640_read_int
000472  eb071440          ADD      r4,r7,r0,LSL #5       ;348
000476  f88db000          STRB     r11,[sp,#0]           ;350
00047a  f88d6001          STRB     r6,[sp,#1]            ;351
00047e  f88d9002          STRB     r9,[sp,#2]            ;352
000482  f88d6003          STRB     r6,[sp,#3]            ;353
000486  4669              MOV      r1,sp                 ;354
000488  4620              MOV      r0,r4                 ;354
00048a  f7fffffe          BL       lc640_write_long_ptr
00048e  9600              STR      r6,[sp,#0]            ;359
000490  4669              MOV      r1,sp                 ;360
000492  1d20              ADDS     r0,r4,#4              ;360
000494  f7fffffe          BL       lc640_write_long_ptr
000498  f1050520          ADD      r5,r5,#0x20           ;362
00049c  8ba8              LDRH     r0,[r5,#0x1c]         ;362
00049e  f88d0000          STRB     r0,[sp,#0]            ;362
0004a2  7e28              LDRB     r0,[r5,#0x18]         ;363
0004a4  f88d0001          STRB     r0,[sp,#1]            ;363
0004a8  7b28              LDRB     r0,[r5,#0xc]          ;364
0004aa  f88d0002          STRB     r0,[sp,#2]            ;364
0004ae  f88d6003          STRB     r6,[sp,#3]            ;365
0004b2  4669              MOV      r1,sp                 ;366
0004b4  f1040008          ADD      r0,r4,#8              ;366
0004b8  f7fffffe          BL       lc640_write_long_ptr
0004bc  7a28              LDRB     r0,[r5,#8]            ;368
0004be  f88d0000          STRB     r0,[sp,#0]            ;368
0004c2  7928              LDRB     r0,[r5,#4]            ;369
0004c4  f88d0001          STRB     r0,[sp,#1]            ;369
0004c8  7828              LDRB     r0,[r5,#0]            ;370
0004ca  f88d0002          STRB     r0,[sp,#2]            ;370
0004ce  f88d6003          STRB     r6,[sp,#3]            ;371
0004d2  4669              MOV      r1,sp                 ;372
0004d4  f104000c          ADD      r0,r4,#0xc            ;372
0004d8  f7fffffe          BL       lc640_write_long_ptr
0004dc  f88d8000          STRB     r8,[sp,#0]            ;374
0004e0  f88d8001          STRB     r8,[sp,#1]            ;375
0004e4  f88d8002          STRB     r8,[sp,#2]            ;376
0004e8  f88d8003          STRB     r8,[sp,#3]            ;377
0004ec  4669              MOV      r1,sp                 ;378
0004ee  f1040010          ADD      r0,r4,#0x10           ;378
0004f2  f7fffffe          BL       lc640_write_long_ptr
0004f6  f88d8000          STRB     r8,[sp,#0]            ;380
0004fa  f88d8001          STRB     r8,[sp,#1]            ;381
0004fe  f88d8002          STRB     r8,[sp,#2]            ;382
000502  f88d8003          STRB     r8,[sp,#3]            ;383
000506  4669              MOV      r1,sp                 ;384
000508  f1040014          ADD      r0,r4,#0x14           ;384
00050c  f7fffffe          BL       lc640_write_long_ptr
000510  f88d8000          STRB     r8,[sp,#0]            ;386
000514  f88d8001          STRB     r8,[sp,#1]            ;387
000518  f88d8002          STRB     r8,[sp,#2]            ;388
00051c  f88d8003          STRB     r8,[sp,#3]            ;389
000520  4669              MOV      r1,sp                 ;390
000522  f1040018          ADD      r0,r4,#0x18           ;390
000526  f7fffffe          BL       lc640_write_long_ptr
00052a  f88d8000          STRB     r8,[sp,#0]            ;392
00052e  f88d8001          STRB     r8,[sp,#1]            ;393
000532  f88d8002          STRB     r8,[sp,#2]            ;394
000536  f88d8003          STRB     r8,[sp,#3]            ;395
00053a  4669              MOV      r1,sp                 ;396
00053c  f104001c          ADD      r0,r4,#0x1c           ;396
000540  f7fffffe          BL       lc640_write_long_ptr
000544  2202              MOVS     r2,#2                 ;398
000546  2300              MOVS     r3,#0                 ;398
000548  4611              MOV      r1,r2                 ;398
00054a  a0fe              ADR      r0,|L1.2372|
00054c  f7fffffe          BL       snmp_trap_send
000550  e0a8              B        |L1.1700|
                  |L1.1362|
;;;402    	{
;;;403    //	if( (in==0 && (net_av&2)==0) || (in==4 && (net_av&1)==0) )  {
;;;404    		if(in==0) net_av&=~1;
000552  b914              CBNZ     r4,|L1.1370|
000554  f0200001          BIC      r0,r0,#1
000558  7008              STRB     r0,[r1,#0]
                  |L1.1370|
;;;405    		if(in==4) net_av&=~2;	 
00055a  2c04              CMP      r4,#4
00055c  d103              BNE      |L1.1382|
00055e  7808              LDRB     r0,[r1,#0]  ; net_av
000560  f0200002          BIC      r0,r0,#2
000564  7008              STRB     r0,[r1,#0]
                  |L1.1382|
;;;406    		if(net_av==0) if(AV_OFF_AVT) SET_REG(avar_ind_stat,0,0,1);
000566  7809              LDRB     r1,[r1,#0]  ; net_av
000568  48ff              LDR      r0,|L1.2408|
00056a  b931              CBNZ     r1,|L1.1402|
00056c  49ff              LDR      r1,|L1.2412|
00056e  8809              LDRH     r1,[r1,#0]  ; AV_OFF_AVT
000570  b119              CBZ      r1,|L1.1402|
000572  6841              LDR      r1,[r0,#4]  ; avar_ind_stat
000574  f0210101          BIC      r1,r1,#1
000578  6041              STR      r1,[r0,#4]  ; avar_ind_stat
                  |L1.1402|
;;;407    
;;;408    	SET_REG(avar_stat,0,0,1);
00057a  6801              LDR      r1,[r0,#0]  ; avar_stat
00057c  f0210101          BIC      r1,r1,#1
000580  6001              STR      r1,[r0,#0]  ; avar_stat
;;;409    	
;;;410    	
;;;411    //}
;;;412    //o_10_e
;;;413    
;;;414         event_ptr=lc640_read_int(PTR_EVENT_LOG);
000582  4610              MOV      r0,r2
000584  f7fffffe          BL       lc640_read_int
000588  4683              MOV      r11,r0
;;;415    	event_ptr_find=event_ptr;
00058a  46d8              MOV      r8,r11
                  |L1.1420|
;;;416    avar_unet_hndl_lbl1:
;;;417    	lc640_adr=EVENT_LOG+(event_ptr_find*32);
00058c  eb071a48          ADD      r10,r7,r8,LSL #5
;;;418    
;;;419         lc640_read_long_ptr(lc640_adr,data);
000590  4669              MOV      r1,sp
000592  4650              MOV      r0,r10
000594  f7fffffe          BL       lc640_read_long_ptr
;;;420         
;;;421         if( !( (data[0]=='P')&&(data[1]==0)&&( (in==0 && data[2]=='A' )||(in==4 && data[2]=='B') ) ) )	//o_10
000598  f89d0000          LDRB     r0,[sp,#0]
00059c  2850              CMP      r0,#0x50
00059e  d10f              BNE      |L1.1472|
0005a0  f89d0001          LDRB     r0,[sp,#1]
0005a4  b960              CBNZ     r0,|L1.1472|
0005a6  b114              CBZ      r4,|L1.1454|
0005a8  2c04              CMP      r4,#4
0005aa  d109              BNE      |L1.1472|
0005ac  e004              B        |L1.1464|
                  |L1.1454|
0005ae  f89d0002          LDRB     r0,[sp,#2]
0005b2  2841              CMP      r0,#0x41
0005b4  d104              BNE      |L1.1472|
0005b6  e00e              B        |L1.1494|
                  |L1.1464|
0005b8  f89d0002          LDRB     r0,[sp,#2]
0005bc  2842              CMP      r0,#0x42
0005be  d00a              BEQ      |L1.1494|
                  |L1.1472|
;;;422         	{        
;;;423         	if(event_ptr_find)event_ptr_find--;
0005c0  f1b80f00          CMP      r8,#0
0005c4  d002              BEQ      |L1.1484|
0005c6  f1a80801          SUB      r8,r8,#1
0005ca  e001              B        |L1.1488|
                  |L1.1484|
;;;424         	else event_ptr_find=63;
0005cc  f04f083f          MOV      r8,#0x3f
                  |L1.1488|
;;;425         	if(event_ptr_find==event_ptr)goto avar_unet_hndl_end;
0005d0  45d8              CMP      r8,r11
0005d2  d1db              BNE      |L1.1420|
0005d4  e066              B        |L1.1700|
                  |L1.1494|
;;;426         	else goto avar_unet_hndl_lbl1;
;;;427         	}
;;;428         else 
;;;429         	{
;;;430         	lc640_read_long_ptr(lc640_adr+16,data);
0005d6  4669              MOV      r1,sp
0005d8  f10a0010          ADD      r0,r10,#0x10
0005dc  f7fffffe          BL       lc640_read_long_ptr
;;;431         	if(!((data[0]=='A')&&(data[1]=='A')&&(data[2]=='A')&&(data[3]=='A')))
0005e0  f89d0000          LDRB     r0,[sp,#0]
0005e4  2841              CMP      r0,#0x41
0005e6  d10b              BNE      |L1.1536|
0005e8  f89d0001          LDRB     r0,[sp,#1]
0005ec  2841              CMP      r0,#0x41
0005ee  d107              BNE      |L1.1536|
0005f0  f89d0002          LDRB     r0,[sp,#2]
0005f4  2841              CMP      r0,#0x41
0005f6  d103              BNE      |L1.1536|
0005f8  f89d0003          LDRB     r0,[sp,#3]
0005fc  2841              CMP      r0,#0x41
0005fe  d00a              BEQ      |L1.1558|
                  |L1.1536|
;;;432         		{        
;;;433         		if(event_ptr_find)event_ptr_find--;
000600  f1b80f00          CMP      r8,#0
000604  d002              BEQ      |L1.1548|
000606  f1a80801          SUB      r8,r8,#1
00060a  e001              B        |L1.1552|
                  |L1.1548|
;;;434             		else event_ptr_find=63;
00060c  f04f083f          MOV      r8,#0x3f
                  |L1.1552|
;;;435             		if(event_ptr_find==event_ptr)goto avar_unet_hndl_end;
000610  45d8              CMP      r8,r11
000612  d1bb              BNE      |L1.1420|
000614  e046              B        |L1.1700|
                  |L1.1558|
;;;436         		else goto avar_unet_hndl_lbl1;
;;;437         		}
;;;438    
;;;439         	}	
;;;440    	
;;;441    	data[0]=LPC_RTC->YEAR;
000616  f1050520          ADD      r5,r5,#0x20
00061a  8ba8              LDRH     r0,[r5,#0x1c]
00061c  f88d0000          STRB     r0,[sp,#0]
;;;442    	data[1]=LPC_RTC->MONTH;
000620  7e28              LDRB     r0,[r5,#0x18]
000622  f88d0001          STRB     r0,[sp,#1]
;;;443    	data[2]=LPC_RTC->DOM;
000626  7b28              LDRB     r0,[r5,#0xc]
000628  f88d0002          STRB     r0,[sp,#2]
;;;444    	data[3]=0;
00062c  f88d6003          STRB     r6,[sp,#3]
;;;445    	lc640_write_long_ptr(lc640_adr+16,data);
000630  4669              MOV      r1,sp
000632  f10a0010          ADD      r0,r10,#0x10
000636  f7fffffe          BL       lc640_write_long_ptr
;;;446    
;;;447    	data[0]=LPC_RTC->HOUR;
00063a  7a28              LDRB     r0,[r5,#8]
00063c  f88d0000          STRB     r0,[sp,#0]
;;;448    	data[1]=LPC_RTC->MIN;
000640  7928              LDRB     r0,[r5,#4]
000642  f88d0001          STRB     r0,[sp,#1]
;;;449    	data[2]=LPC_RTC->SEC;
000646  7828              LDRB     r0,[r5,#0]
000648  f88d0002          STRB     r0,[sp,#2]
;;;450    	data[3]=0;
00064c  f88d6003          STRB     r6,[sp,#3]
;;;451    	lc640_write_long_ptr(lc640_adr+20,data); 
000650  4669              MOV      r1,sp
000652  f10a0014          ADD      r0,r10,#0x14
000656  f7fffffe          BL       lc640_write_long_ptr
;;;452    	
;;;453    	//o_10_s
;;;454    	if(in==4) {
00065a  2c04              CMP      r4,#4
00065c  d025              BEQ      |L1.1706|
;;;455    	   	data[0]=*((char*)(&net_Ustore_max));
;;;456    		data[1]=*(((char*)(&net_Ustore_max))+1);
;;;457    	}else{
;;;458    		data[0]=*((char*)(&net_Ustore));
00065e  48c4              LDR      r0,|L1.2416|
000660  7801              LDRB     r1,[r0,#0]  ; net_Ustore
000662  f88d1000          STRB     r1,[sp,#0]
;;;459    		data[1]=*(((char*)(&net_Ustore))+1);
000666  7840              LDRB     r0,[r0,#1]  ; net_Ustore
000668  f88d0001          STRB     r0,[sp,#1]
                  |L1.1644|
;;;460    	}
;;;461    	//o_10_e
;;;462    	data[2]='B';
00066c  f88d9002          STRB     r9,[sp,#2]
;;;463    	data[3]='B';
000670  f88d9003          STRB     r9,[sp,#3]
;;;464    	lc640_write_long_ptr(lc640_adr+24,data);
000674  4669              MOV      r1,sp
000676  f10a0018          ADD      r0,r10,#0x18
00067a  f7fffffe          BL       lc640_write_long_ptr
;;;465    	
;;;466    	data[0]='B';
00067e  f88d9000          STRB     r9,[sp,#0]
;;;467    	data[1]='B';
000682  f88d9001          STRB     r9,[sp,#1]
;;;468    	data[2]='B';
000686  f88d9002          STRB     r9,[sp,#2]
;;;469    	data[3]='B';
00068a  f88d9003          STRB     r9,[sp,#3]
;;;470    	lc640_write_long_ptr(lc640_adr+28,data);	
00068e  4669              MOV      r1,sp
000690  f10a001c          ADD      r0,r10,#0x1c
000694  f7fffffe          BL       lc640_write_long_ptr
;;;471    	
;;;472    /*	memo_out0[0]=0x55;
;;;473         memo_out0[1]=0x00+2;
;;;474         memo_out0[2]=1;
;;;475         memo_out0[3]=0x0b;
;;;476         memo_out0[4]=0xaa;
;;;477         memo_out0[5]=0xaa; 
;;;478         	
;;;479         memo_out0[6]=crc_87(memo_out0,6);
;;;480    	memo_out0[7]=crc_95(memo_out0,6);
;;;481         usart_out_adr0(memo_out0,8); */
;;;482         snmp_trap_send("Main power alarm  clear",2,1,1);	
000698  2301              MOVS     r3,#1
00069a  461a              MOV      r2,r3
00069c  2102              MOVS     r1,#2
00069e  a0b5              ADR      r0,|L1.2420|
0006a0  f7fffffe          BL       snmp_trap_send
                  |L1.1700|
;;;483    	}
;;;484    avar_unet_hndl_end:
;;;485    	__nop();		
0006a4  bf00              NOP      
                  |L1.1702|
;;;486    }
0006a6  e8bd8ff8          POP      {r3-r11,pc}
                  |L1.1706|
0006aa  48b8              LDR      r0,|L1.2444|
0006ac  7801              LDRB     r1,[r0,#0]            ;455  ; net_Ustore_max
0006ae  f88d1000          STRB     r1,[sp,#0]            ;455
0006b2  7840              LDRB     r0,[r0,#1]            ;456  ; net_Ustore_max
0006b4  f88d0001          STRB     r0,[sp,#1]            ;456
0006b8  e7d8              B        |L1.1644|
;;;487    
                          ENDP

                  avar_uout_hndl PROC
;;;489    //-----------------------------------------------
;;;490    void avar_uout_hndl(char in)
0006ba  e92d4ff8          PUSH     {r3-r11,lr}
;;;491    {
;;;492    
;;;493    char data[4];
;;;494    unsigned int event_ptr,lc640_adr,event_ptr_find,event_cnt;
;;;495    char avar_data=0;
;;;496    
;;;497    if(in==1)
;;;498    	{
;;;499    	//net_av=1;
;;;500    
;;;501    	//beep_init(0x01L,'O');
;;;502    	//a.av.bAN=1;
;;;503    
;;;504    
;;;505    	//beep_init(0x33333333,'A');
;;;506    
;;;507    	if(load_U>U_OUT_KONTR_MAX)uout_av=1;
;;;508    	if(load_U<U_OUT_KONTR_MIN)uout_av=2;
;;;509    	
;;;510    	avar_data=uout_av;
;;;511    		 
;;;512    	event_ptr=lc640_read_int(PTR_EVENT_LOG);
;;;513    	event_ptr++;	
;;;514    	if(event_ptr>63)event_ptr=0;	
;;;515    	lc640_write_int(PTR_EVENT_LOG,event_ptr);	
;;;516    	
;;;517        event_cnt=lc640_read_int(CNT_EVENT_LOG);
;;;518    	if(event_cnt!=63)event_cnt=event_ptr;
;;;519    	lc640_write_int(CNT_EVENT_LOG,event_cnt); 
;;;520    	
;;;521    	lc640_adr=EVENT_LOG+(lc640_read_int(PTR_EVENT_LOG)*32);
;;;522    	
;;;523    	data[0]='Q';
;;;524    	data[1]=0;
;;;525    	data[2]='A';
;;;526    	data[3]=avar_data;
;;;527    	lc640_write_long_ptr(lc640_adr,data);
;;;528    
;;;529    	 //load_U=4321;
;;;530    
;;;531    	data[0]=*((char*)&load_U);
;;;532    	data[1]=*(((char*)&load_U)+1);
;;;533    	data[2]=0;
;;;534    	data[3]=0;
;;;535    	lc640_write_long_ptr(lc640_adr+4,data);
;;;536    
;;;537    	data[0]=LPC_RTC->YEAR;
0006be  4fb4              LDR      r7,|L1.2448|
0006c0  49b4              LDR      r1,|L1.2452|
0006c2  f44f6560          MOV      r5,#0xe00             ;512
0006c6  f04f0800          MOV      r8,#0                 ;495
0006ca  f44f6980          MOV      r9,#0x400             ;521
0006ce  2801              CMP      r0,#1                 ;497
0006d0  d002              BEQ      |L1.1752|
;;;538    	data[1]=LPC_RTC->MONTH;
;;;539    	data[2]=LPC_RTC->DOM;
;;;540    	data[3]=0;
;;;541    	lc640_write_long_ptr(lc640_adr+8,data);
;;;542    
;;;543    	data[0]=LPC_RTC->HOUR;
;;;544    	data[1]=LPC_RTC->MIN;
;;;545    	data[2]=LPC_RTC->SEC;
;;;546    	data[3]=0;
;;;547    	lc640_write_long_ptr(lc640_adr+12,data);
;;;548    	
;;;549    	data[0]='A';
;;;550    	data[1]='A';
;;;551    	data[2]='A';
;;;552    	data[3]='A';
;;;553    	lc640_write_long_ptr(lc640_adr+16,data);
;;;554    	
;;;555    	data[0]='A';
;;;556    	data[1]='A';
;;;557    	data[2]='A';
;;;558    	data[3]='A';
;;;559    	lc640_write_long_ptr(lc640_adr+20,data);
;;;560    	
;;;561    	data[0]='A';
;;;562    	data[1]='A';
;;;563    	data[2]='A';
;;;564    	data[3]='A';
;;;565    	lc640_write_long_ptr(lc640_adr+24,data);
;;;566    	
;;;567    	data[0]='A';
;;;568    	data[1]='A';
;;;569    	data[2]='A';
;;;570    	data[3]='A';
;;;571    	lc640_write_long_ptr(lc640_adr+28,data);				
;;;572    	
;;;573    /*	memo_out0[0]=0x55;
;;;574         memo_out0[1]=0x00+2;
;;;575         memo_out0[2]=1;
;;;576         memo_out0[3]=0x0b;
;;;577         memo_out0[4]=0x55;
;;;578         memo_out0[5]=0x55; 
;;;579         	
;;;580         memo_out0[6]=crc_87(memo_out0,6);
;;;581    	memo_out0[7]=crc_95(memo_out0,6);
;;;582         usart_out_adr0(memo_out0,8); 
;;;583    	*/
;;;584    	//snmp_trap_send("Main power is off",2,1,0);
;;;585    	}
;;;586    
;;;587    else if(in==0)
0006d2  2800              CMP      r0,#0
0006d4  d07d              BEQ      |L1.2002|
0006d6  e132              B        |L1.2366|
                  |L1.1752|
0006d8  f8dfa2bc          LDR      r10,|L1.2456|
0006dc  4aaf              LDR      r2,|L1.2460|
0006de  f9ba0000          LDRSH    r0,[r10,#0]           ;507  ; load_U
0006e2  f9b22000          LDRSH    r2,[r2,#0]            ;507  ; U_OUT_KONTR_MAX
0006e6  4290              CMP      r0,r2                 ;507
0006e8  dd02              BLE      |L1.1776|
0006ea  f04f0201          MOV      r2,#1                 ;507
0006ee  700a              STRB     r2,[r1,#0]            ;507
                  |L1.1776|
0006f0  4aab              LDR      r2,|L1.2464|
0006f2  f9b22000          LDRSH    r2,[r2,#0]            ;508  ; U_OUT_KONTR_MIN
0006f6  4290              CMP      r0,r2                 ;508
0006f8  da02              BGE      |L1.1792|
0006fa  f04f0002          MOV      r0,#2                 ;508
0006fe  7008              STRB     r0,[r1,#0]            ;508
                  |L1.1792|
000700  780e              LDRB     r6,[r1,#0]            ;510  ; uout_av
000702  4628              MOV      r0,r5                 ;512
000704  f7fffffe          BL       lc640_read_int
000708  f1000001          ADD      r0,r0,#1              ;513
00070c  4604              MOV      r4,r0                 ;513
00070e  2c3f              CMP      r4,#0x3f              ;514
000710  d901              BLS      |L1.1814|
000712  f04f0400          MOV      r4,#0                 ;514
                  |L1.1814|
000716  b221              SXTH     r1,r4                 ;515
000718  4628              MOV      r0,r5                 ;515
00071a  f7fffffe          BL       lc640_write_int
00071e  f6406b02          MOV      r11,#0xe02            ;517
000722  4658              MOV      r0,r11                ;517
000724  f7fffffe          BL       lc640_read_int
000728  283f              CMP      r0,#0x3f              ;518
00072a  d000              BEQ      |L1.1838|
00072c  4620              MOV      r0,r4                 ;518
                  |L1.1838|
00072e  b201              SXTH     r1,r0                 ;519
000730  4658              MOV      r0,r11                ;519
000732  f7fffffe          BL       lc640_write_int
000736  4628              MOV      r0,r5                 ;521
000738  f7fffffe          BL       lc640_read_int
00073c  eb091540          ADD      r5,r9,r0,LSL #5       ;521
000740  f04f0051          MOV      r0,#0x51              ;523
000744  f88d0000          STRB     r0,[sp,#0]            ;523
000748  f88d8001          STRB     r8,[sp,#1]            ;524
00074c  f04f0441          MOV      r4,#0x41              ;525
000750  f88d4002          STRB     r4,[sp,#2]            ;525
000754  f88d6003          STRB     r6,[sp,#3]            ;526
000758  4669              MOV      r1,sp                 ;527
00075a  4628              MOV      r0,r5                 ;527
00075c  f7fffffe          BL       lc640_write_long_ptr
000760  f89a0000          LDRB     r0,[r10,#0]           ;531  ; load_U
000764  f88d0000          STRB     r0,[sp,#0]            ;531
000768  f89a0001          LDRB     r0,[r10,#1]           ;532  ; load_U
00076c  f88d0001          STRB     r0,[sp,#1]            ;532
000770  f88d8002          STRB     r8,[sp,#2]            ;533
000774  f88d8003          STRB     r8,[sp,#3]            ;534
000778  4669              MOV      r1,sp                 ;535
00077a  1d28              ADDS     r0,r5,#4              ;535
00077c  f7fffffe          BL       lc640_write_long_ptr
000780  f1070720          ADD      r7,r7,#0x20           ;537
000784  8bb8              LDRH     r0,[r7,#0x1c]         ;537
000786  f88d0000          STRB     r0,[sp,#0]            ;537
00078a  7e38              LDRB     r0,[r7,#0x18]         ;538
00078c  f88d0001          STRB     r0,[sp,#1]            ;538
000790  7b38              LDRB     r0,[r7,#0xc]          ;539
000792  f88d0002          STRB     r0,[sp,#2]            ;539
000796  f88d8003          STRB     r8,[sp,#3]            ;540
00079a  4669              MOV      r1,sp                 ;541
00079c  f1050008          ADD      r0,r5,#8              ;541
0007a0  f7fffffe          BL       lc640_write_long_ptr
0007a4  7a38              LDRB     r0,[r7,#8]            ;543
0007a6  f88d0000          STRB     r0,[sp,#0]            ;543
0007aa  7938              LDRB     r0,[r7,#4]            ;544
0007ac  f88d0001          STRB     r0,[sp,#1]            ;544
0007b0  7838              LDRB     r0,[r7,#0]            ;545
0007b2  f88d0002          STRB     r0,[sp,#2]            ;545
0007b6  f88d8003          STRB     r8,[sp,#3]            ;546
0007ba  4669              MOV      r1,sp                 ;547
0007bc  f105000c          ADD      r0,r5,#0xc            ;547
0007c0  f7fffffe          BL       lc640_write_long_ptr
0007c4  f88d4000          STRB     r4,[sp,#0]            ;549
0007c8  f88d4001          STRB     r4,[sp,#1]            ;550
0007cc  f88d4002          STRB     r4,[sp,#2]            ;551
0007d0  e000              B        |L1.2004|
                  |L1.2002|
0007d2  e02e              B        |L1.2098|
                  |L1.2004|
0007d4  f88d4003          STRB     r4,[sp,#3]            ;552
0007d8  4669              MOV      r1,sp                 ;553
0007da  f1050010          ADD      r0,r5,#0x10           ;553
0007de  f7fffffe          BL       lc640_write_long_ptr
0007e2  f88d4000          STRB     r4,[sp,#0]            ;555
0007e6  f88d4001          STRB     r4,[sp,#1]            ;556
0007ea  f88d4002          STRB     r4,[sp,#2]            ;557
0007ee  f88d4003          STRB     r4,[sp,#3]            ;558
0007f2  4669              MOV      r1,sp                 ;559
0007f4  f1050014          ADD      r0,r5,#0x14           ;559
0007f8  f7fffffe          BL       lc640_write_long_ptr
0007fc  f88d4000          STRB     r4,[sp,#0]            ;561
000800  f88d4001          STRB     r4,[sp,#1]            ;562
000804  f88d4002          STRB     r4,[sp,#2]            ;563
000808  f88d4003          STRB     r4,[sp,#3]            ;564
00080c  4669              MOV      r1,sp                 ;565
00080e  f1050018          ADD      r0,r5,#0x18           ;565
000812  f7fffffe          BL       lc640_write_long_ptr
000816  f88d4000          STRB     r4,[sp,#0]            ;567
00081a  f88d4001          STRB     r4,[sp,#1]            ;568
00081e  f88d4002          STRB     r4,[sp,#2]            ;569
000822  f88d4003          STRB     r4,[sp,#3]            ;570
000826  4669              MOV      r1,sp                 ;571
000828  f105001c          ADD      r0,r5,#0x1c           ;571
00082c  f7fffffe          BL       lc640_write_long_ptr
000830  e085              B        |L1.2366|
                  |L1.2098|
;;;588    	{
;;;589    	uout_av=0;
000832  f8818000          STRB     r8,[r1,#0]
;;;590    
;;;591      /*
;;;592    	SET_REG(C2GSR,3,24,8);
;;;593    	C2MOD=0;
;;;594    	bOUT_FREE2=1;*/
;;;595    
;;;596    
;;;597    	//C2MOD=0;
;;;598    
;;;599    	//can2_init(7,8,CANBitrate250k_60MHz);
;;;600    
;;;601         //beep_init(0x02L,'O');
;;;602    	//a_.av.bAN=0;
;;;603    //	SET_REG(avar_stat,0,0,1);
;;;604    
;;;605    	//if(AV_OFF_AVT)a.av.bAN=0;
;;;606    	
;;;607    	//if(AV_OFF_AVT) SET_REG(avar_ind_stat,0,0,1);
;;;608    
;;;609        event_ptr=lc640_read_int(PTR_EVENT_LOG);
000836  4628              MOV      r0,r5
000838  f7fffffe          BL       lc640_read_int
00083c  4606              MOV      r6,r0
;;;610    	event_ptr_find=event_ptr;
00083e  4634              MOV      r4,r6
                  |L1.2112|
;;;611    avar_uout_hndl_lbl1:
;;;612    	lc640_adr=EVENT_LOG+(event_ptr_find*32);
000840  eb091544          ADD      r5,r9,r4,LSL #5
;;;613    
;;;614         lc640_read_long_ptr(lc640_adr,data);
000844  4669              MOV      r1,sp
000846  4628              MOV      r0,r5
000848  f7fffffe          BL       lc640_read_long_ptr
;;;615         
;;;616         if(!((data[0]=='Q')&&(data[1]==0)&&(data[2]=='A')))
00084c  f89d0000          LDRB     r0,[sp,#0]
000850  2851              CMP      r0,#0x51
000852  d106              BNE      |L1.2146|
000854  f89d0001          LDRB     r0,[sp,#1]
000858  b918              CBNZ     r0,|L1.2146|
00085a  f89d0002          LDRB     r0,[sp,#2]
00085e  2841              CMP      r0,#0x41
000860  d008              BEQ      |L1.2164|
                  |L1.2146|
;;;617         	{        
;;;618         	if(event_ptr_find)event_ptr_find--;
000862  b114              CBZ      r4,|L1.2154|
000864  f1a40401          SUB      r4,r4,#1
000868  e001              B        |L1.2158|
                  |L1.2154|
;;;619         	else event_ptr_find=63;
00086a  f04f043f          MOV      r4,#0x3f
                  |L1.2158|
;;;620         	if(event_ptr_find==event_ptr)goto avar_unet_hndl_end;
00086e  42b4              CMP      r4,r6
000870  d1e6              BNE      |L1.2112|
000872  e064              B        |L1.2366|
                  |L1.2164|
;;;621         	else goto avar_uout_hndl_lbl1;
;;;622         	}
;;;623         else 
;;;624         	{
;;;625         	lc640_read_long_ptr(lc640_adr+16,data);
000874  4669              MOV      r1,sp
000876  f1050010          ADD      r0,r5,#0x10
00087a  f7fffffe          BL       lc640_read_long_ptr
;;;626         	if(!((data[0]=='A')&&(data[1]=='A')&&(data[2]=='A')&&(data[3]=='A')))
00087e  f89d0000          LDRB     r0,[sp,#0]
000882  2841              CMP      r0,#0x41
000884  d10b              BNE      |L1.2206|
000886  f89d0001          LDRB     r0,[sp,#1]
00088a  2841              CMP      r0,#0x41
00088c  d107              BNE      |L1.2206|
00088e  f89d0002          LDRB     r0,[sp,#2]
000892  2841              CMP      r0,#0x41
000894  d103              BNE      |L1.2206|
000896  f89d0003          LDRB     r0,[sp,#3]
00089a  2841              CMP      r0,#0x41
00089c  d008              BEQ      |L1.2224|
                  |L1.2206|
;;;627         		{        
;;;628         		if(event_ptr_find)event_ptr_find--;
00089e  b114              CBZ      r4,|L1.2214|
0008a0  f1a40401          SUB      r4,r4,#1
0008a4  e001              B        |L1.2218|
                  |L1.2214|
;;;629             		else event_ptr_find=63;
0008a6  f04f043f          MOV      r4,#0x3f
                  |L1.2218|
;;;630             		if(event_ptr_find==event_ptr)goto avar_unet_hndl_end;
0008aa  42b4              CMP      r4,r6
0008ac  d1c8              BNE      |L1.2112|
0008ae  e046              B        |L1.2366|
                  |L1.2224|
;;;631         		else goto avar_uout_hndl_lbl1;
;;;632         		}
;;;633    
;;;634         	}	
;;;635    	
;;;636    	data[0]=LPC_RTC->YEAR;
0008b0  f1070720          ADD      r7,r7,#0x20
0008b4  8bb8              LDRH     r0,[r7,#0x1c]
0008b6  f88d0000          STRB     r0,[sp,#0]
;;;637    	data[1]=LPC_RTC->MONTH;
0008ba  7e38              LDRB     r0,[r7,#0x18]
0008bc  f88d0001          STRB     r0,[sp,#1]
;;;638    	data[2]=LPC_RTC->DOM;
0008c0  7b38              LDRB     r0,[r7,#0xc]
0008c2  f88d0002          STRB     r0,[sp,#2]
;;;639    	data[3]=0;
0008c6  f88d8003          STRB     r8,[sp,#3]
;;;640    	lc640_write_long_ptr(lc640_adr+16,data);
0008ca  4669              MOV      r1,sp
0008cc  f1050010          ADD      r0,r5,#0x10
0008d0  f7fffffe          BL       lc640_write_long_ptr
;;;641    
;;;642    	data[0]=LPC_RTC->HOUR;
0008d4  7a38              LDRB     r0,[r7,#8]
0008d6  f88d0000          STRB     r0,[sp,#0]
;;;643    	data[1]=LPC_RTC->MIN;
0008da  7938              LDRB     r0,[r7,#4]
0008dc  f88d0001          STRB     r0,[sp,#1]
;;;644    	data[2]=LPC_RTC->SEC;
0008e0  7838              LDRB     r0,[r7,#0]
0008e2  f88d0002          STRB     r0,[sp,#2]
;;;645    	data[3]=0;
0008e6  f88d8003          STRB     r8,[sp,#3]
;;;646    	lc640_write_long_ptr(lc640_adr+20,data); 
0008ea  4669              MOV      r1,sp
0008ec  f1050014          ADD      r0,r5,#0x14
0008f0  f7fffffe          BL       lc640_write_long_ptr
;;;647    	
;;;648    	data[0]=*((char*)(&net_Ustore));
0008f4  481e              LDR      r0,|L1.2416|
0008f6  7801              LDRB     r1,[r0,#0]  ; net_Ustore
0008f8  f88d1000          STRB     r1,[sp,#0]
;;;649    	data[1]=*(((char*)(&net_Ustore))+1);
0008fc  7840              LDRB     r0,[r0,#1]  ; net_Ustore
0008fe  f88d0001          STRB     r0,[sp,#1]
;;;650    	data[2]='B';
000902  f04f0442          MOV      r4,#0x42
000906  f88d4002          STRB     r4,[sp,#2]
;;;651    	data[3]='B';
00090a  f88d4003          STRB     r4,[sp,#3]
;;;652    	lc640_write_long_ptr(lc640_adr+24,data);
00090e  4669              MOV      r1,sp
000910  f1050018          ADD      r0,r5,#0x18
000914  f7fffffe          BL       lc640_write_long_ptr
;;;653    	
;;;654    	data[0]='B';
000918  f88d4000          STRB     r4,[sp,#0]
;;;655    	data[1]='B';
00091c  f88d4001          STRB     r4,[sp,#1]
;;;656    	data[2]='B';
000920  f88d4002          STRB     r4,[sp,#2]
;;;657    	data[3]='B';
000924  f88d4003          STRB     r4,[sp,#3]
;;;658    	lc640_write_long_ptr(lc640_adr+28,data);	
000928  4669              MOV      r1,sp
00092a  f105001c          ADD      r0,r5,#0x1c
00092e  f7fffffe          BL       lc640_write_long_ptr
;;;659    	
;;;660    /*	memo_out0[0]=0x55;
;;;661         memo_out0[1]=0x00+2;
;;;662         memo_out0[2]=1;
;;;663         memo_out0[3]=0x0b;
;;;664         memo_out0[4]=0xaa;
;;;665         memo_out0[5]=0xaa; 
;;;666         	
;;;667         memo_out0[6]=crc_87(memo_out0,6);
;;;668    	memo_out0[7]=crc_95(memo_out0,6);
;;;669         usart_out_adr0(memo_out0,8); */
;;;670         snmp_trap_send("Main power is on",2,1,1);	
000932  2301              MOVS     r3,#1
000934  461a              MOV      r2,r3
000936  2102              MOVS     r1,#2
000938  a01a              ADR      r0,|L1.2468|
00093a  f7fffffe          BL       snmp_trap_send
                  |L1.2366|
;;;671    	}
;;;672    avar_unet_hndl_end:
;;;673    	__nop();		
00093e  bf00              NOP      
;;;674    }
000940  e6b1              B        |L1.1702|
000942  0000              DCW      0x0000
                  |L1.2372|
000944  4d61696e          DCB      "Main power alarm, voltage increased",0
000948  20706f77
00094c  65722061
000950  6c61726d
000954  2c20766f
000958  6c746167
00095c  6520696e
000960  63726561
000964  73656400
                  |L1.2408|
                          DCD      ||.data||
                  |L1.2412|
                          DCD      AV_OFF_AVT
                  |L1.2416|
                          DCD      net_Ustore
                  |L1.2420|
000974  4d61696e          DCB      "Main power alarm  clear",0
000978  20706f77
00097c  65722061
000980  6c61726d
000984  2020636c
000988  65617200
                  |L1.2444|
                          DCD      net_Ustore_max
                  |L1.2448|
                          DCD      0x40024000
                  |L1.2452|
                          DCD      uout_av
                  |L1.2456|
                          DCD      load_U
                  |L1.2460|
                          DCD      U_OUT_KONTR_MAX
                  |L1.2464|
                          DCD      U_OUT_KONTR_MIN
                  |L1.2468|
0009a4  4d61696e          DCB      "Main power is on",0
0009a8  20706f77
0009ac  65722069
0009b0  73206f6e
0009b4  00      
0009b5  00                DCB      0
0009b6  00                DCB      0
0009b7  00                DCB      0
                          ENDP

                  avar_bps_hndl PROC
;;;676    //-----------------------------------------------
;;;677    void avar_bps_hndl(char dev, char v, char in)
0009b8  e92d4ff8          PUSH     {r3-r11,lr}
;;;678    {
0009bc  4606              MOV      r6,r0
0009be  460c              MOV      r4,r1
;;;679    char data[4];
;;;680    unsigned short event_ptr,lc640_adr,event_ptr_find,event_cnt;
;;;681    char avar_simbol;
;;;682    
;;;683    avar_simbol='T';
0009c0  f04f0754          MOV      r7,#0x54
;;;684    if(v==0)avar_simbol='T';
0009c4  b174              CBZ      r4,|L1.2532|
;;;685    else if(v==1)avar_simbol='U';
0009c6  2c01              CMP      r4,#1
0009c8  d004              BEQ      |L1.2516|
;;;686    else if(v==2)avar_simbol='u';
0009ca  2c02              CMP      r4,#2
0009cc  d005              BEQ      |L1.2522|
;;;687    else if(v==3)avar_simbol='L';
0009ce  2c03              CMP      r4,#3
0009d0  d006              BEQ      |L1.2528|
0009d2  e007              B        |L1.2532|
                  |L1.2516|
0009d4  f04f0755          MOV      r7,#0x55              ;685
0009d8  e004              B        |L1.2532|
                  |L1.2522|
0009da  f04f0775          MOV      r7,#0x75              ;686
0009de  e001              B        |L1.2532|
                  |L1.2528|
0009e0  f04f074c          MOV      r7,#0x4c
                  |L1.2532|
;;;688    
;;;689    if(in==1)
;;;690    	{
;;;691    	//av_src[bps]=1;
;;;692    
;;;693    //	SET_REG(avar_ind_stat,1,3+dev,1);
;;;694    //	SET_REG(avar_stat,1,3+dev,1);
;;;695    	
;;;696    	if(v==0)bps[dev]._av|=(1<<0);
;;;697    	else if(v==1) bps[dev]._av|=(1<<1);
;;;698    	else if(v==2) bps[dev]._av|=(1<<2);
;;;699    	else if(v==3) bps[dev]._av|=(1<<3);
;;;700    
;;;701    	bps[dev]._last_avar=v;
;;;702    
;;;703    	//beep_init(0x33333333,'A');
;;;704    
;;;705    	event_ptr=lc640_read_int(PTR_EVENT_LOG);
;;;706    	event_ptr++;	
;;;707    	if(event_ptr>63)event_ptr=0;	
;;;708    	lc640_write_int(PTR_EVENT_LOG,event_ptr);	
;;;709    	
;;;710        event_cnt=lc640_read_int(CNT_EVENT_LOG);
;;;711    	if(event_cnt!=63)event_cnt=event_ptr;
;;;712    	lc640_write_int(CNT_EVENT_LOG,event_cnt); 
;;;713    	
;;;714    	lc640_adr=EVENT_LOG+(lc640_read_int(PTR_EVENT_LOG)*32);
;;;715    	
;;;716    	data[0]='S';
;;;717    	data[1]=dev; 
;;;718    	data[2]=avar_simbol;
;;;719    	data[3]=0;
;;;720    	lc640_write_long_ptr(lc640_adr,data);
;;;721    
;;;722    	data[0]=0;
;;;723    	data[1]=0;
;;;724    	data[2]=0;
;;;725    	data[3]=0;
;;;726    	lc640_write_long_ptr(lc640_adr+4,data);
;;;727    
;;;728    	data[0]=LPC_RTC->YEAR;
0009e4  f8df8400          LDR      r8,|L1.3560|
0009e8  f04f0900          MOV      r9,#0                 ;678
0009ec  48ff              LDR      r0,|L1.3564|
0009ee  eb0601c6          ADD      r1,r6,r6,LSL #3       ;696
0009f2  eb011106          ADD      r1,r1,r6,LSL #4       ;696
0009f6  f44f6a60          MOV      r10,#0xe00            ;705
0009fa  f44f6580          MOV      r5,#0x400             ;714
0009fe  eb000081          ADD      r0,r0,r1,LSL #2       ;696
000a02  2a01              CMP      r2,#1                 ;689
000a04  d002              BEQ      |L1.2572|
;;;729    	data[1]=LPC_RTC->MONTH;
;;;730    	data[2]=LPC_RTC->DOM;
;;;731    	data[3]=0;
;;;732    	lc640_write_long_ptr(lc640_adr+8,data);
;;;733    
;;;734    	data[0]=LPC_RTC->HOUR;
;;;735    	data[1]=LPC_RTC->MIN;
;;;736    	data[2]=LPC_RTC->SEC;
;;;737    	data[3]=0;
;;;738    	lc640_write_long_ptr(lc640_adr+12,data);
;;;739    	
;;;740    	data[0]='A';
;;;741    	data[1]='A';
;;;742    	data[2]='A';
;;;743    	data[3]='A';
;;;744    	lc640_write_long_ptr(lc640_adr+16,data);
;;;745    	
;;;746    	data[0]='A';
;;;747    	data[1]='A';
;;;748    	data[2]='A';
;;;749    	data[3]='A';
;;;750    	lc640_write_long_ptr(lc640_adr+20,data);
;;;751    	
;;;752    	data[0]='A';
;;;753    	data[1]='A';
;;;754    	data[2]='A';
;;;755    	data[3]='A';
;;;756    	lc640_write_long_ptr(lc640_adr+24,data);
;;;757    	
;;;758    	data[0]='A';
;;;759    	data[1]='A';
;;;760    	data[2]='A';
;;;761    	data[3]='A';
;;;762    	lc640_write_long_ptr(lc640_adr+28,data);		
;;;763    
;;;764    
;;;765    	if(dev==0)
;;;766    		{
;;;767    		if(v==0)
;;;768    		snmp_trap_send("BPS #1 Alarm, overheat",4,1,0);
;;;769    		else if(v==1)
;;;770    		snmp_trap_send("BPS #1 Alarm, voltage is up",4,1,1);
;;;771    		else if(v==2)
;;;772    		snmp_trap_send("BPS #1 Alarm, voltage is down",4,1,2);
;;;773    		else if(v==3)
;;;774    		snmp_trap_send("BPS #1 Alarm, connect is lost",4,1,3);
;;;775    		}
;;;776    	else if(dev==1)
;;;777    		{
;;;778    		if(v==0)
;;;779    		snmp_trap_send("BPS #2 Alarm, overheat",4,2,0);
;;;780    		else if(v==1)
;;;781    		snmp_trap_send("BPS #2 Alarm, voltage is up",4,2,1);
;;;782    		else if(v==2)
;;;783    		snmp_trap_send("BPS #2 Alarm, voltage is down",4,2,2);
;;;784    		else if(v==3)
;;;785    		snmp_trap_send("BPS #2 Alarm, connect is lost",4,2,3);
;;;786    		} 
;;;787    	else if(dev==2)
;;;788    		{
;;;789    		if(v==0)
;;;790    		snmp_trap_send("BPS #3 Alarm, overheat",4,3,0);
;;;791    		else if(v==1)
;;;792    		snmp_trap_send("BPS #3 Alarm, voltage is up",4,3,1);
;;;793    		else if(v==2)
;;;794    		snmp_trap_send("BPS #3 Alarm, voltage is down",4,3,2);
;;;795    		else if(v==3)
;;;796    		snmp_trap_send("BPS #3 Alarm, connect is lost",4,3,3);
;;;797    		} 	
;;;798    			
;;;799    	}
;;;800    
;;;801    else if(in==0)
000a06  2a00              CMP      r2,#0
000a08  d07e              BEQ      |L1.2824|
000a0a  e1c4              B        |L1.3478|
                  |L1.2572|
000a0c  b134              CBZ      r4,|L1.2588|
000a0e  2c01              CMP      r4,#1                 ;697
000a10  d009              BEQ      |L1.2598|
000a12  2c02              CMP      r4,#2                 ;698
000a14  d00c              BEQ      |L1.2608|
000a16  2c03              CMP      r4,#3                 ;699
000a18  d00f              BEQ      |L1.2618|
000a1a  e012              B        |L1.2626|
                  |L1.2588|
000a1c  7841              LDRB     r1,[r0,#1]            ;696
000a1e  f0410101          ORR      r1,r1,#1              ;696
000a22  7041              STRB     r1,[r0,#1]            ;696
000a24  e00d              B        |L1.2626|
                  |L1.2598|
000a26  7841              LDRB     r1,[r0,#1]            ;697
000a28  f0410102          ORR      r1,r1,#2              ;697
000a2c  7041              STRB     r1,[r0,#1]            ;697
000a2e  e008              B        |L1.2626|
                  |L1.2608|
000a30  7841              LDRB     r1,[r0,#1]            ;698
000a32  f0410104          ORR      r1,r1,#4              ;698
000a36  7041              STRB     r1,[r0,#1]            ;698
000a38  e003              B        |L1.2626|
                  |L1.2618|
000a3a  7841              LDRB     r1,[r0,#1]            ;699
000a3c  f0410108          ORR      r1,r1,#8              ;699
000a40  7041              STRB     r1,[r0,#1]            ;699
                  |L1.2626|
000a42  f8804057          STRB     r4,[r0,#0x57]         ;701
000a46  4650              MOV      r0,r10                ;705
000a48  f7fffffe          BL       lc640_read_int
000a4c  f1000001          ADD      r0,r0,#1              ;706
000a50  fa1ffb80          UXTH     r11,r0                ;706
000a54  f1bb0f3f          CMP      r11,#0x3f             ;707
000a58  d901              BLS      |L1.2654|
000a5a  f04f0b00          MOV      r11,#0                ;707
                  |L1.2654|
000a5e  fa0ff18b          SXTH     r1,r11                ;708
000a62  4650              MOV      r0,r10                ;708
000a64  f7fffffe          BL       lc640_write_int
000a68  f6406002          MOV      r0,#0xe02             ;710
000a6c  f7fffffe          BL       lc640_read_int
000a70  b280              UXTH     r0,r0                 ;710
000a72  283f              CMP      r0,#0x3f              ;711
000a74  d000              BEQ      |L1.2680|
000a76  4658              MOV      r0,r11                ;711
                  |L1.2680|
000a78  b201              SXTH     r1,r0                 ;712
000a7a  f6406002          MOV      r0,#0xe02             ;712
000a7e  f7fffffe          BL       lc640_write_int
000a82  4650              MOV      r0,r10                ;714
000a84  f7fffffe          BL       lc640_read_int
000a88  eb051040          ADD      r0,r5,r0,LSL #5       ;714
000a8c  b285              UXTH     r5,r0                 ;714
000a8e  f04f0053          MOV      r0,#0x53              ;716
000a92  f88d0000          STRB     r0,[sp,#0]            ;716
000a96  f88d6001          STRB     r6,[sp,#1]            ;717
000a9a  f88d7002          STRB     r7,[sp,#2]            ;718
000a9e  f88d9003          STRB     r9,[sp,#3]            ;719
000aa2  4669              MOV      r1,sp                 ;720
000aa4  4628              MOV      r0,r5                 ;720
000aa6  f7fffffe          BL       lc640_write_long_ptr
000aaa  f8cd9000          STR      r9,[sp,#0]            ;725
000aae  4669              MOV      r1,sp                 ;726
000ab0  1d28              ADDS     r0,r5,#4              ;726
000ab2  f7fffffe          BL       lc640_write_long_ptr
000ab6  f8b8003c          LDRH     r0,[r8,#0x3c]         ;728
000aba  f88d0000          STRB     r0,[sp,#0]            ;728
000abe  f8980038          LDRB     r0,[r8,#0x38]         ;729
000ac2  f88d0001          STRB     r0,[sp,#1]            ;729
000ac6  f898002c          LDRB     r0,[r8,#0x2c]         ;730
000aca  f88d0002          STRB     r0,[sp,#2]            ;730
000ace  f88d9003          STRB     r9,[sp,#3]            ;731
000ad2  4669              MOV      r1,sp                 ;732
000ad4  f1050008          ADD      r0,r5,#8              ;732
000ad8  f7fffffe          BL       lc640_write_long_ptr
000adc  f8980028          LDRB     r0,[r8,#0x28]         ;734
000ae0  f88d0000          STRB     r0,[sp,#0]            ;734
000ae4  f8980024          LDRB     r0,[r8,#0x24]         ;735
000ae8  f88d0001          STRB     r0,[sp,#1]            ;735
000aec  f8980020          LDRB     r0,[r8,#0x20]         ;736
000af0  f88d0002          STRB     r0,[sp,#2]            ;736
000af4  f88d9003          STRB     r9,[sp,#3]            ;737
000af8  4669              MOV      r1,sp                 ;738
000afa  f105000c          ADD      r0,r5,#0xc            ;738
000afe  f7fffffe          BL       lc640_write_long_ptr
000b02  f04f0741          MOV      r7,#0x41              ;740
000b06  e000              B        |L1.2826|
                  |L1.2824|
000b08  e0a5              B        |L1.3158|
                  |L1.2826|
000b0a  f88d7000          STRB     r7,[sp,#0]            ;740
000b0e  f88d7001          STRB     r7,[sp,#1]            ;741
000b12  f88d7002          STRB     r7,[sp,#2]            ;742
000b16  f88d7003          STRB     r7,[sp,#3]            ;743
000b1a  4669              MOV      r1,sp                 ;744
000b1c  f1050010          ADD      r0,r5,#0x10           ;744
000b20  f7fffffe          BL       lc640_write_long_ptr
000b24  f88d7000          STRB     r7,[sp,#0]            ;746
000b28  f88d7001          STRB     r7,[sp,#1]            ;747
000b2c  f88d7002          STRB     r7,[sp,#2]            ;748
000b30  f88d7003          STRB     r7,[sp,#3]            ;749
000b34  4669              MOV      r1,sp                 ;750
000b36  f1050014          ADD      r0,r5,#0x14           ;750
000b3a  f7fffffe          BL       lc640_write_long_ptr
000b3e  f88d7000          STRB     r7,[sp,#0]            ;752
000b42  f88d7001          STRB     r7,[sp,#1]            ;753
000b46  f88d7002          STRB     r7,[sp,#2]            ;754
000b4a  f88d7003          STRB     r7,[sp,#3]            ;755
000b4e  4669              MOV      r1,sp                 ;756
000b50  f1050018          ADD      r0,r5,#0x18           ;756
000b54  f7fffffe          BL       lc640_write_long_ptr
000b58  f88d7000          STRB     r7,[sp,#0]            ;758
000b5c  f88d7001          STRB     r7,[sp,#1]            ;759
000b60  f88d7002          STRB     r7,[sp,#2]            ;760
000b64  f88d7003          STRB     r7,[sp,#3]            ;761
000b68  4669              MOV      r1,sp                 ;762
000b6a  f105001c          ADD      r0,r5,#0x1c           ;762
000b6e  f7fffffe          BL       lc640_write_long_ptr
000b72  b126              CBZ      r6,|L1.2942|
000b74  2e01              CMP      r6,#1                 ;776
000b76  d026              BEQ      |L1.3014|
000b78  2e02              CMP      r6,#2                 ;787
000b7a  d048              BEQ      |L1.3086|
000b7c  e10b              B        |L1.3478|
                  |L1.2942|
000b7e  b134              CBZ      r4,|L1.2958|
000b80  2c01              CMP      r4,#1                 ;769
000b82  d00b              BEQ      |L1.2972|
000b84  2c02              CMP      r4,#2                 ;771
000b86  d010              BEQ      |L1.2986|
000b88  2c03              CMP      r4,#3                 ;773
000b8a  d015              BEQ      |L1.3000|
000b8c  e103              B        |L1.3478|
                  |L1.2958|
000b8e  2300              MOVS     r3,#0                 ;768
000b90  2201              MOVS     r2,#1                 ;768
000b92  2104              MOVS     r1,#4                 ;768
000b94  a096              ADR      r0,|L1.3568|
000b96  f7fffffe          BL       snmp_trap_send
000b9a  e0fc              B        |L1.3478|
                  |L1.2972|
000b9c  2301              MOVS     r3,#1                 ;770
000b9e  461a              MOV      r2,r3                 ;770
000ba0  2104              MOVS     r1,#4                 ;770
000ba2  a099              ADR      r0,|L1.3592|
000ba4  f7fffffe          BL       snmp_trap_send
000ba8  e0f5              B        |L1.3478|
                  |L1.2986|
000baa  2302              MOVS     r3,#2                 ;772
000bac  2201              MOVS     r2,#1                 ;772
000bae  2104              MOVS     r1,#4                 ;772
000bb0  a09c              ADR      r0,|L1.3620|
000bb2  f7fffffe          BL       snmp_trap_send
000bb6  e0ee              B        |L1.3478|
                  |L1.3000|
000bb8  2303              MOVS     r3,#3                 ;774
000bba  2201              MOVS     r2,#1                 ;774
000bbc  2104              MOVS     r1,#4                 ;774
000bbe  a0a1              ADR      r0,|L1.3652|
000bc0  f7fffffe          BL       snmp_trap_send
000bc4  e0e7              B        |L1.3478|
                  |L1.3014|
000bc6  b134              CBZ      r4,|L1.3030|
000bc8  2c01              CMP      r4,#1                 ;780
000bca  d00b              BEQ      |L1.3044|
000bcc  2c02              CMP      r4,#2                 ;782
000bce  d010              BEQ      |L1.3058|
000bd0  2c03              CMP      r4,#3                 ;784
000bd2  d015              BEQ      |L1.3072|
000bd4  e0df              B        |L1.3478|
                  |L1.3030|
000bd6  2300              MOVS     r3,#0                 ;779
000bd8  2202              MOVS     r2,#2                 ;779
000bda  2104              MOVS     r1,#4                 ;779
000bdc  a0a1              ADR      r0,|L1.3684|
000bde  f7fffffe          BL       snmp_trap_send
000be2  e0d8              B        |L1.3478|
                  |L1.3044|
000be4  2301              MOVS     r3,#1                 ;781
000be6  2202              MOVS     r2,#2                 ;781
000be8  2104              MOVS     r1,#4                 ;781
000bea  a0a4              ADR      r0,|L1.3708|
000bec  f7fffffe          BL       snmp_trap_send
000bf0  e0d1              B        |L1.3478|
                  |L1.3058|
000bf2  2302              MOVS     r3,#2                 ;783
000bf4  461a              MOV      r2,r3                 ;783
000bf6  2104              MOVS     r1,#4                 ;783
000bf8  a0a7              ADR      r0,|L1.3736|
000bfa  f7fffffe          BL       snmp_trap_send
000bfe  e0ca              B        |L1.3478|
                  |L1.3072|
000c00  2303              MOVS     r3,#3                 ;785
000c02  2202              MOVS     r2,#2                 ;785
000c04  2104              MOVS     r1,#4                 ;785
000c06  a0ac              ADR      r0,|L1.3768|
000c08  f7fffffe          BL       snmp_trap_send
000c0c  e0c3              B        |L1.3478|
                  |L1.3086|
000c0e  b134              CBZ      r4,|L1.3102|
000c10  2c01              CMP      r4,#1                 ;791
000c12  d00b              BEQ      |L1.3116|
000c14  2c02              CMP      r4,#2                 ;793
000c16  d010              BEQ      |L1.3130|
000c18  2c03              CMP      r4,#3                 ;795
000c1a  d015              BEQ      |L1.3144|
000c1c  e0bb              B        |L1.3478|
                  |L1.3102|
000c1e  2300              MOVS     r3,#0                 ;790
000c20  2203              MOVS     r2,#3                 ;790
000c22  2104              MOVS     r1,#4                 ;790
000c24  a0ac              ADR      r0,|L1.3800|
000c26  f7fffffe          BL       snmp_trap_send
000c2a  e0b4              B        |L1.3478|
                  |L1.3116|
000c2c  2301              MOVS     r3,#1                 ;792
000c2e  2203              MOVS     r2,#3                 ;792
000c30  2104              MOVS     r1,#4                 ;792
000c32  a0af              ADR      r0,|L1.3824|
000c34  f7fffffe          BL       snmp_trap_send
000c38  e0ad              B        |L1.3478|
                  |L1.3130|
000c3a  2302              MOVS     r3,#2                 ;794
000c3c  2203              MOVS     r2,#3                 ;794
000c3e  2104              MOVS     r1,#4                 ;794
000c40  a0b2              ADR      r0,|L1.3852|
000c42  f7fffffe          BL       snmp_trap_send
000c46  e0a6              B        |L1.3478|
                  |L1.3144|
000c48  2303              MOVS     r3,#3                 ;796
000c4a  461a              MOV      r2,r3                 ;796
000c4c  2104              MOVS     r1,#4                 ;796
000c4e  a0b7              ADR      r0,|L1.3884|
000c50  f7fffffe          BL       snmp_trap_send
000c54  e09f              B        |L1.3478|
                  |L1.3158|
;;;802    	{      
;;;803    //	av_bps[bps]=0;
;;;804    
;;;805    	//SET_REG(avar_stat,0,3+bps,1);
;;;806    	//if(AV_OFF_AVT) SET_REG(avar_ind_stat,0,3+bps,1);
;;;807    
;;;808         if(v==0) bps[dev]._av&=(~(1<<0));
000c56  b134              CBZ      r4,|L1.3174|
;;;809         else if(v==1) bps[dev]._av&=(~(1<<1));
000c58  2c01              CMP      r4,#1
000c5a  d009              BEQ      |L1.3184|
;;;810    	else if(v==2) bps[dev]._av&=(~(1<<2));
000c5c  2c02              CMP      r4,#2
000c5e  d00c              BEQ      |L1.3194|
;;;811    	else if(v==3) bps[dev]._av&=(~(1<<3));
000c60  2c03              CMP      r4,#3
000c62  d00f              BEQ      |L1.3204|
000c64  e012              B        |L1.3212|
                  |L1.3174|
000c66  7841              LDRB     r1,[r0,#1]            ;808
000c68  f0210101          BIC      r1,r1,#1              ;808
000c6c  7041              STRB     r1,[r0,#1]            ;808
000c6e  e00d              B        |L1.3212|
                  |L1.3184|
000c70  7841              LDRB     r1,[r0,#1]            ;809
000c72  f0210102          BIC      r1,r1,#2              ;809
000c76  7041              STRB     r1,[r0,#1]            ;809
000c78  e008              B        |L1.3212|
                  |L1.3194|
000c7a  7841              LDRB     r1,[r0,#1]            ;810
000c7c  f0210104          BIC      r1,r1,#4              ;810
000c80  7041              STRB     r1,[r0,#1]            ;810
000c82  e003              B        |L1.3212|
                  |L1.3204|
000c84  7841              LDRB     r1,[r0,#1]
000c86  f0210108          BIC      r1,r1,#8
000c8a  7041              STRB     r1,[r0,#1]
                  |L1.3212|
;;;812         
;;;813    //	if((bps[dev]._av&0x0f==0))
;;;814    //	     {
;;;815    		//SET_REG(avar_stat,0,3+bps,1);
;;;816    		//if(AV_OFF_AVT) SET_REG(avar_ind_stat,0,3+bps,1);
;;;817    //	     }
;;;818     
;;;819    	event_ptr=lc640_read_int(PTR_EVENT_LOG);
000c8c  4650              MOV      r0,r10
000c8e  f7fffffe          BL       lc640_read_int
000c92  fa1ffb80          UXTH     r11,r0
;;;820    	event_ptr_find=event_ptr;
000c96  465c              MOV      r4,r11
                  |L1.3224|
;;;821    	
;;;822    avar_src_hndl_lbl1: 
;;;823    
;;;824    	lc640_adr=EVENT_LOG+(event_ptr_find*32);
000c98  eb051044          ADD      r0,r5,r4,LSL #5
000c9c  fa1ffa80          UXTH     r10,r0
;;;825    
;;;826         lc640_read_long_ptr(lc640_adr,data);
000ca0  4669              MOV      r1,sp
000ca2  4650              MOV      r0,r10
000ca4  f7fffffe          BL       lc640_read_long_ptr
;;;827         
;;;828         if(!((data[0]=='S')&&(data[1]==dev)&&(data[2]==avar_simbol)))
000ca8  f89d0000          LDRB     r0,[sp,#0]
000cac  2853              CMP      r0,#0x53
000cae  d107              BNE      |L1.3264|
000cb0  f89d0001          LDRB     r0,[sp,#1]
000cb4  42b0              CMP      r0,r6
000cb6  d103              BNE      |L1.3264|
000cb8  f89d0002          LDRB     r0,[sp,#2]
000cbc  42b8              CMP      r0,r7
000cbe  d009              BEQ      |L1.3284|
                  |L1.3264|
;;;829         	{        
;;;830         	if(event_ptr_find)event_ptr_find--;
000cc0  b11c              CBZ      r4,|L1.3274|
000cc2  f1a40401          SUB      r4,r4,#1
000cc6  b2a4              UXTH     r4,r4
000cc8  e001              B        |L1.3278|
                  |L1.3274|
;;;831         	else event_ptr_find=63;
000cca  f04f043f          MOV      r4,#0x3f
                  |L1.3278|
;;;832         	if(event_ptr_find==event_ptr)goto avar_src_hndl_end;
000cce  455c              CMP      r4,r11
000cd0  d1e2              BNE      |L1.3224|
000cd2  e060              B        |L1.3478|
                  |L1.3284|
;;;833         	else goto avar_src_hndl_lbl1;
;;;834         	}
;;;835         else 
;;;836         	{
;;;837         	lc640_read_long_ptr(lc640_adr+16,data);
000cd4  4669              MOV      r1,sp
000cd6  f10a0010          ADD      r0,r10,#0x10
000cda  f7fffffe          BL       lc640_read_long_ptr
;;;838         	if(!((data[0]=='A')&&(data[1]=='A')&&(data[2]=='A')&&(data[3]=='A')))
000cde  f89d0000          LDRB     r0,[sp,#0]
000ce2  2841              CMP      r0,#0x41
000ce4  d10b              BNE      |L1.3326|
000ce6  f89d0001          LDRB     r0,[sp,#1]
000cea  2841              CMP      r0,#0x41
000cec  d107              BNE      |L1.3326|
000cee  f89d0002          LDRB     r0,[sp,#2]
000cf2  2841              CMP      r0,#0x41
000cf4  d103              BNE      |L1.3326|
000cf6  f89d0003          LDRB     r0,[sp,#3]
000cfa  2841              CMP      r0,#0x41
000cfc  d009              BEQ      |L1.3346|
                  |L1.3326|
;;;839         		{        
;;;840         		if(event_ptr_find)event_ptr_find--;
000cfe  b11c              CBZ      r4,|L1.3336|
000d00  f1a40401          SUB      r4,r4,#1
000d04  b2a4              UXTH     r4,r4
000d06  e001              B        |L1.3340|
                  |L1.3336|
;;;841             		else event_ptr_find=63;
000d08  f04f043f          MOV      r4,#0x3f
                  |L1.3340|
;;;842             		if(event_ptr_find==event_ptr)goto avar_src_hndl_end;
000d0c  455c              CMP      r4,r11
000d0e  d1c3              BNE      |L1.3224|
000d10  e041              B        |L1.3478|
                  |L1.3346|
;;;843         		else goto avar_src_hndl_lbl1;
;;;844         		}
;;;845    
;;;846         	}	
;;;847    
;;;848    
;;;849    	
;;;850    	data[0]=LPC_RTC->YEAR;
000d12  f8b8003c          LDRH     r0,[r8,#0x3c]
000d16  f88d0000          STRB     r0,[sp,#0]
;;;851    	data[1]=LPC_RTC->MONTH;
000d1a  f8980038          LDRB     r0,[r8,#0x38]
000d1e  f88d0001          STRB     r0,[sp,#1]
;;;852    	data[2]=LPC_RTC->DOM;
000d22  f898002c          LDRB     r0,[r8,#0x2c]
000d26  f88d0002          STRB     r0,[sp,#2]
;;;853    	data[3]=0;
000d2a  f88d9003          STRB     r9,[sp,#3]
;;;854    	lc640_write_long_ptr(lc640_adr+16,data);
000d2e  4669              MOV      r1,sp
000d30  f10a0010          ADD      r0,r10,#0x10
000d34  f7fffffe          BL       lc640_write_long_ptr
;;;855    
;;;856    	data[0]=LPC_RTC->HOUR;
000d38  f8980028          LDRB     r0,[r8,#0x28]
000d3c  f88d0000          STRB     r0,[sp,#0]
;;;857    	data[1]=LPC_RTC->MIN;
000d40  f8980024          LDRB     r0,[r8,#0x24]
000d44  f88d0001          STRB     r0,[sp,#1]
;;;858    	data[2]=LPC_RTC->SEC;
000d48  f8980020          LDRB     r0,[r8,#0x20]
000d4c  f88d0002          STRB     r0,[sp,#2]
;;;859    	data[3]=0;
000d50  f88d9003          STRB     r9,[sp,#3]
;;;860    	lc640_write_long_ptr(lc640_adr+20,data);
000d54  4669              MOV      r1,sp
000d56  f10a0014          ADD      r0,r10,#0x14
000d5a  f7fffffe          BL       lc640_write_long_ptr
;;;861    	
;;;862    	data[0]='B';
000d5e  f04f0442          MOV      r4,#0x42
000d62  f88d4000          STRB     r4,[sp,#0]
;;;863    	data[1]='B';
000d66  f88d4001          STRB     r4,[sp,#1]
;;;864    	data[2]='B';
000d6a  f88d4002          STRB     r4,[sp,#2]
;;;865    	data[3]='B';
000d6e  f88d4003          STRB     r4,[sp,#3]
;;;866    	lc640_write_long_ptr(lc640_adr+24,data);
000d72  4669              MOV      r1,sp
000d74  f10a0018          ADD      r0,r10,#0x18
000d78  f7fffffe          BL       lc640_write_long_ptr
;;;867    	
;;;868    	data[0]='B';
000d7c  f88d4000          STRB     r4,[sp,#0]
;;;869    	data[1]='B';
000d80  f88d4001          STRB     r4,[sp,#1]
;;;870    	data[2]='B';
000d84  f88d4002          STRB     r4,[sp,#2]
;;;871    	data[3]='B';
000d88  f88d4003          STRB     r4,[sp,#3]
;;;872    	lc640_write_long_ptr(lc640_adr+28,data);
000d8c  4669              MOV      r1,sp
000d8e  f10a001c          ADD      r0,r10,#0x1c
000d92  f7fffffe          BL       lc640_write_long_ptr
                  |L1.3478|
;;;873    	
;;;874    	}
;;;875    	
;;;876    avar_src_hndl_end:
;;;877    __nop();		
000d96  bf00              NOP      
                  |L1.3480|
;;;878    }
000d98  e485              B        |L1.1702|
;;;879    
                          ENDP

                  wrk_mem_hndl PROC
;;;880    //-----------------------------------------------
;;;881    void wrk_mem_hndl(char b)
000d9a  e92d41fc          PUSH     {r2-r8,lr}
;;;882    {
000d9e  4606              MOV      r6,r0
;;;883    char data[4];
;;;884    unsigned short event_ptr,lc640_adr/*,event_ptr_find*/,event_cnt;
;;;885    
;;;886    signed short temp_temp;
;;;887    
;;;888    if(bat[b]._Iintegr_<5) goto wrk_mem_hndl_end;
000da0  eb060046          ADD      r0,r6,r6,LSL #1
000da4  eb001106          ADD      r1,r0,r6,LSL #4
000da8  4868              LDR      r0,|L1.3916|
000daa  eb000481          ADD      r4,r0,r1,LSL #2
000dae  8be0              LDRH     r0,[r4,#0x1e]
000db0  2805              CMP      r0,#5
000db2  d318              BCC      |L1.3558|
;;;889    
;;;890    temp_temp=bat[b]._u_old[((bat_u_old_cnt+6)&0x07)]; 
000db4  4866              LDR      r0,|L1.3920|
000db6  8800              LDRH     r0,[r0,#0]  ; bat_u_old_cnt
000db8  f1000006          ADD      r0,r0,#6
000dbc  f0000007          AND      r0,r0,#7
000dc0  eb040040          ADD      r0,r4,r0,LSL #1
000dc4  8c00              LDRH     r0,[r0,#0x20]
000dc6  9000              STR      r0,[sp,#0]
;;;891    
;;;892    
;;;893    event_ptr=lc640_read_int(PTR_EVENT_LOG);
000dc8  f44f6760          MOV      r7,#0xe00
000dcc  4638              MOV      r0,r7
000dce  f7fffffe          BL       lc640_read_int
;;;894    event_ptr++;	
000dd2  f1000001          ADD      r0,r0,#1
000dd6  b285              UXTH     r5,r0
;;;895    if(event_ptr>63)event_ptr=0;	
000dd8  2d3f              CMP      r5,#0x3f
000dda  d901              BLS      |L1.3552|
000ddc  f04f0500          MOV      r5,#0
                  |L1.3552|
;;;896    lc640_write_int(PTR_EVENT_LOG,event_ptr);	
000de0  b229              SXTH     r1,r5
000de2  4638              MOV      r0,r7
000de4  e0b6              B        |L1.3924|
                  |L1.3558|
000de6  e11d              B        |L1.4132|
                  |L1.3560|
                          DCD      0x40024000
                  |L1.3564|
                          DCD      bps
                  |L1.3568|
000df0  42505320          DCB      "BPS #1 Alarm, overheat",0
000df4  23312041
000df8  6c61726d
000dfc  2c206f76
000e00  65726865
000e04  617400  
000e07  00                DCB      0
                  |L1.3592|
000e08  42505320          DCB      "BPS #1 Alarm, voltage is up",0
000e0c  23312041
000e10  6c61726d
000e14  2c20766f
000e18  6c746167
000e1c  65206973
000e20  20757000
                  |L1.3620|
000e24  42505320          DCB      "BPS #1 Alarm, voltage is down",0
000e28  23312041
000e2c  6c61726d
000e30  2c20766f
000e34  6c746167
000e38  65206973
000e3c  20646f77
000e40  6e00    
000e42  00                DCB      0
000e43  00                DCB      0
                  |L1.3652|
000e44  42505320          DCB      "BPS #1 Alarm, connect is lost",0
000e48  23312041
000e4c  6c61726d
000e50  2c20636f
000e54  6e6e6563
000e58  74206973
000e5c  206c6f73
000e60  7400    
000e62  00                DCB      0
000e63  00                DCB      0
                  |L1.3684|
000e64  42505320          DCB      "BPS #2 Alarm, overheat",0
000e68  23322041
000e6c  6c61726d
000e70  2c206f76
000e74  65726865
000e78  617400  
000e7b  00                DCB      0
                  |L1.3708|
000e7c  42505320          DCB      "BPS #2 Alarm, voltage is up",0
000e80  23322041
000e84  6c61726d
000e88  2c20766f
000e8c  6c746167
000e90  65206973
000e94  20757000
                  |L1.3736|
000e98  42505320          DCB      "BPS #2 Alarm, voltage is down",0
000e9c  23322041
000ea0  6c61726d
000ea4  2c20766f
000ea8  6c746167
000eac  65206973
000eb0  20646f77
000eb4  6e00    
000eb6  00                DCB      0
000eb7  00                DCB      0
                  |L1.3768|
000eb8  42505320          DCB      "BPS #2 Alarm, connect is lost",0
000ebc  23322041
000ec0  6c61726d
000ec4  2c20636f
000ec8  6e6e6563
000ecc  74206973
000ed0  206c6f73
000ed4  7400    
000ed6  00                DCB      0
000ed7  00                DCB      0
                  |L1.3800|
000ed8  42505320          DCB      "BPS #3 Alarm, overheat",0
000edc  23332041
000ee0  6c61726d
000ee4  2c206f76
000ee8  65726865
000eec  617400  
000eef  00                DCB      0
                  |L1.3824|
000ef0  42505320          DCB      "BPS #3 Alarm, voltage is up",0
000ef4  23332041
000ef8  6c61726d
000efc  2c20766f
000f00  6c746167
000f04  65206973
000f08  20757000
                  |L1.3852|
000f0c  42505320          DCB      "BPS #3 Alarm, voltage is down",0
000f10  23332041
000f14  6c61726d
000f18  2c20766f
000f1c  6c746167
000f20  65206973
000f24  20646f77
000f28  6e00    
000f2a  00                DCB      0
000f2b  00                DCB      0
                  |L1.3884|
000f2c  42505320          DCB      "BPS #3 Alarm, connect is lost",0
000f30  23332041
000f34  6c61726d
000f38  2c20636f
000f3c  6e6e6563
000f40  74206973
000f44  206c6f73
000f48  7400    
000f4a  00                DCB      0
000f4b  00                DCB      0
                  |L1.3916|
                          DCD      bat
                  |L1.3920|
                          DCD      bat_u_old_cnt
                  |L1.3924|
000f54  f7fffffe          BL       lc640_write_int
;;;897    	
;;;898    event_cnt=lc640_read_int(CNT_EVENT_LOG);
000f58  f6406802          MOV      r8,#0xe02
000f5c  4640              MOV      r0,r8
000f5e  f7fffffe          BL       lc640_read_int
000f62  b280              UXTH     r0,r0
;;;899    if(event_cnt!=63)event_cnt=event_ptr;
000f64  283f              CMP      r0,#0x3f
000f66  d000              BEQ      |L1.3946|
000f68  4628              MOV      r0,r5
                  |L1.3946|
;;;900    lc640_write_int(CNT_EVENT_LOG,event_cnt); 
000f6a  b201              SXTH     r1,r0
000f6c  4640              MOV      r0,r8
000f6e  f7fffffe          BL       lc640_write_int
;;;901    	
;;;902    lc640_adr=EVENT_LOG+(lc640_read_int(PTR_EVENT_LOG)*32);
000f72  4638              MOV      r0,r7
000f74  f7fffffe          BL       lc640_read_int
000f78  f44f6180          MOV      r1,#0x400
000f7c  eb011040          ADD      r0,r1,r0,LSL #5
000f80  b285              UXTH     r5,r0
;;;903    	
;;;904    data[0]='B';
000f82  f04f0042          MOV      r0,#0x42
000f86  f88d0004          STRB     r0,[sp,#4]
;;;905    data[1]=b; 
000f8a  f88d6005          STRB     r6,[sp,#5]
;;;906    data[2]='W';
000f8e  f04f0057          MOV      r0,#0x57
000f92  f88d0006          STRB     r0,[sp,#6]
;;;907    data[3]=0;
000f96  f04f0600          MOV      r6,#0
000f9a  f88d6007          STRB     r6,[sp,#7]
;;;908    
;;;909    lc640_write_long_ptr(lc640_adr,data);
000f9e  a901              ADD      r1,sp,#4
000fa0  4628              MOV      r0,r5
000fa2  f7fffffe          BL       lc640_write_long_ptr
;;;910    
;;;911    data[0]=*((char*)&bat[b]._Iintegr_);
000fa6  7fa0              LDRB     r0,[r4,#0x1e]
000fa8  f88d0004          STRB     r0,[sp,#4]
;;;912    data[1]=*(((char*)(&bat[b]._Iintegr_))+1);
000fac  7fe0              LDRB     r0,[r4,#0x1f]
000fae  f88d0005          STRB     r0,[sp,#5]
;;;913    data[2]=*((char*)&temp_temp);
000fb2  f89d0000          LDRB     r0,[sp,#0]
000fb6  f88d0006          STRB     r0,[sp,#6]
;;;914    data[3]=*(((char*)(&temp_temp))+1);
000fba  f89d0001          LDRB     r0,[sp,#1]
000fbe  f88d0007          STRB     r0,[sp,#7]
;;;915    lc640_write_long_ptr(lc640_adr+4,data);
000fc2  a901              ADD      r1,sp,#4
000fc4  1d28              ADDS     r0,r5,#4
000fc6  f7fffffe          BL       lc640_write_long_ptr
;;;916    
;;;917    lc640_write_long_ptr(lc640_adr+8,(char*)&bat[b]._wrk_date[0]);
000fca  f1040134          ADD      r1,r4,#0x34
000fce  f1050008          ADD      r0,r5,#8
000fd2  f7fffffe          BL       lc640_write_long_ptr
;;;918    	
;;;919    lc640_write_long_ptr(lc640_adr+12,(char*)&bat[b]._wrk_date[1]);
000fd6  f1040138          ADD      r1,r4,#0x38
000fda  f105000c          ADD      r0,r5,#0xc
000fde  f7fffffe          BL       lc640_write_long_ptr
;;;920    
;;;921    data[0]=LPC_RTC->YEAR;
000fe2  4cff              LDR      r4,|L1.5088|
000fe4  8ba0              LDRH     r0,[r4,#0x1c]
000fe6  f88d0004          STRB     r0,[sp,#4]
;;;922    data[1]=LPC_RTC->MONTH;
000fea  7e20              LDRB     r0,[r4,#0x18]
000fec  f88d0005          STRB     r0,[sp,#5]
;;;923    data[2]=LPC_RTC->DOM;
000ff0  7b20              LDRB     r0,[r4,#0xc]
000ff2  f88d0006          STRB     r0,[sp,#6]
;;;924    data[3]=0;
000ff6  f88d6007          STRB     r6,[sp,#7]
;;;925    lc640_write_long_ptr(lc640_adr+16,data);
000ffa  a901              ADD      r1,sp,#4
000ffc  f1050010          ADD      r0,r5,#0x10
001000  f7fffffe          BL       lc640_write_long_ptr
;;;926    
;;;927    data[0]=LPC_RTC->HOUR;
001004  7a20              LDRB     r0,[r4,#8]
001006  f88d0004          STRB     r0,[sp,#4]
;;;928    data[1]=LPC_RTC->MIN;
00100a  7920              LDRB     r0,[r4,#4]
00100c  f88d0005          STRB     r0,[sp,#5]
;;;929    data[2]=LPC_RTC->SEC;
001010  7820              LDRB     r0,[r4,#0]
001012  f88d0006          STRB     r0,[sp,#6]
;;;930    data[3]=0;
001016  f88d6007          STRB     r6,[sp,#7]
;;;931    lc640_write_long_ptr(lc640_adr+20,data);
00101a  a901              ADD      r1,sp,#4
00101c  f1050014          ADD      r0,r5,#0x14
001020  f7fffffe          BL       lc640_write_long_ptr
                  |L1.4132|
;;;932    	
;;;933    
;;;934    
;;;935    	
;;;936    wrk_mem_hndl_end:	
;;;937    __nop();
001024  bf00              NOP      
;;;938    }  
001026  e8bd81fc          POP      {r2-r8,pc}
;;;939    
                          ENDP

                  avar_bat_ips_hndl PROC
;;;941    //-----------------------------------------------
;;;942    void avar_bat_ips_hndl(char in)
00102a  e92d4ff8          PUSH     {r3-r11,lr}
;;;943    {
00102e  4602              MOV      r2,r0
;;;944    char data[4];
;;;945    unsigned short event_ptr,lc640_adr,event_ptr_find,event_cnt;
;;;946    
;;;947    if(in==1)
;;;948    	{
;;;949    	bat_ips._av|=1;
001030  48ec              LDR      r0,|L1.5092|
;;;950        ips_bat_av_stat=1;
001032  4ced              LDR      r4,|L1.5096|
;;;951    	ips_bat_av_vzvod=1;
001034  4bed              LDR      r3,|L1.5100|
;;;952    
;;;953    	event_ptr=lc640_read_int(PTR_EVENT_LOG);
;;;954    	event_ptr++;	
;;;955    	if(event_ptr>63)event_ptr=0;	
;;;956    	lc640_write_int(PTR_EVENT_LOG,event_ptr);	
;;;957    	
;;;958    	event_cnt=lc640_read_int(CNT_EVENT_LOG);
;;;959    	if(event_cnt!=63)event_cnt=event_ptr;
;;;960    	lc640_write_int(CNT_EVENT_LOG,event_cnt); 
;;;961    	
;;;962    	lc640_adr=EVENT_LOG+(lc640_read_int(PTR_EVENT_LOG)*32);
;;;963    	
;;;964    	data[0]='B';
;;;965    	data[1]=0;
;;;966    	data[2]='C';
;;;967    	data[3]=0;
;;;968    	lc640_write_long_ptr(lc640_adr,data);
;;;969    
;;;970    	data[0]=0;
;;;971    	data[1]=0;
;;;972    	data[2]=0;
;;;973    	data[3]=0;
;;;974    	lc640_write_long_ptr(lc640_adr+4,data);
;;;975    
;;;976    	data[0]=LPC_RTC->YEAR;
001036  f8df83b8          LDR      r8,|L1.5104|
00103a  f890103d          LDRB     r1,[r0,#0x3d]         ;949
00103e  f04f0742          MOV      r7,#0x42              ;964
001042  f44f6560          MOV      r5,#0xe00             ;953
001046  f04f0900          MOV      r9,#0                 ;955
00104a  f44f6a80          MOV      r10,#0x400            ;962
00104e  2a01              CMP      r2,#1                 ;947
001050  d002              BEQ      |L1.4184|
;;;977    	data[1]=LPC_RTC->MONTH;
;;;978    	data[2]=LPC_RTC->DOM;
;;;979    	data[3]=0;
;;;980    	lc640_write_long_ptr(lc640_adr+8,data);
;;;981    
;;;982    	data[0]=LPC_RTC->HOUR;
;;;983    	data[1]=LPC_RTC->MIN;
;;;984    	data[2]=LPC_RTC->SEC;
;;;985    	data[3]=0;
;;;986    	lc640_write_long_ptr(lc640_adr+12,data);
;;;987    	
;;;988    	data[0]='A';
;;;989    	data[1]='A';
;;;990    	data[2]='A';
;;;991    	data[3]='A';
;;;992    	lc640_write_long_ptr(lc640_adr+16,data);
;;;993    	
;;;994    	data[0]='A';
;;;995    	data[1]='A';
;;;996    	data[2]='A';
;;;997    	data[3]='A';
;;;998    	lc640_write_long_ptr(lc640_adr+20,data);
;;;999    	
;;;1000   	data[0]='A';
;;;1001   	data[1]='A';
;;;1002   	data[2]='A';
;;;1003   	data[3]='A';
;;;1004   	lc640_write_long_ptr(lc640_adr+24,data);
;;;1005   	
;;;1006   	data[0]='A';
;;;1007   	data[1]='A';
;;;1008   	data[2]='A';
;;;1009   	data[3]='A';
;;;1010   	lc640_write_long_ptr(lc640_adr+28,data);
;;;1011   					
;;;1012   	snmp_trap_send("BAT 1 Alarm, lost",5,1,1);
;;;1013   		
;;;1014   	}
;;;1015   
;;;1016   else if(in==0)
001052  2a00              CMP      r2,#0
001054  d07e              BEQ      |L1.4436|
001056  e12f              B        |L1.4792|
                  |L1.4184|
001058  f0410101          ORR      r1,r1,#1              ;949
00105c  f880103d          STRB     r1,[r0,#0x3d]         ;949
001060  f04f0001          MOV      r0,#1                 ;950
001064  7020              STRB     r0,[r4,#0]            ;950
001066  7018              STRB     r0,[r3,#0]            ;951
001068  4628              MOV      r0,r5                 ;953
00106a  f7fffffe          BL       lc640_read_int
00106e  f1000001          ADD      r0,r0,#1              ;954
001072  b284              UXTH     r4,r0                 ;954
001074  2c3f              CMP      r4,#0x3f              ;955
001076  d901              BLS      |L1.4220|
001078  f04f0400          MOV      r4,#0                 ;955
                  |L1.4220|
00107c  b221              SXTH     r1,r4                 ;956
00107e  4628              MOV      r0,r5                 ;956
001080  f7fffffe          BL       lc640_write_int
001084  f6406602          MOV      r6,#0xe02             ;958
001088  4630              MOV      r0,r6                 ;958
00108a  f7fffffe          BL       lc640_read_int
00108e  b281              UXTH     r1,r0                 ;958
001090  293f              CMP      r1,#0x3f              ;959
001092  d000              BEQ      |L1.4246|
001094  4621              MOV      r1,r4                 ;959
                  |L1.4246|
001096  b209              SXTH     r1,r1                 ;960
001098  4630              MOV      r0,r6                 ;960
00109a  f7fffffe          BL       lc640_write_int
00109e  4628              MOV      r0,r5                 ;962
0010a0  f7fffffe          BL       lc640_read_int
0010a4  eb0a1040          ADD      r0,r10,r0,LSL #5      ;962
0010a8  b284              UXTH     r4,r0                 ;962
0010aa  f88d7000          STRB     r7,[sp,#0]            ;964
0010ae  f88d9001          STRB     r9,[sp,#1]            ;965
0010b2  f04f0043          MOV      r0,#0x43              ;966
0010b6  f88d0002          STRB     r0,[sp,#2]            ;966
0010ba  f88d9003          STRB     r9,[sp,#3]            ;967
0010be  4669              MOV      r1,sp                 ;968
0010c0  4620              MOV      r0,r4                 ;968
0010c2  f7fffffe          BL       lc640_write_long_ptr
0010c6  f8cd9000          STR      r9,[sp,#0]            ;973
0010ca  4669              MOV      r1,sp                 ;974
0010cc  1d20              ADDS     r0,r4,#4              ;974
0010ce  f7fffffe          BL       lc640_write_long_ptr
0010d2  f8b8003c          LDRH     r0,[r8,#0x3c]         ;976
0010d6  f88d0000          STRB     r0,[sp,#0]            ;976
0010da  f8980038          LDRB     r0,[r8,#0x38]         ;977
0010de  f88d0001          STRB     r0,[sp,#1]            ;977
0010e2  f898002c          LDRB     r0,[r8,#0x2c]         ;978
0010e6  f88d0002          STRB     r0,[sp,#2]            ;978
0010ea  f88d9003          STRB     r9,[sp,#3]            ;979
0010ee  4669              MOV      r1,sp                 ;980
0010f0  f1040008          ADD      r0,r4,#8              ;980
0010f4  f7fffffe          BL       lc640_write_long_ptr
0010f8  f8980028          LDRB     r0,[r8,#0x28]         ;982
0010fc  f88d0000          STRB     r0,[sp,#0]            ;982
001100  f8980024          LDRB     r0,[r8,#0x24]         ;983
001104  f88d0001          STRB     r0,[sp,#1]            ;983
001108  f8980020          LDRB     r0,[r8,#0x20]         ;984
00110c  f88d0002          STRB     r0,[sp,#2]            ;984
001110  f88d9003          STRB     r9,[sp,#3]            ;985
001114  4669              MOV      r1,sp                 ;986
001116  f104000c          ADD      r0,r4,#0xc            ;986
00111a  f7fffffe          BL       lc640_write_long_ptr
00111e  f04f0541          MOV      r5,#0x41              ;988
001122  f88d5000          STRB     r5,[sp,#0]            ;988
001126  f88d5001          STRB     r5,[sp,#1]            ;989
00112a  f88d5002          STRB     r5,[sp,#2]            ;990
00112e  f88d5003          STRB     r5,[sp,#3]            ;991
001132  4669              MOV      r1,sp                 ;992
001134  f1040010          ADD      r0,r4,#0x10           ;992
001138  f7fffffe          BL       lc640_write_long_ptr
00113c  f88d5000          STRB     r5,[sp,#0]            ;994
001140  f88d5001          STRB     r5,[sp,#1]            ;995
001144  f88d5002          STRB     r5,[sp,#2]            ;996
001148  f88d5003          STRB     r5,[sp,#3]            ;997
00114c  4669              MOV      r1,sp                 ;998
00114e  f1040014          ADD      r0,r4,#0x14           ;998
001152  e000              B        |L1.4438|
                  |L1.4436|
001154  e022              B        |L1.4508|
                  |L1.4438|
001156  f7fffffe          BL       lc640_write_long_ptr
00115a  f88d5000          STRB     r5,[sp,#0]            ;1000
00115e  f88d5001          STRB     r5,[sp,#1]            ;1001
001162  f88d5002          STRB     r5,[sp,#2]            ;1002
001166  f88d5003          STRB     r5,[sp,#3]            ;1003
00116a  4669              MOV      r1,sp                 ;1004
00116c  f1040018          ADD      r0,r4,#0x18           ;1004
001170  f7fffffe          BL       lc640_write_long_ptr
001174  f88d5000          STRB     r5,[sp,#0]            ;1006
001178  f88d5001          STRB     r5,[sp,#1]            ;1007
00117c  f88d5002          STRB     r5,[sp,#2]            ;1008
001180  f88d5003          STRB     r5,[sp,#3]            ;1009
001184  4669              MOV      r1,sp                 ;1010
001186  f104001c          ADD      r0,r4,#0x1c           ;1010
00118a  f7fffffe          BL       lc640_write_long_ptr
00118e  2301              MOVS     r3,#1                 ;1012
001190  461a              MOV      r2,r3                 ;1012
001192  2105              MOVS     r1,#5                 ;1012
001194  a097              ADR      r0,|L1.5108|
001196  f7fffffe          BL       snmp_trap_send
00119a  e08d              B        |L1.4792|
                  |L1.4508|
;;;1017   	{
;;;1018   	bat_ips._av&=~1;
00119c  f0210101          BIC      r1,r1,#1
0011a0  f880103d          STRB     r1,[r0,#0x3d]
;;;1019   	ips_bat_av_stat=0;
0011a4  f8849000          STRB     r9,[r4,#0]
;;;1020   	ips_bat_av_vzvod=0;
0011a8  f8839000          STRB     r9,[r3,#0]
;;;1021        
;;;1022   	event_ptr=lc640_read_int(PTR_EVENT_LOG);
0011ac  4628              MOV      r0,r5
0011ae  f7fffffe          BL       lc640_read_int
0011b2  b286              UXTH     r6,r0
;;;1023   	event_ptr_find=event_ptr;
0011b4  4634              MOV      r4,r6
                  |L1.4534|
;;;1024   	
;;;1025   avar_bat_ips_hndl_lbl1: 
;;;1026   
;;;1027   	lc640_adr=EVENT_LOG+(event_ptr_find*32);
0011b6  eb0a1044          ADD      r0,r10,r4,LSL #5
0011ba  b285              UXTH     r5,r0
;;;1028   
;;;1029        lc640_read_long_ptr(lc640_adr,data);
0011bc  4669              MOV      r1,sp
0011be  4628              MOV      r0,r5
0011c0  f7fffffe          BL       lc640_read_long_ptr
;;;1030        
;;;1031        if(!((data[0]=='B')&&(data[1]==0)&&(data[2]=='C')))
0011c4  f89d0000          LDRB     r0,[sp,#0]
0011c8  2842              CMP      r0,#0x42
0011ca  d106              BNE      |L1.4570|
0011cc  f89d0001          LDRB     r0,[sp,#1]
0011d0  b918              CBNZ     r0,|L1.4570|
0011d2  f89d0002          LDRB     r0,[sp,#2]
0011d6  2843              CMP      r0,#0x43
0011d8  d009              BEQ      |L1.4590|
                  |L1.4570|
;;;1032        	{        
;;;1033        	if(event_ptr_find)event_ptr_find--;
0011da  b11c              CBZ      r4,|L1.4580|
0011dc  f1a40401          SUB      r4,r4,#1
0011e0  b2a4              UXTH     r4,r4
0011e2  e001              B        |L1.4584|
                  |L1.4580|
;;;1034        	else event_ptr_find=63;
0011e4  f04f043f          MOV      r4,#0x3f
                  |L1.4584|
;;;1035        	if(event_ptr_find==event_ptr)goto avar_bat_ips_hndl_end;
0011e8  42b4              CMP      r4,r6
0011ea  d1e4              BNE      |L1.4534|
0011ec  e064              B        |L1.4792|
                  |L1.4590|
;;;1036        	else goto avar_bat_ips_hndl_lbl1;
;;;1037        	}
;;;1038        else 
;;;1039        	{
;;;1040        	lc640_read_long_ptr(lc640_adr+16,data);
0011ee  4669              MOV      r1,sp
0011f0  f1050010          ADD      r0,r5,#0x10
0011f4  f7fffffe          BL       lc640_read_long_ptr
;;;1041        	if(!((data[0]=='A')&&(data[1]=='A')&&(data[2]=='A')&&(data[3]=='A')))
0011f8  f89d0000          LDRB     r0,[sp,#0]
0011fc  2841              CMP      r0,#0x41
0011fe  d10b              BNE      |L1.4632|
001200  f89d0001          LDRB     r0,[sp,#1]
001204  2841              CMP      r0,#0x41
001206  d107              BNE      |L1.4632|
001208  f89d0002          LDRB     r0,[sp,#2]
00120c  2841              CMP      r0,#0x41
00120e  d103              BNE      |L1.4632|
001210  f89d0003          LDRB     r0,[sp,#3]
001214  2841              CMP      r0,#0x41
001216  d009              BEQ      |L1.4652|
                  |L1.4632|
;;;1042        		{        
;;;1043        		if(event_ptr_find)event_ptr_find--;
001218  b11c              CBZ      r4,|L1.4642|
00121a  f1a40401          SUB      r4,r4,#1
00121e  b2a4              UXTH     r4,r4
001220  e001              B        |L1.4646|
                  |L1.4642|
;;;1044            		else event_ptr_find=63;
001222  f04f043f          MOV      r4,#0x3f
                  |L1.4646|
;;;1045            	    	if(event_ptr_find==event_ptr)goto avar_bat_ips_hndl_end;
001226  42b4              CMP      r4,r6
001228  d1c5              BNE      |L1.4534|
00122a  e045              B        |L1.4792|
                  |L1.4652|
;;;1046        		else goto avar_bat_ips_hndl_lbl1;
;;;1047        		}
;;;1048   
;;;1049        	}
;;;1050        		
;;;1051   	data[0]=LPC_RTC->YEAR;
00122c  f8b8003c          LDRH     r0,[r8,#0x3c]
001230  f88d0000          STRB     r0,[sp,#0]
;;;1052   	data[1]=LPC_RTC->MONTH;
001234  f8980038          LDRB     r0,[r8,#0x38]
001238  f88d0001          STRB     r0,[sp,#1]
;;;1053   	data[2]=LPC_RTC->DOM;
00123c  f898002c          LDRB     r0,[r8,#0x2c]
001240  f88d0002          STRB     r0,[sp,#2]
;;;1054   	data[3]=0;
001244  f88d9003          STRB     r9,[sp,#3]
;;;1055   	lc640_write_long_ptr(lc640_adr+16,data);
001248  4669              MOV      r1,sp
00124a  f1050010          ADD      r0,r5,#0x10
00124e  f7fffffe          BL       lc640_write_long_ptr
;;;1056   
;;;1057   	data[0]=LPC_RTC->HOUR;
001252  f8980028          LDRB     r0,[r8,#0x28]
001256  f88d0000          STRB     r0,[sp,#0]
;;;1058   	data[1]=LPC_RTC->MIN;
00125a  f8980024          LDRB     r0,[r8,#0x24]
00125e  f88d0001          STRB     r0,[sp,#1]
;;;1059   	data[2]=LPC_RTC->SEC;
001262  f8980020          LDRB     r0,[r8,#0x20]
001266  f88d0002          STRB     r0,[sp,#2]
;;;1060   	data[3]=0;
00126a  f88d9003          STRB     r9,[sp,#3]
;;;1061   	lc640_write_long_ptr(lc640_adr+20,data);
00126e  4669              MOV      r1,sp
001270  f1050014          ADD      r0,r5,#0x14
001274  f7fffffe          BL       lc640_write_long_ptr
;;;1062   	
;;;1063   	data[0]='B';
001278  f88d7000          STRB     r7,[sp,#0]
;;;1064   	data[1]='B';
00127c  f88d7001          STRB     r7,[sp,#1]
;;;1065   	data[2]='B';
001280  f88d7002          STRB     r7,[sp,#2]
;;;1066   	data[3]='B';
001284  f88d7003          STRB     r7,[sp,#3]
;;;1067   	lc640_write_long_ptr(lc640_adr+24,data);
001288  4669              MOV      r1,sp
00128a  f1050018          ADD      r0,r5,#0x18
00128e  f7fffffe          BL       lc640_write_long_ptr
;;;1068   	
;;;1069   	data[0]='B';
001292  f88d7000          STRB     r7,[sp,#0]
;;;1070   	data[1]='B';
001296  f88d7001          STRB     r7,[sp,#1]
;;;1071   	data[2]='B';
00129a  f88d7002          STRB     r7,[sp,#2]
;;;1072   	data[3]='B';
00129e  f88d7003          STRB     r7,[sp,#3]
;;;1073   	lc640_write_long_ptr(lc640_adr+28,data);
0012a2  4669              MOV      r1,sp
0012a4  f105001c          ADD      r0,r5,#0x1c
0012a8  f7fffffe          BL       lc640_write_long_ptr
;;;1074   	
;;;1075   	snmp_trap_send("BAT #1 detected",5,1,0);
0012ac  2300              MOVS     r3,#0
0012ae  2201              MOVS     r2,#1
0012b0  2105              MOVS     r1,#5
0012b2  a055              ADR      r0,|L1.5128|
0012b4  f7fffffe          BL       snmp_trap_send
                  |L1.4792|
;;;1076   	
;;;1077   	}
;;;1078   	
;;;1079   avar_bat_ips_hndl_end:
;;;1080   __nop();		
0012b8  bf00              NOP      
                  |L1.4794|
;;;1081   }
0012ba  e56d              B        |L1.3480|
;;;1082   
                          ENDP

                  avar_bat_hndl PROC
;;;1085   //-----------------------------------------------
;;;1086   void avar_bat_hndl(char b, char in)
0012bc  4770              BX       lr
;;;1087   {
;;;1088   char data[4];
;;;1089   unsigned short event_ptr,lc640_adr,event_ptr_find,event_cnt;
;;;1090   #ifndef UKU_220_IPS_TERMOKOMPENSAT	 //o_10
;;;1091   if(in==1)
;;;1092   	{
;;;1093   	bat[b]._av|=1;
;;;1094       
;;;1095   	event_ptr=lc640_read_int(PTR_EVENT_LOG);
;;;1096   	event_ptr++;	
;;;1097   	if(event_ptr>63)event_ptr=0;	
;;;1098   	lc640_write_int(PTR_EVENT_LOG,event_ptr);	
;;;1099   	
;;;1100        event_cnt=lc640_read_int(CNT_EVENT_LOG);
;;;1101   	if(event_cnt!=63)event_cnt=event_ptr;
;;;1102   	lc640_write_int(CNT_EVENT_LOG,event_cnt); 
;;;1103   	
;;;1104   	lc640_adr=EVENT_LOG+(lc640_read_int(PTR_EVENT_LOG)*32);
;;;1105   	
;;;1106   	data[0]='B';
;;;1107   	data[1]=b;
;;;1108   	data[2]='C';
;;;1109   	data[3]=0;
;;;1110   	lc640_write_long_ptr(lc640_adr,data);
;;;1111   
;;;1112   	data[0]=0;
;;;1113   	data[1]=0;
;;;1114   	data[2]=0;
;;;1115   	data[3]=0;
;;;1116   	lc640_write_long_ptr(lc640_adr+4,data);
;;;1117   
;;;1118   	data[0]=LPC_RTC->YEAR;
;;;1119   	data[1]=LPC_RTC->MONTH;
;;;1120   	data[2]=LPC_RTC->DOM;
;;;1121   	data[3]=0;
;;;1122   	lc640_write_long_ptr(lc640_adr+8,data);
;;;1123   
;;;1124   	data[0]=LPC_RTC->HOUR;
;;;1125   	data[1]=LPC_RTC->MIN;
;;;1126   	data[2]=LPC_RTC->SEC;
;;;1127   	data[3]=0;
;;;1128   	lc640_write_long_ptr(lc640_adr+12,data);
;;;1129   	
;;;1130   	data[0]='A';
;;;1131   	data[1]='A';
;;;1132   	data[2]='A';
;;;1133   	data[3]='A';
;;;1134   	lc640_write_long_ptr(lc640_adr+16,data);
;;;1135   	
;;;1136   	data[0]='A';
;;;1137   	data[1]='A';
;;;1138   	data[2]='A';
;;;1139   	data[3]='A';
;;;1140   	lc640_write_long_ptr(lc640_adr+20,data);
;;;1141   	
;;;1142   	data[0]='A';
;;;1143   	data[1]='A';
;;;1144   	data[2]='A';
;;;1145   	data[3]='A';
;;;1146   	lc640_write_long_ptr(lc640_adr+24,data);
;;;1147   	
;;;1148   	data[0]='A';
;;;1149   	data[1]='A';
;;;1150   	data[2]='A';
;;;1151   	data[3]='A';
;;;1152   	lc640_write_long_ptr(lc640_adr+28,data);
;;;1153   					
;;;1154   	if(b==0)
;;;1155   		{
;;;1156   		snmp_trap_send("BAT #1 Alarm, lost",5,1,1);
;;;1157   		}
;;;1158   	else if(b==1)
;;;1159   		{
;;;1160   		snmp_trap_send("BAT #2 Alarm, lost",5,2,1);
;;;1161   		} 
;;;1162   			
;;;1163   	}
;;;1164   
;;;1165   else if(in==0)
;;;1166   	{
;;;1167   	bat[b]._av&=~1;
;;;1168   
;;;1169        event_ptr=lc640_read_int(PTR_EVENT_LOG);
;;;1170   	event_ptr_find=event_ptr;
;;;1171   	
;;;1172   avar_bat_hndl_lbl1: 
;;;1173   
;;;1174   	lc640_adr=EVENT_LOG+(event_ptr_find*32);
;;;1175   
;;;1176        lc640_read_long_ptr(lc640_adr,data);
;;;1177        
;;;1178        if(!((data[0]=='B')&&(data[1]==b)&&(data[2]=='C')))
;;;1179        	{        
;;;1180        	if(event_ptr_find)event_ptr_find--;
;;;1181        	else event_ptr_find=63;
;;;1182        	if(event_ptr_find==event_ptr)goto avar_bat_hndl_end;
;;;1183        	else goto avar_bat_hndl_lbl1;
;;;1184        	}
;;;1185        else 
;;;1186        	{
;;;1187        	lc640_read_long_ptr(lc640_adr+16,data);
;;;1188        	if(!((data[0]=='A')&&(data[1]=='A')&&(data[2]=='A')&&(data[3]=='A')))
;;;1189        		{        
;;;1190        		if(event_ptr_find)event_ptr_find--;
;;;1191            		else event_ptr_find=63;
;;;1192            	    	if(event_ptr_find==event_ptr)goto avar_bat_hndl_end;
;;;1193        		else goto avar_bat_hndl_lbl1;
;;;1194        		}
;;;1195   
;;;1196        	}
;;;1197        		
;;;1198   	data[0]=LPC_RTC->YEAR;
;;;1199   	data[1]=LPC_RTC->MONTH;
;;;1200   	data[2]=LPC_RTC->DOM;
;;;1201   	data[3]=0;
;;;1202   	lc640_write_long_ptr(lc640_adr+16,data);
;;;1203   
;;;1204   	data[0]=LPC_RTC->HOUR;
;;;1205   	data[1]=LPC_RTC->MIN;
;;;1206   	data[2]=LPC_RTC->SEC;
;;;1207   	data[3]=0;
;;;1208   	lc640_write_long_ptr(lc640_adr+20,data);
;;;1209   	
;;;1210   	data[0]='B';
;;;1211   	data[1]='B';
;;;1212   	data[2]='B';
;;;1213   	data[3]='B';
;;;1214   	lc640_write_long_ptr(lc640_adr+24,data);
;;;1215   	
;;;1216   	data[0]='B';
;;;1217   	data[1]='B';
;;;1218   	data[2]='B';
;;;1219   	data[3]='B';
;;;1220   	lc640_write_long_ptr(lc640_adr+28,data);
;;;1221   	
;;;1222   	if(b==0)
;;;1223   		{
;;;1224   		snmp_trap_send("BAT #1 detected",5,1,0);
;;;1225   		}
;;;1226   	else if(b==1)
;;;1227   		{
;;;1228   		snmp_trap_send("BAT #2 detected",5,2,0);
;;;1229   		}
;;;1230   	
;;;1231   	}
;;;1232   	
;;;1233   avar_bat_hndl_end:
;;;1234   __nop();
;;;1235   #endif    //o_10		
;;;1236   }
;;;1237   
                          ENDP

                  avar_bat_temper_hndl PROC
;;;1238   //-----------------------------------------------
;;;1239   void avar_bat_temper_hndl(char b, char in)
0012be  e92d4ff8          PUSH     {r3-r11,lr}
;;;1240   {
0012c2  4605              MOV      r5,r0
0012c4  460e              MOV      r6,r1
;;;1241   char data[4];
;;;1242   unsigned short event_ptr,lc640_adr,event_ptr_find,event_cnt;
;;;1243   
;;;1244   if((in==1)||(in==3))
;;;1245   	{
;;;1246   	//bat[b]._av|=1;
;;;1247       
;;;1248   	event_ptr=lc640_read_int(PTR_EVENT_LOG);
;;;1249   	event_ptr++;	
;;;1250   	if(event_ptr>63)event_ptr=0;	
;;;1251   	lc640_write_int(PTR_EVENT_LOG,event_ptr);	
;;;1252   	
;;;1253        event_cnt=lc640_read_int(CNT_EVENT_LOG);
;;;1254   	if(event_cnt!=63)event_cnt=event_ptr;
;;;1255   	lc640_write_int(CNT_EVENT_LOG,event_cnt); 
;;;1256   	
;;;1257   	lc640_adr=EVENT_LOG+(lc640_read_int(PTR_EVENT_LOG)*32);
;;;1258   	
;;;1259   	data[0]='B';
;;;1260   	data[1]=b;
;;;1261   	data[2]='T';
;;;1262   	data[3]='1';
;;;1263   	if(in==3)data[3]='3';
;;;1264   	lc640_write_long_ptr(lc640_adr,data);
;;;1265   
;;;1266   	data[0]=0;
;;;1267   	data[1]=0;
;;;1268   	data[2]=0;
;;;1269   	data[3]=0;
;;;1270   	lc640_write_long_ptr(lc640_adr+4,data);
;;;1271   
;;;1272   	data[0]=LPC_RTC->YEAR;
0012c6  f8dfa128          LDR      r10,|L1.5104|
0012ca  f44f6060          MOV      r0,#0xe00             ;1248
0012ce  f44f6780          MOV      r7,#0x400             ;1257
0012d2  2e01              CMP      r6,#1                 ;1244
0012d4  d010              BEQ      |L1.4856|
0012d6  2e03              CMP      r6,#3                 ;1244
0012d8  d00e              BEQ      |L1.4856|
;;;1273   	data[1]=LPC_RTC->MONTH;
;;;1274   	data[2]=LPC_RTC->DOM;
;;;1275   	data[3]=0;
;;;1276   	lc640_write_long_ptr(lc640_adr+8,data);
;;;1277   
;;;1278   	data[0]=LPC_RTC->HOUR;
;;;1279   	data[1]=LPC_RTC->MIN;
;;;1280   	data[2]=LPC_RTC->SEC;
;;;1281   	data[3]=0;
;;;1282   	lc640_write_long_ptr(lc640_adr+12,data);
;;;1283   	
;;;1284   	data[0]='A';
;;;1285   	data[1]='A';
;;;1286   	data[2]='A';
;;;1287   	data[3]='A';
;;;1288   	lc640_write_long_ptr(lc640_adr+16,data);
;;;1289   	
;;;1290   	data[0]='A';
;;;1291   	data[1]='A';
;;;1292   	data[2]='A';
;;;1293   	data[3]='A';
;;;1294   	lc640_write_long_ptr(lc640_adr+20,data);
;;;1295   	
;;;1296   	data[0]='A';
;;;1297   	data[1]='A';
;;;1298   	data[2]='A';
;;;1299   	data[3]='A';
;;;1300   	lc640_write_long_ptr(lc640_adr+24,data);
;;;1301   	
;;;1302   	data[0]='A';
;;;1303   	data[1]='A';
;;;1304   	data[2]='A';
;;;1305   	data[3]='A';
;;;1306   	lc640_write_long_ptr(lc640_adr+28,data);
;;;1307   	if(in==1)
;;;1308   		{				
;;;1309   		if(b==0)
;;;1310   			{
;;;1311   			snmp_trap_send("BAT #1 Alarm, is heated",10,1,1);
;;;1312   			}
;;;1313   		else if(b==1)
;;;1314   			{
;;;1315   			snmp_trap_send("BAT #2 Alarm, is heated",10,2,1);
;;;1316   			} 
;;;1317   		}
;;;1318   	if(in==3)
;;;1319   		{				
;;;1320   		if(b==0)
;;;1321   			{
;;;1322   			snmp_trap_send("BAT #1 Alarm, is overheated",11,1,1);
;;;1323   			}
;;;1324   		else if(b==1)
;;;1325   			{
;;;1326   			snmp_trap_send("BAT #2 Alarm, is overheated",11,2,1);
;;;1327   			} 
;;;1328   		}			
;;;1329   	}
;;;1330   
;;;1331   else if((in==0)||(in==2))
0012da  b10e              CBZ      r6,|L1.4832|
0012dc  2e02              CMP      r6,#2
0012de  d17d              BNE      |L1.5084|
                  |L1.4832|
;;;1332   	{
;;;1333   	char i;
;;;1334   
;;;1335   	event_ptr=lc640_read_int(PTR_EVENT_LOG);
0012e0  f7fffffe          BL       lc640_read_int
0012e4  fa1ff980          UXTH     r9,r0
;;;1336   	event_ptr_find=event_ptr;
0012e8  464c              MOV      r4,r9
;;;1337   
;;;1338   /*	for (i=0;i<63;i++)
;;;1339   		{
;;;1340   		lc640_adr=EVENT_LOG+(event_ptr_find*32);
;;;1341   
;;;1342        	lc640_read_long_ptr(lc640_adr,data);
;;;1343        
;;;1344        	if(!((data[0]=='f')&&(data[2]=='Z')))
;;;1345        		{        
;;;1346        		if(event_ptr_find)event_ptr_find--;
;;;1347        		else event_ptr_find=63;
;;;1348        		if(event_ptr_find==event_ptr)
;;;1349   				{
;;;1350   				lc640_adr=0;
;;;1351   				break;
;;;1352   				}
;;;1353        		else continue;
;;;1354        		}
;;;1355        	else 
;;;1356        		{
;;;1357        		lc640_read_long_ptr(lc640_adr+16,data);
;;;1358        		if(!((data[0]=='A')&&(data[1]=='A')&&(data[2]=='A')&&(data[3]=='A')))
;;;1359        			{        
;;;1360        			if(event_ptr_find)event_ptr_find--;
;;;1361            		else event_ptr_find=63;
;;;1362            		if(event_ptr_find==event_ptr)
;;;1363   					{
;;;1364   					lc640_adr=0;
;;;1365   					break;
;;;1366   					}
;;;1367        			else continue;
;;;1368        			}
;;;1369        		}	
;;;1370   		}*/
;;;1371   	
;;;1372   	for (i=0;i<63;i++)
0012ea  f04f0800          MOV      r8,#0
                  |L1.4846|
;;;1373   		{
;;;1374   		char temp='1';
0012ee  f04f0b31          MOV      r11,#0x31
;;;1375   		if(in==2)temp='3';
0012f2  2e02              CMP      r6,#2
0012f4  d073              BEQ      |L1.5086|
0012f6  e0e3              B        |L1.5312|
                  |L1.4856|
0012f8  4680              MOV      r8,r0                 ;1248
0012fa  f7fffffe          BL       lc640_read_int
0012fe  f1000001          ADD      r0,r0,#1              ;1249
001302  b284              UXTH     r4,r0                 ;1249
001304  2c3f              CMP      r4,#0x3f              ;1250
001306  d901              BLS      |L1.4876|
001308  f04f0400          MOV      r4,#0                 ;1250
                  |L1.4876|
00130c  b221              SXTH     r1,r4                 ;1251
00130e  4640              MOV      r0,r8                 ;1251
001310  f7fffffe          BL       lc640_write_int
001314  f6406902          MOV      r9,#0xe02             ;1253
001318  4648              MOV      r0,r9                 ;1253
00131a  f7fffffe          BL       lc640_read_int
00131e  b280              UXTH     r0,r0                 ;1253
001320  283f              CMP      r0,#0x3f              ;1254
001322  d000              BEQ      |L1.4902|
001324  4620              MOV      r0,r4                 ;1254
                  |L1.4902|
001326  b201              SXTH     r1,r0                 ;1255
001328  4648              MOV      r0,r9                 ;1255
00132a  f7fffffe          BL       lc640_write_int
00132e  4640              MOV      r0,r8                 ;1257
001330  f7fffffe          BL       lc640_read_int
001334  eb071040          ADD      r0,r7,r0,LSL #5       ;1257
001338  b284              UXTH     r4,r0                 ;1257
00133a  f04f0042          MOV      r0,#0x42              ;1259
00133e  f88d0000          STRB     r0,[sp,#0]            ;1259
001342  f88d5001          STRB     r5,[sp,#1]            ;1260
001346  f04f0054          MOV      r0,#0x54              ;1261
00134a  f88d0002          STRB     r0,[sp,#2]            ;1261
00134e  f04f0031          MOV      r0,#0x31              ;1262
001352  f88d0003          STRB     r0,[sp,#3]            ;1262
001356  2e03              CMP      r6,#3                 ;1263
001358  d103              BNE      |L1.4962|
00135a  f04f0033          MOV      r0,#0x33              ;1263
00135e  f88d0003          STRB     r0,[sp,#3]            ;1263
                  |L1.4962|
001362  4669              MOV      r1,sp                 ;1264
001364  4620              MOV      r0,r4                 ;1264
001366  f7fffffe          BL       lc640_write_long_ptr
00136a  f04f0700          MOV      r7,#0                 ;1266
00136e  9700              STR      r7,[sp,#0]            ;1269
001370  4669              MOV      r1,sp                 ;1270
001372  f1040004          ADD      r0,r4,#4              ;1270
001376  f7fffffe          BL       lc640_write_long_ptr
00137a  f8ba003c          LDRH     r0,[r10,#0x3c]        ;1272
00137e  f88d0000          STRB     r0,[sp,#0]            ;1272
001382  f89a0038          LDRB     r0,[r10,#0x38]        ;1273
001386  f88d0001          STRB     r0,[sp,#1]            ;1273
00138a  f89a002c          LDRB     r0,[r10,#0x2c]        ;1274
00138e  f88d0002          STRB     r0,[sp,#2]            ;1274
001392  f88d7003          STRB     r7,[sp,#3]            ;1275
001396  4669              MOV      r1,sp                 ;1276
001398  f1040008          ADD      r0,r4,#8              ;1276
00139c  f7fffffe          BL       lc640_write_long_ptr
0013a0  f89a0028          LDRB     r0,[r10,#0x28]        ;1278
0013a4  f88d0000          STRB     r0,[sp,#0]            ;1278
0013a8  f89a0024          LDRB     r0,[r10,#0x24]        ;1279
0013ac  f88d0001          STRB     r0,[sp,#1]            ;1279
0013b0  f89a0020          LDRB     r0,[r10,#0x20]        ;1280
0013b4  f88d0002          STRB     r0,[sp,#2]            ;1280
0013b8  f88d7003          STRB     r7,[sp,#3]            ;1281
0013bc  4669              MOV      r1,sp                 ;1282
0013be  f104000c          ADD      r0,r4,#0xc            ;1282
0013c2  f7fffffe          BL       lc640_write_long_ptr
0013c6  f04f0741          MOV      r7,#0x41              ;1284
0013ca  f88d7000          STRB     r7,[sp,#0]            ;1284
0013ce  f88d7001          STRB     r7,[sp,#1]            ;1285
0013d2  f88d7002          STRB     r7,[sp,#2]            ;1286
0013d6  f88d7003          STRB     r7,[sp,#3]            ;1287
0013da  e01d              B        |L1.5144|
                  |L1.5084|
0013dc  e066              B        |L1.5292|
                  |L1.5086|
0013de  e06d              B        |L1.5308|
                  |L1.5088|
                          DCD      0x40024020
                  |L1.5092|
                          DCD      bat_ips
                  |L1.5096|
                          DCD      ips_bat_av_stat
                  |L1.5100|
                          DCD      ips_bat_av_vzvod
                  |L1.5104|
                          DCD      0x40024000
                  |L1.5108|
0013f4  42415420          DCB      "BAT ",185,"1 Alarm, lost",0
0013f8  b9312041
0013fc  6c61726d
001400  2c206c6f
001404  737400  
001407  00                DCB      0
                  |L1.5128|
001408  42415420          DCB      "BAT #1 detected",0
00140c  23312064
001410  65746563
001414  74656400
                  |L1.5144|
001418  4669              MOV      r1,sp                 ;1288
00141a  f1040010          ADD      r0,r4,#0x10           ;1288
00141e  f7fffffe          BL       lc640_write_long_ptr
001422  f88d7000          STRB     r7,[sp,#0]            ;1290
001426  f88d7001          STRB     r7,[sp,#1]            ;1291
00142a  f88d7002          STRB     r7,[sp,#2]            ;1292
00142e  f88d7003          STRB     r7,[sp,#3]            ;1293
001432  4669              MOV      r1,sp                 ;1294
001434  f1040014          ADD      r0,r4,#0x14           ;1294
001438  f7fffffe          BL       lc640_write_long_ptr
00143c  f88d7000          STRB     r7,[sp,#0]            ;1296
001440  f88d7001          STRB     r7,[sp,#1]            ;1297
001444  f88d7002          STRB     r7,[sp,#2]            ;1298
001448  f88d7003          STRB     r7,[sp,#3]            ;1299
00144c  4669              MOV      r1,sp                 ;1300
00144e  f1040018          ADD      r0,r4,#0x18           ;1300
001452  f7fffffe          BL       lc640_write_long_ptr
001456  f88d7000          STRB     r7,[sp,#0]            ;1302
00145a  f88d7001          STRB     r7,[sp,#1]            ;1303
00145e  f88d7002          STRB     r7,[sp,#2]            ;1304
001462  f88d7003          STRB     r7,[sp,#3]            ;1305
001466  4669              MOV      r1,sp                 ;1306
001468  f104001c          ADD      r0,r4,#0x1c           ;1306
00146c  f7fffffe          BL       lc640_write_long_ptr
001470  2e01              CMP      r6,#1                 ;1307
001472  d110              BNE      |L1.5270|
001474  b115              CBZ      r5,|L1.5244|
001476  2d01              CMP      r5,#1                 ;1313
001478  d007              BEQ      |L1.5258|
00147a  e00c              B        |L1.5270|
                  |L1.5244|
00147c  2301              MOVS     r3,#1                 ;1311
00147e  461a              MOV      r2,r3                 ;1311
001480  210a              MOVS     r1,#0xa               ;1311
001482  a0f9              ADR      r0,|L1.6248|
001484  f7fffffe          BL       snmp_trap_send
001488  e005              B        |L1.5270|
                  |L1.5258|
00148a  2301              MOVS     r3,#1                 ;1315
00148c  2202              MOVS     r2,#2                 ;1315
00148e  210a              MOVS     r1,#0xa               ;1315
001490  a0fb              ADR      r0,|L1.6272|
001492  f7fffffe          BL       snmp_trap_send
                  |L1.5270|
001496  2e03              CMP      r6,#3                 ;1318
001498  d108              BNE      |L1.5292|
00149a  b145              CBZ      r5,|L1.5294|
00149c  2d01              CMP      r5,#1                 ;1324
00149e  d105              BNE      |L1.5292|
0014a0  2301              MOVS     r3,#1                 ;1326
0014a2  2202              MOVS     r2,#2                 ;1326
0014a4  210b              MOVS     r1,#0xb               ;1326
0014a6  a0fc              ADR      r0,|L1.6296|
0014a8  f7fffffe          BL       snmp_trap_send
                  |L1.5292|
;;;1376   
;;;1377   		lc640_adr=EVENT_LOG+(event_ptr_find*32);
;;;1378   
;;;1379        	lc640_read_long_ptr(lc640_adr,data);
;;;1380        
;;;1381        	if(!((data[0]=='B')&&(data[1]==b)&&(data[2]=='T')&&(data[3]==temp)))
;;;1382        		{        
;;;1383        		if(event_ptr_find)event_ptr_find--;
;;;1384        		else event_ptr_find=63;
;;;1385        		if(event_ptr_find==event_ptr)				{
;;;1386   				lc640_adr=0;
;;;1387   				break;
;;;1388   				}
;;;1389        		else continue;
;;;1390        		}
;;;1391   	     else 
;;;1392   	     	{
;;;1393   	     	lc640_read_long_ptr(lc640_adr+16,data);
;;;1394   	     	if(!((data[0]=='A')&&(data[1]=='A')&&(data[2]=='A')&&(data[3]=='A')))
;;;1395   	     		{        
;;;1396   	     		if(event_ptr_find)event_ptr_find--;
;;;1397   	         	else event_ptr_find=63;
;;;1398   	         	if(event_ptr_find==event_ptr)				{
;;;1399   					lc640_adr=0;
;;;1400   					break;
;;;1401   					}
;;;1402   	     		else continue;
;;;1403   	     		}
;;;1404   	
;;;1405   	     	}
;;;1406   		}
;;;1407        		
;;;1408   	data[0]=LPC_RTC->YEAR;
;;;1409   	data[1]=LPC_RTC->MONTH;
;;;1410   	data[2]=LPC_RTC->DOM;
;;;1411   	data[3]=0;
;;;1412   	lc640_write_long_ptr(lc640_adr+16,data);
;;;1413   
;;;1414   	data[0]=LPC_RTC->HOUR;
;;;1415   	data[1]=LPC_RTC->MIN;
;;;1416   	data[2]=LPC_RTC->SEC;
;;;1417   	data[3]=0;
;;;1418   	lc640_write_long_ptr(lc640_adr+20,data);
;;;1419   	
;;;1420   	data[0]='B';
;;;1421   	data[1]='B';
;;;1422   	data[2]='B';
;;;1423   	data[3]='B';
;;;1424   	lc640_write_long_ptr(lc640_adr+24,data);
;;;1425   	
;;;1426   	data[0]='B';
;;;1427   	data[1]='B';
;;;1428   	data[2]='B';
;;;1429   	data[3]='B';
;;;1430   	lc640_write_long_ptr(lc640_adr+28,data);
;;;1431   	
;;;1432   	if(in==0)
;;;1433   		{				
;;;1434   		if(b==0)
;;;1435   			{
;;;1436   			snmp_trap_send("BAT #1 Alarm, heating eliminated",10,1,0);
;;;1437   			}
;;;1438   		else if(b==1)
;;;1439   			{
;;;1440   			snmp_trap_send("BAT #2 Alarm, heating eliminated",10,2,0);
;;;1441   			} 
;;;1442   		}
;;;1443   	if(in==2)
;;;1444   		{				
;;;1445   		if(b==0)
;;;1446   			{
;;;1447   			snmp_trap_send("BAT #1 Alarm, overheating eliminated",11,1,0);
;;;1448   			}
;;;1449   		else if(b==1)
;;;1450   			{
;;;1451   			snmp_trap_send("BAT #2 Alarm, overheating eliminated",11,2,0);
;;;1452   			} 
;;;1453   		}		
;;;1454   	
;;;1455   	}
;;;1456   	
;;;1457   }
0014ac  e474              B        |L1.3480|
                  |L1.5294|
0014ae  2301              MOVS     r3,#1                 ;1322
0014b0  461a              MOV      r2,r3                 ;1322
0014b2  210b              MOVS     r1,#0xb               ;1322
0014b4  a0ff              ADR      r0,|L1.6324|
0014b6  f7fffffe          BL       snmp_trap_send
0014ba  e46d              B        |L1.3480|
                  |L1.5308|
0014bc  f04f0b33          MOV      r11,#0x33             ;1375
                  |L1.5312|
0014c0  f44f6080          MOV      r0,#0x400             ;1377
0014c4  eb001044          ADD      r0,r0,r4,LSL #5       ;1377
0014c8  b287              UXTH     r7,r0                 ;1377
0014ca  4669              MOV      r1,sp                 ;1379
0014cc  4638              MOV      r0,r7                 ;1379
0014ce  f7fffffe          BL       lc640_read_long_ptr
0014d2  f89d0000          LDRB     r0,[sp,#0]            ;1381
0014d6  2842              CMP      r0,#0x42              ;1381
0014d8  d10b              BNE      |L1.5362|
0014da  f89d0001          LDRB     r0,[sp,#1]            ;1381
0014de  42a8              CMP      r0,r5                 ;1381
0014e0  d107              BNE      |L1.5362|
0014e2  f89d0002          LDRB     r0,[sp,#2]            ;1381
0014e6  2854              CMP      r0,#0x54              ;1381
0014e8  d103              BNE      |L1.5362|
0014ea  f89d0003          LDRB     r0,[sp,#3]            ;1381
0014ee  4558              CMP      r0,r11                ;1381
0014f0  d00b              BEQ      |L1.5386|
                  |L1.5362|
0014f2  b11c              CBZ      r4,|L1.5372|
0014f4  f1a40401          SUB      r4,r4,#1              ;1383
0014f8  b2a4              UXTH     r4,r4                 ;1383
0014fa  e001              B        |L1.5376|
                  |L1.5372|
0014fc  f04f043f          MOV      r4,#0x3f              ;1384
                  |L1.5376|
001500  454c              CMP      r4,r9                 ;1385
001502  d123              BNE      |L1.5452|
001504  f04f0700          MOV      r7,#0                 ;1386
001508  e028              B        |L1.5468|
                  |L1.5386|
00150a  4669              MOV      r1,sp                 ;1393
00150c  f1070010          ADD      r0,r7,#0x10           ;1393
001510  f7fffffe          BL       lc640_read_long_ptr
001514  f89d0000          LDRB     r0,[sp,#0]            ;1394
001518  2841              CMP      r0,#0x41              ;1394
00151a  d10b              BNE      |L1.5428|
00151c  f89d0001          LDRB     r0,[sp,#1]            ;1394
001520  2841              CMP      r0,#0x41              ;1394
001522  d107              BNE      |L1.5428|
001524  f89d0002          LDRB     r0,[sp,#2]            ;1394
001528  2841              CMP      r0,#0x41              ;1394
00152a  d103              BNE      |L1.5428|
00152c  f89d0003          LDRB     r0,[sp,#3]            ;1394
001530  2841              CMP      r0,#0x41              ;1394
001532  d00b              BEQ      |L1.5452|
                  |L1.5428|
001534  b11c              CBZ      r4,|L1.5438|
001536  f1a40401          SUB      r4,r4,#1              ;1396
00153a  b2a4              UXTH     r4,r4                 ;1396
00153c  e001              B        |L1.5442|
                  |L1.5438|
00153e  f04f043f          MOV      r4,#0x3f              ;1397
                  |L1.5442|
001542  454c              CMP      r4,r9                 ;1398
001544  d102              BNE      |L1.5452|
001546  f04f0700          MOV      r7,#0                 ;1399
00154a  e007              B        |L1.5468|
                  |L1.5452|
00154c  f1080801          ADD      r8,r8,#1              ;1372
001550  f00808ff          AND      r8,r8,#0xff           ;1372
001554  f1b80f3f          CMP      r8,#0x3f              ;1372
001558  f4ffaec9          BCC      |L1.4846|
                  |L1.5468|
00155c  f8ba003c          LDRH     r0,[r10,#0x3c]        ;1408
001560  f88d0000          STRB     r0,[sp,#0]            ;1408
001564  f89a0038          LDRB     r0,[r10,#0x38]        ;1409
001568  f88d0001          STRB     r0,[sp,#1]            ;1409
00156c  f89a002c          LDRB     r0,[r10,#0x2c]        ;1410
001570  f88d0002          STRB     r0,[sp,#2]            ;1410
001574  f04f0400          MOV      r4,#0                 ;1411
001578  f88d4003          STRB     r4,[sp,#3]            ;1411
00157c  4669              MOV      r1,sp                 ;1412
00157e  f1070010          ADD      r0,r7,#0x10           ;1412
001582  f7fffffe          BL       lc640_write_long_ptr
001586  f89a0028          LDRB     r0,[r10,#0x28]        ;1414
00158a  f88d0000          STRB     r0,[sp,#0]            ;1414
00158e  f89a0024          LDRB     r0,[r10,#0x24]        ;1415
001592  f88d0001          STRB     r0,[sp,#1]            ;1415
001596  f89a0020          LDRB     r0,[r10,#0x20]        ;1416
00159a  f88d0002          STRB     r0,[sp,#2]            ;1416
00159e  f88d4003          STRB     r4,[sp,#3]            ;1417
0015a2  4669              MOV      r1,sp                 ;1418
0015a4  f1070014          ADD      r0,r7,#0x14           ;1418
0015a8  f7fffffe          BL       lc640_write_long_ptr
0015ac  f04f0442          MOV      r4,#0x42              ;1420
0015b0  f88d4000          STRB     r4,[sp,#0]            ;1420
0015b4  f88d4001          STRB     r4,[sp,#1]            ;1421
0015b8  f88d4002          STRB     r4,[sp,#2]            ;1422
0015bc  f88d4003          STRB     r4,[sp,#3]            ;1423
0015c0  4669              MOV      r1,sp                 ;1424
0015c2  f1070018          ADD      r0,r7,#0x18           ;1424
0015c6  f7fffffe          BL       lc640_write_long_ptr
0015ca  f88d4000          STRB     r4,[sp,#0]            ;1426
0015ce  f88d4001          STRB     r4,[sp,#1]            ;1427
0015d2  f88d4002          STRB     r4,[sp,#2]            ;1428
0015d6  f88d4003          STRB     r4,[sp,#3]            ;1429
0015da  4669              MOV      r1,sp                 ;1430
0015dc  f107001c          ADD      r0,r7,#0x1c           ;1430
0015e0  f7fffffe          BL       lc640_write_long_ptr
0015e4  b986              CBNZ     r6,|L1.5640|
0015e6  b115              CBZ      r5,|L1.5614|
0015e8  2d01              CMP      r5,#1                 ;1438
0015ea  d007              BEQ      |L1.5628|
0015ec  e00c              B        |L1.5640|
                  |L1.5614|
0015ee  2300              MOVS     r3,#0                 ;1436
0015f0  2201              MOVS     r2,#1                 ;1436
0015f2  210a              MOVS     r1,#0xa               ;1436
0015f4  a0b6              ADR      r0,|L1.6352|
0015f6  f7fffffe          BL       snmp_trap_send
0015fa  e005              B        |L1.5640|
                  |L1.5628|
0015fc  2300              MOVS     r3,#0                 ;1440
0015fe  2202              MOVS     r2,#2                 ;1440
001600  210a              MOVS     r1,#0xa               ;1440
001602  a0bc              ADR      r0,|L1.6388|
001604  f7fffffe          BL       snmp_trap_send
                  |L1.5640|
001608  2e02              CMP      r6,#2                 ;1443
                  |L1.5642|
00160a  f47faf4f          BNE      |L1.5292|
00160e  b145              CBZ      r5,|L1.5666|
001610  2d01              CMP      r5,#1                 ;1449
001612  d1fa              BNE      |L1.5642|
001614  2300              MOVS     r3,#0                 ;1451
001616  2202              MOVS     r2,#2                 ;1451
001618  210b              MOVS     r1,#0xb               ;1451
00161a  a0bf              ADR      r0,|L1.6424|
00161c  f7fffffe          BL       snmp_trap_send
                  |L1.5664|
001620  e64b              B        |L1.4794|
                  |L1.5666|
001622  2300              MOVS     r3,#0                 ;1447
001624  2201              MOVS     r2,#1                 ;1447
001626  210b              MOVS     r1,#0xb               ;1447
001628  a0c5              ADR      r0,|L1.6464|
00162a  f7fffffe          BL       snmp_trap_send
00162e  e644              B        |L1.4794|
;;;1458   
                          ENDP

                  avar_bat_as_hndl PROC
;;;1459   //-----------------------------------------------
;;;1460   void avar_bat_as_hndl(char b, char in)
001630  e92d4ff8          PUSH     {r3-r11,lr}
;;;1461   {
001634  4605              MOV      r5,r0
;;;1462   char data[4];
;;;1463   unsigned short event_ptr,lc640_adr,event_ptr_find,event_cnt;
;;;1464   
;;;1465   if(in==1)
;;;1466   	{
;;;1467   	bat[b]._av|=2;
001636  48cc              LDR      r0,|L1.6504|
001638  eb050245          ADD      r2,r5,r5,LSL #1
;;;1468       
;;;1469   	event_ptr=lc640_read_int(PTR_EVENT_LOG);
;;;1470   	event_ptr++;	
;;;1471   	if(event_ptr>63)event_ptr=0;	
;;;1472   	lc640_write_int(PTR_EVENT_LOG,event_ptr);	
;;;1473   	
;;;1474        event_cnt=lc640_read_int(CNT_EVENT_LOG);
;;;1475   	if(event_cnt!=63)event_cnt=event_ptr;
;;;1476   	lc640_write_int(CNT_EVENT_LOG,event_cnt); 
;;;1477   	
;;;1478   	lc640_adr=EVENT_LOG+(lc640_read_int(PTR_EVENT_LOG)*32);
;;;1479   	
;;;1480   	data[0]='B';
;;;1481   	data[1]=b;
;;;1482   	data[2]='S';
;;;1483   	data[3]=0;
;;;1484   	lc640_write_long_ptr(lc640_adr,data);
;;;1485   
;;;1486   	data[0]=0;
;;;1487   	data[1]=0;
;;;1488   	data[2]=0;
;;;1489   	data[3]=0;
;;;1490   	lc640_write_long_ptr(lc640_adr+4,data);
;;;1491   
;;;1492   	data[0]=LPC_RTC->YEAR;
00163c  f8df832c          LDR      r8,|L1.6508|
001640  eb021205          ADD      r2,r2,r5,LSL #4       ;1467
001644  f04f0a00          MOV      r10,#0                ;1471
001648  f04f0942          MOV      r9,#0x42              ;1480
00164c  f44f6660          MOV      r6,#0xe00             ;1469
001650  f44f6b80          MOV      r11,#0x400            ;1478
001654  eb000082          ADD      r0,r0,r2,LSL #2       ;1467
001658  2901              CMP      r1,#1                 ;1465
00165a  d002              BEQ      |L1.5730|
;;;1493   	data[1]=LPC_RTC->MONTH;
;;;1494   	data[2]=LPC_RTC->DOM;
;;;1495   	data[3]=0;
;;;1496   	lc640_write_long_ptr(lc640_adr+8,data);
;;;1497   
;;;1498   	data[0]=LPC_RTC->HOUR;
;;;1499   	data[1]=LPC_RTC->MIN;
;;;1500   	data[2]=LPC_RTC->SEC;
;;;1501   	data[3]=0;
;;;1502   	lc640_write_long_ptr(lc640_adr+12,data);
;;;1503   	
;;;1504   	data[0]='A';
;;;1505   	data[1]='A';
;;;1506   	data[2]='A';
;;;1507   	data[3]='A';
;;;1508   	lc640_write_long_ptr(lc640_adr+16,data);
;;;1509   	
;;;1510   	data[0]='A';
;;;1511   	data[1]='A';
;;;1512   	data[2]='A';
;;;1513   	data[3]='A';
;;;1514   	lc640_write_long_ptr(lc640_adr+20,data);
;;;1515   	
;;;1516   	data[0]='A';
;;;1517   	data[1]='A';
;;;1518   	data[2]='A';
;;;1519   	data[3]='A';
;;;1520   	lc640_write_long_ptr(lc640_adr+24,data);
;;;1521   	
;;;1522   	data[0]='A';
;;;1523   	data[1]='A';
;;;1524   	data[2]='A';
;;;1525   	data[3]='A';
;;;1526   	lc640_write_long_ptr(lc640_adr+28,data);				
;;;1527   
;;;1528   	if(b==0)
;;;1529   		{
;;;1530   		snmp_trap_send("BAT #1 Alarm, asymmetry",5,1,2);
;;;1531   		}
;;;1532   	else if(b==1)
;;;1533   		{
;;;1534   		snmp_trap_send("BAT #2 Alarm, asymmetry",5,2,2);
;;;1535   		} 
;;;1536   	
;;;1537   	}
;;;1538   
;;;1539   else if(in==0)
00165c  2900              CMP      r1,#0
00165e  d07d              BEQ      |L1.5980|
001660  e1de              B        |L1.6688|
                  |L1.5730|
001662  f8101f3d          LDRB     r1,[r0,#0x3d]!        ;1467
001666  f0410102          ORR      r1,r1,#2              ;1467
00166a  7001              STRB     r1,[r0,#0]            ;1467
00166c  4630              MOV      r0,r6                 ;1469
00166e  f7fffffe          BL       lc640_read_int
001672  f1000001          ADD      r0,r0,#1              ;1470
001676  b284              UXTH     r4,r0                 ;1470
001678  2c3f              CMP      r4,#0x3f              ;1471
00167a  d901              BLS      |L1.5760|
00167c  f04f0400          MOV      r4,#0                 ;1471
                  |L1.5760|
001680  b221              SXTH     r1,r4                 ;1472
001682  4630              MOV      r0,r6                 ;1472
001684  f7fffffe          BL       lc640_write_int
001688  f6406702          MOV      r7,#0xe02             ;1474
00168c  4638              MOV      r0,r7                 ;1474
00168e  f7fffffe          BL       lc640_read_int
001692  b280              UXTH     r0,r0                 ;1474
001694  283f              CMP      r0,#0x3f              ;1475
001696  d000              BEQ      |L1.5786|
001698  4620              MOV      r0,r4                 ;1475
                  |L1.5786|
00169a  b201              SXTH     r1,r0                 ;1476
00169c  4638              MOV      r0,r7                 ;1476
00169e  f7fffffe          BL       lc640_write_int
0016a2  4630              MOV      r0,r6                 ;1478
0016a4  f7fffffe          BL       lc640_read_int
0016a8  eb0b1040          ADD      r0,r11,r0,LSL #5      ;1478
0016ac  b284              UXTH     r4,r0                 ;1478
0016ae  f88d9000          STRB     r9,[sp,#0]            ;1480
0016b2  f88d5001          STRB     r5,[sp,#1]            ;1481
0016b6  f04f0053          MOV      r0,#0x53              ;1482
0016ba  f88d0002          STRB     r0,[sp,#2]            ;1482
0016be  f88da003          STRB     r10,[sp,#3]           ;1483
0016c2  4669              MOV      r1,sp                 ;1484
0016c4  4620              MOV      r0,r4                 ;1484
0016c6  f7fffffe          BL       lc640_write_long_ptr
0016ca  f8cda000          STR      r10,[sp,#0]           ;1489
0016ce  4669              MOV      r1,sp                 ;1490
0016d0  1d20              ADDS     r0,r4,#4              ;1490
0016d2  f7fffffe          BL       lc640_write_long_ptr
0016d6  f8b8003c          LDRH     r0,[r8,#0x3c]         ;1492
0016da  f88d0000          STRB     r0,[sp,#0]            ;1492
0016de  f8980038          LDRB     r0,[r8,#0x38]         ;1493
0016e2  f88d0001          STRB     r0,[sp,#1]            ;1493
0016e6  f898002c          LDRB     r0,[r8,#0x2c]         ;1494
0016ea  f88d0002          STRB     r0,[sp,#2]            ;1494
0016ee  f88da003          STRB     r10,[sp,#3]           ;1495
0016f2  4669              MOV      r1,sp                 ;1496
0016f4  f1040008          ADD      r0,r4,#8              ;1496
0016f8  f7fffffe          BL       lc640_write_long_ptr
0016fc  f8980028          LDRB     r0,[r8,#0x28]         ;1498
001700  f88d0000          STRB     r0,[sp,#0]            ;1498
001704  f8980024          LDRB     r0,[r8,#0x24]         ;1499
001708  f88d0001          STRB     r0,[sp,#1]            ;1499
00170c  f8980020          LDRB     r0,[r8,#0x20]         ;1500
001710  f88d0002          STRB     r0,[sp,#2]            ;1500
001714  f88da003          STRB     r10,[sp,#3]           ;1501
001718  4669              MOV      r1,sp                 ;1502
00171a  f104000c          ADD      r0,r4,#0xc            ;1502
00171e  f7fffffe          BL       lc640_write_long_ptr
001722  f04f0641          MOV      r6,#0x41              ;1504
001726  f88d6000          STRB     r6,[sp,#0]            ;1504
00172a  f88d6001          STRB     r6,[sp,#1]            ;1505
00172e  f88d6002          STRB     r6,[sp,#2]            ;1506
001732  f88d6003          STRB     r6,[sp,#3]            ;1507
001736  4669              MOV      r1,sp                 ;1508
001738  f1040010          ADD      r0,r4,#0x10           ;1508
00173c  f7fffffe          BL       lc640_write_long_ptr
001740  f88d6000          STRB     r6,[sp,#0]            ;1510
001744  f88d6001          STRB     r6,[sp,#1]            ;1511
001748  f88d6002          STRB     r6,[sp,#2]            ;1512
00174c  f88d6003          STRB     r6,[sp,#3]            ;1513
001750  4669              MOV      r1,sp                 ;1514
001752  f1040014          ADD      r0,r4,#0x14           ;1514
001756  f7fffffe          BL       lc640_write_long_ptr
00175a  e000              B        |L1.5982|
                  |L1.5980|
00175c  e02b              B        |L1.6070|
                  |L1.5982|
00175e  f88d6000          STRB     r6,[sp,#0]            ;1516
001762  f88d6001          STRB     r6,[sp,#1]            ;1517
001766  f88d6002          STRB     r6,[sp,#2]            ;1518
00176a  f88d6003          STRB     r6,[sp,#3]            ;1519
00176e  4669              MOV      r1,sp                 ;1520
001770  f1040018          ADD      r0,r4,#0x18           ;1520
001774  f7fffffe          BL       lc640_write_long_ptr
001778  f88d6000          STRB     r6,[sp,#0]            ;1522
00177c  f88d6001          STRB     r6,[sp,#1]            ;1523
001780  f88d6002          STRB     r6,[sp,#2]            ;1524
001784  f88d6003          STRB     r6,[sp,#3]            ;1525
001788  4669              MOV      r1,sp                 ;1526
00178a  f104001c          ADD      r0,r4,#0x1c           ;1526
00178e  f7fffffe          BL       lc640_write_long_ptr
001792  b115              CBZ      r5,|L1.6042|
001794  2d01              CMP      r5,#1                 ;1532
001796  d007              BEQ      |L1.6056|
001798  e142              B        |L1.6688|
                  |L1.6042|
00179a  2302              MOVS     r3,#2                 ;1530
00179c  2201              MOVS     r2,#1                 ;1530
00179e  2105              MOVS     r1,#5                 ;1530
0017a0  a073              ADR      r0,|L1.6512|
0017a2  f7fffffe          BL       snmp_trap_send
0017a6  e13b              B        |L1.6688|
                  |L1.6056|
0017a8  2302              MOVS     r3,#2                 ;1534
0017aa  461a              MOV      r2,r3                 ;1534
0017ac  2105              MOVS     r1,#5                 ;1534
0017ae  a076              ADR      r0,|L1.6536|
0017b0  f7fffffe          BL       snmp_trap_send
0017b4  e134              B        |L1.6688|
                  |L1.6070|
;;;1540   	{
;;;1541   	bat[b]._av&=~(1<<1);
0017b6  f8101f3d          LDRB     r1,[r0,#0x3d]!
0017ba  f0210102          BIC      r1,r1,#2
0017be  7001              STRB     r1,[r0,#0]
;;;1542   
;;;1543        event_ptr=lc640_read_int(PTR_EVENT_LOG);
0017c0  4630              MOV      r0,r6
0017c2  f7fffffe          BL       lc640_read_int
0017c6  b287              UXTH     r7,r0
;;;1544   	event_ptr_find=event_ptr;
0017c8  463c              MOV      r4,r7
                  |L1.6090|
;;;1545   	
;;;1546   avar_bat_as_hndl_lbl1: 
;;;1547   
;;;1548   	lc640_adr=EVENT_LOG+(event_ptr_find*32);
0017ca  eb0b1044          ADD      r0,r11,r4,LSL #5
0017ce  b286              UXTH     r6,r0
;;;1549   
;;;1550        lc640_read_long_ptr(lc640_adr,data);
0017d0  4669              MOV      r1,sp
0017d2  4630              MOV      r0,r6
0017d4  f7fffffe          BL       lc640_read_long_ptr
;;;1551        
;;;1552        if(!((data[0]=='B')&&(data[1]==b)&&(data[2]=='C')))
0017d8  f89d0000          LDRB     r0,[sp,#0]
0017dc  2842              CMP      r0,#0x42
0017de  d107              BNE      |L1.6128|
0017e0  f89d0001          LDRB     r0,[sp,#1]
0017e4  42a8              CMP      r0,r5
0017e6  d103              BNE      |L1.6128|
0017e8  f89d0002          LDRB     r0,[sp,#2]
0017ec  2843              CMP      r0,#0x43
0017ee  d009              BEQ      |L1.6148|
                  |L1.6128|
;;;1553        	{        
;;;1554        	if(event_ptr_find)event_ptr_find--;
0017f0  b11c              CBZ      r4,|L1.6138|
0017f2  f1a40401          SUB      r4,r4,#1
0017f6  b2a4              UXTH     r4,r4
0017f8  e001              B        |L1.6142|
                  |L1.6138|
;;;1555        	else event_ptr_find=63;
0017fa  f04f043f          MOV      r4,#0x3f
                  |L1.6142|
;;;1556        	if(event_ptr_find==event_ptr)goto avar_bat_as_hndl_end;
0017fe  42bc              CMP      r4,r7
001800  d1e3              BNE      |L1.6090|
001802  e10d              B        |L1.6688|
                  |L1.6148|
;;;1557        	else goto avar_bat_as_hndl_lbl1;
;;;1558        	}
;;;1559        else 
;;;1560        	{
;;;1561        	lc640_read_long_ptr(lc640_adr+16,data);
001804  4669              MOV      r1,sp
001806  f1060010          ADD      r0,r6,#0x10
00180a  f7fffffe          BL       lc640_read_long_ptr
;;;1562        	if(!((data[0]=='A')&&(data[1]=='A')&&(data[2]=='A')&&(data[3]=='A')))
00180e  f89d0000          LDRB     r0,[sp,#0]
001812  2841              CMP      r0,#0x41
001814  d10b              BNE      |L1.6190|
001816  f89d0001          LDRB     r0,[sp,#1]
00181a  2841              CMP      r0,#0x41
00181c  d107              BNE      |L1.6190|
00181e  f89d0002          LDRB     r0,[sp,#2]
001822  2841              CMP      r0,#0x41
001824  d103              BNE      |L1.6190|
001826  f89d0003          LDRB     r0,[sp,#3]
00182a  2841              CMP      r0,#0x41
00182c  d009              BEQ      |L1.6210|
                  |L1.6190|
;;;1563        		{        
;;;1564        		if(event_ptr_find)event_ptr_find--;
00182e  b11c              CBZ      r4,|L1.6200|
001830  f1a40401          SUB      r4,r4,#1
001834  b2a4              UXTH     r4,r4
001836  e001              B        |L1.6204|
                  |L1.6200|
;;;1565            		else event_ptr_find=63;
001838  f04f043f          MOV      r4,#0x3f
                  |L1.6204|
;;;1566            	    	if(event_ptr_find==event_ptr)goto avar_bat_as_hndl_end;
00183c  42bc              CMP      r4,r7
00183e  d1c4              BNE      |L1.6090|
001840  e0ee              B        |L1.6688|
                  |L1.6210|
;;;1567        		else goto avar_bat_as_hndl_lbl1;
;;;1568        		}
;;;1569   
;;;1570        	}
;;;1571        		
;;;1572   	data[0]=LPC_RTC->YEAR;
001842  f8b8003c          LDRH     r0,[r8,#0x3c]
001846  f88d0000          STRB     r0,[sp,#0]
;;;1573   	data[1]=LPC_RTC->MONTH;
00184a  f8980038          LDRB     r0,[r8,#0x38]
00184e  f88d0001          STRB     r0,[sp,#1]
;;;1574   	data[2]=LPC_RTC->DOM;
001852  f898002c          LDRB     r0,[r8,#0x2c]
001856  f88d0002          STRB     r0,[sp,#2]
;;;1575   	data[3]=0;
00185a  f88da003          STRB     r10,[sp,#3]
;;;1576   	lc640_write_long_ptr(lc640_adr+16,data);
00185e  4669              MOV      r1,sp
001860  f1060010          ADD      r0,r6,#0x10
001864  e09c              B        |L1.6560|
001866  0000              DCW      0x0000
                  |L1.6248|
001868  42415420          DCB      "BAT #1 Alarm, is heated",0
00186c  23312041
001870  6c61726d
001874  2c206973
001878  20686561
00187c  74656400
                  |L1.6272|
001880  42415420          DCB      "BAT #2 Alarm, is heated",0
001884  23322041
001888  6c61726d
00188c  2c206973
001890  20686561
001894  74656400
                  |L1.6296|
001898  42415420          DCB      "BAT #2 Alarm, is overheated",0
00189c  23322041
0018a0  6c61726d
0018a4  2c206973
0018a8  206f7665
0018ac  72686561
0018b0  74656400
                  |L1.6324|
0018b4  42415420          DCB      "BAT #1 Alarm, is overheated",0
0018b8  23312041
0018bc  6c61726d
0018c0  2c206973
0018c4  206f7665
0018c8  72686561
0018cc  74656400
                  |L1.6352|
0018d0  42415420          DCB      "BAT #1 Alarm, heating eliminated",0
0018d4  23312041
0018d8  6c61726d
0018dc  2c206865
0018e0  6174696e
0018e4  6720656c
0018e8  696d696e
0018ec  61746564
0018f0  00      
0018f1  00                DCB      0
0018f2  00                DCB      0
0018f3  00                DCB      0
                  |L1.6388|
0018f4  42415420          DCB      "BAT #2 Alarm, heating eliminated",0
0018f8  23322041
0018fc  6c61726d
001900  2c206865
001904  6174696e
001908  6720656c
00190c  696d696e
001910  61746564
001914  00      
001915  00                DCB      0
001916  00                DCB      0
001917  00                DCB      0
                  |L1.6424|
001918  42415420          DCB      "BAT #2 Alarm, overheating eliminated",0
00191c  23322041
001920  6c61726d
001924  2c206f76
001928  65726865
00192c  6174696e
001930  6720656c
001934  696d696e
001938  61746564
00193c  00      
00193d  00                DCB      0
00193e  00                DCB      0
00193f  00                DCB      0
                  |L1.6464|
001940  42415420          DCB      "BAT #1 Alarm, overheating eliminated",0
001944  23312041
001948  6c61726d
00194c  2c206f76
001950  65726865
001954  6174696e
001958  6720656c
00195c  696d696e
001960  61746564
001964  00      
001965  00                DCB      0
001966  00                DCB      0
001967  00                DCB      0
                  |L1.6504|
                          DCD      bat
                  |L1.6508|
                          DCD      0x40024000
                  |L1.6512|
001970  42415420          DCB      "BAT #1 Alarm, asymmetry",0
001974  23312041
001978  6c61726d
00197c  2c206173
001980  796d6d65
001984  74727900
                  |L1.6536|
001988  42415420          DCB      "BAT #2 Alarm, asymmetry",0
00198c  23322041
001990  6c61726d
001994  2c206173
001998  796d6d65
00199c  74727900
                  |L1.6560|
0019a0  f7fffffe          BL       lc640_write_long_ptr
;;;1577   
;;;1578   	data[0]=LPC_RTC->HOUR;
0019a4  f8980028          LDRB     r0,[r8,#0x28]
0019a8  f88d0000          STRB     r0,[sp,#0]
;;;1579   	data[1]=LPC_RTC->MIN;
0019ac  f8980024          LDRB     r0,[r8,#0x24]
0019b0  f88d0001          STRB     r0,[sp,#1]
;;;1580   	data[2]=LPC_RTC->SEC;
0019b4  f8980020          LDRB     r0,[r8,#0x20]
0019b8  f88d0002          STRB     r0,[sp,#2]
;;;1581   	data[3]=0;
0019bc  f88da003          STRB     r10,[sp,#3]
;;;1582   	lc640_write_long_ptr(lc640_adr+20,data);
0019c0  4669              MOV      r1,sp
0019c2  f1060014          ADD      r0,r6,#0x14
0019c6  f7fffffe          BL       lc640_write_long_ptr
;;;1583   	
;;;1584   	data[0]='B';
0019ca  f88d9000          STRB     r9,[sp,#0]
;;;1585   	data[1]='B';
0019ce  f88d9001          STRB     r9,[sp,#1]
;;;1586   	data[2]='B';
0019d2  f88d9002          STRB     r9,[sp,#2]
;;;1587   	data[3]='B';
0019d6  f88d9003          STRB     r9,[sp,#3]
;;;1588   	lc640_write_long_ptr(lc640_adr+24,data);
0019da  4669              MOV      r1,sp
0019dc  f1060018          ADD      r0,r6,#0x18
0019e0  f7fffffe          BL       lc640_write_long_ptr
;;;1589   	
;;;1590   	data[0]='B';
0019e4  f88d9000          STRB     r9,[sp,#0]
;;;1591   	data[1]='B';
0019e8  f88d9001          STRB     r9,[sp,#1]
;;;1592   	data[2]='B';
0019ec  f88d9002          STRB     r9,[sp,#2]
;;;1593   	data[3]='B';
0019f0  f88d9003          STRB     r9,[sp,#3]
;;;1594   	lc640_write_long_ptr(lc640_adr+28,data);
0019f4  4669              MOV      r1,sp
0019f6  f106001c          ADD      r0,r6,#0x1c
0019fa  f7fffffe          BL       lc640_write_long_ptr
;;;1595   	
;;;1596   	if(b==0)
0019fe  b115              CBZ      r5,|L1.6662|
;;;1597   		{
;;;1598   		snmp_trap_send("BAT #1 Asymmetry alarm clear",5,1,0);
;;;1599   		}
;;;1600   	else if(b==1)
001a00  2d01              CMP      r5,#1
001a02  d007              BEQ      |L1.6676|
001a04  e00c              B        |L1.6688|
                  |L1.6662|
001a06  2300              MOVS     r3,#0                 ;1598
001a08  2201              MOVS     r2,#1                 ;1598
001a0a  2105              MOVS     r1,#5                 ;1598
001a0c  a0f8              ADR      r0,|L1.7664|
001a0e  f7fffffe          BL       snmp_trap_send
001a12  e005              B        |L1.6688|
                  |L1.6676|
;;;1601   		{
;;;1602   		snmp_trap_send("BAT #2 Asymmetry alarm clear",5,2,0);
001a14  2300              MOVS     r3,#0
001a16  2202              MOVS     r2,#2
001a18  2105              MOVS     r1,#5
001a1a  a0fd              ADR      r0,|L1.7696|
001a1c  f7fffffe          BL       snmp_trap_send
                  |L1.6688|
;;;1603   		}
;;;1604   	
;;;1605   	}
;;;1606   	
;;;1607   avar_bat_as_hndl_end:
;;;1608   __nop();		
001a20  bf00              NOP      
                  |L1.6690|
;;;1609   }
001a22  e44a              B        |L1.4794|
;;;1610   
                          ENDP

                  ke_zvu_mem_hndl PROC
;;;1611   //-----------------------------------------------
;;;1612   void ke_zvu_mem_hndl(char b,unsigned short in,unsigned short in1)
001a24  b5f7              PUSH     {r0-r2,r4-r7,lr}
;;;1613   {
001a26  b082              SUB      sp,sp,#8
001a28  4605              MOV      r5,r0
;;;1614   char data[4];
;;;1615   unsigned int event_ptr=0,lc640_adr/*,event_ptr_find*/,event_cnt;
;;;1616   //unsigned char temp,temp_;
;;;1617   //unsigned int tempUI;
;;;1618   //unsigned long tempUL; 
;;;1619   signed temp_temp;
;;;1620   
;;;1621   temp_temp=bat[b]._u_old[bat_u_old_cnt+1]; 
001a2a  eb050045          ADD      r0,r5,r5,LSL #1
001a2e  eb001005          ADD      r0,r0,r5,LSL #4
001a32  49ff              LDR      r1,|L1.7728|
001a34  eb010180          ADD      r1,r1,r0,LSL #2
001a38  48fe              LDR      r0,|L1.7732|
001a3a  f9b00000          LDRSH    r0,[r0,#0]  ; bat_u_old_cnt
001a3e  f1000001          ADD      r0,r0,#1
001a42  eb010040          ADD      r0,r1,r0,LSL #1
001a46  f9b00020          LDRSH    r0,[r0,#0x20]
001a4a  9000              STR      r0,[sp,#0]
;;;1622   
;;;1623   event_ptr=lc640_read_int(PTR_EVENT_LOG);
001a4c  f44f6660          MOV      r6,#0xe00
001a50  4630              MOV      r0,r6
001a52  f7fffffe          BL       lc640_read_int
;;;1624   event_ptr++;	
001a56  f1000001          ADD      r0,r0,#1
001a5a  4604              MOV      r4,r0
;;;1625   if(event_ptr>63)event_ptr=0;	
001a5c  2c3f              CMP      r4,#0x3f
001a5e  d901              BLS      |L1.6756|
001a60  f04f0400          MOV      r4,#0
                  |L1.6756|
;;;1626   lc640_write_int(PTR_EVENT_LOG,event_ptr);	
001a64  b221              SXTH     r1,r4
001a66  4630              MOV      r0,r6
001a68  f7fffffe          BL       lc640_write_int
;;;1627   	
;;;1628   event_cnt=lc640_read_int(CNT_EVENT_LOG);
001a6c  f6406702          MOV      r7,#0xe02
001a70  4638              MOV      r0,r7
001a72  f7fffffe          BL       lc640_read_int
;;;1629   if(event_cnt!=63)event_cnt=event_ptr;
001a76  283f              CMP      r0,#0x3f
001a78  d000              BEQ      |L1.6780|
001a7a  4620              MOV      r0,r4
                  |L1.6780|
;;;1630   lc640_write_int(CNT_EVENT_LOG,event_cnt); 
001a7c  b201              SXTH     r1,r0
001a7e  4638              MOV      r0,r7
001a80  f7fffffe          BL       lc640_write_int
;;;1631   	
;;;1632   lc640_adr=EVENT_LOG+(lc640_read_int(PTR_EVENT_LOG)*32);
001a84  4630              MOV      r0,r6
001a86  f7fffffe          BL       lc640_read_int
001a8a  f44f6180          MOV      r1,#0x400
001a8e  eb011440          ADD      r4,r1,r0,LSL #5
;;;1633   	
;;;1634   data[0]='B';
001a92  f04f0042          MOV      r0,#0x42
001a96  f88d0004          STRB     r0,[sp,#4]
;;;1635   data[1]=b; 
001a9a  f88d5005          STRB     r5,[sp,#5]
;;;1636   data[2]='K';
001a9e  f04f004b          MOV      r0,#0x4b
001aa2  f88d0006          STRB     r0,[sp,#6]
;;;1637   data[3]='Z';
001aa6  f04f005a          MOV      r0,#0x5a
001aaa  f88d0007          STRB     r0,[sp,#7]
;;;1638   
;;;1639   lc640_write_long_ptr(lc640_adr,data);
001aae  a901              ADD      r1,sp,#4
001ab0  4620              MOV      r0,r4
001ab2  f7fffffe          BL       lc640_write_long_ptr
;;;1640   
;;;1641   data[0]=*((char*)&in);
001ab6  f89d000c          LDRB     r0,[sp,#0xc]
001aba  f88d0004          STRB     r0,[sp,#4]
;;;1642   data[1]=*(((char*)(&in))+1);
001abe  f89d000d          LDRB     r0,[sp,#0xd]
001ac2  f88d0005          STRB     r0,[sp,#5]
;;;1643   data[2]=*((char*)&temp_temp);
001ac6  f89d0000          LDRB     r0,[sp,#0]
001aca  f88d0006          STRB     r0,[sp,#6]
;;;1644   data[3]=*(((char*)(&temp_temp))+1);
001ace  f89d0001          LDRB     r0,[sp,#1]
001ad2  f88d0007          STRB     r0,[sp,#7]
;;;1645   lc640_write_long_ptr(lc640_adr+4,data);
001ad6  a901              ADD      r1,sp,#4
001ad8  1d20              ADDS     r0,r4,#4
001ada  f7fffffe          BL       lc640_write_long_ptr
;;;1646   
;;;1647   ke_date[0]=lc640_read_long(EE_SPC_KE_DATE0);
001ade  f24020a2          MOV      r0,#0x2a2
001ae2  f7fffffe          BL       lc640_read_long
001ae6  4dd4              LDR      r5,|L1.7736|
001ae8  6028              STR      r0,[r5,#0]  ; ke_date
;;;1648   lc640_write_long_ptr(lc640_adr+8,(char*)&ke_date[0]);
001aea  4629              MOV      r1,r5
001aec  f1040008          ADD      r0,r4,#8
001af0  f7fffffe          BL       lc640_write_long_ptr
;;;1649   ke_date[1]=lc640_read_long(EE_SPC_KE_DATE1);	
001af4  f24020a6          MOV      r0,#0x2a6
001af8  f7fffffe          BL       lc640_read_long
001afc  6068              STR      r0,[r5,#4]  ; ke_date
;;;1650   lc640_write_long_ptr(lc640_adr+12,(char*)&ke_date[1]);
001afe  1d29              ADDS     r1,r5,#4
001b00  f104000c          ADD      r0,r4,#0xc
001b04  f7fffffe          BL       lc640_write_long_ptr
;;;1651   
;;;1652   data[0]=LPC_RTC->YEAR;
001b08  4dcc              LDR      r5,|L1.7740|
001b0a  8ba8              LDRH     r0,[r5,#0x1c]
001b0c  f88d0004          STRB     r0,[sp,#4]
;;;1653   data[1]=LPC_RTC->MONTH;
001b10  7e28              LDRB     r0,[r5,#0x18]
001b12  f88d0005          STRB     r0,[sp,#5]
;;;1654   data[2]=LPC_RTC->DOM;
001b16  7b28              LDRB     r0,[r5,#0xc]
001b18  f88d0006          STRB     r0,[sp,#6]
;;;1655   data[3]=*((char*)&in1);
001b1c  f89d0010          LDRB     r0,[sp,#0x10]
001b20  f88d0007          STRB     r0,[sp,#7]
;;;1656   lc640_write_long_ptr(lc640_adr+16,data);
001b24  a901              ADD      r1,sp,#4
001b26  f1040010          ADD      r0,r4,#0x10
001b2a  f7fffffe          BL       lc640_write_long_ptr
;;;1657   
;;;1658   data[0]=LPC_RTC->HOUR;
001b2e  7a28              LDRB     r0,[r5,#8]
001b30  f88d0004          STRB     r0,[sp,#4]
;;;1659   data[1]=LPC_RTC->MIN;
001b34  7928              LDRB     r0,[r5,#4]
001b36  f88d0005          STRB     r0,[sp,#5]
;;;1660   data[2]=LPC_RTC->SEC;
001b3a  7828              LDRB     r0,[r5,#0]
001b3c  f88d0006          STRB     r0,[sp,#6]
;;;1661   data[3]=*(((char*)(&in1))+1);
001b40  f89d0011          LDRB     r0,[sp,#0x11]
001b44  f88d0007          STRB     r0,[sp,#7]
;;;1662   lc640_write_long_ptr(lc640_adr+20,data);
001b48  a901              ADD      r1,sp,#4
001b4a  f1040014          ADD      r0,r4,#0x14
001b4e  f7fffffe          BL       lc640_write_long_ptr
;;;1663    
;;;1664   }
001b52  b005              ADD      sp,sp,#0x14
001b54  bdf0              POP      {r4-r7,pc}
;;;1665   
                          ENDP

                  vz_mem_hndl PROC
;;;1722   //-----------------------------------------------
;;;1723   void vz_mem_hndl(unsigned short in)
001b56  e92d4ff8          PUSH     {r3-r11,lr}
;;;1724   {
;;;1725   char data[4];
;;;1726   unsigned int event_ptr=0,lc640_adr,event_ptr_find=0,event_cnt;
001b5a  f04f0600          MOV      r6,#0
001b5e  4634              MOV      r4,r6
;;;1727   //char avar_simbol;
;;;1728   
;;;1729   if(in==1)
;;;1730   	{
;;;1731   	event_ptr=lc640_read_int(PTR_EVENT_LOG);
;;;1732   	event_ptr++;	
;;;1733   	if(event_ptr>63)event_ptr=0;	
;;;1734   	lc640_write_int(PTR_EVENT_LOG,event_ptr);	
;;;1735   	
;;;1736        event_cnt=lc640_read_int(CNT_EVENT_LOG);
;;;1737   	if(event_cnt!=63)event_cnt=event_ptr;
;;;1738   	lc640_write_int(CNT_EVENT_LOG,event_cnt); 
;;;1739   	
;;;1740   	lc640_adr=EVENT_LOG+(lc640_read_int(PTR_EVENT_LOG)*32);
;;;1741   	
;;;1742   	data[0]='B';
;;;1743   	data[1]=0; 
;;;1744   	data[2]='Z';
;;;1745   	data[3]=0;
;;;1746   	lc640_write_long_ptr(lc640_adr,data);
;;;1747   
;;;1748   	data[0]=0;
;;;1749   	data[1]=0;
;;;1750   	data[2]=0;
;;;1751   	data[3]=0;
;;;1752   	lc640_write_long_ptr(lc640_adr+4,data);
;;;1753   
;;;1754   	data[0]=LPC_RTC->YEAR;
001b60  f8df82dc          LDR      r8,|L1.7744|
001b64  46a1              MOV      r9,r4                 ;1726
001b66  f04f0742          MOV      r7,#0x42              ;1742
001b6a  f44f6a80          MOV      r10,#0x400            ;1740
001b6e  2801              CMP      r0,#1                 ;1729
001b70  d002              BEQ      |L1.7032|
;;;1755   	data[1]=LPC_RTC->MONTH;
;;;1756   	data[2]=LPC_RTC->DOM;
;;;1757   	data[3]=0;
;;;1758   	lc640_write_long_ptr(lc640_adr+8,data);
;;;1759   
;;;1760   	data[0]=LPC_RTC->HOUR;
;;;1761   	data[1]=LPC_RTC->MIN;
;;;1762   	data[2]=LPC_RTC->SEC;
;;;1763   	data[3]=0;
;;;1764   	lc640_write_long_ptr(lc640_adr+12,data);
;;;1765   	
;;;1766   	data[0]='A';
;;;1767   	data[1]='A';
;;;1768   	data[2]='A';
;;;1769   	data[3]='A';
;;;1770   	lc640_write_long_ptr(lc640_adr+16,data);
;;;1771   	
;;;1772   	data[0]='A';
;;;1773   	data[1]='A';
;;;1774   	data[2]='A';
;;;1775   	data[3]='A';
;;;1776   	lc640_write_long_ptr(lc640_adr+20,data);
;;;1777   	
;;;1778   	data[0]='A';
;;;1779   	data[1]='A';
;;;1780   	data[2]='A';
;;;1781   	data[3]='A';
;;;1782   	lc640_write_long_ptr(lc640_adr+24,data);
;;;1783   	
;;;1784   	data[0]='A';
;;;1785   	data[1]='A';
;;;1786   	data[2]='A';
;;;1787   	data[3]='A';
;;;1788   	lc640_write_long_ptr(lc640_adr+28,data);		
;;;1789    	
;;;1790   	}
;;;1791   
;;;1792   else if(in==0)
001b72  2800              CMP      r0,#0
001b74  d07e              BEQ      |L1.7284|
001b76  e108              B        |L1.7562|
                  |L1.7032|
001b78  f44f6560          MOV      r5,#0xe00             ;1731
001b7c  4628              MOV      r0,r5                 ;1731
001b7e  f7fffffe          BL       lc640_read_int
001b82  f1000001          ADD      r0,r0,#1              ;1732
001b86  4604              MOV      r4,r0                 ;1732
001b88  2c3f              CMP      r4,#0x3f              ;1733
001b8a  d901              BLS      |L1.7056|
001b8c  f04f0400          MOV      r4,#0                 ;1733
                  |L1.7056|
001b90  b221              SXTH     r1,r4                 ;1734
001b92  4628              MOV      r0,r5                 ;1734
001b94  f7fffffe          BL       lc640_write_int
001b98  f6406602          MOV      r6,#0xe02             ;1736
001b9c  4630              MOV      r0,r6                 ;1736
001b9e  f7fffffe          BL       lc640_read_int
001ba2  283f              CMP      r0,#0x3f              ;1737
001ba4  d000              BEQ      |L1.7080|
001ba6  4620              MOV      r0,r4                 ;1737
                  |L1.7080|
001ba8  b201              SXTH     r1,r0                 ;1738
001baa  4630              MOV      r0,r6                 ;1738
001bac  f7fffffe          BL       lc640_write_int
001bb0  4628              MOV      r0,r5                 ;1740
001bb2  f7fffffe          BL       lc640_read_int
001bb6  eb0a1440          ADD      r4,r10,r0,LSL #5      ;1740
001bba  f88d7000          STRB     r7,[sp,#0]            ;1742
001bbe  f88d9001          STRB     r9,[sp,#1]            ;1743
001bc2  f04f005a          MOV      r0,#0x5a              ;1744
001bc6  f88d0002          STRB     r0,[sp,#2]            ;1744
001bca  f88d9003          STRB     r9,[sp,#3]            ;1745
001bce  4669              MOV      r1,sp                 ;1746
001bd0  4620              MOV      r0,r4                 ;1746
001bd2  f7fffffe          BL       lc640_write_long_ptr
001bd6  f8cd9000          STR      r9,[sp,#0]            ;1751
001bda  4669              MOV      r1,sp                 ;1752
001bdc  1d20              ADDS     r0,r4,#4              ;1752
001bde  f7fffffe          BL       lc640_write_long_ptr
001be2  f8b8003c          LDRH     r0,[r8,#0x3c]         ;1754
001be6  f88d0000          STRB     r0,[sp,#0]            ;1754
001bea  f8980038          LDRB     r0,[r8,#0x38]         ;1755
001bee  f88d0001          STRB     r0,[sp,#1]            ;1755
001bf2  f898002c          LDRB     r0,[r8,#0x2c]         ;1756
001bf6  f88d0002          STRB     r0,[sp,#2]            ;1756
001bfa  f88d9003          STRB     r9,[sp,#3]            ;1757
001bfe  4669              MOV      r1,sp                 ;1758
001c00  f1040008          ADD      r0,r4,#8              ;1758
001c04  f7fffffe          BL       lc640_write_long_ptr
001c08  f8980028          LDRB     r0,[r8,#0x28]         ;1760
001c0c  f88d0000          STRB     r0,[sp,#0]            ;1760
001c10  f8980024          LDRB     r0,[r8,#0x24]         ;1761
001c14  f88d0001          STRB     r0,[sp,#1]            ;1761
001c18  f8980020          LDRB     r0,[r8,#0x20]         ;1762
001c1c  f88d0002          STRB     r0,[sp,#2]            ;1762
001c20  f88d9003          STRB     r9,[sp,#3]            ;1763
001c24  4669              MOV      r1,sp                 ;1764
001c26  f104000c          ADD      r0,r4,#0xc            ;1764
001c2a  f7fffffe          BL       lc640_write_long_ptr
001c2e  f04f0541          MOV      r5,#0x41              ;1766
001c32  f88d5000          STRB     r5,[sp,#0]            ;1766
001c36  f88d5001          STRB     r5,[sp,#1]            ;1767
001c3a  f88d5002          STRB     r5,[sp,#2]            ;1768
001c3e  f88d5003          STRB     r5,[sp,#3]            ;1769
001c42  4669              MOV      r1,sp                 ;1770
001c44  f1040010          ADD      r0,r4,#0x10           ;1770
001c48  f7fffffe          BL       lc640_write_long_ptr
001c4c  f88d5000          STRB     r5,[sp,#0]            ;1772
001c50  f88d5001          STRB     r5,[sp,#1]            ;1773
001c54  f88d5002          STRB     r5,[sp,#2]            ;1774
001c58  f88d5003          STRB     r5,[sp,#3]            ;1775
001c5c  4669              MOV      r1,sp                 ;1776
001c5e  f1040014          ADD      r0,r4,#0x14           ;1776
001c62  f7fffffe          BL       lc640_write_long_ptr
001c66  f88d5000          STRB     r5,[sp,#0]            ;1778
001c6a  f88d5001          STRB     r5,[sp,#1]            ;1779
001c6e  f88d5002          STRB     r5,[sp,#2]            ;1780
001c72  e000              B        |L1.7286|
                  |L1.7284|
001c74  e014              B        |L1.7328|
                  |L1.7286|
001c76  f88d5003          STRB     r5,[sp,#3]            ;1781
001c7a  4669              MOV      r1,sp                 ;1782
001c7c  f1040018          ADD      r0,r4,#0x18           ;1782
001c80  f7fffffe          BL       lc640_write_long_ptr
001c84  f88d5000          STRB     r5,[sp,#0]            ;1784
001c88  f88d5001          STRB     r5,[sp,#1]            ;1785
001c8c  f88d5002          STRB     r5,[sp,#2]            ;1786
001c90  f88d5003          STRB     r5,[sp,#3]            ;1787
001c94  4669              MOV      r1,sp                 ;1788
001c96  f104001c          ADD      r0,r4,#0x1c           ;1788
001c9a  f7fffffe          BL       lc640_write_long_ptr
001c9e  e074              B        |L1.7562|
                  |L1.7328|
;;;1793   	{      
;;;1794        
;;;1795   vz_mem_hndl_lbl1: 
;;;1796   
;;;1797   	lc640_adr=EVENT_LOG+(event_ptr_find*32);
001ca0  eb0a1544          ADD      r5,r10,r4,LSL #5
;;;1798   
;;;1799        lc640_read_long_ptr(lc640_adr,data);
001ca4  4669              MOV      r1,sp
001ca6  4628              MOV      r0,r5
001ca8  f7fffffe          BL       lc640_read_long_ptr
;;;1800        
;;;1801        if(!((data[0]=='B')&&(data[2]=='Z')))
001cac  f89d0000          LDRB     r0,[sp,#0]
001cb0  2842              CMP      r0,#0x42
001cb2  d103              BNE      |L1.7356|
001cb4  f89d0002          LDRB     r0,[sp,#2]
001cb8  285a              CMP      r0,#0x5a
001cba  d008              BEQ      |L1.7374|
                  |L1.7356|
;;;1802        	{        
;;;1803        	if(event_ptr_find)event_ptr_find--;
001cbc  b114              CBZ      r4,|L1.7364|
001cbe  f1a40401          SUB      r4,r4,#1
001cc2  e001              B        |L1.7368|
                  |L1.7364|
;;;1804        	else event_ptr_find=63;
001cc4  f04f043f          MOV      r4,#0x3f
                  |L1.7368|
;;;1805        	if(event_ptr_find==event_ptr)goto vz_mem_hndl_end;
001cc8  42b4              CMP      r4,r6
001cca  d1e9              BNE      |L1.7328|
001ccc  e05d              B        |L1.7562|
                  |L1.7374|
;;;1806        	else goto vz_mem_hndl_lbl1;
;;;1807        	}
;;;1808        else 
;;;1809        	{
;;;1810        	lc640_read_long_ptr(lc640_adr+16,data);
001cce  4669              MOV      r1,sp
001cd0  f1050010          ADD      r0,r5,#0x10
001cd4  f7fffffe          BL       lc640_read_long_ptr
;;;1811        	if(!((data[0]=='A')&&(data[1]=='A')&&(data[2]=='A')&&(data[3]=='A')))
001cd8  f89d0000          LDRB     r0,[sp,#0]
001cdc  2841              CMP      r0,#0x41
001cde  d10b              BNE      |L1.7416|
001ce0  f89d0001          LDRB     r0,[sp,#1]
001ce4  2841              CMP      r0,#0x41
001ce6  d107              BNE      |L1.7416|
001ce8  f89d0002          LDRB     r0,[sp,#2]
001cec  2841              CMP      r0,#0x41
001cee  d103              BNE      |L1.7416|
001cf0  f89d0003          LDRB     r0,[sp,#3]
001cf4  2841              CMP      r0,#0x41
001cf6  d008              BEQ      |L1.7434|
                  |L1.7416|
;;;1812        		{        
;;;1813        		if(event_ptr_find)event_ptr_find--;
001cf8  b114              CBZ      r4,|L1.7424|
001cfa  f1a40401          SUB      r4,r4,#1
001cfe  e001              B        |L1.7428|
                  |L1.7424|
;;;1814            		else event_ptr_find=63;
001d00  f04f043f          MOV      r4,#0x3f
                  |L1.7428|
;;;1815            		if(event_ptr_find==event_ptr)goto vz_mem_hndl_end;
001d04  42b4              CMP      r4,r6
001d06  d1cb              BNE      |L1.7328|
001d08  e03f              B        |L1.7562|
                  |L1.7434|
;;;1816        		else goto vz_mem_hndl_lbl1;
;;;1817        		}
;;;1818   
;;;1819        	}	
;;;1820   
;;;1821   
;;;1822   	
;;;1823   	data[0]=LPC_RTC->YEAR;
001d0a  f8b8003c          LDRH     r0,[r8,#0x3c]
001d0e  f88d0000          STRB     r0,[sp,#0]
;;;1824   	data[1]=LPC_RTC->MONTH;
001d12  f8980038          LDRB     r0,[r8,#0x38]
001d16  f88d0001          STRB     r0,[sp,#1]
;;;1825   	data[2]=LPC_RTC->DOM;
001d1a  f898002c          LDRB     r0,[r8,#0x2c]
001d1e  f88d0002          STRB     r0,[sp,#2]
;;;1826   	data[3]=0;
001d22  f88d9003          STRB     r9,[sp,#3]
;;;1827   	lc640_write_long_ptr(lc640_adr+16,data);
001d26  4669              MOV      r1,sp
001d28  f1050010          ADD      r0,r5,#0x10
001d2c  f7fffffe          BL       lc640_write_long_ptr
;;;1828   
;;;1829   	data[0]=LPC_RTC->HOUR;
001d30  f8980028          LDRB     r0,[r8,#0x28]
001d34  f88d0000          STRB     r0,[sp,#0]
;;;1830   	data[1]=LPC_RTC->MIN;
001d38  f8980024          LDRB     r0,[r8,#0x24]
001d3c  f88d0001          STRB     r0,[sp,#1]
;;;1831   	data[2]=LPC_RTC->SEC;
001d40  f8980020          LDRB     r0,[r8,#0x20]
001d44  f88d0002          STRB     r0,[sp,#2]
;;;1832   	data[3]=0;
001d48  f88d9003          STRB     r9,[sp,#3]
;;;1833   	lc640_write_long_ptr(lc640_adr+20,data);
001d4c  4669              MOV      r1,sp
001d4e  f1050014          ADD      r0,r5,#0x14
001d52  f7fffffe          BL       lc640_write_long_ptr
;;;1834   	
;;;1835   	data[0]='B';
001d56  f88d7000          STRB     r7,[sp,#0]
;;;1836   	data[1]='B';
001d5a  f88d7001          STRB     r7,[sp,#1]
;;;1837   	data[2]='B';
001d5e  f88d7002          STRB     r7,[sp,#2]
;;;1838   	data[3]='B';
001d62  f88d7003          STRB     r7,[sp,#3]
;;;1839   	lc640_write_long_ptr(lc640_adr+24,data);
001d66  4669              MOV      r1,sp
001d68  f1050018          ADD      r0,r5,#0x18
001d6c  f7fffffe          BL       lc640_write_long_ptr
;;;1840   	
;;;1841   	data[0]='B';
001d70  f88d7000          STRB     r7,[sp,#0]
;;;1842   	data[1]='B';
001d74  f88d7001          STRB     r7,[sp,#1]
;;;1843   	data[2]='B';
001d78  f88d7002          STRB     r7,[sp,#2]
;;;1844   	data[3]='B';
001d7c  f88d7003          STRB     r7,[sp,#3]
;;;1845   	lc640_write_long_ptr(lc640_adr+28,data);
001d80  4669              MOV      r1,sp
001d82  f105001c          ADD      r0,r5,#0x1c
001d86  f7fffffe          BL       lc640_write_long_ptr
                  |L1.7562|
;;;1846   	
;;;1847   	}
;;;1848   
;;;1849   vz_mem_hndl_end:
;;;1850   __nop(); 
001d8a  bf00              NOP      
                  |L1.7564|
;;;1851   
;;;1852   }
001d8c  e448              B        |L1.5664|
;;;1853   
                          ENDP

                  speedz_mem_hndl PROC
;;;1854   //-----------------------------------------------
;;;1855   void speedz_mem_hndl(unsigned short in)	 //    (1-, 5- , 0- , 10- )
001d8e  e92d4ff8          PUSH     {r3-r11,lr}
;;;1856   {
001d92  4605              MOV      r5,r0
;;;1857   char data[4];
;;;1858   unsigned int event_ptr=0,lc640_adr,event_ptr_find=0,event_cnt;
001d94  f04f0600          MOV      r6,#0
001d98  4634              MOV      r4,r6
;;;1859   //char avar_simbol;
;;;1860   
;;;1861   if((in==1)||(in==5)) //  
;;;1862   	{
;;;1863   	event_ptr=lc640_read_int(PTR_EVENT_LOG);
;;;1864   	event_ptr++;	
;;;1865   	if(event_ptr>63)event_ptr=0;	
;;;1866   	lc640_write_int(PTR_EVENT_LOG,event_ptr);	
;;;1867   	
;;;1868       event_cnt=lc640_read_int(CNT_EVENT_LOG);
;;;1869   	if(event_cnt!=63)event_cnt=event_ptr;
;;;1870   	lc640_write_int(CNT_EVENT_LOG,event_cnt); 
;;;1871   	
;;;1872   	lc640_adr=EVENT_LOG+(lc640_read_int(PTR_EVENT_LOG)*32);
;;;1873   	
;;;1874   	data[0]='s';
;;;1875   	data[1]=0;
;;;1876   	if(in==5)data[1]='a'; 
;;;1877   	data[2]='Z';
;;;1878   	data[3]=0;
;;;1879   	lc640_write_long_ptr(lc640_adr,data);
;;;1880   
;;;1881   	data[0]=0;
;;;1882   	data[1]=0;
;;;1883   	data[2]=0;
;;;1884   	data[3]=0;
;;;1885   	lc640_write_long_ptr(lc640_adr+4,data);
;;;1886   
;;;1887   	data[0]=LPC_RTC->YEAR;
001d9a  f8df80a4          LDR      r8,|L1.7744|
001d9e  46a1              MOV      r9,r4                 ;1858
001da0  f44f6a80          MOV      r10,#0x400            ;1872
001da4  2d01              CMP      r5,#1                 ;1861
001da6  d012              BEQ      |L1.7630|
001da8  2d05              CMP      r5,#5                 ;1861
001daa  d010              BEQ      |L1.7630|
;;;1888   	data[1]=LPC_RTC->MONTH;
;;;1889   	data[2]=LPC_RTC->DOM;
;;;1890   	data[3]=0;
;;;1891   	lc640_write_long_ptr(lc640_adr+8,data);
;;;1892   
;;;1893   	data[0]=LPC_RTC->HOUR;
;;;1894   	data[1]=LPC_RTC->MIN;
;;;1895   	data[2]=LPC_RTC->SEC;
;;;1896   	data[3]=0;
;;;1897   	lc640_write_long_ptr(lc640_adr+12,data);
;;;1898   	
;;;1899   	data[0]='A';
;;;1900   	data[1]='A';
;;;1901   	data[2]='A';
;;;1902   	data[3]='A';
;;;1903   	lc640_write_long_ptr(lc640_adr+16,data);
;;;1904   	
;;;1905   	data[0]='A';
;;;1906   	data[1]='A';
;;;1907   	data[2]='A';
;;;1908   	data[3]='A';
;;;1909   	lc640_write_long_ptr(lc640_adr+20,data);
;;;1910   	
;;;1911   	data[0]='A';
;;;1912   	data[1]='A';
;;;1913   	data[2]='A';
;;;1914   	data[3]='A';
;;;1915   	lc640_write_long_ptr(lc640_adr+24,data);
;;;1916   	
;;;1917   	data[0]='A';
;;;1918   	data[1]='A';
;;;1919   	data[2]='A';
;;;1920   	data[3]='A';
;;;1921   	lc640_write_long_ptr(lc640_adr+28,data);		
;;;1922    	
;;;1923   	}
;;;1924   
;;;1925   else if(in==0)	// 
001dac  2d00              CMP      r5,#0
001dae  d07d              BEQ      |L1.7852|
;;;1926   	{      
;;;1927   	char i;     
;;;1928   	event_ptr_find=0;
;;;1929   	for (i=0;i<63;i++)
;;;1930   		{
;;;1931   		lc640_adr=EVENT_LOG+(event_ptr_find*32);
;;;1932   
;;;1933        	lc640_read_long_ptr(lc640_adr,data);
;;;1934        
;;;1935        	if(!((data[0]=='s')&&(data[2]=='Z')))
;;;1936        		{        
;;;1937        		if(event_ptr_find)event_ptr_find--;
;;;1938        		else event_ptr_find=63;
;;;1939        		if(event_ptr_find==event_ptr)
;;;1940   				{
;;;1941   				lc640_adr=0;
;;;1942   				break;
;;;1943   				}
;;;1944        		else continue;
;;;1945        		}
;;;1946        	else 
;;;1947        		{
;;;1948        		lc640_read_long_ptr(lc640_adr+16,data);
;;;1949        		if(!((data[0]=='A')&&(data[1]=='A')&&(data[2]=='A')&&(data[3]=='A')))
;;;1950        			{        
;;;1951        			if(event_ptr_find)event_ptr_find--;
;;;1952            		else event_ptr_find=63;
;;;1953            		if(event_ptr_find==event_ptr)
;;;1954   					{
;;;1955   					lc640_adr=0;
;;;1956   					break;
;;;1957   					}
;;;1958        			else continue;
;;;1959        			}
;;;1960        		}	
;;;1961   		}
;;;1962   	if(lc640_adr!=0)
;;;1963   		{
;;;1964   		data[0]=LPC_RTC->YEAR;
;;;1965   		data[1]=LPC_RTC->MONTH;
;;;1966   		data[2]=LPC_RTC->DOM;
;;;1967   		data[3]=0;
;;;1968   		lc640_write_long_ptr(lc640_adr+16,data);
;;;1969   	
;;;1970   		data[0]=LPC_RTC->HOUR;
;;;1971   		data[1]=LPC_RTC->MIN;
;;;1972   		data[2]=LPC_RTC->SEC;
;;;1973   		data[3]=0;
;;;1974   		lc640_write_long_ptr(lc640_adr+20,data);
;;;1975   		
;;;1976   		data[0]='C';
;;;1977   		data[1]='C';
;;;1978   		data[2]='C';
;;;1979   		data[3]='C';
;;;1980   		lc640_write_long_ptr(lc640_adr+24,data);
;;;1981   		
;;;1982   		data[0]='C';
;;;1983   		data[1]='C';
;;;1984   		data[2]='C';
;;;1985   		data[3]='C';
;;;1986   		lc640_write_long_ptr(lc640_adr+28,data);
;;;1987   		}
;;;1988   	}
;;;1989   else if(in==10) 	//  
001db0  2d0a              CMP      r5,#0xa
001db2  d17c              BNE      |L1.7854|
;;;1990   	{      
;;;1991   	char i;     
;;;1992   
;;;1993   	event_ptr_find=0;
;;;1994   	for (i=0;i<63;i++)
001db4  f04f0700          MOV      r7,#0
                  |L1.7608|
;;;1995   		{
;;;1996   		lc640_adr=EVENT_LOG+(event_ptr_find*32);
001db8  eb0a1544          ADD      r5,r10,r4,LSL #5
;;;1997   
;;;1998        	lc640_read_long_ptr(lc640_adr,data);
001dbc  4669              MOV      r1,sp
001dbe  4628              MOV      r0,r5
001dc0  f7fffffe          BL       lc640_read_long_ptr
;;;1999        
;;;2000        	if(!((data[0]=='s')&&(data[2]=='Z')))
001dc4  f89d0000          LDRB     r0,[sp,#0]
001dc8  2873              CMP      r0,#0x73
001dca  d171              BNE      |L1.7856|
001dcc  e14d              B        |L1.8298|
                  |L1.7630|
001dce  f44f6660          MOV      r6,#0xe00             ;1863
001dd2  4630              MOV      r0,r6                 ;1863
001dd4  f7fffffe          BL       lc640_read_int
001dd8  f1000001          ADD      r0,r0,#1              ;1864
001ddc  4604              MOV      r4,r0                 ;1864
001dde  2c3f              CMP      r4,#0x3f              ;1865
001de0  d901              BLS      |L1.7654|
001de2  f04f0400          MOV      r4,#0                 ;1865
                  |L1.7654|
001de6  b221              SXTH     r1,r4                 ;1866
001de8  4630              MOV      r0,r6                 ;1866
001dea  f7fffffe          BL       lc640_write_int
001dee  e029              B        |L1.7748|
                  |L1.7664|
001df0  42415420          DCB      "BAT #1 Asymmetry alarm clear",0
001df4  23312041
001df8  73796d6d
001dfc  65747279
001e00  20616c61
001e04  726d2063
001e08  6c656172
001e0c  00      
001e0d  00                DCB      0
001e0e  00                DCB      0
001e0f  00                DCB      0
                  |L1.7696|
001e10  42415420          DCB      "BAT #2 Asymmetry alarm clear",0
001e14  23322041
001e18  73796d6d
001e1c  65747279
001e20  20616c61
001e24  726d2063
001e28  6c656172
001e2c  00      
001e2d  00                DCB      0
001e2e  00                DCB      0
001e2f  00                DCB      0
                  |L1.7728|
                          DCD      bat
                  |L1.7732|
                          DCD      bat_u_old_cnt
                  |L1.7736|
                          DCD      ke_date
                  |L1.7740|
                          DCD      0x40024020
                  |L1.7744|
                          DCD      0x40024000
                  |L1.7748|
001e44  f6406702          MOV      r7,#0xe02             ;1868
001e48  4638              MOV      r0,r7                 ;1868
001e4a  f7fffffe          BL       lc640_read_int
001e4e  283f              CMP      r0,#0x3f              ;1869
001e50  d000              BEQ      |L1.7764|
001e52  4620              MOV      r0,r4                 ;1869
                  |L1.7764|
001e54  b201              SXTH     r1,r0                 ;1870
001e56  4638              MOV      r0,r7                 ;1870
001e58  f7fffffe          BL       lc640_write_int
001e5c  4630              MOV      r0,r6                 ;1872
001e5e  f7fffffe          BL       lc640_read_int
001e62  eb0a1440          ADD      r4,r10,r0,LSL #5      ;1872
001e66  f04f0073          MOV      r0,#0x73              ;1874
001e6a  f88d0000          STRB     r0,[sp,#0]            ;1874
001e6e  f88d9001          STRB     r9,[sp,#1]            ;1875
001e72  2d05              CMP      r5,#5                 ;1876
001e74  d103              BNE      |L1.7806|
001e76  f04f0061          MOV      r0,#0x61              ;1876
001e7a  f88d0001          STRB     r0,[sp,#1]            ;1876
                  |L1.7806|
001e7e  f04f005a          MOV      r0,#0x5a              ;1877
001e82  f88d0002          STRB     r0,[sp,#2]            ;1877
001e86  f88d9003          STRB     r9,[sp,#3]            ;1878
001e8a  4669              MOV      r1,sp                 ;1879
001e8c  4620              MOV      r0,r4                 ;1879
001e8e  f7fffffe          BL       lc640_write_long_ptr
001e92  f8cd9000          STR      r9,[sp,#0]            ;1884
001e96  4669              MOV      r1,sp                 ;1885
001e98  1d20              ADDS     r0,r4,#4              ;1885
001e9a  f7fffffe          BL       lc640_write_long_ptr
001e9e  f8b8003c          LDRH     r0,[r8,#0x3c]         ;1887
001ea2  f88d0000          STRB     r0,[sp,#0]            ;1887
001ea6  f8980038          LDRB     r0,[r8,#0x38]         ;1888
001eaa  e002              B        |L1.7858|
                  |L1.7852|
001eac  e058              B        |L1.8032|
                  |L1.7854|
001eae  e056              B        |L1.8030|
                  |L1.7856|
001eb0  e0df              B        |L1.8306|
                  |L1.7858|
001eb2  f88d0001          STRB     r0,[sp,#1]            ;1888
001eb6  f898002c          LDRB     r0,[r8,#0x2c]         ;1889
001eba  f88d0002          STRB     r0,[sp,#2]            ;1889
001ebe  f88d9003          STRB     r9,[sp,#3]            ;1890
001ec2  4669              MOV      r1,sp                 ;1891
001ec4  f1040008          ADD      r0,r4,#8              ;1891
001ec8  f7fffffe          BL       lc640_write_long_ptr
001ecc  f8980028          LDRB     r0,[r8,#0x28]         ;1893
001ed0  f88d0000          STRB     r0,[sp,#0]            ;1893
001ed4  f8980024          LDRB     r0,[r8,#0x24]         ;1894
001ed8  f88d0001          STRB     r0,[sp,#1]            ;1894
001edc  f8980020          LDRB     r0,[r8,#0x20]         ;1895
001ee0  f88d0002          STRB     r0,[sp,#2]            ;1895
001ee4  f88d9003          STRB     r9,[sp,#3]            ;1896
001ee8  4669              MOV      r1,sp                 ;1897
001eea  f104000c          ADD      r0,r4,#0xc            ;1897
001eee  f7fffffe          BL       lc640_write_long_ptr
001ef2  f04f0541          MOV      r5,#0x41              ;1899
001ef6  f88d5000          STRB     r5,[sp,#0]            ;1899
001efa  f88d5001          STRB     r5,[sp,#1]            ;1900
001efe  f88d5002          STRB     r5,[sp,#2]            ;1901
001f02  f88d5003          STRB     r5,[sp,#3]            ;1902
001f06  4669              MOV      r1,sp                 ;1903
001f08  f1040010          ADD      r0,r4,#0x10           ;1903
001f0c  f7fffffe          BL       lc640_write_long_ptr
001f10  f88d5000          STRB     r5,[sp,#0]            ;1905
001f14  f88d5001          STRB     r5,[sp,#1]            ;1906
001f18  f88d5002          STRB     r5,[sp,#2]            ;1907
001f1c  f88d5003          STRB     r5,[sp,#3]            ;1908
001f20  4669              MOV      r1,sp                 ;1909
001f22  f1040014          ADD      r0,r4,#0x14           ;1909
001f26  f7fffffe          BL       lc640_write_long_ptr
001f2a  f88d5000          STRB     r5,[sp,#0]            ;1911
001f2e  f88d5001          STRB     r5,[sp,#1]            ;1912
001f32  f88d5002          STRB     r5,[sp,#2]            ;1913
001f36  f88d5003          STRB     r5,[sp,#3]            ;1914
001f3a  4669              MOV      r1,sp                 ;1915
001f3c  f1040018          ADD      r0,r4,#0x18           ;1915
001f40  f7fffffe          BL       lc640_write_long_ptr
001f44  f88d5000          STRB     r5,[sp,#0]            ;1917
001f48  f88d5001          STRB     r5,[sp,#1]            ;1918
001f4c  f88d5002          STRB     r5,[sp,#2]            ;1919
001f50  f88d5003          STRB     r5,[sp,#3]            ;1920
001f54  4669              MOV      r1,sp                 ;1921
001f56  f104001c          ADD      r0,r4,#0x1c           ;1921
001f5a  f7fffffe          BL       lc640_write_long_ptr
                  |L1.8030|
;;;2001        		{        
;;;2002        		if(event_ptr_find)event_ptr_find--;
;;;2003        		else event_ptr_find=63;
;;;2004        		if(event_ptr_find==event_ptr)
;;;2005   				{
;;;2006   				lc640_adr=0;
;;;2007   				break;
;;;2008   				}
;;;2009        		else continue;
;;;2010        		}
;;;2011        	else 
;;;2012        		{
;;;2013        		lc640_read_long_ptr(lc640_adr+16,data);
;;;2014        		if(!((data[0]=='A')&&(data[1]=='A')&&(data[2]=='A')&&(data[3]=='A')))
;;;2015        			{        
;;;2016        			if(event_ptr_find)event_ptr_find--;
;;;2017            		else event_ptr_find=63;
;;;2018            		if(event_ptr_find==event_ptr)
;;;2019   					{
;;;2020   					lc640_adr=0;
;;;2021   					break;
;;;2022   					}
;;;2023        			else continue;
;;;2024        			}
;;;2025        		}	
;;;2026   		}
;;;2027   	if(lc640_adr!=0)
;;;2028   		{
;;;2029   		data[0]=LPC_RTC->YEAR;
;;;2030   		data[1]=LPC_RTC->MONTH;
;;;2031   		data[2]=LPC_RTC->DOM;
;;;2032   		data[3]=0;
;;;2033   		lc640_write_long_ptr(lc640_adr+16,data);
;;;2034   	
;;;2035   		data[0]=LPC_RTC->HOUR;
;;;2036   		data[1]=LPC_RTC->MIN;
;;;2037   		data[2]=LPC_RTC->SEC;
;;;2038   		data[3]=0;
;;;2039   		lc640_write_long_ptr(lc640_adr+20,data);
;;;2040   		
;;;2041   		data[0]='B';
;;;2042   		data[1]='B';
;;;2043   		data[2]='B';
;;;2044   		data[3]='B';
;;;2045   		lc640_write_long_ptr(lc640_adr+24,data);
;;;2046   		
;;;2047   		data[0]='B';
;;;2048   		data[1]='B';
;;;2049   		data[2]='B';
;;;2050   		data[3]='B';
;;;2051   		lc640_write_long_ptr(lc640_adr+28,data);
;;;2052   		}
;;;2053   	}
;;;2054   }
001f5e  e560              B        |L1.6690|
                  |L1.8032|
001f60  f04f0700          MOV      r7,#0                 ;1929
                  |L1.8036|
001f64  eb0a1544          ADD      r5,r10,r4,LSL #5      ;1931
001f68  4669              MOV      r1,sp                 ;1933
001f6a  4628              MOV      r0,r5                 ;1933
001f6c  f7fffffe          BL       lc640_read_long_ptr
001f70  f89d0000          LDRB     r0,[sp,#0]            ;1935
001f74  2873              CMP      r0,#0x73              ;1935
001f76  d103              BNE      |L1.8064|
001f78  f89d0002          LDRB     r0,[sp,#2]            ;1935
001f7c  285a              CMP      r0,#0x5a              ;1935
001f7e  d00a              BEQ      |L1.8086|
                  |L1.8064|
001f80  b114              CBZ      r4,|L1.8072|
001f82  f1a40401          SUB      r4,r4,#1              ;1937
001f86  e001              B        |L1.8076|
                  |L1.8072|
001f88  f04f043f          MOV      r4,#0x3f              ;1938
                  |L1.8076|
001f8c  42b4              CMP      r4,r6                 ;1939
001f8e  d122              BNE      |L1.8150|
001f90  f04f0500          MOV      r5,#0                 ;1941
001f94  e024              B        |L1.8160|
                  |L1.8086|
001f96  4669              MOV      r1,sp                 ;1948
001f98  f1050010          ADD      r0,r5,#0x10           ;1948
001f9c  f7fffffe          BL       lc640_read_long_ptr
001fa0  f89d0000          LDRB     r0,[sp,#0]            ;1949
001fa4  2841              CMP      r0,#0x41              ;1949
001fa6  d10b              BNE      |L1.8128|
001fa8  f89d0001          LDRB     r0,[sp,#1]            ;1949
001fac  2841              CMP      r0,#0x41              ;1949
001fae  d107              BNE      |L1.8128|
001fb0  f89d0002          LDRB     r0,[sp,#2]            ;1949
001fb4  2841              CMP      r0,#0x41              ;1949
001fb6  d103              BNE      |L1.8128|
001fb8  f89d0003          LDRB     r0,[sp,#3]            ;1949
001fbc  2841              CMP      r0,#0x41              ;1949
001fbe  d00a              BEQ      |L1.8150|
                  |L1.8128|
001fc0  b114              CBZ      r4,|L1.8136|
001fc2  f1a40401          SUB      r4,r4,#1              ;1951
001fc6  e001              B        |L1.8140|
                  |L1.8136|
001fc8  f04f043f          MOV      r4,#0x3f              ;1952
                  |L1.8140|
001fcc  42b4              CMP      r4,r6                 ;1953
001fce  d102              BNE      |L1.8150|
001fd0  f04f0500          MOV      r5,#0                 ;1955
001fd4  e004              B        |L1.8160|
                  |L1.8150|
001fd6  f1070701          ADD      r7,r7,#1              ;1929
001fda  b2ff              UXTB     r7,r7                 ;1929
001fdc  2f3f              CMP      r7,#0x3f              ;1929
001fde  d3c1              BCC      |L1.8036|
                  |L1.8160|
001fe0  2d00              CMP      r5,#0                 ;1962
001fe2  d0bc              BEQ      |L1.8030|
001fe4  f8b8003c          LDRH     r0,[r8,#0x3c]         ;1964
001fe8  f88d0000          STRB     r0,[sp,#0]            ;1964
001fec  f8980038          LDRB     r0,[r8,#0x38]         ;1965
001ff0  f88d0001          STRB     r0,[sp,#1]            ;1965
001ff4  f898002c          LDRB     r0,[r8,#0x2c]         ;1966
001ff8  f88d0002          STRB     r0,[sp,#2]            ;1966
001ffc  f88d9003          STRB     r9,[sp,#3]            ;1967
002000  4669              MOV      r1,sp                 ;1968
002002  f1050010          ADD      r0,r5,#0x10           ;1968
002006  f7fffffe          BL       lc640_write_long_ptr
00200a  f8980028          LDRB     r0,[r8,#0x28]         ;1970
00200e  f88d0000          STRB     r0,[sp,#0]            ;1970
002012  f8980024          LDRB     r0,[r8,#0x24]         ;1971
002016  f88d0001          STRB     r0,[sp,#1]            ;1971
00201a  f8980020          LDRB     r0,[r8,#0x20]         ;1972
00201e  f88d0002          STRB     r0,[sp,#2]            ;1972
002022  f88d9003          STRB     r9,[sp,#3]            ;1973
002026  4669              MOV      r1,sp                 ;1974
002028  f1050014          ADD      r0,r5,#0x14           ;1974
00202c  f7fffffe          BL       lc640_write_long_ptr
002030  f04f0443          MOV      r4,#0x43              ;1976
002034  f88d4000          STRB     r4,[sp,#0]            ;1976
002038  f88d4001          STRB     r4,[sp,#1]            ;1977
00203c  f88d4002          STRB     r4,[sp,#2]            ;1978
002040  f88d4003          STRB     r4,[sp,#3]            ;1979
002044  4669              MOV      r1,sp                 ;1980
002046  f1050018          ADD      r0,r5,#0x18           ;1980
00204a  f7fffffe          BL       lc640_write_long_ptr
00204e  f88d4000          STRB     r4,[sp,#0]            ;1982
002052  f88d4001          STRB     r4,[sp,#1]            ;1983
002056  f88d4002          STRB     r4,[sp,#2]            ;1984
00205a  f88d4003          STRB     r4,[sp,#3]            ;1985
00205e  4669              MOV      r1,sp                 ;1986
002060  f105001c          ADD      r0,r5,#0x1c           ;1986
002064  f7fffffe          BL       lc640_write_long_ptr
                  |L1.8296|
002068  e4db              B        |L1.6690|
                  |L1.8298|
00206a  f89d0002          LDRB     r0,[sp,#2]            ;2000
00206e  285a              CMP      r0,#0x5a              ;2000
002070  d00a              BEQ      |L1.8328|
                  |L1.8306|
002072  b114              CBZ      r4,|L1.8314|
002074  f1a40401          SUB      r4,r4,#1              ;2002
002078  e001              B        |L1.8318|
                  |L1.8314|
00207a  f04f043f          MOV      r4,#0x3f              ;2003
                  |L1.8318|
00207e  42b4              CMP      r4,r6                 ;2004
002080  d122              BNE      |L1.8392|
002082  f04f0500          MOV      r5,#0                 ;2006
002086  e025              B        |L1.8404|
                  |L1.8328|
002088  4669              MOV      r1,sp                 ;2013
00208a  f1050010          ADD      r0,r5,#0x10           ;2013
00208e  f7fffffe          BL       lc640_read_long_ptr
002092  f89d0000          LDRB     r0,[sp,#0]            ;2014
002096  2841              CMP      r0,#0x41              ;2014
002098  d10b              BNE      |L1.8370|
00209a  f89d0001          LDRB     r0,[sp,#1]            ;2014
00209e  2841              CMP      r0,#0x41              ;2014
0020a0  d107              BNE      |L1.8370|
0020a2  f89d0002          LDRB     r0,[sp,#2]            ;2014
0020a6  2841              CMP      r0,#0x41              ;2014
0020a8  d103              BNE      |L1.8370|
0020aa  f89d0003          LDRB     r0,[sp,#3]            ;2014
0020ae  2841              CMP      r0,#0x41              ;2014
0020b0  d00a              BEQ      |L1.8392|
                  |L1.8370|
0020b2  b114              CBZ      r4,|L1.8378|
0020b4  f1a40401          SUB      r4,r4,#1              ;2016
0020b8  e001              B        |L1.8382|
                  |L1.8378|
0020ba  f04f043f          MOV      r4,#0x3f              ;2017
                  |L1.8382|
0020be  42b4              CMP      r4,r6                 ;2018
0020c0  d102              BNE      |L1.8392|
0020c2  f04f0500          MOV      r5,#0                 ;2020
0020c6  e005              B        |L1.8404|
                  |L1.8392|
0020c8  f1070701          ADD      r7,r7,#1              ;1994
0020cc  b2ff              UXTB     r7,r7                 ;1994
0020ce  2f3f              CMP      r7,#0x3f              ;1994
0020d0  f4ffae72          BCC      |L1.7608|
                  |L1.8404|
0020d4  2d00              CMP      r5,#0                 ;2027
0020d6  d0c7              BEQ      |L1.8296|
0020d8  f8b8003c          LDRH     r0,[r8,#0x3c]         ;2029
0020dc  f88d0000          STRB     r0,[sp,#0]            ;2029
0020e0  f8980038          LDRB     r0,[r8,#0x38]         ;2030
0020e4  f88d0001          STRB     r0,[sp,#1]            ;2030
0020e8  f898002c          LDRB     r0,[r8,#0x2c]         ;2031
0020ec  f88d0002          STRB     r0,[sp,#2]            ;2031
0020f0  f88d9003          STRB     r9,[sp,#3]            ;2032
0020f4  4669              MOV      r1,sp                 ;2033
0020f6  f1050010          ADD      r0,r5,#0x10           ;2033
0020fa  f7fffffe          BL       lc640_write_long_ptr
0020fe  f8980028          LDRB     r0,[r8,#0x28]         ;2035
002102  f88d0000          STRB     r0,[sp,#0]            ;2035
002106  f8980024          LDRB     r0,[r8,#0x24]         ;2036
00210a  f88d0001          STRB     r0,[sp,#1]            ;2036
00210e  f8980020          LDRB     r0,[r8,#0x20]         ;2037
002112  f88d0002          STRB     r0,[sp,#2]            ;2037
002116  f88d9003          STRB     r9,[sp,#3]            ;2038
00211a  4669              MOV      r1,sp                 ;2039
00211c  f1050014          ADD      r0,r5,#0x14           ;2039
002120  f7fffffe          BL       lc640_write_long_ptr
002124  f04f0442          MOV      r4,#0x42              ;2041
002128  f88d4000          STRB     r4,[sp,#0]            ;2041
00212c  f88d4001          STRB     r4,[sp,#1]            ;2042
002130  f88d4002          STRB     r4,[sp,#2]            ;2043
002134  f88d4003          STRB     r4,[sp,#3]            ;2044
002138  4669              MOV      r1,sp                 ;2045
00213a  f1050018          ADD      r0,r5,#0x18           ;2045
00213e  f7fffffe          BL       lc640_write_long_ptr
002142  f88d4000          STRB     r4,[sp,#0]            ;2047
002146  f88d4001          STRB     r4,[sp,#1]            ;2048
00214a  f88d4002          STRB     r4,[sp,#2]            ;2049
00214e  f88d4003          STRB     r4,[sp,#3]            ;2050
002152  4669              MOV      r1,sp                 ;2051
002154  f105001c          ADD      r0,r5,#0x1c           ;2051
002158  f7fffffe          BL       lc640_write_long_ptr
00215c  e461              B        |L1.6690|
;;;2055     
                          ENDP

                  uz_mem_hndl PROC
;;;2057   //-----------------------------------------------
;;;2058   void uz_mem_hndl(unsigned short in)	 //   
00215e  e92d4ff8          PUSH     {r3-r11,lr}
;;;2059   {
;;;2060   char data[4];
;;;2061   unsigned int event_ptr=0,lc640_adr,event_ptr_find=0,event_cnt;
002162  f04f0600          MOV      r6,#0
002166  4634              MOV      r4,r6
;;;2062   //char avar_simbol;
;;;2063   
;;;2064   if(in==1) //  
;;;2065   	{
;;;2066   	event_ptr=lc640_read_int(PTR_EVENT_LOG);
;;;2067   	event_ptr++;	
;;;2068   	if(event_ptr>63)event_ptr=0;	
;;;2069   	lc640_write_int(PTR_EVENT_LOG,event_ptr);	
;;;2070   	
;;;2071       event_cnt=lc640_read_int(CNT_EVENT_LOG);
;;;2072   	if(event_cnt!=63)event_cnt=event_ptr;
;;;2073   	lc640_write_int(CNT_EVENT_LOG,event_cnt); 
;;;2074   	
;;;2075   	lc640_adr=EVENT_LOG+(lc640_read_int(PTR_EVENT_LOG)*32);
;;;2076   	
;;;2077   	data[0]='u';
;;;2078   	data[1]=0; 
;;;2079   	data[2]='Z';
;;;2080   	data[3]=0;
;;;2081   	lc640_write_long_ptr(lc640_adr,data);
;;;2082   
;;;2083   	data[0]=0;
;;;2084   	data[1]=0;
;;;2085   	data[2]=0;
;;;2086   	data[3]=0;
;;;2087   	lc640_write_long_ptr(lc640_adr+4,data);
;;;2088   
;;;2089   	data[0]=LPC_RTC->YEAR;
002168  f8df86c4          LDR      r8,|L1.10288|
00216c  46a1              MOV      r9,r4                 ;2061
00216e  f44f6a80          MOV      r10,#0x400            ;2075
002172  2801              CMP      r0,#1                 ;2064
002174  d010              BEQ      |L1.8600|
;;;2090   	data[1]=LPC_RTC->MONTH;
;;;2091   	data[2]=LPC_RTC->DOM;
;;;2092   	data[3]=0;
;;;2093   	lc640_write_long_ptr(lc640_adr+8,data);
;;;2094   
;;;2095   	data[0]=LPC_RTC->HOUR;
;;;2096   	data[1]=LPC_RTC->MIN;
;;;2097   	data[2]=LPC_RTC->SEC;
;;;2098   	data[3]=0;
;;;2099   	lc640_write_long_ptr(lc640_adr+12,data);
;;;2100   	
;;;2101   	data[0]='A';
;;;2102   	data[1]='A';
;;;2103   	data[2]='A';
;;;2104   	data[3]='A';
;;;2105   	lc640_write_long_ptr(lc640_adr+16,data);
;;;2106   	
;;;2107   	data[0]='A';
;;;2108   	data[1]='A';
;;;2109   	data[2]='A';
;;;2110   	data[3]='A';
;;;2111   	lc640_write_long_ptr(lc640_adr+20,data);
;;;2112   	
;;;2113   	data[0]='A';
;;;2114   	data[1]='A';
;;;2115   	data[2]='A';
;;;2116   	data[3]='A';
;;;2117   	lc640_write_long_ptr(lc640_adr+24,data);
;;;2118   	
;;;2119   	data[0]='A';
;;;2120   	data[1]='A';
;;;2121   	data[2]='A';
;;;2122   	data[3]='A';
;;;2123   	lc640_write_long_ptr(lc640_adr+28,data);		
;;;2124    	
;;;2125   	}
;;;2126   
;;;2127   else if(in==0)	// 
002176  2800              CMP      r0,#0
002178  d07d              BEQ      |L1.8822|
;;;2128   	{      
;;;2129   	char i;     
;;;2130   	event_ptr_find=0;
;;;2131   	for (i=0;i<63;i++)
;;;2132   		{
;;;2133   		lc640_adr=EVENT_LOG+(event_ptr_find*32);
;;;2134   
;;;2135        	lc640_read_long_ptr(lc640_adr,data);
;;;2136        
;;;2137        	if(!((data[0]=='u')&&(data[2]=='Z')))
;;;2138        		{        
;;;2139        		if(event_ptr_find)event_ptr_find--;
;;;2140        		else event_ptr_find=63;
;;;2141        		if(event_ptr_find==event_ptr)
;;;2142   				{
;;;2143   				lc640_adr=0;
;;;2144   				break;
;;;2145   				}
;;;2146        		else continue;
;;;2147        		}
;;;2148        	else 
;;;2149        		{
;;;2150        		lc640_read_long_ptr(lc640_adr+16,data);
;;;2151        		if(!((data[0]=='A')&&(data[1]=='A')&&(data[2]=='A')&&(data[3]=='A')))
;;;2152        			{        
;;;2153        			if(event_ptr_find)event_ptr_find--;
;;;2154            		else event_ptr_find=63;
;;;2155            		if(event_ptr_find==event_ptr)
;;;2156   					{
;;;2157   					lc640_adr=0;
;;;2158   					break;
;;;2159   					}
;;;2160        			else continue;
;;;2161        			}
;;;2162        		}	
;;;2163   		}
;;;2164   	if(lc640_adr!=0)
;;;2165   		{
;;;2166   		data[0]=LPC_RTC->YEAR;
;;;2167   		data[1]=LPC_RTC->MONTH;
;;;2168   		data[2]=LPC_RTC->DOM;
;;;2169   		data[3]=0;
;;;2170   		lc640_write_long_ptr(lc640_adr+16,data);
;;;2171   	
;;;2172   		data[0]=LPC_RTC->HOUR;
;;;2173   		data[1]=LPC_RTC->MIN;
;;;2174   		data[2]=LPC_RTC->SEC;
;;;2175   		data[3]=0;
;;;2176   		lc640_write_long_ptr(lc640_adr+20,data);
;;;2177   		
;;;2178   		data[0]='C';
;;;2179   		data[1]='C';
;;;2180   		data[2]='C';
;;;2181   		data[3]='C';
;;;2182   		lc640_write_long_ptr(lc640_adr+24,data);
;;;2183   		
;;;2184   		data[0]='C';
;;;2185   		data[1]='C';
;;;2186   		data[2]='C';
;;;2187   		data[3]='C';
;;;2188   		lc640_write_long_ptr(lc640_adr+28,data);
;;;2189   		}
;;;2190   	}
;;;2191   else if(in==10) 	//  
00217a  280a              CMP      r0,#0xa
00217c  d17c              BNE      |L1.8824|
;;;2192   	{      
;;;2193   	char i;     
;;;2194   
;;;2195   	event_ptr_find=0;
;;;2196   	for (i=0;i<63;i++)
00217e  f04f0700          MOV      r7,#0
                  |L1.8578|
;;;2197   		{
;;;2198   		lc640_adr=EVENT_LOG+(event_ptr_find*32);
002182  eb0a1544          ADD      r5,r10,r4,LSL #5
;;;2199   
;;;2200        	lc640_read_long_ptr(lc640_adr,data);
002186  4669              MOV      r1,sp
002188  4628              MOV      r0,r5
00218a  f7fffffe          BL       lc640_read_long_ptr
;;;2201        
;;;2202        	if(!((data[0]=='u')&&(data[2]=='Z')))
00218e  f89d0000          LDRB     r0,[sp,#0]
002192  2875              CMP      r0,#0x75
002194  d171              BNE      |L1.8826|
002196  e11c              B        |L1.9170|
                  |L1.8600|
002198  f44f6560          MOV      r5,#0xe00             ;2066
00219c  4628              MOV      r0,r5                 ;2066
00219e  f7fffffe          BL       lc640_read_int
0021a2  f1000001          ADD      r0,r0,#1              ;2067
0021a6  4604              MOV      r4,r0                 ;2067
0021a8  2c3f              CMP      r4,#0x3f              ;2068
0021aa  d901              BLS      |L1.8624|
0021ac  f04f0400          MOV      r4,#0                 ;2068
                  |L1.8624|
0021b0  b221              SXTH     r1,r4                 ;2069
0021b2  4628              MOV      r0,r5                 ;2069
0021b4  f7fffffe          BL       lc640_write_int
0021b8  f6406602          MOV      r6,#0xe02             ;2071
0021bc  4630              MOV      r0,r6                 ;2071
0021be  f7fffffe          BL       lc640_read_int
0021c2  283f              CMP      r0,#0x3f              ;2072
0021c4  d000              BEQ      |L1.8648|
0021c6  4620              MOV      r0,r4                 ;2072
                  |L1.8648|
0021c8  b201              SXTH     r1,r0                 ;2073
0021ca  4630              MOV      r0,r6                 ;2073
0021cc  f7fffffe          BL       lc640_write_int
0021d0  4628              MOV      r0,r5                 ;2075
0021d2  f7fffffe          BL       lc640_read_int
0021d6  eb0a1440          ADD      r4,r10,r0,LSL #5      ;2075
0021da  f04f0075          MOV      r0,#0x75              ;2077
0021de  f88d0000          STRB     r0,[sp,#0]            ;2077
0021e2  f88d9001          STRB     r9,[sp,#1]            ;2078
0021e6  f04f005a          MOV      r0,#0x5a              ;2079
0021ea  f88d0002          STRB     r0,[sp,#2]            ;2079
0021ee  f88d9003          STRB     r9,[sp,#3]            ;2080
0021f2  4669              MOV      r1,sp                 ;2081
0021f4  4620              MOV      r0,r4                 ;2081
0021f6  f7fffffe          BL       lc640_write_long_ptr
0021fa  f8cd9000          STR      r9,[sp,#0]            ;2086
0021fe  4669              MOV      r1,sp                 ;2087
002200  1d20              ADDS     r0,r4,#4              ;2087
002202  f7fffffe          BL       lc640_write_long_ptr
002206  f8b8003c          LDRH     r0,[r8,#0x3c]         ;2089
00220a  f88d0000          STRB     r0,[sp,#0]            ;2089
00220e  f8980038          LDRB     r0,[r8,#0x38]         ;2090
002212  f88d0001          STRB     r0,[sp,#1]            ;2090
002216  f898002c          LDRB     r0,[r8,#0x2c]         ;2091
00221a  f88d0002          STRB     r0,[sp,#2]            ;2091
00221e  f88d9003          STRB     r9,[sp,#3]            ;2092
002222  4669              MOV      r1,sp                 ;2093
002224  f1040008          ADD      r0,r4,#8              ;2093
002228  f7fffffe          BL       lc640_write_long_ptr
00222c  f8980028          LDRB     r0,[r8,#0x28]         ;2095
002230  f88d0000          STRB     r0,[sp,#0]            ;2095
002234  f8980024          LDRB     r0,[r8,#0x24]         ;2096
002238  f88d0001          STRB     r0,[sp,#1]            ;2096
00223c  f8980020          LDRB     r0,[r8,#0x20]         ;2097
002240  f88d0002          STRB     r0,[sp,#2]            ;2097
002244  f88d9003          STRB     r9,[sp,#3]            ;2098
002248  4669              MOV      r1,sp                 ;2099
00224a  f104000c          ADD      r0,r4,#0xc            ;2099
00224e  f7fffffe          BL       lc640_write_long_ptr
002252  f04f0541          MOV      r5,#0x41              ;2101
002256  f88d5000          STRB     r5,[sp,#0]            ;2101
00225a  f88d5001          STRB     r5,[sp,#1]            ;2102
00225e  f88d5002          STRB     r5,[sp,#2]            ;2103
002262  f88d5003          STRB     r5,[sp,#3]            ;2104
002266  4669              MOV      r1,sp                 ;2105
002268  f1040010          ADD      r0,r4,#0x10           ;2105
00226c  f7fffffe          BL       lc640_write_long_ptr
002270  f88d5000          STRB     r5,[sp,#0]            ;2107
002274  e002              B        |L1.8828|
                  |L1.8822|
002276  e027              B        |L1.8904|
                  |L1.8824|
002278  e025              B        |L1.8902|
                  |L1.8826|
00227a  e0ae              B        |L1.9178|
                  |L1.8828|
00227c  f88d5001          STRB     r5,[sp,#1]            ;2108
002280  f88d5002          STRB     r5,[sp,#2]            ;2109
002284  f88d5003          STRB     r5,[sp,#3]            ;2110
002288  4669              MOV      r1,sp                 ;2111
00228a  f1040014          ADD      r0,r4,#0x14           ;2111
00228e  f7fffffe          BL       lc640_write_long_ptr
002292  f88d5000          STRB     r5,[sp,#0]            ;2113
002296  f88d5001          STRB     r5,[sp,#1]            ;2114
00229a  f88d5002          STRB     r5,[sp,#2]            ;2115
00229e  f88d5003          STRB     r5,[sp,#3]            ;2116
0022a2  4669              MOV      r1,sp                 ;2117
0022a4  f1040018          ADD      r0,r4,#0x18           ;2117
0022a8  f7fffffe          BL       lc640_write_long_ptr
0022ac  f88d5000          STRB     r5,[sp,#0]            ;2119
0022b0  f88d5001          STRB     r5,[sp,#1]            ;2120
0022b4  f88d5002          STRB     r5,[sp,#2]            ;2121
0022b8  f88d5003          STRB     r5,[sp,#3]            ;2122
0022bc  4669              MOV      r1,sp                 ;2123
0022be  f104001c          ADD      r0,r4,#0x1c           ;2123
0022c2  f7fffffe          BL       lc640_write_long_ptr
                  |L1.8902|
;;;2203        		{        
;;;2204        		if(event_ptr_find)event_ptr_find--;
;;;2205        		else event_ptr_find=63;
;;;2206        		if(event_ptr_find==event_ptr)
;;;2207   				{
;;;2208   				lc640_adr=0;
;;;2209   				break;
;;;2210   				}
;;;2211        		else continue;
;;;2212        		}
;;;2213        	else 
;;;2214        		{
;;;2215        		lc640_read_long_ptr(lc640_adr+16,data);
;;;2216        		if(!((data[0]=='A')&&(data[1]=='A')&&(data[2]=='A')&&(data[3]=='A')))
;;;2217        			{        
;;;2218        			if(event_ptr_find)event_ptr_find--;
;;;2219            		else event_ptr_find=63;
;;;2220            		if(event_ptr_find==event_ptr)
;;;2221   					{
;;;2222   					lc640_adr=0;
;;;2223   					break;
;;;2224   					}
;;;2225        			else continue;
;;;2226        			}
;;;2227        		}	
;;;2228   		}
;;;2229   	if(lc640_adr!=0)
;;;2230   		{
;;;2231   		data[0]=LPC_RTC->YEAR;
;;;2232   		data[1]=LPC_RTC->MONTH;
;;;2233   		data[2]=LPC_RTC->DOM;
;;;2234   		data[3]=0;
;;;2235   		lc640_write_long_ptr(lc640_adr+16,data);
;;;2236   	
;;;2237   		data[0]=LPC_RTC->HOUR;
;;;2238   		data[1]=LPC_RTC->MIN;
;;;2239   		data[2]=LPC_RTC->SEC;
;;;2240   		data[3]=0;
;;;2241   		lc640_write_long_ptr(lc640_adr+20,data);
;;;2242   		
;;;2243   		data[0]='B';
;;;2244   		data[1]='B';
;;;2245   		data[2]='B';
;;;2246   		data[3]='B';
;;;2247   		lc640_write_long_ptr(lc640_adr+24,data);
;;;2248   		
;;;2249   		data[0]='B';
;;;2250   		data[1]='B';
;;;2251   		data[2]='B';
;;;2252   		data[3]='B';
;;;2253   		lc640_write_long_ptr(lc640_adr+28,data);
;;;2254   		}
;;;2255   	}
;;;2256   }
0022c6  e561              B        |L1.7564|
                  |L1.8904|
0022c8  f04f0700          MOV      r7,#0                 ;2131
                  |L1.8908|
0022cc  eb0a1544          ADD      r5,r10,r4,LSL #5      ;2133
0022d0  4669              MOV      r1,sp                 ;2135
0022d2  4628              MOV      r0,r5                 ;2135
0022d4  f7fffffe          BL       lc640_read_long_ptr
0022d8  f89d0000          LDRB     r0,[sp,#0]            ;2137
0022dc  2875              CMP      r0,#0x75              ;2137
0022de  d103              BNE      |L1.8936|
0022e0  f89d0002          LDRB     r0,[sp,#2]            ;2137
0022e4  285a              CMP      r0,#0x5a              ;2137
0022e6  d00a              BEQ      |L1.8958|
                  |L1.8936|
0022e8  b114              CBZ      r4,|L1.8944|
0022ea  f1a40401          SUB      r4,r4,#1              ;2139
0022ee  e001              B        |L1.8948|
                  |L1.8944|
0022f0  f04f043f          MOV      r4,#0x3f              ;2140
                  |L1.8948|
0022f4  42b4              CMP      r4,r6                 ;2141
0022f6  d122              BNE      |L1.9022|
0022f8  f04f0500          MOV      r5,#0                 ;2143
0022fc  e024              B        |L1.9032|
                  |L1.8958|
0022fe  4669              MOV      r1,sp                 ;2150
002300  f1050010          ADD      r0,r5,#0x10           ;2150
002304  f7fffffe          BL       lc640_read_long_ptr
002308  f89d0000          LDRB     r0,[sp,#0]            ;2151
00230c  2841              CMP      r0,#0x41              ;2151
00230e  d10b              BNE      |L1.9000|
002310  f89d0001          LDRB     r0,[sp,#1]            ;2151
002314  2841              CMP      r0,#0x41              ;2151
002316  d107              BNE      |L1.9000|
002318  f89d0002          LDRB     r0,[sp,#2]            ;2151
00231c  2841              CMP      r0,#0x41              ;2151
00231e  d103              BNE      |L1.9000|
002320  f89d0003          LDRB     r0,[sp,#3]            ;2151
002324  2841              CMP      r0,#0x41              ;2151
002326  d00a              BEQ      |L1.9022|
                  |L1.9000|
002328  b114              CBZ      r4,|L1.9008|
00232a  f1a40401          SUB      r4,r4,#1              ;2153
00232e  e001              B        |L1.9012|
                  |L1.9008|
002330  f04f043f          MOV      r4,#0x3f              ;2154
                  |L1.9012|
002334  42b4              CMP      r4,r6                 ;2155
002336  d102              BNE      |L1.9022|
002338  f04f0500          MOV      r5,#0                 ;2157
00233c  e004              B        |L1.9032|
                  |L1.9022|
00233e  f1070701          ADD      r7,r7,#1              ;2131
002342  b2ff              UXTB     r7,r7                 ;2131
002344  2f3f              CMP      r7,#0x3f              ;2131
002346  d3c1              BCC      |L1.8908|
                  |L1.9032|
002348  2d00              CMP      r5,#0                 ;2164
00234a  d0bc              BEQ      |L1.8902|
00234c  f8b8003c          LDRH     r0,[r8,#0x3c]         ;2166
002350  f88d0000          STRB     r0,[sp,#0]            ;2166
002354  f8980038          LDRB     r0,[r8,#0x38]         ;2167
002358  f88d0001          STRB     r0,[sp,#1]            ;2167
00235c  f898002c          LDRB     r0,[r8,#0x2c]         ;2168
002360  f88d0002          STRB     r0,[sp,#2]            ;2168
002364  f88d9003          STRB     r9,[sp,#3]            ;2169
002368  4669              MOV      r1,sp                 ;2170
00236a  f1050010          ADD      r0,r5,#0x10           ;2170
00236e  f7fffffe          BL       lc640_write_long_ptr
002372  f8980028          LDRB     r0,[r8,#0x28]         ;2172
002376  f88d0000          STRB     r0,[sp,#0]            ;2172
00237a  f8980024          LDRB     r0,[r8,#0x24]         ;2173
00237e  f88d0001          STRB     r0,[sp,#1]            ;2173
002382  f8980020          LDRB     r0,[r8,#0x20]         ;2174
002386  f88d0002          STRB     r0,[sp,#2]            ;2174
00238a  f88d9003          STRB     r9,[sp,#3]            ;2175
00238e  4669              MOV      r1,sp                 ;2176
002390  f1050014          ADD      r0,r5,#0x14           ;2176
002394  f7fffffe          BL       lc640_write_long_ptr
002398  f04f0443          MOV      r4,#0x43              ;2178
00239c  f88d4000          STRB     r4,[sp,#0]            ;2178
0023a0  f88d4001          STRB     r4,[sp,#1]            ;2179
0023a4  f88d4002          STRB     r4,[sp,#2]            ;2180
0023a8  f88d4003          STRB     r4,[sp,#3]            ;2181
0023ac  4669              MOV      r1,sp                 ;2182
0023ae  f1050018          ADD      r0,r5,#0x18           ;2182
0023b2  f7fffffe          BL       lc640_write_long_ptr
0023b6  f88d4000          STRB     r4,[sp,#0]            ;2184
0023ba  f88d4001          STRB     r4,[sp,#1]            ;2185
0023be  f88d4002          STRB     r4,[sp,#2]            ;2186
0023c2  f88d4003          STRB     r4,[sp,#3]            ;2187
0023c6  4669              MOV      r1,sp                 ;2188
0023c8  f105001c          ADD      r0,r5,#0x1c           ;2188
0023cc  f7fffffe          BL       lc640_write_long_ptr
                  |L1.9168|
0023d0  e4dc              B        |L1.7564|
                  |L1.9170|
0023d2  f89d0002          LDRB     r0,[sp,#2]            ;2202
0023d6  285a              CMP      r0,#0x5a              ;2202
0023d8  d00a              BEQ      |L1.9200|
                  |L1.9178|
0023da  b114              CBZ      r4,|L1.9186|
0023dc  f1a40401          SUB      r4,r4,#1              ;2204
0023e0  e001              B        |L1.9190|
                  |L1.9186|
0023e2  f04f043f          MOV      r4,#0x3f              ;2205
                  |L1.9190|
0023e6  42b4              CMP      r4,r6                 ;2206
0023e8  d122              BNE      |L1.9264|
0023ea  f04f0500          MOV      r5,#0                 ;2208
0023ee  e025              B        |L1.9276|
                  |L1.9200|
0023f0  4669              MOV      r1,sp                 ;2215
0023f2  f1050010          ADD      r0,r5,#0x10           ;2215
0023f6  f7fffffe          BL       lc640_read_long_ptr
0023fa  f89d0000          LDRB     r0,[sp,#0]            ;2216
0023fe  2841              CMP      r0,#0x41              ;2216
002400  d10b              BNE      |L1.9242|
002402  f89d0001          LDRB     r0,[sp,#1]            ;2216
002406  2841              CMP      r0,#0x41              ;2216
002408  d107              BNE      |L1.9242|
00240a  f89d0002          LDRB     r0,[sp,#2]            ;2216
00240e  2841              CMP      r0,#0x41              ;2216
002410  d103              BNE      |L1.9242|
002412  f89d0003          LDRB     r0,[sp,#3]            ;2216
002416  2841              CMP      r0,#0x41              ;2216
002418  d00a              BEQ      |L1.9264|
                  |L1.9242|
00241a  b114              CBZ      r4,|L1.9250|
00241c  f1a40401          SUB      r4,r4,#1              ;2218
002420  e001              B        |L1.9254|
                  |L1.9250|
002422  f04f043f          MOV      r4,#0x3f              ;2219
                  |L1.9254|
002426  42b4              CMP      r4,r6                 ;2220
002428  d102              BNE      |L1.9264|
00242a  f04f0500          MOV      r5,#0                 ;2222
00242e  e005              B        |L1.9276|
                  |L1.9264|
002430  f1070701          ADD      r7,r7,#1              ;2196
002434  b2ff              UXTB     r7,r7                 ;2196
002436  2f3f              CMP      r7,#0x3f              ;2196
002438  f4ffaea3          BCC      |L1.8578|
                  |L1.9276|
00243c  2d00              CMP      r5,#0                 ;2229
00243e  d0c7              BEQ      |L1.9168|
002440  f8b8003c          LDRH     r0,[r8,#0x3c]         ;2231
002444  f88d0000          STRB     r0,[sp,#0]            ;2231
002448  f8980038          LDRB     r0,[r8,#0x38]         ;2232
00244c  f88d0001          STRB     r0,[sp,#1]            ;2232
002450  f898002c          LDRB     r0,[r8,#0x2c]         ;2233
002454  f88d0002          STRB     r0,[sp,#2]            ;2233
002458  f88d9003          STRB     r9,[sp,#3]            ;2234
00245c  4669              MOV      r1,sp                 ;2235
00245e  f1050010          ADD      r0,r5,#0x10           ;2235
002462  f7fffffe          BL       lc640_write_long_ptr
002466  f8980028          LDRB     r0,[r8,#0x28]         ;2237
00246a  f88d0000          STRB     r0,[sp,#0]            ;2237
00246e  f8980024          LDRB     r0,[r8,#0x24]         ;2238
002472  f88d0001          STRB     r0,[sp,#1]            ;2238
002476  f8980020          LDRB     r0,[r8,#0x20]         ;2239
00247a  f88d0002          STRB     r0,[sp,#2]            ;2239
00247e  f88d9003          STRB     r9,[sp,#3]            ;2240
002482  4669              MOV      r1,sp                 ;2241
002484  f1050014          ADD      r0,r5,#0x14           ;2241
002488  f7fffffe          BL       lc640_write_long_ptr
00248c  f04f0442          MOV      r4,#0x42              ;2243
002490  f88d4000          STRB     r4,[sp,#0]            ;2243
002494  f88d4001          STRB     r4,[sp,#1]            ;2244
002498  f88d4002          STRB     r4,[sp,#2]            ;2245
00249c  f88d4003          STRB     r4,[sp,#3]            ;2246
0024a0  4669              MOV      r1,sp                 ;2247
0024a2  f1050018          ADD      r0,r5,#0x18           ;2247
0024a6  f7fffffe          BL       lc640_write_long_ptr
0024aa  f88d4000          STRB     r4,[sp,#0]            ;2249
0024ae  f88d4001          STRB     r4,[sp,#1]            ;2250
0024b2  f88d4002          STRB     r4,[sp,#2]            ;2251
0024b6  f88d4003          STRB     r4,[sp,#3]            ;2252
0024ba  4669              MOV      r1,sp                 ;2253
0024bc  f105001c          ADD      r0,r5,#0x1c           ;2253
0024c0  f7fffffe          BL       lc640_write_long_ptr
0024c4  e462              B        |L1.7564|
;;;2257   
                          ENDP

                  fz_mem_hndl PROC
;;;2258   //-----------------------------------------------
;;;2259   void fz_mem_hndl(unsigned short in)	 //   
0024c6  e92d4ff8          PUSH     {r3-r11,lr}
;;;2260   {
;;;2261   char data[4];
;;;2262   unsigned int event_ptr=0,lc640_adr,event_ptr_find=0,event_cnt;
0024ca  f04f0600          MOV      r6,#0
0024ce  4634              MOV      r4,r6
;;;2263   //char avar_simbol;
;;;2264   
;;;2265   if(in==1) //  
;;;2266   	{
;;;2267   	event_ptr=lc640_read_int(PTR_EVENT_LOG);
;;;2268   	event_ptr++;	
;;;2269   	if(event_ptr>63)event_ptr=0;	
;;;2270   	lc640_write_int(PTR_EVENT_LOG,event_ptr);	
;;;2271   	
;;;2272       event_cnt=lc640_read_int(CNT_EVENT_LOG);
;;;2273   	if(event_cnt!=63)event_cnt=event_ptr;
;;;2274   	lc640_write_int(CNT_EVENT_LOG,event_cnt); 
;;;2275   	
;;;2276   	lc640_adr=EVENT_LOG+(lc640_read_int(PTR_EVENT_LOG)*32);
;;;2277   	
;;;2278   	data[0]='f';
;;;2279   	data[1]=0; 
;;;2280   	data[2]='Z';
;;;2281   	data[3]=0;
;;;2282   	lc640_write_long_ptr(lc640_adr,data);
;;;2283   
;;;2284   	data[0]=0;
;;;2285   	data[1]=0;
;;;2286   	data[2]=0;
;;;2287   	data[3]=0;
;;;2288   	lc640_write_long_ptr(lc640_adr+4,data);
;;;2289   
;;;2290   	data[0]=LPC_RTC->YEAR;
0024d0  f8df835c          LDR      r8,|L1.10288|
0024d4  46a1              MOV      r9,r4                 ;2262
0024d6  f44f6a80          MOV      r10,#0x400            ;2276
0024da  2801              CMP      r0,#1                 ;2265
0024dc  d010              BEQ      |L1.9472|
;;;2291   	data[1]=LPC_RTC->MONTH;
;;;2292   	data[2]=LPC_RTC->DOM;
;;;2293   	data[3]=0;
;;;2294   	lc640_write_long_ptr(lc640_adr+8,data);
;;;2295   
;;;2296   	data[0]=LPC_RTC->HOUR;
;;;2297   	data[1]=LPC_RTC->MIN;
;;;2298   	data[2]=LPC_RTC->SEC;
;;;2299   	data[3]=0;
;;;2300   	lc640_write_long_ptr(lc640_adr+12,data);
;;;2301   	
;;;2302   	data[0]='A';
;;;2303   	data[1]='A';
;;;2304   	data[2]='A';
;;;2305   	data[3]='A';
;;;2306   	lc640_write_long_ptr(lc640_adr+16,data);
;;;2307   	
;;;2308   	data[0]='A';
;;;2309   	data[1]='A';
;;;2310   	data[2]='A';
;;;2311   	data[3]='A';
;;;2312   	lc640_write_long_ptr(lc640_adr+20,data);
;;;2313   	
;;;2314   	data[0]='A';
;;;2315   	data[1]='A';
;;;2316   	data[2]='A';
;;;2317   	data[3]='A';
;;;2318   	lc640_write_long_ptr(lc640_adr+24,data);
;;;2319   	
;;;2320   	data[0]='A';
;;;2321   	data[1]='A';
;;;2322   	data[2]='A';
;;;2323   	data[3]='A';
;;;2324   	lc640_write_long_ptr(lc640_adr+28,data);		
;;;2325    	
;;;2326   	}
;;;2327   
;;;2328   else if(in==0)	// 
0024de  2800              CMP      r0,#0
0024e0  d07d              BEQ      |L1.9694|
;;;2329   	{      
;;;2330   	char i;     
;;;2331   	event_ptr_find=0;
;;;2332   	for (i=0;i<63;i++)
;;;2333   		{
;;;2334   		lc640_adr=EVENT_LOG+(event_ptr_find*32);
;;;2335   
;;;2336        	lc640_read_long_ptr(lc640_adr,data);
;;;2337        
;;;2338        	if(!((data[0]=='f')&&(data[2]=='Z')))
;;;2339        		{        
;;;2340        		if(event_ptr_find)event_ptr_find--;
;;;2341        		else event_ptr_find=63;
;;;2342        		if(event_ptr_find==event_ptr)
;;;2343   				{
;;;2344   				lc640_adr=0;
;;;2345   				break;
;;;2346   				}
;;;2347        		else continue;
;;;2348        		}
;;;2349        	else 
;;;2350        		{
;;;2351        		lc640_read_long_ptr(lc640_adr+16,data);
;;;2352        		if(!((data[0]=='A')&&(data[1]=='A')&&(data[2]=='A')&&(data[3]=='A')))
;;;2353        			{        
;;;2354        			if(event_ptr_find)event_ptr_find--;
;;;2355            		else event_ptr_find=63;
;;;2356            		if(event_ptr_find==event_ptr)
;;;2357   					{
;;;2358   					lc640_adr=0;
;;;2359   					break;
;;;2360   					}
;;;2361        			else continue;
;;;2362        			}
;;;2363        		}	
;;;2364   		}
;;;2365   	if(lc640_adr!=0)
;;;2366   		{
;;;2367   		data[0]=LPC_RTC->YEAR;
;;;2368   		data[1]=LPC_RTC->MONTH;
;;;2369   		data[2]=LPC_RTC->DOM;
;;;2370   		data[3]=0;
;;;2371   		lc640_write_long_ptr(lc640_adr+16,data);
;;;2372   	
;;;2373   		data[0]=LPC_RTC->HOUR;
;;;2374   		data[1]=LPC_RTC->MIN;
;;;2375   		data[2]=LPC_RTC->SEC;
;;;2376   		data[3]=0;
;;;2377   		lc640_write_long_ptr(lc640_adr+20,data);
;;;2378   		
;;;2379   		data[0]='C';
;;;2380   		data[1]='C';
;;;2381   		data[2]='C';
;;;2382   		data[3]='C';
;;;2383   		lc640_write_long_ptr(lc640_adr+24,data);
;;;2384   		
;;;2385   		data[0]='C';
;;;2386   		data[1]='C';
;;;2387   		data[2]='C';
;;;2388   		data[3]='C';
;;;2389   		lc640_write_long_ptr(lc640_adr+28,data);
;;;2390   		}
;;;2391   	}
;;;2392   else if(in==10) 	//  
0024e2  280a              CMP      r0,#0xa
0024e4  d17c              BNE      |L1.9696|
;;;2393   	{      
;;;2394   	char i;     
;;;2395   
;;;2396   	event_ptr_find=0;
;;;2397   	for (i=0;i<63;i++)
0024e6  f04f0700          MOV      r7,#0
                  |L1.9450|
;;;2398   		{
;;;2399   		lc640_adr=EVENT_LOG+(event_ptr_find*32);
0024ea  eb0a1544          ADD      r5,r10,r4,LSL #5
;;;2400   
;;;2401        	lc640_read_long_ptr(lc640_adr,data);
0024ee  4669              MOV      r1,sp
0024f0  4628              MOV      r0,r5
0024f2  f7fffffe          BL       lc640_read_long_ptr
;;;2402        
;;;2403        	if(!((data[0]=='f')&&(data[2]=='Z')))
0024f6  f89d0000          LDRB     r0,[sp,#0]
0024fa  2866              CMP      r0,#0x66
0024fc  d171              BNE      |L1.9698|
0024fe  e11c              B        |L1.10042|
                  |L1.9472|
002500  f44f6560          MOV      r5,#0xe00             ;2267
002504  4628              MOV      r0,r5                 ;2267
002506  f7fffffe          BL       lc640_read_int
00250a  f1000001          ADD      r0,r0,#1              ;2268
00250e  4604              MOV      r4,r0                 ;2268
002510  2c3f              CMP      r4,#0x3f              ;2269
002512  d901              BLS      |L1.9496|
002514  f04f0400          MOV      r4,#0                 ;2269
                  |L1.9496|
002518  b221              SXTH     r1,r4                 ;2270
00251a  4628              MOV      r0,r5                 ;2270
00251c  f7fffffe          BL       lc640_write_int
002520  f6406602          MOV      r6,#0xe02             ;2272
002524  4630              MOV      r0,r6                 ;2272
002526  f7fffffe          BL       lc640_read_int
00252a  283f              CMP      r0,#0x3f              ;2273
00252c  d000              BEQ      |L1.9520|
00252e  4620              MOV      r0,r4                 ;2273
                  |L1.9520|
002530  b201              SXTH     r1,r0                 ;2274
002532  4630              MOV      r0,r6                 ;2274
002534  f7fffffe          BL       lc640_write_int
002538  4628              MOV      r0,r5                 ;2276
00253a  f7fffffe          BL       lc640_read_int
00253e  eb0a1440          ADD      r4,r10,r0,LSL #5      ;2276
002542  f04f0066          MOV      r0,#0x66              ;2278
002546  f88d0000          STRB     r0,[sp,#0]            ;2278
00254a  f88d9001          STRB     r9,[sp,#1]            ;2279
00254e  f04f005a          MOV      r0,#0x5a              ;2280
002552  f88d0002          STRB     r0,[sp,#2]            ;2280
002556  f88d9003          STRB     r9,[sp,#3]            ;2281
00255a  4669              MOV      r1,sp                 ;2282
00255c  4620              MOV      r0,r4                 ;2282
00255e  f7fffffe          BL       lc640_write_long_ptr
002562  f8cd9000          STR      r9,[sp,#0]            ;2287
002566  4669              MOV      r1,sp                 ;2288
002568  1d20              ADDS     r0,r4,#4              ;2288
00256a  f7fffffe          BL       lc640_write_long_ptr
00256e  f8b8003c          LDRH     r0,[r8,#0x3c]         ;2290
002572  f88d0000          STRB     r0,[sp,#0]            ;2290
002576  f8980038          LDRB     r0,[r8,#0x38]         ;2291
00257a  f88d0001          STRB     r0,[sp,#1]            ;2291
00257e  f898002c          LDRB     r0,[r8,#0x2c]         ;2292
002582  f88d0002          STRB     r0,[sp,#2]            ;2292
002586  f88d9003          STRB     r9,[sp,#3]            ;2293
00258a  4669              MOV      r1,sp                 ;2294
00258c  f1040008          ADD      r0,r4,#8              ;2294
002590  f7fffffe          BL       lc640_write_long_ptr
002594  f8980028          LDRB     r0,[r8,#0x28]         ;2296
002598  f88d0000          STRB     r0,[sp,#0]            ;2296
00259c  f8980024          LDRB     r0,[r8,#0x24]         ;2297
0025a0  f88d0001          STRB     r0,[sp,#1]            ;2297
0025a4  f8980020          LDRB     r0,[r8,#0x20]         ;2298
0025a8  f88d0002          STRB     r0,[sp,#2]            ;2298
0025ac  f88d9003          STRB     r9,[sp,#3]            ;2299
0025b0  4669              MOV      r1,sp                 ;2300
0025b2  f104000c          ADD      r0,r4,#0xc            ;2300
0025b6  f7fffffe          BL       lc640_write_long_ptr
0025ba  f04f0541          MOV      r5,#0x41              ;2302
0025be  f88d5000          STRB     r5,[sp,#0]            ;2302
0025c2  f88d5001          STRB     r5,[sp,#1]            ;2303
0025c6  f88d5002          STRB     r5,[sp,#2]            ;2304
0025ca  f88d5003          STRB     r5,[sp,#3]            ;2305
0025ce  4669              MOV      r1,sp                 ;2306
0025d0  f1040010          ADD      r0,r4,#0x10           ;2306
0025d4  f7fffffe          BL       lc640_write_long_ptr
0025d8  f88d5000          STRB     r5,[sp,#0]            ;2308
0025dc  e002              B        |L1.9700|
                  |L1.9694|
0025de  e027              B        |L1.9776|
                  |L1.9696|
0025e0  e025              B        |L1.9774|
                  |L1.9698|
0025e2  e0ae              B        |L1.10050|
                  |L1.9700|
0025e4  f88d5001          STRB     r5,[sp,#1]            ;2309
0025e8  f88d5002          STRB     r5,[sp,#2]            ;2310
0025ec  f88d5003          STRB     r5,[sp,#3]            ;2311
0025f0  4669              MOV      r1,sp                 ;2312
0025f2  f1040014          ADD      r0,r4,#0x14           ;2312
0025f6  f7fffffe          BL       lc640_write_long_ptr
0025fa  f88d5000          STRB     r5,[sp,#0]            ;2314
0025fe  f88d5001          STRB     r5,[sp,#1]            ;2315
002602  f88d5002          STRB     r5,[sp,#2]            ;2316
002606  f88d5003          STRB     r5,[sp,#3]            ;2317
00260a  4669              MOV      r1,sp                 ;2318
00260c  f1040018          ADD      r0,r4,#0x18           ;2318
002610  f7fffffe          BL       lc640_write_long_ptr
002614  f88d5000          STRB     r5,[sp,#0]            ;2320
002618  f88d5001          STRB     r5,[sp,#1]            ;2321
00261c  f88d5002          STRB     r5,[sp,#2]            ;2322
002620  f88d5003          STRB     r5,[sp,#3]            ;2323
002624  4669              MOV      r1,sp                 ;2324
002626  f104001c          ADD      r0,r4,#0x1c           ;2324
00262a  f7fffffe          BL       lc640_write_long_ptr
                  |L1.9774|
;;;2404        		{        
;;;2405        		if(event_ptr_find)event_ptr_find--;
;;;2406        		else event_ptr_find=63;
;;;2407        		if(event_ptr_find==event_ptr)
;;;2408   				{
;;;2409   				lc640_adr=0;
;;;2410   				break;
;;;2411   				}
;;;2412        		else continue;
;;;2413        		}
;;;2414        	else 
;;;2415        		{
;;;2416        		lc640_read_long_ptr(lc640_adr+16,data);
;;;2417        		if(!((data[0]=='A')&&(data[1]=='A')&&(data[2]=='A')&&(data[3]=='A')))
;;;2418        			{        
;;;2419        			if(event_ptr_find)event_ptr_find--;
;;;2420            		else event_ptr_find=63;
;;;2421            		if(event_ptr_find==event_ptr)
;;;2422   					{
;;;2423   					lc640_adr=0;
;;;2424   					break;
;;;2425   					}
;;;2426        			else continue;
;;;2427        			}
;;;2428        		}	
;;;2429   		}
;;;2430   	if(lc640_adr!=0)
;;;2431   		{
;;;2432   		data[0]=LPC_RTC->YEAR;
;;;2433   		data[1]=LPC_RTC->MONTH;
;;;2434   		data[2]=LPC_RTC->DOM;
;;;2435   		data[3]=0;
;;;2436   		lc640_write_long_ptr(lc640_adr+16,data);
;;;2437   	
;;;2438   		data[0]=LPC_RTC->HOUR;
;;;2439   		data[1]=LPC_RTC->MIN;
;;;2440   		data[2]=LPC_RTC->SEC;
;;;2441   		data[3]=0;
;;;2442   		lc640_write_long_ptr(lc640_adr+20,data);
;;;2443   		
;;;2444   		data[0]='B';
;;;2445   		data[1]='B';
;;;2446   		data[2]='B';
;;;2447   		data[3]='B';
;;;2448   		lc640_write_long_ptr(lc640_adr+24,data);
;;;2449   		
;;;2450   		data[0]='B';
;;;2451   		data[1]='B';
;;;2452   		data[2]='B';
;;;2453   		data[3]='B';
;;;2454   		lc640_write_long_ptr(lc640_adr+28,data);
;;;2455   		}
;;;2456   	}
;;;2457   }
00262e  e496              B        |L1.8030|
                  |L1.9776|
002630  f04f0700          MOV      r7,#0                 ;2332
                  |L1.9780|
002634  eb0a1544          ADD      r5,r10,r4,LSL #5      ;2334
002638  4669              MOV      r1,sp                 ;2336
00263a  4628              MOV      r0,r5                 ;2336
00263c  f7fffffe          BL       lc640_read_long_ptr
002640  f89d0000          LDRB     r0,[sp,#0]            ;2338
002644  2866              CMP      r0,#0x66              ;2338
002646  d103              BNE      |L1.9808|
002648  f89d0002          LDRB     r0,[sp,#2]            ;2338
00264c  285a              CMP      r0,#0x5a              ;2338
00264e  d00a              BEQ      |L1.9830|
                  |L1.9808|
002650  b114              CBZ      r4,|L1.9816|
002652  f1a40401          SUB      r4,r4,#1              ;2340
002656  e001              B        |L1.9820|
                  |L1.9816|
002658  f04f043f          MOV      r4,#0x3f              ;2341
                  |L1.9820|
00265c  42b4              CMP      r4,r6                 ;2342
00265e  d122              BNE      |L1.9894|
002660  f04f0500          MOV      r5,#0                 ;2344
002664  e024              B        |L1.9904|
                  |L1.9830|
002666  4669              MOV      r1,sp                 ;2351
002668  f1050010          ADD      r0,r5,#0x10           ;2351
00266c  f7fffffe          BL       lc640_read_long_ptr
002670  f89d0000          LDRB     r0,[sp,#0]            ;2352
002674  2841              CMP      r0,#0x41              ;2352
002676  d10b              BNE      |L1.9872|
002678  f89d0001          LDRB     r0,[sp,#1]            ;2352
00267c  2841              CMP      r0,#0x41              ;2352
00267e  d107              BNE      |L1.9872|
002680  f89d0002          LDRB     r0,[sp,#2]            ;2352
002684  2841              CMP      r0,#0x41              ;2352
002686  d103              BNE      |L1.9872|
002688  f89d0003          LDRB     r0,[sp,#3]            ;2352
00268c  2841              CMP      r0,#0x41              ;2352
00268e  d00a              BEQ      |L1.9894|
                  |L1.9872|
002690  b114              CBZ      r4,|L1.9880|
002692  f1a40401          SUB      r4,r4,#1              ;2354
002696  e001              B        |L1.9884|
                  |L1.9880|
002698  f04f043f          MOV      r4,#0x3f              ;2355
                  |L1.9884|
00269c  42b4              CMP      r4,r6                 ;2356
00269e  d102              BNE      |L1.9894|
0026a0  f04f0500          MOV      r5,#0                 ;2358
0026a4  e004              B        |L1.9904|
                  |L1.9894|
0026a6  f1070701          ADD      r7,r7,#1              ;2332
0026aa  b2ff              UXTB     r7,r7                 ;2332
0026ac  2f3f              CMP      r7,#0x3f              ;2332
0026ae  d3c1              BCC      |L1.9780|
                  |L1.9904|
0026b0  2d00              CMP      r5,#0                 ;2365
0026b2  d0bc              BEQ      |L1.9774|
0026b4  f8b8003c          LDRH     r0,[r8,#0x3c]         ;2367
0026b8  f88d0000          STRB     r0,[sp,#0]            ;2367
0026bc  f8980038          LDRB     r0,[r8,#0x38]         ;2368
0026c0  f88d0001          STRB     r0,[sp,#1]            ;2368
0026c4  f898002c          LDRB     r0,[r8,#0x2c]         ;2369
0026c8  f88d0002          STRB     r0,[sp,#2]            ;2369
0026cc  f88d9003          STRB     r9,[sp,#3]            ;2370
0026d0  4669              MOV      r1,sp                 ;2371
0026d2  f1050010          ADD      r0,r5,#0x10           ;2371
0026d6  f7fffffe          BL       lc640_write_long_ptr
0026da  f8980028          LDRB     r0,[r8,#0x28]         ;2373
0026de  f88d0000          STRB     r0,[sp,#0]            ;2373
0026e2  f8980024          LDRB     r0,[r8,#0x24]         ;2374
0026e6  f88d0001          STRB     r0,[sp,#1]            ;2374
0026ea  f8980020          LDRB     r0,[r8,#0x20]         ;2375
0026ee  f88d0002          STRB     r0,[sp,#2]            ;2375
0026f2  f88d9003          STRB     r9,[sp,#3]            ;2376
0026f6  4669              MOV      r1,sp                 ;2377
0026f8  f1050014          ADD      r0,r5,#0x14           ;2377
0026fc  f7fffffe          BL       lc640_write_long_ptr
002700  f04f0443          MOV      r4,#0x43              ;2379
002704  f88d4000          STRB     r4,[sp,#0]            ;2379
002708  f88d4001          STRB     r4,[sp,#1]            ;2380
00270c  f88d4002          STRB     r4,[sp,#2]            ;2381
002710  f88d4003          STRB     r4,[sp,#3]            ;2382
002714  4669              MOV      r1,sp                 ;2383
002716  f1050018          ADD      r0,r5,#0x18           ;2383
00271a  f7fffffe          BL       lc640_write_long_ptr
00271e  f88d4000          STRB     r4,[sp,#0]            ;2385
002722  f88d4001          STRB     r4,[sp,#1]            ;2386
002726  f88d4002          STRB     r4,[sp,#2]            ;2387
00272a  f88d4003          STRB     r4,[sp,#3]            ;2388
00272e  4669              MOV      r1,sp                 ;2389
002730  f105001c          ADD      r0,r5,#0x1c           ;2389
002734  f7fffffe          BL       lc640_write_long_ptr
                  |L1.10040|
002738  e411              B        |L1.8030|
                  |L1.10042|
00273a  f89d0002          LDRB     r0,[sp,#2]            ;2403
00273e  285a              CMP      r0,#0x5a              ;2403
002740  d00a              BEQ      |L1.10072|
                  |L1.10050|
002742  b114              CBZ      r4,|L1.10058|
002744  f1a40401          SUB      r4,r4,#1              ;2405
002748  e001              B        |L1.10062|
                  |L1.10058|
00274a  f04f043f          MOV      r4,#0x3f              ;2406
                  |L1.10062|
00274e  42b4              CMP      r4,r6                 ;2407
002750  d122              BNE      |L1.10136|
002752  f04f0500          MOV      r5,#0                 ;2409
002756  e025              B        |L1.10148|
                  |L1.10072|
002758  4669              MOV      r1,sp                 ;2416
00275a  f1050010          ADD      r0,r5,#0x10           ;2416
00275e  f7fffffe          BL       lc640_read_long_ptr
002762  f89d0000          LDRB     r0,[sp,#0]            ;2417
002766  2841              CMP      r0,#0x41              ;2417
002768  d10b              BNE      |L1.10114|
00276a  f89d0001          LDRB     r0,[sp,#1]            ;2417
00276e  2841              CMP      r0,#0x41              ;2417
002770  d107              BNE      |L1.10114|
002772  f89d0002          LDRB     r0,[sp,#2]            ;2417
002776  2841              CMP      r0,#0x41              ;2417
002778  d103              BNE      |L1.10114|
00277a  f89d0003          LDRB     r0,[sp,#3]            ;2417
00277e  2841              CMP      r0,#0x41              ;2417
002780  d00a              BEQ      |L1.10136|
                  |L1.10114|
002782  b114              CBZ      r4,|L1.10122|
002784  f1a40401          SUB      r4,r4,#1              ;2419
002788  e001              B        |L1.10126|
                  |L1.10122|
00278a  f04f043f          MOV      r4,#0x3f              ;2420
                  |L1.10126|
00278e  42b4              CMP      r4,r6                 ;2421
002790  d102              BNE      |L1.10136|
002792  f04f0500          MOV      r5,#0                 ;2423
002796  e005              B        |L1.10148|
                  |L1.10136|
002798  f1070701          ADD      r7,r7,#1              ;2397
00279c  b2ff              UXTB     r7,r7                 ;2397
00279e  2f3f              CMP      r7,#0x3f              ;2397
0027a0  f4ffaea3          BCC      |L1.9450|
                  |L1.10148|
0027a4  2d00              CMP      r5,#0                 ;2430
0027a6  d0c7              BEQ      |L1.10040|
0027a8  f8b8003c          LDRH     r0,[r8,#0x3c]         ;2432
0027ac  f88d0000          STRB     r0,[sp,#0]            ;2432
0027b0  f8980038          LDRB     r0,[r8,#0x38]         ;2433
0027b4  f88d0001          STRB     r0,[sp,#1]            ;2433
0027b8  f898002c          LDRB     r0,[r8,#0x2c]         ;2434
0027bc  f88d0002          STRB     r0,[sp,#2]            ;2434
0027c0  f88d9003          STRB     r9,[sp,#3]            ;2435
0027c4  4669              MOV      r1,sp                 ;2436
0027c6  f1050010          ADD      r0,r5,#0x10           ;2436
0027ca  f7fffffe          BL       lc640_write_long_ptr
0027ce  f8980028          LDRB     r0,[r8,#0x28]         ;2438
0027d2  f88d0000          STRB     r0,[sp,#0]            ;2438
0027d6  f8980024          LDRB     r0,[r8,#0x24]         ;2439
0027da  f88d0001          STRB     r0,[sp,#1]            ;2439
0027de  f8980020          LDRB     r0,[r8,#0x20]         ;2440
0027e2  f88d0002          STRB     r0,[sp,#2]            ;2440
0027e6  f88d9003          STRB     r9,[sp,#3]            ;2441
0027ea  4669              MOV      r1,sp                 ;2442
0027ec  f1050014          ADD      r0,r5,#0x14           ;2442
0027f0  f7fffffe          BL       lc640_write_long_ptr
0027f4  f04f0442          MOV      r4,#0x42              ;2444
0027f8  f88d4000          STRB     r4,[sp,#0]            ;2444
0027fc  f88d4001          STRB     r4,[sp,#1]            ;2445
002800  f88d4002          STRB     r4,[sp,#2]            ;2446
002804  f88d4003          STRB     r4,[sp,#3]            ;2447
002808  4669              MOV      r1,sp                 ;2448
00280a  f1050018          ADD      r0,r5,#0x18           ;2448
00280e  f7fffffe          BL       lc640_write_long_ptr
002812  f88d4000          STRB     r4,[sp,#0]            ;2450
002816  f88d4001          STRB     r4,[sp,#1]            ;2451
00281a  f88d4002          STRB     r4,[sp,#2]            ;2452
00281e  f88d4003          STRB     r4,[sp,#3]            ;2453
002822  4669              MOV      r1,sp                 ;2454
002824  f105001c          ADD      r0,r5,#0x1c           ;2454
002828  f7fffffe          BL       lc640_write_long_ptr
00282c  e41c              B        |L1.8296|
                          ENDP

00282e  0000              DCW      0x0000
                  |L1.10288|
                          DCD      0x40024000

                          AREA ||area_number.2||, CODE, READONLY, ALIGN=2

                          EXPORTAS ||area_number.2||, ||.text||
                  ke_mem_hndl PROC
;;;78     //-----------------------------------------------
;;;79     void avar_hndl(void)
000000  b5f3              PUSH     {r0,r1,r4-r7,lr}
;;;80     {
;;;81     //static unsigned avar_stat_old;
;;;82     char i;
;;;83     //unsigned avar_stat_new,avar_stat_offed;
;;;84     
;;;85     if(net_av)		SET_REG(avar_stat,1,0,1);
000002  b083              SUB      sp,sp,#0xc
000004  4605              MOV      r5,r0
000006  eb050045          ADD      r0,r5,r5,LSL #1
00000a  4948              LDR      r1,|L2.300|
00000c  eb001005          ADD      r0,r0,r5,LSL #4
000010  eb010180          ADD      r1,r1,r0,LSL #2
;;;86     else	   			SET_REG(avar_stat,0,0,1);
000014  4846              LDR      r0,|L2.304|
000016  f9b00000          LDRSH    r0,[r0,#0]  ; bat_u_old_cnt
;;;87     #ifndef UKU_220_IPS_TERMOKOMPENSAT //o_10
;;;88     for(i=0;i<2;i++)
;;;89     	{
;;;90     	if(bat[i]._av&3)	SET_REG(avar_stat,1,1+i,1);
;;;91     	else	   			SET_REG(avar_stat,0,1+i,1);
;;;92     	}
;;;93     #endif //o_10
;;;94     for(i=0;i<18;i++)
00001a  f1000001          ADD      r0,r0,#1
;;;95     	{
;;;96     	if(bps[i]._av&0xef)	SET_REG(avar_stat,1,3+i,1);
00001e  eb010040          ADD      r0,r1,r0,LSL #1
000022  f9b00020          LDRSH    r0,[r0,#0x20]
000026  9001              STR      r0,[sp,#4]
000028  f44f6660          MOV      r6,#0xe00
00002c  4630              MOV      r0,r6
00002e  f7fffffe          BL       lc640_read_int
000032  f1000001          ADD      r0,r0,#1
000036  4604              MOV      r4,r0
000038  2c3f              CMP      r4,#0x3f
00003a  d901              BLS      |L2.64|
00003c  f04f0400          MOV      r4,#0
                  |L2.64|
000040  b221              SXTH     r1,r4
000042  4630              MOV      r0,r6
000044  f7fffffe          BL       lc640_write_int
000048  f6406702          MOV      r7,#0xe02
00004c  4638              MOV      r0,r7
;;;97     	else	   		SET_REG(avar_stat,0,3+i,1);
00004e  f7fffffe          BL       lc640_read_int
000052  283f              CMP      r0,#0x3f
000054  d000              BEQ      |L2.88|
000056  4620              MOV      r0,r4
                  |L2.88|
000058  b201              SXTH     r1,r0
00005a  4638              MOV      r0,r7
00005c  f7fffffe          BL       lc640_write_int
000060  4630              MOV      r0,r6                 ;94
000062  f7fffffe          BL       lc640_read_int
000066  f44f6180          MOV      r1,#0x400             ;94
;;;98     	}
;;;99     
;;;100    /*for(i=0;i<6;i++)
;;;101    	{
;;;102    	if(av_inv[i])	SET_REG(avar_stat,1,15+i,1);
;;;103    	else	   		SET_REG(avar_stat,0,15+i,1);
;;;104    	}*/
;;;105    
;;;106    /*for(i=0;i<4;i++)
;;;107    	{
;;;108    	if(av_dt[i])	SET_REG(avar_stat,1,21+i,1);
;;;109    	else	   		SET_REG(avar_stat,0,21+i,1);
;;;110    	}  */
;;;111    for(i=0;i<4;i++)
00006a  eb011440          ADD      r4,r1,r0,LSL #5
;;;112    	{
;;;113    	if(sk_av_stat[i]==sasON)	SET_REG(avar_stat,1,24+i,1);
00006e  f04f0042          MOV      r0,#0x42
000072  f88d0008          STRB     r0,[sp,#8]
;;;114    	else	   		SET_REG(avar_stat,0,24+i,1);
000076  f88d5009          STRB     r5,[sp,#9]
00007a  f04f004b          MOV      r0,#0x4b
00007e  f88d000a          STRB     r0,[sp,#0xa]
000082  f04f0600          MOV      r6,#0
000086  f88d600b          STRB     r6,[sp,#0xb]          ;111
00008a  a902              ADD      r1,sp,#8              ;111
00008c  4620              MOV      r0,r4                 ;111
;;;115    	}
;;;116    
;;;117    //if(uout_av)			SET_REG(avar_stat,1,28,1);
;;;118    //else	   			SET_REG(avar_stat,0,28,1);
;;;119    
;;;120    
;;;121    avar_stat_new=(avar_stat^avar_stat_old)&avar_stat;
00008e  f7fffffe          BL       lc640_write_long_ptr
000092  f89d0010          LDRB     r0,[sp,#0x10]
000096  f88d0008          STRB     r0,[sp,#8]
;;;122    
;;;123    avar_ind_stat|=avar_stat_new;
00009a  f89d0011          LDRB     r0,[sp,#0x11]
00009e  f88d0009          STRB     r0,[sp,#9]
;;;124    
;;;125    if((SK_ZVUK_EN[0])) avar_ind_stat&=(~(1UL<<24));
0000a2  f89d0004          LDRB     r0,[sp,#4]
0000a6  f88d000a          STRB     r0,[sp,#0xa]
0000aa  f89d0005          LDRB     r0,[sp,#5]
;;;126    if((SK_ZVUK_EN[1])) avar_ind_stat&=(~(1UL<<25));
0000ae  f88d000b          STRB     r0,[sp,#0xb]
0000b2  a902              ADD      r1,sp,#8
0000b4  1d20              ADDS     r0,r4,#4
0000b6  f7fffffe          BL       lc640_write_long_ptr
;;;127    if((SK_ZVUK_EN[2])) avar_ind_stat&=(~(1UL<<26));
0000ba  f24020a2          MOV      r0,#0x2a2
0000be  f7fffffe          BL       lc640_read_long
0000c2  4d1c              LDR      r5,|L2.308|
;;;128    if((SK_ZVUK_EN[3])) avar_ind_stat&=(~(1UL<<27));	
0000c4  6028              STR      r0,[r5,#0]  ; ke_date
0000c6  4629              MOV      r1,r5
0000c8  f1040008          ADD      r0,r4,#8
0000cc  f7fffffe          BL       lc640_write_long_ptr
;;;129    
;;;130    
;;;131    avar_stat_offed=~((avar_stat^avar_stat_old)&avar_stat_old);
0000d0  f24020a6          MOV      r0,#0x2a6
0000d4  f7fffffe          BL       lc640_read_long
0000d8  6068              STR      r0,[r5,#4]  ; ke_date
;;;132    
;;;133    if(!AV_OFF_AVT)avar_stat_offed|=0xeffffffe;
0000da  1d29              ADDS     r1,r5,#4
0000dc  f104000c          ADD      r0,r4,#0xc
0000e0  f7fffffe          BL       lc640_write_long_ptr
0000e4  4d14              LDR      r5,|L2.312|
0000e6  8ba8              LDRH     r0,[r5,#0x1c]         ;113
0000e8  f88d0008          STRB     r0,[sp,#8]            ;113
0000ec  7e28              LDRB     r0,[r5,#0x18]         ;113
0000ee  f88d0009          STRB     r0,[sp,#9]            ;113
0000f2  7b28              LDRB     r0,[r5,#0xc]          ;113
0000f4  f88d000a          STRB     r0,[sp,#0xa]          ;113
0000f8  f88d600b          STRB     r6,[sp,#0xb]
0000fc  a902              ADD      r1,sp,#8
0000fe  f1040010          ADD      r0,r4,#0x10
;;;134    
;;;135    avar_ind_stat&=avar_stat_offed; 
000102  f7fffffe          BL       lc640_write_long_ptr
000106  7a28              LDRB     r0,[r5,#8]
000108  f88d0008          STRB     r0,[sp,#8]
;;;136    
;;;137    avar_stat_old=avar_stat;
;;;138    
;;;139    //oleg_start
;;;140    
;;;141    
;;;142    
;;;143    rki_avar1_stat=(sk_alarm<<8)|(status_izm_r&0x3F);
00010c  7928              LDRB     r0,[r5,#4]
00010e  f88d0009          STRB     r0,[sp,#9]
000112  7828              LDRB     r0,[r5,#0]
000114  f88d000a          STRB     r0,[sp,#0xa]
000118  f88d600b          STRB     r6,[sp,#0xb]
00011c  a902              ADD      r1,sp,#8
;;;144    rki_avar1_stat_new=(rki_avar1_stat^rki_avar1_stat_old)&rki_avar1_stat;
00011e  f1040014          ADD      r0,r4,#0x14
000122  f7fffffe          BL       lc640_write_long_ptr
;;;145    rki_avar1_ind_stat|=rki_avar1_stat_new;
000126  b005              ADD      sp,sp,#0x14
000128  bdf0              POP      {r4-r7,pc}
;;;146    rki_avar1_stat_offed=~((rki_avar1_stat^rki_avar1_stat_old)&rki_avar1_stat_old);
;;;147    rki_avar1_ind_stat&=rki_avar1_stat_offed;
;;;148    rki_avar1_stat_old=rki_avar1_stat;
;;;149    /*
;;;150    rki_avarI1_stat=status_di1;
;;;151    rki_avarI1_stat_new=(rki_avarI1_stat^rki_avarI1_stat_old)&rki_avarI1_stat;
;;;152    rki_avarI1_ind_stat|=rki_avarI1_stat_new;
;;;153    rki_avarI1_stat_offed=~((rki_avarI1_stat^rki_avarI1_stat_old)&rki_avarI1_stat_old);
;;;154    rki_avarI1_ind_stat&=rki_avarI1_stat_offed;
;;;155    rki_avarI1_stat_old=rki_avarI1_stat;
;;;156    
;;;157    rki_avarI2_stat=status_di2;
;;;158    rki_avarI2_stat_new=(rki_avarI2_stat^rki_avarI2_stat_old)&rki_avarI2_stat;
;;;159    rki_avarI2_ind_stat|=rki_avarI2_stat_new;
;;;160    rki_avarI2_stat_offed=~((rki_avarI2_stat^rki_avarI2_stat_old)&rki_avarI2_stat_old);
;;;161    rki_avarI2_ind_stat&=rki_avarI2_stat_offed;
;;;162    rki_avarI2_stat_old=rki_avarI2_stat;
;;;163    */
;;;164    //oleg_end
;;;165    }
;;;166    
                          ENDP

00012a  0000              DCW      0x0000
                  |L2.300|
                          DCD      bat
                  |L2.304|
                          DCD      bat_u_old_cnt
                  |L2.308|
                          DCD      ke_date
                  |L2.312|
                          DCD      0x40024020

                          AREA ||.data||, DATA, ALIGN=2

                  avar_stat
                          DCD      0x00000000
                  avar_ind_stat
                          DCD      0x00000000
                  avar_stat_old
                          DCD      0x00000000
                  avar_stat_new
                          DCD      0x00000000
                  avar_stat_offed
                          DCD      0x00000000
                  rki_avar1_stat
                          DCD      0x00000000
                  rki_avar1_ind_stat
                          DCD      0x00000000
                  rki_avar1_stat_old
                          DCD      0x00000000
                  rki_avar1_stat_new
                          DCD      0x00000000
                  rki_avar1_stat_offed
                          DCD      0x00000000

                          AREA ||area_number.6||, DATA, ALIGN=0

                          EXPORTAS ||area_number.6||, ||.data||
                  av_inv
                          DCDU     0x00000000
000004  0000              DCB      0x00,0x00

;*** Start embedded assembler ***

#line 1 "avar_hndl.c"
	AREA ||.emb_text||, CODE, READONLY
	THUMB
	EXPORT |__asm___11_avar_hndl_c_ef0810c9____REV16|
#line 112 "C:\\Keil\\ARM\\CMSIS\\Include\\core_cmInstr.h"
|__asm___11_avar_hndl_c_ef0810c9____REV16| PROC
#line 113

 rev16 r0, r0
 bx lr
	ENDP
	AREA ||.emb_text||, CODE, READONLY
	THUMB
	EXPORT |__asm___11_avar_hndl_c_ef0810c9____REVSH|
#line 130
|__asm___11_avar_hndl_c_ef0810c9____REVSH| PROC
#line 131

 revsh r0, r0
 bx lr
	ENDP

;*** End   embedded assembler ***
