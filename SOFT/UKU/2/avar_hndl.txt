; generated by ARM C/C++ Compiler, 4.1 [Build 644]
; commandline ArmCC [--list --debug -c --asm --interleave -o.\EXE\avar_hndl.o --asm_dir=.\ --list_dir=.\ --depend=.\EXE\avar_hndl.d --feedback=.\EXE\UKU_220_IPS_TERMOKOMPENSAT.fed --cpu=Cortex-M3 --apcs=interwork -O1 -IC:\Keil\ARM\CMSIS\Include -IC:\Keil\ARM\INC\NXP\LPC17xx -D__MICROLIB -DUKU_220_IPS_TERMOKOMPENSAT -DUKU2071x --omf_browse=.\EXE\avar_hndl.crf avar_hndl.c]
                          THUMB

                          AREA ||.text||, CODE, READONLY, ALIGN=2

                  avar_hndl PROC
;;;56     //-----------------------------------------------
;;;57     void avar_hndl(void)
000000  b530              PUSH     {r4,r5,lr}
;;;58     {
;;;59     //static unsigned avar_stat_old;
;;;60     char i;
;;;61     //unsigned avar_stat_new,avar_stat_offed;
;;;62     
;;;63     if(net_av)		SET_REG(avar_stat,1,0,1);
000002  48ff              LDR      r0,|L1.1024|
000004  4bff              LDR      r3,|L1.1028|
000006  7801              LDRB     r1,[r0,#0]  ; net_av
000008  6818              LDR      r0,[r3,#0]
00000a  b119              CBZ      r1,|L1.20|
00000c  f0400001          ORR      r0,r0,#1
000010  6018              STR      r0,[r3,#0]  ; avar_stat
000012  e002              B        |L1.26|
                  |L1.20|
;;;64     else	   			SET_REG(avar_stat,0,0,1);
000014  f0200001          BIC      r0,r0,#1
000018  6018              STR      r0,[r3,#0]  ; avar_stat
                  |L1.26|
;;;65     
;;;66     for(i=0;i<2;i++)
00001a  f04f0000          MOV      r0,#0
;;;67     	{
;;;68     	if(bat[i]._av&1)	SET_REG(avar_stat,1,1+i,1);
00001e  4dfa              LDR      r5,|L1.1032|
000020  f04f0401          MOV      r4,#1
                  |L1.36|
000024  eb000140          ADD      r1,r0,r0,LSL #1
000028  eb011100          ADD      r1,r1,r0,LSL #4
00002c  eb050181          ADD      r1,r5,r1,LSL #2
000030  f891103d          LDRB     r1,[r1,#0x3d]
000034  07c9              LSLS     r1,r1,#31
000036  d00a              BEQ      |L1.78|
000038  f1000201          ADD      r2,r0,#1
00003c  fa04f102          LSL      r1,r4,r2
000040  681a              LDR      r2,[r3,#0]  ; avar_stat
000042  ea220201          BIC      r2,r2,r1
000046  ea420201          ORR      r2,r2,r1
00004a  601a              STR      r2,[r3,#0]  ; avar_stat
00004c  e007              B        |L1.94|
                  |L1.78|
;;;69     	else	   		SET_REG(avar_stat,0,1+i,1);
00004e  f1000101          ADD      r1,r0,#1
000052  681a              LDR      r2,[r3,#0]  ; avar_stat
000054  fa04f101          LSL      r1,r4,r1
000058  ea220201          BIC      r2,r2,r1
00005c  601a              STR      r2,[r3,#0]  ; avar_stat
                  |L1.94|
00005e  f1000001          ADD      r0,r0,#1              ;66
000062  b2c0              UXTB     r0,r0                 ;66
000064  2802              CMP      r0,#2                 ;66
000066  d3dd              BCC      |L1.36|
;;;70     	}
;;;71     
;;;72     for(i=0;i<12;i++)
000068  f04f0000          MOV      r0,#0
;;;73     	{
;;;74     	if(bps[i]._av)	SET_REG(avar_stat,1,3+i,1);
00006c  4de7              LDR      r5,|L1.1036|
                  |L1.110|
00006e  ebc002c0          RSB      r2,r0,r0,LSL #3
000072  eb020142          ADD      r1,r2,r2,LSL #1
000076  eb050181          ADD      r1,r5,r1,LSL #2
00007a  7849              LDRB     r1,[r1,#1]
00007c  b151              CBZ      r1,|L1.148|
00007e  f1000103          ADD      r1,r0,#3
000082  fa04f201          LSL      r2,r4,r1
000086  6819              LDR      r1,[r3,#0]  ; avar_stat
000088  ea210102          BIC      r1,r1,r2
00008c  ea410102          ORR      r1,r1,r2
000090  6019              STR      r1,[r3,#0]  ; avar_stat
000092  e007              B        |L1.164|
                  |L1.148|
;;;75     	else	   		SET_REG(avar_stat,0,3+i,1);
000094  f1000103          ADD      r1,r0,#3
000098  fa04f201          LSL      r2,r4,r1
00009c  6819              LDR      r1,[r3,#0]  ; avar_stat
00009e  ea210102          BIC      r1,r1,r2
0000a2  6019              STR      r1,[r3,#0]  ; avar_stat
                  |L1.164|
0000a4  f1000001          ADD      r0,r0,#1              ;72
0000a8  b2c0              UXTB     r0,r0                 ;72
0000aa  280c              CMP      r0,#0xc               ;72
0000ac  d3df              BCC      |L1.110|
;;;76     	}
;;;77     
;;;78     for(i=0;i<6;i++)
0000ae  f04f0000          MOV      r0,#0
;;;79     	{
;;;80     	if(av_inv[i])	SET_REG(avar_stat,1,15+i,1);
0000b2  4dd4              LDR      r5,|L1.1028|
0000b4  f1050514          ADD      r5,r5,#0x14
                  |L1.184|
0000b8  5c29              LDRB     r1,[r5,r0]
0000ba  b151              CBZ      r1,|L1.210|
0000bc  f100010f          ADD      r1,r0,#0xf
0000c0  fa04f201          LSL      r2,r4,r1
0000c4  6819              LDR      r1,[r3,#0]  ; avar_stat
0000c6  ea210102          BIC      r1,r1,r2
0000ca  ea410102          ORR      r1,r1,r2
0000ce  6019              STR      r1,[r3,#0]  ; avar_stat
0000d0  e007              B        |L1.226|
                  |L1.210|
;;;81     	else	   		SET_REG(avar_stat,0,15+i,1);
0000d2  f100010f          ADD      r1,r0,#0xf
0000d6  fa04f201          LSL      r2,r4,r1
0000da  6819              LDR      r1,[r3,#0]  ; avar_stat
0000dc  ea210102          BIC      r1,r1,r2
0000e0  6019              STR      r1,[r3,#0]  ; avar_stat
                  |L1.226|
0000e2  f1000001          ADD      r0,r0,#1              ;78
0000e6  b2c0              UXTB     r0,r0                 ;78
0000e8  2806              CMP      r0,#6                 ;78
0000ea  d3e5              BCC      |L1.184|
;;;82     	}
;;;83     
;;;84     /*for(i=0;i<4;i++)
;;;85     	{
;;;86     	if(av_dt[i])	SET_REG(avar_stat,1,21+i,1);
;;;87     	else	   		SET_REG(avar_stat,0,21+i,1);
;;;88     	}  */
;;;89     for(i=0;i<4;i++)
0000ec  f04f0000          MOV      r0,#0
;;;90     	{
;;;91     	if(sk_av_stat[i]==sasON)	SET_REG(avar_stat,1,25+i,1);
0000f0  4dc7              LDR      r5,|L1.1040|
                  |L1.242|
0000f2  5c29              LDRB     r1,[r5,r0]
0000f4  2901              CMP      r1,#1
0000f6  d036              BEQ      |L1.358|
;;;92     	else	   		SET_REG(avar_stat,0,25+i,1);
0000f8  f1000119          ADD      r1,r0,#0x19
0000fc  fa04f201          LSL      r2,r4,r1
000100  6819              LDR      r1,[r3,#0]  ; avar_stat
000102  ea210102          BIC      r1,r1,r2
000106  6019              STR      r1,[r3,#0]  ; avar_stat
                  |L1.264|
000108  f1000001          ADD      r0,r0,#1              ;89
00010c  b2c0              UXTB     r0,r0                 ;89
00010e  2804              CMP      r0,#4                 ;89
000110  d3ef              BCC      |L1.242|
;;;93     	}
;;;94     
;;;95     avar_stat_new=(avar_stat^avar_stat_old)&avar_stat;
000112  689c              LDR      r4,[r3,#8]  ; avar_stat_old
000114  6818              LDR      r0,[r3,#0]  ; avar_stat
000116  ea200104          BIC      r1,r0,r4
00011a  60d9              STR      r1,[r3,#0xc]  ; avar_stat_new
;;;96     
;;;97     avar_ind_stat|=avar_stat_new;
00011c  685a              LDR      r2,[r3,#4]  ; avar_ind_stat
00011e  ea420201          ORR      r2,r2,r1
000122  605a              STR      r2,[r3,#4]  ; avar_ind_stat
;;;98     
;;;99     if((SK_ZVUK_EN[0])) avar_ind_stat&=(~(1UL<<25));
000124  49bb              LDR      r1,|L1.1044|
000126  880d              LDRH     r5,[r1,#0]  ; SK_ZVUK_EN
000128  b115              CBZ      r5,|L1.304|
00012a  f0227200          BIC      r2,r2,#0x2000000
00012e  605a              STR      r2,[r3,#4]  ; avar_ind_stat
                  |L1.304|
;;;100    if((SK_ZVUK_EN[1])) avar_ind_stat&=(~(1UL<<26));
000130  884a              LDRH     r2,[r1,#2]  ; SK_ZVUK_EN
000132  b11a              CBZ      r2,|L1.316|
000134  685a              LDR      r2,[r3,#4]  ; avar_ind_stat
000136  f0226280          BIC      r2,r2,#0x4000000
00013a  605a              STR      r2,[r3,#4]  ; avar_ind_stat
                  |L1.316|
;;;101    if((SK_ZVUK_EN[2])) avar_ind_stat&=(~(1UL<<27));
00013c  888a              LDRH     r2,[r1,#4]  ; SK_ZVUK_EN
00013e  b11a              CBZ      r2,|L1.328|
000140  685a              LDR      r2,[r3,#4]  ; avar_ind_stat
000142  f0226200          BIC      r2,r2,#0x8000000
000146  605a              STR      r2,[r3,#4]  ; avar_ind_stat
                  |L1.328|
;;;102    if((SK_ZVUK_EN[3])) avar_ind_stat&=(~(1UL<<28));	
000148  88c9              LDRH     r1,[r1,#6]  ; SK_ZVUK_EN
00014a  b119              CBZ      r1,|L1.340|
00014c  6859              LDR      r1,[r3,#4]  ; avar_ind_stat
00014e  f0215180          BIC      r1,r1,#0x10000000
000152  6059              STR      r1,[r3,#4]  ; avar_ind_stat
                  |L1.340|
;;;103    
;;;104    
;;;105    avar_stat_offed=~((avar_stat^avar_stat_old)&avar_stat_old);
000154  ea240400          BIC      r4,r4,r0
000158  ea6f0104          MVN      r1,r4
00015c  6119              STR      r1,[r3,#0x10]  ; avar_stat_offed
;;;106    
;;;107    if(!AV_OFF_AVT)avar_stat_offed|=0xfffffffe;
00015e  4aae              LDR      r2,|L1.1048|
000160  8812              LDRH     r2,[r2,#0]  ; AV_OFF_AVT
000162  b15a              CBZ      r2,|L1.380|
000164  e00d              B        |L1.386|
                  |L1.358|
000166  f1000119          ADD      r1,r0,#0x19           ;91
00016a  fa04f201          LSL      r2,r4,r1              ;91
00016e  6819              LDR      r1,[r3,#0]            ;91  ; avar_stat
000170  ea210102          BIC      r1,r1,r2              ;91
000174  ea410102          ORR      r1,r1,r2              ;91
000178  6019              STR      r1,[r3,#0]            ;91  ; avar_stat
00017a  e7c5              B        |L1.264|
                  |L1.380|
00017c  f0610101          ORN      r1,r1,#1
000180  6119              STR      r1,[r3,#0x10]  ; avar_stat_offed
                  |L1.386|
;;;108    
;;;109    avar_ind_stat&=avar_stat_offed; 
000182  691a              LDR      r2,[r3,#0x10]  ; avar_stat_offed
000184  6859              LDR      r1,[r3,#4]  ; avar_ind_stat
000186  ea010102          AND      r1,r1,r2
00018a  6059              STR      r1,[r3,#4]  ; avar_ind_stat
;;;110    
;;;111    avar_stat_old=avar_stat;
00018c  6098              STR      r0,[r3,#8]  ; avar_stat_old
;;;112    }
00018e  bd30              POP      {r4,r5,pc}
;;;113    
                          ENDP

                  reload_hndl PROC
;;;114    //-----------------------------------------------
;;;115    void reload_hndl(void)
000190  b5f8              PUSH     {r3-r7,lr}
;;;116    {
;;;117    char data[4];
;;;118    unsigned int event_ptr,lc640_adr/*,event_ptr_find*/,event_cnt;
;;;119    
;;;120    event_ptr=lc640_read_int(PTR_EVENT_LOG);
000192  f44f6560          MOV      r5,#0xe00
000196  4628              MOV      r0,r5
000198  f7fffffe          BL       lc640_read_int
;;;121    event_ptr++;	
00019c  f1000001          ADD      r0,r0,#1
0001a0  4604              MOV      r4,r0
;;;122    if(event_ptr>63)event_ptr=0;	
0001a2  2c3f              CMP      r4,#0x3f
0001a4  d901              BLS      |L1.426|
0001a6  f04f0400          MOV      r4,#0
                  |L1.426|
;;;123    lc640_write_int(PTR_EVENT_LOG,event_ptr);	
0001aa  b221              SXTH     r1,r4
0001ac  4628              MOV      r0,r5
0001ae  f7fffffe          BL       lc640_write_int
;;;124    	
;;;125    event_cnt=lc640_read_int(CNT_EVENT_LOG);
0001b2  f6406602          MOV      r6,#0xe02
0001b6  4630              MOV      r0,r6
0001b8  f7fffffe          BL       lc640_read_int
;;;126    if(event_cnt!=63)event_cnt=event_ptr;
0001bc  283f              CMP      r0,#0x3f
0001be  d000              BEQ      |L1.450|
0001c0  4620              MOV      r0,r4
                  |L1.450|
;;;127    lc640_write_int(CNT_EVENT_LOG,event_cnt); 
0001c2  b201              SXTH     r1,r0
0001c4  4630              MOV      r0,r6
0001c6  f7fffffe          BL       lc640_write_int
;;;128    	
;;;129    lc640_adr=EVENT_LOG+(lc640_read_int(PTR_EVENT_LOG)*32);
0001ca  4628              MOV      r0,r5
0001cc  f7fffffe          BL       lc640_read_int
0001d0  f44f6180          MOV      r1,#0x400
0001d4  eb011440          ADD      r4,r1,r0,LSL #5
;;;130    	
;;;131    data[0]='U';
0001d8  f04f0055          MOV      r0,#0x55
0001dc  f88d0000          STRB     r0,[sp,#0]
;;;132    data[1]=0;
0001e0  f04f0600          MOV      r6,#0
0001e4  f88d6001          STRB     r6,[sp,#1]
;;;133    data[2]='R';
0001e8  f04f0052          MOV      r0,#0x52
0001ec  f88d0002          STRB     r0,[sp,#2]
;;;134    data[3]=0;
0001f0  f88d6003          STRB     r6,[sp,#3]
;;;135    lc640_write_long_ptr(lc640_adr,data);
0001f4  4669              MOV      r1,sp
0001f6  4620              MOV      r0,r4
0001f8  f7fffffe          BL       lc640_write_long_ptr
;;;136    
;;;137    data[0]=0;
;;;138    data[1]=0;
;;;139    data[2]=0;
;;;140    data[3]=0;
0001fc  9600              STR      r6,[sp,#0]
;;;141    lc640_write_long_ptr(lc640_adr+4,data);
0001fe  4669              MOV      r1,sp
000200  1d20              ADDS     r0,r4,#4
000202  f7fffffe          BL       lc640_write_long_ptr
;;;142    
;;;143    data[0]=LPC_RTC->YEAR;
000206  4d85              LDR      r5,|L1.1052|
000208  8ba8              LDRH     r0,[r5,#0x1c]
00020a  f88d0000          STRB     r0,[sp,#0]
;;;144    data[1]=LPC_RTC->MONTH;
00020e  7e28              LDRB     r0,[r5,#0x18]
000210  f88d0001          STRB     r0,[sp,#1]
;;;145    data[2]=LPC_RTC->DOM;
000214  7b28              LDRB     r0,[r5,#0xc]
000216  f88d0002          STRB     r0,[sp,#2]
;;;146    data[3]=0;
00021a  f88d6003          STRB     r6,[sp,#3]
;;;147    lc640_write_long_ptr(lc640_adr+8,data);
00021e  4669              MOV      r1,sp
000220  f1040008          ADD      r0,r4,#8
000224  f7fffffe          BL       lc640_write_long_ptr
;;;148    
;;;149    data[0]=LPC_RTC->HOUR;
000228  7a28              LDRB     r0,[r5,#8]
00022a  f88d0000          STRB     r0,[sp,#0]
;;;150    data[1]=LPC_RTC->MIN;
00022e  7928              LDRB     r0,[r5,#4]
000230  f88d0001          STRB     r0,[sp,#1]
;;;151    data[2]=LPC_RTC->SEC;
000234  7828              LDRB     r0,[r5,#0]
000236  f88d0002          STRB     r0,[sp,#2]
;;;152    data[3]=LPC_SC->RSID;
00023a  4879              LDR      r0,|L1.1056|
00023c  f8d00180          LDR      r0,[r0,#0x180]
000240  f88d0003          STRB     r0,[sp,#3]
;;;153    
;;;154    lc640_write_long_ptr(lc640_adr+12,data);
000244  4669              MOV      r1,sp
000246  f104000c          ADD      r0,r4,#0xc
00024a  f7fffffe          BL       lc640_write_long_ptr
;;;155    	
;;;156    data[0]='A';
00024e  f04f0541          MOV      r5,#0x41
000252  f88d5000          STRB     r5,[sp,#0]
;;;157    data[1]='A';
000256  f88d5001          STRB     r5,[sp,#1]
;;;158    data[2]='A';
00025a  f88d5002          STRB     r5,[sp,#2]
;;;159    data[3]='A';
00025e  f88d5003          STRB     r5,[sp,#3]
;;;160    lc640_write_long_ptr(lc640_adr+16,data);
000262  4669              MOV      r1,sp
000264  f1040010          ADD      r0,r4,#0x10
000268  f7fffffe          BL       lc640_write_long_ptr
;;;161    	
;;;162    data[0]='A';
00026c  f88d5000          STRB     r5,[sp,#0]
;;;163    data[1]='A';
000270  f88d5001          STRB     r5,[sp,#1]
;;;164    data[2]='A';
000274  f88d5002          STRB     r5,[sp,#2]
;;;165    data[3]='A';
000278  f88d5003          STRB     r5,[sp,#3]
;;;166    lc640_write_long_ptr(lc640_adr+20,data);
00027c  4669              MOV      r1,sp
00027e  f1040014          ADD      r0,r4,#0x14
000282  f7fffffe          BL       lc640_write_long_ptr
;;;167    	
;;;168    data[0]='A';
000286  f88d5000          STRB     r5,[sp,#0]
;;;169    data[1]='A';
00028a  f88d5001          STRB     r5,[sp,#1]
;;;170    data[2]='A';
00028e  f88d5002          STRB     r5,[sp,#2]
;;;171    data[3]='A';
000292  f88d5003          STRB     r5,[sp,#3]
;;;172    lc640_write_long_ptr(lc640_adr+24,data);
000296  4669              MOV      r1,sp
000298  f1040018          ADD      r0,r4,#0x18
00029c  f7fffffe          BL       lc640_write_long_ptr
;;;173    	
;;;174    data[0]='A';
0002a0  f88d5000          STRB     r5,[sp,#0]
;;;175    data[1]='A';
0002a4  f88d5001          STRB     r5,[sp,#1]
;;;176    data[2]='A';
0002a8  f88d5002          STRB     r5,[sp,#2]
;;;177    data[3]='A';
0002ac  f88d5003          STRB     r5,[sp,#3]
;;;178    lc640_write_long_ptr(lc640_adr+28,data);				
0002b0  4669              MOV      r1,sp
0002b2  f104001c          ADD      r0,r4,#0x1c
0002b6  f7fffffe          BL       lc640_write_long_ptr
;;;179    	
;;;180    	
;;;181    }
0002ba  bdf8              POP      {r3-r7,pc}
;;;182    
                          ENDP

                  avar_unet_hndl PROC
;;;183    //-----------------------------------------------
;;;184    void avar_unet_hndl(char in)
0002bc  e92d43f8          PUSH     {r3-r9,lr}
;;;185    {
;;;186    
;;;187    char data[4];
;;;188    unsigned int event_ptr,lc640_adr,event_ptr_find,event_cnt;
;;;189    
;;;190    
;;;191    if(in==1)
;;;192    	{
;;;193    	net_av=1;
;;;194    
;;;195    	//beep_init(0x01L,'O');
;;;196    	//a.av.bAN=1;
;;;197    
;;;198    
;;;199    	//beep_init(0x33333333,'A');
;;;200    	 
;;;201    	event_ptr=lc640_read_int(PTR_EVENT_LOG);
;;;202    	event_ptr++;	
;;;203    	if(event_ptr>63)event_ptr=0;	
;;;204    	lc640_write_int(PTR_EVENT_LOG,event_ptr);	
;;;205    	
;;;206         event_cnt=lc640_read_int(CNT_EVENT_LOG);
;;;207    	if(event_cnt!=63)event_cnt=event_ptr;
;;;208    	lc640_write_int(CNT_EVENT_LOG,event_cnt); 
;;;209    	
;;;210    	lc640_adr=EVENT_LOG+(lc640_read_int(PTR_EVENT_LOG)*32);
;;;211    	
;;;212    	data[0]='P';
;;;213    	data[1]=0;
;;;214    	data[2]='A';
;;;215    	data[3]=0;
;;;216    	lc640_write_long_ptr(lc640_adr,data);
;;;217    
;;;218    	data[0]=0;//*((char*)&Unet_store);
;;;219    	data[1]=0;//*(((char*)&Unet_store)+1);
;;;220    	data[2]=0;
;;;221    	data[3]=0;
;;;222    	lc640_write_long_ptr(lc640_adr+4,data);
;;;223    
;;;224    	data[0]=LPC_RTC->YEAR;
0002c0  4f56              LDR      r7,|L1.1052|
0002c2  494f              LDR      r1,|L1.1024|
0002c4  3f20              SUBS     r7,r7,#0x20
0002c6  f44f6560          MOV      r5,#0xe00             ;201
0002ca  f04f0800          MOV      r8,#0                 ;203
0002ce  f44f6980          MOV      r9,#0x400             ;210
0002d2  2801              CMP      r0,#1                 ;191
0002d4  d002              BEQ      |L1.732|
;;;225    	data[1]=LPC_RTC->MONTH;
;;;226    	data[2]=LPC_RTC->DOM;
;;;227    	data[3]=0;
;;;228    	lc640_write_long_ptr(lc640_adr+8,data);
;;;229    
;;;230    	data[0]=LPC_RTC->HOUR;
;;;231    	data[1]=LPC_RTC->MIN;
;;;232    	data[2]=LPC_RTC->SEC;
;;;233    	data[3]=0;
;;;234    	lc640_write_long_ptr(lc640_adr+12,data);
;;;235    	
;;;236    	data[0]='A';
;;;237    	data[1]='A';
;;;238    	data[2]='A';
;;;239    	data[3]='A';
;;;240    	lc640_write_long_ptr(lc640_adr+16,data);
;;;241    	
;;;242    	data[0]='A';
;;;243    	data[1]='A';
;;;244    	data[2]='A';
;;;245    	data[3]='A';
;;;246    	lc640_write_long_ptr(lc640_adr+20,data);
;;;247    	
;;;248    	data[0]='A';
;;;249    	data[1]='A';
;;;250    	data[2]='A';
;;;251    	data[3]='A';
;;;252    	lc640_write_long_ptr(lc640_adr+24,data);
;;;253    	
;;;254    	data[0]='A';
;;;255    	data[1]='A';
;;;256    	data[2]='A';
;;;257    	data[3]='A';
;;;258    	lc640_write_long_ptr(lc640_adr+28,data);				
;;;259    	
;;;260    /*	memo_out0[0]=0x55;
;;;261         memo_out0[1]=0x00+2;
;;;262         memo_out0[2]=1;
;;;263         memo_out0[3]=0x0b;
;;;264         memo_out0[4]=0x55;
;;;265         memo_out0[5]=0x55; 
;;;266         	
;;;267         memo_out0[6]=crc_87(memo_out0,6);
;;;268    	memo_out0[7]=crc_95(memo_out0,6);
;;;269         usart_out_adr0(memo_out0,8); 
;;;270    	*/
;;;271    	snmp_trap_send("Main power is off",2,1,0);
;;;272    	}
;;;273    
;;;274    else if(in==0)
0002d6  2800              CMP      r0,#0
0002d8  d07e              BEQ      |L1.984|
0002da  e13b              B        |L1.1364|
                  |L1.732|
0002dc  f04f0001          MOV      r0,#1                 ;193
0002e0  7008              STRB     r0,[r1,#0]            ;193
0002e2  4628              MOV      r0,r5                 ;201
0002e4  f7fffffe          BL       lc640_read_int
0002e8  f1000001          ADD      r0,r0,#1              ;202
0002ec  4604              MOV      r4,r0                 ;202
0002ee  2c3f              CMP      r4,#0x3f              ;203
0002f0  d901              BLS      |L1.758|
0002f2  f04f0400          MOV      r4,#0                 ;203
                  |L1.758|
0002f6  b221              SXTH     r1,r4                 ;204
0002f8  4628              MOV      r0,r5                 ;204
0002fa  f7fffffe          BL       lc640_write_int
0002fe  f6406602          MOV      r6,#0xe02             ;206
000302  4630              MOV      r0,r6                 ;206
000304  f7fffffe          BL       lc640_read_int
000308  283f              CMP      r0,#0x3f              ;207
00030a  d000              BEQ      |L1.782|
00030c  4620              MOV      r0,r4                 ;207
                  |L1.782|
00030e  b201              SXTH     r1,r0                 ;208
000310  4630              MOV      r0,r6                 ;208
000312  f7fffffe          BL       lc640_write_int
000316  4628              MOV      r0,r5                 ;210
000318  f7fffffe          BL       lc640_read_int
00031c  eb091540          ADD      r5,r9,r0,LSL #5       ;210
000320  f04f0050          MOV      r0,#0x50              ;212
000324  f88d0000          STRB     r0,[sp,#0]            ;212
000328  f88d8001          STRB     r8,[sp,#1]            ;213
00032c  f04f0441          MOV      r4,#0x41              ;214
000330  f88d4002          STRB     r4,[sp,#2]            ;214
000334  f88d8003          STRB     r8,[sp,#3]            ;215
000338  4669              MOV      r1,sp                 ;216
00033a  4628              MOV      r0,r5                 ;216
00033c  f7fffffe          BL       lc640_write_long_ptr
000340  f8cd8000          STR      r8,[sp,#0]            ;221
000344  4669              MOV      r1,sp                 ;222
000346  1d28              ADDS     r0,r5,#4              ;222
000348  f7fffffe          BL       lc640_write_long_ptr
00034c  f1070720          ADD      r7,r7,#0x20           ;224
000350  8bb8              LDRH     r0,[r7,#0x1c]         ;224
000352  f88d0000          STRB     r0,[sp,#0]            ;224
000356  7e38              LDRB     r0,[r7,#0x18]         ;225
000358  f88d0001          STRB     r0,[sp,#1]            ;225
00035c  7b38              LDRB     r0,[r7,#0xc]          ;226
00035e  f88d0002          STRB     r0,[sp,#2]            ;226
000362  f88d8003          STRB     r8,[sp,#3]            ;227
000366  4669              MOV      r1,sp                 ;228
000368  f1050008          ADD      r0,r5,#8              ;228
00036c  f7fffffe          BL       lc640_write_long_ptr
000370  7a38              LDRB     r0,[r7,#8]            ;230
000372  f88d0000          STRB     r0,[sp,#0]            ;230
000376  7938              LDRB     r0,[r7,#4]            ;231
000378  f88d0001          STRB     r0,[sp,#1]            ;231
00037c  7838              LDRB     r0,[r7,#0]            ;232
00037e  f88d0002          STRB     r0,[sp,#2]            ;232
000382  f88d8003          STRB     r8,[sp,#3]            ;233
000386  4669              MOV      r1,sp                 ;234
000388  f105000c          ADD      r0,r5,#0xc            ;234
00038c  f7fffffe          BL       lc640_write_long_ptr
000390  f88d4000          STRB     r4,[sp,#0]            ;236
000394  f88d4001          STRB     r4,[sp,#1]            ;237
000398  f88d4002          STRB     r4,[sp,#2]            ;238
00039c  f88d4003          STRB     r4,[sp,#3]            ;239
0003a0  4669              MOV      r1,sp                 ;240
0003a2  f1050010          ADD      r0,r5,#0x10           ;240
0003a6  f7fffffe          BL       lc640_write_long_ptr
0003aa  f88d4000          STRB     r4,[sp,#0]            ;242
0003ae  f88d4001          STRB     r4,[sp,#1]            ;243
0003b2  f88d4002          STRB     r4,[sp,#2]            ;244
0003b6  f88d4003          STRB     r4,[sp,#3]            ;245
0003ba  4669              MOV      r1,sp                 ;246
0003bc  f1050014          ADD      r0,r5,#0x14           ;246
0003c0  f7fffffe          BL       lc640_write_long_ptr
0003c4  f88d4000          STRB     r4,[sp,#0]            ;248
0003c8  f88d4001          STRB     r4,[sp,#1]            ;249
0003cc  f88d4002          STRB     r4,[sp,#2]            ;250
0003d0  f88d4003          STRB     r4,[sp,#3]            ;251
0003d4  4669              MOV      r1,sp                 ;252
0003d6  e000              B        |L1.986|
                  |L1.984|
0003d8  e02a              B        |L1.1072|
                  |L1.986|
0003da  f1050018          ADD      r0,r5,#0x18           ;252
0003de  f7fffffe          BL       lc640_write_long_ptr
0003e2  f88d4000          STRB     r4,[sp,#0]            ;254
0003e6  f88d4001          STRB     r4,[sp,#1]            ;255
0003ea  f88d4002          STRB     r4,[sp,#2]            ;256
0003ee  f88d4003          STRB     r4,[sp,#3]            ;257
0003f2  4669              MOV      r1,sp                 ;258
0003f4  f105001c          ADD      r0,r5,#0x1c           ;258
0003f8  f7fffffe          BL       lc640_write_long_ptr
0003fc  2300              MOVS     r3,#0                 ;271
0003fe  e011              B        |L1.1060|
                  |L1.1024|
                          DCD      net_av
                  |L1.1028|
                          DCD      ||.data||
                  |L1.1032|
                          DCD      bat
                  |L1.1036|
                          DCD      bps
                  |L1.1040|
                          DCD      sk_av_stat
                  |L1.1044|
                          DCD      SK_ZVUK_EN
                  |L1.1048|
                          DCD      AV_OFF_AVT
                  |L1.1052|
                          DCD      0x40024020
                  |L1.1056|
                          DCD      0x400fc000
                  |L1.1060|
000424  2201              MOVS     r2,#1                 ;271
000426  2102              MOVS     r1,#2                 ;271
000428  a0f9              ADR      r0,|L1.2064|
00042a  f7fffffe          BL       snmp_trap_send
00042e  e091              B        |L1.1364|
                  |L1.1072|
;;;275    	{
;;;276    	net_av=0;
000430  f8818000          STRB     r8,[r1,#0]
;;;277    
;;;278      /*
;;;279    	SET_REG(C2GSR,3,24,8);
;;;280    	C2MOD=0;
;;;281    	bOUT_FREE2=1;*/
;;;282    
;;;283    
;;;284    	//C2MOD=0;
;;;285    
;;;286    	//can2_init(7,8,CANBitrate250k_60MHz);
;;;287    
;;;288         //beep_init(0x02L,'O');
;;;289    	//a_.av.bAN=0;
;;;290    	SET_REG(avar_stat,0,0,1);
000434  48fb              LDR      r0,|L1.2084|
000436  6801              LDR      r1,[r0,#0]  ; avar_stat
000438  f0210101          BIC      r1,r1,#1
00043c  6001              STR      r1,[r0,#0]  ; avar_stat
;;;291    
;;;292    	//if(AV_OFF_AVT)a.av.bAN=0;
;;;293    	
;;;294    	if(AV_OFF_AVT) SET_REG(avar_ind_stat,0,0,1);
00043e  49fa              LDR      r1,|L1.2088|
000440  8809              LDRH     r1,[r1,#0]  ; AV_OFF_AVT
000442  b119              CBZ      r1,|L1.1100|
000444  6841              LDR      r1,[r0,#4]  ; avar_ind_stat
000446  f0210101          BIC      r1,r1,#1
00044a  6041              STR      r1,[r0,#4]  ; avar_ind_stat
                  |L1.1100|
;;;295    
;;;296         event_ptr=lc640_read_int(PTR_EVENT_LOG);
00044c  4628              MOV      r0,r5
00044e  f7fffffe          BL       lc640_read_int
000452  4606              MOV      r6,r0
;;;297    	event_ptr_find=event_ptr;
000454  4634              MOV      r4,r6
                  |L1.1110|
;;;298    avar_unet_hndl_lbl1:
;;;299    	lc640_adr=EVENT_LOG+(event_ptr_find*32);
000456  eb091544          ADD      r5,r9,r4,LSL #5
;;;300    
;;;301         lc640_read_long_ptr(lc640_adr,data);
00045a  4669              MOV      r1,sp
00045c  4628              MOV      r0,r5
00045e  f7fffffe          BL       lc640_read_long_ptr
;;;302         
;;;303         if(!((data[0]=='P')&&(data[1]==0)&&(data[2]=='A')))
000462  f89d0000          LDRB     r0,[sp,#0]
000466  2850              CMP      r0,#0x50
000468  d106              BNE      |L1.1144|
00046a  f89d0001          LDRB     r0,[sp,#1]
00046e  b918              CBNZ     r0,|L1.1144|
000470  f89d0002          LDRB     r0,[sp,#2]
000474  2841              CMP      r0,#0x41
000476  d008              BEQ      |L1.1162|
                  |L1.1144|
;;;304         	{        
;;;305         	if(event_ptr_find)event_ptr_find--;
000478  b114              CBZ      r4,|L1.1152|
00047a  f1a40401          SUB      r4,r4,#1
00047e  e001              B        |L1.1156|
                  |L1.1152|
;;;306         	else event_ptr_find=63;
000480  f04f043f          MOV      r4,#0x3f
                  |L1.1156|
;;;307         	if(event_ptr_find==event_ptr)goto avar_unet_hndl_end;
000484  42b4              CMP      r4,r6
000486  d1e6              BNE      |L1.1110|
000488  e064              B        |L1.1364|
                  |L1.1162|
;;;308         	else goto avar_unet_hndl_lbl1;
;;;309         	}
;;;310         else 
;;;311         	{
;;;312         	lc640_read_long_ptr(lc640_adr+16,data);
00048a  4669              MOV      r1,sp
00048c  f1050010          ADD      r0,r5,#0x10
000490  f7fffffe          BL       lc640_read_long_ptr
;;;313         	if(!((data[0]=='A')&&(data[1]=='A')&&(data[2]=='A')&&(data[3]=='A')))
000494  f89d0000          LDRB     r0,[sp,#0]
000498  2841              CMP      r0,#0x41
00049a  d10b              BNE      |L1.1204|
00049c  f89d0001          LDRB     r0,[sp,#1]
0004a0  2841              CMP      r0,#0x41
0004a2  d107              BNE      |L1.1204|
0004a4  f89d0002          LDRB     r0,[sp,#2]
0004a8  2841              CMP      r0,#0x41
0004aa  d103              BNE      |L1.1204|
0004ac  f89d0003          LDRB     r0,[sp,#3]
0004b0  2841              CMP      r0,#0x41
0004b2  d008              BEQ      |L1.1222|
                  |L1.1204|
;;;314         		{        
;;;315         		if(event_ptr_find)event_ptr_find--;
0004b4  b114              CBZ      r4,|L1.1212|
0004b6  f1a40401          SUB      r4,r4,#1
0004ba  e001              B        |L1.1216|
                  |L1.1212|
;;;316             		else event_ptr_find=63;
0004bc  f04f043f          MOV      r4,#0x3f
                  |L1.1216|
;;;317             		if(event_ptr_find==event_ptr)goto avar_unet_hndl_end;
0004c0  42b4              CMP      r4,r6
0004c2  d1c8              BNE      |L1.1110|
0004c4  e046              B        |L1.1364|
                  |L1.1222|
;;;318         		else goto avar_unet_hndl_lbl1;
;;;319         		}
;;;320    
;;;321         	}	
;;;322    	
;;;323    	data[0]=LPC_RTC->YEAR;
0004c6  f1070720          ADD      r7,r7,#0x20
0004ca  8bb8              LDRH     r0,[r7,#0x1c]
0004cc  f88d0000          STRB     r0,[sp,#0]
;;;324    	data[1]=LPC_RTC->MONTH;
0004d0  7e38              LDRB     r0,[r7,#0x18]
0004d2  f88d0001          STRB     r0,[sp,#1]
;;;325    	data[2]=LPC_RTC->DOM;
0004d6  7b38              LDRB     r0,[r7,#0xc]
0004d8  f88d0002          STRB     r0,[sp,#2]
;;;326    	data[3]=0;
0004dc  f88d8003          STRB     r8,[sp,#3]
;;;327    	lc640_write_long_ptr(lc640_adr+16,data);
0004e0  4669              MOV      r1,sp
0004e2  f1050010          ADD      r0,r5,#0x10
0004e6  f7fffffe          BL       lc640_write_long_ptr
;;;328    
;;;329    	data[0]=LPC_RTC->HOUR;
0004ea  7a38              LDRB     r0,[r7,#8]
0004ec  f88d0000          STRB     r0,[sp,#0]
;;;330    	data[1]=LPC_RTC->MIN;
0004f0  7938              LDRB     r0,[r7,#4]
0004f2  f88d0001          STRB     r0,[sp,#1]
;;;331    	data[2]=LPC_RTC->SEC;
0004f6  7838              LDRB     r0,[r7,#0]
0004f8  f88d0002          STRB     r0,[sp,#2]
;;;332    	data[3]=0;
0004fc  f88d8003          STRB     r8,[sp,#3]
;;;333    	lc640_write_long_ptr(lc640_adr+20,data); 
000500  4669              MOV      r1,sp
000502  f1050014          ADD      r0,r5,#0x14
000506  f7fffffe          BL       lc640_write_long_ptr
;;;334    	
;;;335    	data[0]=*((char*)(&net_Ustore));
00050a  48c8              LDR      r0,|L1.2092|
00050c  7801              LDRB     r1,[r0,#0]  ; net_Ustore
00050e  f88d1000          STRB     r1,[sp,#0]
;;;336    	data[1]=*(((char*)(&net_Ustore))+1);
000512  7840              LDRB     r0,[r0,#1]  ; net_Ustore
000514  f88d0001          STRB     r0,[sp,#1]
;;;337    	data[2]='B';
000518  f04f0442          MOV      r4,#0x42
00051c  f88d4002          STRB     r4,[sp,#2]
;;;338    	data[3]='B';
000520  f88d4003          STRB     r4,[sp,#3]
;;;339    	lc640_write_long_ptr(lc640_adr+24,data);
000524  4669              MOV      r1,sp
000526  f1050018          ADD      r0,r5,#0x18
00052a  f7fffffe          BL       lc640_write_long_ptr
;;;340    	
;;;341    	data[0]='B';
00052e  f88d4000          STRB     r4,[sp,#0]
;;;342    	data[1]='B';
000532  f88d4001          STRB     r4,[sp,#1]
;;;343    	data[2]='B';
000536  f88d4002          STRB     r4,[sp,#2]
;;;344    	data[3]='B';
00053a  f88d4003          STRB     r4,[sp,#3]
;;;345    	lc640_write_long_ptr(lc640_adr+28,data);	
00053e  4669              MOV      r1,sp
000540  f105001c          ADD      r0,r5,#0x1c
000544  f7fffffe          BL       lc640_write_long_ptr
;;;346    	
;;;347    /*	memo_out0[0]=0x55;
;;;348         memo_out0[1]=0x00+2;
;;;349         memo_out0[2]=1;
;;;350         memo_out0[3]=0x0b;
;;;351         memo_out0[4]=0xaa;
;;;352         memo_out0[5]=0xaa; 
;;;353         	
;;;354         memo_out0[6]=crc_87(memo_out0,6);
;;;355    	memo_out0[7]=crc_95(memo_out0,6);
;;;356         usart_out_adr0(memo_out0,8); */
;;;357         snmp_trap_send("Main power is on",2,1,1);	
000548  2301              MOVS     r3,#1
00054a  461a              MOV      r2,r3
00054c  2102              MOVS     r1,#2
00054e  a0b8              ADR      r0,|L1.2096|
000550  f7fffffe          BL       snmp_trap_send
                  |L1.1364|
;;;358    	}
;;;359    avar_unet_hndl_end:
;;;360    	__nop();		
000554  bf00              NOP      
;;;361    }
000556  e8bd83f8          POP      {r3-r9,pc}
;;;362    
                          ENDP

                  avar_bps_hndl PROC
;;;544    //-----------------------------------------------
;;;545    void avar_bps_hndl(char dev, char v, char in)
00055a  e92d4ff8          PUSH     {r3-r11,lr}
;;;546    {
00055e  4606              MOV      r6,r0
000560  460c              MOV      r4,r1
;;;547    char data[4];
;;;548    unsigned short event_ptr,lc640_adr,event_ptr_find,event_cnt;
;;;549    char avar_simbol;
;;;550    
;;;551    avar_simbol='T';
000562  f04f0754          MOV      r7,#0x54
;;;552    if(v==0)avar_simbol='T';
000566  b174              CBZ      r4,|L1.1414|
;;;553    else if(v==1)avar_simbol='U';
000568  2c01              CMP      r4,#1
00056a  d004              BEQ      |L1.1398|
;;;554    else if(v==2)avar_simbol='u';
00056c  2c02              CMP      r4,#2
00056e  d005              BEQ      |L1.1404|
;;;555    else if(v==3)avar_simbol='L';
000570  2c03              CMP      r4,#3
000572  d006              BEQ      |L1.1410|
000574  e007              B        |L1.1414|
                  |L1.1398|
000576  f04f0755          MOV      r7,#0x55              ;553
00057a  e004              B        |L1.1414|
                  |L1.1404|
00057c  f04f0775          MOV      r7,#0x75              ;554
000580  e001              B        |L1.1414|
                  |L1.1410|
000582  f04f074c          MOV      r7,#0x4c
                  |L1.1414|
;;;556    
;;;557    if(in==1)
;;;558    	{
;;;559    	//av_src[bps]=1;
;;;560    
;;;561    //	SET_REG(avar_ind_stat,1,3+dev,1);
;;;562    //	SET_REG(avar_stat,1,3+dev,1);
;;;563    	
;;;564    	if(v==0)bps[dev]._av|=(1<<0);
000586  49b0              LDR      r1,|L1.2120|
000588  ebc600c6          RSB      r0,r6,r6,LSL #3
;;;565    	else if(v==1) bps[dev]._av|=(1<<1);
;;;566    	else if(v==2) bps[dev]._av|=(1<<2);
;;;567    	else if(v==3) bps[dev]._av|=(1<<3);
;;;568    
;;;569    	bps[dev]._last_avar=v;
;;;570    
;;;571    	//beep_init(0x33333333,'A');
;;;572    
;;;573    	event_ptr=lc640_read_int(PTR_EVENT_LOG);
;;;574    	event_ptr++;	
;;;575    	if(event_ptr>63)event_ptr=0;	
;;;576    	lc640_write_int(PTR_EVENT_LOG,event_ptr);	
;;;577    	
;;;578         event_cnt=lc640_read_int(CNT_EVENT_LOG);
;;;579    	if(event_cnt!=63)event_cnt=event_ptr;
;;;580    	lc640_write_int(CNT_EVENT_LOG,event_cnt); 
;;;581    	
;;;582    	lc640_adr=EVENT_LOG+(lc640_read_int(PTR_EVENT_LOG)*32);
;;;583    	
;;;584    	data[0]='S';
;;;585    	data[1]=dev; 
;;;586    	data[2]=avar_simbol;
;;;587    	data[3]=0;
;;;588    	lc640_write_long_ptr(lc640_adr,data);
;;;589    
;;;590    	data[0]=0;
;;;591    	data[1]=0;
;;;592    	data[2]=0;
;;;593    	data[3]=0;
;;;594    	lc640_write_long_ptr(lc640_adr+4,data);
;;;595    
;;;596    	data[0]=LPC_RTC->YEAR;
00058c  f8df82b4          LDR      r8,|L1.2116|
000590  eb000040          ADD      r0,r0,r0,LSL #1       ;564
000594  f04f0900          MOV      r9,#0                 ;546
000598  f44f6a60          MOV      r10,#0xe00            ;573
00059c  f44f6580          MOV      r5,#0x400             ;582
0005a0  eb010080          ADD      r0,r1,r0,LSL #2       ;564
0005a4  2a01              CMP      r2,#1                 ;557
0005a6  d002              BEQ      |L1.1454|
;;;597    	data[1]=LPC_RTC->MONTH;
;;;598    	data[2]=LPC_RTC->DOM;
;;;599    	data[3]=0;
;;;600    	lc640_write_long_ptr(lc640_adr+8,data);
;;;601    
;;;602    	data[0]=LPC_RTC->HOUR;
;;;603    	data[1]=LPC_RTC->MIN;
;;;604    	data[2]=LPC_RTC->SEC;
;;;605    	data[3]=0;
;;;606    	lc640_write_long_ptr(lc640_adr+12,data);
;;;607    	
;;;608    	data[0]='A';
;;;609    	data[1]='A';
;;;610    	data[2]='A';
;;;611    	data[3]='A';
;;;612    	lc640_write_long_ptr(lc640_adr+16,data);
;;;613    	
;;;614    	data[0]='A';
;;;615    	data[1]='A';
;;;616    	data[2]='A';
;;;617    	data[3]='A';
;;;618    	lc640_write_long_ptr(lc640_adr+20,data);
;;;619    	
;;;620    	data[0]='A';
;;;621    	data[1]='A';
;;;622    	data[2]='A';
;;;623    	data[3]='A';
;;;624    	lc640_write_long_ptr(lc640_adr+24,data);
;;;625    	
;;;626    	data[0]='A';
;;;627    	data[1]='A';
;;;628    	data[2]='A';
;;;629    	data[3]='A';
;;;630    	lc640_write_long_ptr(lc640_adr+28,data);		
;;;631    
;;;632    
;;;633    	if(dev==0)
;;;634    		{
;;;635    		if(v==0)
;;;636    		snmp_trap_send("BPS #1 Alarm, overheat",4,1,0);
;;;637    		else if(v==1)
;;;638    		snmp_trap_send("BPS #1 Alarm, voltage is up",4,1,1);
;;;639    		else if(v==2)
;;;640    		snmp_trap_send("BPS #1 Alarm, voltage is down",4,1,2);
;;;641    		else if(v==3)
;;;642    		snmp_trap_send("BPS #1 Alarm, connect is lost",4,1,3);
;;;643    		}
;;;644    	else if(dev==1)
;;;645    		{
;;;646    		if(v==0)
;;;647    		snmp_trap_send("BPS #2 Alarm, overheat",4,2,0);
;;;648    		else if(v==1)
;;;649    		snmp_trap_send("BPS #2 Alarm, voltage is up",4,2,1);
;;;650    		else if(v==2)
;;;651    		snmp_trap_send("BPS #2 Alarm, voltage is down",4,2,2);
;;;652    		else if(v==3)
;;;653    		snmp_trap_send("BPS #2 Alarm, connect is lost",4,2,3);
;;;654    		} 
;;;655    	else if(dev==2)
;;;656    		{
;;;657    		if(v==0)
;;;658    		snmp_trap_send("BPS #3 Alarm, overheat",4,3,0);
;;;659    		else if(v==1)
;;;660    		snmp_trap_send("BPS #3 Alarm, voltage is up",4,3,1);
;;;661    		else if(v==2)
;;;662    		snmp_trap_send("BPS #3 Alarm, voltage is down",4,3,2);
;;;663    		else if(v==3)
;;;664    		snmp_trap_send("BPS #3 Alarm, connect is lost",4,3,3);
;;;665    		} 	
;;;666    			
;;;667    	}
;;;668    
;;;669    else if(in==0)
0005a8  2a00              CMP      r2,#0
0005aa  d07e              BEQ      |L1.1706|
0005ac  e294              B        |L1.2776|
                  |L1.1454|
0005ae  b134              CBZ      r4,|L1.1470|
0005b0  2c01              CMP      r4,#1                 ;565
0005b2  d009              BEQ      |L1.1480|
0005b4  2c02              CMP      r4,#2                 ;566
0005b6  d00c              BEQ      |L1.1490|
0005b8  2c03              CMP      r4,#3                 ;567
0005ba  d00f              BEQ      |L1.1500|
0005bc  e012              B        |L1.1508|
                  |L1.1470|
0005be  7841              LDRB     r1,[r0,#1]            ;564
0005c0  f0410101          ORR      r1,r1,#1              ;564
0005c4  7041              STRB     r1,[r0,#1]            ;564
0005c6  e00d              B        |L1.1508|
                  |L1.1480|
0005c8  7841              LDRB     r1,[r0,#1]            ;565
0005ca  f0410102          ORR      r1,r1,#2              ;565
0005ce  7041              STRB     r1,[r0,#1]            ;565
0005d0  e008              B        |L1.1508|
                  |L1.1490|
0005d2  7841              LDRB     r1,[r0,#1]            ;566
0005d4  f0410104          ORR      r1,r1,#4              ;566
0005d8  7041              STRB     r1,[r0,#1]            ;566
0005da  e003              B        |L1.1508|
                  |L1.1500|
0005dc  7841              LDRB     r1,[r0,#1]            ;567
0005de  f0410108          ORR      r1,r1,#8              ;567
0005e2  7041              STRB     r1,[r0,#1]            ;567
                  |L1.1508|
0005e4  f8804053          STRB     r4,[r0,#0x53]         ;569
0005e8  4650              MOV      r0,r10                ;573
0005ea  f7fffffe          BL       lc640_read_int
0005ee  f1000001          ADD      r0,r0,#1              ;574
0005f2  fa1ffb80          UXTH     r11,r0                ;574
0005f6  f1bb0f3f          CMP      r11,#0x3f             ;575
0005fa  d901              BLS      |L1.1536|
0005fc  f04f0b00          MOV      r11,#0                ;575
                  |L1.1536|
000600  fa0ff18b          SXTH     r1,r11                ;576
000604  4650              MOV      r0,r10                ;576
000606  f7fffffe          BL       lc640_write_int
00060a  f6406002          MOV      r0,#0xe02             ;578
00060e  f7fffffe          BL       lc640_read_int
000612  b280              UXTH     r0,r0                 ;578
000614  283f              CMP      r0,#0x3f              ;579
000616  d000              BEQ      |L1.1562|
000618  4658              MOV      r0,r11                ;579
                  |L1.1562|
00061a  b201              SXTH     r1,r0                 ;580
00061c  f6406002          MOV      r0,#0xe02             ;580
000620  f7fffffe          BL       lc640_write_int
000624  4650              MOV      r0,r10                ;582
000626  f7fffffe          BL       lc640_read_int
00062a  eb051040          ADD      r0,r5,r0,LSL #5       ;582
00062e  b285              UXTH     r5,r0                 ;582
000630  f04f0053          MOV      r0,#0x53              ;584
000634  f88d0000          STRB     r0,[sp,#0]            ;584
000638  f88d6001          STRB     r6,[sp,#1]            ;585
00063c  f88d7002          STRB     r7,[sp,#2]            ;586
000640  f88d9003          STRB     r9,[sp,#3]            ;587
000644  4669              MOV      r1,sp                 ;588
000646  4628              MOV      r0,r5                 ;588
000648  f7fffffe          BL       lc640_write_long_ptr
00064c  f8cd9000          STR      r9,[sp,#0]            ;593
000650  4669              MOV      r1,sp                 ;594
000652  1d28              ADDS     r0,r5,#4              ;594
000654  f7fffffe          BL       lc640_write_long_ptr
000658  f8b8003c          LDRH     r0,[r8,#0x3c]         ;596
00065c  f88d0000          STRB     r0,[sp,#0]            ;596
000660  f8980038          LDRB     r0,[r8,#0x38]         ;597
000664  f88d0001          STRB     r0,[sp,#1]            ;597
000668  f898002c          LDRB     r0,[r8,#0x2c]         ;598
00066c  f88d0002          STRB     r0,[sp,#2]            ;598
000670  f88d9003          STRB     r9,[sp,#3]            ;599
000674  4669              MOV      r1,sp                 ;600
000676  f1050008          ADD      r0,r5,#8              ;600
00067a  f7fffffe          BL       lc640_write_long_ptr
00067e  f8980028          LDRB     r0,[r8,#0x28]         ;602
000682  f88d0000          STRB     r0,[sp,#0]            ;602
000686  f8980024          LDRB     r0,[r8,#0x24]         ;603
00068a  f88d0001          STRB     r0,[sp,#1]            ;603
00068e  f8980020          LDRB     r0,[r8,#0x20]         ;604
000692  f88d0002          STRB     r0,[sp,#2]            ;604
000696  f88d9003          STRB     r9,[sp,#3]            ;605
00069a  4669              MOV      r1,sp                 ;606
00069c  f105000c          ADD      r0,r5,#0xc            ;606
0006a0  f7fffffe          BL       lc640_write_long_ptr
0006a4  f04f0741          MOV      r7,#0x41              ;608
0006a8  e000              B        |L1.1708|
                  |L1.1706|
0006aa  e0a5              B        |L1.2040|
                  |L1.1708|
0006ac  f88d7000          STRB     r7,[sp,#0]            ;608
0006b0  f88d7001          STRB     r7,[sp,#1]            ;609
0006b4  f88d7002          STRB     r7,[sp,#2]            ;610
0006b8  f88d7003          STRB     r7,[sp,#3]            ;611
0006bc  4669              MOV      r1,sp                 ;612
0006be  f1050010          ADD      r0,r5,#0x10           ;612
0006c2  f7fffffe          BL       lc640_write_long_ptr
0006c6  f88d7000          STRB     r7,[sp,#0]            ;614
0006ca  f88d7001          STRB     r7,[sp,#1]            ;615
0006ce  f88d7002          STRB     r7,[sp,#2]            ;616
0006d2  f88d7003          STRB     r7,[sp,#3]            ;617
0006d6  4669              MOV      r1,sp                 ;618
0006d8  f1050014          ADD      r0,r5,#0x14           ;618
0006dc  f7fffffe          BL       lc640_write_long_ptr
0006e0  f88d7000          STRB     r7,[sp,#0]            ;620
0006e4  f88d7001          STRB     r7,[sp,#1]            ;621
0006e8  f88d7002          STRB     r7,[sp,#2]            ;622
0006ec  f88d7003          STRB     r7,[sp,#3]            ;623
0006f0  4669              MOV      r1,sp                 ;624
0006f2  f1050018          ADD      r0,r5,#0x18           ;624
0006f6  f7fffffe          BL       lc640_write_long_ptr
0006fa  f88d7000          STRB     r7,[sp,#0]            ;626
0006fe  f88d7001          STRB     r7,[sp,#1]            ;627
000702  f88d7002          STRB     r7,[sp,#2]            ;628
000706  f88d7003          STRB     r7,[sp,#3]            ;629
00070a  4669              MOV      r1,sp                 ;630
00070c  f105001c          ADD      r0,r5,#0x1c           ;630
000710  f7fffffe          BL       lc640_write_long_ptr
000714  b126              CBZ      r6,|L1.1824|
000716  2e01              CMP      r6,#1                 ;644
000718  d026              BEQ      |L1.1896|
00071a  2e02              CMP      r6,#2                 ;655
00071c  d048              BEQ      |L1.1968|
00071e  e1db              B        |L1.2776|
                  |L1.1824|
000720  b134              CBZ      r4,|L1.1840|
000722  2c01              CMP      r4,#1                 ;637
000724  d00b              BEQ      |L1.1854|
000726  2c02              CMP      r4,#2                 ;639
000728  d010              BEQ      |L1.1868|
00072a  2c03              CMP      r4,#3                 ;641
00072c  d015              BEQ      |L1.1882|
00072e  e1d3              B        |L1.2776|
                  |L1.1840|
000730  2300              MOVS     r3,#0                 ;636
000732  2201              MOVS     r2,#1                 ;636
000734  2104              MOVS     r1,#4                 ;636
000736  a045              ADR      r0,|L1.2124|
000738  f7fffffe          BL       snmp_trap_send
00073c  e1cc              B        |L1.2776|
                  |L1.1854|
00073e  2301              MOVS     r3,#1                 ;638
000740  461a              MOV      r2,r3                 ;638
000742  2104              MOVS     r1,#4                 ;638
000744  a047              ADR      r0,|L1.2148|
000746  f7fffffe          BL       snmp_trap_send
00074a  e1c5              B        |L1.2776|
                  |L1.1868|
00074c  2302              MOVS     r3,#2                 ;640
00074e  2201              MOVS     r2,#1                 ;640
000750  2104              MOVS     r1,#4                 ;640
000752  a04b              ADR      r0,|L1.2176|
000754  f7fffffe          BL       snmp_trap_send
000758  e1be              B        |L1.2776|
                  |L1.1882|
00075a  2303              MOVS     r3,#3                 ;642
00075c  2201              MOVS     r2,#1                 ;642
00075e  2104              MOVS     r1,#4                 ;642
000760  a04f              ADR      r0,|L1.2208|
000762  f7fffffe          BL       snmp_trap_send
000766  e1b7              B        |L1.2776|
                  |L1.1896|
000768  b134              CBZ      r4,|L1.1912|
00076a  2c01              CMP      r4,#1                 ;648
00076c  d00b              BEQ      |L1.1926|
00076e  2c02              CMP      r4,#2                 ;650
000770  d010              BEQ      |L1.1940|
000772  2c03              CMP      r4,#3                 ;652
000774  d015              BEQ      |L1.1954|
000776  e1af              B        |L1.2776|
                  |L1.1912|
000778  2300              MOVS     r3,#0                 ;647
00077a  2202              MOVS     r2,#2                 ;647
00077c  2104              MOVS     r1,#4                 ;647
00077e  a050              ADR      r0,|L1.2240|
000780  f7fffffe          BL       snmp_trap_send
000784  e1a8              B        |L1.2776|
                  |L1.1926|
000786  2301              MOVS     r3,#1                 ;649
000788  2202              MOVS     r2,#2                 ;649
00078a  2104              MOVS     r1,#4                 ;649
00078c  a052              ADR      r0,|L1.2264|
00078e  f7fffffe          BL       snmp_trap_send
000792  e1a1              B        |L1.2776|
                  |L1.1940|
000794  2302              MOVS     r3,#2                 ;651
000796  461a              MOV      r2,r3                 ;651
000798  2104              MOVS     r1,#4                 ;651
00079a  a056              ADR      r0,|L1.2292|
00079c  f7fffffe          BL       snmp_trap_send
0007a0  e19a              B        |L1.2776|
                  |L1.1954|
0007a2  2303              MOVS     r3,#3                 ;653
0007a4  2202              MOVS     r2,#2                 ;653
0007a6  2104              MOVS     r1,#4                 ;653
0007a8  a05a              ADR      r0,|L1.2324|
0007aa  f7fffffe          BL       snmp_trap_send
0007ae  e193              B        |L1.2776|
                  |L1.1968|
0007b0  b134              CBZ      r4,|L1.1984|
0007b2  2c01              CMP      r4,#1                 ;659
0007b4  d00b              BEQ      |L1.1998|
0007b6  2c02              CMP      r4,#2                 ;661
0007b8  d010              BEQ      |L1.2012|
0007ba  2c03              CMP      r4,#3                 ;663
0007bc  d015              BEQ      |L1.2026|
0007be  e18b              B        |L1.2776|
                  |L1.1984|
0007c0  2300              MOVS     r3,#0                 ;658
0007c2  2203              MOVS     r2,#3                 ;658
0007c4  2104              MOVS     r1,#4                 ;658
0007c6  a05b              ADR      r0,|L1.2356|
0007c8  f7fffffe          BL       snmp_trap_send
0007cc  e184              B        |L1.2776|
                  |L1.1998|
0007ce  2301              MOVS     r3,#1                 ;660
0007d0  2203              MOVS     r2,#3                 ;660
0007d2  2104              MOVS     r1,#4                 ;660
0007d4  a05d              ADR      r0,|L1.2380|
0007d6  f7fffffe          BL       snmp_trap_send
0007da  e17d              B        |L1.2776|
                  |L1.2012|
0007dc  2302              MOVS     r3,#2                 ;662
0007de  2203              MOVS     r2,#3                 ;662
0007e0  2104              MOVS     r1,#4                 ;662
0007e2  a061              ADR      r0,|L1.2408|
0007e4  f7fffffe          BL       snmp_trap_send
0007e8  e176              B        |L1.2776|
                  |L1.2026|
0007ea  2303              MOVS     r3,#3                 ;664
0007ec  461a              MOV      r2,r3                 ;664
0007ee  2104              MOVS     r1,#4                 ;664
0007f0  a065              ADR      r0,|L1.2440|
0007f2  f7fffffe          BL       snmp_trap_send
0007f6  e16f              B        |L1.2776|
                  |L1.2040|
;;;670    	{      
;;;671    //	av_bps[bps]=0;
;;;672    
;;;673    	//SET_REG(avar_stat,0,3+bps,1);
;;;674    	//if(AV_OFF_AVT) SET_REG(avar_ind_stat,0,3+bps,1);
;;;675    
;;;676         if(v==0) bps[dev]._av&=(~(1<<0));
0007f8  b134              CBZ      r4,|L1.2056|
;;;677         else if(v==1) bps[dev]._av&=(~(1<<1));
0007fa  2c01              CMP      r4,#1
0007fc  d005              BEQ      |L1.2058|
;;;678    	else if(v==2) bps[dev]._av&=(~(1<<2));
0007fe  2c02              CMP      r4,#2
000800  d004              BEQ      |L1.2060|
;;;679    	else if(v==3) bps[dev]._av&=(~(1<<3));
000802  2c03              CMP      r4,#3
000804  d003              BEQ      |L1.2062|
000806  e0e2              B        |L1.2510|
                  |L1.2056|
000808  e0ce              B        |L1.2472|
                  |L1.2058|
00080a  e0d2              B        |L1.2482|
                  |L1.2060|
00080c  e0d6              B        |L1.2492|
                  |L1.2062|
00080e  e0da              B        |L1.2502|
                  |L1.2064|
000810  4d61696e          DCB      "Main power is off",0
000814  20706f77
000818  65722069
00081c  73206f66
000820  6600    
000822  00                DCB      0
000823  00                DCB      0
                  |L1.2084|
                          DCD      ||.data||
                  |L1.2088|
                          DCD      AV_OFF_AVT
                  |L1.2092|
                          DCD      net_Ustore
                  |L1.2096|
000830  4d61696e          DCB      "Main power is on",0
000834  20706f77
000838  65722069
00083c  73206f6e
000840  00      
000841  00                DCB      0
000842  00                DCB      0
000843  00                DCB      0
                  |L1.2116|
                          DCD      0x40024000
                  |L1.2120|
                          DCD      bps
                  |L1.2124|
00084c  42505320          DCB      "BPS #1 Alarm, overheat",0
000850  23312041
000854  6c61726d
000858  2c206f76
00085c  65726865
000860  617400  
000863  00                DCB      0
                  |L1.2148|
000864  42505320          DCB      "BPS #1 Alarm, voltage is up",0
000868  23312041
00086c  6c61726d
000870  2c20766f
000874  6c746167
000878  65206973
00087c  20757000
                  |L1.2176|
000880  42505320          DCB      "BPS #1 Alarm, voltage is down",0
000884  23312041
000888  6c61726d
00088c  2c20766f
000890  6c746167
000894  65206973
000898  20646f77
00089c  6e00    
00089e  00                DCB      0
00089f  00                DCB      0
                  |L1.2208|
0008a0  42505320          DCB      "BPS #1 Alarm, connect is lost",0
0008a4  23312041
0008a8  6c61726d
0008ac  2c20636f
0008b0  6e6e6563
0008b4  74206973
0008b8  206c6f73
0008bc  7400    
0008be  00                DCB      0
0008bf  00                DCB      0
                  |L1.2240|
0008c0  42505320          DCB      "BPS #2 Alarm, overheat",0
0008c4  23322041
0008c8  6c61726d
0008cc  2c206f76
0008d0  65726865
0008d4  617400  
0008d7  00                DCB      0
                  |L1.2264|
0008d8  42505320          DCB      "BPS #2 Alarm, voltage is up",0
0008dc  23322041
0008e0  6c61726d
0008e4  2c20766f
0008e8  6c746167
0008ec  65206973
0008f0  20757000
                  |L1.2292|
0008f4  42505320          DCB      "BPS #2 Alarm, voltage is down",0
0008f8  23322041
0008fc  6c61726d
000900  2c20766f
000904  6c746167
000908  65206973
00090c  20646f77
000910  6e00    
000912  00                DCB      0
000913  00                DCB      0
                  |L1.2324|
000914  42505320          DCB      "BPS #2 Alarm, connect is lost",0
000918  23322041
00091c  6c61726d
000920  2c20636f
000924  6e6e6563
000928  74206973
00092c  206c6f73
000930  7400    
000932  00                DCB      0
000933  00                DCB      0
                  |L1.2356|
000934  42505320          DCB      "BPS #3 Alarm, overheat",0
000938  23332041
00093c  6c61726d
000940  2c206f76
000944  65726865
000948  617400  
00094b  00                DCB      0
                  |L1.2380|
00094c  42505320          DCB      "BPS #3 Alarm, voltage is up",0
000950  23332041
000954  6c61726d
000958  2c20766f
00095c  6c746167
000960  65206973
000964  20757000
                  |L1.2408|
000968  42505320          DCB      "BPS #3 Alarm, voltage is down",0
00096c  23332041
000970  6c61726d
000974  2c20766f
000978  6c746167
00097c  65206973
000980  20646f77
000984  6e00    
000986  00                DCB      0
000987  00                DCB      0
                  |L1.2440|
000988  42505320          DCB      "BPS #3 Alarm, connect is lost",0
00098c  23332041
000990  6c61726d
000994  2c20636f
000998  6e6e6563
00099c  74206973
0009a0  206c6f73
0009a4  7400    
0009a6  00                DCB      0
0009a7  00                DCB      0
                  |L1.2472|
0009a8  7841              LDRB     r1,[r0,#1]            ;676
0009aa  f0210101          BIC      r1,r1,#1              ;676
0009ae  7041              STRB     r1,[r0,#1]            ;676
0009b0  e00d              B        |L1.2510|
                  |L1.2482|
0009b2  7841              LDRB     r1,[r0,#1]            ;677
0009b4  f0210102          BIC      r1,r1,#2              ;677
0009b8  7041              STRB     r1,[r0,#1]            ;677
0009ba  e008              B        |L1.2510|
                  |L1.2492|
0009bc  7841              LDRB     r1,[r0,#1]            ;678
0009be  f0210104          BIC      r1,r1,#4              ;678
0009c2  7041              STRB     r1,[r0,#1]            ;678
0009c4  e003              B        |L1.2510|
                  |L1.2502|
0009c6  7841              LDRB     r1,[r0,#1]
0009c8  f0210108          BIC      r1,r1,#8
0009cc  7041              STRB     r1,[r0,#1]
                  |L1.2510|
;;;680         
;;;681    //	if((bps[dev]._av&0x0f==0))
;;;682    //	     {
;;;683    		//SET_REG(avar_stat,0,3+bps,1);
;;;684    		//if(AV_OFF_AVT) SET_REG(avar_ind_stat,0,3+bps,1);
;;;685    //	     }
;;;686     
;;;687    	event_ptr=lc640_read_int(PTR_EVENT_LOG);
0009ce  4650              MOV      r0,r10
0009d0  f7fffffe          BL       lc640_read_int
0009d4  fa1ffb80          UXTH     r11,r0
;;;688    	event_ptr_find=event_ptr;
0009d8  465c              MOV      r4,r11
                  |L1.2522|
;;;689    	
;;;690    avar_src_hndl_lbl1: 
;;;691    
;;;692    	lc640_adr=EVENT_LOG+(event_ptr_find*32);
0009da  eb051044          ADD      r0,r5,r4,LSL #5
0009de  fa1ffa80          UXTH     r10,r0
;;;693    
;;;694         lc640_read_long_ptr(lc640_adr,data);
0009e2  4669              MOV      r1,sp
0009e4  4650              MOV      r0,r10
0009e6  f7fffffe          BL       lc640_read_long_ptr
;;;695         
;;;696         if(!((data[0]=='S')&&(data[1]==dev)&&(data[2]==avar_simbol)))
0009ea  f89d0000          LDRB     r0,[sp,#0]
0009ee  2853              CMP      r0,#0x53
0009f0  d107              BNE      |L1.2562|
0009f2  f89d0001          LDRB     r0,[sp,#1]
0009f6  42b0              CMP      r0,r6
0009f8  d103              BNE      |L1.2562|
0009fa  f89d0002          LDRB     r0,[sp,#2]
0009fe  42b8              CMP      r0,r7
000a00  d009              BEQ      |L1.2582|
                  |L1.2562|
;;;697         	{        
;;;698         	if(event_ptr_find)event_ptr_find--;
000a02  b11c              CBZ      r4,|L1.2572|
000a04  f1a40401          SUB      r4,r4,#1
000a08  b2a4              UXTH     r4,r4
000a0a  e001              B        |L1.2576|
                  |L1.2572|
;;;699         	else event_ptr_find=63;
000a0c  f04f043f          MOV      r4,#0x3f
                  |L1.2576|
;;;700         	if(event_ptr_find==event_ptr)goto avar_src_hndl_end;
000a10  455c              CMP      r4,r11
000a12  d1e2              BNE      |L1.2522|
000a14  e060              B        |L1.2776|
                  |L1.2582|
;;;701         	else goto avar_src_hndl_lbl1;
;;;702         	}
;;;703         else 
;;;704         	{
;;;705         	lc640_read_long_ptr(lc640_adr+16,data);
000a16  4669              MOV      r1,sp
000a18  f10a0010          ADD      r0,r10,#0x10
000a1c  f7fffffe          BL       lc640_read_long_ptr
;;;706         	if(!((data[0]=='A')&&(data[1]=='A')&&(data[2]=='A')&&(data[3]=='A')))
000a20  f89d0000          LDRB     r0,[sp,#0]
000a24  2841              CMP      r0,#0x41
000a26  d10b              BNE      |L1.2624|
000a28  f89d0001          LDRB     r0,[sp,#1]
000a2c  2841              CMP      r0,#0x41
000a2e  d107              BNE      |L1.2624|
000a30  f89d0002          LDRB     r0,[sp,#2]
000a34  2841              CMP      r0,#0x41
000a36  d103              BNE      |L1.2624|
000a38  f89d0003          LDRB     r0,[sp,#3]
000a3c  2841              CMP      r0,#0x41
000a3e  d009              BEQ      |L1.2644|
                  |L1.2624|
;;;707         		{        
;;;708         		if(event_ptr_find)event_ptr_find--;
000a40  b11c              CBZ      r4,|L1.2634|
000a42  f1a40401          SUB      r4,r4,#1
000a46  b2a4              UXTH     r4,r4
000a48  e001              B        |L1.2638|
                  |L1.2634|
;;;709             		else event_ptr_find=63;
000a4a  f04f043f          MOV      r4,#0x3f
                  |L1.2638|
;;;710             		if(event_ptr_find==event_ptr)goto avar_src_hndl_end;
000a4e  455c              CMP      r4,r11
000a50  d1c3              BNE      |L1.2522|
000a52  e041              B        |L1.2776|
                  |L1.2644|
;;;711         		else goto avar_src_hndl_lbl1;
;;;712         		}
;;;713    
;;;714         	}	
;;;715    
;;;716    
;;;717    	
;;;718    	data[0]=LPC_RTC->YEAR;
000a54  f8b8003c          LDRH     r0,[r8,#0x3c]
000a58  f88d0000          STRB     r0,[sp,#0]
;;;719    	data[1]=LPC_RTC->MONTH;
000a5c  f8980038          LDRB     r0,[r8,#0x38]
000a60  f88d0001          STRB     r0,[sp,#1]
;;;720    	data[2]=LPC_RTC->DOM;
000a64  f898002c          LDRB     r0,[r8,#0x2c]
000a68  f88d0002          STRB     r0,[sp,#2]
;;;721    	data[3]=0;
000a6c  f88d9003          STRB     r9,[sp,#3]
;;;722    	lc640_write_long_ptr(lc640_adr+16,data);
000a70  4669              MOV      r1,sp
000a72  f10a0010          ADD      r0,r10,#0x10
000a76  f7fffffe          BL       lc640_write_long_ptr
;;;723    
;;;724    	data[0]=LPC_RTC->HOUR;
000a7a  f8980028          LDRB     r0,[r8,#0x28]
000a7e  f88d0000          STRB     r0,[sp,#0]
;;;725    	data[1]=LPC_RTC->MIN;
000a82  f8980024          LDRB     r0,[r8,#0x24]
000a86  f88d0001          STRB     r0,[sp,#1]
;;;726    	data[2]=LPC_RTC->SEC;
000a8a  f8980020          LDRB     r0,[r8,#0x20]
000a8e  f88d0002          STRB     r0,[sp,#2]
;;;727    	data[3]=0;
000a92  f88d9003          STRB     r9,[sp,#3]
;;;728    	lc640_write_long_ptr(lc640_adr+20,data);
000a96  4669              MOV      r1,sp
000a98  f10a0014          ADD      r0,r10,#0x14
000a9c  f7fffffe          BL       lc640_write_long_ptr
;;;729    	
;;;730    	data[0]='B';
000aa0  f04f0442          MOV      r4,#0x42
000aa4  f88d4000          STRB     r4,[sp,#0]
;;;731    	data[1]='B';
000aa8  f88d4001          STRB     r4,[sp,#1]
;;;732    	data[2]='B';
000aac  f88d4002          STRB     r4,[sp,#2]
;;;733    	data[3]='B';
000ab0  f88d4003          STRB     r4,[sp,#3]
;;;734    	lc640_write_long_ptr(lc640_adr+24,data);
000ab4  4669              MOV      r1,sp
000ab6  f10a0018          ADD      r0,r10,#0x18
000aba  f7fffffe          BL       lc640_write_long_ptr
;;;735    	
;;;736    	data[0]='B';
000abe  f88d4000          STRB     r4,[sp,#0]
;;;737    	data[1]='B';
000ac2  f88d4001          STRB     r4,[sp,#1]
;;;738    	data[2]='B';
000ac6  f88d4002          STRB     r4,[sp,#2]
;;;739    	data[3]='B';
000aca  f88d4003          STRB     r4,[sp,#3]
;;;740    	lc640_write_long_ptr(lc640_adr+28,data);
000ace  4669              MOV      r1,sp
000ad0  f10a001c          ADD      r0,r10,#0x1c
000ad4  f7fffffe          BL       lc640_write_long_ptr
                  |L1.2776|
;;;741    	
;;;742    	}
;;;743    	
;;;744    avar_src_hndl_end:
;;;745    __nop();		
000ad8  bf00              NOP      
                  |L1.2778|
;;;746    }
000ada  e8bd8ff8          POP      {r3-r11,pc}
;;;747    
                          ENDP

                  wrk_mem_hndl PROC
;;;748    //-----------------------------------------------
;;;749    void wrk_mem_hndl(char b)
000ade  e92d41fc          PUSH     {r2-r8,lr}
;;;750    {
000ae2  4606              MOV      r6,r0
;;;751    char data[4];
;;;752    unsigned short event_ptr,lc640_adr/*,event_ptr_find*/,event_cnt;
;;;753    
;;;754    signed short temp_temp;
;;;755    
;;;756    if(bat[b]._Iintegr_<5) goto wrk_mem_hndl_end;
000ae4  eb060046          ADD      r0,r6,r6,LSL #1
000ae8  eb001106          ADD      r1,r0,r6,LSL #4
000aec  48ff              LDR      r0,|L1.3820|
000aee  eb000481          ADD      r4,r0,r1,LSL #2
000af2  8be0              LDRH     r0,[r4,#0x1e]
000af4  2805              CMP      r0,#5
000af6  d37e              BCC      |L1.3062|
;;;757    
;;;758    temp_temp=bat[b]._u_old[((bat_u_old_cnt+6)&0x07)]; 
000af8  48fd              LDR      r0,|L1.3824|
000afa  8800              LDRH     r0,[r0,#0]  ; bat_u_old_cnt
000afc  f1000006          ADD      r0,r0,#6
000b00  f0000007          AND      r0,r0,#7
000b04  eb040040          ADD      r0,r4,r0,LSL #1
000b08  8c00              LDRH     r0,[r0,#0x20]
000b0a  9000              STR      r0,[sp,#0]
;;;759    
;;;760    
;;;761    event_ptr=lc640_read_int(PTR_EVENT_LOG);
000b0c  f44f6760          MOV      r7,#0xe00
000b10  4638              MOV      r0,r7
000b12  f7fffffe          BL       lc640_read_int
;;;762    event_ptr++;	
000b16  f1000001          ADD      r0,r0,#1
000b1a  b285              UXTH     r5,r0
;;;763    if(event_ptr>63)event_ptr=0;	
000b1c  2d3f              CMP      r5,#0x3f
000b1e  d901              BLS      |L1.2852|
000b20  f04f0500          MOV      r5,#0
                  |L1.2852|
;;;764    lc640_write_int(PTR_EVENT_LOG,event_ptr);	
000b24  b229              SXTH     r1,r5
000b26  4638              MOV      r0,r7
000b28  f7fffffe          BL       lc640_write_int
;;;765    	
;;;766    event_cnt=lc640_read_int(CNT_EVENT_LOG);
000b2c  f6406802          MOV      r8,#0xe02
000b30  4640              MOV      r0,r8
000b32  f7fffffe          BL       lc640_read_int
000b36  b280              UXTH     r0,r0
;;;767    if(event_cnt!=63)event_cnt=event_ptr;
000b38  283f              CMP      r0,#0x3f
000b3a  d000              BEQ      |L1.2878|
000b3c  4628              MOV      r0,r5
                  |L1.2878|
;;;768    lc640_write_int(CNT_EVENT_LOG,event_cnt); 
000b3e  b201              SXTH     r1,r0
000b40  4640              MOV      r0,r8
000b42  f7fffffe          BL       lc640_write_int
;;;769    	
;;;770    lc640_adr=EVENT_LOG+(lc640_read_int(PTR_EVENT_LOG)*32);
000b46  4638              MOV      r0,r7
000b48  f7fffffe          BL       lc640_read_int
000b4c  f44f6180          MOV      r1,#0x400
000b50  eb011040          ADD      r0,r1,r0,LSL #5
000b54  b285              UXTH     r5,r0
;;;771    	
;;;772    data[0]='B';
000b56  f04f0042          MOV      r0,#0x42
000b5a  f88d0004          STRB     r0,[sp,#4]
;;;773    data[1]=b; 
000b5e  f88d6005          STRB     r6,[sp,#5]
;;;774    data[2]='W';
000b62  f04f0057          MOV      r0,#0x57
000b66  f88d0006          STRB     r0,[sp,#6]
;;;775    data[3]=0;
000b6a  f04f0600          MOV      r6,#0
000b6e  f88d6007          STRB     r6,[sp,#7]
;;;776    
;;;777    lc640_write_long_ptr(lc640_adr,data);
000b72  a901              ADD      r1,sp,#4
000b74  4628              MOV      r0,r5
000b76  f7fffffe          BL       lc640_write_long_ptr
;;;778    
;;;779    data[0]=*((char*)&bat[b]._Iintegr_);
000b7a  7fa0              LDRB     r0,[r4,#0x1e]
000b7c  f88d0004          STRB     r0,[sp,#4]
;;;780    data[1]=*(((char*)(&bat[b]._Iintegr_))+1);
000b80  7fe0              LDRB     r0,[r4,#0x1f]
000b82  f88d0005          STRB     r0,[sp,#5]
;;;781    data[2]=*((char*)&temp_temp);
000b86  f89d0000          LDRB     r0,[sp,#0]
000b8a  f88d0006          STRB     r0,[sp,#6]
;;;782    data[3]=*(((char*)(&temp_temp))+1);
000b8e  f89d0001          LDRB     r0,[sp,#1]
000b92  f88d0007          STRB     r0,[sp,#7]
;;;783    lc640_write_long_ptr(lc640_adr+4,data);
000b96  a901              ADD      r1,sp,#4
000b98  1d28              ADDS     r0,r5,#4
000b9a  f7fffffe          BL       lc640_write_long_ptr
;;;784    
;;;785    lc640_write_long_ptr(lc640_adr+8,(char*)&bat[b]._wrk_date[0]);
000b9e  f1040134          ADD      r1,r4,#0x34
000ba2  f1050008          ADD      r0,r5,#8
000ba6  f7fffffe          BL       lc640_write_long_ptr
;;;786    	
;;;787    lc640_write_long_ptr(lc640_adr+12,(char*)&bat[b]._wrk_date[1]);
000baa  f1040138          ADD      r1,r4,#0x38
000bae  f105000c          ADD      r0,r5,#0xc
000bb2  f7fffffe          BL       lc640_write_long_ptr
;;;788    
;;;789    data[0]=LPC_RTC->YEAR;
000bb6  4ccf              LDR      r4,|L1.3828|
000bb8  8ba0              LDRH     r0,[r4,#0x1c]
000bba  f88d0004          STRB     r0,[sp,#4]
;;;790    data[1]=LPC_RTC->MONTH;
000bbe  7e20              LDRB     r0,[r4,#0x18]
000bc0  f88d0005          STRB     r0,[sp,#5]
;;;791    data[2]=LPC_RTC->DOM;
000bc4  7b20              LDRB     r0,[r4,#0xc]
000bc6  f88d0006          STRB     r0,[sp,#6]
;;;792    data[3]=0;
000bca  f88d6007          STRB     r6,[sp,#7]
;;;793    lc640_write_long_ptr(lc640_adr+16,data);
000bce  a901              ADD      r1,sp,#4
000bd0  f1050010          ADD      r0,r5,#0x10
000bd4  f7fffffe          BL       lc640_write_long_ptr
;;;794    
;;;795    data[0]=LPC_RTC->HOUR;
000bd8  7a20              LDRB     r0,[r4,#8]
000bda  f88d0004          STRB     r0,[sp,#4]
;;;796    data[1]=LPC_RTC->MIN;
000bde  7920              LDRB     r0,[r4,#4]
000be0  f88d0005          STRB     r0,[sp,#5]
;;;797    data[2]=LPC_RTC->SEC;
000be4  7820              LDRB     r0,[r4,#0]
000be6  f88d0006          STRB     r0,[sp,#6]
;;;798    data[3]=0;
000bea  f88d6007          STRB     r6,[sp,#7]
;;;799    lc640_write_long_ptr(lc640_adr+20,data);
000bee  a901              ADD      r1,sp,#4
000bf0  f1050014          ADD      r0,r5,#0x14
000bf4  e000              B        |L1.3064|
                  |L1.3062|
000bf6  e001              B        |L1.3068|
                  |L1.3064|
000bf8  f7fffffe          BL       lc640_write_long_ptr
                  |L1.3068|
;;;800    	
;;;801    
;;;802    
;;;803    	
;;;804    wrk_mem_hndl_end:	
;;;805    __nop();
000bfc  bf00              NOP      
;;;806    }  
000bfe  e8bd81fc          POP      {r2-r8,pc}
;;;807    
                          ENDP

                  avar_bat_ips_hndl PROC
;;;809    //-----------------------------------------------
;;;810    void avar_bat_ips_hndl(char in)
000c02  e92d4ff8          PUSH     {r3-r11,lr}
;;;811    {
000c06  4602              MOV      r2,r0
;;;812    char data[4];
;;;813    unsigned short event_ptr,lc640_adr,event_ptr_find,event_cnt;
;;;814    
;;;815    if(in==1)
;;;816    	{
;;;817    	bat_ips._av|=1;
000c08  48bb              LDR      r0,|L1.3832|
;;;818        	ips_bat_av_stat=1;
000c0a  4cbc              LDR      r4,|L1.3836|
;;;819    	ips_bat_av_vzvod=1;
000c0c  4bbc              LDR      r3,|L1.3840|
;;;820    
;;;821    	event_ptr=lc640_read_int(PTR_EVENT_LOG);
;;;822    	event_ptr++;	
;;;823    	if(event_ptr>63)event_ptr=0;	
;;;824    	lc640_write_int(PTR_EVENT_LOG,event_ptr);	
;;;825    	
;;;826         event_cnt=lc640_read_int(CNT_EVENT_LOG);
;;;827    	if(event_cnt!=63)event_cnt=event_ptr;
;;;828    	lc640_write_int(CNT_EVENT_LOG,event_cnt); 
;;;829    	
;;;830    	lc640_adr=EVENT_LOG+(lc640_read_int(PTR_EVENT_LOG)*32);
;;;831    	
;;;832    	data[0]='B';
;;;833    	data[1]=0;
;;;834    	data[2]='C';
;;;835    	data[3]=0;
;;;836    	lc640_write_long_ptr(lc640_adr,data);
;;;837    
;;;838    	data[0]=0;
;;;839    	data[1]=0;
;;;840    	data[2]=0;
;;;841    	data[3]=0;
;;;842    	lc640_write_long_ptr(lc640_adr+4,data);
;;;843    
;;;844    	data[0]=LPC_RTC->YEAR;
000c0e  f8df82f4          LDR      r8,|L1.3844|
000c12  f890103d          LDRB     r1,[r0,#0x3d]         ;817
000c16  f04f0742          MOV      r7,#0x42              ;832
000c1a  f44f6560          MOV      r5,#0xe00             ;821
000c1e  f04f0900          MOV      r9,#0                 ;823
000c22  f44f6a80          MOV      r10,#0x400            ;830
000c26  2a01              CMP      r2,#1                 ;815
000c28  d002              BEQ      |L1.3120|
;;;845    	data[1]=LPC_RTC->MONTH;
;;;846    	data[2]=LPC_RTC->DOM;
;;;847    	data[3]=0;
;;;848    	lc640_write_long_ptr(lc640_adr+8,data);
;;;849    
;;;850    	data[0]=LPC_RTC->HOUR;
;;;851    	data[1]=LPC_RTC->MIN;
;;;852    	data[2]=LPC_RTC->SEC;
;;;853    	data[3]=0;
;;;854    	lc640_write_long_ptr(lc640_adr+12,data);
;;;855    	
;;;856    	data[0]='A';
;;;857    	data[1]='A';
;;;858    	data[2]='A';
;;;859    	data[3]='A';
;;;860    	lc640_write_long_ptr(lc640_adr+16,data);
;;;861    	
;;;862    	data[0]='A';
;;;863    	data[1]='A';
;;;864    	data[2]='A';
;;;865    	data[3]='A';
;;;866    	lc640_write_long_ptr(lc640_adr+20,data);
;;;867    	
;;;868    	data[0]='A';
;;;869    	data[1]='A';
;;;870    	data[2]='A';
;;;871    	data[3]='A';
;;;872    	lc640_write_long_ptr(lc640_adr+24,data);
;;;873    	
;;;874    	data[0]='A';
;;;875    	data[1]='A';
;;;876    	data[2]='A';
;;;877    	data[3]='A';
;;;878    	lc640_write_long_ptr(lc640_adr+28,data);
;;;879    					
;;;880    	snmp_trap_send("BAT 1 Alarm, lost",5,1,1);
;;;881    		
;;;882    	}
;;;883    
;;;884    else if(in==0)
000c2a  2a00              CMP      r2,#0
000c2c  d07e              BEQ      |L1.3372|
000c2e  e129              B        |L1.3716|
                  |L1.3120|
000c30  f0410101          ORR      r1,r1,#1              ;817
000c34  f880103d          STRB     r1,[r0,#0x3d]         ;817
000c38  f04f0001          MOV      r0,#1                 ;818
000c3c  7020              STRB     r0,[r4,#0]            ;818
000c3e  7018              STRB     r0,[r3,#0]            ;819
000c40  4628              MOV      r0,r5                 ;821
000c42  f7fffffe          BL       lc640_read_int
000c46  f1000001          ADD      r0,r0,#1              ;822
000c4a  b284              UXTH     r4,r0                 ;822
000c4c  2c3f              CMP      r4,#0x3f              ;823
000c4e  d901              BLS      |L1.3156|
000c50  f04f0400          MOV      r4,#0                 ;823
                  |L1.3156|
000c54  b221              SXTH     r1,r4                 ;824
000c56  4628              MOV      r0,r5                 ;824
000c58  f7fffffe          BL       lc640_write_int
000c5c  f6406602          MOV      r6,#0xe02             ;826
000c60  4630              MOV      r0,r6                 ;826
000c62  f7fffffe          BL       lc640_read_int
000c66  b281              UXTH     r1,r0                 ;826
000c68  293f              CMP      r1,#0x3f              ;827
000c6a  d000              BEQ      |L1.3182|
000c6c  4621              MOV      r1,r4                 ;827
                  |L1.3182|
000c6e  b209              SXTH     r1,r1                 ;828
000c70  4630              MOV      r0,r6                 ;828
000c72  f7fffffe          BL       lc640_write_int
000c76  4628              MOV      r0,r5                 ;830
000c78  f7fffffe          BL       lc640_read_int
000c7c  eb0a1040          ADD      r0,r10,r0,LSL #5      ;830
000c80  b284              UXTH     r4,r0                 ;830
000c82  f88d7000          STRB     r7,[sp,#0]            ;832
000c86  f88d9001          STRB     r9,[sp,#1]            ;833
000c8a  f04f0043          MOV      r0,#0x43              ;834
000c8e  f88d0002          STRB     r0,[sp,#2]            ;834
000c92  f88d9003          STRB     r9,[sp,#3]            ;835
000c96  4669              MOV      r1,sp                 ;836
000c98  4620              MOV      r0,r4                 ;836
000c9a  f7fffffe          BL       lc640_write_long_ptr
000c9e  f8cd9000          STR      r9,[sp,#0]            ;841
000ca2  4669              MOV      r1,sp                 ;842
000ca4  1d20              ADDS     r0,r4,#4              ;842
000ca6  f7fffffe          BL       lc640_write_long_ptr
000caa  f8b8003c          LDRH     r0,[r8,#0x3c]         ;844
000cae  f88d0000          STRB     r0,[sp,#0]            ;844
000cb2  f8980038          LDRB     r0,[r8,#0x38]         ;845
000cb6  f88d0001          STRB     r0,[sp,#1]            ;845
000cba  f898002c          LDRB     r0,[r8,#0x2c]         ;846
000cbe  f88d0002          STRB     r0,[sp,#2]            ;846
000cc2  f88d9003          STRB     r9,[sp,#3]            ;847
000cc6  4669              MOV      r1,sp                 ;848
000cc8  f1040008          ADD      r0,r4,#8              ;848
000ccc  f7fffffe          BL       lc640_write_long_ptr
000cd0  f8980028          LDRB     r0,[r8,#0x28]         ;850
000cd4  f88d0000          STRB     r0,[sp,#0]            ;850
000cd8  f8980024          LDRB     r0,[r8,#0x24]         ;851
000cdc  f88d0001          STRB     r0,[sp,#1]            ;851
000ce0  f8980020          LDRB     r0,[r8,#0x20]         ;852
000ce4  f88d0002          STRB     r0,[sp,#2]            ;852
000ce8  f88d9003          STRB     r9,[sp,#3]            ;853
000cec  4669              MOV      r1,sp                 ;854
000cee  f104000c          ADD      r0,r4,#0xc            ;854
000cf2  f7fffffe          BL       lc640_write_long_ptr
000cf6  f04f0541          MOV      r5,#0x41              ;856
000cfa  f88d5000          STRB     r5,[sp,#0]            ;856
000cfe  f88d5001          STRB     r5,[sp,#1]            ;857
000d02  f88d5002          STRB     r5,[sp,#2]            ;858
000d06  f88d5003          STRB     r5,[sp,#3]            ;859
000d0a  4669              MOV      r1,sp                 ;860
000d0c  f1040010          ADD      r0,r4,#0x10           ;860
000d10  f7fffffe          BL       lc640_write_long_ptr
000d14  f88d5000          STRB     r5,[sp,#0]            ;862
000d18  f88d5001          STRB     r5,[sp,#1]            ;863
000d1c  f88d5002          STRB     r5,[sp,#2]            ;864
000d20  f88d5003          STRB     r5,[sp,#3]            ;865
000d24  4669              MOV      r1,sp                 ;866
000d26  f1040014          ADD      r0,r4,#0x14           ;866
000d2a  e000              B        |L1.3374|
                  |L1.3372|
000d2c  e022              B        |L1.3444|
                  |L1.3374|
000d2e  f7fffffe          BL       lc640_write_long_ptr
000d32  f88d5000          STRB     r5,[sp,#0]            ;868
000d36  f88d5001          STRB     r5,[sp,#1]            ;869
000d3a  f88d5002          STRB     r5,[sp,#2]            ;870
000d3e  f88d5003          STRB     r5,[sp,#3]            ;871
000d42  4669              MOV      r1,sp                 ;872
000d44  f1040018          ADD      r0,r4,#0x18           ;872
000d48  f7fffffe          BL       lc640_write_long_ptr
000d4c  f88d5000          STRB     r5,[sp,#0]            ;874
000d50  f88d5001          STRB     r5,[sp,#1]            ;875
000d54  f88d5002          STRB     r5,[sp,#2]            ;876
000d58  f88d5003          STRB     r5,[sp,#3]            ;877
000d5c  4669              MOV      r1,sp                 ;878
000d5e  f104001c          ADD      r0,r4,#0x1c           ;878
000d62  f7fffffe          BL       lc640_write_long_ptr
000d66  2301              MOVS     r3,#1                 ;880
000d68  461a              MOV      r2,r3                 ;880
000d6a  2105              MOVS     r1,#5                 ;880
000d6c  a066              ADR      r0,|L1.3848|
000d6e  f7fffffe          BL       snmp_trap_send
000d72  e087              B        |L1.3716|
                  |L1.3444|
;;;885    	{
;;;886    	bat_ips._av&=~1;
000d74  f0210101          BIC      r1,r1,#1
000d78  f880103d          STRB     r1,[r0,#0x3d]
;;;887    	ips_bat_av_stat=0;
000d7c  f8849000          STRB     r9,[r4,#0]
;;;888    	ips_bat_av_vzvod=0;
000d80  f8839000          STRB     r9,[r3,#0]
;;;889         
;;;890    	event_ptr=lc640_read_int(PTR_EVENT_LOG);
000d84  4628              MOV      r0,r5
000d86  f7fffffe          BL       lc640_read_int
000d8a  b286              UXTH     r6,r0
;;;891    	event_ptr_find=event_ptr;
000d8c  4634              MOV      r4,r6
                  |L1.3470|
;;;892    	
;;;893    avar_bat_ips_hndl_lbl1: 
;;;894    
;;;895    	lc640_adr=EVENT_LOG+(event_ptr_find*32);
000d8e  eb0a1044          ADD      r0,r10,r4,LSL #5
000d92  b285              UXTH     r5,r0
;;;896    
;;;897         lc640_read_long_ptr(lc640_adr,data);
000d94  4669              MOV      r1,sp
000d96  4628              MOV      r0,r5
000d98  f7fffffe          BL       lc640_read_long_ptr
;;;898         
;;;899         if(!((data[0]=='B')&&(data[1]==0)&&(data[2]=='C')))
000d9c  f89d0000          LDRB     r0,[sp,#0]
000da0  2842              CMP      r0,#0x42
000da2  d106              BNE      |L1.3506|
000da4  f89d0001          LDRB     r0,[sp,#1]
000da8  b918              CBNZ     r0,|L1.3506|
000daa  f89d0002          LDRB     r0,[sp,#2]
000dae  2843              CMP      r0,#0x43
000db0  d009              BEQ      |L1.3526|
                  |L1.3506|
;;;900         	{        
;;;901         	if(event_ptr_find)event_ptr_find--;
000db2  b11c              CBZ      r4,|L1.3516|
000db4  f1a40401          SUB      r4,r4,#1
000db8  b2a4              UXTH     r4,r4
000dba  e001              B        |L1.3520|
                  |L1.3516|
;;;902         	else event_ptr_find=63;
000dbc  f04f043f          MOV      r4,#0x3f
                  |L1.3520|
;;;903         	if(event_ptr_find==event_ptr)goto avar_bat_ips_hndl_end;
000dc0  42b4              CMP      r4,r6
000dc2  d1e4              BNE      |L1.3470|
000dc4  e05e              B        |L1.3716|
                  |L1.3526|
;;;904         	else goto avar_bat_ips_hndl_lbl1;
;;;905         	}
;;;906         else 
;;;907         	{
;;;908         	lc640_read_long_ptr(lc640_adr+16,data);
000dc6  4669              MOV      r1,sp
000dc8  f1050010          ADD      r0,r5,#0x10
000dcc  f7fffffe          BL       lc640_read_long_ptr
;;;909         	if(!((data[0]=='A')&&(data[1]=='A')&&(data[2]=='A')&&(data[3]=='A')))
000dd0  f89d0000          LDRB     r0,[sp,#0]
000dd4  2841              CMP      r0,#0x41
000dd6  d10b              BNE      |L1.3568|
000dd8  f89d0001          LDRB     r0,[sp,#1]
000ddc  2841              CMP      r0,#0x41
000dde  d107              BNE      |L1.3568|
000de0  f89d0002          LDRB     r0,[sp,#2]
000de4  2841              CMP      r0,#0x41
000de6  d103              BNE      |L1.3568|
000de8  f89d0003          LDRB     r0,[sp,#3]
000dec  2841              CMP      r0,#0x41
000dee  d009              BEQ      |L1.3588|
                  |L1.3568|
;;;910         		{        
;;;911         		if(event_ptr_find)event_ptr_find--;
000df0  b11c              CBZ      r4,|L1.3578|
000df2  f1a40401          SUB      r4,r4,#1
000df6  b2a4              UXTH     r4,r4
000df8  e001              B        |L1.3582|
                  |L1.3578|
;;;912             		else event_ptr_find=63;
000dfa  f04f043f          MOV      r4,#0x3f
                  |L1.3582|
;;;913             	    	if(event_ptr_find==event_ptr)goto avar_bat_ips_hndl_end;
000dfe  42b4              CMP      r4,r6
000e00  d1c5              BNE      |L1.3470|
000e02  e03f              B        |L1.3716|
                  |L1.3588|
;;;914         		else goto avar_bat_ips_hndl_lbl1;
;;;915         		}
;;;916    
;;;917         	}
;;;918         		
;;;919    	data[0]=LPC_RTC->YEAR;
000e04  f8b8003c          LDRH     r0,[r8,#0x3c]
000e08  f88d0000          STRB     r0,[sp,#0]
;;;920    	data[1]=LPC_RTC->MONTH;
000e0c  f8980038          LDRB     r0,[r8,#0x38]
000e10  f88d0001          STRB     r0,[sp,#1]
;;;921    	data[2]=LPC_RTC->DOM;
000e14  f898002c          LDRB     r0,[r8,#0x2c]
000e18  f88d0002          STRB     r0,[sp,#2]
;;;922    	data[3]=0;
000e1c  f88d9003          STRB     r9,[sp,#3]
;;;923    	lc640_write_long_ptr(lc640_adr+16,data);
000e20  4669              MOV      r1,sp
000e22  f1050010          ADD      r0,r5,#0x10
000e26  f7fffffe          BL       lc640_write_long_ptr
;;;924    
;;;925    	data[0]=LPC_RTC->HOUR;
000e2a  f8980028          LDRB     r0,[r8,#0x28]
000e2e  f88d0000          STRB     r0,[sp,#0]
;;;926    	data[1]=LPC_RTC->MIN;
000e32  f8980024          LDRB     r0,[r8,#0x24]
000e36  f88d0001          STRB     r0,[sp,#1]
;;;927    	data[2]=LPC_RTC->SEC;
000e3a  f8980020          LDRB     r0,[r8,#0x20]
000e3e  f88d0002          STRB     r0,[sp,#2]
;;;928    	data[3]=0;
000e42  f88d9003          STRB     r9,[sp,#3]
;;;929    	lc640_write_long_ptr(lc640_adr+20,data);
000e46  4669              MOV      r1,sp
000e48  f1050014          ADD      r0,r5,#0x14
000e4c  f7fffffe          BL       lc640_write_long_ptr
;;;930    	
;;;931    	data[0]='B';
000e50  f88d7000          STRB     r7,[sp,#0]
;;;932    	data[1]='B';
000e54  f88d7001          STRB     r7,[sp,#1]
;;;933    	data[2]='B';
000e58  f88d7002          STRB     r7,[sp,#2]
;;;934    	data[3]='B';
000e5c  f88d7003          STRB     r7,[sp,#3]
;;;935    	lc640_write_long_ptr(lc640_adr+24,data);
000e60  4669              MOV      r1,sp
000e62  f1050018          ADD      r0,r5,#0x18
000e66  f7fffffe          BL       lc640_write_long_ptr
;;;936    	
;;;937    	data[0]='B';
000e6a  f88d7000          STRB     r7,[sp,#0]
;;;938    	data[1]='B';
000e6e  f88d7001          STRB     r7,[sp,#1]
;;;939    	data[2]='B';
000e72  f88d7002          STRB     r7,[sp,#2]
;;;940    	data[3]='B';
000e76  f88d7003          STRB     r7,[sp,#3]
;;;941    	lc640_write_long_ptr(lc640_adr+28,data);
000e7a  4669              MOV      r1,sp
000e7c  f105001c          ADD      r0,r5,#0x1c
000e80  f7fffffe          BL       lc640_write_long_ptr
                  |L1.3716|
;;;942    	
;;;943    
;;;944    	
;;;945    	}
;;;946    	
;;;947    avar_bat_ips_hndl_end:
;;;948    __nop();		
000e84  bf00              NOP      
                  |L1.3718|
;;;949    }
000e86  e628              B        |L1.2778|
;;;950    
                          ENDP

                  avar_bat_hndl PROC
;;;953    //-----------------------------------------------
;;;954    void avar_bat_hndl(char b, char in)
000e88  e92d4ff8          PUSH     {r3-r11,lr}
;;;955    {
000e8c  4606              MOV      r6,r0
;;;956    char data[4];
;;;957    unsigned short event_ptr,lc640_adr,event_ptr_find,event_cnt;
;;;958    
;;;959    if(in==1)
;;;960    	{
;;;961    	bat[b]._av|=1;
000e8e  4817              LDR      r0,|L1.3820|
000e90  eb060246          ADD      r2,r6,r6,LSL #1
;;;962        
;;;963    	event_ptr=lc640_read_int(PTR_EVENT_LOG);
;;;964    	event_ptr++;	
;;;965    	if(event_ptr>63)event_ptr=0;	
;;;966    	lc640_write_int(PTR_EVENT_LOG,event_ptr);	
;;;967    	
;;;968         event_cnt=lc640_read_int(CNT_EVENT_LOG);
;;;969    	if(event_cnt!=63)event_cnt=event_ptr;
;;;970    	lc640_write_int(CNT_EVENT_LOG,event_cnt); 
;;;971    	
;;;972    	lc640_adr=EVENT_LOG+(lc640_read_int(PTR_EVENT_LOG)*32);
;;;973    	
;;;974    	data[0]='B';
;;;975    	data[1]=b;
;;;976    	data[2]='C';
;;;977    	data[3]=0;
;;;978    	lc640_write_long_ptr(lc640_adr,data);
;;;979    
;;;980    	data[0]=0;
;;;981    	data[1]=0;
;;;982    	data[2]=0;
;;;983    	data[3]=0;
;;;984    	lc640_write_long_ptr(lc640_adr+4,data);
;;;985    
;;;986    	data[0]=LPC_RTC->YEAR;
000e94  f8df806c          LDR      r8,|L1.3844|
000e98  eb021206          ADD      r2,r2,r6,LSL #4       ;961
000e9c  f04f0a00          MOV      r10,#0                ;965
000ea0  f04f0942          MOV      r9,#0x42              ;974
000ea4  f44f6560          MOV      r5,#0xe00             ;963
000ea8  f44f6b80          MOV      r11,#0x400            ;972
000eac  eb000082          ADD      r0,r0,r2,LSL #2       ;961
000eb0  2901              CMP      r1,#1                 ;959
000eb2  d002              BEQ      |L1.3770|
;;;987    	data[1]=LPC_RTC->MONTH;
;;;988    	data[2]=LPC_RTC->DOM;
;;;989    	data[3]=0;
;;;990    	lc640_write_long_ptr(lc640_adr+8,data);
;;;991    
;;;992    	data[0]=LPC_RTC->HOUR;
;;;993    	data[1]=LPC_RTC->MIN;
;;;994    	data[2]=LPC_RTC->SEC;
;;;995    	data[3]=0;
;;;996    	lc640_write_long_ptr(lc640_adr+12,data);
;;;997    	
;;;998    	data[0]='A';
;;;999    	data[1]='A';
;;;1000   	data[2]='A';
;;;1001   	data[3]='A';
;;;1002   	lc640_write_long_ptr(lc640_adr+16,data);
;;;1003   	
;;;1004   	data[0]='A';
;;;1005   	data[1]='A';
;;;1006   	data[2]='A';
;;;1007   	data[3]='A';
;;;1008   	lc640_write_long_ptr(lc640_adr+20,data);
;;;1009   	
;;;1010   	data[0]='A';
;;;1011   	data[1]='A';
;;;1012   	data[2]='A';
;;;1013   	data[3]='A';
;;;1014   	lc640_write_long_ptr(lc640_adr+24,data);
;;;1015   	
;;;1016   	data[0]='A';
;;;1017   	data[1]='A';
;;;1018   	data[2]='A';
;;;1019   	data[3]='A';
;;;1020   	lc640_write_long_ptr(lc640_adr+28,data);
;;;1021   					
;;;1022   	if(b==0)
;;;1023   		{
;;;1024   		snmp_trap_send("BAT #1 Alarm, lost",5,1,1);
;;;1025   		}
;;;1026   	else if(b==1)
;;;1027   		{
;;;1028   		snmp_trap_send("BAT #2 Alarm, lost",5,2,1);
;;;1029   		} 
;;;1030   			
;;;1031   	}
;;;1032   
;;;1033   else if(in==0)
000eb4  2900              CMP      r1,#0
000eb6  d07e              BEQ      |L1.4022|
000eb8  e148              B        |L1.4428|
                  |L1.3770|
000eba  f8101f3d          LDRB     r1,[r0,#0x3d]!        ;961
000ebe  f0410101          ORR      r1,r1,#1              ;961
000ec2  7001              STRB     r1,[r0,#0]            ;961
000ec4  4628              MOV      r0,r5                 ;963
000ec6  f7fffffe          BL       lc640_read_int
000eca  f1000001          ADD      r0,r0,#1              ;964
000ece  b284              UXTH     r4,r0                 ;964
000ed0  2c3f              CMP      r4,#0x3f              ;965
000ed2  d901              BLS      |L1.3800|
000ed4  f04f0400          MOV      r4,#0                 ;965
                  |L1.3800|
000ed8  b221              SXTH     r1,r4                 ;966
000eda  4628              MOV      r0,r5                 ;966
000edc  f7fffffe          BL       lc640_write_int
000ee0  f6406702          MOV      r7,#0xe02             ;968
000ee4  4638              MOV      r0,r7                 ;968
000ee6  f7fffffe          BL       lc640_read_int
000eea  e017              B        |L1.3868|
                  |L1.3820|
                          DCD      bat
                  |L1.3824|
                          DCD      bat_u_old_cnt
                  |L1.3828|
                          DCD      0x40024020
                  |L1.3832|
                          DCD      bat_ips
                  |L1.3836|
                          DCD      ips_bat_av_stat
                  |L1.3840|
                          DCD      ips_bat_av_vzvod
                  |L1.3844|
                          DCD      0x40024000
                  |L1.3848|
000f08  42415420          DCB      "BAT ",185,"1 Alarm, lost",0
000f0c  b9312041
000f10  6c61726d
000f14  2c206c6f
000f18  737400  
000f1b  00                DCB      0
                  |L1.3868|
000f1c  b280              UXTH     r0,r0                 ;968
000f1e  283f              CMP      r0,#0x3f              ;969
000f20  d000              BEQ      |L1.3876|
000f22  4620              MOV      r0,r4                 ;969
                  |L1.3876|
000f24  b201              SXTH     r1,r0                 ;970
000f26  4638              MOV      r0,r7                 ;970
000f28  f7fffffe          BL       lc640_write_int
000f2c  4628              MOV      r0,r5                 ;972
000f2e  f7fffffe          BL       lc640_read_int
000f32  eb0b1040          ADD      r0,r11,r0,LSL #5      ;972
000f36  b284              UXTH     r4,r0                 ;972
000f38  f88d9000          STRB     r9,[sp,#0]            ;974
000f3c  f88d6001          STRB     r6,[sp,#1]            ;975
000f40  f04f0043          MOV      r0,#0x43              ;976
000f44  f88d0002          STRB     r0,[sp,#2]            ;976
000f48  f88da003          STRB     r10,[sp,#3]           ;977
000f4c  4669              MOV      r1,sp                 ;978
000f4e  4620              MOV      r0,r4                 ;978
000f50  f7fffffe          BL       lc640_write_long_ptr
000f54  f8cda000          STR      r10,[sp,#0]           ;983
000f58  4669              MOV      r1,sp                 ;984
000f5a  1d20              ADDS     r0,r4,#4              ;984
000f5c  f7fffffe          BL       lc640_write_long_ptr
000f60  f8b8003c          LDRH     r0,[r8,#0x3c]         ;986
000f64  f88d0000          STRB     r0,[sp,#0]            ;986
000f68  f8980038          LDRB     r0,[r8,#0x38]         ;987
000f6c  f88d0001          STRB     r0,[sp,#1]            ;987
000f70  f898002c          LDRB     r0,[r8,#0x2c]         ;988
000f74  f88d0002          STRB     r0,[sp,#2]            ;988
000f78  f88da003          STRB     r10,[sp,#3]           ;989
000f7c  4669              MOV      r1,sp                 ;990
000f7e  f1040008          ADD      r0,r4,#8              ;990
000f82  f7fffffe          BL       lc640_write_long_ptr
000f86  f8980028          LDRB     r0,[r8,#0x28]         ;992
000f8a  f88d0000          STRB     r0,[sp,#0]            ;992
000f8e  f8980024          LDRB     r0,[r8,#0x24]         ;993
000f92  f88d0001          STRB     r0,[sp,#1]            ;993
000f96  f8980020          LDRB     r0,[r8,#0x20]         ;994
000f9a  f88d0002          STRB     r0,[sp,#2]            ;994
000f9e  f88da003          STRB     r10,[sp,#3]           ;995
000fa2  4669              MOV      r1,sp                 ;996
000fa4  f104000c          ADD      r0,r4,#0xc            ;996
000fa8  f7fffffe          BL       lc640_write_long_ptr
000fac  f04f0541          MOV      r5,#0x41              ;998
000fb0  f88d5000          STRB     r5,[sp,#0]            ;998
000fb4  e000              B        |L1.4024|
                  |L1.4022|
000fb6  e043              B        |L1.4160|
                  |L1.4024|
000fb8  f88d5001          STRB     r5,[sp,#1]            ;999
000fbc  f88d5002          STRB     r5,[sp,#2]            ;1000
000fc0  f88d5003          STRB     r5,[sp,#3]            ;1001
000fc4  4669              MOV      r1,sp                 ;1002
000fc6  f1040010          ADD      r0,r4,#0x10           ;1002
000fca  f7fffffe          BL       lc640_write_long_ptr
000fce  f88d5000          STRB     r5,[sp,#0]            ;1004
000fd2  f88d5001          STRB     r5,[sp,#1]            ;1005
000fd6  f88d5002          STRB     r5,[sp,#2]            ;1006
000fda  f88d5003          STRB     r5,[sp,#3]            ;1007
000fde  4669              MOV      r1,sp                 ;1008
000fe0  f1040014          ADD      r0,r4,#0x14           ;1008
000fe4  f7fffffe          BL       lc640_write_long_ptr
000fe8  f88d5000          STRB     r5,[sp,#0]            ;1010
000fec  f88d5001          STRB     r5,[sp,#1]            ;1011
000ff0  f88d5002          STRB     r5,[sp,#2]            ;1012
000ff4  f88d5003          STRB     r5,[sp,#3]            ;1013
000ff8  4669              MOV      r1,sp                 ;1014
000ffa  f1040018          ADD      r0,r4,#0x18           ;1014
000ffe  f7fffffe          BL       lc640_write_long_ptr
001002  f88d5000          STRB     r5,[sp,#0]            ;1016
001006  f88d5001          STRB     r5,[sp,#1]            ;1017
00100a  f88d5002          STRB     r5,[sp,#2]            ;1018
00100e  f88d5003          STRB     r5,[sp,#3]            ;1019
001012  4669              MOV      r1,sp                 ;1020
001014  f104001c          ADD      r0,r4,#0x1c           ;1020
001018  f7fffffe          BL       lc640_write_long_ptr
00101c  b116              CBZ      r6,|L1.4132|
00101e  2e01              CMP      r6,#1                 ;1026
001020  d007              BEQ      |L1.4146|
001022  e093              B        |L1.4428|
                  |L1.4132|
001024  2301              MOVS     r3,#1                 ;1024
001026  461a              MOV      r2,r3                 ;1024
001028  2105              MOVS     r1,#5                 ;1024
00102a  a0fe              ADR      r0,|L1.5156|
00102c  f7fffffe          BL       snmp_trap_send
001030  e08c              B        |L1.4428|
                  |L1.4146|
001032  2301              MOVS     r3,#1                 ;1028
001034  2202              MOVS     r2,#2                 ;1028
001036  2105              MOVS     r1,#5                 ;1028
001038  a0ff              ADR      r0,|L1.5176|
00103a  f7fffffe          BL       snmp_trap_send
00103e  e085              B        |L1.4428|
                  |L1.4160|
;;;1034   	{
;;;1035   	bat[b]._av&=~1;
001040  f8101f3d          LDRB     r1,[r0,#0x3d]!
001044  f0210101          BIC      r1,r1,#1
001048  7001              STRB     r1,[r0,#0]
;;;1036   
;;;1037        event_ptr=lc640_read_int(PTR_EVENT_LOG);
00104a  4628              MOV      r0,r5
00104c  f7fffffe          BL       lc640_read_int
001050  b287              UXTH     r7,r0
;;;1038   	event_ptr_find=event_ptr;
001052  463c              MOV      r4,r7
                  |L1.4180|
;;;1039   	
;;;1040   avar_bat_hndl_lbl1: 
;;;1041   
;;;1042   	lc640_adr=EVENT_LOG+(event_ptr_find*32);
001054  eb0b1044          ADD      r0,r11,r4,LSL #5
001058  b285              UXTH     r5,r0
;;;1043   
;;;1044        lc640_read_long_ptr(lc640_adr,data);
00105a  4669              MOV      r1,sp
00105c  4628              MOV      r0,r5
00105e  f7fffffe          BL       lc640_read_long_ptr
;;;1045        
;;;1046        if(!((data[0]=='B')&&(data[1]==b)&&(data[2]=='C')))
001062  f89d0000          LDRB     r0,[sp,#0]
001066  2842              CMP      r0,#0x42
001068  d107              BNE      |L1.4218|
00106a  f89d0001          LDRB     r0,[sp,#1]
00106e  42b0              CMP      r0,r6
001070  d103              BNE      |L1.4218|
001072  f89d0002          LDRB     r0,[sp,#2]
001076  2843              CMP      r0,#0x43
001078  d009              BEQ      |L1.4238|
                  |L1.4218|
;;;1047        	{        
;;;1048        	if(event_ptr_find)event_ptr_find--;
00107a  b11c              CBZ      r4,|L1.4228|
00107c  f1a40401          SUB      r4,r4,#1
001080  b2a4              UXTH     r4,r4
001082  e001              B        |L1.4232|
                  |L1.4228|
;;;1049        	else event_ptr_find=63;
001084  f04f043f          MOV      r4,#0x3f
                  |L1.4232|
;;;1050        	if(event_ptr_find==event_ptr)goto avar_bat_hndl_end;
001088  42bc              CMP      r4,r7
00108a  d1e3              BNE      |L1.4180|
00108c  e05e              B        |L1.4428|
                  |L1.4238|
;;;1051        	else goto avar_bat_hndl_lbl1;
;;;1052        	}
;;;1053        else 
;;;1054        	{
;;;1055        	lc640_read_long_ptr(lc640_adr+16,data);
00108e  4669              MOV      r1,sp
001090  f1050010          ADD      r0,r5,#0x10
001094  f7fffffe          BL       lc640_read_long_ptr
;;;1056        	if(!((data[0]=='A')&&(data[1]=='A')&&(data[2]=='A')&&(data[3]=='A')))
001098  f89d0000          LDRB     r0,[sp,#0]
00109c  2841              CMP      r0,#0x41
00109e  d10b              BNE      |L1.4280|
0010a0  f89d0001          LDRB     r0,[sp,#1]
0010a4  2841              CMP      r0,#0x41
0010a6  d107              BNE      |L1.4280|
0010a8  f89d0002          LDRB     r0,[sp,#2]
0010ac  2841              CMP      r0,#0x41
0010ae  d103              BNE      |L1.4280|
0010b0  f89d0003          LDRB     r0,[sp,#3]
0010b4  2841              CMP      r0,#0x41
0010b6  d009              BEQ      |L1.4300|
                  |L1.4280|
;;;1057        		{        
;;;1058        		if(event_ptr_find)event_ptr_find--;
0010b8  b11c              CBZ      r4,|L1.4290|
0010ba  f1a40401          SUB      r4,r4,#1
0010be  b2a4              UXTH     r4,r4
0010c0  e001              B        |L1.4294|
                  |L1.4290|
;;;1059            		else event_ptr_find=63;
0010c2  f04f043f          MOV      r4,#0x3f
                  |L1.4294|
;;;1060            	    	if(event_ptr_find==event_ptr)goto avar_bat_hndl_end;
0010c6  42bc              CMP      r4,r7
0010c8  d1c4              BNE      |L1.4180|
0010ca  e03f              B        |L1.4428|
                  |L1.4300|
;;;1061        		else goto avar_bat_hndl_lbl1;
;;;1062        		}
;;;1063   
;;;1064        	}
;;;1065        		
;;;1066   	data[0]=LPC_RTC->YEAR;
0010cc  f8b8003c          LDRH     r0,[r8,#0x3c]
0010d0  f88d0000          STRB     r0,[sp,#0]
;;;1067   	data[1]=LPC_RTC->MONTH;
0010d4  f8980038          LDRB     r0,[r8,#0x38]
0010d8  f88d0001          STRB     r0,[sp,#1]
;;;1068   	data[2]=LPC_RTC->DOM;
0010dc  f898002c          LDRB     r0,[r8,#0x2c]
0010e0  f88d0002          STRB     r0,[sp,#2]
;;;1069   	data[3]=0;
0010e4  f88da003          STRB     r10,[sp,#3]
;;;1070   	lc640_write_long_ptr(lc640_adr+16,data);
0010e8  4669              MOV      r1,sp
0010ea  f1050010          ADD      r0,r5,#0x10
0010ee  f7fffffe          BL       lc640_write_long_ptr
;;;1071   
;;;1072   	data[0]=LPC_RTC->HOUR;
0010f2  f8980028          LDRB     r0,[r8,#0x28]
0010f6  f88d0000          STRB     r0,[sp,#0]
;;;1073   	data[1]=LPC_RTC->MIN;
0010fa  f8980024          LDRB     r0,[r8,#0x24]
0010fe  f88d0001          STRB     r0,[sp,#1]
;;;1074   	data[2]=LPC_RTC->SEC;
001102  f8980020          LDRB     r0,[r8,#0x20]
001106  f88d0002          STRB     r0,[sp,#2]
;;;1075   	data[3]=0;
00110a  f88da003          STRB     r10,[sp,#3]
;;;1076   	lc640_write_long_ptr(lc640_adr+20,data);
00110e  4669              MOV      r1,sp
001110  f1050014          ADD      r0,r5,#0x14
001114  f7fffffe          BL       lc640_write_long_ptr
;;;1077   	
;;;1078   	data[0]='B';
001118  f88d9000          STRB     r9,[sp,#0]
;;;1079   	data[1]='B';
00111c  f88d9001          STRB     r9,[sp,#1]
;;;1080   	data[2]='B';
001120  f88d9002          STRB     r9,[sp,#2]
;;;1081   	data[3]='B';
001124  f88d9003          STRB     r9,[sp,#3]
;;;1082   	lc640_write_long_ptr(lc640_adr+24,data);
001128  4669              MOV      r1,sp
00112a  f1050018          ADD      r0,r5,#0x18
00112e  f7fffffe          BL       lc640_write_long_ptr
;;;1083   	
;;;1084   	data[0]='B';
001132  f88d9000          STRB     r9,[sp,#0]
;;;1085   	data[1]='B';
001136  f88d9001          STRB     r9,[sp,#1]
;;;1086   	data[2]='B';
00113a  f88d9002          STRB     r9,[sp,#2]
;;;1087   	data[3]='B';
00113e  f88d9003          STRB     r9,[sp,#3]
;;;1088   	lc640_write_long_ptr(lc640_adr+28,data);
001142  4669              MOV      r1,sp
001144  f105001c          ADD      r0,r5,#0x1c
001148  f7fffffe          BL       lc640_write_long_ptr
                  |L1.4428|
;;;1089   	
;;;1090   
;;;1091   	
;;;1092   	}
;;;1093   	
;;;1094   avar_bat_hndl_end:
;;;1095   __nop();		
00114c  bf00              NOP      
                  |L1.4430|
;;;1096   }
00114e  e4c4              B        |L1.2778|
;;;1097   
                          ENDP

                  avar_bat_as_hndl PROC
;;;1098   //-----------------------------------------------
;;;1099   void avar_bat_as_hndl(char b, char in)
001150  e92d4ff8          PUSH     {r3-r11,lr}
;;;1100   {
001154  4606              MOV      r6,r0
;;;1101   char data[4];
;;;1102   unsigned short event_ptr,lc640_adr,event_ptr_find,event_cnt;
;;;1103   
;;;1104   if(in==1)
;;;1105   	{
;;;1106   	bat[b]._av|=2;
;;;1107       
;;;1108   	event_ptr=lc640_read_int(PTR_EVENT_LOG);
;;;1109   	event_ptr++;	
;;;1110   	if(event_ptr>63)event_ptr=0;	
;;;1111   	lc640_write_int(PTR_EVENT_LOG,event_ptr);	
;;;1112   	
;;;1113        event_cnt=lc640_read_int(CNT_EVENT_LOG);
;;;1114   	if(event_cnt!=63)event_cnt=event_ptr;
;;;1115   	lc640_write_int(CNT_EVENT_LOG,event_cnt); 
;;;1116   	
;;;1117   	lc640_adr=EVENT_LOG+(lc640_read_int(PTR_EVENT_LOG)*32);
;;;1118   	
;;;1119   	data[0]='B';
;;;1120   	data[1]=b;
;;;1121   	data[2]='S';
;;;1122   	data[3]=0;
;;;1123   	lc640_write_long_ptr(lc640_adr,data);
;;;1124   
;;;1125   	data[0]=0;
;;;1126   	data[1]=0;
;;;1127   	data[2]=0;
;;;1128   	data[3]=0;
;;;1129   	lc640_write_long_ptr(lc640_adr+4,data);
;;;1130   
;;;1131   	data[0]=LPC_RTC->YEAR;
001156  f8df82f4          LDR      r8,|L1.5196|
00115a  f04f0a00          MOV      r10,#0                ;1110
00115e  f04f0942          MOV      r9,#0x42              ;1119
001162  f44f6560          MOV      r5,#0xe00             ;1108
001166  f44f6b80          MOV      r11,#0x400            ;1117
00116a  2901              CMP      r1,#1                 ;1104
00116c  d002              BEQ      |L1.4468|
;;;1132   	data[1]=LPC_RTC->MONTH;
;;;1133   	data[2]=LPC_RTC->DOM;
;;;1134   	data[3]=0;
;;;1135   	lc640_write_long_ptr(lc640_adr+8,data);
;;;1136   
;;;1137   	data[0]=LPC_RTC->HOUR;
;;;1138   	data[1]=LPC_RTC->MIN;
;;;1139   	data[2]=LPC_RTC->SEC;
;;;1140   	data[3]=0;
;;;1141   	lc640_write_long_ptr(lc640_adr+12,data);
;;;1142   	
;;;1143   	data[0]='A';
;;;1144   	data[1]='A';
;;;1145   	data[2]='A';
;;;1146   	data[3]='A';
;;;1147   	lc640_write_long_ptr(lc640_adr+16,data);
;;;1148   	
;;;1149   	data[0]='A';
;;;1150   	data[1]='A';
;;;1151   	data[2]='A';
;;;1152   	data[3]='A';
;;;1153   	lc640_write_long_ptr(lc640_adr+20,data);
;;;1154   	
;;;1155   	data[0]='A';
;;;1156   	data[1]='A';
;;;1157   	data[2]='A';
;;;1158   	data[3]='A';
;;;1159   	lc640_write_long_ptr(lc640_adr+24,data);
;;;1160   	
;;;1161   	data[0]='A';
;;;1162   	data[1]='A';
;;;1163   	data[2]='A';
;;;1164   	data[3]='A';
;;;1165   	lc640_write_long_ptr(lc640_adr+28,data);				
;;;1166   
;;;1167   	if(b==0)
;;;1168   		{
;;;1169   		snmp_trap_send("BAT #1 Alarm, assimetry",5,1,2);
;;;1170   		}
;;;1171   	else if(b==1)
;;;1172   		{
;;;1173   		snmp_trap_send("BAT #2 Alarm, assimetry",5,2,2);
;;;1174   		} 
;;;1175   	
;;;1176   	}
;;;1177   
;;;1178   else if(in==0)
00116e  2900              CMP      r1,#0
001170  d07d              BEQ      |L1.4718|
001172  e131              B        |L1.5080|
                  |L1.4468|
001174  eb060046          ADD      r0,r6,r6,LSL #1       ;1106
001178  eb001106          ADD      r1,r0,r6,LSL #4       ;1106
00117c  48b4              LDR      r0,|L1.5200|
00117e  eb000081          ADD      r0,r0,r1,LSL #2       ;1106
001182  f8101f3d          LDRB     r1,[r0,#0x3d]!        ;1106
001186  f0410102          ORR      r1,r1,#2              ;1106
00118a  7001              STRB     r1,[r0,#0]            ;1106
00118c  4628              MOV      r0,r5                 ;1108
00118e  f7fffffe          BL       lc640_read_int
001192  f1000001          ADD      r0,r0,#1              ;1109
001196  b284              UXTH     r4,r0                 ;1109
001198  2c3f              CMP      r4,#0x3f              ;1110
00119a  d901              BLS      |L1.4512|
00119c  f04f0400          MOV      r4,#0                 ;1110
                  |L1.4512|
0011a0  b221              SXTH     r1,r4                 ;1111
0011a2  4628              MOV      r0,r5                 ;1111
0011a4  f7fffffe          BL       lc640_write_int
0011a8  f6406702          MOV      r7,#0xe02             ;1113
0011ac  4638              MOV      r0,r7                 ;1113
0011ae  f7fffffe          BL       lc640_read_int
0011b2  b280              UXTH     r0,r0                 ;1113
0011b4  283f              CMP      r0,#0x3f              ;1114
0011b6  d000              BEQ      |L1.4538|
0011b8  4620              MOV      r0,r4                 ;1114
                  |L1.4538|
0011ba  b201              SXTH     r1,r0                 ;1115
0011bc  4638              MOV      r0,r7                 ;1115
0011be  f7fffffe          BL       lc640_write_int
0011c2  4628              MOV      r0,r5                 ;1117
0011c4  f7fffffe          BL       lc640_read_int
0011c8  eb0b1040          ADD      r0,r11,r0,LSL #5      ;1117
0011cc  b284              UXTH     r4,r0                 ;1117
0011ce  f88d9000          STRB     r9,[sp,#0]            ;1119
0011d2  f88d6001          STRB     r6,[sp,#1]            ;1120
0011d6  f04f0053          MOV      r0,#0x53              ;1121
0011da  f88d0002          STRB     r0,[sp,#2]            ;1121
0011de  f88da003          STRB     r10,[sp,#3]           ;1122
0011e2  4669              MOV      r1,sp                 ;1123
0011e4  4620              MOV      r0,r4                 ;1123
0011e6  f7fffffe          BL       lc640_write_long_ptr
0011ea  f8cda000          STR      r10,[sp,#0]           ;1128
0011ee  4669              MOV      r1,sp                 ;1129
0011f0  1d20              ADDS     r0,r4,#4              ;1129
0011f2  f7fffffe          BL       lc640_write_long_ptr
0011f6  f8b8003c          LDRH     r0,[r8,#0x3c]         ;1131
0011fa  f88d0000          STRB     r0,[sp,#0]            ;1131
0011fe  f8980038          LDRB     r0,[r8,#0x38]         ;1132
001202  f88d0001          STRB     r0,[sp,#1]            ;1132
001206  f898002c          LDRB     r0,[r8,#0x2c]         ;1133
00120a  f88d0002          STRB     r0,[sp,#2]            ;1133
00120e  f88da003          STRB     r10,[sp,#3]           ;1134
001212  4669              MOV      r1,sp                 ;1135
001214  f1040008          ADD      r0,r4,#8              ;1135
001218  f7fffffe          BL       lc640_write_long_ptr
00121c  f8980028          LDRB     r0,[r8,#0x28]         ;1137
001220  f88d0000          STRB     r0,[sp,#0]            ;1137
001224  f8980024          LDRB     r0,[r8,#0x24]         ;1138
001228  f88d0001          STRB     r0,[sp,#1]            ;1138
00122c  f8980020          LDRB     r0,[r8,#0x20]         ;1139
001230  f88d0002          STRB     r0,[sp,#2]            ;1139
001234  f88da003          STRB     r10,[sp,#3]           ;1140
001238  4669              MOV      r1,sp                 ;1141
00123a  f104000c          ADD      r0,r4,#0xc            ;1141
00123e  f7fffffe          BL       lc640_write_long_ptr
001242  f04f0541          MOV      r5,#0x41              ;1143
001246  f88d5000          STRB     r5,[sp,#0]            ;1143
00124a  f88d5001          STRB     r5,[sp,#1]            ;1144
00124e  f88d5002          STRB     r5,[sp,#2]            ;1145
001252  f88d5003          STRB     r5,[sp,#3]            ;1146
001256  4669              MOV      r1,sp                 ;1147
001258  f1040010          ADD      r0,r4,#0x10           ;1147
00125c  f7fffffe          BL       lc640_write_long_ptr
001260  f88d5000          STRB     r5,[sp,#0]            ;1149
001264  f88d5001          STRB     r5,[sp,#1]            ;1150
001268  f88d5002          STRB     r5,[sp,#2]            ;1151
00126c  e000              B        |L1.4720|
                  |L1.4718|
00126e  e032              B        |L1.4822|
                  |L1.4720|
001270  f88d5003          STRB     r5,[sp,#3]            ;1152
001274  4669              MOV      r1,sp                 ;1153
001276  f1040014          ADD      r0,r4,#0x14           ;1153
00127a  f7fffffe          BL       lc640_write_long_ptr
00127e  f88d5000          STRB     r5,[sp,#0]            ;1155
001282  f88d5001          STRB     r5,[sp,#1]            ;1156
001286  f88d5002          STRB     r5,[sp,#2]            ;1157
00128a  f88d5003          STRB     r5,[sp,#3]            ;1158
00128e  4669              MOV      r1,sp                 ;1159
001290  f1040018          ADD      r0,r4,#0x18           ;1159
001294  f7fffffe          BL       lc640_write_long_ptr
001298  f88d5000          STRB     r5,[sp,#0]            ;1161
00129c  f88d5001          STRB     r5,[sp,#1]            ;1162
0012a0  f88d5002          STRB     r5,[sp,#2]            ;1163
0012a4  f88d5003          STRB     r5,[sp,#3]            ;1164
0012a8  4669              MOV      r1,sp                 ;1165
0012aa  f104001c          ADD      r0,r4,#0x1c           ;1165
0012ae  f7fffffe          BL       lc640_write_long_ptr
0012b2  b116              CBZ      r6,|L1.4794|
0012b4  2e01              CMP      r6,#1                 ;1171
0012b6  d007              BEQ      |L1.4808|
0012b8  e08e              B        |L1.5080|
                  |L1.4794|
0012ba  2302              MOVS     r3,#2                 ;1169
0012bc  2201              MOVS     r2,#1                 ;1169
0012be  2105              MOVS     r1,#5                 ;1169
0012c0  a064              ADR      r0,|L1.5204|
0012c2  f7fffffe          BL       snmp_trap_send
0012c6  e087              B        |L1.5080|
                  |L1.4808|
0012c8  2302              MOVS     r3,#2                 ;1173
0012ca  461a              MOV      r2,r3                 ;1173
0012cc  2105              MOVS     r1,#5                 ;1173
0012ce  a067              ADR      r0,|L1.5228|
0012d0  f7fffffe          BL       snmp_trap_send
0012d4  e080              B        |L1.5080|
                  |L1.4822|
;;;1179   	{
;;;1180   	//bat[b]._av=0;
;;;1181   
;;;1182        event_ptr=lc640_read_int(PTR_EVENT_LOG);
0012d6  4628              MOV      r0,r5
0012d8  f7fffffe          BL       lc640_read_int
0012dc  b287              UXTH     r7,r0
;;;1183   	event_ptr_find=event_ptr;
0012de  463c              MOV      r4,r7
                  |L1.4832|
;;;1184   	
;;;1185   avar_bat_as_hndl_lbl1: 
;;;1186   
;;;1187   	lc640_adr=EVENT_LOG+(event_ptr_find*32);
0012e0  eb0b1044          ADD      r0,r11,r4,LSL #5
0012e4  b285              UXTH     r5,r0
;;;1188   
;;;1189        lc640_read_long_ptr(lc640_adr,data);
0012e6  4669              MOV      r1,sp
0012e8  4628              MOV      r0,r5
0012ea  f7fffffe          BL       lc640_read_long_ptr
;;;1190        
;;;1191        if(!((data[0]=='B')&&(data[1]==b)&&(data[2]=='C')))
0012ee  f89d0000          LDRB     r0,[sp,#0]
0012f2  2842              CMP      r0,#0x42
0012f4  d107              BNE      |L1.4870|
0012f6  f89d0001          LDRB     r0,[sp,#1]
0012fa  42b0              CMP      r0,r6
0012fc  d103              BNE      |L1.4870|
0012fe  f89d0002          LDRB     r0,[sp,#2]
001302  2843              CMP      r0,#0x43
001304  d009              BEQ      |L1.4890|
                  |L1.4870|
;;;1192        	{        
;;;1193        	if(event_ptr_find)event_ptr_find--;
001306  b11c              CBZ      r4,|L1.4880|
001308  f1a40401          SUB      r4,r4,#1
00130c  b2a4              UXTH     r4,r4
00130e  e001              B        |L1.4884|
                  |L1.4880|
;;;1194        	else event_ptr_find=63;
001310  f04f043f          MOV      r4,#0x3f
                  |L1.4884|
;;;1195        	if(event_ptr_find==event_ptr)goto avar_bat_as_hndl_end;
001314  42bc              CMP      r4,r7
001316  d1e3              BNE      |L1.4832|
001318  e05e              B        |L1.5080|
                  |L1.4890|
;;;1196        	else goto avar_bat_as_hndl_lbl1;
;;;1197        	}
;;;1198        else 
;;;1199        	{
;;;1200        	lc640_read_long_ptr(lc640_adr+16,data);
00131a  4669              MOV      r1,sp
00131c  f1050010          ADD      r0,r5,#0x10
001320  f7fffffe          BL       lc640_read_long_ptr
;;;1201        	if(!((data[0]=='A')&&(data[1]=='A')&&(data[2]=='A')&&(data[3]=='A')))
001324  f89d0000          LDRB     r0,[sp,#0]
001328  2841              CMP      r0,#0x41
00132a  d10b              BNE      |L1.4932|
00132c  f89d0001          LDRB     r0,[sp,#1]
001330  2841              CMP      r0,#0x41
001332  d107              BNE      |L1.4932|
001334  f89d0002          LDRB     r0,[sp,#2]
001338  2841              CMP      r0,#0x41
00133a  d103              BNE      |L1.4932|
00133c  f89d0003          LDRB     r0,[sp,#3]
001340  2841              CMP      r0,#0x41
001342  d009              BEQ      |L1.4952|
                  |L1.4932|
;;;1202        		{        
;;;1203        		if(event_ptr_find)event_ptr_find--;
001344  b11c              CBZ      r4,|L1.4942|
001346  f1a40401          SUB      r4,r4,#1
00134a  b2a4              UXTH     r4,r4
00134c  e001              B        |L1.4946|
                  |L1.4942|
;;;1204            		else event_ptr_find=63;
00134e  f04f043f          MOV      r4,#0x3f
                  |L1.4946|
;;;1205            	    	if(event_ptr_find==event_ptr)goto avar_bat_as_hndl_end;
001352  42bc              CMP      r4,r7
001354  d1c4              BNE      |L1.4832|
001356  e03f              B        |L1.5080|
                  |L1.4952|
;;;1206        		else goto avar_bat_as_hndl_lbl1;
;;;1207        		}
;;;1208   
;;;1209        	}
;;;1210        		
;;;1211   	data[0]=LPC_RTC->YEAR;
001358  f8b8003c          LDRH     r0,[r8,#0x3c]
00135c  f88d0000          STRB     r0,[sp,#0]
;;;1212   	data[1]=LPC_RTC->MONTH;
001360  f8980038          LDRB     r0,[r8,#0x38]
001364  f88d0001          STRB     r0,[sp,#1]
;;;1213   	data[2]=LPC_RTC->DOM;
001368  f898002c          LDRB     r0,[r8,#0x2c]
00136c  f88d0002          STRB     r0,[sp,#2]
;;;1214   	data[3]=0;
001370  f88da003          STRB     r10,[sp,#3]
;;;1215   	lc640_write_long_ptr(lc640_adr+16,data);
001374  4669              MOV      r1,sp
001376  f1050010          ADD      r0,r5,#0x10
00137a  f7fffffe          BL       lc640_write_long_ptr
;;;1216   
;;;1217   	data[0]=LPC_RTC->HOUR;
00137e  f8980028          LDRB     r0,[r8,#0x28]
001382  f88d0000          STRB     r0,[sp,#0]
;;;1218   	data[1]=LPC_RTC->MIN;
001386  f8980024          LDRB     r0,[r8,#0x24]
00138a  f88d0001          STRB     r0,[sp,#1]
;;;1219   	data[2]=LPC_RTC->SEC;
00138e  f8980020          LDRB     r0,[r8,#0x20]
001392  f88d0002          STRB     r0,[sp,#2]
;;;1220   	data[3]=0;
001396  f88da003          STRB     r10,[sp,#3]
;;;1221   	lc640_write_long_ptr(lc640_adr+20,data);
00139a  4669              MOV      r1,sp
00139c  f1050014          ADD      r0,r5,#0x14
0013a0  f7fffffe          BL       lc640_write_long_ptr
;;;1222   	
;;;1223   	data[0]='B';
0013a4  f88d9000          STRB     r9,[sp,#0]
;;;1224   	data[1]='B';
0013a8  f88d9001          STRB     r9,[sp,#1]
;;;1225   	data[2]='B';
0013ac  f88d9002          STRB     r9,[sp,#2]
;;;1226   	data[3]='B';
0013b0  f88d9003          STRB     r9,[sp,#3]
;;;1227   	lc640_write_long_ptr(lc640_adr+24,data);
0013b4  4669              MOV      r1,sp
0013b6  f1050018          ADD      r0,r5,#0x18
0013ba  f7fffffe          BL       lc640_write_long_ptr
;;;1228   	
;;;1229   	data[0]='B';
0013be  f88d9000          STRB     r9,[sp,#0]
;;;1230   	data[1]='B';
0013c2  f88d9001          STRB     r9,[sp,#1]
;;;1231   	data[2]='B';
0013c6  f88d9002          STRB     r9,[sp,#2]
;;;1232   	data[3]='B';
0013ca  f88d9003          STRB     r9,[sp,#3]
;;;1233   	lc640_write_long_ptr(lc640_adr+28,data);
0013ce  4669              MOV      r1,sp
0013d0  f105001c          ADD      r0,r5,#0x1c
0013d4  f7fffffe          BL       lc640_write_long_ptr
                  |L1.5080|
;;;1234   	
;;;1235   
;;;1236   	
;;;1237   	}
;;;1238   	
;;;1239   avar_bat_as_hndl_end:
;;;1240   __nop();		
0013d8  bf00              NOP      
;;;1241   }
0013da  e554              B        |L1.3718|
;;;1242   
                          ENDP

                  ke_mem_hndl PROC
;;;1244   //-----------------------------------------------
;;;1245   void ke_mem_hndl(char b,unsigned short in)
0013dc  b5f3              PUSH     {r0,r1,r4-r7,lr}
;;;1246   {
0013de  b083              SUB      sp,sp,#0xc
0013e0  4605              MOV      r5,r0
;;;1247   char data[4];
;;;1248   unsigned int event_ptr=0,lc640_adr/*,event_ptr_find*/,event_cnt;
;;;1249   //unsigned char temp,temp_;
;;;1250   //unsigned int tempUI;
;;;1251   //unsigned long tempUL; 
;;;1252   signed temp_temp;
;;;1253   
;;;1254   temp_temp=bat[b]._u_old[bat_u_old_cnt+1]; 
0013e2  eb050045          ADD      r0,r5,r5,LSL #1
0013e6  491a              LDR      r1,|L1.5200|
0013e8  eb001005          ADD      r0,r0,r5,LSL #4
0013ec  eb010180          ADD      r1,r1,r0,LSL #2
0013f0  4824              LDR      r0,|L1.5252|
0013f2  f9b00000          LDRSH    r0,[r0,#0]  ; bat_u_old_cnt
0013f6  f1000001          ADD      r0,r0,#1
0013fa  eb010040          ADD      r0,r1,r0,LSL #1
0013fe  f9b00020          LDRSH    r0,[r0,#0x20]
001402  9001              STR      r0,[sp,#4]
;;;1255   
;;;1256   event_ptr=lc640_read_int(PTR_EVENT_LOG);
001404  f44f6660          MOV      r6,#0xe00
001408  4630              MOV      r0,r6
00140a  f7fffffe          BL       lc640_read_int
;;;1257   event_ptr++;	
00140e  f1000001          ADD      r0,r0,#1
001412  4604              MOV      r4,r0
;;;1258   if(event_ptr>63)event_ptr=0;	
001414  2c3f              CMP      r4,#0x3f
001416  d901              BLS      |L1.5148|
001418  f04f0400          MOV      r4,#0
                  |L1.5148|
;;;1259   lc640_write_int(PTR_EVENT_LOG,event_ptr);	
00141c  b221              SXTH     r1,r4
00141e  4630              MOV      r0,r6
001420  e032              B        |L1.5256|
001422  0000              DCW      0x0000
                  |L1.5156|
001424  42415420          DCB      "BAT #1 Alarm, lost",0
001428  23312041
00142c  6c61726d
001430  2c206c6f
001434  737400  
001437  00                DCB      0
                  |L1.5176|
001438  42415420          DCB      "BAT #2 Alarm, lost",0
00143c  23322041
001440  6c61726d
001444  2c206c6f
001448  737400  
00144b  00                DCB      0
                  |L1.5196|
                          DCD      0x40024000
                  |L1.5200|
                          DCD      bat
                  |L1.5204|
001454  42415420          DCB      "BAT #1 Alarm, assimetry",0
001458  23312041
00145c  6c61726d
001460  2c206173
001464  73696d65
001468  74727900
                  |L1.5228|
00146c  42415420          DCB      "BAT #2 Alarm, assimetry",0
001470  23322041
001474  6c61726d
001478  2c206173
00147c  73696d65
001480  74727900
                  |L1.5252|
                          DCD      bat_u_old_cnt
                  |L1.5256|
001488  f7fffffe          BL       lc640_write_int
;;;1260   	
;;;1261   event_cnt=lc640_read_int(CNT_EVENT_LOG);
00148c  f6406702          MOV      r7,#0xe02
001490  4638              MOV      r0,r7
001492  f7fffffe          BL       lc640_read_int
;;;1262   if(event_cnt!=63)event_cnt=event_ptr;
001496  283f              CMP      r0,#0x3f
001498  d000              BEQ      |L1.5276|
00149a  4620              MOV      r0,r4
                  |L1.5276|
;;;1263   lc640_write_int(CNT_EVENT_LOG,event_cnt); 
00149c  b201              SXTH     r1,r0
00149e  4638              MOV      r0,r7
0014a0  f7fffffe          BL       lc640_write_int
;;;1264   	
;;;1265   lc640_adr=EVENT_LOG+(lc640_read_int(PTR_EVENT_LOG)*32);
0014a4  4630              MOV      r0,r6
0014a6  f7fffffe          BL       lc640_read_int
0014aa  f44f6180          MOV      r1,#0x400
0014ae  eb011440          ADD      r4,r1,r0,LSL #5
;;;1266   	
;;;1267   data[0]='B';
0014b2  f04f0042          MOV      r0,#0x42
0014b6  f88d0008          STRB     r0,[sp,#8]
;;;1268   data[1]=b; 
0014ba  f88d5009          STRB     r5,[sp,#9]
;;;1269   data[2]='K';
0014be  f04f004b          MOV      r0,#0x4b
0014c2  f88d000a          STRB     r0,[sp,#0xa]
;;;1270   data[3]=0;
0014c6  f04f0600          MOV      r6,#0
0014ca  f88d600b          STRB     r6,[sp,#0xb]
;;;1271   
;;;1272   lc640_write_long_ptr(lc640_adr,data);
0014ce  a902              ADD      r1,sp,#8
0014d0  4620              MOV      r0,r4
0014d2  f7fffffe          BL       lc640_write_long_ptr
;;;1273   
;;;1274   data[0]=*((char*)&in);
0014d6  f89d0010          LDRB     r0,[sp,#0x10]
0014da  f88d0008          STRB     r0,[sp,#8]
;;;1275   data[1]=*(((char*)(&in))+1);
0014de  f89d0011          LDRB     r0,[sp,#0x11]
0014e2  f88d0009          STRB     r0,[sp,#9]
;;;1276   data[2]=*((char*)&temp_temp);
0014e6  f89d0004          LDRB     r0,[sp,#4]
0014ea  f88d000a          STRB     r0,[sp,#0xa]
;;;1277   data[3]=*(((char*)(&temp_temp))+1);
0014ee  f89d0005          LDRB     r0,[sp,#5]
0014f2  f88d000b          STRB     r0,[sp,#0xb]
;;;1278   lc640_write_long_ptr(lc640_adr+4,data);
0014f6  a902              ADD      r1,sp,#8
0014f8  1d20              ADDS     r0,r4,#4
0014fa  f7fffffe          BL       lc640_write_long_ptr
;;;1279   
;;;1280   ke_date[0]=lc640_read_long(EE_SPC_KE_DATE0);
0014fe  f44f70fc          MOV      r0,#0x1f8
001502  f7fffffe          BL       lc640_read_long
001506  4da8              LDR      r5,|L1.6056|
001508  6028              STR      r0,[r5,#0]  ; ke_date
;;;1281   lc640_write_long_ptr(lc640_adr+8,(char*)&ke_date[0]);
00150a  4629              MOV      r1,r5
00150c  f1040008          ADD      r0,r4,#8
001510  f7fffffe          BL       lc640_write_long_ptr
;;;1282   ke_date[1]=lc640_read_long(EE_SPC_KE_DATE1);	
001514  f44f70fe          MOV      r0,#0x1fc
001518  f7fffffe          BL       lc640_read_long
00151c  6068              STR      r0,[r5,#4]  ; ke_date
;;;1283   lc640_write_long_ptr(lc640_adr+12,(char*)&ke_date[1]);
00151e  1d29              ADDS     r1,r5,#4
001520  f104000c          ADD      r0,r4,#0xc
001524  f7fffffe          BL       lc640_write_long_ptr
;;;1284   
;;;1285   data[0]=LPC_RTC->YEAR;
001528  4da0              LDR      r5,|L1.6060|
00152a  8ba8              LDRH     r0,[r5,#0x1c]
00152c  f88d0008          STRB     r0,[sp,#8]
;;;1286   data[1]=LPC_RTC->MONTH;
001530  7e28              LDRB     r0,[r5,#0x18]
001532  f88d0009          STRB     r0,[sp,#9]
;;;1287   data[2]=LPC_RTC->DOM;
001536  7b28              LDRB     r0,[r5,#0xc]
001538  f88d000a          STRB     r0,[sp,#0xa]
;;;1288   data[3]=0;
00153c  f88d600b          STRB     r6,[sp,#0xb]
;;;1289   lc640_write_long_ptr(lc640_adr+16,data);
001540  a902              ADD      r1,sp,#8
001542  f1040010          ADD      r0,r4,#0x10
001546  f7fffffe          BL       lc640_write_long_ptr
;;;1290   
;;;1291   data[0]=LPC_RTC->HOUR;
00154a  7a28              LDRB     r0,[r5,#8]
00154c  f88d0008          STRB     r0,[sp,#8]
;;;1292   data[1]=LPC_RTC->MIN;
001550  7928              LDRB     r0,[r5,#4]
001552  f88d0009          STRB     r0,[sp,#9]
;;;1293   data[2]=LPC_RTC->SEC;
001556  7828              LDRB     r0,[r5,#0]
001558  f88d000a          STRB     r0,[sp,#0xa]
;;;1294   data[3]=0;
00155c  f88d600b          STRB     r6,[sp,#0xb]
;;;1295   lc640_write_long_ptr(lc640_adr+20,data);
001560  a902              ADD      r1,sp,#8
001562  f1040014          ADD      r0,r4,#0x14
001566  f7fffffe          BL       lc640_write_long_ptr
;;;1296    
;;;1297   }
00156a  b005              ADD      sp,sp,#0x14
00156c  bdf0              POP      {r4-r7,pc}
;;;1298   
                          ENDP

                  vz_mem_hndl PROC
;;;1300   //-----------------------------------------------
;;;1301   void vz_mem_hndl(unsigned short in)
00156e  e92d4ff8          PUSH     {r3-r11,lr}
;;;1302   {
;;;1303   char data[4];
;;;1304   unsigned int event_ptr=0,lc640_adr,event_ptr_find=0,event_cnt;
001572  f04f0600          MOV      r6,#0
001576  4634              MOV      r4,r6
;;;1305   //char avar_simbol;
;;;1306   
;;;1307   if(in==1)
;;;1308   	{
;;;1309   	event_ptr=lc640_read_int(PTR_EVENT_LOG);
;;;1310   	event_ptr++;	
;;;1311   	if(event_ptr>63)event_ptr=0;	
;;;1312   	lc640_write_int(PTR_EVENT_LOG,event_ptr);	
;;;1313   	
;;;1314        event_cnt=lc640_read_int(CNT_EVENT_LOG);
;;;1315   	if(event_cnt!=63)event_cnt=event_ptr;
;;;1316   	lc640_write_int(CNT_EVENT_LOG,event_cnt); 
;;;1317   	
;;;1318   	lc640_adr=EVENT_LOG+(lc640_read_int(PTR_EVENT_LOG)*32);
;;;1319   	
;;;1320   	data[0]='B';
;;;1321   	data[1]=0; 
;;;1322   	data[2]='Z';
;;;1323   	data[3]=0;
;;;1324   	lc640_write_long_ptr(lc640_adr,data);
;;;1325   
;;;1326   	data[0]=0;
;;;1327   	data[1]=0;
;;;1328   	data[2]=0;
;;;1329   	data[3]=0;
;;;1330   	lc640_write_long_ptr(lc640_adr+4,data);
;;;1331   
;;;1332   	data[0]=LPC_RTC->YEAR;
001578  f8df8234          LDR      r8,|L1.6064|
00157c  46a1              MOV      r9,r4                 ;1304
00157e  f04f0742          MOV      r7,#0x42              ;1320
001582  f44f6a80          MOV      r10,#0x400            ;1318
001586  2801              CMP      r0,#1                 ;1307
001588  d002              BEQ      |L1.5520|
;;;1333   	data[1]=LPC_RTC->MONTH;
;;;1334   	data[2]=LPC_RTC->DOM;
;;;1335   	data[3]=0;
;;;1336   	lc640_write_long_ptr(lc640_adr+8,data);
;;;1337   
;;;1338   	data[0]=LPC_RTC->HOUR;
;;;1339   	data[1]=LPC_RTC->MIN;
;;;1340   	data[2]=LPC_RTC->SEC;
;;;1341   	data[3]=0;
;;;1342   	lc640_write_long_ptr(lc640_adr+12,data);
;;;1343   	
;;;1344   	data[0]='A';
;;;1345   	data[1]='A';
;;;1346   	data[2]='A';
;;;1347   	data[3]='A';
;;;1348   	lc640_write_long_ptr(lc640_adr+16,data);
;;;1349   	
;;;1350   	data[0]='A';
;;;1351   	data[1]='A';
;;;1352   	data[2]='A';
;;;1353   	data[3]='A';
;;;1354   	lc640_write_long_ptr(lc640_adr+20,data);
;;;1355   	
;;;1356   	data[0]='A';
;;;1357   	data[1]='A';
;;;1358   	data[2]='A';
;;;1359   	data[3]='A';
;;;1360   	lc640_write_long_ptr(lc640_adr+24,data);
;;;1361   	
;;;1362   	data[0]='A';
;;;1363   	data[1]='A';
;;;1364   	data[2]='A';
;;;1365   	data[3]='A';
;;;1366   	lc640_write_long_ptr(lc640_adr+28,data);		
;;;1367    	
;;;1368   	}
;;;1369   
;;;1370   else if(in==0)
00158a  2800              CMP      r0,#0
00158c  d07e              BEQ      |L1.5772|
00158e  e108              B        |L1.6050|
                  |L1.5520|
001590  f44f6560          MOV      r5,#0xe00             ;1309
001594  4628              MOV      r0,r5                 ;1309
001596  f7fffffe          BL       lc640_read_int
00159a  f1000001          ADD      r0,r0,#1              ;1310
00159e  4604              MOV      r4,r0                 ;1310
0015a0  2c3f              CMP      r4,#0x3f              ;1311
0015a2  d901              BLS      |L1.5544|
0015a4  f04f0400          MOV      r4,#0                 ;1311
                  |L1.5544|
0015a8  b221              SXTH     r1,r4                 ;1312
0015aa  4628              MOV      r0,r5                 ;1312
0015ac  f7fffffe          BL       lc640_write_int
0015b0  f6406602          MOV      r6,#0xe02             ;1314
0015b4  4630              MOV      r0,r6                 ;1314
0015b6  f7fffffe          BL       lc640_read_int
0015ba  283f              CMP      r0,#0x3f              ;1315
0015bc  d000              BEQ      |L1.5568|
0015be  4620              MOV      r0,r4                 ;1315
                  |L1.5568|
0015c0  b201              SXTH     r1,r0                 ;1316
0015c2  4630              MOV      r0,r6                 ;1316
0015c4  f7fffffe          BL       lc640_write_int
0015c8  4628              MOV      r0,r5                 ;1318
0015ca  f7fffffe          BL       lc640_read_int
0015ce  eb0a1440          ADD      r4,r10,r0,LSL #5      ;1318
0015d2  f88d7000          STRB     r7,[sp,#0]            ;1320
0015d6  f88d9001          STRB     r9,[sp,#1]            ;1321
0015da  f04f005a          MOV      r0,#0x5a              ;1322
0015de  f88d0002          STRB     r0,[sp,#2]            ;1322
0015e2  f88d9003          STRB     r9,[sp,#3]            ;1323
0015e6  4669              MOV      r1,sp                 ;1324
0015e8  4620              MOV      r0,r4                 ;1324
0015ea  f7fffffe          BL       lc640_write_long_ptr
0015ee  f8cd9000          STR      r9,[sp,#0]            ;1329
0015f2  4669              MOV      r1,sp                 ;1330
0015f4  1d20              ADDS     r0,r4,#4              ;1330
0015f6  f7fffffe          BL       lc640_write_long_ptr
0015fa  f8b8003c          LDRH     r0,[r8,#0x3c]         ;1332
0015fe  f88d0000          STRB     r0,[sp,#0]            ;1332
001602  f8980038          LDRB     r0,[r8,#0x38]         ;1333
001606  f88d0001          STRB     r0,[sp,#1]            ;1333
00160a  f898002c          LDRB     r0,[r8,#0x2c]         ;1334
00160e  f88d0002          STRB     r0,[sp,#2]            ;1334
001612  f88d9003          STRB     r9,[sp,#3]            ;1335
001616  4669              MOV      r1,sp                 ;1336
001618  f1040008          ADD      r0,r4,#8              ;1336
00161c  f7fffffe          BL       lc640_write_long_ptr
001620  f8980028          LDRB     r0,[r8,#0x28]         ;1338
001624  f88d0000          STRB     r0,[sp,#0]            ;1338
001628  f8980024          LDRB     r0,[r8,#0x24]         ;1339
00162c  f88d0001          STRB     r0,[sp,#1]            ;1339
001630  f8980020          LDRB     r0,[r8,#0x20]         ;1340
001634  f88d0002          STRB     r0,[sp,#2]            ;1340
001638  f88d9003          STRB     r9,[sp,#3]            ;1341
00163c  4669              MOV      r1,sp                 ;1342
00163e  f104000c          ADD      r0,r4,#0xc            ;1342
001642  f7fffffe          BL       lc640_write_long_ptr
001646  f04f0541          MOV      r5,#0x41              ;1344
00164a  f88d5000          STRB     r5,[sp,#0]            ;1344
00164e  f88d5001          STRB     r5,[sp,#1]            ;1345
001652  f88d5002          STRB     r5,[sp,#2]            ;1346
001656  f88d5003          STRB     r5,[sp,#3]            ;1347
00165a  4669              MOV      r1,sp                 ;1348
00165c  f1040010          ADD      r0,r4,#0x10           ;1348
001660  f7fffffe          BL       lc640_write_long_ptr
001664  f88d5000          STRB     r5,[sp,#0]            ;1350
001668  f88d5001          STRB     r5,[sp,#1]            ;1351
00166c  f88d5002          STRB     r5,[sp,#2]            ;1352
001670  f88d5003          STRB     r5,[sp,#3]            ;1353
001674  4669              MOV      r1,sp                 ;1354
001676  f1040014          ADD      r0,r4,#0x14           ;1354
00167a  f7fffffe          BL       lc640_write_long_ptr
00167e  f88d5000          STRB     r5,[sp,#0]            ;1356
001682  f88d5001          STRB     r5,[sp,#1]            ;1357
001686  f88d5002          STRB     r5,[sp,#2]            ;1358
00168a  e000              B        |L1.5774|
                  |L1.5772|
00168c  e014              B        |L1.5816|
                  |L1.5774|
00168e  f88d5003          STRB     r5,[sp,#3]            ;1359
001692  4669              MOV      r1,sp                 ;1360
001694  f1040018          ADD      r0,r4,#0x18           ;1360
001698  f7fffffe          BL       lc640_write_long_ptr
00169c  f88d5000          STRB     r5,[sp,#0]            ;1362
0016a0  f88d5001          STRB     r5,[sp,#1]            ;1363
0016a4  f88d5002          STRB     r5,[sp,#2]            ;1364
0016a8  f88d5003          STRB     r5,[sp,#3]            ;1365
0016ac  4669              MOV      r1,sp                 ;1366
0016ae  f104001c          ADD      r0,r4,#0x1c           ;1366
0016b2  f7fffffe          BL       lc640_write_long_ptr
0016b6  e074              B        |L1.6050|
                  |L1.5816|
;;;1371   	{      
;;;1372        
;;;1373   vz_mem_hndl_lbl1: 
;;;1374   
;;;1375   	lc640_adr=EVENT_LOG+(event_ptr_find*32);
0016b8  eb0a1544          ADD      r5,r10,r4,LSL #5
;;;1376   
;;;1377        lc640_read_long_ptr(lc640_adr,data);
0016bc  4669              MOV      r1,sp
0016be  4628              MOV      r0,r5
0016c0  f7fffffe          BL       lc640_read_long_ptr
;;;1378        
;;;1379        if(!((data[0]=='B')&&(data[2]=='Z')))
0016c4  f89d0000          LDRB     r0,[sp,#0]
0016c8  2842              CMP      r0,#0x42
0016ca  d103              BNE      |L1.5844|
0016cc  f89d0002          LDRB     r0,[sp,#2]
0016d0  285a              CMP      r0,#0x5a
0016d2  d008              BEQ      |L1.5862|
                  |L1.5844|
;;;1380        	{        
;;;1381        	if(event_ptr_find)event_ptr_find--;
0016d4  b114              CBZ      r4,|L1.5852|
0016d6  f1a40401          SUB      r4,r4,#1
0016da  e001              B        |L1.5856|
                  |L1.5852|
;;;1382        	else event_ptr_find=63;
0016dc  f04f043f          MOV      r4,#0x3f
                  |L1.5856|
;;;1383        	if(event_ptr_find==event_ptr)goto vz_mem_hndl_end;
0016e0  42b4              CMP      r4,r6
0016e2  d1e9              BNE      |L1.5816|
0016e4  e05d              B        |L1.6050|
                  |L1.5862|
;;;1384        	else goto vz_mem_hndl_lbl1;
;;;1385        	}
;;;1386        else 
;;;1387        	{
;;;1388        	lc640_read_long_ptr(lc640_adr+16,data);
0016e6  4669              MOV      r1,sp
0016e8  f1050010          ADD      r0,r5,#0x10
0016ec  f7fffffe          BL       lc640_read_long_ptr
;;;1389        	if(!((data[0]=='A')&&(data[1]=='A')&&(data[2]=='A')&&(data[3]=='A')))
0016f0  f89d0000          LDRB     r0,[sp,#0]
0016f4  2841              CMP      r0,#0x41
0016f6  d10b              BNE      |L1.5904|
0016f8  f89d0001          LDRB     r0,[sp,#1]
0016fc  2841              CMP      r0,#0x41
0016fe  d107              BNE      |L1.5904|
001700  f89d0002          LDRB     r0,[sp,#2]
001704  2841              CMP      r0,#0x41
001706  d103              BNE      |L1.5904|
001708  f89d0003          LDRB     r0,[sp,#3]
00170c  2841              CMP      r0,#0x41
00170e  d008              BEQ      |L1.5922|
                  |L1.5904|
;;;1390        		{        
;;;1391        		if(event_ptr_find)event_ptr_find--;
001710  b114              CBZ      r4,|L1.5912|
001712  f1a40401          SUB      r4,r4,#1
001716  e001              B        |L1.5916|
                  |L1.5912|
;;;1392            		else event_ptr_find=63;
001718  f04f043f          MOV      r4,#0x3f
                  |L1.5916|
;;;1393            		if(event_ptr_find==event_ptr)goto vz_mem_hndl_end;
00171c  42b4              CMP      r4,r6
00171e  d1cb              BNE      |L1.5816|
001720  e03f              B        |L1.6050|
                  |L1.5922|
;;;1394        		else goto vz_mem_hndl_lbl1;
;;;1395        		}
;;;1396   
;;;1397        	}	
;;;1398   
;;;1399   
;;;1400   	
;;;1401   	data[0]=LPC_RTC->YEAR;
001722  f8b8003c          LDRH     r0,[r8,#0x3c]
001726  f88d0000          STRB     r0,[sp,#0]
;;;1402   	data[1]=LPC_RTC->MONTH;
00172a  f8980038          LDRB     r0,[r8,#0x38]
00172e  f88d0001          STRB     r0,[sp,#1]
;;;1403   	data[2]=LPC_RTC->DOM;
001732  f898002c          LDRB     r0,[r8,#0x2c]
001736  f88d0002          STRB     r0,[sp,#2]
;;;1404   	data[3]=0;
00173a  f88d9003          STRB     r9,[sp,#3]
;;;1405   	lc640_write_long_ptr(lc640_adr+16,data);
00173e  4669              MOV      r1,sp
001740  f1050010          ADD      r0,r5,#0x10
001744  f7fffffe          BL       lc640_write_long_ptr
;;;1406   
;;;1407   	data[0]=LPC_RTC->HOUR;
001748  f8980028          LDRB     r0,[r8,#0x28]
00174c  f88d0000          STRB     r0,[sp,#0]
;;;1408   	data[1]=LPC_RTC->MIN;
001750  f8980024          LDRB     r0,[r8,#0x24]
001754  f88d0001          STRB     r0,[sp,#1]
;;;1409   	data[2]=LPC_RTC->SEC;
001758  f8980020          LDRB     r0,[r8,#0x20]
00175c  f88d0002          STRB     r0,[sp,#2]
;;;1410   	data[3]=0;
001760  f88d9003          STRB     r9,[sp,#3]
;;;1411   	lc640_write_long_ptr(lc640_adr+20,data);
001764  4669              MOV      r1,sp
001766  f1050014          ADD      r0,r5,#0x14
00176a  f7fffffe          BL       lc640_write_long_ptr
;;;1412   	
;;;1413   	data[0]='B';
00176e  f88d7000          STRB     r7,[sp,#0]
;;;1414   	data[1]='B';
001772  f88d7001          STRB     r7,[sp,#1]
;;;1415   	data[2]='B';
001776  f88d7002          STRB     r7,[sp,#2]
;;;1416   	data[3]='B';
00177a  f88d7003          STRB     r7,[sp,#3]
;;;1417   	lc640_write_long_ptr(lc640_adr+24,data);
00177e  4669              MOV      r1,sp
001780  f1050018          ADD      r0,r5,#0x18
001784  f7fffffe          BL       lc640_write_long_ptr
;;;1418   	
;;;1419   	data[0]='B';
001788  f88d7000          STRB     r7,[sp,#0]
;;;1420   	data[1]='B';
00178c  f88d7001          STRB     r7,[sp,#1]
;;;1421   	data[2]='B';
001790  f88d7002          STRB     r7,[sp,#2]
;;;1422   	data[3]='B';
001794  f88d7003          STRB     r7,[sp,#3]
;;;1423   	lc640_write_long_ptr(lc640_adr+28,data);
001798  4669              MOV      r1,sp
00179a  f105001c          ADD      r0,r5,#0x1c
00179e  f7fffffe          BL       lc640_write_long_ptr
                  |L1.6050|
;;;1424   	
;;;1425   	}
;;;1426   
;;;1427   vz_mem_hndl_end:
;;;1428   __nop(); 
0017a2  bf00              NOP      
;;;1429   
;;;1430   }
0017a4  e4d3              B        |L1.4430|
;;;1431     
                          ENDP

0017a6  0000              DCW      0x0000
                  |L1.6056|
                          DCD      ke_date
                  |L1.6060|
                          DCD      0x40024020
                  |L1.6064|
                          DCD      0x40024000

                          AREA ||area_number.2||, CODE, READONLY, ALIGN=2

                          EXPORTAS ||area_number.2||, ||.text||
                  avar_uout_hndl PROC
;;;56     //-----------------------------------------------
;;;57     void avar_hndl(void)
000000  e92d43f8          PUSH     {r3-r9,lr}
;;;58     {
;;;59     //static unsigned avar_stat_old;
;;;60     char i;
;;;61     //unsigned avar_stat_new,avar_stat_offed;
;;;62     
;;;63     if(net_av)		SET_REG(avar_stat,1,0,1);
000004  4f90              LDR      r7,|L2.584|
000006  f04f0800          MOV      r8,#0
00000a  f44f6560          MOV      r5,#0xe00
00000e  f44f6980          MOV      r9,#0x400
000012  2801              CMP      r0,#1
;;;64     else	   			SET_REG(avar_stat,0,0,1);
000014  d002              BEQ      |L2.28|
000016  2800              CMP      r0,#0
000018  d07d              BEQ      |L2.278|
;;;65     
;;;66     for(i=0;i<2;i++)
00001a  e111              B        |L2.576|
                  |L2.28|
00001c  4628              MOV      r0,r5
;;;67     	{
;;;68     	if(bat[i]._av&1)	SET_REG(avar_stat,1,1+i,1);
00001e  f7fffffe          BL       lc640_read_int
000022  f1000001          ADD      r0,r0,#1
000026  4604              MOV      r4,r0
000028  2c3f              CMP      r4,#0x3f
00002a  d901              BLS      |L2.48|
00002c  f04f0400          MOV      r4,#0
                  |L2.48|
000030  b221              SXTH     r1,r4
000032  4628              MOV      r0,r5
000034  f7fffffe          BL       lc640_write_int
000038  f6406602          MOV      r6,#0xe02
00003c  4630              MOV      r0,r6
00003e  f7fffffe          BL       lc640_read_int
000042  283f              CMP      r0,#0x3f
000044  d000              BEQ      |L2.72|
000046  4620              MOV      r0,r4
                  |L2.72|
000048  b201              SXTH     r1,r0
00004a  4630              MOV      r0,r6
00004c  f7fffffe          BL       lc640_write_int
;;;69     	else	   		SET_REG(avar_stat,0,1+i,1);
000050  4628              MOV      r0,r5
000052  f7fffffe          BL       lc640_read_int
000056  eb091540          ADD      r5,r9,r0,LSL #5
00005a  f04f0051          MOV      r0,#0x51
00005e  f88d0000          STRB     r0,[sp,#0]            ;66
000062  f88d8001          STRB     r8,[sp,#1]            ;66
000066  f04f0441          MOV      r4,#0x41              ;66
;;;70     	}
;;;71     
;;;72     for(i=0;i<12;i++)
00006a  f88d4002          STRB     r4,[sp,#2]
;;;73     	{
;;;74     	if(bps[i]._av)	SET_REG(avar_stat,1,3+i,1);
00006e  f88d8003          STRB     r8,[sp,#3]
000072  4669              MOV      r1,sp
000074  4628              MOV      r0,r5
000076  f7fffffe          BL       lc640_write_long_ptr
00007a  f8cd8000          STR      r8,[sp,#0]
00007e  4669              MOV      r1,sp
000080  1d28              ADDS     r0,r5,#4
000082  f7fffffe          BL       lc640_write_long_ptr
000086  f1070720          ADD      r7,r7,#0x20
00008a  8bb8              LDRH     r0,[r7,#0x1c]
00008c  f88d0000          STRB     r0,[sp,#0]
000090  7e38              LDRB     r0,[r7,#0x18]
000092  f88d0001          STRB     r0,[sp,#1]
;;;75     	else	   		SET_REG(avar_stat,0,3+i,1);
000096  7b38              LDRB     r0,[r7,#0xc]
000098  f88d0002          STRB     r0,[sp,#2]
00009c  f88d8003          STRB     r8,[sp,#3]
0000a0  4669              MOV      r1,sp
0000a2  f1050008          ADD      r0,r5,#8
0000a6  f7fffffe          BL       lc640_write_long_ptr
0000aa  7a38              LDRB     r0,[r7,#8]            ;72
0000ac  f88d0000          STRB     r0,[sp,#0]            ;72
;;;76     	}
;;;77     
;;;78     for(i=0;i<6;i++)
0000b0  7938              LDRB     r0,[r7,#4]
;;;79     	{
;;;80     	if(av_inv[i])	SET_REG(avar_stat,1,15+i,1);
0000b2  f88d0001          STRB     r0,[sp,#1]
0000b6  7838              LDRB     r0,[r7,#0]
0000b8  f88d0002          STRB     r0,[sp,#2]
0000bc  f88d8003          STRB     r8,[sp,#3]
0000c0  4669              MOV      r1,sp
0000c2  f105000c          ADD      r0,r5,#0xc
0000c6  f7fffffe          BL       lc640_write_long_ptr
0000ca  f88d4000          STRB     r4,[sp,#0]
0000ce  f88d4001          STRB     r4,[sp,#1]
;;;81     	else	   		SET_REG(avar_stat,0,15+i,1);
0000d2  f88d4002          STRB     r4,[sp,#2]
0000d6  f88d4003          STRB     r4,[sp,#3]
0000da  4669              MOV      r1,sp
0000dc  f1050010          ADD      r0,r5,#0x10
0000e0  f7fffffe          BL       lc640_write_long_ptr
0000e4  f88d4000          STRB     r4,[sp,#0]            ;78
0000e8  f88d4001          STRB     r4,[sp,#1]            ;78
;;;82     	}
;;;83     
;;;84     /*for(i=0;i<4;i++)
;;;85     	{
;;;86     	if(av_dt[i])	SET_REG(avar_stat,1,21+i,1);
;;;87     	else	   		SET_REG(avar_stat,0,21+i,1);
;;;88     	}  */
;;;89     for(i=0;i<4;i++)
0000ec  f88d4002          STRB     r4,[sp,#2]
;;;90     	{
;;;91     	if(sk_av_stat[i]==sasON)	SET_REG(avar_stat,1,25+i,1);
0000f0  f88d4003          STRB     r4,[sp,#3]
0000f4  4669              MOV      r1,sp
0000f6  f1050014          ADD      r0,r5,#0x14
;;;92     	else	   		SET_REG(avar_stat,0,25+i,1);
0000fa  f7fffffe          BL       lc640_write_long_ptr
0000fe  f88d4000          STRB     r4,[sp,#0]
000102  f88d4001          STRB     r4,[sp,#1]
000106  f88d4002          STRB     r4,[sp,#2]
00010a  f88d4003          STRB     r4,[sp,#3]            ;89
00010e  4669              MOV      r1,sp                 ;89
000110  f1050018          ADD      r0,r5,#0x18           ;89
;;;93     	}
;;;94     
;;;95     avar_stat_new=(avar_stat^avar_stat_old)&avar_stat;
000114  e000              B        |L2.280|
                  |L2.278|
000116  e00f              B        |L2.312|
                  |L2.280|
000118  f7fffffe          BL       lc640_write_long_ptr
;;;96     
;;;97     avar_ind_stat|=avar_stat_new;
00011c  f88d4000          STRB     r4,[sp,#0]
000120  f88d4001          STRB     r4,[sp,#1]
;;;98     
;;;99     if((SK_ZVUK_EN[0])) avar_ind_stat&=(~(1UL<<25));
000124  f88d4002          STRB     r4,[sp,#2]
000128  f88d4003          STRB     r4,[sp,#3]
00012c  4669              MOV      r1,sp
00012e  f105001c          ADD      r0,r5,#0x1c
;;;100    if((SK_ZVUK_EN[1])) avar_ind_stat&=(~(1UL<<26));
000132  f7fffffe          BL       lc640_write_long_ptr
000136  e083              B        |L2.576|
                  |L2.312|
000138  4628              MOV      r0,r5
00013a  f7fffffe          BL       lc640_read_int
;;;101    if((SK_ZVUK_EN[2])) avar_ind_stat&=(~(1UL<<27));
00013e  4606              MOV      r6,r0
000140  4634              MOV      r4,r6
                  |L2.322|
000142  eb091544          ADD      r5,r9,r4,LSL #5
000146  4669              MOV      r1,sp
;;;102    if((SK_ZVUK_EN[3])) avar_ind_stat&=(~(1UL<<28));	
000148  4628              MOV      r0,r5
00014a  f7fffffe          BL       lc640_read_long_ptr
00014e  f89d0000          LDRB     r0,[sp,#0]
000152  2851              CMP      r0,#0x51
;;;103    
;;;104    
;;;105    avar_stat_offed=~((avar_stat^avar_stat_old)&avar_stat_old);
000154  d106              BNE      |L2.356|
000156  f89d0001          LDRB     r0,[sp,#1]
00015a  b918              CBNZ     r0,|L2.356|
00015c  f89d0002          LDRB     r0,[sp,#2]
;;;106    
;;;107    if(!AV_OFF_AVT)avar_stat_offed|=0xfffffffe;
000160  2841              CMP      r0,#0x41
000162  d008              BEQ      |L2.374|
                  |L2.356|
000164  b114              CBZ      r4,|L2.364|
000166  f1a40401          SUB      r4,r4,#1              ;91
00016a  e001              B        |L2.368|
                  |L2.364|
00016c  f04f043f          MOV      r4,#0x3f              ;91
                  |L2.368|
000170  42b4              CMP      r4,r6                 ;91
000172  d1e6              BNE      |L2.322|
000174  e064              B        |L2.576|
                  |L2.374|
000176  4669              MOV      r1,sp                 ;91
000178  f1050010          ADD      r0,r5,#0x10           ;91
00017c  f7fffffe          BL       lc640_read_long_ptr
000180  f89d0000          LDRB     r0,[sp,#0]
;;;108    
;;;109    avar_ind_stat&=avar_stat_offed; 
000184  2841              CMP      r0,#0x41
000186  d10b              BNE      |L2.416|
000188  f89d0001          LDRB     r0,[sp,#1]
;;;110    
;;;111    avar_stat_old=avar_stat;
00018c  2841              CMP      r0,#0x41
;;;112    }
00018e  d107              BNE      |L2.416|
000190  f89d0002          LDRB     r0,[sp,#2]
000194  2841              CMP      r0,#0x41
000196  d103              BNE      |L2.416|
000198  f89d0003          LDRB     r0,[sp,#3]
00019c  2841              CMP      r0,#0x41
00019e  d008              BEQ      |L2.434|
                  |L2.416|
0001a0  b114              CBZ      r4,|L2.424|
0001a2  f1a40401          SUB      r4,r4,#1
0001a6  e001              B        |L2.428|
                  |L2.424|
0001a8  f04f043f          MOV      r4,#0x3f
                  |L2.428|
0001ac  42b4              CMP      r4,r6
0001ae  d1c8              BNE      |L2.322|
0001b0  e046              B        |L2.576|
                  |L2.434|
0001b2  f1070720          ADD      r7,r7,#0x20
0001b6  8bb8              LDRH     r0,[r7,#0x1c]
0001b8  f88d0000          STRB     r0,[sp,#0]
0001bc  7e38              LDRB     r0,[r7,#0x18]
0001be  f88d0001          STRB     r0,[sp,#1]
0001c2  7b38              LDRB     r0,[r7,#0xc]
0001c4  f88d0002          STRB     r0,[sp,#2]
0001c8  f88d8003          STRB     r8,[sp,#3]
0001cc  4669              MOV      r1,sp
0001ce  f1050010          ADD      r0,r5,#0x10
0001d2  f7fffffe          BL       lc640_write_long_ptr
0001d6  7a38              LDRB     r0,[r7,#8]
0001d8  f88d0000          STRB     r0,[sp,#0]
0001dc  7938              LDRB     r0,[r7,#4]
0001de  f88d0001          STRB     r0,[sp,#1]
0001e2  7838              LDRB     r0,[r7,#0]
0001e4  f88d0002          STRB     r0,[sp,#2]
0001e8  f88d8003          STRB     r8,[sp,#3]
0001ec  4669              MOV      r1,sp
0001ee  f1050014          ADD      r0,r5,#0x14
0001f2  f7fffffe          BL       lc640_write_long_ptr
0001f6  4815              LDR      r0,|L2.588|
0001f8  7801              LDRB     r1,[r0,#0]  ; net_Ustore
0001fa  f88d1000          STRB     r1,[sp,#0]
0001fe  7840              LDRB     r0,[r0,#1]  ; net_Ustore
000200  f88d0001          STRB     r0,[sp,#1]
000204  f04f0442          MOV      r4,#0x42
000208  f88d4002          STRB     r4,[sp,#2]
00020c  f88d4003          STRB     r4,[sp,#3]
000210  4669              MOV      r1,sp
000212  f1050018          ADD      r0,r5,#0x18
000216  f7fffffe          BL       lc640_write_long_ptr
00021a  f88d4000          STRB     r4,[sp,#0]
00021e  f88d4001          STRB     r4,[sp,#1]
000222  f88d4002          STRB     r4,[sp,#2]
000226  f88d4003          STRB     r4,[sp,#3]
00022a  4669              MOV      r1,sp
00022c  f105001c          ADD      r0,r5,#0x1c
000230  f7fffffe          BL       lc640_write_long_ptr
000234  2301              MOVS     r3,#1
000236  461a              MOV      r2,r3
000238  2102              MOVS     r1,#2
00023a  a005              ADR      r0,|L2.592|
00023c  f7fffffe          BL       snmp_trap_send
                  |L2.576|
000240  bf00              NOP      
000242  e8bd83f8          POP      {r3-r9,pc}
;;;113    
                          ENDP

000246  0000              DCW      0x0000
                  |L2.584|
                          DCD      0x40024000
                  |L2.588|
                          DCD      net_Ustore
                  |L2.592|
000250  4d61696e          DCB      "Main power is on",0
000254  20706f77
000258  65722069
00025c  73206f6e
000260  00      
000261  00                DCB      0
000262  00                DCB      0
000263  00                DCB      0

                          AREA ||.data||, DATA, ALIGN=2

                  avar_stat
                          DCD      0x00000000
                  avar_ind_stat
                          DCD      0x00000000
                  avar_stat_old
                          DCD      0x00000000
                  avar_stat_new
                          DCD      0x00000000
                  avar_stat_offed
                          DCD      0x00000000
                  av_inv
                          DCD      0x00000000
000018  0000              DCB      0x00,0x00
