; generated by ARM C/C++ Compiler, 4.1 [Build 644]
; commandline ArmCC [--list --debug -c --asm --interleave -o.\EXE\avar_hndl.o --asm_dir=.\ --list_dir=.\ --depend=.\EXE\avar_hndl.d --feedback=.\EXE\UKU_220_IPS_TERMOKOMPENSAT.fed --cpu=Cortex-M3 --apcs=interwork -O1 -IC:\Keil\ARM\CMSIS\Include -IC:\Keil\ARM\INC\NXP\LPC17xx -D__MICROLIB -DUKU_220_IPS_TERMOKOMPENSAT -DUKU2071x -DUKU_ZVU --omf_browse=.\EXE\avar_hndl.crf avar_hndl.c]
                          THUMB

                          AREA ||.text||, CODE, READONLY, ALIGN=2

                  avar_hndl PROC
;;;75     //-----------------------------------------------
;;;76     void avar_hndl(void)
000000  b530              PUSH     {r4,r5,lr}
;;;77     {
;;;78     //static unsigned avar_stat_old;
;;;79     char i;
;;;80     //unsigned avar_stat_new,avar_stat_offed;
;;;81     
;;;82     if(net_av)		SET_REG(avar_stat,1,0,1);
000002  48ff              LDR      r0,|L1.1024|
000004  49ff              LDR      r1,|L1.1028|
000006  7802              LDRB     r2,[r0,#0]  ; net_av
000008  6808              LDR      r0,[r1,#0]
00000a  b11a              CBZ      r2,|L1.20|
00000c  f0400001          ORR      r0,r0,#1
000010  6008              STR      r0,[r1,#0]  ; avar_stat
000012  e002              B        |L1.26|
                  |L1.20|
;;;83     else	   			SET_REG(avar_stat,0,0,1);
000014  f0200001          BIC      r0,r0,#1
000018  6008              STR      r0,[r1,#0]  ; avar_stat
                  |L1.26|
;;;84     
;;;85     for(i=0;i<2;i++)
00001a  f04f0000          MOV      r0,#0
;;;86     	{
;;;87     	if(bat[i]._av&1)	SET_REG(avar_stat,1,1+i,1);
00001e  4dfa              LDR      r5,|L1.1032|
000020  f04f0301          MOV      r3,#1
                  |L1.36|
000024  eb000240          ADD      r2,r0,r0,LSL #1
000028  eb021200          ADD      r2,r2,r0,LSL #4
00002c  eb050282          ADD      r2,r5,r2,LSL #2
000030  f892203d          LDRB     r2,[r2,#0x3d]
000034  07d2              LSLS     r2,r2,#31
000036  d00a              BEQ      |L1.78|
000038  f1000401          ADD      r4,r0,#1
00003c  fa03f204          LSL      r2,r3,r4
000040  680c              LDR      r4,[r1,#0]  ; avar_stat
000042  ea240402          BIC      r4,r4,r2
000046  ea440402          ORR      r4,r4,r2
00004a  600c              STR      r4,[r1,#0]  ; avar_stat
00004c  e007              B        |L1.94|
                  |L1.78|
;;;88     	else	   		SET_REG(avar_stat,0,1+i,1);
00004e  f1000201          ADD      r2,r0,#1
000052  fa03f402          LSL      r4,r3,r2
000056  680a              LDR      r2,[r1,#0]  ; avar_stat
000058  ea220204          BIC      r2,r2,r4
00005c  600a              STR      r2,[r1,#0]  ; avar_stat
                  |L1.94|
00005e  f1000001          ADD      r0,r0,#1              ;85
000062  b2c0              UXTB     r0,r0                 ;85
000064  2802              CMP      r0,#2                 ;85
000066  d3dd              BCC      |L1.36|
;;;89     	}
;;;90     
;;;91     for(i=0;i<12;i++)
000068  f04f0000          MOV      r0,#0
;;;92     	{
;;;93     	if(bps[i]._av&0xef)	SET_REG(avar_stat,1,3+i,1);
00006c  4ce7              LDR      r4,|L1.1036|
                  |L1.110|
00006e  ebc002c0          RSB      r2,r0,r0,LSL #3
000072  eb021200          ADD      r2,r2,r0,LSL #4
000076  eb040282          ADD      r2,r4,r2,LSL #2
00007a  7852              LDRB     r2,[r2,#1]
00007c  f0120fef          TST      r2,#0xef
000080  d00a              BEQ      |L1.152|
000082  f1000503          ADD      r5,r0,#3
000086  fa03f205          LSL      r2,r3,r5
00008a  680d              LDR      r5,[r1,#0]  ; avar_stat
00008c  ea250502          BIC      r5,r5,r2
000090  ea450502          ORR      r5,r5,r2
000094  600d              STR      r5,[r1,#0]  ; avar_stat
000096  e007              B        |L1.168|
                  |L1.152|
;;;94     	else	   		SET_REG(avar_stat,0,3+i,1);
000098  f1000203          ADD      r2,r0,#3
00009c  fa03f502          LSL      r5,r3,r2
0000a0  680a              LDR      r2,[r1,#0]  ; avar_stat
0000a2  ea220205          BIC      r2,r2,r5
0000a6  600a              STR      r2,[r1,#0]  ; avar_stat
                  |L1.168|
0000a8  f1000001          ADD      r0,r0,#1              ;91
0000ac  b2c0              UXTB     r0,r0                 ;91
0000ae  280c              CMP      r0,#0xc               ;91
0000b0  d3dd              BCC      |L1.110|
;;;95     	}
;;;96     
;;;97     for(i=0;i<6;i++)
0000b2  f04f0000          MOV      r0,#0
;;;98     	{
;;;99     	if(av_inv[i])	SET_REG(avar_stat,1,15+i,1);
0000b6  4dd3              LDR      r5,|L1.1028|
0000b8  f1050550          ADD      r5,r5,#0x50
                  |L1.188|
0000bc  5c2a              LDRB     r2,[r5,r0]
0000be  b152              CBZ      r2,|L1.214|
0000c0  f100040f          ADD      r4,r0,#0xf
0000c4  fa03f204          LSL      r2,r3,r4
0000c8  680c              LDR      r4,[r1,#0]  ; avar_stat
0000ca  ea240402          BIC      r4,r4,r2
0000ce  ea440402          ORR      r4,r4,r2
0000d2  600c              STR      r4,[r1,#0]  ; avar_stat
0000d4  e007              B        |L1.230|
                  |L1.214|
;;;100    	else	   		SET_REG(avar_stat,0,15+i,1);
0000d6  f100020f          ADD      r2,r0,#0xf
0000da  680c              LDR      r4,[r1,#0]  ; avar_stat
0000dc  fa03f202          LSL      r2,r3,r2
0000e0  ea240402          BIC      r4,r4,r2
0000e4  600c              STR      r4,[r1,#0]  ; avar_stat
                  |L1.230|
0000e6  f1000001          ADD      r0,r0,#1              ;97
0000ea  b2c0              UXTB     r0,r0                 ;97
0000ec  2806              CMP      r0,#6                 ;97
0000ee  d3e5              BCC      |L1.188|
;;;101    	}
;;;102    
;;;103    /*for(i=0;i<4;i++)
;;;104    	{
;;;105    	if(av_dt[i])	SET_REG(avar_stat,1,21+i,1);
;;;106    	else	   		SET_REG(avar_stat,0,21+i,1);
;;;107    	}  */
;;;108    for(i=0;i<4;i++)
0000f0  f04f0000          MOV      r0,#0
;;;109    	{
;;;110    	if(sk_av_stat[i]==sasON)	SET_REG(avar_stat,1,24+i,1);
0000f4  4cc6              LDR      r4,|L1.1040|
                  |L1.246|
0000f6  5c22              LDRB     r2,[r4,r0]
0000f8  2a01              CMP      r2,#1
0000fa  d036              BEQ      |L1.362|
;;;111    	else	   		SET_REG(avar_stat,0,24+i,1);
0000fc  f1000218          ADD      r2,r0,#0x18
000100  fa03f502          LSL      r5,r3,r2
000104  680a              LDR      r2,[r1,#0]  ; avar_stat
000106  ea220205          BIC      r2,r2,r5
00010a  600a              STR      r2,[r1,#0]  ; avar_stat
                  |L1.268|
00010c  f1000001          ADD      r0,r0,#1              ;108
000110  b2c0              UXTB     r0,r0                 ;108
000112  2804              CMP      r0,#4                 ;108
000114  d3ef              BCC      |L1.246|
;;;112    	}
;;;113    
;;;114    //if(uout_av)			SET_REG(avar_stat,1,28,1);
;;;115    //else	   			SET_REG(avar_stat,0,28,1);
;;;116    
;;;117    
;;;118    avar_stat_new=(avar_stat^avar_stat_old)&avar_stat;
000116  688b              LDR      r3,[r1,#8]  ; avar_stat_old
000118  6808              LDR      r0,[r1,#0]  ; avar_stat
00011a  ea200203          BIC      r2,r0,r3
00011e  60ca              STR      r2,[r1,#0xc]  ; avar_stat_new
;;;119    
;;;120    avar_ind_stat|=avar_stat_new;
000120  684c              LDR      r4,[r1,#4]  ; avar_ind_stat
000122  ea440402          ORR      r4,r4,r2
000126  604c              STR      r4,[r1,#4]  ; avar_ind_stat
;;;121    
;;;122    if((SK_ZVUK_EN[0])) avar_ind_stat&=(~(1UL<<24));
000128  4aba              LDR      r2,|L1.1044|
00012a  8815              LDRH     r5,[r2,#0]  ; SK_ZVUK_EN
00012c  b115              CBZ      r5,|L1.308|
00012e  f0247480          BIC      r4,r4,#0x1000000
000132  604c              STR      r4,[r1,#4]  ; avar_ind_stat
                  |L1.308|
;;;123    if((SK_ZVUK_EN[1])) avar_ind_stat&=(~(1UL<<25));
000134  8854              LDRH     r4,[r2,#2]  ; SK_ZVUK_EN
000136  b11c              CBZ      r4,|L1.320|
000138  684c              LDR      r4,[r1,#4]  ; avar_ind_stat
00013a  f0247400          BIC      r4,r4,#0x2000000
00013e  604c              STR      r4,[r1,#4]  ; avar_ind_stat
                  |L1.320|
;;;124    if((SK_ZVUK_EN[2])) avar_ind_stat&=(~(1UL<<26));
000140  8894              LDRH     r4,[r2,#4]  ; SK_ZVUK_EN
000142  b11c              CBZ      r4,|L1.332|
000144  684c              LDR      r4,[r1,#4]  ; avar_ind_stat
000146  f0246480          BIC      r4,r4,#0x4000000
00014a  604c              STR      r4,[r1,#4]  ; avar_ind_stat
                  |L1.332|
;;;125    if((SK_ZVUK_EN[3])) avar_ind_stat&=(~(1UL<<27));	
00014c  88d2              LDRH     r2,[r2,#6]  ; SK_ZVUK_EN
00014e  b11a              CBZ      r2,|L1.344|
000150  684a              LDR      r2,[r1,#4]  ; avar_ind_stat
000152  f0226200          BIC      r2,r2,#0x8000000
000156  604a              STR      r2,[r1,#4]  ; avar_ind_stat
                  |L1.344|
;;;126    
;;;127    
;;;128    avar_stat_offed=~((avar_stat^avar_stat_old)&avar_stat_old);
000158  ea230300          BIC      r3,r3,r0
00015c  ea6f0203          MVN      r2,r3
000160  610a              STR      r2,[r1,#0x10]  ; avar_stat_offed
;;;129    
;;;130    if(!AV_OFF_AVT)avar_stat_offed|=0xeffffffe;
000162  4bad              LDR      r3,|L1.1048|
000164  881b              LDRH     r3,[r3,#0]  ; AV_OFF_AVT
000166  b15b              CBZ      r3,|L1.384|
000168  e00e              B        |L1.392|
                  |L1.362|
00016a  f1000518          ADD      r5,r0,#0x18           ;110
00016e  fa03f205          LSL      r2,r3,r5              ;110
000172  680d              LDR      r5,[r1,#0]            ;110  ; avar_stat
000174  ea250502          BIC      r5,r5,r2              ;110
000178  ea450502          ORR      r5,r5,r2              ;110
00017c  600d              STR      r5,[r1,#0]            ;110  ; avar_stat
00017e  e7c5              B        |L1.268|
                  |L1.384|
000180  4ba6              LDR      r3,|L1.1052|
000182  ea420203          ORR      r2,r2,r3
000186  610a              STR      r2,[r1,#0x10]  ; avar_stat_offed
                  |L1.392|
;;;131    
;;;132    avar_ind_stat&=avar_stat_offed; 
000188  690b              LDR      r3,[r1,#0x10]  ; avar_stat_offed
00018a  684a              LDR      r2,[r1,#4]  ; avar_ind_stat
00018c  ea020203          AND      r2,r2,r3
000190  604a              STR      r2,[r1,#4]  ; avar_ind_stat
;;;133    
;;;134    avar_stat_old=avar_stat;
000192  6088              STR      r0,[r1,#8]  ; avar_stat_old
;;;135    
;;;136    //oleg_start
;;;137    
;;;138    
;;;139    
;;;140    rki_avar1_stat=(sk_alarm<<8)|(status_izm_r&0x3F);
000194  48a2              LDR      r0,|L1.1056|
000196  4aa3              LDR      r2,|L1.1060|
000198  8800              LDRH     r0,[r0,#0]  ; status_izm_r
00019a  6812              LDR      r2,[r2,#0]  ; sk_alarm
00019c  f000003f          AND      r0,r0,#0x3f
0001a0  ea402002          ORR      r0,r0,r2,LSL #8
0001a4  6148              STR      r0,[r1,#0x14]  ; rki_avar1_stat
;;;141    rki_avar1_stat_new=(rki_avar1_stat^rki_avar1_stat_old)&rki_avar1_stat;
0001a6  69cb              LDR      r3,[r1,#0x1c]  ; rki_avar1_stat_old
0001a8  ea200203          BIC      r2,r0,r3
0001ac  620a              STR      r2,[r1,#0x20]  ; rki_avar1_stat_new
;;;142    rki_avar1_ind_stat|=rki_avar1_stat_new;
0001ae  698c              LDR      r4,[r1,#0x18]  ; rki_avar1_ind_stat
0001b0  ea440402          ORR      r4,r4,r2
;;;143    rki_avar1_stat_offed=~((rki_avar1_stat^rki_avar1_stat_old)&rki_avar1_stat_old);
0001b4  ea230300          BIC      r3,r3,r0
0001b8  ea6f0203          MVN      r2,r3
0001bc  624a              STR      r2,[r1,#0x24]  ; rki_avar1_stat_offed
;;;144    rki_avar1_ind_stat&=rki_avar1_stat_offed;
0001be  ea040402          AND      r4,r4,r2
0001c2  618c              STR      r4,[r1,#0x18]  ; rki_avar1_ind_stat
;;;145    rki_avar1_stat_old=rki_avar1_stat;
0001c4  61c8              STR      r0,[r1,#0x1c]  ; rki_avar1_stat_old
;;;146    
;;;147    rki_avarI1_stat=status_di1;
0001c6  4898              LDR      r0,|L1.1064|
0001c8  6800              LDR      r0,[r0,#0]  ; status_di1
0001ca  6288              STR      r0,[r1,#0x28]  ; rki_avarI1_stat
;;;148    rki_avarI1_stat_new=(rki_avarI1_stat^rki_avarI1_stat_old)&rki_avarI1_stat;
0001cc  6b0b              LDR      r3,[r1,#0x30]  ; rki_avarI1_stat_old
0001ce  ea200203          BIC      r2,r0,r3
0001d2  634a              STR      r2,[r1,#0x34]  ; rki_avarI1_stat_new
;;;149    rki_avarI1_ind_stat|=rki_avarI1_stat_new;
0001d4  6acc              LDR      r4,[r1,#0x2c]  ; rki_avarI1_ind_stat
0001d6  ea440402          ORR      r4,r4,r2
;;;150    rki_avarI1_stat_offed=~((rki_avarI1_stat^rki_avarI1_stat_old)&rki_avarI1_stat_old);
0001da  ea230300          BIC      r3,r3,r0
0001de  ea6f0203          MVN      r2,r3
0001e2  638a              STR      r2,[r1,#0x38]  ; rki_avarI1_stat_offed
;;;151    rki_avarI1_ind_stat&=rki_avarI1_stat_offed;
0001e4  ea040402          AND      r4,r4,r2
0001e8  62cc              STR      r4,[r1,#0x2c]  ; rki_avarI1_ind_stat
;;;152    rki_avarI1_stat_old=rki_avarI1_stat;
0001ea  6308              STR      r0,[r1,#0x30]  ; rki_avarI1_stat_old
;;;153    
;;;154    rki_avarI2_stat=status_di2;
0001ec  488f              LDR      r0,|L1.1068|
0001ee  6800              LDR      r0,[r0,#0]  ; status_di2
0001f0  63c8              STR      r0,[r1,#0x3c]  ; rki_avarI2_stat
;;;155    rki_avarI2_stat_new=(rki_avarI2_stat^rki_avarI2_stat_old)&rki_avarI2_stat;
0001f2  6c4b              LDR      r3,[r1,#0x44]  ; rki_avarI2_stat_old
0001f4  ea200203          BIC      r2,r0,r3
0001f8  648a              STR      r2,[r1,#0x48]  ; rki_avarI2_stat_new
;;;156    rki_avarI2_ind_stat|=rki_avarI2_stat_new;
0001fa  6c0c              LDR      r4,[r1,#0x40]  ; rki_avarI2_ind_stat
0001fc  ea440402          ORR      r4,r4,r2
;;;157    rki_avarI2_stat_offed=~((rki_avarI2_stat^rki_avarI2_stat_old)&rki_avarI2_stat_old);
000200  ea230300          BIC      r3,r3,r0
000204  ea6f0203          MVN      r2,r3
000208  64ca              STR      r2,[r1,#0x4c]  ; rki_avarI2_stat_offed
;;;158    rki_avarI2_ind_stat&=rki_avarI2_stat_offed;
00020a  ea040402          AND      r4,r4,r2
00020e  640c              STR      r4,[r1,#0x40]  ; rki_avarI2_ind_stat
;;;159    rki_avarI2_stat_old=rki_avarI2_stat;
000210  6448              STR      r0,[r1,#0x44]  ; rki_avarI2_stat_old
;;;160    //oleg_end
;;;161    }
000212  bd30              POP      {r4,r5,pc}
;;;162    
                          ENDP

                  reload_hndl PROC
;;;163    //-----------------------------------------------
;;;164    void reload_hndl(void)
000214  b5f8              PUSH     {r3-r7,lr}
;;;165    {
;;;166    char data[4];
;;;167    unsigned int event_ptr,lc640_adr/*,event_ptr_find*/,event_cnt;
;;;168    
;;;169    event_ptr=lc640_read_int(PTR_EVENT_LOG);
000216  f44f6560          MOV      r5,#0xe00
00021a  4628              MOV      r0,r5
00021c  f7fffffe          BL       lc640_read_int
;;;170    event_ptr++;	
000220  f1000001          ADD      r0,r0,#1
000224  4604              MOV      r4,r0
;;;171    if(event_ptr>63)event_ptr=0;	
000226  2c3f              CMP      r4,#0x3f
000228  d901              BLS      |L1.558|
00022a  f04f0400          MOV      r4,#0
                  |L1.558|
;;;172    lc640_write_int(PTR_EVENT_LOG,event_ptr);	
00022e  b221              SXTH     r1,r4
000230  4628              MOV      r0,r5
000232  f7fffffe          BL       lc640_write_int
;;;173    	
;;;174    event_cnt=lc640_read_int(CNT_EVENT_LOG);
000236  f6406602          MOV      r6,#0xe02
00023a  4630              MOV      r0,r6
00023c  f7fffffe          BL       lc640_read_int
;;;175    if(event_cnt!=63)event_cnt=event_ptr;
000240  283f              CMP      r0,#0x3f
000242  d000              BEQ      |L1.582|
000244  4620              MOV      r0,r4
                  |L1.582|
;;;176    lc640_write_int(CNT_EVENT_LOG,event_cnt); 
000246  b201              SXTH     r1,r0
000248  4630              MOV      r0,r6
00024a  f7fffffe          BL       lc640_write_int
;;;177    	
;;;178    lc640_adr=EVENT_LOG+(lc640_read_int(PTR_EVENT_LOG)*32);
00024e  4628              MOV      r0,r5
000250  f7fffffe          BL       lc640_read_int
000254  f44f6180          MOV      r1,#0x400
000258  eb011440          ADD      r4,r1,r0,LSL #5
;;;179    	
;;;180    data[0]='U';
00025c  f04f0055          MOV      r0,#0x55
000260  f88d0000          STRB     r0,[sp,#0]
;;;181    data[1]=0;
000264  f04f0600          MOV      r6,#0
000268  f88d6001          STRB     r6,[sp,#1]
;;;182    data[2]='R';
00026c  f04f0052          MOV      r0,#0x52
000270  f88d0002          STRB     r0,[sp,#2]
;;;183    data[3]=0;
000274  f88d6003          STRB     r6,[sp,#3]
;;;184    lc640_write_long_ptr(lc640_adr,data);
000278  4669              MOV      r1,sp
00027a  4620              MOV      r0,r4
00027c  f7fffffe          BL       lc640_write_long_ptr
;;;185    
;;;186    data[0]=0;
;;;187    data[1]=0;
;;;188    data[2]=0;
;;;189    data[3]=0;
000280  9600              STR      r6,[sp,#0]
;;;190    lc640_write_long_ptr(lc640_adr+4,data);
000282  4669              MOV      r1,sp
000284  1d20              ADDS     r0,r4,#4
000286  f7fffffe          BL       lc640_write_long_ptr
;;;191    
;;;192    data[0]=LPC_RTC->YEAR;
00028a  4d69              LDR      r5,|L1.1072|
00028c  8ba8              LDRH     r0,[r5,#0x1c]
00028e  f88d0000          STRB     r0,[sp,#0]
;;;193    data[1]=LPC_RTC->MONTH;
000292  7e28              LDRB     r0,[r5,#0x18]
000294  f88d0001          STRB     r0,[sp,#1]
;;;194    data[2]=LPC_RTC->DOM;
000298  7b28              LDRB     r0,[r5,#0xc]
00029a  f88d0002          STRB     r0,[sp,#2]
;;;195    data[3]=0;
00029e  f88d6003          STRB     r6,[sp,#3]
;;;196    lc640_write_long_ptr(lc640_adr+8,data);
0002a2  4669              MOV      r1,sp
0002a4  f1040008          ADD      r0,r4,#8
0002a8  f7fffffe          BL       lc640_write_long_ptr
;;;197    
;;;198    data[0]=LPC_RTC->HOUR;
0002ac  7a28              LDRB     r0,[r5,#8]
0002ae  f88d0000          STRB     r0,[sp,#0]
;;;199    data[1]=LPC_RTC->MIN;
0002b2  7928              LDRB     r0,[r5,#4]
0002b4  f88d0001          STRB     r0,[sp,#1]
;;;200    data[2]=LPC_RTC->SEC;
0002b8  7828              LDRB     r0,[r5,#0]
0002ba  f88d0002          STRB     r0,[sp,#2]
;;;201    data[3]=LPC_SC->RSID;
0002be  485d              LDR      r0,|L1.1076|
0002c0  f8d00180          LDR      r0,[r0,#0x180]
0002c4  f88d0003          STRB     r0,[sp,#3]
;;;202    
;;;203    lc640_write_long_ptr(lc640_adr+12,data);
0002c8  4669              MOV      r1,sp
0002ca  f104000c          ADD      r0,r4,#0xc
0002ce  f7fffffe          BL       lc640_write_long_ptr
;;;204    	
;;;205    data[0]='A';
0002d2  f04f0541          MOV      r5,#0x41
0002d6  f88d5000          STRB     r5,[sp,#0]
;;;206    data[1]='A';
0002da  f88d5001          STRB     r5,[sp,#1]
;;;207    data[2]='A';
0002de  f88d5002          STRB     r5,[sp,#2]
;;;208    data[3]='A';
0002e2  f88d5003          STRB     r5,[sp,#3]
;;;209    lc640_write_long_ptr(lc640_adr+16,data);
0002e6  4669              MOV      r1,sp
0002e8  f1040010          ADD      r0,r4,#0x10
0002ec  f7fffffe          BL       lc640_write_long_ptr
;;;210    	
;;;211    data[0]='A';
0002f0  f88d5000          STRB     r5,[sp,#0]
;;;212    data[1]='A';
0002f4  f88d5001          STRB     r5,[sp,#1]
;;;213    data[2]='A';
0002f8  f88d5002          STRB     r5,[sp,#2]
;;;214    data[3]='A';
0002fc  f88d5003          STRB     r5,[sp,#3]
;;;215    lc640_write_long_ptr(lc640_adr+20,data);
000300  4669              MOV      r1,sp
000302  f1040014          ADD      r0,r4,#0x14
000306  f7fffffe          BL       lc640_write_long_ptr
;;;216    	
;;;217    data[0]='A';
00030a  f88d5000          STRB     r5,[sp,#0]
;;;218    data[1]='A';
00030e  f88d5001          STRB     r5,[sp,#1]
;;;219    data[2]='A';
000312  f88d5002          STRB     r5,[sp,#2]
;;;220    data[3]='A';
000316  f88d5003          STRB     r5,[sp,#3]
;;;221    lc640_write_long_ptr(lc640_adr+24,data);
00031a  4669              MOV      r1,sp
00031c  f1040018          ADD      r0,r4,#0x18
000320  f7fffffe          BL       lc640_write_long_ptr
;;;222    	
;;;223    data[0]='A';
000324  f88d5000          STRB     r5,[sp,#0]
;;;224    data[1]='A';
000328  f88d5001          STRB     r5,[sp,#1]
;;;225    data[2]='A';
00032c  f88d5002          STRB     r5,[sp,#2]
;;;226    data[3]='A';
000330  f88d5003          STRB     r5,[sp,#3]
;;;227    lc640_write_long_ptr(lc640_adr+28,data);				
000334  4669              MOV      r1,sp
000336  f104001c          ADD      r0,r4,#0x1c
00033a  f7fffffe          BL       lc640_write_long_ptr
;;;228    	
;;;229    	
;;;230    }
00033e  bdf8              POP      {r3-r7,pc}
;;;231    
                          ENDP

                  avar_unet_hndl PROC
;;;232    //-----------------------------------------------
;;;233    void avar_unet_hndl(char in)
000340  e92d43f8          PUSH     {r3-r9,lr}
;;;234    {
;;;235    
;;;236    char data[4];
;;;237    unsigned int event_ptr,lc640_adr,event_ptr_find,event_cnt;
;;;238    
;;;239    
;;;240    if(in==1)
;;;241    	{
;;;242    	net_av=1;
;;;243    
;;;244    	//beep_init(0x01L,'O');
;;;245    	//a.av.bAN=1;
;;;246    
;;;247    
;;;248    	//beep_init(0x33333333,'A');
;;;249    	 
;;;250    	event_ptr=lc640_read_int(PTR_EVENT_LOG);
;;;251    	event_ptr++;	
;;;252    	if(event_ptr>63)event_ptr=0;	
;;;253    	lc640_write_int(PTR_EVENT_LOG,event_ptr);	
;;;254    	
;;;255         event_cnt=lc640_read_int(CNT_EVENT_LOG);
;;;256    	if(event_cnt!=63)event_cnt=event_ptr;
;;;257    	lc640_write_int(CNT_EVENT_LOG,event_cnt); 
;;;258    	
;;;259    	lc640_adr=EVENT_LOG+(lc640_read_int(PTR_EVENT_LOG)*32);
;;;260    	
;;;261    	data[0]='P';
;;;262    	data[1]=0;
;;;263    	data[2]='A';
;;;264    	data[3]=0;
;;;265    	lc640_write_long_ptr(lc640_adr,data);
;;;266    
;;;267    	data[0]=0;//*((char*)&Unet_store);
;;;268    	data[1]=0;//*(((char*)&Unet_store)+1);
;;;269    	data[2]=0;
;;;270    	data[3]=0;
;;;271    	lc640_write_long_ptr(lc640_adr+4,data);
;;;272    
;;;273    	data[0]=LPC_RTC->YEAR;
000344  4f3a              LDR      r7,|L1.1072|
000346  492e              LDR      r1,|L1.1024|
000348  3f20              SUBS     r7,r7,#0x20
00034a  f44f6560          MOV      r5,#0xe00             ;250
00034e  f04f0800          MOV      r8,#0                 ;252
000352  f44f6980          MOV      r9,#0x400             ;259
000356  2801              CMP      r0,#1                 ;240
000358  d002              BEQ      |L1.864|
;;;274    	data[1]=LPC_RTC->MONTH;
;;;275    	data[2]=LPC_RTC->DOM;
;;;276    	data[3]=0;
;;;277    	lc640_write_long_ptr(lc640_adr+8,data);
;;;278    
;;;279    	data[0]=LPC_RTC->HOUR;
;;;280    	data[1]=LPC_RTC->MIN;
;;;281    	data[2]=LPC_RTC->SEC;
;;;282    	data[3]=0;
;;;283    	lc640_write_long_ptr(lc640_adr+12,data);
;;;284    	
;;;285    	data[0]='A';
;;;286    	data[1]='A';
;;;287    	data[2]='A';
;;;288    	data[3]='A';
;;;289    	lc640_write_long_ptr(lc640_adr+16,data);
;;;290    	
;;;291    	data[0]='A';
;;;292    	data[1]='A';
;;;293    	data[2]='A';
;;;294    	data[3]='A';
;;;295    	lc640_write_long_ptr(lc640_adr+20,data);
;;;296    	
;;;297    	data[0]='A';
;;;298    	data[1]='A';
;;;299    	data[2]='A';
;;;300    	data[3]='A';
;;;301    	lc640_write_long_ptr(lc640_adr+24,data);
;;;302    	
;;;303    	data[0]='A';
;;;304    	data[1]='A';
;;;305    	data[2]='A';
;;;306    	data[3]='A';
;;;307    	lc640_write_long_ptr(lc640_adr+28,data);				
;;;308    	
;;;309    /*	memo_out0[0]=0x55;
;;;310         memo_out0[1]=0x00+2;
;;;311         memo_out0[2]=1;
;;;312         memo_out0[3]=0x0b;
;;;313         memo_out0[4]=0x55;
;;;314         memo_out0[5]=0x55; 
;;;315         	
;;;316         memo_out0[6]=crc_87(memo_out0,6);
;;;317    	memo_out0[7]=crc_95(memo_out0,6);
;;;318         usart_out_adr0(memo_out0,8); 
;;;319    	*/
;;;320    	snmp_trap_send("Main power alarm",2,1,0);
;;;321    	}
;;;322    
;;;323    else if(in==0)
00035a  2800              CMP      r0,#0
00035c  d04f              BEQ      |L1.1022|
00035e  e144              B        |L1.1514|
                  |L1.864|
000360  f04f0001          MOV      r0,#1                 ;242
000364  7008              STRB     r0,[r1,#0]            ;242
000366  4628              MOV      r0,r5                 ;250
000368  f7fffffe          BL       lc640_read_int
00036c  f1000001          ADD      r0,r0,#1              ;251
000370  4604              MOV      r4,r0                 ;251
000372  2c3f              CMP      r4,#0x3f              ;252
000374  d901              BLS      |L1.890|
000376  f04f0400          MOV      r4,#0                 ;252
                  |L1.890|
00037a  b221              SXTH     r1,r4                 ;253
00037c  4628              MOV      r0,r5                 ;253
00037e  f7fffffe          BL       lc640_write_int
000382  f6406602          MOV      r6,#0xe02             ;255
000386  4630              MOV      r0,r6                 ;255
000388  f7fffffe          BL       lc640_read_int
00038c  283f              CMP      r0,#0x3f              ;256
00038e  d000              BEQ      |L1.914|
000390  4620              MOV      r0,r4                 ;256
                  |L1.914|
000392  b201              SXTH     r1,r0                 ;257
000394  4630              MOV      r0,r6                 ;257
000396  f7fffffe          BL       lc640_write_int
00039a  4628              MOV      r0,r5                 ;259
00039c  f7fffffe          BL       lc640_read_int
0003a0  eb091540          ADD      r5,r9,r0,LSL #5       ;259
0003a4  f04f0050          MOV      r0,#0x50              ;261
0003a8  f88d0000          STRB     r0,[sp,#0]            ;261
0003ac  f88d8001          STRB     r8,[sp,#1]            ;262
0003b0  f04f0441          MOV      r4,#0x41              ;263
0003b4  f88d4002          STRB     r4,[sp,#2]            ;263
0003b8  f88d8003          STRB     r8,[sp,#3]            ;264
0003bc  4669              MOV      r1,sp                 ;265
0003be  4628              MOV      r0,r5                 ;265
0003c0  f7fffffe          BL       lc640_write_long_ptr
0003c4  f8cd8000          STR      r8,[sp,#0]            ;270
0003c8  4669              MOV      r1,sp                 ;271
0003ca  1d28              ADDS     r0,r5,#4              ;271
0003cc  f7fffffe          BL       lc640_write_long_ptr
0003d0  f1070720          ADD      r7,r7,#0x20           ;273
0003d4  8bb8              LDRH     r0,[r7,#0x1c]         ;273
0003d6  f88d0000          STRB     r0,[sp,#0]            ;273
0003da  7e38              LDRB     r0,[r7,#0x18]         ;274
0003dc  f88d0001          STRB     r0,[sp,#1]            ;274
0003e0  7b38              LDRB     r0,[r7,#0xc]          ;275
0003e2  f88d0002          STRB     r0,[sp,#2]            ;275
0003e6  f88d8003          STRB     r8,[sp,#3]            ;276
0003ea  4669              MOV      r1,sp                 ;277
0003ec  f1050008          ADD      r0,r5,#8              ;277
0003f0  f7fffffe          BL       lc640_write_long_ptr
0003f4  7a38              LDRB     r0,[r7,#8]            ;279
0003f6  f88d0000          STRB     r0,[sp,#0]            ;279
0003fa  7938              LDRB     r0,[r7,#4]            ;280
0003fc  e01c              B        |L1.1080|
                  |L1.1022|
0003fe  e062              B        |L1.1222|
                  |L1.1024|
                          DCD      net_av
                  |L1.1028|
                          DCD      ||.data||
                  |L1.1032|
                          DCD      bat
                  |L1.1036|
                          DCD      bps
                  |L1.1040|
                          DCD      sk_av_stat
                  |L1.1044|
                          DCD      SK_ZVUK_EN
                  |L1.1048|
                          DCD      AV_OFF_AVT
                  |L1.1052|
                          DCD      0xeffffffe
                  |L1.1056|
                          DCD      status_izm_r
                  |L1.1060|
                          DCD      sk_alarm
                  |L1.1064|
                          DCD      status_di1
                  |L1.1068|
                          DCD      status_di2
                  |L1.1072|
                          DCD      0x40024020
                  |L1.1076|
                          DCD      0x400fc000
                  |L1.1080|
000438  f88d0001          STRB     r0,[sp,#1]            ;280
00043c  7838              LDRB     r0,[r7,#0]            ;281
00043e  f88d0002          STRB     r0,[sp,#2]            ;281
000442  f88d8003          STRB     r8,[sp,#3]            ;282
000446  4669              MOV      r1,sp                 ;283
000448  f105000c          ADD      r0,r5,#0xc            ;283
00044c  f7fffffe          BL       lc640_write_long_ptr
000450  f88d4000          STRB     r4,[sp,#0]            ;285
000454  f88d4001          STRB     r4,[sp,#1]            ;286
000458  f88d4002          STRB     r4,[sp,#2]            ;287
00045c  f88d4003          STRB     r4,[sp,#3]            ;288
000460  4669              MOV      r1,sp                 ;289
000462  f1050010          ADD      r0,r5,#0x10           ;289
000466  f7fffffe          BL       lc640_write_long_ptr
00046a  f88d4000          STRB     r4,[sp,#0]            ;291
00046e  f88d4001          STRB     r4,[sp,#1]            ;292
000472  f88d4002          STRB     r4,[sp,#2]            ;293
000476  f88d4003          STRB     r4,[sp,#3]            ;294
00047a  4669              MOV      r1,sp                 ;295
00047c  f1050014          ADD      r0,r5,#0x14           ;295
000480  f7fffffe          BL       lc640_write_long_ptr
000484  f88d4000          STRB     r4,[sp,#0]            ;297
000488  f88d4001          STRB     r4,[sp,#1]            ;298
00048c  f88d4002          STRB     r4,[sp,#2]            ;299
000490  f88d4003          STRB     r4,[sp,#3]            ;300
000494  4669              MOV      r1,sp                 ;301
000496  f1050018          ADD      r0,r5,#0x18           ;301
00049a  f7fffffe          BL       lc640_write_long_ptr
00049e  f88d4000          STRB     r4,[sp,#0]            ;303
0004a2  f88d4001          STRB     r4,[sp,#1]            ;304
0004a6  f88d4002          STRB     r4,[sp,#2]            ;305
0004aa  f88d4003          STRB     r4,[sp,#3]            ;306
0004ae  4669              MOV      r1,sp                 ;307
0004b0  f105001c          ADD      r0,r5,#0x1c           ;307
0004b4  f7fffffe          BL       lc640_write_long_ptr
0004b8  2300              MOVS     r3,#0                 ;320
0004ba  2201              MOVS     r2,#1                 ;320
0004bc  2102              MOVS     r1,#2                 ;320
0004be  a0fd              ADR      r0,|L1.2228|
0004c0  f7fffffe          BL       snmp_trap_send
0004c4  e091              B        |L1.1514|
                  |L1.1222|
;;;324    	{
;;;325    	net_av=0;
0004c6  f8818000          STRB     r8,[r1,#0]
;;;326    
;;;327      /*
;;;328    	SET_REG(C2GSR,3,24,8);
;;;329    	C2MOD=0;
;;;330    	bOUT_FREE2=1;*/
;;;331    
;;;332    
;;;333    	//C2MOD=0;
;;;334    
;;;335    	//can2_init(7,8,CANBitrate250k_60MHz);
;;;336    
;;;337         //beep_init(0x02L,'O');
;;;338    	//a_.av.bAN=0;
;;;339    	SET_REG(avar_stat,0,0,1);
0004ca  48ff              LDR      r0,|L1.2248|
0004cc  6801              LDR      r1,[r0,#0]  ; avar_stat
0004ce  f0210101          BIC      r1,r1,#1
0004d2  6001              STR      r1,[r0,#0]  ; avar_stat
;;;340    
;;;341    	//if(AV_OFF_AVT)a.av.bAN=0;
;;;342    	
;;;343    	if(AV_OFF_AVT) SET_REG(avar_ind_stat,0,0,1);
0004d4  49fd              LDR      r1,|L1.2252|
0004d6  8809              LDRH     r1,[r1,#0]  ; AV_OFF_AVT
0004d8  b119              CBZ      r1,|L1.1250|
0004da  6841              LDR      r1,[r0,#4]  ; avar_ind_stat
0004dc  f0210101          BIC      r1,r1,#1
0004e0  6041              STR      r1,[r0,#4]  ; avar_ind_stat
                  |L1.1250|
;;;344    
;;;345         event_ptr=lc640_read_int(PTR_EVENT_LOG);
0004e2  4628              MOV      r0,r5
0004e4  f7fffffe          BL       lc640_read_int
0004e8  4606              MOV      r6,r0
;;;346    	event_ptr_find=event_ptr;
0004ea  4634              MOV      r4,r6
                  |L1.1260|
;;;347    avar_unet_hndl_lbl1:
;;;348    	lc640_adr=EVENT_LOG+(event_ptr_find*32);
0004ec  eb091544          ADD      r5,r9,r4,LSL #5
;;;349    
;;;350         lc640_read_long_ptr(lc640_adr,data);
0004f0  4669              MOV      r1,sp
0004f2  4628              MOV      r0,r5
0004f4  f7fffffe          BL       lc640_read_long_ptr
;;;351         
;;;352         if(!((data[0]=='P')&&(data[1]==0)&&(data[2]=='A')))
0004f8  f89d0000          LDRB     r0,[sp,#0]
0004fc  2850              CMP      r0,#0x50
0004fe  d106              BNE      |L1.1294|
000500  f89d0001          LDRB     r0,[sp,#1]
000504  b918              CBNZ     r0,|L1.1294|
000506  f89d0002          LDRB     r0,[sp,#2]
00050a  2841              CMP      r0,#0x41
00050c  d008              BEQ      |L1.1312|
                  |L1.1294|
;;;353         	{        
;;;354         	if(event_ptr_find)event_ptr_find--;
00050e  b114              CBZ      r4,|L1.1302|
000510  f1a40401          SUB      r4,r4,#1
000514  e001              B        |L1.1306|
                  |L1.1302|
;;;355         	else event_ptr_find=63;
000516  f04f043f          MOV      r4,#0x3f
                  |L1.1306|
;;;356         	if(event_ptr_find==event_ptr)goto avar_unet_hndl_end;
00051a  42b4              CMP      r4,r6
00051c  d1e6              BNE      |L1.1260|
00051e  e064              B        |L1.1514|
                  |L1.1312|
;;;357         	else goto avar_unet_hndl_lbl1;
;;;358         	}
;;;359         else 
;;;360         	{
;;;361         	lc640_read_long_ptr(lc640_adr+16,data);
000520  4669              MOV      r1,sp
000522  f1050010          ADD      r0,r5,#0x10
000526  f7fffffe          BL       lc640_read_long_ptr
;;;362         	if(!((data[0]=='A')&&(data[1]=='A')&&(data[2]=='A')&&(data[3]=='A')))
00052a  f89d0000          LDRB     r0,[sp,#0]
00052e  2841              CMP      r0,#0x41
000530  d10b              BNE      |L1.1354|
000532  f89d0001          LDRB     r0,[sp,#1]
000536  2841              CMP      r0,#0x41
000538  d107              BNE      |L1.1354|
00053a  f89d0002          LDRB     r0,[sp,#2]
00053e  2841              CMP      r0,#0x41
000540  d103              BNE      |L1.1354|
000542  f89d0003          LDRB     r0,[sp,#3]
000546  2841              CMP      r0,#0x41
000548  d008              BEQ      |L1.1372|
                  |L1.1354|
;;;363         		{        
;;;364         		if(event_ptr_find)event_ptr_find--;
00054a  b114              CBZ      r4,|L1.1362|
00054c  f1a40401          SUB      r4,r4,#1
000550  e001              B        |L1.1366|
                  |L1.1362|
;;;365             		else event_ptr_find=63;
000552  f04f043f          MOV      r4,#0x3f
                  |L1.1366|
;;;366             		if(event_ptr_find==event_ptr)goto avar_unet_hndl_end;
000556  42b4              CMP      r4,r6
000558  d1c8              BNE      |L1.1260|
00055a  e046              B        |L1.1514|
                  |L1.1372|
;;;367         		else goto avar_unet_hndl_lbl1;
;;;368         		}
;;;369    
;;;370         	}	
;;;371    	
;;;372    	data[0]=LPC_RTC->YEAR;
00055c  f1070720          ADD      r7,r7,#0x20
000560  8bb8              LDRH     r0,[r7,#0x1c]
000562  f88d0000          STRB     r0,[sp,#0]
;;;373    	data[1]=LPC_RTC->MONTH;
000566  7e38              LDRB     r0,[r7,#0x18]
000568  f88d0001          STRB     r0,[sp,#1]
;;;374    	data[2]=LPC_RTC->DOM;
00056c  7b38              LDRB     r0,[r7,#0xc]
00056e  f88d0002          STRB     r0,[sp,#2]
;;;375    	data[3]=0;
000572  f88d8003          STRB     r8,[sp,#3]
;;;376    	lc640_write_long_ptr(lc640_adr+16,data);
000576  4669              MOV      r1,sp
000578  f1050010          ADD      r0,r5,#0x10
00057c  f7fffffe          BL       lc640_write_long_ptr
;;;377    
;;;378    	data[0]=LPC_RTC->HOUR;
000580  7a38              LDRB     r0,[r7,#8]
000582  f88d0000          STRB     r0,[sp,#0]
;;;379    	data[1]=LPC_RTC->MIN;
000586  7938              LDRB     r0,[r7,#4]
000588  f88d0001          STRB     r0,[sp,#1]
;;;380    	data[2]=LPC_RTC->SEC;
00058c  7838              LDRB     r0,[r7,#0]
00058e  f88d0002          STRB     r0,[sp,#2]
;;;381    	data[3]=0;
000592  f88d8003          STRB     r8,[sp,#3]
;;;382    	lc640_write_long_ptr(lc640_adr+20,data); 
000596  4669              MOV      r1,sp
000598  f1050014          ADD      r0,r5,#0x14
00059c  f7fffffe          BL       lc640_write_long_ptr
;;;383    	
;;;384    	data[0]=*((char*)(&net_Ustore));
0005a0  48cb              LDR      r0,|L1.2256|
0005a2  7801              LDRB     r1,[r0,#0]  ; net_Ustore
0005a4  f88d1000          STRB     r1,[sp,#0]
;;;385    	data[1]=*(((char*)(&net_Ustore))+1);
0005a8  7840              LDRB     r0,[r0,#1]  ; net_Ustore
0005aa  f88d0001          STRB     r0,[sp,#1]
;;;386    	data[2]='B';
0005ae  f04f0442          MOV      r4,#0x42
0005b2  f88d4002          STRB     r4,[sp,#2]
;;;387    	data[3]='B';
0005b6  f88d4003          STRB     r4,[sp,#3]
;;;388    	lc640_write_long_ptr(lc640_adr+24,data);
0005ba  4669              MOV      r1,sp
0005bc  f1050018          ADD      r0,r5,#0x18
0005c0  f7fffffe          BL       lc640_write_long_ptr
;;;389    	
;;;390    	data[0]='B';
0005c4  f88d4000          STRB     r4,[sp,#0]
;;;391    	data[1]='B';
0005c8  f88d4001          STRB     r4,[sp,#1]
;;;392    	data[2]='B';
0005cc  f88d4002          STRB     r4,[sp,#2]
;;;393    	data[3]='B';
0005d0  f88d4003          STRB     r4,[sp,#3]
;;;394    	lc640_write_long_ptr(lc640_adr+28,data);	
0005d4  4669              MOV      r1,sp
0005d6  f105001c          ADD      r0,r5,#0x1c
0005da  f7fffffe          BL       lc640_write_long_ptr
;;;395    	
;;;396    /*	memo_out0[0]=0x55;
;;;397         memo_out0[1]=0x00+2;
;;;398         memo_out0[2]=1;
;;;399         memo_out0[3]=0x0b;
;;;400         memo_out0[4]=0xaa;
;;;401         memo_out0[5]=0xaa; 
;;;402         	
;;;403         memo_out0[6]=crc_87(memo_out0,6);
;;;404    	memo_out0[7]=crc_95(memo_out0,6);
;;;405         usart_out_adr0(memo_out0,8); */
;;;406         snmp_trap_send("Main power alarm  clear",2,1,1);	
0005de  2301              MOVS     r3,#1
0005e0  461a              MOV      r2,r3
0005e2  2102              MOVS     r1,#2
0005e4  a0bb              ADR      r0,|L1.2260|
0005e6  f7fffffe          BL       snmp_trap_send
                  |L1.1514|
;;;407    	}
;;;408    avar_unet_hndl_end:
;;;409    	__nop();		
0005ea  bf00              NOP      
                  |L1.1516|
;;;410    }
0005ec  e8bd83f8          POP      {r3-r9,pc}
;;;411    
                          ENDP

                  avar_uout_hndl PROC
;;;413    //-----------------------------------------------
;;;414    void avar_uout_hndl(char in)
0005f0  e92d43f8          PUSH     {r3-r9,lr}
;;;415    {
;;;416    
;;;417    char data[4];
;;;418    unsigned int event_ptr,lc640_adr,event_ptr_find,event_cnt;
;;;419    
;;;420    
;;;421    if(in==1)
;;;422    	{
;;;423    	//net_av=1;
;;;424    
;;;425    	//beep_init(0x01L,'O');
;;;426    	//a.av.bAN=1;
;;;427    
;;;428    
;;;429    	//beep_init(0x33333333,'A');
;;;430    
;;;431    	if(load_U>U_OUT_KONTR_MAX)uout_av=1;
;;;432    	if(load_U<U_OUT_KONTR_MIN)uout_av=2;
;;;433    		 
;;;434    	event_ptr=lc640_read_int(PTR_EVENT_LOG);
;;;435    	event_ptr++;	
;;;436    	if(event_ptr>63)event_ptr=0;	
;;;437    	lc640_write_int(PTR_EVENT_LOG,event_ptr);	
;;;438    	
;;;439        event_cnt=lc640_read_int(CNT_EVENT_LOG);
;;;440    	if(event_cnt!=63)event_cnt=event_ptr;
;;;441    	lc640_write_int(CNT_EVENT_LOG,event_cnt); 
;;;442    	
;;;443    	lc640_adr=EVENT_LOG+(lc640_read_int(PTR_EVENT_LOG)*32);
;;;444    	
;;;445    	data[0]='Q';
;;;446    	data[1]=0;
;;;447    	data[2]='A';
;;;448    	data[3]=0;
;;;449    	lc640_write_long_ptr(lc640_adr,data);
;;;450    
;;;451    	data[0]=0;//*((char*)&Unet_store);
;;;452    	data[1]=0;//*(((char*)&Unet_store)+1);
;;;453    	data[2]=0;
;;;454    	data[3]=0;
;;;455    	lc640_write_long_ptr(lc640_adr+4,data);
;;;456    
;;;457    	data[0]=LPC_RTC->YEAR;
0005f4  4fbd              LDR      r7,|L1.2284|
0005f6  49be              LDR      r1,|L1.2288|
0005f8  f44f6560          MOV      r5,#0xe00             ;434
0005fc  f04f0800          MOV      r8,#0                 ;436
000600  f44f6980          MOV      r9,#0x400             ;443
000604  2801              CMP      r0,#1                 ;421
000606  d002              BEQ      |L1.1550|
;;;458    	data[1]=LPC_RTC->MONTH;
;;;459    	data[2]=LPC_RTC->DOM;
;;;460    	data[3]=0;
;;;461    	lc640_write_long_ptr(lc640_adr+8,data);
;;;462    
;;;463    	data[0]=LPC_RTC->HOUR;
;;;464    	data[1]=LPC_RTC->MIN;
;;;465    	data[2]=LPC_RTC->SEC;
;;;466    	data[3]=0;
;;;467    	lc640_write_long_ptr(lc640_adr+12,data);
;;;468    	
;;;469    	data[0]='A';
;;;470    	data[1]='A';
;;;471    	data[2]='A';
;;;472    	data[3]='A';
;;;473    	lc640_write_long_ptr(lc640_adr+16,data);
;;;474    	
;;;475    	data[0]='A';
;;;476    	data[1]='A';
;;;477    	data[2]='A';
;;;478    	data[3]='A';
;;;479    	lc640_write_long_ptr(lc640_adr+20,data);
;;;480    	
;;;481    	data[0]='A';
;;;482    	data[1]='A';
;;;483    	data[2]='A';
;;;484    	data[3]='A';
;;;485    	lc640_write_long_ptr(lc640_adr+24,data);
;;;486    	
;;;487    	data[0]='A';
;;;488    	data[1]='A';
;;;489    	data[2]='A';
;;;490    	data[3]='A';
;;;491    	lc640_write_long_ptr(lc640_adr+28,data);				
;;;492    	
;;;493    /*	memo_out0[0]=0x55;
;;;494         memo_out0[1]=0x00+2;
;;;495         memo_out0[2]=1;
;;;496         memo_out0[3]=0x0b;
;;;497         memo_out0[4]=0x55;
;;;498         memo_out0[5]=0x55; 
;;;499         	
;;;500         memo_out0[6]=crc_87(memo_out0,6);
;;;501    	memo_out0[7]=crc_95(memo_out0,6);
;;;502         usart_out_adr0(memo_out0,8); 
;;;503    	*/
;;;504    	//snmp_trap_send("Main power is off",2,1,0);
;;;505    	}
;;;506    
;;;507    else if(in==0)
000608  2800              CMP      r0,#0
00060a  d07e              BEQ      |L1.1802|
00060c  e126              B        |L1.2140|
                  |L1.1550|
00060e  48b9              LDR      r0,|L1.2292|
000610  4ab9              LDR      r2,|L1.2296|
000612  f9b00000          LDRSH    r0,[r0,#0]            ;431  ; load_U
000616  f9b22000          LDRSH    r2,[r2,#0]            ;431  ; U_OUT_KONTR_MAX
00061a  4290              CMP      r0,r2                 ;431
00061c  dd02              BLE      |L1.1572|
00061e  f04f0201          MOV      r2,#1                 ;431
000622  700a              STRB     r2,[r1,#0]            ;431
                  |L1.1572|
000624  4ab5              LDR      r2,|L1.2300|
000626  f9b22000          LDRSH    r2,[r2,#0]            ;432  ; U_OUT_KONTR_MIN
00062a  4290              CMP      r0,r2                 ;432
00062c  da02              BGE      |L1.1588|
00062e  f04f0002          MOV      r0,#2                 ;432
000632  7008              STRB     r0,[r1,#0]            ;432
                  |L1.1588|
000634  4628              MOV      r0,r5                 ;434
000636  f7fffffe          BL       lc640_read_int
00063a  f1000001          ADD      r0,r0,#1              ;435
00063e  4604              MOV      r4,r0                 ;435
000640  2c3f              CMP      r4,#0x3f              ;436
000642  d901              BLS      |L1.1608|
000644  f04f0400          MOV      r4,#0                 ;436
                  |L1.1608|
000648  b221              SXTH     r1,r4                 ;437
00064a  4628              MOV      r0,r5                 ;437
00064c  f7fffffe          BL       lc640_write_int
000650  f6406602          MOV      r6,#0xe02             ;439
000654  4630              MOV      r0,r6                 ;439
000656  f7fffffe          BL       lc640_read_int
00065a  283f              CMP      r0,#0x3f              ;440
00065c  d000              BEQ      |L1.1632|
00065e  4620              MOV      r0,r4                 ;440
                  |L1.1632|
000660  b201              SXTH     r1,r0                 ;441
000662  4630              MOV      r0,r6                 ;441
000664  f7fffffe          BL       lc640_write_int
000668  4628              MOV      r0,r5                 ;443
00066a  f7fffffe          BL       lc640_read_int
00066e  eb091540          ADD      r5,r9,r0,LSL #5       ;443
000672  f04f0051          MOV      r0,#0x51              ;445
000676  f88d0000          STRB     r0,[sp,#0]            ;445
00067a  f88d8001          STRB     r8,[sp,#1]            ;446
00067e  f04f0441          MOV      r4,#0x41              ;447
000682  f88d4002          STRB     r4,[sp,#2]            ;447
000686  f88d8003          STRB     r8,[sp,#3]            ;448
00068a  4669              MOV      r1,sp                 ;449
00068c  4628              MOV      r0,r5                 ;449
00068e  f7fffffe          BL       lc640_write_long_ptr
000692  f8cd8000          STR      r8,[sp,#0]            ;454
000696  4669              MOV      r1,sp                 ;455
000698  1d28              ADDS     r0,r5,#4              ;455
00069a  f7fffffe          BL       lc640_write_long_ptr
00069e  f1070720          ADD      r7,r7,#0x20           ;457
0006a2  8bb8              LDRH     r0,[r7,#0x1c]         ;457
0006a4  f88d0000          STRB     r0,[sp,#0]            ;457
0006a8  7e38              LDRB     r0,[r7,#0x18]         ;458
0006aa  f88d0001          STRB     r0,[sp,#1]            ;458
0006ae  7b38              LDRB     r0,[r7,#0xc]          ;459
0006b0  f88d0002          STRB     r0,[sp,#2]            ;459
0006b4  f88d8003          STRB     r8,[sp,#3]            ;460
0006b8  4669              MOV      r1,sp                 ;461
0006ba  f1050008          ADD      r0,r5,#8              ;461
0006be  f7fffffe          BL       lc640_write_long_ptr
0006c2  7a38              LDRB     r0,[r7,#8]            ;463
0006c4  f88d0000          STRB     r0,[sp,#0]            ;463
0006c8  7938              LDRB     r0,[r7,#4]            ;464
0006ca  f88d0001          STRB     r0,[sp,#1]            ;464
0006ce  7838              LDRB     r0,[r7,#0]            ;465
0006d0  f88d0002          STRB     r0,[sp,#2]            ;465
0006d4  f88d8003          STRB     r8,[sp,#3]            ;466
0006d8  4669              MOV      r1,sp                 ;467
0006da  f105000c          ADD      r0,r5,#0xc            ;467
0006de  f7fffffe          BL       lc640_write_long_ptr
0006e2  f88d4000          STRB     r4,[sp,#0]            ;469
0006e6  f88d4001          STRB     r4,[sp,#1]            ;470
0006ea  f88d4002          STRB     r4,[sp,#2]            ;471
0006ee  f88d4003          STRB     r4,[sp,#3]            ;472
0006f2  4669              MOV      r1,sp                 ;473
0006f4  f1050010          ADD      r0,r5,#0x10           ;473
0006f8  f7fffffe          BL       lc640_write_long_ptr
0006fc  f88d4000          STRB     r4,[sp,#0]            ;475
000700  f88d4001          STRB     r4,[sp,#1]            ;476
000704  f88d4002          STRB     r4,[sp,#2]            ;477
000708  e000              B        |L1.1804|
                  |L1.1802|
00070a  e021              B        |L1.1872|
                  |L1.1804|
00070c  f88d4003          STRB     r4,[sp,#3]            ;478
000710  4669              MOV      r1,sp                 ;479
000712  f1050014          ADD      r0,r5,#0x14           ;479
000716  f7fffffe          BL       lc640_write_long_ptr
00071a  f88d4000          STRB     r4,[sp,#0]            ;481
00071e  f88d4001          STRB     r4,[sp,#1]            ;482
000722  f88d4002          STRB     r4,[sp,#2]            ;483
000726  f88d4003          STRB     r4,[sp,#3]            ;484
00072a  4669              MOV      r1,sp                 ;485
00072c  f1050018          ADD      r0,r5,#0x18           ;485
000730  f7fffffe          BL       lc640_write_long_ptr
000734  f88d4000          STRB     r4,[sp,#0]            ;487
000738  f88d4001          STRB     r4,[sp,#1]            ;488
00073c  f88d4002          STRB     r4,[sp,#2]            ;489
000740  f88d4003          STRB     r4,[sp,#3]            ;490
000744  4669              MOV      r1,sp                 ;491
000746  f105001c          ADD      r0,r5,#0x1c           ;491
00074a  f7fffffe          BL       lc640_write_long_ptr
00074e  e085              B        |L1.2140|
                  |L1.1872|
;;;508    	{
;;;509    	uout_av=0;
000750  f8818000          STRB     r8,[r1,#0]
;;;510    
;;;511      /*
;;;512    	SET_REG(C2GSR,3,24,8);
;;;513    	C2MOD=0;
;;;514    	bOUT_FREE2=1;*/
;;;515    
;;;516    
;;;517    	//C2MOD=0;
;;;518    
;;;519    	//can2_init(7,8,CANBitrate250k_60MHz);
;;;520    
;;;521         //beep_init(0x02L,'O');
;;;522    	//a_.av.bAN=0;
;;;523    //	SET_REG(avar_stat,0,0,1);
;;;524    
;;;525    	//if(AV_OFF_AVT)a.av.bAN=0;
;;;526    	
;;;527    	//if(AV_OFF_AVT) SET_REG(avar_ind_stat,0,0,1);
;;;528    
;;;529        event_ptr=lc640_read_int(PTR_EVENT_LOG);
000754  4628              MOV      r0,r5
000756  f7fffffe          BL       lc640_read_int
00075a  4606              MOV      r6,r0
;;;530    	event_ptr_find=event_ptr;
00075c  4634              MOV      r4,r6
                  |L1.1886|
;;;531    avar_uout_hndl_lbl1:
;;;532    	lc640_adr=EVENT_LOG+(event_ptr_find*32);
00075e  eb091544          ADD      r5,r9,r4,LSL #5
;;;533    
;;;534         lc640_read_long_ptr(lc640_adr,data);
000762  4669              MOV      r1,sp
000764  4628              MOV      r0,r5
000766  f7fffffe          BL       lc640_read_long_ptr
;;;535         
;;;536         if(!((data[0]=='Q')&&(data[1]==0)&&(data[2]=='A')))
00076a  f89d0000          LDRB     r0,[sp,#0]
00076e  2851              CMP      r0,#0x51
000770  d106              BNE      |L1.1920|
000772  f89d0001          LDRB     r0,[sp,#1]
000776  b918              CBNZ     r0,|L1.1920|
000778  f89d0002          LDRB     r0,[sp,#2]
00077c  2841              CMP      r0,#0x41
00077e  d008              BEQ      |L1.1938|
                  |L1.1920|
;;;537         	{        
;;;538         	if(event_ptr_find)event_ptr_find--;
000780  b114              CBZ      r4,|L1.1928|
000782  f1a40401          SUB      r4,r4,#1
000786  e001              B        |L1.1932|
                  |L1.1928|
;;;539         	else event_ptr_find=63;
000788  f04f043f          MOV      r4,#0x3f
                  |L1.1932|
;;;540         	if(event_ptr_find==event_ptr)goto avar_unet_hndl_end;
00078c  42b4              CMP      r4,r6
00078e  d1e6              BNE      |L1.1886|
000790  e064              B        |L1.2140|
                  |L1.1938|
;;;541         	else goto avar_uout_hndl_lbl1;
;;;542         	}
;;;543         else 
;;;544         	{
;;;545         	lc640_read_long_ptr(lc640_adr+16,data);
000792  4669              MOV      r1,sp
000794  f1050010          ADD      r0,r5,#0x10
000798  f7fffffe          BL       lc640_read_long_ptr
;;;546         	if(!((data[0]=='A')&&(data[1]=='A')&&(data[2]=='A')&&(data[3]=='A')))
00079c  f89d0000          LDRB     r0,[sp,#0]
0007a0  2841              CMP      r0,#0x41
0007a2  d10b              BNE      |L1.1980|
0007a4  f89d0001          LDRB     r0,[sp,#1]
0007a8  2841              CMP      r0,#0x41
0007aa  d107              BNE      |L1.1980|
0007ac  f89d0002          LDRB     r0,[sp,#2]
0007b0  2841              CMP      r0,#0x41
0007b2  d103              BNE      |L1.1980|
0007b4  f89d0003          LDRB     r0,[sp,#3]
0007b8  2841              CMP      r0,#0x41
0007ba  d008              BEQ      |L1.1998|
                  |L1.1980|
;;;547         		{        
;;;548         		if(event_ptr_find)event_ptr_find--;
0007bc  b114              CBZ      r4,|L1.1988|
0007be  f1a40401          SUB      r4,r4,#1
0007c2  e001              B        |L1.1992|
                  |L1.1988|
;;;549             		else event_ptr_find=63;
0007c4  f04f043f          MOV      r4,#0x3f
                  |L1.1992|
;;;550             		if(event_ptr_find==event_ptr)goto avar_unet_hndl_end;
0007c8  42b4              CMP      r4,r6
0007ca  d1c8              BNE      |L1.1886|
0007cc  e046              B        |L1.2140|
                  |L1.1998|
;;;551         		else goto avar_uout_hndl_lbl1;
;;;552         		}
;;;553    
;;;554         	}	
;;;555    	
;;;556    	data[0]=LPC_RTC->YEAR;
0007ce  f1070720          ADD      r7,r7,#0x20
0007d2  8bb8              LDRH     r0,[r7,#0x1c]
0007d4  f88d0000          STRB     r0,[sp,#0]
;;;557    	data[1]=LPC_RTC->MONTH;
0007d8  7e38              LDRB     r0,[r7,#0x18]
0007da  f88d0001          STRB     r0,[sp,#1]
;;;558    	data[2]=LPC_RTC->DOM;
0007de  7b38              LDRB     r0,[r7,#0xc]
0007e0  f88d0002          STRB     r0,[sp,#2]
;;;559    	data[3]=0;
0007e4  f88d8003          STRB     r8,[sp,#3]
;;;560    	lc640_write_long_ptr(lc640_adr+16,data);
0007e8  4669              MOV      r1,sp
0007ea  f1050010          ADD      r0,r5,#0x10
0007ee  f7fffffe          BL       lc640_write_long_ptr
;;;561    
;;;562    	data[0]=LPC_RTC->HOUR;
0007f2  7a38              LDRB     r0,[r7,#8]
0007f4  f88d0000          STRB     r0,[sp,#0]
;;;563    	data[1]=LPC_RTC->MIN;
0007f8  7938              LDRB     r0,[r7,#4]
0007fa  f88d0001          STRB     r0,[sp,#1]
;;;564    	data[2]=LPC_RTC->SEC;
0007fe  7838              LDRB     r0,[r7,#0]
000800  f88d0002          STRB     r0,[sp,#2]
;;;565    	data[3]=0;
000804  f88d8003          STRB     r8,[sp,#3]
;;;566    	lc640_write_long_ptr(lc640_adr+20,data); 
000808  4669              MOV      r1,sp
00080a  f1050014          ADD      r0,r5,#0x14
00080e  f7fffffe          BL       lc640_write_long_ptr
;;;567    	
;;;568    	data[0]=*((char*)(&net_Ustore));
000812  482f              LDR      r0,|L1.2256|
000814  7801              LDRB     r1,[r0,#0]  ; net_Ustore
000816  f88d1000          STRB     r1,[sp,#0]
;;;569    	data[1]=*(((char*)(&net_Ustore))+1);
00081a  7840              LDRB     r0,[r0,#1]  ; net_Ustore
00081c  f88d0001          STRB     r0,[sp,#1]
;;;570    	data[2]='B';
000820  f04f0442          MOV      r4,#0x42
000824  f88d4002          STRB     r4,[sp,#2]
;;;571    	data[3]='B';
000828  f88d4003          STRB     r4,[sp,#3]
;;;572    	lc640_write_long_ptr(lc640_adr+24,data);
00082c  4669              MOV      r1,sp
00082e  f1050018          ADD      r0,r5,#0x18
000832  f7fffffe          BL       lc640_write_long_ptr
;;;573    	
;;;574    	data[0]='B';
000836  f88d4000          STRB     r4,[sp,#0]
;;;575    	data[1]='B';
00083a  f88d4001          STRB     r4,[sp,#1]
;;;576    	data[2]='B';
00083e  f88d4002          STRB     r4,[sp,#2]
;;;577    	data[3]='B';
000842  f88d4003          STRB     r4,[sp,#3]
;;;578    	lc640_write_long_ptr(lc640_adr+28,data);	
000846  4669              MOV      r1,sp
000848  f105001c          ADD      r0,r5,#0x1c
00084c  f7fffffe          BL       lc640_write_long_ptr
;;;579    	
;;;580    /*	memo_out0[0]=0x55;
;;;581         memo_out0[1]=0x00+2;
;;;582         memo_out0[2]=1;
;;;583         memo_out0[3]=0x0b;
;;;584         memo_out0[4]=0xaa;
;;;585         memo_out0[5]=0xaa; 
;;;586         	
;;;587         memo_out0[6]=crc_87(memo_out0,6);
;;;588    	memo_out0[7]=crc_95(memo_out0,6);
;;;589         usart_out_adr0(memo_out0,8); */
;;;590         snmp_trap_send("Main power is on",2,1,1);	
000850  2301              MOVS     r3,#1
000852  461a              MOV      r2,r3
000854  2102              MOVS     r1,#2
000856  a02a              ADR      r0,|L1.2304|
000858  f7fffffe          BL       snmp_trap_send
                  |L1.2140|
;;;591    	}
;;;592    avar_unet_hndl_end:
;;;593    	__nop();		
00085c  bf00              NOP      
;;;594    }
00085e  e6c5              B        |L1.1516|
;;;595    
                          ENDP

                  avar_bps_hndl PROC
;;;596    //-----------------------------------------------
;;;597    void avar_bps_hndl(char dev, char v, char in)
000860  e92d4ff8          PUSH     {r3-r11,lr}
;;;598    {
000864  4606              MOV      r6,r0
000866  460c              MOV      r4,r1
;;;599    char data[4];
;;;600    unsigned short event_ptr,lc640_adr,event_ptr_find,event_cnt;
;;;601    char avar_simbol;
;;;602    
;;;603    avar_simbol='T';
000868  f04f0754          MOV      r7,#0x54
;;;604    if(v==0)avar_simbol='T';
00086c  b174              CBZ      r4,|L1.2188|
;;;605    else if(v==1)avar_simbol='U';
00086e  2c01              CMP      r4,#1
000870  d004              BEQ      |L1.2172|
;;;606    else if(v==2)avar_simbol='u';
000872  2c02              CMP      r4,#2
000874  d005              BEQ      |L1.2178|
;;;607    else if(v==3)avar_simbol='L';
000876  2c03              CMP      r4,#3
000878  d006              BEQ      |L1.2184|
00087a  e007              B        |L1.2188|
                  |L1.2172|
00087c  f04f0755          MOV      r7,#0x55              ;605
000880  e004              B        |L1.2188|
                  |L1.2178|
000882  f04f0775          MOV      r7,#0x75              ;606
000886  e001              B        |L1.2188|
                  |L1.2184|
000888  f04f074c          MOV      r7,#0x4c
                  |L1.2188|
;;;608    
;;;609    if(in==1)
;;;610    	{
;;;611    	//av_src[bps]=1;
;;;612    
;;;613    //	SET_REG(avar_ind_stat,1,3+dev,1);
;;;614    //	SET_REG(avar_stat,1,3+dev,1);
;;;615    	
;;;616    	if(v==0)bps[dev]._av|=(1<<0);
00088c  4821              LDR      r0,|L1.2324|
00088e  ebc601c6          RSB      r1,r6,r6,LSL #3
;;;617    	else if(v==1) bps[dev]._av|=(1<<1);
;;;618    	else if(v==2) bps[dev]._av|=(1<<2);
;;;619    	else if(v==3) bps[dev]._av|=(1<<3);
;;;620    
;;;621    	bps[dev]._last_avar=v;
;;;622    
;;;623    	//beep_init(0x33333333,'A');
;;;624    
;;;625    	event_ptr=lc640_read_int(PTR_EVENT_LOG);
;;;626    	event_ptr++;	
;;;627    	if(event_ptr>63)event_ptr=0;	
;;;628    	lc640_write_int(PTR_EVENT_LOG,event_ptr);	
;;;629    	
;;;630         event_cnt=lc640_read_int(CNT_EVENT_LOG);
;;;631    	if(event_cnt!=63)event_cnt=event_ptr;
;;;632    	lc640_write_int(CNT_EVENT_LOG,event_cnt); 
;;;633    	
;;;634    	lc640_adr=EVENT_LOG+(lc640_read_int(PTR_EVENT_LOG)*32);
;;;635    	
;;;636    	data[0]='S';
;;;637    	data[1]=dev; 
;;;638    	data[2]=avar_simbol;
;;;639    	data[3]=0;
;;;640    	lc640_write_long_ptr(lc640_adr,data);
;;;641    
;;;642    	data[0]=0;
;;;643    	data[1]=0;
;;;644    	data[2]=0;
;;;645    	data[3]=0;
;;;646    	lc640_write_long_ptr(lc640_adr+4,data);
;;;647    
;;;648    	data[0]=LPC_RTC->YEAR;
000892  f8df8058          LDR      r8,|L1.2284|
000896  eb011106          ADD      r1,r1,r6,LSL #4       ;616
00089a  f04f0900          MOV      r9,#0                 ;598
00089e  f44f6a60          MOV      r10,#0xe00            ;625
0008a2  f44f6580          MOV      r5,#0x400             ;634
0008a6  eb000081          ADD      r0,r0,r1,LSL #2       ;616
0008aa  2a01              CMP      r2,#1                 ;609
0008ac  d034              BEQ      |L1.2328|
;;;649    	data[1]=LPC_RTC->MONTH;
;;;650    	data[2]=LPC_RTC->DOM;
;;;651    	data[3]=0;
;;;652    	lc640_write_long_ptr(lc640_adr+8,data);
;;;653    
;;;654    	data[0]=LPC_RTC->HOUR;
;;;655    	data[1]=LPC_RTC->MIN;
;;;656    	data[2]=LPC_RTC->SEC;
;;;657    	data[3]=0;
;;;658    	lc640_write_long_ptr(lc640_adr+12,data);
;;;659    	
;;;660    	data[0]='A';
;;;661    	data[1]='A';
;;;662    	data[2]='A';
;;;663    	data[3]='A';
;;;664    	lc640_write_long_ptr(lc640_adr+16,data);
;;;665    	
;;;666    	data[0]='A';
;;;667    	data[1]='A';
;;;668    	data[2]='A';
;;;669    	data[3]='A';
;;;670    	lc640_write_long_ptr(lc640_adr+20,data);
;;;671    	
;;;672    	data[0]='A';
;;;673    	data[1]='A';
;;;674    	data[2]='A';
;;;675    	data[3]='A';
;;;676    	lc640_write_long_ptr(lc640_adr+24,data);
;;;677    	
;;;678    	data[0]='A';
;;;679    	data[1]='A';
;;;680    	data[2]='A';
;;;681    	data[3]='A';
;;;682    	lc640_write_long_ptr(lc640_adr+28,data);		
;;;683    
;;;684    
;;;685    	if(dev==0)
;;;686    		{
;;;687    		if(v==0)
;;;688    		snmp_trap_send("BPS #1 Alarm, overheat",4,1,0);
;;;689    		else if(v==1)
;;;690    		snmp_trap_send("BPS #1 Alarm, voltage is up",4,1,1);
;;;691    		else if(v==2)
;;;692    		snmp_trap_send("BPS #1 Alarm, voltage is down",4,1,2);
;;;693    		else if(v==3)
;;;694    		snmp_trap_send("BPS #1 Alarm, connect is lost",4,1,3);
;;;695    		}
;;;696    	else if(dev==1)
;;;697    		{
;;;698    		if(v==0)
;;;699    		snmp_trap_send("BPS #2 Alarm, overheat",4,2,0);
;;;700    		else if(v==1)
;;;701    		snmp_trap_send("BPS #2 Alarm, voltage is up",4,2,1);
;;;702    		else if(v==2)
;;;703    		snmp_trap_send("BPS #2 Alarm, voltage is down",4,2,2);
;;;704    		else if(v==3)
;;;705    		snmp_trap_send("BPS #2 Alarm, connect is lost",4,2,3);
;;;706    		} 
;;;707    	else if(dev==2)
;;;708    		{
;;;709    		if(v==0)
;;;710    		snmp_trap_send("BPS #3 Alarm, overheat",4,3,0);
;;;711    		else if(v==1)
;;;712    		snmp_trap_send("BPS #3 Alarm, voltage is up",4,3,1);
;;;713    		else if(v==2)
;;;714    		snmp_trap_send("BPS #3 Alarm, voltage is down",4,3,2);
;;;715    		else if(v==3)
;;;716    		snmp_trap_send("BPS #3 Alarm, connect is lost",4,3,3);
;;;717    		} 	
;;;718    			
;;;719    	}
;;;720    
;;;721    else if(in==0)
0008ae  2a00              CMP      r2,#0
0008b0  d07e              BEQ      |L1.2480|
0008b2  e1f6              B        |L1.3234|
                  |L1.2228|
0008b4  4d61696e          DCB      "Main power alarm",0
0008b8  20706f77
0008bc  65722061
0008c0  6c61726d
0008c4  00      
0008c5  00                DCB      0
0008c6  00                DCB      0
0008c7  00                DCB      0
                  |L1.2248|
                          DCD      ||.data||
                  |L1.2252|
                          DCD      AV_OFF_AVT
                  |L1.2256|
                          DCD      net_Ustore
                  |L1.2260|
0008d4  4d61696e          DCB      "Main power alarm  clear",0
0008d8  20706f77
0008dc  65722061
0008e0  6c61726d
0008e4  2020636c
0008e8  65617200
                  |L1.2284|
                          DCD      0x40024000
                  |L1.2288|
                          DCD      uout_av
                  |L1.2292|
                          DCD      load_U
                  |L1.2296|
                          DCD      U_OUT_KONTR_MAX
                  |L1.2300|
                          DCD      U_OUT_KONTR_MIN
                  |L1.2304|
000900  4d61696e          DCB      "Main power is on",0
000904  20706f77
000908  65722069
00090c  73206f6e
000910  00      
000911  00                DCB      0
000912  00                DCB      0
000913  00                DCB      0
                  |L1.2324|
                          DCD      bps
                  |L1.2328|
000918  b134              CBZ      r4,|L1.2344|
00091a  2c01              CMP      r4,#1                 ;617
00091c  d009              BEQ      |L1.2354|
00091e  2c02              CMP      r4,#2                 ;618
000920  d00c              BEQ      |L1.2364|
000922  2c03              CMP      r4,#3                 ;619
000924  d00f              BEQ      |L1.2374|
000926  e012              B        |L1.2382|
                  |L1.2344|
000928  7841              LDRB     r1,[r0,#1]            ;616
00092a  f0410101          ORR      r1,r1,#1              ;616
00092e  7041              STRB     r1,[r0,#1]            ;616
000930  e00d              B        |L1.2382|
                  |L1.2354|
000932  7841              LDRB     r1,[r0,#1]            ;617
000934  f0410102          ORR      r1,r1,#2              ;617
000938  7041              STRB     r1,[r0,#1]            ;617
00093a  e008              B        |L1.2382|
                  |L1.2364|
00093c  7841              LDRB     r1,[r0,#1]            ;618
00093e  f0410104          ORR      r1,r1,#4              ;618
000942  7041              STRB     r1,[r0,#1]            ;618
000944  e003              B        |L1.2382|
                  |L1.2374|
000946  7841              LDRB     r1,[r0,#1]            ;619
000948  f0410108          ORR      r1,r1,#8              ;619
00094c  7041              STRB     r1,[r0,#1]            ;619
                  |L1.2382|
00094e  f8804053          STRB     r4,[r0,#0x53]         ;621
000952  4650              MOV      r0,r10                ;625
000954  f7fffffe          BL       lc640_read_int
000958  f1000001          ADD      r0,r0,#1              ;626
00095c  fa1ffb80          UXTH     r11,r0                ;626
000960  f1bb0f3f          CMP      r11,#0x3f             ;627
000964  d901              BLS      |L1.2410|
000966  f04f0b00          MOV      r11,#0                ;627
                  |L1.2410|
00096a  fa0ff18b          SXTH     r1,r11                ;628
00096e  4650              MOV      r0,r10                ;628
000970  f7fffffe          BL       lc640_write_int
000974  f6406002          MOV      r0,#0xe02             ;630
000978  f7fffffe          BL       lc640_read_int
00097c  b280              UXTH     r0,r0                 ;630
00097e  283f              CMP      r0,#0x3f              ;631
000980  d000              BEQ      |L1.2436|
000982  4658              MOV      r0,r11                ;631
                  |L1.2436|
000984  b201              SXTH     r1,r0                 ;632
000986  f6406002          MOV      r0,#0xe02             ;632
00098a  f7fffffe          BL       lc640_write_int
00098e  4650              MOV      r0,r10                ;634
000990  f7fffffe          BL       lc640_read_int
000994  eb051040          ADD      r0,r5,r0,LSL #5       ;634
000998  b285              UXTH     r5,r0                 ;634
00099a  f04f0053          MOV      r0,#0x53              ;636
00099e  f88d0000          STRB     r0,[sp,#0]            ;636
0009a2  f88d6001          STRB     r6,[sp,#1]            ;637
0009a6  f88d7002          STRB     r7,[sp,#2]            ;638
0009aa  f88d9003          STRB     r9,[sp,#3]            ;639
0009ae  e000              B        |L1.2482|
                  |L1.2480|
0009b0  e0d7              B        |L1.2914|
                  |L1.2482|
0009b2  4669              MOV      r1,sp                 ;640
0009b4  4628              MOV      r0,r5                 ;640
0009b6  f7fffffe          BL       lc640_write_long_ptr
0009ba  f8cd9000          STR      r9,[sp,#0]            ;645
0009be  4669              MOV      r1,sp                 ;646
0009c0  1d28              ADDS     r0,r5,#4              ;646
0009c2  f7fffffe          BL       lc640_write_long_ptr
0009c6  f8b8003c          LDRH     r0,[r8,#0x3c]         ;648
0009ca  f88d0000          STRB     r0,[sp,#0]            ;648
0009ce  f8980038          LDRB     r0,[r8,#0x38]         ;649
0009d2  f88d0001          STRB     r0,[sp,#1]            ;649
0009d6  f898002c          LDRB     r0,[r8,#0x2c]         ;650
0009da  f88d0002          STRB     r0,[sp,#2]            ;650
0009de  f88d9003          STRB     r9,[sp,#3]            ;651
0009e2  4669              MOV      r1,sp                 ;652
0009e4  f1050008          ADD      r0,r5,#8              ;652
0009e8  f7fffffe          BL       lc640_write_long_ptr
0009ec  f8980028          LDRB     r0,[r8,#0x28]         ;654
0009f0  f88d0000          STRB     r0,[sp,#0]            ;654
0009f4  f8980024          LDRB     r0,[r8,#0x24]         ;655
0009f8  f88d0001          STRB     r0,[sp,#1]            ;655
0009fc  f8980020          LDRB     r0,[r8,#0x20]         ;656
000a00  f88d0002          STRB     r0,[sp,#2]            ;656
000a04  f88d9003          STRB     r9,[sp,#3]            ;657
000a08  4669              MOV      r1,sp                 ;658
000a0a  f105000c          ADD      r0,r5,#0xc            ;658
000a0e  f7fffffe          BL       lc640_write_long_ptr
000a12  f04f0741          MOV      r7,#0x41              ;660
000a16  f88d7000          STRB     r7,[sp,#0]            ;660
000a1a  f88d7001          STRB     r7,[sp,#1]            ;661
000a1e  f88d7002          STRB     r7,[sp,#2]            ;662
000a22  f88d7003          STRB     r7,[sp,#3]            ;663
000a26  4669              MOV      r1,sp                 ;664
000a28  f1050010          ADD      r0,r5,#0x10           ;664
000a2c  f7fffffe          BL       lc640_write_long_ptr
000a30  f88d7000          STRB     r7,[sp,#0]            ;666
000a34  f88d7001          STRB     r7,[sp,#1]            ;667
000a38  f88d7002          STRB     r7,[sp,#2]            ;668
000a3c  f88d7003          STRB     r7,[sp,#3]            ;669
000a40  4669              MOV      r1,sp                 ;670
000a42  f1050014          ADD      r0,r5,#0x14           ;670
000a46  f7fffffe          BL       lc640_write_long_ptr
000a4a  f88d7000          STRB     r7,[sp,#0]            ;672
000a4e  f88d7001          STRB     r7,[sp,#1]            ;673
000a52  f88d7002          STRB     r7,[sp,#2]            ;674
000a56  f88d7003          STRB     r7,[sp,#3]            ;675
000a5a  4669              MOV      r1,sp                 ;676
000a5c  f1050018          ADD      r0,r5,#0x18           ;676
000a60  f7fffffe          BL       lc640_write_long_ptr
000a64  f88d7000          STRB     r7,[sp,#0]            ;678
000a68  f88d7001          STRB     r7,[sp,#1]            ;679
000a6c  f88d7002          STRB     r7,[sp,#2]            ;680
000a70  f88d7003          STRB     r7,[sp,#3]            ;681
000a74  4669              MOV      r1,sp                 ;682
000a76  f105001c          ADD      r0,r5,#0x1c           ;682
000a7a  f7fffffe          BL       lc640_write_long_ptr
000a7e  b126              CBZ      r6,|L1.2698|
000a80  2e01              CMP      r6,#1                 ;696
000a82  d026              BEQ      |L1.2770|
000a84  2e02              CMP      r6,#2                 ;707
000a86  d048              BEQ      |L1.2842|
000a88  e10b              B        |L1.3234|
                  |L1.2698|
000a8a  b134              CBZ      r4,|L1.2714|
000a8c  2c01              CMP      r4,#1                 ;689
000a8e  d00b              BEQ      |L1.2728|
000a90  2c02              CMP      r4,#2                 ;691
000a92  d010              BEQ      |L1.2742|
000a94  2c03              CMP      r4,#3                 ;693
000a96  d015              BEQ      |L1.2756|
000a98  e103              B        |L1.3234|
                  |L1.2714|
000a9a  2300              MOVS     r3,#0                 ;688
000a9c  2201              MOVS     r2,#1                 ;688
000a9e  2104              MOVS     r1,#4                 ;688
000aa0  a0d7              ADR      r0,|L1.3584|
000aa2  f7fffffe          BL       snmp_trap_send
000aa6  e0fc              B        |L1.3234|
                  |L1.2728|
000aa8  2301              MOVS     r3,#1                 ;690
000aaa  461a              MOV      r2,r3                 ;690
000aac  2104              MOVS     r1,#4                 ;690
000aae  a0da              ADR      r0,|L1.3608|
000ab0  f7fffffe          BL       snmp_trap_send
000ab4  e0f5              B        |L1.3234|
                  |L1.2742|
000ab6  2302              MOVS     r3,#2                 ;692
000ab8  2201              MOVS     r2,#1                 ;692
000aba  2104              MOVS     r1,#4                 ;692
000abc  a0dd              ADR      r0,|L1.3636|
000abe  f7fffffe          BL       snmp_trap_send
000ac2  e0ee              B        |L1.3234|
                  |L1.2756|
000ac4  2303              MOVS     r3,#3                 ;694
000ac6  2201              MOVS     r2,#1                 ;694
000ac8  2104              MOVS     r1,#4                 ;694
000aca  a0e2              ADR      r0,|L1.3668|
000acc  f7fffffe          BL       snmp_trap_send
000ad0  e0e7              B        |L1.3234|
                  |L1.2770|
000ad2  b134              CBZ      r4,|L1.2786|
000ad4  2c01              CMP      r4,#1                 ;700
000ad6  d00b              BEQ      |L1.2800|
000ad8  2c02              CMP      r4,#2                 ;702
000ada  d010              BEQ      |L1.2814|
000adc  2c03              CMP      r4,#3                 ;704
000ade  d015              BEQ      |L1.2828|
000ae0  e0df              B        |L1.3234|
                  |L1.2786|
000ae2  2300              MOVS     r3,#0                 ;699
000ae4  2202              MOVS     r2,#2                 ;699
000ae6  2104              MOVS     r1,#4                 ;699
000ae8  a0e2              ADR      r0,|L1.3700|
000aea  f7fffffe          BL       snmp_trap_send
000aee  e0d8              B        |L1.3234|
                  |L1.2800|
000af0  2301              MOVS     r3,#1                 ;701
000af2  2202              MOVS     r2,#2                 ;701
000af4  2104              MOVS     r1,#4                 ;701
000af6  a0e5              ADR      r0,|L1.3724|
000af8  f7fffffe          BL       snmp_trap_send
000afc  e0d1              B        |L1.3234|
                  |L1.2814|
000afe  2302              MOVS     r3,#2                 ;703
000b00  461a              MOV      r2,r3                 ;703
000b02  2104              MOVS     r1,#4                 ;703
000b04  a0e8              ADR      r0,|L1.3752|
000b06  f7fffffe          BL       snmp_trap_send
000b0a  e0ca              B        |L1.3234|
                  |L1.2828|
000b0c  2303              MOVS     r3,#3                 ;705
000b0e  2202              MOVS     r2,#2                 ;705
000b10  2104              MOVS     r1,#4                 ;705
000b12  a0ed              ADR      r0,|L1.3784|
000b14  f7fffffe          BL       snmp_trap_send
000b18  e0c3              B        |L1.3234|
                  |L1.2842|
000b1a  b134              CBZ      r4,|L1.2858|
000b1c  2c01              CMP      r4,#1                 ;711
000b1e  d00b              BEQ      |L1.2872|
000b20  2c02              CMP      r4,#2                 ;713
000b22  d010              BEQ      |L1.2886|
000b24  2c03              CMP      r4,#3                 ;715
000b26  d015              BEQ      |L1.2900|
000b28  e0bb              B        |L1.3234|
                  |L1.2858|
000b2a  2300              MOVS     r3,#0                 ;710
000b2c  2203              MOVS     r2,#3                 ;710
000b2e  2104              MOVS     r1,#4                 ;710
000b30  a0ed              ADR      r0,|L1.3816|
000b32  f7fffffe          BL       snmp_trap_send
000b36  e0b4              B        |L1.3234|
                  |L1.2872|
000b38  2301              MOVS     r3,#1                 ;712
000b3a  2203              MOVS     r2,#3                 ;712
000b3c  2104              MOVS     r1,#4                 ;712
000b3e  a0f0              ADR      r0,|L1.3840|
000b40  f7fffffe          BL       snmp_trap_send
000b44  e0ad              B        |L1.3234|
                  |L1.2886|
000b46  2302              MOVS     r3,#2                 ;714
000b48  2203              MOVS     r2,#3                 ;714
000b4a  2104              MOVS     r1,#4                 ;714
000b4c  a0f3              ADR      r0,|L1.3868|
000b4e  f7fffffe          BL       snmp_trap_send
000b52  e0a6              B        |L1.3234|
                  |L1.2900|
000b54  2303              MOVS     r3,#3                 ;716
000b56  461a              MOV      r2,r3                 ;716
000b58  2104              MOVS     r1,#4                 ;716
000b5a  a0f8              ADR      r0,|L1.3900|
000b5c  f7fffffe          BL       snmp_trap_send
000b60  e09f              B        |L1.3234|
                  |L1.2914|
;;;722    	{      
;;;723    //	av_bps[bps]=0;
;;;724    
;;;725    	//SET_REG(avar_stat,0,3+bps,1);
;;;726    	//if(AV_OFF_AVT) SET_REG(avar_ind_stat,0,3+bps,1);
;;;727    
;;;728         if(v==0) bps[dev]._av&=(~(1<<0));
000b62  b134              CBZ      r4,|L1.2930|
;;;729         else if(v==1) bps[dev]._av&=(~(1<<1));
000b64  2c01              CMP      r4,#1
000b66  d009              BEQ      |L1.2940|
;;;730    	else if(v==2) bps[dev]._av&=(~(1<<2));
000b68  2c02              CMP      r4,#2
000b6a  d00c              BEQ      |L1.2950|
;;;731    	else if(v==3) bps[dev]._av&=(~(1<<3));
000b6c  2c03              CMP      r4,#3
000b6e  d00f              BEQ      |L1.2960|
000b70  e012              B        |L1.2968|
                  |L1.2930|
000b72  7841              LDRB     r1,[r0,#1]            ;728
000b74  f0210101          BIC      r1,r1,#1              ;728
000b78  7041              STRB     r1,[r0,#1]            ;728
000b7a  e00d              B        |L1.2968|
                  |L1.2940|
000b7c  7841              LDRB     r1,[r0,#1]            ;729
000b7e  f0210102          BIC      r1,r1,#2              ;729
000b82  7041              STRB     r1,[r0,#1]            ;729
000b84  e008              B        |L1.2968|
                  |L1.2950|
000b86  7841              LDRB     r1,[r0,#1]            ;730
000b88  f0210104          BIC      r1,r1,#4              ;730
000b8c  7041              STRB     r1,[r0,#1]            ;730
000b8e  e003              B        |L1.2968|
                  |L1.2960|
000b90  7841              LDRB     r1,[r0,#1]
000b92  f0210108          BIC      r1,r1,#8
000b96  7041              STRB     r1,[r0,#1]
                  |L1.2968|
;;;732         
;;;733    //	if((bps[dev]._av&0x0f==0))
;;;734    //	     {
;;;735    		//SET_REG(avar_stat,0,3+bps,1);
;;;736    		//if(AV_OFF_AVT) SET_REG(avar_ind_stat,0,3+bps,1);
;;;737    //	     }
;;;738     
;;;739    	event_ptr=lc640_read_int(PTR_EVENT_LOG);
000b98  4650              MOV      r0,r10
000b9a  f7fffffe          BL       lc640_read_int
000b9e  fa1ffb80          UXTH     r11,r0
;;;740    	event_ptr_find=event_ptr;
000ba2  465c              MOV      r4,r11
                  |L1.2980|
;;;741    	
;;;742    avar_src_hndl_lbl1: 
;;;743    
;;;744    	lc640_adr=EVENT_LOG+(event_ptr_find*32);
000ba4  eb051044          ADD      r0,r5,r4,LSL #5
000ba8  fa1ffa80          UXTH     r10,r0
;;;745    
;;;746         lc640_read_long_ptr(lc640_adr,data);
000bac  4669              MOV      r1,sp
000bae  4650              MOV      r0,r10
000bb0  f7fffffe          BL       lc640_read_long_ptr
;;;747         
;;;748         if(!((data[0]=='S')&&(data[1]==dev)&&(data[2]==avar_simbol)))
000bb4  f89d0000          LDRB     r0,[sp,#0]
000bb8  2853              CMP      r0,#0x53
000bba  d107              BNE      |L1.3020|
000bbc  f89d0001          LDRB     r0,[sp,#1]
000bc0  42b0              CMP      r0,r6
000bc2  d103              BNE      |L1.3020|
000bc4  f89d0002          LDRB     r0,[sp,#2]
000bc8  42b8              CMP      r0,r7
000bca  d009              BEQ      |L1.3040|
                  |L1.3020|
;;;749         	{        
;;;750         	if(event_ptr_find)event_ptr_find--;
000bcc  b11c              CBZ      r4,|L1.3030|
000bce  f1a40401          SUB      r4,r4,#1
000bd2  b2a4              UXTH     r4,r4
000bd4  e001              B        |L1.3034|
                  |L1.3030|
;;;751         	else event_ptr_find=63;
000bd6  f04f043f          MOV      r4,#0x3f
                  |L1.3034|
;;;752         	if(event_ptr_find==event_ptr)goto avar_src_hndl_end;
000bda  455c              CMP      r4,r11
000bdc  d1e2              BNE      |L1.2980|
000bde  e060              B        |L1.3234|
                  |L1.3040|
;;;753         	else goto avar_src_hndl_lbl1;
;;;754         	}
;;;755         else 
;;;756         	{
;;;757         	lc640_read_long_ptr(lc640_adr+16,data);
000be0  4669              MOV      r1,sp
000be2  f10a0010          ADD      r0,r10,#0x10
000be6  f7fffffe          BL       lc640_read_long_ptr
;;;758         	if(!((data[0]=='A')&&(data[1]=='A')&&(data[2]=='A')&&(data[3]=='A')))
000bea  f89d0000          LDRB     r0,[sp,#0]
000bee  2841              CMP      r0,#0x41
000bf0  d10b              BNE      |L1.3082|
000bf2  f89d0001          LDRB     r0,[sp,#1]
000bf6  2841              CMP      r0,#0x41
000bf8  d107              BNE      |L1.3082|
000bfa  f89d0002          LDRB     r0,[sp,#2]
000bfe  2841              CMP      r0,#0x41
000c00  d103              BNE      |L1.3082|
000c02  f89d0003          LDRB     r0,[sp,#3]
000c06  2841              CMP      r0,#0x41
000c08  d009              BEQ      |L1.3102|
                  |L1.3082|
;;;759         		{        
;;;760         		if(event_ptr_find)event_ptr_find--;
000c0a  b11c              CBZ      r4,|L1.3092|
000c0c  f1a40401          SUB      r4,r4,#1
000c10  b2a4              UXTH     r4,r4
000c12  e001              B        |L1.3096|
                  |L1.3092|
;;;761             		else event_ptr_find=63;
000c14  f04f043f          MOV      r4,#0x3f
                  |L1.3096|
;;;762             		if(event_ptr_find==event_ptr)goto avar_src_hndl_end;
000c18  455c              CMP      r4,r11
000c1a  d1c3              BNE      |L1.2980|
000c1c  e041              B        |L1.3234|
                  |L1.3102|
;;;763         		else goto avar_src_hndl_lbl1;
;;;764         		}
;;;765    
;;;766         	}	
;;;767    
;;;768    
;;;769    	
;;;770    	data[0]=LPC_RTC->YEAR;
000c1e  f8b8003c          LDRH     r0,[r8,#0x3c]
000c22  f88d0000          STRB     r0,[sp,#0]
;;;771    	data[1]=LPC_RTC->MONTH;
000c26  f8980038          LDRB     r0,[r8,#0x38]
000c2a  f88d0001          STRB     r0,[sp,#1]
;;;772    	data[2]=LPC_RTC->DOM;
000c2e  f898002c          LDRB     r0,[r8,#0x2c]
000c32  f88d0002          STRB     r0,[sp,#2]
;;;773    	data[3]=0;
000c36  f88d9003          STRB     r9,[sp,#3]
;;;774    	lc640_write_long_ptr(lc640_adr+16,data);
000c3a  4669              MOV      r1,sp
000c3c  f10a0010          ADD      r0,r10,#0x10
000c40  f7fffffe          BL       lc640_write_long_ptr
;;;775    
;;;776    	data[0]=LPC_RTC->HOUR;
000c44  f8980028          LDRB     r0,[r8,#0x28]
000c48  f88d0000          STRB     r0,[sp,#0]
;;;777    	data[1]=LPC_RTC->MIN;
000c4c  f8980024          LDRB     r0,[r8,#0x24]
000c50  f88d0001          STRB     r0,[sp,#1]
;;;778    	data[2]=LPC_RTC->SEC;
000c54  f8980020          LDRB     r0,[r8,#0x20]
000c58  f88d0002          STRB     r0,[sp,#2]
;;;779    	data[3]=0;
000c5c  f88d9003          STRB     r9,[sp,#3]
;;;780    	lc640_write_long_ptr(lc640_adr+20,data);
000c60  4669              MOV      r1,sp
000c62  f10a0014          ADD      r0,r10,#0x14
000c66  f7fffffe          BL       lc640_write_long_ptr
;;;781    	
;;;782    	data[0]='B';
000c6a  f04f0442          MOV      r4,#0x42
000c6e  f88d4000          STRB     r4,[sp,#0]
;;;783    	data[1]='B';
000c72  f88d4001          STRB     r4,[sp,#1]
;;;784    	data[2]='B';
000c76  f88d4002          STRB     r4,[sp,#2]
;;;785    	data[3]='B';
000c7a  f88d4003          STRB     r4,[sp,#3]
;;;786    	lc640_write_long_ptr(lc640_adr+24,data);
000c7e  4669              MOV      r1,sp
000c80  f10a0018          ADD      r0,r10,#0x18
000c84  f7fffffe          BL       lc640_write_long_ptr
;;;787    	
;;;788    	data[0]='B';
000c88  f88d4000          STRB     r4,[sp,#0]
;;;789    	data[1]='B';
000c8c  f88d4001          STRB     r4,[sp,#1]
;;;790    	data[2]='B';
000c90  f88d4002          STRB     r4,[sp,#2]
;;;791    	data[3]='B';
000c94  f88d4003          STRB     r4,[sp,#3]
;;;792    	lc640_write_long_ptr(lc640_adr+28,data);
000c98  4669              MOV      r1,sp
000c9a  f10a001c          ADD      r0,r10,#0x1c
000c9e  f7fffffe          BL       lc640_write_long_ptr
                  |L1.3234|
;;;793    	
;;;794    	}
;;;795    	
;;;796    avar_src_hndl_end:
;;;797    __nop();		
000ca2  bf00              NOP      
                  |L1.3236|
;;;798    }
000ca4  e8bd8ff8          POP      {r3-r11,pc}
;;;799    
                          ENDP

                  wrk_mem_hndl PROC
;;;800    //-----------------------------------------------
;;;801    void wrk_mem_hndl(char b)
000ca8  e92d41fc          PUSH     {r2-r8,lr}
;;;802    {
000cac  4606              MOV      r6,r0
;;;803    char data[4];
;;;804    unsigned short event_ptr,lc640_adr/*,event_ptr_find*/,event_cnt;
;;;805    
;;;806    signed short temp_temp;
;;;807    
;;;808    if(bat[b]._Iintegr_<5) goto wrk_mem_hndl_end;
000cae  eb060046          ADD      r0,r6,r6,LSL #1
000cb2  eb001106          ADD      r1,r0,r6,LSL #4
000cb6  48a9              LDR      r0,|L1.3932|
000cb8  eb000481          ADD      r4,r0,r1,LSL #2
000cbc  8be0              LDRH     r0,[r4,#0x1e]
000cbe  2805              CMP      r0,#5
000cc0  d37e              BCC      |L1.3520|
;;;809    
;;;810    temp_temp=bat[b]._u_old[((bat_u_old_cnt+6)&0x07)]; 
000cc2  48a7              LDR      r0,|L1.3936|
000cc4  8800              LDRH     r0,[r0,#0]  ; bat_u_old_cnt
000cc6  f1000006          ADD      r0,r0,#6
000cca  f0000007          AND      r0,r0,#7
000cce  eb040040          ADD      r0,r4,r0,LSL #1
000cd2  8c00              LDRH     r0,[r0,#0x20]
000cd4  9000              STR      r0,[sp,#0]
;;;811    
;;;812    
;;;813    event_ptr=lc640_read_int(PTR_EVENT_LOG);
000cd6  f44f6760          MOV      r7,#0xe00
000cda  4638              MOV      r0,r7
000cdc  f7fffffe          BL       lc640_read_int
;;;814    event_ptr++;	
000ce0  f1000001          ADD      r0,r0,#1
000ce4  b285              UXTH     r5,r0
;;;815    if(event_ptr>63)event_ptr=0;	
000ce6  2d3f              CMP      r5,#0x3f
000ce8  d901              BLS      |L1.3310|
000cea  f04f0500          MOV      r5,#0
                  |L1.3310|
;;;816    lc640_write_int(PTR_EVENT_LOG,event_ptr);	
000cee  b229              SXTH     r1,r5
000cf0  4638              MOV      r0,r7
000cf2  f7fffffe          BL       lc640_write_int
;;;817    	
;;;818    event_cnt=lc640_read_int(CNT_EVENT_LOG);
000cf6  f6406802          MOV      r8,#0xe02
000cfa  4640              MOV      r0,r8
000cfc  f7fffffe          BL       lc640_read_int
000d00  b280              UXTH     r0,r0
;;;819    if(event_cnt!=63)event_cnt=event_ptr;
000d02  283f              CMP      r0,#0x3f
000d04  d000              BEQ      |L1.3336|
000d06  4628              MOV      r0,r5
                  |L1.3336|
;;;820    lc640_write_int(CNT_EVENT_LOG,event_cnt); 
000d08  b201              SXTH     r1,r0
000d0a  4640              MOV      r0,r8
000d0c  f7fffffe          BL       lc640_write_int
;;;821    	
;;;822    lc640_adr=EVENT_LOG+(lc640_read_int(PTR_EVENT_LOG)*32);
000d10  4638              MOV      r0,r7
000d12  f7fffffe          BL       lc640_read_int
000d16  f44f6180          MOV      r1,#0x400
000d1a  eb011040          ADD      r0,r1,r0,LSL #5
000d1e  b285              UXTH     r5,r0
;;;823    	
;;;824    data[0]='B';
000d20  f04f0042          MOV      r0,#0x42
000d24  f88d0004          STRB     r0,[sp,#4]
;;;825    data[1]=b; 
000d28  f88d6005          STRB     r6,[sp,#5]
;;;826    data[2]='W';
000d2c  f04f0057          MOV      r0,#0x57
000d30  f88d0006          STRB     r0,[sp,#6]
;;;827    data[3]=0;
000d34  f04f0600          MOV      r6,#0
000d38  f88d6007          STRB     r6,[sp,#7]
;;;828    
;;;829    lc640_write_long_ptr(lc640_adr,data);
000d3c  a901              ADD      r1,sp,#4
000d3e  4628              MOV      r0,r5
000d40  f7fffffe          BL       lc640_write_long_ptr
;;;830    
;;;831    data[0]=*((char*)&bat[b]._Iintegr_);
000d44  7fa0              LDRB     r0,[r4,#0x1e]
000d46  f88d0004          STRB     r0,[sp,#4]
;;;832    data[1]=*(((char*)(&bat[b]._Iintegr_))+1);
000d4a  7fe0              LDRB     r0,[r4,#0x1f]
000d4c  f88d0005          STRB     r0,[sp,#5]
;;;833    data[2]=*((char*)&temp_temp);
000d50  f89d0000          LDRB     r0,[sp,#0]
000d54  f88d0006          STRB     r0,[sp,#6]
;;;834    data[3]=*(((char*)(&temp_temp))+1);
000d58  f89d0001          LDRB     r0,[sp,#1]
000d5c  f88d0007          STRB     r0,[sp,#7]
;;;835    lc640_write_long_ptr(lc640_adr+4,data);
000d60  a901              ADD      r1,sp,#4
000d62  1d28              ADDS     r0,r5,#4
000d64  f7fffffe          BL       lc640_write_long_ptr
;;;836    
;;;837    lc640_write_long_ptr(lc640_adr+8,(char*)&bat[b]._wrk_date[0]);
000d68  f1040134          ADD      r1,r4,#0x34
000d6c  f1050008          ADD      r0,r5,#8
000d70  f7fffffe          BL       lc640_write_long_ptr
;;;838    	
;;;839    lc640_write_long_ptr(lc640_adr+12,(char*)&bat[b]._wrk_date[1]);
000d74  f1040138          ADD      r1,r4,#0x38
000d78  f105000c          ADD      r0,r5,#0xc
000d7c  f7fffffe          BL       lc640_write_long_ptr
;;;840    
;;;841    data[0]=LPC_RTC->YEAR;
000d80  4c78              LDR      r4,|L1.3940|
000d82  8ba0              LDRH     r0,[r4,#0x1c]
000d84  f88d0004          STRB     r0,[sp,#4]
;;;842    data[1]=LPC_RTC->MONTH;
000d88  7e20              LDRB     r0,[r4,#0x18]
000d8a  f88d0005          STRB     r0,[sp,#5]
;;;843    data[2]=LPC_RTC->DOM;
000d8e  7b20              LDRB     r0,[r4,#0xc]
000d90  f88d0006          STRB     r0,[sp,#6]
;;;844    data[3]=0;
000d94  f88d6007          STRB     r6,[sp,#7]
;;;845    lc640_write_long_ptr(lc640_adr+16,data);
000d98  a901              ADD      r1,sp,#4
000d9a  f1050010          ADD      r0,r5,#0x10
000d9e  f7fffffe          BL       lc640_write_long_ptr
;;;846    
;;;847    data[0]=LPC_RTC->HOUR;
000da2  7a20              LDRB     r0,[r4,#8]
000da4  f88d0004          STRB     r0,[sp,#4]
;;;848    data[1]=LPC_RTC->MIN;
000da8  7920              LDRB     r0,[r4,#4]
000daa  f88d0005          STRB     r0,[sp,#5]
;;;849    data[2]=LPC_RTC->SEC;
000dae  7820              LDRB     r0,[r4,#0]
000db0  f88d0006          STRB     r0,[sp,#6]
;;;850    data[3]=0;
000db4  f88d6007          STRB     r6,[sp,#7]
;;;851    lc640_write_long_ptr(lc640_adr+20,data);
000db8  a901              ADD      r1,sp,#4
000dba  f1050014          ADD      r0,r5,#0x14
000dbe  e000              B        |L1.3522|
                  |L1.3520|
000dc0  e001              B        |L1.3526|
                  |L1.3522|
000dc2  f7fffffe          BL       lc640_write_long_ptr
                  |L1.3526|
;;;852    	
;;;853    
;;;854    
;;;855    	
;;;856    wrk_mem_hndl_end:	
;;;857    __nop();
000dc6  bf00              NOP      
;;;858    }  
000dc8  e8bd81fc          POP      {r2-r8,pc}
;;;859    
                          ENDP

                  avar_bat_ips_hndl PROC
;;;861    //-----------------------------------------------
;;;862    void avar_bat_ips_hndl(char in)
000dcc  e92d4ff8          PUSH     {r3-r11,lr}
;;;863    {
000dd0  4602              MOV      r2,r0
;;;864    char data[4];
;;;865    unsigned short event_ptr,lc640_adr,event_ptr_find,event_cnt;
;;;866    
;;;867    if(in==1)
;;;868    	{
;;;869    	bat_ips._av|=1;
000dd2  4865              LDR      r0,|L1.3944|
;;;870        ips_bat_av_stat=1;
000dd4  4c65              LDR      r4,|L1.3948|
;;;871    	ips_bat_av_vzvod=1;
000dd6  4b66              LDR      r3,|L1.3952|
;;;872    
;;;873    	event_ptr=lc640_read_int(PTR_EVENT_LOG);
;;;874    	event_ptr++;	
;;;875    	if(event_ptr>63)event_ptr=0;	
;;;876    	lc640_write_int(PTR_EVENT_LOG,event_ptr);	
;;;877    	
;;;878    	event_cnt=lc640_read_int(CNT_EVENT_LOG);
;;;879    	if(event_cnt!=63)event_cnt=event_ptr;
;;;880    	lc640_write_int(CNT_EVENT_LOG,event_cnt); 
;;;881    	
;;;882    	lc640_adr=EVENT_LOG+(lc640_read_int(PTR_EVENT_LOG)*32);
;;;883    	
;;;884    	data[0]='B';
;;;885    	data[1]=0;
;;;886    	data[2]='C';
;;;887    	data[3]=0;
;;;888    	lc640_write_long_ptr(lc640_adr,data);
;;;889    
;;;890    	data[0]=0;
;;;891    	data[1]=0;
;;;892    	data[2]=0;
;;;893    	data[3]=0;
;;;894    	lc640_write_long_ptr(lc640_adr+4,data);
;;;895    
;;;896    	data[0]=LPC_RTC->YEAR;
000dd8  f8df8198          LDR      r8,|L1.3956|
000ddc  f890103d          LDRB     r1,[r0,#0x3d]         ;869
000de0  f04f0742          MOV      r7,#0x42              ;884
000de4  f44f6560          MOV      r5,#0xe00             ;873
000de8  f04f0900          MOV      r9,#0                 ;875
000dec  f44f6a80          MOV      r10,#0x400            ;882
000df0  2a01              CMP      r2,#1                 ;867
000df2  d002              BEQ      |L1.3578|
;;;897    	data[1]=LPC_RTC->MONTH;
;;;898    	data[2]=LPC_RTC->DOM;
;;;899    	data[3]=0;
;;;900    	lc640_write_long_ptr(lc640_adr+8,data);
;;;901    
;;;902    	data[0]=LPC_RTC->HOUR;
;;;903    	data[1]=LPC_RTC->MIN;
;;;904    	data[2]=LPC_RTC->SEC;
;;;905    	data[3]=0;
;;;906    	lc640_write_long_ptr(lc640_adr+12,data);
;;;907    	
;;;908    	data[0]='A';
;;;909    	data[1]='A';
;;;910    	data[2]='A';
;;;911    	data[3]='A';
;;;912    	lc640_write_long_ptr(lc640_adr+16,data);
;;;913    	
;;;914    	data[0]='A';
;;;915    	data[1]='A';
;;;916    	data[2]='A';
;;;917    	data[3]='A';
;;;918    	lc640_write_long_ptr(lc640_adr+20,data);
;;;919    	
;;;920    	data[0]='A';
;;;921    	data[1]='A';
;;;922    	data[2]='A';
;;;923    	data[3]='A';
;;;924    	lc640_write_long_ptr(lc640_adr+24,data);
;;;925    	
;;;926    	data[0]='A';
;;;927    	data[1]='A';
;;;928    	data[2]='A';
;;;929    	data[3]='A';
;;;930    	lc640_write_long_ptr(lc640_adr+28,data);
;;;931    					
;;;932    	snmp_trap_send("BAT 1 Alarm, lost",5,1,1);
;;;933    		
;;;934    	}
;;;935    
;;;936    else if(in==0)
000df4  2a00              CMP      r2,#0
000df6  d001              BEQ      |L1.3580|
000df8  e1e6              B        |L1.4552|
                  |L1.3578|
000dfa  e0bd              B        |L1.3960|
                  |L1.3580|
000dfc  e15c              B        |L1.4280|
000dfe  0000              DCW      0x0000
                  |L1.3584|
000e00  42505320          DCB      "BPS #1 Alarm, overheat",0
000e04  23312041
000e08  6c61726d
000e0c  2c206f76
000e10  65726865
000e14  617400  
000e17  00                DCB      0
                  |L1.3608|
000e18  42505320          DCB      "BPS #1 Alarm, voltage is up",0
000e1c  23312041
000e20  6c61726d
000e24  2c20766f
000e28  6c746167
000e2c  65206973
000e30  20757000
                  |L1.3636|
000e34  42505320          DCB      "BPS #1 Alarm, voltage is down",0
000e38  23312041
000e3c  6c61726d
000e40  2c20766f
000e44  6c746167
000e48  65206973
000e4c  20646f77
000e50  6e00    
000e52  00                DCB      0
000e53  00                DCB      0
                  |L1.3668|
000e54  42505320          DCB      "BPS #1 Alarm, connect is lost",0
000e58  23312041
000e5c  6c61726d
000e60  2c20636f
000e64  6e6e6563
000e68  74206973
000e6c  206c6f73
000e70  7400    
000e72  00                DCB      0
000e73  00                DCB      0
                  |L1.3700|
000e74  42505320          DCB      "BPS #2 Alarm, overheat",0
000e78  23322041
000e7c  6c61726d
000e80  2c206f76
000e84  65726865
000e88  617400  
000e8b  00                DCB      0
                  |L1.3724|
000e8c  42505320          DCB      "BPS #2 Alarm, voltage is up",0
000e90  23322041
000e94  6c61726d
000e98  2c20766f
000e9c  6c746167
000ea0  65206973
000ea4  20757000
                  |L1.3752|
000ea8  42505320          DCB      "BPS #2 Alarm, voltage is down",0
000eac  23322041
000eb0  6c61726d
000eb4  2c20766f
000eb8  6c746167
000ebc  65206973
000ec0  20646f77
000ec4  6e00    
000ec6  00                DCB      0
000ec7  00                DCB      0
                  |L1.3784|
000ec8  42505320          DCB      "BPS #2 Alarm, connect is lost",0
000ecc  23322041
000ed0  6c61726d
000ed4  2c20636f
000ed8  6e6e6563
000edc  74206973
000ee0  206c6f73
000ee4  7400    
000ee6  00                DCB      0
000ee7  00                DCB      0
                  |L1.3816|
000ee8  42505320          DCB      "BPS #3 Alarm, overheat",0
000eec  23332041
000ef0  6c61726d
000ef4  2c206f76
000ef8  65726865
000efc  617400  
000eff  00                DCB      0
                  |L1.3840|
000f00  42505320          DCB      "BPS #3 Alarm, voltage is up",0
000f04  23332041
000f08  6c61726d
000f0c  2c20766f
000f10  6c746167
000f14  65206973
000f18  20757000
                  |L1.3868|
000f1c  42505320          DCB      "BPS #3 Alarm, voltage is down",0
000f20  23332041
000f24  6c61726d
000f28  2c20766f
000f2c  6c746167
000f30  65206973
000f34  20646f77
000f38  6e00    
000f3a  00                DCB      0
000f3b  00                DCB      0
                  |L1.3900|
000f3c  42505320          DCB      "BPS #3 Alarm, connect is lost",0
000f40  23332041
000f44  6c61726d
000f48  2c20636f
000f4c  6e6e6563
000f50  74206973
000f54  206c6f73
000f58  7400    
000f5a  00                DCB      0
000f5b  00                DCB      0
                  |L1.3932|
                          DCD      bat
                  |L1.3936|
                          DCD      bat_u_old_cnt
                  |L1.3940|
                          DCD      0x40024020
                  |L1.3944|
                          DCD      bat_ips
                  |L1.3948|
                          DCD      ips_bat_av_stat
                  |L1.3952|
                          DCD      ips_bat_av_vzvod
                  |L1.3956|
                          DCD      0x40024000
                  |L1.3960|
000f78  f0410101          ORR      r1,r1,#1              ;869
000f7c  f880103d          STRB     r1,[r0,#0x3d]         ;869
000f80  f04f0001          MOV      r0,#1                 ;870
000f84  7020              STRB     r0,[r4,#0]            ;870
000f86  7018              STRB     r0,[r3,#0]            ;871
000f88  4628              MOV      r0,r5                 ;873
000f8a  f7fffffe          BL       lc640_read_int
000f8e  f1000001          ADD      r0,r0,#1              ;874
000f92  b284              UXTH     r4,r0                 ;874
000f94  2c3f              CMP      r4,#0x3f              ;875
000f96  d901              BLS      |L1.3996|
000f98  f04f0400          MOV      r4,#0                 ;875
                  |L1.3996|
000f9c  b221              SXTH     r1,r4                 ;876
000f9e  4628              MOV      r0,r5                 ;876
000fa0  f7fffffe          BL       lc640_write_int
000fa4  f6406602          MOV      r6,#0xe02             ;878
000fa8  4630              MOV      r0,r6                 ;878
000faa  f7fffffe          BL       lc640_read_int
000fae  b281              UXTH     r1,r0                 ;878
000fb0  293f              CMP      r1,#0x3f              ;879
000fb2  d000              BEQ      |L1.4022|
000fb4  4621              MOV      r1,r4                 ;879
                  |L1.4022|
000fb6  b209              SXTH     r1,r1                 ;880
000fb8  4630              MOV      r0,r6                 ;880
000fba  f7fffffe          BL       lc640_write_int
000fbe  4628              MOV      r0,r5                 ;882
000fc0  f7fffffe          BL       lc640_read_int
000fc4  eb0a1040          ADD      r0,r10,r0,LSL #5      ;882
000fc8  b284              UXTH     r4,r0                 ;882
000fca  f88d7000          STRB     r7,[sp,#0]            ;884
000fce  f88d9001          STRB     r9,[sp,#1]            ;885
000fd2  f04f0043          MOV      r0,#0x43              ;886
000fd6  f88d0002          STRB     r0,[sp,#2]            ;886
000fda  f88d9003          STRB     r9,[sp,#3]            ;887
000fde  4669              MOV      r1,sp                 ;888
000fe0  4620              MOV      r0,r4                 ;888
000fe2  f7fffffe          BL       lc640_write_long_ptr
000fe6  f8cd9000          STR      r9,[sp,#0]            ;893
000fea  4669              MOV      r1,sp                 ;894
000fec  1d20              ADDS     r0,r4,#4              ;894
000fee  f7fffffe          BL       lc640_write_long_ptr
000ff2  f8b8003c          LDRH     r0,[r8,#0x3c]         ;896
000ff6  f88d0000          STRB     r0,[sp,#0]            ;896
000ffa  f8980038          LDRB     r0,[r8,#0x38]         ;897
000ffe  f88d0001          STRB     r0,[sp,#1]            ;897
001002  f898002c          LDRB     r0,[r8,#0x2c]         ;898
001006  f88d0002          STRB     r0,[sp,#2]            ;898
00100a  f88d9003          STRB     r9,[sp,#3]            ;899
00100e  4669              MOV      r1,sp                 ;900
001010  f1040008          ADD      r0,r4,#8              ;900
001014  f7fffffe          BL       lc640_write_long_ptr
001018  f8980028          LDRB     r0,[r8,#0x28]         ;902
00101c  f88d0000          STRB     r0,[sp,#0]            ;902
001020  f8980024          LDRB     r0,[r8,#0x24]         ;903
001024  f88d0001          STRB     r0,[sp,#1]            ;903
001028  f8980020          LDRB     r0,[r8,#0x20]         ;904
00102c  f88d0002          STRB     r0,[sp,#2]            ;904
001030  f88d9003          STRB     r9,[sp,#3]            ;905
001034  4669              MOV      r1,sp                 ;906
001036  f104000c          ADD      r0,r4,#0xc            ;906
00103a  f7fffffe          BL       lc640_write_long_ptr
00103e  f04f0541          MOV      r5,#0x41              ;908
001042  f88d5000          STRB     r5,[sp,#0]            ;908
001046  f88d5001          STRB     r5,[sp,#1]            ;909
00104a  f88d5002          STRB     r5,[sp,#2]            ;910
00104e  f88d5003          STRB     r5,[sp,#3]            ;911
001052  4669              MOV      r1,sp                 ;912
001054  f1040010          ADD      r0,r4,#0x10           ;912
001058  f7fffffe          BL       lc640_write_long_ptr
00105c  f88d5000          STRB     r5,[sp,#0]            ;914
001060  f88d5001          STRB     r5,[sp,#1]            ;915
001064  f88d5002          STRB     r5,[sp,#2]            ;916
001068  f88d5003          STRB     r5,[sp,#3]            ;917
00106c  4669              MOV      r1,sp                 ;918
00106e  f1040014          ADD      r0,r4,#0x14           ;918
001072  f7fffffe          BL       lc640_write_long_ptr
001076  f88d5000          STRB     r5,[sp,#0]            ;920
00107a  f88d5001          STRB     r5,[sp,#1]            ;921
00107e  f88d5002          STRB     r5,[sp,#2]            ;922
001082  f88d5003          STRB     r5,[sp,#3]            ;923
001086  4669              MOV      r1,sp                 ;924
001088  f1040018          ADD      r0,r4,#0x18           ;924
00108c  f7fffffe          BL       lc640_write_long_ptr
001090  f88d5000          STRB     r5,[sp,#0]            ;926
001094  f88d5001          STRB     r5,[sp,#1]            ;927
001098  f88d5002          STRB     r5,[sp,#2]            ;928
00109c  f88d5003          STRB     r5,[sp,#3]            ;929
0010a0  4669              MOV      r1,sp                 ;930
0010a2  f104001c          ADD      r0,r4,#0x1c           ;930
0010a6  f7fffffe          BL       lc640_write_long_ptr
0010aa  2301              MOVS     r3,#1                 ;932
0010ac  461a              MOV      r2,r3                 ;932
0010ae  2105              MOVS     r1,#5                 ;932
0010b0  a0ff              ADR      r0,|L1.5296|
0010b2  f7fffffe          BL       snmp_trap_send
0010b6  e087              B        |L1.4552|
                  |L1.4280|
;;;937    	{
;;;938    	bat_ips._av&=~1;
0010b8  f0210101          BIC      r1,r1,#1
0010bc  f880103d          STRB     r1,[r0,#0x3d]
;;;939    	ips_bat_av_stat=0;
0010c0  f8849000          STRB     r9,[r4,#0]
;;;940    	ips_bat_av_vzvod=0;
0010c4  f8839000          STRB     r9,[r3,#0]
;;;941         
;;;942    	event_ptr=lc640_read_int(PTR_EVENT_LOG);
0010c8  4628              MOV      r0,r5
0010ca  f7fffffe          BL       lc640_read_int
0010ce  b286              UXTH     r6,r0
;;;943    	event_ptr_find=event_ptr;
0010d0  4634              MOV      r4,r6
                  |L1.4306|
;;;944    	
;;;945    avar_bat_ips_hndl_lbl1: 
;;;946    
;;;947    	lc640_adr=EVENT_LOG+(event_ptr_find*32);
0010d2  eb0a1044          ADD      r0,r10,r4,LSL #5
0010d6  b285              UXTH     r5,r0
;;;948    
;;;949         lc640_read_long_ptr(lc640_adr,data);
0010d8  4669              MOV      r1,sp
0010da  4628              MOV      r0,r5
0010dc  f7fffffe          BL       lc640_read_long_ptr
;;;950         
;;;951         if(!((data[0]=='B')&&(data[1]==0)&&(data[2]=='C')))
0010e0  f89d0000          LDRB     r0,[sp,#0]
0010e4  2842              CMP      r0,#0x42
0010e6  d106              BNE      |L1.4342|
0010e8  f89d0001          LDRB     r0,[sp,#1]
0010ec  b918              CBNZ     r0,|L1.4342|
0010ee  f89d0002          LDRB     r0,[sp,#2]
0010f2  2843              CMP      r0,#0x43
0010f4  d009              BEQ      |L1.4362|
                  |L1.4342|
;;;952         	{        
;;;953         	if(event_ptr_find)event_ptr_find--;
0010f6  b11c              CBZ      r4,|L1.4352|
0010f8  f1a40401          SUB      r4,r4,#1
0010fc  b2a4              UXTH     r4,r4
0010fe  e001              B        |L1.4356|
                  |L1.4352|
;;;954         	else event_ptr_find=63;
001100  f04f043f          MOV      r4,#0x3f
                  |L1.4356|
;;;955         	if(event_ptr_find==event_ptr)goto avar_bat_ips_hndl_end;
001104  42b4              CMP      r4,r6
001106  d1e4              BNE      |L1.4306|
001108  e05e              B        |L1.4552|
                  |L1.4362|
;;;956         	else goto avar_bat_ips_hndl_lbl1;
;;;957         	}
;;;958         else 
;;;959         	{
;;;960         	lc640_read_long_ptr(lc640_adr+16,data);
00110a  4669              MOV      r1,sp
00110c  f1050010          ADD      r0,r5,#0x10
001110  f7fffffe          BL       lc640_read_long_ptr
;;;961         	if(!((data[0]=='A')&&(data[1]=='A')&&(data[2]=='A')&&(data[3]=='A')))
001114  f89d0000          LDRB     r0,[sp,#0]
001118  2841              CMP      r0,#0x41
00111a  d10b              BNE      |L1.4404|
00111c  f89d0001          LDRB     r0,[sp,#1]
001120  2841              CMP      r0,#0x41
001122  d107              BNE      |L1.4404|
001124  f89d0002          LDRB     r0,[sp,#2]
001128  2841              CMP      r0,#0x41
00112a  d103              BNE      |L1.4404|
00112c  f89d0003          LDRB     r0,[sp,#3]
001130  2841              CMP      r0,#0x41
001132  d009              BEQ      |L1.4424|
                  |L1.4404|
;;;962         		{        
;;;963         		if(event_ptr_find)event_ptr_find--;
001134  b11c              CBZ      r4,|L1.4414|
001136  f1a40401          SUB      r4,r4,#1
00113a  b2a4              UXTH     r4,r4
00113c  e001              B        |L1.4418|
                  |L1.4414|
;;;964             		else event_ptr_find=63;
00113e  f04f043f          MOV      r4,#0x3f
                  |L1.4418|
;;;965             	    	if(event_ptr_find==event_ptr)goto avar_bat_ips_hndl_end;
001142  42b4              CMP      r4,r6
001144  d1c5              BNE      |L1.4306|
001146  e03f              B        |L1.4552|
                  |L1.4424|
;;;966         		else goto avar_bat_ips_hndl_lbl1;
;;;967         		}
;;;968    
;;;969         	}
;;;970         		
;;;971    	data[0]=LPC_RTC->YEAR;
001148  f8b8003c          LDRH     r0,[r8,#0x3c]
00114c  f88d0000          STRB     r0,[sp,#0]
;;;972    	data[1]=LPC_RTC->MONTH;
001150  f8980038          LDRB     r0,[r8,#0x38]
001154  f88d0001          STRB     r0,[sp,#1]
;;;973    	data[2]=LPC_RTC->DOM;
001158  f898002c          LDRB     r0,[r8,#0x2c]
00115c  f88d0002          STRB     r0,[sp,#2]
;;;974    	data[3]=0;
001160  f88d9003          STRB     r9,[sp,#3]
;;;975    	lc640_write_long_ptr(lc640_adr+16,data);
001164  4669              MOV      r1,sp
001166  f1050010          ADD      r0,r5,#0x10
00116a  f7fffffe          BL       lc640_write_long_ptr
;;;976    
;;;977    	data[0]=LPC_RTC->HOUR;
00116e  f8980028          LDRB     r0,[r8,#0x28]
001172  f88d0000          STRB     r0,[sp,#0]
;;;978    	data[1]=LPC_RTC->MIN;
001176  f8980024          LDRB     r0,[r8,#0x24]
00117a  f88d0001          STRB     r0,[sp,#1]
;;;979    	data[2]=LPC_RTC->SEC;
00117e  f8980020          LDRB     r0,[r8,#0x20]
001182  f88d0002          STRB     r0,[sp,#2]
;;;980    	data[3]=0;
001186  f88d9003          STRB     r9,[sp,#3]
;;;981    	lc640_write_long_ptr(lc640_adr+20,data);
00118a  4669              MOV      r1,sp
00118c  f1050014          ADD      r0,r5,#0x14
001190  f7fffffe          BL       lc640_write_long_ptr
;;;982    	
;;;983    	data[0]='B';
001194  f88d7000          STRB     r7,[sp,#0]
;;;984    	data[1]='B';
001198  f88d7001          STRB     r7,[sp,#1]
;;;985    	data[2]='B';
00119c  f88d7002          STRB     r7,[sp,#2]
;;;986    	data[3]='B';
0011a0  f88d7003          STRB     r7,[sp,#3]
;;;987    	lc640_write_long_ptr(lc640_adr+24,data);
0011a4  4669              MOV      r1,sp
0011a6  f1050018          ADD      r0,r5,#0x18
0011aa  f7fffffe          BL       lc640_write_long_ptr
;;;988    	
;;;989    	data[0]='B';
0011ae  f88d7000          STRB     r7,[sp,#0]
;;;990    	data[1]='B';
0011b2  f88d7001          STRB     r7,[sp,#1]
;;;991    	data[2]='B';
0011b6  f88d7002          STRB     r7,[sp,#2]
;;;992    	data[3]='B';
0011ba  f88d7003          STRB     r7,[sp,#3]
;;;993    	lc640_write_long_ptr(lc640_adr+28,data);
0011be  4669              MOV      r1,sp
0011c0  f105001c          ADD      r0,r5,#0x1c
0011c4  f7fffffe          BL       lc640_write_long_ptr
                  |L1.4552|
;;;994    	
;;;995    
;;;996    	
;;;997    	}
;;;998    	
;;;999    avar_bat_ips_hndl_end:
;;;1000   __nop();		
0011c8  bf00              NOP      
                  |L1.4554|
;;;1001   }
0011ca  e56b              B        |L1.3236|
;;;1002   
                          ENDP

                  avar_bat_hndl PROC
;;;1005   //-----------------------------------------------
;;;1006   void avar_bat_hndl(char b, char in)
0011cc  e92d4ff8          PUSH     {r3-r11,lr}
;;;1007   {
0011d0  4606              MOV      r6,r0
;;;1008   char data[4];
;;;1009   unsigned short event_ptr,lc640_adr,event_ptr_find,event_cnt;
;;;1010   
;;;1011   if(in==1)
;;;1012   	{
;;;1013   	bat[b]._av|=1;
0011d2  48bc              LDR      r0,|L1.5316|
0011d4  eb060246          ADD      r2,r6,r6,LSL #1
;;;1014       
;;;1015   	event_ptr=lc640_read_int(PTR_EVENT_LOG);
;;;1016   	event_ptr++;	
;;;1017   	if(event_ptr>63)event_ptr=0;	
;;;1018   	lc640_write_int(PTR_EVENT_LOG,event_ptr);	
;;;1019   	
;;;1020        event_cnt=lc640_read_int(CNT_EVENT_LOG);
;;;1021   	if(event_cnt!=63)event_cnt=event_ptr;
;;;1022   	lc640_write_int(CNT_EVENT_LOG,event_cnt); 
;;;1023   	
;;;1024   	lc640_adr=EVENT_LOG+(lc640_read_int(PTR_EVENT_LOG)*32);
;;;1025   	
;;;1026   	data[0]='B';
;;;1027   	data[1]=b;
;;;1028   	data[2]='C';
;;;1029   	data[3]=0;
;;;1030   	lc640_write_long_ptr(lc640_adr,data);
;;;1031   
;;;1032   	data[0]=0;
;;;1033   	data[1]=0;
;;;1034   	data[2]=0;
;;;1035   	data[3]=0;
;;;1036   	lc640_write_long_ptr(lc640_adr+4,data);
;;;1037   
;;;1038   	data[0]=LPC_RTC->YEAR;
0011d8  f8df82ec          LDR      r8,|L1.5320|
0011dc  eb021206          ADD      r2,r2,r6,LSL #4       ;1013
0011e0  f04f0a00          MOV      r10,#0                ;1017
0011e4  f04f0942          MOV      r9,#0x42              ;1026
0011e8  f44f6560          MOV      r5,#0xe00             ;1015
0011ec  f44f6b80          MOV      r11,#0x400            ;1024
0011f0  eb000082          ADD      r0,r0,r2,LSL #2       ;1013
0011f4  2901              CMP      r1,#1                 ;1011
0011f6  d002              BEQ      |L1.4606|
;;;1039   	data[1]=LPC_RTC->MONTH;
;;;1040   	data[2]=LPC_RTC->DOM;
;;;1041   	data[3]=0;
;;;1042   	lc640_write_long_ptr(lc640_adr+8,data);
;;;1043   
;;;1044   	data[0]=LPC_RTC->HOUR;
;;;1045   	data[1]=LPC_RTC->MIN;
;;;1046   	data[2]=LPC_RTC->SEC;
;;;1047   	data[3]=0;
;;;1048   	lc640_write_long_ptr(lc640_adr+12,data);
;;;1049   	
;;;1050   	data[0]='A';
;;;1051   	data[1]='A';
;;;1052   	data[2]='A';
;;;1053   	data[3]='A';
;;;1054   	lc640_write_long_ptr(lc640_adr+16,data);
;;;1055   	
;;;1056   	data[0]='A';
;;;1057   	data[1]='A';
;;;1058   	data[2]='A';
;;;1059   	data[3]='A';
;;;1060   	lc640_write_long_ptr(lc640_adr+20,data);
;;;1061   	
;;;1062   	data[0]='A';
;;;1063   	data[1]='A';
;;;1064   	data[2]='A';
;;;1065   	data[3]='A';
;;;1066   	lc640_write_long_ptr(lc640_adr+24,data);
;;;1067   	
;;;1068   	data[0]='A';
;;;1069   	data[1]='A';
;;;1070   	data[2]='A';
;;;1071   	data[3]='A';
;;;1072   	lc640_write_long_ptr(lc640_adr+28,data);
;;;1073   					
;;;1074   	if(b==0)
;;;1075   		{
;;;1076   		snmp_trap_send("BAT #1 Alarm, lost",5,1,1);
;;;1077   		}
;;;1078   	else if(b==1)
;;;1079   		{
;;;1080   		snmp_trap_send("BAT #2 Alarm, lost",5,2,1);
;;;1081   		} 
;;;1082   			
;;;1083   	}
;;;1084   
;;;1085   else if(in==0)
0011f8  2900              CMP      r1,#0
0011fa  d07d              BEQ      |L1.4856|
0011fc  e12f              B        |L1.5214|
                  |L1.4606|
0011fe  f8101f3d          LDRB     r1,[r0,#0x3d]!        ;1013
001202  f0410101          ORR      r1,r1,#1              ;1013
001206  7001              STRB     r1,[r0,#0]            ;1013
001208  4628              MOV      r0,r5                 ;1015
00120a  f7fffffe          BL       lc640_read_int
00120e  f1000001          ADD      r0,r0,#1              ;1016
001212  b284              UXTH     r4,r0                 ;1016
001214  2c3f              CMP      r4,#0x3f              ;1017
001216  d901              BLS      |L1.4636|
001218  f04f0400          MOV      r4,#0                 ;1017
                  |L1.4636|
00121c  b221              SXTH     r1,r4                 ;1018
00121e  4628              MOV      r0,r5                 ;1018
001220  f7fffffe          BL       lc640_write_int
001224  f6406702          MOV      r7,#0xe02             ;1020
001228  4638              MOV      r0,r7                 ;1020
00122a  f7fffffe          BL       lc640_read_int
00122e  b280              UXTH     r0,r0                 ;1020
001230  283f              CMP      r0,#0x3f              ;1021
001232  d000              BEQ      |L1.4662|
001234  4620              MOV      r0,r4                 ;1021
                  |L1.4662|
001236  b201              SXTH     r1,r0                 ;1022
001238  4638              MOV      r0,r7                 ;1022
00123a  f7fffffe          BL       lc640_write_int
00123e  4628              MOV      r0,r5                 ;1024
001240  f7fffffe          BL       lc640_read_int
001244  eb0b1040          ADD      r0,r11,r0,LSL #5      ;1024
001248  b284              UXTH     r4,r0                 ;1024
00124a  f88d9000          STRB     r9,[sp,#0]            ;1026
00124e  f88d6001          STRB     r6,[sp,#1]            ;1027
001252  f04f0043          MOV      r0,#0x43              ;1028
001256  f88d0002          STRB     r0,[sp,#2]            ;1028
00125a  f88da003          STRB     r10,[sp,#3]           ;1029
00125e  4669              MOV      r1,sp                 ;1030
001260  4620              MOV      r0,r4                 ;1030
001262  f7fffffe          BL       lc640_write_long_ptr
001266  f8cda000          STR      r10,[sp,#0]           ;1035
00126a  4669              MOV      r1,sp                 ;1036
00126c  1d20              ADDS     r0,r4,#4              ;1036
00126e  f7fffffe          BL       lc640_write_long_ptr
001272  f8b8003c          LDRH     r0,[r8,#0x3c]         ;1038
001276  f88d0000          STRB     r0,[sp,#0]            ;1038
00127a  f8980038          LDRB     r0,[r8,#0x38]         ;1039
00127e  f88d0001          STRB     r0,[sp,#1]            ;1039
001282  f898002c          LDRB     r0,[r8,#0x2c]         ;1040
001286  f88d0002          STRB     r0,[sp,#2]            ;1040
00128a  f88da003          STRB     r10,[sp,#3]           ;1041
00128e  4669              MOV      r1,sp                 ;1042
001290  f1040008          ADD      r0,r4,#8              ;1042
001294  f7fffffe          BL       lc640_write_long_ptr
001298  f8980028          LDRB     r0,[r8,#0x28]         ;1044
00129c  f88d0000          STRB     r0,[sp,#0]            ;1044
0012a0  f8980024          LDRB     r0,[r8,#0x24]         ;1045
0012a4  f88d0001          STRB     r0,[sp,#1]            ;1045
0012a8  f8980020          LDRB     r0,[r8,#0x20]         ;1046
0012ac  f88d0002          STRB     r0,[sp,#2]            ;1046
0012b0  f88da003          STRB     r10,[sp,#3]           ;1047
0012b4  4669              MOV      r1,sp                 ;1048
0012b6  f104000c          ADD      r0,r4,#0xc            ;1048
0012ba  f7fffffe          BL       lc640_write_long_ptr
0012be  f04f0541          MOV      r5,#0x41              ;1050
0012c2  f88d5000          STRB     r5,[sp,#0]            ;1050
0012c6  f88d5001          STRB     r5,[sp,#1]            ;1051
0012ca  f88d5002          STRB     r5,[sp,#2]            ;1052
0012ce  f88d5003          STRB     r5,[sp,#3]            ;1053
0012d2  4669              MOV      r1,sp                 ;1054
0012d4  f1040010          ADD      r0,r4,#0x10           ;1054
0012d8  f7fffffe          BL       lc640_write_long_ptr
0012dc  f88d5000          STRB     r5,[sp,#0]            ;1056
0012e0  f88d5001          STRB     r5,[sp,#1]            ;1057
0012e4  f88d5002          STRB     r5,[sp,#2]            ;1058
0012e8  f88d5003          STRB     r5,[sp,#3]            ;1059
0012ec  4669              MOV      r1,sp                 ;1060
0012ee  f1040014          ADD      r0,r4,#0x14           ;1060
0012f2  f7fffffe          BL       lc640_write_long_ptr
0012f6  e000              B        |L1.4858|
                  |L1.4856|
0012f8  e02b              B        |L1.4946|
                  |L1.4858|
0012fa  f88d5000          STRB     r5,[sp,#0]            ;1062
0012fe  f88d5001          STRB     r5,[sp,#1]            ;1063
001302  f88d5002          STRB     r5,[sp,#2]            ;1064
001306  f88d5003          STRB     r5,[sp,#3]            ;1065
00130a  4669              MOV      r1,sp                 ;1066
00130c  f1040018          ADD      r0,r4,#0x18           ;1066
001310  f7fffffe          BL       lc640_write_long_ptr
001314  f88d5000          STRB     r5,[sp,#0]            ;1068
001318  f88d5001          STRB     r5,[sp,#1]            ;1069
00131c  f88d5002          STRB     r5,[sp,#2]            ;1070
001320  f88d5003          STRB     r5,[sp,#3]            ;1071
001324  4669              MOV      r1,sp                 ;1072
001326  f104001c          ADD      r0,r4,#0x1c           ;1072
00132a  f7fffffe          BL       lc640_write_long_ptr
00132e  b116              CBZ      r6,|L1.4918|
001330  2e01              CMP      r6,#1                 ;1078
001332  d007              BEQ      |L1.4932|
001334  e093              B        |L1.5214|
                  |L1.4918|
001336  2301              MOVS     r3,#1                 ;1076
001338  461a              MOV      r2,r3                 ;1076
00133a  2105              MOVS     r1,#5                 ;1076
00133c  a063              ADR      r0,|L1.5324|
00133e  f7fffffe          BL       snmp_trap_send
001342  e08c              B        |L1.5214|
                  |L1.4932|
001344  2301              MOVS     r3,#1                 ;1080
001346  2202              MOVS     r2,#2                 ;1080
001348  2105              MOVS     r1,#5                 ;1080
00134a  a065              ADR      r0,|L1.5344|
00134c  f7fffffe          BL       snmp_trap_send
001350  e085              B        |L1.5214|
                  |L1.4946|
;;;1086   	{
;;;1087   	bat[b]._av&=~1;
001352  f8101f3d          LDRB     r1,[r0,#0x3d]!
001356  f0210101          BIC      r1,r1,#1
00135a  7001              STRB     r1,[r0,#0]
;;;1088   
;;;1089        event_ptr=lc640_read_int(PTR_EVENT_LOG);
00135c  4628              MOV      r0,r5
00135e  f7fffffe          BL       lc640_read_int
001362  b287              UXTH     r7,r0
;;;1090   	event_ptr_find=event_ptr;
001364  463c              MOV      r4,r7
                  |L1.4966|
;;;1091   	
;;;1092   avar_bat_hndl_lbl1: 
;;;1093   
;;;1094   	lc640_adr=EVENT_LOG+(event_ptr_find*32);
001366  eb0b1044          ADD      r0,r11,r4,LSL #5
00136a  b285              UXTH     r5,r0
;;;1095   
;;;1096        lc640_read_long_ptr(lc640_adr,data);
00136c  4669              MOV      r1,sp
00136e  4628              MOV      r0,r5
001370  f7fffffe          BL       lc640_read_long_ptr
;;;1097        
;;;1098        if(!((data[0]=='B')&&(data[1]==b)&&(data[2]=='C')))
001374  f89d0000          LDRB     r0,[sp,#0]
001378  2842              CMP      r0,#0x42
00137a  d107              BNE      |L1.5004|
00137c  f89d0001          LDRB     r0,[sp,#1]
001380  42b0              CMP      r0,r6
001382  d103              BNE      |L1.5004|
001384  f89d0002          LDRB     r0,[sp,#2]
001388  2843              CMP      r0,#0x43
00138a  d009              BEQ      |L1.5024|
                  |L1.5004|
;;;1099        	{        
;;;1100        	if(event_ptr_find)event_ptr_find--;
00138c  b11c              CBZ      r4,|L1.5014|
00138e  f1a40401          SUB      r4,r4,#1
001392  b2a4              UXTH     r4,r4
001394  e001              B        |L1.5018|
                  |L1.5014|
;;;1101        	else event_ptr_find=63;
001396  f04f043f          MOV      r4,#0x3f
                  |L1.5018|
;;;1102        	if(event_ptr_find==event_ptr)goto avar_bat_hndl_end;
00139a  42bc              CMP      r4,r7
00139c  d1e3              BNE      |L1.4966|
00139e  e05e              B        |L1.5214|
                  |L1.5024|
;;;1103        	else goto avar_bat_hndl_lbl1;
;;;1104        	}
;;;1105        else 
;;;1106        	{
;;;1107        	lc640_read_long_ptr(lc640_adr+16,data);
0013a0  4669              MOV      r1,sp
0013a2  f1050010          ADD      r0,r5,#0x10
0013a6  f7fffffe          BL       lc640_read_long_ptr
;;;1108        	if(!((data[0]=='A')&&(data[1]=='A')&&(data[2]=='A')&&(data[3]=='A')))
0013aa  f89d0000          LDRB     r0,[sp,#0]
0013ae  2841              CMP      r0,#0x41
0013b0  d10b              BNE      |L1.5066|
0013b2  f89d0001          LDRB     r0,[sp,#1]
0013b6  2841              CMP      r0,#0x41
0013b8  d107              BNE      |L1.5066|
0013ba  f89d0002          LDRB     r0,[sp,#2]
0013be  2841              CMP      r0,#0x41
0013c0  d103              BNE      |L1.5066|
0013c2  f89d0003          LDRB     r0,[sp,#3]
0013c6  2841              CMP      r0,#0x41
0013c8  d009              BEQ      |L1.5086|
                  |L1.5066|
;;;1109        		{        
;;;1110        		if(event_ptr_find)event_ptr_find--;
0013ca  b11c              CBZ      r4,|L1.5076|
0013cc  f1a40401          SUB      r4,r4,#1
0013d0  b2a4              UXTH     r4,r4
0013d2  e001              B        |L1.5080|
                  |L1.5076|
;;;1111            		else event_ptr_find=63;
0013d4  f04f043f          MOV      r4,#0x3f
                  |L1.5080|
;;;1112            	    	if(event_ptr_find==event_ptr)goto avar_bat_hndl_end;
0013d8  42bc              CMP      r4,r7
0013da  d1c4              BNE      |L1.4966|
0013dc  e03f              B        |L1.5214|
                  |L1.5086|
;;;1113        		else goto avar_bat_hndl_lbl1;
;;;1114        		}
;;;1115   
;;;1116        	}
;;;1117        		
;;;1118   	data[0]=LPC_RTC->YEAR;
0013de  f8b8003c          LDRH     r0,[r8,#0x3c]
0013e2  f88d0000          STRB     r0,[sp,#0]
;;;1119   	data[1]=LPC_RTC->MONTH;
0013e6  f8980038          LDRB     r0,[r8,#0x38]
0013ea  f88d0001          STRB     r0,[sp,#1]
;;;1120   	data[2]=LPC_RTC->DOM;
0013ee  f898002c          LDRB     r0,[r8,#0x2c]
0013f2  f88d0002          STRB     r0,[sp,#2]
;;;1121   	data[3]=0;
0013f6  f88da003          STRB     r10,[sp,#3]
;;;1122   	lc640_write_long_ptr(lc640_adr+16,data);
0013fa  4669              MOV      r1,sp
0013fc  f1050010          ADD      r0,r5,#0x10
001400  f7fffffe          BL       lc640_write_long_ptr
;;;1123   
;;;1124   	data[0]=LPC_RTC->HOUR;
001404  f8980028          LDRB     r0,[r8,#0x28]
001408  f88d0000          STRB     r0,[sp,#0]
;;;1125   	data[1]=LPC_RTC->MIN;
00140c  f8980024          LDRB     r0,[r8,#0x24]
001410  f88d0001          STRB     r0,[sp,#1]
;;;1126   	data[2]=LPC_RTC->SEC;
001414  f8980020          LDRB     r0,[r8,#0x20]
001418  f88d0002          STRB     r0,[sp,#2]
;;;1127   	data[3]=0;
00141c  f88da003          STRB     r10,[sp,#3]
;;;1128   	lc640_write_long_ptr(lc640_adr+20,data);
001420  4669              MOV      r1,sp
001422  f1050014          ADD      r0,r5,#0x14
001426  f7fffffe          BL       lc640_write_long_ptr
;;;1129   	
;;;1130   	data[0]='B';
00142a  f88d9000          STRB     r9,[sp,#0]
;;;1131   	data[1]='B';
00142e  f88d9001          STRB     r9,[sp,#1]
;;;1132   	data[2]='B';
001432  f88d9002          STRB     r9,[sp,#2]
;;;1133   	data[3]='B';
001436  f88d9003          STRB     r9,[sp,#3]
;;;1134   	lc640_write_long_ptr(lc640_adr+24,data);
00143a  4669              MOV      r1,sp
00143c  f1050018          ADD      r0,r5,#0x18
001440  f7fffffe          BL       lc640_write_long_ptr
;;;1135   	
;;;1136   	data[0]='B';
001444  f88d9000          STRB     r9,[sp,#0]
;;;1137   	data[1]='B';
001448  f88d9001          STRB     r9,[sp,#1]
;;;1138   	data[2]='B';
00144c  f88d9002          STRB     r9,[sp,#2]
;;;1139   	data[3]='B';
001450  f88d9003          STRB     r9,[sp,#3]
;;;1140   	lc640_write_long_ptr(lc640_adr+28,data);
001454  4669              MOV      r1,sp
001456  f105001c          ADD      r0,r5,#0x1c
00145a  f7fffffe          BL       lc640_write_long_ptr
                  |L1.5214|
;;;1141   	
;;;1142   
;;;1143   	
;;;1144   	}
;;;1145   	
;;;1146   avar_bat_hndl_end:
;;;1147   __nop();		
00145e  bf00              NOP      
                  |L1.5216|
;;;1148   }
001460  e420              B        |L1.3236|
;;;1149   
                          ENDP

                  avar_bat_as_hndl PROC
;;;1150   //-----------------------------------------------
;;;1151   void avar_bat_as_hndl(char b, char in)
001462  e92d4ff8          PUSH     {r3-r11,lr}
;;;1152   {
001466  4606              MOV      r6,r0
;;;1153   char data[4];
;;;1154   unsigned short event_ptr,lc640_adr,event_ptr_find,event_cnt;
;;;1155   
;;;1156   if(in==1)
;;;1157   	{
;;;1158   	bat[b]._av|=2;
;;;1159       
;;;1160   	event_ptr=lc640_read_int(PTR_EVENT_LOG);
;;;1161   	event_ptr++;	
;;;1162   	if(event_ptr>63)event_ptr=0;	
;;;1163   	lc640_write_int(PTR_EVENT_LOG,event_ptr);	
;;;1164   	
;;;1165        event_cnt=lc640_read_int(CNT_EVENT_LOG);
;;;1166   	if(event_cnt!=63)event_cnt=event_ptr;
;;;1167   	lc640_write_int(CNT_EVENT_LOG,event_cnt); 
;;;1168   	
;;;1169   	lc640_adr=EVENT_LOG+(lc640_read_int(PTR_EVENT_LOG)*32);
;;;1170   	
;;;1171   	data[0]='B';
;;;1172   	data[1]=b;
;;;1173   	data[2]='S';
;;;1174   	data[3]=0;
;;;1175   	lc640_write_long_ptr(lc640_adr,data);
;;;1176   
;;;1177   	data[0]=0;
;;;1178   	data[1]=0;
;;;1179   	data[2]=0;
;;;1180   	data[3]=0;
;;;1181   	lc640_write_long_ptr(lc640_adr+4,data);
;;;1182   
;;;1183   	data[0]=LPC_RTC->YEAR;
001468  f8df805c          LDR      r8,|L1.5320|
00146c  f04f0a00          MOV      r10,#0                ;1162
001470  f04f0942          MOV      r9,#0x42              ;1171
001474  f44f6560          MOV      r5,#0xe00             ;1160
001478  f44f6b80          MOV      r11,#0x400            ;1169
00147c  2901              CMP      r1,#1                 ;1156
00147e  d002              BEQ      |L1.5254|
;;;1184   	data[1]=LPC_RTC->MONTH;
;;;1185   	data[2]=LPC_RTC->DOM;
;;;1186   	data[3]=0;
;;;1187   	lc640_write_long_ptr(lc640_adr+8,data);
;;;1188   
;;;1189   	data[0]=LPC_RTC->HOUR;
;;;1190   	data[1]=LPC_RTC->MIN;
;;;1191   	data[2]=LPC_RTC->SEC;
;;;1192   	data[3]=0;
;;;1193   	lc640_write_long_ptr(lc640_adr+12,data);
;;;1194   	
;;;1195   	data[0]='A';
;;;1196   	data[1]='A';
;;;1197   	data[2]='A';
;;;1198   	data[3]='A';
;;;1199   	lc640_write_long_ptr(lc640_adr+16,data);
;;;1200   	
;;;1201   	data[0]='A';
;;;1202   	data[1]='A';
;;;1203   	data[2]='A';
;;;1204   	data[3]='A';
;;;1205   	lc640_write_long_ptr(lc640_adr+20,data);
;;;1206   	
;;;1207   	data[0]='A';
;;;1208   	data[1]='A';
;;;1209   	data[2]='A';
;;;1210   	data[3]='A';
;;;1211   	lc640_write_long_ptr(lc640_adr+24,data);
;;;1212   	
;;;1213   	data[0]='A';
;;;1214   	data[1]='A';
;;;1215   	data[2]='A';
;;;1216   	data[3]='A';
;;;1217   	lc640_write_long_ptr(lc640_adr+28,data);				
;;;1218   
;;;1219   	if(b==0)
;;;1220   		{
;;;1221   		snmp_trap_send("BAT #1 Alarm, assimetry",5,1,2);
;;;1222   		}
;;;1223   	else if(b==1)
;;;1224   		{
;;;1225   		snmp_trap_send("BAT #2 Alarm, assimetry",5,2,2);
;;;1226   		} 
;;;1227   	
;;;1228   	}
;;;1229   
;;;1230   else if(in==0)
001480  2900              CMP      r1,#0
001482  d07e              BEQ      |L1.5506|
001484  e154              B        |L1.5936|
                  |L1.5254|
001486  eb060046          ADD      r0,r6,r6,LSL #1       ;1158
00148a  eb001106          ADD      r1,r0,r6,LSL #4       ;1158
00148e  480d              LDR      r0,|L1.5316|
001490  eb000081          ADD      r0,r0,r1,LSL #2       ;1158
001494  f8101f3d          LDRB     r1,[r0,#0x3d]!        ;1158
001498  f0410102          ORR      r1,r1,#2              ;1158
00149c  7001              STRB     r1,[r0,#0]            ;1158
00149e  4628              MOV      r0,r5                 ;1160
0014a0  f7fffffe          BL       lc640_read_int
0014a4  f1000001          ADD      r0,r0,#1              ;1161
0014a8  b284              UXTH     r4,r0                 ;1161
0014aa  2c3f              CMP      r4,#0x3f              ;1162
0014ac  d924              BLS      |L1.5368|
0014ae  e021              B        |L1.5364|
                  |L1.5296|
0014b0  42415420          DCB      "BAT ",185,"1 Alarm, lost",0
0014b4  b9312041
0014b8  6c61726d
0014bc  2c206c6f
0014c0  737400  
0014c3  00                DCB      0
                  |L1.5316|
                          DCD      bat
                  |L1.5320|
                          DCD      0x40024000
                  |L1.5324|
0014cc  42415420          DCB      "BAT #1 Alarm, lost",0
0014d0  23312041
0014d4  6c61726d
0014d8  2c206c6f
0014dc  737400  
0014df  00                DCB      0
                  |L1.5344|
0014e0  42415420          DCB      "BAT #2 Alarm, lost",0
0014e4  23322041
0014e8  6c61726d
0014ec  2c206c6f
0014f0  737400  
0014f3  00                DCB      0
                  |L1.5364|
0014f4  f04f0400          MOV      r4,#0                 ;1162
                  |L1.5368|
0014f8  b221              SXTH     r1,r4                 ;1163
0014fa  4628              MOV      r0,r5                 ;1163
0014fc  f7fffffe          BL       lc640_write_int
001500  f6406702          MOV      r7,#0xe02             ;1165
001504  4638              MOV      r0,r7                 ;1165
001506  f7fffffe          BL       lc640_read_int
00150a  b280              UXTH     r0,r0                 ;1165
00150c  283f              CMP      r0,#0x3f              ;1166
00150e  d000              BEQ      |L1.5394|
001510  4620              MOV      r0,r4                 ;1166
                  |L1.5394|
001512  b201              SXTH     r1,r0                 ;1167
001514  4638              MOV      r0,r7                 ;1167
001516  f7fffffe          BL       lc640_write_int
00151a  4628              MOV      r0,r5                 ;1169
00151c  f7fffffe          BL       lc640_read_int
001520  eb0b1040          ADD      r0,r11,r0,LSL #5      ;1169
001524  b284              UXTH     r4,r0                 ;1169
001526  f88d9000          STRB     r9,[sp,#0]            ;1171
00152a  f88d6001          STRB     r6,[sp,#1]            ;1172
00152e  f04f0053          MOV      r0,#0x53              ;1173
001532  f88d0002          STRB     r0,[sp,#2]            ;1173
001536  f88da003          STRB     r10,[sp,#3]           ;1174
00153a  4669              MOV      r1,sp                 ;1175
00153c  4620              MOV      r0,r4                 ;1175
00153e  f7fffffe          BL       lc640_write_long_ptr
001542  f8cda000          STR      r10,[sp,#0]           ;1180
001546  4669              MOV      r1,sp                 ;1181
001548  1d20              ADDS     r0,r4,#4              ;1181
00154a  f7fffffe          BL       lc640_write_long_ptr
00154e  f8b8003c          LDRH     r0,[r8,#0x3c]         ;1183
001552  f88d0000          STRB     r0,[sp,#0]            ;1183
001556  f8980038          LDRB     r0,[r8,#0x38]         ;1184
00155a  f88d0001          STRB     r0,[sp,#1]            ;1184
00155e  f898002c          LDRB     r0,[r8,#0x2c]         ;1185
001562  f88d0002          STRB     r0,[sp,#2]            ;1185
001566  f88da003          STRB     r10,[sp,#3]           ;1186
00156a  4669              MOV      r1,sp                 ;1187
00156c  f1040008          ADD      r0,r4,#8              ;1187
001570  f7fffffe          BL       lc640_write_long_ptr
001574  f8980028          LDRB     r0,[r8,#0x28]         ;1189
001578  f88d0000          STRB     r0,[sp,#0]            ;1189
00157c  f8980024          LDRB     r0,[r8,#0x24]         ;1190
001580  e000              B        |L1.5508|
                  |L1.5506|
001582  e054              B        |L1.5678|
                  |L1.5508|
001584  f88d0001          STRB     r0,[sp,#1]            ;1190
001588  f8980020          LDRB     r0,[r8,#0x20]         ;1191
00158c  f88d0002          STRB     r0,[sp,#2]            ;1191
001590  f88da003          STRB     r10,[sp,#3]           ;1192
001594  4669              MOV      r1,sp                 ;1193
001596  f104000c          ADD      r0,r4,#0xc            ;1193
00159a  f7fffffe          BL       lc640_write_long_ptr
00159e  f04f0541          MOV      r5,#0x41              ;1195
0015a2  f88d5000          STRB     r5,[sp,#0]            ;1195
0015a6  f88d5001          STRB     r5,[sp,#1]            ;1196
0015aa  f88d5002          STRB     r5,[sp,#2]            ;1197
0015ae  f88d5003          STRB     r5,[sp,#3]            ;1198
0015b2  4669              MOV      r1,sp                 ;1199
0015b4  f1040010          ADD      r0,r4,#0x10           ;1199
0015b8  f7fffffe          BL       lc640_write_long_ptr
0015bc  f88d5000          STRB     r5,[sp,#0]            ;1201
0015c0  f88d5001          STRB     r5,[sp,#1]            ;1202
0015c4  f88d5002          STRB     r5,[sp,#2]            ;1203
0015c8  f88d5003          STRB     r5,[sp,#3]            ;1204
0015cc  4669              MOV      r1,sp                 ;1205
0015ce  f1040014          ADD      r0,r4,#0x14           ;1205
0015d2  f7fffffe          BL       lc640_write_long_ptr
0015d6  f88d5000          STRB     r5,[sp,#0]            ;1207
0015da  f88d5001          STRB     r5,[sp,#1]            ;1208
0015de  f88d5002          STRB     r5,[sp,#2]            ;1209
0015e2  f88d5003          STRB     r5,[sp,#3]            ;1210
0015e6  4669              MOV      r1,sp                 ;1211
0015e8  f1040018          ADD      r0,r4,#0x18           ;1211
0015ec  f7fffffe          BL       lc640_write_long_ptr
0015f0  f88d5000          STRB     r5,[sp,#0]            ;1213
0015f4  f88d5001          STRB     r5,[sp,#1]            ;1214
0015f8  f88d5002          STRB     r5,[sp,#2]            ;1215
0015fc  f88d5003          STRB     r5,[sp,#3]            ;1216
001600  4669              MOV      r1,sp                 ;1217
001602  f104001c          ADD      r0,r4,#0x1c           ;1217
001606  f7fffffe          BL       lc640_write_long_ptr
00160a  b116              CBZ      r6,|L1.5650|
00160c  2e01              CMP      r6,#1                 ;1223
00160e  d007              BEQ      |L1.5664|
001610  e08e              B        |L1.5936|
                  |L1.5650|
001612  2302              MOVS     r3,#2                 ;1221
001614  2201              MOVS     r2,#1                 ;1221
001616  2105              MOVS     r1,#5                 ;1221
001618  a0fc              ADR      r0,|L1.6668|
00161a  f7fffffe          BL       snmp_trap_send
00161e  e087              B        |L1.5936|
                  |L1.5664|
001620  2302              MOVS     r3,#2                 ;1225
001622  461a              MOV      r2,r3                 ;1225
001624  2105              MOVS     r1,#5                 ;1225
001626  a0ff              ADR      r0,|L1.6692|
001628  f7fffffe          BL       snmp_trap_send
00162c  e080              B        |L1.5936|
                  |L1.5678|
;;;1231   	{
;;;1232   	//bat[b]._av=0;
;;;1233   
;;;1234        event_ptr=lc640_read_int(PTR_EVENT_LOG);
00162e  4628              MOV      r0,r5
001630  f7fffffe          BL       lc640_read_int
001634  b287              UXTH     r7,r0
;;;1235   	event_ptr_find=event_ptr;
001636  463c              MOV      r4,r7
                  |L1.5688|
;;;1236   	
;;;1237   avar_bat_as_hndl_lbl1: 
;;;1238   
;;;1239   	lc640_adr=EVENT_LOG+(event_ptr_find*32);
001638  eb0b1044          ADD      r0,r11,r4,LSL #5
00163c  b285              UXTH     r5,r0
;;;1240   
;;;1241        lc640_read_long_ptr(lc640_adr,data);
00163e  4669              MOV      r1,sp
001640  4628              MOV      r0,r5
001642  f7fffffe          BL       lc640_read_long_ptr
;;;1242        
;;;1243        if(!((data[0]=='B')&&(data[1]==b)&&(data[2]=='C')))
001646  f89d0000          LDRB     r0,[sp,#0]
00164a  2842              CMP      r0,#0x42
00164c  d107              BNE      |L1.5726|
00164e  f89d0001          LDRB     r0,[sp,#1]
001652  42b0              CMP      r0,r6
001654  d103              BNE      |L1.5726|
001656  f89d0002          LDRB     r0,[sp,#2]
00165a  2843              CMP      r0,#0x43
00165c  d009              BEQ      |L1.5746|
                  |L1.5726|
;;;1244        	{        
;;;1245        	if(event_ptr_find)event_ptr_find--;
00165e  b11c              CBZ      r4,|L1.5736|
001660  f1a40401          SUB      r4,r4,#1
001664  b2a4              UXTH     r4,r4
001666  e001              B        |L1.5740|
                  |L1.5736|
;;;1246        	else event_ptr_find=63;
001668  f04f043f          MOV      r4,#0x3f
                  |L1.5740|
;;;1247        	if(event_ptr_find==event_ptr)goto avar_bat_as_hndl_end;
00166c  42bc              CMP      r4,r7
00166e  d1e3              BNE      |L1.5688|
001670  e05e              B        |L1.5936|
                  |L1.5746|
;;;1248        	else goto avar_bat_as_hndl_lbl1;
;;;1249        	}
;;;1250        else 
;;;1251        	{
;;;1252        	lc640_read_long_ptr(lc640_adr+16,data);
001672  4669              MOV      r1,sp
001674  f1050010          ADD      r0,r5,#0x10
001678  f7fffffe          BL       lc640_read_long_ptr
;;;1253        	if(!((data[0]=='A')&&(data[1]=='A')&&(data[2]=='A')&&(data[3]=='A')))
00167c  f89d0000          LDRB     r0,[sp,#0]
001680  2841              CMP      r0,#0x41
001682  d10b              BNE      |L1.5788|
001684  f89d0001          LDRB     r0,[sp,#1]
001688  2841              CMP      r0,#0x41
00168a  d107              BNE      |L1.5788|
00168c  f89d0002          LDRB     r0,[sp,#2]
001690  2841              CMP      r0,#0x41
001692  d103              BNE      |L1.5788|
001694  f89d0003          LDRB     r0,[sp,#3]
001698  2841              CMP      r0,#0x41
00169a  d009              BEQ      |L1.5808|
                  |L1.5788|
;;;1254        		{        
;;;1255        		if(event_ptr_find)event_ptr_find--;
00169c  b11c              CBZ      r4,|L1.5798|
00169e  f1a40401          SUB      r4,r4,#1
0016a2  b2a4              UXTH     r4,r4
0016a4  e001              B        |L1.5802|
                  |L1.5798|
;;;1256            		else event_ptr_find=63;
0016a6  f04f043f          MOV      r4,#0x3f
                  |L1.5802|
;;;1257            	    	if(event_ptr_find==event_ptr)goto avar_bat_as_hndl_end;
0016aa  42bc              CMP      r4,r7
0016ac  d1c4              BNE      |L1.5688|
0016ae  e03f              B        |L1.5936|
                  |L1.5808|
;;;1258        		else goto avar_bat_as_hndl_lbl1;
;;;1259        		}
;;;1260   
;;;1261        	}
;;;1262        		
;;;1263   	data[0]=LPC_RTC->YEAR;
0016b0  f8b8003c          LDRH     r0,[r8,#0x3c]
0016b4  f88d0000          STRB     r0,[sp,#0]
;;;1264   	data[1]=LPC_RTC->MONTH;
0016b8  f8980038          LDRB     r0,[r8,#0x38]
0016bc  f88d0001          STRB     r0,[sp,#1]
;;;1265   	data[2]=LPC_RTC->DOM;
0016c0  f898002c          LDRB     r0,[r8,#0x2c]
0016c4  f88d0002          STRB     r0,[sp,#2]
;;;1266   	data[3]=0;
0016c8  f88da003          STRB     r10,[sp,#3]
;;;1267   	lc640_write_long_ptr(lc640_adr+16,data);
0016cc  4669              MOV      r1,sp
0016ce  f1050010          ADD      r0,r5,#0x10
0016d2  f7fffffe          BL       lc640_write_long_ptr
;;;1268   
;;;1269   	data[0]=LPC_RTC->HOUR;
0016d6  f8980028          LDRB     r0,[r8,#0x28]
0016da  f88d0000          STRB     r0,[sp,#0]
;;;1270   	data[1]=LPC_RTC->MIN;
0016de  f8980024          LDRB     r0,[r8,#0x24]
0016e2  f88d0001          STRB     r0,[sp,#1]
;;;1271   	data[2]=LPC_RTC->SEC;
0016e6  f8980020          LDRB     r0,[r8,#0x20]
0016ea  f88d0002          STRB     r0,[sp,#2]
;;;1272   	data[3]=0;
0016ee  f88da003          STRB     r10,[sp,#3]
;;;1273   	lc640_write_long_ptr(lc640_adr+20,data);
0016f2  4669              MOV      r1,sp
0016f4  f1050014          ADD      r0,r5,#0x14
0016f8  f7fffffe          BL       lc640_write_long_ptr
;;;1274   	
;;;1275   	data[0]='B';
0016fc  f88d9000          STRB     r9,[sp,#0]
;;;1276   	data[1]='B';
001700  f88d9001          STRB     r9,[sp,#1]
;;;1277   	data[2]='B';
001704  f88d9002          STRB     r9,[sp,#2]
;;;1278   	data[3]='B';
001708  f88d9003          STRB     r9,[sp,#3]
;;;1279   	lc640_write_long_ptr(lc640_adr+24,data);
00170c  4669              MOV      r1,sp
00170e  f1050018          ADD      r0,r5,#0x18
001712  f7fffffe          BL       lc640_write_long_ptr
;;;1280   	
;;;1281   	data[0]='B';
001716  f88d9000          STRB     r9,[sp,#0]
;;;1282   	data[1]='B';
00171a  f88d9001          STRB     r9,[sp,#1]
;;;1283   	data[2]='B';
00171e  f88d9002          STRB     r9,[sp,#2]
;;;1284   	data[3]='B';
001722  f88d9003          STRB     r9,[sp,#3]
;;;1285   	lc640_write_long_ptr(lc640_adr+28,data);
001726  4669              MOV      r1,sp
001728  f105001c          ADD      r0,r5,#0x1c
00172c  f7fffffe          BL       lc640_write_long_ptr
                  |L1.5936|
;;;1286   	
;;;1287   
;;;1288   	
;;;1289   	}
;;;1290   	
;;;1291   avar_bat_as_hndl_end:
;;;1292   __nop();		
001730  bf00              NOP      
                  |L1.5938|
;;;1293   }
001732  e54a              B        |L1.4554|
;;;1294   
                          ENDP

                  ke_zvu_mem_hndl PROC
;;;1295   //-----------------------------------------------
;;;1296   void ke_zvu_mem_hndl(char b,unsigned short in,unsigned short in1)
001734  b5f7              PUSH     {r0-r2,r4-r7,lr}
;;;1297   {
001736  b082              SUB      sp,sp,#8
001738  4605              MOV      r5,r0
;;;1298   char data[4];
;;;1299   unsigned int event_ptr=0,lc640_adr/*,event_ptr_find*/,event_cnt;
;;;1300   //unsigned char temp,temp_;
;;;1301   //unsigned int tempUI;
;;;1302   //unsigned long tempUL; 
;;;1303   signed temp_temp;
;;;1304   
;;;1305   temp_temp=bat[b]._u_old[bat_u_old_cnt+1]; 
00173a  eb050045          ADD      r0,r5,r5,LSL #1
00173e  49bf              LDR      r1,|L1.6716|
001740  eb001005          ADD      r0,r0,r5,LSL #4
001744  eb010180          ADD      r1,r1,r0,LSL #2
001748  48bd              LDR      r0,|L1.6720|
00174a  f9b00000          LDRSH    r0,[r0,#0]  ; bat_u_old_cnt
00174e  f1000001          ADD      r0,r0,#1
001752  eb010040          ADD      r0,r1,r0,LSL #1
001756  f9b00020          LDRSH    r0,[r0,#0x20]
00175a  9000              STR      r0,[sp,#0]
;;;1306   
;;;1307   event_ptr=lc640_read_int(PTR_EVENT_LOG);
00175c  f44f6660          MOV      r6,#0xe00
001760  4630              MOV      r0,r6
001762  f7fffffe          BL       lc640_read_int
;;;1308   event_ptr++;	
001766  f1000001          ADD      r0,r0,#1
00176a  4604              MOV      r4,r0
;;;1309   if(event_ptr>63)event_ptr=0;	
00176c  2c3f              CMP      r4,#0x3f
00176e  d901              BLS      |L1.6004|
001770  f04f0400          MOV      r4,#0
                  |L1.6004|
;;;1310   lc640_write_int(PTR_EVENT_LOG,event_ptr);	
001774  b221              SXTH     r1,r4
001776  4630              MOV      r0,r6
001778  f7fffffe          BL       lc640_write_int
;;;1311   	
;;;1312   event_cnt=lc640_read_int(CNT_EVENT_LOG);
00177c  f6406702          MOV      r7,#0xe02
001780  4638              MOV      r0,r7
001782  f7fffffe          BL       lc640_read_int
;;;1313   if(event_cnt!=63)event_cnt=event_ptr;
001786  283f              CMP      r0,#0x3f
001788  d000              BEQ      |L1.6028|
00178a  4620              MOV      r0,r4
                  |L1.6028|
;;;1314   lc640_write_int(CNT_EVENT_LOG,event_cnt); 
00178c  b201              SXTH     r1,r0
00178e  4638              MOV      r0,r7
001790  f7fffffe          BL       lc640_write_int
;;;1315   	
;;;1316   lc640_adr=EVENT_LOG+(lc640_read_int(PTR_EVENT_LOG)*32);
001794  4630              MOV      r0,r6
001796  f7fffffe          BL       lc640_read_int
00179a  f44f6180          MOV      r1,#0x400
00179e  eb011440          ADD      r4,r1,r0,LSL #5
;;;1317   	
;;;1318   data[0]='B';
0017a2  f04f0042          MOV      r0,#0x42
0017a6  f88d0004          STRB     r0,[sp,#4]
;;;1319   data[1]=b; 
0017aa  f88d5005          STRB     r5,[sp,#5]
;;;1320   data[2]='K';
0017ae  f04f004b          MOV      r0,#0x4b
0017b2  f88d0006          STRB     r0,[sp,#6]
;;;1321   data[3]='Z';
0017b6  f04f005a          MOV      r0,#0x5a
0017ba  f88d0007          STRB     r0,[sp,#7]
;;;1322   
;;;1323   lc640_write_long_ptr(lc640_adr,data);
0017be  a901              ADD      r1,sp,#4
0017c0  4620              MOV      r0,r4
0017c2  f7fffffe          BL       lc640_write_long_ptr
;;;1324   
;;;1325   data[0]=*((char*)&in);
0017c6  f89d000c          LDRB     r0,[sp,#0xc]
0017ca  f88d0004          STRB     r0,[sp,#4]
;;;1326   data[1]=*(((char*)(&in))+1);
0017ce  f89d000d          LDRB     r0,[sp,#0xd]
0017d2  f88d0005          STRB     r0,[sp,#5]
;;;1327   data[2]=*((char*)&temp_temp);
0017d6  f89d0000          LDRB     r0,[sp,#0]
0017da  f88d0006          STRB     r0,[sp,#6]
;;;1328   data[3]=*(((char*)(&temp_temp))+1);
0017de  f89d0001          LDRB     r0,[sp,#1]
0017e2  f88d0007          STRB     r0,[sp,#7]
;;;1329   lc640_write_long_ptr(lc640_adr+4,data);
0017e6  a901              ADD      r1,sp,#4
0017e8  1d20              ADDS     r0,r4,#4
0017ea  f7fffffe          BL       lc640_write_long_ptr
;;;1330   
;;;1331   ke_date[0]=lc640_read_long(EE_SPC_KE_DATE0);
0017ee  f24020a2          MOV      r0,#0x2a2
0017f2  f7fffffe          BL       lc640_read_long
0017f6  4d93              LDR      r5,|L1.6724|
0017f8  6028              STR      r0,[r5,#0]  ; ke_date
;;;1332   lc640_write_long_ptr(lc640_adr+8,(char*)&ke_date[0]);
0017fa  4629              MOV      r1,r5
0017fc  f1040008          ADD      r0,r4,#8
001800  f7fffffe          BL       lc640_write_long_ptr
;;;1333   ke_date[1]=lc640_read_long(EE_SPC_KE_DATE1);	
001804  f24020a6          MOV      r0,#0x2a6
001808  f7fffffe          BL       lc640_read_long
00180c  6068              STR      r0,[r5,#4]  ; ke_date
;;;1334   lc640_write_long_ptr(lc640_adr+12,(char*)&ke_date[1]);
00180e  1d29              ADDS     r1,r5,#4
001810  f104000c          ADD      r0,r4,#0xc
001814  f7fffffe          BL       lc640_write_long_ptr
;;;1335   
;;;1336   data[0]=LPC_RTC->YEAR;
001818  4d8b              LDR      r5,|L1.6728|
00181a  8ba8              LDRH     r0,[r5,#0x1c]
00181c  f88d0004          STRB     r0,[sp,#4]
;;;1337   data[1]=LPC_RTC->MONTH;
001820  7e28              LDRB     r0,[r5,#0x18]
001822  f88d0005          STRB     r0,[sp,#5]
;;;1338   data[2]=LPC_RTC->DOM;
001826  7b28              LDRB     r0,[r5,#0xc]
001828  f88d0006          STRB     r0,[sp,#6]
;;;1339   data[3]=*((char*)&in1);
00182c  f89d0010          LDRB     r0,[sp,#0x10]
001830  f88d0007          STRB     r0,[sp,#7]
;;;1340   lc640_write_long_ptr(lc640_adr+16,data);
001834  a901              ADD      r1,sp,#4
001836  f1040010          ADD      r0,r4,#0x10
00183a  f7fffffe          BL       lc640_write_long_ptr
;;;1341   
;;;1342   data[0]=LPC_RTC->HOUR;
00183e  7a28              LDRB     r0,[r5,#8]
001840  f88d0004          STRB     r0,[sp,#4]
;;;1343   data[1]=LPC_RTC->MIN;
001844  7928              LDRB     r0,[r5,#4]
001846  f88d0005          STRB     r0,[sp,#5]
;;;1344   data[2]=LPC_RTC->SEC;
00184a  7828              LDRB     r0,[r5,#0]
00184c  f88d0006          STRB     r0,[sp,#6]
;;;1345   data[3]=*(((char*)(&in1))+1);
001850  f89d0011          LDRB     r0,[sp,#0x11]
001854  f88d0007          STRB     r0,[sp,#7]
;;;1346   lc640_write_long_ptr(lc640_adr+20,data);
001858  a901              ADD      r1,sp,#4
00185a  f1040014          ADD      r0,r4,#0x14
00185e  f7fffffe          BL       lc640_write_long_ptr
;;;1347    
;;;1348   }
001862  b005              ADD      sp,sp,#0x14
001864  bdf0              POP      {r4-r7,pc}
;;;1349   
                          ENDP

                  vz_mem_hndl PROC
;;;1406   //-----------------------------------------------
;;;1407   void vz_mem_hndl(unsigned short in)
001866  e92d4ff8          PUSH     {r3-r11,lr}
;;;1408   {
;;;1409   char data[4];
;;;1410   unsigned int event_ptr=0,lc640_adr,event_ptr_find=0,event_cnt;
00186a  f04f0600          MOV      r6,#0
00186e  4634              MOV      r4,r6
;;;1411   //char avar_simbol;
;;;1412   
;;;1413   if(in==1)
;;;1414   	{
;;;1415   	event_ptr=lc640_read_int(PTR_EVENT_LOG);
;;;1416   	event_ptr++;	
;;;1417   	if(event_ptr>63)event_ptr=0;	
;;;1418   	lc640_write_int(PTR_EVENT_LOG,event_ptr);	
;;;1419   	
;;;1420        event_cnt=lc640_read_int(CNT_EVENT_LOG);
;;;1421   	if(event_cnt!=63)event_cnt=event_ptr;
;;;1422   	lc640_write_int(CNT_EVENT_LOG,event_cnt); 
;;;1423   	
;;;1424   	lc640_adr=EVENT_LOG+(lc640_read_int(PTR_EVENT_LOG)*32);
;;;1425   	
;;;1426   	data[0]='B';
;;;1427   	data[1]=0; 
;;;1428   	data[2]='Z';
;;;1429   	data[3]=0;
;;;1430   	lc640_write_long_ptr(lc640_adr,data);
;;;1431   
;;;1432   	data[0]=0;
;;;1433   	data[1]=0;
;;;1434   	data[2]=0;
;;;1435   	data[3]=0;
;;;1436   	lc640_write_long_ptr(lc640_adr+4,data);
;;;1437   
;;;1438   	data[0]=LPC_RTC->YEAR;
001870  f8df81d8          LDR      r8,|L1.6732|
001874  46a1              MOV      r9,r4                 ;1410
001876  f04f0742          MOV      r7,#0x42              ;1426
00187a  f44f6a80          MOV      r10,#0x400            ;1424
00187e  2801              CMP      r0,#1                 ;1413
001880  d002              BEQ      |L1.6280|
;;;1439   	data[1]=LPC_RTC->MONTH;
;;;1440   	data[2]=LPC_RTC->DOM;
;;;1441   	data[3]=0;
;;;1442   	lc640_write_long_ptr(lc640_adr+8,data);
;;;1443   
;;;1444   	data[0]=LPC_RTC->HOUR;
;;;1445   	data[1]=LPC_RTC->MIN;
;;;1446   	data[2]=LPC_RTC->SEC;
;;;1447   	data[3]=0;
;;;1448   	lc640_write_long_ptr(lc640_adr+12,data);
;;;1449   	
;;;1450   	data[0]='A';
;;;1451   	data[1]='A';
;;;1452   	data[2]='A';
;;;1453   	data[3]='A';
;;;1454   	lc640_write_long_ptr(lc640_adr+16,data);
;;;1455   	
;;;1456   	data[0]='A';
;;;1457   	data[1]='A';
;;;1458   	data[2]='A';
;;;1459   	data[3]='A';
;;;1460   	lc640_write_long_ptr(lc640_adr+20,data);
;;;1461   	
;;;1462   	data[0]='A';
;;;1463   	data[1]='A';
;;;1464   	data[2]='A';
;;;1465   	data[3]='A';
;;;1466   	lc640_write_long_ptr(lc640_adr+24,data);
;;;1467   	
;;;1468   	data[0]='A';
;;;1469   	data[1]='A';
;;;1470   	data[2]='A';
;;;1471   	data[3]='A';
;;;1472   	lc640_write_long_ptr(lc640_adr+28,data);		
;;;1473    	
;;;1474   	}
;;;1475   
;;;1476   else if(in==0)
001882  2800              CMP      r0,#0
001884  d07e              BEQ      |L1.6532|
001886  e12b              B        |L1.6880|
                  |L1.6280|
001888  f44f6560          MOV      r5,#0xe00             ;1415
00188c  4628              MOV      r0,r5                 ;1415
00188e  f7fffffe          BL       lc640_read_int
001892  f1000001          ADD      r0,r0,#1              ;1416
001896  4604              MOV      r4,r0                 ;1416
001898  2c3f              CMP      r4,#0x3f              ;1417
00189a  d901              BLS      |L1.6304|
00189c  f04f0400          MOV      r4,#0                 ;1417
                  |L1.6304|
0018a0  b221              SXTH     r1,r4                 ;1418
0018a2  4628              MOV      r0,r5                 ;1418
0018a4  f7fffffe          BL       lc640_write_int
0018a8  f6406602          MOV      r6,#0xe02             ;1420
0018ac  4630              MOV      r0,r6                 ;1420
0018ae  f7fffffe          BL       lc640_read_int
0018b2  283f              CMP      r0,#0x3f              ;1421
0018b4  d000              BEQ      |L1.6328|
0018b6  4620              MOV      r0,r4                 ;1421
                  |L1.6328|
0018b8  b201              SXTH     r1,r0                 ;1422
0018ba  4630              MOV      r0,r6                 ;1422
0018bc  f7fffffe          BL       lc640_write_int
0018c0  4628              MOV      r0,r5                 ;1424
0018c2  f7fffffe          BL       lc640_read_int
0018c6  eb0a1440          ADD      r4,r10,r0,LSL #5      ;1424
0018ca  f88d7000          STRB     r7,[sp,#0]            ;1426
0018ce  f88d9001          STRB     r9,[sp,#1]            ;1427
0018d2  f04f005a          MOV      r0,#0x5a              ;1428
0018d6  f88d0002          STRB     r0,[sp,#2]            ;1428
0018da  f88d9003          STRB     r9,[sp,#3]            ;1429
0018de  4669              MOV      r1,sp                 ;1430
0018e0  4620              MOV      r0,r4                 ;1430
0018e2  f7fffffe          BL       lc640_write_long_ptr
0018e6  f8cd9000          STR      r9,[sp,#0]            ;1435
0018ea  4669              MOV      r1,sp                 ;1436
0018ec  1d20              ADDS     r0,r4,#4              ;1436
0018ee  f7fffffe          BL       lc640_write_long_ptr
0018f2  f8b8003c          LDRH     r0,[r8,#0x3c]         ;1438
0018f6  f88d0000          STRB     r0,[sp,#0]            ;1438
0018fa  f8980038          LDRB     r0,[r8,#0x38]         ;1439
0018fe  f88d0001          STRB     r0,[sp,#1]            ;1439
001902  f898002c          LDRB     r0,[r8,#0x2c]         ;1440
001906  f88d0002          STRB     r0,[sp,#2]            ;1440
00190a  f88d9003          STRB     r9,[sp,#3]            ;1441
00190e  4669              MOV      r1,sp                 ;1442
001910  f1040008          ADD      r0,r4,#8              ;1442
001914  f7fffffe          BL       lc640_write_long_ptr
001918  f8980028          LDRB     r0,[r8,#0x28]         ;1444
00191c  f88d0000          STRB     r0,[sp,#0]            ;1444
001920  f8980024          LDRB     r0,[r8,#0x24]         ;1445
001924  f88d0001          STRB     r0,[sp,#1]            ;1445
001928  f8980020          LDRB     r0,[r8,#0x20]         ;1446
00192c  f88d0002          STRB     r0,[sp,#2]            ;1446
001930  f88d9003          STRB     r9,[sp,#3]            ;1447
001934  4669              MOV      r1,sp                 ;1448
001936  f104000c          ADD      r0,r4,#0xc            ;1448
00193a  f7fffffe          BL       lc640_write_long_ptr
00193e  f04f0541          MOV      r5,#0x41              ;1450
001942  f88d5000          STRB     r5,[sp,#0]            ;1450
001946  f88d5001          STRB     r5,[sp,#1]            ;1451
00194a  f88d5002          STRB     r5,[sp,#2]            ;1452
00194e  f88d5003          STRB     r5,[sp,#3]            ;1453
001952  4669              MOV      r1,sp                 ;1454
001954  f1040010          ADD      r0,r4,#0x10           ;1454
001958  f7fffffe          BL       lc640_write_long_ptr
00195c  f88d5000          STRB     r5,[sp,#0]            ;1456
001960  f88d5001          STRB     r5,[sp,#1]            ;1457
001964  f88d5002          STRB     r5,[sp,#2]            ;1458
001968  f88d5003          STRB     r5,[sp,#3]            ;1459
00196c  4669              MOV      r1,sp                 ;1460
00196e  f1040014          ADD      r0,r4,#0x14           ;1460
001972  f7fffffe          BL       lc640_write_long_ptr
001976  f88d5000          STRB     r5,[sp,#0]            ;1462
00197a  f88d5001          STRB     r5,[sp,#1]            ;1463
00197e  f88d5002          STRB     r5,[sp,#2]            ;1464
001982  e000              B        |L1.6534|
                  |L1.6532|
001984  e014              B        |L1.6576|
                  |L1.6534|
001986  f88d5003          STRB     r5,[sp,#3]            ;1465
00198a  4669              MOV      r1,sp                 ;1466
00198c  f1040018          ADD      r0,r4,#0x18           ;1466
001990  f7fffffe          BL       lc640_write_long_ptr
001994  f88d5000          STRB     r5,[sp,#0]            ;1468
001998  f88d5001          STRB     r5,[sp,#1]            ;1469
00199c  f88d5002          STRB     r5,[sp,#2]            ;1470
0019a0  f88d5003          STRB     r5,[sp,#3]            ;1471
0019a4  4669              MOV      r1,sp                 ;1472
0019a6  f104001c          ADD      r0,r4,#0x1c           ;1472
0019aa  f7fffffe          BL       lc640_write_long_ptr
0019ae  e097              B        |L1.6880|
                  |L1.6576|
;;;1477   	{      
;;;1478        
;;;1479   vz_mem_hndl_lbl1: 
;;;1480   
;;;1481   	lc640_adr=EVENT_LOG+(event_ptr_find*32);
0019b0  eb0a1544          ADD      r5,r10,r4,LSL #5
;;;1482   
;;;1483        lc640_read_long_ptr(lc640_adr,data);
0019b4  4669              MOV      r1,sp
0019b6  4628              MOV      r0,r5
0019b8  f7fffffe          BL       lc640_read_long_ptr
;;;1484        
;;;1485        if(!((data[0]=='B')&&(data[2]=='Z')))
0019bc  f89d0000          LDRB     r0,[sp,#0]
0019c0  2842              CMP      r0,#0x42
0019c2  d103              BNE      |L1.6604|
0019c4  f89d0002          LDRB     r0,[sp,#2]
0019c8  285a              CMP      r0,#0x5a
0019ca  d008              BEQ      |L1.6622|
                  |L1.6604|
;;;1486        	{        
;;;1487        	if(event_ptr_find)event_ptr_find--;
0019cc  b114              CBZ      r4,|L1.6612|
0019ce  f1a40401          SUB      r4,r4,#1
0019d2  e001              B        |L1.6616|
                  |L1.6612|
;;;1488        	else event_ptr_find=63;
0019d4  f04f043f          MOV      r4,#0x3f
                  |L1.6616|
;;;1489        	if(event_ptr_find==event_ptr)goto vz_mem_hndl_end;
0019d8  42b4              CMP      r4,r6
0019da  d1e9              BNE      |L1.6576|
0019dc  e080              B        |L1.6880|
                  |L1.6622|
;;;1490        	else goto vz_mem_hndl_lbl1;
;;;1491        	}
;;;1492        else 
;;;1493        	{
;;;1494        	lc640_read_long_ptr(lc640_adr+16,data);
0019de  4669              MOV      r1,sp
0019e0  f1050010          ADD      r0,r5,#0x10
0019e4  f7fffffe          BL       lc640_read_long_ptr
;;;1495        	if(!((data[0]=='A')&&(data[1]=='A')&&(data[2]=='A')&&(data[3]=='A')))
0019e8  f89d0000          LDRB     r0,[sp,#0]
0019ec  2841              CMP      r0,#0x41
0019ee  d10b              BNE      |L1.6664|
0019f0  f89d0001          LDRB     r0,[sp,#1]
0019f4  2841              CMP      r0,#0x41
0019f6  d107              BNE      |L1.6664|
0019f8  f89d0002          LDRB     r0,[sp,#2]
0019fc  2841              CMP      r0,#0x41
0019fe  d103              BNE      |L1.6664|
001a00  f89d0003          LDRB     r0,[sp,#3]
001a04  2841              CMP      r0,#0x41
001a06  d02b              BEQ      |L1.6752|
                  |L1.6664|
;;;1496        		{        
;;;1497        		if(event_ptr_find)event_ptr_find--;
001a08  b32c              CBZ      r4,|L1.6742|
001a0a  e021              B        |L1.6736|
                  |L1.6668|
001a0c  42415420          DCB      "BAT #1 Alarm, assimetry",0
001a10  23312041
001a14  6c61726d
001a18  2c206173
001a1c  73696d65
001a20  74727900
                  |L1.6692|
001a24  42415420          DCB      "BAT #2 Alarm, assimetry",0
001a28  23322041
001a2c  6c61726d
001a30  2c206173
001a34  73696d65
001a38  74727900
                  |L1.6716|
                          DCD      bat
                  |L1.6720|
                          DCD      bat_u_old_cnt
                  |L1.6724|
                          DCD      ke_date
                  |L1.6728|
                          DCD      0x40024020
                  |L1.6732|
                          DCD      0x40024000
                  |L1.6736|
001a50  f1a40401          SUB      r4,r4,#1
001a54  e001              B        |L1.6746|
                  |L1.6742|
;;;1498            		else event_ptr_find=63;
001a56  f04f043f          MOV      r4,#0x3f
                  |L1.6746|
;;;1499            		if(event_ptr_find==event_ptr)goto vz_mem_hndl_end;
001a5a  42b4              CMP      r4,r6
001a5c  d1a8              BNE      |L1.6576|
001a5e  e03f              B        |L1.6880|
                  |L1.6752|
;;;1500        		else goto vz_mem_hndl_lbl1;
;;;1501        		}
;;;1502   
;;;1503        	}	
;;;1504   
;;;1505   
;;;1506   	
;;;1507   	data[0]=LPC_RTC->YEAR;
001a60  f8b8003c          LDRH     r0,[r8,#0x3c]
001a64  f88d0000          STRB     r0,[sp,#0]
;;;1508   	data[1]=LPC_RTC->MONTH;
001a68  f8980038          LDRB     r0,[r8,#0x38]
001a6c  f88d0001          STRB     r0,[sp,#1]
;;;1509   	data[2]=LPC_RTC->DOM;
001a70  f898002c          LDRB     r0,[r8,#0x2c]
001a74  f88d0002          STRB     r0,[sp,#2]
;;;1510   	data[3]=0;
001a78  f88d9003          STRB     r9,[sp,#3]
;;;1511   	lc640_write_long_ptr(lc640_adr+16,data);
001a7c  4669              MOV      r1,sp
001a7e  f1050010          ADD      r0,r5,#0x10
001a82  f7fffffe          BL       lc640_write_long_ptr
;;;1512   
;;;1513   	data[0]=LPC_RTC->HOUR;
001a86  f8980028          LDRB     r0,[r8,#0x28]
001a8a  f88d0000          STRB     r0,[sp,#0]
;;;1514   	data[1]=LPC_RTC->MIN;
001a8e  f8980024          LDRB     r0,[r8,#0x24]
001a92  f88d0001          STRB     r0,[sp,#1]
;;;1515   	data[2]=LPC_RTC->SEC;
001a96  f8980020          LDRB     r0,[r8,#0x20]
001a9a  f88d0002          STRB     r0,[sp,#2]
;;;1516   	data[3]=0;
001a9e  f88d9003          STRB     r9,[sp,#3]
;;;1517   	lc640_write_long_ptr(lc640_adr+20,data);
001aa2  4669              MOV      r1,sp
001aa4  f1050014          ADD      r0,r5,#0x14
001aa8  f7fffffe          BL       lc640_write_long_ptr
;;;1518   	
;;;1519   	data[0]='B';
001aac  f88d7000          STRB     r7,[sp,#0]
;;;1520   	data[1]='B';
001ab0  f88d7001          STRB     r7,[sp,#1]
;;;1521   	data[2]='B';
001ab4  f88d7002          STRB     r7,[sp,#2]
;;;1522   	data[3]='B';
001ab8  f88d7003          STRB     r7,[sp,#3]
;;;1523   	lc640_write_long_ptr(lc640_adr+24,data);
001abc  4669              MOV      r1,sp
001abe  f1050018          ADD      r0,r5,#0x18
001ac2  f7fffffe          BL       lc640_write_long_ptr
;;;1524   	
;;;1525   	data[0]='B';
001ac6  f88d7000          STRB     r7,[sp,#0]
;;;1526   	data[1]='B';
001aca  f88d7001          STRB     r7,[sp,#1]
;;;1527   	data[2]='B';
001ace  f88d7002          STRB     r7,[sp,#2]
;;;1528   	data[3]='B';
001ad2  f88d7003          STRB     r7,[sp,#3]
;;;1529   	lc640_write_long_ptr(lc640_adr+28,data);
001ad6  4669              MOV      r1,sp
001ad8  f105001c          ADD      r0,r5,#0x1c
001adc  f7fffffe          BL       lc640_write_long_ptr
                  |L1.6880|
;;;1530   	
;;;1531   	}
;;;1532   
;;;1533   vz_mem_hndl_end:
;;;1534   __nop(); 
001ae0  bf00              NOP      
                  |L1.6882|
;;;1535   
;;;1536   }
001ae2  e4bd              B        |L1.5216|
;;;1537   
                          ENDP

                  speedz_mem_hndl PROC
;;;1538   //-----------------------------------------------
;;;1539   void speedz_mem_hndl(unsigned short in)	 //    (1-, 5- , 0- , 10- )
001ae4  e92d4ff8          PUSH     {r3-r11,lr}
;;;1540   {
001ae8  4605              MOV      r5,r0
;;;1541   char data[4];
;;;1542   unsigned int event_ptr=0,lc640_adr,event_ptr_find=0,event_cnt;
001aea  f04f0600          MOV      r6,#0
001aee  4634              MOV      r4,r6
;;;1543   //char avar_simbol;
;;;1544   
;;;1545   if((in==1)||(in==5)) //  
;;;1546   	{
;;;1547   	event_ptr=lc640_read_int(PTR_EVENT_LOG);
;;;1548   	event_ptr++;	
;;;1549   	if(event_ptr>63)event_ptr=0;	
;;;1550   	lc640_write_int(PTR_EVENT_LOG,event_ptr);	
;;;1551   	
;;;1552       event_cnt=lc640_read_int(CNT_EVENT_LOG);
;;;1553   	if(event_cnt!=63)event_cnt=event_ptr;
;;;1554   	lc640_write_int(CNT_EVENT_LOG,event_cnt); 
;;;1555   	
;;;1556   	lc640_adr=EVENT_LOG+(lc640_read_int(PTR_EVENT_LOG)*32);
;;;1557   	
;;;1558   	data[0]='s';
;;;1559   	data[1]=0;
;;;1560   	if(in==5)data[1]='a'; 
;;;1561   	data[2]='Z';
;;;1562   	data[3]=0;
;;;1563   	lc640_write_long_ptr(lc640_adr,data);
;;;1564   
;;;1565   	data[0]=0;
;;;1566   	data[1]=0;
;;;1567   	data[2]=0;
;;;1568   	data[3]=0;
;;;1569   	lc640_write_long_ptr(lc640_adr+4,data);
;;;1570   
;;;1571   	data[0]=LPC_RTC->YEAR;
001af0  f8df8a3c          LDR      r8,|L1.9520|
001af4  46a1              MOV      r9,r4                 ;1542
001af6  f44f6a80          MOV      r10,#0x400            ;1556
001afa  2d01              CMP      r5,#1                 ;1545
001afc  d012              BEQ      |L1.6948|
001afe  2d05              CMP      r5,#5                 ;1545
001b00  d010              BEQ      |L1.6948|
;;;1572   	data[1]=LPC_RTC->MONTH;
;;;1573   	data[2]=LPC_RTC->DOM;
;;;1574   	data[3]=0;
;;;1575   	lc640_write_long_ptr(lc640_adr+8,data);
;;;1576   
;;;1577   	data[0]=LPC_RTC->HOUR;
;;;1578   	data[1]=LPC_RTC->MIN;
;;;1579   	data[2]=LPC_RTC->SEC;
;;;1580   	data[3]=0;
;;;1581   	lc640_write_long_ptr(lc640_adr+12,data);
;;;1582   	
;;;1583   	data[0]='A';
;;;1584   	data[1]='A';
;;;1585   	data[2]='A';
;;;1586   	data[3]='A';
;;;1587   	lc640_write_long_ptr(lc640_adr+16,data);
;;;1588   	
;;;1589   	data[0]='A';
;;;1590   	data[1]='A';
;;;1591   	data[2]='A';
;;;1592   	data[3]='A';
;;;1593   	lc640_write_long_ptr(lc640_adr+20,data);
;;;1594   	
;;;1595   	data[0]='A';
;;;1596   	data[1]='A';
;;;1597   	data[2]='A';
;;;1598   	data[3]='A';
;;;1599   	lc640_write_long_ptr(lc640_adr+24,data);
;;;1600   	
;;;1601   	data[0]='A';
;;;1602   	data[1]='A';
;;;1603   	data[2]='A';
;;;1604   	data[3]='A';
;;;1605   	lc640_write_long_ptr(lc640_adr+28,data);		
;;;1606    	
;;;1607   	}
;;;1608   
;;;1609   else if(in==0)	// 
001b02  2d00              CMP      r5,#0
001b04  d07d              BEQ      |L1.7170|
;;;1610   	{      
;;;1611   	char i;     
;;;1612   	event_ptr_find=0;
;;;1613   	for (i=0;i<63;i++)
;;;1614   		{
;;;1615   		lc640_adr=EVENT_LOG+(event_ptr_find*32);
;;;1616   
;;;1617        	lc640_read_long_ptr(lc640_adr,data);
;;;1618        
;;;1619        	if(!((data[0]=='s')&&(data[2]=='Z')))
;;;1620        		{        
;;;1621        		if(event_ptr_find)event_ptr_find--;
;;;1622        		else event_ptr_find=63;
;;;1623        		if(event_ptr_find==event_ptr)
;;;1624   				{
;;;1625   				lc640_adr=0;
;;;1626   				break;
;;;1627   				}
;;;1628        		else continue;
;;;1629        		}
;;;1630        	else 
;;;1631        		{
;;;1632        		lc640_read_long_ptr(lc640_adr+16,data);
;;;1633        		if(!((data[0]=='A')&&(data[1]=='A')&&(data[2]=='A')&&(data[3]=='A')))
;;;1634        			{        
;;;1635        			if(event_ptr_find)event_ptr_find--;
;;;1636            		else event_ptr_find=63;
;;;1637            		if(event_ptr_find==event_ptr)
;;;1638   					{
;;;1639   					lc640_adr=0;
;;;1640   					break;
;;;1641   					}
;;;1642        			else continue;
;;;1643        			}
;;;1644        		}	
;;;1645   		}
;;;1646   	if(lc640_adr!=0)
;;;1647   		{
;;;1648   		data[0]=LPC_RTC->YEAR;
;;;1649   		data[1]=LPC_RTC->MONTH;
;;;1650   		data[2]=LPC_RTC->DOM;
;;;1651   		data[3]=0;
;;;1652   		lc640_write_long_ptr(lc640_adr+16,data);
;;;1653   	
;;;1654   		data[0]=LPC_RTC->HOUR;
;;;1655   		data[1]=LPC_RTC->MIN;
;;;1656   		data[2]=LPC_RTC->SEC;
;;;1657   		data[3]=0;
;;;1658   		lc640_write_long_ptr(lc640_adr+20,data);
;;;1659   		
;;;1660   		data[0]='C';
;;;1661   		data[1]='C';
;;;1662   		data[2]='C';
;;;1663   		data[3]='C';
;;;1664   		lc640_write_long_ptr(lc640_adr+24,data);
;;;1665   		
;;;1666   		data[0]='C';
;;;1667   		data[1]='C';
;;;1668   		data[2]='C';
;;;1669   		data[3]='C';
;;;1670   		lc640_write_long_ptr(lc640_adr+28,data);
;;;1671   		}
;;;1672   	}
;;;1673   else if(in==10) 	//  
001b06  2d0a              CMP      r5,#0xa
001b08  d17c              BNE      |L1.7172|
;;;1674   	{      
;;;1675   	char i;     
;;;1676   
;;;1677   	event_ptr_find=0;
;;;1678   	for (i=0;i<63;i++)
001b0a  f04f0700          MOV      r7,#0
                  |L1.6926|
;;;1679   		{
;;;1680   		lc640_adr=EVENT_LOG+(event_ptr_find*32);
001b0e  eb0a1544          ADD      r5,r10,r4,LSL #5
;;;1681   
;;;1682        	lc640_read_long_ptr(lc640_adr,data);
001b12  4669              MOV      r1,sp
001b14  4628              MOV      r0,r5
001b16  f7fffffe          BL       lc640_read_long_ptr
;;;1683        
;;;1684        	if(!((data[0]=='s')&&(data[2]=='Z')))
001b1a  f89d0000          LDRB     r0,[sp,#0]
001b1e  2873              CMP      r0,#0x73
001b20  d171              BNE      |L1.7174|
001b22  e122              B        |L1.7530|
                  |L1.6948|
001b24  f44f6660          MOV      r6,#0xe00             ;1547
001b28  4630              MOV      r0,r6                 ;1547
001b2a  f7fffffe          BL       lc640_read_int
001b2e  f1000001          ADD      r0,r0,#1              ;1548
001b32  4604              MOV      r4,r0                 ;1548
001b34  2c3f              CMP      r4,#0x3f              ;1549
001b36  d901              BLS      |L1.6972|
001b38  f04f0400          MOV      r4,#0                 ;1549
                  |L1.6972|
001b3c  b221              SXTH     r1,r4                 ;1550
001b3e  4630              MOV      r0,r6                 ;1550
001b40  f7fffffe          BL       lc640_write_int
001b44  f6406702          MOV      r7,#0xe02             ;1552
001b48  4638              MOV      r0,r7                 ;1552
001b4a  f7fffffe          BL       lc640_read_int
001b4e  283f              CMP      r0,#0x3f              ;1553
001b50  d000              BEQ      |L1.6996|
001b52  4620              MOV      r0,r4                 ;1553
                  |L1.6996|
001b54  b201              SXTH     r1,r0                 ;1554
001b56  4638              MOV      r0,r7                 ;1554
001b58  f7fffffe          BL       lc640_write_int
001b5c  4630              MOV      r0,r6                 ;1556
001b5e  f7fffffe          BL       lc640_read_int
001b62  eb0a1440          ADD      r4,r10,r0,LSL #5      ;1556
001b66  f04f0073          MOV      r0,#0x73              ;1558
001b6a  f88d0000          STRB     r0,[sp,#0]            ;1558
001b6e  f88d9001          STRB     r9,[sp,#1]            ;1559
001b72  2d05              CMP      r5,#5                 ;1560
001b74  d103              BNE      |L1.7038|
001b76  f04f0061          MOV      r0,#0x61              ;1560
001b7a  f88d0001          STRB     r0,[sp,#1]            ;1560
                  |L1.7038|
001b7e  f04f005a          MOV      r0,#0x5a              ;1561
001b82  f88d0002          STRB     r0,[sp,#2]            ;1561
001b86  f88d9003          STRB     r9,[sp,#3]            ;1562
001b8a  4669              MOV      r1,sp                 ;1563
001b8c  4620              MOV      r0,r4                 ;1563
001b8e  f7fffffe          BL       lc640_write_long_ptr
001b92  f8cd9000          STR      r9,[sp,#0]            ;1568
001b96  4669              MOV      r1,sp                 ;1569
001b98  1d20              ADDS     r0,r4,#4              ;1569
001b9a  f7fffffe          BL       lc640_write_long_ptr
001b9e  f8b8003c          LDRH     r0,[r8,#0x3c]         ;1571
001ba2  f88d0000          STRB     r0,[sp,#0]            ;1571
001ba6  f8980038          LDRB     r0,[r8,#0x38]         ;1572
001baa  f88d0001          STRB     r0,[sp,#1]            ;1572
001bae  f898002c          LDRB     r0,[r8,#0x2c]         ;1573
001bb2  f88d0002          STRB     r0,[sp,#2]            ;1573
001bb6  f88d9003          STRB     r9,[sp,#3]            ;1574
001bba  4669              MOV      r1,sp                 ;1575
001bbc  f1040008          ADD      r0,r4,#8              ;1575
001bc0  f7fffffe          BL       lc640_write_long_ptr
001bc4  f8980028          LDRB     r0,[r8,#0x28]         ;1577
001bc8  f88d0000          STRB     r0,[sp,#0]            ;1577
001bcc  f8980024          LDRB     r0,[r8,#0x24]         ;1578
001bd0  f88d0001          STRB     r0,[sp,#1]            ;1578
001bd4  f8980020          LDRB     r0,[r8,#0x20]         ;1579
001bd8  f88d0002          STRB     r0,[sp,#2]            ;1579
001bdc  f88d9003          STRB     r9,[sp,#3]            ;1580
001be0  4669              MOV      r1,sp                 ;1581
001be2  f104000c          ADD      r0,r4,#0xc            ;1581
001be6  f7fffffe          BL       lc640_write_long_ptr
001bea  f04f0541          MOV      r5,#0x41              ;1583
001bee  f88d5000          STRB     r5,[sp,#0]            ;1583
001bf2  f88d5001          STRB     r5,[sp,#1]            ;1584
001bf6  f88d5002          STRB     r5,[sp,#2]            ;1585
001bfa  f88d5003          STRB     r5,[sp,#3]            ;1586
001bfe  4669              MOV      r1,sp                 ;1587
001c00  e002              B        |L1.7176|
                  |L1.7170|
001c02  e02d              B        |L1.7264|
                  |L1.7172|
001c04  e02b              B        |L1.7262|
                  |L1.7174|
001c06  e0b4              B        |L1.7538|
                  |L1.7176|
001c08  f1040010          ADD      r0,r4,#0x10           ;1587
001c0c  f7fffffe          BL       lc640_write_long_ptr
001c10  f88d5000          STRB     r5,[sp,#0]            ;1589
001c14  f88d5001          STRB     r5,[sp,#1]            ;1590
001c18  f88d5002          STRB     r5,[sp,#2]            ;1591
001c1c  f88d5003          STRB     r5,[sp,#3]            ;1592
001c20  4669              MOV      r1,sp                 ;1593
001c22  f1040014          ADD      r0,r4,#0x14           ;1593
001c26  f7fffffe          BL       lc640_write_long_ptr
001c2a  f88d5000          STRB     r5,[sp,#0]            ;1595
001c2e  f88d5001          STRB     r5,[sp,#1]            ;1596
001c32  f88d5002          STRB     r5,[sp,#2]            ;1597
001c36  f88d5003          STRB     r5,[sp,#3]            ;1598
001c3a  4669              MOV      r1,sp                 ;1599
001c3c  f1040018          ADD      r0,r4,#0x18           ;1599
001c40  f7fffffe          BL       lc640_write_long_ptr
001c44  f88d5000          STRB     r5,[sp,#0]            ;1601
001c48  f88d5001          STRB     r5,[sp,#1]            ;1602
001c4c  f88d5002          STRB     r5,[sp,#2]            ;1603
001c50  f88d5003          STRB     r5,[sp,#3]            ;1604
001c54  4669              MOV      r1,sp                 ;1605
001c56  f104001c          ADD      r0,r4,#0x1c           ;1605
001c5a  f7fffffe          BL       lc640_write_long_ptr
                  |L1.7262|
;;;1685        		{        
;;;1686        		if(event_ptr_find)event_ptr_find--;
;;;1687        		else event_ptr_find=63;
;;;1688        		if(event_ptr_find==event_ptr)
;;;1689   				{
;;;1690   				lc640_adr=0;
;;;1691   				break;
;;;1692   				}
;;;1693        		else continue;
;;;1694        		}
;;;1695        	else 
;;;1696        		{
;;;1697        		lc640_read_long_ptr(lc640_adr+16,data);
;;;1698        		if(!((data[0]=='A')&&(data[1]=='A')&&(data[2]=='A')&&(data[3]=='A')))
;;;1699        			{        
;;;1700        			if(event_ptr_find)event_ptr_find--;
;;;1701            		else event_ptr_find=63;
;;;1702            		if(event_ptr_find==event_ptr)
;;;1703   					{
;;;1704   					lc640_adr=0;
;;;1705   					break;
;;;1706   					}
;;;1707        			else continue;
;;;1708        			}
;;;1709        		}	
;;;1710   		}
;;;1711   	if(lc640_adr!=0)
;;;1712   		{
;;;1713   		data[0]=LPC_RTC->YEAR;
;;;1714   		data[1]=LPC_RTC->MONTH;
;;;1715   		data[2]=LPC_RTC->DOM;
;;;1716   		data[3]=0;
;;;1717   		lc640_write_long_ptr(lc640_adr+16,data);
;;;1718   	
;;;1719   		data[0]=LPC_RTC->HOUR;
;;;1720   		data[1]=LPC_RTC->MIN;
;;;1721   		data[2]=LPC_RTC->SEC;
;;;1722   		data[3]=0;
;;;1723   		lc640_write_long_ptr(lc640_adr+20,data);
;;;1724   		
;;;1725   		data[0]='B';
;;;1726   		data[1]='B';
;;;1727   		data[2]='B';
;;;1728   		data[3]='B';
;;;1729   		lc640_write_long_ptr(lc640_adr+24,data);
;;;1730   		
;;;1731   		data[0]='B';
;;;1732   		data[1]='B';
;;;1733   		data[2]='B';
;;;1734   		data[3]='B';
;;;1735   		lc640_write_long_ptr(lc640_adr+28,data);
;;;1736   		}
;;;1737   	}
;;;1738   }
001c5e  e568              B        |L1.5938|
                  |L1.7264|
001c60  f04f0700          MOV      r7,#0                 ;1613
                  |L1.7268|
001c64  eb0a1544          ADD      r5,r10,r4,LSL #5      ;1615
001c68  4669              MOV      r1,sp                 ;1617
001c6a  4628              MOV      r0,r5                 ;1617
001c6c  f7fffffe          BL       lc640_read_long_ptr
001c70  f89d0000          LDRB     r0,[sp,#0]            ;1619
001c74  2873              CMP      r0,#0x73              ;1619
001c76  d103              BNE      |L1.7296|
001c78  f89d0002          LDRB     r0,[sp,#2]            ;1619
001c7c  285a              CMP      r0,#0x5a              ;1619
001c7e  d00a              BEQ      |L1.7318|
                  |L1.7296|
001c80  b114              CBZ      r4,|L1.7304|
001c82  f1a40401          SUB      r4,r4,#1              ;1621
001c86  e001              B        |L1.7308|
                  |L1.7304|
001c88  f04f043f          MOV      r4,#0x3f              ;1622
                  |L1.7308|
001c8c  42b4              CMP      r4,r6                 ;1623
001c8e  d122              BNE      |L1.7382|
001c90  f04f0500          MOV      r5,#0                 ;1625
001c94  e024              B        |L1.7392|
                  |L1.7318|
001c96  4669              MOV      r1,sp                 ;1632
001c98  f1050010          ADD      r0,r5,#0x10           ;1632
001c9c  f7fffffe          BL       lc640_read_long_ptr
001ca0  f89d0000          LDRB     r0,[sp,#0]            ;1633
001ca4  2841              CMP      r0,#0x41              ;1633
001ca6  d10b              BNE      |L1.7360|
001ca8  f89d0001          LDRB     r0,[sp,#1]            ;1633
001cac  2841              CMP      r0,#0x41              ;1633
001cae  d107              BNE      |L1.7360|
001cb0  f89d0002          LDRB     r0,[sp,#2]            ;1633
001cb4  2841              CMP      r0,#0x41              ;1633
001cb6  d103              BNE      |L1.7360|
001cb8  f89d0003          LDRB     r0,[sp,#3]            ;1633
001cbc  2841              CMP      r0,#0x41              ;1633
001cbe  d00a              BEQ      |L1.7382|
                  |L1.7360|
001cc0  b114              CBZ      r4,|L1.7368|
001cc2  f1a40401          SUB      r4,r4,#1              ;1635
001cc6  e001              B        |L1.7372|
                  |L1.7368|
001cc8  f04f043f          MOV      r4,#0x3f              ;1636
                  |L1.7372|
001ccc  42b4              CMP      r4,r6                 ;1637
001cce  d102              BNE      |L1.7382|
001cd0  f04f0500          MOV      r5,#0                 ;1639
001cd4  e004              B        |L1.7392|
                  |L1.7382|
001cd6  f1070701          ADD      r7,r7,#1              ;1613
001cda  b2ff              UXTB     r7,r7                 ;1613
001cdc  2f3f              CMP      r7,#0x3f              ;1613
001cde  d3c1              BCC      |L1.7268|
                  |L1.7392|
001ce0  2d00              CMP      r5,#0                 ;1646
001ce2  d0bc              BEQ      |L1.7262|
001ce4  f8b8003c          LDRH     r0,[r8,#0x3c]         ;1648
001ce8  f88d0000          STRB     r0,[sp,#0]            ;1648
001cec  f8980038          LDRB     r0,[r8,#0x38]         ;1649
001cf0  f88d0001          STRB     r0,[sp,#1]            ;1649
001cf4  f898002c          LDRB     r0,[r8,#0x2c]         ;1650
001cf8  f88d0002          STRB     r0,[sp,#2]            ;1650
001cfc  f88d9003          STRB     r9,[sp,#3]            ;1651
001d00  4669              MOV      r1,sp                 ;1652
001d02  f1050010          ADD      r0,r5,#0x10           ;1652
001d06  f7fffffe          BL       lc640_write_long_ptr
001d0a  f8980028          LDRB     r0,[r8,#0x28]         ;1654
001d0e  f88d0000          STRB     r0,[sp,#0]            ;1654
001d12  f8980024          LDRB     r0,[r8,#0x24]         ;1655
001d16  f88d0001          STRB     r0,[sp,#1]            ;1655
001d1a  f8980020          LDRB     r0,[r8,#0x20]         ;1656
001d1e  f88d0002          STRB     r0,[sp,#2]            ;1656
001d22  f88d9003          STRB     r9,[sp,#3]            ;1657
001d26  4669              MOV      r1,sp                 ;1658
001d28  f1050014          ADD      r0,r5,#0x14           ;1658
001d2c  f7fffffe          BL       lc640_write_long_ptr
001d30  f04f0443          MOV      r4,#0x43              ;1660
001d34  f88d4000          STRB     r4,[sp,#0]            ;1660
001d38  f88d4001          STRB     r4,[sp,#1]            ;1661
001d3c  f88d4002          STRB     r4,[sp,#2]            ;1662
001d40  f88d4003          STRB     r4,[sp,#3]            ;1663
001d44  4669              MOV      r1,sp                 ;1664
001d46  f1050018          ADD      r0,r5,#0x18           ;1664
001d4a  f7fffffe          BL       lc640_write_long_ptr
001d4e  f88d4000          STRB     r4,[sp,#0]            ;1666
001d52  f88d4001          STRB     r4,[sp,#1]            ;1667
001d56  f88d4002          STRB     r4,[sp,#2]            ;1668
001d5a  f88d4003          STRB     r4,[sp,#3]            ;1669
001d5e  4669              MOV      r1,sp                 ;1670
001d60  f105001c          ADD      r0,r5,#0x1c           ;1670
001d64  f7fffffe          BL       lc640_write_long_ptr
                  |L1.7528|
001d68  e4e3              B        |L1.5938|
                  |L1.7530|
001d6a  f89d0002          LDRB     r0,[sp,#2]            ;1684
001d6e  285a              CMP      r0,#0x5a              ;1684
001d70  d00a              BEQ      |L1.7560|
                  |L1.7538|
001d72  b114              CBZ      r4,|L1.7546|
001d74  f1a40401          SUB      r4,r4,#1              ;1686
001d78  e001              B        |L1.7550|
                  |L1.7546|
001d7a  f04f043f          MOV      r4,#0x3f              ;1687
                  |L1.7550|
001d7e  42b4              CMP      r4,r6                 ;1688
001d80  d122              BNE      |L1.7624|
001d82  f04f0500          MOV      r5,#0                 ;1690
001d86  e025              B        |L1.7636|
                  |L1.7560|
001d88  4669              MOV      r1,sp                 ;1697
001d8a  f1050010          ADD      r0,r5,#0x10           ;1697
001d8e  f7fffffe          BL       lc640_read_long_ptr
001d92  f89d0000          LDRB     r0,[sp,#0]            ;1698
001d96  2841              CMP      r0,#0x41              ;1698
001d98  d10b              BNE      |L1.7602|
001d9a  f89d0001          LDRB     r0,[sp,#1]            ;1698
001d9e  2841              CMP      r0,#0x41              ;1698
001da0  d107              BNE      |L1.7602|
001da2  f89d0002          LDRB     r0,[sp,#2]            ;1698
001da6  2841              CMP      r0,#0x41              ;1698
001da8  d103              BNE      |L1.7602|
001daa  f89d0003          LDRB     r0,[sp,#3]            ;1698
001dae  2841              CMP      r0,#0x41              ;1698
001db0  d00a              BEQ      |L1.7624|
                  |L1.7602|
001db2  b114              CBZ      r4,|L1.7610|
001db4  f1a40401          SUB      r4,r4,#1              ;1700
001db8  e001              B        |L1.7614|
                  |L1.7610|
001dba  f04f043f          MOV      r4,#0x3f              ;1701
                  |L1.7614|
001dbe  42b4              CMP      r4,r6                 ;1702
001dc0  d102              BNE      |L1.7624|
001dc2  f04f0500          MOV      r5,#0                 ;1704
001dc6  e005              B        |L1.7636|
                  |L1.7624|
001dc8  f1070701          ADD      r7,r7,#1              ;1678
001dcc  b2ff              UXTB     r7,r7                 ;1678
001dce  2f3f              CMP      r7,#0x3f              ;1678
001dd0  f4ffae9d          BCC      |L1.6926|
                  |L1.7636|
001dd4  2d00              CMP      r5,#0                 ;1711
001dd6  d0c7              BEQ      |L1.7528|
001dd8  f8b8003c          LDRH     r0,[r8,#0x3c]         ;1713
001ddc  f88d0000          STRB     r0,[sp,#0]            ;1713
001de0  f8980038          LDRB     r0,[r8,#0x38]         ;1714
001de4  f88d0001          STRB     r0,[sp,#1]            ;1714
001de8  f898002c          LDRB     r0,[r8,#0x2c]         ;1715
001dec  f88d0002          STRB     r0,[sp,#2]            ;1715
001df0  f88d9003          STRB     r9,[sp,#3]            ;1716
001df4  4669              MOV      r1,sp                 ;1717
001df6  f1050010          ADD      r0,r5,#0x10           ;1717
001dfa  f7fffffe          BL       lc640_write_long_ptr
001dfe  f8980028          LDRB     r0,[r8,#0x28]         ;1719
001e02  f88d0000          STRB     r0,[sp,#0]            ;1719
001e06  f8980024          LDRB     r0,[r8,#0x24]         ;1720
001e0a  f88d0001          STRB     r0,[sp,#1]            ;1720
001e0e  f8980020          LDRB     r0,[r8,#0x20]         ;1721
001e12  f88d0002          STRB     r0,[sp,#2]            ;1721
001e16  f88d9003          STRB     r9,[sp,#3]            ;1722
001e1a  4669              MOV      r1,sp                 ;1723
001e1c  f1050014          ADD      r0,r5,#0x14           ;1723
001e20  f7fffffe          BL       lc640_write_long_ptr
001e24  f04f0442          MOV      r4,#0x42              ;1725
001e28  f88d4000          STRB     r4,[sp,#0]            ;1725
001e2c  f88d4001          STRB     r4,[sp,#1]            ;1726
001e30  f88d4002          STRB     r4,[sp,#2]            ;1727
001e34  f88d4003          STRB     r4,[sp,#3]            ;1728
001e38  4669              MOV      r1,sp                 ;1729
001e3a  f1050018          ADD      r0,r5,#0x18           ;1729
001e3e  f7fffffe          BL       lc640_write_long_ptr
001e42  f88d4000          STRB     r4,[sp,#0]            ;1731
001e46  f88d4001          STRB     r4,[sp,#1]            ;1732
001e4a  f88d4002          STRB     r4,[sp,#2]            ;1733
001e4e  f88d4003          STRB     r4,[sp,#3]            ;1734
001e52  4669              MOV      r1,sp                 ;1735
001e54  f105001c          ADD      r0,r5,#0x1c           ;1735
001e58  f7fffffe          BL       lc640_write_long_ptr
001e5c  e469              B        |L1.5938|
;;;1739     
                          ENDP

                  uz_mem_hndl PROC
;;;1741   //-----------------------------------------------
;;;1742   void uz_mem_hndl(unsigned short in)	 //   
001e5e  e92d4ff8          PUSH     {r3-r11,lr}
;;;1743   {
;;;1744   char data[4];
;;;1745   unsigned int event_ptr=0,lc640_adr,event_ptr_find=0,event_cnt;
001e62  f04f0600          MOV      r6,#0
001e66  4634              MOV      r4,r6
;;;1746   //char avar_simbol;
;;;1747   
;;;1748   if(in==1) //  
;;;1749   	{
;;;1750   	event_ptr=lc640_read_int(PTR_EVENT_LOG);
;;;1751   	event_ptr++;	
;;;1752   	if(event_ptr>63)event_ptr=0;	
;;;1753   	lc640_write_int(PTR_EVENT_LOG,event_ptr);	
;;;1754   	
;;;1755       event_cnt=lc640_read_int(CNT_EVENT_LOG);
;;;1756   	if(event_cnt!=63)event_cnt=event_ptr;
;;;1757   	lc640_write_int(CNT_EVENT_LOG,event_cnt); 
;;;1758   	
;;;1759   	lc640_adr=EVENT_LOG+(lc640_read_int(PTR_EVENT_LOG)*32);
;;;1760   	
;;;1761   	data[0]='u';
;;;1762   	data[1]=0; 
;;;1763   	data[2]='Z';
;;;1764   	data[3]=0;
;;;1765   	lc640_write_long_ptr(lc640_adr,data);
;;;1766   
;;;1767   	data[0]=0;
;;;1768   	data[1]=0;
;;;1769   	data[2]=0;
;;;1770   	data[3]=0;
;;;1771   	lc640_write_long_ptr(lc640_adr+4,data);
;;;1772   
;;;1773   	data[0]=LPC_RTC->YEAR;
001e68  f8df86c4          LDR      r8,|L1.9520|
001e6c  46a1              MOV      r9,r4                 ;1745
001e6e  f44f6a80          MOV      r10,#0x400            ;1759
001e72  2801              CMP      r0,#1                 ;1748
001e74  d010              BEQ      |L1.7832|
;;;1774   	data[1]=LPC_RTC->MONTH;
;;;1775   	data[2]=LPC_RTC->DOM;
;;;1776   	data[3]=0;
;;;1777   	lc640_write_long_ptr(lc640_adr+8,data);
;;;1778   
;;;1779   	data[0]=LPC_RTC->HOUR;
;;;1780   	data[1]=LPC_RTC->MIN;
;;;1781   	data[2]=LPC_RTC->SEC;
;;;1782   	data[3]=0;
;;;1783   	lc640_write_long_ptr(lc640_adr+12,data);
;;;1784   	
;;;1785   	data[0]='A';
;;;1786   	data[1]='A';
;;;1787   	data[2]='A';
;;;1788   	data[3]='A';
;;;1789   	lc640_write_long_ptr(lc640_adr+16,data);
;;;1790   	
;;;1791   	data[0]='A';
;;;1792   	data[1]='A';
;;;1793   	data[2]='A';
;;;1794   	data[3]='A';
;;;1795   	lc640_write_long_ptr(lc640_adr+20,data);
;;;1796   	
;;;1797   	data[0]='A';
;;;1798   	data[1]='A';
;;;1799   	data[2]='A';
;;;1800   	data[3]='A';
;;;1801   	lc640_write_long_ptr(lc640_adr+24,data);
;;;1802   	
;;;1803   	data[0]='A';
;;;1804   	data[1]='A';
;;;1805   	data[2]='A';
;;;1806   	data[3]='A';
;;;1807   	lc640_write_long_ptr(lc640_adr+28,data);		
;;;1808    	
;;;1809   	}
;;;1810   
;;;1811   else if(in==0)	// 
001e76  2800              CMP      r0,#0
001e78  d07d              BEQ      |L1.8054|
;;;1812   	{      
;;;1813   	char i;     
;;;1814   	event_ptr_find=0;
;;;1815   	for (i=0;i<63;i++)
;;;1816   		{
;;;1817   		lc640_adr=EVENT_LOG+(event_ptr_find*32);
;;;1818   
;;;1819        	lc640_read_long_ptr(lc640_adr,data);
;;;1820        
;;;1821        	if(!((data[0]=='u')&&(data[2]=='Z')))
;;;1822        		{        
;;;1823        		if(event_ptr_find)event_ptr_find--;
;;;1824        		else event_ptr_find=63;
;;;1825        		if(event_ptr_find==event_ptr)
;;;1826   				{
;;;1827   				lc640_adr=0;
;;;1828   				break;
;;;1829   				}
;;;1830        		else continue;
;;;1831        		}
;;;1832        	else 
;;;1833        		{
;;;1834        		lc640_read_long_ptr(lc640_adr+16,data);
;;;1835        		if(!((data[0]=='A')&&(data[1]=='A')&&(data[2]=='A')&&(data[3]=='A')))
;;;1836        			{        
;;;1837        			if(event_ptr_find)event_ptr_find--;
;;;1838            		else event_ptr_find=63;
;;;1839            		if(event_ptr_find==event_ptr)
;;;1840   					{
;;;1841   					lc640_adr=0;
;;;1842   					break;
;;;1843   					}
;;;1844        			else continue;
;;;1845        			}
;;;1846        		}	
;;;1847   		}
;;;1848   	if(lc640_adr!=0)
;;;1849   		{
;;;1850   		data[0]=LPC_RTC->YEAR;
;;;1851   		data[1]=LPC_RTC->MONTH;
;;;1852   		data[2]=LPC_RTC->DOM;
;;;1853   		data[3]=0;
;;;1854   		lc640_write_long_ptr(lc640_adr+16,data);
;;;1855   	
;;;1856   		data[0]=LPC_RTC->HOUR;
;;;1857   		data[1]=LPC_RTC->MIN;
;;;1858   		data[2]=LPC_RTC->SEC;
;;;1859   		data[3]=0;
;;;1860   		lc640_write_long_ptr(lc640_adr+20,data);
;;;1861   		
;;;1862   		data[0]='C';
;;;1863   		data[1]='C';
;;;1864   		data[2]='C';
;;;1865   		data[3]='C';
;;;1866   		lc640_write_long_ptr(lc640_adr+24,data);
;;;1867   		
;;;1868   		data[0]='C';
;;;1869   		data[1]='C';
;;;1870   		data[2]='C';
;;;1871   		data[3]='C';
;;;1872   		lc640_write_long_ptr(lc640_adr+28,data);
;;;1873   		}
;;;1874   	}
;;;1875   else if(in==10) 	//  
001e7a  280a              CMP      r0,#0xa
001e7c  d17c              BNE      |L1.8056|
;;;1876   	{      
;;;1877   	char i;     
;;;1878   
;;;1879   	event_ptr_find=0;
;;;1880   	for (i=0;i<63;i++)
001e7e  f04f0700          MOV      r7,#0
                  |L1.7810|
;;;1881   		{
;;;1882   		lc640_adr=EVENT_LOG+(event_ptr_find*32);
001e82  eb0a1544          ADD      r5,r10,r4,LSL #5
;;;1883   
;;;1884        	lc640_read_long_ptr(lc640_adr,data);
001e86  4669              MOV      r1,sp
001e88  4628              MOV      r0,r5
001e8a  f7fffffe          BL       lc640_read_long_ptr
;;;1885        
;;;1886        	if(!((data[0]=='u')&&(data[2]=='Z')))
001e8e  f89d0000          LDRB     r0,[sp,#0]
001e92  2875              CMP      r0,#0x75
001e94  d171              BNE      |L1.8058|
001e96  e11c              B        |L1.8402|
                  |L1.7832|
001e98  f44f6560          MOV      r5,#0xe00             ;1750
001e9c  4628              MOV      r0,r5                 ;1750
001e9e  f7fffffe          BL       lc640_read_int
001ea2  f1000001          ADD      r0,r0,#1              ;1751
001ea6  4604              MOV      r4,r0                 ;1751
001ea8  2c3f              CMP      r4,#0x3f              ;1752
001eaa  d901              BLS      |L1.7856|
001eac  f04f0400          MOV      r4,#0                 ;1752
                  |L1.7856|
001eb0  b221              SXTH     r1,r4                 ;1753
001eb2  4628              MOV      r0,r5                 ;1753
001eb4  f7fffffe          BL       lc640_write_int
001eb8  f6406602          MOV      r6,#0xe02             ;1755
001ebc  4630              MOV      r0,r6                 ;1755
001ebe  f7fffffe          BL       lc640_read_int
001ec2  283f              CMP      r0,#0x3f              ;1756
001ec4  d000              BEQ      |L1.7880|
001ec6  4620              MOV      r0,r4                 ;1756
                  |L1.7880|
001ec8  b201              SXTH     r1,r0                 ;1757
001eca  4630              MOV      r0,r6                 ;1757
001ecc  f7fffffe          BL       lc640_write_int
001ed0  4628              MOV      r0,r5                 ;1759
001ed2  f7fffffe          BL       lc640_read_int
001ed6  eb0a1440          ADD      r4,r10,r0,LSL #5      ;1759
001eda  f04f0075          MOV      r0,#0x75              ;1761
001ede  f88d0000          STRB     r0,[sp,#0]            ;1761
001ee2  f88d9001          STRB     r9,[sp,#1]            ;1762
001ee6  f04f005a          MOV      r0,#0x5a              ;1763
001eea  f88d0002          STRB     r0,[sp,#2]            ;1763
001eee  f88d9003          STRB     r9,[sp,#3]            ;1764
001ef2  4669              MOV      r1,sp                 ;1765
001ef4  4620              MOV      r0,r4                 ;1765
001ef6  f7fffffe          BL       lc640_write_long_ptr
001efa  f8cd9000          STR      r9,[sp,#0]            ;1770
001efe  4669              MOV      r1,sp                 ;1771
001f00  1d20              ADDS     r0,r4,#4              ;1771
001f02  f7fffffe          BL       lc640_write_long_ptr
001f06  f8b8003c          LDRH     r0,[r8,#0x3c]         ;1773
001f0a  f88d0000          STRB     r0,[sp,#0]            ;1773
001f0e  f8980038          LDRB     r0,[r8,#0x38]         ;1774
001f12  f88d0001          STRB     r0,[sp,#1]            ;1774
001f16  f898002c          LDRB     r0,[r8,#0x2c]         ;1775
001f1a  f88d0002          STRB     r0,[sp,#2]            ;1775
001f1e  f88d9003          STRB     r9,[sp,#3]            ;1776
001f22  4669              MOV      r1,sp                 ;1777
001f24  f1040008          ADD      r0,r4,#8              ;1777
001f28  f7fffffe          BL       lc640_write_long_ptr
001f2c  f8980028          LDRB     r0,[r8,#0x28]         ;1779
001f30  f88d0000          STRB     r0,[sp,#0]            ;1779
001f34  f8980024          LDRB     r0,[r8,#0x24]         ;1780
001f38  f88d0001          STRB     r0,[sp,#1]            ;1780
001f3c  f8980020          LDRB     r0,[r8,#0x20]         ;1781
001f40  f88d0002          STRB     r0,[sp,#2]            ;1781
001f44  f88d9003          STRB     r9,[sp,#3]            ;1782
001f48  4669              MOV      r1,sp                 ;1783
001f4a  f104000c          ADD      r0,r4,#0xc            ;1783
001f4e  f7fffffe          BL       lc640_write_long_ptr
001f52  f04f0541          MOV      r5,#0x41              ;1785
001f56  f88d5000          STRB     r5,[sp,#0]            ;1785
001f5a  f88d5001          STRB     r5,[sp,#1]            ;1786
001f5e  f88d5002          STRB     r5,[sp,#2]            ;1787
001f62  f88d5003          STRB     r5,[sp,#3]            ;1788
001f66  4669              MOV      r1,sp                 ;1789
001f68  f1040010          ADD      r0,r4,#0x10           ;1789
001f6c  f7fffffe          BL       lc640_write_long_ptr
001f70  f88d5000          STRB     r5,[sp,#0]            ;1791
001f74  e002              B        |L1.8060|
                  |L1.8054|
001f76  e027              B        |L1.8136|
                  |L1.8056|
001f78  e025              B        |L1.8134|
                  |L1.8058|
001f7a  e0ae              B        |L1.8410|
                  |L1.8060|
001f7c  f88d5001          STRB     r5,[sp,#1]            ;1792
001f80  f88d5002          STRB     r5,[sp,#2]            ;1793
001f84  f88d5003          STRB     r5,[sp,#3]            ;1794
001f88  4669              MOV      r1,sp                 ;1795
001f8a  f1040014          ADD      r0,r4,#0x14           ;1795
001f8e  f7fffffe          BL       lc640_write_long_ptr
001f92  f88d5000          STRB     r5,[sp,#0]            ;1797
001f96  f88d5001          STRB     r5,[sp,#1]            ;1798
001f9a  f88d5002          STRB     r5,[sp,#2]            ;1799
001f9e  f88d5003          STRB     r5,[sp,#3]            ;1800
001fa2  4669              MOV      r1,sp                 ;1801
001fa4  f1040018          ADD      r0,r4,#0x18           ;1801
001fa8  f7fffffe          BL       lc640_write_long_ptr
001fac  f88d5000          STRB     r5,[sp,#0]            ;1803
001fb0  f88d5001          STRB     r5,[sp,#1]            ;1804
001fb4  f88d5002          STRB     r5,[sp,#2]            ;1805
001fb8  f88d5003          STRB     r5,[sp,#3]            ;1806
001fbc  4669              MOV      r1,sp                 ;1807
001fbe  f104001c          ADD      r0,r4,#0x1c           ;1807
001fc2  f7fffffe          BL       lc640_write_long_ptr
                  |L1.8134|
;;;1887        		{        
;;;1888        		if(event_ptr_find)event_ptr_find--;
;;;1889        		else event_ptr_find=63;
;;;1890        		if(event_ptr_find==event_ptr)
;;;1891   				{
;;;1892   				lc640_adr=0;
;;;1893   				break;
;;;1894   				}
;;;1895        		else continue;
;;;1896        		}
;;;1897        	else 
;;;1898        		{
;;;1899        		lc640_read_long_ptr(lc640_adr+16,data);
;;;1900        		if(!((data[0]=='A')&&(data[1]=='A')&&(data[2]=='A')&&(data[3]=='A')))
;;;1901        			{        
;;;1902        			if(event_ptr_find)event_ptr_find--;
;;;1903            		else event_ptr_find=63;
;;;1904            		if(event_ptr_find==event_ptr)
;;;1905   					{
;;;1906   					lc640_adr=0;
;;;1907   					break;
;;;1908   					}
;;;1909        			else continue;
;;;1910        			}
;;;1911        		}	
;;;1912   		}
;;;1913   	if(lc640_adr!=0)
;;;1914   		{
;;;1915   		data[0]=LPC_RTC->YEAR;
;;;1916   		data[1]=LPC_RTC->MONTH;
;;;1917   		data[2]=LPC_RTC->DOM;
;;;1918   		data[3]=0;
;;;1919   		lc640_write_long_ptr(lc640_adr+16,data);
;;;1920   	
;;;1921   		data[0]=LPC_RTC->HOUR;
;;;1922   		data[1]=LPC_RTC->MIN;
;;;1923   		data[2]=LPC_RTC->SEC;
;;;1924   		data[3]=0;
;;;1925   		lc640_write_long_ptr(lc640_adr+20,data);
;;;1926   		
;;;1927   		data[0]='B';
;;;1928   		data[1]='B';
;;;1929   		data[2]='B';
;;;1930   		data[3]='B';
;;;1931   		lc640_write_long_ptr(lc640_adr+24,data);
;;;1932   		
;;;1933   		data[0]='B';
;;;1934   		data[1]='B';
;;;1935   		data[2]='B';
;;;1936   		data[3]='B';
;;;1937   		lc640_write_long_ptr(lc640_adr+28,data);
;;;1938   		}
;;;1939   	}
;;;1940   }
001fc6  e58c              B        |L1.6882|
                  |L1.8136|
001fc8  f04f0700          MOV      r7,#0                 ;1815
                  |L1.8140|
001fcc  eb0a1544          ADD      r5,r10,r4,LSL #5      ;1817
001fd0  4669              MOV      r1,sp                 ;1819
001fd2  4628              MOV      r0,r5                 ;1819
001fd4  f7fffffe          BL       lc640_read_long_ptr
001fd8  f89d0000          LDRB     r0,[sp,#0]            ;1821
001fdc  2875              CMP      r0,#0x75              ;1821
001fde  d103              BNE      |L1.8168|
001fe0  f89d0002          LDRB     r0,[sp,#2]            ;1821
001fe4  285a              CMP      r0,#0x5a              ;1821
001fe6  d00a              BEQ      |L1.8190|
                  |L1.8168|
001fe8  b114              CBZ      r4,|L1.8176|
001fea  f1a40401          SUB      r4,r4,#1              ;1823
001fee  e001              B        |L1.8180|
                  |L1.8176|
001ff0  f04f043f          MOV      r4,#0x3f              ;1824
                  |L1.8180|
001ff4  42b4              CMP      r4,r6                 ;1825
001ff6  d122              BNE      |L1.8254|
001ff8  f04f0500          MOV      r5,#0                 ;1827
001ffc  e024              B        |L1.8264|
                  |L1.8190|
001ffe  4669              MOV      r1,sp                 ;1834
002000  f1050010          ADD      r0,r5,#0x10           ;1834
002004  f7fffffe          BL       lc640_read_long_ptr
002008  f89d0000          LDRB     r0,[sp,#0]            ;1835
00200c  2841              CMP      r0,#0x41              ;1835
00200e  d10b              BNE      |L1.8232|
002010  f89d0001          LDRB     r0,[sp,#1]            ;1835
002014  2841              CMP      r0,#0x41              ;1835
002016  d107              BNE      |L1.8232|
002018  f89d0002          LDRB     r0,[sp,#2]            ;1835
00201c  2841              CMP      r0,#0x41              ;1835
00201e  d103              BNE      |L1.8232|
002020  f89d0003          LDRB     r0,[sp,#3]            ;1835
002024  2841              CMP      r0,#0x41              ;1835
002026  d00a              BEQ      |L1.8254|
                  |L1.8232|
002028  b114              CBZ      r4,|L1.8240|
00202a  f1a40401          SUB      r4,r4,#1              ;1837
00202e  e001              B        |L1.8244|
                  |L1.8240|
002030  f04f043f          MOV      r4,#0x3f              ;1838
                  |L1.8244|
002034  42b4              CMP      r4,r6                 ;1839
002036  d102              BNE      |L1.8254|
002038  f04f0500          MOV      r5,#0                 ;1841
00203c  e004              B        |L1.8264|
                  |L1.8254|
00203e  f1070701          ADD      r7,r7,#1              ;1815
002042  b2ff              UXTB     r7,r7                 ;1815
002044  2f3f              CMP      r7,#0x3f              ;1815
002046  d3c1              BCC      |L1.8140|
                  |L1.8264|
002048  2d00              CMP      r5,#0                 ;1848
00204a  d0bc              BEQ      |L1.8134|
00204c  f8b8003c          LDRH     r0,[r8,#0x3c]         ;1850
002050  f88d0000          STRB     r0,[sp,#0]            ;1850
002054  f8980038          LDRB     r0,[r8,#0x38]         ;1851
002058  f88d0001          STRB     r0,[sp,#1]            ;1851
00205c  f898002c          LDRB     r0,[r8,#0x2c]         ;1852
002060  f88d0002          STRB     r0,[sp,#2]            ;1852
002064  f88d9003          STRB     r9,[sp,#3]            ;1853
002068  4669              MOV      r1,sp                 ;1854
00206a  f1050010          ADD      r0,r5,#0x10           ;1854
00206e  f7fffffe          BL       lc640_write_long_ptr
002072  f8980028          LDRB     r0,[r8,#0x28]         ;1856
002076  f88d0000          STRB     r0,[sp,#0]            ;1856
00207a  f8980024          LDRB     r0,[r8,#0x24]         ;1857
00207e  f88d0001          STRB     r0,[sp,#1]            ;1857
002082  f8980020          LDRB     r0,[r8,#0x20]         ;1858
002086  f88d0002          STRB     r0,[sp,#2]            ;1858
00208a  f88d9003          STRB     r9,[sp,#3]            ;1859
00208e  4669              MOV      r1,sp                 ;1860
002090  f1050014          ADD      r0,r5,#0x14           ;1860
002094  f7fffffe          BL       lc640_write_long_ptr
002098  f04f0443          MOV      r4,#0x43              ;1862
00209c  f88d4000          STRB     r4,[sp,#0]            ;1862
0020a0  f88d4001          STRB     r4,[sp,#1]            ;1863
0020a4  f88d4002          STRB     r4,[sp,#2]            ;1864
0020a8  f88d4003          STRB     r4,[sp,#3]            ;1865
0020ac  4669              MOV      r1,sp                 ;1866
0020ae  f1050018          ADD      r0,r5,#0x18           ;1866
0020b2  f7fffffe          BL       lc640_write_long_ptr
0020b6  f88d4000          STRB     r4,[sp,#0]            ;1868
0020ba  f88d4001          STRB     r4,[sp,#1]            ;1869
0020be  f88d4002          STRB     r4,[sp,#2]            ;1870
0020c2  f88d4003          STRB     r4,[sp,#3]            ;1871
0020c6  4669              MOV      r1,sp                 ;1872
0020c8  f105001c          ADD      r0,r5,#0x1c           ;1872
0020cc  f7fffffe          BL       lc640_write_long_ptr
                  |L1.8400|
0020d0  e507              B        |L1.6882|
                  |L1.8402|
0020d2  f89d0002          LDRB     r0,[sp,#2]            ;1886
0020d6  285a              CMP      r0,#0x5a              ;1886
0020d8  d00a              BEQ      |L1.8432|
                  |L1.8410|
0020da  b114              CBZ      r4,|L1.8418|
0020dc  f1a40401          SUB      r4,r4,#1              ;1888
0020e0  e001              B        |L1.8422|
                  |L1.8418|
0020e2  f04f043f          MOV      r4,#0x3f              ;1889
                  |L1.8422|
0020e6  42b4              CMP      r4,r6                 ;1890
0020e8  d122              BNE      |L1.8496|
0020ea  f04f0500          MOV      r5,#0                 ;1892
0020ee  e025              B        |L1.8508|
                  |L1.8432|
0020f0  4669              MOV      r1,sp                 ;1899
0020f2  f1050010          ADD      r0,r5,#0x10           ;1899
0020f6  f7fffffe          BL       lc640_read_long_ptr
0020fa  f89d0000          LDRB     r0,[sp,#0]            ;1900
0020fe  2841              CMP      r0,#0x41              ;1900
002100  d10b              BNE      |L1.8474|
002102  f89d0001          LDRB     r0,[sp,#1]            ;1900
002106  2841              CMP      r0,#0x41              ;1900
002108  d107              BNE      |L1.8474|
00210a  f89d0002          LDRB     r0,[sp,#2]            ;1900
00210e  2841              CMP      r0,#0x41              ;1900
002110  d103              BNE      |L1.8474|
002112  f89d0003          LDRB     r0,[sp,#3]            ;1900
002116  2841              CMP      r0,#0x41              ;1900
002118  d00a              BEQ      |L1.8496|
                  |L1.8474|
00211a  b114              CBZ      r4,|L1.8482|
00211c  f1a40401          SUB      r4,r4,#1              ;1902
002120  e001              B        |L1.8486|
                  |L1.8482|
002122  f04f043f          MOV      r4,#0x3f              ;1903
                  |L1.8486|
002126  42b4              CMP      r4,r6                 ;1904
002128  d102              BNE      |L1.8496|
00212a  f04f0500          MOV      r5,#0                 ;1906
00212e  e005              B        |L1.8508|
                  |L1.8496|
002130  f1070701          ADD      r7,r7,#1              ;1880
002134  b2ff              UXTB     r7,r7                 ;1880
002136  2f3f              CMP      r7,#0x3f              ;1880
002138  f4ffaea3          BCC      |L1.7810|
                  |L1.8508|
00213c  2d00              CMP      r5,#0                 ;1913
00213e  d0c7              BEQ      |L1.8400|
002140  f8b8003c          LDRH     r0,[r8,#0x3c]         ;1915
002144  f88d0000          STRB     r0,[sp,#0]            ;1915
002148  f8980038          LDRB     r0,[r8,#0x38]         ;1916
00214c  f88d0001          STRB     r0,[sp,#1]            ;1916
002150  f898002c          LDRB     r0,[r8,#0x2c]         ;1917
002154  f88d0002          STRB     r0,[sp,#2]            ;1917
002158  f88d9003          STRB     r9,[sp,#3]            ;1918
00215c  4669              MOV      r1,sp                 ;1919
00215e  f1050010          ADD      r0,r5,#0x10           ;1919
002162  f7fffffe          BL       lc640_write_long_ptr
002166  f8980028          LDRB     r0,[r8,#0x28]         ;1921
00216a  f88d0000          STRB     r0,[sp,#0]            ;1921
00216e  f8980024          LDRB     r0,[r8,#0x24]         ;1922
002172  f88d0001          STRB     r0,[sp,#1]            ;1922
002176  f8980020          LDRB     r0,[r8,#0x20]         ;1923
00217a  f88d0002          STRB     r0,[sp,#2]            ;1923
00217e  f88d9003          STRB     r9,[sp,#3]            ;1924
002182  4669              MOV      r1,sp                 ;1925
002184  f1050014          ADD      r0,r5,#0x14           ;1925
002188  f7fffffe          BL       lc640_write_long_ptr
00218c  f04f0442          MOV      r4,#0x42              ;1927
002190  f88d4000          STRB     r4,[sp,#0]            ;1927
002194  f88d4001          STRB     r4,[sp,#1]            ;1928
002198  f88d4002          STRB     r4,[sp,#2]            ;1929
00219c  f88d4003          STRB     r4,[sp,#3]            ;1930
0021a0  4669              MOV      r1,sp                 ;1931
0021a2  f1050018          ADD      r0,r5,#0x18           ;1931
0021a6  f7fffffe          BL       lc640_write_long_ptr
0021aa  f88d4000          STRB     r4,[sp,#0]            ;1933
0021ae  f88d4001          STRB     r4,[sp,#1]            ;1934
0021b2  f88d4002          STRB     r4,[sp,#2]            ;1935
0021b6  f88d4003          STRB     r4,[sp,#3]            ;1936
0021ba  4669              MOV      r1,sp                 ;1937
0021bc  f105001c          ADD      r0,r5,#0x1c           ;1937
0021c0  f7fffffe          BL       lc640_write_long_ptr
0021c4  e48d              B        |L1.6882|
;;;1941   
                          ENDP

                  fz_mem_hndl PROC
;;;1942   //-----------------------------------------------
;;;1943   void fz_mem_hndl(unsigned short in)	 //   
0021c6  e92d4ff8          PUSH     {r3-r11,lr}
;;;1944   {
;;;1945   char data[4];
;;;1946   unsigned int event_ptr=0,lc640_adr,event_ptr_find=0,event_cnt;
0021ca  f04f0600          MOV      r6,#0
0021ce  4634              MOV      r4,r6
;;;1947   //char avar_simbol;
;;;1948   
;;;1949   if(in==1) //  
;;;1950   	{
;;;1951   	event_ptr=lc640_read_int(PTR_EVENT_LOG);
;;;1952   	event_ptr++;	
;;;1953   	if(event_ptr>63)event_ptr=0;	
;;;1954   	lc640_write_int(PTR_EVENT_LOG,event_ptr);	
;;;1955   	
;;;1956       event_cnt=lc640_read_int(CNT_EVENT_LOG);
;;;1957   	if(event_cnt!=63)event_cnt=event_ptr;
;;;1958   	lc640_write_int(CNT_EVENT_LOG,event_cnt); 
;;;1959   	
;;;1960   	lc640_adr=EVENT_LOG+(lc640_read_int(PTR_EVENT_LOG)*32);
;;;1961   	
;;;1962   	data[0]='f';
;;;1963   	data[1]=0; 
;;;1964   	data[2]='Z';
;;;1965   	data[3]=0;
;;;1966   	lc640_write_long_ptr(lc640_adr,data);
;;;1967   
;;;1968   	data[0]=0;
;;;1969   	data[1]=0;
;;;1970   	data[2]=0;
;;;1971   	data[3]=0;
;;;1972   	lc640_write_long_ptr(lc640_adr+4,data);
;;;1973   
;;;1974   	data[0]=LPC_RTC->YEAR;
0021d0  f8df835c          LDR      r8,|L1.9520|
0021d4  46a1              MOV      r9,r4                 ;1946
0021d6  f44f6a80          MOV      r10,#0x400            ;1960
0021da  2801              CMP      r0,#1                 ;1949
0021dc  d010              BEQ      |L1.8704|
;;;1975   	data[1]=LPC_RTC->MONTH;
;;;1976   	data[2]=LPC_RTC->DOM;
;;;1977   	data[3]=0;
;;;1978   	lc640_write_long_ptr(lc640_adr+8,data);
;;;1979   
;;;1980   	data[0]=LPC_RTC->HOUR;
;;;1981   	data[1]=LPC_RTC->MIN;
;;;1982   	data[2]=LPC_RTC->SEC;
;;;1983   	data[3]=0;
;;;1984   	lc640_write_long_ptr(lc640_adr+12,data);
;;;1985   	
;;;1986   	data[0]='A';
;;;1987   	data[1]='A';
;;;1988   	data[2]='A';
;;;1989   	data[3]='A';
;;;1990   	lc640_write_long_ptr(lc640_adr+16,data);
;;;1991   	
;;;1992   	data[0]='A';
;;;1993   	data[1]='A';
;;;1994   	data[2]='A';
;;;1995   	data[3]='A';
;;;1996   	lc640_write_long_ptr(lc640_adr+20,data);
;;;1997   	
;;;1998   	data[0]='A';
;;;1999   	data[1]='A';
;;;2000   	data[2]='A';
;;;2001   	data[3]='A';
;;;2002   	lc640_write_long_ptr(lc640_adr+24,data);
;;;2003   	
;;;2004   	data[0]='A';
;;;2005   	data[1]='A';
;;;2006   	data[2]='A';
;;;2007   	data[3]='A';
;;;2008   	lc640_write_long_ptr(lc640_adr+28,data);		
;;;2009    	
;;;2010   	}
;;;2011   
;;;2012   else if(in==0)	// 
0021de  2800              CMP      r0,#0
0021e0  d07d              BEQ      |L1.8926|
;;;2013   	{      
;;;2014   	char i;     
;;;2015   	event_ptr_find=0;
;;;2016   	for (i=0;i<63;i++)
;;;2017   		{
;;;2018   		lc640_adr=EVENT_LOG+(event_ptr_find*32);
;;;2019   
;;;2020        	lc640_read_long_ptr(lc640_adr,data);
;;;2021        
;;;2022        	if(!((data[0]=='f')&&(data[2]=='Z')))
;;;2023        		{        
;;;2024        		if(event_ptr_find)event_ptr_find--;
;;;2025        		else event_ptr_find=63;
;;;2026        		if(event_ptr_find==event_ptr)
;;;2027   				{
;;;2028   				lc640_adr=0;
;;;2029   				break;
;;;2030   				}
;;;2031        		else continue;
;;;2032        		}
;;;2033        	else 
;;;2034        		{
;;;2035        		lc640_read_long_ptr(lc640_adr+16,data);
;;;2036        		if(!((data[0]=='A')&&(data[1]=='A')&&(data[2]=='A')&&(data[3]=='A')))
;;;2037        			{        
;;;2038        			if(event_ptr_find)event_ptr_find--;
;;;2039            		else event_ptr_find=63;
;;;2040            		if(event_ptr_find==event_ptr)
;;;2041   					{
;;;2042   					lc640_adr=0;
;;;2043   					break;
;;;2044   					}
;;;2045        			else continue;
;;;2046        			}
;;;2047        		}	
;;;2048   		}
;;;2049   	if(lc640_adr!=0)
;;;2050   		{
;;;2051   		data[0]=LPC_RTC->YEAR;
;;;2052   		data[1]=LPC_RTC->MONTH;
;;;2053   		data[2]=LPC_RTC->DOM;
;;;2054   		data[3]=0;
;;;2055   		lc640_write_long_ptr(lc640_adr+16,data);
;;;2056   	
;;;2057   		data[0]=LPC_RTC->HOUR;
;;;2058   		data[1]=LPC_RTC->MIN;
;;;2059   		data[2]=LPC_RTC->SEC;
;;;2060   		data[3]=0;
;;;2061   		lc640_write_long_ptr(lc640_adr+20,data);
;;;2062   		
;;;2063   		data[0]='C';
;;;2064   		data[1]='C';
;;;2065   		data[2]='C';
;;;2066   		data[3]='C';
;;;2067   		lc640_write_long_ptr(lc640_adr+24,data);
;;;2068   		
;;;2069   		data[0]='C';
;;;2070   		data[1]='C';
;;;2071   		data[2]='C';
;;;2072   		data[3]='C';
;;;2073   		lc640_write_long_ptr(lc640_adr+28,data);
;;;2074   		}
;;;2075   	}
;;;2076   else if(in==10) 	//  
0021e2  280a              CMP      r0,#0xa
0021e4  d17c              BNE      |L1.8928|
;;;2077   	{      
;;;2078   	char i;     
;;;2079   
;;;2080   	event_ptr_find=0;
;;;2081   	for (i=0;i<63;i++)
0021e6  f04f0700          MOV      r7,#0
                  |L1.8682|
;;;2082   		{
;;;2083   		lc640_adr=EVENT_LOG+(event_ptr_find*32);
0021ea  eb0a1544          ADD      r5,r10,r4,LSL #5
;;;2084   
;;;2085        	lc640_read_long_ptr(lc640_adr,data);
0021ee  4669              MOV      r1,sp
0021f0  4628              MOV      r0,r5
0021f2  f7fffffe          BL       lc640_read_long_ptr
;;;2086        
;;;2087        	if(!((data[0]=='f')&&(data[2]=='Z')))
0021f6  f89d0000          LDRB     r0,[sp,#0]
0021fa  2866              CMP      r0,#0x66
0021fc  d171              BNE      |L1.8930|
0021fe  e11c              B        |L1.9274|
                  |L1.8704|
002200  f44f6560          MOV      r5,#0xe00             ;1951
002204  4628              MOV      r0,r5                 ;1951
002206  f7fffffe          BL       lc640_read_int
00220a  f1000001          ADD      r0,r0,#1              ;1952
00220e  4604              MOV      r4,r0                 ;1952
002210  2c3f              CMP      r4,#0x3f              ;1953
002212  d901              BLS      |L1.8728|
002214  f04f0400          MOV      r4,#0                 ;1953
                  |L1.8728|
002218  b221              SXTH     r1,r4                 ;1954
00221a  4628              MOV      r0,r5                 ;1954
00221c  f7fffffe          BL       lc640_write_int
002220  f6406602          MOV      r6,#0xe02             ;1956
002224  4630              MOV      r0,r6                 ;1956
002226  f7fffffe          BL       lc640_read_int
00222a  283f              CMP      r0,#0x3f              ;1957
00222c  d000              BEQ      |L1.8752|
00222e  4620              MOV      r0,r4                 ;1957
                  |L1.8752|
002230  b201              SXTH     r1,r0                 ;1958
002232  4630              MOV      r0,r6                 ;1958
002234  f7fffffe          BL       lc640_write_int
002238  4628              MOV      r0,r5                 ;1960
00223a  f7fffffe          BL       lc640_read_int
00223e  eb0a1440          ADD      r4,r10,r0,LSL #5      ;1960
002242  f04f0066          MOV      r0,#0x66              ;1962
002246  f88d0000          STRB     r0,[sp,#0]            ;1962
00224a  f88d9001          STRB     r9,[sp,#1]            ;1963
00224e  f04f005a          MOV      r0,#0x5a              ;1964
002252  f88d0002          STRB     r0,[sp,#2]            ;1964
002256  f88d9003          STRB     r9,[sp,#3]            ;1965
00225a  4669              MOV      r1,sp                 ;1966
00225c  4620              MOV      r0,r4                 ;1966
00225e  f7fffffe          BL       lc640_write_long_ptr
002262  f8cd9000          STR      r9,[sp,#0]            ;1971
002266  4669              MOV      r1,sp                 ;1972
002268  1d20              ADDS     r0,r4,#4              ;1972
00226a  f7fffffe          BL       lc640_write_long_ptr
00226e  f8b8003c          LDRH     r0,[r8,#0x3c]         ;1974
002272  f88d0000          STRB     r0,[sp,#0]            ;1974
002276  f8980038          LDRB     r0,[r8,#0x38]         ;1975
00227a  f88d0001          STRB     r0,[sp,#1]            ;1975
00227e  f898002c          LDRB     r0,[r8,#0x2c]         ;1976
002282  f88d0002          STRB     r0,[sp,#2]            ;1976
002286  f88d9003          STRB     r9,[sp,#3]            ;1977
00228a  4669              MOV      r1,sp                 ;1978
00228c  f1040008          ADD      r0,r4,#8              ;1978
002290  f7fffffe          BL       lc640_write_long_ptr
002294  f8980028          LDRB     r0,[r8,#0x28]         ;1980
002298  f88d0000          STRB     r0,[sp,#0]            ;1980
00229c  f8980024          LDRB     r0,[r8,#0x24]         ;1981
0022a0  f88d0001          STRB     r0,[sp,#1]            ;1981
0022a4  f8980020          LDRB     r0,[r8,#0x20]         ;1982
0022a8  f88d0002          STRB     r0,[sp,#2]            ;1982
0022ac  f88d9003          STRB     r9,[sp,#3]            ;1983
0022b0  4669              MOV      r1,sp                 ;1984
0022b2  f104000c          ADD      r0,r4,#0xc            ;1984
0022b6  f7fffffe          BL       lc640_write_long_ptr
0022ba  f04f0541          MOV      r5,#0x41              ;1986
0022be  f88d5000          STRB     r5,[sp,#0]            ;1986
0022c2  f88d5001          STRB     r5,[sp,#1]            ;1987
0022c6  f88d5002          STRB     r5,[sp,#2]            ;1988
0022ca  f88d5003          STRB     r5,[sp,#3]            ;1989
0022ce  4669              MOV      r1,sp                 ;1990
0022d0  f1040010          ADD      r0,r4,#0x10           ;1990
0022d4  f7fffffe          BL       lc640_write_long_ptr
0022d8  f88d5000          STRB     r5,[sp,#0]            ;1992
0022dc  e002              B        |L1.8932|
                  |L1.8926|
0022de  e027              B        |L1.9008|
                  |L1.8928|
0022e0  e025              B        |L1.9006|
                  |L1.8930|
0022e2  e0ae              B        |L1.9282|
                  |L1.8932|
0022e4  f88d5001          STRB     r5,[sp,#1]            ;1993
0022e8  f88d5002          STRB     r5,[sp,#2]            ;1994
0022ec  f88d5003          STRB     r5,[sp,#3]            ;1995
0022f0  4669              MOV      r1,sp                 ;1996
0022f2  f1040014          ADD      r0,r4,#0x14           ;1996
0022f6  f7fffffe          BL       lc640_write_long_ptr
0022fa  f88d5000          STRB     r5,[sp,#0]            ;1998
0022fe  f88d5001          STRB     r5,[sp,#1]            ;1999
002302  f88d5002          STRB     r5,[sp,#2]            ;2000
002306  f88d5003          STRB     r5,[sp,#3]            ;2001
00230a  4669              MOV      r1,sp                 ;2002
00230c  f1040018          ADD      r0,r4,#0x18           ;2002
002310  f7fffffe          BL       lc640_write_long_ptr
002314  f88d5000          STRB     r5,[sp,#0]            ;2004
002318  f88d5001          STRB     r5,[sp,#1]            ;2005
00231c  f88d5002          STRB     r5,[sp,#2]            ;2006
002320  f88d5003          STRB     r5,[sp,#3]            ;2007
002324  4669              MOV      r1,sp                 ;2008
002326  f104001c          ADD      r0,r4,#0x1c           ;2008
00232a  f7fffffe          BL       lc640_write_long_ptr
                  |L1.9006|
;;;2088        		{        
;;;2089        		if(event_ptr_find)event_ptr_find--;
;;;2090        		else event_ptr_find=63;
;;;2091        		if(event_ptr_find==event_ptr)
;;;2092   				{
;;;2093   				lc640_adr=0;
;;;2094   				break;
;;;2095   				}
;;;2096        		else continue;
;;;2097        		}
;;;2098        	else 
;;;2099        		{
;;;2100        		lc640_read_long_ptr(lc640_adr+16,data);
;;;2101        		if(!((data[0]=='A')&&(data[1]=='A')&&(data[2]=='A')&&(data[3]=='A')))
;;;2102        			{        
;;;2103        			if(event_ptr_find)event_ptr_find--;
;;;2104            		else event_ptr_find=63;
;;;2105            		if(event_ptr_find==event_ptr)
;;;2106   					{
;;;2107   					lc640_adr=0;
;;;2108   					break;
;;;2109   					}
;;;2110        			else continue;
;;;2111        			}
;;;2112        		}	
;;;2113   		}
;;;2114   	if(lc640_adr!=0)
;;;2115   		{
;;;2116   		data[0]=LPC_RTC->YEAR;
;;;2117   		data[1]=LPC_RTC->MONTH;
;;;2118   		data[2]=LPC_RTC->DOM;
;;;2119   		data[3]=0;
;;;2120   		lc640_write_long_ptr(lc640_adr+16,data);
;;;2121   	
;;;2122   		data[0]=LPC_RTC->HOUR;
;;;2123   		data[1]=LPC_RTC->MIN;
;;;2124   		data[2]=LPC_RTC->SEC;
;;;2125   		data[3]=0;
;;;2126   		lc640_write_long_ptr(lc640_adr+20,data);
;;;2127   		
;;;2128   		data[0]='B';
;;;2129   		data[1]='B';
;;;2130   		data[2]='B';
;;;2131   		data[3]='B';
;;;2132   		lc640_write_long_ptr(lc640_adr+24,data);
;;;2133   		
;;;2134   		data[0]='B';
;;;2135   		data[1]='B';
;;;2136   		data[2]='B';
;;;2137   		data[3]='B';
;;;2138   		lc640_write_long_ptr(lc640_adr+28,data);
;;;2139   		}
;;;2140   	}
;;;2141   }
00232e  e496              B        |L1.7262|
                  |L1.9008|
002330  f04f0700          MOV      r7,#0                 ;2016
                  |L1.9012|
002334  eb0a1544          ADD      r5,r10,r4,LSL #5      ;2018
002338  4669              MOV      r1,sp                 ;2020
00233a  4628              MOV      r0,r5                 ;2020
00233c  f7fffffe          BL       lc640_read_long_ptr
002340  f89d0000          LDRB     r0,[sp,#0]            ;2022
002344  2866              CMP      r0,#0x66              ;2022
002346  d103              BNE      |L1.9040|
002348  f89d0002          LDRB     r0,[sp,#2]            ;2022
00234c  285a              CMP      r0,#0x5a              ;2022
00234e  d00a              BEQ      |L1.9062|
                  |L1.9040|
002350  b114              CBZ      r4,|L1.9048|
002352  f1a40401          SUB      r4,r4,#1              ;2024
002356  e001              B        |L1.9052|
                  |L1.9048|
002358  f04f043f          MOV      r4,#0x3f              ;2025
                  |L1.9052|
00235c  42b4              CMP      r4,r6                 ;2026
00235e  d122              BNE      |L1.9126|
002360  f04f0500          MOV      r5,#0                 ;2028
002364  e024              B        |L1.9136|
                  |L1.9062|
002366  4669              MOV      r1,sp                 ;2035
002368  f1050010          ADD      r0,r5,#0x10           ;2035
00236c  f7fffffe          BL       lc640_read_long_ptr
002370  f89d0000          LDRB     r0,[sp,#0]            ;2036
002374  2841              CMP      r0,#0x41              ;2036
002376  d10b              BNE      |L1.9104|
002378  f89d0001          LDRB     r0,[sp,#1]            ;2036
00237c  2841              CMP      r0,#0x41              ;2036
00237e  d107              BNE      |L1.9104|
002380  f89d0002          LDRB     r0,[sp,#2]            ;2036
002384  2841              CMP      r0,#0x41              ;2036
002386  d103              BNE      |L1.9104|
002388  f89d0003          LDRB     r0,[sp,#3]            ;2036
00238c  2841              CMP      r0,#0x41              ;2036
00238e  d00a              BEQ      |L1.9126|
                  |L1.9104|
002390  b114              CBZ      r4,|L1.9112|
002392  f1a40401          SUB      r4,r4,#1              ;2038
002396  e001              B        |L1.9116|
                  |L1.9112|
002398  f04f043f          MOV      r4,#0x3f              ;2039
                  |L1.9116|
00239c  42b4              CMP      r4,r6                 ;2040
00239e  d102              BNE      |L1.9126|
0023a0  f04f0500          MOV      r5,#0                 ;2042
0023a4  e004              B        |L1.9136|
                  |L1.9126|
0023a6  f1070701          ADD      r7,r7,#1              ;2016
0023aa  b2ff              UXTB     r7,r7                 ;2016
0023ac  2f3f              CMP      r7,#0x3f              ;2016
0023ae  d3c1              BCC      |L1.9012|
                  |L1.9136|
0023b0  2d00              CMP      r5,#0                 ;2049
0023b2  d0bc              BEQ      |L1.9006|
0023b4  f8b8003c          LDRH     r0,[r8,#0x3c]         ;2051
0023b8  f88d0000          STRB     r0,[sp,#0]            ;2051
0023bc  f8980038          LDRB     r0,[r8,#0x38]         ;2052
0023c0  f88d0001          STRB     r0,[sp,#1]            ;2052
0023c4  f898002c          LDRB     r0,[r8,#0x2c]         ;2053
0023c8  f88d0002          STRB     r0,[sp,#2]            ;2053
0023cc  f88d9003          STRB     r9,[sp,#3]            ;2054
0023d0  4669              MOV      r1,sp                 ;2055
0023d2  f1050010          ADD      r0,r5,#0x10           ;2055
0023d6  f7fffffe          BL       lc640_write_long_ptr
0023da  f8980028          LDRB     r0,[r8,#0x28]         ;2057
0023de  f88d0000          STRB     r0,[sp,#0]            ;2057
0023e2  f8980024          LDRB     r0,[r8,#0x24]         ;2058
0023e6  f88d0001          STRB     r0,[sp,#1]            ;2058
0023ea  f8980020          LDRB     r0,[r8,#0x20]         ;2059
0023ee  f88d0002          STRB     r0,[sp,#2]            ;2059
0023f2  f88d9003          STRB     r9,[sp,#3]            ;2060
0023f6  4669              MOV      r1,sp                 ;2061
0023f8  f1050014          ADD      r0,r5,#0x14           ;2061
0023fc  f7fffffe          BL       lc640_write_long_ptr
002400  f04f0443          MOV      r4,#0x43              ;2063
002404  f88d4000          STRB     r4,[sp,#0]            ;2063
002408  f88d4001          STRB     r4,[sp,#1]            ;2064
00240c  f88d4002          STRB     r4,[sp,#2]            ;2065
002410  f88d4003          STRB     r4,[sp,#3]            ;2066
002414  4669              MOV      r1,sp                 ;2067
002416  f1050018          ADD      r0,r5,#0x18           ;2067
00241a  f7fffffe          BL       lc640_write_long_ptr
00241e  f88d4000          STRB     r4,[sp,#0]            ;2069
002422  f88d4001          STRB     r4,[sp,#1]            ;2070
002426  f88d4002          STRB     r4,[sp,#2]            ;2071
00242a  f88d4003          STRB     r4,[sp,#3]            ;2072
00242e  4669              MOV      r1,sp                 ;2073
002430  f105001c          ADD      r0,r5,#0x1c           ;2073
002434  f7fffffe          BL       lc640_write_long_ptr
                  |L1.9272|
002438  e411              B        |L1.7262|
                  |L1.9274|
00243a  f89d0002          LDRB     r0,[sp,#2]            ;2087
00243e  285a              CMP      r0,#0x5a              ;2087
002440  d00a              BEQ      |L1.9304|
                  |L1.9282|
002442  b114              CBZ      r4,|L1.9290|
002444  f1a40401          SUB      r4,r4,#1              ;2089
002448  e001              B        |L1.9294|
                  |L1.9290|
00244a  f04f043f          MOV      r4,#0x3f              ;2090
                  |L1.9294|
00244e  42b4              CMP      r4,r6                 ;2091
002450  d122              BNE      |L1.9368|
002452  f04f0500          MOV      r5,#0                 ;2093
002456  e025              B        |L1.9380|
                  |L1.9304|
002458  4669              MOV      r1,sp                 ;2100
00245a  f1050010          ADD      r0,r5,#0x10           ;2100
00245e  f7fffffe          BL       lc640_read_long_ptr
002462  f89d0000          LDRB     r0,[sp,#0]            ;2101
002466  2841              CMP      r0,#0x41              ;2101
002468  d10b              BNE      |L1.9346|
00246a  f89d0001          LDRB     r0,[sp,#1]            ;2101
00246e  2841              CMP      r0,#0x41              ;2101
002470  d107              BNE      |L1.9346|
002472  f89d0002          LDRB     r0,[sp,#2]            ;2101
002476  2841              CMP      r0,#0x41              ;2101
002478  d103              BNE      |L1.9346|
00247a  f89d0003          LDRB     r0,[sp,#3]            ;2101
00247e  2841              CMP      r0,#0x41              ;2101
002480  d00a              BEQ      |L1.9368|
                  |L1.9346|
002482  b114              CBZ      r4,|L1.9354|
002484  f1a40401          SUB      r4,r4,#1              ;2103
002488  e001              B        |L1.9358|
                  |L1.9354|
00248a  f04f043f          MOV      r4,#0x3f              ;2104
                  |L1.9358|
00248e  42b4              CMP      r4,r6                 ;2105
002490  d102              BNE      |L1.9368|
002492  f04f0500          MOV      r5,#0                 ;2107
002496  e005              B        |L1.9380|
                  |L1.9368|
002498  f1070701          ADD      r7,r7,#1              ;2081
00249c  b2ff              UXTB     r7,r7                 ;2081
00249e  2f3f              CMP      r7,#0x3f              ;2081
0024a0  f4ffaea3          BCC      |L1.8682|
                  |L1.9380|
0024a4  2d00              CMP      r5,#0                 ;2114
0024a6  d0c7              BEQ      |L1.9272|
0024a8  f8b8003c          LDRH     r0,[r8,#0x3c]         ;2116
0024ac  f88d0000          STRB     r0,[sp,#0]            ;2116
0024b0  f8980038          LDRB     r0,[r8,#0x38]         ;2117
0024b4  f88d0001          STRB     r0,[sp,#1]            ;2117
0024b8  f898002c          LDRB     r0,[r8,#0x2c]         ;2118
0024bc  f88d0002          STRB     r0,[sp,#2]            ;2118
0024c0  f88d9003          STRB     r9,[sp,#3]            ;2119
0024c4  4669              MOV      r1,sp                 ;2120
0024c6  f1050010          ADD      r0,r5,#0x10           ;2120
0024ca  f7fffffe          BL       lc640_write_long_ptr
0024ce  f8980028          LDRB     r0,[r8,#0x28]         ;2122
0024d2  f88d0000          STRB     r0,[sp,#0]            ;2122
0024d6  f8980024          LDRB     r0,[r8,#0x24]         ;2123
0024da  f88d0001          STRB     r0,[sp,#1]            ;2123
0024de  f8980020          LDRB     r0,[r8,#0x20]         ;2124
0024e2  f88d0002          STRB     r0,[sp,#2]            ;2124
0024e6  f88d9003          STRB     r9,[sp,#3]            ;2125
0024ea  4669              MOV      r1,sp                 ;2126
0024ec  f1050014          ADD      r0,r5,#0x14           ;2126
0024f0  f7fffffe          BL       lc640_write_long_ptr
0024f4  f04f0442          MOV      r4,#0x42              ;2128
0024f8  f88d4000          STRB     r4,[sp,#0]            ;2128
0024fc  f88d4001          STRB     r4,[sp,#1]            ;2129
002500  f88d4002          STRB     r4,[sp,#2]            ;2130
002504  f88d4003          STRB     r4,[sp,#3]            ;2131
002508  4669              MOV      r1,sp                 ;2132
00250a  f1050018          ADD      r0,r5,#0x18           ;2132
00250e  f7fffffe          BL       lc640_write_long_ptr
002512  f88d4000          STRB     r4,[sp,#0]            ;2134
002516  f88d4001          STRB     r4,[sp,#1]            ;2135
00251a  f88d4002          STRB     r4,[sp,#2]            ;2136
00251e  f88d4003          STRB     r4,[sp,#3]            ;2137
002522  4669              MOV      r1,sp                 ;2138
002524  f105001c          ADD      r0,r5,#0x1c           ;2138
002528  f7fffffe          BL       lc640_write_long_ptr
00252c  e41c              B        |L1.7528|
                          ENDP

00252e  0000              DCW      0x0000
                  |L1.9520|
                          DCD      0x40024000

                          AREA ||area_number.2||, CODE, READONLY, ALIGN=2

                          EXPORTAS ||area_number.2||, ||.text||
                  ke_mem_hndl PROC
;;;75     //-----------------------------------------------
;;;76     void avar_hndl(void)
000000  b5f3              PUSH     {r0,r1,r4-r7,lr}
;;;77     {
;;;78     //static unsigned avar_stat_old;
;;;79     char i;
;;;80     //unsigned avar_stat_new,avar_stat_offed;
;;;81     
;;;82     if(net_av)		SET_REG(avar_stat,1,0,1);
000002  b083              SUB      sp,sp,#0xc
000004  4605              MOV      r5,r0
000006  eb050045          ADD      r0,r5,r5,LSL #1
00000a  4948              LDR      r1,|L2.300|
00000c  eb001005          ADD      r0,r0,r5,LSL #4
000010  eb010180          ADD      r1,r1,r0,LSL #2
;;;83     else	   			SET_REG(avar_stat,0,0,1);
000014  4846              LDR      r0,|L2.304|
000016  f9b00000          LDRSH    r0,[r0,#0]  ; bat_u_old_cnt
;;;84     
;;;85     for(i=0;i<2;i++)
00001a  f1000001          ADD      r0,r0,#1
;;;86     	{
;;;87     	if(bat[i]._av&1)	SET_REG(avar_stat,1,1+i,1);
00001e  eb010040          ADD      r0,r1,r0,LSL #1
000022  f9b00020          LDRSH    r0,[r0,#0x20]
000026  9001              STR      r0,[sp,#4]
000028  f44f6660          MOV      r6,#0xe00
00002c  4630              MOV      r0,r6
00002e  f7fffffe          BL       lc640_read_int
000032  f1000001          ADD      r0,r0,#1
000036  4604              MOV      r4,r0
000038  2c3f              CMP      r4,#0x3f
00003a  d901              BLS      |L2.64|
00003c  f04f0400          MOV      r4,#0
                  |L2.64|
000040  b221              SXTH     r1,r4
000042  4630              MOV      r0,r6
000044  f7fffffe          BL       lc640_write_int
000048  f6406702          MOV      r7,#0xe02
00004c  4638              MOV      r0,r7
;;;88     	else	   		SET_REG(avar_stat,0,1+i,1);
00004e  f7fffffe          BL       lc640_read_int
000052  283f              CMP      r0,#0x3f
000054  d000              BEQ      |L2.88|
000056  4620              MOV      r0,r4
                  |L2.88|
000058  b201              SXTH     r1,r0
00005a  4638              MOV      r0,r7
00005c  f7fffffe          BL       lc640_write_int
000060  4630              MOV      r0,r6                 ;85
000062  f7fffffe          BL       lc640_read_int
000066  f44f6180          MOV      r1,#0x400             ;85
;;;89     	}
;;;90     
;;;91     for(i=0;i<12;i++)
00006a  eb011440          ADD      r4,r1,r0,LSL #5
;;;92     	{
;;;93     	if(bps[i]._av&0xef)	SET_REG(avar_stat,1,3+i,1);
00006e  f04f0042          MOV      r0,#0x42
000072  f88d0008          STRB     r0,[sp,#8]
000076  f88d5009          STRB     r5,[sp,#9]
00007a  f04f004b          MOV      r0,#0x4b
00007e  f88d000a          STRB     r0,[sp,#0xa]
000082  f04f0600          MOV      r6,#0
000086  f88d600b          STRB     r6,[sp,#0xb]
00008a  a902              ADD      r1,sp,#8
00008c  4620              MOV      r0,r4
00008e  f7fffffe          BL       lc640_write_long_ptr
000092  f89d0010          LDRB     r0,[sp,#0x10]
000096  f88d0008          STRB     r0,[sp,#8]
;;;94     	else	   		SET_REG(avar_stat,0,3+i,1);
00009a  f89d0011          LDRB     r0,[sp,#0x11]
00009e  f88d0009          STRB     r0,[sp,#9]
0000a2  f89d0004          LDRB     r0,[sp,#4]
0000a6  f88d000a          STRB     r0,[sp,#0xa]
0000aa  f89d0005          LDRB     r0,[sp,#5]            ;91
0000ae  f88d000b          STRB     r0,[sp,#0xb]          ;91
;;;95     	}
;;;96     
;;;97     for(i=0;i<6;i++)
0000b2  a902              ADD      r1,sp,#8
0000b4  1d20              ADDS     r0,r4,#4
;;;98     	{
;;;99     	if(av_inv[i])	SET_REG(avar_stat,1,15+i,1);
0000b6  f7fffffe          BL       lc640_write_long_ptr
0000ba  f24020a2          MOV      r0,#0x2a2
0000be  f7fffffe          BL       lc640_read_long
0000c2  4d1c              LDR      r5,|L2.308|
0000c4  6028              STR      r0,[r5,#0]  ; ke_date
0000c6  4629              MOV      r1,r5
0000c8  f1040008          ADD      r0,r4,#8
0000cc  f7fffffe          BL       lc640_write_long_ptr
0000d0  f24020a6          MOV      r0,#0x2a6
0000d4  f7fffffe          BL       lc640_read_long
;;;100    	else	   		SET_REG(avar_stat,0,15+i,1);
0000d8  6068              STR      r0,[r5,#4]  ; ke_date
0000da  1d29              ADDS     r1,r5,#4
0000dc  f104000c          ADD      r0,r4,#0xc
0000e0  f7fffffe          BL       lc640_write_long_ptr
0000e4  4d14              LDR      r5,|L2.312|
0000e6  8ba8              LDRH     r0,[r5,#0x1c]         ;97
0000e8  f88d0008          STRB     r0,[sp,#8]            ;97
0000ec  7e28              LDRB     r0,[r5,#0x18]         ;97
0000ee  f88d0009          STRB     r0,[sp,#9]            ;97
;;;101    	}
;;;102    
;;;103    /*for(i=0;i<4;i++)
;;;104    	{
;;;105    	if(av_dt[i])	SET_REG(avar_stat,1,21+i,1);
;;;106    	else	   		SET_REG(avar_stat,0,21+i,1);
;;;107    	}  */
;;;108    for(i=0;i<4;i++)
0000f2  7b28              LDRB     r0,[r5,#0xc]
;;;109    	{
;;;110    	if(sk_av_stat[i]==sasON)	SET_REG(avar_stat,1,24+i,1);
0000f4  f88d000a          STRB     r0,[sp,#0xa]
0000f8  f88d600b          STRB     r6,[sp,#0xb]
;;;111    	else	   		SET_REG(avar_stat,0,24+i,1);
0000fc  a902              ADD      r1,sp,#8
0000fe  f1040010          ADD      r0,r4,#0x10
000102  f7fffffe          BL       lc640_write_long_ptr
000106  7a28              LDRB     r0,[r5,#8]
000108  f88d0008          STRB     r0,[sp,#8]
00010c  7928              LDRB     r0,[r5,#4]            ;108
00010e  f88d0009          STRB     r0,[sp,#9]            ;108
000112  7828              LDRB     r0,[r5,#0]            ;108
000114  f88d000a          STRB     r0,[sp,#0xa]          ;108
;;;112    	}
;;;113    
;;;114    //if(uout_av)			SET_REG(avar_stat,1,28,1);
;;;115    //else	   			SET_REG(avar_stat,0,28,1);
;;;116    
;;;117    
;;;118    avar_stat_new=(avar_stat^avar_stat_old)&avar_stat;
000118  f88d600b          STRB     r6,[sp,#0xb]
00011c  a902              ADD      r1,sp,#8
00011e  f1040014          ADD      r0,r4,#0x14
;;;119    
;;;120    avar_ind_stat|=avar_stat_new;
000122  f7fffffe          BL       lc640_write_long_ptr
000126  b005              ADD      sp,sp,#0x14
;;;121    
;;;122    if((SK_ZVUK_EN[0])) avar_ind_stat&=(~(1UL<<24));
000128  bdf0              POP      {r4-r7,pc}
;;;123    if((SK_ZVUK_EN[1])) avar_ind_stat&=(~(1UL<<25));
;;;124    if((SK_ZVUK_EN[2])) avar_ind_stat&=(~(1UL<<26));
;;;125    if((SK_ZVUK_EN[3])) avar_ind_stat&=(~(1UL<<27));	
;;;126    
;;;127    
;;;128    avar_stat_offed=~((avar_stat^avar_stat_old)&avar_stat_old);
;;;129    
;;;130    if(!AV_OFF_AVT)avar_stat_offed|=0xeffffffe;
;;;131    
;;;132    avar_ind_stat&=avar_stat_offed; 
;;;133    
;;;134    avar_stat_old=avar_stat;
;;;135    
;;;136    //oleg_start
;;;137    
;;;138    
;;;139    
;;;140    rki_avar1_stat=(sk_alarm<<8)|(status_izm_r&0x3F);
;;;141    rki_avar1_stat_new=(rki_avar1_stat^rki_avar1_stat_old)&rki_avar1_stat;
;;;142    rki_avar1_ind_stat|=rki_avar1_stat_new;
;;;143    rki_avar1_stat_offed=~((rki_avar1_stat^rki_avar1_stat_old)&rki_avar1_stat_old);
;;;144    rki_avar1_ind_stat&=rki_avar1_stat_offed;
;;;145    rki_avar1_stat_old=rki_avar1_stat;
;;;146    
;;;147    rki_avarI1_stat=status_di1;
;;;148    rki_avarI1_stat_new=(rki_avarI1_stat^rki_avarI1_stat_old)&rki_avarI1_stat;
;;;149    rki_avarI1_ind_stat|=rki_avarI1_stat_new;
;;;150    rki_avarI1_stat_offed=~((rki_avarI1_stat^rki_avarI1_stat_old)&rki_avarI1_stat_old);
;;;151    rki_avarI1_ind_stat&=rki_avarI1_stat_offed;
;;;152    rki_avarI1_stat_old=rki_avarI1_stat;
;;;153    
;;;154    rki_avarI2_stat=status_di2;
;;;155    rki_avarI2_stat_new=(rki_avarI2_stat^rki_avarI2_stat_old)&rki_avarI2_stat;
;;;156    rki_avarI2_ind_stat|=rki_avarI2_stat_new;
;;;157    rki_avarI2_stat_offed=~((rki_avarI2_stat^rki_avarI2_stat_old)&rki_avarI2_stat_old);
;;;158    rki_avarI2_ind_stat&=rki_avarI2_stat_offed;
;;;159    rki_avarI2_stat_old=rki_avarI2_stat;
;;;160    //oleg_end
;;;161    }
;;;162    
                          ENDP

00012a  0000              DCW      0x0000
                  |L2.300|
                          DCD      bat
                  |L2.304|
                          DCD      bat_u_old_cnt
                  |L2.308|
                          DCD      ke_date
                  |L2.312|
                          DCD      0x40024020

                          AREA ||.data||, DATA, ALIGN=2

                  avar_stat
                          DCD      0x00000000
                  avar_ind_stat
                          DCD      0x00000000
                  avar_stat_old
                          DCD      0x00000000
                  avar_stat_new
                          DCD      0x00000000
                  avar_stat_offed
                          DCD      0x00000000
                  rki_avar1_stat
                          DCD      0x00000000
                  rki_avar1_ind_stat
                          DCD      0x00000000
                  rki_avar1_stat_old
                          DCD      0x00000000
                  rki_avar1_stat_new
                          DCD      0x00000000
                  rki_avar1_stat_offed
                          DCD      0x00000000
                  rki_avarI1_stat
                          DCD      0x00000000
                  rki_avarI1_ind_stat
                          DCD      0x00000000
                  rki_avarI1_stat_old
                          DCD      0x00000000
                  rki_avarI1_stat_new
                          DCD      0x00000000
                  rki_avarI1_stat_offed
                          DCD      0x00000000
                  rki_avarI2_stat
                          DCD      0x00000000
                  rki_avarI2_ind_stat
                          DCD      0x00000000
                  rki_avarI2_stat_old
                          DCD      0x00000000
                  rki_avarI2_stat_new
                          DCD      0x00000000
                  rki_avarI2_stat_offed
                          DCD      0x00000000
                  av_inv
                          DCD      0x00000000
000054  0000              DCB      0x00,0x00

;*** Start embedded assembler ***

#line 1 "avar_hndl.c"
	AREA ||.emb_text||, CODE, READONLY
	THUMB
	EXPORT |__asm___11_avar_hndl_c_ef0810c9____REV16|
#line 112 "C:\\Keil\\ARM\\CMSIS\\Include\\core_cmInstr.h"
|__asm___11_avar_hndl_c_ef0810c9____REV16| PROC
#line 113

 rev16 r0, r0
 bx lr
	ENDP
	AREA ||.emb_text||, CODE, READONLY
	THUMB
	EXPORT |__asm___11_avar_hndl_c_ef0810c9____REVSH|
#line 130
|__asm___11_avar_hndl_c_ef0810c9____REVSH| PROC
#line 131

 revsh r0, r0
 bx lr
	ENDP

;*** End   embedded assembler ***
