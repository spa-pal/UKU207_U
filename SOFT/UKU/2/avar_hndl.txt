; generated by ARM C/C++ Compiler, 4.1 [Build 644]
; commandline ArmCC [--list --debug -c --asm --interleave -o.\EXE\avar_hndl.o --asm_dir=.\ --list_dir=.\ --depend=.\EXE\avar_hndl.d --feedback=.\EXE\UKU_220_IPS_TERMOKOMPENSAT.fed --cpu=Cortex-M3 --apcs=interwork -O1 -IC:\Keil\ARM\CMSIS\Include -IC:\Keil\ARM\INC\NXP\LPC17xx -D__MICROLIB -DUKU_220_IPS_TERMOKOMPENSAT -DUKU2071x -DUKU_ZVU -DAPSENERGIA --omf_browse=.\EXE\avar_hndl.crf avar_hndl.c]
                          THUMB

                          AREA ||.text||, CODE, READONLY, ALIGN=2

                  avar_hndl PROC
;;;75     //-----------------------------------------------
;;;76     void avar_hndl(void)
000000  b530              PUSH     {r4,r5,lr}
;;;77     {
;;;78     //static unsigned avar_stat_old;
;;;79     char i;
;;;80     //unsigned avar_stat_new,avar_stat_offed;
;;;81     
;;;82     if(net_av)		SET_REG(avar_stat,1,0,1);
000002  48ff              LDR      r0,|L1.1024|
000004  49ff              LDR      r1,|L1.1028|
000006  7802              LDRB     r2,[r0,#0]  ; net_av
000008  6808              LDR      r0,[r1,#0]
00000a  b11a              CBZ      r2,|L1.20|
00000c  f0400001          ORR      r0,r0,#1
000010  6008              STR      r0,[r1,#0]  ; avar_stat
000012  e002              B        |L1.26|
                  |L1.20|
;;;83     else	   			SET_REG(avar_stat,0,0,1);
000014  f0200001          BIC      r0,r0,#1
000018  6008              STR      r0,[r1,#0]  ; avar_stat
                  |L1.26|
;;;84     
;;;85     for(i=0;i<2;i++)
00001a  f04f0000          MOV      r0,#0
;;;86     	{
;;;87     	if(bat[i]._av&3)	SET_REG(avar_stat,1,1+i,1);
00001e  4dfa              LDR      r5,|L1.1032|
000020  f04f0301          MOV      r3,#1
                  |L1.36|
000024  eb000240          ADD      r2,r0,r0,LSL #1
000028  eb021200          ADD      r2,r2,r0,LSL #4
00002c  eb050282          ADD      r2,r5,r2,LSL #2
000030  f892203d          LDRB     r2,[r2,#0x3d]
000034  0792              LSLS     r2,r2,#30
000036  d00a              BEQ      |L1.78|
000038  f1000401          ADD      r4,r0,#1
00003c  fa03f204          LSL      r2,r3,r4
000040  680c              LDR      r4,[r1,#0]  ; avar_stat
000042  ea240402          BIC      r4,r4,r2
000046  ea440402          ORR      r4,r4,r2
00004a  600c              STR      r4,[r1,#0]  ; avar_stat
00004c  e007              B        |L1.94|
                  |L1.78|
;;;88     	else	   			SET_REG(avar_stat,0,1+i,1);
00004e  f1000201          ADD      r2,r0,#1
000052  fa03f402          LSL      r4,r3,r2
000056  680a              LDR      r2,[r1,#0]  ; avar_stat
000058  ea220204          BIC      r2,r2,r4
00005c  600a              STR      r2,[r1,#0]  ; avar_stat
                  |L1.94|
00005e  f1000001          ADD      r0,r0,#1              ;85
000062  b2c0              UXTB     r0,r0                 ;85
000064  2802              CMP      r0,#2                 ;85
000066  d3dd              BCC      |L1.36|
;;;89     	}
;;;90     
;;;91     for(i=0;i<12;i++)
000068  f04f0000          MOV      r0,#0
;;;92     	{
;;;93     	if(bps[i]._av&0xef)	SET_REG(avar_stat,1,3+i,1);
00006c  4ce7              LDR      r4,|L1.1036|
                  |L1.110|
00006e  ebc002c0          RSB      r2,r0,r0,LSL #3
000072  eb021200          ADD      r2,r2,r0,LSL #4
000076  eb040282          ADD      r2,r4,r2,LSL #2
00007a  7852              LDRB     r2,[r2,#1]
00007c  f0120fef          TST      r2,#0xef
000080  d00a              BEQ      |L1.152|
000082  f1000503          ADD      r5,r0,#3
000086  fa03f205          LSL      r2,r3,r5
00008a  680d              LDR      r5,[r1,#0]  ; avar_stat
00008c  ea250502          BIC      r5,r5,r2
000090  ea450502          ORR      r5,r5,r2
000094  600d              STR      r5,[r1,#0]  ; avar_stat
000096  e007              B        |L1.168|
                  |L1.152|
;;;94     	else	   		SET_REG(avar_stat,0,3+i,1);
000098  f1000203          ADD      r2,r0,#3
00009c  fa03f502          LSL      r5,r3,r2
0000a0  680a              LDR      r2,[r1,#0]  ; avar_stat
0000a2  ea220205          BIC      r2,r2,r5
0000a6  600a              STR      r2,[r1,#0]  ; avar_stat
                  |L1.168|
0000a8  f1000001          ADD      r0,r0,#1              ;91
0000ac  b2c0              UXTB     r0,r0                 ;91
0000ae  280c              CMP      r0,#0xc               ;91
0000b0  d3dd              BCC      |L1.110|
;;;95     	}
;;;96     
;;;97     for(i=0;i<6;i++)
0000b2  f04f0000          MOV      r0,#0
;;;98     	{
;;;99     	if(av_inv[i])	SET_REG(avar_stat,1,15+i,1);
0000b6  4dd3              LDR      r5,|L1.1028|
0000b8  f1050550          ADD      r5,r5,#0x50
                  |L1.188|
0000bc  5c2a              LDRB     r2,[r5,r0]
0000be  b152              CBZ      r2,|L1.214|
0000c0  f100040f          ADD      r4,r0,#0xf
0000c4  fa03f204          LSL      r2,r3,r4
0000c8  680c              LDR      r4,[r1,#0]  ; avar_stat
0000ca  ea240402          BIC      r4,r4,r2
0000ce  ea440402          ORR      r4,r4,r2
0000d2  600c              STR      r4,[r1,#0]  ; avar_stat
0000d4  e007              B        |L1.230|
                  |L1.214|
;;;100    	else	   		SET_REG(avar_stat,0,15+i,1);
0000d6  f100020f          ADD      r2,r0,#0xf
0000da  680c              LDR      r4,[r1,#0]  ; avar_stat
0000dc  fa03f202          LSL      r2,r3,r2
0000e0  ea240402          BIC      r4,r4,r2
0000e4  600c              STR      r4,[r1,#0]  ; avar_stat
                  |L1.230|
0000e6  f1000001          ADD      r0,r0,#1              ;97
0000ea  b2c0              UXTB     r0,r0                 ;97
0000ec  2806              CMP      r0,#6                 ;97
0000ee  d3e5              BCC      |L1.188|
;;;101    	}
;;;102    
;;;103    /*for(i=0;i<4;i++)
;;;104    	{
;;;105    	if(av_dt[i])	SET_REG(avar_stat,1,21+i,1);
;;;106    	else	   		SET_REG(avar_stat,0,21+i,1);
;;;107    	}  */
;;;108    for(i=0;i<4;i++)
0000f0  f04f0000          MOV      r0,#0
;;;109    	{
;;;110    	if(sk_av_stat[i]==sasON)	SET_REG(avar_stat,1,24+i,1);
0000f4  4cc6              LDR      r4,|L1.1040|
                  |L1.246|
0000f6  5c22              LDRB     r2,[r4,r0]
0000f8  2a01              CMP      r2,#1
0000fa  d036              BEQ      |L1.362|
;;;111    	else	   		SET_REG(avar_stat,0,24+i,1);
0000fc  f1000218          ADD      r2,r0,#0x18
000100  fa03f502          LSL      r5,r3,r2
000104  680a              LDR      r2,[r1,#0]  ; avar_stat
000106  ea220205          BIC      r2,r2,r5
00010a  600a              STR      r2,[r1,#0]  ; avar_stat
                  |L1.268|
00010c  f1000001          ADD      r0,r0,#1              ;108
000110  b2c0              UXTB     r0,r0                 ;108
000112  2804              CMP      r0,#4                 ;108
000114  d3ef              BCC      |L1.246|
;;;112    	}
;;;113    
;;;114    //if(uout_av)			SET_REG(avar_stat,1,28,1);
;;;115    //else	   			SET_REG(avar_stat,0,28,1);
;;;116    
;;;117    
;;;118    avar_stat_new=(avar_stat^avar_stat_old)&avar_stat;
000116  688b              LDR      r3,[r1,#8]  ; avar_stat_old
000118  6808              LDR      r0,[r1,#0]  ; avar_stat
00011a  ea200203          BIC      r2,r0,r3
00011e  60ca              STR      r2,[r1,#0xc]  ; avar_stat_new
;;;119    
;;;120    avar_ind_stat|=avar_stat_new;
000120  684c              LDR      r4,[r1,#4]  ; avar_ind_stat
000122  ea440402          ORR      r4,r4,r2
000126  604c              STR      r4,[r1,#4]  ; avar_ind_stat
;;;121    
;;;122    if((SK_ZVUK_EN[0])) avar_ind_stat&=(~(1UL<<24));
000128  4aba              LDR      r2,|L1.1044|
00012a  8815              LDRH     r5,[r2,#0]  ; SK_ZVUK_EN
00012c  b115              CBZ      r5,|L1.308|
00012e  f0247480          BIC      r4,r4,#0x1000000
000132  604c              STR      r4,[r1,#4]  ; avar_ind_stat
                  |L1.308|
;;;123    if((SK_ZVUK_EN[1])) avar_ind_stat&=(~(1UL<<25));
000134  8854              LDRH     r4,[r2,#2]  ; SK_ZVUK_EN
000136  b11c              CBZ      r4,|L1.320|
000138  684c              LDR      r4,[r1,#4]  ; avar_ind_stat
00013a  f0247400          BIC      r4,r4,#0x2000000
00013e  604c              STR      r4,[r1,#4]  ; avar_ind_stat
                  |L1.320|
;;;124    if((SK_ZVUK_EN[2])) avar_ind_stat&=(~(1UL<<26));
000140  8894              LDRH     r4,[r2,#4]  ; SK_ZVUK_EN
000142  b11c              CBZ      r4,|L1.332|
000144  684c              LDR      r4,[r1,#4]  ; avar_ind_stat
000146  f0246480          BIC      r4,r4,#0x4000000
00014a  604c              STR      r4,[r1,#4]  ; avar_ind_stat
                  |L1.332|
;;;125    if((SK_ZVUK_EN[3])) avar_ind_stat&=(~(1UL<<27));	
00014c  88d2              LDRH     r2,[r2,#6]  ; SK_ZVUK_EN
00014e  b11a              CBZ      r2,|L1.344|
000150  684a              LDR      r2,[r1,#4]  ; avar_ind_stat
000152  f0226200          BIC      r2,r2,#0x8000000
000156  604a              STR      r2,[r1,#4]  ; avar_ind_stat
                  |L1.344|
;;;126    
;;;127    
;;;128    avar_stat_offed=~((avar_stat^avar_stat_old)&avar_stat_old);
000158  ea230300          BIC      r3,r3,r0
00015c  ea6f0203          MVN      r2,r3
000160  610a              STR      r2,[r1,#0x10]  ; avar_stat_offed
;;;129    
;;;130    if(!AV_OFF_AVT)avar_stat_offed|=0xeffffffe;
000162  4bad              LDR      r3,|L1.1048|
000164  881b              LDRH     r3,[r3,#0]  ; AV_OFF_AVT
000166  b15b              CBZ      r3,|L1.384|
000168  e00e              B        |L1.392|
                  |L1.362|
00016a  f1000518          ADD      r5,r0,#0x18           ;110
00016e  fa03f205          LSL      r2,r3,r5              ;110
000172  680d              LDR      r5,[r1,#0]            ;110  ; avar_stat
000174  ea250502          BIC      r5,r5,r2              ;110
000178  ea450502          ORR      r5,r5,r2              ;110
00017c  600d              STR      r5,[r1,#0]            ;110  ; avar_stat
00017e  e7c5              B        |L1.268|
                  |L1.384|
000180  4ba6              LDR      r3,|L1.1052|
000182  ea420203          ORR      r2,r2,r3
000186  610a              STR      r2,[r1,#0x10]  ; avar_stat_offed
                  |L1.392|
;;;131    
;;;132    avar_ind_stat&=avar_stat_offed; 
000188  690b              LDR      r3,[r1,#0x10]  ; avar_stat_offed
00018a  684a              LDR      r2,[r1,#4]  ; avar_ind_stat
00018c  ea020203          AND      r2,r2,r3
000190  604a              STR      r2,[r1,#4]  ; avar_ind_stat
;;;133    
;;;134    avar_stat_old=avar_stat;
000192  6088              STR      r0,[r1,#8]  ; avar_stat_old
;;;135    
;;;136    //oleg_start
;;;137    
;;;138    
;;;139    
;;;140    rki_avar1_stat=(sk_alarm<<8)|(status_izm_r&0x3F);
000194  48a2              LDR      r0,|L1.1056|
000196  4aa3              LDR      r2,|L1.1060|
000198  8800              LDRH     r0,[r0,#0]  ; status_izm_r
00019a  6812              LDR      r2,[r2,#0]  ; sk_alarm
00019c  f000003f          AND      r0,r0,#0x3f
0001a0  ea402002          ORR      r0,r0,r2,LSL #8
0001a4  6148              STR      r0,[r1,#0x14]  ; rki_avar1_stat
;;;141    rki_avar1_stat_new=(rki_avar1_stat^rki_avar1_stat_old)&rki_avar1_stat;
0001a6  69cb              LDR      r3,[r1,#0x1c]  ; rki_avar1_stat_old
0001a8  ea200203          BIC      r2,r0,r3
0001ac  620a              STR      r2,[r1,#0x20]  ; rki_avar1_stat_new
;;;142    rki_avar1_ind_stat|=rki_avar1_stat_new;
0001ae  698c              LDR      r4,[r1,#0x18]  ; rki_avar1_ind_stat
0001b0  ea440402          ORR      r4,r4,r2
;;;143    rki_avar1_stat_offed=~((rki_avar1_stat^rki_avar1_stat_old)&rki_avar1_stat_old);
0001b4  ea230300          BIC      r3,r3,r0
0001b8  ea6f0203          MVN      r2,r3
0001bc  624a              STR      r2,[r1,#0x24]  ; rki_avar1_stat_offed
;;;144    rki_avar1_ind_stat&=rki_avar1_stat_offed;
0001be  ea040402          AND      r4,r4,r2
0001c2  618c              STR      r4,[r1,#0x18]  ; rki_avar1_ind_stat
;;;145    rki_avar1_stat_old=rki_avar1_stat;
0001c4  61c8              STR      r0,[r1,#0x1c]  ; rki_avar1_stat_old
;;;146    
;;;147    rki_avarI1_stat=status_di1;
0001c6  4898              LDR      r0,|L1.1064|
0001c8  6800              LDR      r0,[r0,#0]  ; status_di1
0001ca  6288              STR      r0,[r1,#0x28]  ; rki_avarI1_stat
;;;148    rki_avarI1_stat_new=(rki_avarI1_stat^rki_avarI1_stat_old)&rki_avarI1_stat;
0001cc  6b0b              LDR      r3,[r1,#0x30]  ; rki_avarI1_stat_old
0001ce  ea200203          BIC      r2,r0,r3
0001d2  634a              STR      r2,[r1,#0x34]  ; rki_avarI1_stat_new
;;;149    rki_avarI1_ind_stat|=rki_avarI1_stat_new;
0001d4  6acc              LDR      r4,[r1,#0x2c]  ; rki_avarI1_ind_stat
0001d6  ea440402          ORR      r4,r4,r2
;;;150    rki_avarI1_stat_offed=~((rki_avarI1_stat^rki_avarI1_stat_old)&rki_avarI1_stat_old);
0001da  ea230300          BIC      r3,r3,r0
0001de  ea6f0203          MVN      r2,r3
0001e2  638a              STR      r2,[r1,#0x38]  ; rki_avarI1_stat_offed
;;;151    rki_avarI1_ind_stat&=rki_avarI1_stat_offed;
0001e4  ea040402          AND      r4,r4,r2
0001e8  62cc              STR      r4,[r1,#0x2c]  ; rki_avarI1_ind_stat
;;;152    rki_avarI1_stat_old=rki_avarI1_stat;
0001ea  6308              STR      r0,[r1,#0x30]  ; rki_avarI1_stat_old
;;;153    
;;;154    rki_avarI2_stat=status_di2;
0001ec  488f              LDR      r0,|L1.1068|
0001ee  6800              LDR      r0,[r0,#0]  ; status_di2
0001f0  63c8              STR      r0,[r1,#0x3c]  ; rki_avarI2_stat
;;;155    rki_avarI2_stat_new=(rki_avarI2_stat^rki_avarI2_stat_old)&rki_avarI2_stat;
0001f2  6c4b              LDR      r3,[r1,#0x44]  ; rki_avarI2_stat_old
0001f4  ea200203          BIC      r2,r0,r3
0001f8  648a              STR      r2,[r1,#0x48]  ; rki_avarI2_stat_new
;;;156    rki_avarI2_ind_stat|=rki_avarI2_stat_new;
0001fa  6c0c              LDR      r4,[r1,#0x40]  ; rki_avarI2_ind_stat
0001fc  ea440402          ORR      r4,r4,r2
;;;157    rki_avarI2_stat_offed=~((rki_avarI2_stat^rki_avarI2_stat_old)&rki_avarI2_stat_old);
000200  ea230300          BIC      r3,r3,r0
000204  ea6f0203          MVN      r2,r3
000208  64ca              STR      r2,[r1,#0x4c]  ; rki_avarI2_stat_offed
;;;158    rki_avarI2_ind_stat&=rki_avarI2_stat_offed;
00020a  ea040402          AND      r4,r4,r2
00020e  640c              STR      r4,[r1,#0x40]  ; rki_avarI2_ind_stat
;;;159    rki_avarI2_stat_old=rki_avarI2_stat;
000210  6448              STR      r0,[r1,#0x44]  ; rki_avarI2_stat_old
;;;160    //oleg_end
;;;161    }
000212  bd30              POP      {r4,r5,pc}
;;;162    
                          ENDP

                  reload_hndl PROC
;;;163    //-----------------------------------------------
;;;164    void reload_hndl(void)
000214  b5f8              PUSH     {r3-r7,lr}
;;;165    {
;;;166    
;;;167    char data[4];
;;;168    unsigned int event_ptr,lc640_adr/*,event_ptr_find*/,event_cnt;
;;;169    
;;;170    event_ptr=lc640_read_int(PTR_EVENT_LOG);
000216  f44f6560          MOV      r5,#0xe00
00021a  4628              MOV      r0,r5
00021c  f7fffffe          BL       lc640_read_int
;;;171    event_ptr++;	
000220  f1000001          ADD      r0,r0,#1
000224  4604              MOV      r4,r0
;;;172    if(event_ptr>63)event_ptr=0;	
000226  2c3f              CMP      r4,#0x3f
000228  d901              BLS      |L1.558|
00022a  f04f0400          MOV      r4,#0
                  |L1.558|
;;;173    lc640_write_int(PTR_EVENT_LOG,event_ptr);	
00022e  b221              SXTH     r1,r4
000230  4628              MOV      r0,r5
000232  f7fffffe          BL       lc640_write_int
;;;174    	
;;;175    event_cnt=lc640_read_int(CNT_EVENT_LOG);
000236  f6406602          MOV      r6,#0xe02
00023a  4630              MOV      r0,r6
00023c  f7fffffe          BL       lc640_read_int
;;;176    if(event_cnt!=63)event_cnt=event_ptr;
000240  283f              CMP      r0,#0x3f
000242  d000              BEQ      |L1.582|
000244  4620              MOV      r0,r4
                  |L1.582|
;;;177    lc640_write_int(CNT_EVENT_LOG,event_cnt); 
000246  b201              SXTH     r1,r0
000248  4630              MOV      r0,r6
00024a  f7fffffe          BL       lc640_write_int
;;;178    	
;;;179    lc640_adr=EVENT_LOG+(lc640_read_int(PTR_EVENT_LOG)*32);
00024e  4628              MOV      r0,r5
000250  f7fffffe          BL       lc640_read_int
000254  f44f6180          MOV      r1,#0x400
000258  eb011440          ADD      r4,r1,r0,LSL #5
;;;180    	
;;;181    data[0]='U';
00025c  f04f0055          MOV      r0,#0x55
000260  f88d0000          STRB     r0,[sp,#0]
;;;182    data[1]=0;
000264  f04f0600          MOV      r6,#0
000268  f88d6001          STRB     r6,[sp,#1]
;;;183    data[2]='R';
00026c  f04f0052          MOV      r0,#0x52
000270  f88d0002          STRB     r0,[sp,#2]
;;;184    data[3]=0;
000274  f88d6003          STRB     r6,[sp,#3]
;;;185    lc640_write_long_ptr(lc640_adr,data);
000278  4669              MOV      r1,sp
00027a  4620              MOV      r0,r4
00027c  f7fffffe          BL       lc640_write_long_ptr
;;;186    
;;;187    data[0]=0;
;;;188    data[1]=0;
;;;189    data[2]=0;
;;;190    data[3]=0;
000280  9600              STR      r6,[sp,#0]
;;;191    lc640_write_long_ptr(lc640_adr+4,data);
000282  4669              MOV      r1,sp
000284  1d20              ADDS     r0,r4,#4
000286  f7fffffe          BL       lc640_write_long_ptr
;;;192    
;;;193    data[0]=LPC_RTC->YEAR;
00028a  4d69              LDR      r5,|L1.1072|
00028c  8ba8              LDRH     r0,[r5,#0x1c]
00028e  f88d0000          STRB     r0,[sp,#0]
;;;194    data[1]=LPC_RTC->MONTH;
000292  7e28              LDRB     r0,[r5,#0x18]
000294  f88d0001          STRB     r0,[sp,#1]
;;;195    data[2]=LPC_RTC->DOM;
000298  7b28              LDRB     r0,[r5,#0xc]
00029a  f88d0002          STRB     r0,[sp,#2]
;;;196    data[3]=0;
00029e  f88d6003          STRB     r6,[sp,#3]
;;;197    lc640_write_long_ptr(lc640_adr+8,data);
0002a2  4669              MOV      r1,sp
0002a4  f1040008          ADD      r0,r4,#8
0002a8  f7fffffe          BL       lc640_write_long_ptr
;;;198    
;;;199    data[0]=LPC_RTC->HOUR;
0002ac  7a28              LDRB     r0,[r5,#8]
0002ae  f88d0000          STRB     r0,[sp,#0]
;;;200    data[1]=LPC_RTC->MIN;
0002b2  7928              LDRB     r0,[r5,#4]
0002b4  f88d0001          STRB     r0,[sp,#1]
;;;201    data[2]=LPC_RTC->SEC;
0002b8  7828              LDRB     r0,[r5,#0]
0002ba  f88d0002          STRB     r0,[sp,#2]
;;;202    data[3]=LPC_SC->RSID;
0002be  485d              LDR      r0,|L1.1076|
0002c0  f8d00180          LDR      r0,[r0,#0x180]
0002c4  f88d0003          STRB     r0,[sp,#3]
;;;203    
;;;204    lc640_write_long_ptr(lc640_adr+12,data);
0002c8  4669              MOV      r1,sp
0002ca  f104000c          ADD      r0,r4,#0xc
0002ce  f7fffffe          BL       lc640_write_long_ptr
;;;205    	
;;;206    data[0]='A';
0002d2  f04f0541          MOV      r5,#0x41
0002d6  f88d5000          STRB     r5,[sp,#0]
;;;207    data[1]='A';
0002da  f88d5001          STRB     r5,[sp,#1]
;;;208    data[2]='A';
0002de  f88d5002          STRB     r5,[sp,#2]
;;;209    data[3]='A';
0002e2  f88d5003          STRB     r5,[sp,#3]
;;;210    lc640_write_long_ptr(lc640_adr+16,data);
0002e6  4669              MOV      r1,sp
0002e8  f1040010          ADD      r0,r4,#0x10
0002ec  f7fffffe          BL       lc640_write_long_ptr
;;;211    	
;;;212    data[0]='A';
0002f0  f88d5000          STRB     r5,[sp,#0]
;;;213    data[1]='A';
0002f4  f88d5001          STRB     r5,[sp,#1]
;;;214    data[2]='A';
0002f8  f88d5002          STRB     r5,[sp,#2]
;;;215    data[3]='A';
0002fc  f88d5003          STRB     r5,[sp,#3]
;;;216    lc640_write_long_ptr(lc640_adr+20,data);
000300  4669              MOV      r1,sp
000302  f1040014          ADD      r0,r4,#0x14
000306  f7fffffe          BL       lc640_write_long_ptr
;;;217    	
;;;218    data[0]='A';
00030a  f88d5000          STRB     r5,[sp,#0]
;;;219    data[1]='A';
00030e  f88d5001          STRB     r5,[sp,#1]
;;;220    data[2]='A';
000312  f88d5002          STRB     r5,[sp,#2]
;;;221    data[3]='A';
000316  f88d5003          STRB     r5,[sp,#3]
;;;222    lc640_write_long_ptr(lc640_adr+24,data);
00031a  4669              MOV      r1,sp
00031c  f1040018          ADD      r0,r4,#0x18
000320  f7fffffe          BL       lc640_write_long_ptr
;;;223    	
;;;224    data[0]='A';
000324  f88d5000          STRB     r5,[sp,#0]
;;;225    data[1]='A';
000328  f88d5001          STRB     r5,[sp,#1]
;;;226    data[2]='A';
00032c  f88d5002          STRB     r5,[sp,#2]
;;;227    data[3]='A';
000330  f88d5003          STRB     r5,[sp,#3]
;;;228    lc640_write_long_ptr(lc640_adr+28,data);				
000334  4669              MOV      r1,sp
000336  f104001c          ADD      r0,r4,#0x1c
00033a  f7fffffe          BL       lc640_write_long_ptr
;;;229    	
;;;230    	
;;;231    }
00033e  bdf8              POP      {r3-r7,pc}
;;;232    
                          ENDP

                  avar_unet_hndl PROC
;;;233    //-----------------------------------------------
;;;234    void avar_unet_hndl(char in)
000340  e92d43f8          PUSH     {r3-r9,lr}
;;;235    {
;;;236    
;;;237    char data[4];
;;;238    unsigned int event_ptr,lc640_adr,event_ptr_find,event_cnt;
;;;239    
;;;240    
;;;241    if(in==1)
;;;242    	{
;;;243    	net_av=1;
;;;244    
;;;245    	//beep_init(0x01L,'O');
;;;246    	//a.av.bAN=1;
;;;247    
;;;248    
;;;249    	//beep_init(0x33333333,'A');
;;;250    	 
;;;251    	event_ptr=lc640_read_int(PTR_EVENT_LOG);
;;;252    	event_ptr++;	
;;;253    	if(event_ptr>63)event_ptr=0;	
;;;254    	lc640_write_int(PTR_EVENT_LOG,event_ptr);	
;;;255    	
;;;256         event_cnt=lc640_read_int(CNT_EVENT_LOG);
;;;257    	if(event_cnt!=63)event_cnt=event_ptr;
;;;258    	lc640_write_int(CNT_EVENT_LOG,event_cnt); 
;;;259    	
;;;260    	lc640_adr=EVENT_LOG+(lc640_read_int(PTR_EVENT_LOG)*32);
;;;261    	
;;;262    	data[0]='P';
;;;263    	data[1]=0;
;;;264    	data[2]='A';
;;;265    	data[3]=0;
;;;266    	lc640_write_long_ptr(lc640_adr,data);
;;;267    
;;;268    	data[0]=0;//*((char*)&Unet_store);
;;;269    	data[1]=0;//*(((char*)&Unet_store)+1);
;;;270    	data[2]=0;
;;;271    	data[3]=0;
;;;272    	lc640_write_long_ptr(lc640_adr+4,data);
;;;273    
;;;274    	data[0]=LPC_RTC->YEAR;
000344  4f3a              LDR      r7,|L1.1072|
000346  492e              LDR      r1,|L1.1024|
000348  3f20              SUBS     r7,r7,#0x20
00034a  f44f6560          MOV      r5,#0xe00             ;251
00034e  f04f0800          MOV      r8,#0                 ;253
000352  f44f6980          MOV      r9,#0x400             ;260
000356  2801              CMP      r0,#1                 ;241
000358  d002              BEQ      |L1.864|
;;;275    	data[1]=LPC_RTC->MONTH;
;;;276    	data[2]=LPC_RTC->DOM;
;;;277    	data[3]=0;
;;;278    	lc640_write_long_ptr(lc640_adr+8,data);
;;;279    
;;;280    	data[0]=LPC_RTC->HOUR;
;;;281    	data[1]=LPC_RTC->MIN;
;;;282    	data[2]=LPC_RTC->SEC;
;;;283    	data[3]=0;
;;;284    	lc640_write_long_ptr(lc640_adr+12,data);
;;;285    	
;;;286    	data[0]='A';
;;;287    	data[1]='A';
;;;288    	data[2]='A';
;;;289    	data[3]='A';
;;;290    	lc640_write_long_ptr(lc640_adr+16,data);
;;;291    	
;;;292    	data[0]='A';
;;;293    	data[1]='A';
;;;294    	data[2]='A';
;;;295    	data[3]='A';
;;;296    	lc640_write_long_ptr(lc640_adr+20,data);
;;;297    	
;;;298    	data[0]='A';
;;;299    	data[1]='A';
;;;300    	data[2]='A';
;;;301    	data[3]='A';
;;;302    	lc640_write_long_ptr(lc640_adr+24,data);
;;;303    	
;;;304    	data[0]='A';
;;;305    	data[1]='A';
;;;306    	data[2]='A';
;;;307    	data[3]='A';
;;;308    	lc640_write_long_ptr(lc640_adr+28,data);				
;;;309    	
;;;310    /*	memo_out0[0]=0x55;
;;;311         memo_out0[1]=0x00+2;
;;;312         memo_out0[2]=1;
;;;313         memo_out0[3]=0x0b;
;;;314         memo_out0[4]=0x55;
;;;315         memo_out0[5]=0x55; 
;;;316         	
;;;317         memo_out0[6]=crc_87(memo_out0,6);
;;;318    	memo_out0[7]=crc_95(memo_out0,6);
;;;319         usart_out_adr0(memo_out0,8); 
;;;320    	*/
;;;321    	snmp_trap_send("Main power alarm",2,1,0);
;;;322    	}
;;;323    
;;;324    else if(in==0)
00035a  2800              CMP      r0,#0
00035c  d04f              BEQ      |L1.1022|
00035e  e144              B        |L1.1514|
                  |L1.864|
000360  f04f0001          MOV      r0,#1                 ;243
000364  7008              STRB     r0,[r1,#0]            ;243
000366  4628              MOV      r0,r5                 ;251
000368  f7fffffe          BL       lc640_read_int
00036c  f1000001          ADD      r0,r0,#1              ;252
000370  4604              MOV      r4,r0                 ;252
000372  2c3f              CMP      r4,#0x3f              ;253
000374  d901              BLS      |L1.890|
000376  f04f0400          MOV      r4,#0                 ;253
                  |L1.890|
00037a  b221              SXTH     r1,r4                 ;254
00037c  4628              MOV      r0,r5                 ;254
00037e  f7fffffe          BL       lc640_write_int
000382  f6406602          MOV      r6,#0xe02             ;256
000386  4630              MOV      r0,r6                 ;256
000388  f7fffffe          BL       lc640_read_int
00038c  283f              CMP      r0,#0x3f              ;257
00038e  d000              BEQ      |L1.914|
000390  4620              MOV      r0,r4                 ;257
                  |L1.914|
000392  b201              SXTH     r1,r0                 ;258
000394  4630              MOV      r0,r6                 ;258
000396  f7fffffe          BL       lc640_write_int
00039a  4628              MOV      r0,r5                 ;260
00039c  f7fffffe          BL       lc640_read_int
0003a0  eb091540          ADD      r5,r9,r0,LSL #5       ;260
0003a4  f04f0050          MOV      r0,#0x50              ;262
0003a8  f88d0000          STRB     r0,[sp,#0]            ;262
0003ac  f88d8001          STRB     r8,[sp,#1]            ;263
0003b0  f04f0441          MOV      r4,#0x41              ;264
0003b4  f88d4002          STRB     r4,[sp,#2]            ;264
0003b8  f88d8003          STRB     r8,[sp,#3]            ;265
0003bc  4669              MOV      r1,sp                 ;266
0003be  4628              MOV      r0,r5                 ;266
0003c0  f7fffffe          BL       lc640_write_long_ptr
0003c4  f8cd8000          STR      r8,[sp,#0]            ;271
0003c8  4669              MOV      r1,sp                 ;272
0003ca  1d28              ADDS     r0,r5,#4              ;272
0003cc  f7fffffe          BL       lc640_write_long_ptr
0003d0  f1070720          ADD      r7,r7,#0x20           ;274
0003d4  8bb8              LDRH     r0,[r7,#0x1c]         ;274
0003d6  f88d0000          STRB     r0,[sp,#0]            ;274
0003da  7e38              LDRB     r0,[r7,#0x18]         ;275
0003dc  f88d0001          STRB     r0,[sp,#1]            ;275
0003e0  7b38              LDRB     r0,[r7,#0xc]          ;276
0003e2  f88d0002          STRB     r0,[sp,#2]            ;276
0003e6  f88d8003          STRB     r8,[sp,#3]            ;277
0003ea  4669              MOV      r1,sp                 ;278
0003ec  f1050008          ADD      r0,r5,#8              ;278
0003f0  f7fffffe          BL       lc640_write_long_ptr
0003f4  7a38              LDRB     r0,[r7,#8]            ;280
0003f6  f88d0000          STRB     r0,[sp,#0]            ;280
0003fa  7938              LDRB     r0,[r7,#4]            ;281
0003fc  e01c              B        |L1.1080|
                  |L1.1022|
0003fe  e062              B        |L1.1222|
                  |L1.1024|
                          DCD      net_av
                  |L1.1028|
                          DCD      ||.data||
                  |L1.1032|
                          DCD      bat
                  |L1.1036|
                          DCD      bps
                  |L1.1040|
                          DCD      sk_av_stat
                  |L1.1044|
                          DCD      SK_ZVUK_EN
                  |L1.1048|
                          DCD      AV_OFF_AVT
                  |L1.1052|
                          DCD      0xeffffffe
                  |L1.1056|
                          DCD      status_izm_r
                  |L1.1060|
                          DCD      sk_alarm
                  |L1.1064|
                          DCD      status_di1
                  |L1.1068|
                          DCD      status_di2
                  |L1.1072|
                          DCD      0x40024020
                  |L1.1076|
                          DCD      0x400fc000
                  |L1.1080|
000438  f88d0001          STRB     r0,[sp,#1]            ;281
00043c  7838              LDRB     r0,[r7,#0]            ;282
00043e  f88d0002          STRB     r0,[sp,#2]            ;282
000442  f88d8003          STRB     r8,[sp,#3]            ;283
000446  4669              MOV      r1,sp                 ;284
000448  f105000c          ADD      r0,r5,#0xc            ;284
00044c  f7fffffe          BL       lc640_write_long_ptr
000450  f88d4000          STRB     r4,[sp,#0]            ;286
000454  f88d4001          STRB     r4,[sp,#1]            ;287
000458  f88d4002          STRB     r4,[sp,#2]            ;288
00045c  f88d4003          STRB     r4,[sp,#3]            ;289
000460  4669              MOV      r1,sp                 ;290
000462  f1050010          ADD      r0,r5,#0x10           ;290
000466  f7fffffe          BL       lc640_write_long_ptr
00046a  f88d4000          STRB     r4,[sp,#0]            ;292
00046e  f88d4001          STRB     r4,[sp,#1]            ;293
000472  f88d4002          STRB     r4,[sp,#2]            ;294
000476  f88d4003          STRB     r4,[sp,#3]            ;295
00047a  4669              MOV      r1,sp                 ;296
00047c  f1050014          ADD      r0,r5,#0x14           ;296
000480  f7fffffe          BL       lc640_write_long_ptr
000484  f88d4000          STRB     r4,[sp,#0]            ;298
000488  f88d4001          STRB     r4,[sp,#1]            ;299
00048c  f88d4002          STRB     r4,[sp,#2]            ;300
000490  f88d4003          STRB     r4,[sp,#3]            ;301
000494  4669              MOV      r1,sp                 ;302
000496  f1050018          ADD      r0,r5,#0x18           ;302
00049a  f7fffffe          BL       lc640_write_long_ptr
00049e  f88d4000          STRB     r4,[sp,#0]            ;304
0004a2  f88d4001          STRB     r4,[sp,#1]            ;305
0004a6  f88d4002          STRB     r4,[sp,#2]            ;306
0004aa  f88d4003          STRB     r4,[sp,#3]            ;307
0004ae  4669              MOV      r1,sp                 ;308
0004b0  f105001c          ADD      r0,r5,#0x1c           ;308
0004b4  f7fffffe          BL       lc640_write_long_ptr
0004b8  2300              MOVS     r3,#0                 ;321
0004ba  2201              MOVS     r2,#1                 ;321
0004bc  2102              MOVS     r1,#2                 ;321
0004be  a0f6              ADR      r0,|L1.2200|
0004c0  f7fffffe          BL       snmp_trap_send
0004c4  e091              B        |L1.1514|
                  |L1.1222|
;;;325    	{
;;;326    	net_av=0;
0004c6  f8818000          STRB     r8,[r1,#0]
;;;327    
;;;328      /*
;;;329    	SET_REG(C2GSR,3,24,8);
;;;330    	C2MOD=0;
;;;331    	bOUT_FREE2=1;*/
;;;332    
;;;333    
;;;334    	//C2MOD=0;
;;;335    
;;;336    	//can2_init(7,8,CANBitrate250k_60MHz);
;;;337    
;;;338         //beep_init(0x02L,'O');
;;;339    	//a_.av.bAN=0;
;;;340    	SET_REG(avar_stat,0,0,1);
0004ca  48f8              LDR      r0,|L1.2220|
0004cc  6801              LDR      r1,[r0,#0]  ; avar_stat
0004ce  f0210101          BIC      r1,r1,#1
0004d2  6001              STR      r1,[r0,#0]  ; avar_stat
;;;341    
;;;342    	//if(AV_OFF_AVT)a.av.bAN=0;
;;;343    	
;;;344    	if(AV_OFF_AVT) SET_REG(avar_ind_stat,0,0,1);
0004d4  49f6              LDR      r1,|L1.2224|
0004d6  8809              LDRH     r1,[r1,#0]  ; AV_OFF_AVT
0004d8  b119              CBZ      r1,|L1.1250|
0004da  6841              LDR      r1,[r0,#4]  ; avar_ind_stat
0004dc  f0210101          BIC      r1,r1,#1
0004e0  6041              STR      r1,[r0,#4]  ; avar_ind_stat
                  |L1.1250|
;;;345    
;;;346         event_ptr=lc640_read_int(PTR_EVENT_LOG);
0004e2  4628              MOV      r0,r5
0004e4  f7fffffe          BL       lc640_read_int
0004e8  4606              MOV      r6,r0
;;;347    	event_ptr_find=event_ptr;
0004ea  4634              MOV      r4,r6
                  |L1.1260|
;;;348    avar_unet_hndl_lbl1:
;;;349    	lc640_adr=EVENT_LOG+(event_ptr_find*32);
0004ec  eb091544          ADD      r5,r9,r4,LSL #5
;;;350    
;;;351         lc640_read_long_ptr(lc640_adr,data);
0004f0  4669              MOV      r1,sp
0004f2  4628              MOV      r0,r5
0004f4  f7fffffe          BL       lc640_read_long_ptr
;;;352         
;;;353         if(!((data[0]=='P')&&(data[1]==0)&&(data[2]=='A')))
0004f8  f89d0000          LDRB     r0,[sp,#0]
0004fc  2850              CMP      r0,#0x50
0004fe  d106              BNE      |L1.1294|
000500  f89d0001          LDRB     r0,[sp,#1]
000504  b918              CBNZ     r0,|L1.1294|
000506  f89d0002          LDRB     r0,[sp,#2]
00050a  2841              CMP      r0,#0x41
00050c  d008              BEQ      |L1.1312|
                  |L1.1294|
;;;354         	{        
;;;355         	if(event_ptr_find)event_ptr_find--;
00050e  b114              CBZ      r4,|L1.1302|
000510  f1a40401          SUB      r4,r4,#1
000514  e001              B        |L1.1306|
                  |L1.1302|
;;;356         	else event_ptr_find=63;
000516  f04f043f          MOV      r4,#0x3f
                  |L1.1306|
;;;357         	if(event_ptr_find==event_ptr)goto avar_unet_hndl_end;
00051a  42b4              CMP      r4,r6
00051c  d1e6              BNE      |L1.1260|
00051e  e064              B        |L1.1514|
                  |L1.1312|
;;;358         	else goto avar_unet_hndl_lbl1;
;;;359         	}
;;;360         else 
;;;361         	{
;;;362         	lc640_read_long_ptr(lc640_adr+16,data);
000520  4669              MOV      r1,sp
000522  f1050010          ADD      r0,r5,#0x10
000526  f7fffffe          BL       lc640_read_long_ptr
;;;363         	if(!((data[0]=='A')&&(data[1]=='A')&&(data[2]=='A')&&(data[3]=='A')))
00052a  f89d0000          LDRB     r0,[sp,#0]
00052e  2841              CMP      r0,#0x41
000530  d10b              BNE      |L1.1354|
000532  f89d0001          LDRB     r0,[sp,#1]
000536  2841              CMP      r0,#0x41
000538  d107              BNE      |L1.1354|
00053a  f89d0002          LDRB     r0,[sp,#2]
00053e  2841              CMP      r0,#0x41
000540  d103              BNE      |L1.1354|
000542  f89d0003          LDRB     r0,[sp,#3]
000546  2841              CMP      r0,#0x41
000548  d008              BEQ      |L1.1372|
                  |L1.1354|
;;;364         		{        
;;;365         		if(event_ptr_find)event_ptr_find--;
00054a  b114              CBZ      r4,|L1.1362|
00054c  f1a40401          SUB      r4,r4,#1
000550  e001              B        |L1.1366|
                  |L1.1362|
;;;366             		else event_ptr_find=63;
000552  f04f043f          MOV      r4,#0x3f
                  |L1.1366|
;;;367             		if(event_ptr_find==event_ptr)goto avar_unet_hndl_end;
000556  42b4              CMP      r4,r6
000558  d1c8              BNE      |L1.1260|
00055a  e046              B        |L1.1514|
                  |L1.1372|
;;;368         		else goto avar_unet_hndl_lbl1;
;;;369         		}
;;;370    
;;;371         	}	
;;;372    	
;;;373    	data[0]=LPC_RTC->YEAR;
00055c  f1070720          ADD      r7,r7,#0x20
000560  8bb8              LDRH     r0,[r7,#0x1c]
000562  f88d0000          STRB     r0,[sp,#0]
;;;374    	data[1]=LPC_RTC->MONTH;
000566  7e38              LDRB     r0,[r7,#0x18]
000568  f88d0001          STRB     r0,[sp,#1]
;;;375    	data[2]=LPC_RTC->DOM;
00056c  7b38              LDRB     r0,[r7,#0xc]
00056e  f88d0002          STRB     r0,[sp,#2]
;;;376    	data[3]=0;
000572  f88d8003          STRB     r8,[sp,#3]
;;;377    	lc640_write_long_ptr(lc640_adr+16,data);
000576  4669              MOV      r1,sp
000578  f1050010          ADD      r0,r5,#0x10
00057c  f7fffffe          BL       lc640_write_long_ptr
;;;378    
;;;379    	data[0]=LPC_RTC->HOUR;
000580  7a38              LDRB     r0,[r7,#8]
000582  f88d0000          STRB     r0,[sp,#0]
;;;380    	data[1]=LPC_RTC->MIN;
000586  7938              LDRB     r0,[r7,#4]
000588  f88d0001          STRB     r0,[sp,#1]
;;;381    	data[2]=LPC_RTC->SEC;
00058c  7838              LDRB     r0,[r7,#0]
00058e  f88d0002          STRB     r0,[sp,#2]
;;;382    	data[3]=0;
000592  f88d8003          STRB     r8,[sp,#3]
;;;383    	lc640_write_long_ptr(lc640_adr+20,data); 
000596  4669              MOV      r1,sp
000598  f1050014          ADD      r0,r5,#0x14
00059c  f7fffffe          BL       lc640_write_long_ptr
;;;384    	
;;;385    	data[0]=*((char*)(&net_Ustore));
0005a0  48c4              LDR      r0,|L1.2228|
0005a2  7801              LDRB     r1,[r0,#0]  ; net_Ustore
0005a4  f88d1000          STRB     r1,[sp,#0]
;;;386    	data[1]=*(((char*)(&net_Ustore))+1);
0005a8  7840              LDRB     r0,[r0,#1]  ; net_Ustore
0005aa  f88d0001          STRB     r0,[sp,#1]
;;;387    	data[2]='B';
0005ae  f04f0442          MOV      r4,#0x42
0005b2  f88d4002          STRB     r4,[sp,#2]
;;;388    	data[3]='B';
0005b6  f88d4003          STRB     r4,[sp,#3]
;;;389    	lc640_write_long_ptr(lc640_adr+24,data);
0005ba  4669              MOV      r1,sp
0005bc  f1050018          ADD      r0,r5,#0x18
0005c0  f7fffffe          BL       lc640_write_long_ptr
;;;390    	
;;;391    	data[0]='B';
0005c4  f88d4000          STRB     r4,[sp,#0]
;;;392    	data[1]='B';
0005c8  f88d4001          STRB     r4,[sp,#1]
;;;393    	data[2]='B';
0005cc  f88d4002          STRB     r4,[sp,#2]
;;;394    	data[3]='B';
0005d0  f88d4003          STRB     r4,[sp,#3]
;;;395    	lc640_write_long_ptr(lc640_adr+28,data);	
0005d4  4669              MOV      r1,sp
0005d6  f105001c          ADD      r0,r5,#0x1c
0005da  f7fffffe          BL       lc640_write_long_ptr
;;;396    	
;;;397    /*	memo_out0[0]=0x55;
;;;398         memo_out0[1]=0x00+2;
;;;399         memo_out0[2]=1;
;;;400         memo_out0[3]=0x0b;
;;;401         memo_out0[4]=0xaa;
;;;402         memo_out0[5]=0xaa; 
;;;403         	
;;;404         memo_out0[6]=crc_87(memo_out0,6);
;;;405    	memo_out0[7]=crc_95(memo_out0,6);
;;;406         usart_out_adr0(memo_out0,8); */
;;;407         snmp_trap_send("Main power alarm  clear",2,1,1);	
0005de  2301              MOVS     r3,#1
0005e0  461a              MOV      r2,r3
0005e2  2102              MOVS     r1,#2
0005e4  a0b4              ADR      r0,|L1.2232|
0005e6  f7fffffe          BL       snmp_trap_send
                  |L1.1514|
;;;408    	}
;;;409    avar_unet_hndl_end:
;;;410    	__nop();		
0005ea  bf00              NOP      
;;;411    }
0005ec  e8bd83f8          POP      {r3-r9,pc}
;;;412    
                          ENDP

                  avar_uout_hndl PROC
;;;414    //-----------------------------------------------
;;;415    void avar_uout_hndl(char in)
0005f0  e92d4ff8          PUSH     {r3-r11,lr}
;;;416    {
;;;417    
;;;418    char data[4];
;;;419    unsigned int event_ptr,lc640_adr,event_ptr_find,event_cnt;
;;;420    char avar_data=0;
;;;421    
;;;422    if(in==1)
;;;423    	{
;;;424    	//net_av=1;
;;;425    
;;;426    	//beep_init(0x01L,'O');
;;;427    	//a.av.bAN=1;
;;;428    
;;;429    
;;;430    	//beep_init(0x33333333,'A');
;;;431    
;;;432    	if(load_U>U_OUT_KONTR_MAX)uout_av=1;
;;;433    	if(load_U<U_OUT_KONTR_MIN)uout_av=2;
;;;434    	
;;;435    	avar_data=uout_av;
;;;436    		 
;;;437    	event_ptr=lc640_read_int(PTR_EVENT_LOG);
;;;438    	event_ptr++;	
;;;439    	if(event_ptr>63)event_ptr=0;	
;;;440    	lc640_write_int(PTR_EVENT_LOG,event_ptr);	
;;;441    	
;;;442        event_cnt=lc640_read_int(CNT_EVENT_LOG);
;;;443    	if(event_cnt!=63)event_cnt=event_ptr;
;;;444    	lc640_write_int(CNT_EVENT_LOG,event_cnt); 
;;;445    	
;;;446    	lc640_adr=EVENT_LOG+(lc640_read_int(PTR_EVENT_LOG)*32);
;;;447    	
;;;448    	data[0]='Q';
;;;449    	data[1]=0;
;;;450    	data[2]='A';
;;;451    	data[3]=avar_data;
;;;452    	lc640_write_long_ptr(lc640_adr,data);
;;;453    
;;;454    	 //load_U=4321;
;;;455    
;;;456    	data[0]=*((char*)&load_U);
;;;457    	data[1]=*(((char*)&load_U)+1);
;;;458    	data[2]=0;
;;;459    	data[3]=0;
;;;460    	lc640_write_long_ptr(lc640_adr+4,data);
;;;461    
;;;462    	data[0]=LPC_RTC->YEAR;
0005f4  4fb6              LDR      r7,|L1.2256|
0005f6  49b7              LDR      r1,|L1.2260|
0005f8  f44f6560          MOV      r5,#0xe00             ;437
0005fc  f04f0800          MOV      r8,#0                 ;420
000600  f44f6980          MOV      r9,#0x400             ;446
000604  2801              CMP      r0,#1                 ;422
000606  d002              BEQ      |L1.1550|
;;;463    	data[1]=LPC_RTC->MONTH;
;;;464    	data[2]=LPC_RTC->DOM;
;;;465    	data[3]=0;
;;;466    	lc640_write_long_ptr(lc640_adr+8,data);
;;;467    
;;;468    	data[0]=LPC_RTC->HOUR;
;;;469    	data[1]=LPC_RTC->MIN;
;;;470    	data[2]=LPC_RTC->SEC;
;;;471    	data[3]=0;
;;;472    	lc640_write_long_ptr(lc640_adr+12,data);
;;;473    	
;;;474    	data[0]='A';
;;;475    	data[1]='A';
;;;476    	data[2]='A';
;;;477    	data[3]='A';
;;;478    	lc640_write_long_ptr(lc640_adr+16,data);
;;;479    	
;;;480    	data[0]='A';
;;;481    	data[1]='A';
;;;482    	data[2]='A';
;;;483    	data[3]='A';
;;;484    	lc640_write_long_ptr(lc640_adr+20,data);
;;;485    	
;;;486    	data[0]='A';
;;;487    	data[1]='A';
;;;488    	data[2]='A';
;;;489    	data[3]='A';
;;;490    	lc640_write_long_ptr(lc640_adr+24,data);
;;;491    	
;;;492    	data[0]='A';
;;;493    	data[1]='A';
;;;494    	data[2]='A';
;;;495    	data[3]='A';
;;;496    	lc640_write_long_ptr(lc640_adr+28,data);				
;;;497    	
;;;498    /*	memo_out0[0]=0x55;
;;;499         memo_out0[1]=0x00+2;
;;;500         memo_out0[2]=1;
;;;501         memo_out0[3]=0x0b;
;;;502         memo_out0[4]=0x55;
;;;503         memo_out0[5]=0x55; 
;;;504         	
;;;505         memo_out0[6]=crc_87(memo_out0,6);
;;;506    	memo_out0[7]=crc_95(memo_out0,6);
;;;507         usart_out_adr0(memo_out0,8); 
;;;508    	*/
;;;509    	//snmp_trap_send("Main power is off",2,1,0);
;;;510    	}
;;;511    
;;;512    else if(in==0)
000608  2800              CMP      r0,#0
00060a  d07d              BEQ      |L1.1800|
00060c  e132              B        |L1.2164|
                  |L1.1550|
00060e  f8dfa2c8          LDR      r10,|L1.2264|
000612  4ab2              LDR      r2,|L1.2268|
000614  f9ba0000          LDRSH    r0,[r10,#0]           ;432  ; load_U
000618  f9b22000          LDRSH    r2,[r2,#0]            ;432  ; U_OUT_KONTR_MAX
00061c  4290              CMP      r0,r2                 ;432
00061e  dd02              BLE      |L1.1574|
000620  f04f0201          MOV      r2,#1                 ;432
000624  700a              STRB     r2,[r1,#0]            ;432
                  |L1.1574|
000626  4aae              LDR      r2,|L1.2272|
000628  f9b22000          LDRSH    r2,[r2,#0]            ;433  ; U_OUT_KONTR_MIN
00062c  4290              CMP      r0,r2                 ;433
00062e  da02              BGE      |L1.1590|
000630  f04f0002          MOV      r0,#2                 ;433
000634  7008              STRB     r0,[r1,#0]            ;433
                  |L1.1590|
000636  780e              LDRB     r6,[r1,#0]            ;435  ; uout_av
000638  4628              MOV      r0,r5                 ;437
00063a  f7fffffe          BL       lc640_read_int
00063e  f1000001          ADD      r0,r0,#1              ;438
000642  4604              MOV      r4,r0                 ;438
000644  2c3f              CMP      r4,#0x3f              ;439
000646  d901              BLS      |L1.1612|
000648  f04f0400          MOV      r4,#0                 ;439
                  |L1.1612|
00064c  b221              SXTH     r1,r4                 ;440
00064e  4628              MOV      r0,r5                 ;440
000650  f7fffffe          BL       lc640_write_int
000654  f6406b02          MOV      r11,#0xe02            ;442
000658  4658              MOV      r0,r11                ;442
00065a  f7fffffe          BL       lc640_read_int
00065e  283f              CMP      r0,#0x3f              ;443
000660  d000              BEQ      |L1.1636|
000662  4620              MOV      r0,r4                 ;443
                  |L1.1636|
000664  b201              SXTH     r1,r0                 ;444
000666  4658              MOV      r0,r11                ;444
000668  f7fffffe          BL       lc640_write_int
00066c  4628              MOV      r0,r5                 ;446
00066e  f7fffffe          BL       lc640_read_int
000672  eb091540          ADD      r5,r9,r0,LSL #5       ;446
000676  f04f0051          MOV      r0,#0x51              ;448
00067a  f88d0000          STRB     r0,[sp,#0]            ;448
00067e  f88d8001          STRB     r8,[sp,#1]            ;449
000682  f04f0441          MOV      r4,#0x41              ;450
000686  f88d4002          STRB     r4,[sp,#2]            ;450
00068a  f88d6003          STRB     r6,[sp,#3]            ;451
00068e  4669              MOV      r1,sp                 ;452
000690  4628              MOV      r0,r5                 ;452
000692  f7fffffe          BL       lc640_write_long_ptr
000696  f89a0000          LDRB     r0,[r10,#0]           ;456  ; load_U
00069a  f88d0000          STRB     r0,[sp,#0]            ;456
00069e  f89a0001          LDRB     r0,[r10,#1]           ;457  ; load_U
0006a2  f88d0001          STRB     r0,[sp,#1]            ;457
0006a6  f88d8002          STRB     r8,[sp,#2]            ;458
0006aa  f88d8003          STRB     r8,[sp,#3]            ;459
0006ae  4669              MOV      r1,sp                 ;460
0006b0  1d28              ADDS     r0,r5,#4              ;460
0006b2  f7fffffe          BL       lc640_write_long_ptr
0006b6  f1070720          ADD      r7,r7,#0x20           ;462
0006ba  8bb8              LDRH     r0,[r7,#0x1c]         ;462
0006bc  f88d0000          STRB     r0,[sp,#0]            ;462
0006c0  7e38              LDRB     r0,[r7,#0x18]         ;463
0006c2  f88d0001          STRB     r0,[sp,#1]            ;463
0006c6  7b38              LDRB     r0,[r7,#0xc]          ;464
0006c8  f88d0002          STRB     r0,[sp,#2]            ;464
0006cc  f88d8003          STRB     r8,[sp,#3]            ;465
0006d0  4669              MOV      r1,sp                 ;466
0006d2  f1050008          ADD      r0,r5,#8              ;466
0006d6  f7fffffe          BL       lc640_write_long_ptr
0006da  7a38              LDRB     r0,[r7,#8]            ;468
0006dc  f88d0000          STRB     r0,[sp,#0]            ;468
0006e0  7938              LDRB     r0,[r7,#4]            ;469
0006e2  f88d0001          STRB     r0,[sp,#1]            ;469
0006e6  7838              LDRB     r0,[r7,#0]            ;470
0006e8  f88d0002          STRB     r0,[sp,#2]            ;470
0006ec  f88d8003          STRB     r8,[sp,#3]            ;471
0006f0  4669              MOV      r1,sp                 ;472
0006f2  f105000c          ADD      r0,r5,#0xc            ;472
0006f6  f7fffffe          BL       lc640_write_long_ptr
0006fa  f88d4000          STRB     r4,[sp,#0]            ;474
0006fe  f88d4001          STRB     r4,[sp,#1]            ;475
000702  f88d4002          STRB     r4,[sp,#2]            ;476
000706  e000              B        |L1.1802|
                  |L1.1800|
000708  e02e              B        |L1.1896|
                  |L1.1802|
00070a  f88d4003          STRB     r4,[sp,#3]            ;477
00070e  4669              MOV      r1,sp                 ;478
000710  f1050010          ADD      r0,r5,#0x10           ;478
000714  f7fffffe          BL       lc640_write_long_ptr
000718  f88d4000          STRB     r4,[sp,#0]            ;480
00071c  f88d4001          STRB     r4,[sp,#1]            ;481
000720  f88d4002          STRB     r4,[sp,#2]            ;482
000724  f88d4003          STRB     r4,[sp,#3]            ;483
000728  4669              MOV      r1,sp                 ;484
00072a  f1050014          ADD      r0,r5,#0x14           ;484
00072e  f7fffffe          BL       lc640_write_long_ptr
000732  f88d4000          STRB     r4,[sp,#0]            ;486
000736  f88d4001          STRB     r4,[sp,#1]            ;487
00073a  f88d4002          STRB     r4,[sp,#2]            ;488
00073e  f88d4003          STRB     r4,[sp,#3]            ;489
000742  4669              MOV      r1,sp                 ;490
000744  f1050018          ADD      r0,r5,#0x18           ;490
000748  f7fffffe          BL       lc640_write_long_ptr
00074c  f88d4000          STRB     r4,[sp,#0]            ;492
000750  f88d4001          STRB     r4,[sp,#1]            ;493
000754  f88d4002          STRB     r4,[sp,#2]            ;494
000758  f88d4003          STRB     r4,[sp,#3]            ;495
00075c  4669              MOV      r1,sp                 ;496
00075e  f105001c          ADD      r0,r5,#0x1c           ;496
000762  f7fffffe          BL       lc640_write_long_ptr
000766  e085              B        |L1.2164|
                  |L1.1896|
;;;513    	{
;;;514    	uout_av=0;
000768  f8818000          STRB     r8,[r1,#0]
;;;515    
;;;516      /*
;;;517    	SET_REG(C2GSR,3,24,8);
;;;518    	C2MOD=0;
;;;519    	bOUT_FREE2=1;*/
;;;520    
;;;521    
;;;522    	//C2MOD=0;
;;;523    
;;;524    	//can2_init(7,8,CANBitrate250k_60MHz);
;;;525    
;;;526         //beep_init(0x02L,'O');
;;;527    	//a_.av.bAN=0;
;;;528    //	SET_REG(avar_stat,0,0,1);
;;;529    
;;;530    	//if(AV_OFF_AVT)a.av.bAN=0;
;;;531    	
;;;532    	//if(AV_OFF_AVT) SET_REG(avar_ind_stat,0,0,1);
;;;533    
;;;534        event_ptr=lc640_read_int(PTR_EVENT_LOG);
00076c  4628              MOV      r0,r5
00076e  f7fffffe          BL       lc640_read_int
000772  4606              MOV      r6,r0
;;;535    	event_ptr_find=event_ptr;
000774  4634              MOV      r4,r6
                  |L1.1910|
;;;536    avar_uout_hndl_lbl1:
;;;537    	lc640_adr=EVENT_LOG+(event_ptr_find*32);
000776  eb091544          ADD      r5,r9,r4,LSL #5
;;;538    
;;;539         lc640_read_long_ptr(lc640_adr,data);
00077a  4669              MOV      r1,sp
00077c  4628              MOV      r0,r5
00077e  f7fffffe          BL       lc640_read_long_ptr
;;;540         
;;;541         if(!((data[0]=='Q')&&(data[1]==0)&&(data[2]=='A')))
000782  f89d0000          LDRB     r0,[sp,#0]
000786  2851              CMP      r0,#0x51
000788  d106              BNE      |L1.1944|
00078a  f89d0001          LDRB     r0,[sp,#1]
00078e  b918              CBNZ     r0,|L1.1944|
000790  f89d0002          LDRB     r0,[sp,#2]
000794  2841              CMP      r0,#0x41
000796  d008              BEQ      |L1.1962|
                  |L1.1944|
;;;542         	{        
;;;543         	if(event_ptr_find)event_ptr_find--;
000798  b114              CBZ      r4,|L1.1952|
00079a  f1a40401          SUB      r4,r4,#1
00079e  e001              B        |L1.1956|
                  |L1.1952|
;;;544         	else event_ptr_find=63;
0007a0  f04f043f          MOV      r4,#0x3f
                  |L1.1956|
;;;545         	if(event_ptr_find==event_ptr)goto avar_unet_hndl_end;
0007a4  42b4              CMP      r4,r6
0007a6  d1e6              BNE      |L1.1910|
0007a8  e064              B        |L1.2164|
                  |L1.1962|
;;;546         	else goto avar_uout_hndl_lbl1;
;;;547         	}
;;;548         else 
;;;549         	{
;;;550         	lc640_read_long_ptr(lc640_adr+16,data);
0007aa  4669              MOV      r1,sp
0007ac  f1050010          ADD      r0,r5,#0x10
0007b0  f7fffffe          BL       lc640_read_long_ptr
;;;551         	if(!((data[0]=='A')&&(data[1]=='A')&&(data[2]=='A')&&(data[3]=='A')))
0007b4  f89d0000          LDRB     r0,[sp,#0]
0007b8  2841              CMP      r0,#0x41
0007ba  d10b              BNE      |L1.2004|
0007bc  f89d0001          LDRB     r0,[sp,#1]
0007c0  2841              CMP      r0,#0x41
0007c2  d107              BNE      |L1.2004|
0007c4  f89d0002          LDRB     r0,[sp,#2]
0007c8  2841              CMP      r0,#0x41
0007ca  d103              BNE      |L1.2004|
0007cc  f89d0003          LDRB     r0,[sp,#3]
0007d0  2841              CMP      r0,#0x41
0007d2  d008              BEQ      |L1.2022|
                  |L1.2004|
;;;552         		{        
;;;553         		if(event_ptr_find)event_ptr_find--;
0007d4  b114              CBZ      r4,|L1.2012|
0007d6  f1a40401          SUB      r4,r4,#1
0007da  e001              B        |L1.2016|
                  |L1.2012|
;;;554             		else event_ptr_find=63;
0007dc  f04f043f          MOV      r4,#0x3f
                  |L1.2016|
;;;555             		if(event_ptr_find==event_ptr)goto avar_unet_hndl_end;
0007e0  42b4              CMP      r4,r6
0007e2  d1c8              BNE      |L1.1910|
0007e4  e046              B        |L1.2164|
                  |L1.2022|
;;;556         		else goto avar_uout_hndl_lbl1;
;;;557         		}
;;;558    
;;;559         	}	
;;;560    	
;;;561    	data[0]=LPC_RTC->YEAR;
0007e6  f1070720          ADD      r7,r7,#0x20
0007ea  8bb8              LDRH     r0,[r7,#0x1c]
0007ec  f88d0000          STRB     r0,[sp,#0]
;;;562    	data[1]=LPC_RTC->MONTH;
0007f0  7e38              LDRB     r0,[r7,#0x18]
0007f2  f88d0001          STRB     r0,[sp,#1]
;;;563    	data[2]=LPC_RTC->DOM;
0007f6  7b38              LDRB     r0,[r7,#0xc]
0007f8  f88d0002          STRB     r0,[sp,#2]
;;;564    	data[3]=0;
0007fc  f88d8003          STRB     r8,[sp,#3]
;;;565    	lc640_write_long_ptr(lc640_adr+16,data);
000800  4669              MOV      r1,sp
000802  f1050010          ADD      r0,r5,#0x10
000806  f7fffffe          BL       lc640_write_long_ptr
;;;566    
;;;567    	data[0]=LPC_RTC->HOUR;
00080a  7a38              LDRB     r0,[r7,#8]
00080c  f88d0000          STRB     r0,[sp,#0]
;;;568    	data[1]=LPC_RTC->MIN;
000810  7938              LDRB     r0,[r7,#4]
000812  f88d0001          STRB     r0,[sp,#1]
;;;569    	data[2]=LPC_RTC->SEC;
000816  7838              LDRB     r0,[r7,#0]
000818  f88d0002          STRB     r0,[sp,#2]
;;;570    	data[3]=0;
00081c  f88d8003          STRB     r8,[sp,#3]
;;;571    	lc640_write_long_ptr(lc640_adr+20,data); 
000820  4669              MOV      r1,sp
000822  f1050014          ADD      r0,r5,#0x14
000826  f7fffffe          BL       lc640_write_long_ptr
;;;572    	
;;;573    	data[0]=*((char*)(&net_Ustore));
00082a  4822              LDR      r0,|L1.2228|
00082c  7801              LDRB     r1,[r0,#0]  ; net_Ustore
00082e  f88d1000          STRB     r1,[sp,#0]
;;;574    	data[1]=*(((char*)(&net_Ustore))+1);
000832  7840              LDRB     r0,[r0,#1]  ; net_Ustore
000834  f88d0001          STRB     r0,[sp,#1]
;;;575    	data[2]='B';
000838  f04f0442          MOV      r4,#0x42
00083c  f88d4002          STRB     r4,[sp,#2]
;;;576    	data[3]='B';
000840  f88d4003          STRB     r4,[sp,#3]
;;;577    	lc640_write_long_ptr(lc640_adr+24,data);
000844  4669              MOV      r1,sp
000846  f1050018          ADD      r0,r5,#0x18
00084a  f7fffffe          BL       lc640_write_long_ptr
;;;578    	
;;;579    	data[0]='B';
00084e  f88d4000          STRB     r4,[sp,#0]
;;;580    	data[1]='B';
000852  f88d4001          STRB     r4,[sp,#1]
;;;581    	data[2]='B';
000856  f88d4002          STRB     r4,[sp,#2]
;;;582    	data[3]='B';
00085a  f88d4003          STRB     r4,[sp,#3]
;;;583    	lc640_write_long_ptr(lc640_adr+28,data);	
00085e  4669              MOV      r1,sp
000860  f105001c          ADD      r0,r5,#0x1c
000864  f7fffffe          BL       lc640_write_long_ptr
;;;584    	
;;;585    /*	memo_out0[0]=0x55;
;;;586         memo_out0[1]=0x00+2;
;;;587         memo_out0[2]=1;
;;;588         memo_out0[3]=0x0b;
;;;589         memo_out0[4]=0xaa;
;;;590         memo_out0[5]=0xaa; 
;;;591         	
;;;592         memo_out0[6]=crc_87(memo_out0,6);
;;;593    	memo_out0[7]=crc_95(memo_out0,6);
;;;594         usart_out_adr0(memo_out0,8); */
;;;595         snmp_trap_send("Main power is on",2,1,1);	
000868  2301              MOVS     r3,#1
00086a  461a              MOV      r2,r3
00086c  2102              MOVS     r1,#2
00086e  a01d              ADR      r0,|L1.2276|
000870  f7fffffe          BL       snmp_trap_send
                  |L1.2164|
;;;596    	}
;;;597    avar_unet_hndl_end:
;;;598    	__nop();		
000874  bf00              NOP      
                  |L1.2166|
;;;599    }
000876  e8bd8ff8          POP      {r3-r11,pc}
;;;600    
                          ENDP

                  avar_bps_hndl PROC
;;;601    //-----------------------------------------------
;;;602    void avar_bps_hndl(char dev, char v, char in)
00087a  e92d4ff8          PUSH     {r3-r11,lr}
;;;603    {
00087e  4606              MOV      r6,r0
000880  460c              MOV      r4,r1
;;;604    char data[4];
;;;605    unsigned short event_ptr,lc640_adr,event_ptr_find,event_cnt;
;;;606    char avar_simbol;
;;;607    
;;;608    avar_simbol='T';
000882  f04f0754          MOV      r7,#0x54
;;;609    if(v==0)avar_simbol='T';
000886  b134              CBZ      r4,|L1.2198|
;;;610    else if(v==1)avar_simbol='U';
000888  2c01              CMP      r4,#1
00088a  d035              BEQ      |L1.2296|
;;;611    else if(v==2)avar_simbol='u';
00088c  2c02              CMP      r4,#2
00088e  d036              BEQ      |L1.2302|
;;;612    else if(v==3)avar_simbol='L';
000890  2c03              CMP      r4,#3
000892  d037              BEQ      |L1.2308|
000894  e038              B        |L1.2312|
                  |L1.2198|
000896  e037              B        |L1.2312|
                  |L1.2200|
000898  4d61696e          DCB      "Main power alarm",0
00089c  20706f77
0008a0  65722061
0008a4  6c61726d
0008a8  00      
0008a9  00                DCB      0
0008aa  00                DCB      0
0008ab  00                DCB      0
                  |L1.2220|
                          DCD      ||.data||
                  |L1.2224|
                          DCD      AV_OFF_AVT
                  |L1.2228|
                          DCD      net_Ustore
                  |L1.2232|
0008b8  4d61696e          DCB      "Main power alarm  clear",0
0008bc  20706f77
0008c0  65722061
0008c4  6c61726d
0008c8  2020636c
0008cc  65617200
                  |L1.2256|
                          DCD      0x40024000
                  |L1.2260|
                          DCD      uout_av
                  |L1.2264|
                          DCD      load_U
                  |L1.2268|
                          DCD      U_OUT_KONTR_MAX
                  |L1.2272|
                          DCD      U_OUT_KONTR_MIN
                  |L1.2276|
0008e4  4d61696e          DCB      "Main power is on",0
0008e8  20706f77
0008ec  65722069
0008f0  73206f6e
0008f4  00      
0008f5  00                DCB      0
0008f6  00                DCB      0
0008f7  00                DCB      0
                  |L1.2296|
0008f8  f04f0755          MOV      r7,#0x55              ;610
0008fc  e004              B        |L1.2312|
                  |L1.2302|
0008fe  f04f0775          MOV      r7,#0x75              ;611
000902  e001              B        |L1.2312|
                  |L1.2308|
000904  f04f074c          MOV      r7,#0x4c
                  |L1.2312|
;;;613    
;;;614    if(in==1)
;;;615    	{
;;;616    	//av_src[bps]=1;
;;;617    
;;;618    //	SET_REG(avar_ind_stat,1,3+dev,1);
;;;619    //	SET_REG(avar_stat,1,3+dev,1);
;;;620    	
;;;621    	if(v==0)bps[dev]._av|=(1<<0);
;;;622    	else if(v==1) bps[dev]._av|=(1<<1);
;;;623    	else if(v==2) bps[dev]._av|=(1<<2);
;;;624    	else if(v==3) bps[dev]._av|=(1<<3);
;;;625    
;;;626    	bps[dev]._last_avar=v;
;;;627    
;;;628    	//beep_init(0x33333333,'A');
;;;629    
;;;630    	event_ptr=lc640_read_int(PTR_EVENT_LOG);
;;;631    	event_ptr++;	
;;;632    	if(event_ptr>63)event_ptr=0;	
;;;633    	lc640_write_int(PTR_EVENT_LOG,event_ptr);	
;;;634    	
;;;635        event_cnt=lc640_read_int(CNT_EVENT_LOG);
;;;636    	if(event_cnt!=63)event_cnt=event_ptr;
;;;637    	lc640_write_int(CNT_EVENT_LOG,event_cnt); 
;;;638    	
;;;639    	lc640_adr=EVENT_LOG+(lc640_read_int(PTR_EVENT_LOG)*32);
;;;640    	
;;;641    	data[0]='S';
;;;642    	data[1]=dev; 
;;;643    	data[2]=avar_simbol;
;;;644    	data[3]=0;
;;;645    	lc640_write_long_ptr(lc640_adr,data);
;;;646    
;;;647    	data[0]=0;
;;;648    	data[1]=0;
;;;649    	data[2]=0;
;;;650    	data[3]=0;
;;;651    	lc640_write_long_ptr(lc640_adr+4,data);
;;;652    
;;;653    	data[0]=LPC_RTC->YEAR;
000908  f8df8400          LDR      r8,|L1.3340|
00090c  f04f0900          MOV      r9,#0                 ;603
000910  48ff              LDR      r0,|L1.3344|
000912  ebc601c6          RSB      r1,r6,r6,LSL #3       ;621
000916  eb011106          ADD      r1,r1,r6,LSL #4       ;621
00091a  f44f6a60          MOV      r10,#0xe00            ;630
00091e  f44f6580          MOV      r5,#0x400             ;639
000922  eb000081          ADD      r0,r0,r1,LSL #2       ;621
000926  2a01              CMP      r2,#1                 ;614
000928  d002              BEQ      |L1.2352|
;;;654    	data[1]=LPC_RTC->MONTH;
;;;655    	data[2]=LPC_RTC->DOM;
;;;656    	data[3]=0;
;;;657    	lc640_write_long_ptr(lc640_adr+8,data);
;;;658    
;;;659    	data[0]=LPC_RTC->HOUR;
;;;660    	data[1]=LPC_RTC->MIN;
;;;661    	data[2]=LPC_RTC->SEC;
;;;662    	data[3]=0;
;;;663    	lc640_write_long_ptr(lc640_adr+12,data);
;;;664    	
;;;665    	data[0]='A';
;;;666    	data[1]='A';
;;;667    	data[2]='A';
;;;668    	data[3]='A';
;;;669    	lc640_write_long_ptr(lc640_adr+16,data);
;;;670    	
;;;671    	data[0]='A';
;;;672    	data[1]='A';
;;;673    	data[2]='A';
;;;674    	data[3]='A';
;;;675    	lc640_write_long_ptr(lc640_adr+20,data);
;;;676    	
;;;677    	data[0]='A';
;;;678    	data[1]='A';
;;;679    	data[2]='A';
;;;680    	data[3]='A';
;;;681    	lc640_write_long_ptr(lc640_adr+24,data);
;;;682    	
;;;683    	data[0]='A';
;;;684    	data[1]='A';
;;;685    	data[2]='A';
;;;686    	data[3]='A';
;;;687    	lc640_write_long_ptr(lc640_adr+28,data);		
;;;688    
;;;689    
;;;690    	if(dev==0)
;;;691    		{
;;;692    		if(v==0)
;;;693    		snmp_trap_send("BPS #1 Alarm, overheat",4,1,0);
;;;694    		else if(v==1)
;;;695    		snmp_trap_send("BPS #1 Alarm, voltage is up",4,1,1);
;;;696    		else if(v==2)
;;;697    		snmp_trap_send("BPS #1 Alarm, voltage is down",4,1,2);
;;;698    		else if(v==3)
;;;699    		snmp_trap_send("BPS #1 Alarm, connect is lost",4,1,3);
;;;700    		}
;;;701    	else if(dev==1)
;;;702    		{
;;;703    		if(v==0)
;;;704    		snmp_trap_send("BPS #2 Alarm, overheat",4,2,0);
;;;705    		else if(v==1)
;;;706    		snmp_trap_send("BPS #2 Alarm, voltage is up",4,2,1);
;;;707    		else if(v==2)
;;;708    		snmp_trap_send("BPS #2 Alarm, voltage is down",4,2,2);
;;;709    		else if(v==3)
;;;710    		snmp_trap_send("BPS #2 Alarm, connect is lost",4,2,3);
;;;711    		} 
;;;712    	else if(dev==2)
;;;713    		{
;;;714    		if(v==0)
;;;715    		snmp_trap_send("BPS #3 Alarm, overheat",4,3,0);
;;;716    		else if(v==1)
;;;717    		snmp_trap_send("BPS #3 Alarm, voltage is up",4,3,1);
;;;718    		else if(v==2)
;;;719    		snmp_trap_send("BPS #3 Alarm, voltage is down",4,3,2);
;;;720    		else if(v==3)
;;;721    		snmp_trap_send("BPS #3 Alarm, connect is lost",4,3,3);
;;;722    		} 	
;;;723    			
;;;724    	}
;;;725    
;;;726    else if(in==0)
00092a  2a00              CMP      r2,#0
00092c  d07e              BEQ      |L1.2604|
00092e  e1c4              B        |L1.3258|
                  |L1.2352|
000930  b134              CBZ      r4,|L1.2368|
000932  2c01              CMP      r4,#1                 ;622
000934  d009              BEQ      |L1.2378|
000936  2c02              CMP      r4,#2                 ;623
000938  d00c              BEQ      |L1.2388|
00093a  2c03              CMP      r4,#3                 ;624
00093c  d00f              BEQ      |L1.2398|
00093e  e012              B        |L1.2406|
                  |L1.2368|
000940  7841              LDRB     r1,[r0,#1]            ;621
000942  f0410101          ORR      r1,r1,#1              ;621
000946  7041              STRB     r1,[r0,#1]            ;621
000948  e00d              B        |L1.2406|
                  |L1.2378|
00094a  7841              LDRB     r1,[r0,#1]            ;622
00094c  f0410102          ORR      r1,r1,#2              ;622
000950  7041              STRB     r1,[r0,#1]            ;622
000952  e008              B        |L1.2406|
                  |L1.2388|
000954  7841              LDRB     r1,[r0,#1]            ;623
000956  f0410104          ORR      r1,r1,#4              ;623
00095a  7041              STRB     r1,[r0,#1]            ;623
00095c  e003              B        |L1.2406|
                  |L1.2398|
00095e  7841              LDRB     r1,[r0,#1]            ;624
000960  f0410108          ORR      r1,r1,#8              ;624
000964  7041              STRB     r1,[r0,#1]            ;624
                  |L1.2406|
000966  f8804053          STRB     r4,[r0,#0x53]         ;626
00096a  4650              MOV      r0,r10                ;630
00096c  f7fffffe          BL       lc640_read_int
000970  f1000001          ADD      r0,r0,#1              ;631
000974  fa1ffb80          UXTH     r11,r0                ;631
000978  f1bb0f3f          CMP      r11,#0x3f             ;632
00097c  d901              BLS      |L1.2434|
00097e  f04f0b00          MOV      r11,#0                ;632
                  |L1.2434|
000982  fa0ff18b          SXTH     r1,r11                ;633
000986  4650              MOV      r0,r10                ;633
000988  f7fffffe          BL       lc640_write_int
00098c  f6406002          MOV      r0,#0xe02             ;635
000990  f7fffffe          BL       lc640_read_int
000994  b280              UXTH     r0,r0                 ;635
000996  283f              CMP      r0,#0x3f              ;636
000998  d000              BEQ      |L1.2460|
00099a  4658              MOV      r0,r11                ;636
                  |L1.2460|
00099c  b201              SXTH     r1,r0                 ;637
00099e  f6406002          MOV      r0,#0xe02             ;637
0009a2  f7fffffe          BL       lc640_write_int
0009a6  4650              MOV      r0,r10                ;639
0009a8  f7fffffe          BL       lc640_read_int
0009ac  eb051040          ADD      r0,r5,r0,LSL #5       ;639
0009b0  b285              UXTH     r5,r0                 ;639
0009b2  f04f0053          MOV      r0,#0x53              ;641
0009b6  f88d0000          STRB     r0,[sp,#0]            ;641
0009ba  f88d6001          STRB     r6,[sp,#1]            ;642
0009be  f88d7002          STRB     r7,[sp,#2]            ;643
0009c2  f88d9003          STRB     r9,[sp,#3]            ;644
0009c6  4669              MOV      r1,sp                 ;645
0009c8  4628              MOV      r0,r5                 ;645
0009ca  f7fffffe          BL       lc640_write_long_ptr
0009ce  f8cd9000          STR      r9,[sp,#0]            ;650
0009d2  4669              MOV      r1,sp                 ;651
0009d4  1d28              ADDS     r0,r5,#4              ;651
0009d6  f7fffffe          BL       lc640_write_long_ptr
0009da  f8b8003c          LDRH     r0,[r8,#0x3c]         ;653
0009de  f88d0000          STRB     r0,[sp,#0]            ;653
0009e2  f8980038          LDRB     r0,[r8,#0x38]         ;654
0009e6  f88d0001          STRB     r0,[sp,#1]            ;654
0009ea  f898002c          LDRB     r0,[r8,#0x2c]         ;655
0009ee  f88d0002          STRB     r0,[sp,#2]            ;655
0009f2  f88d9003          STRB     r9,[sp,#3]            ;656
0009f6  4669              MOV      r1,sp                 ;657
0009f8  f1050008          ADD      r0,r5,#8              ;657
0009fc  f7fffffe          BL       lc640_write_long_ptr
000a00  f8980028          LDRB     r0,[r8,#0x28]         ;659
000a04  f88d0000          STRB     r0,[sp,#0]            ;659
000a08  f8980024          LDRB     r0,[r8,#0x24]         ;660
000a0c  f88d0001          STRB     r0,[sp,#1]            ;660
000a10  f8980020          LDRB     r0,[r8,#0x20]         ;661
000a14  f88d0002          STRB     r0,[sp,#2]            ;661
000a18  f88d9003          STRB     r9,[sp,#3]            ;662
000a1c  4669              MOV      r1,sp                 ;663
000a1e  f105000c          ADD      r0,r5,#0xc            ;663
000a22  f7fffffe          BL       lc640_write_long_ptr
000a26  f04f0741          MOV      r7,#0x41              ;665
000a2a  e000              B        |L1.2606|
                  |L1.2604|
000a2c  e0a5              B        |L1.2938|
                  |L1.2606|
000a2e  f88d7000          STRB     r7,[sp,#0]            ;665
000a32  f88d7001          STRB     r7,[sp,#1]            ;666
000a36  f88d7002          STRB     r7,[sp,#2]            ;667
000a3a  f88d7003          STRB     r7,[sp,#3]            ;668
000a3e  4669              MOV      r1,sp                 ;669
000a40  f1050010          ADD      r0,r5,#0x10           ;669
000a44  f7fffffe          BL       lc640_write_long_ptr
000a48  f88d7000          STRB     r7,[sp,#0]            ;671
000a4c  f88d7001          STRB     r7,[sp,#1]            ;672
000a50  f88d7002          STRB     r7,[sp,#2]            ;673
000a54  f88d7003          STRB     r7,[sp,#3]            ;674
000a58  4669              MOV      r1,sp                 ;675
000a5a  f1050014          ADD      r0,r5,#0x14           ;675
000a5e  f7fffffe          BL       lc640_write_long_ptr
000a62  f88d7000          STRB     r7,[sp,#0]            ;677
000a66  f88d7001          STRB     r7,[sp,#1]            ;678
000a6a  f88d7002          STRB     r7,[sp,#2]            ;679
000a6e  f88d7003          STRB     r7,[sp,#3]            ;680
000a72  4669              MOV      r1,sp                 ;681
000a74  f1050018          ADD      r0,r5,#0x18           ;681
000a78  f7fffffe          BL       lc640_write_long_ptr
000a7c  f88d7000          STRB     r7,[sp,#0]            ;683
000a80  f88d7001          STRB     r7,[sp,#1]            ;684
000a84  f88d7002          STRB     r7,[sp,#2]            ;685
000a88  f88d7003          STRB     r7,[sp,#3]            ;686
000a8c  4669              MOV      r1,sp                 ;687
000a8e  f105001c          ADD      r0,r5,#0x1c           ;687
000a92  f7fffffe          BL       lc640_write_long_ptr
000a96  b126              CBZ      r6,|L1.2722|
000a98  2e01              CMP      r6,#1                 ;701
000a9a  d026              BEQ      |L1.2794|
000a9c  2e02              CMP      r6,#2                 ;712
000a9e  d048              BEQ      |L1.2866|
000aa0  e10b              B        |L1.3258|
                  |L1.2722|
000aa2  b134              CBZ      r4,|L1.2738|
000aa4  2c01              CMP      r4,#1                 ;694
000aa6  d00b              BEQ      |L1.2752|
000aa8  2c02              CMP      r4,#2                 ;696
000aaa  d010              BEQ      |L1.2766|
000aac  2c03              CMP      r4,#3                 ;698
000aae  d015              BEQ      |L1.2780|
000ab0  e103              B        |L1.3258|
                  |L1.2738|
000ab2  2300              MOVS     r3,#0                 ;693
000ab4  2201              MOVS     r2,#1                 ;693
000ab6  2104              MOVS     r1,#4                 ;693
000ab8  a096              ADR      r0,|L1.3348|
000aba  f7fffffe          BL       snmp_trap_send
000abe  e0fc              B        |L1.3258|
                  |L1.2752|
000ac0  2301              MOVS     r3,#1                 ;695
000ac2  461a              MOV      r2,r3                 ;695
000ac4  2104              MOVS     r1,#4                 ;695
000ac6  a099              ADR      r0,|L1.3372|
000ac8  f7fffffe          BL       snmp_trap_send
000acc  e0f5              B        |L1.3258|
                  |L1.2766|
000ace  2302              MOVS     r3,#2                 ;697
000ad0  2201              MOVS     r2,#1                 ;697
000ad2  2104              MOVS     r1,#4                 ;697
000ad4  a09c              ADR      r0,|L1.3400|
000ad6  f7fffffe          BL       snmp_trap_send
000ada  e0ee              B        |L1.3258|
                  |L1.2780|
000adc  2303              MOVS     r3,#3                 ;699
000ade  2201              MOVS     r2,#1                 ;699
000ae0  2104              MOVS     r1,#4                 ;699
000ae2  a0a1              ADR      r0,|L1.3432|
000ae4  f7fffffe          BL       snmp_trap_send
000ae8  e0e7              B        |L1.3258|
                  |L1.2794|
000aea  b134              CBZ      r4,|L1.2810|
000aec  2c01              CMP      r4,#1                 ;705
000aee  d00b              BEQ      |L1.2824|
000af0  2c02              CMP      r4,#2                 ;707
000af2  d010              BEQ      |L1.2838|
000af4  2c03              CMP      r4,#3                 ;709
000af6  d015              BEQ      |L1.2852|
000af8  e0df              B        |L1.3258|
                  |L1.2810|
000afa  2300              MOVS     r3,#0                 ;704
000afc  2202              MOVS     r2,#2                 ;704
000afe  2104              MOVS     r1,#4                 ;704
000b00  a0a1              ADR      r0,|L1.3464|
000b02  f7fffffe          BL       snmp_trap_send
000b06  e0d8              B        |L1.3258|
                  |L1.2824|
000b08  2301              MOVS     r3,#1                 ;706
000b0a  2202              MOVS     r2,#2                 ;706
000b0c  2104              MOVS     r1,#4                 ;706
000b0e  a0a4              ADR      r0,|L1.3488|
000b10  f7fffffe          BL       snmp_trap_send
000b14  e0d1              B        |L1.3258|
                  |L1.2838|
000b16  2302              MOVS     r3,#2                 ;708
000b18  461a              MOV      r2,r3                 ;708
000b1a  2104              MOVS     r1,#4                 ;708
000b1c  a0a7              ADR      r0,|L1.3516|
000b1e  f7fffffe          BL       snmp_trap_send
000b22  e0ca              B        |L1.3258|
                  |L1.2852|
000b24  2303              MOVS     r3,#3                 ;710
000b26  2202              MOVS     r2,#2                 ;710
000b28  2104              MOVS     r1,#4                 ;710
000b2a  a0ac              ADR      r0,|L1.3548|
000b2c  f7fffffe          BL       snmp_trap_send
000b30  e0c3              B        |L1.3258|
                  |L1.2866|
000b32  b134              CBZ      r4,|L1.2882|
000b34  2c01              CMP      r4,#1                 ;716
000b36  d00b              BEQ      |L1.2896|
000b38  2c02              CMP      r4,#2                 ;718
000b3a  d010              BEQ      |L1.2910|
000b3c  2c03              CMP      r4,#3                 ;720
000b3e  d015              BEQ      |L1.2924|
000b40  e0bb              B        |L1.3258|
                  |L1.2882|
000b42  2300              MOVS     r3,#0                 ;715
000b44  2203              MOVS     r2,#3                 ;715
000b46  2104              MOVS     r1,#4                 ;715
000b48  a0ac              ADR      r0,|L1.3580|
000b4a  f7fffffe          BL       snmp_trap_send
000b4e  e0b4              B        |L1.3258|
                  |L1.2896|
000b50  2301              MOVS     r3,#1                 ;717
000b52  2203              MOVS     r2,#3                 ;717
000b54  2104              MOVS     r1,#4                 ;717
000b56  a0af              ADR      r0,|L1.3604|
000b58  f7fffffe          BL       snmp_trap_send
000b5c  e0ad              B        |L1.3258|
                  |L1.2910|
000b5e  2302              MOVS     r3,#2                 ;719
000b60  2203              MOVS     r2,#3                 ;719
000b62  2104              MOVS     r1,#4                 ;719
000b64  a0b2              ADR      r0,|L1.3632|
000b66  f7fffffe          BL       snmp_trap_send
000b6a  e0a6              B        |L1.3258|
                  |L1.2924|
000b6c  2303              MOVS     r3,#3                 ;721
000b6e  461a              MOV      r2,r3                 ;721
000b70  2104              MOVS     r1,#4                 ;721
000b72  a0b7              ADR      r0,|L1.3664|
000b74  f7fffffe          BL       snmp_trap_send
000b78  e09f              B        |L1.3258|
                  |L1.2938|
;;;727    	{      
;;;728    //	av_bps[bps]=0;
;;;729    
;;;730    	//SET_REG(avar_stat,0,3+bps,1);
;;;731    	//if(AV_OFF_AVT) SET_REG(avar_ind_stat,0,3+bps,1);
;;;732    
;;;733         if(v==0) bps[dev]._av&=(~(1<<0));
000b7a  b134              CBZ      r4,|L1.2954|
;;;734         else if(v==1) bps[dev]._av&=(~(1<<1));
000b7c  2c01              CMP      r4,#1
000b7e  d009              BEQ      |L1.2964|
;;;735    	else if(v==2) bps[dev]._av&=(~(1<<2));
000b80  2c02              CMP      r4,#2
000b82  d00c              BEQ      |L1.2974|
;;;736    	else if(v==3) bps[dev]._av&=(~(1<<3));
000b84  2c03              CMP      r4,#3
000b86  d00f              BEQ      |L1.2984|
000b88  e012              B        |L1.2992|
                  |L1.2954|
000b8a  7841              LDRB     r1,[r0,#1]            ;733
000b8c  f0210101          BIC      r1,r1,#1              ;733
000b90  7041              STRB     r1,[r0,#1]            ;733
000b92  e00d              B        |L1.2992|
                  |L1.2964|
000b94  7841              LDRB     r1,[r0,#1]            ;734
000b96  f0210102          BIC      r1,r1,#2              ;734
000b9a  7041              STRB     r1,[r0,#1]            ;734
000b9c  e008              B        |L1.2992|
                  |L1.2974|
000b9e  7841              LDRB     r1,[r0,#1]            ;735
000ba0  f0210104          BIC      r1,r1,#4              ;735
000ba4  7041              STRB     r1,[r0,#1]            ;735
000ba6  e003              B        |L1.2992|
                  |L1.2984|
000ba8  7841              LDRB     r1,[r0,#1]
000baa  f0210108          BIC      r1,r1,#8
000bae  7041              STRB     r1,[r0,#1]
                  |L1.2992|
;;;737         
;;;738    //	if((bps[dev]._av&0x0f==0))
;;;739    //	     {
;;;740    		//SET_REG(avar_stat,0,3+bps,1);
;;;741    		//if(AV_OFF_AVT) SET_REG(avar_ind_stat,0,3+bps,1);
;;;742    //	     }
;;;743     
;;;744    	event_ptr=lc640_read_int(PTR_EVENT_LOG);
000bb0  4650              MOV      r0,r10
000bb2  f7fffffe          BL       lc640_read_int
000bb6  fa1ffb80          UXTH     r11,r0
;;;745    	event_ptr_find=event_ptr;
000bba  465c              MOV      r4,r11
                  |L1.3004|
;;;746    	
;;;747    avar_src_hndl_lbl1: 
;;;748    
;;;749    	lc640_adr=EVENT_LOG+(event_ptr_find*32);
000bbc  eb051044          ADD      r0,r5,r4,LSL #5
000bc0  fa1ffa80          UXTH     r10,r0
;;;750    
;;;751         lc640_read_long_ptr(lc640_adr,data);
000bc4  4669              MOV      r1,sp
000bc6  4650              MOV      r0,r10
000bc8  f7fffffe          BL       lc640_read_long_ptr
;;;752         
;;;753         if(!((data[0]=='S')&&(data[1]==dev)&&(data[2]==avar_simbol)))
000bcc  f89d0000          LDRB     r0,[sp,#0]
000bd0  2853              CMP      r0,#0x53
000bd2  d107              BNE      |L1.3044|
000bd4  f89d0001          LDRB     r0,[sp,#1]
000bd8  42b0              CMP      r0,r6
000bda  d103              BNE      |L1.3044|
000bdc  f89d0002          LDRB     r0,[sp,#2]
000be0  42b8              CMP      r0,r7
000be2  d009              BEQ      |L1.3064|
                  |L1.3044|
;;;754         	{        
;;;755         	if(event_ptr_find)event_ptr_find--;
000be4  b11c              CBZ      r4,|L1.3054|
000be6  f1a40401          SUB      r4,r4,#1
000bea  b2a4              UXTH     r4,r4
000bec  e001              B        |L1.3058|
                  |L1.3054|
;;;756         	else event_ptr_find=63;
000bee  f04f043f          MOV      r4,#0x3f
                  |L1.3058|
;;;757         	if(event_ptr_find==event_ptr)goto avar_src_hndl_end;
000bf2  455c              CMP      r4,r11
000bf4  d1e2              BNE      |L1.3004|
000bf6  e060              B        |L1.3258|
                  |L1.3064|
;;;758         	else goto avar_src_hndl_lbl1;
;;;759         	}
;;;760         else 
;;;761         	{
;;;762         	lc640_read_long_ptr(lc640_adr+16,data);
000bf8  4669              MOV      r1,sp
000bfa  f10a0010          ADD      r0,r10,#0x10
000bfe  f7fffffe          BL       lc640_read_long_ptr
;;;763         	if(!((data[0]=='A')&&(data[1]=='A')&&(data[2]=='A')&&(data[3]=='A')))
000c02  f89d0000          LDRB     r0,[sp,#0]
000c06  2841              CMP      r0,#0x41
000c08  d10b              BNE      |L1.3106|
000c0a  f89d0001          LDRB     r0,[sp,#1]
000c0e  2841              CMP      r0,#0x41
000c10  d107              BNE      |L1.3106|
000c12  f89d0002          LDRB     r0,[sp,#2]
000c16  2841              CMP      r0,#0x41
000c18  d103              BNE      |L1.3106|
000c1a  f89d0003          LDRB     r0,[sp,#3]
000c1e  2841              CMP      r0,#0x41
000c20  d009              BEQ      |L1.3126|
                  |L1.3106|
;;;764         		{        
;;;765         		if(event_ptr_find)event_ptr_find--;
000c22  b11c              CBZ      r4,|L1.3116|
000c24  f1a40401          SUB      r4,r4,#1
000c28  b2a4              UXTH     r4,r4
000c2a  e001              B        |L1.3120|
                  |L1.3116|
;;;766             		else event_ptr_find=63;
000c2c  f04f043f          MOV      r4,#0x3f
                  |L1.3120|
;;;767             		if(event_ptr_find==event_ptr)goto avar_src_hndl_end;
000c30  455c              CMP      r4,r11
000c32  d1c3              BNE      |L1.3004|
000c34  e041              B        |L1.3258|
                  |L1.3126|
;;;768         		else goto avar_src_hndl_lbl1;
;;;769         		}
;;;770    
;;;771         	}	
;;;772    
;;;773    
;;;774    	
;;;775    	data[0]=LPC_RTC->YEAR;
000c36  f8b8003c          LDRH     r0,[r8,#0x3c]
000c3a  f88d0000          STRB     r0,[sp,#0]
;;;776    	data[1]=LPC_RTC->MONTH;
000c3e  f8980038          LDRB     r0,[r8,#0x38]
000c42  f88d0001          STRB     r0,[sp,#1]
;;;777    	data[2]=LPC_RTC->DOM;
000c46  f898002c          LDRB     r0,[r8,#0x2c]
000c4a  f88d0002          STRB     r0,[sp,#2]
;;;778    	data[3]=0;
000c4e  f88d9003          STRB     r9,[sp,#3]
;;;779    	lc640_write_long_ptr(lc640_adr+16,data);
000c52  4669              MOV      r1,sp
000c54  f10a0010          ADD      r0,r10,#0x10
000c58  f7fffffe          BL       lc640_write_long_ptr
;;;780    
;;;781    	data[0]=LPC_RTC->HOUR;
000c5c  f8980028          LDRB     r0,[r8,#0x28]
000c60  f88d0000          STRB     r0,[sp,#0]
;;;782    	data[1]=LPC_RTC->MIN;
000c64  f8980024          LDRB     r0,[r8,#0x24]
000c68  f88d0001          STRB     r0,[sp,#1]
;;;783    	data[2]=LPC_RTC->SEC;
000c6c  f8980020          LDRB     r0,[r8,#0x20]
000c70  f88d0002          STRB     r0,[sp,#2]
;;;784    	data[3]=0;
000c74  f88d9003          STRB     r9,[sp,#3]
;;;785    	lc640_write_long_ptr(lc640_adr+20,data);
000c78  4669              MOV      r1,sp
000c7a  f10a0014          ADD      r0,r10,#0x14
000c7e  f7fffffe          BL       lc640_write_long_ptr
;;;786    	
;;;787    	data[0]='B';
000c82  f04f0442          MOV      r4,#0x42
000c86  f88d4000          STRB     r4,[sp,#0]
;;;788    	data[1]='B';
000c8a  f88d4001          STRB     r4,[sp,#1]
;;;789    	data[2]='B';
000c8e  f88d4002          STRB     r4,[sp,#2]
;;;790    	data[3]='B';
000c92  f88d4003          STRB     r4,[sp,#3]
;;;791    	lc640_write_long_ptr(lc640_adr+24,data);
000c96  4669              MOV      r1,sp
000c98  f10a0018          ADD      r0,r10,#0x18
000c9c  f7fffffe          BL       lc640_write_long_ptr
;;;792    	
;;;793    	data[0]='B';
000ca0  f88d4000          STRB     r4,[sp,#0]
;;;794    	data[1]='B';
000ca4  f88d4001          STRB     r4,[sp,#1]
;;;795    	data[2]='B';
000ca8  f88d4002          STRB     r4,[sp,#2]
;;;796    	data[3]='B';
000cac  f88d4003          STRB     r4,[sp,#3]
;;;797    	lc640_write_long_ptr(lc640_adr+28,data);
000cb0  4669              MOV      r1,sp
000cb2  f10a001c          ADD      r0,r10,#0x1c
000cb6  f7fffffe          BL       lc640_write_long_ptr
                  |L1.3258|
;;;798    	
;;;799    	}
;;;800    	
;;;801    avar_src_hndl_end:
;;;802    __nop();		
000cba  bf00              NOP      
                  |L1.3260|
;;;803    }
000cbc  e5db              B        |L1.2166|
;;;804    
                          ENDP

                  wrk_mem_hndl PROC
;;;805    //-----------------------------------------------
;;;806    void wrk_mem_hndl(char b)
000cbe  e92d41fc          PUSH     {r2-r8,lr}
;;;807    {
000cc2  4606              MOV      r6,r0
;;;808    char data[4];
;;;809    unsigned short event_ptr,lc640_adr/*,event_ptr_find*/,event_cnt;
;;;810    
;;;811    signed short temp_temp;
;;;812    
;;;813    if(bat[b]._Iintegr_<5) goto wrk_mem_hndl_end;
000cc4  eb060046          ADD      r0,r6,r6,LSL #1
000cc8  eb001106          ADD      r1,r0,r6,LSL #4
000ccc  4868              LDR      r0,|L1.3696|
000cce  eb000481          ADD      r4,r0,r1,LSL #2
000cd2  8be0              LDRH     r0,[r4,#0x1e]
000cd4  2805              CMP      r0,#5
000cd6  d318              BCC      |L1.3338|
;;;814    
;;;815    temp_temp=bat[b]._u_old[((bat_u_old_cnt+6)&0x07)]; 
000cd8  4866              LDR      r0,|L1.3700|
000cda  8800              LDRH     r0,[r0,#0]  ; bat_u_old_cnt
000cdc  f1000006          ADD      r0,r0,#6
000ce0  f0000007          AND      r0,r0,#7
000ce4  eb040040          ADD      r0,r4,r0,LSL #1
000ce8  8c00              LDRH     r0,[r0,#0x20]
000cea  9000              STR      r0,[sp,#0]
;;;816    
;;;817    
;;;818    event_ptr=lc640_read_int(PTR_EVENT_LOG);
000cec  f44f6760          MOV      r7,#0xe00
000cf0  4638              MOV      r0,r7
000cf2  f7fffffe          BL       lc640_read_int
;;;819    event_ptr++;	
000cf6  f1000001          ADD      r0,r0,#1
000cfa  b285              UXTH     r5,r0
;;;820    if(event_ptr>63)event_ptr=0;	
000cfc  2d3f              CMP      r5,#0x3f
000cfe  d901              BLS      |L1.3332|
000d00  f04f0500          MOV      r5,#0
                  |L1.3332|
;;;821    lc640_write_int(PTR_EVENT_LOG,event_ptr);	
000d04  b229              SXTH     r1,r5
000d06  4638              MOV      r0,r7
000d08  e0b6              B        |L1.3704|
                  |L1.3338|
000d0a  e11d              B        |L1.3912|
                  |L1.3340|
                          DCD      0x40024000
                  |L1.3344|
                          DCD      bps
                  |L1.3348|
000d14  42505320          DCB      "BPS #1 Alarm, overheat",0
000d18  23312041
000d1c  6c61726d
000d20  2c206f76
000d24  65726865
000d28  617400  
000d2b  00                DCB      0
                  |L1.3372|
000d2c  42505320          DCB      "BPS #1 Alarm, voltage is up",0
000d30  23312041
000d34  6c61726d
000d38  2c20766f
000d3c  6c746167
000d40  65206973
000d44  20757000
                  |L1.3400|
000d48  42505320          DCB      "BPS #1 Alarm, voltage is down",0
000d4c  23312041
000d50  6c61726d
000d54  2c20766f
000d58  6c746167
000d5c  65206973
000d60  20646f77
000d64  6e00    
000d66  00                DCB      0
000d67  00                DCB      0
                  |L1.3432|
000d68  42505320          DCB      "BPS #1 Alarm, connect is lost",0
000d6c  23312041
000d70  6c61726d
000d74  2c20636f
000d78  6e6e6563
000d7c  74206973
000d80  206c6f73
000d84  7400    
000d86  00                DCB      0
000d87  00                DCB      0
                  |L1.3464|
000d88  42505320          DCB      "BPS #2 Alarm, overheat",0
000d8c  23322041
000d90  6c61726d
000d94  2c206f76
000d98  65726865
000d9c  617400  
000d9f  00                DCB      0
                  |L1.3488|
000da0  42505320          DCB      "BPS #2 Alarm, voltage is up",0
000da4  23322041
000da8  6c61726d
000dac  2c20766f
000db0  6c746167
000db4  65206973
000db8  20757000
                  |L1.3516|
000dbc  42505320          DCB      "BPS #2 Alarm, voltage is down",0
000dc0  23322041
000dc4  6c61726d
000dc8  2c20766f
000dcc  6c746167
000dd0  65206973
000dd4  20646f77
000dd8  6e00    
000dda  00                DCB      0
000ddb  00                DCB      0
                  |L1.3548|
000ddc  42505320          DCB      "BPS #2 Alarm, connect is lost",0
000de0  23322041
000de4  6c61726d
000de8  2c20636f
000dec  6e6e6563
000df0  74206973
000df4  206c6f73
000df8  7400    
000dfa  00                DCB      0
000dfb  00                DCB      0
                  |L1.3580|
000dfc  42505320          DCB      "BPS #3 Alarm, overheat",0
000e00  23332041
000e04  6c61726d
000e08  2c206f76
000e0c  65726865
000e10  617400  
000e13  00                DCB      0
                  |L1.3604|
000e14  42505320          DCB      "BPS #3 Alarm, voltage is up",0
000e18  23332041
000e1c  6c61726d
000e20  2c20766f
000e24  6c746167
000e28  65206973
000e2c  20757000
                  |L1.3632|
000e30  42505320          DCB      "BPS #3 Alarm, voltage is down",0
000e34  23332041
000e38  6c61726d
000e3c  2c20766f
000e40  6c746167
000e44  65206973
000e48  20646f77
000e4c  6e00    
000e4e  00                DCB      0
000e4f  00                DCB      0
                  |L1.3664|
000e50  42505320          DCB      "BPS #3 Alarm, connect is lost",0
000e54  23332041
000e58  6c61726d
000e5c  2c20636f
000e60  6e6e6563
000e64  74206973
000e68  206c6f73
000e6c  7400    
000e6e  00                DCB      0
000e6f  00                DCB      0
                  |L1.3696|
                          DCD      bat
                  |L1.3700|
                          DCD      bat_u_old_cnt
                  |L1.3704|
000e78  f7fffffe          BL       lc640_write_int
;;;822    	
;;;823    event_cnt=lc640_read_int(CNT_EVENT_LOG);
000e7c  f6406802          MOV      r8,#0xe02
000e80  4640              MOV      r0,r8
000e82  f7fffffe          BL       lc640_read_int
000e86  b280              UXTH     r0,r0
;;;824    if(event_cnt!=63)event_cnt=event_ptr;
000e88  283f              CMP      r0,#0x3f
000e8a  d000              BEQ      |L1.3726|
000e8c  4628              MOV      r0,r5
                  |L1.3726|
;;;825    lc640_write_int(CNT_EVENT_LOG,event_cnt); 
000e8e  b201              SXTH     r1,r0
000e90  4640              MOV      r0,r8
000e92  f7fffffe          BL       lc640_write_int
;;;826    	
;;;827    lc640_adr=EVENT_LOG+(lc640_read_int(PTR_EVENT_LOG)*32);
000e96  4638              MOV      r0,r7
000e98  f7fffffe          BL       lc640_read_int
000e9c  f44f6180          MOV      r1,#0x400
000ea0  eb011040          ADD      r0,r1,r0,LSL #5
000ea4  b285              UXTH     r5,r0
;;;828    	
;;;829    data[0]='B';
000ea6  f04f0042          MOV      r0,#0x42
000eaa  f88d0004          STRB     r0,[sp,#4]
;;;830    data[1]=b; 
000eae  f88d6005          STRB     r6,[sp,#5]
;;;831    data[2]='W';
000eb2  f04f0057          MOV      r0,#0x57
000eb6  f88d0006          STRB     r0,[sp,#6]
;;;832    data[3]=0;
000eba  f04f0600          MOV      r6,#0
000ebe  f88d6007          STRB     r6,[sp,#7]
;;;833    
;;;834    lc640_write_long_ptr(lc640_adr,data);
000ec2  a901              ADD      r1,sp,#4
000ec4  4628              MOV      r0,r5
000ec6  f7fffffe          BL       lc640_write_long_ptr
;;;835    
;;;836    data[0]=*((char*)&bat[b]._Iintegr_);
000eca  7fa0              LDRB     r0,[r4,#0x1e]
000ecc  f88d0004          STRB     r0,[sp,#4]
;;;837    data[1]=*(((char*)(&bat[b]._Iintegr_))+1);
000ed0  7fe0              LDRB     r0,[r4,#0x1f]
000ed2  f88d0005          STRB     r0,[sp,#5]
;;;838    data[2]=*((char*)&temp_temp);
000ed6  f89d0000          LDRB     r0,[sp,#0]
000eda  f88d0006          STRB     r0,[sp,#6]
;;;839    data[3]=*(((char*)(&temp_temp))+1);
000ede  f89d0001          LDRB     r0,[sp,#1]
000ee2  f88d0007          STRB     r0,[sp,#7]
;;;840    lc640_write_long_ptr(lc640_adr+4,data);
000ee6  a901              ADD      r1,sp,#4
000ee8  1d28              ADDS     r0,r5,#4
000eea  f7fffffe          BL       lc640_write_long_ptr
;;;841    
;;;842    lc640_write_long_ptr(lc640_adr+8,(char*)&bat[b]._wrk_date[0]);
000eee  f1040134          ADD      r1,r4,#0x34
000ef2  f1050008          ADD      r0,r5,#8
000ef6  f7fffffe          BL       lc640_write_long_ptr
;;;843    	
;;;844    lc640_write_long_ptr(lc640_adr+12,(char*)&bat[b]._wrk_date[1]);
000efa  f1040138          ADD      r1,r4,#0x38
000efe  f105000c          ADD      r0,r5,#0xc
000f02  f7fffffe          BL       lc640_write_long_ptr
;;;845    
;;;846    data[0]=LPC_RTC->YEAR;
000f06  4cff              LDR      r4,|L1.4868|
000f08  8ba0              LDRH     r0,[r4,#0x1c]
000f0a  f88d0004          STRB     r0,[sp,#4]
;;;847    data[1]=LPC_RTC->MONTH;
000f0e  7e20              LDRB     r0,[r4,#0x18]
000f10  f88d0005          STRB     r0,[sp,#5]
;;;848    data[2]=LPC_RTC->DOM;
000f14  7b20              LDRB     r0,[r4,#0xc]
000f16  f88d0006          STRB     r0,[sp,#6]
;;;849    data[3]=0;
000f1a  f88d6007          STRB     r6,[sp,#7]
;;;850    lc640_write_long_ptr(lc640_adr+16,data);
000f1e  a901              ADD      r1,sp,#4
000f20  f1050010          ADD      r0,r5,#0x10
000f24  f7fffffe          BL       lc640_write_long_ptr
;;;851    
;;;852    data[0]=LPC_RTC->HOUR;
000f28  7a20              LDRB     r0,[r4,#8]
000f2a  f88d0004          STRB     r0,[sp,#4]
;;;853    data[1]=LPC_RTC->MIN;
000f2e  7920              LDRB     r0,[r4,#4]
000f30  f88d0005          STRB     r0,[sp,#5]
;;;854    data[2]=LPC_RTC->SEC;
000f34  7820              LDRB     r0,[r4,#0]
000f36  f88d0006          STRB     r0,[sp,#6]
;;;855    data[3]=0;
000f3a  f88d6007          STRB     r6,[sp,#7]
;;;856    lc640_write_long_ptr(lc640_adr+20,data);
000f3e  a901              ADD      r1,sp,#4
000f40  f1050014          ADD      r0,r5,#0x14
000f44  f7fffffe          BL       lc640_write_long_ptr
                  |L1.3912|
;;;857    	
;;;858    
;;;859    
;;;860    	
;;;861    wrk_mem_hndl_end:	
;;;862    __nop();
000f48  bf00              NOP      
;;;863    }  
000f4a  e8bd81fc          POP      {r2-r8,pc}
;;;864    
                          ENDP

                  avar_bat_ips_hndl PROC
;;;866    //-----------------------------------------------
;;;867    void avar_bat_ips_hndl(char in)
000f4e  e92d4ff8          PUSH     {r3-r11,lr}
;;;868    {
000f52  4602              MOV      r2,r0
;;;869    char data[4];
;;;870    unsigned short event_ptr,lc640_adr,event_ptr_find,event_cnt;
;;;871    
;;;872    if(in==1)
;;;873    	{
;;;874    	bat_ips._av|=1;
000f54  48ec              LDR      r0,|L1.4872|
;;;875        ips_bat_av_stat=1;
000f56  4ced              LDR      r4,|L1.4876|
;;;876    	ips_bat_av_vzvod=1;
000f58  4bed              LDR      r3,|L1.4880|
;;;877    
;;;878    	event_ptr=lc640_read_int(PTR_EVENT_LOG);
;;;879    	event_ptr++;	
;;;880    	if(event_ptr>63)event_ptr=0;	
;;;881    	lc640_write_int(PTR_EVENT_LOG,event_ptr);	
;;;882    	
;;;883    	event_cnt=lc640_read_int(CNT_EVENT_LOG);
;;;884    	if(event_cnt!=63)event_cnt=event_ptr;
;;;885    	lc640_write_int(CNT_EVENT_LOG,event_cnt); 
;;;886    	
;;;887    	lc640_adr=EVENT_LOG+(lc640_read_int(PTR_EVENT_LOG)*32);
;;;888    	
;;;889    	data[0]='B';
;;;890    	data[1]=0;
;;;891    	data[2]='C';
;;;892    	data[3]=0;
;;;893    	lc640_write_long_ptr(lc640_adr,data);
;;;894    
;;;895    	data[0]=0;
;;;896    	data[1]=0;
;;;897    	data[2]=0;
;;;898    	data[3]=0;
;;;899    	lc640_write_long_ptr(lc640_adr+4,data);
;;;900    
;;;901    	data[0]=LPC_RTC->YEAR;
000f5a  f8df83b8          LDR      r8,|L1.4884|
000f5e  f890103d          LDRB     r1,[r0,#0x3d]         ;874
000f62  f04f0742          MOV      r7,#0x42              ;889
000f66  f44f6560          MOV      r5,#0xe00             ;878
000f6a  f04f0900          MOV      r9,#0                 ;880
000f6e  f44f6a80          MOV      r10,#0x400            ;887
000f72  2a01              CMP      r2,#1                 ;872
000f74  d002              BEQ      |L1.3964|
;;;902    	data[1]=LPC_RTC->MONTH;
;;;903    	data[2]=LPC_RTC->DOM;
;;;904    	data[3]=0;
;;;905    	lc640_write_long_ptr(lc640_adr+8,data);
;;;906    
;;;907    	data[0]=LPC_RTC->HOUR;
;;;908    	data[1]=LPC_RTC->MIN;
;;;909    	data[2]=LPC_RTC->SEC;
;;;910    	data[3]=0;
;;;911    	lc640_write_long_ptr(lc640_adr+12,data);
;;;912    	
;;;913    	data[0]='A';
;;;914    	data[1]='A';
;;;915    	data[2]='A';
;;;916    	data[3]='A';
;;;917    	lc640_write_long_ptr(lc640_adr+16,data);
;;;918    	
;;;919    	data[0]='A';
;;;920    	data[1]='A';
;;;921    	data[2]='A';
;;;922    	data[3]='A';
;;;923    	lc640_write_long_ptr(lc640_adr+20,data);
;;;924    	
;;;925    	data[0]='A';
;;;926    	data[1]='A';
;;;927    	data[2]='A';
;;;928    	data[3]='A';
;;;929    	lc640_write_long_ptr(lc640_adr+24,data);
;;;930    	
;;;931    	data[0]='A';
;;;932    	data[1]='A';
;;;933    	data[2]='A';
;;;934    	data[3]='A';
;;;935    	lc640_write_long_ptr(lc640_adr+28,data);
;;;936    					
;;;937    	snmp_trap_send("BAT 1 Alarm, lost",5,1,1);
;;;938    		
;;;939    	}
;;;940    
;;;941    else if(in==0)
000f76  2a00              CMP      r2,#0
000f78  d07e              BEQ      |L1.4216|
000f7a  e129              B        |L1.4560|
                  |L1.3964|
000f7c  f0410101          ORR      r1,r1,#1              ;874
000f80  f880103d          STRB     r1,[r0,#0x3d]         ;874
000f84  f04f0001          MOV      r0,#1                 ;875
000f88  7020              STRB     r0,[r4,#0]            ;875
000f8a  7018              STRB     r0,[r3,#0]            ;876
000f8c  4628              MOV      r0,r5                 ;878
000f8e  f7fffffe          BL       lc640_read_int
000f92  f1000001          ADD      r0,r0,#1              ;879
000f96  b284              UXTH     r4,r0                 ;879
000f98  2c3f              CMP      r4,#0x3f              ;880
000f9a  d901              BLS      |L1.4000|
000f9c  f04f0400          MOV      r4,#0                 ;880
                  |L1.4000|
000fa0  b221              SXTH     r1,r4                 ;881
000fa2  4628              MOV      r0,r5                 ;881
000fa4  f7fffffe          BL       lc640_write_int
000fa8  f6406602          MOV      r6,#0xe02             ;883
000fac  4630              MOV      r0,r6                 ;883
000fae  f7fffffe          BL       lc640_read_int
000fb2  b281              UXTH     r1,r0                 ;883
000fb4  293f              CMP      r1,#0x3f              ;884
000fb6  d000              BEQ      |L1.4026|
000fb8  4621              MOV      r1,r4                 ;884
                  |L1.4026|
000fba  b209              SXTH     r1,r1                 ;885
000fbc  4630              MOV      r0,r6                 ;885
000fbe  f7fffffe          BL       lc640_write_int
000fc2  4628              MOV      r0,r5                 ;887
000fc4  f7fffffe          BL       lc640_read_int
000fc8  eb0a1040          ADD      r0,r10,r0,LSL #5      ;887
000fcc  b284              UXTH     r4,r0                 ;887
000fce  f88d7000          STRB     r7,[sp,#0]            ;889
000fd2  f88d9001          STRB     r9,[sp,#1]            ;890
000fd6  f04f0043          MOV      r0,#0x43              ;891
000fda  f88d0002          STRB     r0,[sp,#2]            ;891
000fde  f88d9003          STRB     r9,[sp,#3]            ;892
000fe2  4669              MOV      r1,sp                 ;893
000fe4  4620              MOV      r0,r4                 ;893
000fe6  f7fffffe          BL       lc640_write_long_ptr
000fea  f8cd9000          STR      r9,[sp,#0]            ;898
000fee  4669              MOV      r1,sp                 ;899
000ff0  1d20              ADDS     r0,r4,#4              ;899
000ff2  f7fffffe          BL       lc640_write_long_ptr
000ff6  f8b8003c          LDRH     r0,[r8,#0x3c]         ;901
000ffa  f88d0000          STRB     r0,[sp,#0]            ;901
000ffe  f8980038          LDRB     r0,[r8,#0x38]         ;902
001002  f88d0001          STRB     r0,[sp,#1]            ;902
001006  f898002c          LDRB     r0,[r8,#0x2c]         ;903
00100a  f88d0002          STRB     r0,[sp,#2]            ;903
00100e  f88d9003          STRB     r9,[sp,#3]            ;904
001012  4669              MOV      r1,sp                 ;905
001014  f1040008          ADD      r0,r4,#8              ;905
001018  f7fffffe          BL       lc640_write_long_ptr
00101c  f8980028          LDRB     r0,[r8,#0x28]         ;907
001020  f88d0000          STRB     r0,[sp,#0]            ;907
001024  f8980024          LDRB     r0,[r8,#0x24]         ;908
001028  f88d0001          STRB     r0,[sp,#1]            ;908
00102c  f8980020          LDRB     r0,[r8,#0x20]         ;909
001030  f88d0002          STRB     r0,[sp,#2]            ;909
001034  f88d9003          STRB     r9,[sp,#3]            ;910
001038  4669              MOV      r1,sp                 ;911
00103a  f104000c          ADD      r0,r4,#0xc            ;911
00103e  f7fffffe          BL       lc640_write_long_ptr
001042  f04f0541          MOV      r5,#0x41              ;913
001046  f88d5000          STRB     r5,[sp,#0]            ;913
00104a  f88d5001          STRB     r5,[sp,#1]            ;914
00104e  f88d5002          STRB     r5,[sp,#2]            ;915
001052  f88d5003          STRB     r5,[sp,#3]            ;916
001056  4669              MOV      r1,sp                 ;917
001058  f1040010          ADD      r0,r4,#0x10           ;917
00105c  f7fffffe          BL       lc640_write_long_ptr
001060  f88d5000          STRB     r5,[sp,#0]            ;919
001064  f88d5001          STRB     r5,[sp,#1]            ;920
001068  f88d5002          STRB     r5,[sp,#2]            ;921
00106c  f88d5003          STRB     r5,[sp,#3]            ;922
001070  4669              MOV      r1,sp                 ;923
001072  f1040014          ADD      r0,r4,#0x14           ;923
001076  e000              B        |L1.4218|
                  |L1.4216|
001078  e022              B        |L1.4288|
                  |L1.4218|
00107a  f7fffffe          BL       lc640_write_long_ptr
00107e  f88d5000          STRB     r5,[sp,#0]            ;925
001082  f88d5001          STRB     r5,[sp,#1]            ;926
001086  f88d5002          STRB     r5,[sp,#2]            ;927
00108a  f88d5003          STRB     r5,[sp,#3]            ;928
00108e  4669              MOV      r1,sp                 ;929
001090  f1040018          ADD      r0,r4,#0x18           ;929
001094  f7fffffe          BL       lc640_write_long_ptr
001098  f88d5000          STRB     r5,[sp,#0]            ;931
00109c  f88d5001          STRB     r5,[sp,#1]            ;932
0010a0  f88d5002          STRB     r5,[sp,#2]            ;933
0010a4  f88d5003          STRB     r5,[sp,#3]            ;934
0010a8  4669              MOV      r1,sp                 ;935
0010aa  f104001c          ADD      r0,r4,#0x1c           ;935
0010ae  f7fffffe          BL       lc640_write_long_ptr
0010b2  2301              MOVS     r3,#1                 ;937
0010b4  461a              MOV      r2,r3                 ;937
0010b6  2105              MOVS     r1,#5                 ;937
0010b8  a097              ADR      r0,|L1.4888|
0010ba  f7fffffe          BL       snmp_trap_send
0010be  e087              B        |L1.4560|
                  |L1.4288|
;;;942    	{
;;;943    	bat_ips._av&=~1;
0010c0  f0210101          BIC      r1,r1,#1
0010c4  f880103d          STRB     r1,[r0,#0x3d]
;;;944    	ips_bat_av_stat=0;
0010c8  f8849000          STRB     r9,[r4,#0]
;;;945    	ips_bat_av_vzvod=0;
0010cc  f8839000          STRB     r9,[r3,#0]
;;;946         
;;;947    	event_ptr=lc640_read_int(PTR_EVENT_LOG);
0010d0  4628              MOV      r0,r5
0010d2  f7fffffe          BL       lc640_read_int
0010d6  b286              UXTH     r6,r0
;;;948    	event_ptr_find=event_ptr;
0010d8  4634              MOV      r4,r6
                  |L1.4314|
;;;949    	
;;;950    avar_bat_ips_hndl_lbl1: 
;;;951    
;;;952    	lc640_adr=EVENT_LOG+(event_ptr_find*32);
0010da  eb0a1044          ADD      r0,r10,r4,LSL #5
0010de  b285              UXTH     r5,r0
;;;953    
;;;954         lc640_read_long_ptr(lc640_adr,data);
0010e0  4669              MOV      r1,sp
0010e2  4628              MOV      r0,r5
0010e4  f7fffffe          BL       lc640_read_long_ptr
;;;955         
;;;956         if(!((data[0]=='B')&&(data[1]==0)&&(data[2]=='C')))
0010e8  f89d0000          LDRB     r0,[sp,#0]
0010ec  2842              CMP      r0,#0x42
0010ee  d106              BNE      |L1.4350|
0010f0  f89d0001          LDRB     r0,[sp,#1]
0010f4  b918              CBNZ     r0,|L1.4350|
0010f6  f89d0002          LDRB     r0,[sp,#2]
0010fa  2843              CMP      r0,#0x43
0010fc  d009              BEQ      |L1.4370|
                  |L1.4350|
;;;957         	{        
;;;958         	if(event_ptr_find)event_ptr_find--;
0010fe  b11c              CBZ      r4,|L1.4360|
001100  f1a40401          SUB      r4,r4,#1
001104  b2a4              UXTH     r4,r4
001106  e001              B        |L1.4364|
                  |L1.4360|
;;;959         	else event_ptr_find=63;
001108  f04f043f          MOV      r4,#0x3f
                  |L1.4364|
;;;960         	if(event_ptr_find==event_ptr)goto avar_bat_ips_hndl_end;
00110c  42b4              CMP      r4,r6
00110e  d1e4              BNE      |L1.4314|
001110  e05e              B        |L1.4560|
                  |L1.4370|
;;;961         	else goto avar_bat_ips_hndl_lbl1;
;;;962         	}
;;;963         else 
;;;964         	{
;;;965         	lc640_read_long_ptr(lc640_adr+16,data);
001112  4669              MOV      r1,sp
001114  f1050010          ADD      r0,r5,#0x10
001118  f7fffffe          BL       lc640_read_long_ptr
;;;966         	if(!((data[0]=='A')&&(data[1]=='A')&&(data[2]=='A')&&(data[3]=='A')))
00111c  f89d0000          LDRB     r0,[sp,#0]
001120  2841              CMP      r0,#0x41
001122  d10b              BNE      |L1.4412|
001124  f89d0001          LDRB     r0,[sp,#1]
001128  2841              CMP      r0,#0x41
00112a  d107              BNE      |L1.4412|
00112c  f89d0002          LDRB     r0,[sp,#2]
001130  2841              CMP      r0,#0x41
001132  d103              BNE      |L1.4412|
001134  f89d0003          LDRB     r0,[sp,#3]
001138  2841              CMP      r0,#0x41
00113a  d009              BEQ      |L1.4432|
                  |L1.4412|
;;;967         		{        
;;;968         		if(event_ptr_find)event_ptr_find--;
00113c  b11c              CBZ      r4,|L1.4422|
00113e  f1a40401          SUB      r4,r4,#1
001142  b2a4              UXTH     r4,r4
001144  e001              B        |L1.4426|
                  |L1.4422|
;;;969             		else event_ptr_find=63;
001146  f04f043f          MOV      r4,#0x3f
                  |L1.4426|
;;;970             	    	if(event_ptr_find==event_ptr)goto avar_bat_ips_hndl_end;
00114a  42b4              CMP      r4,r6
00114c  d1c5              BNE      |L1.4314|
00114e  e03f              B        |L1.4560|
                  |L1.4432|
;;;971         		else goto avar_bat_ips_hndl_lbl1;
;;;972         		}
;;;973    
;;;974         	}
;;;975         		
;;;976    	data[0]=LPC_RTC->YEAR;
001150  f8b8003c          LDRH     r0,[r8,#0x3c]
001154  f88d0000          STRB     r0,[sp,#0]
;;;977    	data[1]=LPC_RTC->MONTH;
001158  f8980038          LDRB     r0,[r8,#0x38]
00115c  f88d0001          STRB     r0,[sp,#1]
;;;978    	data[2]=LPC_RTC->DOM;
001160  f898002c          LDRB     r0,[r8,#0x2c]
001164  f88d0002          STRB     r0,[sp,#2]
;;;979    	data[3]=0;
001168  f88d9003          STRB     r9,[sp,#3]
;;;980    	lc640_write_long_ptr(lc640_adr+16,data);
00116c  4669              MOV      r1,sp
00116e  f1050010          ADD      r0,r5,#0x10
001172  f7fffffe          BL       lc640_write_long_ptr
;;;981    
;;;982    	data[0]=LPC_RTC->HOUR;
001176  f8980028          LDRB     r0,[r8,#0x28]
00117a  f88d0000          STRB     r0,[sp,#0]
;;;983    	data[1]=LPC_RTC->MIN;
00117e  f8980024          LDRB     r0,[r8,#0x24]
001182  f88d0001          STRB     r0,[sp,#1]
;;;984    	data[2]=LPC_RTC->SEC;
001186  f8980020          LDRB     r0,[r8,#0x20]
00118a  f88d0002          STRB     r0,[sp,#2]
;;;985    	data[3]=0;
00118e  f88d9003          STRB     r9,[sp,#3]
;;;986    	lc640_write_long_ptr(lc640_adr+20,data);
001192  4669              MOV      r1,sp
001194  f1050014          ADD      r0,r5,#0x14
001198  f7fffffe          BL       lc640_write_long_ptr
;;;987    	
;;;988    	data[0]='B';
00119c  f88d7000          STRB     r7,[sp,#0]
;;;989    	data[1]='B';
0011a0  f88d7001          STRB     r7,[sp,#1]
;;;990    	data[2]='B';
0011a4  f88d7002          STRB     r7,[sp,#2]
;;;991    	data[3]='B';
0011a8  f88d7003          STRB     r7,[sp,#3]
;;;992    	lc640_write_long_ptr(lc640_adr+24,data);
0011ac  4669              MOV      r1,sp
0011ae  f1050018          ADD      r0,r5,#0x18
0011b2  f7fffffe          BL       lc640_write_long_ptr
;;;993    	
;;;994    	data[0]='B';
0011b6  f88d7000          STRB     r7,[sp,#0]
;;;995    	data[1]='B';
0011ba  f88d7001          STRB     r7,[sp,#1]
;;;996    	data[2]='B';
0011be  f88d7002          STRB     r7,[sp,#2]
;;;997    	data[3]='B';
0011c2  f88d7003          STRB     r7,[sp,#3]
;;;998    	lc640_write_long_ptr(lc640_adr+28,data);
0011c6  4669              MOV      r1,sp
0011c8  f105001c          ADD      r0,r5,#0x1c
0011cc  f7fffffe          BL       lc640_write_long_ptr
                  |L1.4560|
;;;999    	
;;;1000   
;;;1001   	
;;;1002   	}
;;;1003   	
;;;1004   avar_bat_ips_hndl_end:
;;;1005   __nop();		
0011d0  bf00              NOP      
                  |L1.4562|
;;;1006   }
0011d2  e573              B        |L1.3260|
;;;1007   
                          ENDP

                  avar_bat_hndl PROC
;;;1010   //-----------------------------------------------
;;;1011   void avar_bat_hndl(char b, char in)
0011d4  e92d4ff8          PUSH     {r3-r11,lr}
;;;1012   {
0011d8  4606              MOV      r6,r0
;;;1013   char data[4];
;;;1014   unsigned short event_ptr,lc640_adr,event_ptr_find,event_cnt;
;;;1015   
;;;1016   if(in==1)
;;;1017   	{
;;;1018   	bat[b]._av|=1;
0011da  4854              LDR      r0,|L1.4908|
0011dc  eb060246          ADD      r2,r6,r6,LSL #1
;;;1019       
;;;1020   	event_ptr=lc640_read_int(PTR_EVENT_LOG);
;;;1021   	event_ptr++;	
;;;1022   	if(event_ptr>63)event_ptr=0;	
;;;1023   	lc640_write_int(PTR_EVENT_LOG,event_ptr);	
;;;1024   	
;;;1025        event_cnt=lc640_read_int(CNT_EVENT_LOG);
;;;1026   	if(event_cnt!=63)event_cnt=event_ptr;
;;;1027   	lc640_write_int(CNT_EVENT_LOG,event_cnt); 
;;;1028   	
;;;1029   	lc640_adr=EVENT_LOG+(lc640_read_int(PTR_EVENT_LOG)*32);
;;;1030   	
;;;1031   	data[0]='B';
;;;1032   	data[1]=b;
;;;1033   	data[2]='C';
;;;1034   	data[3]=0;
;;;1035   	lc640_write_long_ptr(lc640_adr,data);
;;;1036   
;;;1037   	data[0]=0;
;;;1038   	data[1]=0;
;;;1039   	data[2]=0;
;;;1040   	data[3]=0;
;;;1041   	lc640_write_long_ptr(lc640_adr+4,data);
;;;1042   
;;;1043   	data[0]=LPC_RTC->YEAR;
0011e0  f8df8130          LDR      r8,|L1.4884|
0011e4  eb021206          ADD      r2,r2,r6,LSL #4       ;1018
0011e8  f04f0a00          MOV      r10,#0                ;1022
0011ec  f04f0942          MOV      r9,#0x42              ;1031
0011f0  f44f6560          MOV      r5,#0xe00             ;1020
0011f4  f44f6b80          MOV      r11,#0x400            ;1029
0011f8  eb000082          ADD      r0,r0,r2,LSL #2       ;1018
0011fc  2901              CMP      r1,#1                 ;1016
0011fe  d002              BEQ      |L1.4614|
;;;1044   	data[1]=LPC_RTC->MONTH;
;;;1045   	data[2]=LPC_RTC->DOM;
;;;1046   	data[3]=0;
;;;1047   	lc640_write_long_ptr(lc640_adr+8,data);
;;;1048   
;;;1049   	data[0]=LPC_RTC->HOUR;
;;;1050   	data[1]=LPC_RTC->MIN;
;;;1051   	data[2]=LPC_RTC->SEC;
;;;1052   	data[3]=0;
;;;1053   	lc640_write_long_ptr(lc640_adr+12,data);
;;;1054   	
;;;1055   	data[0]='A';
;;;1056   	data[1]='A';
;;;1057   	data[2]='A';
;;;1058   	data[3]='A';
;;;1059   	lc640_write_long_ptr(lc640_adr+16,data);
;;;1060   	
;;;1061   	data[0]='A';
;;;1062   	data[1]='A';
;;;1063   	data[2]='A';
;;;1064   	data[3]='A';
;;;1065   	lc640_write_long_ptr(lc640_adr+20,data);
;;;1066   	
;;;1067   	data[0]='A';
;;;1068   	data[1]='A';
;;;1069   	data[2]='A';
;;;1070   	data[3]='A';
;;;1071   	lc640_write_long_ptr(lc640_adr+24,data);
;;;1072   	
;;;1073   	data[0]='A';
;;;1074   	data[1]='A';
;;;1075   	data[2]='A';
;;;1076   	data[3]='A';
;;;1077   	lc640_write_long_ptr(lc640_adr+28,data);
;;;1078   					
;;;1079   	if(b==0)
;;;1080   		{
;;;1081   		snmp_trap_send("BAT #1 Alarm, lost",5,1,1);
;;;1082   		}
;;;1083   	else if(b==1)
;;;1084   		{
;;;1085   		snmp_trap_send("BAT #2 Alarm, lost",5,2,1);
;;;1086   		} 
;;;1087   			
;;;1088   	}
;;;1089   
;;;1090   else if(in==0)
001200  2900              CMP      r1,#0
001202  d07d              BEQ      |L1.4864|
001204  e146              B        |L1.5268|
                  |L1.4614|
001206  f8101f3d          LDRB     r1,[r0,#0x3d]!        ;1018
00120a  f0410101          ORR      r1,r1,#1              ;1018
00120e  7001              STRB     r1,[r0,#0]            ;1018
001210  4628              MOV      r0,r5                 ;1020
001212  f7fffffe          BL       lc640_read_int
001216  f1000001          ADD      r0,r0,#1              ;1021
00121a  b284              UXTH     r4,r0                 ;1021
00121c  2c3f              CMP      r4,#0x3f              ;1022
00121e  d901              BLS      |L1.4644|
001220  f04f0400          MOV      r4,#0                 ;1022
                  |L1.4644|
001224  b221              SXTH     r1,r4                 ;1023
001226  4628              MOV      r0,r5                 ;1023
001228  f7fffffe          BL       lc640_write_int
00122c  f6406702          MOV      r7,#0xe02             ;1025
001230  4638              MOV      r0,r7                 ;1025
001232  f7fffffe          BL       lc640_read_int
001236  b280              UXTH     r0,r0                 ;1025
001238  283f              CMP      r0,#0x3f              ;1026
00123a  d000              BEQ      |L1.4670|
00123c  4620              MOV      r0,r4                 ;1026
                  |L1.4670|
00123e  b201              SXTH     r1,r0                 ;1027
001240  4638              MOV      r0,r7                 ;1027
001242  f7fffffe          BL       lc640_write_int
001246  4628              MOV      r0,r5                 ;1029
001248  f7fffffe          BL       lc640_read_int
00124c  eb0b1040          ADD      r0,r11,r0,LSL #5      ;1029
001250  b284              UXTH     r4,r0                 ;1029
001252  f88d9000          STRB     r9,[sp,#0]            ;1031
001256  f88d6001          STRB     r6,[sp,#1]            ;1032
00125a  f04f0043          MOV      r0,#0x43              ;1033
00125e  f88d0002          STRB     r0,[sp,#2]            ;1033
001262  f88da003          STRB     r10,[sp,#3]           ;1034
001266  4669              MOV      r1,sp                 ;1035
001268  4620              MOV      r0,r4                 ;1035
00126a  f7fffffe          BL       lc640_write_long_ptr
00126e  f8cda000          STR      r10,[sp,#0]           ;1040
001272  4669              MOV      r1,sp                 ;1041
001274  1d20              ADDS     r0,r4,#4              ;1041
001276  f7fffffe          BL       lc640_write_long_ptr
00127a  f8b8003c          LDRH     r0,[r8,#0x3c]         ;1043
00127e  f88d0000          STRB     r0,[sp,#0]            ;1043
001282  f8980038          LDRB     r0,[r8,#0x38]         ;1044
001286  f88d0001          STRB     r0,[sp,#1]            ;1044
00128a  f898002c          LDRB     r0,[r8,#0x2c]         ;1045
00128e  f88d0002          STRB     r0,[sp,#2]            ;1045
001292  f88da003          STRB     r10,[sp,#3]           ;1046
001296  4669              MOV      r1,sp                 ;1047
001298  f1040008          ADD      r0,r4,#8              ;1047
00129c  f7fffffe          BL       lc640_write_long_ptr
0012a0  f8980028          LDRB     r0,[r8,#0x28]         ;1049
0012a4  f88d0000          STRB     r0,[sp,#0]            ;1049
0012a8  f8980024          LDRB     r0,[r8,#0x24]         ;1050
0012ac  f88d0001          STRB     r0,[sp,#1]            ;1050
0012b0  f8980020          LDRB     r0,[r8,#0x20]         ;1051
0012b4  f88d0002          STRB     r0,[sp,#2]            ;1051
0012b8  f88da003          STRB     r10,[sp,#3]           ;1052
0012bc  4669              MOV      r1,sp                 ;1053
0012be  f104000c          ADD      r0,r4,#0xc            ;1053
0012c2  f7fffffe          BL       lc640_write_long_ptr
0012c6  f04f0541          MOV      r5,#0x41              ;1055
0012ca  f88d5000          STRB     r5,[sp,#0]            ;1055
0012ce  f88d5001          STRB     r5,[sp,#1]            ;1056
0012d2  f88d5002          STRB     r5,[sp,#2]            ;1057
0012d6  f88d5003          STRB     r5,[sp,#3]            ;1058
0012da  4669              MOV      r1,sp                 ;1059
0012dc  f1040010          ADD      r0,r4,#0x10           ;1059
0012e0  f7fffffe          BL       lc640_write_long_ptr
0012e4  f88d5000          STRB     r5,[sp,#0]            ;1061
0012e8  f88d5001          STRB     r5,[sp,#1]            ;1062
0012ec  f88d5002          STRB     r5,[sp,#2]            ;1063
0012f0  f88d5003          STRB     r5,[sp,#3]            ;1064
0012f4  4669              MOV      r1,sp                 ;1065
0012f6  f1040014          ADD      r0,r4,#0x14           ;1065
0012fa  f7fffffe          BL       lc640_write_long_ptr
0012fe  e017              B        |L1.4912|
                  |L1.4864|
001300  e042              B        |L1.5000|
001302  0000              DCW      0x0000
                  |L1.4868|
                          DCD      0x40024020
                  |L1.4872|
                          DCD      bat_ips
                  |L1.4876|
                          DCD      ips_bat_av_stat
                  |L1.4880|
                          DCD      ips_bat_av_vzvod
                  |L1.4884|
                          DCD      0x40024000
                  |L1.4888|
001318  42415420          DCB      "BAT ",185,"1 Alarm, lost",0
00131c  b9312041
001320  6c61726d
001324  2c206c6f
001328  737400  
00132b  00                DCB      0
                  |L1.4908|
                          DCD      bat
                  |L1.4912|
001330  f88d5000          STRB     r5,[sp,#0]            ;1067
001334  f88d5001          STRB     r5,[sp,#1]            ;1068
001338  f88d5002          STRB     r5,[sp,#2]            ;1069
00133c  f88d5003          STRB     r5,[sp,#3]            ;1070
001340  4669              MOV      r1,sp                 ;1071
001342  f1040018          ADD      r0,r4,#0x18           ;1071
001346  f7fffffe          BL       lc640_write_long_ptr
00134a  f88d5000          STRB     r5,[sp,#0]            ;1073
00134e  f88d5001          STRB     r5,[sp,#1]            ;1074
001352  f88d5002          STRB     r5,[sp,#2]            ;1075
001356  f88d5003          STRB     r5,[sp,#3]            ;1076
00135a  4669              MOV      r1,sp                 ;1077
00135c  f104001c          ADD      r0,r4,#0x1c           ;1077
001360  f7fffffe          BL       lc640_write_long_ptr
001364  b116              CBZ      r6,|L1.4972|
001366  2e01              CMP      r6,#1                 ;1083
001368  d007              BEQ      |L1.4986|
00136a  e093              B        |L1.5268|
                  |L1.4972|
00136c  2301              MOVS     r3,#1                 ;1081
00136e  461a              MOV      r2,r3                 ;1081
001370  2105              MOVS     r1,#5                 ;1081
001372  a0fe              ADR      r0,|L1.5996|
001374  f7fffffe          BL       snmp_trap_send
001378  e08c              B        |L1.5268|
                  |L1.4986|
00137a  2301              MOVS     r3,#1                 ;1085
00137c  2202              MOVS     r2,#2                 ;1085
00137e  2105              MOVS     r1,#5                 ;1085
001380  a0ff              ADR      r0,|L1.6016|
001382  f7fffffe          BL       snmp_trap_send
001386  e085              B        |L1.5268|
                  |L1.5000|
;;;1091   	{
;;;1092   	bat[b]._av&=~1;
001388  f8101f3d          LDRB     r1,[r0,#0x3d]!
00138c  f0210101          BIC      r1,r1,#1
001390  7001              STRB     r1,[r0,#0]
;;;1093   
;;;1094        event_ptr=lc640_read_int(PTR_EVENT_LOG);
001392  4628              MOV      r0,r5
001394  f7fffffe          BL       lc640_read_int
001398  b287              UXTH     r7,r0
;;;1095   	event_ptr_find=event_ptr;
00139a  463c              MOV      r4,r7
                  |L1.5020|
;;;1096   	
;;;1097   avar_bat_hndl_lbl1: 
;;;1098   
;;;1099   	lc640_adr=EVENT_LOG+(event_ptr_find*32);
00139c  eb0b1044          ADD      r0,r11,r4,LSL #5
0013a0  b285              UXTH     r5,r0
;;;1100   
;;;1101        lc640_read_long_ptr(lc640_adr,data);
0013a2  4669              MOV      r1,sp
0013a4  4628              MOV      r0,r5
0013a6  f7fffffe          BL       lc640_read_long_ptr
;;;1102        
;;;1103        if(!((data[0]=='B')&&(data[1]==b)&&(data[2]=='C')))
0013aa  f89d0000          LDRB     r0,[sp,#0]
0013ae  2842              CMP      r0,#0x42
0013b0  d107              BNE      |L1.5058|
0013b2  f89d0001          LDRB     r0,[sp,#1]
0013b6  42b0              CMP      r0,r6
0013b8  d103              BNE      |L1.5058|
0013ba  f89d0002          LDRB     r0,[sp,#2]
0013be  2843              CMP      r0,#0x43
0013c0  d009              BEQ      |L1.5078|
                  |L1.5058|
;;;1104        	{        
;;;1105        	if(event_ptr_find)event_ptr_find--;
0013c2  b11c              CBZ      r4,|L1.5068|
0013c4  f1a40401          SUB      r4,r4,#1
0013c8  b2a4              UXTH     r4,r4
0013ca  e001              B        |L1.5072|
                  |L1.5068|
;;;1106        	else event_ptr_find=63;
0013cc  f04f043f          MOV      r4,#0x3f
                  |L1.5072|
;;;1107        	if(event_ptr_find==event_ptr)goto avar_bat_hndl_end;
0013d0  42bc              CMP      r4,r7
0013d2  d1e3              BNE      |L1.5020|
0013d4  e05e              B        |L1.5268|
                  |L1.5078|
;;;1108        	else goto avar_bat_hndl_lbl1;
;;;1109        	}
;;;1110        else 
;;;1111        	{
;;;1112        	lc640_read_long_ptr(lc640_adr+16,data);
0013d6  4669              MOV      r1,sp
0013d8  f1050010          ADD      r0,r5,#0x10
0013dc  f7fffffe          BL       lc640_read_long_ptr
;;;1113        	if(!((data[0]=='A')&&(data[1]=='A')&&(data[2]=='A')&&(data[3]=='A')))
0013e0  f89d0000          LDRB     r0,[sp,#0]
0013e4  2841              CMP      r0,#0x41
0013e6  d10b              BNE      |L1.5120|
0013e8  f89d0001          LDRB     r0,[sp,#1]
0013ec  2841              CMP      r0,#0x41
0013ee  d107              BNE      |L1.5120|
0013f0  f89d0002          LDRB     r0,[sp,#2]
0013f4  2841              CMP      r0,#0x41
0013f6  d103              BNE      |L1.5120|
0013f8  f89d0003          LDRB     r0,[sp,#3]
0013fc  2841              CMP      r0,#0x41
0013fe  d009              BEQ      |L1.5140|
                  |L1.5120|
;;;1114        		{        
;;;1115        		if(event_ptr_find)event_ptr_find--;
001400  b11c              CBZ      r4,|L1.5130|
001402  f1a40401          SUB      r4,r4,#1
001406  b2a4              UXTH     r4,r4
001408  e001              B        |L1.5134|
                  |L1.5130|
;;;1116            		else event_ptr_find=63;
00140a  f04f043f          MOV      r4,#0x3f
                  |L1.5134|
;;;1117            	    	if(event_ptr_find==event_ptr)goto avar_bat_hndl_end;
00140e  42bc              CMP      r4,r7
001410  d1c4              BNE      |L1.5020|
001412  e03f              B        |L1.5268|
                  |L1.5140|
;;;1118        		else goto avar_bat_hndl_lbl1;
;;;1119        		}
;;;1120   
;;;1121        	}
;;;1122        		
;;;1123   	data[0]=LPC_RTC->YEAR;
001414  f8b8003c          LDRH     r0,[r8,#0x3c]
001418  f88d0000          STRB     r0,[sp,#0]
;;;1124   	data[1]=LPC_RTC->MONTH;
00141c  f8980038          LDRB     r0,[r8,#0x38]
001420  f88d0001          STRB     r0,[sp,#1]
;;;1125   	data[2]=LPC_RTC->DOM;
001424  f898002c          LDRB     r0,[r8,#0x2c]
001428  f88d0002          STRB     r0,[sp,#2]
;;;1126   	data[3]=0;
00142c  f88da003          STRB     r10,[sp,#3]
;;;1127   	lc640_write_long_ptr(lc640_adr+16,data);
001430  4669              MOV      r1,sp
001432  f1050010          ADD      r0,r5,#0x10
001436  f7fffffe          BL       lc640_write_long_ptr
;;;1128   
;;;1129   	data[0]=LPC_RTC->HOUR;
00143a  f8980028          LDRB     r0,[r8,#0x28]
00143e  f88d0000          STRB     r0,[sp,#0]
;;;1130   	data[1]=LPC_RTC->MIN;
001442  f8980024          LDRB     r0,[r8,#0x24]
001446  f88d0001          STRB     r0,[sp,#1]
;;;1131   	data[2]=LPC_RTC->SEC;
00144a  f8980020          LDRB     r0,[r8,#0x20]
00144e  f88d0002          STRB     r0,[sp,#2]
;;;1132   	data[3]=0;
001452  f88da003          STRB     r10,[sp,#3]
;;;1133   	lc640_write_long_ptr(lc640_adr+20,data);
001456  4669              MOV      r1,sp
001458  f1050014          ADD      r0,r5,#0x14
00145c  f7fffffe          BL       lc640_write_long_ptr
;;;1134   	
;;;1135   	data[0]='B';
001460  f88d9000          STRB     r9,[sp,#0]
;;;1136   	data[1]='B';
001464  f88d9001          STRB     r9,[sp,#1]
;;;1137   	data[2]='B';
001468  f88d9002          STRB     r9,[sp,#2]
;;;1138   	data[3]='B';
00146c  f88d9003          STRB     r9,[sp,#3]
;;;1139   	lc640_write_long_ptr(lc640_adr+24,data);
001470  4669              MOV      r1,sp
001472  f1050018          ADD      r0,r5,#0x18
001476  f7fffffe          BL       lc640_write_long_ptr
;;;1140   	
;;;1141   	data[0]='B';
00147a  f88d9000          STRB     r9,[sp,#0]
;;;1142   	data[1]='B';
00147e  f88d9001          STRB     r9,[sp,#1]
;;;1143   	data[2]='B';
001482  f88d9002          STRB     r9,[sp,#2]
;;;1144   	data[3]='B';
001486  f88d9003          STRB     r9,[sp,#3]
;;;1145   	lc640_write_long_ptr(lc640_adr+28,data);
00148a  4669              MOV      r1,sp
00148c  f105001c          ADD      r0,r5,#0x1c
001490  f7fffffe          BL       lc640_write_long_ptr
                  |L1.5268|
;;;1146   	
;;;1147   
;;;1148   	
;;;1149   	}
;;;1150   	
;;;1151   avar_bat_hndl_end:
;;;1152   __nop();		
001494  bf00              NOP      
                  |L1.5270|
;;;1153   }
001496  e411              B        |L1.3260|
;;;1154   
                          ENDP

                  avar_bat_as_hndl PROC
;;;1155   //-----------------------------------------------
;;;1156   void avar_bat_as_hndl(char b, char in)
001498  e92d4ff8          PUSH     {r3-r11,lr}
;;;1157   {
00149c  4606              MOV      r6,r0
;;;1158   char data[4];
;;;1159   unsigned short event_ptr,lc640_adr,event_ptr_find,event_cnt;
;;;1160   
;;;1161   if(in==1)
;;;1162   	{
;;;1163   	bat[b]._av|=2;
00149e  48bd              LDR      r0,|L1.6036|
0014a0  eb060246          ADD      r2,r6,r6,LSL #1
;;;1164       
;;;1165   	event_ptr=lc640_read_int(PTR_EVENT_LOG);
;;;1166   	event_ptr++;	
;;;1167   	if(event_ptr>63)event_ptr=0;	
;;;1168   	lc640_write_int(PTR_EVENT_LOG,event_ptr);	
;;;1169   	
;;;1170        event_cnt=lc640_read_int(CNT_EVENT_LOG);
;;;1171   	if(event_cnt!=63)event_cnt=event_ptr;
;;;1172   	lc640_write_int(CNT_EVENT_LOG,event_cnt); 
;;;1173   	
;;;1174   	lc640_adr=EVENT_LOG+(lc640_read_int(PTR_EVENT_LOG)*32);
;;;1175   	
;;;1176   	data[0]='B';
;;;1177   	data[1]=b;
;;;1178   	data[2]='S';
;;;1179   	data[3]=0;
;;;1180   	lc640_write_long_ptr(lc640_adr,data);
;;;1181   
;;;1182   	data[0]=0;
;;;1183   	data[1]=0;
;;;1184   	data[2]=0;
;;;1185   	data[3]=0;
;;;1186   	lc640_write_long_ptr(lc640_adr+4,data);
;;;1187   
;;;1188   	data[0]=LPC_RTC->YEAR;
0014a4  f8df82f0          LDR      r8,|L1.6040|
0014a8  eb021206          ADD      r2,r2,r6,LSL #4       ;1163
0014ac  f04f0a00          MOV      r10,#0                ;1167
0014b0  f04f0942          MOV      r9,#0x42              ;1176
0014b4  f44f6560          MOV      r5,#0xe00             ;1165
0014b8  f44f6b80          MOV      r11,#0x400            ;1174
0014bc  eb000082          ADD      r0,r0,r2,LSL #2       ;1163
0014c0  2901              CMP      r1,#1                 ;1161
0014c2  d002              BEQ      |L1.5322|
;;;1189   	data[1]=LPC_RTC->MONTH;
;;;1190   	data[2]=LPC_RTC->DOM;
;;;1191   	data[3]=0;
;;;1192   	lc640_write_long_ptr(lc640_adr+8,data);
;;;1193   
;;;1194   	data[0]=LPC_RTC->HOUR;
;;;1195   	data[1]=LPC_RTC->MIN;
;;;1196   	data[2]=LPC_RTC->SEC;
;;;1197   	data[3]=0;
;;;1198   	lc640_write_long_ptr(lc640_adr+12,data);
;;;1199   	
;;;1200   	data[0]='A';
;;;1201   	data[1]='A';
;;;1202   	data[2]='A';
;;;1203   	data[3]='A';
;;;1204   	lc640_write_long_ptr(lc640_adr+16,data);
;;;1205   	
;;;1206   	data[0]='A';
;;;1207   	data[1]='A';
;;;1208   	data[2]='A';
;;;1209   	data[3]='A';
;;;1210   	lc640_write_long_ptr(lc640_adr+20,data);
;;;1211   	
;;;1212   	data[0]='A';
;;;1213   	data[1]='A';
;;;1214   	data[2]='A';
;;;1215   	data[3]='A';
;;;1216   	lc640_write_long_ptr(lc640_adr+24,data);
;;;1217   	
;;;1218   	data[0]='A';
;;;1219   	data[1]='A';
;;;1220   	data[2]='A';
;;;1221   	data[3]='A';
;;;1222   	lc640_write_long_ptr(lc640_adr+28,data);				
;;;1223   
;;;1224   	if(b==0)
;;;1225   		{
;;;1226   		snmp_trap_send("BAT #1 Alarm, assimetry",5,1,2);
;;;1227   		}
;;;1228   	else if(b==1)
;;;1229   		{
;;;1230   		snmp_trap_send("BAT #2 Alarm, assimetry",5,2,2);
;;;1231   		} 
;;;1232   	
;;;1233   	}
;;;1234   
;;;1235   else if(in==0)
0014c4  2900              CMP      r1,#0
0014c6  d07d              BEQ      |L1.5572|
0014c8  e12f              B        |L1.5930|
                  |L1.5322|
0014ca  f8101f3d          LDRB     r1,[r0,#0x3d]!        ;1163
0014ce  f0410102          ORR      r1,r1,#2              ;1163
0014d2  7001              STRB     r1,[r0,#0]            ;1163
0014d4  4628              MOV      r0,r5                 ;1165
0014d6  f7fffffe          BL       lc640_read_int
0014da  f1000001          ADD      r0,r0,#1              ;1166
0014de  b284              UXTH     r4,r0                 ;1166
0014e0  2c3f              CMP      r4,#0x3f              ;1167
0014e2  d901              BLS      |L1.5352|
0014e4  f04f0400          MOV      r4,#0                 ;1167
                  |L1.5352|
0014e8  b221              SXTH     r1,r4                 ;1168
0014ea  4628              MOV      r0,r5                 ;1168
0014ec  f7fffffe          BL       lc640_write_int
0014f0  f6406702          MOV      r7,#0xe02             ;1170
0014f4  4638              MOV      r0,r7                 ;1170
0014f6  f7fffffe          BL       lc640_read_int
0014fa  b280              UXTH     r0,r0                 ;1170
0014fc  283f              CMP      r0,#0x3f              ;1171
0014fe  d000              BEQ      |L1.5378|
001500  4620              MOV      r0,r4                 ;1171
                  |L1.5378|
001502  b201              SXTH     r1,r0                 ;1172
001504  4638              MOV      r0,r7                 ;1172
001506  f7fffffe          BL       lc640_write_int
00150a  4628              MOV      r0,r5                 ;1174
00150c  f7fffffe          BL       lc640_read_int
001510  eb0b1040          ADD      r0,r11,r0,LSL #5      ;1174
001514  b284              UXTH     r4,r0                 ;1174
001516  f88d9000          STRB     r9,[sp,#0]            ;1176
00151a  f88d6001          STRB     r6,[sp,#1]            ;1177
00151e  f04f0053          MOV      r0,#0x53              ;1178
001522  f88d0002          STRB     r0,[sp,#2]            ;1178
001526  f88da003          STRB     r10,[sp,#3]           ;1179
00152a  4669              MOV      r1,sp                 ;1180
00152c  4620              MOV      r0,r4                 ;1180
00152e  f7fffffe          BL       lc640_write_long_ptr
001532  f8cda000          STR      r10,[sp,#0]           ;1185
001536  4669              MOV      r1,sp                 ;1186
001538  1d20              ADDS     r0,r4,#4              ;1186
00153a  f7fffffe          BL       lc640_write_long_ptr
00153e  f8b8003c          LDRH     r0,[r8,#0x3c]         ;1188
001542  f88d0000          STRB     r0,[sp,#0]            ;1188
001546  f8980038          LDRB     r0,[r8,#0x38]         ;1189
00154a  f88d0001          STRB     r0,[sp,#1]            ;1189
00154e  f898002c          LDRB     r0,[r8,#0x2c]         ;1190
001552  f88d0002          STRB     r0,[sp,#2]            ;1190
001556  f88da003          STRB     r10,[sp,#3]           ;1191
00155a  4669              MOV      r1,sp                 ;1192
00155c  f1040008          ADD      r0,r4,#8              ;1192
001560  f7fffffe          BL       lc640_write_long_ptr
001564  f8980028          LDRB     r0,[r8,#0x28]         ;1194
001568  f88d0000          STRB     r0,[sp,#0]            ;1194
00156c  f8980024          LDRB     r0,[r8,#0x24]         ;1195
001570  f88d0001          STRB     r0,[sp,#1]            ;1195
001574  f8980020          LDRB     r0,[r8,#0x20]         ;1196
001578  f88d0002          STRB     r0,[sp,#2]            ;1196
00157c  f88da003          STRB     r10,[sp,#3]           ;1197
001580  4669              MOV      r1,sp                 ;1198
001582  f104000c          ADD      r0,r4,#0xc            ;1198
001586  f7fffffe          BL       lc640_write_long_ptr
00158a  f04f0541          MOV      r5,#0x41              ;1200
00158e  f88d5000          STRB     r5,[sp,#0]            ;1200
001592  f88d5001          STRB     r5,[sp,#1]            ;1201
001596  f88d5002          STRB     r5,[sp,#2]            ;1202
00159a  f88d5003          STRB     r5,[sp,#3]            ;1203
00159e  4669              MOV      r1,sp                 ;1204
0015a0  f1040010          ADD      r0,r4,#0x10           ;1204
0015a4  f7fffffe          BL       lc640_write_long_ptr
0015a8  f88d5000          STRB     r5,[sp,#0]            ;1206
0015ac  f88d5001          STRB     r5,[sp,#1]            ;1207
0015b0  f88d5002          STRB     r5,[sp,#2]            ;1208
0015b4  f88d5003          STRB     r5,[sp,#3]            ;1209
0015b8  4669              MOV      r1,sp                 ;1210
0015ba  f1040014          ADD      r0,r4,#0x14           ;1210
0015be  f7fffffe          BL       lc640_write_long_ptr
0015c2  e000              B        |L1.5574|
                  |L1.5572|
0015c4  e02b              B        |L1.5662|
                  |L1.5574|
0015c6  f88d5000          STRB     r5,[sp,#0]            ;1212
0015ca  f88d5001          STRB     r5,[sp,#1]            ;1213
0015ce  f88d5002          STRB     r5,[sp,#2]            ;1214
0015d2  f88d5003          STRB     r5,[sp,#3]            ;1215
0015d6  4669              MOV      r1,sp                 ;1216
0015d8  f1040018          ADD      r0,r4,#0x18           ;1216
0015dc  f7fffffe          BL       lc640_write_long_ptr
0015e0  f88d5000          STRB     r5,[sp,#0]            ;1218
0015e4  f88d5001          STRB     r5,[sp,#1]            ;1219
0015e8  f88d5002          STRB     r5,[sp,#2]            ;1220
0015ec  f88d5003          STRB     r5,[sp,#3]            ;1221
0015f0  4669              MOV      r1,sp                 ;1222
0015f2  f104001c          ADD      r0,r4,#0x1c           ;1222
0015f6  f7fffffe          BL       lc640_write_long_ptr
0015fa  b116              CBZ      r6,|L1.5634|
0015fc  2e01              CMP      r6,#1                 ;1228
0015fe  d007              BEQ      |L1.5648|
001600  e093              B        |L1.5930|
                  |L1.5634|
001602  2302              MOVS     r3,#2                 ;1226
001604  2201              MOVS     r2,#1                 ;1226
001606  2105              MOVS     r1,#5                 ;1226
001608  a064              ADR      r0,|L1.6044|
00160a  f7fffffe          BL       snmp_trap_send
00160e  e08c              B        |L1.5930|
                  |L1.5648|
001610  2302              MOVS     r3,#2                 ;1230
001612  461a              MOV      r2,r3                 ;1230
001614  2105              MOVS     r1,#5                 ;1230
001616  a067              ADR      r0,|L1.6068|
001618  f7fffffe          BL       snmp_trap_send
00161c  e085              B        |L1.5930|
                  |L1.5662|
;;;1236   	{
;;;1237   	bat[b]._av&=~(1<<1);
00161e  f8101f3d          LDRB     r1,[r0,#0x3d]!
001622  f0210102          BIC      r1,r1,#2
001626  7001              STRB     r1,[r0,#0]
;;;1238   
;;;1239        event_ptr=lc640_read_int(PTR_EVENT_LOG);
001628  4628              MOV      r0,r5
00162a  f7fffffe          BL       lc640_read_int
00162e  b287              UXTH     r7,r0
;;;1240   	event_ptr_find=event_ptr;
001630  463c              MOV      r4,r7
                  |L1.5682|
;;;1241   	
;;;1242   avar_bat_as_hndl_lbl1: 
;;;1243   
;;;1244   	lc640_adr=EVENT_LOG+(event_ptr_find*32);
001632  eb0b1044          ADD      r0,r11,r4,LSL #5
001636  b285              UXTH     r5,r0
;;;1245   
;;;1246        lc640_read_long_ptr(lc640_adr,data);
001638  4669              MOV      r1,sp
00163a  4628              MOV      r0,r5
00163c  f7fffffe          BL       lc640_read_long_ptr
;;;1247        
;;;1248        if(!((data[0]=='B')&&(data[1]==b)&&(data[2]=='C')))
001640  f89d0000          LDRB     r0,[sp,#0]
001644  2842              CMP      r0,#0x42
001646  d107              BNE      |L1.5720|
001648  f89d0001          LDRB     r0,[sp,#1]
00164c  42b0              CMP      r0,r6
00164e  d103              BNE      |L1.5720|
001650  f89d0002          LDRB     r0,[sp,#2]
001654  2843              CMP      r0,#0x43
001656  d009              BEQ      |L1.5740|
                  |L1.5720|
;;;1249        	{        
;;;1250        	if(event_ptr_find)event_ptr_find--;
001658  b11c              CBZ      r4,|L1.5730|
00165a  f1a40401          SUB      r4,r4,#1
00165e  b2a4              UXTH     r4,r4
001660  e001              B        |L1.5734|
                  |L1.5730|
;;;1251        	else event_ptr_find=63;
001662  f04f043f          MOV      r4,#0x3f
                  |L1.5734|
;;;1252        	if(event_ptr_find==event_ptr)goto avar_bat_as_hndl_end;
001666  42bc              CMP      r4,r7
001668  d1e3              BNE      |L1.5682|
00166a  e05e              B        |L1.5930|
                  |L1.5740|
;;;1253        	else goto avar_bat_as_hndl_lbl1;
;;;1254        	}
;;;1255        else 
;;;1256        	{
;;;1257        	lc640_read_long_ptr(lc640_adr+16,data);
00166c  4669              MOV      r1,sp
00166e  f1050010          ADD      r0,r5,#0x10
001672  f7fffffe          BL       lc640_read_long_ptr
;;;1258        	if(!((data[0]=='A')&&(data[1]=='A')&&(data[2]=='A')&&(data[3]=='A')))
001676  f89d0000          LDRB     r0,[sp,#0]
00167a  2841              CMP      r0,#0x41
00167c  d10b              BNE      |L1.5782|
00167e  f89d0001          LDRB     r0,[sp,#1]
001682  2841              CMP      r0,#0x41
001684  d107              BNE      |L1.5782|
001686  f89d0002          LDRB     r0,[sp,#2]
00168a  2841              CMP      r0,#0x41
00168c  d103              BNE      |L1.5782|
00168e  f89d0003          LDRB     r0,[sp,#3]
001692  2841              CMP      r0,#0x41
001694  d009              BEQ      |L1.5802|
                  |L1.5782|
;;;1259        		{        
;;;1260        		if(event_ptr_find)event_ptr_find--;
001696  b11c              CBZ      r4,|L1.5792|
001698  f1a40401          SUB      r4,r4,#1
00169c  b2a4              UXTH     r4,r4
00169e  e001              B        |L1.5796|
                  |L1.5792|
;;;1261            		else event_ptr_find=63;
0016a0  f04f043f          MOV      r4,#0x3f
                  |L1.5796|
;;;1262            	    	if(event_ptr_find==event_ptr)goto avar_bat_as_hndl_end;
0016a4  42bc              CMP      r4,r7
0016a6  d1c4              BNE      |L1.5682|
0016a8  e03f              B        |L1.5930|
                  |L1.5802|
;;;1263        		else goto avar_bat_as_hndl_lbl1;
;;;1264        		}
;;;1265   
;;;1266        	}
;;;1267        		
;;;1268   	data[0]=LPC_RTC->YEAR;
0016aa  f8b8003c          LDRH     r0,[r8,#0x3c]
0016ae  f88d0000          STRB     r0,[sp,#0]
;;;1269   	data[1]=LPC_RTC->MONTH;
0016b2  f8980038          LDRB     r0,[r8,#0x38]
0016b6  f88d0001          STRB     r0,[sp,#1]
;;;1270   	data[2]=LPC_RTC->DOM;
0016ba  f898002c          LDRB     r0,[r8,#0x2c]
0016be  f88d0002          STRB     r0,[sp,#2]
;;;1271   	data[3]=0;
0016c2  f88da003          STRB     r10,[sp,#3]
;;;1272   	lc640_write_long_ptr(lc640_adr+16,data);
0016c6  4669              MOV      r1,sp
0016c8  f1050010          ADD      r0,r5,#0x10
0016cc  f7fffffe          BL       lc640_write_long_ptr
;;;1273   
;;;1274   	data[0]=LPC_RTC->HOUR;
0016d0  f8980028          LDRB     r0,[r8,#0x28]
0016d4  f88d0000          STRB     r0,[sp,#0]
;;;1275   	data[1]=LPC_RTC->MIN;
0016d8  f8980024          LDRB     r0,[r8,#0x24]
0016dc  f88d0001          STRB     r0,[sp,#1]
;;;1276   	data[2]=LPC_RTC->SEC;
0016e0  f8980020          LDRB     r0,[r8,#0x20]
0016e4  f88d0002          STRB     r0,[sp,#2]
;;;1277   	data[3]=0;
0016e8  f88da003          STRB     r10,[sp,#3]
;;;1278   	lc640_write_long_ptr(lc640_adr+20,data);
0016ec  4669              MOV      r1,sp
0016ee  f1050014          ADD      r0,r5,#0x14
0016f2  f7fffffe          BL       lc640_write_long_ptr
;;;1279   	
;;;1280   	data[0]='B';
0016f6  f88d9000          STRB     r9,[sp,#0]
;;;1281   	data[1]='B';
0016fa  f88d9001          STRB     r9,[sp,#1]
;;;1282   	data[2]='B';
0016fe  f88d9002          STRB     r9,[sp,#2]
;;;1283   	data[3]='B';
001702  f88d9003          STRB     r9,[sp,#3]
;;;1284   	lc640_write_long_ptr(lc640_adr+24,data);
001706  4669              MOV      r1,sp
001708  f1050018          ADD      r0,r5,#0x18
00170c  f7fffffe          BL       lc640_write_long_ptr
;;;1285   	
;;;1286   	data[0]='B';
001710  f88d9000          STRB     r9,[sp,#0]
;;;1287   	data[1]='B';
001714  f88d9001          STRB     r9,[sp,#1]
;;;1288   	data[2]='B';
001718  f88d9002          STRB     r9,[sp,#2]
;;;1289   	data[3]='B';
00171c  f88d9003          STRB     r9,[sp,#3]
;;;1290   	lc640_write_long_ptr(lc640_adr+28,data);
001720  4669              MOV      r1,sp
001722  f105001c          ADD      r0,r5,#0x1c
001726  f7fffffe          BL       lc640_write_long_ptr
                  |L1.5930|
;;;1291   	
;;;1292   
;;;1293   	
;;;1294   	}
;;;1295   	
;;;1296   avar_bat_as_hndl_end:
;;;1297   __nop();		
00172a  bf00              NOP      
                  |L1.5932|
;;;1298   }
00172c  e551              B        |L1.4562|
;;;1299   
                          ENDP

                  ke_zvu_mem_hndl PROC
;;;1300   //-----------------------------------------------
;;;1301   void ke_zvu_mem_hndl(char b,unsigned short in,unsigned short in1)
00172e  b5f7              PUSH     {r0-r2,r4-r7,lr}
;;;1302   {
001730  b082              SUB      sp,sp,#8
001732  4605              MOV      r5,r0
;;;1303   char data[4];
;;;1304   unsigned int event_ptr=0,lc640_adr/*,event_ptr_find*/,event_cnt;
;;;1305   //unsigned char temp,temp_;
;;;1306   //unsigned int tempUI;
;;;1307   //unsigned long tempUL; 
;;;1308   signed temp_temp;
;;;1309   
;;;1310   temp_temp=bat[b]._u_old[bat_u_old_cnt+1]; 
001734  eb050045          ADD      r0,r5,r5,LSL #1
001738  4916              LDR      r1,|L1.6036|
00173a  eb001005          ADD      r0,r0,r5,LSL #4
00173e  eb010180          ADD      r1,r1,r0,LSL #2
001742  4822              LDR      r0,|L1.6092|
001744  f9b00000          LDRSH    r0,[r0,#0]  ; bat_u_old_cnt
001748  f1000001          ADD      r0,r0,#1
00174c  eb010040          ADD      r0,r1,r0,LSL #1
001750  f9b00020          LDRSH    r0,[r0,#0x20]
001754  9000              STR      r0,[sp,#0]
;;;1311   
;;;1312   event_ptr=lc640_read_int(PTR_EVENT_LOG);
001756  f44f6660          MOV      r6,#0xe00
00175a  4630              MOV      r0,r6
00175c  f7fffffe          BL       lc640_read_int
;;;1313   event_ptr++;	
001760  f1000001          ADD      r0,r0,#1
001764  4604              MOV      r4,r0
;;;1314   if(event_ptr>63)event_ptr=0;	
001766  2c3f              CMP      r4,#0x3f
001768  d934              BLS      |L1.6100|
00176a  e031              B        |L1.6096|
                  |L1.5996|
00176c  42415420          DCB      "BAT #1 Alarm, lost",0
001770  23312041
001774  6c61726d
001778  2c206c6f
00177c  737400  
00177f  00                DCB      0
                  |L1.6016|
001780  42415420          DCB      "BAT #2 Alarm, lost",0
001784  23322041
001788  6c61726d
00178c  2c206c6f
001790  737400  
001793  00                DCB      0
                  |L1.6036|
                          DCD      bat
                  |L1.6040|
                          DCD      0x40024000
                  |L1.6044|
00179c  42415420          DCB      "BAT #1 Alarm, assimetry",0
0017a0  23312041
0017a4  6c61726d
0017a8  2c206173
0017ac  73696d65
0017b0  74727900
                  |L1.6068|
0017b4  42415420          DCB      "BAT #2 Alarm, assimetry",0
0017b8  23322041
0017bc  6c61726d
0017c0  2c206173
0017c4  73696d65
0017c8  74727900
                  |L1.6092|
                          DCD      bat_u_old_cnt
                  |L1.6096|
0017d0  f04f0400          MOV      r4,#0
                  |L1.6100|
;;;1315   lc640_write_int(PTR_EVENT_LOG,event_ptr);	
0017d4  b221              SXTH     r1,r4
0017d6  4630              MOV      r0,r6
0017d8  f7fffffe          BL       lc640_write_int
;;;1316   	
;;;1317   event_cnt=lc640_read_int(CNT_EVENT_LOG);
0017dc  f6406702          MOV      r7,#0xe02
0017e0  4638              MOV      r0,r7
0017e2  f7fffffe          BL       lc640_read_int
;;;1318   if(event_cnt!=63)event_cnt=event_ptr;
0017e6  283f              CMP      r0,#0x3f
0017e8  d000              BEQ      |L1.6124|
0017ea  4620              MOV      r0,r4
                  |L1.6124|
;;;1319   lc640_write_int(CNT_EVENT_LOG,event_cnt); 
0017ec  b201              SXTH     r1,r0
0017ee  4638              MOV      r0,r7
0017f0  f7fffffe          BL       lc640_write_int
;;;1320   	
;;;1321   lc640_adr=EVENT_LOG+(lc640_read_int(PTR_EVENT_LOG)*32);
0017f4  4630              MOV      r0,r6
0017f6  f7fffffe          BL       lc640_read_int
0017fa  f44f6180          MOV      r1,#0x400
0017fe  eb011440          ADD      r4,r1,r0,LSL #5
;;;1322   	
;;;1323   data[0]='B';
001802  f04f0042          MOV      r0,#0x42
001806  f88d0004          STRB     r0,[sp,#4]
;;;1324   data[1]=b; 
00180a  f88d5005          STRB     r5,[sp,#5]
;;;1325   data[2]='K';
00180e  f04f004b          MOV      r0,#0x4b
001812  f88d0006          STRB     r0,[sp,#6]
;;;1326   data[3]='Z';
001816  f04f005a          MOV      r0,#0x5a
00181a  f88d0007          STRB     r0,[sp,#7]
;;;1327   
;;;1328   lc640_write_long_ptr(lc640_adr,data);
00181e  a901              ADD      r1,sp,#4
001820  4620              MOV      r0,r4
001822  f7fffffe          BL       lc640_write_long_ptr
;;;1329   
;;;1330   data[0]=*((char*)&in);
001826  f89d000c          LDRB     r0,[sp,#0xc]
00182a  f88d0004          STRB     r0,[sp,#4]
;;;1331   data[1]=*(((char*)(&in))+1);
00182e  f89d000d          LDRB     r0,[sp,#0xd]
001832  f88d0005          STRB     r0,[sp,#5]
;;;1332   data[2]=*((char*)&temp_temp);
001836  f89d0000          LDRB     r0,[sp,#0]
00183a  f88d0006          STRB     r0,[sp,#6]
;;;1333   data[3]=*(((char*)(&temp_temp))+1);
00183e  f89d0001          LDRB     r0,[sp,#1]
001842  f88d0007          STRB     r0,[sp,#7]
;;;1334   lc640_write_long_ptr(lc640_adr+4,data);
001846  a901              ADD      r1,sp,#4
001848  1d20              ADDS     r0,r4,#4
00184a  f7fffffe          BL       lc640_write_long_ptr
;;;1335   
;;;1336   ke_date[0]=lc640_read_long(EE_SPC_KE_DATE0);
00184e  f24020a2          MOV      r0,#0x2a2
001852  f7fffffe          BL       lc640_read_long
001856  4dff              LDR      r5,|L1.7252|
001858  6028              STR      r0,[r5,#0]  ; ke_date
;;;1337   lc640_write_long_ptr(lc640_adr+8,(char*)&ke_date[0]);
00185a  4629              MOV      r1,r5
00185c  f1040008          ADD      r0,r4,#8
001860  f7fffffe          BL       lc640_write_long_ptr
;;;1338   ke_date[1]=lc640_read_long(EE_SPC_KE_DATE1);	
001864  f24020a6          MOV      r0,#0x2a6
001868  f7fffffe          BL       lc640_read_long
00186c  6068              STR      r0,[r5,#4]  ; ke_date
;;;1339   lc640_write_long_ptr(lc640_adr+12,(char*)&ke_date[1]);
00186e  1d29              ADDS     r1,r5,#4
001870  f104000c          ADD      r0,r4,#0xc
001874  f7fffffe          BL       lc640_write_long_ptr
;;;1340   
;;;1341   data[0]=LPC_RTC->YEAR;
001878  4df7              LDR      r5,|L1.7256|
00187a  8ba8              LDRH     r0,[r5,#0x1c]
00187c  f88d0004          STRB     r0,[sp,#4]
;;;1342   data[1]=LPC_RTC->MONTH;
001880  7e28              LDRB     r0,[r5,#0x18]
001882  f88d0005          STRB     r0,[sp,#5]
;;;1343   data[2]=LPC_RTC->DOM;
001886  7b28              LDRB     r0,[r5,#0xc]
001888  f88d0006          STRB     r0,[sp,#6]
;;;1344   data[3]=*((char*)&in1);
00188c  f89d0010          LDRB     r0,[sp,#0x10]
001890  f88d0007          STRB     r0,[sp,#7]
;;;1345   lc640_write_long_ptr(lc640_adr+16,data);
001894  a901              ADD      r1,sp,#4
001896  f1040010          ADD      r0,r4,#0x10
00189a  f7fffffe          BL       lc640_write_long_ptr
;;;1346   
;;;1347   data[0]=LPC_RTC->HOUR;
00189e  7a28              LDRB     r0,[r5,#8]
0018a0  f88d0004          STRB     r0,[sp,#4]
;;;1348   data[1]=LPC_RTC->MIN;
0018a4  7928              LDRB     r0,[r5,#4]
0018a6  f88d0005          STRB     r0,[sp,#5]
;;;1349   data[2]=LPC_RTC->SEC;
0018aa  7828              LDRB     r0,[r5,#0]
0018ac  f88d0006          STRB     r0,[sp,#6]
;;;1350   data[3]=*(((char*)(&in1))+1);
0018b0  f89d0011          LDRB     r0,[sp,#0x11]
0018b4  f88d0007          STRB     r0,[sp,#7]
;;;1351   lc640_write_long_ptr(lc640_adr+20,data);
0018b8  a901              ADD      r1,sp,#4
0018ba  f1040014          ADD      r0,r4,#0x14
0018be  f7fffffe          BL       lc640_write_long_ptr
;;;1352    
;;;1353   }
0018c2  b005              ADD      sp,sp,#0x14
0018c4  bdf0              POP      {r4-r7,pc}
;;;1354   
                          ENDP

                  vz_mem_hndl PROC
;;;1411   //-----------------------------------------------
;;;1412   void vz_mem_hndl(unsigned short in)
0018c6  e92d4ff8          PUSH     {r3-r11,lr}
;;;1413   {
;;;1414   char data[4];
;;;1415   unsigned int event_ptr=0,lc640_adr,event_ptr_find=0,event_cnt;
0018ca  f04f0600          MOV      r6,#0
0018ce  4634              MOV      r4,r6
;;;1416   //char avar_simbol;
;;;1417   
;;;1418   if(in==1)
;;;1419   	{
;;;1420   	event_ptr=lc640_read_int(PTR_EVENT_LOG);
;;;1421   	event_ptr++;	
;;;1422   	if(event_ptr>63)event_ptr=0;	
;;;1423   	lc640_write_int(PTR_EVENT_LOG,event_ptr);	
;;;1424   	
;;;1425        event_cnt=lc640_read_int(CNT_EVENT_LOG);
;;;1426   	if(event_cnt!=63)event_cnt=event_ptr;
;;;1427   	lc640_write_int(CNT_EVENT_LOG,event_cnt); 
;;;1428   	
;;;1429   	lc640_adr=EVENT_LOG+(lc640_read_int(PTR_EVENT_LOG)*32);
;;;1430   	
;;;1431   	data[0]='B';
;;;1432   	data[1]=0; 
;;;1433   	data[2]='Z';
;;;1434   	data[3]=0;
;;;1435   	lc640_write_long_ptr(lc640_adr,data);
;;;1436   
;;;1437   	data[0]=0;
;;;1438   	data[1]=0;
;;;1439   	data[2]=0;
;;;1440   	data[3]=0;
;;;1441   	lc640_write_long_ptr(lc640_adr+4,data);
;;;1442   
;;;1443   	data[0]=LPC_RTC->YEAR;
0018d0  f8df8388          LDR      r8,|L1.7260|
0018d4  46a1              MOV      r9,r4                 ;1415
0018d6  f04f0742          MOV      r7,#0x42              ;1431
0018da  f44f6a80          MOV      r10,#0x400            ;1429
0018de  2801              CMP      r0,#1                 ;1418
0018e0  d002              BEQ      |L1.6376|
;;;1444   	data[1]=LPC_RTC->MONTH;
;;;1445   	data[2]=LPC_RTC->DOM;
;;;1446   	data[3]=0;
;;;1447   	lc640_write_long_ptr(lc640_adr+8,data);
;;;1448   
;;;1449   	data[0]=LPC_RTC->HOUR;
;;;1450   	data[1]=LPC_RTC->MIN;
;;;1451   	data[2]=LPC_RTC->SEC;
;;;1452   	data[3]=0;
;;;1453   	lc640_write_long_ptr(lc640_adr+12,data);
;;;1454   	
;;;1455   	data[0]='A';
;;;1456   	data[1]='A';
;;;1457   	data[2]='A';
;;;1458   	data[3]='A';
;;;1459   	lc640_write_long_ptr(lc640_adr+16,data);
;;;1460   	
;;;1461   	data[0]='A';
;;;1462   	data[1]='A';
;;;1463   	data[2]='A';
;;;1464   	data[3]='A';
;;;1465   	lc640_write_long_ptr(lc640_adr+20,data);
;;;1466   	
;;;1467   	data[0]='A';
;;;1468   	data[1]='A';
;;;1469   	data[2]='A';
;;;1470   	data[3]='A';
;;;1471   	lc640_write_long_ptr(lc640_adr+24,data);
;;;1472   	
;;;1473   	data[0]='A';
;;;1474   	data[1]='A';
;;;1475   	data[2]='A';
;;;1476   	data[3]='A';
;;;1477   	lc640_write_long_ptr(lc640_adr+28,data);		
;;;1478    	
;;;1479   	}
;;;1480   
;;;1481   else if(in==0)
0018e2  2800              CMP      r0,#0
0018e4  d07e              BEQ      |L1.6628|
0018e6  e108              B        |L1.6906|
                  |L1.6376|
0018e8  f44f6560          MOV      r5,#0xe00             ;1420
0018ec  4628              MOV      r0,r5                 ;1420
0018ee  f7fffffe          BL       lc640_read_int
0018f2  f1000001          ADD      r0,r0,#1              ;1421
0018f6  4604              MOV      r4,r0                 ;1421
0018f8  2c3f              CMP      r4,#0x3f              ;1422
0018fa  d901              BLS      |L1.6400|
0018fc  f04f0400          MOV      r4,#0                 ;1422
                  |L1.6400|
001900  b221              SXTH     r1,r4                 ;1423
001902  4628              MOV      r0,r5                 ;1423
001904  f7fffffe          BL       lc640_write_int
001908  f6406602          MOV      r6,#0xe02             ;1425
00190c  4630              MOV      r0,r6                 ;1425
00190e  f7fffffe          BL       lc640_read_int
001912  283f              CMP      r0,#0x3f              ;1426
001914  d000              BEQ      |L1.6424|
001916  4620              MOV      r0,r4                 ;1426
                  |L1.6424|
001918  b201              SXTH     r1,r0                 ;1427
00191a  4630              MOV      r0,r6                 ;1427
00191c  f7fffffe          BL       lc640_write_int
001920  4628              MOV      r0,r5                 ;1429
001922  f7fffffe          BL       lc640_read_int
001926  eb0a1440          ADD      r4,r10,r0,LSL #5      ;1429
00192a  f88d7000          STRB     r7,[sp,#0]            ;1431
00192e  f88d9001          STRB     r9,[sp,#1]            ;1432
001932  f04f005a          MOV      r0,#0x5a              ;1433
001936  f88d0002          STRB     r0,[sp,#2]            ;1433
00193a  f88d9003          STRB     r9,[sp,#3]            ;1434
00193e  4669              MOV      r1,sp                 ;1435
001940  4620              MOV      r0,r4                 ;1435
001942  f7fffffe          BL       lc640_write_long_ptr
001946  f8cd9000          STR      r9,[sp,#0]            ;1440
00194a  4669              MOV      r1,sp                 ;1441
00194c  1d20              ADDS     r0,r4,#4              ;1441
00194e  f7fffffe          BL       lc640_write_long_ptr
001952  f8b8003c          LDRH     r0,[r8,#0x3c]         ;1443
001956  f88d0000          STRB     r0,[sp,#0]            ;1443
00195a  f8980038          LDRB     r0,[r8,#0x38]         ;1444
00195e  f88d0001          STRB     r0,[sp,#1]            ;1444
001962  f898002c          LDRB     r0,[r8,#0x2c]         ;1445
001966  f88d0002          STRB     r0,[sp,#2]            ;1445
00196a  f88d9003          STRB     r9,[sp,#3]            ;1446
00196e  4669              MOV      r1,sp                 ;1447
001970  f1040008          ADD      r0,r4,#8              ;1447
001974  f7fffffe          BL       lc640_write_long_ptr
001978  f8980028          LDRB     r0,[r8,#0x28]         ;1449
00197c  f88d0000          STRB     r0,[sp,#0]            ;1449
001980  f8980024          LDRB     r0,[r8,#0x24]         ;1450
001984  f88d0001          STRB     r0,[sp,#1]            ;1450
001988  f8980020          LDRB     r0,[r8,#0x20]         ;1451
00198c  f88d0002          STRB     r0,[sp,#2]            ;1451
001990  f88d9003          STRB     r9,[sp,#3]            ;1452
001994  4669              MOV      r1,sp                 ;1453
001996  f104000c          ADD      r0,r4,#0xc            ;1453
00199a  f7fffffe          BL       lc640_write_long_ptr
00199e  f04f0541          MOV      r5,#0x41              ;1455
0019a2  f88d5000          STRB     r5,[sp,#0]            ;1455
0019a6  f88d5001          STRB     r5,[sp,#1]            ;1456
0019aa  f88d5002          STRB     r5,[sp,#2]            ;1457
0019ae  f88d5003          STRB     r5,[sp,#3]            ;1458
0019b2  4669              MOV      r1,sp                 ;1459
0019b4  f1040010          ADD      r0,r4,#0x10           ;1459
0019b8  f7fffffe          BL       lc640_write_long_ptr
0019bc  f88d5000          STRB     r5,[sp,#0]            ;1461
0019c0  f88d5001          STRB     r5,[sp,#1]            ;1462
0019c4  f88d5002          STRB     r5,[sp,#2]            ;1463
0019c8  f88d5003          STRB     r5,[sp,#3]            ;1464
0019cc  4669              MOV      r1,sp                 ;1465
0019ce  f1040014          ADD      r0,r4,#0x14           ;1465
0019d2  f7fffffe          BL       lc640_write_long_ptr
0019d6  f88d5000          STRB     r5,[sp,#0]            ;1467
0019da  f88d5001          STRB     r5,[sp,#1]            ;1468
0019de  f88d5002          STRB     r5,[sp,#2]            ;1469
0019e2  e000              B        |L1.6630|
                  |L1.6628|
0019e4  e014              B        |L1.6672|
                  |L1.6630|
0019e6  f88d5003          STRB     r5,[sp,#3]            ;1470
0019ea  4669              MOV      r1,sp                 ;1471
0019ec  f1040018          ADD      r0,r4,#0x18           ;1471
0019f0  f7fffffe          BL       lc640_write_long_ptr
0019f4  f88d5000          STRB     r5,[sp,#0]            ;1473
0019f8  f88d5001          STRB     r5,[sp,#1]            ;1474
0019fc  f88d5002          STRB     r5,[sp,#2]            ;1475
001a00  f88d5003          STRB     r5,[sp,#3]            ;1476
001a04  4669              MOV      r1,sp                 ;1477
001a06  f104001c          ADD      r0,r4,#0x1c           ;1477
001a0a  f7fffffe          BL       lc640_write_long_ptr
001a0e  e074              B        |L1.6906|
                  |L1.6672|
;;;1482   	{      
;;;1483        
;;;1484   vz_mem_hndl_lbl1: 
;;;1485   
;;;1486   	lc640_adr=EVENT_LOG+(event_ptr_find*32);
001a10  eb0a1544          ADD      r5,r10,r4,LSL #5
;;;1487   
;;;1488        lc640_read_long_ptr(lc640_adr,data);
001a14  4669              MOV      r1,sp
001a16  4628              MOV      r0,r5
001a18  f7fffffe          BL       lc640_read_long_ptr
;;;1489        
;;;1490        if(!((data[0]=='B')&&(data[2]=='Z')))
001a1c  f89d0000          LDRB     r0,[sp,#0]
001a20  2842              CMP      r0,#0x42
001a22  d103              BNE      |L1.6700|
001a24  f89d0002          LDRB     r0,[sp,#2]
001a28  285a              CMP      r0,#0x5a
001a2a  d008              BEQ      |L1.6718|
                  |L1.6700|
;;;1491        	{        
;;;1492        	if(event_ptr_find)event_ptr_find--;
001a2c  b114              CBZ      r4,|L1.6708|
001a2e  f1a40401          SUB      r4,r4,#1
001a32  e001              B        |L1.6712|
                  |L1.6708|
;;;1493        	else event_ptr_find=63;
001a34  f04f043f          MOV      r4,#0x3f
                  |L1.6712|
;;;1494        	if(event_ptr_find==event_ptr)goto vz_mem_hndl_end;
001a38  42b4              CMP      r4,r6
001a3a  d1e9              BNE      |L1.6672|
001a3c  e05d              B        |L1.6906|
                  |L1.6718|
;;;1495        	else goto vz_mem_hndl_lbl1;
;;;1496        	}
;;;1497        else 
;;;1498        	{
;;;1499        	lc640_read_long_ptr(lc640_adr+16,data);
001a3e  4669              MOV      r1,sp
001a40  f1050010          ADD      r0,r5,#0x10
001a44  f7fffffe          BL       lc640_read_long_ptr
;;;1500        	if(!((data[0]=='A')&&(data[1]=='A')&&(data[2]=='A')&&(data[3]=='A')))
001a48  f89d0000          LDRB     r0,[sp,#0]
001a4c  2841              CMP      r0,#0x41
001a4e  d10b              BNE      |L1.6760|
001a50  f89d0001          LDRB     r0,[sp,#1]
001a54  2841              CMP      r0,#0x41
001a56  d107              BNE      |L1.6760|
001a58  f89d0002          LDRB     r0,[sp,#2]
001a5c  2841              CMP      r0,#0x41
001a5e  d103              BNE      |L1.6760|
001a60  f89d0003          LDRB     r0,[sp,#3]
001a64  2841              CMP      r0,#0x41
001a66  d008              BEQ      |L1.6778|
                  |L1.6760|
;;;1501        		{        
;;;1502        		if(event_ptr_find)event_ptr_find--;
001a68  b114              CBZ      r4,|L1.6768|
001a6a  f1a40401          SUB      r4,r4,#1
001a6e  e001              B        |L1.6772|
                  |L1.6768|
;;;1503            		else event_ptr_find=63;
001a70  f04f043f          MOV      r4,#0x3f
                  |L1.6772|
;;;1504            		if(event_ptr_find==event_ptr)goto vz_mem_hndl_end;
001a74  42b4              CMP      r4,r6
001a76  d1cb              BNE      |L1.6672|
001a78  e03f              B        |L1.6906|
                  |L1.6778|
;;;1505        		else goto vz_mem_hndl_lbl1;
;;;1506        		}
;;;1507   
;;;1508        	}	
;;;1509   
;;;1510   
;;;1511   	
;;;1512   	data[0]=LPC_RTC->YEAR;
001a7a  f8b8003c          LDRH     r0,[r8,#0x3c]
001a7e  f88d0000          STRB     r0,[sp,#0]
;;;1513   	data[1]=LPC_RTC->MONTH;
001a82  f8980038          LDRB     r0,[r8,#0x38]
001a86  f88d0001          STRB     r0,[sp,#1]
;;;1514   	data[2]=LPC_RTC->DOM;
001a8a  f898002c          LDRB     r0,[r8,#0x2c]
001a8e  f88d0002          STRB     r0,[sp,#2]
;;;1515   	data[3]=0;
001a92  f88d9003          STRB     r9,[sp,#3]
;;;1516   	lc640_write_long_ptr(lc640_adr+16,data);
001a96  4669              MOV      r1,sp
001a98  f1050010          ADD      r0,r5,#0x10
001a9c  f7fffffe          BL       lc640_write_long_ptr
;;;1517   
;;;1518   	data[0]=LPC_RTC->HOUR;
001aa0  f8980028          LDRB     r0,[r8,#0x28]
001aa4  f88d0000          STRB     r0,[sp,#0]
;;;1519   	data[1]=LPC_RTC->MIN;
001aa8  f8980024          LDRB     r0,[r8,#0x24]
001aac  f88d0001          STRB     r0,[sp,#1]
;;;1520   	data[2]=LPC_RTC->SEC;
001ab0  f8980020          LDRB     r0,[r8,#0x20]
001ab4  f88d0002          STRB     r0,[sp,#2]
;;;1521   	data[3]=0;
001ab8  f88d9003          STRB     r9,[sp,#3]
;;;1522   	lc640_write_long_ptr(lc640_adr+20,data);
001abc  4669              MOV      r1,sp
001abe  f1050014          ADD      r0,r5,#0x14
001ac2  f7fffffe          BL       lc640_write_long_ptr
;;;1523   	
;;;1524   	data[0]='B';
001ac6  f88d7000          STRB     r7,[sp,#0]
;;;1525   	data[1]='B';
001aca  f88d7001          STRB     r7,[sp,#1]
;;;1526   	data[2]='B';
001ace  f88d7002          STRB     r7,[sp,#2]
;;;1527   	data[3]='B';
001ad2  f88d7003          STRB     r7,[sp,#3]
;;;1528   	lc640_write_long_ptr(lc640_adr+24,data);
001ad6  4669              MOV      r1,sp
001ad8  f1050018          ADD      r0,r5,#0x18
001adc  f7fffffe          BL       lc640_write_long_ptr
;;;1529   	
;;;1530   	data[0]='B';
001ae0  f88d7000          STRB     r7,[sp,#0]
;;;1531   	data[1]='B';
001ae4  f88d7001          STRB     r7,[sp,#1]
;;;1532   	data[2]='B';
001ae8  f88d7002          STRB     r7,[sp,#2]
;;;1533   	data[3]='B';
001aec  f88d7003          STRB     r7,[sp,#3]
;;;1534   	lc640_write_long_ptr(lc640_adr+28,data);
001af0  4669              MOV      r1,sp
001af2  f105001c          ADD      r0,r5,#0x1c
001af6  f7fffffe          BL       lc640_write_long_ptr
                  |L1.6906|
;;;1535   	
;;;1536   	}
;;;1537   
;;;1538   vz_mem_hndl_end:
;;;1539   __nop(); 
001afa  bf00              NOP      
                  |L1.6908|
;;;1540   
;;;1541   }
001afc  e4cb              B        |L1.5270|
;;;1542   
                          ENDP

                  speedz_mem_hndl PROC
;;;1543   //-----------------------------------------------
;;;1544   void speedz_mem_hndl(unsigned short in)	 //    (1-, 5- , 0- , 10- )
001afe  e92d4ff8          PUSH     {r3-r11,lr}
;;;1545   {
001b02  4605              MOV      r5,r0
;;;1546   char data[4];
;;;1547   unsigned int event_ptr=0,lc640_adr,event_ptr_find=0,event_cnt;
001b04  f04f0600          MOV      r6,#0
001b08  4634              MOV      r4,r6
;;;1548   //char avar_simbol;
;;;1549   
;;;1550   if((in==1)||(in==5)) //  
;;;1551   	{
;;;1552   	event_ptr=lc640_read_int(PTR_EVENT_LOG);
;;;1553   	event_ptr++;	
;;;1554   	if(event_ptr>63)event_ptr=0;	
;;;1555   	lc640_write_int(PTR_EVENT_LOG,event_ptr);	
;;;1556   	
;;;1557       event_cnt=lc640_read_int(CNT_EVENT_LOG);
;;;1558   	if(event_cnt!=63)event_cnt=event_ptr;
;;;1559   	lc640_write_int(CNT_EVENT_LOG,event_cnt); 
;;;1560   	
;;;1561   	lc640_adr=EVENT_LOG+(lc640_read_int(PTR_EVENT_LOG)*32);
;;;1562   	
;;;1563   	data[0]='s';
;;;1564   	data[1]=0;
;;;1565   	if(in==5)data[1]='a'; 
;;;1566   	data[2]='Z';
;;;1567   	data[3]=0;
;;;1568   	lc640_write_long_ptr(lc640_adr,data);
;;;1569   
;;;1570   	data[0]=0;
;;;1571   	data[1]=0;
;;;1572   	data[2]=0;
;;;1573   	data[3]=0;
;;;1574   	lc640_write_long_ptr(lc640_adr+4,data);
;;;1575   
;;;1576   	data[0]=LPC_RTC->YEAR;
001b0a  f8df8150          LDR      r8,|L1.7260|
001b0e  46a1              MOV      r9,r4                 ;1547
001b10  f44f6a80          MOV      r10,#0x400            ;1561
001b14  2d01              CMP      r5,#1                 ;1550
001b16  d012              BEQ      |L1.6974|
001b18  2d05              CMP      r5,#5                 ;1550
001b1a  d010              BEQ      |L1.6974|
;;;1577   	data[1]=LPC_RTC->MONTH;
;;;1578   	data[2]=LPC_RTC->DOM;
;;;1579   	data[3]=0;
;;;1580   	lc640_write_long_ptr(lc640_adr+8,data);
;;;1581   
;;;1582   	data[0]=LPC_RTC->HOUR;
;;;1583   	data[1]=LPC_RTC->MIN;
;;;1584   	data[2]=LPC_RTC->SEC;
;;;1585   	data[3]=0;
;;;1586   	lc640_write_long_ptr(lc640_adr+12,data);
;;;1587   	
;;;1588   	data[0]='A';
;;;1589   	data[1]='A';
;;;1590   	data[2]='A';
;;;1591   	data[3]='A';
;;;1592   	lc640_write_long_ptr(lc640_adr+16,data);
;;;1593   	
;;;1594   	data[0]='A';
;;;1595   	data[1]='A';
;;;1596   	data[2]='A';
;;;1597   	data[3]='A';
;;;1598   	lc640_write_long_ptr(lc640_adr+20,data);
;;;1599   	
;;;1600   	data[0]='A';
;;;1601   	data[1]='A';
;;;1602   	data[2]='A';
;;;1603   	data[3]='A';
;;;1604   	lc640_write_long_ptr(lc640_adr+24,data);
;;;1605   	
;;;1606   	data[0]='A';
;;;1607   	data[1]='A';
;;;1608   	data[2]='A';
;;;1609   	data[3]='A';
;;;1610   	lc640_write_long_ptr(lc640_adr+28,data);		
;;;1611    	
;;;1612   	}
;;;1613   
;;;1614   else if(in==0)	// 
001b1c  2d00              CMP      r5,#0
001b1e  d07d              BEQ      |L1.7196|
;;;1615   	{      
;;;1616   	char i;     
;;;1617   	event_ptr_find=0;
;;;1618   	for (i=0;i<63;i++)
;;;1619   		{
;;;1620   		lc640_adr=EVENT_LOG+(event_ptr_find*32);
;;;1621   
;;;1622        	lc640_read_long_ptr(lc640_adr,data);
;;;1623        
;;;1624        	if(!((data[0]=='s')&&(data[2]=='Z')))
;;;1625        		{        
;;;1626        		if(event_ptr_find)event_ptr_find--;
;;;1627        		else event_ptr_find=63;
;;;1628        		if(event_ptr_find==event_ptr)
;;;1629   				{
;;;1630   				lc640_adr=0;
;;;1631   				break;
;;;1632   				}
;;;1633        		else continue;
;;;1634        		}
;;;1635        	else 
;;;1636        		{
;;;1637        		lc640_read_long_ptr(lc640_adr+16,data);
;;;1638        		if(!((data[0]=='A')&&(data[1]=='A')&&(data[2]=='A')&&(data[3]=='A')))
;;;1639        			{        
;;;1640        			if(event_ptr_find)event_ptr_find--;
;;;1641            		else event_ptr_find=63;
;;;1642            		if(event_ptr_find==event_ptr)
;;;1643   					{
;;;1644   					lc640_adr=0;
;;;1645   					break;
;;;1646   					}
;;;1647        			else continue;
;;;1648        			}
;;;1649        		}	
;;;1650   		}
;;;1651   	if(lc640_adr!=0)
;;;1652   		{
;;;1653   		data[0]=LPC_RTC->YEAR;
;;;1654   		data[1]=LPC_RTC->MONTH;
;;;1655   		data[2]=LPC_RTC->DOM;
;;;1656   		data[3]=0;
;;;1657   		lc640_write_long_ptr(lc640_adr+16,data);
;;;1658   	
;;;1659   		data[0]=LPC_RTC->HOUR;
;;;1660   		data[1]=LPC_RTC->MIN;
;;;1661   		data[2]=LPC_RTC->SEC;
;;;1662   		data[3]=0;
;;;1663   		lc640_write_long_ptr(lc640_adr+20,data);
;;;1664   		
;;;1665   		data[0]='C';
;;;1666   		data[1]='C';
;;;1667   		data[2]='C';
;;;1668   		data[3]='C';
;;;1669   		lc640_write_long_ptr(lc640_adr+24,data);
;;;1670   		
;;;1671   		data[0]='C';
;;;1672   		data[1]='C';
;;;1673   		data[2]='C';
;;;1674   		data[3]='C';
;;;1675   		lc640_write_long_ptr(lc640_adr+28,data);
;;;1676   		}
;;;1677   	}
;;;1678   else if(in==10) 	//  
001b20  2d0a              CMP      r5,#0xa
001b22  d17c              BNE      |L1.7198|
;;;1679   	{      
;;;1680   	char i;     
;;;1681   
;;;1682   	event_ptr_find=0;
;;;1683   	for (i=0;i<63;i++)
001b24  f04f0700          MOV      r7,#0
                  |L1.6952|
;;;1684   		{
;;;1685   		lc640_adr=EVENT_LOG+(event_ptr_find*32);
001b28  eb0a1544          ADD      r5,r10,r4,LSL #5
;;;1686   
;;;1687        	lc640_read_long_ptr(lc640_adr,data);
001b2c  4669              MOV      r1,sp
001b2e  4628              MOV      r0,r5
001b30  f7fffffe          BL       lc640_read_long_ptr
;;;1688        
;;;1689        	if(!((data[0]=='s')&&(data[2]=='Z')))
001b34  f89d0000          LDRB     r0,[sp,#0]
001b38  2873              CMP      r0,#0x73
001b3a  d171              BNE      |L1.7200|
001b3c  e12a              B        |L1.7572|
                  |L1.6974|
001b3e  f44f6660          MOV      r6,#0xe00             ;1552
001b42  4630              MOV      r0,r6                 ;1552
001b44  f7fffffe          BL       lc640_read_int
001b48  f1000001          ADD      r0,r0,#1              ;1553
001b4c  4604              MOV      r4,r0                 ;1553
001b4e  2c3f              CMP      r4,#0x3f              ;1554
001b50  d901              BLS      |L1.6998|
001b52  f04f0400          MOV      r4,#0                 ;1554
                  |L1.6998|
001b56  b221              SXTH     r1,r4                 ;1555
001b58  4630              MOV      r0,r6                 ;1555
001b5a  f7fffffe          BL       lc640_write_int
001b5e  f6406702          MOV      r7,#0xe02             ;1557
001b62  4638              MOV      r0,r7                 ;1557
001b64  f7fffffe          BL       lc640_read_int
001b68  283f              CMP      r0,#0x3f              ;1558
001b6a  d000              BEQ      |L1.7022|
001b6c  4620              MOV      r0,r4                 ;1558
                  |L1.7022|
001b6e  b201              SXTH     r1,r0                 ;1559
001b70  4638              MOV      r0,r7                 ;1559
001b72  f7fffffe          BL       lc640_write_int
001b76  4630              MOV      r0,r6                 ;1561
001b78  f7fffffe          BL       lc640_read_int
001b7c  eb0a1440          ADD      r4,r10,r0,LSL #5      ;1561
001b80  f04f0073          MOV      r0,#0x73              ;1563
001b84  f88d0000          STRB     r0,[sp,#0]            ;1563
001b88  f88d9001          STRB     r9,[sp,#1]            ;1564
001b8c  2d05              CMP      r5,#5                 ;1565
001b8e  d103              BNE      |L1.7064|
001b90  f04f0061          MOV      r0,#0x61              ;1565
001b94  f88d0001          STRB     r0,[sp,#1]            ;1565
                  |L1.7064|
001b98  f04f005a          MOV      r0,#0x5a              ;1566
001b9c  f88d0002          STRB     r0,[sp,#2]            ;1566
001ba0  f88d9003          STRB     r9,[sp,#3]            ;1567
001ba4  4669              MOV      r1,sp                 ;1568
001ba6  4620              MOV      r0,r4                 ;1568
001ba8  f7fffffe          BL       lc640_write_long_ptr
001bac  f8cd9000          STR      r9,[sp,#0]            ;1573
001bb0  4669              MOV      r1,sp                 ;1574
001bb2  1d20              ADDS     r0,r4,#4              ;1574
001bb4  f7fffffe          BL       lc640_write_long_ptr
001bb8  f8b8003c          LDRH     r0,[r8,#0x3c]         ;1576
001bbc  f88d0000          STRB     r0,[sp,#0]            ;1576
001bc0  f8980038          LDRB     r0,[r8,#0x38]         ;1577
001bc4  f88d0001          STRB     r0,[sp,#1]            ;1577
001bc8  f898002c          LDRB     r0,[r8,#0x2c]         ;1578
001bcc  f88d0002          STRB     r0,[sp,#2]            ;1578
001bd0  f88d9003          STRB     r9,[sp,#3]            ;1579
001bd4  4669              MOV      r1,sp                 ;1580
001bd6  f1040008          ADD      r0,r4,#8              ;1580
001bda  f7fffffe          BL       lc640_write_long_ptr
001bde  f8980028          LDRB     r0,[r8,#0x28]         ;1582
001be2  f88d0000          STRB     r0,[sp,#0]            ;1582
001be6  f8980024          LDRB     r0,[r8,#0x24]         ;1583
001bea  f88d0001          STRB     r0,[sp,#1]            ;1583
001bee  f8980020          LDRB     r0,[r8,#0x20]         ;1584
001bf2  f88d0002          STRB     r0,[sp,#2]            ;1584
001bf6  f88d9003          STRB     r9,[sp,#3]            ;1585
001bfa  4669              MOV      r1,sp                 ;1586
001bfc  f104000c          ADD      r0,r4,#0xc            ;1586
001c00  f7fffffe          BL       lc640_write_long_ptr
001c04  f04f0541          MOV      r5,#0x41              ;1588
001c08  f88d5000          STRB     r5,[sp,#0]            ;1588
001c0c  f88d5001          STRB     r5,[sp,#1]            ;1589
001c10  f88d5002          STRB     r5,[sp,#2]            ;1590
001c14  f88d5003          STRB     r5,[sp,#3]            ;1591
001c18  4669              MOV      r1,sp                 ;1592
001c1a  e002              B        |L1.7202|
                  |L1.7196|
001c1c  e035              B        |L1.7306|
                  |L1.7198|
001c1e  e033              B        |L1.7304|
                  |L1.7200|
001c20  e0bc              B        |L1.7580|
                  |L1.7202|
001c22  f1040010          ADD      r0,r4,#0x10           ;1592
001c26  f7fffffe          BL       lc640_write_long_ptr
001c2a  f88d5000          STRB     r5,[sp,#0]            ;1594
001c2e  f88d5001          STRB     r5,[sp,#1]            ;1595
001c32  f88d5002          STRB     r5,[sp,#2]            ;1596
001c36  f88d5003          STRB     r5,[sp,#3]            ;1597
001c3a  4669              MOV      r1,sp                 ;1598
001c3c  f1040014          ADD      r0,r4,#0x14           ;1598
001c40  f7fffffe          BL       lc640_write_long_ptr
001c44  f88d5000          STRB     r5,[sp,#0]            ;1600
001c48  f88d5001          STRB     r5,[sp,#1]            ;1601
001c4c  f88d5002          STRB     r5,[sp,#2]            ;1602
001c50  e006              B        |L1.7264|
001c52  0000              DCW      0x0000
                  |L1.7252|
                          DCD      ke_date
                  |L1.7256|
                          DCD      0x40024020
                  |L1.7260|
                          DCD      0x40024000
                  |L1.7264|
001c60  f88d5003          STRB     r5,[sp,#3]            ;1603
001c64  4669              MOV      r1,sp                 ;1604
001c66  f1040018          ADD      r0,r4,#0x18           ;1604
001c6a  f7fffffe          BL       lc640_write_long_ptr
001c6e  f88d5000          STRB     r5,[sp,#0]            ;1606
001c72  f88d5001          STRB     r5,[sp,#1]            ;1607
001c76  f88d5002          STRB     r5,[sp,#2]            ;1608
001c7a  f88d5003          STRB     r5,[sp,#3]            ;1609
001c7e  4669              MOV      r1,sp                 ;1610
001c80  f104001c          ADD      r0,r4,#0x1c           ;1610
001c84  f7fffffe          BL       lc640_write_long_ptr
                  |L1.7304|
;;;1690        		{        
;;;1691        		if(event_ptr_find)event_ptr_find--;
;;;1692        		else event_ptr_find=63;
;;;1693        		if(event_ptr_find==event_ptr)
;;;1694   				{
;;;1695   				lc640_adr=0;
;;;1696   				break;
;;;1697   				}
;;;1698        		else continue;
;;;1699        		}
;;;1700        	else 
;;;1701        		{
;;;1702        		lc640_read_long_ptr(lc640_adr+16,data);
;;;1703        		if(!((data[0]=='A')&&(data[1]=='A')&&(data[2]=='A')&&(data[3]=='A')))
;;;1704        			{        
;;;1705        			if(event_ptr_find)event_ptr_find--;
;;;1706            		else event_ptr_find=63;
;;;1707            		if(event_ptr_find==event_ptr)
;;;1708   					{
;;;1709   					lc640_adr=0;
;;;1710   					break;
;;;1711   					}
;;;1712        			else continue;
;;;1713        			}
;;;1714        		}	
;;;1715   		}
;;;1716   	if(lc640_adr!=0)
;;;1717   		{
;;;1718   		data[0]=LPC_RTC->YEAR;
;;;1719   		data[1]=LPC_RTC->MONTH;
;;;1720   		data[2]=LPC_RTC->DOM;
;;;1721   		data[3]=0;
;;;1722   		lc640_write_long_ptr(lc640_adr+16,data);
;;;1723   	
;;;1724   		data[0]=LPC_RTC->HOUR;
;;;1725   		data[1]=LPC_RTC->MIN;
;;;1726   		data[2]=LPC_RTC->SEC;
;;;1727   		data[3]=0;
;;;1728   		lc640_write_long_ptr(lc640_adr+20,data);
;;;1729   		
;;;1730   		data[0]='B';
;;;1731   		data[1]='B';
;;;1732   		data[2]='B';
;;;1733   		data[3]='B';
;;;1734   		lc640_write_long_ptr(lc640_adr+24,data);
;;;1735   		
;;;1736   		data[0]='B';
;;;1737   		data[1]='B';
;;;1738   		data[2]='B';
;;;1739   		data[3]='B';
;;;1740   		lc640_write_long_ptr(lc640_adr+28,data);
;;;1741   		}
;;;1742   	}
;;;1743   }
001c88  e405              B        |L1.5270|
                  |L1.7306|
001c8a  f04f0700          MOV      r7,#0                 ;1618
                  |L1.7310|
001c8e  eb0a1544          ADD      r5,r10,r4,LSL #5      ;1620
001c92  4669              MOV      r1,sp                 ;1622
001c94  4628              MOV      r0,r5                 ;1622
001c96  f7fffffe          BL       lc640_read_long_ptr
001c9a  f89d0000          LDRB     r0,[sp,#0]            ;1624
001c9e  2873              CMP      r0,#0x73              ;1624
001ca0  d103              BNE      |L1.7338|
001ca2  f89d0002          LDRB     r0,[sp,#2]            ;1624
001ca6  285a              CMP      r0,#0x5a              ;1624
001ca8  d00a              BEQ      |L1.7360|
                  |L1.7338|
001caa  b114              CBZ      r4,|L1.7346|
001cac  f1a40401          SUB      r4,r4,#1              ;1626
001cb0  e001              B        |L1.7350|
                  |L1.7346|
001cb2  f04f043f          MOV      r4,#0x3f              ;1627
                  |L1.7350|
001cb6  42b4              CMP      r4,r6                 ;1628
001cb8  d122              BNE      |L1.7424|
001cba  f04f0500          MOV      r5,#0                 ;1630
001cbe  e024              B        |L1.7434|
                  |L1.7360|
001cc0  4669              MOV      r1,sp                 ;1637
001cc2  f1050010          ADD      r0,r5,#0x10           ;1637
001cc6  f7fffffe          BL       lc640_read_long_ptr
001cca  f89d0000          LDRB     r0,[sp,#0]            ;1638
001cce  2841              CMP      r0,#0x41              ;1638
001cd0  d10b              BNE      |L1.7402|
001cd2  f89d0001          LDRB     r0,[sp,#1]            ;1638
001cd6  2841              CMP      r0,#0x41              ;1638
001cd8  d107              BNE      |L1.7402|
001cda  f89d0002          LDRB     r0,[sp,#2]            ;1638
001cde  2841              CMP      r0,#0x41              ;1638
001ce0  d103              BNE      |L1.7402|
001ce2  f89d0003          LDRB     r0,[sp,#3]            ;1638
001ce6  2841              CMP      r0,#0x41              ;1638
001ce8  d00a              BEQ      |L1.7424|
                  |L1.7402|
001cea  b114              CBZ      r4,|L1.7410|
001cec  f1a40401          SUB      r4,r4,#1              ;1640
001cf0  e001              B        |L1.7414|
                  |L1.7410|
001cf2  f04f043f          MOV      r4,#0x3f              ;1641
                  |L1.7414|
001cf6  42b4              CMP      r4,r6                 ;1642
001cf8  d102              BNE      |L1.7424|
001cfa  f04f0500          MOV      r5,#0                 ;1644
001cfe  e004              B        |L1.7434|
                  |L1.7424|
001d00  f1070701          ADD      r7,r7,#1              ;1618
001d04  b2ff              UXTB     r7,r7                 ;1618
001d06  2f3f              CMP      r7,#0x3f              ;1618
001d08  d3c1              BCC      |L1.7310|
                  |L1.7434|
001d0a  2d00              CMP      r5,#0                 ;1651
001d0c  d0bc              BEQ      |L1.7304|
001d0e  f8b8003c          LDRH     r0,[r8,#0x3c]         ;1653
001d12  f88d0000          STRB     r0,[sp,#0]            ;1653
001d16  f8980038          LDRB     r0,[r8,#0x38]         ;1654
001d1a  f88d0001          STRB     r0,[sp,#1]            ;1654
001d1e  f898002c          LDRB     r0,[r8,#0x2c]         ;1655
001d22  f88d0002          STRB     r0,[sp,#2]            ;1655
001d26  f88d9003          STRB     r9,[sp,#3]            ;1656
001d2a  4669              MOV      r1,sp                 ;1657
001d2c  f1050010          ADD      r0,r5,#0x10           ;1657
001d30  f7fffffe          BL       lc640_write_long_ptr
001d34  f8980028          LDRB     r0,[r8,#0x28]         ;1659
001d38  f88d0000          STRB     r0,[sp,#0]            ;1659
001d3c  f8980024          LDRB     r0,[r8,#0x24]         ;1660
001d40  f88d0001          STRB     r0,[sp,#1]            ;1660
001d44  f8980020          LDRB     r0,[r8,#0x20]         ;1661
001d48  f88d0002          STRB     r0,[sp,#2]            ;1661
001d4c  f88d9003          STRB     r9,[sp,#3]            ;1662
001d50  4669              MOV      r1,sp                 ;1663
001d52  f1050014          ADD      r0,r5,#0x14           ;1663
001d56  f7fffffe          BL       lc640_write_long_ptr
001d5a  f04f0443          MOV      r4,#0x43              ;1665
001d5e  f88d4000          STRB     r4,[sp,#0]            ;1665
001d62  f88d4001          STRB     r4,[sp,#1]            ;1666
001d66  f88d4002          STRB     r4,[sp,#2]            ;1667
001d6a  f88d4003          STRB     r4,[sp,#3]            ;1668
001d6e  4669              MOV      r1,sp                 ;1669
001d70  f1050018          ADD      r0,r5,#0x18           ;1669
001d74  f7fffffe          BL       lc640_write_long_ptr
001d78  f88d4000          STRB     r4,[sp,#0]            ;1671
001d7c  f88d4001          STRB     r4,[sp,#1]            ;1672
001d80  f88d4002          STRB     r4,[sp,#2]            ;1673
001d84  f88d4003          STRB     r4,[sp,#3]            ;1674
001d88  4669              MOV      r1,sp                 ;1675
001d8a  f105001c          ADD      r0,r5,#0x1c           ;1675
001d8e  f7fffffe          BL       lc640_write_long_ptr
                  |L1.7570|
001d92  e4cb              B        |L1.5932|
                  |L1.7572|
001d94  f89d0002          LDRB     r0,[sp,#2]            ;1689
001d98  285a              CMP      r0,#0x5a              ;1689
001d9a  d00a              BEQ      |L1.7602|
                  |L1.7580|
001d9c  b114              CBZ      r4,|L1.7588|
001d9e  f1a40401          SUB      r4,r4,#1              ;1691
001da2  e001              B        |L1.7592|
                  |L1.7588|
001da4  f04f043f          MOV      r4,#0x3f              ;1692
                  |L1.7592|
001da8  42b4              CMP      r4,r6                 ;1693
001daa  d122              BNE      |L1.7666|
001dac  f04f0500          MOV      r5,#0                 ;1695
001db0  e025              B        |L1.7678|
                  |L1.7602|
001db2  4669              MOV      r1,sp                 ;1702
001db4  f1050010          ADD      r0,r5,#0x10           ;1702
001db8  f7fffffe          BL       lc640_read_long_ptr
001dbc  f89d0000          LDRB     r0,[sp,#0]            ;1703
001dc0  2841              CMP      r0,#0x41              ;1703
001dc2  d10b              BNE      |L1.7644|
001dc4  f89d0001          LDRB     r0,[sp,#1]            ;1703
001dc8  2841              CMP      r0,#0x41              ;1703
001dca  d107              BNE      |L1.7644|
001dcc  f89d0002          LDRB     r0,[sp,#2]            ;1703
001dd0  2841              CMP      r0,#0x41              ;1703
001dd2  d103              BNE      |L1.7644|
001dd4  f89d0003          LDRB     r0,[sp,#3]            ;1703
001dd8  2841              CMP      r0,#0x41              ;1703
001dda  d00a              BEQ      |L1.7666|
                  |L1.7644|
001ddc  b114              CBZ      r4,|L1.7652|
001dde  f1a40401          SUB      r4,r4,#1              ;1705
001de2  e001              B        |L1.7656|
                  |L1.7652|
001de4  f04f043f          MOV      r4,#0x3f              ;1706
                  |L1.7656|
001de8  42b4              CMP      r4,r6                 ;1707
001dea  d102              BNE      |L1.7666|
001dec  f04f0500          MOV      r5,#0                 ;1709
001df0  e005              B        |L1.7678|
                  |L1.7666|
001df2  f1070701          ADD      r7,r7,#1              ;1683
001df6  b2ff              UXTB     r7,r7                 ;1683
001df8  2f3f              CMP      r7,#0x3f              ;1683
001dfa  f4ffae95          BCC      |L1.6952|
                  |L1.7678|
001dfe  2d00              CMP      r5,#0                 ;1716
001e00  d0c7              BEQ      |L1.7570|
001e02  f8b8003c          LDRH     r0,[r8,#0x3c]         ;1718
001e06  f88d0000          STRB     r0,[sp,#0]            ;1718
001e0a  f8980038          LDRB     r0,[r8,#0x38]         ;1719
001e0e  f88d0001          STRB     r0,[sp,#1]            ;1719
001e12  f898002c          LDRB     r0,[r8,#0x2c]         ;1720
001e16  f88d0002          STRB     r0,[sp,#2]            ;1720
001e1a  f88d9003          STRB     r9,[sp,#3]            ;1721
001e1e  4669              MOV      r1,sp                 ;1722
001e20  f1050010          ADD      r0,r5,#0x10           ;1722
001e24  f7fffffe          BL       lc640_write_long_ptr
001e28  f8980028          LDRB     r0,[r8,#0x28]         ;1724
001e2c  f88d0000          STRB     r0,[sp,#0]            ;1724
001e30  f8980024          LDRB     r0,[r8,#0x24]         ;1725
001e34  f88d0001          STRB     r0,[sp,#1]            ;1725
001e38  f8980020          LDRB     r0,[r8,#0x20]         ;1726
001e3c  f88d0002          STRB     r0,[sp,#2]            ;1726
001e40  f88d9003          STRB     r9,[sp,#3]            ;1727
001e44  4669              MOV      r1,sp                 ;1728
001e46  f1050014          ADD      r0,r5,#0x14           ;1728
001e4a  f7fffffe          BL       lc640_write_long_ptr
001e4e  f04f0442          MOV      r4,#0x42              ;1730
001e52  f88d4000          STRB     r4,[sp,#0]            ;1730
001e56  f88d4001          STRB     r4,[sp,#1]            ;1731
001e5a  f88d4002          STRB     r4,[sp,#2]            ;1732
001e5e  f88d4003          STRB     r4,[sp,#3]            ;1733
001e62  4669              MOV      r1,sp                 ;1734
001e64  f1050018          ADD      r0,r5,#0x18           ;1734
001e68  f7fffffe          BL       lc640_write_long_ptr
001e6c  f88d4000          STRB     r4,[sp,#0]            ;1736
001e70  f88d4001          STRB     r4,[sp,#1]            ;1737
001e74  f88d4002          STRB     r4,[sp,#2]            ;1738
001e78  f88d4003          STRB     r4,[sp,#3]            ;1739
001e7c  4669              MOV      r1,sp                 ;1740
001e7e  f105001c          ADD      r0,r5,#0x1c           ;1740
001e82  f7fffffe          BL       lc640_write_long_ptr
001e86  e451              B        |L1.5932|
;;;1744     
                          ENDP

                  uz_mem_hndl PROC
;;;1746   //-----------------------------------------------
;;;1747   void uz_mem_hndl(unsigned short in)	 //   
001e88  e92d4ff8          PUSH     {r3-r11,lr}
;;;1748   {
;;;1749   char data[4];
;;;1750   unsigned int event_ptr=0,lc640_adr,event_ptr_find=0,event_cnt;
001e8c  f04f0600          MOV      r6,#0
001e90  4634              MOV      r4,r6
;;;1751   //char avar_simbol;
;;;1752   
;;;1753   if(in==1) //  
;;;1754   	{
;;;1755   	event_ptr=lc640_read_int(PTR_EVENT_LOG);
;;;1756   	event_ptr++;	
;;;1757   	if(event_ptr>63)event_ptr=0;	
;;;1758   	lc640_write_int(PTR_EVENT_LOG,event_ptr);	
;;;1759   	
;;;1760       event_cnt=lc640_read_int(CNT_EVENT_LOG);
;;;1761   	if(event_cnt!=63)event_cnt=event_ptr;
;;;1762   	lc640_write_int(CNT_EVENT_LOG,event_cnt); 
;;;1763   	
;;;1764   	lc640_adr=EVENT_LOG+(lc640_read_int(PTR_EVENT_LOG)*32);
;;;1765   	
;;;1766   	data[0]='u';
;;;1767   	data[1]=0; 
;;;1768   	data[2]='Z';
;;;1769   	data[3]=0;
;;;1770   	lc640_write_long_ptr(lc640_adr,data);
;;;1771   
;;;1772   	data[0]=0;
;;;1773   	data[1]=0;
;;;1774   	data[2]=0;
;;;1775   	data[3]=0;
;;;1776   	lc640_write_long_ptr(lc640_adr+4,data);
;;;1777   
;;;1778   	data[0]=LPC_RTC->YEAR;
001e92  f8df86c4          LDR      r8,|L1.9560|
001e96  46a1              MOV      r9,r4                 ;1750
001e98  f44f6a80          MOV      r10,#0x400            ;1764
001e9c  2801              CMP      r0,#1                 ;1753
001e9e  d010              BEQ      |L1.7874|
;;;1779   	data[1]=LPC_RTC->MONTH;
;;;1780   	data[2]=LPC_RTC->DOM;
;;;1781   	data[3]=0;
;;;1782   	lc640_write_long_ptr(lc640_adr+8,data);
;;;1783   
;;;1784   	data[0]=LPC_RTC->HOUR;
;;;1785   	data[1]=LPC_RTC->MIN;
;;;1786   	data[2]=LPC_RTC->SEC;
;;;1787   	data[3]=0;
;;;1788   	lc640_write_long_ptr(lc640_adr+12,data);
;;;1789   	
;;;1790   	data[0]='A';
;;;1791   	data[1]='A';
;;;1792   	data[2]='A';
;;;1793   	data[3]='A';
;;;1794   	lc640_write_long_ptr(lc640_adr+16,data);
;;;1795   	
;;;1796   	data[0]='A';
;;;1797   	data[1]='A';
;;;1798   	data[2]='A';
;;;1799   	data[3]='A';
;;;1800   	lc640_write_long_ptr(lc640_adr+20,data);
;;;1801   	
;;;1802   	data[0]='A';
;;;1803   	data[1]='A';
;;;1804   	data[2]='A';
;;;1805   	data[3]='A';
;;;1806   	lc640_write_long_ptr(lc640_adr+24,data);
;;;1807   	
;;;1808   	data[0]='A';
;;;1809   	data[1]='A';
;;;1810   	data[2]='A';
;;;1811   	data[3]='A';
;;;1812   	lc640_write_long_ptr(lc640_adr+28,data);		
;;;1813    	
;;;1814   	}
;;;1815   
;;;1816   else if(in==0)	// 
001ea0  2800              CMP      r0,#0
001ea2  d07d              BEQ      |L1.8096|
;;;1817   	{      
;;;1818   	char i;     
;;;1819   	event_ptr_find=0;
;;;1820   	for (i=0;i<63;i++)
;;;1821   		{
;;;1822   		lc640_adr=EVENT_LOG+(event_ptr_find*32);
;;;1823   
;;;1824        	lc640_read_long_ptr(lc640_adr,data);
;;;1825        
;;;1826        	if(!((data[0]=='u')&&(data[2]=='Z')))
;;;1827        		{        
;;;1828        		if(event_ptr_find)event_ptr_find--;
;;;1829        		else event_ptr_find=63;
;;;1830        		if(event_ptr_find==event_ptr)
;;;1831   				{
;;;1832   				lc640_adr=0;
;;;1833   				break;
;;;1834   				}
;;;1835        		else continue;
;;;1836        		}
;;;1837        	else 
;;;1838        		{
;;;1839        		lc640_read_long_ptr(lc640_adr+16,data);
;;;1840        		if(!((data[0]=='A')&&(data[1]=='A')&&(data[2]=='A')&&(data[3]=='A')))
;;;1841        			{        
;;;1842        			if(event_ptr_find)event_ptr_find--;
;;;1843            		else event_ptr_find=63;
;;;1844            		if(event_ptr_find==event_ptr)
;;;1845   					{
;;;1846   					lc640_adr=0;
;;;1847   					break;
;;;1848   					}
;;;1849        			else continue;
;;;1850        			}
;;;1851        		}	
;;;1852   		}
;;;1853   	if(lc640_adr!=0)
;;;1854   		{
;;;1855   		data[0]=LPC_RTC->YEAR;
;;;1856   		data[1]=LPC_RTC->MONTH;
;;;1857   		data[2]=LPC_RTC->DOM;
;;;1858   		data[3]=0;
;;;1859   		lc640_write_long_ptr(lc640_adr+16,data);
;;;1860   	
;;;1861   		data[0]=LPC_RTC->HOUR;
;;;1862   		data[1]=LPC_RTC->MIN;
;;;1863   		data[2]=LPC_RTC->SEC;
;;;1864   		data[3]=0;
;;;1865   		lc640_write_long_ptr(lc640_adr+20,data);
;;;1866   		
;;;1867   		data[0]='C';
;;;1868   		data[1]='C';
;;;1869   		data[2]='C';
;;;1870   		data[3]='C';
;;;1871   		lc640_write_long_ptr(lc640_adr+24,data);
;;;1872   		
;;;1873   		data[0]='C';
;;;1874   		data[1]='C';
;;;1875   		data[2]='C';
;;;1876   		data[3]='C';
;;;1877   		lc640_write_long_ptr(lc640_adr+28,data);
;;;1878   		}
;;;1879   	}
;;;1880   else if(in==10) 	//  
001ea4  280a              CMP      r0,#0xa
001ea6  d17c              BNE      |L1.8098|
;;;1881   	{      
;;;1882   	char i;     
;;;1883   
;;;1884   	event_ptr_find=0;
;;;1885   	for (i=0;i<63;i++)
001ea8  f04f0700          MOV      r7,#0
                  |L1.7852|
;;;1886   		{
;;;1887   		lc640_adr=EVENT_LOG+(event_ptr_find*32);
001eac  eb0a1544          ADD      r5,r10,r4,LSL #5
;;;1888   
;;;1889        	lc640_read_long_ptr(lc640_adr,data);
001eb0  4669              MOV      r1,sp
001eb2  4628              MOV      r0,r5
001eb4  f7fffffe          BL       lc640_read_long_ptr
;;;1890        
;;;1891        	if(!((data[0]=='u')&&(data[2]=='Z')))
001eb8  f89d0000          LDRB     r0,[sp,#0]
001ebc  2875              CMP      r0,#0x75
001ebe  d171              BNE      |L1.8100|
001ec0  e11c              B        |L1.8444|
                  |L1.7874|
001ec2  f44f6560          MOV      r5,#0xe00             ;1755
001ec6  4628              MOV      r0,r5                 ;1755
001ec8  f7fffffe          BL       lc640_read_int
001ecc  f1000001          ADD      r0,r0,#1              ;1756
001ed0  4604              MOV      r4,r0                 ;1756
001ed2  2c3f              CMP      r4,#0x3f              ;1757
001ed4  d901              BLS      |L1.7898|
001ed6  f04f0400          MOV      r4,#0                 ;1757
                  |L1.7898|
001eda  b221              SXTH     r1,r4                 ;1758
001edc  4628              MOV      r0,r5                 ;1758
001ede  f7fffffe          BL       lc640_write_int
001ee2  f6406602          MOV      r6,#0xe02             ;1760
001ee6  4630              MOV      r0,r6                 ;1760
001ee8  f7fffffe          BL       lc640_read_int
001eec  283f              CMP      r0,#0x3f              ;1761
001eee  d000              BEQ      |L1.7922|
001ef0  4620              MOV      r0,r4                 ;1761
                  |L1.7922|
001ef2  b201              SXTH     r1,r0                 ;1762
001ef4  4630              MOV      r0,r6                 ;1762
001ef6  f7fffffe          BL       lc640_write_int
001efa  4628              MOV      r0,r5                 ;1764
001efc  f7fffffe          BL       lc640_read_int
001f00  eb0a1440          ADD      r4,r10,r0,LSL #5      ;1764
001f04  f04f0075          MOV      r0,#0x75              ;1766
001f08  f88d0000          STRB     r0,[sp,#0]            ;1766
001f0c  f88d9001          STRB     r9,[sp,#1]            ;1767
001f10  f04f005a          MOV      r0,#0x5a              ;1768
001f14  f88d0002          STRB     r0,[sp,#2]            ;1768
001f18  f88d9003          STRB     r9,[sp,#3]            ;1769
001f1c  4669              MOV      r1,sp                 ;1770
001f1e  4620              MOV      r0,r4                 ;1770
001f20  f7fffffe          BL       lc640_write_long_ptr
001f24  f8cd9000          STR      r9,[sp,#0]            ;1775
001f28  4669              MOV      r1,sp                 ;1776
001f2a  1d20              ADDS     r0,r4,#4              ;1776
001f2c  f7fffffe          BL       lc640_write_long_ptr
001f30  f8b8003c          LDRH     r0,[r8,#0x3c]         ;1778
001f34  f88d0000          STRB     r0,[sp,#0]            ;1778
001f38  f8980038          LDRB     r0,[r8,#0x38]         ;1779
001f3c  f88d0001          STRB     r0,[sp,#1]            ;1779
001f40  f898002c          LDRB     r0,[r8,#0x2c]         ;1780
001f44  f88d0002          STRB     r0,[sp,#2]            ;1780
001f48  f88d9003          STRB     r9,[sp,#3]            ;1781
001f4c  4669              MOV      r1,sp                 ;1782
001f4e  f1040008          ADD      r0,r4,#8              ;1782
001f52  f7fffffe          BL       lc640_write_long_ptr
001f56  f8980028          LDRB     r0,[r8,#0x28]         ;1784
001f5a  f88d0000          STRB     r0,[sp,#0]            ;1784
001f5e  f8980024          LDRB     r0,[r8,#0x24]         ;1785
001f62  f88d0001          STRB     r0,[sp,#1]            ;1785
001f66  f8980020          LDRB     r0,[r8,#0x20]         ;1786
001f6a  f88d0002          STRB     r0,[sp,#2]            ;1786
001f6e  f88d9003          STRB     r9,[sp,#3]            ;1787
001f72  4669              MOV      r1,sp                 ;1788
001f74  f104000c          ADD      r0,r4,#0xc            ;1788
001f78  f7fffffe          BL       lc640_write_long_ptr
001f7c  f04f0541          MOV      r5,#0x41              ;1790
001f80  f88d5000          STRB     r5,[sp,#0]            ;1790
001f84  f88d5001          STRB     r5,[sp,#1]            ;1791
001f88  f88d5002          STRB     r5,[sp,#2]            ;1792
001f8c  f88d5003          STRB     r5,[sp,#3]            ;1793
001f90  4669              MOV      r1,sp                 ;1794
001f92  f1040010          ADD      r0,r4,#0x10           ;1794
001f96  f7fffffe          BL       lc640_write_long_ptr
001f9a  f88d5000          STRB     r5,[sp,#0]            ;1796
001f9e  e002              B        |L1.8102|
                  |L1.8096|
001fa0  e027              B        |L1.8178|
                  |L1.8098|
001fa2  e025              B        |L1.8176|
                  |L1.8100|
001fa4  e0ae              B        |L1.8452|
                  |L1.8102|
001fa6  f88d5001          STRB     r5,[sp,#1]            ;1797
001faa  f88d5002          STRB     r5,[sp,#2]            ;1798
001fae  f88d5003          STRB     r5,[sp,#3]            ;1799
001fb2  4669              MOV      r1,sp                 ;1800
001fb4  f1040014          ADD      r0,r4,#0x14           ;1800
001fb8  f7fffffe          BL       lc640_write_long_ptr
001fbc  f88d5000          STRB     r5,[sp,#0]            ;1802
001fc0  f88d5001          STRB     r5,[sp,#1]            ;1803
001fc4  f88d5002          STRB     r5,[sp,#2]            ;1804
001fc8  f88d5003          STRB     r5,[sp,#3]            ;1805
001fcc  4669              MOV      r1,sp                 ;1806
001fce  f1040018          ADD      r0,r4,#0x18           ;1806
001fd2  f7fffffe          BL       lc640_write_long_ptr
001fd6  f88d5000          STRB     r5,[sp,#0]            ;1808
001fda  f88d5001          STRB     r5,[sp,#1]            ;1809
001fde  f88d5002          STRB     r5,[sp,#2]            ;1810
001fe2  f88d5003          STRB     r5,[sp,#3]            ;1811
001fe6  4669              MOV      r1,sp                 ;1812
001fe8  f104001c          ADD      r0,r4,#0x1c           ;1812
001fec  f7fffffe          BL       lc640_write_long_ptr
                  |L1.8176|
;;;1892        		{        
;;;1893        		if(event_ptr_find)event_ptr_find--;
;;;1894        		else event_ptr_find=63;
;;;1895        		if(event_ptr_find==event_ptr)
;;;1896   				{
;;;1897   				lc640_adr=0;
;;;1898   				break;
;;;1899   				}
;;;1900        		else continue;
;;;1901        		}
;;;1902        	else 
;;;1903        		{
;;;1904        		lc640_read_long_ptr(lc640_adr+16,data);
;;;1905        		if(!((data[0]=='A')&&(data[1]=='A')&&(data[2]=='A')&&(data[3]=='A')))
;;;1906        			{        
;;;1907        			if(event_ptr_find)event_ptr_find--;
;;;1908            		else event_ptr_find=63;
;;;1909            		if(event_ptr_find==event_ptr)
;;;1910   					{
;;;1911   					lc640_adr=0;
;;;1912   					break;
;;;1913   					}
;;;1914        			else continue;
;;;1915        			}
;;;1916        		}	
;;;1917   		}
;;;1918   	if(lc640_adr!=0)
;;;1919   		{
;;;1920   		data[0]=LPC_RTC->YEAR;
;;;1921   		data[1]=LPC_RTC->MONTH;
;;;1922   		data[2]=LPC_RTC->DOM;
;;;1923   		data[3]=0;
;;;1924   		lc640_write_long_ptr(lc640_adr+16,data);
;;;1925   	
;;;1926   		data[0]=LPC_RTC->HOUR;
;;;1927   		data[1]=LPC_RTC->MIN;
;;;1928   		data[2]=LPC_RTC->SEC;
;;;1929   		data[3]=0;
;;;1930   		lc640_write_long_ptr(lc640_adr+20,data);
;;;1931   		
;;;1932   		data[0]='B';
;;;1933   		data[1]='B';
;;;1934   		data[2]='B';
;;;1935   		data[3]='B';
;;;1936   		lc640_write_long_ptr(lc640_adr+24,data);
;;;1937   		
;;;1938   		data[0]='B';
;;;1939   		data[1]='B';
;;;1940   		data[2]='B';
;;;1941   		data[3]='B';
;;;1942   		lc640_write_long_ptr(lc640_adr+28,data);
;;;1943   		}
;;;1944   	}
;;;1945   }
001ff0  e584              B        |L1.6908|
                  |L1.8178|
001ff2  f04f0700          MOV      r7,#0                 ;1820
                  |L1.8182|
001ff6  eb0a1544          ADD      r5,r10,r4,LSL #5      ;1822
001ffa  4669              MOV      r1,sp                 ;1824
001ffc  4628              MOV      r0,r5                 ;1824
001ffe  f7fffffe          BL       lc640_read_long_ptr
002002  f89d0000          LDRB     r0,[sp,#0]            ;1826
002006  2875              CMP      r0,#0x75              ;1826
002008  d103              BNE      |L1.8210|
00200a  f89d0002          LDRB     r0,[sp,#2]            ;1826
00200e  285a              CMP      r0,#0x5a              ;1826
002010  d00a              BEQ      |L1.8232|
                  |L1.8210|
002012  b114              CBZ      r4,|L1.8218|
002014  f1a40401          SUB      r4,r4,#1              ;1828
002018  e001              B        |L1.8222|
                  |L1.8218|
00201a  f04f043f          MOV      r4,#0x3f              ;1829
                  |L1.8222|
00201e  42b4              CMP      r4,r6                 ;1830
002020  d122              BNE      |L1.8296|
002022  f04f0500          MOV      r5,#0                 ;1832
002026  e024              B        |L1.8306|
                  |L1.8232|
002028  4669              MOV      r1,sp                 ;1839
00202a  f1050010          ADD      r0,r5,#0x10           ;1839
00202e  f7fffffe          BL       lc640_read_long_ptr
002032  f89d0000          LDRB     r0,[sp,#0]            ;1840
002036  2841              CMP      r0,#0x41              ;1840
002038  d10b              BNE      |L1.8274|
00203a  f89d0001          LDRB     r0,[sp,#1]            ;1840
00203e  2841              CMP      r0,#0x41              ;1840
002040  d107              BNE      |L1.8274|
002042  f89d0002          LDRB     r0,[sp,#2]            ;1840
002046  2841              CMP      r0,#0x41              ;1840
002048  d103              BNE      |L1.8274|
00204a  f89d0003          LDRB     r0,[sp,#3]            ;1840
00204e  2841              CMP      r0,#0x41              ;1840
002050  d00a              BEQ      |L1.8296|
                  |L1.8274|
002052  b114              CBZ      r4,|L1.8282|
002054  f1a40401          SUB      r4,r4,#1              ;1842
002058  e001              B        |L1.8286|
                  |L1.8282|
00205a  f04f043f          MOV      r4,#0x3f              ;1843
                  |L1.8286|
00205e  42b4              CMP      r4,r6                 ;1844
002060  d102              BNE      |L1.8296|
002062  f04f0500          MOV      r5,#0                 ;1846
002066  e004              B        |L1.8306|
                  |L1.8296|
002068  f1070701          ADD      r7,r7,#1              ;1820
00206c  b2ff              UXTB     r7,r7                 ;1820
00206e  2f3f              CMP      r7,#0x3f              ;1820
002070  d3c1              BCC      |L1.8182|
                  |L1.8306|
002072  2d00              CMP      r5,#0                 ;1853
002074  d0bc              BEQ      |L1.8176|
002076  f8b8003c          LDRH     r0,[r8,#0x3c]         ;1855
00207a  f88d0000          STRB     r0,[sp,#0]            ;1855
00207e  f8980038          LDRB     r0,[r8,#0x38]         ;1856
002082  f88d0001          STRB     r0,[sp,#1]            ;1856
002086  f898002c          LDRB     r0,[r8,#0x2c]         ;1857
00208a  f88d0002          STRB     r0,[sp,#2]            ;1857
00208e  f88d9003          STRB     r9,[sp,#3]            ;1858
002092  4669              MOV      r1,sp                 ;1859
002094  f1050010          ADD      r0,r5,#0x10           ;1859
002098  f7fffffe          BL       lc640_write_long_ptr
00209c  f8980028          LDRB     r0,[r8,#0x28]         ;1861
0020a0  f88d0000          STRB     r0,[sp,#0]            ;1861
0020a4  f8980024          LDRB     r0,[r8,#0x24]         ;1862
0020a8  f88d0001          STRB     r0,[sp,#1]            ;1862
0020ac  f8980020          LDRB     r0,[r8,#0x20]         ;1863
0020b0  f88d0002          STRB     r0,[sp,#2]            ;1863
0020b4  f88d9003          STRB     r9,[sp,#3]            ;1864
0020b8  4669              MOV      r1,sp                 ;1865
0020ba  f1050014          ADD      r0,r5,#0x14           ;1865
0020be  f7fffffe          BL       lc640_write_long_ptr
0020c2  f04f0443          MOV      r4,#0x43              ;1867
0020c6  f88d4000          STRB     r4,[sp,#0]            ;1867
0020ca  f88d4001          STRB     r4,[sp,#1]            ;1868
0020ce  f88d4002          STRB     r4,[sp,#2]            ;1869
0020d2  f88d4003          STRB     r4,[sp,#3]            ;1870
0020d6  4669              MOV      r1,sp                 ;1871
0020d8  f1050018          ADD      r0,r5,#0x18           ;1871
0020dc  f7fffffe          BL       lc640_write_long_ptr
0020e0  f88d4000          STRB     r4,[sp,#0]            ;1873
0020e4  f88d4001          STRB     r4,[sp,#1]            ;1874
0020e8  f88d4002          STRB     r4,[sp,#2]            ;1875
0020ec  f88d4003          STRB     r4,[sp,#3]            ;1876
0020f0  4669              MOV      r1,sp                 ;1877
0020f2  f105001c          ADD      r0,r5,#0x1c           ;1877
0020f6  f7fffffe          BL       lc640_write_long_ptr
                  |L1.8442|
0020fa  e4ff              B        |L1.6908|
                  |L1.8444|
0020fc  f89d0002          LDRB     r0,[sp,#2]            ;1891
002100  285a              CMP      r0,#0x5a              ;1891
002102  d00a              BEQ      |L1.8474|
                  |L1.8452|
002104  b114              CBZ      r4,|L1.8460|
002106  f1a40401          SUB      r4,r4,#1              ;1893
00210a  e001              B        |L1.8464|
                  |L1.8460|
00210c  f04f043f          MOV      r4,#0x3f              ;1894
                  |L1.8464|
002110  42b4              CMP      r4,r6                 ;1895
002112  d122              BNE      |L1.8538|
002114  f04f0500          MOV      r5,#0                 ;1897
002118  e025              B        |L1.8550|
                  |L1.8474|
00211a  4669              MOV      r1,sp                 ;1904
00211c  f1050010          ADD      r0,r5,#0x10           ;1904
002120  f7fffffe          BL       lc640_read_long_ptr
002124  f89d0000          LDRB     r0,[sp,#0]            ;1905
002128  2841              CMP      r0,#0x41              ;1905
00212a  d10b              BNE      |L1.8516|
00212c  f89d0001          LDRB     r0,[sp,#1]            ;1905
002130  2841              CMP      r0,#0x41              ;1905
002132  d107              BNE      |L1.8516|
002134  f89d0002          LDRB     r0,[sp,#2]            ;1905
002138  2841              CMP      r0,#0x41              ;1905
00213a  d103              BNE      |L1.8516|
00213c  f89d0003          LDRB     r0,[sp,#3]            ;1905
002140  2841              CMP      r0,#0x41              ;1905
002142  d00a              BEQ      |L1.8538|
                  |L1.8516|
002144  b114              CBZ      r4,|L1.8524|
002146  f1a40401          SUB      r4,r4,#1              ;1907
00214a  e001              B        |L1.8528|
                  |L1.8524|
00214c  f04f043f          MOV      r4,#0x3f              ;1908
                  |L1.8528|
002150  42b4              CMP      r4,r6                 ;1909
002152  d102              BNE      |L1.8538|
002154  f04f0500          MOV      r5,#0                 ;1911
002158  e005              B        |L1.8550|
                  |L1.8538|
00215a  f1070701          ADD      r7,r7,#1              ;1885
00215e  b2ff              UXTB     r7,r7                 ;1885
002160  2f3f              CMP      r7,#0x3f              ;1885
002162  f4ffaea3          BCC      |L1.7852|
                  |L1.8550|
002166  2d00              CMP      r5,#0                 ;1918
002168  d0c7              BEQ      |L1.8442|
00216a  f8b8003c          LDRH     r0,[r8,#0x3c]         ;1920
00216e  f88d0000          STRB     r0,[sp,#0]            ;1920
002172  f8980038          LDRB     r0,[r8,#0x38]         ;1921
002176  f88d0001          STRB     r0,[sp,#1]            ;1921
00217a  f898002c          LDRB     r0,[r8,#0x2c]         ;1922
00217e  f88d0002          STRB     r0,[sp,#2]            ;1922
002182  f88d9003          STRB     r9,[sp,#3]            ;1923
002186  4669              MOV      r1,sp                 ;1924
002188  f1050010          ADD      r0,r5,#0x10           ;1924
00218c  f7fffffe          BL       lc640_write_long_ptr
002190  f8980028          LDRB     r0,[r8,#0x28]         ;1926
002194  f88d0000          STRB     r0,[sp,#0]            ;1926
002198  f8980024          LDRB     r0,[r8,#0x24]         ;1927
00219c  f88d0001          STRB     r0,[sp,#1]            ;1927
0021a0  f8980020          LDRB     r0,[r8,#0x20]         ;1928
0021a4  f88d0002          STRB     r0,[sp,#2]            ;1928
0021a8  f88d9003          STRB     r9,[sp,#3]            ;1929
0021ac  4669              MOV      r1,sp                 ;1930
0021ae  f1050014          ADD      r0,r5,#0x14           ;1930
0021b2  f7fffffe          BL       lc640_write_long_ptr
0021b6  f04f0442          MOV      r4,#0x42              ;1932
0021ba  f88d4000          STRB     r4,[sp,#0]            ;1932
0021be  f88d4001          STRB     r4,[sp,#1]            ;1933
0021c2  f88d4002          STRB     r4,[sp,#2]            ;1934
0021c6  f88d4003          STRB     r4,[sp,#3]            ;1935
0021ca  4669              MOV      r1,sp                 ;1936
0021cc  f1050018          ADD      r0,r5,#0x18           ;1936
0021d0  f7fffffe          BL       lc640_write_long_ptr
0021d4  f88d4000          STRB     r4,[sp,#0]            ;1938
0021d8  f88d4001          STRB     r4,[sp,#1]            ;1939
0021dc  f88d4002          STRB     r4,[sp,#2]            ;1940
0021e0  f88d4003          STRB     r4,[sp,#3]            ;1941
0021e4  4669              MOV      r1,sp                 ;1942
0021e6  f105001c          ADD      r0,r5,#0x1c           ;1942
0021ea  f7fffffe          BL       lc640_write_long_ptr
0021ee  e485              B        |L1.6908|
;;;1946   
                          ENDP

                  fz_mem_hndl PROC
;;;1947   //-----------------------------------------------
;;;1948   void fz_mem_hndl(unsigned short in)	 //   
0021f0  e92d4ff8          PUSH     {r3-r11,lr}
;;;1949   {
;;;1950   char data[4];
;;;1951   unsigned int event_ptr=0,lc640_adr,event_ptr_find=0,event_cnt;
0021f4  f04f0600          MOV      r6,#0
0021f8  4634              MOV      r4,r6
;;;1952   //char avar_simbol;
;;;1953   
;;;1954   if(in==1) //  
;;;1955   	{
;;;1956   	event_ptr=lc640_read_int(PTR_EVENT_LOG);
;;;1957   	event_ptr++;	
;;;1958   	if(event_ptr>63)event_ptr=0;	
;;;1959   	lc640_write_int(PTR_EVENT_LOG,event_ptr);	
;;;1960   	
;;;1961       event_cnt=lc640_read_int(CNT_EVENT_LOG);
;;;1962   	if(event_cnt!=63)event_cnt=event_ptr;
;;;1963   	lc640_write_int(CNT_EVENT_LOG,event_cnt); 
;;;1964   	
;;;1965   	lc640_adr=EVENT_LOG+(lc640_read_int(PTR_EVENT_LOG)*32);
;;;1966   	
;;;1967   	data[0]='f';
;;;1968   	data[1]=0; 
;;;1969   	data[2]='Z';
;;;1970   	data[3]=0;
;;;1971   	lc640_write_long_ptr(lc640_adr,data);
;;;1972   
;;;1973   	data[0]=0;
;;;1974   	data[1]=0;
;;;1975   	data[2]=0;
;;;1976   	data[3]=0;
;;;1977   	lc640_write_long_ptr(lc640_adr+4,data);
;;;1978   
;;;1979   	data[0]=LPC_RTC->YEAR;
0021fa  f8df835c          LDR      r8,|L1.9560|
0021fe  46a1              MOV      r9,r4                 ;1951
002200  f44f6a80          MOV      r10,#0x400            ;1965
002204  2801              CMP      r0,#1                 ;1954
002206  d010              BEQ      |L1.8746|
;;;1980   	data[1]=LPC_RTC->MONTH;
;;;1981   	data[2]=LPC_RTC->DOM;
;;;1982   	data[3]=0;
;;;1983   	lc640_write_long_ptr(lc640_adr+8,data);
;;;1984   
;;;1985   	data[0]=LPC_RTC->HOUR;
;;;1986   	data[1]=LPC_RTC->MIN;
;;;1987   	data[2]=LPC_RTC->SEC;
;;;1988   	data[3]=0;
;;;1989   	lc640_write_long_ptr(lc640_adr+12,data);
;;;1990   	
;;;1991   	data[0]='A';
;;;1992   	data[1]='A';
;;;1993   	data[2]='A';
;;;1994   	data[3]='A';
;;;1995   	lc640_write_long_ptr(lc640_adr+16,data);
;;;1996   	
;;;1997   	data[0]='A';
;;;1998   	data[1]='A';
;;;1999   	data[2]='A';
;;;2000   	data[3]='A';
;;;2001   	lc640_write_long_ptr(lc640_adr+20,data);
;;;2002   	
;;;2003   	data[0]='A';
;;;2004   	data[1]='A';
;;;2005   	data[2]='A';
;;;2006   	data[3]='A';
;;;2007   	lc640_write_long_ptr(lc640_adr+24,data);
;;;2008   	
;;;2009   	data[0]='A';
;;;2010   	data[1]='A';
;;;2011   	data[2]='A';
;;;2012   	data[3]='A';
;;;2013   	lc640_write_long_ptr(lc640_adr+28,data);		
;;;2014    	
;;;2015   	}
;;;2016   
;;;2017   else if(in==0)	// 
002208  2800              CMP      r0,#0
00220a  d07d              BEQ      |L1.8968|
;;;2018   	{      
;;;2019   	char i;     
;;;2020   	event_ptr_find=0;
;;;2021   	for (i=0;i<63;i++)
;;;2022   		{
;;;2023   		lc640_adr=EVENT_LOG+(event_ptr_find*32);
;;;2024   
;;;2025        	lc640_read_long_ptr(lc640_adr,data);
;;;2026        
;;;2027        	if(!((data[0]=='f')&&(data[2]=='Z')))
;;;2028        		{        
;;;2029        		if(event_ptr_find)event_ptr_find--;
;;;2030        		else event_ptr_find=63;
;;;2031        		if(event_ptr_find==event_ptr)
;;;2032   				{
;;;2033   				lc640_adr=0;
;;;2034   				break;
;;;2035   				}
;;;2036        		else continue;
;;;2037        		}
;;;2038        	else 
;;;2039        		{
;;;2040        		lc640_read_long_ptr(lc640_adr+16,data);
;;;2041        		if(!((data[0]=='A')&&(data[1]=='A')&&(data[2]=='A')&&(data[3]=='A')))
;;;2042        			{        
;;;2043        			if(event_ptr_find)event_ptr_find--;
;;;2044            		else event_ptr_find=63;
;;;2045            		if(event_ptr_find==event_ptr)
;;;2046   					{
;;;2047   					lc640_adr=0;
;;;2048   					break;
;;;2049   					}
;;;2050        			else continue;
;;;2051        			}
;;;2052        		}	
;;;2053   		}
;;;2054   	if(lc640_adr!=0)
;;;2055   		{
;;;2056   		data[0]=LPC_RTC->YEAR;
;;;2057   		data[1]=LPC_RTC->MONTH;
;;;2058   		data[2]=LPC_RTC->DOM;
;;;2059   		data[3]=0;
;;;2060   		lc640_write_long_ptr(lc640_adr+16,data);
;;;2061   	
;;;2062   		data[0]=LPC_RTC->HOUR;
;;;2063   		data[1]=LPC_RTC->MIN;
;;;2064   		data[2]=LPC_RTC->SEC;
;;;2065   		data[3]=0;
;;;2066   		lc640_write_long_ptr(lc640_adr+20,data);
;;;2067   		
;;;2068   		data[0]='C';
;;;2069   		data[1]='C';
;;;2070   		data[2]='C';
;;;2071   		data[3]='C';
;;;2072   		lc640_write_long_ptr(lc640_adr+24,data);
;;;2073   		
;;;2074   		data[0]='C';
;;;2075   		data[1]='C';
;;;2076   		data[2]='C';
;;;2077   		data[3]='C';
;;;2078   		lc640_write_long_ptr(lc640_adr+28,data);
;;;2079   		}
;;;2080   	}
;;;2081   else if(in==10) 	//  
00220c  280a              CMP      r0,#0xa
00220e  d17c              BNE      |L1.8970|
;;;2082   	{      
;;;2083   	char i;     
;;;2084   
;;;2085   	event_ptr_find=0;
;;;2086   	for (i=0;i<63;i++)
002210  f04f0700          MOV      r7,#0
                  |L1.8724|
;;;2087   		{
;;;2088   		lc640_adr=EVENT_LOG+(event_ptr_find*32);
002214  eb0a1544          ADD      r5,r10,r4,LSL #5
;;;2089   
;;;2090        	lc640_read_long_ptr(lc640_adr,data);
002218  4669              MOV      r1,sp
00221a  4628              MOV      r0,r5
00221c  f7fffffe          BL       lc640_read_long_ptr
;;;2091        
;;;2092        	if(!((data[0]=='f')&&(data[2]=='Z')))
002220  f89d0000          LDRB     r0,[sp,#0]
002224  2866              CMP      r0,#0x66
002226  d171              BNE      |L1.8972|
002228  e11c              B        |L1.9316|
                  |L1.8746|
00222a  f44f6560          MOV      r5,#0xe00             ;1956
00222e  4628              MOV      r0,r5                 ;1956
002230  f7fffffe          BL       lc640_read_int
002234  f1000001          ADD      r0,r0,#1              ;1957
002238  4604              MOV      r4,r0                 ;1957
00223a  2c3f              CMP      r4,#0x3f              ;1958
00223c  d901              BLS      |L1.8770|
00223e  f04f0400          MOV      r4,#0                 ;1958
                  |L1.8770|
002242  b221              SXTH     r1,r4                 ;1959
002244  4628              MOV      r0,r5                 ;1959
002246  f7fffffe          BL       lc640_write_int
00224a  f6406602          MOV      r6,#0xe02             ;1961
00224e  4630              MOV      r0,r6                 ;1961
002250  f7fffffe          BL       lc640_read_int
002254  283f              CMP      r0,#0x3f              ;1962
002256  d000              BEQ      |L1.8794|
002258  4620              MOV      r0,r4                 ;1962
                  |L1.8794|
00225a  b201              SXTH     r1,r0                 ;1963
00225c  4630              MOV      r0,r6                 ;1963
00225e  f7fffffe          BL       lc640_write_int
002262  4628              MOV      r0,r5                 ;1965
002264  f7fffffe          BL       lc640_read_int
002268  eb0a1440          ADD      r4,r10,r0,LSL #5      ;1965
00226c  f04f0066          MOV      r0,#0x66              ;1967
002270  f88d0000          STRB     r0,[sp,#0]            ;1967
002274  f88d9001          STRB     r9,[sp,#1]            ;1968
002278  f04f005a          MOV      r0,#0x5a              ;1969
00227c  f88d0002          STRB     r0,[sp,#2]            ;1969
002280  f88d9003          STRB     r9,[sp,#3]            ;1970
002284  4669              MOV      r1,sp                 ;1971
002286  4620              MOV      r0,r4                 ;1971
002288  f7fffffe          BL       lc640_write_long_ptr
00228c  f8cd9000          STR      r9,[sp,#0]            ;1976
002290  4669              MOV      r1,sp                 ;1977
002292  1d20              ADDS     r0,r4,#4              ;1977
002294  f7fffffe          BL       lc640_write_long_ptr
002298  f8b8003c          LDRH     r0,[r8,#0x3c]         ;1979
00229c  f88d0000          STRB     r0,[sp,#0]            ;1979
0022a0  f8980038          LDRB     r0,[r8,#0x38]         ;1980
0022a4  f88d0001          STRB     r0,[sp,#1]            ;1980
0022a8  f898002c          LDRB     r0,[r8,#0x2c]         ;1981
0022ac  f88d0002          STRB     r0,[sp,#2]            ;1981
0022b0  f88d9003          STRB     r9,[sp,#3]            ;1982
0022b4  4669              MOV      r1,sp                 ;1983
0022b6  f1040008          ADD      r0,r4,#8              ;1983
0022ba  f7fffffe          BL       lc640_write_long_ptr
0022be  f8980028          LDRB     r0,[r8,#0x28]         ;1985
0022c2  f88d0000          STRB     r0,[sp,#0]            ;1985
0022c6  f8980024          LDRB     r0,[r8,#0x24]         ;1986
0022ca  f88d0001          STRB     r0,[sp,#1]            ;1986
0022ce  f8980020          LDRB     r0,[r8,#0x20]         ;1987
0022d2  f88d0002          STRB     r0,[sp,#2]            ;1987
0022d6  f88d9003          STRB     r9,[sp,#3]            ;1988
0022da  4669              MOV      r1,sp                 ;1989
0022dc  f104000c          ADD      r0,r4,#0xc            ;1989
0022e0  f7fffffe          BL       lc640_write_long_ptr
0022e4  f04f0541          MOV      r5,#0x41              ;1991
0022e8  f88d5000          STRB     r5,[sp,#0]            ;1991
0022ec  f88d5001          STRB     r5,[sp,#1]            ;1992
0022f0  f88d5002          STRB     r5,[sp,#2]            ;1993
0022f4  f88d5003          STRB     r5,[sp,#3]            ;1994
0022f8  4669              MOV      r1,sp                 ;1995
0022fa  f1040010          ADD      r0,r4,#0x10           ;1995
0022fe  f7fffffe          BL       lc640_write_long_ptr
002302  f88d5000          STRB     r5,[sp,#0]            ;1997
002306  e002              B        |L1.8974|
                  |L1.8968|
002308  e027              B        |L1.9050|
                  |L1.8970|
00230a  e025              B        |L1.9048|
                  |L1.8972|
00230c  e0ae              B        |L1.9324|
                  |L1.8974|
00230e  f88d5001          STRB     r5,[sp,#1]            ;1998
002312  f88d5002          STRB     r5,[sp,#2]            ;1999
002316  f88d5003          STRB     r5,[sp,#3]            ;2000
00231a  4669              MOV      r1,sp                 ;2001
00231c  f1040014          ADD      r0,r4,#0x14           ;2001
002320  f7fffffe          BL       lc640_write_long_ptr
002324  f88d5000          STRB     r5,[sp,#0]            ;2003
002328  f88d5001          STRB     r5,[sp,#1]            ;2004
00232c  f88d5002          STRB     r5,[sp,#2]            ;2005
002330  f88d5003          STRB     r5,[sp,#3]            ;2006
002334  4669              MOV      r1,sp                 ;2007
002336  f1040018          ADD      r0,r4,#0x18           ;2007
00233a  f7fffffe          BL       lc640_write_long_ptr
00233e  f88d5000          STRB     r5,[sp,#0]            ;2009
002342  f88d5001          STRB     r5,[sp,#1]            ;2010
002346  f88d5002          STRB     r5,[sp,#2]            ;2011
00234a  f88d5003          STRB     r5,[sp,#3]            ;2012
00234e  4669              MOV      r1,sp                 ;2013
002350  f104001c          ADD      r0,r4,#0x1c           ;2013
002354  f7fffffe          BL       lc640_write_long_ptr
                  |L1.9048|
;;;2093        		{        
;;;2094        		if(event_ptr_find)event_ptr_find--;
;;;2095        		else event_ptr_find=63;
;;;2096        		if(event_ptr_find==event_ptr)
;;;2097   				{
;;;2098   				lc640_adr=0;
;;;2099   				break;
;;;2100   				}
;;;2101        		else continue;
;;;2102        		}
;;;2103        	else 
;;;2104        		{
;;;2105        		lc640_read_long_ptr(lc640_adr+16,data);
;;;2106        		if(!((data[0]=='A')&&(data[1]=='A')&&(data[2]=='A')&&(data[3]=='A')))
;;;2107        			{        
;;;2108        			if(event_ptr_find)event_ptr_find--;
;;;2109            		else event_ptr_find=63;
;;;2110            		if(event_ptr_find==event_ptr)
;;;2111   					{
;;;2112   					lc640_adr=0;
;;;2113   					break;
;;;2114   					}
;;;2115        			else continue;
;;;2116        			}
;;;2117        		}	
;;;2118   		}
;;;2119   	if(lc640_adr!=0)
;;;2120   		{
;;;2121   		data[0]=LPC_RTC->YEAR;
;;;2122   		data[1]=LPC_RTC->MONTH;
;;;2123   		data[2]=LPC_RTC->DOM;
;;;2124   		data[3]=0;
;;;2125   		lc640_write_long_ptr(lc640_adr+16,data);
;;;2126   	
;;;2127   		data[0]=LPC_RTC->HOUR;
;;;2128   		data[1]=LPC_RTC->MIN;
;;;2129   		data[2]=LPC_RTC->SEC;
;;;2130   		data[3]=0;
;;;2131   		lc640_write_long_ptr(lc640_adr+20,data);
;;;2132   		
;;;2133   		data[0]='B';
;;;2134   		data[1]='B';
;;;2135   		data[2]='B';
;;;2136   		data[3]='B';
;;;2137   		lc640_write_long_ptr(lc640_adr+24,data);
;;;2138   		
;;;2139   		data[0]='B';
;;;2140   		data[1]='B';
;;;2141   		data[2]='B';
;;;2142   		data[3]='B';
;;;2143   		lc640_write_long_ptr(lc640_adr+28,data);
;;;2144   		}
;;;2145   	}
;;;2146   }
002358  e496              B        |L1.7304|
                  |L1.9050|
00235a  f04f0700          MOV      r7,#0                 ;2021
                  |L1.9054|
00235e  eb0a1544          ADD      r5,r10,r4,LSL #5      ;2023
002362  4669              MOV      r1,sp                 ;2025
002364  4628              MOV      r0,r5                 ;2025
002366  f7fffffe          BL       lc640_read_long_ptr
00236a  f89d0000          LDRB     r0,[sp,#0]            ;2027
00236e  2866              CMP      r0,#0x66              ;2027
002370  d103              BNE      |L1.9082|
002372  f89d0002          LDRB     r0,[sp,#2]            ;2027
002376  285a              CMP      r0,#0x5a              ;2027
002378  d00a              BEQ      |L1.9104|
                  |L1.9082|
00237a  b114              CBZ      r4,|L1.9090|
00237c  f1a40401          SUB      r4,r4,#1              ;2029
002380  e001              B        |L1.9094|
                  |L1.9090|
002382  f04f043f          MOV      r4,#0x3f              ;2030
                  |L1.9094|
002386  42b4              CMP      r4,r6                 ;2031
002388  d122              BNE      |L1.9168|
00238a  f04f0500          MOV      r5,#0                 ;2033
00238e  e024              B        |L1.9178|
                  |L1.9104|
002390  4669              MOV      r1,sp                 ;2040
002392  f1050010          ADD      r0,r5,#0x10           ;2040
002396  f7fffffe          BL       lc640_read_long_ptr
00239a  f89d0000          LDRB     r0,[sp,#0]            ;2041
00239e  2841              CMP      r0,#0x41              ;2041
0023a0  d10b              BNE      |L1.9146|
0023a2  f89d0001          LDRB     r0,[sp,#1]            ;2041
0023a6  2841              CMP      r0,#0x41              ;2041
0023a8  d107              BNE      |L1.9146|
0023aa  f89d0002          LDRB     r0,[sp,#2]            ;2041
0023ae  2841              CMP      r0,#0x41              ;2041
0023b0  d103              BNE      |L1.9146|
0023b2  f89d0003          LDRB     r0,[sp,#3]            ;2041
0023b6  2841              CMP      r0,#0x41              ;2041
0023b8  d00a              BEQ      |L1.9168|
                  |L1.9146|
0023ba  b114              CBZ      r4,|L1.9154|
0023bc  f1a40401          SUB      r4,r4,#1              ;2043
0023c0  e001              B        |L1.9158|
                  |L1.9154|
0023c2  f04f043f          MOV      r4,#0x3f              ;2044
                  |L1.9158|
0023c6  42b4              CMP      r4,r6                 ;2045
0023c8  d102              BNE      |L1.9168|
0023ca  f04f0500          MOV      r5,#0                 ;2047
0023ce  e004              B        |L1.9178|
                  |L1.9168|
0023d0  f1070701          ADD      r7,r7,#1              ;2021
0023d4  b2ff              UXTB     r7,r7                 ;2021
0023d6  2f3f              CMP      r7,#0x3f              ;2021
0023d8  d3c1              BCC      |L1.9054|
                  |L1.9178|
0023da  2d00              CMP      r5,#0                 ;2054
0023dc  d0bc              BEQ      |L1.9048|
0023de  f8b8003c          LDRH     r0,[r8,#0x3c]         ;2056
0023e2  f88d0000          STRB     r0,[sp,#0]            ;2056
0023e6  f8980038          LDRB     r0,[r8,#0x38]         ;2057
0023ea  f88d0001          STRB     r0,[sp,#1]            ;2057
0023ee  f898002c          LDRB     r0,[r8,#0x2c]         ;2058
0023f2  f88d0002          STRB     r0,[sp,#2]            ;2058
0023f6  f88d9003          STRB     r9,[sp,#3]            ;2059
0023fa  4669              MOV      r1,sp                 ;2060
0023fc  f1050010          ADD      r0,r5,#0x10           ;2060
002400  f7fffffe          BL       lc640_write_long_ptr
002404  f8980028          LDRB     r0,[r8,#0x28]         ;2062
002408  f88d0000          STRB     r0,[sp,#0]            ;2062
00240c  f8980024          LDRB     r0,[r8,#0x24]         ;2063
002410  f88d0001          STRB     r0,[sp,#1]            ;2063
002414  f8980020          LDRB     r0,[r8,#0x20]         ;2064
002418  f88d0002          STRB     r0,[sp,#2]            ;2064
00241c  f88d9003          STRB     r9,[sp,#3]            ;2065
002420  4669              MOV      r1,sp                 ;2066
002422  f1050014          ADD      r0,r5,#0x14           ;2066
002426  f7fffffe          BL       lc640_write_long_ptr
00242a  f04f0443          MOV      r4,#0x43              ;2068
00242e  f88d4000          STRB     r4,[sp,#0]            ;2068
002432  f88d4001          STRB     r4,[sp,#1]            ;2069
002436  f88d4002          STRB     r4,[sp,#2]            ;2070
00243a  f88d4003          STRB     r4,[sp,#3]            ;2071
00243e  4669              MOV      r1,sp                 ;2072
002440  f1050018          ADD      r0,r5,#0x18           ;2072
002444  f7fffffe          BL       lc640_write_long_ptr
002448  f88d4000          STRB     r4,[sp,#0]            ;2074
00244c  f88d4001          STRB     r4,[sp,#1]            ;2075
002450  f88d4002          STRB     r4,[sp,#2]            ;2076
002454  f88d4003          STRB     r4,[sp,#3]            ;2077
002458  4669              MOV      r1,sp                 ;2078
00245a  f105001c          ADD      r0,r5,#0x1c           ;2078
00245e  f7fffffe          BL       lc640_write_long_ptr
                  |L1.9314|
002462  e411              B        |L1.7304|
                  |L1.9316|
002464  f89d0002          LDRB     r0,[sp,#2]            ;2092
002468  285a              CMP      r0,#0x5a              ;2092
00246a  d00a              BEQ      |L1.9346|
                  |L1.9324|
00246c  b114              CBZ      r4,|L1.9332|
00246e  f1a40401          SUB      r4,r4,#1              ;2094
002472  e001              B        |L1.9336|
                  |L1.9332|
002474  f04f043f          MOV      r4,#0x3f              ;2095
                  |L1.9336|
002478  42b4              CMP      r4,r6                 ;2096
00247a  d122              BNE      |L1.9410|
00247c  f04f0500          MOV      r5,#0                 ;2098
002480  e025              B        |L1.9422|
                  |L1.9346|
002482  4669              MOV      r1,sp                 ;2105
002484  f1050010          ADD      r0,r5,#0x10           ;2105
002488  f7fffffe          BL       lc640_read_long_ptr
00248c  f89d0000          LDRB     r0,[sp,#0]            ;2106
002490  2841              CMP      r0,#0x41              ;2106
002492  d10b              BNE      |L1.9388|
002494  f89d0001          LDRB     r0,[sp,#1]            ;2106
002498  2841              CMP      r0,#0x41              ;2106
00249a  d107              BNE      |L1.9388|
00249c  f89d0002          LDRB     r0,[sp,#2]            ;2106
0024a0  2841              CMP      r0,#0x41              ;2106
0024a2  d103              BNE      |L1.9388|
0024a4  f89d0003          LDRB     r0,[sp,#3]            ;2106
0024a8  2841              CMP      r0,#0x41              ;2106
0024aa  d00a              BEQ      |L1.9410|
                  |L1.9388|
0024ac  b114              CBZ      r4,|L1.9396|
0024ae  f1a40401          SUB      r4,r4,#1              ;2108
0024b2  e001              B        |L1.9400|
                  |L1.9396|
0024b4  f04f043f          MOV      r4,#0x3f              ;2109
                  |L1.9400|
0024b8  42b4              CMP      r4,r6                 ;2110
0024ba  d102              BNE      |L1.9410|
0024bc  f04f0500          MOV      r5,#0                 ;2112
0024c0  e005              B        |L1.9422|
                  |L1.9410|
0024c2  f1070701          ADD      r7,r7,#1              ;2086
0024c6  b2ff              UXTB     r7,r7                 ;2086
0024c8  2f3f              CMP      r7,#0x3f              ;2086
0024ca  f4ffaea3          BCC      |L1.8724|
                  |L1.9422|
0024ce  2d00              CMP      r5,#0                 ;2119
0024d0  d0c7              BEQ      |L1.9314|
0024d2  f8b8003c          LDRH     r0,[r8,#0x3c]         ;2121
0024d6  f88d0000          STRB     r0,[sp,#0]            ;2121
0024da  f8980038          LDRB     r0,[r8,#0x38]         ;2122
0024de  f88d0001          STRB     r0,[sp,#1]            ;2122
0024e2  f898002c          LDRB     r0,[r8,#0x2c]         ;2123
0024e6  f88d0002          STRB     r0,[sp,#2]            ;2123
0024ea  f88d9003          STRB     r9,[sp,#3]            ;2124
0024ee  4669              MOV      r1,sp                 ;2125
0024f0  f1050010          ADD      r0,r5,#0x10           ;2125
0024f4  f7fffffe          BL       lc640_write_long_ptr
0024f8  f8980028          LDRB     r0,[r8,#0x28]         ;2127
0024fc  f88d0000          STRB     r0,[sp,#0]            ;2127
002500  f8980024          LDRB     r0,[r8,#0x24]         ;2128
002504  f88d0001          STRB     r0,[sp,#1]            ;2128
002508  f8980020          LDRB     r0,[r8,#0x20]         ;2129
00250c  f88d0002          STRB     r0,[sp,#2]            ;2129
002510  f88d9003          STRB     r9,[sp,#3]            ;2130
002514  4669              MOV      r1,sp                 ;2131
002516  f1050014          ADD      r0,r5,#0x14           ;2131
00251a  f7fffffe          BL       lc640_write_long_ptr
00251e  f04f0442          MOV      r4,#0x42              ;2133
002522  f88d4000          STRB     r4,[sp,#0]            ;2133
002526  f88d4001          STRB     r4,[sp,#1]            ;2134
00252a  f88d4002          STRB     r4,[sp,#2]            ;2135
00252e  f88d4003          STRB     r4,[sp,#3]            ;2136
002532  4669              MOV      r1,sp                 ;2137
002534  f1050018          ADD      r0,r5,#0x18           ;2137
002538  f7fffffe          BL       lc640_write_long_ptr
00253c  f88d4000          STRB     r4,[sp,#0]            ;2139
002540  f88d4001          STRB     r4,[sp,#1]            ;2140
002544  f88d4002          STRB     r4,[sp,#2]            ;2141
002548  f88d4003          STRB     r4,[sp,#3]            ;2142
00254c  4669              MOV      r1,sp                 ;2143
00254e  f105001c          ADD      r0,r5,#0x1c           ;2143
002552  f7fffffe          BL       lc640_write_long_ptr
002556  e41c              B        |L1.7570|
                          ENDP

                  |L1.9560|
                          DCD      0x40024000

                          AREA ||area_number.2||, CODE, READONLY, ALIGN=2

                          EXPORTAS ||area_number.2||, ||.text||
                  ke_mem_hndl PROC
;;;75     //-----------------------------------------------
;;;76     void avar_hndl(void)
000000  b5f3              PUSH     {r0,r1,r4-r7,lr}
;;;77     {
;;;78     //static unsigned avar_stat_old;
;;;79     char i;
;;;80     //unsigned avar_stat_new,avar_stat_offed;
;;;81     
;;;82     if(net_av)		SET_REG(avar_stat,1,0,1);
000002  b083              SUB      sp,sp,#0xc
000004  4605              MOV      r5,r0
000006  eb050045          ADD      r0,r5,r5,LSL #1
00000a  4948              LDR      r1,|L2.300|
00000c  eb001005          ADD      r0,r0,r5,LSL #4
000010  eb010180          ADD      r1,r1,r0,LSL #2
;;;83     else	   			SET_REG(avar_stat,0,0,1);
000014  4846              LDR      r0,|L2.304|
000016  f9b00000          LDRSH    r0,[r0,#0]  ; bat_u_old_cnt
;;;84     
;;;85     for(i=0;i<2;i++)
00001a  f1000001          ADD      r0,r0,#1
;;;86     	{
;;;87     	if(bat[i]._av&3)	SET_REG(avar_stat,1,1+i,1);
00001e  eb010040          ADD      r0,r1,r0,LSL #1
000022  f9b00020          LDRSH    r0,[r0,#0x20]
000026  9001              STR      r0,[sp,#4]
000028  f44f6660          MOV      r6,#0xe00
00002c  4630              MOV      r0,r6
00002e  f7fffffe          BL       lc640_read_int
000032  f1000001          ADD      r0,r0,#1
000036  4604              MOV      r4,r0
000038  2c3f              CMP      r4,#0x3f
00003a  d901              BLS      |L2.64|
00003c  f04f0400          MOV      r4,#0
                  |L2.64|
000040  b221              SXTH     r1,r4
000042  4630              MOV      r0,r6
000044  f7fffffe          BL       lc640_write_int
000048  f6406702          MOV      r7,#0xe02
00004c  4638              MOV      r0,r7
;;;88     	else	   			SET_REG(avar_stat,0,1+i,1);
00004e  f7fffffe          BL       lc640_read_int
000052  283f              CMP      r0,#0x3f
000054  d000              BEQ      |L2.88|
000056  4620              MOV      r0,r4
                  |L2.88|
000058  b201              SXTH     r1,r0
00005a  4638              MOV      r0,r7
00005c  f7fffffe          BL       lc640_write_int
000060  4630              MOV      r0,r6                 ;85
000062  f7fffffe          BL       lc640_read_int
000066  f44f6180          MOV      r1,#0x400             ;85
;;;89     	}
;;;90     
;;;91     for(i=0;i<12;i++)
00006a  eb011440          ADD      r4,r1,r0,LSL #5
;;;92     	{
;;;93     	if(bps[i]._av&0xef)	SET_REG(avar_stat,1,3+i,1);
00006e  f04f0042          MOV      r0,#0x42
000072  f88d0008          STRB     r0,[sp,#8]
000076  f88d5009          STRB     r5,[sp,#9]
00007a  f04f004b          MOV      r0,#0x4b
00007e  f88d000a          STRB     r0,[sp,#0xa]
000082  f04f0600          MOV      r6,#0
000086  f88d600b          STRB     r6,[sp,#0xb]
00008a  a902              ADD      r1,sp,#8
00008c  4620              MOV      r0,r4
00008e  f7fffffe          BL       lc640_write_long_ptr
000092  f89d0010          LDRB     r0,[sp,#0x10]
000096  f88d0008          STRB     r0,[sp,#8]
;;;94     	else	   		SET_REG(avar_stat,0,3+i,1);
00009a  f89d0011          LDRB     r0,[sp,#0x11]
00009e  f88d0009          STRB     r0,[sp,#9]
0000a2  f89d0004          LDRB     r0,[sp,#4]
0000a6  f88d000a          STRB     r0,[sp,#0xa]
0000aa  f89d0005          LDRB     r0,[sp,#5]            ;91
0000ae  f88d000b          STRB     r0,[sp,#0xb]          ;91
;;;95     	}
;;;96     
;;;97     for(i=0;i<6;i++)
0000b2  a902              ADD      r1,sp,#8
0000b4  1d20              ADDS     r0,r4,#4
;;;98     	{
;;;99     	if(av_inv[i])	SET_REG(avar_stat,1,15+i,1);
0000b6  f7fffffe          BL       lc640_write_long_ptr
0000ba  f24020a2          MOV      r0,#0x2a2
0000be  f7fffffe          BL       lc640_read_long
0000c2  4d1c              LDR      r5,|L2.308|
0000c4  6028              STR      r0,[r5,#0]  ; ke_date
0000c6  4629              MOV      r1,r5
0000c8  f1040008          ADD      r0,r4,#8
0000cc  f7fffffe          BL       lc640_write_long_ptr
0000d0  f24020a6          MOV      r0,#0x2a6
0000d4  f7fffffe          BL       lc640_read_long
;;;100    	else	   		SET_REG(avar_stat,0,15+i,1);
0000d8  6068              STR      r0,[r5,#4]  ; ke_date
0000da  1d29              ADDS     r1,r5,#4
0000dc  f104000c          ADD      r0,r4,#0xc
0000e0  f7fffffe          BL       lc640_write_long_ptr
0000e4  4d14              LDR      r5,|L2.312|
0000e6  8ba8              LDRH     r0,[r5,#0x1c]         ;97
0000e8  f88d0008          STRB     r0,[sp,#8]            ;97
0000ec  7e28              LDRB     r0,[r5,#0x18]         ;97
0000ee  f88d0009          STRB     r0,[sp,#9]            ;97
;;;101    	}
;;;102    
;;;103    /*for(i=0;i<4;i++)
;;;104    	{
;;;105    	if(av_dt[i])	SET_REG(avar_stat,1,21+i,1);
;;;106    	else	   		SET_REG(avar_stat,0,21+i,1);
;;;107    	}  */
;;;108    for(i=0;i<4;i++)
0000f2  7b28              LDRB     r0,[r5,#0xc]
;;;109    	{
;;;110    	if(sk_av_stat[i]==sasON)	SET_REG(avar_stat,1,24+i,1);
0000f4  f88d000a          STRB     r0,[sp,#0xa]
0000f8  f88d600b          STRB     r6,[sp,#0xb]
;;;111    	else	   		SET_REG(avar_stat,0,24+i,1);
0000fc  a902              ADD      r1,sp,#8
0000fe  f1040010          ADD      r0,r4,#0x10
000102  f7fffffe          BL       lc640_write_long_ptr
000106  7a28              LDRB     r0,[r5,#8]
000108  f88d0008          STRB     r0,[sp,#8]
00010c  7928              LDRB     r0,[r5,#4]            ;108
00010e  f88d0009          STRB     r0,[sp,#9]            ;108
000112  7828              LDRB     r0,[r5,#0]            ;108
000114  f88d000a          STRB     r0,[sp,#0xa]          ;108
;;;112    	}
;;;113    
;;;114    //if(uout_av)			SET_REG(avar_stat,1,28,1);
;;;115    //else	   			SET_REG(avar_stat,0,28,1);
;;;116    
;;;117    
;;;118    avar_stat_new=(avar_stat^avar_stat_old)&avar_stat;
000118  f88d600b          STRB     r6,[sp,#0xb]
00011c  a902              ADD      r1,sp,#8
00011e  f1040014          ADD      r0,r4,#0x14
;;;119    
;;;120    avar_ind_stat|=avar_stat_new;
000122  f7fffffe          BL       lc640_write_long_ptr
000126  b005              ADD      sp,sp,#0x14
;;;121    
;;;122    if((SK_ZVUK_EN[0])) avar_ind_stat&=(~(1UL<<24));
000128  bdf0              POP      {r4-r7,pc}
;;;123    if((SK_ZVUK_EN[1])) avar_ind_stat&=(~(1UL<<25));
;;;124    if((SK_ZVUK_EN[2])) avar_ind_stat&=(~(1UL<<26));
;;;125    if((SK_ZVUK_EN[3])) avar_ind_stat&=(~(1UL<<27));	
;;;126    
;;;127    
;;;128    avar_stat_offed=~((avar_stat^avar_stat_old)&avar_stat_old);
;;;129    
;;;130    if(!AV_OFF_AVT)avar_stat_offed|=0xeffffffe;
;;;131    
;;;132    avar_ind_stat&=avar_stat_offed; 
;;;133    
;;;134    avar_stat_old=avar_stat;
;;;135    
;;;136    //oleg_start
;;;137    
;;;138    
;;;139    
;;;140    rki_avar1_stat=(sk_alarm<<8)|(status_izm_r&0x3F);
;;;141    rki_avar1_stat_new=(rki_avar1_stat^rki_avar1_stat_old)&rki_avar1_stat;
;;;142    rki_avar1_ind_stat|=rki_avar1_stat_new;
;;;143    rki_avar1_stat_offed=~((rki_avar1_stat^rki_avar1_stat_old)&rki_avar1_stat_old);
;;;144    rki_avar1_ind_stat&=rki_avar1_stat_offed;
;;;145    rki_avar1_stat_old=rki_avar1_stat;
;;;146    
;;;147    rki_avarI1_stat=status_di1;
;;;148    rki_avarI1_stat_new=(rki_avarI1_stat^rki_avarI1_stat_old)&rki_avarI1_stat;
;;;149    rki_avarI1_ind_stat|=rki_avarI1_stat_new;
;;;150    rki_avarI1_stat_offed=~((rki_avarI1_stat^rki_avarI1_stat_old)&rki_avarI1_stat_old);
;;;151    rki_avarI1_ind_stat&=rki_avarI1_stat_offed;
;;;152    rki_avarI1_stat_old=rki_avarI1_stat;
;;;153    
;;;154    rki_avarI2_stat=status_di2;
;;;155    rki_avarI2_stat_new=(rki_avarI2_stat^rki_avarI2_stat_old)&rki_avarI2_stat;
;;;156    rki_avarI2_ind_stat|=rki_avarI2_stat_new;
;;;157    rki_avarI2_stat_offed=~((rki_avarI2_stat^rki_avarI2_stat_old)&rki_avarI2_stat_old);
;;;158    rki_avarI2_ind_stat&=rki_avarI2_stat_offed;
;;;159    rki_avarI2_stat_old=rki_avarI2_stat;
;;;160    //oleg_end
;;;161    }
;;;162    
                          ENDP

00012a  0000              DCW      0x0000
                  |L2.300|
                          DCD      bat
                  |L2.304|
                          DCD      bat_u_old_cnt
                  |L2.308|
                          DCD      ke_date
                  |L2.312|
                          DCD      0x40024020

                          AREA ||.data||, DATA, ALIGN=2

                  avar_stat
                          DCD      0x00000000
                  avar_ind_stat
                          DCD      0x00000000
                  avar_stat_old
                          DCD      0x00000000
                  avar_stat_new
                          DCD      0x00000000
                  avar_stat_offed
                          DCD      0x00000000
                  rki_avar1_stat
                          DCD      0x00000000
                  rki_avar1_ind_stat
                          DCD      0x00000000
                  rki_avar1_stat_old
                          DCD      0x00000000
                  rki_avar1_stat_new
                          DCD      0x00000000
                  rki_avar1_stat_offed
                          DCD      0x00000000
                  rki_avarI1_stat
                          DCD      0x00000000
                  rki_avarI1_ind_stat
                          DCD      0x00000000
                  rki_avarI1_stat_old
                          DCD      0x00000000
                  rki_avarI1_stat_new
                          DCD      0x00000000
                  rki_avarI1_stat_offed
                          DCD      0x00000000
                  rki_avarI2_stat
                          DCD      0x00000000
                  rki_avarI2_ind_stat
                          DCD      0x00000000
                  rki_avarI2_stat_old
                          DCD      0x00000000
                  rki_avarI2_stat_new
                          DCD      0x00000000
                  rki_avarI2_stat_offed
                          DCD      0x00000000
                  av_inv
                          DCD      0x00000000
000054  0000              DCB      0x00,0x00
