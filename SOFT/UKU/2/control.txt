; generated by ARM C/C++ Compiler, 4.1 [Build 644]
; commandline ArmCC [--list --debug -c --asm --interleave -o.\EXE\control.o --asm_dir=.\ --list_dir=.\ --depend=.\EXE\control.d --feedback=.\EXE\UKU_220_IPS_TERMOKOMPENSAT.fed --cpu=Cortex-M3 --apcs=interwork -O1 -IC:\Keil\ARM\CMSIS\Include -IC:\Keil\ARM\INC\NXP\LPC17xx -D__MICROLIB -DUKU_220_IPS_TERMOKOMPENSAT -DUKU2071x --omf_browse=.\EXE\control.crf control.c]
                          THUMB

                          AREA ||.text||, CODE, READONLY, ALIGN=2

                  ke_start PROC
;;;266    //-----------------------------------------------
;;;267    void ke_start(char in)
000000  e92d41fc          PUSH     {r2-r8,lr}
;;;268    {          
000004  4606              MOV      r6,r0
;;;269    ke_start_stat=(enum_ke_start_stat)0;		 
000006  4df9              LDR      r5,|L1.1004|
000008  f04f0700          MOV      r7,#0
00000c  762f              STRB     r7,[r5,#0x18]
;;;270    
;;;271    if(spc_stat==spcVZ)ke_start_stat=kssNOT_VZ;
00000e  7d28              LDRB     r0,[r5,#0x14]  ; spc_stat
000010  f04f0301          MOV      r3,#1
000014  2802              CMP      r0,#2
000016  d00f              BEQ      |L1.56|
;;;272    #ifndef UKU_220_IPS_TERMOKOMPENSAT
;;;273    else if(BAT_IS_ON[in]!=bisON)ke_start_stat=kssNOT_BAT;
;;;274    #endif
;;;275    else if(bat[in]._av&(1<<0))ke_start_stat=kssNOT_BAT_AV;
000018  eb060146          ADD      r1,r6,r6,LSL #1
00001c  eb011206          ADD      r2,r1,r6,LSL #4
000020  49f3              LDR      r1,|L1.1008|
000022  eb010482          ADD      r4,r1,r2,LSL #2
000026  f894103d          LDRB     r1,[r4,#0x3d]
00002a  07ca              LSLS     r2,r1,#31
00002c  d006              BEQ      |L1.60|
00002e  f04f0066          MOV      r0,#0x66
000032  7628              STRB     r0,[r5,#0x18]
                  |L1.52|
;;;276    else if(bat[in]._temper_stat&(1<<1))ke_start_stat=kssNOT_BAT_AV_T;
;;;277    else if(bat[in]._av&(1<<1))ke_start_stat=kssNOT_BAT_AV_ASS;
;;;278    else if(bat[in]._Ib>IKB)ke_start_stat=kssNOT_BAT_ZAR;
;;;279    else if(bat[in]._Ib<-IKB)ke_start_stat=kssNOT_BAT_RAZR;
;;;280    else if((spc_stat==spcKE)&&(spc_bat==0))ke_start_stat=kssNOT_KE1;
;;;281    else if((spc_stat==spcKE)&&(spc_bat==1))ke_start_stat=kssNOT_KE2;
;;;282    else 
;;;283    	{
;;;284    
;;;285    	ke_start_stat=kssYES;
;;;286    
;;;287    	spc_stat=spcKE;
;;;288    	__ee_spc_stat=spcKE;
;;;289    	lc640_write_int(EE_SPC_STAT,__ee_spc_stat);
;;;290    	
;;;291    	spc_bat=in;
;;;292    	__ee_spc_bat=in;
;;;293    	lc640_write_int(EE_SPC_BAT,__ee_spc_bat);
;;;294    
;;;295    	bat[in]._zar_cnt_ke=0;
;;;296    	lc640_write_int(ADR_EE_BAT_ZAR_CNT_KE[in],0);
;;;297    	
;;;298    	spc_phase=0;
;;;299    	__ee_spc_phase=0;
;;;300    	lc640_write_int(EE_SPC_PHASE,__ee_spc_phase);
;;;301    
;;;302    	//ke_mem_hndl(in,lc640_read_int(ADR_EE_BAT_ZAR_CNT_KE[spc_bat]));
;;;303    
;;;304    		{					
;;;305    		signed short temp_temp;
;;;306    		signed char temp;
;;;307    		temp_temp=bat[in]._u_old[((bat_u_old_cnt+1)&0x07)]; 
;;;308    		    
;;;309    		temp=LPC_RTC->YEAR;
;;;310    		gran_char(&temp,1,99);
;;;311    		*((char*)(&(ke_date[0])))=temp;
;;;312    			
;;;313    		temp=LPC_RTC->MONTH;
;;;314    		gran_char(&temp,1,12);
;;;315    		*(((char*)(&(ke_date[0])))+1)=temp;
;;;316    		
;;;317    		temp=LPC_RTC->DOM;
;;;318    		gran_char(&temp,1,31);
;;;319    		*(((char*)(&(ke_date[0])))+2)=temp;			
;;;320    				
;;;321    		*(((char*)(&(ke_date[0])))+3)=*((char*)&temp_temp);
;;;322    		lc640_write_long(EE_SPC_KE_DATE0,ke_date[0]);
;;;323    
;;;324    		temp=LPC_RTC->HOUR;
;;;325    		gran_char(&temp,0,23);
;;;326    		*((char*)(&(ke_date[1])))=temp;
;;;327                   
;;;328    		temp=LPC_RTC->MIN;
;;;329    		gran_char(&temp,0,59);
;;;330    		*(((char*)(&(ke_date[1])))+1)=temp;
;;;331    	          
;;;332    		temp=LPC_RTC->SEC;
;;;333    		gran_char(&temp,0,59);
;;;334    		*(((char*)(&(ke_date[1])))+2)=temp;
;;;335    			
;;;336    		*(((char*)(&(ke_date[1])))+3)=*(((char*)&temp_temp)+1);
;;;337    		lc640_write_long(EE_SPC_KE_DATE1,ke_date[1]);
;;;338    		}
;;;339    
;;;340    	}
;;;341    }
000034  e8bd81fc          POP      {r2-r8,pc}
                  |L1.56|
000038  762b              STRB     r3,[r5,#0x18]         ;271
00003a  e7fb              B        |L1.52|
                  |L1.60|
00003c  f894203f          LDRB     r2,[r4,#0x3f]         ;276
000040  0792              LSLS     r2,r2,#30             ;276
000042  d503              BPL      |L1.76|
000044  f04f0067          MOV      r0,#0x67              ;276
000048  7628              STRB     r0,[r5,#0x18]         ;276
00004a  e7f3              B        |L1.52|
                  |L1.76|
00004c  0789              LSLS     r1,r1,#30             ;277
00004e  d503              BPL      |L1.88|
000050  f04f0068          MOV      r0,#0x68              ;277
000054  7628              STRB     r0,[r5,#0x18]         ;277
000056  e7ed              B        |L1.52|
                  |L1.88|
000058  4ae6              LDR      r2,|L1.1012|
00005a  f9b41008          LDRSH    r1,[r4,#8]            ;278
00005e  f9b22000          LDRSH    r2,[r2,#0]            ;278  ; IKB
000062  4291              CMP      r1,r2                 ;278
000064  dd03              BLE      |L1.110|
000066  f04f0069          MOV      r0,#0x69              ;278
00006a  7628              STRB     r0,[r5,#0x18]         ;278
00006c  e7e2              B        |L1.52|
                  |L1.110|
00006e  4252              RSBS     r2,r2,#0              ;279
000070  4291              CMP      r1,r2                 ;279
000072  da03              BGE      |L1.124|
000074  f04f006a          MOV      r0,#0x6a              ;279
000078  7628              STRB     r0,[r5,#0x18]         ;279
00007a  e7db              B        |L1.52|
                  |L1.124|
00007c  49db              LDR      r1,|L1.1004|
00007e  2801              CMP      r0,#1                 ;280
000080  7d49              LDRB     r1,[r1,#0x15]         ;280
000082  d100              BNE      |L1.134|
000084  b111              CBZ      r1,|L1.140|
                  |L1.134|
000086  2801              CMP      r0,#1                 ;281
000088  d004              BEQ      |L1.148|
00008a  e005              B        |L1.152|
                  |L1.140|
00008c  f04f006b          MOV      r0,#0x6b              ;280
000090  7628              STRB     r0,[r5,#0x18]         ;280
000092  e7cf              B        |L1.52|
                  |L1.148|
000094  2901              CMP      r1,#1                 ;281
000096  d07e              BEQ      |L1.406|
                  |L1.152|
000098  f04f0064          MOV      r0,#0x64              ;285
00009c  7628              STRB     r0,[r5,#0x18]         ;285
00009e  752b              STRB     r3,[r5,#0x14]         ;287
0000a0  f8a53062          STRH     r3,[r5,#0x62]         ;288
0000a4  4619              MOV      r1,r3                 ;289
0000a6  f44f70f8          MOV      r0,#0x1f0             ;289
0000aa  f7fffffe          BL       lc640_write_int
0000ae  756e              STRB     r6,[r5,#0x15]         ;291
0000b0  f8a56064          STRH     r6,[r5,#0x64]         ;292
0000b4  4631              MOV      r1,r6                 ;293
0000b6  f44f70fa          MOV      r0,#0x1f4             ;293
0000ba  f7fffffe          BL       lc640_write_int
0000be  61a7              STR      r7,[r4,#0x18]         ;295
0000c0  48cd              LDR      r0,|L1.1016|
0000c2  2100              MOVS     r1,#0                 ;296
0000c4  f9300016          LDRSH    r0,[r0,r6,LSL #1]     ;296
0000c8  f7fffffe          BL       lc640_write_int
0000cc  75af              STRB     r7,[r5,#0x16]         ;298
0000ce  f8a57066          STRH     r7,[r5,#0x66]         ;299
0000d2  4639              MOV      r1,r7                 ;300
0000d4  f44f70fb          MOV      r0,#0x1f6             ;300
0000d8  f7fffffe          BL       lc640_write_int
0000dc  48c7              LDR      r0,|L1.1020|
0000de  8800              LDRH     r0,[r0,#0]            ;307  ; bat_u_old_cnt
0000e0  f1000001          ADD      r0,r0,#1              ;307
0000e4  f0000007          AND      r0,r0,#7              ;307
0000e8  eb040040          ADD      r0,r4,r0,LSL #1       ;307
0000ec  8c00              LDRH     r0,[r0,#0x20]         ;307
0000ee  9001              STR      r0,[sp,#4]            ;307
0000f0  4dc3              LDR      r5,|L1.1024|
0000f2  8ba8              LDRH     r0,[r5,#0x1c]         ;309
0000f4  9000              STR      r0,[sp,#0]            ;309
0000f6  f04f0263          MOV      r2,#0x63              ;310
0000fa  f04f0101          MOV      r1,#1                 ;310
0000fe  4668              MOV      r0,sp                 ;310
000100  f7fffffe          BL       gran_char
000104  4cb9              LDR      r4,|L1.1004|
000106  f89d0000          LDRB     r0,[sp,#0]            ;311
00010a  34c4              ADDS     r4,r4,#0xc4           ;311
00010c  7020              STRB     r0,[r4,#0]            ;311
00010e  7e28              LDRB     r0,[r5,#0x18]         ;313
000110  9000              STR      r0,[sp,#0]            ;313
000112  220c              MOVS     r2,#0xc               ;314
000114  2101              MOVS     r1,#1                 ;314
000116  4668              MOV      r0,sp                 ;314
000118  f7fffffe          BL       gran_char
00011c  f89d0000          LDRB     r0,[sp,#0]            ;315
000120  7060              STRB     r0,[r4,#1]            ;315
000122  7b28              LDRB     r0,[r5,#0xc]          ;317
000124  9000              STR      r0,[sp,#0]            ;317
000126  221f              MOVS     r2,#0x1f              ;318
000128  2101              MOVS     r1,#1                 ;318
00012a  4668              MOV      r0,sp                 ;318
00012c  f7fffffe          BL       gran_char
000130  f89d0000          LDRB     r0,[sp,#0]            ;319
000134  70a0              STRB     r0,[r4,#2]            ;319
000136  f89d0004          LDRB     r0,[sp,#4]            ;321
00013a  70e0              STRB     r0,[r4,#3]            ;321
00013c  f44f70fc          MOV      r0,#0x1f8             ;322
000140  6821              LDR      r1,[r4,#0]            ;322  ; ke_date
000142  f7fffffe          BL       lc640_write_long
000146  7a28              LDRB     r0,[r5,#8]            ;324
000148  9000              STR      r0,[sp,#0]            ;324
00014a  2217              MOVS     r2,#0x17              ;325
00014c  2100              MOVS     r1,#0                 ;325
00014e  4668              MOV      r0,sp                 ;325
000150  f7fffffe          BL       gran_char
000154  f89d0000          LDRB     r0,[sp,#0]            ;326
000158  7120              STRB     r0,[r4,#4]            ;326
00015a  7928              LDRB     r0,[r5,#4]            ;328
00015c  9000              STR      r0,[sp,#0]            ;328
00015e  223b              MOVS     r2,#0x3b              ;329
000160  2100              MOVS     r1,#0                 ;329
000162  4668              MOV      r0,sp                 ;329
000164  f7fffffe          BL       gran_char
000168  f89d0000          LDRB     r0,[sp,#0]            ;330
00016c  7160              STRB     r0,[r4,#5]            ;330
00016e  7828              LDRB     r0,[r5,#0]            ;332
000170  9000              STR      r0,[sp,#0]            ;332
000172  223b              MOVS     r2,#0x3b              ;333
000174  2100              MOVS     r1,#0                 ;333
000176  4668              MOV      r0,sp                 ;333
000178  f7fffffe          BL       gran_char
00017c  f89d0000          LDRB     r0,[sp,#0]            ;334
000180  71a0              STRB     r0,[r4,#6]            ;334
000182  f89d0005          LDRB     r0,[sp,#5]            ;336
000186  71e0              STRB     r0,[r4,#7]            ;336
000188  f44f70fe          MOV      r0,#0x1fc             ;337
00018c  6861              LDR      r1,[r4,#4]            ;337  ; ke_date
00018e  f7fffffe          BL       lc640_write_long
000192  e74f              B        |L1.52|
000194  e7ff              B        |L1.406|
                  |L1.406|
000196  f04f006c          MOV      r0,#0x6c              ;281
00019a  7628              STRB     r0,[r5,#0x18]         ;281
00019c  e74a              B        |L1.52|
;;;342    
                          ENDP

                  ke_drv PROC
;;;343    //-----------------------------------------------
;;;344    void ke_drv(void)
00019e  e92d47f0          PUSH     {r4-r10,lr}
;;;345    {
;;;346    
;;;347    if(spc_stat==spcKE)
0001a2  4c92              LDR      r4,|L1.1004|
0001a4  7d20              LDRB     r0,[r4,#0x14]  ; spc_stat
0001a6  2801              CMP      r0,#1
0001a8  d17d              BNE      |L1.678|
0001aa  4621              MOV      r1,r4
0001ac  2601              MOVS     r6,#1
;;;348    	{
;;;349    	if(spc_phase==0)
;;;350    		{
;;;351    		mess_send(MESS2BAT_HNDL,PARAM_BAT_MASK_OFF_AFTER_2SEC,(1<<(1-spc_bat)),20);
0001ae  7d49              LDRB     r1,[r1,#0x15]
0001b0  7da0              LDRB     r0,[r4,#0x16]         ;349  ; spc_phase
0001b2  f1c10201          RSB      r2,r1,#1
0001b6  fa06f102          LSL      r1,r6,r2
;;;352    		mess_send(MESS2BPS_HNDL,PARAM_BPS_ALL_OFF_AFTER_2SEC,0xffff,20);
;;;353    
;;;354    		bat[spc_bat]._zar_cnt_ke+=abs(bat[spc_bat]._Ib);
;;;355    	    	
;;;356    		if(bat[spc_bat]._zar_cnt_ke>=AH_CONSTANT)
;;;357    			{
;;;358    			bat[spc_bat]._zar_cnt_ke-=AH_CONSTANT;
;;;359    			lc640_write_int(ADR_EE_BAT_ZAR_CNT_KE[spc_bat],lc640_read_int(ADR_EE_BAT_ZAR_CNT_KE[spc_bat])+1);
0001ba  4f8f              LDR      r7,|L1.1016|
0001bc  4d8c              LDR      r5,|L1.1008|
0001be  b20a              SXTH     r2,r1                 ;351
0001c0  b110              CBZ      r0,|L1.456|
;;;360    			}
;;;361    		}
;;;362    
;;;363    	else if(spc_phase==1)
0001c2  2801              CMP      r0,#1
0001c4  d034              BEQ      |L1.560|
0001c6  e038              B        |L1.570|
                  |L1.456|
0001c8  2314              MOVS     r3,#0x14              ;351
0001ca  21ca              MOVS     r1,#0xca              ;351
0001cc  20c8              MOVS     r0,#0xc8              ;351
0001ce  f7fffffe          BL       mess_send
0001d2  2314              MOVS     r3,#0x14              ;352
0001d4  f04f32ff          MOV      r2,#0xffffffff        ;352
0001d8  21ce              MOVS     r1,#0xce              ;352
0001da  20cd              MOVS     r0,#0xcd              ;352
0001dc  f7fffffe          BL       mess_send
0001e0  7d60              LDRB     r0,[r4,#0x15]         ;354  ; spc_bat
0001e2  eb000140          ADD      r1,r0,r0,LSL #1       ;354
0001e6  eb011000          ADD      r0,r1,r0,LSL #4       ;354
0001ea  eb050080          ADD      r0,r5,r0,LSL #2       ;354
0001ee  f9b00008          LDRSH    r0,[r0,#8]            ;354
0001f2  f7fffffe          BL       abs
0001f6  7d61              LDRB     r1,[r4,#0x15]         ;354  ; spc_bat
0001f8  eb010241          ADD      r2,r1,r1,LSL #1       ;354
0001fc  eb021201          ADD      r2,r2,r1,LSL #4       ;354
000200  eb050282          ADD      r2,r5,r2,LSL #2       ;354
000204  6993              LDR      r3,[r2,#0x18]         ;354
000206  4418              ADD      r0,r0,r3              ;354
000208  6190              STR      r0,[r2,#0x18]         ;354
00020a  f64843a0          MOV      r3,#0x8ca0            ;356
00020e  4298              CMP      r0,r3                 ;356
000210  db13              BLT      |L1.570|
000212  eba00003          SUB      r0,r0,r3              ;358
000216  6190              STR      r0,[r2,#0x18]         ;358
000218  f8370011          LDRH     r0,[r7,r1,LSL #1]     ;359
00021c  f7fffffe          BL       lc640_read_int
000220  1c40              ADDS     r0,r0,#1              ;359
000222  b201              SXTH     r1,r0                 ;359
000224  7d60              LDRB     r0,[r4,#0x15]         ;359  ; spc_bat
000226  f9370010          LDRSH    r0,[r7,r0,LSL #1]     ;359
00022a  f7fffffe          BL       lc640_write_int
00022e  e004              B        |L1.570|
                  |L1.560|
;;;364    		{
;;;365    		mess_send(MESS2BAT_HNDL,PARAM_BAT_MASK_OFF_AFTER_2SEC,(1<<(1-spc_bat)),20);
000230  2314              MOVS     r3,#0x14
000232  21ca              MOVS     r1,#0xca
000234  20c8              MOVS     r0,#0xc8
000236  f7fffffe          BL       mess_send
                  |L1.570|
;;;366    		}
;;;367    
;;;368    	if(bat[spc_bat]._Ub<(USIGN*10))
00023a  7d61              LDRB     r1,[r4,#0x15]  ; spc_bat
;;;369    		{
;;;370    		cnt_end_ke++;
;;;371    		if(cnt_end_ke>=30)
;;;372    			{
;;;373    			
;;;374    			if((spc_stat==spcKE)&&(spc_phase==0))
;;;375    				{
;;;376    				lc640_write_int(ADR_EE_BAT_C_REAL[spc_bat],lc640_read_int(ADR_EE_BAT_ZAR_CNT_KE[spc_bat]));
;;;377    				ke_mem_hndl(spc_bat,lc640_read_int(ADR_EE_BAT_ZAR_CNT_KE[spc_bat]));
;;;378    				lc640_write_int(ADR_EE_BAT_ZAR_CNT[spc_bat],0);
;;;379    				cntrl_stat=50;
;;;380    				cntrl_stat_old=50;
;;;381    				}
;;;382    
;;;383    			if((BAT_IS_ON[1-spc_bat]) == bisON)
;;;384    				{
;;;385    				spc_phase=1;
;;;386    				__ee_spc_phase=1;
;;;387    				lc640_write_int(EE_SPC_PHASE,1);
;;;388    				}			
;;;389    			else
;;;390    				{
;;;391    				spc_stat=spcOFF;
;;;392    				__ee_spc_stat=spcOFF;
;;;393    				lc640_write_int(EE_SPC_STAT,spcOFF);
00023c  f44f79f8          MOV      r9,#0x1f0
000240  eb010041          ADD      r0,r1,r1,LSL #1       ;368
000244  eb001001          ADD      r0,r0,r1,LSL #4       ;368
000248  eb050080          ADD      r0,r5,r0,LSL #2       ;368
00024c  f04f0800          MOV      r8,#0                 ;349
000250  f9b02002          LDRSH    r2,[r0,#2]            ;368
000254  486b              LDR      r0,|L1.1028|
000256  f9b00000          LDRSH    r0,[r0,#0]            ;368  ; USIGN
00025a  eb000080          ADD      r0,r0,r0,LSL #2       ;368
00025e  ebb20f40          CMP      r2,r0,LSL #1          ;368
000262  da47              BGE      |L1.756|
000264  f8b4005e          LDRH     r0,[r4,#0x5e]         ;370  ; cnt_end_ke
000268  f1000001          ADD      r0,r0,#1              ;370
00026c  b200              SXTH     r0,r0                 ;370
00026e  f8a4005e          STRH     r0,[r4,#0x5e]         ;370
000272  281e              CMP      r0,#0x1e              ;371
000274  db40              BLT      |L1.760|
000276  7d20              LDRB     r0,[r4,#0x14]         ;374  ; spc_stat
000278  2801              CMP      r0,#1                 ;374
00027a  d122              BNE      |L1.706|
00027c  7da0              LDRB     r0,[r4,#0x16]         ;374  ; spc_phase
00027e  bb00              CBNZ     r0,|L1.706|
000280  f8370011          LDRH     r0,[r7,r1,LSL #1]     ;376
000284  f7fffffe          BL       lc640_read_int
000288  b201              SXTH     r1,r0                 ;376
00028a  485f              LDR      r0,|L1.1032|
00028c  7d62              LDRB     r2,[r4,#0x15]         ;376  ; spc_bat
00028e  f9300012          LDRSH    r0,[r0,r2,LSL #1]     ;376
000292  f7fffffe          BL       lc640_write_int
000296  7d60              LDRB     r0,[r4,#0x15]         ;377  ; spc_bat
000298  f8370010          LDRH     r0,[r7,r0,LSL #1]     ;377
00029c  f7fffffe          BL       lc640_read_int
0002a0  b281              UXTH     r1,r0                 ;377
0002a2  7d60              LDRB     r0,[r4,#0x15]         ;377  ; spc_bat
0002a4  e000              B        |L1.680|
                  |L1.678|
0002a6  e049              B        |L1.828|
                  |L1.680|
0002a8  f7fffffe          BL       ke_mem_hndl
0002ac  4857              LDR      r0,|L1.1036|
0002ae  7d61              LDRB     r1,[r4,#0x15]         ;378  ; spc_bat
0002b0  f9300011          LDRSH    r0,[r0,r1,LSL #1]     ;378
0002b4  2100              MOVS     r1,#0                 ;378
0002b6  f7fffffe          BL       lc640_write_int
0002ba  f04f0032          MOV      r0,#0x32              ;379
0002be  84e0              STRH     r0,[r4,#0x26]         ;379
0002c0  8520              STRH     r0,[r4,#0x28]         ;380
                  |L1.706|
0002c2  7d60              LDRB     r0,[r4,#0x15]         ;383  ; spc_bat
0002c4  4952              LDR      r1,|L1.1040|
0002c6  f1c00001          RSB      r0,r0,#1              ;383
0002ca  5c08              LDRB     r0,[r1,r0]            ;383
0002cc  2855              CMP      r0,#0x55              ;383
0002ce  d008              BEQ      |L1.738|
0002d0  f8848014          STRB     r8,[r4,#0x14]         ;391
0002d4  f8a48062          STRH     r8,[r4,#0x62]         ;392
0002d8  2100              MOVS     r1,#0
0002da  4648              MOV      r0,r9
0002dc  f7fffffe          BL       lc640_write_int
0002e0  e00a              B        |L1.760|
                  |L1.738|
0002e2  75a6              STRB     r6,[r4,#0x16]         ;385
0002e4  f8a46066          STRH     r6,[r4,#0x66]         ;386
0002e8  2101              MOVS     r1,#1                 ;387
0002ea  f44f70fb          MOV      r0,#0x1f6             ;387
0002ee  f7fffffe          BL       lc640_write_int
0002f2  e001              B        |L1.760|
                  |L1.756|
;;;394    				}
;;;395    			}
;;;396    		}
;;;397    	else cnt_end_ke=0;
0002f4  f8a4805e          STRH     r8,[r4,#0x5e]
                  |L1.760|
;;;398    
;;;399    	if((bat[spc_bat]._Ub>=bat[1-spc_bat]._Ub)&&(spc_phase==1))
0002f8  7d61              LDRB     r1,[r4,#0x15]  ; spc_bat
0002fa  eb010041          ADD      r0,r1,r1,LSL #1
0002fe  eb001001          ADD      r0,r0,r1,LSL #4
000302  eb050080          ADD      r0,r5,r0,LSL #2
000306  f9b02002          LDRSH    r2,[r0,#2]
00030a  f1c10001          RSB      r0,r1,#1
00030e  eb000140          ADD      r1,r0,r0,LSL #1
000312  eb011000          ADD      r0,r1,r0,LSL #4
000316  eb050080          ADD      r0,r5,r0,LSL #2
00031a  f9b00002          LDRSH    r0,[r0,#2]
00031e  4282              CMP      r2,r0
000320  db0c              BLT      |L1.828|
000322  7da0              LDRB     r0,[r4,#0x16]  ; spc_phase
000324  2801              CMP      r0,#1
000326  d109              BNE      |L1.828|
;;;400    		{
;;;401    		spc_stat=spcOFF;
000328  f8848014          STRB     r8,[r4,#0x14]
;;;402    		__ee_spc_stat=spcOFF;
00032c  f8a48062          STRH     r8,[r4,#0x62]
;;;403    		lc640_write_int(EE_SPC_STAT,spcOFF);
000330  4648              MOV      r0,r9
000332  e8bd47f0          POP      {r4-r10,lr}
000336  2100              MOVS     r1,#0
000338  f7ffbffe          B.W      lc640_write_int
                  |L1.828|
;;;404    		}
;;;405    	}
;;;406    			
;;;407    }
00033c  e8bd87f0          POP      {r4-r10,pc}
;;;408    
                          ENDP

                  vz_start PROC
;;;409    //-----------------------------------------------
;;;410    char vz_start(char hour)
000340  b570              PUSH     {r4-r6,lr}
;;;411    {          
000342  4605              MOV      r5,r0
;;;412    char out;
;;;413    out=0;
000344  f04f0600          MOV      r6,#0
;;;414    if((spc_stat==spcOFF)&&(speedChrgBlckStat!=1))
000348  4c28              LDR      r4,|L1.1004|
00034a  7d20              LDRB     r0,[r4,#0x14]  ; spc_stat
00034c  bb90              CBNZ     r0,|L1.948|
00034e  4831              LDR      r0,|L1.1044|
000350  8800              LDRH     r0,[r0,#0]  ; speedChrgBlckStat
000352  2801              CMP      r0,#1
000354  d02e              BEQ      |L1.948|
;;;415    	{
;;;416    	spc_stat=spcVZ;
000356  f04f0102          MOV      r1,#2
00035a  7521              STRB     r1,[r4,#0x14]
;;;417    	__ee_spc_stat=spcVZ; 
00035c  f8a41062          STRH     r1,[r4,#0x62]
;;;418    	lc640_write_int(EE_SPC_STAT,__ee_spc_stat);   
000360  f44f70f8          MOV      r0,#0x1f0
000364  f7fffffe          BL       lc640_write_int
;;;419    	vz_cnt_h=hour;
000368  f8a4505a          STRH     r5,[r4,#0x5a]
;;;420    	__ee_vz_cnt=hour*60;
00036c  ebc51005          RSB      r0,r5,r5,LSL #4
000370  ea4f0080          LSL      r0,r0,#2
000374  f8a40060          STRH     r0,[r4,#0x60]
;;;421    	if(hour==0)__ee_vz_cnt=30;
000378  b91d              CBNZ     r5,|L1.898|
00037a  f04f001e          MOV      r0,#0x1e
00037e  f8a40060          STRH     r0,[r4,#0x60]
                  |L1.898|
;;;422    	lc640_write_int(EE_VZ_CNT,__ee_vz_cnt);
000382  f1040456          ADD      r4,r4,#0x56
000386  f44f70f9          MOV      r0,#0x1f2
00038a  f9b4100a          LDRSH    r1,[r4,#0xa]  ; __ee_vz_cnt
00038e  f7fffffe          BL       lc640_write_int
;;;423    	lc640_write_int(EE_SPC_VZ_LENGT,__ee_vz_cnt);	
000392  f9b4100a          LDRSH    r1,[r4,#0xa]  ; __ee_vz_cnt
000396  f44f70ff          MOV      r0,#0x1fe
00039a  f7fffffe          BL       lc640_write_int
;;;424    	vz_cnt_h_=0;
00039e  f04f0000          MOV      r0,#0
0003a2  80e0              STRH     r0,[r4,#6]
;;;425    	vz_cnt_s=0;
0003a4  8020              STRH     r0,[r4,#0]
;;;426    	vz_cnt_s_=0;
0003a6  8060              STRH     r0,[r4,#2]
;;;427    	out=1;
0003a8  f04f0601          MOV      r6,#1
;;;428    	vz_mem_hndl(1);
0003ac  f04f0001          MOV      r0,#1
0003b0  f7fffffe          BL       vz_mem_hndl
                  |L1.948|
;;;429    	}
;;;430    //else if((spc_stat==spc_KE1p1)||(spc_stat==spc_KE1p2)) out=22; 
;;;431    //else if((spc_stat==spc_KE2p1)||(spc_stat==spc_KE2p2)) out=33;
;;;432    //plazma=out;	
;;;433    return out;
0003b4  4630              MOV      r0,r6
;;;434    }
0003b6  bd70              POP      {r4-r6,pc}
;;;435    
                          ENDP

                  vz_stop PROC
;;;436    //-----------------------------------------------
;;;437    void vz_stop(void)
0003b8  b510              PUSH     {r4,lr}
;;;438    {
;;;439    if(spc_stat==spcVZ)
0003ba  4c0c              LDR      r4,|L1.1004|
0003bc  7d20              LDRB     r0,[r4,#0x14]  ; spc_stat
0003be  2802              CMP      r0,#2
0003c0  d113              BNE      |L1.1002|
;;;440         {
;;;441    vz_mem_hndl(vz_cnt_h);          
0003c2  f1040424          ADD      r4,r4,#0x24
0003c6  8ee0              LDRH     r0,[r4,#0x36]  ; vz_cnt_h
0003c8  f7fffffe          BL       vz_mem_hndl
;;;442    vz_cnt_s=0;
0003cc  f04f0000          MOV      r0,#0
0003d0  8660              STRH     r0,[r4,#0x32]
;;;443    vz_cnt_h=0;
0003d2  86e0              STRH     r0,[r4,#0x36]
;;;444    vz_cnt_h_=0;
0003d4  8720              STRH     r0,[r4,#0x38]
;;;445    spc_stat=spcOFF;
0003d6  f8040c10          STRB     r0,[r4,#-0x10]
;;;446    
;;;447    		__ee_spc_stat=spcOFF;
0003da  87e0              STRH     r0,[r4,#0x3e]
;;;448    		lc640_write_int(EE_SPC_STAT,spcOFF);
0003dc  4601              MOV      r1,r0
0003de  e8bd4010          POP      {r4,lr}
0003e2  f44f70f8          MOV      r0,#0x1f0
0003e6  f7ffbffe          B.W      lc640_write_int
                  |L1.1002|
;;;449         }
;;;450    
;;;451    }
0003ea  bd10              POP      {r4,pc}
                  |L1.1004|
                          DCD      ||area_number.23||
                  |L1.1008|
                          DCD      bat
                  |L1.1012|
                          DCD      IKB
                  |L1.1016|
                          DCD      ADR_EE_BAT_ZAR_CNT_KE
                  |L1.1020|
                          DCD      bat_u_old_cnt
                  |L1.1024|
                          DCD      0x40024020
                  |L1.1028|
                          DCD      USIGN
                  |L1.1032|
                          DCD      ADR_EE_BAT_C_REAL
                  |L1.1036|
                          DCD      ADR_EE_BAT_ZAR_CNT
                  |L1.1040|
                          DCD      BAT_IS_ON
                  |L1.1044|
                          DCD      speedChrgBlckStat
                          ENDP

                  avz_next_date_hndl PROC
;;;453    //-----------------------------------------------
;;;454    void avz_next_date_hndl(void)
000418  b570              PUSH     {r4-r6,lr}
;;;455    {
;;;456    if((LPC_RTC->MONTH+AVZ)>12)lc640_write_int(EE_YEAR_AVZ,LPC_RTC->YEAR+1);
00041a  4cff              LDR      r4,|L1.2072|
00041c  f8940038          LDRB     r0,[r4,#0x38]
000420  4dfe              LDR      r5,|L1.2076|
000422  7829              LDRB     r1,[r5,#0]  ; AVZ
000424  4408              ADD      r0,r0,r1
000426  280c              CMP      r0,#0xc
000428  d906              BLS      |L1.1080|
00042a  8fa0              LDRH     r0,[r4,#0x3c]
00042c  1c40              ADDS     r0,r0,#1
00042e  b201              SXTH     r1,r0
000430  20b8              MOVS     r0,#0xb8
000432  f7fffffe          BL       lc640_write_int
000436  e004              B        |L1.1090|
                  |L1.1080|
;;;457    else lc640_write_int(EE_YEAR_AVZ,LPC_RTC->YEAR);
000438  f9b4103c          LDRSH    r1,[r4,#0x3c]
00043c  20b8              MOVS     r0,#0xb8
00043e  f7fffffe          BL       lc640_write_int
                  |L1.1090|
;;;458    
;;;459    //lc640_write_int(EE_YEAR_AVZ,6);
;;;460    
;;;461    if((LPC_RTC->MONTH+AVZ)>12)lc640_write_int(EE_MONTH_AVZ,(LPC_RTC->MONTH+AVZ)-12);
000442  f8941038          LDRB     r1,[r4,#0x38]
000446  7828              LDRB     r0,[r5,#0]  ; AVZ
000448  4401              ADD      r1,r1,r0
00044a  290c              CMP      r1,#0xc
00044c  d907              BLS      |L1.1118|
00044e  f8941038          LDRB     r1,[r4,#0x38]
000452  380c              SUBS     r0,r0,#0xc
000454  4401              ADD      r1,r1,r0
000456  20b6              MOVS     r0,#0xb6
000458  f7fffffe          BL       lc640_write_int
00045c  e005              B        |L1.1130|
                  |L1.1118|
;;;462    else lc640_write_int(EE_MONTH_AVZ,LPC_RTC->MONTH+AVZ);                                                 
00045e  f8941038          LDRB     r1,[r4,#0x38]
000462  4401              ADD      r1,r1,r0
000464  20b6              MOVS     r0,#0xb6
000466  f7fffffe          BL       lc640_write_int
                  |L1.1130|
;;;463    
;;;464    //lc640_write_int(EE_MONTH_AVZ,5);
;;;465    
;;;466    if(LPC_RTC->DOM>28) lc640_write_int(EE_DATE_AVZ,28);
00046a  f894002c          LDRB     r0,[r4,#0x2c]
00046e  281c              CMP      r0,#0x1c
000470  d904              BLS      |L1.1148|
000472  211c              MOVS     r1,#0x1c
000474  20b4              MOVS     r0,#0xb4
000476  f7fffffe          BL       lc640_write_int
00047a  e004              B        |L1.1158|
                  |L1.1148|
;;;467    else lc640_write_int(EE_DATE_AVZ,LPC_RTC->DOM);
00047c  f894102c          LDRB     r1,[r4,#0x2c]
000480  20b4              MOVS     r0,#0xb4
000482  f7fffffe          BL       lc640_write_int
                  |L1.1158|
;;;468    
;;;469    //lc640_write_int(EE_DATE_AVZ,4);
;;;470    
;;;471    lc640_write_int(EE_HOUR_AVZ,LPC_RTC->HOUR);
000486  f1040420          ADD      r4,r4,#0x20
00048a  7a21              LDRB     r1,[r4,#8]
00048c  f04f00ae          MOV      r0,#0xae
000490  f7fffffe          BL       lc640_write_int
;;;472    lc640_write_int(EE_MIN_AVZ,LPC_RTC->MIN);
000494  7921              LDRB     r1,[r4,#4]
000496  20b0              MOVS     r0,#0xb0
000498  f7fffffe          BL       lc640_write_int
;;;473    lc640_write_int(EE_SEC_AVZ,LPC_RTC->SEC);
00049c  7821              LDRB     r1,[r4,#0]
00049e  e8bd4070          POP      {r4-r6,lr}
0004a2  20b2              MOVS     r0,#0xb2
0004a4  f7ffbffe          B.W      lc640_write_int
;;;474    
;;;475    }
;;;476    
                          ENDP

                  avz_drv PROC
;;;477    //-----------------------------------------------
;;;478    void avz_drv(void)                               
0004a8  b510              PUSH     {r4,lr}
;;;479    {                
;;;480    if(AVZ!=AVZ_OFF)
0004aa  48dc              LDR      r0,|L1.2076|
;;;481    	{
;;;482    	if((LPC_RTC->YEAR==YEAR_AVZ)&&(LPC_RTC->MONTH==MONTH_AVZ)&&(LPC_RTC->DOM==DATE_AVZ)&&(LPC_RTC->HOUR==HOUR_AVZ)&&(LPC_RTC->MIN==MIN_AVZ)&&(LPC_RTC->SEC==SEC_AVZ))
;;;483    		{
;;;484    		bAVZ=1;
0004ac  4cdc              LDR      r4,|L1.2080|
0004ae  7800              LDRB     r0,[r0,#0]            ;480  ; AVZ
0004b0  b330              CBZ      r0,|L1.1280|
0004b2  48d9              LDR      r0,|L1.2072|
0004b4  8f82              LDRH     r2,[r0,#0x3c]         ;482
0004b6  49db              LDR      r1,|L1.2084|
0004b8  8809              LDRH     r1,[r1,#0]            ;482  ; YEAR_AVZ
0004ba  428a              CMP      r2,r1                 ;482
0004bc  d120              BNE      |L1.1280|
0004be  f8902038          LDRB     r2,[r0,#0x38]         ;482
0004c2  49d9              LDR      r1,|L1.2088|
0004c4  8809              LDRH     r1,[r1,#0]            ;482  ; MONTH_AVZ
0004c6  428a              CMP      r2,r1                 ;482
0004c8  d11a              BNE      |L1.1280|
0004ca  f890102c          LDRB     r1,[r0,#0x2c]         ;482
0004ce  4ad7              LDR      r2,|L1.2092|
0004d0  8812              LDRH     r2,[r2,#0]            ;482  ; DATE_AVZ
0004d2  4291              CMP      r1,r2                 ;482
0004d4  d114              BNE      |L1.1280|
0004d6  f8901028          LDRB     r1,[r0,#0x28]         ;482
0004da  4ad5              LDR      r2,|L1.2096|
0004dc  8812              LDRH     r2,[r2,#0]            ;482  ; HOUR_AVZ
0004de  4291              CMP      r1,r2                 ;482
0004e0  d10e              BNE      |L1.1280|
0004e2  f8901024          LDRB     r1,[r0,#0x24]         ;482
0004e6  4ad3              LDR      r2,|L1.2100|
0004e8  8812              LDRH     r2,[r2,#0]            ;482  ; MIN_AVZ
0004ea  4291              CMP      r1,r2                 ;482
0004ec  d108              BNE      |L1.1280|
0004ee  f8900020          LDRB     r0,[r0,#0x20]         ;482
0004f2  49d1              LDR      r1,|L1.2104|
0004f4  8809              LDRH     r1,[r1,#0]            ;482  ; SEC_AVZ
0004f6  4288              CMP      r0,r1                 ;482
0004f8  d102              BNE      |L1.1280|
0004fa  f04f0001          MOV      r0,#1
0004fe  75e0              STRB     r0,[r4,#0x17]
                  |L1.1280|
;;;485    		}
;;;486    	}
;;;487    if(bAVZ)
000500  7de0              LDRB     r0,[r4,#0x17]  ; bAVZ
000502  2800              CMP      r0,#0
000504  d00c              BEQ      |L1.1312|
;;;488    	{
;;;489    	if(vz_start(AVZ_TIME))
000506  48cd              LDR      r0,|L1.2108|
000508  8800              LDRH     r0,[r0,#0]  ; AVZ_TIME
00050a  b2c0              UXTB     r0,r0
00050c  f7fffffe          BL       vz_start
000510  2800              CMP      r0,#0
000512  d005              BEQ      |L1.1312|
;;;490    		{
;;;491    		bAVZ=0;
000514  f04f0000          MOV      r0,#0
000518  75e0              STRB     r0,[r4,#0x17]
;;;492    		avz_next_date_hndl();
00051a  e8bd4010          POP      {r4,lr}
00051e  e7fe              B        avz_next_date_hndl
                  |L1.1312|
;;;493    		}
;;;494    	}	
;;;495    
;;;496    }
000520  e763              B        |L1.1002|
;;;497    
                          ENDP

                  vz_drv PROC
;;;498    //-----------------------------------------------
;;;499    void vz_drv(void)
000522  b538              PUSH     {r3-r5,lr}
;;;500    { 
;;;501    if(spc_stat==spcVZ)
000524  4cbe              LDR      r4,|L1.2080|
000526  7d20              LDRB     r0,[r4,#0x14]  ; spc_stat
000528  2802              CMP      r0,#2
00052a  d116              BNE      |L1.1370|
;;;502    	{
;;;503    	if(sk_stat[0]==1)
00052c  48c4              LDR      r0,|L1.2112|
00052e  7800              LDRB     r0,[r0,#0]  ; sk_stat
000530  2801              CMP      r0,#1
000532  d013              BEQ      |L1.1372|
;;;504    		{
;;;505    
;;;506    	if(vz_cnt_s_<3600)
;;;507    		{
;;;508    		vz_cnt_s_++;
;;;509    		if(vz_cnt_s_>=3600)
;;;510    			{
;;;511    			vz_cnt_s_=0;
;;;512    			if(vz_cnt_h)
;;;513    				{
;;;514    				vz_cnt_h--;
;;;515    				vz_cnt_h_++;
;;;516    				}
;;;517    			}
;;;518    		}
;;;519    
;;;520    
;;;521    	if(vz_cnt_s<60)
;;;522    		{
;;;523    		vz_cnt_s++;
;;;524    		if(vz_cnt_s>=60)
;;;525    			{
;;;526    			vz_cnt_s=0;
;;;527    			
;;;528    			__ee_vz_cnt--;
;;;529    			lc640_write_int(EE_VZ_CNT,__ee_vz_cnt);
;;;530    			if((!__ee_vz_cnt)||(speedChrgBlckStat==1))
;;;531    				{
;;;532    				spc_stat=spcOFF;
;;;533    						__ee_spc_stat=spcOFF;
;;;534    		lc640_write_int(EE_SPC_STAT,spcOFF);
;;;535    
;;;536    				hv_vz_stat=hvsOFF;
;;;537    		lc640_write(EE_HV_VZ_STAT,hvsOFF);
;;;538    				vz_mem_hndl(0);
;;;539    				}
;;;540    			}
;;;541    		}
;;;542    
;;;543    		}
;;;544    	else 
;;;545    		{
;;;546    		if(((LPC_RTC->SEC)%10)==0)
000534  48c3              LDR      r0,|L1.2116|
000536  7800              LDRB     r0,[r0,#0]
000538  f04f010a          MOV      r1,#0xa
00053c  fbb0f2f1          UDIV     r2,r0,r1
000540  fb010012          MLS      r0,r1,r2,r0
000544  2800              CMP      r0,#0
000546  d108              BNE      |L1.1370|
;;;547    			{
;;;548    			show_mess(	"¬€–¿¬Õ»¬¿ﬁŸ»… «¿–ﬂƒ ",
000548  f2413088          MOV      r0,#0x1388
00054c  9000              STR      r0,[sp,#0]
00054e  a3be              ADR      r3,|L1.2120|
000550  a2c3              ADR      r2,|L1.2144|
000552  a1c9              ADR      r1,|L1.2168|
000554  a0ce              ADR      r0,|L1.2192|
000556  f7fffffe          BL       show_mess
                  |L1.1370|
;;;549    						"    «¿¡ÀŒ »–Œ¬¿Õ    ",
;;;550    						"     Õ≈»—œ–¿¬Õ¿     ",
;;;551    						"    ¬≈Õ“»Àﬂ÷»ﬂ!!!   ",
;;;552    						5000);			
;;;553    			}
;;;554    		}
;;;555    /*	if(vz_cnt_s_>=3)
;;;556    		{
;;;557    		if(sk_stat[0]==0)
;;;558    		} */
;;;559    
;;;560    	}
;;;561    
;;;562    
;;;563    } 
00055a  bd38              POP      {r3-r5,pc}
                  |L1.1372|
00055c  f8b40058          LDRH     r0,[r4,#0x58]         ;506  ; vz_cnt_s_
000560  f44f6161          MOV      r1,#0xe10             ;506
000564  2500              MOVS     r5,#0                 ;511
000566  4288              CMP      r0,r1                 ;506
000568  d215              BCS      |L1.1430|
00056a  f1000001          ADD      r0,r0,#1              ;508
00056e  b280              UXTH     r0,r0                 ;508
000570  f8a40058          STRH     r0,[r4,#0x58]         ;508
000574  4288              CMP      r0,r1                 ;509
000576  d30e              BCC      |L1.1430|
000578  f8a45058          STRH     r5,[r4,#0x58]         ;511
00057c  f8b4005a          LDRH     r0,[r4,#0x5a]         ;512  ; vz_cnt_h
000580  b148              CBZ      r0,|L1.1430|
000582  f1a00001          SUB      r0,r0,#1              ;514
000586  f8240f5a          STRH     r0,[r4,#0x5a]!        ;514
00058a  8860              LDRH     r0,[r4,#2]            ;515  ; vz_cnt_h_
00058c  f1000001          ADD      r0,r0,#1              ;515
000590  8060              STRH     r0,[r4,#2]            ;515
000592  f1a4045a          SUB      r4,r4,#0x5a           ;515
                  |L1.1430|
000596  f8b40056          LDRH     r0,[r4,#0x56]         ;521  ; vz_cnt_s
00059a  283c              CMP      r0,#0x3c              ;521
00059c  d2dd              BCS      |L1.1370|
00059e  f1000001          ADD      r0,r0,#1              ;523
0005a2  b280              UXTH     r0,r0                 ;523
0005a4  f8a40056          STRH     r0,[r4,#0x56]         ;523
0005a8  283c              CMP      r0,#0x3c              ;524
0005aa  d3d6              BCC      |L1.1370|
0005ac  f8245f56          STRH     r5,[r4,#0x56]!        ;526
0005b0  8960              LDRH     r0,[r4,#0xa]          ;528  ; __ee_vz_cnt
0005b2  f1a00001          SUB      r0,r0,#1              ;528
0005b6  b201              SXTH     r1,r0                 ;528
0005b8  8161              STRH     r1,[r4,#0xa]          ;528
0005ba  f44f70f9          MOV      r0,#0x1f2             ;529
0005be  f7fffffe          BL       lc640_write_int
0005c2  8960              LDRH     r0,[r4,#0xa]          ;530  ; __ee_vz_cnt
0005c4  f1a40456          SUB      r4,r4,#0x56           ;530
0005c8  b118              CBZ      r0,|L1.1490|
0005ca  48b7              LDR      r0,|L1.2216|
0005cc  8800              LDRH     r0,[r0,#0]            ;530  ; speedChrgBlckStat
0005ce  2801              CMP      r0,#1                 ;530
0005d0  d1c3              BNE      |L1.1370|
                  |L1.1490|
0005d2  7525              STRB     r5,[r4,#0x14]         ;532
0005d4  f8a45062          STRH     r5,[r4,#0x62]         ;533
0005d8  2100              MOVS     r1,#0                 ;534
0005da  f44f70f8          MOV      r0,#0x1f0             ;534
0005de  f7fffffe          BL       lc640_write_int
0005e2  48b2              LDR      r0,|L1.2220|
0005e4  7005              STRB     r5,[r0,#0]            ;536
0005e6  2100              MOVS     r1,#0                 ;537
0005e8  f44f70b4          MOV      r0,#0x168             ;537
0005ec  f7fffffe          BL       lc640_write
0005f0  e8bd4038          POP      {r3-r5,lr}            ;538
0005f4  2000              MOVS     r0,#0                 ;538
0005f6  f7ffbffe          B.W      vz_mem_hndl
;;;564    
                          ENDP

                  vz1_drv PROC
;;;566    //‰‡È‚Â Û‡‚ÌËÚÂÎ¸ÌÓ„Ó Á‡ˇ‰‡
;;;567    void vz1_drv(void)
0005fa  e92d4ff8          PUSH     {r3-r11,lr}
;;;568    {
;;;569    if(volt_region_cnt)volt_region_cnt--;
0005fe  f8df8220          LDR      r8,|L1.2080|
000602  f9b80070          LDRSH    r0,[r8,#0x70]  ; volt_region_cnt
000606  b118              CBZ      r0,|L1.1552|
000608  f1a00001          SUB      r0,r0,#1
00060c  f8a80070          STRH     r0,[r8,#0x70]
                  |L1.1552|
;;;570    if(vz1_stat==vz1sOFF)
000610  f8980020          LDRB     r0,[r8,#0x20]  ; vz1_stat
000614  b928              CBNZ     r0,|L1.1570|
;;;571    	{
;;;572    	mess_send(MESS2RELE_HNDL,PARAM_RELE_SAMOKALIBR,0,20);
000616  2314              MOVS     r3,#0x14
000618  2200              MOVS     r2,#0
00061a  2164              MOVS     r1,#0x64
00061c  20d2              MOVS     r0,#0xd2
00061e  f7fffffe          BL       mess_send
                  |L1.1570|
;;;573    	}
;;;574    if(vz1_stat==vz1sSTEP1)
000622  f8980020          LDRB     r0,[r8,#0x20]  ; vz1_stat
;;;575    	{
;;;576    	if(vz1_stat_old!=vz1_stat)
;;;577    		{
;;;578    		vz1_stat_cnt=5;
;;;579    		}
;;;580    	if(vz1_stat_cnt)
;;;581    		{
;;;582    		vz1_stat_cnt--;
;;;583    		if(vz1_stat_cnt==0)
;;;584    			{
;;;585    			vz1_stat=vz1sERR1; 	//ÕÂ ‚ÍÎ˛˜ËÎ‡Ò¸ ‚ÂÌÚËÎˇˆËˇ;
;;;586    			lc640_write(EE_VZ1_STAT,vz1sERR1);
;;;587    			}
;;;588    		}
;;;589    	if(sk_stat[0]==1)
000626  4d86              LDR      r5,|L1.2112|
000628  f44f7bc9          MOV      r11,#0x192            ;586
00062c  2801              CMP      r0,#1                 ;574
00062e  d139              BNE      |L1.1700|
000630  f8980021          LDRB     r0,[r8,#0x21]         ;576  ; vz1_stat_old
000634  2801              CMP      r0,#1                 ;576
000636  d003              BEQ      |L1.1600|
000638  f04f0005          MOV      r0,#5                 ;578
00063c  f8a8006e          STRH     r0,[r8,#0x6e]         ;578
                  |L1.1600|
000640  f9b8006e          LDRSH    r0,[r8,#0x6e]         ;580  ; vz1_stat_cnt
000644  b168              CBZ      r0,|L1.1634|
000646  f1a00001          SUB      r0,r0,#1              ;582
00064a  b200              SXTH     r0,r0                 ;582
00064c  f8a8006e          STRH     r0,[r8,#0x6e]         ;582
000650  b938              CBNZ     r0,|L1.1634|
000652  f04f000b          MOV      r0,#0xb               ;585
000656  f8880020          STRB     r0,[r8,#0x20]         ;585
00065a  4601              MOV      r1,r0                 ;586
00065c  4658              MOV      r0,r11                ;586
00065e  f7fffffe          BL       lc640_write
                  |L1.1634|
000662  7828              LDRB     r0,[r5,#0]  ; sk_stat
000664  2801              CMP      r0,#1
000666  d117              BNE      |L1.1688|
;;;590    		{
;;;591    		vz1_stat=vz1sSTEP2;
000668  f04f0002          MOV      r0,#2
00066c  f8880020          STRB     r0,[r8,#0x20]
;;;592    		lc640_write(EE_VZ1_STAT,vz1sSTEP2);
000670  4601              MOV      r1,r0
000672  4658              MOV      r0,r11
000674  f7fffffe          BL       lc640_write
;;;593    		tree_up(iVZ1_STEP2_2,1,0,0);
000678  2300              MOVS     r3,#0
00067a  461a              MOV      r2,r3
00067c  2101              MOVS     r1,#1
00067e  20db              MOVS     r0,#0xdb
000680  f7fffffe          BL       tree_up
;;;594    		tree_up(iVZ1_STEP2_1,0,0,0);
000684  2300              MOVS     r3,#0
000686  461a              MOV      r2,r3
000688  4619              MOV      r1,r3
00068a  20da              MOVS     r0,#0xda
00068c  f7fffffe          BL       tree_up
;;;595    		ret(1200);
000690  f44f6096          MOV      r0,#0x4b0
000694  f7fffffe          BL       ||ret||
                  |L1.1688|
;;;596    		}
;;;597    	mess_send(MESS2RELE_HNDL,PARAM_RELE_SAMOKALIBR,0,20);
000698  2314              MOVS     r3,#0x14
00069a  2200              MOVS     r2,#0
00069c  2164              MOVS     r1,#0x64
00069e  20d2              MOVS     r0,#0xd2
0006a0  f7fffffe          BL       mess_send
                  |L1.1700|
;;;598    	}
;;;599    
;;;600    if(vz1_stat==vz1sSTEP2)
0006a4  f8980020          LDRB     r0,[r8,#0x20]  ; vz1_stat
;;;601    	{
;;;602    	if((vz1_stat_old!=vz1_stat)||(vz1_stat_cnt==0))
;;;603    		{
;;;604    		vz1_stat_cnt=15;
0006a8  f04f090f          MOV      r9,#0xf
0006ac  2802              CMP      r0,#2                 ;600
0006ae  d118              BNE      |L1.1762|
0006b0  f8980021          LDRB     r0,[r8,#0x21]         ;602  ; vz1_stat_old
0006b4  2802              CMP      r0,#2                 ;602
0006b6  d102              BNE      |L1.1726|
0006b8  f8b8006e          LDRH     r0,[r8,#0x6e]         ;602  ; vz1_stat_cnt
0006bc  b908              CBNZ     r0,|L1.1730|
                  |L1.1726|
0006be  f8a8906e          STRH     r9,[r8,#0x6e]
                  |L1.1730|
;;;605    		}
;;;606    	vz1_stat_cnt--;
0006c2  f8b8006e          LDRH     r0,[r8,#0x6e]  ; vz1_stat_cnt
0006c6  f1a00001          SUB      r0,r0,#1
0006ca  f8a8006e          STRH     r0,[r8,#0x6e]
;;;607    	mess_send(MESS2RELE_HNDL,PARAM_RELE_SAMOKALIBR,0,20);
0006ce  f04f0314          MOV      r3,#0x14
0006d2  f04f0200          MOV      r2,#0
0006d6  f04f0164          MOV      r1,#0x64
0006da  f04f00d2          MOV      r0,#0xd2
0006de  f7fffffe          BL       mess_send
                  |L1.1762|
;;;608    	}
;;;609    
;;;610    if(vz1_stat==vz1sSTEP3)
0006e2  f8980020          LDRB     r0,[r8,#0x20]  ; vz1_stat
;;;611    	{
;;;612    	if((vz1_stat_old!=vz1_stat)||(vz1_stat_cnt==0))
;;;613    		{
;;;614    		vz1_stat_cnt=10;
0006e6  240a              MOVS     r4,#0xa
0006e8  2600              MOVS     r6,#0                 ;569
0006ea  f04f0a01          MOV      r10,#1                ;570
;;;615    
;;;616    		}
;;;617    	vz1_stat_cnt--;
;;;618    	if((vz1_stat_cnt==10)||(vz1_stat_cnt==9))
;;;619    		{
;;;620    		show_mess(	"     ¬ Àﬁ◊»“≈       ",
0006ee  f2413788          MOV      r7,#0x1388
0006f2  2803              CMP      r0,#3                 ;610
0006f4  d131              BNE      |L1.1882|
0006f6  f8980021          LDRB     r0,[r8,#0x21]         ;612  ; vz1_stat_old
0006fa  2803              CMP      r0,#3                 ;612
0006fc  d102              BNE      |L1.1796|
0006fe  f8b8006e          LDRH     r0,[r8,#0x6e]         ;612  ; vz1_stat_cnt
000702  b908              CBNZ     r0,|L1.1800|
                  |L1.1796|
000704  f8a8406e          STRH     r4,[r8,#0x6e]         ;614
                  |L1.1800|
000708  f8b8006e          LDRH     r0,[r8,#0x6e]         ;617  ; vz1_stat_cnt
00070c  f1a00001          SUB      r0,r0,#1              ;617
000710  b200              SXTH     r0,r0                 ;617
000712  f8a8006e          STRH     r0,[r8,#0x6e]         ;617
000716  280a              CMP      r0,#0xa               ;618
000718  d001              BEQ      |L1.1822|
00071a  2809              CMP      r0,#9                 ;618
00071c  d106              BNE      |L1.1836|
                  |L1.1822|
00071e  a364              ADR      r3,|L1.2224|
000720  a269              ADR      r2,|L1.2248|
000722  a16f              ADR      r1,|L1.2272|
000724  a074              ADR      r0,|L1.2296|
000726  9700              STR      r7,[sp,#0]
000728  f7fffffe          BL       show_mess
                  |L1.1836|
;;;621    					"      “”Ã¡À≈–       ",
;;;622    					"     ¬€—Œ Œ√Œ       ",
;;;623    					"    Õ¿œ–ﬂ∆≈Õ»ﬂ      ",
;;;624    					5000);
;;;625    		}
;;;626    	if(sk_stat[1]==1)
00072c  7868              LDRB     r0,[r5,#1]  ; sk_stat
00072e  2801              CMP      r0,#1
000730  d10d              BNE      |L1.1870|
;;;627    		{
;;;628    		vz1_stat=vz1sWRK;
000732  f8884020          STRB     r4,[r8,#0x20]
;;;629    		lc640_write(EE_VZ1_STAT,vz1sWRK);
000736  210a              MOVS     r1,#0xa
000738  4658              MOV      r0,r11
00073a  f7fffffe          BL       lc640_write
;;;630    		volt_region=1;
00073e  f888a022          STRB     r10,[r8,#0x22]
;;;631    		cntrl_stat=0;
000742  f8a86026          STRH     r6,[r8,#0x26]
;;;632    		cntrl_stat_new=0;
000746  f8a8603c          STRH     r6,[r8,#0x3c]
;;;633    		cntrl_stat_old=0;
00074a  f8a86028          STRH     r6,[r8,#0x28]
                  |L1.1870|
;;;634    		}
;;;635    	mess_send(MESS2RELE_HNDL,PARAM_RELE_SAMOKALIBR,0,20);
00074e  2314              MOVS     r3,#0x14
000750  2200              MOVS     r2,#0
000752  2164              MOVS     r1,#0x64
000754  20d2              MOVS     r0,#0xd2
000756  f7fffffe          BL       mess_send
                  |L1.1882|
;;;636    	}
;;;637    
;;;638    if(vz1_stat==vz1sWRK)
00075a  f8980020          LDRB     r0,[r8,#0x20]  ; vz1_stat
00075e  280a              CMP      r0,#0xa
000760  d158              BNE      |L1.2068|
;;;639    	{
;;;640    	if(vz1_stat_old!=vz1_stat)
;;;641    		{
;;;642    		vz1_wrk_cnt=3600L/*100L*/*((long)UZ_T);
000762  492f              LDR      r1,|L1.2080|
000764  f8980021          LDRB     r0,[r8,#0x21]         ;640  ; vz1_stat_old
000768  3180              ADDS     r1,r1,#0x80
00076a  280a              CMP      r0,#0xa               ;640
00076c  d008              BEQ      |L1.1920|
00076e  4868              LDR      r0,|L1.2320|
000770  f44f6261          MOV      r2,#0xe10
000774  f9b00000          LDRSH    r0,[r0,#0]  ; UZ_T
000778  fb00f002          MUL      r0,r0,r2
00077c  6208              STR      r0,[r1,#0x20]  ; vz1_wrk_cnt
;;;643    		//if(VZ_HR==0)  	hv_vz_wrk_cnt=1800L;
;;;644    		vz1_up_cnt=0L;
00077e  624e              STR      r6,[r1,#0x24]  ; vz1_up_cnt
                  |L1.1920|
;;;645    
;;;646    		}
;;;647    	vz1_wrk_cnt--;
000780  6a08              LDR      r0,[r1,#0x20]  ; vz1_wrk_cnt
000782  f1a00001          SUB      r0,r0,#1
000786  6208              STR      r0,[r1,#0x20]  ; vz1_wrk_cnt
;;;648    	vz1_up_cnt++;
000788  6a4a              LDR      r2,[r1,#0x24]  ; vz1_up_cnt
00078a  f1020201          ADD      r2,r2,#1
00078e  624a              STR      r2,[r1,#0x24]  ; vz1_up_cnt
;;;649    
;;;650    	if(vz1_wrk_cnt==0)
000790  b940              CBNZ     r0,|L1.1956|
;;;651    		{
;;;652    		vz1_stat=vz1sFINE;
000792  f8889020          STRB     r9,[r8,#0x20]
;;;653    		lc640_write(EE_VZ1_STAT,vz1sFINE);
000796  210f              MOVS     r1,#0xf
000798  4658              MOV      r0,r11
00079a  f7fffffe          BL       lc640_write
;;;654    		uz_mem_hndl(0);
00079e  2000              MOVS     r0,#0
0007a0  f7fffffe          BL       uz_mem_hndl
                  |L1.1956|
;;;655    		}
;;;656    	if(sk_stat[0]==0)
0007a4  7828              LDRB     r0,[r5,#0]  ; sk_stat
0007a6  b938              CBNZ     r0,|L1.1976|
;;;657    		{
;;;658    		vz1_stat=vz1sERR2;
0007a8  f04f000c          MOV      r0,#0xc
0007ac  f8880020          STRB     r0,[r8,#0x20]
;;;659    		lc640_write(EE_VZ1_STAT,vz1sERR2);
0007b0  4601              MOV      r1,r0
0007b2  4658              MOV      r0,r11
0007b4  f7fffffe          BL       lc640_write
                  |L1.1976|
;;;660    		}
;;;661    	if(sk_stat[1]==0)
0007b8  7868              LDRB     r0,[r5,#1]  ; sk_stat
0007ba  b938              CBNZ     r0,|L1.1996|
;;;662    		{
;;;663    		vz1_stat=vz1sERR3;
0007bc  f04f000d          MOV      r0,#0xd
0007c0  f8880020          STRB     r0,[r8,#0x20]
;;;664    		lc640_write(EE_VZ1_STAT,vz1sERR3);
0007c4  4601              MOV      r1,r0
0007c6  4658              MOV      r0,r11
0007c8  f7fffffe          BL       lc640_write
                  |L1.1996|
;;;665    		}
;;;666    	if(((Ibmax/10)>IZMAX_)&&(cntrl_stat<=20)&&(volt_region==1)&&(volt_region_cnt==0))
0007cc  f9b8003e          LDRSH    r0,[r8,#0x3e]  ; Ibmax
0007d0  f8b81040          LDRH     r1,[r8,#0x40]  ; IZMAX_
0007d4  fb90f0f4          SDIV     r0,r0,r4
;;;667    		{
;;;668    		volt_region=0;
;;;669    		cntrl_stat=1000;
0007d8  f44f727a          MOV      r2,#0x3e8
0007dc  4288              CMP      r0,r1                 ;666
0007de  dd16              BLE      |L1.2062|
0007e0  f9b83026          LDRSH    r3,[r8,#0x26]         ;666  ; cntrl_stat
0007e4  2b14              CMP      r3,#0x14              ;666
0007e6  dc12              BGT      |L1.2062|
0007e8  f8983022          LDRB     r3,[r8,#0x22]         ;666  ; volt_region
0007ec  2b01              CMP      r3,#1                 ;666
0007ee  d10e              BNE      |L1.2062|
0007f0  f8b83070          LDRH     r3,[r8,#0x70]         ;666  ; volt_region_cnt
0007f4  b95b              CBNZ     r3,|L1.2062|
0007f6  f8886022          STRB     r6,[r8,#0x22]         ;668
0007fa  f8a82026          STRH     r2,[r8,#0x26]
;;;670    		cntrl_stat_new=1000;
0007fe  f8a8203c          STRH     r2,[r8,#0x3c]
;;;671    		cntrl_stat_old=1000;
000802  f8a82028          STRH     r2,[r8,#0x28]
;;;672    		volt_region_cnt=110;
000806  f04f036e          MOV      r3,#0x6e
00080a  f8a83070          STRH     r3,[r8,#0x70]
                  |L1.2062|
;;;673    		}
;;;674    	if(((Ibmax/10)<IZMAX_)&&(cntrl_stat>=1000)&&(volt_region==0)&&(volt_region_cnt==0))
00080e  4288              CMP      r0,r1
000810  da01              BGE      |L1.2070|
000812  e07f              B        |L1.2324|
                  |L1.2068|
000814  e0a5              B        |L1.2402|
                  |L1.2070|
000816  e091              B        |L1.2364|
                  |L1.2072|
                          DCD      0x40024000
                  |L1.2076|
                          DCD      AVZ
                  |L1.2080|
                          DCD      ||area_number.23||
                  |L1.2084|
                          DCD      YEAR_AVZ
                  |L1.2088|
                          DCD      MONTH_AVZ
                  |L1.2092|
                          DCD      DATE_AVZ
                  |L1.2096|
                          DCD      HOUR_AVZ
                  |L1.2100|
                          DCD      MIN_AVZ
                  |L1.2104|
                          DCD      SEC_AVZ
                  |L1.2108|
                          DCD      AVZ_TIME
                  |L1.2112|
                          DCD      sk_stat
                  |L1.2116|
                          DCD      0x40024020
                  |L1.2120|
000848  20202020          DCB      "    ",194,197,205,210,200,203,223,214,200,223,"!!!   ",0
00084c  c2c5cdd2
000850  c8cbdfd6
000854  c8df2121
000858  21202020
00085c  00      
00085d  00                DCB      0
00085e  00                DCB      0
00085f  00                DCB      0
                  |L1.2144|
000860  20202020          DCB      "     ",205,197,200,209,207,208,192,194,205,192,"     ",0
000864  20cdc5c8
000868  d1cfd0c0
00086c  c2cdc020
000870  20202020
000874  00      
000875  00                DCB      0
000876  00                DCB      0
000877  00                DCB      0
                  |L1.2168|
000878  20202020          DCB      "    ",199,192,193,203,206,202,200,208,206,194,192,205," "
00087c  c7c0c1cb
000880  cecac8d0
000884  cec2c0cd
000888  20      
000889  20202000          DCB      "   ",0
00088d  00                DCB      0
00088e  00                DCB      0
00088f  00                DCB      0
                  |L1.2192|
000890  c2dbd0c0          DCB      194,219,208,192,194,205,200,194,192,222,217,200,201," ",199
000894  c2cdc8c2
000898  c0ded9c8
00089c  c920c7  
00089f  c0d0dfc4          DCB      192,208,223,196," ",0
0008a3  2000    
0008a5  00                DCB      0
0008a6  00                DCB      0
0008a7  00                DCB      0
                  |L1.2216|
                          DCD      speedChrgBlckStat
                  |L1.2220|
                          DCD      hv_vz_stat
                  |L1.2224|
0008b0  20202020          DCB      "    ",205,192,207,208,223,198,197,205,200,223,"      ",0
0008b4  cdc0cfd0
0008b8  dfc6c5cd
0008bc  c8df2020
0008c0  20202020
0008c4  00      
0008c5  00                DCB      0
0008c6  00                DCB      0
0008c7  00                DCB      0
                  |L1.2248|
0008c8  20202020          DCB      "     ",194,219,209,206,202,206,195,206,"       ",0
0008cc  20c2dbd1
0008d0  cecacec3
0008d4  ce202020
0008d8  20202020
0008dc  00      
0008dd  00                DCB      0
0008de  00                DCB      0
0008df  00                DCB      0
                  |L1.2272|
0008e0  20202020          DCB      "      ",210,211,204,193,203,197,208,"       ",0
0008e4  2020d2d3
0008e8  ccc1cbc5
0008ec  d0202020
0008f0  20202020
0008f4  00      
0008f5  00                DCB      0
0008f6  00                DCB      0
0008f7  00                DCB      0
                  |L1.2296|
0008f8  20202020          DCB      "     ",194,202,203,222,215,200,210,197,"       ",0
0008fc  20c2cacb
000900  ded7c8d2
000904  c5202020
000908  20202020
00090c  00      
00090d  00                DCB      0
00090e  00                DCB      0
00090f  00                DCB      0
                  |L1.2320|
                          DCD      UZ_T
                  |L1.2324|
000914  f9b80026          LDRSH    r0,[r8,#0x26]  ; cntrl_stat
000918  4290              CMP      r0,r2
00091a  db0f              BLT      |L1.2364|
00091c  f8980022          LDRB     r0,[r8,#0x22]  ; volt_region
000920  b960              CBNZ     r0,|L1.2364|
000922  f8b80070          LDRH     r0,[r8,#0x70]  ; volt_region_cnt
000926  b948              CBNZ     r0,|L1.2364|
;;;675    		{
;;;676    		volt_region=1;
000928  f888a022          STRB     r10,[r8,#0x22]
;;;677    		cntrl_stat=10;
00092c  f8a84026          STRH     r4,[r8,#0x26]
;;;678    		cntrl_stat_new=10;
000930  f8a8403c          STRH     r4,[r8,#0x3c]
;;;679    		cntrl_stat_old=10;
000934  f8a84028          STRH     r4,[r8,#0x28]
;;;680    		volt_region_cnt=10;
000938  f8a84070          STRH     r4,[r8,#0x70]
                  |L1.2364|
;;;681    		}
;;;682    	if(volt_region==0) 		mess_send(MESS2RELE_HNDL,PARAM_RELE_SAMOKALIBR,0,20);
00093c  f8980022          LDRB     r0,[r8,#0x22]  ; volt_region
000940  b110              CBZ      r0,|L1.2376|
;;;683    	else if(volt_region==1) mess_send(MESS2RELE_HNDL,PARAM_RELE_SAMOKALIBR,1,20);
000942  2801              CMP      r0,#1
000944  d007              BEQ      |L1.2390|
000946  e00c              B        |L1.2402|
                  |L1.2376|
000948  2314              MOVS     r3,#0x14              ;682
00094a  2200              MOVS     r2,#0                 ;682
00094c  2164              MOVS     r1,#0x64              ;682
00094e  20d2              MOVS     r0,#0xd2              ;682
000950  f7fffffe          BL       mess_send
000954  e005              B        |L1.2402|
                  |L1.2390|
000956  2314              MOVS     r3,#0x14
000958  2201              MOVS     r2,#1
00095a  2164              MOVS     r1,#0x64
00095c  20d2              MOVS     r0,#0xd2
00095e  f7fffffe          BL       mess_send
                  |L1.2402|
;;;684    	}
;;;685    
;;;686    if(vz1_stat==vz1sERR1)		//ŒÚÒÛÚÒÚ‚ÛÂÚ ‚ÂÌÚËÎˇˆËˇ ÔË ‚ÍÎ˛˜ÂÌËË
000962  f8980020          LDRB     r0,[r8,#0x20]  ; vz1_stat
000966  280b              CMP      r0,#0xb
000968  d120              BNE      |L1.2476|
;;;687    	{
;;;688    	if((vz1_stat_old!=vz1_stat)||(vz1_stat_cnt==0))
00096a  f8980021          LDRB     r0,[r8,#0x21]  ; vz1_stat_old
00096e  280b              CMP      r0,#0xb
000970  d102              BNE      |L1.2424|
000972  f8b8006e          LDRH     r0,[r8,#0x6e]  ; vz1_stat_cnt
000976  b908              CBNZ     r0,|L1.2428|
                  |L1.2424|
;;;689    		{
;;;690    		vz1_stat_cnt=10;
000978  f8a8406e          STRH     r4,[r8,#0x6e]
                  |L1.2428|
;;;691    		}
;;;692    	vz1_stat_cnt--;
00097c  f8b8006e          LDRH     r0,[r8,#0x6e]  ; vz1_stat_cnt
000980  f1a00001          SUB      r0,r0,#1
000984  b200              SXTH     r0,r0
000986  f8a8006e          STRH     r0,[r8,#0x6e]
;;;693    	if((vz1_stat_cnt==10)||(vz1_stat_cnt==9))
00098a  280a              CMP      r0,#0xa
00098c  d001              BEQ      |L1.2450|
00098e  2809              CMP      r0,#9
000990  d106              BNE      |L1.2464|
                  |L1.2450|
;;;694    		{
;;;695    		show_mess(	"”–¿¬Õ»“≈À‹Õ€… «¿–ﬂƒ ",
000992  a3ef              ADR      r3,|L1.3408|
000994  a2f4              ADR      r2,|L1.3432|
000996  a1fa              ADR      r1,|L1.3456|
000998  a0ff              ADR      r0,|L1.3480|
00099a  9700              STR      r7,[sp,#0]
00099c  f7fffffe          BL       show_mess
                  |L1.2464|
;;;696    					"   Õ≈ ÃŒ∆≈“ ¡€“‹    ",
;;;697    					"      ¬ Àﬁ◊≈Õ       ",
;;;698    					"  ¡≈« ¬≈Õ“»Àﬂ÷»»!!  ",
;;;699    					5000);
;;;700    		}
;;;701    	mess_send(MESS2RELE_HNDL,PARAM_RELE_SAMOKALIBR,0,20);
0009a0  2314              MOVS     r3,#0x14
0009a2  2200              MOVS     r2,#0
0009a4  2164              MOVS     r1,#0x64
0009a6  20d2              MOVS     r0,#0xd2
0009a8  f7fffffe          BL       mess_send
                  |L1.2476|
;;;702    	}
;;;703    if(vz1_stat==vz1sERR2)		//œÓÔ‡Î‡ ‚ÂÌÚËÎˇˆËˇ ÔË ‡·ÓÚÂ
0009ac  f8980020          LDRB     r0,[r8,#0x20]  ; vz1_stat
0009b0  280c              CMP      r0,#0xc
0009b2  d12c              BNE      |L1.2574|
;;;704    	{
;;;705    	if((vz1_stat_old!=vz1_stat)||(vz1_stat_cnt==0))
0009b4  f8980021          LDRB     r0,[r8,#0x21]  ; vz1_stat_old
0009b8  280c              CMP      r0,#0xc
0009ba  d102              BNE      |L1.2498|
0009bc  f8b8006e          LDRH     r0,[r8,#0x6e]  ; vz1_stat_cnt
0009c0  b908              CBNZ     r0,|L1.2502|
                  |L1.2498|
;;;706    		{
;;;707    		vz1_stat_cnt=10;
0009c2  f8a8406e          STRH     r4,[r8,#0x6e]
                  |L1.2502|
;;;708    		}
;;;709    	vz1_stat_cnt--;
0009c6  f8b8006e          LDRH     r0,[r8,#0x6e]  ; vz1_stat_cnt
0009ca  f1a00001          SUB      r0,r0,#1
0009ce  b200              SXTH     r0,r0
0009d0  f8a8006e          STRH     r0,[r8,#0x6e]
;;;710    	if((vz1_stat_cnt==10)||(vz1_stat_cnt==9))
0009d4  280a              CMP      r0,#0xa
0009d6  d001              BEQ      |L1.2524|
0009d8  2809              CMP      r0,#9
0009da  d109              BNE      |L1.2544|
                  |L1.2524|
;;;711    		{
;;;712    		show_mess(	"”–¿¬Õ»“≈À‹Õ€… «¿–ﬂƒ ",
0009dc  f2af1398          ADR      r3,|L1.2120|
0009e0  f2af1284          ADR      r2,|L1.2144|
0009e4  f2af1170          ADR      r1,|L1.2168|
0009e8  a0eb              ADR      r0,|L1.3480|
0009ea  9700              STR      r7,[sp,#0]
0009ec  f7fffffe          BL       show_mess
                  |L1.2544|
;;;713    					"    «¿¡ÀŒ »–Œ¬¿Õ    ",
;;;714    					"     Õ≈»—œ–¿¬Õ¿     ",
;;;715    					"    ¬≈Õ“»Àﬂ÷»ﬂ!!!   ",
;;;716    					5000);
;;;717    		}
;;;718    	if(sk_stat[0]==1)
0009f0  7828              LDRB     r0,[r5,#0]  ; sk_stat
0009f2  2801              CMP      r0,#1
0009f4  d105              BNE      |L1.2562|
;;;719    		{
;;;720    		vz1_stat=vz1sWRK;
0009f6  f8884020          STRB     r4,[r8,#0x20]
;;;721    		lc640_write(EE_VZ1_STAT,vz1sWRK);
0009fa  210a              MOVS     r1,#0xa
0009fc  4658              MOV      r0,r11
0009fe  f7fffffe          BL       lc640_write
                  |L1.2562|
;;;722    		}
;;;723    	mess_send(MESS2RELE_HNDL,PARAM_RELE_SAMOKALIBR,0,20);
000a02  2314              MOVS     r3,#0x14
000a04  2200              MOVS     r2,#0
000a06  2164              MOVS     r1,#0x64
000a08  20d2              MOVS     r0,#0xd2
000a0a  f7fffffe          BL       mess_send
                  |L1.2574|
;;;724    	}
;;;725    
;;;726    if(vz1_stat==vz1sERR3)		//ŒÚÍÎ˛˜ÂÌ ÚÛÏ·ÎÂ "¬˚ÒÓÍÓÂ Ì‡ÔˇÊÂÌËÂ"
000a0e  f8980020          LDRB     r0,[r8,#0x20]  ; vz1_stat
000a12  280d              CMP      r0,#0xd
000a14  d129              BNE      |L1.2666|
;;;727    	{
;;;728    	if((vz1_stat_old!=vz1_stat)||(vz1_stat_cnt==0))
000a16  f8980021          LDRB     r0,[r8,#0x21]  ; vz1_stat_old
000a1a  280d              CMP      r0,#0xd
000a1c  d102              BNE      |L1.2596|
000a1e  f8b8006e          LDRH     r0,[r8,#0x6e]  ; vz1_stat_cnt
000a22  b908              CBNZ     r0,|L1.2600|
                  |L1.2596|
;;;729    		{
;;;730    		vz1_stat_cnt=10;
000a24  f8a8406e          STRH     r4,[r8,#0x6e]
                  |L1.2600|
;;;731    		}
;;;732    	vz1_stat_cnt--;
000a28  f8b8006e          LDRH     r0,[r8,#0x6e]  ; vz1_stat_cnt
000a2c  f1a00001          SUB      r0,r0,#1
000a30  b200              SXTH     r0,r0
000a32  f8a8006e          STRH     r0,[r8,#0x6e]
;;;733    	if((vz1_stat_cnt==10)||(vz1_stat_cnt==9))
000a36  280a              CMP      r0,#0xa
000a38  d001              BEQ      |L1.2622|
000a3a  2809              CMP      r0,#9
000a3c  d106              BNE      |L1.2636|
                  |L1.2622|
;;;734    		{
;;;735    		show_mess(	"”–¿¬Õ»“≈À‹Õ€… «¿–ﬂƒ ",
000a3e  a3dc              ADR      r3,|L1.3504|
000a40  a2e1              ADR      r2,|L1.3528|
000a42  a1e7              ADR      r1,|L1.3552|
000a44  a0d4              ADR      r0,|L1.3480|
000a46  9700              STR      r7,[sp,#0]
000a48  f7fffffe          BL       show_mess
                  |L1.2636|
;;;736    					"  ¡”ƒ≈“ œ–ŒƒŒÀ∆≈Õ   ",
;;;737    					"  œŒ—À≈ ¬ Àﬁ◊≈Õ»ﬂ   ",
;;;738    					"*   “”Ã¡À≈–¿!!!     ",
;;;739    					5000);
;;;740    		}
;;;741    	if(sk_stat[1]==1)
000a4c  7868              LDRB     r0,[r5,#1]  ; sk_stat
000a4e  2801              CMP      r0,#1
000a50  d105              BNE      |L1.2654|
;;;742    		{
;;;743    		vz1_stat=vz1sWRK;
000a52  f8884020          STRB     r4,[r8,#0x20]
;;;744    		lc640_write(EE_VZ1_STAT,vz1sWRK);
000a56  210a              MOVS     r1,#0xa
000a58  4658              MOV      r0,r11
000a5a  f7fffffe          BL       lc640_write
                  |L1.2654|
;;;745    		}
;;;746    	mess_send(MESS2RELE_HNDL,PARAM_RELE_SAMOKALIBR,0,20);
000a5e  2314              MOVS     r3,#0x14
000a60  2200              MOVS     r2,#0
000a62  2164              MOVS     r1,#0x64
000a64  20d2              MOVS     r0,#0xd2
000a66  f7fffffe          BL       mess_send
                  |L1.2666|
;;;747    	}
;;;748    if(vz1_stat==vz1sERR4)		//¬« Á‡ÍÓÌ˜ËÎÒˇ ‡ ÚÛÏ·ÎÂ ‚ÍÎ˛˜ÂÌ
000a6a  f8980020          LDRB     r0,[r8,#0x20]  ; vz1_stat
000a6e  280e              CMP      r0,#0xe
000a70  d12d              BNE      |L1.2766|
;;;749    	{
;;;750    	if((vz1_stat_old!=vz1_stat)||(vz1_stat_cnt==0))
000a72  f8980021          LDRB     r0,[r8,#0x21]  ; vz1_stat_old
000a76  280e              CMP      r0,#0xe
000a78  d102              BNE      |L1.2688|
000a7a  f8b8006e          LDRH     r0,[r8,#0x6e]  ; vz1_stat_cnt
000a7e  b908              CBNZ     r0,|L1.2692|
                  |L1.2688|
;;;751    		{
;;;752    		vz1_stat_cnt=10;
000a80  f8a8406e          STRH     r4,[r8,#0x6e]
                  |L1.2692|
;;;753    		}
;;;754    	vz1_stat_cnt--;
000a84  f8b8006e          LDRH     r0,[r8,#0x6e]  ; vz1_stat_cnt
000a88  f1a00001          SUB      r0,r0,#1
000a8c  b200              SXTH     r0,r0
000a8e  f8a8006e          STRH     r0,[r8,#0x6e]
;;;755    	if((vz1_stat_cnt==10)||(vz1_stat_cnt==9))
000a92  280a              CMP      r0,#0xa
000a94  d001              BEQ      |L1.2714|
000a96  2809              CMP      r0,#9
000a98  d109              BNE      |L1.2734|
                  |L1.2714|
;;;756    		{
;;;757    		show_mess(	"*    ¬€ Àﬁ◊»“≈      ",
000a9a  f2af13ec          ADR      r3,|L1.2224|
000a9e  f2af12d8          ADR      r2,|L1.2248|
000aa2  f2af11c4          ADR      r1,|L1.2272|
000aa6  a0d4              ADR      r0,|L1.3576|
000aa8  9700              STR      r7,[sp,#0]
000aaa  f7fffffe          BL       show_mess
                  |L1.2734|
;;;758    					"      “”Ã¡À≈–       ",
;;;759    					"     ¬€—Œ Œ√Œ       ",
;;;760    					"    Õ¿œ–ﬂ∆≈Õ»ﬂ      ",
;;;761    					5000);
;;;762    		}
;;;763    	if(sk_stat[1]==0)
000aae  7868              LDRB     r0,[r5,#1]  ; sk_stat
000ab0  b938              CBNZ     r0,|L1.2754|
;;;764    		{
;;;765    		vz1_stat=vz1sOFF;
000ab2  f8886020          STRB     r6,[r8,#0x20]
;;;766    		lc640_write(EE_VZ1_STAT,vz1sOFF);
000ab6  2100              MOVS     r1,#0
000ab8  4658              MOV      r0,r11
000aba  f7fffffe          BL       lc640_write
;;;767    		vz_stop();
000abe  f7fffffe          BL       vz_stop
                  |L1.2754|
;;;768    
;;;769    		}
;;;770    	mess_send(MESS2RELE_HNDL,PARAM_RELE_SAMOKALIBR,1,20);
000ac2  2314              MOVS     r3,#0x14
000ac4  2201              MOVS     r2,#1
000ac6  2164              MOVS     r1,#0x64
000ac8  20d2              MOVS     r0,#0xd2
000aca  f7fffffe          BL       mess_send
                  |L1.2766|
;;;771    	}
;;;772    if(vz1_stat==vz1sFINE)		//”« Á‡ÍÓÌ˜ËÎÒˇ, Ì‡ÔÓÏËÌ‡ÌËÂ
000ace  f8980020          LDRB     r0,[r8,#0x20]  ; vz1_stat
;;;773    	{
;;;774    	if((vz1_stat_old!=vz1_stat)||(vz1_stat_cnt==0))
;;;775    		{
;;;776    		vz1_stat_cnt=10;
;;;777    		}
;;;778    	vz1_stat_cnt--;
;;;779    	if((vz1_stat_cnt==10)||(vz1_stat_cnt==9))
;;;780    		{
;;;781    		show_mess(	"   ”–¿¬Õ»“≈À‹Õ€…    ",
000ad2  f64037b8          MOV      r7,#0xbb8
000ad6  280f              CMP      r0,#0xf               ;772
000ad8  d138              BNE      |L1.2892|
000ada  f8980021          LDRB     r0,[r8,#0x21]         ;774  ; vz1_stat_old
000ade  280f              CMP      r0,#0xf               ;774
000ae0  d102              BNE      |L1.2792|
000ae2  f8b8006e          LDRH     r0,[r8,#0x6e]         ;774  ; vz1_stat_cnt
000ae6  b908              CBNZ     r0,|L1.2796|
                  |L1.2792|
000ae8  f8a8406e          STRH     r4,[r8,#0x6e]         ;776
                  |L1.2796|
000aec  f8b8006e          LDRH     r0,[r8,#0x6e]         ;778  ; vz1_stat_cnt
000af0  f1a00001          SUB      r0,r0,#1              ;778
000af4  b200              SXTH     r0,r0                 ;778
000af6  f8a8006e          STRH     r0,[r8,#0x6e]         ;778
000afa  280a              CMP      r0,#0xa               ;779
000afc  d001              BEQ      |L1.2818|
000afe  2809              CMP      r0,#9                 ;779
000b00  d106              BNE      |L1.2832|
                  |L1.2818|
000b02  a3c3              ADR      r3,|L1.3600|
000b04  a2c8              ADR      r2,|L1.3624|
000b06  a1ce              ADR      r1,|L1.3648|
000b08  a0d3              ADR      r0,|L1.3672|
000b0a  9700              STR      r7,[sp,#0]
000b0c  f7fffffe          BL       show_mess
                  |L1.2832|
;;;782    					"       «¿–ﬂƒ        ",
;;;783    					"      ”—œ≈ÿÕŒ       ",
;;;784    					"     «¿¬≈–ÿ≈Õ       ",
;;;785    					3000);
;;;786    		}
;;;787    	if((vz1_stat_cnt==6)||(vz1_stat_cnt==5))
000b10  f9b8006e          LDRSH    r0,[r8,#0x6e]  ; vz1_stat_cnt
000b14  2806              CMP      r0,#6
000b16  d001              BEQ      |L1.2844|
000b18  2805              CMP      r0,#5
000b1a  d109              BNE      |L1.2864|
                  |L1.2844|
;;;788    		{
;;;789    		show_mess(	"     ¬€ Àﬁ◊»“≈      ",
000b1c  f2af2370          ADR      r3,|L1.2224|
000b20  f2af225c          ADR      r2,|L1.2248|
000b24  f2af2148          ADR      r1,|L1.2272|
000b28  a0d1              ADR      r0,|L1.3696|
000b2a  9700              STR      r7,[sp,#0]
000b2c  f7fffffe          BL       show_mess
                  |L1.2864|
;;;790    					"      “”Ã¡À≈–       ",
;;;791    					"     ¬€—Œ Œ√Œ       ",
;;;792    					"    Õ¿œ–ﬂ∆≈Õ»ﬂ      ",
;;;793    					3000);
;;;794    		}
;;;795    	if(sk_stat[1]==0)
000b30  7868              LDRB     r0,[r5,#1]  ; sk_stat
000b32  b928              CBNZ     r0,|L1.2880|
;;;796    		{
;;;797    		vz1_stat=vz1sOFF;
000b34  f8886020          STRB     r6,[r8,#0x20]
;;;798    		lc640_write(EE_VZ1_STAT,vz1sOFF);
000b38  2100              MOVS     r1,#0
000b3a  4658              MOV      r0,r11
000b3c  f7fffffe          BL       lc640_write
                  |L1.2880|
;;;799    		}
;;;800    	mess_send(MESS2RELE_HNDL,PARAM_RELE_SAMOKALIBR,0,20);
000b40  2314              MOVS     r3,#0x14
000b42  2200              MOVS     r2,#0
000b44  2164              MOVS     r1,#0x64
000b46  20d2              MOVS     r0,#0xd2
000b48  f7fffffe          BL       mess_send
                  |L1.2892|
;;;801    	}
;;;802    
;;;803    if(vz1_stat==vz1sSTOP)		//”« ÔÂÍ‡˘ÂÌ, Ì‡ÔÓÏËÌ‡ÌËÂ
000b4c  f8980020          LDRB     r0,[r8,#0x20]  ; vz1_stat
000b50  2810              CMP      r0,#0x10
000b52  d138              BNE      |L1.3014|
;;;804    	{
;;;805    	if((vz1_stat_old!=vz1_stat)||(vz1_stat_cnt==0))
000b54  f8980021          LDRB     r0,[r8,#0x21]  ; vz1_stat_old
000b58  2810              CMP      r0,#0x10
000b5a  d102              BNE      |L1.2914|
000b5c  f8b8006e          LDRH     r0,[r8,#0x6e]  ; vz1_stat_cnt
000b60  b908              CBNZ     r0,|L1.2918|
                  |L1.2914|
;;;806    		{
;;;807    		vz1_stat_cnt=10;
000b62  f8a8406e          STRH     r4,[r8,#0x6e]
                  |L1.2918|
;;;808    		}
;;;809    	vz1_stat_cnt--;
000b66  f8b8006e          LDRH     r0,[r8,#0x6e]  ; vz1_stat_cnt
000b6a  f1a00001          SUB      r0,r0,#1
000b6e  b200              SXTH     r0,r0
000b70  f8a8006e          STRH     r0,[r8,#0x6e]
;;;810    	if((vz1_stat_cnt==10)||(vz1_stat_cnt==9))
000b74  280a              CMP      r0,#0xa
000b76  d001              BEQ      |L1.2940|
000b78  2809              CMP      r0,#9
000b7a  d106              BNE      |L1.2954|
                  |L1.2940|
;;;811    		{
;;;812    		show_mess(	"   ”–¿¬Õ»“≈À‹Õ€…    ",
000b7c  a3c2              ADR      r3,|L1.3720|
000b7e  a2c8              ADR      r2,|L1.3744|
000b80  a1af              ADR      r1,|L1.3648|
000b82  a0b5              ADR      r0,|L1.3672|
000b84  9700              STR      r7,[sp,#0]
000b86  f7fffffe          BL       show_mess
                  |L1.2954|
;;;813    					"       «¿–ﬂƒ        ",
;;;814    					"     œ–≈ –¿Ÿ≈Õ      ",
;;;815    					"                    ",
;;;816    					3000);
;;;817    		}
;;;818    	if((vz1_stat_cnt==6)||(vz1_stat_cnt==5))
000b8a  f9b8006e          LDRSH    r0,[r8,#0x6e]  ; vz1_stat_cnt
000b8e  2806              CMP      r0,#6
000b90  d001              BEQ      |L1.2966|
000b92  2805              CMP      r0,#5
000b94  d109              BNE      |L1.2986|
                  |L1.2966|
;;;819    		{
;;;820    		show_mess(	"     ¬€ Àﬁ◊»“≈      ",
000b96  f2af23e8          ADR      r3,|L1.2224|
000b9a  f2af22d4          ADR      r2,|L1.2248|
000b9e  f2af21c0          ADR      r1,|L1.2272|
000ba2  a0b3              ADR      r0,|L1.3696|
000ba4  9700              STR      r7,[sp,#0]
000ba6  f7fffffe          BL       show_mess
                  |L1.2986|
;;;821    					"      “”Ã¡À≈–       ",
;;;822    					"     ¬€—Œ Œ√Œ       ",
;;;823    					"    Õ¿œ–ﬂ∆≈Õ»ﬂ      ",
;;;824    					3000);
;;;825    		}
;;;826    	if(sk_stat[1]==0)
000baa  7868              LDRB     r0,[r5,#1]  ; sk_stat
000bac  b928              CBNZ     r0,|L1.3002|
;;;827    		{
;;;828    		vz1_stat=vz1sOFF;
000bae  f8886020          STRB     r6,[r8,#0x20]
;;;829    		lc640_write(EE_VZ1_STAT,vz1sOFF);
000bb2  2100              MOVS     r1,#0
000bb4  4658              MOV      r0,r11
000bb6  f7fffffe          BL       lc640_write
                  |L1.3002|
;;;830    		}
;;;831    	mess_send(MESS2RELE_HNDL,PARAM_RELE_SAMOKALIBR,0,20);
000bba  2314              MOVS     r3,#0x14
000bbc  2200              MOVS     r2,#0
000bbe  2164              MOVS     r1,#0x64
000bc0  20d2              MOVS     r0,#0xd2
000bc2  f7fffffe          BL       mess_send
                  |L1.3014|
;;;832    	}
;;;833    
;;;834    vz1_stat_old=vz1_stat;
000bc6  f8980020          LDRB     r0,[r8,#0x20]  ; vz1_stat
000bca  f8880021          STRB     r0,[r8,#0x21]
;;;835    
;;;836    
;;;837    
;;;838    }
000bce  e8bd8ff8          POP      {r3-r11,pc}
;;;839    
                          ENDP

                  vz1_start PROC
;;;841    //ÒÚ‡Ú Û‡‚ÌËÚÂÎ¸ÌÓ„ Á‡ˇ‰‡
;;;842    char vz1_start(char hour)
000bd2  b510              PUSH     {r4,lr}
;;;843    {          
;;;844    char out;
;;;845    out=0;
000bd4  f04f0000          MOV      r0,#0
;;;846    if((spc_stat==spcOFF)&&(speedChrgBlckStat!=1)&&(vz1_stat==vz1sOFF))
000bd8  49b7              LDR      r1,|L1.3768|
000bda  7d0a              LDRB     r2,[r1,#0x14]  ; spc_stat
000bdc  2a00              CMP      r2,#0
000bde  d112              BNE      |L1.3078|
000be0  4ab6              LDR      r2,|L1.3772|
000be2  8812              LDRH     r2,[r2,#0]  ; speedChrgBlckStat
000be4  2a01              CMP      r2,#1
000be6  d00e              BEQ      |L1.3078|
000be8  f8912020          LDRB     r2,[r1,#0x20]  ; vz1_stat
000bec  2a00              CMP      r2,#0
000bee  d10a              BNE      |L1.3078|
;;;847    	{
;;;848    	if(vz1_stat==vz1sOFF)
;;;849    		{
;;;850    		vz1_stat=vz1sSTEP1;
000bf0  f04f0001          MOV      r0,#1
000bf4  f8810020          STRB     r0,[r1,#0x20]
;;;851    		lc640_write(EE_VZ1_STAT,vz1sSTEP1);
000bf8  4601              MOV      r1,r0
000bfa  f44f70c9          MOV      r0,#0x192
000bfe  f7fffffe          BL       lc640_write
;;;852    		out=1;
000c02  f04f0001          MOV      r0,#1
                  |L1.3078|
;;;853    		
;;;854    		}
;;;855    /*	spc_stat=spcVZ;
;;;856    	__ee_spc_stat=spcVZ; 
;;;857    	lc640_write_int(EE_SPC_STAT,__ee_spc_stat);   
;;;858    	vz_cnt_h=hour;
;;;859    	__ee_vz_cnt=hour*60;
;;;860    	if(hour==0)__ee_vz_cnt=30;
;;;861    	lc640_write_int(EE_VZ_CNT,__ee_vz_cnt);
;;;862    	lc640_write_int(EE_SPC_VZ_LENGT,__ee_vz_cnt);	
;;;863    	vz_cnt_h_=0;
;;;864    	vz_cnt_s=0;
;;;865    	vz_cnt_s_=0;
;;;866    	
;;;867    		*/
;;;868    	}
;;;869    //else if((spc_stat==spc_KE1p1)||(spc_stat==spc_KE1p2)) out=22; 
;;;870    //else if((spc_stat==spc_KE2p1)||(spc_stat==spc_KE2p2)) out=33;
;;;871    //plazma=out;	
;;;872    return out;
;;;873    }
000c06  e48b              B        |L1.1312|
;;;874    
                          ENDP

                  vz1_stop PROC
;;;876    //ÒÚÓÔ Û‡‚ÌËÚÂÎ¸ÌÓ„ Á‡ˇ‰‡
;;;877    void vz1_stop(void)
000c08  48ab              LDR      r0,|L1.3768|
;;;878    {
;;;879    if(vz1_stat!=vz1sOFF)
000c0a  f8901020          LDRB     r1,[r0,#0x20]  ; vz1_stat
000c0e  2900              CMP      r1,#0
000c10  d007              BEQ      |L1.3106|
;;;880    	{
;;;881    	vz1_stat=vz1sSTOP;
000c12  f04f0110          MOV      r1,#0x10
000c16  f8801020          STRB     r1,[r0,#0x20]
;;;882    	lc640_write(EE_VZ1_STAT,vz1sSTOP);
000c1a  f44f70c9          MOV      r0,#0x192
000c1e  f7ffbffe          B.W      lc640_write
                  |L1.3106|
;;;883    	}
;;;884    }
000c22  4770              BX       lr
;;;885    
                          ENDP

                  vz2_drv PROC
;;;887    //‰‡È‚Â ÙÓÏÓ‚Ó˜ÌÓ„Ó Á‡ˇ‰‡
;;;888    void vz2_drv(void)
000c24  e92d4ff8          PUSH     {r3-r11,lr}
;;;889    {
;;;890    
;;;891    if(vz2_stat==vz2sSTEP1)
000c28  4ea3              LDR      r6,|L1.3768|
;;;892    	{
;;;893    	if(vz2_stat_old!=vz2_stat)
;;;894    		{
;;;895    		vz2_stat_cnt=5;
;;;896    		}
;;;897    	if(vz2_stat_cnt)
;;;898    		{
;;;899    		vz2_stat_cnt--;
;;;900    		if(vz2_stat_cnt==0)
;;;901    			{
;;;902    			vz2_stat=vz2sERR1; 	//ÕÂ ‚ÍÎ˛˜ËÎ‡Ò¸ ‚ÂÌÚËÎˇˆËˇ;
;;;903    			lc640_write(EE_VZ2_STAT,vz2sERR1);
;;;904    			}
;;;905    		}
;;;906    	if(sk_stat[0]==1)
000c2a  4da5              LDR      r5,|L1.3776|
000c2c  f8960023          LDRB     r0,[r6,#0x23]         ;891  ; vz2_stat
000c30  2801              CMP      r0,#1                 ;891
000c32  d13b              BNE      |L1.3244|
000c34  f8960024          LDRB     r0,[r6,#0x24]         ;893  ; vz2_stat_old
000c38  2801              CMP      r0,#1                 ;893
000c3a  d003              BEQ      |L1.3140|
000c3c  f04f0005          MOV      r0,#5                 ;895
000c40  f8a60072          STRH     r0,[r6,#0x72]         ;895
                  |L1.3140|
000c44  f9b60072          LDRSH    r0,[r6,#0x72]         ;897  ; vz2_stat_cnt
000c48  b170              CBZ      r0,|L1.3176|
000c4a  f1a00001          SUB      r0,r0,#1              ;899
000c4e  b200              SXTH     r0,r0                 ;899
000c50  f8a60072          STRH     r0,[r6,#0x72]         ;899
000c54  b940              CBNZ     r0,|L1.3176|
000c56  f04f000c          MOV      r0,#0xc               ;902
000c5a  f8860023          STRB     r0,[r6,#0x23]         ;902
000c5e  4601              MOV      r1,r0                 ;903
000c60  f44f70ca          MOV      r0,#0x194             ;903
000c64  f7fffffe          BL       lc640_write
                  |L1.3176|
000c68  7828              LDRB     r0,[r5,#0]  ; sk_stat
000c6a  2801              CMP      r0,#1
000c6c  d118              BNE      |L1.3232|
;;;907    		{
;;;908    		vz2_stat=vz2sSTEP2;
000c6e  f04f0002          MOV      r0,#2
000c72  f8860023          STRB     r0,[r6,#0x23]
;;;909    		lc640_write(EE_VZ2_STAT,vz2sSTEP2);
000c76  4601              MOV      r1,r0
000c78  f44f70ca          MOV      r0,#0x194
000c7c  f7fffffe          BL       lc640_write
;;;910    		tree_up(iVZ2_STEP2_2,1,0,0);
000c80  2300              MOVS     r3,#0
000c82  461a              MOV      r2,r3
000c84  2101              MOVS     r1,#1
000c86  20dd              MOVS     r0,#0xdd
000c88  f7fffffe          BL       tree_up
;;;911    		tree_up(iVZ2_STEP2_1,0,0,0);
000c8c  2300              MOVS     r3,#0
000c8e  461a              MOV      r2,r3
000c90  4619              MOV      r1,r3
000c92  20dc              MOVS     r0,#0xdc
000c94  f7fffffe          BL       tree_up
;;;912    		ret(1200);
000c98  f44f6096          MOV      r0,#0x4b0
000c9c  f7fffffe          BL       ||ret||
                  |L1.3232|
;;;913    		}
;;;914    	mess_send(MESS2RELE_HNDL,PARAM_RELE_SAMOKALIBR,0,20);
000ca0  2314              MOVS     r3,#0x14
000ca2  2200              MOVS     r2,#0
000ca4  2164              MOVS     r1,#0x64
000ca6  20d2              MOVS     r0,#0xd2
000ca8  f7fffffe          BL       mess_send
                  |L1.3244|
;;;915    	}
;;;916    
;;;917    if(vz2_stat==vz2sSTEP2)
000cac  f8960023          LDRB     r0,[r6,#0x23]  ; vz2_stat
000cb0  2802              CMP      r0,#2
000cb2  d11a              BNE      |L1.3306|
;;;918    	{
;;;919    	if((vz2_stat_old!=vz2_stat)||(vz2_stat_cnt==0))
000cb4  f8960024          LDRB     r0,[r6,#0x24]  ; vz2_stat_old
000cb8  2802              CMP      r0,#2
000cba  d102              BNE      |L1.3266|
000cbc  f8b60072          LDRH     r0,[r6,#0x72]  ; vz2_stat_cnt
000cc0  b918              CBNZ     r0,|L1.3274|
                  |L1.3266|
;;;920    		{
;;;921    		vz2_stat_cnt=15;
000cc2  f04f000f          MOV      r0,#0xf
000cc6  f8a60072          STRH     r0,[r6,#0x72]
                  |L1.3274|
;;;922    		}
;;;923    	vz2_stat_cnt--;
000cca  f8b60072          LDRH     r0,[r6,#0x72]  ; vz2_stat_cnt
000cce  f1a00001          SUB      r0,r0,#1
000cd2  f8a60072          STRH     r0,[r6,#0x72]
;;;924    	mess_send(MESS2RELE_HNDL,PARAM_RELE_SAMOKALIBR,0,20);
000cd6  f04f0314          MOV      r3,#0x14
000cda  f04f0200          MOV      r2,#0
000cde  f04f0164          MOV      r1,#0x64
000ce2  f04f00d2          MOV      r0,#0xd2
000ce6  f7fffffe          BL       mess_send
                  |L1.3306|
;;;925    	}
;;;926    
;;;927    if(vz2_stat==vz2sSTEP3)
000cea  f8960023          LDRB     r0,[r6,#0x23]  ; vz2_stat
;;;928    	{
;;;929    	if((vz2_stat_old!=vz2_stat)||(vz2_stat_cnt==0))
;;;930    		{
;;;931    		vz2_stat_cnt=10;
000cee  240a              MOVS     r4,#0xa
000cf0  2700              MOVS     r7,#0
;;;932    		cntrl_stat=0;
;;;933    		cntrl_stat_new=0;
;;;934    		cntrl_stat_old=0;
;;;935    		}
;;;936    	vz2_stat_cnt--;
;;;937    	if((vz2_stat_cnt==10)||(vz2_stat_cnt==9))
;;;938    		{
;;;939    		show_mess(	"     ¬ Àﬁ◊»“≈       ",
000cf2  f2413888          MOV      r8,#0x1388
000cf6  2803              CMP      r0,#3                 ;927
000cf8  d128              BNE      |L1.3404|
000cfa  f8960024          LDRB     r0,[r6,#0x24]         ;929  ; vz2_stat_old
000cfe  2803              CMP      r0,#3                 ;929
000d00  d102              BNE      |L1.3336|
000d02  f8b60072          LDRH     r0,[r6,#0x72]         ;929  ; vz2_stat_cnt
000d06  b920              CBNZ     r0,|L1.3346|
                  |L1.3336|
000d08  f8a64072          STRH     r4,[r6,#0x72]         ;931
000d0c  84f7              STRH     r7,[r6,#0x26]         ;932
000d0e  87b7              STRH     r7,[r6,#0x3c]         ;933
000d10  8537              STRH     r7,[r6,#0x28]         ;934
                  |L1.3346|
000d12  f8b60072          LDRH     r0,[r6,#0x72]         ;936  ; vz2_stat_cnt
000d16  f1a00001          SUB      r0,r0,#1              ;936
000d1a  b200              SXTH     r0,r0                 ;936
000d1c  f8a60072          STRH     r0,[r6,#0x72]         ;936
000d20  280a              CMP      r0,#0xa               ;937
000d22  d001              BEQ      |L1.3368|
000d24  2809              CMP      r0,#9                 ;937
000d26  d10b              BNE      |L1.3392|
                  |L1.3368|
000d28  f2af437c          ADR      r3,|L1.2224|
000d2c  f2af4268          ADR      r2,|L1.2248|
000d30  f2af4154          ADR      r1,|L1.2272|
000d34  f2af4040          ADR      r0,|L1.2296|
000d38  f8cd8000          STR      r8,[sp,#0]
000d3c  f7fffffe          BL       show_mess
                  |L1.3392|
;;;940    					"      “”Ã¡À≈–       ",
;;;941    					"     ¬€—Œ Œ√Œ       ",
;;;942    					"    Õ¿œ–ﬂ∆≈Õ»ﬂ      ",
;;;943    					5000);
;;;944    		}
;;;945    	if(sk_stat[1]==1)
000d40  7868              LDRB     r0,[r5,#1]  ; sk_stat
000d42  2801              CMP      r0,#1
000d44  d103              BNE      |L1.3406|
;;;946    		{
;;;947    		vz2_stat=vz2sWRK1;
000d46  f8864023          STRB     r4,[r6,#0x23]
;;;948    		lc640_write(EE_VZ2_STAT,vz2sWRK1);
000d4a  e0bb              B        |L1.3780|
                  |L1.3404|
000d4c  e0cc              B        |L1.3816|
                  |L1.3406|
000d4e  e0c5              B        |L1.3804|
                  |L1.3408|
000d50  2020c1c5          DCB      "  ",193,197,199," ",194,197,205,210,200,203,223,214,200
000d54  c720c2c5
000d58  cdd2c8cb
000d5c  dfd6c8  
000d5f  c8212120          DCB      200,"!!  ",0
000d63  2000    
000d65  00                DCB      0
000d66  00                DCB      0
000d67  00                DCB      0
                  |L1.3432|
000d68  20202020          DCB      "      ",194,202,203,222,215,197,205,"       ",0
000d6c  2020c2ca
000d70  cbded7c5
000d74  cd202020
000d78  20202020
000d7c  00      
000d7d  00                DCB      0
000d7e  00                DCB      0
000d7f  00                DCB      0
                  |L1.3456|
000d80  202020cd          DCB      "   ",205,197," ",204,206,198,197,210," ",193,219,210,220
000d84  c520ccce
000d88  c6c5d220
000d8c  c1dbd2dc
000d90  20202020          DCB      "    ",0
000d94  00      
000d95  00                DCB      0
000d96  00                DCB      0
000d97  00                DCB      0
                  |L1.3480|
000d98  d3d0c0c2          DCB      211,208,192,194,205,200,210,197,203,220,205,219,201," ",199
000d9c  cdc8d2c5
000da0  cbdccddb
000da4  c920c7  
000da7  c0d0dfc4          DCB      192,208,223,196," ",0
000dab  2000    
000dad  00                DCB      0
000dae  00                DCB      0
000daf  00                DCB      0
                  |L1.3504|
000db0  2a202020          DCB      "*   ",210,211,204,193,203,197,208,192,"!!!     ",0
000db4  d2d3ccc1
000db8  cbc5d0c0
000dbc  21212120
000dc0  20202020
000dc4  00      
000dc5  00                DCB      0
000dc6  00                DCB      0
000dc7  00                DCB      0
                  |L1.3528|
000dc8  2020cfce          DCB      "  ",207,206,209,203,197," ",194,202,203,222,215,197,205
000dcc  d1cbc520
000dd0  c2cacbde
000dd4  d7c5cd  
000dd7  c8df2020          DCB      200,223,"   ",0
000ddb  2000    
000ddd  00                DCB      0
000dde  00                DCB      0
000ddf  00                DCB      0
                  |L1.3552|
000de0  2020c1d3          DCB      "  ",193,211,196,197,210," ",207,208,206,196,206,203,198
000de4  c4c5d220
000de8  cfd0cec4
000dec  cecbc6  
000def  c5cd2020          DCB      197,205,"   ",0
000df3  2000    
000df5  00                DCB      0
000df6  00                DCB      0
000df7  00                DCB      0
                  |L1.3576|
000df8  2a202020          DCB      "*    ",194,219,202,203,222,215,200,210,197,"      ",0
000dfc  20c2dbca
000e00  cbded7c8
000e04  d2c52020
000e08  20202020
000e0c  00      
000e0d  00                DCB      0
000e0e  00                DCB      0
000e0f  00                DCB      0
                  |L1.3600|
000e10  20202020          DCB      "     ",199,192,194,197,208,216,197,205,"       ",0
000e14  20c7c0c2
000e18  c5d0d8c5
000e1c  cd202020
000e20  20202020
000e24  00      
000e25  00                DCB      0
000e26  00                DCB      0
000e27  00                DCB      0
                  |L1.3624|
000e28  20202020          DCB      "      ",211,209,207,197,216,205,206,"       ",0
000e2c  2020d3d1
000e30  cfc5d8cd
000e34  ce202020
000e38  20202020
000e3c  00      
000e3d  00                DCB      0
000e3e  00                DCB      0
000e3f  00                DCB      0
                  |L1.3648|
000e40  20202020          DCB      "       ",199,192,208,223,196,"        ",0
000e44  202020c7
000e48  c0d0dfc4
000e4c  20202020
000e50  20202020
000e54  00      
000e55  00                DCB      0
000e56  00                DCB      0
000e57  00                DCB      0
                  |L1.3672|
000e58  202020d3          DCB      "   ",211,208,192,194,205,200,210,197,203,220,205,219,201
000e5c  d0c0c2cd
000e60  c8d2c5cb
000e64  dccddbc9
000e68  20202020          DCB      "    ",0
000e6c  00      
000e6d  00                DCB      0
000e6e  00                DCB      0
000e6f  00                DCB      0
                  |L1.3696|
000e70  20202020          DCB      "     ",194,219,202,203,222,215,200,210,197,"      ",0
000e74  20c2dbca
000e78  cbded7c8
000e7c  d2c52020
000e80  20202020
000e84  00      
000e85  00                DCB      0
000e86  00                DCB      0
000e87  00                DCB      0
                  |L1.3720|
000e88  20202020          DCB      "                    ",0
000e8c  20202020
000e90  20202020
000e94  20202020
000e98  20202020
000e9c  00      
000e9d  00                DCB      0
000e9e  00                DCB      0
000e9f  00                DCB      0
                  |L1.3744|
000ea0  20202020          DCB      "     ",207,208,197,202,208,192,217,197,205,"      ",0
000ea4  20cfd0c5
000ea8  cad0c0d9
000eac  c5cd2020
000eb0  20202020
000eb4  00      
000eb5  00                DCB      0
000eb6  00                DCB      0
000eb7  00                DCB      0
                  |L1.3768|
                          DCD      ||area_number.23||
                  |L1.3772|
                          DCD      speedChrgBlckStat
                  |L1.3776|
                          DCD      sk_stat
                  |L1.3780|
000ec4  210a              MOVS     r1,#0xa
000ec6  f44f70ca          MOV      r0,#0x194
000eca  f7fffffe          BL       lc640_write
;;;949    		volt_region=1;
000ece  f04f0001          MOV      r0,#1
000ed2  f8860022          STRB     r0,[r6,#0x22]
;;;950    		cntrl_stat=0;
000ed6  84f7              STRH     r7,[r6,#0x26]
;;;951    		cntrl_stat_new=0;
000ed8  87b7              STRH     r7,[r6,#0x3c]
;;;952    		cntrl_stat_old=0;
000eda  8537              STRH     r7,[r6,#0x28]
                  |L1.3804|
;;;953    		}
;;;954    	mess_send(MESS2RELE_HNDL,PARAM_RELE_SAMOKALIBR,0,20);
000edc  2314              MOVS     r3,#0x14
000ede  2200              MOVS     r2,#0
000ee0  2164              MOVS     r1,#0x64
000ee2  20d2              MOVS     r0,#0xd2
000ee4  f7fffffe          BL       mess_send
                  |L1.3816|
;;;955    	}
;;;956    
;;;957    if(vz2_stat==vz2sWRK1)
000ee8  f8960023          LDRB     r0,[r6,#0x23]  ; vz2_stat
;;;958    	{
;;;959    
;;;960    	if(vz2_stat_old!=vz2_stat)
;;;961    		{
;;;962    		vz2_wrk_cnt=3600L/*100L*/*((long)FZ_T1);
000eec  f8df9410          LDR      r9,|L1.4864|
;;;963    		//if(VZ_HR==0)  	hv_vz_wrk_cnt=1800L;
;;;964    		vz2_up_cnt=0L;
;;;965    
;;;966    		}
;;;967    	vz2_wrk_cnt--;
;;;968    	vz2_up_cnt++;
;;;969    
;;;970    	if(vz2_wrk_cnt==0)
;;;971    		{
;;;972    		vz2_stat=vz2sWRK2;
;;;973    		lc640_write(EE_VZ2_STAT,vz2sWRK2);
;;;974    		}
;;;975    	if(sk_stat[0]==0)
;;;976    		{
;;;977    		vz2_stat=vz2sERR2;
;;;978    		lc640_write(EE_VZ2_STAT,vz2sERR2);
;;;979    		}
;;;980    	if(sk_stat[1]==0)
;;;981    		{
;;;982    		vz2_stat=vz2sERR3;
;;;983    		lc640_write(EE_VZ2_STAT,vz2sERR3);
;;;984    		}
;;;985    	//if(abs(out_U-FZ_U1)<10)
;;;986    	if((out_U<(FZ_U1+30))&&(out_U>(FZ_U1-10)))
;;;987    		{
;;;988    		if((Ib_ips_termokompensat/10)<FZ_ISW12)
;;;989    			{
;;;990    			if(vz2_stat_ph2_cnt)
;;;991    				{
;;;992    				vz2_stat_ph2_cnt--;
;;;993    				if(vz2_stat_ph2_cnt==0)
;;;994    					{
;;;995    					vz2_stat=vz2sWRK2;
;;;996    					lc640_write(EE_VZ2_STAT,vz2sWRK2);
;;;997    					}
;;;998    				}
;;;999    			}
;;;1000   		else
;;;1001   			{
;;;1002   			vz2_stat_ph2_cnt=60;
;;;1003   			}
;;;1004   		}
;;;1005   	else
;;;1006   		{
;;;1007   		vz2_stat_ph2_cnt=60;
;;;1008   		}
;;;1009   	if(((Ibmax/10)>IZMAX_)&&(cntrl_stat<=20)&&(volt_region==1)&&(volt_region_cnt==0))
;;;1010   		{
;;;1011   		volt_region=0;
;;;1012   		cntrl_stat=1000;
000ef0  f44f7b7a          MOV      r11,#0x3e8
000ef4  f04f0a0b          MOV      r10,#0xb              ;972
000ef8  280a              CMP      r0,#0xa               ;957
000efa  d17e              BNE      |L1.4090|
000efc  f8960024          LDRB     r0,[r6,#0x24]         ;960  ; vz2_stat_old
000f00  280a              CMP      r0,#0xa               ;960
000f02  d00a              BEQ      |L1.3866|
000f04  48ff              LDR      r0,|L1.4868|
000f06  f44f6161          MOV      r1,#0xe10             ;962
000f0a  f9b00000          LDRSH    r0,[r0,#0]            ;962  ; FZ_T1
000f0e  fb00f001          MUL      r0,r0,r1              ;962
000f12  f8c90028          STR      r0,[r9,#0x28]         ;962  ; vz2_wrk_cnt
000f16  f8c9702c          STR      r7,[r9,#0x2c]         ;964  ; vz2_up_cnt
                  |L1.3866|
000f1a  f8d90028          LDR      r0,[r9,#0x28]         ;967  ; vz2_wrk_cnt
000f1e  f1a00001          SUB      r0,r0,#1              ;967
000f22  f8c90028          STR      r0,[r9,#0x28]         ;967  ; vz2_wrk_cnt
000f26  f8d9102c          LDR      r1,[r9,#0x2c]         ;968  ; vz2_up_cnt
000f2a  f1010101          ADD      r1,r1,#1              ;968
000f2e  f8c9102c          STR      r1,[r9,#0x2c]         ;968  ; vz2_up_cnt
000f32  b930              CBNZ     r0,|L1.3906|
000f34  f886a023          STRB     r10,[r6,#0x23]        ;972
000f38  210b              MOVS     r1,#0xb               ;973
000f3a  f44f70ca          MOV      r0,#0x194             ;973
000f3e  f7fffffe          BL       lc640_write
                  |L1.3906|
000f42  7828              LDRB     r0,[r5,#0]            ;975  ; sk_stat
000f44  b940              CBNZ     r0,|L1.3928|
000f46  f04f000d          MOV      r0,#0xd               ;977
000f4a  f8860023          STRB     r0,[r6,#0x23]         ;977
000f4e  4601              MOV      r1,r0                 ;978
000f50  f44f70ca          MOV      r0,#0x194             ;978
000f54  f7fffffe          BL       lc640_write
                  |L1.3928|
000f58  7868              LDRB     r0,[r5,#1]            ;980  ; sk_stat
000f5a  b940              CBNZ     r0,|L1.3950|
000f5c  f04f000e          MOV      r0,#0xe               ;982
000f60  f8860023          STRB     r0,[r6,#0x23]         ;982
000f64  4601              MOV      r1,r0                 ;983
000f66  f44f70ca          MOV      r0,#0x194             ;983
000f6a  f7fffffe          BL       lc640_write
                  |L1.3950|
000f6e  48e6              LDR      r0,|L1.4872|
000f70  223c              MOVS     r2,#0x3c              ;1002
000f72  f9b01000          LDRSH    r1,[r0,#0]            ;986  ; out_U
000f76  48e5              LDR      r0,|L1.4876|
000f78  f9b00000          LDRSH    r0,[r0,#0]            ;986  ; FZ_U1
000f7c  f100031e          ADD      r3,r0,#0x1e           ;986
000f80  4299              CMP      r1,r3                 ;986
000f82  da20              BGE      |L1.4038|
000f84  380a              SUBS     r0,r0,#0xa            ;986
000f86  4281              CMP      r1,r0                 ;986
000f88  dd1d              BLE      |L1.4038|
000f8a  48e1              LDR      r0,|L1.4880|
000f8c  49e1              LDR      r1,|L1.4884|
000f8e  f9b00000          LDRSH    r0,[r0,#0]            ;988  ; Ib_ips_termokompensat
000f92  f9b11000          LDRSH    r1,[r1,#0]            ;988  ; FZ_ISW12
000f96  fb90f0f4          SDIV     r0,r0,r4              ;988
000f9a  4288              CMP      r0,r1                 ;988
000f9c  da10              BGE      |L1.4032|
000f9e  f9b60074          LDRSH    r0,[r6,#0x74]         ;990  ; vz2_stat_ph2_cnt
000fa2  b190              CBZ      r0,|L1.4042|
000fa4  f1a00001          SUB      r0,r0,#1              ;992
000fa8  b200              SXTH     r0,r0                 ;992
000faa  f8a60074          STRH     r0,[r6,#0x74]         ;992
000fae  b960              CBNZ     r0,|L1.4042|
000fb0  f886a023          STRB     r10,[r6,#0x23]        ;995
000fb4  210b              MOVS     r1,#0xb               ;996
000fb6  f44f70ca          MOV      r0,#0x194             ;996
000fba  f7fffffe          BL       lc640_write
000fbe  e004              B        |L1.4042|
                  |L1.4032|
000fc0  f8a62074          STRH     r2,[r6,#0x74]         ;1002
000fc4  e001              B        |L1.4042|
                  |L1.4038|
000fc6  f8a62074          STRH     r2,[r6,#0x74]         ;1007
                  |L1.4042|
000fca  f9b6003e          LDRSH    r0,[r6,#0x3e]         ;1009  ; Ibmax
000fce  f8b61040          LDRH     r1,[r6,#0x40]         ;1009  ; IZMAX_
000fd2  fb90f0f4          SDIV     r0,r0,r4              ;1009
000fd6  4288              CMP      r0,r1                 ;1009
000fd8  dd18              BLE      |L1.4108|
000fda  f9b62026          LDRSH    r2,[r6,#0x26]         ;1009  ; cntrl_stat
000fde  2a14              CMP      r2,#0x14              ;1009
000fe0  dc14              BGT      |L1.4108|
000fe2  f8962022          LDRB     r2,[r6,#0x22]         ;1009  ; volt_region
000fe6  2a01              CMP      r2,#1                 ;1009
000fe8  d110              BNE      |L1.4108|
000fea  f8b62070          LDRH     r2,[r6,#0x70]         ;1009  ; volt_region_cnt
000fee  b96a              CBNZ     r2,|L1.4108|
000ff0  f8867022          STRB     r7,[r6,#0x22]         ;1011
000ff4  f8a6b026          STRH     r11,[r6,#0x26]
;;;1013   		cntrl_stat_new=1000;
000ff8  e000              B        |L1.4092|
                  |L1.4090|
000ffa  e02f              B        |L1.4188|
                  |L1.4092|
000ffc  f8a6b03c          STRH     r11,[r6,#0x3c]
;;;1014   		cntrl_stat_old=1000;
001000  f8a6b028          STRH     r11,[r6,#0x28]
;;;1015   		volt_region_cnt=110;
001004  f04f026e          MOV      r2,#0x6e
001008  f8a62070          STRH     r2,[r6,#0x70]
                  |L1.4108|
;;;1016   		}
;;;1017   	if(((Ibmax/10)<IZMAX_)&&(cntrl_stat>=1000)&&(volt_region==0)&&(volt_region_cnt==0))
00100c  4288              CMP      r0,r1
00100e  da12              BGE      |L1.4150|
001010  f9b60026          LDRSH    r0,[r6,#0x26]  ; cntrl_stat
001014  4558              CMP      r0,r11
001016  db0e              BLT      |L1.4150|
001018  f8960022          LDRB     r0,[r6,#0x22]  ; volt_region
00101c  b958              CBNZ     r0,|L1.4150|
00101e  f8b60070          LDRH     r0,[r6,#0x70]  ; volt_region_cnt
001022  b940              CBNZ     r0,|L1.4150|
;;;1018   		{
;;;1019   		volt_region=1;
001024  f04f0001          MOV      r0,#1
001028  f8860022          STRB     r0,[r6,#0x22]
;;;1020   		cntrl_stat=10;
00102c  84f4              STRH     r4,[r6,#0x26]
;;;1021   		cntrl_stat_new=10;
00102e  87b4              STRH     r4,[r6,#0x3c]
;;;1022   		cntrl_stat_old=10;
001030  8534              STRH     r4,[r6,#0x28]
;;;1023   		volt_region_cnt=10;
001032  f8a64070          STRH     r4,[r6,#0x70]
                  |L1.4150|
;;;1024   		}
;;;1025   	if(volt_region==0) 		mess_send(MESS2RELE_HNDL,PARAM_RELE_SAMOKALIBR,0,20);
001036  f8960022          LDRB     r0,[r6,#0x22]  ; volt_region
00103a  b110              CBZ      r0,|L1.4162|
;;;1026   	else if(volt_region==1) mess_send(MESS2RELE_HNDL,PARAM_RELE_SAMOKALIBR,1,20);
00103c  2801              CMP      r0,#1
00103e  d007              BEQ      |L1.4176|
001040  e00c              B        |L1.4188|
                  |L1.4162|
001042  2314              MOVS     r3,#0x14              ;1025
001044  2200              MOVS     r2,#0                 ;1025
001046  2164              MOVS     r1,#0x64              ;1025
001048  20d2              MOVS     r0,#0xd2              ;1025
00104a  f7fffffe          BL       mess_send
00104e  e005              B        |L1.4188|
                  |L1.4176|
001050  2314              MOVS     r3,#0x14
001052  2201              MOVS     r2,#1
001054  2164              MOVS     r1,#0x64
001056  20d2              MOVS     r0,#0xd2
001058  f7fffffe          BL       mess_send
                  |L1.4188|
;;;1027   	}
;;;1028   
;;;1029   if(vz2_stat==vz2sWRK2)
00105c  f8960023          LDRB     r0,[r6,#0x23]  ; vz2_stat
001060  280b              CMP      r0,#0xb
001062  d174              BNE      |L1.4430|
;;;1030   	{
;;;1031   	if(vz2_stat_old!=vz2_stat)
001064  f8960024          LDRB     r0,[r6,#0x24]  ; vz2_stat_old
001068  280b              CMP      r0,#0xb
00106a  d008              BEQ      |L1.4222|
;;;1032   		{
;;;1033   		vz2_wrk_cnt=3600L/*100L*/*((long)FZ_T2);
00106c  48aa              LDR      r0,|L1.4888|
00106e  f44f6161          MOV      r1,#0xe10
001072  f9b00000          LDRSH    r0,[r0,#0]  ; FZ_T2
001076  fb00f001          MUL      r0,r0,r1
00107a  f8c90028          STR      r0,[r9,#0x28]  ; vz2_wrk_cnt
                  |L1.4222|
;;;1034   		//if(VZ_HR==0)  	hv_vz_wrk_cnt=1800L;
;;;1035   		//vz2_up_cnt=0L;
;;;1036   		}
;;;1037   	vz2_wrk_cnt--;
00107e  f8d90028          LDR      r0,[r9,#0x28]  ; vz2_wrk_cnt
001082  f1a00001          SUB      r0,r0,#1
001086  f8c90028          STR      r0,[r9,#0x28]  ; vz2_wrk_cnt
;;;1038   	vz2_up_cnt++;
00108a  f8d9102c          LDR      r1,[r9,#0x2c]  ; vz2_up_cnt
00108e  f1010101          ADD      r1,r1,#1
001092  f8c9102c          STR      r1,[r9,#0x2c]  ; vz2_up_cnt
;;;1039   
;;;1040   	if(vz2_wrk_cnt==0)
001096  b958              CBNZ     r0,|L1.4272|
;;;1041   		{
;;;1042   		vz2_stat=vz2sFINE;
001098  f04f0012          MOV      r0,#0x12
00109c  f8860023          STRB     r0,[r6,#0x23]
;;;1043   		lc640_write(EE_VZ2_STAT,vz2sFINE);
0010a0  4601              MOV      r1,r0
0010a2  f44f70ca          MOV      r0,#0x194
0010a6  f7fffffe          BL       lc640_write
;;;1044   		fz_mem_hndl(0);
0010aa  2000              MOVS     r0,#0
0010ac  f7fffffe          BL       fz_mem_hndl
                  |L1.4272|
;;;1045   		}
;;;1046   	if(sk_stat[0]==0)
0010b0  7828              LDRB     r0,[r5,#0]  ; sk_stat
0010b2  b940              CBNZ     r0,|L1.4294|
;;;1047   		{
;;;1048   		vz2_stat=vz2sERR5;
0010b4  f04f0010          MOV      r0,#0x10
0010b8  f8860023          STRB     r0,[r6,#0x23]
;;;1049   		lc640_write(EE_VZ2_STAT,vz2sERR5);
0010bc  4601              MOV      r1,r0
0010be  f44f70ca          MOV      r0,#0x194
0010c2  f7fffffe          BL       lc640_write
                  |L1.4294|
;;;1050   		}
;;;1051   	if(sk_stat[1]==0)
0010c6  7868              LDRB     r0,[r5,#1]  ; sk_stat
0010c8  b940              CBNZ     r0,|L1.4316|
;;;1052   		{
;;;1053   		vz2_stat=vz2sERR6;
0010ca  f04f0011          MOV      r0,#0x11
0010ce  f8860023          STRB     r0,[r6,#0x23]
;;;1054   		lc640_write(EE_VZ2_STAT,vz2sERR6);
0010d2  4601              MOV      r1,r0
0010d4  f44f70ca          MOV      r0,#0x194
0010d8  f7fffffe          BL       lc640_write
                  |L1.4316|
;;;1055   		}
;;;1056   	if(((Ibmax/10)>IZMAX_)&&(cntrl_stat<=20)&&(volt_region==1)&&(volt_region_cnt==0))
0010dc  f9b6003e          LDRSH    r0,[r6,#0x3e]  ; Ibmax
0010e0  f8b61040          LDRH     r1,[r6,#0x40]  ; IZMAX_
0010e4  fb90f0f4          SDIV     r0,r0,r4
0010e8  4288              CMP      r0,r1
0010ea  dd16              BLE      |L1.4378|
0010ec  f9b62026          LDRSH    r2,[r6,#0x26]  ; cntrl_stat
0010f0  2a14              CMP      r2,#0x14
0010f2  dc12              BGT      |L1.4378|
0010f4  f8962022          LDRB     r2,[r6,#0x22]  ; volt_region
0010f8  2a01              CMP      r2,#1
0010fa  d10e              BNE      |L1.4378|
0010fc  f8b62070          LDRH     r2,[r6,#0x70]  ; volt_region_cnt
001100  b95a              CBNZ     r2,|L1.4378|
;;;1057   		{
;;;1058   		volt_region=0;
001102  f8867022          STRB     r7,[r6,#0x22]
;;;1059   		cntrl_stat=1000;
001106  f8a6b026          STRH     r11,[r6,#0x26]
;;;1060   		cntrl_stat_new=1000;
00110a  f8a6b03c          STRH     r11,[r6,#0x3c]
;;;1061   		cntrl_stat_old=1000;
00110e  f8a6b028          STRH     r11,[r6,#0x28]
;;;1062   		volt_region_cnt=110;
001112  f04f026e          MOV      r2,#0x6e
001116  f8a62070          STRH     r2,[r6,#0x70]
                  |L1.4378|
;;;1063   		}
;;;1064   	if(((Ibmax/10)<IZMAX_)&&(cntrl_stat>=1000)&&(volt_region==0)&&(volt_region_cnt==0))
00111a  4288              CMP      r0,r1
00111c  da12              BGE      |L1.4420|
00111e  f9b60026          LDRSH    r0,[r6,#0x26]  ; cntrl_stat
001122  4558              CMP      r0,r11
001124  db0e              BLT      |L1.4420|
001126  f8960022          LDRB     r0,[r6,#0x22]  ; volt_region
00112a  b958              CBNZ     r0,|L1.4420|
00112c  f8b60070          LDRH     r0,[r6,#0x70]  ; volt_region_cnt
001130  b940              CBNZ     r0,|L1.4420|
;;;1065   		{
;;;1066   		volt_region=1;
001132  f04f0001          MOV      r0,#1
001136  f8860022          STRB     r0,[r6,#0x22]
;;;1067   		cntrl_stat=10;
00113a  84f4              STRH     r4,[r6,#0x26]
;;;1068   		cntrl_stat_new=10;
00113c  87b4              STRH     r4,[r6,#0x3c]
;;;1069   		cntrl_stat_old=10;
00113e  8534              STRH     r4,[r6,#0x28]
;;;1070   		volt_region_cnt=10;
001140  f8a64070          STRH     r4,[r6,#0x70]
                  |L1.4420|
;;;1071   		}
;;;1072   	if(volt_region==0) 		mess_send(MESS2RELE_HNDL,PARAM_RELE_SAMOKALIBR,0,20);
001144  f8960022          LDRB     r0,[r6,#0x22]  ; volt_region
001148  b110              CBZ      r0,|L1.4432|
;;;1073   	else if(volt_region==1) mess_send(MESS2RELE_HNDL,PARAM_RELE_SAMOKALIBR,1,20);
00114a  2801              CMP      r0,#1
00114c  d007              BEQ      |L1.4446|
                  |L1.4430|
00114e  e00c              B        |L1.4458|
                  |L1.4432|
001150  2314              MOVS     r3,#0x14              ;1072
001152  2200              MOVS     r2,#0                 ;1072
001154  2164              MOVS     r1,#0x64              ;1072
001156  20d2              MOVS     r0,#0xd2              ;1072
001158  f7fffffe          BL       mess_send
00115c  e005              B        |L1.4458|
                  |L1.4446|
00115e  2314              MOVS     r3,#0x14
001160  2201              MOVS     r2,#1
001162  2164              MOVS     r1,#0x64
001164  20d2              MOVS     r0,#0xd2
001166  f7fffffe          BL       mess_send
                  |L1.4458|
;;;1074   	}
;;;1075   
;;;1076   if(vz2_stat==vz2sERR1)		//ŒÚÒÛÚÒÚ‚ÛÂÚ ‚ÂÌÚËÎˇˆËˇ ÔË ‚ÍÎ˛˜ÂÌËË
00116a  f8960023          LDRB     r0,[r6,#0x23]  ; vz2_stat
00116e  280c              CMP      r0,#0xc
001170  d124              BNE      |L1.4540|
;;;1077   	{
;;;1078   	if((vz2_stat_old!=vz2_stat)||(vz2_stat_cnt==0))
001172  f8960024          LDRB     r0,[r6,#0x24]  ; vz2_stat_old
001176  280c              CMP      r0,#0xc
001178  d102              BNE      |L1.4480|
00117a  f8b60072          LDRH     r0,[r6,#0x72]  ; vz2_stat_cnt
00117e  b908              CBNZ     r0,|L1.4484|
                  |L1.4480|
;;;1079   		{
;;;1080   		vz2_stat_cnt=10;
001180  f8a64072          STRH     r4,[r6,#0x72]
                  |L1.4484|
;;;1081   		}
;;;1082   	vz2_stat_cnt--;
001184  f8b60072          LDRH     r0,[r6,#0x72]  ; vz2_stat_cnt
001188  f1a00001          SUB      r0,r0,#1
00118c  b200              SXTH     r0,r0
00118e  f8a60072          STRH     r0,[r6,#0x72]
;;;1083   	if((vz2_stat_cnt==10)||(vz2_stat_cnt==9))
001192  280a              CMP      r0,#0xa
001194  d001              BEQ      |L1.4506|
001196  2809              CMP      r0,#9
001198  d10a              BNE      |L1.4528|
                  |L1.4506|
;;;1084   		{
;;;1085   		show_mess(	" ‘Œ–ÃŒ¬Œ◊Õ€… «¿–ﬂƒ  ",
00119a  f2af434c          ADR      r3,|L1.3408|
00119e  f2af4238          ADR      r2,|L1.3432|
0011a2  f2af4124          ADR      r1,|L1.3456|
0011a6  a05d              ADR      r0,|L1.4892|
0011a8  f8cd8000          STR      r8,[sp,#0]
0011ac  f7fffffe          BL       show_mess
                  |L1.4528|
;;;1086   					"   Õ≈ ÃŒ∆≈“ ¡€“‹    ",
;;;1087   					"      ¬ Àﬁ◊≈Õ       ",
;;;1088   					"  ¡≈« ¬≈Õ“»Àﬂ÷»»!!  ",
;;;1089   					5000);
;;;1090   		}
;;;1091   	mess_send(MESS2RELE_HNDL,PARAM_RELE_SAMOKALIBR,0,20);
0011b0  2314              MOVS     r3,#0x14
0011b2  2200              MOVS     r2,#0
0011b4  2164              MOVS     r1,#0x64
0011b6  20d2              MOVS     r0,#0xd2
0011b8  f7fffffe          BL       mess_send
                  |L1.4540|
;;;1092   	}
;;;1093   if(vz2_stat==vz2sERR2)		//œÓÔ‡Î‡ ‚ÂÌÚËÎˇˆËˇ ÔË ‡·ÓÚÂ ‚ ÔÂ‚ÓÈ Ù‡ÁÂ ‘«
0011bc  f8960023          LDRB     r0,[r6,#0x23]  ; vz2_stat
0011c0  280d              CMP      r0,#0xd
0011c2  d12e              BNE      |L1.4642|
;;;1094   	{
;;;1095   	if((vz2_stat_old!=vz2_stat)||(vz2_stat_cnt==0))
0011c4  f8960024          LDRB     r0,[r6,#0x24]  ; vz2_stat_old
0011c8  280d              CMP      r0,#0xd
0011ca  d102              BNE      |L1.4562|
0011cc  f8b60072          LDRH     r0,[r6,#0x72]  ; vz2_stat_cnt
0011d0  b908              CBNZ     r0,|L1.4566|
                  |L1.4562|
;;;1096   		{
;;;1097   		vz2_stat_cnt=10;
0011d2  f8a64072          STRH     r4,[r6,#0x72]
                  |L1.4566|
;;;1098   		}
;;;1099   	vz2_stat_cnt--;
0011d6  f8b60072          LDRH     r0,[r6,#0x72]  ; vz2_stat_cnt
0011da  f1a00001          SUB      r0,r0,#1
0011de  b200              SXTH     r0,r0
0011e0  f8a60072          STRH     r0,[r6,#0x72]
;;;1100   	if((vz2_stat_cnt==10)||(vz2_stat_cnt==9))
0011e4  280a              CMP      r0,#0xa
0011e6  d001              BEQ      |L1.4588|
0011e8  2809              CMP      r0,#9
0011ea  d10a              BNE      |L1.4610|
                  |L1.4588|
;;;1101   		{
;;;1102   		show_mess(	" ‘Œ–ÃŒ¬Œ◊Õ€… «¿–ﬂƒ  ",
0011ec  f6af13a8          ADR      r3,|L1.2120|
0011f0  f6af1294          ADR      r2,|L1.2144|
0011f4  f6af1180          ADR      r1,|L1.2168|
0011f8  a048              ADR      r0,|L1.4892|
0011fa  f8cd8000          STR      r8,[sp,#0]
0011fe  f7fffffe          BL       show_mess
                  |L1.4610|
;;;1103   					"    «¿¡ÀŒ »–Œ¬¿Õ    ",
;;;1104   					"     Õ≈»—œ–¿¬Õ¿     ",
;;;1105   					"    ¬≈Õ“»Àﬂ÷»ﬂ!!!   ",
;;;1106   					5000);
;;;1107   		}
;;;1108   	if(sk_stat[0]==1)
001202  7828              LDRB     r0,[r5,#0]  ; sk_stat
001204  2801              CMP      r0,#1
001206  d106              BNE      |L1.4630|
;;;1109   		{
;;;1110   		vz2_stat=vz2sWRK1;
001208  f8864023          STRB     r4,[r6,#0x23]
;;;1111   		lc640_write(EE_VZ2_STAT,vz2sWRK1);
00120c  210a              MOVS     r1,#0xa
00120e  f44f70ca          MOV      r0,#0x194
001212  f7fffffe          BL       lc640_write
                  |L1.4630|
;;;1112   		}
;;;1113   	mess_send(MESS2RELE_HNDL,PARAM_RELE_SAMOKALIBR,0,20);
001216  2314              MOVS     r3,#0x14
001218  2200              MOVS     r2,#0
00121a  2164              MOVS     r1,#0x64
00121c  20d2              MOVS     r0,#0xd2
00121e  f7fffffe          BL       mess_send
                  |L1.4642|
;;;1114   	}
;;;1115   
;;;1116   if(vz2_stat==vz2sERR3)		//ŒÚÍÎ˛˜ÂÌ ÚÛÏ·ÎÂ "¬˚‡‚ÌË‚‡˛˘ËÈ Á‡ˇ‰" ÔË ‡·ÓÚÂ ‚ ÔÂ‚ÓÈ Ù‡ÁÂ ‘«
001222  f8960023          LDRB     r0,[r6,#0x23]  ; vz2_stat
001226  280e              CMP      r0,#0xe
001228  d12d              BNE      |L1.4742|
;;;1117   	{
;;;1118   	if((vz2_stat_old!=vz2_stat)||(vz2_stat_cnt==0))
00122a  f8960024          LDRB     r0,[r6,#0x24]  ; vz2_stat_old
00122e  280e              CMP      r0,#0xe
001230  d102              BNE      |L1.4664|
001232  f8b60072          LDRH     r0,[r6,#0x72]  ; vz2_stat_cnt
001236  b908              CBNZ     r0,|L1.4668|
                  |L1.4664|
;;;1119   		{
;;;1120   		vz2_stat_cnt=10;
001238  f8a64072          STRH     r4,[r6,#0x72]
                  |L1.4668|
;;;1121   		}
;;;1122   	vz2_stat_cnt--;
00123c  f8b60072          LDRH     r0,[r6,#0x72]  ; vz2_stat_cnt
001240  f1a00001          SUB      r0,r0,#1
001244  b200              SXTH     r0,r0
001246  f8a60072          STRH     r0,[r6,#0x72]
;;;1123   	if((vz2_stat_cnt==10)||(vz2_stat_cnt==9))
00124a  280a              CMP      r0,#0xa
00124c  d001              BEQ      |L1.4690|
00124e  2809              CMP      r0,#9
001250  d109              BNE      |L1.4710|
                  |L1.4690|
;;;1124   		{
;;;1125   		show_mess(	" ‘Œ–ÃŒ¬Œ◊Õ€… «¿–ﬂƒ  ",
001252  a338              ADR      r3,|L1.4916|
001254  f2af4290          ADR      r2,|L1.3528|
001258  f2af417c          ADR      r1,|L1.3552|
00125c  a02f              ADR      r0,|L1.4892|
00125e  f8cd8000          STR      r8,[sp,#0]
001262  f7fffffe          BL       show_mess
                  |L1.4710|
;;;1126   					"  ¡”ƒ≈“ œ–ŒƒŒÀ∆≈Õ   ",
;;;1127   					"  œŒ—À≈ ¬ Àﬁ◊≈Õ»ﬂ   ",
;;;1128   					"    “”Ã¡À≈–¿!!!     ",
;;;1129   					5000);
;;;1130   		}
;;;1131   	if(sk_stat[1]==1)
001266  7868              LDRB     r0,[r5,#1]  ; sk_stat
001268  2801              CMP      r0,#1
00126a  d106              BNE      |L1.4730|
;;;1132   		{
;;;1133   		vz2_stat=vz2sWRK1;
00126c  f8864023          STRB     r4,[r6,#0x23]
;;;1134   		lc640_write(EE_VZ2_STAT,vz2sWRK1);
001270  210a              MOVS     r1,#0xa
001272  f44f70ca          MOV      r0,#0x194
001276  f7fffffe          BL       lc640_write
                  |L1.4730|
;;;1135   		}
;;;1136   	mess_send(MESS2RELE_HNDL,PARAM_RELE_SAMOKALIBR,0,20);
00127a  2314              MOVS     r3,#0x14
00127c  2200              MOVS     r2,#0
00127e  2164              MOVS     r1,#0x64
001280  20d2              MOVS     r0,#0xd2
001282  f7fffffe          BL       mess_send
                  |L1.4742|
;;;1137   	}
;;;1138   if(vz2_stat==vz2sERR5)		//œÓÔ‡Î‡ ‚ÂÌÚËÎˇˆËˇ ÔË ‡·ÓÚÂ
001286  f8960023          LDRB     r0,[r6,#0x23]  ; vz2_stat
00128a  2810              CMP      r0,#0x10
00128c  d12e              BNE      |L1.4844|
;;;1139   	{
;;;1140   	if((vz2_stat_old!=vz2_stat)||(vz2_stat_cnt==0))
00128e  f8960024          LDRB     r0,[r6,#0x24]  ; vz2_stat_old
001292  2810              CMP      r0,#0x10
001294  d102              BNE      |L1.4764|
001296  f8b60072          LDRH     r0,[r6,#0x72]  ; vz2_stat_cnt
00129a  b908              CBNZ     r0,|L1.4768|
                  |L1.4764|
;;;1141   		{
;;;1142   		vz2_stat_cnt=10;
00129c  f8a64072          STRH     r4,[r6,#0x72]
                  |L1.4768|
;;;1143   		}
;;;1144   	vz2_stat_cnt--;
0012a0  f8b60072          LDRH     r0,[r6,#0x72]  ; vz2_stat_cnt
0012a4  f1a00001          SUB      r0,r0,#1
0012a8  b200              SXTH     r0,r0
0012aa  f8a60072          STRH     r0,[r6,#0x72]
;;;1145   	if((vz2_stat_cnt==10)||(vz2_stat_cnt==9))
0012ae  280a              CMP      r0,#0xa
0012b0  d001              BEQ      |L1.4790|
0012b2  2809              CMP      r0,#9
0012b4  d10a              BNE      |L1.4812|
                  |L1.4790|
;;;1146   		{
;;;1147   		show_mess(	" ‘Œ–ÃŒ¬Œ◊Õ€… «¿–ﬂƒ  ",
0012b6  f6af2370          ADR      r3,|L1.2120|
0012ba  f6af225c          ADR      r2,|L1.2144|
0012be  f6af2148          ADR      r1,|L1.2168|
0012c2  a016              ADR      r0,|L1.4892|
0012c4  f8cd8000          STR      r8,[sp,#0]
0012c8  f7fffffe          BL       show_mess
                  |L1.4812|
;;;1148   					"    «¿¡ÀŒ »–Œ¬¿Õ    ",
;;;1149   					"     Õ≈»—œ–¿¬Õ¿     ",
;;;1150   					"    ¬≈Õ“»Àﬂ÷»ﬂ!!!   ",
;;;1151   					5000);
;;;1152   		}
;;;1153   	if(sk_stat[0]==1)
0012cc  7828              LDRB     r0,[r5,#0]  ; sk_stat
0012ce  2801              CMP      r0,#1
0012d0  d106              BNE      |L1.4832|
;;;1154   		{
;;;1155   		vz2_stat=vz2sWRK2;
0012d2  f886a023          STRB     r10,[r6,#0x23]
;;;1156   		lc640_write(EE_VZ2_STAT,vz2sWRK2);
0012d6  210b              MOVS     r1,#0xb
0012d8  f44f70ca          MOV      r0,#0x194
0012dc  f7fffffe          BL       lc640_write
                  |L1.4832|
;;;1157   		}
;;;1158   	mess_send(MESS2RELE_HNDL,PARAM_RELE_SAMOKALIBR,0,20);
0012e0  2314              MOVS     r3,#0x14
0012e2  2200              MOVS     r2,#0
0012e4  2164              MOVS     r1,#0x64
0012e6  20d2              MOVS     r0,#0xd2
0012e8  f7fffffe          BL       mess_send
                  |L1.4844|
;;;1159   	}
;;;1160   
;;;1161   if(vz2_stat==vz2sERR6)		//ŒÚÍÎ˛˜ÂÌ ÚÛÏ·ÎÂ "¬˚‡‚ÌË‚‡˛˘ËÈ Á‡ˇ‰"
0012ec  f8960023          LDRB     r0,[r6,#0x23]  ; vz2_stat
0012f0  2811              CMP      r0,#0x11
0012f2  d157              BNE      |L1.5028|
;;;1162   	{
;;;1163   	if((vz2_stat_old!=vz2_stat)||(vz2_stat_cnt==0))
0012f4  f8960024          LDRB     r0,[r6,#0x24]  ; vz2_stat_old
0012f8  2811              CMP      r0,#0x11
0012fa  d12a              BNE      |L1.4946|
0012fc  e026              B        |L1.4940|
0012fe  0000              DCW      0x0000
                  |L1.4864|
                          DCD      ||area_number.23||+0x80
                  |L1.4868|
                          DCD      FZ_T1
                  |L1.4872|
                          DCD      out_U
                  |L1.4876|
                          DCD      FZ_U1
                  |L1.4880|
                          DCD      Ib_ips_termokompensat
                  |L1.4884|
                          DCD      FZ_ISW12
                  |L1.4888|
                          DCD      FZ_T2
                  |L1.4892|
00131c  20d4ced0          DCB      " ",212,206,208,204,206,194,206,215,205,219,201," ",199,192
001320  cccec2ce
001324  d7cddbc9
001328  20c7c0  
00132b  d0dfc420          DCB      208,223,196,"  ",0
00132f  2000    
001331  00                DCB      0
001332  00                DCB      0
001333  00                DCB      0
                  |L1.4916|
001334  20202020          DCB      "    ",210,211,204,193,203,197,208,192,"!!!     ",0
001338  d2d3ccc1
00133c  cbc5d0c0
001340  21212120
001344  20202020
001348  00      
001349  00                DCB      0
00134a  00                DCB      0
00134b  00                DCB      0
                  |L1.4940|
00134c  f8b60072          LDRH     r0,[r6,#0x72]  ; vz2_stat_cnt
001350  b908              CBNZ     r0,|L1.4950|
                  |L1.4946|
;;;1164   		{
;;;1165   		vz2_stat_cnt=10;
001352  f8a64072          STRH     r4,[r6,#0x72]
                  |L1.4950|
;;;1166   		}
;;;1167   	vz2_stat_cnt--;
001356  f8b60072          LDRH     r0,[r6,#0x72]  ; vz2_stat_cnt
00135a  f1a00001          SUB      r0,r0,#1
00135e  b200              SXTH     r0,r0
001360  f8a60072          STRH     r0,[r6,#0x72]
;;;1168   	if((vz2_stat_cnt==10)||(vz2_stat_cnt==9))
001364  280a              CMP      r0,#0xa
001366  d001              BEQ      |L1.4972|
001368  2809              CMP      r0,#9
00136a  d10b              BNE      |L1.4996|
                  |L1.4972|
;;;1169   		{
;;;1170   		show_mess(	" ‘Œ–ÃŒ¬Œ◊Õ€… «¿–ﬂƒ  ",
00136c  f2af033c          ADR      r3,|L1.4916|
001370  f2af52ac          ADR      r2,|L1.3528|
001374  f2af5198          ADR      r1,|L1.3552|
001378  f2af0060          ADR      r0,|L1.4892|
00137c  f8cd8000          STR      r8,[sp,#0]
001380  f7fffffe          BL       show_mess
                  |L1.4996|
;;;1171   					"  ¡”ƒ≈“ œ–ŒƒŒÀ∆≈Õ   ",
;;;1172   					"  œŒ—À≈ ¬ Àﬁ◊≈Õ»ﬂ   ",
;;;1173   					"    “”Ã¡À≈–¿!!!     ",
;;;1174   					5000);
;;;1175   		}
;;;1176   	if(sk_stat[1]==1)
001384  7868              LDRB     r0,[r5,#1]  ; sk_stat
001386  2801              CMP      r0,#1
001388  d106              BNE      |L1.5016|
;;;1177   		{
;;;1178   		vz2_stat=vz2sWRK2;
00138a  f886a023          STRB     r10,[r6,#0x23]
;;;1179   		lc640_write(EE_VZ2_STAT,vz2sWRK2);
00138e  210b              MOVS     r1,#0xb
001390  f44f70ca          MOV      r0,#0x194
001394  f7fffffe          BL       lc640_write
                  |L1.5016|
;;;1180   		}
;;;1181   	mess_send(MESS2RELE_HNDL,PARAM_RELE_SAMOKALIBR,0,20);
001398  2314              MOVS     r3,#0x14
00139a  2200              MOVS     r2,#0
00139c  2164              MOVS     r1,#0x64
00139e  20d2              MOVS     r0,#0xd2
0013a0  f7fffffe          BL       mess_send
                  |L1.5028|
;;;1182   	}
;;;1183   if(vz2_stat==vz2sERR4)		//¬« Á‡ÍÓÌ˜ËÎÒˇ ‡ ÚÛÏ·ÎÂ ‚ÍÎ˛˜ÂÌ
0013a4  f8960023          LDRB     r0,[r6,#0x23]  ; vz2_stat
0013a8  280f              CMP      r0,#0xf
0013aa  d130              BNE      |L1.5134|
;;;1184   	{
;;;1185   	if((vz2_stat_old!=vz2_stat)||(vz2_stat_cnt==0))
0013ac  f8960024          LDRB     r0,[r6,#0x24]  ; vz2_stat_old
0013b0  280f              CMP      r0,#0xf
0013b2  d102              BNE      |L1.5050|
0013b4  f8b60072          LDRH     r0,[r6,#0x72]  ; vz2_stat_cnt
0013b8  b908              CBNZ     r0,|L1.5054|
                  |L1.5050|
;;;1186   		{
;;;1187   		vz2_stat_cnt=10;
0013ba  f8a64072          STRH     r4,[r6,#0x72]
                  |L1.5054|
;;;1188   		}
;;;1189   	vz2_stat_cnt--;
0013be  f8b60072          LDRH     r0,[r6,#0x72]  ; vz2_stat_cnt
0013c2  f1a00001          SUB      r0,r0,#1
0013c6  b200              SXTH     r0,r0
0013c8  f8a60072          STRH     r0,[r6,#0x72]
;;;1190   	if((vz2_stat_cnt==10)||(vz2_stat_cnt==9))
0013cc  280a              CMP      r0,#0xa
0013ce  d001              BEQ      |L1.5076|
0013d0  2809              CMP      r0,#9
0013d2  d10b              BNE      |L1.5100|
                  |L1.5076|
;;;1191   		{
;;;1192   		show_mess(	"     ¬€ Àﬁ◊»“≈      ",
0013d4  f6af3328          ADR      r3,|L1.2224|
0013d8  f6af3214          ADR      r2,|L1.2248|
0013dc  f6af3100          ADR      r1,|L1.2272|
0013e0  f2af5074          ADR      r0,|L1.3696|
0013e4  f8cd8000          STR      r8,[sp,#0]
0013e8  f7fffffe          BL       show_mess
                  |L1.5100|
;;;1193   					"      “”Ã¡À≈–       ",
;;;1194   					"     ¬€—Œ Œ√Œ       ",
;;;1195   					"    Õ¿œ–ﬂ∆≈Õ»ﬂ      ",
;;;1196   					5000);
;;;1197   		}
;;;1198   	if(sk_stat[1]==0)
0013ec  7868              LDRB     r0,[r5,#1]  ; sk_stat
0013ee  b940              CBNZ     r0,|L1.5122|
;;;1199   		{
;;;1200   		vz2_stat=vz2sOFF;
0013f0  f8867023          STRB     r7,[r6,#0x23]
;;;1201   		lc640_write(EE_VZ2_STAT,vz2sOFF);
0013f4  2100              MOVS     r1,#0
0013f6  f44f70ca          MOV      r0,#0x194
0013fa  f7fffffe          BL       lc640_write
;;;1202   		vz_stop();
0013fe  f7fffffe          BL       vz_stop
                  |L1.5122|
;;;1203   
;;;1204   		}
;;;1205   	mess_send(MESS2RELE_HNDL,PARAM_RELE_SAMOKALIBR,0,20);
001402  2314              MOVS     r3,#0x14
001404  2200              MOVS     r2,#0
001406  2164              MOVS     r1,#0x64
001408  20d2              MOVS     r0,#0xd2
00140a  f7fffffe          BL       mess_send
                  |L1.5134|
;;;1206   	}
;;;1207   if(vz2_stat==vz2sFINE)		//‘« Á‡ÍÓÌ˜ËÎÒˇ, Ì‡ÔÓÏËÌ‡ÌËÂ
00140e  f8960023          LDRB     r0,[r6,#0x23]  ; vz2_stat
;;;1208   	{
;;;1209   	if((vz2_stat_old!=vz2_stat)||(vz2_stat_cnt==0))
;;;1210   		{
;;;1211   		vz2_stat_cnt=10;
;;;1212   		}
;;;1213   	vz2_stat_cnt--;
;;;1214   	if((vz2_stat_cnt==10)||(vz2_stat_cnt==9))
;;;1215   		{
;;;1216   		show_mess(	"    ‘Œ–ÃŒ¬Œ◊Õ€…     ",
001412  f64038b8          MOV      r8,#0xbb8
001416  2812              CMP      r0,#0x12              ;1207
001418  d13f              BNE      |L1.5274|
00141a  f8960024          LDRB     r0,[r6,#0x24]         ;1209  ; vz2_stat_old
00141e  2812              CMP      r0,#0x12              ;1209
001420  d102              BNE      |L1.5160|
001422  f8b60072          LDRH     r0,[r6,#0x72]         ;1209  ; vz2_stat_cnt
001426  b908              CBNZ     r0,|L1.5164|
                  |L1.5160|
001428  f8a64072          STRH     r4,[r6,#0x72]         ;1211
                  |L1.5164|
00142c  f8b60072          LDRH     r0,[r6,#0x72]         ;1213  ; vz2_stat_cnt
001430  f1a00001          SUB      r0,r0,#1              ;1213
001434  b200              SXTH     r0,r0                 ;1213
001436  f8a60072          STRH     r0,[r6,#0x72]         ;1213
00143a  280a              CMP      r0,#0xa               ;1214
00143c  d001              BEQ      |L1.5186|
00143e  2809              CMP      r0,#9                 ;1214
001440  d10a              BNE      |L1.5208|
                  |L1.5186|
001442  f2af6334          ADR      r3,|L1.3600|
001446  f2af6220          ADR      r2,|L1.3624|
00144a  f2af610c          ADR      r1,|L1.3648|
00144e  a0ff              ADR      r0,|L1.6220|
001450  f8cd8000          STR      r8,[sp,#0]
001454  f7fffffe          BL       show_mess
                  |L1.5208|
;;;1217   					"       «¿–ﬂƒ        ",
;;;1218   					"      ”—œ≈ÿÕŒ       ",
;;;1219   					"     «¿¬≈–ÿ≈Õ       ",
;;;1220   					3000);
;;;1221   		}
;;;1222   	if((vz2_stat_cnt==6)||(vz2_stat_cnt==5))
001458  f9b60072          LDRSH    r0,[r6,#0x72]  ; vz2_stat_cnt
00145c  2806              CMP      r0,#6
00145e  d001              BEQ      |L1.5220|
001460  2805              CMP      r0,#5
001462  d10b              BNE      |L1.5244|
                  |L1.5220|
;;;1223   		{
;;;1224   		show_mess(	"     ¬€ Àﬁ◊»“≈      ",
001464  f6af33b8          ADR      r3,|L1.2224|
001468  f6af32a4          ADR      r2,|L1.2248|
00146c  f6af3190          ADR      r1,|L1.2272|
001470  f2af6004          ADR      r0,|L1.3696|
001474  f8cd8000          STR      r8,[sp,#0]
001478  f7fffffe          BL       show_mess
                  |L1.5244|
;;;1225   					"      “”Ã¡À≈–       ",
;;;1226   					"     ¬€—Œ Œ√Œ       ",
;;;1227   					"    Õ¿œ–ﬂ∆≈Õ»ﬂ      ",
;;;1228   					3000);
;;;1229   		}
;;;1230   	if(sk_stat[1]==0)
00147c  7868              LDRB     r0,[r5,#1]  ; sk_stat
00147e  b930              CBNZ     r0,|L1.5262|
;;;1231   		{
;;;1232   		vz2_stat=vz2sOFF;
001480  f8867023          STRB     r7,[r6,#0x23]
;;;1233   		lc640_write(EE_VZ2_STAT,vz2sOFF);
001484  2100              MOVS     r1,#0
001486  f44f70ca          MOV      r0,#0x194
00148a  f7fffffe          BL       lc640_write
                  |L1.5262|
;;;1234   		}
;;;1235   	mess_send(MESS2RELE_HNDL,PARAM_RELE_SAMOKALIBR,0,20);
00148e  2314              MOVS     r3,#0x14
001490  2200              MOVS     r2,#0
001492  2164              MOVS     r1,#0x64
001494  20d2              MOVS     r0,#0xd2
001496  f7fffffe          BL       mess_send
                  |L1.5274|
;;;1236   	}
;;;1237   if(vz2_stat==vz2sSTOP)		//‘« ÔÂÍ‡˘ÂÌ, Ì‡ÔÓÏËÌ‡ÌËÂ
00149a  f8960023          LDRB     r0,[r6,#0x23]  ; vz2_stat
00149e  2813              CMP      r0,#0x13
0014a0  d13f              BNE      |L1.5410|
;;;1238   	{
;;;1239   	if((vz2_stat_old!=vz2_stat)||(vz2_stat_cnt==0))
0014a2  f8960024          LDRB     r0,[r6,#0x24]  ; vz2_stat_old
0014a6  2813              CMP      r0,#0x13
0014a8  d102              BNE      |L1.5296|
0014aa  f8b60072          LDRH     r0,[r6,#0x72]  ; vz2_stat_cnt
0014ae  b908              CBNZ     r0,|L1.5300|
                  |L1.5296|
;;;1240   		{
;;;1241   		vz2_stat_cnt=10;
0014b0  f8a64072          STRH     r4,[r6,#0x72]
                  |L1.5300|
;;;1242   		}
;;;1243   	vz2_stat_cnt--;
0014b4  f8b60072          LDRH     r0,[r6,#0x72]  ; vz2_stat_cnt
0014b8  f1a00001          SUB      r0,r0,#1
0014bc  b200              SXTH     r0,r0
0014be  f8a60072          STRH     r0,[r6,#0x72]
;;;1244   	if((vz2_stat_cnt==10)||(vz2_stat_cnt==9))
0014c2  280a              CMP      r0,#0xa
0014c4  d001              BEQ      |L1.5322|
0014c6  2809              CMP      r0,#9
0014c8  d10a              BNE      |L1.5344|
                  |L1.5322|
;;;1245   		{
;;;1246   		show_mess(	"    ‘Œ–ÃŒ¬Œ◊Õ€…     ",
0014ca  f2af6344          ADR      r3,|L1.3720|
0014ce  f2af6230          ADR      r2,|L1.3744|
0014d2  f2af6194          ADR      r1,|L1.3648|
0014d6  a0dd              ADR      r0,|L1.6220|
0014d8  f8cd8000          STR      r8,[sp,#0]
0014dc  f7fffffe          BL       show_mess
                  |L1.5344|
;;;1247   					"       «¿–ﬂƒ        ",
;;;1248   					"     œ–≈ –¿Ÿ≈Õ      ",
;;;1249   					"                    ",
;;;1250   					3000);
;;;1251   		}
;;;1252   	if((vz2_stat_cnt==6)||(vz2_stat_cnt==5))
0014e0  f9b60072          LDRSH    r0,[r6,#0x72]  ; vz2_stat_cnt
0014e4  2806              CMP      r0,#6
0014e6  d001              BEQ      |L1.5356|
0014e8  2805              CMP      r0,#5
0014ea  d10b              BNE      |L1.5380|
                  |L1.5356|
;;;1253   		{
;;;1254   		show_mess(	"     ¬€ Àﬁ◊»“≈      ",
0014ec  f6af4340          ADR      r3,|L1.2224|
0014f0  f6af422c          ADR      r2,|L1.2248|
0014f4  f6af4118          ADR      r1,|L1.2272|
0014f8  f2af608c          ADR      r0,|L1.3696|
0014fc  f8cd8000          STR      r8,[sp,#0]
001500  f7fffffe          BL       show_mess
                  |L1.5380|
;;;1255   					"      “”Ã¡À≈–       ",
;;;1256   					"     ¬€—Œ Œ√Œ       ",
;;;1257   					"    Õ¿œ–ﬂ∆≈Õ»ﬂ      ",
;;;1258   					3000);
;;;1259   		}
;;;1260   	if(sk_stat[1]==0)
001504  7868              LDRB     r0,[r5,#1]  ; sk_stat
001506  b930              CBNZ     r0,|L1.5398|
;;;1261   		{
;;;1262   		vz2_stat=vz2sOFF;
001508  f8867023          STRB     r7,[r6,#0x23]
;;;1263   		lc640_write(EE_VZ2_STAT,vz2sOFF);
00150c  2100              MOVS     r1,#0
00150e  f44f70ca          MOV      r0,#0x194
001512  f7fffffe          BL       lc640_write
                  |L1.5398|
;;;1264   		}
;;;1265   	mess_send(MESS2RELE_HNDL,PARAM_RELE_SAMOKALIBR,0,20);
001516  2314              MOVS     r3,#0x14
001518  2200              MOVS     r2,#0
00151a  2164              MOVS     r1,#0x64
00151c  20d2              MOVS     r0,#0xd2
00151e  f7fffffe          BL       mess_send
                  |L1.5410|
;;;1266   	}
;;;1267   vz2_stat_old=vz2_stat;
001522  f8160f23          LDRB     r0,[r6,#0x23]!  ; vz2_stat
001526  7070              STRB     r0,[r6,#1]
;;;1268   
;;;1269   }
001528  e8bd8ff8          POP      {r3-r11,pc}
;;;1270   
                          ENDP

                  vz2_start PROC
;;;1272   //ÒÚ‡Ú Û‡‚ÌËÚÂÎ¸ÌÓ„ Á‡ˇ‰‡
;;;1273   char vz2_start(char hour)
00152c  b510              PUSH     {r4,lr}
;;;1274   {          
;;;1275   char out;
;;;1276   out=0;
00152e  f04f0000          MOV      r0,#0
;;;1277   if((spc_stat==spcOFF)&&(speedChrgBlckStat!=1)&&(vz1_stat==vz1sOFF))
001532  49cc              LDR      r1,|L1.6244|
001534  7d0a              LDRB     r2,[r1,#0x14]  ; spc_stat
001536  2a00              CMP      r2,#0
001538  d112              BNE      |L1.5472|
00153a  4acb              LDR      r2,|L1.6248|
00153c  8812              LDRH     r2,[r2,#0]  ; speedChrgBlckStat
00153e  2a01              CMP      r2,#1
001540  d00e              BEQ      |L1.5472|
001542  f8912020          LDRB     r2,[r1,#0x20]  ; vz1_stat
001546  2a00              CMP      r2,#0
001548  d10a              BNE      |L1.5472|
;;;1278   	{
;;;1279   	if(vz1_stat==vz1sOFF)
;;;1280   		{
;;;1281   		vz2_stat=vz2sSTEP1;
00154a  f04f0001          MOV      r0,#1
00154e  f8810023          STRB     r0,[r1,#0x23]
;;;1282   		lc640_write(EE_VZ2_STAT,vz2sSTEP1);
001552  4601              MOV      r1,r0
001554  f44f70ca          MOV      r0,#0x194
001558  f7fffffe          BL       lc640_write
;;;1283   		out=1;
00155c  f04f0001          MOV      r0,#1
                  |L1.5472|
;;;1284   		
;;;1285   		}
;;;1286   /*	spc_stat=spcVZ;
;;;1287   	__ee_spc_stat=spcVZ; 
;;;1288   	lc640_write_int(EE_SPC_STAT,__ee_spc_stat);   
;;;1289   	vz_cnt_h=hour;
;;;1290   	__ee_vz_cnt=hour*60;
;;;1291   	if(hour==0)__ee_vz_cnt=30;
;;;1292   	lc640_write_int(EE_VZ_CNT,__ee_vz_cnt);
;;;1293   	lc640_write_int(EE_SPC_VZ_LENGT,__ee_vz_cnt);	
;;;1294   	vz_cnt_h_=0;
;;;1295   	vz_cnt_s=0;
;;;1296   	vz_cnt_s_=0;
;;;1297   	
;;;1298   		*/
;;;1299   	}
;;;1300   //else if((spc_stat==spc_KE1p1)||(spc_stat==spc_KE1p2)) out=22; 
;;;1301   //else if((spc_stat==spc_KE2p1)||(spc_stat==spc_KE2p2)) out=33;
;;;1302   //plazma=out;	
;;;1303   return out;
;;;1304   }
001560  bd10              POP      {r4,pc}
;;;1305   //-----------------------------------------------
                          ENDP

                  vz2_stop PROC
;;;1306   //ÒÚÓÔ ÙÓÏÓ‚Ó˜ÌÓ„Ó Á‡ˇ‰‡
;;;1307   void vz2_stop(void)
001562  48c0              LDR      r0,|L1.6244|
;;;1308   {
;;;1309   if(vz2_stat!=vz2sOFF)
001564  f8901023          LDRB     r1,[r0,#0x23]  ; vz2_stat
001568  2900              CMP      r1,#0
00156a  d007              BEQ      |L1.5500|
;;;1310   	{
;;;1311   	vz2_stat=vz2sSTOP;
00156c  f04f0113          MOV      r1,#0x13
001570  f8801023          STRB     r1,[r0,#0x23]
;;;1312   	lc640_write(EE_VZ2_STAT,vz2sSTOP);
001574  f44f70ca          MOV      r0,#0x194
001578  f7ffbffe          B.W      lc640_write
                  |L1.5500|
;;;1313   	}
;;;1314   }
00157c  4770              BX       lr
;;;1315   
                          ENDP

                  kb_init PROC
;;;1316   //-----------------------------------------------
;;;1317   void kb_init(void)
00157e  48bb              LDR      r0,|L1.6252|
;;;1318   {
;;;1319   main_kb_cnt=(TBAT*60)-60/*120*/;
001580  f06f013b          MVN      r1,#0x3b
001584  8800              LDRH     r0,[r0,#0]  ; TBAT
001586  ebc01000          RSB      r0,r0,r0,LSL #4
00158a  eb010080          ADD      r0,r1,r0,LSL #2
00158e  49b5              LDR      r1,|L1.6244|
001590  f8a10046          STRH     r0,[r1,#0x46]
;;;1320   }
001594  4770              BX       lr
;;;1321   
                          ENDP

                  kb_hndl PROC
;;;1322   //-----------------------------------------------
;;;1323   void kb_hndl(void)
001596  e92d5ff0          PUSH     {r4-r12,lr}
;;;1324   {
;;;1325   
;;;1326   static signed short ibat[2],ibat_[2];
;;;1327   #ifdef UKU_TELECORE2015
;;;1328   if(((++main_kb_cnt>=TBAT*60)&&(TBAT))&&(BAT_TYPE==0))
;;;1329   #else 
;;;1330   if(((++main_kb_cnt>=TBAT*60)&&(TBAT)))
00159a  f8df82c8          LDR      r8,|L1.6244|
;;;1331   #endif
;;;1332   	{
;;;1333   	main_kb_cnt=0;
;;;1334   	
;;;1335   	kb_start[0]=0;
;;;1336   	kb_start[1]=0;
;;;1337   	kb_start_ips=0;
;;;1338   
;;;1339   	if( (BAT_IS_ON[0]==bisON) && (bat[0]._Ub>80) && ( (abs(bat[0]._Ib)<IKB) || (bat[0]._av&1) ) ) kb_start[0]=1;
;;;1340   	if( (BAT_IS_ON[1]==bisON) && (bat[1]._Ub>80) && ( (abs(bat[1]._Ib)<IKB) || (bat[1]._av&1) ) ) kb_start[1]=1;
;;;1341   #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;1342   	if( (!ips_bat_av_vzvod)                      && ((abs(Ib_ips_termokompensat)<IKB) || (bat_ips._av&1) ) ) kb_start_ips=1;
00159e  f8dfa2d0          LDR      r10,|L1.6256|
0015a2  2500              MOVS     r5,#0                 ;1330
0015a4  f8b80046          LDRH     r0,[r8,#0x46]         ;1330  ; main_kb_cnt
0015a8  4eb2              LDR      r6,|L1.6260|
0015aa  1c40              ADDS     r0,r0,#1              ;1330
0015ac  b201              SXTH     r1,r0                 ;1330
0015ae  48af              LDR      r0,|L1.6252|
0015b0  f8a81046          STRH     r1,[r8,#0x46]         ;1330
0015b4  f8df92c0          LDR      r9,|L1.6264|
0015b8  f9b00000          LDRSH    r0,[r0,#0]            ;1330  ; TBAT
;;;1343   #endif	
;;;1344   	if( (net_av) || (num_of_wrks_bps==0) || ( (spc_stat!=spcOFF) && (spc_stat!=spcVZ) ) 
;;;1345   	  ||(vz1_stat!=vz1sOFF)||(vz2_stat!=vz2sOFF)||(sp_ch_stat!=scsOFF) 	)
;;;1346    
;;;1347   		{
;;;1348   		kb_start[0]=0;
;;;1349   		kb_start[1]=0;
;;;1350   		kb_start_ips=0;
;;;1351   		}
;;;1352   
;;;1353   	if((kb_start[0]==1)||(kb_start[1]==1)||(kb_start_ips==1))
;;;1354   		{
;;;1355   		kb_cnt_1lev=10;
0015bc  270a              MOVS     r7,#0xa
0015be  ebc01200          RSB      r2,r0,r0,LSL #4       ;1330
0015c2  f04f0b01          MOV      r11,#1                ;1339
0015c6  f108044c          ADD      r4,r8,#0x4c           ;1335
0015ca  ebb10f82          CMP      r1,r2,LSL #2          ;1330
0015ce  db69              BLT      |L1.5796|
0015d0  2800              CMP      r0,#0                 ;1330
0015d2  d067              BEQ      |L1.5796|
0015d4  f8a85046          STRH     r5,[r8,#0x46]         ;1333
0015d8  7025              STRB     r5,[r4,#0]            ;1335
0015da  7065              STRB     r5,[r4,#1]            ;1336
0015dc  f888500e          STRB     r5,[r8,#0xe]          ;1337
0015e0  48a6              LDR      r0,|L1.6268|
0015e2  7800              LDRB     r0,[r0,#0]            ;1339  ; BAT_IS_ON
0015e4  2855              CMP      r0,#0x55              ;1339
0015e6  d111              BNE      |L1.5644|
0015e8  f9b60002          LDRSH    r0,[r6,#2]            ;1339  ; bat
0015ec  2850              CMP      r0,#0x50              ;1339
0015ee  dd0d              BLE      |L1.5644|
0015f0  f9b60008          LDRSH    r0,[r6,#8]            ;1339  ; bat
0015f4  f7fffffe          BL       abs
0015f8  f9b91000          LDRSH    r1,[r9,#0]            ;1339  ; IKB
0015fc  4288              CMP      r0,r1                 ;1339
0015fe  db03              BLT      |L1.5640|
001600  f896003d          LDRB     r0,[r6,#0x3d]         ;1339  ; bat
001604  07c0              LSLS     r0,r0,#31             ;1339
001606  d001              BEQ      |L1.5644|
                  |L1.5640|
001608  f884b000          STRB     r11,[r4,#0]           ;1339
                  |L1.5644|
00160c  489b              LDR      r0,|L1.6268|
00160e  7840              LDRB     r0,[r0,#1]            ;1340  ; BAT_IS_ON
001610  2855              CMP      r0,#0x55              ;1340
001612  d111              BNE      |L1.5688|
001614  f9b6004e          LDRSH    r0,[r6,#0x4e]         ;1340  ; bat
001618  2850              CMP      r0,#0x50              ;1340
00161a  dd0d              BLE      |L1.5688|
00161c  f9b60054          LDRSH    r0,[r6,#0x54]         ;1340  ; bat
001620  f7fffffe          BL       abs
001624  f9b91000          LDRSH    r1,[r9,#0]            ;1340  ; IKB
001628  4288              CMP      r0,r1                 ;1340
00162a  db03              BLT      |L1.5684|
00162c  f8960089          LDRB     r0,[r6,#0x89]         ;1340  ; bat
001630  07c0              LSLS     r0,r0,#31             ;1340
001632  d001              BEQ      |L1.5688|
                  |L1.5684|
001634  f884b001          STRB     r11,[r4,#1]           ;1340
                  |L1.5688|
001638  4891              LDR      r0,|L1.6272|
00163a  7800              LDRB     r0,[r0,#0]            ;1342  ; ips_bat_av_vzvod
00163c  b970              CBNZ     r0,|L1.5724|
00163e  f9ba0000          LDRSH    r0,[r10,#0]           ;1342  ; Ib_ips_termokompensat
001642  f7fffffe          BL       abs
001646  f9b91000          LDRSH    r1,[r9,#0]            ;1342  ; IKB
00164a  4288              CMP      r0,r1                 ;1342
00164c  db04              BLT      |L1.5720|
00164e  488d              LDR      r0,|L1.6276|
001650  f890003d          LDRB     r0,[r0,#0x3d]         ;1342  ; bat_ips
001654  07c0              LSLS     r0,r0,#31             ;1342
001656  d001              BEQ      |L1.5724|
                  |L1.5720|
001658  f888b00e          STRB     r11,[r8,#0xe]         ;1342
                  |L1.5724|
00165c  488a              LDR      r0,|L1.6280|
00165e  7800              LDRB     r0,[r0,#0]            ;1344  ; net_av
001660  b980              CBNZ     r0,|L1.5764|
001662  f898000f          LDRB     r0,[r8,#0xf]          ;1344  ; num_of_wrks_bps
001666  b168              CBZ      r0,|L1.5764|
001668  f8980014          LDRB     r0,[r8,#0x14]         ;1344  ; spc_stat
00166c  b108              CBZ      r0,|L1.5746|
00166e  2802              CMP      r0,#2                 ;1344
001670  d108              BNE      |L1.5764|
                  |L1.5746|
001672  f8980020          LDRB     r0,[r8,#0x20]         ;1345  ; vz1_stat
001676  b928              CBNZ     r0,|L1.5764|
001678  f8980023          LDRB     r0,[r8,#0x23]         ;1345  ; vz2_stat
00167c  b910              CBNZ     r0,|L1.5764|
00167e  4883              LDR      r0,|L1.6284|
001680  7800              LDRB     r0,[r0,#0]            ;1345  ; sp_ch_stat
001682  b118              CBZ      r0,|L1.5772|
                  |L1.5764|
001684  7025              STRB     r5,[r4,#0]            ;1348
001686  7065              STRB     r5,[r4,#1]            ;1349
001688  f888500e          STRB     r5,[r8,#0xe]          ;1350
                  |L1.5772|
00168c  7820              LDRB     r0,[r4,#0]            ;1353  ; kb_start
00168e  2801              CMP      r0,#1                 ;1353
001690  d020              BEQ      |L1.5844|
001692  7860              LDRB     r0,[r4,#1]            ;1353  ; kb_start
001694  2801              CMP      r0,#1                 ;1353
001696  d01d              BEQ      |L1.5844|
001698  f898000e          LDRB     r0,[r8,#0xe]          ;1353  ; kb_start_ips
00169c  2801              CMP      r0,#1                 ;1353
00169e  d019              BEQ      |L1.5844|
;;;1356   		}
;;;1357   	else kb_cnt_1lev=0;
0016a0  f8a85048          STRH     r5,[r8,#0x48]
                  |L1.5796|
;;;1358   	}
;;;1359   
;;;1360   if(kb_cnt_1lev)
0016a4  4641              MOV      r1,r8
0016a6  f9b80048          LDRSH    r0,[r8,#0x48]  ; kb_cnt_1lev
;;;1361   	{
;;;1362   	kb_cnt_1lev--;
;;;1363   
;;;1364   	if(kb_cnt_1lev>5)mess_send(MESS2CNTRL_HNDL,PARAM_CNTRL_STAT_PLUS,30,15);
;;;1365   	else if(kb_cnt_1lev>0) mess_send(MESS2CNTRL_HNDL,PARAM_CNTRL_STAT_MINUS,30,15);
;;;1366   
;;;1367   
;;;1368   	if(kb_cnt_1lev==5)
;;;1369   		{
;;;1370   		ibat[0]=abs(bat[0]._Ib);
0016aa  f8df81b8          LDR      r8,|L1.6244|
0016ae  2800              CMP      r0,#0                 ;1360
0016b0  f1080878          ADD      r8,r8,#0x78
0016b4  d07e              BEQ      |L1.6068|
0016b6  f1a00001          SUB      r0,r0,#1              ;1362
0016ba  b200              SXTH     r0,r0                 ;1362
0016bc  468b              MOV      r11,r1                ;1362
0016be  f8a10048          STRH     r0,[r1,#0x48]         ;1362
0016c2  2805              CMP      r0,#5                 ;1364
0016c4  dd09              BLE      |L1.5850|
0016c6  230f              MOVS     r3,#0xf               ;1364
0016c8  221e              MOVS     r2,#0x1e              ;1364
0016ca  2164              MOVS     r1,#0x64              ;1364
0016cc  20e1              MOVS     r0,#0xe1              ;1364
0016ce  f7fffffe          BL       mess_send
0016d2  e00a              B        |L1.5866|
                  |L1.5844|
0016d4  f8a87048          STRH     r7,[r8,#0x48]         ;1355
0016d8  e7e4              B        |L1.5796|
                  |L1.5850|
0016da  2800              CMP      r0,#0                 ;1365
0016dc  dd05              BLE      |L1.5866|
0016de  230f              MOVS     r3,#0xf               ;1365
0016e0  221e              MOVS     r2,#0x1e              ;1365
0016e2  2169              MOVS     r1,#0x69              ;1365
0016e4  20e1              MOVS     r0,#0xe1              ;1365
0016e6  f7fffffe          BL       mess_send
                  |L1.5866|
0016ea  f8bb0048          LDRH     r0,[r11,#0x48]        ;1368  ; kb_cnt_1lev
0016ee  2805              CMP      r0,#5                 ;1368
0016f0  d111              BNE      |L1.5910|
0016f2  f9b60008          LDRSH    r0,[r6,#8]  ; bat
0016f6  f7fffffe          BL       abs
0016fa  f8a80000          STRH     r0,[r8,#0]
;;;1371   		ibat[1]=abs(bat[1]._Ib);
0016fe  f9b60054          LDRSH    r0,[r6,#0x54]  ; bat
001702  f7fffffe          BL       abs
001706  f8a80002          STRH     r0,[r8,#2]
;;;1372   		ibat_ips=abs(Ib_ips_termokompensat);
00170a  f9ba0000          LDRSH    r0,[r10,#0]  ; Ib_ips_termokompensat
00170e  f7fffffe          BL       abs
001712  f8ab004e          STRH     r0,[r11,#0x4e]
                  |L1.5910|
;;;1373   		}
;;;1374   	
;;;1375   	if(kb_cnt_1lev==0)
001716  4853              LDR      r0,|L1.6244|
001718  f8b00048          LDRH     r0,[r0,#0x48]  ; kb_cnt_1lev
00171c  2800              CMP      r0,#0
00171e  d158              BNE      |L1.6098|
;;;1376   		{
;;;1377   		ibat_[0]=abs(bat[0]._Ib);
001720  f9b60008          LDRSH    r0,[r6,#8]  ; bat
001724  f7fffffe          BL       abs
001728  f8dfb138          LDR      r11,|L1.6244|
00172c  f10b0b7c          ADD      r11,r11,#0x7c
001730  f8ab0000          STRH     r0,[r11,#0]
;;;1378   		ibat_[1]=abs(bat[1]._Ib);
001734  f9b60054          LDRSH    r0,[r6,#0x54]  ; bat
001738  f7fffffe          BL       abs
00173c  f8ab0002          STRH     r0,[r11,#2]
;;;1379   		ibat_ips_=abs(Ib_ips_termokompensat);
001740  f9ba0000          LDRSH    r0,[r10,#0]  ; Ib_ips_termokompensat
001744  f7fffffe          BL       abs
001748  f8dfa118          LDR      r10,|L1.6244|
00174c  f8aa0050          STRH     r0,[r10,#0x50]
;;;1380   
;;;1381   		kb_cnt_2lev=0;
001750  f8aa504a          STRH     r5,[r10,#0x4a]
;;;1382   
;;;1383   
;;;1384   		if(( (ibat[0]+ibat_[0]) < IKB )&& (kb_start[0]==1))
001754  f9b80000          LDRSH    r0,[r8,#0]  ; ibat
001758  f9bb1000          LDRSH    r1,[r11,#0]  ; ibat_
00175c  4408              ADD      r0,r0,r1
00175e  f9b91000          LDRSH    r1,[r9,#0]  ; IKB
001762  4288              CMP      r0,r1
001764  da02              BGE      |L1.5996|
001766  7820              LDRB     r0,[r4,#0]  ; kb_start
001768  2801              CMP      r0,#1
00176a  d034              BEQ      |L1.6102|
                  |L1.5996|
;;;1385   			{
;;;1386   			kb_cnt_2lev=10;  
;;;1387   			}
;;;1388   		else if(bat[0]._Ub>200)
00176c  f9b60002          LDRSH    r0,[r6,#2]  ; bat
001770  28c8              CMP      r0,#0xc8
001772  dd04              BLE      |L1.6014|
;;;1389   			{
;;;1390   			kb_start[0]=0;
001774  7025              STRB     r5,[r4,#0]
;;;1391   			avar_bat_hndl(0,0);
001776  2100              MOVS     r1,#0
001778  4608              MOV      r0,r1
00177a  f7fffffe          BL       avar_bat_hndl
                  |L1.6014|
;;;1392   			}
;;;1393   		
;;;1394   		if(( (ibat[1]+ibat_[1]) < IKB ) && (kb_start[1]==1))
00177e  f9b80002          LDRSH    r0,[r8,#2]  ; ibat
001782  f9bb1002          LDRSH    r1,[r11,#2]  ; ibat_
001786  4408              ADD      r0,r0,r1
001788  f9b91000          LDRSH    r1,[r9,#0]  ; IKB
00178c  4288              CMP      r0,r1
00178e  da02              BGE      |L1.6038|
001790  7860              LDRB     r0,[r4,#1]  ; kb_start
001792  2801              CMP      r0,#1
001794  d022              BEQ      |L1.6108|
                  |L1.6038|
;;;1395   			{
;;;1396   			kb_cnt_2lev=10;     
;;;1397   			}
;;;1398   		else  if(bat[1]._Ub>200)
001796  f9b6004e          LDRSH    r0,[r6,#0x4e]  ; bat
00179a  28c8              CMP      r0,#0xc8
00179c  dd04              BLE      |L1.6056|
;;;1399   			{
;;;1400   			kb_start[1]=0;
00179e  7065              STRB     r5,[r4,#1]
;;;1401   			avar_bat_hndl(1,0);
0017a0  2100              MOVS     r1,#0
0017a2  2001              MOVS     r0,#1
0017a4  f7fffffe          BL       avar_bat_hndl
                  |L1.6056|
;;;1402   			}
;;;1403   #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;1404   		if(( (ibat_ips+ibat_ips_) < IKB ) && (kb_start_ips==1))
0017a8  f9ba004e          LDRSH    r0,[r10,#0x4e]  ; ibat_ips
0017ac  f9ba1050          LDRSH    r1,[r10,#0x50]  ; ibat_ips_
0017b0  4408              ADD      r0,r0,r1
0017b2  e000              B        |L1.6070|
                  |L1.6068|
0017b4  e01b              B        |L1.6126|
                  |L1.6070|
0017b6  f9b91000          LDRSH    r1,[r9,#0]  ; IKB
0017ba  4288              CMP      r0,r1
0017bc  da09              BGE      |L1.6098|
0017be  f89a000e          LDRB     r0,[r10,#0xe]  ; kb_start_ips
0017c2  2801              CMP      r0,#1
0017c4  d105              BNE      |L1.6098|
;;;1405   			{
;;;1406   			if(KB_ALGORITM==1)
0017c6  4832              LDR      r0,|L1.6288|
0017c8  8800              LDRH     r0,[r0,#0]  ; KB_ALGORITM
0017ca  2801              CMP      r0,#1
0017cc  d009              BEQ      |L1.6114|
;;;1407   				{
;;;1408   				avar_bat_ips_hndl(1);
;;;1409   				kb_start_ips=0;
;;;1410   				}
;;;1411   			else
;;;1412   				{
;;;1413   				kb_cnt_2lev=10;     
0017ce  f8aa704a          STRH     r7,[r10,#0x4a]
                  |L1.6098|
;;;1414   				}
;;;1415   			}
;;;1416   #endif
;;;1417   		}	
;;;1418   
;;;1419   
;;;1420   	}
;;;1421   else if(kb_cnt_2lev)
;;;1422   	{
;;;1423   	kb_cnt_2lev--;
;;;1424   
;;;1425   	if(kb_cnt_2lev>5)mess_send(MESS2CNTRL_HNDL,PARAM_CNTRL_STAT_PLUS,200,15);
;;;1426   	else if(kb_cnt_2lev>0) mess_send(MESS2CNTRL_HNDL,PARAM_CNTRL_STAT_MINUS,200,15);
;;;1427   
;;;1428   
;;;1429   	if(kb_cnt_2lev==5)
;;;1430   		{
;;;1431   		ibat[0]=abs(bat[0]._Ib);
;;;1432   		ibat[1]=abs(bat[1]._Ib);
;;;1433   		ibat_ips=abs(Ib_ips_termokompensat);
;;;1434   		}
;;;1435   	
;;;1436   	if(kb_cnt_2lev==0)
;;;1437   		{
;;;1438   		ibat_[0]=abs(bat[0]._Ib);
;;;1439   		ibat_[1]=abs(bat[1]._Ib);
;;;1440   		ibat_ips_=abs(Ib_ips_termokompensat);
;;;1441   
;;;1442   		kb_full_ver=0;
;;;1443   
;;;1444   		if(( (ibat[0]+ibat_[0]) < IKB ) && (kb_start[0]==1))
;;;1445   			{
;;;1446   			kb_full_ver=1;  
;;;1447   			}
;;;1448   		else if(bat[0]._Ub>200)			
;;;1449   			{
;;;1450   			kb_start[0]=0;
;;;1451   			avar_bat_hndl(0,0);
;;;1452   			}
;;;1453   
;;;1454   		if(( (ibat[1]+ibat_[1]) < IKB ) && (kb_start[1]==1))
;;;1455   			{
;;;1456   			kb_full_ver=1;     
;;;1457   			}
;;;1458   		else	if(bat[1]._Ub>200)		
;;;1459   			{
;;;1460   			kb_start[1]=0;
;;;1461   			avar_bat_hndl(1,0);
;;;1462   			}
;;;1463   #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;1464   		if(( (ibat_ips+ibat_ips_) < IKB )  && (kb_start_ips==1))
;;;1465   			{
;;;1466   			if(KB_ALGORITM==2)
;;;1467   				{
;;;1468   				avar_bat_ips_hndl(1);
;;;1469   				kb_start_ips=0;
;;;1470   				}
;;;1471   			else
;;;1472   				{
;;;1473   				kb_full_ver=1;     
;;;1474   				}
;;;1475   			}
;;;1476   #endif
;;;1477   		}	
;;;1478   	}
;;;1479   
;;;1480   else if(kb_full_ver)
;;;1481   	{
;;;1482   	
;;;1483   	mess_send(MESS2CNTRL_HNDL,PARAM_CNTRL_STAT_STEP_DOWN,0,15);
;;;1484   
;;;1485   	if( abs(bat[0]._Ib) > IKB ) 
;;;1486   		{
;;;1487   		if(kb_start[0]==1)
;;;1488   			{
;;;1489   			kb_start[0]=0;
;;;1490   			avar_bat_hndl(0,0);
;;;1491   			}
;;;1492   		}
;;;1493   
;;;1494   	if( abs(bat[1]._Ib) > IKB ) 
;;;1495   		{
;;;1496   		if(kb_start[1]==1)
;;;1497   			{
;;;1498   			kb_start[1]=0;
;;;1499   			avar_bat_hndl(1,0);
;;;1500   			}
;;;1501   		}
;;;1502   #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;1503   	if( abs(Ib_ips_termokompensat) > IKB ) 
;;;1504   		{
;;;1505   		if(kb_start_ips==1)
;;;1506   			{
;;;1507   			kb_start_ips=0;
;;;1508   			avar_bat_ips_hndl(0);
;;;1509   			}
;;;1510   		}
;;;1511   #endif
;;;1512   
;;;1513   	if ((kb_start[0]==0) && (kb_start[1]==0) && (kb_start_ips==0)) 
;;;1514   		{
;;;1515   		kb_full_ver=0;
;;;1516   		}
;;;1517   
;;;1518   	if(( (mess_find(MESS2KB_HNDL))	&& (mess_data[0]==PARAM_CNTRL_IS_DOWN) ) || (load_U<(USIGN*10)) )
;;;1519   		{
;;;1520   		kb_full_ver=0;
;;;1521   		if((kb_start[0]==1)&&((load_I>(2*IKB)/10))&&(!(bat[0]._av&0x01))) avar_bat_hndl(0,1);
;;;1522   		if((kb_start[1]==1)&&((load_I>(2*IKB)/10))&&(!(bat[1]._av&0x01))) avar_bat_hndl(1,1);
;;;1523   #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;1524   		if((kb_start_ips==1)&&((load_I>(2*IKB)/10))&&(!(bat_ips._av&0x01))) avar_bat_ips_hndl(1);
;;;1525   #endif
;;;1526   		}
;;;1527   	}
;;;1528   
;;;1529   }
0017d2  e8bd9ff0          POP      {r4-r12,pc}
                  |L1.6102|
0017d6  f8aa704a          STRH     r7,[r10,#0x4a]        ;1386
0017da  e7d0              B        |L1.6014|
                  |L1.6108|
0017dc  f8aa704a          STRH     r7,[r10,#0x4a]        ;1396
0017e0  e7e2              B        |L1.6056|
                  |L1.6114|
0017e2  2001              MOVS     r0,#1                 ;1408
0017e4  f7fffffe          BL       avar_bat_ips_hndl
0017e8  f88a500e          STRB     r5,[r10,#0xe]         ;1409
                  |L1.6124|
0017ec  e7f1              B        |L1.6098|
                  |L1.6126|
0017ee  f9b1004a          LDRSH    r0,[r1,#0x4a]         ;1421  ; kb_cnt_2lev
0017f2  b348              CBZ      r0,|L1.6216|
0017f4  f1a00001          SUB      r0,r0,#1              ;1423
0017f8  b200              SXTH     r0,r0                 ;1423
0017fa  460f              MOV      r7,r1                 ;1423
0017fc  f8a1004a          STRH     r0,[r1,#0x4a]         ;1423
001800  2805              CMP      r0,#5                 ;1425
001802  dd06              BLE      |L1.6162|
001804  230f              MOVS     r3,#0xf               ;1425
001806  22c8              MOVS     r2,#0xc8              ;1425
001808  2164              MOVS     r1,#0x64              ;1425
00180a  20e1              MOVS     r0,#0xe1              ;1425
00180c  f7fffffe          BL       mess_send
001810  e007              B        |L1.6178|
                  |L1.6162|
001812  2800              CMP      r0,#0                 ;1426
001814  dd05              BLE      |L1.6178|
001816  230f              MOVS     r3,#0xf               ;1426
001818  22c8              MOVS     r2,#0xc8              ;1426
00181a  2169              MOVS     r1,#0x69              ;1426
00181c  20e1              MOVS     r0,#0xe1              ;1426
00181e  f7fffffe          BL       mess_send
                  |L1.6178|
001822  f8b7004a          LDRH     r0,[r7,#0x4a]         ;1429  ; kb_cnt_2lev
001826  2805              CMP      r0,#5                 ;1429
001828  d138              BNE      |L1.6300|
00182a  f9b60008          LDRSH    r0,[r6,#8]            ;1431  ; bat
00182e  f7fffffe          BL       abs
001832  f8a80000          STRH     r0,[r8,#0]            ;1431
001836  f9b60054          LDRSH    r0,[r6,#0x54]         ;1432  ; bat
00183a  f7fffffe          BL       abs
00183e  f8a80002          STRH     r0,[r8,#2]            ;1432
001842  f9ba0000          LDRSH    r0,[r10,#0]           ;1433  ; Ib_ips_termokompensat
001846  e025              B        |L1.6292|
                  |L1.6216|
001848  e08e              B        |L1.6504|
00184a  0000              DCW      0x0000
                  |L1.6220|
00184c  20202020          DCB      "    ",212,206,208,204,206,194,206,215,205,219,201,"    "
001850  d4ced0cc
001854  cec2ced7
001858  cddbc920
00185c  202020  
00185f  2000              DCB      " ",0
001861  00                DCB      0
001862  00                DCB      0
001863  00                DCB      0
                  |L1.6244|
                          DCD      ||area_number.23||
                  |L1.6248|
                          DCD      speedChrgBlckStat
                  |L1.6252|
                          DCD      TBAT
                  |L1.6256|
                          DCD      Ib_ips_termokompensat
                  |L1.6260|
                          DCD      bat
                  |L1.6264|
                          DCD      IKB
                  |L1.6268|
                          DCD      BAT_IS_ON
                  |L1.6272|
                          DCD      ips_bat_av_vzvod
                  |L1.6276|
                          DCD      bat_ips
                  |L1.6280|
                          DCD      net_av
                  |L1.6284|
                          DCD      sp_ch_stat
                  |L1.6288|
                          DCD      KB_ALGORITM
                  |L1.6292|
001894  f7fffffe          BL       abs
001898  f8a7004e          STRH     r0,[r7,#0x4e]         ;1433
                  |L1.6300|
00189c  48ff              LDR      r0,|L1.7324|
00189e  f8b0004a          LDRH     r0,[r0,#0x4a]         ;1436  ; kb_cnt_2lev
0018a2  2800              CMP      r0,#0                 ;1436
                  |L1.6308|
0018a4  d195              BNE      |L1.6098|
0018a6  f9b60008          LDRSH    r0,[r6,#8]            ;1438  ; bat
0018aa  f7fffffe          BL       abs
0018ae  4ffb              LDR      r7,|L1.7324|
0018b0  377c              ADDS     r7,r7,#0x7c           ;1438
0018b2  8038              STRH     r0,[r7,#0]            ;1438
0018b4  f9b60054          LDRSH    r0,[r6,#0x54]         ;1439  ; bat
0018b8  f7fffffe          BL       abs
0018bc  8078              STRH     r0,[r7,#2]            ;1439
0018be  f9ba0000          LDRSH    r0,[r10,#0]           ;1440  ; Ib_ips_termokompensat
0018c2  f7fffffe          BL       abs
0018c6  f8dfa3d4          LDR      r10,|L1.7324|
0018ca  f8aa0050          STRH     r0,[r10,#0x50]        ;1440
0018ce  f88a500d          STRB     r5,[r10,#0xd]         ;1442
0018d2  f9b80000          LDRSH    r0,[r8,#0]            ;1444  ; ibat
0018d6  f9b71000          LDRSH    r1,[r7,#0]            ;1444  ; ibat_
0018da  4408              ADD      r0,r0,r1              ;1444
0018dc  f9b91000          LDRSH    r1,[r9,#0]            ;1444  ; IKB
0018e0  4288              CMP      r0,r1                 ;1444
0018e2  da02              BGE      |L1.6378|
0018e4  7820              LDRB     r0,[r4,#0]            ;1444  ; kb_start
0018e6  2801              CMP      r0,#1                 ;1444
0018e8  d032              BEQ      |L1.6480|
                  |L1.6378|
0018ea  f9b60002          LDRSH    r0,[r6,#2]            ;1448  ; bat
0018ee  28c8              CMP      r0,#0xc8              ;1448
0018f0  dd04              BLE      |L1.6396|
0018f2  7025              STRB     r5,[r4,#0]            ;1450
0018f4  2100              MOVS     r1,#0                 ;1451
0018f6  4608              MOV      r0,r1                 ;1451
0018f8  f7fffffe          BL       avar_bat_hndl
                  |L1.6396|
0018fc  f9b80002          LDRSH    r0,[r8,#2]            ;1454  ; ibat
001900  f9b71002          LDRSH    r1,[r7,#2]            ;1454  ; ibat_
001904  4408              ADD      r0,r0,r1              ;1454
001906  f9b91000          LDRSH    r1,[r9,#0]            ;1454  ; IKB
00190a  4288              CMP      r0,r1                 ;1454
00190c  da02              BGE      |L1.6420|
00190e  7860              LDRB     r0,[r4,#1]            ;1454  ; kb_start
001910  2801              CMP      r0,#1                 ;1454
001912  d020              BEQ      |L1.6486|
                  |L1.6420|
001914  f9b6004e          LDRSH    r0,[r6,#0x4e]         ;1458  ; bat
001918  28c8              CMP      r0,#0xc8              ;1458
00191a  dd04              BLE      |L1.6438|
00191c  7065              STRB     r5,[r4,#1]            ;1460
00191e  2100              MOVS     r1,#0                 ;1461
001920  2001              MOVS     r0,#1                 ;1461
001922  f7fffffe          BL       avar_bat_hndl
                  |L1.6438|
001926  f9ba004e          LDRSH    r0,[r10,#0x4e]        ;1464  ; ibat_ips
00192a  f9ba1050          LDRSH    r1,[r10,#0x50]        ;1464  ; ibat_ips_
00192e  4408              ADD      r0,r0,r1              ;1464
001930  f9b91000          LDRSH    r1,[r9,#0]            ;1464  ; IKB
001934  4288              CMP      r0,r1                 ;1464
001936  f6bfaf59          BGE      |L1.6124|
00193a  f89a000e          LDRB     r0,[r10,#0xe]         ;1464  ; kb_start_ips
00193e  2801              CMP      r0,#1                 ;1464
001940  d1b0              BNE      |L1.6308|
001942  48d7              LDR      r0,|L1.7328|
001944  8800              LDRH     r0,[r0,#0]            ;1466  ; KB_ALGORITM
001946  2802              CMP      r0,#2                 ;1466
001948  d008              BEQ      |L1.6492|
00194a  f88ab00d          STRB     r11,[r10,#0xd]        ;1473
                  |L1.6478|
00194e  e740              B        |L1.6098|
                  |L1.6480|
001950  f88ab00d          STRB     r11,[r10,#0xd]        ;1446
001954  e7d2              B        |L1.6396|
                  |L1.6486|
001956  f88ab00d          STRB     r11,[r10,#0xd]        ;1456
00195a  e7e4              B        |L1.6438|
                  |L1.6492|
00195c  2001              MOVS     r0,#1                 ;1468
00195e  f7fffffe          BL       avar_bat_ips_hndl
001962  f88a500e          STRB     r5,[r10,#0xe]         ;1469
001966  e734              B        |L1.6098|
                  |L1.6504|
001968  7b48              LDRB     r0,[r1,#0xd]          ;1480  ; kb_full_ver
00196a  4688              MOV      r8,r1                 ;1480
00196c  2800              CMP      r0,#0                 ;1480
00196e  d0ee              BEQ      |L1.6478|
001970  230f              MOVS     r3,#0xf               ;1483
001972  2200              MOVS     r2,#0                 ;1483
001974  216e              MOVS     r1,#0x6e              ;1483
001976  20e1              MOVS     r0,#0xe1              ;1483
001978  f7fffffe          BL       mess_send
00197c  f9b60008          LDRSH    r0,[r6,#8]            ;1485  ; bat
001980  f7fffffe          BL       abs
001984  f9b91000          LDRSH    r1,[r9,#0]            ;1485  ; IKB
001988  4288              CMP      r0,r1                 ;1485
00198a  dd07              BLE      |L1.6556|
00198c  7820              LDRB     r0,[r4,#0]            ;1487  ; kb_start
00198e  2801              CMP      r0,#1                 ;1487
001990  d104              BNE      |L1.6556|
001992  7025              STRB     r5,[r4,#0]            ;1489
001994  2100              MOVS     r1,#0                 ;1490
001996  4608              MOV      r0,r1                 ;1490
001998  f7fffffe          BL       avar_bat_hndl
                  |L1.6556|
00199c  f9b60054          LDRSH    r0,[r6,#0x54]         ;1494  ; bat
0019a0  f7fffffe          BL       abs
0019a4  f9b91000          LDRSH    r1,[r9,#0]            ;1494  ; IKB
0019a8  4288              CMP      r0,r1                 ;1494
0019aa  dd06              BLE      |L1.6586|
0019ac  7860              LDRB     r0,[r4,#1]            ;1496  ; kb_start
0019ae  2801              CMP      r0,#1                 ;1496
0019b0  d103              BNE      |L1.6586|
0019b2  7065              STRB     r5,[r4,#1]            ;1498
0019b4  2100              MOVS     r1,#0                 ;1499
0019b6  f7fffffe          BL       avar_bat_hndl
                  |L1.6586|
0019ba  f9ba0000          LDRSH    r0,[r10,#0]           ;1503  ; Ib_ips_termokompensat
0019be  f7fffffe          BL       abs
0019c2  f9b91000          LDRSH    r1,[r9,#0]            ;1503  ; IKB
0019c6  4288              CMP      r0,r1                 ;1503
0019c8  dd08              BLE      |L1.6620|
0019ca  f898000e          LDRB     r0,[r8,#0xe]          ;1505  ; kb_start_ips
0019ce  2801              CMP      r0,#1                 ;1505
0019d0  d104              BNE      |L1.6620|
0019d2  f888500e          STRB     r5,[r8,#0xe]          ;1507
0019d6  2000              MOVS     r0,#0                 ;1508
0019d8  f7fffffe          BL       avar_bat_ips_hndl
                  |L1.6620|
0019dc  7820              LDRB     r0,[r4,#0]            ;1513  ; kb_start
0019de  b930              CBNZ     r0,|L1.6638|
0019e0  7860              LDRB     r0,[r4,#1]            ;1513  ; kb_start
0019e2  b920              CBNZ     r0,|L1.6638|
0019e4  f898000e          LDRB     r0,[r8,#0xe]          ;1513  ; kb_start_ips
0019e8  b908              CBNZ     r0,|L1.6638|
0019ea  f888500d          STRB     r5,[r8,#0xd]          ;1515
                  |L1.6638|
0019ee  20e6              MOVS     r0,#0xe6              ;1518
0019f0  f7fffffe          BL       mess_find
0019f4  b118              CBZ      r0,|L1.6654|
0019f6  48ab              LDR      r0,|L1.7332|
0019f8  6800              LDR      r0,[r0,#0]            ;1518  ; mess_data
0019fa  28e7              CMP      r0,#0xe7              ;1518
0019fc  d00a              BEQ      |L1.6676|
                  |L1.6654|
0019fe  48aa              LDR      r0,|L1.7336|
001a00  49aa              LDR      r1,|L1.7340|
001a02  f9b00000          LDRSH    r0,[r0,#0]            ;1518  ; USIGN
001a06  f9b11000          LDRSH    r1,[r1,#0]            ;1518  ; load_U
001a0a  eb000080          ADD      r0,r0,r0,LSL #2       ;1518
001a0e  ebb10f40          CMP      r1,r0,LSL #1          ;1518
                  |L1.6674|
001a12  da9c              BGE      |L1.6478|
                  |L1.6676|
001a14  f888500d          STRB     r5,[r8,#0xd]          ;1520
001a18  7820              LDRB     r0,[r4,#0]            ;1521  ; kb_start
001a1a  4da5              LDR      r5,|L1.7344|
001a1c  2801              CMP      r0,#1                 ;1521
001a1e  d10f              BNE      |L1.6720|
001a20  f9b90000          LDRSH    r0,[r9,#0]            ;1521  ; IKB
001a24  0040              LSLS     r0,r0,#1              ;1521
001a26  fb90f1f7          SDIV     r1,r0,r7              ;1521
001a2a  f9b50000          LDRSH    r0,[r5,#0]            ;1521  ; load_I
001a2e  4281              CMP      r1,r0                 ;1521
001a30  da06              BGE      |L1.6720|
001a32  f896003d          LDRB     r0,[r6,#0x3d]         ;1521  ; bat
001a36  07c0              LSLS     r0,r0,#31             ;1521
001a38  d102              BNE      |L1.6720|
001a3a  2101              MOVS     r1,#1                 ;1521
001a3c  f7fffffe          BL       avar_bat_hndl
                  |L1.6720|
001a40  7860              LDRB     r0,[r4,#1]            ;1522  ; kb_start
001a42  2801              CMP      r0,#1                 ;1522
001a44  d110              BNE      |L1.6760|
001a46  f9b90000          LDRSH    r0,[r9,#0]            ;1522  ; IKB
001a4a  f9b51000          LDRSH    r1,[r5,#0]            ;1522  ; load_I
001a4e  0040              LSLS     r0,r0,#1              ;1522
001a50  fb90f0f7          SDIV     r0,r0,r7              ;1522
001a54  4288              CMP      r0,r1                 ;1522
001a56  da07              BGE      |L1.6760|
001a58  f8960089          LDRB     r0,[r6,#0x89]         ;1522  ; bat
001a5c  07c0              LSLS     r0,r0,#31             ;1522
001a5e  d103              BNE      |L1.6760|
001a60  2101              MOVS     r1,#1                 ;1522
001a62  4608              MOV      r0,r1                 ;1522
001a64  f7fffffe          BL       avar_bat_hndl
                  |L1.6760|
001a68  f898000e          LDRB     r0,[r8,#0xe]          ;1524  ; kb_start_ips
001a6c  2801              CMP      r0,#1                 ;1524
                  |L1.6766|
001a6e  f47faebd          BNE      |L1.6124|
001a72  f9b90000          LDRSH    r0,[r9,#0]            ;1524  ; IKB
001a76  f9b51000          LDRSH    r1,[r5,#0]            ;1524  ; load_I
001a7a  0040              LSLS     r0,r0,#1              ;1524
001a7c  fb90f0f7          SDIV     r0,r0,r7              ;1524
001a80  4288              CMP      r0,r1                 ;1524
001a82  dac6              BGE      |L1.6674|
001a84  488b              LDR      r0,|L1.7348|
001a86  f890003d          LDRB     r0,[r0,#0x3d]         ;1524  ; bat_ips
001a8a  07c0              LSLS     r0,r0,#31             ;1524
001a8c  d1ef              BNE      |L1.6766|
001a8e  e8bd5ff0          POP      {r4-r12,lr}           ;1524
001a92  2001              MOVS     r0,#1                 ;1524
001a94  f7ffbffe          B.W      avar_bat_ips_hndl
;;;1530   
                          ENDP

                  samokalibr_hndl PROC
;;;1539   //-----------------------------------------------
;;;1540   void samokalibr_hndl(void)
001a98  4770              BX       lr
;;;1541   {
;;;1542   #ifndef UKU_220_IPS_TERMOKOMPENSAT
;;;1543   if(++samokalibr_cnt>=1800)samokalibr_cnt=0;
;;;1544   
;;;1545   if((samokalibr_cnt>=1785U)&&(vz2_stat==vz2sOFF))
;;;1546   	{
;;;1547   	mess_send(MESS2RELE_HNDL,PARAM_RELE_SAMOKALIBR,1,15);
;;;1548   	mess_send(MESS2IND_HNDL,PARAM_SAMOKALIBR,0,15);
;;;1549   	mess_send(MESS2MATEMAT,PARAM_SAMOKALIBR,0,15);
;;;1550   	} 
;;;1551   
;;;1552   if((samokalibr_cnt==1799U)&&(vz2_stat==vz2sOFF))
;;;1553   	{
;;;1554   	if((Kibat0[0]!=ad7705_buff_[0])&&(abs(bat[0]._Ib/10)<IZMAX)) lc640_write_int(ADR_KI0BAT[0],ad7705_buff_[0]);
;;;1555   	if((Kibat0[1]!=ad7705_buff_[1])&&(abs(bat[0]._Ib/10)<IZMAX)) lc640_write_int(ADR_KI0BAT[1],ad7705_buff_[1]);
;;;1556   	
;;;1557   	}
;;;1558   #endif	 	
;;;1559   }
;;;1560   
                          ENDP

                  ubat_old_drv PROC
;;;1563   //-----------------------------------------------
;;;1564   void ubat_old_drv(void)
001a9a  b510              PUSH     {r4,lr}
;;;1565   {        
;;;1566   bat_u_old_cnt++;
001a9c  4c86              LDR      r4,|L1.7352|
001a9e  8820              LDRH     r0,[r4,#0]  ; bat_u_old_cnt
001aa0  f1000001          ADD      r0,r0,#1
001aa4  8020              STRH     r0,[r4,#0]
;;;1567   gran_ring(&bat_u_old_cnt,0,8);
001aa6  f04f0208          MOV      r2,#8
001aaa  f04f0100          MOV      r1,#0
001aae  4620              MOV      r0,r4
001ab0  f7fffffe          BL       gran_ring
;;;1568   
;;;1569   bat[0]._u_old[bat_u_old_cnt]=bat[0]._Ub;
001ab4  4981              LDR      r1,|L1.7356|
001ab6  f9b40000          LDRSH    r0,[r4,#0]  ; bat_u_old_cnt
001aba  eb010040          ADD      r0,r1,r0,LSL #1
001abe  884a              LDRH     r2,[r1,#2]  ; bat
001ac0  8402              STRH     r2,[r0,#0x20]
;;;1570   bat[1]._u_old[bat_u_old_cnt]=bat[1]._Ub;
001ac2  f8b1104e          LDRH     r1,[r1,#0x4e]  ; bat
001ac6  f8a0106c          STRH     r1,[r0,#0x6c]
;;;1571   }
001aca  bd10              POP      {r4,pc}
;;;1572   
                          ENDP

                  unet_drv PROC
;;;1573   //-----------------------------------------------
;;;1574   void unet_drv(void)
001acc  b570              PUSH     {r4-r6,lr}
;;;1575   {
;;;1576   if(net_U<UMN)
001ace  4d7c              LDR      r5,|L1.7360|
001ad0  487c              LDR      r0,|L1.7364|
;;;1577   	{
;;;1578   	if((unet_drv_cnt<10)&&(main_1Hz_cnt>15))
001ad2  4a7d              LDR      r2,|L1.7368|
001ad4  f9b51000          LDRSH    r1,[r5,#0]            ;1576  ; net_U
001ad8  f9b03000          LDRSH    r3,[r0,#0]            ;1576  ; UMN
001adc  f9920000          LDRSB    r0,[r2,#0]
001ae0  4299              CMP      r1,r3                 ;1576
001ae2  da1f              BGE      |L1.6948|
;;;1579   		{
;;;1580   		unet_drv_cnt++;
;;;1581   		if(unet_drv_cnt>=10)
;;;1582   			{
;;;1583   			net_Ustore=net_U;
001ae4  4c79              LDR      r4,|L1.7372|
001ae6  280a              CMP      r0,#0xa               ;1578
001ae8  da0f              BGE      |L1.6922|
001aea  4b79              LDR      r3,|L1.7376|
001aec  f9b33000          LDRSH    r3,[r3,#0]            ;1578  ; main_1Hz_cnt
001af0  2b0f              CMP      r3,#0xf               ;1578
001af2  dd0a              BLE      |L1.6922|
001af4  f1000001          ADD      r0,r0,#1              ;1580
001af8  b240              SXTB     r0,r0                 ;1580
001afa  7010              STRB     r0,[r2,#0]            ;1580
001afc  280a              CMP      r0,#0xa               ;1581
001afe  db09              BLT      |L1.6932|
001b00  8021              STRH     r1,[r4,#0]
;;;1584   		 	avar_unet_hndl(1);
001b02  2001              MOVS     r0,#1
001b04  f7fffffe          BL       avar_unet_hndl
001b08  e004              B        |L1.6932|
                  |L1.6922|
;;;1585   			
;;;1586   			}
;;;1587   		}
;;;1588   	else if(unet_drv_cnt>=10)unet_drv_cnt=10;
001b0a  280a              CMP      r0,#0xa
001b0c  db02              BLT      |L1.6932|
001b0e  f04f000a          MOV      r0,#0xa
001b12  7010              STRB     r0,[r2,#0]
                  |L1.6932|
;;;1589   
;;;1590   	if(net_U<net_Ustore) net_Ustore=net_U;	
001b14  f9b50000          LDRSH    r0,[r5,#0]  ; net_U
001b18  f9b41000          LDRSH    r1,[r4,#0]  ; net_Ustore
001b1c  4288              CMP      r0,r1
001b1e  da00              BGE      |L1.6946|
001b20  8020              STRH     r0,[r4,#0]
                  |L1.6946|
;;;1591   	}
;;;1592   
;;;1593   else if(net_U>UMN)
;;;1594   	{                 
;;;1595   	if(unet_drv_cnt)
;;;1596   		{
;;;1597   		unet_drv_cnt--;
;;;1598   		if(unet_drv_cnt<=0)
;;;1599   			{
;;;1600   			avar_unet_hndl(0);
;;;1601   			}
;;;1602   		}
;;;1603   	else if(unet_drv_cnt<0)unet_drv_cnt=0;
;;;1604   	
;;;1605   	}
;;;1606   
;;;1607   }
001b22  bd70              POP      {r4-r6,pc}
                  |L1.6948|
001b24  ddfd              BLE      |L1.6946|
001b26  2800              CMP      r0,#0                 ;1595
001b28  d0fb              BEQ      |L1.6946|
001b2a  f1a00001          SUB      r0,r0,#1              ;1597
001b2e  b240              SXTB     r0,r0                 ;1597
001b30  7010              STRB     r0,[r2,#0]            ;1597
001b32  2800              CMP      r0,#0                 ;1598
001b34  dcf5              BGT      |L1.6946|
001b36  e8bd4070          POP      {r4-r6,lr}            ;1600
001b3a  2000              MOVS     r0,#0                 ;1600
001b3c  f7ffbffe          B.W      avar_unet_hndl
;;;1608   
                          ENDP

                  matemat PROC
;;;1609   //-----------------------------------------------
;;;1610   void matemat(void)
001b40  e92d5ffc          PUSH     {r2-r12,lr}
;;;1611   {
;;;1612   //signed short temp_SS;
;;;1613   signed long temp_SL/*,temp_SL_*/;
;;;1614   char /*temp,*/i;
;;;1615   //signed short temp_SS;
;;;1616   
;;;1617   #ifdef UKU_MGTS
;;;1618   //Ì‡ÔˇÊÂÌËÂ ÒÂÚË
;;;1619   temp_SL=(signed long)net_buff_;
;;;1620   temp_SL*=Kunet;
;;;1621   temp_SL/=110000L;
;;;1622   net_U=(signed short)temp_SL;
;;;1623   #endif
;;;1624   
;;;1625   #ifdef UKU_RSTKM
;;;1626   //Ì‡ÔˇÊÂÌËÂ ÒÂÚË
;;;1627   temp_SL=(signed long)net_buff_;
;;;1628   temp_SL*=Kunet;
;;;1629   temp_SL/=110000L;
;;;1630   net_U=(signed short)temp_SL;
;;;1631   #endif
;;;1632   
;;;1633   #ifdef UKU_3U
;;;1634   //Ì‡ÔˇÊÂÌËÂ ÒÂÚË
;;;1635   temp_SL=(signed long)net_buff_;
;;;1636   temp_SL*=Kunet;
;;;1637   temp_SL/=36000L;
;;;1638   net_U=(signed short)temp_SL;
;;;1639   #endif
;;;1640   
;;;1641   #ifdef UKU_6U
;;;1642   //Ì‡ÔˇÊÂÌËÂ ÒÂÚË
;;;1643   
;;;1644   if((AUSW_MAIN%10)||(AUSW_MAIN==2400)||(AUSW_MAIN==4800)||(AUSW_MAIN==6000))
;;;1645   	{
;;;1646   
;;;1647   	if(bps[11]._device==dNET_METR)
;;;1648   		{
;;;1649   		net_metr_buff_[0]=((signed short)bps[11]._buff[0])+(((signed short)bps[11]._buff[1])<<8);
;;;1650   		net_metr_buff_[1]=((signed short)bps[11]._buff[2])+(((signed short)bps[11]._buff[3])<<8);
;;;1651   		net_metr_buff_[2]=((signed short)bps[11]._buff[4])+(((signed short)bps[11]._buff[5])<<8);
;;;1652   
;;;1653   		temp_SL=(signed long)net_metr_buff_[0];
;;;1654   		temp_SL*=KunetA;
;;;1655   		temp_SL/=6000L;
;;;1656   		net_Ua=(signed short)temp_SL;
;;;1657   	
;;;1658   		temp_SL=(signed long)net_metr_buff_[1];
;;;1659   		temp_SL*=KunetB;
;;;1660   		temp_SL/=6000L;
;;;1661   		net_Ub=(signed short)temp_SL;
;;;1662   	
;;;1663   		temp_SL=(signed long)net_metr_buff_[2];
;;;1664   		temp_SL*=KunetC;
;;;1665   		temp_SL/=6000L;
;;;1666   		net_Uc=(signed short)temp_SL;
;;;1667   		}
;;;1668   	else
;;;1669   		{
;;;1670   		temp_SL=(signed long)net_buff_;
;;;1671   		temp_SL*=KunetA;
;;;1672   		temp_SL/=110000L;
;;;1673   		net_Ua=(signed short)temp_SL;
;;;1674   	
;;;1675   		temp_SL=(signed long)adc_buff_[3];
;;;1676   		temp_SL*=KunetB;
;;;1677   		temp_SL/=6000L;
;;;1678   		net_Ub=(signed short)temp_SL;
;;;1679   	
;;;1680   		temp_SL=(signed long)adc_buff_[10];
;;;1681   		temp_SL*=KunetC;
;;;1682   		temp_SL/=6000L;
;;;1683   		net_Uc=(signed short)temp_SL;
;;;1684   		}
;;;1685   
;;;1686   	net_U=net_Ua;
;;;1687   	if(net_Ub<net_U)net_U=net_Ub;
;;;1688   	if(net_Uc<net_U)net_U=net_Uc;
;;;1689   	}
;;;1690   else 
;;;1691   	{
;;;1692   	temp_SL=(signed long)net_buff_;
;;;1693   	temp_SL*=Kunet;
;;;1694   	temp_SL/=110000L;
;;;1695   	net_U=(signed short)temp_SL;
;;;1696   	}
;;;1697   
;;;1698   
;;;1699   
;;;1700   
;;;1701   #endif
;;;1702   
;;;1703   #ifdef UKU_GLONASS
;;;1704   //Ì‡ÔˇÊÂÌËÂ ÒÂÚË
;;;1705   temp_SL=(signed long)net_buff_;
;;;1706   temp_SL*=Kunet;
;;;1707   temp_SL/=110000L;
;;;1708   net_U=(signed short)temp_SL;
;;;1709   #endif
;;;1710   
;;;1711   #ifdef UKU_KONTUR
;;;1712   //Ì‡ÔˇÊÂÌËÂ ÒÂÚË
;;;1713   temp_SL=(signed long)net_buff_;
;;;1714   temp_SL*=Kunet;
;;;1715   temp_SL/=110000L;
;;;1716   net_U=(signed short)temp_SL;
;;;1717   #endif
;;;1718   
;;;1719   #ifdef IPS_SGEP_GAZPROM
;;;1720   //Ì‡ÔˇÊÂÌËÂ ÒÂÚË
;;;1721   temp_SL=(signed long)net_buff_;
;;;1722   temp_SL*=Kunet;
;;;1723   temp_SL/=110000L;
;;;1724   net_U=(signed short)temp_SL;
;;;1725   #endif
;;;1726   
;;;1727   #ifdef UKU_220_V2
;;;1728   //Ì‡ÔˇÊÂÌËÂ ÒÂÚË
;;;1729   
;;;1730   if(AUSW_MAIN==22033)
;;;1731   	{
;;;1732   	temp_SL=(signed long)net_buff_;
;;;1733   	temp_SL*=KunetA;
;;;1734   	temp_SL/=6000L;
;;;1735   	net_Ua=(signed short)temp_SL;
;;;1736   
;;;1737   	temp_SL=(signed long)adc_buff_[3];
;;;1738   	temp_SL*=KunetB;
;;;1739   	temp_SL/=6000L;
;;;1740   	net_Ub=(signed short)temp_SL;
;;;1741   
;;;1742   	temp_SL=(signed long)adc_buff_[10];
;;;1743   	temp_SL*=KunetC;
;;;1744   	temp_SL/=6000L;
;;;1745   	net_Uc=(signed short)temp_SL;
;;;1746   
;;;1747   	net_U=net_Ua;
;;;1748   	if(net_Ub<net_U)net_U=net_Ub;
;;;1749   	if(net_Uc<net_U)net_U=net_Uc;
;;;1750   	}
;;;1751   else
;;;1752   	{
;;;1753   	temp_SL=(signed long)net_buff_;
;;;1754   	temp_SL*=Kunet;
;;;1755   	temp_SL/=5000L;
;;;1756   	net_U=(signed short)temp_SL;
;;;1757   	}
;;;1758   #endif
;;;1759   
;;;1760   
;;;1761   #ifdef UKU_220
;;;1762   //Ì‡ÔˇÊÂÌËÂ ÒÂÚË
;;;1763   
;;;1764   if(AUSW_MAIN==22035)
;;;1765   	{
;;;1766   	temp_SL=(signed long)net_buff_;
;;;1767   	temp_SL*=KunetA;
;;;1768   	temp_SL/=6000L;
;;;1769   	net_Ua=(signed short)temp_SL;
;;;1770   
;;;1771   	temp_SL=(signed long)adc_buff_[3];
;;;1772   	temp_SL*=KunetB;
;;;1773   	temp_SL/=6000L;
;;;1774   	net_Ub=(signed short)temp_SL;
;;;1775   
;;;1776   	temp_SL=(signed long)adc_buff_[10];
;;;1777   	temp_SL*=KunetC;
;;;1778   	temp_SL/=6000L;
;;;1779   	net_Uc=(signed short)temp_SL;
;;;1780   
;;;1781   	net_U=net_Ua;
;;;1782   	if(net_Ub<net_U)net_U=net_Ub;
;;;1783   	if(net_Uc<net_U)net_U=net_Uc;
;;;1784   	}
;;;1785   else
;;;1786   	{
;;;1787   	temp_SL=(signed long)net_buff_;
;;;1788   	temp_SL*=Kunet;
;;;1789   	#ifdef _ACDC_
;;;1790   	temp_SL/=500L;
;;;1791   	#else
;;;1792   	temp_SL/=5000L;
;;;1793   	#endif
;;;1794   	net_U=(signed short)temp_SL;
;;;1795   	
;;;1796   	}
;;;1797   #endif
;;;1798   
;;;1799   #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;1800   //Ì‡ÔˇÊÂÌËÂ ÒÂÚË
;;;1801   
;;;1802   
;;;1803   	if(bps[11]._device==dNET_METR)
001b44  4863              LDR      r0,|L1.7380|
;;;1804   		{
;;;1805   		net_metr_buff_[0]=((signed short)bps[11]._buff[0])+(((signed short)bps[11]._buff[1])<<8);
;;;1806   		net_metr_buff_[1]=((signed short)bps[11]._buff[2])+(((signed short)bps[11]._buff[3])<<8);
;;;1807   		net_metr_buff_[2]=((signed short)bps[11]._buff[4])+(((signed short)bps[11]._buff[5])<<8);
;;;1808   
;;;1809   		temp_SL=(signed long)net_metr_buff_[2];
;;;1810   		temp_SL*=KunetA;
001b46  4a64              LDR      r2,|L1.7384|
;;;1811   		temp_SL/=6000L;
;;;1812   		net_Ua=(signed short)temp_SL;
;;;1813   	
;;;1814   		temp_SL=(signed long)net_metr_buff_[1];
;;;1815   		temp_SL*=KunetB;
001b48  4965              LDR      r1,|L1.7392|
001b4a  f89003f4          LDRB     r0,[r0,#0x3f4]        ;1803  ; bps
;;;1816   		temp_SL/=6000L;
;;;1817   		net_Ub=(signed short)temp_SL;
;;;1818   	
;;;1819   		temp_SL=(signed long)net_metr_buff_[0];
;;;1820   		temp_SL*=KunetC;
001b4e  4b65              LDR      r3,|L1.7396|
001b50  9001              STR      r0,[sp,#4]            ;1810
001b52  f8dfc188          LDR      r12,|L1.7388|
001b56  f9b29000          LDRSH    r9,[r2,#0]            ;1810
001b5a  f9b1b000          LDRSH    r11,[r1,#0]           ;1815
001b5e  f9b3a000          LDRSH    r10,[r3,#0]
001b62  4d61              LDR      r5,|L1.7400|
;;;1821   		temp_SL/=6000L;
;;;1822   		net_Uc=(signed short)temp_SL;
001b64  4c61              LDR      r4,|L1.7404|
;;;1823   
;;;1824   		net_F3=((signed short)bps[11]._buff[6])+(((signed short)bps[11]._buff[7])<<8);
;;;1825   
;;;1826   		net_U=net_Ua;
;;;1827   		if(net_Ub<net_U)net_U=net_Ub;
;;;1828   		if(net_Uc<net_U)net_U=net_Uc;
;;;1829   		}
;;;1830   	  else if(AUSW_MAIN==22033)
;;;1831   	{
;;;1832   	temp_SL=(signed long)net_buff_;
001b66  4f4d              LDR      r7,|L1.7324|
001b68  f2456611          MOV      r6,#0x5611            ;1830
001b6c  2807              CMP      r0,#7                 ;1803
001b6e  d036              BEQ      |L1.7134|
001b70  4639              MOV      r1,r7
;;;1833   	temp_SL*=KunetA;
;;;1834   	temp_SL/=4000L;
;;;1835   	net_Ua=(signed short)temp_SL;
;;;1836   
;;;1837   	temp_SL=(signed long)adc_buff_[3];
001b72  4b60              LDR      r3,|L1.7412|
001b74  8dca              LDRH     r2,[r1,#0x2e]         ;1832
001b76  4958              LDR      r1,|L1.7384|
001b78  f8df8164          LDR      r8,|L1.7392|
001b7c  f8df9164          LDR      r9,|L1.7396|
001b80  f9b11000          LDRSH    r1,[r1,#0]            ;1810
001b84  f9b88000          LDRSH    r8,[r8,#0]            ;1815
001b88  434a              MULS     r2,r1,r2              ;1833
001b8a  f9b31006          LDRSH    r1,[r3,#6]
;;;1838   	temp_SL*=KunetB;
;;;1839   	temp_SL/=6000L;
;;;1840   	net_Ub=(signed short)temp_SL;
;;;1841   
;;;1842   	temp_SL=(signed long)adc_buff_[10];
001b8e  f9b33014          LDRSH    r3,[r3,#0x14]
001b92  fb01f108          MUL      r1,r1,r8              ;1838
001b96  f2417870          MOV      r8,#0x1770            ;1811
001b9a  f9b99000          LDRSH    r9,[r9,#0]            ;1820
001b9e  fb91f1f8          SDIV     r1,r1,r8              ;1839
;;;1843   	temp_SL*=KunetC;
001ba2  fb03f309          MUL      r3,r3,r9
;;;1844   	temp_SL/=6000L;
001ba6  fb93f3f8          SDIV     r3,r3,r8
001baa  4851              LDR      r0,|L1.7408|
001bac  b209              SXTH     r1,r1                 ;1840
;;;1845   	net_Uc=(signed short)temp_SL;
001bae  b21b              SXTH     r3,r3
001bb0  8800              LDRH     r0,[r0,#0]            ;1830  ; AUSW_MAIN
001bb2  42b0              CMP      r0,r6                 ;1830
001bb4  d154              BNE      |L1.7264|
001bb6  f44f607a          MOV      r0,#0xfa0             ;1834
001bba  fb92f0f0          SDIV     r0,r2,r0              ;1834
001bbe  b200              SXTH     r0,r0                 ;1835
001bc0  f8ac0000          STRH     r0,[r12,#0]           ;1835
001bc4  8029              STRH     r1,[r5,#0]            ;1840
001bc6  8023              STRH     r3,[r4,#0]
;;;1846   
;;;1847   	net_U=net_Ua;
001bc8  4a3d              LDR      r2,|L1.7360|
001bca  8010              STRH     r0,[r2,#0]
;;;1848   	if(net_Ub<net_U)net_U=net_Ub;
001bcc  4281              CMP      r1,r0
001bce  da00              BGE      |L1.7122|
001bd0  8011              STRH     r1,[r2,#0]
                  |L1.7122|
;;;1849   	if(net_Uc<net_U)net_U=net_Uc;
001bd2  f9b20000          LDRSH    r0,[r2,#0]  ; net_U
001bd6  4283              CMP      r3,r0
001bd8  da00              BGE      |L1.7132|
001bda  8013              STRH     r3,[r2,#0]
                  |L1.7132|
001bdc  e0b1              B        |L1.7490|
                  |L1.7134|
001bde  4846              LDR      r0,|L1.7416|
001be0  4b2e              LDR      r3,|L1.7324|
001be2  7801              LDRB     r1,[r0,#0]            ;1805  ; bps
001be4  7842              LDRB     r2,[r0,#1]            ;1805  ; bps
001be6  f10303b0          ADD      r3,r3,#0xb0           ;1805
001bea  eb012102          ADD      r1,r1,r2,LSL #8       ;1805
001bee  fa1ff881          UXTH     r8,r1                 ;1805
001bf2  f8a38000          STRH     r8,[r3,#0]            ;1805
001bf6  7881              LDRB     r1,[r0,#2]            ;1806  ; bps
001bf8  78c2              LDRB     r2,[r0,#3]            ;1806  ; bps
001bfa  eb012102          ADD      r1,r1,r2,LSL #8       ;1806
001bfe  b28a              UXTH     r2,r1                 ;1806
001c00  805a              STRH     r2,[r3,#2]            ;1806
001c02  7901              LDRB     r1,[r0,#4]            ;1807  ; bps
001c04  f890e005          LDRB     lr,[r0,#5]            ;1807  ; bps
001c08  eb01210e          ADD      r1,r1,lr,LSL #8       ;1807
001c0c  b289              UXTH     r1,r1                 ;1807
001c0e  8099              STRH     r1,[r3,#4]            ;1807
001c10  fb01f109          MUL      r1,r1,r9              ;1810
001c14  f2417370          MOV      r3,#0x1770            ;1811
001c18  fb91f1f3          SDIV     r1,r1,r3              ;1811
001c1c  fa0ff981          SXTH     r9,r1                 ;1812
001c20  f8ac9000          STRH     r9,[r12,#0]           ;1812
001c24  fb02f20b          MUL      r2,r2,r11             ;1815
001c28  fb92f1f3          SDIV     r1,r2,r3              ;1816
001c2c  b209              SXTH     r1,r1                 ;1817
001c2e  8029              STRH     r1,[r5,#0]            ;1817
001c30  fb08f80a          MUL      r8,r8,r10             ;1820
001c34  fb98f2f3          SDIV     r2,r8,r3              ;1821
001c38  b212              SXTH     r2,r2                 ;1822
001c3a  8022              STRH     r2,[r4,#0]            ;1822
001c3c  7983              LDRB     r3,[r0,#6]            ;1824  ; bps
001c3e  79c0              LDRB     r0,[r0,#7]            ;1824  ; bps
001c40  eb032000          ADD      r0,r3,r0,LSL #8       ;1824
001c44  4b2d              LDR      r3,|L1.7420|
001c46  8018              STRH     r0,[r3,#0]            ;1824
001c48  481d              LDR      r0,|L1.7360|
001c4a  f8a09000          STRH     r9,[r0,#0]            ;1826
001c4e  4549              CMP      r1,r9                 ;1827
001c50  da00              BGE      |L1.7252|
001c52  8001              STRH     r1,[r0,#0]            ;1827
                  |L1.7252|
001c54  f9b01000          LDRSH    r1,[r0,#0]            ;1828  ; net_U
001c58  428a              CMP      r2,r1                 ;1828
001c5a  da72              BGE      |L1.7490|
001c5c  8002              STRH     r2,[r0,#0]            ;1828
001c5e  e070              B        |L1.7490|
                  |L1.7264|
;;;1850   	}
;;;1851   else if((AUSW_MAIN==22063)||(AUSW_MAIN==22023)||(AUSW_MAIN==22043)||(AUSW_MAIN==22044)||(AUSW_MAIN==22018))
001c60  f5a048ac          SUB      r8,r0,#0x5600
001c64  f1b8082f          SUBS     r8,r8,#0x2f
001c68  d00b              BEQ      |L1.7298|
001c6a  f1180828          ADDS     r8,r8,#0x28
001c6e  d008              BEQ      |L1.7298|
001c70  f1b80814          SUBS     r8,r8,#0x14
001c74  d005              BEQ      |L1.7298|
001c76  f1b80801          SUBS     r8,r8,#1
001c7a  d002              BEQ      |L1.7298|
001c7c  f118081a          ADDS     r8,r8,#0x1a
001c80  d146              BNE      |L1.7440|
                  |L1.7298|
;;;1852   	{
;;;1853   	temp_SL=(signed long)net_buff_;
;;;1854   	temp_SL*=KunetA;
;;;1855   	temp_SL/=40000L;
001c82  f6494040          MOV      r0,#0x9c40
001c86  fb92f0f0          SDIV     r0,r2,r0
;;;1856   	net_Ua=(signed short)temp_SL;
001c8a  b200              SXTH     r0,r0
001c8c  f8ac0000          STRH     r0,[r12,#0]
;;;1857   
;;;1858   	temp_SL=(signed long)adc_buff_[3];
;;;1859   	temp_SL*=KunetB;
;;;1860   	temp_SL/=6000L;
;;;1861   	net_Ub=(signed short)temp_SL;
001c90  8029              STRH     r1,[r5,#0]
;;;1862   
;;;1863   	temp_SL=(signed long)adc_buff_[10];
;;;1864   	temp_SL*=KunetC;
;;;1865   	temp_SL/=6000L;
;;;1866   	net_Uc=(signed short)temp_SL;
001c92  8023              STRH     r3,[r4,#0]
;;;1867   
;;;1868   	net_U=net_Ua;
001c94  4a0a              LDR      r2,|L1.7360|
001c96  8010              STRH     r0,[r2,#0]
;;;1869   	if(net_Ub<net_U)net_U=net_Ub;
001c98  4281              CMP      r1,r0
001c9a  e031              B        |L1.7424|
                  |L1.7324|
                          DCD      ||area_number.23||
                  |L1.7328|
                          DCD      KB_ALGORITM
                  |L1.7332|
                          DCD      mess_data
                  |L1.7336|
                          DCD      USIGN
                  |L1.7340|
                          DCD      load_U
                  |L1.7344|
                          DCD      load_I
                  |L1.7348|
                          DCD      bat_ips
                  |L1.7352|
                          DCD      bat_u_old_cnt
                  |L1.7356|
                          DCD      bat
                  |L1.7360|
                          DCD      net_U
                  |L1.7364|
                          DCD      UMN
                  |L1.7368|
                          DCD      unet_drv_cnt
                  |L1.7372|
                          DCD      net_Ustore
                  |L1.7376|
                          DCD      main_1Hz_cnt
                  |L1.7380|
                          DCD      bps
                  |L1.7384|
                          DCD      KunetA
                  |L1.7388|
                          DCD      net_Ua
                  |L1.7392|
                          DCD      KunetB
                  |L1.7396|
                          DCD      KunetC
                  |L1.7400|
                          DCD      net_Ub
                  |L1.7404|
                          DCD      net_Uc
                  |L1.7408|
                          DCD      AUSW_MAIN
                  |L1.7412|
                          DCD      ||.bss||+0x400
                  |L1.7416|
                          DCD      bps+0x3fa
                  |L1.7420|
                          DCD      net_F3
                  |L1.7424|
001d00  da00              BGE      |L1.7428|
001d02  8011              STRH     r1,[r2,#0]
                  |L1.7428|
;;;1870   	if(net_Uc<net_U)net_U=net_Uc;
001d04  f9b20000          LDRSH    r0,[r2,#0]  ; net_U
001d08  4283              CMP      r3,r0
001d0a  da1a              BGE      |L1.7490|
001d0c  8013              STRH     r3,[r2,#0]
001d0e  e018              B        |L1.7490|
                  |L1.7440|
;;;1871   	}
;;;1872   else	if((AUSW_MAIN==22010)||(AUSW_MAIN==22011) )
;;;1873   	{
;;;1874   	temp_SL=(signed long)net_buff_;
;;;1875   	temp_SL*=Kunet;
001d10  49ff              LDR      r1,|L1.8464|
001d12  f5a043aa          SUB      r3,r0,#0x5500         ;1872
001d16  f9b12000          LDRSH    r2,[r1,#0]
001d1a  49fe              LDR      r1,|L1.8468|
001d1c  8dc9              LDRH     r1,[r1,#0x2e]         ;1832
001d1e  4351              MULS     r1,r2,r1
001d20  3bfa              SUBS     r3,r3,#0xfa           ;1872
001d22  d001              BEQ      |L1.7464|
001d24  1e5a              SUBS     r2,r3,#1              ;1872
001d26  d106              BNE      |L1.7478|
                  |L1.7464|
;;;1876   	temp_SL/=35000L;
001d28  f64800b8          MOV      r0,#0x88b8
001d2c  fb91f0f0          SDIV     r0,r1,r0
;;;1877   	net_U=(signed short)temp_SL;
001d30  49f9              LDR      r1,|L1.8472|
001d32  8008              STRH     r0,[r1,#0]
001d34  e005              B        |L1.7490|
                  |L1.7478|
;;;1878   	
;;;1879   	}
;;;1880   else
;;;1881   	{
;;;1882   	temp_SL=(signed long)net_buff_;
;;;1883   	temp_SL*=Kunet;
;;;1884   	#ifdef _ACDC_
;;;1885   	temp_SL/=500L;
001d36  f44f70fa          MOV      r0,#0x1f4
001d3a  fb91f0f0          SDIV     r0,r1,r0
;;;1886   	#else
;;;1887   	temp_SL/=5000L;
;;;1888   	#endif
;;;1889   	net_U=(signed short)temp_SL;
001d3e  49f6              LDR      r1,|L1.8472|
001d40  8008              STRH     r0,[r1,#0]
                  |L1.7490|
;;;1890   	
;;;1891   	}
;;;1892   if(bps[11]._device!=dNET_METR) net_F3=net_F;
001d42  9801              LDR      r0,[sp,#4]
001d44  2807              CMP      r0,#7
001d46  d003              BEQ      |L1.7504|
001d48  48f4              LDR      r0,|L1.8476|
001d4a  8801              LDRH     r1,[r0,#0]  ; net_F
001d4c  48f4              LDR      r0,|L1.8480|
001d4e  8001              STRH     r1,[r0,#0]
                  |L1.7504|
;;;1893   #endif
;;;1894   
;;;1895   #ifdef UKU_TELECORE2015
;;;1896   //Ì‡ÔˇÊÂÌËÂ ÒÂÚË
;;;1897   temp_SL=(signed long)net_buff_;
;;;1898   temp_SL*=Kunet;
;;;1899   temp_SL/=110000L;
;;;1900   net_U=(signed short)temp_SL;
;;;1901   #endif
;;;1902   
;;;1903   #ifdef UKU_TELECORE2017
;;;1904   //Ì‡ÔˇÊÂÌËÂ ÒÂÚË
;;;1905   temp_SL=(signed long)net_buff_;
;;;1906   temp_SL*=Kunet;
;;;1907   temp_SL/=110000L;
;;;1908   net_U=(signed short)temp_SL;
;;;1909   #endif
;;;1910   
;;;1911   //Õ‡ÔˇÊÂÌËˇ ·‡Ú‡ÂÈ
;;;1912   temp_SL=(signed long)adc_buff_[0];
001d50  f8df83d0          LDR      r8,|L1.8484|
001d54  f9b82000          LDRSH    r2,[r8,#0]  ; adc_buff_
;;;1913   temp_SL*=Kubat[0];
001d58  49f3              LDR      r1,|L1.8488|
001d5a  f9b10000          LDRSH    r0,[r1,#0]  ; Kubat
001d5e  4350              MULS     r0,r2,r0
;;;1914   temp_SL/=2000L;
001d60  f44f65fa          MOV      r5,#0x7d0
001d64  fb90f0f5          SDIV     r0,r0,r5
;;;1915   bat[0]._Ub=(signed short)temp_SL;
001d68  4cf0              LDR      r4,|L1.8492|
001d6a  8060              STRH     r0,[r4,#2]
;;;1916   
;;;1917   #ifdef UKU_220
;;;1918   //Õ‡ÔˇÊÂÌËˇ ·‡Ú‡ÂÈ
;;;1919   temp_SL=(signed long)adc_buff_[0];
;;;1920   temp_SL*=Kubat[0];
;;;1921   temp_SL/=400L;
;;;1922   bat[0]._Ub=(signed short)temp_SL;
;;;1923   #endif
;;;1924   
;;;1925   #ifdef UKU_220_V2
;;;1926   //Õ‡ÔˇÊÂÌËˇ ·‡Ú‡ÂÈ
;;;1927   temp_SL=(signed long)adc_buff_[0];
;;;1928   temp_SL*=Kubat[0];
;;;1929   temp_SL/=400L;
;;;1930   bat[0]._Ub=(signed short)temp_SL;
;;;1931   #endif
;;;1932   
;;;1933   temp_SL=(signed long)adc_buff_[4];
001d6c  f9b83008          LDRSH    r3,[r8,#8]  ; adc_buff_
;;;1934   temp_SL*=Kubatm[0];
001d70  4aef              LDR      r2,|L1.8496|
001d72  f9b20000          LDRSH    r0,[r2,#0]  ; Kubatm
001d76  fb00f003          MUL      r0,r0,r3
;;;1935   temp_SL/=700L;
001d7a  f44f732f          MOV      r3,#0x2bc
001d7e  fb90f0f3          SDIV     r0,r0,r3
;;;1936   bat[0]._Ubm=(signed short)temp_SL;
001d82  80a0              STRH     r0,[r4,#4]
;;;1937   
;;;1938   #ifdef UKU_KONTUR
;;;1939   temp_SL=(signed long)adc_buff_[4];
;;;1940   temp_SL*=Kubatm[0];
;;;1941   temp_SL/=2000L;
;;;1942   bat[0]._Ubm=(signed short)temp_SL;
;;;1943   #endif
;;;1944   
;;;1945   temp_SL=(signed long)adc_buff_[12];
001d84  f9b80018          LDRSH    r0,[r8,#0x18]  ; adc_buff_
;;;1946   temp_SL*=Kubat[1];
001d88  f9b11002          LDRSH    r1,[r1,#2]  ; Kubat
001d8c  fb01f100          MUL      r1,r1,r0
;;;1947   temp_SL/=2000L;
001d90  fb91f0f5          SDIV     r0,r1,r5
;;;1948   bat[1]._Ub=(signed short)temp_SL;
001d94  f8a4004e          STRH     r0,[r4,#0x4e]
;;;1949   
;;;1950   #ifdef UKU_220
;;;1951   temp_SL=(signed long)adc_buff_[12];
;;;1952   temp_SL*=Kubat[1];
;;;1953   temp_SL/=400L;
;;;1954   bat[1]._Ub=(signed short)temp_SL;
;;;1955   #endif
;;;1956   
;;;1957   #ifdef UKU_220_V2
;;;1958   temp_SL=(signed long)adc_buff_[12];
;;;1959   temp_SL*=Kubat[1];
;;;1960   temp_SL/=400L;
;;;1961   bat[1]._Ub=(signed short)temp_SL;
;;;1962   #endif
;;;1963   
;;;1964   temp_SL=(signed long)adc_buff_[1];
001d98  f9b81002          LDRSH    r1,[r8,#2]  ; adc_buff_
;;;1965   temp_SL*=Kubatm[1];
001d9c  f9b20002          LDRSH    r0,[r2,#2]  ; Kubatm
001da0  fb00f001          MUL      r0,r0,r1
;;;1966   temp_SL/=700L;
001da4  fb90f0f3          SDIV     r0,r0,r3
;;;1967   bat[1]._Ubm=(signed short)temp_SL;
001da8  f8a40050          STRH     r0,[r4,#0x50]
;;;1968   #ifdef UKU_KONTUR
;;;1969   temp_SL=(signed long)adc_buff_[1];
;;;1970   temp_SL*=Kubatm[1];
;;;1971   temp_SL/=2000L;
;;;1972   bat[1]._Ubm=(signed short)temp_SL;
;;;1973   #endif
;;;1974   
;;;1975   #ifdef UKU_TELECORE2015
;;;1976   temp_SL=(signed long)adc_buff_[2];
;;;1977   temp_SL*=Kubat[0];
;;;1978   temp_SL/=2000L;
;;;1979   bat[0]._Ub=(signed short)temp_SL;
;;;1980   #endif
;;;1981   
;;;1982   /*
;;;1983   //“ÓÍË ·‡Ú‡ÂÈ
;;;1984   if(!mess_find_unvol(MESS2MATEMAT))
;;;1985   	{
;;;1986   	temp_SL=(signed long)ad7705_buff_[0];
;;;1987   	temp_SL-=(signed long)Kibat0[0];
;;;1988   	temp_SL*=(signed long)Kibat1[0];
;;;1989   	if((AUSW_MAIN==24120)||(AUSW_MAIN==24210))temp_SL/=300L;
;;;1990   	else temp_SL/=1000L;
;;;1991   	bat[0]._Ib=(signed short)temp_SL;
;;;1992   
;;;1993   	temp_SL=(signed long)ad7705_buff_[1];
;;;1994   	temp_SL-=(signed long)Kibat0[1];
;;;1995   	temp_SL*=(signed long)Kibat1[1];
;;;1996   	if((AUSW_MAIN==24120)||(AUSW_MAIN==24210))temp_SL/=300L;
;;;1997   	else temp_SL/=1000L;
;;;1998   	bat[1]._Ib=(signed short)temp_SL;
;;;1999   	}
;;;2000   */
;;;2001   
;;;2002   
;;;2003   //“ÓÍË ·‡Ú‡ÂÈ
;;;2004   if(!mess_find_unvol(MESS2MATEMAT))
001dac  f04f00dc          MOV      r0,#0xdc
001db0  f7fffffe          BL       mess_find_unvol
;;;2005   	{
;;;2006   	temp_SL=(signed long)ad7705_buff_[0];
;;;2007   	temp_SL-=(signed long)Kibat0[0];
;;;2008   	temp_SL*=(signed long)Kibat1[0];
;;;2009   	if((AUSW_MAIN==24120)||(AUSW_MAIN==24210))temp_SL/=300L;
;;;2010   	else if((AUSW_MAIN==22010)||(AUSW_MAIN==22035)||(AUSW_MAIN==22033))temp_SL/=2000L;
001db4  f2456a13          MOV      r10,#0x5613
001db8  bbe8              CBNZ     r0,|L1.7734|
001dba  f8df9378          LDR      r9,|L1.8500|
001dbe  f8b90000          LDRH     r0,[r9,#0]            ;2006  ; ad7705_buff_
001dc2  f8dfb374          LDR      r11,|L1.8504|
001dc6  f8bb1000          LDRH     r1,[r11,#0]           ;2007  ; Kibat0
001dca  eba00001          SUB      r0,r0,r1              ;2007
001dce  4adb              LDR      r2,|L1.8508|
001dd0  f9b21000          LDRSH    r1,[r2,#0]            ;2008  ; Kibat1
001dd4  fb01f100          MUL      r1,r1,r0              ;2008
001dd8  48d9              LDR      r0,|L1.8512|
001dda  f6456338          MOV      r3,#0x5e38            ;2009
001dde  f6456c92          MOV      r12,#0x5e92           ;2009
001de2  8800              LDRH     r0,[r0,#0]            ;2009  ; AUSW_MAIN
001de4  4298              CMP      r0,r3                 ;2009
001de6  d001              BEQ      |L1.7660|
001de8  4560              CMP      r0,r12                ;2009
001dea  d104              BNE      |L1.7670|
                  |L1.7660|
001dec  f44f7e96          MOV      lr,#0x12c             ;2009
001df0  fb91f1fe          SDIV     r1,r1,lr              ;2009
001df4  e00f              B        |L1.7702|
                  |L1.7670|
001df6  f5a04ea8          SUB      lr,r0,#0x5400
001dfa  f5be7efd          SUBS     lr,lr,#0x1fa
001dfe  d003              BEQ      |L1.7688|
001e00  4550              CMP      r0,r10
001e02  d001              BEQ      |L1.7688|
001e04  42b0              CMP      r0,r6
001e06  d102              BNE      |L1.7694|
                  |L1.7688|
001e08  fb91f1f5          SDIV     r1,r1,r5
001e0c  e003              B        |L1.7702|
                  |L1.7694|
;;;2011   	else temp_SL/=1000L;
001e0e  f44f7e7a          MOV      lr,#0x3e8
001e12  fb91f1fe          SDIV     r1,r1,lr
                  |L1.7702|
;;;2012   	#ifdef UKU_TELECORE2015
;;;2013   	temp_SL/=2L;
;;;2014   	//temp_SL=-temp_SL;
;;;2015   	#endif
;;;2016   	//#ifdef UKU_TELECORE2017
;;;2017   	//temp_SL/=-2L;
;;;2018   	//temp_SL=-temp_SL;
;;;2019   	//#endif
;;;2020   	bat[0]._Ib=(signed short)temp_SL;
001e16  8121              STRH     r1,[r4,#8]
;;;2021   
;;;2022   	temp_SL=(signed long)ad7705_buff_[1];
001e18  f8b91002          LDRH     r1,[r9,#2]  ; ad7705_buff_
;;;2023   	temp_SL-=(signed long)Kibat0[1];
001e1c  f8bb9002          LDRH     r9,[r11,#2]  ; Kibat0
001e20  eba10909          SUB      r9,r1,r9
;;;2024   	temp_SL*=(signed long)Kibat1[1];
001e24  f9b21002          LDRSH    r1,[r2,#2]  ; Kibat1
001e28  fb01f109          MUL      r1,r1,r9
;;;2025   	if((AUSW_MAIN==24120)||(AUSW_MAIN==24210))temp_SL/=300L;
001e2c  4298              CMP      r0,r3
001e2e  d001              BEQ      |L1.7732|
001e30  4560              CMP      r0,r12
001e32  d106              BNE      |L1.7746|
                  |L1.7732|
001e34  e000              B        |L1.7736|
                  |L1.7734|
001e36  e015              B        |L1.7780|
                  |L1.7736|
001e38  f44f7096          MOV      r0,#0x12c
001e3c  fb91f0f0          SDIV     r0,r1,r0
001e40  e00e              B        |L1.7776|
                  |L1.7746|
;;;2026   	else if((AUSW_MAIN==22010)||(AUSW_MAIN==22035)||(AUSW_MAIN==22033))temp_SL/=2000L;
001e42  f5a042aa          SUB      r2,r0,#0x5500
001e46  3afa              SUBS     r2,r2,#0xfa
001e48  d003              BEQ      |L1.7762|
001e4a  4550              CMP      r0,r10
001e4c  d001              BEQ      |L1.7762|
001e4e  42b0              CMP      r0,r6
001e50  d102              BNE      |L1.7768|
                  |L1.7762|
001e52  fb91f0f5          SDIV     r0,r1,r5
001e56  e003              B        |L1.7776|
                  |L1.7768|
;;;2027   	else temp_SL/=1000L;
001e58  f44f707a          MOV      r0,#0x3e8
001e5c  fb91f0f0          SDIV     r0,r1,r0
                  |L1.7776|
;;;2028   	bat[1]._Ib=(signed short)temp_SL;
001e60  f8a40054          STRH     r0,[r4,#0x54]
                  |L1.7780|
;;;2029   	}
;;;2030   
;;;2031   
;;;2032   
;;;2033   
;;;2034   
;;;2035   //“ÂÏÔÂ‡ÚÛ˚ ·‡Ú‡ÂÈ
;;;2036   
;;;2037   #ifdef UKU_KONTUR
;;;2038   if((adc_buff_[6]>800)&&(adc_buff_[6]<3800))bat[0]._nd=0;
;;;2039   else bat[0]._nd=1;
;;;2040   temp_SL=(signed long)adc_buff_[6];
;;;2041   temp_SL*=Ktbat[0];
;;;2042   temp_SL/=20000L;
;;;2043   temp_SL-=273L;
;;;2044   bat[0]._Tb=(signed short)temp_SL;
;;;2045   #else
;;;2046   if((adc_buff_[6]>800)&&(adc_buff_[6]<3800))bat[0]._nd=0;
001e64  f9b8000c          LDRSH    r0,[r8,#0xc]  ; adc_buff_
001e68  f64031b7          MOV      r1,#0xbb7
001e6c  4684              MOV      r12,r0
001e6e  f2a03021          SUB      r0,r0,#0x321
001e72  2300              MOVS     r3,#0
;;;2047   else bat[0]._nd=1;
001e74  f04f0901          MOV      r9,#1
001e78  9000              STR      r0,[sp,#0]            ;2046
001e7a  4288              CMP      r0,r1                 ;2046
001e7c  d201              BCS      |L1.7810|
001e7e  7323              STRB     r3,[r4,#0xc]          ;2046
001e80  e001              B        |L1.7814|
                  |L1.7810|
001e82  f884900c          STRB     r9,[r4,#0xc]
                  |L1.7814|
;;;2048   temp_SL=(signed long)adc_buff_[6];
;;;2049   temp_SL*=Ktbat[0];
001e86  4aaf              LDR      r2,|L1.8516|
001e88  f9b20000          LDRSH    r0,[r2,#0]  ; Ktbat
001e8c  fb00f00c          MUL      r0,r0,r12
;;;2050   temp_SL/=20000L;
001e90  f6446e20          MOV      lr,#0x4e20
001e94  fb90f0fe          SDIV     r0,r0,lr
;;;2051   temp_SL-=273L;
001e98  f2a01011          SUB      r0,r0,#0x111
;;;2052   bat[0]._Tb=(signed short)temp_SL;
001e9c  8160              STRH     r0,[r4,#0xa]
;;;2053   #endif
;;;2054   
;;;2055   #ifdef UKU_KONTUR
;;;2056   if((adc_buff_[7]>800)&&(adc_buff_[7]<3800))bat[1]._nd=0;
;;;2057   else bat[1]._nd=1;
;;;2058   temp_SL=(signed long)adc_buff_[7];
;;;2059   temp_SL*=Ktbat[1];
;;;2060   temp_SL/=20000L;
;;;2061   temp_SL-=273L;
;;;2062   bat[1]._Tb=(signed short)temp_SL;
;;;2063   #else
;;;2064   if((adc_buff_[7]>800)&&(adc_buff_[7]<3800))bat[1]._nd=0;
001e9e  f9b8000e          LDRSH    r0,[r8,#0xe]  ; adc_buff_
001ea2  f64031b7          MOV      r1,#0xbb7
001ea6  f2a03b21          SUB      r11,r0,#0x321
001eaa  458b              CMP      r11,r1
001eac  d202              BCS      |L1.7860|
001eae  f8843058          STRB     r3,[r4,#0x58]
001eb2  e001              B        |L1.7864|
                  |L1.7860|
;;;2065   else bat[1]._nd=1;
001eb4  f8849058          STRB     r9,[r4,#0x58]
                  |L1.7864|
;;;2066   temp_SL=(signed long)adc_buff_[7];
;;;2067   temp_SL*=Ktbat[1];
001eb8  f9b21002          LDRSH    r1,[r2,#2]  ; Ktbat
001ebc  4341              MULS     r1,r0,r1
;;;2068   temp_SL/=20000L;
001ebe  f6446020          MOV      r0,#0x4e20
001ec2  fb91f0f0          SDIV     r0,r1,r0
;;;2069   temp_SL-=273L;
001ec6  f2a01011          SUB      r0,r0,#0x111
;;;2070   bat[1]._Tb=(signed short)temp_SL;
001eca  4998              LDR      r1,|L1.8492|
001ecc  f8a10056          STRH     r0,[r1,#0x56]
;;;2071   #endif
;;;2072   
;;;2073   #ifdef UKU_6U
;;;2074   
;;;2075   if(NUMMAKB==2)
;;;2076   	{
;;;2077   	if(makb[0]._cnt<5)
;;;2078   		{
;;;2079   		if(makb[0]._T_nd[0]==0)
;;;2080   			{
;;;2081   			bat[0]._Tb=makb[0]._T[0];
;;;2082   			bat[0]._nd=0;
;;;2083   			}
;;;2084   		}
;;;2085   
;;;2086   	if(makb[1]._cnt<5)
;;;2087   		{
;;;2088   		if(makb[1]._T_nd[0]==0)
;;;2089   			{
;;;2090   			bat[1]._Tb=makb[1]._T[0];
;;;2091   			bat[1]._nd=0;
;;;2092   			}
;;;2093   		}
;;;2094   
;;;2095   	}
;;;2096   else if(NUMMAKB==4)
;;;2097   	{
;;;2098   	signed short temp_t;
;;;2099   	temp_t=-20;
;;;2100   	if(makb[0]._cnt<5)
;;;2101   		{
;;;2102   		if(makb[0]._T_nd[0]==0)
;;;2103   			{
;;;2104   			temp_t=makb[0]._T[0];
;;;2105   			bat[0]._nd=0;
;;;2106   			}
;;;2107   		}
;;;2108   	if(makb[1]._cnt<5)
;;;2109   		{
;;;2110   		if(makb[1]._T_nd[0]==0)
;;;2111   			{
;;;2112   			if(temp_t<makb[1]._T[0])
;;;2113   				{
;;;2114   				bat[0]._nd=0;
;;;2115   				temp_t=makb[1]._T[0];
;;;2116   				}
;;;2117   			}
;;;2118   		}
;;;2119   	if(temp_t!=-20)bat[0]._Tb = temp_t;
;;;2120   
;;;2121    	temp_t=-20;
;;;2122   	if(makb[2]._cnt<5)
;;;2123   		{
;;;2124   		if(makb[2]._T_nd[0]==0)
;;;2125   			{
;;;2126   			temp_t=makb[2]._T[0];
;;;2127   			bat[1]._nd=0;
;;;2128   			}
;;;2129   		}
;;;2130   	if(makb[3]._cnt<5)
;;;2131   		{
;;;2132   		if(makb[3]._T_nd[0]==0)
;;;2133   			{
;;;2134   			if(temp_t<makb[3]._T[0])
;;;2135   				{
;;;2136   				bat[1]._nd=0;
;;;2137   				temp_t=makb[3]._T[0];
;;;2138   				}
;;;2139   			}
;;;2140   		}
;;;2141   	if(temp_t!=-20)bat[1]._Tb = temp_t;
;;;2142   	}
;;;2143   
;;;2144   #endif
;;;2145   
;;;2146   
;;;2147   //Õ‡ÔˇÊÂÌËÂ Ì‡„ÛÁÍË
;;;2148   temp_SL=(signed long)adc_buff_[2];
001ed0  f9b81004          LDRSH    r1,[r8,#4]  ; adc_buff_
;;;2149   temp_SL*=Kuload;
001ed4  489c              LDR      r0,|L1.8520|
001ed6  f9b00000          LDRSH    r0,[r0,#0]  ; Kuload
001eda  fb01f000          MUL      r0,r1,r0
;;;2150   temp_SL/=2000L;
001ede  f44f62fa          MOV      r2,#0x7d0
001ee2  fb90f0f2          SDIV     r0,r0,r2
;;;2151   load_U=(signed short)temp_SL;
001ee6  f8dfe264          LDR      lr,|L1.8524|
001eea  f8ae0000          STRH     r0,[lr,#0]
;;;2152   
;;;2153   #ifdef UKU_220 
;;;2154   //Õ‡ÔˇÊÂÌËÂ Ì‡„ÛÁÍË
;;;2155   temp_SL=(signed long)adc_buff_[2];
;;;2156   temp_SL*=Kuload;
;;;2157   temp_SL/=350L;
;;;2158   load_U=(signed short)temp_SL;
;;;2159   #endif
;;;2160   
;;;2161   #ifdef UKU_220_V2 
;;;2162   //Õ‡ÔˇÊÂÌËÂ Ì‡„ÛÁÍË
;;;2163   temp_SL=(signed long)adc_buff_[2];
;;;2164   temp_SL*=Kuload;
;;;2165   temp_SL/=350L;
;;;2166   load_U=(signed short)temp_SL;
;;;2167   #endif
;;;2168   
;;;2169   #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;2170   //Õ‡ÔˇÊÂÌËÂ ¯ËÌ˚
;;;2171   temp_SL=(signed long)adc_buff_[1];
001eee  f9b82002          LDRSH    r2,[r8,#2]  ; adc_buff_
;;;2172   temp_SL*=Kuout;
001ef2  4897              LDR      r0,|L1.8528|
001ef4  f9b00000          LDRSH    r0,[r0,#0]  ; Kuout
001ef8  fb02f200          MUL      r2,r2,r0
;;;2173   if(AUSW_MAIN==22010)temp_SL/=400L;
001efc  4890              LDR      r0,|L1.8512|
001efe  f24554fa          MOV      r4,#0x55fa
001f02  f44f75c8          MOV      r5,#0x190
001f06  8800              LDRH     r0,[r0,#0]  ; AUSW_MAIN
001f08  42a0              CMP      r0,r4
001f0a  d102              BNE      |L1.7954|
001f0c  fb92f2f5          SDIV     r2,r2,r5
001f10  e003              B        |L1.7962|
                  |L1.7954|
;;;2174   else temp_SL/=500L;
001f12  f44f7bfa          MOV      r11,#0x1f4
001f16  fb92f2fb          SDIV     r2,r2,r11
                  |L1.7962|
;;;2175   out_U=(signed short)temp_SL;
001f1a  fa0ffb82          SXTH     r11,r2
001f1e  4a8d              LDR      r2,|L1.8532|
001f20  f8a2b000          STRH     r11,[r2,#0]
;;;2176   load_U=out_U;
001f24  f8aeb000          STRH     r11,[lr,#0]
;;;2177   
;;;2178   //Õ‡ÔˇÊÂÌËÂ ‚˚ÔˇÏËÚÂÎÂÈ
;;;2179   temp_SL=(signed long)adc_buff_[2];
;;;2180   temp_SL*=Kubps;
001f28  4a8b              LDR      r2,|L1.8536|
001f2a  f9b22000          LDRSH    r2,[r2,#0]  ; Kubps
001f2e  fb01f102          MUL      r1,r1,r2
;;;2181   if(AUSW_MAIN==22010)temp_SL/=400L;
001f32  d102              BNE      |L1.7994|
001f34  fb91f1f5          SDIV     r1,r1,r5
001f38  e003              B        |L1.8002|
                  |L1.7994|
;;;2182   else temp_SL/=500L;
001f3a  f44f72fa          MOV      r2,#0x1f4
001f3e  fb91f1f2          SDIV     r1,r1,r2
                  |L1.8002|
;;;2183   bps_U=(signed short)temp_SL;
001f42  4d86              LDR      r5,|L1.8540|
001f44  b209              SXTH     r1,r1
001f46  8029              STRH     r1,[r5,#0]
;;;2184   
;;;2185   if(bps_U<100)
001f48  2964              CMP      r1,#0x64
001f4a  da18              BGE      |L1.8062|
;;;2186   	{
;;;2187   	char i;
;;;2188   	for(i=0;i<NUMIST;i++)
001f4c  f04f0100          MOV      r1,#0
001f50  4a83              LDR      r2,|L1.8544|
001f52  f8dfe210          LDR      lr,|L1.8548|
001f56  f9b28000          LDRSH    r8,[r2,#0]
001f5a  e00e              B        |L1.8058|
                  |L1.8028|
;;;2189   		{
;;;2190   		if(bps[i]._Uin>bps_U)bps_U=bps[i]._Uin;
001f5c  ebc102c1          RSB      r2,r1,r1,LSL #3
001f60  eb021201          ADD      r2,r2,r1,LSL #4
001f64  eb0e0282          ADD      r2,lr,r2,LSL #2
001f68  f9b54000          LDRSH    r4,[r5,#0]  ; bps_U
001f6c  6a12              LDR      r2,[r2,#0x20]
001f6e  42a2              CMP      r2,r4
001f70  dd00              BLE      |L1.8052|
001f72  802a              STRH     r2,[r5,#0]
                  |L1.8052|
001f74  f1010101          ADD      r1,r1,#1              ;2188
001f78  b2c9              UXTB     r1,r1                 ;2188
                  |L1.8058|
001f7a  4541              CMP      r1,r8                 ;2188
001f7c  dbee              BLT      |L1.8028|
                  |L1.8062|
;;;2191   		}
;;;2192   	}
;;;2193   
;;;2194   //—ÛÏÏ‡Ì˚È ÚÓÍ ‚˚ÔˇÏËÚÂÎÂÈ
;;;2195   temp_SL=0;
001f7e  f04f0500          MOV      r5,#0
;;;2196   for (i=0;i<NUMIST;i++)
001f82  4629              MOV      r1,r5
001f84  4a76              LDR      r2,|L1.8544|
001f86  4c77              LDR      r4,|L1.8548|
001f88  f9b22000          LDRSH    r2,[r2,#0]            ;2188
001f8c  e00b              B        |L1.8102|
                  |L1.8078|
;;;2197   	{
;;;2198   	temp_SL+=((signed long)bps[i]._Ii);
001f8e  ebc108c1          RSB      r8,r1,r1,LSL #3
001f92  eb081801          ADD      r8,r8,r1,LSL #4
001f96  eb040888          ADD      r8,r4,r8,LSL #2
001f9a  f8d88024          LDR      r8,[r8,#0x24]
001f9e  4445              ADD      r5,r5,r8
001fa0  f1010101          ADD      r1,r1,#1              ;2196
001fa4  b2c9              UXTB     r1,r1                 ;2196
                  |L1.8102|
001fa6  4291              CMP      r1,r2                 ;2196
001fa8  dbf1              BLT      |L1.8078|
;;;2199   	}
;;;2200   bps_I=(signed short)temp_SL;
001faa  496f              LDR      r1,|L1.8552|
001fac  800d              STRH     r5,[r1,#0]
;;;2201   
;;;2202   
;;;2203   #endif
;;;2204   
;;;2205   
;;;2206   #ifdef UKU_KONTUR
;;;2207   //¬ÌÂ¯ÌËÈ ‰‡Ú˜ËÍ ÚÂÏÔÂ‡ÚÛ˚ π1(ÚÂÏÔÂ‡ÚÛ‡ ‚ÌÂ¯ÌÂ„Ó ‚ÓÁ‰Ûı‡)
;;;2208   if((adc_buff_[5]>800)&&(adc_buff_[5]<3800))ND_EXT[0]=0;
;;;2209   else ND_EXT[0]=1;
;;;2210   temp_SL=(signed long)adc_buff_[5];
;;;2211   temp_SL*=Ktext[0];
;;;2212   temp_SL/=20000L;
;;;2213   temp_SL-=273L;
;;;2214   t_ext[0]=(signed short)temp_SL;
;;;2215   #else 
;;;2216   //¬ÌÂ¯ÌËÈ ‰‡Ú˜ËÍ ÚÂÏÔÂ‡ÚÛ˚ π1(ÚÂÏÔÂ‡ÚÛ‡ ‚ÌÂ¯ÌÂ„Ó ‚ÓÁ‰Ûı‡)
;;;2217   if((adc_buff_[5]>800)&&(adc_buff_[5]<3800))ND_EXT[0]=0;
001fae  495d              LDR      r1,|L1.8484|
001fb0  f8df81b8          LDR      r8,|L1.8556|
001fb4  f9b1500a          LDRSH    r5,[r1,#0xa]  ; adc_buff_
001fb8  f64031b7          MOV      r1,#0xbb7
001fbc  f2a53e21          SUB      lr,r5,#0x321
001fc0  458e              CMP      lr,r1
001fc2  d202              BCS      |L1.8138|
001fc4  f8883000          STRB     r3,[r8,#0]
001fc8  e001              B        |L1.8142|
                  |L1.8138|
;;;2218   else ND_EXT[0]=1;
001fca  f8889000          STRB     r9,[r8,#0]
                  |L1.8142|
;;;2219   temp_SL=(signed long)adc_buff_[5];
;;;2220   temp_SL*=Ktext[0];
001fce  4968              LDR      r1,|L1.8560|
001fd0  f9b11000          LDRSH    r1,[r1,#0]  ; Ktext
001fd4  434d              MULS     r5,r1,r5
;;;2221   temp_SL/=20000L;
001fd6  f6446e20          MOV      lr,#0x4e20
001fda  fb95f5fe          SDIV     r5,r5,lr
;;;2222   temp_SL-=273L;
001fde  f2a51511          SUB      r5,r5,#0x111
;;;2223   t_ext[0]=(signed short)temp_SL;
001fe2  f8dfe190          LDR      lr,|L1.8564|
001fe6  f8ae5000          STRH     r5,[lr,#0]
;;;2224   /*
;;;2225   if((adc_buff_[6]>800)&&(adc_buff_[6]<3800))ND_EXT[1]=0;
;;;2226   else ND_EXT[1]=1;
;;;2227   temp_SL=(signed long)adc_buff_[6];
;;;2228   temp_SL*=Ktext[1];
;;;2229   temp_SL/=20000L;
;;;2230   temp_SL-=273L;
;;;2231   t_ext[1]=(signed short)temp_SL;	*/
;;;2232   #endif
;;;2233   
;;;2234   #ifdef UKU_220
;;;2235   
;;;2236   //¬ÌÂ¯ÌËÈ ‰‡Ú˜ËÍ ÚÂÏÔÂ‡ÚÛ˚ π2(ÚÂÏÔÂ‡ÚÛ‡ ÓÚÒÂÍ‡ ›œ”)
;;;2237   if((adc_buff_[3]>800)&&(adc_buff_[3]<3800))ND_EXT[1]=0;
;;;2238   else ND_EXT[1]=1;
;;;2239   temp_SL=(signed long)adc_buff_[3];
;;;2240   temp_SL*=Ktext[1];
;;;2241   temp_SL/=20000L;
;;;2242   temp_SL-=273L;
;;;2243   t_ext[1]=(signed short)temp_SL;
;;;2244   
;;;2245   //¬ÌÂ¯ÌËÈ ‰‡Ú˜ËÍ ÚÂÏÔÂ‡ÚÛ˚ π3(ÚÂÏÔÂ‡ÚÛ‡ ÓÚÒÂÍ‡ MSAN)
;;;2246   if((adc_buff_[10]>800)&&(adc_buff_[10]<3800))ND_EXT[2]=0;
;;;2247   else ND_EXT[2]=1;
;;;2248   temp_SL=(signed long)adc_buff_[10];
;;;2249   temp_SL*=Ktext[2];
;;;2250   temp_SL/=20000L;
;;;2251   temp_SL-=273L;
;;;2252   t_ext[2]=(signed short)temp_SL;
;;;2253   
;;;2254   #else
;;;2255   
;;;2256   
;;;2257   #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;2258   
;;;2259   //¬ÌÂ¯ÌËÈ ‰‡Ú˜ËÍ ÚÂÏÔÂ‡ÚÛ˚ 
;;;2260   if((adc_buff_[6]>800)&&(adc_buff_[6]<3800))ND_EXT[0]=0;
001fea  9d00              LDR      r5,[sp,#0]
001fec  f6403eb7          MOV      lr,#0xbb7
001ff0  4575              CMP      r5,lr
001ff2  d202              BCS      |L1.8186|
001ff4  f8883000          STRB     r3,[r8,#0]
001ff8  e001              B        |L1.8190|
                  |L1.8186|
;;;2261   else ND_EXT[0]=1;
001ffa  f8889000          STRB     r9,[r8,#0]
                  |L1.8190|
;;;2262   temp_SL=(signed long)adc_buff_[6];
;;;2263   temp_SL*=Ktext[0];
001ffe  fb01f10c          MUL      r1,r1,r12
;;;2264   temp_SL/=20000L;
002002  f6446520          MOV      r5,#0x4e20
002006  fb91f1f5          SDIV     r1,r1,r5
;;;2265   temp_SL-=273L;
00200a  f2a11111          SUB      r1,r1,#0x111
;;;2266   t_ext[0]=(signed short)temp_SL;
00200e  4d59              LDR      r5,|L1.8564|
002010  8029              STRH     r1,[r5,#0]
;;;2267   
;;;2268   #else
;;;2269   
;;;2270   
;;;2271   
;;;2272   //¬ÌÂ¯ÌËÈ ‰‡Ú˜ËÍ ÚÂÏÔÂ‡ÚÛ˚ π2(ÚÂÏÔÂ‡ÚÛ‡ ÓÚÒÂÍ‡ ›œ”)
;;;2273   if((adc_buff_[6]>800)&&(adc_buff_[6]<3800))ND_EXT[1]=0;
;;;2274   else ND_EXT[1]=1;
;;;2275   temp_SL=(signed long)adc_buff_[6];
;;;2276   temp_SL*=Ktext[1];
;;;2277   temp_SL/=20000L;
;;;2278   temp_SL-=273L;
;;;2279   t_ext[1]=(signed short)temp_SL;
;;;2280   
;;;2281   //¬ÌÂ¯ÌËÈ ‰‡Ú˜ËÍ ÚÂÏÔÂ‡ÚÛ˚ π3(ÚÂÏÔÂ‡ÚÛ‡ ÓÚÒÂÍ‡ MSAN)
;;;2282   if((adc_buff_[3]>800)&&(adc_buff_[3]<3800))ND_EXT[2]=0;
;;;2283   else ND_EXT[2]=1;
;;;2284   temp_SL=(signed long)adc_buff_[3];
;;;2285   temp_SL*=Ktext[2];
;;;2286   temp_SL/=20000L;
;;;2287   temp_SL-=273L;
;;;2288   t_ext[2]=(signed short)temp_SL;
;;;2289   
;;;2290   #endif
;;;2291   #endif
;;;2292   
;;;2293   #ifdef UKU_220_V2
;;;2294   
;;;2295   //¬ÌÂ¯ÌËÈ ‰‡Ú˜ËÍ ÚÂÏÔÂ‡ÚÛ˚ π2(ÚÂÏÔÂ‡ÚÛ‡ ÓÚÒÂÍ‡ ›œ”)
;;;2296   if((adc_buff_[3]>800)&&(adc_buff_[3]<3800))ND_EXT[1]=0;
;;;2297   else ND_EXT[1]=1;
;;;2298   temp_SL=(signed long)adc_buff_[3];
;;;2299   temp_SL*=Ktext[1];
;;;2300   temp_SL/=20000L;
;;;2301   temp_SL-=273L;
;;;2302   t_ext[1]=(signed short)temp_SL;
;;;2303   
;;;2304   //¬ÌÂ¯ÌËÈ ‰‡Ú˜ËÍ ÚÂÏÔÂ‡ÚÛ˚ π3(ÚÂÏÔÂ‡ÚÛ‡ ÓÚÒÂÍ‡ MSAN)
;;;2305   if((adc_buff_[10]>800)&&(adc_buff_[10]<3800))ND_EXT[2]=0;
;;;2306   else ND_EXT[2]=1;
;;;2307   temp_SL=(signed long)adc_buff_[10];
;;;2308   temp_SL*=Ktext[2];
;;;2309   temp_SL/=20000L;
;;;2310   temp_SL-=273L;
;;;2311   t_ext[2]=(signed short)temp_SL;
;;;2312   
;;;2313   #else
;;;2314   
;;;2315   #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;2316   //“ÓÍ ·‡Ú‡ÂË
;;;2317   if(bps[8]._device==dIBAT_METR)
002012  f89412e0          LDRB     r1,[r4,#0x2e0]  ; bps
;;;2318   	{
;;;2319   	ibat_metr_buff_[0]=((signed long)bps[8]._buff[0])+(((signed long)bps[8]._buff[1])<<8);
;;;2320   	ibat_metr_buff_[1]=((signed long)bps[8]._buff[2])+(((signed long)bps[8]._buff[3])<<8);
;;;2321   	bIBAT_SMKLBR=((signed short)bps[8]._buff[4])+(((signed short)bps[8]._buff[5])<<8);
;;;2322   
;;;2323   	if(!bIBAT_SMKLBR)
;;;2324   		{
;;;2325   		signed long temp_SL;
;;;2326   		temp_SL=(signed long)ibat_metr_buff_[0];
;;;2327   		temp_SL-=(signed long)ibat_metr_buff_[1];
;;;2328   		temp_SL*=(signed long)Kibat1[0];
;;;2329   		if((AUSW_MAIN==22010)||(AUSW_MAIN==22011)||(AUSW_MAIN==22035)||(AUSW_MAIN==22033)||(AUSW_MAIN==22063)||(AUSW_MAIN==22023)||(AUSW_MAIN==22043)||(AUSW_MAIN==22044))temp_SL/=2000L;
;;;2330   	
;;;2331   		Ib_ips_termokompensat =(signed short)temp_SL;
002016  f8dfc160          LDR      r12,|L1.8568|
00201a  2909              CMP      r1,#9                 ;2317
00201c  d13f              BNE      |L1.8350|
00201e  f89412e6          LDRB     r1,[r4,#0x2e6]        ;2319  ; bps
002022  f89452e7          LDRB     r5,[r4,#0x2e7]        ;2319  ; bps
002026  f8dfe154          LDR      lr,|L1.8572|
00202a  eb012105          ADD      r1,r1,r5,LSL #8       ;2319
00202e  f8ce1000          STR      r1,[lr,#0]            ;2319  ; ibat_metr_buff_
002032  f89452e8          LDRB     r5,[r4,#0x2e8]        ;2320  ; bps
002036  f89492e9          LDRB     r9,[r4,#0x2e9]        ;2320  ; bps
00203a  eb052509          ADD      r5,r5,r9,LSL #8       ;2320
00203e  f8ce5004          STR      r5,[lr,#4]            ;2320  ; ibat_metr_buff_
002042  f89492ea          LDRB     r9,[r4,#0x2ea]        ;2321  ; bps
002046  f894e2eb          LDRB     lr,[r4,#0x2eb]        ;2321  ; bps
00204a  eb09290e          ADD      r9,r9,lr,LSL #8       ;2321
00204e  f8dfe130          LDR      lr,|L1.8576|
002052  fa0ff989          SXTH     r9,r9                 ;2321
002056  f8ae9000          STRH     r9,[lr,#0]            ;2321
00205a  f1b90f00          CMP      r9,#0                 ;2323
00205e  d11e              BNE      |L1.8350|
002060  eba10505          SUB      r5,r1,r5              ;2327
002064  4935              LDR      r1,|L1.8508|
002066  f9b11000          LDRSH    r1,[r1,#0]            ;2328  ; Kibat1
00206a  fb01f105          MUL      r1,r1,r5              ;2328
00206e  f5a045aa          SUB      r5,r0,#0x5500         ;2329
002072  3dfa              SUBS     r5,r5,#0xfa           ;2329
002074  d00d              BEQ      |L1.8338|
002076  1e6d              SUBS     r5,r5,#1              ;2329
002078  d00b              BEQ      |L1.8338|
00207a  4550              CMP      r0,r10                ;2329
00207c  d009              BEQ      |L1.8338|
00207e  42b0              CMP      r0,r6                 ;2329
002080  d007              BEQ      |L1.8338|
002082  3d34              SUBS     r5,r5,#0x34           ;2329
002084  d005              BEQ      |L1.8338|
002086  3528              ADDS     r5,r5,#0x28           ;2329
002088  d003              BEQ      |L1.8338|
00208a  3d14              SUBS     r5,r5,#0x14           ;2329
00208c  d001              BEQ      |L1.8338|
00208e  1e6d              SUBS     r5,r5,#1              ;2329
002090  d103              BNE      |L1.8346|
                  |L1.8338|
002092  f44f65fa          MOV      r5,#0x7d0             ;2329
002096  fb91f1f5          SDIV     r1,r1,r5              ;2329
                  |L1.8346|
00209a  f8ac1000          STRH     r1,[r12,#0]
                  |L1.8350|
;;;2332   		}
;;;2333   	}
;;;2334   
;;;2335   bat[0]._Ub=load_U;
00209e  4d23              LDR      r5,|L1.8492|
0020a0  f8a5b002          STRH     r11,[r5,#2]
;;;2336   if(AUSW_MAIN==22018) Ib_ips_termokompensat=bat[0]._Ib;
0020a4  f5a041ac          SUB      r1,r0,#0x5600
0020a8  3902              SUBS     r1,#2
0020aa  d103              BNE      |L1.8372|
0020ac  8928              LDRH     r0,[r5,#8]  ; bat
0020ae  f8ac0000          STRH     r0,[r12,#0]
0020b2  e002              B        |L1.8378|
                  |L1.8372|
;;;2337   else bat[0]._Ib=Ib_ips_termokompensat;
0020b4  f8bc0000          LDRH     r0,[r12,#0]  ; Ib_ips_termokompensat
0020b8  8128              STRH     r0,[r5,#8]
                  |L1.8378|
;;;2338   
;;;2339   #endif
;;;2340   #endif
;;;2341   
;;;2342   
;;;2343   #ifdef UKU_TELECORE2015
;;;2344   
;;;2345   //¬ÌÂ¯ÌËÈ ‰‡Ú˜ËÍ ÚÂÏÔÂ‡ÚÛ˚ π1
;;;2346   if((adc_buff_[7]>800)&&(adc_buff_[7]<3800))ND_EXT[0]=0;
;;;2347   else ND_EXT[0]=1;
;;;2348   temp_SL=(signed long)adc_buff_[7];
;;;2349   temp_SL*=Ktext[0];
;;;2350   temp_SL/=20000L;
;;;2351   temp_SL-=273L;
;;;2352   t_ext[0]=(signed short)temp_SL;
;;;2353   
;;;2354   
;;;2355   //¬ÌÂ¯ÌËÈ ‰‡Ú˜ËÍ ÚÂÏÔÂ‡ÚÛ˚ π2
;;;2356   if((adc_buff_[6]>800)&&(adc_buff_[6]<3800))ND_EXT[1]=0;
;;;2357   else ND_EXT[1]=1;
;;;2358   temp_SL=(signed long)adc_buff_[6];
;;;2359   temp_SL*=Ktext[1];
;;;2360   temp_SL/=20000L;
;;;2361   temp_SL-=273L;
;;;2362   t_ext[1]=(signed short)temp_SL;
;;;2363   
;;;2364   #endif
;;;2365   
;;;2366   #ifdef UKU_TELECORE2017
;;;2367   
;;;2368   //¬ÌÂ¯ÌËÈ ‰‡Ú˜ËÍ ÚÂÏÔÂ‡ÚÛ˚ π1
;;;2369   if((adc_buff_[7]>800)&&(adc_buff_[7]<3800))ND_EXT[0]=0;
;;;2370   else ND_EXT[0]=1;
;;;2371   temp_SL=(signed long)adc_buff_[7];
;;;2372   temp_SL*=Ktext[0];
;;;2373   temp_SL/=20000L;
;;;2374   temp_SL-=273L;
;;;2375   t_ext[0]=(signed short)temp_SL;
;;;2376   
;;;2377   
;;;2378   //¬ÌÂ¯ÌËÈ ‰‡Ú˜ËÍ ÚÂÏÔÂ‡ÚÛ˚ π2
;;;2379   if((adc_buff_[6]>800)&&(adc_buff_[6]<3800))ND_EXT[1]=0;
;;;2380   else ND_EXT[1]=1;
;;;2381   temp_SL=(signed long)adc_buff_[6];
;;;2382   temp_SL*=Ktext[1];
;;;2383   temp_SL/=20000L;
;;;2384   temp_SL-=273L;
;;;2385   t_ext[1]=(signed short)temp_SL;
;;;2386   
;;;2387   #endif
;;;2388   
;;;2389   //Ì‡ÔˇÊÂÌËÂ ‚‚Ó‰‡
;;;2390   temp_SL=(signed long)adc_buff_ext_[0];
0020ba  f8df90c8          LDR      r9,|L1.8580|
0020be  f8b91000          LDRH     r1,[r9,#0]  ; adc_buff_ext_
;;;2391   temp_SL*=Kunet_ext[0];
0020c2  f8dfa0c4          LDR      r10,|L1.8584|
0020c6  f9ba0000          LDRSH    r0,[r10,#0]  ; Kunet_ext
0020ca  4348              MULS     r0,r1,r0
;;;2392   temp_SL/=4000L;
0020cc  f44f667a          MOV      r6,#0xfa0
0020d0  fb90f0f6          SDIV     r0,r0,r6
;;;2393   Uvv[0]=(signed short)temp_SL;
0020d4  492d              LDR      r1,|L1.8588|
0020d6  b280              UXTH     r0,r0
0020d8  8008              STRH     r0,[r1,#0]
;;;2394   if(Uvv[0]<100) Uvv0=Uvv[0];
0020da  f8dfe0b4          LDR      lr,|L1.8592|
0020de  2864              CMP      r0,#0x64
0020e0  d202              BCS      |L1.8424|
0020e2  f8ae0000          STRH     r0,[lr,#0]
0020e6  e003              B        |L1.8432|
                  |L1.8424|
;;;2395   else Uvv0=net_U;
0020e8  480b              LDR      r0,|L1.8472|
0020ea  8800              LDRH     r0,[r0,#0]  ; net_U
0020ec  f8ae0000          STRH     r0,[lr,#0]
                  |L1.8432|
;;;2396   
;;;2397   //Ì‡ÔˇÊÂÌËÂ Ô˝Ò
;;;2398   temp_SL=(signed long)adc_buff_ext_[1];
0020f0  f8b99002          LDRH     r9,[r9,#2]  ; adc_buff_ext_
;;;2399   temp_SL*=Kunet_ext[1];
0020f4  f9ba0002          LDRSH    r0,[r10,#2]  ; Kunet_ext
0020f8  fb00f009          MUL      r0,r0,r9
;;;2400   temp_SL/=4000L;
0020fc  fb90f0f6          SDIV     r0,r0,r6
;;;2401   Uvv[1]=(signed short)temp_SL;
002100  8048              STRH     r0,[r1,#2]
;;;2402   
;;;2403   
;;;2404   //Ì‡ÔˇÊÂÌËÂ ‚‚Ó‰‡ ÚÂıÙ‡ÁÌÓÂ
;;;2405   temp_SL=(signed long)eb2_data_short[0];
002102  4924              LDR      r1,|L1.8596|
002104  f9b10000          LDRSH    r0,[r1,#0]  ; eb2_data_short
;;;2406   temp_SL*=Kvv_eb2[0];
002108  4e23              LDR      r6,|L1.8600|
00210a  f9b69000          LDRSH    r9,[r6,#0]  ; Kvv_eb2
00210e  e045              B        |L1.8604|
                  |L1.8464|
                          DCD      Kunet
                  |L1.8468|
                          DCD      ||area_number.23||
                  |L1.8472|
                          DCD      net_U
                  |L1.8476|
                          DCD      net_F
                  |L1.8480|
                          DCD      net_F3
                  |L1.8484|
                          DCD      ||.bss||+0x400
                  |L1.8488|
                          DCD      Kubat
                  |L1.8492|
                          DCD      bat
                  |L1.8496|
                          DCD      Kubatm
                  |L1.8500|
                          DCD      ad7705_buff_
                  |L1.8504|
                          DCD      Kibat0
                  |L1.8508|
                          DCD      Kibat1
                  |L1.8512|
                          DCD      AUSW_MAIN
                  |L1.8516|
                          DCD      Ktbat
                  |L1.8520|
                          DCD      Kuload
                  |L1.8524|
                          DCD      load_U
                  |L1.8528|
                          DCD      Kuout
                  |L1.8532|
                          DCD      out_U
                  |L1.8536|
                          DCD      Kubps
                  |L1.8540|
                          DCD      bps_U
                  |L1.8544|
                          DCD      NUMIST
                  |L1.8548|
                          DCD      bps
                  |L1.8552|
                          DCD      bps_I
                  |L1.8556|
                          DCD      ND_EXT
                  |L1.8560|
                          DCD      Ktext
                  |L1.8564|
                          DCD      t_ext
                  |L1.8568|
                          DCD      Ib_ips_termokompensat
                  |L1.8572|
                          DCD      ibat_metr_buff_
                  |L1.8576|
                          DCD      bIBAT_SMKLBR
                  |L1.8580|
                          DCD      adc_buff_ext_
                  |L1.8584|
                          DCD      Kunet_ext
                  |L1.8588|
                          DCD      Uvv
                  |L1.8592|
                          DCD      Uvv0
                  |L1.8596|
                          DCD      eb2_data_short
                  |L1.8600|
                          DCD      Kvv_eb2
                  |L1.8604|
00219c  fb09f900          MUL      r9,r9,r0
;;;2407   temp_SL/=6000L;
0021a0  f2417070          MOV      r0,#0x1770
0021a4  fb99faf0          SDIV     r10,r9,r0
;;;2408   Uvv_eb2[0]=(signed short)temp_SL;
0021a8  f8df9438          LDR      r9,|L1.9700|
0021ac  f8a9a000          STRH     r10,[r9,#0]
;;;2409   
;;;2410   temp_SL=(signed long)eb2_data_short[1];
0021b0  f9b1e002          LDRSH    lr,[r1,#2]  ; eb2_data_short
;;;2411   temp_SL*=Kvv_eb2[1];
0021b4  f9b6a002          LDRSH    r10,[r6,#2]  ; Kvv_eb2
0021b8  fb0afa0e          MUL      r10,r10,lr
;;;2412   temp_SL/=6000L;
0021bc  fb9afaf0          SDIV     r10,r10,r0
;;;2413   Uvv_eb2[1]=(signed short)temp_SL;
0021c0  f8a9a002          STRH     r10,[r9,#2]
;;;2414   
;;;2415   temp_SL=(signed long)eb2_data_short[2];
0021c4  f9b1a004          LDRSH    r10,[r1,#4]  ; eb2_data_short
;;;2416   temp_SL*=Kvv_eb2[2];
0021c8  f9b66004          LDRSH    r6,[r6,#4]  ; Kvv_eb2
0021cc  fb06f60a          MUL      r6,r6,r10
;;;2417   temp_SL/=6000L;
0021d0  fb96f6f0          SDIV     r6,r6,r0
;;;2418   Uvv_eb2[2]=(signed short)temp_SL;
0021d4  f8a96004          STRH     r6,[r9,#4]
;;;2419   
;;;2420   //Ì‡ÔˇÊÂÌËÂ Ô˝Ò ÚÂıÙ‡ÁÌÓÂ
;;;2421   temp_SL=(signed long)eb2_data_short[3];
0021d8  f9b1a006          LDRSH    r10,[r1,#6]  ; eb2_data_short
;;;2422   temp_SL*=Kpes_eb2[0];
0021dc  f8df9408          LDR      r9,|L1.9704|
0021e0  f9b96000          LDRSH    r6,[r9,#0]  ; Kpes_eb2
0021e4  fb06f60a          MUL      r6,r6,r10
;;;2423   temp_SL/=6000L;
0021e8  fb96faf0          SDIV     r10,r6,r0
;;;2424   Upes_eb2[0]=(signed short)temp_SL;
0021ec  4eff              LDR      r6,|L1.9708|
0021ee  f8a6a000          STRH     r10,[r6,#0]
;;;2425   
;;;2426   temp_SL=(signed long)eb2_data_short[4];
0021f2  f9b1e008          LDRSH    lr,[r1,#8]  ; eb2_data_short
;;;2427   temp_SL*=Kpes_eb2[1];
0021f6  f9b9a002          LDRSH    r10,[r9,#2]  ; Kpes_eb2
0021fa  fb0afa0e          MUL      r10,r10,lr
;;;2428   temp_SL/=6000L;
0021fe  fb9afaf0          SDIV     r10,r10,r0
;;;2429   Upes_eb2[1]=(signed short)temp_SL;
002202  f8a6a002          STRH     r10,[r6,#2]
;;;2430   
;;;2431   temp_SL=(signed long)eb2_data_short[5];
002206  f9b1100a          LDRSH    r1,[r1,#0xa]  ; eb2_data_short
;;;2432   temp_SL*=Kpes_eb2[2];
00220a  f9b99004          LDRSH    r9,[r9,#4]  ; Kpes_eb2
00220e  fb09f901          MUL      r9,r9,r1
;;;2433   temp_SL/=6000L;
002212  fb99f0f0          SDIV     r0,r9,r0
;;;2434   Upes_eb2[2]=(signed short)temp_SL;
002216  80b0              STRH     r0,[r6,#4]
;;;2435   
;;;2436   //¬˚˜ËÒÎÂÌËÂ ÚÂÏÔÂ‡ÚÛ˚ ¯Í‡Ù‡
;;;2437   
;;;2438   ibt._T[0]=t_ext[1]+273;
002218  48f5              LDR      r0,|L1.9712|
00221a  4ef6              LDR      r6,|L1.9716|
00221c  8841              LDRH     r1,[r0,#2]  ; t_ext
00221e  f2011111          ADD      r1,r1,#0x111
002222  fa0ff981          SXTH     r9,r1
002226  f8a69000          STRH     r9,[r6,#0]
;;;2439   ibt._T[1]=t_ext[2]+273;
00222a  8880              LDRH     r0,[r0,#4]  ; t_ext
00222c  f2001011          ADD      r0,r0,#0x111
002230  fa0ffa80          SXTH     r10,r0
002234  f8a6a002          STRH     r10,[r6,#2]
;;;2440   
;;;2441   ibt._nd[0]=ND_EXT[1];
002238  f8981001          LDRB     r1,[r8,#1]  ; ND_EXT
00223c  7231              STRB     r1,[r6,#8]
;;;2442   ibt._nd[1]=ND_EXT[2];
00223e  f8980002          LDRB     r0,[r8,#2]  ; ND_EXT
002242  7270              STRB     r0,[r6,#9]
;;;2443   
;;;2444   #ifndef UKU_TELECORE2015
;;;2445   if((ibt._nd[0]==0) &&  (ibt._nd[1]==0))
;;;2446   	{
;;;2447   	t_box=((ibt._T[0]+ibt._T[1])/2)-273;
002244  4eec              LDR      r6,|L1.9720|
002246  b901              CBNZ     r1,|L1.8778|
002248  b110              CBZ      r0,|L1.8784|
                  |L1.8778|
;;;2448   	}
;;;2449   else if((ibt._nd[0]==1) &&  (ibt._nd[1]==0))
00224a  2901              CMP      r1,#1
00224c  d00a              BEQ      |L1.8804|
00224e  e00a              B        |L1.8806|
                  |L1.8784|
002250  eb09000a          ADD      r0,r9,r10             ;2447
002254  eb0070d0          ADD      r0,r0,r0,LSR #31      ;2447
002258  f46f7188          MVN      r1,#0x110             ;2447
00225c  eb010060          ADD      r0,r1,r0,ASR #1       ;2447
002260  8030              STRH     r0,[r6,#0]            ;2447
002262  e01e              B        |L1.8866|
                  |L1.8804|
002264  b108              CBZ      r0,|L1.8810|
                  |L1.8806|
;;;2450   	{
;;;2451   	t_box=ibt._T[1]-273;
;;;2452   	}
;;;2453   else if((ibt._nd[0]==0) &&  (ibt._nd[1]==1))
002266  b129              CBZ      r1,|L1.8820|
002268  e006              B        |L1.8824|
                  |L1.8810|
00226a  f2aa1a11          SUB      r10,r10,#0x111        ;2451
00226e  f8a6a000          STRH     r10,[r6,#0]           ;2451
002272  e016              B        |L1.8866|
                  |L1.8820|
002274  2801              CMP      r0,#1
002276  d002              BEQ      |L1.8830|
                  |L1.8824|
;;;2454   	{
;;;2455   	t_box=ibt._T[0]-273;
;;;2456   	}
;;;2457   else if((ibt._nd[0]==1) &&  (ibt._nd[1]==1))
002278  2901              CMP      r1,#1
00227a  d005              BEQ      |L1.8840|
00227c  e011              B        |L1.8866|
                  |L1.8830|
00227e  f2a91911          SUB      r9,r9,#0x111          ;2455
002282  f8a69000          STRH     r9,[r6,#0]            ;2455
002286  e00c              B        |L1.8866|
                  |L1.8840|
002288  2801              CMP      r0,#1
00228a  d10a              BNE      |L1.8866|
;;;2458   	{
;;;2459   	if(t_ext_can_nd<5)t_box= t_ext_can;
00228c  48db              LDR      r0,|L1.9724|
00228e  7800              LDRB     r0,[r0,#0]  ; t_ext_can_nd
002290  2805              CMP      r0,#5
002292  d203              BCS      |L1.8860|
002294  48da              LDR      r0,|L1.9728|
002296  8800              LDRH     r0,[r0,#0]  ; t_ext_can
002298  8030              STRH     r0,[r6,#0]
00229a  e002              B        |L1.8866|
                  |L1.8860|
;;;2460   	else t_box=20;
00229c  f04f0014          MOV      r0,#0x14
0022a0  8030              STRH     r0,[r6,#0]
                  |L1.8866|
;;;2461   	}
;;;2462   #endif
;;;2463   /*
;;;2464   //¬˚˜ËÒÎÂÌËÂ ÚÂÏÔÂ‡ÚÛ˚ ¯Í‡Ù‡
;;;2465   
;;;2466   ibt._T[0]=bat[0]._Tb+273;
;;;2467   ibt._T[1]=bat[1]._Tb+273;
;;;2468   ibt._T[2]=t_ext[1]+273;
;;;2469   ibt._T[3]=t_ext[2]+273;
;;;2470   
;;;2471   ibt._nd[0]=bat[0]._nd;
;;;2472   ibt._nd[1]=bat[1]._nd;
;;;2473   ibt._nd[2]=ND_EXT[1];
;;;2474   ibt._nd[3]=ND_EXT[2];
;;;2475   
;;;2476   ibt._avg1=0;
;;;2477   ibt._avg_cnt=4;
;;;2478   
;;;2479   if(ibt._nd[0]==0)
;;;2480   	{
;;;2481   	ibt._avg1+=ibt._T[0];
;;;2482   	}
;;;2483   else 
;;;2484   	{
;;;2485   	ibt._avg_cnt--;
;;;2486   	}
;;;2487   
;;;2488   if(ibt._nd[1]==0)
;;;2489   	{
;;;2490   	ibt._avg1+=ibt._T[1];
;;;2491   	}
;;;2492   else 
;;;2493   	{
;;;2494   	ibt._avg_cnt--;
;;;2495   	}
;;;2496   
;;;2497   if(ibt._nd[2]==0)
;;;2498   	{
;;;2499   	ibt._avg1+=ibt._T[2];
;;;2500   	}
;;;2501   else 
;;;2502   	{
;;;2503   	ibt._avg_cnt--;
;;;2504   	}
;;;2505   
;;;2506   if(ibt._nd[3]==0)
;;;2507   	{
;;;2508   	ibt._avg1+=ibt._T[3];
;;;2509   	}
;;;2510   else 
;;;2511   	{
;;;2512   	ibt._avg_cnt--;
;;;2513   	}
;;;2514   
;;;2515   if(ibt._avg_cnt==0)
;;;2516   	{
;;;2517   	}
;;;2518   else
;;;2519   	{
;;;2520   	ibt._avg1/=ibt._avg_cnt;
;;;2521   	}
;;;2522   
;;;2523   
;;;2524   if(ibt._nd[0]!=0)
;;;2525   	{
;;;2526   	ibt._T_dispers[0]=0;
;;;2527   	}
;;;2528   else 
;;;2529   	{
;;;2530   	ibt._T_dispers[0]=abs(ibt._T[0]-ibt._avg1);
;;;2531   	}
;;;2532   
;;;2533   if(ibt._nd[1]!=0)
;;;2534   	{
;;;2535   	ibt._T_dispers[1]=0;
;;;2536   	}
;;;2537   else 
;;;2538   	{
;;;2539   	ibt._T_dispers[1]=abs(ibt._T[1]-ibt._avg1);
;;;2540   	}
;;;2541   
;;;2542   if(ibt._nd[2]!=0)
;;;2543   	{
;;;2544   	ibt._T_dispers[2]=0;
;;;2545   	}
;;;2546   else 
;;;2547   	{
;;;2548   	ibt._T_dispers[2]=abs(ibt._T[2]-ibt._avg1);
;;;2549   	}
;;;2550   
;;;2551   if(ibt._nd[3]!=0)
;;;2552   	{
;;;2553   	ibt._T_dispers[3]=0;
;;;2554   	}
;;;2555   else 
;;;2556   	{
;;;2557   	ibt._T_dispers[3]=abs(ibt._T[3]-ibt._avg1);
;;;2558   	}
;;;2559   
;;;2560   if(	ibt._nd[0]&&
;;;2561   	ibt._nd[1]&&
;;;2562   	ibt._nd[2]&&
;;;2563   	ibt._nd[3]
;;;2564   	)
;;;2565   	{
;;;2566   	t_box=(bps[0]._Ti);
;;;2567   	}
;;;2568   
;;;2569   else if(	ibt._nd[0]||
;;;2570   	ibt._nd[1]||
;;;2571   	ibt._nd[2]||
;;;2572   	ibt._nd[3]
;;;2573   	)
;;;2574   	{
;;;2575   	t_box=(ibt._avg1-273);
;;;2576   	}
;;;2577   else 
;;;2578   	{
;;;2579   	ibt._max_dispers_num=0;
;;;2580   	ibt._max_dispers=ibt._T_dispers[0];
;;;2581   
;;;2582   	if(ibt._T_dispers[1]>ibt._max_dispers)
;;;2583   		{
;;;2584   		ibt._max_dispers_num=1;
;;;2585   		ibt._max_dispers=ibt._T_dispers[1];
;;;2586   		}
;;;2587   	if(ibt._T_dispers[2]>ibt._max_dispers)
;;;2588   		{
;;;2589   		ibt._max_dispers_num=2;
;;;2590   		ibt._max_dispers=ibt._T_dispers[2];
;;;2591   		}
;;;2592   	if(ibt._T_dispers[3]>ibt._max_dispers)
;;;2593   		{
;;;2594   		ibt._max_dispers_num=3;
;;;2595   		ibt._max_dispers=ibt._T_dispers[3];
;;;2596   		}
;;;2597   
;;;2598   	ibt._avg2=0;
;;;2599   
;;;2600   	if(ibt._max_dispers_num!=0)
;;;2601   		{
;;;2602   		ibt._avg2+=ibt._T[0];
;;;2603   		}
;;;2604   	if(ibt._max_dispers_num!=1)
;;;2605   		{
;;;2606   		ibt._avg2+=ibt._T[1];
;;;2607   		}
;;;2608   	if(ibt._max_dispers_num!=2)
;;;2609   		{
;;;2610   		ibt._avg2+=ibt._T[2];
;;;2611   		}
;;;2612   	if(ibt._max_dispers_num!=3)
;;;2613   		{
;;;2614   		ibt._avg2+=ibt._T[3];
;;;2615   		}
;;;2616   
;;;2617   	t_box=(ibt._avg2/3)-273;
;;;2618   
;;;2619   	}*/
;;;2620   
;;;2621   
;;;2622   //*********************************************
;;;2623   
;;;2624   #ifndef TELECORE
;;;2625   if((BAT_IS_ON[0]==bisON)&&(bat[0]._Ub>200)) Ibmax=bat[0]._Ib;
0022a2  48d8              LDR      r0,|L1.9732|
0022a4  7801              LDRB     r1,[r0,#0]  ; BAT_IS_ON
0022a6  2955              CMP      r1,#0x55
0022a8  d104              BNE      |L1.8884|
0022aa  f1bb0fc8          CMP      r11,#0xc8
0022ae  dd01              BLE      |L1.8884|
0022b0  8929              LDRH     r1,[r5,#8]  ; bat
0022b2  87f9              STRH     r1,[r7,#0x3e]
                  |L1.8884|
;;;2626   if((BAT_IS_ON[1]==bisON)&&(bat[1]._Ub>200)&&(bat[1]._Ib>bat[0]._Ib)) Ibmax=bat[1]._Ib;
0022b4  7840              LDRB     r0,[r0,#1]  ; BAT_IS_ON
0022b6  2855              CMP      r0,#0x55
0022b8  d10a              BNE      |L1.8912|
0022ba  f9b5004e          LDRSH    r0,[r5,#0x4e]  ; bat
0022be  28c8              CMP      r0,#0xc8
0022c0  dd06              BLE      |L1.8912|
0022c2  f9b50054          LDRSH    r0,[r5,#0x54]  ; bat
0022c6  f9b51008          LDRSH    r1,[r5,#8]  ; bat
0022ca  4288              CMP      r0,r1
0022cc  dd00              BLE      |L1.8912|
0022ce  87f8              STRH     r0,[r7,#0x3e]
                  |L1.8912|
;;;2627   #endif
;;;2628   
;;;2629   #ifdef TELECORE
;;;2630   Ibmax=0;
;;;2631   /*
;;;2632   if((NUMBAT_TELECORE>0)&&(lakb[0]._communicationFullErrorStat==0)&&(lakb[0]._ch_curr/10>Ibmax))Ibmax=lakb[0]._ch_curr/10;
;;;2633   if((NUMBAT_TELECORE>1)&&(lakb[1]._communicationFullErrorStat==0)&&(lakb[1]._ch_curr/10>Ibmax))Ibmax=lakb[1]._ch_curr/10;
;;;2634   if((NUMBAT_TELECORE>2)&&(lakb[2]._communicationFullErrorStat==0)&&(lakb[2]._ch_curr/10>Ibmax))Ibmax=lakb[2]._ch_curr/10;
;;;2635   */
;;;2636   if((NUMBAT_TELECORE>0)&&(bat[0]._Ib/10>Ibmax))Ibmax=bat[0]._Ib/10;
;;;2637   if((NUMBAT_TELECORE>1)&&(bat[1]._Ib/10>Ibmax))Ibmax=bat[1]._Ib/10;
;;;2638   //if((BAT_IS_ON[0]==bisON)&&(bat[0]._Ub>200)) Ibmax=bat[0]._Ib/1;
;;;2639   //if((BAT_IS_ON[1]==bisON)&&(bat[1]._Ub>200)&&(bat[1]._Ib>bat[0]._Ib)) Ibmax=bat[1]._Ib;
;;;2640   #endif
;;;2641   //Ibmax=bat[0]._Ib;
;;;2642   //if((AUSW_MAIN==22063)||(AUSW_MAIN==22023)||(AUSW_MAIN==22043))Ibmax=Ib_ips_termokompensat;
;;;2643   
;;;2644   #ifdef UKU_TELECORE2017
;;;2645   Ibmax=0;
;;;2646   if((NUMBAT_TELECORE>0)&&(bat[0]._Ib/10>Ibmax))Ibmax=bat[0]._Ib/10;
;;;2647   if((NUMBAT_TELECORE>1)&&(bat[1]._Ib/10>Ibmax))Ibmax=bat[1]._Ib/10;
;;;2648   #endif
;;;2649   
;;;2650   #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;2651   Ibmax=Ib_ips_termokompensat;
0022d0  f8bc0000          LDRH     r0,[r12,#0]  ; Ib_ips_termokompensat
0022d4  87f8              STRH     r0,[r7,#0x3e]
;;;2652   #endif
;;;2653   for(i=0;i<NUMIST;i++)
0022d6  f04f0100          MOV      r1,#0
0022da  e02f              B        |L1.9020|
                  |L1.8924|
;;;2654   	{
;;;2655   	if(bps[i]._cnt<25)
0022dc  ebc100c1          RSB      r0,r1,r1,LSL #3
0022e0  eb001001          ADD      r0,r0,r1,LSL #4
0022e4  eb040080          ADD      r0,r4,r0,LSL #2
0022e8  78c6              LDRB     r6,[r0,#3]
0022ea  2e19              CMP      r6,#0x19
0022ec  d21c              BCS      |L1.9000|
;;;2656        	{
;;;2657        	bps[i]._Ii=bps[i]._buff[0]+(bps[i]._buff[1]*256);
0022ee  7986              LDRB     r6,[r0,#6]
0022f0  79c7              LDRB     r7,[r0,#7]
0022f2  eb062607          ADD      r6,r6,r7,LSL #8
0022f6  6246              STR      r6,[r0,#0x24]
;;;2658        	bps[i]._Uin=bps[i]._buff[2]+(bps[i]._buff[3]*256);
0022f8  7a06              LDRB     r6,[r0,#8]
0022fa  7a47              LDRB     r7,[r0,#9]
0022fc  eb062607          ADD      r6,r6,r7,LSL #8
002300  6206              STR      r6,[r0,#0x20]
;;;2659        	bps[i]._Uii=bps[i]._buff[4]+(bps[i]._buff[5]*256);
002302  7a86              LDRB     r6,[r0,#0xa]
002304  7ac7              LDRB     r7,[r0,#0xb]
002306  eb062607          ADD      r6,r6,r7,LSL #8
00230a  61c6              STR      r6,[r0,#0x1c]
;;;2660        	bps[i]._Ti=(signed)(bps[i]._buff[6]);
00230c  7b06              LDRB     r6,[r0,#0xc]
00230e  6286              STR      r6,[r0,#0x28]
;;;2661        	bps[i]._adr_ee=bps[i]._buff[7];
002310  7b46              LDRB     r6,[r0,#0xd]
002312  f8806052          STRB     r6,[r0,#0x52]
;;;2662        	bps[i]._flags_tm=bps[i]._buff[8];
002316  7b86              LDRB     r6,[r0,#0xe]
002318  f8806042          STRB     r6,[r0,#0x42]
;;;2663   	     bps[i]._rotor=bps[i]._buff[10]+(bps[i]._buff[11]*256);    
00231c  7c06              LDRB     r6,[r0,#0x10]
00231e  7c47              LDRB     r7,[r0,#0x11]
002320  eb062607          ADD      r6,r6,r7,LSL #8
002324  64c6              STR      r6,[r0,#0x4c]
002326  e006              B        |L1.9014|
                  |L1.9000|
;;;2664        	} 
;;;2665   	else 
;;;2666        	{
;;;2667        	bps[i]._Uii=0; 
002328  61c3              STR      r3,[r0,#0x1c]
;;;2668        	bps[i]._Ii=0;
00232a  6243              STR      r3,[r0,#0x24]
;;;2669        	bps[i]._Uin=0;
00232c  6203              STR      r3,[r0,#0x20]
;;;2670        	bps[i]._Ti=0;
00232e  6283              STR      r3,[r0,#0x28]
;;;2671        	bps[i]._flags_tm=0; 
002330  f8803042          STRB     r3,[r0,#0x42]
;;;2672   	     bps[i]._rotor=0;    
002334  64c3              STR      r3,[r0,#0x4c]
                  |L1.9014|
002336  f1010101          ADD      r1,r1,#1              ;2653
00233a  b2c9              UXTB     r1,r1                 ;2653
                  |L1.9020|
00233c  4291              CMP      r1,r2                 ;2653
00233e  dbcd              BLT      |L1.8924|
;;;2673        	}
;;;2674        
;;;2675        }
;;;2676   
;;;2677   load_I=0;
002340  4eb1              LDR      r6,|L1.9736|
;;;2678   #ifdef TELECORE
;;;2679   
;;;2680   /*for(i=0;i<NUMBAT_TELECORE;i++)
;;;2681   	{
;;;2682   	load_I-=lakb[i]._ch_curr/10;
;;;2683   	}*/
;;;2684   load_I=-(bat[0]._Ib/10)-(bat[1]._Ib/10);
;;;2685   #elif UKU_TELECORE2017
;;;2686   load_I=-(bat[0]._Ib/10)-(bat[1]._Ib/10);
;;;2687   #else
;;;2688   load_I=-(bat[0]._Ib/10)-(bat[1]._Ib/10);
002342  f9b51008          LDRSH    r1,[r5,#8]  ; bat
002346  f04f000a          MOV      r0,#0xa
00234a  fb91f1f0          SDIV     r1,r1,r0
00234e  f9b55054          LDRSH    r5,[r5,#0x54]  ; bat
002352  fb95f0f0          SDIV     r0,r5,r0
002356  4408              ADD      r0,r0,r1
002358  f1c00000          RSB      r0,r0,#0
00235c  b207              SXTH     r7,r0
00235e  8037              STRH     r7,[r6,#0]
;;;2689   #endif
;;;2690   Isumm=0;
002360  4daa              LDR      r5,|L1.9740|
002362  802b              STRH     r3,[r5,#0]
;;;2691   
;;;2692   for(i=0;i<NUMIST;i++)
002364  f04f0000          MOV      r0,#0
002368  e012              B        |L1.9104|
                  |L1.9066|
;;;2693        {
;;;2694        if(bps[i]._cnt<5)Isumm+=bps[i]._Ii;
00236a  ebc001c0          RSB      r1,r0,r0,LSL #3
00236e  eb011100          ADD      r1,r1,r0,LSL #4
002372  eb040181          ADD      r1,r4,r1,LSL #2
002376  f891c003          LDRB     r12,[r1,#3]
00237a  f1bc0f05          CMP      r12,#5
00237e  d204              BCS      |L1.9098|
002380  6a49              LDR      r1,[r1,#0x24]
002382  f8b5c000          LDRH     r12,[r5,#0]  ; Isumm
002386  4461              ADD      r1,r1,r12
002388  8029              STRH     r1,[r5,#0]
                  |L1.9098|
00238a  f1000001          ADD      r0,r0,#1              ;2692
00238e  b2c0              UXTB     r0,r0                 ;2692
                  |L1.9104|
002390  4290              CMP      r0,r2                 ;2692
002392  dbea              BLT      |L1.9066|
;;;2695        }  
;;;2696        
;;;2697   load_I=load_I+Isumm;
002394  8828              LDRH     r0,[r5,#0]  ; Isumm
002396  4438              ADD      r0,r0,r7
002398  b200              SXTH     r0,r0
00239a  8030              STRH     r0,[r6,#0]
;;;2698   if(load_I<0)load_I=0;
00239c  2800              CMP      r0,#0
00239e  da00              BGE      |L1.9122|
0023a0  8033              STRH     r3,[r6,#0]
                  |L1.9122|
;;;2699   
;;;2700   #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;2701   load_I=0;
0023a2  8033              STRH     r3,[r6,#0]
;;;2702   
;;;2703   Isumm=0;
0023a4  802b              STRH     r3,[r5,#0]
;;;2704   
;;;2705   for(i=0;i<NUMIST;i++)
0023a6  f04f0000          MOV      r0,#0
0023aa  e00f              B        |L1.9164|
                  |L1.9132|
;;;2706        {
;;;2707        if(bps[i]._cnt<5)Isumm+=bps[i]._Ii;
0023ac  ebc001c0          RSB      r1,r0,r0,LSL #3
0023b0  eb011100          ADD      r1,r1,r0,LSL #4
0023b4  eb040181          ADD      r1,r4,r1,LSL #2
0023b8  78cf              LDRB     r7,[r1,#3]
0023ba  2f05              CMP      r7,#5
0023bc  d203              BCS      |L1.9158|
0023be  6a49              LDR      r1,[r1,#0x24]
0023c0  882f              LDRH     r7,[r5,#0]  ; Isumm
0023c2  4439              ADD      r1,r1,r7
0023c4  8029              STRH     r1,[r5,#0]
                  |L1.9158|
0023c6  f1000001          ADD      r0,r0,#1              ;2705
0023ca  b2c0              UXTB     r0,r0                 ;2705
                  |L1.9164|
0023cc  4290              CMP      r0,r2                 ;2705
0023ce  dbed              BLT      |L1.9132|
;;;2708        }  
;;;2709        
;;;2710   load_I=load_I+Isumm;
0023d0  8829              LDRH     r1,[r5,#0]  ; Isumm
0023d2  eb030001          ADD      r0,r3,r1
0023d6  b200              SXTH     r0,r0
0023d8  8030              STRH     r0,[r6,#0]
;;;2711   if(load_I<0)load_I=0;
0023da  2800              CMP      r0,#0
0023dc  da00              BGE      |L1.9184|
0023de  8033              STRH     r3,[r6,#0]
                  |L1.9184|
;;;2712   
;;;2713   #endif
;;;2714   #ifdef IPS_SGEP_GAZPROM
;;;2715   load_I=Isumm;
;;;2716   #endif
;;;2717   
;;;2718   
;;;2719   #ifdef UKU_GLONASS
;;;2720   inv[0]._Uio=6;
;;;2721   if (NUMINV)
;;;2722   	{
;;;2723   	for(i=0;i<NUMINV;i++)
;;;2724   		{
;;;2725   		if(bps[i+first_inv_slot]._cnt<25)
;;;2726        		{
;;;2727        		inv[i]._Ii=bps[i+first_inv_slot]._buff[0]+(bps[i+first_inv_slot]._buff[1]*256);
;;;2728        		inv[i]._Uin=bps[i+first_inv_slot]._buff[2]+(bps[i+first_inv_slot]._buff[3]*256);
;;;2729        		inv[i]._Uio=bps[i+first_inv_slot]._buff[4]+(bps[i+first_inv_slot]._buff[5]*256);
;;;2730        		inv[i]._Ti=(signed)(bps[i+first_inv_slot]._buff[6]);
;;;2731        		inv[i]._flags_tm=bps[i+first_inv_slot]._buff[8];
;;;2732   	    	//	inv[i]._rotor=bps[i+first_inv_slot]._buff[10]+(bps[i+first_inv_slot]._buff[11]*256);
;;;2733   			inv[i]._cnt=0;    
;;;2734        		} 
;;;2735   		else 
;;;2736        		{
;;;2737        		inv[i]._Uio=0; 
;;;2738        		inv[i]._Ii=0;
;;;2739        		inv[i]._Uin=0;
;;;2740        		inv[i]._Ti=0;
;;;2741        		inv[i]._flags_tm=0; 
;;;2742   //	     	inv[i]._rotor0;
;;;2743   			inv[i]._cnt=25;    
;;;2744        		}
;;;2745        	}
;;;2746      	}
;;;2747   #endif
;;;2748   
;;;2749   #ifndef UKU_GLONASS
;;;2750   if (NUMINV)
0023e0  488b              LDR      r0,|L1.9744|
0023e2  f9b05000          LDRSH    r5,[r0,#0]  ; NUMINV
0023e6  2d00              CMP      r5,#0
0023e8  d066              BEQ      |L1.9400|
;;;2751   	{
;;;2752   	for(i=0;i<NUMINV;i++)
0023ea  f04f0200          MOV      r2,#0
;;;2753   		{
;;;2754   		if(bps[i+20]._cnt<25)
;;;2755        		{
;;;2756        		inv[i]._Ii=bps[i+20]._buff[0]+(bps[i+20]._buff[1]*256);
0023ee  4e89              LDR      r6,|L1.9748|
0023f0  e060              B        |L1.9396|
                  |L1.9202|
0023f2  f1020014          ADD      r0,r2,#0x14           ;2754
0023f6  ebc001c0          RSB      r1,r0,r0,LSL #3       ;2754
0023fa  eb011000          ADD      r0,r1,r0,LSL #4       ;2754
0023fe  eb040080          ADD      r0,r4,r0,LSL #2       ;2754
002402  78c1              LDRB     r1,[r0,#3]            ;2754
002404  2919              CMP      r1,#0x19              ;2754
002406  d239              BCS      |L1.9340|
002408  7981              LDRB     r1,[r0,#6]
00240a  79c7              LDRB     r7,[r0,#7]
00240c  eb012707          ADD      r7,r1,r7,LSL #8
002410  eb020142          ADD      r1,r2,r2,LSL #1
002414  eb061141          ADD      r1,r6,r1,LSL #5
002418  61cf              STR      r7,[r1,#0x1c]
;;;2757        		inv[i]._Pio=bps[i+20]._buff[2]+(bps[i+20]._buff[3]*256);
00241a  7a07              LDRB     r7,[r0,#8]
00241c  f890c009          LDRB     r12,[r0,#9]
002420  eb07270c          ADD      r7,r7,r12,LSL #8
002424  62cf              STR      r7,[r1,#0x2c]
;;;2758        		inv[i]._Uio=bps[i+20]._buff[4]+(bps[i+20]._buff[5]*256);
002426  7a87              LDRB     r7,[r0,#0xa]
002428  f890c00b          LDRB     r12,[r0,#0xb]
00242c  eb07270c          ADD      r7,r7,r12,LSL #8
002430  618f              STR      r7,[r1,#0x18]
;;;2759        		inv[i]._Ti=(signed)(bps[i+20]._buff[6]);
002432  7b07              LDRB     r7,[r0,#0xc]
002434  620f              STR      r7,[r1,#0x20]
;;;2760        		inv[i]._flags_tm=bps[i+20]._buff[7];
002436  7b47              LDRB     r7,[r0,#0xd]
002438  f8817046          STRB     r7,[r1,#0x46]
;;;2761        		inv[i]._Uin=bps[i+20]._buff[8]+(bps[i+20]._buff[9]*256);
00243c  7b87              LDRB     r7,[r0,#0xe]
00243e  f890c00f          LDRB     r12,[r0,#0xf]
002442  eb07270c          ADD      r7,r7,r12,LSL #8
002446  628f              STR      r7,[r1,#0x28]
;;;2762        		inv[i]._Uil=bps[i+20]._buff[10]+(bps[i+20]._buff[11]*256);
002448  7c07              LDRB     r7,[r0,#0x10]
00244a  f890c011          LDRB     r12,[r0,#0x11]
00244e  eb07270c          ADD      r7,r7,r12,LSL #8
002452  624f              STR      r7,[r1,#0x24]
;;;2763   			inv[i]._cnt=0;
002454  708b              STRB     r3,[r1,#2]
;;;2764   			inv[i]._Uoutmin=bps[i+20]._buff[12]; 
002456  7c87              LDRB     r7,[r0,#0x12]
002458  f8817059          STRB     r7,[r1,#0x59]
;;;2765   			inv[i]._Uoutmax=bps[i+20]._buff[13]; 
00245c  7cc7              LDRB     r7,[r0,#0x13]
00245e  f881705a          STRB     r7,[r1,#0x5a]
;;;2766   			inv[i]._Pnom=bps[i+20]._buff[14]; 
002462  7d07              LDRB     r7,[r0,#0x14]
002464  f8817058          STRB     r7,[r1,#0x58]
;;;2767   			inv[i]._net_contr_en=bps[i+20]._buff[15];
002468  7d47              LDRB     r7,[r0,#0x15]
00246a  f881705b          STRB     r7,[r1,#0x5b]
;;;2768   			inv[i]._pwm_en=bps[i+20]._buff[16];  
00246e  7d87              LDRB     r7,[r0,#0x16]
002470  f881705c          STRB     r7,[r1,#0x5c]
;;;2769   			inv[i]._phase_mode=bps[i+20]._buff[17];  
002474  7dc0              LDRB     r0,[r0,#0x17]
002476  f881005d          STRB     r0,[r1,#0x5d]
00247a  e018              B        |L1.9390|
                  |L1.9340|
;;;2770        		} 
;;;2771   		else 
;;;2772        		{
;;;2773         		inv[i]._Ii=0;
00247c  eb020042          ADD      r0,r2,r2,LSL #1
002480  eb061040          ADD      r0,r6,r0,LSL #5
002484  61c3              STR      r3,[r0,#0x1c]
;;;2774   			inv[i]._Pio=0;
002486  62c3              STR      r3,[r0,#0x2c]
;;;2775   			inv[i]._Uio=0;
002488  6183              STR      r3,[r0,#0x18]
;;;2776        		inv[i]._Ti=0;
00248a  6203              STR      r3,[r0,#0x20]
;;;2777        		inv[i]._flags_tm=0; 
00248c  f8803046          STRB     r3,[r0,#0x46]
;;;2778        		inv[i]._Uil=0;
002490  6243              STR      r3,[r0,#0x24]
;;;2779        		inv[i]._Uin=0;
002492  6283              STR      r3,[r0,#0x28]
;;;2780   			inv[i]._cnt=25; 
002494  f04f0119          MOV      r1,#0x19
002498  7081              STRB     r1,[r0,#2]
;;;2781   			inv[i]._Uoutmin=0; 
00249a  f8803059          STRB     r3,[r0,#0x59]
;;;2782   			inv[i]._Uoutmax=0; 
00249e  f880305a          STRB     r3,[r0,#0x5a]
;;;2783   			inv[i]._Pnom=0; 
0024a2  f8803058          STRB     r3,[r0,#0x58]
;;;2784   			inv[i]._net_contr_en=0;
0024a6  f880305b          STRB     r3,[r0,#0x5b]
;;;2785   			inv[i]._pwm_en=0;   
0024aa  f880305c          STRB     r3,[r0,#0x5c]
                  |L1.9390|
0024ae  f1020201          ADD      r2,r2,#1              ;2752
0024b2  b2d2              UXTB     r2,r2                 ;2752
                  |L1.9396|
0024b4  42aa              CMP      r2,r5                 ;2752
0024b6  db9c              BLT      |L1.9202|
                  |L1.9400|
;;;2786   			   
;;;2787        		}
;;;2788        	}
;;;2789      	}
;;;2790   #endif
;;;2791   
;;;2792   #ifdef GLADKOV
;;;2793   inv[0]._Ii=bps[4]._buff[0]+(bps[4]._buff[1]*256);
;;;2794   inv[0]._Pio=bps[4]._buff[2]+(bps[4]._buff[3]*256);
;;;2795   inv[0]._Uio=bps[4]._buff[4]+(bps[4]._buff[5]*256);
;;;2796   inv[0]._Ti=(signed)(bps[4]._buff[6]);
;;;2797   inv[0]._flags_tm=bps[4]._buff[7];
;;;2798   inv[0]._Uin=bps[4]._buff[8]+(bps[4]._buff[9]*256);
;;;2799   inv[0]._Uil=bps[4]._buff[10]+(bps[4]._buff[11]*256);
;;;2800   inv[0]._cnt=0;    
;;;2801   
;;;2802   inv[1]._Ii=bps[21]._buff[0]+(bps[21]._buff[1]*256);
;;;2803   inv[1]._Pio=bps[21]._buff[2]+(bps[21]._buff[3]*256);
;;;2804   inv[1]._Uio=bps[21]._buff[4]+(bps[21]._buff[5]*256);
;;;2805   inv[1]._Ti=(signed)(bps[21]._buff[6]);
;;;2806   inv[1]._flags_tm=bps[21]._buff[7];
;;;2807   inv[1]._Uin=bps[21]._buff[8]+(bps[21]._buff[9]*256);
;;;2808   inv[1]._Uil=bps[21]._buff[10]+(bps[21]._buff[11]*256);
;;;2809   inv[1]._cnt=0;    
;;;2810   #endif
;;;2811   
;;;2812   /*
;;;2813   if((BAT_IS_ON[0]==bisON)&&(BAT_TYPE==1))
;;;2814   	{
;;;2815   	lakb[0]._battCommState=0;
;;;2816   	if(lakb[0]._cnt>10)lakb[0]._battCommState=2;
;;;2817   	else if(lakb[0]._bRS485ERR==1)lakb[0]._battCommState=1;
;;;2818   	
;;;2819   	if(lakb[0]._battCommState==0)
;;;2820   		{	
;;;2821   		bat[0]._Ub=(signed short)((lakb[0]._tot_bat_volt+5)/10);
;;;2822   		bat[0]._Ib=(signed short)lakb[0]._ch_curr;
;;;2823   		if(lakb[0]._dsch_curr) bat[0]._Ib=(signed short) (-lakb[0]._dsch_curr);
;;;2824   		bat[0]._Tb=(signed short)lakb[0]._max_cell_temp;
;;;2825   		}
;;;2826   	}
;;;2827   */
;;;2828   
;;;2829   #ifdef UKU_TELECORE2015
;;;2830   
;;;2831   	if(BAT_TYPE==2)
;;;2832   		{
;;;2833   		lakb[0]._ch_curr/*temp_SS*/=((ascii2halFhex(liBatteryInBuff[113]))<<12)+
;;;2834   					 		((ascii2halFhex(liBatteryInBuff[114]))<<8)+
;;;2835   							((ascii2halFhex(liBatteryInBuff[115]))<<4)+
;;;2836   							((ascii2halFhex(liBatteryInBuff[116])));
;;;2837   		
;;;2838   		/*if(temp_SS&0x8000)		lakb[0]._ch_curr=~temp_SS;
;;;2839   		else 				lakb[0]._ch_curr=temp_SS;*/
;;;2840   	
;;;2841   		lakb[0]._tot_bat_volt=	(unsigned short)(((ascii2halFhex(liBatteryInBuff[117]))<<12)+
;;;2842   							((ascii2halFhex(liBatteryInBuff[118]))<<8)+
;;;2843   							((ascii2halFhex(liBatteryInBuff[119]))<<4)+
;;;2844   							((ascii2halFhex(liBatteryInBuff[120]))))/100;
;;;2845   	
;;;2846   		lakb[0]._max_cell_temp= 	(((ascii2halFhex(liBatteryInBuff[93]))<<12)+
;;;2847   							((ascii2halFhex(liBatteryInBuff[94]))<<8)+
;;;2848   							((ascii2halFhex(liBatteryInBuff[95]))<<4)+
;;;2849   							((ascii2halFhex(liBatteryInBuff[96]))))/10-273;
;;;2850   	
;;;2851   		lakb[0]._s_o_c_abs=		(unsigned short)((ascii2halFhex(liBatteryInBuff[121]))<<12)+
;;;2852   							((ascii2halFhex(liBatteryInBuff[122]))<<8)+
;;;2853   							((ascii2halFhex(liBatteryInBuff[123]))<<4)+
;;;2854   							((ascii2halFhex(liBatteryInBuff[124])));
;;;2855   	
;;;2856   		lakb[0]._rat_cap=		(unsigned short)((ascii2halFhex(liBatteryInBuff[127]))<<12)+
;;;2857   							((ascii2halFhex(liBatteryInBuff[128]))<<8)+
;;;2858   							((ascii2halFhex(liBatteryInBuff[129]))<<4)+
;;;2859   							((ascii2halFhex(liBatteryInBuff[130])));
;;;2860   	
;;;2861   		lakb[0]._s_o_c=		lakb[0]._s_o_c_abs/(lakb[0]._rat_cap/100);
;;;2862   	
;;;2863   	
;;;2864   	/*	lakb[0]._rat_cap= (lakb_damp[i][13]*256)+ lakb_damp[i][14];
;;;2865   		lakb[0]._max_cell_volt= (lakb_damp[i][0]*256)+ lakb_damp[i][1];
;;;2866   		lakb[0]._min_cell_volt= (lakb_damp[i][2]*256)+ lakb_damp[i][3];
;;;2867   		lakb[0]._max_cell_temp= lakb_damp[i][4];
;;;2868   		lakb[0]._min_cell_temp= lakb_damp[i][5];
;;;2869   		lakb[0]._tot_bat_volt= (lakb_damp[i][6]*256)+ lakb_damp[i][7];
;;;2870   		lakb[0]._ch_curr= (lakb_damp[i][8]*256)+ lakb_damp[i][8];
;;;2871   		lakb[0]._dsch_curr= (lakb_damp[i][10]*256)+ lakb_damp[i][11];
;;;2872   		lakb[0]._s_o_c= lakb_damp[i][12];
;;;2873   		lakb[0]._r_b_t= lakb_damp[i][15];
;;;2874   		lakb[0]._c_c_l_v= (lakb_damp[i][16]*256)+ lakb_damp[i][17];
;;;2875   		lakb[0]._s_o_h= lakb_damp[i][18];
;;;2876   	
;;;2877   		if(lakb[i]._rat_cap==0)
;;;2878   			{
;;;2879   			if(lakb[i]._isOnCnt)
;;;2880   				{
;;;2881   				lakb[i]._isOnCnt--;
;;;2882   				if(lakb[i]._isOnCnt==0)
;;;2883   					{
;;;2884   					if(lakb[i]._battIsOn!=0) bLAKB_KONF_CH=1;
;;;2885   					}
;;;2886   				}
;;;2887   			}
;;;2888   		else 
;;;2889   			{
;;;2890   			if(lakb[i]._isOnCnt<50)
;;;2891   				{
;;;2892   				lakb[i]._isOnCnt++;
;;;2893   				if(lakb[i]._isOnCnt==50)
;;;2894   					{
;;;2895   					if(lakb[i]._battIsOn!=1) bLAKB_KONF_CH=1;
;;;2896   					}
;;;2897   				}
;;;2898   			}
;;;2899   		gran(&lakb[i]._isOnCnt,0,50);*/
;;;2900   		}
;;;2901   	else if(BAT_TYPE==3)
;;;2902   		{
;;;2903   		//short numOfPacks;
;;;2904   		//short numOfCells, numOfTemperCells, baseOfData;
;;;2905   		
;;;2906   		#ifndef UKU_TELECORE2016
;;;2907   		numOfCells=((ascii2halFhex(liBatteryInBuff[17]))<<4)+((ascii2halFhex(liBatteryInBuff[18])));
;;;2908   		numOfTemperCells=((ascii2halFhex(liBatteryInBuff[17+(numOfCells*4)+2]))<<4)+((ascii2halFhex(liBatteryInBuff[18+(numOfCells*4)+2])));
;;;2909   		numOfPacks=((ascii2halFhex(liBatteryInBuff[15]))<<4)+((ascii2halFhex(liBatteryInBuff[16])));
;;;2910   		if(numOfPacks)numOfPacks-=1;
;;;2911   		if((numOfPacks<0)||(numOfPacks>NUMBAT_TELECORE))numOfPacks=0;
;;;2912   		plazma_numOfCells=numOfCells;
;;;2913   		plazma_numOfTemperCells=numOfTemperCells;
;;;2914   		plazma_numOfPacks=numOfPacks;
;;;2915   
;;;2916   
;;;2917   		baseOfData=16+(numOfCells*4)+2+(numOfTemperCells*4)+2;
;;;2918   
;;;2919   		lakb[numOfPacks]._ch_curr=(signed short)(
;;;2920   							((ascii2halFhex(liBatteryInBuff[1+baseOfData]))<<12)+
;;;2921   							((ascii2halFhex(liBatteryInBuff[2+baseOfData]))<<8)+
;;;2922   							((ascii2halFhex(liBatteryInBuff[3+baseOfData]))<<4)+
;;;2923   							((ascii2halFhex(liBatteryInBuff[4+baseOfData])))
;;;2924   							);	  
;;;2925   
;;;2926   		lakb[numOfPacks]._tot_bat_volt=(signed short)(
;;;2927   							((ascii2halFhex(liBatteryInBuff[1+baseOfData+4]))<<12)+
;;;2928   							((ascii2halFhex(liBatteryInBuff[2+baseOfData+4]))<<8)+
;;;2929   							((ascii2halFhex(liBatteryInBuff[3+baseOfData+4]))<<4)+
;;;2930   							((ascii2halFhex(liBatteryInBuff[4+baseOfData+4])))
;;;2931   							)/10;
;;;2932   
;;;2933   		lakb[numOfPacks]._max_cell_temp=(signed short)(
;;;2934   							((ascii2halFhex(liBatteryInBuff[1+baseOfData-4]))<<12)+
;;;2935   							((ascii2halFhex(liBatteryInBuff[2+baseOfData-4]))<<8)+
;;;2936   							((ascii2halFhex(liBatteryInBuff[3+baseOfData-4]))<<4)+
;;;2937   							((ascii2halFhex(liBatteryInBuff[4+baseOfData-4])))
;;;2938   							)-2730;
;;;2939   
;;;2940   		lakb[numOfPacks]._s_o_c=(signed short)(
;;;2941   							((ascii2halFhex(liBatteryInBuff[1+baseOfData+8]))<<12)+
;;;2942   							((ascii2halFhex(liBatteryInBuff[2+baseOfData+8]))<<8)+
;;;2943   							((ascii2halFhex(liBatteryInBuff[3+baseOfData+8]))<<4)+
;;;2944   							((ascii2halFhex(liBatteryInBuff[4+baseOfData+8])))
;;;2945   							)/10;
;;;2946   
;;;2947   		lakb[numOfPacks]._s_o_h=(signed short)(
;;;2948   							((ascii2halFhex(liBatteryInBuff[1+baseOfData+14]))<<12)+
;;;2949   							((ascii2halFhex(liBatteryInBuff[2+baseOfData+14]))<<8)+
;;;2950   							((ascii2halFhex(liBatteryInBuff[3+baseOfData+14]))<<4)+
;;;2951   							((ascii2halFhex(liBatteryInBuff[4+baseOfData+14])))
;;;2952   							)/10;
;;;2953   		#endif
;;;2954   		
;;;2955   		#ifdef UKU_TELECORE2016
;;;2956   		{
;;;2957   		char i;
;;;2958   		
;;;2959   		for(i=0;i<NUMBAT_TELECORE;i++)
;;;2960   			{
;;;2961   			lakb[i]._s_o_c_percent= (signed short)(((unsigned long)lakb[i]._s_o_c*100UL)/(unsigned long)lakb[i]._s_o_h);
;;;2962   			}
;;;2963   		}
;;;2964   		#endif
;;;2965   		
;;;2966   										  
;;;2967   		}
;;;2968   	
;;;2969   if(sacredSunSilentCnt<3) 
;;;2970   	{
;;;2971       	bat[0]._Ub=lakb[0]._tot_bat_volt;
;;;2972       	bat[0]._Tb=lakb[0]._max_cell_temp;
;;;2973      	//bat[0]._Ib=lakb[0]._ch_curr/10;
;;;2974   	}
;;;2975   else 
;;;2976   	{
;;;2977       	//bat[0]._Ub=0;
;;;2978       	//bat[0]._Tb=0;
;;;2979      	//bat[0]._Ib=0;
;;;2980   	}
;;;2981   
;;;2982   if(BAT_TYPE==1)
;;;2983   	{
;;;2984   	char i;
;;;2985   	for(i=0;i<1;i++)
;;;2986   		{
;;;2987   		lakb[i]._rat_cap= (lakb_damp[i][13]*256)+ lakb_damp[i][14];
;;;2988   		lakb[i]._max_cell_volt= (lakb_damp[i][0]*256)+ lakb_damp[i][1];
;;;2989   		lakb[i]._min_cell_volt= (lakb_damp[i][2]*256)+ lakb_damp[i][3];
;;;2990   		lakb[i]._max_cell_temp= lakb_damp[i][4];
;;;2991   		lakb[i]._min_cell_temp= lakb_damp[i][5];
;;;2992   		lakb[i]._tot_bat_volt= (lakb_damp[i][6]*256)+ lakb_damp[i][7];
;;;2993   		lakb[i]._ch_curr= (lakb_damp[i][8]*256)+ lakb_damp[i][9];
;;;2994   		lakb[i]._dsch_curr= (lakb_damp[i][10]*256)+ lakb_damp[i][11];
;;;2995   		lakb[i]._s_o_c= lakb_damp[i][12];
;;;2996   		lakb[i]._r_b_t= lakb_damp[i][15];
;;;2997   		lakb[i]._c_c_l_v= (lakb_damp[i][16]*256)+ lakb_damp[i][17];
;;;2998   		lakb[i]._s_o_h= lakb_damp[i][18];
;;;2999   		lakb[i]._flags1= lakb_damp[i][34];
;;;3000   		lakb[i]._flags2= lakb_damp[i][35];
;;;3001   		lakb[i]._b_p_ser_num= lakb_damp[i][36];
;;;3002   
;;;3003   /*		if(lakb[i]._rat_cap==0)
;;;3004   			{
;;;3005   			if(lakb[i]._isOnCnt)
;;;3006   				{
;;;3007   				lakb[i]._isOnCnt--;
;;;3008   				if(lakb[i]._isOnCnt==0)
;;;3009   					{
;;;3010   					if(lakb[i]._battIsOn!=0) bLAKB_KONF_CH=1;
;;;3011   					}
;;;3012   				}
;;;3013   			}
;;;3014   		else 
;;;3015   			{
;;;3016   			if(lakb[i]._isOnCnt<50)
;;;3017   				{
;;;3018   				lakb[i]._isOnCnt++;
;;;3019   				if(lakb[i]._isOnCnt==50)
;;;3020   					{
;;;3021   					if(lakb[i]._battIsOn!=1) bLAKB_KONF_CH=1;
;;;3022   					}
;;;3023   				}
;;;3024   			} */
;;;3025   		gran(&lakb[i]._isOnCnt,0,50);
;;;3026   	 	}
;;;3027   
;;;3028   	if(lakb_damp[0][41]==100)
;;;3029   		{
;;;3030   		li_bat._485Error=1;
;;;3031   		}
;;;3032   	if(lakb_damp[0][41]==0)
;;;3033   		{
;;;3034   		//if(bRS485ERR)bLAKB_KONF_CH=1;
;;;3035   		li_bat._485Error=0;
;;;3036   		}
;;;3037   	li_bat._485ErrorCnt=lakb_damp[0][41];
;;;3038   
;;;3039   
;;;3040   	}
;;;3041   
;;;3042   
;;;3043   #endif
;;;3044   
;;;3045   		#ifdef UKU_TELECORE2017
;;;3046   		{
;;;3047   		char i;
;;;3048   		
;;;3049   		for(i=0;i<NUMBAT_TELECORE;i++)
;;;3050   			{
;;;3051   			lakb[i]._s_o_c_percent= (signed short)(((unsigned long)lakb[i]._s_o_c*100UL)/(unsigned long)lakb[i]._s_o_h);
;;;3052   			}
;;;3053   		}
;;;3054   		#endif
;;;3055   #ifdef UKU_TELECORE2015
;;;3056   //‚˚˜ËÒÎÂÌËÂ Ô‡‡ÏÂÚÓ‚ ‡·ÓÚ˚ ·‡Ú‡ÂË
;;;3057   //TODO ‰ÓÔËÒ‡Ú¸ ‰Îˇ ‚ÒÂı ·‡Ú‡ÂÈ ‚ÒÂ Ô‡‡ÏÂÚ˚ Ë ÔË ÓÚˆÂÔÍÂ ·‡Ú‡ÂÈ
;;;3058   li_bat._batStat=bsOK;
;;;3059   if(BAT_TYPE==1) //COSLIGHT
;;;3060   	{
;;;3061   	if(li_bat._batStat==bsOK)
;;;3062   		{
;;;3063   		li_bat._Ub=lakb[0]._tot_bat_volt/10;
;;;3064   
;;;3065   		if(lakb[0]._ch_curr)li_bat._Ib=lakb[0]._ch_curr/10;
;;;3066   		else if(lakb[0]._dsch_curr) li_bat._Ib=bat[0]._Ib/10;//lakb[0]._dsch_curr/10;
;;;3067   	
;;;3068   		li_bat._ratCap=lakb[0]._rat_cap/100;
;;;3069   		li_bat._soc=lakb[0]._s_o_c;
;;;3070   		li_bat._soh=lakb[0]._s_o_h;
;;;3071   		li_bat._cclv=lakb[0]._c_c_l_v/10;
;;;3072   		li_bat._Tb=lakb[0]._max_cell_temp;
;;;3073   		li_bat._rbt=lakb[0]._r_b_t;
;;;3074   		}
;;;3075   	else 
;;;3076   		{
;;;3077   		li_bat._Ub=bat[0]._Ub;
;;;3078   		li_bat._Ib=bat[0]._Ib/10;
;;;3079   		li_bat._Tb=bat[0]._Tb;
;;;3080   		}
;;;3081   
;;;3082   	if((li_bat._485Error)||(li_bat._canError))
;;;3083   		{
;;;3084   		li_bat._batStat=bsOFF;
;;;3085   		}
;;;3086   	else li_bat._batStat=bsOK;
;;;3087   	}
;;;3088   else if(BAT_TYPE==2) //SACRED SUN
;;;3089   	{
;;;3090   	}
;;;3091   else if(BAT_TYPE==3) //ZTT
;;;3092   	{
;;;3093   	if(li_bat._batStat==bsOK)
;;;3094   		{
;;;3095   
;;;3096   		}
;;;3097   	}
;;;3098   #endif
;;;3099   
;;;3100   
;;;3101   /*
;;;3102   if((BAT_IS_ON[0]==bisON)&&(BAT_TYPE[0]==1)&&(BAT_LINK==0))
;;;3103   	{
;;;3104   
;;;3105   
;;;3106   	if(bat_drv_rx_buff[13]<=0x39)bbb[0]=bat_drv_rx_buff[13]-0x30;
;;;3107   	else bbb[0]=bat_drv_rx_buff[13]-55;
;;;3108   	if(bat_drv_rx_buff[14]<=0x39)bbb[1]=bat_drv_rx_buff[14]-0x30;
;;;3109   	else bbb[1]=bat_drv_rx_buff[14]-55;
;;;3110   	if(bat_drv_rx_buff[15]<=0x39)bbb[2]=bat_drv_rx_buff[15]-0x30;
;;;3111   	else bbb[2]=bat_drv_rx_buff[15]-55;
;;;3112   	if(bat_drv_rx_buff[16]<=0x39)bbb[3]=bat_drv_rx_buff[16]-0x30;
;;;3113   	else bbb[3]=bat_drv_rx_buff[16]-55;
;;;3114   
;;;3115   	tempSS=0;
;;;3116   	tempSS=((bbb[0]*4096)+(bbb[1]*256)+(bbb[2]*16)+bbb[3]);
;;;3117   
;;;3118   	bat[0]._max_cell_volt=(tempSS+5)/10;
;;;3119   
;;;3120   	if(bat_drv_rx_buff[17]<=0x39)bbb[0]=bat_drv_rx_buff[17]-0x30;
;;;3121   	else bbb[0]=bat_drv_rx_buff[17]-55;
;;;3122   	if(bat_drv_rx_buff[18]<=0x39)bbb[1]=bat_drv_rx_buff[18]-0x30;
;;;3123   	else bbb[1]=bat_drv_rx_buff[18]-55;
;;;3124   	if(bat_drv_rx_buff[19]<=0x39)bbb[2]=bat_drv_rx_buff[19]-0x30;
;;;3125   	else bbb[2]=bat_drv_rx_buff[19]-55;
;;;3126   	if(bat_drv_rx_buff[20]<=0x39)bbb[3]=bat_drv_rx_buff[20]-0x30;
;;;3127   	else bbb[3]=bat_drv_rx_buff[20]-55;
;;;3128   
;;;3129   	tempSS=0;
;;;3130   	tempSS=((bbb[0]*4096)+(bbb[1]*256)+(bbb[2]*16)+bbb[3]);
;;;3131   
;;;3132   	bat[0]._min_cell_volt=(tempSS+5)/10;
;;;3133   
;;;3134   
;;;3135   	}*/
;;;3136   
;;;3137   
;;;3138   
;;;3139   }
0024b8  e8bd9ffc          POP      {r2-r12,pc}
;;;3140   
                          ENDP

                  mnemo_hndl PROC
;;;3141   //-----------------------------------------------
;;;3142   void mnemo_hndl(void)
0024bc  4a56              LDR      r2,|L1.9752|
;;;3143   {
;;;3144   if(((ind==iMn_220)||(ind==iMn))&&(sub_ind==0)&&(MNEMO_ON==mnON))
;;;3145   	{
;;;3146   	if(mnemo_cnt)mnemo_cnt--;
0024be  4957              LDR      r1,|L1.9756|
0024c0  7810              LDRB     r0,[r2,#0]            ;3144  ; a_ind
0024c2  2804              CMP      r0,#4                 ;3144
0024c4  d001              BEQ      |L1.9418|
0024c6  2801              CMP      r0,#1                 ;3144
0024c8  d105              BNE      |L1.9430|
                  |L1.9418|
0024ca  7850              LDRB     r0,[r2,#1]            ;3144  ; a_ind
0024cc  b918              CBNZ     r0,|L1.9430|
0024ce  4854              LDR      r0,|L1.9760|
0024d0  7800              LDRB     r0,[r0,#0]            ;3144  ; MNEMO_ON
0024d2  2855              CMP      r0,#0x55              ;3144
0024d4  d003              BEQ      |L1.9438|
                  |L1.9430|
;;;3147   	}
;;;3148   else mnemo_cnt=MNEMO_TIME;
0024d6  4853              LDR      r0,|L1.9764|
0024d8  8800              LDRH     r0,[r0,#0]  ; MNEMO_TIME
0024da  7008              STRB     r0,[r1,#0]
                  |L1.9436|
;;;3149   }
0024dc  4770              BX       lr
                  |L1.9438|
0024de  7808              LDRB     r0,[r1,#0]            ;3146  ; mnemo_cnt
0024e0  2800              CMP      r0,#0                 ;3146
0024e2  d0fb              BEQ      |L1.9436|
0024e4  f1a00001          SUB      r0,r0,#1              ;3146
0024e8  7008              STRB     r0,[r1,#0]            ;3146
0024ea  4770              BX       lr
;;;3150   
                          ENDP

                  adc_init PROC
;;;3151   //-----------------------------------------------
;;;3152   void adc_init(void)
0024ec  484e              LDR      r0,|L1.9768|
;;;3153   {
;;;3154   
;;;3155   SET_REG(LPC_PINCON->PINSEL1,1,(25-16)*2,2);
0024ee  6841              LDR      r1,[r0,#4]
0024f0  f4212140          BIC      r1,r1,#0xc0000
0024f4  f4412180          ORR      r1,r1,#0x40000
0024f8  6041              STR      r1,[r0,#4]
;;;3156   SET_REG(LPC_PINCON->PINSEL1,1,(24-16)*2,2);
0024fa  6841              LDR      r1,[r0,#4]
0024fc  f4213140          BIC      r1,r1,#0x30000
002500  f4413180          ORR      r1,r1,#0x10000
002504  6041              STR      r1,[r0,#4]
;;;3157   SET_REG(LPC_PINCON->PINSEL1,1,(23-16)*2,2);
002506  6841              LDR      r1,[r0,#4]
002508  f4214140          BIC      r1,r1,#0xc000
00250c  f4414180          ORR      r1,r1,#0x4000
002510  6041              STR      r1,[r0,#4]
;;;3158   
;;;3159   
;;;3160   SET_REG(LPC_PINCON->PINMODE1,2,(25-16)*2,2);
002512  6c41              LDR      r1,[r0,#0x44]
002514  f4212140          BIC      r1,r1,#0xc0000
002518  f4412100          ORR      r1,r1,#0x80000
00251c  6441              STR      r1,[r0,#0x44]
;;;3161   SET_REG(LPC_PINCON->PINMODE1,2,(24-16)*2,2);
00251e  6c41              LDR      r1,[r0,#0x44]
002520  f4213140          BIC      r1,r1,#0x30000
002524  f4413100          ORR      r1,r1,#0x20000
002528  6441              STR      r1,[r0,#0x44]
;;;3162   SET_REG(LPC_PINCON->PINMODE1,2,(23-16)*2,2);
00252a  6c41              LDR      r1,[r0,#0x44]
00252c  f4214140          BIC      r1,r1,#0xc000
002530  f4414100          ORR      r1,r1,#0x8000
002534  6441              STR      r1,[r0,#0x44]
;;;3163   
;;;3164   SET_REG(LPC_ADC->ADCR,0,24,3);
002536  483d              LDR      r0,|L1.9772|
002538  6801              LDR      r1,[r0,#0]
00253a  f02161e0          BIC      r1,r1,#0x7000000
00253e  6001              STR      r1,[r0,#0]
;;;3165   
;;;3166   SET_REG(LPC_ADC->ADCR,1,21,1);
002540  6801              LDR      r1,[r0,#0]
002542  f4411100          ORR      r1,r1,#0x200000
002546  6001              STR      r1,[r0,#0]
;;;3167   SET_REG(LPC_ADC->ADCR,0,16,1);
002548  6801              LDR      r1,[r0,#0]
00254a  f4213180          BIC      r1,r1,#0x10000
00254e  6001              STR      r1,[r0,#0]
;;;3168   SET_REG(LPC_ADC->ADCR,1,8,8);
002550  6801              LDR      r1,[r0,#0]
002552  f421417f          BIC      r1,r1,#0xff00
002556  f4417180          ORR      r1,r1,#0x100
00255a  6001              STR      r1,[r0,#0]
;;;3169   
;;;3170   //SET_REG(LPC_GPIO0->FIODIR,7,5,3);
;;;3171   //SET_REG(LPC_GPIO0->FIOPIN,4,5,3);
;;;3172   	
;;;3173   	/*if(adc_ch<=7)*///SET_REG(LPC_ADC->ADCR,1<<5,0,8);
;;;3174        /*else if(adc_ch==8) SET_REG(LPC_ADC->ADCR,1<<2,0,8);
;;;3175        else SET_REG(LPC_ADC->ADCR,1<<4,0,8);*/
;;;3176   
;;;3177   LPC_ADC->ADINTEN     =  (1<< 8);      /* global enable interrupt            */
00255c  f44f7180          MOV      r1,#0x100
002560  60c1              STR      r1,[r0,#0xc]
002562  4833              LDR      r0,|L1.9776|
002564  f44f0180          MOV      r1,#0x400000
002568  6001              STR      r1,[r0,#0]
;;;3178   
;;;3179   NVIC_EnableIRQ(ADC_IRQn);             /* enable ADC Interrupt               */
;;;3180   
;;;3181   
;;;3182   }
00256a  4770              BX       lr
;;;3183   
                          ENDP

                  adc_drv7 PROC
;;;3184   //-----------------------------------------------
;;;3185   void adc_drv7(void) //(UÒÂÚË - ÔÓÒÚÓˇÌÍ‡)
00256c  e92d41f0          PUSH     {r4-r8,lr}
;;;3186   {
;;;3187   //int temp_S;
;;;3188   //char i;
;;;3189   //signed short temp_SS;
;;;3190   
;;;3191   adc_self_ch_disp[0]=abs_pal(adc_self_ch_buff[1]-adc_self_ch_buff[0]);//adc_self_ch_buff[0]&0x0f80;
002570  4c30              LDR      r4,|L1.9780|
002572  8860              LDRH     r0,[r4,#2]  ; adc_self_ch_buff
002574  8821              LDRH     r1,[r4,#0]  ; adc_self_ch_buff
002576  1a40              SUBS     r0,r0,r1
002578  b200              SXTH     r0,r0
00257a  f7fffffe          BL       abs_pal
00257e  1da6              ADDS     r6,r4,#6
002580  8030              STRH     r0,[r6,#0]
;;;3192   adc_self_ch_disp[1]=abs_pal(adc_self_ch_buff[2]-adc_self_ch_buff[1]);//adc_self_ch_buff[1]&0x0f80;
002582  88a0              LDRH     r0,[r4,#4]  ; adc_self_ch_buff
002584  8861              LDRH     r1,[r4,#2]  ; adc_self_ch_buff
002586  1a40              SUBS     r0,r0,r1
002588  b200              SXTH     r0,r0
00258a  f7fffffe          BL       abs_pal
00258e  8070              STRH     r0,[r6,#2]
;;;3193   adc_self_ch_disp[2]=abs_pal(adc_self_ch_buff[2]-adc_self_ch_buff[0]);//adc_self_ch_buff[2]&0x0f80;
002590  88a0              LDRH     r0,[r4,#4]  ; adc_self_ch_buff
002592  8821              LDRH     r1,[r4,#0]  ; adc_self_ch_buff
002594  1a40              SUBS     r0,r0,r1
002596  b200              SXTH     r0,r0
002598  f7fffffe          BL       abs_pal
00259c  80b0              STRH     r0,[r6,#4]
;;;3194   
;;;3195   //adc_self_ch_disp[0]=adc_self_ch_buff[0]&0x0ff0;
;;;3196   //adc_self_ch_disp[1]=adc_self_ch_buff[1]&0x0ff0;
;;;3197   //adc_self_ch_disp[2]=adc_self_ch_buff[2]&0x0ff0;
;;;3198   
;;;3199   
;;;3200   if(adc_self_ch_disp[2]<300)//==adc_self_ch_disp[2])
00259e  f44f7196          MOV      r1,#0x12c
;;;3201   	{
;;;3202   	adc_result=adc_self_ch_buff[2];
0025a2  f1a405b6          SUB      r5,r4,#0xb6
0025a6  4288              CMP      r0,r1                 ;3200
0025a8  da02              BGE      |L1.9648|
0025aa  88a0              LDRH     r0,[r4,#4]  ; adc_self_ch_buff
0025ac  8628              STRH     r0,[r5,#0x30]
0025ae  e00c              B        |L1.9674|
                  |L1.9648|
;;;3203   	} 
;;;3204   else if(adc_self_ch_disp[1]<300)//==adc_self_ch_disp[2])
0025b0  f9b60002          LDRSH    r0,[r6,#2]  ; adc_self_ch_disp
0025b4  4288              CMP      r0,r1
0025b6  da02              BGE      |L1.9662|
;;;3205   	{
;;;3206   	adc_result=adc_self_ch_buff[1];
0025b8  8860              LDRH     r0,[r4,#2]  ; adc_self_ch_buff
0025ba  8628              STRH     r0,[r5,#0x30]
0025bc  e005              B        |L1.9674|
                  |L1.9662|
;;;3207   	}
;;;3208   else if(adc_self_ch_disp[0]<300)//==adc_self_ch_disp[1])
0025be  f9b60000          LDRSH    r0,[r6,#0]  ; adc_self_ch_disp
0025c2  4288              CMP      r0,r1
0025c4  da01              BGE      |L1.9674|
;;;3209   	{
;;;3210   	adc_result=adc_self_ch_buff[0];
0025c6  8820              LDRH     r0,[r4,#0]  ; adc_self_ch_buff
0025c8  8628              STRH     r0,[r5,#0x30]
                  |L1.9674|
;;;3211   	}
;;;3212       //adc_result=92;
;;;3213   
;;;3214   if(adc_ch_net)
0025ca  78ef              LDRB     r7,[r5,#3]  ; adc_ch_net
0025cc  2600              MOVS     r6,#0
0025ce  b3af              CBZ      r7,|L1.9788|
;;;3215   	{
;;;3216   
;;;3217   	main_power_buffer[0]+=(long)(adc_result);
0025d0  4819              LDR      r0,|L1.9784|
0025d2  f9b51030          LDRSH    r1,[r5,#0x30]  ; adc_result
0025d6  6802              LDR      r2,[r0,#0]  ; main_power_buffer
0025d8  440a              ADD      r2,r2,r1
0025da  6002              STR      r2,[r0,#0]  ; main_power_buffer
;;;3218   	main_power_buffer[1]+=(long)(adc_result);
0025dc  6842              LDR      r2,[r0,#4]  ; main_power_buffer
0025de  440a              ADD      r2,r2,r1
0025e0  6042              STR      r2,[r0,#4]  ; main_power_buffer
;;;3219   	main_power_buffer[2]+=(long)(adc_result);
0025e2  e02c              B        |L1.9790|
                  |L1.9700|
                          DCD      Uvv_eb2
                  |L1.9704|
                          DCD      Kpes_eb2
                  |L1.9708|
                          DCD      Upes_eb2
                  |L1.9712|
                          DCD      t_ext
                  |L1.9716|
                          DCD      ibt
                  |L1.9720|
                          DCD      t_box
                  |L1.9724|
                          DCD      t_ext_can_nd
                  |L1.9728|
                          DCD      t_ext_can
                  |L1.9732|
                          DCD      BAT_IS_ON
                  |L1.9736|
                          DCD      load_I
                  |L1.9740|
                          DCD      Isumm
                  |L1.9744|
                          DCD      NUMINV
                  |L1.9748|
                          DCD      inv
                  |L1.9752|
                          DCD      a_ind
                  |L1.9756|
                          DCD      mnemo_cnt
                  |L1.9760|
                          DCD      MNEMO_ON
                  |L1.9764|
                          DCD      MNEMO_TIME
                  |L1.9768|
                          DCD      0x4002c000
                  |L1.9772|
                          DCD      0x40034000
                  |L1.9776|
                          DCD      0xe000e100
                  |L1.9780|
                          DCD      ||area_number.23||+0xb6
                  |L1.9784|
                          DCD      ||.bss||+0x420
                  |L1.9788|
00263c  e01c              B        |L1.9848|
                  |L1.9790|
00263e  6882              LDR      r2,[r0,#8]  ; main_power_buffer
002640  440a              ADD      r2,r2,r1
002642  6082              STR      r2,[r0,#8]  ; main_power_buffer
;;;3220   	main_power_buffer[3]+=(long)(adc_result);
002644  68c2              LDR      r2,[r0,#0xc]  ; main_power_buffer
002646  4411              ADD      r1,r1,r2
002648  60c1              STR      r1,[r0,#0xc]  ; main_power_buffer
;;;3221   
;;;3222   	adc_net_buff_cnt++;
00264a  8f29              LDRH     r1,[r5,#0x38]  ; adc_net_buff_cnt
00264c  f1010101          ADD      r1,r1,#1
002650  b209              SXTH     r1,r1
002652  8729              STRH     r1,[r5,#0x38]
;;;3223   	if(adc_net_buff_cnt>=0x1000)
002654  f5b15f80          CMP      r1,#0x1000
002658  db00              BLT      |L1.9820|
;;;3224   		{
;;;3225   		adc_net_buff_cnt=0;
00265a  872e              STRH     r6,[r5,#0x38]
                  |L1.9820|
;;;3226   		}
;;;3227   	if((adc_net_buff_cnt&0x03ff)==0)
00265c  f9b51038          LDRSH    r1,[r5,#0x38]  ; adc_net_buff_cnt
002660  058a              LSLS     r2,r1,#22
002662  d12f              BNE      |L1.9924|
;;;3228   		{
;;;3229   		#ifdef UKU_220
;;;3230   		net_buff_=(short)((main_power_buffer[adc_net_buff_cnt>>10])>>11);
;;;3231   		#else
;;;3232   		#ifdef UKU_220_V2
;;;3233   		net_buff_=(short)((main_power_buffer[adc_net_buff_cnt>>10])>>11);
;;;3234   		#else
;;;3235   		net_buff_=(short)((main_power_buffer[adc_net_buff_cnt>>10])>>8);
002664  ea4f21a1          ASR      r1,r1,#10
002668  f8502021          LDR      r2,[r0,r1,LSL #2]
00266c  ea4f2222          ASR      r2,r2,#8
002670  85ea              STRH     r2,[r5,#0x2e]
;;;3236   		#endif
;;;3237   		#endif
;;;3238   		main_power_buffer[adc_net_buff_cnt>>10]=0;
002672  f8406021          STR      r6,[r0,r1,LSL #2]
002676  e025              B        |L1.9924|
                  |L1.9848|
;;;3239   		}
;;;3240   
;;;3241   
;;;3242   	} 
;;;3243   else if(!adc_ch_net)
;;;3244   	{
;;;3245   	adc_buff[adc_ch][adc_ch_cnt]=(long)adc_result;
002678  48f8              LDR      r0,|L1.10844|
00267a  792c              LDRB     r4,[r5,#4]  ; adc_ch
00267c  796a              LDRB     r2,[r5,#5]  ; adc_ch_cnt
00267e  eb001384          ADD      r3,r0,r4,LSL #6
002682  f9b51030          LDRSH    r1,[r5,#0x30]  ; adc_result
002686  f8431022          STR      r1,[r3,r2,LSL #2]
;;;3246   	
;;;3247   	if((adc_ch_cnt&0x03)==0)
00268a  0790              LSLS     r0,r2,#30
00268c  d10d              BNE      |L1.9898|
;;;3248   		{
;;;3249   		long temp_L;
;;;3250   		char i;
;;;3251   		temp_L=0;
00268e  4601              MOV      r1,r0
                  |L1.9872|
;;;3252   		for(i=0;i<16;i++)
;;;3253   			{
;;;3254   			temp_L+=adc_buff[adc_ch][i];
002690  f853c020          LDR      r12,[r3,r0,LSL #2]
002694  4461              ADD      r1,r1,r12
002696  f1000001          ADD      r0,r0,#1              ;3252
00269a  b2c0              UXTB     r0,r0                 ;3252
00269c  2810              CMP      r0,#0x10              ;3252
00269e  d3f7              BCC      |L1.9872|
;;;3255   			}
;;;3256   		adc_buff_[adc_ch]= (short)(temp_L>>4);
0026a0  ea4f1021          ASR      r0,r1,#4
0026a4  49ee              LDR      r1,|L1.10848|
0026a6  f8210014          STRH     r0,[r1,r4,LSL #1]
                  |L1.9898|
;;;3257   
;;;3258   		//adc_buff_[3]=346;
;;;3259   		}
;;;3260   	if(++adc_ch>=16) 
0026aa  1c64              ADDS     r4,r4,#1
0026ac  b2e0              UXTB     r0,r4
0026ae  7128              STRB     r0,[r5,#4]
0026b0  2810              CMP      r0,#0x10
0026b2  d307              BCC      |L1.9924|
;;;3261   		{
;;;3262   		adc_ch=0;
0026b4  712e              STRB     r6,[r5,#4]
;;;3263   		adc_ch_cnt++;
0026b6  f1020201          ADD      r2,r2,#1
0026ba  b2d0              UXTB     r0,r2
0026bc  7168              STRB     r0,[r5,#5]
;;;3264   		if(adc_ch_cnt>=16)adc_ch_cnt=0;
0026be  2810              CMP      r0,#0x10
0026c0  d300              BCC      |L1.9924|
0026c2  716e              STRB     r6,[r5,#5]
                  |L1.9924|
;;;3265   		}
;;;3266   	}
;;;3267   
;;;3268   //adc_buff[adc_ch][adc_cnt1]=(adc_self_ch_buff[2]+adc_self_ch_buff[1])/2;
;;;3269   
;;;3270   //if(adc_buff[adc_ch][adc_cnt1]<adc_buff_min[adc_ch])adc_buff_min[adc_ch]=adc_buff[adc_ch][adc_cnt1];
;;;3271   //if(adc_buff[adc_ch][adc_cnt1]>adc_buff_max[adc_ch])adc_buff_max[adc_ch]=adc_buff[adc_ch][adc_cnt1];
;;;3272   /*
;;;3273   	{
;;;3274   	if((adc_cnt1&0x03)==0)
;;;3275   		{
;;;3276   		temp_S=0;
;;;3277   		for(i=0;i<16;i++)
;;;3278   			{
;;;3279   			temp_S+=adc_buff[adc_ch][i];
;;;3280   			} 
;;;3281            	adc_buff_[adc_ch]=temp_S>>4;
;;;3282             }
;;;3283   	}*/
;;;3284   
;;;3285   
;;;3286   		  
;;;3287   
;;;3288   adc_self_ch_cnt=0;
0026c4  70ae              STRB     r6,[r5,#2]
;;;3289   
;;;3290   adc_ch_net++;
0026c6  f1070701          ADD      r7,r7,#1
;;;3291   adc_ch_net&=1;
0026ca  f0070001          AND      r0,r7,#1
0026ce  70e8              STRB     r0,[r5,#3]
;;;3292   
;;;3293   //SET_REG(LPC_GPIO0->FIODIR,7,5,3);
;;;3294   //SET_REG(LPC_GPIO0->FIOPIN,adc_ch,5,3);
;;;3295   
;;;3296   if(adc_ch_net)
;;;3297   	{
;;;3298   	//LPC_GPIO2->FIODIR|=(1<<7);
;;;3299   	//LPC_GPIO2->FIOPIN|=(1<<7);
;;;3300   	SET_REG(LPC_ADC->ADCR,1<<2,0,8);
0026d0  4ae4              LDR      r2,|L1.10852|
0026d2  b130              CBZ      r0,|L1.9954|
0026d4  6810              LDR      r0,[r2,#0]
0026d6  f02000ff          BIC      r0,r0,#0xff
0026da  f1000004          ADD      r0,r0,#4
0026de  6010              STR      r0,[r2,#0]
0026e0  e03d              B        |L1.10078|
                  |L1.9954|
;;;3301   	}
;;;3302   else
;;;3303   	{
;;;3304   	//LPC_GPIO2->FIODIR|=(1<<7);
;;;3305   	//LPC_GPIO2->FIOPIN&=~(1<<7);
;;;3306   	if(!(adc_ch&(1<<3)))SET_REG(LPC_ADC->ADCR,1<<0,0,8);
0026e2  7929              LDRB     r1,[r5,#4]  ; adc_ch
0026e4  0708              LSLS     r0,r1,#28
0026e6  d406              BMI      |L1.9974|
0026e8  6810              LDR      r0,[r2,#0]
0026ea  f02000ff          BIC      r0,r0,#0xff
0026ee  f1000001          ADD      r0,r0,#1
0026f2  6010              STR      r0,[r2,#0]
0026f4  e005              B        |L1.9986|
                  |L1.9974|
;;;3307   	else 			SET_REG(LPC_ADC->ADCR,1<<1,0,8);
0026f6  6810              LDR      r0,[r2,#0]
0026f8  f02000ff          BIC      r0,r0,#0xff
0026fc  f1000002          ADD      r0,r0,#2
002700  6010              STR      r0,[r2,#0]
                  |L1.9986|
;;;3308   
;;;3309   
;;;3310   	SET_REG(LPC_GPIO0->FIODIR,1,28,1);
002702  48d9              LDR      r0,|L1.10856|
002704  6803              LDR      r3,[r0,#0]
002706  f0435380          ORR      r3,r3,#0x10000000
00270a  6003              STR      r3,[r0,#0]
;;;3311   	SET_REG(LPC_GPIO1->FIODIR,1,30,1);
00270c  6a03              LDR      r3,[r0,#0x20]
00270e  f0434380          ORR      r3,r3,#0x40000000
002712  6203              STR      r3,[r0,#0x20]
;;;3312   	SET_REG(LPC_GPIO3->FIODIR,1,26,1);
002714  6e03              LDR      r3,[r0,#0x60]
002716  f0436380          ORR      r3,r3,#0x4000000
00271a  6603              STR      r3,[r0,#0x60]
;;;3313   
;;;3314   	if(!(adc_ch&(1<<0)))SET_REG(LPC_GPIO0->FIOPIN,0,28,1);
00271c  07cb              LSLS     r3,r1,#31
00271e  d00a              BEQ      |L1.10038|
;;;3315   	else 			SET_REG(LPC_GPIO0->FIOPIN,1,28,1);
002720  6943              LDR      r3,[r0,#0x14]
002722  f0435380          ORR      r3,r3,#0x10000000
002726  6143              STR      r3,[r0,#0x14]
                  |L1.10024|
;;;3316   
;;;3317   	if(!(adc_ch&(1<<1)))SET_REG(LPC_GPIO1->FIOPIN,0,30,1);
002728  078b              LSLS     r3,r1,#30
00272a  d409              BMI      |L1.10048|
00272c  6b43              LDR      r3,[r0,#0x34]
00272e  f0234380          BIC      r3,r3,#0x40000000
002732  6343              STR      r3,[r0,#0x34]
002734  e008              B        |L1.10056|
                  |L1.10038|
002736  6943              LDR      r3,[r0,#0x14]         ;3314
002738  f0235380          BIC      r3,r3,#0x10000000     ;3314
00273c  6143              STR      r3,[r0,#0x14]         ;3314
00273e  e7f3              B        |L1.10024|
                  |L1.10048|
;;;3318   	else 			SET_REG(LPC_GPIO1->FIOPIN,1,30,1);
002740  6b43              LDR      r3,[r0,#0x34]
002742  f0434380          ORR      r3,r3,#0x40000000
002746  6343              STR      r3,[r0,#0x34]
                  |L1.10056|
;;;3319   
;;;3320   	if(!(adc_ch&(1<<2)))SET_REG(LPC_GPIO3->FIOPIN,0,26,1);
002748  0749              LSLS     r1,r1,#29
00274a  d404              BMI      |L1.10070|
00274c  6f41              LDR      r1,[r0,#0x74]
00274e  f0216180          BIC      r1,r1,#0x4000000
002752  6741              STR      r1,[r0,#0x74]
002754  e003              B        |L1.10078|
                  |L1.10070|
;;;3321   	else 			SET_REG(LPC_GPIO3->FIOPIN,1,26,1);
002756  6f41              LDR      r1,[r0,#0x74]
002758  f0416180          ORR      r1,r1,#0x4000000
00275c  6741              STR      r1,[r0,#0x74]
                  |L1.10078|
;;;3322   	}
;;;3323   	
;;;3324   
;;;3325   
;;;3326   
;;;3327   LPC_ADC->ADCR |=  (1<<24);
00275e  6810              LDR      r0,[r2,#0]
002760  f0407080          ORR      r0,r0,#0x1000000
002764  6010              STR      r0,[r2,#0]
;;;3328   
;;;3329   }
002766  e8bd81f0          POP      {r4-r8,pc}
;;;3330   
                          ENDP

                  avg_hndl PROC
;;;3587   //-----------------------------------------------
;;;3588   void avg_hndl(void)
00276a  b5f0              PUSH     {r4-r7,lr}
;;;3589   { 
;;;3590   char i;
;;;3591   
;;;3592   //#define AVGCNTMAX	5
;;;3593   if(avg_main_cnt)
00276c  4dbf              LDR      r5,|L1.10860|
00276e  f9b5002a          LDRSH    r0,[r5,#0x2a]  ; avg_main_cnt
002772  b118              CBZ      r0,|L1.10108|
;;;3594   	{
;;;3595   	avg_main_cnt--;
002774  f1a00001          SUB      r0,r0,#1
002778  8568              STRH     r0,[r5,#0x2a]
;;;3596   	goto avg_hndl_end;
00277a  e096              B        |L1.10410|
                  |L1.10108|
;;;3597   	}                 
;;;3598   
;;;3599   avg_num=0;
00277c  f04f0600          MOV      r6,#0
002780  732e              STRB     r6,[r5,#0xc]
;;;3600   
;;;3601   for(i=0;i<NUMIST;i++)
002782  4630              MOV      r0,r6
002784  49bb              LDR      r1,|L1.10868|
;;;3602   	{
;;;3603   	if((bps[i]._state==bsWRK)&&(bps[i]._cnt<20))avg_num++;
002786  4bba              LDR      r3,|L1.10864|
002788  f9b12000          LDRSH    r2,[r1,#0]            ;3601
00278c  e012              B        |L1.10164|
                  |L1.10126|
00278e  ebc001c0          RSB      r1,r0,r0,LSL #3
002792  eb011100          ADD      r1,r1,r0,LSL #4
002796  eb030181          ADD      r1,r3,r1,LSL #2
00279a  788c              LDRB     r4,[r1,#2]
00279c  2c01              CMP      r4,#1
00279e  d106              BNE      |L1.10158|
0027a0  78c9              LDRB     r1,[r1,#3]
0027a2  2914              CMP      r1,#0x14
0027a4  d203              BCS      |L1.10158|
0027a6  7b29              LDRB     r1,[r5,#0xc]  ; avg_num
0027a8  f1010101          ADD      r1,r1,#1
0027ac  7329              STRB     r1,[r5,#0xc]
                  |L1.10158|
0027ae  f1000001          ADD      r0,r0,#1              ;3601
0027b2  b2c0              UXTB     r0,r0                 ;3601
                  |L1.10164|
0027b4  4290              CMP      r0,r2                 ;3601
0027b6  dbea              BLT      |L1.10126|
;;;3604   	}
;;;3605   
;;;3606   /*if((K[NUMI]>=1)&&(bps_state[0]==ssWRK))	avg_num++;
;;;3607   if((K[NUMI]>=2)&&(bps_state[1]==ssWRK))	avg_num++;
;;;3608   if((K[NUMI]>=3)&&(bps_state[2]==ssWRK))	avg_num++;*/
;;;3609   
;;;3610   	
;;;3611   if(avg_num<2)
0027b8  7b2f              LDRB     r7,[r5,#0xc]  ; avg_num
0027ba  2f02              CMP      r7,#2
0027bc  d375              BCC      |L1.10410|
;;;3612   	{
;;;3613   	goto avg_hndl_end;
;;;3614   	}
;;;3615   	
;;;3616   else
;;;3617   	{
;;;3618   	i_avg_min=5000;
0027be  4cab              LDR      r4,|L1.10860|
0027c0  f2413088          MOV      r0,#0x1388
0027c4  f1040480          ADD      r4,r4,#0x80
0027c8  6060              STR      r0,[r4,#4]  ; i_avg_min
;;;3619   	i_avg_max=0;
0027ca  6026              STR      r6,[r4,#0]  ; i_avg_max
;;;3620   	i_avg_summ=0;
0027cc  60a6              STR      r6,[r4,#8]  ; i_avg_summ
;;;3621   	for(i=0;i<NUMIST;i++)
0027ce  f04f0100          MOV      r1,#0
0027d2  e01c              B        |L1.10254|
                  |L1.10196|
;;;3622   		{
;;;3623   		if(bps[i]._state==bsWRK)
0027d4  ebc100c1          RSB      r0,r1,r1,LSL #3
0027d8  eb001001          ADD      r0,r0,r1,LSL #4
0027dc  eb030080          ADD      r0,r3,r0,LSL #2
0027e0  f890c002          LDRB     r12,[r0,#2]
0027e4  f1bc0f01          CMP      r12,#1
0027e8  d10e              BNE      |L1.10248|
;;;3624   			{
;;;3625   			if(bps[i]._Ii>i_avg_max)i_avg_max=bps[i]._Ii;
0027ea  6a40              LDR      r0,[r0,#0x24]
0027ec  f8d4c000          LDR      r12,[r4,#0]  ; i_avg_max
0027f0  4560              CMP      r0,r12
0027f2  dd00              BLE      |L1.10230|
0027f4  6020              STR      r0,[r4,#0]  ; i_avg_max
                  |L1.10230|
;;;3626   			if(bps[i]._Ii<i_avg_min)i_avg_min=bps[i]._Ii;
0027f6  f8d4c004          LDR      r12,[r4,#4]  ; i_avg_min
0027fa  4560              CMP      r0,r12
0027fc  da00              BGE      |L1.10240|
0027fe  6060              STR      r0,[r4,#4]  ; i_avg_min
                  |L1.10240|
;;;3627   			
;;;3628   			i_avg_summ+=bps[i]._Ii;
002800  f8d4c008          LDR      r12,[r4,#8]  ; i_avg_summ
002804  4460              ADD      r0,r0,r12
002806  60a0              STR      r0,[r4,#8]  ; i_avg_summ
                  |L1.10248|
002808  f1010101          ADD      r1,r1,#1              ;3621
00280c  b2c9              UXTB     r1,r1                 ;3621
                  |L1.10254|
00280e  4291              CMP      r1,r2                 ;3621
002810  dbe0              BLT      |L1.10196|
;;;3629   			}
;;;3630   		}
;;;3631   	i_avg=i_avg_summ/avg_num;	
002812  68a0              LDR      r0,[r4,#8]  ; i_avg_summ
002814  fb90f7f7          SDIV     r7,r0,r7
002818  60e7              STR      r7,[r4,#0xc]  ; i_avg
;;;3632   	
;;;3633   	if(i_avg_min==0)i_avg_min=1;
00281a  6860              LDR      r0,[r4,#4]  ; i_avg_min
00281c  2101              MOVS     r1,#1                 ;3603
00281e  b900              CBNZ     r0,|L1.10274|
002820  6061              STR      r1,[r4,#4]  ; i_avg_min
                  |L1.10274|
;;;3634   
;;;3635   	avg=i_avg_max;
002822  6820              LDR      r0,[r4,#0]  ; i_avg_max
;;;3636   	avg*=100;
002824  f04f0c64          MOV      r12,#0x64
002828  fb00f00c          MUL      r0,r0,r12
;;;3637   	avg/=i_avg_min;
00282c  f8d4c004          LDR      r12,[r4,#4]  ; i_avg_min
002830  fb90f0fc          SDIV     r0,r0,r12
002834  6120              STR      r0,[r4,#0x10]  ; avg
;;;3638   
;;;3639   	if(avg>160) bAVG=1;
002836  28a0              CMP      r0,#0xa0
002838  dd00              BLE      |L1.10300|
00283a  72e9              STRB     r1,[r5,#0xb]
                  |L1.10300|
;;;3640   	if(avg<120) bAVG=0;
00283c  2878              CMP      r0,#0x78
00283e  da00              BGE      |L1.10306|
002840  72ee              STRB     r6,[r5,#0xb]
                  |L1.10306|
;;;3641   
;;;3642   	if(bAVG==1)
002842  7ae8              LDRB     r0,[r5,#0xb]  ; bAVG
002844  2801              CMP      r0,#1
002846  d130              BNE      |L1.10410|
;;;3643   		{
;;;3644   		for(i=0;i<NUMIST;i++)
002848  f04f0100          MOV      r1,#0
;;;3645   			{
;;;3646   			if(bps[i]._state==bsWRK)
;;;3647   				{
;;;3648   				if(bps[i]._Ii>i_avg)bps[i]._x_--;
;;;3649   				if(bps[i]._Ii<i_avg)bps[i]._x_++;
;;;3650   			
;;;3651   				if(bps[i]._x_<-50)bps[i]._x_=-50;
00284c  f06f0431          MVN      r4,#0x31
002850  e029              B        |L1.10406|
                  |L1.10322|
002852  ebc100c1          RSB      r0,r1,r1,LSL #3       ;3646
002856  eb001001          ADD      r0,r0,r1,LSL #4       ;3646
00285a  eb030080          ADD      r0,r3,r0,LSL #2       ;3646
00285e  7885              LDRB     r5,[r0,#2]            ;3646
002860  2d01              CMP      r5,#1                 ;3646
002862  d11d              BNE      |L1.10400|
002864  6a45              LDR      r5,[r0,#0x24]         ;3648
002866  42bd              CMP      r5,r7                 ;3648
002868  dd05              BLE      |L1.10358|
00286a  f8b05050          LDRH     r5,[r0,#0x50]         ;3648
00286e  f1a50501          SUB      r5,r5,#1              ;3648
002872  f8a05050          STRH     r5,[r0,#0x50]         ;3648
                  |L1.10358|
002876  da05              BGE      |L1.10372|
002878  f8b05050          LDRH     r5,[r0,#0x50]         ;3649
00287c  f1050501          ADD      r5,r5,#1              ;3649
002880  f8a05050          STRH     r5,[r0,#0x50]         ;3649
                  |L1.10372|
002884  f9b05050          LDRSH    r5,[r0,#0x50]
002888  42a5              CMP      r5,r4
00288a  da01              BGE      |L1.10384|
00288c  f8a04050          STRH     r4,[r0,#0x50]
                  |L1.10384|
;;;3652   				if(bps[i]._x_>50)bps[i]._x_=50;	
002890  f9b05050          LDRSH    r5,[r0,#0x50]
002894  2d32              CMP      r5,#0x32
002896  dd03              BLE      |L1.10400|
002898  f04f0532          MOV      r5,#0x32
00289c  f8a05050          STRH     r5,[r0,#0x50]
                  |L1.10400|
0028a0  f1010101          ADD      r1,r1,#1              ;3644
0028a4  b2c9              UXTB     r1,r1                 ;3644
                  |L1.10406|
0028a6  4291              CMP      r1,r2                 ;3644
0028a8  dbd3              BLT      |L1.10322|
                  |L1.10410|
;;;3653   				}
;;;3654   			}		
;;;3655   		}			
;;;3656   	}   	 
;;;3657   
;;;3658   
;;;3659   avg_hndl_end:
;;;3660   __nop();  
0028aa  bf00              NOP      
;;;3661   }
0028ac  bdf0              POP      {r4-r7,pc}
;;;3662   
                          ENDP

                  rele_hndl PROC
;;;3675   //*************-----------------------------------------------
;;;3676   void rele_hndl(void)
0028ae  e92d5ff0          PUSH     {r4-r12,lr}
;;;3677   {
;;;3678   //static char cnt_rel_sam;
;;;3679   //char temp;
;;;3680   
;;;3681   //temp=0;
;;;3682   
;;;3683   
;;;3684   SET_REG(LPC_PINCON->PINSEL0,0,4*2,6*2);
0028b2  4871              LDR      r0,|L1.10872|
0028b4  6801              LDR      r1,[r0,#0]
0028b6  4a71              LDR      r2,|L1.10876|
0028b8  ea010102          AND      r1,r1,r2
0028bc  6001              STR      r1,[r0,#0]
;;;3685   SET_REG(LPC_GPIO0->FIODIR,63,4,6);
0028be  4c6a              LDR      r4,|L1.10856|
0028c0  6821              LDR      r1,[r4,#0]
0028c2  f441717c          ORR      r1,r1,#0x3f0
0028c6  6021              STR      r1,[r4,#0]
;;;3686   SET_REG(LPC_PINCON->PINSEL7,0,(25-16)*2,2);
0028c8  69c1              LDR      r1,[r0,#0x1c]
0028ca  f4212140          BIC      r1,r1,#0xc0000
0028ce  61c1              STR      r1,[r0,#0x1c]
;;;3687   SET_REG(LPC_GPIO3->FIODIR,1,25,1);
0028d0  6e21              LDR      r1,[r4,#0x60]
0028d2  f0417100          ORR      r1,r1,#0x2000000
0028d6  6621              STR      r1,[r4,#0x60]
;;;3688   SET_REG(LPC_PINCON->PINSEL1,0,(29-16)*2,2);
0028d8  6841              LDR      r1,[r0,#4]
0028da  f0216140          BIC      r1,r1,#0xc000000
0028de  6041              STR      r1,[r0,#4]
;;;3689   SET_REG(LPC_GPIO0->FIODIR,1,29,1);
0028e0  6820              LDR      r0,[r4,#0]
0028e2  f0405000          ORR      r0,r0,#0x20000000
0028e6  6020              STR      r0,[r4,#0]
;;;3690   
;;;3691   
;;;3692   
;;;3693   
;;;3694   
;;;3695   
;;;3696   if((((bat[0]._rel_stat)  || (tbatdisable_stat!=tbdsON))&&(tbatdisable_cmnd))	&& (main_1Hz_cnt>5))
0028e8  4866              LDR      r0,|L1.10884|
0028ea  4d65              LDR      r5,|L1.10880|
0028ec  4967              LDR      r1,|L1.10892|
0028ee  7802              LDRB     r2,[r0,#0]  ; tbatdisable_stat
0028f0  4865              LDR      r0,|L1.10888|
0028f2  f895303c          LDRB     r3,[r5,#0x3c]  ; bat
0028f6  f9b11000          LDRSH    r1,[r1,#0]
0028fa  7800              LDRB     r0,[r0,#0]
0028fc  4313              ORRS     r3,r3,r2
0028fe  d007              BEQ      |L1.10512|
002900  b130              CBZ      r0,|L1.10512|
002902  2905              CMP      r1,#5
002904  dd04              BLE      |L1.10512|
;;;3697   	{
;;;3698   	SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_BAT1,1);
002906  69a3              LDR      r3,[r4,#0x18]
002908  f4437380          ORR      r3,r3,#0x100
00290c  61a3              STR      r3,[r4,#0x18]
00290e  e003              B        |L1.10520|
                  |L1.10512|
;;;3699   	}
;;;3700   else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_BAT1,1);	  	
002910  69e3              LDR      r3,[r4,#0x1c]
002912  f4437380          ORR      r3,r3,#0x100
002916  61e3              STR      r3,[r4,#0x1c]
                  |L1.10520|
;;;3701   
;;;3702   if((((bat[1]._rel_stat) || (tbatdisable_stat!=tbdsON))&&(tbatdisable_cmnd))	&& (main_1Hz_cnt>5))
002918  f8953088          LDRB     r3,[r5,#0x88]  ; bat
00291c  4313              ORRS     r3,r3,r2
00291e  d007              BEQ      |L1.10544|
002920  b130              CBZ      r0,|L1.10544|
002922  2905              CMP      r1,#5
002924  dd04              BLE      |L1.10544|
;;;3703   	{
;;;3704   	SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_BAT2,1);
002926  69a0              LDR      r0,[r4,#0x18]
002928  f0400040          ORR      r0,r0,#0x40
00292c  61a0              STR      r0,[r4,#0x18]
00292e  e003              B        |L1.10552|
                  |L1.10544|
;;;3705   	}
;;;3706   else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_BAT2,1);
002930  69e0              LDR      r0,[r4,#0x1c]
002932  f0400040          ORR      r0,r0,#0x40
002936  61e0              STR      r0,[r4,#0x1c]
                  |L1.10552|
;;;3707   
;;;3708   
;;;3709   if(mess_find_unvol((MESS2RELE_HNDL))&&(mess_data[0]==PARAM_RELE_SAMOKALIBR)) 
002938  20d2              MOVS     r0,#0xd2
00293a  f7fffffe          BL       mess_find_unvol
00293e  4d54              LDR      r5,|L1.10896|
002940  b110              CBZ      r0,|L1.10568|
002942  6828              LDR      r0,[r5,#0]  ; mess_data
002944  2864              CMP      r0,#0x64
002946  d048              BEQ      |L1.10714|
                  |L1.10568|
;;;3710   	{
;;;3711   	if(mess_data[1]==1)SET_REG(LPC_GPIO0->FIOSET,1,29,1);
;;;3712   	else if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,29,1);
;;;3713   	}
;;;3714   else SET_REG(LPC_GPIO0->FIOCLR,1,29,1);
002948  69e0              LDR      r0,[r4,#0x1c]
00294a  f0405000          ORR      r0,r0,#0x20000000
00294e  61e0              STR      r0,[r4,#0x1c]
                  |L1.10576|
;;;3715   
;;;3716   
;;;3717   #ifndef UKU2071x
;;;3718   //–ÂÎÂ ‡‚‡ËË ÒÂÚË
;;;3719   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_NET))
;;;3720   	{
;;;3721   	if(mess_data[1]==0) 			SET_REG(LPC_GPIO3->FIOSET,1,SHIFT_REL_AV_NET,1);
;;;3722   	else 						SET_REG(LPC_GPIO3->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;3723   	}
;;;3724   else	if(!(avar_ind_stat&0x00000001)) 	SET_REG(LPC_GPIO3->FIOSET,1,SHIFT_REL_AV_NET,1);
;;;3725   else 							SET_REG(LPC_GPIO3->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;3726   #endif
;;;3727   #ifdef UKU2071x
;;;3728   //–ÂÎÂ ‡‚‡ËË ÒÂÚË
;;;3729   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_NET))
002950  20d2              MOVS     r0,#0xd2
002952  f7fffffe          BL       mess_find_unvol
;;;3730   	{
;;;3731   	if(mess_data[1]==0)				SET_REG(LPC_GPIO3->FIOCLR,1,SHIFT_REL_AV_NET,1); 
;;;3732   	else 						SET_REG(LPC_GPIO3->FIOSET,1,SHIFT_REL_AV_NET,1);
;;;3733   	}
;;;3734   else	if(!(avar_ind_stat&0x00000001))	SET_REG(LPC_GPIO3->FIOCLR,1,SHIFT_REL_AV_NET,1);
002956  4e4f              LDR      r6,|L1.10900|
002958  b110              CBZ      r0,|L1.10592|
00295a  6828              LDR      r0,[r5,#0]            ;3729  ; mess_data
00295c  2866              CMP      r0,#0x66              ;3729
00295e  d04b              BEQ      |L1.10744|
                  |L1.10592|
002960  6830              LDR      r0,[r6,#0]  ; avar_ind_stat
002962  07c0              LSLS     r0,r0,#31
002964  d054              BEQ      |L1.10768|
;;;3735   else 					  		SET_REG(LPC_GPIO3->FIOSET,1,SHIFT_REL_AV_NET,1);
002966  6fa0              LDR      r0,[r4,#0x78]
002968  f0407000          ORR      r0,r0,#0x2000000
00296c  67a0              STR      r0,[r4,#0x78]
                  |L1.10606|
;;;3736   #endif
;;;3737   
;;;3738   #ifdef UKU_3U
;;;3739   //–ÂÎÂ ‡‚‡ËÈ ·‡Ú‡ÂÈ
;;;3740   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BAT1))
;;;3741   	{
;;;3742   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT1,1);
;;;3743   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT1,1);
;;;3744        }
;;;3745   else 
;;;3746   	{
;;;3747   	if(!(avar_ind_stat&0x00000002)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT1,1);
;;;3748        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT1,1);
;;;3749   	} 
;;;3750   
;;;3751   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BAT2))
;;;3752   	{
;;;3753   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT2,1);
;;;3754   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT2,1);
;;;3755        }
;;;3756   else 
;;;3757   	{
;;;3758   	if(!(avar_ind_stat&0x00000004)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT2,1);
;;;3759        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT2,1);
;;;3760   	} 
;;;3761   
;;;3762   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BPS))
;;;3763   	{
;;;3764   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
;;;3765   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
;;;3766        }
;;;3767   else 
;;;3768   	{
;;;3769   	if(!(avar_ind_stat&0x000007f8)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
;;;3770        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
;;;3771   	} 
;;;3772   
;;;3773   #endif
;;;3774   
;;;3775   
;;;3776   #ifdef UKU_GLONASS
;;;3777   //–ÂÎÂ ‡‚‡ËÈ ·‡Ú‡ÂÈ
;;;3778   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BAT1))
;;;3779   	{
;;;3780   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT1,1);
;;;3781   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT1,1);
;;;3782        }
;;;3783   else 
;;;3784   	{
;;;3785   	if(!(avar_ind_stat&0x00000002)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT1,1);
;;;3786        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT1,1);
;;;3787   	} 
;;;3788   
;;;3789   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BAT2))
;;;3790   	{
;;;3791   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT2,1);
;;;3792   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT2,1);
;;;3793        }
;;;3794   else 
;;;3795   	{
;;;3796   	if(!(avar_ind_stat&0x00000004)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT2,1);
;;;3797        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT2,1);
;;;3798   	} 
;;;3799   
;;;3800   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BPS))
;;;3801   	{
;;;3802   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
;;;3803   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
;;;3804        }
;;;3805   else 
;;;3806   	{
;;;3807   	if(!(avar_ind_stat&0x000007f8)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
;;;3808        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
;;;3809   	} 
;;;3810   
;;;3811   #endif
;;;3812   
;;;3813   #ifdef U 
;;;3814   
;;;3815   #endif
;;;3816   
;;;3817   #ifdef UKU_RSTKM
;;;3818   
;;;3819   //–ÂÎÂ Ó·˘ÂÈ ‡‚‡ËË
;;;3820   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_COMM))
;;;3821   	{
;;;3822   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_COMM,1);
;;;3823   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_COMM,1);
;;;3824   	}
;;;3825   else 
;;;3826   	{
;;;3827        if(  (!(avar_ind_stat&0x00007fff))/* &&
;;;3828             ((!SK_REL_EN[0]) || (sk_av_stat[0]!=sasON))  &&
;;;3829             ((!SK_REL_EN[1]) || (sk_av_stat[1]!=sasON))  &&
;;;3830             ((!SK_REL_EN[2]) || (sk_av_stat[2]!=sasON))  &&
;;;3831             ((!SK_REL_EN[3]) || (sk_av_stat[3]!=sasON))*/  )SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_COMM,1);
;;;3832        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_COMM,1);
;;;3833   	}
;;;3834   	
;;;3835   
;;;3836   //–ÂÎÂ ÓÒ‚Â˘ÂÌËˇ
;;;3837   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_LIGHT))
;;;3838   	{
;;;3839   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LIGHT,1);
;;;3840   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LIGHT,1);
;;;3841        }
;;;3842   else 
;;;3843   	{
;;;3844   	if(sk_av_stat[0]!=sasON) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LIGHT,1);
;;;3845        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LIGHT,1);
;;;3846   	}
;;;3847   
;;;3848   
;;;3849   //–ÂÎÂ ‚˚ÍÎ˛˜ÂÌËˇ Ì‡„ÛÁÍË
;;;3850   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_LOAD_OFF))
;;;3851   	{
;;;3852   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LOAD_OFF,1);
;;;3853   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LOAD_OFF,1);
;;;3854        }
;;;3855   else if(tloaddisable_cmnd==0)
;;;3856   	{
;;;3857   	SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LOAD_OFF,1);
;;;3858   	}
;;;3859   else if((tloaddisable_cmnd)&&(tloaddisable_cmnd<=11))
;;;3860   	{
;;;3861   	SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LOAD_OFF,1);
;;;3862   	}
;;;3863   
;;;3864   else 
;;;3865   	{
;;;3866   	if(!(tloaddisable_stat==tldsON)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LOAD_OFF,1);
;;;3867        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LOAD_OFF,1);
;;;3868   	} 
;;;3869   
;;;3870   //–ÂÎÂ ÓÒÂ‚Ó„Ó ‚ÂÌÚËÎˇÚÓ‡
;;;3871   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_VENT))
;;;3872   	{
;;;3873   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;3874   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT,1);
;;;3875   	}
;;;3876   else 
;;;3877   	{
;;;3878   	if(mixer_vent_stat==mvsOFF) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;3879        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT,1);
;;;3880   	} 
;;;3881   
;;;3882   #endif
;;;3883   
;;;3884   #ifdef UKU_KONTUR
;;;3885   
;;;3886   //–ÂÎÂ Ó·˘ÂÈ ‡‚‡ËË
;;;3887   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_COMM))
;;;3888   	{
;;;3889   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_COMM,1);
;;;3890   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_COMM,1);
;;;3891   	}
;;;3892   else 
;;;3893   	{
;;;3894        if(  (!(avar_ind_stat&0x00007fff)) &&
;;;3895             ((!SK_REL_EN[0]) || (sk_av_stat[0]!=sasON))  &&
;;;3896             ((!SK_REL_EN[1]) || (sk_av_stat[1]!=sasON))  &&
;;;3897             ((!SK_REL_EN[2]) || (sk_av_stat[2]!=sasON))  /*&&
;;;3898             ((!SK_REL_EN[3]) || (sk_av_stat[3]!=sasON))*/  )SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_COMM,1);
;;;3899        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_COMM,1);
;;;3900   	}
;;;3901   
;;;3902   	
;;;3903   //rel_warm_plazma=0;
;;;3904   //–ÂÎÂ ÓÒ‚Â˘ÂÌËˇ   
;;;3905   /*
;;;3906   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_WARM))
;;;3907   	{
;;;3908   	if(mess_data[1]==0)
;;;3909   		{
;;;3910   		SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_WARM,1);
;;;3911   		rel_warm_plazma=1;
;;;3912   		}
;;;3913   	else if(mess_data[1]==1) 
;;;3914   		{
;;;3915   		SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_WARM,1);
;;;3916   		rel_warm_plazma=2;
;;;3917   		}
;;;3918        }
;;;3919   else 
;;;3920   	{
;;;3921   	if(warm_stat_k==wsOFF) 
;;;3922   		{
;;;3923   		SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_WARM,1);
;;;3924   		rel_warm_plazma=3;
;;;3925   		}
;;;3926        else 
;;;3927   		{
;;;3928   		SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_WARM,1);
;;;3929   		rel_warm_plazma=4;
;;;3930   		}
;;;3931   	}
;;;3932   */
;;;3933   //–ÂÎÂ ÓÒ‚Â˘ÂÌËˇ
;;;3934   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_LIGHT))
;;;3935   	{
;;;3936   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LIGHT,1);
;;;3937   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LIGHT,1);
;;;3938        }
;;;3939   else 
;;;3940   	{
;;;3941   	if(sk_av_stat[0]!=sasON) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LIGHT,1);
;;;3942        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LIGHT,1);
;;;3943   	}
;;;3944   
;;;3945   
;;;3946   
;;;3947   //–ÂÎÂ ‚˚ÍÎ˛˜ÂÌËˇ Ì‡„ÛÁÍË
;;;3948   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_LOAD_OFF))
;;;3949   	{
;;;3950   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LOAD_OFF,1);
;;;3951   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LOAD_OFF,1);
;;;3952        }
;;;3953   else if(tloaddisable_cmnd==0)
;;;3954   	{
;;;3955   	SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LOAD_OFF,1);
;;;3956   	}
;;;3957   else if((tloaddisable_cmnd)&&(tloaddisable_cmnd<=11))
;;;3958   	{
;;;3959   	SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LOAD_OFF,1);
;;;3960   	}
;;;3961   
;;;3962   else 
;;;3963   	{
;;;3964   	if(!(tloaddisable_stat==tldsON)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LOAD_OFF,1);
;;;3965        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LOAD_OFF,1);
;;;3966   	} 
;;;3967   
;;;3968   //–ÂÎÂ ÓÒÂ‚Ó„Ó ‚ÂÌÚËÎˇÚÓ‡ ËÎË ÓÚÓÔËÚÂÎˇ
;;;3969   if(RELE_LOG)
;;;3970   	{
;;;3971   	if((mess_find_unvol(MESS2RELE_HNDL))&&(mess_data[0]==PARAM_RELE_VENT_WARM))
;;;3972   		{
;;;3973   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT_WARM,1);
;;;3974   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT_WARM,1);
;;;3975   		}
;;;3976   	else 
;;;3977   		{
;;;3978   		if(warm_stat_k==wsOFF) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT_WARM,1);
;;;3979   	     else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT_WARM,1);
;;;3980   		} 
;;;3981   
;;;3982   	}
;;;3983   else 
;;;3984   	{
;;;3985   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_VENT_WARM))
;;;3986   		{
;;;3987   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT_WARM,1);
;;;3988   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT_WARM,1);
;;;3989   		}
;;;3990   	else 
;;;3991   		{
;;;3992   		if(vent_stat_k==vsOFF) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT_WARM,1);
;;;3993   	     else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT_WARM,1);
;;;3994   		} 
;;;3995   	}
;;;3996   #endif
;;;3997   
;;;3998   #ifdef UKU_6U
;;;3999   //–ÂÎÂ ‡‚‡ËÈ ·‡Ú‡ÂÈ
;;;4000   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BAT1))
;;;4001   	{
;;;4002   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT1,1);
;;;4003   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT1,1);
;;;4004        }
;;;4005   else 
;;;4006   	{
;;;4007   	if(!(avar_ind_stat&0x00000002)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT1,1);
;;;4008        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT1,1);
;;;4009   	} 
;;;4010   
;;;4011   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BAT2))
;;;4012   	{
;;;4013   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT2,1);
;;;4014   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT2,1);
;;;4015       }
;;;4016   else if(NPN_OUT==npnoRELEAVBAT2)
;;;4017   	{
;;;4018   	if(npn_stat==npnsOFF)//&&(mess_find_unvol(MESS2RELE_HNDL))&&(mess_data[0]==PARAM_RELE_NPN))
;;;4019   		{
;;;4020   		/*if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT2,1);
;;;4021   		else if(mess_data[1]==1)*/ SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT2,1);
;;;4022        	}
;;;4023   	else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT2,1);
;;;4024   	}
;;;4025   else 
;;;4026   	{
;;;4027   	if(!(avar_ind_stat&0x00000004)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT2,1);
;;;4028       else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT2,1);
;;;4029   	} 
;;;4030   
;;;4031   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BPS))
;;;4032   	{
;;;4033   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
;;;4034   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
;;;4035        }
;;;4036   else 
;;;4037   	{
;;;4038   	if(!(avar_ind_stat&0x000007f8)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
;;;4039        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
;;;4040   	} 
;;;4041   
;;;4042   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_VENT))
;;;4043   	{
;;;4044   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT,1);
;;;4045   	else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;4046   	}
;;;4047   else if((NPN_OUT==npnoRELEVENT))
;;;4048   	{
;;;4049   	if(npn_stat==npnsOFF)//&&(mess_find_unvol(MESS2RELE_HNDL))&&(mess_data[0]==PARAM_RELE_NPN))
;;;4050   		{
;;;4051   		/*if(mess_data[1]==0)*/ SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;4052   		//else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;4053       	}
;;;4054   	else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT,1);
;;;4055   	}
;;;4056   else 
;;;4057   	{
;;;4058   	if(!vent_stat) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT,1);
;;;4059   	else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;4060   	}
;;;4061   
;;;4062   #endif
;;;4063   
;;;4064   #ifdef UKU_220
;;;4065   //–ÂÎÂ ‡‚‡ËÈ ·‡Ú‡ÂÈ
;;;4066   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BAT))
;;;4067   	{
;;;4068   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT,1);
;;;4069   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT,1);
;;;4070        }
;;;4071   else 
;;;4072   	{
;;;4073   	if(!(avar_ind_stat&0x00000002)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT,1);
;;;4074        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT,1);
;;;4075   	} 
;;;4076   
;;;4077   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BPS))
;;;4078   	{
;;;4079   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
;;;4080   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
;;;4081        }
;;;4082   else 
;;;4083   	{
;;;4084   	if(!(avar_ind_stat&0x000007f8)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
;;;4085        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
;;;4086   	} 
;;;4087   
;;;4088   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_VENT))
;;;4089   	{
;;;4090   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT,1);
;;;4091   	else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;4092   	}
;;;4093   else 
;;;4094   	{
;;;4095   	if((RELE_VENT_LOGIC==0)||(RELE_VENT_LOGIC==1))
;;;4096   		{
;;;4097   		if(vent_stat) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT,1);
;;;4098   		else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;4099   		}
;;;4100   	else 
;;;4101   		{
;;;4102   		if((avar_ind_stat&0x00000004)) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT,1);
;;;4103        	else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;4104   		}
;;;4105   	}
;;;4106   
;;;4107   #endif
;;;4108   
;;;4109   #ifdef UKU_220_V2
;;;4110   //–ÂÎÂ ‡‚‡ËÈ ·‡Ú‡ÂÈ
;;;4111   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BAT))
;;;4112   	{
;;;4113   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT,1);
;;;4114   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT,1);
;;;4115        }
;;;4116   else 
;;;4117   	{
;;;4118   	if(!(avar_ind_stat&0x00000002)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT,1);
;;;4119        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT,1);
;;;4120   	} 
;;;4121   
;;;4122   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BPS))
;;;4123   	{
;;;4124   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
;;;4125   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
;;;4126        }
;;;4127   else 
;;;4128   	{
;;;4129   	if(!(avar_ind_stat&0x000007f8)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
;;;4130        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
;;;4131   	} 
;;;4132   
;;;4133   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_VENT))
;;;4134   	{
;;;4135   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT,1);
;;;4136   	else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;4137   	}
;;;4138   else 
;;;4139   	{
;;;4140   	if((RELE_VENT_LOGIC==0)||(RELE_VENT_LOGIC==1))
;;;4141   		{
;;;4142   		if(vent_stat) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT,1);
;;;4143   		else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;4144   		}
;;;4145   	else 
;;;4146   		{
;;;4147   		if((avar_ind_stat&0x00000004)) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT,1);
;;;4148        	else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;4149   		}
;;;4150   	}
;;;4151   
;;;4152   #endif
;;;4153   
;;;4154   #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;4155   
;;;4156   if((AUSW_MAIN==22010)||(AUSW_MAIN==22011))
00296e  484a              LDR      r0,|L1.10904|
;;;4157   	{
;;;4158   	#ifndef UKU2071x
;;;4159   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_NET))
;;;4160   		{
;;;4161   		if(mess_data[1]==0) SET_REG(LPC_GPIO3->FIOSET,1,25,1);
;;;4162   		else SET_REG(LPC_GPIO3->FIOCLR,1,25,1);
;;;4163   		}
;;;4164   	else	if(!(avar_ind_stat&0x00000001)) SET_REG(LPC_GPIO3->FIOSET,1,25,1);
;;;4165   	else SET_REG(LPC_GPIO3->FIOCLR,1,25,1);
;;;4166   	#endif
;;;4167   
;;;4168   	#ifdef UKU2071x
;;;4169   		#ifndef APSENERGIA
;;;4170   		if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_NET))
;;;4171   			{
;;;4172   			if(mess_data[1]==0) SET_REG(LPC_GPIO3->FIOCLR,1,25,1);
;;;4173   			else SET_REG(LPC_GPIO3->FIOSET,1,25,1);
;;;4174   			}
;;;4175   		else	if(!(avar_ind_stat&0x00000001)) SET_REG(LPC_GPIO3->FIOCLR,1,25,1);
;;;4176   		else SET_REG(LPC_GPIO3->FIOSET,1,25,1);
;;;4177   		#endif
;;;4178   
;;;4179   		#ifdef APSENERGIA
;;;4180   		if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_NET))
;;;4181   			{
;;;4182   			if(mess_data[1]==0) SET_REG(LPC_GPIO3->FIOCLR,1,25,1);
;;;4183   			else SET_REG(LPC_GPIO3->FIOSET,1,25,1);
;;;4184   			}
;;;4185   		else if((mess_find_unvol(MESS2RELE_HNDL))&& (mess_data[0]==PARAM_RELE_BAT_IS_DISCHARGED))  SET_REG(LPC_GPIO3->FIOCLR,1,25,1);
;;;4186   		else SET_REG(LPC_GPIO3->FIOSET,1,25,1);
;;;4187   		#endif
;;;4188   
;;;4189   	#endif
;;;4190   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BPS))
;;;4191   		{
;;;4192   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,7,1);
;;;4193   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,7,1);
;;;4194   	     }
;;;4195   	else 
;;;4196   		{
;;;4197   		if(!(avar_ind_stat&0x100007f8)) SET_REG(LPC_GPIO0->FIOCLR,1,7,1);
;;;4198   	     else SET_REG(LPC_GPIO0->FIOSET,1,7,1);
;;;4199   		} 
;;;4200   
;;;4201   	//–ÂÎÂ ‡‚‡ËÈ ·‡Ú‡ÂÈ
;;;4202   	#ifndef APSENERGIA
;;;4203   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BAT))
;;;4204   		{
;;;4205   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,4,1);
;;;4206   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,4,1);
;;;4207        	}
;;;4208   	else 
;;;4209   		{
;;;4210   		if(!(ips_bat_av_stat)) SET_REG(LPC_GPIO0->FIOCLR,1,4,1);
002970  f8df8128          LDR      r8,|L1.10908|
002974  4f4a              LDR      r7,|L1.10912|
002976  8800              LDRH     r0,[r0,#0]            ;4156  ; AUSW_MAIN
002978  f5a041aa          SUB      r1,r0,#0x5500         ;4156
00297c  39fa              SUBS     r1,r1,#0xfa           ;4156
00297e  d001              BEQ      |L1.10628|
002980  1e49              SUBS     r1,r1,#1              ;4156
002982  d16a              BNE      |L1.10842|
                  |L1.10628|
002984  20d2              MOVS     r0,#0xd2              ;4170
002986  f7fffffe          BL       mess_find_unvol
00298a  b110              CBZ      r0,|L1.10642|
00298c  6828              LDR      r0,[r5,#0]            ;4170  ; mess_data
00298e  2866              CMP      r0,#0x66              ;4170
002990  d043              BEQ      |L1.10778|
                  |L1.10642|
002992  6830              LDR      r0,[r6,#0]            ;4175  ; avar_ind_stat
002994  07c0              LSLS     r0,r0,#31             ;4175
002996  d04d              BEQ      |L1.10804|
002998  6fa0              LDR      r0,[r4,#0x78]         ;4176
00299a  f0407000          ORR      r0,r0,#0x2000000      ;4176
00299e  67a0              STR      r0,[r4,#0x78]         ;4176
                  |L1.10656|
0029a0  20d2              MOVS     r0,#0xd2              ;4190
0029a2  f7fffffe          BL       mess_find_unvol
0029a6  b110              CBZ      r0,|L1.10670|
0029a8  6828              LDR      r0,[r5,#0]            ;4190  ; mess_data
0029aa  286a              CMP      r0,#0x6a              ;4190
0029ac  d047              BEQ      |L1.10814|
                  |L1.10670|
0029ae  6830              LDR      r0,[r6,#0]            ;4197  ; avar_ind_stat
0029b0  4238              TST      r0,r7                 ;4197
0029b2  d079              BEQ      |L1.10920|
0029b4  69a0              LDR      r0,[r4,#0x18]         ;4198
0029b6  f0400080          ORR      r0,r0,#0x80           ;4198
0029ba  61a0              STR      r0,[r4,#0x18]         ;4198
                  |L1.10684|
0029bc  20d2              MOVS     r0,#0xd2              ;4203
0029be  f7fffffe          BL       mess_find_unvol
0029c2  b110              CBZ      r0,|L1.10698|
0029c4  6828              LDR      r0,[r5,#0]            ;4203  ; mess_data
0029c6  2867              CMP      r0,#0x67              ;4203
0029c8  d073              BEQ      |L1.10930|
                  |L1.10698|
0029ca  f8980000          LDRB     r0,[r8,#0]  ; ips_bat_av_stat
0029ce  b380              CBZ      r0,|L1.10802|
;;;4211        	else SET_REG(LPC_GPIO0->FIOSET,1,4,1);
0029d0  69a0              LDR      r0,[r4,#0x18]
0029d2  f0400010          ORR      r0,r0,#0x10
0029d6  61a0              STR      r0,[r4,#0x18]
0029d8  e1f8              B        |L1.11724|
                  |L1.10714|
0029da  6868              LDR      r0,[r5,#4]            ;3711  ; mess_data
0029dc  2801              CMP      r0,#1                 ;3711
0029de  d006              BEQ      |L1.10734|
0029e0  2800              CMP      r0,#0                 ;3712
0029e2  d1b5              BNE      |L1.10576|
0029e4  69e0              LDR      r0,[r4,#0x1c]         ;3712
0029e6  f0405000          ORR      r0,r0,#0x20000000     ;3712
0029ea  61e0              STR      r0,[r4,#0x1c]         ;3712
0029ec  e7b0              B        |L1.10576|
                  |L1.10734|
0029ee  69a0              LDR      r0,[r4,#0x18]         ;3711
0029f0  f0405000          ORR      r0,r0,#0x20000000     ;3711
0029f4  61a0              STR      r0,[r4,#0x18]         ;3711
0029f6  e7ab              B        |L1.10576|
                  |L1.10744|
0029f8  6868              LDR      r0,[r5,#4]            ;3731  ; mess_data
0029fa  b120              CBZ      r0,|L1.10758|
0029fc  6fa0              LDR      r0,[r4,#0x78]         ;3732
0029fe  f0407000          ORR      r0,r0,#0x2000000      ;3732
002a02  67a0              STR      r0,[r4,#0x78]         ;3732
002a04  e7b3              B        |L1.10606|
                  |L1.10758|
002a06  6fe0              LDR      r0,[r4,#0x7c]         ;3731
002a08  f0407000          ORR      r0,r0,#0x2000000      ;3731
002a0c  67e0              STR      r0,[r4,#0x7c]         ;3731
002a0e  e7ae              B        |L1.10606|
                  |L1.10768|
002a10  6fe0              LDR      r0,[r4,#0x7c]         ;3734
002a12  f0407000          ORR      r0,r0,#0x2000000      ;3734
002a16  67e0              STR      r0,[r4,#0x7c]         ;3734
002a18  e7a9              B        |L1.10606|
                  |L1.10778|
002a1a  6868              LDR      r0,[r5,#4]            ;4172  ; mess_data
002a1c  b120              CBZ      r0,|L1.10792|
002a1e  6fa0              LDR      r0,[r4,#0x78]         ;4173
002a20  f0407000          ORR      r0,r0,#0x2000000      ;4173
002a24  67a0              STR      r0,[r4,#0x78]         ;4173
002a26  e7bb              B        |L1.10656|
                  |L1.10792|
002a28  6fe0              LDR      r0,[r4,#0x7c]         ;4172
002a2a  f0407000          ORR      r0,r0,#0x2000000      ;4172
002a2e  67e0              STR      r0,[r4,#0x7c]         ;4172
002a30  e7b6              B        |L1.10656|
                  |L1.10802|
002a32  e04d              B        |L1.10960|
                  |L1.10804|
002a34  6fe0              LDR      r0,[r4,#0x7c]         ;4175
002a36  f0407000          ORR      r0,r0,#0x2000000      ;4175
002a3a  67e0              STR      r0,[r4,#0x7c]         ;4175
002a3c  e7b0              B        |L1.10656|
                  |L1.10814|
002a3e  6868              LDR      r0,[r5,#4]            ;4192  ; mess_data
002a40  b130              CBZ      r0,|L1.10832|
002a42  2801              CMP      r0,#1                 ;4193
002a44  d1ba              BNE      |L1.10684|
002a46  69a0              LDR      r0,[r4,#0x18]         ;4193
002a48  f0400080          ORR      r0,r0,#0x80           ;4193
002a4c  61a0              STR      r0,[r4,#0x18]         ;4193
002a4e  e7b5              B        |L1.10684|
                  |L1.10832|
002a50  69e0              LDR      r0,[r4,#0x1c]         ;4192
002a52  f0400080          ORR      r0,r0,#0x80           ;4192
002a56  61e0              STR      r0,[r4,#0x1c]         ;4192
002a58  e7b0              B        |L1.10684|
                  |L1.10842|
002a5a  e03e              B        |L1.10970|
                  |L1.10844|
                          DCD      ||.bss||
                  |L1.10848|
                          DCD      ||.bss||+0x400
                  |L1.10852|
                          DCD      0x40034000
                  |L1.10856|
                          DCD      0x2009c000
                  |L1.10860|
                          DCD      ||area_number.23||
                  |L1.10864|
                          DCD      bps
                  |L1.10868|
                          DCD      NUMIST
                  |L1.10872|
                          DCD      0x4002c000
                  |L1.10876|
                          DCD      0xfff000ff
                  |L1.10880|
                          DCD      bat
                  |L1.10884|
                          DCD      tbatdisable_stat
                  |L1.10888|
                          DCD      tbatdisable_cmnd
                  |L1.10892|
                          DCD      main_1Hz_cnt
                  |L1.10896|
                          DCD      mess_data
                  |L1.10900|
                          DCD      avar_ind_stat
                  |L1.10904|
                          DCD      AUSW_MAIN
                  |L1.10908|
                          DCD      ips_bat_av_stat
                  |L1.10912|
                          DCD      0x100007f8
002aa4  e000              B        |L1.10920|
002aa6  e004              B        |L1.10930|
                  |L1.10920|
002aa8  69e0              LDR      r0,[r4,#0x1c]         ;4197
002aaa  f0400080          ORR      r0,r0,#0x80           ;4197
002aae  61e0              STR      r0,[r4,#0x1c]         ;4197
002ab0  e784              B        |L1.10684|
                  |L1.10930|
002ab2  6868              LDR      r0,[r5,#4]            ;4205  ; mess_data
002ab4  b110              CBZ      r0,|L1.10940|
002ab6  2801              CMP      r0,#1                 ;4206
002ab8  d005              BEQ      |L1.10950|
002aba  e187              B        |L1.11724|
                  |L1.10940|
002abc  69e0              LDR      r0,[r4,#0x1c]         ;4205
002abe  f0400010          ORR      r0,r0,#0x10           ;4205
002ac2  61e0              STR      r0,[r4,#0x1c]         ;4205
002ac4  e182              B        |L1.11724|
                  |L1.10950|
002ac6  69a0              LDR      r0,[r4,#0x18]         ;4206
002ac8  f0400010          ORR      r0,r0,#0x10           ;4206
002acc  61a0              STR      r0,[r4,#0x18]         ;4206
002ace  e17d              B        |L1.11724|
                  |L1.10960|
002ad0  69e0              LDR      r0,[r4,#0x1c]         ;4210
002ad2  f0400010          ORR      r0,r0,#0x10           ;4210
002ad6  61e0              STR      r0,[r4,#0x1c]         ;4210
002ad8  e178              B        |L1.11724|
                  |L1.10970|
;;;4212   		}
;;;4213   	#endif
;;;4214   	#ifdef APSENERGIA
;;;4215   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BAT))
;;;4216   		{
;;;4217   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,4,1);
;;;4218   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,4,1);
;;;4219        	}
;;;4220   	else 
;;;4221   		{
;;;4222   		if(!apsEnergiaStat)SET_REG(LPC_GPIO0->FIOSET,1,4,1);
;;;4223   		else SET_REG(LPC_GPIO0->FIOCLR,1,4,1);
;;;4224   		}
;;;4225   	#endif
;;;4226   	}
;;;4227   
;;;4228   else	if(AUSW_MAIN==22023)
002ada  f5a041ac          SUB      r1,r0,#0x5600
002ade  3907              SUBS     r1,#7
002ae0  d162              BNE      |L1.11176|
;;;4229   	{
;;;4230   
;;;4231   	//–ÂÎÂ ‡‚‡ËÈ ·‡Ú‡ÂÈ
;;;4232   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BAT))
002ae2  20d2              MOVS     r0,#0xd2
002ae4  f7fffffe          BL       mess_find_unvol
002ae8  b110              CBZ      r0,|L1.10992|
002aea  6828              LDR      r0,[r5,#0]  ; mess_data
002aec  2867              CMP      r0,#0x67
002aee  d023              BEQ      |L1.11064|
                  |L1.10992|
;;;4233   		{
;;;4234   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,4,1);
;;;4235   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,4,1);
;;;4236        	}
;;;4237   	else 
;;;4238   		{
;;;4239   		if(!(ips_bat_av_stat)) SET_REG(LPC_GPIO0->FIOCLR,1,4,1);
002af0  f8980000          LDRB     r0,[r8,#0]  ; ips_bat_av_stat
002af4  b370              CBZ      r0,|L1.11092|
;;;4240        	else SET_REG(LPC_GPIO0->FIOSET,1,4,1);
002af6  69a0              LDR      r0,[r4,#0x18]
002af8  f0400010          ORR      r0,r0,#0x10
002afc  61a0              STR      r0,[r4,#0x18]
                  |L1.11006|
;;;4241   		} 
;;;4242   
;;;4243   
;;;4244   	//–ÂÎÂ ‡‚‡ËË ÒÂÚË “”“  ¿ ¿ﬂ ÚÓ À¿∆¿ Ò ‡‚‡ËÂÈ ÒÂÚË. Œ·‡˘ÂÌËÂ Í ‡ÁÌ˚Ï ÔÓÚ‡Ï
;;;4245   	#ifndef UKU2071x
;;;4246   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_NET))
;;;4247   		{
;;;4248   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;4249   		else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_NET,1);
;;;4250   		}
;;;4251   	else	if(!(avar_ind_stat&0x00000001)) SET_REG(LPC_GPIO1->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;4252   	else SET_REG(LPC_GPIO3->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;4253   	#endif
;;;4254   	#ifdef UKU2071x
;;;4255   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_NET))
002afe  20d2              MOVS     r0,#0xd2
002b00  f7fffffe          BL       mess_find_unvol
002b04  b110              CBZ      r0,|L1.11020|
002b06  6828              LDR      r0,[r5,#0]  ; mess_data
002b08  2866              CMP      r0,#0x66
002b0a  d028              BEQ      |L1.11102|
                  |L1.11020|
;;;4256   		{
;;;4257   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_NET,1);
;;;4258   		else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;4259   		}
;;;4260   	else	if(!(avar_ind_stat&0x00000001)) SET_REG(LPC_GPIO1->FIOSET,1,SHIFT_REL_AV_NET,1);
002b0c  6830              LDR      r0,[r6,#0]  ; avar_ind_stat
002b0e  07c0              LSLS     r0,r0,#31
002b10  d031              BEQ      |L1.11126|
;;;4261   	else SET_REG(LPC_GPIO3->FIOSET,1,SHIFT_REL_AV_NET,1);
002b12  6fa0              LDR      r0,[r4,#0x78]
002b14  f0407000          ORR      r0,r0,#0x2000000
002b18  67a0              STR      r0,[r4,#0x78]
                  |L1.11034|
;;;4262   	#endif
;;;4263   
;;;4264   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BPS))
002b1a  20d2              MOVS     r0,#0xd2
002b1c  f7fffffe          BL       mess_find_unvol
002b20  b110              CBZ      r0,|L1.11048|
002b22  6828              LDR      r0,[r5,#0]  ; mess_data
002b24  286a              CMP      r0,#0x6a
002b26  d02b              BEQ      |L1.11136|
                  |L1.11048|
;;;4265   		{
;;;4266   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,7,1);
;;;4267   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,7,1);
;;;4268   	     }
;;;4269   	else 
;;;4270   		{
;;;4271   		if(!(avar_ind_stat&0x100007f8)) SET_REG(LPC_GPIO0->FIOCLR,1,7,1);
002b28  6830              LDR      r0,[r6,#0]  ; avar_ind_stat
002b2a  4238              TST      r0,r7
002b2c  d037              BEQ      |L1.11166|
;;;4272   	     else SET_REG(LPC_GPIO0->FIOSET,1,7,1);
002b2e  69a0              LDR      r0,[r4,#0x18]
002b30  f0400080          ORR      r0,r0,#0x80
002b34  61a0              STR      r0,[r4,#0x18]
002b36  e149              B        |L1.11724|
                  |L1.11064|
002b38  6868              LDR      r0,[r5,#4]            ;4234  ; mess_data
002b3a  b130              CBZ      r0,|L1.11082|
002b3c  2801              CMP      r0,#1                 ;4235
002b3e  d1de              BNE      |L1.11006|
002b40  69a0              LDR      r0,[r4,#0x18]         ;4235
002b42  f0400010          ORR      r0,r0,#0x10           ;4235
002b46  61a0              STR      r0,[r4,#0x18]         ;4235
002b48  e7d9              B        |L1.11006|
                  |L1.11082|
002b4a  69e0              LDR      r0,[r4,#0x1c]         ;4234
002b4c  f0400010          ORR      r0,r0,#0x10           ;4234
002b50  61e0              STR      r0,[r4,#0x1c]         ;4234
002b52  e7d4              B        |L1.11006|
                  |L1.11092|
002b54  69e0              LDR      r0,[r4,#0x1c]         ;4239
002b56  f0400010          ORR      r0,r0,#0x10           ;4239
002b5a  61e0              STR      r0,[r4,#0x1c]         ;4239
002b5c  e7cf              B        |L1.11006|
                  |L1.11102|
002b5e  6868              LDR      r0,[r5,#4]            ;4257  ; mess_data
002b60  b120              CBZ      r0,|L1.11116|
002b62  69e0              LDR      r0,[r4,#0x1c]         ;4258
002b64  f0407000          ORR      r0,r0,#0x2000000      ;4258
002b68  61e0              STR      r0,[r4,#0x1c]         ;4258
002b6a  e7d6              B        |L1.11034|
                  |L1.11116|
002b6c  69a0              LDR      r0,[r4,#0x18]         ;4257
002b6e  f0407000          ORR      r0,r0,#0x2000000      ;4257
002b72  61a0              STR      r0,[r4,#0x18]         ;4257
002b74  e7d1              B        |L1.11034|
                  |L1.11126|
002b76  6ba0              LDR      r0,[r4,#0x38]         ;4260
002b78  f0407000          ORR      r0,r0,#0x2000000      ;4260
002b7c  63a0              STR      r0,[r4,#0x38]         ;4260
002b7e  e7cc              B        |L1.11034|
                  |L1.11136|
002b80  6868              LDR      r0,[r5,#4]            ;4266  ; mess_data
002b82  b110              CBZ      r0,|L1.11146|
002b84  2801              CMP      r0,#1                 ;4267
002b86  d005              BEQ      |L1.11156|
002b88  e120              B        |L1.11724|
                  |L1.11146|
002b8a  69e0              LDR      r0,[r4,#0x1c]         ;4266
002b8c  f0400080          ORR      r0,r0,#0x80           ;4266
002b90  61e0              STR      r0,[r4,#0x1c]         ;4266
002b92  e11b              B        |L1.11724|
                  |L1.11156|
002b94  69a0              LDR      r0,[r4,#0x18]         ;4267
002b96  f0400080          ORR      r0,r0,#0x80           ;4267
002b9a  61a0              STR      r0,[r4,#0x18]         ;4267
002b9c  e116              B        |L1.11724|
                  |L1.11166|
002b9e  69e0              LDR      r0,[r4,#0x1c]         ;4271
002ba0  f0400080          ORR      r0,r0,#0x80           ;4271
002ba4  61e0              STR      r0,[r4,#0x1c]         ;4271
002ba6  e111              B        |L1.11724|
                  |L1.11176|
;;;4273   		} 
;;;4274   	}
;;;4275   else	if((AUSW_MAIN==22043)||(AUSW_MAIN==22044))
002ba8  f5a041ac          SUB      r1,r0,#0x5600
002bac  391b              SUBS     r1,r1,#0x1b
002bae  d001              BEQ      |L1.11188|
002bb0  1e49              SUBS     r1,r1,#1
002bb2  d170              BNE      |L1.11414|
                  |L1.11188|
;;;4276   	{
;;;4277   	//–ÂÎÂ ‡‚‡ËÈ ·‡Ú‡ÂÈ
;;;4278   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BAT))
002bb4  20d2              MOVS     r0,#0xd2
002bb6  f7fffffe          BL       mess_find_unvol
002bba  b110              CBZ      r0,|L1.11202|
002bbc  6828              LDR      r0,[r5,#0]  ; mess_data
002bbe  2867              CMP      r0,#0x67
002bc0  d031              BEQ      |L1.11302|
                  |L1.11202|
;;;4279   		{
;;;4280   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,4,1);
;;;4281   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,4,1);
;;;4282        	}
;;;4283   	else 
;;;4284   		{
;;;4285   		if(!(ips_bat_av_stat)) SET_REG(LPC_GPIO0->FIOCLR,1,4,1);
002bc2  f8980000          LDRB     r0,[r8,#0]  ; ips_bat_av_stat
002bc6  b3b8              CBZ      r0,|L1.11320|
;;;4286        	else SET_REG(LPC_GPIO0->FIOSET,1,4,1);
002bc8  69a0              LDR      r0,[r4,#0x18]
002bca  f0400010          ORR      r0,r0,#0x10
002bce  61a0              STR      r0,[r4,#0x18]
                  |L1.11216|
;;;4287   		} 
;;;4288   	//–ÂÎÂ ‡‚‡ËË ÒÂÚË “”“  ¿ ¿ﬂ ÚÓ À¿∆¿ Ò ‡‚‡ËÂÈ ÒÂÚË. Œ·‡˘ÂÌËÂ Í ‡ÁÌ˚Ï ÔÓÚ‡Ï
;;;4289   	#ifndef UKU2071x 
;;;4290   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_NET))
;;;4291   		{
;;;4292   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;4293   		else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_NET,1);
;;;4294   		}
;;;4295   	else	if(!(avar_ind_stat&0x00000001)) SET_REG(LPC_GPIO1->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;4296   	else SET_REG(LPC_GPIO3->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;4297   	#endif
;;;4298   	#ifdef UKU2071x 
;;;4299   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_NET))
002bd0  20d2              MOVS     r0,#0xd2
002bd2  f7fffffe          BL       mess_find_unvol
002bd6  b110              CBZ      r0,|L1.11230|
002bd8  6828              LDR      r0,[r5,#0]  ; mess_data
002bda  2866              CMP      r0,#0x66
002bdc  d037              BEQ      |L1.11342|
                  |L1.11230|
;;;4300   		{
;;;4301   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_NET,1);
;;;4302   		else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;4303   		}
;;;4304   	else	if(!(avar_ind_stat&0x00000001)) SET_REG(LPC_GPIO1->FIOSET,1,SHIFT_REL_AV_NET,1);
002bde  6830              LDR      r0,[r6,#0]  ; avar_ind_stat
002be0  07c0              LSLS     r0,r0,#31
002be2  d040              BEQ      |L1.11366|
;;;4305   	else SET_REG(LPC_GPIO3->FIOSET,1,SHIFT_REL_AV_NET,1);
002be4  6fa0              LDR      r0,[r4,#0x78]
002be6  f0407000          ORR      r0,r0,#0x2000000
002bea  67a0              STR      r0,[r4,#0x78]
                  |L1.11244|
;;;4306   	#endif
;;;4307   
;;;4308   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BPS))
002bec  20d2              MOVS     r0,#0xd2
002bee  f7fffffe          BL       mess_find_unvol
002bf2  b110              CBZ      r0,|L1.11258|
002bf4  6828              LDR      r0,[r5,#0]  ; mess_data
002bf6  286a              CMP      r0,#0x6a
002bf8  d03a              BEQ      |L1.11376|
                  |L1.11258|
;;;4309   		{
;;;4310   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,7,1);
;;;4311   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,7,1);
;;;4312   	     }
;;;4313   	else 
;;;4314   		{
;;;4315   		if(!(avar_ind_stat&0x100007f8)) SET_REG(LPC_GPIO0->FIOCLR,1,7,1);
002bfa  6830              LDR      r0,[r6,#0]  ; avar_ind_stat
002bfc  4238              TST      r0,r7
002bfe  d045              BEQ      |L1.11404|
;;;4316   	     else SET_REG(LPC_GPIO0->FIOSET,1,7,1);
002c00  69a0              LDR      r0,[r4,#0x18]
002c02  f0400080          ORR      r0,r0,#0x80
002c06  61a0              STR      r0,[r4,#0x18]
                  |L1.11272|
;;;4317   		}
;;;4318   	//–ÂÎÂ ‡‚‡ËË ¡œ—
;;;4319   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BPS))
002c08  20d2              MOVS     r0,#0xd2
002c0a  f7fffffe          BL       mess_find_unvol
002c0e  b110              CBZ      r0,|L1.11286|
002c10  6828              LDR      r0,[r5,#0]  ; mess_data
002c12  286a              CMP      r0,#0x6a
002c14  d040              BEQ      |L1.11416|
                  |L1.11286|
;;;4320   		{
;;;4321   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
;;;4322   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
;;;4323        	}
;;;4324   	else 
;;;4325   		{
;;;4326   		if(!(avar_ind_stat&0x100007f8)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
002c16  6830              LDR      r0,[r6,#0]  ; avar_ind_stat
002c18  4238              TST      r0,r7
002c1a  d04c              BEQ      |L1.11446|
;;;4327        	else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
002c1c  69a0              LDR      r0,[r4,#0x18]
002c1e  f0400020          ORR      r0,r0,#0x20
002c22  61a0              STR      r0,[r4,#0x18]
002c24  e0d2              B        |L1.11724|
                  |L1.11302|
002c26  6868              LDR      r0,[r5,#4]            ;4280  ; mess_data
002c28  b138              CBZ      r0,|L1.11322|
002c2a  2801              CMP      r0,#1                 ;4281
002c2c  d1d0              BNE      |L1.11216|
002c2e  69a0              LDR      r0,[r4,#0x18]         ;4281
002c30  f0400010          ORR      r0,r0,#0x10           ;4281
002c34  61a0              STR      r0,[r4,#0x18]         ;4281
002c36  e7cb              B        |L1.11216|
                  |L1.11320|
002c38  e004              B        |L1.11332|
                  |L1.11322|
002c3a  69e0              LDR      r0,[r4,#0x1c]         ;4280
002c3c  f0400010          ORR      r0,r0,#0x10           ;4280
002c40  61e0              STR      r0,[r4,#0x1c]         ;4280
002c42  e7c5              B        |L1.11216|
                  |L1.11332|
002c44  69e0              LDR      r0,[r4,#0x1c]         ;4285
002c46  f0400010          ORR      r0,r0,#0x10           ;4285
002c4a  61e0              STR      r0,[r4,#0x1c]         ;4285
002c4c  e7c0              B        |L1.11216|
                  |L1.11342|
002c4e  6868              LDR      r0,[r5,#4]            ;4301  ; mess_data
002c50  b120              CBZ      r0,|L1.11356|
002c52  69e0              LDR      r0,[r4,#0x1c]         ;4302
002c54  f0407000          ORR      r0,r0,#0x2000000      ;4302
002c58  61e0              STR      r0,[r4,#0x1c]         ;4302
002c5a  e7c7              B        |L1.11244|
                  |L1.11356|
002c5c  69a0              LDR      r0,[r4,#0x18]         ;4301
002c5e  f0407000          ORR      r0,r0,#0x2000000      ;4301
002c62  61a0              STR      r0,[r4,#0x18]         ;4301
002c64  e7c2              B        |L1.11244|
                  |L1.11366|
002c66  6ba0              LDR      r0,[r4,#0x38]         ;4304
002c68  f0407000          ORR      r0,r0,#0x2000000      ;4304
002c6c  63a0              STR      r0,[r4,#0x38]         ;4304
002c6e  e7bd              B        |L1.11244|
                  |L1.11376|
002c70  6868              LDR      r0,[r5,#4]            ;4310  ; mess_data
002c72  b130              CBZ      r0,|L1.11394|
002c74  2801              CMP      r0,#1                 ;4311
002c76  d1c7              BNE      |L1.11272|
002c78  69a0              LDR      r0,[r4,#0x18]         ;4311
002c7a  f0400080          ORR      r0,r0,#0x80           ;4311
002c7e  61a0              STR      r0,[r4,#0x18]         ;4311
002c80  e7c2              B        |L1.11272|
                  |L1.11394|
002c82  69e0              LDR      r0,[r4,#0x1c]         ;4310
002c84  f0400080          ORR      r0,r0,#0x80           ;4310
002c88  61e0              STR      r0,[r4,#0x1c]         ;4310
002c8a  e7bd              B        |L1.11272|
                  |L1.11404|
002c8c  69e0              LDR      r0,[r4,#0x1c]         ;4315
002c8e  f0400080          ORR      r0,r0,#0x80           ;4315
002c92  61e0              STR      r0,[r4,#0x1c]         ;4315
002c94  e7b8              B        |L1.11272|
                  |L1.11414|
002c96  e013              B        |L1.11456|
                  |L1.11416|
002c98  6868              LDR      r0,[r5,#4]            ;4321  ; mess_data
002c9a  b110              CBZ      r0,|L1.11426|
002c9c  2801              CMP      r0,#1                 ;4322
002c9e  d005              BEQ      |L1.11436|
002ca0  e094              B        |L1.11724|
                  |L1.11426|
002ca2  69e0              LDR      r0,[r4,#0x1c]         ;4321
002ca4  f0400020          ORR      r0,r0,#0x20           ;4321
002ca8  61e0              STR      r0,[r4,#0x1c]         ;4321
002caa  e08f              B        |L1.11724|
                  |L1.11436|
002cac  69a0              LDR      r0,[r4,#0x18]         ;4322
002cae  f0400020          ORR      r0,r0,#0x20           ;4322
002cb2  61a0              STR      r0,[r4,#0x18]         ;4322
002cb4  e08a              B        |L1.11724|
                  |L1.11446|
002cb6  69e0              LDR      r0,[r4,#0x1c]         ;4326
002cb8  f0400020          ORR      r0,r0,#0x20           ;4326
002cbc  61e0              STR      r0,[r4,#0x1c]         ;4326
002cbe  e085              B        |L1.11724|
                  |L1.11456|
;;;4328   		} 
;;;4329   	}
;;;4330   else	if((AUSW_MAIN==22033)||(AUSW_MAIN==22018))
002cc0  f5a041ac          SUB      r1,r0,#0x5600
002cc4  3911              SUBS     r1,r1,#0x11
002cc6  d001              BEQ      |L1.11468|
002cc8  310f              ADDS     r1,r1,#0xf
002cca  d163              BNE      |L1.11668|
                  |L1.11468|
;;;4331   	{
;;;4332   	#ifndef UKU2071x 
;;;4333   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_NET))
;;;4334   		{
;;;4335   		if(mess_data[1]==0) SET_REG(LPC_GPIO3->FIOSET,1,25,1);
;;;4336   		else SET_REG(LPC_GPIO3->FIOCLR,1,25,1);
;;;4337   		}
;;;4338   	else	if(!(avar_ind_stat&0x00000001)) SET_REG(LPC_GPIO3->FIOSET,1,25,1);
;;;4339   	else SET_REG(LPC_GPIO3->FIOCLR,1,25,1);
;;;4340   	#endif
;;;4341   	#ifdef UKU2071x 
;;;4342   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_NET))
002ccc  20d2              MOVS     r0,#0xd2
002cce  f7fffffe          BL       mess_find_unvol
002cd2  b110              CBZ      r0,|L1.11482|
002cd4  6828              LDR      r0,[r5,#0]  ; mess_data
002cd6  2866              CMP      r0,#0x66
002cd8  d023              BEQ      |L1.11554|
                  |L1.11482|
;;;4343   		{
;;;4344   		if(mess_data[1]==0) SET_REG(LPC_GPIO3->FIOCLR,1,25,1);
;;;4345   		else SET_REG(LPC_GPIO3->FIOSET,1,25,1);
;;;4346   		}
;;;4347   	else	if(!(avar_ind_stat&0x00000001)) SET_REG(LPC_GPIO3->FIOCLR,1,25,1);
002cda  6830              LDR      r0,[r6,#0]  ; avar_ind_stat
002cdc  07c0              LSLS     r0,r0,#31
002cde  d02c              BEQ      |L1.11578|
;;;4348   	else SET_REG(LPC_GPIO3->FIOSET,1,25,1);
002ce0  6fa0              LDR      r0,[r4,#0x78]
002ce2  f0407000          ORR      r0,r0,#0x2000000
002ce6  67a0              STR      r0,[r4,#0x78]
                  |L1.11496|
;;;4349   	#endif
;;;4350   	
;;;4351   	
;;;4352   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BPS))
002ce8  20d2              MOVS     r0,#0xd2
002cea  f7fffffe          BL       mess_find_unvol
002cee  b110              CBZ      r0,|L1.11510|
002cf0  6828              LDR      r0,[r5,#0]  ; mess_data
002cf2  286a              CMP      r0,#0x6a
002cf4  d026              BEQ      |L1.11588|
                  |L1.11510|
;;;4353   		{
;;;4354   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,7,1);
;;;4355   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,7,1);
;;;4356   	     }
;;;4357   	else 
;;;4358   		{
;;;4359   		if(!(avar_ind_stat&0x100007f8)) SET_REG(LPC_GPIO0->FIOCLR,1,7,1);
002cf6  6830              LDR      r0,[r6,#0]  ; avar_ind_stat
002cf8  4238              TST      r0,r7
002cfa  d031              BEQ      |L1.11616|
;;;4360   	     else SET_REG(LPC_GPIO0->FIOSET,1,7,1);
002cfc  69a0              LDR      r0,[r4,#0x18]
002cfe  f0400080          ORR      r0,r0,#0x80
002d02  61a0              STR      r0,[r4,#0x18]
                  |L1.11524|
;;;4361   		} 
;;;4362   
;;;4363   	//–ÂÎÂ ‡‚‡ËÈ ·‡Ú‡ÂÈ
;;;4364   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BAT))
002d04  20d2              MOVS     r0,#0xd2
002d06  f7fffffe          BL       mess_find_unvol
002d0a  b110              CBZ      r0,|L1.11538|
002d0c  6828              LDR      r0,[r5,#0]  ; mess_data
002d0e  2867              CMP      r0,#0x67
002d10  d02b              BEQ      |L1.11626|
                  |L1.11538|
;;;4365   		{
;;;4366   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,4,1);
;;;4367   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,4,1);
;;;4368        	}
;;;4369   	else 
;;;4370   		{
;;;4371   		if(!(ips_bat_av_stat)) SET_REG(LPC_GPIO0->FIOCLR,1,4,1);
002d12  f8980000          LDRB     r0,[r8,#0]  ; ips_bat_av_stat
002d16  b390              CBZ      r0,|L1.11646|
;;;4372        	else SET_REG(LPC_GPIO0->FIOSET,1,4,1);
002d18  69a0              LDR      r0,[r4,#0x18]
002d1a  f0400010          ORR      r0,r0,#0x10
002d1e  61a0              STR      r0,[r4,#0x18]
002d20  e054              B        |L1.11724|
                  |L1.11554|
002d22  6868              LDR      r0,[r5,#4]            ;4344  ; mess_data
002d24  b120              CBZ      r0,|L1.11568|
002d26  6fa0              LDR      r0,[r4,#0x78]         ;4345
002d28  f0407000          ORR      r0,r0,#0x2000000      ;4345
002d2c  67a0              STR      r0,[r4,#0x78]         ;4345
002d2e  e7db              B        |L1.11496|
                  |L1.11568|
002d30  6fe0              LDR      r0,[r4,#0x7c]         ;4344
002d32  f0407000          ORR      r0,r0,#0x2000000      ;4344
002d36  67e0              STR      r0,[r4,#0x7c]         ;4344
002d38  e7d6              B        |L1.11496|
                  |L1.11578|
002d3a  6fe0              LDR      r0,[r4,#0x7c]         ;4347
002d3c  f0407000          ORR      r0,r0,#0x2000000      ;4347
002d40  67e0              STR      r0,[r4,#0x7c]         ;4347
002d42  e7d1              B        |L1.11496|
                  |L1.11588|
002d44  6868              LDR      r0,[r5,#4]            ;4354  ; mess_data
002d46  b130              CBZ      r0,|L1.11606|
002d48  2801              CMP      r0,#1                 ;4355
002d4a  d1db              BNE      |L1.11524|
002d4c  69a0              LDR      r0,[r4,#0x18]         ;4355
002d4e  f0400080          ORR      r0,r0,#0x80           ;4355
002d52  61a0              STR      r0,[r4,#0x18]         ;4355
002d54  e7d6              B        |L1.11524|
                  |L1.11606|
002d56  69e0              LDR      r0,[r4,#0x1c]         ;4354
002d58  f0400080          ORR      r0,r0,#0x80           ;4354
002d5c  61e0              STR      r0,[r4,#0x1c]         ;4354
002d5e  e7d1              B        |L1.11524|
                  |L1.11616|
002d60  69e0              LDR      r0,[r4,#0x1c]         ;4359
002d62  f0400080          ORR      r0,r0,#0x80           ;4359
002d66  61e0              STR      r0,[r4,#0x1c]         ;4359
002d68  e7cc              B        |L1.11524|
                  |L1.11626|
002d6a  6868              LDR      r0,[r5,#4]            ;4366  ; mess_data
002d6c  b110              CBZ      r0,|L1.11636|
002d6e  2801              CMP      r0,#1                 ;4367
002d70  d006              BEQ      |L1.11648|
002d72  e02b              B        |L1.11724|
                  |L1.11636|
002d74  69e0              LDR      r0,[r4,#0x1c]         ;4366
002d76  f0400010          ORR      r0,r0,#0x10           ;4366
002d7a  61e0              STR      r0,[r4,#0x1c]         ;4366
002d7c  e026              B        |L1.11724|
                  |L1.11646|
002d7e  e004              B        |L1.11658|
                  |L1.11648|
002d80  69a0              LDR      r0,[r4,#0x18]         ;4367
002d82  f0400010          ORR      r0,r0,#0x10           ;4367
002d86  61a0              STR      r0,[r4,#0x18]         ;4367
002d88  e020              B        |L1.11724|
                  |L1.11658|
002d8a  69e0              LDR      r0,[r4,#0x1c]         ;4371
002d8c  f0400010          ORR      r0,r0,#0x10           ;4371
002d90  61e0              STR      r0,[r4,#0x1c]         ;4371
002d92  e01b              B        |L1.11724|
                  |L1.11668|
;;;4373   		} 
;;;4374   	} 	 
;;;4375   else	
;;;4376   	{
;;;4377   	//–ÂÎÂ ‡‚‡ËË ÒÂÚË “”“  ¿ ¿ﬂ ÚÓ À¿∆¿ Ò ‡‚‡ËÂÈ ÒÂÚË. Œ·‡˘ÂÌËÂ Í ‡ÁÌ˚Ï ÔÓÚ‡Ï
;;;4378   	#ifndef UKU2071x 
;;;4379   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_NET))
;;;4380   		{
;;;4381   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;4382   		else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_NET,1);
;;;4383   		}
;;;4384   	else	if(!(avar_ind_stat&0x00000001)) SET_REG(LPC_GPIO1->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;4385   	else SET_REG(LPC_GPIO3->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;4386   	#endif
;;;4387   	#ifdef UKU2071x 
;;;4388   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_NET))
002d94  20d2              MOVS     r0,#0xd2
002d96  f7fffffe          BL       mess_find_unvol
002d9a  b110              CBZ      r0,|L1.11682|
002d9c  6828              LDR      r0,[r5,#0]  ; mess_data
002d9e  2866              CMP      r0,#0x66
002da0  d026              BEQ      |L1.11760|
                  |L1.11682|
;;;4389   		{
;;;4390   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_NET,1);
;;;4391   		else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;4392   		}
;;;4393   	else	if(!(avar_ind_stat&0x00000001)) SET_REG(LPC_GPIO1->FIOSET,1,SHIFT_REL_AV_NET,1);
002da2  6830              LDR      r0,[r6,#0]  ; avar_ind_stat
002da4  07c0              LSLS     r0,r0,#31
002da6  d02f              BEQ      |L1.11784|
;;;4394   	else SET_REG(LPC_GPIO3->FIOSET,1,SHIFT_REL_AV_NET,1);
002da8  6fa0              LDR      r0,[r4,#0x78]
002daa  f0407000          ORR      r0,r0,#0x2000000
002dae  67a0              STR      r0,[r4,#0x78]
                  |L1.11696|
;;;4395   	#endif
;;;4396   
;;;4397   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BPS))
002db0  20d2              MOVS     r0,#0xd2
002db2  f7fffffe          BL       mess_find_unvol
002db6  b110              CBZ      r0,|L1.11710|
002db8  6828              LDR      r0,[r5,#0]  ; mess_data
002dba  286a              CMP      r0,#0x6a
002dbc  d029              BEQ      |L1.11794|
                  |L1.11710|
;;;4398   		{
;;;4399   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
;;;4400   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
;;;4401        	}
;;;4402   	else 
;;;4403   		{
;;;4404   		if(!(avar_ind_stat&0x100007f8)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
002dbe  6830              LDR      r0,[r6,#0]  ; avar_ind_stat
002dc0  4238              TST      r0,r7
002dc2  d034              BEQ      |L1.11822|
;;;4405        	else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
002dc4  69a0              LDR      r0,[r4,#0x18]
002dc6  f0400020          ORR      r0,r0,#0x20
002dca  61a0              STR      r0,[r4,#0x18]
                  |L1.11724|
;;;4406   		}
;;;4407   	}
;;;4408   //ƒÓÔÓÎÌËÚÂÎ¸ÌÓÂ ÂÎÂ ” ” 
;;;4409   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_EXT))	 
002dcc  20d2              MOVS     r0,#0xd2
002dce  f7fffffe          BL       mess_find_unvol
;;;4410   	{
;;;4411   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,9,1);
;;;4412   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,9,1);
;;;4413   	}
;;;4414   else if(DOP_RELE_FUNC==0)	//ÂÒÎË ‰ÓÔÂÎÂ ÔÓ‰ÍÎ˛˜ÂÌÓ Í ÛÒÍÓÂÌÌÓÏÛ Á‡ˇ‰Û
;;;4415   	{
;;;4416   	if((!speedChIsOn)&&(spc_stat!=spcVZ)&&(hv_vz_stat==hvsOFF)&&(sp_ch_stat==scsOFF)&&(vz1_stat==vz1sOFF)&&(vz2_stat==vz2sOFF)&&(load_U/10<UVENTOFF))   SET_REG(LPC_GPIO0->FIOCLR,1,9,1);
002dd2  f8df83fc          LDR      r8,|L1.12752|
002dd6  4eff              LDR      r6,|L1.12756|
002dd8  4fff              LDR      r7,|L1.12760|
002dda  b110              CBZ      r0,|L1.11746|
002ddc  6828              LDR      r0,[r5,#0]            ;4409  ; mess_data
002dde  2871              CMP      r0,#0x71              ;4409
002de0  d02a              BEQ      |L1.11832|
                  |L1.11746|
002de2  48fe              LDR      r0,|L1.12764|
002de4  f9b00000          LDRSH    r0,[r0,#0]            ;4414  ; DOP_RELE_FUNC
002de8  b380              CBZ      r0,|L1.11852|
;;;4417   	else if((speedChIsOn)||(spc_stat==spcVZ)||(hv_vz_stat!=hvsOFF)||(sp_ch_stat!=scsOFF)||(vz1_stat!=vz1sOFF)||(vz2_stat!=vz2sOFF)) SET_REG(LPC_GPIO0->FIOSET,1,9,1);
;;;4418   	}
;;;4419   else if(DOP_RELE_FUNC==1)  //ÂÒÎË ‰ÓÔÂÎÂ ÔÓ‰ÍÎ˛˜ÂÌÓ Í ËÌ‰ËÍ‡ˆËË ‡ÁˇÊÂÌÌÓÈ ·‡Ú‡ÂË
002dea  2801              CMP      r0,#1
002dec  d068              BEQ      |L1.11968|
002dee  e072              B        |L1.11990|
                  |L1.11760|
002df0  6868              LDR      r0,[r5,#4]            ;4390  ; mess_data
002df2  b120              CBZ      r0,|L1.11774|
002df4  69e0              LDR      r0,[r4,#0x1c]         ;4391
002df6  f0407000          ORR      r0,r0,#0x2000000      ;4391
002dfa  61e0              STR      r0,[r4,#0x1c]         ;4391
002dfc  e7d8              B        |L1.11696|
                  |L1.11774|
002dfe  69a0              LDR      r0,[r4,#0x18]         ;4390
002e00  f0407000          ORR      r0,r0,#0x2000000      ;4390
002e04  61a0              STR      r0,[r4,#0x18]         ;4390
002e06  e7d3              B        |L1.11696|
                  |L1.11784|
002e08  6ba0              LDR      r0,[r4,#0x38]         ;4393
002e0a  f0407000          ORR      r0,r0,#0x2000000      ;4393
002e0e  63a0              STR      r0,[r4,#0x38]         ;4393
002e10  e7ce              B        |L1.11696|
                  |L1.11794|
002e12  6868              LDR      r0,[r5,#4]            ;4399  ; mess_data
002e14  b130              CBZ      r0,|L1.11812|
002e16  2801              CMP      r0,#1                 ;4400
002e18  d1d8              BNE      |L1.11724|
002e1a  69a0              LDR      r0,[r4,#0x18]         ;4400
002e1c  f0400020          ORR      r0,r0,#0x20           ;4400
002e20  61a0              STR      r0,[r4,#0x18]         ;4400
002e22  e7d3              B        |L1.11724|
                  |L1.11812|
002e24  69e0              LDR      r0,[r4,#0x1c]         ;4399
002e26  f0400020          ORR      r0,r0,#0x20           ;4399
002e2a  61e0              STR      r0,[r4,#0x1c]         ;4399
002e2c  e7ce              B        |L1.11724|
                  |L1.11822|
002e2e  69e0              LDR      r0,[r4,#0x1c]         ;4404
002e30  f0400020          ORR      r0,r0,#0x20           ;4404
002e34  61e0              STR      r0,[r4,#0x1c]         ;4404
002e36  e7c9              B        |L1.11724|
                  |L1.11832|
002e38  6868              LDR      r0,[r5,#4]            ;4411  ; mess_data
002e3a  b110              CBZ      r0,|L1.11842|
002e3c  2801              CMP      r0,#1                 ;4412
002e3e  d006              BEQ      |L1.11854|
002e40  e049              B        |L1.11990|
                  |L1.11842|
002e42  69e0              LDR      r0,[r4,#0x1c]         ;4411
002e44  f4407000          ORR      r0,r0,#0x200          ;4411
002e48  61e0              STR      r0,[r4,#0x1c]         ;4411
002e4a  e044              B        |L1.11990|
                  |L1.11852|
002e4c  e004              B        |L1.11864|
                  |L1.11854|
002e4e  69a0              LDR      r0,[r4,#0x18]         ;4412
002e50  f4407000          ORR      r0,r0,#0x200          ;4412
002e54  61a0              STR      r0,[r4,#0x18]         ;4412
002e56  e03e              B        |L1.11990|
                  |L1.11864|
002e58  48e1              LDR      r0,|L1.12768|
002e5a  49e2              LDR      r1,|L1.12772|
002e5c  f9b00000          LDRSH    r0,[r0,#0]            ;4416  ; speedChIsOn
002e60  b9d8              CBNZ     r0,|L1.11930|
002e62  7d0a              LDRB     r2,[r1,#0x14]         ;4416  ; spc_stat
002e64  2a02              CMP      r2,#2                 ;4416
002e66  d018              BEQ      |L1.11930|
002e68  783a              LDRB     r2,[r7,#0]            ;4416  ; hv_vz_stat
002e6a  b9b2              CBNZ     r2,|L1.11930|
002e6c  7832              LDRB     r2,[r6,#0]            ;4416  ; sp_ch_stat
002e6e  b9a2              CBNZ     r2,|L1.11930|
002e70  f8912020          LDRB     r2,[r1,#0x20]         ;4416  ; vz1_stat
002e74  b98a              CBNZ     r2,|L1.11930|
002e76  f8912023          LDRB     r2,[r1,#0x23]         ;4416  ; vz2_stat
002e7a  b972              CBNZ     r2,|L1.11930|
002e7c  f9b82000          LDRSH    r2,[r8,#0]            ;4416  ; load_U
002e80  230a              MOVS     r3,#0xa               ;4416
002e82  fb92f2f3          SDIV     r2,r2,r3              ;4416
002e86  4bd8              LDR      r3,|L1.12776|
002e88  f9b33000          LDRSH    r3,[r3,#0]            ;4416  ; UVENTOFF
002e8c  429a              CMP      r2,r3                 ;4416
002e8e  da04              BGE      |L1.11930|
002e90  69e0              LDR      r0,[r4,#0x1c]         ;4416
002e92  f4407000          ORR      r0,r0,#0x200          ;4416
002e96  61e0              STR      r0,[r4,#0x1c]         ;4416
002e98  e01d              B        |L1.11990|
                  |L1.11930|
002e9a  b960              CBNZ     r0,|L1.11958|
002e9c  7d08              LDRB     r0,[r1,#0x14]         ;4417  ; spc_stat
002e9e  2802              CMP      r0,#2                 ;4417
002ea0  d009              BEQ      |L1.11958|
002ea2  7838              LDRB     r0,[r7,#0]            ;4417  ; hv_vz_stat
002ea4  b938              CBNZ     r0,|L1.11958|
002ea6  7830              LDRB     r0,[r6,#0]            ;4417  ; sp_ch_stat
002ea8  b928              CBNZ     r0,|L1.11958|
002eaa  f8910020          LDRB     r0,[r1,#0x20]         ;4417  ; vz1_stat
002eae  b910              CBNZ     r0,|L1.11958|
002eb0  f8910023          LDRB     r0,[r1,#0x23]         ;4417  ; vz2_stat
002eb4  b178              CBZ      r0,|L1.11990|
                  |L1.11958|
002eb6  69a0              LDR      r0,[r4,#0x18]         ;4417
002eb8  f4407000          ORR      r0,r0,#0x200          ;4417
002ebc  61a0              STR      r0,[r4,#0x18]         ;4417
002ebe  e00a              B        |L1.11990|
                  |L1.11968|
;;;4420   	{
;;;4421   	if((mess_find_unvol(MESS2RELE_HNDL))&& (mess_data[0]==PARAM_RELE_BAT_IS_DISCHARGED)) SET_REG(LPC_GPIO0->FIOCLR,1,9,1);
002ec0  20d2              MOVS     r0,#0xd2
002ec2  f7fffffe          BL       mess_find_unvol
002ec6  b110              CBZ      r0,|L1.11982|
002ec8  6828              LDR      r0,[r5,#0]  ; mess_data
002eca  2872              CMP      r0,#0x72
002ecc  d017              BEQ      |L1.12030|
                  |L1.11982|
;;;4422   	else SET_REG(LPC_GPIO0->FIOSET,1,9,1);
002ece  69a0              LDR      r0,[r4,#0x18]
002ed0  f4407000          ORR      r0,r0,#0x200
002ed4  61a0              STR      r0,[r4,#0x18]
                  |L1.11990|
;;;4423   	}
;;;4424   	
;;;4425   //¡ÎÓÍ ‚˚ÌÓÒÌÓÈ ÂÎÂ
;;;4426   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_BDR1))
002ed6  20d2              MOVS     r0,#0xd2
002ed8  f7fffffe          BL       mess_find_unvol
;;;4427   	{
;;;4428   	if(mess_data[1]==0) 		bdr_transmit_stat&=0xfe;
002edc  f8df930c          LDR      r9,|L1.12780|
;;;4429   	else if(mess_data[1]==1) 	bdr_transmit_stat|=0x01;
;;;4430   	}
;;;4431   else 
;;;4432   	{
;;;4433   	if(bdr_avar_stat&0x01)  	bdr_transmit_stat|=0x01;
002ee0  4cc3              LDR      r4,|L1.12784|
002ee2  b110              CBZ      r0,|L1.12010|
002ee4  6828              LDR      r0,[r5,#0]            ;4426  ; mess_data
002ee6  2875              CMP      r0,#0x75              ;4426
002ee8  d00e              BEQ      |L1.12040|
                  |L1.12010|
002eea  7820              LDRB     r0,[r4,#0]  ; bdr_avar_stat
002eec  07c0              LSLS     r0,r0,#31
002eee  d01e              BEQ      |L1.12078|
002ef0  f8990000          LDRB     r0,[r9,#0]  ; bdr_transmit_stat
002ef4  f0400001          ORR      r0,r0,#1
002ef8  f8890000          STRB     r0,[r9,#0]
002efc  e01d              B        |L1.12090|
                  |L1.12030|
002efe  69e0              LDR      r0,[r4,#0x1c]         ;4421
002f00  f4407000          ORR      r0,r0,#0x200          ;4421
002f04  61e0              STR      r0,[r4,#0x1c]         ;4421
002f06  e7e6              B        |L1.11990|
                  |L1.12040|
002f08  6868              LDR      r0,[r5,#4]            ;4428  ; mess_data
002f0a  b110              CBZ      r0,|L1.12050|
002f0c  2801              CMP      r0,#1                 ;4429
002f0e  d007              BEQ      |L1.12064|
002f10  e013              B        |L1.12090|
                  |L1.12050|
002f12  f8990000          LDRB     r0,[r9,#0]            ;4428  ; bdr_transmit_stat
002f16  f00000fe          AND      r0,r0,#0xfe           ;4428
002f1a  f8890000          STRB     r0,[r9,#0]            ;4428
002f1e  e00c              B        |L1.12090|
                  |L1.12064|
002f20  f8990000          LDRB     r0,[r9,#0]            ;4429  ; bdr_transmit_stat
002f24  f0400001          ORR      r0,r0,#1              ;4429
002f28  f8890000          STRB     r0,[r9,#0]            ;4429
002f2c  e005              B        |L1.12090|
                  |L1.12078|
;;;4434   	else 						bdr_transmit_stat&=0xfe;
002f2e  f8990000          LDRB     r0,[r9,#0]  ; bdr_transmit_stat
002f32  f00000fe          AND      r0,r0,#0xfe
002f36  f8890000          STRB     r0,[r9,#0]
                  |L1.12090|
;;;4435   	}	
;;;4436   
;;;4437   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_BDR2))
002f3a  20d2              MOVS     r0,#0xd2
002f3c  f7fffffe          BL       mess_find_unvol
002f40  b110              CBZ      r0,|L1.12104|
002f42  6828              LDR      r0,[r5,#0]  ; mess_data
002f44  2876              CMP      r0,#0x76
002f46  d009              BEQ      |L1.12124|
                  |L1.12104|
;;;4438   	{
;;;4439   	if(mess_data[1]==0) 		bdr_transmit_stat&=0xfd;
;;;4440   	else if(mess_data[1]==1) 	bdr_transmit_stat|=0x02;
;;;4441   	}
;;;4442   else 
;;;4443   	{
;;;4444   	if(bdr_avar_stat&0x01)  	bdr_transmit_stat|=0x02;
002f48  7820              LDRB     r0,[r4,#0]  ; bdr_avar_stat
002f4a  07c0              LSLS     r0,r0,#31
002f4c  d019              BEQ      |L1.12162|
002f4e  f8990000          LDRB     r0,[r9,#0]  ; bdr_transmit_stat
002f52  f0400002          ORR      r0,r0,#2
002f56  f8890000          STRB     r0,[r9,#0]
002f5a  e018              B        |L1.12174|
                  |L1.12124|
002f5c  6868              LDR      r0,[r5,#4]            ;4439  ; mess_data
002f5e  b110              CBZ      r0,|L1.12134|
002f60  2801              CMP      r0,#1                 ;4440
002f62  d007              BEQ      |L1.12148|
002f64  e013              B        |L1.12174|
                  |L1.12134|
002f66  f8990000          LDRB     r0,[r9,#0]            ;4439  ; bdr_transmit_stat
002f6a  f00000fd          AND      r0,r0,#0xfd           ;4439
002f6e  f8890000          STRB     r0,[r9,#0]            ;4439
002f72  e00c              B        |L1.12174|
                  |L1.12148|
002f74  f8990000          LDRB     r0,[r9,#0]            ;4440  ; bdr_transmit_stat
002f78  f0400002          ORR      r0,r0,#2              ;4440
002f7c  f8890000          STRB     r0,[r9,#0]            ;4440
002f80  e005              B        |L1.12174|
                  |L1.12162|
;;;4445   	else 						bdr_transmit_stat&=0xfd;
002f82  f8990000          LDRB     r0,[r9,#0]  ; bdr_transmit_stat
002f86  f00000fd          AND      r0,r0,#0xfd
002f8a  f8890000          STRB     r0,[r9,#0]
                  |L1.12174|
;;;4446   	}	
;;;4447   	
;;;4448   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_BDR3))
002f8e  20d2              MOVS     r0,#0xd2
002f90  f7fffffe          BL       mess_find_unvol
002f94  b110              CBZ      r0,|L1.12188|
002f96  6828              LDR      r0,[r5,#0]  ; mess_data
002f98  2877              CMP      r0,#0x77
002f9a  d009              BEQ      |L1.12208|
                  |L1.12188|
;;;4449   	{
;;;4450   	if(mess_data[1]==0) 		bdr_transmit_stat&=0xfb;
;;;4451   	else if(mess_data[1]==1) 	bdr_transmit_stat|=0x04;
;;;4452   	}
;;;4453   else 
;;;4454   	{
;;;4455   	if(bdr_avar_stat&0x01)  	bdr_transmit_stat|=0x04;
002f9c  7820              LDRB     r0,[r4,#0]  ; bdr_avar_stat
002f9e  07c0              LSLS     r0,r0,#31
002fa0  d019              BEQ      |L1.12246|
002fa2  f8990000          LDRB     r0,[r9,#0]  ; bdr_transmit_stat
002fa6  f0400004          ORR      r0,r0,#4
002faa  f8890000          STRB     r0,[r9,#0]
002fae  e018              B        |L1.12258|
                  |L1.12208|
002fb0  6868              LDR      r0,[r5,#4]            ;4450  ; mess_data
002fb2  b110              CBZ      r0,|L1.12218|
002fb4  2801              CMP      r0,#1                 ;4451
002fb6  d007              BEQ      |L1.12232|
002fb8  e013              B        |L1.12258|
                  |L1.12218|
002fba  f8990000          LDRB     r0,[r9,#0]            ;4450  ; bdr_transmit_stat
002fbe  f00000fb          AND      r0,r0,#0xfb           ;4450
002fc2  f8890000          STRB     r0,[r9,#0]            ;4450
002fc6  e00c              B        |L1.12258|
                  |L1.12232|
002fc8  f8990000          LDRB     r0,[r9,#0]            ;4451  ; bdr_transmit_stat
002fcc  f0400004          ORR      r0,r0,#4              ;4451
002fd0  f8890000          STRB     r0,[r9,#0]            ;4451
002fd4  e005              B        |L1.12258|
                  |L1.12246|
;;;4456   	else 						bdr_transmit_stat&=0xfb;
002fd6  f8990000          LDRB     r0,[r9,#0]  ; bdr_transmit_stat
002fda  f00000fb          AND      r0,r0,#0xfb
002fde  f8890000          STRB     r0,[r9,#0]
                  |L1.12258|
;;;4457   	}	
;;;4458   	
;;;4459   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_BDR4))
002fe2  20d2              MOVS     r0,#0xd2
002fe4  f7fffffe          BL       mess_find_unvol
002fe8  b110              CBZ      r0,|L1.12272|
002fea  6828              LDR      r0,[r5,#0]  ; mess_data
002fec  2878              CMP      r0,#0x78
002fee  d009              BEQ      |L1.12292|
                  |L1.12272|
;;;4460   	{
;;;4461   	if(mess_data[1]==0) 		bdr_transmit_stat&=0xf7;
;;;4462   	else if(mess_data[1]==1) 	bdr_transmit_stat|=0x08;
;;;4463   	}
;;;4464   else 
;;;4465   	{
;;;4466   	if(bdr_avar_stat&0x01)  	bdr_transmit_stat|=0x08;
002ff0  7820              LDRB     r0,[r4,#0]  ; bdr_avar_stat
002ff2  07c0              LSLS     r0,r0,#31
002ff4  d019              BEQ      |L1.12330|
002ff6  f8990000          LDRB     r0,[r9,#0]  ; bdr_transmit_stat
002ffa  f0400008          ORR      r0,r0,#8
002ffe  f8890000          STRB     r0,[r9,#0]
003002  e018              B        |L1.12342|
                  |L1.12292|
003004  6868              LDR      r0,[r5,#4]            ;4461  ; mess_data
003006  b110              CBZ      r0,|L1.12302|
003008  2801              CMP      r0,#1                 ;4462
00300a  d007              BEQ      |L1.12316|
00300c  e013              B        |L1.12342|
                  |L1.12302|
00300e  f8990000          LDRB     r0,[r9,#0]            ;4461  ; bdr_transmit_stat
003012  f00000f7          AND      r0,r0,#0xf7           ;4461
003016  f8890000          STRB     r0,[r9,#0]            ;4461
00301a  e00c              B        |L1.12342|
                  |L1.12316|
00301c  f8990000          LDRB     r0,[r9,#0]            ;4462  ; bdr_transmit_stat
003020  f0400008          ORR      r0,r0,#8              ;4462
003024  f8890000          STRB     r0,[r9,#0]            ;4462
003028  e005              B        |L1.12342|
                  |L1.12330|
;;;4467   	else 						bdr_transmit_stat&=0xf7;
00302a  f8990000          LDRB     r0,[r9,#0]  ; bdr_transmit_stat
00302e  f00000f7          AND      r0,r0,#0xf7
003032  f8890000          STRB     r0,[r9,#0]
                  |L1.12342|
;;;4468   	}	
;;;4469   					 	
;;;4470   #endif
;;;4471   
;;;4472   #ifdef UKU_KONTUR
;;;4473   
;;;4474   //–ÂÎÂ Ó·˘ÂÈ ‡‚‡ËË
;;;4475   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_COMM))
;;;4476   	{
;;;4477   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_COMM,1);
;;;4478   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_COMM,1);
;;;4479   	}
;;;4480   else 
;;;4481   	{
;;;4482        if(  (!(avar_ind_stat&0x00007fff)) &&
;;;4483             ((!SK_REL_EN[0]) || (sk_av_stat[0]!=sasON))  &&
;;;4484             ((!SK_REL_EN[1]) || (sk_av_stat[1]!=sasON))  &&
;;;4485             ((!SK_REL_EN[2]) || (sk_av_stat[2]!=sasON))  /*&&
;;;4486             ((!SK_REL_EN[3]) || (sk_av_stat[3]!=sasON))*/  )SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_COMM,1);
;;;4487        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_COMM,1);
;;;4488   	}
;;;4489   
;;;4490   	
;;;4491   //rel_warm_plazma=0;
;;;4492   //–ÂÎÂ ÓÒ‚Â˘ÂÌËˇ   
;;;4493   /*
;;;4494   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_WARM))
;;;4495   	{
;;;4496   	if(mess_data[1]==0)
;;;4497   		{
;;;4498   		SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_WARM,1);
;;;4499   		rel_warm_plazma=1;
;;;4500   		}
;;;4501   	else if(mess_data[1]==1) 
;;;4502   		{
;;;4503   		SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_WARM,1);
;;;4504   		rel_warm_plazma=2;
;;;4505   		}
;;;4506        }
;;;4507   else 
;;;4508   	{
;;;4509   	if(warm_stat_k==wsOFF) 
;;;4510   		{
;;;4511   		SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_WARM,1);
;;;4512   		rel_warm_plazma=3;
;;;4513   		}
;;;4514        else 
;;;4515   		{
;;;4516   		SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_WARM,1);
;;;4517   		rel_warm_plazma=4;
;;;4518   		}
;;;4519   	}
;;;4520   */
;;;4521   //–ÂÎÂ ÓÒ‚Â˘ÂÌËˇ
;;;4522   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_LIGHT))
;;;4523   	{
;;;4524   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LIGHT,1);
;;;4525   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LIGHT,1);
;;;4526        }
;;;4527   else 
;;;4528   	{
;;;4529   	if(sk_av_stat[0]!=sasON) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LIGHT,1);
;;;4530        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LIGHT,1);
;;;4531   	}
;;;4532   
;;;4533   
;;;4534   
;;;4535   //–ÂÎÂ ‚˚ÍÎ˛˜ÂÌËˇ Ì‡„ÛÁÍË
;;;4536   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_LOAD_OFF))
;;;4537   	{
;;;4538   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LOAD_OFF,1);
;;;4539   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LOAD_OFF,1);
;;;4540        }
;;;4541   else if(tloaddisable_cmnd==0)
;;;4542   	{
;;;4543   	SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LOAD_OFF,1);
;;;4544   	}
;;;4545   else if((tloaddisable_cmnd)&&(tloaddisable_cmnd<=11))
;;;4546   	{
;;;4547   	SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LOAD_OFF,1);
;;;4548   	}
;;;4549   
;;;4550   else 
;;;4551   	{
;;;4552   	if(!(tloaddisable_stat==tldsON)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LOAD_OFF,1);
;;;4553        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LOAD_OFF,1);
;;;4554   	} 
;;;4555   
;;;4556   //–ÂÎÂ ÓÒÂ‚Ó„Ó ‚ÂÌÚËÎˇÚÓ‡ ËÎË ÓÚÓÔËÚÂÎˇ
;;;4557   if(RELE_LOG)
;;;4558   	{
;;;4559   	if((mess_find_unvol(MESS2RELE_HNDL))&&(mess_data[0]==PARAM_RELE_VENT_WARM))
;;;4560   		{
;;;4561   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT_WARM,1);
;;;4562   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT_WARM,1);
;;;4563   		}
;;;4564   	else 
;;;4565   		{
;;;4566   		if(warm_stat_k==wsOFF) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT_WARM,1);
;;;4567   	     else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT_WARM,1);
;;;4568   		} 
;;;4569   
;;;4570   	}
;;;4571   else 
;;;4572   	{
;;;4573   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_VENT_WARM))
;;;4574   		{
;;;4575   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT_WARM,1);
;;;4576   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT_WARM,1);
;;;4577   		}
;;;4578   	else 
;;;4579   		{
;;;4580   		if(vent_stat_k==vsOFF) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT_WARM,1);
;;;4581   	     else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT_WARM,1);
;;;4582   		} 
;;;4583   	}
;;;4584   #endif
;;;4585   
;;;4586   
;;;4587   #ifdef UKU_TELECORE2015
;;;4588   //–ÂÎÂ ‡‚‡ËË ÒÂÚË
;;;4589   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_NET))
;;;4590   	{
;;;4591   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;4592   	else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_NET,1);
;;;4593   	}
;;;4594   else	if(!(avar_ind_stat&0x00000001)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;4595   else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_NET,1);
;;;4596   
;;;4597   
;;;4598   //–ÂÎÂ ÓÒ‚Â˘ÂÌËˇ
;;;4599   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_LIGHT))
;;;4600   	{
;;;4601   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LIGHT,1);
;;;4602   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LIGHT,1);
;;;4603        }
;;;4604   else 
;;;4605   	{
;;;4606   	if(sk_av_stat[0]!=sasON) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LIGHT,1);
;;;4607        else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LIGHT,1);
;;;4608   	}
;;;4609   
;;;4610   //–ÂÎÂ ÓÚÓÔËÚÂÎˇ
;;;4611   if((mess_find_unvol(MESS2RELE_HNDL))&&(mess_data[0]==PARAM_RELE_WARM))
;;;4612   	{
;;;4613   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_WARM,1);
;;;4614   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_WARM,1);
;;;4615   	}
;;;4616   else 
;;;4617   	{
;;;4618   	if(warm_stat_k==wsOFF) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_WARM,1);
;;;4619        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_WARM,1);
;;;4620   	} 
;;;4621   //–ÂÎÂ ‚ÂÌÚËÎˇÚÓ‡
;;;4622   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_VENT))
;;;4623   	{
;;;4624   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT,1);
;;;4625   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;4626   	}
;;;4627   else 
;;;4628   	{
;;;4629   	if(vent_stat_k==vsOFF) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT,1);
;;;4630        else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;4631   	} 
;;;4632   
;;;4633   //–ÂÎÂ ‚ÌÛÚÂÌÌÂ„Ó ‚ÂÌÚËÎˇÚÓ‡
;;;4634   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_VVENT))
;;;4635   	{
;;;4636   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VVENT,1);
;;;4637   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VVENT,1);
;;;4638   	}
;;;4639   else 
;;;4640   	{
;;;4641   	if(vvent_stat_k==vsOFF) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VVENT,1);
;;;4642        else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VVENT,1);
;;;4643   	} 
;;;4644   
;;;4645   #endif
;;;4646   
;;;4647   #ifdef UKU_TELECORE2017
;;;4648   //–ÂÎÂ ‡‚‡ËË ÒÂÚË
;;;4649   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_NET))
;;;4650   	{
;;;4651   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;4652   	else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_NET,1);
;;;4653   	}
;;;4654   else	if(!(avar_ind_stat&0x00000001)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;4655   else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_NET,1);
;;;4656   
;;;4657   
;;;4658   //–ÂÎÂ ÓÒ‚Â˘ÂÌËˇ
;;;4659   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_LIGHT))
;;;4660   	{
;;;4661   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LIGHT,1);
;;;4662   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LIGHT,1);
;;;4663        }
;;;4664   else 
;;;4665   	{
;;;4666   	if(sk_av_stat[0]!=sasON) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LIGHT,1);
;;;4667        else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LIGHT,1);
;;;4668   	}
;;;4669   
;;;4670   //–ÂÎÂ ÓÚÓÔËÚÂÎˇ
;;;4671   if((mess_find_unvol(MESS2RELE_HNDL))&&(mess_data[0]==PARAM_RELE_WARM))
;;;4672   	{
;;;4673   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_WARM,1);
;;;4674   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_WARM,1);
;;;4675   	}
;;;4676   else 
;;;4677   	{
;;;4678   	if(warm_stat_k==wsOFF) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_WARM,1);
;;;4679        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_WARM,1);
;;;4680   	} 
;;;4681   //–ÂÎÂ ‚ÂÌÚËÎˇÚÓ‡
;;;4682   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_VENT))
;;;4683   	{
;;;4684   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT,1);
;;;4685   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;4686   	}
;;;4687   else 
;;;4688   	{
;;;4689   	if(vent_stat_k==vsOFF) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT,1);
;;;4690        else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;4691   	} 
;;;4692   
;;;4693   //–ÂÎÂ ‚ÌÛÚÂÌÌÂ„Ó ‚ÂÌÚËÎˇÚÓ‡
;;;4694   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_VVENT))
;;;4695   	{
;;;4696   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VVENT,1);
;;;4697   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VVENT,1);
;;;4698   	}
;;;4699   else 
;;;4700   	{
;;;4701   	if(vvent_stat_k==vsOFF) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VVENT,1);
;;;4702        else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VVENT,1);
;;;4703   	} 
;;;4704   
;;;4705   //–ÂÎÂ ‚˚ÍÎ˛˜ÂÌËˇ Ì‡„ÛÁÍË
;;;4706   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_LOAD_OFF))
;;;4707   	{
;;;4708   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LOAD_OFF,1);
;;;4709   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LOAD_OFF,1);
;;;4710        }
;;;4711   else if(tloaddisable_cmnd==0)
;;;4712   	{
;;;4713   	SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LOAD_OFF,1);
;;;4714   	}
;;;4715   else if((tloaddisable_cmnd)&&(tloaddisable_cmnd<=11))
;;;4716   	{
;;;4717   	SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LOAD_OFF,1);
;;;4718   	}
;;;4719   
;;;4720   else 
;;;4721   	{
;;;4722   	if(!(tloaddisable_stat==tldsON)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LOAD_OFF,1);
;;;4723        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LOAD_OFF,1);
;;;4724   	} 
;;;4725   
;;;4726   
;;;4727   #endif
;;;4728   
;;;4729   #ifdef IPS_SGEP_GAZPROM
;;;4730   rele_hndl_plazma[0]++;
;;;4731   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BPS))
;;;4732   	{
;;;4733   	rele_hndl_plazma[1]++;
;;;4734   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
;;;4735   	else/* if(mess_data[1]==1)*/ SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
;;;4736        }
;;;4737   else 
;;;4738   	{
;;;4739   	if(!(avar_ind_stat&0x000007f8)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
;;;4740        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
;;;4741   	} 
;;;4742   
;;;4743   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_NET))
;;;4744   	{
;;;4745   	rele_hndl_plazma[2]++;
;;;4746   	if(mess_data[1]==0) SET_REG(LPC_GPIO3->FIOSET,1,25,1);
;;;4747   	else SET_REG(LPC_GPIO3->FIOCLR,1,25,1);
;;;4748   	}
;;;4749   else	if(!(avar_ind_stat&0x00000001)) SET_REG(LPC_GPIO3->FIOCLR,1,25,1);
;;;4750   else SET_REG(LPC_GPIO3->FIOSET,1,25,1);
;;;4751   #endif
;;;4752   
;;;4753   if(NUMBDR==1)
003036  486f              LDR      r0,|L1.12788|
003038  8800              LDRH     r0,[r0,#0]  ; NUMBDR
00303a  2801              CMP      r0,#1
00303c  d17e              BNE      |L1.12604|
;;;4754   	{
;;;4755   	char ii_;
;;;4756   	char bdr_avar_stat_temp=0;
00303e  f04f0000          MOV      r0,#0
;;;4757   	for	(ii_=0;ii_<4;ii_++)
003042  4601              MOV      r1,r0
;;;4758   		{
;;;4759   		//¿¡ ‡ÁˇÊÂÌ‡
;;;4760   		if((RELE_SET_MASK[ii_]&0x01)&&
;;;4761   			(load_U<(USIGN*10)))			bdr_avar_stat_temp|=(1<<ii_);
;;;4762   		//”ÒÍÓÂÌÌ˚È Á‡ˇ‰
;;;4763   		if((RELE_SET_MASK[ii_]&0x02)&&
;;;4764   			(sp_ch_stat==scsWRK))			bdr_avar_stat_temp|=(1<<ii_);
;;;4765   		//¬˚‡‚ÌË‚‡˛˘ËÈ Á‡ˇ‰
;;;4766   		if((RELE_SET_MASK[ii_]&0x04)&&
;;;4767   			(hv_vz_stat==scsWRK))			bdr_avar_stat_temp|=(1<<ii_);
;;;4768   		//Œ·˘‡ˇ ‡‚‡Ëˇ «¬”
;;;4769   		if((RELE_SET_MASK[ii_]&0x08)&&
;;;4770   			(avar_stat))					bdr_avar_stat_temp|=(1<<ii_);
;;;4771   		//U‚˚ı Á‡‚˚¯ÂÌÓ
;;;4772   		if((RELE_SET_MASK[ii_]&0x10)&&
;;;4773   			(uout_av==1))					bdr_avar_stat_temp|=(1<<ii_);
003044  f8dfa1b0          LDR      r10,|L1.12792|
;;;4774   		//U‚˚ı Á‡ÌËÊÂÌÓ
;;;4775   		if((RELE_SET_MASK[ii_]&0x20)&&
;;;4776   			(uout_av==2))					bdr_avar_stat_temp|=(1<<ii_);
;;;4777   		if((RELE_SET_MASK[ii_]&0x40)&&
;;;4778   			(
;;;4779   			((bps[0]._av&(1<<4))&&(NUMIST>=1))||
003048  f8df91b0          LDR      r9,|L1.12796|
00304c  4d6c              LDR      r5,|L1.12800|
00304e  f8dfb1b4          LDR      r11,|L1.12804|
003052  f04f0301          MOV      r3,#1                 ;3711
                  |L1.12374|
003056  f93b2011          LDRSH    r2,[r11,r1,LSL #1]    ;4760
00305a  ea5f7cc2          LSLS     r12,r2,#31            ;4760
00305e  d010              BEQ      |L1.12418|
003060  f8dfc1a4          LDR      r12,|L1.12808|
003064  f9b8e000          LDRSH    lr,[r8,#0]            ;4761  ; load_U
003068  f9bcc000          LDRSH    r12,[r12,#0]          ;4761  ; USIGN
00306c  eb0c0c8c          ADD      r12,r12,r12,LSL #2    ;4761
003070  ebbe0f4c          CMP      lr,r12,LSL #1         ;4761
003074  da05              BGE      |L1.12418|
003076  fa03fc01          LSL      r12,r3,r1             ;4761
00307a  ea4c0c00          ORR      r12,r12,r0            ;4761
00307e  f00c00ff          AND      r0,r12,#0xff          ;4761
                  |L1.12418|
003082  ea5f7c82          LSLS     r12,r2,#30            ;4763
003086  d50a              BPL      |L1.12446|
003088  f896c000          LDRB     r12,[r6,#0]           ;4764  ; sp_ch_stat
00308c  f1bc0f02          CMP      r12,#2                ;4764
003090  d105              BNE      |L1.12446|
003092  fa03fc01          LSL      r12,r3,r1             ;4764
003096  ea4c0c00          ORR      r12,r12,r0            ;4764
00309a  f00c00ff          AND      r0,r12,#0xff          ;4764
                  |L1.12446|
00309e  ea5f7c42          LSLS     r12,r2,#29            ;4766
0030a2  d50a              BPL      |L1.12474|
0030a4  f897c000          LDRB     r12,[r7,#0]           ;4767  ; hv_vz_stat
0030a8  f1bc0f02          CMP      r12,#2                ;4767
0030ac  d105              BNE      |L1.12474|
0030ae  fa03fc01          LSL      r12,r3,r1             ;4767
0030b2  ea4c0c00          ORR      r12,r12,r0            ;4767
0030b6  f00c00ff          AND      r0,r12,#0xff          ;4767
                  |L1.12474|
0030ba  ea5f7c02          LSLS     r12,r2,#28            ;4769
0030be  d50c              BPL      |L1.12506|
0030c0  f8dfc148          LDR      r12,|L1.12812|
0030c4  f8dcc000          LDR      r12,[r12,#0]          ;4770  ; avar_stat
0030c8  f1bc0f00          CMP      r12,#0                ;4770
0030cc  d005              BEQ      |L1.12506|
0030ce  fa03fc01          LSL      r12,r3,r1             ;4770
0030d2  ea4c0c00          ORR      r12,r12,r0            ;4770
0030d6  f00c00ff          AND      r0,r12,#0xff          ;4770
                  |L1.12506|
0030da  ea5f6cc2          LSLS     r12,r2,#27            ;4772
0030de  d50a              BPL      |L1.12534|
0030e0  f89ac000          LDRB     r12,[r10,#0]          ;4773  ; uout_av
0030e4  f1bc0f01          CMP      r12,#1                ;4773
0030e8  d105              BNE      |L1.12534|
0030ea  fa03fc01          LSL      r12,r3,r1             ;4773
0030ee  ea4c0c00          ORR      r12,r12,r0            ;4773
0030f2  f00c00ff          AND      r0,r12,#0xff          ;4773
                  |L1.12534|
0030f6  ea5f6c82          LSLS     r12,r2,#26            ;4775
0030fa  d50a              BPL      |L1.12562|
0030fc  f89ac000          LDRB     r12,[r10,#0]          ;4776  ; uout_av
003100  f1bc0f02          CMP      r12,#2                ;4776
003104  d105              BNE      |L1.12562|
003106  fa03fc01          LSL      r12,r3,r1             ;4776
00310a  ea4c0c00          ORR      r12,r12,r0            ;4776
00310e  f00c00ff          AND      r0,r12,#0xff          ;4776
                  |L1.12562|
003112  ea5f6c42          LSLS     r12,r2,#25            ;4777
003116  d525              BPL      |L1.12644|
003118  f899c001          LDRB     r12,[r9,#1]  ; bps
00311c  ea5f6ccc          LSLS     r12,r12,#27
003120  d504              BPL      |L1.12588|
003122  f9b5c000          LDRSH    r12,[r5,#0]  ; NUMIST
003126  f1bc0f01          CMP      r12,#1
00312a  da15              BGE      |L1.12632|
                  |L1.12588|
;;;4780   			((bps[1]._av&(1<<4))&&(NUMIST>=2))||
00312c  f899c05d          LDRB     r12,[r9,#0x5d]  ; bps
003130  ea5f6ccc          LSLS     r12,r12,#27
003134  d506              BPL      |L1.12612|
003136  f9b5c000          LDRSH    r12,[r5,#0]  ; NUMIST
00313a  e000              B        |L1.12606|
                  |L1.12604|
00313c  e047              B        |L1.12750|
                  |L1.12606|
00313e  f1bc0f02          CMP      r12,#2
003142  da09              BGE      |L1.12632|
                  |L1.12612|
;;;4781   			((bps[2]._av&(1<<4))&&(NUMIST>=3))
003144  f899c0b9          LDRB     r12,[r9,#0xb9]  ; bps
003148  ea5f6ccc          LSLS     r12,r12,#27
00314c  d50a              BPL      |L1.12644|
00314e  f9b5c000          LDRSH    r12,[r5,#0]  ; NUMIST
003152  f1bc0f03          CMP      r12,#3
003156  db05              BLT      |L1.12644|
                  |L1.12632|
;;;4782   			))bdr_avar_stat_temp|=(1<<ii_);
003158  fa03fc01          LSL      r12,r3,r1
00315c  ea4c0c00          ORR      r12,r12,r0
003160  f00c00ff          AND      r0,r12,#0xff
                  |L1.12644|
;;;4783   		if((RELE_SET_MASK[ii_]&0x80)&&
003164  ea5f6c02          LSLS     r12,r2,#24
003168  d523              BPL      |L1.12722|
;;;4784   			(
;;;4785   			((bps[0]._av&(0x0f))&&(NUMIST>=1))||
00316a  f899c001          LDRB     r12,[r9,#1]  ; bps
00316e  ea5f7c0c          LSLS     r12,r12,#28
003172  d004              BEQ      |L1.12670|
003174  f9b5c000          LDRSH    r12,[r5,#0]  ; NUMIST
003178  f1bc0f01          CMP      r12,#1
00317c  da13              BGE      |L1.12710|
                  |L1.12670|
;;;4786   			((bps[1]._av&(0x0f))&&(NUMIST>=2))||
00317e  f899c05d          LDRB     r12,[r9,#0x5d]  ; bps
003182  ea5f7c0c          LSLS     r12,r12,#28
003186  d004              BEQ      |L1.12690|
003188  f9b5c000          LDRSH    r12,[r5,#0]  ; NUMIST
00318c  f1bc0f02          CMP      r12,#2
003190  da09              BGE      |L1.12710|
                  |L1.12690|
;;;4787   			((bps[2]._av&(0x0f))&&(NUMIST>=3))
003192  f899c0b9          LDRB     r12,[r9,#0xb9]  ; bps
003196  ea5f7c0c          LSLS     r12,r12,#28
00319a  d00a              BEQ      |L1.12722|
00319c  f9b5c000          LDRSH    r12,[r5,#0]  ; NUMIST
0031a0  f1bc0f03          CMP      r12,#3
0031a4  db05              BLT      |L1.12722|
                  |L1.12710|
;;;4788   			))bdr_avar_stat_temp|=(1<<ii_);
0031a6  fa03fc01          LSL      r12,r3,r1
0031aa  ea4c0c00          ORR      r12,r12,r0
0031ae  f00c00ff          AND      r0,r12,#0xff
                  |L1.12722|
;;;4789   
;;;4790   		if(!(RELE_SET_MASK[ii_]&(1<<15))) bdr_avar_stat_temp^=(1<<ii_); 
0031b2  0412              LSLS     r2,r2,#16
0031b4  d404              BMI      |L1.12736|
0031b6  fa03f201          LSL      r2,r3,r1
0031ba  ea820200          EOR      r2,r2,r0
0031be  b2d0              UXTB     r0,r2
                  |L1.12736|
0031c0  f1010101          ADD      r1,r1,#1              ;4757
0031c4  b2c9              UXTB     r1,r1                 ;4757
0031c6  2904              CMP      r1,#4                 ;4757
0031c8  f4ffaf45          BCC      |L1.12374|
;;;4791   		}
;;;4792   	bdr_avar_stat=bdr_avar_stat_temp;
0031cc  7020              STRB     r0,[r4,#0]
                  |L1.12750|
;;;4793   	}
;;;4794   }
0031ce  e01f              B        |L1.12816|
                  |L1.12752|
                          DCD      load_U
                  |L1.12756|
                          DCD      sp_ch_stat
                  |L1.12760|
                          DCD      hv_vz_stat
                  |L1.12764|
                          DCD      DOP_RELE_FUNC
                  |L1.12768|
                          DCD      speedChIsOn
                  |L1.12772|
                          DCD      ||area_number.23||
                  |L1.12776|
                          DCD      UVENTOFF
                  |L1.12780|
                          DCD      bdr_transmit_stat
                  |L1.12784|
                          DCD      bdr_avar_stat
                  |L1.12788|
                          DCD      NUMBDR
                  |L1.12792|
                          DCD      uout_av
                  |L1.12796|
                          DCD      bps
                  |L1.12800|
                          DCD      NUMIST
                  |L1.12804|
                          DCD      RELE_SET_MASK
                  |L1.12808|
                          DCD      USIGN
                  |L1.12812|
                          DCD      avar_stat
                  |L1.12816|
003210  e8bd9ff0          POP      {r4-r12,pc}
;;;4795   
                          ENDP

                  bps_hndl PROC
;;;4797   //-----------------------------------------------
;;;4798   void bps_hndl(void)
003214  e92d5ff0          PUSH     {r4-r12,lr}
;;;4799   {
;;;4800   char ptr__,i;
;;;4801   unsigned short tempUS;
;;;4802   
;;;4803   if(sh_cnt0<10)
003218  4ef9              LDR      r6,|L1.13824|
;;;4804   	{
;;;4805   	sh_cnt0++;
;;;4806   	if(sh_cnt0>=10)
;;;4807   		{
;;;4808   		sh_cnt0=0;
00321a  2700              MOVS     r7,#0
;;;4809   		b1Hz_sh=1;
00321c  f04f0a01          MOV      r10,#1
003220  7cb0              LDRB     r0,[r6,#0x12]         ;4803  ; sh_cnt0
003222  280a              CMP      r0,#0xa               ;4803
003224  d208              BCS      |L1.12856|
003226  f1000001          ADD      r0,r0,#1              ;4805
00322a  b2c0              UXTB     r0,r0                 ;4805
00322c  74b0              STRB     r0,[r6,#0x12]         ;4805
00322e  280a              CMP      r0,#0xa               ;4806
003230  d302              BCC      |L1.12856|
003232  74b7              STRB     r7,[r6,#0x12]         ;4808
003234  f886a013          STRB     r10,[r6,#0x13]
                  |L1.12856|
;;;4810   		}
;;;4811   	}
;;;4812   
;;;4813   /*if(sh_cnt1<5)
;;;4814   	{
;;;4815   	sh_cnt1++;
;;;4816   	if(sh_cnt1==5)
;;;4817   		{
;;;4818   		sh_cnt1=0;
;;;4819   		b2Hz_sh=1;
;;;4820   		}
;;;4821   	} */
;;;4822   
;;;4823   
;;;4824   /*
;;;4825   if(mess_find(MESS_SRC_ON_OFF))
;;;4826   	{
;;;4827   	if(mess_data[0]==_MESS_SRC_MASK_BLOK_2SEC)
;;;4828   		{
;;;4829   		char i;
;;;4830   		for(i=0;i<NUMIST;i++)
;;;4831   			{
;;;4832   			if(mess_data[1]&(1<<i))src[i]._ist_blok_cnt=20;
;;;4833   			}
;;;4834   		
;;;4835   		}
;;;4836   	else if(mess_data[0]==_MESS_SRC_MASK_UNBLOK)
;;;4837   		{
;;;4838   		char i;
;;;4839   		for(i=0;i<NUMIST;i++)
;;;4840   			{
;;;4841   			if(mess_data[1]&(1<<i))src[i]._ist_blok_cnt=0;
;;;4842   			}
;;;4843   		
;;;4844   		}
;;;4845   	}
;;;4846   	
;;;4847   else if(mess_find(_MESS_SRC_MASK_ON))
;;;4848   	{				
;;;4849   	if(mess_data[0]==_MESS_SRC_MASK_ON)
;;;4850   		{
;;;4851   		char i;
;;;4852   		for(i=0;i<NUMIST;i++)
;;;4853   			{
;;;4854   			if(mess_data[1]&(1<<i))
;;;4855   				{
;;;4856   				src[i]._ist_blok_cnt=0;
;;;4857   				src[i]._flags_tu=2;
;;;4858   				}
;;;4859   			}
;;;4860   		
;;;4861   		}				
;;;4862   	}*/
;;;4863   
;;;4864   
;;;4865   
;;;4866   /*else*/ 
;;;4867   bps_on_mask=0;
003238  f8a67052          STRH     r7,[r6,#0x52]
;;;4868   bps_off_mask=0;
00323c  f8a67054          STRH     r7,[r6,#0x54]
;;;4869   
;;;4870   if(mess_find_unvol(MESS2BPS_HNDL))
003240  20cd              MOVS     r0,#0xcd
003242  f7fffffe          BL       mess_find_unvol
;;;4871   	{
;;;4872   	if(mess_data[0]==PARAM_BPS_ALL_OFF_AFTER_2SEC)
;;;4873   		{
;;;4874   		bps_off_mask=0xffff;
;;;4875   		}
;;;4876   
;;;4877   	if(mess_data[0]==PARAM_BPS_MASK_OFF_AFTER_2SEC)
;;;4878   		{
;;;4879   		bps_off_mask=mess_data[1];
;;;4880   		}
;;;4881   
;;;4882   	if(mess_data[0]==PARAM_BPS_MASK_ON)
;;;4883   		{
;;;4884   		bps_on_mask=mess_data[1];
;;;4885   		}
;;;4886   
;;;4887   	if(mess_data[0]==PARAM_BPS_ALL_ON)
;;;4888   		{
;;;4889   		bps_on_mask=0xffff;
;;;4890   		}
;;;4891   
;;;4892   	if(mess_data[0]==PARAM_BPS_MASK_ON_OFF_AFTER_2SEC)
;;;4893   		{
;;;4894   		bps_on_mask=mess_data[1];
;;;4895   		bps_off_mask=~(mess_data[1]);
;;;4896   		}
;;;4897   
;;;4898   
;;;4899   	for(i=0;i<=NUMIST;i++)
;;;4900   		{
;;;4901   		if(bps_off_mask&(1<<i)) bps[i]._blok_cnt++;
003246  f8df83bc          LDR      r8,|L1.13828|
00324a  f8dfb3bc          LDR      r11,|L1.13832|
00324e  b3a0              CBZ      r0,|L1.12986|
003250  4aee              LDR      r2,|L1.13836|
003252  f64f73ff          MOV      r3,#0xffff            ;4874
003256  6810              LDR      r0,[r2,#0]            ;4872  ; mess_data
003258  28ce              CMP      r0,#0xce              ;4872
00325a  d101              BNE      |L1.12896|
00325c  f8a63054          STRH     r3,[r6,#0x54]         ;4874
                  |L1.12896|
003260  28cf              CMP      r0,#0xcf              ;4877
003262  d102              BNE      |L1.12906|
003264  6851              LDR      r1,[r2,#4]            ;4879  ; mess_data
003266  f8a61054          STRH     r1,[r6,#0x54]         ;4879
                  |L1.12906|
00326a  28d1              CMP      r0,#0xd1              ;4882
00326c  d102              BNE      |L1.12916|
00326e  6851              LDR      r1,[r2,#4]            ;4884  ; mess_data
003270  f8a61052          STRH     r1,[r6,#0x52]         ;4884
                  |L1.12916|
003274  28d2              CMP      r0,#0xd2              ;4887
003276  d101              BNE      |L1.12924|
003278  f8a63052          STRH     r3,[r6,#0x52]         ;4889
                  |L1.12924|
00327c  28d0              CMP      r0,#0xd0              ;4892
00327e  d106              BNE      |L1.12942|
003280  6850              LDR      r0,[r2,#4]            ;4894  ; mess_data
003282  f8a60052          STRH     r0,[r6,#0x52]         ;4894
003286  ea6f0000          MVN      r0,r0                 ;4895
00328a  f8a60054          STRH     r0,[r6,#0x54]         ;4895
                  |L1.12942|
00328e  f04f0400          MOV      r4,#0                 ;4899
003292  e037              B        |L1.13060|
                  |L1.12948|
003294  f8b60054          LDRH     r0,[r6,#0x54]  ; bps_off_mask
003298  fa0af904          LSL      r9,r10,r4
00329c  ea190f00          TST      r9,r0
0032a0  d00c              BEQ      |L1.12988|
0032a2  ebc400c4          RSB      r0,r4,r4,LSL #3
0032a6  eb001004          ADD      r0,r0,r4,LSL #4
0032aa  eb080080          ADD      r0,r8,r0,LSL #2
0032ae  f8301f40          LDRH     r1,[r0,#0x40]!
0032b2  f1010101          ADD      r1,r1,#1
0032b6  8001              STRH     r1,[r0,#0]
0032b8  e008              B        |L1.13004|
                  |L1.12986|
0032ba  e028              B        |L1.13070|
                  |L1.12988|
;;;4902   		else bps[i]._blok_cnt=0;
0032bc  ebc400c4          RSB      r0,r4,r4,LSL #3
0032c0  eb001004          ADD      r0,r0,r4,LSL #4
0032c4  eb080080          ADD      r0,r8,r0,LSL #2
0032c8  f8a07040          STRH     r7,[r0,#0x40]
                  |L1.13004|
;;;4903   		gran(&bps[i]._blok_cnt,0,50);
0032cc  ebc400c4          RSB      r0,r4,r4,LSL #3
0032d0  eb001004          ADD      r0,r0,r4,LSL #4
0032d4  eb080580          ADD      r5,r8,r0,LSL #2
0032d8  f1050040          ADD      r0,r5,#0x40
0032dc  2232              MOVS     r2,#0x32
0032de  2100              MOVS     r1,#0
0032e0  f7fffffe          BL       gran
;;;4904   		if(bps[i]._blok_cnt>20) bps[i]._flags_tu=1;
0032e4  f9b50040          LDRSH    r0,[r5,#0x40]
0032e8  2814              CMP      r0,#0x14
0032ea  dd01              BLE      |L1.13040|
0032ec  f885a02c          STRB     r10,[r5,#0x2c]
                  |L1.13040|
;;;4905   		if(bps_on_mask&(1<<i)) bps[i]._flags_tu=0;
0032f0  f8b60052          LDRH     r0,[r6,#0x52]  ; bps_on_mask
0032f4  ea190f00          TST      r9,r0
0032f8  d001              BEQ      |L1.13054|
0032fa  f885702c          STRB     r7,[r5,#0x2c]
                  |L1.13054|
0032fe  f1040401          ADD      r4,r4,#1              ;4899
003302  b2e4              UXTB     r4,r4                 ;4899
                  |L1.13060|
003304  f9bb0000          LDRSH    r0,[r11,#0]           ;4899  ; NUMIST
003308  4284              CMP      r4,r0                 ;4899
00330a  ddc3              BLE      |L1.12948|
00330c  e08a              B        |L1.13348|
                  |L1.13070|
;;;4906   	     }
;;;4907   
;;;4908   	
;;;4909   /*
;;;4910   
;;;4911   	if(bps_all_off_cnt>20)
;;;4912   		{
;;;4913   		for(i=0;i<=NUMIST;i++)
;;;4914   			{
;;;4915   	     	bps[i]._flags_tu=1;
;;;4916   	     	}
;;;4917   		}
;;;4918   	else if(bps_mask_off_cnt>20)
;;;4919   		{
;;;4920   		for(i=0;i<=NUMIST;i++)
;;;4921   			{
;;;4922   			if(mess_data[1]&(1<<i)) bps[i]._flags_tu=1;
;;;4923   	     	}
;;;4924   		}	
;;;4925   		
;;;4926   	else if(bps_mask_on_off_cnt>20)
;;;4927   		{
;;;4928   		for(i=0;i<=NUMIST;i++)
;;;4929   			{
;;;4930   			if(mess_data[1]&(1<<i)) bps[i]._flags_tu=1;
;;;4931   			else bps[i]._flags_tu=0;
;;;4932   	     	}
;;;4933   		}
;;;4934   		
;;;4935   	if(mess_data[0]==PARAM_BPS_MASK_ON)
;;;4936   		{
;;;4937   		for(i=0;i<=NUMIST;i++)
;;;4938   			{
;;;4939   			if(mess_data[1]&(1<<i)) bps[i]._flags_tu=0;
;;;4940   	     	}
;;;4941   		}
;;;4942   */										
;;;4943   	}
;;;4944   
;;;4945   
;;;4946   else if(b1Hz_sh)
00330e  7cf0              LDRB     r0,[r6,#0x13]  ; b1Hz_sh
003310  b3f0              CBZ      r0,|L1.13200|
;;;4947   	{
;;;4948   	ptr__=0;
003312  f04f0400          MOV      r4,#0
;;;4949        for(i=0;i<=NUMIST;i++)
003316  4621              MOV      r1,r4
003318  f9bb0000          LDRSH    r0,[r11,#0]           ;4899
00331c  e00a              B        |L1.13108|
                  |L1.13086|
;;;4950   		{
;;;4951   	     bps[i]._flags_tu=1;
00331e  ebc102c1          RSB      r2,r1,r1,LSL #3
003322  eb021201          ADD      r2,r2,r1,LSL #4
003326  eb080282          ADD      r2,r8,r2,LSL #2
00332a  f882a02c          STRB     r10,[r2,#0x2c]
00332e  f1010101          ADD      r1,r1,#1              ;4949
003332  b2c9              UXTB     r1,r1                 ;4949
                  |L1.13108|
003334  4281              CMP      r1,r0                 ;4949
003336  ddf2              BLE      |L1.13086|
;;;4952   	     }	
;;;4953     	     
;;;4954     	for(i=0;(i<NUMIST)&&(ptr__<num_necc);i++)
003338  f04f0100          MOV      r1,#0
00333c  e022              B        |L1.13188|
                  |L1.13118|
;;;4955     		{
;;;4956   		char ii,iii;
;;;4957   
;;;4958   		ii=(char)NUMIST;
00333e  b2c2              UXTB     r2,r0
;;;4959   		//if(ii<0)ii=0;
;;;4960   		if(ii>32)ii=32;
003340  2a20              CMP      r2,#0x20
003342  d901              BLS      |L1.13128|
003344  f04f0220          MOV      r2,#0x20
                  |L1.13128|
;;;4961   		iii=numOfForvardBps;
003348  7e73              LDRB     r3,[r6,#0x19]  ; numOfForvardBps
;;;4962   		//if(iii<0)iii=0;
;;;4963   		if(iii>=NUMIST)iii=0;
00334a  4283              CMP      r3,r0
00334c  db01              BLT      |L1.13138|
00334e  f04f0300          MOV      r3,#0
                  |L1.13138|
;;;4964   		iii+=i;
003352  440b              ADD      r3,r3,r1
003354  b2db              UXTB     r3,r3
;;;4965   		iii=iii%ii;
003356  fbb3f5f2          UDIV     r5,r3,r2
00335a  fb023215          MLS      r2,r2,r5,r3
;;;4966   		
;;;4967     	     if((bps[iii]._state==bsRDY)||(bps[iii]._state==bsWRK))
00335e  ebc203c2          RSB      r3,r2,r2,LSL #3
003362  eb031202          ADD      r2,r3,r2,LSL #4
003366  eb080282          ADD      r2,r8,r2,LSL #2
00336a  7893              LDRB     r3,[r2,#2]
00336c  2b02              CMP      r3,#2
00336e  d001              BEQ      |L1.13172|
003370  2b01              CMP      r3,#1
003372  d104              BNE      |L1.13182|
                  |L1.13172|
;;;4968     	         	{
;;;4969     	         	bps[iii]._flags_tu=0;
003374  f882702c          STRB     r7,[r2,#0x2c]
;;;4970     	         	ptr__++;
003378  f1040401          ADD      r4,r4,#1
00337c  b2e4              UXTB     r4,r4
                  |L1.13182|
00337e  f1010101          ADD      r1,r1,#1              ;4954
003382  b2c9              UXTB     r1,r1                 ;4954
                  |L1.13188|
003384  4281              CMP      r1,r0                 ;4954
003386  da06              BGE      |L1.13206|
003388  4aa1              LDR      r2,|L1.13840|
00338a  f9b22000          LDRSH    r2,[r2,#0]            ;4954  ; num_necc
00338e  e000              B        |L1.13202|
                  |L1.13200|
003390  e048              B        |L1.13348|
                  |L1.13202|
003392  4294              CMP      r4,r2                 ;4954
003394  dbd3              BLT      |L1.13118|
                  |L1.13206|
;;;4971     	         	}
;;;4972   			
;;;4973     	     }
;;;4974   	bps[numOfForvardBps_old]._flags_tu=0;
003396  7eb1              LDRB     r1,[r6,#0x1a]  ; numOfForvardBps_old
003398  ebc102c1          RSB      r2,r1,r1,LSL #3
00339c  eb021101          ADD      r1,r2,r1,LSL #4
0033a0  eb080181          ADD      r1,r8,r1,LSL #2
0033a4  f881702c          STRB     r7,[r1,#0x2c]
;;;4975   
;;;4976   	if(main_1Hz_cnt<60)
0033a8  499a              LDR      r1,|L1.13844|
0033aa  f9b11000          LDRSH    r1,[r1,#0]  ; main_1Hz_cnt
0033ae  293c              CMP      r1,#0x3c
0033b0  da0f              BGE      |L1.13266|
;;;4977   		{
;;;4978        	for(i=0;i<=NUMIST;i++)
0033b2  f04f0100          MOV      r1,#0
0033b6  e00a              B        |L1.13262|
                  |L1.13240|
;;;4979   			{
;;;4980   	     	bps[i]._flags_tu=0;
0033b8  ebc102c1          RSB      r2,r1,r1,LSL #3
0033bc  eb021201          ADD      r2,r2,r1,LSL #4
0033c0  eb080282          ADD      r2,r8,r2,LSL #2
0033c4  f882702c          STRB     r7,[r2,#0x2c]
0033c8  f1010101          ADD      r1,r1,#1              ;4978
0033cc  b2c9              UXTB     r1,r1                 ;4978
                  |L1.13262|
0033ce  4281              CMP      r1,r0                 ;4978
0033d0  ddf2              BLE      |L1.13240|
                  |L1.13266|
;;;4981   	     	}	
;;;4982   		}
;;;4983   	if(ipsBlckStat)
0033d2  4991              LDR      r1,|L1.13848|
0033d4  8809              LDRH     r1,[r1,#0]  ; ipsBlckStat
0033d6  b179              CBZ      r1,|L1.13304|
;;;4984   		{
;;;4985        	for(i=0;i<=NUMIST;i++)
0033d8  f04f0100          MOV      r1,#0
0033dc  e00a              B        |L1.13300|
                  |L1.13278|
;;;4986   			{
;;;4987   	     	bps[i]._flags_tu=1;
0033de  ebc102c1          RSB      r2,r1,r1,LSL #3
0033e2  eb021201          ADD      r2,r2,r1,LSL #4
0033e6  eb080282          ADD      r2,r8,r2,LSL #2
0033ea  f882a02c          STRB     r10,[r2,#0x2c]
0033ee  f1010101          ADD      r1,r1,#1              ;4985
0033f2  b2c9              UXTB     r1,r1                 ;4985
                  |L1.13300|
0033f4  4281              CMP      r1,r0                 ;4985
0033f6  ddf2              BLE      |L1.13278|
                  |L1.13304|
;;;4988   	     	}
;;;4989   		}
;;;4990   
;;;4991        for(i=0;i<=NUMIST;i++)
0033f8  f04f0100          MOV      r1,#0
;;;4992   		{
;;;4993   	    if(bps[i]._flags_tu==1) 	bps[i]._x_=-50;
0033fc  f06f0331          MVN      r3,#0x31
003400  e00e              B        |L1.13344|
                  |L1.13314|
003402  ebc102c1          RSB      r2,r1,r1,LSL #3
003406  eb021201          ADD      r2,r2,r1,LSL #4
00340a  eb080282          ADD      r2,r8,r2,LSL #2
00340e  f892402c          LDRB     r4,[r2,#0x2c]
003412  2c01              CMP      r4,#1
003414  d101              BNE      |L1.13338|
003416  f8a23050          STRH     r3,[r2,#0x50]
                  |L1.13338|
00341a  f1010101          ADD      r1,r1,#1              ;4991
00341e  b2c9              UXTB     r1,r1                 ;4991
                  |L1.13344|
003420  4281              CMP      r1,r0                 ;4991
003422  ddee              BLE      |L1.13314|
                  |L1.13348|
;;;4994   	   	}	
;;;4995   		 
;;;4996     	}
;;;4997   
;;;4998   
;;;4999   for(i=0;i<NUMIST;i++)
003424  f04f0000          MOV      r0,#0
;;;5000        {
;;;5001        if(bps[i]._ist_blok_host_cnt!=0)
;;;5002             {
;;;5003             bps[i]._flags_tu=99;
003428  f04f0463          MOV      r4,#0x63
00342c  f9bb1000          LDRSH    r1,[r11,#0]           ;4899
003430  e00f              B        |L1.13394|
                  |L1.13362|
003432  ebc002c0          RSB      r2,r0,r0,LSL #3       ;5001
003436  eb021200          ADD      r2,r2,r0,LSL #4       ;5001
00343a  eb080282          ADD      r2,r8,r2,LSL #2       ;5001
00343e  6bd3              LDR      r3,[r2,#0x3c]         ;5001
003440  b123              CBZ      r3,|L1.13388|
003442  f882402c          STRB     r4,[r2,#0x2c]
;;;5004   	     bps[i]._ist_blok_host_cnt--;
003446  f1a30301          SUB      r3,r3,#1
00344a  63d3              STR      r3,[r2,#0x3c]
                  |L1.13388|
00344c  f1000001          ADD      r0,r0,#1              ;4999
003450  b2c0              UXTB     r0,r0                 ;4999
                  |L1.13394|
003452  4288              CMP      r0,r1                 ;4999
003454  dbed              BLT      |L1.13362|
;;;5005             }
;;;5006        }
;;;5007   
;;;5008   
;;;5009   
;;;5010   
;;;5011   b1Hz_sh=0;
003456  74f7              STRB     r7,[r6,#0x13]
;;;5012   
;;;5013   
;;;5014   num_of_wrks_bps=0;
003458  73f7              STRB     r7,[r6,#0xf]
;;;5015   tempUS=0;
00345a  f04f0200          MOV      r2,#0
;;;5016   for(i=0;i<NUMIST;i++)
00345e  4610              MOV      r0,r2
003460  e013              B        |L1.13450|
                  |L1.13410|
;;;5017   	{
;;;5018   	if(bps[i]._state==bsWRK)
003462  ebc003c0          RSB      r3,r0,r0,LSL #3
003466  eb031300          ADD      r3,r3,r0,LSL #4
00346a  eb080383          ADD      r3,r8,r3,LSL #2
00346e  789c              LDRB     r4,[r3,#2]
003470  2c01              CMP      r4,#1
003472  d107              BNE      |L1.13444|
;;;5019   		{
;;;5020   		num_of_wrks_bps++;
003474  7bf4              LDRB     r4,[r6,#0xf]  ; num_of_wrks_bps
003476  f1040401          ADD      r4,r4,#1
00347a  73f4              STRB     r4,[r6,#0xf]
;;;5021   		if(bps[i]._Uii>tempUS)tempUS=bps[i]._Uii;
00347c  69db              LDR      r3,[r3,#0x1c]
00347e  4293              CMP      r3,r2
003480  dd00              BLE      |L1.13444|
003482  b29a              UXTH     r2,r3
                  |L1.13444|
003484  f1000001          ADD      r0,r0,#1              ;5016
003488  b2c0              UXTB     r0,r0                 ;5016
                  |L1.13450|
00348a  4288              CMP      r0,r1                 ;5016
00348c  dbe9              BLT      |L1.13410|
;;;5022   		}
;;;5023   	}
;;;5024   Ubpsmax=tempUS;
00348e  f8a62042          STRH     r2,[r6,#0x42]
;;;5025   
;;;5026   bPARALLEL_ENOUG=0;
003492  7777              STRB     r7,[r6,#0x1d]
;;;5027   bPARALLEL_NOT_ENOUG=1;
003494  f886a01c          STRB     r10,[r6,#0x1c]
;;;5028   
;;;5029   for(i=0;i<NUMIST;i++)
003498  f04f0000          MOV      r0,#0
;;;5030   	{
;;;5031   	if(bps[i]._Ti>=TSIGN)
00349c  4a5f              LDR      r2,|L1.13852|
00349e  f9b23000          LDRSH    r3,[r2,#0]
;;;5032   		{
;;;5033   		bPARALLEL_ENOUG=1;
;;;5034   		}
;;;5035   	if(bps[i]._Ti>=(TSIGN-5))
0034a2  f1a30405          SUB      r4,r3,#5
0034a6  e010              B        |L1.13514|
                  |L1.13480|
0034a8  ebc002c0          RSB      r2,r0,r0,LSL #3       ;5031
0034ac  eb021200          ADD      r2,r2,r0,LSL #4       ;5031
0034b0  eb080282          ADD      r2,r8,r2,LSL #2       ;5031
0034b4  6a92              LDR      r2,[r2,#0x28]         ;5031
0034b6  429a              CMP      r2,r3                 ;5031
0034b8  db01              BLT      |L1.13502|
0034ba  f886a01d          STRB     r10,[r6,#0x1d]        ;5033
                  |L1.13502|
0034be  42a2              CMP      r2,r4
0034c0  db00              BLT      |L1.13508|
;;;5036   		{
;;;5037   		bPARALLEL_NOT_ENOUG=0;
0034c2  7737              STRB     r7,[r6,#0x1c]
                  |L1.13508|
0034c4  f1000001          ADD      r0,r0,#1              ;5029
0034c8  b2c0              UXTB     r0,r0                 ;5029
                  |L1.13514|
0034ca  4288              CMP      r0,r1                 ;5029
0034cc  dbec              BLT      |L1.13480|
;;;5038   		}
;;;5039   	}
;;;5040   
;;;5041   if(bPARALLEL_ENOUG==1)
0034ce  7f70              LDRB     r0,[r6,#0x1d]  ; bPARALLEL_ENOUG
0034d0  2801              CMP      r0,#1
0034d2  d007              BEQ      |L1.13540|
;;;5042   	{
;;;5043   	bPARALLEL=1;
;;;5044   	}
;;;5045   else if(bPARALLEL && bPARALLEL_NOT_ENOUG)
0034d4  7fb0              LDRB     r0,[r6,#0x1e]  ; bPARALLEL
0034d6  2800              CMP      r0,#0
0034d8  d003              BEQ      |L1.13538|
0034da  7f30              LDRB     r0,[r6,#0x1c]  ; bPARALLEL_NOT_ENOUG
0034dc  2800              CMP      r0,#0
0034de  d000              BEQ      |L1.13538|
;;;5046   	{
;;;5047   	bPARALLEL=0;
0034e0  77b7              STRB     r7,[r6,#0x1e]
                  |L1.13538|
;;;5048   	}
;;;5049   }
0034e2  e674              B        |L1.12750|
                  |L1.13540|
0034e4  f886a01e          STRB     r10,[r6,#0x1e]        ;5043
0034e8  e671              B        |L1.12750|
;;;5050   
                          ENDP

                  powerAntiAliasingHndl PROC
;;;5057   //-----------------------------------------------
;;;5058   void powerAntiAliasingHndl(void)
0034ea  b570              PUSH     {r4-r6,lr}
;;;5059   {
;;;5060   if((power_summary_tempo/10UL)==(power_summary_tempo_old/10UL))
0034ec  230a              MOVS     r3,#0xa
0034ee  4c4d              LDR      r4,|L1.13860|
0034f0  484b              LDR      r0,|L1.13856|
;;;5061   	{
;;;5062   	if(powerSummaryCnt<15)powerSummaryCnt++;
;;;5063   	if(powerSummaryCnt>=10)
;;;5064   		{
;;;5065   		power_summary=power_summary_tempo;
;;;5066   		}
;;;5067   	}
;;;5068   else powerSummaryCnt=0;
0034f2  2500              MOVS     r5,#0
0034f4  6822              LDR      r2,[r4,#0]            ;5060  ; power_summary_tempo_old
0034f6  6800              LDR      r0,[r0,#0]            ;5060  ; power_summary_tempo
0034f8  fbb2f6f3          UDIV     r6,r2,r3              ;5060
0034fc  fbb0f1f3          UDIV     r1,r0,r3              ;5060
003500  4a49              LDR      r2,|L1.13864|
003502  42b1              CMP      r1,r6                 ;5060
003504  d10b              BNE      |L1.13598|
003506  7811              LDRB     r1,[r2,#0]            ;5062  ; powerSummaryCnt
003508  290f              CMP      r1,#0xf               ;5062
00350a  d202              BCS      |L1.13586|
00350c  f1010101          ADD      r1,r1,#1              ;5062
003510  7011              STRB     r1,[r2,#0]            ;5062
                  |L1.13586|
003512  7811              LDRB     r1,[r2,#0]            ;5063  ; powerSummaryCnt
003514  290a              CMP      r1,#0xa               ;5063
003516  d303              BCC      |L1.13600|
003518  4944              LDR      r1,|L1.13868|
00351a  6008              STR      r0,[r1,#0]            ;5065  ; power_summary
00351c  e000              B        |L1.13600|
                  |L1.13598|
00351e  7015              STRB     r5,[r2,#0]
                  |L1.13600|
;;;5069   power_summary_tempo_old=power_summary_tempo;
003520  6020              STR      r0,[r4,#0]  ; power_summary_tempo_old
;;;5070   
;;;5071   if((power_current_tempo/10UL)==(power_current_tempo_old/10UL))
003522  4843              LDR      r0,|L1.13872|
003524  4c43              LDR      r4,|L1.13876|
003526  f9b00000          LDRSH    r0,[r0,#0]  ; power_current_tempo
00352a  f9b42000          LDRSH    r2,[r4,#0]  ; power_current_tempo_old
00352e  fbb0f1f3          UDIV     r1,r0,r3
003532  fbb2f3f3          UDIV     r3,r2,r3
;;;5072   	{
;;;5073   	if(powerCurrentCnt<15)powerCurrentCnt++;
003536  4a40              LDR      r2,|L1.13880|
003538  4299              CMP      r1,r3                 ;5071
00353a  d10b              BNE      |L1.13652|
00353c  7811              LDRB     r1,[r2,#0]  ; powerCurrentCnt
00353e  290f              CMP      r1,#0xf
003540  d202              BCS      |L1.13640|
003542  f1010101          ADD      r1,r1,#1
003546  7011              STRB     r1,[r2,#0]
                  |L1.13640|
;;;5074   	if(powerCurrentCnt>=10)
003548  7811              LDRB     r1,[r2,#0]  ; powerCurrentCnt
00354a  290a              CMP      r1,#0xa
00354c  d303              BCC      |L1.13654|
;;;5075   		{
;;;5076   		power_current=power_current_tempo;
00354e  493b              LDR      r1,|L1.13884|
003550  8008              STRH     r0,[r1,#0]
003552  e000              B        |L1.13654|
                  |L1.13652|
;;;5077   		}
;;;5078   	}
;;;5079   else powerCurrentCnt=0;
003554  7015              STRB     r5,[r2,#0]
                  |L1.13654|
;;;5080   power_current_tempo_old=power_current_tempo;
003556  8020              STRH     r0,[r4,#0]
;;;5081   }
003558  bd70              POP      {r4-r6,pc}
;;;5082   
                          ENDP

                  energometr_hndl PROC
;;;5192   //-----------------------------------------------
;;;5193   void energometr_hndl(void)
00355a  4770              BX       lr
;;;5194   {
;;;5195   //2F 3F 21 0D 0A 
;;;5196   //05 33 0A 2F 45 4B 54 35 43 45 31 30 32 4D 76 30 31 0D 0A 
;;;5197   //2F 3F 21 0D 0A 
;;;5198   //05 33 0A 2F 45 4B 54 35 43 45 31 30 32 4D 76 30 31 0D 0A 
;;;5199   //06 30 35 31 0D 0A 
;;;5200   //06 33 0A 01 50 30 02 28 31 31 38 36 35 32 39 32 32 29 03 2A 
;;;5201   
;;;5202   #ifdef CE102M_ENABLED
;;;5203   /*if
;;;5204   uart_out1 (5,0xaf,0x3f,0x21,0x8d,0x0a,0);*/
;;;5205   
;;;5206   if(read_power_cnt_main_cnt)
;;;5207   	{
;;;5208   	read_power_cnt_main_cnt--;
;;;5209   	if(read_power_cnt_main_cnt==0)
;;;5210   		{
;;;5211   		rx_read_power_cnt_phase=0;
;;;5212   		if(bENERGOMETR_UIP==0)bENERGOMETR_UIP=1;
;;;5213   		else if(bENERGOMETR_UIP==1)bENERGOMETR_UIP=2;
;;;5214   		else bENERGOMETR_UIP=0;
;;;5215   		//bENERGOMETR_UIP=2;
;;;5216   		}
;;;5217   	}
;;;5218   
;;;5219   if (rx_read_power_cnt_phase==0)
;;;5220   	{
;;;5221   	char command_with_crc[20];
;;;5222   	
;;;5223      	command_with_crc[0]=0xaf;  // /
;;;5224   	command_with_crc[1]=0x3f;  // ?
;;;5225   	command_with_crc[2]=0x21;  // !
;;;5226   	command_with_crc[3]=0x8d;  // CR
;;;5227   	command_with_crc[4]=0x0a;  // LF
;;;5228   
;;;5229   	uart_out__adr1(command_with_crc,5);
;;;5230   
;;;5231   	rx_wr_index1=0;
;;;5232   	rx_read_power_cnt_phase=1;
;;;5233   
;;;5234   	read_power_cnt_main_cnt=50;
;;;5235   	}
;;;5236   if ((rx_read_power_cnt_phase==2)&&(!ce102m_delayCnt))
;;;5237   	{
;;;5238   	char command_with_crc[20];
;;;5239   	
;;;5240   	command_with_crc[0]=0x06;  //  
;;;5241   	command_with_crc[1]=0x30;  // 0
;;;5242   	command_with_crc[2]=0x35;  // 5
;;;5243   	command_with_crc[3]=0xb1;  // 1
;;;5244   	command_with_crc[4]=0x8d;  // CR
;;;5245   	command_with_crc[5]=0x0a;  // LF
;;;5246   	
;;;5247   	uart_out__adr1(command_with_crc,6);
;;;5248   	
;;;5249   	rx_wr_index1=0;
;;;5250   	rx_read_power_cnt_phase=3;
;;;5251   
;;;5252   	read_power_cnt_main_cnt=50;
;;;5253   	}  
;;;5254   
;;;5255   if ((rx_read_power_cnt_phase==4)&&(!ce102m_delayCnt))
;;;5256   	{
;;;5257   	char command_with_crc[20];
;;;5258   	
;;;5259   	command_with_crc[0]=0x81;  //  
;;;5260   	command_with_crc[1]=0xd2;  // 0
;;;5261   	command_with_crc[2]=0xb1;  // 5
;;;5262   	command_with_crc[3]=0x82;  // 1
;;;5263   	command_with_crc[4]=0x56;  // CR
;;;5264   	command_with_crc[5]=0xcf;  // LF
;;;5265   	command_with_crc[6]=0xcc;  // 1
;;;5266   	command_with_crc[7]=0xd4;  // CR
;;;5267   	command_with_crc[8]=0x41;  // LF
;;;5268   	command_with_crc[9]=0x28;  // 1
;;;5269   	command_with_crc[10]=0xa9;  // CR
;;;5270   	command_with_crc[11]=0x03;  // LF
;;;5271   	command_with_crc[12]=0x5f;  // LF
;;;5272   		
;;;5273   	uart_out__adr1(command_with_crc,13);
;;;5274   	
;;;5275   	rx_wr_index1=0;
;;;5276   	rx_read_power_cnt_phase=5;
;;;5277   
;;;5278   	read_power_cnt_main_cnt=50;
;;;5279   	}  
;;;5280   
;;;5281   if ((rx_read_power_cnt_phase==8)&&(!ce102m_delayCnt))
;;;5282   	{
;;;5283   	char command_with_crc[20];
;;;5284   	
;;;5285   	command_with_crc[0]=0x81;  //  
;;;5286   	command_with_crc[1]=0xd2;  // 0
;;;5287   	command_with_crc[2]=0xb1;  // 5
;;;5288   	command_with_crc[3]=0x82;  // 1
;;;5289   	command_with_crc[4]=0xc3;  // CR
;;;5290   	command_with_crc[5]=0x55;  // LF
;;;5291   	command_with_crc[6]=0xd2;  // 1
;;;5292   	command_with_crc[7]=0xd2;  // CR
;;;5293   	command_with_crc[8]=0xc5;  // LF
;;;5294   	command_with_crc[9]=0x28;  // 1
;;;5295   	command_with_crc[10]=0xa9;  // CR
;;;5296   	command_with_crc[11]=0x03;  // LF
;;;5297   	command_with_crc[12]=0x5a;  // LF
;;;5298   		
;;;5299   	uart_out__adr1(command_with_crc,13);
;;;5300   	
;;;5301   	rx_wr_index1=0;
;;;5302   	rx_read_power_cnt_phase=9;
;;;5303   
;;;5304   	read_power_cnt_main_cnt=50;
;;;5305   	}  
;;;5306   
;;;5307   if ((rx_read_power_cnt_phase==20)&&(!ce102m_delayCnt))
;;;5308   	{
;;;5309   	char command_with_crc[20];
;;;5310   	
;;;5311   	command_with_crc[0]=0x81;  //  		01
;;;5312   	command_with_crc[1]=0xd2;  // R		52
;;;5313   	command_with_crc[2]=0xb1;  // 1		31
;;;5314   	command_with_crc[3]=0x82;  // 		02
;;;5315   	command_with_crc[4]=0x50;  // P		50
;;;5316   	command_with_crc[5]=0xcf;  // O	  	4f
;;;5317   	command_with_crc[6]=0xd7;  // W		57
;;;5318   	command_with_crc[7]=0xc5;  // E		45
;;;5319   	command_with_crc[8]=0x50;  // P		50
;;;5320   	command_with_crc[9]=0x28;  // (		28
;;;5321   	command_with_crc[10]=0xa9;  // )	29
;;;5322   	command_with_crc[11]=0x03;  // 		03
;;;5323   	command_with_crc[12]=0xe4;  // d	64
;;;5324   		
;;;5325   	uart_out__adr1(command_with_crc,13);
;;;5326   	
;;;5327   	rx_wr_index1=0;
;;;5328   	rx_read_power_cnt_phase=21;
;;;5329   
;;;5330   	read_power_cnt_main_cnt=50;
;;;5331   	}  
;;;5332   
;;;5333   
;;;5334   #endif
;;;5335   }
;;;5336   
                          ENDP

                  ips_current_average_hndl PROC
;;;5337   //-----------------------------------------------
;;;5338   void ips_current_average_hndl(void)
00355c  e92d4ff0          PUSH     {r4-r11,lr}
;;;5339   {
003560  b089              SUB      sp,sp,#0x24
;;;5340   
;;;5341   if(++ica_timer_cnt>=10) 
003562  4e37              LDR      r6,|L1.13888|
;;;5342   	{
;;;5343   	ica_timer_cnt=0;
003564  2400              MOVS     r4,#0
003566  7830              LDRB     r0,[r6,#0]            ;5341  ; ica_timer_cnt
003568  1c40              ADDS     r0,r0,#1              ;5341
00356a  b2c0              UXTB     r0,r0                 ;5341
00356c  7030              STRB     r0,[r6,#0]            ;5341
00356e  280a              CMP      r0,#0xa               ;5341
003570  d300              BCC      |L1.13684|
003572  7034              STRB     r4,[r6,#0]
                  |L1.13684|
;;;5344   	}
;;;5345   
;;;5346   if((ica_timer_cnt==0) && (num_of_wrks_bps)&&((spc_stat==spcOFF)&&(vz1_stat==vz1sOFF)&&(vz2_stat==vz2sOFF)&&(sp_ch_stat==scsOFF)))
003574  7830              LDRB     r0,[r6,#0]  ; ica_timer_cnt
003576  4f33              LDR      r7,|L1.13892|
;;;5347   	{
;;;5348   	
;;;5349   	ica_plazma[0]++;
;;;5350   
;;;5351   	ica_my_current=bps_I;
;;;5352   
;;;5353   	if((ica_my_current>ica_your_current)&&((ica_my_current-ica_your_current)>=5)&&((ICA_EN==1)||((ICA_EN==2)&&(ica_cntrl_hndl_cnt>5))))
003578  f8dfb0cc          LDR      r11,|L1.13896|
00357c  4d20              LDR      r5,|L1.13824|
00357e  bbf0              CBNZ     r0,|L1.13822|
003580  7be8              LDRB     r0,[r5,#0xf]          ;5346  ; num_of_wrks_bps
003582  b3e0              CBZ      r0,|L1.13822|
003584  7d28              LDRB     r0,[r5,#0x14]         ;5346  ; spc_stat
003586  f8951020          LDRB     r1,[r5,#0x20]         ;5346  ; vz1_stat
00358a  4308              ORRS     r0,r0,r1              ;5346
00358c  f8951023          LDRB     r1,[r5,#0x23]         ;5346  ; vz2_stat
003590  4308              ORRS     r0,r0,r1              ;5346
003592  7839              LDRB     r1,[r7,#0]            ;5346  ; sp_ch_stat
003594  4308              ORRS     r0,r0,r1              ;5346
003596  d17e              BNE      |L1.13974|
003598  f8df90b0          LDR      r9,|L1.13900|
00359c  f8990000          LDRB     r0,[r9,#0]            ;5349  ; ica_plazma
0035a0  f1000001          ADD      r0,r0,#1              ;5349
0035a4  f8890000          STRB     r0,[r9,#0]            ;5349
0035a8  4829              LDR      r0,|L1.13904|
0035aa  f9b01000          LDRSH    r1,[r0,#0]            ;5351  ; bps_I
0035ae  4829              LDR      r0,|L1.13908|
0035b0  8001              STRH     r1,[r0,#0]            ;5351
0035b2  4829              LDR      r0,|L1.13912|
;;;5354   		{
;;;5355   		ica_plazma[1]++;
;;;5356   		ica_u_necc--;
0035b4  f8dfa0a4          LDR      r10,|L1.13916|
0035b8  f9b02000          LDRSH    r2,[r0,#0]            ;5353  ; ica_your_current
0035bc  4648              MOV      r0,r9                 ;5349
0035be  f9bac000          LDRSH    r12,[r10,#0]
0035c2  7843              LDRB     r3,[r0,#1]            ;5355
0035c4  4826              LDR      r0,|L1.13920|
0035c6  4291              CMP      r1,r2                 ;5353
0035c8  f9b08000          LDRSH    r8,[r0,#0]            ;5353
0035cc  4658              MOV      r0,r11                ;5353
0035ce  f9b00000          LDRSH    r0,[r0,#0]            ;5353
0035d2  dd47              BLE      |L1.13924|
0035d4  eba10e02          SUB      lr,r1,r2              ;5353
0035d8  f1be0f05          CMP      lr,#5                 ;5353
0035dc  db42              BLT      |L1.13924|
0035de  2801              CMP      r0,#1                 ;5353
0035e0  d004              BEQ      |L1.13804|
0035e2  2802              CMP      r0,#2                 ;5353
0035e4  d13e              BNE      |L1.13924|
0035e6  f1b80f05          CMP      r8,#5                 ;5353
0035ea  dd3b              BLE      |L1.13924|
                  |L1.13804|
0035ec  f1030301          ADD      r3,r3,#1              ;5355
0035f0  f8893001          STRB     r3,[r9,#1]            ;5355
0035f4  f1ac0c01          SUB      r12,r12,#1
0035f8  f8aac000          STRH     r12,[r10,#0]
0035fc  e046              B        |L1.13964|
                  |L1.13822|
0035fe  e04a              B        |L1.13974|
                  |L1.13824|
                          DCD      ||area_number.23||
                  |L1.13828|
                          DCD      bps
                  |L1.13832|
                          DCD      NUMIST
                  |L1.13836|
                          DCD      mess_data
                  |L1.13840|
                          DCD      num_necc
                  |L1.13844|
                          DCD      main_1Hz_cnt
                  |L1.13848|
                          DCD      ipsBlckStat
                  |L1.13852|
                          DCD      TSIGN
                  |L1.13856|
                          DCD      power_summary_tempo
                  |L1.13860|
                          DCD      power_summary_tempo_old
                  |L1.13864|
                          DCD      powerSummaryCnt
                  |L1.13868|
                          DCD      power_summary
                  |L1.13872|
                          DCD      power_current_tempo
                  |L1.13876|
                          DCD      power_current_tempo_old
                  |L1.13880|
                          DCD      powerCurrentCnt
                  |L1.13884|
                          DCD      power_current
                  |L1.13888|
                          DCD      ica_timer_cnt
                  |L1.13892|
                          DCD      sp_ch_stat
                  |L1.13896|
                          DCD      ICA_EN
                  |L1.13900|
                          DCD      ica_plazma
                  |L1.13904|
                          DCD      bps_I
                  |L1.13908|
                          DCD      ica_my_current
                  |L1.13912|
                          DCD      ica_your_current
                  |L1.13916|
                          DCD      ica_u_necc
                  |L1.13920|
                          DCD      ica_cntrl_hndl_cnt
                  |L1.13924|
;;;5357   		}
;;;5358   	else if((ica_my_current<ica_your_current)&&((ica_your_current-ica_my_current)>=5)&&((ICA_EN==1)||((ICA_EN==2)&&(ica_cntrl_hndl_cnt>5))))
003664  4291              CMP      r1,r2
003666  da11              BGE      |L1.13964|
003668  1a51              SUBS     r1,r2,r1
00366a  2905              CMP      r1,#5
00366c  db0e              BLT      |L1.13964|
00366e  2801              CMP      r0,#1
003670  d004              BEQ      |L1.13948|
003672  2802              CMP      r0,#2
003674  d10a              BNE      |L1.13964|
003676  f1b80f05          CMP      r8,#5
00367a  dd07              BLE      |L1.13964|
                  |L1.13948|
;;;5359   		{
;;;5360   		ica_plazma[1]--;
00367c  f1a30301          SUB      r3,r3,#1
003680  f8893001          STRB     r3,[r9,#1]
;;;5361   		ica_u_necc++;
003684  f10c0c01          ADD      r12,r12,#1
003688  f8aac000          STRH     r12,[r10,#0]
                  |L1.13964|
;;;5362   		}
;;;5363   	gran(&ica_u_necc,-100,100);
00368c  2264              MOVS     r2,#0x64
00368e  4251              RSBS     r1,r2,#0
003690  48ff              LDR      r0,|L1.14992|
003692  f7fffffe          BL       gran
                  |L1.13974|
;;;5364   	}
;;;5365   
;;;5366   
;;;5367   if((ICA_EN==1)&&((spc_stat==spcOFF)&&(vz1_stat==vz1sOFF)&&(vz2_stat==vz2sOFF)&&(sp_ch_stat==scsOFF)) /*&& (num_of_wrks_bps)*/)
003696  f8bb0000          LDRH     r0,[r11,#0]  ; ICA_EN
00369a  2801              CMP      r0,#1
00369c  d167              BNE      |L1.14190|
00369e  7d28              LDRB     r0,[r5,#0x14]  ; spc_stat
0036a0  f8951020          LDRB     r1,[r5,#0x20]  ; vz1_stat
0036a4  4308              ORRS     r0,r0,r1
0036a6  f8951023          LDRB     r1,[r5,#0x23]  ; vz2_stat
0036aa  4308              ORRS     r0,r0,r1
0036ac  7839              LDRB     r1,[r7,#0]  ; sp_ch_stat
0036ae  4308              ORRS     r0,r0,r1
0036b0  d15d              BNE      |L1.14190|
;;;5368   	{
;;;5369   	
;;;5370   	if(ica_timer_cnt==8)
0036b2  7830              LDRB     r0,[r6,#0]  ; ica_timer_cnt
;;;5371   		{
;;;5372   		char modbus_buff[20],i;
;;;5373   		short crc_temp;
;;;5374   	
;;;5375   		modbus_buff[0] = ICA_MODBUS_ADDRESS;
0036b4  4bf7              LDR      r3,|L1.14996|
;;;5376   		modbus_buff[1] = 4;
;;;5377   		modbus_buff[2] = 0;
;;;5378   		modbus_buff[3] = 2;
;;;5379   		modbus_buff[4] = 0;	
;;;5380   		modbus_buff[5] = 1;
;;;5381   	
;;;5382   		crc_temp= CRC16_2(modbus_buff,6);
;;;5383   	
;;;5384   		modbus_buff[6]= (char)crc_temp;
;;;5385   		modbus_buff[7]= (char)(crc_temp>>8);
;;;5386   	
;;;5387   		if(ICA_CH==0)
0036b6  4ff8              LDR      r7,|L1.15000|
0036b8  2808              CMP      r0,#8                 ;5370
0036ba  d05b              BEQ      |L1.14196|
;;;5388   			{
;;;5389   			for (i=0;i<8;i++)
;;;5390   				{
;;;5391   				putchar_sc16is700(modbus_buff[i]);
;;;5392   				}
;;;5393   			}
;;;5394   		else if(ICA_CH==2)
;;;5395   			{
;;;5396   			uart_out1 (5,4,0,2,0,1,0);
;;;5397   			}
;;;5398   		}
;;;5399   	else
;;;5400   		{
;;;5401   		char modbus_buff[20],i;
;;;5402   		short crc_temp, tempSSSS;
;;;5403   
;;;5404   		tempSSSS=cntrl_stat_old;
0036bc  f9b56028          LDRSH    r6,[r5,#0x28]  ; cntrl_stat_old
;;;5405   		if(	(main_kb_cnt==(TBAT*60)-21) || (main_kb_cnt==(TBAT*60)-20) || (main_kb_cnt==(TBAT*60)-19)) tempSSSS=((short)TBAT)|0x4000;
0036c0  48f6              LDR      r0,|L1.15004|
0036c2  f06f0214          MVN      r2,#0x14
0036c6  f9b00000          LDRSH    r0,[r0,#0]  ; TBAT
0036ca  ebc01100          RSB      r1,r0,r0,LSL #4
0036ce  eb020c81          ADD      r12,r2,r1,LSL #2
0036d2  f9b52046          LDRSH    r2,[r5,#0x46]  ; main_kb_cnt
0036d6  4594              CMP      r12,r2
0036d8  d00b              BEQ      |L1.14066|
0036da  f06f0c13          MVN      r12,#0x13
0036de  eb0c0c81          ADD      r12,r12,r1,LSL #2
0036e2  4594              CMP      r12,r2
0036e4  d005              BEQ      |L1.14066|
0036e6  f06f0c12          MVN      r12,#0x12
0036ea  eb0c0181          ADD      r1,r12,r1,LSL #2
0036ee  4291              CMP      r1,r2
0036f0  d101              BNE      |L1.14070|
                  |L1.14066|
0036f2  f4404680          ORR      r6,r0,#0x4000
                  |L1.14070|
;;;5406   
;;;5407   
;;;5408   		modbus_buff[0] = ICA_MODBUS_ADDRESS;
0036f6  8818              LDRH     r0,[r3,#0]  ; ICA_MODBUS_ADDRESS
0036f8  f88d0010          STRB     r0,[sp,#0x10]
;;;5409   		modbus_buff[1] = 6;
0036fc  f04f0006          MOV      r0,#6
003700  f88d0011          STRB     r0,[sp,#0x11]
;;;5410   		modbus_buff[2] = 0;
003704  f88d4012          STRB     r4,[sp,#0x12]
;;;5411   		modbus_buff[3] = 100;
003708  f04f0064          MOV      r0,#0x64
00370c  f88d0013          STRB     r0,[sp,#0x13]
;;;5412   		modbus_buff[4] = (char)(tempSSSS/256);	
003710  ea4f70e6          ASR      r0,r6,#31
003714  eb066010          ADD      r0,r6,r0,LSR #24
003718  ea4f2120          ASR      r1,r0,#8
00371c  f88d1014          STRB     r1,[sp,#0x14]
;;;5413   		modbus_buff[5] = (char)(tempSSSS%256);
003720  4630              MOV      r0,r6
003722  f88d0015          STRB     r0,[sp,#0x15]
;;;5414   	
;;;5415   		crc_temp= CRC16_2(modbus_buff,6);
003726  f04f0106          MOV      r1,#6
00372a  a804              ADD      r0,sp,#0x10
00372c  f7fffffe          BL       CRC16_2
;;;5416   	
;;;5417   		modbus_buff[6]= (char)crc_temp;
003730  f88d0016          STRB     r0,[sp,#0x16]
;;;5418   		modbus_buff[7]= (char)(crc_temp>>8);
003734  ea4f2020          ASR      r0,r0,#8
003738  f88d0017          STRB     r0,[sp,#0x17]
;;;5419   	
;;;5420   		crc_temp= CRC16_2(modbus_buff,6);
00373c  f04f0106          MOV      r1,#6
003740  a804              ADD      r0,sp,#0x10
003742  f7fffffe          BL       CRC16_2
;;;5421   	
;;;5422   		plazma_ica1=tempSSSS;
003746  f8a56076          STRH     r6,[r5,#0x76]
;;;5423   		if(ICA_CH==0)
00374a  f9b70000          LDRSH    r0,[r7,#0]  ; ICA_CH
00374e  b3f0              CBZ      r0,|L1.14286|
;;;5424   			{
;;;5425   			for (i=0;i<8;i++)
;;;5426   				{
;;;5427   				putchar_sc16is700(modbus_buff[i]);
;;;5428   				}
;;;5429   			}
;;;5430   		else if(ICA_CH==2)
003750  2802              CMP      r0,#2
003752  d10c              BNE      |L1.14190|
;;;5431   			{
;;;5432   			uart_out1 (5,6,0,100,modbus_buff[4],modbus_buff[5],0);
003754  f89d0015          LDRB     r0,[sp,#0x15]
003758  f89d1014          LDRB     r1,[sp,#0x14]
00375c  e9cd0401          STRD     r0,r4,[sp,#4]
003760  9100              STR      r1,[sp,#0]
003762  2364              MOVS     r3,#0x64
003764  2200              MOVS     r2,#0
003766  2106              MOVS     r1,#6
003768  2005              MOVS     r0,#5
00376a  f7fffffe          BL       uart_out1
                  |L1.14190|
;;;5433   			}
;;;5434   		}
;;;5435   	}
;;;5436   }
00376e  b009              ADD      sp,sp,#0x24
003770  e8bd8ff0          POP      {r4-r11,pc}
                  |L1.14196|
003774  8818              LDRH     r0,[r3,#0]            ;5375  ; ICA_MODBUS_ADDRESS
003776  f88d0010          STRB     r0,[sp,#0x10]         ;5375
00377a  f04f0004          MOV      r0,#4                 ;5376
00377e  f88d0011          STRB     r0,[sp,#0x11]         ;5376
003782  f88d4012          STRB     r4,[sp,#0x12]         ;5377
003786  f04f0002          MOV      r0,#2                 ;5378
00378a  f88d0013          STRB     r0,[sp,#0x13]         ;5378
00378e  f88d4014          STRB     r4,[sp,#0x14]         ;5379
003792  f04f0501          MOV      r5,#1                 ;5380
003796  f88d5015          STRB     r5,[sp,#0x15]         ;5380
00379a  f04f0106          MOV      r1,#6                 ;5382
00379e  a804              ADD      r0,sp,#0x10           ;5382
0037a0  f7fffffe          BL       CRC16_2
0037a4  f88d0016          STRB     r0,[sp,#0x16]         ;5384
0037a8  ea4f2020          ASR      r0,r0,#8              ;5385
0037ac  f88d0017          STRB     r0,[sp,#0x17]         ;5385
0037b0  f9b70000          LDRSH    r0,[r7,#0]            ;5387  ; ICA_CH
0037b4  b160              CBZ      r0,|L1.14288|
0037b6  2802              CMP      r0,#2                 ;5394
0037b8  d1d9              BNE      |L1.14190|
0037ba  e9cd4500          STRD     r4,r5,[sp,#0]         ;5396
0037be  2302              MOVS     r3,#2                 ;5396
0037c0  2200              MOVS     r2,#0                 ;5396
0037c2  2104              MOVS     r1,#4                 ;5396
0037c4  2005              MOVS     r0,#5                 ;5396
0037c6  9402              STR      r4,[sp,#8]            ;5396
0037c8  f7fffffe          BL       uart_out1
0037cc  e7cf              B        |L1.14190|
                  |L1.14286|
0037ce  e00b              B        |L1.14312|
                  |L1.14288|
0037d0  f04f0400          MOV      r4,#0                 ;5389
0037d4  ad04              ADD      r5,sp,#0x10           ;5372
                  |L1.14294|
0037d6  5d28              LDRB     r0,[r5,r4]            ;5391
0037d8  f7fffffe          BL       putchar_sc16is700
0037dc  f1040401          ADD      r4,r4,#1              ;5389
0037e0  b2e4              UXTB     r4,r4                 ;5389
0037e2  2c08              CMP      r4,#8                 ;5389
0037e4  d3f7              BCC      |L1.14294|
0037e6  e7c2              B        |L1.14190|
                  |L1.14312|
0037e8  f04f0400          MOV      r4,#0                 ;5425
0037ec  ad04              ADD      r5,sp,#0x10           ;5401
                  |L1.14318|
0037ee  5d28              LDRB     r0,[r5,r4]            ;5427
0037f0  f7fffffe          BL       putchar_sc16is700
0037f4  f1040401          ADD      r4,r4,#1              ;5425
0037f8  b2e4              UXTB     r4,r4                 ;5425
0037fa  2c08              CMP      r4,#8                 ;5425
0037fc  d3f7              BCC      |L1.14318|
0037fe  e7b6              B        |L1.14190|
;;;5437   
                          ENDP

                  ipsBlckHndl PROC
;;;5520   //-----------------------------------------------
;;;5521   void ipsBlckHndl(char in)
003800  b510              PUSH     {r4,lr}
;;;5522   {
;;;5523   
;;;5524   ipsBlckStat=0;
003802  4ba7              LDR      r3,|L1.15008|
003804  f04f0000          MOV      r0,#0
003808  8018              STRH     r0,[r3,#0]
;;;5525   if(ipsBlckSrc==1)
00380a  48a6              LDR      r0,|L1.15012|
00380c  f04f0401          MOV      r4,#1
;;;5526   	{
;;;5527   	if(((ipsBlckLog==0)&&(adc_buff_[11]>2000)) || ((ipsBlckLog==1)&&(adc_buff_[11]<2000))) ipsBlckStat=1;
003810  f44f62fa          MOV      r2,#0x7d0
003814  f9b01000          LDRSH    r1,[r0,#0]            ;5525  ; ipsBlckSrc
003818  48a3              LDR      r0,|L1.15016|
00381a  2901              CMP      r1,#1                 ;5525
00381c  f9b00000          LDRSH    r0,[r0,#0]
003820  d006              BEQ      |L1.14384|
;;;5528   	}
;;;5529   else if(ipsBlckSrc==2)
003822  2902              CMP      r1,#2
003824  d10f              BNE      |L1.14406|
003826  49a1              LDR      r1,|L1.15020|
;;;5530   	{
;;;5531   	if(((ipsBlckLog==0)&&(adc_buff_[13]>2000)) || ((ipsBlckLog==1)&&(adc_buff_[13]<2000))) ipsBlckStat=1;
003828  f9b1101a          LDRSH    r1,[r1,#0x1a]
00382c  b160              CBZ      r0,|L1.14408|
00382e  e00d              B        |L1.14412|
                  |L1.14384|
003830  499e              LDR      r1,|L1.15020|
003832  f9b11016          LDRSH    r1,[r1,#0x16]         ;5527
003836  b908              CBNZ     r0,|L1.14396|
003838  4291              CMP      r1,r2                 ;5527
00383a  dc03              BGT      |L1.14404|
                  |L1.14396|
00383c  2801              CMP      r0,#1                 ;5527
00383e  d102              BNE      |L1.14406|
003840  4291              CMP      r1,r2                 ;5527
003842  da00              BGE      |L1.14406|
                  |L1.14404|
003844  801c              STRH     r4,[r3,#0]            ;5527
                  |L1.14406|
;;;5532   	}
;;;5533   }
003846  bd10              POP      {r4,pc}
                  |L1.14408|
003848  4291              CMP      r1,r2                 ;5531
00384a  dc03              BGT      |L1.14420|
                  |L1.14412|
00384c  2801              CMP      r0,#1                 ;5531
00384e  d1fa              BNE      |L1.14406|
003850  4291              CMP      r1,r2                 ;5531
003852  daf8              BGE      |L1.14406|
                  |L1.14420|
003854  801c              STRH     r4,[r3,#0]            ;5531
003856  bd10              POP      {r4,pc}
;;;5534   
                          ENDP

                  bps_drv PROC
;;;5535   //-----------------------------------------------
;;;5536   void bps_drv(char in)
003858  e92d41f0          PUSH     {r4-r8,lr}
;;;5537   {
00385c  4606              MOV      r6,r0
;;;5538   char temp;
;;;5539   
;;;5540   if (bps[in]._device!=dSRC) return;
00385e  ebc600c6          RSB      r0,r6,r6,LSL #3
003862  4993              LDR      r1,|L1.15024|
003864  eb001006          ADD      r0,r0,r6,LSL #4
003868  f8112020          LDRB     r2,[r1,r0,LSL #2]
00386c  2a03              CMP      r2,#3
00386e  d177              BNE      |L1.14688|
;;;5541   temp=bps[in]._flags_tm;
003870  eb010480          ADD      r4,r1,r0,LSL #2
003874  f8945042          LDRB     r5,[r4,#0x42]
;;;5542   if(temp&(1<<AV_T))
003878  07a8              LSLS     r0,r5,#30
00387a  d517              BPL      |L1.14508|
;;;5543   	{
;;;5544   	if(bps[in]._temp_av_cnt<1200) 
00387c  f9b41046          LDRSH    r1,[r4,#0x46]
003880  f44f6096          MOV      r0,#0x4b0
003884  4281              CMP      r1,r0
003886  da22              BGE      |L1.14542|
;;;5545   		{
;;;5546   		bps[in]._temp_av_cnt++;
003888  f1010101          ADD      r1,r1,#1
00388c  b209              SXTH     r1,r1
00388e  f8a41046          STRH     r1,[r4,#0x46]
;;;5547   		if(bps[in]._temp_av_cnt>=1200)
003892  4281              CMP      r1,r0
003894  db1b              BLT      |L1.14542|
;;;5548   			{
;;;5549   			bps[in]._temp_av_cnt=1200;
003896  f8a40046          STRH     r0,[r4,#0x46]
;;;5550   		   	if(!(bps[in]._av&(1<<0)))avar_bps_hndl(in,0,1);
00389a  7860              LDRB     r0,[r4,#1]
00389c  07c0              LSLS     r0,r0,#31
00389e  d116              BNE      |L1.14542|
0038a0  2201              MOVS     r2,#1
0038a2  2100              MOVS     r1,#0
0038a4  4630              MOV      r0,r6
0038a6  f7fffffe          BL       avar_bps_hndl
0038aa  e010              B        |L1.14542|
                  |L1.14508|
;;;5551   			}
;;;5552   		}
;;;5553   	}
;;;5554   
;;;5555   else if(!(temp&(1<<AV_T)))
;;;5556   	{
;;;5557   	if(bps[in]._temp_av_cnt) 
0038ac  f9b41046          LDRSH    r1,[r4,#0x46]
0038b0  b169              CBZ      r1,|L1.14542|
;;;5558   		{
;;;5559   		bps[in]._temp_av_cnt--;
0038b2  f1a10101          SUB      r1,r1,#1
0038b6  b208              SXTH     r0,r1
0038b8  f8a40046          STRH     r0,[r4,#0x46]
;;;5560   		if(!bps[in]._temp_av_cnt)
0038bc  b938              CBNZ     r0,|L1.14542|
;;;5561   			{
;;;5562   			if(bps[in]._av&(1<<0))avar_bps_hndl(in,0,0);
0038be  7860              LDRB     r0,[r4,#1]
0038c0  07c0              LSLS     r0,r0,#31
0038c2  d004              BEQ      |L1.14542|
0038c4  2200              MOVS     r2,#0
0038c6  4611              MOV      r1,r2
0038c8  4630              MOV      r0,r6
0038ca  f7fffffe          BL       avar_bps_hndl
                  |L1.14542|
;;;5563   			}
;;;5564   		} 	
;;;5565   
;;;5566   	}
;;;5567   
;;;5568   if((temp&(1<<AVUMAX)))
0038ce  0729              LSLS     r1,r5,#28
;;;5569   	{
;;;5570   	if(bps[in]._umax_av_cnt<10) 
;;;5571   		{
;;;5572   		bps[in]._umax_av_cnt++;
;;;5573   		if(bps[in]._umax_av_cnt>=10)
;;;5574   			{ 
;;;5575   			bps[in]._umax_av_cnt=10;
0038d0  f04f070a          MOV      r7,#0xa
0038d4  f04f0000          MOV      r0,#0                 ;5550
0038d8  d515              BPL      |L1.14598|
0038da  f9b40048          LDRSH    r0,[r4,#0x48]         ;5570
0038de  280a              CMP      r0,#0xa               ;5570
0038e0  da26              BGE      |L1.14640|
0038e2  f1000001          ADD      r0,r0,#1              ;5572
0038e6  b200              SXTH     r0,r0                 ;5572
0038e8  f8a40048          STRH     r0,[r4,#0x48]         ;5572
0038ec  280a              CMP      r0,#0xa               ;5573
0038ee  db1f              BLT      |L1.14640|
0038f0  f8a47048          STRH     r7,[r4,#0x48]
;;;5576   			if(!(bps[in]._av&(1<<1)))avar_bps_hndl(in,1,1);
0038f4  7860              LDRB     r0,[r4,#1]
0038f6  0780              LSLS     r0,r0,#30
0038f8  d41a              BMI      |L1.14640|
0038fa  2201              MOVS     r2,#1
0038fc  4611              MOV      r1,r2
0038fe  4630              MOV      r0,r6
003900  f7fffffe          BL       avar_bps_hndl
003904  e014              B        |L1.14640|
                  |L1.14598|
;;;5577   		  	/*if((K[APV]!=ON)||((apv_cnt[in,0]==0)&&(apv_cnt[in,1]==0)&&(apv_cnt[in,2]==0)&&(apv_flags[in]==afOFF)))avar_s_hndl(in,1,1);
;;;5578   			if((apv_cnt[in,0]==0)&&(apv_cnt[in,1]==0)&&(apv_cnt[in,2]==0)&&(apv_flags[in]==afON))
;;;5579   				{
;;;5580   				apv_cnt[in,0]=APV_INIT;
;;;5581   				apv_cnt[in,1]=APV_INIT;
;;;5582   				apv_cnt[in,2]=APV_INIT;
;;;5583   				apv_flags[in]=afOFF;
;;;5584   				}				*/
;;;5585   						
;;;5586   			}
;;;5587   		} 
;;;5588   	}		
;;;5589   else if(!(temp&(1<<AVUMAX)))
;;;5590   	{
;;;5591   	if(bps[in]._umax_av_cnt>0) 
003906  f9b41048          LDRSH    r1,[r4,#0x48]
00390a  2900              CMP      r1,#0
00390c  dd0d              BLE      |L1.14634|
;;;5592   		{
;;;5593   		bps[in]._umax_av_cnt--;
00390e  f1a10101          SUB      r1,r1,#1
003912  b208              SXTH     r0,r1
003914  f8a40048          STRH     r0,[r4,#0x48]
;;;5594   		if(bps[in]._umax_av_cnt==0)
003918  b950              CBNZ     r0,|L1.14640|
;;;5595   			{
;;;5596   			bps[in]._umax_av_cnt=0;
;;;5597   			avar_bps_hndl(in,1,0);
00391a  f04f0200          MOV      r2,#0
00391e  f04f0101          MOV      r1,#1
003922  4630              MOV      r0,r6
003924  f7fffffe          BL       avar_bps_hndl
003928  e002              B        |L1.14640|
                  |L1.14634|
;;;5598   	 //		apv_cnt[in,0]=0;
;;;5599   	//		apv_cnt[in,1]=0;
;;;5600   	 //		apv_cnt[in,2]=0;			
;;;5601   			}
;;;5602   		}
;;;5603   	else if(bps[in]._umax_av_cnt<0) bps[in]._umax_av_cnt=0;		 
00392a  da01              BGE      |L1.14640|
00392c  f8a40048          STRH     r0,[r4,#0x48]
                  |L1.14640|
;;;5604   	}
;;;5605   
;;;5606   if(temp&(1<<AVUMIN))
003930  06e8              LSLS     r0,r5,#27
003932  d516              BPL      |L1.14690|
;;;5607   	{
;;;5608   	if(bps[in]._umin_av_cnt<10) 
003934  f9b4004a          LDRSH    r0,[r4,#0x4a]
003938  280a              CMP      r0,#0xa
00393a  da20              BGE      |L1.14718|
;;;5609   		{
;;;5610   		bps[in]._umin_av_cnt++;
00393c  f1000001          ADD      r0,r0,#1
003940  b200              SXTH     r0,r0
003942  f8a4004a          STRH     r0,[r4,#0x4a]
;;;5611   		if(bps[in]._umin_av_cnt>=10)
003946  280a              CMP      r0,#0xa
003948  db19              BLT      |L1.14718|
;;;5612   			{ 
;;;5613   			bps[in]._umin_av_cnt=10;
00394a  f8a4704a          STRH     r7,[r4,#0x4a]
;;;5614   			if(!(bps[in]._av&(1<<2)))avar_bps_hndl(in,2,1);
00394e  7860              LDRB     r0,[r4,#1]
003950  0740              LSLS     r0,r0,#29
003952  d414              BMI      |L1.14718|
003954  2201              MOVS     r2,#1
003956  2102              MOVS     r1,#2
003958  4630              MOV      r0,r6
00395a  f7fffffe          BL       avar_bps_hndl
00395e  e00e              B        |L1.14718|
                  |L1.14688|
003960  e046              B        |L1.14832|
                  |L1.14690|
;;;5615   		  	/*	if((K[APV]!=ON)||((apv_cnt[in,0]==0)&&(apv_cnt[in,1]==0)&&(apv_cnt[in,2]==0)&&(apv_flags[in]==afOFF)))avar_s_hndl(in,2,1);
;;;5616   			if((apv_cnt[in,0]==0)&&(apv_cnt[in,1]==0)&&(apv_cnt[in,2]==0)&&(apv_flags[in]==afON))
;;;5617   				{
;;;5618   				apv_cnt[in,0]=APV_INIT;
;;;5619   				apv_cnt[in,1]=APV_INIT;
;;;5620   				apv_cnt[in,2]=APV_INIT;
;;;5621   				apv_flags[in]=afOFF;
;;;5622   				}*/				
;;;5623   			}
;;;5624   		} 
;;;5625   	}	
;;;5626   	
;;;5627   else if(!(temp&(1<<AVUMIN)))
;;;5628   	{
;;;5629   	if(bps[in]._umin_av_cnt) 
003962  f9b4004a          LDRSH    r0,[r4,#0x4a]
003966  b150              CBZ      r0,|L1.14718|
;;;5630   		{
;;;5631   		bps[in]._umin_av_cnt--;
003968  f1a00001          SUB      r0,r0,#1
00396c  b201              SXTH     r1,r0
00396e  f8a4104a          STRH     r1,[r4,#0x4a]
;;;5632   		if(bps[in]._umin_av_cnt==0)
003972  b921              CBNZ     r1,|L1.14718|
;;;5633   			{
;;;5634   			bps[in]._umin_av_cnt=0;
;;;5635   			avar_bps_hndl(in,2,0);
003974  2200              MOVS     r2,#0
003976  2102              MOVS     r1,#2
003978  4630              MOV      r0,r6
00397a  f7fffffe          BL       avar_bps_hndl
                  |L1.14718|
;;;5636   		//	apv_cnt[in,0]=0;
;;;5637   		//	apv_cnt[in,1]=0;
;;;5638   		//	apv_cnt[in,2]=0;
;;;5639   			}
;;;5640   		}
;;;5641   	else if(bps[in]._umin_av_cnt>10)bps[in]._umin_av_cnt--;	 
;;;5642   	}
;;;5643   
;;;5644   //bps[in]._state=bsOFF;
;;;5645   
;;;5646   if (bps[in]._av&0x0f)					bps[in]._state=bsAV;
00397e  7860              LDRB     r0,[r4,#1]
003980  0700              LSLS     r0,r0,#28
003982  d003              BEQ      |L1.14732|
003984  f04f0004          MOV      r0,#4
003988  70a0              STRB     r0,[r4,#2]
00398a  e017              B        |L1.14780|
                  |L1.14732|
;;;5647   else if ( (net_av) && (bps[in]._cnt>20)/*&& 
00398c  4849              LDR      r0,|L1.15028|
00398e  7800              LDRB     r0,[r0,#0]  ; net_av
003990  b130              CBZ      r0,|L1.14752|
003992  78e0              LDRB     r0,[r4,#3]
003994  2814              CMP      r0,#0x14
003996  d903              BLS      |L1.14752|
;;;5648   		(bps[in]._Uii<200)*/)				bps[in]._state=bsOFF_AV_NET;
003998  f04f0005          MOV      r0,#5
00399c  70a0              STRB     r0,[r4,#2]
00399e  e00d              B        |L1.14780|
                  |L1.14752|
;;;5649   else if (bps[in]._flags_tm&BIN8(100000))	bps[in]._state=bsRDY;
0039a0  f8940042          LDRB     r0,[r4,#0x42]
0039a4  0680              LSLS     r0,r0,#26
0039a6  d503              BPL      |L1.14768|
0039a8  f04f0002          MOV      r0,#2
0039ac  70a0              STRB     r0,[r4,#2]
0039ae  e005              B        |L1.14780|
                  |L1.14768|
;;;5650   else if (bps[in]._cnt<20)				bps[in]._state=bsWRK;
0039b0  78e0              LDRB     r0,[r4,#3]
0039b2  2814              CMP      r0,#0x14
0039b4  d202              BCS      |L1.14780|
0039b6  f04f0001          MOV      r0,#1
0039ba  70a0              STRB     r0,[r4,#2]
                  |L1.14780|
;;;5651   
;;;5652   
;;;5653   
;;;5654   //else if(bps[in]._flags_tm&BIN8(100000)) bps[in]._state=ssBL;
;;;5655   //else if((!(bps[in]._flags_tm&BIN8(100000)))&&(net_U>100))bps[in]._state=ssWRK;
;;;5656   //else bps[0]._state=ssNOT;
;;;5657   
;;;5658   //bps[in]._is_ready=0;
;;;5659   //bps[in]._is_wrk=0;
;;;5660   //if(bps[in]._av_net) bps[in]._flags_bp='N';// ÌÂ ÔÓ‰ÍÎ˛˜ÂÌ
;;;5661   //else if(bps[in]._av_u_max) bps[in]._flags_bp='P';// Á‡‚˚¯ÂÌÓ Ì‡ÔˇÊÂÌËÂ(u_.av_.bAS1T)) bps_state[0]=ssAV;
;;;5662   //else if(bps[in]._av_u_min) bps[in]._flags_bp='M';// Á‡ÌËÊÂÌÓ Ì‡ÔˇÊÂÌËÂ
;;;5663   //else if(bps[in]._av_temper) bps[in]._flags_bp='T';// ÚÂÏÔÂ‡ÚÛ‡
;;;5664   //else if(bps[in]._flags_tm&BIN8(100000)) 
;;;5665   //	{
;;;5666   //	bps[in]._flags_bp='B';// Á‡·ÎÓÍËÓ‚‡Ì
;;;5667   //	bps[in]._is_ready=1;
;;;5668   //	}
;;;5669   //else if((!(bps[in]._flags_tm&BIN8(100000)))&&(net_U>100))
;;;5670   //     {
;;;5671   //     bps[in]._flags_bp='W';// ‡·ÓÚ‡ÂÚ
;;;5672   //     bps[in]._is_ready=1;
;;;5673   //     bps[in]._is_wrk=1;
;;;5674        
;;;5675   //     }
;;;5676   //else bps[in]._is_ready=1;     
;;;5677   
;;;5678   
;;;5679   
;;;5680   
;;;5681   
;;;5682   /*
;;;5683   bps[in]._flags_tu&=BIN8(11111110);
;;;5684   if(bps[in]._ist_blok_cnt)
;;;5685   	{
;;;5686   	bps[in]._ist_blok_cnt--;
;;;5687   	bps[in]._flags_tu|=BIN8(1);
;;;5688   	}
;;;5689   
;;;5690   	   */ 
;;;5691   
;;;5692   //œÂÂÒ·ÓÒ ¡œ—‡ ÔË ÔÓÚÂÂ Ò‚ˇÁË
;;;5693   if(bps[in]._cnt>=10) bps[in]._flags_tu|=BIN8(10000000);
0039bc  78e0              LDRB     r0,[r4,#3]
0039be  280a              CMP      r0,#0xa
0039c0  d306              BCC      |L1.14800|
0039c2  f894002c          LDRB     r0,[r4,#0x2c]
0039c6  f0400080          ORR      r0,r0,#0x80
0039ca  f884002c          STRB     r0,[r4,#0x2c]
0039ce  e005              B        |L1.14812|
                  |L1.14800|
;;;5694   else bps[in]._flags_tu&=BIN8(1111111);
0039d0  f894002c          LDRB     r0,[r4,#0x2c]
0039d4  f000007f          AND      r0,r0,#0x7f
0039d8  f884002c          STRB     r0,[r4,#0x2c]
                  |L1.14812|
;;;5695   	
;;;5696   bps[in]._vol_u=cntrl_stat+bps[in]._x_;	
0039dc  4936              LDR      r1,|L1.15032|
0039de  f9b40050          LDRSH    r0,[r4,#0x50]
0039e2  f9b11026          LDRSH    r1,[r1,#0x26]  ; cntrl_stat
0039e6  4408              ADD      r0,r0,r1
0039e8  6320              STR      r0,[r4,#0x30]
;;;5697   bps[in]._vol_i=1000; 
0039ea  f44f707a          MOV      r0,#0x3e8
0039ee  6360              STR      r0,[r4,#0x34]
                  |L1.14832|
;;;5698   }
0039f0  e8bd81f0          POP      {r4-r8,pc}
;;;5699   
                          ENDP

                  avt_hndl PROC
;;;5700   //-----------------------------------------------
;;;5701   void avt_hndl(void)
0039f4  b570              PUSH     {r4-r6,lr}
;;;5702   {
;;;5703   char i;
;;;5704   for(i=0;i<12;i++)
0039f6  f04f0000          MOV      r0,#0
;;;5705   	{
;;;5706   	if(eb2_data_short[6]&(1<<i))
0039fa  4930              LDR      r1,|L1.15036|
;;;5707   		{
;;;5708   		avt_stat[i]=avtON;
0039fc  4d30              LDR      r5,|L1.15040|
0039fe  f04f0401          MOV      r4,#1                 ;5706
003a02  f9b1200c          LDRSH    r2,[r1,#0xc]          ;5706
003a06  4603              MOV      r3,r0                 ;5704
                  |L1.14856|
003a08  fa04f100          LSL      r1,r4,r0              ;5706
003a0c  420a              TST      r2,r1                 ;5706
003a0e  d001              BEQ      |L1.14868|
003a10  542c              STRB     r4,[r5,r0]
003a12  e000              B        |L1.14870|
                  |L1.14868|
;;;5709   		}
;;;5710   	else avt_stat[i]=avtOFF;
003a14  542b              STRB     r3,[r5,r0]
                  |L1.14870|
003a16  f1000001          ADD      r0,r0,#1              ;5704
003a1a  b2c0              UXTB     r0,r0                 ;5704
003a1c  280c              CMP      r0,#0xc               ;5704
003a1e  d3f3              BCC      |L1.14856|
;;;5711   	}
;;;5712   
;;;5713   if((avt_stat_old[0]!=avt_stat[0])&&(NUMAVT>=1))
003a20  4e28              LDR      r6,|L1.15044|
003a22  7828              LDRB     r0,[r5,#0]  ; avt_stat
003a24  4c28              LDR      r4,|L1.15048|
003a26  7831              LDRB     r1,[r6,#0]  ; avt_stat_old
003a28  4281              CMP      r1,r0
003a2a  d00b              BEQ      |L1.14916|
003a2c  f9b41000          LDRSH    r1,[r4,#0]  ; NUMAVT
003a30  2901              CMP      r1,#1
003a32  db07              BLT      |L1.14916|
;;;5714   	{
;;;5715   	if(avt_stat[0]==avtON) 	snmp_trap_send("Avtomat #1 is ON ",11,1,1);
003a34  2801              CMP      r0,#1
003a36  d02a              BEQ      |L1.14990|
;;;5716   	else 				snmp_trap_send("Avtomat #1 is OFF",11,1,0);
003a38  2300              MOVS     r3,#0
003a3a  2201              MOVS     r2,#1
003a3c  210b              MOVS     r1,#0xb
003a3e  a023              ADR      r0,|L1.15052|
003a40  f7fffffe          BL       snmp_trap_send
                  |L1.14916|
;;;5717   	}
;;;5718   if((avt_stat_old[1]!=avt_stat[1])&&(NUMAVT>=2))
003a44  7871              LDRB     r1,[r6,#1]  ; avt_stat_old
003a46  7868              LDRB     r0,[r5,#1]  ; avt_stat
003a48  4281              CMP      r1,r0
003a4a  d00b              BEQ      |L1.14948|
003a4c  f9b41000          LDRSH    r1,[r4,#0]  ; NUMAVT
003a50  2902              CMP      r1,#2
003a52  db07              BLT      |L1.14948|
;;;5719   	{
;;;5720   	if(avt_stat[1]==avtON) 	snmp_trap_send("Avtomat #2 is ON ",11,2,1);
003a54  2801              CMP      r0,#1
003a56  d07e              BEQ      |L1.15190|
;;;5721   	else 				snmp_trap_send("Avtomat #2 is OFF",11,2,0);
003a58  2300              MOVS     r3,#0
003a5a  2202              MOVS     r2,#2
003a5c  210b              MOVS     r1,#0xb
003a5e  a020              ADR      r0,|L1.15072|
003a60  f7fffffe          BL       snmp_trap_send
                  |L1.14948|
;;;5722   	}
;;;5723   if((avt_stat_old[2]!=avt_stat[2])&&(NUMAVT>=3))
003a64  78b1              LDRB     r1,[r6,#2]  ; avt_stat_old
003a66  78a8              LDRB     r0,[r5,#2]  ; avt_stat
003a68  4281              CMP      r1,r0
003a6a  d00b              BEQ      |L1.14980|
003a6c  f9b41000          LDRSH    r1,[r4,#0]  ; NUMAVT
003a70  2903              CMP      r1,#3
003a72  db07              BLT      |L1.14980|
;;;5724   	{
;;;5725   	if(avt_stat[2]==avtON) 	snmp_trap_send("Avtomat #3 is ON ",11,3,1);
003a74  2801              CMP      r0,#1
003a76  d06f              BEQ      |L1.15192|
;;;5726   	else 				snmp_trap_send("Avtomat #3 is OFF",11,3,0);
003a78  2300              MOVS     r3,#0
003a7a  2203              MOVS     r2,#3
003a7c  210b              MOVS     r1,#0xb
003a7e  a01d              ADR      r0,|L1.15092|
003a80  f7fffffe          BL       snmp_trap_send
                  |L1.14980|
;;;5727   	}
;;;5728   if((avt_stat_old[3]!=avt_stat[3])&&(NUMAVT>=4))
003a84  78f1              LDRB     r1,[r6,#3]  ; avt_stat_old
003a86  78e8              LDRB     r0,[r5,#3]  ; avt_stat
003a88  4281              CMP      r1,r0
003a8a  d049              BEQ      |L1.15136|
003a8c  e03c              B        |L1.15112|
                  |L1.14990|
003a8e  e0a4              B        |L1.15322|
                  |L1.14992|
                          DCD      ica_u_necc
                  |L1.14996|
                          DCD      ICA_MODBUS_ADDRESS
                  |L1.15000|
                          DCD      ICA_CH
                  |L1.15004|
                          DCD      TBAT
                  |L1.15008|
                          DCD      ipsBlckStat
                  |L1.15012|
                          DCD      ipsBlckSrc
                  |L1.15016|
                          DCD      ipsBlckLog
                  |L1.15020|
                          DCD      ||.bss||+0x400
                  |L1.15024|
                          DCD      bps
                  |L1.15028|
                          DCD      net_av
                  |L1.15032|
                          DCD      ||area_number.23||
                  |L1.15036|
                          DCD      eb2_data_short
                  |L1.15040|
                          DCD      avt_stat
                  |L1.15044|
                          DCD      avt_stat_old
                  |L1.15048|
                          DCD      NUMAVT
                  |L1.15052|
003acc  4176746f          DCB      "Avtomat #1 is OFF",0
003ad0  6d617420
003ad4  23312069
003ad8  73204f46
003adc  4600    
003ade  00                DCB      0
003adf  00                DCB      0
                  |L1.15072|
003ae0  4176746f          DCB      "Avtomat #2 is OFF",0
003ae4  6d617420
003ae8  23322069
003aec  73204f46
003af0  4600    
003af2  00                DCB      0
003af3  00                DCB      0
                  |L1.15092|
003af4  4176746f          DCB      "Avtomat #3 is OFF",0
003af8  6d617420
003afc  23332069
003b00  73204f46
003b04  4600    
003b06  00                DCB      0
003b07  00                DCB      0
                  |L1.15112|
003b08  f9b41000          LDRSH    r1,[r4,#0]  ; NUMAVT
003b0c  2904              CMP      r1,#4
003b0e  db07              BLT      |L1.15136|
;;;5729   	{
;;;5730   	if(avt_stat[3]==avtON) 	snmp_trap_send("Avtomat #4 is ON ",11,4,1);
003b10  2801              CMP      r0,#1
003b12  d078              BEQ      |L1.15366|
;;;5731   	else 				snmp_trap_send("Avtomat #4 is OFF",11,4,0);
003b14  2300              MOVS     r3,#0
003b16  2204              MOVS     r2,#4
003b18  210b              MOVS     r1,#0xb
003b1a  a0ff              ADR      r0,|L1.16152|
003b1c  f7fffffe          BL       snmp_trap_send
                  |L1.15136|
;;;5732   	}
;;;5733   if((avt_stat_old[4]!=avt_stat[4])&&(NUMAVT>=5))
003b20  7931              LDRB     r1,[r6,#4]  ; avt_stat_old
003b22  7928              LDRB     r0,[r5,#4]  ; avt_stat
003b24  4281              CMP      r1,r0
003b26  d00b              BEQ      |L1.15168|
003b28  f9b41000          LDRSH    r1,[r4,#0]  ; NUMAVT
003b2c  2905              CMP      r1,#5
003b2e  db07              BLT      |L1.15168|
;;;5734   	{
;;;5735   	if(avt_stat[4]==avtON) 	snmp_trap_send("Avtomat #5 is ON ",11,5,1);
003b30  2801              CMP      r0,#1
003b32  d070              BEQ      |L1.15382|
;;;5736   	else 				snmp_trap_send("Avtomat #5 is OFF",11,5,0);
003b34  2300              MOVS     r3,#0
003b36  2205              MOVS     r2,#5
003b38  210b              MOVS     r1,#0xb
003b3a  a0fc              ADR      r0,|L1.16172|
003b3c  f7fffffe          BL       snmp_trap_send
                  |L1.15168|
;;;5737   	}
;;;5738   if((avt_stat_old[5]!=avt_stat[5])&&(NUMAVT>=6))
003b40  7971              LDRB     r1,[r6,#5]  ; avt_stat_old
003b42  7968              LDRB     r0,[r5,#5]  ; avt_stat
003b44  4281              CMP      r1,r0
003b46  d00e              BEQ      |L1.15206|
003b48  f9b41000          LDRSH    r1,[r4,#0]  ; NUMAVT
003b4c  2906              CMP      r1,#6
003b4e  db0a              BLT      |L1.15206|
;;;5739   	{
;;;5740   	if(avt_stat[5]==avtON) 	snmp_trap_send("Avtomat #6 is ON ",11,6,1);
003b50  2801              CMP      r0,#1
003b52  d067              BEQ      |L1.15396|
;;;5741   	else 				snmp_trap_send("Avtomat #6 is OFF",11,6,0);
003b54  e001              B        |L1.15194|
                  |L1.15190|
003b56  e047              B        |L1.15336|
                  |L1.15192|
003b58  e04e              B        |L1.15352|
                  |L1.15194|
003b5a  2300              MOVS     r3,#0
003b5c  2206              MOVS     r2,#6
003b5e  210b              MOVS     r1,#0xb
003b60  a0f7              ADR      r0,|L1.16192|
003b62  f7fffffe          BL       snmp_trap_send
                  |L1.15206|
;;;5742   	}
;;;5743   if((avt_stat_old[6]!=avt_stat[6])&&(NUMAVT>=7))
003b66  79b1              LDRB     r1,[r6,#6]  ; avt_stat_old
003b68  79a8              LDRB     r0,[r5,#6]  ; avt_stat
003b6a  4281              CMP      r1,r0
003b6c  d00b              BEQ      |L1.15238|
003b6e  f9b41000          LDRSH    r1,[r4,#0]  ; NUMAVT
003b72  2907              CMP      r1,#7
003b74  db07              BLT      |L1.15238|
;;;5744   	{
;;;5745   	if(avt_stat[6]==avtON) 	snmp_trap_send("Avtomat #7 is ON ",11,7,1);
003b76  2801              CMP      r0,#1
003b78  d05b              BEQ      |L1.15410|
;;;5746   	else 				snmp_trap_send("Avtomat #7 is OFF",11,7,0);
003b7a  2300              MOVS     r3,#0
003b7c  2207              MOVS     r2,#7
003b7e  210b              MOVS     r1,#0xb
003b80  a0f4              ADR      r0,|L1.16212|
003b82  f7fffffe          BL       snmp_trap_send
                  |L1.15238|
;;;5747   	}
;;;5748   if((avt_stat_old[7]!=avt_stat[7])&&(NUMAVT>=8))
003b86  79f1              LDRB     r1,[r6,#7]  ; avt_stat_old
003b88  79e8              LDRB     r0,[r5,#7]  ; avt_stat
003b8a  4281              CMP      r1,r0
003b8c  d00b              BEQ      |L1.15270|
003b8e  f9b41000          LDRSH    r1,[r4,#0]  ; NUMAVT
003b92  2908              CMP      r1,#8
003b94  db07              BLT      |L1.15270|
;;;5749   	{
;;;5750   	if(avt_stat[7]==avtON) 	snmp_trap_send("Avtomat #8 is ON ",11,8,1);
003b96  2801              CMP      r0,#1
003b98  d052              BEQ      |L1.15424|
;;;5751   	else 				snmp_trap_send("Avtomat #8 is OFF",11,8,0);
003b9a  2300              MOVS     r3,#0
003b9c  2208              MOVS     r2,#8
003b9e  210b              MOVS     r1,#0xb
003ba0  a0f1              ADR      r0,|L1.16232|
003ba2  f7fffffe          BL       snmp_trap_send
                  |L1.15270|
;;;5752   	}
;;;5753   if((avt_stat_old[8]!=avt_stat[8])&&(NUMAVT>=9))
003ba6  7a31              LDRB     r1,[r6,#8]  ; avt_stat_old
003ba8  7a28              LDRB     r0,[r5,#8]  ; avt_stat
003baa  4281              CMP      r1,r0
003bac  d00b              BEQ      |L1.15302|
003bae  f9b41000          LDRSH    r1,[r4,#0]  ; NUMAVT
003bb2  2909              CMP      r1,#9
003bb4  db07              BLT      |L1.15302|
;;;5754   	{
;;;5755   	if(avt_stat[8]==avtON) 	snmp_trap_send("Avtomat #9 is ON ",11,9,1);
003bb6  2801              CMP      r0,#1
003bb8  d049              BEQ      |L1.15438|
;;;5756   	else 				snmp_trap_send("Avtomat #9 is OFF",11,9,0);
003bba  2300              MOVS     r3,#0
003bbc  2209              MOVS     r2,#9
003bbe  210b              MOVS     r1,#0xb
003bc0  a0ee              ADR      r0,|L1.16252|
003bc2  f7fffffe          BL       snmp_trap_send
                  |L1.15302|
;;;5757   	}
;;;5758   
;;;5759   for(i=0;i<12;i++)
003bc6  f04f0000          MOV      r0,#0
                  |L1.15306|
;;;5760   	{
;;;5761   	avt_stat_old[i]=avt_stat[i];
003bca  5c29              LDRB     r1,[r5,r0]
003bcc  5431              STRB     r1,[r6,r0]
003bce  f1000001          ADD      r0,r0,#1              ;5759
003bd2  b2c0              UXTB     r0,r0                 ;5759
003bd4  280c              CMP      r0,#0xc               ;5759
003bd6  d3f8              BCC      |L1.15306|
;;;5762   	}
;;;5763   }
003bd8  bd70              POP      {r4-r6,pc}
                  |L1.15322|
003bda  2301              MOVS     r3,#1                 ;5715
003bdc  461a              MOV      r2,r3                 ;5715
003bde  210b              MOVS     r1,#0xb               ;5715
003be0  a0eb              ADR      r0,|L1.16272|
003be2  f7fffffe          BL       snmp_trap_send
003be6  e72d              B        |L1.14916|
                  |L1.15336|
003be8  2301              MOVS     r3,#1                 ;5720
003bea  2202              MOVS     r2,#2                 ;5720
003bec  210b              MOVS     r1,#0xb               ;5720
003bee  a0ed              ADR      r0,|L1.16292|
003bf0  f7fffffe          BL       snmp_trap_send
003bf4  e736              B        |L1.14948|
003bf6  e006              B        |L1.15366|
                  |L1.15352|
003bf8  2301              MOVS     r3,#1                 ;5725
003bfa  2203              MOVS     r2,#3                 ;5725
003bfc  210b              MOVS     r1,#0xb               ;5725
003bfe  a0ee              ADR      r0,|L1.16312|
003c00  f7fffffe          BL       snmp_trap_send
003c04  e73e              B        |L1.14980|
                  |L1.15366|
003c06  2301              MOVS     r3,#1                 ;5730
003c08  2204              MOVS     r2,#4                 ;5730
003c0a  210b              MOVS     r1,#0xb               ;5730
003c0c  a0ef              ADR      r0,|L1.16332|
003c0e  f7fffffe          BL       snmp_trap_send
003c12  e785              B        |L1.15136|
003c14  e7ff              B        |L1.15382|
                  |L1.15382|
003c16  2301              MOVS     r3,#1                 ;5735
003c18  2205              MOVS     r2,#5                 ;5735
003c1a  210b              MOVS     r1,#0xb               ;5735
003c1c  a0f0              ADR      r0,|L1.16352|
003c1e  f7fffffe          BL       snmp_trap_send
003c22  e78d              B        |L1.15168|
                  |L1.15396|
003c24  2301              MOVS     r3,#1                 ;5740
003c26  2206              MOVS     r2,#6                 ;5740
003c28  210b              MOVS     r1,#0xb               ;5740
003c2a  a0f2              ADR      r0,|L1.16372|
003c2c  f7fffffe          BL       snmp_trap_send
003c30  e799              B        |L1.15206|
                  |L1.15410|
003c32  2301              MOVS     r3,#1                 ;5745
003c34  2207              MOVS     r2,#7                 ;5745
003c36  210b              MOVS     r1,#0xb               ;5745
003c38  a0f3              ADR      r0,|L1.16392|
003c3a  f7fffffe          BL       snmp_trap_send
003c3e  e7a2              B        |L1.15238|
                  |L1.15424|
003c40  2301              MOVS     r3,#1                 ;5750
003c42  2208              MOVS     r2,#8                 ;5750
003c44  210b              MOVS     r1,#0xb               ;5750
003c46  a0f5              ADR      r0,|L1.16412|
003c48  f7fffffe          BL       snmp_trap_send
003c4c  e7ab              B        |L1.15270|
                  |L1.15438|
003c4e  2301              MOVS     r3,#1                 ;5755
003c50  2209              MOVS     r2,#9                 ;5755
003c52  210b              MOVS     r1,#0xb               ;5755
003c54  a0f6              ADR      r0,|L1.16432|
003c56  f7fffffe          BL       snmp_trap_send
003c5a  e7b4              B        |L1.15302|
;;;5764   
                          ENDP

                  bat_hndl PROC
;;;5765   //-----------------------------------------------
;;;5766   void bat_hndl(void)
003c5c  b570              PUSH     {r4-r6,lr}
;;;5767   {
;;;5768   /*if(mess_find(_MESS_BAT_MASK_ON))
;;;5769   	{
;;;5770   	if(mess_data[0]==_MESS_BAT_MASK_ON)
;;;5771   		{
;;;5772   		char i;
;;;5773   		for(i=0;i<2;i++)
;;;5774   			{
;;;5775   			if(mess_data[1]&(1<<i))
;;;5776   				{
;;;5777   				bat[i]._cnt_to_block=0;
;;;5778        			bat[i]._rel_stat=0;
;;;5779        			}
;;;5780   			}
;;;5781   		}
;;;5782   	}
;;;5783   if(mess_find(_MESS_BAT_MASK_OFF))
;;;5784   	{		
;;;5785   	if(mess_data[0]==_MESS_BAT_MASK_OFF)
;;;5786   		{
;;;5787   		char i;
;;;5788   		for(i=0;i<2;i++)
;;;5789   			{
;;;5790   			if((mess_data[1]&(1<<i)) && (bat[i]._cnt_to_block==0) && (bat[i]._rel_stat==0))
;;;5791   				{
;;;5792   				bat[i]._cnt_to_block=20;
;;;5793   				bat[i]._rel_stat=1;
;;;5794        			}
;;;5795   			}
;;;5796   		
;;;5797   		}		
;;;5798   	}*/
;;;5799   
;;;5800   if(mess_find_unvol(MESS2BAT_HNDL))
003c5e  20c8              MOVS     r0,#0xc8
003c60  f7fffffe          BL       mess_find_unvol
;;;5801   	{ 
;;;5802   	char i;
;;;5803   	
;;;5804   	if(mess_data[0]==PARAM_BAT_ALL_OFF_AFTER_2SEC)
;;;5805   		{
;;;5806   		for(i=0;i<MAX_NUM_OF_BAT;i++)
;;;5807   			{
;;;5808   			if(bat[i]._cnt_to_block<50)bat[i]._cnt_to_block++;
003c64  49f7              LDR      r1,|L1.16452|
003c66  2200              MOVS     r2,#0                 ;5806
003c68  b3a8              CBZ      r0,|L1.15574|
003c6a  4bf7              LDR      r3,|L1.16456|
;;;5809   			}
;;;5810   		}
;;;5811   
;;;5812   	else if(mess_data[0]==PARAM_BAT_MASK_OFF_AFTER_2SEC)
;;;5813   		{
;;;5814   		for(i=0;i<MAX_NUM_OF_BAT;i++)
;;;5815   			{
;;;5816   			if(mess_data[1]&(1<<i))
003c6c  2401              MOVS     r4,#1
003c6e  6818              LDR      r0,[r3,#0]            ;5804  ; mess_data
003c70  28c9              CMP      r0,#0xc9              ;5804
003c72  d01c              BEQ      |L1.15534|
003c74  28ca              CMP      r0,#0xca              ;5812
003c76  d02f              BEQ      |L1.15576|
;;;5817   				{
;;;5818   				if(bat[i]._cnt_to_block<50) bat[i]._cnt_to_block++;
;;;5819   				}
;;;5820   			else bat[i]._cnt_to_block=0;
;;;5821   			}
;;;5822   		}
;;;5823   	else 
;;;5824   	 	{
;;;5825   		for(i=0;i<MAX_NUM_OF_BAT;i++)
003c78  4610              MOV      r0,r2
                  |L1.15482|
;;;5826   			{
;;;5827   			bat[i]._cnt_to_block=0;
003c7a  eb000340          ADD      r3,r0,r0,LSL #1
003c7e  eb031300          ADD      r3,r3,r0,LSL #4
003c82  f8012023          STRB     r2,[r1,r3,LSL #2]
003c86  f1000001          ADD      r0,r0,#1              ;5825
003c8a  b2c0              UXTB     r0,r0                 ;5825
003c8c  2802              CMP      r0,#2                 ;5825
003c8e  d3f4              BCC      |L1.15482|
                  |L1.15504|
;;;5828   			}
;;;5829   
;;;5830   		}
;;;5831   	for(i=0;i<MAX_NUM_OF_BAT;i++)
003c90  f04f0000          MOV      r0,#0
                  |L1.15508|
;;;5832   		{
;;;5833   		if(bat[i]._cnt_to_block>20)bat[i]._rel_stat=1;
003c94  eb000340          ADD      r3,r0,r0,LSL #1
003c98  eb031300          ADD      r3,r3,r0,LSL #4
003c9c  f8115023          LDRB     r5,[r1,r3,LSL #2]
003ca0  2d14              CMP      r5,#0x14
003ca2  d939              BLS      |L1.15640|
003ca4  eb010383          ADD      r3,r1,r3,LSL #2
003ca8  f883403c          STRB     r4,[r3,#0x3c]
003cac  e038              B        |L1.15648|
                  |L1.15534|
003cae  f04f0000          MOV      r0,#0                 ;5806
                  |L1.15538|
003cb2  eb000340          ADD      r3,r0,r0,LSL #1       ;5808
003cb6  eb031500          ADD      r5,r3,r0,LSL #4       ;5808
003cba  f8113025          LDRB     r3,[r1,r5,LSL #2]     ;5808
003cbe  2b32              CMP      r3,#0x32              ;5808
003cc0  d203              BCS      |L1.15562|
003cc2  f1030301          ADD      r3,r3,#1              ;5808
003cc6  f8013025          STRB     r3,[r1,r5,LSL #2]     ;5808
                  |L1.15562|
003cca  f1000001          ADD      r0,r0,#1              ;5806
003cce  b2c0              UXTB     r0,r0                 ;5806
003cd0  2802              CMP      r0,#2                 ;5806
003cd2  d3ee              BCC      |L1.15538|
003cd4  e7dc              B        |L1.15504|
                  |L1.15574|
003cd6  e029              B        |L1.15660|
                  |L1.15576|
003cd8  f04f0000          MOV      r0,#0                 ;5814
003cdc  685e              LDR      r6,[r3,#4]            ;5816
                  |L1.15582|
003cde  fa04f300          LSL      r3,r4,r0              ;5816
003ce2  421e              TST      r6,r3                 ;5816
003ce4  d00c              BEQ      |L1.15616|
003ce6  eb000340          ADD      r3,r0,r0,LSL #1       ;5818
003cea  eb031500          ADD      r5,r3,r0,LSL #4       ;5818
003cee  f8113025          LDRB     r3,[r1,r5,LSL #2]     ;5818
003cf2  2b32              CMP      r3,#0x32              ;5818
003cf4  d20a              BCS      |L1.15628|
003cf6  f1030301          ADD      r3,r3,#1              ;5818
003cfa  f8013025          STRB     r3,[r1,r5,LSL #2]     ;5818
003cfe  e005              B        |L1.15628|
                  |L1.15616|
003d00  eb000340          ADD      r3,r0,r0,LSL #1       ;5820
003d04  eb031300          ADD      r3,r3,r0,LSL #4       ;5820
003d08  f8012023          STRB     r2,[r1,r3,LSL #2]     ;5820
                  |L1.15628|
003d0c  f1000001          ADD      r0,r0,#1              ;5814
003d10  b2c0              UXTB     r0,r0                 ;5814
003d12  2802              CMP      r0,#2                 ;5814
003d14  d3e3              BCC      |L1.15582|
003d16  e7bb              B        |L1.15504|
                  |L1.15640|
;;;5834   		else bat[i]._rel_stat=0;
003d18  eb010383          ADD      r3,r1,r3,LSL #2
003d1c  f883203c          STRB     r2,[r3,#0x3c]
                  |L1.15648|
003d20  f1000001          ADD      r0,r0,#1              ;5831
003d24  b2c0              UXTB     r0,r0                 ;5831
003d26  2802              CMP      r0,#2                 ;5831
003d28  d3b4              BCC      |L1.15508|
;;;5835   		}
;;;5836   
;;;5837   	}
;;;5838   
;;;5839   else 
;;;5840   	{
;;;5841   	char i;
;;;5842   	for(i=0;i<MAX_NUM_OF_BAT;i++)
;;;5843   		{
;;;5844   		bat[i]._cnt_to_block=0;
;;;5845   		bat[i]._rel_stat=0;
;;;5846   		}
;;;5847   
;;;5848   	}
;;;5849   
;;;5850   /*if(mess_find_unvol(MESS2BAT_HNDL1))
;;;5851   	{
;;;5852   	if(PARAM_BAT_ON)
;;;5853   		{
;;;5854   		char i;
;;;5855   		for(i=0;i<MAX_NUM_OF_BAT;i++)
;;;5856   			{
;;;5857   			if(mess_data[1]&(1<<i))
;;;5858   				{
;;;5859   				bat[i]._cnt_to_block=0;
;;;5860   				bat[i]._rel_stat=0;
;;;5861   				}
;;;5862   			}
;;;5863   		}
;;;5864   	} */
;;;5865   }
003d2a  bd70              POP      {r4-r6,pc}
                  |L1.15660|
003d2c  f04f0000          MOV      r0,#0                 ;5842
                  |L1.15664|
003d30  eb000340          ADD      r3,r0,r0,LSL #1       ;5844
003d34  eb031300          ADD      r3,r3,r0,LSL #4       ;5844
003d38  f8012023          STRB     r2,[r1,r3,LSL #2]     ;5844
003d3c  eb010383          ADD      r3,r1,r3,LSL #2       ;5845
003d40  f883203c          STRB     r2,[r3,#0x3c]         ;5845
003d44  f1000001          ADD      r0,r0,#1              ;5842
003d48  b2c0              UXTB     r0,r0                 ;5842
003d4a  2802              CMP      r0,#2                 ;5842
003d4c  d3f0              BCC      |L1.15664|
003d4e  bd70              POP      {r4-r6,pc}
;;;5866   
                          ENDP

                  bat_drv PROC
;;;6504   //-----------------------------------------------
;;;6505   void bat_drv(char in)
003d50  e92d4ffe          PUSH     {r1-r11,lr}
;;;6506   {
003d54  4605              MOV      r5,r0
;;;6507   unsigned short /*tempUS,*/tempUS_;
;;;6508   unsigned long tempUL,tempUL_;
;;;6509   unsigned short b_zar;
;;;6510   //static unsigned short time_cnt[2];
;;;6511   
;;;6512   
;;;6513   
;;;6514   if(cntrl_stat_blok_cnt_plus[in])cntrl_stat_blok_cnt_plus[in]--;
003d56  49bd              LDR      r1,|L1.16460|
003d58  f9310015          LDRSH    r0,[r1,r5,LSL #1]
003d5c  b118              CBZ      r0,|L1.15718|
003d5e  f1a00001          SUB      r0,r0,#1
003d62  f8210015          STRH     r0,[r1,r5,LSL #1]
                  |L1.15718|
;;;6515   if(cntrl_stat_blok_cnt_minus[in])cntrl_stat_blok_cnt_minus[in]--;
003d66  4ab9              LDR      r2,|L1.16460|
003d68  1d12              ADDS     r2,r2,#4
003d6a  f9320015          LDRSH    r0,[r2,r5,LSL #1]
003d6e  b118              CBZ      r0,|L1.15736|
003d70  f1a00001          SUB      r0,r0,#1
003d74  f8220015          STRH     r0,[r2,r5,LSL #1]
                  |L1.15736|
;;;6516   
;;;6517   
;;;6518   if(bat[in]._Ib>IZMAX) cntrl_stat_blok_cnt_plus[in]=100;
003d78  eb050045          ADD      r0,r5,r5,LSL #1
003d7c  4bb1              LDR      r3,|L1.16452|
003d7e  eb001005          ADD      r0,r0,r5,LSL #4
003d82  eb030480          ADD      r4,r3,r0,LSL #2
003d86  4bb2              LDR      r3,|L1.16464|
003d88  9002              STR      r0,[sp,#8]
003d8a  f9b40008          LDRSH    r0,[r4,#8]
003d8e  f9b33000          LDRSH    r3,[r3,#0]  ; IZMAX
003d92  f04f0b64          MOV      r11,#0x64
003d96  4298              CMP      r0,r3
003d98  dd01              BLE      |L1.15774|
003d9a  f821b015          STRH     r11,[r1,r5,LSL #1]
                  |L1.15774|
;;;6519   if(bat[in]._Ib<0)     cntrl_stat_blok_cnt_minus[in]=100;
003d9e  2800              CMP      r0,#0
003da0  da01              BGE      |L1.15782|
003da2  f822b015          STRH     r11,[r2,r5,LSL #1]
                  |L1.15782|
;;;6520   
;;;6521   if(cntrl_stat_blok_cnt_plus[in] && cntrl_stat_blok_cnt_minus[in])
;;;6522        {
;;;6523        if(!cntrl_stat_blok_cnt_)
003da6  48a9              LDR      r0,|L1.16460|
003da8  f8313015          LDRH     r3,[r1,r5,LSL #1]     ;6521
003dac  3894              SUBS     r0,r0,#0x94
003dae  2700              MOVS     r7,#0
003db0  b14b              CBZ      r3,|L1.15814|
003db2  f8323015          LDRH     r3,[r2,r5,LSL #1]     ;6521
003db6  b133              CBZ      r3,|L1.15814|
003db8  f8b0306a          LDRH     r3,[r0,#0x6a]  ; cntrl_stat_blok_cnt_
003dbc  b1a3              CBZ      r3,|L1.15848|
;;;6524             {
;;;6525             cntrl_stat_blok_cnt_=600; 
;;;6526             cntrl_stat_blok_cnt_plus[in]=0;
;;;6527             cntrl_stat_blok_cnt_minus[in]=0;
;;;6528             }
;;;6529        else cntrl_stat_blok_cnt=3000;
003dbe  f64031b8          MOV      r1,#0xbb8
003dc2  f8a01068          STRH     r1,[r0,#0x68]
                  |L1.15814|
;;;6530        }
;;;6531   cntrl_stat_blok_cnt=0;
003dc6  f8a07068          STRH     r7,[r0,#0x68]
;;;6532   
;;;6533   if(++(bat[in]._time_cnt)>=10)
003dca  f894003e          LDRB     r0,[r4,#0x3e]
003dce  1c40              ADDS     r0,r0,#1
003dd0  b2c0              UXTB     r0,r0
003dd2  f884003e          STRB     r0,[r4,#0x3e]
003dd6  280a              CMP      r0,#0xa
003dd8  d301              BCC      |L1.15838|
;;;6534   	{
;;;6535   	bat[in]._time_cnt=0;
003dda  f884703e          STRB     r7,[r4,#0x3e]
                  |L1.15838|
;;;6536   	//bat[in]._zar_cnt++;
;;;6537   	}
;;;6538   
;;;6539   if(main_10Hz_cnt==50)
003dde  4e9d              LDR      r6,|L1.16468|
003de0  8830              LDRH     r0,[r6,#0]  ; main_10Hz_cnt
003de2  2832              CMP      r0,#0x32
003de4  d009              BEQ      |L1.15866|
003de6  e017              B        |L1.15896|
                  |L1.15848|
003de8  f44f7316          MOV      r3,#0x258             ;6525
003dec  f8a0306a          STRH     r3,[r0,#0x6a]         ;6525
003df0  f8217015          STRH     r7,[r1,r5,LSL #1]     ;6526
003df4  f8227015          STRH     r7,[r2,r5,LSL #1]     ;6527
003df8  e7e5              B        |L1.15814|
                  |L1.15866|
;;;6540   	{
;;;6541   	if(!bat[in]._rel_stat)
003dfa  f894003c          LDRB     r0,[r4,#0x3c]
003dfe  b958              CBNZ     r0,|L1.15896|
;;;6542   		{
;;;6543   		
;;;6544   		if(bat[in]._Ub<80) 
003e00  f9b40002          LDRSH    r0,[r4,#2]
003e04  2850              CMP      r0,#0x50
003e06  da07              BGE      |L1.15896|
;;;6545   			{
;;;6546   			
;;;6547   			if(!(bat[in]._av&1))
003e08  f894003d          LDRB     r0,[r4,#0x3d]
003e0c  07c0              LSLS     r0,r0,#31
003e0e  d103              BNE      |L1.15896|
;;;6548   				{
;;;6549   				avar_bat_hndl(in,1);
003e10  2101              MOVS     r1,#1
003e12  4628              MOV      r0,r5
003e14  f7fffffe          BL       avar_bat_hndl
                  |L1.15896|
;;;6550   				//if(in==0)plazma_bat++;
;;;6551   				}
;;;6552   			}				
;;;6553   
;;;6554   		}
;;;6555   	}
;;;6556   
;;;6557   if(main_10Hz_cnt>200)
003e18  f9b60000          LDRSH    r0,[r6,#0]  ; main_10Hz_cnt
;;;6558   	{
;;;6559   	if(abs(bat[in]._Ib)>IKB) 
003e1c  4e8e              LDR      r6,|L1.16472|
003e1e  28c8              CMP      r0,#0xc8              ;6557
003e20  dd0f              BLE      |L1.15938|
003e22  f9b40008          LDRSH    r0,[r4,#8]
003e26  f7fffffe          BL       abs
003e2a  f9b61000          LDRSH    r1,[r6,#0]  ; IKB
003e2e  4288              CMP      r0,r1
003e30  dd07              BLE      |L1.15938|
;;;6560   		{
;;;6561   		if((bat[in]._av&1))avar_bat_hndl(in,0);
003e32  f894003d          LDRB     r0,[r4,#0x3d]
003e36  07c0              LSLS     r0,r0,#31
003e38  d003              BEQ      |L1.15938|
003e3a  2100              MOVS     r1,#0
003e3c  4628              MOV      r0,r5
003e3e  f7fffffe          BL       avar_bat_hndl
                  |L1.15938|
;;;6562   		}
;;;6563   	}
;;;6564   
;;;6565   #ifdef APSENERGIA
;;;6566   //if(bat[in]._Ib>(-IKB))
;;;6567   
;;;6568   
;;;6569   #endif
;;;6570   
;;;6571   if(bat[in]._Ib>(-IKB))
003e42  4885              LDR      r0,|L1.16472|
003e44  f9b41008          LDRSH    r1,[r4,#8]
003e48  f9b00000          LDRSH    r0,[r0,#0]  ; IKB
003e4c  4240              RSBS     r0,r0,#0
003e4e  4281              CMP      r1,r0
003e50  dd14              BLE      |L1.15996|
;;;6572   	{
;;;6573   	if(bat[in]._cnt_wrk<10)
003e52  7b60              LDRB     r0,[r4,#0xd]
003e54  280a              CMP      r0,#0xa
003e56  d20d              BCS      |L1.15988|
;;;6574   		{
;;;6575   		bat[in]._cnt_wrk++;
003e58  f1000001          ADD      r0,r0,#1
003e5c  b2c0              UXTB     r0,r0
003e5e  7360              STRB     r0,[r4,#0xd]
;;;6576   		if((bat[in]._cnt_wrk>=10)&&(bat[in]._wrk)) 
003e60  280a              CMP      r0,#0xa
003e62  d306              BCC      |L1.15986|
003e64  7ba0              LDRB     r0,[r4,#0xe]
003e66  2800              CMP      r0,#0
003e68  d003              BEQ      |L1.15986|
;;;6577   			{
;;;6578   			bat[in]._wrk=0;
003e6a  73a7              STRB     r7,[r4,#0xe]
;;;6579   			//beep_init(0x7L,'O');
;;;6580   			//wrk_mem_hndl(0);
;;;6581   			wrk_mem_hndl(in);
003e6c  4628              MOV      r0,r5
003e6e  f7fffffe          BL       wrk_mem_hndl
                  |L1.15986|
003e72  e110              B        |L1.16534|
                  |L1.15988|
;;;6582   			//plazma++;
;;;6583   			}
;;;6584   		}
;;;6585   	else bat[in]._cnt_wrk=10;	
003e74  f04f000a          MOV      r0,#0xa
003e78  7360              STRB     r0,[r4,#0xd]
003e7a  e10c              B        |L1.16534|
                  |L1.15996|
;;;6586   	}	
;;;6587   
;;;6588   else if(bat[in]._Ib<(-IKB))
003e7c  da40              BGE      |L1.16128|
;;;6589   	{
;;;6590   	if(bat[in]._cnt_wrk)
003e7e  7b60              LDRB     r0,[r4,#0xd]
003e80  b3f0              CBZ      r0,|L1.16128|
;;;6591   		{
;;;6592   		bat[in]._cnt_wrk--;
003e82  f1a00001          SUB      r0,r0,#1
003e86  b2c0              UXTB     r0,r0
003e88  7360              STRB     r0,[r4,#0xd]
;;;6593   		if((bat[in]._cnt_wrk==0)&&(bat[in]._wrk==0)) 
003e8a  bbc8              CBNZ     r0,|L1.16128|
003e8c  7ba0              LDRB     r0,[r4,#0xe]
003e8e  bbb8              CBNZ     r0,|L1.16128|
;;;6594   			{
;;;6595   			bat[in]._wrk=1;
003e90  f04f0001          MOV      r0,#1
003e94  73a0              STRB     r0,[r4,#0xe]
;;;6596   
;;;6597   				{
;;;6598   				char temp;
;;;6599   				signed short temp_temp;
;;;6600   				temp_temp=bat[in]._u_old[((bat_u_old_cnt+1)&0x07)];
003e96  4871              LDR      r0,|L1.16476|
003e98  8800              LDRH     r0,[r0,#0]  ; bat_u_old_cnt
003e9a  f1000001          ADD      r0,r0,#1
003e9e  f0000007          AND      r0,r0,#7
003ea2  eb040040          ADD      r0,r4,r0,LSL #1
003ea6  8c00              LDRH     r0,[r0,#0x20]
003ea8  9000              STR      r0,[sp,#0]
;;;6601   			 
;;;6602   				temp=LPC_RTC->YEAR;
003eaa  4e6d              LDR      r6,|L1.16480|
003eac  8bb0              LDRH     r0,[r6,#0x1c]
003eae  9001              STR      r0,[sp,#4]
;;;6603   				gran_char((signed char*)&temp,1,99);
003eb0  f04f0263          MOV      r2,#0x63
003eb4  f04f0101          MOV      r1,#1
003eb8  a801              ADD      r0,sp,#4
003eba  f7fffffe          BL       gran_char
;;;6604   				*((char*)(&(bat[in]._wrk_date[0])))=temp;
003ebe  f104041c          ADD      r4,r4,#0x1c
003ec2  f89d0004          LDRB     r0,[sp,#4]
003ec6  7620              STRB     r0,[r4,#0x18]
;;;6605   			
;;;6606   				temp=LPC_RTC->MONTH;
003ec8  7e30              LDRB     r0,[r6,#0x18]
003eca  9001              STR      r0,[sp,#4]
;;;6607   				gran_char((signed char*)&temp,1,12);
003ecc  f04f020c          MOV      r2,#0xc
003ed0  f04f0101          MOV      r1,#1
003ed4  a801              ADD      r0,sp,#4
003ed6  f7fffffe          BL       gran_char
;;;6608   				*(((char*)(&(bat[in]._wrk_date[0])))+1)=temp;
003eda  f89d0004          LDRB     r0,[sp,#4]
003ede  7660              STRB     r0,[r4,#0x19]
;;;6609   			
;;;6610   				temp=LPC_RTC->DOM;
003ee0  7b30              LDRB     r0,[r6,#0xc]
003ee2  9001              STR      r0,[sp,#4]
;;;6611   				gran_char((signed char*)&temp,1,31);
003ee4  221f              MOVS     r2,#0x1f
003ee6  2101              MOVS     r1,#1
003ee8  a801              ADD      r0,sp,#4
003eea  f7fffffe          BL       gran_char
;;;6612   				*(((char*)(&(bat[in]._wrk_date[0])))+2)=temp;			
003eee  f89d0004          LDRB     r0,[sp,#4]
003ef2  76a0              STRB     r0,[r4,#0x1a]
;;;6613   				
;;;6614   				*(((char*)(&(bat[in]._wrk_date[0])))+3)=*((char*)&temp_temp);
003ef4  f89d0000          LDRB     r0,[sp,#0]
003ef8  76e0              STRB     r0,[r4,#0x1b]
;;;6615   
;;;6616   				temp=LPC_RTC->HOUR;
003efa  7a30              LDRB     r0,[r6,#8]
003efc  9001              STR      r0,[sp,#4]
;;;6617   				gran_char((signed char*)&temp,0,23);
003efe  e000              B        |L1.16130|
                  |L1.16128|
003f00  e0c9              B        |L1.16534|
                  |L1.16130|
003f02  2217              MOVS     r2,#0x17
003f04  2100              MOVS     r1,#0
003f06  a801              ADD      r0,sp,#4
003f08  f7fffffe          BL       gran_char
;;;6618   				*((char*)(&(bat[in]._wrk_date[1])))=temp;
003f0c  f89d0004          LDRB     r0,[sp,#4]
003f10  7720              STRB     r0,[r4,#0x1c]
;;;6619                  	
;;;6620   				temp=LPC_RTC->MIN;
003f12  7930              LDRB     r0,[r6,#4]
003f14  9001              STR      r0,[sp,#4]
;;;6621   				gran_char((signed char*)&temp,0,59);
003f16  e0a5              B        |L1.16484|
                  |L1.16152|
003f18  4176746f          DCB      "Avtomat #4 is OFF",0
003f1c  6d617420
003f20  23342069
003f24  73204f46
003f28  4600    
003f2a  00                DCB      0
003f2b  00                DCB      0
                  |L1.16172|
003f2c  4176746f          DCB      "Avtomat #5 is OFF",0
003f30  6d617420
003f34  23352069
003f38  73204f46
003f3c  4600    
003f3e  00                DCB      0
003f3f  00                DCB      0
                  |L1.16192|
003f40  4176746f          DCB      "Avtomat #6 is OFF",0
003f44  6d617420
003f48  23362069
003f4c  73204f46
003f50  4600    
003f52  00                DCB      0
003f53  00                DCB      0
                  |L1.16212|
003f54  4176746f          DCB      "Avtomat #7 is OFF",0
003f58  6d617420
003f5c  23372069
003f60  73204f46
003f64  4600    
003f66  00                DCB      0
003f67  00                DCB      0
                  |L1.16232|
003f68  4176746f          DCB      "Avtomat #8 is OFF",0
003f6c  6d617420
003f70  23382069
003f74  73204f46
003f78  4600    
003f7a  00                DCB      0
003f7b  00                DCB      0
                  |L1.16252|
003f7c  4176746f          DCB      "Avtomat #9 is OFF",0
003f80  6d617420
003f84  23392069
003f88  73204f46
003f8c  4600    
003f8e  00                DCB      0
003f8f  00                DCB      0
                  |L1.16272|
003f90  4176746f          DCB      "Avtomat #1 is ON ",0
003f94  6d617420
003f98  23312069
003f9c  73204f4e
003fa0  2000    
003fa2  00                DCB      0
003fa3  00                DCB      0
                  |L1.16292|
003fa4  4176746f          DCB      "Avtomat #2 is ON ",0
003fa8  6d617420
003fac  23322069
003fb0  73204f4e
003fb4  2000    
003fb6  00                DCB      0
003fb7  00                DCB      0
                  |L1.16312|
003fb8  4176746f          DCB      "Avtomat #3 is ON ",0
003fbc  6d617420
003fc0  23332069
003fc4  73204f4e
003fc8  2000    
003fca  00                DCB      0
003fcb  00                DCB      0
                  |L1.16332|
003fcc  4176746f          DCB      "Avtomat #4 is ON ",0
003fd0  6d617420
003fd4  23342069
003fd8  73204f4e
003fdc  2000    
003fde  00                DCB      0
003fdf  00                DCB      0
                  |L1.16352|
003fe0  4176746f          DCB      "Avtomat #5 is ON ",0
003fe4  6d617420
003fe8  23352069
003fec  73204f4e
003ff0  2000    
003ff2  00                DCB      0
003ff3  00                DCB      0
                  |L1.16372|
003ff4  4176746f          DCB      "Avtomat #6 is ON ",0
003ff8  6d617420
003ffc  23362069
004000  73204f4e
004004  2000    
004006  00                DCB      0
004007  00                DCB      0
                  |L1.16392|
004008  4176746f          DCB      "Avtomat #7 is ON ",0
00400c  6d617420
004010  23372069
004014  73204f4e
004018  2000    
00401a  00                DCB      0
00401b  00                DCB      0
                  |L1.16412|
00401c  4176746f          DCB      "Avtomat #8 is ON ",0
004020  6d617420
004024  23382069
004028  73204f4e
00402c  2000    
00402e  00                DCB      0
00402f  00                DCB      0
                  |L1.16432|
004030  4176746f          DCB      "Avtomat #9 is ON ",0
004034  6d617420
004038  23392069
00403c  73204f4e
004040  2000    
004042  00                DCB      0
004043  00                DCB      0
                  |L1.16452|
                          DCD      bat
                  |L1.16456|
                          DCD      mess_data
                  |L1.16460|
                          DCD      ||area_number.23||+0x94
                  |L1.16464|
                          DCD      IZMAX
                  |L1.16468|
                          DCD      main_10Hz_cnt
                  |L1.16472|
                          DCD      IKB
                  |L1.16476|
                          DCD      bat_u_old_cnt
                  |L1.16480|
                          DCD      0x40024020
                  |L1.16484|
004064  223b              MOVS     r2,#0x3b
004066  2100              MOVS     r1,#0
004068  a801              ADD      r0,sp,#4
00406a  f7fffffe          BL       gran_char
;;;6622   				*(((char*)(&(bat[in]._wrk_date[1])))+1)=temp;
00406e  f89d0004          LDRB     r0,[sp,#4]
004072  7760              STRB     r0,[r4,#0x1d]
;;;6623   	          
;;;6624   				temp=LPC_RTC->SEC;
004074  7830              LDRB     r0,[r6,#0]
004076  9001              STR      r0,[sp,#4]
;;;6625   				gran_char((signed char*)&temp,0,59);
004078  223b              MOVS     r2,#0x3b
00407a  2100              MOVS     r1,#0
00407c  a801              ADD      r0,sp,#4
00407e  f7fffffe          BL       gran_char
;;;6626   				*(((char*)(&(bat[in]._wrk_date[1])))+2)=temp;
004082  f89d0004          LDRB     r0,[sp,#4]
004086  77a0              STRB     r0,[r4,#0x1e]
;;;6627   			
;;;6628   				*(((char*)(&(bat[in]._wrk_date[1])))+3)=*(((char*)&temp_temp)+1);
004088  f89d0001          LDRB     r0,[sp,#1]
00408c  77e0              STRB     r0,[r4,#0x1f]
;;;6629   				bat[in]._Iintegr=0;		//—˜ÂÚ˜ËÍ ‰ÂÒˇÚÍÓ‚ ÏËÎË‡ÏÔÂÒÂÍÛÌ‰
00408e  8027              STRH     r7,[r4,#0]
;;;6630   				bat[in]._Iintegr_=0;	//—˜ÂÚ˜ËÍ ÒÓÚÂÌ ÏËÎË‡ÏÔÂ˜‡ÒÓ‚
004090  8067              STRH     r7,[r4,#2]
004092  f1a4041c          SUB      r4,r4,#0x1c
                  |L1.16534|
;;;6631   				}
;;;6632   	
;;;6633   			}
;;;6634   
;;;6635   		}
;;;6636   	else bat[in]._cnt_wrk=0;	 
;;;6637   	
;;;6638   	}					
;;;6639   
;;;6640   /*
;;;6641   if(Ibat>=(-IKB))
;;;6642   	{
;;;6643   	if(cnt_wrk<10)
;;;6644   		{
;;;6645   		cnt_wrk++;
;;;6646   		if((cnt_wrk>=10)&&(wrk!=wrkOFF)) 
;;;6647   			{
;;;6648   			wrk=wrkOFF;
;;;6649   			//beep_init(0x7L,'O');
;;;6650   			wrk_mem_hndl(ibat_integr);
;;;6651   			}
;;;6652   		}
;;;6653   	else cnt_wrk=10;	
;;;6654   	}	
;;;6655   
;;;6656   else if((Ibat<(-IKB))&&(spc_stat!=spc_KE))
;;;6657   	{
;;;6658   	if(cnt_wrk)
;;;6659   		{
;;;6660   		cnt_wrk--;
;;;6661   		if((cnt_wrk==0)&&(wrk!=wrkON)) 
;;;6662   			{
;;;6663   			char temp;
;;;6664   			signed short temp_temp;
;;;6665   			temp_temp=ubat_old[((ubat_old_cnt+1)&0x07)];
;;;6666   			 
;;;6667   			wrk=wrkON;
;;;6668   			
;;;6669   			temp=_year;
;;;6670   			gran_char(&temp,1,99);
;;;6671   			*((char*)(&(wrk_date[0])))=temp;
;;;6672   			
;;;6673   			temp=_month;
;;;6674   			gran_char(&temp,1,12);
;;;6675   			*(((char*)(&(wrk_date[0])))+1)=temp;
;;;6676   			
;;;6677   			temp=_date;
;;;6678   			gran_char(&temp,1,31);
;;;6679   			*(((char*)(&(wrk_date[0])))+2)=temp;			
;;;6680   				
;;;6681   			*(((char*)(&(wrk_date[0])))+3)=*((char*)&temp_temp);
;;;6682   
;;;6683   			temp=_hour;
;;;6684   			gran_char(&temp,0,23);
;;;6685   			*((char*)(&(wrk_date[1])))=temp;
;;;6686                  
;;;6687   			temp=_min;
;;;6688   			gran_char(&temp,0,59);
;;;6689   			*(((char*)(&(wrk_date[1])))+1)=temp;
;;;6690   	          
;;;6691   			temp=_sec;
;;;6692   			gran_char(&temp,0,59);
;;;6693   			*(((char*)(&(wrk_date[1])))+2)=temp;
;;;6694   			
;;;6695   			*(((char*)(&(wrk_date[1])))+3)=*(((char*)&temp_temp)+1);
;;;6696   
;;;6697   			
;;;6698   			//beep_init(0xFL,'O'); 
;;;6699   			ibat_integr=0;
;;;6700   			ibat_integr_=0;
;;;6701   			}
;;;6702   		}
;;;6703   	else cnt_wrk=0;	 
;;;6704   	
;;;6705   	}
;;;6706   if(wrk==wrkON)
;;;6707   	{
;;;6708   	ibat_integr_+=-Ibat;
;;;6709   	if(ibat_integr_>=SEC_IN_HOUR*10L)
;;;6710   		{
;;;6711   		ibat_integr_-=SEC_IN_HOUR*10L;
;;;6712   		ibat_integr++;
;;;6713   		}
;;;6714   	}
;;;6715   
;;;6716   */
;;;6717   
;;;6718   
;;;6719   /*if(bat[in]._cnt_to_block)
;;;6720   	{
;;;6721   	bat[in]._cnt_to_block--;
;;;6722   	if(!(bat[in]._cnt_to_block))
;;;6723   		{
;;;6724   		//bat[in]._rel_stat=1;
;;;6725   		}
;;;6726   	}
;;;6727   */
;;;6728   
;;;6729   
;;;6730   
;;;6731   
;;;6732   //unsigned int tempUI,tempUI_;
;;;6733   //unsigned int b_zar; 
;;;6734   //char i;
;;;6735   //Ibat[0]=5000;                     
;;;6736   
;;;6737   
;;;6738                               
;;;6739   if(bat[in]._time_cnt==0)
;;;6740   	{
;;;6741   	bat[in]._zar_cnt+=(signed long)bat[in]._Ib;
;;;6742   	
;;;6743   	if(bat[in]._zar_cnt>=AH_CONSTANT)
004096  f64848a0          MOV      r8,#0x8ca0
00409a  f894003e          LDRB     r0,[r4,#0x3e]         ;6739
00409e  2800              CMP      r0,#0                 ;6739
0040a0  d17e              BNE      |L1.16800|
0040a2  f9b41008          LDRSH    r1,[r4,#8]            ;6741
0040a6  6960              LDR      r0,[r4,#0x14]         ;6741
0040a8  4408              ADD      r0,r0,r1              ;6741
0040aa  6160              STR      r0,[r4,#0x14]         ;6741
;;;6744   		{
;;;6745   		if(BAT_C_REAL[in]==0x5555) tempUS_=BAT_C_NOM[in];
;;;6746   		else tempUS_=BAT_C_REAL[in];
;;;6747   		
;;;6748   		b_zar=lc640_read_int(ADR_EE_BAT_ZAR_CNT[in]);
0040ac  f8df940c          LDR      r9,|L1.17596|
0040b0  f8dfa40c          LDR      r10,|L1.17600|
0040b4  4540              CMP      r0,r8                 ;6743
0040b6  db2a              BLT      |L1.16654|
0040b8  f93a1015          LDRSH    r1,[r10,r5,LSL #1]    ;6745
0040bc  f5a140aa          SUB      r0,r1,#0x5500         ;6745
0040c0  3855              SUBS     r0,r0,#0x55           ;6745
0040c2  d103              BNE      |L1.16588|
0040c4  48ff              LDR      r0,|L1.17604|
0040c6  f8306015          LDRH     r6,[r0,r5,LSL #1]     ;6745
0040ca  e001              B        |L1.16592|
                  |L1.16588|
0040cc  f83a6015          LDRH     r6,[r10,r5,LSL #1]    ;6746
                  |L1.16592|
0040d0  f8390015          LDRH     r0,[r9,r5,LSL #1]
0040d4  f7fffffe          BL       lc640_read_int
0040d8  b280              UXTH     r0,r0
;;;6749   
;;;6750   		if(b_zar<(tempUS_/**10*/))
0040da  42b0              CMP      r0,r6
0040dc  d20e              BCS      |L1.16636|
;;;6751   			{
;;;6752   			bat[in]._zar_cnt-=AH_CONSTANT;
0040de  6961              LDR      r1,[r4,#0x14]
0040e0  f5a14100          SUB      r1,r1,#0x8000
0040e4  f5a1614a          SUB      r1,r1,#0xca0
0040e8  6161              STR      r1,[r4,#0x14]
;;;6753   
;;;6754   			lc640_write_int(ADR_EE_BAT_ZAR_CNT[in],b_zar+1);
0040ea  f9392015          LDRSH    r2,[r9,r5,LSL #1]
0040ee  f1000001          ADD      r0,r0,#1
0040f2  b201              SXTH     r1,r0
0040f4  4610              MOV      r0,r2
0040f6  f7fffffe          BL       lc640_write_int
0040fa  e033              B        |L1.16740|
                  |L1.16636|
;;;6755   			}
;;;6756   		else if(b_zar>(tempUS_/**10*/))  
0040fc  d932              BLS      |L1.16740|
;;;6757   			{
;;;6758   			lc640_write_int(ADR_EE_BAT_ZAR_CNT[in],tempUS_);
0040fe  f9390015          LDRSH    r0,[r9,r5,LSL #1]
004102  b231              SXTH     r1,r6
004104  f7fffffe          BL       lc640_write_int
;;;6759   			bat[in]._zar_cnt=AH_CONSTANT;
004108  f8c48014          STR      r8,[r4,#0x14]
00410c  e02a              B        |L1.16740|
                  |L1.16654|
;;;6760   
;;;6761   			}
;;;6762   
;;;6763   		}
;;;6764   
;;;6765   	else if(bat[in]._zar_cnt<=-AH_CONSTANT)
00410e  49ee              LDR      r1,|L1.17608|
004110  4288              CMP      r0,r1
004112  dc27              BGT      |L1.16740|
;;;6766   		{
;;;6767   		if(BAT_C_REAL[in]==0x5555) tempUS_=BAT_C_NOM[in];
004114  f93a1015          LDRSH    r1,[r10,r5,LSL #1]
004118  f5a140aa          SUB      r0,r1,#0x5500
00411c  3855              SUBS     r0,r0,#0x55
00411e  d103              BNE      |L1.16680|
004120  48e8              LDR      r0,|L1.17604|
004122  f8306015          LDRH     r6,[r0,r5,LSL #1]
004126  e001              B        |L1.16684|
                  |L1.16680|
;;;6768   		else tempUS_=BAT_C_REAL[in];
004128  f83a6015          LDRH     r6,[r10,r5,LSL #1]
                  |L1.16684|
;;;6769   		
;;;6770   		b_zar=lc640_read_int(ADR_EE_BAT_ZAR_CNT[in]);
00412c  f8390015          LDRH     r0,[r9,r5,LSL #1]
004130  f7fffffe          BL       lc640_read_int
004134  b280              UXTH     r0,r0
;;;6771   
;;;6772   		if(b_zar>tempUS_)
004136  42b0              CMP      r0,r6
004138  d905              BLS      |L1.16710|
;;;6773   			{
;;;6774   			lc640_write_int(ADR_EE_BAT_ZAR_CNT[in],tempUS_);
00413a  f9390015          LDRSH    r0,[r9,r5,LSL #1]
00413e  b231              SXTH     r1,r6
004140  f7fffffe          BL       lc640_write_int
;;;6775   			b_zar=tempUS_;
004144  4630              MOV      r0,r6
                  |L1.16710|
;;;6776   			}
;;;6777   		if(b_zar)
004146  b158              CBZ      r0,|L1.16736|
;;;6778   			{
;;;6779   			bat[in]._zar_cnt+=AH_CONSTANT;
004148  6961              LDR      r1,[r4,#0x14]
00414a  4441              ADD      r1,r1,r8
00414c  6161              STR      r1,[r4,#0x14]
;;;6780   
;;;6781   			lc640_write_int(ADR_EE_BAT_ZAR_CNT[in],b_zar-1);
00414e  f9392015          LDRSH    r2,[r9,r5,LSL #1]
004152  f1a00001          SUB      r0,r0,#1
004156  b201              SXTH     r1,r0
004158  4610              MOV      r0,r2
00415a  f7fffffe          BL       lc640_write_int
00415e  e001              B        |L1.16740|
                  |L1.16736|
;;;6782   			}
;;;6783   		else 
;;;6784   			{
;;;6785   			bat[in]._zar_cnt=-AH_CONSTANT;
004160  48d9              LDR      r0,|L1.17608|
004162  6160              STR      r0,[r4,#0x14]
                  |L1.16740|
;;;6786   			}
;;;6787   
;;;6788   		}
;;;6789   
;;;6790   			
;;;6791   	tempUL=(unsigned long)lc640_read_int(ADR_EE_BAT_ZAR_CNT[in]);
004164  f8390015          LDRH     r0,[r9,r5,LSL #1]
004168  f7fffffe          BL       lc640_read_int
00416c  4601              MOV      r1,r0
;;;6792   	
;;;6793   	if(BAT_C_REAL[in]==0x5555) tempUL_=(unsigned long)BAT_C_NOM[in];
00416e  f93a0015          LDRSH    r0,[r10,r5,LSL #1]
004172  f5a042aa          SUB      r2,r0,#0x5500
004176  3a55              SUBS     r2,r2,#0x55
004178  d102              BNE      |L1.16768|
00417a  48d2              LDR      r0,|L1.17604|
00417c  f9300015          LDRSH    r0,[r0,r5,LSL #1]
                  |L1.16768|
;;;6794   	else tempUL_=(unsigned long)BAT_C_REAL[in];
;;;6795   		           	
;;;6796   	tempUL*=1000L;
004180  f44f727a          MOV      r2,#0x3e8
004184  fb01f102          MUL      r1,r1,r2
;;;6797   
;;;6798   
;;;6799   	if(tempUL_==0) tempUL=0;
004188  b168              CBZ      r0,|L1.16806|
;;;6800   	else tempUL/=tempUL_;
00418a  fbb1f0f0          UDIV     r0,r1,r0
                  |L1.16782|
;;;6801   
;;;6802   	tempUL/=10L;
00418e  f04f010a          MOV      r1,#0xa
004192  fbb0f0f1          UDIV     r0,r0,r1
;;;6803   
;;;6804   	bat[in]._zar=(unsigned short)tempUL;
004196  8220              STRH     r0,[r4,#0x10]
;;;6805   
;;;6806   	if(BAT_TYPE==1)
004198  48cc              LDR      r0,|L1.17612|
00419a  8800              LDRH     r0,[r0,#0]  ; BAT_TYPE
00419c  2801              CMP      r0,#1
00419e  e000              B        |L1.16802|
                  |L1.16800|
0041a0  e010              B        |L1.16836|
                  |L1.16802|
0041a2  d003              BEQ      |L1.16812|
0041a4  e008              B        |L1.16824|
                  |L1.16806|
0041a6  f04f0000          MOV      r0,#0                 ;6799
0041aa  e7f0              B        |L1.16782|
                  |L1.16812|
;;;6807   		{
;;;6808   		bat[in]._zar=lakb[in]._s_o_c;
0041ac  49c8              LDR      r1,|L1.17616|
0041ae  9802              LDR      r0,[sp,#8]
0041b0  eb010080          ADD      r0,r1,r0,LSL #2
0041b4  8a40              LDRH     r0,[r0,#0x12]
0041b6  8220              STRH     r0,[r4,#0x10]
                  |L1.16824|
;;;6809   		}
;;;6810   	
;;;6811   	gran((signed short*)&bat[in]._zar,0,100);
0041b8  f1040010          ADD      r0,r4,#0x10
0041bc  2264              MOVS     r2,#0x64
0041be  2100              MOVS     r1,#0
0041c0  f7fffffe          BL       gran
                  |L1.16836|
;;;6812        }
;;;6813   
;;;6814   
;;;6815   //œÓ‰Ò˜ÂÚ ÚÓÍ‡ ‡Áˇ‰‡ ·‡Ú‡ÂË      
;;;6816   if(bat[in]._wrk==1)
0041c4  7ba0              LDRB     r0,[r4,#0xe]
0041c6  2801              CMP      r0,#1
0041c8  d113              BNE      |L1.16882|
;;;6817   	{
;;;6818   	if(bat[in]._Iintegr<36000)
0041ca  8ba0              LDRH     r0,[r4,#0x1c]
0041cc  4540              CMP      r0,r8
0041ce  d20f              BCS      |L1.16880|
;;;6819   		{          
;;;6820   		bat[in]._Iintegr+=abs(bat[in]._Ib);
0041d0  f9b40008          LDRSH    r0,[r4,#8]
0041d4  f7fffffe          BL       abs
0041d8  8ba1              LDRH     r1,[r4,#0x1c]
0041da  4408              ADD      r0,r0,r1
0041dc  b280              UXTH     r0,r0
0041de  83a0              STRH     r0,[r4,#0x1c]
;;;6821   		if(bat[in]._Iintegr>=36000)
0041e0  4540              CMP      r0,r8
0041e2  d306              BCC      |L1.16882|
;;;6822   			{
;;;6823   			bat[in]._Iintegr=0;		//—˜ÂÚ˜ËÍ ‰ÂÒˇÚÍÓ‚ ÏËÎË‡ÏÔÂÒÂÍÛÌ‰
0041e4  83a7              STRH     r7,[r4,#0x1c]
;;;6824   			bat[in]._Iintegr_++;	//—˜ÂÚ˜ËÍ ÒÓÚÂÌ ÏËÎË‡ÏÔÂ˜‡ÒÓ‚
0041e6  8be0              LDRH     r0,[r4,#0x1e]
0041e8  f1000001          ADD      r0,r0,#1
0041ec  83e0              STRH     r0,[r4,#0x1e]
0041ee  e000              B        |L1.16882|
                  |L1.16880|
;;;6825   			}
;;;6826   		}
;;;6827   	else 
;;;6828   		{
;;;6829   		bat[in]._Iintegr=0;
0041f0  83a7              STRH     r7,[r4,#0x1c]
                  |L1.16882|
;;;6830   		}	
;;;6831   	} 
;;;6832   	    
;;;6833   #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;6834   if((t_ext[0]>TBATSIGN)&&(!ND_EXT[0]))	
0041f2  f8df92e0          LDR      r9,|L1.17620|
0041f6  49b8              LDR      r1,|L1.17624|
0041f8  f8dfa2e0          LDR      r10,|L1.17628|
0041fc  f9b90000          LDRSH    r0,[r9,#0]  ; t_ext
004200  f9b11000          LDRSH    r1,[r1,#0]  ; TBATSIGN
004204  4288              CMP      r0,r1
004206  dd02              BLE      |L1.16910|
004208  f89a0000          LDRB     r0,[r10,#0]  ; ND_EXT
00420c  b3e8              CBZ      r0,|L1.17034|
                  |L1.16910|
;;;6835   	{
;;;6836   	bat[in]._sign_temper_cnt++;
;;;6837   	}
;;;6838   else 
;;;6839   	{
;;;6840   	bat[in]._sign_temper_cnt--;
00420e  f8b40040          LDRH     r0,[r4,#0x40]
004212  f1a00001          SUB      r0,r0,#1
004216  f8a40040          STRH     r0,[r4,#0x40]
                  |L1.16922|
;;;6841   	}
;;;6842   #else
;;;6843   if((bat[in]._Tb>TBATSIGN)&&(!bat[in]._nd))	
;;;6844   	{
;;;6845   	bat[in]._sign_temper_cnt++;
;;;6846   	}
;;;6847   else 
;;;6848   	{
;;;6849   	bat[in]._sign_temper_cnt--;
;;;6850   	}
;;;6851   #endif
;;;6852   gran(&bat[in]._sign_temper_cnt,0,600);
00421a  f1040040          ADD      r0,r4,#0x40
00421e  f44f7216          MOV      r2,#0x258
004222  2100              MOVS     r1,#0
004224  f7fffffe          BL       gran
;;;6853   if(bat[in]._sign_temper_cnt>=590)	bat[in]._temper_stat|=(1<<0);
004228  f9b40040          LDRSH    r0,[r4,#0x40]
00422c  f240264e          MOV      r6,#0x24e
004230  42b0              CMP      r0,r6
004232  db05              BLT      |L1.16960|
004234  f894103f          LDRB     r1,[r4,#0x3f]
004238  f0410101          ORR      r1,r1,#1
00423c  f884103f          STRB     r1,[r4,#0x3f]
                  |L1.16960|
;;;6854   if(bat[in]._sign_temper_cnt<=10)	bat[in]._temper_stat&=~(1<<0);
004240  280a              CMP      r0,#0xa
004242  dc05              BGT      |L1.16976|
004244  f894003f          LDRB     r0,[r4,#0x3f]
004248  f0200001          BIC      r0,r0,#1
00424c  f884003f          STRB     r0,[r4,#0x3f]
                  |L1.16976|
;;;6855   
;;;6856   #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;6857   if((t_ext[0]>TBATMAX)&&(!ND_EXT[0]))	
004250  49a3              LDR      r1,|L1.17632|
004252  f9b90000          LDRSH    r0,[r9,#0]  ; t_ext
004256  f9b11000          LDRSH    r1,[r1,#0]  ; TBATMAX
00425a  4288              CMP      r0,r1
00425c  dd02              BLE      |L1.16996|
00425e  f89a0000          LDRB     r0,[r10,#0]  ; ND_EXT
004262  b3b0              CBZ      r0,|L1.17106|
                  |L1.16996|
;;;6858   	{
;;;6859   	bat[in]._max_temper_cnt++;
;;;6860   	}
;;;6861   else 
;;;6862   	{
;;;6863   	bat[in]._max_temper_cnt--;
004264  f8b40042          LDRH     r0,[r4,#0x42]
004268  f1a00001          SUB      r0,r0,#1
00426c  f8a40042          STRH     r0,[r4,#0x42]
                  |L1.17008|
;;;6864   	}
;;;6865   #else
;;;6866   if((bat[in]._Tb>TBATMAX)&&(!bat[in]._nd))	
;;;6867   	{
;;;6868   	bat[in]._max_temper_cnt++;
;;;6869   	}
;;;6870   else 
;;;6871   	{
;;;6872   	bat[in]._max_temper_cnt--;
;;;6873   	}
;;;6874   #endif
;;;6875   
;;;6876   gran(&bat[in]._max_temper_cnt,0,600);
004270  f44f7916          MOV      r9,#0x258
004274  f1040042          ADD      r0,r4,#0x42
004278  464a              MOV      r2,r9
00427a  2100              MOVS     r1,#0
00427c  f7fffffe          BL       gran
;;;6877   if(bat[in]._max_temper_cnt>=590)	bat[in]._temper_stat|=(1<<1);
004280  f9b40042          LDRSH    r0,[r4,#0x42]
004284  42b0              CMP      r0,r6
004286  db07              BLT      |L1.17048|
004288  e000              B        |L1.17036|
                  |L1.17034|
00428a  e023              B        |L1.17108|
                  |L1.17036|
00428c  f894103f          LDRB     r1,[r4,#0x3f]
004290  f0410102          ORR      r1,r1,#2
004294  f884103f          STRB     r1,[r4,#0x3f]
                  |L1.17048|
;;;6878   if(bat[in]._max_temper_cnt<=10)	bat[in]._temper_stat&=~(1<<1);
004298  280a              CMP      r0,#0xa
00429a  dc05              BGT      |L1.17064|
00429c  f894003f          LDRB     r0,[r4,#0x3f]
0042a0  f0200002          BIC      r0,r0,#2
0042a4  f884003f          STRB     r0,[r4,#0x3f]
                  |L1.17064|
;;;6879   
;;;6880   
;;;6881   
;;;6882   //œÓ‰Ò˜ÂÚ Ì‡‡·ÓÚÍË ·‡Ú‡ÂË
;;;6883   if(bat[in]._resurs_cnt<36000)
0042a8  6c60              LDR      r0,[r4,#0x44]
0042aa  4540              CMP      r0,r8
0042ac  da20              BGE      |L1.17136|
;;;6884   	{               
;;;6885   	bat[in]._resurs_cnt++;
0042ae  f1000001          ADD      r0,r0,#1
0042b2  6460              STR      r0,[r4,#0x44]
;;;6886   	if(bat[in]._resurs_cnt>=36000)
0042b4  4540              CMP      r0,r8
0042b6  db1c              BLT      |L1.17138|
;;;6887   		{
;;;6888   		bat[in]._resurs_cnt=0;
0042b8  6467              STR      r7,[r4,#0x44]
;;;6889   		lc640_write_int(ADR_EE_BAT_RESURS[in],lc640_read_int(ADR_EE_BAT_RESURS[in])+1);
0042ba  4e8a              LDR      r6,|L1.17636|
0042bc  f8360015          LDRH     r0,[r6,r5,LSL #1]
0042c0  f7fffffe          BL       lc640_read_int
0042c4  1c40              ADDS     r0,r0,#1
0042c6  b201              SXTH     r1,r0
0042c8  f9360015          LDRSH    r0,[r6,r5,LSL #1]
0042cc  f7fffffe          BL       lc640_write_int
0042d0  e00f              B        |L1.17138|
                  |L1.17106|
0042d2  e006              B        |L1.17122|
                  |L1.17108|
0042d4  f8b40040          LDRH     r0,[r4,#0x40]         ;6836
0042d8  f1000001          ADD      r0,r0,#1              ;6836
0042dc  f8a40040          STRH     r0,[r4,#0x40]         ;6836
0042e0  e79b              B        |L1.16922|
                  |L1.17122|
0042e2  f8b40042          LDRH     r0,[r4,#0x42]         ;6859
0042e6  f1000001          ADD      r0,r0,#1              ;6859
0042ea  f8a40042          STRH     r0,[r4,#0x42]         ;6859
0042ee  e7bf              B        |L1.17008|
                  |L1.17136|
;;;6890   		}
;;;6891   	}
;;;6892   else bat[in]._resurs_cnt=0;
0042f0  6467              STR      r7,[r4,#0x44]
                  |L1.17138|
;;;6893   
;;;6894   
;;;6895   #ifndef UKU_220_V2
;;;6896   #ifndef UKU_GLONASS
;;;6897   #ifndef UKU_6U
;;;6898   //#ifndef UKU_220
;;;6899   if(UBM_AV)
0042f2  4e7d              LDR      r6,|L1.17640|
0042f4  8830              LDRH     r0,[r6,#0]  ; UBM_AV
0042f6  2800              CMP      r0,#0
0042f8  d05e              BEQ      |L1.17336|
;;;6900        {
;;;6901        signed short temp_SS;
;;;6902   #ifdef UKU_220
;;;6903   temp_SS=bat[in]._Ub/2;
;;;6904   #else
;;;6905        if(U0B<600)
0042fa  487c              LDR      r0,|L1.17644|
0042fc  f9b00000          LDRSH    r0,[r0,#0]  ; U0B
004300  4548              CMP      r0,r9
004302  da08              BGE      |L1.17174|
;;;6906             {
;;;6907             temp_SS=bat[in]._Ub/4;
004304  f9b40002          LDRSH    r0,[r4,#2]
004308  ea4f71e0          ASR      r1,r0,#31
00430c  eb007091          ADD      r0,r0,r1,LSR #30
004310  ea4f00a0          ASR      r0,r0,#2
004314  e006              B        |L1.17188|
                  |L1.17174|
;;;6908             }
;;;6909        else temp_SS=bat[in]._Ub/5;
004316  f9b40002          LDRSH    r0,[r4,#2]
00431a  f04f0105          MOV      r1,#5
00431e  fb90f0f1          SDIV     r0,r0,r1
004322  b200              SXTH     r0,r0
                  |L1.17188|
;;;6910   	
;;;6911   	temp_SS+=temp_SS;     
004324  ea4f0040          LSL      r0,r0,#1
;;;6912   #endif
;;;6913        temp_SS-=(bat[in]._Ubm);
004328  88a1              LDRH     r1,[r4,#4]
00432a  eba00001          SUB      r0,r0,r1
00432e  b200              SXTH     r0,r0
;;;6914   
;;;6915        temp_SS=abs(temp_SS);
004330  f7fffffe          BL       abs
;;;6916   
;;;6917        temp_SS*=10;
004334  eb000080          ADD      r0,r0,r0,LSL #2
004338  ea4f0040          LSL      r0,r0,#1
00433c  b200              SXTH     r0,r0
;;;6918   
;;;6919        temp_SS/=12;
00433e  f04f010c          MOV      r1,#0xc
004342  fb90f0f1          SDIV     r0,r0,r1
004346  b200              SXTH     r0,r0
;;;6920   
;;;6921        bat[in]._dUbm=temp_SS;
004348  80e0              STRH     r0,[r4,#6]
;;;6922   
;;;6923   
;;;6924        if(	(bat[in]._dUbm>UBM_AV) &&
00434a  f9b61000          LDRSH    r1,[r6,#0]  ; UBM_AV
00434e  4288              CMP      r0,r1
004350  dd34              BLE      |L1.17340|
;;;6925   		(abs(bat[in]._Ib)<(5*IKB)) &&
004352  f9b40008          LDRSH    r0,[r4,#8]
004356  f7fffffe          BL       abs
00435a  4601              MOV      r1,r0
00435c  4864              LDR      r0,|L1.17648|
00435e  f9b00000          LDRSH    r0,[r0,#0]  ; IKB
004362  eb000080          ADD      r0,r0,r0,LSL #2
004366  4281              CMP      r1,r0
004368  da28              BGE      |L1.17340|
;;;6926   		(bat[in]._Ub>((short)(((long)USIGN*115)/100))) &&
00436a  4862              LDR      r0,|L1.17652|
00436c  2173              MOVS     r1,#0x73
00436e  f9b00000          LDRSH    r0,[r0,#0]  ; USIGN
004372  4348              MULS     r0,r1,r0
004374  fb90f0fb          SDIV     r0,r0,r11
004378  f9b41002          LDRSH    r1,[r4,#2]
00437c  b200              SXTH     r0,r0
00437e  4288              CMP      r0,r1
004380  da1c              BGE      |L1.17340|
;;;6927   		(!(bat[in]._av & 2))  )
004382  f894003d          LDRB     r0,[r4,#0x3d]
004386  0780              LSLS     r0,r0,#30
004388  d418              BMI      |L1.17340|
;;;6928   		{
;;;6929   		bat[in]._cnt_as++;
00438a  f8b40048          LDRH     r0,[r4,#0x48]
00438e  f1000001          ADD      r0,r0,#1
004392  b200              SXTH     r0,r0
004394  f8a40048          STRH     r0,[r4,#0x48]
;;;6930   		if(bat[in]._cnt_as==3000)
004398  f5a06130          SUB      r1,r0,#0xb00
00439c  39b8              SUBS     r1,r1,#0xb8
00439e  d103              BNE      |L1.17320|
;;;6931   			{
;;;6932   			avar_bat_as_hndl(in,1);
0043a0  2101              MOVS     r1,#1
0043a2  4628              MOV      r0,r5
0043a4  f7fffffe          BL       avar_bat_as_hndl
                  |L1.17320|
;;;6933   			}
;;;6934   		if(bat[in]._cnt_as>=3005) bat[in]._cnt_as=3005;
0043a8  f9b41048          LDRSH    r1,[r4,#0x48]
0043ac  f64030bd          MOV      r0,#0xbbd
0043b0  4281              CMP      r1,r0
0043b2  db01              BLT      |L1.17336|
0043b4  f8a40048          STRH     r0,[r4,#0x48]
                  |L1.17336|
;;;6935   		}
;;;6936   	else 
;;;6937   		{
;;;6938   		bat[in]._cnt_as=0;
;;;6939   		}
;;;6940        
;;;6941        }
;;;6942   #endif 
;;;6943   #endif 
;;;6944   #endif
;;;6945   
;;;6946   }
0043b8  e8bd8ffe          POP      {r1-r11,pc}
                  |L1.17340|
0043bc  f8a47048          STRH     r7,[r4,#0x48]         ;6938
0043c0  e7fa              B        |L1.17336|
;;;6947   
                          ENDP

                  u_necc_hndl PROC
;;;6951   //-----------------------------------------------
;;;6952   void u_necc_hndl(void)
0043c2  b5f8              PUSH     {r3-r7,lr}
;;;6953   {
;;;6954   signed long temp_L;
;;;6955   signed long temp_SL;
;;;6956   //signed short temp_SS;
;;;6957   
;;;6958   //char i;
;;;6959   
;;;6960   //temp_SS=0;
;;;6961   signed short t[2];
;;;6962   
;;;6963   
;;;6964   
;;;6965   
;;;6966   #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;6967   
;;;6968   if(!TERMOKOMPENS)
0043c4  484c              LDR      r0,|L1.17656|
;;;6969   	{
;;;6970   	//u_necc=U0B;
;;;6971   	u_necc=UB20;
;;;6972   	}
;;;6973   else
;;;6974   	{
;;;6975   	if(ND_EXT[0])t[0]=20;
;;;6976   	else t[0]=t_ext[0];
;;;6977   
;;;6978   	mat_temper=t[0];
;;;6979   			
;;;6980   	if(mat_temper<0)temp_SL=UB0; 
;;;6981   	else 
;;;6982   		{
;;;6983   		if(mat_temper>40)mat_temper=40; 
;;;6984   		temp_SL=(UB20-UB0)*10;
;;;6985   		temp_SL*=mat_temper;
;;;6986   		temp_SL/=200;
;;;6987   		temp_SL+=UB0;
;;;6988   		}
;;;6989   	if((spc_stat==spcVZ)&&(sk_stat[0]==1))
0043c6  4d4f              LDR      r5,|L1.17668|
0043c8  4c4f              LDR      r4,|L1.17672|
0043ca  8801              LDRH     r1,[r0,#0]            ;6968  ; TERMOKOMPENS
0043cc  484b              LDR      r0,|L1.17660|
0043ce  f9b03000          LDRSH    r3,[r0,#0]            ;6971
;;;6990   		{
;;;6991   		temp_SL=UVZ;
0043d2  484b              LDR      r0,|L1.17664|
0043d4  f9b02000          LDRSH    r2,[r0,#0]
0043d8  b139              CBZ      r1,|L1.17386|
0043da  4840              LDR      r0,|L1.17628|
0043dc  7800              LDRB     r0,[r0,#0]            ;6975  ; ND_EXT
0043de  b130              CBZ      r0,|L1.17390|
0043e0  f04f0014          MOV      r0,#0x14              ;6975
0043e4  f8ad0000          STRH     r0,[sp,#0]            ;6975
0043e8  e005              B        |L1.17398|
                  |L1.17386|
0043ea  8023              STRH     r3,[r4,#0]            ;6971
0043ec  e028              B        |L1.17472|
                  |L1.17390|
0043ee  4839              LDR      r0,|L1.17620|
0043f0  8800              LDRH     r0,[r0,#0]            ;6976  ; t_ext
0043f2  f8ad0000          STRH     r0,[sp,#0]            ;6976
                  |L1.17398|
0043f6  4e45              LDR      r6,|L1.17676|
0043f8  f9bd1000          LDRSH    r1,[sp,#0]            ;6978
0043fc  6031              STR      r1,[r6,#0]            ;6978  ; mat_temper
0043fe  4844              LDR      r0,|L1.17680|
004400  2900              CMP      r1,#0                 ;6980
004402  f9b00000          LDRSH    r0,[r0,#0]            ;6980
004406  db12              BLT      |L1.17454|
004408  2928              CMP      r1,#0x28              ;6983
00440a  dd02              BLE      |L1.17426|
00440c  f04f0128          MOV      r1,#0x28              ;6983
004410  6031              STR      r1,[r6,#0]            ;6983  ; mat_temper
                  |L1.17426|
004412  eba30100          SUB      r1,r3,r0              ;6984
004416  eb010181          ADD      r1,r1,r1,LSL #2       ;6984
00441a  ea4f0141          LSL      r1,r1,#1              ;6984
00441e  6833              LDR      r3,[r6,#0]            ;6985  ; mat_temper
004420  fb01f103          MUL      r1,r1,r3              ;6985
004424  f04f03c8          MOV      r3,#0xc8              ;6986
004428  fb91f1f3          SDIV     r1,r1,r3              ;6986
00442c  4408              ADD      r0,r0,r1              ;6987
                  |L1.17454|
00442e  7d29              LDRB     r1,[r5,#0x14]         ;6989  ; spc_stat
004430  2902              CMP      r1,#2                 ;6989
004432  d104              BNE      |L1.17470|
004434  4937              LDR      r1,|L1.17684|
004436  7809              LDRB     r1,[r1,#0]            ;6989  ; sk_stat
004438  2901              CMP      r1,#1                 ;6989
00443a  d100              BNE      |L1.17470|
00443c  4610              MOV      r0,r2
                  |L1.17470|
;;;6992   		}
;;;6993   	u_necc=(unsigned int)temp_SL;
00443e  8020              STRH     r0,[r4,#0]
                  |L1.17472|
;;;6994   	///u_necc=3456;
;;;6995   	}  
;;;6996   
;;;6997   //u_necc=2355;
;;;6998   
;;;6999   if((speedChIsOn)||(sp_ch_stat==scsWRK))
004440  4835              LDR      r0,|L1.17688|
004442  8800              LDRH     r0,[r0,#0]  ; speedChIsOn
004444  b918              CBNZ     r0,|L1.17486|
004446  4835              LDR      r0,|L1.17692|
004448  7800              LDRB     r0,[r0,#0]  ; sp_ch_stat
00444a  2802              CMP      r0,#2
00444c  d102              BNE      |L1.17492|
                  |L1.17486|
;;;7000   	{
;;;7001   	u_necc=speedChrgVolt;
00444e  4834              LDR      r0,|L1.17696|
004450  8800              LDRH     r0,[r0,#0]  ; speedChrgVolt
004452  8020              STRH     r0,[r4,#0]
                  |L1.17492|
;;;7002   	}
;;;7003   if(hv_vz_stat==hvsWRK)
004454  4833              LDR      r0,|L1.17700|
004456  7800              LDRB     r0,[r0,#0]  ; hv_vz_stat
004458  2805              CMP      r0,#5
00445a  d100              BNE      |L1.17502|
;;;7004   	{
;;;7005   	u_necc=UVZ;
00445c  8022              STRH     r2,[r4,#0]
                  |L1.17502|
;;;7006   	}
;;;7007   if(vz1_stat==vz1sWRK)
00445e  f8950020          LDRB     r0,[r5,#0x20]  ; vz1_stat
004462  280a              CMP      r0,#0xa
004464  d102              BNE      |L1.17516|
;;;7008   	{
;;;7009   	u_necc=UZ_U;
004466  4830              LDR      r0,|L1.17704|
004468  8800              LDRH     r0,[r0,#0]  ; UZ_U
00446a  8020              STRH     r0,[r4,#0]
                  |L1.17516|
;;;7010   	}
;;;7011   if(vz2_stat==vz2sWRK1)
00446c  f8950023          LDRB     r0,[r5,#0x23]  ; vz2_stat
004470  280a              CMP      r0,#0xa
004472  d102              BNE      |L1.17530|
;;;7012   	{
;;;7013   	u_necc=FZ_U1;
004474  492d              LDR      r1,|L1.17708|
004476  8809              LDRH     r1,[r1,#0]  ; FZ_U1
004478  8021              STRH     r1,[r4,#0]
                  |L1.17530|
;;;7014   	}
;;;7015   if(vz2_stat==vz2sWRK2)
00447a  280b              CMP      r0,#0xb
00447c  d102              BNE      |L1.17540|
;;;7016   	{
;;;7017   	u_necc=FZ_U2;
00447e  482c              LDR      r0,|L1.17712|
004480  8800              LDRH     r0,[r0,#0]  ; FZ_U2
004482  8020              STRH     r0,[r4,#0]
                  |L1.17540|
;;;7018   	}
;;;7019   if(mess_find_unvol(MESS2UNECC_HNDL))
004484  20be              MOVS     r0,#0xbe
004486  f7fffffe          BL       mess_find_unvol
00448a  b128              CBZ      r0,|L1.17560|
;;;7020   	{		
;;;7021   	if(mess_data[0]==PARAM_UNECC_SET)
00448c  4829              LDR      r0,|L1.17716|
00448e  6801              LDR      r1,[r0,#0]  ; mess_data
004490  29bf              CMP      r1,#0xbf
004492  d101              BNE      |L1.17560|
;;;7022   		{
;;;7023   		u_necc=mess_data[1];
004494  6840              LDR      r0,[r0,#4]  ; mess_data
004496  8020              STRH     r0,[r4,#0]
                  |L1.17560|
;;;7024   		}		
;;;7025   	}
;;;7026   //if(ICA_EN)u_necc+=ica_u_necc;
;;;7027   #endif
;;;7028   
;;;7029   
;;;7030   #ifndef UKU_220_IPS_TERMOKOMPENSAT
;;;7031   
;;;7032   #ifndef UKU_TELECORE2015
;;;7033   #ifndef UKU_TELECORE2017
;;;7034   if(unh_cnt0<10)
;;;7035   	{
;;;7036   	unh_cnt0++;
;;;7037   	if(unh_cnt0>=10)
;;;7038   		{
;;;7039   		unh_cnt0=0;
;;;7040   		b1Hz_unh=1;
;;;7041   		}
;;;7042   	}
;;;7043   
;;;7044   if(unh_cnt1<5)
;;;7045   	{
;;;7046   	unh_cnt1++;
;;;7047   	if(unh_cnt1==5)
;;;7048   		{
;;;7049   		unh_cnt1=0;
;;;7050   //		b2Hz_unh=1;
;;;7051   		}
;;;7052   	} 
;;;7053   
;;;7054   
;;;7055   
;;;7056   if(mess_find_unvol(MESS2UNECC_HNDL))
;;;7057   	{		
;;;7058   	if(mess_data[0]==PARAM_UNECC_SET)
;;;7059   		{
;;;7060   		u_necc=mess_data[1];
;;;7061   		}		
;;;7062   	}
;;;7063   
;;;7064   
;;;7065   else if(b1Hz_unh)
;;;7066   	{
;;;7067   	
;;;7068   	if((BAT_IS_ON[0]!=bisON) && (BAT_IS_ON[1]!=bisON))
;;;7069   		{
;;;7070   		
;;;7071   		u_necc=U0B;
;;;7072   		#ifdef IPS_SGEP_GAZPROM
;;;7073   		u_necc=UB0;
;;;7074   		#endif
;;;7075   		}
;;;7076   	else 
;;;7077   		{
;;;7078   		if(BAT_TYPE==0) //ÂÒÎË ·‡Ú‡Âˇ Ó·˚˜Ì‡ˇ
;;;7079   			{
;;;7080   			for(i=0;i<2;i++)
;;;7081   				{
;;;7082   				if(BAT_IS_ON[i]==bisON)
;;;7083   					{
;;;7084   					if(bat[i]._nd)t[i]=20;
;;;7085   					else t[i]=bat[i]._Tb;
;;;7086   					}
;;;7087   				else
;;;7088   					{
;;;7089   					t[i]=-20;
;;;7090   					}
;;;7091   				}
;;;7092   			if(t[0]>t[1])mat_temper=t[0];
;;;7093   			else mat_temper=t[1];
;;;7094   			
;;;7095   		
;;;7096   			if(mat_temper<0)temp_SL=UB0; 
;;;7097   			else 
;;;7098   				{
;;;7099   				if(mat_temper>40)mat_temper=40; 
;;;7100   				temp_SL=(UB20-UB0)*10;
;;;7101   				temp_SL*=mat_temper;
;;;7102   				temp_SL/=200;
;;;7103   				temp_SL+=UB0;
;;;7104   				}
;;;7105   			if((spc_stat==spcVZ)&&(sk_stat[0]==1))
;;;7106   				{
;;;7107   				temp_SL=UVZ;
;;;7108   				}
;;;7109   			u_necc=(unsigned int)temp_SL;
;;;7110   			}
;;;7111   		else if(BAT_TYPE==1) //ÂÒÎË ·‡Ú‡Âˇ ÍËÚ‡ÈÒÍ‡ˇ
;;;7112   			{
;;;7113   			u_necc=U0B;
;;;7114   					
;;;7115   			u_necc=bat[0]._Ub+10;
;;;7116   
;;;7117   			
;;;7118   			if((spc_stat==spcVZ)&&(sk_stat[0]==1))
;;;7119   				{
;;;7120   				u_necc=UVZ;
;;;7121   				}
;;;7122   			if(u_necc>=UB0) u_necc=UB0;
;;;7123   			if(u_necc>=UB20) u_necc=UB20;
;;;7124   			}
;;;7125   		}  
;;;7126   	}
;;;7127   #endif
;;;7128   #endif
;;;7129   
;;;7130   #ifdef UKU_TELECORE2015
;;;7131   
;;;7132   if(unh_cnt0<10)
;;;7133   	{
;;;7134   	unh_cnt0++;
;;;7135   	if(unh_cnt0>=10)
;;;7136   		{
;;;7137   		unh_cnt0=0;
;;;7138   		b1Hz_unh=1;
;;;7139   		}
;;;7140   	}
;;;7141   
;;;7142   if(unh_cnt1<5)
;;;7143   	{
;;;7144   	unh_cnt1++;
;;;7145   	if(unh_cnt1==5)
;;;7146   		{
;;;7147   		unh_cnt1=0;
;;;7148   //		b2Hz_unh=1;
;;;7149   		}
;;;7150   	} 
;;;7151   
;;;7152   
;;;7153   
;;;7154   if(mess_find_unvol(MESS2UNECC_HNDL))
;;;7155   	{		
;;;7156   	if(mess_data[0]==PARAM_UNECC_SET)
;;;7157   		{
;;;7158   		u_necc=mess_data[1];
;;;7159   		}		
;;;7160   	}
;;;7161   
;;;7162   
;;;7163   else if(b1Hz_unh)
;;;7164   	{
;;;7165   	b1Hz_unh=0;
;;;7166   
;;;7167   	if(BAT_TYPE==0)
;;;7168   		{
;;;7169   		if(bat[0]._nd)mat_temper=20;
;;;7170   		else mat_temper=bat[0]._Tb;
;;;7171   
;;;7172   			
;;;7173   		if(mat_temper<0)temp_SL=UB0; 
;;;7174   		else 
;;;7175   			{
;;;7176   			if(mat_temper>40)mat_temper=40; 
;;;7177   			temp_SL=(UB20-UB0)*10;
;;;7178   			temp_SL*=mat_temper;
;;;7179   			temp_SL/=200;
;;;7180   			temp_SL+=UB0;
;;;7181   			}
;;;7182   		if((spc_stat==spcVZ)&&(sk_stat[0]==1))
;;;7183   			{
;;;7184   			temp_SL=UVZ;
;;;7185   			}
;;;7186   		u_necc=(unsigned int)temp_SL;
;;;7187   	///u_necc=3456;
;;;7188   		}
;;;7189   	else if(BAT_TYPE==1)
;;;7190   		{
;;;7191   		
;;;7192   		gran(&DU_LI_BAT,1,30);
;;;7193   		u_necc=li_bat._Ub+DU_LI_BAT;
;;;7194   		gran(&u_necc,0,UB0);
;;;7195   		gran(&u_necc,0,UB20);
;;;7196   		gran(&u_necc,0,540);		
;;;7197   
;;;7198   
;;;7199   		if(li_bat._batStat!=bsOK)
;;;7200   			{
;;;7201   			u_necc=U0B;
;;;7202   			}
;;;7203   		if((spc_stat==spcVZ)&&(sk_stat[0]==1))
;;;7204   			{
;;;7205   			u_necc=UVZ;
;;;7206   			}
;;;7207   		/* 
;;;7208   		u_necc=U0B;
;;;7209   		
;;;7210   
;;;7211   	
;;;7212   		u_necc=UB0;
;;;7213   		u_necc=li_bat._Ub+10;
;;;7214   		if((li_bat._Ub<450)||(li_bat._Ub>550))
;;;7215   			{
;;;7216   			lakb_error_cnt++;
;;;7217   			if(lakb_error_cnt>=30)
;;;7218   				{
;;;7219   				lakb_error_cnt=30;
;;;7220   				u_necc=U0B;
;;;7221   				}
;;;7222   			}
;;;7223   		else lakb_error_cnt=0;*/
;;;7224   		}
;;;7225   	else if(BAT_TYPE==2)
;;;7226   		{
;;;7227   		u_necc=U0B;
;;;7228   		
;;;7229   		if((spc_stat==spcVZ)&&(sk_stat[0]==1))
;;;7230   			{
;;;7231   			u_necc=UVZ;
;;;7232   			}
;;;7233   	
;;;7234   		u_necc=UB0;
;;;7235   		}
;;;7236   
;;;7237   	else if(BAT_TYPE==3)
;;;7238   		{
;;;7239   		u_necc=U0B;
;;;7240   		
;;;7241   		if((spc_stat==spcVZ)&&(sk_stat[0]==1))
;;;7242   			{
;;;7243   			u_necc=UVZ;
;;;7244   			}
;;;7245   
;;;7246   		gran(&DU_LI_BAT,1,30);
;;;7247   
;;;7248   
;;;7249   		if(lakbNotErrorNum==0)
;;;7250   			{
;;;7251   			u_necc=U0B;
;;;7252   			}
;;;7253   		else 
;;;7254   			{
;;;7255   			signed short i;
;;;7256   			//signed short u_necc_max;
;;;7257   			//u_necc_max=0;
;;;7258   			char soc_flag=0;
;;;7259   
;;;7260   			for(i=(NUMBAT_TELECORE-1);i>=0;i--)
;;;7261   				{
;;;7262   				if(lakb[i]._communicationFullErrorStat==0)u_necc=lakb[i]._tot_bat_volt+DU_LI_BAT;
;;;7263   				if(lakb[i]._s_o_c_percent<QSODERG_LI_BAT)soc_flag=1;
;;;7264   				}
;;;7265   
;;;7266   			if(soc_flag==0)u_necc=USODERG_LI_BAT;
;;;7267   			}
;;;7268   		gran(&u_necc,0,UB0);
;;;7269   		//gran(&u_necc,0,UB20);
;;;7270   		gran(&u_necc,0,540);
;;;7271   		}
;;;7272   	}
;;;7273   
;;;7274   #endif 
;;;7275   
;;;7276   #ifdef UKU_TELECORE2017
;;;7277   
;;;7278   if(unh_cnt0<10)
;;;7279   	{
;;;7280   	unh_cnt0++;
;;;7281   	if(unh_cnt0>=10)
;;;7282   		{
;;;7283   		unh_cnt0=0;
;;;7284   		b1Hz_unh=1;
;;;7285   		}
;;;7286   	}
;;;7287   
;;;7288   if(unh_cnt1<5)
;;;7289   	{
;;;7290   	unh_cnt1++;
;;;7291   	if(unh_cnt1==5)
;;;7292   		{
;;;7293   		unh_cnt1=0;
;;;7294   //		b2Hz_unh=1;
;;;7295   		}
;;;7296   	} 
;;;7297   
;;;7298   
;;;7299   
;;;7300   if(mess_find_unvol(MESS2UNECC_HNDL))
;;;7301   	{		
;;;7302   	if(mess_data[0]==PARAM_UNECC_SET)
;;;7303   		{
;;;7304   		u_necc=mess_data[1];
;;;7305   		}		
;;;7306   	}
;;;7307   
;;;7308   
;;;7309   else if(b1Hz_unh)
;;;7310   	{
;;;7311   	b1Hz_unh=0;
;;;7312   
;;;7313   	if(BAT_TYPE==0)
;;;7314   		{
;;;7315   		if(bat[0]._nd)mat_temper=20;
;;;7316   		else mat_temper=bat[0]._Tb;
;;;7317   
;;;7318   			
;;;7319   		if(mat_temper<0)temp_SL=UB0; 
;;;7320   		else 
;;;7321   			{
;;;7322   			if(mat_temper>40)mat_temper=40; 
;;;7323   			temp_SL=(UB20-UB0)*10;
;;;7324   			temp_SL*=mat_temper;
;;;7325   			temp_SL/=200;
;;;7326   			temp_SL+=UB0;
;;;7327   			}
;;;7328   		if((spc_stat==spcVZ)&&(sk_stat[0]==1))
;;;7329   			{
;;;7330   			temp_SL=UVZ;
;;;7331   			}
;;;7332   		u_necc=(unsigned int)temp_SL;
;;;7333   	///u_necc=3456;
;;;7334   		}
;;;7335   	else if(BAT_TYPE==1)
;;;7336   		{
;;;7337   		
;;;7338   		gran(&DU_LI_BAT,1,30);
;;;7339   		u_necc=li_bat._Ub+DU_LI_BAT;
;;;7340   		gran(&u_necc,0,UB0);
;;;7341   		gran(&u_necc,0,UB20);
;;;7342   		gran(&u_necc,0,540);		
;;;7343   
;;;7344   
;;;7345   		if(li_bat._batStat!=bsOK)
;;;7346   			{
;;;7347   			u_necc=U0B;
;;;7348   			}
;;;7349   		if((spc_stat==spcVZ)&&(sk_stat[0]==1))
;;;7350   			{
;;;7351   			u_necc=UVZ;
;;;7352   			}
;;;7353   		}
;;;7354   	else if(BAT_TYPE==2)
;;;7355   		{
;;;7356   		u_necc=U0B;
;;;7357   		
;;;7358   		if((spc_stat==spcVZ)&&(sk_stat[0]==1))
;;;7359   			{
;;;7360   			u_necc=UVZ;
;;;7361   			}
;;;7362   	
;;;7363   		u_necc=UB0;
;;;7364   		}
;;;7365   
;;;7366   	else if(BAT_TYPE==3)
;;;7367   		{
;;;7368   		u_necc=U0B;
;;;7369   		
;;;7370   		if((spc_stat==spcVZ)&&(sk_stat[0]==1))
;;;7371   			{
;;;7372   			u_necc=UVZ;
;;;7373   			}
;;;7374   
;;;7375   		gran(&DU_LI_BAT,1,30);
;;;7376   
;;;7377   
;;;7378   		if(lakbNotErrorNum==0)
;;;7379   			{
;;;7380   			u_necc=U0B;
;;;7381   			}
;;;7382   		else 
;;;7383   			{
;;;7384   			signed short i;
;;;7385   			//signed short u_necc_max;
;;;7386   			//u_necc_max=0;
;;;7387   			char soc_flag=0;
;;;7388   
;;;7389   			for(i=(NUMBAT_TELECORE-1);i>=0;i--)
;;;7390   				{
;;;7391   				if(lakb[i]._communicationFullErrorStat==0)u_necc=lakb[i]._tot_bat_volt+DU_LI_BAT;
;;;7392   				if(lakb[i]._s_o_c_percent<QSODERG_LI_BAT)soc_flag=1;
;;;7393   				}
;;;7394   
;;;7395   			if(soc_flag==0)u_necc=USODERG_LI_BAT;
;;;7396   			}
;;;7397   		gran(&u_necc,0,UB0);
;;;7398   		//gran(&u_necc,0,UB20);
;;;7399   		gran(&u_necc,0,540);
;;;7400   		}
;;;7401   	}
;;;7402   
;;;7403   #endif 
;;;7404   //u_necc=2356;
;;;7405   #endif//gran(&u_necc,400,UMAX);
;;;7406   
;;;7407   
;;;7408   
;;;7409   temp_L=(signed long) u_necc;
004498  f9b40000          LDRSH    r0,[r4,#0]  ; u_necc
;;;7410   temp_L*=98L;
00449c  f04f0162          MOV      r1,#0x62
0044a0  fb00f101          MUL      r1,r0,r1
;;;7411   temp_L/=100L;
0044a4  f04f0264          MOV      r2,#0x64
0044a8  fb91f1f2          SDIV     r1,r1,r2
;;;7412   u_necc_dn=(signed short)temp_L;
0044ac  4b22              LDR      r3,|L1.17720|
0044ae  8019              STRH     r1,[r3,#0]
;;;7413   
;;;7414   temp_L=(signed long) u_necc;
;;;7415   temp_L*=102L;
0044b0  f04f0166          MOV      r1,#0x66
0044b4  fb00f001          MUL      r0,r0,r1
;;;7416   temp_L/=100L;
0044b8  e040              B        |L1.17724|
0044ba  0000              DCW      0x0000
                  |L1.17596|
                          DCD      ADR_EE_BAT_ZAR_CNT
                  |L1.17600|
                          DCD      BAT_C_REAL
                  |L1.17604|
                          DCD      BAT_C_NOM
                  |L1.17608|
                          DCD      0xffff7360
                  |L1.17612|
                          DCD      BAT_TYPE
                  |L1.17616|
                          DCD      lakb
                  |L1.17620|
                          DCD      t_ext
                  |L1.17624|
                          DCD      TBATSIGN
                  |L1.17628|
                          DCD      ND_EXT
                  |L1.17632|
                          DCD      TBATMAX
                  |L1.17636|
                          DCD      ADR_EE_BAT_RESURS
                  |L1.17640|
                          DCD      UBM_AV
                  |L1.17644|
                          DCD      U0B
                  |L1.17648|
                          DCD      IKB
                  |L1.17652|
                          DCD      USIGN
                  |L1.17656|
                          DCD      TERMOKOMPENS
                  |L1.17660|
                          DCD      UB20
                  |L1.17664|
                          DCD      UVZ
                  |L1.17668|
                          DCD      ||area_number.23||
                  |L1.17672|
                          DCD      u_necc
                  |L1.17676|
                          DCD      mat_temper
                  |L1.17680|
                          DCD      UB0
                  |L1.17684|
                          DCD      sk_stat
                  |L1.17688|
                          DCD      speedChIsOn
                  |L1.17692|
                          DCD      sp_ch_stat
                  |L1.17696|
                          DCD      speedChrgVolt
                  |L1.17700|
                          DCD      hv_vz_stat
                  |L1.17704|
                          DCD      UZ_U
                  |L1.17708|
                          DCD      FZ_U1
                  |L1.17712|
                          DCD      FZ_U2
                  |L1.17716|
                          DCD      mess_data
                  |L1.17720|
                          DCD      u_necc_dn
                  |L1.17724|
00453c  fb90f0f2          SDIV     r0,r0,r2
;;;7417   u_necc_up=(signed short)temp_L;
004540  49ff              LDR      r1,|L1.18752|
004542  8008              STRH     r0,[r1,#0]
;;;7418   /*
;;;7419   #ifdef IPS_SGEP_GAZPROM
;;;7420   u_necc=248;
;;;7421   #endif */
;;;7422   }
004544  bdf8              POP      {r3-r7,pc}
;;;7423   
                          ENDP

                  num_necc_hndl PROC
;;;7425   //-----------------------------------------------
;;;7426   void num_necc_hndl(void)
004546  e92d41f0          PUSH     {r4-r8,lr}
;;;7427   {
;;;7428   
;;;7429   static short num_necc_block_cnt;
;;;7430   if(num_necc_block_cnt) num_necc_block_cnt--;
00454a  4cfe              LDR      r4,|L1.18756|
00454c  f9b4002c          LDRSH    r0,[r4,#0x2c]  ; num_necc_block_cnt
004550  b110              CBZ      r0,|L1.17752|
004552  f1a00001          SUB      r0,r0,#1
004556  85a0              STRH     r0,[r4,#0x2c]
                  |L1.17752|
;;;7431   
;;;7432   Isumm_=Isumm;
004558  48fb              LDR      r0,|L1.18760|
00455a  4dfc              LDR      r5,|L1.18764|
00455c  8800              LDRH     r0,[r0,#0]  ; Isumm
00455e  8028              STRH     r0,[r5,#0]
;;;7433   
;;;7434   if(bat[0]._Ib<0) Isumm_+=(abs(bat[0]._Ib))/10;
004560  4efb              LDR      r6,|L1.18768|
004562  270a              MOVS     r7,#0xa
004564  f9b60008          LDRSH    r0,[r6,#8]  ; bat
004568  2800              CMP      r0,#0
00456a  da06              BGE      |L1.17786|
00456c  f7fffffe          BL       abs
004570  fb90f0f7          SDIV     r0,r0,r7
004574  8829              LDRH     r1,[r5,#0]  ; Isumm_
004576  4408              ADD      r0,r0,r1
004578  8028              STRH     r0,[r5,#0]
                  |L1.17786|
;;;7435   if(bat[1]._Ib<0) Isumm_+=(abs(bat[1]._Ib))/10;
00457a  f9b60054          LDRSH    r0,[r6,#0x54]  ; bat
00457e  2800              CMP      r0,#0
004580  da06              BGE      |L1.17808|
004582  f7fffffe          BL       abs
004586  fb90f0f7          SDIV     r0,r0,r7
00458a  8829              LDRH     r1,[r5,#0]  ; Isumm_
00458c  4408              ADD      r0,r0,r1
00458e  8028              STRH     r0,[r5,#0]
                  |L1.17808|
;;;7436   
;;;7437   num_necc_up=(Isumm_/((signed short)IMAX))+1;
004590  49f0              LDR      r1,|L1.18772|
004592  f9b50000          LDRSH    r0,[r5,#0]  ; Isumm_
004596  f9b11000          LDRSH    r1,[r1,#0]  ; IMAX
00459a  fb90f1f1          SDIV     r1,r0,r1
00459e  f1010101          ADD      r1,r1,#1
0045a2  b2c9              UXTB     r1,r1
0045a4  7421              STRB     r1,[r4,#0x10]
;;;7438   ////Isumm_+=(signed short)((IMAX*(10-KIMAX))/10);
;;;7439   ////Isumm_+=(signed short)(IMAX-IMIN);
;;;7440   
;;;7441   num_necc_down=(Isumm_/((signed short)IMIN))+1;
0045a6  4aec              LDR      r2,|L1.18776|
0045a8  f9b22000          LDRSH    r2,[r2,#0]  ; IMIN
0045ac  fb90f0f2          SDIV     r0,r0,r2
0045b0  f1000001          ADD      r0,r0,#1
0045b4  b2c2              UXTB     r2,r0
0045b6  7462              STRB     r2,[r4,#0x11]
;;;7442   
;;;7443   if(num_necc_up>num_necc)
0045b8  48e8              LDR      r0,|L1.18780|
;;;7444   	{
;;;7445   	num_necc=num_necc_up;
;;;7446   	num_necc_block_cnt=60;
0045ba  f04f053c          MOV      r5,#0x3c
0045be  f9b03000          LDRSH    r3,[r0,#0]            ;7443  ; num_necc
0045c2  4299              CMP      r1,r3                 ;7443
0045c4  dd02              BLE      |L1.17868|
0045c6  8001              STRH     r1,[r0,#0]            ;7445
0045c8  85a5              STRH     r5,[r4,#0x2c]
0045ca  e005              B        |L1.17880|
                  |L1.17868|
;;;7447   	}
;;;7448   else if(num_necc_down<num_necc)
0045cc  429a              CMP      r2,r3
0045ce  da03              BGE      |L1.17880|
;;;7449   	{
;;;7450   	if(!num_necc_block_cnt)
0045d0  8da1              LDRH     r1,[r4,#0x2c]  ; num_necc_block_cnt
0045d2  b909              CBNZ     r1,|L1.17880|
;;;7451   		{
;;;7452   		num_necc=num_necc_down;
0045d4  8002              STRH     r2,[r0,#0]
;;;7453   		num_necc_block_cnt=60;
0045d6  85a5              STRH     r5,[r4,#0x2c]
                  |L1.17880|
;;;7454   		}
;;;7455   	}
;;;7456   
;;;7457   if(PAR) num_necc=NUMIST;
0045d8  49e1              LDR      r1,|L1.18784|
0045da  880a              LDRH     r2,[r1,#0]  ; PAR
0045dc  49e1              LDR      r1,|L1.18788|
0045de  b10a              CBZ      r2,|L1.17892|
0045e0  880a              LDRH     r2,[r1,#0]  ; NUMIST
0045e2  8002              STRH     r2,[r0,#0]
                  |L1.17892|
;;;7458   #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;7459   if(bPARALLEL) num_necc=NUMIST;
0045e4  7fa2              LDRB     r2,[r4,#0x1e]  ; bPARALLEL
0045e6  b10a              CBZ      r2,|L1.17900|
0045e8  880a              LDRH     r2,[r1,#0]  ; NUMIST
0045ea  8002              STRH     r2,[r0,#0]
                  |L1.17900|
;;;7460   if(vz1_stat==vz1sWRK)num_necc=NUMIST; //¬ÍÎ˛˜‡ÂÏ ‚ÒÂ ËÒÚÓ˜ÌËÍË ÂÒÎË Û‡‚ÌËÚÂÎ¸Ì˚È Á‡ˇ‰
0045ec  f8942020          LDRB     r2,[r4,#0x20]  ; vz1_stat
0045f0  2a0a              CMP      r2,#0xa
0045f2  d101              BNE      |L1.17912|
0045f4  880a              LDRH     r2,[r1,#0]  ; NUMIST
0045f6  8002              STRH     r2,[r0,#0]
                  |L1.17912|
;;;7461   if((vz2_stat==vz2sWRK1)||(vz2_stat==vz2sWRK2))num_necc=NUMIST; //¬ÍÎ˛˜‡ÂÏ ‚ÒÂ ËÒÚÓ˜ÌËÍË ÂÒÎË Û‡‚ÌËÚÂÎ¸Ì˚È Á‡ˇ‰
0045f8  f8942023          LDRB     r2,[r4,#0x23]  ; vz2_stat
0045fc  2a0a              CMP      r2,#0xa
0045fe  d001              BEQ      |L1.17924|
004600  2a0b              CMP      r2,#0xb
004602  d101              BNE      |L1.17928|
                  |L1.17924|
004604  880a              LDRH     r2,[r1,#0]  ; NUMIST
004606  8002              STRH     r2,[r0,#0]
                  |L1.17928|
;;;7462   #endif
;;;7463   
;;;7464   gran(&num_necc,1,NUMIST);
004608  f9b12000          LDRSH    r2,[r1,#0]  ; NUMIST
00460c  e8bd41f0          POP      {r4-r8,lr}
004610  2101              MOVS     r1,#1
004612  48d2              LDR      r0,|L1.18780|
004614  f7ffbffe          B.W      gran
;;;7465   
;;;7466   }
;;;7467   
                          ENDP

                  cntrl_hndl PROC
;;;7470   //-----------------------------------------------
;;;7471   void cntrl_hndl(void)
004618  e92d5ff0          PUSH     {r4-r12,lr}
;;;7472   {
;;;7473   
;;;7474   
;;;7475   
;;;7476   IZMAX_=IZMAX;
00461c  48d2              LDR      r0,|L1.18792|
00461e  4cc9              LDR      r4,|L1.18756|
004620  8800              LDRH     r0,[r0,#0]  ; IZMAX
004622  f8a40040          STRH     r0,[r4,#0x40]
;;;7477   
;;;7478   //cntrl_hndl_plazma=10;
;;;7479   
;;;7480   if((speedChIsOn)||(sp_ch_stat==scsWRK))IZMAX_=speedChrgCurr;
004626  48d1              LDR      r0,|L1.18796|
004628  8800              LDRH     r0,[r0,#0]  ; speedChIsOn
00462a  b918              CBNZ     r0,|L1.17972|
00462c  48d0              LDR      r0,|L1.18800|
00462e  7800              LDRB     r0,[r0,#0]  ; sp_ch_stat
004630  2802              CMP      r0,#2
004632  d103              BNE      |L1.17980|
                  |L1.17972|
004634  48cf              LDR      r0,|L1.18804|
004636  8800              LDRH     r0,[r0,#0]  ; speedChrgCurr
004638  f8a40040          STRH     r0,[r4,#0x40]
                  |L1.17980|
;;;7481   if(vz1_stat==vz1sWRK) IZMAX_=UZ_IMAX;
00463c  f8940020          LDRB     r0,[r4,#0x20]  ; vz1_stat
004640  280a              CMP      r0,#0xa
004642  d103              BNE      |L1.17996|
004644  48cc              LDR      r0,|L1.18808|
004646  8800              LDRH     r0,[r0,#0]  ; UZ_IMAX
004648  f8a40040          STRH     r0,[r4,#0x40]
                  |L1.17996|
;;;7482   if(vz2_stat==vz2sWRK1) IZMAX_=FZ_IMAX1;
00464c  f8940023          LDRB     r0,[r4,#0x23]  ; vz2_stat
004650  280a              CMP      r0,#0xa
004652  d103              BNE      |L1.18012|
004654  49c9              LDR      r1,|L1.18812|
004656  8809              LDRH     r1,[r1,#0]  ; FZ_IMAX1
004658  f8a41040          STRH     r1,[r4,#0x40]
                  |L1.18012|
;;;7483   if(vz2_stat==vz2sWRK2) IZMAX_=FZ_IMAX2;
00465c  280b              CMP      r0,#0xb
00465e  d103              BNE      |L1.18024|
004660  48c7              LDR      r0,|L1.18816|
004662  8800              LDRH     r0,[r0,#0]  ; FZ_IMAX2
004664  f8a40040          STRH     r0,[r4,#0x40]
                  |L1.18024|
;;;7484   if(spc_stat==spcVZ) IZMAX_=IMAX_VZ;
004668  7d20              LDRB     r0,[r4,#0x14]  ; spc_stat
00466a  2802              CMP      r0,#2
00466c  d103              BNE      |L1.18038|
00466e  48c5              LDR      r0,|L1.18820|
004670  8800              LDRH     r0,[r0,#0]  ; IMAX_VZ
004672  f8a40040          STRH     r0,[r4,#0x40]
                  |L1.18038|
;;;7485   
;;;7486   if(cntrl_stat_blok_cnt)cntrl_stat_blok_cnt--;
004676  f9b40068          LDRSH    r0,[r4,#0x68]  ; cntrl_stat_blok_cnt
00467a  b118              CBZ      r0,|L1.18052|
00467c  f1a00001          SUB      r0,r0,#1
004680  f8a40068          STRH     r0,[r4,#0x68]
                  |L1.18052|
;;;7487   if(cntrl_stat_blok_cnt_)cntrl_stat_blok_cnt_--;
004684  f9b4006a          LDRSH    r0,[r4,#0x6a]  ; cntrl_stat_blok_cnt_
004688  b118              CBZ      r0,|L1.18066|
00468a  f1a00001          SUB      r0,r0,#1
00468e  f8a4006a          STRH     r0,[r4,#0x6a]
                  |L1.18066|
;;;7488   
;;;7489   if((bat[0]._temper_stat&0x03)||(bat[1]._temper_stat&0x03))IZMAX_=IZMAX_/10;
004692  48af              LDR      r0,|L1.18768|
004694  f04f080a          MOV      r8,#0xa               ;7481
004698  f890103f          LDRB     r1,[r0,#0x3f]  ; bat
00469c  0789              LSLS     r1,r1,#30
00469e  d103              BNE      |L1.18088|
0046a0  f890008b          LDRB     r0,[r0,#0x8b]  ; bat
0046a4  0780              LSLS     r0,r0,#30
0046a6  d005              BEQ      |L1.18100|
                  |L1.18088|
0046a8  f8b40040          LDRH     r0,[r4,#0x40]  ; IZMAX_
0046ac  fbb0f0f8          UDIV     r0,r0,r8
0046b0  f8a40040          STRH     r0,[r4,#0x40]
                  |L1.18100|
;;;7490   
;;;7491   
;;;7492   #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;7493   if((REG_SPEED<1)||(REG_SPEED>5)) REG_SPEED=1;
0046b4  48b4              LDR      r0,|L1.18824|
0046b6  2601              MOVS     r6,#1
0046b8  f9b01000          LDRSH    r1,[r0,#0]  ; REG_SPEED
0046bc  1e49              SUBS     r1,r1,#1
0046be  2905              CMP      r1,#5
0046c0  d300              BCC      |L1.18116|
0046c2  8006              STRH     r6,[r0,#0]
                  |L1.18116|
;;;7494   if(ch_cnt0<(10*REG_SPEED))
0046c4  f9b00000          LDRSH    r0,[r0,#0]  ; REG_SPEED
0046c8  2500              MOVS     r5,#0                 ;7480
0046ca  eb000180          ADD      r1,r0,r0,LSL #2
0046ce  79e0              LDRB     r0,[r4,#7]  ; ch_cnt0
0046d0  ebb00f41          CMP      r0,r1,LSL #1
0046d4  da08              BGE      |L1.18152|
;;;7495   	{
;;;7496   	ch_cnt0++;
0046d6  f1000001          ADD      r0,r0,#1
0046da  b2c0              UXTB     r0,r0
0046dc  71e0              STRB     r0,[r4,#7]
;;;7497   	if(ch_cnt0>=10*REG_SPEED)
0046de  ebb00f41          CMP      r0,r1,LSL #1
0046e2  db01              BLT      |L1.18152|
;;;7498   		{
;;;7499   		ch_cnt0=0;
0046e4  71e5              STRB     r5,[r4,#7]
;;;7500   		b1Hz_ch=1;
0046e6  7226              STRB     r6,[r4,#8]
                  |L1.18152|
;;;7501   		}
;;;7502   	}
;;;7503   #endif
;;;7504   #ifndef UKU_220_IPS_TERMOKOMPENSAT
;;;7505   if(ch_cnt0<10)
;;;7506   	{
;;;7507   	ch_cnt0++;
;;;7508   	if(ch_cnt0>=10)
;;;7509   		{
;;;7510   		ch_cnt0=0;
;;;7511   		b1Hz_ch=1;
;;;7512   		}
;;;7513   	}
;;;7514   #endif
;;;7515   
;;;7516   
;;;7517   if(mess_find_unvol(MESS2CNTRL_HNDL))
0046e8  20e1              MOVS     r0,#0xe1
0046ea  f7fffffe          BL       mess_find_unvol
;;;7518   	{
;;;7519   	if(mess_data[0]==PARAM_CNTRL_STAT_PLUS)
;;;7520   		{
;;;7521   		cntrl_stat=cntrl_stat_old+mess_data[1];
;;;7522   		}
;;;7523   	else if(mess_data[0]==PARAM_CNTRL_STAT_MINUS)
;;;7524   		{
;;;7525   		cntrl_stat=cntrl_stat_old-mess_data[1];
;;;7526   		}
;;;7527   	else if(mess_data[0]==PARAM_CNTRL_STAT_STEP_DOWN)
;;;7528   		{
;;;7529   		static char cntrlStatIsDownCnt;
;;;7530   		cntrl_stat--;
;;;7531   
;;;7532   		if((cntrl_stat<=30)||(load_U<USIGN))
;;;7533   			{
;;;7534   			if(++cntrlStatIsDownCnt==250)mess_send(MESS2KB_HNDL,PARAM_CNTRL_IS_DOWN,0,10);
;;;7535   			}
;;;7536   		else 
;;;7537   			{
;;;7538   			cntrlStatIsDownCnt=0;
;;;7539   			}
;;;7540   
;;;7541   		}
;;;7542   	else if(mess_data[0]==PARAM_CNTRL_STAT_SET)
;;;7543   		{
;;;7544   		cntrl_stat=mess_data[1];
;;;7545   		}
;;;7546   
;;;7547   	else if(mess_data[0]==PARAM_CNTRL_STAT_FAST_REG)
;;;7548   		{
;;;7549   		#ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;7550   		if(load_U>u_necc)
0046ee  f8df929c          LDR      r9,|L1.18828|
;;;7551   			{
;;;7552   			cntrl_hndl_plazma=11;
;;;7553   			if(((bps_U-u_necc)>40)&&(cntrl_stat>0))cntrl_stat-=5;
0046f2  4aa7              LDR      r2,|L1.18832|
;;;7554   			else if((cntrl_stat)&&b1Hz_ch)cntrl_stat--;
;;;7555   			}
;;;7556   		else if(bps_U<u_necc)
;;;7557   			{
;;;7558   			cntrl_hndl_plazma=12;	
;;;7559   			if(((u_necc-bps_U)>40)&&(cntrl_stat<1015))cntrl_stat+=5;
;;;7560   			else	if((cntrl_stat<1020)&&b1Hz_ch)cntrl_stat++;
;;;7561   			}
;;;7562   		#elif defined(UKU_220)
;;;7563   		if(load_U>u_necc)
;;;7564   			{
;;;7565   			cntrl_hndl_plazma=13;
;;;7566   			if(((load_U-u_necc)>40)&&(cntrl_stat>0))cntrl_stat-=5;
;;;7567   			else if((cntrl_stat)&&b1Hz_ch)cntrl_stat--;
;;;7568   			}
;;;7569   		else if(load_U<u_necc)
;;;7570   			{
;;;7571   			cntrl_hndl_plazma=14;	
;;;7572   			if(((u_necc-load_U)>40)&&(cntrl_stat<1015))cntrl_stat+=5;
;;;7573   			else	if((cntrl_stat<1020)&&b1Hz_ch)cntrl_stat++;
;;;7574   			}
;;;7575   		#elif defined(UKU_220_V2)
;;;7576   		if(load_U>u_necc)
;;;7577   			{
;;;7578   			cntrl_hndl_plazma=15;
;;;7579   			if(((load_U-u_necc)>40)&&(cntrl_stat>0))cntrl_stat-=5;
;;;7580   			else if((cntrl_stat)&&b1Hz_ch)cntrl_stat--;
;;;7581   			}
;;;7582   		else if(load_U<u_necc)
;;;7583   			{
;;;7584   			cntrl_hndl_plazma=16;	
;;;7585   			if(((u_necc-load_U)>40)&&(cntrl_stat<1015))cntrl_stat+=5;
;;;7586   			else	if((cntrl_stat<1020)&&b1Hz_ch)cntrl_stat++;
;;;7587   			}
;;;7588   		#else
;;;7589   
;;;7590   		if(load_U>u_necc)
;;;7591   			{
;;;7592   			cntrl_hndl_plazma=17;
;;;7593   			if(((load_U-u_necc)>10)&&(cntrl_stat>0))cntrl_stat-=5;
;;;7594   			else if((cntrl_stat)&&b1Hz_ch)cntrl_stat--;
;;;7595   			}
;;;7596   		else if(load_U<u_necc)
;;;7597   			{
;;;7598   			cntrl_hndl_plazma=18;	
;;;7599   			if(((u_necc-load_U)>10)&&(cntrl_stat<1015))cntrl_stat+=5;
;;;7600   			else	if((cntrl_stat<1020)&&b1Hz_ch)cntrl_stat++;
;;;7601   			}
;;;7602   		#endif	
;;;7603   	 	}
;;;7604   	}
;;;7605   
;;;7606   #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;7607   else if((b1Hz_ch)&&((!bIBAT_SMKLBR)||(bps[8]._cnt>40)))
0046f4  f8dfb29c          LDR      r11,|L1.18836|
;;;7608   	{
;;;7609   	cntrl_stat_new=cntrl_stat_old;
;;;7610   	cntrl_hndl_plazma=19;
;;;7611   	if((Ibmax/10)>(2*IZMAX_))
;;;7612   		{
;;;7613   		cntrl_hndl_plazma=20;
;;;7614             if(cntrl_stat_blok_cnt)cntrl_stat_new--;
;;;7615   		else	cntrl_stat_new-=10;
;;;7616   		}		
;;;7617   	else if(((Ibmax/10)<(IZMAX_*2))&&(Ibmax>(IZMAX_*15)))
;;;7618   		{
;;;7619   		cntrl_hndl_plazma=21;
;;;7620             if(cntrl_stat_blok_cnt)cntrl_stat_new--;
;;;7621             else	cntrl_stat_new-=3;
;;;7622   		}   
;;;7623   	else if((Ibmax<(IZMAX_*15))&&((Ibmax/10)>IZMAX_))
;;;7624   		{
;;;7625   		cntrl_hndl_plazma=22;
;;;7626   		cntrl_stat_new--;
;;;7627   		}
;;;7628   		
;;;7629   	else if(bps_U<u_necc)
;;;7630   		{
;;;7631   		cntrl_hndl_plazma=23;
;;;7632   		if(bps_U<(u_necc-(UB0-UB20)))
;;;7633   			{
;;;7634   			cntrl_hndl_plazma=24;
;;;7635   			if(Ibmax<0)
;;;7636   				{
;;;7637   				cntrl_hndl_plazma=25;
;;;7638                       if(cntrl_stat_blok_cnt)cntrl_stat_new++;
;;;7639   				else cntrl_stat_new+=10;
;;;7640   				}
;;;7641   			else if(Ibmax<(IZMAX_*5))
;;;7642   				{
;;;7643   				cntrl_hndl_plazma=26;
;;;7644                       if(cntrl_stat_blok_cnt)cntrl_stat_new++;
;;;7645   				else	cntrl_stat_new+=2;
;;;7646   				}
;;;7647   			else if(Ibmax<((IZMAX_*10)/*-10*/))//(Ibmax<((IZMAX_*95)/10))
;;;7648   				{
;;;7649   				cntrl_hndl_plazma=27;
;;;7650   				cntrl_stat_new++;
;;;7651   				}					
;;;7652   			}
;;;7653   		else if(bps_U<(u_necc-((UB0-UB20)/4)))
;;;7654   			{
;;;7655   			cntrl_hndl_plazma=28;
;;;7656   			if(Ibmax<(IZMAX_*5))
;;;7657   				{
;;;7658   				cntrl_hndl_plazma=29;
;;;7659                       if(cntrl_stat_blok_cnt)cntrl_stat_new++;
;;;7660   				else	cntrl_stat_new+=2;
;;;7661   				}
;;;7662   			else if(Ibmax<((IZMAX_*10)/*-10*/))//(Ibmax<((IZMAX_*95)/10))
;;;7663   				{
;;;7664   				cntrl_hndl_plazma=30;
;;;7665   				cntrl_stat_new++;
;;;7666   				}					
;;;7667   			}	
;;;7668   		else if(bps_U<(u_necc-1))
;;;7669   			{
;;;7670   			cntrl_hndl_plazma=31;
;;;7671   			if(Ibmax<((IZMAX_*10)/*-10*/))//(Ibmax<((IZMAX_*95)/10))
;;;7672   				{
;;;7673   				cntrl_hndl_plazma=32;
;;;7674   				cntrl_stat_new++;
;;;7675   				}					
;;;7676   			}					
;;;7677   		}	
;;;7678   	else if((bps_U>u_necc)/*&&(!cntrl_blok)*/)
;;;7679   		{ 	
;;;7680   		cntrl_hndl_plazma=33;
;;;7681   		if(bps_U>(u_necc+(UB0-UB20)))
;;;7682   			{
;;;7683   			cntrl_hndl_plazma=34;
;;;7684                  if(cntrl_stat_blok_cnt)cntrl_stat_new--;
;;;7685   			else	cntrl_stat_new-=10;
;;;7686   			}
;;;7687   		else if(bps_U>(u_necc+((UB0-UB20)/4)))
;;;7688   			{
;;;7689   			cntrl_hndl_plazma=35;
;;;7690                  if(cntrl_stat_blok_cnt)cntrl_stat_new--;
;;;7691   			else cntrl_stat_new-=2;
;;;7692   			}	
;;;7693   		else if(bps_U>(u_necc+1))
;;;7694   			{
;;;7695   			cntrl_hndl_plazma=36;
;;;7696   			cntrl_stat_new--;
;;;7697   			}					
;;;7698   		}
;;;7699   
;;;7700   	if((hv_vz_stat==hvsOFF)&&(vz1_stat==vz1sOFF)&&(vz2_stat==vz2sOFF))
;;;7701   		{
;;;7702   		if(((sk_stat[1]==1)&&(sk_stat_old[1]==0))&&(VZ_KIND==1))cntrl_stat_new=50;
;;;7703   		}
;;;7704   
;;;7705   	gran(&cntrl_stat_new,10,1010);			
;;;7706   	cntrl_stat_old=cntrl_stat_new;
;;;7707   	cntrl_stat=cntrl_stat_new;
;;;7708   	
;;;7709   	if(ICA_EN==0)
;;;7710   		{
;;;7711   		if(ica_cntrl_hndl_cnt)
0046f8  4fa7              LDR      r7,|L1.18840|
0046fa  b398              CBZ      r0,|L1.18276|
0046fc  49a7              LDR      r1,|L1.18844|
0046fe  6808              LDR      r0,[r1,#0]            ;7519  ; mess_data
004700  2864              CMP      r0,#0x64              ;7519
004702  d009              BEQ      |L1.18200|
004704  2869              CMP      r0,#0x69              ;7523
004706  d00c              BEQ      |L1.18210|
004708  4ba5              LDR      r3,|L1.18848|
00470a  286e              CMP      r0,#0x6e              ;7527
00470c  d00f              BEQ      |L1.18222|
00470e  28e5              CMP      r0,#0xe5              ;7542
004710  d02b              BEQ      |L1.18282|
004712  28e6              CMP      r0,#0xe6              ;7547
004714  d02c              BEQ      |L1.18288|
                  |L1.18198|
004716  e1e0              B        |L1.19162|
                  |L1.18200|
004718  6848              LDR      r0,[r1,#4]            ;7521  ; mess_data
00471a  8d21              LDRH     r1,[r4,#0x28]         ;7521  ; cntrl_stat_old
00471c  4408              ADD      r0,r0,r1              ;7521
00471e  84e0              STRH     r0,[r4,#0x26]         ;7521
004720  e1db              B        |L1.19162|
                  |L1.18210|
004722  6848              LDR      r0,[r1,#4]            ;7525  ; mess_data
004724  8d21              LDRH     r1,[r4,#0x28]         ;7525  ; cntrl_stat_old
004726  eba10000          SUB      r0,r1,r0              ;7525
00472a  84e0              STRH     r0,[r4,#0x26]         ;7525
00472c  e1d5              B        |L1.19162|
                  |L1.18222|
00472e  8ce0              LDRH     r0,[r4,#0x26]         ;7530  ; cntrl_stat
004730  f1a00001          SUB      r0,r0,#1              ;7530
004734  b200              SXTH     r0,r0                 ;7530
004736  84e0              STRH     r0,[r4,#0x26]         ;7530
004738  281e              CMP      r0,#0x1e              ;7532
00473a  dd06              BLE      |L1.18250|
00473c  4999              LDR      r1,|L1.18852|
00473e  f9b30000          LDRSH    r0,[r3,#0]            ;7532  ; load_U
004742  f9b11000          LDRSH    r1,[r1,#0]            ;7532  ; USIGN
004746  4288              CMP      r0,r1                 ;7532
004748  da0d              BGE      |L1.18278|
                  |L1.18250|
00474a  7860              LDRB     r0,[r4,#1]            ;7534  ; cntrlStatIsDownCnt
00474c  1c40              ADDS     r0,r0,#1              ;7534
00474e  b2c0              UXTB     r0,r0                 ;7534
004750  7060              STRB     r0,[r4,#1]            ;7534
004752  28fa              CMP      r0,#0xfa              ;7534
004754  d1df              BNE      |L1.18198|
004756  230a              MOVS     r3,#0xa               ;7534
004758  2200              MOVS     r2,#0                 ;7534
00475a  21e7              MOVS     r1,#0xe7              ;7534
00475c  20e6              MOVS     r0,#0xe6              ;7534
00475e  f7fffffe          BL       mess_send
004762  e1ba              B        |L1.19162|
                  |L1.18276|
004764  e047              B        |L1.18422|
                  |L1.18278|
004766  7065              STRB     r5,[r4,#1]            ;7538
004768  e1b7              B        |L1.19162|
                  |L1.18282|
00476a  6848              LDR      r0,[r1,#4]            ;7544  ; mess_data
00476c  84e0              STRH     r0,[r4,#0x26]         ;7544
00476e  e1b4              B        |L1.19162|
                  |L1.18288|
004770  f9b31000          LDRSH    r1,[r3,#0]            ;7550  ; load_U
004774  f9b90000          LDRSH    r0,[r9,#0]            ;7550  ; u_necc
004778  4281              CMP      r1,r0                 ;7550
00477a  dd1b              BLE      |L1.18356|
00477c  f04f010b          MOV      r1,#0xb               ;7552
004780  77e1              STRB     r1,[r4,#0x1f]         ;7552
004782  f9b21000          LDRSH    r1,[r2,#0]            ;7553  ; bps_U
004786  eba10000          SUB      r0,r1,r0              ;7553
00478a  2828              CMP      r0,#0x28              ;7553
00478c  dd07              BLE      |L1.18334|
00478e  f9b40026          LDRSH    r0,[r4,#0x26]         ;7553  ; cntrl_stat
004792  2800              CMP      r0,#0                 ;7553
004794  dd03              BLE      |L1.18334|
004796  f1a00005          SUB      r0,r0,#5              ;7553
00479a  84e0              STRH     r0,[r4,#0x26]         ;7553
00479c  e19d              B        |L1.19162|
                  |L1.18334|
00479e  f9b40026          LDRSH    r0,[r4,#0x26]         ;7554  ; cntrl_stat
0047a2  2800              CMP      r0,#0                 ;7554
0047a4  d0b7              BEQ      |L1.18198|
0047a6  7a21              LDRB     r1,[r4,#8]            ;7554  ; b1Hz_ch
0047a8  2900              CMP      r1,#0                 ;7554
0047aa  d0b4              BEQ      |L1.18198|
0047ac  f1a00001          SUB      r0,r0,#1              ;7554
0047b0  84e0              STRH     r0,[r4,#0x26]         ;7554
0047b2  e192              B        |L1.19162|
                  |L1.18356|
0047b4  f9b21000          LDRSH    r1,[r2,#0]            ;7556  ; bps_U
0047b8  4281              CMP      r1,r0                 ;7556
0047ba  daac              BGE      |L1.18198|
0047bc  f04f020c          MOV      r2,#0xc               ;7558
0047c0  77e2              STRB     r2,[r4,#0x1f]         ;7558
0047c2  eba00001          SUB      r0,r0,r1              ;7559
0047c6  2828              CMP      r0,#0x28              ;7559
0047c8  dd09              BLE      |L1.18398|
0047ca  f9b40026          LDRSH    r0,[r4,#0x26]         ;7559  ; cntrl_stat
0047ce  f24031f7          MOV      r1,#0x3f7             ;7559
0047d2  4288              CMP      r0,r1                 ;7559
0047d4  da03              BGE      |L1.18398|
0047d6  f1000005          ADD      r0,r0,#5              ;7559
0047da  84e0              STRH     r0,[r4,#0x26]         ;7559
0047dc  e17d              B        |L1.19162|
                  |L1.18398|
0047de  f9b40026          LDRSH    r0,[r4,#0x26]         ;7560  ; cntrl_stat
0047e2  f5b07f7f          CMP      r0,#0x3fc             ;7560
0047e6  da96              BGE      |L1.18198|
0047e8  7a21              LDRB     r1,[r4,#8]            ;7560  ; b1Hz_ch
0047ea  2900              CMP      r1,#0                 ;7560
0047ec  d093              BEQ      |L1.18198|
0047ee  f1000001          ADD      r0,r0,#1              ;7560
0047f2  84e0              STRH     r0,[r4,#0x26]         ;7560
0047f4  e171              B        |L1.19162|
                  |L1.18422|
0047f6  7a20              LDRB     r0,[r4,#8]            ;7607  ; b1Hz_ch
0047f8  2800              CMP      r0,#0                 ;7607
0047fa  d08c              BEQ      |L1.18198|
0047fc  486a              LDR      r0,|L1.18856|
0047fe  8800              LDRH     r0,[r0,#0]            ;7607  ; bIBAT_SMKLBR
004800  b118              CBZ      r0,|L1.18442|
004802  f89b02e3          LDRB     r0,[r11,#0x2e3]       ;7607  ; bps
004806  2828              CMP      r0,#0x28              ;7607
004808  d985              BLS      |L1.18198|
                  |L1.18442|
00480a  f9b40028          LDRSH    r0,[r4,#0x28]         ;7609  ; cntrl_stat_old
00480e  87a0              STRH     r0,[r4,#0x3c]         ;7609
004810  f04f0113          MOV      r1,#0x13              ;7610
004814  77e1              STRB     r1,[r4,#0x1f]         ;7610
004816  f9b4103e          LDRSH    r1,[r4,#0x3e]         ;7611  ; Ibmax
00481a  f8b43040          LDRH     r3,[r4,#0x40]         ;7611  ; IZMAX_
00481e  fb91fcf8          SDIV     r12,r1,r8             ;7611
004822  ebbc0f43          CMP      r12,r3,LSL #1         ;7611
004826  dd0d              BLE      |L1.18500|
004828  f04f0114          MOV      r1,#0x14              ;7613
00482c  77e1              STRB     r1,[r4,#0x1f]         ;7613
00482e  f8b41068          LDRH     r1,[r4,#0x68]         ;7614  ; cntrl_stat_blok_cnt
004832  b119              CBZ      r1,|L1.18492|
004834  f1a00001          SUB      r0,r0,#1              ;7614
004838  87a0              STRH     r0,[r4,#0x3c]         ;7614
00483a  e11a              B        |L1.19058|
                  |L1.18492|
00483c  f1a0000a          SUB      r0,r0,#0xa            ;7615
004840  87a0              STRH     r0,[r4,#0x3c]         ;7615
004842  e116              B        |L1.19058|
                  |L1.18500|
004844  da11              BGE      |L1.18538|
004846  ebc31803          RSB      r8,r3,r3,LSL #4       ;7617
00484a  4588              CMP      r8,r1                 ;7617
00484c  da0d              BGE      |L1.18538|
00484e  f04f0115          MOV      r1,#0x15              ;7619
004852  77e1              STRB     r1,[r4,#0x1f]         ;7619
004854  f8b41068          LDRH     r1,[r4,#0x68]         ;7620  ; cntrl_stat_blok_cnt
004858  b119              CBZ      r1,|L1.18530|
00485a  f1a00001          SUB      r0,r0,#1              ;7620
00485e  87a0              STRH     r0,[r4,#0x3c]         ;7620
004860  e107              B        |L1.19058|
                  |L1.18530|
004862  f1a00003          SUB      r0,r0,#3              ;7621
004866  87a0              STRH     r0,[r4,#0x3c]         ;7621
004868  e103              B        |L1.19058|
                  |L1.18538|
00486a  ebc31803          RSB      r8,r3,r3,LSL #4       ;7623
00486e  4588              CMP      r8,r1                 ;7623
004870  dd08              BLE      |L1.18564|
004872  459c              CMP      r12,r3                ;7623
004874  dd06              BLE      |L1.18564|
004876  f04f0116          MOV      r1,#0x16              ;7625
00487a  77e1              STRB     r1,[r4,#0x1f]         ;7625
00487c  f1a00001          SUB      r0,r0,#1              ;7626
004880  87a0              STRH     r0,[r4,#0x3c]         ;7626
004882  e0f6              B        |L1.19058|
                  |L1.18564|
004884  f9b2c000          LDRSH    r12,[r2,#0]           ;7629  ; bps_U
004888  f9b92000          LDRSH    r2,[r9,#0]            ;7629  ; u_necc
00488c  f8df911c          LDR      r9,|L1.18860|
004890  f8dfa11c          LDR      r10,|L1.18864|
004894  4594              CMP      r12,r2                ;7629
004896  da52              BGE      |L1.18750|
004898  f04f0817          MOV      r8,#0x17              ;7631
00489c  f884801f          STRB     r8,[r4,#0x1f]         ;7631
0048a0  f9b98000          LDRSH    r8,[r9,#0]            ;7632  ; UB0
0048a4  f9ba9000          LDRSH    r9,[r10,#0]           ;7632  ; UB20
0048a8  eba80809          SUB      r8,r8,r9              ;7632
0048ac  eba20908          SUB      r9,r2,r8              ;7632
0048b0  45e1              CMP      r9,r12                ;7632
0048b2  dd2e              BLE      |L1.18706|
0048b4  f04f0218          MOV      r2,#0x18              ;7634
0048b8  77e2              STRB     r2,[r4,#0x1f]         ;7634
0048ba  2900              CMP      r1,#0                 ;7635
0048bc  da0d              BGE      |L1.18650|
0048be  f04f0119          MOV      r1,#0x19              ;7637
0048c2  77e1              STRB     r1,[r4,#0x1f]         ;7637
0048c4  f8b41068          LDRH     r1,[r4,#0x68]         ;7638  ; cntrl_stat_blok_cnt
0048c8  b119              CBZ      r1,|L1.18642|
0048ca  f1000001          ADD      r0,r0,#1              ;7638
0048ce  87a0              STRH     r0,[r4,#0x3c]         ;7638
0048d0  e0cf              B        |L1.19058|
                  |L1.18642|
0048d2  f100000a          ADD      r0,r0,#0xa            ;7639
0048d6  87a0              STRH     r0,[r4,#0x3c]         ;7639
0048d8  e0cb              B        |L1.19058|
                  |L1.18650|
0048da  eb030283          ADD      r2,r3,r3,LSL #2       ;7641
0048de  428a              CMP      r2,r1                 ;7641
0048e0  dd0d              BLE      |L1.18686|
0048e2  f04f011a          MOV      r1,#0x1a              ;7643
0048e6  77e1              STRB     r1,[r4,#0x1f]         ;7643
0048e8  f8b41068          LDRH     r1,[r4,#0x68]         ;7644  ; cntrl_stat_blok_cnt
0048ec  b119              CBZ      r1,|L1.18678|
0048ee  f1000001          ADD      r0,r0,#1              ;7644
0048f2  87a0              STRH     r0,[r4,#0x3c]         ;7644
0048f4  e0bd              B        |L1.19058|
                  |L1.18678|
0048f6  f1000002          ADD      r0,r0,#2              ;7645
0048fa  87a0              STRH     r0,[r4,#0x3c]         ;7645
0048fc  e0b9              B        |L1.19058|
                  |L1.18686|
0048fe  ebb10f42          CMP      r1,r2,LSL #1          ;7647
004902  da05              BGE      |L1.18704|
004904  f04f011b          MOV      r1,#0x1b              ;7649
004908  77e1              STRB     r1,[r4,#0x1f]         ;7649
00490a  f1000001          ADD      r0,r0,#1              ;7650
00490e  87a0              STRH     r0,[r4,#0x3c]         ;7650
                  |L1.18704|
004910  e0af              B        |L1.19058|
                  |L1.18706|
004912  ea4f79e8          ASR      r9,r8,#31             ;7653
004916  eb087899          ADD      r8,r8,r9,LSR #30      ;7653
00491a  eba208a8          SUB      r8,r2,r8,ASR #2       ;7653
00491e  45e0              CMP      r8,r12                ;7653
004920  dd5b              BLE      |L1.18906|
004922  f04f021c          MOV      r2,#0x1c              ;7655
004926  77e2              STRB     r2,[r4,#0x1f]         ;7655
004928  eb030283          ADD      r2,r3,r3,LSL #2       ;7656
00492c  428a              CMP      r2,r1                 ;7656
00492e  dd4a              BLE      |L1.18886|
004930  f04f011d          MOV      r1,#0x1d              ;7658
004934  77e1              STRB     r1,[r4,#0x1f]         ;7658
004936  f8b41068          LDRH     r1,[r4,#0x68]         ;7659  ; cntrl_stat_blok_cnt
00493a  b3d9              CBZ      r1,|L1.18868|
00493c  e03b              B        |L1.18870|
                  |L1.18750|
00493e  e05e              B        |L1.18942|
                  |L1.18752|
                          DCD      u_necc_up
                  |L1.18756|
                          DCD      ||area_number.23||
                  |L1.18760|
                          DCD      Isumm
                  |L1.18764|
                          DCD      Isumm_
                  |L1.18768|
                          DCD      bat
                  |L1.18772|
                          DCD      IMAX
                  |L1.18776|
                          DCD      IMIN
                  |L1.18780|
                          DCD      num_necc
                  |L1.18784|
                          DCD      PAR
                  |L1.18788|
                          DCD      NUMIST
                  |L1.18792|
                          DCD      IZMAX
                  |L1.18796|
                          DCD      speedChIsOn
                  |L1.18800|
                          DCD      sp_ch_stat
                  |L1.18804|
                          DCD      speedChrgCurr
                  |L1.18808|
                          DCD      UZ_IMAX
                  |L1.18812|
                          DCD      FZ_IMAX1
                  |L1.18816|
                          DCD      FZ_IMAX2
                  |L1.18820|
                          DCD      IMAX_VZ
                  |L1.18824|
                          DCD      REG_SPEED
                  |L1.18828|
                          DCD      u_necc
                  |L1.18832|
                          DCD      bps_U
                  |L1.18836|
                          DCD      bps
                  |L1.18840|
                          DCD      ica_cntrl_hndl_cnt
                  |L1.18844|
                          DCD      mess_data
                  |L1.18848|
                          DCD      load_U
                  |L1.18852|
                          DCD      USIGN
                  |L1.18856|
                          DCD      bIBAT_SMKLBR
                  |L1.18860|
                          DCD      UB0
                  |L1.18864|
                          DCD      UB20
                  |L1.18868|
0049b4  e003              B        |L1.18878|
                  |L1.18870|
0049b6  f1000001          ADD      r0,r0,#1              ;7659
0049ba  87a0              STRH     r0,[r4,#0x3c]         ;7659
0049bc  e059              B        |L1.19058|
                  |L1.18878|
0049be  f1000002          ADD      r0,r0,#2              ;7660
0049c2  87a0              STRH     r0,[r4,#0x3c]         ;7660
0049c4  e055              B        |L1.19058|
                  |L1.18886|
0049c6  ebb10f42          CMP      r1,r2,LSL #1          ;7662
0049ca  da52              BGE      |L1.19058|
0049cc  f04f011e          MOV      r1,#0x1e              ;7664
0049d0  77e1              STRB     r1,[r4,#0x1f]         ;7664
0049d2  f1000001          ADD      r0,r0,#1              ;7665
0049d6  87a0              STRH     r0,[r4,#0x3c]         ;7665
0049d8  e04b              B        |L1.19058|
                  |L1.18906|
0049da  1e52              SUBS     r2,r2,#1              ;7668
0049dc  4594              CMP      r12,r2                ;7668
0049de  da48              BGE      |L1.19058|
0049e0  f04f021f          MOV      r2,#0x1f              ;7670
0049e4  77e2              STRB     r2,[r4,#0x1f]         ;7670
0049e6  eb030283          ADD      r2,r3,r3,LSL #2       ;7671
0049ea  ebb10f42          CMP      r1,r2,LSL #1          ;7671
0049ee  da40              BGE      |L1.19058|
0049f0  f04f0120          MOV      r1,#0x20              ;7673
0049f4  77e1              STRB     r1,[r4,#0x1f]         ;7673
0049f6  f1000001          ADD      r0,r0,#1              ;7674
0049fa  87a0              STRH     r0,[r4,#0x3c]         ;7674
0049fc  e039              B        |L1.19058|
                  |L1.18942|
0049fe  dd38              BLE      |L1.19058|
004a00  f04f0121          MOV      r1,#0x21              ;7680
004a04  77e1              STRB     r1,[r4,#0x1f]         ;7680
004a06  f9b91000          LDRSH    r1,[r9,#0]            ;7681  ; UB0
004a0a  f9ba3000          LDRSH    r3,[r10,#0]           ;7681  ; UB20
004a0e  eba10103          SUB      r1,r1,r3              ;7681
004a12  eb010302          ADD      r3,r1,r2              ;7681
004a16  4563              CMP      r3,r12                ;7681
004a18  da0d              BGE      |L1.18998|
004a1a  f04f0122          MOV      r1,#0x22              ;7683
004a1e  77e1              STRB     r1,[r4,#0x1f]         ;7683
004a20  f8b41068          LDRH     r1,[r4,#0x68]         ;7684  ; cntrl_stat_blok_cnt
004a24  b119              CBZ      r1,|L1.18990|
004a26  f1a00001          SUB      r0,r0,#1              ;7684
004a2a  87a0              STRH     r0,[r4,#0x3c]         ;7684
004a2c  e021              B        |L1.19058|
                  |L1.18990|
004a2e  f1a0000a          SUB      r0,r0,#0xa            ;7685
004a32  87a0              STRH     r0,[r4,#0x3c]         ;7685
004a34  e01d              B        |L1.19058|
                  |L1.18998|
004a36  17cb              ASRS     r3,r1,#31             ;7687
004a38  eb017193          ADD      r1,r1,r3,LSR #30      ;7687
004a3c  eb0201a1          ADD      r1,r2,r1,ASR #2       ;7687
004a40  4561              CMP      r1,r12                ;7687
004a42  da0d              BGE      |L1.19040|
004a44  f04f0123          MOV      r1,#0x23              ;7689
004a48  77e1              STRB     r1,[r4,#0x1f]         ;7689
004a4a  f8b41068          LDRH     r1,[r4,#0x68]         ;7690  ; cntrl_stat_blok_cnt
004a4e  b119              CBZ      r1,|L1.19032|
004a50  f1a00001          SUB      r0,r0,#1              ;7690
004a54  87a0              STRH     r0,[r4,#0x3c]         ;7690
004a56  e00c              B        |L1.19058|
                  |L1.19032|
004a58  f1a00002          SUB      r0,r0,#2              ;7691
004a5c  87a0              STRH     r0,[r4,#0x3c]         ;7691
004a5e  e008              B        |L1.19058|
                  |L1.19040|
004a60  1c52              ADDS     r2,r2,#1              ;7693
004a62  4594              CMP      r12,r2                ;7693
004a64  dd05              BLE      |L1.19058|
004a66  f04f0124          MOV      r1,#0x24              ;7695
004a6a  77e1              STRB     r1,[r4,#0x1f]         ;7695
004a6c  f1a00001          SUB      r0,r0,#1              ;7696
004a70  87a0              STRH     r0,[r4,#0x3c]         ;7696
                  |L1.19058|
004a72  48ff              LDR      r0,|L1.20080|
004a74  f8941020          LDRB     r1,[r4,#0x20]         ;7700  ; vz1_stat
004a78  7800              LDRB     r0,[r0,#0]            ;7700  ; hv_vz_stat
004a7a  4308              ORRS     r0,r0,r1              ;7700
004a7c  f8941023          LDRB     r1,[r4,#0x23]         ;7700  ; vz2_stat
004a80  4308              ORRS     r0,r0,r1              ;7700
004a82  d10d              BNE      |L1.19104|
004a84  48fb              LDR      r0,|L1.20084|
004a86  7840              LDRB     r0,[r0,#1]            ;7702  ; sk_stat
004a88  2801              CMP      r0,#1                 ;7702
004a8a  d109              BNE      |L1.19104|
004a8c  48fa              LDR      r0,|L1.20088|
004a8e  7840              LDRB     r0,[r0,#1]            ;7702  ; sk_stat_old
004a90  b930              CBNZ     r0,|L1.19104|
004a92  48fa              LDR      r0,|L1.20092|
004a94  8800              LDRH     r0,[r0,#0]            ;7702  ; VZ_KIND
004a96  2801              CMP      r0,#1                 ;7702
004a98  d102              BNE      |L1.19104|
004a9a  f04f0032          MOV      r0,#0x32              ;7702
004a9e  87a0              STRH     r0,[r4,#0x3c]         ;7702
                  |L1.19104|
004aa0  f24032f2          MOV      r2,#0x3f2             ;7705
004aa4  210a              MOVS     r1,#0xa               ;7705
004aa6  48f6              LDR      r0,|L1.20096|
004aa8  f7fffffe          BL       gran
004aac  8fa0              LDRH     r0,[r4,#0x3c]         ;7706  ; cntrl_stat_new
004aae  8520              STRH     r0,[r4,#0x28]         ;7706
004ab0  84e0              STRH     r0,[r4,#0x26]         ;7707
004ab2  48f4              LDR      r0,|L1.20100|
004ab4  f9b00000          LDRSH    r0,[r0,#0]            ;7709  ; ICA_EN
004ab8  b930              CBNZ     r0,|L1.19144|
004aba  8839              LDRH     r1,[r7,#0]  ; ica_cntrl_hndl_cnt
004abc  b121              CBZ      r1,|L1.19144|
;;;7712   			{
;;;7713   			cntrl_stat = ica_cntrl_hndl;
004abe  49f2              LDR      r1,|L1.20104|
004ac0  8809              LDRH     r1,[r1,#0]  ; ica_cntrl_hndl
004ac2  84e1              STRH     r1,[r4,#0x26]
;;;7714   			cntrl_stat_new = ica_cntrl_hndl;//=10*PWM_START;
004ac4  87a1              STRH     r1,[r4,#0x3c]
;;;7715   			cntrl_stat_old = ica_cntrl_hndl;//=10*PWM_START;
004ac6  8521              STRH     r1,[r4,#0x28]
                  |L1.19144|
;;;7716   			}
;;;7717   		}
;;;7718   	
;;;7719   	if((ICA_EN==1)||(ICA_EN==2))
004ac8  2801              CMP      r0,#1
004aca  d001              BEQ      |L1.19152|
004acc  2802              CMP      r0,#2
004ace  d104              BNE      |L1.19162|
                  |L1.19152|
;;;7720   		{
;;;7721   		cntrl_stat=cntrl_stat_new+ica_u_necc;
004ad0  49ee              LDR      r1,|L1.20108|
004ad2  8fa0              LDRH     r0,[r4,#0x3c]  ; cntrl_stat_new
004ad4  8809              LDRH     r1,[r1,#0]  ; ica_u_necc
004ad6  4408              ADD      r0,r0,r1
004ad8  84e0              STRH     r0,[r4,#0x26]
                  |L1.19162|
;;;7722   		}			
;;;7723   	}
;;;7724   #else
;;;7725   else if((b1Hz_ch)&&((!bIBAT_SMKLBR)||(bps[8]._cnt>40)))
;;;7726   	{
;;;7727   	cntrl_hndl_plazma=37;
;;;7728   	cntrl_stat_new=cntrl_stat_old;
;;;7729   	
;;;7730   	if((Ibmax/10)>(2*IZMAX_))
;;;7731   		{
;;;7732   		cntrl_hndl_plazma=38;
;;;7733             if(cntrl_stat_blok_cnt)cntrl_stat_new--;
;;;7734   		else	cntrl_stat_new-=10;
;;;7735   		}		
;;;7736   	else if(((Ibmax/10)<(IZMAX_*2))&&(Ibmax>(IZMAX_*15)))
;;;7737   		{
;;;7738   		cntrl_hndl_plazma=39;
;;;7739             if(cntrl_stat_blok_cnt)cntrl_stat_new--;
;;;7740             else	cntrl_stat_new-=3;
;;;7741   		}   
;;;7742   	else if((Ibmax<(IZMAX_*15))&&((Ibmax/10)>IZMAX_))
;;;7743   		{
;;;7744   		cntrl_hndl_plazma=40;
;;;7745   		cntrl_stat_new--;
;;;7746   		}
;;;7747   		
;;;7748   	else if(load_U<u_necc)
;;;7749   		{
;;;7750   		cntrl_hndl_plazma=41;
;;;7751   		if(load_U<(u_necc-(UB0-UB20)))
;;;7752   			{
;;;7753   			cntrl_hndl_plazma=42;
;;;7754   			if(Ibmax<0)
;;;7755   				{
;;;7756   				cntrl_hndl_plazma=43;
;;;7757                       if(cntrl_stat_blok_cnt)cntrl_stat_new++;
;;;7758   				else cntrl_stat_new+=10;
;;;7759   				}
;;;7760   			else if(Ibmax<(IZMAX_*5))
;;;7761   				{
;;;7762   				cntrl_hndl_plazma=44;
;;;7763                       if(cntrl_stat_blok_cnt)cntrl_stat_new++;
;;;7764   				else	cntrl_stat_new+=2;
;;;7765   				}
;;;7766   			else if(Ibmax<((IZMAX_*95)/10))
;;;7767   				{
;;;7768   				cntrl_hndl_plazma=45;
;;;7769   				cntrl_stat_new++;
;;;7770   				}					
;;;7771   			}
;;;7772   		else if(load_U<(u_necc-((UB0-UB20)/4)))
;;;7773   			{
;;;7774   			cntrl_hndl_plazma=46;
;;;7775   			if(Ibmax<(IZMAX_*5))
;;;7776   				{
;;;7777   				cntrl_hndl_plazma=47;
;;;7778                       if(cntrl_stat_blok_cnt)cntrl_stat_new++;
;;;7779   				else	cntrl_stat_new+=2;
;;;7780   				}
;;;7781   			else if(Ibmax<((IZMAX_*95)/10))
;;;7782   				{
;;;7783   				cntrl_hndl_plazma=48;
;;;7784   				cntrl_stat_new++;
;;;7785   				}					
;;;7786   			}	
;;;7787   		else if(load_U<(u_necc-1))
;;;7788   			{
;;;7789   			cntrl_hndl_plazma=49;
;;;7790   			if(Ibmax<((IZMAX_*95)/10))
;;;7791   				{
;;;7792   				cntrl_hndl_plazma=50;
;;;7793   				cntrl_stat_new++;
;;;7794   				}					
;;;7795   			}					
;;;7796   		}	
;;;7797   	else if((load_U>u_necc)/*&&(!cntrl_blok)*/)
;;;7798   		{
;;;7799   		cntrl_hndl_plazma=51;
;;;7800   		if(load_U>(u_necc+(UB0-UB20)))
;;;7801   			{
;;;7802   			cntrl_hndl_plazma=52;
;;;7803                  if(cntrl_stat_blok_cnt)cntrl_stat_new--;
;;;7804   			else	cntrl_stat_new-=10;
;;;7805   			}
;;;7806   		else if(load_U>(u_necc+((UB0-UB20)/4)))
;;;7807   			{
;;;7808   			cntrl_hndl_plazma=53;
;;;7809                  if(cntrl_stat_blok_cnt)cntrl_stat_new--;
;;;7810   			else cntrl_stat_new-=2;
;;;7811   			}	
;;;7812   		else if(load_U>(u_necc+1))
;;;7813   			{
;;;7814   			cntrl_hndl_plazma=54;
;;;7815   			cntrl_stat_new--;
;;;7816   			}					
;;;7817   		}
;;;7818   
;;;7819   	gran(&cntrl_stat_new,10,1010);			
;;;7820   	cntrl_stat_old=cntrl_stat_new;
;;;7821   	cntrl_stat=cntrl_stat_new;	
;;;7822   	}
;;;7823   #endif
;;;7824   
;;;7825   iiii=0;
004ada  72a5              STRB     r5,[r4,#0xa]
;;;7826   for(i=0;i<NUMIST;i++)
004adc  7265              STRB     r5,[r4,#9]
004ade  48ec              LDR      r0,|L1.20112|
004ae0  4659              MOV      r1,r11                ;7607
004ae2  f9b02000          LDRSH    r2,[r0,#0]
004ae6  e00c              B        |L1.19202|
                  |L1.19176|
;;;7827        {
;;;7828        if(bps[i]._cnt<30)iiii=1;
004ae8  ebc003c0          RSB      r3,r0,r0,LSL #3
004aec  eb031300          ADD      r3,r3,r0,LSL #4
004af0  eb010383          ADD      r3,r1,r3,LSL #2
004af4  78db              LDRB     r3,[r3,#3]
004af6  2b1e              CMP      r3,#0x1e
004af8  d200              BCS      |L1.19196|
004afa  72a6              STRB     r6,[r4,#0xa]
                  |L1.19196|
004afc  f1000001          ADD      r0,r0,#1              ;7826
004b00  7260              STRB     r0,[r4,#9]            ;7826
                  |L1.19202|
004b02  7a60              LDRB     r0,[r4,#9]            ;7826  ; i
004b04  4290              CMP      r0,r2                 ;7826
004b06  dbef              BLT      |L1.19176|
;;;7829        }
;;;7830   
;;;7831   if(iiii==0)
004b08  7aa0              LDRB     r0,[r4,#0xa]  ; iiii
004b0a  b920              CBNZ     r0,|L1.19222|
;;;7832        {
;;;7833        cntrl_stat=600;	
004b0c  f44f7016          MOV      r0,#0x258
004b10  84e0              STRH     r0,[r4,#0x26]
;;;7834        cntrl_stat_old=600;
004b12  8520              STRH     r0,[r4,#0x28]
;;;7835        cntrl_stat_new=600;
004b14  87a0              STRH     r0,[r4,#0x3c]
                  |L1.19222|
;;;7836   	#ifdef UKU_TELECORE2015
;;;7837   	//cntrl_stat=0;
;;;7838   	//cntrl_stat_old=0;
;;;7839   	//cntrl_stat_new=0;
;;;7840   	#endif
;;;7841        }
;;;7842   
;;;7843   #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;7844   if(ica_cntrl_hndl_cnt)	ica_cntrl_hndl_cnt--;
004b16  f9b70000          LDRSH    r0,[r7,#0]  ; ica_cntrl_hndl_cnt
004b1a  b110              CBZ      r0,|L1.19234|
004b1c  f1a00001          SUB      r0,r0,#1
004b20  8038              STRH     r0,[r7,#0]
                  |L1.19234|
;;;7845   
;;;7846   
;;;7847   
;;;7848   #endif
;;;7849   
;;;7850   
;;;7851   gran(&cntrl_stat,10,1010); 
004b22  48d7              LDR      r0,|L1.20096|
004b24  f24032f2          MOV      r2,#0x3f2
004b28  210a              MOVS     r1,#0xa
004b2a  3816              SUBS     r0,r0,#0x16
004b2c  f7fffffe          BL       gran
;;;7852   b1Hz_ch=0;
004b30  7225              STRB     r5,[r4,#8]
                  |L1.19250|
;;;7853   }
004b32  e8bd9ff0          POP      {r4-r12,pc}
;;;7854   #endif
                          ENDP

                  ext_drv PROC
;;;8343   //-----------------------------------------------
;;;8344   void ext_drv(void)
004b36  e92d5ff0          PUSH     {r4-r12,lr}
;;;8345   {
;;;8346   char i;
;;;8347   
;;;8348   
;;;8349   for(i=0;i<NUMSK;i++)
004b3a  f04f0000          MOV      r0,#0
004b3e  4ad6              LDR      r2,|L1.20120|
;;;8350   	{
;;;8351   	#ifdef UKU_MGTS
;;;8352   	if(adc_buff_[sk_buff_RSTKM[i]]<2000)
;;;8353   	#endif
;;;8354   	#ifdef UKU_RSTKM
;;;8355   	if(adc_buff_[sk_buff_RSTKM[i]]<2000)
;;;8356   	#endif
;;;8357   	#ifdef UKU_3U
;;;8358   	if(adc_buff_[sk_buff_3U[i]]<2000)
;;;8359   	#endif
;;;8360   	#ifdef UKU_GLONASS
;;;8361   	if(adc_buff_[sk_buff_GLONASS[i]]<2000)
;;;8362   	#endif
;;;8363   	#ifdef UKU_KONTUR
;;;8364   	if(adc_buff_[sk_buff_KONTUR[i]]<2000)
;;;8365   	#endif
;;;8366   	#ifdef UKU_6U
;;;8367   	if(adc_buff_[sk_buff_6U[i]]<2000)
;;;8368   	#endif
;;;8369   	#ifdef UKU_220
;;;8370   	if(adc_buff_[sk_buff_220[i]]<2000)
;;;8371   	#endif
;;;8372   	#ifdef UKU_220_V2
;;;8373   	if(adc_buff_[sk_buff_220[i]]<2000)
;;;8374   	#endif
;;;8375   	#ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;8376   	if(adc_buff_[sk_buff_220[i]]<2000)
;;;8377   	#endif
;;;8378   	#ifdef UKU_TELECORE2015	
;;;8379   	if(adc_buff_[sk_buff_TELECORE2015[i]]<2000)	 //TODO
;;;8380   	#endif
;;;8381   	#ifdef UKU_TELECORE2017
;;;8382   	if(adc_buff_[sk_buff_TELECORE2015[i]]<2000)	 //TODO
;;;8383   	#endif
;;;8384   	#ifdef IPS_SGEP_GAZPROM
;;;8385   	if(adc_buff_[sk_buff_6U[i]]<2000)
;;;8386   	#endif		
;;;8387   		{
;;;8388   		if(sk_cnt[i]<10)
004b40  4bd4              LDR      r3,|L1.20116|
;;;8389   			{
;;;8390   			sk_cnt[i]++;
;;;8391   			if(sk_cnt[i]>=10)
;;;8392   				{
;;;8393   				sk_stat[i]=ssON;
004b42  4dcc              LDR      r5,|L1.20084|
004b44  f04f0a01          MOV      r10,#1
;;;8394   				}
;;;8395   			}
;;;8396   		else 
;;;8397   			{
;;;8398   			sk_cnt[i]=10;
004b48  f04f0b0a          MOV      r11,#0xa
004b4c  4606              MOV      r6,r0                 ;8349
004b4e  f9b24000          LDRSH    r4,[r2,#0]            ;8349
004b52  e025              B        |L1.19360|
                  |L1.19284|
004b54  49d1              LDR      r1,|L1.20124|
004b56  4fd2              LDR      r7,|L1.20128|
004b58  5c09              LDRB     r1,[r1,r0]            ;8376
004b5a  f9371011          LDRSH    r1,[r7,r1,LSL #1]     ;8376
004b5e  f5b16ffa          CMP      r1,#0x7d0             ;8376
004b62  da0e              BGE      |L1.19330|
004b64  5619              LDRSB    r1,[r3,r0]            ;8388
004b66  290a              CMP      r1,#0xa               ;8388
004b68  da08              BGE      |L1.19324|
004b6a  f1010101          ADD      r1,r1,#1              ;8390
004b6e  b249              SXTB     r1,r1                 ;8390
004b70  5419              STRB     r1,[r3,r0]            ;8390
004b72  290a              CMP      r1,#0xa               ;8391
004b74  db11              BLT      |L1.19354|
004b76  f805a000          STRB     r10,[r5,r0]           ;8393
004b7a  e00e              B        |L1.19354|
                  |L1.19324|
004b7c  f803b000          STRB     r11,[r3,r0]
004b80  e00b              B        |L1.19354|
                  |L1.19330|
;;;8399   			}
;;;8400                  
;;;8401   		}
;;;8402   	else
;;;8403   		{
;;;8404   		if(sk_cnt[i]>0)
004b82  5619              LDRSB    r1,[r3,r0]
004b84  2900              CMP      r1,#0
004b86  dd07              BLE      |L1.19352|
;;;8405   			{
;;;8406   			sk_cnt[i]--;
004b88  f1a10101          SUB      r1,r1,#1
004b8c  b249              SXTB     r1,r1
004b8e  5419              STRB     r1,[r3,r0]
;;;8407   			if(sk_cnt[i]<=0)
004b90  2900              CMP      r1,#0
004b92  dc02              BGT      |L1.19354|
;;;8408   				{
;;;8409   				sk_stat[i]=ssOFF;
004b94  542e              STRB     r6,[r5,r0]
004b96  e000              B        |L1.19354|
                  |L1.19352|
;;;8410   				}
;;;8411   			}
;;;8412   		else 
;;;8413   			{
;;;8414   			sk_cnt[i]=0;
004b98  541e              STRB     r6,[r3,r0]
                  |L1.19354|
004b9a  f1000001          ADD      r0,r0,#1              ;8349
004b9e  b2c0              UXTB     r0,r0                 ;8349
                  |L1.19360|
004ba0  42a0              CMP      r0,r4                 ;8349
004ba2  dbd7              BLT      |L1.19284|
;;;8415   			}
;;;8416   		}
;;;8417   	}
;;;8418   
;;;8419   for(i=0;i<NUMSK;i++)
004ba4  f04f0400          MOV      r4,#0
;;;8420   	{
;;;8421   	if(((SK_SIGN[i]==0)&&(sk_stat[i]==ssON))||((SK_SIGN[i])&&(sk_stat[i]==ssOFF)) )
;;;8422   		{
;;;8423   		if(sk_av_cnt[i]<10)
004ba8  f8df92f8          LDR      r9,|L1.20132|
;;;8424   			{
;;;8425   			sk_av_cnt[i]++;
;;;8426   			if(sk_av_cnt[i]>=10)
;;;8427   				{
;;;8428   				sk_av_stat[i]=sasON;
004bac  4fbe              LDR      r7,|L1.20136|
;;;8429   				}
;;;8430   			}
;;;8431   		else 
;;;8432   			{
;;;8433   			sk_av_cnt[i]=10;
;;;8434   			}
;;;8435   		}
;;;8436   	else
;;;8437   		{
;;;8438   		if(sk_av_cnt[i]>=0)
;;;8439   			{
;;;8440   			sk_av_cnt[i]--;
;;;8441   			if(sk_av_cnt[i]<=0)
;;;8442   				{
;;;8443   				sk_av_stat[i]=sasOFF;
;;;8444   				}
;;;8445   			}
;;;8446   		else 
;;;8447   			{
;;;8448   			sk_av_cnt[i]=0;
;;;8449   			}
;;;8450   		}
;;;8451   
;;;8452   #ifndef UKU_KONTUR
;;;8453   	if(sk_av_stat_old[i]!=sk_av_stat[i])
004bae  f8df82fc          LDR      r8,|L1.20140|
004bb2  e083              B        |L1.19644|
                  |L1.19380|
004bb4  48be              LDR      r0,|L1.20144|
004bb6  f9300014          LDRSH    r0,[r0,r4,LSL #1]     ;8421
004bba  b910              CBNZ     r0,|L1.19394|
004bbc  5d29              LDRB     r1,[r5,r4]            ;8421
004bbe  2901              CMP      r1,#1                 ;8421
004bc0  d00f              BEQ      |L1.19426|
                  |L1.19394|
004bc2  b108              CBZ      r0,|L1.19400|
004bc4  5d28              LDRB     r0,[r5,r4]            ;8421
004bc6  b160              CBZ      r0,|L1.19426|
                  |L1.19400|
004bc8  f9190004          LDRSB    r0,[r9,r4]            ;8438
004bcc  2800              CMP      r0,#0                 ;8438
004bce  db19              BLT      |L1.19460|
004bd0  f1a00001          SUB      r0,r0,#1              ;8440
004bd4  b240              SXTB     r0,r0                 ;8440
004bd6  f8090004          STRB     r0,[r9,r4]            ;8440
004bda  2800              CMP      r0,#0                 ;8441
004bdc  dc14              BGT      |L1.19464|
004bde  553e              STRB     r6,[r7,r4]            ;8443
004be0  e012              B        |L1.19464|
                  |L1.19426|
004be2  f9190004          LDRSB    r0,[r9,r4]            ;8423
004be6  280a              CMP      r0,#0xa               ;8423
004be8  da09              BGE      |L1.19454|
004bea  f1000001          ADD      r0,r0,#1              ;8425
004bee  b240              SXTB     r0,r0                 ;8425
004bf0  f8090004          STRB     r0,[r9,r4]            ;8425
004bf4  280a              CMP      r0,#0xa               ;8426
004bf6  db07              BLT      |L1.19464|
004bf8  f807a004          STRB     r10,[r7,r4]           ;8428
004bfc  e004              B        |L1.19464|
                  |L1.19454|
004bfe  f809b004          STRB     r11,[r9,r4]           ;8433
004c02  e001              B        |L1.19464|
                  |L1.19460|
004c04  f8096004          STRB     r6,[r9,r4]            ;8448
                  |L1.19464|
004c08  f8181004          LDRB     r1,[r8,r4]
004c0c  5d38              LDRB     r0,[r7,r4]
004c0e  4281              CMP      r1,r0
004c10  d04e              BEQ      |L1.19632|
;;;8454   		{
;;;8455   		plazma_sk++;
004c12  4a9b              LDR      r2,|L1.20096|
004c14  3a3c              SUBS     r2,r2,#0x3c
004c16  8f51              LDRH     r1,[r2,#0x3a]  ; plazma_sk
004c18  f1010101          ADD      r1,r1,#1
004c1c  8751              STRH     r1,[r2,#0x3a]
;;;8456   		if(sk_av_stat[i]==sasON)
004c1e  2801              CMP      r0,#1
004c20  d007              BEQ      |L1.19506|
;;;8457   			{
;;;8458   			if(i==0)snmp_trap_send("SK #1 Alarm",15,1,1);
;;;8459   			else if(i==1)
;;;8460   				{
;;;8461   				#ifndef UKU_TELEKORE2017
;;;8462   				snmp_trap_send("SK #2 Alarm",15,2,1);
;;;8463   				#endif
;;;8464   				#ifdef UKU_TELEKORE2017
;;;8465   				snmp_trap_send("Door open",15,2,1);
;;;8466   				#endif
;;;8467   				}
;;;8468   			else if(i==2)snmp_trap_send("SK #3 Alarm",15,3,1);
;;;8469   			else if(i==3)snmp_trap_send("SK #4 Alarm",15,4,1);
;;;8470   			}
;;;8471   		else 
;;;8472   			{
;;;8473   			if(i==0)snmp_trap_send("SK #1 Alarm is off",15,1,0);
004c22  b354              CBZ      r4,|L1.19578|
;;;8474   			else if(i==1)
004c24  2c01              CMP      r4,#1
004c26  d02f              BEQ      |L1.19592|
;;;8475   				{
;;;8476   				#ifndef UKU_TELEKORE2017
;;;8477   				snmp_trap_send("SK #2 Alarm is off",15,2,0);
;;;8478   				#endif
;;;8479   				#ifdef UKU_TELEKORE2017
;;;8480   				snmp_trap_send("Door open clear",15,2,0);
;;;8481   				#endif
;;;8482   				}
;;;8483   			else if(i==2)snmp_trap_send("SK #3 Alarm is off",15,3,0);
004c28  2c02              CMP      r4,#2
004c2a  d034              BEQ      |L1.19606|
;;;8484   			else if(i==3)snmp_trap_send("SK #4 Alarm is off",15,4,0);
004c2c  2c03              CMP      r4,#3
004c2e  d039              BEQ      |L1.19620|
004c30  e03e              B        |L1.19632|
                  |L1.19506|
004c32  b134              CBZ      r4,|L1.19522|
004c34  2c01              CMP      r4,#1                 ;8459
004c36  d00b              BEQ      |L1.19536|
004c38  2c02              CMP      r4,#2                 ;8468
004c3a  d010              BEQ      |L1.19550|
004c3c  2c03              CMP      r4,#3                 ;8469
004c3e  d015              BEQ      |L1.19564|
004c40  e036              B        |L1.19632|
                  |L1.19522|
004c42  2301              MOVS     r3,#1                 ;8458
004c44  461a              MOV      r2,r3                 ;8458
004c46  210f              MOVS     r1,#0xf               ;8458
004c48  a09a              ADR      r0,|L1.20148|
004c4a  f7fffffe          BL       snmp_trap_send
004c4e  e02f              B        |L1.19632|
                  |L1.19536|
004c50  2301              MOVS     r3,#1                 ;8462
004c52  2202              MOVS     r2,#2                 ;8462
004c54  210f              MOVS     r1,#0xf               ;8462
004c56  a09a              ADR      r0,|L1.20160|
004c58  f7fffffe          BL       snmp_trap_send
004c5c  e028              B        |L1.19632|
                  |L1.19550|
004c5e  2301              MOVS     r3,#1                 ;8468
004c60  2203              MOVS     r2,#3                 ;8468
004c62  210f              MOVS     r1,#0xf               ;8468
004c64  a099              ADR      r0,|L1.20172|
004c66  f7fffffe          BL       snmp_trap_send
004c6a  e021              B        |L1.19632|
                  |L1.19564|
004c6c  2301              MOVS     r3,#1                 ;8469
004c6e  2204              MOVS     r2,#4                 ;8469
004c70  210f              MOVS     r1,#0xf               ;8469
004c72  a099              ADR      r0,|L1.20184|
004c74  f7fffffe          BL       snmp_trap_send
004c78  e01a              B        |L1.19632|
                  |L1.19578|
004c7a  2300              MOVS     r3,#0                 ;8473
004c7c  2201              MOVS     r2,#1                 ;8473
004c7e  210f              MOVS     r1,#0xf               ;8473
004c80  a098              ADR      r0,|L1.20196|
004c82  f7fffffe          BL       snmp_trap_send
004c86  e013              B        |L1.19632|
                  |L1.19592|
004c88  2300              MOVS     r3,#0                 ;8477
004c8a  2202              MOVS     r2,#2                 ;8477
004c8c  210f              MOVS     r1,#0xf               ;8477
004c8e  a09a              ADR      r0,|L1.20216|
004c90  f7fffffe          BL       snmp_trap_send
004c94  e00c              B        |L1.19632|
                  |L1.19606|
004c96  2300              MOVS     r3,#0                 ;8483
004c98  2203              MOVS     r2,#3                 ;8483
004c9a  210f              MOVS     r1,#0xf               ;8483
004c9c  a09b              ADR      r0,|L1.20236|
004c9e  f7fffffe          BL       snmp_trap_send
004ca2  e005              B        |L1.19632|
                  |L1.19620|
004ca4  2300              MOVS     r3,#0
004ca6  2204              MOVS     r2,#4
004ca8  210f              MOVS     r1,#0xf
004caa  a09d              ADR      r0,|L1.20256|
004cac  f7fffffe          BL       snmp_trap_send
                  |L1.19632|
;;;8485   			}
;;;8486   	 	}
;;;8487   #endif
;;;8488   
;;;8489   #ifdef UKU_KONTUR
;;;8490   	if(sk_av_stat_old[i]!=sk_av_stat[i])
;;;8491   		{
;;;8492   		plazma_sk++;
;;;8493   		if(sk_av_stat[i]==sasON)
;;;8494   			{
;;;8495   			if(i==0)snmp_trap_send("Door is opened",15,1,1);
;;;8496   			else if(i==1)snmp_trap_send("Smoke Alarm",15,2,1);
;;;8497   			else if(i==2)snmp_trap_send("Shock Sensor Alarm",15,3,1);
;;;8498   			else if(i==3)snmp_trap_send("SK #4 Alarm",15,4,1);
;;;8499   			}
;;;8500   		else 
;;;8501   			{
;;;8502   			if(i==0)snmp_trap_send("Door is closed",15,1,0);
;;;8503   			else if(i==1)snmp_trap_send("Smoke Alarm is off",15,2,0);
;;;8504   			else if(i==2)snmp_trap_send("Shock Sensor Alarm is off",15,3,0);
;;;8505   			else if(i==3)snmp_trap_send("SK #4 Alarm is off",15,4,0);
;;;8506   			}
;;;8507   	 	}
;;;8508   #endif
;;;8509   	sk_av_stat_old[i]=sk_av_stat[i];
004cb0  5d38              LDRB     r0,[r7,r4]
004cb2  f8080004          STRB     r0,[r8,r4]
004cb6  f1040401          ADD      r4,r4,#1              ;8419
004cba  b2e4              UXTB     r4,r4                 ;8419
                  |L1.19644|
004cbc  4876              LDR      r0,|L1.20120|
004cbe  f9b00000          LDRSH    r0,[r0,#0]            ;8419  ; NUMSK
004cc2  4284              CMP      r4,r0                 ;8419
004cc4  f6ffaf76          BLT      |L1.19380|
;;;8510   	}
;;;8511   }
004cc8  e733              B        |L1.19250|
;;;8512   
                          ENDP

                  zar_superviser_start PROC
;;;8549   //-----------------------------------------------
;;;8550   void zar_superviser_start(void)
004cca  4a9a              LDR      r2,|L1.20276|
;;;8551   {
;;;8552   sign_U[0]=1;
004ccc  f04f0001          MOV      r0,#1
004cd0  7010              STRB     r0,[r2,#0]
;;;8553   sign_I[0]=1;
004cd2  4999              LDR      r1,|L1.20280|
004cd4  7008              STRB     r0,[r1,#0]
;;;8554   sign_U[1]=1;
004cd6  7050              STRB     r0,[r2,#1]
;;;8555   sign_I[1]=1;
004cd8  7048              STRB     r0,[r1,#1]
;;;8556   
;;;8557   }
004cda  4770              BX       lr
;;;8558   
                          ENDP

                  zar_superviser_drv PROC
;;;8514   //-----------------------------------------------
;;;8515   void zar_superviser_drv(void)
004cdc  e92d5ff0          PUSH     {r4-r12,lr}
;;;8516   {
;;;8517   
;;;8518   if(((bat[0]._Ub>u_necc_up) || (bat[0]._Ub<u_necc_dn))&&(main_kb_cnt<((TBAT*60)-30))&&(main_kb_cnt>((TBAT*60)-150))) sign_U[0]=0;
004ce0  4897              LDR      r0,|L1.20288|
004ce2  f8df9260          LDR      r9,|L1.20292|
004ce6  f8df8254          LDR      r8,|L1.20284|
004cea  f9b0c000          LDRSH    r12,[r0,#0]  ; u_necc_up
004cee  f9b90000          LDRSH    r0,[r9,#0]
004cf2  4c63              LDR      r4,|L1.20096|
004cf4  ebc01100          RSB      r1,r0,r0,LSL #4
004cf8  3c3c              SUBS     r4,r4,#0x3c
004cfa  f9b87002          LDRSH    r7,[r8,#2]  ; bat
004cfe  f06f0a1d          MVN      r10,#0x1d
004d02  f06f0b95          MVN      r11,#0x95
004d06  2500              MOVS     r5,#0
004d08  4e8a              LDR      r6,|L1.20276|
004d0a  f9b40046          LDRSH    r0,[r4,#0x46]
004d0e  eb0a0281          ADD      r2,r10,r1,LSL #2
004d12  eb0b0381          ADD      r3,r11,r1,LSL #2
004d16  4567              CMP      r7,r12
004d18  dc05              BGT      |L1.19750|
004d1a  f8dfc22c          LDR      r12,|L1.20296|
004d1e  f9bcc000          LDRSH    r12,[r12,#0]  ; u_necc_dn
004d22  4567              CMP      r7,r12
004d24  da04              BGE      |L1.19760|
                  |L1.19750|
004d26  4282              CMP      r2,r0
004d28  dd02              BLE      |L1.19760|
004d2a  4283              CMP      r3,r0
004d2c  da00              BGE      |L1.19760|
004d2e  7035              STRB     r5,[r6,#0]
                  |L1.19760|
;;;8519   
;;;8520   if(((bat[0]._Ib>(2*IKB)) || (bat[0]._Ib<(-IKB*2))) &&(main_kb_cnt<((TBAT*60)-30))&&(main_kb_cnt>((TBAT*60)-150))) sign_I[0]=0;
004d30  4f86              LDR      r7,|L1.20300|
004d32  f9b8c008          LDRSH    r12,[r8,#8]  ; bat
004d36  f9b7e000          LDRSH    lr,[r7,#0]  ; IKB
004d3a  4f7f              LDR      r7,|L1.20280|
004d3c  ebbc0f4e          CMP      r12,lr,LSL #1
004d40  dc04              BGT      |L1.19788|
004d42  f1ce0e00          RSB      lr,lr,#0
004d46  ebbc0f4e          CMP      r12,lr,LSL #1
004d4a  da04              BGE      |L1.19798|
                  |L1.19788|
004d4c  4282              CMP      r2,r0
004d4e  dd02              BLE      |L1.19798|
004d50  4283              CMP      r3,r0
004d52  da00              BGE      |L1.19798|
004d54  703d              STRB     r5,[r7,#0]
                  |L1.19798|
;;;8521   																 
;;;8522   if((main_kb_cnt==((TBAT*60)-10)) &&(spc_stat==spcOFF))
004d56  f06f0209          MVN      r2,#9
004d5a  eb020181          ADD      r1,r2,r1,LSL #2
004d5e  4281              CMP      r1,r0
004d60  d120              BNE      |L1.19876|
004d62  7d20              LDRB     r0,[r4,#0x14]  ; spc_stat
004d64  b9f0              CBNZ     r0,|L1.19876|
;;;8523   	{
;;;8524   	if((sign_U[0]==1) && (sign_I[0]==1) && (lc640_read_int(EE_BAT1_ZAR_CNT)!=BAT_C_REAL[0]) && (NUMBAT) && (!(bat[0]._av&1)))
004d66  7830              LDRB     r0,[r6,#0]  ; sign_U
004d68  2801              CMP      r0,#1
004d6a  d11b              BNE      |L1.19876|
004d6c  7838              LDRB     r0,[r7,#0]  ; sign_I
004d6e  2801              CMP      r0,#1
004d70  d118              BNE      |L1.19876|
004d72  f44f70d6          MOV      r0,#0x1ac
004d76  f7fffffe          BL       lc640_read_int
004d7a  4975              LDR      r1,|L1.20304|
004d7c  f9b11000          LDRSH    r1,[r1,#0]  ; BAT_C_REAL
004d80  4288              CMP      r0,r1
004d82  d00f              BEQ      |L1.19876|
004d84  4873              LDR      r0,|L1.20308|
004d86  8800              LDRH     r0,[r0,#0]  ; NUMBAT
004d88  b160              CBZ      r0,|L1.19876|
004d8a  f898003d          LDRB     r0,[r8,#0x3d]  ; bat
004d8e  07c0              LSLS     r0,r0,#31
004d90  d108              BNE      |L1.19876|
;;;8525   		{
;;;8526   		lc640_write_int(EE_BAT1_ZAR_CNT,BAT_C_REAL[0]);
004d92  f44f70d6          MOV      r0,#0x1ac
004d96  f7fffffe          BL       lc640_write_int
;;;8527   		superviser_cnt++;
004d9a  486f              LDR      r0,|L1.20312|
004d9c  7801              LDRB     r1,[r0,#0]  ; superviser_cnt
004d9e  f1010101          ADD      r1,r1,#1
004da2  7001              STRB     r1,[r0,#0]
                  |L1.19876|
;;;8528   		}
;;;8529   	
;;;8530   	}
;;;8531   
;;;8532   if(((bat[0]._Ub>u_necc_up) || (bat[1]._Ub<u_necc_dn))&&(main_kb_cnt<((TBAT*60)-30))&&(main_kb_cnt>((TBAT*60)-150))) sign_U[1]=0;
004da4  4866              LDR      r0,|L1.20288|
004da6  f9b81002          LDRSH    r1,[r8,#2]  ; bat
004daa  f9b00000          LDRSH    r0,[r0,#0]  ; u_necc_up
004dae  4281              CMP      r1,r0
004db0  dc06              BGT      |L1.19904|
004db2  4865              LDR      r0,|L1.20296|
004db4  f9b8104e          LDRSH    r1,[r8,#0x4e]  ; bat
004db8  f9b00000          LDRSH    r0,[r0,#0]  ; u_necc_dn
004dbc  4281              CMP      r1,r0
004dbe  da0e              BGE      |L1.19934|
                  |L1.19904|
004dc0  f9b90000          LDRSH    r0,[r9,#0]  ; TBAT
004dc4  f9b41046          LDRSH    r1,[r4,#0x46]  ; main_kb_cnt
004dc8  ebc01000          RSB      r0,r0,r0,LSL #4
004dcc  eb0a0280          ADD      r2,r10,r0,LSL #2
004dd0  428a              CMP      r2,r1
004dd2  dd04              BLE      |L1.19934|
004dd4  eb0b0080          ADD      r0,r11,r0,LSL #2
004dd8  4288              CMP      r0,r1
004dda  da00              BGE      |L1.19934|
004ddc  7075              STRB     r5,[r6,#1]
                  |L1.19934|
;;;8533   
;;;8534   if(((bat[1]._Ib>(2*IKB)) || (bat[1]._Ib<(-IKB*2))) &&(main_kb_cnt<((TBAT*60)-30))&&(main_kb_cnt>((TBAT*60)-150))) sign_I[1]=0;
004dde  495b              LDR      r1,|L1.20300|
004de0  f9b80054          LDRSH    r0,[r8,#0x54]  ; bat
004de4  f9b11000          LDRSH    r1,[r1,#0]  ; IKB
004de8  ebb00f41          CMP      r0,r1,LSL #1
004dec  dc03              BGT      |L1.19958|
004dee  4249              RSBS     r1,r1,#0
004df0  ebb00f41          CMP      r0,r1,LSL #1
004df4  da0e              BGE      |L1.19988|
                  |L1.19958|
004df6  f9b90000          LDRSH    r0,[r9,#0]  ; TBAT
004dfa  f9b41046          LDRSH    r1,[r4,#0x46]  ; main_kb_cnt
004dfe  ebc01000          RSB      r0,r0,r0,LSL #4
004e02  eb0a0280          ADD      r2,r10,r0,LSL #2
004e06  428a              CMP      r2,r1
004e08  dd04              BLE      |L1.19988|
004e0a  eb0b0080          ADD      r0,r11,r0,LSL #2
004e0e  4288              CMP      r0,r1
004e10  da00              BGE      |L1.19988|
004e12  707d              STRB     r5,[r7,#1]
                  |L1.19988|
;;;8535   																 
;;;8536   if((main_kb_cnt==((TBAT*60)-10)) &&(spc_stat==spcOFF))
004e14  f9b90000          LDRSH    r0,[r9,#0]  ; TBAT
004e18  ebc01100          RSB      r1,r0,r0,LSL #4
004e1c  f06f0009          MVN      r0,#9
004e20  eb000081          ADD      r0,r0,r1,LSL #2
004e24  f9b41046          LDRSH    r1,[r4,#0x46]  ; main_kb_cnt
004e28  4288              CMP      r0,r1
004e2a  d11f              BNE      |L1.20076|
004e2c  7d20              LDRB     r0,[r4,#0x14]  ; spc_stat
004e2e  b9e8              CBNZ     r0,|L1.20076|
;;;8537   	{
;;;8538   	if((sign_U[1]==1) && (sign_I[1]==1) && (lc640_read_int(EE_BAT2_ZAR_CNT)!=BAT_C_REAL[1]) && (NUMBAT==2) && (!(bat[1]._av&1)))
004e30  7870              LDRB     r0,[r6,#1]  ; sign_U
004e32  2801              CMP      r0,#1
004e34  d11a              BNE      |L1.20076|
004e36  7878              LDRB     r0,[r7,#1]  ; sign_I
004e38  2801              CMP      r0,#1
004e3a  d117              BNE      |L1.20076|
004e3c  f44f75e5          MOV      r5,#0x1ca
004e40  4628              MOV      r0,r5
004e42  f7fffffe          BL       lc640_read_int
004e46  4942              LDR      r1,|L1.20304|
004e48  f9b11002          LDRSH    r1,[r1,#2]  ; BAT_C_REAL
004e4c  4288              CMP      r0,r1
004e4e  d00d              BEQ      |L1.20076|
004e50  4840              LDR      r0,|L1.20308|
004e52  8800              LDRH     r0,[r0,#0]  ; NUMBAT
004e54  2802              CMP      r0,#2
004e56  d109              BNE      |L1.20076|
004e58  f8980089          LDRB     r0,[r8,#0x89]  ; bat
004e5c  07c0              LSLS     r0,r0,#31
004e5e  d105              BNE      |L1.20076|
;;;8539   		{
;;;8540   		lc640_write_int(EE_BAT2_ZAR_CNT,BAT_C_REAL[1]);
004e60  4628              MOV      r0,r5
004e62  f7fffffe          BL       lc640_write_int
;;;8541   		superviser_cnt++;
004e66  483c              LDR      r0,|L1.20312|
004e68  7801              LDRB     r1,[r0,#0]  ; superviser_cnt
004e6a  e077              B        |L1.20316|
                  |L1.20076|
004e6c  e079              B        |L1.20322|
004e6e  0000              DCW      0x0000
                  |L1.20080|
                          DCD      hv_vz_stat
                  |L1.20084|
                          DCD      sk_stat
                  |L1.20088|
                          DCD      sk_stat_old
                  |L1.20092|
                          DCD      VZ_KIND
                  |L1.20096|
                          DCD      ||area_number.23||+0x3c
                  |L1.20100|
                          DCD      ICA_EN
                  |L1.20104|
                          DCD      ica_cntrl_hndl
                  |L1.20108|
                          DCD      ica_u_necc
                  |L1.20112|
                          DCD      NUMIST
                  |L1.20116|
                          DCD      sk_cnt
                  |L1.20120|
                          DCD      NUMSK
                  |L1.20124|
                          DCD      ||area_number.17||
                  |L1.20128|
                          DCD      ||.bss||+0x400
                  |L1.20132|
                          DCD      sk_av_cnt
                  |L1.20136|
                          DCD      sk_av_stat
                  |L1.20140|
                          DCD      sk_av_stat_old
                  |L1.20144|
                          DCD      SK_SIGN
                  |L1.20148|
004eb4  534b2023          DCB      "SK #1 Alarm",0
004eb8  3120416c
004ebc  61726d00
                  |L1.20160|
004ec0  534b2023          DCB      "SK #2 Alarm",0
004ec4  3220416c
004ec8  61726d00
                  |L1.20172|
004ecc  534b2023          DCB      "SK #3 Alarm",0
004ed0  3320416c
004ed4  61726d00
                  |L1.20184|
004ed8  534b2023          DCB      "SK #4 Alarm",0
004edc  3420416c
004ee0  61726d00
                  |L1.20196|
004ee4  534b2023          DCB      "SK #1 Alarm is off",0
004ee8  3120416c
004eec  61726d20
004ef0  6973206f
004ef4  666600  
004ef7  00                DCB      0
                  |L1.20216|
004ef8  534b2023          DCB      "SK #2 Alarm is off",0
004efc  3220416c
004f00  61726d20
004f04  6973206f
004f08  666600  
004f0b  00                DCB      0
                  |L1.20236|
004f0c  534b2023          DCB      "SK #3 Alarm is off",0
004f10  3320416c
004f14  61726d20
004f18  6973206f
004f1c  666600  
004f1f  00                DCB      0
                  |L1.20256|
004f20  534b2023          DCB      "SK #4 Alarm is off",0
004f24  3420416c
004f28  61726d20
004f2c  6973206f
004f30  666600  
004f33  00                DCB      0
                  |L1.20276|
                          DCD      sign_U
                  |L1.20280|
                          DCD      sign_I
                  |L1.20284|
                          DCD      bat
                  |L1.20288|
                          DCD      u_necc_up
                  |L1.20292|
                          DCD      TBAT
                  |L1.20296|
                          DCD      u_necc_dn
                  |L1.20300|
                          DCD      IKB
                  |L1.20304|
                          DCD      BAT_C_REAL
                  |L1.20308|
                          DCD      NUMBAT
                  |L1.20312|
                          DCD      superviser_cnt
                  |L1.20316|
004f5c  f1010101          ADD      r1,r1,#1
004f60  7001              STRB     r1,[r0,#0]
                  |L1.20322|
;;;8542   		}
;;;8543   	
;;;8544   	}
;;;8545   
;;;8546   if(main_kb_cnt==((TBAT*60)-2)) zar_superviser_start();
004f62  f9b90000          LDRSH    r0,[r9,#0]  ; TBAT
004f66  f06f0101          MVN      r1,#1
004f6a  ebc01000          RSB      r0,r0,r0,LSL #4
004f6e  eb010080          ADD      r0,r1,r0,LSL #2
004f72  f9b41046          LDRSH    r1,[r4,#0x46]  ; main_kb_cnt
004f76  4288              CMP      r0,r1
004f78  d102              BNE      |L1.20352|
004f7a  e8bd5ff0          POP      {r4-r12,lr}
004f7e  e7fe              B        zar_superviser_start
                  |L1.20352|
;;;8547   }
004f80  e5d7              B        |L1.19250|
;;;8548   
                          ENDP

                  npn_hndl PROC
;;;8559   //-----------------------------------------------
;;;8560   void npn_hndl(void)
004f82  e92d03f0          PUSH     {r4-r9}
;;;8561   {
;;;8562   if(NPN_OUT!=npnoOFF)
004f86  48ff              LDR      r0,|L1.21380|
;;;8563   	{
;;;8564   /*	if(NPN_SIGN==npnsAVNET)
;;;8565   		{
;;;8566   		if(net_av==1)
;;;8567   			{
;;;8568   			if(npn_tz_cnt<TZNPN)
;;;8569   				{
;;;8570   				npn_tz_cnt++;
;;;8571   				if(npn_tz_cnt==TZNPN)
;;;8572   					{
;;;8573   					npn_stat=npnsOFF;
;;;8574   					}
;;;8575   				}
;;;8576   			}
;;;8577   		else
;;;8578   			{
;;;8579   			if(npn_tz_cnt)
;;;8580   				{
;;;8581   				npn_tz_cnt--;
;;;8582   				if(npn_tz_cnt==0)
;;;8583   					{
;;;8584   					npn_stat=npnsON;
;;;8585   					}
;;;8586   				}
;;;8587   			}
;;;8588   		}*/
;;;8589   /*	if(NPN_SIGN==npnsULOAD)
;;;8590   		{
;;;8591   		if(load_U<UONPN)
;;;8592   			{
;;;8593   			if(npn_tz_cnt<TZNPN)
;;;8594   				{
;;;8595   				npn_tz_cnt++;
;;;8596   				if(npn_tz_cnt==TZNPN)
;;;8597   					{
;;;8598   					npn_stat=npnsOFF;
;;;8599   					}
;;;8600   				}
;;;8601   			}
;;;8602   		else if(load_U>UVNPN)
;;;8603   			{
;;;8604   			if(npn_tz_cnt)
;;;8605   				{
;;;8606   				npn_tz_cnt--;
;;;8607   				if(npn_tz_cnt==0)
;;;8608   					{
;;;8609   					npn_stat=npnsON;
;;;8610   					}
;;;8611   				}
;;;8612   			}
;;;8613   		}*/
;;;8614   
;;;8615   	if((load_U<UONPN)&&((net_Ua<UMN)||(net_Ub<UMN)||(net_Uc<UMN)))
;;;8616   		{
;;;8617   		if(npn_tz_cnt<TZNPN)
004f88  4fff              LDR      r7,|L1.21384|
004f8a  f04f0c00          MOV      r12,#0                ;8562
004f8e  7800              LDRB     r0,[r0,#0]            ;8562  ; NPN_OUT
;;;8618   			{
;;;8619   			npn_tz_cnt++;
;;;8620   			if(npn_tz_cnt==TZNPN)
;;;8621   				{
;;;8622   				npn_stat=npnsOFF;
;;;8623   				}
;;;8624   			}
;;;8625   		}
;;;8626   	else if((load_U>UVNPN)&&(net_Ua>UMN)&&(net_Ub>UMN)&&(net_Uc>UMN))
;;;8627   		{
;;;8628   		if(npn_tz_cnt)
;;;8629   			{
;;;8630   			npn_tz_cnt--;
;;;8631   			if(npn_tz_cnt==0)
;;;8632   				{
;;;8633   				npn_stat=npnsON;
004f90  f04f0801          MOV      r8,#1
004f94  4efd              LDR      r6,|L1.21388|
004f96  b3e8              CBZ      r0,|L1.20500|
004f98  48fd              LDR      r0,|L1.21392|
004f9a  4639              MOV      r1,r7                 ;8617
004f9c  f9b05000          LDRSH    r5,[r0,#0]            ;8615  ; load_U
004fa0  48fc              LDR      r0,|L1.21396|
004fa2  f9b11000          LDRSH    r1,[r1,#0]            ;8617
004fa6  f9b09000          LDRSH    r9,[r0,#0]            ;8615  ; UONPN
004faa  48fb              LDR      r0,|L1.21400|
004fac  454d              CMP      r5,r9                 ;8615
004fae  f9b02000          LDRSH    r2,[r0,#0]            ;8615
004fb2  48fa              LDR      r0,|L1.21404|
004fb4  f9b03000          LDRSH    r3,[r0,#0]            ;8615
004fb8  48f9              LDR      r0,|L1.21408|
004fba  f9b04000          LDRSH    r4,[r0,#0]            ;8615
004fbe  48f9              LDR      r0,|L1.21412|
004fc0  f9b00000          LDRSH    r0,[r0,#0]            ;8615
004fc4  da13              BGE      |L1.20462|
004fc6  4282              CMP      r2,r0                 ;8615
004fc8  db03              BLT      |L1.20434|
004fca  4283              CMP      r3,r0                 ;8615
004fcc  db01              BLT      |L1.20434|
004fce  4284              CMP      r4,r0                 ;8615
004fd0  da0d              BGE      |L1.20462|
                  |L1.20434|
004fd2  48f5              LDR      r0,|L1.21416|
004fd4  f9b02000          LDRSH    r2,[r0,#0]            ;8617  ; TZNPN
004fd8  4291              CMP      r1,r2                 ;8617
004fda  da23              BGE      |L1.20516|
004fdc  f1010101          ADD      r1,r1,#1              ;8619
004fe0  b208              SXTH     r0,r1                 ;8619
004fe2  8038              STRH     r0,[r7,#0]            ;8619
004fe4  4290              CMP      r0,r2                 ;8620
004fe6  d11d              BNE      |L1.20516|
004fe8  f886c000          STRB     r12,[r6,#0]           ;8622
004fec  e01a              B        |L1.20516|
                  |L1.20462|
004fee  f8dfc3bc          LDR      r12,|L1.21420|
004ff2  f9bcc000          LDRSH    r12,[r12,#0]          ;8626  ; UVNPN
004ff6  4565              CMP      r5,r12                ;8626
004ff8  dd14              BLE      |L1.20516|
004ffa  4282              CMP      r2,r0                 ;8626
004ffc  dd12              BLE      |L1.20516|
004ffe  4283              CMP      r3,r0                 ;8626
005000  dd10              BLE      |L1.20516|
005002  4284              CMP      r4,r0                 ;8626
005004  dd0e              BLE      |L1.20516|
005006  b169              CBZ      r1,|L1.20516|
005008  f1a10101          SUB      r1,r1,#1              ;8630
00500c  b208              SXTH     r0,r1                 ;8630
00500e  8038              STRH     r0,[r7,#0]            ;8630
005010  b940              CBNZ     r0,|L1.20516|
005012  e000              B        |L1.20502|
                  |L1.20500|
005014  e002              B        |L1.20508|
                  |L1.20502|
005016  f8868000          STRB     r8,[r6,#0]
00501a  e003              B        |L1.20516|
                  |L1.20508|
;;;8634   				}
;;;8635   			}
;;;8636   		}
;;;8637   	}
;;;8638   else
;;;8639   	{
;;;8640   	npn_tz_cnt=0;
00501c  f8a7c000          STRH     r12,[r7,#0]
;;;8641   	npn_stat=npnsON;
005020  f8868000          STRB     r8,[r6,#0]
                  |L1.20516|
;;;8642   	}
;;;8643   
;;;8644   if(npn_stat==npnsOFF) mess_send(MESS2RELE_HNDL,PARAM_RELE_NPN,1,15);
005024  7830              LDRB     r0,[r6,#0]  ; npn_stat
005026  2800              CMP      r0,#0
005028  d107              BNE      |L1.20538|
00502a  e8bd03f0          POP      {r4-r9}
00502e  230f              MOVS     r3,#0xf
005030  2201              MOVS     r2,#1
005032  216e              MOVS     r1,#0x6e
005034  20d2              MOVS     r0,#0xd2
005036  f7ffbffe          B.W      mess_send
                  |L1.20538|
;;;8645   
;;;8646   
;;;8647   }
00503a  e8bd03f0          POP      {r4-r9}
00503e  4770              BX       lr
;;;8648   
                          ENDP

                  loadoff_hndl PROC
;;;8650   //-----------------------------------------------
;;;8651   void loadoff_hndl(void)
005040  b5f0              PUSH     {r4-r7,lr}
;;;8652   {
;;;8653   if((load_U>UONPN)||(load_U<UVNPN))
005042  48d3              LDR      r0,|L1.21392|
;;;8654   	{
;;;8655   	if(load_off_cnt<TZNPN)
005044  4dda              LDR      r5,|L1.21424|
;;;8656   		{
;;;8657   		load_off_cnt++;
;;;8658   		if(load_off_cnt>=TZNPN)
;;;8659   			{
;;;8660   			load_off_stat=npnsOFF;
005046  2700              MOVS     r7,#0
005048  f9b01000          LDRSH    r1,[r0,#0]            ;8653  ; load_U
00504c  48d1              LDR      r0,|L1.21396|
00504e  4ed9              LDR      r6,|L1.21428|
005050  f9b02000          LDRSH    r2,[r0,#0]            ;8653  ; UONPN
005054  f9b50000          LDRSH    r0,[r5,#0]            ;8655
005058  4291              CMP      r1,r2                 ;8653
00505a  dc04              BGT      |L1.20582|
00505c  4bd3              LDR      r3,|L1.21420|
00505e  f9b33000          LDRSH    r3,[r3,#0]            ;8653  ; UVNPN
005062  4299              CMP      r1,r3                 ;8653
005064  da0d              BGE      |L1.20610|
                  |L1.20582|
005066  49d0              LDR      r1,|L1.21416|
005068  f9b11000          LDRSH    r1,[r1,#0]            ;8655  ; TZNPN
00506c  4288              CMP      r0,r1                 ;8655
00506e  da1c              BGE      |L1.20650|
005070  f1000001          ADD      r0,r0,#1              ;8657
005074  b200              SXTH     r0,r0                 ;8657
005076  8028              STRH     r0,[r5,#0]            ;8657
005078  4288              CMP      r0,r1                 ;8658
00507a  db16              BLT      |L1.20650|
00507c  7037              STRB     r7,[r6,#0]
;;;8661   			load_off_cnt=TZNPN;
00507e  8029              STRH     r1,[r5,#0]
005080  e013              B        |L1.20650|
                  |L1.20610|
;;;8662   			}
;;;8663   		}
;;;8664   	}
;;;8665   else if((load_U>(UVNPN+dUNPN))&&(load_U<(UONPN-dUNPN)))
005082  4ccd              LDR      r4,|L1.21432|
005084  f9b44000          LDRSH    r4,[r4,#0]  ; dUNPN
005088  4423              ADD      r3,r3,r4
00508a  428b              CMP      r3,r1
00508c  da0d              BGE      |L1.20650|
00508e  1b12              SUBS     r2,r2,r4
005090  428a              CMP      r2,r1
005092  dd0a              BLE      |L1.20650|
;;;8666   	{
;;;8667   	if(load_off_cnt)
005094  b148              CBZ      r0,|L1.20650|
;;;8668   		{
;;;8669   		load_off_cnt--;
005096  f1a00001          SUB      r0,r0,#1
00509a  b200              SXTH     r0,r0
00509c  8028              STRH     r0,[r5,#0]
;;;8670   		if(load_off_cnt<=0)
00509e  2800              CMP      r0,#0
0050a0  dc03              BGT      |L1.20650|
;;;8671   			{
;;;8672   			load_off_stat=npnsON;
0050a2  f04f0001          MOV      r0,#1
0050a6  7030              STRB     r0,[r6,#0]
;;;8673   			load_off_cnt=0;
0050a8  802f              STRH     r7,[r5,#0]
                  |L1.20650|
;;;8674   			}
;;;8675   		}
;;;8676   	}
;;;8677   
;;;8678   
;;;8679   if(load_off_stat==npnsOFF) tloaddisable_cmnd=10;
0050aa  7830              LDRB     r0,[r6,#0]  ; load_off_stat
0050ac  2800              CMP      r0,#0
0050ae  d103              BNE      |L1.20664|
0050b0  49c2              LDR      r1,|L1.21436|
0050b2  f04f000a          MOV      r0,#0xa
0050b6  7008              STRB     r0,[r1,#0]
                  |L1.20664|
;;;8680   
;;;8681   
;;;8682   }
0050b8  bdf0              POP      {r4-r7,pc}
;;;8683   
                          ENDP

                  speedChargeStartStop PROC
;;;8848   //-----------------------------------------------
;;;8849   void speedChargeStartStop(void)
0050ba  b508              PUSH     {r3,lr}
;;;8850   {
;;;8851   /*if(speedChIsOn)
;;;8852   	{
;;;8853   	speedChIsOn=0;
;;;8854   	}
;;;8855   
;;;8856   else
;;;8857   	{
;;;8858   	if(speedChrgBlckStat==0)
;;;8859   		{
;;;8860   		speedChIsOn=1;
;;;8861   		speedChTimeCnt=0;
;;;8862   		}
;;;8863   	else
;;;8864   		{
;;;8865   		show_mess(	"     ”ÒÍÓÂÌÌ˚È     ",
;;;8866   	          		"       Á‡ˇ‰        ",
;;;8867   	          		"    Á‡·ÎÓÍËÓ‚‡Ì!   ",
;;;8868   	          		"                    ",2000);	 
;;;8869   		}
;;;8870   	}*/
;;;8871   
;;;8872   if(sp_ch_stat!=scsOFF)
0050bc  48c0              LDR      r0,|L1.21440|
0050be  7801              LDRB     r1,[r0,#0]  ; sp_ch_stat
0050c0  b141              CBZ      r1,|L1.20692|
;;;8873   	{
;;;8874   	sp_ch_stat=scsOFF;
0050c2  f04f0100          MOV      r1,#0
0050c6  7001              STRB     r1,[r0,#0]
;;;8875   	speedz_mem_hndl(10);
0050c8  e8bd4008          POP      {r3,lr}
0050cc  f04f000a          MOV      r0,#0xa
0050d0  f7ffbffe          B.W      speedz_mem_hndl
                  |L1.20692|
;;;8876   	}
;;;8877   
;;;8878   else
;;;8879   	{
;;;8880   	if((speedChrgBlckStat==0)&&(spc_stat==spcOFF)&&(vz1_stat==vz1sOFF)&&(vz2_stat==vz2sOFF))
0050d4  49bb              LDR      r1,|L1.21444|
0050d6  f9b12000          LDRSH    r2,[r1,#0]  ; speedChrgBlckStat
0050da  49bb              LDR      r1,|L1.21448|
0050dc  780b              LDRB     r3,[r1,#0]  ; spc_stat
0050de  431a              ORRS     r2,r2,r3
0050e0  7b0b              LDRB     r3,[r1,#0xc]  ; vz1_stat
0050e2  7bc9              LDRB     r1,[r1,#0xf]  ; vz2_stat
0050e4  431a              ORRS     r2,r2,r3
0050e6  430a              ORRS     r2,r2,r1
0050e8  d009              BEQ      |L1.20734|
;;;8881   		{
;;;8882   		sp_ch_stat=scsSTEP1;
;;;8883   		speedz_mem_hndl(1);
;;;8884   		}
;;;8885   	else 
;;;8886   		{
;;;8887   		show_mess(	"     ”ÒÍÓÂÌÌ˚È     ",
0050ea  f44f60fa          MOV      r0,#0x7d0
0050ee  9000              STR      r0,[sp,#0]
0050f0  4bb6              LDR      r3,|L1.21452|
0050f2  a2b7              ADR      r2,|L1.21456|
0050f4  a1bc              ADR      r1,|L1.21480|
0050f6  a0c2              ADR      r0,|L1.21504|
0050f8  f7fffffe          BL       show_mess
;;;8888   	          		"       Á‡ˇ‰        ",
;;;8889   	          		"    Á‡·ÎÓÍËÓ‚‡Ì!   ",
;;;8890   	          		"                    ",2000);
;;;8891   		}
;;;8892   	}
;;;8893   }
0050fc  bd08              POP      {r3,pc}
                  |L1.20734|
0050fe  f04f0101          MOV      r1,#1                 ;8882
005102  7001              STRB     r1,[r0,#0]            ;8882
005104  e8bd4008          POP      {r3,lr}               ;8883
005108  4608              MOV      r0,r1                 ;8883
00510a  f7ffbffe          B.W      speedz_mem_hndl
;;;8894   
                          ENDP

                  speedChargeHndl PROC
;;;8684   //-----------------------------------------------
;;;8685   void speedChargeHndl(void)
00510e  e92d4ff8          PUSH     {r3-r11,lr}
;;;8686   {
;;;8687   /*
;;;8688   if(sp_ch_stat==scsOFF)
;;;8689   	{
;;;8690   	if((sk_stat[1]==1)&&(sk_stat_old[1]=0))
;;;8691   	}*/
;;;8692   	 
;;;8693   if(sp_ch_stat==scsSTEP1)
005112  4fab              LDR      r7,|L1.21440|
;;;8694   	{
;;;8695   	if(sp_ch_stat_old!=sp_ch_stat)
005114  4dc1              LDR      r5,|L1.21532|
;;;8696   		{
;;;8697   		sp_ch_stat_cnt=5;
;;;8698   		}
;;;8699   	if(sp_ch_stat_cnt)
;;;8700   		{
;;;8701   		sp_ch_stat_cnt--;
;;;8702   		if(sp_ch_stat_cnt==0)
;;;8703   			{
;;;8704   			sp_ch_stat=scsERR1; 	//ÕÂ ‚ÍÎ˛˜ËÎ‡Ò¸ ‚ÂÌÚËÎˇˆËˇ;
;;;8705   
;;;8706   			}
;;;8707   		}
;;;8708   	if(sk_stat[0]==1)sp_ch_stat=scsWRK;
005116  f8df8300          LDR      r8,|L1.21528|
00511a  7839              LDRB     r1,[r7,#0]            ;8693  ; sp_ch_stat
00511c  7828              LDRB     r0,[r5,#0]            ;8695
00511e  4cc0              LDR      r4,|L1.21536|
005120  f04f0a02          MOV      r10,#2
005124  2901              CMP      r1,#1                 ;8693
005126  d115              BNE      |L1.20820|
005128  2801              CMP      r0,#1                 ;8695
00512a  d002              BEQ      |L1.20786|
00512c  f04f0105          MOV      r1,#5                 ;8697
005130  8021              STRH     r1,[r4,#0]            ;8697
                  |L1.20786|
005132  f9b41000          LDRSH    r1,[r4,#0]            ;8699  ; sp_ch_stat_cnt
005136  b139              CBZ      r1,|L1.20808|
005138  f1a10101          SUB      r1,r1,#1              ;8701
00513c  b209              SXTH     r1,r1                 ;8701
00513e  8021              STRH     r1,[r4,#0]            ;8701
005140  b911              CBNZ     r1,|L1.20808|
005142  f04f0103          MOV      r1,#3                 ;8704
005146  7039              STRB     r1,[r7,#0]            ;8704
                  |L1.20808|
005148  f8981000          LDRB     r1,[r8,#0]  ; sk_stat
00514c  2901              CMP      r1,#1
00514e  d101              BNE      |L1.20820|
005150  f887a000          STRB     r10,[r7,#0]
                  |L1.20820|
;;;8709   	}
;;;8710   
;;;8711   if(sp_ch_stat==scsWRK)
005154  7839              LDRB     r1,[r7,#0]  ; sp_ch_stat
005156  2600              MOVS     r6,#0
005158  2902              CMP      r1,#2
00515a  d11f              BNE      |L1.20892|
;;;8712   	{
;;;8713   	if(sp_ch_stat_old!=sp_ch_stat)
;;;8714   		{
;;;8715   		sp_ch_wrk_cnt=(signed long)speedChrgTimeInHour*3600L;
00515c  4ab1              LDR      r2,|L1.21540|
;;;8716   		hv_vz_up_cnt=0;
00515e  49b2              LDR      r1,|L1.21544|
005160  2802              CMP      r0,#2                 ;8713
005162  d008              BEQ      |L1.20854|
005164  48b1              LDR      r0,|L1.21548|
005166  f44f6361          MOV      r3,#0xe10             ;8715
00516a  f9b00000          LDRSH    r0,[r0,#0]            ;8715  ; speedChrgTimeInHour
00516e  fb00f003          MUL      r0,r0,r3              ;8715
005172  6010              STR      r0,[r2,#0]            ;8715  ; sp_ch_wrk_cnt
005174  600e              STR      r6,[r1,#0]  ; hv_vz_up_cnt
                  |L1.20854|
;;;8717   		}
;;;8718   	sp_ch_wrk_cnt--;
005176  6810              LDR      r0,[r2,#0]  ; sp_ch_wrk_cnt
005178  f1a00001          SUB      r0,r0,#1
00517c  6010              STR      r0,[r2,#0]  ; sp_ch_wrk_cnt
;;;8719   	hv_vz_up_cnt++;
00517e  680a              LDR      r2,[r1,#0]  ; hv_vz_up_cnt
005180  f1020201          ADD      r2,r2,#1
005184  600a              STR      r2,[r1,#0]  ; hv_vz_up_cnt
;;;8720   	if(sp_ch_wrk_cnt==0)
005186  b918              CBNZ     r0,|L1.20880|
;;;8721   		{
;;;8722   		sp_ch_stat=scsOFF;
005188  703e              STRB     r6,[r7,#0]
;;;8723   		speedz_mem_hndl(0);
00518a  2000              MOVS     r0,#0
00518c  f7fffffe          BL       speedz_mem_hndl
                  |L1.20880|
;;;8724   		}
;;;8725   	if(sk_stat[0]==0)sp_ch_stat=scsERR2;
005190  f8980000          LDRB     r0,[r8,#0]  ; sk_stat
005194  b910              CBNZ     r0,|L1.20892|
005196  f04f0004          MOV      r0,#4
00519a  7038              STRB     r0,[r7,#0]
                  |L1.20892|
;;;8726   	
;;;8727   	}
;;;8728   
;;;8729   if(sp_ch_stat==scsERR1)		//ŒÚÒÛÚÒÚ‚ÛÂÚ ‚ÂÌÚËÎˇˆËˇ ÔË ‚ÍÎ˛˜ÂÌËË
00519c  7838              LDRB     r0,[r7,#0]  ; sp_ch_stat
;;;8730   	{
;;;8731   	if((sp_ch_stat_old!=sp_ch_stat)||(sp_ch_stat_cnt==0))
;;;8732   		{
;;;8733   		sp_ch_stat_cnt=10;
;;;8734   		}
;;;8735   	sp_ch_stat_cnt--;
;;;8736   	if((sp_ch_stat_cnt==10)||(sp_ch_stat_cnt==9))
;;;8737   		{
;;;8738   		show_mess(	"  ”— Œ–≈ÕÕ€… «¿–ﬂƒ  ",
00519e  f2413b88          MOV      r11,#0x1388
0051a2  f04f090a          MOV      r9,#0xa               ;8733
0051a6  2803              CMP      r0,#3                 ;8729
0051a8  d119              BNE      |L1.20958|
0051aa  7828              LDRB     r0,[r5,#0]            ;8731  ; sp_ch_stat_old
0051ac  2803              CMP      r0,#3                 ;8731
0051ae  d101              BNE      |L1.20916|
0051b0  8820              LDRH     r0,[r4,#0]            ;8731  ; sp_ch_stat_cnt
0051b2  b908              CBNZ     r0,|L1.20920|
                  |L1.20916|
0051b4  f8a49000          STRH     r9,[r4,#0]            ;8733
                  |L1.20920|
0051b8  8820              LDRH     r0,[r4,#0]            ;8735  ; sp_ch_stat_cnt
0051ba  f1a00001          SUB      r0,r0,#1              ;8735
0051be  b200              SXTH     r0,r0                 ;8735
0051c0  8020              STRH     r0,[r4,#0]            ;8735
0051c2  280a              CMP      r0,#0xa               ;8736
0051c4  d001              BEQ      |L1.20938|
0051c6  2809              CMP      r0,#9                 ;8736
0051c8  d109              BNE      |L1.20958|
                  |L1.20938|
0051ca  4b99              LDR      r3,|L1.21552|
0051cc  a099              ADR      r0,|L1.21556|
0051ce  f1030218          ADD      r2,r3,#0x18
0051d2  f1020118          ADD      r1,r2,#0x18
0051d6  f8cdb000          STR      r11,[sp,#0]
0051da  f7fffffe          BL       show_mess
                  |L1.20958|
;;;8739   					"   Õ≈ ÃŒ∆≈“ ¡€“‹    ",
;;;8740   					"      ¬ Àﬁ◊≈Õ       ",
;;;8741   					"  ¡≈« ¬≈Õ“»Àﬂ÷»»!!  ",
;;;8742   					5000);
;;;8743   		}
;;;8744   	}
;;;8745   if(sp_ch_stat==scsERR2)		//œÓÔ‡Î‡ ‚ÂÌÚËÎˇˆËˇ ÔË ‡·ÓÚÂ
0051de  7838              LDRB     r0,[r7,#0]  ; sp_ch_stat
0051e0  2804              CMP      r0,#4
0051e2  d11f              BNE      |L1.21028|
;;;8746   	{
;;;8747   	if((sp_ch_stat_old!=sp_ch_stat)||(sp_ch_stat_cnt==0))
0051e4  7828              LDRB     r0,[r5,#0]  ; sp_ch_stat_old
0051e6  2804              CMP      r0,#4
0051e8  d101              BNE      |L1.20974|
0051ea  8820              LDRH     r0,[r4,#0]  ; sp_ch_stat_cnt
0051ec  b908              CBNZ     r0,|L1.20978|
                  |L1.20974|
;;;8748   		{
;;;8749   		sp_ch_stat_cnt=10;
0051ee  f8a49000          STRH     r9,[r4,#0]
                  |L1.20978|
;;;8750   		}
;;;8751   	sp_ch_stat_cnt--;
0051f2  8820              LDRH     r0,[r4,#0]  ; sp_ch_stat_cnt
0051f4  f1a00001          SUB      r0,r0,#1
0051f8  b200              SXTH     r0,r0
0051fa  8020              STRH     r0,[r4,#0]
;;;8752   	if((sp_ch_stat_cnt==10)||(sp_ch_stat_cnt==9))
0051fc  280a              CMP      r0,#0xa
0051fe  d001              BEQ      |L1.20996|
005200  2809              CMP      r0,#9
005202  d109              BNE      |L1.21016|
                  |L1.20996|
;;;8753   		{
;;;8754   		show_mess(	"  ”— Œ–≈ÕÕ€… «¿–ﬂƒ  ",
005204  4b91              LDR      r3,|L1.21580|
005206  a08b              ADR      r0,|L1.21556|
005208  f1030218          ADD      r2,r3,#0x18
00520c  f1020118          ADD      r1,r2,#0x18
005210  f8cdb000          STR      r11,[sp,#0]
005214  f7fffffe          BL       show_mess
                  |L1.21016|
;;;8755   					"    «¿¡ÀŒ »–Œ¬¿Õ    ",
;;;8756   					"     Õ≈»—œ–¿¬Õ¿     ",
;;;8757   					"    ¬≈Õ“»Àﬂ÷»ﬂ!!!   ",
;;;8758   					5000);
;;;8759   		}
;;;8760   	if(sk_stat[0]==1)sp_ch_stat=scsWRK;
005218  f8980000          LDRB     r0,[r8,#0]  ; sk_stat
00521c  2801              CMP      r0,#1
00521e  d101              BNE      |L1.21028|
005220  f887a000          STRB     r10,[r7,#0]
                  |L1.21028|
;;;8761   	}
;;;8762   
;;;8763   
;;;8764   sp_ch_stat_old=sp_ch_stat;
005224  7838              LDRB     r0,[r7,#0]  ; sp_ch_stat
005226  7028              STRB     r0,[r5,#0]
;;;8765   
;;;8766   
;;;8767   
;;;8768   if(speedChrgAvtEn==1)
005228  4989              LDR      r1,|L1.21584|
;;;8769   	{
;;;8770   	if((sp_ch_stat==scsOFF)&&(spc_stat==spcOFF)&&(vz1_stat==vz1sOFF)&&(vz2_stat==vz2sOFF))
;;;8771   		{
;;;8772   		if((load_U<u_necc)&&((u_necc-load_U)>speedChrgDU)&&(abs(Ib_ips_termokompensat/10-IZMAX)<5)&&(!speedChrgBlckStat))
00522a  4c66              LDR      r4,|L1.21444|
00522c  8809              LDRH     r1,[r1,#0]            ;8768  ; speedChrgAvtEn
00522e  2901              CMP      r1,#1                 ;8768
005230  d129              BNE      |L1.21126|
005232  4965              LDR      r1,|L1.21448|
005234  780a              LDRB     r2,[r1,#0]            ;8770  ; spc_stat
005236  4310              ORRS     r0,r0,r2              ;8770
005238  7b0a              LDRB     r2,[r1,#0xc]          ;8770  ; vz1_stat
00523a  7bc9              LDRB     r1,[r1,#0xf]          ;8770  ; vz2_stat
00523c  4310              ORRS     r0,r0,r2              ;8770
00523e  4308              ORRS     r0,r0,r1              ;8770
005240  d121              BNE      |L1.21126|
005242  4853              LDR      r0,|L1.21392|
005244  4983              LDR      r1,|L1.21588|
005246  f9b00000          LDRSH    r0,[r0,#0]  ; load_U
00524a  f9b11000          LDRSH    r1,[r1,#0]  ; u_necc
00524e  4288              CMP      r0,r1
005250  da19              BGE      |L1.21126|
005252  1a08              SUBS     r0,r1,r0
005254  4980              LDR      r1,|L1.21592|
005256  f9b11000          LDRSH    r1,[r1,#0]  ; speedChrgDU
00525a  4288              CMP      r0,r1
00525c  dd13              BLE      |L1.21126|
00525e  487f              LDR      r0,|L1.21596|
005260  497f              LDR      r1,|L1.21600|
005262  f9b00000          LDRSH    r0,[r0,#0]  ; Ib_ips_termokompensat
005266  8809              LDRH     r1,[r1,#0]  ; IZMAX
005268  fb90f0f9          SDIV     r0,r0,r9
00526c  1a40              SUBS     r0,r0,r1
00526e  b200              SXTH     r0,r0
005270  f7fffffe          BL       abs
005274  2805              CMP      r0,#5
005276  da06              BGE      |L1.21126|
005278  8820              LDRH     r0,[r4,#0]  ; speedChrgBlckStat
00527a  b920              CBNZ     r0,|L1.21126|
;;;8773   			{
;;;8774   			speedChargeStartStop();
00527c  f7fffffe          BL       speedChargeStartStop
;;;8775   			speedz_mem_hndl(5);
005280  2005              MOVS     r0,#5
005282  f7fffffe          BL       speedz_mem_hndl
                  |L1.21126|
;;;8776   			}
;;;8777   		}
;;;8778   	}
;;;8779   
;;;8780   
;;;8781   
;;;8782   /*
;;;8783   if(speedChIsOn)
;;;8784   	{
;;;8785   	speedChTimeCnt++;
;;;8786   	if(speedChTimeCnt>=((signed long)speedChrgTimeInHour*3600L))
;;;8787   		{
;;;8788   		speedChIsOn=0;
;;;8789   		}
;;;8790   	if(speedChrgBlckStat)
;;;8791   		{
;;;8792   		speedChIsOn=0;
;;;8793   		speedChTimeCnt=0;
;;;8794   		}
;;;8795   	}
;;;8796   
;;;8797   
;;;8798   
;;;8799   if(speedChrgAvtEn)
;;;8800   	{
;;;8801   	if(!speedChIsOn)
;;;8802   		{
;;;8803   		if((load_U<u_necc)&&((u_necc-load_U)>speedChrgDU)&&(abs(Ib_ips_termokompensat/10-IZMAX)<5)&&(!speedChrgBlckStat))
;;;8804   			{
;;;8805   			speedChIsOn=1;
;;;8806   			}
;;;8807   		}
;;;8808   	}
;;;8809   
;;;8810   
;;;8811   */
;;;8812   if(/*(speedChrgBlckSrc!=1)&&*/(speedChrgBlckSrc!=2)) speedChrgBlckStat=0;
005286  4877              LDR      r0,|L1.21604|
005288  8800              LDRH     r0,[r0,#0]  ; speedChrgBlckSrc
00528a  2802              CMP      r0,#2
00528c  d002              BEQ      |L1.21140|
00528e  8026              STRH     r6,[r4,#0]
                  |L1.21136|
;;;8813   else
;;;8814   	{
;;;8815   	speedChrgBlckStat=0;
;;;8816   	if(speedChrgBlckSrc==1)
;;;8817   		{
;;;8818   		if(((speedChrgBlckLog==0)&&(adc_buff_[11]>2000)) || ((speedChrgBlckLog==1)&&(adc_buff_[11]<2000))) speedChrgBlckStat=1;
;;;8819   		}
;;;8820   	else if(speedChrgBlckSrc==2)
;;;8821   		{
;;;8822   		if(((speedChrgBlckLog==0)&&(adc_buff_[13]>2000)) || ((speedChrgBlckLog==1)&&(adc_buff_[13]<2000))) speedChrgBlckStat=1;
;;;8823   		}
;;;8824   	}
;;;8825   
;;;8826   /*
;;;8827   if(speedChrgBlckStat==1)
;;;8828   	{
;;;8829   
;;;8830   	//speedChargeStartStop();
;;;8831   
;;;8832   	speedChrgShowCnt++;
;;;8833   	if(speedChrgShowCnt>=30)	
;;;8834   		{
;;;8835   		speedChrgShowCnt=0;
;;;8836   		show_mess(	"     ”— Œ–≈ÕÕ€…     ",
;;;8837   					"       «¿–ﬂƒ        ",
;;;8838   					"     «¿œ–≈Ÿ≈Õ!!!    ",
;;;8839   					"                    ",
;;;8840   					5000);
;;;8841   		}
;;;8842   	} 
;;;8843   else speedChrgShowCnt=0;  */
;;;8844   
;;;8845   
;;;8846   }
005290  e8bd8ff8          POP      {r3-r11,pc}
                  |L1.21140|
005294  8026              STRH     r6,[r4,#0]            ;8815
005296  4874              LDR      r0,|L1.21608|
005298  4974              LDR      r1,|L1.21612|
00529a  f44f63fa          MOV      r3,#0x7d0             ;8818
00529e  f9b00000          LDRSH    r0,[r0,#0]            ;8822  ; speedChrgBlckLog
0052a2  b918              CBNZ     r0,|L1.21164|
0052a4  f9b1201a          LDRSH    r2,[r1,#0x1a]         ;8822  ; adc_buff_
0052a8  429a              CMP      r2,r3                 ;8822
0052aa  dc05              BGT      |L1.21176|
                  |L1.21164|
0052ac  2801              CMP      r0,#1                 ;8822
0052ae  d1ef              BNE      |L1.21136|
0052b0  f9b1001a          LDRSH    r0,[r1,#0x1a]         ;8822  ; adc_buff_
0052b4  4298              CMP      r0,r3                 ;8822
0052b6  daeb              BGE      |L1.21136|
                  |L1.21176|
0052b8  f04f0001          MOV      r0,#1                 ;8822
0052bc  8020              STRH     r0,[r4,#0]            ;8822
0052be  e7e7              B        |L1.21136|
;;;8847   
                          ENDP

                  averageChargeHndl PROC
;;;8895   //-----------------------------------------------
;;;8896   void averageChargeHndl(void)
0052c0  e92d4ff8          PUSH     {r3-r11,lr}
;;;8897   {
;;;8898   /*
;;;8899   if(hv_vz_stat==hvsOFF)
;;;8900   	{
;;;8901   	if((sk_stat[1]==1)&&(sk_stat_old[1]=0))
;;;8902   	} */
;;;8903   if(hv_vz_stat==hvsSTEP1)
0052c4  f8dfa1a8          LDR      r10,|L1.21616|
;;;8904   	{
;;;8905   	if(hv_vz_stat_old!=hv_vz_stat)
;;;8906   		{
;;;8907   		hv_vz_stat_cnt=5;
;;;8908   		}
;;;8909   	if(hv_vz_stat_cnt)
;;;8910   		{
;;;8911   		hv_vz_stat_cnt--;
;;;8912   		if(hv_vz_stat_cnt==0)
;;;8913   			{
;;;8914   			hv_vz_stat=hvsERR1; 	//ÕÂ ‚ÍÎ˛˜ËÎ‡Ò¸ ‚ÂÌÚËÎˇˆËˇ;
;;;8915   			lc640_write(EE_HV_VZ_STAT,hvsERR1);
;;;8916   			}
;;;8917   		}
;;;8918   	if(sk_stat[0]==1)
0052c8  4e53              LDR      r6,|L1.21528|
0052ca  4d6a              LDR      r5,|L1.21620|
0052cc  f89a0000          LDRB     r0,[r10,#0]           ;8903  ; hv_vz_stat
0052d0  4c69              LDR      r4,|L1.21624|
0052d2  f04f0905          MOV      r9,#5                 ;8907
0052d6  2801              CMP      r0,#1                 ;8903
0052d8  d131              BNE      |L1.21310|
0052da  7828              LDRB     r0,[r5,#0]            ;8905  ; hv_vz_stat_old
0052dc  2801              CMP      r0,#1                 ;8905
0052de  d001              BEQ      |L1.21220|
0052e0  f8a49000          STRH     r9,[r4,#0]            ;8907
                  |L1.21220|
0052e4  f9b40000          LDRSH    r0,[r4,#0]            ;8909  ; hv_vz_stat_cnt
0052e8  b168              CBZ      r0,|L1.21254|
0052ea  f1a00001          SUB      r0,r0,#1              ;8911
0052ee  b200              SXTH     r0,r0                 ;8911
0052f0  8020              STRH     r0,[r4,#0]            ;8911
0052f2  b940              CBNZ     r0,|L1.21254|
0052f4  f04f0006          MOV      r0,#6                 ;8914
0052f8  f88a0000          STRB     r0,[r10,#0]           ;8914
0052fc  4601              MOV      r1,r0                 ;8915
0052fe  f44f70b4          MOV      r0,#0x168             ;8915
005302  f7fffffe          BL       lc640_write
                  |L1.21254|
005306  7830              LDRB     r0,[r6,#0]  ; sk_stat
005308  2801              CMP      r0,#1
00530a  d118              BNE      |L1.21310|
;;;8919   		{
;;;8920   		hv_vz_stat=hvsSTEP2;
00530c  f04f0002          MOV      r0,#2
005310  f88a0000          STRB     r0,[r10,#0]
;;;8921   		lc640_write(EE_HV_VZ_STAT,hvsSTEP2);
005314  4601              MOV      r1,r0
005316  f44f70b4          MOV      r0,#0x168
00531a  f7fffffe          BL       lc640_write
;;;8922   		tree_up(iHV_STEP2_2,1,0,0);
00531e  2300              MOVS     r3,#0
005320  461a              MOV      r2,r3
005322  2101              MOVS     r1,#1
005324  20d9              MOVS     r0,#0xd9
005326  f7fffffe          BL       tree_up
;;;8923   		tree_up(iHV_STEP2_1,0,0,0);
00532a  2300              MOVS     r3,#0
00532c  461a              MOV      r2,r3
00532e  4619              MOV      r1,r3
005330  20d8              MOVS     r0,#0xd8
005332  f7fffffe          BL       tree_up
;;;8924   		ret(1200);
005336  f44f6096          MOV      r0,#0x4b0
00533a  f7fffffe          BL       ||ret||
                  |L1.21310|
;;;8925   		}
;;;8926   	}
;;;8927   
;;;8928   if(hv_vz_stat==hvsSTEP2)
00533e  f89a0000          LDRB     r0,[r10,#0]  ; hv_vz_stat
005342  2802              CMP      r0,#2
005344  d10b              BNE      |L1.21342|
;;;8929   	{
;;;8930   	if((hv_vz_stat_old!=hv_vz_stat)||(hv_vz_stat_cnt==0))
005346  7829              LDRB     r1,[r5,#0]  ; hv_vz_stat_old
005348  2902              CMP      r1,#2
00534a  d101              BNE      |L1.21328|
00534c  8821              LDRH     r1,[r4,#0]  ; hv_vz_stat_cnt
00534e  b911              CBNZ     r1,|L1.21334|
                  |L1.21328|
;;;8931   		{
;;;8932   		hv_vz_stat_cnt=15;
005350  f04f010f          MOV      r1,#0xf
005354  8021              STRH     r1,[r4,#0]
                  |L1.21334|
;;;8933   		}
;;;8934   	hv_vz_stat_cnt--;
005356  8821              LDRH     r1,[r4,#0]  ; hv_vz_stat_cnt
005358  f1a10101          SUB      r1,r1,#1
00535c  8021              STRH     r1,[r4,#0]
                  |L1.21342|
;;;8935   	//if((hv_vz_stat_cnt==14)/*||(hv_vz_stat_cnt==13)||(hv_vz_stat_cnt==12)*/)
;;;8936   	//	{
;;;8937   //		show_mess_number(	"     ¬Õ»Ã¿Õ»≈!!!    ",
;;;8938   	//				"  Õ‡ÔˇÊÂÌËÂ ·Û‰ÂÚ  ",
;;;8939   	//				" Û‚ÂÎË˜ÂÌÓ ‰Ó     @¬",
;;;8940   	//				"Œ“ Àﬁ◊»“≈ Õ¿√–”« ”!!",
;;;8941   	//				4800,UVZ,1);
;;;8942   	//	}
;;;8943   	//if((hv_vz_stat_cnt==8)/*||(hv_vz_stat_cnt==7)||(hv_vz_stat_cnt==6)*/)
;;;8944   	//	{
;;;8945   	//	show_mess(	"    œŒƒ“¬≈–ƒ»“≈     ",
;;;8946   	//				"     Õ¿∆¿“»≈Ã       ",
;;;8947   	//				"    ÷≈Õ“–¿À‹ÕŒ…     ",
;;;8948   	//				"       ÕŒœ »        ",
;;;8949   	//				4800);
;;;8950   	//	} 
;;;8951   /*	if(sk_stat[1]==1)
;;;8952   		{
;;;8953   		hv_vz_stat=hvsWRK;
;;;8954   		lc640_write(EE_HV_VZ_STAT,hvsWRK);
;;;8955   		}*/
;;;8956   	}
;;;8957   
;;;8958   if(hv_vz_stat==hvsSTEP3)
;;;8959   	{
;;;8960   	if((hv_vz_stat_old!=hv_vz_stat)||(hv_vz_stat_cnt==0))
;;;8961   		{
;;;8962   		hv_vz_stat_cnt=10;
00535e  270a              MOVS     r7,#0xa
;;;8963   		}
;;;8964   	hv_vz_stat_cnt--;
;;;8965   	if((hv_vz_stat_cnt==10)||(hv_vz_stat_cnt==9))
;;;8966   		{
;;;8967   		show_mess(	"     ¬ Àﬁ◊»“≈       ",
005360  f2413888          MOV      r8,#0x1388
005364  2803              CMP      r0,#3                 ;8958
005366  d10c              BNE      |L1.21378|
005368  7828              LDRB     r0,[r5,#0]            ;8960  ; hv_vz_stat_old
00536a  2803              CMP      r0,#3                 ;8960
00536c  d101              BNE      |L1.21362|
00536e  8820              LDRH     r0,[r4,#0]            ;8960  ; hv_vz_stat_cnt
005370  b900              CBNZ     r0,|L1.21364|
                  |L1.21362|
005372  8027              STRH     r7,[r4,#0]            ;8962
                  |L1.21364|
005374  8820              LDRH     r0,[r4,#0]            ;8964  ; hv_vz_stat_cnt
005376  f1a00001          SUB      r0,r0,#1              ;8964
00537a  b200              SXTH     r0,r0                 ;8964
00537c  8020              STRH     r0,[r4,#0]            ;8964
00537e  280a              CMP      r0,#0xa               ;8965
005380  e07c              B        |L1.21628|
                  |L1.21378|
005382  e092              B        |L1.21674|
                  |L1.21380|
                          DCD      NPN_OUT
                  |L1.21384|
                          DCD      npn_tz_cnt
                  |L1.21388|
                          DCD      npn_stat
                  |L1.21392|
                          DCD      load_U
                  |L1.21396|
                          DCD      UONPN
                  |L1.21400|
                          DCD      net_Ua
                  |L1.21404|
                          DCD      net_Ub
                  |L1.21408|
                          DCD      net_Uc
                  |L1.21412|
                          DCD      UMN
                  |L1.21416|
                          DCD      TZNPN
                  |L1.21420|
                          DCD      UVNPN
                  |L1.21424|
                          DCD      load_off_cnt
                  |L1.21428|
                          DCD      load_off_stat
                  |L1.21432|
                          DCD      dUNPN
                  |L1.21436|
                          DCD      tloaddisable_cmnd
                  |L1.21440|
                          DCD      sp_ch_stat
                  |L1.21444|
                          DCD      speedChrgBlckStat
                  |L1.21448|
                          DCD      ||area_number.23||+0x14
                  |L1.21452|
                          DCD      ||.text||+0xe88
                  |L1.21456|
0053d0  20202020          DCB      "    ",231,224,225,235,238,234,232,240,238,226,224,237,"!"
0053d4  e7e0e1eb
0053d8  eeeae8f0
0053dc  eee2e0ed
0053e0  21      
0053e1  20202000          DCB      "   ",0
0053e5  00                DCB      0
0053e6  00                DCB      0
0053e7  00                DCB      0
                  |L1.21480|
0053e8  20202020          DCB      "       ",231,224,240,255,228,"        ",0
0053ec  202020e7
0053f0  e0f0ffe4
0053f4  20202020
0053f8  20202020
0053fc  00      
0053fd  00                DCB      0
0053fe  00                DCB      0
0053ff  00                DCB      0
                  |L1.21504|
005400  20202020          DCB      "     ",211,241,234,238,240,229,237,237,251,233,"     ",0
005404  20d3f1ea
005408  eef0e5ed
00540c  edfbe920
005410  20202020
005414  00      
005415  00                DCB      0
005416  00                DCB      0
005417  00                DCB      0
                  |L1.21528|
                          DCD      sk_stat
                  |L1.21532|
                          DCD      sp_ch_stat_old
                  |L1.21536|
                          DCD      sp_ch_stat_cnt
                  |L1.21540|
                          DCD      sp_ch_wrk_cnt
                  |L1.21544|
                          DCD      hv_vz_up_cnt
                  |L1.21548|
                          DCD      speedChrgTimeInHour
                  |L1.21552|
                          DCD      ||.text||+0xd50
                  |L1.21556|
005434  2020d3d1          DCB      "  ",211,209,202,206,208,197,205,205,219,201," ",199,192
005438  caced0c5
00543c  cdcddbc9
005440  20c7c0  
005443  d0dfc420          DCB      208,223,196,"  ",0
005447  2000    
005449  00                DCB      0
00544a  00                DCB      0
00544b  00                DCB      0
                  |L1.21580|
                          DCD      ||.text||+0x848
                  |L1.21584|
                          DCD      speedChrgAvtEn
                  |L1.21588|
                          DCD      u_necc
                  |L1.21592|
                          DCD      speedChrgDU
                  |L1.21596|
                          DCD      Ib_ips_termokompensat
                  |L1.21600|
                          DCD      IZMAX
                  |L1.21604|
                          DCD      speedChrgBlckSrc
                  |L1.21608|
                          DCD      speedChrgBlckLog
                  |L1.21612|
                          DCD      ||.bss||+0x400
                  |L1.21616|
                          DCD      hv_vz_stat
                  |L1.21620|
                          DCD      hv_vz_stat_old
                  |L1.21624|
                          DCD      hv_vz_stat_cnt
                  |L1.21628|
00547c  d001              BEQ      |L1.21634|
00547e  2809              CMP      r0,#9                 ;8965
005480  d109              BNE      |L1.21654|
                  |L1.21634|
005482  4bff              LDR      r3,|L1.22656|
005484  a2ff              ADR      r2,|L1.22660|
005486  f5a361ac          SUB      r1,r3,#0x560
00548a  f1010018          ADD      r0,r1,#0x18
00548e  f8cd8000          STR      r8,[sp,#0]
005492  f7fffffe          BL       show_mess
                  |L1.21654|
;;;8968   					"      “”Ã¡À≈–       ",
;;;8969   					"   ¬€–¿¬Õ»¬¿ﬁŸ»…    ",
;;;8970   					"       «¿–ﬂƒ        ",
;;;8971   					5000);
;;;8972   		}
;;;8973   	if(sk_stat[1]==1)
005496  7870              LDRB     r0,[r6,#1]  ; sk_stat
005498  2801              CMP      r0,#1
00549a  d106              BNE      |L1.21674|
;;;8974   		{
;;;8975   		hv_vz_stat=hvsWRK;
00549c  f88a9000          STRB     r9,[r10,#0]
;;;8976   		lc640_write(EE_HV_VZ_STAT,hvsWRK);
0054a0  2105              MOVS     r1,#5
0054a2  f44f70b4          MOV      r0,#0x168
0054a6  f7fffffe          BL       lc640_write
                  |L1.21674|
;;;8977   		}
;;;8978   	}
;;;8979   
;;;8980   if(hv_vz_stat==hvsWRK)
0054aa  f89a0000          LDRB     r0,[r10,#0]  ; hv_vz_stat
0054ae  f04f0b00          MOV      r11,#0
0054b2  2805              CMP      r0,#5
0054b4  d13a              BNE      |L1.21804|
;;;8981   	{
;;;8982   	if(hv_vz_stat_old!=hv_vz_stat)
0054b6  7828              LDRB     r0,[r5,#0]  ; hv_vz_stat_old
;;;8983   		{
;;;8984   		hv_vz_wrk_cnt=3600L/*100L*/*((long)VZ_HR);
0054b8  4af8              LDR      r2,|L1.22684|
;;;8985   		if(VZ_HR==0)  	hv_vz_wrk_cnt=1800L;
;;;8986   		hv_vz_up_cnt=0L;
0054ba  49f9              LDR      r1,|L1.22688|
0054bc  2805              CMP      r0,#5                 ;8982
0054be  d00d              BEQ      |L1.21724|
0054c0  48f8              LDR      r0,|L1.22692|
0054c2  f44f6361          MOV      r3,#0xe10             ;8984
0054c6  f9b00000          LDRSH    r0,[r0,#0]            ;8984  ; VZ_HR
0054ca  fb00f303          MUL      r3,r0,r3              ;8984
0054ce  6013              STR      r3,[r2,#0]            ;8984  ; hv_vz_wrk_cnt
0054d0  b910              CBNZ     r0,|L1.21720|
0054d2  f44f60e1          MOV      r0,#0x708             ;8985
0054d6  6010              STR      r0,[r2,#0]            ;8985  ; hv_vz_wrk_cnt
                  |L1.21720|
0054d8  f8c1b000          STR      r11,[r1,#0]  ; hv_vz_up_cnt
                  |L1.21724|
;;;8987   		}
;;;8988   	hv_vz_wrk_cnt--;
0054dc  6810              LDR      r0,[r2,#0]  ; hv_vz_wrk_cnt
0054de  f1a00001          SUB      r0,r0,#1
0054e2  6010              STR      r0,[r2,#0]  ; hv_vz_wrk_cnt
;;;8989   	hv_vz_up_cnt++;
0054e4  680a              LDR      r2,[r1,#0]  ; hv_vz_up_cnt
0054e6  f1020201          ADD      r2,r2,#1
0054ea  600a              STR      r2,[r1,#0]  ; hv_vz_up_cnt
;;;8990   
;;;8991   	if(hv_vz_wrk_cnt==0)
0054ec  b940              CBNZ     r0,|L1.21760|
;;;8992   		{
;;;8993   		hv_vz_stat=hvsERR4;
0054ee  f04f0009          MOV      r0,#9
0054f2  f88a0000          STRB     r0,[r10,#0]
;;;8994   		lc640_write(EE_HV_VZ_STAT,hvsERR4);
0054f6  4601              MOV      r1,r0
0054f8  f44f70b4          MOV      r0,#0x168
0054fc  f7fffffe          BL       lc640_write
                  |L1.21760|
;;;8995   		}
;;;8996   	if(sk_stat[0]==0)
005500  7830              LDRB     r0,[r6,#0]  ; sk_stat
005502  b940              CBNZ     r0,|L1.21782|
;;;8997   		{
;;;8998   		hv_vz_stat=hvsERR2;
005504  f04f0007          MOV      r0,#7
005508  f88a0000          STRB     r0,[r10,#0]
;;;8999   		lc640_write(EE_HV_VZ_STAT,hvsERR2);
00550c  4601              MOV      r1,r0
00550e  f44f70b4          MOV      r0,#0x168
005512  f7fffffe          BL       lc640_write
                  |L1.21782|
;;;9000   		}
;;;9001   	if(sk_stat[1]==0)
005516  7870              LDRB     r0,[r6,#1]  ; sk_stat
005518  b940              CBNZ     r0,|L1.21804|
;;;9002   		{
;;;9003   		hv_vz_stat=hvsERR3;
00551a  f04f0008          MOV      r0,#8
00551e  f88a0000          STRB     r0,[r10,#0]
;;;9004   		lc640_write(EE_HV_VZ_STAT,hvsERR3);
005522  4601              MOV      r1,r0
005524  f44f70b4          MOV      r0,#0x168
005528  f7fffffe          BL       lc640_write
                  |L1.21804|
;;;9005   		}
;;;9006   	}
;;;9007   
;;;9008   if(hv_vz_stat==hvsERR1)		//ŒÚÒÛÚÒÚ‚ÛÂÚ ‚ÂÌÚËÎˇˆËˇ ÔË ‚ÍÎ˛˜ÂÌËË
00552c  f89a0000          LDRB     r0,[r10,#0]  ; hv_vz_stat
005530  2806              CMP      r0,#6
005532  d11a              BNE      |L1.21866|
;;;9009   	{
;;;9010   	if((hv_vz_stat_old!=hv_vz_stat)||(hv_vz_stat_cnt==0))
005534  7828              LDRB     r0,[r5,#0]  ; hv_vz_stat_old
005536  2806              CMP      r0,#6
005538  d101              BNE      |L1.21822|
00553a  8820              LDRH     r0,[r4,#0]  ; hv_vz_stat_cnt
00553c  b900              CBNZ     r0,|L1.21824|
                  |L1.21822|
;;;9011   		{
;;;9012   		hv_vz_stat_cnt=10;
00553e  8027              STRH     r7,[r4,#0]
                  |L1.21824|
;;;9013   		}
;;;9014   	hv_vz_stat_cnt--;
005540  8820              LDRH     r0,[r4,#0]  ; hv_vz_stat_cnt
005542  f1a00001          SUB      r0,r0,#1
005546  b200              SXTH     r0,r0
005548  8020              STRH     r0,[r4,#0]
;;;9015   	if((hv_vz_stat_cnt==10)||(hv_vz_stat_cnt==9))
00554a  280a              CMP      r0,#0xa
00554c  d001              BEQ      |L1.21842|
00554e  2809              CMP      r0,#9
005550  d10b              BNE      |L1.21866|
                  |L1.21842|
;;;9016   		{
;;;9017   		show_mess(	"¬€–¿¬Õ»¬¿ﬁŸ»… «¿–ﬂƒ ",
005552  4bcb              LDR      r3,|L1.22656|
005554  f8cd8000          STR      r8,[sp,#0]
005558  3bf0              SUBS     r3,r3,#0xf0
00555a  f1030218          ADD      r2,r3,#0x18
00555e  f1020118          ADD      r1,r2,#0x18
005562  f5a1609e          SUB      r0,r1,#0x4f0
005566  f7fffffe          BL       show_mess
                  |L1.21866|
;;;9018   					"   Õ≈ ÃŒ∆≈“ ¡€“‹    ",
;;;9019   					"      ¬ Àﬁ◊≈Õ       ",
;;;9020   					"  ¡≈« ¬≈Õ“»Àﬂ÷»»!!  ",
;;;9021   					5000);
;;;9022   		}
;;;9023   	}
;;;9024   if(hv_vz_stat==hvsERR2)		//œÓÔ‡Î‡ ‚ÂÌÚËÎˇˆËˇ ÔË ‡·ÓÚÂ
00556a  f89a0000          LDRB     r0,[r10,#0]  ; hv_vz_stat
00556e  2807              CMP      r0,#7
005570  d123              BNE      |L1.21946|
;;;9025   	{
;;;9026   	if((hv_vz_stat_old!=hv_vz_stat)||(hv_vz_stat_cnt==0))
005572  7828              LDRB     r0,[r5,#0]  ; hv_vz_stat_old
005574  2807              CMP      r0,#7
005576  d101              BNE      |L1.21884|
005578  8820              LDRH     r0,[r4,#0]  ; hv_vz_stat_cnt
00557a  b900              CBNZ     r0,|L1.21886|
                  |L1.21884|
;;;9027   		{
;;;9028   		hv_vz_stat_cnt=10;
00557c  8027              STRH     r7,[r4,#0]
                  |L1.21886|
;;;9029   		}
;;;9030   	hv_vz_stat_cnt--;
00557e  8820              LDRH     r0,[r4,#0]  ; hv_vz_stat_cnt
005580  f1a00001          SUB      r0,r0,#1
005584  b200              SXTH     r0,r0
005586  8020              STRH     r0,[r4,#0]
;;;9031   	if((hv_vz_stat_cnt==10)||(hv_vz_stat_cnt==9))
005588  280a              CMP      r0,#0xa
00558a  d001              BEQ      |L1.21904|
00558c  2809              CMP      r0,#9
00558e  d10a              BNE      |L1.21926|
                  |L1.21904|
;;;9032   		{
;;;9033   		show_mess(	"¬€–¿¬Õ»¬¿ﬁŸ»… «¿–ﬂƒ ",
005590  4bc5              LDR      r3,|L1.22696|
005592  f8cd8000          STR      r8,[sp,#0]
005596  f1030218          ADD      r2,r3,#0x18
00559a  f1020118          ADD      r1,r2,#0x18
00559e  f1010018          ADD      r0,r1,#0x18
0055a2  f7fffffe          BL       show_mess
                  |L1.21926|
;;;9034   					"    «¿¡ÀŒ »–Œ¬¿Õ    ",
;;;9035   					"     Õ≈»—œ–¿¬Õ¿     ",
;;;9036   					"    ¬≈Õ“»Àﬂ÷»ﬂ!!!   ",
;;;9037   					5000);
;;;9038   		}
;;;9039   	if(sk_stat[0]==1)
0055a6  7830              LDRB     r0,[r6,#0]  ; sk_stat
0055a8  2801              CMP      r0,#1
0055aa  d106              BNE      |L1.21946|
;;;9040   		{
;;;9041   		hv_vz_stat=hvsWRK;
0055ac  f88a9000          STRB     r9,[r10,#0]
;;;9042   		lc640_write(EE_HV_VZ_STAT,hvsWRK);
0055b0  2105              MOVS     r1,#5
0055b2  f44f70b4          MOV      r0,#0x168
0055b6  f7fffffe          BL       lc640_write
                  |L1.21946|
;;;9043   		}
;;;9044   	}
;;;9045   
;;;9046   if(hv_vz_stat==hvsERR3)		//ŒÚÍÎ˛˜ÂÌ ÚÛÏ·ÎÂ "¬˚‡‚ÌË‚‡˛˘ËÈ Á‡ˇ‰"
0055ba  f89a0000          LDRB     r0,[r10,#0]  ; hv_vz_stat
0055be  2808              CMP      r0,#8
0055c0  d123              BNE      |L1.22026|
;;;9047   	{
;;;9048   	if((hv_vz_stat_old!=hv_vz_stat)||(hv_vz_stat_cnt==0))
0055c2  7828              LDRB     r0,[r5,#0]  ; hv_vz_stat_old
0055c4  2808              CMP      r0,#8
0055c6  d101              BNE      |L1.21964|
0055c8  8820              LDRH     r0,[r4,#0]  ; hv_vz_stat_cnt
0055ca  b900              CBNZ     r0,|L1.21966|
                  |L1.21964|
;;;9049   		{
;;;9050   		hv_vz_stat_cnt=10;
0055cc  8027              STRH     r7,[r4,#0]
                  |L1.21966|
;;;9051   		}
;;;9052   	hv_vz_stat_cnt--;
0055ce  8820              LDRH     r0,[r4,#0]  ; hv_vz_stat_cnt
0055d0  f1a00001          SUB      r0,r0,#1
0055d4  b200              SXTH     r0,r0
0055d6  8020              STRH     r0,[r4,#0]
;;;9053   	if((hv_vz_stat_cnt==10)||(hv_vz_stat_cnt==9))
0055d8  280a              CMP      r0,#0xa
0055da  d001              BEQ      |L1.21984|
0055dc  2809              CMP      r0,#9
0055de  d10a              BNE      |L1.22006|
                  |L1.21984|
;;;9054   		{
;;;9055   		show_mess(	"¬€–¿¬Õ»¬¿ﬁŸ»… «¿–ﬂƒ ",
0055e0  4bb2              LDR      r3,|L1.22700|
0055e2  f8cd8000          STR      r8,[sp,#0]
0055e6  f2a3526c          SUB      r2,r3,#0x56c
0055ea  f1020118          ADD      r1,r2,#0x18
0055ee  f5a160aa          SUB      r0,r1,#0x550
0055f2  f7fffffe          BL       show_mess
                  |L1.22006|
;;;9056   					"  ¡”ƒ≈“ œ–ŒƒŒÀ∆≈Õ   ",
;;;9057   					"  œŒ—À≈ ¬ Àﬁ◊≈Õ»ﬂ   ",
;;;9058   					"    “”Ã¡À≈–¿!!!     ",
;;;9059   					5000);
;;;9060   		}
;;;9061   	if(sk_stat[1]==1)
0055f6  7870              LDRB     r0,[r6,#1]  ; sk_stat
0055f8  2801              CMP      r0,#1
0055fa  d106              BNE      |L1.22026|
;;;9062   		{
;;;9063   		hv_vz_stat=hvsWRK;
0055fc  f88a9000          STRB     r9,[r10,#0]
;;;9064   		lc640_write(EE_HV_VZ_STAT,hvsWRK);
005600  2105              MOVS     r1,#5
005602  f44f70b4          MOV      r0,#0x168
005606  f7fffffe          BL       lc640_write
                  |L1.22026|
;;;9065   		}
;;;9066   	}
;;;9067   if(hv_vz_stat==hvsERR4)		//¬« Á‡ÍÓÌ˜ËÎÒˇ ‡ ÚÛÏ·ÎÂ ‚ÍÎ˛˜ÂÌ
00560a  f89a0000          LDRB     r0,[r10,#0]  ; hv_vz_stat
00560e  2809              CMP      r0,#9
005610  d123              BNE      |L1.22106|
;;;9068   	{
;;;9069   	if((hv_vz_stat_old!=hv_vz_stat)||(hv_vz_stat_cnt==0))
005612  7828              LDRB     r0,[r5,#0]  ; hv_vz_stat_old
005614  2809              CMP      r0,#9
005616  d101              BNE      |L1.22044|
005618  8820              LDRH     r0,[r4,#0]  ; hv_vz_stat_cnt
00561a  b900              CBNZ     r0,|L1.22046|
                  |L1.22044|
;;;9070   		{
;;;9071   		hv_vz_stat_cnt=10;
00561c  8027              STRH     r7,[r4,#0]
                  |L1.22046|
;;;9072   		}
;;;9073   	hv_vz_stat_cnt--;
00561e  8820              LDRH     r0,[r4,#0]  ; hv_vz_stat_cnt
005620  f1a00001          SUB      r0,r0,#1
005624  b200              SXTH     r0,r0
005626  8020              STRH     r0,[r4,#0]
;;;9074   	if((hv_vz_stat_cnt==10)||(hv_vz_stat_cnt==9))
005628  280a              CMP      r0,#0xa
00562a  d001              BEQ      |L1.22064|
00562c  2809              CMP      r0,#9
00562e  d109              BNE      |L1.22084|
                  |L1.22064|
;;;9075   		{
;;;9076   		show_mess(	"     ¬€ Àﬁ◊»“≈      ",
005630  4b93              LDR      r3,|L1.22656|
005632  a294              ADR      r2,|L1.22660|
005634  f5a361ac          SUB      r1,r3,#0x560
005638  f50160b2          ADD      r0,r1,#0x590
00563c  f8cd8000          STR      r8,[sp,#0]
005640  f7fffffe          BL       show_mess
                  |L1.22084|
;;;9077   					"      “”Ã¡À≈–       ",
;;;9078   					"   ¬€–¿¬Õ»¬¿ﬁŸ»…    ",
;;;9079   					"       «¿–ﬂƒ        ",
;;;9080   					5000);
;;;9081   		}
;;;9082   	if(sk_stat[1]==0)
005644  7870              LDRB     r0,[r6,#1]  ; sk_stat
005646  b940              CBNZ     r0,|L1.22106|
;;;9083   		{
;;;9084   		hv_vz_stat=hvsOFF;
005648  f88ab000          STRB     r11,[r10,#0]
;;;9085   		lc640_write(EE_HV_VZ_STAT,hvsOFF);
00564c  2100              MOVS     r1,#0
00564e  f44f70b4          MOV      r0,#0x168
005652  f7fffffe          BL       lc640_write
;;;9086   		vz_stop();
005656  f7fffffe          BL       vz_stop
                  |L1.22106|
;;;9087   
;;;9088   		}
;;;9089   	}
;;;9090   hv_vz_stat_old=hv_vz_stat;
00565a  f89a0000          LDRB     r0,[r10,#0]  ; hv_vz_stat
00565e  7028              STRB     r0,[r5,#0]
;;;9091   /*
;;;9092   if(speedChIsOn)
;;;9093   	{
;;;9094   	speedChTimeCnt++;
;;;9095   	if(speedChTimeCnt>=((signed long)speedChrgTimeInHour*3600L))
;;;9096   		{
;;;9097   		speedChIsOn=0;
;;;9098   		}
;;;9099   	if(speedChrgBlckStat)
;;;9100   		{
;;;9101   		speedChIsOn=0;
;;;9102   		speedChTimeCnt=0;
;;;9103   		}
;;;9104   	}
;;;9105   
;;;9106   
;;;9107   
;;;9108   if(speedChrgAvtEn)
;;;9109   	{
;;;9110   	if(!speedChIsOn)
;;;9111   		{
;;;9112   		if((load_U<u_necc)&&((u_necc-load_U)>speedChrgDU)&&(abs(Ib_ips_termokompensat/10-IZMAX)<5)&&(!speedChrgBlckStat))
;;;9113   			{
;;;9114   			speedChIsOn=1;
;;;9115   			}
;;;9116   		}
;;;9117   	}
;;;9118   
;;;9119   
;;;9120   
;;;9121   if((speedChrgBlckSrc!=1)&&(speedChrgBlckSrc!=2)) speedChrgBlckStat=0;
;;;9122   else
;;;9123   	{
;;;9124   	speedChrgBlckStat=0;
;;;9125   	if(speedChrgBlckSrc==1)
;;;9126   		{
;;;9127   		if(((speedChrgBlckLog==0)&&(adc_buff_[11]>2000)) || ((speedChrgBlckLog==1)&&(adc_buff_[11]<2000))) speedChrgBlckStat=1;
;;;9128   		}
;;;9129   	else if(speedChrgBlckSrc==2)
;;;9130   		{
;;;9131   		if(((speedChrgBlckLog==0)&&(adc_buff_[13]>2000)) || ((speedChrgBlckLog==1)&&(adc_buff_[13]<2000))) speedChrgBlckStat=1;
;;;9132   		}
;;;9133   	}
;;;9134   
;;;9135   
;;;9136   if(speedChrgBlckStat==1)
;;;9137   	{
;;;9138   
;;;9139   	//speedChargeStartStop();
;;;9140   
;;;9141   	speedChrgShowCnt++;
;;;9142   	if(speedChrgShowCnt>=30)	
;;;9143   		{
;;;9144   		speedChrgShowCnt=0;
;;;9145   		show_mess(	"     ”— Œ–≈ÕÕ€…     ",
;;;9146   					"       «¿–ﬂƒ        ",
;;;9147   					"     «¿œ–≈Ÿ≈Õ!!!    ",
;;;9148   					"                    ",
;;;9149   					5000);
;;;9150   		}
;;;9151   	}
;;;9152   else speedChrgShowCnt=0;
;;;9153   
;;;9154   */
;;;9155   }
005660  e616              B        |L1.21136|
;;;9156   
                          ENDP

                  averageChargeStartStop PROC
;;;9157   //-----------------------------------------------
;;;9158   void averageChargeStartStop(void)
005662  4993              LDR      r1,|L1.22704|
;;;9159   {
;;;9160   if(hv_vz_stat!=hvsOFF)
;;;9161   	{
;;;9162   	hv_vz_stat=hvsOFF;
;;;9163   	lc640_write(EE_HV_VZ_STAT,hvsOFF);
005664  f44f70b4          MOV      r0,#0x168
005668  780a              LDRB     r2,[r1,#0]            ;9160  ; hv_vz_stat
00566a  b132              CBZ      r2,|L1.22138|
00566c  f04f0200          MOV      r2,#0                 ;9162
005670  700a              STRB     r2,[r1,#0]            ;9162
005672  f04f0100          MOV      r1,#0
005676  f7ffbffe          B.W      lc640_write
                  |L1.22138|
;;;9164   	}
;;;9165   
;;;9166   else
;;;9167   	{
;;;9168   	hv_vz_stat=hvsSTEP1;
00567a  f04f0201          MOV      r2,#1
00567e  700a              STRB     r2,[r1,#0]
;;;9169   	lc640_write(EE_HV_VZ_STAT,hvsSTEP1);
005680  4611              MOV      r1,r2
005682  f7ffbffe          B.W      lc640_write
;;;9170   	}
;;;9171   }
;;;9172   
                          ENDP

                  numOfForvardBps_hndl PROC
;;;9173   //-----------------------------------------------
;;;9174   void	numOfForvardBps_hndl(void)			//œÓ„‡ÏÏ‡ ÒÏÂÌ˚ ÔÂ‚Ó„Ó ËÒÚÓ˜ÌËÍ‡ ‰Îˇ ‡‚ÌÓÏÂÌÓ„Ó ËÁÌÓÒ‡ ¡œ—Ó‚
005686  e92d41f0          PUSH     {r4-r8,lr}
;;;9175   {
;;;9176   
;;;9177   numOfForvardBps_old=numOfForvardBps;
00568a  4c8a              LDR      r4,|L1.22708|
00568c  7e60              LDRB     r0,[r4,#0x19]  ; numOfForvardBps
00568e  76a0              STRB     r0,[r4,#0x1a]
;;;9178   
;;;9179   numOfForvardBps=0;
005690  f04f0500          MOV      r5,#0
005694  7665              STRB     r5,[r4,#0x19]
;;;9180   
;;;9181   //FORVARDBPSCHHOUR=10;
;;;9182   
;;;9183   if((FORVARDBPSCHHOUR<=0)||(FORVARDBPSCHHOUR>500))
005696  4e88              LDR      r6,|L1.22712|
005698  f9b60000          LDRSH    r0,[r6,#0]  ; FORVARDBPSCHHOUR
00569c  2800              CMP      r0,#0
00569e  dd02              BLE      |L1.22182|
0056a0  f5b07ffa          CMP      r0,#0x1f4
0056a4  dd02              BLE      |L1.22188|
                  |L1.22182|
;;;9184   	{
;;;9185   	FORVARDBPSCHHOUR=0;
0056a6  8035              STRH     r5,[r6,#0]
                  |L1.22184|
;;;9186   	return;
;;;9187   	}
;;;9188   
;;;9189   numOfForvardBps_minCnt++;
;;;9190   
;;;9191   
;;;9192   if(numOfForvardBps_minCnt>=60)
;;;9193   	{
;;;9194   	numOfForvardBps_minCnt=0;
;;;9195   	numOfForvardBps_hourCnt=lc640_read_int(EE_FORVBPSHOURCNT);
;;;9196   	numOfForvardBps_hourCnt++;
;;;9197   	if(numOfForvardBps_hourCnt>=(FORVARDBPSCHHOUR*NUMIST))
;;;9198   		{
;;;9199   		numOfForvardBps_hourCnt=0;
;;;9200   		}
;;;9201   	lc640_write_int(EE_FORVBPSHOURCNT,numOfForvardBps_hourCnt);
;;;9202   	}
;;;9203   
;;;9204   numOfForvardBps=numOfForvardBps_hourCnt/FORVARDBPSCHHOUR;
;;;9205   
;;;9206   //if(numOfForvardBps)
;;;9207   //numOfForvardBps_old=numOfForvardBps; 
;;;9208   }
0056a8  e8bd81f0          POP      {r4-r8,pc}
                  |L1.22188|
0056ac  7ee0              LDRB     r0,[r4,#0x1b]         ;9189  ; numOfForvardBps_minCnt
0056ae  f1000001          ADD      r0,r0,#1              ;9189
0056b2  b2c0              UXTB     r0,r0                 ;9189
0056b4  76e0              STRB     r0,[r4,#0x1b]         ;9189
0056b6  283c              CMP      r0,#0x3c              ;9192
0056b8  d31a              BCC      |L1.22256|
0056ba  76e5              STRB     r5,[r4,#0x1b]         ;9194
0056bc  f44f7794          MOV      r7,#0x128             ;9195
0056c0  4638              MOV      r0,r7                 ;9195
0056c2  f7fffffe          BL       lc640_read_int
0056c6  f1000001          ADD      r0,r0,#1              ;9196
0056ca  b200              SXTH     r0,r0                 ;9196
0056cc  f8a4006c          STRH     r0,[r4,#0x6c]         ;9196
0056d0  4a7a              LDR      r2,|L1.22716|
0056d2  f9b61000          LDRSH    r1,[r6,#0]            ;9197  ; FORVARDBPSCHHOUR
0056d6  f9b22000          LDRSH    r2,[r2,#0]            ;9197  ; NUMIST
0056da  fb01f102          MUL      r1,r1,r2              ;9197
0056de  4281              CMP      r1,r0                 ;9197
0056e0  dc01              BGT      |L1.22246|
0056e2  f8a4506c          STRH     r5,[r4,#0x6c]         ;9199
                  |L1.22246|
0056e6  f9b4106c          LDRSH    r1,[r4,#0x6c]         ;9201  ; numOfForvardBps_hourCnt
0056ea  4638              MOV      r0,r7                 ;9201
0056ec  f7fffffe          BL       lc640_write_int
                  |L1.22256|
0056f0  f9b4006c          LDRSH    r0,[r4,#0x6c]         ;9204  ; numOfForvardBps_hourCnt
0056f4  f9b61000          LDRSH    r1,[r6,#0]            ;9204  ; FORVARDBPSCHHOUR
0056f8  fb90f0f1          SDIV     r0,r0,r1              ;9204
0056fc  7660              STRB     r0,[r4,#0x19]         ;9204
0056fe  e7d3              B        |L1.22184|
;;;9209   
                          ENDP

                  numOfForvardBps_init PROC
;;;9210   //-----------------------------------------------
;;;9211   void	numOfForvardBps_init(void)			//œÓ„‡ÏÏ‡ Ò·ÓÒ‡ ÒËÒÚÂÏ˚ ÒÏÂÌ˚ ÔÂ‚Ó„Ó ËÒÚÓ˜ÌËÍ‡ ‰Îˇ ‡‚ÌÓÏÂÌÓ„Ó ËÁÌÓÒ‡ ¡œ—Ó‚
005700  b510              PUSH     {r4,lr}
;;;9212   {									//ƒÓÎÊÌ‡ ‚˚Á˚‚‡Ú¸Òˇ ÔË ËÁÏÂÌÂÌËË ÍÓÎ-‚‡ ËÒÚÓ˜ÌËÍÓ‚ ‚ ÒÚÛÍÚÛÂ
;;;9213   lc640_write_int(EE_FORVBPSHOURCNT,0);
005702  2100              MOVS     r1,#0
005704  f44f7094          MOV      r0,#0x128
005708  f7fffffe          BL       lc640_write_int
;;;9214   numOfForvardBps_minCnt=58;
00570c  4969              LDR      r1,|L1.22708|
00570e  f04f003a          MOV      r0,#0x3a
005712  76c8              STRB     r0,[r1,#0x1b]
;;;9215   }
005714  bd10              POP      {r4,pc}
;;;9216   
                          ENDP

                  outVoltContrHndl PROC
;;;9217   //-----------------------------------------------
;;;9218   void outVoltContrHndl(void)
005716  b570              PUSH     {r4-r6,lr}
;;;9219   { 
;;;9220   if((load_U>U_OUT_KONTR_MAX)||(load_U<U_OUT_KONTR_MIN))
005718  4c69              LDR      r4,|L1.22720|
00571a  486a              LDR      r0,|L1.22724|
;;;9221   	{
;;;9222   	outVoltContrHndlCnt_=0;
;;;9223   	if(outVoltContrHndlCnt<U_OUT_KONTR_DELAY)
00571c  4a6a              LDR      r2,|L1.22728|
00571e  f9b41000          LDRSH    r1,[r4,#0]            ;9220  ; load_U
005722  f9b06000          LDRSH    r6,[r0,#0]            ;9220  ; U_OUT_KONTR_MAX
005726  2500              MOVS     r5,#0                 ;9222
005728  f9b20000          LDRSH    r0,[r2,#0]
00572c  4b67              LDR      r3,|L1.22732|
00572e  42b1              CMP      r1,r6                 ;9220
005730  dc04              BGT      |L1.22332|
005732  4e67              LDR      r6,|L1.22736|
005734  f9b66000          LDRSH    r6,[r6,#0]            ;9220  ; U_OUT_KONTR_MIN
005738  42b1              CMP      r1,r6                 ;9220
00573a  da0f              BGE      |L1.22364|
                  |L1.22332|
00573c  801d              STRH     r5,[r3,#0]            ;9222
00573e  4965              LDR      r1,|L1.22740|
005740  f9b11000          LDRSH    r1,[r1,#0]  ; U_OUT_KONTR_DELAY
005744  4288              CMP      r0,r1
005746  da1b              BGE      |L1.22400|
;;;9224   		{
;;;9225   		outVoltContrHndlCnt++;
005748  f1000001          ADD      r0,r0,#1
00574c  b200              SXTH     r0,r0
00574e  8010              STRH     r0,[r2,#0]
;;;9226   		if(outVoltContrHndlCnt==U_OUT_KONTR_DELAY)
005750  4288              CMP      r0,r1
005752  d115              BNE      |L1.22400|
;;;9227   			{
;;;9228   			avar_uout_hndl(1);
005754  2001              MOVS     r0,#1
005756  f7fffffe          BL       avar_uout_hndl
00575a  e011              B        |L1.22400|
                  |L1.22364|
;;;9229   			}
;;;9230   		}
;;;9231   	}
;;;9232   else
;;;9233   	{
;;;9234   	if(outVoltContrHndlCnt)
00575c  b180              CBZ      r0,|L1.22400|
;;;9235   		{
;;;9236   		if(outVoltContrHndlCnt_<5)
00575e  f9b30000          LDRSH    r0,[r3,#0]  ; outVoltContrHndlCnt_
005762  2805              CMP      r0,#5
005764  da0c              BGE      |L1.22400|
;;;9237   			{
;;;9238   			outVoltContrHndlCnt_++;
005766  f1000001          ADD      r0,r0,#1
00576a  b200              SXTH     r0,r0
00576c  8018              STRH     r0,[r3,#0]
;;;9239   			if(outVoltContrHndlCnt_>=5)
00576e  2805              CMP      r0,#5
005770  db06              BLT      |L1.22400|
;;;9240   				{
;;;9241   				outVoltContrHndlCnt=0;
005772  8015              STRH     r5,[r2,#0]
;;;9242   				if(uout_av)avar_uout_hndl(0);
005774  4858              LDR      r0,|L1.22744|
005776  7800              LDRB     r0,[r0,#0]  ; uout_av
005778  b110              CBZ      r0,|L1.22400|
00577a  2000              MOVS     r0,#0
00577c  f7fffffe          BL       avar_uout_hndl
                  |L1.22400|
;;;9243   				}
;;;9244   			}
;;;9245   		}
;;;9246   	}
;;;9247   
;;;9248   if (load_U<(USIGN*10)) 
005780  4856              LDR      r0,|L1.22748|
005782  f9b41000          LDRSH    r1,[r4,#0]  ; load_U
005786  f9b00000          LDRSH    r0,[r0,#0]  ; USIGN
00578a  eb000080          ADD      r0,r0,r0,LSL #2
00578e  ebb10f40          CMP      r1,r0,LSL #1
005792  da0b              BGE      |L1.22444|
;;;9249   	{
;;;9250   	if(!bSILENT)
005794  4852              LDR      r0,|L1.22752|
005796  6800              LDR      r0,[r0,#0]  ; bSILENT
005798  2800              CMP      r0,#0
00579a  d107              BNE      |L1.22444|
;;;9251   		{
;;;9252   		mess_send(MESS2RELE_HNDL,PARAM_RELE_BAT_IS_DISCHARGED,1,20);
00579c  e8bd4070          POP      {r4-r6,lr}
0057a0  2314              MOVS     r3,#0x14
0057a2  2201              MOVS     r2,#1
0057a4  2172              MOVS     r1,#0x72
0057a6  20d2              MOVS     r0,#0xd2
0057a8  f7ffbffe          B.W      mess_send
                  |L1.22444|
;;;9253   		}
;;;9254   
;;;9255   	//bU_BAT2REL_AV_BAT=1;
;;;9256   	}
;;;9257   
;;;9258   
;;;9259   }
0057ac  bd70              POP      {r4-r6,pc}
;;;9260   
                          ENDP

                  vent_resurs_hndl PROC
;;;9261   //-----------------------------------------------
;;;9262   void vent_resurs_hndl(void)
0057ae  e92d47f0          PUSH     {r4-r10,lr}
;;;9263   {
;;;9264   char i;
;;;9265   char crc_in,crc_eval;
;;;9266   
;;;9267   for(i=0;i<NUMIST;i++)
0057b2  f04f0200          MOV      r2,#0
;;;9268   	{
;;;9269   	if((bps[i]._buff[7]&0xc0)==0x00)
;;;9270   		{
;;;9271   		bps[i]._vent_resurs_temp[0]=bps[i]._buff[7];
;;;9272   		}
;;;9273   	else if((bps[i]._buff[7]&0xc0)==0x40)
;;;9274   		{
;;;9275   		bps[i]._vent_resurs_temp[1]=bps[i]._buff[7];
;;;9276   		}
;;;9277   	else if((bps[i]._buff[7]&0xc0)==0x80)
;;;9278   		{
;;;9279   		bps[i]._vent_resurs_temp[2]=bps[i]._buff[7];
;;;9280   		}
;;;9281   	else if((bps[i]._buff[7]&0xc0)==0xc0)
;;;9282   		{
;;;9283   		bps[i]._vent_resurs_temp[3]=bps[i]._buff[7];
;;;9284   		}
;;;9285   	crc_in=0;
;;;9286   	crc_in|=(bps[i]._vent_resurs_temp[0]&0x30)>>4;
;;;9287   	crc_in|=(bps[i]._vent_resurs_temp[1]&0x30)>>2;
;;;9288   	crc_in|=(bps[i]._vent_resurs_temp[2]&0x30);
;;;9289   	crc_in|=(bps[i]._vent_resurs_temp[3]&0x30)<<2;
;;;9290   
;;;9291   	crc_eval =bps[i]._vent_resurs_temp[0]&0x0f;
;;;9292   	crc_eval^=bps[i]._vent_resurs_temp[1]&0x0f;
;;;9293   	crc_eval^=bps[i]._vent_resurs_temp[2]&0x0f;
;;;9294   	crc_eval^=bps[i]._vent_resurs_temp[3]&0x0f;
;;;9295   
;;;9296   	if(crc_eval==crc_in)
;;;9297   		{
;;;9298   		unsigned short temp_US;
;;;9299   		temp_US=0;
;;;9300   
;;;9301   		temp_US|=(bps[i]._vent_resurs_temp[3]&0x0f);
;;;9302   		temp_US<<=4;
;;;9303   		temp_US|=(bps[i]._vent_resurs_temp[2]&0x0f);
;;;9304   		temp_US<<=4;
;;;9305   		temp_US|=(bps[i]._vent_resurs_temp[1]&0x0f);
;;;9306   		temp_US<<=4;
;;;9307   		temp_US|=(bps[i]._vent_resurs_temp[0]&0x0f);
;;;9308   
;;;9309   		if(bps[i]._vent_resurs!=temp_US)bps[i]._vent_resurs=temp_US;
;;;9310   		}
;;;9311   
;;;9312   	if((bps[i]._vent_resurs>TVENTMAX*10)&&(TVENTMAX>0))
0057b6  484b              LDR      r0,|L1.22756|
0057b8  f8dfc12c          LDR      r12,|L1.22760|
0057bc  f9b06000          LDRSH    r6,[r0,#0]
0057c0  483e              LDR      r0,|L1.22716|
0057c2  f9b07000          LDRSH    r7,[r0,#0]            ;9267
0057c6  e0a6              B        |L1.22806|
                  |L1.22472|
0057c8  ebc200c2          RSB      r0,r2,r2,LSL #3       ;9269
0057cc  eb001002          ADD      r0,r0,r2,LSL #4       ;9269
0057d0  eb0c0080          ADD      r0,r12,r0,LSL #2      ;9269
0057d4  7b41              LDRB     r1,[r0,#0xd]          ;9269
0057d6  098b              LSRS     r3,r1,#6              ;9269
0057d8  d006              BEQ      |L1.22504|
0057da  2301              MOVS     r3,#1                 ;9273
0057dc  ebb31f91          CMP      r3,r1,LSR #6          ;9273
0057e0  d105              BNE      |L1.22510|
0057e2  f8801055          STRB     r1,[r0,#0x55]         ;9275
0057e6  e00f              B        |L1.22536|
                  |L1.22504|
0057e8  f8801054          STRB     r1,[r0,#0x54]         ;9271
0057ec  e00c              B        |L1.22536|
                  |L1.22510|
0057ee  2302              MOVS     r3,#2                 ;9277
0057f0  ebb31f91          CMP      r3,r1,LSR #6          ;9277
0057f4  d102              BNE      |L1.22524|
0057f6  f8801056          STRB     r1,[r0,#0x56]         ;9279
0057fa  e005              B        |L1.22536|
                  |L1.22524|
0057fc  2303              MOVS     r3,#3                 ;9281
0057fe  ebb31f91          CMP      r3,r1,LSR #6          ;9281
005802  d101              BNE      |L1.22536|
005804  f8801057          STRB     r1,[r0,#0x57]         ;9283
                  |L1.22536|
005808  f8101f54          LDRB     r1,[r0,#0x54]!        ;9286
00580c  f3c11401          UBFX     r4,r1,#4,#2           ;9286
005810  7843              LDRB     r3,[r0,#1]            ;9287
005812  f0030530          AND      r5,r3,#0x30           ;9287
005816  ea440495          ORR      r4,r4,r5,LSR #2       ;9287
00581a  f8909002          LDRB     r9,[r0,#2]            ;9288
00581e  f0090830          AND      r8,r9,#0x30           ;9288
005822  ea480804          ORR      r8,r8,r4              ;9288
005826  78c5              LDRB     r5,[r0,#3]            ;9289
005828  f1a00054          SUB      r0,r0,#0x54           ;9289
00582c  f0050430          AND      r4,r5,#0x30           ;9289
005830  ea480884          ORR      r8,r8,r4,LSL #2       ;9289
005834  f001010f          AND      r1,r1,#0xf            ;9291
005838  f003040f          AND      r4,r3,#0xf            ;9292
00583c  ea840a01          EOR      r10,r4,r1             ;9292
005840  f009030f          AND      r3,r9,#0xf            ;9293
005844  ea83090a          EOR      r9,r3,r10             ;9293
005848  f005050f          AND      r5,r5,#0xf            ;9294
00584c  ea850909          EOR      r9,r5,r9              ;9294
005850  45c1              CMP      r9,r8                 ;9296
005852  d113              BNE      |L1.22652|
005854  ea4f1505          LSL      r5,r5,#4              ;9302
005858  ea430305          ORR      r3,r3,r5              ;9303
00585c  ea4f1303          LSL      r3,r3,#4              ;9304
005860  ea440403          ORR      r4,r4,r3              ;9305
005864  ea4f5304          LSL      r3,r4,#20             ;9306
005868  ea4f4313          LSR      r3,r3,#16             ;9306
00586c  ea410103          ORR      r1,r1,r3              ;9307
005870  f8b03058          LDRH     r3,[r0,#0x58]         ;9309
005874  428b              CMP      r3,r1                 ;9309
005876  d001              BEQ      |L1.22652|
005878  f8a01058          STRH     r1,[r0,#0x58]         ;9309
                  |L1.22652|
00587c  e036              B        |L1.22764|
00587e  0000              DCW      0x0000
                  |L1.22656|
                          DCD      ||.text||+0xe40
                  |L1.22660|
005884  202020c2          DCB      "   ",194,219,208,192,194,205,200,194,192,222,217,200,201
005888  dbd0c0c2
00588c  cdc8c2c0
005890  ded9c8c9
005894  20202020          DCB      "    ",0
005898  00      
005899  00                DCB      0
00589a  00                DCB      0
00589b  00                DCB      0
                  |L1.22684|
                          DCD      hv_vz_wrk_cnt
                  |L1.22688|
                          DCD      hv_vz_up_cnt
                  |L1.22692|
                          DCD      VZ_HR
                  |L1.22696|
                          DCD      ||.text||+0x848
                  |L1.22700|
                          DCD      ||.text||+0x1334
                  |L1.22704|
                          DCD      hv_vz_stat
                  |L1.22708|
                          DCD      ||area_number.23||
                  |L1.22712|
                          DCD      FORVARDBPSCHHOUR
                  |L1.22716|
                          DCD      NUMIST
                  |L1.22720|
                          DCD      load_U
                  |L1.22724|
                          DCD      U_OUT_KONTR_MAX
                  |L1.22728|
                          DCD      outVoltContrHndlCnt
                  |L1.22732|
                          DCD      outVoltContrHndlCnt_
                  |L1.22736|
                          DCD      U_OUT_KONTR_MIN
                  |L1.22740|
                          DCD      U_OUT_KONTR_DELAY
                  |L1.22744|
                          DCD      uout_av
                  |L1.22748|
                          DCD      USIGN
                  |L1.22752|
                          DCD      bSILENT
                  |L1.22756|
                          DCD      TVENTMAX
                  |L1.22760|
                          DCD      bps
                  |L1.22764|
0058ec  f8b01058          LDRH     r1,[r0,#0x58]
0058f0  eb060386          ADD      r3,r6,r6,LSL #2
0058f4  ebb10f43          CMP      r1,r3,LSL #1
0058f8  dd06              BLE      |L1.22792|
0058fa  2e00              CMP      r6,#0
0058fc  dd04              BLE      |L1.22792|
;;;9313   		{
;;;9314   		bps[i]._av|=(1<<4);
0058fe  7841              LDRB     r1,[r0,#1]
005900  f0410110          ORR      r1,r1,#0x10
005904  7041              STRB     r1,[r0,#1]
005906  e003              B        |L1.22800|
                  |L1.22792|
;;;9315   		}
;;;9316   	else bps[i]._av&=~(1<<4);
005908  7841              LDRB     r1,[r0,#1]
00590a  f0210110          BIC      r1,r1,#0x10
00590e  7041              STRB     r1,[r0,#1]
                  |L1.22800|
005910  f1020201          ADD      r2,r2,#1              ;9267
005914  b2d2              UXTB     r2,r2                 ;9267
                  |L1.22806|
005916  42ba              CMP      r2,r7                 ;9267
005918  f6ffaf56          BLT      |L1.22472|
;;;9317   	}
;;;9318   }
00591c  e8bd87f0          POP      {r4-r10,pc}
;;;9319   
                          ENDP

                  vent_hndl PROC
;;;9320   //-----------------------------------------------
;;;9321   void vent_hndl(void)
005920  e92d4ff0          PUSH     {r4-r11,lr}
;;;9322   {
005924  b087              SUB      sp,sp,#0x1c
;;;9323   if(RELEVENTSIGN==rvsAKB)
005926  48ab              LDR      r0,|L1.23508|
;;;9324   	{
;;;9325   	if(vent_stat==0)
005928  4cab              LDR      r4,|L1.23512|
;;;9326   		{
;;;9327   		if	(
;;;9328   			(BAT_IS_ON[0]==bisON)&&((bat[0]._Tb>TVENTON)||(bat[0]._nd))
00592a  49ac              LDR      r1,|L1.23516|
;;;9329   			||
;;;9330   			(BAT_IS_ON[1]==bisON)&&((bat[1]._Tb>TVENTON)||(bat[1]._nd))
;;;9331   			)
;;;9332   			{
;;;9333   			vent_stat=1;
;;;9334   			}
;;;9335   		}
;;;9336   	else if(vent_stat==1)
;;;9337   		{
;;;9338   		if	(
;;;9339   			((BAT_IS_ON[0]!=bisON)||((BAT_IS_ON[0]==bisON)&&(bat[0]._Tb<TVENTOFF)&&(!bat[0]._nd)))
00592c  4aac              LDR      r2,|L1.23520|
00592e  7800              LDRB     r0,[r0,#0]            ;9323  ; RELEVENTSIGN
005930  f9943000          LDRSB    r3,[r4,#0]            ;9325
005934  f9b11000          LDRSH    r1,[r1,#0]            ;9328
005938  f9b22000          LDRSH    r2,[r2,#0]
00593c  b148              CBZ      r0,|L1.22866|
;;;9340   			&&
;;;9341   			((BAT_IS_ON[1]!=bisON)||((BAT_IS_ON[1]==bisON)&&(bat[1]._Tb<TVENTOFF)&&(!bat[1]._nd)))
;;;9342   			)
;;;9343   			{
;;;9344   			vent_stat=0;
;;;9345   			}
;;;9346   		}
;;;9347   	}
;;;9348   else if(RELEVENTSIGN==rvsBPS)
00593e  2802              CMP      r0,#2
005940  d03c              BEQ      |L1.22972|
;;;9349   	{
;;;9350   /*	if	(
;;;9351   		(((bps[0]._flags_tm&0x06)||(bps[0]._cnt>=30)))||
;;;9352   		(((bps[1]._flags_tm&0x06)||(bps[1]._cnt>=30))&&(NUMIST>1))||
;;;9353   		(((bps[2]._flags_tm&0x06)||(bps[2]._cnt>=30))&&(NUMIST>2))||
;;;9354   		(((bps[3]._flags_tm&0x06)||(bps[3]._cnt>=30))&&(NUMIST>3))||
;;;9355   		(((bps[4]._flags_tm&0x06)||(bps[4]._cnt>=30))&&(NUMIST>4))||
;;;9356   		(((bps[5]._flags_tm&0x06)||(bps[5]._cnt>=30))&&(NUMIST>5))||
;;;9357   		(((bps[6]._flags_tm&0x06)||(bps[6]._cnt>=30))&&(NUMIST>6))
;;;9358   		)
;;;9359   		{
;;;9360   		vent_stat=1;
;;;9361   		}
;;;9362   	else vent_stat=0;
;;;9363   	*/
;;;9364   
;;;9365   	if	(
;;;9366   		((NUMIST)&&((bps[0]._Ti>TVENTON)||(bps[0]._cnt>=30)))
;;;9367   		||
;;;9368   		((NUMIST>1)&&((bps[1]._Ti>TVENTON)||(bps[1]._cnt>=30)))
;;;9369   		||
;;;9370   		((NUMIST>2)&&((bps[2]._Ti>TVENTON)||(bps[2]._cnt>=30)))
;;;9371   		||
;;;9372   		((NUMIST>3)&&((bps[3]._Ti>TVENTON)||(bps[3]._cnt>=30)))
;;;9373   		||
;;;9374   		((NUMIST>4)&&((bps[4]._Ti>TVENTON)||(bps[4]._cnt>=30)))
;;;9375   		||
;;;9376   		((NUMIST>5)&&((bps[5]._Ti>TVENTON)||(bps[5]._cnt>=30)))
;;;9377   		||
;;;9378   		((NUMIST>6)&&((bps[6]._Ti>TVENTON)||(bps[6]._cnt>=30)))
;;;9379   		||
;;;9380   		((NUMIST>7)&&((bps[7]._Ti>TVENTON)||(bps[7]._cnt>=30)))
;;;9381   		)
;;;9382   		{
;;;9383   		vent_stat=1;
;;;9384   		}
;;;9385   	else if(vent_stat==1)
;;;9386   		{
;;;9387   		if	(
;;;9388   			((!NUMIST)||((NUMIST)&&(bps[0]._Ti<TVENTOFF)&&(bps[0]._cnt<10)))
;;;9389   			&&
;;;9390   			((NUMIST<2)||((NUMIST>=2)&&(bps[1]._Ti<TVENTOFF)&&(bps[1]._cnt<10)))
;;;9391   			&&
;;;9392   			((NUMIST<3)||((NUMIST>=3)&&(bps[2]._Ti<TVENTOFF)&&(bps[2]._cnt<10)))
;;;9393   			&&
;;;9394   			((NUMIST<4)||((NUMIST>=4)&&(bps[3]._Ti<TVENTOFF)&&(bps[3]._cnt<10)))
;;;9395   			&&
;;;9396   			((NUMIST<5)||((NUMIST>=5)&&(bps[4]._Ti<TVENTOFF)&&(bps[4]._cnt<10)))
;;;9397   			&&
;;;9398   			((NUMIST<6)||((NUMIST>=6)&&(bps[5]._Ti<TVENTOFF)&&(bps[5]._cnt<10)))
;;;9399   			&&
;;;9400   			((NUMIST<7)||((NUMIST>=7)&&(bps[6]._Ti<TVENTOFF)&&(bps[6]._cnt<10)))
;;;9401   			&&
;;;9402   			((NUMIST<8)||((NUMIST>=8)&&(bps[7]._Ti<TVENTOFF)&&(bps[7]._cnt<10)))
;;;9403   			)
;;;9404   			{
;;;9405   			vent_stat=0;
;;;9406   			}
;;;9407   		}
;;;9408   	}
;;;9409   else if(RELEVENTSIGN==rvsEXT)
005942  2801              CMP      r0,#1
005944  d07e              BEQ      |L1.23108|
;;;9410   	{
;;;9411   	if	(
;;;9412   		((NUMDT)&&((t_ext[0]>TVENTON)||(ND_EXT[0])))
;;;9413   		||
;;;9414   		((NUMDT>1)&&((t_ext[1]>TVENTON)||(ND_EXT[1])))
;;;9415   		||
;;;9416   		((NUMDT>2)&&((t_ext[2]>TVENTON)||(ND_EXT[2])))
;;;9417   		)
;;;9418   		{
;;;9419   		vent_stat=1;
;;;9420   		}
;;;9421   	else if(vent_stat==1)
;;;9422   		{
;;;9423   		if	(
;;;9424   			((!NUMDT)||((NUMDT)&&(t_ext[0]<TVENTOFF)&&(!ND_EXT[0])))
;;;9425   			&&
;;;9426   			((NUMDT<2)||((NUMDT>=2)&&(t_ext[1]<TVENTOFF)&&(!ND_EXT[1])))
;;;9427   			&&
;;;9428   			((NUMDT<3)||((NUMDT>=3)&&(t_ext[2]<TVENTOFF)&&(!ND_EXT[2])))
;;;9429   			)
;;;9430   			{
;;;9431   			vent_stat=0;
;;;9432   			}
;;;9433   		}
;;;9434   	}
;;;9435   else vent_stat=1;
005946  f04f0001          MOV      r0,#1
00594a  7020              STRB     r0,[r4,#0]
                  |L1.22860|
;;;9436   }
00594c  b007              ADD      sp,sp,#0x1c
00594e  e8bd8ff0          POP      {r4-r11,pc}
                  |L1.22866|
005952  4fa4              LDR      r7,|L1.23524|
005954  f8df8290          LDR      r8,|L1.23528|
005958  f9b7000a          LDRSH    r0,[r7,#0xa]          ;9328
00595c  7b3d              LDRB     r5,[r7,#0xc]          ;9328
00595e  f9b76056          LDRSH    r6,[r7,#0x56]         ;9330
005962  f898c000          LDRB     r12,[r8,#0]           ;9327
005966  f8977058          LDRB     r7,[r7,#0x58]         ;9330
00596a  f8988001          LDRB     r8,[r8,#1]            ;9330
00596e  b12b              CBZ      r3,|L1.22908|
005970  2b01              CMP      r3,#1                 ;9336
005972  d1eb              BNE      |L1.22860|
005974  f1bc0f55          CMP      r12,#0x55             ;9338
005978  d115              BNE      |L1.22950|
00597a  e010              B        |L1.22942|
                  |L1.22908|
00597c  f1bc0f55          CMP      r12,#0x55             ;9327
005980  d102              BNE      |L1.22920|
005982  4288              CMP      r0,r1                 ;9328
005984  dc07              BGT      |L1.22934|
005986  b935              CBNZ     r5,|L1.22934|
                  |L1.22920|
005988  f1b80f55          CMP      r8,#0x55              ;9330
00598c  d1de              BNE      |L1.22860|
00598e  428e              CMP      r6,r1                 ;9330
005990  dc01              BGT      |L1.22934|
005992  2f00              CMP      r7,#0                 ;9330
005994  d0da              BEQ      |L1.22860|
                  |L1.22934|
005996  f04f0001          MOV      r0,#1                 ;9333
00599a  7020              STRB     r0,[r4,#0]            ;9333
00599c  e7d6              B        |L1.22860|
                  |L1.22942|
00599e  4290              CMP      r0,r2                 ;9339
0059a0  dad4              BGE      |L1.22860|
0059a2  2d00              CMP      r5,#0                 ;9339
0059a4  d1d2              BNE      |L1.22860|
                  |L1.22950|
0059a6  f1b80f55          CMP      r8,#0x55              ;9341
0059aa  d103              BNE      |L1.22964|
0059ac  4296              CMP      r6,r2                 ;9341
0059ae  dacd              BGE      |L1.22860|
0059b0  2f00              CMP      r7,#0                 ;9341
0059b2  d1cb              BNE      |L1.22860|
                  |L1.22964|
0059b4  f04f0000          MOV      r0,#0                 ;9344
0059b8  7020              STRB     r0,[r4,#0]            ;9344
0059ba  e7c7              B        |L1.22860|
                  |L1.22972|
0059bc  4e8c              LDR      r6,|L1.23536|
0059be  488b              LDR      r0,|L1.23532|
0059c0  6ab5              LDR      r5,[r6,#0x28]         ;9366
0059c2  f9b00000          LDRSH    r0,[r0,#0]            ;9365  ; NUMIST
0059c6  78f6              LDRB     r6,[r6,#3]            ;9366
0059c8  b118              CBZ      r0,|L1.22994|
0059ca  428d              CMP      r5,r1                 ;9366
0059cc  dc7a              BGT      |L1.23236|
0059ce  2e1e              CMP      r6,#0x1e              ;9366
0059d0  d278              BCS      |L1.23236|
                  |L1.22994|
0059d2  f8dfc21c          LDR      r12,|L1.23536|
0059d6  2801              CMP      r0,#1                 ;9368
0059d8  f8dc7084          LDR      r7,[r12,#0x84]        ;9368
0059dc  f89cc05f          LDRB     r12,[r12,#0x5f]       ;9368
0059e0  f8cdc018          STR      r12,[sp,#0x18]        ;9368
0059e4  dd06              BLE      |L1.23028|
0059e6  428f              CMP      r7,r1                 ;9368
0059e8  dc6c              BGT      |L1.23236|
0059ea  f8ddc018          LDR      r12,[sp,#0x18]        ;9368
0059ee  f1bc0f1e          CMP      r12,#0x1e             ;9368
0059f2  d267              BCS      |L1.23236|
                  |L1.23028|
0059f4  f8dfc1f8          LDR      r12,|L1.23536|
0059f8  2802              CMP      r0,#2                 ;9370
0059fa  f8dc80e0          LDR      r8,[r12,#0xe0]        ;9370
0059fe  f8cd8014          STR      r8,[sp,#0x14]         ;9370
005a02  f89cc0bb          LDRB     r12,[r12,#0xbb]       ;9370
005a06  f8cdc010          STR      r12,[sp,#0x10]        ;9370
005a0a  dd08              BLE      |L1.23070|
005a0c  f8ddc014          LDR      r12,[sp,#0x14]        ;9370
005a10  458c              CMP      r12,r1                ;9370
005a12  dc57              BGT      |L1.23236|
005a14  f8ddc010          LDR      r12,[sp,#0x10]        ;9370
005a18  f1bc0f1e          CMP      r12,#0x1e             ;9370
005a1c  d252              BCS      |L1.23236|
                  |L1.23070|
005a1e  f8dfc1d0          LDR      r12,|L1.23536|
005a22  2803              CMP      r0,#3                 ;9372
005a24  f8dc813c          LDR      r8,[r12,#0x13c]       ;9372
005a28  f8cd800c          STR      r8,[sp,#0xc]          ;9372
005a2c  f89cc117          LDRB     r12,[r12,#0x117]      ;9372
005a30  f8cdc008          STR      r12,[sp,#8]           ;9372
005a34  dd0a              BLE      |L1.23116|
005a36  f8ddc00c          LDR      r12,[sp,#0xc]         ;9372
005a3a  458c              CMP      r12,r1                ;9372
005a3c  dc42              BGT      |L1.23236|
005a3e  f8ddc008          LDR      r12,[sp,#8]           ;9372
005a42  e000              B        |L1.23110|
                  |L1.23108|
005a44  e080              B        |L1.23368|
                  |L1.23110|
005a46  f1bc0f1e          CMP      r12,#0x1e             ;9372
005a4a  d23b              BCS      |L1.23236|
                  |L1.23116|
005a4c  f8df81a0          LDR      r8,|L1.23536|
005a50  2804              CMP      r0,#4                 ;9374
005a52  f8d8c198          LDR      r12,[r8,#0x198]       ;9374
005a56  f8988173          LDRB     r8,[r8,#0x173]        ;9374
005a5a  f8cd8004          STR      r8,[sp,#4]            ;9374
005a5e  dd06              BLE      |L1.23150|
005a60  458c              CMP      r12,r1                ;9374
005a62  dc2f              BGT      |L1.23236|
005a64  f8dd8004          LDR      r8,[sp,#4]            ;9374
005a68  f1b80f1e          CMP      r8,#0x1e              ;9374
005a6c  d22a              BCS      |L1.23236|
                  |L1.23150|
005a6e  f8df9180          LDR      r9,|L1.23536|
005a72  2805              CMP      r0,#5                 ;9376
005a74  f8d981f4          LDR      r8,[r9,#0x1f4]        ;9376
005a78  f89991cf          LDRB     r9,[r9,#0x1cf]        ;9376
005a7c  f8cd9000          STR      r9,[sp,#0]            ;9376
005a80  dd06              BLE      |L1.23184|
005a82  4588              CMP      r8,r1                 ;9376
005a84  dc1e              BGT      |L1.23236|
005a86  f8dd9000          LDR      r9,[sp,#0]            ;9376
005a8a  f1b90f1e          CMP      r9,#0x1e              ;9376
005a8e  d219              BCS      |L1.23236|
                  |L1.23184|
005a90  f8dfa15c          LDR      r10,|L1.23536|
005a94  2806              CMP      r0,#6                 ;9378
005a96  f89ae22b          LDRB     lr,[r10,#0x22b]       ;9378
005a9a  f8da9250          LDR      r9,[r10,#0x250]       ;9378
005a9e  dd04              BLE      |L1.23210|
005aa0  4589              CMP      r9,r1                 ;9378
005aa2  dc0f              BGT      |L1.23236|
005aa4  f1be0f1e          CMP      lr,#0x1e              ;9378
005aa8  d20c              BCS      |L1.23236|
                  |L1.23210|
005aaa  f8dfb144          LDR      r11,|L1.23536|
005aae  2807              CMP      r0,#7                 ;9380
005ab0  f8dba2ac          LDR      r10,[r11,#0x2ac]      ;9380
005ab4  f89bb287          LDRB     r11,[r11,#0x287]      ;9380
005ab8  dd08              BLE      |L1.23244|
005aba  458a              CMP      r10,r1                ;9380
005abc  dc02              BGT      |L1.23236|
005abe  f1bb0f1e          CMP      r11,#0x1e             ;9380
005ac2  d303              BCC      |L1.23244|
                  |L1.23236|
005ac4  f04f0001          MOV      r0,#1                 ;9383
005ac8  7020              STRB     r0,[r4,#0]            ;9383
                  |L1.23242|
005aca  e73f              B        |L1.22860|
                  |L1.23244|
005acc  2b01              CMP      r3,#1                 ;9385
005ace  d1fc              BNE      |L1.23242|
005ad0  b118              CBZ      r0,|L1.23258|
005ad2  4295              CMP      r5,r2                 ;9388
005ad4  daf9              BGE      |L1.23242|
005ad6  2e0a              CMP      r6,#0xa               ;9388
005ad8  d2f7              BCS      |L1.23242|
                  |L1.23258|
005ada  2802              CMP      r0,#2                 ;9390
005adc  db04              BLT      |L1.23272|
005ade  4297              CMP      r7,r2                 ;9390
005ae0  daf3              BGE      |L1.23242|
005ae2  9906              LDR      r1,[sp,#0x18]         ;9390
005ae4  290a              CMP      r1,#0xa               ;9390
005ae6  d2f0              BCS      |L1.23242|
                  |L1.23272|
005ae8  2803              CMP      r0,#3                 ;9392
005aea  db05              BLT      |L1.23288|
005aec  9905              LDR      r1,[sp,#0x14]         ;9392
005aee  4291              CMP      r1,r2                 ;9392
005af0  daeb              BGE      |L1.23242|
005af2  9904              LDR      r1,[sp,#0x10]         ;9392
005af4  290a              CMP      r1,#0xa               ;9392
005af6  d2e8              BCS      |L1.23242|
                  |L1.23288|
005af8  2804              CMP      r0,#4                 ;9394
005afa  db05              BLT      |L1.23304|
005afc  9903              LDR      r1,[sp,#0xc]          ;9394
005afe  4291              CMP      r1,r2                 ;9394
005b00  dae3              BGE      |L1.23242|
005b02  9902              LDR      r1,[sp,#8]            ;9394
005b04  290a              CMP      r1,#0xa               ;9394
005b06  d2e0              BCS      |L1.23242|
                  |L1.23304|
005b08  2805              CMP      r0,#5                 ;9396
005b0a  db04              BLT      |L1.23318|
005b0c  4594              CMP      r12,r2                ;9396
005b0e  dadc              BGE      |L1.23242|
005b10  9901              LDR      r1,[sp,#4]            ;9396
005b12  290a              CMP      r1,#0xa               ;9396
005b14  d2d9              BCS      |L1.23242|
                  |L1.23318|
005b16  2806              CMP      r0,#6                 ;9398
005b18  db04              BLT      |L1.23332|
005b1a  4590              CMP      r8,r2                 ;9398
005b1c  dad5              BGE      |L1.23242|
005b1e  9900              LDR      r1,[sp,#0]            ;9398
005b20  290a              CMP      r1,#0xa               ;9398
005b22  d2d2              BCS      |L1.23242|
                  |L1.23332|
005b24  2807              CMP      r0,#7                 ;9400
005b26  db04              BLT      |L1.23346|
005b28  4591              CMP      r9,r2                 ;9400
005b2a  dace              BGE      |L1.23242|
005b2c  f1be0f0a          CMP      lr,#0xa               ;9400
005b30  d2cb              BCS      |L1.23242|
                  |L1.23346|
005b32  2808              CMP      r0,#8                 ;9402
005b34  db04              BLT      |L1.23360|
005b36  4592              CMP      r10,r2                ;9402
005b38  dac7              BGE      |L1.23242|
005b3a  f1bb0f0a          CMP      r11,#0xa              ;9402
005b3e  d2c4              BCS      |L1.23242|
                  |L1.23360|
005b40  f04f0000          MOV      r0,#0                 ;9405
005b44  7020              STRB     r0,[r4,#0]            ;9405
                  |L1.23366|
005b46  e701              B        |L1.22860|
                  |L1.23368|
005b48  482a              LDR      r0,|L1.23540|
005b4a  4d2b              LDR      r5,|L1.23544|
005b4c  4e2b              LDR      r6,|L1.23548|
005b4e  f9b00000          LDRSH    r0,[r0,#0]            ;9411  ; NUMDT
005b52  f9b55000          LDRSH    r5,[r5,#0]            ;9412
005b56  7836              LDRB     r6,[r6,#0]            ;9412
005b58  b110              CBZ      r0,|L1.23392|
005b5a  428d              CMP      r5,r1                 ;9412
005b5c  dc1d              BGT      |L1.23450|
005b5e  b9e6              CBNZ     r6,|L1.23450|
                  |L1.23392|
005b60  4f25              LDR      r7,|L1.23544|
005b62  f8dfc098          LDR      r12,|L1.23548|
005b66  2801              CMP      r0,#1                 ;9414
005b68  f9b77002          LDRSH    r7,[r7,#2]            ;9414
005b6c  f89cc001          LDRB     r12,[r12,#1]          ;9414
005b70  dd04              BLE      |L1.23420|
005b72  428f              CMP      r7,r1                 ;9414
005b74  dc11              BGT      |L1.23450|
005b76  f1bc0f00          CMP      r12,#0                ;9414
005b7a  d10e              BNE      |L1.23450|
                  |L1.23420|
005b7c  f8df8078          LDR      r8,|L1.23544|
005b80  f8df9078          LDR      r9,|L1.23548|
005b84  2802              CMP      r0,#2                 ;9416
005b86  f9b88004          LDRSH    r8,[r8,#4]            ;9416
005b8a  f8999002          LDRB     r9,[r9,#2]            ;9416
005b8e  dd08              BLE      |L1.23458|
005b90  4588              CMP      r8,r1                 ;9416
005b92  dc02              BGT      |L1.23450|
005b94  f1b90f00          CMP      r9,#0                 ;9416
005b98  d003              BEQ      |L1.23458|
                  |L1.23450|
005b9a  f04f0001          MOV      r0,#1                 ;9419
005b9e  7020              STRB     r0,[r4,#0]            ;9419
005ba0  e6d4              B        |L1.22860|
                  |L1.23458|
005ba2  2b01              CMP      r3,#1                 ;9421
005ba4  d191              BNE      |L1.23242|
005ba6  b118              CBZ      r0,|L1.23472|
005ba8  4295              CMP      r5,r2                 ;9424
005baa  da8e              BGE      |L1.23242|
005bac  2e00              CMP      r6,#0                 ;9424
005bae  d18c              BNE      |L1.23242|
                  |L1.23472|
005bb0  2802              CMP      r0,#2                 ;9426
005bb2  db04              BLT      |L1.23486|
005bb4  4297              CMP      r7,r2                 ;9426
005bb6  da88              BGE      |L1.23242|
005bb8  f1bc0f00          CMP      r12,#0                ;9426
005bbc  d185              BNE      |L1.23242|
                  |L1.23486|
005bbe  2803              CMP      r0,#3                 ;9428
005bc0  db04              BLT      |L1.23500|
005bc2  4590              CMP      r8,r2                 ;9428
005bc4  dabf              BGE      |L1.23366|
005bc6  f1b90f00          CMP      r9,#0                 ;9428
005bca  d1bc              BNE      |L1.23366|
                  |L1.23500|
005bcc  f04f0000          MOV      r0,#0                 ;9431
005bd0  7020              STRB     r0,[r4,#0]            ;9431
005bd2  e6bb              B        |L1.22860|
;;;9437   
                          ENDP

                  |L1.23508|
                          DCD      RELEVENTSIGN
                  |L1.23512|
                          DCD      ||area_number.23||
                  |L1.23516|
                          DCD      TVENTON
                  |L1.23520|
                          DCD      TVENTOFF
                  |L1.23524|
                          DCD      bat
                  |L1.23528|
                          DCD      BAT_IS_ON
                  |L1.23532|
                          DCD      NUMIST
                  |L1.23536|
                          DCD      bps
                  |L1.23540|
                          DCD      NUMDT
                  |L1.23544|
                          DCD      t_ext
                  |L1.23548|
                          DCD      ND_EXT

                          AREA ||area_number.2||, CODE, READONLY, ALIGN=2

                          EXPORTAS ||area_number.2||, ||.text||
                  samokalibr_init PROC
;;;266    //-----------------------------------------------
;;;267    void ke_start(char in)
000000  4902              LDR      r1,|L2.12|
;;;268    {          
000002  f24060f9          MOV      r0,#0x6f9
;;;269    ke_start_stat=(enum_ke_start_stat)0;		 
000006  f8a10044          STRH     r0,[r1,#0x44]
00000a  4770              BX       lr
;;;270    
;;;271    if(spc_stat==spcVZ)ke_start_stat=kssNOT_VZ;
;;;272    #ifndef UKU_220_IPS_TERMOKOMPENSAT
;;;273    else if(BAT_IS_ON[in]!=bisON)ke_start_stat=kssNOT_BAT;
;;;274    #endif
;;;275    else if(bat[in]._av&(1<<0))ke_start_stat=kssNOT_BAT_AV;
;;;276    else if(bat[in]._temper_stat&(1<<1))ke_start_stat=kssNOT_BAT_AV_T;
;;;277    else if(bat[in]._av&(1<<1))ke_start_stat=kssNOT_BAT_AV_ASS;
;;;278    else if(bat[in]._Ib>IKB)ke_start_stat=kssNOT_BAT_ZAR;
;;;279    else if(bat[in]._Ib<-IKB)ke_start_stat=kssNOT_BAT_RAZR;
;;;280    else if((spc_stat==spcKE)&&(spc_bat==0))ke_start_stat=kssNOT_KE1;
;;;281    else if((spc_stat==spcKE)&&(spc_bat==1))ke_start_stat=kssNOT_KE2;
;;;282    else 
;;;283    	{
;;;284    
;;;285    	ke_start_stat=kssYES;
;;;286    
;;;287    	spc_stat=spcKE;
;;;288    	__ee_spc_stat=spcKE;
;;;289    	lc640_write_int(EE_SPC_STAT,__ee_spc_stat);
;;;290    	
;;;291    	spc_bat=in;
;;;292    	__ee_spc_bat=in;
;;;293    	lc640_write_int(EE_SPC_BAT,__ee_spc_bat);
;;;294    
;;;295    	bat[in]._zar_cnt_ke=0;
;;;296    	lc640_write_int(ADR_EE_BAT_ZAR_CNT_KE[in],0);
;;;297    	
;;;298    	spc_phase=0;
;;;299    	__ee_spc_phase=0;
;;;300    	lc640_write_int(EE_SPC_PHASE,__ee_spc_phase);
;;;301    
;;;302    	//ke_mem_hndl(in,lc640_read_int(ADR_EE_BAT_ZAR_CNT_KE[spc_bat]));
;;;303    
;;;304    		{					
;;;305    		signed short temp_temp;
;;;306    		signed char temp;
;;;307    		temp_temp=bat[in]._u_old[((bat_u_old_cnt+1)&0x07)]; 
;;;308    		    
;;;309    		temp=LPC_RTC->YEAR;
;;;310    		gran_char(&temp,1,99);
;;;311    		*((char*)(&(ke_date[0])))=temp;
;;;312    			
;;;313    		temp=LPC_RTC->MONTH;
;;;314    		gran_char(&temp,1,12);
;;;315    		*(((char*)(&(ke_date[0])))+1)=temp;
;;;316    		
;;;317    		temp=LPC_RTC->DOM;
;;;318    		gran_char(&temp,1,31);
;;;319    		*(((char*)(&(ke_date[0])))+2)=temp;			
;;;320    				
;;;321    		*(((char*)(&(ke_date[0])))+3)=*((char*)&temp_temp);
;;;322    		lc640_write_long(EE_SPC_KE_DATE0,ke_date[0]);
;;;323    
;;;324    		temp=LPC_RTC->HOUR;
;;;325    		gran_char(&temp,0,23);
;;;326    		*((char*)(&(ke_date[1])))=temp;
;;;327                   
;;;328    		temp=LPC_RTC->MIN;
;;;329    		gran_char(&temp,0,59);
;;;330    		*(((char*)(&(ke_date[1])))+1)=temp;
;;;331    	          
;;;332    		temp=LPC_RTC->SEC;
;;;333    		gran_char(&temp,0,59);
;;;334    		*(((char*)(&(ke_date[1])))+2)=temp;
;;;335    			
;;;336    		*(((char*)(&(ke_date[1])))+3)=*(((char*)&temp_temp)+1);
;;;337    		lc640_write_long(EE_SPC_KE_DATE1,ke_date[1]);
;;;338    		}
;;;339    
;;;340    	}
;;;341    }
;;;342    
                          ENDP

                  |L2.12|
                          DCD      ||area_number.23||

                          AREA ||area_number.3||, CODE, READONLY, ALIGN=2

                          EXPORTAS ||area_number.3||, ||.text||
                  adc_drv6 PROC
;;;266    //-----------------------------------------------
;;;267    void ke_start(char in)
000000  e92d41f0          PUSH     {r4-r8,lr}
;;;268    {          
000004  4c80              LDR      r4,|L3.520|
;;;269    ke_start_stat=(enum_ke_start_stat)0;		 
000006  8860              LDRH     r0,[r4,#2]  ; adc_self_ch_buff
000008  8821              LDRH     r1,[r4,#0]  ; adc_self_ch_buff
00000a  1a40              SUBS     r0,r0,r1
00000c  b200              SXTH     r0,r0
;;;270    
;;;271    if(spc_stat==spcVZ)ke_start_stat=kssNOT_VZ;
00000e  f7fffffe          BL       abs_pal
000012  1da5              ADDS     r5,r4,#6
000014  8028              STRH     r0,[r5,#0]
000016  88a0              LDRH     r0,[r4,#4]  ; adc_self_ch_buff
;;;272    #ifndef UKU_220_IPS_TERMOKOMPENSAT
;;;273    else if(BAT_IS_ON[in]!=bisON)ke_start_stat=kssNOT_BAT;
;;;274    #endif
;;;275    else if(bat[in]._av&(1<<0))ke_start_stat=kssNOT_BAT_AV;
000018  8861              LDRH     r1,[r4,#2]  ; adc_self_ch_buff
00001a  1a40              SUBS     r0,r0,r1
00001c  b200              SXTH     r0,r0
00001e  f7fffffe          BL       abs_pal
000022  8068              STRH     r0,[r5,#2]
000024  88a0              LDRH     r0,[r4,#4]  ; adc_self_ch_buff
000026  8821              LDRH     r1,[r4,#0]  ; adc_self_ch_buff
000028  1a40              SUBS     r0,r0,r1
00002a  b200              SXTH     r0,r0
00002c  f7fffffe          BL       abs_pal
000030  80a8              STRH     r0,[r5,#4]
000032  f44f7196          MOV      r1,#0x12c
;;;276    else if(bat[in]._temper_stat&(1<<1))ke_start_stat=kssNOT_BAT_AV_T;
;;;277    else if(bat[in]._av&(1<<1))ke_start_stat=kssNOT_BAT_AV_ASS;
;;;278    else if(bat[in]._Ib>IKB)ke_start_stat=kssNOT_BAT_ZAR;
;;;279    else if(bat[in]._Ib<-IKB)ke_start_stat=kssNOT_BAT_RAZR;
;;;280    else if((spc_stat==spcKE)&&(spc_bat==0))ke_start_stat=kssNOT_KE1;
;;;281    else if((spc_stat==spcKE)&&(spc_bat==1))ke_start_stat=kssNOT_KE2;
;;;282    else 
;;;283    	{
;;;284    
;;;285    	ke_start_stat=kssYES;
;;;286    
;;;287    	spc_stat=spcKE;
;;;288    	__ee_spc_stat=spcKE;
;;;289    	lc640_write_int(EE_SPC_STAT,__ee_spc_stat);
;;;290    	
;;;291    	spc_bat=in;
;;;292    	__ee_spc_bat=in;
;;;293    	lc640_write_int(EE_SPC_BAT,__ee_spc_bat);
;;;294    
;;;295    	bat[in]._zar_cnt_ke=0;
;;;296    	lc640_write_int(ADR_EE_BAT_ZAR_CNT_KE[in],0);
;;;297    	
;;;298    	spc_phase=0;
;;;299    	__ee_spc_phase=0;
;;;300    	lc640_write_int(EE_SPC_PHASE,__ee_spc_phase);
;;;301    
;;;302    	//ke_mem_hndl(in,lc640_read_int(ADR_EE_BAT_ZAR_CNT_KE[spc_bat]));
;;;303    
;;;304    		{					
;;;305    		signed short temp_temp;
;;;306    		signed char temp;
;;;307    		temp_temp=bat[in]._u_old[((bat_u_old_cnt+1)&0x07)]; 
;;;308    		    
;;;309    		temp=LPC_RTC->YEAR;
;;;310    		gran_char(&temp,1,99);
;;;311    		*((char*)(&(ke_date[0])))=temp;
;;;312    			
;;;313    		temp=LPC_RTC->MONTH;
;;;314    		gran_char(&temp,1,12);
;;;315    		*(((char*)(&(ke_date[0])))+1)=temp;
;;;316    		
;;;317    		temp=LPC_RTC->DOM;
;;;318    		gran_char(&temp,1,31);
;;;319    		*(((char*)(&(ke_date[0])))+2)=temp;			
;;;320    				
;;;321    		*(((char*)(&(ke_date[0])))+3)=*((char*)&temp_temp);
;;;322    		lc640_write_long(EE_SPC_KE_DATE0,ke_date[0]);
;;;323    
;;;324    		temp=LPC_RTC->HOUR;
;;;325    		gran_char(&temp,0,23);
;;;326    		*((char*)(&(ke_date[1])))=temp;
;;;327                   
;;;328    		temp=LPC_RTC->MIN;
;;;329    		gran_char(&temp,0,59);
;;;330    		*(((char*)(&(ke_date[1])))+1)=temp;
;;;331    	          
;;;332    		temp=LPC_RTC->SEC;
;;;333    		gran_char(&temp,0,59);
;;;334    		*(((char*)(&(ke_date[1])))+2)=temp;
;;;335    			
;;;336    		*(((char*)(&(ke_date[1])))+3)=*(((char*)&temp_temp)+1);
;;;337    		lc640_write_long(EE_SPC_KE_DATE1,ke_date[1]);
;;;338    		}
;;;339    
;;;340    	}
;;;341    }
000036  f1a406b6          SUB      r6,r4,#0xb6
00003a  4288              CMP      r0,r1
00003c  da02              BGE      |L3.68|
00003e  88a0              LDRH     r0,[r4,#4]            ;276  ; adc_self_ch_buff
000040  8630              STRH     r0,[r6,#0x30]         ;276
000042  e00c              B        |L3.94|
                  |L3.68|
000044  f9b50002          LDRSH    r0,[r5,#2]            ;276  ; adc_self_ch_disp
000048  4288              CMP      r0,r1                 ;276
00004a  da02              BGE      |L3.82|
00004c  8860              LDRH     r0,[r4,#2]            ;277  ; adc_self_ch_buff
00004e  8630              STRH     r0,[r6,#0x30]         ;277
000050  e005              B        |L3.94|
                  |L3.82|
000052  f9b50000          LDRSH    r0,[r5,#0]            ;277  ; adc_self_ch_disp
000056  4288              CMP      r0,r1
000058  da01              BGE      |L3.94|
00005a  8820              LDRH     r0,[r4,#0]            ;278  ; adc_self_ch_buff
00005c  8630              STRH     r0,[r6,#0x30]         ;278
                  |L3.94|
00005e  78f7              LDRB     r7,[r6,#3]            ;278  ; adc_ch_net
000060  2200              MOVS     r2,#0                 ;278
000062  b3f7              CBZ      r7,|L3.226|
000064  79b3              LDRB     r3,[r6,#6]            ;278  ; adc_window_flag
000066  4869              LDR      r0,|L3.524|
000068  b18b              CBZ      r3,|L3.142|
00006a  f9b61030          LDRSH    r1,[r6,#0x30]         ;278  ; adc_result
00006e  6804              LDR      r4,[r0,#0]            ;279  ; main_power_buffer
000070  eb0404a1          ADD      r4,r4,r1,ASR #2       ;279
000074  6004              STR      r4,[r0,#0]            ;279  ; main_power_buffer
000076  6844              LDR      r4,[r0,#4]            ;279  ; main_power_buffer
000078  eb0404a1          ADD      r4,r4,r1,ASR #2       ;279
00007c  6044              STR      r4,[r0,#4]            ;269  ; main_power_buffer
00007e  6884              LDR      r4,[r0,#8]            ;280  ; main_power_buffer
000080  eb0404a1          ADD      r4,r4,r1,ASR #2       ;280
000084  6084              STR      r4,[r0,#8]            ;280  ; main_power_buffer
000086  68c4              LDR      r4,[r0,#0xc]          ;281  ; main_power_buffer
000088  eb0401a1          ADD      r1,r4,r1,ASR #2       ;281
00008c  60c1              STR      r1,[r0,#0xc]          ;280  ; main_power_buffer
                  |L3.142|
00008e  f9b61030          LDRSH    r1,[r6,#0x30]         ;280  ; adc_result
000092  2964              CMP      r1,#0x64
000094  da04              BGE      |L3.160|
000096  8eb1              LDRH     r1,[r6,#0x34]         ;281  ; adc_zero_cnt
000098  f1010101          ADD      r1,r1,#1              ;285
00009c  86b1              STRH     r1,[r6,#0x34]         ;285
00009e  e000              B        |L3.162|
                  |L3.160|
0000a0  86b2              STRH     r2,[r6,#0x34]         ;288
                  |L3.162|
0000a2  f9b64034          LDRSH    r4,[r6,#0x34]         ;288  ; adc_zero_cnt
0000a6  f44f61fa          MOV      r1,#0x7d0             ;289
0000aa  428c              CMP      r4,r1                 ;289
0000ac  db05              BLT      |L3.186|
0000ae  86b1              STRH     r1,[r6,#0x34]         ;291
0000b0  6002              STR      r2,[r0,#0]            ;292  ; main_power_buffer
0000b2  6042              STR      r2,[r0,#4]            ;292  ; main_power_buffer
0000b4  6082              STR      r2,[r0,#8]            ;293  ; main_power_buffer
0000b6  60c2              STR      r2,[r0,#0xc]          ;293  ; main_power_buffer
0000b8  85f2              STRH     r2,[r6,#0x2e]         ;293
                  |L3.186|
0000ba  8eb1              LDRH     r1,[r6,#0x34]         ;293  ; adc_zero_cnt
0000bc  2905              CMP      r1,#5                 ;293
0000be  d14f              BNE      |L3.352|
0000c0  b1bb              CBZ      r3,|L3.242|
0000c2  8e71              LDRH     r1,[r6,#0x32]         ;296  ; adc_gorb_cnt
0000c4  f1010101          ADD      r1,r1,#1              ;296
0000c8  b209              SXTH     r1,r1                 ;296
0000ca  8671              STRH     r1,[r6,#0x32]         ;296
0000cc  f5b17f00          CMP      r1,#0x200             ;298
0000d0  db00              BLT      |L3.212|
0000d2  8672              STRH     r2,[r6,#0x32]         ;300
                  |L3.212|
0000d4  f9b61032          LDRSH    r1,[r6,#0x32]         ;300  ; adc_gorb_cnt
0000d8  064c              LSLS     r4,r1,#25             ;300
0000da  d10a              BNE      |L3.242|
0000dc  ea4f11e1          ASR      r1,r1,#7              ;307
0000e0  e000              B        |L3.228|
                  |L3.226|
0000e2  e015              B        |L3.272|
                  |L3.228|
0000e4  f8504021          LDR      r4,[r0,r1,LSL #2]     ;307
0000e8  ea4f2424          ASR      r4,r4,#8              ;307
0000ec  85f4              STRH     r4,[r6,#0x2e]         ;307
0000ee  f8402021          STR      r2,[r0,r1,LSL #2]     ;307
                  |L3.242|
0000f2  f9b60036          LDRSH    r0,[r6,#0x36]         ;309  ; adc_window_cnt
0000f6  2896              CMP      r0,#0x96              ;310
0000f8  dd01              BLE      |L3.254|
0000fa  b103              CBZ      r3,|L3.254|
0000fc  71b2              STRB     r2,[r6,#6]            ;310
                  |L3.254|
0000fe  381f              SUBS     r0,r0,#0x1f           ;310
000100  2827              CMP      r0,#0x27              ;310
000102  d22d              BCS      |L3.352|
000104  79b0              LDRB     r0,[r6,#6]            ;311  ; adc_window_flag
000106  bb58              CBNZ     r0,|L3.352|
000108  f04f0001          MOV      r0,#1                 ;311
00010c  71b0              STRB     r0,[r6,#6]            ;311
00010e  e027              B        |L3.352|
                  |L3.272|
000110  483f              LDR      r0,|L3.528|
000112  7935              LDRB     r5,[r6,#4]            ;314  ; adc_ch
000114  7973              LDRB     r3,[r6,#5]            ;314  ; adc_ch_cnt
000116  eb001485          ADD      r4,r0,r5,LSL #6       ;314
00011a  f9b61030          LDRSH    r1,[r6,#0x30]         ;314  ; adc_result
00011e  f8441023          STR      r1,[r4,r3,LSL #2]     ;315
000122  0798              LSLS     r0,r3,#30             ;317
000124  d10f              BNE      |L3.326|
000126  4601              MOV      r1,r0                 ;318
                  |L3.296|
000128  f854c020          LDR      r12,[r4,r0,LSL #2]    ;318
00012c  4461              ADD      r1,r1,r12             ;318
00012e  f1000001          ADD      r0,r0,#1              ;318
000132  b2c0              UXTB     r0,r0                 ;319
000134  2810              CMP      r0,#0x10              ;319
000136  d3f7              BCC      |L3.296|
000138  ea4f1021          ASR      r0,r1,#4              ;321
00013c  4933              LDR      r1,|L3.524|
00013e  f1a10120          SUB      r1,r1,#0x20           ;322
000142  f8210015          STRH     r0,[r1,r5,LSL #1]     ;322
                  |L3.326|
000146  1c6d              ADDS     r5,r5,#1              ;324
000148  b2e8              UXTB     r0,r5                 ;324
00014a  7130              STRB     r0,[r6,#4]            ;325
00014c  2810              CMP      r0,#0x10              ;325
00014e  d307              BCC      |L3.352|
000150  7132              STRB     r2,[r6,#4]            ;325
000152  f1030301          ADD      r3,r3,#1              ;325
000156  b2d8              UXTB     r0,r3                 ;326
000158  7170              STRB     r0,[r6,#5]            ;326
00015a  2810              CMP      r0,#0x10              ;328
00015c  d300              BCC      |L3.352|
00015e  7172              STRB     r2,[r6,#5]            ;329
                  |L3.352|
000160  70b2              STRB     r2,[r6,#2]            ;329
000162  f1070701          ADD      r7,r7,#1              ;329
000166  f0070001          AND      r0,r7,#1              ;329
00016a  70f0              STRB     r0,[r6,#3]            ;330
00016c  4a29              LDR      r2,|L3.532|
00016e  b130              CBZ      r0,|L3.382|
000170  6810              LDR      r0,[r2,#0]            ;332
000172  f02000ff          BIC      r0,r0,#0xff           ;333
000176  f1000004          ADD      r0,r0,#4              ;333
00017a  6010              STR      r0,[r2,#0]            ;333
00017c  e03d              B        |L3.506|
                  |L3.382|
00017e  7931              LDRB     r1,[r6,#4]            ;334  ; adc_ch
000180  0708              LSLS     r0,r1,#28             ;334
000182  d406              BMI      |L3.402|
000184  6810              LDR      r0,[r2,#0]            ;336
000186  f02000ff          BIC      r0,r0,#0xff           ;336
00018a  f1000001          ADD      r0,r0,#1              ;337
00018e  6010              STR      r0,[r2,#0]            ;337
000190  e005              B        |L3.414|
                  |L3.402|
000192  6810              LDR      r0,[r2,#0]
000194  f02000ff          BIC      r0,r0,#0xff
000198  f1000002          ADD      r0,r0,#2              ;281
00019c  6010              STR      r0,[r2,#0]
                  |L3.414|
00019e  481e              LDR      r0,|L3.536|
0001a0  6803              LDR      r3,[r0,#0]
0001a2  f0435380          ORR      r3,r3,#0x10000000
0001a6  6003              STR      r3,[r0,#0]
0001a8  6a03              LDR      r3,[r0,#0x20]
0001aa  f0434380          ORR      r3,r3,#0x40000000
0001ae  6203              STR      r3,[r0,#0x20]
0001b0  6e03              LDR      r3,[r0,#0x60]
0001b2  f0436380          ORR      r3,r3,#0x4000000
0001b6  6603              STR      r3,[r0,#0x60]
0001b8  07cb              LSLS     r3,r1,#31
0001ba  d00a              BEQ      |L3.466|
0001bc  6943              LDR      r3,[r0,#0x14]
0001be  f0435380          ORR      r3,r3,#0x10000000
0001c2  6143              STR      r3,[r0,#0x14]
                  |L3.452|
0001c4  078b              LSLS     r3,r1,#30
0001c6  d409              BMI      |L3.476|
0001c8  6b43              LDR      r3,[r0,#0x34]
0001ca  f0234380          BIC      r3,r3,#0x40000000
0001ce  6343              STR      r3,[r0,#0x34]
0001d0  e008              B        |L3.484|
                  |L3.466|
0001d2  6943              LDR      r3,[r0,#0x14]
0001d4  f0235380          BIC      r3,r3,#0x10000000
0001d8  6143              STR      r3,[r0,#0x14]
0001da  e7f3              B        |L3.452|
                  |L3.476|
0001dc  6b43              LDR      r3,[r0,#0x34]
0001de  f0434380          ORR      r3,r3,#0x40000000
0001e2  6343              STR      r3,[r0,#0x34]
                  |L3.484|
0001e4  0749              LSLS     r1,r1,#29
0001e6  d404              BMI      |L3.498|
0001e8  6f41              LDR      r1,[r0,#0x74]
0001ea  f0216180          BIC      r1,r1,#0x4000000
0001ee  6741              STR      r1,[r0,#0x74]
0001f0  e003              B        |L3.506|
                  |L3.498|
0001f2  6f41              LDR      r1,[r0,#0x74]
0001f4  f0416180          ORR      r1,r1,#0x4000000
0001f8  6741              STR      r1,[r0,#0x74]
                  |L3.506|
0001fa  6810              LDR      r0,[r2,#0]
0001fc  f0407080          ORR      r0,r0,#0x1000000
000200  6010              STR      r0,[r2,#0]
000202  e8bd81f0          POP      {r4-r8,pc}
;;;342    
                          ENDP

000206  0000              DCW      0x0000
                  |L3.520|
                          DCD      ||area_number.23||+0xb6
                  |L3.524|
                          DCD      ||.bss||+0x420
                  |L3.528|
                          DCD      ||.bss||
                  |L3.532|
                          DCD      0x40034000
                  |L3.536|
                          DCD      0x2009c000

                          AREA ||area_number.4||, CODE, READONLY, ALIGN=2

                          EXPORTAS ||area_number.4||, ||.text||
                  ips_current_average_hndl_ PROC
;;;266    //-----------------------------------------------
;;;267    void ke_start(char in)
000000  e92d43f0          PUSH     {r4-r9,lr}
;;;268    {          
000004  b085              SUB      sp,sp,#0x14
;;;269    ke_start_stat=(enum_ke_start_stat)0;		 
000006  4c64              LDR      r4,|L4.408|
000008  4e64              LDR      r6,|L4.412|
00000a  2500              MOVS     r5,#0
00000c  7820              LDRB     r0,[r4,#0]  ; ica_timer_cnt
;;;270    
;;;271    if(spc_stat==spcVZ)ke_start_stat=kssNOT_VZ;
00000e  1c40              ADDS     r0,r0,#1
000010  b2c0              UXTB     r0,r0
000012  7020              STRB     r0,[r4,#0]
000014  280a              CMP      r0,#0xa
000016  d340              BCC      |L4.154|
;;;272    #ifndef UKU_220_IPS_TERMOKOMPENSAT
;;;273    else if(BAT_IS_ON[in]!=bisON)ke_start_stat=kssNOT_BAT;
;;;274    #endif
;;;275    else if(bat[in]._av&(1<<0))ke_start_stat=kssNOT_BAT_AV;
000018  7025              STRB     r5,[r4,#0]
00001a  f8dfc184          LDR      r12,|L4.416|
00001e  f89c0000          LDRB     r0,[r12,#0]  ; ica_plazma
000022  f1000001          ADD      r0,r0,#1
000026  f88c0000          STRB     r0,[r12,#0]
00002a  485e              LDR      r0,|L4.420|
00002c  495e              LDR      r1,|L4.424|
00002e  f9b00000          LDRSH    r0,[r0,#0]  ; bps_I
000032  8008              STRH     r0,[r1,#0]
;;;276    else if(bat[in]._temper_stat&(1<<1))ke_start_stat=kssNOT_BAT_AV_T;
;;;277    else if(bat[in]._av&(1<<1))ke_start_stat=kssNOT_BAT_AV_ASS;
;;;278    else if(bat[in]._Ib>IKB)ke_start_stat=kssNOT_BAT_ZAR;
;;;279    else if(bat[in]._Ib<-IKB)ke_start_stat=kssNOT_BAT_RAZR;
;;;280    else if((spc_stat==spcKE)&&(spc_bat==0))ke_start_stat=kssNOT_KE1;
;;;281    else if((spc_stat==spcKE)&&(spc_bat==1))ke_start_stat=kssNOT_KE2;
;;;282    else 
;;;283    	{
;;;284    
;;;285    	ke_start_stat=kssYES;
;;;286    
;;;287    	spc_stat=spcKE;
;;;288    	__ee_spc_stat=spcKE;
;;;289    	lc640_write_int(EE_SPC_STAT,__ee_spc_stat);
;;;290    	
;;;291    	spc_bat=in;
;;;292    	__ee_spc_bat=in;
;;;293    	lc640_write_int(EE_SPC_BAT,__ee_spc_bat);
;;;294    
;;;295    	bat[in]._zar_cnt_ke=0;
;;;296    	lc640_write_int(ADR_EE_BAT_ZAR_CNT_KE[in],0);
;;;297    	
;;;298    	spc_phase=0;
;;;299    	__ee_spc_phase=0;
;;;300    	lc640_write_int(EE_SPC_PHASE,__ee_spc_phase);
;;;301    
;;;302    	//ke_mem_hndl(in,lc640_read_int(ADR_EE_BAT_ZAR_CNT_KE[spc_bat]));
;;;303    
;;;304    		{					
;;;305    		signed short temp_temp;
;;;306    		signed char temp;
;;;307    		temp_temp=bat[in]._u_old[((bat_u_old_cnt+1)&0x07)]; 
;;;308    		    
;;;309    		temp=LPC_RTC->YEAR;
;;;310    		gran_char(&temp,1,99);
;;;311    		*((char*)(&(ke_date[0])))=temp;
;;;312    			
;;;313    		temp=LPC_RTC->MONTH;
;;;314    		gran_char(&temp,1,12);
;;;315    		*(((char*)(&(ke_date[0])))+1)=temp;
;;;316    		
;;;317    		temp=LPC_RTC->DOM;
;;;318    		gran_char(&temp,1,31);
;;;319    		*(((char*)(&(ke_date[0])))+2)=temp;			
;;;320    				
;;;321    		*(((char*)(&(ke_date[0])))+3)=*((char*)&temp_temp);
;;;322    		lc640_write_long(EE_SPC_KE_DATE0,ke_date[0]);
;;;323    
;;;324    		temp=LPC_RTC->HOUR;
;;;325    		gran_char(&temp,0,23);
;;;326    		*((char*)(&(ke_date[1])))=temp;
;;;327                   
;;;328    		temp=LPC_RTC->MIN;
;;;329    		gran_char(&temp,0,59);
;;;330    		*(((char*)(&(ke_date[1])))+1)=temp;
;;;331    	          
;;;332    		temp=LPC_RTC->SEC;
;;;333    		gran_char(&temp,0,59);
;;;334    		*(((char*)(&(ke_date[1])))+2)=temp;
;;;335    			
;;;336    		*(((char*)(&(ke_date[1])))+3)=*(((char*)&temp_temp)+1);
;;;337    		lc640_write_long(EE_SPC_KE_DATE1,ke_date[1]);
;;;338    		}
;;;339    
;;;340    	}
;;;341    }
000034  495d              LDR      r1,|L4.428|
000036  f8df8178          LDR      r8,|L4.432|
00003a  4662              MOV      r2,r12
00003c  4637              MOV      r7,r6                 ;276
00003e  f9b11000          LDRSH    r1,[r1,#0]            ;276  ; ica_your_current
000042  7852              LDRB     r2,[r2,#1]            ;276
000044  f9b83000          LDRSH    r3,[r8,#0]            ;276
000048  f9b77000          LDRSH    r7,[r7,#0]            ;276
00004c  4288              CMP      r0,r1                 ;277
00004e  dd06              BLE      |L4.94|
000050  eba00901          SUB      r9,r0,r1              ;277
000054  f1b90f0a          CMP      r9,#0xa               ;277
000058  db01              BLT      |L4.94|
00005a  2f01              CMP      r7,#1                 ;278
00005c  d007              BEQ      |L4.110|
                  |L4.94|
00005e  4288              CMP      r0,r1                 ;278
000060  da16              BGE      |L4.144|
000062  1a08              SUBS     r0,r1,r0              ;278
000064  280a              CMP      r0,#0xa               ;278
000066  db13              BLT      |L4.144|
000068  2f01              CMP      r7,#1                 ;278
00006a  d009              BEQ      |L4.128|
00006c  e010              B        |L4.144|
                  |L4.110|
00006e  f1020201          ADD      r2,r2,#1              ;279
000072  f88c2001          STRB     r2,[r12,#1]           ;279
000076  f1a30301          SUB      r3,r3,#1              ;279
00007a  f8a83000          STRH     r3,[r8,#0]
00007e  e007              B        |L4.144|
                  |L4.128|
000080  f1a20201          SUB      r2,r2,#1              ;280
000084  f88c2001          STRB     r2,[r12,#1]           ;280
000088  f1030301          ADD      r3,r3,#1              ;281
00008c  f8a83000          STRH     r3,[r8,#0]            ;280
                  |L4.144|
000090  2214              MOVS     r2,#0x14              ;280
000092  4251              RSBS     r1,r2,#0
000094  4846              LDR      r0,|L4.432|
000096  f7fffffe          BL       gran
                  |L4.154|
00009a  7820              LDRB     r0,[r4,#0]            ;285  ; ica_timer_cnt
00009c  f8df8114          LDR      r8,|L4.436|
0000a0  4f45              LDR      r7,|L4.440|
0000a2  2808              CMP      r0,#8                 ;288
0000a4  d125              BNE      |L4.242|
0000a6  8830              LDRH     r0,[r6,#0]            ;289  ; ICA_EN
0000a8  2801              CMP      r0,#1                 ;289
0000aa  d122              BNE      |L4.242|
0000ac  f8b80000          LDRH     r0,[r8,#0]            ;289  ; ICA_MODBUS_ADDRESS
0000b0  f88d0000          STRB     r0,[sp,#0]            ;292
0000b4  f04f0004          MOV      r0,#4                 ;293
0000b8  f88d0001          STRB     r0,[sp,#1]            ;293
0000bc  f88d5002          STRB     r5,[sp,#2]            ;293
0000c0  f04f0002          MOV      r0,#2                 ;296
0000c4  f88d0003          STRB     r0,[sp,#3]            ;296
0000c8  f88d5004          STRB     r5,[sp,#4]            ;296
0000cc  f04f0001          MOV      r0,#1                 ;298
0000d0  f88d0005          STRB     r0,[sp,#5]            ;299
0000d4  f04f0106          MOV      r1,#6                 ;300
0000d8  4668              MOV      r0,sp                 ;300
0000da  f7fffffe          BL       CRC16_2
0000de  f88d0006          STRB     r0,[sp,#6]            ;307
0000e2  ea4f2020          ASR      r0,r0,#8              ;307
0000e6  f88d0007          STRB     r0,[sp,#7]            ;307
0000ea  f9b70000          LDRSH    r0,[r7,#0]            ;307  ; ICA_CH
0000ee  b3e8              CBZ      r0,|L4.364|
0000f0  2801              CMP      r0,#1                 ;309
                  |L4.242|
0000f2  4832              LDR      r0,|L4.444|
0000f4  f06f0214          MVN      r2,#0x14              ;309
0000f8  f9b00000          LDRSH    r0,[r0,#0]            ;310  ; TBAT
0000fc  ebc01100          RSB      r1,r0,r0,LSL #4       ;310
000100  eb020181          ADD      r1,r2,r1,LSL #2       ;310
000104  4a2e              LDR      r2,|L4.448|
000106  f9b22046          LDRSH    r2,[r2,#0x46]         ;311  ; main_kb_cnt
00010a  4291              CMP      r1,r2                 ;311
00010c  d134              BNE      |L4.376|
00010e  8831              LDRH     r1,[r6,#0]            ;313  ; ICA_EN
000110  2901              CMP      r1,#1                 ;313
000112  d131              BNE      |L4.376|
000114  f8b81000          LDRH     r1,[r8,#0]            ;314  ; ICA_MODBUS_ADDRESS
000118  f88d1000          STRB     r1,[sp,#0]            ;314
00011c  f04f0106          MOV      r1,#6                 ;315
000120  f88d1001          STRB     r1,[sp,#1]            ;315
000124  f88d5002          STRB     r5,[sp,#2]            ;317
000128  f04f011e          MOV      r1,#0x1e              ;318
00012c  f88d1003          STRB     r1,[sp,#3]            ;318
000130  ea4f71e0          ASR      r1,r0,#31             ;319
000134  eb006111          ADD      r1,r0,r1,LSR #24      ;319
000138  ea4f2221          ASR      r2,r1,#8              ;321
00013c  f88d2004          STRB     r2,[sp,#4]            ;322
000140  f88d0005          STRB     r0,[sp,#5]            ;322
000144  f04f0106          MOV      r1,#6                 ;322
000148  4668              MOV      r0,sp                 ;324
00014a  f7fffffe          BL       CRC16_2
00014e  f88d0006          STRB     r0,[sp,#6]            ;325
000152  ea4f2020          ASR      r0,r0,#8              ;325
000156  f88d0007          STRB     r0,[sp,#7]            ;326
00015a  8838              LDRH     r0,[r7,#0]            ;328  ; ICA_CH
00015c  2800              CMP      r0,#0                 ;328
00015e  d10b              BNE      |L4.376|
000160  4604              MOV      r4,r0                 ;329
000162  466d              MOV      r5,sp                 ;329
                  |L4.356|
000164  5d28              LDRB     r0,[r5,r4]            ;329
000166  f7fffffe          BL       putchar_sc16is700
00016a  e000              B        |L4.366|
                  |L4.364|
00016c  e007              B        |L4.382|
                  |L4.366|
00016e  f1040401          ADD      r4,r4,#1              ;332
000172  b2e4              UXTB     r4,r4                 ;333
000174  2c08              CMP      r4,#8                 ;333
000176  d3f5              BCC      |L4.356|
                  |L4.376|
000178  b005              ADD      sp,sp,#0x14           ;333
00017a  e8bd83f0          POP      {r4-r9,pc}            ;333
                  |L4.382|
00017e  f04f0400          MOV      r4,#0                 ;334
000182  46e9              MOV      r9,sp                 ;336
                  |L4.388|
000184  f8190004          LDRB     r0,[r9,r4]            ;336
000188  f7fffffe          BL       putchar_sc16is700
00018c  f1040401          ADD      r4,r4,#1              ;337
000190  b2e4              UXTB     r4,r4                 ;337
000192  2c08              CMP      r4,#8
000194  d3f6              BCC      |L4.388|
000196  e7ac              B        |L4.242|
;;;342    
                          ENDP

                  |L4.408|
                          DCD      ica_timer_cnt
                  |L4.412|
                          DCD      ICA_EN
                  |L4.416|
                          DCD      ica_plazma
                  |L4.420|
                          DCD      bps_I
                  |L4.424|
                          DCD      ica_my_current
                  |L4.428|
                          DCD      ica_your_current
                  |L4.432|
                          DCD      ica_u_necc
                  |L4.436|
                          DCD      ICA_MODBUS_ADDRESS
                  |L4.440|
                          DCD      ICA_CH
                  |L4.444|
                          DCD      TBAT
                  |L4.448|
                          DCD      ||area_number.23||

                          AREA ||area_number.5||, CODE, READONLY, ALIGN=2

                          EXPORTAS ||area_number.5||, ||.text||
                  inv_drv PROC
;;;266    //-----------------------------------------------
;;;267    void ke_start(char in)
000000  b570              PUSH     {r4-r6,lr}
;;;268    {          
000002  4604              MOV      r4,r0
000004  f04f0207          MOV      r2,#7
;;;269    ke_start_stat=(enum_ke_start_stat)0;		 
000008  f04f0101          MOV      r1,#1
00000c  48a4              LDR      r0,|L5.672|
;;;270    
;;;271    if(spc_stat==spcVZ)ke_start_stat=kssNOT_VZ;
00000e  f7fffffe          BL       gran_char
000012  48a4              LDR      r0,|L5.676|
000014  eb040144          ADD      r1,r4,r4,LSL #1
;;;272    #ifndef UKU_220_IPS_TERMOKOMPENSAT
;;;273    else if(BAT_IS_ON[in]!=bisON)ke_start_stat=kssNOT_BAT;
;;;274    #endif
;;;275    else if(bat[in]._av&(1<<0))ke_start_stat=kssNOT_BAT_AV;
000018  eb001541          ADD      r5,r0,r1,LSL #5
00001c  f8950047          LDRB     r0,[r5,#0x47]
000020  f8951046          LDRB     r1,[r5,#0x46]
000024  ea800001          EOR      r0,r0,r1
000028  4a9f              LDR      r2,|L5.680|
00002a  b100              CBZ      r0,|L5.46|
00002c  7050              STRB     r0,[r2,#1]
                  |L5.46|
00002e  ea010100          AND      r1,r1,r0
000032  b101              CBZ      r1,|L5.54|
;;;276    else if(bat[in]._temper_stat&(1<<1))ke_start_stat=kssNOT_BAT_AV_T;
;;;277    else if(bat[in]._av&(1<<1))ke_start_stat=kssNOT_BAT_AV_ASS;
;;;278    else if(bat[in]._Ib>IKB)ke_start_stat=kssNOT_BAT_ZAR;
;;;279    else if(bat[in]._Ib<-IKB)ke_start_stat=kssNOT_BAT_RAZR;
;;;280    else if((spc_stat==spcKE)&&(spc_bat==0))ke_start_stat=kssNOT_KE1;
;;;281    else if((spc_stat==spcKE)&&(spc_bat==1))ke_start_stat=kssNOT_KE2;
;;;282    else 
;;;283    	{
;;;284    
;;;285    	ke_start_stat=kssYES;
;;;286    
;;;287    	spc_stat=spcKE;
;;;288    	__ee_spc_stat=spcKE;
;;;289    	lc640_write_int(EE_SPC_STAT,__ee_spc_stat);
;;;290    	
;;;291    	spc_bat=in;
;;;292    	__ee_spc_bat=in;
;;;293    	lc640_write_int(EE_SPC_BAT,__ee_spc_bat);
;;;294    
;;;295    	bat[in]._zar_cnt_ke=0;
;;;296    	lc640_write_int(ADR_EE_BAT_ZAR_CNT_KE[in],0);
;;;297    	
;;;298    	spc_phase=0;
;;;299    	__ee_spc_phase=0;
;;;300    	lc640_write_int(EE_SPC_PHASE,__ee_spc_phase);
;;;301    
;;;302    	//ke_mem_hndl(in,lc640_read_int(ADR_EE_BAT_ZAR_CNT_KE[spc_bat]));
;;;303    
;;;304    		{					
;;;305    		signed short temp_temp;
;;;306    		signed char temp;
;;;307    		temp_temp=bat[in]._u_old[((bat_u_old_cnt+1)&0x07)]; 
;;;308    		    
;;;309    		temp=LPC_RTC->YEAR;
;;;310    		gran_char(&temp,1,99);
;;;311    		*((char*)(&(ke_date[0])))=temp;
;;;312    			
;;;313    		temp=LPC_RTC->MONTH;
;;;314    		gran_char(&temp,1,12);
;;;315    		*(((char*)(&(ke_date[0])))+1)=temp;
;;;316    		
;;;317    		temp=LPC_RTC->DOM;
;;;318    		gran_char(&temp,1,31);
;;;319    		*(((char*)(&(ke_date[0])))+2)=temp;			
;;;320    				
;;;321    		*(((char*)(&(ke_date[0])))+3)=*((char*)&temp_temp);
;;;322    		lc640_write_long(EE_SPC_KE_DATE0,ke_date[0]);
;;;323    
;;;324    		temp=LPC_RTC->HOUR;
;;;325    		gran_char(&temp,0,23);
;;;326    		*((char*)(&(ke_date[1])))=temp;
;;;327                   
;;;328    		temp=LPC_RTC->MIN;
;;;329    		gran_char(&temp,0,59);
;;;330    		*(((char*)(&(ke_date[1])))+1)=temp;
;;;331    	          
;;;332    		temp=LPC_RTC->SEC;
;;;333    		gran_char(&temp,0,59);
;;;334    		*(((char*)(&(ke_date[1])))+2)=temp;
;;;335    			
;;;336    		*(((char*)(&(ke_date[1])))+3)=*(((char*)&temp_temp)+1);
;;;337    		lc640_write_long(EE_SPC_KE_DATE1,ke_date[1]);
;;;338    		}
;;;339    
;;;340    	}
;;;341    }
000034  7091              STRB     r1,[r2,#2]
                  |L5.54|
000036  ea000301          AND      r3,r0,r1
00003a  07db              LSLS     r3,r3,#31
00003c  d027              BEQ      |L5.142|
00003e  78d0              LDRB     r0,[r2,#3]            ;276  ; plazma_inv
000040  f1000001          ADD      r0,r0,#1              ;276
000044  70d0              STRB     r0,[r2,#3]            ;276
000046  b134              CBZ      r4,|L5.86|
000048  2c01              CMP      r4,#1                 ;276
00004a  d00b              BEQ      |L5.100|
00004c  2c02              CMP      r4,#2                 ;277
00004e  d010              BEQ      |L5.114|
000050  2c03              CMP      r4,#3                 ;277
000052  d015              BEQ      |L5.128|
000054  e120              B        |L5.664|
                  |L5.86|
000056  2301              MOVS     r3,#1
000058  461a              MOV      r2,r3                 ;278
00005a  210e              MOVS     r1,#0xe               ;278
00005c  a093              ADR      r0,|L5.684|
00005e  f7fffffe          BL       snmp_trap_send
000062  e119              B        |L5.664|
                  |L5.100|
000064  2301              MOVS     r3,#1                 ;278
000066  2202              MOVS     r2,#2                 ;278
000068  210e              MOVS     r1,#0xe               ;278
00006a  a097              ADR      r0,|L5.712|
00006c  f7fffffe          BL       snmp_trap_send
000070  e112              B        |L5.664|
                  |L5.114|
000072  2301              MOVS     r3,#1                 ;279
000074  2203              MOVS     r2,#3                 ;279
000076  210e              MOVS     r1,#0xe               ;279
000078  a09a              ADR      r0,|L5.740|
00007a  f7fffffe          BL       snmp_trap_send
00007e  e10b              B        |L5.664|
                  |L5.128|
000080  2301              MOVS     r3,#1                 ;280
000082  2204              MOVS     r2,#4                 ;280
000084  210e              MOVS     r1,#0xe               ;280
000086  a09e              ADR      r0,|L5.768|
000088  f7fffffe          BL       snmp_trap_send
00008c  e104              B        |L5.664|
                  |L5.142|
00008e  0783              LSLS     r3,r0,#30             ;280
000090  d529              BPL      |L5.230|
000092  078b              LSLS     r3,r1,#30
000094  d527              BPL      |L5.230|
000096  78d0              LDRB     r0,[r2,#3]            ;281  ; plazma_inv
000098  f1000001          ADD      r0,r0,#1              ;285
00009c  70d0              STRB     r0,[r2,#3]            ;285
00009e  b134              CBZ      r4,|L5.174|
0000a0  2c01              CMP      r4,#1                 ;288
0000a2  d00b              BEQ      |L5.188|
0000a4  2c02              CMP      r4,#2                 ;289
0000a6  d010              BEQ      |L5.202|
0000a8  2c03              CMP      r4,#3                 ;289
0000aa  d015              BEQ      |L5.216|
0000ac  e0f4              B        |L5.664|
                  |L5.174|
0000ae  2302              MOVS     r3,#2                 ;291
0000b0  2201              MOVS     r2,#1                 ;292
0000b2  210e              MOVS     r1,#0xe               ;292
0000b4  a099              ADR      r0,|L5.796|
0000b6  f7fffffe          BL       snmp_trap_send
0000ba  e0ed              B        |L5.664|
                  |L5.188|
0000bc  2302              MOVS     r3,#2                 ;293
0000be  461a              MOV      r2,r3                 ;295
0000c0  210e              MOVS     r1,#0xe               ;296
0000c2  a09d              ADR      r0,|L5.824|
0000c4  f7fffffe          BL       snmp_trap_send
0000c8  e0e6              B        |L5.664|
                  |L5.202|
0000ca  2302              MOVS     r3,#2                 ;296
0000cc  2203              MOVS     r2,#3                 ;298
0000ce  210e              MOVS     r1,#0xe               ;299
0000d0  a0a0              ADR      r0,|L5.852|
0000d2  f7fffffe          BL       snmp_trap_send
0000d6  e0df              B        |L5.664|
                  |L5.216|
0000d8  2302              MOVS     r3,#2                 ;300
0000da  2204              MOVS     r2,#4                 ;300
0000dc  210e              MOVS     r1,#0xe               ;307
0000de  a0a4              ADR      r0,|L5.880|
0000e0  f7fffffe          BL       snmp_trap_send
0000e4  e0d8              B        |L5.664|
                  |L5.230|
0000e6  0743              LSLS     r3,r0,#29             ;307
0000e8  d529              BPL      |L5.318|
0000ea  074b              LSLS     r3,r1,#29             ;307
0000ec  d527              BPL      |L5.318|
0000ee  78d0              LDRB     r0,[r2,#3]            ;307  ; plazma_inv
0000f0  f1000001          ADD      r0,r0,#1              ;309
0000f4  70d0              STRB     r0,[r2,#3]            ;309
0000f6  b134              CBZ      r4,|L5.262|
0000f8  2c01              CMP      r4,#1                 ;310
0000fa  d00b              BEQ      |L5.276|
0000fc  2c02              CMP      r4,#2                 ;310
0000fe  d010              BEQ      |L5.290|
000100  2c03              CMP      r4,#3                 ;310
000102  d015              BEQ      |L5.304|
000104  e0c8              B        |L5.664|
                  |L5.262|
000106  2303              MOVS     r3,#3                 ;311
000108  2201              MOVS     r2,#1                 ;311
00010a  210e              MOVS     r1,#0xe               ;311
00010c  a09f              ADR      r0,|L5.908|
00010e  f7fffffe          BL       snmp_trap_send
000112  e0c1              B        |L5.664|
                  |L5.276|
000114  2303              MOVS     r3,#3                 ;314
000116  2202              MOVS     r2,#2                 ;314
000118  210e              MOVS     r1,#0xe               ;314
00011a  a0a3              ADR      r0,|L5.936|
00011c  f7fffffe          BL       snmp_trap_send
000120  e0ba              B        |L5.664|
                  |L5.290|
000122  2303              MOVS     r3,#3                 ;317
000124  461a              MOV      r2,r3                 ;317
000126  210e              MOVS     r1,#0xe               ;318
000128  a0a6              ADR      r0,|L5.964|
00012a  f7fffffe          BL       snmp_trap_send
00012e  e0b3              B        |L5.664|
                  |L5.304|
000130  2303              MOVS     r3,#3                 ;319
000132  2204              MOVS     r2,#4                 ;319
000134  210e              MOVS     r1,#0xe               ;319
000136  a0aa              ADR      r0,|L5.992|
000138  f7fffffe          BL       snmp_trap_send
00013c  e0ac              B        |L5.664|
                  |L5.318|
00013e  0703              LSLS     r3,r0,#28             ;322
000140  d529              BPL      |L5.406|
000142  070b              LSLS     r3,r1,#28             ;322
000144  d527              BPL      |L5.406|
000146  78d0              LDRB     r0,[r2,#3]            ;324  ; plazma_inv
000148  f1000001          ADD      r0,r0,#1              ;324
00014c  70d0              STRB     r0,[r2,#3]            ;325
00014e  b134              CBZ      r4,|L5.350|
000150  2c01              CMP      r4,#1                 ;325
000152  d00b              BEQ      |L5.364|
000154  2c02              CMP      r4,#2                 ;326
000156  d010              BEQ      |L5.378|
000158  2c03              CMP      r4,#3                 ;326
00015a  d015              BEQ      |L5.392|
00015c  e09c              B        |L5.664|
                  |L5.350|
00015e  2304              MOVS     r3,#4                 ;329
000160  2201              MOVS     r2,#1                 ;329
000162  210e              MOVS     r1,#0xe               ;329
000164  a0a5              ADR      r0,|L5.1020|
000166  f7fffffe          BL       snmp_trap_send
00016a  e095              B        |L5.664|
                  |L5.364|
00016c  2304              MOVS     r3,#4                 ;330
00016e  2202              MOVS     r2,#2                 ;332
000170  210e              MOVS     r1,#0xe               ;332
000172  a0ab              ADR      r0,|L5.1056|
000174  f7fffffe          BL       snmp_trap_send
000178  e08e              B        |L5.664|
                  |L5.378|
00017a  2304              MOVS     r3,#4                 ;333
00017c  2203              MOVS     r2,#3                 ;334
00017e  210e              MOVS     r1,#0xe               ;334
000180  a0b0              ADR      r0,|L5.1092|
000182  f7fffffe          BL       snmp_trap_send
000186  e087              B        |L5.664|
                  |L5.392|
000188  2304              MOVS     r3,#4                 ;337
00018a  461a              MOV      r2,r3                 ;337
00018c  210e              MOVS     r1,#0xe               ;337
00018e  a0b6              ADR      r0,|L5.1128|
000190  f7fffffe          BL       snmp_trap_send
000194  e080              B        |L5.664|
                  |L5.406|
000196  06c3              LSLS     r3,r0,#27             ;281
000198  d529              BPL      |L5.494|
00019a  06cb              LSLS     r3,r1,#27             ;281
00019c  d527              BPL      |L5.494|
00019e  78d0              LDRB     r0,[r2,#3]  ; plazma_inv
0001a0  f1000001          ADD      r0,r0,#1
0001a4  70d0              STRB     r0,[r2,#3]
0001a6  b134              CBZ      r4,|L5.438|
0001a8  2c01              CMP      r4,#1
0001aa  d00b              BEQ      |L5.452|
0001ac  2c02              CMP      r4,#2
0001ae  d010              BEQ      |L5.466|
0001b0  2c03              CMP      r4,#3
0001b2  d015              BEQ      |L5.480|
0001b4  e070              B        |L5.664|
                  |L5.438|
0001b6  2305              MOVS     r3,#5
0001b8  2201              MOVS     r2,#1
0001ba  210e              MOVS     r1,#0xe
0001bc  a0b3              ADR      r0,|L5.1164|
0001be  f7fffffe          BL       snmp_trap_send
0001c2  e069              B        |L5.664|
                  |L5.452|
0001c4  2305              MOVS     r3,#5
0001c6  2202              MOVS     r2,#2
0001c8  210e              MOVS     r1,#0xe
0001ca  a0b9              ADR      r0,|L5.1200|
0001cc  f7fffffe          BL       snmp_trap_send
0001d0  e062              B        |L5.664|
                  |L5.466|
0001d2  2305              MOVS     r3,#5
0001d4  2203              MOVS     r2,#3
0001d6  210e              MOVS     r1,#0xe
0001d8  a0be              ADR      r0,|L5.1236|
0001da  f7fffffe          BL       snmp_trap_send
0001de  e05b              B        |L5.664|
                  |L5.480|
0001e0  2305              MOVS     r3,#5
0001e2  2204              MOVS     r2,#4
0001e4  210e              MOVS     r1,#0xe
0001e6  a0c4              ADR      r0,|L5.1272|
0001e8  f7fffffe          BL       snmp_trap_send
0001ec  e054              B        |L5.664|
                  |L5.494|
0001ee  0683              LSLS     r3,r0,#26
0001f0  d529              BPL      |L5.582|
0001f2  068b              LSLS     r3,r1,#26
0001f4  d527              BPL      |L5.582|
0001f6  78d0              LDRB     r0,[r2,#3]  ; plazma_inv
0001f8  f1000001          ADD      r0,r0,#1
0001fc  70d0              STRB     r0,[r2,#3]
0001fe  b134              CBZ      r4,|L5.526|
000200  2c01              CMP      r4,#1
000202  d00b              BEQ      |L5.540|
000204  2c02              CMP      r4,#2
000206  d010              BEQ      |L5.554|
000208  2c03              CMP      r4,#3
00020a  d015              BEQ      |L5.568|
00020c  e044              B        |L5.664|
                  |L5.526|
00020e  2306              MOVS     r3,#6
000210  2201              MOVS     r2,#1
000212  210e              MOVS     r1,#0xe
000214  a0c1              ADR      r0,|L5.1308|
000216  f7fffffe          BL       snmp_trap_send
00021a  e03d              B        |L5.664|
                  |L5.540|
00021c  2306              MOVS     r3,#6
00021e  2202              MOVS     r2,#2
000220  210e              MOVS     r1,#0xe
000222  a0c7              ADR      r0,|L5.1344|
000224  f7fffffe          BL       snmp_trap_send
000228  e036              B        |L5.664|
                  |L5.554|
00022a  2306              MOVS     r3,#6
00022c  2203              MOVS     r2,#3
00022e  210e              MOVS     r1,#0xe
000230  a0cc              ADR      r0,|L5.1380|
000232  f7fffffe          BL       snmp_trap_send
000236  e02f              B        |L5.664|
                  |L5.568|
000238  2306              MOVS     r3,#6
00023a  2204              MOVS     r2,#4
00023c  210e              MOVS     r1,#0xe
00023e  a0d2              ADR      r0,|L5.1416|
000240  f7fffffe          BL       snmp_trap_send
000244  e028              B        |L5.664|
                  |L5.582|
000246  b300              CBZ      r0,|L5.650|
000248  b9f9              CBNZ     r1,|L5.650|
00024a  78d0              LDRB     r0,[r2,#3]  ; plazma_inv
00024c  f1000001          ADD      r0,r0,#1
000250  70d0              STRB     r0,[r2,#3]
000252  b134              CBZ      r4,|L5.610|
000254  2c01              CMP      r4,#1
000256  d00b              BEQ      |L5.624|
000258  2c02              CMP      r4,#2
00025a  d010              BEQ      |L5.638|
00025c  2c03              CMP      r4,#3
00025e  d015              BEQ      |L5.652|
000260  e01a              B        |L5.664|
                  |L5.610|
000262  2300              MOVS     r3,#0
000264  2201              MOVS     r2,#1
000266  210e              MOVS     r1,#0xe
000268  a0d0              ADR      r0,|L5.1452|
00026a  f7fffffe          BL       snmp_trap_send
00026e  e013              B        |L5.664|
                  |L5.624|
000270  2300              MOVS     r3,#0
000272  2202              MOVS     r2,#2
000274  210e              MOVS     r1,#0xe
000276  a0d2              ADR      r0,|L5.1472|
000278  f7fffffe          BL       snmp_trap_send
00027c  e00c              B        |L5.664|
                  |L5.638|
00027e  2300              MOVS     r3,#0
000280  2203              MOVS     r2,#3
000282  210e              MOVS     r1,#0xe
000284  a0d3              ADR      r0,|L5.1492|
000286  f7fffffe          BL       snmp_trap_send
                  |L5.650|
00028a  e005              B        |L5.664|
                  |L5.652|
00028c  2300              MOVS     r3,#0
00028e  2204              MOVS     r2,#4
000290  210e              MOVS     r1,#0xe
000292  a0d5              ADR      r0,|L5.1512|
000294  f7fffffe          BL       snmp_trap_send
                  |L5.664|
000298  f8150f46          LDRB     r0,[r5,#0x46]!
00029c  7068              STRB     r0,[r5,#1]
00029e  bd70              POP      {r4-r6,pc}
;;;342    
                          ENDP

                  |L5.672|
                          DCD      first_inv_slot
                  |L5.676|
                          DCD      inv
                  |L5.680|
                          DCD      ||area_number.23||+0x9c
                  |L5.684|
0002ac  496e7665          DCB      "Invertor #1 Alarm, overload",0
0002b0  72746f72
0002b4  20233120
0002b8  416c6172
0002bc  6d2c206f
0002c0  7665726c
0002c4  6f616400
                  |L5.712|
0002c8  496e7665          DCB      "Invertor #2 Alarm, overload",0
0002cc  72746f72
0002d0  20233220
0002d4  416c6172
0002d8  6d2c206f
0002dc  7665726c
0002e0  6f616400
                  |L5.740|
0002e4  496e7665          DCB      "Invertor #3 Alarm, overload",0
0002e8  72746f72
0002ec  20233320
0002f0  416c6172
0002f4  6d2c206f
0002f8  7665726c
0002fc  6f616400
                  |L5.768|
000300  496e7665          DCB      "Invertor #4 Alarm, overload",0
000304  72746f72
000308  20233420
00030c  416c6172
000310  6d2c206f
000314  7665726c
000318  6f616400
                  |L5.796|
00031c  496e7665          DCB      "Invertor #1 Alarm, overheat",0
000320  72746f72
000324  20233120
000328  416c6172
00032c  6d2c206f
000330  76657268
000334  65617400
                  |L5.824|
000338  496e7665          DCB      "Invertor #2 Alarm, overheat",0
00033c  72746f72
000340  20233220
000344  416c6172
000348  6d2c206f
00034c  76657268
000350  65617400
                  |L5.852|
000354  496e7665          DCB      "Invertor #3 Alarm, overheat",0
000358  72746f72
00035c  20233320
000360  416c6172
000364  6d2c206f
000368  76657268
00036c  65617400
                  |L5.880|
000370  496e7665          DCB      "Invertor #4 Alarm, overheat",0
000374  72746f72
000378  20233420
00037c  416c6172
000380  6d2c206f
000384  76657268
000388  65617400
                  |L5.908|
00038c  496e7665          DCB      "Invertor #1 Alarm, is warm",0
000390  72746f72
000394  20233120
000398  416c6172
00039c  6d2c2069
0003a0  73207761
0003a4  726d00  
0003a7  00                DCB      0
                  |L5.936|
0003a8  496e7665          DCB      "Invertor #2 Alarm, is warm",0
0003ac  72746f72
0003b0  20233220
0003b4  416c6172
0003b8  6d2c2069
0003bc  73207761
0003c0  726d00  
0003c3  00                DCB      0
                  |L5.964|
0003c4  496e7665          DCB      "Invertor #3 Alarm, is warm",0
0003c8  72746f72
0003cc  20233320
0003d0  416c6172
0003d4  6d2c2069
0003d8  73207761
0003dc  726d00  
0003df  00                DCB      0
                  |L5.992|
0003e0  496e7665          DCB      "Invertor #4 Alarm, is warm",0
0003e4  72746f72
0003e8  20233420
0003ec  416c6172
0003f0  6d2c2069
0003f4  73207761
0003f8  726d00  
0003fb  00                DCB      0
                  |L5.1020|
0003fc  496e7665          DCB      "Invertor #1 Alarm, voltage is up",0
000400  72746f72
000404  20233120
000408  416c6172
00040c  6d2c2076
000410  6f6c7461
000414  67652069
000418  73207570
00041c  00      
00041d  00                DCB      0
00041e  00                DCB      0
00041f  00                DCB      0
                  |L5.1056|
000420  496e7665          DCB      "Invertor #2 Alarm, voltage is up",0
000424  72746f72
000428  20233220
00042c  416c6172
000430  6d2c2076
000434  6f6c7461
000438  67652069
00043c  73207570
000440  00      
000441  00                DCB      0
000442  00                DCB      0
000443  00                DCB      0
                  |L5.1092|
000444  496e7665          DCB      "Invertor #3 Alarm, voltage is up",0
000448  72746f72
00044c  20233320
000450  416c6172
000454  6d2c2076
000458  6f6c7461
00045c  67652069
000460  73207570
000464  00      
000465  00                DCB      0
000466  00                DCB      0
000467  00                DCB      0
                  |L5.1128|
000468  496e7665          DCB      "Invertor #4 Alarm, voltage is up",0
00046c  72746f72
000470  20233420
000474  416c6172
000478  6d2c2076
00047c  6f6c7461
000480  67652069
000484  73207570
000488  00      
000489  00                DCB      0
00048a  00                DCB      0
00048b  00                DCB      0
                  |L5.1164|
00048c  496e7665          DCB      "Invertor #1 Alarm, voltage is down",0
000490  72746f72
000494  20233120
000498  416c6172
00049c  6d2c2076
0004a0  6f6c7461
0004a4  67652069
0004a8  7320646f
0004ac  776e00  
0004af  00                DCB      0
                  |L5.1200|
0004b0  496e7665          DCB      "Invertor #2 Alarm, voltage is down",0
0004b4  72746f72
0004b8  20233220
0004bc  416c6172
0004c0  6d2c2076
0004c4  6f6c7461
0004c8  67652069
0004cc  7320646f
0004d0  776e00  
0004d3  00                DCB      0
                  |L5.1236|
0004d4  496e7665          DCB      "Invertor #3 Alarm, voltage is down",0
0004d8  72746f72
0004dc  20233320
0004e0  416c6172
0004e4  6d2c2076
0004e8  6f6c7461
0004ec  67652069
0004f0  7320646f
0004f4  776e00  
0004f7  00                DCB      0
                  |L5.1272|
0004f8  496e7665          DCB      "Invertor #4 Alarm, voltage is down",0
0004fc  72746f72
000500  20233420
000504  416c6172
000508  6d2c2076
00050c  6f6c7461
000510  67652069
000514  7320646f
000518  776e00  
00051b  00                DCB      0
                  |L5.1308|
00051c  496e7665          DCB      "Invertor #1 Alarm, output is offed",0
000520  72746f72
000524  20233120
000528  416c6172
00052c  6d2c206f
000530  75747075
000534  74206973
000538  206f6666
00053c  656400  
00053f  00                DCB      0
                  |L5.1344|
000540  496e7665          DCB      "Invertor #2 Alarm, output is offed",0
000544  72746f72
000548  20233220
00054c  416c6172
000550  6d2c206f
000554  75747075
000558  74206973
00055c  206f6666
000560  656400  
000563  00                DCB      0
                  |L5.1380|
000564  496e7665          DCB      "Invertor #3 Alarm, output is offed",0
000568  72746f72
00056c  20233320
000570  416c6172
000574  6d2c206f
000578  75747075
00057c  74206973
000580  206f6666
000584  656400  
000587  00                DCB      0
                  |L5.1416|
000588  496e7665          DCB      "Invertor #4 Alarm, output is offed",0
00058c  72746f72
000590  20233420
000594  416c6172
000598  6d2c206f
00059c  75747075
0005a0  74206973
0005a4  206f6666
0005a8  656400  
0005ab  00                DCB      0
                  |L5.1452|
0005ac  496e7665          DCB      "Invertor #1 is norm",0
0005b0  72746f72
0005b4  20233120
0005b8  6973206e
0005bc  6f726d00
                  |L5.1472|
0005c0  496e7665          DCB      "Invertor #2 is norm",0
0005c4  72746f72
0005c8  20233220
0005cc  6973206e
0005d0  6f726d00
                  |L5.1492|
0005d4  496e7665          DCB      "Invertor #3 is norm",0
0005d8  72746f72
0005dc  20233320
0005e0  6973206e
0005e4  6f726d00
                  |L5.1512|
0005e8  496e7665          DCB      "Invertor #4 is norm",0
0005ec  72746f72
0005f0  20233420
0005f4  6973206e
0005f8  6f726d00

                          AREA ||area_number.6||, CODE, READONLY, ALIGN=2

                          EXPORTAS ||area_number.6||, ||.text||
                  klimat_hndl PROC
;;;266    //-----------------------------------------------
;;;267    void ke_start(char in)
000000  e92d41f0          PUSH     {r4-r8,lr}
;;;268    {          
000004  4d66              LDR      r5,|L6.416|
;;;269    ke_start_stat=(enum_ke_start_stat)0;		 
000006  4867              LDR      r0,|L6.420|
000008  4c67              LDR      r4,|L6.424|
00000a  f9b51000          LDRSH    r1,[r5,#0]  ; t_box
;;;270    
;;;271    if(spc_stat==spcVZ)ke_start_stat=kssNOT_VZ;
00000e  f9b02000          LDRSH    r2,[r0,#0]  ; TBOXMAX
000012  f9b40000          LDRSH    r0,[r4,#0]
000016  4291              CMP      r1,r2
;;;272    #ifndef UKU_220_IPS_TERMOKOMPENSAT
;;;273    else if(BAT_IS_ON[in]!=bisON)ke_start_stat=kssNOT_BAT;
;;;274    #endif
;;;275    else if(bat[in]._av&(1<<0))ke_start_stat=kssNOT_BAT_AV;
000018  dd03              BLE      |L6.34|
00001a  f1000001          ADD      r0,r0,#1
00001e  8020              STRH     r0,[r4,#0]
000020  e003              B        |L6.42|
                  |L6.34|
000022  da02              BGE      |L6.42|
000024  f1a00001          SUB      r0,r0,#1
000028  8020              STRH     r0,[r4,#0]
                  |L6.42|
00002a  2206              MOVS     r2,#6
00002c  2100              MOVS     r1,#0
00002e  485e              LDR      r0,|L6.424|
000030  f7fffffe          BL       gran
;;;276    else if(bat[in]._temper_stat&(1<<1))ke_start_stat=kssNOT_BAT_AV_T;
;;;277    else if(bat[in]._av&(1<<1))ke_start_stat=kssNOT_BAT_AV_ASS;
;;;278    else if(bat[in]._Ib>IKB)ke_start_stat=kssNOT_BAT_ZAR;
;;;279    else if(bat[in]._Ib<-IKB)ke_start_stat=kssNOT_BAT_RAZR;
;;;280    else if((spc_stat==spcKE)&&(spc_bat==0))ke_start_stat=kssNOT_KE1;
;;;281    else if((spc_stat==spcKE)&&(spc_bat==1))ke_start_stat=kssNOT_KE2;
;;;282    else 
;;;283    	{
;;;284    
;;;285    	ke_start_stat=kssYES;
;;;286    
;;;287    	spc_stat=spcKE;
;;;288    	__ee_spc_stat=spcKE;
;;;289    	lc640_write_int(EE_SPC_STAT,__ee_spc_stat);
;;;290    	
;;;291    	spc_bat=in;
;;;292    	__ee_spc_bat=in;
;;;293    	lc640_write_int(EE_SPC_BAT,__ee_spc_bat);
;;;294    
;;;295    	bat[in]._zar_cnt_ke=0;
;;;296    	lc640_write_int(ADR_EE_BAT_ZAR_CNT_KE[in],0);
;;;297    	
;;;298    	spc_phase=0;
;;;299    	__ee_spc_phase=0;
;;;300    	lc640_write_int(EE_SPC_PHASE,__ee_spc_phase);
;;;301    
;;;302    	//ke_mem_hndl(in,lc640_read_int(ADR_EE_BAT_ZAR_CNT_KE[spc_bat]));
;;;303    
;;;304    		{					
;;;305    		signed short temp_temp;
;;;306    		signed char temp;
;;;307    		temp_temp=bat[in]._u_old[((bat_u_old_cnt+1)&0x07)]; 
;;;308    		    
;;;309    		temp=LPC_RTC->YEAR;
;;;310    		gran_char(&temp,1,99);
;;;311    		*((char*)(&(ke_date[0])))=temp;
;;;312    			
;;;313    		temp=LPC_RTC->MONTH;
;;;314    		gran_char(&temp,1,12);
;;;315    		*(((char*)(&(ke_date[0])))+1)=temp;
;;;316    		
;;;317    		temp=LPC_RTC->DOM;
;;;318    		gran_char(&temp,1,31);
;;;319    		*(((char*)(&(ke_date[0])))+2)=temp;			
;;;320    				
;;;321    		*(((char*)(&(ke_date[0])))+3)=*((char*)&temp_temp);
;;;322    		lc640_write_long(EE_SPC_KE_DATE0,ke_date[0]);
;;;323    
;;;324    		temp=LPC_RTC->HOUR;
;;;325    		gran_char(&temp,0,23);
;;;326    		*((char*)(&(ke_date[1])))=temp;
;;;327                   
;;;328    		temp=LPC_RTC->MIN;
;;;329    		gran_char(&temp,0,59);
;;;330    		*(((char*)(&(ke_date[1])))+1)=temp;
;;;331    	          
;;;332    		temp=LPC_RTC->SEC;
;;;333    		gran_char(&temp,0,59);
;;;334    		*(((char*)(&(ke_date[1])))+2)=temp;
;;;335    			
;;;336    		*(((char*)(&(ke_date[1])))+3)=*(((char*)&temp_temp)+1);
;;;337    		lc640_write_long(EE_SPC_KE_DATE1,ke_date[1]);
;;;338    		}
;;;339    
;;;340    	}
;;;341    }
000034  f9b40000          LDRSH    r0,[r4,#0]  ; av_tbox_cnt
000038  495c              LDR      r1,|L6.428|
00003a  2601              MOVS     r6,#1
00003c  2805              CMP      r0,#5                 ;276
00003e  dd00              BLE      |L6.66|
000040  700e              STRB     r6,[r1,#0]            ;276
                  |L6.66|
000042  2400              MOVS     r4,#0                 ;276
000044  2801              CMP      r0,#1                 ;276
000046  da00              BGE      |L6.74|
000048  700c              STRB     r4,[r1,#0]            ;276
                  |L6.74|
00004a  4959              LDR      r1,|L6.432|
00004c  f9b50000          LDRSH    r0,[r5,#0]            ;277  ; t_box
000050  4a58              LDR      r2,|L6.436|
000052  f9b11000          LDRSH    r1,[r1,#0]            ;277  ; TBOXREG
000056  4f58              LDR      r7,|L6.440|
000058  1e8b              SUBS     r3,r1,#2              ;278
00005a  4298              CMP      r0,r3                 ;278
00005c  da0f              BGE      |L6.126|
00005e  f9921000          LDRSB    r1,[r2,#0]            ;278  ; t_box_cnt
000062  291e              CMP      r1,#0x1e              ;278
000064  da1e              BGE      |L6.164|
000066  f1010101          ADD      r1,r1,#1              ;278
00006a  b249              SXTB     r1,r1                 ;278
00006c  7011              STRB     r1,[r2,#0]
00006e  291e              CMP      r1,#0x1e              ;279
000070  db18              BLT      |L6.164|
000072  8839              LDRH     r1,[r7,#0]            ;279  ; main_vent_pos
000074  f1a10101          SUB      r1,r1,#1              ;279
000078  8039              STRH     r1,[r7,#0]            ;279
00007a  7014              STRB     r4,[r2,#0]
00007c  e012              B        |L6.164|
                  |L6.126|
00007e  4288              CMP      r0,r1                 ;280
000080  dd0f              BLE      |L6.162|
000082  f9921000          LDRSB    r1,[r2,#0]            ;280  ; t_box_cnt
000086  291e              CMP      r1,#0x1e              ;281
000088  da0c              BGE      |L6.164|
00008a  f1010101          ADD      r1,r1,#1              ;281
00008e  b249              SXTB     r1,r1                 ;280
000090  7011              STRB     r1,[r2,#0]            ;280
000092  291e              CMP      r1,#0x1e
000094  db06              BLT      |L6.164|
000096  8839              LDRH     r1,[r7,#0]            ;281  ; main_vent_pos
000098  f1010101          ADD      r1,r1,#1              ;285
00009c  8039              STRH     r1,[r7,#0]            ;285
00009e  7014              STRB     r4,[r2,#0]            ;287
0000a0  e000              B        |L6.164|
                  |L6.162|
0000a2  7014              STRB     r4,[r2,#0]            ;288
                  |L6.164|
0000a4  4945              LDR      r1,|L6.444|
0000a6  f9b11000          LDRSH    r1,[r1,#0]            ;289  ; TBOXVENTMAX
0000aa  4288              CMP      r0,r1                 ;289
0000ac  dd05              BLE      |L6.186|
0000ae  2214              MOVS     r2,#0x14              ;291
0000b0  2100              MOVS     r1,#0                 ;292
0000b2  4841              LDR      r0,|L6.440|
0000b4  f7fffffe          BL       gran
0000b8  e007              B        |L6.202|
                  |L6.186|
0000ba  4841              LDR      r0,|L6.448|
0000bc  2100              MOVS     r1,#0                 ;293
0000be  8800              LDRH     r0,[r0,#0]            ;295  ; pos_vent
0000c0  3009              ADDS     r0,r0,#9              ;296
0000c2  b202              SXTH     r2,r0                 ;296
0000c4  483c              LDR      r0,|L6.440|
0000c6  f7fffffe          BL       gran
                  |L6.202|
0000ca  20f0              MOVS     r0,#0xf0              ;296
0000cc  f7fffffe          BL       mess_find_unvol
0000d0  b128              CBZ      r0,|L6.222|
0000d2  483c              LDR      r0,|L6.452|
0000d4  6801              LDR      r1,[r0,#0]            ;300  ; mess_data
0000d6  29f1              CMP      r1,#0xf1              ;300
0000d8  d101              BNE      |L6.222|
0000da  6840              LDR      r0,[r0,#4]            ;300  ; mess_data
0000dc  8038              STRH     r0,[r7,#0]            ;307
                  |L6.222|
0000de  f9b71000          LDRSH    r1,[r7,#0]            ;307  ; main_vent_pos
0000e2  4839              LDR      r0,|L6.456|
0000e4  2901              CMP      r1,#1                 ;307
0000e6  dc01              BGT      |L6.236|
0000e8  7006              STRB     r6,[r0,#0]            ;307
0000ea  e000              B        |L6.238|
                  |L6.236|
0000ec  7004              STRB     r4,[r0,#0]            ;307
                  |L6.238|
0000ee  4837              LDR      r0,|L6.460|
0000f0  f8df80dc          LDR      r8,|L6.464|
0000f4  f9b00000          LDRSH    r0,[r0,#0]            ;309  ; TBATDISABLE
0000f8  f1a00132          SUB      r1,r0,#0x32           ;310
0000fc  2928              CMP      r1,#0x28              ;310
0000fe  d821              BHI      |L6.324|
000100  f9b51000          LDRSH    r1,[r5,#0]            ;310  ; t_box
000104  4f33              LDR      r7,|L6.468|
000106  4281              CMP      r1,r0                 ;311
000108  dd03              BLE      |L6.274|
00010a  8838              LDRH     r0,[r7,#0]            ;311  ; tbatdisable_cnt
00010c  f1000001          ADD      r0,r0,#1              ;311
000110  8038              STRH     r0,[r7,#0]            ;313
                  |L6.274|
000112  4831              LDR      r0,|L6.472|
000114  f9b00000          LDRSH    r0,[r0,#0]            ;314  ; TBATENABLE
000118  4281              CMP      r1,r0                 ;314
00011a  da03              BGE      |L6.292|
00011c  8838              LDRH     r0,[r7,#0]            ;315  ; tbatdisable_cnt
00011e  f1a00001          SUB      r0,r0,#1              ;315
000122  8038              STRH     r0,[r7,#0]            ;317
                  |L6.292|
000124  2206              MOVS     r2,#6                 ;317
000126  2100              MOVS     r1,#0                 ;318
000128  482a              LDR      r0,|L6.468|
00012a  f7fffffe          BL       gran
00012e  f9b70000          LDRSH    r0,[r7,#0]            ;318  ; tbatdisable_cnt
000132  2805              CMP      r0,#5                 ;319
000134  dd01              BLE      |L6.314|
000136  f8886000          STRB     r6,[r8,#0]            ;321
                  |L6.314|
00013a  2801              CMP      r0,#1                 ;321
00013c  da04              BGE      |L6.328|
00013e  f8884000          STRB     r4,[r8,#0]            ;322
000142  e001              B        |L6.328|
                  |L6.324|
000144  f8884000          STRB     r4,[r8,#0]            ;322
                  |L6.328|
000148  4824              LDR      r0,|L6.476|
00014a  4f25              LDR      r7,|L6.480|
00014c  f9b00000          LDRSH    r0,[r0,#0]            ;325  ; TLOADDISABLE
000150  f1a00132          SUB      r1,r0,#0x32           ;325
000154  291e              CMP      r1,#0x1e              ;326
000156  d820              BHI      |L6.410|
000158  f9b51000          LDRSH    r1,[r5,#0]            ;326  ; t_box
00015c  4d21              LDR      r5,|L6.484|
00015e  4281              CMP      r1,r0                 ;329
000160  dd03              BLE      |L6.362|
000162  8828              LDRH     r0,[r5,#0]            ;329  ; tloaddisable_cnt
000164  f1000001          ADD      r0,r0,#1              ;329
000168  8028              STRH     r0,[r5,#0]            ;330
                  |L6.362|
00016a  481f              LDR      r0,|L6.488|
00016c  f9b00000          LDRSH    r0,[r0,#0]            ;330  ; TLOADENABLE
000170  4281              CMP      r1,r0                 ;332
000172  da03              BGE      |L6.380|
000174  8828              LDRH     r0,[r5,#0]            ;333  ; tloaddisable_cnt
000176  f1a00001          SUB      r0,r0,#1              ;333
00017a  8028              STRH     r0,[r5,#0]            ;333
                  |L6.380|
00017c  2206              MOVS     r2,#6                 ;334
00017e  2100              MOVS     r1,#0                 ;334
000180  4818              LDR      r0,|L6.484|
000182  f7fffffe          BL       gran
000186  f9b50000          LDRSH    r0,[r5,#0]            ;336  ; tloaddisable_cnt
00018a  2805              CMP      r0,#5                 ;337
00018c  dd00              BLE      |L6.400|
00018e  703e              STRB     r6,[r7,#0]            ;337
                  |L6.400|
000190  2801              CMP      r0,#1                 ;337
000192  da00              BGE      |L6.406|
000194  703c              STRB     r4,[r7,#0]
                  |L6.406|
000196  e8bd81f0          POP      {r4-r8,pc}            ;281
                  |L6.410|
00019a  703c              STRB     r4,[r7,#0]            ;281
00019c  e7fb              B        |L6.406|
;;;342    
                          ENDP

00019e  0000              DCW      0x0000
                  |L6.416|
                          DCD      t_box
                  |L6.420|
                          DCD      TBOXMAX
                  |L6.424|
                          DCD      av_tbox_cnt
                  |L6.428|
                          DCD      av_tbox_stat
                  |L6.432|
                          DCD      TBOXREG
                  |L6.436|
                          DCD      t_box_cnt
                  |L6.440|
                          DCD      main_vent_pos
                  |L6.444|
                          DCD      TBOXVENTMAX
                  |L6.448|
                          DCD      pos_vent
                  |L6.452|
                          DCD      mess_data
                  |L6.456|
                          DCD      mixer_vent_stat
                  |L6.460|
                          DCD      TBATDISABLE
                  |L6.464|
                          DCD      tbatdisable_stat
                  |L6.468|
                          DCD      tbatdisable_cnt
                  |L6.472|
                          DCD      TBATENABLE
                  |L6.476|
                          DCD      TLOADDISABLE
                  |L6.480|
                          DCD      tloaddisable_stat
                  |L6.484|
                          DCD      tloaddisable_cnt
                  |L6.488|
                          DCD      TLOADENABLE

                          AREA ||.bss||, DATA, NOINIT, ALIGN=2

                  adc_buff
                          %        1024
                  adc_buff_
                          %        32
                  main_power_buffer
                          %        32

                          AREA ||area_number.9||, DATA, NOINIT, ALIGN=1

                          EXPORTAS ||area_number.9||, ||.bss||
                  adc_buff_max
                          %        24

                          AREA ||area_number.10||, DATA, NOINIT, ALIGN=1

                          EXPORTAS ||area_number.10||, ||.bss||
                  net_buff
                          %        64

                          AREA ||.constdata||, DATA, READONLY, ALIGN=0

                  sk_buff_KONTUR
000000  0d0b0f0e          DCB      0x0d,0x0b,0x0f,0x0e

                          AREA ||area_number.13||, DATA, READONLY, ALIGN=0

                          EXPORTAS ||area_number.13||, ||.constdata||
                  sk_buff_RSTKM
000000  0d0b0f0e          DCB      0x0d,0x0b,0x0f,0x0e

                          AREA ||area_number.14||, DATA, READONLY, ALIGN=0

                          EXPORTAS ||area_number.14||, ||.constdata||
                  sk_buff_GLONASS
000000  0b0d0f0e          DCB      0x0b,0x0d,0x0f,0x0e

                          AREA ||area_number.15||, DATA, READONLY, ALIGN=0

                          EXPORTAS ||area_number.15||, ||.constdata||
                  sk_buff_3U
000000  0b0d0f0e          DCB      0x0b,0x0d,0x0f,0x0e

                          AREA ||area_number.16||, DATA, READONLY, ALIGN=0

                          EXPORTAS ||area_number.16||, ||.constdata||
                  sk_buff_6U
000000  0b0d0f0e          DCB      0x0b,0x0d,0x0f,0x0e

                          AREA ||area_number.17||, DATA, READONLY, ALIGN=0

                          EXPORTAS ||area_number.17||, ||.constdata||
                  sk_buff_220
000000  0b0d0f0e          DCB      0x0b,0x0d,0x0f,0x0e

                          AREA ||area_number.18||, DATA, READONLY, ALIGN=0

                          EXPORTAS ||area_number.18||, ||.constdata||
                  sk_buff_TELECORE2015
000000  0b0d0f0e          DCB      0x0b,0x0d,0x0f,0x0e

                          AREA ||.data||, DATA, ALIGN=1

                  adc_buff_min
000000  13881388          DCW      0x1388,0x1388
000004  13881388          DCW      0x1388,0x1388
000008  13881388          DCW      0x1388,0x1388
00000c  13881388          DCW      0x1388,0x1388
000010  13881388          DCW      0x1388,0x1388
                          DCDU     0x00000000

                          AREA ||area_number.20||, DATA, ALIGN=1

                          EXPORTAS ||area_number.20||, ||.data||
                  unet_buff_min
000000  1388              DCW      0x1388

                          AREA ||area_number.21||, DATA, ALIGN=0

                          EXPORTAS ||area_number.21||, ||.data||
                  adc_stat
000000  01                DCB      0x01

                          AREA ||area_number.22||, DATA, ALIGN=1

                          EXPORTAS ||area_number.22||, ||.data||
                  bat_ver_cnt
000000  0096              DCW      0x0096

                          AREA ||area_number.23||, DATA, ALIGN=2

                          EXPORTAS ||area_number.23||, ||.data||
                  vent_stat
000000  00                DCB      0x00
                  cntrlStatIsDownCnt
000001  00                DCB      0x00
                  adc_self_ch_cnt
000002  00                DCB      0x00
                  adc_ch_net
000003  00                DCB      0x00
                  adc_ch
000004  00                DCB      0x00
                  adc_ch_cnt
000005  00                DCB      0x00
                  adc_window_flag
000006  00                DCB      0x00
                  ch_cnt0
000007  00                DCB      0x00
                  b1Hz_ch
000008  00                DCB      0x00
                  i
000009  00                DCB      0x00
                  iiii
00000a  00                DCB      0x00
                  bAVG
00000b  00                DCB      0x00
                  avg_num
00000c  00                DCB      0x00
                  kb_full_ver
00000d  00                DCB      0x00
                  kb_start_ips
00000e  00                DCB      0x00
                  num_of_wrks_bps
00000f  00                DCB      0x00
                  num_necc_up
000010  00                DCB      0x00
                  num_necc_down
000011  00                DCB      0x00
                  sh_cnt0
000012  00                DCB      0x00
                  b1Hz_sh
000013  00                DCB      0x00
                  spc_stat
000014  00                DCB      0x00
                  spc_bat
000015  00                DCB      0x00
                  spc_phase
000016  00                DCB      0x00
                  bAVZ
000017  00                DCB      0x00
                  ke_start_stat
000018  00                DCB      0x00
                  numOfForvardBps
000019  00                DCB      0x00
                  numOfForvardBps_old
00001a  00                DCB      0x00
                  numOfForvardBps_minCnt
00001b  00                DCB      0x00
                  bPARALLEL_NOT_ENOUG
00001c  00                DCB      0x00
                  bPARALLEL_ENOUG
00001d  00                DCB      0x00
                  bPARALLEL
00001e  00                DCB      0x00
                  cntrl_hndl_plazma
00001f  00                DCB      0x00
                  vz1_stat
000020  00                DCB      0x00
                  vz1_stat_old
000021  00                DCB      0x00
                  volt_region
000022  00                DCB      0x00
                  vz2_stat
000023  00                DCB      0x00
                  vz2_stat_old
000024  0000              DCB      0x00,0x00
                  cntrl_stat
000026  0258              DCW      0x0258
                  cntrl_stat_old
000028  0258              DCW      0x0258
                  avg_main_cnt
00002a  0014              DCW      0x0014
                  num_necc_block_cnt
00002c  0000              DCB      0x00,0x00
                  net_buff_
00002e  0000              DCB      0x00,0x00
                  adc_result
000030  0000              DCB      0x00,0x00
                  adc_gorb_cnt
000032  0000              DCB      0x00,0x00
                  adc_zero_cnt
000034  0000              DCB      0x00,0x00
                  adc_window_cnt
000036  0000              DCB      0x00,0x00
                  adc_net_buff_cnt
000038  0000              DCB      0x00,0x00
                  plazma_sk
00003a  0000              DCB      0x00,0x00
                  cntrl_stat_new
00003c  0000              DCB      0x00,0x00
                  Ibmax
00003e  0000              DCB      0x00,0x00
                  IZMAX_
000040  0000              DCB      0x00,0x00
                  Ubpsmax
000042  0000              DCB      0x00,0x00
                  samokalibr_cnt
000044  0000              DCB      0x00,0x00
                  main_kb_cnt
000046  0000              DCB      0x00,0x00
                  kb_cnt_1lev
000048  0000              DCB      0x00,0x00
                  kb_cnt_2lev
00004a  0000              DCB      0x00,0x00
                  kb_start
00004c  0000              DCB      0x00,0x00
                  ibat_ips
00004e  0000              DCB      0x00,0x00
                  ibat_ips_
000050  0000              DCB      0x00,0x00
                  bps_on_mask
000052  0000              DCB      0x00,0x00
                  bps_off_mask
000054  0000              DCB      0x00,0x00
                  vz_cnt_s
000056  0000              DCB      0x00,0x00
                  vz_cnt_s_
000058  0000              DCB      0x00,0x00
                  vz_cnt_h
00005a  0000              DCB      0x00,0x00
                  vz_cnt_h_
00005c  0000              DCB      0x00,0x00
                  cnt_end_ke
00005e  0000              DCB      0x00,0x00
                  __ee_vz_cnt
000060  0000              DCB      0x00,0x00
                  __ee_spc_stat
000062  0000              DCB      0x00,0x00
                  __ee_spc_bat
000064  0000              DCB      0x00,0x00
                  __ee_spc_phase
000066  0000              DCB      0x00,0x00
                  cntrl_stat_blok_cnt
000068  0000              DCB      0x00,0x00
                  cntrl_stat_blok_cnt_
00006a  0000              DCB      0x00,0x00
                  numOfForvardBps_hourCnt
00006c  0000              DCB      0x00,0x00
                  vz1_stat_cnt
00006e  0000              DCB      0x00,0x00
                  volt_region_cnt
000070  0000              DCB      0x00,0x00
                  vz2_stat_cnt
000072  0000              DCB      0x00,0x00
                  vz2_stat_ph2_cnt
000074  0000              DCB      0x00,0x00
                  plazma_ica1
000076  0000              DCB      0x00,0x00
                  ibat
                          DCD      0x00000000
                  ibat_
                          DCD      0x00000000
                  i_avg_max
                          DCD      0x00000000
                  i_avg_min
                          DCD      0x00000000
                  i_avg_summ
                          DCD      0x00000000
                  i_avg
                          DCD      0x00000000
                  avg
                          DCD      0x00000000
                  cntrl_stat_blok_cnt_plus
                          DCD      0x00000000
                  cntrl_stat_blok_cnt_minus
                          DCD      0x00000000
                  plazma_inv
                          DCD      0x00000000
                  vz1_wrk_cnt
                          DCD      0x00000000
                  vz1_up_cnt
                          DCD      0x00000000
                  vz2_wrk_cnt
                          DCD      0x00000000
                  vz2_up_cnt
                          DCD      0x00000000
                  net_metr_buff_
                          DCD      0x00000000
0000b4  0000              DCB      0x00,0x00
                  adc_self_ch_buff
0000b6  0000              DCB      0x00,0x00
                          DCD      0x00000000
                  adc_self_ch_disp
                          DCD      0x00000000
0000c0  00000000          DCB      0x00,0x00,0x00,0x00
                  ke_date
                          %        8

                          AREA ||area_number.24||, DATA, ALIGN=0

                          EXPORTAS ||area_number.24||, ||.data||
                  rx_read_power_cnt_phase
000000  0f                DCB      0x0f

                          AREA ||area_number.25||, DATA, ALIGN=1

                          EXPORTAS ||area_number.25||, ||.data||
                  read_power_cnt_main_cnt
000000  0064              DCW      0x0064

                          AREA ||area_number.26||, DATA, ALIGN=0

                          EXPORTAS ||area_number.26||, ||.data||
                  rx_read_power_cnt_plazma
000000  00                DCB      0x00

                          AREA ||area_number.27||, DATA, ALIGN=0

                          EXPORTAS ||area_number.27||, ||.data||
                  rx_read_power_cnt_flag
000000  00                DCB      0x00

                          AREA ||area_number.28||, DATA, ALIGN=0

                          EXPORTAS ||area_number.28||, ||.data||
                  bENERGOMETR_UIP
000000  00                DCB      0x00

                          AREA ||area_number.29||, DATA, ALIGN=1

                          EXPORTAS ||area_number.29||, ||.data||
                  unet_buff_max
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.30||, DATA, ALIGN=0

                          EXPORTAS ||area_number.30||, ||.data||
                  adc_cnt
000000  00                DCB      0x00

                          AREA ||area_number.31||, DATA, ALIGN=0

                          EXPORTAS ||area_number.31||, ||.data||
                  adc_cnt1
000000  00                DCB      0x00

                          AREA ||area_number.32||, DATA, ALIGN=1

                          EXPORTAS ||area_number.32||, ||.data||
                  zero_cnt
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.33||, DATA, ALIGN=0

                          EXPORTAS ||area_number.33||, ||.data||
                  net_buff_cnt
000000  00                DCB      0x00

                          AREA ||area_number.34||, DATA, ALIGN=1

                          EXPORTAS ||area_number.34||, ||.data||
                  ADWR
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.35||, DATA, ALIGN=1

                          EXPORTAS ||area_number.35||, ||.data||
                  period_cnt
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.36||, DATA, ALIGN=1

                          EXPORTAS ||area_number.36||, ||.data||
                  non_zero_cnt
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.37||, DATA, ALIGN=0

                          EXPORTAS ||area_number.37||, ||.data||
                  rele_stat
000000  00                DCB      0x00

                          AREA ||area_number.38||, DATA, ALIGN=0

                          EXPORTAS ||area_number.38||, ||.data||
                  bRELE_OUT
000000  00                DCB      0x00

                          AREA ||area_number.39||, DATA, ALIGN=2

                          EXPORTAS ||area_number.39||, ||.data||
                  main_power_buffer_
                          DCD      0x00000000

                          AREA ||area_number.40||, DATA, ALIGN=1

                          EXPORTAS ||area_number.40||, ||.data||
                  main_power_buffer_cnt
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.41||, DATA, ALIGN=1

                          EXPORTAS ||area_number.41||, ||.data||
                  adc_buff_out_
                          DCDU     0x00000000
000004  0000              DCB      0x00,0x00

                          AREA ||area_number.42||, DATA, ALIGN=1

                          EXPORTAS ||area_number.42||, ||.data||
                  plazma_adc_cnt
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.43||, DATA, ALIGN=0

                          EXPORTAS ||area_number.43||, ||.data||
                  unh_cnt0
000000  00                DCB      0x00

                          AREA ||area_number.44||, DATA, ALIGN=0

                          EXPORTAS ||area_number.44||, ||.data||
                  unh_cnt1
000000  00                DCB      0x00

                          AREA ||area_number.45||, DATA, ALIGN=0

                          EXPORTAS ||area_number.45||, ||.data||
                  b1Hz_unh
000000  00                DCB      0x00

                          AREA ||area_number.46||, DATA, ALIGN=0

                          EXPORTAS ||area_number.46||, ||.data||
                  ch_cnt1
000000  00                DCB      0x00

                          AREA ||area_number.47||, DATA, ALIGN=0

                          EXPORTAS ||area_number.47||, ||.data||
                  b1_30Hz_ch
000000  00                DCB      0x00

                          AREA ||area_number.48||, DATA, ALIGN=0

                          EXPORTAS ||area_number.48||, ||.data||
                  ch_cnt2
000000  00                DCB      0x00

                          AREA ||area_number.49||, DATA, ALIGN=0

                          EXPORTAS ||area_number.49||, ||.data||
                  b1_10Hz_ch
000000  00                DCB      0x00

                          AREA ||area_number.50||, DATA, ALIGN=1

                          EXPORTAS ||area_number.50||, ||.data||
                  IZMAX_70
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.51||, DATA, ALIGN=1

                          EXPORTAS ||area_number.51||, ||.data||
                  IZMAX_130
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.52||, DATA, ALIGN=1

                          EXPORTAS ||area_number.52||, ||.data||
                  cntrl_stat_blck_cnt
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.53||, DATA, ALIGN=0

                          EXPORTAS ||area_number.53||, ||.data||
                  avg_cnt
000000  00                DCB      0x00

                          AREA ||area_number.54||, DATA, ALIGN=0

                          EXPORTAS ||area_number.54||, ||.data||
                  bps_all_off_cnt
000000  00                DCB      0x00

                          AREA ||area_number.55||, DATA, ALIGN=0

                          EXPORTAS ||area_number.55||, ||.data||
                  bps_mask_off_cnt
000000  00                DCB      0x00

                          AREA ||area_number.56||, DATA, ALIGN=0

                          EXPORTAS ||area_number.56||, ||.data||
                  bps_mask_on_off_cnt
000000  00                DCB      0x00

                          AREA ||area_number.57||, DATA, ALIGN=0

                          EXPORTAS ||area_number.57||, ||.data||
                  bps_hndl_2sec_cnt
000000  00                DCB      0x00

                          AREA ||area_number.58||, DATA, ALIGN=0

                          EXPORTAS ||area_number.58||, ||.data||
                  plazma_bat
000000  00                DCB      0x00

                          AREA ||area_number.59||, DATA, ALIGN=0

                          EXPORTAS ||area_number.59||, ||.data||
                  plazma_cntrl_stat
000000  00                DCB      0x00

                          AREA ||area_number.60||, DATA, ALIGN=1

                          EXPORTAS ||area_number.60||, ||.data||
                  ce102m_delayCnt
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.61||, DATA, ALIGN=1

                          EXPORTAS ||area_number.61||, ||.data||
                  volta_short
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.62||, DATA, ALIGN=1

                          EXPORTAS ||area_number.62||, ||.data||
                  curr_short
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.63||, DATA, ALIGN=2

                          EXPORTAS ||area_number.63||, ||.data||
                  power_int
                          DCD      0x00000000

                          AREA ||area_number.64||, DATA, ALIGN=1

                          EXPORTAS ||area_number.64||, ||.data||
                  plazma_ica2
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.65||, DATA, ALIGN=0

                          EXPORTAS ||area_number.65||, ||.data||
                  rele_hndl_plazma
000000  000000            DCB      0x00,0x00,0x00
