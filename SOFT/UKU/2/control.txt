; generated by ARM C/C++ Compiler, 4.1 [Build 644]
; commandline ArmCC [--list --debug -c --asm --interleave -o.\EXE\control.o --asm_dir=.\ --list_dir=.\ --depend=.\EXE\control.d --feedback=.\EXE\UKU_220_IPS_TERMOKOMPENSAT.fed --cpu=Cortex-M3 --apcs=interwork -O1 -IC:\Keil\ARM\CMSIS\Include -IC:\Keil\ARM\INC\NXP\LPC17xx -D__MICROLIB -DUKU_220_IPS_TERMOKOMPENSAT -DUKU2071x --omf_browse=.\EXE\control.crf control.c]
                          THUMB

                          AREA ||.text||, CODE, READONLY, ALIGN=2

                  ke_start PROC
;;;218    //-----------------------------------------------
;;;219    void ke_start(char in)
000000  e92d41fc          PUSH     {r2-r8,lr}
;;;220    {          
000004  4604              MOV      r4,r0
;;;221    ke_start_stat=(enum_ke_start_stat)0;		 
000006  4efe              LDR      r6,|L1.1024|
000008  f04f0700          MOV      r7,#0
00000c  75f7              STRB     r7,[r6,#0x17]
;;;222    
;;;223    if(spc_stat==spcVZ)ke_start_stat=kssNOT_VZ;
00000e  7cf0              LDRB     r0,[r6,#0x13]  ; spc_stat
000010  f04f0301          MOV      r3,#1
000014  2802              CMP      r0,#2
000016  d008              BEQ      |L1.42|
;;;224    else if(BAT_IS_ON[in]!=bisON)ke_start_stat=kssNOT_BAT;
000018  49fa              LDR      r1,|L1.1028|
00001a  5d09              LDRB     r1,[r1,r4]
00001c  2955              CMP      r1,#0x55
00001e  d006              BEQ      |L1.46|
000020  f04f0065          MOV      r0,#0x65
000024  75f0              STRB     r0,[r6,#0x17]
                  |L1.38|
;;;225    else if(bat[in]._av&(1<<0))ke_start_stat=kssNOT_BAT_AV;
;;;226    else if(bat[in]._temper_stat&(1<<1))ke_start_stat=kssNOT_BAT_AV_T;
;;;227    else if(bat[in]._av&(1<<1))ke_start_stat=kssNOT_BAT_AV_ASS;
;;;228    else if(bat[in]._Ib>IKB)ke_start_stat=kssNOT_BAT_ZAR;
;;;229    else if(bat[in]._Ib<-IKB)ke_start_stat=kssNOT_BAT_RAZR;
;;;230    else if((spc_stat==spcKE)&&(spc_bat==0))ke_start_stat=kssNOT_KE1;
;;;231    else if((spc_stat==spcKE)&&(spc_bat==1))ke_start_stat=kssNOT_KE2;
;;;232    else 
;;;233    	{
;;;234    
;;;235    	ke_start_stat=kssYES;
;;;236    
;;;237    	spc_stat=spcKE;
;;;238    	__ee_spc_stat=spcKE;
;;;239    	lc640_write_int(EE_SPC_STAT,__ee_spc_stat);
;;;240    	
;;;241    	spc_bat=in;
;;;242    	__ee_spc_bat=in;
;;;243    	lc640_write_int(EE_SPC_BAT,__ee_spc_bat);
;;;244    
;;;245    	bat[in]._zar_cnt_ke=0;
;;;246    	lc640_write_int(ADR_EE_BAT_ZAR_CNT_KE[in],0);
;;;247    	
;;;248    	spc_phase=0;
;;;249    	__ee_spc_phase=0;
;;;250    	lc640_write_int(EE_SPC_PHASE,__ee_spc_phase);
;;;251    
;;;252    	//ke_mem_hndl(in,lc640_read_int(ADR_EE_BAT_ZAR_CNT_KE[spc_bat]));
;;;253    
;;;254    		{					
;;;255    		signed short temp_temp;
;;;256    		signed char temp;
;;;257    		temp_temp=bat[in]._u_old[((bat_u_old_cnt+1)&0x07)]; 
;;;258    		    
;;;259    		temp=LPC_RTC->YEAR;
;;;260    		gran_char(&temp,1,99);
;;;261    		*((char*)(&(ke_date[0])))=temp;
;;;262    			
;;;263    		temp=LPC_RTC->MONTH;
;;;264    		gran_char(&temp,1,12);
;;;265    		*(((char*)(&(ke_date[0])))+1)=temp;
;;;266    		
;;;267    		temp=LPC_RTC->DOM;
;;;268    		gran_char(&temp,1,31);
;;;269    		*(((char*)(&(ke_date[0])))+2)=temp;			
;;;270    				
;;;271    		*(((char*)(&(ke_date[0])))+3)=*((char*)&temp_temp);
;;;272    		lc640_write_long(EE_SPC_KE_DATE0,ke_date[0]);
;;;273    
;;;274    		temp=LPC_RTC->HOUR;
;;;275    		gran_char(&temp,0,23);
;;;276    		*((char*)(&(ke_date[1])))=temp;
;;;277                   
;;;278    		temp=LPC_RTC->MIN;
;;;279    		gran_char(&temp,0,59);
;;;280    		*(((char*)(&(ke_date[1])))+1)=temp;
;;;281    	          
;;;282    		temp=LPC_RTC->SEC;
;;;283    		gran_char(&temp,0,59);
;;;284    		*(((char*)(&(ke_date[1])))+2)=temp;
;;;285    			
;;;286    		*(((char*)(&(ke_date[1])))+3)=*(((char*)&temp_temp)+1);
;;;287    		lc640_write_long(EE_SPC_KE_DATE1,ke_date[1]);
;;;288    		}
;;;289    
;;;290    	}
;;;291    }
000026  e8bd81fc          POP      {r2-r8,pc}
                  |L1.42|
00002a  75f3              STRB     r3,[r6,#0x17]         ;223
00002c  e7fb              B        |L1.38|
                  |L1.46|
00002e  eb040144          ADD      r1,r4,r4,LSL #1       ;225
000032  eb011204          ADD      r2,r1,r4,LSL #4       ;225
000036  49f4              LDR      r1,|L1.1032|
000038  eb010582          ADD      r5,r1,r2,LSL #2       ;225
00003c  f895103d          LDRB     r1,[r5,#0x3d]         ;225
000040  07ca              LSLS     r2,r1,#31             ;225
000042  d003              BEQ      |L1.76|
000044  f04f0066          MOV      r0,#0x66              ;225
000048  75f0              STRB     r0,[r6,#0x17]         ;225
00004a  e7ec              B        |L1.38|
                  |L1.76|
00004c  f895203f          LDRB     r2,[r5,#0x3f]         ;226
000050  0792              LSLS     r2,r2,#30             ;226
000052  d503              BPL      |L1.92|
000054  f04f0067          MOV      r0,#0x67              ;226
000058  75f0              STRB     r0,[r6,#0x17]         ;226
00005a  e7e4              B        |L1.38|
                  |L1.92|
00005c  0789              LSLS     r1,r1,#30             ;227
00005e  d503              BPL      |L1.104|
000060  f04f0068          MOV      r0,#0x68              ;227
000064  75f0              STRB     r0,[r6,#0x17]         ;227
000066  e7de              B        |L1.38|
                  |L1.104|
000068  4ae8              LDR      r2,|L1.1036|
00006a  f9b51008          LDRSH    r1,[r5,#8]            ;228
00006e  f9b22000          LDRSH    r2,[r2,#0]            ;228  ; IKB
000072  4291              CMP      r1,r2                 ;228
000074  dd03              BLE      |L1.126|
000076  f04f0069          MOV      r0,#0x69              ;228
00007a  75f0              STRB     r0,[r6,#0x17]         ;228
00007c  e7d3              B        |L1.38|
                  |L1.126|
00007e  4252              RSBS     r2,r2,#0              ;229
000080  4291              CMP      r1,r2                 ;229
000082  da03              BGE      |L1.140|
000084  f04f006a          MOV      r0,#0x6a              ;229
000088  75f0              STRB     r0,[r6,#0x17]         ;229
00008a  e7cc              B        |L1.38|
                  |L1.140|
00008c  49dc              LDR      r1,|L1.1024|
00008e  2801              CMP      r0,#1                 ;230
000090  7d09              LDRB     r1,[r1,#0x14]         ;230
000092  d100              BNE      |L1.150|
000094  b111              CBZ      r1,|L1.156|
                  |L1.150|
000096  2801              CMP      r0,#1                 ;231
000098  d004              BEQ      |L1.164|
00009a  e005              B        |L1.168|
                  |L1.156|
00009c  f04f006b          MOV      r0,#0x6b              ;230
0000a0  75f0              STRB     r0,[r6,#0x17]         ;230
0000a2  e7c0              B        |L1.38|
                  |L1.164|
0000a4  2901              CMP      r1,#1                 ;231
0000a6  d07e              BEQ      |L1.422|
                  |L1.168|
0000a8  f04f0064          MOV      r0,#0x64              ;235
0000ac  75f0              STRB     r0,[r6,#0x17]         ;235
0000ae  74f3              STRB     r3,[r6,#0x13]         ;237
0000b0  f8a63056          STRH     r3,[r6,#0x56]         ;238
0000b4  4619              MOV      r1,r3                 ;239
0000b6  f44f70f8          MOV      r0,#0x1f0             ;239
0000ba  f7fffffe          BL       lc640_write_int
0000be  7534              STRB     r4,[r6,#0x14]         ;241
0000c0  f8a64058          STRH     r4,[r6,#0x58]         ;242
0000c4  4621              MOV      r1,r4                 ;243
0000c6  f44f70fa          MOV      r0,#0x1f4             ;243
0000ca  f7fffffe          BL       lc640_write_int
0000ce  61af              STR      r7,[r5,#0x18]         ;245
0000d0  48cf              LDR      r0,|L1.1040|
0000d2  2100              MOVS     r1,#0                 ;246
0000d4  f9300014          LDRSH    r0,[r0,r4,LSL #1]     ;246
0000d8  f7fffffe          BL       lc640_write_int
0000dc  7577              STRB     r7,[r6,#0x15]         ;248
0000de  f8a6705a          STRH     r7,[r6,#0x5a]         ;249
0000e2  4639              MOV      r1,r7                 ;250
0000e4  f44f70fb          MOV      r0,#0x1f6             ;250
0000e8  f7fffffe          BL       lc640_write_int
0000ec  48c9              LDR      r0,|L1.1044|
0000ee  8800              LDRH     r0,[r0,#0]            ;257  ; bat_u_old_cnt
0000f0  f1000001          ADD      r0,r0,#1              ;257
0000f4  f0000007          AND      r0,r0,#7              ;257
0000f8  eb050040          ADD      r0,r5,r0,LSL #1       ;257
0000fc  8c00              LDRH     r0,[r0,#0x20]         ;257
0000fe  9001              STR      r0,[sp,#4]            ;257
000100  4dc5              LDR      r5,|L1.1048|
000102  8ba8              LDRH     r0,[r5,#0x1c]         ;259
000104  9000              STR      r0,[sp,#0]            ;259
000106  f04f0263          MOV      r2,#0x63              ;260
00010a  f04f0101          MOV      r1,#1                 ;260
00010e  4668              MOV      r0,sp                 ;260
000110  f7fffffe          BL       gran_char
000114  4cba              LDR      r4,|L1.1024|
000116  f89d0000          LDRB     r0,[sp,#0]            ;261
00011a  34a0              ADDS     r4,r4,#0xa0           ;261
00011c  7020              STRB     r0,[r4,#0]            ;261
00011e  7e28              LDRB     r0,[r5,#0x18]         ;263
000120  9000              STR      r0,[sp,#0]            ;263
000122  220c              MOVS     r2,#0xc               ;264
000124  2101              MOVS     r1,#1                 ;264
000126  4668              MOV      r0,sp                 ;264
000128  f7fffffe          BL       gran_char
00012c  f89d0000          LDRB     r0,[sp,#0]            ;265
000130  7060              STRB     r0,[r4,#1]            ;265
000132  7b28              LDRB     r0,[r5,#0xc]          ;267
000134  9000              STR      r0,[sp,#0]            ;267
000136  221f              MOVS     r2,#0x1f              ;268
000138  2101              MOVS     r1,#1                 ;268
00013a  4668              MOV      r0,sp                 ;268
00013c  f7fffffe          BL       gran_char
000140  f89d0000          LDRB     r0,[sp,#0]            ;269
000144  70a0              STRB     r0,[r4,#2]            ;269
000146  f89d0004          LDRB     r0,[sp,#4]            ;271
00014a  70e0              STRB     r0,[r4,#3]            ;271
00014c  f44f70fc          MOV      r0,#0x1f8             ;272
000150  6821              LDR      r1,[r4,#0]            ;272  ; ke_date
000152  f7fffffe          BL       lc640_write_long
000156  7a28              LDRB     r0,[r5,#8]            ;274
000158  9000              STR      r0,[sp,#0]            ;274
00015a  2217              MOVS     r2,#0x17              ;275
00015c  2100              MOVS     r1,#0                 ;275
00015e  4668              MOV      r0,sp                 ;275
000160  f7fffffe          BL       gran_char
000164  f89d0000          LDRB     r0,[sp,#0]            ;276
000168  7120              STRB     r0,[r4,#4]            ;276
00016a  7928              LDRB     r0,[r5,#4]            ;278
00016c  9000              STR      r0,[sp,#0]            ;278
00016e  223b              MOVS     r2,#0x3b              ;279
000170  2100              MOVS     r1,#0                 ;279
000172  4668              MOV      r0,sp                 ;279
000174  f7fffffe          BL       gran_char
000178  f89d0000          LDRB     r0,[sp,#0]            ;280
00017c  7160              STRB     r0,[r4,#5]            ;280
00017e  7828              LDRB     r0,[r5,#0]            ;282
000180  9000              STR      r0,[sp,#0]            ;282
000182  223b              MOVS     r2,#0x3b              ;283
000184  2100              MOVS     r1,#0                 ;283
000186  4668              MOV      r0,sp                 ;283
000188  f7fffffe          BL       gran_char
00018c  f89d0000          LDRB     r0,[sp,#0]            ;284
000190  71a0              STRB     r0,[r4,#6]            ;284
000192  f89d0005          LDRB     r0,[sp,#5]            ;286
000196  71e0              STRB     r0,[r4,#7]            ;286
000198  f44f70fe          MOV      r0,#0x1fc             ;287
00019c  6861              LDR      r1,[r4,#4]            ;287  ; ke_date
00019e  f7fffffe          BL       lc640_write_long
0001a2  e740              B        |L1.38|
0001a4  e7ff              B        |L1.422|
                  |L1.422|
0001a6  f04f006c          MOV      r0,#0x6c              ;231
0001aa  75f0              STRB     r0,[r6,#0x17]         ;231
0001ac  e73b              B        |L1.38|
;;;292    
                          ENDP

                  ke_drv PROC
;;;293    //-----------------------------------------------
;;;294    void ke_drv(void)
0001ae  e92d47f0          PUSH     {r4-r10,lr}
;;;295    {
;;;296    
;;;297    if(spc_stat==spcKE)
0001b2  4c93              LDR      r4,|L1.1024|
0001b4  7ce0              LDRB     r0,[r4,#0x13]  ; spc_stat
0001b6  2801              CMP      r0,#1
0001b8  d17d              BNE      |L1.694|
0001ba  4621              MOV      r1,r4
0001bc  2601              MOVS     r6,#1
;;;298    	{
;;;299    	if(spc_phase==0)
;;;300    		{
;;;301    		mess_send(MESS2BAT_HNDL,PARAM_BAT_MASK_OFF_AFTER_2SEC,(1<<(1-spc_bat)),20);
0001be  7d09              LDRB     r1,[r1,#0x14]
0001c0  7d60              LDRB     r0,[r4,#0x15]         ;299  ; spc_phase
0001c2  f1c10201          RSB      r2,r1,#1
0001c6  fa06f102          LSL      r1,r6,r2
;;;302    		mess_send(MESS2BPS_HNDL,PARAM_BPS_ALL_OFF_AFTER_2SEC,0xffff,20);
;;;303    
;;;304    		bat[spc_bat]._zar_cnt_ke+=abs(bat[spc_bat]._Ib);
;;;305    	    	
;;;306    		if(bat[spc_bat]._zar_cnt_ke>=AH_CONSTANT)
;;;307    			{
;;;308    			bat[spc_bat]._zar_cnt_ke-=AH_CONSTANT;
;;;309    			lc640_write_int(ADR_EE_BAT_ZAR_CNT_KE[spc_bat],lc640_read_int(ADR_EE_BAT_ZAR_CNT_KE[spc_bat])+1);
0001ca  4f91              LDR      r7,|L1.1040|
0001cc  4d8e              LDR      r5,|L1.1032|
0001ce  b20a              SXTH     r2,r1                 ;301
0001d0  b110              CBZ      r0,|L1.472|
;;;310    			}
;;;311    		}
;;;312    
;;;313    	else if(spc_phase==1)
0001d2  2801              CMP      r0,#1
0001d4  d034              BEQ      |L1.576|
0001d6  e038              B        |L1.586|
                  |L1.472|
0001d8  2314              MOVS     r3,#0x14              ;301
0001da  21ca              MOVS     r1,#0xca              ;301
0001dc  20c8              MOVS     r0,#0xc8              ;301
0001de  f7fffffe          BL       mess_send
0001e2  2314              MOVS     r3,#0x14              ;302
0001e4  f04f32ff          MOV      r2,#0xffffffff        ;302
0001e8  21ce              MOVS     r1,#0xce              ;302
0001ea  20cd              MOVS     r0,#0xcd              ;302
0001ec  f7fffffe          BL       mess_send
0001f0  7d20              LDRB     r0,[r4,#0x14]         ;304  ; spc_bat
0001f2  eb000140          ADD      r1,r0,r0,LSL #1       ;304
0001f6  eb011000          ADD      r0,r1,r0,LSL #4       ;304
0001fa  eb050080          ADD      r0,r5,r0,LSL #2       ;304
0001fe  f9b00008          LDRSH    r0,[r0,#8]            ;304
000202  f7fffffe          BL       abs
000206  7d21              LDRB     r1,[r4,#0x14]         ;304  ; spc_bat
000208  eb010241          ADD      r2,r1,r1,LSL #1       ;304
00020c  eb021201          ADD      r2,r2,r1,LSL #4       ;304
000210  eb050282          ADD      r2,r5,r2,LSL #2       ;304
000214  6993              LDR      r3,[r2,#0x18]         ;304
000216  4418              ADD      r0,r0,r3              ;304
000218  6190              STR      r0,[r2,#0x18]         ;304
00021a  f64843a0          MOV      r3,#0x8ca0            ;306
00021e  4298              CMP      r0,r3                 ;306
000220  db13              BLT      |L1.586|
000222  eba00003          SUB      r0,r0,r3              ;308
000226  6190              STR      r0,[r2,#0x18]         ;308
000228  f8370011          LDRH     r0,[r7,r1,LSL #1]     ;309
00022c  f7fffffe          BL       lc640_read_int
000230  1c40              ADDS     r0,r0,#1              ;309
000232  b201              SXTH     r1,r0                 ;309
000234  7d20              LDRB     r0,[r4,#0x14]         ;309  ; spc_bat
000236  f9370010          LDRSH    r0,[r7,r0,LSL #1]     ;309
00023a  f7fffffe          BL       lc640_write_int
00023e  e004              B        |L1.586|
                  |L1.576|
;;;314    		{
;;;315    		mess_send(MESS2BAT_HNDL,PARAM_BAT_MASK_OFF_AFTER_2SEC,(1<<(1-spc_bat)),20);
000240  2314              MOVS     r3,#0x14
000242  21ca              MOVS     r1,#0xca
000244  20c8              MOVS     r0,#0xc8
000246  f7fffffe          BL       mess_send
                  |L1.586|
;;;316    		}
;;;317    
;;;318    	if(bat[spc_bat]._Ub<(USIGN*10))
00024a  7d21              LDRB     r1,[r4,#0x14]  ; spc_bat
;;;319    		{
;;;320    		cnt_end_ke++;
;;;321    		if(cnt_end_ke>=30)
;;;322    			{
;;;323    			
;;;324    			if((spc_stat==spcKE)&&(spc_phase==0))
;;;325    				{
;;;326    				lc640_write_int(ADR_EE_BAT_C_REAL[spc_bat],lc640_read_int(ADR_EE_BAT_ZAR_CNT_KE[spc_bat]));
;;;327    				ke_mem_hndl(spc_bat,lc640_read_int(ADR_EE_BAT_ZAR_CNT_KE[spc_bat]));
;;;328    				lc640_write_int(ADR_EE_BAT_ZAR_CNT[spc_bat],0);
;;;329    				cntrl_stat=50;
;;;330    				cntrl_stat_old=50;
;;;331    				}
;;;332    
;;;333    			if((BAT_IS_ON[1-spc_bat]) == bisON)
;;;334    				{
;;;335    				spc_phase=1;
;;;336    				__ee_spc_phase=1;
;;;337    				lc640_write_int(EE_SPC_PHASE,1);
;;;338    				}			
;;;339    			else
;;;340    				{
;;;341    				spc_stat=spcOFF;
;;;342    				__ee_spc_stat=spcOFF;
;;;343    				lc640_write_int(EE_SPC_STAT,spcOFF);
00024c  f44f79f8          MOV      r9,#0x1f0
000250  eb010041          ADD      r0,r1,r1,LSL #1       ;318
000254  eb001001          ADD      r0,r0,r1,LSL #4       ;318
000258  eb050080          ADD      r0,r5,r0,LSL #2       ;318
00025c  f04f0800          MOV      r8,#0                 ;299
000260  f9b02002          LDRSH    r2,[r0,#2]            ;318
000264  486d              LDR      r0,|L1.1052|
000266  f9b00000          LDRSH    r0,[r0,#0]            ;318  ; USIGN
00026a  eb000080          ADD      r0,r0,r0,LSL #2       ;318
00026e  ebb20f40          CMP      r2,r0,LSL #1          ;318
000272  da47              BGE      |L1.772|
000274  f8b40052          LDRH     r0,[r4,#0x52]         ;320  ; cnt_end_ke
000278  f1000001          ADD      r0,r0,#1              ;320
00027c  b200              SXTH     r0,r0                 ;320
00027e  f8a40052          STRH     r0,[r4,#0x52]         ;320
000282  281e              CMP      r0,#0x1e              ;321
000284  db40              BLT      |L1.776|
000286  7ce0              LDRB     r0,[r4,#0x13]         ;324  ; spc_stat
000288  2801              CMP      r0,#1                 ;324
00028a  d122              BNE      |L1.722|
00028c  7d60              LDRB     r0,[r4,#0x15]         ;324  ; spc_phase
00028e  bb00              CBNZ     r0,|L1.722|
000290  f8370011          LDRH     r0,[r7,r1,LSL #1]     ;326
000294  f7fffffe          BL       lc640_read_int
000298  b201              SXTH     r1,r0                 ;326
00029a  4861              LDR      r0,|L1.1056|
00029c  7d22              LDRB     r2,[r4,#0x14]         ;326  ; spc_bat
00029e  f9300012          LDRSH    r0,[r0,r2,LSL #1]     ;326
0002a2  f7fffffe          BL       lc640_write_int
0002a6  7d20              LDRB     r0,[r4,#0x14]         ;327  ; spc_bat
0002a8  f8370010          LDRH     r0,[r7,r0,LSL #1]     ;327
0002ac  f7fffffe          BL       lc640_read_int
0002b0  b281              UXTH     r1,r0                 ;327
0002b2  7d20              LDRB     r0,[r4,#0x14]         ;327  ; spc_bat
0002b4  e000              B        |L1.696|
                  |L1.694|
0002b6  e049              B        |L1.844|
                  |L1.696|
0002b8  f7fffffe          BL       ke_mem_hndl
0002bc  4859              LDR      r0,|L1.1060|
0002be  7d21              LDRB     r1,[r4,#0x14]         ;328  ; spc_bat
0002c0  f9300011          LDRSH    r0,[r0,r1,LSL #1]     ;328
0002c4  2100              MOVS     r1,#0                 ;328
0002c6  f7fffffe          BL       lc640_write_int
0002ca  f04f0032          MOV      r0,#0x32              ;329
0002ce  8360              STRH     r0,[r4,#0x1a]         ;329
0002d0  83a0              STRH     r0,[r4,#0x1c]         ;330
                  |L1.722|
0002d2  7d20              LDRB     r0,[r4,#0x14]         ;333  ; spc_bat
0002d4  494b              LDR      r1,|L1.1028|
0002d6  f1c00001          RSB      r0,r0,#1              ;333
0002da  5c08              LDRB     r0,[r1,r0]            ;333
0002dc  2855              CMP      r0,#0x55              ;333
0002de  d008              BEQ      |L1.754|
0002e0  f8848013          STRB     r8,[r4,#0x13]         ;341
0002e4  f8a48056          STRH     r8,[r4,#0x56]         ;342
0002e8  2100              MOVS     r1,#0
0002ea  4648              MOV      r0,r9
0002ec  f7fffffe          BL       lc640_write_int
0002f0  e00a              B        |L1.776|
                  |L1.754|
0002f2  7566              STRB     r6,[r4,#0x15]         ;335
0002f4  f8a4605a          STRH     r6,[r4,#0x5a]         ;336
0002f8  2101              MOVS     r1,#1                 ;337
0002fa  f44f70fb          MOV      r0,#0x1f6             ;337
0002fe  f7fffffe          BL       lc640_write_int
000302  e001              B        |L1.776|
                  |L1.772|
;;;344    				}
;;;345    			}
;;;346    		}
;;;347    	else cnt_end_ke=0;
000304  f8a48052          STRH     r8,[r4,#0x52]
                  |L1.776|
;;;348    
;;;349    	if((bat[spc_bat]._Ub>=bat[1-spc_bat]._Ub)&&(spc_phase==1))
000308  7d21              LDRB     r1,[r4,#0x14]  ; spc_bat
00030a  eb010041          ADD      r0,r1,r1,LSL #1
00030e  eb001001          ADD      r0,r0,r1,LSL #4
000312  eb050080          ADD      r0,r5,r0,LSL #2
000316  f9b02002          LDRSH    r2,[r0,#2]
00031a  f1c10001          RSB      r0,r1,#1
00031e  eb000140          ADD      r1,r0,r0,LSL #1
000322  eb011000          ADD      r0,r1,r0,LSL #4
000326  eb050080          ADD      r0,r5,r0,LSL #2
00032a  f9b00002          LDRSH    r0,[r0,#2]
00032e  4282              CMP      r2,r0
000330  db0c              BLT      |L1.844|
000332  7d60              LDRB     r0,[r4,#0x15]  ; spc_phase
000334  2801              CMP      r0,#1
000336  d109              BNE      |L1.844|
;;;350    		{
;;;351    		spc_stat=spcOFF;
000338  f8848013          STRB     r8,[r4,#0x13]
;;;352    		__ee_spc_stat=spcOFF;
00033c  f8a48056          STRH     r8,[r4,#0x56]
;;;353    		lc640_write_int(EE_SPC_STAT,spcOFF);
000340  4648              MOV      r0,r9
000342  e8bd47f0          POP      {r4-r10,lr}
000346  2100              MOVS     r1,#0
000348  f7ffbffe          B.W      lc640_write_int
                  |L1.844|
;;;354    		}
;;;355    	}
;;;356    			
;;;357    }
00034c  e8bd87f0          POP      {r4-r10,pc}
;;;358    
                          ENDP

                  vz_start PROC
;;;359    //-----------------------------------------------
;;;360    char vz_start(char hour)
000350  b570              PUSH     {r4-r6,lr}
;;;361    {          
000352  4605              MOV      r5,r0
;;;362    char out;
;;;363    out=0;
000354  f04f0600          MOV      r6,#0
;;;364    if(spc_stat==spcOFF)
000358  4c29              LDR      r4,|L1.1024|
00035a  7ce0              LDRB     r0,[r4,#0x13]  ; spc_stat
00035c  bb18              CBNZ     r0,|L1.934|
;;;365    	{
;;;366    	spc_stat=spcVZ;
00035e  f1040418          ADD      r4,r4,#0x18
000362  f04f0102          MOV      r1,#2
000366  f8041c05          STRB     r1,[r4,#-5]
;;;367    	__ee_spc_stat=spcVZ; 
00036a  87e1              STRH     r1,[r4,#0x3e]
;;;368    	lc640_write_int(EE_SPC_STAT,__ee_spc_stat);   
00036c  f44f70f8          MOV      r0,#0x1f0
000370  f7fffffe          BL       lc640_write_int
;;;369    	vz_cnt_h=hour;
000374  86e5              STRH     r5,[r4,#0x36]
;;;370    	__ee_vz_cnt=hour*60;
000376  ebc51005          RSB      r0,r5,r5,LSL #4
00037a  ea4f0180          LSL      r1,r0,#2
00037e  460d              MOV      r5,r1
000380  87a1              STRH     r1,[r4,#0x3c]
;;;371    	lc640_write_int(EE_VZ_CNT,__ee_vz_cnt);
000382  f44f70f9          MOV      r0,#0x1f2
000386  f7fffffe          BL       lc640_write_int
;;;372    	lc640_write_int(EE_SPC_VZ_LENGT,hour*60);	
00038a  4629              MOV      r1,r5
00038c  f44f70ff          MOV      r0,#0x1fe
000390  f7fffffe          BL       lc640_write_int
;;;373    	vz_cnt_h_=0;
000394  4630              MOV      r0,r6
000396  8720              STRH     r0,[r4,#0x38]
;;;374    	vz_cnt_s=0;
000398  8660              STRH     r0,[r4,#0x32]
;;;375    	out=1;
00039a  f04f0601          MOV      r6,#1
;;;376    	vz_mem_hndl(1);
00039e  f04f0001          MOV      r0,#1
0003a2  f7fffffe          BL       vz_mem_hndl
                  |L1.934|
;;;377    	}
;;;378    //else if((spc_stat==spc_KE1p1)||(spc_stat==spc_KE1p2)) out=22; 
;;;379    //else if((spc_stat==spc_KE2p1)||(spc_stat==spc_KE2p2)) out=33;
;;;380    //plazma=out;	
;;;381    return out;
0003a6  4630              MOV      r0,r6
;;;382    }
0003a8  bd70              POP      {r4-r6,pc}
;;;383    
                          ENDP

                  vz_stop PROC
;;;384    //-----------------------------------------------
;;;385    void vz_stop(void)
0003aa  b510              PUSH     {r4,lr}
;;;386    {
;;;387    if(spc_stat==spcVZ)
0003ac  4c14              LDR      r4,|L1.1024|
0003ae  7ce0              LDRB     r0,[r4,#0x13]  ; spc_stat
0003b0  2802              CMP      r0,#2
0003b2  d113              BNE      |L1.988|
;;;388         {
;;;389    vz_mem_hndl(vz_cnt_h);          
0003b4  f1040412          ADD      r4,r4,#0x12
0003b8  8fa0              LDRH     r0,[r4,#0x3c]  ; vz_cnt_h
0003ba  f7fffffe          BL       vz_mem_hndl
;;;390    vz_cnt_s=0;
0003be  f04f0000          MOV      r0,#0
0003c2  8720              STRH     r0,[r4,#0x38]
;;;391    vz_cnt_h=0;
0003c4  87a0              STRH     r0,[r4,#0x3c]
;;;392    vz_cnt_h_=0;
0003c6  87e0              STRH     r0,[r4,#0x3e]
;;;393    spc_stat=spcOFF;
0003c8  7060              STRB     r0,[r4,#1]
;;;394    
;;;395    		__ee_spc_stat=spcOFF;
0003ca  f8a40044          STRH     r0,[r4,#0x44]
;;;396    		lc640_write_int(EE_SPC_STAT,spcOFF);
0003ce  4601              MOV      r1,r0
0003d0  e8bd4010          POP      {r4,lr}
0003d4  f44f70f8          MOV      r0,#0x1f0
0003d8  f7ffbffe          B.W      lc640_write_int
                  |L1.988|
;;;397         }
;;;398    
;;;399    }
0003dc  bd10              POP      {r4,pc}
;;;400    
                          ENDP

                  avz_next_date_hndl PROC
;;;401    //-----------------------------------------------
;;;402    void avz_next_date_hndl(void)
0003de  b570              PUSH     {r4-r6,lr}
;;;403    {
;;;404    if((LPC_RTC->MONTH+AVZ)>12)lc640_write_int(EE_YEAR_AVZ,LPC_RTC->YEAR+1);
0003e0  4c0d              LDR      r4,|L1.1048|
0003e2  3c20              SUBS     r4,r4,#0x20
0003e4  f8940038          LDRB     r0,[r4,#0x38]
0003e8  4d0f              LDR      r5,|L1.1064|
0003ea  7829              LDRB     r1,[r5,#0]  ; AVZ
0003ec  4408              ADD      r0,r0,r1
0003ee  280c              CMP      r0,#0xc
0003f0  d91c              BLS      |L1.1068|
0003f2  8fa0              LDRH     r0,[r4,#0x3c]
0003f4  1c40              ADDS     r0,r0,#1
0003f6  b201              SXTH     r1,r0
0003f8  20b8              MOVS     r0,#0xb8
0003fa  f7fffffe          BL       lc640_write_int
0003fe  e01a              B        |L1.1078|
                  |L1.1024|
                          DCD      ||area_number.21||
                  |L1.1028|
                          DCD      BAT_IS_ON
                  |L1.1032|
                          DCD      bat
                  |L1.1036|
                          DCD      IKB
                  |L1.1040|
                          DCD      ADR_EE_BAT_ZAR_CNT_KE
                  |L1.1044|
                          DCD      bat_u_old_cnt
                  |L1.1048|
                          DCD      0x40024020
                  |L1.1052|
                          DCD      USIGN
                  |L1.1056|
                          DCD      ADR_EE_BAT_C_REAL
                  |L1.1060|
                          DCD      ADR_EE_BAT_ZAR_CNT
                  |L1.1064|
                          DCD      AVZ
                  |L1.1068|
;;;405    else lc640_write_int(EE_YEAR_AVZ,LPC_RTC->YEAR);
00042c  f9b4103c          LDRSH    r1,[r4,#0x3c]
000430  20b8              MOVS     r0,#0xb8
000432  f7fffffe          BL       lc640_write_int
                  |L1.1078|
;;;406    
;;;407    //lc640_write_int(EE_YEAR_AVZ,6);
;;;408    
;;;409    if((LPC_RTC->MONTH+AVZ)>12)lc640_write_int(EE_MONTH_AVZ,(LPC_RTC->MONTH+AVZ)-12);
000436  f8941038          LDRB     r1,[r4,#0x38]
00043a  7828              LDRB     r0,[r5,#0]  ; AVZ
00043c  4401              ADD      r1,r1,r0
00043e  290c              CMP      r1,#0xc
000440  d907              BLS      |L1.1106|
000442  f8941038          LDRB     r1,[r4,#0x38]
000446  380c              SUBS     r0,r0,#0xc
000448  4401              ADD      r1,r1,r0
00044a  20b6              MOVS     r0,#0xb6
00044c  f7fffffe          BL       lc640_write_int
000450  e005              B        |L1.1118|
                  |L1.1106|
;;;410    else lc640_write_int(EE_MONTH_AVZ,LPC_RTC->MONTH+AVZ);                                                 
000452  f8941038          LDRB     r1,[r4,#0x38]
000456  4401              ADD      r1,r1,r0
000458  20b6              MOVS     r0,#0xb6
00045a  f7fffffe          BL       lc640_write_int
                  |L1.1118|
;;;411    
;;;412    //lc640_write_int(EE_MONTH_AVZ,5);
;;;413    
;;;414    if(LPC_RTC->DOM>28) lc640_write_int(EE_DATE_AVZ,28);
00045e  f894002c          LDRB     r0,[r4,#0x2c]
000462  281c              CMP      r0,#0x1c
000464  d904              BLS      |L1.1136|
000466  211c              MOVS     r1,#0x1c
000468  20b4              MOVS     r0,#0xb4
00046a  f7fffffe          BL       lc640_write_int
00046e  e004              B        |L1.1146|
                  |L1.1136|
;;;415    else lc640_write_int(EE_DATE_AVZ,LPC_RTC->DOM);
000470  f894102c          LDRB     r1,[r4,#0x2c]
000474  20b4              MOVS     r0,#0xb4
000476  f7fffffe          BL       lc640_write_int
                  |L1.1146|
;;;416    
;;;417    //lc640_write_int(EE_DATE_AVZ,4);
;;;418    
;;;419    lc640_write_int(EE_HOUR_AVZ,LPC_RTC->HOUR);
00047a  f1040420          ADD      r4,r4,#0x20
00047e  7a21              LDRB     r1,[r4,#8]
000480  f04f00ae          MOV      r0,#0xae
000484  f7fffffe          BL       lc640_write_int
;;;420    lc640_write_int(EE_MIN_AVZ,LPC_RTC->MIN);
000488  7921              LDRB     r1,[r4,#4]
00048a  20b0              MOVS     r0,#0xb0
00048c  f7fffffe          BL       lc640_write_int
;;;421    lc640_write_int(EE_SEC_AVZ,LPC_RTC->SEC);
000490  7821              LDRB     r1,[r4,#0]
000492  e8bd4070          POP      {r4-r6,lr}
000496  20b2              MOVS     r0,#0xb2
000498  f7ffbffe          B.W      lc640_write_int
;;;422    
;;;423    }
;;;424    
                          ENDP

                  avz_drv PROC
;;;425    //-----------------------------------------------
;;;426    void avz_drv(void)                               
00049c  b510              PUSH     {r4,lr}
;;;427    {                
;;;428    if(AVZ!=AVZ_OFF)
00049e  48ff              LDR      r0,|L1.2204|
;;;429    	{
;;;430    	if((LPC_RTC->YEAR==YEAR_AVZ)&&(LPC_RTC->MONTH==MONTH_AVZ)&&(LPC_RTC->DOM==DATE_AVZ)&&(LPC_RTC->HOUR==HOUR_AVZ)&&(LPC_RTC->MIN==MIN_AVZ)&&(LPC_RTC->SEC==SEC_AVZ))
;;;431    		{
;;;432    		bAVZ=1;
0004a0  4cff              LDR      r4,|L1.2208|
0004a2  7800              LDRB     r0,[r0,#0]            ;428  ; AVZ
0004a4  b330              CBZ      r0,|L1.1268|
0004a6  48ff              LDR      r0,|L1.2212|
0004a8  8f82              LDRH     r2,[r0,#0x3c]         ;430
0004aa  49ff              LDR      r1,|L1.2216|
0004ac  8809              LDRH     r1,[r1,#0]            ;430  ; YEAR_AVZ
0004ae  428a              CMP      r2,r1                 ;430
0004b0  d120              BNE      |L1.1268|
0004b2  f8902038          LDRB     r2,[r0,#0x38]         ;430
0004b6  49fd              LDR      r1,|L1.2220|
0004b8  8809              LDRH     r1,[r1,#0]            ;430  ; MONTH_AVZ
0004ba  428a              CMP      r2,r1                 ;430
0004bc  d11a              BNE      |L1.1268|
0004be  f890102c          LDRB     r1,[r0,#0x2c]         ;430
0004c2  4afb              LDR      r2,|L1.2224|
0004c4  8812              LDRH     r2,[r2,#0]            ;430  ; DATE_AVZ
0004c6  4291              CMP      r1,r2                 ;430
0004c8  d114              BNE      |L1.1268|
0004ca  f8901028          LDRB     r1,[r0,#0x28]         ;430
0004ce  4af9              LDR      r2,|L1.2228|
0004d0  8812              LDRH     r2,[r2,#0]            ;430  ; HOUR_AVZ
0004d2  4291              CMP      r1,r2                 ;430
0004d4  d10e              BNE      |L1.1268|
0004d6  f8901024          LDRB     r1,[r0,#0x24]         ;430
0004da  4af7              LDR      r2,|L1.2232|
0004dc  8812              LDRH     r2,[r2,#0]            ;430  ; MIN_AVZ
0004de  4291              CMP      r1,r2                 ;430
0004e0  d108              BNE      |L1.1268|
0004e2  f8900020          LDRB     r0,[r0,#0x20]         ;430
0004e6  49f5              LDR      r1,|L1.2236|
0004e8  8809              LDRH     r1,[r1,#0]            ;430  ; SEC_AVZ
0004ea  4288              CMP      r0,r1                 ;430
0004ec  d102              BNE      |L1.1268|
0004ee  f04f0001          MOV      r0,#1
0004f2  75a0              STRB     r0,[r4,#0x16]
                  |L1.1268|
;;;433    		}
;;;434    	}
;;;435    if(bAVZ)
0004f4  7da0              LDRB     r0,[r4,#0x16]  ; bAVZ
0004f6  2800              CMP      r0,#0
0004f8  d00c              BEQ      |L1.1300|
;;;436    	{
;;;437    	if(vz_start(AVZ_TIME))
0004fa  48f1              LDR      r0,|L1.2240|
0004fc  8800              LDRH     r0,[r0,#0]  ; AVZ_TIME
0004fe  b2c0              UXTB     r0,r0
000500  f7fffffe          BL       vz_start
000504  2800              CMP      r0,#0
000506  d005              BEQ      |L1.1300|
;;;438    		{
;;;439    		bAVZ=0;
000508  f04f0000          MOV      r0,#0
00050c  75a0              STRB     r0,[r4,#0x16]
;;;440    		avz_next_date_hndl();
00050e  e8bd4010          POP      {r4,lr}
000512  e7fe              B        avz_next_date_hndl
                  |L1.1300|
;;;441    		}
;;;442    	}	
;;;443    
;;;444    }
000514  bd10              POP      {r4,pc}
;;;445    
                          ENDP

                  vz_drv PROC
;;;446    //-----------------------------------------------
;;;447    void vz_drv(void)
000516  b570              PUSH     {r4-r6,lr}
;;;448    { 
;;;449    if(spc_stat==spcVZ)
000518  4ce1              LDR      r4,|L1.2208|
00051a  7ce0              LDRB     r0,[r4,#0x13]  ; spc_stat
00051c  2802              CMP      r0,#2
00051e  d144              BNE      |L1.1450|
;;;450    	{
;;;451    	if(vz_cnt_s_<3600)
000520  f8b4004c          LDRH     r0,[r4,#0x4c]  ; vz_cnt_s_
000524  f44f6161          MOV      r1,#0xe10
;;;452    		{
;;;453    		vz_cnt_s_++;
;;;454    		if(vz_cnt_s_>=3600)
;;;455    			{
;;;456    			vz_cnt_s_=0;
000528  2500              MOVS     r5,#0
00052a  4288              CMP      r0,r1                 ;451
00052c  d215              BCS      |L1.1370|
00052e  f1000001          ADD      r0,r0,#1              ;453
000532  b280              UXTH     r0,r0                 ;453
000534  f8a4004c          STRH     r0,[r4,#0x4c]         ;453
000538  4288              CMP      r0,r1                 ;454
00053a  d30e              BCC      |L1.1370|
00053c  f8a4504c          STRH     r5,[r4,#0x4c]
;;;457    			if(vz_cnt_h)
000540  f8b4004e          LDRH     r0,[r4,#0x4e]  ; vz_cnt_h
000544  b148              CBZ      r0,|L1.1370|
;;;458    				{
;;;459    				vz_cnt_h--;
000546  f1a00001          SUB      r0,r0,#1
00054a  f8240f4e          STRH     r0,[r4,#0x4e]!
;;;460    				vz_cnt_h_++;
00054e  8860              LDRH     r0,[r4,#2]  ; vz_cnt_h_
000550  f1000001          ADD      r0,r0,#1
000554  8060              STRH     r0,[r4,#2]
000556  f1a4044e          SUB      r4,r4,#0x4e
                  |L1.1370|
;;;461    				}
;;;462    			}
;;;463    		}
;;;464    
;;;465    
;;;466    	if(vz_cnt_s<60)
00055a  f8b4004a          LDRH     r0,[r4,#0x4a]  ; vz_cnt_s
00055e  283c              CMP      r0,#0x3c
000560  d223              BCS      |L1.1450|
;;;467    		{
;;;468    		vz_cnt_s++;
000562  f1000001          ADD      r0,r0,#1
000566  b280              UXTH     r0,r0
000568  f8a4004a          STRH     r0,[r4,#0x4a]
;;;469    		if(vz_cnt_s>=60)
00056c  283c              CMP      r0,#0x3c
00056e  d31c              BCC      |L1.1450|
;;;470    			{
;;;471    			vz_cnt_s=0;
000570  f8245f4a          STRH     r5,[r4,#0x4a]!
;;;472    			
;;;473    			__ee_vz_cnt--;
000574  8960              LDRH     r0,[r4,#0xa]  ; __ee_vz_cnt
000576  f1a00001          SUB      r0,r0,#1
00057a  b201              SXTH     r1,r0
00057c  8161              STRH     r1,[r4,#0xa]
;;;474    			lc640_write_int(EE_VZ_CNT,__ee_vz_cnt);
00057e  f44f70f9          MOV      r0,#0x1f2
000582  f7fffffe          BL       lc640_write_int
;;;475    			if(!__ee_vz_cnt)
000586  8960              LDRH     r0,[r4,#0xa]  ; __ee_vz_cnt
000588  f1a4044a          SUB      r4,r4,#0x4a
00058c  2800              CMP      r0,#0
00058e  d10c              BNE      |L1.1450|
;;;476    				{
;;;477    				spc_stat=spcOFF;
000590  74e5              STRB     r5,[r4,#0x13]
;;;478    						__ee_spc_stat=spcOFF;
000592  f8a45056          STRH     r5,[r4,#0x56]
;;;479    		lc640_write_int(EE_SPC_STAT,spcOFF);
000596  4601              MOV      r1,r0
000598  f44f70f8          MOV      r0,#0x1f0
00059c  f7fffffe          BL       lc640_write_int
;;;480    				vz_mem_hndl(0);
0005a0  e8bd4070          POP      {r4-r6,lr}
0005a4  2000              MOVS     r0,#0
0005a6  f7ffbffe          B.W      vz_mem_hndl
                  |L1.1450|
;;;481    				}
;;;482    			}
;;;483    		}
;;;484    
;;;485    	}
;;;486    
;;;487    
;;;488    } 
0005aa  bd70              POP      {r4-r6,pc}
;;;489    
                          ENDP

                  kb_init PROC
;;;493    //-----------------------------------------------
;;;494    void kb_init(void)
0005ac  48c5              LDR      r0,|L1.2244|
;;;495    {
;;;496    main_kb_cnt=(TBAT*60)-60/*120*/;
0005ae  f06f013b          MVN      r1,#0x3b
0005b2  8800              LDRH     r0,[r0,#0]  ; TBAT
0005b4  ebc01000          RSB      r0,r0,r0,LSL #4
0005b8  eb010080          ADD      r0,r1,r0,LSL #2
0005bc  49b8              LDR      r1,|L1.2208|
0005be  87c8              STRH     r0,[r1,#0x3e]
;;;497    }
0005c0  4770              BX       lr
;;;498    
                          ENDP

                  kb_hndl PROC
;;;499    //-----------------------------------------------
;;;500    void kb_hndl(void)
0005c2  e92d5ff0          PUSH     {r4-r12,lr}
;;;501    {
;;;502    
;;;503    static signed short ibat[2],ibat_[2],ibat_ips,ibat_ips_;
;;;504    #ifdef UKU_TELECORE2015
;;;505    if(((++main_kb_cnt>=TBAT*60)&&(TBAT))&&(BAT_TYPE==0))
;;;506    #else 
;;;507    if(((++main_kb_cnt>=TBAT*60)&&(TBAT)))
0005c6  f8df82d8          LDR      r8,|L1.2208|
;;;508    #endif
;;;509    	{
;;;510    	main_kb_cnt=0;
;;;511    	
;;;512    	kb_start[0]=0;
;;;513    	kb_start[1]=0;
;;;514    	kb_start_ips=0;
;;;515    
;;;516    	if( (BAT_IS_ON[0]==bisON) && (bat[0]._Ub>80) && ( (abs(bat[0]._Ib)<IKB) || (bat[0]._av&1) ) ) kb_start[0]=1;
;;;517    	if( (BAT_IS_ON[1]==bisON) && (bat[1]._Ub>80) && ( (abs(bat[1]._Ib)<IKB) || (bat[1]._av&1) ) ) kb_start[1]=1;
;;;518    #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;519    	if( (!ips_bat_av_vzvod)                      && ((abs(Ib_ips_termokompensat)<IKB) || (bat_ips._av&1) ) ) kb_start_ips=1;
0005ca  f8dfa2fc          LDR      r10,|L1.2248|
0005ce  2500              MOVS     r5,#0                 ;507
0005d0  f8b8003e          LDRH     r0,[r8,#0x3e]         ;507  ; main_kb_cnt
0005d4  4ebd              LDR      r6,|L1.2252|
0005d6  1c40              ADDS     r0,r0,#1              ;507
0005d8  b201              SXTH     r1,r0                 ;507
0005da  48ba              LDR      r0,|L1.2244|
0005dc  f8a8103e          STRH     r1,[r8,#0x3e]         ;507
0005e0  f8df92ec          LDR      r9,|L1.2256|
0005e4  f9b00000          LDRSH    r0,[r0,#0]            ;507  ; TBAT
;;;520    #endif	
;;;521    	if( (net_av) || (num_of_wrks_bps==0) || ( (spc_stat!=spcOFF) && (spc_stat!=spcVZ) ) ) 
;;;522    		{
;;;523    		kb_start[0]=0;
;;;524    		kb_start[1]=0;
;;;525    		kb_start_ips=0;
;;;526    		}
;;;527    
;;;528    	if((kb_start[0]==1)||(kb_start[1]==1)||(kb_start_ips==1))
;;;529    		{
;;;530    		kb_cnt_1lev=10;
0005e8  270a              MOVS     r7,#0xa
0005ea  ebc01200          RSB      r2,r0,r0,LSL #4       ;507
0005ee  f04f0b01          MOV      r11,#1                ;516
0005f2  f1080444          ADD      r4,r8,#0x44           ;512
0005f6  ebb10f82          CMP      r1,r2,LSL #2          ;507
0005fa  db61              BLT      |L1.1728|
0005fc  b3f0              CBZ      r0,|L1.1660|
0005fe  f8a8503e          STRH     r5,[r8,#0x3e]         ;510
000602  7025              STRB     r5,[r4,#0]            ;512
000604  7065              STRB     r5,[r4,#1]            ;513
000606  f888500d          STRB     r5,[r8,#0xd]          ;514
00060a  48b2              LDR      r0,|L1.2260|
00060c  7800              LDRB     r0,[r0,#0]            ;516  ; BAT_IS_ON
00060e  2855              CMP      r0,#0x55              ;516
000610  d111              BNE      |L1.1590|
000612  f9b60002          LDRSH    r0,[r6,#2]            ;516  ; bat
000616  2850              CMP      r0,#0x50              ;516
000618  dd0d              BLE      |L1.1590|
00061a  f9b60008          LDRSH    r0,[r6,#8]            ;516  ; bat
00061e  f7fffffe          BL       abs
000622  f9b91000          LDRSH    r1,[r9,#0]            ;516  ; IKB
000626  4288              CMP      r0,r1                 ;516
000628  db03              BLT      |L1.1586|
00062a  f896003d          LDRB     r0,[r6,#0x3d]         ;516  ; bat
00062e  07c0              LSLS     r0,r0,#31             ;516
000630  d001              BEQ      |L1.1590|
                  |L1.1586|
000632  f884b000          STRB     r11,[r4,#0]           ;516
                  |L1.1590|
000636  48a7              LDR      r0,|L1.2260|
000638  7840              LDRB     r0,[r0,#1]            ;517  ; BAT_IS_ON
00063a  2855              CMP      r0,#0x55              ;517
00063c  d111              BNE      |L1.1634|
00063e  f9b6004e          LDRSH    r0,[r6,#0x4e]         ;517  ; bat
000642  2850              CMP      r0,#0x50              ;517
000644  dd0d              BLE      |L1.1634|
000646  f9b60054          LDRSH    r0,[r6,#0x54]         ;517  ; bat
00064a  f7fffffe          BL       abs
00064e  f9b91000          LDRSH    r1,[r9,#0]            ;517  ; IKB
000652  4288              CMP      r0,r1                 ;517
000654  db03              BLT      |L1.1630|
000656  f8960089          LDRB     r0,[r6,#0x89]         ;517  ; bat
00065a  07c0              LSLS     r0,r0,#31             ;517
00065c  d001              BEQ      |L1.1634|
                  |L1.1630|
00065e  f884b001          STRB     r11,[r4,#1]           ;517
                  |L1.1634|
000662  489d              LDR      r0,|L1.2264|
000664  7800              LDRB     r0,[r0,#0]            ;519  ; ips_bat_av_vzvod
000666  b980              CBNZ     r0,|L1.1674|
000668  f9ba0000          LDRSH    r0,[r10,#0]           ;519  ; Ib_ips_termokompensat
00066c  f7fffffe          BL       abs
000670  f9b91000          LDRSH    r1,[r9,#0]            ;519  ; IKB
000674  4288              CMP      r0,r1                 ;519
000676  db06              BLT      |L1.1670|
000678  4898              LDR      r0,|L1.2268|
00067a  e000              B        |L1.1662|
                  |L1.1660|
00067c  e020              B        |L1.1728|
                  |L1.1662|
00067e  f890003d          LDRB     r0,[r0,#0x3d]         ;519  ; bat_ips
000682  07c0              LSLS     r0,r0,#31             ;519
000684  d001              BEQ      |L1.1674|
                  |L1.1670|
000686  f888b00d          STRB     r11,[r8,#0xd]         ;519
                  |L1.1674|
00068a  4895              LDR      r0,|L1.2272|
00068c  7800              LDRB     r0,[r0,#0]            ;521  ; net_av
00068e  b938              CBNZ     r0,|L1.1696|
000690  f898000e          LDRB     r0,[r8,#0xe]          ;521  ; num_of_wrks_bps
000694  b120              CBZ      r0,|L1.1696|
000696  f8980013          LDRB     r0,[r8,#0x13]         ;521  ; spc_stat
00069a  b128              CBZ      r0,|L1.1704|
00069c  2802              CMP      r0,#2                 ;521
00069e  d003              BEQ      |L1.1704|
                  |L1.1696|
0006a0  7025              STRB     r5,[r4,#0]            ;523
0006a2  7065              STRB     r5,[r4,#1]            ;524
0006a4  f888500d          STRB     r5,[r8,#0xd]          ;525
                  |L1.1704|
0006a8  7820              LDRB     r0,[r4,#0]            ;528  ; kb_start
0006aa  2801              CMP      r0,#1                 ;528
0006ac  d020              BEQ      |L1.1776|
0006ae  7860              LDRB     r0,[r4,#1]            ;528  ; kb_start
0006b0  2801              CMP      r0,#1                 ;528
0006b2  d01d              BEQ      |L1.1776|
0006b4  f898000d          LDRB     r0,[r8,#0xd]          ;528  ; kb_start_ips
0006b8  2801              CMP      r0,#1                 ;528
0006ba  d019              BEQ      |L1.1776|
;;;531    		}
;;;532    	else kb_cnt_1lev=0;
0006bc  f8a85040          STRH     r5,[r8,#0x40]
                  |L1.1728|
;;;533    	}
;;;534    
;;;535    if(kb_cnt_1lev)
0006c0  4641              MOV      r1,r8
0006c2  f9b80040          LDRSH    r0,[r8,#0x40]  ; kb_cnt_1lev
;;;536    	{
;;;537    	kb_cnt_1lev--;
;;;538    
;;;539    	if(kb_cnt_1lev>5)mess_send(MESS2CNTRL_HNDL,PARAM_CNTRL_STAT_PLUS,30,15);
;;;540    	else if(kb_cnt_1lev>0) mess_send(MESS2CNTRL_HNDL,PARAM_CNTRL_STAT_MINUS,30,15);
;;;541    
;;;542    
;;;543    	if(kb_cnt_1lev==5)
;;;544    		{
;;;545    		ibat[0]=abs(bat[0]._Ib);
0006c6  f8df81d8          LDR      r8,|L1.2208|
0006ca  2800              CMP      r0,#0                 ;535
0006cc  f1080862          ADD      r8,r8,#0x62
0006d0  d07e              BEQ      |L1.2000|
0006d2  f1a00001          SUB      r0,r0,#1              ;537
0006d6  b200              SXTH     r0,r0                 ;537
0006d8  468b              MOV      r11,r1                ;537
0006da  f8a10040          STRH     r0,[r1,#0x40]         ;537
0006de  2805              CMP      r0,#5                 ;539
0006e0  dd09              BLE      |L1.1782|
0006e2  230f              MOVS     r3,#0xf               ;539
0006e4  221e              MOVS     r2,#0x1e              ;539
0006e6  2164              MOVS     r1,#0x64              ;539
0006e8  20e1              MOVS     r0,#0xe1              ;539
0006ea  f7fffffe          BL       mess_send
0006ee  e00a              B        |L1.1798|
                  |L1.1776|
0006f0  f8a87040          STRH     r7,[r8,#0x40]         ;530
0006f4  e7e4              B        |L1.1728|
                  |L1.1782|
0006f6  2800              CMP      r0,#0                 ;540
0006f8  dd05              BLE      |L1.1798|
0006fa  230f              MOVS     r3,#0xf               ;540
0006fc  221e              MOVS     r2,#0x1e              ;540
0006fe  2169              MOVS     r1,#0x69              ;540
000700  20e1              MOVS     r0,#0xe1              ;540
000702  f7fffffe          BL       mess_send
                  |L1.1798|
000706  f8bb0040          LDRH     r0,[r11,#0x40]        ;543  ; kb_cnt_1lev
00070a  2805              CMP      r0,#5                 ;543
00070c  d111              BNE      |L1.1842|
00070e  f9b60008          LDRSH    r0,[r6,#8]  ; bat
000712  f7fffffe          BL       abs
000716  f8a80000          STRH     r0,[r8,#0]
;;;546    		ibat[1]=abs(bat[1]._Ib);
00071a  f9b60054          LDRSH    r0,[r6,#0x54]  ; bat
00071e  f7fffffe          BL       abs
000722  f8a80002          STRH     r0,[r8,#2]
;;;547    		ibat_ips=abs(Ib_ips_termokompensat);
000726  f9ba0000          LDRSH    r0,[r10,#0]  ; Ib_ips_termokompensat
00072a  f7fffffe          BL       abs
00072e  f8ab0020          STRH     r0,[r11,#0x20]
                  |L1.1842|
;;;548    		}
;;;549    	
;;;550    	if(kb_cnt_1lev==0)
000732  485b              LDR      r0,|L1.2208|
000734  f8b00040          LDRH     r0,[r0,#0x40]  ; kb_cnt_1lev
000738  2800              CMP      r0,#0
00073a  d154              BNE      |L1.2022|
;;;551    		{
;;;552    		ibat_[0]=abs(bat[0]._Ib);
00073c  f9b60008          LDRSH    r0,[r6,#8]  ; bat
000740  f7fffffe          BL       abs
000744  f8dfb158          LDR      r11,|L1.2208|
000748  f10b0b66          ADD      r11,r11,#0x66
00074c  f8ab0000          STRH     r0,[r11,#0]
;;;553    		ibat_[1]=abs(bat[1]._Ib);
000750  f9b60054          LDRSH    r0,[r6,#0x54]  ; bat
000754  f7fffffe          BL       abs
000758  f8ab0002          STRH     r0,[r11,#2]
;;;554    		ibat_ips_=abs(Ib_ips_termokompensat);
00075c  f9ba0000          LDRSH    r0,[r10,#0]  ; Ib_ips_termokompensat
000760  f7fffffe          BL       abs
000764  f8dfa138          LDR      r10,|L1.2208|
000768  f8aa0022          STRH     r0,[r10,#0x22]
;;;555    
;;;556    		kb_cnt_2lev=0;
00076c  f8aa5042          STRH     r5,[r10,#0x42]
;;;557    
;;;558    
;;;559    		if(( (ibat[0]+ibat_[0]) < IKB )&& (kb_start[0]==1))
000770  f9b80000          LDRSH    r0,[r8,#0]  ; ibat
000774  f9bb1000          LDRSH    r1,[r11,#0]  ; ibat_
000778  4408              ADD      r0,r0,r1
00077a  f9b91000          LDRSH    r1,[r9,#0]  ; IKB
00077e  4288              CMP      r0,r1
000780  da02              BGE      |L1.1928|
000782  7820              LDRB     r0,[r4,#0]  ; kb_start
000784  2801              CMP      r0,#1
000786  d030              BEQ      |L1.2026|
                  |L1.1928|
;;;560    			{
;;;561    			kb_cnt_2lev=10;  
;;;562    			}
;;;563    		else if(bat[0]._Ub>200)
000788  f9b60002          LDRSH    r0,[r6,#2]  ; bat
00078c  28c8              CMP      r0,#0xc8
00078e  dd04              BLE      |L1.1946|
;;;564    			{
;;;565    			kb_start[0]=0;
000790  7025              STRB     r5,[r4,#0]
;;;566    			avar_bat_hndl(0,0);
000792  2100              MOVS     r1,#0
000794  4608              MOV      r0,r1
000796  f7fffffe          BL       avar_bat_hndl
                  |L1.1946|
;;;567    			}
;;;568    		
;;;569    		if(( (ibat[1]+ibat_[1]) < IKB ) && (kb_start[1]==1))
00079a  f9b80002          LDRSH    r0,[r8,#2]  ; ibat
00079e  f9bb1002          LDRSH    r1,[r11,#2]  ; ibat_
0007a2  4408              ADD      r0,r0,r1
0007a4  f9b91000          LDRSH    r1,[r9,#0]  ; IKB
0007a8  4288              CMP      r0,r1
0007aa  da02              BGE      |L1.1970|
0007ac  7860              LDRB     r0,[r4,#1]  ; kb_start
0007ae  2801              CMP      r0,#1
0007b0  d01e              BEQ      |L1.2032|
                  |L1.1970|
;;;570    			{
;;;571    			kb_cnt_2lev=10;     
;;;572    			}
;;;573    		else  if(bat[1]._Ub>200)
0007b2  f9b6004e          LDRSH    r0,[r6,#0x4e]  ; bat
0007b6  28c8              CMP      r0,#0xc8
0007b8  dd04              BLE      |L1.1988|
;;;574    			{
;;;575    			kb_start[1]=0;
0007ba  7065              STRB     r5,[r4,#1]
;;;576    			avar_bat_hndl(1,0);
0007bc  2100              MOVS     r1,#0
0007be  2001              MOVS     r0,#1
0007c0  f7fffffe          BL       avar_bat_hndl
                  |L1.1988|
;;;577    			}
;;;578    #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;579    		if(( (ibat_ips+ibat_ips_) < IKB ) && (kb_start_ips==1))
0007c4  f9ba0020          LDRSH    r0,[r10,#0x20]  ; ibat_ips
0007c8  f9ba1022          LDRSH    r1,[r10,#0x22]  ; ibat_ips_
0007cc  4408              ADD      r0,r0,r1
0007ce  e000              B        |L1.2002|
                  |L1.2000|
0007d0  e011              B        |L1.2038|
                  |L1.2002|
0007d2  f9b91000          LDRSH    r1,[r9,#0]  ; IKB
0007d6  4288              CMP      r0,r1
0007d8  da05              BGE      |L1.2022|
0007da  f89a000d          LDRB     r0,[r10,#0xd]  ; kb_start_ips
0007de  2801              CMP      r0,#1
0007e0  d101              BNE      |L1.2022|
;;;580    			{
;;;581    			kb_cnt_2lev=10;     
0007e2  f8aa7042          STRH     r7,[r10,#0x42]
                  |L1.2022|
;;;582    			}
;;;583    /*		else  if(bat[1]._Ub>200)
;;;584    			{
;;;585    			kb_start[1]=0;
;;;586    			avar_bat_hndl(1,0);
;;;587    			} */
;;;588    #endif
;;;589    		}	
;;;590    
;;;591    
;;;592    	}
;;;593    else if(kb_cnt_2lev)
;;;594    	{
;;;595    	kb_cnt_2lev--;
;;;596    
;;;597    	if(kb_cnt_2lev>5)mess_send(MESS2CNTRL_HNDL,PARAM_CNTRL_STAT_PLUS,200,15);
;;;598    	else if(kb_cnt_2lev>0) mess_send(MESS2CNTRL_HNDL,PARAM_CNTRL_STAT_MINUS,200,15);
;;;599    
;;;600    
;;;601    	if(kb_cnt_2lev==5)
;;;602    		{
;;;603    		ibat[0]=abs(bat[0]._Ib);
;;;604    		ibat[1]=abs(bat[1]._Ib);
;;;605    		ibat_ips=abs(Ib_ips_termokompensat);
;;;606    		}
;;;607    	
;;;608    	if(kb_cnt_2lev==0)
;;;609    		{
;;;610    		ibat_[0]=abs(bat[0]._Ib);
;;;611    		ibat_[1]=abs(bat[1]._Ib);
;;;612    		ibat_ips_=abs(Ib_ips_termokompensat);
;;;613    
;;;614    		kb_full_ver=0;
;;;615    
;;;616    		if(( (ibat[0]+ibat_[0]) < IKB ) && (kb_start[0]==1))
;;;617    			{
;;;618    			kb_full_ver=1;  
;;;619    			}
;;;620    		else if(bat[0]._Ub>200)			
;;;621    			{
;;;622    			kb_start[0]=0;
;;;623    			avar_bat_hndl(0,0);
;;;624    			}
;;;625    
;;;626    		if(( (ibat[1]+ibat_[1]) < IKB ) && (kb_start[1]==1))
;;;627    			{
;;;628    			kb_full_ver=1;     
;;;629    			}
;;;630    		else	if(bat[1]._Ub>200)		
;;;631    			{
;;;632    			kb_start[1]=0;
;;;633    			avar_bat_hndl(1,0);
;;;634    			}
;;;635    #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;636    		if(( (ibat_ips+ibat_ips_) < IKB )  && (kb_start_ips==1))
;;;637    			{
;;;638    			kb_full_ver=1;     
;;;639    			}
;;;640    #endif
;;;641    		}	
;;;642    	}
;;;643    
;;;644    else if(kb_full_ver)
;;;645    	{
;;;646    	
;;;647    	mess_send(MESS2CNTRL_HNDL,PARAM_CNTRL_STAT_STEP_DOWN,0,15);
;;;648    
;;;649    	if( abs(bat[0]._Ib) > IKB ) 
;;;650    		{
;;;651    		if(kb_start[0]==1)
;;;652    			{
;;;653    			kb_start[0]=0;
;;;654    			avar_bat_hndl(0,0);
;;;655    			}
;;;656    		}
;;;657    
;;;658    	if( abs(bat[1]._Ib) > IKB ) 
;;;659    		{
;;;660    		if(kb_start[1]==1)
;;;661    			{
;;;662    			kb_start[1]=0;
;;;663    			avar_bat_hndl(1,0);
;;;664    			}
;;;665    		}
;;;666    #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;667    	if( abs(Ib_ips_termokompensat) > IKB ) 
;;;668    		{
;;;669    		if(kb_start_ips==1)
;;;670    			{
;;;671    			kb_start_ips=0;
;;;672    			avar_bat_ips_hndl(0);
;;;673    			}
;;;674    		}
;;;675    #endif
;;;676    
;;;677    	if ((kb_start[0]==0) && (kb_start[1]==0) && (kb_start_ips==0)) 
;;;678    		{
;;;679    		kb_full_ver=0;
;;;680    		}
;;;681    
;;;682    	if(( (mess_find(MESS2KB_HNDL))	&& (mess_data[0]==PARAM_CNTRL_IS_DOWN) ) || (load_U<(USIGN*10)) )
;;;683    		{
;;;684    		kb_full_ver=0;
;;;685    		if((kb_start[0]==1)&&((load_I>(2*IKB)/10))&&(!(bat[0]._av&0x01))) avar_bat_hndl(0,1);
;;;686    		if((kb_start[1]==1)&&((load_I>(2*IKB)/10))&&(!(bat[1]._av&0x01))) avar_bat_hndl(1,1);
;;;687    #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;688    		if((kb_start_ips==1)&&((load_I>(2*IKB)/10))&&(!(bat_ips._av&0x01))) avar_bat_ips_hndl(1);
;;;689    #endif
;;;690    		}
;;;691    	}
;;;692    
;;;693    }
0007e6  e8bd9ff0          POP      {r4-r12,pc}
                  |L1.2026|
0007ea  f8aa7042          STRH     r7,[r10,#0x42]        ;561
0007ee  e7d4              B        |L1.1946|
                  |L1.2032|
0007f0  f8aa7042          STRH     r7,[r10,#0x42]        ;571
0007f4  e7e6              B        |L1.1988|
                  |L1.2038|
0007f6  f9b10042          LDRSH    r0,[r1,#0x42]         ;593  ; kb_cnt_2lev
0007fa  b3e8              CBZ      r0,|L1.2168|
0007fc  f1a00001          SUB      r0,r0,#1              ;595
000800  b200              SXTH     r0,r0                 ;595
000802  460f              MOV      r7,r1                 ;595
000804  f8a10042          STRH     r0,[r1,#0x42]         ;595
000808  2805              CMP      r0,#5                 ;597
00080a  dd06              BLE      |L1.2074|
00080c  230f              MOVS     r3,#0xf               ;597
00080e  22c8              MOVS     r2,#0xc8              ;597
000810  2164              MOVS     r1,#0x64              ;597
000812  20e1              MOVS     r0,#0xe1              ;597
000814  f7fffffe          BL       mess_send
000818  e007              B        |L1.2090|
                  |L1.2074|
00081a  2800              CMP      r0,#0                 ;598
00081c  dd05              BLE      |L1.2090|
00081e  230f              MOVS     r3,#0xf               ;598
000820  22c8              MOVS     r2,#0xc8              ;598
000822  2169              MOVS     r1,#0x69              ;598
000824  20e1              MOVS     r0,#0xe1              ;598
000826  f7fffffe          BL       mess_send
                  |L1.2090|
00082a  f8b70042          LDRH     r0,[r7,#0x42]         ;601  ; kb_cnt_2lev
00082e  2805              CMP      r0,#5                 ;601
000830  d110              BNE      |L1.2132|
000832  f9b60008          LDRSH    r0,[r6,#8]            ;603  ; bat
000836  f7fffffe          BL       abs
00083a  f8a80000          STRH     r0,[r8,#0]            ;603
00083e  f9b60054          LDRSH    r0,[r6,#0x54]         ;604  ; bat
000842  f7fffffe          BL       abs
000846  f8a80002          STRH     r0,[r8,#2]            ;604
00084a  f9ba0000          LDRSH    r0,[r10,#0]           ;605  ; Ib_ips_termokompensat
00084e  f7fffffe          BL       abs
000852  8438              STRH     r0,[r7,#0x20]         ;605
                  |L1.2132|
000854  4812              LDR      r0,|L1.2208|
000856  f8b00042          LDRH     r0,[r0,#0x42]         ;608  ; kb_cnt_2lev
00085a  2800              CMP      r0,#0                 ;608
                  |L1.2140|
00085c  d1c3              BNE      |L1.2022|
00085e  f9b60008          LDRSH    r0,[r6,#8]            ;610  ; bat
000862  f7fffffe          BL       abs
000866  4f0e              LDR      r7,|L1.2208|
000868  3766              ADDS     r7,r7,#0x66           ;610
00086a  8038              STRH     r0,[r7,#0]            ;610
00086c  f9b60054          LDRSH    r0,[r6,#0x54]         ;611  ; bat
000870  f7fffffe          BL       abs
000874  8078              STRH     r0,[r7,#2]            ;611
000876  e000              B        |L1.2170|
                  |L1.2168|
000878  e070              B        |L1.2396|
                  |L1.2170|
00087a  f9ba0000          LDRSH    r0,[r10,#0]           ;612  ; Ib_ips_termokompensat
00087e  f7fffffe          BL       abs
000882  f8dfa01c          LDR      r10,|L1.2208|
000886  f8aa0022          STRH     r0,[r10,#0x22]        ;612
00088a  f88a500c          STRB     r5,[r10,#0xc]         ;614
00088e  f9b80000          LDRSH    r0,[r8,#0]            ;616  ; ibat
000892  f9b71000          LDRSH    r1,[r7,#0]            ;616  ; ibat_
000896  4408              ADD      r0,r0,r1              ;616
000898  e024              B        |L1.2276|
00089a  0000              DCW      0x0000
                  |L1.2204|
                          DCD      AVZ
                  |L1.2208|
                          DCD      ||area_number.21||
                  |L1.2212|
                          DCD      0x40024000
                  |L1.2216|
                          DCD      YEAR_AVZ
                  |L1.2220|
                          DCD      MONTH_AVZ
                  |L1.2224|
                          DCD      DATE_AVZ
                  |L1.2228|
                          DCD      HOUR_AVZ
                  |L1.2232|
                          DCD      MIN_AVZ
                  |L1.2236|
                          DCD      SEC_AVZ
                  |L1.2240|
                          DCD      AVZ_TIME
                  |L1.2244|
                          DCD      TBAT
                  |L1.2248|
                          DCD      Ib_ips_termokompensat
                  |L1.2252|
                          DCD      bat
                  |L1.2256|
                          DCD      IKB
                  |L1.2260|
                          DCD      BAT_IS_ON
                  |L1.2264|
                          DCD      ips_bat_av_vzvod
                  |L1.2268|
                          DCD      bat_ips
                  |L1.2272|
                          DCD      net_av
                  |L1.2276|
0008e4  f9b91000          LDRSH    r1,[r9,#0]            ;616  ; IKB
0008e8  4288              CMP      r0,r1                 ;616
0008ea  da02              BGE      |L1.2290|
0008ec  7820              LDRB     r0,[r4,#0]            ;616  ; kb_start
0008ee  2801              CMP      r0,#1                 ;616
0008f0  d02e              BEQ      |L1.2384|
                  |L1.2290|
0008f2  f9b60002          LDRSH    r0,[r6,#2]            ;620  ; bat
0008f6  28c8              CMP      r0,#0xc8              ;620
0008f8  dd04              BLE      |L1.2308|
0008fa  7025              STRB     r5,[r4,#0]            ;622
0008fc  2100              MOVS     r1,#0                 ;623
0008fe  4608              MOV      r0,r1                 ;623
000900  f7fffffe          BL       avar_bat_hndl
                  |L1.2308|
000904  f9b80002          LDRSH    r0,[r8,#2]            ;626  ; ibat
000908  f9b71002          LDRSH    r1,[r7,#2]            ;626  ; ibat_
00090c  4408              ADD      r0,r0,r1              ;626
00090e  f9b91000          LDRSH    r1,[r9,#0]            ;626  ; IKB
000912  4288              CMP      r0,r1                 ;626
000914  da02              BGE      |L1.2332|
000916  7860              LDRB     r0,[r4,#1]            ;626  ; kb_start
000918  2801              CMP      r0,#1                 ;626
00091a  d01c              BEQ      |L1.2390|
                  |L1.2332|
00091c  f9b6004e          LDRSH    r0,[r6,#0x4e]         ;630  ; bat
000920  28c8              CMP      r0,#0xc8              ;630
000922  dd04              BLE      |L1.2350|
000924  7065              STRB     r5,[r4,#1]            ;632
000926  2100              MOVS     r1,#0                 ;633
000928  2001              MOVS     r0,#1                 ;633
00092a  f7fffffe          BL       avar_bat_hndl
                  |L1.2350|
00092e  f9ba0020          LDRSH    r0,[r10,#0x20]        ;636  ; ibat_ips
000932  f9ba1022          LDRSH    r1,[r10,#0x22]        ;636  ; ibat_ips_
000936  4408              ADD      r0,r0,r1              ;636
000938  f9b91000          LDRSH    r1,[r9,#0]            ;636  ; IKB
00093c  4288              CMP      r0,r1                 ;636
00093e  f6bfaf52          BGE      |L1.2022|
000942  f89a000d          LDRB     r0,[r10,#0xd]         ;636  ; kb_start_ips
000946  2801              CMP      r0,#1                 ;636
000948  d188              BNE      |L1.2140|
00094a  f88ab00c          STRB     r11,[r10,#0xc]        ;638
                  |L1.2382|
00094e  e74a              B        |L1.2022|
                  |L1.2384|
000950  f88ab00c          STRB     r11,[r10,#0xc]        ;618
000954  e7d6              B        |L1.2308|
                  |L1.2390|
000956  f88ab00c          STRB     r11,[r10,#0xc]        ;628
00095a  e7e8              B        |L1.2350|
                  |L1.2396|
00095c  7b08              LDRB     r0,[r1,#0xc]          ;644  ; kb_full_ver
00095e  4688              MOV      r8,r1                 ;644
000960  2800              CMP      r0,#0                 ;644
000962  d0f4              BEQ      |L1.2382|
000964  230f              MOVS     r3,#0xf               ;647
000966  2200              MOVS     r2,#0                 ;647
000968  216e              MOVS     r1,#0x6e              ;647
00096a  20e1              MOVS     r0,#0xe1              ;647
00096c  f7fffffe          BL       mess_send
000970  f9b60008          LDRSH    r0,[r6,#8]            ;649  ; bat
000974  f7fffffe          BL       abs
000978  f9b91000          LDRSH    r1,[r9,#0]            ;649  ; IKB
00097c  4288              CMP      r0,r1                 ;649
00097e  dd07              BLE      |L1.2448|
000980  7820              LDRB     r0,[r4,#0]            ;651  ; kb_start
000982  2801              CMP      r0,#1                 ;651
000984  d104              BNE      |L1.2448|
000986  7025              STRB     r5,[r4,#0]            ;653
000988  2100              MOVS     r1,#0                 ;654
00098a  4608              MOV      r0,r1                 ;654
00098c  f7fffffe          BL       avar_bat_hndl
                  |L1.2448|
000990  f9b60054          LDRSH    r0,[r6,#0x54]         ;658  ; bat
000994  f7fffffe          BL       abs
000998  f9b91000          LDRSH    r1,[r9,#0]            ;658  ; IKB
00099c  4288              CMP      r0,r1                 ;658
00099e  dd06              BLE      |L1.2478|
0009a0  7860              LDRB     r0,[r4,#1]            ;660  ; kb_start
0009a2  2801              CMP      r0,#1                 ;660
0009a4  d103              BNE      |L1.2478|
0009a6  7065              STRB     r5,[r4,#1]            ;662
0009a8  2100              MOVS     r1,#0                 ;663
0009aa  f7fffffe          BL       avar_bat_hndl
                  |L1.2478|
0009ae  f9ba0000          LDRSH    r0,[r10,#0]           ;667  ; Ib_ips_termokompensat
0009b2  f7fffffe          BL       abs
0009b6  f9b91000          LDRSH    r1,[r9,#0]            ;667  ; IKB
0009ba  4288              CMP      r0,r1                 ;667
0009bc  dd08              BLE      |L1.2512|
0009be  f898000d          LDRB     r0,[r8,#0xd]          ;669  ; kb_start_ips
0009c2  2801              CMP      r0,#1                 ;669
0009c4  d104              BNE      |L1.2512|
0009c6  f888500d          STRB     r5,[r8,#0xd]          ;671
0009ca  2000              MOVS     r0,#0                 ;672
0009cc  f7fffffe          BL       avar_bat_ips_hndl
                  |L1.2512|
0009d0  7820              LDRB     r0,[r4,#0]            ;677  ; kb_start
0009d2  b930              CBNZ     r0,|L1.2530|
0009d4  7860              LDRB     r0,[r4,#1]            ;677  ; kb_start
0009d6  b920              CBNZ     r0,|L1.2530|
0009d8  f898000d          LDRB     r0,[r8,#0xd]          ;677  ; kb_start_ips
0009dc  b908              CBNZ     r0,|L1.2530|
0009de  f888500c          STRB     r5,[r8,#0xc]          ;679
                  |L1.2530|
0009e2  20e6              MOVS     r0,#0xe6              ;682
0009e4  f7fffffe          BL       mess_find
0009e8  b118              CBZ      r0,|L1.2546|
0009ea  48ff              LDR      r0,|L1.3560|
0009ec  6800              LDR      r0,[r0,#0]            ;682  ; mess_data
0009ee  28e7              CMP      r0,#0xe7              ;682
0009f0  d00a              BEQ      |L1.2568|
                  |L1.2546|
0009f2  48fe              LDR      r0,|L1.3564|
0009f4  49fe              LDR      r1,|L1.3568|
0009f6  f9b00000          LDRSH    r0,[r0,#0]            ;682  ; USIGN
0009fa  f9b11000          LDRSH    r1,[r1,#0]            ;682  ; load_U
0009fe  eb000080          ADD      r0,r0,r0,LSL #2       ;682
000a02  ebb10f40          CMP      r1,r0,LSL #1          ;682
                  |L1.2566|
000a06  daa2              BGE      |L1.2382|
                  |L1.2568|
000a08  f888500c          STRB     r5,[r8,#0xc]          ;684
000a0c  7820              LDRB     r0,[r4,#0]            ;685  ; kb_start
000a0e  4df9              LDR      r5,|L1.3572|
000a10  2801              CMP      r0,#1                 ;685
000a12  d10f              BNE      |L1.2612|
000a14  f9b90000          LDRSH    r0,[r9,#0]            ;685  ; IKB
000a18  f9b51000          LDRSH    r1,[r5,#0]            ;685  ; load_I
000a1c  0040              LSLS     r0,r0,#1              ;685
000a1e  fb90f0f7          SDIV     r0,r0,r7              ;685
000a22  4288              CMP      r0,r1                 ;685
000a24  da06              BGE      |L1.2612|
000a26  f896003d          LDRB     r0,[r6,#0x3d]         ;685  ; bat
000a2a  07c0              LSLS     r0,r0,#31             ;685
000a2c  d102              BNE      |L1.2612|
000a2e  2101              MOVS     r1,#1                 ;685
000a30  f7fffffe          BL       avar_bat_hndl
                  |L1.2612|
000a34  7860              LDRB     r0,[r4,#1]            ;686  ; kb_start
000a36  2801              CMP      r0,#1                 ;686
000a38  d110              BNE      |L1.2652|
000a3a  f9b90000          LDRSH    r0,[r9,#0]            ;686  ; IKB
000a3e  f9b51000          LDRSH    r1,[r5,#0]            ;686  ; load_I
000a42  0040              LSLS     r0,r0,#1              ;686
000a44  fb90f0f7          SDIV     r0,r0,r7              ;686
000a48  4288              CMP      r0,r1                 ;686
000a4a  da07              BGE      |L1.2652|
000a4c  f8960089          LDRB     r0,[r6,#0x89]         ;686  ; bat
000a50  07c0              LSLS     r0,r0,#31             ;686
000a52  d103              BNE      |L1.2652|
000a54  2101              MOVS     r1,#1                 ;686
000a56  4608              MOV      r0,r1                 ;686
000a58  f7fffffe          BL       avar_bat_hndl
                  |L1.2652|
000a5c  f898000d          LDRB     r0,[r8,#0xd]          ;688  ; kb_start_ips
000a60  2801              CMP      r0,#1                 ;688
                  |L1.2658|
000a62  f47faf74          BNE      |L1.2382|
000a66  f9b90000          LDRSH    r0,[r9,#0]            ;688  ; IKB
000a6a  f9b51000          LDRSH    r1,[r5,#0]            ;688  ; load_I
000a6e  0040              LSLS     r0,r0,#1              ;688
000a70  fb90f0f7          SDIV     r0,r0,r7              ;688
000a74  4288              CMP      r0,r1                 ;688
000a76  dac6              BGE      |L1.2566|
000a78  48df              LDR      r0,|L1.3576|
000a7a  f890003d          LDRB     r0,[r0,#0x3d]         ;688  ; bat_ips
000a7e  07c0              LSLS     r0,r0,#31             ;688
000a80  d1ef              BNE      |L1.2658|
000a82  e8bd5ff0          POP      {r4-r12,lr}           ;688
000a86  2001              MOVS     r0,#1                 ;688
000a88  f7ffbffe          B.W      avar_bat_ips_hndl
;;;694    
                          ENDP

                  samokalibr_hndl PROC
;;;703    //-----------------------------------------------
;;;704    void samokalibr_hndl(void)
000a8c  e92d47f0          PUSH     {r4-r10,lr}
;;;705    {
;;;706    if(++samokalibr_cnt>=1800)samokalibr_cnt=0;
000a90  4cda              LDR      r4,|L1.3580|
000a92  8fa0              LDRH     r0,[r4,#0x3c]  ; samokalibr_cnt
000a94  1c40              ADDS     r0,r0,#1
000a96  b200              SXTH     r0,r0
000a98  87a0              STRH     r0,[r4,#0x3c]
000a9a  f5b06fe1          CMP      r0,#0x708
000a9e  db02              BLT      |L1.2726|
000aa0  f04f0000          MOV      r0,#0
000aa4  87a0              STRH     r0,[r4,#0x3c]
                  |L1.2726|
;;;707    
;;;708    if(samokalibr_cnt>=1785U)
000aa6  f9b4003c          LDRSH    r0,[r4,#0x3c]  ; samokalibr_cnt
000aaa  f5b06fdf          CMP      r0,#0x6f8
000aae  d911              BLS      |L1.2772|
;;;709    	{
;;;710    	mess_send(MESS2RELE_HNDL,PARAM_RELE_SAMOKALIBR,1,15);
000ab0  230f              MOVS     r3,#0xf
000ab2  2201              MOVS     r2,#1
000ab4  2164              MOVS     r1,#0x64
000ab6  20d2              MOVS     r0,#0xd2
000ab8  f7fffffe          BL       mess_send
;;;711    	mess_send(MESS2IND_HNDL,PARAM_SAMOKALIBR,0,15);
000abc  230f              MOVS     r3,#0xf
000abe  2200              MOVS     r2,#0
000ac0  21d8              MOVS     r1,#0xd8
000ac2  20d7              MOVS     r0,#0xd7
000ac4  f7fffffe          BL       mess_send
;;;712    	mess_send(MESS2MATEMAT,PARAM_SAMOKALIBR,0,15);
000ac8  230f              MOVS     r3,#0xf
000aca  2200              MOVS     r2,#0
000acc  21d8              MOVS     r1,#0xd8
000ace  20dc              MOVS     r0,#0xdc
000ad0  f7fffffe          BL       mess_send
                  |L1.2772|
;;;713    	} 
;;;714    
;;;715    if(samokalibr_cnt==1799U)
000ad4  f9b4003c          LDRSH    r0,[r4,#0x3c]  ; samokalibr_cnt
000ad8  f5a061e0          SUB      r1,r0,#0x700
000adc  3907              SUBS     r1,#7
000ade  d133              BNE      |L1.2888|
;;;716    	{
;;;717    	if((Kibat0[0]!=ad7705_buff_[0])&&(abs(bat[0]._Ib/10)<IZMAX)) lc640_write_int(ADR_KI0BAT[0],ad7705_buff_[0]);
000ae0  4dc7              LDR      r5,|L1.3584|
000ae2  4cc8              LDR      r4,|L1.3588|
000ae4  4ec8              LDR      r6,|L1.3592|
000ae6  8828              LDRH     r0,[r5,#0]  ; Kibat0
000ae8  8821              LDRH     r1,[r4,#0]  ; ad7705_buff_
000aea  270a              MOVS     r7,#0xa
000aec  f8df831c          LDR      r8,|L1.3596|
000af0  f8df931c          LDR      r9,|L1.3600|
000af4  4288              CMP      r0,r1
000af6  d010              BEQ      |L1.2842|
000af8  f9b60008          LDRSH    r0,[r6,#8]  ; bat
000afc  fb90f0f7          SDIV     r0,r0,r7
000b00  b200              SXTH     r0,r0
000b02  f7fffffe          BL       abs
000b06  f9b81000          LDRSH    r1,[r8,#0]  ; IZMAX
000b0a  4288              CMP      r0,r1
000b0c  da05              BGE      |L1.2842|
000b0e  f9b41000          LDRSH    r1,[r4,#0]  ; ad7705_buff_
000b12  f9b90000          LDRSH    r0,[r9,#0]  ; ADR_KI0BAT
000b16  f7fffffe          BL       lc640_write_int
                  |L1.2842|
;;;718    	if((Kibat0[1]!=ad7705_buff_[1])&&(abs(bat[0]._Ib/10)<IZMAX)) lc640_write_int(ADR_KI0BAT[1],ad7705_buff_[1]);
000b1a  8868              LDRH     r0,[r5,#2]  ; Kibat0
000b1c  8861              LDRH     r1,[r4,#2]  ; ad7705_buff_
000b1e  4288              CMP      r0,r1
000b20  d012              BEQ      |L1.2888|
000b22  f9b60008          LDRSH    r0,[r6,#8]  ; bat
000b26  fb90f0f7          SDIV     r0,r0,r7
000b2a  b200              SXTH     r0,r0
000b2c  f7fffffe          BL       abs
000b30  f9b81000          LDRSH    r1,[r8,#0]  ; IZMAX
000b34  4288              CMP      r0,r1
000b36  da07              BGE      |L1.2888|
000b38  f9b41002          LDRSH    r1,[r4,#2]  ; ad7705_buff_
000b3c  f9b90002          LDRSH    r0,[r9,#2]  ; ADR_KI0BAT
000b40  e8bd47f0          POP      {r4-r10,lr}
000b44  f7ffbffe          B.W      lc640_write_int
                  |L1.2888|
;;;719    	
;;;720    	}	 	
;;;721    }
000b48  e8bd87f0          POP      {r4-r10,pc}
;;;722    
                          ENDP

                  ubat_old_drv PROC
;;;725    //-----------------------------------------------
;;;726    void ubat_old_drv(void)
000b4c  b510              PUSH     {r4,lr}
;;;727    {        
;;;728    bat_u_old_cnt++;
000b4e  4cb1              LDR      r4,|L1.3604|
000b50  8820              LDRH     r0,[r4,#0]  ; bat_u_old_cnt
000b52  f1000001          ADD      r0,r0,#1
000b56  8020              STRH     r0,[r4,#0]
;;;729    gran_ring(&bat_u_old_cnt,0,8);
000b58  f04f0208          MOV      r2,#8
000b5c  f04f0100          MOV      r1,#0
000b60  4620              MOV      r0,r4
000b62  f7fffffe          BL       gran_ring
;;;730    
;;;731    bat[0]._u_old[bat_u_old_cnt]=bat[0]._Ub;
000b66  49a8              LDR      r1,|L1.3592|
000b68  f9b40000          LDRSH    r0,[r4,#0]  ; bat_u_old_cnt
000b6c  eb010040          ADD      r0,r1,r0,LSL #1
000b70  884a              LDRH     r2,[r1,#2]  ; bat
000b72  8402              STRH     r2,[r0,#0x20]
;;;732    bat[1]._u_old[bat_u_old_cnt]=bat[1]._Ub;
000b74  f8b1104e          LDRH     r1,[r1,#0x4e]  ; bat
000b78  f8a0106c          STRH     r1,[r0,#0x6c]
;;;733    }
000b7c  bd10              POP      {r4,pc}
;;;734    
                          ENDP

                  unet_drv PROC
;;;735    //-----------------------------------------------
;;;736    void unet_drv(void)
000b7e  b570              PUSH     {r4-r6,lr}
;;;737    {
;;;738    if(net_U<UMN)
000b80  4da5              LDR      r5,|L1.3608|
000b82  48a6              LDR      r0,|L1.3612|
;;;739    	{
;;;740    	if((unet_drv_cnt<10)&&(main_1Hz_cnt>15))
000b84  4aa6              LDR      r2,|L1.3616|
000b86  f9b51000          LDRSH    r1,[r5,#0]            ;738  ; net_U
000b8a  f9b03000          LDRSH    r3,[r0,#0]            ;738  ; UMN
000b8e  f9920000          LDRSB    r0,[r2,#0]
000b92  4299              CMP      r1,r3                 ;738
000b94  da1f              BGE      |L1.3030|
;;;741    		{
;;;742    		unet_drv_cnt++;
;;;743    		if(unet_drv_cnt>=10)
;;;744    			{
;;;745    			net_Ustore=net_U;
000b96  4ca3              LDR      r4,|L1.3620|
000b98  280a              CMP      r0,#0xa               ;740
000b9a  da0f              BGE      |L1.3004|
000b9c  4ba2              LDR      r3,|L1.3624|
000b9e  f9b33000          LDRSH    r3,[r3,#0]            ;740  ; main_1Hz_cnt
000ba2  2b0f              CMP      r3,#0xf               ;740
000ba4  dd0a              BLE      |L1.3004|
000ba6  f1000001          ADD      r0,r0,#1              ;742
000baa  b240              SXTB     r0,r0                 ;742
000bac  7010              STRB     r0,[r2,#0]            ;742
000bae  280a              CMP      r0,#0xa               ;743
000bb0  db09              BLT      |L1.3014|
000bb2  8021              STRH     r1,[r4,#0]
;;;746    		 	avar_unet_hndl(1);
000bb4  2001              MOVS     r0,#1
000bb6  f7fffffe          BL       avar_unet_hndl
000bba  e004              B        |L1.3014|
                  |L1.3004|
;;;747    			
;;;748    			}
;;;749    		}
;;;750    	else if(unet_drv_cnt>=10)unet_drv_cnt=10;
000bbc  280a              CMP      r0,#0xa
000bbe  db02              BLT      |L1.3014|
000bc0  f04f000a          MOV      r0,#0xa
000bc4  7010              STRB     r0,[r2,#0]
                  |L1.3014|
;;;751    
;;;752    	if(net_U<net_Ustore) net_Ustore=net_U;	
000bc6  f9b50000          LDRSH    r0,[r5,#0]  ; net_U
000bca  f9b41000          LDRSH    r1,[r4,#0]  ; net_Ustore
000bce  4288              CMP      r0,r1
000bd0  da00              BGE      |L1.3028|
000bd2  8020              STRH     r0,[r4,#0]
                  |L1.3028|
;;;753    	}
;;;754    
;;;755    else if(net_U>UMN)
;;;756    	{                 
;;;757    	if(unet_drv_cnt)
;;;758    		{
;;;759    		unet_drv_cnt--;
;;;760    		if(unet_drv_cnt<=0)
;;;761    			{
;;;762    			avar_unet_hndl(0);
;;;763    			}
;;;764    		}
;;;765    	else if(unet_drv_cnt<0)unet_drv_cnt=0;
;;;766    	
;;;767    	}
;;;768    
;;;769    }
000bd4  bd70              POP      {r4-r6,pc}
                  |L1.3030|
000bd6  ddfd              BLE      |L1.3028|
000bd8  2800              CMP      r0,#0                 ;757
000bda  d0fb              BEQ      |L1.3028|
000bdc  f1a00001          SUB      r0,r0,#1              ;759
000be0  b240              SXTB     r0,r0                 ;759
000be2  7010              STRB     r0,[r2,#0]            ;759
000be4  2800              CMP      r0,#0                 ;760
000be6  dcf5              BGT      |L1.3028|
000be8  e8bd4070          POP      {r4-r6,lr}            ;762
000bec  2000              MOVS     r0,#0                 ;762
000bee  f7ffbffe          B.W      avar_unet_hndl
;;;770    
                          ENDP

                  matemat PROC
;;;771    //-----------------------------------------------
;;;772    void matemat(void)
000bf2  e92d5fff          PUSH     {r0-r12,lr}
;;;773    {
;;;774    //signed short temp_SS;
;;;775    signed long temp_SL/*,temp_SL_*/;
;;;776    char /*temp,*/i;
;;;777    signed short temp_SS;
;;;778    
;;;779    #ifdef UKU_MGTS
;;;780    // 
;;;781    temp_SL=(signed long)net_buff_;
;;;782    temp_SL*=Kunet;
;;;783    temp_SL/=110000L;
;;;784    net_U=(signed short)temp_SL;
;;;785    #endif
;;;786    
;;;787    #ifdef UKU_RSTKM
;;;788    // 
;;;789    temp_SL=(signed long)net_buff_;
;;;790    temp_SL*=Kunet;
;;;791    temp_SL/=110000L;
;;;792    net_U=(signed short)temp_SL;
;;;793    #endif
;;;794    
;;;795    #ifdef UKU_3U
;;;796    // 
;;;797    temp_SL=(signed long)net_buff_;
;;;798    temp_SL*=Kunet;
;;;799    temp_SL/=36000L;
;;;800    net_U=(signed short)temp_SL;
;;;801    #endif
;;;802    
;;;803    #ifdef UKU_6U
;;;804    // 
;;;805    
;;;806    if((AUSW_MAIN%10)||(AUSW_MAIN==2400)||(AUSW_MAIN==4800)||(AUSW_MAIN==6000))
;;;807    	{
;;;808    
;;;809    	if(bps[11]._device==dNET_METR)
;;;810    		{
;;;811    		net_metr_buff_[0]=((signed short)bps[11]._buff[0])+(((signed short)bps[11]._buff[1])<<8);
;;;812    		net_metr_buff_[1]=((signed short)bps[11]._buff[2])+(((signed short)bps[11]._buff[3])<<8);
;;;813    		net_metr_buff_[2]=((signed short)bps[11]._buff[4])+(((signed short)bps[11]._buff[5])<<8);
;;;814    
;;;815    		temp_SL=(signed long)net_metr_buff_[0];
;;;816    		temp_SL*=KunetA;
;;;817    		temp_SL/=6000L;
;;;818    		net_Ua=(signed short)temp_SL;
;;;819    	
;;;820    		temp_SL=(signed long)net_metr_buff_[1];
;;;821    		temp_SL*=KunetB;
;;;822    		temp_SL/=6000L;
;;;823    		net_Ub=(signed short)temp_SL;
;;;824    	
;;;825    		temp_SL=(signed long)net_metr_buff_[2];
;;;826    		temp_SL*=KunetC;
;;;827    		temp_SL/=6000L;
;;;828    		net_Uc=(signed short)temp_SL;
;;;829    		}
;;;830    	else
;;;831    		{
;;;832    		temp_SL=(signed long)net_buff_;
;;;833    		temp_SL*=KunetA;
;;;834    		temp_SL/=110000L;
;;;835    		net_Ua=(signed short)temp_SL;
;;;836    	
;;;837    		temp_SL=(signed long)adc_buff_[3];
;;;838    		temp_SL*=KunetB;
;;;839    		temp_SL/=6000L;
;;;840    		net_Ub=(signed short)temp_SL;
;;;841    	
;;;842    		temp_SL=(signed long)adc_buff_[10];
;;;843    		temp_SL*=KunetC;
;;;844    		temp_SL/=6000L;
;;;845    		net_Uc=(signed short)temp_SL;
;;;846    		}
;;;847    
;;;848    	net_U=net_Ua;
;;;849    	if(net_Ub<net_U)net_U=net_Ub;
;;;850    	if(net_Uc<net_U)net_U=net_Uc;
;;;851    	}
;;;852    else 
;;;853    	{
;;;854    	temp_SL=(signed long)net_buff_;
;;;855    	temp_SL*=Kunet;
;;;856    	temp_SL/=110000L;
;;;857    	net_U=(signed short)temp_SL;
;;;858    	}
;;;859    
;;;860    
;;;861    
;;;862    
;;;863    #endif
;;;864    
;;;865    #ifdef UKU_GLONASS
;;;866    // 
;;;867    temp_SL=(signed long)net_buff_;
;;;868    temp_SL*=Kunet;
;;;869    temp_SL/=110000L;
;;;870    net_U=(signed short)temp_SL;
;;;871    #endif
;;;872    
;;;873    #ifdef UKU_KONTUR
;;;874    // 
;;;875    temp_SL=(signed long)net_buff_;
;;;876    temp_SL*=Kunet;
;;;877    temp_SL/=110000L;
;;;878    net_U=(signed short)temp_SL;
;;;879    #endif
;;;880    
;;;881    
;;;882    #ifdef UKU_220_V2
;;;883    // 
;;;884    
;;;885    if(AUSW_MAIN==22033)
;;;886    	{
;;;887    	temp_SL=(signed long)net_buff_;
;;;888    	temp_SL*=KunetA;
;;;889    	temp_SL/=6000L;
;;;890    	net_Ua=(signed short)temp_SL;
;;;891    
;;;892    	temp_SL=(signed long)adc_buff_[3];
;;;893    	temp_SL*=KunetB;
;;;894    	temp_SL/=6000L;
;;;895    	net_Ub=(signed short)temp_SL;
;;;896    
;;;897    	temp_SL=(signed long)adc_buff_[10];
;;;898    	temp_SL*=KunetC;
;;;899    	temp_SL/=6000L;
;;;900    	net_Uc=(signed short)temp_SL;
;;;901    
;;;902    	net_U=net_Ua;
;;;903    	if(net_Ub<net_U)net_U=net_Ub;
;;;904    	if(net_Uc<net_U)net_U=net_Uc;
;;;905    	}
;;;906    else
;;;907    	{
;;;908    	temp_SL=(signed long)net_buff_;
;;;909    	temp_SL*=Kunet;
;;;910    	temp_SL/=5000L;
;;;911    	net_U=(signed short)temp_SL;
;;;912    	}
;;;913    #endif
;;;914    
;;;915    
;;;916    #ifdef UKU_220
;;;917    // 
;;;918    
;;;919    if(AUSW_MAIN==22035)
;;;920    	{
;;;921    	temp_SL=(signed long)net_buff_;
;;;922    	temp_SL*=KunetA;
;;;923    	temp_SL/=6000L;
;;;924    	net_Ua=(signed short)temp_SL;
;;;925    
;;;926    	temp_SL=(signed long)adc_buff_[3];
;;;927    	temp_SL*=KunetB;
;;;928    	temp_SL/=6000L;
;;;929    	net_Ub=(signed short)temp_SL;
;;;930    
;;;931    	temp_SL=(signed long)adc_buff_[10];
;;;932    	temp_SL*=KunetC;
;;;933    	temp_SL/=6000L;
;;;934    	net_Uc=(signed short)temp_SL;
;;;935    
;;;936    	net_U=net_Ua;
;;;937    	if(net_Ub<net_U)net_U=net_Ub;
;;;938    	if(net_Uc<net_U)net_U=net_Uc;
;;;939    	}
;;;940    else
;;;941    	{
;;;942    	temp_SL=(signed long)net_buff_;
;;;943    	temp_SL*=Kunet;
;;;944    	#ifdef _ACDC_
;;;945    	temp_SL/=500L;
;;;946    	#else
;;;947    	temp_SL/=5000L;
;;;948    	#endif
;;;949    	net_U=(signed short)temp_SL;
;;;950    	
;;;951    	}
;;;952    #endif
;;;953    
;;;954    #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;955    // 
;;;956    
;;;957    
;;;958    	if(bps[11]._device==dNET_METR)
000bf6  488d              LDR      r0,|L1.3628|
;;;959    		{
;;;960    		net_metr_buff_[0]=((signed short)bps[11]._buff[0])+(((signed short)bps[11]._buff[1])<<8);
;;;961    		net_metr_buff_[1]=((signed short)bps[11]._buff[2])+(((signed short)bps[11]._buff[3])<<8);
;;;962    		net_metr_buff_[2]=((signed short)bps[11]._buff[4])+(((signed short)bps[11]._buff[5])<<8);
;;;963    
;;;964    		temp_SL=(signed long)net_metr_buff_[2];
;;;965    		temp_SL*=KunetA;
000bf8  4b8d              LDR      r3,|L1.3632|
;;;966    		temp_SL/=6000L;
;;;967    		net_Ua=(signed short)temp_SL;
;;;968    	
;;;969    		temp_SL=(signed long)net_metr_buff_[1];
;;;970    		temp_SL*=KunetB;
000bfa  498f              LDR      r1,|L1.3640|
000bfc  f890039c          LDRB     r0,[r0,#0x39c]        ;958  ; bps
000c00  9003              STR      r0,[sp,#0xc]          ;965
;;;971    		temp_SL/=6000L;
;;;972    		net_Ub=(signed short)temp_SL;
;;;973    	
;;;974    		temp_SL=(signed long)net_metr_buff_[0];
;;;975    		temp_SL*=KunetC;
000c02  4a8e              LDR      r2,|L1.3644|
000c04  f9b3b000          LDRSH    r11,[r3,#0]           ;965
000c08  f9b11000          LDRSH    r1,[r1,#0]            ;970
000c0c  9102              STR      r1,[sp,#8]
000c0e  f8dfc224          LDR      r12,|L1.3636|
000c12  f9b21000          LDRSH    r1,[r2,#0]
000c16  4b8a              LDR      r3,|L1.3648|
;;;976    		temp_SL/=6000L;
;;;977    		net_Uc=(signed short)temp_SL;
000c18  f8df8228          LDR      r8,|L1.3652|
;;;978    
;;;979    		net_F3=((signed short)bps[11]._buff[6])+(((signed short)bps[11]._buff[7])<<8);
;;;980    
;;;981    		net_U=net_Ua;
;;;982    		if(net_Ub<net_U)net_U=net_Ub;
;;;983    		if(net_Uc<net_U)net_U=net_Uc;
;;;984    		}
;;;985    	  else if(AUSW_MAIN==22033)
;;;986    	{
;;;987    	temp_SL=(signed long)net_buff_;
000c1c  4f77              LDR      r7,|L1.3580|
000c1e  f2456411          MOV      r4,#0x5611            ;985
;;;988    	temp_SL*=KunetA;
;;;989    	temp_SL/=4000L;
;;;990    	net_Ua=(signed short)temp_SL;
;;;991    
;;;992    	temp_SL=(signed long)adc_buff_[3];
;;;993    	temp_SL*=KunetB;
;;;994    	temp_SL/=6000L;
;;;995    	net_Ub=(signed short)temp_SL;
;;;996    
;;;997    	temp_SL=(signed long)adc_buff_[10];
;;;998    	temp_SL*=KunetC;
;;;999    	temp_SL/=6000L;
;;;1000   	net_Uc=(signed short)temp_SL;
;;;1001   
;;;1002   	net_U=net_Ua;
;;;1003   	if(net_Ub<net_U)net_U=net_Ub;
;;;1004   	if(net_Uc<net_U)net_U=net_Uc;
;;;1005   	}
;;;1006   else if((AUSW_MAIN==22063)||(AUSW_MAIN==22023)||(AUSW_MAIN==22043))
;;;1007   	{
;;;1008   	temp_SL=(signed long)net_buff_;
;;;1009   	temp_SL*=KunetA;
;;;1010   	temp_SL/=40000L;
;;;1011   	net_Ua=(signed short)temp_SL;
;;;1012   
;;;1013   	temp_SL=(signed long)adc_buff_[3];
;;;1014   	temp_SL*=KunetB;
;;;1015   	temp_SL/=6000L;
;;;1016   	net_Ub=(signed short)temp_SL;
;;;1017   
;;;1018   	temp_SL=(signed long)adc_buff_[10];
;;;1019   	temp_SL*=KunetC;
;;;1020   	temp_SL/=6000L;
;;;1021   	net_Uc=(signed short)temp_SL;
;;;1022   
;;;1023   	net_U=net_Ua;
;;;1024   	if(net_Ub<net_U)net_U=net_Ub;
;;;1025   	if(net_Uc<net_U)net_U=net_Uc;
;;;1026   	}
;;;1027   else	if((AUSW_MAIN==22010)||(AUSW_MAIN==22011) )
;;;1028   	{
;;;1029   	temp_SL=(signed long)net_buff_;
;;;1030   	temp_SL*=Kunet;
;;;1031   	temp_SL/=35000L;
;;;1032   	net_U=(signed short)temp_SL;
;;;1033   	
;;;1034   	}
;;;1035   else
;;;1036   	{
;;;1037   	temp_SL=(signed long)net_buff_;
;;;1038   	temp_SL*=Kunet;
;;;1039   	#ifdef _ACDC_
;;;1040   	temp_SL/=500L;
000c22  f44f76fa          MOV      r6,#0x1f4
000c26  f24555fa          MOV      r5,#0x55fa            ;1027
000c2a  9101              STR      r1,[sp,#4]            ;958
000c2c  2807              CMP      r0,#7                 ;958
000c2e  d03a              BEQ      |L1.3238|
000c30  4639              MOV      r1,r7                 ;987
000c32  f8df9218          LDR      r9,|L1.3660|
000c36  8cca              LDRH     r2,[r1,#0x26]         ;987
000c38  497d              LDR      r1,|L1.3632|
000c3a  f8dfa1fc          LDR      r10,|L1.3640|
000c3e  f2417b70          MOV      r11,#0x1770           ;966
000c42  f9b11000          LDRSH    r1,[r1,#0]            ;965
000c46  f9baa000          LDRSH    r10,[r10,#0]          ;970
000c4a  434a              MULS     r2,r1,r2              ;988
000c4c  f9b91006          LDRSH    r1,[r9,#6]            ;992
000c50  f9b99014          LDRSH    r9,[r9,#0x14]         ;997
000c54  fb01f10a          MUL      r1,r1,r10             ;993
000c58  f8dfa1e0          LDR      r10,|L1.3644|
000c5c  fb91f1fb          SDIV     r1,r1,r11             ;994
000c60  f9baa000          LDRSH    r10,[r10,#0]          ;975
000c64  4878              LDR      r0,|L1.3656|
000c66  fb09f90a          MUL      r9,r9,r10             ;998
000c6a  fb99f9fb          SDIV     r9,r9,r11             ;999
000c6e  8800              LDRH     r0,[r0,#0]            ;985  ; AUSW_MAIN
000c70  b209              SXTH     r1,r1                 ;995
000c72  fa0ff989          SXTH     r9,r9                 ;1000
000c76  42a0              CMP      r0,r4                 ;985
000c78  d15c              BNE      |L1.3380|
000c7a  f44f607a          MOV      r0,#0xfa0             ;989
000c7e  fb92f0f0          SDIV     r0,r2,r0              ;989
000c82  b200              SXTH     r0,r0                 ;990
000c84  f8ac0000          STRH     r0,[r12,#0]           ;990
000c88  8019              STRH     r1,[r3,#0]            ;995
000c8a  f8a89000          STRH     r9,[r8,#0]            ;1000
000c8e  4a62              LDR      r2,|L1.3608|
000c90  8010              STRH     r0,[r2,#0]            ;1002
000c92  4281              CMP      r1,r0                 ;1003
000c94  da00              BGE      |L1.3224|
000c96  8011              STRH     r1,[r2,#0]            ;1003
                  |L1.3224|
000c98  f9b20000          LDRSH    r0,[r2,#0]            ;1004  ; net_U
000c9c  4581              CMP      r9,r0                 ;1004
000c9e  da01              BGE      |L1.3236|
000ca0  f8a29000          STRH     r9,[r2,#0]            ;1004
                  |L1.3236|
000ca4  e07e              B        |L1.3492|
                  |L1.3238|
000ca6  486a              LDR      r0,|L1.3664|
000ca8  f8df9150          LDR      r9,|L1.3580|
000cac  7801              LDRB     r1,[r0,#0]            ;960  ; bps
000cae  7842              LDRB     r2,[r0,#1]            ;960  ; bps
000cb0  f109098c          ADD      r9,r9,#0x8c           ;960
000cb4  eb012102          ADD      r1,r1,r2,LSL #8       ;960
000cb8  fa1ffa81          UXTH     r10,r1                ;960
000cbc  f8a9a000          STRH     r10,[r9,#0]           ;960
000cc0  7881              LDRB     r1,[r0,#2]            ;961  ; bps
000cc2  78c2              LDRB     r2,[r0,#3]            ;961  ; bps
000cc4  eb012102          ADD      r1,r1,r2,LSL #8       ;961
000cc8  b289              UXTH     r1,r1                 ;961
000cca  f8a91002          STRH     r1,[r9,#2]            ;961
000cce  7902              LDRB     r2,[r0,#4]            ;962  ; bps
000cd0  f890e005          LDRB     lr,[r0,#5]            ;962  ; bps
000cd4  eb02220e          ADD      r2,r2,lr,LSL #8       ;962
000cd8  b292              UXTH     r2,r2                 ;962
000cda  f8a92004          STRH     r2,[r9,#4]            ;962
000cde  fb02f20b          MUL      r2,r2,r11             ;965
000ce2  f2417970          MOV      r9,#0x1770            ;966
000ce6  fb92f2f9          SDIV     r2,r2,r9              ;966
000cea  fa0ffb82          SXTH     r11,r2                ;967
000cee  f8acb000          STRH     r11,[r12,#0]          ;967
000cf2  9a02              LDR      r2,[sp,#8]            ;970
000cf4  fb01f102          MUL      r1,r1,r2              ;970
000cf8  fb91f1f9          SDIV     r1,r1,r9              ;971
000cfc  b209              SXTH     r1,r1                 ;972
000cfe  8019              STRH     r1,[r3,#0]            ;972
000d00  9a01              LDR      r2,[sp,#4]            ;975
000d02  fb0afa02          MUL      r10,r10,r2            ;975
000d06  fb9af2f9          SDIV     r2,r10,r9             ;976
000d0a  b212              SXTH     r2,r2                 ;977
000d0c  f8a82000          STRH     r2,[r8,#0]            ;977
000d10  7983              LDRB     r3,[r0,#6]            ;979  ; bps
000d12  79c0              LDRB     r0,[r0,#7]            ;979  ; bps
000d14  eb032300          ADD      r3,r3,r0,LSL #8       ;979
000d18  484e              LDR      r0,|L1.3668|
000d1a  8003              STRH     r3,[r0,#0]            ;979
000d1c  483e              LDR      r0,|L1.3608|
000d1e  f8a0b000          STRH     r11,[r0,#0]           ;981
000d22  4559              CMP      r1,r11                ;982
000d24  da00              BGE      |L1.3368|
000d26  8001              STRH     r1,[r0,#0]            ;982
                  |L1.3368|
000d28  f9b01000          LDRSH    r1,[r0,#0]            ;983  ; net_U
000d2c  428a              CMP      r2,r1                 ;983
000d2e  da39              BGE      |L1.3492|
000d30  8002              STRH     r2,[r0,#0]            ;983
000d32  e037              B        |L1.3492|
                  |L1.3380|
000d34  f5a04aac          SUB      r10,r0,#0x5600        ;1006
000d38  f1ba0a2f          SUBS     r10,r10,#0x2f         ;1006
000d3c  d005              BEQ      |L1.3402|
000d3e  f11a0a28          ADDS     r10,r10,#0x28         ;1006
000d42  d002              BEQ      |L1.3402|
000d44  f1ba0a14          SUBS     r10,r10,#0x14         ;1006
000d48  d115              BNE      |L1.3446|
                  |L1.3402|
000d4a  f6494040          MOV      r0,#0x9c40            ;1010
000d4e  fb92f0f0          SDIV     r0,r2,r0              ;1010
000d52  b200              SXTH     r0,r0                 ;1011
000d54  f8ac0000          STRH     r0,[r12,#0]           ;1011
000d58  8019              STRH     r1,[r3,#0]            ;1016
000d5a  f8a89000          STRH     r9,[r8,#0]            ;1021
000d5e  4a2e              LDR      r2,|L1.3608|
000d60  8010              STRH     r0,[r2,#0]            ;1023
000d62  4281              CMP      r1,r0                 ;1024
000d64  da00              BGE      |L1.3432|
000d66  8011              STRH     r1,[r2,#0]            ;1024
                  |L1.3432|
000d68  f9b20000          LDRSH    r0,[r2,#0]            ;1025  ; net_U
000d6c  4581              CMP      r9,r0                 ;1025
000d6e  da19              BGE      |L1.3492|
000d70  f8a29000          STRH     r9,[r2,#0]            ;1025
000d74  e016              B        |L1.3492|
                  |L1.3446|
000d76  4938              LDR      r1,|L1.3672|
000d78  f9b12000          LDRSH    r2,[r1,#0]            ;1030
000d7c  491f              LDR      r1,|L1.3580|
000d7e  8cc9              LDRH     r1,[r1,#0x26]         ;987
000d80  4351              MULS     r1,r2,r1              ;1030
000d82  42a8              CMP      r0,r5                 ;1027
000d84  d003              BEQ      |L1.3470|
000d86  f5a042aa          SUB      r2,r0,#0x5500         ;1027
000d8a  3afb              SUBS     r2,r2,#0xfb           ;1027
000d8c  d106              BNE      |L1.3484|
                  |L1.3470|
000d8e  f64800b8          MOV      r0,#0x88b8            ;1031
000d92  fb91f0f0          SDIV     r0,r1,r0              ;1031
000d96  4920              LDR      r1,|L1.3608|
000d98  8008              STRH     r0,[r1,#0]            ;1032
000d9a  e003              B        |L1.3492|
                  |L1.3484|
000d9c  fb91f0f6          SDIV     r0,r1,r6
;;;1041   	#else
;;;1042   	temp_SL/=5000L;
;;;1043   	#endif
;;;1044   	net_U=(signed short)temp_SL;
000da0  491d              LDR      r1,|L1.3608|
000da2  8008              STRH     r0,[r1,#0]
                  |L1.3492|
;;;1045   	
;;;1046   	}
;;;1047   if(bps[11]._device!=dNET_METR) net_F3=net_F;
000da4  9803              LDR      r0,[sp,#0xc]
000da6  2807              CMP      r0,#7
000da8  d003              BEQ      |L1.3506|
000daa  482c              LDR      r0,|L1.3676|
000dac  8801              LDRH     r1,[r0,#0]  ; net_F
000dae  4829              LDR      r0,|L1.3668|
000db0  8001              STRH     r1,[r0,#0]
                  |L1.3506|
;;;1048   #endif
;;;1049   
;;;1050   #ifdef UKU_TELECORE2015
;;;1051   // 
;;;1052   temp_SL=(signed long)net_buff_;
;;;1053   temp_SL*=Kunet;
;;;1054   temp_SL/=110000L;
;;;1055   net_U=(signed short)temp_SL;
;;;1056   #endif
;;;1057   
;;;1058   // 
;;;1059   temp_SL=(signed long)adc_buff_[0];
000db2  4826              LDR      r0,|L1.3660|
000db4  f9b02000          LDRSH    r2,[r0,#0]  ; adc_buff_
;;;1060   temp_SL*=Kubat[0];
000db8  f8dfc0a4          LDR      r12,|L1.3680|
000dbc  f9bc1000          LDRSH    r1,[r12,#0]  ; Kubat
000dc0  4351              MULS     r1,r2,r1
;;;1061   temp_SL/=2000L;
000dc2  f44f69fa          MOV      r9,#0x7d0
000dc6  fb91f1f9          SDIV     r1,r1,r9
;;;1062   bat[0]._Ub=(signed short)temp_SL;
000dca  f8df803c          LDR      r8,|L1.3592|
000dce  f8a81002          STRH     r1,[r8,#2]
;;;1063   
;;;1064   #ifdef UKU_220
;;;1065   // 
;;;1066   temp_SL=(signed long)adc_buff_[0];
;;;1067   temp_SL*=Kubat[0];
;;;1068   temp_SL/=400L;
;;;1069   bat[0]._Ub=(signed short)temp_SL;
;;;1070   #endif
;;;1071   
;;;1072   #ifdef UKU_220_V2
;;;1073   // 
;;;1074   temp_SL=(signed long)adc_buff_[0];
;;;1075   temp_SL*=Kubat[0];
;;;1076   temp_SL/=400L;
;;;1077   bat[0]._Ub=(signed short)temp_SL;
;;;1078   #endif
;;;1079   
;;;1080   temp_SL=(signed long)adc_buff_[4];
000dd2  f9b03008          LDRSH    r3,[r0,#8]  ; adc_buff_
;;;1081   temp_SL*=Kubatm[0];
000dd6  4a23              LDR      r2,|L1.3684|
000dd8  f9b21000          LDRSH    r1,[r2,#0]  ; Kubatm
000ddc  fb01f103          MUL      r1,r1,r3
;;;1082   temp_SL/=700L;
000de0  f44f732f          MOV      r3,#0x2bc
000de4  e040              B        |L1.3688|
000de6  0000              DCW      0x0000
                  |L1.3560|
                          DCD      mess_data
                  |L1.3564|
                          DCD      USIGN
                  |L1.3568|
                          DCD      load_U
                  |L1.3572|
                          DCD      load_I
                  |L1.3576|
                          DCD      bat_ips
                  |L1.3580|
                          DCD      ||area_number.21||
                  |L1.3584|
                          DCD      Kibat0
                  |L1.3588|
                          DCD      ad7705_buff_
                  |L1.3592|
                          DCD      bat
                  |L1.3596|
                          DCD      IZMAX
                  |L1.3600|
                          DCD      ADR_KI0BAT
                  |L1.3604|
                          DCD      bat_u_old_cnt
                  |L1.3608|
                          DCD      net_U
                  |L1.3612|
                          DCD      UMN
                  |L1.3616|
                          DCD      unet_drv_cnt
                  |L1.3620|
                          DCD      net_Ustore
                  |L1.3624|
                          DCD      main_1Hz_cnt
                  |L1.3628|
                          DCD      bps
                  |L1.3632|
                          DCD      KunetA
                  |L1.3636|
                          DCD      net_Ua
                  |L1.3640|
                          DCD      KunetB
                  |L1.3644|
                          DCD      KunetC
                  |L1.3648|
                          DCD      net_Ub
                  |L1.3652|
                          DCD      net_Uc
                  |L1.3656|
                          DCD      AUSW_MAIN
                  |L1.3660|
                          DCD      ||.bss||+0x400
                  |L1.3664|
                          DCD      bps+0x3a2
                  |L1.3668|
                          DCD      net_F3
                  |L1.3672|
                          DCD      Kunet
                  |L1.3676|
                          DCD      net_F
                  |L1.3680|
                          DCD      Kubat
                  |L1.3684|
                          DCD      Kubatm
                  |L1.3688|
000e68  fb91f1f3          SDIV     r1,r1,r3
;;;1083   bat[0]._Ubm=(signed short)temp_SL;
000e6c  f8a81004          STRH     r1,[r8,#4]
;;;1084   
;;;1085   #ifdef UKU_KONTUR
;;;1086   temp_SL=(signed long)adc_buff_[4];
;;;1087   temp_SL*=Kubatm[0];
;;;1088   temp_SL/=2000L;
;;;1089   bat[0]._Ubm=(signed short)temp_SL;
;;;1090   #endif
;;;1091   
;;;1092   temp_SL=(signed long)adc_buff_[12];
000e70  f9b0a018          LDRSH    r10,[r0,#0x18]  ; adc_buff_
;;;1093   temp_SL*=Kubat[1];
000e74  f9bc1002          LDRSH    r1,[r12,#2]  ; Kubat
000e78  fb01f10a          MUL      r1,r1,r10
;;;1094   temp_SL/=2000L;
000e7c  fb91f1f9          SDIV     r1,r1,r9
;;;1095   bat[1]._Ub=(signed short)temp_SL;
000e80  f8a8104e          STRH     r1,[r8,#0x4e]
;;;1096   
;;;1097   #ifdef UKU_220
;;;1098   temp_SL=(signed long)adc_buff_[12];
;;;1099   temp_SL*=Kubat[1];
;;;1100   temp_SL/=400L;
;;;1101   bat[1]._Ub=(signed short)temp_SL;
;;;1102   #endif
;;;1103   
;;;1104   #ifdef UKU_220_V2
;;;1105   temp_SL=(signed long)adc_buff_[12];
;;;1106   temp_SL*=Kubat[1];
;;;1107   temp_SL/=400L;
;;;1108   bat[1]._Ub=(signed short)temp_SL;
;;;1109   #endif
;;;1110   
;;;1111   temp_SL=(signed long)adc_buff_[1];
000e84  f9b01002          LDRSH    r1,[r0,#2]  ; adc_buff_
;;;1112   temp_SL*=Kubatm[1];
000e88  f9b20002          LDRSH    r0,[r2,#2]  ; Kubatm
000e8c  fb00f001          MUL      r0,r0,r1
;;;1113   temp_SL/=700L;
000e90  fb90f0f3          SDIV     r0,r0,r3
;;;1114   bat[1]._Ubm=(signed short)temp_SL;
000e94  f8a80050          STRH     r0,[r8,#0x50]
;;;1115   #ifdef UKU_KONTUR
;;;1116   temp_SL=(signed long)adc_buff_[1];
;;;1117   temp_SL*=Kubatm[1];
;;;1118   temp_SL/=2000L;
;;;1119   bat[1]._Ubm=(signed short)temp_SL;
;;;1120   #endif
;;;1121   
;;;1122   #ifdef UKU_TELECORE2015
;;;1123   temp_SL=(signed long)adc_buff_[2];
;;;1124   temp_SL*=Kubat[0];
;;;1125   temp_SL/=2000L;
;;;1126   bat[0]._Ub=(signed short)temp_SL;
;;;1127   #endif
;;;1128   
;;;1129   /*
;;;1130   // 
;;;1131   if(!mess_find_unvol(MESS2MATEMAT))
;;;1132   	{
;;;1133   	temp_SL=(signed long)ad7705_buff_[0];
;;;1134   	temp_SL-=(signed long)Kibat0[0];
;;;1135   	temp_SL*=(signed long)Kibat1[0];
;;;1136   	if((AUSW_MAIN==24120)||(AUSW_MAIN==24210))temp_SL/=300L;
;;;1137   	else temp_SL/=1000L;
;;;1138   	bat[0]._Ib=(signed short)temp_SL;
;;;1139   
;;;1140   	temp_SL=(signed long)ad7705_buff_[1];
;;;1141   	temp_SL-=(signed long)Kibat0[1];
;;;1142   	temp_SL*=(signed long)Kibat1[1];
;;;1143   	if((AUSW_MAIN==24120)||(AUSW_MAIN==24210))temp_SL/=300L;
;;;1144   	else temp_SL/=1000L;
;;;1145   	bat[1]._Ib=(signed short)temp_SL;
;;;1146   	}
;;;1147   */
;;;1148   
;;;1149   
;;;1150   // 
;;;1151   if(!mess_find_unvol(MESS2MATEMAT))
000e98  f04f00dc          MOV      r0,#0xdc
000e9c  f7fffffe          BL       mess_find_unvol
;;;1152   	{
;;;1153   	temp_SL=(signed long)ad7705_buff_[0];
;;;1154   	temp_SL-=(signed long)Kibat0[0];
;;;1155   	temp_SL*=(signed long)Kibat1[0];
;;;1156   	if((AUSW_MAIN==24120)||(AUSW_MAIN==24210))temp_SL/=300L;
;;;1157   	else if((AUSW_MAIN==22010)||(AUSW_MAIN==22035)||(AUSW_MAIN==22033))temp_SL/=2000L;
000ea0  f2456213          MOV      r2,#0x5613
000ea4  bbf0              CBNZ     r0,|L1.3876|
000ea6  f8dfa3fc          LDR      r10,|L1.4772|
000eaa  f8ba0000          LDRH     r0,[r10,#0]           ;1153  ; ad7705_buff_
000eae  f8dfb3f8          LDR      r11,|L1.4776|
000eb2  f8bb1000          LDRH     r1,[r11,#0]           ;1154  ; Kibat0
000eb6  eba00001          SUB      r0,r0,r1              ;1154
000eba  4bfc              LDR      r3,|L1.4780|
000ebc  f9b31000          LDRSH    r1,[r3,#0]            ;1155  ; Kibat1
000ec0  fb01f100          MUL      r1,r1,r0              ;1155
000ec4  48fa              LDR      r0,|L1.4784|
000ec6  f6456c38          MOV      r12,#0x5e38           ;1156
000eca  8800              LDRH     r0,[r0,#0]            ;1156  ; AUSW_MAIN
000ecc  4560              CMP      r0,r12                ;1156
000ece  d004              BEQ      |L1.3802|
000ed0  f5a04ebc          SUB      lr,r0,#0x5e00         ;1156
000ed4  f1be0e92          SUBS     lr,lr,#0x92           ;1156
000ed8  d104              BNE      |L1.3812|
                  |L1.3802|
000eda  f44f7e96          MOV      lr,#0x12c             ;1156
000ede  fb91f1fe          SDIV     r1,r1,lr              ;1156
000ee2  e00c              B        |L1.3838|
                  |L1.3812|
000ee4  42a8              CMP      r0,r5
000ee6  d003              BEQ      |L1.3824|
000ee8  4290              CMP      r0,r2
000eea  d001              BEQ      |L1.3824|
000eec  42a0              CMP      r0,r4
000eee  d102              BNE      |L1.3830|
                  |L1.3824|
000ef0  fb91f1f9          SDIV     r1,r1,r9
000ef4  e003              B        |L1.3838|
                  |L1.3830|
;;;1158   	else temp_SL/=1000L;
000ef6  f44f7e7a          MOV      lr,#0x3e8
000efa  fb91f1fe          SDIV     r1,r1,lr
                  |L1.3838|
;;;1159   	#ifdef UKU_TELECORE2015
;;;1160   	temp_SL/=2L;
;;;1161   	temp_SL=-temp_SL;
;;;1162   	#endif
;;;1163   	bat[0]._Ib=(signed short)temp_SL;
000efe  f8a81008          STRH     r1,[r8,#8]
;;;1164   
;;;1165   	temp_SL=(signed long)ad7705_buff_[1];
000f02  f8ba1002          LDRH     r1,[r10,#2]  ; ad7705_buff_
;;;1166   	temp_SL-=(signed long)Kibat0[1];
000f06  f8bba002          LDRH     r10,[r11,#2]  ; Kibat0
000f0a  eba10a0a          SUB      r10,r1,r10
;;;1167   	temp_SL*=(signed long)Kibat1[1];
000f0e  f9b31002          LDRSH    r1,[r3,#2]  ; Kibat1
000f12  fb01f10a          MUL      r1,r1,r10
;;;1168   	if((AUSW_MAIN==24120)||(AUSW_MAIN==24210))temp_SL/=300L;
000f16  4560              CMP      r0,r12
000f18  d003              BEQ      |L1.3874|
000f1a  f5a043bc          SUB      r3,r0,#0x5e00
000f1e  3b92              SUBS     r3,r3,#0x92
000f20  d106              BNE      |L1.3888|
                  |L1.3874|
000f22  e000              B        |L1.3878|
                  |L1.3876|
000f24  e013              B        |L1.3918|
                  |L1.3878|
000f26  f44f7096          MOV      r0,#0x12c
000f2a  fb91f0f0          SDIV     r0,r1,r0
000f2e  e00c              B        |L1.3914|
                  |L1.3888|
;;;1169   	else if((AUSW_MAIN==22010)||(AUSW_MAIN==22035)||(AUSW_MAIN==22033))temp_SL/=2000L;
000f30  42a8              CMP      r0,r5
000f32  d003              BEQ      |L1.3900|
000f34  4290              CMP      r0,r2
000f36  d001              BEQ      |L1.3900|
000f38  42a0              CMP      r0,r4
000f3a  d102              BNE      |L1.3906|
                  |L1.3900|
000f3c  fb91f0f9          SDIV     r0,r1,r9
000f40  e003              B        |L1.3914|
                  |L1.3906|
;;;1170   	else temp_SL/=1000L;
000f42  f44f707a          MOV      r0,#0x3e8
000f46  fb91f0f0          SDIV     r0,r1,r0
                  |L1.3914|
;;;1171   	bat[1]._Ib=(signed short)temp_SL;
000f4a  f8a80054          STRH     r0,[r8,#0x54]
                  |L1.3918|
;;;1172   	}
;;;1173   
;;;1174   
;;;1175   
;;;1176   
;;;1177   
;;;1178   // 
;;;1179   
;;;1180   #ifdef UKU_KONTUR
;;;1181   if((adc_buff_[6]>800)&&(adc_buff_[6]<3800))bat[0]._nd=0;
;;;1182   else bat[0]._nd=1;
;;;1183   temp_SL=(signed long)adc_buff_[6];
;;;1184   temp_SL*=Ktbat[0];
;;;1185   temp_SL/=20000L;
;;;1186   temp_SL-=273L;
;;;1187   bat[0]._Tb=(signed short)temp_SL;
;;;1188   #else
;;;1189   if((adc_buff_[6]>800)&&(adc_buff_[6]<3800))bat[0]._nd=0;
000f4e  f8dfb364          LDR      r11,|L1.4788|
000f52  f6403eb7          MOV      lr,#0xbb7
000f56  2100              MOVS     r1,#0
000f58  f9bb000c          LDRSH    r0,[r11,#0xc]  ; adc_buff_
;;;1190   else bat[0]._nd=1;
000f5c  f04f0c01          MOV      r12,#1
000f60  4603              MOV      r3,r0                 ;1189
000f62  f2a03021          SUB      r0,r0,#0x321          ;1189
000f66  9000              STR      r0,[sp,#0]            ;1189
000f68  4570              CMP      r0,lr                 ;1189
000f6a  d202              BCS      |L1.3954|
000f6c  f888100c          STRB     r1,[r8,#0xc]          ;1189
000f70  e001              B        |L1.3958|
                  |L1.3954|
000f72  f888c00c          STRB     r12,[r8,#0xc]
                  |L1.3958|
;;;1191   temp_SL=(signed long)adc_buff_[6];
;;;1192   temp_SL*=Ktbat[0];
000f76  48d0              LDR      r0,|L1.4792|
000f78  f9b00000          LDRSH    r0,[r0,#0]  ; Ktbat
000f7c  4358              MULS     r0,r3,r0
;;;1193   temp_SL/=20000L;
000f7e  f6446a20          MOV      r10,#0x4e20
000f82  fb90f0fa          SDIV     r0,r0,r10
;;;1194   temp_SL-=273L;
000f86  f2a01011          SUB      r0,r0,#0x111
;;;1195   bat[0]._Tb=(signed short)temp_SL;
000f8a  f8a8000a          STRH     r0,[r8,#0xa]
;;;1196   #endif
;;;1197   
;;;1198   #ifdef UKU_KONTUR
;;;1199   if((adc_buff_[7]>800)&&(adc_buff_[7]<3800))bat[1]._nd=0;
;;;1200   else bat[1]._nd=1;
;;;1201   temp_SL=(signed long)adc_buff_[7];
;;;1202   temp_SL*=Ktbat[1];
;;;1203   temp_SL/=20000L;
;;;1204   temp_SL-=273L;
;;;1205   bat[1]._Tb=(signed short)temp_SL;
;;;1206   #else
;;;1207   if((adc_buff_[7]>800)&&(adc_buff_[7]<3800))bat[1]._nd=0;
000f8e  f9bb000e          LDRSH    r0,[r11,#0xe]  ; adc_buff_
000f92  f6403eb7          MOV      lr,#0xbb7
000f96  f2a03a21          SUB      r10,r0,#0x321
000f9a  45f2              CMP      r10,lr
000f9c  d202              BCS      |L1.4004|
000f9e  f8881058          STRB     r1,[r8,#0x58]
000fa2  e001              B        |L1.4008|
                  |L1.4004|
;;;1208   else bat[1]._nd=1;
000fa4  f888c058          STRB     r12,[r8,#0x58]
                  |L1.4008|
;;;1209   temp_SL=(signed long)adc_buff_[7];
;;;1210   temp_SL*=Ktbat[1];
000fa8  f8dfa30c          LDR      r10,|L1.4792|
000fac  f9baa002          LDRSH    r10,[r10,#2]  ; Ktbat
000fb0  fb0afa00          MUL      r10,r10,r0
;;;1211   temp_SL/=20000L;
000fb4  f6446020          MOV      r0,#0x4e20
000fb8  fb9af0f0          SDIV     r0,r10,r0
;;;1212   temp_SL-=273L;
000fbc  f2a01011          SUB      r0,r0,#0x111
;;;1213   bat[1]._Tb=(signed short)temp_SL;
000fc0  f8df82f8          LDR      r8,|L1.4796|
000fc4  f8a80056          STRH     r0,[r8,#0x56]
;;;1214   #endif
;;;1215   
;;;1216   #ifdef UKU_6U
;;;1217   
;;;1218   if(NUMMAKB==2)
;;;1219   	{
;;;1220   	if(makb[0]._cnt<5)
;;;1221   		{
;;;1222   		if(makb[0]._T_nd[0]==0)
;;;1223   			{
;;;1224   			bat[0]._Tb=makb[0]._T[0];
;;;1225   			bat[0]._nd=0;
;;;1226   			}
;;;1227   		}
;;;1228   
;;;1229   	if(makb[1]._cnt<5)
;;;1230   		{
;;;1231   		if(makb[1]._T_nd[0]==0)
;;;1232   			{
;;;1233   			bat[1]._Tb=makb[1]._T[0];
;;;1234   			bat[1]._nd=0;
;;;1235   			}
;;;1236   		}
;;;1237   
;;;1238   	}
;;;1239   else if(NUMMAKB==4)
;;;1240   	{
;;;1241   	signed short temp_t;
;;;1242   	temp_t=-20;
;;;1243   	if(makb[0]._cnt<5)
;;;1244   		{
;;;1245   		if(makb[0]._T_nd[0]==0)
;;;1246   			{
;;;1247   			temp_t=makb[0]._T[0];
;;;1248   			bat[0]._nd=0;
;;;1249   			}
;;;1250   		}
;;;1251   	if(makb[1]._cnt<5)
;;;1252   		{
;;;1253   		if(makb[1]._T_nd[0]==0)
;;;1254   			{
;;;1255   			if(temp_t<makb[1]._T[0])
;;;1256   				{
;;;1257   				bat[0]._nd=0;
;;;1258   				temp_t=makb[1]._T[0];
;;;1259   				}
;;;1260   			}
;;;1261   		}
;;;1262   	if(temp_t!=-20)bat[0]._Tb = temp_t;
;;;1263   
;;;1264    	temp_t=-20;
;;;1265   	if(makb[2]._cnt<5)
;;;1266   		{
;;;1267   		if(makb[2]._T_nd[0]==0)
;;;1268   			{
;;;1269   			temp_t=makb[2]._T[0];
;;;1270   			bat[1]._nd=0;
;;;1271   			}
;;;1272   		}
;;;1273   	if(makb[3]._cnt<5)
;;;1274   		{
;;;1275   		if(makb[3]._T_nd[0]==0)
;;;1276   			{
;;;1277   			if(temp_t<makb[3]._T[0])
;;;1278   				{
;;;1279   				bat[1]._nd=0;
;;;1280   				temp_t=makb[3]._T[0];
;;;1281   				}
;;;1282   			}
;;;1283   		}
;;;1284   	if(temp_t!=-20)bat[1]._Tb = temp_t;
;;;1285   	}
;;;1286   
;;;1287   #endif
;;;1288   
;;;1289   
;;;1290   // 
;;;1291   temp_SL=(signed long)adc_buff_[2];
000fc8  f9bb0004          LDRSH    r0,[r11,#4]  ; adc_buff_
;;;1292   temp_SL*=Kuload;
000fcc  f8df82f0          LDR      r8,|L1.4800|
000fd0  f9b88000          LDRSH    r8,[r8,#0]  ; Kuload
000fd4  fb00f808          MUL      r8,r0,r8
;;;1293   temp_SL/=2000L;
000fd8  f44f69fa          MOV      r9,#0x7d0
000fdc  fb98f8f9          SDIV     r8,r8,r9
;;;1294   load_U=(signed short)temp_SL;
000fe0  f8df92e0          LDR      r9,|L1.4804|
000fe4  f8a98000          STRH     r8,[r9,#0]
;;;1295   
;;;1296   #ifdef UKU_220 
;;;1297   // 
;;;1298   temp_SL=(signed long)adc_buff_[2];
;;;1299   temp_SL*=Kuload;
;;;1300   temp_SL/=350L;
;;;1301   load_U=(signed short)temp_SL;
;;;1302   #endif
;;;1303   
;;;1304   #ifdef UKU_220_V2 
;;;1305   // 
;;;1306   temp_SL=(signed long)adc_buff_[2];
;;;1307   temp_SL*=Kuload;
;;;1308   temp_SL/=350L;
;;;1309   load_U=(signed short)temp_SL;
;;;1310   #endif
;;;1311   
;;;1312   #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;1313   // 
;;;1314   temp_SL=(signed long)adc_buff_[1];
000fe8  f9bba002          LDRSH    r10,[r11,#2]  ; adc_buff_
;;;1315   temp_SL*=Kuout;
000fec  f8df82d8          LDR      r8,|L1.4808|
000ff0  f9b88000          LDRSH    r8,[r8,#0]  ; Kuout
000ff4  fb0afa08          MUL      r10,r10,r8
;;;1316   if(AUSW_MAIN==22010)temp_SL/=400L;
000ff8  f8df82b4          LDR      r8,|L1.4784|
000ffc  f8b88000          LDRH     r8,[r8,#0]  ; AUSW_MAIN
001000  45a8              CMP      r8,r5
001002  d104              BNE      |L1.4110|
001004  f44f7ec8          MOV      lr,#0x190
001008  fb9afafe          SDIV     r10,r10,lr
00100c  e001              B        |L1.4114|
                  |L1.4110|
;;;1317   else temp_SL/=500L;
00100e  fb9afaf6          SDIV     r10,r10,r6
                  |L1.4114|
;;;1318   out_U=(signed short)temp_SL;
001012  f8dfe2b8          LDR      lr,|L1.4812|
001016  fa0ffa8a          SXTH     r10,r10
00101a  f8aea000          STRH     r10,[lr,#0]
;;;1319   load_U=out_U;
00101e  f8a9a000          STRH     r10,[r9,#0]
;;;1320   
;;;1321   // 
;;;1322   temp_SL=(signed long)adc_buff_[2];
001022  46de              MOV      lr,r11
;;;1323   temp_SL*=Kubps;
001024  f8df92a8          LDR      r9,|L1.4816|
001028  f9b99000          LDRSH    r9,[r9,#0]  ; Kubps
00102c  fb00f009          MUL      r0,r0,r9
;;;1324   if(AUSW_MAIN==22010)temp_SL/=400L;
001030  d104              BNE      |L1.4156|
001032  f44f75c8          MOV      r5,#0x190
001036  fb90f0f5          SDIV     r0,r0,r5
00103a  e001              B        |L1.4160|
                  |L1.4156|
;;;1325   else temp_SL/=500L;
00103c  fb90f0f6          SDIV     r0,r0,r6
                  |L1.4160|
;;;1326   bps_U=(signed short)temp_SL;
001040  4da4              LDR      r5,|L1.4820|
001042  8028              STRH     r0,[r5,#0]
;;;1327   
;;;1328   //  
;;;1329   temp_SL=0;
001044  f04f0900          MOV      r9,#0
;;;1330   for (i=0;i<NUMIST;i++)
001048  464e              MOV      r6,r9
00104a  48a3              LDR      r0,|L1.4824|
00104c  4da3              LDR      r5,|L1.4828|
00104e  f9b00000          LDRSH    r0,[r0,#0]
001052  e00b              B        |L1.4204|
                  |L1.4180|
;;;1331   	{
;;;1332   	temp_SL+=((signed long)bps[i]._Ii);
001054  ebc60bc6          RSB      r11,r6,r6,LSL #3
001058  eb0b0b4b          ADD      r11,r11,r11,LSL #1
00105c  eb050b8b          ADD      r11,r5,r11,LSL #2
001060  f8dbb024          LDR      r11,[r11,#0x24]
001064  44d9              ADD      r9,r9,r11
001066  f1060601          ADD      r6,r6,#1              ;1330
00106a  b2f6              UXTB     r6,r6                 ;1330
                  |L1.4204|
00106c  4286              CMP      r6,r0                 ;1330
00106e  dbf1              BLT      |L1.4180|
;;;1333   	}
;;;1334   bps_I=(signed short)temp_SL;
001070  4e9b              LDR      r6,|L1.4832|
001072  f8a69000          STRH     r9,[r6,#0]
;;;1335   
;;;1336   
;;;1337   #endif
;;;1338   
;;;1339   
;;;1340   #ifdef UKU_KONTUR
;;;1341   //   1(  )
;;;1342   if((adc_buff_[5]>800)&&(adc_buff_[5]<3800))ND_EXT[0]=0;
;;;1343   else ND_EXT[0]=1;
;;;1344   temp_SL=(signed long)adc_buff_[5];
;;;1345   temp_SL*=Ktext[0];
;;;1346   temp_SL/=20000L;
;;;1347   temp_SL-=273L;
;;;1348   t_ext[0]=(signed short)temp_SL;
;;;1349   #else 
;;;1350   //   1(  )
;;;1351   if((adc_buff_[5]>800)&&(adc_buff_[5]<3800))ND_EXT[0]=0;
001076  f9beb00a          LDRSH    r11,[lr,#0xa]  ; adc_buff_
00107a  f6403eb7          MOV      lr,#0xbb7
00107e  f2ab3921          SUB      r9,r11,#0x321
001082  4e98              LDR      r6,|L1.4836|
001084  45f1              CMP      r9,lr
001086  d201              BCS      |L1.4236|
001088  6031              STR      r1,[r6,#0]  ; ND_EXT
00108a  e001              B        |L1.4240|
                  |L1.4236|
;;;1352   else ND_EXT[0]=1;
00108c  f8c6c000          STR      r12,[r6,#0]  ; ND_EXT
                  |L1.4240|
;;;1353   temp_SL=(signed long)adc_buff_[5];
;;;1354   temp_SL*=Ktext[0];
001090  f8df9254          LDR      r9,|L1.4840|
001094  f9b99000          LDRSH    r9,[r9,#0]  ; Ktext
001098  fb09fb0b          MUL      r11,r9,r11
;;;1355   temp_SL/=20000L;
00109c  f6446e20          MOV      lr,#0x4e20
0010a0  fb9bfbfe          SDIV     r11,r11,lr
;;;1356   temp_SL-=273L;
0010a4  f2ab1b11          SUB      r11,r11,#0x111
;;;1357   t_ext[0]=(signed short)temp_SL;
0010a8  f8dfe240          LDR      lr,|L1.4844|
0010ac  f8aeb000          STRH     r11,[lr,#0]
;;;1358   #endif
;;;1359   
;;;1360   #ifdef UKU_220
;;;1361   
;;;1362   //   2(  )
;;;1363   if((adc_buff_[3]>800)&&(adc_buff_[3]<3800))ND_EXT[1]=0;
;;;1364   else ND_EXT[1]=1;
;;;1365   temp_SL=(signed long)adc_buff_[3];
;;;1366   temp_SL*=Ktext[1];
;;;1367   temp_SL/=20000L;
;;;1368   temp_SL-=273L;
;;;1369   t_ext[1]=(signed short)temp_SL;
;;;1370   
;;;1371   //   3(  MSAN)
;;;1372   if((adc_buff_[10]>800)&&(adc_buff_[10]<3800))ND_EXT[2]=0;
;;;1373   else ND_EXT[2]=1;
;;;1374   temp_SL=(signed long)adc_buff_[10];
;;;1375   temp_SL*=Ktext[2];
;;;1376   temp_SL/=20000L;
;;;1377   temp_SL-=273L;
;;;1378   t_ext[2]=(signed short)temp_SL;
;;;1379   
;;;1380   #else
;;;1381   
;;;1382   
;;;1383   #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;1384   
;;;1385   //   
;;;1386   if((adc_buff_[6]>800)&&(adc_buff_[6]<3800))ND_EXT[0]=0;
0010b0  f8ddb000          LDR      r11,[sp,#0]
0010b4  f6403eb7          MOV      lr,#0xbb7
0010b8  45f3              CMP      r11,lr
0010ba  d201              BCS      |L1.4288|
0010bc  6031              STR      r1,[r6,#0]  ; ND_EXT
0010be  e001              B        |L1.4292|
                  |L1.4288|
;;;1387   else ND_EXT[0]=1;
0010c0  f8c6c000          STR      r12,[r6,#0]  ; ND_EXT
                  |L1.4292|
;;;1388   temp_SL=(signed long)adc_buff_[6];
;;;1389   temp_SL*=Ktext[0];
0010c4  fb09f903          MUL      r9,r9,r3
;;;1390   temp_SL/=20000L;
0010c8  f6446320          MOV      r3,#0x4e20
0010cc  fb99f3f3          SDIV     r3,r9,r3
;;;1391   temp_SL-=273L;
0010d0  f2a31311          SUB      r3,r3,#0x111
;;;1392   t_ext[0]=(signed short)temp_SL;
0010d4  f8dfc214          LDR      r12,|L1.4844|
0010d8  f8ac3000          STRH     r3,[r12,#0]
;;;1393   
;;;1394   #else
;;;1395   
;;;1396   
;;;1397   
;;;1398   //   2(  )
;;;1399   if((adc_buff_[10]>800)&&(adc_buff_[10]<3800))ND_EXT[1]=0;
;;;1400   else ND_EXT[1]=1;
;;;1401   temp_SL=(signed long)adc_buff_[10];
;;;1402   temp_SL*=Ktext[1];
;;;1403   temp_SL/=20000L;
;;;1404   temp_SL-=273L;
;;;1405   t_ext[1]=(signed short)temp_SL;
;;;1406   
;;;1407   //   3(  MSAN)
;;;1408   if((adc_buff_[3]>800)&&(adc_buff_[3]<3800))ND_EXT[2]=0;
;;;1409   else ND_EXT[2]=1;
;;;1410   temp_SL=(signed long)adc_buff_[3];
;;;1411   temp_SL*=Ktext[2];
;;;1412   temp_SL/=20000L;
;;;1413   temp_SL-=273L;
;;;1414   t_ext[2]=(signed short)temp_SL;
;;;1415   
;;;1416   #endif
;;;1417   #endif
;;;1418   
;;;1419   #ifdef UKU_220_V2
;;;1420   
;;;1421   //   2(  )
;;;1422   if((adc_buff_[3]>800)&&(adc_buff_[3]<3800))ND_EXT[1]=0;
;;;1423   else ND_EXT[1]=1;
;;;1424   temp_SL=(signed long)adc_buff_[3];
;;;1425   temp_SL*=Ktext[1];
;;;1426   temp_SL/=20000L;
;;;1427   temp_SL-=273L;
;;;1428   t_ext[1]=(signed short)temp_SL;
;;;1429   
;;;1430   //   3(  MSAN)
;;;1431   if((adc_buff_[10]>800)&&(adc_buff_[10]<3800))ND_EXT[2]=0;
;;;1432   else ND_EXT[2]=1;
;;;1433   temp_SL=(signed long)adc_buff_[10];
;;;1434   temp_SL*=Ktext[2];
;;;1435   temp_SL/=20000L;
;;;1436   temp_SL-=273L;
;;;1437   t_ext[2]=(signed short)temp_SL;
;;;1438   
;;;1439   #else
;;;1440   
;;;1441   #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;1442   // 
;;;1443   if(bps[8]._device==dIBAT_METR)
0010dc  f89532a0          LDRB     r3,[r5,#0x2a0]  ; bps
;;;1444   	{
;;;1445   	ibat_metr_buff_[0]=((signed long)bps[8]._buff[0])+(((signed long)bps[8]._buff[1])<<8);
;;;1446   	ibat_metr_buff_[1]=((signed long)bps[8]._buff[2])+(((signed long)bps[8]._buff[3])<<8);
;;;1447   	bIBAT_SMKLBR=((signed short)bps[8]._buff[4])+(((signed short)bps[8]._buff[5])<<8);
;;;1448   
;;;1449   	if(!bIBAT_SMKLBR)
;;;1450   		{
;;;1451   		signed long temp_SL;
;;;1452   		temp_SL=(signed long)ibat_metr_buff_[0];
;;;1453   		temp_SL-=(signed long)ibat_metr_buff_[1];
;;;1454   		temp_SL*=(signed long)Kibat1[0];
;;;1455   		if((AUSW_MAIN==22010)||(AUSW_MAIN==22011)||(AUSW_MAIN==22035)||(AUSW_MAIN==22033)||(AUSW_MAIN==22063)||(AUSW_MAIN==22023)||(AUSW_MAIN==22043))temp_SL/=2000L;
;;;1456   	
;;;1457   		Ib_ips_termokompensat =(signed short)temp_SL;
0010e0  f8dfe20c          LDR      lr,|L1.4848|
0010e4  2b09              CMP      r3,#9                 ;1443
0010e6  d140              BNE      |L1.4458|
0010e8  f89532a6          LDRB     r3,[r5,#0x2a6]        ;1445  ; bps
0010ec  f895c2a7          LDRB     r12,[r5,#0x2a7]       ;1445  ; bps
0010f0  f8df9200          LDR      r9,|L1.4852|
0010f4  eb03230c          ADD      r3,r3,r12,LSL #8      ;1445
0010f8  f8c93000          STR      r3,[r9,#0]            ;1445  ; ibat_metr_buff_
0010fc  f895c2a8          LDRB     r12,[r5,#0x2a8]       ;1446  ; bps
001100  f895b2a9          LDRB     r11,[r5,#0x2a9]       ;1446  ; bps
001104  eb0c2c0b          ADD      r12,r12,r11,LSL #8    ;1446
001108  f8c9c004          STR      r12,[r9,#4]           ;1446  ; ibat_metr_buff_
00110c  f89592aa          LDRB     r9,[r5,#0x2aa]        ;1447  ; bps
001110  f895b2ab          LDRB     r11,[r5,#0x2ab]       ;1447  ; bps
001114  eb09290b          ADD      r9,r9,r11,LSL #8      ;1447
001118  f8dfb1dc          LDR      r11,|L1.4856|
00111c  fa0ff989          SXTH     r9,r9                 ;1447
001120  f8ab9000          STRH     r9,[r11,#0]           ;1447
001124  f1b90f00          CMP      r9,#0                 ;1449
001128  d11f              BNE      |L1.4458|
00112a  eba30c0c          SUB      r12,r3,r12            ;1453
00112e  4b5f              LDR      r3,|L1.4780|
001130  f9b33000          LDRSH    r3,[r3,#0]            ;1454  ; Kibat1
001134  fb03f30c          MUL      r3,r3,r12             ;1454
001138  f5a84ca8          SUB      r12,r8,#0x5400        ;1455
00113c  f5bc7cfd          SUBS     r12,r12,#0x1fa        ;1455
001140  d00d              BEQ      |L1.4446|
001142  f1bc0c01          SUBS     r12,r12,#1            ;1455
001146  d00a              BEQ      |L1.4446|
001148  4590              CMP      r8,r2                 ;1455
00114a  d008              BEQ      |L1.4446|
00114c  45a0              CMP      r8,r4                 ;1455
00114e  d006              BEQ      |L1.4446|
001150  f1bc0234          SUBS     r2,r12,#0x34          ;1455
001154  d003              BEQ      |L1.4446|
001156  3228              ADDS     r2,r2,#0x28           ;1455
001158  d001              BEQ      |L1.4446|
00115a  3a14              SUBS     r2,r2,#0x14           ;1455
00115c  d103              BNE      |L1.4454|
                  |L1.4446|
00115e  f44f62fa          MOV      r2,#0x7d0             ;1455
001162  fb93f3f2          SDIV     r3,r3,r2              ;1455
                  |L1.4454|
001166  f8ae3000          STRH     r3,[lr,#0]
                  |L1.4458|
;;;1458   		}
;;;1459   	}
;;;1460   
;;;1461   bat[0]._Ub=load_U;
00116a  f8dfc150          LDR      r12,|L1.4796|
00116e  f8aca002          STRH     r10,[r12,#2]
;;;1462   bat[0]._Ib=Ib_ips_termokompensat;
001172  f9be2000          LDRSH    r2,[lr,#0]  ; Ib_ips_termokompensat
001176  f8ac2008          STRH     r2,[r12,#8]
;;;1463   
;;;1464   #endif
;;;1465   #endif
;;;1466   
;;;1467   
;;;1468   #ifdef UKU_TELECORE2015
;;;1469   
;;;1470   //   1
;;;1471   if((adc_buff_[7]>800)&&(adc_buff_[7]<3800))ND_EXT[0]=0;
;;;1472   else ND_EXT[0]=1;
;;;1473   temp_SL=(signed long)adc_buff_[7];
;;;1474   temp_SL*=Ktext[0];
;;;1475   temp_SL/=20000L;
;;;1476   temp_SL-=273L;
;;;1477   t_ext[0]=(signed short)temp_SL;
;;;1478   
;;;1479   
;;;1480   //   2
;;;1481   if((adc_buff_[6]>800)&&(adc_buff_[6]<3800))ND_EXT[1]=0;
;;;1482   else ND_EXT[1]=1;
;;;1483   temp_SL=(signed long)adc_buff_[6];
;;;1484   temp_SL*=Ktext[1];
;;;1485   temp_SL/=20000L;
;;;1486   temp_SL-=273L;
;;;1487   t_ext[1]=(signed short)temp_SL;
;;;1488   
;;;1489   #endif
;;;1490   
;;;1491   // 
;;;1492   temp_SL=(signed long)adc_buff_ext_[0];
00117a  f8df8180          LDR      r8,|L1.4860|
00117e  f8b84000          LDRH     r4,[r8,#0]  ; adc_buff_ext_
;;;1493   temp_SL*=Kunet_ext[0];
001182  f8df917c          LDR      r9,|L1.4864|
001186  f9b93000          LDRSH    r3,[r9,#0]  ; Kunet_ext
00118a  4363              MULS     r3,r4,r3
;;;1494   temp_SL/=4000L;
00118c  f44f6e7a          MOV      lr,#0xfa0
001190  fb93f3fe          SDIV     r3,r3,lr
;;;1495   Uvv[0]=(signed short)temp_SL;
001194  4c5b              LDR      r4,|L1.4868|
001196  b29b              UXTH     r3,r3
001198  8023              STRH     r3,[r4,#0]
;;;1496   if(Uvv[0]<100) Uvv0=Uvv[0];
00119a  f8dfb16c          LDR      r11,|L1.4872|
00119e  2b64              CMP      r3,#0x64
0011a0  d202              BCS      |L1.4520|
0011a2  f8ab3000          STRH     r3,[r11,#0]
0011a6  e003              B        |L1.4528|
                  |L1.4520|
;;;1497   else Uvv0=net_U;
0011a8  4b58              LDR      r3,|L1.4876|
0011aa  881b              LDRH     r3,[r3,#0]  ; net_U
0011ac  f8ab3000          STRH     r3,[r11,#0]
                  |L1.4528|
;;;1498   
;;;1499   // 
;;;1500   temp_SL=(signed long)adc_buff_ext_[1];
0011b0  f8b88002          LDRH     r8,[r8,#2]  ; adc_buff_ext_
;;;1501   temp_SL*=Kunet_ext[1];
0011b4  f9b93002          LDRSH    r3,[r9,#2]  ; Kunet_ext
0011b8  fb03f308          MUL      r3,r3,r8
;;;1502   temp_SL/=4000L;
0011bc  fb93f3fe          SDIV     r3,r3,lr
;;;1503   Uvv[1]=(signed short)temp_SL;
0011c0  8063              STRH     r3,[r4,#2]
;;;1504   
;;;1505   
;;;1506   //  
;;;1507   temp_SL=(signed long)eb2_data_short[0];
0011c2  4c53              LDR      r4,|L1.4880|
0011c4  f9b43000          LDRSH    r3,[r4,#0]  ; eb2_data_short
;;;1508   temp_SL*=Kvv_eb2[0];
0011c8  f8df8148          LDR      r8,|L1.4884|
0011cc  f9b89000          LDRSH    r9,[r8,#0]  ; Kvv_eb2
0011d0  fb09f903          MUL      r9,r9,r3
;;;1509   temp_SL/=6000L;
0011d4  f2417370          MOV      r3,#0x1770
0011d8  fb99fbf3          SDIV     r11,r9,r3
;;;1510   Uvv_eb2[0]=(signed short)temp_SL;
0011dc  f8df9138          LDR      r9,|L1.4888|
0011e0  f8a9b000          STRH     r11,[r9,#0]
;;;1511   
;;;1512   temp_SL=(signed long)eb2_data_short[1];
0011e4  f9b4e002          LDRSH    lr,[r4,#2]  ; eb2_data_short
;;;1513   temp_SL*=Kvv_eb2[1];
0011e8  f9b8b002          LDRSH    r11,[r8,#2]  ; Kvv_eb2
0011ec  fb0bfb0e          MUL      r11,r11,lr
;;;1514   temp_SL/=6000L;
0011f0  fb9bfbf3          SDIV     r11,r11,r3
;;;1515   Uvv_eb2[1]=(signed short)temp_SL;
0011f4  f8a9b002          STRH     r11,[r9,#2]
;;;1516   
;;;1517   temp_SL=(signed long)eb2_data_short[2];
0011f8  f9b4b004          LDRSH    r11,[r4,#4]  ; eb2_data_short
;;;1518   temp_SL*=Kvv_eb2[2];
0011fc  f9b88004          LDRSH    r8,[r8,#4]  ; Kvv_eb2
001200  fb08f80b          MUL      r8,r8,r11
;;;1519   temp_SL/=6000L;
001204  fb98f8f3          SDIV     r8,r8,r3
;;;1520   Uvv_eb2[2]=(signed short)temp_SL;
001208  f8a98004          STRH     r8,[r9,#4]
;;;1521   
;;;1522   //  
;;;1523   temp_SL=(signed long)eb2_data_short[3];
00120c  f9b4b006          LDRSH    r11,[r4,#6]  ; eb2_data_short
;;;1524   temp_SL*=Kpes_eb2[0];
001210  f8df8108          LDR      r8,|L1.4892|
001214  f9b89000          LDRSH    r9,[r8,#0]  ; Kpes_eb2
001218  fb09f90b          MUL      r9,r9,r11
;;;1525   temp_SL/=6000L;
00121c  fb99fbf3          SDIV     r11,r9,r3
;;;1526   Upes_eb2[0]=(signed short)temp_SL;
001220  f8df90fc          LDR      r9,|L1.4896|
001224  f8a9b000          STRH     r11,[r9,#0]
;;;1527   
;;;1528   temp_SL=(signed long)eb2_data_short[4];
001228  f9b4e008          LDRSH    lr,[r4,#8]  ; eb2_data_short
;;;1529   temp_SL*=Kpes_eb2[1];
00122c  f9b8b002          LDRSH    r11,[r8,#2]  ; Kpes_eb2
001230  fb0bfb0e          MUL      r11,r11,lr
;;;1530   temp_SL/=6000L;
001234  fb9bfbf3          SDIV     r11,r11,r3
;;;1531   Upes_eb2[1]=(signed short)temp_SL;
001238  f8a9b002          STRH     r11,[r9,#2]
;;;1532   
;;;1533   temp_SL=(signed long)eb2_data_short[5];
00123c  f9b4b00a          LDRSH    r11,[r4,#0xa]  ; eb2_data_short
;;;1534   temp_SL*=Kpes_eb2[2];
001240  f9b84004          LDRSH    r4,[r8,#4]  ; Kpes_eb2
001244  fb04f40b          MUL      r4,r4,r11
;;;1535   temp_SL/=6000L;
001248  fb94f3f3          SDIV     r3,r4,r3
;;;1536   Upes_eb2[2]=(signed short)temp_SL;
00124c  f8a93004          STRH     r3,[r9,#4]
;;;1537   
;;;1538   //  
;;;1539   
;;;1540   ibt._T[0]=t_ext[1]+273;
001250  4c26              LDR      r4,|L1.4844|
001252  f8dfb0d0          LDR      r11,|L1.4900|
001256  8863              LDRH     r3,[r4,#2]  ; t_ext
001258  f2031311          ADD      r3,r3,#0x111
00125c  fa0ff883          SXTH     r8,r3
001260  f8ab8000          STRH     r8,[r11,#0]
;;;1541   ibt._T[1]=t_ext[2]+273;
001264  88a3              LDRH     r3,[r4,#4]  ; t_ext
001266  f2031311          ADD      r3,r3,#0x111
00126a  fa0ff983          SXTH     r9,r3
00126e  f8ab9002          STRH     r9,[r11,#2]
;;;1542   
;;;1543   ibt._nd[0]=ND_EXT[1];
001272  6873              LDR      r3,[r6,#4]  ; ND_EXT
001274  b2dc              UXTB     r4,r3
001276  f88b4008          STRB     r4,[r11,#8]
;;;1544   ibt._nd[1]=ND_EXT[2];
00127a  68b3              LDR      r3,[r6,#8]  ; ND_EXT
00127c  b2db              UXTB     r3,r3
00127e  f88b3009          STRB     r3,[r11,#9]
;;;1545   
;;;1546   #ifndef UKU_TELECORE2015
;;;1547   if((ibt._nd[0]==0) &&  (ibt._nd[1]==0))
;;;1548   	{
;;;1549   	t_box=((ibt._T[0]+ibt._T[1])/2)-273;
001282  4e29              LDR      r6,|L1.4904|
001284  b904              CBNZ     r4,|L1.4744|
001286  b113              CBZ      r3,|L1.4750|
                  |L1.4744|
;;;1550   	}
;;;1551   else if((ibt._nd[0]==1) &&  (ibt._nd[1]==0))
001288  2c01              CMP      r4,#1
00128a  d04f              BEQ      |L1.4908|
00128c  e04f              B        |L1.4910|
                  |L1.4750|
00128e  eb080309          ADD      r3,r8,r9              ;1549
001292  eb0373d3          ADD      r3,r3,r3,LSR #31      ;1549
001296  f46f7488          MVN      r4,#0x110             ;1549
00129a  eb040363          ADD      r3,r4,r3,ASR #1       ;1549
00129e  8033              STRH     r3,[r6,#0]            ;1549
0012a0  e063              B        |L1.4970|
0012a2  0000              DCW      0x0000
                  |L1.4772|
                          DCD      ad7705_buff_
                  |L1.4776|
                          DCD      Kibat0
                  |L1.4780|
                          DCD      Kibat1
                  |L1.4784|
                          DCD      AUSW_MAIN
                  |L1.4788|
                          DCD      ||.bss||+0x400
                  |L1.4792|
                          DCD      Ktbat
                  |L1.4796|
                          DCD      bat
                  |L1.4800|
                          DCD      Kuload
                  |L1.4804|
                          DCD      load_U
                  |L1.4808|
                          DCD      Kuout
                  |L1.4812|
                          DCD      out_U
                  |L1.4816|
                          DCD      Kubps
                  |L1.4820|
                          DCD      bps_U
                  |L1.4824|
                          DCD      NUMIST
                  |L1.4828|
                          DCD      bps
                  |L1.4832|
                          DCD      bps_I
                  |L1.4836|
                          DCD      ND_EXT
                  |L1.4840|
                          DCD      Ktext
                  |L1.4844|
                          DCD      t_ext
                  |L1.4848|
                          DCD      Ib_ips_termokompensat
                  |L1.4852|
                          DCD      ibat_metr_buff_
                  |L1.4856|
                          DCD      bIBAT_SMKLBR
                  |L1.4860|
                          DCD      adc_buff_ext_
                  |L1.4864|
                          DCD      Kunet_ext
                  |L1.4868|
                          DCD      Uvv
                  |L1.4872|
                          DCD      Uvv0
                  |L1.4876|
                          DCD      net_U
                  |L1.4880|
                          DCD      eb2_data_short
                  |L1.4884|
                          DCD      Kvv_eb2
                  |L1.4888|
                          DCD      Uvv_eb2
                  |L1.4892|
                          DCD      Kpes_eb2
                  |L1.4896|
                          DCD      Upes_eb2
                  |L1.4900|
                          DCD      ibt
                  |L1.4904|
                          DCD      t_box
                  |L1.4908|
00132c  b10b              CBZ      r3,|L1.4914|
                  |L1.4910|
;;;1552   	{
;;;1553   	t_box=ibt._T[1]-273;
;;;1554   	}
;;;1555   else if((ibt._nd[0]==0) &&  (ibt._nd[1]==1))
00132e  b12c              CBZ      r4,|L1.4924|
001330  e006              B        |L1.4928|
                  |L1.4914|
001332  f2a91911          SUB      r9,r9,#0x111          ;1553
001336  f8a69000          STRH     r9,[r6,#0]            ;1553
00133a  e016              B        |L1.4970|
                  |L1.4924|
00133c  2b01              CMP      r3,#1
00133e  d002              BEQ      |L1.4934|
                  |L1.4928|
;;;1556   	{
;;;1557   	t_box=ibt._T[0]-273;
;;;1558   	}
;;;1559   else if((ibt._nd[0]==1) &&  (ibt._nd[1]==1))
001340  2c01              CMP      r4,#1
001342  d005              BEQ      |L1.4944|
001344  e011              B        |L1.4970|
                  |L1.4934|
001346  f2a81811          SUB      r8,r8,#0x111          ;1557
00134a  f8a68000          STRH     r8,[r6,#0]            ;1557
00134e  e00c              B        |L1.4970|
                  |L1.4944|
001350  2b01              CMP      r3,#1
001352  d10a              BNE      |L1.4970|
;;;1560   	{
;;;1561   	if(t_ext_can_nd<5)t_box= t_ext_can;
001354  4bfb              LDR      r3,|L1.5956|
001356  781b              LDRB     r3,[r3,#0]  ; t_ext_can_nd
001358  2b05              CMP      r3,#5
00135a  d203              BCS      |L1.4964|
00135c  4bfa              LDR      r3,|L1.5960|
00135e  881b              LDRH     r3,[r3,#0]  ; t_ext_can
001360  8033              STRH     r3,[r6,#0]
001362  e002              B        |L1.4970|
                  |L1.4964|
;;;1562   	else t_box=20;
001364  f04f0314          MOV      r3,#0x14
001368  8033              STRH     r3,[r6,#0]
                  |L1.4970|
;;;1563   	}
;;;1564   #endif
;;;1565   /*
;;;1566   //  
;;;1567   
;;;1568   ibt._T[0]=bat[0]._Tb+273;
;;;1569   ibt._T[1]=bat[1]._Tb+273;
;;;1570   ibt._T[2]=t_ext[1]+273;
;;;1571   ibt._T[3]=t_ext[2]+273;
;;;1572   
;;;1573   ibt._nd[0]=bat[0]._nd;
;;;1574   ibt._nd[1]=bat[1]._nd;
;;;1575   ibt._nd[2]=ND_EXT[1];
;;;1576   ibt._nd[3]=ND_EXT[2];
;;;1577   
;;;1578   ibt._avg1=0;
;;;1579   ibt._avg_cnt=4;
;;;1580   
;;;1581   if(ibt._nd[0]==0)
;;;1582   	{
;;;1583   	ibt._avg1+=ibt._T[0];
;;;1584   	}
;;;1585   else 
;;;1586   	{
;;;1587   	ibt._avg_cnt--;
;;;1588   	}
;;;1589   
;;;1590   if(ibt._nd[1]==0)
;;;1591   	{
;;;1592   	ibt._avg1+=ibt._T[1];
;;;1593   	}
;;;1594   else 
;;;1595   	{
;;;1596   	ibt._avg_cnt--;
;;;1597   	}
;;;1598   
;;;1599   if(ibt._nd[2]==0)
;;;1600   	{
;;;1601   	ibt._avg1+=ibt._T[2];
;;;1602   	}
;;;1603   else 
;;;1604   	{
;;;1605   	ibt._avg_cnt--;
;;;1606   	}
;;;1607   
;;;1608   if(ibt._nd[3]==0)
;;;1609   	{
;;;1610   	ibt._avg1+=ibt._T[3];
;;;1611   	}
;;;1612   else 
;;;1613   	{
;;;1614   	ibt._avg_cnt--;
;;;1615   	}
;;;1616   
;;;1617   if(ibt._avg_cnt==0)
;;;1618   	{
;;;1619   	}
;;;1620   else
;;;1621   	{
;;;1622   	ibt._avg1/=ibt._avg_cnt;
;;;1623   	}
;;;1624   
;;;1625   
;;;1626   if(ibt._nd[0]!=0)
;;;1627   	{
;;;1628   	ibt._T_dispers[0]=0;
;;;1629   	}
;;;1630   else 
;;;1631   	{
;;;1632   	ibt._T_dispers[0]=abs(ibt._T[0]-ibt._avg1);
;;;1633   	}
;;;1634   
;;;1635   if(ibt._nd[1]!=0)
;;;1636   	{
;;;1637   	ibt._T_dispers[1]=0;
;;;1638   	}
;;;1639   else 
;;;1640   	{
;;;1641   	ibt._T_dispers[1]=abs(ibt._T[1]-ibt._avg1);
;;;1642   	}
;;;1643   
;;;1644   if(ibt._nd[2]!=0)
;;;1645   	{
;;;1646   	ibt._T_dispers[2]=0;
;;;1647   	}
;;;1648   else 
;;;1649   	{
;;;1650   	ibt._T_dispers[2]=abs(ibt._T[2]-ibt._avg1);
;;;1651   	}
;;;1652   
;;;1653   if(ibt._nd[3]!=0)
;;;1654   	{
;;;1655   	ibt._T_dispers[3]=0;
;;;1656   	}
;;;1657   else 
;;;1658   	{
;;;1659   	ibt._T_dispers[3]=abs(ibt._T[3]-ibt._avg1);
;;;1660   	}
;;;1661   
;;;1662   if(	ibt._nd[0]&&
;;;1663   	ibt._nd[1]&&
;;;1664   	ibt._nd[2]&&
;;;1665   	ibt._nd[3]
;;;1666   	)
;;;1667   	{
;;;1668   	t_box=(bps[0]._Ti);
;;;1669   	}
;;;1670   
;;;1671   else if(	ibt._nd[0]||
;;;1672   	ibt._nd[1]||
;;;1673   	ibt._nd[2]||
;;;1674   	ibt._nd[3]
;;;1675   	)
;;;1676   	{
;;;1677   	t_box=(ibt._avg1-273);
;;;1678   	}
;;;1679   else 
;;;1680   	{
;;;1681   	ibt._max_dispers_num=0;
;;;1682   	ibt._max_dispers=ibt._T_dispers[0];
;;;1683   
;;;1684   	if(ibt._T_dispers[1]>ibt._max_dispers)
;;;1685   		{
;;;1686   		ibt._max_dispers_num=1;
;;;1687   		ibt._max_dispers=ibt._T_dispers[1];
;;;1688   		}
;;;1689   	if(ibt._T_dispers[2]>ibt._max_dispers)
;;;1690   		{
;;;1691   		ibt._max_dispers_num=2;
;;;1692   		ibt._max_dispers=ibt._T_dispers[2];
;;;1693   		}
;;;1694   	if(ibt._T_dispers[3]>ibt._max_dispers)
;;;1695   		{
;;;1696   		ibt._max_dispers_num=3;
;;;1697   		ibt._max_dispers=ibt._T_dispers[3];
;;;1698   		}
;;;1699   
;;;1700   	ibt._avg2=0;
;;;1701   
;;;1702   	if(ibt._max_dispers_num!=0)
;;;1703   		{
;;;1704   		ibt._avg2+=ibt._T[0];
;;;1705   		}
;;;1706   	if(ibt._max_dispers_num!=1)
;;;1707   		{
;;;1708   		ibt._avg2+=ibt._T[1];
;;;1709   		}
;;;1710   	if(ibt._max_dispers_num!=2)
;;;1711   		{
;;;1712   		ibt._avg2+=ibt._T[2];
;;;1713   		}
;;;1714   	if(ibt._max_dispers_num!=3)
;;;1715   		{
;;;1716   		ibt._avg2+=ibt._T[3];
;;;1717   		}
;;;1718   
;;;1719   	t_box=(ibt._avg2/3)-273;
;;;1720   
;;;1721   	}*/
;;;1722   
;;;1723   
;;;1724   //*********************************************
;;;1725   
;;;1726   #ifndef TELECORE
;;;1727   if((BAT_IS_ON[0]==bisON)&&(bat[0]._Ub>200)) Ibmax=bat[0]._Ib;
00136a  4cf8              LDR      r4,|L1.5964|
00136c  7823              LDRB     r3,[r4,#0]  ; BAT_IS_ON
00136e  2b55              CMP      r3,#0x55
001370  d103              BNE      |L1.4986|
001372  f1ba0fc8          CMP      r10,#0xc8
001376  dd00              BLE      |L1.4986|
001378  86fa              STRH     r2,[r7,#0x36]
                  |L1.4986|
;;;1728   if((BAT_IS_ON[1]==bisON)&&(bat[1]._Ub>200)&&(bat[1]._Ib>bat[0]._Ib)) Ibmax=bat[1]._Ib;
00137a  7863              LDRB     r3,[r4,#1]  ; BAT_IS_ON
00137c  2b55              CMP      r3,#0x55
00137e  d108              BNE      |L1.5010|
001380  f9bc304e          LDRSH    r3,[r12,#0x4e]  ; bat
001384  2bc8              CMP      r3,#0xc8
001386  dd04              BLE      |L1.5010|
001388  f9bc3054          LDRSH    r3,[r12,#0x54]  ; bat
00138c  4293              CMP      r3,r2
00138e  dd00              BLE      |L1.5010|
001390  86fb              STRH     r3,[r7,#0x36]
                  |L1.5010|
;;;1729   #endif
;;;1730   
;;;1731   #ifdef TELECORE
;;;1732   Ibmax=0;
;;;1733   /*
;;;1734   if((NUMBAT_TELECORE>0)&&(lakb[0]._communicationFullErrorStat==0)&&(lakb[0]._ch_curr/10>Ibmax))Ibmax=lakb[0]._ch_curr/10;
;;;1735   if((NUMBAT_TELECORE>1)&&(lakb[1]._communicationFullErrorStat==0)&&(lakb[1]._ch_curr/10>Ibmax))Ibmax=lakb[1]._ch_curr/10;
;;;1736   if((NUMBAT_TELECORE>2)&&(lakb[2]._communicationFullErrorStat==0)&&(lakb[2]._ch_curr/10>Ibmax))Ibmax=lakb[2]._ch_curr/10;
;;;1737   */
;;;1738   if((NUMBAT_TELECORE>0)&&(bat[0]._Ib/10>Ibmax))Ibmax=bat[0]._Ib/10;
;;;1739   if((NUMBAT_TELECORE>1)&&(bat[1]._Ib/10>Ibmax))Ibmax=bat[1]._Ib/10;
;;;1740   //if((BAT_IS_ON[0]==bisON)&&(bat[0]._Ub>200)) Ibmax=bat[0]._Ib/1;
;;;1741   //if((BAT_IS_ON[1]==bisON)&&(bat[1]._Ub>200)&&(bat[1]._Ib>bat[0]._Ib)) Ibmax=bat[1]._Ib;
;;;1742   #endif
;;;1743   //Ibmax=bat[0]._Ib;
;;;1744   //if((AUSW_MAIN==22063)||(AUSW_MAIN==22023)||(AUSW_MAIN==22043))Ibmax=Ib_ips_termokompensat;
;;;1745   #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;1746   Ibmax=Ib_ips_termokompensat;
001392  86fa              STRH     r2,[r7,#0x36]
;;;1747   #endif
;;;1748   for(i=0;i<NUMIST;i++)
001394  f04f0400          MOV      r4,#0
001398  e02f              B        |L1.5114|
                  |L1.5018|
;;;1749   	{
;;;1750   	if(bps[i]._cnt<25)
00139a  ebc403c4          RSB      r3,r4,r4,LSL #3
00139e  eb030343          ADD      r3,r3,r3,LSL #1
0013a2  eb050383          ADD      r3,r5,r3,LSL #2
0013a6  78de              LDRB     r6,[r3,#3]
0013a8  2e19              CMP      r6,#0x19
0013aa  d21c              BCS      |L1.5094|
;;;1751        	{
;;;1752        	bps[i]._Ii=bps[i]._buff[0]+(bps[i]._buff[1]*256);
0013ac  799e              LDRB     r6,[r3,#6]
0013ae  79df              LDRB     r7,[r3,#7]
0013b0  eb062607          ADD      r6,r6,r7,LSL #8
0013b4  625e              STR      r6,[r3,#0x24]
;;;1753        	bps[i]._Uin=bps[i]._buff[2]+(bps[i]._buff[3]*256);
0013b6  7a1e              LDRB     r6,[r3,#8]
0013b8  7a5f              LDRB     r7,[r3,#9]
0013ba  eb062607          ADD      r6,r6,r7,LSL #8
0013be  621e              STR      r6,[r3,#0x20]
;;;1754        	bps[i]._Uii=bps[i]._buff[4]+(bps[i]._buff[5]*256);
0013c0  7a9e              LDRB     r6,[r3,#0xa]
0013c2  7adf              LDRB     r7,[r3,#0xb]
0013c4  eb062607          ADD      r6,r6,r7,LSL #8
0013c8  61de              STR      r6,[r3,#0x1c]
;;;1755        	bps[i]._Ti=(signed)(bps[i]._buff[6]);
0013ca  7b1e              LDRB     r6,[r3,#0xc]
0013cc  629e              STR      r6,[r3,#0x28]
;;;1756        	bps[i]._adr_ee=bps[i]._buff[7];
0013ce  7b5e              LDRB     r6,[r3,#0xd]
0013d0  f8836052          STRB     r6,[r3,#0x52]
;;;1757        	bps[i]._flags_tm=bps[i]._buff[8];
0013d4  7b9e              LDRB     r6,[r3,#0xe]
0013d6  f8836042          STRB     r6,[r3,#0x42]
;;;1758   	     bps[i]._rotor=bps[i]._buff[10]+(bps[i]._buff[11]*256);    
0013da  7c1e              LDRB     r6,[r3,#0x10]
0013dc  7c5f              LDRB     r7,[r3,#0x11]
0013de  eb062607          ADD      r6,r6,r7,LSL #8
0013e2  64de              STR      r6,[r3,#0x4c]
0013e4  e006              B        |L1.5108|
                  |L1.5094|
;;;1759        	} 
;;;1760   	else 
;;;1761        	{
;;;1762        	bps[i]._Uii=0; 
0013e6  61d9              STR      r1,[r3,#0x1c]
;;;1763        	bps[i]._Ii=0;
0013e8  6259              STR      r1,[r3,#0x24]
;;;1764        	bps[i]._Uin=0;
0013ea  6219              STR      r1,[r3,#0x20]
;;;1765        	bps[i]._Ti=0;
0013ec  6299              STR      r1,[r3,#0x28]
;;;1766        	bps[i]._flags_tm=0; 
0013ee  f8831042          STRB     r1,[r3,#0x42]
;;;1767   	     bps[i]._rotor=0;    
0013f2  64d9              STR      r1,[r3,#0x4c]
                  |L1.5108|
0013f4  f1040401          ADD      r4,r4,#1              ;1748
0013f8  b2e4              UXTB     r4,r4                 ;1748
                  |L1.5114|
0013fa  4284              CMP      r4,r0                 ;1748
0013fc  dbcd              BLT      |L1.5018|
;;;1768        	}
;;;1769        
;;;1770        }
;;;1771   
;;;1772   
;;;1773   #ifdef TELECORE
;;;1774   load_I=0;
;;;1775   for(i=0;i<NUMBAT_TELECORE;i++)
;;;1776   	{
;;;1777   	load_I-=lakb[i]._ch_curr/10;
;;;1778   	}
;;;1779   load_I=-(bat[0]._Ib/10)-(bat[1]._Ib/10);
;;;1780   #else
;;;1781   load_I=-(bat[0]._Ib/10)-(bat[1]._Ib/10);
0013fe  f04f030a          MOV      r3,#0xa
001402  fb92f2f3          SDIV     r2,r2,r3
001406  f9bc4054          LDRSH    r4,[r12,#0x54]  ; bat
00140a  4ed1              LDR      r6,|L1.5968|
00140c  fb94f3f3          SDIV     r3,r4,r3
001410  441a              ADD      r2,r2,r3
001412  f1c20200          RSB      r2,r2,#0
001416  b217              SXTH     r7,r2
001418  8037              STRH     r7,[r6,#0]
;;;1782   #endif
;;;1783   Isumm=0;
00141a  4cce              LDR      r4,|L1.5972|
00141c  8021              STRH     r1,[r4,#0]
;;;1784   
;;;1785   for(i=0;i<NUMIST;i++)
00141e  f04f0200          MOV      r2,#0
001422  e012              B        |L1.5194|
                  |L1.5156|
;;;1786        {
;;;1787        if(bps[i]._cnt<5)Isumm+=bps[i]._Ii;
001424  ebc203c2          RSB      r3,r2,r2,LSL #3
001428  eb030343          ADD      r3,r3,r3,LSL #1
00142c  eb050383          ADD      r3,r5,r3,LSL #2
001430  f893c003          LDRB     r12,[r3,#3]
001434  f1bc0f05          CMP      r12,#5
001438  d204              BCS      |L1.5188|
00143a  6a5b              LDR      r3,[r3,#0x24]
00143c  f8b4c000          LDRH     r12,[r4,#0]  ; Isumm
001440  4463              ADD      r3,r3,r12
001442  8023              STRH     r3,[r4,#0]
                  |L1.5188|
001444  f1020201          ADD      r2,r2,#1              ;1785
001448  b2d2              UXTB     r2,r2                 ;1785
                  |L1.5194|
00144a  4282              CMP      r2,r0                 ;1785
00144c  dbea              BLT      |L1.5156|
;;;1788        }  
;;;1789        
;;;1790   load_I=load_I+Isumm;
00144e  8822              LDRH     r2,[r4,#0]  ; Isumm
001450  443a              ADD      r2,r2,r7
001452  b212              SXTH     r2,r2
001454  8032              STRH     r2,[r6,#0]
;;;1791   if(load_I<0)load_I=0;
001456  2a00              CMP      r2,#0
001458  da00              BGE      |L1.5212|
00145a  8031              STRH     r1,[r6,#0]
                  |L1.5212|
;;;1792   
;;;1793   #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;1794   load_I=0;
00145c  8031              STRH     r1,[r6,#0]
;;;1795   
;;;1796   Isumm=0;
00145e  8021              STRH     r1,[r4,#0]
;;;1797   
;;;1798   for(i=0;i<NUMIST;i++)
001460  f04f0200          MOV      r2,#0
001464  e00f              B        |L1.5254|
                  |L1.5222|
;;;1799        {
;;;1800        if(bps[i]._cnt<5)Isumm+=bps[i]._Ii;
001466  ebc203c2          RSB      r3,r2,r2,LSL #3
00146a  eb030343          ADD      r3,r3,r3,LSL #1
00146e  eb050383          ADD      r3,r5,r3,LSL #2
001472  78df              LDRB     r7,[r3,#3]
001474  2f05              CMP      r7,#5
001476  d203              BCS      |L1.5248|
001478  6a5b              LDR      r3,[r3,#0x24]
00147a  8827              LDRH     r7,[r4,#0]  ; Isumm
00147c  443b              ADD      r3,r3,r7
00147e  8023              STRH     r3,[r4,#0]
                  |L1.5248|
001480  f1020201          ADD      r2,r2,#1              ;1798
001484  b2d2              UXTB     r2,r2                 ;1798
                  |L1.5254|
001486  4282              CMP      r2,r0                 ;1798
001488  dbed              BLT      |L1.5222|
;;;1801        }  
;;;1802        
;;;1803   load_I=load_I+Isumm;
00148a  8822              LDRH     r2,[r4,#0]  ; Isumm
00148c  eb010002          ADD      r0,r1,r2
001490  b200              SXTH     r0,r0
001492  8030              STRH     r0,[r6,#0]
;;;1804   if(load_I<0)load_I=0;
001494  2800              CMP      r0,#0
001496  da00              BGE      |L1.5274|
001498  8031              STRH     r1,[r6,#0]
                  |L1.5274|
;;;1805   
;;;1806   #endif
;;;1807   
;;;1808   
;;;1809   
;;;1810   #ifdef UKU_GLONASS
;;;1811   inv[0]._Uio=6;
;;;1812   if (NUMINV)
;;;1813   	{
;;;1814   	for(i=0;i<NUMINV;i++)
;;;1815   		{
;;;1816   		if(bps[i+first_inv_slot]._cnt<25)
;;;1817        		{
;;;1818        		inv[i]._Ii=bps[i+first_inv_slot]._buff[0]+(bps[i+first_inv_slot]._buff[1]*256);
;;;1819        		inv[i]._Uin=bps[i+first_inv_slot]._buff[2]+(bps[i+first_inv_slot]._buff[3]*256);
;;;1820        		inv[i]._Uio=bps[i+first_inv_slot]._buff[4]+(bps[i+first_inv_slot]._buff[5]*256);
;;;1821        		inv[i]._Ti=(signed)(bps[i+first_inv_slot]._buff[6]);
;;;1822        		inv[i]._flags_tm=bps[i+first_inv_slot]._buff[8];
;;;1823   	    	//	inv[i]._rotor=bps[i+first_inv_slot]._buff[10]+(bps[i+first_inv_slot]._buff[11]*256);
;;;1824   			inv[i]._cnt=0;    
;;;1825        		} 
;;;1826   		else 
;;;1827        		{
;;;1828        		inv[i]._Uio=0; 
;;;1829        		inv[i]._Ii=0;
;;;1830        		inv[i]._Uin=0;
;;;1831        		inv[i]._Ti=0;
;;;1832        		inv[i]._flags_tm=0; 
;;;1833   //	     	inv[i]._rotor0;
;;;1834   			inv[i]._cnt=25;    
;;;1835        		}
;;;1836        	}
;;;1837      	}
;;;1838   #endif
;;;1839   
;;;1840   #ifndef UKU_GLONASS
;;;1841   if (NUMINV)
00149a  48af              LDR      r0,|L1.5976|
00149c  f9b04000          LDRSH    r4,[r0,#0]  ; NUMINV
0014a0  2c00              CMP      r4,#0
0014a2  d066              BEQ      |L1.5490|
;;;1842   	{
;;;1843   	for(i=0;i<NUMINV;i++)
0014a4  f04f0300          MOV      r3,#0
;;;1844   		{
;;;1845   		if(bps[i+20]._cnt<25)
;;;1846        		{
;;;1847        		inv[i]._Ii=bps[i+20]._buff[0]+(bps[i+20]._buff[1]*256);
0014a8  4eac              LDR      r6,|L1.5980|
0014aa  e060              B        |L1.5486|
                  |L1.5292|
0014ac  f1030014          ADD      r0,r3,#0x14           ;1845
0014b0  ebc000c0          RSB      r0,r0,r0,LSL #3       ;1845
0014b4  eb000040          ADD      r0,r0,r0,LSL #1       ;1845
0014b8  eb050080          ADD      r0,r5,r0,LSL #2       ;1845
0014bc  78c2              LDRB     r2,[r0,#3]            ;1845
0014be  2a19              CMP      r2,#0x19              ;1845
0014c0  d239              BCS      |L1.5430|
0014c2  7982              LDRB     r2,[r0,#6]
0014c4  79c7              LDRB     r7,[r0,#7]
0014c6  eb022707          ADD      r7,r2,r7,LSL #8
0014ca  eb030243          ADD      r2,r3,r3,LSL #1
0014ce  eb061242          ADD      r2,r6,r2,LSL #5
0014d2  61d7              STR      r7,[r2,#0x1c]
;;;1848        		inv[i]._Pio=bps[i+20]._buff[2]+(bps[i+20]._buff[3]*256);
0014d4  7a07              LDRB     r7,[r0,#8]
0014d6  f890c009          LDRB     r12,[r0,#9]
0014da  eb07270c          ADD      r7,r7,r12,LSL #8
0014de  62d7              STR      r7,[r2,#0x2c]
;;;1849        		inv[i]._Uio=bps[i+20]._buff[4]+(bps[i+20]._buff[5]*256);
0014e0  7a87              LDRB     r7,[r0,#0xa]
0014e2  f890c00b          LDRB     r12,[r0,#0xb]
0014e6  eb07270c          ADD      r7,r7,r12,LSL #8
0014ea  6197              STR      r7,[r2,#0x18]
;;;1850        		inv[i]._Ti=(signed)(bps[i+20]._buff[6]);
0014ec  7b07              LDRB     r7,[r0,#0xc]
0014ee  6217              STR      r7,[r2,#0x20]
;;;1851        		inv[i]._flags_tm=bps[i+20]._buff[7];
0014f0  7b47              LDRB     r7,[r0,#0xd]
0014f2  f8827046          STRB     r7,[r2,#0x46]
;;;1852        		inv[i]._Uin=bps[i+20]._buff[8]+(bps[i+20]._buff[9]*256);
0014f6  7b87              LDRB     r7,[r0,#0xe]
0014f8  f890c00f          LDRB     r12,[r0,#0xf]
0014fc  eb07270c          ADD      r7,r7,r12,LSL #8
001500  6297              STR      r7,[r2,#0x28]
;;;1853        		inv[i]._Uil=bps[i+20]._buff[10]+(bps[i+20]._buff[11]*256);
001502  7c07              LDRB     r7,[r0,#0x10]
001504  f890c011          LDRB     r12,[r0,#0x11]
001508  eb07270c          ADD      r7,r7,r12,LSL #8
00150c  6257              STR      r7,[r2,#0x24]
;;;1854   			inv[i]._cnt=0;
00150e  7091              STRB     r1,[r2,#2]
;;;1855   			inv[i]._Uoutmin=bps[i+20]._buff[12]; 
001510  7c87              LDRB     r7,[r0,#0x12]
001512  f8827059          STRB     r7,[r2,#0x59]
;;;1856   			inv[i]._Uoutmax=bps[i+20]._buff[13]; 
001516  7cc7              LDRB     r7,[r0,#0x13]
001518  f882705a          STRB     r7,[r2,#0x5a]
;;;1857   			inv[i]._Pnom=bps[i+20]._buff[14]; 
00151c  7d07              LDRB     r7,[r0,#0x14]
00151e  f8827058          STRB     r7,[r2,#0x58]
;;;1858   			inv[i]._net_contr_en=bps[i+20]._buff[15];
001522  7d47              LDRB     r7,[r0,#0x15]
001524  f882705b          STRB     r7,[r2,#0x5b]
;;;1859   			inv[i]._pwm_en=bps[i+20]._buff[16];  
001528  7d87              LDRB     r7,[r0,#0x16]
00152a  f882705c          STRB     r7,[r2,#0x5c]
;;;1860   			inv[i]._phase_mode=bps[i+20]._buff[17];  
00152e  7dc0              LDRB     r0,[r0,#0x17]
001530  f882005d          STRB     r0,[r2,#0x5d]
001534  e018              B        |L1.5480|
                  |L1.5430|
;;;1861        		} 
;;;1862   		else 
;;;1863        		{
;;;1864         		inv[i]._Ii=0;
001536  eb030043          ADD      r0,r3,r3,LSL #1
00153a  eb061040          ADD      r0,r6,r0,LSL #5
00153e  61c1              STR      r1,[r0,#0x1c]
;;;1865   			inv[i]._Pio=0;
001540  62c1              STR      r1,[r0,#0x2c]
;;;1866   			inv[i]._Uio=0;
001542  6181              STR      r1,[r0,#0x18]
;;;1867        		inv[i]._Ti=0;
001544  6201              STR      r1,[r0,#0x20]
;;;1868        		inv[i]._flags_tm=0; 
001546  f8801046          STRB     r1,[r0,#0x46]
;;;1869        		inv[i]._Uil=0;
00154a  6241              STR      r1,[r0,#0x24]
;;;1870        		inv[i]._Uin=0;
00154c  6281              STR      r1,[r0,#0x28]
;;;1871   			inv[i]._cnt=25; 
00154e  f04f0219          MOV      r2,#0x19
001552  7082              STRB     r2,[r0,#2]
;;;1872   			inv[i]._Uoutmin=0; 
001554  f8801059          STRB     r1,[r0,#0x59]
;;;1873   			inv[i]._Uoutmax=0; 
001558  f880105a          STRB     r1,[r0,#0x5a]
;;;1874   			inv[i]._Pnom=0; 
00155c  f8801058          STRB     r1,[r0,#0x58]
;;;1875   			inv[i]._net_contr_en=0;
001560  f880105b          STRB     r1,[r0,#0x5b]
;;;1876   			inv[i]._pwm_en=0;   
001564  f880105c          STRB     r1,[r0,#0x5c]
                  |L1.5480|
001568  f1030301          ADD      r3,r3,#1              ;1843
00156c  b2db              UXTB     r3,r3                 ;1843
                  |L1.5486|
00156e  42a3              CMP      r3,r4                 ;1843
001570  db9c              BLT      |L1.5292|
                  |L1.5490|
;;;1877   			   
;;;1878        		}
;;;1879        	}
;;;1880      	}
;;;1881   #endif
;;;1882   
;;;1883   #ifdef GLADKOV
;;;1884   inv[0]._Ii=bps[4]._buff[0]+(bps[4]._buff[1]*256);
;;;1885   inv[0]._Pio=bps[4]._buff[2]+(bps[4]._buff[3]*256);
;;;1886   inv[0]._Uio=bps[4]._buff[4]+(bps[4]._buff[5]*256);
;;;1887   inv[0]._Ti=(signed)(bps[4]._buff[6]);
;;;1888   inv[0]._flags_tm=bps[4]._buff[7];
;;;1889   inv[0]._Uin=bps[4]._buff[8]+(bps[4]._buff[9]*256);
;;;1890   inv[0]._Uil=bps[4]._buff[10]+(bps[4]._buff[11]*256);
;;;1891   inv[0]._cnt=0;    
;;;1892   
;;;1893   inv[1]._Ii=bps[21]._buff[0]+(bps[21]._buff[1]*256);
;;;1894   inv[1]._Pio=bps[21]._buff[2]+(bps[21]._buff[3]*256);
;;;1895   inv[1]._Uio=bps[21]._buff[4]+(bps[21]._buff[5]*256);
;;;1896   inv[1]._Ti=(signed)(bps[21]._buff[6]);
;;;1897   inv[1]._flags_tm=bps[21]._buff[7];
;;;1898   inv[1]._Uin=bps[21]._buff[8]+(bps[21]._buff[9]*256);
;;;1899   inv[1]._Uil=bps[21]._buff[10]+(bps[21]._buff[11]*256);
;;;1900   inv[1]._cnt=0;    
;;;1901   #endif
;;;1902   
;;;1903   /*
;;;1904   if((BAT_IS_ON[0]==bisON)&&(BAT_TYPE==1))
;;;1905   	{
;;;1906   	lakb[0]._battCommState=0;
;;;1907   	if(lakb[0]._cnt>10)lakb[0]._battCommState=2;
;;;1908   	else if(lakb[0]._bRS485ERR==1)lakb[0]._battCommState=1;
;;;1909   	
;;;1910   	if(lakb[0]._battCommState==0)
;;;1911   		{	
;;;1912   		bat[0]._Ub=(signed short)((lakb[0]._tot_bat_volt+5)/10);
;;;1913   		bat[0]._Ib=(signed short)lakb[0]._ch_curr;
;;;1914   		if(lakb[0]._dsch_curr) bat[0]._Ib=(signed short) (-lakb[0]._dsch_curr);
;;;1915   		bat[0]._Tb=(signed short)lakb[0]._max_cell_temp;
;;;1916   		}
;;;1917   	}
;;;1918   */
;;;1919   
;;;1920   #ifdef UKU_TELECORE2015
;;;1921   
;;;1922   	if(BAT_TYPE==2)
;;;1923   		{
;;;1924   		lakb[0]._ch_curr/*temp_SS*/=((ascii2halFhex(liBatteryInBuff[113]))<<12)+
;;;1925   					 		((ascii2halFhex(liBatteryInBuff[114]))<<8)+
;;;1926   							((ascii2halFhex(liBatteryInBuff[115]))<<4)+
;;;1927   							((ascii2halFhex(liBatteryInBuff[116])));
;;;1928   		
;;;1929   		/*if(temp_SS&0x8000)		lakb[0]._ch_curr=~temp_SS;
;;;1930   		else 				lakb[0]._ch_curr=temp_SS;*/
;;;1931   	
;;;1932   		lakb[0]._tot_bat_volt=	(unsigned short)(((ascii2halFhex(liBatteryInBuff[117]))<<12)+
;;;1933   							((ascii2halFhex(liBatteryInBuff[118]))<<8)+
;;;1934   							((ascii2halFhex(liBatteryInBuff[119]))<<4)+
;;;1935   							((ascii2halFhex(liBatteryInBuff[120]))))/100;
;;;1936   	
;;;1937   		lakb[0]._max_cell_temp= 	(((ascii2halFhex(liBatteryInBuff[93]))<<12)+
;;;1938   							((ascii2halFhex(liBatteryInBuff[94]))<<8)+
;;;1939   							((ascii2halFhex(liBatteryInBuff[95]))<<4)+
;;;1940   							((ascii2halFhex(liBatteryInBuff[96]))))/10-273;
;;;1941   	
;;;1942   		lakb[0]._s_o_c_abs=		(unsigned short)((ascii2halFhex(liBatteryInBuff[121]))<<12)+
;;;1943   							((ascii2halFhex(liBatteryInBuff[122]))<<8)+
;;;1944   							((ascii2halFhex(liBatteryInBuff[123]))<<4)+
;;;1945   							((ascii2halFhex(liBatteryInBuff[124])));
;;;1946   	
;;;1947   		lakb[0]._rat_cap=		(unsigned short)((ascii2halFhex(liBatteryInBuff[127]))<<12)+
;;;1948   							((ascii2halFhex(liBatteryInBuff[128]))<<8)+
;;;1949   							((ascii2halFhex(liBatteryInBuff[129]))<<4)+
;;;1950   							((ascii2halFhex(liBatteryInBuff[130])));
;;;1951   	
;;;1952   		lakb[0]._s_o_c=		lakb[0]._s_o_c_abs/(lakb[0]._rat_cap/100);
;;;1953   	
;;;1954   	
;;;1955   	/*	lakb[0]._rat_cap= (lakb_damp[i][13]*256)+ lakb_damp[i][14];
;;;1956   		lakb[0]._max_cell_volt= (lakb_damp[i][0]*256)+ lakb_damp[i][1];
;;;1957   		lakb[0]._min_cell_volt= (lakb_damp[i][2]*256)+ lakb_damp[i][3];
;;;1958   		lakb[0]._max_cell_temp= lakb_damp[i][4];
;;;1959   		lakb[0]._min_cell_temp= lakb_damp[i][5];
;;;1960   		lakb[0]._tot_bat_volt= (lakb_damp[i][6]*256)+ lakb_damp[i][7];
;;;1961   		lakb[0]._ch_curr= (lakb_damp[i][8]*256)+ lakb_damp[i][8];
;;;1962   		lakb[0]._dsch_curr= (lakb_damp[i][10]*256)+ lakb_damp[i][11];
;;;1963   		lakb[0]._s_o_c= lakb_damp[i][12];
;;;1964   		lakb[0]._r_b_t= lakb_damp[i][15];
;;;1965   		lakb[0]._c_c_l_v= (lakb_damp[i][16]*256)+ lakb_damp[i][17];
;;;1966   		lakb[0]._s_o_h= lakb_damp[i][18];
;;;1967   	
;;;1968   		if(lakb[i]._rat_cap==0)
;;;1969   			{
;;;1970   			if(lakb[i]._isOnCnt)
;;;1971   				{
;;;1972   				lakb[i]._isOnCnt--;
;;;1973   				if(lakb[i]._isOnCnt==0)
;;;1974   					{
;;;1975   					if(lakb[i]._battIsOn!=0) bLAKB_KONF_CH=1;
;;;1976   					}
;;;1977   				}
;;;1978   			}
;;;1979   		else 
;;;1980   			{
;;;1981   			if(lakb[i]._isOnCnt<50)
;;;1982   				{
;;;1983   				lakb[i]._isOnCnt++;
;;;1984   				if(lakb[i]._isOnCnt==50)
;;;1985   					{
;;;1986   					if(lakb[i]._battIsOn!=1) bLAKB_KONF_CH=1;
;;;1987   					}
;;;1988   				}
;;;1989   			}
;;;1990   		gran(&lakb[i]._isOnCnt,0,50);*/
;;;1991   		}
;;;1992   	else if(BAT_TYPE==3)
;;;1993   		{
;;;1994   		//short numOfPacks;
;;;1995   		//short numOfCells, numOfTemperCells, baseOfData;
;;;1996   		
;;;1997   		#ifndef UKU_TELECORE2016
;;;1998   		numOfCells=((ascii2halFhex(liBatteryInBuff[17]))<<4)+((ascii2halFhex(liBatteryInBuff[18])));
;;;1999   		numOfTemperCells=((ascii2halFhex(liBatteryInBuff[17+(numOfCells*4)+2]))<<4)+((ascii2halFhex(liBatteryInBuff[18+(numOfCells*4)+2])));
;;;2000   		numOfPacks=((ascii2halFhex(liBatteryInBuff[15]))<<4)+((ascii2halFhex(liBatteryInBuff[16])));
;;;2001   		if(numOfPacks)numOfPacks-=1;
;;;2002   		if((numOfPacks<0)||(numOfPacks>NUMBAT_TELECORE))numOfPacks=0;
;;;2003   		plazma_numOfCells=numOfCells;
;;;2004   		plazma_numOfTemperCells=numOfTemperCells;
;;;2005   		plazma_numOfPacks=numOfPacks;
;;;2006   
;;;2007   
;;;2008   		baseOfData=16+(numOfCells*4)+2+(numOfTemperCells*4)+2;
;;;2009   
;;;2010   		lakb[numOfPacks]._ch_curr=(signed short)(
;;;2011   							((ascii2halFhex(liBatteryInBuff[1+baseOfData]))<<12)+
;;;2012   							((ascii2halFhex(liBatteryInBuff[2+baseOfData]))<<8)+
;;;2013   							((ascii2halFhex(liBatteryInBuff[3+baseOfData]))<<4)+
;;;2014   							((ascii2halFhex(liBatteryInBuff[4+baseOfData])))
;;;2015   							);	  
;;;2016   
;;;2017   		lakb[numOfPacks]._tot_bat_volt=(signed short)(
;;;2018   							((ascii2halFhex(liBatteryInBuff[1+baseOfData+4]))<<12)+
;;;2019   							((ascii2halFhex(liBatteryInBuff[2+baseOfData+4]))<<8)+
;;;2020   							((ascii2halFhex(liBatteryInBuff[3+baseOfData+4]))<<4)+
;;;2021   							((ascii2halFhex(liBatteryInBuff[4+baseOfData+4])))
;;;2022   							)/10;
;;;2023   
;;;2024   		lakb[numOfPacks]._max_cell_temp=(signed short)(
;;;2025   							((ascii2halFhex(liBatteryInBuff[1+baseOfData-4]))<<12)+
;;;2026   							((ascii2halFhex(liBatteryInBuff[2+baseOfData-4]))<<8)+
;;;2027   							((ascii2halFhex(liBatteryInBuff[3+baseOfData-4]))<<4)+
;;;2028   							((ascii2halFhex(liBatteryInBuff[4+baseOfData-4])))
;;;2029   							)-2730;
;;;2030   
;;;2031   		lakb[numOfPacks]._s_o_c=(signed short)(
;;;2032   							((ascii2halFhex(liBatteryInBuff[1+baseOfData+8]))<<12)+
;;;2033   							((ascii2halFhex(liBatteryInBuff[2+baseOfData+8]))<<8)+
;;;2034   							((ascii2halFhex(liBatteryInBuff[3+baseOfData+8]))<<4)+
;;;2035   							((ascii2halFhex(liBatteryInBuff[4+baseOfData+8])))
;;;2036   							)/10;
;;;2037   
;;;2038   		lakb[numOfPacks]._s_o_h=(signed short)(
;;;2039   							((ascii2halFhex(liBatteryInBuff[1+baseOfData+14]))<<12)+
;;;2040   							((ascii2halFhex(liBatteryInBuff[2+baseOfData+14]))<<8)+
;;;2041   							((ascii2halFhex(liBatteryInBuff[3+baseOfData+14]))<<4)+
;;;2042   							((ascii2halFhex(liBatteryInBuff[4+baseOfData+14])))
;;;2043   							)/10;
;;;2044   		#endif								  
;;;2045   		}
;;;2046   	
;;;2047   if(sacredSunSilentCnt<3) 
;;;2048   	{
;;;2049       	bat[0]._Ub=lakb[0]._tot_bat_volt;
;;;2050       	bat[0]._Tb=lakb[0]._max_cell_temp;
;;;2051      	//bat[0]._Ib=lakb[0]._ch_curr/10;
;;;2052   	}
;;;2053   else 
;;;2054   	{
;;;2055       	//bat[0]._Ub=0;
;;;2056       	//bat[0]._Tb=0;
;;;2057      	//bat[0]._Ib=0;
;;;2058   	}
;;;2059   
;;;2060   if(BAT_TYPE==1)
;;;2061   	{
;;;2062   	char i;
;;;2063   	for(i=0;i<1;i++)
;;;2064   		{
;;;2065   		lakb[i]._rat_cap= (lakb_damp[i][13]*256)+ lakb_damp[i][14];
;;;2066   		lakb[i]._max_cell_volt= (lakb_damp[i][0]*256)+ lakb_damp[i][1];
;;;2067   		lakb[i]._min_cell_volt= (lakb_damp[i][2]*256)+ lakb_damp[i][3];
;;;2068   		lakb[i]._max_cell_temp= lakb_damp[i][4];
;;;2069   		lakb[i]._min_cell_temp= lakb_damp[i][5];
;;;2070   		lakb[i]._tot_bat_volt= (lakb_damp[i][6]*256)+ lakb_damp[i][7];
;;;2071   		lakb[i]._ch_curr= (lakb_damp[i][8]*256)+ lakb_damp[i][9];
;;;2072   		lakb[i]._dsch_curr= (lakb_damp[i][10]*256)+ lakb_damp[i][11];
;;;2073   		lakb[i]._s_o_c= lakb_damp[i][12];
;;;2074   		lakb[i]._r_b_t= lakb_damp[i][15];
;;;2075   		lakb[i]._c_c_l_v= (lakb_damp[i][16]*256)+ lakb_damp[i][17];
;;;2076   		lakb[i]._s_o_h= lakb_damp[i][18];
;;;2077   		lakb[i]._flags1= lakb_damp[i][34];
;;;2078   		lakb[i]._flags2= lakb_damp[i][35];
;;;2079   		lakb[i]._b_p_ser_num= lakb_damp[i][36];
;;;2080   
;;;2081   /*		if(lakb[i]._rat_cap==0)
;;;2082   			{
;;;2083   			if(lakb[i]._isOnCnt)
;;;2084   				{
;;;2085   				lakb[i]._isOnCnt--;
;;;2086   				if(lakb[i]._isOnCnt==0)
;;;2087   					{
;;;2088   					if(lakb[i]._battIsOn!=0) bLAKB_KONF_CH=1;
;;;2089   					}
;;;2090   				}
;;;2091   			}
;;;2092   		else 
;;;2093   			{
;;;2094   			if(lakb[i]._isOnCnt<50)
;;;2095   				{
;;;2096   				lakb[i]._isOnCnt++;
;;;2097   				if(lakb[i]._isOnCnt==50)
;;;2098   					{
;;;2099   					if(lakb[i]._battIsOn!=1) bLAKB_KONF_CH=1;
;;;2100   					}
;;;2101   				}
;;;2102   			} */
;;;2103   		gran(&lakb[i]._isOnCnt,0,50);
;;;2104   	 	}
;;;2105   
;;;2106   	if(lakb_damp[0][41]==100)
;;;2107   		{
;;;2108   		li_bat._485Error=1;
;;;2109   		}
;;;2110   	if(lakb_damp[0][41]==0)
;;;2111   		{
;;;2112   		//if(bRS485ERR)bLAKB_KONF_CH=1;
;;;2113   		li_bat._485Error=0;
;;;2114   		}
;;;2115   	li_bat._485ErrorCnt=lakb_damp[0][41];
;;;2116   
;;;2117   
;;;2118   	}
;;;2119   
;;;2120   
;;;2121   #endif
;;;2122   
;;;2123   
;;;2124   #ifdef UKU_TELECORE2015
;;;2125   //   
;;;2126   //TODO          
;;;2127   li_bat._batStat=bsOK;
;;;2128   if(BAT_TYPE==1) //COSLIGHT
;;;2129   	{
;;;2130   	if(li_bat._batStat==bsOK)
;;;2131   		{
;;;2132   		li_bat._Ub=lakb[0]._tot_bat_volt/10;
;;;2133   
;;;2134   		if(lakb[0]._ch_curr)li_bat._Ib=lakb[0]._ch_curr/10;
;;;2135   		else if(lakb[0]._dsch_curr) li_bat._Ib=bat[0]._Ib/10;//lakb[0]._dsch_curr/10;
;;;2136   	
;;;2137   		li_bat._ratCap=lakb[0]._rat_cap/100;
;;;2138   		li_bat._soc=lakb[0]._s_o_c;
;;;2139   		li_bat._soh=lakb[0]._s_o_h;
;;;2140   		li_bat._cclv=lakb[0]._c_c_l_v/10;
;;;2141   		li_bat._Tb=lakb[0]._max_cell_temp;
;;;2142   		li_bat._rbt=lakb[0]._r_b_t;
;;;2143   		}
;;;2144   	else 
;;;2145   		{
;;;2146   		li_bat._Ub=bat[0]._Ub;
;;;2147   		li_bat._Ib=bat[0]._Ib/10;
;;;2148   		li_bat._Tb=bat[0]._Tb;
;;;2149   		}
;;;2150   
;;;2151   	if((li_bat._485Error)||(li_bat._canError))
;;;2152   		{
;;;2153   		li_bat._batStat=bsOFF;
;;;2154   		}
;;;2155   	else li_bat._batStat=bsOK;
;;;2156   	}
;;;2157   else if(BAT_TYPE==2) //SACRED SUN
;;;2158   	{
;;;2159   	}
;;;2160   else if(BAT_TYPE==3) //ZTT
;;;2161   	{
;;;2162   	if(li_bat._batStat==bsOK)
;;;2163   		{
;;;2164   
;;;2165   		}
;;;2166   	}
;;;2167   #endif
;;;2168   
;;;2169   
;;;2170   /*
;;;2171   if((BAT_IS_ON[0]==bisON)&&(BAT_TYPE[0]==1)&&(BAT_LINK==0))
;;;2172   	{
;;;2173   
;;;2174   
;;;2175   	if(bat_drv_rx_buff[13]<=0x39)bbb[0]=bat_drv_rx_buff[13]-0x30;
;;;2176   	else bbb[0]=bat_drv_rx_buff[13]-55;
;;;2177   	if(bat_drv_rx_buff[14]<=0x39)bbb[1]=bat_drv_rx_buff[14]-0x30;
;;;2178   	else bbb[1]=bat_drv_rx_buff[14]-55;
;;;2179   	if(bat_drv_rx_buff[15]<=0x39)bbb[2]=bat_drv_rx_buff[15]-0x30;
;;;2180   	else bbb[2]=bat_drv_rx_buff[15]-55;
;;;2181   	if(bat_drv_rx_buff[16]<=0x39)bbb[3]=bat_drv_rx_buff[16]-0x30;
;;;2182   	else bbb[3]=bat_drv_rx_buff[16]-55;
;;;2183   
;;;2184   	tempSS=0;
;;;2185   	tempSS=((bbb[0]*4096)+(bbb[1]*256)+(bbb[2]*16)+bbb[3]);
;;;2186   
;;;2187   	bat[0]._max_cell_volt=(tempSS+5)/10;
;;;2188   
;;;2189   	if(bat_drv_rx_buff[17]<=0x39)bbb[0]=bat_drv_rx_buff[17]-0x30;
;;;2190   	else bbb[0]=bat_drv_rx_buff[17]-55;
;;;2191   	if(bat_drv_rx_buff[18]<=0x39)bbb[1]=bat_drv_rx_buff[18]-0x30;
;;;2192   	else bbb[1]=bat_drv_rx_buff[18]-55;
;;;2193   	if(bat_drv_rx_buff[19]<=0x39)bbb[2]=bat_drv_rx_buff[19]-0x30;
;;;2194   	else bbb[2]=bat_drv_rx_buff[19]-55;
;;;2195   	if(bat_drv_rx_buff[20]<=0x39)bbb[3]=bat_drv_rx_buff[20]-0x30;
;;;2196   	else bbb[3]=bat_drv_rx_buff[20]-55;
;;;2197   
;;;2198   	tempSS=0;
;;;2199   	tempSS=((bbb[0]*4096)+(bbb[1]*256)+(bbb[2]*16)+bbb[3]);
;;;2200   
;;;2201   	bat[0]._min_cell_volt=(tempSS+5)/10;
;;;2202   
;;;2203   
;;;2204   	}*/
;;;2205   
;;;2206   
;;;2207   
;;;2208   }
001572  e8bd9fff          POP      {r0-r12,pc}
;;;2209   
                          ENDP

                  mnemo_hndl PROC
;;;2210   //-----------------------------------------------
;;;2211   void mnemo_hndl(void)
001576  4a7a              LDR      r2,|L1.5984|
;;;2212   {
;;;2213   if(((ind==iMn_220)||(ind==iMn))&&(sub_ind==0)&&(MNEMO_ON==mnON))
;;;2214   	{
;;;2215   	if(mnemo_cnt)mnemo_cnt--;
001578  497a              LDR      r1,|L1.5988|
00157a  7810              LDRB     r0,[r2,#0]            ;2213  ; a_ind
00157c  2804              CMP      r0,#4                 ;2213
00157e  d001              BEQ      |L1.5508|
001580  2801              CMP      r0,#1                 ;2213
001582  d105              BNE      |L1.5520|
                  |L1.5508|
001584  7850              LDRB     r0,[r2,#1]            ;2213  ; a_ind
001586  b918              CBNZ     r0,|L1.5520|
001588  4877              LDR      r0,|L1.5992|
00158a  7800              LDRB     r0,[r0,#0]            ;2213  ; MNEMO_ON
00158c  2855              CMP      r0,#0x55              ;2213
00158e  d003              BEQ      |L1.5528|
                  |L1.5520|
;;;2216   	}
;;;2217   else mnemo_cnt=MNEMO_TIME;
001590  4876              LDR      r0,|L1.5996|
001592  8800              LDRH     r0,[r0,#0]  ; MNEMO_TIME
001594  7008              STRB     r0,[r1,#0]
                  |L1.5526|
;;;2218   }
001596  4770              BX       lr
                  |L1.5528|
001598  7808              LDRB     r0,[r1,#0]            ;2215  ; mnemo_cnt
00159a  2800              CMP      r0,#0                 ;2215
00159c  d0fb              BEQ      |L1.5526|
00159e  f1a00001          SUB      r0,r0,#1              ;2215
0015a2  7008              STRB     r0,[r1,#0]            ;2215
0015a4  4770              BX       lr
;;;2219   
                          ENDP

                  adc_init PROC
;;;2220   //-----------------------------------------------
;;;2221   void adc_init(void)
0015a6  4872              LDR      r0,|L1.6000|
;;;2222   {
;;;2223   
;;;2224   SET_REG(LPC_PINCON->PINSEL1,1,(25-16)*2,2);
0015a8  6841              LDR      r1,[r0,#4]
0015aa  f4212140          BIC      r1,r1,#0xc0000
0015ae  f4412180          ORR      r1,r1,#0x40000
0015b2  6041              STR      r1,[r0,#4]
;;;2225   SET_REG(LPC_PINCON->PINSEL1,1,(24-16)*2,2);
0015b4  6841              LDR      r1,[r0,#4]
0015b6  f4213140          BIC      r1,r1,#0x30000
0015ba  f4413180          ORR      r1,r1,#0x10000
0015be  6041              STR      r1,[r0,#4]
;;;2226   SET_REG(LPC_PINCON->PINSEL1,1,(23-16)*2,2);
0015c0  6841              LDR      r1,[r0,#4]
0015c2  f4214140          BIC      r1,r1,#0xc000
0015c6  f4414180          ORR      r1,r1,#0x4000
0015ca  6041              STR      r1,[r0,#4]
;;;2227   
;;;2228   
;;;2229   SET_REG(LPC_PINCON->PINMODE1,2,(25-16)*2,2);
0015cc  6c41              LDR      r1,[r0,#0x44]
0015ce  f4212140          BIC      r1,r1,#0xc0000
0015d2  f4412100          ORR      r1,r1,#0x80000
0015d6  6441              STR      r1,[r0,#0x44]
;;;2230   SET_REG(LPC_PINCON->PINMODE1,2,(24-16)*2,2);
0015d8  6c41              LDR      r1,[r0,#0x44]
0015da  f4213140          BIC      r1,r1,#0x30000
0015de  f4413100          ORR      r1,r1,#0x20000
0015e2  6441              STR      r1,[r0,#0x44]
;;;2231   SET_REG(LPC_PINCON->PINMODE1,2,(23-16)*2,2);
0015e4  6c41              LDR      r1,[r0,#0x44]
0015e6  f4214140          BIC      r1,r1,#0xc000
0015ea  f4414100          ORR      r1,r1,#0x8000
0015ee  6441              STR      r1,[r0,#0x44]
;;;2232   
;;;2233   SET_REG(LPC_ADC->ADCR,0,24,3);
0015f0  4860              LDR      r0,|L1.6004|
0015f2  6801              LDR      r1,[r0,#0]
0015f4  f02161e0          BIC      r1,r1,#0x7000000
0015f8  6001              STR      r1,[r0,#0]
;;;2234   
;;;2235   SET_REG(LPC_ADC->ADCR,1,21,1);
0015fa  6801              LDR      r1,[r0,#0]
0015fc  f4411100          ORR      r1,r1,#0x200000
001600  6001              STR      r1,[r0,#0]
;;;2236   SET_REG(LPC_ADC->ADCR,0,16,1);
001602  6801              LDR      r1,[r0,#0]
001604  f4213180          BIC      r1,r1,#0x10000
001608  6001              STR      r1,[r0,#0]
;;;2237   SET_REG(LPC_ADC->ADCR,1,8,8);
00160a  6801              LDR      r1,[r0,#0]
00160c  f421417f          BIC      r1,r1,#0xff00
001610  f4417180          ORR      r1,r1,#0x100
001614  6001              STR      r1,[r0,#0]
;;;2238   
;;;2239   //SET_REG(LPC_GPIO0->FIODIR,7,5,3);
;;;2240   //SET_REG(LPC_GPIO0->FIOPIN,4,5,3);
;;;2241   	
;;;2242   	/*if(adc_ch<=7)*///SET_REG(LPC_ADC->ADCR,1<<5,0,8);
;;;2243        /*else if(adc_ch==8) SET_REG(LPC_ADC->ADCR,1<<2,0,8);
;;;2244        else SET_REG(LPC_ADC->ADCR,1<<4,0,8);*/
;;;2245   
;;;2246   LPC_ADC->ADINTEN     =  (1<< 8);      /* global enable interrupt            */
001616  f44f7180          MOV      r1,#0x100
00161a  60c1              STR      r1,[r0,#0xc]
00161c  4856              LDR      r0,|L1.6008|
00161e  f44f0180          MOV      r1,#0x400000
001622  6001              STR      r1,[r0,#0]
;;;2247   
;;;2248   NVIC_EnableIRQ(ADC_IRQn);             /* enable ADC Interrupt               */
;;;2249   
;;;2250   
;;;2251   }
001624  4770              BX       lr
;;;2252   
                          ENDP

                  adc_drv7 PROC
;;;2253   //-----------------------------------------------
;;;2254   void adc_drv7(void) //(U - )
001626  e92d41f0          PUSH     {r4-r8,lr}
;;;2255   {
;;;2256   //int temp_S;
;;;2257   //char i;
;;;2258   //signed short temp_SS;
;;;2259   
;;;2260   adc_self_ch_disp[0]=abs_pal(adc_self_ch_buff[1]-adc_self_ch_buff[0]);//adc_self_ch_buff[0]&0x0f80;
00162a  4c54              LDR      r4,|L1.6012|
00162c  8860              LDRH     r0,[r4,#2]  ; adc_self_ch_buff
00162e  8821              LDRH     r1,[r4,#0]  ; adc_self_ch_buff
001630  1a40              SUBS     r0,r0,r1
001632  b200              SXTH     r0,r0
001634  f7fffffe          BL       abs_pal
001638  1da6              ADDS     r6,r4,#6
00163a  8030              STRH     r0,[r6,#0]
;;;2261   adc_self_ch_disp[1]=abs_pal(adc_self_ch_buff[2]-adc_self_ch_buff[1]);//adc_self_ch_buff[1]&0x0f80;
00163c  88a0              LDRH     r0,[r4,#4]  ; adc_self_ch_buff
00163e  8861              LDRH     r1,[r4,#2]  ; adc_self_ch_buff
001640  1a40              SUBS     r0,r0,r1
001642  b200              SXTH     r0,r0
001644  f7fffffe          BL       abs_pal
001648  8070              STRH     r0,[r6,#2]
;;;2262   adc_self_ch_disp[2]=abs_pal(adc_self_ch_buff[2]-adc_self_ch_buff[0]);//adc_self_ch_buff[2]&0x0f80;
00164a  88a0              LDRH     r0,[r4,#4]  ; adc_self_ch_buff
00164c  8821              LDRH     r1,[r4,#0]  ; adc_self_ch_buff
00164e  1a40              SUBS     r0,r0,r1
001650  b200              SXTH     r0,r0
001652  f7fffffe          BL       abs_pal
001656  80b0              STRH     r0,[r6,#4]
;;;2263   
;;;2264   //adc_self_ch_disp[0]=adc_self_ch_buff[0]&0x0ff0;
;;;2265   //adc_self_ch_disp[1]=adc_self_ch_buff[1]&0x0ff0;
;;;2266   //adc_self_ch_disp[2]=adc_self_ch_buff[2]&0x0ff0;
;;;2267   
;;;2268   
;;;2269   if(adc_self_ch_disp[2]<300)//==adc_self_ch_disp[2])
001658  f44f7196          MOV      r1,#0x12c
;;;2270   	{
;;;2271   	adc_result=adc_self_ch_buff[2];
00165c  f1a40592          SUB      r5,r4,#0x92
001660  4288              CMP      r0,r1                 ;2269
001662  da02              BGE      |L1.5738|
001664  88a0              LDRH     r0,[r4,#4]  ; adc_self_ch_buff
001666  8528              STRH     r0,[r5,#0x28]
001668  e00c              B        |L1.5764|
                  |L1.5738|
;;;2272   	} 
;;;2273   else if(adc_self_ch_disp[1]<300)//==adc_self_ch_disp[2])
00166a  f9b60002          LDRSH    r0,[r6,#2]  ; adc_self_ch_disp
00166e  4288              CMP      r0,r1
001670  da02              BGE      |L1.5752|
;;;2274   	{
;;;2275   	adc_result=adc_self_ch_buff[1];
001672  8860              LDRH     r0,[r4,#2]  ; adc_self_ch_buff
001674  8528              STRH     r0,[r5,#0x28]
001676  e005              B        |L1.5764|
                  |L1.5752|
;;;2276   	}
;;;2277   else if(adc_self_ch_disp[0]<300)//==adc_self_ch_disp[1])
001678  f9b60000          LDRSH    r0,[r6,#0]  ; adc_self_ch_disp
00167c  4288              CMP      r0,r1
00167e  da01              BGE      |L1.5764|
;;;2278   	{
;;;2279   	adc_result=adc_self_ch_buff[0];
001680  8820              LDRH     r0,[r4,#0]  ; adc_self_ch_buff
001682  8528              STRH     r0,[r5,#0x28]
                  |L1.5764|
;;;2280   	}
;;;2281       //adc_result=92;
;;;2282   
;;;2283   if(adc_ch_net)
001684  78af              LDRB     r7,[r5,#2]  ; adc_ch_net
001686  2600              MOVS     r6,#0
001688  b32f              CBZ      r7,|L1.5846|
;;;2284   	{
;;;2285   
;;;2286   	main_power_buffer[0]+=(long)(adc_result);
00168a  483d              LDR      r0,|L1.6016|
00168c  f9b51028          LDRSH    r1,[r5,#0x28]  ; adc_result
001690  6802              LDR      r2,[r0,#0]  ; main_power_buffer
001692  440a              ADD      r2,r2,r1
001694  6002              STR      r2,[r0,#0]  ; main_power_buffer
;;;2287   	main_power_buffer[1]+=(long)(adc_result);
001696  6842              LDR      r2,[r0,#4]  ; main_power_buffer
001698  440a              ADD      r2,r2,r1
00169a  6042              STR      r2,[r0,#4]  ; main_power_buffer
;;;2288   	main_power_buffer[2]+=(long)(adc_result);
00169c  6882              LDR      r2,[r0,#8]  ; main_power_buffer
00169e  440a              ADD      r2,r2,r1
0016a0  6082              STR      r2,[r0,#8]  ; main_power_buffer
;;;2289   	main_power_buffer[3]+=(long)(adc_result);
0016a2  68c2              LDR      r2,[r0,#0xc]  ; main_power_buffer
0016a4  4411              ADD      r1,r1,r2
0016a6  60c1              STR      r1,[r0,#0xc]  ; main_power_buffer
;;;2290   
;;;2291   	adc_net_buff_cnt++;
0016a8  8e29              LDRH     r1,[r5,#0x30]  ; adc_net_buff_cnt
0016aa  f1010101          ADD      r1,r1,#1
0016ae  b209              SXTH     r1,r1
0016b0  8629              STRH     r1,[r5,#0x30]
;;;2292   	if(adc_net_buff_cnt>=0x1000)
0016b2  f5b15f80          CMP      r1,#0x1000
0016b6  db00              BLT      |L1.5818|
;;;2293   		{
;;;2294   		adc_net_buff_cnt=0;
0016b8  862e              STRH     r6,[r5,#0x30]
                  |L1.5818|
;;;2295   		}
;;;2296   	if((adc_net_buff_cnt&0x03ff)==0)
0016ba  f9b51030          LDRSH    r1,[r5,#0x30]  ; adc_net_buff_cnt
0016be  058a              LSLS     r2,r1,#22
0016c0  d131              BNE      |L1.5926|
;;;2297   		{
;;;2298   		#ifdef UKU_220
;;;2299   		net_buff_=(short)((main_power_buffer[adc_net_buff_cnt>>10])>>11);
;;;2300   		#else
;;;2301   		#ifdef UKU_220_V2
;;;2302   		net_buff_=(short)((main_power_buffer[adc_net_buff_cnt>>10])>>11);
;;;2303   		#else
;;;2304   		net_buff_=(short)((main_power_buffer[adc_net_buff_cnt>>10])>>8);
0016c2  ea4f21a1          ASR      r1,r1,#10
0016c6  f8502021          LDR      r2,[r0,r1,LSL #2]
0016ca  ea4f2222          ASR      r2,r2,#8
0016ce  84ea              STRH     r2,[r5,#0x26]
;;;2305   		#endif
;;;2306   		#endif
;;;2307   		main_power_buffer[adc_net_buff_cnt>>10]=0;
0016d0  f8406021          STR      r6,[r0,r1,LSL #2]
0016d4  e027              B        |L1.5926|
                  |L1.5846|
;;;2308   		}
;;;2309   
;;;2310   
;;;2311   	} 
;;;2312   else if(!adc_ch_net)
;;;2313   	{
;;;2314   	adc_buff[adc_ch][adc_ch_cnt]=(long)adc_result;
0016d6  482b              LDR      r0,|L1.6020|
0016d8  78ec              LDRB     r4,[r5,#3]  ; adc_ch
0016da  792a              LDRB     r2,[r5,#4]  ; adc_ch_cnt
0016dc  eb001384          ADD      r3,r0,r4,LSL #6
0016e0  f9b51028          LDRSH    r1,[r5,#0x28]  ; adc_result
0016e4  f8431022          STR      r1,[r3,r2,LSL #2]
;;;2315   	
;;;2316   	if((adc_ch_cnt&0x03)==0)
0016e8  0790              LSLS     r0,r2,#30
0016ea  d10f              BNE      |L1.5900|
;;;2317   		{
;;;2318   		long temp_L;
;;;2319   		char i;
;;;2320   		temp_L=0;
0016ec  4601              MOV      r1,r0
                  |L1.5870|
;;;2321   		for(i=0;i<16;i++)
;;;2322   			{
;;;2323   			temp_L+=adc_buff[adc_ch][i];
0016ee  f853c020          LDR      r12,[r3,r0,LSL #2]
0016f2  4461              ADD      r1,r1,r12
0016f4  f1000001          ADD      r0,r0,#1              ;2321
0016f8  b2c0              UXTB     r0,r0                 ;2321
0016fa  2810              CMP      r0,#0x10              ;2321
0016fc  d3f7              BCC      |L1.5870|
;;;2324   			}
;;;2325   		adc_buff_[adc_ch]= (short)(temp_L>>4);
0016fe  ea4f1021          ASR      r0,r1,#4
001702  491f              LDR      r1,|L1.6016|
001704  f1a10120          SUB      r1,r1,#0x20
001708  f8210014          STRH     r0,[r1,r4,LSL #1]
                  |L1.5900|
;;;2326   
;;;2327   		//adc_buff_[3]=346;
;;;2328   		}
;;;2329   	if(++adc_ch>=16) 
00170c  1c64              ADDS     r4,r4,#1
00170e  b2e0              UXTB     r0,r4
001710  70e8              STRB     r0,[r5,#3]
001712  2810              CMP      r0,#0x10
001714  d307              BCC      |L1.5926|
;;;2330   		{
;;;2331   		adc_ch=0;
001716  70ee              STRB     r6,[r5,#3]
;;;2332   		adc_ch_cnt++;
001718  f1020201          ADD      r2,r2,#1
00171c  b2d0              UXTB     r0,r2
00171e  7128              STRB     r0,[r5,#4]
;;;2333   		if(adc_ch_cnt>=16)adc_ch_cnt=0;
001720  2810              CMP      r0,#0x10
001722  d300              BCC      |L1.5926|
001724  712e              STRB     r6,[r5,#4]
                  |L1.5926|
;;;2334   		}
;;;2335   	}
;;;2336   
;;;2337   //adc_buff[adc_ch][adc_cnt1]=(adc_self_ch_buff[2]+adc_self_ch_buff[1])/2;
;;;2338   
;;;2339   //if(adc_buff[adc_ch][adc_cnt1]<adc_buff_min[adc_ch])adc_buff_min[adc_ch]=adc_buff[adc_ch][adc_cnt1];
;;;2340   //if(adc_buff[adc_ch][adc_cnt1]>adc_buff_max[adc_ch])adc_buff_max[adc_ch]=adc_buff[adc_ch][adc_cnt1];
;;;2341   /*
;;;2342   	{
;;;2343   	if((adc_cnt1&0x03)==0)
;;;2344   		{
;;;2345   		temp_S=0;
;;;2346   		for(i=0;i<16;i++)
;;;2347   			{
;;;2348   			temp_S+=adc_buff[adc_ch][i];
;;;2349   			} 
;;;2350            	adc_buff_[adc_ch]=temp_S>>4;
;;;2351             }
;;;2352   	}*/
;;;2353   
;;;2354   
;;;2355   		  
;;;2356   
;;;2357   adc_self_ch_cnt=0;
001726  706e              STRB     r6,[r5,#1]
;;;2358   
;;;2359   adc_ch_net++;
001728  f1070701          ADD      r7,r7,#1
;;;2360   adc_ch_net&=1;
00172c  f0070001          AND      r0,r7,#1
001730  70a8              STRB     r0,[r5,#2]
;;;2361   
;;;2362   //SET_REG(LPC_GPIO0->FIODIR,7,5,3);
;;;2363   //SET_REG(LPC_GPIO0->FIOPIN,adc_ch,5,3);
;;;2364   
;;;2365   if(adc_ch_net)
;;;2366   	{
;;;2367   	//LPC_GPIO2->FIODIR|=(1<<7);
;;;2368   	//LPC_GPIO2->FIOPIN|=(1<<7);
;;;2369   	SET_REG(LPC_ADC->ADCR,1<<2,0,8);
001732  4a10              LDR      r2,|L1.6004|
001734  b340              CBZ      r0,|L1.6024|
001736  6810              LDR      r0,[r2,#0]
001738  f02000ff          BIC      r0,r0,#0xff
00173c  f1000004          ADD      r0,r0,#4
001740  6010              STR      r0,[r2,#0]
001742  e060              B        |L1.6150|
                  |L1.5956|
                          DCD      t_ext_can_nd
                  |L1.5960|
                          DCD      t_ext_can
                  |L1.5964|
                          DCD      BAT_IS_ON
                  |L1.5968|
                          DCD      load_I
                  |L1.5972|
                          DCD      Isumm
                  |L1.5976|
                          DCD      NUMINV
                  |L1.5980|
                          DCD      inv
                  |L1.5984|
                          DCD      a_ind
                  |L1.5988|
                          DCD      mnemo_cnt
                  |L1.5992|
                          DCD      MNEMO_ON
                  |L1.5996|
                          DCD      MNEMO_TIME
                  |L1.6000|
                          DCD      0x4002c000
                  |L1.6004|
                          DCD      0x40034000
                  |L1.6008|
                          DCD      0xe000e100
                  |L1.6012|
                          DCD      ||area_number.21||+0x92
                  |L1.6016|
                          DCD      ||.bss||+0x420
                  |L1.6020|
                          DCD      ||.bss||
                  |L1.6024|
001788  e7ff              B        |L1.6026|
                  |L1.6026|
;;;2370   	}
;;;2371   else
;;;2372   	{
;;;2373   	//LPC_GPIO2->FIODIR|=(1<<7);
;;;2374   	//LPC_GPIO2->FIOPIN&=~(1<<7);
;;;2375   	if(!(adc_ch&(1<<3)))SET_REG(LPC_ADC->ADCR,1<<0,0,8);
00178a  78e9              LDRB     r1,[r5,#3]  ; adc_ch
00178c  0708              LSLS     r0,r1,#28
00178e  d406              BMI      |L1.6046|
001790  6810              LDR      r0,[r2,#0]
001792  f02000ff          BIC      r0,r0,#0xff
001796  f1000001          ADD      r0,r0,#1
00179a  6010              STR      r0,[r2,#0]
00179c  e005              B        |L1.6058|
                  |L1.6046|
;;;2376   	else 			SET_REG(LPC_ADC->ADCR,1<<1,0,8);
00179e  6810              LDR      r0,[r2,#0]
0017a0  f02000ff          BIC      r0,r0,#0xff
0017a4  f1000002          ADD      r0,r0,#2
0017a8  6010              STR      r0,[r2,#0]
                  |L1.6058|
;;;2377   
;;;2378   
;;;2379   	SET_REG(LPC_GPIO0->FIODIR,1,28,1);
0017aa  48fb              LDR      r0,|L1.7064|
0017ac  6803              LDR      r3,[r0,#0]
0017ae  f0435380          ORR      r3,r3,#0x10000000
0017b2  6003              STR      r3,[r0,#0]
;;;2380   	SET_REG(LPC_GPIO1->FIODIR,1,30,1);
0017b4  6a03              LDR      r3,[r0,#0x20]
0017b6  f0434380          ORR      r3,r3,#0x40000000
0017ba  6203              STR      r3,[r0,#0x20]
;;;2381   	SET_REG(LPC_GPIO3->FIODIR,1,26,1);
0017bc  6e03              LDR      r3,[r0,#0x60]
0017be  f0436380          ORR      r3,r3,#0x4000000
0017c2  6603              STR      r3,[r0,#0x60]
;;;2382   
;;;2383   	if(!(adc_ch&(1<<0)))SET_REG(LPC_GPIO0->FIOPIN,0,28,1);
0017c4  07cb              LSLS     r3,r1,#31
0017c6  d00a              BEQ      |L1.6110|
;;;2384   	else 			SET_REG(LPC_GPIO0->FIOPIN,1,28,1);
0017c8  6943              LDR      r3,[r0,#0x14]
0017ca  f0435380          ORR      r3,r3,#0x10000000
0017ce  6143              STR      r3,[r0,#0x14]
                  |L1.6096|
;;;2385   
;;;2386   	if(!(adc_ch&(1<<1)))SET_REG(LPC_GPIO1->FIOPIN,0,30,1);
0017d0  078b              LSLS     r3,r1,#30
0017d2  d409              BMI      |L1.6120|
0017d4  6b43              LDR      r3,[r0,#0x34]
0017d6  f0234380          BIC      r3,r3,#0x40000000
0017da  6343              STR      r3,[r0,#0x34]
0017dc  e008              B        |L1.6128|
                  |L1.6110|
0017de  6943              LDR      r3,[r0,#0x14]         ;2383
0017e0  f0235380          BIC      r3,r3,#0x10000000     ;2383
0017e4  6143              STR      r3,[r0,#0x14]         ;2383
0017e6  e7f3              B        |L1.6096|
                  |L1.6120|
;;;2387   	else 			SET_REG(LPC_GPIO1->FIOPIN,1,30,1);
0017e8  6b43              LDR      r3,[r0,#0x34]
0017ea  f0434380          ORR      r3,r3,#0x40000000
0017ee  6343              STR      r3,[r0,#0x34]
                  |L1.6128|
;;;2388   
;;;2389   	if(!(adc_ch&(1<<2)))SET_REG(LPC_GPIO3->FIOPIN,0,26,1);
0017f0  0749              LSLS     r1,r1,#29
0017f2  d404              BMI      |L1.6142|
0017f4  6f41              LDR      r1,[r0,#0x74]
0017f6  f0216180          BIC      r1,r1,#0x4000000
0017fa  6741              STR      r1,[r0,#0x74]
0017fc  e003              B        |L1.6150|
                  |L1.6142|
;;;2390   	else 			SET_REG(LPC_GPIO3->FIOPIN,1,26,1);
0017fe  6f41              LDR      r1,[r0,#0x74]
001800  f0416180          ORR      r1,r1,#0x4000000
001804  6741              STR      r1,[r0,#0x74]
                  |L1.6150|
;;;2391   	}
;;;2392   	
;;;2393   
;;;2394   
;;;2395   
;;;2396   LPC_ADC->ADCR |=  (1<<24);
001806  6810              LDR      r0,[r2,#0]
001808  f0407080          ORR      r0,r0,#0x1000000
00180c  6010              STR      r0,[r2,#0]
                  |L1.6158|
;;;2397   
;;;2398   }
00180e  e8bd81f0          POP      {r4-r8,pc}
;;;2399   
                          ENDP

                  avg_hndl PROC
;;;2656   //-----------------------------------------------
;;;2657   void avg_hndl(void)
001812  b5f0              PUSH     {r4-r7,lr}
;;;2658   { 
;;;2659   char i;
;;;2660   
;;;2661   #define AVGCNTMAX	5
;;;2662   if(avg_main_cnt)
001814  4ce1              LDR      r4,|L1.7068|
001816  f9b4001e          LDRSH    r0,[r4,#0x1e]  ; avg_main_cnt
00181a  b118              CBZ      r0,|L1.6180|
;;;2663   	{
;;;2664   	avg_main_cnt--;
00181c  f1a00001          SUB      r0,r0,#1
001820  83e0              STRH     r0,[r4,#0x1e]
;;;2665   	goto avg_hndl_end;
001822  e08d              B        |L1.6464|
                  |L1.6180|
;;;2666   	}                 
;;;2667   
;;;2668   avg_num=0;
001824  f04f0500          MOV      r5,#0
001828  72e5              STRB     r5,[r4,#0xb]
;;;2669   
;;;2670   for(i=0;i<NUMIST;i++)
00182a  4628              MOV      r0,r5
00182c  49dd              LDR      r1,|L1.7076|
;;;2671   	{
;;;2672   	if((bps[i]._state==bsWRK)&&(bps[i]._cnt<20))avg_num++;
00182e  4bdc              LDR      r3,|L1.7072|
001830  f9b12000          LDRSH    r2,[r1,#0]            ;2670
001834  e012              B        |L1.6236|
                  |L1.6198|
001836  ebc001c0          RSB      r1,r0,r0,LSL #3
00183a  eb010141          ADD      r1,r1,r1,LSL #1
00183e  eb030181          ADD      r1,r3,r1,LSL #2
001842  788e              LDRB     r6,[r1,#2]
001844  2e01              CMP      r6,#1
001846  d106              BNE      |L1.6230|
001848  78c9              LDRB     r1,[r1,#3]
00184a  2914              CMP      r1,#0x14
00184c  d203              BCS      |L1.6230|
00184e  7ae1              LDRB     r1,[r4,#0xb]  ; avg_num
001850  f1010101          ADD      r1,r1,#1
001854  72e1              STRB     r1,[r4,#0xb]
                  |L1.6230|
001856  f1000001          ADD      r0,r0,#1              ;2670
00185a  b2c0              UXTB     r0,r0                 ;2670
                  |L1.6236|
00185c  4290              CMP      r0,r2                 ;2670
00185e  dbea              BLT      |L1.6198|
;;;2673   	}
;;;2674   
;;;2675   /*if((K[NUMI]>=1)&&(bps_state[0]==ssWRK))	avg_num++;
;;;2676   if((K[NUMI]>=2)&&(bps_state[1]==ssWRK))	avg_num++;
;;;2677   if((K[NUMI]>=3)&&(bps_state[2]==ssWRK))	avg_num++;*/
;;;2678   
;;;2679   	
;;;2680   if(avg_num<2)
001860  7ae6              LDRB     r6,[r4,#0xb]  ; avg_num
001862  2e02              CMP      r6,#2
001864  d36c              BCC      |L1.6464|
;;;2681   	{
;;;2682   	goto avg_hndl_end;
;;;2683   	}
;;;2684   	
;;;2685   else
;;;2686   	{
;;;2687   	i_avg_min=5000;
001866  f2413088          MOV      r0,#0x1388
00186a  6720              STR      r0,[r4,#0x70]  ; i_avg_min
;;;2688   	i_avg_max=0;
00186c  66e5              STR      r5,[r4,#0x6c]  ; i_avg_max
;;;2689   	i_avg_summ=0;
00186e  6765              STR      r5,[r4,#0x74]  ; i_avg_summ
;;;2690   	for(i=0;i<NUMIST;i++)
001870  f04f0100          MOV      r1,#0
001874  e017              B        |L1.6310|
                  |L1.6262|
;;;2691   		{
;;;2692   		if(bps[i]._state==bsWRK)
001876  ebc100c1          RSB      r0,r1,r1,LSL #3
00187a  eb000040          ADD      r0,r0,r0,LSL #1
00187e  eb030080          ADD      r0,r3,r0,LSL #2
001882  7887              LDRB     r7,[r0,#2]
001884  2f01              CMP      r7,#1
001886  d10b              BNE      |L1.6304|
;;;2693   			{
;;;2694   			if(bps[i]._Ii>i_avg_max)i_avg_max=bps[i]._Ii;
001888  6a40              LDR      r0,[r0,#0x24]
00188a  6ee7              LDR      r7,[r4,#0x6c]  ; i_avg_max
00188c  42b8              CMP      r0,r7
00188e  dd00              BLE      |L1.6290|
001890  66e0              STR      r0,[r4,#0x6c]  ; i_avg_max
                  |L1.6290|
;;;2695   			if(bps[i]._Ii<i_avg_min)i_avg_min=bps[i]._Ii;
001892  6f27              LDR      r7,[r4,#0x70]  ; i_avg_min
001894  42b8              CMP      r0,r7
001896  da00              BGE      |L1.6298|
001898  6720              STR      r0,[r4,#0x70]  ; i_avg_min
                  |L1.6298|
;;;2696   			
;;;2697   			i_avg_summ+=bps[i]._Ii;
00189a  6f67              LDR      r7,[r4,#0x74]  ; i_avg_summ
00189c  4438              ADD      r0,r0,r7
00189e  6760              STR      r0,[r4,#0x74]  ; i_avg_summ
                  |L1.6304|
0018a0  f1010101          ADD      r1,r1,#1              ;2690
0018a4  b2c9              UXTB     r1,r1                 ;2690
                  |L1.6310|
0018a6  4291              CMP      r1,r2                 ;2690
0018a8  dbe5              BLT      |L1.6262|
;;;2698   			}
;;;2699   		}
;;;2700   	i_avg=i_avg_summ/avg_num;	
0018aa  6f60              LDR      r0,[r4,#0x74]  ; i_avg_summ
0018ac  fb90f6f6          SDIV     r6,r0,r6
0018b0  67a6              STR      r6,[r4,#0x78]  ; i_avg
;;;2701   	
;;;2702   	if(i_avg_min==0)i_avg_min=1;
0018b2  6f20              LDR      r0,[r4,#0x70]  ; i_avg_min
0018b4  2101              MOVS     r1,#1                 ;2672
0018b6  b900              CBNZ     r0,|L1.6330|
0018b8  6721              STR      r1,[r4,#0x70]  ; i_avg_min
                  |L1.6330|
;;;2703   
;;;2704   	avg=i_avg_max;
0018ba  6ee0              LDR      r0,[r4,#0x6c]  ; i_avg_max
;;;2705   	avg*=100;
0018bc  f04f0764          MOV      r7,#0x64
0018c0  fb00f007          MUL      r0,r0,r7
;;;2706   	avg/=i_avg_min;
0018c4  6f27              LDR      r7,[r4,#0x70]  ; i_avg_min
0018c6  fb90f0f7          SDIV     r0,r0,r7
0018ca  67e0              STR      r0,[r4,#0x7c]  ; avg
;;;2707   
;;;2708   	if(avg>160) bAVG=1;
0018cc  28a0              CMP      r0,#0xa0
0018ce  dd00              BLE      |L1.6354|
0018d0  72a1              STRB     r1,[r4,#0xa]
                  |L1.6354|
;;;2709   	if(avg<120) bAVG=0;
0018d2  2878              CMP      r0,#0x78
0018d4  da00              BGE      |L1.6360|
0018d6  72a5              STRB     r5,[r4,#0xa]
                  |L1.6360|
;;;2710   
;;;2711   	if(bAVG==1)
0018d8  7aa0              LDRB     r0,[r4,#0xa]  ; bAVG
0018da  2801              CMP      r0,#1
0018dc  d130              BNE      |L1.6464|
;;;2712   		{
;;;2713   		for(i=0;i<NUMIST;i++)
0018de  f04f0100          MOV      r1,#0
;;;2714   			{
;;;2715   			if(bps[i]._state==bsWRK)
;;;2716   				{
;;;2717   				if(bps[i]._Ii>i_avg)bps[i]._x_--;
;;;2718   				if(bps[i]._Ii<i_avg)bps[i]._x_++;
;;;2719   			
;;;2720   				if(bps[i]._x_<-50)bps[i]._x_=-50;
0018e2  f06f0431          MVN      r4,#0x31
0018e6  e029              B        |L1.6460|
                  |L1.6376|
0018e8  ebc100c1          RSB      r0,r1,r1,LSL #3       ;2715
0018ec  eb000040          ADD      r0,r0,r0,LSL #1       ;2715
0018f0  eb030080          ADD      r0,r3,r0,LSL #2       ;2715
0018f4  7885              LDRB     r5,[r0,#2]            ;2715
0018f6  2d01              CMP      r5,#1                 ;2715
0018f8  d11d              BNE      |L1.6454|
0018fa  6a45              LDR      r5,[r0,#0x24]         ;2717
0018fc  42b5              CMP      r5,r6                 ;2717
0018fe  dd05              BLE      |L1.6412|
001900  f8b05050          LDRH     r5,[r0,#0x50]         ;2717
001904  f1a50501          SUB      r5,r5,#1              ;2717
001908  f8a05050          STRH     r5,[r0,#0x50]         ;2717
                  |L1.6412|
00190c  da05              BGE      |L1.6426|
00190e  f8b05050          LDRH     r5,[r0,#0x50]         ;2718
001912  f1050501          ADD      r5,r5,#1              ;2718
001916  f8a05050          STRH     r5,[r0,#0x50]         ;2718
                  |L1.6426|
00191a  f9b05050          LDRSH    r5,[r0,#0x50]
00191e  42a5              CMP      r5,r4
001920  da01              BGE      |L1.6438|
001922  f8a04050          STRH     r4,[r0,#0x50]
                  |L1.6438|
;;;2721   				if(bps[i]._x_>50)bps[i]._x_=50;	
001926  f9b05050          LDRSH    r5,[r0,#0x50]
00192a  2d32              CMP      r5,#0x32
00192c  dd03              BLE      |L1.6454|
00192e  f04f0532          MOV      r5,#0x32
001932  f8a05050          STRH     r5,[r0,#0x50]
                  |L1.6454|
001936  f1010101          ADD      r1,r1,#1              ;2713
00193a  b2c9              UXTB     r1,r1                 ;2713
                  |L1.6460|
00193c  4291              CMP      r1,r2                 ;2713
00193e  dbd3              BLT      |L1.6376|
                  |L1.6464|
;;;2722   				}
;;;2723   			}		
;;;2724   		}			
;;;2725   	}   	 
;;;2726   
;;;2727   
;;;2728   avg_hndl_end:
;;;2729   __nop();  
001940  bf00              NOP      
;;;2730   }
001942  bdf0              POP      {r4-r7,pc}
;;;2731   
                          ENDP

                  rele_hndl PROC
;;;2744   //*************-----------------------------------------------
;;;2745   void rele_hndl(void)
001944  e92d41f0          PUSH     {r4-r8,lr}
;;;2746   {
;;;2747   //static char cnt_rel_sam;
;;;2748   //char temp;
;;;2749   
;;;2750   //temp=0;
;;;2751   
;;;2752   
;;;2753   SET_REG(LPC_PINCON->PINSEL0,0,4*2,6*2);
001948  4897              LDR      r0,|L1.7080|
00194a  6801              LDR      r1,[r0,#0]
00194c  4a97              LDR      r2,|L1.7084|
00194e  ea010102          AND      r1,r1,r2
001952  6001              STR      r1,[r0,#0]
;;;2754   SET_REG(LPC_GPIO0->FIODIR,63,4,6);
001954  4c90              LDR      r4,|L1.7064|
001956  6821              LDR      r1,[r4,#0]
001958  f441717c          ORR      r1,r1,#0x3f0
00195c  6021              STR      r1,[r4,#0]
;;;2755   SET_REG(LPC_PINCON->PINSEL7,0,(25-16)*2,2);
00195e  69c1              LDR      r1,[r0,#0x1c]
001960  f4212140          BIC      r1,r1,#0xc0000
001964  61c1              STR      r1,[r0,#0x1c]
;;;2756   SET_REG(LPC_GPIO3->FIODIR,1,25,1);
001966  6e21              LDR      r1,[r4,#0x60]
001968  f0417100          ORR      r1,r1,#0x2000000
00196c  6621              STR      r1,[r4,#0x60]
;;;2757   SET_REG(LPC_PINCON->PINSEL1,0,(29-16)*2,2);
00196e  6841              LDR      r1,[r0,#4]
001970  f0216140          BIC      r1,r1,#0xc000000
001974  6041              STR      r1,[r0,#4]
;;;2758   SET_REG(LPC_GPIO0->FIODIR,1,29,1);
001976  6820              LDR      r0,[r4,#0]
001978  f0405000          ORR      r0,r0,#0x20000000
00197c  6020              STR      r0,[r4,#0]
;;;2759   
;;;2760   
;;;2761   
;;;2762   
;;;2763   
;;;2764   
;;;2765   if((((bat[0]._rel_stat)  || (tbatdisable_stat!=tbdsON))&&(tbatdisable_cmnd))	&& (main_1Hz_cnt>5))
00197e  488d              LDR      r0,|L1.7092|
001980  4d8b              LDR      r5,|L1.7088|
001982  498e              LDR      r1,|L1.7100|
001984  7802              LDRB     r2,[r0,#0]  ; tbatdisable_stat
001986  488c              LDR      r0,|L1.7096|
001988  f895303c          LDRB     r3,[r5,#0x3c]  ; bat
00198c  f9b11000          LDRSH    r1,[r1,#0]
001990  7800              LDRB     r0,[r0,#0]
001992  4313              ORRS     r3,r3,r2
001994  d007              BEQ      |L1.6566|
001996  b130              CBZ      r0,|L1.6566|
001998  2905              CMP      r1,#5
00199a  dd04              BLE      |L1.6566|
;;;2766   	{
;;;2767   	SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_BAT1,1);
00199c  69a3              LDR      r3,[r4,#0x18]
00199e  f4437380          ORR      r3,r3,#0x100
0019a2  61a3              STR      r3,[r4,#0x18]
0019a4  e003              B        |L1.6574|
                  |L1.6566|
;;;2768   	}
;;;2769   else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_BAT1,1);	  	
0019a6  69e3              LDR      r3,[r4,#0x1c]
0019a8  f4437380          ORR      r3,r3,#0x100
0019ac  61e3              STR      r3,[r4,#0x1c]
                  |L1.6574|
;;;2770   
;;;2771   if((((bat[1]._rel_stat) || (tbatdisable_stat!=tbdsON))&&(tbatdisable_cmnd))	&& (main_1Hz_cnt>5))
0019ae  f8953088          LDRB     r3,[r5,#0x88]  ; bat
0019b2  4313              ORRS     r3,r3,r2
0019b4  d007              BEQ      |L1.6598|
0019b6  b130              CBZ      r0,|L1.6598|
0019b8  2905              CMP      r1,#5
0019ba  dd04              BLE      |L1.6598|
;;;2772   	{
;;;2773   	SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_BAT2,1);
0019bc  69a0              LDR      r0,[r4,#0x18]
0019be  f0400040          ORR      r0,r0,#0x40
0019c2  61a0              STR      r0,[r4,#0x18]
0019c4  e003              B        |L1.6606|
                  |L1.6598|
;;;2774   	}
;;;2775   else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_BAT2,1);
0019c6  69e0              LDR      r0,[r4,#0x1c]
0019c8  f0400040          ORR      r0,r0,#0x40
0019cc  61e0              STR      r0,[r4,#0x1c]
                  |L1.6606|
;;;2776   
;;;2777   
;;;2778   if(mess_find_unvol((MESS2RELE_HNDL))&&(mess_data[0]==PARAM_RELE_SAMOKALIBR)) 
0019ce  20d2              MOVS     r0,#0xd2
0019d0  f7fffffe          BL       mess_find_unvol
0019d4  4d7a              LDR      r5,|L1.7104|
0019d6  b110              CBZ      r0,|L1.6622|
0019d8  6828              LDR      r0,[r5,#0]  ; mess_data
0019da  2864              CMP      r0,#0x64
0019dc  d048              BEQ      |L1.6768|
                  |L1.6622|
;;;2779   	{
;;;2780   	if(mess_data[1]==1)SET_REG(LPC_GPIO0->FIOSET,1,29,1);
;;;2781   	else if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,29,1);
;;;2782   	}
;;;2783   else SET_REG(LPC_GPIO0->FIOCLR,1,29,1);
0019de  69e0              LDR      r0,[r4,#0x1c]
0019e0  f0405000          ORR      r0,r0,#0x20000000
0019e4  61e0              STR      r0,[r4,#0x1c]
                  |L1.6630|
;;;2784   
;;;2785   
;;;2786   #ifndef UKU2071x
;;;2787   //  
;;;2788   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_NET))
;;;2789   	{
;;;2790   	if(mess_data[1]==0) 			SET_REG(LPC_GPIO3->FIOSET,1,SHIFT_REL_AV_NET,1);
;;;2791   	else 						SET_REG(LPC_GPIO3->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;2792   	}
;;;2793   else	if(!(avar_ind_stat&0x00000001)) 	SET_REG(LPC_GPIO3->FIOSET,1,SHIFT_REL_AV_NET,1);
;;;2794   else 							SET_REG(LPC_GPIO3->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;2795   #endif
;;;2796   #ifdef UKU2071x
;;;2797   //  
;;;2798   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_NET))
0019e6  20d2              MOVS     r0,#0xd2
0019e8  f7fffffe          BL       mess_find_unvol
;;;2799   	{
;;;2800   	if(mess_data[1]==0)				SET_REG(LPC_GPIO3->FIOCLR,1,SHIFT_REL_AV_NET,1); 
;;;2801   	else 						SET_REG(LPC_GPIO3->FIOSET,1,SHIFT_REL_AV_NET,1);
;;;2802   	}
;;;2803   else	if(!(avar_ind_stat&0x00000001))	SET_REG(LPC_GPIO3->FIOCLR,1,SHIFT_REL_AV_NET,1);
0019ec  4e75              LDR      r6,|L1.7108|
0019ee  b110              CBZ      r0,|L1.6646|
0019f0  6828              LDR      r0,[r5,#0]            ;2798  ; mess_data
0019f2  2866              CMP      r0,#0x66              ;2798
0019f4  d04b              BEQ      |L1.6798|
                  |L1.6646|
0019f6  6830              LDR      r0,[r6,#0]  ; avar_ind_stat
0019f8  07c0              LSLS     r0,r0,#31
0019fa  d054              BEQ      |L1.6822|
;;;2804   else 					  		SET_REG(LPC_GPIO3->FIOSET,1,SHIFT_REL_AV_NET,1);
0019fc  6fa0              LDR      r0,[r4,#0x78]
0019fe  f0407000          ORR      r0,r0,#0x2000000
001a02  67a0              STR      r0,[r4,#0x78]
                  |L1.6660|
;;;2805   #endif
;;;2806   
;;;2807   #ifdef UKU_3U
;;;2808   //  
;;;2809   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BAT1))
;;;2810   	{
;;;2811   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT1,1);
;;;2812   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT1,1);
;;;2813        }
;;;2814   else 
;;;2815   	{
;;;2816   	if(!(avar_ind_stat&0x00000002)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT1,1);
;;;2817        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT1,1);
;;;2818   	} 
;;;2819   
;;;2820   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BAT2))
;;;2821   	{
;;;2822   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT2,1);
;;;2823   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT2,1);
;;;2824        }
;;;2825   else 
;;;2826   	{
;;;2827   	if(!(avar_ind_stat&0x00000004)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT2,1);
;;;2828        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT2,1);
;;;2829   	} 
;;;2830   
;;;2831   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BPS))
;;;2832   	{
;;;2833   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
;;;2834   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
;;;2835        }
;;;2836   else 
;;;2837   	{
;;;2838   	if(!(avar_ind_stat&0x000007f8)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
;;;2839        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
;;;2840   	} 
;;;2841   
;;;2842   #endif
;;;2843   
;;;2844   
;;;2845   #ifdef UKU_GLONASS
;;;2846   //  
;;;2847   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BAT1))
;;;2848   	{
;;;2849   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT1,1);
;;;2850   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT1,1);
;;;2851        }
;;;2852   else 
;;;2853   	{
;;;2854   	if(!(avar_ind_stat&0x00000002)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT1,1);
;;;2855        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT1,1);
;;;2856   	} 
;;;2857   
;;;2858   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BAT2))
;;;2859   	{
;;;2860   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT2,1);
;;;2861   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT2,1);
;;;2862        }
;;;2863   else 
;;;2864   	{
;;;2865   	if(!(avar_ind_stat&0x00000004)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT2,1);
;;;2866        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT2,1);
;;;2867   	} 
;;;2868   
;;;2869   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BPS))
;;;2870   	{
;;;2871   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
;;;2872   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
;;;2873        }
;;;2874   else 
;;;2875   	{
;;;2876   	if(!(avar_ind_stat&0x000007f8)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
;;;2877        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
;;;2878   	} 
;;;2879   
;;;2880   #endif
;;;2881   
;;;2882   #ifdef U /*
;;;2883   
;;;2884   
;;;2885   
;;;2886   /*
;;;2887   //  
;;;2888   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BAT))
;;;2889   	{
;;;2890   	if(mess_data[1]==0) temp&=~(1<<SHIFT_REL_AV_BAT);
;;;2891   	else if(mess_data[1]==1) temp|=(1<<SHIFT_REL_AV_BAT);
;;;2892        }
;;;2893   else 
;;;2894   	{
;;;2895   	if(!(avar_ind_stat&0x00000006)) temp&=~(1<<SHIFT_REL_AV_BAT);
;;;2896        else temp|=(1<<SHIFT_REL_AV_BAT);
;;;2897   	} 
;;;2898   */
;;;2899   
;;;2900   #endif
;;;2901   
;;;2902   #ifdef UKU_RSTKM
;;;2903   
;;;2904   //  
;;;2905   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_COMM))
;;;2906   	{
;;;2907   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_COMM,1);
;;;2908   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_COMM,1);
;;;2909   	}
;;;2910   else 
;;;2911   	{
;;;2912        if(  (!(avar_ind_stat&0x00007fff))/* &&
;;;2913             ((!SK_REL_EN[0]) || (sk_av_stat[0]!=sasON))  &&
;;;2914             ((!SK_REL_EN[1]) || (sk_av_stat[1]!=sasON))  &&
;;;2915             ((!SK_REL_EN[2]) || (sk_av_stat[2]!=sasON))  &&
;;;2916             ((!SK_REL_EN[3]) || (sk_av_stat[3]!=sasON))*/  )SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_COMM,1);
;;;2917        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_COMM,1);
;;;2918   	}
;;;2919   	
;;;2920   
;;;2921   // 
;;;2922   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_LIGHT))
;;;2923   	{
;;;2924   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LIGHT,1);
;;;2925   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LIGHT,1);
;;;2926        }
;;;2927   else 
;;;2928   	{
;;;2929   	if(sk_av_stat[0]!=sasON) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LIGHT,1);
;;;2930        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LIGHT,1);
;;;2931   	}
;;;2932   
;;;2933   
;;;2934   //  
;;;2935   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_LOAD_OFF))
;;;2936   	{
;;;2937   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LOAD_OFF,1);
;;;2938   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LOAD_OFF,1);
;;;2939        }
;;;2940   else if(tloaddisable_cmnd==0)
;;;2941   	{
;;;2942   	SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LOAD_OFF,1);
;;;2943   	}
;;;2944   else if((tloaddisable_cmnd)&&(tloaddisable_cmnd<=11))
;;;2945   	{
;;;2946   	SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LOAD_OFF,1);
;;;2947   	}
;;;2948   
;;;2949   else 
;;;2950   	{
;;;2951   	if(!(tloaddisable_stat==tldsON)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LOAD_OFF,1);
;;;2952        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LOAD_OFF,1);
;;;2953   	} 
;;;2954   
;;;2955   //  
;;;2956   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_VENT))
;;;2957   	{
;;;2958   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;2959   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT,1);
;;;2960   	}
;;;2961   else 
;;;2962   	{
;;;2963   	if(mixer_vent_stat==mvsOFF) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;2964        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT,1);
;;;2965   	} 
;;;2966   
;;;2967   #endif
;;;2968   
;;;2969   #ifdef UKU_KONTUR
;;;2970   
;;;2971   //  
;;;2972   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_COMM))
;;;2973   	{
;;;2974   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_COMM,1);
;;;2975   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_COMM,1);
;;;2976   	}
;;;2977   else 
;;;2978   	{
;;;2979        if(  (!(avar_ind_stat&0x00007fff)) &&
;;;2980             ((!SK_REL_EN[0]) || (sk_av_stat[0]!=sasON))  &&
;;;2981             ((!SK_REL_EN[1]) || (sk_av_stat[1]!=sasON))  &&
;;;2982             ((!SK_REL_EN[2]) || (sk_av_stat[2]!=sasON))  /*&&
;;;2983             ((!SK_REL_EN[3]) || (sk_av_stat[3]!=sasON))*/  )SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_COMM,1);
;;;2984        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_COMM,1);
;;;2985   	}
;;;2986   
;;;2987   	
;;;2988   //rel_warm_plazma=0;
;;;2989   //    
;;;2990   /*
;;;2991   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_WARM))
;;;2992   	{
;;;2993   	if(mess_data[1]==0)
;;;2994   		{
;;;2995   		SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_WARM,1);
;;;2996   		rel_warm_plazma=1;
;;;2997   		}
;;;2998   	else if(mess_data[1]==1) 
;;;2999   		{
;;;3000   		SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_WARM,1);
;;;3001   		rel_warm_plazma=2;
;;;3002   		}
;;;3003        }
;;;3004   else 
;;;3005   	{
;;;3006   	if(warm_stat_k==wsOFF) 
;;;3007   		{
;;;3008   		SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_WARM,1);
;;;3009   		rel_warm_plazma=3;
;;;3010   		}
;;;3011        else 
;;;3012   		{
;;;3013   		SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_WARM,1);
;;;3014   		rel_warm_plazma=4;
;;;3015   		}
;;;3016   	}
;;;3017   */
;;;3018   // 
;;;3019   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_LIGHT))
;;;3020   	{
;;;3021   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LIGHT,1);
;;;3022   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LIGHT,1);
;;;3023        }
;;;3024   else 
;;;3025   	{
;;;3026   	if(sk_av_stat[0]!=sasON) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LIGHT,1);
;;;3027        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LIGHT,1);
;;;3028   	}
;;;3029   
;;;3030   
;;;3031   
;;;3032   //  
;;;3033   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_LOAD_OFF))
;;;3034   	{
;;;3035   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LOAD_OFF,1);
;;;3036   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LOAD_OFF,1);
;;;3037        }
;;;3038   else if(tloaddisable_cmnd==0)
;;;3039   	{
;;;3040   	SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LOAD_OFF,1);
;;;3041   	}
;;;3042   else if((tloaddisable_cmnd)&&(tloaddisable_cmnd<=11))
;;;3043   	{
;;;3044   	SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LOAD_OFF,1);
;;;3045   	}
;;;3046   
;;;3047   else 
;;;3048   	{
;;;3049   	if(!(tloaddisable_stat==tldsON)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LOAD_OFF,1);
;;;3050        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LOAD_OFF,1);
;;;3051   	} 
;;;3052   
;;;3053   //    
;;;3054   if(RELE_LOG)
;;;3055   	{
;;;3056   	if((mess_find_unvol(MESS2RELE_HNDL))&&(mess_data[0]==PARAM_RELE_VENT_WARM))
;;;3057   		{
;;;3058   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT_WARM,1);
;;;3059   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT_WARM,1);
;;;3060   		}
;;;3061   	else 
;;;3062   		{
;;;3063   		if(warm_stat_k==wsOFF) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT_WARM,1);
;;;3064   	     else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT_WARM,1);
;;;3065   		} 
;;;3066   
;;;3067   	}
;;;3068   else 
;;;3069   	{
;;;3070   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_VENT_WARM))
;;;3071   		{
;;;3072   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT_WARM,1);
;;;3073   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT_WARM,1);
;;;3074   		}
;;;3075   	else 
;;;3076   		{
;;;3077   		if(vent_stat_k==vsOFF) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT_WARM,1);
;;;3078   	     else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT_WARM,1);
;;;3079   		} 
;;;3080   	}
;;;3081   #endif
;;;3082   
;;;3083   #ifdef UKU_6U
;;;3084   //  
;;;3085   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BAT1))
;;;3086   	{
;;;3087   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT1,1);
;;;3088   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT1,1);
;;;3089        }
;;;3090   else 
;;;3091   	{
;;;3092   	if(!(avar_ind_stat&0x00000002)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT1,1);
;;;3093        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT1,1);
;;;3094   	} 
;;;3095   
;;;3096   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BAT2))
;;;3097   	{
;;;3098   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT2,1);
;;;3099   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT2,1);
;;;3100       }
;;;3101   else if(NPN_OUT==npnoRELEAVBAT2)
;;;3102   	{
;;;3103   	if(npn_stat==npnsOFF)//&&(mess_find_unvol(MESS2RELE_HNDL))&&(mess_data[0]==PARAM_RELE_NPN))
;;;3104   		{
;;;3105   		/*if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT2,1);
;;;3106   		else if(mess_data[1]==1)*/ SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT2,1);
;;;3107        	}
;;;3108   	else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT2,1);
;;;3109   	}
;;;3110   else 
;;;3111   	{
;;;3112   	if(!(avar_ind_stat&0x00000004)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT2,1);
;;;3113       else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT2,1);
;;;3114   	} 
;;;3115   
;;;3116   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BPS))
;;;3117   	{
;;;3118   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
;;;3119   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
;;;3120        }
;;;3121   else 
;;;3122   	{
;;;3123   	if(!(avar_ind_stat&0x000007f8)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
;;;3124        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
;;;3125   	} 
;;;3126   
;;;3127   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_VENT))
;;;3128   	{
;;;3129   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT,1);
;;;3130   	else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;3131   	}
;;;3132   else if((NPN_OUT==npnoRELEVENT))
;;;3133   	{
;;;3134   	if(npn_stat==npnsOFF)//&&(mess_find_unvol(MESS2RELE_HNDL))&&(mess_data[0]==PARAM_RELE_NPN))
;;;3135   		{
;;;3136   		/*if(mess_data[1]==0)*/ SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;3137   		//else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;3138       	}
;;;3139   	else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT,1);
;;;3140   	}
;;;3141   else 
;;;3142   	{
;;;3143   	if(!vent_stat) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT,1);
;;;3144   	else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;3145   	}
;;;3146   
;;;3147   #endif
;;;3148   
;;;3149   #ifdef UKU_220
;;;3150   //  
;;;3151   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BAT))
;;;3152   	{
;;;3153   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT,1);
;;;3154   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT,1);
;;;3155        }
;;;3156   else 
;;;3157   	{
;;;3158   	if(!(avar_ind_stat&0x00000002)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT,1);
;;;3159        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT,1);
;;;3160   	} 
;;;3161   
;;;3162   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BPS))
;;;3163   	{
;;;3164   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
;;;3165   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
;;;3166        }
;;;3167   else 
;;;3168   	{
;;;3169   	if(!(avar_ind_stat&0x000007f8)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
;;;3170        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
;;;3171   	} 
;;;3172   
;;;3173   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_VENT))
;;;3174   	{
;;;3175   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT,1);
;;;3176   	else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;3177   	}
;;;3178   else 
;;;3179   	{
;;;3180   	if((RELE_VENT_LOGIC==0)||(RELE_VENT_LOGIC==1))
;;;3181   		{
;;;3182   		if(vent_stat) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT,1);
;;;3183   		else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;3184   		}
;;;3185   	else 
;;;3186   		{
;;;3187   		if((avar_ind_stat&0x00000004)) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT,1);
;;;3188        	else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;3189   		}
;;;3190   	}
;;;3191   
;;;3192   #endif
;;;3193   
;;;3194   #ifdef UKU_220_V2
;;;3195   //  
;;;3196   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BAT))
;;;3197   	{
;;;3198   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT,1);
;;;3199   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT,1);
;;;3200        }
;;;3201   else 
;;;3202   	{
;;;3203   	if(!(avar_ind_stat&0x00000002)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT,1);
;;;3204        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT,1);
;;;3205   	} 
;;;3206   
;;;3207   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BPS))
;;;3208   	{
;;;3209   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
;;;3210   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
;;;3211        }
;;;3212   else 
;;;3213   	{
;;;3214   	if(!(avar_ind_stat&0x000007f8)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
;;;3215        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
;;;3216   	} 
;;;3217   
;;;3218   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_VENT))
;;;3219   	{
;;;3220   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT,1);
;;;3221   	else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;3222   	}
;;;3223   else 
;;;3224   	{
;;;3225   	if((RELE_VENT_LOGIC==0)||(RELE_VENT_LOGIC==1))
;;;3226   		{
;;;3227   		if(vent_stat) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT,1);
;;;3228   		else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;3229   		}
;;;3230   	else 
;;;3231   		{
;;;3232   		if((avar_ind_stat&0x00000004)) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT,1);
;;;3233        	else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;3234   		}
;;;3235   	}
;;;3236   
;;;3237   #endif
;;;3238   
;;;3239   #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;3240   
;;;3241   if((AUSW_MAIN==22010)||(AUSW_MAIN==22011))
001a04  4870              LDR      r0,|L1.7112|
;;;3242   	{
;;;3243   	#ifndef UKU2071x
;;;3244   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_NET))
;;;3245   		{
;;;3246   		if(mess_data[1]==0) SET_REG(LPC_GPIO3->FIOSET,1,25,1);
;;;3247   		else SET_REG(LPC_GPIO3->FIOCLR,1,25,1);
;;;3248   		}
;;;3249   	else	if(!(avar_ind_stat&0x00000001)) SET_REG(LPC_GPIO3->FIOSET,1,25,1);
;;;3250   	else SET_REG(LPC_GPIO3->FIOCLR,1,25,1);
;;;3251   	#endif
;;;3252   	#ifdef UKU2071x
;;;3253   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_NET))
;;;3254   		{
;;;3255   		if(mess_data[1]==0) SET_REG(LPC_GPIO3->FIOCLR,1,25,1);
;;;3256   		else SET_REG(LPC_GPIO3->FIOSET,1,25,1);
;;;3257   		}
;;;3258   	else	if(!(avar_ind_stat&0x00000001)) SET_REG(LPC_GPIO3->FIOCLR,1,25,1);
;;;3259   	else SET_REG(LPC_GPIO3->FIOSET,1,25,1);
;;;3260   	#endif
;;;3261   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BPS))
;;;3262   		{
;;;3263   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,7,1);
;;;3264   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,7,1);
;;;3265   	     }
;;;3266   	else 
;;;3267   		{
;;;3268   		if(!(avar_ind_stat&0x100007f8)) SET_REG(LPC_GPIO0->FIOCLR,1,7,1);
;;;3269   	     else SET_REG(LPC_GPIO0->FIOSET,1,7,1);
;;;3270   		} 
;;;3271   
;;;3272   	//  
;;;3273   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BAT))
;;;3274   		{
;;;3275   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,4,1);
;;;3276   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,4,1);
;;;3277        	}
;;;3278   	else 
;;;3279   		{
;;;3280   		if(!(ips_bat_av_stat)) SET_REG(LPC_GPIO0->FIOCLR,1,4,1);
001a06  f8df81c4          LDR      r8,|L1.7116|
001a0a  4f71              LDR      r7,|L1.7120|
001a0c  8800              LDRH     r0,[r0,#0]            ;3241  ; AUSW_MAIN
001a0e  f5a041aa          SUB      r1,r0,#0x5500         ;3241
001a12  39fa              SUBS     r1,r1,#0xfa           ;3241
001a14  d001              BEQ      |L1.6682|
001a16  1e49              SUBS     r1,r1,#1              ;3241
001a18  d16f              BNE      |L1.6906|
                  |L1.6682|
001a1a  20d2              MOVS     r0,#0xd2              ;3253
001a1c  f7fffffe          BL       mess_find_unvol
001a20  b110              CBZ      r0,|L1.6696|
001a22  6828              LDR      r0,[r5,#0]            ;3253  ; mess_data
001a24  2866              CMP      r0,#0x66              ;3253
001a26  d043              BEQ      |L1.6832|
                  |L1.6696|
001a28  6830              LDR      r0,[r6,#0]            ;3258  ; avar_ind_stat
001a2a  07c0              LSLS     r0,r0,#31             ;3258
001a2c  d04d              BEQ      |L1.6858|
001a2e  6fa0              LDR      r0,[r4,#0x78]         ;3259
001a30  f0407000          ORR      r0,r0,#0x2000000      ;3259
001a34  67a0              STR      r0,[r4,#0x78]         ;3259
                  |L1.6710|
001a36  20d2              MOVS     r0,#0xd2              ;3261
001a38  f7fffffe          BL       mess_find_unvol
001a3c  b110              CBZ      r0,|L1.6724|
001a3e  6828              LDR      r0,[r5,#0]            ;3261  ; mess_data
001a40  286a              CMP      r0,#0x6a              ;3261
001a42  d047              BEQ      |L1.6868|
                  |L1.6724|
001a44  6830              LDR      r0,[r6,#0]            ;3268  ; avar_ind_stat
001a46  4238              TST      r0,r7                 ;3268
001a48  d052              BEQ      |L1.6896|
001a4a  69a0              LDR      r0,[r4,#0x18]         ;3269
001a4c  f0400080          ORR      r0,r0,#0x80           ;3269
001a50  61a0              STR      r0,[r4,#0x18]         ;3269
                  |L1.6738|
001a52  20d2              MOVS     r0,#0xd2              ;3273
001a54  f7fffffe          BL       mess_find_unvol
001a58  b110              CBZ      r0,|L1.6752|
001a5a  6828              LDR      r0,[r5,#0]            ;3273  ; mess_data
001a5c  2867              CMP      r0,#0x67              ;3273
001a5e  d04d              BEQ      |L1.6908|
                  |L1.6752|
001a60  f8980000          LDRB     r0,[r8,#0]  ; ips_bat_av_stat
001a64  b380              CBZ      r0,|L1.6856|
;;;3281        	else SET_REG(LPC_GPIO0->FIOSET,1,4,1);
001a66  69a0              LDR      r0,[r4,#0x18]
001a68  f0400010          ORR      r0,r0,#0x10
001a6c  61a0              STR      r0,[r4,#0x18]
001a6e  e1ef              B        |L1.7760|
                  |L1.6768|
001a70  6868              LDR      r0,[r5,#4]            ;2780  ; mess_data
001a72  2801              CMP      r0,#1                 ;2780
001a74  d006              BEQ      |L1.6788|
001a76  2800              CMP      r0,#0                 ;2781
001a78  d1b5              BNE      |L1.6630|
001a7a  69e0              LDR      r0,[r4,#0x1c]         ;2781
001a7c  f0405000          ORR      r0,r0,#0x20000000     ;2781
001a80  61e0              STR      r0,[r4,#0x1c]         ;2781
001a82  e7b0              B        |L1.6630|
                  |L1.6788|
001a84  69a0              LDR      r0,[r4,#0x18]         ;2780
001a86  f0405000          ORR      r0,r0,#0x20000000     ;2780
001a8a  61a0              STR      r0,[r4,#0x18]         ;2780
001a8c  e7ab              B        |L1.6630|
                  |L1.6798|
001a8e  6868              LDR      r0,[r5,#4]            ;2800  ; mess_data
001a90  b120              CBZ      r0,|L1.6812|
001a92  6fa0              LDR      r0,[r4,#0x78]         ;2801
001a94  f0407000          ORR      r0,r0,#0x2000000      ;2801
001a98  67a0              STR      r0,[r4,#0x78]         ;2801
001a9a  e7b3              B        |L1.6660|
                  |L1.6812|
001a9c  6fe0              LDR      r0,[r4,#0x7c]         ;2800
001a9e  f0407000          ORR      r0,r0,#0x2000000      ;2800
001aa2  67e0              STR      r0,[r4,#0x7c]         ;2800
001aa4  e7ae              B        |L1.6660|
                  |L1.6822|
001aa6  6fe0              LDR      r0,[r4,#0x7c]         ;2803
001aa8  f0407000          ORR      r0,r0,#0x2000000      ;2803
001aac  67e0              STR      r0,[r4,#0x7c]         ;2803
001aae  e7a9              B        |L1.6660|
                  |L1.6832|
001ab0  6868              LDR      r0,[r5,#4]            ;3255  ; mess_data
001ab2  b120              CBZ      r0,|L1.6846|
001ab4  6fa0              LDR      r0,[r4,#0x78]         ;3256
001ab6  f0407000          ORR      r0,r0,#0x2000000      ;3256
001aba  67a0              STR      r0,[r4,#0x78]         ;3256
001abc  e7bb              B        |L1.6710|
                  |L1.6846|
001abe  6fe0              LDR      r0,[r4,#0x7c]         ;3255
001ac0  f0407000          ORR      r0,r0,#0x2000000      ;3255
001ac4  67e0              STR      r0,[r4,#0x7c]         ;3255
001ac6  e7b6              B        |L1.6710|
                  |L1.6856|
001ac8  e027              B        |L1.6938|
                  |L1.6858|
001aca  6fe0              LDR      r0,[r4,#0x7c]         ;3258
001acc  f0407000          ORR      r0,r0,#0x2000000      ;3258
001ad0  67e0              STR      r0,[r4,#0x7c]         ;3258
001ad2  e7b0              B        |L1.6710|
                  |L1.6868|
001ad4  6868              LDR      r0,[r5,#4]            ;3263  ; mess_data
001ad6  b130              CBZ      r0,|L1.6886|
001ad8  2801              CMP      r0,#1                 ;3264
001ada  d1ba              BNE      |L1.6738|
001adc  69a0              LDR      r0,[r4,#0x18]         ;3264
001ade  f0400080          ORR      r0,r0,#0x80           ;3264
001ae2  61a0              STR      r0,[r4,#0x18]         ;3264
001ae4  e7b5              B        |L1.6738|
                  |L1.6886|
001ae6  69e0              LDR      r0,[r4,#0x1c]         ;3263
001ae8  f0400080          ORR      r0,r0,#0x80           ;3263
001aec  61e0              STR      r0,[r4,#0x1c]         ;3263
001aee  e7b0              B        |L1.6738|
                  |L1.6896|
001af0  69e0              LDR      r0,[r4,#0x1c]         ;3268
001af2  f0400080          ORR      r0,r0,#0x80           ;3268
001af6  61e0              STR      r0,[r4,#0x1c]         ;3268
001af8  e7ab              B        |L1.6738|
                  |L1.6906|
001afa  e013              B        |L1.6948|
                  |L1.6908|
001afc  6868              LDR      r0,[r5,#4]            ;3275  ; mess_data
001afe  b110              CBZ      r0,|L1.6918|
001b00  2801              CMP      r0,#1                 ;3276
001b02  d005              BEQ      |L1.6928|
001b04  e1a4              B        |L1.7760|
                  |L1.6918|
001b06  69e0              LDR      r0,[r4,#0x1c]         ;3275
001b08  f0400010          ORR      r0,r0,#0x10           ;3275
001b0c  61e0              STR      r0,[r4,#0x1c]         ;3275
001b0e  e19f              B        |L1.7760|
                  |L1.6928|
001b10  69a0              LDR      r0,[r4,#0x18]         ;3276
001b12  f0400010          ORR      r0,r0,#0x10           ;3276
001b16  61a0              STR      r0,[r4,#0x18]         ;3276
001b18  e19a              B        |L1.7760|
                  |L1.6938|
001b1a  69e0              LDR      r0,[r4,#0x1c]         ;3280
001b1c  f0400010          ORR      r0,r0,#0x10           ;3280
001b20  61e0              STR      r0,[r4,#0x1c]         ;3280
001b22  e195              B        |L1.7760|
                  |L1.6948|
;;;3282   		}
;;;3283   	}
;;;3284   
;;;3285   else	if(AUSW_MAIN==22023)
001b24  f5a041ac          SUB      r1,r0,#0x5600
001b28  3907              SUBS     r1,#7
001b2a  d173              BNE      |L1.7188|
;;;3286   	{
;;;3287   
;;;3288   	//  
;;;3289   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BAT))
001b2c  20d2              MOVS     r0,#0xd2
001b2e  f7fffffe          BL       mess_find_unvol
001b32  b110              CBZ      r0,|L1.6970|
001b34  6828              LDR      r0,[r5,#0]  ; mess_data
001b36  2867              CMP      r0,#0x67
001b38  d023              BEQ      |L1.7042|
                  |L1.6970|
;;;3290   		{
;;;3291   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,4,1);
;;;3292   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,4,1);
;;;3293        	}
;;;3294   	else 
;;;3295   		{
;;;3296   		if(!(ips_bat_av_stat)) SET_REG(LPC_GPIO0->FIOCLR,1,4,1);
001b3a  f8980000          LDRB     r0,[r8,#0]  ; ips_bat_av_stat
001b3e  b348              CBZ      r0,|L1.7060|
;;;3297        	else SET_REG(LPC_GPIO0->FIOSET,1,4,1);
001b40  69a0              LDR      r0,[r4,#0x18]
001b42  f0400010          ORR      r0,r0,#0x10
001b46  61a0              STR      r0,[r4,#0x18]
                  |L1.6984|
;;;3298   		} 
;;;3299   
;;;3300   
;;;3301   	//         .    
;;;3302   	#ifndef UKU2071x
;;;3303   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_NET))
;;;3304   		{
;;;3305   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;3306   		else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_NET,1);
;;;3307   		}
;;;3308   	else	if(!(avar_ind_stat&0x00000001)) SET_REG(LPC_GPIO1->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;3309   	else SET_REG(LPC_GPIO3->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;3310   	#endif
;;;3311   	#ifdef UKU2071x
;;;3312   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_NET))
001b48  20d2              MOVS     r0,#0xd2
001b4a  f7fffffe          BL       mess_find_unvol
001b4e  b110              CBZ      r0,|L1.6998|
001b50  6828              LDR      r0,[r5,#0]  ; mess_data
001b52  2866              CMP      r0,#0x66
001b54  d048              BEQ      |L1.7144|
                  |L1.6998|
;;;3313   		{
;;;3314   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_NET,1);
;;;3315   		else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;3316   		}
;;;3317   	else	if(!(avar_ind_stat&0x00000001)) SET_REG(LPC_GPIO1->FIOSET,1,SHIFT_REL_AV_NET,1);
001b56  6830              LDR      r0,[r6,#0]  ; avar_ind_stat
001b58  07c0              LSLS     r0,r0,#31
001b5a  d051              BEQ      |L1.7168|
;;;3318   	else SET_REG(LPC_GPIO3->FIOSET,1,SHIFT_REL_AV_NET,1);
001b5c  6fa0              LDR      r0,[r4,#0x78]
001b5e  f0407000          ORR      r0,r0,#0x2000000
001b62  67a0              STR      r0,[r4,#0x78]
                  |L1.7012|
;;;3319   	#endif
;;;3320   
;;;3321   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BPS))
001b64  20d2              MOVS     r0,#0xd2
001b66  f7fffffe          BL       mess_find_unvol
001b6a  b110              CBZ      r0,|L1.7026|
001b6c  6828              LDR      r0,[r5,#0]  ; mess_data
001b6e  286a              CMP      r0,#0x6a
001b70  d04b              BEQ      |L1.7178|
                  |L1.7026|
;;;3322   		{
;;;3323   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,7,1);
;;;3324   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,7,1);
;;;3325   	     }
;;;3326   	else 
;;;3327   		{
;;;3328   		if(!(avar_ind_stat&0x100007f8)) SET_REG(LPC_GPIO0->FIOCLR,1,7,1);
001b72  6830              LDR      r0,[r6,#0]  ; avar_ind_stat
001b74  4238              TST      r0,r7
001b76  d058              BEQ      |L1.7210|
;;;3329   	     else SET_REG(LPC_GPIO0->FIOSET,1,7,1);
001b78  69a0              LDR      r0,[r4,#0x18]
001b7a  f0400080          ORR      r0,r0,#0x80
001b7e  61a0              STR      r0,[r4,#0x18]
001b80  e166              B        |L1.7760|
                  |L1.7042|
001b82  6868              LDR      r0,[r5,#4]            ;3291  ; mess_data
001b84  b138              CBZ      r0,|L1.7062|
001b86  2801              CMP      r0,#1                 ;3292
001b88  d1de              BNE      |L1.6984|
001b8a  69a0              LDR      r0,[r4,#0x18]         ;3292
001b8c  f0400010          ORR      r0,r0,#0x10           ;3292
001b90  61a0              STR      r0,[r4,#0x18]         ;3292
001b92  e7d9              B        |L1.6984|
                  |L1.7060|
001b94  e023              B        |L1.7134|
                  |L1.7062|
001b96  e01d              B        |L1.7124|
                  |L1.7064|
                          DCD      0x2009c000
                  |L1.7068|
                          DCD      ||area_number.21||
                  |L1.7072|
                          DCD      bps
                  |L1.7076|
                          DCD      NUMIST
                  |L1.7080|
                          DCD      0x4002c000
                  |L1.7084|
                          DCD      0xfff000ff
                  |L1.7088|
                          DCD      bat
                  |L1.7092|
                          DCD      tbatdisable_stat
                  |L1.7096|
                          DCD      tbatdisable_cmnd
                  |L1.7100|
                          DCD      main_1Hz_cnt
                  |L1.7104|
                          DCD      mess_data
                  |L1.7108|
                          DCD      avar_ind_stat
                  |L1.7112|
                          DCD      AUSW_MAIN
                  |L1.7116|
                          DCD      ips_bat_av_stat
                  |L1.7120|
                          DCD      0x100007f8
                  |L1.7124|
001bd4  69e0              LDR      r0,[r4,#0x1c]         ;3291
001bd6  f0400010          ORR      r0,r0,#0x10           ;3291
001bda  61e0              STR      r0,[r4,#0x1c]         ;3291
001bdc  e7b4              B        |L1.6984|
                  |L1.7134|
001bde  69e0              LDR      r0,[r4,#0x1c]         ;3296
001be0  f0400010          ORR      r0,r0,#0x10           ;3296
001be4  61e0              STR      r0,[r4,#0x1c]         ;3296
001be6  e7af              B        |L1.6984|
                  |L1.7144|
001be8  6868              LDR      r0,[r5,#4]            ;3314  ; mess_data
001bea  b120              CBZ      r0,|L1.7158|
001bec  69e0              LDR      r0,[r4,#0x1c]         ;3315
001bee  f0407000          ORR      r0,r0,#0x2000000      ;3315
001bf2  61e0              STR      r0,[r4,#0x1c]         ;3315
001bf4  e7b6              B        |L1.7012|
                  |L1.7158|
001bf6  69a0              LDR      r0,[r4,#0x18]         ;3314
001bf8  f0407000          ORR      r0,r0,#0x2000000      ;3314
001bfc  61a0              STR      r0,[r4,#0x18]         ;3314
001bfe  e7b1              B        |L1.7012|
                  |L1.7168|
001c00  6ba0              LDR      r0,[r4,#0x38]         ;3317
001c02  f0407000          ORR      r0,r0,#0x2000000      ;3317
001c06  63a0              STR      r0,[r4,#0x38]         ;3317
001c08  e7ac              B        |L1.7012|
                  |L1.7178|
001c0a  6868              LDR      r0,[r5,#4]            ;3323  ; mess_data
001c0c  b118              CBZ      r0,|L1.7190|
001c0e  2801              CMP      r0,#1                 ;3324
001c10  d006              BEQ      |L1.7200|
001c12  e11d              B        |L1.7760|
                  |L1.7188|
001c14  e00e              B        |L1.7220|
                  |L1.7190|
001c16  69e0              LDR      r0,[r4,#0x1c]         ;3323
001c18  f0400080          ORR      r0,r0,#0x80           ;3323
001c1c  61e0              STR      r0,[r4,#0x1c]         ;3323
001c1e  e117              B        |L1.7760|
                  |L1.7200|
001c20  69a0              LDR      r0,[r4,#0x18]         ;3324
001c22  f0400080          ORR      r0,r0,#0x80           ;3324
001c26  61a0              STR      r0,[r4,#0x18]         ;3324
001c28  e112              B        |L1.7760|
                  |L1.7210|
001c2a  69e0              LDR      r0,[r4,#0x1c]         ;3328
001c2c  f0400080          ORR      r0,r0,#0x80           ;3328
001c30  61e0              STR      r0,[r4,#0x1c]         ;3328
001c32  e10d              B        |L1.7760|
                  |L1.7220|
;;;3330   		} 
;;;3331   	}
;;;3332   else	if(AUSW_MAIN==22043)
001c34  f5a041ac          SUB      r1,r0,#0x5600
001c38  391b              SUBS     r1,r1,#0x1b
001c3a  d170              BNE      |L1.7454|
;;;3333   	{
;;;3334   	//  
;;;3335   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BAT))
001c3c  20d2              MOVS     r0,#0xd2
001c3e  f7fffffe          BL       mess_find_unvol
001c42  b110              CBZ      r0,|L1.7242|
001c44  6828              LDR      r0,[r5,#0]  ; mess_data
001c46  2867              CMP      r0,#0x67
001c48  d031              BEQ      |L1.7342|
                  |L1.7242|
;;;3336   		{
;;;3337   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,4,1);
;;;3338   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,4,1);
;;;3339        	}
;;;3340   	else 
;;;3341   		{
;;;3342   		if(!(ips_bat_av_stat)) SET_REG(LPC_GPIO0->FIOCLR,1,4,1);
001c4a  f8980000          LDRB     r0,[r8,#0]  ; ips_bat_av_stat
001c4e  b3b8              CBZ      r0,|L1.7360|
;;;3343        	else SET_REG(LPC_GPIO0->FIOSET,1,4,1);
001c50  69a0              LDR      r0,[r4,#0x18]
001c52  f0400010          ORR      r0,r0,#0x10
001c56  61a0              STR      r0,[r4,#0x18]
                  |L1.7256|
;;;3344   		} 
;;;3345   	//         .    
;;;3346   	#ifndef UKU2071x 
;;;3347   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_NET))
;;;3348   		{
;;;3349   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;3350   		else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_NET,1);
;;;3351   		}
;;;3352   	else	if(!(avar_ind_stat&0x00000001)) SET_REG(LPC_GPIO1->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;3353   	else SET_REG(LPC_GPIO3->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;3354   	#endif
;;;3355   	#ifdef UKU2071x 
;;;3356   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_NET))
001c58  20d2              MOVS     r0,#0xd2
001c5a  f7fffffe          BL       mess_find_unvol
001c5e  b110              CBZ      r0,|L1.7270|
001c60  6828              LDR      r0,[r5,#0]  ; mess_data
001c62  2866              CMP      r0,#0x66
001c64  d037              BEQ      |L1.7382|
                  |L1.7270|
;;;3357   		{
;;;3358   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_NET,1);
;;;3359   		else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;3360   		}
;;;3361   	else	if(!(avar_ind_stat&0x00000001)) SET_REG(LPC_GPIO1->FIOSET,1,SHIFT_REL_AV_NET,1);
001c66  6830              LDR      r0,[r6,#0]  ; avar_ind_stat
001c68  07c0              LSLS     r0,r0,#31
001c6a  d040              BEQ      |L1.7406|
;;;3362   	else SET_REG(LPC_GPIO3->FIOSET,1,SHIFT_REL_AV_NET,1);
001c6c  6fa0              LDR      r0,[r4,#0x78]
001c6e  f0407000          ORR      r0,r0,#0x2000000
001c72  67a0              STR      r0,[r4,#0x78]
                  |L1.7284|
;;;3363   	#endif
;;;3364   
;;;3365   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BPS))
001c74  20d2              MOVS     r0,#0xd2
001c76  f7fffffe          BL       mess_find_unvol
001c7a  b110              CBZ      r0,|L1.7298|
001c7c  6828              LDR      r0,[r5,#0]  ; mess_data
001c7e  286a              CMP      r0,#0x6a
001c80  d03a              BEQ      |L1.7416|
                  |L1.7298|
;;;3366   		{
;;;3367   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,7,1);
;;;3368   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,7,1);
;;;3369   	     }
;;;3370   	else 
;;;3371   		{
;;;3372   		if(!(avar_ind_stat&0x100007f8)) SET_REG(LPC_GPIO0->FIOCLR,1,7,1);
001c82  6830              LDR      r0,[r6,#0]  ; avar_ind_stat
001c84  4238              TST      r0,r7
001c86  d045              BEQ      |L1.7444|
;;;3373   	     else SET_REG(LPC_GPIO0->FIOSET,1,7,1);
001c88  69a0              LDR      r0,[r4,#0x18]
001c8a  f0400080          ORR      r0,r0,#0x80
001c8e  61a0              STR      r0,[r4,#0x18]
                  |L1.7312|
;;;3374   		}
;;;3375   	//  
;;;3376   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BPS))
001c90  20d2              MOVS     r0,#0xd2
001c92  f7fffffe          BL       mess_find_unvol
001c96  b110              CBZ      r0,|L1.7326|
001c98  6828              LDR      r0,[r5,#0]  ; mess_data
001c9a  286a              CMP      r0,#0x6a
001c9c  d040              BEQ      |L1.7456|
                  |L1.7326|
;;;3377   		{
;;;3378   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
;;;3379   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
;;;3380        	}
;;;3381   	else 
;;;3382   		{
;;;3383   		if(!(avar_ind_stat&0x100007f8)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
001c9e  6830              LDR      r0,[r6,#0]  ; avar_ind_stat
001ca0  4238              TST      r0,r7
001ca2  d04c              BEQ      |L1.7486|
;;;3384        	else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
001ca4  69a0              LDR      r0,[r4,#0x18]
001ca6  f0400020          ORR      r0,r0,#0x20
001caa  61a0              STR      r0,[r4,#0x18]
001cac  e0d0              B        |L1.7760|
                  |L1.7342|
001cae  6868              LDR      r0,[r5,#4]            ;3337  ; mess_data
001cb0  b138              CBZ      r0,|L1.7362|
001cb2  2801              CMP      r0,#1                 ;3338
001cb4  d1d0              BNE      |L1.7256|
001cb6  69a0              LDR      r0,[r4,#0x18]         ;3338
001cb8  f0400010          ORR      r0,r0,#0x10           ;3338
001cbc  61a0              STR      r0,[r4,#0x18]         ;3338
001cbe  e7cb              B        |L1.7256|
                  |L1.7360|
001cc0  e004              B        |L1.7372|
                  |L1.7362|
001cc2  69e0              LDR      r0,[r4,#0x1c]         ;3337
001cc4  f0400010          ORR      r0,r0,#0x10           ;3337
001cc8  61e0              STR      r0,[r4,#0x1c]         ;3337
001cca  e7c5              B        |L1.7256|
                  |L1.7372|
001ccc  69e0              LDR      r0,[r4,#0x1c]         ;3342
001cce  f0400010          ORR      r0,r0,#0x10           ;3342
001cd2  61e0              STR      r0,[r4,#0x1c]         ;3342
001cd4  e7c0              B        |L1.7256|
                  |L1.7382|
001cd6  6868              LDR      r0,[r5,#4]            ;3358  ; mess_data
001cd8  b120              CBZ      r0,|L1.7396|
001cda  69e0              LDR      r0,[r4,#0x1c]         ;3359
001cdc  f0407000          ORR      r0,r0,#0x2000000      ;3359
001ce0  61e0              STR      r0,[r4,#0x1c]         ;3359
001ce2  e7c7              B        |L1.7284|
                  |L1.7396|
001ce4  69a0              LDR      r0,[r4,#0x18]         ;3358
001ce6  f0407000          ORR      r0,r0,#0x2000000      ;3358
001cea  61a0              STR      r0,[r4,#0x18]         ;3358
001cec  e7c2              B        |L1.7284|
                  |L1.7406|
001cee  6ba0              LDR      r0,[r4,#0x38]         ;3361
001cf0  f0407000          ORR      r0,r0,#0x2000000      ;3361
001cf4  63a0              STR      r0,[r4,#0x38]         ;3361
001cf6  e7bd              B        |L1.7284|
                  |L1.7416|
001cf8  6868              LDR      r0,[r5,#4]            ;3367  ; mess_data
001cfa  b130              CBZ      r0,|L1.7434|
001cfc  2801              CMP      r0,#1                 ;3368
001cfe  d1c7              BNE      |L1.7312|
001d00  69a0              LDR      r0,[r4,#0x18]         ;3368
001d02  f0400080          ORR      r0,r0,#0x80           ;3368
001d06  61a0              STR      r0,[r4,#0x18]         ;3368
001d08  e7c2              B        |L1.7312|
                  |L1.7434|
001d0a  69e0              LDR      r0,[r4,#0x1c]         ;3367
001d0c  f0400080          ORR      r0,r0,#0x80           ;3367
001d10  61e0              STR      r0,[r4,#0x1c]         ;3367
001d12  e7bd              B        |L1.7312|
                  |L1.7444|
001d14  69e0              LDR      r0,[r4,#0x1c]         ;3372
001d16  f0400080          ORR      r0,r0,#0x80           ;3372
001d1a  61e0              STR      r0,[r4,#0x1c]         ;3372
001d1c  e7b8              B        |L1.7312|
                  |L1.7454|
001d1e  e013              B        |L1.7496|
                  |L1.7456|
001d20  6868              LDR      r0,[r5,#4]            ;3378  ; mess_data
001d22  b110              CBZ      r0,|L1.7466|
001d24  2801              CMP      r0,#1                 ;3379
001d26  d005              BEQ      |L1.7476|
001d28  e092              B        |L1.7760|
                  |L1.7466|
001d2a  69e0              LDR      r0,[r4,#0x1c]         ;3378
001d2c  f0400020          ORR      r0,r0,#0x20           ;3378
001d30  61e0              STR      r0,[r4,#0x1c]         ;3378
001d32  e08d              B        |L1.7760|
                  |L1.7476|
001d34  69a0              LDR      r0,[r4,#0x18]         ;3379
001d36  f0400020          ORR      r0,r0,#0x20           ;3379
001d3a  61a0              STR      r0,[r4,#0x18]         ;3379
001d3c  e088              B        |L1.7760|
                  |L1.7486|
001d3e  69e0              LDR      r0,[r4,#0x1c]         ;3383
001d40  f0400020          ORR      r0,r0,#0x20           ;3383
001d44  61e0              STR      r0,[r4,#0x1c]         ;3383
001d46  e083              B        |L1.7760|
                  |L1.7496|
;;;3385   		} 
;;;3386   	}
;;;3387   else	if(AUSW_MAIN==22033)
001d48  f5a041ac          SUB      r1,r0,#0x5600
001d4c  3911              SUBS     r1,r1,#0x11
001d4e  d163              BNE      |L1.7704|
;;;3388   	{
;;;3389   	#ifndef UKU2071x 
;;;3390   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_NET))
;;;3391   		{
;;;3392   		if(mess_data[1]==0) SET_REG(LPC_GPIO3->FIOSET,1,25,1);
;;;3393   		else SET_REG(LPC_GPIO3->FIOCLR,1,25,1);
;;;3394   		}
;;;3395   	else	if(!(avar_ind_stat&0x00000001)) SET_REG(LPC_GPIO3->FIOSET,1,25,1);
;;;3396   	else SET_REG(LPC_GPIO3->FIOCLR,1,25,1);
;;;3397   	#endif
;;;3398   	#ifdef UKU2071x 
;;;3399   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_NET))
001d50  20d2              MOVS     r0,#0xd2
001d52  f7fffffe          BL       mess_find_unvol
001d56  b110              CBZ      r0,|L1.7518|
001d58  6828              LDR      r0,[r5,#0]  ; mess_data
001d5a  2866              CMP      r0,#0x66
001d5c  d023              BEQ      |L1.7590|
                  |L1.7518|
;;;3400   		{
;;;3401   		if(mess_data[1]==0) SET_REG(LPC_GPIO3->FIOCLR,1,25,1);
;;;3402   		else SET_REG(LPC_GPIO3->FIOSET,1,25,1);
;;;3403   		}
;;;3404   	else	if(!(avar_ind_stat&0x00000001)) SET_REG(LPC_GPIO3->FIOCLR,1,25,1);
001d5e  6830              LDR      r0,[r6,#0]  ; avar_ind_stat
001d60  07c0              LSLS     r0,r0,#31
001d62  d02c              BEQ      |L1.7614|
;;;3405   	else SET_REG(LPC_GPIO3->FIOSET,1,25,1);
001d64  6fa0              LDR      r0,[r4,#0x78]
001d66  f0407000          ORR      r0,r0,#0x2000000
001d6a  67a0              STR      r0,[r4,#0x78]
                  |L1.7532|
;;;3406   	#endif
;;;3407   	
;;;3408   	
;;;3409   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BPS))
001d6c  20d2              MOVS     r0,#0xd2
001d6e  f7fffffe          BL       mess_find_unvol
001d72  b110              CBZ      r0,|L1.7546|
001d74  6828              LDR      r0,[r5,#0]  ; mess_data
001d76  286a              CMP      r0,#0x6a
001d78  d026              BEQ      |L1.7624|
                  |L1.7546|
;;;3410   		{
;;;3411   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,7,1);
;;;3412   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,7,1);
;;;3413   	     }
;;;3414   	else 
;;;3415   		{
;;;3416   		if(!(avar_ind_stat&0x100007f8)) SET_REG(LPC_GPIO0->FIOCLR,1,7,1);
001d7a  6830              LDR      r0,[r6,#0]  ; avar_ind_stat
001d7c  4238              TST      r0,r7
001d7e  d031              BEQ      |L1.7652|
;;;3417   	     else SET_REG(LPC_GPIO0->FIOSET,1,7,1);
001d80  69a0              LDR      r0,[r4,#0x18]
001d82  f0400080          ORR      r0,r0,#0x80
001d86  61a0              STR      r0,[r4,#0x18]
                  |L1.7560|
;;;3418   		} 
;;;3419   
;;;3420   	//  
;;;3421   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BAT))
001d88  20d2              MOVS     r0,#0xd2
001d8a  f7fffffe          BL       mess_find_unvol
001d8e  b110              CBZ      r0,|L1.7574|
001d90  6828              LDR      r0,[r5,#0]  ; mess_data
001d92  2867              CMP      r0,#0x67
001d94  d02b              BEQ      |L1.7662|
                  |L1.7574|
;;;3422   		{
;;;3423   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,4,1);
;;;3424   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,4,1);
;;;3425        	}
;;;3426   	else 
;;;3427   		{
;;;3428   		if(!(ips_bat_av_stat)) SET_REG(LPC_GPIO0->FIOCLR,1,4,1);
001d96  f8980000          LDRB     r0,[r8,#0]  ; ips_bat_av_stat
001d9a  b390              CBZ      r0,|L1.7682|
;;;3429        	else SET_REG(LPC_GPIO0->FIOSET,1,4,1);
001d9c  69a0              LDR      r0,[r4,#0x18]
001d9e  f0400010          ORR      r0,r0,#0x10
001da2  61a0              STR      r0,[r4,#0x18]
001da4  e054              B        |L1.7760|
                  |L1.7590|
001da6  6868              LDR      r0,[r5,#4]            ;3401  ; mess_data
001da8  b120              CBZ      r0,|L1.7604|
001daa  6fa0              LDR      r0,[r4,#0x78]         ;3402
001dac  f0407000          ORR      r0,r0,#0x2000000      ;3402
001db0  67a0              STR      r0,[r4,#0x78]         ;3402
001db2  e7db              B        |L1.7532|
                  |L1.7604|
001db4  6fe0              LDR      r0,[r4,#0x7c]         ;3401
001db6  f0407000          ORR      r0,r0,#0x2000000      ;3401
001dba  67e0              STR      r0,[r4,#0x7c]         ;3401
001dbc  e7d6              B        |L1.7532|
                  |L1.7614|
001dbe  6fe0              LDR      r0,[r4,#0x7c]         ;3404
001dc0  f0407000          ORR      r0,r0,#0x2000000      ;3404
001dc4  67e0              STR      r0,[r4,#0x7c]         ;3404
001dc6  e7d1              B        |L1.7532|
                  |L1.7624|
001dc8  6868              LDR      r0,[r5,#4]            ;3411  ; mess_data
001dca  b130              CBZ      r0,|L1.7642|
001dcc  2801              CMP      r0,#1                 ;3412
001dce  d1db              BNE      |L1.7560|
001dd0  69a0              LDR      r0,[r4,#0x18]         ;3412
001dd2  f0400080          ORR      r0,r0,#0x80           ;3412
001dd6  61a0              STR      r0,[r4,#0x18]         ;3412
001dd8  e7d6              B        |L1.7560|
                  |L1.7642|
001dda  69e0              LDR      r0,[r4,#0x1c]         ;3411
001ddc  f0400080          ORR      r0,r0,#0x80           ;3411
001de0  61e0              STR      r0,[r4,#0x1c]         ;3411
001de2  e7d1              B        |L1.7560|
                  |L1.7652|
001de4  69e0              LDR      r0,[r4,#0x1c]         ;3416
001de6  f0400080          ORR      r0,r0,#0x80           ;3416
001dea  61e0              STR      r0,[r4,#0x1c]         ;3416
001dec  e7cc              B        |L1.7560|
                  |L1.7662|
001dee  6868              LDR      r0,[r5,#4]            ;3423  ; mess_data
001df0  b110              CBZ      r0,|L1.7672|
001df2  2801              CMP      r0,#1                 ;3424
001df4  d006              BEQ      |L1.7684|
001df6  e02b              B        |L1.7760|
                  |L1.7672|
001df8  69e0              LDR      r0,[r4,#0x1c]         ;3423
001dfa  f0400010          ORR      r0,r0,#0x10           ;3423
001dfe  61e0              STR      r0,[r4,#0x1c]         ;3423
001e00  e026              B        |L1.7760|
                  |L1.7682|
001e02  e004              B        |L1.7694|
                  |L1.7684|
001e04  69a0              LDR      r0,[r4,#0x18]         ;3424
001e06  f0400010          ORR      r0,r0,#0x10           ;3424
001e0a  61a0              STR      r0,[r4,#0x18]         ;3424
001e0c  e020              B        |L1.7760|
                  |L1.7694|
001e0e  69e0              LDR      r0,[r4,#0x1c]         ;3428
001e10  f0400010          ORR      r0,r0,#0x10           ;3428
001e14  61e0              STR      r0,[r4,#0x1c]         ;3428
001e16  e01b              B        |L1.7760|
                  |L1.7704|
;;;3430   		} 
;;;3431   	} 	 
;;;3432   else	
;;;3433   	{
;;;3434   	//         .    
;;;3435   	#ifndef UKU2071x 
;;;3436   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_NET))
;;;3437   		{
;;;3438   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;3439   		else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_NET,1);
;;;3440   		}
;;;3441   	else	if(!(avar_ind_stat&0x00000001)) SET_REG(LPC_GPIO1->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;3442   	else SET_REG(LPC_GPIO3->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;3443   	#endif
;;;3444   	#ifdef UKU2071x 
;;;3445   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_NET))
001e18  20d2              MOVS     r0,#0xd2
001e1a  f7fffffe          BL       mess_find_unvol
001e1e  b110              CBZ      r0,|L1.7718|
001e20  6828              LDR      r0,[r5,#0]  ; mess_data
001e22  2866              CMP      r0,#0x66
001e24  d02d              BEQ      |L1.7810|
                  |L1.7718|
;;;3446   		{
;;;3447   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_NET,1);
;;;3448   		else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;3449   		}
;;;3450   	else	if(!(avar_ind_stat&0x00000001)) SET_REG(LPC_GPIO1->FIOSET,1,SHIFT_REL_AV_NET,1);
001e26  6830              LDR      r0,[r6,#0]  ; avar_ind_stat
001e28  07c0              LSLS     r0,r0,#31
001e2a  d036              BEQ      |L1.7834|
;;;3451   	else SET_REG(LPC_GPIO3->FIOSET,1,SHIFT_REL_AV_NET,1);
001e2c  6fa0              LDR      r0,[r4,#0x78]
001e2e  f0407000          ORR      r0,r0,#0x2000000
001e32  67a0              STR      r0,[r4,#0x78]
                  |L1.7732|
;;;3452   	#endif
;;;3453   
;;;3454   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BPS))
001e34  20d2              MOVS     r0,#0xd2
001e36  f7fffffe          BL       mess_find_unvol
001e3a  b110              CBZ      r0,|L1.7746|
001e3c  6828              LDR      r0,[r5,#0]  ; mess_data
001e3e  286a              CMP      r0,#0x6a
001e40  d030              BEQ      |L1.7844|
                  |L1.7746|
;;;3455   		{
;;;3456   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
;;;3457   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
;;;3458        	}
;;;3459   	else 
;;;3460   		{
;;;3461   		if(!(avar_ind_stat&0x100007f8)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
001e42  6830              LDR      r0,[r6,#0]  ; avar_ind_stat
001e44  4238              TST      r0,r7
001e46  d03b              BEQ      |L1.7872|
;;;3462        	else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
001e48  69a0              LDR      r0,[r4,#0x18]
001e4a  f0400020          ORR      r0,r0,#0x20
001e4e  61a0              STR      r0,[r4,#0x18]
                  |L1.7760|
;;;3463   		}
;;;3464   	}
;;;3465   //   
;;;3466   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_EXT))	 
001e50  20d2              MOVS     r0,#0xd2
001e52  f7fffffe          BL       mess_find_unvol
001e56  b110              CBZ      r0,|L1.7774|
001e58  6828              LDR      r0,[r5,#0]  ; mess_data
001e5a  2871              CMP      r0,#0x71
001e5c  d036              BEQ      |L1.7884|
                  |L1.7774|
;;;3467   	{
;;;3468   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,9,1);
;;;3469   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,9,1);
;;;3470   	}
;;;3471   else if(DOP_RELE_FUNC==0)	//     
001e5e  48f9              LDR      r0,|L1.8772|
001e60  f9b00000          LDRSH    r0,[r0,#0]  ; DOP_RELE_FUNC
001e64  b388              CBZ      r0,|L1.7882|
;;;3472   	{
;;;3473   	if(!speedChIsOn) SET_REG(LPC_GPIO0->FIOCLR,1,9,1);
;;;3474   	else SET_REG(LPC_GPIO0->FIOSET,1,9,1);
;;;3475   	}
;;;3476   else if(DOP_RELE_FUNC==1)  //      
001e66  2801              CMP      r0,#1
001e68  d10a              BNE      |L1.7808|
;;;3477   	{
;;;3478   	if((mess_find_unvol(MESS2RELE_HNDL))&& (mess_data[0]==PARAM_RELE_BAT_IS_DISCHARGED)) SET_REG(LPC_GPIO0->FIOCLR,1,9,1);
001e6a  20d2              MOVS     r0,#0xd2
001e6c  f7fffffe          BL       mess_find_unvol
001e70  b110              CBZ      r0,|L1.7800|
001e72  6828              LDR      r0,[r5,#0]  ; mess_data
001e74  2872              CMP      r0,#0x72
001e76  d044              BEQ      |L1.7938|
                  |L1.7800|
;;;3479   	else SET_REG(LPC_GPIO0->FIOSET,1,9,1);
001e78  69a0              LDR      r0,[r4,#0x18]
001e7a  f4407000          ORR      r0,r0,#0x200
001e7e  61a0              STR      r0,[r4,#0x18]
                  |L1.7808|
;;;3480   	}	 	
;;;3481   #endif
;;;3482   
;;;3483   #ifdef UKU_KONTUR
;;;3484   
;;;3485   //  
;;;3486   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_COMM))
;;;3487   	{
;;;3488   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_COMM,1);
;;;3489   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_COMM,1);
;;;3490   	}
;;;3491   else 
;;;3492   	{
;;;3493        if(  (!(avar_ind_stat&0x00007fff)) &&
;;;3494             ((!SK_REL_EN[0]) || (sk_av_stat[0]!=sasON))  &&
;;;3495             ((!SK_REL_EN[1]) || (sk_av_stat[1]!=sasON))  &&
;;;3496             ((!SK_REL_EN[2]) || (sk_av_stat[2]!=sasON))  /*&&
;;;3497             ((!SK_REL_EN[3]) || (sk_av_stat[3]!=sasON))*/  )SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_COMM,1);
;;;3498        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_COMM,1);
;;;3499   	}
;;;3500   
;;;3501   	
;;;3502   //rel_warm_plazma=0;
;;;3503   //    
;;;3504   /*
;;;3505   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_WARM))
;;;3506   	{
;;;3507   	if(mess_data[1]==0)
;;;3508   		{
;;;3509   		SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_WARM,1);
;;;3510   		rel_warm_plazma=1;
;;;3511   		}
;;;3512   	else if(mess_data[1]==1) 
;;;3513   		{
;;;3514   		SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_WARM,1);
;;;3515   		rel_warm_plazma=2;
;;;3516   		}
;;;3517        }
;;;3518   else 
;;;3519   	{
;;;3520   	if(warm_stat_k==wsOFF) 
;;;3521   		{
;;;3522   		SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_WARM,1);
;;;3523   		rel_warm_plazma=3;
;;;3524   		}
;;;3525        else 
;;;3526   		{
;;;3527   		SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_WARM,1);
;;;3528   		rel_warm_plazma=4;
;;;3529   		}
;;;3530   	}
;;;3531   */
;;;3532   // 
;;;3533   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_LIGHT))
;;;3534   	{
;;;3535   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LIGHT,1);
;;;3536   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LIGHT,1);
;;;3537        }
;;;3538   else 
;;;3539   	{
;;;3540   	if(sk_av_stat[0]!=sasON) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LIGHT,1);
;;;3541        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LIGHT,1);
;;;3542   	}
;;;3543   
;;;3544   
;;;3545   
;;;3546   //  
;;;3547   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_LOAD_OFF))
;;;3548   	{
;;;3549   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LOAD_OFF,1);
;;;3550   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LOAD_OFF,1);
;;;3551        }
;;;3552   else if(tloaddisable_cmnd==0)
;;;3553   	{
;;;3554   	SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LOAD_OFF,1);
;;;3555   	}
;;;3556   else if((tloaddisable_cmnd)&&(tloaddisable_cmnd<=11))
;;;3557   	{
;;;3558   	SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LOAD_OFF,1);
;;;3559   	}
;;;3560   
;;;3561   else 
;;;3562   	{
;;;3563   	if(!(tloaddisable_stat==tldsON)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LOAD_OFF,1);
;;;3564        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LOAD_OFF,1);
;;;3565   	} 
;;;3566   
;;;3567   //    
;;;3568   if(RELE_LOG)
;;;3569   	{
;;;3570   	if((mess_find_unvol(MESS2RELE_HNDL))&&(mess_data[0]==PARAM_RELE_VENT_WARM))
;;;3571   		{
;;;3572   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT_WARM,1);
;;;3573   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT_WARM,1);
;;;3574   		}
;;;3575   	else 
;;;3576   		{
;;;3577   		if(warm_stat_k==wsOFF) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT_WARM,1);
;;;3578   	     else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT_WARM,1);
;;;3579   		} 
;;;3580   
;;;3581   	}
;;;3582   else 
;;;3583   	{
;;;3584   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_VENT_WARM))
;;;3585   		{
;;;3586   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT_WARM,1);
;;;3587   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT_WARM,1);
;;;3588   		}
;;;3589   	else 
;;;3590   		{
;;;3591   		if(vent_stat_k==vsOFF) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT_WARM,1);
;;;3592   	     else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT_WARM,1);
;;;3593   		} 
;;;3594   	}
;;;3595   #endif
;;;3596   
;;;3597   
;;;3598   #ifdef UKU_TELECORE2015
;;;3599   //  
;;;3600   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_NET))
;;;3601   	{
;;;3602   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;3603   	else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_NET,1);
;;;3604   	}
;;;3605   else	if(!(avar_ind_stat&0x00000001)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;3606   else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_NET,1);
;;;3607   
;;;3608   
;;;3609   // 
;;;3610   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_LIGHT))
;;;3611   	{
;;;3612   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LIGHT,1);
;;;3613   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LIGHT,1);
;;;3614        }
;;;3615   else 
;;;3616   	{
;;;3617   	if(sk_av_stat[0]!=sasON) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LIGHT,1);
;;;3618        else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LIGHT,1);
;;;3619   	}
;;;3620   
;;;3621   // 
;;;3622   if((mess_find_unvol(MESS2RELE_HNDL))&&(mess_data[0]==PARAM_RELE_WARM))
;;;3623   	{
;;;3624   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_WARM,1);
;;;3625   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_WARM,1);
;;;3626   	}
;;;3627   else 
;;;3628   	{
;;;3629   	if(warm_stat_k==wsOFF) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_WARM,1);
;;;3630        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_WARM,1);
;;;3631   	} 
;;;3632   // 
;;;3633   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_VENT))
;;;3634   	{
;;;3635   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT,1);
;;;3636   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;3637   	}
;;;3638   else 
;;;3639   	{
;;;3640   	if(vent_stat_k==vsOFF) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT,1);
;;;3641        else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;3642   	} 
;;;3643   
;;;3644   //  
;;;3645   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_VVENT))
;;;3646   	{
;;;3647   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VVENT,1);
;;;3648   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VVENT,1);
;;;3649   	}
;;;3650   else 
;;;3651   	{
;;;3652   	if(vvent_stat_k==vsOFF) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VVENT,1);
;;;3653        else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VVENT,1);
;;;3654   	} 
;;;3655   
;;;3656   #endif
;;;3657   
;;;3658   }
001e80  e4c5              B        |L1.6158|
                  |L1.7810|
001e82  6868              LDR      r0,[r5,#4]            ;3447  ; mess_data
001e84  b120              CBZ      r0,|L1.7824|
001e86  69e0              LDR      r0,[r4,#0x1c]         ;3448
001e88  f0407000          ORR      r0,r0,#0x2000000      ;3448
001e8c  61e0              STR      r0,[r4,#0x1c]         ;3448
001e8e  e7d1              B        |L1.7732|
                  |L1.7824|
001e90  69a0              LDR      r0,[r4,#0x18]         ;3447
001e92  f0407000          ORR      r0,r0,#0x2000000      ;3447
001e96  61a0              STR      r0,[r4,#0x18]         ;3447
001e98  e7cc              B        |L1.7732|
                  |L1.7834|
001e9a  6ba0              LDR      r0,[r4,#0x38]         ;3450
001e9c  f0407000          ORR      r0,r0,#0x2000000      ;3450
001ea0  63a0              STR      r0,[r4,#0x38]         ;3450
001ea2  e7c7              B        |L1.7732|
                  |L1.7844|
001ea4  6868              LDR      r0,[r5,#4]            ;3456  ; mess_data
001ea6  b130              CBZ      r0,|L1.7862|
001ea8  2801              CMP      r0,#1                 ;3457
001eaa  d1d1              BNE      |L1.7760|
001eac  69a0              LDR      r0,[r4,#0x18]         ;3457
001eae  f0400020          ORR      r0,r0,#0x20           ;3457
001eb2  61a0              STR      r0,[r4,#0x18]         ;3457
001eb4  e7cc              B        |L1.7760|
                  |L1.7862|
001eb6  69e0              LDR      r0,[r4,#0x1c]         ;3456
001eb8  f0400020          ORR      r0,r0,#0x20           ;3456
001ebc  61e0              STR      r0,[r4,#0x1c]         ;3456
001ebe  e7c7              B        |L1.7760|
                  |L1.7872|
001ec0  69e0              LDR      r0,[r4,#0x1c]         ;3461
001ec2  f0400020          ORR      r0,r0,#0x20           ;3461
001ec6  61e0              STR      r0,[r4,#0x1c]         ;3461
001ec8  e7c2              B        |L1.7760|
                  |L1.7882|
001eca  e00d              B        |L1.7912|
                  |L1.7884|
001ecc  6868              LDR      r0,[r5,#4]            ;3468  ; mess_data
001ece  b130              CBZ      r0,|L1.7902|
001ed0  2801              CMP      r0,#1                 ;3469
001ed2  d1d5              BNE      |L1.7808|
001ed4  69a0              LDR      r0,[r4,#0x18]         ;3469
001ed6  f4407000          ORR      r0,r0,#0x200          ;3469
001eda  61a0              STR      r0,[r4,#0x18]         ;3469
001edc  e497              B        |L1.6158|
                  |L1.7902|
001ede  69e0              LDR      r0,[r4,#0x1c]         ;3468
001ee0  f4407000          ORR      r0,r0,#0x200          ;3468
001ee4  61e0              STR      r0,[r4,#0x1c]         ;3468
001ee6  e492              B        |L1.6158|
                  |L1.7912|
001ee8  48d7              LDR      r0,|L1.8776|
001eea  8800              LDRH     r0,[r0,#0]            ;3473  ; speedChIsOn
001eec  b120              CBZ      r0,|L1.7928|
001eee  69a0              LDR      r0,[r4,#0x18]         ;3474
001ef0  f4407000          ORR      r0,r0,#0x200          ;3474
001ef4  61a0              STR      r0,[r4,#0x18]         ;3474
001ef6  e48a              B        |L1.6158|
                  |L1.7928|
001ef8  69e0              LDR      r0,[r4,#0x1c]         ;3473
001efa  f4407000          ORR      r0,r0,#0x200          ;3473
001efe  61e0              STR      r0,[r4,#0x1c]         ;3473
001f00  e485              B        |L1.6158|
                  |L1.7938|
001f02  69e0              LDR      r0,[r4,#0x1c]         ;3478
001f04  f4407000          ORR      r0,r0,#0x200          ;3478
001f08  61e0              STR      r0,[r4,#0x1c]         ;3478
001f0a  e480              B        |L1.6158|
;;;3659   
                          ENDP

                  bps_hndl PROC
;;;3660   //-----------------------------------------------
;;;3661   void bps_hndl(void)
001f0c  e92d5ff0          PUSH     {r4-r12,lr}
;;;3662   {
;;;3663   char ptr__,i;
;;;3664   unsigned short tempUS;
;;;3665   
;;;3666   if(sh_cnt0<10)
001f10  4ece              LDR      r6,|L1.8780|
;;;3667   	{
;;;3668   	sh_cnt0++;
;;;3669   	if(sh_cnt0>=10)
;;;3670   		{
;;;3671   		sh_cnt0=0;
001f12  2700              MOVS     r7,#0
;;;3672   		b1Hz_sh=1;
001f14  f04f0a01          MOV      r10,#1
001f18  7c70              LDRB     r0,[r6,#0x11]         ;3666  ; sh_cnt0
001f1a  280a              CMP      r0,#0xa               ;3666
001f1c  d208              BCS      |L1.7984|
001f1e  f1000001          ADD      r0,r0,#1              ;3668
001f22  b2c0              UXTB     r0,r0                 ;3668
001f24  7470              STRB     r0,[r6,#0x11]         ;3668
001f26  280a              CMP      r0,#0xa               ;3669
001f28  d302              BCC      |L1.7984|
001f2a  7477              STRB     r7,[r6,#0x11]         ;3671
001f2c  f886a012          STRB     r10,[r6,#0x12]
                  |L1.7984|
;;;3673   		}
;;;3674   	}
;;;3675   
;;;3676   /*if(sh_cnt1<5)
;;;3677   	{
;;;3678   	sh_cnt1++;
;;;3679   	if(sh_cnt1==5)
;;;3680   		{
;;;3681   		sh_cnt1=0;
;;;3682   		b2Hz_sh=1;
;;;3683   		}
;;;3684   	} */
;;;3685   
;;;3686   
;;;3687   /*
;;;3688   if(mess_find(MESS_SRC_ON_OFF))
;;;3689   	{
;;;3690   	if(mess_data[0]==_MESS_SRC_MASK_BLOK_2SEC)
;;;3691   		{
;;;3692   		char i;
;;;3693   		for(i=0;i<NUMIST;i++)
;;;3694   			{
;;;3695   			if(mess_data[1]&(1<<i))src[i]._ist_blok_cnt=20;
;;;3696   			}
;;;3697   		
;;;3698   		}
;;;3699   	else if(mess_data[0]==_MESS_SRC_MASK_UNBLOK)
;;;3700   		{
;;;3701   		char i;
;;;3702   		for(i=0;i<NUMIST;i++)
;;;3703   			{
;;;3704   			if(mess_data[1]&(1<<i))src[i]._ist_blok_cnt=0;
;;;3705   			}
;;;3706   		
;;;3707   		}
;;;3708   	}
;;;3709   	
;;;3710   else if(mess_find(_MESS_SRC_MASK_ON))
;;;3711   	{				
;;;3712   	if(mess_data[0]==_MESS_SRC_MASK_ON)
;;;3713   		{
;;;3714   		char i;
;;;3715   		for(i=0;i<NUMIST;i++)
;;;3716   			{
;;;3717   			if(mess_data[1]&(1<<i))
;;;3718   				{
;;;3719   				src[i]._ist_blok_cnt=0;
;;;3720   				src[i]._flags_tu=2;
;;;3721   				}
;;;3722   			}
;;;3723   		
;;;3724   		}				
;;;3725   	}*/
;;;3726   
;;;3727   
;;;3728   
;;;3729   /*else*/ 
;;;3730   bps_on_mask=0;
001f30  f8a67046          STRH     r7,[r6,#0x46]
;;;3731   bps_off_mask=0;
001f34  f8a67048          STRH     r7,[r6,#0x48]
;;;3732   
;;;3733   if(mess_find_unvol(MESS2BPS_HNDL))
001f38  20cd              MOVS     r0,#0xcd
001f3a  f7fffffe          BL       mess_find_unvol
;;;3734   	{
;;;3735   	if(mess_data[0]==PARAM_BPS_ALL_OFF_AFTER_2SEC)
;;;3736   		{
;;;3737   		bps_off_mask=0xffff;
;;;3738   		}
;;;3739   
;;;3740   	if(mess_data[0]==PARAM_BPS_MASK_OFF_AFTER_2SEC)
;;;3741   		{
;;;3742   		bps_off_mask=mess_data[1];
;;;3743   		}
;;;3744   
;;;3745   	if(mess_data[0]==PARAM_BPS_MASK_ON)
;;;3746   		{
;;;3747   		bps_on_mask=mess_data[1];
;;;3748   		}
;;;3749   
;;;3750   	if(mess_data[0]==PARAM_BPS_ALL_ON)
;;;3751   		{
;;;3752   		bps_on_mask=0xffff;
;;;3753   		}
;;;3754   
;;;3755   	if(mess_data[0]==PARAM_BPS_MASK_ON_OFF_AFTER_2SEC)
;;;3756   		{
;;;3757   		bps_on_mask=mess_data[1];
;;;3758   		bps_off_mask=~(mess_data[1]);
;;;3759   		}
;;;3760   
;;;3761   
;;;3762   	for(i=0;i<=NUMIST;i++)
;;;3763   		{
;;;3764   		if(bps_off_mask&(1<<i)) bps[i]._blok_cnt++;
001f3e  f8df8310          LDR      r8,|L1.8784|
001f42  f8dfb310          LDR      r11,|L1.8788|
001f46  b3a0              CBZ      r0,|L1.8114|
001f48  49c3              LDR      r1,|L1.8792|
001f4a  f64f73ff          MOV      r3,#0xffff            ;3737
001f4e  6808              LDR      r0,[r1,#0]            ;3735  ; mess_data
001f50  28ce              CMP      r0,#0xce              ;3735
001f52  d101              BNE      |L1.8024|
001f54  f8a63048          STRH     r3,[r6,#0x48]         ;3737
                  |L1.8024|
001f58  28cf              CMP      r0,#0xcf              ;3740
001f5a  d102              BNE      |L1.8034|
001f5c  684a              LDR      r2,[r1,#4]            ;3742  ; mess_data
001f5e  f8a62048          STRH     r2,[r6,#0x48]         ;3742
                  |L1.8034|
001f62  28d1              CMP      r0,#0xd1              ;3745
001f64  d102              BNE      |L1.8044|
001f66  684a              LDR      r2,[r1,#4]            ;3747  ; mess_data
001f68  f8a62046          STRH     r2,[r6,#0x46]         ;3747
                  |L1.8044|
001f6c  28d2              CMP      r0,#0xd2              ;3750
001f6e  d101              BNE      |L1.8052|
001f70  f8a63046          STRH     r3,[r6,#0x46]         ;3752
                  |L1.8052|
001f74  28d0              CMP      r0,#0xd0              ;3755
001f76  d106              BNE      |L1.8070|
001f78  6848              LDR      r0,[r1,#4]            ;3757  ; mess_data
001f7a  f8a60046          STRH     r0,[r6,#0x46]         ;3757
001f7e  ea6f0000          MVN      r0,r0                 ;3758
001f82  f8a60048          STRH     r0,[r6,#0x48]         ;3758
                  |L1.8070|
001f86  f04f0400          MOV      r4,#0                 ;3762
001f8a  e037              B        |L1.8188|
                  |L1.8076|
001f8c  f8b60048          LDRH     r0,[r6,#0x48]  ; bps_off_mask
001f90  fa0af904          LSL      r9,r10,r4
001f94  ea190f00          TST      r9,r0
001f98  d00c              BEQ      |L1.8116|
001f9a  ebc400c4          RSB      r0,r4,r4,LSL #3
001f9e  eb000040          ADD      r0,r0,r0,LSL #1
001fa2  eb080080          ADD      r0,r8,r0,LSL #2
001fa6  f8301f40          LDRH     r1,[r0,#0x40]!
001faa  f1010101          ADD      r1,r1,#1
001fae  8001              STRH     r1,[r0,#0]
001fb0  e008              B        |L1.8132|
                  |L1.8114|
001fb2  e028              B        |L1.8198|
                  |L1.8116|
;;;3765   		else bps[i]._blok_cnt=0;
001fb4  ebc400c4          RSB      r0,r4,r4,LSL #3
001fb8  eb000040          ADD      r0,r0,r0,LSL #1
001fbc  eb080080          ADD      r0,r8,r0,LSL #2
001fc0  f8a07040          STRH     r7,[r0,#0x40]
                  |L1.8132|
;;;3766   		gran(&bps[i]._blok_cnt,0,50);
001fc4  ebc400c4          RSB      r0,r4,r4,LSL #3
001fc8  eb000040          ADD      r0,r0,r0,LSL #1
001fcc  eb080580          ADD      r5,r8,r0,LSL #2
001fd0  f1050040          ADD      r0,r5,#0x40
001fd4  2232              MOVS     r2,#0x32
001fd6  2100              MOVS     r1,#0
001fd8  f7fffffe          BL       gran
;;;3767   		if(bps[i]._blok_cnt>20) bps[i]._flags_tu=1;
001fdc  f9b50040          LDRSH    r0,[r5,#0x40]
001fe0  2814              CMP      r0,#0x14
001fe2  dd01              BLE      |L1.8168|
001fe4  f885a02c          STRB     r10,[r5,#0x2c]
                  |L1.8168|
;;;3768   		if(bps_on_mask&(1<<i)) bps[i]._flags_tu=0;
001fe8  f8b60046          LDRH     r0,[r6,#0x46]  ; bps_on_mask
001fec  ea190f00          TST      r9,r0
001ff0  d001              BEQ      |L1.8182|
001ff2  f885702c          STRB     r7,[r5,#0x2c]
                  |L1.8182|
001ff6  f1040401          ADD      r4,r4,#1              ;3762
001ffa  b2e4              UXTB     r4,r4                 ;3762
                  |L1.8188|
001ffc  f9bb0000          LDRSH    r0,[r11,#0]           ;3762  ; NUMIST
002000  4284              CMP      r4,r0                 ;3762
002002  ddc3              BLE      |L1.8076|
002004  e081              B        |L1.8458|
                  |L1.8198|
;;;3769   	     }
;;;3770   
;;;3771   	
;;;3772   /*
;;;3773   
;;;3774   	if(bps_all_off_cnt>20)
;;;3775   		{
;;;3776   		for(i=0;i<=NUMIST;i++)
;;;3777   			{
;;;3778   	     	bps[i]._flags_tu=1;
;;;3779   	     	}
;;;3780   		}
;;;3781   	else if(bps_mask_off_cnt>20)
;;;3782   		{
;;;3783   		for(i=0;i<=NUMIST;i++)
;;;3784   			{
;;;3785   			if(mess_data[1]&(1<<i)) bps[i]._flags_tu=1;
;;;3786   	     	}
;;;3787   		}	
;;;3788   		
;;;3789   	else if(bps_mask_on_off_cnt>20)
;;;3790   		{
;;;3791   		for(i=0;i<=NUMIST;i++)
;;;3792   			{
;;;3793   			if(mess_data[1]&(1<<i)) bps[i]._flags_tu=1;
;;;3794   			else bps[i]._flags_tu=0;
;;;3795   	     	}
;;;3796   		}
;;;3797   		
;;;3798   	if(mess_data[0]==PARAM_BPS_MASK_ON)
;;;3799   		{
;;;3800   		for(i=0;i<=NUMIST;i++)
;;;3801   			{
;;;3802   			if(mess_data[1]&(1<<i)) bps[i]._flags_tu=0;
;;;3803   	     	}
;;;3804   		}
;;;3805   */										
;;;3806   	}
;;;3807   
;;;3808   
;;;3809   else if(b1Hz_sh)
002006  7cb0              LDRB     r0,[r6,#0x12]  ; b1Hz_sh
002008  b3f0              CBZ      r0,|L1.8328|
;;;3810   	{
;;;3811   	ptr__=0;
00200a  f04f0400          MOV      r4,#0
;;;3812        for(i=0;i<=NUMIST;i++)
00200e  4621              MOV      r1,r4
002010  f9bb0000          LDRSH    r0,[r11,#0]           ;3762
002014  e00a              B        |L1.8236|
                  |L1.8214|
;;;3813   		{
;;;3814   	     bps[i]._flags_tu=1;
002016  ebc102c1          RSB      r2,r1,r1,LSL #3
00201a  eb020242          ADD      r2,r2,r2,LSL #1
00201e  eb080282          ADD      r2,r8,r2,LSL #2
002022  f882a02c          STRB     r10,[r2,#0x2c]
002026  f1010101          ADD      r1,r1,#1              ;3812
00202a  b2c9              UXTB     r1,r1                 ;3812
                  |L1.8236|
00202c  4281              CMP      r1,r0                 ;3812
00202e  ddf2              BLE      |L1.8214|
;;;3815   	     }	
;;;3816     	     
;;;3817     	for(i=0;(i<NUMIST)&&(ptr__<num_necc);i++)
002030  f04f0100          MOV      r1,#0
002034  e022              B        |L1.8316|
                  |L1.8246|
;;;3818     		{
;;;3819   		char ii,iii;
;;;3820   
;;;3821   		ii=(char)NUMIST;
002036  b2c2              UXTB     r2,r0
;;;3822   		if(ii<0)ii=0;
;;;3823   		if(ii>32)ii=32;
002038  2a20              CMP      r2,#0x20
00203a  d901              BLS      |L1.8256|
00203c  f04f0220          MOV      r2,#0x20
                  |L1.8256|
;;;3824   		iii=numOfForvardBps;
002040  7e33              LDRB     r3,[r6,#0x18]  ; numOfForvardBps
;;;3825   		if(iii<0)iii=0;
;;;3826   		if(iii>=NUMIST)iii=0;
002042  4283              CMP      r3,r0
002044  db01              BLT      |L1.8266|
002046  f04f0300          MOV      r3,#0
                  |L1.8266|
;;;3827   		iii+=i;
00204a  440b              ADD      r3,r3,r1
00204c  b2db              UXTB     r3,r3
;;;3828   		iii=iii%ii;
00204e  fbb3f5f2          UDIV     r5,r3,r2
002052  fb023215          MLS      r2,r2,r5,r3
;;;3829   		
;;;3830     	     if((bps[iii]._state==bsRDY)||(bps[iii]._state==bsWRK))
002056  ebc202c2          RSB      r2,r2,r2,LSL #3
00205a  eb020242          ADD      r2,r2,r2,LSL #1
00205e  eb080282          ADD      r2,r8,r2,LSL #2
002062  7893              LDRB     r3,[r2,#2]
002064  2b02              CMP      r3,#2
002066  d001              BEQ      |L1.8300|
002068  2b01              CMP      r3,#1
00206a  d104              BNE      |L1.8310|
                  |L1.8300|
;;;3831     	         	{
;;;3832     	         	bps[iii]._flags_tu=0;
00206c  f882702c          STRB     r7,[r2,#0x2c]
;;;3833     	         	ptr__++;
002070  f1040401          ADD      r4,r4,#1
002074  b2e4              UXTB     r4,r4
                  |L1.8310|
002076  f1010101          ADD      r1,r1,#1              ;3817
00207a  b2c9              UXTB     r1,r1                 ;3817
                  |L1.8316|
00207c  4281              CMP      r1,r0                 ;3817
00207e  da06              BGE      |L1.8334|
002080  4a76              LDR      r2,|L1.8796|
002082  f9b22000          LDRSH    r2,[r2,#0]            ;3817  ; num_necc
002086  e000              B        |L1.8330|
                  |L1.8328|
002088  e03f              B        |L1.8458|
                  |L1.8330|
00208a  4294              CMP      r4,r2                 ;3817
00208c  dbd3              BLT      |L1.8246|
                  |L1.8334|
;;;3834     	         	}
;;;3835     	     }
;;;3836   	if(main_1Hz_cnt<60)
00208e  4974              LDR      r1,|L1.8800|
002090  f9b11000          LDRSH    r1,[r1,#0]  ; main_1Hz_cnt
002094  293c              CMP      r1,#0x3c
002096  da0f              BGE      |L1.8376|
;;;3837   		{
;;;3838        	for(i=0;i<=NUMIST;i++)
002098  f04f0100          MOV      r1,#0
00209c  e00a              B        |L1.8372|
                  |L1.8350|
;;;3839   			{
;;;3840   	     	bps[i]._flags_tu=0;
00209e  ebc102c1          RSB      r2,r1,r1,LSL #3
0020a2  eb020242          ADD      r2,r2,r2,LSL #1
0020a6  eb080282          ADD      r2,r8,r2,LSL #2
0020aa  f882702c          STRB     r7,[r2,#0x2c]
0020ae  f1010101          ADD      r1,r1,#1              ;3838
0020b2  b2c9              UXTB     r1,r1                 ;3838
                  |L1.8372|
0020b4  4281              CMP      r1,r0                 ;3838
0020b6  ddf2              BLE      |L1.8350|
                  |L1.8376|
;;;3841   	     	}	
;;;3842   		}
;;;3843   	if(ipsBlckStat)
0020b8  496a              LDR      r1,|L1.8804|
0020ba  8809              LDRH     r1,[r1,#0]  ; ipsBlckStat
0020bc  b179              CBZ      r1,|L1.8414|
;;;3844   		{
;;;3845        	for(i=0;i<=NUMIST;i++)
0020be  f04f0100          MOV      r1,#0
0020c2  e00a              B        |L1.8410|
                  |L1.8388|
;;;3846   			{
;;;3847   	     	bps[i]._flags_tu=1;
0020c4  ebc102c1          RSB      r2,r1,r1,LSL #3
0020c8  eb020242          ADD      r2,r2,r2,LSL #1
0020cc  eb080282          ADD      r2,r8,r2,LSL #2
0020d0  f882a02c          STRB     r10,[r2,#0x2c]
0020d4  f1010101          ADD      r1,r1,#1              ;3845
0020d8  b2c9              UXTB     r1,r1                 ;3845
                  |L1.8410|
0020da  4281              CMP      r1,r0                 ;3845
0020dc  ddf2              BLE      |L1.8388|
                  |L1.8414|
;;;3848   	     	}
;;;3849   		}
;;;3850   
;;;3851        for(i=0;i<=NUMIST;i++)
0020de  f04f0100          MOV      r1,#0
;;;3852   		{
;;;3853   	    if(bps[i]._flags_tu==1) 	bps[i]._x_=-50;
0020e2  f06f0331          MVN      r3,#0x31
0020e6  e00e              B        |L1.8454|
                  |L1.8424|
0020e8  ebc102c1          RSB      r2,r1,r1,LSL #3
0020ec  eb020242          ADD      r2,r2,r2,LSL #1
0020f0  eb080282          ADD      r2,r8,r2,LSL #2
0020f4  f892402c          LDRB     r4,[r2,#0x2c]
0020f8  2c01              CMP      r4,#1
0020fa  d101              BNE      |L1.8448|
0020fc  f8a23050          STRH     r3,[r2,#0x50]
                  |L1.8448|
002100  f1010101          ADD      r1,r1,#1              ;3851
002104  b2c9              UXTB     r1,r1                 ;3851
                  |L1.8454|
002106  4281              CMP      r1,r0                 ;3851
002108  ddee              BLE      |L1.8424|
                  |L1.8458|
;;;3854   	   	}	
;;;3855   		 
;;;3856     	}
;;;3857   
;;;3858   
;;;3859   for(i=0;i<NUMIST;i++)
00210a  f04f0000          MOV      r0,#0
;;;3860        {
;;;3861        if(bps[i]._ist_blok_host_cnt!=0)
;;;3862             {
;;;3863             bps[i]._flags_tu=99;
00210e  f04f0463          MOV      r4,#0x63
002112  f9bb3000          LDRSH    r3,[r11,#0]           ;3762
002116  e00f              B        |L1.8504|
                  |L1.8472|
002118  ebc001c0          RSB      r1,r0,r0,LSL #3       ;3861
00211c  eb010141          ADD      r1,r1,r1,LSL #1       ;3861
002120  eb080181          ADD      r1,r8,r1,LSL #2       ;3861
002124  6bca              LDR      r2,[r1,#0x3c]         ;3861
002126  b122              CBZ      r2,|L1.8498|
002128  f881402c          STRB     r4,[r1,#0x2c]
;;;3864   	     bps[i]._ist_blok_host_cnt--;
00212c  f1a20201          SUB      r2,r2,#1
002130  63ca              STR      r2,[r1,#0x3c]
                  |L1.8498|
002132  f1000001          ADD      r0,r0,#1              ;3859
002136  b2c0              UXTB     r0,r0                 ;3859
                  |L1.8504|
002138  4298              CMP      r0,r3                 ;3859
00213a  dbed              BLT      |L1.8472|
;;;3865             }
;;;3866        }
;;;3867   
;;;3868   
;;;3869   
;;;3870   
;;;3871   b1Hz_sh=0;
00213c  74b7              STRB     r7,[r6,#0x12]
;;;3872   
;;;3873   
;;;3874   num_of_wrks_bps=0;
00213e  73b7              STRB     r7,[r6,#0xe]
;;;3875   tempUS=0;
002140  f04f0100          MOV      r1,#0
;;;3876   for(i=0;i<NUMIST;i++)
002144  4608              MOV      r0,r1
002146  e013              B        |L1.8560|
                  |L1.8520|
;;;3877   	{
;;;3878   	if(bps[i]._state==bsWRK)
002148  ebc002c0          RSB      r2,r0,r0,LSL #3
00214c  eb020242          ADD      r2,r2,r2,LSL #1
002150  eb080282          ADD      r2,r8,r2,LSL #2
002154  7894              LDRB     r4,[r2,#2]
002156  2c01              CMP      r4,#1
002158  d107              BNE      |L1.8554|
;;;3879   		{
;;;3880   		num_of_wrks_bps++;
00215a  7bb4              LDRB     r4,[r6,#0xe]  ; num_of_wrks_bps
00215c  f1040401          ADD      r4,r4,#1
002160  73b4              STRB     r4,[r6,#0xe]
;;;3881   		if(bps[i]._Uii>tempUS)tempUS=bps[i]._Uii;
002162  69d2              LDR      r2,[r2,#0x1c]
002164  428a              CMP      r2,r1
002166  dd00              BLE      |L1.8554|
002168  b291              UXTH     r1,r2
                  |L1.8554|
00216a  f1000001          ADD      r0,r0,#1              ;3876
00216e  b2c0              UXTB     r0,r0                 ;3876
                  |L1.8560|
002170  4298              CMP      r0,r3                 ;3876
002172  dbe9              BLT      |L1.8520|
;;;3882   		}
;;;3883   	}
;;;3884   Ubpsmax=tempUS;
002174  8771              STRH     r1,[r6,#0x3a]
;;;3885   
;;;3886   }
002176  e8bd9ff0          POP      {r4-r12,pc}
;;;3887   
                          ENDP

                  powerAntiAliasingHndl PROC
;;;3894   //-----------------------------------------------
;;;3895   void powerAntiAliasingHndl(void)
00217a  b570              PUSH     {r4-r6,lr}
;;;3896   {
;;;3897   if((power_summary_tempo/10UL)==(power_summary_tempo_old/10UL))
00217c  230a              MOVS     r3,#0xa
00217e  4c3b              LDR      r4,|L1.8812|
002180  4839              LDR      r0,|L1.8808|
;;;3898   	{
;;;3899   	if(powerSummaryCnt<15)powerSummaryCnt++;
;;;3900   	if(powerSummaryCnt>=10)
;;;3901   		{
;;;3902   		power_summary=power_summary_tempo;
;;;3903   		}
;;;3904   	}
;;;3905   else powerSummaryCnt=0;
002182  2500              MOVS     r5,#0
002184  6822              LDR      r2,[r4,#0]            ;3897  ; power_summary_tempo_old
002186  6800              LDR      r0,[r0,#0]            ;3897  ; power_summary_tempo
002188  fbb2f6f3          UDIV     r6,r2,r3              ;3897
00218c  fbb0f1f3          UDIV     r1,r0,r3              ;3897
002190  4a37              LDR      r2,|L1.8816|
002192  42b1              CMP      r1,r6                 ;3897
002194  d10b              BNE      |L1.8622|
002196  7811              LDRB     r1,[r2,#0]            ;3899  ; powerSummaryCnt
002198  290f              CMP      r1,#0xf               ;3899
00219a  d202              BCS      |L1.8610|
00219c  f1010101          ADD      r1,r1,#1              ;3899
0021a0  7011              STRB     r1,[r2,#0]            ;3899
                  |L1.8610|
0021a2  7811              LDRB     r1,[r2,#0]            ;3900  ; powerSummaryCnt
0021a4  290a              CMP      r1,#0xa               ;3900
0021a6  d303              BCC      |L1.8624|
0021a8  4932              LDR      r1,|L1.8820|
0021aa  6008              STR      r0,[r1,#0]            ;3902  ; power_summary
0021ac  e000              B        |L1.8624|
                  |L1.8622|
0021ae  7015              STRB     r5,[r2,#0]
                  |L1.8624|
;;;3906   power_summary_tempo_old=power_summary_tempo;
0021b0  6020              STR      r0,[r4,#0]  ; power_summary_tempo_old
;;;3907   
;;;3908   if((power_current_tempo/10UL)==(power_current_tempo_old/10UL))
0021b2  4831              LDR      r0,|L1.8824|
0021b4  4c31              LDR      r4,|L1.8828|
0021b6  f9b00000          LDRSH    r0,[r0,#0]  ; power_current_tempo
0021ba  f9b42000          LDRSH    r2,[r4,#0]  ; power_current_tempo_old
0021be  fbb0f1f3          UDIV     r1,r0,r3
0021c2  fbb2f3f3          UDIV     r3,r2,r3
;;;3909   	{
;;;3910   	if(powerCurrentCnt<15)powerCurrentCnt++;
0021c6  4a2e              LDR      r2,|L1.8832|
0021c8  4299              CMP      r1,r3                 ;3908
0021ca  d10b              BNE      |L1.8676|
0021cc  7811              LDRB     r1,[r2,#0]  ; powerCurrentCnt
0021ce  290f              CMP      r1,#0xf
0021d0  d202              BCS      |L1.8664|
0021d2  f1010101          ADD      r1,r1,#1
0021d6  7011              STRB     r1,[r2,#0]
                  |L1.8664|
;;;3911   	if(powerCurrentCnt>=10)
0021d8  7811              LDRB     r1,[r2,#0]  ; powerCurrentCnt
0021da  290a              CMP      r1,#0xa
0021dc  d303              BCC      |L1.8678|
;;;3912   		{
;;;3913   		power_current=power_current_tempo;
0021de  4929              LDR      r1,|L1.8836|
0021e0  8008              STRH     r0,[r1,#0]
0021e2  e000              B        |L1.8678|
                  |L1.8676|
;;;3914   		}
;;;3915   	}
;;;3916   else powerCurrentCnt=0;
0021e4  7015              STRB     r5,[r2,#0]
                  |L1.8678|
;;;3917   power_current_tempo_old=power_current_tempo;
0021e6  8020              STRH     r0,[r4,#0]
;;;3918   }
0021e8  bd70              POP      {r4-r6,pc}
;;;3919   
                          ENDP

                  ipsBlckHndl PROC
;;;4002   //-----------------------------------------------
;;;4003   void ipsBlckHndl(char in)
0021ea  b510              PUSH     {r4,lr}
;;;4004   {
;;;4005   
;;;4006   ipsBlckStat=0;
0021ec  4b1d              LDR      r3,|L1.8804|
0021ee  f04f0000          MOV      r0,#0
0021f2  8018              STRH     r0,[r3,#0]
;;;4007   if(ipsBlckSrc==1)
0021f4  4824              LDR      r0,|L1.8840|
0021f6  f04f0401          MOV      r4,#1
;;;4008   	{
;;;4009   	if(((ipsBlckLog==0)&&(adc_buff_[11]>2000)) || ((ipsBlckLog==1)&&(adc_buff_[11]<2000))) ipsBlckStat=1;
0021fa  f44f62fa          MOV      r2,#0x7d0
0021fe  f9b01000          LDRSH    r1,[r0,#0]            ;4007  ; ipsBlckSrc
002202  4822              LDR      r0,|L1.8844|
002204  2901              CMP      r1,#1                 ;4007
002206  f9b00000          LDRSH    r0,[r0,#0]
00220a  d006              BEQ      |L1.8730|
;;;4010   	}
;;;4011   else if(ipsBlckSrc==2)
00220c  2902              CMP      r1,#2
00220e  d10f              BNE      |L1.8752|
002210  491f              LDR      r1,|L1.8848|
;;;4012   	{
;;;4013   	if(((ipsBlckLog==0)&&(adc_buff_[13]>2000)) || ((ipsBlckLog==1)&&(adc_buff_[13]<2000))) ipsBlckStat=1;
002212  f9b1101a          LDRSH    r1,[r1,#0x1a]
002216  b160              CBZ      r0,|L1.8754|
002218  e00d              B        |L1.8758|
                  |L1.8730|
00221a  491d              LDR      r1,|L1.8848|
00221c  f9b11016          LDRSH    r1,[r1,#0x16]         ;4009
002220  b908              CBNZ     r0,|L1.8742|
002222  4291              CMP      r1,r2                 ;4009
002224  dc03              BGT      |L1.8750|
                  |L1.8742|
002226  2801              CMP      r0,#1                 ;4009
002228  d102              BNE      |L1.8752|
00222a  4291              CMP      r1,r2                 ;4009
00222c  da00              BGE      |L1.8752|
                  |L1.8750|
00222e  801c              STRH     r4,[r3,#0]            ;4009
                  |L1.8752|
;;;4014   	}
;;;4015   }
002230  bd10              POP      {r4,pc}
                  |L1.8754|
002232  4291              CMP      r1,r2                 ;4013
002234  dc03              BGT      |L1.8766|
                  |L1.8758|
002236  2801              CMP      r0,#1                 ;4013
002238  d1fa              BNE      |L1.8752|
00223a  4291              CMP      r1,r2                 ;4013
00223c  daf8              BGE      |L1.8752|
                  |L1.8766|
00223e  801c              STRH     r4,[r3,#0]            ;4013
002240  bd10              POP      {r4,pc}
002242  0000              DCW      0x0000
                  |L1.8772|
                          DCD      DOP_RELE_FUNC
                  |L1.8776|
                          DCD      speedChIsOn
                  |L1.8780|
                          DCD      ||area_number.21||
                  |L1.8784|
                          DCD      bps
                  |L1.8788|
                          DCD      NUMIST
                  |L1.8792|
                          DCD      mess_data
                  |L1.8796|
                          DCD      num_necc
                  |L1.8800|
                          DCD      main_1Hz_cnt
                  |L1.8804|
                          DCD      ipsBlckStat
                  |L1.8808|
                          DCD      power_summary_tempo
                  |L1.8812|
                          DCD      power_summary_tempo_old
                  |L1.8816|
                          DCD      powerSummaryCnt
                  |L1.8820|
                          DCD      power_summary
                  |L1.8824|
                          DCD      power_current_tempo
                  |L1.8828|
                          DCD      power_current_tempo_old
                  |L1.8832|
                          DCD      powerCurrentCnt
                  |L1.8836|
                          DCD      power_current
                  |L1.8840|
                          DCD      ipsBlckSrc
                  |L1.8844|
                          DCD      ipsBlckLog
                  |L1.8848|
                          DCD      ||.bss||+0x400
                          ENDP

                  bps_drv PROC
;;;4017   //-----------------------------------------------
;;;4018   void bps_drv(char in)
002294  e92d41f0          PUSH     {r4-r8,lr}
;;;4019   {
002298  4606              MOV      r6,r0
;;;4020   char temp;
;;;4021   
;;;4022   if (bps[in]._device!=dSRC) return;
00229a  ebc600c6          RSB      r0,r6,r6,LSL #3
00229e  49ff              LDR      r1,|L1.9884|
0022a0  eb000040          ADD      r0,r0,r0,LSL #1
0022a4  f8112020          LDRB     r2,[r1,r0,LSL #2]
0022a8  2a03              CMP      r2,#3
0022aa  d177              BNE      |L1.9116|
;;;4023   temp=bps[in]._flags_tm;
0022ac  eb010480          ADD      r4,r1,r0,LSL #2
0022b0  f8945042          LDRB     r5,[r4,#0x42]
;;;4024   if(temp&(1<<AV_T))
0022b4  07a8              LSLS     r0,r5,#30
0022b6  d517              BPL      |L1.8936|
;;;4025   	{
;;;4026   	if(bps[in]._temp_av_cnt<1200) 
0022b8  f9b41046          LDRSH    r1,[r4,#0x46]
0022bc  f44f6296          MOV      r2,#0x4b0
0022c0  4291              CMP      r1,r2
0022c2  da22              BGE      |L1.8970|
;;;4027   		{
;;;4028   		bps[in]._temp_av_cnt++;
0022c4  f1010101          ADD      r1,r1,#1
0022c8  b208              SXTH     r0,r1
0022ca  f8a40046          STRH     r0,[r4,#0x46]
;;;4029   		if(bps[in]._temp_av_cnt>=1200)
0022ce  4290              CMP      r0,r2
0022d0  db1b              BLT      |L1.8970|
;;;4030   			{
;;;4031   			bps[in]._temp_av_cnt=1200;
0022d2  f8a42046          STRH     r2,[r4,#0x46]
;;;4032   		   	if(!(bps[in]._av&(1<<0)))avar_bps_hndl(in,0,1);
0022d6  7860              LDRB     r0,[r4,#1]
0022d8  07c0              LSLS     r0,r0,#31
0022da  d116              BNE      |L1.8970|
0022dc  2201              MOVS     r2,#1
0022de  2100              MOVS     r1,#0
0022e0  4630              MOV      r0,r6
0022e2  f7fffffe          BL       avar_bps_hndl
0022e6  e010              B        |L1.8970|
                  |L1.8936|
;;;4033   			}
;;;4034   		}
;;;4035   	}
;;;4036   
;;;4037   else if(!(temp&(1<<AV_T)))
;;;4038   	{
;;;4039   	if(bps[in]._temp_av_cnt) 
0022e8  f9b41046          LDRSH    r1,[r4,#0x46]
0022ec  b169              CBZ      r1,|L1.8970|
;;;4040   		{
;;;4041   		bps[in]._temp_av_cnt--;
0022ee  f1a10101          SUB      r1,r1,#1
0022f2  b208              SXTH     r0,r1
0022f4  f8a40046          STRH     r0,[r4,#0x46]
;;;4042   		if(!bps[in]._temp_av_cnt)
0022f8  b938              CBNZ     r0,|L1.8970|
;;;4043   			{
;;;4044   			if(bps[in]._av&(1<<0))avar_bps_hndl(in,0,0);
0022fa  7860              LDRB     r0,[r4,#1]
0022fc  07c0              LSLS     r0,r0,#31
0022fe  d004              BEQ      |L1.8970|
002300  2200              MOVS     r2,#0
002302  4611              MOV      r1,r2
002304  4630              MOV      r0,r6
002306  f7fffffe          BL       avar_bps_hndl
                  |L1.8970|
;;;4045   			}
;;;4046   		} 	
;;;4047   
;;;4048   	}
;;;4049   
;;;4050   if((temp&(1<<AVUMAX)))
00230a  0729              LSLS     r1,r5,#28
;;;4051   	{
;;;4052   	if(bps[in]._umax_av_cnt<10) 
;;;4053   		{
;;;4054   		bps[in]._umax_av_cnt++;
;;;4055   		if(bps[in]._umax_av_cnt>=10)
;;;4056   			{ 
;;;4057   			bps[in]._umax_av_cnt=10;
00230c  f04f070a          MOV      r7,#0xa
002310  f04f0000          MOV      r0,#0                 ;4032
002314  d515              BPL      |L1.9026|
002316  f9b41048          LDRSH    r1,[r4,#0x48]         ;4052
00231a  290a              CMP      r1,#0xa               ;4052
00231c  da26              BGE      |L1.9068|
00231e  f1010101          ADD      r1,r1,#1              ;4054
002322  b208              SXTH     r0,r1                 ;4054
002324  f8a40048          STRH     r0,[r4,#0x48]         ;4054
002328  280a              CMP      r0,#0xa               ;4055
00232a  db1f              BLT      |L1.9068|
00232c  f8a47048          STRH     r7,[r4,#0x48]
;;;4058   			if(!(bps[in]._av&(1<<1)))avar_bps_hndl(in,1,1);
002330  7860              LDRB     r0,[r4,#1]
002332  0780              LSLS     r0,r0,#30
002334  d41a              BMI      |L1.9068|
002336  2201              MOVS     r2,#1
002338  4611              MOV      r1,r2
00233a  4630              MOV      r0,r6
00233c  f7fffffe          BL       avar_bps_hndl
002340  e014              B        |L1.9068|
                  |L1.9026|
;;;4059   		  	/*if((K[APV]!=ON)||((apv_cnt[in,0]==0)&&(apv_cnt[in,1]==0)&&(apv_cnt[in,2]==0)&&(apv_flags[in]==afOFF)))avar_s_hndl(in,1,1);
;;;4060   			if((apv_cnt[in,0]==0)&&(apv_cnt[in,1]==0)&&(apv_cnt[in,2]==0)&&(apv_flags[in]==afON))
;;;4061   				{
;;;4062   				apv_cnt[in,0]=APV_INIT;
;;;4063   				apv_cnt[in,1]=APV_INIT;
;;;4064   				apv_cnt[in,2]=APV_INIT;
;;;4065   				apv_flags[in]=afOFF;
;;;4066   				}				*/
;;;4067   						
;;;4068   			}
;;;4069   		} 
;;;4070   	}		
;;;4071   else if(!(temp&(1<<AVUMAX)))
;;;4072   	{
;;;4073   	if(bps[in]._umax_av_cnt>0) 
002342  f9b41048          LDRSH    r1,[r4,#0x48]
002346  2900              CMP      r1,#0
002348  dd0d              BLE      |L1.9062|
;;;4074   		{
;;;4075   		bps[in]._umax_av_cnt--;
00234a  f1a10101          SUB      r1,r1,#1
00234e  b208              SXTH     r0,r1
002350  f8a40048          STRH     r0,[r4,#0x48]
;;;4076   		if(bps[in]._umax_av_cnt==0)
002354  b950              CBNZ     r0,|L1.9068|
;;;4077   			{
;;;4078   			bps[in]._umax_av_cnt=0;
;;;4079   			avar_bps_hndl(in,1,0);
002356  f04f0200          MOV      r2,#0
00235a  f04f0101          MOV      r1,#1
00235e  4630              MOV      r0,r6
002360  f7fffffe          BL       avar_bps_hndl
002364  e002              B        |L1.9068|
                  |L1.9062|
;;;4080   	 //		apv_cnt[in,0]=0;
;;;4081   	//		apv_cnt[in,1]=0;
;;;4082   	 //		apv_cnt[in,2]=0;			
;;;4083   			}
;;;4084   		}
;;;4085   	else if(bps[in]._umax_av_cnt<0) bps[in]._umax_av_cnt=0;		 
002366  da01              BGE      |L1.9068|
002368  f8a40048          STRH     r0,[r4,#0x48]
                  |L1.9068|
;;;4086   	}
;;;4087   
;;;4088   if(temp&(1<<AVUMIN))
00236c  06e8              LSLS     r0,r5,#27
00236e  d516              BPL      |L1.9118|
;;;4089   	{
;;;4090   	if(bps[in]._umin_av_cnt<10) 
002370  f9b4104a          LDRSH    r1,[r4,#0x4a]
002374  290a              CMP      r1,#0xa
002376  da20              BGE      |L1.9146|
;;;4091   		{
;;;4092   		bps[in]._umin_av_cnt++;
002378  f1010101          ADD      r1,r1,#1
00237c  b208              SXTH     r0,r1
00237e  f8a4004a          STRH     r0,[r4,#0x4a]
;;;4093   		if(bps[in]._umin_av_cnt>=10)
002382  280a              CMP      r0,#0xa
002384  db19              BLT      |L1.9146|
;;;4094   			{ 
;;;4095   			bps[in]._umin_av_cnt=10;
002386  f8a4704a          STRH     r7,[r4,#0x4a]
;;;4096   			if(!(bps[in]._av&(1<<2)))avar_bps_hndl(in,2,1);
00238a  7860              LDRB     r0,[r4,#1]
00238c  0740              LSLS     r0,r0,#29
00238e  d414              BMI      |L1.9146|
002390  2201              MOVS     r2,#1
002392  2102              MOVS     r1,#2
002394  4630              MOV      r0,r6
002396  f7fffffe          BL       avar_bps_hndl
00239a  e00e              B        |L1.9146|
                  |L1.9116|
00239c  e046              B        |L1.9260|
                  |L1.9118|
;;;4097   		  	/*	if((K[APV]!=ON)||((apv_cnt[in,0]==0)&&(apv_cnt[in,1]==0)&&(apv_cnt[in,2]==0)&&(apv_flags[in]==afOFF)))avar_s_hndl(in,2,1);
;;;4098   			if((apv_cnt[in,0]==0)&&(apv_cnt[in,1]==0)&&(apv_cnt[in,2]==0)&&(apv_flags[in]==afON))
;;;4099   				{
;;;4100   				apv_cnt[in,0]=APV_INIT;
;;;4101   				apv_cnt[in,1]=APV_INIT;
;;;4102   				apv_cnt[in,2]=APV_INIT;
;;;4103   				apv_flags[in]=afOFF;
;;;4104   				}*/				
;;;4105   			}
;;;4106   		} 
;;;4107   	}	
;;;4108   	
;;;4109   else if(!(temp&(1<<AVUMIN)))
;;;4110   	{
;;;4111   	if(bps[in]._umin_av_cnt) 
00239e  f9b4004a          LDRSH    r0,[r4,#0x4a]
0023a2  b150              CBZ      r0,|L1.9146|
;;;4112   		{
;;;4113   		bps[in]._umin_av_cnt--;
0023a4  f1a00001          SUB      r0,r0,#1
0023a8  b200              SXTH     r0,r0
0023aa  f8a4004a          STRH     r0,[r4,#0x4a]
;;;4114   		if(bps[in]._umin_av_cnt==0)
0023ae  b920              CBNZ     r0,|L1.9146|
;;;4115   			{
;;;4116   			bps[in]._umin_av_cnt=0;
;;;4117   			avar_bps_hndl(in,2,0);
0023b0  2200              MOVS     r2,#0
0023b2  2102              MOVS     r1,#2
0023b4  4630              MOV      r0,r6
0023b6  f7fffffe          BL       avar_bps_hndl
                  |L1.9146|
;;;4118   		//	apv_cnt[in,0]=0;
;;;4119   		//	apv_cnt[in,1]=0;
;;;4120   		//	apv_cnt[in,2]=0;
;;;4121   			}
;;;4122   		}
;;;4123   	else if(bps[in]._umin_av_cnt>10)bps[in]._umin_av_cnt--;	 
;;;4124   	}
;;;4125   
;;;4126   //bps[in]._state=bsOFF;
;;;4127   
;;;4128   if (bps[in]._av&0x0f)					bps[in]._state=bsAV;
0023ba  7860              LDRB     r0,[r4,#1]
0023bc  0700              LSLS     r0,r0,#28
0023be  d003              BEQ      |L1.9160|
0023c0  f04f0004          MOV      r0,#4
0023c4  70a0              STRB     r0,[r4,#2]
0023c6  e017              B        |L1.9208|
                  |L1.9160|
;;;4129   else if ( (net_av) && (bps[in]._cnt>20)/*&& 
0023c8  48b5              LDR      r0,|L1.9888|
0023ca  7800              LDRB     r0,[r0,#0]  ; net_av
0023cc  b130              CBZ      r0,|L1.9180|
0023ce  78e0              LDRB     r0,[r4,#3]
0023d0  2814              CMP      r0,#0x14
0023d2  d903              BLS      |L1.9180|
;;;4130   		(bps[in]._Uii<200)*/)				bps[in]._state=bsOFF_AV_NET;
0023d4  f04f0005          MOV      r0,#5
0023d8  70a0              STRB     r0,[r4,#2]
0023da  e00d              B        |L1.9208|
                  |L1.9180|
;;;4131   else if (bps[in]._flags_tm&BIN8(100000))	bps[in]._state=bsRDY;
0023dc  f8940042          LDRB     r0,[r4,#0x42]
0023e0  0680              LSLS     r0,r0,#26
0023e2  d503              BPL      |L1.9196|
0023e4  f04f0002          MOV      r0,#2
0023e8  70a0              STRB     r0,[r4,#2]
0023ea  e005              B        |L1.9208|
                  |L1.9196|
;;;4132   else if (bps[in]._cnt<20)				bps[in]._state=bsWRK;
0023ec  78e0              LDRB     r0,[r4,#3]
0023ee  2814              CMP      r0,#0x14
0023f0  d202              BCS      |L1.9208|
0023f2  f04f0001          MOV      r0,#1
0023f6  70a0              STRB     r0,[r4,#2]
                  |L1.9208|
;;;4133   
;;;4134   
;;;4135   
;;;4136   //else if(bps[in]._flags_tm&BIN8(100000)) bps[in]._state=ssBL;
;;;4137   //else if((!(bps[in]._flags_tm&BIN8(100000)))&&(net_U>100))bps[in]._state=ssWRK;
;;;4138   //else bps[0]._state=ssNOT;
;;;4139   
;;;4140   //bps[in]._is_ready=0;
;;;4141   //bps[in]._is_wrk=0;
;;;4142   //if(bps[in]._av_net) bps[in]._flags_bp='N';//  
;;;4143   //else if(bps[in]._av_u_max) bps[in]._flags_bp='P';//  (u_.av_.bAS1T)) bps_state[0]=ssAV;
;;;4144   //else if(bps[in]._av_u_min) bps[in]._flags_bp='M';//  
;;;4145   //else if(bps[in]._av_temper) bps[in]._flags_bp='T';// 
;;;4146   //else if(bps[in]._flags_tm&BIN8(100000)) 
;;;4147   //	{
;;;4148   //	bps[in]._flags_bp='B';// 
;;;4149   //	bps[in]._is_ready=1;
;;;4150   //	}
;;;4151   //else if((!(bps[in]._flags_tm&BIN8(100000)))&&(net_U>100))
;;;4152   //     {
;;;4153   //     bps[in]._flags_bp='W';// 
;;;4154   //     bps[in]._is_ready=1;
;;;4155   //     bps[in]._is_wrk=1;
;;;4156        
;;;4157   //     }
;;;4158   //else bps[in]._is_ready=1;     
;;;4159   
;;;4160   
;;;4161   
;;;4162   
;;;4163   
;;;4164   /*
;;;4165   bps[in]._flags_tu&=BIN8(11111110);
;;;4166   if(bps[in]._ist_blok_cnt)
;;;4167   	{
;;;4168   	bps[in]._ist_blok_cnt--;
;;;4169   	bps[in]._flags_tu|=BIN8(1);
;;;4170   	}
;;;4171   
;;;4172   	   */ 
;;;4173   
;;;4174   //    
;;;4175   if(bps[in]._cnt>=10) bps[in]._flags_tu|=BIN8(10000000);
0023f8  78e0              LDRB     r0,[r4,#3]
0023fa  280a              CMP      r0,#0xa
0023fc  d306              BCC      |L1.9228|
0023fe  f894002c          LDRB     r0,[r4,#0x2c]
002402  f0400080          ORR      r0,r0,#0x80
002406  f884002c          STRB     r0,[r4,#0x2c]
00240a  e005              B        |L1.9240|
                  |L1.9228|
;;;4176   else bps[in]._flags_tu&=BIN8(1111111);
00240c  f894002c          LDRB     r0,[r4,#0x2c]
002410  f000007f          AND      r0,r0,#0x7f
002414  f884002c          STRB     r0,[r4,#0x2c]
                  |L1.9240|
;;;4177   	
;;;4178   bps[in]._vol_u=cntrl_stat+bps[in]._x_;	
002418  49a2              LDR      r1,|L1.9892|
00241a  f9b40050          LDRSH    r0,[r4,#0x50]
00241e  f9b1101a          LDRSH    r1,[r1,#0x1a]  ; cntrl_stat
002422  4408              ADD      r0,r0,r1
002424  6320              STR      r0,[r4,#0x30]
;;;4179   bps[in]._vol_i=1000; 
002426  f44f707a          MOV      r0,#0x3e8
00242a  6360              STR      r0,[r4,#0x34]
                  |L1.9260|
;;;4180   }
00242c  e528              B        |L1.7808|
;;;4181   
                          ENDP

                  avt_hndl PROC
;;;4182   //-----------------------------------------------
;;;4183   void avt_hndl(void)
00242e  b570              PUSH     {r4-r6,lr}
;;;4184   {
;;;4185   char i;
;;;4186   for(i=0;i<12;i++)
002430  f04f0000          MOV      r0,#0
;;;4187   	{
;;;4188   	if(eb2_data_short[6]&(1<<i))
002434  499c              LDR      r1,|L1.9896|
;;;4189   		{
;;;4190   		avt_stat[i]=avtON;
002436  4d9d              LDR      r5,|L1.9900|
002438  f04f0401          MOV      r4,#1                 ;4188
00243c  f9b1200c          LDRSH    r2,[r1,#0xc]          ;4188
002440  4603              MOV      r3,r0                 ;4186
                  |L1.9282|
002442  fa04f100          LSL      r1,r4,r0              ;4188
002446  420a              TST      r2,r1                 ;4188
002448  d001              BEQ      |L1.9294|
00244a  542c              STRB     r4,[r5,r0]
00244c  e000              B        |L1.9296|
                  |L1.9294|
;;;4191   		}
;;;4192   	else avt_stat[i]=avtOFF;
00244e  542b              STRB     r3,[r5,r0]
                  |L1.9296|
002450  f1000001          ADD      r0,r0,#1              ;4186
002454  b2c0              UXTB     r0,r0                 ;4186
002456  280c              CMP      r0,#0xc               ;4186
002458  d3f3              BCC      |L1.9282|
;;;4193   	}
;;;4194   
;;;4195   if((avt_stat_old[0]!=avt_stat[0])&&(NUMAVT>=1))
00245a  4e95              LDR      r6,|L1.9904|
00245c  7828              LDRB     r0,[r5,#0]  ; avt_stat
00245e  4c95              LDR      r4,|L1.9908|
002460  7831              LDRB     r1,[r6,#0]  ; avt_stat_old
002462  4281              CMP      r1,r0
002464  d00b              BEQ      |L1.9342|
002466  f9b41000          LDRSH    r1,[r4,#0]  ; NUMAVT
00246a  2901              CMP      r1,#1
00246c  db07              BLT      |L1.9342|
;;;4196   	{
;;;4197   	if(avt_stat[0]==avtON) 	snmp_trap_send("Avtomat #1 is ON ",11,1,1);
00246e  2801              CMP      r0,#1
002470  d07e              BEQ      |L1.9584|
;;;4198   	else 				snmp_trap_send("Avtomat #1 is OFF",11,1,0);
002472  2300              MOVS     r3,#0
002474  2201              MOVS     r2,#1
002476  210b              MOVS     r1,#0xb
002478  a08f              ADR      r0,|L1.9912|
00247a  f7fffffe          BL       snmp_trap_send
                  |L1.9342|
;;;4199   	}
;;;4200   if((avt_stat_old[1]!=avt_stat[1])&&(NUMAVT>=2))
00247e  7871              LDRB     r1,[r6,#1]  ; avt_stat_old
002480  7868              LDRB     r0,[r5,#1]  ; avt_stat
002482  4281              CMP      r1,r0
002484  d00b              BEQ      |L1.9374|
002486  f9b41000          LDRSH    r1,[r4,#0]  ; NUMAVT
00248a  2902              CMP      r1,#2
00248c  db07              BLT      |L1.9374|
;;;4201   	{
;;;4202   	if(avt_stat[1]==avtON) 	snmp_trap_send("Avtomat #2 is ON ",11,2,1);
00248e  2801              CMP      r0,#1
002490  d06f              BEQ      |L1.9586|
;;;4203   	else 				snmp_trap_send("Avtomat #2 is OFF",11,2,0);
002492  2300              MOVS     r3,#0
002494  2202              MOVS     r2,#2
002496  210b              MOVS     r1,#0xb
002498  a08c              ADR      r0,|L1.9932|
00249a  f7fffffe          BL       snmp_trap_send
                  |L1.9374|
;;;4204   	}
;;;4205   if((avt_stat_old[2]!=avt_stat[2])&&(NUMAVT>=3))
00249e  78b1              LDRB     r1,[r6,#2]  ; avt_stat_old
0024a0  78a8              LDRB     r0,[r5,#2]  ; avt_stat
0024a2  4281              CMP      r1,r0
0024a4  d00b              BEQ      |L1.9406|
0024a6  f9b41000          LDRSH    r1,[r4,#0]  ; NUMAVT
0024aa  2903              CMP      r1,#3
0024ac  db07              BLT      |L1.9406|
;;;4206   	{
;;;4207   	if(avt_stat[2]==avtON) 	snmp_trap_send("Avtomat #3 is ON ",11,3,1);
0024ae  2801              CMP      r0,#1
0024b0  d072              BEQ      |L1.9624|
;;;4208   	else 				snmp_trap_send("Avtomat #3 is OFF",11,3,0);
0024b2  2300              MOVS     r3,#0
0024b4  2203              MOVS     r2,#3
0024b6  210b              MOVS     r1,#0xb
0024b8  a089              ADR      r0,|L1.9952|
0024ba  f7fffffe          BL       snmp_trap_send
                  |L1.9406|
;;;4209   	}
;;;4210   if((avt_stat_old[3]!=avt_stat[3])&&(NUMAVT>=4))
0024be  78f1              LDRB     r1,[r6,#3]  ; avt_stat_old
0024c0  78e8              LDRB     r0,[r5,#3]  ; avt_stat
0024c2  4281              CMP      r1,r0
0024c4  d00b              BEQ      |L1.9438|
0024c6  f9b41000          LDRSH    r1,[r4,#0]  ; NUMAVT
0024ca  2904              CMP      r1,#4
0024cc  db07              BLT      |L1.9438|
;;;4211   	{
;;;4212   	if(avt_stat[3]==avtON) 	snmp_trap_send("Avtomat #4 is ON ",11,4,1);
0024ce  2801              CMP      r0,#1
0024d0  d079              BEQ      |L1.9670|
;;;4213   	else 				snmp_trap_send("Avtomat #4 is OFF",11,4,0);
0024d2  2300              MOVS     r3,#0
0024d4  2204              MOVS     r2,#4
0024d6  210b              MOVS     r1,#0xb
0024d8  a086              ADR      r0,|L1.9972|
0024da  f7fffffe          BL       snmp_trap_send
                  |L1.9438|
;;;4214   	}
;;;4215   if((avt_stat_old[4]!=avt_stat[4])&&(NUMAVT>=5))
0024de  7931              LDRB     r1,[r6,#4]  ; avt_stat_old
0024e0  7928              LDRB     r0,[r5,#4]  ; avt_stat
0024e2  4281              CMP      r1,r0
0024e4  d00b              BEQ      |L1.9470|
0024e6  f9b41000          LDRSH    r1,[r4,#0]  ; NUMAVT
0024ea  2905              CMP      r1,#5
0024ec  db07              BLT      |L1.9470|
;;;4216   	{
;;;4217   	if(avt_stat[4]==avtON) 	snmp_trap_send("Avtomat #5 is ON ",11,5,1);
0024ee  2801              CMP      r0,#1
0024f0  d071              BEQ      |L1.9686|
;;;4218   	else 				snmp_trap_send("Avtomat #5 is OFF",11,5,0);
0024f2  2300              MOVS     r3,#0
0024f4  2205              MOVS     r2,#5
0024f6  210b              MOVS     r1,#0xb
0024f8  a083              ADR      r0,|L1.9992|
0024fa  f7fffffe          BL       snmp_trap_send
                  |L1.9470|
;;;4219   	}
;;;4220   if((avt_stat_old[5]!=avt_stat[5])&&(NUMAVT>=6))
0024fe  7971              LDRB     r1,[r6,#5]  ; avt_stat_old
002500  7968              LDRB     r0,[r5,#5]  ; avt_stat
002502  4281              CMP      r1,r0
002504  d00b              BEQ      |L1.9502|
002506  f9b41000          LDRSH    r1,[r4,#0]  ; NUMAVT
00250a  2906              CMP      r1,#6
00250c  db07              BLT      |L1.9502|
;;;4221   	{
;;;4222   	if(avt_stat[5]==avtON) 	snmp_trap_send("Avtomat #6 is ON ",11,6,1);
00250e  2801              CMP      r0,#1
002510  d068              BEQ      |L1.9700|
;;;4223   	else 				snmp_trap_send("Avtomat #6 is OFF",11,6,0);
002512  2300              MOVS     r3,#0
002514  2206              MOVS     r2,#6
002516  210b              MOVS     r1,#0xb
002518  a080              ADR      r0,|L1.10012|
00251a  f7fffffe          BL       snmp_trap_send
                  |L1.9502|
;;;4224   	}
;;;4225   if((avt_stat_old[6]!=avt_stat[6])&&(NUMAVT>=7))
00251e  79b1              LDRB     r1,[r6,#6]  ; avt_stat_old
002520  79a8              LDRB     r0,[r5,#6]  ; avt_stat
002522  4281              CMP      r1,r0
002524  d00b              BEQ      |L1.9534|
002526  f9b41000          LDRSH    r1,[r4,#0]  ; NUMAVT
00252a  2907              CMP      r1,#7
00252c  db07              BLT      |L1.9534|
;;;4226   	{
;;;4227   	if(avt_stat[6]==avtON) 	snmp_trap_send("Avtomat #7 is ON ",11,7,1);
00252e  2801              CMP      r0,#1
002530  d05f              BEQ      |L1.9714|
;;;4228   	else 				snmp_trap_send("Avtomat #7 is OFF",11,7,0);
002532  2300              MOVS     r3,#0
002534  2207              MOVS     r2,#7
002536  210b              MOVS     r1,#0xb
002538  a07d              ADR      r0,|L1.10032|
00253a  f7fffffe          BL       snmp_trap_send
                  |L1.9534|
;;;4229   	}
;;;4230   if((avt_stat_old[7]!=avt_stat[7])&&(NUMAVT>=8))
00253e  79f1              LDRB     r1,[r6,#7]  ; avt_stat_old
002540  79e8              LDRB     r0,[r5,#7]  ; avt_stat
002542  4281              CMP      r1,r0
002544  d00b              BEQ      |L1.9566|
002546  f9b41000          LDRSH    r1,[r4,#0]  ; NUMAVT
00254a  2908              CMP      r1,#8
00254c  db07              BLT      |L1.9566|
;;;4231   	{
;;;4232   	if(avt_stat[7]==avtON) 	snmp_trap_send("Avtomat #8 is ON ",11,8,1);
00254e  2801              CMP      r0,#1
002550  d056              BEQ      |L1.9728|
;;;4233   	else 				snmp_trap_send("Avtomat #8 is OFF",11,8,0);
002552  2300              MOVS     r3,#0
002554  2208              MOVS     r2,#8
002556  210b              MOVS     r1,#0xb
002558  a07a              ADR      r0,|L1.10052|
00255a  f7fffffe          BL       snmp_trap_send
                  |L1.9566|
;;;4234   	}
;;;4235   if((avt_stat_old[8]!=avt_stat[8])&&(NUMAVT>=9))
00255e  7a31              LDRB     r1,[r6,#8]  ; avt_stat_old
002560  7a28              LDRB     r0,[r5,#8]  ; avt_stat
002562  4281              CMP      r1,r0
002564  d00e              BEQ      |L1.9604|
002566  f9b41000          LDRSH    r1,[r4,#0]  ; NUMAVT
00256a  2909              CMP      r1,#9
00256c  db0a              BLT      |L1.9604|
;;;4236   	{
;;;4237   	if(avt_stat[8]==avtON) 	snmp_trap_send("Avtomat #9 is ON ",11,9,1);
00256e  e001              B        |L1.9588|
                  |L1.9584|
002570  e013              B        |L1.9626|
                  |L1.9586|
002572  e019              B        |L1.9640|
                  |L1.9588|
002574  2801              CMP      r0,#1
002576  d04a              BEQ      |L1.9742|
;;;4238   	else 				snmp_trap_send("Avtomat #9 is OFF",11,9,0);
002578  2300              MOVS     r3,#0
00257a  2209              MOVS     r2,#9
00257c  210b              MOVS     r1,#0xb
00257e  a076              ADR      r0,|L1.10072|
002580  f7fffffe          BL       snmp_trap_send
                  |L1.9604|
;;;4239   	}
;;;4240   
;;;4241   for(i=0;i<12;i++)
002584  f04f0000          MOV      r0,#0
                  |L1.9608|
;;;4242   	{
;;;4243   	avt_stat_old[i]=avt_stat[i];
002588  5c29              LDRB     r1,[r5,r0]
00258a  5431              STRB     r1,[r6,r0]
00258c  f1000001          ADD      r0,r0,#1              ;4241
002590  b2c0              UXTB     r0,r0                 ;4241
002592  280c              CMP      r0,#0xc               ;4241
002594  d3f8              BCC      |L1.9608|
                  |L1.9622|
;;;4244   	}
;;;4245   }
002596  bd70              POP      {r4-r6,pc}
                  |L1.9624|
002598  e00e              B        |L1.9656|
                  |L1.9626|
00259a  2301              MOVS     r3,#1                 ;4197
00259c  461a              MOV      r2,r3                 ;4197
00259e  210b              MOVS     r1,#0xb               ;4197
0025a0  a072              ADR      r0,|L1.10092|
0025a2  f7fffffe          BL       snmp_trap_send
0025a6  e76a              B        |L1.9342|
                  |L1.9640|
0025a8  2301              MOVS     r3,#1                 ;4202
0025aa  2202              MOVS     r2,#2                 ;4202
0025ac  210b              MOVS     r1,#0xb               ;4202
0025ae  a074              ADR      r0,|L1.10112|
0025b0  f7fffffe          BL       snmp_trap_send
0025b4  e773              B        |L1.9374|
0025b6  e006              B        |L1.9670|
                  |L1.9656|
0025b8  2301              MOVS     r3,#1                 ;4207
0025ba  2203              MOVS     r2,#3                 ;4207
0025bc  210b              MOVS     r1,#0xb               ;4207
0025be  a075              ADR      r0,|L1.10132|
0025c0  f7fffffe          BL       snmp_trap_send
0025c4  e77b              B        |L1.9406|
                  |L1.9670|
0025c6  2301              MOVS     r3,#1                 ;4212
0025c8  2204              MOVS     r2,#4                 ;4212
0025ca  210b              MOVS     r1,#0xb               ;4212
0025cc  a076              ADR      r0,|L1.10152|
0025ce  f7fffffe          BL       snmp_trap_send
0025d2  e784              B        |L1.9438|
0025d4  e7ff              B        |L1.9686|
                  |L1.9686|
0025d6  2301              MOVS     r3,#1                 ;4217
0025d8  2205              MOVS     r2,#5                 ;4217
0025da  210b              MOVS     r1,#0xb               ;4217
0025dc  a077              ADR      r0,|L1.10172|
0025de  f7fffffe          BL       snmp_trap_send
0025e2  e78c              B        |L1.9470|
                  |L1.9700|
0025e4  2301              MOVS     r3,#1                 ;4222
0025e6  2206              MOVS     r2,#6                 ;4222
0025e8  210b              MOVS     r1,#0xb               ;4222
0025ea  a079              ADR      r0,|L1.10192|
0025ec  f7fffffe          BL       snmp_trap_send
0025f0  e795              B        |L1.9502|
                  |L1.9714|
0025f2  2301              MOVS     r3,#1                 ;4227
0025f4  2207              MOVS     r2,#7                 ;4227
0025f6  210b              MOVS     r1,#0xb               ;4227
0025f8  a07a              ADR      r0,|L1.10212|
0025fa  f7fffffe          BL       snmp_trap_send
0025fe  e79e              B        |L1.9534|
                  |L1.9728|
002600  2301              MOVS     r3,#1                 ;4232
002602  2208              MOVS     r2,#8                 ;4232
002604  210b              MOVS     r1,#0xb               ;4232
002606  a07c              ADR      r0,|L1.10232|
002608  f7fffffe          BL       snmp_trap_send
00260c  e7a7              B        |L1.9566|
                  |L1.9742|
00260e  2301              MOVS     r3,#1                 ;4237
002610  2209              MOVS     r2,#9                 ;4237
002612  210b              MOVS     r1,#0xb               ;4237
002614  a07d              ADR      r0,|L1.10252|
002616  f7fffffe          BL       snmp_trap_send
00261a  e7b3              B        |L1.9604|
;;;4246   
                          ENDP

                  bat_hndl PROC
;;;4247   //-----------------------------------------------
;;;4248   void bat_hndl(void)
00261c  b570              PUSH     {r4-r6,lr}
;;;4249   {
;;;4250   /*if(mess_find(_MESS_BAT_MASK_ON))
;;;4251   	{
;;;4252   	if(mess_data[0]==_MESS_BAT_MASK_ON)
;;;4253   		{
;;;4254   		char i;
;;;4255   		for(i=0;i<2;i++)
;;;4256   			{
;;;4257   			if(mess_data[1]&(1<<i))
;;;4258   				{
;;;4259   				bat[i]._cnt_to_block=0;
;;;4260        			bat[i]._rel_stat=0;
;;;4261        			}
;;;4262   			}
;;;4263   		}
;;;4264   	}
;;;4265   if(mess_find(_MESS_BAT_MASK_OFF))
;;;4266   	{		
;;;4267   	if(mess_data[0]==_MESS_BAT_MASK_OFF)
;;;4268   		{
;;;4269   		char i;
;;;4270   		for(i=0;i<2;i++)
;;;4271   			{
;;;4272   			if((mess_data[1]&(1<<i)) && (bat[i]._cnt_to_block==0) && (bat[i]._rel_stat==0))
;;;4273   				{
;;;4274   				bat[i]._cnt_to_block=20;
;;;4275   				bat[i]._rel_stat=1;
;;;4276        			}
;;;4277   			}
;;;4278   		
;;;4279   		}		
;;;4280   	}*/
;;;4281   
;;;4282   if(mess_find_unvol(MESS2BAT_HNDL))
00261e  20c8              MOVS     r0,#0xc8
002620  f7fffffe          BL       mess_find_unvol
;;;4283   	{ 
;;;4284   	char i;
;;;4285   	
;;;4286   	if(mess_data[0]==PARAM_BAT_ALL_OFF_AFTER_2SEC)
;;;4287   		{
;;;4288   		for(i=0;i<MAX_NUM_OF_BAT;i++)
;;;4289   			{
;;;4290   			if(bat[i]._cnt_to_block<50)bat[i]._cnt_to_block++;
002624  497e              LDR      r1,|L1.10272|
002626  2200              MOVS     r2,#0                 ;4288
002628  b3a8              CBZ      r0,|L1.9878|
00262a  4b7e              LDR      r3,|L1.10276|
;;;4291   			}
;;;4292   		}
;;;4293   
;;;4294   	else if(mess_data[0]==PARAM_BAT_MASK_OFF_AFTER_2SEC)
;;;4295   		{
;;;4296   		for(i=0;i<MAX_NUM_OF_BAT;i++)
;;;4297   			{
;;;4298   			if(mess_data[1]&(1<<i))
00262c  2401              MOVS     r4,#1
00262e  6818              LDR      r0,[r3,#0]            ;4286  ; mess_data
002630  28c9              CMP      r0,#0xc9              ;4286
002632  d01c              BEQ      |L1.9838|
002634  28ca              CMP      r0,#0xca              ;4294
002636  d02f              BEQ      |L1.9880|
;;;4299   				{
;;;4300   				if(bat[i]._cnt_to_block<50) bat[i]._cnt_to_block++;
;;;4301   				}
;;;4302   			else bat[i]._cnt_to_block=0;
;;;4303   			}
;;;4304   		}
;;;4305   	else 
;;;4306   	 	{
;;;4307   		for(i=0;i<MAX_NUM_OF_BAT;i++)
002638  4610              MOV      r0,r2
                  |L1.9786|
;;;4308   			{
;;;4309   			bat[i]._cnt_to_block=0;
00263a  eb000340          ADD      r3,r0,r0,LSL #1
00263e  eb031300          ADD      r3,r3,r0,LSL #4
002642  f8012023          STRB     r2,[r1,r3,LSL #2]
002646  f1000001          ADD      r0,r0,#1              ;4307
00264a  b2c0              UXTB     r0,r0                 ;4307
00264c  2802              CMP      r0,#2                 ;4307
00264e  d3f4              BCC      |L1.9786|
                  |L1.9808|
;;;4310   			}
;;;4311   
;;;4312   		}
;;;4313   	for(i=0;i<MAX_NUM_OF_BAT;i++)
002650  f04f0000          MOV      r0,#0
                  |L1.9812|
;;;4314   		{
;;;4315   		if(bat[i]._cnt_to_block>20)bat[i]._rel_stat=1;
002654  eb000340          ADD      r3,r0,r0,LSL #1
002658  eb031300          ADD      r3,r3,r0,LSL #4
00265c  f8115023          LDRB     r5,[r1,r3,LSL #2]
002660  2d14              CMP      r5,#0x14
002662  d91a              BLS      |L1.9882|
002664  eb010383          ADD      r3,r1,r3,LSL #2
002668  f883403c          STRB     r4,[r3,#0x3c]
00266c  e100              B        |L1.10352|
                  |L1.9838|
00266e  f04f0000          MOV      r0,#0                 ;4288
                  |L1.9842|
002672  eb000340          ADD      r3,r0,r0,LSL #1       ;4290
002676  eb031500          ADD      r5,r3,r0,LSL #4       ;4290
00267a  f8113025          LDRB     r3,[r1,r5,LSL #2]     ;4290
00267e  2b32              CMP      r3,#0x32              ;4290
002680  d203              BCS      |L1.9866|
002682  f1030301          ADD      r3,r3,#1              ;4290
002686  f8013025          STRB     r3,[r1,r5,LSL #2]     ;4290
                  |L1.9866|
00268a  f1000001          ADD      r0,r0,#1              ;4288
00268e  b2c0              UXTB     r0,r0                 ;4288
002690  2802              CMP      r0,#2                 ;4288
002692  d3ee              BCC      |L1.9842|
002694  e7dc              B        |L1.9808|
                  |L1.9878|
002696  e0f2              B        |L1.10366|
                  |L1.9880|
002698  e0c6              B        |L1.10280|
                  |L1.9882|
00269a  e0e5              B        |L1.10344|
                  |L1.9884|
                          DCD      bps
                  |L1.9888|
                          DCD      net_av
                  |L1.9892|
                          DCD      ||area_number.21||
                  |L1.9896|
                          DCD      eb2_data_short
                  |L1.9900|
                          DCD      avt_stat
                  |L1.9904|
                          DCD      avt_stat_old
                  |L1.9908|
                          DCD      NUMAVT
                  |L1.9912|
0026b8  4176746f          DCB      "Avtomat #1 is OFF",0
0026bc  6d617420
0026c0  23312069
0026c4  73204f46
0026c8  4600    
0026ca  00                DCB      0
0026cb  00                DCB      0
                  |L1.9932|
0026cc  4176746f          DCB      "Avtomat #2 is OFF",0
0026d0  6d617420
0026d4  23322069
0026d8  73204f46
0026dc  4600    
0026de  00                DCB      0
0026df  00                DCB      0
                  |L1.9952|
0026e0  4176746f          DCB      "Avtomat #3 is OFF",0
0026e4  6d617420
0026e8  23332069
0026ec  73204f46
0026f0  4600    
0026f2  00                DCB      0
0026f3  00                DCB      0
                  |L1.9972|
0026f4  4176746f          DCB      "Avtomat #4 is OFF",0
0026f8  6d617420
0026fc  23342069
002700  73204f46
002704  4600    
002706  00                DCB      0
002707  00                DCB      0
                  |L1.9992|
002708  4176746f          DCB      "Avtomat #5 is OFF",0
00270c  6d617420
002710  23352069
002714  73204f46
002718  4600    
00271a  00                DCB      0
00271b  00                DCB      0
                  |L1.10012|
00271c  4176746f          DCB      "Avtomat #6 is OFF",0
002720  6d617420
002724  23362069
002728  73204f46
00272c  4600    
00272e  00                DCB      0
00272f  00                DCB      0
                  |L1.10032|
002730  4176746f          DCB      "Avtomat #7 is OFF",0
002734  6d617420
002738  23372069
00273c  73204f46
002740  4600    
002742  00                DCB      0
002743  00                DCB      0
                  |L1.10052|
002744  4176746f          DCB      "Avtomat #8 is OFF",0
002748  6d617420
00274c  23382069
002750  73204f46
002754  4600    
002756  00                DCB      0
002757  00                DCB      0
                  |L1.10072|
002758  4176746f          DCB      "Avtomat #9 is OFF",0
00275c  6d617420
002760  23392069
002764  73204f46
002768  4600    
00276a  00                DCB      0
00276b  00                DCB      0
                  |L1.10092|
00276c  4176746f          DCB      "Avtomat #1 is ON ",0
002770  6d617420
002774  23312069
002778  73204f4e
00277c  2000    
00277e  00                DCB      0
00277f  00                DCB      0
                  |L1.10112|
002780  4176746f          DCB      "Avtomat #2 is ON ",0
002784  6d617420
002788  23322069
00278c  73204f4e
002790  2000    
002792  00                DCB      0
002793  00                DCB      0
                  |L1.10132|
002794  4176746f          DCB      "Avtomat #3 is ON ",0
002798  6d617420
00279c  23332069
0027a0  73204f4e
0027a4  2000    
0027a6  00                DCB      0
0027a7  00                DCB      0
                  |L1.10152|
0027a8  4176746f          DCB      "Avtomat #4 is ON ",0
0027ac  6d617420
0027b0  23342069
0027b4  73204f4e
0027b8  2000    
0027ba  00                DCB      0
0027bb  00                DCB      0
                  |L1.10172|
0027bc  4176746f          DCB      "Avtomat #5 is ON ",0
0027c0  6d617420
0027c4  23352069
0027c8  73204f4e
0027cc  2000    
0027ce  00                DCB      0
0027cf  00                DCB      0
                  |L1.10192|
0027d0  4176746f          DCB      "Avtomat #6 is ON ",0
0027d4  6d617420
0027d8  23362069
0027dc  73204f4e
0027e0  2000    
0027e2  00                DCB      0
0027e3  00                DCB      0
                  |L1.10212|
0027e4  4176746f          DCB      "Avtomat #7 is ON ",0
0027e8  6d617420
0027ec  23372069
0027f0  73204f4e
0027f4  2000    
0027f6  00                DCB      0
0027f7  00                DCB      0
                  |L1.10232|
0027f8  4176746f          DCB      "Avtomat #8 is ON ",0
0027fc  6d617420
002800  23382069
002804  73204f4e
002808  2000    
00280a  00                DCB      0
00280b  00                DCB      0
                  |L1.10252|
00280c  4176746f          DCB      "Avtomat #9 is ON ",0
002810  6d617420
002814  23392069
002818  73204f4e
00281c  2000    
00281e  00                DCB      0
00281f  00                DCB      0
                  |L1.10272|
                          DCD      bat
                  |L1.10276|
                          DCD      mess_data
                  |L1.10280|
002828  f04f0000          MOV      r0,#0                 ;4296
00282c  685e              LDR      r6,[r3,#4]            ;4298
                  |L1.10286|
00282e  fa04f300          LSL      r3,r4,r0              ;4298
002832  421e              TST      r6,r3                 ;4298
002834  d00c              BEQ      |L1.10320|
002836  eb000340          ADD      r3,r0,r0,LSL #1       ;4300
00283a  eb031500          ADD      r5,r3,r0,LSL #4       ;4300
00283e  f8113025          LDRB     r3,[r1,r5,LSL #2]     ;4300
002842  2b32              CMP      r3,#0x32              ;4300
002844  d20a              BCS      |L1.10332|
002846  f1030301          ADD      r3,r3,#1              ;4300
00284a  f8013025          STRB     r3,[r1,r5,LSL #2]     ;4300
00284e  e005              B        |L1.10332|
                  |L1.10320|
002850  eb000340          ADD      r3,r0,r0,LSL #1       ;4302
002854  eb031300          ADD      r3,r3,r0,LSL #4       ;4302
002858  f8012023          STRB     r2,[r1,r3,LSL #2]     ;4302
                  |L1.10332|
00285c  f1000001          ADD      r0,r0,#1              ;4296
002860  b2c0              UXTB     r0,r0                 ;4296
002862  2802              CMP      r0,#2                 ;4296
002864  d3e3              BCC      |L1.10286|
002866  e6f3              B        |L1.9808|
                  |L1.10344|
;;;4316   		else bat[i]._rel_stat=0;
002868  eb010383          ADD      r3,r1,r3,LSL #2
00286c  f883203c          STRB     r2,[r3,#0x3c]
                  |L1.10352|
002870  f1000001          ADD      r0,r0,#1              ;4313
002874  b2c0              UXTB     r0,r0                 ;4313
002876  2802              CMP      r0,#2                 ;4313
002878  f4ffaeec          BCC      |L1.9812|
;;;4317   		}
;;;4318   
;;;4319   	}
;;;4320   
;;;4321   else 
;;;4322   	{
;;;4323   	char i;
;;;4324   	for(i=0;i<MAX_NUM_OF_BAT;i++)
;;;4325   		{
;;;4326   		bat[i]._cnt_to_block=0;
;;;4327   		bat[i]._rel_stat=0;
;;;4328   		}
;;;4329   
;;;4330   	}
;;;4331   
;;;4332   /*if(mess_find_unvol(MESS2BAT_HNDL1))
;;;4333   	{
;;;4334   	if(PARAM_BAT_ON)
;;;4335   		{
;;;4336   		char i;
;;;4337   		for(i=0;i<MAX_NUM_OF_BAT;i++)
;;;4338   			{
;;;4339   			if(mess_data[1]&(1<<i))
;;;4340   				{
;;;4341   				bat[i]._cnt_to_block=0;
;;;4342   				bat[i]._rel_stat=0;
;;;4343   				}
;;;4344   			}
;;;4345   		}
;;;4346   	} */
;;;4347   }
00287c  e68b              B        |L1.9622|
                  |L1.10366|
00287e  f04f0000          MOV      r0,#0                 ;4324
                  |L1.10370|
002882  eb000340          ADD      r3,r0,r0,LSL #1       ;4326
002886  eb031300          ADD      r3,r3,r0,LSL #4       ;4326
00288a  f8012023          STRB     r2,[r1,r3,LSL #2]     ;4326
00288e  eb010383          ADD      r3,r1,r3,LSL #2       ;4327
002892  f883203c          STRB     r2,[r3,#0x3c]         ;4327
002896  f1000001          ADD      r0,r0,#1              ;4324
00289a  b2c0              UXTB     r0,r0                 ;4324
00289c  2802              CMP      r0,#2                 ;4324
00289e  d3f0              BCC      |L1.10370|
0028a0  e679              B        |L1.9622|
;;;4348   
                          ENDP

                  klimat_hndl PROC
;;;4478   //-----------------------------------------------
;;;4479   void klimat_hndl(void)
0028a2  e92d41f0          PUSH     {r4-r8,lr}
;;;4480   {
;;;4481   
;;;4482   
;;;4483   if(t_box>TBOXMAX)
0028a6  4dfd              LDR      r5,|L1.11420|
0028a8  48fd              LDR      r0,|L1.11424|
;;;4484   	{
;;;4485   	av_tbox_cnt++;
0028aa  4cfe              LDR      r4,|L1.11428|
0028ac  f9b51000          LDRSH    r1,[r5,#0]            ;4483  ; t_box
0028b0  f9b02000          LDRSH    r2,[r0,#0]            ;4483  ; TBOXMAX
0028b4  f9b40000          LDRSH    r0,[r4,#0]
0028b8  4291              CMP      r1,r2                 ;4483
0028ba  dd03              BLE      |L1.10436|
0028bc  f1000001          ADD      r0,r0,#1
0028c0  8020              STRH     r0,[r4,#0]
0028c2  e003              B        |L1.10444|
                  |L1.10436|
;;;4486   	} 
;;;4487   else if(t_box<TBOXMAX)
0028c4  da02              BGE      |L1.10444|
;;;4488   	{
;;;4489   	av_tbox_cnt--;
0028c6  f1a00001          SUB      r0,r0,#1
0028ca  8020              STRH     r0,[r4,#0]
                  |L1.10444|
;;;4490   	}
;;;4491   gran(&av_tbox_cnt,0,6);
0028cc  2206              MOVS     r2,#6
0028ce  2100              MOVS     r1,#0
0028d0  48f4              LDR      r0,|L1.11428|
0028d2  f7fffffe          BL       gran
;;;4492   
;;;4493   if(av_tbox_cnt>5)
0028d6  f9b40000          LDRSH    r0,[r4,#0]  ; av_tbox_cnt
;;;4494   	{
;;;4495   	av_tbox_stat=atsON;
0028da  49f3              LDR      r1,|L1.11432|
0028dc  2601              MOVS     r6,#1
0028de  2805              CMP      r0,#5                 ;4493
0028e0  dd00              BLE      |L1.10468|
0028e2  700e              STRB     r6,[r1,#0]
                  |L1.10468|
0028e4  2400              MOVS     r4,#0                 ;4491
;;;4496   	}
;;;4497   if(av_tbox_cnt<1)
0028e6  2801              CMP      r0,#1
0028e8  da00              BGE      |L1.10476|
;;;4498   	{
;;;4499   	av_tbox_stat=atsOFF;
0028ea  700c              STRB     r4,[r1,#0]
                  |L1.10476|
;;;4500   	}
;;;4501   
;;;4502   if(t_box<(TBOXREG-2))
0028ec  49ef              LDR      r1,|L1.11436|
0028ee  f9b50000          LDRSH    r0,[r5,#0]  ; t_box
;;;4503   	{
;;;4504   	if(t_box_cnt<30)
0028f2  4aef              LDR      r2,|L1.11440|
0028f4  f9b11000          LDRSH    r1,[r1,#0]            ;4502  ; TBOXREG
;;;4505   		{
;;;4506   		t_box_cnt++;
;;;4507   		if(t_box_cnt>=30)
;;;4508   			{
;;;4509   			main_vent_pos--;
0028f8  4fee              LDR      r7,|L1.11444|
0028fa  1e8b              SUBS     r3,r1,#2              ;4502
0028fc  4298              CMP      r0,r3                 ;4502
0028fe  da0f              BGE      |L1.10528|
002900  f9921000          LDRSB    r1,[r2,#0]            ;4504  ; t_box_cnt
002904  291e              CMP      r1,#0x1e              ;4504
002906  da1e              BGE      |L1.10566|
002908  f1010101          ADD      r1,r1,#1              ;4506
00290c  b249              SXTB     r1,r1                 ;4506
00290e  7011              STRB     r1,[r2,#0]            ;4506
002910  291e              CMP      r1,#0x1e              ;4507
002912  db18              BLT      |L1.10566|
002914  8839              LDRH     r1,[r7,#0]  ; main_vent_pos
002916  f1a10101          SUB      r1,r1,#1
00291a  8039              STRH     r1,[r7,#0]
;;;4510   			t_box_cnt=0;
00291c  7014              STRB     r4,[r2,#0]
00291e  e012              B        |L1.10566|
                  |L1.10528|
;;;4511   			}
;;;4512   		}
;;;4513   	}
;;;4514   else if(t_box>(TBOXREG))
002920  4288              CMP      r0,r1
002922  dd0f              BLE      |L1.10564|
;;;4515   	{
;;;4516   	if(t_box_cnt<30)
002924  f9921000          LDRSB    r1,[r2,#0]  ; t_box_cnt
002928  291e              CMP      r1,#0x1e
00292a  da0c              BGE      |L1.10566|
;;;4517   		{
;;;4518   		t_box_cnt++;
00292c  f1010101          ADD      r1,r1,#1
002930  b249              SXTB     r1,r1
002932  7011              STRB     r1,[r2,#0]
;;;4519   		if(t_box_cnt>=30)
002934  291e              CMP      r1,#0x1e
002936  db06              BLT      |L1.10566|
;;;4520   			{
;;;4521   			main_vent_pos++;
002938  8839              LDRH     r1,[r7,#0]  ; main_vent_pos
00293a  f1010101          ADD      r1,r1,#1
00293e  8039              STRH     r1,[r7,#0]
;;;4522   			t_box_cnt=0;
002940  7014              STRB     r4,[r2,#0]
002942  e000              B        |L1.10566|
                  |L1.10564|
;;;4523   			}
;;;4524   		}
;;;4525   	}
;;;4526   else
;;;4527   	{
;;;4528   	t_box_cnt=0;
002944  7014              STRB     r4,[r2,#0]
                  |L1.10566|
;;;4529   	}
;;;4530   
;;;4531   #ifndef UKU_KONTUR
;;;4532   if(t_box>TBOXVENTMAX)gran(&main_vent_pos,0,20); 
002946  49dc              LDR      r1,|L1.11448|
002948  f9b11000          LDRSH    r1,[r1,#0]  ; TBOXVENTMAX
00294c  4288              CMP      r0,r1
00294e  dd05              BLE      |L1.10588|
002950  2214              MOVS     r2,#0x14
002952  2100              MOVS     r1,#0
002954  48d7              LDR      r0,|L1.11444|
002956  f7fffffe          BL       gran
00295a  e007              B        |L1.10604|
                  |L1.10588|
;;;4533   else gran(&main_vent_pos,0,pos_vent+9);
00295c  48d7              LDR      r0,|L1.11452|
00295e  2100              MOVS     r1,#0
002960  8800              LDRH     r0,[r0,#0]  ; pos_vent
002962  3009              ADDS     r0,r0,#9
002964  b202              SXTH     r2,r0
002966  48d3              LDR      r0,|L1.11444|
002968  f7fffffe          BL       gran
                  |L1.10604|
;;;4534   
;;;4535   if((mess_find_unvol(MESS2VENT_HNDL))&&(mess_data[0]==PARAM_VENT_CB))
00296c  20f0              MOVS     r0,#0xf0
00296e  f7fffffe          BL       mess_find_unvol
002972  b128              CBZ      r0,|L1.10624|
002974  48d2              LDR      r0,|L1.11456|
002976  6801              LDR      r1,[r0,#0]  ; mess_data
002978  29f1              CMP      r1,#0xf1
00297a  d101              BNE      |L1.10624|
;;;4536   	{
;;;4537   	main_vent_pos=mess_data[1];
00297c  6840              LDR      r0,[r0,#4]  ; mess_data
00297e  8038              STRH     r0,[r7,#0]
                  |L1.10624|
;;;4538   	}
;;;4539   
;;;4540   
;;;4541   if(main_vent_pos<=1)mixer_vent_stat=mvsON;
002980  f9b71000          LDRSH    r1,[r7,#0]  ; main_vent_pos
002984  48cf              LDR      r0,|L1.11460|
002986  2901              CMP      r1,#1
002988  dc01              BGT      |L1.10638|
00298a  7006              STRB     r6,[r0,#0]
00298c  e000              B        |L1.10640|
                  |L1.10638|
;;;4542   else mixer_vent_stat=mvsOFF;
00298e  7004              STRB     r4,[r0,#0]
                  |L1.10640|
;;;4543   #endif
;;;4544   
;;;4545   #ifdef UKU_KONTUR
;;;4546   
;;;4547   if(t_box>TBOXVENTON) t_box_vent_on_cnt++;
;;;4548   else if(t_box<TBOXVENTOFF) t_box_vent_on_cnt--;
;;;4549   gran(&t_box_vent_on_cnt,0,10);
;;;4550   
;;;4551   if(t_box_vent_on_cnt>9) vent_stat_k=vsON;
;;;4552   else if(t_box_vent_on_cnt<1) vent_stat_k=vsOFF;
;;;4553   
;;;4554   if(t_box<TBOXWARMON) t_box_warm_on_cnt++;
;;;4555   else if(t_box>TBOXWARMOFF) t_box_warm_on_cnt--;
;;;4556   gran(&t_box_warm_on_cnt,0,10);
;;;4557   
;;;4558   if(t_box_warm_on_cnt>9) warm_stat_k=wsON;
;;;4559   else if(t_box_warm_on_cnt<1) warm_stat_k=wsOFF;
;;;4560   
;;;4561   #endif
;;;4562   
;;;4563   if((TBATDISABLE>=50) && (TBATDISABLE<=90))
002990  48cd              LDR      r0,|L1.11464|
;;;4564   	{
;;;4565   	if(t_box>TBATDISABLE)
;;;4566   		{
;;;4567   		tbatdisable_cnt++;
;;;4568   		}
;;;4569   	if(t_box<TBATENABLE)
;;;4570   		{
;;;4571   		tbatdisable_cnt--;
;;;4572   		}
;;;4573   	gran(&tbatdisable_cnt,0,6);
;;;4574   
;;;4575   	if(tbatdisable_cnt>5)
;;;4576   		{
;;;4577   		tbatdisable_stat=tbdsOFF;
002992  f8df8338          LDR      r8,|L1.11468|
002996  f9b00000          LDRSH    r0,[r0,#0]            ;4563  ; TBATDISABLE
00299a  f1a00132          SUB      r1,r0,#0x32           ;4563
00299e  2928              CMP      r1,#0x28              ;4563
0029a0  d821              BHI      |L1.10726|
0029a2  f9b51000          LDRSH    r1,[r5,#0]            ;4565  ; t_box
0029a6  4fca              LDR      r7,|L1.11472|
0029a8  4281              CMP      r1,r0                 ;4565
0029aa  dd03              BLE      |L1.10676|
0029ac  8838              LDRH     r0,[r7,#0]            ;4567  ; tbatdisable_cnt
0029ae  f1000001          ADD      r0,r0,#1              ;4567
0029b2  8038              STRH     r0,[r7,#0]            ;4567
                  |L1.10676|
0029b4  48c7              LDR      r0,|L1.11476|
0029b6  f9b00000          LDRSH    r0,[r0,#0]            ;4569  ; TBATENABLE
0029ba  4281              CMP      r1,r0                 ;4569
0029bc  da03              BGE      |L1.10694|
0029be  8838              LDRH     r0,[r7,#0]            ;4571  ; tbatdisable_cnt
0029c0  f1a00001          SUB      r0,r0,#1              ;4571
0029c4  8038              STRH     r0,[r7,#0]            ;4571
                  |L1.10694|
0029c6  2206              MOVS     r2,#6                 ;4573
0029c8  2100              MOVS     r1,#0                 ;4573
0029ca  48c1              LDR      r0,|L1.11472|
0029cc  f7fffffe          BL       gran
0029d0  f9b70000          LDRSH    r0,[r7,#0]            ;4575  ; tbatdisable_cnt
0029d4  2805              CMP      r0,#5                 ;4575
0029d6  dd01              BLE      |L1.10716|
0029d8  f8886000          STRB     r6,[r8,#0]
                  |L1.10716|
;;;4578   		}
;;;4579   	if(tbatdisable_cnt<1)
0029dc  2801              CMP      r0,#1
0029de  da04              BGE      |L1.10730|
;;;4580   		{
;;;4581   		tbatdisable_stat=tbdsON;
0029e0  f8884000          STRB     r4,[r8,#0]
0029e4  e001              B        |L1.10730|
                  |L1.10726|
;;;4582   		}
;;;4583   	}
;;;4584   else 
;;;4585   	{
;;;4586   	tbatdisable_stat=tbdsON;
0029e6  f8884000          STRB     r4,[r8,#0]
                  |L1.10730|
;;;4587   	}
;;;4588   
;;;4589   if((TLOADDISABLE>=50) && (TLOADDISABLE<=80))
0029ea  48bb              LDR      r0,|L1.11480|
;;;4590   	{
;;;4591   	if(t_box>TLOADDISABLE)
;;;4592   		{
;;;4593   		tloaddisable_cnt++;
;;;4594   		}
;;;4595   	if(t_box<TLOADENABLE)
;;;4596   		{
;;;4597   		tloaddisable_cnt--;
;;;4598   		}
;;;4599   	gran(&tloaddisable_cnt,0,6);
;;;4600   
;;;4601   	if(tloaddisable_cnt>5)
;;;4602   		{
;;;4603   		tloaddisable_stat=tldsOFF;
0029ec  4fbb              LDR      r7,|L1.11484|
0029ee  f9b00000          LDRSH    r0,[r0,#0]            ;4589  ; TLOADDISABLE
0029f2  f1a00132          SUB      r1,r0,#0x32           ;4589
0029f6  291e              CMP      r1,#0x1e              ;4589
0029f8  d81f              BHI      |L1.10810|
0029fa  f9b51000          LDRSH    r1,[r5,#0]            ;4591  ; t_box
0029fe  4db8              LDR      r5,|L1.11488|
002a00  4281              CMP      r1,r0                 ;4591
002a02  dd03              BLE      |L1.10764|
002a04  8828              LDRH     r0,[r5,#0]            ;4593  ; tloaddisable_cnt
002a06  f1000001          ADD      r0,r0,#1              ;4593
002a0a  8028              STRH     r0,[r5,#0]            ;4593
                  |L1.10764|
002a0c  48b5              LDR      r0,|L1.11492|
002a0e  f9b00000          LDRSH    r0,[r0,#0]            ;4595  ; TLOADENABLE
002a12  4281              CMP      r1,r0                 ;4595
002a14  da03              BGE      |L1.10782|
002a16  8828              LDRH     r0,[r5,#0]            ;4597  ; tloaddisable_cnt
002a18  f1a00001          SUB      r0,r0,#1              ;4597
002a1c  8028              STRH     r0,[r5,#0]            ;4597
                  |L1.10782|
002a1e  2206              MOVS     r2,#6                 ;4599
002a20  2100              MOVS     r1,#0                 ;4599
002a22  48af              LDR      r0,|L1.11488|
002a24  f7fffffe          BL       gran
002a28  f9b50000          LDRSH    r0,[r5,#0]            ;4601  ; tloaddisable_cnt
002a2c  2805              CMP      r0,#5                 ;4601
002a2e  dd00              BLE      |L1.10802|
002a30  703e              STRB     r6,[r7,#0]
                  |L1.10802|
;;;4604   		}
;;;4605   	if(tloaddisable_cnt<1)
002a32  2801              CMP      r0,#1
002a34  da00              BGE      |L1.10808|
;;;4606   		{
;;;4607   		tloaddisable_stat=tldsON;
002a36  703c              STRB     r4,[r7,#0]
                  |L1.10808|
;;;4608   		}
;;;4609   	}
;;;4610   else 
;;;4611   	{
;;;4612   	tloaddisable_stat=tldsON;
;;;4613   	}
;;;4614   
;;;4615   }
002a38  e4f8              B        |L1.9260|
                  |L1.10810|
002a3a  703c              STRB     r4,[r7,#0]            ;4612
002a3c  e4f6              B        |L1.9260|
;;;4616   #endif
                          ENDP

                  bat_drv PROC
;;;4752   //-----------------------------------------------
;;;4753   void bat_drv(char in)
002a3e  e92d5ffc          PUSH     {r2-r12,lr}
;;;4754   {
002a42  4605              MOV      r5,r0
;;;4755   unsigned short /*tempUS,*/tempUS_;
;;;4756   unsigned long tempUL,tempUL_;
;;;4757   unsigned short b_zar;
;;;4758   //static unsigned short time_cnt[2];
;;;4759   
;;;4760   
;;;4761   
;;;4762   if(cntrl_stat_blok_cnt_plus[in])cntrl_stat_blok_cnt_plus[in]--;
002a44  49a8              LDR      r1,|L1.11496|
002a46  f9310015          LDRSH    r0,[r1,r5,LSL #1]
002a4a  b118              CBZ      r0,|L1.10836|
002a4c  f1a00001          SUB      r0,r0,#1
002a50  f8210015          STRH     r0,[r1,r5,LSL #1]
                  |L1.10836|
;;;4763   if(cntrl_stat_blok_cnt_minus[in])cntrl_stat_blok_cnt_minus[in]--;
002a54  4aa4              LDR      r2,|L1.11496|
002a56  1d12              ADDS     r2,r2,#4
002a58  f9320015          LDRSH    r0,[r2,r5,LSL #1]
002a5c  b118              CBZ      r0,|L1.10854|
002a5e  f1a00001          SUB      r0,r0,#1
002a62  f8220015          STRH     r0,[r2,r5,LSL #1]
                  |L1.10854|
;;;4764   
;;;4765   
;;;4766   if(bat[in]._Ib>IZMAX) cntrl_stat_blok_cnt_plus[in]=100;
002a66  eb050045          ADD      r0,r5,r5,LSL #1
002a6a  eb001305          ADD      r3,r0,r5,LSL #4
002a6e  489f              LDR      r0,|L1.11500|
002a70  f04f0b64          MOV      r11,#0x64
002a74  eb000483          ADD      r4,r0,r3,LSL #2
002a78  4b9d              LDR      r3,|L1.11504|
002a7a  f9b40008          LDRSH    r0,[r4,#8]
002a7e  f9b33000          LDRSH    r3,[r3,#0]  ; IZMAX
002a82  4298              CMP      r0,r3
002a84  dd01              BLE      |L1.10890|
002a86  f821b015          STRH     r11,[r1,r5,LSL #1]
                  |L1.10890|
;;;4767   if(bat[in]._Ib<0)     cntrl_stat_blok_cnt_minus[in]=100;
002a8a  2800              CMP      r0,#0
002a8c  da01              BGE      |L1.10898|
002a8e  f822b015          STRH     r11,[r2,r5,LSL #1]
                  |L1.10898|
;;;4768   
;;;4769   if(cntrl_stat_blok_cnt_plus[in] && cntrl_stat_blok_cnt_minus[in])
;;;4770        {
;;;4771        if(!cntrl_stat_blok_cnt_)
002a92  4895              LDR      r0,|L1.11496|
002a94  f8313015          LDRH     r3,[r1,r5,LSL #1]     ;4769
002a98  3880              SUBS     r0,r0,#0x80
002a9a  2700              MOVS     r7,#0
002a9c  b14b              CBZ      r3,|L1.10930|
002a9e  f8323015          LDRH     r3,[r2,r5,LSL #1]     ;4769
002aa2  b133              CBZ      r3,|L1.10930|
002aa4  f8b0305e          LDRH     r3,[r0,#0x5e]  ; cntrl_stat_blok_cnt_
002aa8  b1a3              CBZ      r3,|L1.10964|
;;;4772             {
;;;4773             cntrl_stat_blok_cnt_=600; 
;;;4774             cntrl_stat_blok_cnt_plus[in]=0;
;;;4775             cntrl_stat_blok_cnt_minus[in]=0;
;;;4776             }
;;;4777        else cntrl_stat_blok_cnt=3000;
002aaa  f64031b8          MOV      r1,#0xbb8
002aae  f8a0105c          STRH     r1,[r0,#0x5c]
                  |L1.10930|
;;;4778        }
;;;4779   cntrl_stat_blok_cnt=0;
002ab2  f8a0705c          STRH     r7,[r0,#0x5c]
;;;4780   
;;;4781   if(++(bat[in]._time_cnt)>=10)
002ab6  f894003e          LDRB     r0,[r4,#0x3e]
002aba  1c40              ADDS     r0,r0,#1
002abc  b2c0              UXTB     r0,r0
002abe  f884003e          STRB     r0,[r4,#0x3e]
002ac2  280a              CMP      r0,#0xa
002ac4  d301              BCC      |L1.10954|
;;;4782   	{
;;;4783   	bat[in]._time_cnt=0;
002ac6  f884703e          STRB     r7,[r4,#0x3e]
                  |L1.10954|
;;;4784   	//bat[in]._zar_cnt++;
;;;4785   	}
;;;4786   
;;;4787   if(main_10Hz_cnt==50)
002aca  4e8a              LDR      r6,|L1.11508|
002acc  8830              LDRH     r0,[r6,#0]  ; main_10Hz_cnt
002ace  2832              CMP      r0,#0x32
002ad0  d009              BEQ      |L1.10982|
002ad2  e017              B        |L1.11012|
                  |L1.10964|
002ad4  f44f7316          MOV      r3,#0x258             ;4773
002ad8  f8a0305e          STRH     r3,[r0,#0x5e]         ;4773
002adc  f8217015          STRH     r7,[r1,r5,LSL #1]     ;4774
002ae0  f8227015          STRH     r7,[r2,r5,LSL #1]     ;4775
002ae4  e7e5              B        |L1.10930|
                  |L1.10982|
;;;4788   	{
;;;4789   	if(!bat[in]._rel_stat)
002ae6  f894003c          LDRB     r0,[r4,#0x3c]
002aea  b958              CBNZ     r0,|L1.11012|
;;;4790   		{
;;;4791   		
;;;4792   		if(bat[in]._Ub<80) 
002aec  f9b40002          LDRSH    r0,[r4,#2]
002af0  2850              CMP      r0,#0x50
002af2  da07              BGE      |L1.11012|
;;;4793   			{
;;;4794   			
;;;4795   			if(!(bat[in]._av&1))
002af4  f894003d          LDRB     r0,[r4,#0x3d]
002af8  07c0              LSLS     r0,r0,#31
002afa  d103              BNE      |L1.11012|
;;;4796   				{
;;;4797   				avar_bat_hndl(in,1);
002afc  2101              MOVS     r1,#1
002afe  4628              MOV      r0,r5
002b00  f7fffffe          BL       avar_bat_hndl
                  |L1.11012|
;;;4798   				//if(in==0)plazma_bat++;
;;;4799   				}
;;;4800   			}				
;;;4801   
;;;4802   		}
;;;4803   	}
;;;4804   
;;;4805   if(main_10Hz_cnt>200)
002b04  f9b60000          LDRSH    r0,[r6,#0]  ; main_10Hz_cnt
;;;4806   	{
;;;4807   	if(abs(bat[in]._Ib)>IKB) 
002b08  4e7b              LDR      r6,|L1.11512|
002b0a  28c8              CMP      r0,#0xc8              ;4805
002b0c  dd0f              BLE      |L1.11054|
002b0e  f9b40008          LDRSH    r0,[r4,#8]
002b12  f7fffffe          BL       abs
002b16  f9b61000          LDRSH    r1,[r6,#0]  ; IKB
002b1a  4288              CMP      r0,r1
002b1c  dd07              BLE      |L1.11054|
;;;4808   		{
;;;4809   		if((bat[in]._av&1))avar_bat_hndl(in,0);
002b1e  f894003d          LDRB     r0,[r4,#0x3d]
002b22  07c0              LSLS     r0,r0,#31
002b24  d003              BEQ      |L1.11054|
002b26  2100              MOVS     r1,#0
002b28  4628              MOV      r0,r5
002b2a  f7fffffe          BL       avar_bat_hndl
                  |L1.11054|
;;;4810   		}
;;;4811   	}
;;;4812   
;;;4813   
;;;4814   
;;;4815   if(bat[in]._Ib>(-IKB))
002b2e  4872              LDR      r0,|L1.11512|
002b30  f9b41008          LDRSH    r1,[r4,#8]
002b34  f9b00000          LDRSH    r0,[r0,#0]  ; IKB
002b38  4240              RSBS     r0,r0,#0
002b3a  4281              CMP      r1,r0
002b3c  dd14              BLE      |L1.11112|
;;;4816   	{
;;;4817   	if(bat[in]._cnt_wrk<10)
002b3e  7b60              LDRB     r0,[r4,#0xd]
002b40  280a              CMP      r0,#0xa
002b42  d20d              BCS      |L1.11104|
;;;4818   		{
;;;4819   		bat[in]._cnt_wrk++;
002b44  f1000001          ADD      r0,r0,#1
002b48  b2c0              UXTB     r0,r0
002b4a  7360              STRB     r0,[r4,#0xd]
;;;4820   		if((bat[in]._cnt_wrk>=10)&&(bat[in]._wrk)) 
002b4c  280a              CMP      r0,#0xa
002b4e  d371              BCC      |L1.11316|
002b50  7ba0              LDRB     r0,[r4,#0xe]
002b52  2800              CMP      r0,#0
002b54  d06e              BEQ      |L1.11316|
;;;4821   			{
;;;4822   			bat[in]._wrk=0;
002b56  73a7              STRB     r7,[r4,#0xe]
;;;4823   			//beep_init(0x7L,'O');
;;;4824   			//wrk_mem_hndl(0);
;;;4825   			wrk_mem_hndl(in);
002b58  4628              MOV      r0,r5
002b5a  f7fffffe          BL       wrk_mem_hndl
002b5e  e069              B        |L1.11316|
                  |L1.11104|
;;;4826   			//plazma++;
;;;4827   			}
;;;4828   		}
;;;4829   	else bat[in]._cnt_wrk=10;	
002b60  f04f000a          MOV      r0,#0xa
002b64  7360              STRB     r0,[r4,#0xd]
002b66  e065              B        |L1.11316|
                  |L1.11112|
;;;4830   	}	
;;;4831   
;;;4832   else if(bat[in]._Ib<(-IKB))
002b68  da64              BGE      |L1.11316|
;;;4833   	{
;;;4834   	if(bat[in]._cnt_wrk)
002b6a  7b60              LDRB     r0,[r4,#0xd]
002b6c  b3f0              CBZ      r0,|L1.11244|
;;;4835   		{
;;;4836   		bat[in]._cnt_wrk--;
002b6e  f1a00001          SUB      r0,r0,#1
002b72  b2c0              UXTB     r0,r0
002b74  7360              STRB     r0,[r4,#0xd]
;;;4837   		if((bat[in]._cnt_wrk==0)&&(bat[in]._wrk==0)) 
002b76  bbc8              CBNZ     r0,|L1.11244|
002b78  7ba0              LDRB     r0,[r4,#0xe]
002b7a  bbb8              CBNZ     r0,|L1.11244|
;;;4838   			{
;;;4839   			bat[in]._wrk=1;
002b7c  f04f0001          MOV      r0,#1
002b80  73a0              STRB     r0,[r4,#0xe]
;;;4840   
;;;4841   				{
;;;4842   				char temp;
;;;4843   				signed short temp_temp;
;;;4844   				temp_temp=bat[in]._u_old[((bat_u_old_cnt+1)&0x07)];
002b82  485e              LDR      r0,|L1.11516|
002b84  8800              LDRH     r0,[r0,#0]  ; bat_u_old_cnt
002b86  f1000001          ADD      r0,r0,#1
002b8a  f0000007          AND      r0,r0,#7
002b8e  eb040040          ADD      r0,r4,r0,LSL #1
002b92  8c00              LDRH     r0,[r0,#0x20]
002b94  9000              STR      r0,[sp,#0]
;;;4845   			 
;;;4846   				temp=LPC_RTC->YEAR;
002b96  4e5a              LDR      r6,|L1.11520|
002b98  8bb0              LDRH     r0,[r6,#0x1c]
002b9a  9001              STR      r0,[sp,#4]
;;;4847   				gran_char((signed char*)&temp,1,99);
002b9c  f04f0263          MOV      r2,#0x63
002ba0  f04f0101          MOV      r1,#1
002ba4  a801              ADD      r0,sp,#4
002ba6  f7fffffe          BL       gran_char
;;;4848   				*((char*)(&(bat[in]._wrk_date[0])))=temp;
002baa  f104041c          ADD      r4,r4,#0x1c
002bae  f89d0004          LDRB     r0,[sp,#4]
002bb2  7620              STRB     r0,[r4,#0x18]
;;;4849   			
;;;4850   				temp=LPC_RTC->MONTH;
002bb4  7e30              LDRB     r0,[r6,#0x18]
002bb6  9001              STR      r0,[sp,#4]
;;;4851   				gran_char((signed char*)&temp,1,12);
002bb8  f04f020c          MOV      r2,#0xc
002bbc  f04f0101          MOV      r1,#1
002bc0  a801              ADD      r0,sp,#4
002bc2  f7fffffe          BL       gran_char
;;;4852   				*(((char*)(&(bat[in]._wrk_date[0])))+1)=temp;
002bc6  f89d0004          LDRB     r0,[sp,#4]
002bca  7660              STRB     r0,[r4,#0x19]
;;;4853   			
;;;4854   				temp=LPC_RTC->DOM;
002bcc  7b30              LDRB     r0,[r6,#0xc]
002bce  9001              STR      r0,[sp,#4]
;;;4855   				gran_char((signed char*)&temp,1,31);
002bd0  221f              MOVS     r2,#0x1f
002bd2  2101              MOVS     r1,#1
002bd4  a801              ADD      r0,sp,#4
002bd6  f7fffffe          BL       gran_char
;;;4856   				*(((char*)(&(bat[in]._wrk_date[0])))+2)=temp;			
002bda  f89d0004          LDRB     r0,[sp,#4]
002bde  76a0              STRB     r0,[r4,#0x1a]
;;;4857   				
;;;4858   				*(((char*)(&(bat[in]._wrk_date[0])))+3)=*((char*)&temp_temp);
002be0  f89d0000          LDRB     r0,[sp,#0]
002be4  76e0              STRB     r0,[r4,#0x1b]
;;;4859   
;;;4860   				temp=LPC_RTC->HOUR;
002be6  7a30              LDRB     r0,[r6,#8]
002be8  9001              STR      r0,[sp,#4]
;;;4861   				gran_char((signed char*)&temp,0,23);
002bea  e000              B        |L1.11246|
                  |L1.11244|
002bec  e022              B        |L1.11316|
                  |L1.11246|
002bee  2217              MOVS     r2,#0x17
002bf0  2100              MOVS     r1,#0
002bf2  a801              ADD      r0,sp,#4
002bf4  f7fffffe          BL       gran_char
;;;4862   				*((char*)(&(bat[in]._wrk_date[1])))=temp;
002bf8  f89d0004          LDRB     r0,[sp,#4]
002bfc  7720              STRB     r0,[r4,#0x1c]
;;;4863                  	
;;;4864   				temp=LPC_RTC->MIN;
002bfe  7930              LDRB     r0,[r6,#4]
002c00  9001              STR      r0,[sp,#4]
;;;4865   				gran_char((signed char*)&temp,0,59);
002c02  223b              MOVS     r2,#0x3b
002c04  2100              MOVS     r1,#0
002c06  a801              ADD      r0,sp,#4
002c08  f7fffffe          BL       gran_char
;;;4866   				*(((char*)(&(bat[in]._wrk_date[1])))+1)=temp;
002c0c  f89d0004          LDRB     r0,[sp,#4]
002c10  7760              STRB     r0,[r4,#0x1d]
;;;4867   	          
;;;4868   				temp=LPC_RTC->SEC;
002c12  7830              LDRB     r0,[r6,#0]
002c14  9001              STR      r0,[sp,#4]
;;;4869   				gran_char((signed char*)&temp,0,59);
002c16  223b              MOVS     r2,#0x3b
002c18  2100              MOVS     r1,#0
002c1a  a801              ADD      r0,sp,#4
002c1c  f7fffffe          BL       gran_char
;;;4870   				*(((char*)(&(bat[in]._wrk_date[1])))+2)=temp;
002c20  f89d0004          LDRB     r0,[sp,#4]
002c24  77a0              STRB     r0,[r4,#0x1e]
;;;4871   			
;;;4872   				*(((char*)(&(bat[in]._wrk_date[1])))+3)=*(((char*)&temp_temp)+1);
002c26  f89d0001          LDRB     r0,[sp,#1]
002c2a  77e0              STRB     r0,[r4,#0x1f]
;;;4873   				bat[in]._Iintegr=0;		//  
002c2c  8027              STRH     r7,[r4,#0]
;;;4874   				bat[in]._Iintegr_=0;	//  
002c2e  8067              STRH     r7,[r4,#2]
002c30  f1a4041c          SUB      r4,r4,#0x1c
                  |L1.11316|
;;;4875   				}
;;;4876   	
;;;4877   			}
;;;4878   
;;;4879   		}
;;;4880   	else bat[in]._cnt_wrk=0;	 
;;;4881   	
;;;4882   	}					
;;;4883   
;;;4884   /*
;;;4885   if(Ibat>=(-IKB))
;;;4886   	{
;;;4887   	if(cnt_wrk<10)
;;;4888   		{
;;;4889   		cnt_wrk++;
;;;4890   		if((cnt_wrk>=10)&&(wrk!=wrkOFF)) 
;;;4891   			{
;;;4892   			wrk=wrkOFF;
;;;4893   			//beep_init(0x7L,'O');
;;;4894   			wrk_mem_hndl(ibat_integr);
;;;4895   			}
;;;4896   		}
;;;4897   	else cnt_wrk=10;	
;;;4898   	}	
;;;4899   
;;;4900   else if((Ibat<(-IKB))&&(spc_stat!=spc_KE))
;;;4901   	{
;;;4902   	if(cnt_wrk)
;;;4903   		{
;;;4904   		cnt_wrk--;
;;;4905   		if((cnt_wrk==0)&&(wrk!=wrkON)) 
;;;4906   			{
;;;4907   			char temp;
;;;4908   			signed short temp_temp;
;;;4909   			temp_temp=ubat_old[((ubat_old_cnt+1)&0x07)];
;;;4910   			 
;;;4911   			wrk=wrkON;
;;;4912   			
;;;4913   			temp=_year;
;;;4914   			gran_char(&temp,1,99);
;;;4915   			*((char*)(&(wrk_date[0])))=temp;
;;;4916   			
;;;4917   			temp=_month;
;;;4918   			gran_char(&temp,1,12);
;;;4919   			*(((char*)(&(wrk_date[0])))+1)=temp;
;;;4920   			
;;;4921   			temp=_date;
;;;4922   			gran_char(&temp,1,31);
;;;4923   			*(((char*)(&(wrk_date[0])))+2)=temp;			
;;;4924   				
;;;4925   			*(((char*)(&(wrk_date[0])))+3)=*((char*)&temp_temp);
;;;4926   
;;;4927   			temp=_hour;
;;;4928   			gran_char(&temp,0,23);
;;;4929   			*((char*)(&(wrk_date[1])))=temp;
;;;4930                  
;;;4931   			temp=_min;
;;;4932   			gran_char(&temp,0,59);
;;;4933   			*(((char*)(&(wrk_date[1])))+1)=temp;
;;;4934   	          
;;;4935   			temp=_sec;
;;;4936   			gran_char(&temp,0,59);
;;;4937   			*(((char*)(&(wrk_date[1])))+2)=temp;
;;;4938   			
;;;4939   			*(((char*)(&(wrk_date[1])))+3)=*(((char*)&temp_temp)+1);
;;;4940   
;;;4941   			
;;;4942   			//beep_init(0xFL,'O'); 
;;;4943   			ibat_integr=0;
;;;4944   			ibat_integr_=0;
;;;4945   			}
;;;4946   		}
;;;4947   	else cnt_wrk=0;	 
;;;4948   	
;;;4949   	}
;;;4950   if(wrk==wrkON)
;;;4951   	{
;;;4952   	ibat_integr_+=-Ibat;
;;;4953   	if(ibat_integr_>=SEC_IN_HOUR*10L)
;;;4954   		{
;;;4955   		ibat_integr_-=SEC_IN_HOUR*10L;
;;;4956   		ibat_integr++;
;;;4957   		}
;;;4958   	}
;;;4959   
;;;4960   */
;;;4961   
;;;4962   
;;;4963   /*if(bat[in]._cnt_to_block)
;;;4964   	{
;;;4965   	bat[in]._cnt_to_block--;
;;;4966   	if(!(bat[in]._cnt_to_block))
;;;4967   		{
;;;4968   		//bat[in]._rel_stat=1;
;;;4969   		}
;;;4970   	}
;;;4971   */
;;;4972   
;;;4973   
;;;4974   
;;;4975   
;;;4976   //unsigned int tempUI,tempUI_;
;;;4977   //unsigned int b_zar; 
;;;4978   //char i;
;;;4979   //Ibat[0]=5000;                     
;;;4980   
;;;4981   
;;;4982                               
;;;4983   if(bat[in]._time_cnt==0)
;;;4984   	{
;;;4985   	bat[in]._zar_cnt+=(signed long)bat[in]._Ib;
;;;4986   	
;;;4987   	if(bat[in]._zar_cnt>=AH_CONSTANT)
002c34  f64848a0          MOV      r8,#0x8ca0
002c38  f894003e          LDRB     r0,[r4,#0x3e]         ;4983
002c3c  2800              CMP      r0,#0                 ;4983
002c3e  d12c              BNE      |L1.11418|
002c40  f9b41008          LDRSH    r1,[r4,#8]            ;4985
002c44  6960              LDR      r0,[r4,#0x14]         ;4985
002c46  4408              ADD      r0,r0,r1              ;4985
002c48  6160              STR      r0,[r4,#0x14]         ;4985
;;;4988   		{
;;;4989   		if(BAT_C_REAL[in]==0x5555) tempUS_=BAT_C_NOM[in];
;;;4990   		else tempUS_=BAT_C_REAL[in];
;;;4991   		
;;;4992   		b_zar=lc640_read_int(ADR_EE_BAT_ZAR_CNT[in]);
002c4a  f8df90b8          LDR      r9,|L1.11524|
002c4e  f8dfa0b8          LDR      r10,|L1.11528|
002c52  4540              CMP      r0,r8                 ;4987
002c54  db65              BLT      |L1.11554|
002c56  f93a1015          LDRSH    r1,[r10,r5,LSL #1]    ;4989
002c5a  f5a140aa          SUB      r0,r1,#0x5500         ;4989
002c5e  3855              SUBS     r0,r0,#0x55           ;4989
002c60  d103              BNE      |L1.11370|
002c62  482a              LDR      r0,|L1.11532|
002c64  f8306015          LDRH     r6,[r0,r5,LSL #1]     ;4989
002c68  e001              B        |L1.11374|
                  |L1.11370|
002c6a  f83a6015          LDRH     r6,[r10,r5,LSL #1]    ;4990
                  |L1.11374|
002c6e  f8390015          LDRH     r0,[r9,r5,LSL #1]
002c72  f7fffffe          BL       lc640_read_int
002c76  b280              UXTH     r0,r0
;;;4993   
;;;4994   		if(b_zar<(tempUS_/**10*/))
002c78  42b0              CMP      r0,r6
002c7a  d249              BCS      |L1.11536|
;;;4995   			{
;;;4996   			bat[in]._zar_cnt-=AH_CONSTANT;
002c7c  6961              LDR      r1,[r4,#0x14]
002c7e  f5a14100          SUB      r1,r1,#0x8000
002c82  f5a1614a          SUB      r1,r1,#0xca0
002c86  6161              STR      r1,[r4,#0x14]
;;;4997   
;;;4998   			lc640_write_int(ADR_EE_BAT_ZAR_CNT[in],b_zar+1);
002c88  f9392015          LDRSH    r2,[r9,r5,LSL #1]
002c8c  f1000001          ADD      r0,r0,#1
002c90  b201              SXTH     r1,r0
002c92  4610              MOV      r0,r2
002c94  f7fffffe          BL       lc640_write_int
002c98  e06e              B        |L1.11640|
                  |L1.11418|
002c9a  e09c              B        |L1.11734|
                  |L1.11420|
                          DCD      t_box
                  |L1.11424|
                          DCD      TBOXMAX
                  |L1.11428|
                          DCD      av_tbox_cnt
                  |L1.11432|
                          DCD      av_tbox_stat
                  |L1.11436|
                          DCD      TBOXREG
                  |L1.11440|
                          DCD      t_box_cnt
                  |L1.11444|
                          DCD      main_vent_pos
                  |L1.11448|
                          DCD      TBOXVENTMAX
                  |L1.11452|
                          DCD      pos_vent
                  |L1.11456|
                          DCD      mess_data
                  |L1.11460|
                          DCD      mixer_vent_stat
                  |L1.11464|
                          DCD      TBATDISABLE
                  |L1.11468|
                          DCD      tbatdisable_stat
                  |L1.11472|
                          DCD      tbatdisable_cnt
                  |L1.11476|
                          DCD      TBATENABLE
                  |L1.11480|
                          DCD      TLOADDISABLE
                  |L1.11484|
                          DCD      tloaddisable_stat
                  |L1.11488|
                          DCD      tloaddisable_cnt
                  |L1.11492|
                          DCD      TLOADENABLE
                  |L1.11496|
                          DCD      ||area_number.21||+0x80
                  |L1.11500|
                          DCD      bat
                  |L1.11504|
                          DCD      IZMAX
                  |L1.11508|
                          DCD      main_10Hz_cnt
                  |L1.11512|
                          DCD      IKB
                  |L1.11516|
                          DCD      bat_u_old_cnt
                  |L1.11520|
                          DCD      0x40024020
                  |L1.11524|
                          DCD      ADR_EE_BAT_ZAR_CNT
                  |L1.11528|
                          DCD      BAT_C_REAL
                  |L1.11532|
                          DCD      BAT_C_NOM
                  |L1.11536|
;;;4999   			}
;;;5000   		else if(b_zar>(tempUS_/**10*/))  
002d10  d932              BLS      |L1.11640|
;;;5001   			{
;;;5002   			lc640_write_int(ADR_EE_BAT_ZAR_CNT[in],tempUS_);
002d12  f9390015          LDRSH    r0,[r9,r5,LSL #1]
002d16  b231              SXTH     r1,r6
002d18  f7fffffe          BL       lc640_write_int
;;;5003   			bat[in]._zar_cnt=AH_CONSTANT;
002d1c  f8c48014          STR      r8,[r4,#0x14]
002d20  e02a              B        |L1.11640|
                  |L1.11554|
;;;5004   
;;;5005   			}
;;;5006   
;;;5007   		}
;;;5008   
;;;5009   	else if(bat[in]._zar_cnt<=-AH_CONSTANT)
002d22  49fa              LDR      r1,|L1.12556|
002d24  4288              CMP      r0,r1
002d26  dc27              BGT      |L1.11640|
;;;5010   		{
;;;5011   		if(BAT_C_REAL[in]==0x5555) tempUS_=BAT_C_NOM[in];
002d28  f93a1015          LDRSH    r1,[r10,r5,LSL #1]
002d2c  f5a140aa          SUB      r0,r1,#0x5500
002d30  3855              SUBS     r0,r0,#0x55
002d32  d103              BNE      |L1.11580|
002d34  48f6              LDR      r0,|L1.12560|
002d36  f8306015          LDRH     r6,[r0,r5,LSL #1]
002d3a  e001              B        |L1.11584|
                  |L1.11580|
;;;5012   		else tempUS_=BAT_C_REAL[in];
002d3c  f83a6015          LDRH     r6,[r10,r5,LSL #1]
                  |L1.11584|
;;;5013   		
;;;5014   		b_zar=lc640_read_int(ADR_EE_BAT_ZAR_CNT[in]);
002d40  f8390015          LDRH     r0,[r9,r5,LSL #1]
002d44  f7fffffe          BL       lc640_read_int
002d48  b280              UXTH     r0,r0
;;;5015   
;;;5016   		if(b_zar>tempUS_)
002d4a  42b0              CMP      r0,r6
002d4c  d905              BLS      |L1.11610|
;;;5017   			{
;;;5018   			lc640_write_int(ADR_EE_BAT_ZAR_CNT[in],tempUS_);
002d4e  f9390015          LDRSH    r0,[r9,r5,LSL #1]
002d52  b231              SXTH     r1,r6
002d54  f7fffffe          BL       lc640_write_int
;;;5019   			b_zar=tempUS_;
002d58  4630              MOV      r0,r6
                  |L1.11610|
;;;5020   			}
;;;5021   		if(b_zar)
002d5a  b158              CBZ      r0,|L1.11636|
;;;5022   			{
;;;5023   			bat[in]._zar_cnt+=AH_CONSTANT;
002d5c  6961              LDR      r1,[r4,#0x14]
002d5e  4441              ADD      r1,r1,r8
002d60  6161              STR      r1,[r4,#0x14]
;;;5024   
;;;5025   			lc640_write_int(ADR_EE_BAT_ZAR_CNT[in],b_zar-1);
002d62  f9392015          LDRSH    r2,[r9,r5,LSL #1]
002d66  f1a00001          SUB      r0,r0,#1
002d6a  b201              SXTH     r1,r0
002d6c  4610              MOV      r0,r2
002d6e  f7fffffe          BL       lc640_write_int
002d72  e001              B        |L1.11640|
                  |L1.11636|
;;;5026   			}
;;;5027   		else 
;;;5028   			{
;;;5029   			bat[in]._zar_cnt=-AH_CONSTANT;
002d74  48e5              LDR      r0,|L1.12556|
002d76  6160              STR      r0,[r4,#0x14]
                  |L1.11640|
;;;5030   			}
;;;5031   
;;;5032   		}
;;;5033   
;;;5034   			
;;;5035   	tempUL=(unsigned long)lc640_read_int(ADR_EE_BAT_ZAR_CNT[in]);
002d78  f8390015          LDRH     r0,[r9,r5,LSL #1]
002d7c  f7fffffe          BL       lc640_read_int
002d80  4601              MOV      r1,r0
;;;5036   	
;;;5037   	if(BAT_C_REAL[in]==0x5555) tempUL_=(unsigned long)BAT_C_NOM[in];
002d82  f93a0015          LDRSH    r0,[r10,r5,LSL #1]
002d86  f5a042aa          SUB      r2,r0,#0x5500
002d8a  3a55              SUBS     r2,r2,#0x55
002d8c  d102              BNE      |L1.11668|
002d8e  48e0              LDR      r0,|L1.12560|
002d90  f9300015          LDRSH    r0,[r0,r5,LSL #1]
                  |L1.11668|
;;;5038   	else tempUL_=(unsigned long)BAT_C_REAL[in];
;;;5039   		           	
;;;5040   	tempUL*=1000L;
002d94  f44f727a          MOV      r2,#0x3e8
002d98  fb01f102          MUL      r1,r1,r2
;;;5041   
;;;5042   
;;;5043   	if(tempUL_==0) tempUL=0;
002d9c  b158              CBZ      r0,|L1.11702|
;;;5044   	else tempUL/=tempUL_;
002d9e  fbb1f0f0          UDIV     r0,r1,r0
                  |L1.11682|
;;;5045   
;;;5046   	tempUL/=10L;
002da2  f04f010a          MOV      r1,#0xa
002da6  fbb0f0f1          UDIV     r0,r0,r1
;;;5047   
;;;5048   	bat[in]._zar=(unsigned short)tempUL;
002daa  8220              STRH     r0,[r4,#0x10]
;;;5049   
;;;5050   	if(BAT_TYPE==1)
002dac  48d9              LDR      r0,|L1.12564|
002dae  8800              LDRH     r0,[r0,#0]  ; BAT_TYPE
002db0  2801              CMP      r0,#1
002db2  d003              BEQ      |L1.11708|
002db4  e009              B        |L1.11722|
                  |L1.11702|
002db6  f04f0000          MOV      r0,#0                 ;5043
002dba  e7f2              B        |L1.11682|
                  |L1.11708|
;;;5051   		{
;;;5052   		bat[in]._zar=lakb[in]._s_o_c;
002dbc  49d6              LDR      r1,|L1.12568|
002dbe  ebc51045          RSB      r0,r5,r5,LSL #5
002dc2  eb010040          ADD      r0,r1,r0,LSL #1
002dc6  8a40              LDRH     r0,[r0,#0x12]
002dc8  8220              STRH     r0,[r4,#0x10]
                  |L1.11722|
;;;5053   		}
;;;5054   	
;;;5055   	gran((signed short*)&bat[in]._zar,0,100);
002dca  f1040010          ADD      r0,r4,#0x10
002dce  2264              MOVS     r2,#0x64
002dd0  2100              MOVS     r1,#0
002dd2  f7fffffe          BL       gran
                  |L1.11734|
;;;5056        }
;;;5057   
;;;5058   
;;;5059   //         
;;;5060   if(bat[in]._wrk==1)
002dd6  7ba0              LDRB     r0,[r4,#0xe]
002dd8  2801              CMP      r0,#1
002dda  d113              BNE      |L1.11780|
;;;5061   	{
;;;5062   	if(bat[in]._Iintegr<36000)
002ddc  8ba0              LDRH     r0,[r4,#0x1c]
002dde  4540              CMP      r0,r8
002de0  d20f              BCS      |L1.11778|
;;;5063   		{          
;;;5064   		bat[in]._Iintegr+=abs(bat[in]._Ib);
002de2  f9b40008          LDRSH    r0,[r4,#8]
002de6  f7fffffe          BL       abs
002dea  8ba1              LDRH     r1,[r4,#0x1c]
002dec  4408              ADD      r0,r0,r1
002dee  b280              UXTH     r0,r0
002df0  83a0              STRH     r0,[r4,#0x1c]
;;;5065   		if(bat[in]._Iintegr>=36000)
002df2  4540              CMP      r0,r8
002df4  d306              BCC      |L1.11780|
;;;5066   			{
;;;5067   			bat[in]._Iintegr=0;		//  
002df6  83a7              STRH     r7,[r4,#0x1c]
;;;5068   			bat[in]._Iintegr_++;	//  
002df8  8be0              LDRH     r0,[r4,#0x1e]
002dfa  f1000001          ADD      r0,r0,#1
002dfe  83e0              STRH     r0,[r4,#0x1e]
002e00  e000              B        |L1.11780|
                  |L1.11778|
;;;5069   			}
;;;5070   		}
;;;5071   	else 
;;;5072   		{
;;;5073   		bat[in]._Iintegr=0;
002e02  83a7              STRH     r7,[r4,#0x1c]
                  |L1.11780|
;;;5074   		}	
;;;5075   	} 
;;;5076   	    
;;;5077   //
;;;5078   if((bat[in]._Tb>TBATSIGN)&&(!bat[in]._nd))	
002e04  49c5              LDR      r1,|L1.12572|
002e06  f9b4000a          LDRSH    r0,[r4,#0xa]
002e0a  f9b11000          LDRSH    r1,[r1,#0]  ; TBATSIGN
002e0e  4288              CMP      r0,r1
002e10  dd01              BLE      |L1.11798|
002e12  7b20              LDRB     r0,[r4,#0xc]
002e14  b3e8              CBZ      r0,|L1.11922|
                  |L1.11798|
;;;5079   	{
;;;5080   	bat[in]._sign_temper_cnt++;
;;;5081   	}
;;;5082   else 
;;;5083   	{
;;;5084   	bat[in]._sign_temper_cnt--;
002e16  f8b40040          LDRH     r0,[r4,#0x40]
002e1a  f1a00001          SUB      r0,r0,#1
002e1e  f8a40040          STRH     r0,[r4,#0x40]
                  |L1.11810|
;;;5085   	}
;;;5086   
;;;5087   gran(&bat[in]._sign_temper_cnt,0,600);
002e22  f44f7916          MOV      r9,#0x258
002e26  f1040040          ADD      r0,r4,#0x40
002e2a  464a              MOV      r2,r9
002e2c  2100              MOVS     r1,#0
002e2e  f7fffffe          BL       gran
;;;5088   if(bat[in]._sign_temper_cnt>=590)	bat[in]._temper_stat|=(1<<0);
002e32  f9b40040          LDRSH    r0,[r4,#0x40]
002e36  f240264e          MOV      r6,#0x24e
002e3a  42b0              CMP      r0,r6
002e3c  db05              BLT      |L1.11850|
002e3e  f894103f          LDRB     r1,[r4,#0x3f]
002e42  f0410101          ORR      r1,r1,#1
002e46  f884103f          STRB     r1,[r4,#0x3f]
                  |L1.11850|
;;;5089   if(bat[in]._sign_temper_cnt<=10)	bat[in]._temper_stat&=~(1<<0);
002e4a  280a              CMP      r0,#0xa
002e4c  dc05              BGT      |L1.11866|
002e4e  f894003f          LDRB     r0,[r4,#0x3f]
002e52  f0200001          BIC      r0,r0,#1
002e56  f884003f          STRB     r0,[r4,#0x3f]
                  |L1.11866|
;;;5090   
;;;5091   
;;;5092   if((bat[in]._Tb>TBATMAX)&&(!bat[in]._nd))	
002e5a  49b1              LDR      r1,|L1.12576|
002e5c  f9b4000a          LDRSH    r0,[r4,#0xa]
002e60  f9b11000          LDRSH    r1,[r1,#0]  ; TBATMAX
002e64  4288              CMP      r0,r1
002e66  dd01              BLE      |L1.11884|
002e68  7b20              LDRB     r0,[r4,#0xc]
002e6a  b3a0              CBZ      r0,|L1.11990|
                  |L1.11884|
;;;5093   	{
;;;5094   	bat[in]._max_temper_cnt++;
;;;5095   	}
;;;5096   else 
;;;5097   	{
;;;5098   	bat[in]._max_temper_cnt--;
002e6c  f8b40042          LDRH     r0,[r4,#0x42]
002e70  f1a00001          SUB      r0,r0,#1
002e74  f8a40042          STRH     r0,[r4,#0x42]
                  |L1.11896|
;;;5099   	}
;;;5100   
;;;5101   gran(&bat[in]._max_temper_cnt,0,600);
002e78  f1040042          ADD      r0,r4,#0x42
002e7c  464a              MOV      r2,r9
002e7e  2100              MOVS     r1,#0
002e80  f7fffffe          BL       gran
;;;5102   if(bat[in]._max_temper_cnt>=590)	bat[in]._temper_stat|=(1<<1);
002e84  f9b40042          LDRSH    r0,[r4,#0x42]
002e88  42b0              CMP      r0,r6
002e8a  db07              BLT      |L1.11932|
002e8c  f894103f          LDRB     r1,[r4,#0x3f]
002e90  e000              B        |L1.11924|
                  |L1.11922|
002e92  e021              B        |L1.11992|
                  |L1.11924|
002e94  f0410102          ORR      r1,r1,#2
002e98  f884103f          STRB     r1,[r4,#0x3f]
                  |L1.11932|
;;;5103   if(bat[in]._max_temper_cnt<=10)	bat[in]._temper_stat&=~(1<<1);
002e9c  280a              CMP      r0,#0xa
002e9e  dc05              BGT      |L1.11948|
002ea0  f894003f          LDRB     r0,[r4,#0x3f]
002ea4  f0200002          BIC      r0,r0,#2
002ea8  f884003f          STRB     r0,[r4,#0x3f]
                  |L1.11948|
;;;5104   
;;;5105   
;;;5106   
;;;5107   //  
;;;5108   if(bat[in]._resurs_cnt<36000)
002eac  6c60              LDR      r0,[r4,#0x44]
002eae  4540              CMP      r0,r8
002eb0  da20              BGE      |L1.12020|
;;;5109   	{               
;;;5110   	bat[in]._resurs_cnt++;
002eb2  f1000001          ADD      r0,r0,#1
002eb6  6460              STR      r0,[r4,#0x44]
;;;5111   	if(bat[in]._resurs_cnt>=36000)
002eb8  4540              CMP      r0,r8
002eba  db1c              BLT      |L1.12022|
;;;5112   		{
;;;5113   		bat[in]._resurs_cnt=0;
002ebc  6467              STR      r7,[r4,#0x44]
;;;5114   		lc640_write_int(ADR_EE_BAT_RESURS[in],lc640_read_int(ADR_EE_BAT_RESURS[in])+1);
002ebe  4e99              LDR      r6,|L1.12580|
002ec0  f8360015          LDRH     r0,[r6,r5,LSL #1]
002ec4  f7fffffe          BL       lc640_read_int
002ec8  1c40              ADDS     r0,r0,#1
002eca  b201              SXTH     r1,r0
002ecc  f9360015          LDRSH    r0,[r6,r5,LSL #1]
002ed0  f7fffffe          BL       lc640_write_int
002ed4  e00f              B        |L1.12022|
                  |L1.11990|
002ed6  e006              B        |L1.12006|
                  |L1.11992|
002ed8  f8b40040          LDRH     r0,[r4,#0x40]         ;5080
002edc  f1000001          ADD      r0,r0,#1              ;5080
002ee0  f8a40040          STRH     r0,[r4,#0x40]         ;5080
002ee4  e79d              B        |L1.11810|
                  |L1.12006|
002ee6  f8b40042          LDRH     r0,[r4,#0x42]         ;5094
002eea  f1000001          ADD      r0,r0,#1              ;5094
002eee  f8a40042          STRH     r0,[r4,#0x42]         ;5094
002ef2  e7c1              B        |L1.11896|
                  |L1.12020|
;;;5115   		}
;;;5116   	}
;;;5117   else bat[in]._resurs_cnt=0;
002ef4  6467              STR      r7,[r4,#0x44]
                  |L1.12022|
;;;5118   
;;;5119   
;;;5120   #ifndef UKU_220_V2
;;;5121   #ifndef UKU_GLONASS
;;;5122   #ifndef UKU_6U
;;;5123   //#ifndef UKU_220
;;;5124   if(UBM_AV)
002ef6  4e8c              LDR      r6,|L1.12584|
002ef8  8830              LDRH     r0,[r6,#0]  ; UBM_AV
002efa  2800              CMP      r0,#0
002efc  d05e              BEQ      |L1.12220|
;;;5125        {
;;;5126        signed short temp_SS;
;;;5127   #ifdef UKU_220
;;;5128   temp_SS=bat[in]._Ub/2;
;;;5129   #else
;;;5130        if(U0B<600)
002efe  488b              LDR      r0,|L1.12588|
002f00  f9b00000          LDRSH    r0,[r0,#0]  ; U0B
002f04  4548              CMP      r0,r9
002f06  da08              BGE      |L1.12058|
;;;5131             {
;;;5132             temp_SS=bat[in]._Ub/4;
002f08  f9b40002          LDRSH    r0,[r4,#2]
002f0c  ea4f71e0          ASR      r1,r0,#31
002f10  eb007091          ADD      r0,r0,r1,LSR #30
002f14  ea4f00a0          ASR      r0,r0,#2
002f18  e006              B        |L1.12072|
                  |L1.12058|
;;;5133             }
;;;5134        else temp_SS=bat[in]._Ub/5;
002f1a  f9b40002          LDRSH    r0,[r4,#2]
002f1e  f04f0105          MOV      r1,#5
002f22  fb90f0f1          SDIV     r0,r0,r1
002f26  b200              SXTH     r0,r0
                  |L1.12072|
;;;5135   	
;;;5136   	temp_SS+=temp_SS;     
002f28  ea4f0040          LSL      r0,r0,#1
;;;5137   #endif
;;;5138        temp_SS-=(bat[in]._Ubm);
002f2c  88a1              LDRH     r1,[r4,#4]
002f2e  eba00001          SUB      r0,r0,r1
002f32  b200              SXTH     r0,r0
;;;5139   
;;;5140        temp_SS=abs(temp_SS);
002f34  f7fffffe          BL       abs
;;;5141   
;;;5142        temp_SS*=10;
002f38  eb000080          ADD      r0,r0,r0,LSL #2
002f3c  ea4f0040          LSL      r0,r0,#1
002f40  b200              SXTH     r0,r0
;;;5143   
;;;5144        temp_SS/=12;
002f42  f04f010c          MOV      r1,#0xc
002f46  fb90f0f1          SDIV     r0,r0,r1
002f4a  b200              SXTH     r0,r0
;;;5145   
;;;5146        bat[in]._dUbm=temp_SS;
002f4c  80e0              STRH     r0,[r4,#6]
;;;5147   
;;;5148   
;;;5149        if(	(bat[in]._dUbm>UBM_AV) &&
002f4e  f9b61000          LDRSH    r1,[r6,#0]  ; UBM_AV
002f52  4288              CMP      r0,r1
002f54  dd34              BLE      |L1.12224|
;;;5150   		(abs(bat[in]._Ib)<(5*IKB)) &&
002f56  f9b40008          LDRSH    r0,[r4,#8]
002f5a  f7fffffe          BL       abs
002f5e  4601              MOV      r1,r0
002f60  4873              LDR      r0,|L1.12592|
002f62  f9b00000          LDRSH    r0,[r0,#0]  ; IKB
002f66  eb000080          ADD      r0,r0,r0,LSL #2
002f6a  4281              CMP      r1,r0
002f6c  da28              BGE      |L1.12224|
;;;5151   		(bat[in]._Ub>((short)(((long)USIGN*115)/100))) &&
002f6e  4871              LDR      r0,|L1.12596|
002f70  2173              MOVS     r1,#0x73
002f72  f9b00000          LDRSH    r0,[r0,#0]  ; USIGN
002f76  4348              MULS     r0,r1,r0
002f78  fb90f0fb          SDIV     r0,r0,r11
002f7c  f9b41002          LDRSH    r1,[r4,#2]
002f80  b200              SXTH     r0,r0
002f82  4288              CMP      r0,r1
002f84  da1c              BGE      |L1.12224|
;;;5152   		(!(bat[in]._av & 2))  )
002f86  f894003d          LDRB     r0,[r4,#0x3d]
002f8a  0780              LSLS     r0,r0,#30
002f8c  d418              BMI      |L1.12224|
;;;5153   		{
;;;5154   		bat[in]._cnt_as++;
002f8e  f8b40048          LDRH     r0,[r4,#0x48]
002f92  f1000001          ADD      r0,r0,#1
002f96  b200              SXTH     r0,r0
002f98  f8a40048          STRH     r0,[r4,#0x48]
;;;5155   		if(bat[in]._cnt_as==3000)
002f9c  f5a06130          SUB      r1,r0,#0xb00
002fa0  39b8              SUBS     r1,r1,#0xb8
002fa2  d103              BNE      |L1.12204|
;;;5156   			{
;;;5157   			avar_bat_as_hndl(in,1);
002fa4  2101              MOVS     r1,#1
002fa6  4628              MOV      r0,r5
002fa8  f7fffffe          BL       avar_bat_as_hndl
                  |L1.12204|
;;;5158   			}
;;;5159   		if(bat[in]._cnt_as>=3005) bat[in]._cnt_as=3005;
002fac  f9b41048          LDRSH    r1,[r4,#0x48]
002fb0  f64030bd          MOV      r0,#0xbbd
002fb4  4281              CMP      r1,r0
002fb6  db01              BLT      |L1.12220|
002fb8  f8a40048          STRH     r0,[r4,#0x48]
                  |L1.12220|
;;;5160   		}
;;;5161   	else 
;;;5162   		{
;;;5163   		bat[in]._cnt_as=0;
;;;5164   		}
;;;5165        
;;;5166        }
;;;5167   #endif 
;;;5168   #endif 
;;;5169   #endif
;;;5170   
;;;5171   }
002fbc  e8bd9ffc          POP      {r2-r12,pc}
                  |L1.12224|
002fc0  f8a47048          STRH     r7,[r4,#0x48]         ;5163
002fc4  e7fa              B        |L1.12220|
;;;5172   
                          ENDP

                  u_necc_hndl PROC
;;;5179   //-----------------------------------------------
;;;5180   void u_necc_hndl(void)
002fc6  b538              PUSH     {r3-r5,lr}
;;;5181   {
;;;5182   signed long temp_L;
;;;5183   signed long temp_SL;
;;;5184   //signed short temp_SS;
;;;5185   signed short t[2];
;;;5186   char i;
;;;5187   
;;;5188   //temp_SS=0;
;;;5189   
;;;5190   #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;5191   
;;;5192   if(!TERMOKOMPENS)
002fc8  485b              LDR      r0,|L1.12600|
;;;5193   	{
;;;5194   	//u_necc=U0B;
;;;5195   	u_necc=UB20;
002fca  4c5d              LDR      r4,|L1.12608|
002fcc  8801              LDRH     r1,[r0,#0]            ;5192  ; TERMOKOMPENS
002fce  485b              LDR      r0,|L1.12604|
002fd0  f9b02000          LDRSH    r2,[r0,#0]
002fd4  b139              CBZ      r1,|L1.12262|
;;;5196   	}
;;;5197   else
;;;5198   	{
;;;5199   	if(ND_EXT[0])t[0]=20;
002fd6  485b              LDR      r0,|L1.12612|
002fd8  6800              LDR      r0,[r0,#0]  ; ND_EXT
002fda  b130              CBZ      r0,|L1.12266|
002fdc  f04f0014          MOV      r0,#0x14
002fe0  f8ad0000          STRH     r0,[sp,#0]
002fe4  e005              B        |L1.12274|
                  |L1.12262|
002fe6  8022              STRH     r2,[r4,#0]            ;5195
002fe8  e027              B        |L1.12346|
                  |L1.12266|
;;;5200   	else t[0]=t_ext[0];
002fea  4857              LDR      r0,|L1.12616|
002fec  8800              LDRH     r0,[r0,#0]  ; t_ext
002fee  f8ad0000          STRH     r0,[sp,#0]
                  |L1.12274|
;;;5201   
;;;5202   	mat_temper=t[0];
002ff2  4b56              LDR      r3,|L1.12620|
002ff4  f9bd1000          LDRSH    r1,[sp,#0]
002ff8  6019              STR      r1,[r3,#0]  ; mat_temper
;;;5203   			
;;;5204   	if(mat_temper<0)temp_SL=UB0; 
002ffa  4855              LDR      r0,|L1.12624|
002ffc  2900              CMP      r1,#0
002ffe  f9b00000          LDRSH    r0,[r0,#0]
003002  db12              BLT      |L1.12330|
;;;5205   	else 
;;;5206   		{
;;;5207   		if(mat_temper>40)mat_temper=40; 
003004  2928              CMP      r1,#0x28
003006  dd02              BLE      |L1.12302|
003008  f04f0128          MOV      r1,#0x28
00300c  6019              STR      r1,[r3,#0]  ; mat_temper
                  |L1.12302|
;;;5208   		temp_SL=(UB20-UB0)*10;
00300e  eba20100          SUB      r1,r2,r0
003012  eb010181          ADD      r1,r1,r1,LSL #2
003016  ea4f0141          LSL      r1,r1,#1
;;;5209   		temp_SL*=mat_temper;
00301a  681a              LDR      r2,[r3,#0]  ; mat_temper
00301c  fb01f102          MUL      r1,r1,r2
;;;5210   		temp_SL/=200;
003020  f04f02c8          MOV      r2,#0xc8
003024  fb91f1f2          SDIV     r1,r1,r2
;;;5211   		temp_SL+=UB0;
003028  4408              ADD      r0,r0,r1
                  |L1.12330|
;;;5212   		}
;;;5213   	if(spc_stat==spcVZ)
00302a  494a              LDR      r1,|L1.12628|
00302c  7cc9              LDRB     r1,[r1,#0x13]  ; spc_stat
00302e  2902              CMP      r1,#2
003030  d102              BNE      |L1.12344|
;;;5214   		{
;;;5215   		temp_SL=UVZ;
003032  4849              LDR      r0,|L1.12632|
003034  f9b00000          LDRSH    r0,[r0,#0]  ; UVZ
                  |L1.12344|
;;;5216   		}
;;;5217   	u_necc=(unsigned int)temp_SL;
003038  8020              STRH     r0,[r4,#0]
                  |L1.12346|
;;;5218   	///u_necc=3456;
;;;5219   	}  
;;;5220   
;;;5221   //u_necc=2355;
;;;5222   
;;;5223   if(speedChIsOn)
00303a  4848              LDR      r0,|L1.12636|
00303c  8800              LDRH     r0,[r0,#0]  ; speedChIsOn
00303e  b110              CBZ      r0,|L1.12358|
;;;5224   	{
;;;5225   	u_necc=speedChrgVolt;
003040  4847              LDR      r0,|L1.12640|
003042  8800              LDRH     r0,[r0,#0]  ; speedChrgVolt
003044  8020              STRH     r0,[r4,#0]
                  |L1.12358|
;;;5226   	}
;;;5227   
;;;5228   if(mess_find_unvol(MESS2UNECC_HNDL))
003046  20be              MOVS     r0,#0xbe
003048  f7fffffe          BL       mess_find_unvol
00304c  b128              CBZ      r0,|L1.12378|
;;;5229   	{		
;;;5230   	if(mess_data[0]==PARAM_UNECC_SET)
00304e  4845              LDR      r0,|L1.12644|
003050  6801              LDR      r1,[r0,#0]  ; mess_data
003052  29bf              CMP      r1,#0xbf
003054  d101              BNE      |L1.12378|
;;;5231   		{
;;;5232   		u_necc=mess_data[1];
003056  6840              LDR      r0,[r0,#4]  ; mess_data
003058  8020              STRH     r0,[r4,#0]
                  |L1.12378|
;;;5233   		}		
;;;5234   	}
;;;5235   #endif
;;;5236   
;;;5237   
;;;5238   #ifndef UKU_220_IPS_TERMOKOMPENSAT
;;;5239   
;;;5240   #ifndef UKU_TELECORE2015
;;;5241   if(unh_cnt0<10)
;;;5242   	{
;;;5243   	unh_cnt0++;
;;;5244   	if(unh_cnt0>=10)
;;;5245   		{
;;;5246   		unh_cnt0=0;
;;;5247   		b1Hz_unh=1;
;;;5248   		}
;;;5249   	}
;;;5250   
;;;5251   if(unh_cnt1<5)
;;;5252   	{
;;;5253   	unh_cnt1++;
;;;5254   	if(unh_cnt1==5)
;;;5255   		{
;;;5256   		unh_cnt1=0;
;;;5257   //		b2Hz_unh=1;
;;;5258   		}
;;;5259   	} 
;;;5260   
;;;5261   
;;;5262   
;;;5263   if(mess_find_unvol(MESS2UNECC_HNDL))
;;;5264   	{		
;;;5265   	if(mess_data[0]==PARAM_UNECC_SET)
;;;5266   		{
;;;5267   		u_necc=mess_data[1];
;;;5268   		}		
;;;5269   	}
;;;5270   
;;;5271   
;;;5272   else if(b1Hz_unh)
;;;5273   	{
;;;5274   	
;;;5275   	if((BAT_IS_ON[0]!=bisON) && (BAT_IS_ON[1]!=bisON))
;;;5276   		{
;;;5277   		
;;;5278   		u_necc=U0B;
;;;5279   		}
;;;5280   	else 
;;;5281   		{
;;;5282   		if(BAT_TYPE==0) //  
;;;5283   			{
;;;5284   			for(i=0;i<2;i++)
;;;5285   				{
;;;5286   				if(BAT_IS_ON[i]==bisON)
;;;5287   					{
;;;5288   					if(bat[i]._nd)t[i]=20;
;;;5289   					else t[i]=bat[i]._Tb;
;;;5290   					}
;;;5291   				else
;;;5292   					{
;;;5293   					t[i]=-20;
;;;5294   					}
;;;5295   				}
;;;5296   			if(t[0]>t[1])mat_temper=t[0];
;;;5297   			else mat_temper=t[1];
;;;5298   			
;;;5299   		
;;;5300   			if(mat_temper<0)temp_SL=UB0; 
;;;5301   			else 
;;;5302   				{
;;;5303   				if(mat_temper>40)mat_temper=40; 
;;;5304   				temp_SL=(UB20-UB0)*10;
;;;5305   				temp_SL*=mat_temper;
;;;5306   				temp_SL/=200;
;;;5307   				temp_SL+=UB0;
;;;5308   				}
;;;5309   			if(spc_stat==spcVZ)
;;;5310   				{
;;;5311   				temp_SL=UVZ;
;;;5312   				}
;;;5313   			u_necc=(unsigned int)temp_SL;
;;;5314   			}
;;;5315   		else if(BAT_TYPE==1) //  
;;;5316   			{
;;;5317   			u_necc=U0B;
;;;5318   					
;;;5319   			u_necc=bat[0]._Ub+10;
;;;5320   
;;;5321   			
;;;5322   			if(spc_stat==spcVZ)
;;;5323   				{
;;;5324   				u_necc=UVZ;
;;;5325   				}
;;;5326   			if(u_necc>=UB0) u_necc=UB0;
;;;5327   			if(u_necc>=UB20) u_necc=UB20;
;;;5328   			}
;;;5329   		}  
;;;5330   	}
;;;5331   #endif
;;;5332   #ifdef UKU_TELECORE2015
;;;5333   
;;;5334   if(unh_cnt0<10)
;;;5335   	{
;;;5336   	unh_cnt0++;
;;;5337   	if(unh_cnt0>=10)
;;;5338   		{
;;;5339   		unh_cnt0=0;
;;;5340   		b1Hz_unh=1;
;;;5341   		}
;;;5342   	}
;;;5343   
;;;5344   if(unh_cnt1<5)
;;;5345   	{
;;;5346   	unh_cnt1++;
;;;5347   	if(unh_cnt1==5)
;;;5348   		{
;;;5349   		unh_cnt1=0;
;;;5350   //		b2Hz_unh=1;
;;;5351   		}
;;;5352   	} 
;;;5353   
;;;5354   
;;;5355   
;;;5356   if(mess_find_unvol(MESS2UNECC_HNDL))
;;;5357   	{		
;;;5358   	if(mess_data[0]==PARAM_UNECC_SET)
;;;5359   		{
;;;5360   		u_necc=mess_data[1];
;;;5361   		}		
;;;5362   	}
;;;5363   
;;;5364   
;;;5365   else if(b1Hz_unh)
;;;5366   	{
;;;5367   	b1Hz_unh=0;
;;;5368   
;;;5369   	if(BAT_TYPE==0)
;;;5370   		{
;;;5371   		if(bat[0]._nd)mat_temper=20;
;;;5372   		else mat_temper=bat[0]._Tb;
;;;5373   
;;;5374   			
;;;5375   		if(mat_temper<0)temp_SL=UB0; 
;;;5376   		else 
;;;5377   			{
;;;5378   			if(mat_temper>40)mat_temper=40; 
;;;5379   			temp_SL=(UB20-UB0)*10;
;;;5380   			temp_SL*=mat_temper;
;;;5381   			temp_SL/=200;
;;;5382   			temp_SL+=UB0;
;;;5383   			}
;;;5384   		if(spc_stat==spcVZ)
;;;5385   			{
;;;5386   			temp_SL=UVZ;
;;;5387   			}
;;;5388   		u_necc=(unsigned int)temp_SL;
;;;5389   	///u_necc=3456;
;;;5390   		}
;;;5391   	else if(BAT_TYPE==1)
;;;5392   		{
;;;5393   		
;;;5394   		gran(&DU_LI_BAT,1,30);
;;;5395   		u_necc=li_bat._Ub+DU_LI_BAT;
;;;5396   		gran(&u_necc,0,UB0);
;;;5397   		gran(&u_necc,0,UB20);
;;;5398   		gran(&u_necc,0,540);		
;;;5399   
;;;5400   
;;;5401   		if(li_bat._batStat!=bsOK)
;;;5402   			{
;;;5403   			u_necc=U0B;
;;;5404   			}
;;;5405   		if(spc_stat==spcVZ)
;;;5406   			{
;;;5407   			u_necc=UVZ;
;;;5408   			}
;;;5409   		/* 
;;;5410   		u_necc=U0B;
;;;5411   		
;;;5412   
;;;5413   	
;;;5414   		u_necc=UB0;
;;;5415   		u_necc=li_bat._Ub+10;
;;;5416   		if((li_bat._Ub<450)||(li_bat._Ub>550))
;;;5417   			{
;;;5418   			lakb_error_cnt++;
;;;5419   			if(lakb_error_cnt>=30)
;;;5420   				{
;;;5421   				lakb_error_cnt=30;
;;;5422   				u_necc=U0B;
;;;5423   				}
;;;5424   			}
;;;5425   		else lakb_error_cnt=0;*/
;;;5426   		}
;;;5427   	else if(BAT_TYPE==2)
;;;5428   		{
;;;5429   		u_necc=U0B;
;;;5430   		
;;;5431   		if(spc_stat==spcVZ)
;;;5432   			{
;;;5433   			u_necc=UVZ;
;;;5434   			}
;;;5435   	
;;;5436   		u_necc=UB0;
;;;5437   		}
;;;5438   
;;;5439   	else if(BAT_TYPE==3)
;;;5440   		{
;;;5441   		u_necc=U0B;
;;;5442   		
;;;5443   		if(spc_stat==spcVZ)
;;;5444   			{
;;;5445   			u_necc=UVZ;
;;;5446   			}
;;;5447   
;;;5448   		gran(&DU_LI_BAT,1,30);
;;;5449   
;;;5450   
;;;5451   		if(lakbNotErrorNum==0)
;;;5452   			{
;;;5453   			u_necc=U0B;
;;;5454   			}
;;;5455   		else 
;;;5456   			{
;;;5457   			signed short i;
;;;5458   			for(i=(NUMBAT_TELECORE-1);i>=0;i--)
;;;5459   				{
;;;5460   				if(lakb[i]._communicationFullErrorStat==0)u_necc=lakb[i]._tot_bat_volt+DU_LI_BAT;
;;;5461   				}
;;;5462   			}
;;;5463   		gran(&u_necc,0,UB0);
;;;5464   		gran(&u_necc,0,UB20);
;;;5465   		gran(&u_necc,0,540);
;;;5466   		}
;;;5467   	}
;;;5468   
;;;5469   #endif 
;;;5470   
;;;5471   //u_necc=2356;
;;;5472   #endif//gran(&u_necc,400,UMAX);
;;;5473   
;;;5474   temp_L=(signed long) u_necc;
00305a  f9b40000          LDRSH    r0,[r4,#0]  ; u_necc
;;;5475   temp_L*=98L;
00305e  f04f0162          MOV      r1,#0x62
003062  fb00f101          MUL      r1,r0,r1
;;;5476   temp_L/=100L;
003066  f04f0264          MOV      r2,#0x64
00306a  fb91f1f2          SDIV     r1,r1,r2
;;;5477   u_necc_dn=(signed short)temp_L;
00306e  4b3e              LDR      r3,|L1.12648|
003070  8019              STRH     r1,[r3,#0]
;;;5478   
;;;5479   temp_L=(signed long) u_necc;
;;;5480   temp_L*=102L;
003072  f04f0166          MOV      r1,#0x66
003076  fb00f001          MUL      r0,r0,r1
;;;5481   temp_L/=100L;
00307a  fb90f0f2          SDIV     r0,r0,r2
;;;5482   u_necc_up=(signed short)temp_L;
00307e  493b              LDR      r1,|L1.12652|
003080  8008              STRH     r0,[r1,#0]
;;;5483   
;;;5484   
;;;5485   }
003082  bd38              POP      {r3-r5,pc}
;;;5486   
                          ENDP

                  num_necc_hndl PROC
;;;5488   //-----------------------------------------------
;;;5489   void num_necc_hndl(void)
003084  e92d41f0          PUSH     {r4-r8,lr}
;;;5490   {
;;;5491   
;;;5492   static short num_necc_block_cnt;
;;;5493   if(num_necc_block_cnt) num_necc_block_cnt--;
003088  4c32              LDR      r4,|L1.12628|
00308a  f9b40024          LDRSH    r0,[r4,#0x24]  ; num_necc_block_cnt
00308e  b110              CBZ      r0,|L1.12438|
003090  f1a00001          SUB      r0,r0,#1
003094  84a0              STRH     r0,[r4,#0x24]
                  |L1.12438|
;;;5494   
;;;5495   Isumm_=Isumm;
003096  4836              LDR      r0,|L1.12656|
003098  4d36              LDR      r5,|L1.12660|
00309a  8800              LDRH     r0,[r0,#0]  ; Isumm
00309c  8028              STRH     r0,[r5,#0]
;;;5496   
;;;5497   if(bat[0]._Ib<0) Isumm_+=(abs(bat[0]._Ib))/10;
00309e  4f36              LDR      r7,|L1.12664|
0030a0  260a              MOVS     r6,#0xa
0030a2  f9b70008          LDRSH    r0,[r7,#8]  ; bat
0030a6  2800              CMP      r0,#0
0030a8  da06              BGE      |L1.12472|
0030aa  f7fffffe          BL       abs
0030ae  fb90f0f6          SDIV     r0,r0,r6
0030b2  8829              LDRH     r1,[r5,#0]  ; Isumm_
0030b4  4408              ADD      r0,r0,r1
0030b6  8028              STRH     r0,[r5,#0]
                  |L1.12472|
;;;5498   if(bat[1]._Ib<0) Isumm_+=(abs(bat[1]._Ib))/10;
0030b8  f9b70054          LDRSH    r0,[r7,#0x54]  ; bat
0030bc  2800              CMP      r0,#0
0030be  da06              BGE      |L1.12494|
0030c0  f7fffffe          BL       abs
0030c4  fb90f0f6          SDIV     r0,r0,r6
0030c8  8829              LDRH     r1,[r5,#0]  ; Isumm_
0030ca  4408              ADD      r0,r0,r1
0030cc  8028              STRH     r0,[r5,#0]
                  |L1.12494|
;;;5499   
;;;5500   num_necc_up=(Isumm_/((signed short)IMAX))+1;
0030ce  482b              LDR      r0,|L1.12668|
0030d0  f9b51000          LDRSH    r1,[r5,#0]  ; Isumm_
0030d4  f9b00000          LDRSH    r0,[r0,#0]  ; IMAX
0030d8  fb91f0f0          SDIV     r0,r1,r0
0030dc  f1000001          ADD      r0,r0,#1
0030e0  b2c0              UXTB     r0,r0
0030e2  73e0              STRB     r0,[r4,#0xf]
;;;5501   ////Isumm_+=(signed short)((IMAX*(10-KIMAX))/10);
;;;5502   ////Isumm_+=(signed short)(IMAX-IMIN);
;;;5503   
;;;5504   num_necc_down=(Isumm_/((signed short)IMIN))+1;
0030e4  4a26              LDR      r2,|L1.12672|
0030e6  f9b22000          LDRSH    r2,[r2,#0]  ; IMIN
0030ea  fb91f1f2          SDIV     r1,r1,r2
0030ee  f1010101          ADD      r1,r1,#1
0030f2  b2c9              UXTB     r1,r1
0030f4  7421              STRB     r1,[r4,#0x10]
;;;5505   
;;;5506   if(num_necc_up>num_necc)
0030f6  4b23              LDR      r3,|L1.12676|
;;;5507   	{
;;;5508   	num_necc=num_necc_up;
;;;5509   	num_necc_block_cnt=60;
0030f8  f04f053c          MOV      r5,#0x3c
0030fc  f9b32000          LDRSH    r2,[r3,#0]            ;5506  ; num_necc
003100  4290              CMP      r0,r2                 ;5506
003102  dd41              BLE      |L1.12680|
003104  8018              STRH     r0,[r3,#0]            ;5508
003106  84a5              STRH     r5,[r4,#0x24]
003108  e044              B        |L1.12692|
00310a  0000              DCW      0x0000
                  |L1.12556|
                          DCD      0xffff7360
                  |L1.12560|
                          DCD      BAT_C_NOM
                  |L1.12564|
                          DCD      BAT_TYPE
                  |L1.12568|
                          DCD      lakb
                  |L1.12572|
                          DCD      TBATSIGN
                  |L1.12576|
                          DCD      TBATMAX
                  |L1.12580|
                          DCD      ADR_EE_BAT_RESURS
                  |L1.12584|
                          DCD      UBM_AV
                  |L1.12588|
                          DCD      U0B
                  |L1.12592|
                          DCD      IKB
                  |L1.12596|
                          DCD      USIGN
                  |L1.12600|
                          DCD      TERMOKOMPENS
                  |L1.12604|
                          DCD      UB20
                  |L1.12608|
                          DCD      u_necc
                  |L1.12612|
                          DCD      ND_EXT
                  |L1.12616|
                          DCD      t_ext
                  |L1.12620|
                          DCD      mat_temper
                  |L1.12624|
                          DCD      UB0
                  |L1.12628|
                          DCD      ||area_number.21||
                  |L1.12632|
                          DCD      UVZ
                  |L1.12636|
                          DCD      speedChIsOn
                  |L1.12640|
                          DCD      speedChrgVolt
                  |L1.12644|
                          DCD      mess_data
                  |L1.12648|
                          DCD      u_necc_dn
                  |L1.12652|
                          DCD      u_necc_up
                  |L1.12656|
                          DCD      Isumm
                  |L1.12660|
                          DCD      Isumm_
                  |L1.12664|
                          DCD      bat
                  |L1.12668|
                          DCD      IMAX
                  |L1.12672|
                          DCD      IMIN
                  |L1.12676|
                          DCD      num_necc
                  |L1.12680|
;;;5510   	}
;;;5511   else if(num_necc_down<num_necc)
003188  4291              CMP      r1,r2
00318a  da03              BGE      |L1.12692|
;;;5512   	{
;;;5513   	if(!num_necc_block_cnt)
00318c  8ca0              LDRH     r0,[r4,#0x24]  ; num_necc_block_cnt
00318e  b908              CBNZ     r0,|L1.12692|
;;;5514   		{
;;;5515   		num_necc=num_necc_down;
003190  8019              STRH     r1,[r3,#0]
;;;5516   		num_necc_block_cnt=60;
003192  84a5              STRH     r5,[r4,#0x24]
                  |L1.12692|
;;;5517   		}
;;;5518   	}
;;;5519   
;;;5520   if(PAR) num_necc=NUMIST;
003194  48f8              LDR      r0,|L1.13688|
003196  8801              LDRH     r1,[r0,#0]  ; PAR
003198  48f8              LDR      r0,|L1.13692|
00319a  b109              CBZ      r1,|L1.12704|
00319c  8801              LDRH     r1,[r0,#0]  ; NUMIST
00319e  8019              STRH     r1,[r3,#0]
                  |L1.12704|
;;;5521   
;;;5522   gran(&num_necc,1,NUMIST);
0031a0  f9b02000          LDRSH    r2,[r0,#0]  ; NUMIST
0031a4  e8bd41f0          POP      {r4-r8,lr}
0031a8  2101              MOVS     r1,#1
0031aa  48f5              LDR      r0,|L1.13696|
0031ac  f7ffbffe          B.W      gran
;;;5523   
;;;5524   }
;;;5525   
                          ENDP

                  cntrl_hndl PROC
;;;5528   //-----------------------------------------------
;;;5529   void cntrl_hndl(void)
0031b0  e92d5ff0          PUSH     {r4-r12,lr}
;;;5530   {
;;;5531   
;;;5532   IZMAX_=IZMAX;
0031b4  48f3              LDR      r0,|L1.13700|
0031b6  4cf4              LDR      r4,|L1.13704|
0031b8  f9b01000          LDRSH    r1,[r0,#0]  ; IZMAX
0031bc  8721              STRH     r1,[r4,#0x38]
;;;5533   
;;;5534   if(speedChIsOn)IZMAX_=speedChrgCurr;
0031be  48f3              LDR      r0,|L1.13708|
0031c0  8800              LDRH     r0,[r0,#0]  ; speedChIsOn
0031c2  b110              CBZ      r0,|L1.12746|
0031c4  48f2              LDR      r0,|L1.13712|
0031c6  8800              LDRH     r0,[r0,#0]  ; speedChrgCurr
0031c8  8720              STRH     r0,[r4,#0x38]
                  |L1.12746|
;;;5535   
;;;5536   if(cntrl_stat_blok_cnt)cntrl_stat_blok_cnt--;
0031ca  f9b4005c          LDRSH    r0,[r4,#0x5c]  ; cntrl_stat_blok_cnt
0031ce  b118              CBZ      r0,|L1.12760|
0031d0  f1a00001          SUB      r0,r0,#1
0031d4  f8a4005c          STRH     r0,[r4,#0x5c]
                  |L1.12760|
;;;5537   if(cntrl_stat_blok_cnt_)cntrl_stat_blok_cnt_--;
0031d8  f9b4005e          LDRSH    r0,[r4,#0x5e]  ; cntrl_stat_blok_cnt_
0031dc  b118              CBZ      r0,|L1.12774|
0031de  f1a00001          SUB      r0,r0,#1
0031e2  f8a4005e          STRH     r0,[r4,#0x5e]
                  |L1.12774|
;;;5538   
;;;5539   if((bat[0]._temper_stat&0x03)||(bat[1]._temper_stat&0x03))IZMAX_=IZMAX/10;
0031e6  48eb              LDR      r0,|L1.13716|
0031e8  f04f050a          MOV      r5,#0xa
0031ec  f890203f          LDRB     r2,[r0,#0x3f]  ; bat
0031f0  0792              LSLS     r2,r2,#30
0031f2  d103              BNE      |L1.12796|
0031f4  f890008b          LDRB     r0,[r0,#0x8b]  ; bat
0031f8  0780              LSLS     r0,r0,#30
0031fa  d002              BEQ      |L1.12802|
                  |L1.12796|
0031fc  fb91f0f5          SDIV     r0,r1,r5
003200  8720              STRH     r0,[r4,#0x38]
                  |L1.12802|
;;;5540   
;;;5541   
;;;5542   if(ch_cnt0<10)
003202  79a0              LDRB     r0,[r4,#6]  ; ch_cnt0
003204  2600              MOVS     r6,#0                 ;5534
;;;5543   	{
;;;5544   	ch_cnt0++;
;;;5545   	if(ch_cnt0>=10)
;;;5546   		{
;;;5547   		ch_cnt0=0;
;;;5548   		b1Hz_ch=1;
003206  2701              MOVS     r7,#1
003208  280a              CMP      r0,#0xa               ;5542
00320a  d207              BCS      |L1.12828|
00320c  f1000001          ADD      r0,r0,#1              ;5544
003210  b2c0              UXTB     r0,r0                 ;5544
003212  71a0              STRB     r0,[r4,#6]            ;5544
003214  280a              CMP      r0,#0xa               ;5545
003216  d301              BCC      |L1.12828|
003218  71a6              STRB     r6,[r4,#6]            ;5547
00321a  71e7              STRB     r7,[r4,#7]
                  |L1.12828|
;;;5549   		}
;;;5550   	}
;;;5551   
;;;5552   
;;;5553   
;;;5554   
;;;5555   if(mess_find_unvol(MESS2CNTRL_HNDL))
00321c  20e1              MOVS     r0,#0xe1
00321e  f7fffffe          BL       mess_find_unvol
;;;5556   	{
;;;5557   	if(mess_data[0]==PARAM_CNTRL_STAT_PLUS)
;;;5558   		{
;;;5559   		cntrl_stat=cntrl_stat_old+mess_data[1];
;;;5560   		}
;;;5561   	else if(mess_data[0]==PARAM_CNTRL_STAT_MINUS)
;;;5562   		{
;;;5563   		cntrl_stat=cntrl_stat_old-mess_data[1];
;;;5564   		}
;;;5565   	else if(mess_data[0]==PARAM_CNTRL_STAT_STEP_DOWN)
;;;5566   		{
;;;5567   		cntrl_stat--;
;;;5568   
;;;5569   		if((cntrl_stat<=30)||(load_U<USIGN)) mess_send(MESS2KB_HNDL,PARAM_CNTRL_IS_DOWN,0,10);
;;;5570   
;;;5571   		}
;;;5572   	else if(mess_data[0]==PARAM_CNTRL_STAT_SET)
;;;5573   		{
;;;5574   		cntrl_stat=mess_data[1];
;;;5575   		}
;;;5576   
;;;5577   	else if(mess_data[0]==PARAM_CNTRL_STAT_FAST_REG)
;;;5578   		{
;;;5579   		#ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;5580   		if(load_U>u_necc)
003222  4bdd              LDR      r3,|L1.13720|
;;;5581   			{
;;;5582   			if(((bps_U-u_necc)>40)&&(cntrl_stat>0))cntrl_stat-=5;
003224  f8dfc374          LDR      r12,|L1.13724|
;;;5583   			else if((cntrl_stat)&&b1Hz_ch)cntrl_stat--;
;;;5584   			}
;;;5585   		else if(bps_U<u_necc)
;;;5586   			{	
;;;5587   			if(((u_necc-bps_U)>40)&&(cntrl_stat<1015))cntrl_stat+=5;
;;;5588   			else	if((cntrl_stat<1020)&&b1Hz_ch)cntrl_stat++;
;;;5589   			}
;;;5590   		#elif defined(UKU_220)
;;;5591   		if(load_U>u_necc)
;;;5592   			{
;;;5593   			if(((load_U-u_necc)>40)&&(cntrl_stat>0))cntrl_stat-=5;
;;;5594   			else if((cntrl_stat)&&b1Hz_ch)cntrl_stat--;
;;;5595   			}
;;;5596   		else if(load_U<u_necc)
;;;5597   			{	
;;;5598   			if(((u_necc-load_U)>40)&&(cntrl_stat<1015))cntrl_stat+=5;
;;;5599   			else	if((cntrl_stat<1020)&&b1Hz_ch)cntrl_stat++;
;;;5600   			}
;;;5601   		#elif defined(UKU_220_V2)
;;;5602   		if(load_U>u_necc)
;;;5603   			{
;;;5604   			if(((load_U-u_necc)>40)&&(cntrl_stat>0))cntrl_stat-=5;
;;;5605   			else if((cntrl_stat)&&b1Hz_ch)cntrl_stat--;
;;;5606   			}
;;;5607   		else if(load_U<u_necc)
;;;5608   			{	
;;;5609   			if(((u_necc-load_U)>40)&&(cntrl_stat<1015))cntrl_stat+=5;
;;;5610   			else	if((cntrl_stat<1020)&&b1Hz_ch)cntrl_stat++;
;;;5611   			}
;;;5612   		#else
;;;5613   
;;;5614   		if(load_U>u_necc)
;;;5615   			{
;;;5616   			if(((load_U-u_necc)>10)&&(cntrl_stat>0))cntrl_stat-=5;
;;;5617   			else if((cntrl_stat)&&b1Hz_ch)cntrl_stat--;
;;;5618   			}
;;;5619   		else if(load_U<u_necc)
;;;5620   			{	
;;;5621   			if(((u_necc-load_U)>10)&&(cntrl_stat<1015))cntrl_stat+=5;
;;;5622   			else	if((cntrl_stat<1020)&&b1Hz_ch)cntrl_stat++;
;;;5623   			}
;;;5624   		#endif	
;;;5625   	 	}
;;;5626   	}
;;;5627   
;;;5628   #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;5629   else if((b1Hz_ch)&&((!bIBAT_SMKLBR)||(bps[8]._cnt>40)))
003228  f8df8374          LDR      r8,|L1.13728|
;;;5630   	{
;;;5631   	cntrl_stat_new=cntrl_stat_old;
;;;5632   	
;;;5633   	if((Ibmax/10)>(2*IZMAX_))
;;;5634   		{
;;;5635             if(cntrl_stat_blok_cnt)cntrl_stat_new--;
;;;5636   		else	cntrl_stat_new-=10;
;;;5637   		}		
;;;5638   	else if(((Ibmax/10)<(IZMAX_*2))&&(Ibmax>(IZMAX_*15)))
;;;5639   		{
;;;5640             if(cntrl_stat_blok_cnt)cntrl_stat_new--;
;;;5641             else	cntrl_stat_new-=3;
;;;5642   		}   
;;;5643   	else if((Ibmax<(IZMAX_*15))&&((Ibmax/10)>IZMAX_))
;;;5644   		{
;;;5645   		cntrl_stat_new--;
;;;5646   		}
;;;5647   		
;;;5648   	else if(bps_U<u_necc)
;;;5649   		{
;;;5650   		if(bps_U<(u_necc-(UB0-UB20)))
;;;5651   			{
;;;5652   			if(Ibmax<0)
;;;5653   				{
;;;5654                       if(cntrl_stat_blok_cnt)cntrl_stat_new++;
;;;5655   				else cntrl_stat_new+=10;
;;;5656   				}
;;;5657   			else if(Ibmax<(IZMAX_*5))
;;;5658   				{
;;;5659                       if(cntrl_stat_blok_cnt)cntrl_stat_new++;
;;;5660   				else	cntrl_stat_new+=2;
;;;5661   				}
;;;5662   			else if(Ibmax<((IZMAX_*95)/10))
;;;5663   				{
;;;5664   				cntrl_stat_new++;
;;;5665   				}					
;;;5666   			}
;;;5667   		else if(bps_U<(u_necc-((UB0-UB20)/4)))
;;;5668   			{
;;;5669   			if(Ibmax<(IZMAX_*5))
;;;5670   				{
;;;5671                       if(cntrl_stat_blok_cnt)cntrl_stat_new++;
;;;5672   				else	cntrl_stat_new+=2;
;;;5673   				}
;;;5674   			else if(Ibmax<((IZMAX_*95)/10))
;;;5675   				{
;;;5676   				cntrl_stat_new++;
;;;5677   				}					
;;;5678   			}	
;;;5679   		else if(bps_U<(u_necc-1))
;;;5680   			{
;;;5681   			if(Ibmax<((IZMAX_*95)/10))
;;;5682   				{
;;;5683   				cntrl_stat_new++;
;;;5684   				}					
;;;5685   			}					
;;;5686   		}	
;;;5687   	else if((bps_U>u_necc)/*&&(!cntrl_blok)*/)
;;;5688   		{
;;;5689   		if(bps_U>(u_necc+(UB0-UB20)))
;;;5690   			{
;;;5691                  if(cntrl_stat_blok_cnt)cntrl_stat_new--;
;;;5692   			else	cntrl_stat_new-=10;
;;;5693   			}
;;;5694   		else if(bps_U>(u_necc+((UB0-UB20)/4)))
;;;5695   			{
;;;5696                  if(cntrl_stat_blok_cnt)cntrl_stat_new--;
;;;5697   			else cntrl_stat_new-=2;
;;;5698   			}	
;;;5699   		else if(bps_U>(u_necc+1))
;;;5700   			{
;;;5701   			cntrl_stat_new--;
;;;5702   			}					
;;;5703   		}
;;;5704   
;;;5705   	gran(&cntrl_stat_new,10,1010);			
00322c  f2403bf2          MOV      r11,#0x3f2
003230  b380              CBZ      r0,|L1.12948|
003232  49dc              LDR      r1,|L1.13732|
003234  6808              LDR      r0,[r1,#0]            ;5557  ; mess_data
003236  2864              CMP      r0,#0x64              ;5557
003238  d009              BEQ      |L1.12878|
00323a  2869              CMP      r0,#0x69              ;5561
00323c  d00c              BEQ      |L1.12888|
00323e  4ada              LDR      r2,|L1.13736|
003240  286e              CMP      r0,#0x6e              ;5565
003242  d00f              BEQ      |L1.12900|
003244  28e5              CMP      r0,#0xe5              ;5572
003246  d022              BEQ      |L1.12942|
003248  28e6              CMP      r0,#0xe6              ;5577
00324a  d024              BEQ      |L1.12950|
                  |L1.12876|
00324c  e13c              B        |L1.13512|
                  |L1.12878|
00324e  6848              LDR      r0,[r1,#4]            ;5559  ; mess_data
003250  8ba1              LDRH     r1,[r4,#0x1c]         ;5559  ; cntrl_stat_old
003252  4408              ADD      r0,r0,r1              ;5559
003254  8360              STRH     r0,[r4,#0x1a]         ;5559
003256  e137              B        |L1.13512|
                  |L1.12888|
003258  6849              LDR      r1,[r1,#4]            ;5563  ; mess_data
00325a  8ba0              LDRH     r0,[r4,#0x1c]         ;5563  ; cntrl_stat_old
00325c  eba00001          SUB      r0,r0,r1              ;5563
003260  8360              STRH     r0,[r4,#0x1a]         ;5563
003262  e131              B        |L1.13512|
                  |L1.12900|
003264  8b60              LDRH     r0,[r4,#0x1a]         ;5567  ; cntrl_stat
003266  f1a00001          SUB      r0,r0,#1              ;5567
00326a  b200              SXTH     r0,r0                 ;5567
00326c  8360              STRH     r0,[r4,#0x1a]         ;5567
00326e  281e              CMP      r0,#0x1e              ;5569
003270  dd06              BLE      |L1.12928|
003272  49ce              LDR      r1,|L1.13740|
003274  f9b20000          LDRSH    r0,[r2,#0]            ;5569  ; load_U
003278  f9b11000          LDRSH    r1,[r1,#0]            ;5569  ; USIGN
00327c  4288              CMP      r0,r1                 ;5569
00327e  dae5              BGE      |L1.12876|
                  |L1.12928|
003280  230a              MOVS     r3,#0xa               ;5569
003282  2200              MOVS     r2,#0                 ;5569
003284  21e7              MOVS     r1,#0xe7              ;5569
003286  20e6              MOVS     r0,#0xe6              ;5569
003288  f7fffffe          BL       mess_send
00328c  e11c              B        |L1.13512|
                  |L1.12942|
00328e  6848              LDR      r0,[r1,#4]            ;5574  ; mess_data
003290  8360              STRH     r0,[r4,#0x1a]         ;5574
003292  e119              B        |L1.13512|
                  |L1.12948|
003294  e03a              B        |L1.13068|
                  |L1.12950|
003296  f9b21000          LDRSH    r1,[r2,#0]            ;5580  ; load_U
00329a  f9b30000          LDRSH    r0,[r3,#0]            ;5580  ; u_necc
00329e  4281              CMP      r1,r0                 ;5580
0032a0  dd17              BLE      |L1.13010|
0032a2  f9bc1000          LDRSH    r1,[r12,#0]           ;5582  ; bps_U
0032a6  1a08              SUBS     r0,r1,r0              ;5582
0032a8  2828              CMP      r0,#0x28              ;5582
0032aa  dd07              BLE      |L1.12988|
0032ac  f9b4001a          LDRSH    r0,[r4,#0x1a]         ;5582  ; cntrl_stat
0032b0  2800              CMP      r0,#0                 ;5582
0032b2  dd03              BLE      |L1.12988|
0032b4  f1a00005          SUB      r0,r0,#5              ;5582
0032b8  8360              STRH     r0,[r4,#0x1a]         ;5582
0032ba  e105              B        |L1.13512|
                  |L1.12988|
0032bc  f9b4001a          LDRSH    r0,[r4,#0x1a]         ;5583  ; cntrl_stat
0032c0  2800              CMP      r0,#0                 ;5583
0032c2  d005              BEQ      |L1.13008|
0032c4  79e1              LDRB     r1,[r4,#7]            ;5583  ; b1Hz_ch
0032c6  2900              CMP      r1,#0                 ;5583
0032c8  d002              BEQ      |L1.13008|
0032ca  f1a00001          SUB      r0,r0,#1              ;5583
0032ce  8360              STRH     r0,[r4,#0x1a]         ;5583
                  |L1.13008|
0032d0  e0fa              B        |L1.13512|
                  |L1.13010|
0032d2  f9bc1000          LDRSH    r1,[r12,#0]           ;5585  ; bps_U
0032d6  4281              CMP      r1,r0                 ;5585
0032d8  da0b              BGE      |L1.13042|
0032da  1a40              SUBS     r0,r0,r1              ;5587
0032dc  2828              CMP      r0,#0x28              ;5587
0032de  dd09              BLE      |L1.13044|
0032e0  f9b4001a          LDRSH    r0,[r4,#0x1a]         ;5587  ; cntrl_stat
0032e4  f24031f7          MOV      r1,#0x3f7             ;5587
0032e8  4288              CMP      r0,r1                 ;5587
0032ea  da03              BGE      |L1.13044|
0032ec  f1000005          ADD      r0,r0,#5              ;5587
0032f0  8360              STRH     r0,[r4,#0x1a]         ;5587
                  |L1.13042|
0032f2  e0e9              B        |L1.13512|
                  |L1.13044|
0032f4  f9b4001a          LDRSH    r0,[r4,#0x1a]         ;5588  ; cntrl_stat
0032f8  f5b07f7f          CMP      r0,#0x3fc             ;5588
0032fc  da05              BGE      |L1.13066|
0032fe  79e1              LDRB     r1,[r4,#7]            ;5588  ; b1Hz_ch
003300  2900              CMP      r1,#0                 ;5588
003302  d002              BEQ      |L1.13066|
003304  f1000001          ADD      r0,r0,#1              ;5588
003308  8360              STRH     r0,[r4,#0x1a]         ;5588
                  |L1.13066|
00330a  e0dd              B        |L1.13512|
                  |L1.13068|
00330c  79e0              LDRB     r0,[r4,#7]            ;5629  ; b1Hz_ch
00330e  2800              CMP      r0,#0                 ;5629
003310  d072              BEQ      |L1.13304|
003312  48a7              LDR      r0,|L1.13744|
003314  8800              LDRH     r0,[r0,#0]            ;5629  ; bIBAT_SMKLBR
003316  b118              CBZ      r0,|L1.13088|
003318  f89802a3          LDRB     r0,[r8,#0x2a3]        ;5629  ; bps
00331c  2828              CMP      r0,#0x28              ;5629
00331e  d96b              BLS      |L1.13304|
                  |L1.13088|
003320  f9b4001c          LDRSH    r0,[r4,#0x1c]         ;5631  ; cntrl_stat_old
003324  86a0              STRH     r0,[r4,#0x34]         ;5631
003326  f9b41036          LDRSH    r1,[r4,#0x36]         ;5633  ; Ibmax
00332a  8f22              LDRH     r2,[r4,#0x38]         ;5633  ; IZMAX_
00332c  fb91f9f5          SDIV     r9,r1,r5              ;5633
003330  ebb90f42          CMP      r9,r2,LSL #1          ;5633
003334  dd0a              BLE      |L1.13132|
003336  f8b4105c          LDRH     r1,[r4,#0x5c]         ;5635  ; cntrl_stat_blok_cnt
00333a  b119              CBZ      r1,|L1.13124|
00333c  f1a00001          SUB      r0,r0,#1              ;5635
003340  86a0              STRH     r0,[r4,#0x34]         ;5635
003342  e0b8              B        |L1.13494|
                  |L1.13124|
003344  f1a0000a          SUB      r0,r0,#0xa            ;5636
003348  86a0              STRH     r0,[r4,#0x34]         ;5636
00334a  e0b4              B        |L1.13494|
                  |L1.13132|
00334c  da0e              BGE      |L1.13164|
00334e  ebc21a02          RSB      r10,r2,r2,LSL #4      ;5638
003352  458a              CMP      r10,r1                ;5638
003354  da0a              BGE      |L1.13164|
003356  f8b4105c          LDRH     r1,[r4,#0x5c]         ;5640  ; cntrl_stat_blok_cnt
00335a  b119              CBZ      r1,|L1.13156|
00335c  f1a00001          SUB      r0,r0,#1              ;5640
003360  86a0              STRH     r0,[r4,#0x34]         ;5640
003362  e0a8              B        |L1.13494|
                  |L1.13156|
003364  f1a00003          SUB      r0,r0,#3              ;5641
003368  86a0              STRH     r0,[r4,#0x34]         ;5641
00336a  e0a4              B        |L1.13494|
                  |L1.13164|
00336c  ebc21a02          RSB      r10,r2,r2,LSL #4      ;5643
003370  458a              CMP      r10,r1                ;5643
003372  dd05              BLE      |L1.13184|
003374  4591              CMP      r9,r2                 ;5643
003376  dd03              BLE      |L1.13184|
003378  f1a00001          SUB      r0,r0,#1              ;5645
00337c  86a0              STRH     r0,[r4,#0x34]         ;5645
00337e  e09a              B        |L1.13494|
                  |L1.13184|
003380  f9bcc000          LDRSH    r12,[r12,#0]          ;5648  ; bps_U
003384  f9b33000          LDRSH    r3,[r3,#0]            ;5648  ; u_necc
003388  f8df9228          LDR      r9,|L1.13748|
00338c  f8dfa228          LDR      r10,|L1.13752|
003390  459c              CMP      r12,r3                ;5648
003392  da64              BGE      |L1.13406|
003394  f9b99000          LDRSH    r9,[r9,#0]            ;5650  ; UB0
003398  f9baa000          LDRSH    r10,[r10,#0]          ;5650  ; UB20
00339c  eba9090a          SUB      r9,r9,r10             ;5650
0033a0  eba30a09          SUB      r10,r3,r9             ;5650
0033a4  45e2              CMP      r10,r12               ;5650
0033a6  dd28              BLE      |L1.13306|
0033a8  2900              CMP      r1,#0                 ;5652
0033aa  da0a              BGE      |L1.13250|
0033ac  f8b4105c          LDRH     r1,[r4,#0x5c]         ;5654  ; cntrl_stat_blok_cnt
0033b0  b119              CBZ      r1,|L1.13242|
0033b2  f1000001          ADD      r0,r0,#1              ;5654
0033b6  86a0              STRH     r0,[r4,#0x34]         ;5654
0033b8  e07d              B        |L1.13494|
                  |L1.13242|
0033ba  f100000a          ADD      r0,r0,#0xa            ;5655
0033be  86a0              STRH     r0,[r4,#0x34]         ;5655
0033c0  e079              B        |L1.13494|
                  |L1.13250|
0033c2  eb020382          ADD      r3,r2,r2,LSL #2       ;5657
0033c6  428b              CMP      r3,r1                 ;5657
0033c8  dd0a              BLE      |L1.13280|
0033ca  f8b4105c          LDRH     r1,[r4,#0x5c]         ;5659  ; cntrl_stat_blok_cnt
0033ce  b119              CBZ      r1,|L1.13272|
0033d0  f1000001          ADD      r0,r0,#1              ;5659
0033d4  86a0              STRH     r0,[r4,#0x34]         ;5659
0033d6  e06e              B        |L1.13494|
                  |L1.13272|
0033d8  f1000002          ADD      r0,r0,#2              ;5660
0033dc  86a0              STRH     r0,[r4,#0x34]         ;5660
0033de  e06a              B        |L1.13494|
                  |L1.13280|
0033e0  ebc21342          RSB      r3,r2,r2,LSL #5       ;5662
0033e4  eb031282          ADD      r2,r3,r2,LSL #6       ;5662
0033e8  fbb2f2f5          UDIV     r2,r2,r5              ;5662
0033ec  428a              CMP      r2,r1                 ;5662
0033ee  dd62              BLE      |L1.13494|
0033f0  f1000001          ADD      r0,r0,#1              ;5664
0033f4  86a0              STRH     r0,[r4,#0x34]         ;5664
0033f6  e05e              B        |L1.13494|
                  |L1.13304|
0033f8  e066              B        |L1.13512|
                  |L1.13306|
0033fa  ea4f7ae9          ASR      r10,r9,#31            ;5667
0033fe  eb09799a          ADD      r9,r9,r10,LSR #30     ;5667
003402  eba309a9          SUB      r9,r3,r9,ASR #2       ;5667
003406  45e1              CMP      r9,r12                ;5667
003408  dd1a              BLE      |L1.13376|
00340a  eb020382          ADD      r3,r2,r2,LSL #2       ;5669
00340e  428b              CMP      r3,r1                 ;5669
003410  dd0a              BLE      |L1.13352|
003412  f8b4105c          LDRH     r1,[r4,#0x5c]         ;5671  ; cntrl_stat_blok_cnt
003416  b119              CBZ      r1,|L1.13344|
003418  f1000001          ADD      r0,r0,#1              ;5671
00341c  86a0              STRH     r0,[r4,#0x34]         ;5671
00341e  e04a              B        |L1.13494|
                  |L1.13344|
003420  f1000002          ADD      r0,r0,#2              ;5672
003424  86a0              STRH     r0,[r4,#0x34]         ;5672
003426  e046              B        |L1.13494|
                  |L1.13352|
003428  ebc21342          RSB      r3,r2,r2,LSL #5       ;5674
00342c  eb031282          ADD      r2,r3,r2,LSL #6       ;5674
003430  fbb2f2f5          UDIV     r2,r2,r5              ;5674
003434  428a              CMP      r2,r1                 ;5674
003436  dd3e              BLE      |L1.13494|
003438  f1000001          ADD      r0,r0,#1              ;5676
00343c  86a0              STRH     r0,[r4,#0x34]         ;5676
00343e  e03a              B        |L1.13494|
                  |L1.13376|
003440  1e5b              SUBS     r3,r3,#1              ;5679
003442  459c              CMP      r12,r3                ;5679
003444  da37              BGE      |L1.13494|
003446  ebc21342          RSB      r3,r2,r2,LSL #5       ;5681
00344a  eb031282          ADD      r2,r3,r2,LSL #6       ;5681
00344e  fbb2f2f5          UDIV     r2,r2,r5              ;5681
003452  428a              CMP      r2,r1                 ;5681
003454  dd2f              BLE      |L1.13494|
003456  f1000001          ADD      r0,r0,#1              ;5683
00345a  86a0              STRH     r0,[r4,#0x34]         ;5683
00345c  e02b              B        |L1.13494|
                  |L1.13406|
00345e  dd2a              BLE      |L1.13494|
003460  f9b91000          LDRSH    r1,[r9,#0]            ;5689  ; UB0
003464  f9ba2000          LDRSH    r2,[r10,#0]           ;5689  ; UB20
003468  1a89              SUBS     r1,r1,r2              ;5689
00346a  18ca              ADDS     r2,r1,r3              ;5689
00346c  4562              CMP      r2,r12                ;5689
00346e  da0a              BGE      |L1.13446|
003470  f8b4105c          LDRH     r1,[r4,#0x5c]         ;5691  ; cntrl_stat_blok_cnt
003474  b119              CBZ      r1,|L1.13438|
003476  f1a00001          SUB      r0,r0,#1              ;5691
00347a  86a0              STRH     r0,[r4,#0x34]         ;5691
00347c  e01b              B        |L1.13494|
                  |L1.13438|
00347e  f1a0000a          SUB      r0,r0,#0xa            ;5692
003482  86a0              STRH     r0,[r4,#0x34]         ;5692
003484  e017              B        |L1.13494|
                  |L1.13446|
003486  17ca              ASRS     r2,r1,#31             ;5694
003488  eb017192          ADD      r1,r1,r2,LSR #30      ;5694
00348c  eb0301a1          ADD      r1,r3,r1,ASR #2       ;5694
003490  4561              CMP      r1,r12                ;5694
003492  da0a              BGE      |L1.13482|
003494  f8b4105c          LDRH     r1,[r4,#0x5c]         ;5696  ; cntrl_stat_blok_cnt
003498  b119              CBZ      r1,|L1.13474|
00349a  f1a00001          SUB      r0,r0,#1              ;5696
00349e  86a0              STRH     r0,[r4,#0x34]         ;5696
0034a0  e009              B        |L1.13494|
                  |L1.13474|
0034a2  f1a00002          SUB      r0,r0,#2              ;5697
0034a6  86a0              STRH     r0,[r4,#0x34]         ;5697
0034a8  e005              B        |L1.13494|
                  |L1.13482|
0034aa  1c5b              ADDS     r3,r3,#1              ;5699
0034ac  459c              CMP      r12,r3                ;5699
0034ae  dd02              BLE      |L1.13494|
0034b0  f1a00001          SUB      r0,r0,#1              ;5701
0034b4  86a0              STRH     r0,[r4,#0x34]         ;5701
                  |L1.13494|
0034b6  4834              LDR      r0,|L1.13704|
0034b8  465a              MOV      r2,r11
0034ba  210a              MOVS     r1,#0xa
0034bc  3034              ADDS     r0,r0,#0x34
0034be  f7fffffe          BL       gran
;;;5706   	cntrl_stat_old=cntrl_stat_new;
0034c2  8ea0              LDRH     r0,[r4,#0x34]  ; cntrl_stat_new
0034c4  83a0              STRH     r0,[r4,#0x1c]
;;;5707   	cntrl_stat=cntrl_stat_new;	
0034c6  8360              STRH     r0,[r4,#0x1a]
                  |L1.13512|
;;;5708   	}
;;;5709   #else
;;;5710   else if((b1Hz_ch)&&((!bIBAT_SMKLBR)||(bps[8]._cnt>40)))
;;;5711   	{
;;;5712   	cntrl_stat_new=cntrl_stat_old;
;;;5713   	
;;;5714   	if((Ibmax/10)>(2*IZMAX_))
;;;5715   		{
;;;5716             if(cntrl_stat_blok_cnt)cntrl_stat_new--;
;;;5717   		else	cntrl_stat_new-=10;
;;;5718   		}		
;;;5719   	else if(((Ibmax/10)<(IZMAX_*2))&&(Ibmax>(IZMAX_*15)))
;;;5720   		{
;;;5721             if(cntrl_stat_blok_cnt)cntrl_stat_new--;
;;;5722             else	cntrl_stat_new-=3;
;;;5723   		}   
;;;5724   	else if((Ibmax<(IZMAX_*15))&&((Ibmax/10)>IZMAX_))
;;;5725   		{
;;;5726   		cntrl_stat_new--;
;;;5727   		}
;;;5728   		
;;;5729   	else if(load_U<u_necc)
;;;5730   		{
;;;5731   		if(load_U<(u_necc-(UB0-UB20)))
;;;5732   			{
;;;5733   			if(Ibmax<0)
;;;5734   				{
;;;5735                       if(cntrl_stat_blok_cnt)cntrl_stat_new++;
;;;5736   				else cntrl_stat_new+=10;
;;;5737   				}
;;;5738   			else if(Ibmax<(IZMAX_*5))
;;;5739   				{
;;;5740                       if(cntrl_stat_blok_cnt)cntrl_stat_new++;
;;;5741   				else	cntrl_stat_new+=2;
;;;5742   				}
;;;5743   			else if(Ibmax<((IZMAX_*95)/10))
;;;5744   				{
;;;5745   				cntrl_stat_new++;
;;;5746   				}					
;;;5747   			}
;;;5748   		else if(load_U<(u_necc-((UB0-UB20)/4)))
;;;5749   			{
;;;5750   			if(Ibmax<(IZMAX_*5))
;;;5751   				{
;;;5752                       if(cntrl_stat_blok_cnt)cntrl_stat_new++;
;;;5753   				else	cntrl_stat_new+=2;
;;;5754   				}
;;;5755   			else if(Ibmax<((IZMAX_*95)/10))
;;;5756   				{
;;;5757   				cntrl_stat_new++;
;;;5758   				}					
;;;5759   			}	
;;;5760   		else if(load_U<(u_necc-1))
;;;5761   			{
;;;5762   			if(Ibmax<((IZMAX_*95)/10))
;;;5763   				{
;;;5764   				cntrl_stat_new++;
;;;5765   				}					
;;;5766   			}					
;;;5767   		}	
;;;5768   	else if((load_U>u_necc)/*&&(!cntrl_blok)*/)
;;;5769   		{
;;;5770   		if(load_U>(u_necc+(UB0-UB20)))
;;;5771   			{
;;;5772                  if(cntrl_stat_blok_cnt)cntrl_stat_new--;
;;;5773   			else	cntrl_stat_new-=10;
;;;5774   			}
;;;5775   		else if(load_U>(u_necc+((UB0-UB20)/4)))
;;;5776   			{
;;;5777                  if(cntrl_stat_blok_cnt)cntrl_stat_new--;
;;;5778   			else cntrl_stat_new-=2;
;;;5779   			}	
;;;5780   		else if(load_U>(u_necc+1))
;;;5781   			{
;;;5782   			cntrl_stat_new--;
;;;5783   			}					
;;;5784   		}
;;;5785   
;;;5786   	gran(&cntrl_stat_new,10,1010);			
;;;5787   	cntrl_stat_old=cntrl_stat_new;
;;;5788   	cntrl_stat=cntrl_stat_new;	
;;;5789   	}
;;;5790   #endif
;;;5791   
;;;5792   iiii=0;
0034c8  7266              STRB     r6,[r4,#9]
;;;5793   for(i=0;i<NUMIST;i++)
0034ca  7226              STRB     r6,[r4,#8]
0034cc  482b              LDR      r0,|L1.13692|
0034ce  f9b02000          LDRSH    r2,[r0,#0]
0034d2  e00c              B        |L1.13550|
                  |L1.13524|
;;;5794        {
;;;5795        if(bps[i]._cnt<30)iiii=1;
0034d4  ebc001c0          RSB      r1,r0,r0,LSL #3
0034d8  eb010141          ADD      r1,r1,r1,LSL #1
0034dc  eb080181          ADD      r1,r8,r1,LSL #2
0034e0  78c9              LDRB     r1,[r1,#3]
0034e2  291e              CMP      r1,#0x1e
0034e4  d200              BCS      |L1.13544|
0034e6  7267              STRB     r7,[r4,#9]
                  |L1.13544|
0034e8  f1000001          ADD      r0,r0,#1              ;5793
0034ec  7220              STRB     r0,[r4,#8]            ;5793
                  |L1.13550|
0034ee  7a20              LDRB     r0,[r4,#8]            ;5793  ; i
0034f0  4290              CMP      r0,r2                 ;5793
0034f2  dbef              BLT      |L1.13524|
;;;5796        }
;;;5797   
;;;5798   if(iiii==0)
0034f4  7a60              LDRB     r0,[r4,#9]  ; iiii
0034f6  b920              CBNZ     r0,|L1.13570|
;;;5799        {
;;;5800        cntrl_stat=600;	
0034f8  f44f7016          MOV      r0,#0x258
0034fc  8360              STRH     r0,[r4,#0x1a]
;;;5801        cntrl_stat_old=600;
0034fe  83a0              STRH     r0,[r4,#0x1c]
;;;5802        cntrl_stat_new=600;
003500  86a0              STRH     r0,[r4,#0x34]
                  |L1.13570|
;;;5803   	#ifdef UKU_TELECORE2015
;;;5804   	//cntrl_stat=0;
;;;5805   	//cntrl_stat_old=0;
;;;5806   	//cntrl_stat_new=0;
;;;5807   	#endif
;;;5808        }
;;;5809   gran(&cntrl_stat,10,1010); 
003502  4821              LDR      r0,|L1.13704|
003504  465a              MOV      r2,r11
003506  210a              MOVS     r1,#0xa
003508  301a              ADDS     r0,r0,#0x1a
00350a  f7fffffe          BL       gran
;;;5810   b1Hz_ch=0;
00350e  71e6              STRB     r6,[r4,#7]
                  |L1.13584|
;;;5811   }
003510  e8bd9ff0          POP      {r4-r12,pc}
;;;5812   #endif
                          ENDP

                  ext_drv PROC
;;;6100   //-----------------------------------------------
;;;6101   void ext_drv(void)
003514  e92d5ff0          PUSH     {r4-r12,lr}
;;;6102   {
;;;6103   char i;
;;;6104   
;;;6105   
;;;6106   for(i=0;i<NUMSK;i++)
003518  f04f0000          MOV      r0,#0
00351c  4a29              LDR      r2,|L1.13764|
;;;6107   	{
;;;6108   	#ifdef UKU_MGTS
;;;6109   	if(adc_buff_[sk_buff_RSTKM[i]]<2000)
;;;6110   	#endif
;;;6111   	#ifdef UKU_RSTKM
;;;6112   	if(adc_buff_[sk_buff_RSTKM[i]]<2000)
;;;6113   	#endif
;;;6114   	#ifdef UKU_3U
;;;6115   	if(adc_buff_[sk_buff_3U[i]]<2000)
;;;6116   	#endif
;;;6117   	#ifdef UKU_GLONASS
;;;6118   	if(adc_buff_[sk_buff_GLONASS[i]]<2000)
;;;6119   	#endif
;;;6120   	#ifdef UKU_KONTUR
;;;6121   	if(adc_buff_[sk_buff_KONTUR[i]]<2000)
;;;6122   	#endif
;;;6123   	#ifdef UKU_6U
;;;6124   	if(adc_buff_[sk_buff_6U[i]]<2000)
;;;6125   	#endif
;;;6126   	#ifdef UKU_220
;;;6127   	if(adc_buff_[sk_buff_220[i]]<2000)
;;;6128   	#endif
;;;6129   	#ifdef UKU_220_V2
;;;6130   	if(adc_buff_[sk_buff_220[i]]<2000)
;;;6131   	#endif
;;;6132   	#ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;6133   	if(adc_buff_[sk_buff_220[i]]<2000)
;;;6134   	#endif
;;;6135   	#ifdef UKU_TELECORE2015
;;;6136   	if(adc_buff_[sk_buff_TELECORE2015[i]]<2000)	 //TODO
;;;6137   	#endif
;;;6138   
;;;6139   		{
;;;6140   		if(sk_cnt[i]<10)
00351e  4b27              LDR      r3,|L1.13756|
;;;6141   			{
;;;6142   			sk_cnt[i]++;
;;;6143   			if(sk_cnt[i]>=10)
;;;6144   				{
;;;6145   				sk_stat[i]=ssON;
003520  4d27              LDR      r5,|L1.13760|
003522  f04f0a01          MOV      r10,#1
;;;6146   				}
;;;6147   			}
;;;6148   		else 
;;;6149   			{
;;;6150   			sk_cnt[i]=10;
003526  f04f0b0a          MOV      r11,#0xa
00352a  4606              MOV      r6,r0                 ;6106
00352c  f9b24000          LDRSH    r4,[r2,#0]            ;6106
003530  e052              B        |L1.13784|
                  |L1.13618|
003532  4925              LDR      r1,|L1.13768|
003534  4f25              LDR      r7,|L1.13772|
003536  5c09              LDRB     r1,[r1,r0]            ;6133
003538  f9371011          LDRSH    r1,[r7,r1,LSL #1]     ;6133
00353c  f5b16ffa          CMP      r1,#0x7d0             ;6133
003540  da0e              BGE      |L1.13664|
003542  5619              LDRSB    r1,[r3,r0]            ;6140
003544  290a              CMP      r1,#0xa               ;6140
003546  da08              BGE      |L1.13658|
003548  f1010101          ADD      r1,r1,#1              ;6142
00354c  b249              SXTB     r1,r1                 ;6142
00354e  5419              STRB     r1,[r3,r0]            ;6142
003550  290a              CMP      r1,#0xa               ;6143
003552  db3e              BLT      |L1.13778|
003554  f805a000          STRB     r10,[r5,r0]           ;6145
003558  e03b              B        |L1.13778|
                  |L1.13658|
00355a  f803b000          STRB     r11,[r3,r0]
00355e  e038              B        |L1.13778|
                  |L1.13664|
;;;6151   			}
;;;6152                  
;;;6153   		}
;;;6154   	else
;;;6155   		{
;;;6156   		if(sk_cnt[i]>0)
003560  5619              LDRSB    r1,[r3,r0]
003562  2900              CMP      r1,#0
003564  dd34              BLE      |L1.13776|
;;;6157   			{
;;;6158   			sk_cnt[i]--;
003566  f1a10101          SUB      r1,r1,#1
00356a  b249              SXTB     r1,r1
00356c  5419              STRB     r1,[r3,r0]
;;;6159   			if(sk_cnt[i]<=0)
00356e  2900              CMP      r1,#0
003570  dc2f              BGT      |L1.13778|
;;;6160   				{
;;;6161   				sk_stat[i]=ssOFF;
003572  542e              STRB     r6,[r5,r0]
003574  e02d              B        |L1.13778|
003576  0000              DCW      0x0000
                  |L1.13688|
                          DCD      PAR
                  |L1.13692|
                          DCD      NUMIST
                  |L1.13696|
                          DCD      num_necc
                  |L1.13700|
                          DCD      IZMAX
                  |L1.13704|
                          DCD      ||area_number.21||
                  |L1.13708|
                          DCD      speedChIsOn
                  |L1.13712|
                          DCD      speedChrgCurr
                  |L1.13716|
                          DCD      bat
                  |L1.13720|
                          DCD      u_necc
                  |L1.13724|
                          DCD      bps_U
                  |L1.13728|
                          DCD      bps
                  |L1.13732|
                          DCD      mess_data
                  |L1.13736|
                          DCD      load_U
                  |L1.13740|
                          DCD      USIGN
                  |L1.13744|
                          DCD      bIBAT_SMKLBR
                  |L1.13748|
                          DCD      UB0
                  |L1.13752|
                          DCD      UB20
                  |L1.13756|
                          DCD      sk_cnt
                  |L1.13760|
                          DCD      sk_stat
                  |L1.13764|
                          DCD      NUMSK
                  |L1.13768|
                          DCD      ||area_number.15||
                  |L1.13772|
                          DCD      ||.bss||+0x400
                  |L1.13776|
;;;6162   				}
;;;6163   			}
;;;6164   		else 
;;;6165   			{
;;;6166   			sk_cnt[i]=0;
0035d0  541e              STRB     r6,[r3,r0]
                  |L1.13778|
0035d2  f1000001          ADD      r0,r0,#1              ;6106
0035d6  b2c0              UXTB     r0,r0                 ;6106
                  |L1.13784|
0035d8  42a0              CMP      r0,r4                 ;6106
0035da  dbaa              BLT      |L1.13618|
;;;6167   			}
;;;6168   		}
;;;6169   	}
;;;6170   
;;;6171   for(i=0;i<NUMSK;i++)
0035dc  f04f0400          MOV      r4,#0
;;;6172   	{
;;;6173   	if(((SK_SIGN[i]==0)&&(sk_stat[i]==ssON))||((SK_SIGN[i])&&(sk_stat[i]==ssOFF)) )
;;;6174   		{
;;;6175   		if(sk_av_cnt[i]<10)
0035e0  f8df93fc          LDR      r9,|L1.14816|
;;;6176   			{
;;;6177   			sk_av_cnt[i]++;
;;;6178   			if(sk_av_cnt[i]>=10)
;;;6179   				{
;;;6180   				sk_av_stat[i]=sasON;
0035e4  4fff              LDR      r7,|L1.14820|
;;;6181   				}
;;;6182   			}
;;;6183   		else 
;;;6184   			{
;;;6185   			sk_av_cnt[i]=10;
;;;6186   			}
;;;6187   		}
;;;6188   	else
;;;6189   		{
;;;6190   		if(sk_av_cnt[i]>=0)
;;;6191   			{
;;;6192   			sk_av_cnt[i]--;
;;;6193   			if(sk_av_cnt[i]<=0)
;;;6194   				{
;;;6195   				sk_av_stat[i]=sasOFF;
;;;6196   				}
;;;6197   			}
;;;6198   		else 
;;;6199   			{
;;;6200   			sk_av_cnt[i]=0;
;;;6201   			}
;;;6202   		}
;;;6203   
;;;6204   #ifndef UKU_KONTUR
;;;6205   	if(sk_av_stat_old[i]!=sk_av_stat[i])
0035e6  f8df8400          LDR      r8,|L1.14824|
0035ea  e082              B        |L1.14066|
                  |L1.13804|
0035ec  48ff              LDR      r0,|L1.14828|
0035ee  f9300014          LDRSH    r0,[r0,r4,LSL #1]     ;6173
0035f2  b910              CBNZ     r0,|L1.13818|
0035f4  5d29              LDRB     r1,[r5,r4]            ;6173
0035f6  2901              CMP      r1,#1                 ;6173
0035f8  d00f              BEQ      |L1.13850|
                  |L1.13818|
0035fa  b108              CBZ      r0,|L1.13824|
0035fc  5d28              LDRB     r0,[r5,r4]            ;6173
0035fe  b160              CBZ      r0,|L1.13850|
                  |L1.13824|
003600  f9190004          LDRSB    r0,[r9,r4]            ;6190
003604  2800              CMP      r0,#0                 ;6190
003606  db19              BLT      |L1.13884|
003608  f1a00001          SUB      r0,r0,#1              ;6192
00360c  b240              SXTB     r0,r0                 ;6192
00360e  f8090004          STRB     r0,[r9,r4]            ;6192
003612  2800              CMP      r0,#0                 ;6193
003614  dc14              BGT      |L1.13888|
003616  553e              STRB     r6,[r7,r4]            ;6195
003618  e012              B        |L1.13888|
                  |L1.13850|
00361a  f9190004          LDRSB    r0,[r9,r4]            ;6175
00361e  280a              CMP      r0,#0xa               ;6175
003620  da09              BGE      |L1.13878|
003622  f1000001          ADD      r0,r0,#1              ;6177
003626  b240              SXTB     r0,r0                 ;6177
003628  f8090004          STRB     r0,[r9,r4]            ;6177
00362c  280a              CMP      r0,#0xa               ;6178
00362e  db07              BLT      |L1.13888|
003630  f807a004          STRB     r10,[r7,r4]           ;6180
003634  e004              B        |L1.13888|
                  |L1.13878|
003636  f809b004          STRB     r11,[r9,r4]           ;6185
00363a  e001              B        |L1.13888|
                  |L1.13884|
00363c  f8096004          STRB     r6,[r9,r4]            ;6200
                  |L1.13888|
003640  f8181004          LDRB     r1,[r8,r4]
003644  5d38              LDRB     r0,[r7,r4]
003646  4281              CMP      r1,r0
003648  d04d              BEQ      |L1.14054|
;;;6206   		{
;;;6207   		plazma_sk++;
00364a  4ae9              LDR      r2,|L1.14832|
00364c  8e51              LDRH     r1,[r2,#0x32]  ; plazma_sk
00364e  f1010101          ADD      r1,r1,#1
003652  8651              STRH     r1,[r2,#0x32]
;;;6208   		if(sk_av_stat[i]==sasON)
003654  2801              CMP      r0,#1
003656  d007              BEQ      |L1.13928|
;;;6209   			{
;;;6210   			if(i==0)snmp_trap_send("SK #1 Alarm",15,1,1);
;;;6211   			else if(i==1)snmp_trap_send("SK #2 Alarm",15,2,1);
;;;6212   			else if(i==2)snmp_trap_send("SK #3 Alarm",15,3,1);
;;;6213   			else if(i==3)snmp_trap_send("SK #4 Alarm",15,4,1);
;;;6214   			}
;;;6215   		else 
;;;6216   			{
;;;6217   			if(i==0)snmp_trap_send("SK #1 Alarm is off",15,1,0);
003658  b354              CBZ      r4,|L1.14000|
;;;6218   			else if(i==1)snmp_trap_send("SK #2 Alarm is off",15,2,0);
00365a  2c01              CMP      r4,#1
00365c  d02f              BEQ      |L1.14014|
;;;6219   			else if(i==2)snmp_trap_send("SK #3 Alarm is off",15,3,0);
00365e  2c02              CMP      r4,#2
003660  d034              BEQ      |L1.14028|
;;;6220   			else if(i==3)snmp_trap_send("SK #4 Alarm is off",15,4,0);
003662  2c03              CMP      r4,#3
003664  d039              BEQ      |L1.14042|
003666  e03e              B        |L1.14054|
                  |L1.13928|
003668  b134              CBZ      r4,|L1.13944|
00366a  2c01              CMP      r4,#1                 ;6211
00366c  d00b              BEQ      |L1.13958|
00366e  2c02              CMP      r4,#2                 ;6212
003670  d010              BEQ      |L1.13972|
003672  2c03              CMP      r4,#3                 ;6213
003674  d015              BEQ      |L1.13986|
003676  e036              B        |L1.14054|
                  |L1.13944|
003678  2301              MOVS     r3,#1                 ;6210
00367a  461a              MOV      r2,r3                 ;6210
00367c  210f              MOVS     r1,#0xf               ;6210
00367e  a0dd              ADR      r0,|L1.14836|
003680  f7fffffe          BL       snmp_trap_send
003684  e02f              B        |L1.14054|
                  |L1.13958|
003686  2301              MOVS     r3,#1                 ;6211
003688  2202              MOVS     r2,#2                 ;6211
00368a  210f              MOVS     r1,#0xf               ;6211
00368c  a0dc              ADR      r0,|L1.14848|
00368e  f7fffffe          BL       snmp_trap_send
003692  e028              B        |L1.14054|
                  |L1.13972|
003694  2301              MOVS     r3,#1                 ;6212
003696  2203              MOVS     r2,#3                 ;6212
003698  210f              MOVS     r1,#0xf               ;6212
00369a  a0dc              ADR      r0,|L1.14860|
00369c  f7fffffe          BL       snmp_trap_send
0036a0  e021              B        |L1.14054|
                  |L1.13986|
0036a2  2301              MOVS     r3,#1                 ;6213
0036a4  2204              MOVS     r2,#4                 ;6213
0036a6  210f              MOVS     r1,#0xf               ;6213
0036a8  a0db              ADR      r0,|L1.14872|
0036aa  f7fffffe          BL       snmp_trap_send
0036ae  e01a              B        |L1.14054|
                  |L1.14000|
0036b0  2300              MOVS     r3,#0                 ;6217
0036b2  2201              MOVS     r2,#1                 ;6217
0036b4  210f              MOVS     r1,#0xf               ;6217
0036b6  a0db              ADR      r0,|L1.14884|
0036b8  f7fffffe          BL       snmp_trap_send
0036bc  e013              B        |L1.14054|
                  |L1.14014|
0036be  2300              MOVS     r3,#0                 ;6218
0036c0  2202              MOVS     r2,#2                 ;6218
0036c2  210f              MOVS     r1,#0xf               ;6218
0036c4  a0dc              ADR      r0,|L1.14904|
0036c6  f7fffffe          BL       snmp_trap_send
0036ca  e00c              B        |L1.14054|
                  |L1.14028|
0036cc  2300              MOVS     r3,#0                 ;6219
0036ce  2203              MOVS     r2,#3                 ;6219
0036d0  210f              MOVS     r1,#0xf               ;6219
0036d2  a0de              ADR      r0,|L1.14924|
0036d4  f7fffffe          BL       snmp_trap_send
0036d8  e005              B        |L1.14054|
                  |L1.14042|
0036da  2300              MOVS     r3,#0
0036dc  2204              MOVS     r2,#4
0036de  210f              MOVS     r1,#0xf
0036e0  a0df              ADR      r0,|L1.14944|
0036e2  f7fffffe          BL       snmp_trap_send
                  |L1.14054|
;;;6221   			}
;;;6222   	 	}
;;;6223   #endif
;;;6224   
;;;6225   #ifdef UKU_KONTUR
;;;6226   	if(sk_av_stat_old[i]!=sk_av_stat[i])
;;;6227   		{
;;;6228   		plazma_sk++;
;;;6229   		if(sk_av_stat[i]==sasON)
;;;6230   			{
;;;6231   			if(i==0)snmp_trap_send("Door is opened",15,1,1);
;;;6232   			else if(i==1)snmp_trap_send("Smoke Alarm",15,2,1);
;;;6233   			else if(i==2)snmp_trap_send("Shock Sensor Alarm",15,3,1);
;;;6234   			else if(i==3)snmp_trap_send("SK #4 Alarm",15,4,1);
;;;6235   			}
;;;6236   		else 
;;;6237   			{
;;;6238   			if(i==0)snmp_trap_send("Door is closed",15,1,0);
;;;6239   			else if(i==1)snmp_trap_send("Smoke Alarm is off",15,2,0);
;;;6240   			else if(i==2)snmp_trap_send("Shock Sensor Alarm is off",15,3,0);
;;;6241   			else if(i==3)snmp_trap_send("SK #4 Alarm is off",15,4,0);
;;;6242   			}
;;;6243   	 	}
;;;6244   #endif
;;;6245   	sk_av_stat_old[i]=sk_av_stat[i];
0036e6  5d38              LDRB     r0,[r7,r4]
0036e8  f8080004          STRB     r0,[r8,r4]
0036ec  f1040401          ADD      r4,r4,#1              ;6171
0036f0  b2e4              UXTB     r4,r4                 ;6171
                  |L1.14066|
0036f2  48e0              LDR      r0,|L1.14964|
0036f4  f9b00000          LDRSH    r0,[r0,#0]            ;6171  ; NUMSK
0036f8  4284              CMP      r4,r0                 ;6171
0036fa  f6ffaf77          BLT      |L1.13804|
;;;6246   	}
;;;6247   }
0036fe  e707              B        |L1.13584|
;;;6248   
                          ENDP

                  zar_superviser_start PROC
;;;6285   //-----------------------------------------------
;;;6286   void zar_superviser_start(void)
003700  4add              LDR      r2,|L1.14968|
;;;6287   {
;;;6288   sign_U[0]=1;
003702  f04f0001          MOV      r0,#1
003706  7010              STRB     r0,[r2,#0]
;;;6289   sign_I[0]=1;
003708  49dc              LDR      r1,|L1.14972|
00370a  7008              STRB     r0,[r1,#0]
;;;6290   sign_U[1]=1;
00370c  7050              STRB     r0,[r2,#1]
;;;6291   sign_I[1]=1;
00370e  7048              STRB     r0,[r1,#1]
;;;6292   
;;;6293   }
003710  4770              BX       lr
;;;6294   
                          ENDP

                  zar_superviser_drv PROC
;;;6250   //-----------------------------------------------
;;;6251   void zar_superviser_drv(void)
003712  e92d5ff0          PUSH     {r4-r12,lr}
;;;6252   {
;;;6253   
;;;6254   if(((bat[0]._Ub>u_necc_up) || (bat[0]._Ub<u_necc_dn))&&(main_kb_cnt<((TBAT*60)-30))&&(main_kb_cnt>((TBAT*60)-150))) sign_U[0]=0;
003716  48db              LDR      r0,|L1.14980|
003718  f8df936c          LDR      r9,|L1.14984|
00371c  f8df8360          LDR      r8,|L1.14976|
003720  f9b0c000          LDRSH    r12,[r0,#0]  ; u_necc_up
003724  f9b90000          LDRSH    r0,[r9,#0]
003728  4cb1              LDR      r4,|L1.14832|
00372a  ebc01100          RSB      r1,r0,r0,LSL #4
00372e  f9b87002          LDRSH    r7,[r8,#2]  ; bat
003732  f06f0a1d          MVN      r10,#0x1d
003736  f06f0b95          MVN      r11,#0x95
00373a  2500              MOVS     r5,#0
00373c  4ece              LDR      r6,|L1.14968|
00373e  f9b4003e          LDRSH    r0,[r4,#0x3e]
003742  eb0a0281          ADD      r2,r10,r1,LSL #2
003746  eb0b0381          ADD      r3,r11,r1,LSL #2
00374a  4567              CMP      r7,r12
00374c  dc05              BGT      |L1.14170|
00374e  f8dfc33c          LDR      r12,|L1.14988|
003752  f9bcc000          LDRSH    r12,[r12,#0]  ; u_necc_dn
003756  4567              CMP      r7,r12
003758  da04              BGE      |L1.14180|
                  |L1.14170|
00375a  4282              CMP      r2,r0
00375c  dd02              BLE      |L1.14180|
00375e  4283              CMP      r3,r0
003760  da00              BGE      |L1.14180|
003762  7035              STRB     r5,[r6,#0]
                  |L1.14180|
;;;6255   
;;;6256   if(((bat[0]._Ib>(2*IKB)) || (bat[0]._Ib<(-IKB*2))) &&(main_kb_cnt<((TBAT*60)-30))&&(main_kb_cnt>((TBAT*60)-150))) sign_I[0]=0;
003764  4fca              LDR      r7,|L1.14992|
003766  f9b8c008          LDRSH    r12,[r8,#8]  ; bat
00376a  f9b7e000          LDRSH    lr,[r7,#0]  ; IKB
00376e  4fc3              LDR      r7,|L1.14972|
003770  ebbc0f4e          CMP      r12,lr,LSL #1
003774  dc04              BGT      |L1.14208|
003776  f1ce0e00          RSB      lr,lr,#0
00377a  ebbc0f4e          CMP      r12,lr,LSL #1
00377e  da04              BGE      |L1.14218|
                  |L1.14208|
003780  4282              CMP      r2,r0
003782  dd02              BLE      |L1.14218|
003784  4283              CMP      r3,r0
003786  da00              BGE      |L1.14218|
003788  703d              STRB     r5,[r7,#0]
                  |L1.14218|
;;;6257   																 
;;;6258   if((main_kb_cnt==((TBAT*60)-10)) &&(spc_stat==spcOFF))
00378a  f06f0209          MVN      r2,#9
00378e  eb020181          ADD      r1,r2,r1,LSL #2
003792  4281              CMP      r1,r0
003794  d120              BNE      |L1.14296|
003796  7ce0              LDRB     r0,[r4,#0x13]  ; spc_stat
003798  b9f0              CBNZ     r0,|L1.14296|
;;;6259   	{
;;;6260   	if((sign_U[0]==1) && (sign_I[0]==1) && (lc640_read_int(EE_BAT1_ZAR_CNT)!=BAT_C_REAL[0]) && (NUMBAT) && (!(bat[0]._av&1)))
00379a  7830              LDRB     r0,[r6,#0]  ; sign_U
00379c  2801              CMP      r0,#1
00379e  d11b              BNE      |L1.14296|
0037a0  7838              LDRB     r0,[r7,#0]  ; sign_I
0037a2  2801              CMP      r0,#1
0037a4  d118              BNE      |L1.14296|
0037a6  f44f70d6          MOV      r0,#0x1ac
0037aa  f7fffffe          BL       lc640_read_int
0037ae  49b9              LDR      r1,|L1.14996|
0037b0  f9b11000          LDRSH    r1,[r1,#0]  ; BAT_C_REAL
0037b4  4288              CMP      r0,r1
0037b6  d00f              BEQ      |L1.14296|
0037b8  48b7              LDR      r0,|L1.15000|
0037ba  8800              LDRH     r0,[r0,#0]  ; NUMBAT
0037bc  b160              CBZ      r0,|L1.14296|
0037be  f898003d          LDRB     r0,[r8,#0x3d]  ; bat
0037c2  07c0              LSLS     r0,r0,#31
0037c4  d108              BNE      |L1.14296|
;;;6261   		{
;;;6262   		lc640_write_int(EE_BAT1_ZAR_CNT,BAT_C_REAL[0]);
0037c6  f44f70d6          MOV      r0,#0x1ac
0037ca  f7fffffe          BL       lc640_write_int
;;;6263   		superviser_cnt++;
0037ce  48b3              LDR      r0,|L1.15004|
0037d0  7801              LDRB     r1,[r0,#0]  ; superviser_cnt
0037d2  f1010101          ADD      r1,r1,#1
0037d6  7001              STRB     r1,[r0,#0]
                  |L1.14296|
;;;6264   		}
;;;6265   	
;;;6266   	}
;;;6267   
;;;6268   if(((bat[0]._Ub>u_necc_up) || (bat[1]._Ub<u_necc_dn))&&(main_kb_cnt<((TBAT*60)-30))&&(main_kb_cnt>((TBAT*60)-150))) sign_U[1]=0;
0037d8  48aa              LDR      r0,|L1.14980|
0037da  f9b81002          LDRSH    r1,[r8,#2]  ; bat
0037de  f9b00000          LDRSH    r0,[r0,#0]  ; u_necc_up
0037e2  4281              CMP      r1,r0
0037e4  dc06              BGT      |L1.14324|
0037e6  48a9              LDR      r0,|L1.14988|
0037e8  f9b8104e          LDRSH    r1,[r8,#0x4e]  ; bat
0037ec  f9b00000          LDRSH    r0,[r0,#0]  ; u_necc_dn
0037f0  4281              CMP      r1,r0
0037f2  da0e              BGE      |L1.14354|
                  |L1.14324|
0037f4  f9b90000          LDRSH    r0,[r9,#0]  ; TBAT
0037f8  f9b4103e          LDRSH    r1,[r4,#0x3e]  ; main_kb_cnt
0037fc  ebc01000          RSB      r0,r0,r0,LSL #4
003800  eb0a0280          ADD      r2,r10,r0,LSL #2
003804  428a              CMP      r2,r1
003806  dd04              BLE      |L1.14354|
003808  eb0b0080          ADD      r0,r11,r0,LSL #2
00380c  4288              CMP      r0,r1
00380e  da00              BGE      |L1.14354|
003810  7075              STRB     r5,[r6,#1]
                  |L1.14354|
;;;6269   
;;;6270   if(((bat[1]._Ib>(2*IKB)) || (bat[1]._Ib<(-IKB*2))) &&(main_kb_cnt<((TBAT*60)-30))&&(main_kb_cnt>((TBAT*60)-150))) sign_I[1]=0;
003812  499f              LDR      r1,|L1.14992|
003814  f9b80054          LDRSH    r0,[r8,#0x54]  ; bat
003818  f9b11000          LDRSH    r1,[r1,#0]  ; IKB
00381c  ebb00f41          CMP      r0,r1,LSL #1
003820  dc03              BGT      |L1.14378|
003822  4249              RSBS     r1,r1,#0
003824  ebb00f41          CMP      r0,r1,LSL #1
003828  da0e              BGE      |L1.14408|
                  |L1.14378|
00382a  f9b90000          LDRSH    r0,[r9,#0]  ; TBAT
00382e  f9b4103e          LDRSH    r1,[r4,#0x3e]  ; main_kb_cnt
003832  ebc01000          RSB      r0,r0,r0,LSL #4
003836  eb0a0280          ADD      r2,r10,r0,LSL #2
00383a  428a              CMP      r2,r1
00383c  dd04              BLE      |L1.14408|
00383e  eb0b0080          ADD      r0,r11,r0,LSL #2
003842  4288              CMP      r0,r1
003844  da00              BGE      |L1.14408|
003846  707d              STRB     r5,[r7,#1]
                  |L1.14408|
;;;6271   																 
;;;6272   if((main_kb_cnt==((TBAT*60)-10)) &&(spc_stat==spcOFF))
003848  f9b90000          LDRSH    r0,[r9,#0]  ; TBAT
00384c  ebc01100          RSB      r1,r0,r0,LSL #4
003850  f06f0009          MVN      r0,#9
003854  eb000081          ADD      r0,r0,r1,LSL #2
003858  f9b4103e          LDRSH    r1,[r4,#0x3e]  ; main_kb_cnt
00385c  4288              CMP      r0,r1
00385e  d121              BNE      |L1.14500|
003860  7ce0              LDRB     r0,[r4,#0x13]  ; spc_stat
003862  b9f8              CBNZ     r0,|L1.14500|
;;;6273   	{
;;;6274   	if((sign_U[1]==1) && (sign_I[1]==1) && (lc640_read_int(EE_BAT2_ZAR_CNT)!=BAT_C_REAL[1]) && (NUMBAT==2) && (!(bat[1]._av&1)))
003864  7870              LDRB     r0,[r6,#1]  ; sign_U
003866  2801              CMP      r0,#1
003868  d11c              BNE      |L1.14500|
00386a  7878              LDRB     r0,[r7,#1]  ; sign_I
00386c  2801              CMP      r0,#1
00386e  d119              BNE      |L1.14500|
003870  f44f75e5          MOV      r5,#0x1ca
003874  4628              MOV      r0,r5
003876  f7fffffe          BL       lc640_read_int
00387a  4986              LDR      r1,|L1.14996|
00387c  f9b11002          LDRSH    r1,[r1,#2]  ; BAT_C_REAL
003880  4288              CMP      r0,r1
003882  d00f              BEQ      |L1.14500|
003884  4884              LDR      r0,|L1.15000|
003886  8800              LDRH     r0,[r0,#0]  ; NUMBAT
003888  2802              CMP      r0,#2
00388a  d10b              BNE      |L1.14500|
00388c  f8980089          LDRB     r0,[r8,#0x89]  ; bat
003890  07c0              LSLS     r0,r0,#31
003892  d107              BNE      |L1.14500|
;;;6275   		{
;;;6276   		lc640_write_int(EE_BAT2_ZAR_CNT,BAT_C_REAL[1]);
003894  4628              MOV      r0,r5
003896  f7fffffe          BL       lc640_write_int
;;;6277   		superviser_cnt++;
00389a  4880              LDR      r0,|L1.15004|
00389c  7801              LDRB     r1,[r0,#0]  ; superviser_cnt
00389e  f1010101          ADD      r1,r1,#1
0038a2  7001              STRB     r1,[r0,#0]
                  |L1.14500|
;;;6278   		}
;;;6279   	
;;;6280   	}
;;;6281   
;;;6282   if(main_kb_cnt==((TBAT*60)-2)) zar_superviser_start();
0038a4  f9b90000          LDRSH    r0,[r9,#0]  ; TBAT
0038a8  f06f0101          MVN      r1,#1
0038ac  ebc01000          RSB      r0,r0,r0,LSL #4
0038b0  eb010080          ADD      r0,r1,r0,LSL #2
0038b4  f9b4103e          LDRSH    r1,[r4,#0x3e]  ; main_kb_cnt
0038b8  4288              CMP      r0,r1
0038ba  d102              BNE      |L1.14530|
0038bc  e8bd5ff0          POP      {r4-r12,lr}
0038c0  e7fe              B        zar_superviser_start
                  |L1.14530|
;;;6283   }
0038c2  e625              B        |L1.13584|
;;;6284   
                          ENDP

                  npn_hndl PROC
;;;6295   //-----------------------------------------------
;;;6296   void npn_hndl(void)
0038c4  e92d03f0          PUSH     {r4-r9}
;;;6297   {
;;;6298   if(NPN_OUT!=npnoOFF)
0038c8  4875              LDR      r0,|L1.15008|
;;;6299   	{
;;;6300   /*	if(NPN_SIGN==npnsAVNET)
;;;6301   		{
;;;6302   		if(net_av==1)
;;;6303   			{
;;;6304   			if(npn_tz_cnt<TZNPN)
;;;6305   				{
;;;6306   				npn_tz_cnt++;
;;;6307   				if(npn_tz_cnt==TZNPN)
;;;6308   					{
;;;6309   					npn_stat=npnsOFF;
;;;6310   					}
;;;6311   				}
;;;6312   			}
;;;6313   		else
;;;6314   			{
;;;6315   			if(npn_tz_cnt)
;;;6316   				{
;;;6317   				npn_tz_cnt--;
;;;6318   				if(npn_tz_cnt==0)
;;;6319   					{
;;;6320   					npn_stat=npnsON;
;;;6321   					}
;;;6322   				}
;;;6323   			}
;;;6324   		}*/
;;;6325   /*	if(NPN_SIGN==npnsULOAD)
;;;6326   		{
;;;6327   		if(load_U<UONPN)
;;;6328   			{
;;;6329   			if(npn_tz_cnt<TZNPN)
;;;6330   				{
;;;6331   				npn_tz_cnt++;
;;;6332   				if(npn_tz_cnt==TZNPN)
;;;6333   					{
;;;6334   					npn_stat=npnsOFF;
;;;6335   					}
;;;6336   				}
;;;6337   			}
;;;6338   		else if(load_U>UVNPN)
;;;6339   			{
;;;6340   			if(npn_tz_cnt)
;;;6341   				{
;;;6342   				npn_tz_cnt--;
;;;6343   				if(npn_tz_cnt==0)
;;;6344   					{
;;;6345   					npn_stat=npnsON;
;;;6346   					}
;;;6347   				}
;;;6348   			}
;;;6349   		}*/
;;;6350   
;;;6351   	if((load_U<UONPN)&&((net_Ua<UMN)||(net_Ub<UMN)||(net_Uc<UMN)))
;;;6352   		{
;;;6353   		if(npn_tz_cnt<TZNPN)
0038ca  4f76              LDR      r7,|L1.15012|
;;;6354   			{
;;;6355   			npn_tz_cnt++;
;;;6356   			if(npn_tz_cnt==TZNPN)
;;;6357   				{
;;;6358   				npn_stat=npnsOFF;
0038cc  4e76              LDR      r6,|L1.15016|
0038ce  7800              LDRB     r0,[r0,#0]            ;6298  ; NPN_OUT
0038d0  f04f0c00          MOV      r12,#0                ;6298
;;;6359   				}
;;;6360   			}
;;;6361   		}
;;;6362   	else if((load_U>UVNPN)&&(net_Ua>UMN)&&(net_Ub>UMN)&&(net_Uc>UMN))
;;;6363   		{
;;;6364   		if(npn_tz_cnt)
;;;6365   			{
;;;6366   			npn_tz_cnt--;
;;;6367   			if(npn_tz_cnt==0)
;;;6368   				{
;;;6369   				npn_stat=npnsON;
0038d4  f04f0801          MOV      r8,#1
0038d8  b3e8              CBZ      r0,|L1.14678|
0038da  4874              LDR      r0,|L1.15020|
0038dc  4639              MOV      r1,r7                 ;6353
0038de  f9b05000          LDRSH    r5,[r0,#0]            ;6351  ; load_U
0038e2  4873              LDR      r0,|L1.15024|
0038e4  f9b11000          LDRSH    r1,[r1,#0]            ;6353
0038e8  f9b09000          LDRSH    r9,[r0,#0]            ;6351  ; UONPN
0038ec  4871              LDR      r0,|L1.15028|
0038ee  454d              CMP      r5,r9                 ;6351
0038f0  f9b02000          LDRSH    r2,[r0,#0]            ;6351
0038f4  4870              LDR      r0,|L1.15032|
0038f6  f9b03000          LDRSH    r3,[r0,#0]            ;6351
0038fa  4870              LDR      r0,|L1.15036|
0038fc  f9b04000          LDRSH    r4,[r0,#0]            ;6351
003900  486f              LDR      r0,|L1.15040|
003902  f9b00000          LDRSH    r0,[r0,#0]            ;6351
003906  da13              BGE      |L1.14640|
003908  4282              CMP      r2,r0                 ;6351
00390a  db03              BLT      |L1.14612|
00390c  4283              CMP      r3,r0                 ;6351
00390e  db01              BLT      |L1.14612|
003910  4284              CMP      r4,r0                 ;6351
003912  da0d              BGE      |L1.14640|
                  |L1.14612|
003914  486b              LDR      r0,|L1.15044|
003916  f9b02000          LDRSH    r2,[r0,#0]            ;6353  ; TZNPN
00391a  4291              CMP      r1,r2                 ;6353
00391c  da23              BGE      |L1.14694|
00391e  f1010101          ADD      r1,r1,#1              ;6355
003922  b208              SXTH     r0,r1                 ;6355
003924  8038              STRH     r0,[r7,#0]            ;6355
003926  4290              CMP      r0,r2                 ;6356
003928  d11d              BNE      |L1.14694|
00392a  f886c000          STRB     r12,[r6,#0]           ;6358
00392e  e01a              B        |L1.14694|
                  |L1.14640|
003930  f8dfc194          LDR      r12,|L1.15048|
003934  f9bcc000          LDRSH    r12,[r12,#0]          ;6362  ; UVNPN
003938  4565              CMP      r5,r12                ;6362
00393a  dd14              BLE      |L1.14694|
00393c  4282              CMP      r2,r0                 ;6362
00393e  dd12              BLE      |L1.14694|
003940  4283              CMP      r3,r0                 ;6362
003942  dd10              BLE      |L1.14694|
003944  4284              CMP      r4,r0                 ;6362
003946  dd0e              BLE      |L1.14694|
003948  b169              CBZ      r1,|L1.14694|
00394a  f1a10101          SUB      r1,r1,#1              ;6366
00394e  b208              SXTH     r0,r1                 ;6366
003950  8038              STRH     r0,[r7,#0]            ;6366
003952  b940              CBNZ     r0,|L1.14694|
003954  e000              B        |L1.14680|
                  |L1.14678|
003956  e002              B        |L1.14686|
                  |L1.14680|
003958  f8868000          STRB     r8,[r6,#0]
00395c  e003              B        |L1.14694|
                  |L1.14686|
;;;6370   				}
;;;6371   			}
;;;6372   		}
;;;6373   	}
;;;6374   else
;;;6375   	{
;;;6376   	npn_tz_cnt=0;
00395e  f8a7c000          STRH     r12,[r7,#0]
;;;6377   	npn_stat=npnsON;
003962  f8868000          STRB     r8,[r6,#0]
                  |L1.14694|
;;;6378   	}
;;;6379   
;;;6380   if(npn_stat==npnsOFF) mess_send(MESS2RELE_HNDL,PARAM_RELE_NPN,1,15);
003966  7830              LDRB     r0,[r6,#0]  ; npn_stat
003968  2800              CMP      r0,#0
00396a  d107              BNE      |L1.14716|
00396c  e8bd03f0          POP      {r4-r9}
003970  230f              MOVS     r3,#0xf
003972  2201              MOVS     r2,#1
003974  216e              MOVS     r1,#0x6e
003976  20d2              MOVS     r0,#0xd2
003978  f7ffbffe          B.W      mess_send
                  |L1.14716|
;;;6381   
;;;6382   
;;;6383   }
00397c  e8bd03f0          POP      {r4-r9}
003980  4770              BX       lr
;;;6384   
                          ENDP

                  speedChargeHndl PROC
;;;6385   //-----------------------------------------------
;;;6386   void speedChargeHndl(void)
003982  b5f8              PUSH     {r3-r7,lr}
;;;6387   {
;;;6388   if(speedChIsOn)
003984  4f51              LDR      r7,|L1.15052|
;;;6389   	{
;;;6390   	speedChTimeCnt++;
;;;6391   	if(speedChTimeCnt>=((signed long)speedChrgTimeInHour*3600L))
;;;6392   		{
;;;6393   		speedChIsOn=0;
;;;6394   		}
;;;6395   	if(speedChrgBlckStat)
003986  4d52              LDR      r5,|L1.15056|
003988  2400              MOVS     r4,#0                 ;6388
00398a  8838              LDRH     r0,[r7,#0]            ;6388  ; speedChIsOn
00398c  b198              CBZ      r0,|L1.14774|
00398e  4a51              LDR      r2,|L1.15060|
003990  6811              LDR      r1,[r2,#0]            ;6390  ; speedChTimeCnt
003992  f1010101          ADD      r1,r1,#1              ;6390
003996  6011              STR      r1,[r2,#0]            ;6390  ; speedChTimeCnt
003998  484f              LDR      r0,|L1.15064|
00399a  f9b00000          LDRSH    r0,[r0,#0]            ;6391  ; speedChrgTimeInHour
00399e  ebc01340          RSB      r3,r0,r0,LSL #5       ;6391
0039a2  ebc32000          RSB      r0,r3,r0,LSL #8       ;6391
0039a6  ebb11f00          CMP      r1,r0,LSL #4          ;6391
0039aa  db00              BLT      |L1.14766|
0039ac  803c              STRH     r4,[r7,#0]            ;6393
                  |L1.14766|
0039ae  8828              LDRH     r0,[r5,#0]  ; speedChrgBlckStat
0039b0  b108              CBZ      r0,|L1.14774|
;;;6396   		{
;;;6397   		speedChIsOn=0;
0039b2  803c              STRH     r4,[r7,#0]
;;;6398   		speedChTimeCnt=0;
0039b4  6014              STR      r4,[r2,#0]  ; speedChTimeCnt
                  |L1.14774|
;;;6399   		}
;;;6400   	}
;;;6401   
;;;6402   
;;;6403   
;;;6404   if(speedChrgAvtEn)
0039b6  4849              LDR      r0,|L1.15068|
;;;6405   	{
;;;6406   	if(!speedChIsOn)
;;;6407   		{
;;;6408   		if((load_U<u_necc)&&((u_necc-load_U)>speedChrgDU)&&(abs(Ib_ips_termokompensat/10-IZMAX)<5)&&(!speedChrgBlckStat))
;;;6409   			{
;;;6410   			speedChIsOn=1;
0039b8  2601              MOVS     r6,#1
0039ba  8800              LDRH     r0,[r0,#0]            ;6404  ; speedChrgAvtEn
0039bc  b178              CBZ      r0,|L1.14814|
0039be  8838              LDRH     r0,[r7,#0]            ;6406  ; speedChIsOn
0039c0  b968              CBNZ     r0,|L1.14814|
0039c2  483a              LDR      r0,|L1.15020|
0039c4  4946              LDR      r1,|L1.15072|
0039c6  f9b00000          LDRSH    r0,[r0,#0]            ;6408  ; load_U
0039ca  f9b11000          LDRSH    r1,[r1,#0]            ;6408  ; u_necc
0039ce  4288              CMP      r0,r1                 ;6408
0039d0  da05              BGE      |L1.14814|
0039d2  1a08              SUBS     r0,r1,r0              ;6408
0039d4  4943              LDR      r1,|L1.15076|
0039d6  f9b11000          LDRSH    r1,[r1,#0]            ;6408  ; speedChrgDU
0039da  4288              CMP      r0,r1                 ;6408
0039dc  e084              B        |L1.15080|
                  |L1.14814|
0039de  e095              B        |L1.15116|
                  |L1.14816|
                          DCD      sk_av_cnt
                  |L1.14820|
                          DCD      sk_av_stat
                  |L1.14824|
                          DCD      sk_av_stat_old
                  |L1.14828|
                          DCD      SK_SIGN
                  |L1.14832|
                          DCD      ||area_number.21||
                  |L1.14836|
0039f4  534b2023          DCB      "SK #1 Alarm",0
0039f8  3120416c
0039fc  61726d00
                  |L1.14848|
003a00  534b2023          DCB      "SK #2 Alarm",0
003a04  3220416c
003a08  61726d00
                  |L1.14860|
003a0c  534b2023          DCB      "SK #3 Alarm",0
003a10  3320416c
003a14  61726d00
                  |L1.14872|
003a18  534b2023          DCB      "SK #4 Alarm",0
003a1c  3420416c
003a20  61726d00
                  |L1.14884|
003a24  534b2023          DCB      "SK #1 Alarm is off",0
003a28  3120416c
003a2c  61726d20
003a30  6973206f
003a34  666600  
003a37  00                DCB      0
                  |L1.14904|
003a38  534b2023          DCB      "SK #2 Alarm is off",0
003a3c  3220416c
003a40  61726d20
003a44  6973206f
003a48  666600  
003a4b  00                DCB      0
                  |L1.14924|
003a4c  534b2023          DCB      "SK #3 Alarm is off",0
003a50  3320416c
003a54  61726d20
003a58  6973206f
003a5c  666600  
003a5f  00                DCB      0
                  |L1.14944|
003a60  534b2023          DCB      "SK #4 Alarm is off",0
003a64  3420416c
003a68  61726d20
003a6c  6973206f
003a70  666600  
003a73  00                DCB      0
                  |L1.14964|
                          DCD      NUMSK
                  |L1.14968|
                          DCD      sign_U
                  |L1.14972|
                          DCD      sign_I
                  |L1.14976|
                          DCD      bat
                  |L1.14980|
                          DCD      u_necc_up
                  |L1.14984|
                          DCD      TBAT
                  |L1.14988|
                          DCD      u_necc_dn
                  |L1.14992|
                          DCD      IKB
                  |L1.14996|
                          DCD      BAT_C_REAL
                  |L1.15000|
                          DCD      NUMBAT
                  |L1.15004|
                          DCD      superviser_cnt
                  |L1.15008|
                          DCD      NPN_OUT
                  |L1.15012|
                          DCD      npn_tz_cnt
                  |L1.15016|
                          DCD      npn_stat
                  |L1.15020|
                          DCD      load_U
                  |L1.15024|
                          DCD      UONPN
                  |L1.15028|
                          DCD      net_Ua
                  |L1.15032|
                          DCD      net_Ub
                  |L1.15036|
                          DCD      net_Uc
                  |L1.15040|
                          DCD      UMN
                  |L1.15044|
                          DCD      TZNPN
                  |L1.15048|
                          DCD      UVNPN
                  |L1.15052|
                          DCD      speedChIsOn
                  |L1.15056|
                          DCD      speedChrgBlckStat
                  |L1.15060|
                          DCD      speedChTimeCnt
                  |L1.15064|
                          DCD      speedChrgTimeInHour
                  |L1.15068|
                          DCD      speedChrgAvtEn
                  |L1.15072|
                          DCD      u_necc
                  |L1.15076|
                          DCD      speedChrgDU
                  |L1.15080|
003ae8  dd10              BLE      |L1.15116|
003aea  48ff              LDR      r0,|L1.16104|
003aec  210a              MOVS     r1,#0xa               ;6408
003aee  f9b00000          LDRSH    r0,[r0,#0]            ;6408  ; Ib_ips_termokompensat
003af2  fb90f0f1          SDIV     r0,r0,r1              ;6408
003af6  49fd              LDR      r1,|L1.16108|
003af8  8809              LDRH     r1,[r1,#0]            ;6408  ; IZMAX
003afa  1a40              SUBS     r0,r0,r1              ;6408
003afc  b200              SXTH     r0,r0                 ;6408
003afe  f7fffffe          BL       abs
003b02  2805              CMP      r0,#5                 ;6408
003b04  da02              BGE      |L1.15116|
003b06  8828              LDRH     r0,[r5,#0]            ;6408  ; speedChrgBlckStat
003b08  b900              CBNZ     r0,|L1.15116|
003b0a  803e              STRH     r6,[r7,#0]
                  |L1.15116|
;;;6411   			}
;;;6412   		}
;;;6413   	}
;;;6414   
;;;6415   
;;;6416   
;;;6417   if((speedChrgBlckSrc!=1)&&(speedChrgBlckSrc!=2)) speedChrgBlckStat=0;
003b0c  48f8              LDR      r0,|L1.16112|
003b0e  f9b00000          LDRSH    r0,[r0,#0]  ; speedChrgBlckSrc
003b12  2801              CMP      r0,#1
003b14  d003              BEQ      |L1.15134|
003b16  2802              CMP      r0,#2
003b18  d001              BEQ      |L1.15134|
003b1a  802c              STRH     r4,[r5,#0]
003b1c  e026              B        |L1.15212|
                  |L1.15134|
;;;6418   else
;;;6419   	{
;;;6420   	speedChrgBlckStat=0;
003b1e  802c              STRH     r4,[r5,#0]
;;;6421   	if(speedChrgBlckSrc==1)
;;;6422   		{
;;;6423   		if(((speedChrgBlckLog==0)&&(adc_buff_[11]>2000)) || ((speedChrgBlckLog==1)&&(adc_buff_[11]<2000))) speedChrgBlckStat=1;
003b20  4bf4              LDR      r3,|L1.16116|
003b22  49f5              LDR      r1,|L1.16120|
003b24  f44f62fa          MOV      r2,#0x7d0
003b28  2801              CMP      r0,#1                 ;6421
003b2a  d002              BEQ      |L1.15154|
;;;6424   		}
;;;6425   	else if(speedChrgBlckSrc==2)
003b2c  2802              CMP      r0,#2
003b2e  d00f              BEQ      |L1.15184|
003b30  e01c              B        |L1.15212|
                  |L1.15154|
003b32  f9b30000          LDRSH    r0,[r3,#0]            ;6423  ; speedChrgBlckLog
003b36  b918              CBNZ     r0,|L1.15168|
003b38  f9b13016          LDRSH    r3,[r1,#0x16]         ;6423  ; adc_buff_
003b3c  4293              CMP      r3,r2                 ;6423
003b3e  dc05              BGT      |L1.15180|
                  |L1.15168|
003b40  2801              CMP      r0,#1                 ;6423
003b42  d113              BNE      |L1.15212|
003b44  f9b10016          LDRSH    r0,[r1,#0x16]         ;6423  ; adc_buff_
003b48  4290              CMP      r0,r2                 ;6423
003b4a  da0f              BGE      |L1.15212|
                  |L1.15180|
003b4c  802e              STRH     r6,[r5,#0]            ;6423
003b4e  e00d              B        |L1.15212|
                  |L1.15184|
;;;6426   		{
;;;6427   		if(((speedChrgBlckLog==0)&&(adc_buff_[13]>2000)) || ((speedChrgBlckLog==1)&&(adc_buff_[13]<2000))) speedChrgBlckStat=1;
003b50  f9b30000          LDRSH    r0,[r3,#0]  ; speedChrgBlckLog
003b54  b918              CBNZ     r0,|L1.15198|
003b56  f9b1301a          LDRSH    r3,[r1,#0x1a]  ; adc_buff_
003b5a  4293              CMP      r3,r2
003b5c  dc05              BGT      |L1.15210|
                  |L1.15198|
003b5e  2801              CMP      r0,#1
003b60  d104              BNE      |L1.15212|
003b62  f9b1001a          LDRSH    r0,[r1,#0x1a]  ; adc_buff_
003b66  4290              CMP      r0,r2
003b68  da00              BGE      |L1.15212|
                  |L1.15210|
003b6a  802e              STRH     r6,[r5,#0]
                  |L1.15212|
;;;6428   		}
;;;6429   	}
;;;6430   
;;;6431   
;;;6432   if(speedChrgBlckStat==1)
003b6c  8828              LDRH     r0,[r5,#0]  ; speedChrgBlckStat
;;;6433   	{
;;;6434   
;;;6435   	//speedChargeStartStop();
;;;6436   
;;;6437   	speedChrgShowCnt++;
003b6e  49e3              LDR      r1,|L1.16124|
003b70  2801              CMP      r0,#1                 ;6432
003b72  d001              BEQ      |L1.15224|
;;;6438   	if(speedChrgShowCnt>=30)	
;;;6439   		{
;;;6440   		speedChrgShowCnt=0;
;;;6441   		show_mess(	"          ",
;;;6442   					"               ",
;;;6443   					"     !!!    ",
;;;6444   					"                    ",
;;;6445   					5000);
;;;6446   		}
;;;6447   	}
;;;6448   else speedChrgShowCnt=0;
003b74  700c              STRB     r4,[r1,#0]
                  |L1.15222|
;;;6449   
;;;6450   
;;;6451   }
003b76  bdf8              POP      {r3-r7,pc}
                  |L1.15224|
003b78  7808              LDRB     r0,[r1,#0]            ;6437  ; speedChrgShowCnt
003b7a  f1000001          ADD      r0,r0,#1              ;6437
003b7e  b2c0              UXTB     r0,r0                 ;6437
003b80  7008              STRB     r0,[r1,#0]            ;6437
003b82  281e              CMP      r0,#0x1e              ;6438
003b84  d3f7              BCC      |L1.15222|
003b86  700c              STRB     r4,[r1,#0]            ;6440
003b88  f2413088          MOV      r0,#0x1388            ;6441
003b8c  9000              STR      r0,[sp,#0]            ;6441
003b8e  a3dc              ADR      r3,|L1.16128|
003b90  a2e1              ADR      r2,|L1.16152|
003b92  a1e7              ADR      r1,|L1.16176|
003b94  a0ec              ADR      r0,|L1.16200|
003b96  f7fffffe          BL       show_mess
003b9a  bdf8              POP      {r3-r7,pc}
;;;6452   
                          ENDP

                  speedChargeStartStop PROC
;;;6453   //-----------------------------------------------
;;;6454   void speedChargeStartStop(void)
003b9c  b508              PUSH     {r3,lr}
;;;6455   {
;;;6456   if(speedChIsOn)
003b9e  48f0              LDR      r0,|L1.16224|
003ba0  2100              MOVS     r1,#0
003ba2  8802              LDRH     r2,[r0,#0]  ; speedChIsOn
003ba4  b10a              CBZ      r2,|L1.15274|
;;;6457   	{
;;;6458   	speedChIsOn=0;
003ba6  8001              STRH     r1,[r0,#0]
;;;6459   	}
;;;6460   
;;;6461   else
;;;6462   	{
;;;6463   	if(speedChrgBlckStat==0)
;;;6464   		{
;;;6465   		speedChIsOn=1;
;;;6466   		speedChTimeCnt=0;
;;;6467   		}
;;;6468   	else
;;;6469   		{
;;;6470   		show_mess(	"          ",
;;;6471   	          		"               ",
;;;6472   	          		"    !   ",
;;;6473   	          		"                    ",2000);	 
;;;6474   		}
;;;6475   	}
;;;6476   }
003ba8  bd08              POP      {r3,pc}
                  |L1.15274|
003baa  4aee              LDR      r2,|L1.16228|
003bac  8812              LDRH     r2,[r2,#0]            ;6463  ; speedChrgBlckStat
003bae  b14a              CBZ      r2,|L1.15300|
003bb0  f44f60fa          MOV      r0,#0x7d0             ;6470
003bb4  9000              STR      r0,[sp,#0]            ;6470
003bb6  a3d2              ADR      r3,|L1.16128|
003bb8  a2eb              ADR      r2,|L1.16232|
003bba  a1f1              ADR      r1,|L1.16256|
003bbc  a0f6              ADR      r0,|L1.16280|
003bbe  f7fffffe          BL       show_mess
003bc2  bd08              POP      {r3,pc}
                  |L1.15300|
003bc4  f04f0201          MOV      r2,#1                 ;6465
003bc8  8002              STRH     r2,[r0,#0]            ;6465
003bca  48f9              LDR      r0,|L1.16304|
003bcc  6001              STR      r1,[r0,#0]            ;6466  ; speedChTimeCnt
003bce  bd08              POP      {r3,pc}
;;;6477   
                          ENDP

                  numOfForvardBps_hndl PROC
;;;6478   //-----------------------------------------------
;;;6479   void	numOfForvardBps_hndl(void)			//       
003bd0  e92d41f0          PUSH     {r4-r8,lr}
;;;6480   {
;;;6481   numOfForvardBps=0;
003bd4  4cf7              LDR      r4,|L1.16308|
003bd6  f04f0500          MOV      r5,#0
003bda  7625              STRB     r5,[r4,#0x18]
;;;6482   
;;;6483   //FORVARDBPSCHHOUR=10;
;;;6484   
;;;6485   if((FORVARDBPSCHHOUR<=0)||(FORVARDBPSCHHOUR>500))
003bdc  4ef6              LDR      r6,|L1.16312|
003bde  f9b60000          LDRSH    r0,[r6,#0]  ; FORVARDBPSCHHOUR
003be2  2800              CMP      r0,#0
003be4  dd02              BLE      |L1.15340|
003be6  f5b07ffa          CMP      r0,#0x1f4
003bea  dd02              BLE      |L1.15346|
                  |L1.15340|
;;;6486   	{
;;;6487   	FORVARDBPSCHHOUR=0;
003bec  8035              STRH     r5,[r6,#0]
                  |L1.15342|
;;;6488   	return;
;;;6489   	}
;;;6490   
;;;6491   numOfForvardBps_minCnt++;
;;;6492   
;;;6493   
;;;6494   if(numOfForvardBps_minCnt>=60)
;;;6495   	{
;;;6496   	numOfForvardBps_minCnt=0;
;;;6497   	numOfForvardBps_hourCnt=lc640_read_int(EE_FORVBPSHOURCNT);
;;;6498   	numOfForvardBps_hourCnt++;
;;;6499   	if(numOfForvardBps_hourCnt>=(FORVARDBPSCHHOUR*NUMIST))
;;;6500   		{
;;;6501   		numOfForvardBps_hourCnt=0;
;;;6502   		}
;;;6503   	lc640_write_int(EE_FORVBPSHOURCNT,numOfForvardBps_hourCnt);
;;;6504   	}
;;;6505   
;;;6506   numOfForvardBps=numOfForvardBps_hourCnt/FORVARDBPSCHHOUR; 
;;;6507   }
003bee  e8bd81f0          POP      {r4-r8,pc}
                  |L1.15346|
003bf2  7e60              LDRB     r0,[r4,#0x19]         ;6491  ; numOfForvardBps_minCnt
003bf4  f1000001          ADD      r0,r0,#1              ;6491
003bf8  b2c0              UXTB     r0,r0                 ;6491
003bfa  7660              STRB     r0,[r4,#0x19]         ;6491
003bfc  283c              CMP      r0,#0x3c              ;6494
003bfe  d31a              BCC      |L1.15414|
003c00  7665              STRB     r5,[r4,#0x19]         ;6496
003c02  f44f7794          MOV      r7,#0x128             ;6497
003c06  4638              MOV      r0,r7                 ;6497
003c08  f7fffffe          BL       lc640_read_int
003c0c  f1000001          ADD      r0,r0,#1              ;6498
003c10  b200              SXTH     r0,r0                 ;6498
003c12  f8a40060          STRH     r0,[r4,#0x60]         ;6498
003c16  4ae9              LDR      r2,|L1.16316|
003c18  f9b61000          LDRSH    r1,[r6,#0]            ;6499  ; FORVARDBPSCHHOUR
003c1c  f9b22000          LDRSH    r2,[r2,#0]            ;6499  ; NUMIST
003c20  fb01f102          MUL      r1,r1,r2              ;6499
003c24  4281              CMP      r1,r0                 ;6499
003c26  dc01              BGT      |L1.15404|
003c28  f8a45060          STRH     r5,[r4,#0x60]         ;6501
                  |L1.15404|
003c2c  f9b41060          LDRSH    r1,[r4,#0x60]         ;6503  ; numOfForvardBps_hourCnt
003c30  4638              MOV      r0,r7                 ;6503
003c32  f7fffffe          BL       lc640_write_int
                  |L1.15414|
003c36  f9b40060          LDRSH    r0,[r4,#0x60]         ;6506  ; numOfForvardBps_hourCnt
003c3a  f9b61000          LDRSH    r1,[r6,#0]            ;6506  ; FORVARDBPSCHHOUR
003c3e  fb90f0f1          SDIV     r0,r0,r1              ;6506
003c42  7620              STRB     r0,[r4,#0x18]         ;6506
003c44  e7d3              B        |L1.15342|
;;;6508   
                          ENDP

                  numOfForvardBps_init PROC
;;;6509   //-----------------------------------------------
;;;6510   void	numOfForvardBps_init(void)			//         
003c46  b510              PUSH     {r4,lr}
;;;6511   {									//    -   
;;;6512   lc640_write_int(EE_FORVBPSHOURCNT,0);
003c48  2100              MOVS     r1,#0
003c4a  f44f7094          MOV      r0,#0x128
003c4e  f7fffffe          BL       lc640_write_int
;;;6513   numOfForvardBps_minCnt=0;
003c52  49d8              LDR      r1,|L1.16308|
003c54  f04f0000          MOV      r0,#0
003c58  7648              STRB     r0,[r1,#0x19]
;;;6514   }
003c5a  bd10              POP      {r4,pc}
;;;6515   
                          ENDP

                  outVoltContrHndl PROC
;;;6516   //-----------------------------------------------
;;;6517   void outVoltContrHndl(void)
003c5c  b570              PUSH     {r4-r6,lr}
;;;6518   { 
;;;6519   if((load_U>U_OUT_KONTR_MAX)||(load_U<U_OUT_KONTR_MIN))
003c5e  4cd8              LDR      r4,|L1.16320|
003c60  48d8              LDR      r0,|L1.16324|
;;;6520   	{
;;;6521   	outVoltContrHndlCnt_=0;
;;;6522   	if(outVoltContrHndlCnt<U_OUT_KONTR_DELAY)
003c62  4ad9              LDR      r2,|L1.16328|
003c64  f9b41000          LDRSH    r1,[r4,#0]            ;6519  ; load_U
003c68  f9b06000          LDRSH    r6,[r0,#0]            ;6519  ; U_OUT_KONTR_MAX
003c6c  2500              MOVS     r5,#0                 ;6521
003c6e  f9b20000          LDRSH    r0,[r2,#0]
003c72  4bd6              LDR      r3,|L1.16332|
003c74  42b1              CMP      r1,r6                 ;6519
003c76  dc04              BGT      |L1.15490|
003c78  4ed5              LDR      r6,|L1.16336|
003c7a  f9b66000          LDRSH    r6,[r6,#0]            ;6519  ; U_OUT_KONTR_MIN
003c7e  42b1              CMP      r1,r6                 ;6519
003c80  da0f              BGE      |L1.15522|
                  |L1.15490|
003c82  801d              STRH     r5,[r3,#0]            ;6521
003c84  49d3              LDR      r1,|L1.16340|
003c86  f9b11000          LDRSH    r1,[r1,#0]  ; U_OUT_KONTR_DELAY
003c8a  4288              CMP      r0,r1
003c8c  da1b              BGE      |L1.15558|
;;;6523   		{
;;;6524   		outVoltContrHndlCnt++;
003c8e  f1000001          ADD      r0,r0,#1
003c92  b200              SXTH     r0,r0
003c94  8010              STRH     r0,[r2,#0]
;;;6525   		if(outVoltContrHndlCnt==U_OUT_KONTR_DELAY)
003c96  4288              CMP      r0,r1
003c98  d115              BNE      |L1.15558|
;;;6526   			{
;;;6527   			avar_uout_hndl(1);
003c9a  2001              MOVS     r0,#1
003c9c  f7fffffe          BL       avar_uout_hndl
003ca0  e011              B        |L1.15558|
                  |L1.15522|
;;;6528   			}
;;;6529   		}
;;;6530   	}
;;;6531   else
;;;6532   	{
;;;6533   	if(outVoltContrHndlCnt)
003ca2  b180              CBZ      r0,|L1.15558|
;;;6534   		{
;;;6535   		if(outVoltContrHndlCnt_<5)
003ca4  f9b30000          LDRSH    r0,[r3,#0]  ; outVoltContrHndlCnt_
003ca8  2805              CMP      r0,#5
003caa  da0c              BGE      |L1.15558|
;;;6536   			{
;;;6537   			outVoltContrHndlCnt_++;
003cac  f1000001          ADD      r0,r0,#1
003cb0  b200              SXTH     r0,r0
003cb2  8018              STRH     r0,[r3,#0]
;;;6538   			if(outVoltContrHndlCnt_>=5)
003cb4  2805              CMP      r0,#5
003cb6  db06              BLT      |L1.15558|
;;;6539   				{
;;;6540   				outVoltContrHndlCnt=0;
003cb8  8015              STRH     r5,[r2,#0]
;;;6541   				if(uout_av)avar_uout_hndl(0);
003cba  48c7              LDR      r0,|L1.16344|
003cbc  7800              LDRB     r0,[r0,#0]  ; uout_av
003cbe  b110              CBZ      r0,|L1.15558|
003cc0  2000              MOVS     r0,#0
003cc2  f7fffffe          BL       avar_uout_hndl
                  |L1.15558|
;;;6542   				}
;;;6543   			}
;;;6544   		}
;;;6545   	}
;;;6546   
;;;6547   if (load_U<(USIGN*10)) 
003cc6  48c5              LDR      r0,|L1.16348|
003cc8  f9b41000          LDRSH    r1,[r4,#0]  ; load_U
003ccc  f9b00000          LDRSH    r0,[r0,#0]  ; USIGN
003cd0  eb000080          ADD      r0,r0,r0,LSL #2
003cd4  ebb10f40          CMP      r1,r0,LSL #1
003cd8  da0b              BGE      |L1.15602|
;;;6548   	{
;;;6549   	if(!bSILENT)
003cda  48c1              LDR      r0,|L1.16352|
003cdc  6800              LDR      r0,[r0,#0]  ; bSILENT
003cde  2800              CMP      r0,#0
003ce0  d107              BNE      |L1.15602|
;;;6550   		{
;;;6551   		mess_send(MESS2RELE_HNDL,PARAM_RELE_BAT_IS_DISCHARGED,1,20);
003ce2  e8bd4070          POP      {r4-r6,lr}
003ce6  2314              MOVS     r3,#0x14
003ce8  2201              MOVS     r2,#1
003cea  2172              MOVS     r1,#0x72
003cec  20d2              MOVS     r0,#0xd2
003cee  f7ffbffe          B.W      mess_send
                  |L1.15602|
;;;6552   		}
;;;6553   
;;;6554   	//bU_BAT2REL_AV_BAT=1;
;;;6555   	}
;;;6556   
;;;6557   
;;;6558   }
003cf2  bd70              POP      {r4-r6,pc}
;;;6559   
                          ENDP

                  vent_hndl PROC
;;;6560   //-----------------------------------------------
;;;6561   void vent_hndl(void)
003cf4  e92d4ff0          PUSH     {r4-r11,lr}
;;;6562   {
003cf8  b087              SUB      sp,sp,#0x1c
;;;6563   if(RELEVENTSIGN==rvsAKB)
003cfa  48ba              LDR      r0,|L1.16356|
;;;6564   	{
;;;6565   	if(vent_stat==0)
003cfc  4cad              LDR      r4,|L1.16308|
;;;6566   		{
;;;6567   		if	(
;;;6568   			(BAT_IS_ON[0]==bisON)&&((bat[0]._Tb>TVENTON)||(bat[0]._nd))
003cfe  49ba              LDR      r1,|L1.16360|
;;;6569   			||
;;;6570   			(BAT_IS_ON[1]==bisON)&&((bat[1]._Tb>TVENTON)||(bat[1]._nd))
;;;6571   			)
;;;6572   			{
;;;6573   			vent_stat=1;
;;;6574   			}
;;;6575   		}
;;;6576   	else if(vent_stat==1)
;;;6577   		{
;;;6578   		if	(
;;;6579   			((BAT_IS_ON[0]!=bisON)||((BAT_IS_ON[0]==bisON)&&(bat[0]._Tb<TVENTOFF)&&(!bat[0]._nd)))
003d00  4aba              LDR      r2,|L1.16364|
003d02  7800              LDRB     r0,[r0,#0]            ;6563  ; RELEVENTSIGN
003d04  f9943000          LDRSB    r3,[r4,#0]            ;6565
003d08  f9b11000          LDRSH    r1,[r1,#0]            ;6568
003d0c  f9b22000          LDRSH    r2,[r2,#0]
003d10  b148              CBZ      r0,|L1.15654|
;;;6580   			&&
;;;6581   			((BAT_IS_ON[1]!=bisON)||((BAT_IS_ON[1]==bisON)&&(bat[1]._Tb<TVENTOFF)&&(!bat[1]._nd)))
;;;6582   			)
;;;6583   			{
;;;6584   			vent_stat=0;
;;;6585   			}
;;;6586   		}
;;;6587   	}
;;;6588   else if(RELEVENTSIGN==rvsBPS)
003d12  2802              CMP      r0,#2
003d14  d03c              BEQ      |L1.15760|
;;;6589   	{
;;;6590   /*	if	(
;;;6591   		(((bps[0]._flags_tm&0x06)||(bps[0]._cnt>=30)))||
;;;6592   		(((bps[1]._flags_tm&0x06)||(bps[1]._cnt>=30))&&(NUMIST>1))||
;;;6593   		(((bps[2]._flags_tm&0x06)||(bps[2]._cnt>=30))&&(NUMIST>2))||
;;;6594   		(((bps[3]._flags_tm&0x06)||(bps[3]._cnt>=30))&&(NUMIST>3))||
;;;6595   		(((bps[4]._flags_tm&0x06)||(bps[4]._cnt>=30))&&(NUMIST>4))||
;;;6596   		(((bps[5]._flags_tm&0x06)||(bps[5]._cnt>=30))&&(NUMIST>5))||
;;;6597   		(((bps[6]._flags_tm&0x06)||(bps[6]._cnt>=30))&&(NUMIST>6))
;;;6598   		)
;;;6599   		{
;;;6600   		vent_stat=1;
;;;6601   		}
;;;6602   	else vent_stat=0;
;;;6603   	*/
;;;6604   
;;;6605   	if	(
;;;6606   		((NUMIST)&&((bps[0]._Ti>TVENTON)||(bps[0]._cnt>=30)))
;;;6607   		||
;;;6608   		((NUMIST>1)&&((bps[1]._Ti>TVENTON)||(bps[1]._cnt>=30)))
;;;6609   		||
;;;6610   		((NUMIST>2)&&((bps[2]._Ti>TVENTON)||(bps[2]._cnt>=30)))
;;;6611   		||
;;;6612   		((NUMIST>3)&&((bps[3]._Ti>TVENTON)||(bps[3]._cnt>=30)))
;;;6613   		||
;;;6614   		((NUMIST>4)&&((bps[4]._Ti>TVENTON)||(bps[4]._cnt>=30)))
;;;6615   		||
;;;6616   		((NUMIST>5)&&((bps[5]._Ti>TVENTON)||(bps[5]._cnt>=30)))
;;;6617   		||
;;;6618   		((NUMIST>6)&&((bps[6]._Ti>TVENTON)||(bps[6]._cnt>=30)))
;;;6619   		||
;;;6620   		((NUMIST>7)&&((bps[7]._Ti>TVENTON)||(bps[7]._cnt>=30)))
;;;6621   		)
;;;6622   		{
;;;6623   		vent_stat=1;
;;;6624   		}
;;;6625   	else if(vent_stat==1)
;;;6626   		{
;;;6627   		if	(
;;;6628   			((!NUMIST)||((NUMIST)&&(bps[0]._Ti<TVENTOFF)&&(bps[0]._cnt<10)))
;;;6629   			&&
;;;6630   			((NUMIST<2)||((NUMIST>=2)&&(bps[1]._Ti<TVENTOFF)&&(bps[1]._cnt<10)))
;;;6631   			&&
;;;6632   			((NUMIST<3)||((NUMIST>=3)&&(bps[2]._Ti<TVENTOFF)&&(bps[2]._cnt<10)))
;;;6633   			&&
;;;6634   			((NUMIST<4)||((NUMIST>=4)&&(bps[3]._Ti<TVENTOFF)&&(bps[3]._cnt<10)))
;;;6635   			&&
;;;6636   			((NUMIST<5)||((NUMIST>=5)&&(bps[4]._Ti<TVENTOFF)&&(bps[4]._cnt<10)))
;;;6637   			&&
;;;6638   			((NUMIST<6)||((NUMIST>=6)&&(bps[5]._Ti<TVENTOFF)&&(bps[5]._cnt<10)))
;;;6639   			&&
;;;6640   			((NUMIST<7)||((NUMIST>=7)&&(bps[6]._Ti<TVENTOFF)&&(bps[6]._cnt<10)))
;;;6641   			&&
;;;6642   			((NUMIST<8)||((NUMIST>=8)&&(bps[7]._Ti<TVENTOFF)&&(bps[7]._cnt<10)))
;;;6643   			)
;;;6644   			{
;;;6645   			vent_stat=0;
;;;6646   			}
;;;6647   		}
;;;6648   	}
;;;6649   else if(RELEVENTSIGN==rvsEXT)
003d16  2801              CMP      r0,#1
003d18  d07e              BEQ      |L1.15896|
;;;6650   	{
;;;6651   	if	(
;;;6652   		((NUMDT)&&((t_ext[0]>TVENTON)||(ND_EXT[0])))
;;;6653   		||
;;;6654   		((NUMDT>1)&&((t_ext[1]>TVENTON)||(ND_EXT[1])))
;;;6655   		||
;;;6656   		((NUMDT>2)&&((t_ext[2]>TVENTON)||(ND_EXT[2])))
;;;6657   		)
;;;6658   		{
;;;6659   		vent_stat=1;
;;;6660   		}
;;;6661   	else if(vent_stat==1)
;;;6662   		{
;;;6663   		if	(
;;;6664   			((!NUMDT)||((NUMDT)&&(t_ext[0]<TVENTOFF)&&(!ND_EXT[0])))
;;;6665   			&&
;;;6666   			((NUMDT<2)||((NUMDT>=2)&&(t_ext[1]<TVENTOFF)&&(!ND_EXT[1])))
;;;6667   			&&
;;;6668   			((NUMDT<3)||((NUMDT>=3)&&(t_ext[2]<TVENTOFF)&&(!ND_EXT[2])))
;;;6669   			)
;;;6670   			{
;;;6671   			vent_stat=0;
;;;6672   			}
;;;6673   		}
;;;6674   	}
;;;6675   else vent_stat=1;
003d1a  f04f0001          MOV      r0,#1
003d1e  7020              STRB     r0,[r4,#0]
                  |L1.15648|
;;;6676   }
003d20  b007              ADD      sp,sp,#0x1c
003d22  e8bd8ff0          POP      {r4-r11,pc}
                  |L1.15654|
003d26  4fb2              LDR      r7,|L1.16368|
003d28  f8df82c8          LDR      r8,|L1.16372|
003d2c  f9b7000a          LDRSH    r0,[r7,#0xa]          ;6568
003d30  7b3d              LDRB     r5,[r7,#0xc]          ;6568
003d32  f9b76056          LDRSH    r6,[r7,#0x56]         ;6570
003d36  f898c000          LDRB     r12,[r8,#0]           ;6567
003d3a  f8977058          LDRB     r7,[r7,#0x58]         ;6570
003d3e  f8988001          LDRB     r8,[r8,#1]            ;6570
003d42  b12b              CBZ      r3,|L1.15696|
003d44  2b01              CMP      r3,#1                 ;6576
003d46  d1eb              BNE      |L1.15648|
003d48  f1bc0f55          CMP      r12,#0x55             ;6578
003d4c  d115              BNE      |L1.15738|
003d4e  e010              B        |L1.15730|
                  |L1.15696|
003d50  f1bc0f55          CMP      r12,#0x55             ;6567
003d54  d102              BNE      |L1.15708|
003d56  4288              CMP      r0,r1                 ;6568
003d58  dc07              BGT      |L1.15722|
003d5a  b935              CBNZ     r5,|L1.15722|
                  |L1.15708|
003d5c  f1b80f55          CMP      r8,#0x55              ;6570
003d60  d1de              BNE      |L1.15648|
003d62  428e              CMP      r6,r1                 ;6570
003d64  dc01              BGT      |L1.15722|
003d66  2f00              CMP      r7,#0                 ;6570
003d68  d0da              BEQ      |L1.15648|
                  |L1.15722|
003d6a  f04f0001          MOV      r0,#1                 ;6573
003d6e  7020              STRB     r0,[r4,#0]            ;6573
                  |L1.15728|
003d70  e7d6              B        |L1.15648|
                  |L1.15730|
003d72  4290              CMP      r0,r2                 ;6579
003d74  dad4              BGE      |L1.15648|
003d76  2d00              CMP      r5,#0                 ;6579
003d78  d1d2              BNE      |L1.15648|
                  |L1.15738|
003d7a  f1b80f55          CMP      r8,#0x55              ;6581
003d7e  d103              BNE      |L1.15752|
003d80  4296              CMP      r6,r2                 ;6581
003d82  dacd              BGE      |L1.15648|
003d84  2f00              CMP      r7,#0                 ;6581
003d86  d1cb              BNE      |L1.15648|
                  |L1.15752|
003d88  f04f0000          MOV      r0,#0                 ;6584
003d8c  7020              STRB     r0,[r4,#0]            ;6584
003d8e  e7c7              B        |L1.15648|
                  |L1.15760|
003d90  4e99              LDR      r6,|L1.16376|
003d92  488a              LDR      r0,|L1.16316|
003d94  6ab5              LDR      r5,[r6,#0x28]         ;6606
003d96  f9b00000          LDRSH    r0,[r0,#0]            ;6605  ; NUMIST
003d9a  78f6              LDRB     r6,[r6,#3]            ;6606
003d9c  b118              CBZ      r0,|L1.15782|
003d9e  428d              CMP      r5,r1                 ;6606
003da0  dc7a              BGT      |L1.16024|
003da2  2e1e              CMP      r6,#0x1e              ;6606
003da4  d278              BCS      |L1.16024|
                  |L1.15782|
003da6  f8dfc250          LDR      r12,|L1.16376|
003daa  2801              CMP      r0,#1                 ;6608
003dac  f8dc707c          LDR      r7,[r12,#0x7c]        ;6608
003db0  f89cc057          LDRB     r12,[r12,#0x57]       ;6608
003db4  f8cdc018          STR      r12,[sp,#0x18]        ;6608
003db8  dd06              BLE      |L1.15816|
003dba  428f              CMP      r7,r1                 ;6608
003dbc  dc6c              BGT      |L1.16024|
003dbe  f8ddc018          LDR      r12,[sp,#0x18]        ;6608
003dc2  f1bc0f1e          CMP      r12,#0x1e             ;6608
003dc6  d267              BCS      |L1.16024|
                  |L1.15816|
003dc8  f8dfc22c          LDR      r12,|L1.16376|
003dcc  2802              CMP      r0,#2                 ;6610
003dce  f8dc80d0          LDR      r8,[r12,#0xd0]        ;6610
003dd2  f8cd8014          STR      r8,[sp,#0x14]         ;6610
003dd6  f89cc0ab          LDRB     r12,[r12,#0xab]       ;6610
003dda  f8cdc010          STR      r12,[sp,#0x10]        ;6610
003dde  dd08              BLE      |L1.15858|
003de0  f8ddc014          LDR      r12,[sp,#0x14]        ;6610
003de4  458c              CMP      r12,r1                ;6610
003de6  dc57              BGT      |L1.16024|
003de8  f8ddc010          LDR      r12,[sp,#0x10]        ;6610
003dec  f1bc0f1e          CMP      r12,#0x1e             ;6610
003df0  d252              BCS      |L1.16024|
                  |L1.15858|
003df2  f8dfc204          LDR      r12,|L1.16376|
003df6  2803              CMP      r0,#3                 ;6612
003df8  f8dc8124          LDR      r8,[r12,#0x124]       ;6612
003dfc  f8cd800c          STR      r8,[sp,#0xc]          ;6612
003e00  f89cc0ff          LDRB     r12,[r12,#0xff]       ;6612
003e04  f8cdc008          STR      r12,[sp,#8]           ;6612
003e08  dd0a              BLE      |L1.15904|
003e0a  f8ddc00c          LDR      r12,[sp,#0xc]         ;6612
003e0e  458c              CMP      r12,r1                ;6612
003e10  dc42              BGT      |L1.16024|
003e12  f8ddc008          LDR      r12,[sp,#8]           ;6612
003e16  e000              B        |L1.15898|
                  |L1.15896|
003e18  e10e              B        |L1.16440|
                  |L1.15898|
003e1a  f1bc0f1e          CMP      r12,#0x1e             ;6612
003e1e  d23b              BCS      |L1.16024|
                  |L1.15904|
003e20  f8df81d4          LDR      r8,|L1.16376|
003e24  2804              CMP      r0,#4                 ;6614
003e26  f8d8c178          LDR      r12,[r8,#0x178]       ;6614
003e2a  f8988153          LDRB     r8,[r8,#0x153]        ;6614
003e2e  f8cd8004          STR      r8,[sp,#4]            ;6614
003e32  dd06              BLE      |L1.15938|
003e34  458c              CMP      r12,r1                ;6614
003e36  dc2f              BGT      |L1.16024|
003e38  f8dd8004          LDR      r8,[sp,#4]            ;6614
003e3c  f1b80f1e          CMP      r8,#0x1e              ;6614
003e40  d22a              BCS      |L1.16024|
                  |L1.15938|
003e42  f8df91b4          LDR      r9,|L1.16376|
003e46  2805              CMP      r0,#5                 ;6616
003e48  f8d981cc          LDR      r8,[r9,#0x1cc]        ;6616
003e4c  f89991a7          LDRB     r9,[r9,#0x1a7]        ;6616
003e50  f8cd9000          STR      r9,[sp,#0]            ;6616
003e54  dd06              BLE      |L1.15972|
003e56  4588              CMP      r8,r1                 ;6616
003e58  dc1e              BGT      |L1.16024|
003e5a  f8dd9000          LDR      r9,[sp,#0]            ;6616
003e5e  f1b90f1e          CMP      r9,#0x1e              ;6616
003e62  d219              BCS      |L1.16024|
                  |L1.15972|
003e64  f8dfa190          LDR      r10,|L1.16376|
003e68  2806              CMP      r0,#6                 ;6618
003e6a  f89ae1fb          LDRB     lr,[r10,#0x1fb]       ;6618
003e6e  f8da9220          LDR      r9,[r10,#0x220]       ;6618
003e72  dd04              BLE      |L1.15998|
003e74  4589              CMP      r9,r1                 ;6618
003e76  dc0f              BGT      |L1.16024|
003e78  f1be0f1e          CMP      lr,#0x1e              ;6618
003e7c  d20c              BCS      |L1.16024|
                  |L1.15998|
003e7e  f8dfb178          LDR      r11,|L1.16376|
003e82  2807              CMP      r0,#7                 ;6620
003e84  f8dba274          LDR      r10,[r11,#0x274]      ;6620
003e88  f89bb24f          LDRB     r11,[r11,#0x24f]      ;6620
003e8c  dd08              BLE      |L1.16032|
003e8e  458a              CMP      r10,r1                ;6620
003e90  dc02              BGT      |L1.16024|
003e92  f1bb0f1e          CMP      r11,#0x1e             ;6620
003e96  d303              BCC      |L1.16032|
                  |L1.16024|
003e98  f04f0001          MOV      r0,#1                 ;6623
003e9c  7020              STRB     r0,[r4,#0]            ;6623
                  |L1.16030|
003e9e  e73f              B        |L1.15648|
                  |L1.16032|
003ea0  2b01              CMP      r3,#1                 ;6625
003ea2  d1fc              BNE      |L1.16030|
003ea4  b118              CBZ      r0,|L1.16046|
003ea6  4295              CMP      r5,r2                 ;6628
003ea8  daf9              BGE      |L1.16030|
003eaa  2e0a              CMP      r6,#0xa               ;6628
003eac  d2f7              BCS      |L1.16030|
                  |L1.16046|
003eae  2802              CMP      r0,#2                 ;6630
003eb0  db04              BLT      |L1.16060|
003eb2  4297              CMP      r7,r2                 ;6630
003eb4  daf3              BGE      |L1.16030|
003eb6  9906              LDR      r1,[sp,#0x18]         ;6630
003eb8  290a              CMP      r1,#0xa               ;6630
003eba  d2f0              BCS      |L1.16030|
                  |L1.16060|
003ebc  2803              CMP      r0,#3                 ;6632
003ebe  db05              BLT      |L1.16076|
003ec0  9905              LDR      r1,[sp,#0x14]         ;6632
003ec2  4291              CMP      r1,r2                 ;6632
003ec4  daeb              BGE      |L1.16030|
003ec6  9904              LDR      r1,[sp,#0x10]         ;6632
003ec8  290a              CMP      r1,#0xa               ;6632
003eca  d2e8              BCS      |L1.16030|
                  |L1.16076|
003ecc  2804              CMP      r0,#4                 ;6634
003ece  db05              BLT      |L1.16092|
003ed0  9903              LDR      r1,[sp,#0xc]          ;6634
003ed2  4291              CMP      r1,r2                 ;6634
003ed4  dae3              BGE      |L1.16030|
003ed6  9902              LDR      r1,[sp,#8]            ;6634
003ed8  290a              CMP      r1,#0xa               ;6634
003eda  d2e0              BCS      |L1.16030|
                  |L1.16092|
003edc  2805              CMP      r0,#5                 ;6636
003ede  db02              BLT      |L1.16102|
003ee0  4594              CMP      r12,r2                ;6636
003ee2  dadc              BGE      |L1.16030|
003ee4  e08a              B        |L1.16380|
                  |L1.16102|
003ee6  e08d              B        |L1.16388|
                  |L1.16104|
                          DCD      Ib_ips_termokompensat
                  |L1.16108|
                          DCD      IZMAX
                  |L1.16112|
                          DCD      speedChrgBlckSrc
                  |L1.16116|
                          DCD      speedChrgBlckLog
                  |L1.16120|
                          DCD      ||.bss||+0x400
                  |L1.16124|
                          DCD      speedChrgShowCnt
                  |L1.16128|
003f00  20202020          DCB      "                    ",0
003f04  20202020
003f08  20202020
003f0c  20202020
003f10  20202020
003f14  00      
003f15  00                DCB      0
003f16  00                DCB      0
003f17  00                DCB      0
                  |L1.16152|
003f18  20202020          DCB      "     ",199,192,207,208,197,217,197,205,"!!!    ",0
003f1c  20c7c0cf
003f20  d0c5d9c5
003f24  cd212121
003f28  20202020
003f2c  00      
003f2d  00                DCB      0
003f2e  00                DCB      0
003f2f  00                DCB      0
                  |L1.16176|
003f30  20202020          DCB      "       ",199,192,208,223,196,"        ",0
003f34  202020c7
003f38  c0d0dfc4
003f3c  20202020
003f40  20202020
003f44  00      
003f45  00                DCB      0
003f46  00                DCB      0
003f47  00                DCB      0
                  |L1.16200|
003f48  20202020          DCB      "     ",211,209,202,206,208,197,205,205,219,201,"     ",0
003f4c  20d3d1ca
003f50  ced0c5cd
003f54  cddbc920
003f58  20202020
003f5c  00      
003f5d  00                DCB      0
003f5e  00                DCB      0
003f5f  00                DCB      0
                  |L1.16224|
                          DCD      speedChIsOn
                  |L1.16228|
                          DCD      speedChrgBlckStat
                  |L1.16232|
003f68  20202020          DCB      "    ",231,224,225,235,238,234,232,240,238,226,224,237,"!"
003f6c  e7e0e1eb
003f70  eeeae8f0
003f74  eee2e0ed
003f78  21      
003f79  20202000          DCB      "   ",0
003f7d  00                DCB      0
003f7e  00                DCB      0
003f7f  00                DCB      0
                  |L1.16256|
003f80  20202020          DCB      "       ",231,224,240,255,228,"        ",0
003f84  202020e7
003f88  e0f0ffe4
003f8c  20202020
003f90  20202020
003f94  00      
003f95  00                DCB      0
003f96  00                DCB      0
003f97  00                DCB      0
                  |L1.16280|
003f98  20202020          DCB      "     ",211,241,234,238,240,229,237,237,251,233,"     ",0
003f9c  20d3f1ea
003fa0  eef0e5ed
003fa4  edfbe920
003fa8  20202020
003fac  00      
003fad  00                DCB      0
003fae  00                DCB      0
003faf  00                DCB      0
                  |L1.16304|
                          DCD      speedChTimeCnt
                  |L1.16308|
                          DCD      ||area_number.21||
                  |L1.16312|
                          DCD      FORVARDBPSCHHOUR
                  |L1.16316|
                          DCD      NUMIST
                  |L1.16320|
                          DCD      load_U
                  |L1.16324|
                          DCD      U_OUT_KONTR_MAX
                  |L1.16328|
                          DCD      outVoltContrHndlCnt
                  |L1.16332|
                          DCD      outVoltContrHndlCnt_
                  |L1.16336|
                          DCD      U_OUT_KONTR_MIN
                  |L1.16340|
                          DCD      U_OUT_KONTR_DELAY
                  |L1.16344|
                          DCD      uout_av
                  |L1.16348|
                          DCD      USIGN
                  |L1.16352|
                          DCD      bSILENT
                  |L1.16356|
                          DCD      RELEVENTSIGN
                  |L1.16360|
                          DCD      TVENTON
                  |L1.16364|
                          DCD      TVENTOFF
                  |L1.16368|
                          DCD      bat
                  |L1.16372|
                          DCD      BAT_IS_ON
                  |L1.16376|
                          DCD      bps
                  |L1.16380|
003ffc  9901              LDR      r1,[sp,#4]            ;6636
003ffe  290a              CMP      r1,#0xa               ;6636
                  |L1.16384|
004000  f4bfaeb6          BCS      |L1.15728|
                  |L1.16388|
004004  2806              CMP      r0,#6                 ;6638
004006  db05              BLT      |L1.16404|
004008  4590              CMP      r8,r2                 ;6638
                  |L1.16394|
00400a  f6bfaeb1          BGE      |L1.15728|
00400e  9900              LDR      r1,[sp,#0]            ;6638
004010  290a              CMP      r1,#0xa               ;6638
004012  d2f5              BCS      |L1.16384|
                  |L1.16404|
004014  2807              CMP      r0,#7                 ;6640
004016  db04              BLT      |L1.16418|
004018  4591              CMP      r9,r2                 ;6640
00401a  daf6              BGE      |L1.16394|
00401c  f1be0f0a          CMP      lr,#0xa               ;6640
004020  d2ee              BCS      |L1.16384|
                  |L1.16418|
004022  2808              CMP      r0,#8                 ;6642
004024  db04              BLT      |L1.16432|
004026  4592              CMP      r10,r2                ;6642
004028  daef              BGE      |L1.16394|
00402a  f1bb0f0a          CMP      r11,#0xa              ;6642
00402e  d2e7              BCS      |L1.16384|
                  |L1.16432|
004030  f04f0000          MOV      r0,#0                 ;6645
004034  7020              STRB     r0,[r4,#0]            ;6645
                  |L1.16438|
004036  e673              B        |L1.15648|
                  |L1.16440|
004038  4822              LDR      r0,|L1.16580|
00403a  4d23              LDR      r5,|L1.16584|
00403c  4e23              LDR      r6,|L1.16588|
00403e  f9b00000          LDRSH    r0,[r0,#0]            ;6651  ; NUMDT
004042  f9b55000          LDRSH    r5,[r5,#0]            ;6652
004046  6836              LDR      r6,[r6,#0]            ;6652
004048  b110              CBZ      r0,|L1.16464|
00404a  428d              CMP      r5,r1                 ;6652
00404c  dc1d              BGT      |L1.16522|
00404e  b9e6              CBNZ     r6,|L1.16522|
                  |L1.16464|
004050  4f1d              LDR      r7,|L1.16584|
004052  f8dfc078          LDR      r12,|L1.16588|
004056  2801              CMP      r0,#1                 ;6654
004058  f9b77002          LDRSH    r7,[r7,#2]            ;6654
00405c  f8dcc004          LDR      r12,[r12,#4]          ;6654
004060  dd04              BLE      |L1.16492|
004062  428f              CMP      r7,r1                 ;6654
004064  dc11              BGT      |L1.16522|
004066  f1bc0f00          CMP      r12,#0                ;6654
00406a  d10e              BNE      |L1.16522|
                  |L1.16492|
00406c  f8df8058          LDR      r8,|L1.16584|
004070  f8df9058          LDR      r9,|L1.16588|
004074  2802              CMP      r0,#2                 ;6656
004076  f9b88004          LDRSH    r8,[r8,#4]            ;6656
00407a  f8d99008          LDR      r9,[r9,#8]            ;6656
00407e  dd08              BLE      |L1.16530|
004080  4588              CMP      r8,r1                 ;6656
004082  dc02              BGT      |L1.16522|
004084  f1b90f00          CMP      r9,#0                 ;6656
004088  d003              BEQ      |L1.16530|
                  |L1.16522|
00408a  f04f0001          MOV      r0,#1                 ;6659
00408e  7020              STRB     r0,[r4,#0]            ;6659
004090  e646              B        |L1.15648|
                  |L1.16530|
004092  2b01              CMP      r3,#1                 ;6661
004094  d1cf              BNE      |L1.16438|
004096  b118              CBZ      r0,|L1.16544|
004098  4295              CMP      r5,r2                 ;6664
00409a  dacc              BGE      |L1.16438|
00409c  2e00              CMP      r6,#0                 ;6664
00409e  d1ca              BNE      |L1.16438|
                  |L1.16544|
0040a0  2802              CMP      r0,#2                 ;6666
0040a2  db04              BLT      |L1.16558|
0040a4  4297              CMP      r7,r2                 ;6666
0040a6  dac6              BGE      |L1.16438|
0040a8  f1bc0f00          CMP      r12,#0                ;6666
0040ac  d1c3              BNE      |L1.16438|
                  |L1.16558|
0040ae  2803              CMP      r0,#3                 ;6668
0040b0  db04              BLT      |L1.16572|
0040b2  4590              CMP      r8,r2                 ;6668
0040b4  dabf              BGE      |L1.16438|
0040b6  f1b90f00          CMP      r9,#0                 ;6668
0040ba  d1bc              BNE      |L1.16438|
                  |L1.16572|
0040bc  f04f0000          MOV      r0,#0                 ;6671
0040c0  7020              STRB     r0,[r4,#0]            ;6671
0040c2  e62d              B        |L1.15648|
;;;6677   
                          ENDP

                  |L1.16580|
                          DCD      NUMDT
                  |L1.16584|
                          DCD      t_ext
                  |L1.16588|
                          DCD      ND_EXT

                          AREA ||area_number.2||, CODE, READONLY, ALIGN=2

                          EXPORTAS ||area_number.2||, ||.text||
                  samokalibr_init PROC
;;;218    //-----------------------------------------------
;;;219    void ke_start(char in)
000000  4902              LDR      r1,|L2.12|
;;;220    {          
000002  f24060f9          MOV      r0,#0x6f9
;;;221    ke_start_stat=(enum_ke_start_stat)0;		 
000006  8788              STRH     r0,[r1,#0x3c]
000008  4770              BX       lr
;;;222    
;;;223    if(spc_stat==spcVZ)ke_start_stat=kssNOT_VZ;
;;;224    else if(BAT_IS_ON[in]!=bisON)ke_start_stat=kssNOT_BAT;
;;;225    else if(bat[in]._av&(1<<0))ke_start_stat=kssNOT_BAT_AV;
;;;226    else if(bat[in]._temper_stat&(1<<1))ke_start_stat=kssNOT_BAT_AV_T;
;;;227    else if(bat[in]._av&(1<<1))ke_start_stat=kssNOT_BAT_AV_ASS;
;;;228    else if(bat[in]._Ib>IKB)ke_start_stat=kssNOT_BAT_ZAR;
;;;229    else if(bat[in]._Ib<-IKB)ke_start_stat=kssNOT_BAT_RAZR;
;;;230    else if((spc_stat==spcKE)&&(spc_bat==0))ke_start_stat=kssNOT_KE1;
;;;231    else if((spc_stat==spcKE)&&(spc_bat==1))ke_start_stat=kssNOT_KE2;
;;;232    else 
;;;233    	{
;;;234    
;;;235    	ke_start_stat=kssYES;
;;;236    
;;;237    	spc_stat=spcKE;
;;;238    	__ee_spc_stat=spcKE;
;;;239    	lc640_write_int(EE_SPC_STAT,__ee_spc_stat);
;;;240    	
;;;241    	spc_bat=in;
;;;242    	__ee_spc_bat=in;
;;;243    	lc640_write_int(EE_SPC_BAT,__ee_spc_bat);
;;;244    
;;;245    	bat[in]._zar_cnt_ke=0;
;;;246    	lc640_write_int(ADR_EE_BAT_ZAR_CNT_KE[in],0);
;;;247    	
;;;248    	spc_phase=0;
;;;249    	__ee_spc_phase=0;
;;;250    	lc640_write_int(EE_SPC_PHASE,__ee_spc_phase);
;;;251    
;;;252    	//ke_mem_hndl(in,lc640_read_int(ADR_EE_BAT_ZAR_CNT_KE[spc_bat]));
;;;253    
;;;254    		{					
;;;255    		signed short temp_temp;
;;;256    		signed char temp;
;;;257    		temp_temp=bat[in]._u_old[((bat_u_old_cnt+1)&0x07)]; 
;;;258    		    
;;;259    		temp=LPC_RTC->YEAR;
;;;260    		gran_char(&temp,1,99);
;;;261    		*((char*)(&(ke_date[0])))=temp;
;;;262    			
;;;263    		temp=LPC_RTC->MONTH;
;;;264    		gran_char(&temp,1,12);
;;;265    		*(((char*)(&(ke_date[0])))+1)=temp;
;;;266    		
;;;267    		temp=LPC_RTC->DOM;
;;;268    		gran_char(&temp,1,31);
;;;269    		*(((char*)(&(ke_date[0])))+2)=temp;			
;;;270    				
;;;271    		*(((char*)(&(ke_date[0])))+3)=*((char*)&temp_temp);
;;;272    		lc640_write_long(EE_SPC_KE_DATE0,ke_date[0]);
;;;273    
;;;274    		temp=LPC_RTC->HOUR;
;;;275    		gran_char(&temp,0,23);
;;;276    		*((char*)(&(ke_date[1])))=temp;
;;;277                   
;;;278    		temp=LPC_RTC->MIN;
;;;279    		gran_char(&temp,0,59);
;;;280    		*(((char*)(&(ke_date[1])))+1)=temp;
;;;281    	          
;;;282    		temp=LPC_RTC->SEC;
;;;283    		gran_char(&temp,0,59);
;;;284    		*(((char*)(&(ke_date[1])))+2)=temp;
;;;285    			
;;;286    		*(((char*)(&(ke_date[1])))+3)=*(((char*)&temp_temp)+1);
;;;287    		lc640_write_long(EE_SPC_KE_DATE1,ke_date[1]);
;;;288    		}
;;;289    
;;;290    	}
;;;291    }
;;;292    
                          ENDP

00000a  0000              DCW      0x0000
                  |L2.12|
                          DCD      ||area_number.21||

                          AREA ||area_number.3||, CODE, READONLY, ALIGN=2

                          EXPORTAS ||area_number.3||, ||.text||
                  adc_drv6 PROC
;;;218    //-----------------------------------------------
;;;219    void ke_start(char in)
000000  e92d41f0          PUSH     {r4-r8,lr}
;;;220    {          
000004  4c80              LDR      r4,|L3.520|
;;;221    ke_start_stat=(enum_ke_start_stat)0;		 
000006  8860              LDRH     r0,[r4,#2]  ; adc_self_ch_buff
000008  8821              LDRH     r1,[r4,#0]  ; adc_self_ch_buff
00000a  1a40              SUBS     r0,r0,r1
00000c  b200              SXTH     r0,r0
;;;222    
;;;223    if(spc_stat==spcVZ)ke_start_stat=kssNOT_VZ;
00000e  f7fffffe          BL       abs_pal
000012  1da5              ADDS     r5,r4,#6
000014  8028              STRH     r0,[r5,#0]
000016  88a0              LDRH     r0,[r4,#4]  ; adc_self_ch_buff
;;;224    else if(BAT_IS_ON[in]!=bisON)ke_start_stat=kssNOT_BAT;
000018  8861              LDRH     r1,[r4,#2]  ; adc_self_ch_buff
00001a  1a40              SUBS     r0,r0,r1
00001c  b200              SXTH     r0,r0
00001e  f7fffffe          BL       abs_pal
000022  8068              STRH     r0,[r5,#2]
000024  88a0              LDRH     r0,[r4,#4]  ; adc_self_ch_buff
;;;225    else if(bat[in]._av&(1<<0))ke_start_stat=kssNOT_BAT_AV;
;;;226    else if(bat[in]._temper_stat&(1<<1))ke_start_stat=kssNOT_BAT_AV_T;
;;;227    else if(bat[in]._av&(1<<1))ke_start_stat=kssNOT_BAT_AV_ASS;
;;;228    else if(bat[in]._Ib>IKB)ke_start_stat=kssNOT_BAT_ZAR;
;;;229    else if(bat[in]._Ib<-IKB)ke_start_stat=kssNOT_BAT_RAZR;
;;;230    else if((spc_stat==spcKE)&&(spc_bat==0))ke_start_stat=kssNOT_KE1;
;;;231    else if((spc_stat==spcKE)&&(spc_bat==1))ke_start_stat=kssNOT_KE2;
;;;232    else 
;;;233    	{
;;;234    
;;;235    	ke_start_stat=kssYES;
;;;236    
;;;237    	spc_stat=spcKE;
;;;238    	__ee_spc_stat=spcKE;
;;;239    	lc640_write_int(EE_SPC_STAT,__ee_spc_stat);
;;;240    	
;;;241    	spc_bat=in;
;;;242    	__ee_spc_bat=in;
;;;243    	lc640_write_int(EE_SPC_BAT,__ee_spc_bat);
;;;244    
;;;245    	bat[in]._zar_cnt_ke=0;
;;;246    	lc640_write_int(ADR_EE_BAT_ZAR_CNT_KE[in],0);
;;;247    	
;;;248    	spc_phase=0;
;;;249    	__ee_spc_phase=0;
;;;250    	lc640_write_int(EE_SPC_PHASE,__ee_spc_phase);
;;;251    
;;;252    	//ke_mem_hndl(in,lc640_read_int(ADR_EE_BAT_ZAR_CNT_KE[spc_bat]));
;;;253    
;;;254    		{					
;;;255    		signed short temp_temp;
;;;256    		signed char temp;
;;;257    		temp_temp=bat[in]._u_old[((bat_u_old_cnt+1)&0x07)]; 
;;;258    		    
;;;259    		temp=LPC_RTC->YEAR;
;;;260    		gran_char(&temp,1,99);
;;;261    		*((char*)(&(ke_date[0])))=temp;
;;;262    			
;;;263    		temp=LPC_RTC->MONTH;
;;;264    		gran_char(&temp,1,12);
;;;265    		*(((char*)(&(ke_date[0])))+1)=temp;
;;;266    		
;;;267    		temp=LPC_RTC->DOM;
;;;268    		gran_char(&temp,1,31);
;;;269    		*(((char*)(&(ke_date[0])))+2)=temp;			
;;;270    				
;;;271    		*(((char*)(&(ke_date[0])))+3)=*((char*)&temp_temp);
;;;272    		lc640_write_long(EE_SPC_KE_DATE0,ke_date[0]);
;;;273    
;;;274    		temp=LPC_RTC->HOUR;
;;;275    		gran_char(&temp,0,23);
;;;276    		*((char*)(&(ke_date[1])))=temp;
;;;277                   
;;;278    		temp=LPC_RTC->MIN;
;;;279    		gran_char(&temp,0,59);
;;;280    		*(((char*)(&(ke_date[1])))+1)=temp;
;;;281    	          
;;;282    		temp=LPC_RTC->SEC;
;;;283    		gran_char(&temp,0,59);
;;;284    		*(((char*)(&(ke_date[1])))+2)=temp;
;;;285    			
;;;286    		*(((char*)(&(ke_date[1])))+3)=*(((char*)&temp_temp)+1);
;;;287    		lc640_write_long(EE_SPC_KE_DATE1,ke_date[1]);
;;;288    		}
;;;289    
;;;290    	}
;;;291    }
000026  8821              LDRH     r1,[r4,#0]  ; adc_self_ch_buff
000028  1a40              SUBS     r0,r0,r1
00002a  b200              SXTH     r0,r0                 ;223
00002c  f7fffffe          BL       abs_pal
000030  80a8              STRH     r0,[r5,#4]            ;225
000032  f44f7196          MOV      r1,#0x12c             ;225
000036  f1a40692          SUB      r6,r4,#0x92           ;225
00003a  4288              CMP      r0,r1                 ;225
00003c  da02              BGE      |L3.68|
00003e  88a0              LDRH     r0,[r4,#4]            ;225  ; adc_self_ch_buff
000040  8530              STRH     r0,[r6,#0x28]         ;225
000042  e00c              B        |L3.94|
                  |L3.68|
000044  f9b50002          LDRSH    r0,[r5,#2]            ;225  ; adc_self_ch_disp
000048  4288              CMP      r0,r1                 ;225
00004a  da02              BGE      |L3.82|
00004c  8860              LDRH     r0,[r4,#2]            ;226  ; adc_self_ch_buff
00004e  8530              STRH     r0,[r6,#0x28]         ;226
000050  e005              B        |L3.94|
                  |L3.82|
000052  f9b50000          LDRSH    r0,[r5,#0]            ;226  ; adc_self_ch_disp
000056  4288              CMP      r0,r1                 ;226
000058  da01              BGE      |L3.94|
00005a  8820              LDRH     r0,[r4,#0]  ; adc_self_ch_buff
00005c  8530              STRH     r0,[r6,#0x28]         ;227
                  |L3.94|
00005e  78b7              LDRB     r7,[r6,#2]            ;227  ; adc_ch_net
000060  2200              MOVS     r2,#0                 ;227
000062  b3f7              CBZ      r7,|L3.226|
000064  7973              LDRB     r3,[r6,#5]            ;227  ; adc_window_flag
000066  4869              LDR      r0,|L3.524|
000068  b18b              CBZ      r3,|L3.142|
00006a  f9b61028          LDRSH    r1,[r6,#0x28]         ;228  ; adc_result
00006e  6804              LDR      r4,[r0,#0]            ;228  ; main_power_buffer
000070  eb0404a1          ADD      r4,r4,r1,ASR #2       ;228
000074  6004              STR      r4,[r0,#0]            ;228  ; main_power_buffer
000076  6844              LDR      r4,[r0,#4]            ;228  ; main_power_buffer
000078  eb0404a1          ADD      r4,r4,r1,ASR #2       ;228
00007c  6044              STR      r4,[r0,#4]  ; main_power_buffer
00007e  6884              LDR      r4,[r0,#8]            ;229  ; main_power_buffer
000080  eb0404a1          ADD      r4,r4,r1,ASR #2       ;229
000084  6084              STR      r4,[r0,#8]            ;229  ; main_power_buffer
000086  68c4              LDR      r4,[r0,#0xc]          ;229  ; main_power_buffer
000088  eb0401a1          ADD      r1,r4,r1,ASR #2       ;229
00008c  60c1              STR      r1,[r0,#0xc]          ;221  ; main_power_buffer
                  |L3.142|
00008e  f9b61028          LDRSH    r1,[r6,#0x28]         ;230  ; adc_result
000092  2964              CMP      r1,#0x64              ;230
000094  da04              BGE      |L3.160|
000096  8db1              LDRH     r1,[r6,#0x2c]         ;231  ; adc_zero_cnt
000098  f1010101          ADD      r1,r1,#1              ;231
00009c  85b1              STRH     r1,[r6,#0x2c]         ;230
00009e  e000              B        |L3.162|
                  |L3.160|
0000a0  85b2              STRH     r2,[r6,#0x2c]         ;230
                  |L3.162|
0000a2  f9b6402c          LDRSH    r4,[r6,#0x2c]  ; adc_zero_cnt
0000a6  f44f61fa          MOV      r1,#0x7d0             ;231
0000aa  428c              CMP      r4,r1                 ;235
0000ac  db05              BLT      |L3.186|
0000ae  85b1              STRH     r1,[r6,#0x2c]         ;237
0000b0  6002              STR      r2,[r0,#0]            ;238  ; main_power_buffer
0000b2  6042              STR      r2,[r0,#4]            ;238  ; main_power_buffer
0000b4  6082              STR      r2,[r0,#8]            ;239  ; main_power_buffer
0000b6  60c2              STR      r2,[r0,#0xc]          ;239  ; main_power_buffer
0000b8  84f2              STRH     r2,[r6,#0x26]         ;239
                  |L3.186|
0000ba  8db1              LDRH     r1,[r6,#0x2c]         ;239  ; adc_zero_cnt
0000bc  2905              CMP      r1,#5                 ;239
0000be  d14f              BNE      |L3.352|
0000c0  b1bb              CBZ      r3,|L3.242|
0000c2  8d71              LDRH     r1,[r6,#0x2a]         ;242  ; adc_gorb_cnt
0000c4  f1010101          ADD      r1,r1,#1              ;243
0000c8  b209              SXTH     r1,r1                 ;243
0000ca  8571              STRH     r1,[r6,#0x2a]         ;243
0000cc  f5b17f00          CMP      r1,#0x200             ;243
0000d0  db00              BLT      |L3.212|
0000d2  8572              STRH     r2,[r6,#0x2a]         ;246
                  |L3.212|
0000d4  f9b6102a          LDRSH    r1,[r6,#0x2a]         ;246  ; adc_gorb_cnt
0000d8  064c              LSLS     r4,r1,#25             ;246
0000da  d10a              BNE      |L3.242|
0000dc  ea4f11e1          ASR      r1,r1,#7              ;248
0000e0  e000              B        |L3.228|
                  |L3.226|
0000e2  e015              B        |L3.272|
                  |L3.228|
0000e4  f8504021          LDR      r4,[r0,r1,LSL #2]     ;250
0000e8  ea4f2424          ASR      r4,r4,#8              ;250
0000ec  84f4              STRH     r4,[r6,#0x26]         ;257
0000ee  f8402021          STR      r2,[r0,r1,LSL #2]     ;257
                  |L3.242|
0000f2  f9b6002e          LDRSH    r0,[r6,#0x2e]         ;257  ; adc_window_cnt
0000f6  2896              CMP      r0,#0x96              ;257
0000f8  dd01              BLE      |L3.254|
0000fa  b103              CBZ      r3,|L3.254|
0000fc  7172              STRB     r2,[r6,#5]            ;257
                  |L3.254|
0000fe  381f              SUBS     r0,r0,#0x1f           ;257
000100  2827              CMP      r0,#0x27              ;259
000102  d22d              BCS      |L3.352|
000104  7970              LDRB     r0,[r6,#5]            ;259  ; adc_window_flag
000106  bb58              CBNZ     r0,|L3.352|
000108  f04f0001          MOV      r0,#1                 ;260
00010c  7170              STRB     r0,[r6,#5]            ;260
00010e  e027              B        |L3.352|
                  |L3.272|
000110  483f              LDR      r0,|L3.528|
000112  78f5              LDRB     r5,[r6,#3]            ;260  ; adc_ch
000114  7933              LDRB     r3,[r6,#4]            ;261  ; adc_ch_cnt
000116  eb001485          ADD      r4,r0,r5,LSL #6       ;261
00011a  f9b61028          LDRSH    r1,[r6,#0x28]         ;261  ; adc_result
00011e  f8441023          STR      r1,[r4,r3,LSL #2]     ;263
000122  0798              LSLS     r0,r3,#30             ;264
000124  d10f              BNE      |L3.326|
000126  4601              MOV      r1,r0                 ;264
                  |L3.296|
000128  f854c020          LDR      r12,[r4,r0,LSL #2]    ;264
00012c  4461              ADD      r1,r1,r12             ;265
00012e  f1000001          ADD      r0,r0,#1              ;265
000132  b2c0              UXTB     r0,r0                 ;267
000134  2810              CMP      r0,#0x10              ;267
000136  d3f7              BCC      |L3.296|
000138  ea4f1021          ASR      r0,r1,#4              ;268
00013c  4933              LDR      r1,|L3.524|
00013e  f1a10120          SUB      r1,r1,#0x20           ;268
000142  f8210015          STRH     r0,[r1,r5,LSL #1]     ;269
                  |L3.326|
000146  1c6d              ADDS     r5,r5,#1              ;271
000148  b2e8              UXTB     r0,r5                 ;271
00014a  70f0              STRB     r0,[r6,#3]            ;271
00014c  2810              CMP      r0,#0x10              ;272
00014e  d307              BCC      |L3.352|
000150  70f2              STRB     r2,[r6,#3]            ;272
000152  f1030301          ADD      r3,r3,#1              ;272
000156  b2d8              UXTB     r0,r3                 ;274
000158  7130              STRB     r0,[r6,#4]            ;274
00015a  2810              CMP      r0,#0x10              ;275
00015c  d300              BCC      |L3.352|
00015e  7132              STRB     r2,[r6,#4]            ;275
                  |L3.352|
000160  7072              STRB     r2,[r6,#1]            ;275
000162  f1070701          ADD      r7,r7,#1              ;275
000166  f0070001          AND      r0,r7,#1              ;276
00016a  70b0              STRB     r0,[r6,#2]            ;278
00016c  4a29              LDR      r2,|L3.532|
00016e  b130              CBZ      r0,|L3.382|
000170  6810              LDR      r0,[r2,#0]            ;279
000172  f02000ff          BIC      r0,r0,#0xff           ;279
000176  f1000004          ADD      r0,r0,#4              ;279
00017a  6010              STR      r0,[r2,#0]            ;280
00017c  e03d              B        |L3.506|
                  |L3.382|
00017e  78f1              LDRB     r1,[r6,#3]            ;282  ; adc_ch
000180  0708              LSLS     r0,r1,#28             ;282
000182  d406              BMI      |L3.402|
000184  6810              LDR      r0,[r2,#0]            ;283
000186  f02000ff          BIC      r0,r0,#0xff           ;283
00018a  f1000001          ADD      r0,r0,#1              ;283
00018e  6010              STR      r0,[r2,#0]            ;284
000190  e005              B        |L3.414|
                  |L3.402|
000192  6810              LDR      r0,[r2,#0]            ;286
000194  f02000ff          BIC      r0,r0,#0xff           ;286
000198  f1000002          ADD      r0,r0,#2              ;287
00019c  6010              STR      r0,[r2,#0]            ;287
                  |L3.414|
00019e  481e              LDR      r0,|L3.536|
0001a0  6803              LDR      r3,[r0,#0]            ;287
0001a2  f0435380          ORR      r3,r3,#0x10000000
0001a6  6003              STR      r3,[r0,#0]            ;231
0001a8  6a03              LDR      r3,[r0,#0x20]         ;231
0001aa  f0434380          ORR      r3,r3,#0x40000000     ;231
0001ae  6203              STR      r3,[r0,#0x20]
0001b0  6e03              LDR      r3,[r0,#0x60]
0001b2  f0436380          ORR      r3,r3,#0x4000000
0001b6  6603              STR      r3,[r0,#0x60]
0001b8  07cb              LSLS     r3,r1,#31
0001ba  d00a              BEQ      |L3.466|
0001bc  6943              LDR      r3,[r0,#0x14]
0001be  f0435380          ORR      r3,r3,#0x10000000
0001c2  6143              STR      r3,[r0,#0x14]
                  |L3.452|
0001c4  078b              LSLS     r3,r1,#30
0001c6  d409              BMI      |L3.476|
0001c8  6b43              LDR      r3,[r0,#0x34]
0001ca  f0234380          BIC      r3,r3,#0x40000000
0001ce  6343              STR      r3,[r0,#0x34]
0001d0  e008              B        |L3.484|
                  |L3.466|
0001d2  6943              LDR      r3,[r0,#0x14]
0001d4  f0235380          BIC      r3,r3,#0x10000000
0001d8  6143              STR      r3,[r0,#0x14]
0001da  e7f3              B        |L3.452|
                  |L3.476|
0001dc  6b43              LDR      r3,[r0,#0x34]
0001de  f0434380          ORR      r3,r3,#0x40000000
0001e2  6343              STR      r3,[r0,#0x34]
                  |L3.484|
0001e4  0749              LSLS     r1,r1,#29
0001e6  d404              BMI      |L3.498|
0001e8  6f41              LDR      r1,[r0,#0x74]
0001ea  f0216180          BIC      r1,r1,#0x4000000
0001ee  6741              STR      r1,[r0,#0x74]
0001f0  e003              B        |L3.506|
                  |L3.498|
0001f2  6f41              LDR      r1,[r0,#0x74]
0001f4  f0416180          ORR      r1,r1,#0x4000000
0001f8  6741              STR      r1,[r0,#0x74]
                  |L3.506|
0001fa  6810              LDR      r0,[r2,#0]
0001fc  f0407080          ORR      r0,r0,#0x1000000
000200  6010              STR      r0,[r2,#0]
000202  e8bd81f0          POP      {r4-r8,pc}
;;;292    
                          ENDP

000206  0000              DCW      0x0000
                  |L3.520|
                          DCD      ||area_number.21||+0x92
                  |L3.524|
                          DCD      ||.bss||+0x420
                  |L3.528|
                          DCD      ||.bss||
                  |L3.532|
                          DCD      0x40034000
                  |L3.536|
                          DCD      0x2009c000

                          AREA ||area_number.4||, CODE, READONLY, ALIGN=2

                          EXPORTAS ||area_number.4||, ||.text||
                  inv_drv PROC
;;;218    //-----------------------------------------------
;;;219    void ke_start(char in)
000000  b570              PUSH     {r4-r6,lr}
;;;220    {          
000002  4604              MOV      r4,r0
000004  f04f0207          MOV      r2,#7
;;;221    ke_start_stat=(enum_ke_start_stat)0;		 
000008  f04f0101          MOV      r1,#1
00000c  48a4              LDR      r0,|L4.672|
;;;222    
;;;223    if(spc_stat==spcVZ)ke_start_stat=kssNOT_VZ;
00000e  f7fffffe          BL       gran_char
000012  48a4              LDR      r0,|L4.676|
000014  eb040144          ADD      r1,r4,r4,LSL #1
;;;224    else if(BAT_IS_ON[in]!=bisON)ke_start_stat=kssNOT_BAT;
000018  eb001541          ADD      r5,r0,r1,LSL #5
00001c  f8950047          LDRB     r0,[r5,#0x47]
000020  f8951046          LDRB     r1,[r5,#0x46]
000024  ea800001          EOR      r0,r0,r1
;;;225    else if(bat[in]._av&(1<<0))ke_start_stat=kssNOT_BAT_AV;
;;;226    else if(bat[in]._temper_stat&(1<<1))ke_start_stat=kssNOT_BAT_AV_T;
;;;227    else if(bat[in]._av&(1<<1))ke_start_stat=kssNOT_BAT_AV_ASS;
;;;228    else if(bat[in]._Ib>IKB)ke_start_stat=kssNOT_BAT_ZAR;
;;;229    else if(bat[in]._Ib<-IKB)ke_start_stat=kssNOT_BAT_RAZR;
;;;230    else if((spc_stat==spcKE)&&(spc_bat==0))ke_start_stat=kssNOT_KE1;
;;;231    else if((spc_stat==spcKE)&&(spc_bat==1))ke_start_stat=kssNOT_KE2;
;;;232    else 
;;;233    	{
;;;234    
;;;235    	ke_start_stat=kssYES;
;;;236    
;;;237    	spc_stat=spcKE;
;;;238    	__ee_spc_stat=spcKE;
;;;239    	lc640_write_int(EE_SPC_STAT,__ee_spc_stat);
;;;240    	
;;;241    	spc_bat=in;
;;;242    	__ee_spc_bat=in;
;;;243    	lc640_write_int(EE_SPC_BAT,__ee_spc_bat);
;;;244    
;;;245    	bat[in]._zar_cnt_ke=0;
;;;246    	lc640_write_int(ADR_EE_BAT_ZAR_CNT_KE[in],0);
;;;247    	
;;;248    	spc_phase=0;
;;;249    	__ee_spc_phase=0;
;;;250    	lc640_write_int(EE_SPC_PHASE,__ee_spc_phase);
;;;251    
;;;252    	//ke_mem_hndl(in,lc640_read_int(ADR_EE_BAT_ZAR_CNT_KE[spc_bat]));
;;;253    
;;;254    		{					
;;;255    		signed short temp_temp;
;;;256    		signed char temp;
;;;257    		temp_temp=bat[in]._u_old[((bat_u_old_cnt+1)&0x07)]; 
;;;258    		    
;;;259    		temp=LPC_RTC->YEAR;
;;;260    		gran_char(&temp,1,99);
;;;261    		*((char*)(&(ke_date[0])))=temp;
;;;262    			
;;;263    		temp=LPC_RTC->MONTH;
;;;264    		gran_char(&temp,1,12);
;;;265    		*(((char*)(&(ke_date[0])))+1)=temp;
;;;266    		
;;;267    		temp=LPC_RTC->DOM;
;;;268    		gran_char(&temp,1,31);
;;;269    		*(((char*)(&(ke_date[0])))+2)=temp;			
;;;270    				
;;;271    		*(((char*)(&(ke_date[0])))+3)=*((char*)&temp_temp);
;;;272    		lc640_write_long(EE_SPC_KE_DATE0,ke_date[0]);
;;;273    
;;;274    		temp=LPC_RTC->HOUR;
;;;275    		gran_char(&temp,0,23);
;;;276    		*((char*)(&(ke_date[1])))=temp;
;;;277                   
;;;278    		temp=LPC_RTC->MIN;
;;;279    		gran_char(&temp,0,59);
;;;280    		*(((char*)(&(ke_date[1])))+1)=temp;
;;;281    	          
;;;282    		temp=LPC_RTC->SEC;
;;;283    		gran_char(&temp,0,59);
;;;284    		*(((char*)(&(ke_date[1])))+2)=temp;
;;;285    			
;;;286    		*(((char*)(&(ke_date[1])))+3)=*(((char*)&temp_temp)+1);
;;;287    		lc640_write_long(EE_SPC_KE_DATE1,ke_date[1]);
;;;288    		}
;;;289    
;;;290    	}
;;;291    }
000028  4a9f              LDR      r2,|L4.680|
00002a  b100              CBZ      r0,|L4.46|
00002c  7050              STRB     r0,[r2,#1]
                  |L4.46|
00002e  ea010100          AND      r1,r1,r0              ;225
000032  b101              CBZ      r1,|L4.54|
000034  7091              STRB     r1,[r2,#2]            ;225
                  |L4.54|
000036  ea000301          AND      r3,r0,r1              ;225
00003a  07db              LSLS     r3,r3,#31             ;225
00003c  d027              BEQ      |L4.142|
00003e  78d0              LDRB     r0,[r2,#3]            ;225  ; plazma_inv
000040  f1000001          ADD      r0,r0,#1              ;225
000044  70d0              STRB     r0,[r2,#3]            ;225
000046  b134              CBZ      r4,|L4.86|
000048  2c01              CMP      r4,#1                 ;225
00004a  d00b              BEQ      |L4.100|
00004c  2c02              CMP      r4,#2                 ;226
00004e  d010              BEQ      |L4.114|
000050  2c03              CMP      r4,#3                 ;226
000052  d015              BEQ      |L4.128|
000054  e120              B        |L4.664|
                  |L4.86|
000056  2301              MOVS     r3,#1                 ;226
000058  461a              MOV      r2,r3                 ;226
00005a  210e              MOVS     r1,#0xe
00005c  a093              ADR      r0,|L4.684|
00005e  f7fffffe          BL       snmp_trap_send
000062  e119              B        |L4.664|
                  |L4.100|
000064  2301              MOVS     r3,#1                 ;227
000066  2202              MOVS     r2,#2
000068  210e              MOVS     r1,#0xe               ;228
00006a  a097              ADR      r0,|L4.712|
00006c  f7fffffe          BL       snmp_trap_send
000070  e112              B        |L4.664|
                  |L4.114|
000072  2301              MOVS     r3,#1                 ;228
000074  2203              MOVS     r2,#3                 ;228
000076  210e              MOVS     r1,#0xe               ;228
000078  a09a              ADR      r0,|L4.740|
00007a  f7fffffe          BL       snmp_trap_send
00007e  e10b              B        |L4.664|
                  |L4.128|
000080  2301              MOVS     r3,#1                 ;229
000082  2204              MOVS     r2,#4                 ;229
000084  210e              MOVS     r1,#0xe               ;229
000086  a09e              ADR      r0,|L4.768|
000088  f7fffffe          BL       snmp_trap_send
00008c  e104              B        |L4.664|
                  |L4.142|
00008e  0783              LSLS     r3,r0,#30             ;230
000090  d529              BPL      |L4.230|
000092  078b              LSLS     r3,r1,#30             ;230
000094  d527              BPL      |L4.230|
000096  78d0              LDRB     r0,[r2,#3]            ;231  ; plazma_inv
000098  f1000001          ADD      r0,r0,#1              ;231
00009c  70d0              STRB     r0,[r2,#3]            ;230
00009e  b134              CBZ      r4,|L4.174|
0000a0  2c01              CMP      r4,#1                 ;230
0000a2  d00b              BEQ      |L4.188|
0000a4  2c02              CMP      r4,#2                 ;231
0000a6  d010              BEQ      |L4.202|
0000a8  2c03              CMP      r4,#3                 ;235
0000aa  d015              BEQ      |L4.216|
0000ac  e0f4              B        |L4.664|
                  |L4.174|
0000ae  2302              MOVS     r3,#2                 ;237
0000b0  2201              MOVS     r2,#1                 ;238
0000b2  210e              MOVS     r1,#0xe               ;238
0000b4  a099              ADR      r0,|L4.796|
0000b6  f7fffffe          BL       snmp_trap_send
0000ba  e0ed              B        |L4.664|
                  |L4.188|
0000bc  2302              MOVS     r3,#2                 ;239
0000be  461a              MOV      r2,r3                 ;241
0000c0  210e              MOVS     r1,#0xe               ;242
0000c2  a09d              ADR      r0,|L4.824|
0000c4  f7fffffe          BL       snmp_trap_send
0000c8  e0e6              B        |L4.664|
                  |L4.202|
0000ca  2302              MOVS     r3,#2                 ;243
0000cc  2203              MOVS     r2,#3                 ;243
0000ce  210e              MOVS     r1,#0xe               ;245
0000d0  a0a0              ADR      r0,|L4.852|
0000d2  f7fffffe          BL       snmp_trap_send
0000d6  e0df              B        |L4.664|
                  |L4.216|
0000d8  2302              MOVS     r3,#2                 ;246
0000da  2204              MOVS     r2,#4                 ;246
0000dc  210e              MOVS     r1,#0xe               ;248
0000de  a0a4              ADR      r0,|L4.880|
0000e0  f7fffffe          BL       snmp_trap_send
0000e4  e0d8              B        |L4.664|
                  |L4.230|
0000e6  0743              LSLS     r3,r0,#29             ;250
0000e8  d529              BPL      |L4.318|
0000ea  074b              LSLS     r3,r1,#29             ;250
0000ec  d527              BPL      |L4.318|
0000ee  78d0              LDRB     r0,[r2,#3]            ;257  ; plazma_inv
0000f0  f1000001          ADD      r0,r0,#1              ;257
0000f4  70d0              STRB     r0,[r2,#3]            ;257
0000f6  b134              CBZ      r4,|L4.262|
0000f8  2c01              CMP      r4,#1                 ;257
0000fa  d00b              BEQ      |L4.276|
0000fc  2c02              CMP      r4,#2                 ;257
0000fe  d010              BEQ      |L4.290|
000100  2c03              CMP      r4,#3                 ;259
000102  d015              BEQ      |L4.304|
000104  e0c8              B        |L4.664|
                  |L4.262|
000106  2303              MOVS     r3,#3                 ;260
000108  2201              MOVS     r2,#1                 ;260
00010a  210e              MOVS     r1,#0xe               ;260
00010c  a09f              ADR      r0,|L4.908|
00010e  f7fffffe          BL       snmp_trap_send
000112  e0c1              B        |L4.664|
                  |L4.276|
000114  2303              MOVS     r3,#3                 ;261
000116  2202              MOVS     r2,#2                 ;261
000118  210e              MOVS     r1,#0xe               ;261
00011a  a0a3              ADR      r0,|L4.936|
00011c  f7fffffe          BL       snmp_trap_send
000120  e0ba              B        |L4.664|
                  |L4.290|
000122  2303              MOVS     r3,#3                 ;264
000124  461a              MOV      r2,r3                 ;264
000126  210e              MOVS     r1,#0xe               ;264
000128  a0a6              ADR      r0,|L4.964|
00012a  f7fffffe          BL       snmp_trap_send
00012e  e0b3              B        |L4.664|
                  |L4.304|
000130  2303              MOVS     r3,#3                 ;265
000132  2204              MOVS     r2,#4                 ;267
000134  210e              MOVS     r1,#0xe               ;267
000136  a0aa              ADR      r0,|L4.992|
000138  f7fffffe          BL       snmp_trap_send
00013c  e0ac              B        |L4.664|
                  |L4.318|
00013e  0703              LSLS     r3,r0,#28             ;268
000140  d529              BPL      |L4.406|
000142  070b              LSLS     r3,r1,#28             ;269
000144  d527              BPL      |L4.406|
000146  78d0              LDRB     r0,[r2,#3]            ;271  ; plazma_inv
000148  f1000001          ADD      r0,r0,#1              ;271
00014c  70d0              STRB     r0,[r2,#3]            ;272
00014e  b134              CBZ      r4,|L4.350|
000150  2c01              CMP      r4,#1                 ;272
000152  d00b              BEQ      |L4.364|
000154  2c02              CMP      r4,#2                 ;272
000156  d010              BEQ      |L4.378|
000158  2c03              CMP      r4,#3                 ;274
00015a  d015              BEQ      |L4.392|
00015c  e09c              B        |L4.664|
                  |L4.350|
00015e  2304              MOVS     r3,#4                 ;275
000160  2201              MOVS     r2,#1                 ;275
000162  210e              MOVS     r1,#0xe               ;275
000164  a0a5              ADR      r0,|L4.1020|
000166  f7fffffe          BL       snmp_trap_send
00016a  e095              B        |L4.664|
                  |L4.364|
00016c  2304              MOVS     r3,#4                 ;278
00016e  2202              MOVS     r2,#2                 ;279
000170  210e              MOVS     r1,#0xe               ;279
000172  a0ab              ADR      r0,|L4.1056|
000174  f7fffffe          BL       snmp_trap_send
000178  e08e              B        |L4.664|
                  |L4.378|
00017a  2304              MOVS     r3,#4                 ;280
00017c  2203              MOVS     r2,#3                 ;280
00017e  210e              MOVS     r1,#0xe               ;282
000180  a0b0              ADR      r0,|L4.1092|
000182  f7fffffe          BL       snmp_trap_send
000186  e087              B        |L4.664|
                  |L4.392|
000188  2304              MOVS     r3,#4                 ;283
00018a  461a              MOV      r2,r3                 ;283
00018c  210e              MOVS     r1,#0xe               ;284
00018e  a0b6              ADR      r0,|L4.1128|
000190  f7fffffe          BL       snmp_trap_send
000194  e080              B        |L4.664|
                  |L4.406|
000196  06c3              LSLS     r3,r0,#27             ;286
000198  d529              BPL      |L4.494|
00019a  06cb              LSLS     r3,r1,#27             ;287
00019c  d527              BPL      |L4.494|
00019e  78d0              LDRB     r0,[r2,#3]            ;287  ; plazma_inv
0001a0  f1000001          ADD      r0,r0,#1              ;287
0001a4  70d0              STRB     r0,[r2,#3]
0001a6  b134              CBZ      r4,|L4.438|
0001a8  2c01              CMP      r4,#1                 ;231
0001aa  d00b              BEQ      |L4.452|
0001ac  2c02              CMP      r4,#2
0001ae  d010              BEQ      |L4.466|
0001b0  2c03              CMP      r4,#3
0001b2  d015              BEQ      |L4.480|
0001b4  e070              B        |L4.664|
                  |L4.438|
0001b6  2305              MOVS     r3,#5
0001b8  2201              MOVS     r2,#1
0001ba  210e              MOVS     r1,#0xe
0001bc  a0b3              ADR      r0,|L4.1164|
0001be  f7fffffe          BL       snmp_trap_send
0001c2  e069              B        |L4.664|
                  |L4.452|
0001c4  2305              MOVS     r3,#5
0001c6  2202              MOVS     r2,#2
0001c8  210e              MOVS     r1,#0xe
0001ca  a0b9              ADR      r0,|L4.1200|
0001cc  f7fffffe          BL       snmp_trap_send
0001d0  e062              B        |L4.664|
                  |L4.466|
0001d2  2305              MOVS     r3,#5
0001d4  2203              MOVS     r2,#3
0001d6  210e              MOVS     r1,#0xe
0001d8  a0be              ADR      r0,|L4.1236|
0001da  f7fffffe          BL       snmp_trap_send
0001de  e05b              B        |L4.664|
                  |L4.480|
0001e0  2305              MOVS     r3,#5
0001e2  2204              MOVS     r2,#4
0001e4  210e              MOVS     r1,#0xe
0001e6  a0c4              ADR      r0,|L4.1272|
0001e8  f7fffffe          BL       snmp_trap_send
0001ec  e054              B        |L4.664|
                  |L4.494|
0001ee  0683              LSLS     r3,r0,#26
0001f0  d529              BPL      |L4.582|
0001f2  068b              LSLS     r3,r1,#26
0001f4  d527              BPL      |L4.582|
0001f6  78d0              LDRB     r0,[r2,#3]  ; plazma_inv
0001f8  f1000001          ADD      r0,r0,#1
0001fc  70d0              STRB     r0,[r2,#3]
0001fe  b134              CBZ      r4,|L4.526|
000200  2c01              CMP      r4,#1
000202  d00b              BEQ      |L4.540|
000204  2c02              CMP      r4,#2
000206  d010              BEQ      |L4.554|
000208  2c03              CMP      r4,#3
00020a  d015              BEQ      |L4.568|
00020c  e044              B        |L4.664|
                  |L4.526|
00020e  2306              MOVS     r3,#6
000210  2201              MOVS     r2,#1
000212  210e              MOVS     r1,#0xe
000214  a0c1              ADR      r0,|L4.1308|
000216  f7fffffe          BL       snmp_trap_send
00021a  e03d              B        |L4.664|
                  |L4.540|
00021c  2306              MOVS     r3,#6
00021e  2202              MOVS     r2,#2
000220  210e              MOVS     r1,#0xe
000222  a0c7              ADR      r0,|L4.1344|
000224  f7fffffe          BL       snmp_trap_send
000228  e036              B        |L4.664|
                  |L4.554|
00022a  2306              MOVS     r3,#6
00022c  2203              MOVS     r2,#3
00022e  210e              MOVS     r1,#0xe
000230  a0cc              ADR      r0,|L4.1380|
000232  f7fffffe          BL       snmp_trap_send
000236  e02f              B        |L4.664|
                  |L4.568|
000238  2306              MOVS     r3,#6
00023a  2204              MOVS     r2,#4
00023c  210e              MOVS     r1,#0xe
00023e  a0d2              ADR      r0,|L4.1416|
000240  f7fffffe          BL       snmp_trap_send
000244  e028              B        |L4.664|
                  |L4.582|
000246  b300              CBZ      r0,|L4.650|
000248  b9f9              CBNZ     r1,|L4.650|
00024a  78d0              LDRB     r0,[r2,#3]  ; plazma_inv
00024c  f1000001          ADD      r0,r0,#1
000250  70d0              STRB     r0,[r2,#3]
000252  b134              CBZ      r4,|L4.610|
000254  2c01              CMP      r4,#1
000256  d00b              BEQ      |L4.624|
000258  2c02              CMP      r4,#2
00025a  d010              BEQ      |L4.638|
00025c  2c03              CMP      r4,#3
00025e  d015              BEQ      |L4.652|
000260  e01a              B        |L4.664|
                  |L4.610|
000262  2300              MOVS     r3,#0
000264  2201              MOVS     r2,#1
000266  210e              MOVS     r1,#0xe
000268  a0d0              ADR      r0,|L4.1452|
00026a  f7fffffe          BL       snmp_trap_send
00026e  e013              B        |L4.664|
                  |L4.624|
000270  2300              MOVS     r3,#0
000272  2202              MOVS     r2,#2
000274  210e              MOVS     r1,#0xe
000276  a0d2              ADR      r0,|L4.1472|
000278  f7fffffe          BL       snmp_trap_send
00027c  e00c              B        |L4.664|
                  |L4.638|
00027e  2300              MOVS     r3,#0
000280  2203              MOVS     r2,#3
000282  210e              MOVS     r1,#0xe
000284  a0d3              ADR      r0,|L4.1492|
000286  f7fffffe          BL       snmp_trap_send
                  |L4.650|
00028a  e005              B        |L4.664|
                  |L4.652|
00028c  2300              MOVS     r3,#0
00028e  2204              MOVS     r2,#4
000290  210e              MOVS     r1,#0xe
000292  a0d5              ADR      r0,|L4.1512|
000294  f7fffffe          BL       snmp_trap_send
                  |L4.664|
000298  f8150f46          LDRB     r0,[r5,#0x46]!
00029c  7068              STRB     r0,[r5,#1]
00029e  bd70              POP      {r4-r6,pc}
;;;292    
                          ENDP

                  |L4.672|
                          DCD      first_inv_slot
                  |L4.676|
                          DCD      inv
                  |L4.680|
                          DCD      ||area_number.21||+0x88
                  |L4.684|
0002ac  496e7665          DCB      "Invertor #1 Alarm, overload",0
0002b0  72746f72
0002b4  20233120
0002b8  416c6172
0002bc  6d2c206f
0002c0  7665726c
0002c4  6f616400
                  |L4.712|
0002c8  496e7665          DCB      "Invertor #2 Alarm, overload",0
0002cc  72746f72
0002d0  20233220
0002d4  416c6172
0002d8  6d2c206f
0002dc  7665726c
0002e0  6f616400
                  |L4.740|
0002e4  496e7665          DCB      "Invertor #3 Alarm, overload",0
0002e8  72746f72
0002ec  20233320
0002f0  416c6172
0002f4  6d2c206f
0002f8  7665726c
0002fc  6f616400
                  |L4.768|
000300  496e7665          DCB      "Invertor #4 Alarm, overload",0
000304  72746f72
000308  20233420
00030c  416c6172
000310  6d2c206f
000314  7665726c
000318  6f616400
                  |L4.796|
00031c  496e7665          DCB      "Invertor #1 Alarm, overheat",0
000320  72746f72
000324  20233120
000328  416c6172
00032c  6d2c206f
000330  76657268
000334  65617400
                  |L4.824|
000338  496e7665          DCB      "Invertor #2 Alarm, overheat",0
00033c  72746f72
000340  20233220
000344  416c6172
000348  6d2c206f
00034c  76657268
000350  65617400
                  |L4.852|
000354  496e7665          DCB      "Invertor #3 Alarm, overheat",0
000358  72746f72
00035c  20233320
000360  416c6172
000364  6d2c206f
000368  76657268
00036c  65617400
                  |L4.880|
000370  496e7665          DCB      "Invertor #4 Alarm, overheat",0
000374  72746f72
000378  20233420
00037c  416c6172
000380  6d2c206f
000384  76657268
000388  65617400
                  |L4.908|
00038c  496e7665          DCB      "Invertor #1 Alarm, is warm",0
000390  72746f72
000394  20233120
000398  416c6172
00039c  6d2c2069
0003a0  73207761
0003a4  726d00  
0003a7  00                DCB      0
                  |L4.936|
0003a8  496e7665          DCB      "Invertor #2 Alarm, is warm",0
0003ac  72746f72
0003b0  20233220
0003b4  416c6172
0003b8  6d2c2069
0003bc  73207761
0003c0  726d00  
0003c3  00                DCB      0
                  |L4.964|
0003c4  496e7665          DCB      "Invertor #3 Alarm, is warm",0
0003c8  72746f72
0003cc  20233320
0003d0  416c6172
0003d4  6d2c2069
0003d8  73207761
0003dc  726d00  
0003df  00                DCB      0
                  |L4.992|
0003e0  496e7665          DCB      "Invertor #4 Alarm, is warm",0
0003e4  72746f72
0003e8  20233420
0003ec  416c6172
0003f0  6d2c2069
0003f4  73207761
0003f8  726d00  
0003fb  00                DCB      0
                  |L4.1020|
0003fc  496e7665          DCB      "Invertor #1 Alarm, voltage is up",0
000400  72746f72
000404  20233120
000408  416c6172
00040c  6d2c2076
000410  6f6c7461
000414  67652069
000418  73207570
00041c  00      
00041d  00                DCB      0
00041e  00                DCB      0
00041f  00                DCB      0
                  |L4.1056|
000420  496e7665          DCB      "Invertor #2 Alarm, voltage is up",0
000424  72746f72
000428  20233220
00042c  416c6172
000430  6d2c2076
000434  6f6c7461
000438  67652069
00043c  73207570
000440  00      
000441  00                DCB      0
000442  00                DCB      0
000443  00                DCB      0
                  |L4.1092|
000444  496e7665          DCB      "Invertor #3 Alarm, voltage is up",0
000448  72746f72
00044c  20233320
000450  416c6172
000454  6d2c2076
000458  6f6c7461
00045c  67652069
000460  73207570
000464  00      
000465  00                DCB      0
000466  00                DCB      0
000467  00                DCB      0
                  |L4.1128|
000468  496e7665          DCB      "Invertor #4 Alarm, voltage is up",0
00046c  72746f72
000470  20233420
000474  416c6172
000478  6d2c2076
00047c  6f6c7461
000480  67652069
000484  73207570
000488  00      
000489  00                DCB      0
00048a  00                DCB      0
00048b  00                DCB      0
                  |L4.1164|
00048c  496e7665          DCB      "Invertor #1 Alarm, voltage is down",0
000490  72746f72
000494  20233120
000498  416c6172
00049c  6d2c2076
0004a0  6f6c7461
0004a4  67652069
0004a8  7320646f
0004ac  776e00  
0004af  00                DCB      0
                  |L4.1200|
0004b0  496e7665          DCB      "Invertor #2 Alarm, voltage is down",0
0004b4  72746f72
0004b8  20233220
0004bc  416c6172
0004c0  6d2c2076
0004c4  6f6c7461
0004c8  67652069
0004cc  7320646f
0004d0  776e00  
0004d3  00                DCB      0
                  |L4.1236|
0004d4  496e7665          DCB      "Invertor #3 Alarm, voltage is down",0
0004d8  72746f72
0004dc  20233320
0004e0  416c6172
0004e4  6d2c2076
0004e8  6f6c7461
0004ec  67652069
0004f0  7320646f
0004f4  776e00  
0004f7  00                DCB      0
                  |L4.1272|
0004f8  496e7665          DCB      "Invertor #4 Alarm, voltage is down",0
0004fc  72746f72
000500  20233420
000504  416c6172
000508  6d2c2076
00050c  6f6c7461
000510  67652069
000514  7320646f
000518  776e00  
00051b  00                DCB      0
                  |L4.1308|
00051c  496e7665          DCB      "Invertor #1 Alarm, output is offed",0
000520  72746f72
000524  20233120
000528  416c6172
00052c  6d2c206f
000530  75747075
000534  74206973
000538  206f6666
00053c  656400  
00053f  00                DCB      0
                  |L4.1344|
000540  496e7665          DCB      "Invertor #2 Alarm, output is offed",0
000544  72746f72
000548  20233220
00054c  416c6172
000550  6d2c206f
000554  75747075
000558  74206973
00055c  206f6666
000560  656400  
000563  00                DCB      0
                  |L4.1380|
000564  496e7665          DCB      "Invertor #3 Alarm, output is offed",0
000568  72746f72
00056c  20233320
000570  416c6172
000574  6d2c206f
000578  75747075
00057c  74206973
000580  206f6666
000584  656400  
000587  00                DCB      0
                  |L4.1416|
000588  496e7665          DCB      "Invertor #4 Alarm, output is offed",0
00058c  72746f72
000590  20233420
000594  416c6172
000598  6d2c206f
00059c  75747075
0005a0  74206973
0005a4  206f6666
0005a8  656400  
0005ab  00                DCB      0
                  |L4.1452|
0005ac  496e7665          DCB      "Invertor #1 is norm",0
0005b0  72746f72
0005b4  20233120
0005b8  6973206e
0005bc  6f726d00
                  |L4.1472|
0005c0  496e7665          DCB      "Invertor #2 is norm",0
0005c4  72746f72
0005c8  20233220
0005cc  6973206e
0005d0  6f726d00
                  |L4.1492|
0005d4  496e7665          DCB      "Invertor #3 is norm",0
0005d8  72746f72
0005dc  20233320
0005e0  6973206e
0005e4  6f726d00
                  |L4.1512|
0005e8  496e7665          DCB      "Invertor #4 is norm",0
0005ec  72746f72
0005f0  20233420
0005f4  6973206e
0005f8  6f726d00

                          AREA ||.bss||, DATA, NOINIT, ALIGN=2

                  adc_buff
                          %        1024
                  adc_buff_
                          %        32
                  main_power_buffer
                          %        32

                          AREA ||area_number.7||, DATA, NOINIT, ALIGN=1

                          EXPORTAS ||area_number.7||, ||.bss||
                  adc_buff_max
                          %        24

                          AREA ||area_number.8||, DATA, NOINIT, ALIGN=1

                          EXPORTAS ||area_number.8||, ||.bss||
                  net_buff
                          %        64

                          AREA ||.constdata||, DATA, READONLY, ALIGN=0

                  sk_buff_KONTUR
000000  0d0b0f0e          DCB      0x0d,0x0b,0x0f,0x0e

                          AREA ||area_number.11||, DATA, READONLY, ALIGN=0

                          EXPORTAS ||area_number.11||, ||.constdata||
                  sk_buff_RSTKM
000000  0d0b0f0e          DCB      0x0d,0x0b,0x0f,0x0e

                          AREA ||area_number.12||, DATA, READONLY, ALIGN=0

                          EXPORTAS ||area_number.12||, ||.constdata||
                  sk_buff_GLONASS
000000  0b0d0f0e          DCB      0x0b,0x0d,0x0f,0x0e

                          AREA ||area_number.13||, DATA, READONLY, ALIGN=0

                          EXPORTAS ||area_number.13||, ||.constdata||
                  sk_buff_3U
000000  0b0d0f0e          DCB      0x0b,0x0d,0x0f,0x0e

                          AREA ||area_number.14||, DATA, READONLY, ALIGN=0

                          EXPORTAS ||area_number.14||, ||.constdata||
                  sk_buff_6U
000000  0b0d0f0e          DCB      0x0b,0x0d,0x0f,0x0e

                          AREA ||area_number.15||, DATA, READONLY, ALIGN=0

                          EXPORTAS ||area_number.15||, ||.constdata||
                  sk_buff_220
000000  0b0d0f0e          DCB      0x0b,0x0d,0x0f,0x0e

                          AREA ||area_number.16||, DATA, READONLY, ALIGN=0

                          EXPORTAS ||area_number.16||, ||.constdata||
                  sk_buff_TELECORE2015
000000  0b0d0f0e          DCB      0x0b,0x0d,0x0f,0x0e

                          AREA ||.data||, DATA, ALIGN=1

                  adc_buff_min
000000  13881388          DCW      0x1388,0x1388
000004  13881388          DCW      0x1388,0x1388
000008  13881388          DCW      0x1388,0x1388
00000c  13881388          DCW      0x1388,0x1388
000010  13881388          DCW      0x1388,0x1388
                          DCDU     0x00000000

                          AREA ||area_number.18||, DATA, ALIGN=1

                          EXPORTAS ||area_number.18||, ||.data||
                  unet_buff_min
000000  1388              DCW      0x1388

                          AREA ||area_number.19||, DATA, ALIGN=0

                          EXPORTAS ||area_number.19||, ||.data||
                  adc_stat
000000  01                DCB      0x01

                          AREA ||area_number.20||, DATA, ALIGN=1

                          EXPORTAS ||area_number.20||, ||.data||
                  bat_ver_cnt
000000  0096              DCW      0x0096

                          AREA ||area_number.21||, DATA, ALIGN=2

                          EXPORTAS ||area_number.21||, ||.data||
                  vent_stat
000000  00                DCB      0x00
                  adc_self_ch_cnt
000001  00                DCB      0x00
                  adc_ch_net
000002  00                DCB      0x00
                  adc_ch
000003  00                DCB      0x00
                  adc_ch_cnt
000004  00                DCB      0x00
                  adc_window_flag
000005  00                DCB      0x00
                  ch_cnt0
000006  00                DCB      0x00
                  b1Hz_ch
000007  00                DCB      0x00
                  i
000008  00                DCB      0x00
                  iiii
000009  00                DCB      0x00
                  bAVG
00000a  00                DCB      0x00
                  avg_num
00000b  00                DCB      0x00
                  kb_full_ver
00000c  00                DCB      0x00
                  kb_start_ips
00000d  00                DCB      0x00
                  num_of_wrks_bps
00000e  00                DCB      0x00
                  num_necc_up
00000f  00                DCB      0x00
                  num_necc_down
000010  00                DCB      0x00
                  sh_cnt0
000011  00                DCB      0x00
                  b1Hz_sh
000012  00                DCB      0x00
                  spc_stat
000013  00                DCB      0x00
                  spc_bat
000014  00                DCB      0x00
                  spc_phase
000015  00                DCB      0x00
                  bAVZ
000016  00                DCB      0x00
                  ke_start_stat
000017  00                DCB      0x00
                  numOfForvardBps
000018  00                DCB      0x00
                  numOfForvardBps_minCnt
000019  00                DCB      0x00
                  cntrl_stat
00001a  0258              DCW      0x0258
                  cntrl_stat_old
00001c  0258              DCW      0x0258
                  avg_main_cnt
00001e  0014              DCW      0x0014
                  ibat_ips
000020  0000              DCB      0x00,0x00
                  ibat_ips_
000022  0000              DCB      0x00,0x00
                  num_necc_block_cnt
000024  0000              DCB      0x00,0x00
                  net_buff_
000026  0000              DCB      0x00,0x00
                  adc_result
000028  0000              DCB      0x00,0x00
                  adc_gorb_cnt
00002a  0000              DCB      0x00,0x00
                  adc_zero_cnt
00002c  0000              DCB      0x00,0x00
                  adc_window_cnt
00002e  0000              DCB      0x00,0x00
                  adc_net_buff_cnt
000030  0000              DCB      0x00,0x00
                  plazma_sk
000032  0000              DCB      0x00,0x00
                  cntrl_stat_new
000034  0000              DCB      0x00,0x00
                  Ibmax
000036  0000              DCB      0x00,0x00
                  IZMAX_
000038  0000              DCB      0x00,0x00
                  Ubpsmax
00003a  0000              DCB      0x00,0x00
                  samokalibr_cnt
00003c  0000              DCB      0x00,0x00
                  main_kb_cnt
00003e  0000              DCB      0x00,0x00
                  kb_cnt_1lev
000040  0000              DCB      0x00,0x00
                  kb_cnt_2lev
000042  0000              DCB      0x00,0x00
                  kb_start
000044  0000              DCB      0x00,0x00
                  bps_on_mask
000046  0000              DCB      0x00,0x00
                  bps_off_mask
000048  0000              DCB      0x00,0x00
                  vz_cnt_s
00004a  0000              DCB      0x00,0x00
                  vz_cnt_s_
00004c  0000              DCB      0x00,0x00
                  vz_cnt_h
00004e  0000              DCB      0x00,0x00
                  vz_cnt_h_
000050  0000              DCB      0x00,0x00
                  cnt_end_ke
000052  0000              DCB      0x00,0x00
                  __ee_vz_cnt
000054  0000              DCB      0x00,0x00
                  __ee_spc_stat
000056  0000              DCB      0x00,0x00
                  __ee_spc_bat
000058  0000              DCB      0x00,0x00
                  __ee_spc_phase
00005a  0000              DCB      0x00,0x00
                  cntrl_stat_blok_cnt
00005c  0000              DCB      0x00,0x00
                  cntrl_stat_blok_cnt_
00005e  0000              DCB      0x00,0x00
                  numOfForvardBps_hourCnt
000060  0000              DCB      0x00,0x00
                  ibat
000062  0000              DCB      0x00,0x00
000064  0000              DCB      0x00,0x00
                  ibat_
000066  0000              DCB      0x00,0x00
000068  00000000          DCB      0x00,0x00,0x00,0x00
                  i_avg_max
                          DCD      0x00000000
                  i_avg_min
                          DCD      0x00000000
                  i_avg_summ
                          DCD      0x00000000
                  i_avg
                          DCD      0x00000000
                  avg
                          DCD      0x00000000
                  cntrl_stat_blok_cnt_plus
                          DCD      0x00000000
                  cntrl_stat_blok_cnt_minus
                          DCD      0x00000000
                  plazma_inv
                          DCD      0x00000000
                  net_metr_buff_
                          DCD      0x00000000
000090  0000              DCB      0x00,0x00
                  adc_self_ch_buff
000092  0000              DCB      0x00,0x00
                          DCD      0x00000000
                  adc_self_ch_disp
                          DCD      0x00000000
00009c  00000000          DCB      0x00,0x00,0x00,0x00
                  ke_date
                          %        8

                          AREA ||area_number.22||, DATA, ALIGN=1

                          EXPORTAS ||area_number.22||, ||.data||
                  unet_buff_max
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.23||, DATA, ALIGN=0

                          EXPORTAS ||area_number.23||, ||.data||
                  adc_cnt
000000  00                DCB      0x00

                          AREA ||area_number.24||, DATA, ALIGN=0

                          EXPORTAS ||area_number.24||, ||.data||
                  adc_cnt1
000000  00                DCB      0x00

                          AREA ||area_number.25||, DATA, ALIGN=1

                          EXPORTAS ||area_number.25||, ||.data||
                  zero_cnt
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.26||, DATA, ALIGN=0

                          EXPORTAS ||area_number.26||, ||.data||
                  net_buff_cnt
000000  00                DCB      0x00

                          AREA ||area_number.27||, DATA, ALIGN=1

                          EXPORTAS ||area_number.27||, ||.data||
                  ADWR
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.28||, DATA, ALIGN=1

                          EXPORTAS ||area_number.28||, ||.data||
                  period_cnt
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.29||, DATA, ALIGN=1

                          EXPORTAS ||area_number.29||, ||.data||
                  non_zero_cnt
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.30||, DATA, ALIGN=0

                          EXPORTAS ||area_number.30||, ||.data||
                  rele_stat
000000  00                DCB      0x00

                          AREA ||area_number.31||, DATA, ALIGN=0

                          EXPORTAS ||area_number.31||, ||.data||
                  bRELE_OUT
000000  00                DCB      0x00

                          AREA ||area_number.32||, DATA, ALIGN=2

                          EXPORTAS ||area_number.32||, ||.data||
                  main_power_buffer_
                          DCD      0x00000000

                          AREA ||area_number.33||, DATA, ALIGN=1

                          EXPORTAS ||area_number.33||, ||.data||
                  main_power_buffer_cnt
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.34||, DATA, ALIGN=1

                          EXPORTAS ||area_number.34||, ||.data||
                  adc_buff_out_
                          DCDU     0x00000000
000004  0000              DCB      0x00,0x00

                          AREA ||area_number.35||, DATA, ALIGN=1

                          EXPORTAS ||area_number.35||, ||.data||
                  plazma_adc_cnt
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.36||, DATA, ALIGN=0

                          EXPORTAS ||area_number.36||, ||.data||
                  unh_cnt0
000000  00                DCB      0x00

                          AREA ||area_number.37||, DATA, ALIGN=0

                          EXPORTAS ||area_number.37||, ||.data||
                  unh_cnt1
000000  00                DCB      0x00

                          AREA ||area_number.38||, DATA, ALIGN=0

                          EXPORTAS ||area_number.38||, ||.data||
                  b1Hz_unh
000000  00                DCB      0x00

                          AREA ||area_number.39||, DATA, ALIGN=0

                          EXPORTAS ||area_number.39||, ||.data||
                  ch_cnt1
000000  00                DCB      0x00

                          AREA ||area_number.40||, DATA, ALIGN=0

                          EXPORTAS ||area_number.40||, ||.data||
                  b1_30Hz_ch
000000  00                DCB      0x00

                          AREA ||area_number.41||, DATA, ALIGN=1

                          EXPORTAS ||area_number.41||, ||.data||
                  cntrl_stat_blck_cnt
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.42||, DATA, ALIGN=0

                          EXPORTAS ||area_number.42||, ||.data||
                  avg_cnt
000000  00                DCB      0x00

                          AREA ||area_number.43||, DATA, ALIGN=0

                          EXPORTAS ||area_number.43||, ||.data||
                  bps_all_off_cnt
000000  00                DCB      0x00

                          AREA ||area_number.44||, DATA, ALIGN=0

                          EXPORTAS ||area_number.44||, ||.data||
                  bps_mask_off_cnt
000000  00                DCB      0x00

                          AREA ||area_number.45||, DATA, ALIGN=0

                          EXPORTAS ||area_number.45||, ||.data||
                  bps_mask_on_off_cnt
000000  00                DCB      0x00

                          AREA ||area_number.46||, DATA, ALIGN=0

                          EXPORTAS ||area_number.46||, ||.data||
                  bps_hndl_2sec_cnt
000000  00                DCB      0x00

                          AREA ||area_number.47||, DATA, ALIGN=0

                          EXPORTAS ||area_number.47||, ||.data||
                  plazma_bat
000000  00                DCB      0x00

                          AREA ||area_number.48||, DATA, ALIGN=0

                          EXPORTAS ||area_number.48||, ||.data||
                  plazma_cntrl_stat
000000  00                DCB      0x00
