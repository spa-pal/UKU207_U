; generated by ARM C/C++ Compiler, 4.1 [Build 644]
; commandline ArmCC [--list --debug -c --asm --interleave -o.\EXE\control.o --asm_dir=.\ --list_dir=.\ --depend=.\EXE\control.d --feedback=.\EXE\UKU_220_IPS_TERMOKOMPENSAT.fed --cpu=Cortex-M3 --apcs=interwork -O1 -IC:\Keil\ARM\CMSIS\Include -IC:\Keil\ARM\INC\NXP\LPC17xx -D__MICROLIB -DUKU_220_IPS_TERMOKOMPENSAT -DUKU2071x --omf_browse=.\EXE\control.crf control.c]
                          THUMB

                          AREA ||.text||, CODE, READONLY, ALIGN=2

                  ke_start PROC
;;;220    //-----------------------------------------------
;;;221    void ke_start(char in)
000000  e92d41fc          PUSH     {r2-r8,lr}
;;;222    {          
000004  4604              MOV      r4,r0
;;;223    ke_start_stat=(enum_ke_start_stat)0;		 
000006  4efe              LDR      r6,|L1.1024|
000008  f04f0700          MOV      r7,#0
00000c  75f7              STRB     r7,[r6,#0x17]
;;;224    
;;;225    if(spc_stat==spcVZ)ke_start_stat=kssNOT_VZ;
00000e  7cf0              LDRB     r0,[r6,#0x13]  ; spc_stat
000010  f04f0301          MOV      r3,#1
000014  2802              CMP      r0,#2
000016  d008              BEQ      |L1.42|
;;;226    else if(BAT_IS_ON[in]!=bisON)ke_start_stat=kssNOT_BAT;
000018  49fa              LDR      r1,|L1.1028|
00001a  5d09              LDRB     r1,[r1,r4]
00001c  2955              CMP      r1,#0x55
00001e  d006              BEQ      |L1.46|
000020  f04f0065          MOV      r0,#0x65
000024  75f0              STRB     r0,[r6,#0x17]
                  |L1.38|
;;;227    else if(bat[in]._av&(1<<0))ke_start_stat=kssNOT_BAT_AV;
;;;228    else if(bat[in]._temper_stat&(1<<1))ke_start_stat=kssNOT_BAT_AV_T;
;;;229    else if(bat[in]._av&(1<<1))ke_start_stat=kssNOT_BAT_AV_ASS;
;;;230    else if(bat[in]._Ib>IKB)ke_start_stat=kssNOT_BAT_ZAR;
;;;231    else if(bat[in]._Ib<-IKB)ke_start_stat=kssNOT_BAT_RAZR;
;;;232    else if((spc_stat==spcKE)&&(spc_bat==0))ke_start_stat=kssNOT_KE1;
;;;233    else if((spc_stat==spcKE)&&(spc_bat==1))ke_start_stat=kssNOT_KE2;
;;;234    else 
;;;235    	{
;;;236    
;;;237    	ke_start_stat=kssYES;
;;;238    
;;;239    	spc_stat=spcKE;
;;;240    	__ee_spc_stat=spcKE;
;;;241    	lc640_write_int(EE_SPC_STAT,__ee_spc_stat);
;;;242    	
;;;243    	spc_bat=in;
;;;244    	__ee_spc_bat=in;
;;;245    	lc640_write_int(EE_SPC_BAT,__ee_spc_bat);
;;;246    
;;;247    	bat[in]._zar_cnt_ke=0;
;;;248    	lc640_write_int(ADR_EE_BAT_ZAR_CNT_KE[in],0);
;;;249    	
;;;250    	spc_phase=0;
;;;251    	__ee_spc_phase=0;
;;;252    	lc640_write_int(EE_SPC_PHASE,__ee_spc_phase);
;;;253    
;;;254    	//ke_mem_hndl(in,lc640_read_int(ADR_EE_BAT_ZAR_CNT_KE[spc_bat]));
;;;255    
;;;256    		{					
;;;257    		signed short temp_temp;
;;;258    		signed char temp;
;;;259    		temp_temp=bat[in]._u_old[((bat_u_old_cnt+1)&0x07)]; 
;;;260    		    
;;;261    		temp=LPC_RTC->YEAR;
;;;262    		gran_char(&temp,1,99);
;;;263    		*((char*)(&(ke_date[0])))=temp;
;;;264    			
;;;265    		temp=LPC_RTC->MONTH;
;;;266    		gran_char(&temp,1,12);
;;;267    		*(((char*)(&(ke_date[0])))+1)=temp;
;;;268    		
;;;269    		temp=LPC_RTC->DOM;
;;;270    		gran_char(&temp,1,31);
;;;271    		*(((char*)(&(ke_date[0])))+2)=temp;			
;;;272    				
;;;273    		*(((char*)(&(ke_date[0])))+3)=*((char*)&temp_temp);
;;;274    		lc640_write_long(EE_SPC_KE_DATE0,ke_date[0]);
;;;275    
;;;276    		temp=LPC_RTC->HOUR;
;;;277    		gran_char(&temp,0,23);
;;;278    		*((char*)(&(ke_date[1])))=temp;
;;;279                   
;;;280    		temp=LPC_RTC->MIN;
;;;281    		gran_char(&temp,0,59);
;;;282    		*(((char*)(&(ke_date[1])))+1)=temp;
;;;283    	          
;;;284    		temp=LPC_RTC->SEC;
;;;285    		gran_char(&temp,0,59);
;;;286    		*(((char*)(&(ke_date[1])))+2)=temp;
;;;287    			
;;;288    		*(((char*)(&(ke_date[1])))+3)=*(((char*)&temp_temp)+1);
;;;289    		lc640_write_long(EE_SPC_KE_DATE1,ke_date[1]);
;;;290    		}
;;;291    
;;;292    	}
;;;293    }
000026  e8bd81fc          POP      {r2-r8,pc}
                  |L1.42|
00002a  75f3              STRB     r3,[r6,#0x17]         ;225
00002c  e7fb              B        |L1.38|
                  |L1.46|
00002e  eb040144          ADD      r1,r4,r4,LSL #1       ;227
000032  eb011204          ADD      r2,r1,r4,LSL #4       ;227
000036  49f4              LDR      r1,|L1.1032|
000038  eb010582          ADD      r5,r1,r2,LSL #2       ;227
00003c  f895103d          LDRB     r1,[r5,#0x3d]         ;227
000040  07ca              LSLS     r2,r1,#31             ;227
000042  d003              BEQ      |L1.76|
000044  f04f0066          MOV      r0,#0x66              ;227
000048  75f0              STRB     r0,[r6,#0x17]         ;227
00004a  e7ec              B        |L1.38|
                  |L1.76|
00004c  f895203f          LDRB     r2,[r5,#0x3f]         ;228
000050  0792              LSLS     r2,r2,#30             ;228
000052  d503              BPL      |L1.92|
000054  f04f0067          MOV      r0,#0x67              ;228
000058  75f0              STRB     r0,[r6,#0x17]         ;228
00005a  e7e4              B        |L1.38|
                  |L1.92|
00005c  0789              LSLS     r1,r1,#30             ;229
00005e  d503              BPL      |L1.104|
000060  f04f0068          MOV      r0,#0x68              ;229
000064  75f0              STRB     r0,[r6,#0x17]         ;229
000066  e7de              B        |L1.38|
                  |L1.104|
000068  4ae8              LDR      r2,|L1.1036|
00006a  f9b51008          LDRSH    r1,[r5,#8]            ;230
00006e  f9b22000          LDRSH    r2,[r2,#0]            ;230  ; IKB
000072  4291              CMP      r1,r2                 ;230
000074  dd03              BLE      |L1.126|
000076  f04f0069          MOV      r0,#0x69              ;230
00007a  75f0              STRB     r0,[r6,#0x17]         ;230
00007c  e7d3              B        |L1.38|
                  |L1.126|
00007e  4252              RSBS     r2,r2,#0              ;231
000080  4291              CMP      r1,r2                 ;231
000082  da03              BGE      |L1.140|
000084  f04f006a          MOV      r0,#0x6a              ;231
000088  75f0              STRB     r0,[r6,#0x17]         ;231
00008a  e7cc              B        |L1.38|
                  |L1.140|
00008c  49dc              LDR      r1,|L1.1024|
00008e  2801              CMP      r0,#1                 ;232
000090  7d09              LDRB     r1,[r1,#0x14]         ;232
000092  d100              BNE      |L1.150|
000094  b111              CBZ      r1,|L1.156|
                  |L1.150|
000096  2801              CMP      r0,#1                 ;233
000098  d004              BEQ      |L1.164|
00009a  e005              B        |L1.168|
                  |L1.156|
00009c  f04f006b          MOV      r0,#0x6b              ;232
0000a0  75f0              STRB     r0,[r6,#0x17]         ;232
0000a2  e7c0              B        |L1.38|
                  |L1.164|
0000a4  2901              CMP      r1,#1                 ;233
0000a6  d07e              BEQ      |L1.422|
                  |L1.168|
0000a8  f04f0064          MOV      r0,#0x64              ;237
0000ac  75f0              STRB     r0,[r6,#0x17]         ;237
0000ae  74f3              STRB     r3,[r6,#0x13]         ;239
0000b0  f8a63058          STRH     r3,[r6,#0x58]         ;240
0000b4  4619              MOV      r1,r3                 ;241
0000b6  f44f70f8          MOV      r0,#0x1f0             ;241
0000ba  f7fffffe          BL       lc640_write_int
0000be  7534              STRB     r4,[r6,#0x14]         ;243
0000c0  f8a6405a          STRH     r4,[r6,#0x5a]         ;244
0000c4  4621              MOV      r1,r4                 ;245
0000c6  f44f70fa          MOV      r0,#0x1f4             ;245
0000ca  f7fffffe          BL       lc640_write_int
0000ce  61af              STR      r7,[r5,#0x18]         ;247
0000d0  48cf              LDR      r0,|L1.1040|
0000d2  2100              MOVS     r1,#0                 ;248
0000d4  f9300014          LDRSH    r0,[r0,r4,LSL #1]     ;248
0000d8  f7fffffe          BL       lc640_write_int
0000dc  7577              STRB     r7,[r6,#0x15]         ;250
0000de  f8a6705c          STRH     r7,[r6,#0x5c]         ;251
0000e2  4639              MOV      r1,r7                 ;252
0000e4  f44f70fb          MOV      r0,#0x1f6             ;252
0000e8  f7fffffe          BL       lc640_write_int
0000ec  48c9              LDR      r0,|L1.1044|
0000ee  8800              LDRH     r0,[r0,#0]            ;259  ; bat_u_old_cnt
0000f0  f1000001          ADD      r0,r0,#1              ;259
0000f4  f0000007          AND      r0,r0,#7              ;259
0000f8  eb050040          ADD      r0,r5,r0,LSL #1       ;259
0000fc  8c00              LDRH     r0,[r0,#0x20]         ;259
0000fe  9001              STR      r0,[sp,#4]            ;259
000100  4dc5              LDR      r5,|L1.1048|
000102  8ba8              LDRH     r0,[r5,#0x1c]         ;261
000104  9000              STR      r0,[sp,#0]            ;261
000106  f04f0263          MOV      r2,#0x63              ;262
00010a  f04f0101          MOV      r1,#1                 ;262
00010e  4668              MOV      r0,sp                 ;262
000110  f7fffffe          BL       gran_char
000114  4cba              LDR      r4,|L1.1024|
000116  f89d0000          LDRB     r0,[sp,#0]            ;263
00011a  34a4              ADDS     r4,r4,#0xa4           ;263
00011c  7020              STRB     r0,[r4,#0]            ;263
00011e  7e28              LDRB     r0,[r5,#0x18]         ;265
000120  9000              STR      r0,[sp,#0]            ;265
000122  220c              MOVS     r2,#0xc               ;266
000124  2101              MOVS     r1,#1                 ;266
000126  4668              MOV      r0,sp                 ;266
000128  f7fffffe          BL       gran_char
00012c  f89d0000          LDRB     r0,[sp,#0]            ;267
000130  7060              STRB     r0,[r4,#1]            ;267
000132  7b28              LDRB     r0,[r5,#0xc]          ;269
000134  9000              STR      r0,[sp,#0]            ;269
000136  221f              MOVS     r2,#0x1f              ;270
000138  2101              MOVS     r1,#1                 ;270
00013a  4668              MOV      r0,sp                 ;270
00013c  f7fffffe          BL       gran_char
000140  f89d0000          LDRB     r0,[sp,#0]            ;271
000144  70a0              STRB     r0,[r4,#2]            ;271
000146  f89d0004          LDRB     r0,[sp,#4]            ;273
00014a  70e0              STRB     r0,[r4,#3]            ;273
00014c  f44f70fc          MOV      r0,#0x1f8             ;274
000150  6821              LDR      r1,[r4,#0]            ;274  ; ke_date
000152  f7fffffe          BL       lc640_write_long
000156  7a28              LDRB     r0,[r5,#8]            ;276
000158  9000              STR      r0,[sp,#0]            ;276
00015a  2217              MOVS     r2,#0x17              ;277
00015c  2100              MOVS     r1,#0                 ;277
00015e  4668              MOV      r0,sp                 ;277
000160  f7fffffe          BL       gran_char
000164  f89d0000          LDRB     r0,[sp,#0]            ;278
000168  7120              STRB     r0,[r4,#4]            ;278
00016a  7928              LDRB     r0,[r5,#4]            ;280
00016c  9000              STR      r0,[sp,#0]            ;280
00016e  223b              MOVS     r2,#0x3b              ;281
000170  2100              MOVS     r1,#0                 ;281
000172  4668              MOV      r0,sp                 ;281
000174  f7fffffe          BL       gran_char
000178  f89d0000          LDRB     r0,[sp,#0]            ;282
00017c  7160              STRB     r0,[r4,#5]            ;282
00017e  7828              LDRB     r0,[r5,#0]            ;284
000180  9000              STR      r0,[sp,#0]            ;284
000182  223b              MOVS     r2,#0x3b              ;285
000184  2100              MOVS     r1,#0                 ;285
000186  4668              MOV      r0,sp                 ;285
000188  f7fffffe          BL       gran_char
00018c  f89d0000          LDRB     r0,[sp,#0]            ;286
000190  71a0              STRB     r0,[r4,#6]            ;286
000192  f89d0005          LDRB     r0,[sp,#5]            ;288
000196  71e0              STRB     r0,[r4,#7]            ;288
000198  f44f70fe          MOV      r0,#0x1fc             ;289
00019c  6861              LDR      r1,[r4,#4]            ;289  ; ke_date
00019e  f7fffffe          BL       lc640_write_long
0001a2  e740              B        |L1.38|
0001a4  e7ff              B        |L1.422|
                  |L1.422|
0001a6  f04f006c          MOV      r0,#0x6c              ;233
0001aa  75f0              STRB     r0,[r6,#0x17]         ;233
0001ac  e73b              B        |L1.38|
;;;294    
                          ENDP

                  ke_drv PROC
;;;295    //-----------------------------------------------
;;;296    void ke_drv(void)
0001ae  e92d47f0          PUSH     {r4-r10,lr}
;;;297    {
;;;298    
;;;299    if(spc_stat==spcKE)
0001b2  4c93              LDR      r4,|L1.1024|
0001b4  7ce0              LDRB     r0,[r4,#0x13]  ; spc_stat
0001b6  2801              CMP      r0,#1
0001b8  d17d              BNE      |L1.694|
0001ba  4621              MOV      r1,r4
0001bc  2601              MOVS     r6,#1
;;;300    	{
;;;301    	if(spc_phase==0)
;;;302    		{
;;;303    		mess_send(MESS2BAT_HNDL,PARAM_BAT_MASK_OFF_AFTER_2SEC,(1<<(1-spc_bat)),20);
0001be  7d09              LDRB     r1,[r1,#0x14]
0001c0  7d60              LDRB     r0,[r4,#0x15]         ;301  ; spc_phase
0001c2  f1c10201          RSB      r2,r1,#1
0001c6  fa06f102          LSL      r1,r6,r2
;;;304    		mess_send(MESS2BPS_HNDL,PARAM_BPS_ALL_OFF_AFTER_2SEC,0xffff,20);
;;;305    
;;;306    		bat[spc_bat]._zar_cnt_ke+=abs(bat[spc_bat]._Ib);
;;;307    	    	
;;;308    		if(bat[spc_bat]._zar_cnt_ke>=AH_CONSTANT)
;;;309    			{
;;;310    			bat[spc_bat]._zar_cnt_ke-=AH_CONSTANT;
;;;311    			lc640_write_int(ADR_EE_BAT_ZAR_CNT_KE[spc_bat],lc640_read_int(ADR_EE_BAT_ZAR_CNT_KE[spc_bat])+1);
0001ca  4f91              LDR      r7,|L1.1040|
0001cc  4d8e              LDR      r5,|L1.1032|
0001ce  b20a              SXTH     r2,r1                 ;303
0001d0  b110              CBZ      r0,|L1.472|
;;;312    			}
;;;313    		}
;;;314    
;;;315    	else if(spc_phase==1)
0001d2  2801              CMP      r0,#1
0001d4  d034              BEQ      |L1.576|
0001d6  e038              B        |L1.586|
                  |L1.472|
0001d8  2314              MOVS     r3,#0x14              ;303
0001da  21ca              MOVS     r1,#0xca              ;303
0001dc  20c8              MOVS     r0,#0xc8              ;303
0001de  f7fffffe          BL       mess_send
0001e2  2314              MOVS     r3,#0x14              ;304
0001e4  f04f32ff          MOV      r2,#0xffffffff        ;304
0001e8  21ce              MOVS     r1,#0xce              ;304
0001ea  20cd              MOVS     r0,#0xcd              ;304
0001ec  f7fffffe          BL       mess_send
0001f0  7d20              LDRB     r0,[r4,#0x14]         ;306  ; spc_bat
0001f2  eb000140          ADD      r1,r0,r0,LSL #1       ;306
0001f6  eb011000          ADD      r0,r1,r0,LSL #4       ;306
0001fa  eb050080          ADD      r0,r5,r0,LSL #2       ;306
0001fe  f9b00008          LDRSH    r0,[r0,#8]            ;306
000202  f7fffffe          BL       abs
000206  7d21              LDRB     r1,[r4,#0x14]         ;306  ; spc_bat
000208  eb010241          ADD      r2,r1,r1,LSL #1       ;306
00020c  eb021201          ADD      r2,r2,r1,LSL #4       ;306
000210  eb050282          ADD      r2,r5,r2,LSL #2       ;306
000214  6993              LDR      r3,[r2,#0x18]         ;306
000216  4418              ADD      r0,r0,r3              ;306
000218  6190              STR      r0,[r2,#0x18]         ;306
00021a  f64843a0          MOV      r3,#0x8ca0            ;308
00021e  4298              CMP      r0,r3                 ;308
000220  db13              BLT      |L1.586|
000222  eba00003          SUB      r0,r0,r3              ;310
000226  6190              STR      r0,[r2,#0x18]         ;310
000228  f8370011          LDRH     r0,[r7,r1,LSL #1]     ;311
00022c  f7fffffe          BL       lc640_read_int
000230  1c40              ADDS     r0,r0,#1              ;311
000232  b201              SXTH     r1,r0                 ;311
000234  7d20              LDRB     r0,[r4,#0x14]         ;311  ; spc_bat
000236  f9370010          LDRSH    r0,[r7,r0,LSL #1]     ;311
00023a  f7fffffe          BL       lc640_write_int
00023e  e004              B        |L1.586|
                  |L1.576|
;;;316    		{
;;;317    		mess_send(MESS2BAT_HNDL,PARAM_BAT_MASK_OFF_AFTER_2SEC,(1<<(1-spc_bat)),20);
000240  2314              MOVS     r3,#0x14
000242  21ca              MOVS     r1,#0xca
000244  20c8              MOVS     r0,#0xc8
000246  f7fffffe          BL       mess_send
                  |L1.586|
;;;318    		}
;;;319    
;;;320    	if(bat[spc_bat]._Ub<(USIGN*10))
00024a  7d21              LDRB     r1,[r4,#0x14]  ; spc_bat
;;;321    		{
;;;322    		cnt_end_ke++;
;;;323    		if(cnt_end_ke>=30)
;;;324    			{
;;;325    			
;;;326    			if((spc_stat==spcKE)&&(spc_phase==0))
;;;327    				{
;;;328    				lc640_write_int(ADR_EE_BAT_C_REAL[spc_bat],lc640_read_int(ADR_EE_BAT_ZAR_CNT_KE[spc_bat]));
;;;329    				ke_mem_hndl(spc_bat,lc640_read_int(ADR_EE_BAT_ZAR_CNT_KE[spc_bat]));
;;;330    				lc640_write_int(ADR_EE_BAT_ZAR_CNT[spc_bat],0);
;;;331    				cntrl_stat=50;
;;;332    				cntrl_stat_old=50;
;;;333    				}
;;;334    
;;;335    			if((BAT_IS_ON[1-spc_bat]) == bisON)
;;;336    				{
;;;337    				spc_phase=1;
;;;338    				__ee_spc_phase=1;
;;;339    				lc640_write_int(EE_SPC_PHASE,1);
;;;340    				}			
;;;341    			else
;;;342    				{
;;;343    				spc_stat=spcOFF;
;;;344    				__ee_spc_stat=spcOFF;
;;;345    				lc640_write_int(EE_SPC_STAT,spcOFF);
00024c  f44f79f8          MOV      r9,#0x1f0
000250  eb010041          ADD      r0,r1,r1,LSL #1       ;320
000254  eb001001          ADD      r0,r0,r1,LSL #4       ;320
000258  eb050080          ADD      r0,r5,r0,LSL #2       ;320
00025c  f04f0800          MOV      r8,#0                 ;301
000260  f9b02002          LDRSH    r2,[r0,#2]            ;320
000264  486d              LDR      r0,|L1.1052|
000266  f9b00000          LDRSH    r0,[r0,#0]            ;320  ; USIGN
00026a  eb000080          ADD      r0,r0,r0,LSL #2       ;320
00026e  ebb20f40          CMP      r2,r0,LSL #1          ;320
000272  da47              BGE      |L1.772|
000274  f8b40054          LDRH     r0,[r4,#0x54]         ;322  ; cnt_end_ke
000278  f1000001          ADD      r0,r0,#1              ;322
00027c  b200              SXTH     r0,r0                 ;322
00027e  f8a40054          STRH     r0,[r4,#0x54]         ;322
000282  281e              CMP      r0,#0x1e              ;323
000284  db40              BLT      |L1.776|
000286  7ce0              LDRB     r0,[r4,#0x13]         ;326  ; spc_stat
000288  2801              CMP      r0,#1                 ;326
00028a  d122              BNE      |L1.722|
00028c  7d60              LDRB     r0,[r4,#0x15]         ;326  ; spc_phase
00028e  bb00              CBNZ     r0,|L1.722|
000290  f8370011          LDRH     r0,[r7,r1,LSL #1]     ;328
000294  f7fffffe          BL       lc640_read_int
000298  b201              SXTH     r1,r0                 ;328
00029a  4861              LDR      r0,|L1.1056|
00029c  7d22              LDRB     r2,[r4,#0x14]         ;328  ; spc_bat
00029e  f9300012          LDRSH    r0,[r0,r2,LSL #1]     ;328
0002a2  f7fffffe          BL       lc640_write_int
0002a6  7d20              LDRB     r0,[r4,#0x14]         ;329  ; spc_bat
0002a8  f8370010          LDRH     r0,[r7,r0,LSL #1]     ;329
0002ac  f7fffffe          BL       lc640_read_int
0002b0  b281              UXTH     r1,r0                 ;329
0002b2  7d20              LDRB     r0,[r4,#0x14]         ;329  ; spc_bat
0002b4  e000              B        |L1.696|
                  |L1.694|
0002b6  e049              B        |L1.844|
                  |L1.696|
0002b8  f7fffffe          BL       ke_mem_hndl
0002bc  4859              LDR      r0,|L1.1060|
0002be  7d21              LDRB     r1,[r4,#0x14]         ;330  ; spc_bat
0002c0  f9300011          LDRSH    r0,[r0,r1,LSL #1]     ;330
0002c4  2100              MOVS     r1,#0                 ;330
0002c6  f7fffffe          BL       lc640_write_int
0002ca  f04f0032          MOV      r0,#0x32              ;331
0002ce  83a0              STRH     r0,[r4,#0x1c]         ;331
0002d0  83e0              STRH     r0,[r4,#0x1e]         ;332
                  |L1.722|
0002d2  7d20              LDRB     r0,[r4,#0x14]         ;335  ; spc_bat
0002d4  494b              LDR      r1,|L1.1028|
0002d6  f1c00001          RSB      r0,r0,#1              ;335
0002da  5c08              LDRB     r0,[r1,r0]            ;335
0002dc  2855              CMP      r0,#0x55              ;335
0002de  d008              BEQ      |L1.754|
0002e0  f8848013          STRB     r8,[r4,#0x13]         ;343
0002e4  f8a48058          STRH     r8,[r4,#0x58]         ;344
0002e8  2100              MOVS     r1,#0
0002ea  4648              MOV      r0,r9
0002ec  f7fffffe          BL       lc640_write_int
0002f0  e00a              B        |L1.776|
                  |L1.754|
0002f2  7566              STRB     r6,[r4,#0x15]         ;337
0002f4  f8a4605c          STRH     r6,[r4,#0x5c]         ;338
0002f8  2101              MOVS     r1,#1                 ;339
0002fa  f44f70fb          MOV      r0,#0x1f6             ;339
0002fe  f7fffffe          BL       lc640_write_int
000302  e001              B        |L1.776|
                  |L1.772|
;;;346    				}
;;;347    			}
;;;348    		}
;;;349    	else cnt_end_ke=0;
000304  f8a48054          STRH     r8,[r4,#0x54]
                  |L1.776|
;;;350    
;;;351    	if((bat[spc_bat]._Ub>=bat[1-spc_bat]._Ub)&&(spc_phase==1))
000308  7d21              LDRB     r1,[r4,#0x14]  ; spc_bat
00030a  eb010041          ADD      r0,r1,r1,LSL #1
00030e  eb001001          ADD      r0,r0,r1,LSL #4
000312  eb050080          ADD      r0,r5,r0,LSL #2
000316  f9b02002          LDRSH    r2,[r0,#2]
00031a  f1c10001          RSB      r0,r1,#1
00031e  eb000140          ADD      r1,r0,r0,LSL #1
000322  eb011000          ADD      r0,r1,r0,LSL #4
000326  eb050080          ADD      r0,r5,r0,LSL #2
00032a  f9b00002          LDRSH    r0,[r0,#2]
00032e  4282              CMP      r2,r0
000330  db0c              BLT      |L1.844|
000332  7d60              LDRB     r0,[r4,#0x15]  ; spc_phase
000334  2801              CMP      r0,#1
000336  d109              BNE      |L1.844|
;;;352    		{
;;;353    		spc_stat=spcOFF;
000338  f8848013          STRB     r8,[r4,#0x13]
;;;354    		__ee_spc_stat=spcOFF;
00033c  f8a48058          STRH     r8,[r4,#0x58]
;;;355    		lc640_write_int(EE_SPC_STAT,spcOFF);
000340  4648              MOV      r0,r9
000342  e8bd47f0          POP      {r4-r10,lr}
000346  2100              MOVS     r1,#0
000348  f7ffbffe          B.W      lc640_write_int
                  |L1.844|
;;;356    		}
;;;357    	}
;;;358    			
;;;359    }
00034c  e8bd87f0          POP      {r4-r10,pc}
;;;360    
                          ENDP

                  vz_start PROC
;;;361    //-----------------------------------------------
;;;362    char vz_start(char hour)
000350  b570              PUSH     {r4-r6,lr}
;;;363    {          
000352  4605              MOV      r5,r0
;;;364    char out;
;;;365    out=0;
000354  f04f0600          MOV      r6,#0
;;;366    if(spc_stat==spcOFF)
000358  4c29              LDR      r4,|L1.1024|
00035a  7ce0              LDRB     r0,[r4,#0x13]  ; spc_stat
00035c  bb18              CBNZ     r0,|L1.934|
;;;367    	{
;;;368    	spc_stat=spcVZ;
00035e  f104041a          ADD      r4,r4,#0x1a
000362  f04f0102          MOV      r1,#2
000366  f8041c07          STRB     r1,[r4,#-7]
;;;369    	__ee_spc_stat=spcVZ; 
00036a  87e1              STRH     r1,[r4,#0x3e]
;;;370    	lc640_write_int(EE_SPC_STAT,__ee_spc_stat);   
00036c  f44f70f8          MOV      r0,#0x1f0
000370  f7fffffe          BL       lc640_write_int
;;;371    	vz_cnt_h=hour;
000374  86e5              STRH     r5,[r4,#0x36]
;;;372    	__ee_vz_cnt=hour*60;
000376  ebc51005          RSB      r0,r5,r5,LSL #4
00037a  ea4f0180          LSL      r1,r0,#2
00037e  460d              MOV      r5,r1
000380  87a1              STRH     r1,[r4,#0x3c]
;;;373    	lc640_write_int(EE_VZ_CNT,__ee_vz_cnt);
000382  f44f70f9          MOV      r0,#0x1f2
000386  f7fffffe          BL       lc640_write_int
;;;374    	lc640_write_int(EE_SPC_VZ_LENGT,hour*60);	
00038a  4629              MOV      r1,r5
00038c  f44f70ff          MOV      r0,#0x1fe
000390  f7fffffe          BL       lc640_write_int
;;;375    	vz_cnt_h_=0;
000394  4630              MOV      r0,r6
000396  8720              STRH     r0,[r4,#0x38]
;;;376    	vz_cnt_s=0;
000398  8660              STRH     r0,[r4,#0x32]
;;;377    	out=1;
00039a  f04f0601          MOV      r6,#1
;;;378    	vz_mem_hndl(1);
00039e  f04f0001          MOV      r0,#1
0003a2  f7fffffe          BL       vz_mem_hndl
                  |L1.934|
;;;379    	}
;;;380    //else if((spc_stat==spc_KE1p1)||(spc_stat==spc_KE1p2)) out=22; 
;;;381    //else if((spc_stat==spc_KE2p1)||(spc_stat==spc_KE2p2)) out=33;
;;;382    //plazma=out;	
;;;383    return out;
0003a6  4630              MOV      r0,r6
;;;384    }
0003a8  bd70              POP      {r4-r6,pc}
;;;385    
                          ENDP

                  vz_stop PROC
;;;386    //-----------------------------------------------
;;;387    void vz_stop(void)
0003aa  b510              PUSH     {r4,lr}
;;;388    {
;;;389    if(spc_stat==spcVZ)
0003ac  4c14              LDR      r4,|L1.1024|
0003ae  7ce0              LDRB     r0,[r4,#0x13]  ; spc_stat
0003b0  2802              CMP      r0,#2
0003b2  d113              BNE      |L1.988|
;;;390         {
;;;391    vz_mem_hndl(vz_cnt_h);          
0003b4  f104041a          ADD      r4,r4,#0x1a
0003b8  8ee0              LDRH     r0,[r4,#0x36]  ; vz_cnt_h
0003ba  f7fffffe          BL       vz_mem_hndl
;;;392    vz_cnt_s=0;
0003be  f04f0000          MOV      r0,#0
0003c2  8660              STRH     r0,[r4,#0x32]
;;;393    vz_cnt_h=0;
0003c4  86e0              STRH     r0,[r4,#0x36]
;;;394    vz_cnt_h_=0;
0003c6  8720              STRH     r0,[r4,#0x38]
;;;395    spc_stat=spcOFF;
0003c8  f8040c07          STRB     r0,[r4,#-7]
;;;396    
;;;397    		__ee_spc_stat=spcOFF;
0003cc  87e0              STRH     r0,[r4,#0x3e]
;;;398    		lc640_write_int(EE_SPC_STAT,spcOFF);
0003ce  4601              MOV      r1,r0
0003d0  e8bd4010          POP      {r4,lr}
0003d4  f44f70f8          MOV      r0,#0x1f0
0003d8  f7ffbffe          B.W      lc640_write_int
                  |L1.988|
;;;399         }
;;;400    
;;;401    }
0003dc  bd10              POP      {r4,pc}
;;;402    
                          ENDP

                  avz_next_date_hndl PROC
;;;403    //-----------------------------------------------
;;;404    void avz_next_date_hndl(void)
0003de  b570              PUSH     {r4-r6,lr}
;;;405    {
;;;406    if((LPC_RTC->MONTH+AVZ)>12)lc640_write_int(EE_YEAR_AVZ,LPC_RTC->YEAR+1);
0003e0  4c0d              LDR      r4,|L1.1048|
0003e2  3c20              SUBS     r4,r4,#0x20
0003e4  f8940038          LDRB     r0,[r4,#0x38]
0003e8  4d0f              LDR      r5,|L1.1064|
0003ea  7829              LDRB     r1,[r5,#0]  ; AVZ
0003ec  4408              ADD      r0,r0,r1
0003ee  280c              CMP      r0,#0xc
0003f0  d91c              BLS      |L1.1068|
0003f2  8fa0              LDRH     r0,[r4,#0x3c]
0003f4  1c40              ADDS     r0,r0,#1
0003f6  b201              SXTH     r1,r0
0003f8  20b8              MOVS     r0,#0xb8
0003fa  f7fffffe          BL       lc640_write_int
0003fe  e01a              B        |L1.1078|
                  |L1.1024|
                          DCD      ||area_number.21||
                  |L1.1028|
                          DCD      BAT_IS_ON
                  |L1.1032|
                          DCD      bat
                  |L1.1036|
                          DCD      IKB
                  |L1.1040|
                          DCD      ADR_EE_BAT_ZAR_CNT_KE
                  |L1.1044|
                          DCD      bat_u_old_cnt
                  |L1.1048|
                          DCD      0x40024020
                  |L1.1052|
                          DCD      USIGN
                  |L1.1056|
                          DCD      ADR_EE_BAT_C_REAL
                  |L1.1060|
                          DCD      ADR_EE_BAT_ZAR_CNT
                  |L1.1064|
                          DCD      AVZ
                  |L1.1068|
;;;407    else lc640_write_int(EE_YEAR_AVZ,LPC_RTC->YEAR);
00042c  f9b4103c          LDRSH    r1,[r4,#0x3c]
000430  20b8              MOVS     r0,#0xb8
000432  f7fffffe          BL       lc640_write_int
                  |L1.1078|
;;;408    
;;;409    //lc640_write_int(EE_YEAR_AVZ,6);
;;;410    
;;;411    if((LPC_RTC->MONTH+AVZ)>12)lc640_write_int(EE_MONTH_AVZ,(LPC_RTC->MONTH+AVZ)-12);
000436  f8941038          LDRB     r1,[r4,#0x38]
00043a  7828              LDRB     r0,[r5,#0]  ; AVZ
00043c  4401              ADD      r1,r1,r0
00043e  290c              CMP      r1,#0xc
000440  d907              BLS      |L1.1106|
000442  f8941038          LDRB     r1,[r4,#0x38]
000446  380c              SUBS     r0,r0,#0xc
000448  4401              ADD      r1,r1,r0
00044a  20b6              MOVS     r0,#0xb6
00044c  f7fffffe          BL       lc640_write_int
000450  e005              B        |L1.1118|
                  |L1.1106|
;;;412    else lc640_write_int(EE_MONTH_AVZ,LPC_RTC->MONTH+AVZ);                                                 
000452  f8941038          LDRB     r1,[r4,#0x38]
000456  4401              ADD      r1,r1,r0
000458  20b6              MOVS     r0,#0xb6
00045a  f7fffffe          BL       lc640_write_int
                  |L1.1118|
;;;413    
;;;414    //lc640_write_int(EE_MONTH_AVZ,5);
;;;415    
;;;416    if(LPC_RTC->DOM>28) lc640_write_int(EE_DATE_AVZ,28);
00045e  f894002c          LDRB     r0,[r4,#0x2c]
000462  281c              CMP      r0,#0x1c
000464  d904              BLS      |L1.1136|
000466  211c              MOVS     r1,#0x1c
000468  20b4              MOVS     r0,#0xb4
00046a  f7fffffe          BL       lc640_write_int
00046e  e004              B        |L1.1146|
                  |L1.1136|
;;;417    else lc640_write_int(EE_DATE_AVZ,LPC_RTC->DOM);
000470  f894102c          LDRB     r1,[r4,#0x2c]
000474  20b4              MOVS     r0,#0xb4
000476  f7fffffe          BL       lc640_write_int
                  |L1.1146|
;;;418    
;;;419    //lc640_write_int(EE_DATE_AVZ,4);
;;;420    
;;;421    lc640_write_int(EE_HOUR_AVZ,LPC_RTC->HOUR);
00047a  f1040420          ADD      r4,r4,#0x20
00047e  7a21              LDRB     r1,[r4,#8]
000480  f04f00ae          MOV      r0,#0xae
000484  f7fffffe          BL       lc640_write_int
;;;422    lc640_write_int(EE_MIN_AVZ,LPC_RTC->MIN);
000488  7921              LDRB     r1,[r4,#4]
00048a  20b0              MOVS     r0,#0xb0
00048c  f7fffffe          BL       lc640_write_int
;;;423    lc640_write_int(EE_SEC_AVZ,LPC_RTC->SEC);
000490  7821              LDRB     r1,[r4,#0]
000492  e8bd4070          POP      {r4-r6,lr}
000496  20b2              MOVS     r0,#0xb2
000498  f7ffbffe          B.W      lc640_write_int
;;;424    
;;;425    }
;;;426    
                          ENDP

                  avz_drv PROC
;;;427    //-----------------------------------------------
;;;428    void avz_drv(void)                               
00049c  b510              PUSH     {r4,lr}
;;;429    {                
;;;430    if(AVZ!=AVZ_OFF)
00049e  48ff              LDR      r0,|L1.2204|
;;;431    	{
;;;432    	if((LPC_RTC->YEAR==YEAR_AVZ)&&(LPC_RTC->MONTH==MONTH_AVZ)&&(LPC_RTC->DOM==DATE_AVZ)&&(LPC_RTC->HOUR==HOUR_AVZ)&&(LPC_RTC->MIN==MIN_AVZ)&&(LPC_RTC->SEC==SEC_AVZ))
;;;433    		{
;;;434    		bAVZ=1;
0004a0  4cff              LDR      r4,|L1.2208|
0004a2  7800              LDRB     r0,[r0,#0]            ;430  ; AVZ
0004a4  b330              CBZ      r0,|L1.1268|
0004a6  48ff              LDR      r0,|L1.2212|
0004a8  8f82              LDRH     r2,[r0,#0x3c]         ;432
0004aa  49ff              LDR      r1,|L1.2216|
0004ac  8809              LDRH     r1,[r1,#0]            ;432  ; YEAR_AVZ
0004ae  428a              CMP      r2,r1                 ;432
0004b0  d120              BNE      |L1.1268|
0004b2  f8902038          LDRB     r2,[r0,#0x38]         ;432
0004b6  49fd              LDR      r1,|L1.2220|
0004b8  8809              LDRH     r1,[r1,#0]            ;432  ; MONTH_AVZ
0004ba  428a              CMP      r2,r1                 ;432
0004bc  d11a              BNE      |L1.1268|
0004be  f890102c          LDRB     r1,[r0,#0x2c]         ;432
0004c2  4afb              LDR      r2,|L1.2224|
0004c4  8812              LDRH     r2,[r2,#0]            ;432  ; DATE_AVZ
0004c6  4291              CMP      r1,r2                 ;432
0004c8  d114              BNE      |L1.1268|
0004ca  f8901028          LDRB     r1,[r0,#0x28]         ;432
0004ce  4af9              LDR      r2,|L1.2228|
0004d0  8812              LDRH     r2,[r2,#0]            ;432  ; HOUR_AVZ
0004d2  4291              CMP      r1,r2                 ;432
0004d4  d10e              BNE      |L1.1268|
0004d6  f8901024          LDRB     r1,[r0,#0x24]         ;432
0004da  4af7              LDR      r2,|L1.2232|
0004dc  8812              LDRH     r2,[r2,#0]            ;432  ; MIN_AVZ
0004de  4291              CMP      r1,r2                 ;432
0004e0  d108              BNE      |L1.1268|
0004e2  f8900020          LDRB     r0,[r0,#0x20]         ;432
0004e6  49f5              LDR      r1,|L1.2236|
0004e8  8809              LDRH     r1,[r1,#0]            ;432  ; SEC_AVZ
0004ea  4288              CMP      r0,r1                 ;432
0004ec  d102              BNE      |L1.1268|
0004ee  f04f0001          MOV      r0,#1
0004f2  75a0              STRB     r0,[r4,#0x16]
                  |L1.1268|
;;;435    		}
;;;436    	}
;;;437    if(bAVZ)
0004f4  7da0              LDRB     r0,[r4,#0x16]  ; bAVZ
0004f6  2800              CMP      r0,#0
0004f8  d00c              BEQ      |L1.1300|
;;;438    	{
;;;439    	if(vz_start(AVZ_TIME))
0004fa  48f1              LDR      r0,|L1.2240|
0004fc  8800              LDRH     r0,[r0,#0]  ; AVZ_TIME
0004fe  b2c0              UXTB     r0,r0
000500  f7fffffe          BL       vz_start
000504  2800              CMP      r0,#0
000506  d005              BEQ      |L1.1300|
;;;440    		{
;;;441    		bAVZ=0;
000508  f04f0000          MOV      r0,#0
00050c  75a0              STRB     r0,[r4,#0x16]
;;;442    		avz_next_date_hndl();
00050e  e8bd4010          POP      {r4,lr}
000512  e7fe              B        avz_next_date_hndl
                  |L1.1300|
;;;443    		}
;;;444    	}	
;;;445    
;;;446    }
000514  bd10              POP      {r4,pc}
;;;447    
                          ENDP

                  vz_drv PROC
;;;448    //-----------------------------------------------
;;;449    void vz_drv(void)
000516  b570              PUSH     {r4-r6,lr}
;;;450    { 
;;;451    if(spc_stat==spcVZ)
000518  4ce1              LDR      r4,|L1.2208|
00051a  7ce0              LDRB     r0,[r4,#0x13]  ; spc_stat
00051c  2802              CMP      r0,#2
00051e  d144              BNE      |L1.1450|
;;;452    	{
;;;453    	if(vz_cnt_s_<3600)
000520  f8b4004e          LDRH     r0,[r4,#0x4e]  ; vz_cnt_s_
000524  f44f6161          MOV      r1,#0xe10
;;;454    		{
;;;455    		vz_cnt_s_++;
;;;456    		if(vz_cnt_s_>=3600)
;;;457    			{
;;;458    			vz_cnt_s_=0;
000528  2500              MOVS     r5,#0
00052a  4288              CMP      r0,r1                 ;453
00052c  d215              BCS      |L1.1370|
00052e  f1000001          ADD      r0,r0,#1              ;455
000532  b280              UXTH     r0,r0                 ;455
000534  f8a4004e          STRH     r0,[r4,#0x4e]         ;455
000538  4288              CMP      r0,r1                 ;456
00053a  d30e              BCC      |L1.1370|
00053c  f8a4504e          STRH     r5,[r4,#0x4e]
;;;459    			if(vz_cnt_h)
000540  f8b40050          LDRH     r0,[r4,#0x50]  ; vz_cnt_h
000544  b148              CBZ      r0,|L1.1370|
;;;460    				{
;;;461    				vz_cnt_h--;
000546  f1a00001          SUB      r0,r0,#1
00054a  f8240f50          STRH     r0,[r4,#0x50]!
;;;462    				vz_cnt_h_++;
00054e  8860              LDRH     r0,[r4,#2]  ; vz_cnt_h_
000550  f1000001          ADD      r0,r0,#1
000554  8060              STRH     r0,[r4,#2]
000556  f1a40450          SUB      r4,r4,#0x50
                  |L1.1370|
;;;463    				}
;;;464    			}
;;;465    		}
;;;466    
;;;467    
;;;468    	if(vz_cnt_s<60)
00055a  f8b4004c          LDRH     r0,[r4,#0x4c]  ; vz_cnt_s
00055e  283c              CMP      r0,#0x3c
000560  d223              BCS      |L1.1450|
;;;469    		{
;;;470    		vz_cnt_s++;
000562  f1000001          ADD      r0,r0,#1
000566  b280              UXTH     r0,r0
000568  f8a4004c          STRH     r0,[r4,#0x4c]
;;;471    		if(vz_cnt_s>=60)
00056c  283c              CMP      r0,#0x3c
00056e  d31c              BCC      |L1.1450|
;;;472    			{
;;;473    			vz_cnt_s=0;
000570  f8245f4c          STRH     r5,[r4,#0x4c]!
;;;474    			
;;;475    			__ee_vz_cnt--;
000574  8960              LDRH     r0,[r4,#0xa]  ; __ee_vz_cnt
000576  f1a00001          SUB      r0,r0,#1
00057a  b201              SXTH     r1,r0
00057c  8161              STRH     r1,[r4,#0xa]
;;;476    			lc640_write_int(EE_VZ_CNT,__ee_vz_cnt);
00057e  f44f70f9          MOV      r0,#0x1f2
000582  f7fffffe          BL       lc640_write_int
;;;477    			if(!__ee_vz_cnt)
000586  8960              LDRH     r0,[r4,#0xa]  ; __ee_vz_cnt
000588  f1a4044c          SUB      r4,r4,#0x4c
00058c  2800              CMP      r0,#0
00058e  d10c              BNE      |L1.1450|
;;;478    				{
;;;479    				spc_stat=spcOFF;
000590  74e5              STRB     r5,[r4,#0x13]
;;;480    						__ee_spc_stat=spcOFF;
000592  f8a45058          STRH     r5,[r4,#0x58]
;;;481    		lc640_write_int(EE_SPC_STAT,spcOFF);
000596  4601              MOV      r1,r0
000598  f44f70f8          MOV      r0,#0x1f0
00059c  f7fffffe          BL       lc640_write_int
;;;482    				vz_mem_hndl(0);
0005a0  e8bd4070          POP      {r4-r6,lr}
0005a4  2000              MOVS     r0,#0
0005a6  f7ffbffe          B.W      vz_mem_hndl
                  |L1.1450|
;;;483    				}
;;;484    			}
;;;485    		}
;;;486    
;;;487    	}
;;;488    
;;;489    
;;;490    } 
0005aa  bd70              POP      {r4-r6,pc}
;;;491    
                          ENDP

                  kb_init PROC
;;;495    //-----------------------------------------------
;;;496    void kb_init(void)
0005ac  48c5              LDR      r0,|L1.2244|
;;;497    {
;;;498    main_kb_cnt=(TBAT*60)-60/*120*/;
0005ae  f06f013b          MVN      r1,#0x3b
0005b2  8800              LDRH     r0,[r0,#0]  ; TBAT
0005b4  ebc01000          RSB      r0,r0,r0,LSL #4
0005b8  eb010080          ADD      r0,r1,r0,LSL #2
0005bc  49b8              LDR      r1,|L1.2208|
0005be  f8a10040          STRH     r0,[r1,#0x40]
;;;499    }
0005c2  4770              BX       lr
;;;500    
                          ENDP

                  kb_hndl PROC
;;;501    //-----------------------------------------------
;;;502    void kb_hndl(void)
0005c4  e92d5ff0          PUSH     {r4-r12,lr}
;;;503    {
;;;504    
;;;505    static signed short ibat[2],ibat_[2],ibat_ips,ibat_ips_;
;;;506    #ifdef UKU_TELECORE2015
;;;507    if(((++main_kb_cnt>=TBAT*60)&&(TBAT))&&(BAT_TYPE==0))
;;;508    #else 
;;;509    if(((++main_kb_cnt>=TBAT*60)&&(TBAT)))
0005c8  f8df82d4          LDR      r8,|L1.2208|
;;;510    #endif
;;;511    	{
;;;512    	main_kb_cnt=0;
;;;513    	
;;;514    	kb_start[0]=0;
;;;515    	kb_start[1]=0;
;;;516    	kb_start_ips=0;
;;;517    
;;;518    	if( (BAT_IS_ON[0]==bisON) && (bat[0]._Ub>80) && ( (abs(bat[0]._Ib)<IKB) || (bat[0]._av&1) ) ) kb_start[0]=1;
;;;519    	if( (BAT_IS_ON[1]==bisON) && (bat[1]._Ub>80) && ( (abs(bat[1]._Ib)<IKB) || (bat[1]._av&1) ) ) kb_start[1]=1;
;;;520    #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;521    	if( (!ips_bat_av_vzvod)                      && ((abs(Ib_ips_termokompensat)<IKB) || (bat_ips._av&1) ) ) kb_start_ips=1;
0005cc  f8dfa2f8          LDR      r10,|L1.2248|
0005d0  2500              MOVS     r5,#0                 ;509
0005d2  f8b80040          LDRH     r0,[r8,#0x40]         ;509  ; main_kb_cnt
0005d6  4ebd              LDR      r6,|L1.2252|
0005d8  1c40              ADDS     r0,r0,#1              ;509
0005da  b201              SXTH     r1,r0                 ;509
0005dc  48b9              LDR      r0,|L1.2244|
0005de  f8a81040          STRH     r1,[r8,#0x40]         ;509
0005e2  f8df92ec          LDR      r9,|L1.2256|
0005e6  f9b00000          LDRSH    r0,[r0,#0]            ;509  ; TBAT
;;;522    #endif	
;;;523    	if( (net_av) || (num_of_wrks_bps==0) || ( (spc_stat!=spcOFF) && (spc_stat!=spcVZ) ) ) 
;;;524    		{
;;;525    		kb_start[0]=0;
;;;526    		kb_start[1]=0;
;;;527    		kb_start_ips=0;
;;;528    		}
;;;529    
;;;530    	if((kb_start[0]==1)||(kb_start[1]==1)||(kb_start_ips==1))
;;;531    		{
;;;532    		kb_cnt_1lev=10;
0005ea  270a              MOVS     r7,#0xa
0005ec  ebc01200          RSB      r2,r0,r0,LSL #4       ;509
0005f0  f04f0b01          MOV      r11,#1                ;518
0005f4  f1080446          ADD      r4,r8,#0x46           ;514
0005f8  ebb10f82          CMP      r1,r2,LSL #2          ;509
0005fc  db61              BLT      |L1.1730|
0005fe  b3f0              CBZ      r0,|L1.1662|
000600  f8a85040          STRH     r5,[r8,#0x40]         ;512
000604  7025              STRB     r5,[r4,#0]            ;514
000606  7065              STRB     r5,[r4,#1]            ;515
000608  f888500d          STRB     r5,[r8,#0xd]          ;516
00060c  48b1              LDR      r0,|L1.2260|
00060e  7800              LDRB     r0,[r0,#0]            ;518  ; BAT_IS_ON
000610  2855              CMP      r0,#0x55              ;518
000612  d111              BNE      |L1.1592|
000614  f9b60002          LDRSH    r0,[r6,#2]            ;518  ; bat
000618  2850              CMP      r0,#0x50              ;518
00061a  dd0d              BLE      |L1.1592|
00061c  f9b60008          LDRSH    r0,[r6,#8]            ;518  ; bat
000620  f7fffffe          BL       abs
000624  f9b91000          LDRSH    r1,[r9,#0]            ;518  ; IKB
000628  4288              CMP      r0,r1                 ;518
00062a  db03              BLT      |L1.1588|
00062c  f896003d          LDRB     r0,[r6,#0x3d]         ;518  ; bat
000630  07c0              LSLS     r0,r0,#31             ;518
000632  d001              BEQ      |L1.1592|
                  |L1.1588|
000634  f884b000          STRB     r11,[r4,#0]           ;518
                  |L1.1592|
000638  48a6              LDR      r0,|L1.2260|
00063a  7840              LDRB     r0,[r0,#1]            ;519  ; BAT_IS_ON
00063c  2855              CMP      r0,#0x55              ;519
00063e  d111              BNE      |L1.1636|
000640  f9b6004e          LDRSH    r0,[r6,#0x4e]         ;519  ; bat
000644  2850              CMP      r0,#0x50              ;519
000646  dd0d              BLE      |L1.1636|
000648  f9b60054          LDRSH    r0,[r6,#0x54]         ;519  ; bat
00064c  f7fffffe          BL       abs
000650  f9b91000          LDRSH    r1,[r9,#0]            ;519  ; IKB
000654  4288              CMP      r0,r1                 ;519
000656  db03              BLT      |L1.1632|
000658  f8960089          LDRB     r0,[r6,#0x89]         ;519  ; bat
00065c  07c0              LSLS     r0,r0,#31             ;519
00065e  d001              BEQ      |L1.1636|
                  |L1.1632|
000660  f884b001          STRB     r11,[r4,#1]           ;519
                  |L1.1636|
000664  489c              LDR      r0,|L1.2264|
000666  7800              LDRB     r0,[r0,#0]            ;521  ; ips_bat_av_vzvod
000668  b980              CBNZ     r0,|L1.1676|
00066a  f9ba0000          LDRSH    r0,[r10,#0]           ;521  ; Ib_ips_termokompensat
00066e  f7fffffe          BL       abs
000672  f9b91000          LDRSH    r1,[r9,#0]            ;521  ; IKB
000676  4288              CMP      r0,r1                 ;521
000678  db06              BLT      |L1.1672|
00067a  4898              LDR      r0,|L1.2268|
00067c  e000              B        |L1.1664|
                  |L1.1662|
00067e  e020              B        |L1.1730|
                  |L1.1664|
000680  f890003d          LDRB     r0,[r0,#0x3d]         ;521  ; bat_ips
000684  07c0              LSLS     r0,r0,#31             ;521
000686  d001              BEQ      |L1.1676|
                  |L1.1672|
000688  f888b00d          STRB     r11,[r8,#0xd]         ;521
                  |L1.1676|
00068c  4894              LDR      r0,|L1.2272|
00068e  7800              LDRB     r0,[r0,#0]            ;523  ; net_av
000690  b938              CBNZ     r0,|L1.1698|
000692  f898000e          LDRB     r0,[r8,#0xe]          ;523  ; num_of_wrks_bps
000696  b120              CBZ      r0,|L1.1698|
000698  f8980013          LDRB     r0,[r8,#0x13]         ;523  ; spc_stat
00069c  b128              CBZ      r0,|L1.1706|
00069e  2802              CMP      r0,#2                 ;523
0006a0  d003              BEQ      |L1.1706|
                  |L1.1698|
0006a2  7025              STRB     r5,[r4,#0]            ;525
0006a4  7065              STRB     r5,[r4,#1]            ;526
0006a6  f888500d          STRB     r5,[r8,#0xd]          ;527
                  |L1.1706|
0006aa  7820              LDRB     r0,[r4,#0]            ;530  ; kb_start
0006ac  2801              CMP      r0,#1                 ;530
0006ae  d020              BEQ      |L1.1778|
0006b0  7860              LDRB     r0,[r4,#1]            ;530  ; kb_start
0006b2  2801              CMP      r0,#1                 ;530
0006b4  d01d              BEQ      |L1.1778|
0006b6  f898000d          LDRB     r0,[r8,#0xd]          ;530  ; kb_start_ips
0006ba  2801              CMP      r0,#1                 ;530
0006bc  d019              BEQ      |L1.1778|
;;;533    		}
;;;534    	else kb_cnt_1lev=0;
0006be  f8a85042          STRH     r5,[r8,#0x42]
                  |L1.1730|
;;;535    	}
;;;536    
;;;537    if(kb_cnt_1lev)
0006c2  4641              MOV      r1,r8
0006c4  f9b80042          LDRSH    r0,[r8,#0x42]  ; kb_cnt_1lev
;;;538    	{
;;;539    	kb_cnt_1lev--;
;;;540    
;;;541    	if(kb_cnt_1lev>5)mess_send(MESS2CNTRL_HNDL,PARAM_CNTRL_STAT_PLUS,30,15);
;;;542    	else if(kb_cnt_1lev>0) mess_send(MESS2CNTRL_HNDL,PARAM_CNTRL_STAT_MINUS,30,15);
;;;543    
;;;544    
;;;545    	if(kb_cnt_1lev==5)
;;;546    		{
;;;547    		ibat[0]=abs(bat[0]._Ib);
0006c8  f8df81d4          LDR      r8,|L1.2208|
0006cc  2800              CMP      r0,#0                 ;537
0006ce  f1080864          ADD      r8,r8,#0x64
0006d2  d07e              BEQ      |L1.2002|
0006d4  f1a00001          SUB      r0,r0,#1              ;539
0006d8  b200              SXTH     r0,r0                 ;539
0006da  468b              MOV      r11,r1                ;539
0006dc  f8a10042          STRH     r0,[r1,#0x42]         ;539
0006e0  2805              CMP      r0,#5                 ;541
0006e2  dd09              BLE      |L1.1784|
0006e4  230f              MOVS     r3,#0xf               ;541
0006e6  221e              MOVS     r2,#0x1e              ;541
0006e8  2164              MOVS     r1,#0x64              ;541
0006ea  20e1              MOVS     r0,#0xe1              ;541
0006ec  f7fffffe          BL       mess_send
0006f0  e00a              B        |L1.1800|
                  |L1.1778|
0006f2  f8a87042          STRH     r7,[r8,#0x42]         ;532
0006f6  e7e4              B        |L1.1730|
                  |L1.1784|
0006f8  2800              CMP      r0,#0                 ;542
0006fa  dd05              BLE      |L1.1800|
0006fc  230f              MOVS     r3,#0xf               ;542
0006fe  221e              MOVS     r2,#0x1e              ;542
000700  2169              MOVS     r1,#0x69              ;542
000702  20e1              MOVS     r0,#0xe1              ;542
000704  f7fffffe          BL       mess_send
                  |L1.1800|
000708  f8bb0042          LDRH     r0,[r11,#0x42]        ;545  ; kb_cnt_1lev
00070c  2805              CMP      r0,#5                 ;545
00070e  d111              BNE      |L1.1844|
000710  f9b60008          LDRSH    r0,[r6,#8]  ; bat
000714  f7fffffe          BL       abs
000718  f8a80000          STRH     r0,[r8,#0]
;;;548    		ibat[1]=abs(bat[1]._Ib);
00071c  f9b60054          LDRSH    r0,[r6,#0x54]  ; bat
000720  f7fffffe          BL       abs
000724  f8a80002          STRH     r0,[r8,#2]
;;;549    		ibat_ips=abs(Ib_ips_termokompensat);
000728  f9ba0000          LDRSH    r0,[r10,#0]  ; Ib_ips_termokompensat
00072c  f7fffffe          BL       abs
000730  f8ab0022          STRH     r0,[r11,#0x22]
                  |L1.1844|
;;;550    		}
;;;551    	
;;;552    	if(kb_cnt_1lev==0)
000734  485a              LDR      r0,|L1.2208|
000736  f8b00042          LDRH     r0,[r0,#0x42]  ; kb_cnt_1lev
00073a  2800              CMP      r0,#0
00073c  d154              BNE      |L1.2024|
;;;553    		{
;;;554    		ibat_[0]=abs(bat[0]._Ib);
00073e  f9b60008          LDRSH    r0,[r6,#8]  ; bat
000742  f7fffffe          BL       abs
000746  f8dfb158          LDR      r11,|L1.2208|
00074a  f10b0b68          ADD      r11,r11,#0x68
00074e  f8ab0000          STRH     r0,[r11,#0]
;;;555    		ibat_[1]=abs(bat[1]._Ib);
000752  f9b60054          LDRSH    r0,[r6,#0x54]  ; bat
000756  f7fffffe          BL       abs
00075a  f8ab0002          STRH     r0,[r11,#2]
;;;556    		ibat_ips_=abs(Ib_ips_termokompensat);
00075e  f9ba0000          LDRSH    r0,[r10,#0]  ; Ib_ips_termokompensat
000762  f7fffffe          BL       abs
000766  f8dfa138          LDR      r10,|L1.2208|
00076a  f8aa0024          STRH     r0,[r10,#0x24]
;;;557    
;;;558    		kb_cnt_2lev=0;
00076e  f8aa5044          STRH     r5,[r10,#0x44]
;;;559    
;;;560    
;;;561    		if(( (ibat[0]+ibat_[0]) < IKB )&& (kb_start[0]==1))
000772  f9b80000          LDRSH    r0,[r8,#0]  ; ibat
000776  f9bb1000          LDRSH    r1,[r11,#0]  ; ibat_
00077a  4408              ADD      r0,r0,r1
00077c  f9b91000          LDRSH    r1,[r9,#0]  ; IKB
000780  4288              CMP      r0,r1
000782  da02              BGE      |L1.1930|
000784  7820              LDRB     r0,[r4,#0]  ; kb_start
000786  2801              CMP      r0,#1
000788  d030              BEQ      |L1.2028|
                  |L1.1930|
;;;562    			{
;;;563    			kb_cnt_2lev=10;  
;;;564    			}
;;;565    		else if(bat[0]._Ub>200)
00078a  f9b60002          LDRSH    r0,[r6,#2]  ; bat
00078e  28c8              CMP      r0,#0xc8
000790  dd04              BLE      |L1.1948|
;;;566    			{
;;;567    			kb_start[0]=0;
000792  7025              STRB     r5,[r4,#0]
;;;568    			avar_bat_hndl(0,0);
000794  2100              MOVS     r1,#0
000796  4608              MOV      r0,r1
000798  f7fffffe          BL       avar_bat_hndl
                  |L1.1948|
;;;569    			}
;;;570    		
;;;571    		if(( (ibat[1]+ibat_[1]) < IKB ) && (kb_start[1]==1))
00079c  f9b80002          LDRSH    r0,[r8,#2]  ; ibat
0007a0  f9bb1002          LDRSH    r1,[r11,#2]  ; ibat_
0007a4  4408              ADD      r0,r0,r1
0007a6  f9b91000          LDRSH    r1,[r9,#0]  ; IKB
0007aa  4288              CMP      r0,r1
0007ac  da02              BGE      |L1.1972|
0007ae  7860              LDRB     r0,[r4,#1]  ; kb_start
0007b0  2801              CMP      r0,#1
0007b2  d01e              BEQ      |L1.2034|
                  |L1.1972|
;;;572    			{
;;;573    			kb_cnt_2lev=10;     
;;;574    			}
;;;575    		else  if(bat[1]._Ub>200)
0007b4  f9b6004e          LDRSH    r0,[r6,#0x4e]  ; bat
0007b8  28c8              CMP      r0,#0xc8
0007ba  dd04              BLE      |L1.1990|
;;;576    			{
;;;577    			kb_start[1]=0;
0007bc  7065              STRB     r5,[r4,#1]
;;;578    			avar_bat_hndl(1,0);
0007be  2100              MOVS     r1,#0
0007c0  2001              MOVS     r0,#1
0007c2  f7fffffe          BL       avar_bat_hndl
                  |L1.1990|
;;;579    			}
;;;580    #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;581    		if(( (ibat_ips+ibat_ips_) < IKB ) && (kb_start_ips==1))
0007c6  f9ba0022          LDRSH    r0,[r10,#0x22]  ; ibat_ips
0007ca  f9ba1024          LDRSH    r1,[r10,#0x24]  ; ibat_ips_
0007ce  4408              ADD      r0,r0,r1
0007d0  e000              B        |L1.2004|
                  |L1.2002|
0007d2  e011              B        |L1.2040|
                  |L1.2004|
0007d4  f9b91000          LDRSH    r1,[r9,#0]  ; IKB
0007d8  4288              CMP      r0,r1
0007da  da05              BGE      |L1.2024|
0007dc  f89a000d          LDRB     r0,[r10,#0xd]  ; kb_start_ips
0007e0  2801              CMP      r0,#1
0007e2  d101              BNE      |L1.2024|
;;;582    			{
;;;583    			kb_cnt_2lev=10;     
0007e4  f8aa7044          STRH     r7,[r10,#0x44]
                  |L1.2024|
;;;584    			}
;;;585    /*		else  if(bat[1]._Ub>200)
;;;586    			{
;;;587    			kb_start[1]=0;
;;;588    			avar_bat_hndl(1,0);
;;;589    			} */
;;;590    #endif
;;;591    		}	
;;;592    
;;;593    
;;;594    	}
;;;595    else if(kb_cnt_2lev)
;;;596    	{
;;;597    	kb_cnt_2lev--;
;;;598    
;;;599    	if(kb_cnt_2lev>5)mess_send(MESS2CNTRL_HNDL,PARAM_CNTRL_STAT_PLUS,200,15);
;;;600    	else if(kb_cnt_2lev>0) mess_send(MESS2CNTRL_HNDL,PARAM_CNTRL_STAT_MINUS,200,15);
;;;601    
;;;602    
;;;603    	if(kb_cnt_2lev==5)
;;;604    		{
;;;605    		ibat[0]=abs(bat[0]._Ib);
;;;606    		ibat[1]=abs(bat[1]._Ib);
;;;607    		ibat_ips=abs(Ib_ips_termokompensat);
;;;608    		}
;;;609    	
;;;610    	if(kb_cnt_2lev==0)
;;;611    		{
;;;612    		ibat_[0]=abs(bat[0]._Ib);
;;;613    		ibat_[1]=abs(bat[1]._Ib);
;;;614    		ibat_ips_=abs(Ib_ips_termokompensat);
;;;615    
;;;616    		kb_full_ver=0;
;;;617    
;;;618    		if(( (ibat[0]+ibat_[0]) < IKB ) && (kb_start[0]==1))
;;;619    			{
;;;620    			kb_full_ver=1;  
;;;621    			}
;;;622    		else if(bat[0]._Ub>200)			
;;;623    			{
;;;624    			kb_start[0]=0;
;;;625    			avar_bat_hndl(0,0);
;;;626    			}
;;;627    
;;;628    		if(( (ibat[1]+ibat_[1]) < IKB ) && (kb_start[1]==1))
;;;629    			{
;;;630    			kb_full_ver=1;     
;;;631    			}
;;;632    		else	if(bat[1]._Ub>200)		
;;;633    			{
;;;634    			kb_start[1]=0;
;;;635    			avar_bat_hndl(1,0);
;;;636    			}
;;;637    #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;638    		if(( (ibat_ips+ibat_ips_) < IKB )  && (kb_start_ips==1))
;;;639    			{
;;;640    			kb_full_ver=1;     
;;;641    			}
;;;642    #endif
;;;643    		}	
;;;644    	}
;;;645    
;;;646    else if(kb_full_ver)
;;;647    	{
;;;648    	
;;;649    	mess_send(MESS2CNTRL_HNDL,PARAM_CNTRL_STAT_STEP_DOWN,0,15);
;;;650    
;;;651    	if( abs(bat[0]._Ib) > IKB ) 
;;;652    		{
;;;653    		if(kb_start[0]==1)
;;;654    			{
;;;655    			kb_start[0]=0;
;;;656    			avar_bat_hndl(0,0);
;;;657    			}
;;;658    		}
;;;659    
;;;660    	if( abs(bat[1]._Ib) > IKB ) 
;;;661    		{
;;;662    		if(kb_start[1]==1)
;;;663    			{
;;;664    			kb_start[1]=0;
;;;665    			avar_bat_hndl(1,0);
;;;666    			}
;;;667    		}
;;;668    #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;669    	if( abs(Ib_ips_termokompensat) > IKB ) 
;;;670    		{
;;;671    		if(kb_start_ips==1)
;;;672    			{
;;;673    			kb_start_ips=0;
;;;674    			avar_bat_ips_hndl(0);
;;;675    			}
;;;676    		}
;;;677    #endif
;;;678    
;;;679    	if ((kb_start[0]==0) && (kb_start[1]==0) && (kb_start_ips==0)) 
;;;680    		{
;;;681    		kb_full_ver=0;
;;;682    		}
;;;683    
;;;684    	if(( (mess_find(MESS2KB_HNDL))	&& (mess_data[0]==PARAM_CNTRL_IS_DOWN) ) || (load_U<(USIGN*10)) )
;;;685    		{
;;;686    		kb_full_ver=0;
;;;687    		if((kb_start[0]==1)&&((load_I>(2*IKB)/10))&&(!(bat[0]._av&0x01))) avar_bat_hndl(0,1);
;;;688    		if((kb_start[1]==1)&&((load_I>(2*IKB)/10))&&(!(bat[1]._av&0x01))) avar_bat_hndl(1,1);
;;;689    #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;690    		if((kb_start_ips==1)&&((load_I>(2*IKB)/10))&&(!(bat_ips._av&0x01))) avar_bat_ips_hndl(1);
;;;691    #endif
;;;692    		}
;;;693    	}
;;;694    
;;;695    }
0007e8  e8bd9ff0          POP      {r4-r12,pc}
                  |L1.2028|
0007ec  f8aa7044          STRH     r7,[r10,#0x44]        ;563
0007f0  e7d4              B        |L1.1948|
                  |L1.2034|
0007f2  f8aa7044          STRH     r7,[r10,#0x44]        ;573
0007f6  e7e6              B        |L1.1990|
                  |L1.2040|
0007f8  f9b10044          LDRSH    r0,[r1,#0x44]         ;595  ; kb_cnt_2lev
0007fc  b3e8              CBZ      r0,|L1.2170|
0007fe  f1a00001          SUB      r0,r0,#1              ;597
000802  b200              SXTH     r0,r0                 ;597
000804  460f              MOV      r7,r1                 ;597
000806  f8a10044          STRH     r0,[r1,#0x44]         ;597
00080a  2805              CMP      r0,#5                 ;599
00080c  dd06              BLE      |L1.2076|
00080e  230f              MOVS     r3,#0xf               ;599
000810  22c8              MOVS     r2,#0xc8              ;599
000812  2164              MOVS     r1,#0x64              ;599
000814  20e1              MOVS     r0,#0xe1              ;599
000816  f7fffffe          BL       mess_send
00081a  e007              B        |L1.2092|
                  |L1.2076|
00081c  2800              CMP      r0,#0                 ;600
00081e  dd05              BLE      |L1.2092|
000820  230f              MOVS     r3,#0xf               ;600
000822  22c8              MOVS     r2,#0xc8              ;600
000824  2169              MOVS     r1,#0x69              ;600
000826  20e1              MOVS     r0,#0xe1              ;600
000828  f7fffffe          BL       mess_send
                  |L1.2092|
00082c  f8b70044          LDRH     r0,[r7,#0x44]         ;603  ; kb_cnt_2lev
000830  2805              CMP      r0,#5                 ;603
000832  d110              BNE      |L1.2134|
000834  f9b60008          LDRSH    r0,[r6,#8]            ;605  ; bat
000838  f7fffffe          BL       abs
00083c  f8a80000          STRH     r0,[r8,#0]            ;605
000840  f9b60054          LDRSH    r0,[r6,#0x54]         ;606  ; bat
000844  f7fffffe          BL       abs
000848  f8a80002          STRH     r0,[r8,#2]            ;606
00084c  f9ba0000          LDRSH    r0,[r10,#0]           ;607  ; Ib_ips_termokompensat
000850  f7fffffe          BL       abs
000854  8478              STRH     r0,[r7,#0x22]         ;607
                  |L1.2134|
000856  4812              LDR      r0,|L1.2208|
000858  f8b00044          LDRH     r0,[r0,#0x44]         ;610  ; kb_cnt_2lev
00085c  2800              CMP      r0,#0                 ;610
                  |L1.2142|
00085e  d1c3              BNE      |L1.2024|
000860  f9b60008          LDRSH    r0,[r6,#8]            ;612  ; bat
000864  f7fffffe          BL       abs
000868  4f0d              LDR      r7,|L1.2208|
00086a  3768              ADDS     r7,r7,#0x68           ;612
00086c  8038              STRH     r0,[r7,#0]            ;612
00086e  f9b60054          LDRSH    r0,[r6,#0x54]         ;613  ; bat
000872  f7fffffe          BL       abs
000876  8078              STRH     r0,[r7,#2]            ;613
000878  e000              B        |L1.2172|
                  |L1.2170|
00087a  e06f              B        |L1.2396|
                  |L1.2172|
00087c  f9ba0000          LDRSH    r0,[r10,#0]           ;614  ; Ib_ips_termokompensat
000880  f7fffffe          BL       abs
000884  f8dfa018          LDR      r10,|L1.2208|
000888  f8aa0024          STRH     r0,[r10,#0x24]        ;614
00088c  f88a500c          STRB     r5,[r10,#0xc]         ;616
000890  f9b80000          LDRSH    r0,[r8,#0]            ;618  ; ibat
000894  f9b71000          LDRSH    r1,[r7,#0]            ;618  ; ibat_
000898  4408              ADD      r0,r0,r1              ;618
00089a  e023              B        |L1.2276|
                  |L1.2204|
                          DCD      AVZ
                  |L1.2208|
                          DCD      ||area_number.21||
                  |L1.2212|
                          DCD      0x40024000
                  |L1.2216|
                          DCD      YEAR_AVZ
                  |L1.2220|
                          DCD      MONTH_AVZ
                  |L1.2224|
                          DCD      DATE_AVZ
                  |L1.2228|
                          DCD      HOUR_AVZ
                  |L1.2232|
                          DCD      MIN_AVZ
                  |L1.2236|
                          DCD      SEC_AVZ
                  |L1.2240|
                          DCD      AVZ_TIME
                  |L1.2244|
                          DCD      TBAT
                  |L1.2248|
                          DCD      Ib_ips_termokompensat
                  |L1.2252|
                          DCD      bat
                  |L1.2256|
                          DCD      IKB
                  |L1.2260|
                          DCD      BAT_IS_ON
                  |L1.2264|
                          DCD      ips_bat_av_vzvod
                  |L1.2268|
                          DCD      bat_ips
                  |L1.2272|
                          DCD      net_av
                  |L1.2276|
0008e4  f9b91000          LDRSH    r1,[r9,#0]            ;618  ; IKB
0008e8  4288              CMP      r0,r1                 ;618
0008ea  da02              BGE      |L1.2290|
0008ec  7820              LDRB     r0,[r4,#0]            ;618  ; kb_start
0008ee  2801              CMP      r0,#1                 ;618
0008f0  d02e              BEQ      |L1.2384|
                  |L1.2290|
0008f2  f9b60002          LDRSH    r0,[r6,#2]            ;622  ; bat
0008f6  28c8              CMP      r0,#0xc8              ;622
0008f8  dd04              BLE      |L1.2308|
0008fa  7025              STRB     r5,[r4,#0]            ;624
0008fc  2100              MOVS     r1,#0                 ;625
0008fe  4608              MOV      r0,r1                 ;625
000900  f7fffffe          BL       avar_bat_hndl
                  |L1.2308|
000904  f9b80002          LDRSH    r0,[r8,#2]            ;628  ; ibat
000908  f9b71002          LDRSH    r1,[r7,#2]            ;628  ; ibat_
00090c  4408              ADD      r0,r0,r1              ;628
00090e  f9b91000          LDRSH    r1,[r9,#0]            ;628  ; IKB
000912  4288              CMP      r0,r1                 ;628
000914  da02              BGE      |L1.2332|
000916  7860              LDRB     r0,[r4,#1]            ;628  ; kb_start
000918  2801              CMP      r0,#1                 ;628
00091a  d01c              BEQ      |L1.2390|
                  |L1.2332|
00091c  f9b6004e          LDRSH    r0,[r6,#0x4e]         ;632  ; bat
000920  28c8              CMP      r0,#0xc8              ;632
000922  dd04              BLE      |L1.2350|
000924  7065              STRB     r5,[r4,#1]            ;634
000926  2100              MOVS     r1,#0                 ;635
000928  2001              MOVS     r0,#1                 ;635
00092a  f7fffffe          BL       avar_bat_hndl
                  |L1.2350|
00092e  f9ba0022          LDRSH    r0,[r10,#0x22]        ;638  ; ibat_ips
000932  f9ba1024          LDRSH    r1,[r10,#0x24]        ;638  ; ibat_ips_
000936  4408              ADD      r0,r0,r1              ;638
000938  f9b91000          LDRSH    r1,[r9,#0]            ;638  ; IKB
00093c  4288              CMP      r0,r1                 ;638
00093e  f6bfaf53          BGE      |L1.2024|
000942  f89a000d          LDRB     r0,[r10,#0xd]         ;638  ; kb_start_ips
000946  2801              CMP      r0,#1                 ;638
000948  d189              BNE      |L1.2142|
00094a  f88ab00c          STRB     r11,[r10,#0xc]        ;640
                  |L1.2382|
00094e  e74b              B        |L1.2024|
                  |L1.2384|
000950  f88ab00c          STRB     r11,[r10,#0xc]        ;620
000954  e7d6              B        |L1.2308|
                  |L1.2390|
000956  f88ab00c          STRB     r11,[r10,#0xc]        ;630
00095a  e7e8              B        |L1.2350|
                  |L1.2396|
00095c  7b08              LDRB     r0,[r1,#0xc]          ;646  ; kb_full_ver
00095e  4688              MOV      r8,r1                 ;646
000960  2800              CMP      r0,#0                 ;646
000962  d0f4              BEQ      |L1.2382|
000964  230f              MOVS     r3,#0xf               ;649
000966  2200              MOVS     r2,#0                 ;649
000968  216e              MOVS     r1,#0x6e              ;649
00096a  20e1              MOVS     r0,#0xe1              ;649
00096c  f7fffffe          BL       mess_send
000970  f9b60008          LDRSH    r0,[r6,#8]            ;651  ; bat
000974  f7fffffe          BL       abs
000978  f9b91000          LDRSH    r1,[r9,#0]            ;651  ; IKB
00097c  4288              CMP      r0,r1                 ;651
00097e  dd07              BLE      |L1.2448|
000980  7820              LDRB     r0,[r4,#0]            ;653  ; kb_start
000982  2801              CMP      r0,#1                 ;653
000984  d104              BNE      |L1.2448|
000986  7025              STRB     r5,[r4,#0]            ;655
000988  2100              MOVS     r1,#0                 ;656
00098a  4608              MOV      r0,r1                 ;656
00098c  f7fffffe          BL       avar_bat_hndl
                  |L1.2448|
000990  f9b60054          LDRSH    r0,[r6,#0x54]         ;660  ; bat
000994  f7fffffe          BL       abs
000998  f9b91000          LDRSH    r1,[r9,#0]            ;660  ; IKB
00099c  4288              CMP      r0,r1                 ;660
00099e  dd06              BLE      |L1.2478|
0009a0  7860              LDRB     r0,[r4,#1]            ;662  ; kb_start
0009a2  2801              CMP      r0,#1                 ;662
0009a4  d103              BNE      |L1.2478|
0009a6  7065              STRB     r5,[r4,#1]            ;664
0009a8  2100              MOVS     r1,#0                 ;665
0009aa  f7fffffe          BL       avar_bat_hndl
                  |L1.2478|
0009ae  f9ba0000          LDRSH    r0,[r10,#0]           ;669  ; Ib_ips_termokompensat
0009b2  f7fffffe          BL       abs
0009b6  f9b91000          LDRSH    r1,[r9,#0]            ;669  ; IKB
0009ba  4288              CMP      r0,r1                 ;669
0009bc  dd08              BLE      |L1.2512|
0009be  f898000d          LDRB     r0,[r8,#0xd]          ;671  ; kb_start_ips
0009c2  2801              CMP      r0,#1                 ;671
0009c4  d104              BNE      |L1.2512|
0009c6  f888500d          STRB     r5,[r8,#0xd]          ;673
0009ca  2000              MOVS     r0,#0                 ;674
0009cc  f7fffffe          BL       avar_bat_ips_hndl
                  |L1.2512|
0009d0  7820              LDRB     r0,[r4,#0]            ;679  ; kb_start
0009d2  b930              CBNZ     r0,|L1.2530|
0009d4  7860              LDRB     r0,[r4,#1]            ;679  ; kb_start
0009d6  b920              CBNZ     r0,|L1.2530|
0009d8  f898000d          LDRB     r0,[r8,#0xd]          ;679  ; kb_start_ips
0009dc  b908              CBNZ     r0,|L1.2530|
0009de  f888500c          STRB     r5,[r8,#0xc]          ;681
                  |L1.2530|
0009e2  20e6              MOVS     r0,#0xe6              ;684
0009e4  f7fffffe          BL       mess_find
0009e8  b118              CBZ      r0,|L1.2546|
0009ea  48ff              LDR      r0,|L1.3560|
0009ec  6800              LDR      r0,[r0,#0]            ;684  ; mess_data
0009ee  28e7              CMP      r0,#0xe7              ;684
0009f0  d00a              BEQ      |L1.2568|
                  |L1.2546|
0009f2  48fe              LDR      r0,|L1.3564|
0009f4  49fe              LDR      r1,|L1.3568|
0009f6  f9b00000          LDRSH    r0,[r0,#0]            ;684  ; USIGN
0009fa  f9b11000          LDRSH    r1,[r1,#0]            ;684  ; load_U
0009fe  eb000080          ADD      r0,r0,r0,LSL #2       ;684
000a02  ebb10f40          CMP      r1,r0,LSL #1          ;684
                  |L1.2566|
000a06  daa2              BGE      |L1.2382|
                  |L1.2568|
000a08  f888500c          STRB     r5,[r8,#0xc]          ;686
000a0c  7820              LDRB     r0,[r4,#0]            ;687  ; kb_start
000a0e  4df9              LDR      r5,|L1.3572|
000a10  2801              CMP      r0,#1                 ;687
000a12  d10f              BNE      |L1.2612|
000a14  f9b90000          LDRSH    r0,[r9,#0]            ;687  ; IKB
000a18  f9b51000          LDRSH    r1,[r5,#0]            ;687  ; load_I
000a1c  0040              LSLS     r0,r0,#1              ;687
000a1e  fb90f0f7          SDIV     r0,r0,r7              ;687
000a22  4288              CMP      r0,r1                 ;687
000a24  da06              BGE      |L1.2612|
000a26  f896003d          LDRB     r0,[r6,#0x3d]         ;687  ; bat
000a2a  07c0              LSLS     r0,r0,#31             ;687
000a2c  d102              BNE      |L1.2612|
000a2e  2101              MOVS     r1,#1                 ;687
000a30  f7fffffe          BL       avar_bat_hndl
                  |L1.2612|
000a34  7860              LDRB     r0,[r4,#1]            ;688  ; kb_start
000a36  2801              CMP      r0,#1                 ;688
000a38  d110              BNE      |L1.2652|
000a3a  f9b90000          LDRSH    r0,[r9,#0]            ;688  ; IKB
000a3e  f9b51000          LDRSH    r1,[r5,#0]            ;688  ; load_I
000a42  0040              LSLS     r0,r0,#1              ;688
000a44  fb90f0f7          SDIV     r0,r0,r7              ;688
000a48  4288              CMP      r0,r1                 ;688
000a4a  da07              BGE      |L1.2652|
000a4c  f8960089          LDRB     r0,[r6,#0x89]         ;688  ; bat
000a50  07c0              LSLS     r0,r0,#31             ;688
000a52  d103              BNE      |L1.2652|
000a54  2101              MOVS     r1,#1                 ;688
000a56  4608              MOV      r0,r1                 ;688
000a58  f7fffffe          BL       avar_bat_hndl
                  |L1.2652|
000a5c  f898000d          LDRB     r0,[r8,#0xd]          ;690  ; kb_start_ips
000a60  2801              CMP      r0,#1                 ;690
                  |L1.2658|
000a62  f47faf74          BNE      |L1.2382|
000a66  f9b90000          LDRSH    r0,[r9,#0]            ;690  ; IKB
000a6a  f9b51000          LDRSH    r1,[r5,#0]            ;690  ; load_I
000a6e  0040              LSLS     r0,r0,#1              ;690
000a70  fb90f0f7          SDIV     r0,r0,r7              ;690
000a74  4288              CMP      r0,r1                 ;690
000a76  dac6              BGE      |L1.2566|
000a78  48df              LDR      r0,|L1.3576|
000a7a  f890003d          LDRB     r0,[r0,#0x3d]         ;690  ; bat_ips
000a7e  07c0              LSLS     r0,r0,#31             ;690
000a80  d1ef              BNE      |L1.2658|
000a82  e8bd5ff0          POP      {r4-r12,lr}           ;690
000a86  2001              MOVS     r0,#1                 ;690
000a88  f7ffbffe          B.W      avar_bat_ips_hndl
;;;696    
                          ENDP

                  samokalibr_hndl PROC
;;;705    //-----------------------------------------------
;;;706    void samokalibr_hndl(void)
000a8c  e92d47f0          PUSH     {r4-r10,lr}
;;;707    {
;;;708    if(++samokalibr_cnt>=1800)samokalibr_cnt=0;
000a90  4cda              LDR      r4,|L1.3580|
000a92  8fe0              LDRH     r0,[r4,#0x3e]  ; samokalibr_cnt
000a94  1c40              ADDS     r0,r0,#1
000a96  b200              SXTH     r0,r0
000a98  87e0              STRH     r0,[r4,#0x3e]
000a9a  f5b06fe1          CMP      r0,#0x708
000a9e  db02              BLT      |L1.2726|
000aa0  f04f0000          MOV      r0,#0
000aa4  87e0              STRH     r0,[r4,#0x3e]
                  |L1.2726|
;;;709    
;;;710    if(samokalibr_cnt>=1785U)
000aa6  f9b4003e          LDRSH    r0,[r4,#0x3e]  ; samokalibr_cnt
000aaa  f5b06fdf          CMP      r0,#0x6f8
000aae  d911              BLS      |L1.2772|
;;;711    	{
;;;712    	mess_send(MESS2RELE_HNDL,PARAM_RELE_SAMOKALIBR,1,15);
000ab0  230f              MOVS     r3,#0xf
000ab2  2201              MOVS     r2,#1
000ab4  2164              MOVS     r1,#0x64
000ab6  20d2              MOVS     r0,#0xd2
000ab8  f7fffffe          BL       mess_send
;;;713    	mess_send(MESS2IND_HNDL,PARAM_SAMOKALIBR,0,15);
000abc  230f              MOVS     r3,#0xf
000abe  2200              MOVS     r2,#0
000ac0  21d8              MOVS     r1,#0xd8
000ac2  20d7              MOVS     r0,#0xd7
000ac4  f7fffffe          BL       mess_send
;;;714    	mess_send(MESS2MATEMAT,PARAM_SAMOKALIBR,0,15);
000ac8  230f              MOVS     r3,#0xf
000aca  2200              MOVS     r2,#0
000acc  21d8              MOVS     r1,#0xd8
000ace  20dc              MOVS     r0,#0xdc
000ad0  f7fffffe          BL       mess_send
                  |L1.2772|
;;;715    	} 
;;;716    
;;;717    if(samokalibr_cnt==1799U)
000ad4  f9b4003e          LDRSH    r0,[r4,#0x3e]  ; samokalibr_cnt
000ad8  f5a061e0          SUB      r1,r0,#0x700
000adc  3907              SUBS     r1,#7
000ade  d133              BNE      |L1.2888|
;;;718    	{
;;;719    	if((Kibat0[0]!=ad7705_buff_[0])&&(abs(bat[0]._Ib/10)<IZMAX)) lc640_write_int(ADR_KI0BAT[0],ad7705_buff_[0]);
000ae0  4dc7              LDR      r5,|L1.3584|
000ae2  4cc8              LDR      r4,|L1.3588|
000ae4  4ec8              LDR      r6,|L1.3592|
000ae6  8828              LDRH     r0,[r5,#0]  ; Kibat0
000ae8  8821              LDRH     r1,[r4,#0]  ; ad7705_buff_
000aea  270a              MOVS     r7,#0xa
000aec  f8df831c          LDR      r8,|L1.3596|
000af0  f8df931c          LDR      r9,|L1.3600|
000af4  4288              CMP      r0,r1
000af6  d010              BEQ      |L1.2842|
000af8  f9b60008          LDRSH    r0,[r6,#8]  ; bat
000afc  fb90f0f7          SDIV     r0,r0,r7
000b00  b200              SXTH     r0,r0
000b02  f7fffffe          BL       abs
000b06  f9b81000          LDRSH    r1,[r8,#0]  ; IZMAX
000b0a  4288              CMP      r0,r1
000b0c  da05              BGE      |L1.2842|
000b0e  f9b41000          LDRSH    r1,[r4,#0]  ; ad7705_buff_
000b12  f9b90000          LDRSH    r0,[r9,#0]  ; ADR_KI0BAT
000b16  f7fffffe          BL       lc640_write_int
                  |L1.2842|
;;;720    	if((Kibat0[1]!=ad7705_buff_[1])&&(abs(bat[0]._Ib/10)<IZMAX)) lc640_write_int(ADR_KI0BAT[1],ad7705_buff_[1]);
000b1a  8868              LDRH     r0,[r5,#2]  ; Kibat0
000b1c  8861              LDRH     r1,[r4,#2]  ; ad7705_buff_
000b1e  4288              CMP      r0,r1
000b20  d012              BEQ      |L1.2888|
000b22  f9b60008          LDRSH    r0,[r6,#8]  ; bat
000b26  fb90f0f7          SDIV     r0,r0,r7
000b2a  b200              SXTH     r0,r0
000b2c  f7fffffe          BL       abs
000b30  f9b81000          LDRSH    r1,[r8,#0]  ; IZMAX
000b34  4288              CMP      r0,r1
000b36  da07              BGE      |L1.2888|
000b38  f9b41002          LDRSH    r1,[r4,#2]  ; ad7705_buff_
000b3c  f9b90002          LDRSH    r0,[r9,#2]  ; ADR_KI0BAT
000b40  e8bd47f0          POP      {r4-r10,lr}
000b44  f7ffbffe          B.W      lc640_write_int
                  |L1.2888|
;;;721    	
;;;722    	}	 	
;;;723    }
000b48  e8bd87f0          POP      {r4-r10,pc}
;;;724    
                          ENDP

                  ubat_old_drv PROC
;;;727    //-----------------------------------------------
;;;728    void ubat_old_drv(void)
000b4c  b510              PUSH     {r4,lr}
;;;729    {        
;;;730    bat_u_old_cnt++;
000b4e  4cb1              LDR      r4,|L1.3604|
000b50  8820              LDRH     r0,[r4,#0]  ; bat_u_old_cnt
000b52  f1000001          ADD      r0,r0,#1
000b56  8020              STRH     r0,[r4,#0]
;;;731    gran_ring(&bat_u_old_cnt,0,8);
000b58  f04f0208          MOV      r2,#8
000b5c  f04f0100          MOV      r1,#0
000b60  4620              MOV      r0,r4
000b62  f7fffffe          BL       gran_ring
;;;732    
;;;733    bat[0]._u_old[bat_u_old_cnt]=bat[0]._Ub;
000b66  49a8              LDR      r1,|L1.3592|
000b68  f9b40000          LDRSH    r0,[r4,#0]  ; bat_u_old_cnt
000b6c  eb010040          ADD      r0,r1,r0,LSL #1
000b70  884a              LDRH     r2,[r1,#2]  ; bat
000b72  8402              STRH     r2,[r0,#0x20]
;;;734    bat[1]._u_old[bat_u_old_cnt]=bat[1]._Ub;
000b74  f8b1104e          LDRH     r1,[r1,#0x4e]  ; bat
000b78  f8a0106c          STRH     r1,[r0,#0x6c]
;;;735    }
000b7c  bd10              POP      {r4,pc}
;;;736    
                          ENDP

                  unet_drv PROC
;;;737    //-----------------------------------------------
;;;738    void unet_drv(void)
000b7e  b570              PUSH     {r4-r6,lr}
;;;739    {
;;;740    if(net_U<UMN)
000b80  4da5              LDR      r5,|L1.3608|
000b82  48a6              LDR      r0,|L1.3612|
;;;741    	{
;;;742    	if((unet_drv_cnt<10)&&(main_1Hz_cnt>15))
000b84  4aa6              LDR      r2,|L1.3616|
000b86  f9b51000          LDRSH    r1,[r5,#0]            ;740  ; net_U
000b8a  f9b03000          LDRSH    r3,[r0,#0]            ;740  ; UMN
000b8e  f9920000          LDRSB    r0,[r2,#0]
000b92  4299              CMP      r1,r3                 ;740
000b94  da1f              BGE      |L1.3030|
;;;743    		{
;;;744    		unet_drv_cnt++;
;;;745    		if(unet_drv_cnt>=10)
;;;746    			{
;;;747    			net_Ustore=net_U;
000b96  4ca3              LDR      r4,|L1.3620|
000b98  280a              CMP      r0,#0xa               ;742
000b9a  da0f              BGE      |L1.3004|
000b9c  4ba2              LDR      r3,|L1.3624|
000b9e  f9b33000          LDRSH    r3,[r3,#0]            ;742  ; main_1Hz_cnt
000ba2  2b0f              CMP      r3,#0xf               ;742
000ba4  dd0a              BLE      |L1.3004|
000ba6  f1000001          ADD      r0,r0,#1              ;744
000baa  b240              SXTB     r0,r0                 ;744
000bac  7010              STRB     r0,[r2,#0]            ;744
000bae  280a              CMP      r0,#0xa               ;745
000bb0  db09              BLT      |L1.3014|
000bb2  8021              STRH     r1,[r4,#0]
;;;748    		 	avar_unet_hndl(1);
000bb4  2001              MOVS     r0,#1
000bb6  f7fffffe          BL       avar_unet_hndl
000bba  e004              B        |L1.3014|
                  |L1.3004|
;;;749    			
;;;750    			}
;;;751    		}
;;;752    	else if(unet_drv_cnt>=10)unet_drv_cnt=10;
000bbc  280a              CMP      r0,#0xa
000bbe  db02              BLT      |L1.3014|
000bc0  f04f000a          MOV      r0,#0xa
000bc4  7010              STRB     r0,[r2,#0]
                  |L1.3014|
;;;753    
;;;754    	if(net_U<net_Ustore) net_Ustore=net_U;	
000bc6  f9b50000          LDRSH    r0,[r5,#0]  ; net_U
000bca  f9b41000          LDRSH    r1,[r4,#0]  ; net_Ustore
000bce  4288              CMP      r0,r1
000bd0  da00              BGE      |L1.3028|
000bd2  8020              STRH     r0,[r4,#0]
                  |L1.3028|
;;;755    	}
;;;756    
;;;757    else if(net_U>UMN)
;;;758    	{                 
;;;759    	if(unet_drv_cnt)
;;;760    		{
;;;761    		unet_drv_cnt--;
;;;762    		if(unet_drv_cnt<=0)
;;;763    			{
;;;764    			avar_unet_hndl(0);
;;;765    			}
;;;766    		}
;;;767    	else if(unet_drv_cnt<0)unet_drv_cnt=0;
;;;768    	
;;;769    	}
;;;770    
;;;771    }
000bd4  bd70              POP      {r4-r6,pc}
                  |L1.3030|
000bd6  ddfd              BLE      |L1.3028|
000bd8  2800              CMP      r0,#0                 ;759
000bda  d0fb              BEQ      |L1.3028|
000bdc  f1a00001          SUB      r0,r0,#1              ;761
000be0  b240              SXTB     r0,r0                 ;761
000be2  7010              STRB     r0,[r2,#0]            ;761
000be4  2800              CMP      r0,#0                 ;762
000be6  dcf5              BGT      |L1.3028|
000be8  e8bd4070          POP      {r4-r6,lr}            ;764
000bec  2000              MOVS     r0,#0                 ;764
000bee  f7ffbffe          B.W      avar_unet_hndl
;;;772    
                          ENDP

                  matemat PROC
;;;773    //-----------------------------------------------
;;;774    void matemat(void)
000bf2  e92d4ffe          PUSH     {r1-r11,lr}
;;;775    {
;;;776    //signed short temp_SS;
;;;777    signed long temp_SL/*,temp_SL_*/;
;;;778    char /*temp,*/i;
;;;779    //signed short temp_SS;
;;;780    
;;;781    #ifdef UKU_MGTS
;;;782    // 
;;;783    temp_SL=(signed long)net_buff_;
;;;784    temp_SL*=Kunet;
;;;785    temp_SL/=110000L;
;;;786    net_U=(signed short)temp_SL;
;;;787    #endif
;;;788    
;;;789    #ifdef UKU_RSTKM
;;;790    // 
;;;791    temp_SL=(signed long)net_buff_;
;;;792    temp_SL*=Kunet;
;;;793    temp_SL/=110000L;
;;;794    net_U=(signed short)temp_SL;
;;;795    #endif
;;;796    
;;;797    #ifdef UKU_3U
;;;798    // 
;;;799    temp_SL=(signed long)net_buff_;
;;;800    temp_SL*=Kunet;
;;;801    temp_SL/=36000L;
;;;802    net_U=(signed short)temp_SL;
;;;803    #endif
;;;804    
;;;805    #ifdef UKU_6U
;;;806    // 
;;;807    
;;;808    if((AUSW_MAIN%10)||(AUSW_MAIN==2400)||(AUSW_MAIN==4800)||(AUSW_MAIN==6000))
;;;809    	{
;;;810    
;;;811    	if(bps[11]._device==dNET_METR)
;;;812    		{
;;;813    		net_metr_buff_[0]=((signed short)bps[11]._buff[0])+(((signed short)bps[11]._buff[1])<<8);
;;;814    		net_metr_buff_[1]=((signed short)bps[11]._buff[2])+(((signed short)bps[11]._buff[3])<<8);
;;;815    		net_metr_buff_[2]=((signed short)bps[11]._buff[4])+(((signed short)bps[11]._buff[5])<<8);
;;;816    
;;;817    		temp_SL=(signed long)net_metr_buff_[0];
;;;818    		temp_SL*=KunetA;
;;;819    		temp_SL/=6000L;
;;;820    		net_Ua=(signed short)temp_SL;
;;;821    	
;;;822    		temp_SL=(signed long)net_metr_buff_[1];
;;;823    		temp_SL*=KunetB;
;;;824    		temp_SL/=6000L;
;;;825    		net_Ub=(signed short)temp_SL;
;;;826    	
;;;827    		temp_SL=(signed long)net_metr_buff_[2];
;;;828    		temp_SL*=KunetC;
;;;829    		temp_SL/=6000L;
;;;830    		net_Uc=(signed short)temp_SL;
;;;831    		}
;;;832    	else
;;;833    		{
;;;834    		temp_SL=(signed long)net_buff_;
;;;835    		temp_SL*=KunetA;
;;;836    		temp_SL/=110000L;
;;;837    		net_Ua=(signed short)temp_SL;
;;;838    	
;;;839    		temp_SL=(signed long)adc_buff_[3];
;;;840    		temp_SL*=KunetB;
;;;841    		temp_SL/=6000L;
;;;842    		net_Ub=(signed short)temp_SL;
;;;843    	
;;;844    		temp_SL=(signed long)adc_buff_[10];
;;;845    		temp_SL*=KunetC;
;;;846    		temp_SL/=6000L;
;;;847    		net_Uc=(signed short)temp_SL;
;;;848    		}
;;;849    
;;;850    	net_U=net_Ua;
;;;851    	if(net_Ub<net_U)net_U=net_Ub;
;;;852    	if(net_Uc<net_U)net_U=net_Uc;
;;;853    	}
;;;854    else 
;;;855    	{
;;;856    	temp_SL=(signed long)net_buff_;
;;;857    	temp_SL*=Kunet;
;;;858    	temp_SL/=110000L;
;;;859    	net_U=(signed short)temp_SL;
;;;860    	}
;;;861    
;;;862    
;;;863    
;;;864    
;;;865    #endif
;;;866    
;;;867    #ifdef UKU_GLONASS
;;;868    // 
;;;869    temp_SL=(signed long)net_buff_;
;;;870    temp_SL*=Kunet;
;;;871    temp_SL/=110000L;
;;;872    net_U=(signed short)temp_SL;
;;;873    #endif
;;;874    
;;;875    #ifdef UKU_KONTUR
;;;876    // 
;;;877    temp_SL=(signed long)net_buff_;
;;;878    temp_SL*=Kunet;
;;;879    temp_SL/=110000L;
;;;880    net_U=(signed short)temp_SL;
;;;881    #endif
;;;882    
;;;883    
;;;884    #ifdef UKU_220_V2
;;;885    // 
;;;886    
;;;887    if(AUSW_MAIN==22033)
;;;888    	{
;;;889    	temp_SL=(signed long)net_buff_;
;;;890    	temp_SL*=KunetA;
;;;891    	temp_SL/=6000L;
;;;892    	net_Ua=(signed short)temp_SL;
;;;893    
;;;894    	temp_SL=(signed long)adc_buff_[3];
;;;895    	temp_SL*=KunetB;
;;;896    	temp_SL/=6000L;
;;;897    	net_Ub=(signed short)temp_SL;
;;;898    
;;;899    	temp_SL=(signed long)adc_buff_[10];
;;;900    	temp_SL*=KunetC;
;;;901    	temp_SL/=6000L;
;;;902    	net_Uc=(signed short)temp_SL;
;;;903    
;;;904    	net_U=net_Ua;
;;;905    	if(net_Ub<net_U)net_U=net_Ub;
;;;906    	if(net_Uc<net_U)net_U=net_Uc;
;;;907    	}
;;;908    else
;;;909    	{
;;;910    	temp_SL=(signed long)net_buff_;
;;;911    	temp_SL*=Kunet;
;;;912    	temp_SL/=5000L;
;;;913    	net_U=(signed short)temp_SL;
;;;914    	}
;;;915    #endif
;;;916    
;;;917    
;;;918    #ifdef UKU_220
;;;919    // 
;;;920    
;;;921    if(AUSW_MAIN==22035)
;;;922    	{
;;;923    	temp_SL=(signed long)net_buff_;
;;;924    	temp_SL*=KunetA;
;;;925    	temp_SL/=6000L;
;;;926    	net_Ua=(signed short)temp_SL;
;;;927    
;;;928    	temp_SL=(signed long)adc_buff_[3];
;;;929    	temp_SL*=KunetB;
;;;930    	temp_SL/=6000L;
;;;931    	net_Ub=(signed short)temp_SL;
;;;932    
;;;933    	temp_SL=(signed long)adc_buff_[10];
;;;934    	temp_SL*=KunetC;
;;;935    	temp_SL/=6000L;
;;;936    	net_Uc=(signed short)temp_SL;
;;;937    
;;;938    	net_U=net_Ua;
;;;939    	if(net_Ub<net_U)net_U=net_Ub;
;;;940    	if(net_Uc<net_U)net_U=net_Uc;
;;;941    	}
;;;942    else
;;;943    	{
;;;944    	temp_SL=(signed long)net_buff_;
;;;945    	temp_SL*=Kunet;
;;;946    	#ifdef _ACDC_
;;;947    	temp_SL/=500L;
;;;948    	#else
;;;949    	temp_SL/=5000L;
;;;950    	#endif
;;;951    	net_U=(signed short)temp_SL;
;;;952    	
;;;953    	}
;;;954    #endif
;;;955    
;;;956    #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;957    // 
;;;958    
;;;959    
;;;960    	if(bps[11]._device==dNET_METR)
000bf6  488d              LDR      r0,|L1.3628|
;;;961    		{
;;;962    		net_metr_buff_[0]=((signed short)bps[11]._buff[0])+(((signed short)bps[11]._buff[1])<<8);
;;;963    		net_metr_buff_[1]=((signed short)bps[11]._buff[2])+(((signed short)bps[11]._buff[3])<<8);
;;;964    		net_metr_buff_[2]=((signed short)bps[11]._buff[4])+(((signed short)bps[11]._buff[5])<<8);
;;;965    
;;;966    		temp_SL=(signed long)net_metr_buff_[2];
;;;967    		temp_SL*=KunetA;
;;;968    		temp_SL/=6000L;
;;;969    		net_Ua=(signed short)temp_SL;
;;;970    	
;;;971    		temp_SL=(signed long)net_metr_buff_[1];
;;;972    		temp_SL*=KunetB;
000bf8  498f              LDR      r1,|L1.3640|
000bfa  4a8d              LDR      r2,|L1.3632|
000bfc  f89003f4          LDRB     r0,[r0,#0x3f4]        ;960  ; bps
;;;973    		temp_SL/=6000L;
;;;974    		net_Ub=(signed short)temp_SL;
;;;975    	
;;;976    		temp_SL=(signed long)net_metr_buff_[0];
;;;977    		temp_SL*=KunetC;
000c00  4b8e              LDR      r3,|L1.3644|
000c02  9002              STR      r0,[sp,#8]            ;967
000c04  f9b1b000          LDRSH    r11,[r1,#0]           ;972
000c08  f8dfc228          LDR      r12,|L1.3636|
000c0c  f9b2a000          LDRSH    r10,[r2,#0]           ;967
000c10  f9b31000          LDRSH    r1,[r3,#0]
000c14  4d8a              LDR      r5,|L1.3648|
;;;978    		temp_SL/=6000L;
;;;979    		net_Uc=(signed short)temp_SL;
000c16  4c8b              LDR      r4,|L1.3652|
;;;980    
;;;981    		net_F3=((signed short)bps[11]._buff[6])+(((signed short)bps[11]._buff[7])<<8);
;;;982    
;;;983    		net_U=net_Ua;
;;;984    		if(net_Ub<net_U)net_U=net_Ub;
;;;985    		if(net_Uc<net_U)net_U=net_Uc;
;;;986    		}
;;;987    	  else if(AUSW_MAIN==22033)
;;;988    	{
;;;989    	temp_SL=(signed long)net_buff_;
000c18  4f78              LDR      r7,|L1.3580|
000c1a  f2456611          MOV      r6,#0x5611            ;987
;;;990    	temp_SL*=KunetA;
;;;991    	temp_SL/=4000L;
;;;992    	net_Ua=(signed short)temp_SL;
;;;993    
;;;994    	temp_SL=(signed long)adc_buff_[3];
;;;995    	temp_SL*=KunetB;
;;;996    	temp_SL/=6000L;
;;;997    	net_Ub=(signed short)temp_SL;
;;;998    
;;;999    	temp_SL=(signed long)adc_buff_[10];
;;;1000   	temp_SL*=KunetC;
;;;1001   	temp_SL/=6000L;
;;;1002   	net_Uc=(signed short)temp_SL;
;;;1003   
;;;1004   	net_U=net_Ua;
;;;1005   	if(net_Ub<net_U)net_U=net_Ub;
;;;1006   	if(net_Uc<net_U)net_U=net_Uc;
;;;1007   	}
;;;1008   else if((AUSW_MAIN==22063)||(AUSW_MAIN==22023)||(AUSW_MAIN==22043)||(AUSW_MAIN==22018))
;;;1009   	{
;;;1010   	temp_SL=(signed long)net_buff_;
;;;1011   	temp_SL*=KunetA;
;;;1012   	temp_SL/=40000L;
;;;1013   	net_Ua=(signed short)temp_SL;
;;;1014   
;;;1015   	temp_SL=(signed long)adc_buff_[3];
;;;1016   	temp_SL*=KunetB;
;;;1017   	temp_SL/=6000L;
;;;1018   	net_Ub=(signed short)temp_SL;
;;;1019   
;;;1020   	temp_SL=(signed long)adc_buff_[10];
;;;1021   	temp_SL*=KunetC;
;;;1022   	temp_SL/=6000L;
;;;1023   	net_Uc=(signed short)temp_SL;
;;;1024   
;;;1025   	net_U=net_Ua;
;;;1026   	if(net_Ub<net_U)net_U=net_Ub;
;;;1027   	if(net_Uc<net_U)net_U=net_Uc;
;;;1028   	}
;;;1029   else	if((AUSW_MAIN==22010)||(AUSW_MAIN==22011) )
;;;1030   	{
;;;1031   	temp_SL=(signed long)net_buff_;
;;;1032   	temp_SL*=Kunet;
;;;1033   	temp_SL/=35000L;
;;;1034   	net_U=(signed short)temp_SL;
;;;1035   	
;;;1036   	}
;;;1037   else
;;;1038   	{
;;;1039   	temp_SL=(signed long)net_buff_;
;;;1040   	temp_SL*=Kunet;
;;;1041   	#ifdef _ACDC_
;;;1042   	temp_SL/=500L;
000c1e  f44f78fa          MOV      r8,#0x1f4
000c22  9101              STR      r1,[sp,#4]            ;960
000c24  2807              CMP      r0,#7                 ;960
000c26  d036              BEQ      |L1.3222|
000c28  4639              MOV      r1,r7                 ;989
000c2a  4b88              LDR      r3,|L1.3660|
000c2c  8d0a              LDRH     r2,[r1,#0x28]         ;989
000c2e  4980              LDR      r1,|L1.3632|
000c30  f8df9204          LDR      r9,|L1.3640|
000c34  f2417a70          MOV      r10,#0x1770           ;968
000c38  f9b11000          LDRSH    r1,[r1,#0]            ;967
000c3c  f9b99000          LDRSH    r9,[r9,#0]            ;972
000c40  434a              MULS     r2,r1,r2              ;990
000c42  f9b31006          LDRSH    r1,[r3,#6]            ;994
000c46  f9b33014          LDRSH    r3,[r3,#0x14]         ;999
000c4a  fb01f109          MUL      r1,r1,r9              ;995
000c4e  f8df91ec          LDR      r9,|L1.3644|
000c52  fb91f1fa          SDIV     r1,r1,r10             ;996
000c56  f9b99000          LDRSH    r9,[r9,#0]            ;977
000c5a  487b              LDR      r0,|L1.3656|
000c5c  fb03f309          MUL      r3,r3,r9              ;1000
000c60  fb93f3fa          SDIV     r3,r3,r10             ;1001
000c64  8800              LDRH     r0,[r0,#0]            ;987  ; AUSW_MAIN
000c66  b209              SXTH     r1,r1                 ;997
000c68  b21b              SXTH     r3,r3                 ;1002
000c6a  42b0              CMP      r0,r6                 ;987
000c6c  d155              BNE      |L1.3354|
000c6e  f44f607a          MOV      r0,#0xfa0             ;991
000c72  fb92f0f0          SDIV     r0,r2,r0              ;991
000c76  b200              SXTH     r0,r0                 ;992
000c78  f8ac0000          STRH     r0,[r12,#0]           ;992
000c7c  8029              STRH     r1,[r5,#0]            ;997
000c7e  8023              STRH     r3,[r4,#0]            ;1002
000c80  4a65              LDR      r2,|L1.3608|
000c82  8010              STRH     r0,[r2,#0]            ;1004
000c84  4281              CMP      r1,r0                 ;1005
000c86  da00              BGE      |L1.3210|
000c88  8011              STRH     r1,[r2,#0]            ;1005
                  |L1.3210|
000c8a  f9b20000          LDRSH    r0,[r2,#0]            ;1006  ; net_U
000c8e  4283              CMP      r3,r0                 ;1006
000c90  da7c              BGE      |L1.3468|
000c92  8013              STRH     r3,[r2,#0]            ;1006
000c94  e07a              B        |L1.3468|
                  |L1.3222|
000c96  486e              LDR      r0,|L1.3664|
000c98  4b58              LDR      r3,|L1.3580|
000c9a  7801              LDRB     r1,[r0,#0]            ;962  ; bps
000c9c  7842              LDRB     r2,[r0,#1]            ;962  ; bps
000c9e  f1030390          ADD      r3,r3,#0x90           ;962
000ca2  eb012102          ADD      r1,r1,r2,LSL #8       ;962
000ca6  fa1ff981          UXTH     r9,r1                 ;962
000caa  f8a39000          STRH     r9,[r3,#0]            ;962
000cae  7881              LDRB     r1,[r0,#2]            ;963  ; bps
000cb0  78c2              LDRB     r2,[r0,#3]            ;963  ; bps
000cb2  eb012102          ADD      r1,r1,r2,LSL #8       ;963
000cb6  b28a              UXTH     r2,r1                 ;963
000cb8  805a              STRH     r2,[r3,#2]            ;963
000cba  7901              LDRB     r1,[r0,#4]            ;964  ; bps
000cbc  f890e005          LDRB     lr,[r0,#5]            ;964  ; bps
000cc0  eb01210e          ADD      r1,r1,lr,LSL #8       ;964
000cc4  b289              UXTH     r1,r1                 ;964
000cc6  8099              STRH     r1,[r3,#4]            ;964
000cc8  fb01f10a          MUL      r1,r1,r10             ;967
000ccc  f2417370          MOV      r3,#0x1770            ;968
000cd0  fb91f1f3          SDIV     r1,r1,r3              ;968
000cd4  fa0ffa81          SXTH     r10,r1                ;969
000cd8  f8aca000          STRH     r10,[r12,#0]          ;969
000cdc  fb02f20b          MUL      r2,r2,r11             ;972
000ce0  fb92f1f3          SDIV     r1,r2,r3              ;973
000ce4  b209              SXTH     r1,r1                 ;974
000ce6  8029              STRH     r1,[r5,#0]            ;974
000ce8  9a01              LDR      r2,[sp,#4]            ;977
000cea  fb09f902          MUL      r9,r9,r2              ;977
000cee  fb99f2f3          SDIV     r2,r9,r3              ;978
000cf2  b212              SXTH     r2,r2                 ;979
000cf4  8022              STRH     r2,[r4,#0]            ;979
000cf6  7983              LDRB     r3,[r0,#6]            ;981  ; bps
000cf8  79c0              LDRB     r0,[r0,#7]            ;981  ; bps
000cfa  eb032000          ADD      r0,r3,r0,LSL #8       ;981
000cfe  4b55              LDR      r3,|L1.3668|
000d00  8018              STRH     r0,[r3,#0]            ;981
000d02  4845              LDR      r0,|L1.3608|
000d04  f8a0a000          STRH     r10,[r0,#0]           ;983
000d08  4551              CMP      r1,r10                ;984
000d0a  da00              BGE      |L1.3342|
000d0c  8001              STRH     r1,[r0,#0]            ;984
                  |L1.3342|
000d0e  f9b01000          LDRSH    r1,[r0,#0]            ;985  ; net_U
000d12  428a              CMP      r2,r1                 ;985
000d14  da3a              BGE      |L1.3468|
000d16  8002              STRH     r2,[r0,#0]            ;985
000d18  e038              B        |L1.3468|
                  |L1.3354|
000d1a  f5a049ac          SUB      r9,r0,#0x5600         ;1008
000d1e  f1b9092f          SUBS     r9,r9,#0x2f           ;1008
000d22  d008              BEQ      |L1.3382|
000d24  f1190928          ADDS     r9,r9,#0x28           ;1008
000d28  d005              BEQ      |L1.3382|
000d2a  f1b90914          SUBS     r9,r9,#0x14           ;1008
000d2e  d002              BEQ      |L1.3382|
000d30  f1190919          ADDS     r9,r9,#0x19           ;1008
000d34  d113              BNE      |L1.3422|
                  |L1.3382|
000d36  f6494040          MOV      r0,#0x9c40            ;1012
000d3a  fb92f0f0          SDIV     r0,r2,r0              ;1012
000d3e  b200              SXTH     r0,r0                 ;1013
000d40  f8ac0000          STRH     r0,[r12,#0]           ;1013
000d44  8029              STRH     r1,[r5,#0]            ;1018
000d46  8023              STRH     r3,[r4,#0]            ;1023
000d48  4a33              LDR      r2,|L1.3608|
000d4a  8010              STRH     r0,[r2,#0]            ;1025
000d4c  4281              CMP      r1,r0                 ;1026
000d4e  da00              BGE      |L1.3410|
000d50  8011              STRH     r1,[r2,#0]            ;1026
                  |L1.3410|
000d52  f9b20000          LDRSH    r0,[r2,#0]            ;1027  ; net_U
000d56  4283              CMP      r3,r0                 ;1027
000d58  da18              BGE      |L1.3468|
000d5a  8013              STRH     r3,[r2,#0]            ;1027
000d5c  e016              B        |L1.3468|
                  |L1.3422|
000d5e  493e              LDR      r1,|L1.3672|
000d60  f5a043aa          SUB      r3,r0,#0x5500         ;1029
000d64  f9b12000          LDRSH    r2,[r1,#0]            ;1032
000d68  4924              LDR      r1,|L1.3580|
000d6a  8d09              LDRH     r1,[r1,#0x28]         ;989
000d6c  4351              MULS     r1,r2,r1              ;1032
000d6e  3bfa              SUBS     r3,r3,#0xfa           ;1029
000d70  d001              BEQ      |L1.3446|
000d72  1e5a              SUBS     r2,r3,#1              ;1029
000d74  d106              BNE      |L1.3460|
                  |L1.3446|
000d76  f64800b8          MOV      r0,#0x88b8            ;1033
000d7a  fb91f0f0          SDIV     r0,r1,r0              ;1033
000d7e  4926              LDR      r1,|L1.3608|
000d80  8008              STRH     r0,[r1,#0]            ;1034
000d82  e003              B        |L1.3468|
                  |L1.3460|
000d84  fb91f0f8          SDIV     r0,r1,r8
;;;1043   	#else
;;;1044   	temp_SL/=5000L;
;;;1045   	#endif
;;;1046   	net_U=(signed short)temp_SL;
000d88  4923              LDR      r1,|L1.3608|
000d8a  8008              STRH     r0,[r1,#0]
                  |L1.3468|
;;;1047   	
;;;1048   	}
;;;1049   if(bps[11]._device!=dNET_METR) net_F3=net_F;
000d8c  9802              LDR      r0,[sp,#8]
000d8e  2807              CMP      r0,#7
000d90  d003              BEQ      |L1.3482|
000d92  4832              LDR      r0,|L1.3676|
000d94  8801              LDRH     r1,[r0,#0]  ; net_F
000d96  482f              LDR      r0,|L1.3668|
000d98  8001              STRH     r1,[r0,#0]
                  |L1.3482|
;;;1050   #endif
;;;1051   
;;;1052   #ifdef UKU_TELECORE2015
;;;1053   // 
;;;1054   temp_SL=(signed long)net_buff_;
;;;1055   temp_SL*=Kunet;
;;;1056   temp_SL/=110000L;
;;;1057   net_U=(signed short)temp_SL;
;;;1058   #endif
;;;1059   
;;;1060   // 
;;;1061   temp_SL=(signed long)adc_buff_[0];
000d9a  f8dfa0b0          LDR      r10,|L1.3660|
000d9e  f9ba1000          LDRSH    r1,[r10,#0]  ; adc_buff_
;;;1062   temp_SL*=Kubat[0];
000da2  4b2f              LDR      r3,|L1.3680|
000da4  f9b30000          LDRSH    r0,[r3,#0]  ; Kubat
000da8  4348              MULS     r0,r1,r0
;;;1063   temp_SL/=2000L;
000daa  f44f65fa          MOV      r5,#0x7d0
000dae  fb90f0f5          SDIV     r0,r0,r5
;;;1064   bat[0]._Ub=(signed short)temp_SL;
000db2  4c15              LDR      r4,|L1.3592|
000db4  8060              STRH     r0,[r4,#2]
;;;1065   
;;;1066   #ifdef UKU_220
;;;1067   // 
;;;1068   temp_SL=(signed long)adc_buff_[0];
;;;1069   temp_SL*=Kubat[0];
;;;1070   temp_SL/=400L;
;;;1071   bat[0]._Ub=(signed short)temp_SL;
;;;1072   #endif
;;;1073   
;;;1074   #ifdef UKU_220_V2
;;;1075   // 
;;;1076   temp_SL=(signed long)adc_buff_[0];
;;;1077   temp_SL*=Kubat[0];
;;;1078   temp_SL/=400L;
;;;1079   bat[0]._Ub=(signed short)temp_SL;
;;;1080   #endif
;;;1081   
;;;1082   temp_SL=(signed long)adc_buff_[4];
000db6  f9ba2008          LDRSH    r2,[r10,#8]  ; adc_buff_
;;;1083   temp_SL*=Kubatm[0];
000dba  492a              LDR      r1,|L1.3684|
000dbc  f9b10000          LDRSH    r0,[r1,#0]  ; Kubatm
000dc0  fb00f002          MUL      r0,r0,r2
;;;1084   temp_SL/=700L;
000dc4  f44f722f          MOV      r2,#0x2bc
000dc8  fb90f0f2          SDIV     r0,r0,r2
;;;1085   bat[0]._Ubm=(signed short)temp_SL;
000dcc  80a0              STRH     r0,[r4,#4]
;;;1086   
;;;1087   #ifdef UKU_KONTUR
;;;1088   temp_SL=(signed long)adc_buff_[4];
;;;1089   temp_SL*=Kubatm[0];
;;;1090   temp_SL/=2000L;
;;;1091   bat[0]._Ubm=(signed short)temp_SL;
;;;1092   #endif
;;;1093   
;;;1094   temp_SL=(signed long)adc_buff_[12];
000dce  f9bac018          LDRSH    r12,[r10,#0x18]  ; adc_buff_
;;;1095   temp_SL*=Kubat[1];
000dd2  f9b30002          LDRSH    r0,[r3,#2]  ; Kubat
000dd6  fb00f00c          MUL      r0,r0,r12
;;;1096   temp_SL/=2000L;
000dda  fb90f0f5          SDIV     r0,r0,r5
;;;1097   bat[1]._Ub=(signed short)temp_SL;
000dde  f8a4004e          STRH     r0,[r4,#0x4e]
;;;1098   
;;;1099   #ifdef UKU_220
;;;1100   temp_SL=(signed long)adc_buff_[12];
;;;1101   temp_SL*=Kubat[1];
;;;1102   temp_SL/=400L;
;;;1103   bat[1]._Ub=(signed short)temp_SL;
;;;1104   #endif
;;;1105   
;;;1106   #ifdef UKU_220_V2
;;;1107   temp_SL=(signed long)adc_buff_[12];
;;;1108   temp_SL*=Kubat[1];
;;;1109   temp_SL/=400L;
;;;1110   bat[1]._Ub=(signed short)temp_SL;
;;;1111   #endif
;;;1112   
;;;1113   temp_SL=(signed long)adc_buff_[1];
000de2  f9ba3002          LDRSH    r3,[r10,#2]  ; adc_buff_
;;;1114   temp_SL*=Kubatm[1];
000de6  e03f              B        |L1.3688|
                  |L1.3560|
                          DCD      mess_data
                  |L1.3564|
                          DCD      USIGN
                  |L1.3568|
                          DCD      load_U
                  |L1.3572|
                          DCD      load_I
                  |L1.3576|
                          DCD      bat_ips
                  |L1.3580|
                          DCD      ||area_number.21||
                  |L1.3584|
                          DCD      Kibat0
                  |L1.3588|
                          DCD      ad7705_buff_
                  |L1.3592|
                          DCD      bat
                  |L1.3596|
                          DCD      IZMAX
                  |L1.3600|
                          DCD      ADR_KI0BAT
                  |L1.3604|
                          DCD      bat_u_old_cnt
                  |L1.3608|
                          DCD      net_U
                  |L1.3612|
                          DCD      UMN
                  |L1.3616|
                          DCD      unet_drv_cnt
                  |L1.3620|
                          DCD      net_Ustore
                  |L1.3624|
                          DCD      main_1Hz_cnt
                  |L1.3628|
                          DCD      bps
                  |L1.3632|
                          DCD      KunetA
                  |L1.3636|
                          DCD      net_Ua
                  |L1.3640|
                          DCD      KunetB
                  |L1.3644|
                          DCD      KunetC
                  |L1.3648|
                          DCD      net_Ub
                  |L1.3652|
                          DCD      net_Uc
                  |L1.3656|
                          DCD      AUSW_MAIN
                  |L1.3660|
                          DCD      ||.bss||+0x400
                  |L1.3664|
                          DCD      bps+0x3fa
                  |L1.3668|
                          DCD      net_F3
                  |L1.3672|
                          DCD      Kunet
                  |L1.3676|
                          DCD      net_F
                  |L1.3680|
                          DCD      Kubat
                  |L1.3684|
                          DCD      Kubatm
                  |L1.3688|
000e68  f9b10002          LDRSH    r0,[r1,#2]  ; Kubatm
000e6c  fb00f003          MUL      r0,r0,r3
;;;1115   temp_SL/=700L;
000e70  fb90f0f2          SDIV     r0,r0,r2
;;;1116   bat[1]._Ubm=(signed short)temp_SL;
000e74  f8a40050          STRH     r0,[r4,#0x50]
;;;1117   #ifdef UKU_KONTUR
;;;1118   temp_SL=(signed long)adc_buff_[1];
;;;1119   temp_SL*=Kubatm[1];
;;;1120   temp_SL/=2000L;
;;;1121   bat[1]._Ubm=(signed short)temp_SL;
;;;1122   #endif
;;;1123   
;;;1124   #ifdef UKU_TELECORE2015
;;;1125   temp_SL=(signed long)adc_buff_[2];
;;;1126   temp_SL*=Kubat[0];
;;;1127   temp_SL/=2000L;
;;;1128   bat[0]._Ub=(signed short)temp_SL;
;;;1129   #endif
;;;1130   
;;;1131   /*
;;;1132   // 
;;;1133   if(!mess_find_unvol(MESS2MATEMAT))
;;;1134   	{
;;;1135   	temp_SL=(signed long)ad7705_buff_[0];
;;;1136   	temp_SL-=(signed long)Kibat0[0];
;;;1137   	temp_SL*=(signed long)Kibat1[0];
;;;1138   	if((AUSW_MAIN==24120)||(AUSW_MAIN==24210))temp_SL/=300L;
;;;1139   	else temp_SL/=1000L;
;;;1140   	bat[0]._Ib=(signed short)temp_SL;
;;;1141   
;;;1142   	temp_SL=(signed long)ad7705_buff_[1];
;;;1143   	temp_SL-=(signed long)Kibat0[1];
;;;1144   	temp_SL*=(signed long)Kibat1[1];
;;;1145   	if((AUSW_MAIN==24120)||(AUSW_MAIN==24210))temp_SL/=300L;
;;;1146   	else temp_SL/=1000L;
;;;1147   	bat[1]._Ib=(signed short)temp_SL;
;;;1148   	}
;;;1149   */
;;;1150   
;;;1151   
;;;1152   // 
;;;1153   if(!mess_find_unvol(MESS2MATEMAT))
000e78  f04f00dc          MOV      r0,#0xdc
000e7c  f7fffffe          BL       mess_find_unvol
;;;1154   	{
;;;1155   	temp_SL=(signed long)ad7705_buff_[0];
;;;1156   	temp_SL-=(signed long)Kibat0[0];
;;;1157   	temp_SL*=(signed long)Kibat1[0];
;;;1158   	if((AUSW_MAIN==24120)||(AUSW_MAIN==24210))temp_SL/=300L;
;;;1159   	else if((AUSW_MAIN==22010)||(AUSW_MAIN==22035)||(AUSW_MAIN==22033))temp_SL/=2000L;
000e80  f2456913          MOV      r9,#0x5613
000e84  bbf0              CBNZ     r0,|L1.3844|
000e86  f8dfc404          LDR      r12,|L1.4748|
000e8a  f8bc0000          LDRH     r0,[r12,#0]           ;1155  ; ad7705_buff_
000e8e  f8dfb400          LDR      r11,|L1.4752|
000e92  f8bb1000          LDRH     r1,[r11,#0]           ;1156  ; Kibat0
000e96  eba00001          SUB      r0,r0,r1              ;1156
000e9a  4afe              LDR      r2,|L1.4756|
000e9c  f9b21000          LDRSH    r1,[r2,#0]            ;1157  ; Kibat1
000ea0  fb01f100          MUL      r1,r1,r0              ;1157
000ea4  48fc              LDR      r0,|L1.4760|
000ea6  f6456338          MOV      r3,#0x5e38            ;1158
000eaa  8800              LDRH     r0,[r0,#0]            ;1158  ; AUSW_MAIN
000eac  4298              CMP      r0,r3                 ;1158
000eae  d004              BEQ      |L1.3770|
000eb0  f5a04ebc          SUB      lr,r0,#0x5e00         ;1158
000eb4  f1be0e92          SUBS     lr,lr,#0x92           ;1158
000eb8  d104              BNE      |L1.3780|
                  |L1.3770|
000eba  f44f7e96          MOV      lr,#0x12c             ;1158
000ebe  fb91f1fe          SDIV     r1,r1,lr              ;1158
000ec2  e00f              B        |L1.3812|
                  |L1.3780|
000ec4  f5a04ea8          SUB      lr,r0,#0x5400
000ec8  f5be7efd          SUBS     lr,lr,#0x1fa
000ecc  d003              BEQ      |L1.3798|
000ece  4548              CMP      r0,r9
000ed0  d001              BEQ      |L1.3798|
000ed2  42b0              CMP      r0,r6
000ed4  d102              BNE      |L1.3804|
                  |L1.3798|
000ed6  fb91f1f5          SDIV     r1,r1,r5
000eda  e003              B        |L1.3812|
                  |L1.3804|
;;;1160   	else temp_SL/=1000L;
000edc  f44f7e7a          MOV      lr,#0x3e8
000ee0  fb91f1fe          SDIV     r1,r1,lr
                  |L1.3812|
;;;1161   	#ifdef UKU_TELECORE2015
;;;1162   	temp_SL/=2L;
;;;1163   	//temp_SL=-temp_SL;
;;;1164   	#endif
;;;1165   	bat[0]._Ib=(signed short)temp_SL;
000ee4  8121              STRH     r1,[r4,#8]
;;;1166   
;;;1167   	temp_SL=(signed long)ad7705_buff_[1];
000ee6  f8bc1002          LDRH     r1,[r12,#2]  ; ad7705_buff_
;;;1168   	temp_SL-=(signed long)Kibat0[1];
000eea  f8bbc002          LDRH     r12,[r11,#2]  ; Kibat0
000eee  eba10c0c          SUB      r12,r1,r12
;;;1169   	temp_SL*=(signed long)Kibat1[1];
000ef2  f9b21002          LDRSH    r1,[r2,#2]  ; Kibat1
000ef6  fb01f10c          MUL      r1,r1,r12
;;;1170   	if((AUSW_MAIN==24120)||(AUSW_MAIN==24210))temp_SL/=300L;
000efa  4298              CMP      r0,r3
000efc  d005              BEQ      |L1.3850|
000efe  f5a042bc          SUB      r2,r0,#0x5e00
000f02  e000              B        |L1.3846|
                  |L1.3844|
000f04  e017              B        |L1.3894|
                  |L1.3846|
000f06  3a92              SUBS     r2,r2,#0x92
000f08  d104              BNE      |L1.3860|
                  |L1.3850|
000f0a  f44f7096          MOV      r0,#0x12c
000f0e  fb91f0f0          SDIV     r0,r1,r0
000f12  e00e              B        |L1.3890|
                  |L1.3860|
;;;1171   	else if((AUSW_MAIN==22010)||(AUSW_MAIN==22035)||(AUSW_MAIN==22033))temp_SL/=2000L;
000f14  f5a042aa          SUB      r2,r0,#0x5500
000f18  3afa              SUBS     r2,r2,#0xfa
000f1a  d003              BEQ      |L1.3876|
000f1c  4548              CMP      r0,r9
000f1e  d001              BEQ      |L1.3876|
000f20  42b0              CMP      r0,r6
000f22  d102              BNE      |L1.3882|
                  |L1.3876|
000f24  fb91f0f5          SDIV     r0,r1,r5
000f28  e003              B        |L1.3890|
                  |L1.3882|
;;;1172   	else temp_SL/=1000L;
000f2a  f44f707a          MOV      r0,#0x3e8
000f2e  fb91f0f0          SDIV     r0,r1,r0
                  |L1.3890|
;;;1173   	bat[1]._Ib=(signed short)temp_SL;
000f32  f8a40054          STRH     r0,[r4,#0x54]
                  |L1.3894|
;;;1174   	}
;;;1175   
;;;1176   
;;;1177   
;;;1178   
;;;1179   
;;;1180   // 
;;;1181   
;;;1182   #ifdef UKU_KONTUR
;;;1183   if((adc_buff_[6]>800)&&(adc_buff_[6]<3800))bat[0]._nd=0;
;;;1184   else bat[0]._nd=1;
;;;1185   temp_SL=(signed long)adc_buff_[6];
;;;1186   temp_SL*=Ktbat[0];
;;;1187   temp_SL/=20000L;
;;;1188   temp_SL-=273L;
;;;1189   bat[0]._Tb=(signed short)temp_SL;
;;;1190   #else
;;;1191   if((adc_buff_[6]>800)&&(adc_buff_[6]<3800))bat[0]._nd=0;
000f36  f9ba000c          LDRSH    r0,[r10,#0xc]  ; adc_buff_
000f3a  46d6              MOV      lr,r10
000f3c  4684              MOV      r12,r0
000f3e  f2a03021          SUB      r0,r0,#0x321
000f42  f64031b7          MOV      r1,#0xbb7
000f46  2300              MOVS     r3,#0
;;;1192   else bat[0]._nd=1;
000f48  f04f0a01          MOV      r10,#1
000f4c  9000              STR      r0,[sp,#0]            ;1191
000f4e  4288              CMP      r0,r1                 ;1191
000f50  d201              BCS      |L1.3926|
000f52  7323              STRB     r3,[r4,#0xc]          ;1191
000f54  e001              B        |L1.3930|
                  |L1.3926|
000f56  f884a00c          STRB     r10,[r4,#0xc]
                  |L1.3930|
;;;1193   temp_SL=(signed long)adc_buff_[6];
;;;1194   temp_SL*=Ktbat[0];
000f5a  48d0              LDR      r0,|L1.4764|
000f5c  f9b02000          LDRSH    r2,[r0,#0]  ; Ktbat
000f60  fb02f20c          MUL      r2,r2,r12
;;;1195   temp_SL/=20000L;
000f64  f6446020          MOV      r0,#0x4e20
000f68  fb92f2f0          SDIV     r2,r2,r0
;;;1196   temp_SL-=273L;
000f6c  f2a21211          SUB      r2,r2,#0x111
;;;1197   bat[0]._Tb=(signed short)temp_SL;
000f70  8162              STRH     r2,[r4,#0xa]
;;;1198   #endif
;;;1199   
;;;1200   #ifdef UKU_KONTUR
;;;1201   if((adc_buff_[7]>800)&&(adc_buff_[7]<3800))bat[1]._nd=0;
;;;1202   else bat[1]._nd=1;
;;;1203   temp_SL=(signed long)adc_buff_[7];
;;;1204   temp_SL*=Ktbat[1];
;;;1205   temp_SL/=20000L;
;;;1206   temp_SL-=273L;
;;;1207   bat[1]._Tb=(signed short)temp_SL;
;;;1208   #else
;;;1209   if((adc_buff_[7]>800)&&(adc_buff_[7]<3800))bat[1]._nd=0;
000f72  f9be200e          LDRSH    r2,[lr,#0xe]  ; adc_buff_
000f76  f64031b7          MOV      r1,#0xbb7
000f7a  f2a23b21          SUB      r11,r2,#0x321
000f7e  458b              CMP      r11,r1
000f80  d202              BCS      |L1.3976|
000f82  f8843058          STRB     r3,[r4,#0x58]
000f86  e001              B        |L1.3980|
                  |L1.3976|
;;;1210   else bat[1]._nd=1;
000f88  f884a058          STRB     r10,[r4,#0x58]
                  |L1.3980|
;;;1211   temp_SL=(signed long)adc_buff_[7];
;;;1212   temp_SL*=Ktbat[1];
000f8c  49c3              LDR      r1,|L1.4764|
000f8e  f9b11002          LDRSH    r1,[r1,#2]  ; Ktbat
000f92  4351              MULS     r1,r2,r1
;;;1213   temp_SL/=20000L;
000f94  f6446020          MOV      r0,#0x4e20
000f98  fb91f0f0          SDIV     r0,r1,r0
;;;1214   temp_SL-=273L;
000f9c  f2a01011          SUB      r0,r0,#0x111
;;;1215   bat[1]._Tb=(signed short)temp_SL;
000fa0  49bf              LDR      r1,|L1.4768|
000fa2  f8a10056          STRH     r0,[r1,#0x56]
;;;1216   #endif
;;;1217   
;;;1218   #ifdef UKU_6U
;;;1219   
;;;1220   if(NUMMAKB==2)
;;;1221   	{
;;;1222   	if(makb[0]._cnt<5)
;;;1223   		{
;;;1224   		if(makb[0]._T_nd[0]==0)
;;;1225   			{
;;;1226   			bat[0]._Tb=makb[0]._T[0];
;;;1227   			bat[0]._nd=0;
;;;1228   			}
;;;1229   		}
;;;1230   
;;;1231   	if(makb[1]._cnt<5)
;;;1232   		{
;;;1233   		if(makb[1]._T_nd[0]==0)
;;;1234   			{
;;;1235   			bat[1]._Tb=makb[1]._T[0];
;;;1236   			bat[1]._nd=0;
;;;1237   			}
;;;1238   		}
;;;1239   
;;;1240   	}
;;;1241   else if(NUMMAKB==4)
;;;1242   	{
;;;1243   	signed short temp_t;
;;;1244   	temp_t=-20;
;;;1245   	if(makb[0]._cnt<5)
;;;1246   		{
;;;1247   		if(makb[0]._T_nd[0]==0)
;;;1248   			{
;;;1249   			temp_t=makb[0]._T[0];
;;;1250   			bat[0]._nd=0;
;;;1251   			}
;;;1252   		}
;;;1253   	if(makb[1]._cnt<5)
;;;1254   		{
;;;1255   		if(makb[1]._T_nd[0]==0)
;;;1256   			{
;;;1257   			if(temp_t<makb[1]._T[0])
;;;1258   				{
;;;1259   				bat[0]._nd=0;
;;;1260   				temp_t=makb[1]._T[0];
;;;1261   				}
;;;1262   			}
;;;1263   		}
;;;1264   	if(temp_t!=-20)bat[0]._Tb = temp_t;
;;;1265   
;;;1266    	temp_t=-20;
;;;1267   	if(makb[2]._cnt<5)
;;;1268   		{
;;;1269   		if(makb[2]._T_nd[0]==0)
;;;1270   			{
;;;1271   			temp_t=makb[2]._T[0];
;;;1272   			bat[1]._nd=0;
;;;1273   			}
;;;1274   		}
;;;1275   	if(makb[3]._cnt<5)
;;;1276   		{
;;;1277   		if(makb[3]._T_nd[0]==0)
;;;1278   			{
;;;1279   			if(temp_t<makb[3]._T[0])
;;;1280   				{
;;;1281   				bat[1]._nd=0;
;;;1282   				temp_t=makb[3]._T[0];
;;;1283   				}
;;;1284   			}
;;;1285   		}
;;;1286   	if(temp_t!=-20)bat[1]._Tb = temp_t;
;;;1287   	}
;;;1288   
;;;1289   #endif
;;;1290   
;;;1291   
;;;1292   // 
;;;1293   temp_SL=(signed long)adc_buff_[2];
000fa6  f9be1004          LDRSH    r1,[lr,#4]  ; adc_buff_
;;;1294   temp_SL*=Kuload;
000faa  48be              LDR      r0,|L1.4772|
000fac  f9b00000          LDRSH    r0,[r0,#0]  ; Kuload
000fb0  fb01f000          MUL      r0,r1,r0
;;;1295   temp_SL/=2000L;
000fb4  f44f62fa          MOV      r2,#0x7d0
000fb8  fb90f0f2          SDIV     r0,r0,r2
;;;1296   load_U=(signed short)temp_SL;
000fbc  4cba              LDR      r4,|L1.4776|
000fbe  8020              STRH     r0,[r4,#0]
;;;1297   
;;;1298   #ifdef UKU_220 
;;;1299   // 
;;;1300   temp_SL=(signed long)adc_buff_[2];
;;;1301   temp_SL*=Kuload;
;;;1302   temp_SL/=350L;
;;;1303   load_U=(signed short)temp_SL;
;;;1304   #endif
;;;1305   
;;;1306   #ifdef UKU_220_V2 
;;;1307   // 
;;;1308   temp_SL=(signed long)adc_buff_[2];
;;;1309   temp_SL*=Kuload;
;;;1310   temp_SL/=350L;
;;;1311   load_U=(signed short)temp_SL;
;;;1312   #endif
;;;1313   
;;;1314   #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;1315   // 
;;;1316   temp_SL=(signed long)adc_buff_[1];
000fc0  f9be2002          LDRSH    r2,[lr,#2]  ; adc_buff_
;;;1317   temp_SL*=Kuout;
000fc4  48b9              LDR      r0,|L1.4780|
000fc6  f9b00000          LDRSH    r0,[r0,#0]  ; Kuout
000fca  fb02f200          MUL      r2,r2,r0
;;;1318   if(AUSW_MAIN==22010)temp_SL/=400L;
000fce  48b2              LDR      r0,|L1.4760|
000fd0  f24555fa          MOV      r5,#0x55fa
000fd4  8800              LDRH     r0,[r0,#0]  ; AUSW_MAIN
000fd6  42a8              CMP      r0,r5
000fd8  d104              BNE      |L1.4068|
000fda  f44f75c8          MOV      r5,#0x190
000fde  fb92f2f5          SDIV     r2,r2,r5
000fe2  e001              B        |L1.4072|
                  |L1.4068|
;;;1319   else temp_SL/=500L;
000fe4  fb92f2f8          SDIV     r2,r2,r8
                  |L1.4072|
;;;1320   out_U=(signed short)temp_SL;
000fe8  fa0ffb82          SXTH     r11,r2
000fec  4ab0              LDR      r2,|L1.4784|
000fee  f8a2b000          STRH     r11,[r2,#0]
;;;1321   load_U=out_U;
000ff2  f8a4b000          STRH     r11,[r4,#0]
;;;1322   
;;;1323   // 
;;;1324   temp_SL=(signed long)adc_buff_[2];
;;;1325   temp_SL*=Kubps;
000ff6  4aaf              LDR      r2,|L1.4788|
000ff8  f9b22000          LDRSH    r2,[r2,#0]  ; Kubps
000ffc  fb01f102          MUL      r1,r1,r2
;;;1326   if(AUSW_MAIN==22010)temp_SL/=400L;
001000  d104              BNE      |L1.4108|
001002  f44f72c8          MOV      r2,#0x190
001006  fb91f1f2          SDIV     r1,r1,r2
00100a  e001              B        |L1.4112|
                  |L1.4108|
;;;1327   else temp_SL/=500L;
00100c  fb91f1f8          SDIV     r1,r1,r8
                  |L1.4112|
;;;1328   bps_U=(signed short)temp_SL;
001010  4da9              LDR      r5,|L1.4792|
001012  b209              SXTH     r1,r1
001014  8029              STRH     r1,[r5,#0]
;;;1329   
;;;1330   if(bps_U<100)
001016  2964              CMP      r1,#0x64
001018  da18              BGE      |L1.4172|
;;;1331   	{
;;;1332   	char i;
;;;1333   	for(i=0;i<NUMIST;i++)
00101a  f04f0100          MOV      r1,#0
00101e  4aa7              LDR      r2,|L1.4796|
001020  f8dfe29c          LDR      lr,|L1.4800|
001024  f9b28000          LDRSH    r8,[r2,#0]
001028  e00e              B        |L1.4168|
                  |L1.4138|
;;;1334   		{
;;;1335   		if(bps[i]._Uin>bps_U)bps_U=bps[i]._Uin;
00102a  ebc102c1          RSB      r2,r1,r1,LSL #3
00102e  eb021201          ADD      r2,r2,r1,LSL #4
001032  eb0e0282          ADD      r2,lr,r2,LSL #2
001036  f9b54000          LDRSH    r4,[r5,#0]  ; bps_U
00103a  6a12              LDR      r2,[r2,#0x20]
00103c  42a2              CMP      r2,r4
00103e  dd00              BLE      |L1.4162|
001040  802a              STRH     r2,[r5,#0]
                  |L1.4162|
001042  f1010101          ADD      r1,r1,#1              ;1333
001046  b2c9              UXTB     r1,r1                 ;1333
                  |L1.4168|
001048  4541              CMP      r1,r8                 ;1333
00104a  dbee              BLT      |L1.4138|
                  |L1.4172|
;;;1336   		}
;;;1337   	}
;;;1338   
;;;1339   //  
;;;1340   temp_SL=0;
00104c  f04f0500          MOV      r5,#0
;;;1341   for (i=0;i<NUMIST;i++)
001050  4629              MOV      r1,r5
001052  4a9a              LDR      r2,|L1.4796|
001054  4c9a              LDR      r4,|L1.4800|
001056  f9b22000          LDRSH    r2,[r2,#0]            ;1333
00105a  e00b              B        |L1.4212|
                  |L1.4188|
;;;1342   	{
;;;1343   	temp_SL+=((signed long)bps[i]._Ii);
00105c  ebc108c1          RSB      r8,r1,r1,LSL #3
001060  eb081801          ADD      r8,r8,r1,LSL #4
001064  eb040888          ADD      r8,r4,r8,LSL #2
001068  f8d88024          LDR      r8,[r8,#0x24]
00106c  4445              ADD      r5,r5,r8
00106e  f1010101          ADD      r1,r1,#1              ;1341
001072  b2c9              UXTB     r1,r1                 ;1341
                  |L1.4212|
001074  4291              CMP      r1,r2                 ;1341
001076  dbf1              BLT      |L1.4188|
;;;1344   	}
;;;1345   bps_I=(signed short)temp_SL;
001078  4992              LDR      r1,|L1.4804|
00107a  800d              STRH     r5,[r1,#0]
;;;1346   
;;;1347   
;;;1348   #endif
;;;1349   
;;;1350   
;;;1351   #ifdef UKU_KONTUR
;;;1352   //   1(  )
;;;1353   if((adc_buff_[5]>800)&&(adc_buff_[5]<3800))ND_EXT[0]=0;
;;;1354   else ND_EXT[0]=1;
;;;1355   temp_SL=(signed long)adc_buff_[5];
;;;1356   temp_SL*=Ktext[0];
;;;1357   temp_SL/=20000L;
;;;1358   temp_SL-=273L;
;;;1359   t_ext[0]=(signed short)temp_SL;
;;;1360   #else 
;;;1361   //   1(  )
;;;1362   if((adc_buff_[5]>800)&&(adc_buff_[5]<3800))ND_EXT[0]=0;
00107c  4992              LDR      r1,|L1.4808|
00107e  f8df824c          LDR      r8,|L1.4812|
001082  f9b1500a          LDRSH    r5,[r1,#0xa]  ; adc_buff_
001086  f64031b7          MOV      r1,#0xbb7
00108a  f2a53e21          SUB      lr,r5,#0x321
00108e  458e              CMP      lr,r1
001090  d202              BCS      |L1.4248|
001092  f8c83000          STR      r3,[r8,#0]  ; ND_EXT
001096  e001              B        |L1.4252|
                  |L1.4248|
;;;1363   else ND_EXT[0]=1;
001098  f8c8a000          STR      r10,[r8,#0]  ; ND_EXT
                  |L1.4252|
;;;1364   temp_SL=(signed long)adc_buff_[5];
;;;1365   temp_SL*=Ktext[0];
00109c  498c              LDR      r1,|L1.4816|
00109e  f9b11000          LDRSH    r1,[r1,#0]  ; Ktext
0010a2  434d              MULS     r5,r1,r5
;;;1366   temp_SL/=20000L;
0010a4  f6446e20          MOV      lr,#0x4e20
0010a8  fb95f5fe          SDIV     r5,r5,lr
;;;1367   temp_SL-=273L;
0010ac  f2a51511          SUB      r5,r5,#0x111
;;;1368   t_ext[0]=(signed short)temp_SL;
0010b0  f8dfe220          LDR      lr,|L1.4820|
0010b4  f8ae5000          STRH     r5,[lr,#0]
;;;1369   #endif
;;;1370   
;;;1371   #ifdef UKU_220
;;;1372   
;;;1373   //   2(  )
;;;1374   if((adc_buff_[3]>800)&&(adc_buff_[3]<3800))ND_EXT[1]=0;
;;;1375   else ND_EXT[1]=1;
;;;1376   temp_SL=(signed long)adc_buff_[3];
;;;1377   temp_SL*=Ktext[1];
;;;1378   temp_SL/=20000L;
;;;1379   temp_SL-=273L;
;;;1380   t_ext[1]=(signed short)temp_SL;
;;;1381   
;;;1382   //   3(  MSAN)
;;;1383   if((adc_buff_[10]>800)&&(adc_buff_[10]<3800))ND_EXT[2]=0;
;;;1384   else ND_EXT[2]=1;
;;;1385   temp_SL=(signed long)adc_buff_[10];
;;;1386   temp_SL*=Ktext[2];
;;;1387   temp_SL/=20000L;
;;;1388   temp_SL-=273L;
;;;1389   t_ext[2]=(signed short)temp_SL;
;;;1390   
;;;1391   #else
;;;1392   
;;;1393   
;;;1394   #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;1395   
;;;1396   //   
;;;1397   if((adc_buff_[6]>800)&&(adc_buff_[6]<3800))ND_EXT[0]=0;
0010b8  9d00              LDR      r5,[sp,#0]
0010ba  f6403eb7          MOV      lr,#0xbb7
0010be  4575              CMP      r5,lr
0010c0  d202              BCS      |L1.4296|
0010c2  f8c83000          STR      r3,[r8,#0]  ; ND_EXT
0010c6  e001              B        |L1.4300|
                  |L1.4296|
;;;1398   else ND_EXT[0]=1;
0010c8  f8c8a000          STR      r10,[r8,#0]  ; ND_EXT
                  |L1.4300|
;;;1399   temp_SL=(signed long)adc_buff_[6];
;;;1400   temp_SL*=Ktext[0];
0010cc  fb01f10c          MUL      r1,r1,r12
;;;1401   temp_SL/=20000L;
0010d0  f6446520          MOV      r5,#0x4e20
0010d4  fb91f1f5          SDIV     r1,r1,r5
;;;1402   temp_SL-=273L;
0010d8  f2a11111          SUB      r1,r1,#0x111
;;;1403   t_ext[0]=(signed short)temp_SL;
0010dc  4d7d              LDR      r5,|L1.4820|
0010de  8029              STRH     r1,[r5,#0]
;;;1404   
;;;1405   #else
;;;1406   
;;;1407   
;;;1408   
;;;1409   //   2(  )
;;;1410   if((adc_buff_[10]>800)&&(adc_buff_[10]<3800))ND_EXT[1]=0;
;;;1411   else ND_EXT[1]=1;
;;;1412   temp_SL=(signed long)adc_buff_[10];
;;;1413   temp_SL*=Ktext[1];
;;;1414   temp_SL/=20000L;
;;;1415   temp_SL-=273L;
;;;1416   t_ext[1]=(signed short)temp_SL;
;;;1417   
;;;1418   //   3(  MSAN)
;;;1419   if((adc_buff_[3]>800)&&(adc_buff_[3]<3800))ND_EXT[2]=0;
;;;1420   else ND_EXT[2]=1;
;;;1421   temp_SL=(signed long)adc_buff_[3];
;;;1422   temp_SL*=Ktext[2];
;;;1423   temp_SL/=20000L;
;;;1424   temp_SL-=273L;
;;;1425   t_ext[2]=(signed short)temp_SL;
;;;1426   
;;;1427   #endif
;;;1428   #endif
;;;1429   
;;;1430   #ifdef UKU_220_V2
;;;1431   
;;;1432   //   2(  )
;;;1433   if((adc_buff_[3]>800)&&(adc_buff_[3]<3800))ND_EXT[1]=0;
;;;1434   else ND_EXT[1]=1;
;;;1435   temp_SL=(signed long)adc_buff_[3];
;;;1436   temp_SL*=Ktext[1];
;;;1437   temp_SL/=20000L;
;;;1438   temp_SL-=273L;
;;;1439   t_ext[1]=(signed short)temp_SL;
;;;1440   
;;;1441   //   3(  MSAN)
;;;1442   if((adc_buff_[10]>800)&&(adc_buff_[10]<3800))ND_EXT[2]=0;
;;;1443   else ND_EXT[2]=1;
;;;1444   temp_SL=(signed long)adc_buff_[10];
;;;1445   temp_SL*=Ktext[2];
;;;1446   temp_SL/=20000L;
;;;1447   temp_SL-=273L;
;;;1448   t_ext[2]=(signed short)temp_SL;
;;;1449   
;;;1450   #else
;;;1451   
;;;1452   #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;1453   // 
;;;1454   if(bps[8]._device==dIBAT_METR)
0010e0  f89412e0          LDRB     r1,[r4,#0x2e0]  ; bps
;;;1455   	{
;;;1456   	ibat_metr_buff_[0]=((signed long)bps[8]._buff[0])+(((signed long)bps[8]._buff[1])<<8);
;;;1457   	ibat_metr_buff_[1]=((signed long)bps[8]._buff[2])+(((signed long)bps[8]._buff[3])<<8);
;;;1458   	bIBAT_SMKLBR=((signed short)bps[8]._buff[4])+(((signed short)bps[8]._buff[5])<<8);
;;;1459   
;;;1460   	if(!bIBAT_SMKLBR)
;;;1461   		{
;;;1462   		signed long temp_SL;
;;;1463   		temp_SL=(signed long)ibat_metr_buff_[0];
;;;1464   		temp_SL-=(signed long)ibat_metr_buff_[1];
;;;1465   		temp_SL*=(signed long)Kibat1[0];
;;;1466   		if((AUSW_MAIN==22010)||(AUSW_MAIN==22011)||(AUSW_MAIN==22035)||(AUSW_MAIN==22033)||(AUSW_MAIN==22063)||(AUSW_MAIN==22023)||(AUSW_MAIN==22043))temp_SL/=2000L;
;;;1467   	
;;;1468   		Ib_ips_termokompensat =(signed short)temp_SL;
0010e4  f8dfc1f0          LDR      r12,|L1.4824|
0010e8  2909              CMP      r1,#9                 ;1454
0010ea  d13d              BNE      |L1.4456|
0010ec  f89412e6          LDRB     r1,[r4,#0x2e6]        ;1456  ; bps
0010f0  f89452e7          LDRB     r5,[r4,#0x2e7]        ;1456  ; bps
0010f4  f8dfe1e4          LDR      lr,|L1.4828|
0010f8  eb012105          ADD      r1,r1,r5,LSL #8       ;1456
0010fc  f8ce1000          STR      r1,[lr,#0]            ;1456  ; ibat_metr_buff_
001100  f89452e8          LDRB     r5,[r4,#0x2e8]        ;1457  ; bps
001104  f894a2e9          LDRB     r10,[r4,#0x2e9]       ;1457  ; bps
001108  eb05250a          ADD      r5,r5,r10,LSL #8      ;1457
00110c  f8ce5004          STR      r5,[lr,#4]            ;1457  ; ibat_metr_buff_
001110  f894a2ea          LDRB     r10,[r4,#0x2ea]       ;1458  ; bps
001114  f894e2eb          LDRB     lr,[r4,#0x2eb]        ;1458  ; bps
001118  eb0a2a0e          ADD      r10,r10,lr,LSL #8     ;1458
00111c  f8dfe1c0          LDR      lr,|L1.4832|
001120  fa0ffa8a          SXTH     r10,r10               ;1458
001124  f8aea000          STRH     r10,[lr,#0]           ;1458
001128  f1ba0f00          CMP      r10,#0                ;1460
00112c  d11c              BNE      |L1.4456|
00112e  eba10505          SUB      r5,r1,r5              ;1464
001132  4958              LDR      r1,|L1.4756|
001134  f9b11000          LDRSH    r1,[r1,#0]            ;1465  ; Kibat1
001138  fb01f105          MUL      r1,r1,r5              ;1465
00113c  f5a045aa          SUB      r5,r0,#0x5500         ;1466
001140  3dfa              SUBS     r5,r5,#0xfa           ;1466
001142  d00b              BEQ      |L1.4444|
001144  1e6d              SUBS     r5,r5,#1              ;1466
001146  d009              BEQ      |L1.4444|
001148  4548              CMP      r0,r9                 ;1466
00114a  d007              BEQ      |L1.4444|
00114c  42b0              CMP      r0,r6                 ;1466
00114e  d005              BEQ      |L1.4444|
001150  3d34              SUBS     r5,r5,#0x34           ;1466
001152  d003              BEQ      |L1.4444|
001154  3528              ADDS     r5,r5,#0x28           ;1466
001156  d001              BEQ      |L1.4444|
001158  3d14              SUBS     r5,r5,#0x14           ;1466
00115a  d103              BNE      |L1.4452|
                  |L1.4444|
00115c  f44f65fa          MOV      r5,#0x7d0             ;1466
001160  fb91f1f5          SDIV     r1,r1,r5              ;1466
                  |L1.4452|
001164  f8ac1000          STRH     r1,[r12,#0]
                  |L1.4456|
;;;1469   		}
;;;1470   	}
;;;1471   
;;;1472   bat[0]._Ub=load_U;
001168  4d4d              LDR      r5,|L1.4768|
00116a  f8a5b002          STRH     r11,[r5,#2]
;;;1473   if(AUSW_MAIN==22018) Ib_ips_termokompensat=bat[0]._Ib;
00116e  f5a041ac          SUB      r1,r0,#0x5600
001172  3902              SUBS     r1,#2
001174  d103              BNE      |L1.4478|
001176  8928              LDRH     r0,[r5,#8]  ; bat
001178  f8ac0000          STRH     r0,[r12,#0]
00117c  e002              B        |L1.4484|
                  |L1.4478|
;;;1474   else bat[0]._Ib=Ib_ips_termokompensat;
00117e  f8bc0000          LDRH     r0,[r12,#0]  ; Ib_ips_termokompensat
001182  8128              STRH     r0,[r5,#8]
                  |L1.4484|
;;;1475   
;;;1476   #endif
;;;1477   #endif
;;;1478   
;;;1479   
;;;1480   #ifdef UKU_TELECORE2015
;;;1481   
;;;1482   //   1
;;;1483   if((adc_buff_[7]>800)&&(adc_buff_[7]<3800))ND_EXT[0]=0;
;;;1484   else ND_EXT[0]=1;
;;;1485   temp_SL=(signed long)adc_buff_[7];
;;;1486   temp_SL*=Ktext[0];
;;;1487   temp_SL/=20000L;
;;;1488   temp_SL-=273L;
;;;1489   t_ext[0]=(signed short)temp_SL;
;;;1490   
;;;1491   
;;;1492   //   2
;;;1493   if((adc_buff_[6]>800)&&(adc_buff_[6]<3800))ND_EXT[1]=0;
;;;1494   else ND_EXT[1]=1;
;;;1495   temp_SL=(signed long)adc_buff_[6];
;;;1496   temp_SL*=Ktext[1];
;;;1497   temp_SL/=20000L;
;;;1498   temp_SL-=273L;
;;;1499   t_ext[1]=(signed short)temp_SL;
;;;1500   
;;;1501   #endif
;;;1502   
;;;1503   // 
;;;1504   temp_SL=(signed long)adc_buff_ext_[0];
001184  4e57              LDR      r6,|L1.4836|
001186  8831              LDRH     r1,[r6,#0]  ; adc_buff_ext_
;;;1505   temp_SL*=Kunet_ext[0];
001188  f8df915c          LDR      r9,|L1.4840|
00118c  f9b90000          LDRSH    r0,[r9,#0]  ; Kunet_ext
001190  4348              MULS     r0,r1,r0
;;;1506   temp_SL/=4000L;
001192  f44f6a7a          MOV      r10,#0xfa0
001196  fb90f0fa          SDIV     r0,r0,r10
;;;1507   Uvv[0]=(signed short)temp_SL;
00119a  4954              LDR      r1,|L1.4844|
00119c  b280              UXTH     r0,r0
00119e  8008              STRH     r0,[r1,#0]
;;;1508   if(Uvv[0]<100) Uvv0=Uvv[0];
0011a0  f8dfe14c          LDR      lr,|L1.4848|
0011a4  2864              CMP      r0,#0x64
0011a6  d202              BCS      |L1.4526|
0011a8  f8ae0000          STRH     r0,[lr,#0]
0011ac  e003              B        |L1.4534|
                  |L1.4526|
;;;1509   else Uvv0=net_U;
0011ae  4851              LDR      r0,|L1.4852|
0011b0  8800              LDRH     r0,[r0,#0]  ; net_U
0011b2  f8ae0000          STRH     r0,[lr,#0]
                  |L1.4534|
;;;1510   
;;;1511   // 
;;;1512   temp_SL=(signed long)adc_buff_ext_[1];
0011b6  8876              LDRH     r6,[r6,#2]  ; adc_buff_ext_
;;;1513   temp_SL*=Kunet_ext[1];
0011b8  f9b90002          LDRSH    r0,[r9,#2]  ; Kunet_ext
0011bc  4370              MULS     r0,r6,r0
;;;1514   temp_SL/=4000L;
0011be  fb90f0fa          SDIV     r0,r0,r10
;;;1515   Uvv[1]=(signed short)temp_SL;
0011c2  8048              STRH     r0,[r1,#2]
;;;1516   
;;;1517   
;;;1518   //  
;;;1519   temp_SL=(signed long)eb2_data_short[0];
0011c4  494c              LDR      r1,|L1.4856|
0011c6  f9b10000          LDRSH    r0,[r1,#0]  ; eb2_data_short
;;;1520   temp_SL*=Kvv_eb2[0];
0011ca  f8df9130          LDR      r9,|L1.4860|
0011ce  f9b96000          LDRSH    r6,[r9,#0]  ; Kvv_eb2
0011d2  4346              MULS     r6,r0,r6
;;;1521   temp_SL/=6000L;
0011d4  f2417070          MOV      r0,#0x1770
0011d8  fb96faf0          SDIV     r10,r6,r0
;;;1522   Uvv_eb2[0]=(signed short)temp_SL;
0011dc  4e48              LDR      r6,|L1.4864|
0011de  f8a6a000          STRH     r10,[r6,#0]
;;;1523   
;;;1524   temp_SL=(signed long)eb2_data_short[1];
0011e2  f9b1e002          LDRSH    lr,[r1,#2]  ; eb2_data_short
;;;1525   temp_SL*=Kvv_eb2[1];
0011e6  f9b9a002          LDRSH    r10,[r9,#2]  ; Kvv_eb2
0011ea  fb0afa0e          MUL      r10,r10,lr
;;;1526   temp_SL/=6000L;
0011ee  fb9afaf0          SDIV     r10,r10,r0
;;;1527   Uvv_eb2[1]=(signed short)temp_SL;
0011f2  f8a6a002          STRH     r10,[r6,#2]
;;;1528   
;;;1529   temp_SL=(signed long)eb2_data_short[2];
0011f6  f9b1a004          LDRSH    r10,[r1,#4]  ; eb2_data_short
;;;1530   temp_SL*=Kvv_eb2[2];
0011fa  f9b99004          LDRSH    r9,[r9,#4]  ; Kvv_eb2
0011fe  fb09f90a          MUL      r9,r9,r10
;;;1531   temp_SL/=6000L;
001202  fb99f9f0          SDIV     r9,r9,r0
;;;1532   Uvv_eb2[2]=(signed short)temp_SL;
001206  f8a69004          STRH     r9,[r6,#4]
;;;1533   
;;;1534   //  
;;;1535   temp_SL=(signed long)eb2_data_short[3];
00120a  f9b1a006          LDRSH    r10,[r1,#6]  ; eb2_data_short
;;;1536   temp_SL*=Kpes_eb2[0];
00120e  4e3d              LDR      r6,|L1.4868|
001210  f9b69000          LDRSH    r9,[r6,#0]  ; Kpes_eb2
001214  fb09f90a          MUL      r9,r9,r10
;;;1537   temp_SL/=6000L;
001218  fb99faf0          SDIV     r10,r9,r0
;;;1538   Upes_eb2[0]=(signed short)temp_SL;
00121c  f8df90e8          LDR      r9,|L1.4872|
001220  f8a9a000          STRH     r10,[r9,#0]
;;;1539   
;;;1540   temp_SL=(signed long)eb2_data_short[4];
001224  f9b1e008          LDRSH    lr,[r1,#8]  ; eb2_data_short
;;;1541   temp_SL*=Kpes_eb2[1];
001228  f9b6a002          LDRSH    r10,[r6,#2]  ; Kpes_eb2
00122c  fb0afa0e          MUL      r10,r10,lr
;;;1542   temp_SL/=6000L;
001230  fb9afaf0          SDIV     r10,r10,r0
;;;1543   Upes_eb2[1]=(signed short)temp_SL;
001234  f8a9a002          STRH     r10,[r9,#2]
;;;1544   
;;;1545   temp_SL=(signed long)eb2_data_short[5];
001238  f9b1100a          LDRSH    r1,[r1,#0xa]  ; eb2_data_short
;;;1546   temp_SL*=Kpes_eb2[2];
00123c  f9b66004          LDRSH    r6,[r6,#4]  ; Kpes_eb2
001240  fb06f601          MUL      r6,r6,r1
;;;1547   temp_SL/=6000L;
001244  fb96f0f0          SDIV     r0,r6,r0
;;;1548   Upes_eb2[2]=(signed short)temp_SL;
001248  f8a90004          STRH     r0,[r9,#4]
;;;1549   
;;;1550   //  
;;;1551   
;;;1552   ibt._T[0]=t_ext[1]+273;
00124c  4821              LDR      r0,|L1.4820|
00124e  4e2f              LDR      r6,|L1.4876|
001250  8841              LDRH     r1,[r0,#2]  ; t_ext
001252  f2011111          ADD      r1,r1,#0x111
001256  fa0ff981          SXTH     r9,r1
00125a  f8a69000          STRH     r9,[r6,#0]
;;;1553   ibt._T[1]=t_ext[2]+273;
00125e  8880              LDRH     r0,[r0,#4]  ; t_ext
001260  f2001011          ADD      r0,r0,#0x111
001264  fa0ffa80          SXTH     r10,r0
001268  f8a6a002          STRH     r10,[r6,#2]
;;;1554   
;;;1555   ibt._nd[0]=ND_EXT[1];
00126c  f8d80004          LDR      r0,[r8,#4]  ; ND_EXT
001270  b2c1              UXTB     r1,r0
001272  7231              STRB     r1,[r6,#8]
;;;1556   ibt._nd[1]=ND_EXT[2];
001274  f8d80008          LDR      r0,[r8,#8]  ; ND_EXT
001278  b2c0              UXTB     r0,r0
00127a  7270              STRB     r0,[r6,#9]
;;;1557   
;;;1558   #ifndef UKU_TELECORE2015
;;;1559   if((ibt._nd[0]==0) &&  (ibt._nd[1]==0))
;;;1560   	{
;;;1561   	t_box=((ibt._T[0]+ibt._T[1])/2)-273;
00127c  4e24              LDR      r6,|L1.4880|
00127e  b901              CBNZ     r1,|L1.4738|
001280  b110              CBZ      r0,|L1.4744|
                  |L1.4738|
;;;1562   	}
;;;1563   else if((ibt._nd[0]==1) &&  (ibt._nd[1]==0))
001282  2901              CMP      r1,#1
001284  d050              BEQ      |L1.4904|
001286  e050              B        |L1.4906|
                  |L1.4744|
001288  e044              B        |L1.4884|
00128a  0000              DCW      0x0000
                  |L1.4748|
                          DCD      ad7705_buff_
                  |L1.4752|
                          DCD      Kibat0
                  |L1.4756|
                          DCD      Kibat1
                  |L1.4760|
                          DCD      AUSW_MAIN
                  |L1.4764|
                          DCD      Ktbat
                  |L1.4768|
                          DCD      bat
                  |L1.4772|
                          DCD      Kuload
                  |L1.4776|
                          DCD      load_U
                  |L1.4780|
                          DCD      Kuout
                  |L1.4784|
                          DCD      out_U
                  |L1.4788|
                          DCD      Kubps
                  |L1.4792|
                          DCD      bps_U
                  |L1.4796|
                          DCD      NUMIST
                  |L1.4800|
                          DCD      bps
                  |L1.4804|
                          DCD      bps_I
                  |L1.4808|
                          DCD      ||.bss||+0x400
                  |L1.4812|
                          DCD      ND_EXT
                  |L1.4816|
                          DCD      Ktext
                  |L1.4820|
                          DCD      t_ext
                  |L1.4824|
                          DCD      Ib_ips_termokompensat
                  |L1.4828|
                          DCD      ibat_metr_buff_
                  |L1.4832|
                          DCD      bIBAT_SMKLBR
                  |L1.4836|
                          DCD      adc_buff_ext_
                  |L1.4840|
                          DCD      Kunet_ext
                  |L1.4844|
                          DCD      Uvv
                  |L1.4848|
                          DCD      Uvv0
                  |L1.4852|
                          DCD      net_U
                  |L1.4856|
                          DCD      eb2_data_short
                  |L1.4860|
                          DCD      Kvv_eb2
                  |L1.4864|
                          DCD      Uvv_eb2
                  |L1.4868|
                          DCD      Kpes_eb2
                  |L1.4872|
                          DCD      Upes_eb2
                  |L1.4876|
                          DCD      ibt
                  |L1.4880|
                          DCD      t_box
                  |L1.4884|
001314  eb09000a          ADD      r0,r9,r10             ;1561
001318  eb0070d0          ADD      r0,r0,r0,LSR #31      ;1561
00131c  f46f7188          MVN      r1,#0x110             ;1561
001320  eb010060          ADD      r0,r1,r0,ASR #1       ;1561
001324  8030              STRH     r0,[r6,#0]            ;1561
001326  e01e              B        |L1.4966|
                  |L1.4904|
001328  b108              CBZ      r0,|L1.4910|
                  |L1.4906|
;;;1564   	{
;;;1565   	t_box=ibt._T[1]-273;
;;;1566   	}
;;;1567   else if((ibt._nd[0]==0) &&  (ibt._nd[1]==1))
00132a  b129              CBZ      r1,|L1.4920|
00132c  e006              B        |L1.4924|
                  |L1.4910|
00132e  f2aa1a11          SUB      r10,r10,#0x111        ;1565
001332  f8a6a000          STRH     r10,[r6,#0]           ;1565
001336  e016              B        |L1.4966|
                  |L1.4920|
001338  2801              CMP      r0,#1
00133a  d002              BEQ      |L1.4930|
                  |L1.4924|
;;;1568   	{
;;;1569   	t_box=ibt._T[0]-273;
;;;1570   	}
;;;1571   else if((ibt._nd[0]==1) &&  (ibt._nd[1]==1))
00133c  2901              CMP      r1,#1
00133e  d005              BEQ      |L1.4940|
001340  e011              B        |L1.4966|
                  |L1.4930|
001342  f2a91911          SUB      r9,r9,#0x111          ;1569
001346  f8a69000          STRH     r9,[r6,#0]            ;1569
00134a  e00c              B        |L1.4966|
                  |L1.4940|
00134c  2801              CMP      r0,#1
00134e  d10a              BNE      |L1.4966|
;;;1572   	{
;;;1573   	if(t_ext_can_nd<5)t_box= t_ext_can;
001350  48ff              LDR      r0,|L1.5968|
001352  7800              LDRB     r0,[r0,#0]  ; t_ext_can_nd
001354  2805              CMP      r0,#5
001356  d203              BCS      |L1.4960|
001358  48fe              LDR      r0,|L1.5972|
00135a  8800              LDRH     r0,[r0,#0]  ; t_ext_can
00135c  8030              STRH     r0,[r6,#0]
00135e  e002              B        |L1.4966|
                  |L1.4960|
;;;1574   	else t_box=20;
001360  f04f0014          MOV      r0,#0x14
001364  8030              STRH     r0,[r6,#0]
                  |L1.4966|
;;;1575   	}
;;;1576   #endif
;;;1577   /*
;;;1578   //  
;;;1579   
;;;1580   ibt._T[0]=bat[0]._Tb+273;
;;;1581   ibt._T[1]=bat[1]._Tb+273;
;;;1582   ibt._T[2]=t_ext[1]+273;
;;;1583   ibt._T[3]=t_ext[2]+273;
;;;1584   
;;;1585   ibt._nd[0]=bat[0]._nd;
;;;1586   ibt._nd[1]=bat[1]._nd;
;;;1587   ibt._nd[2]=ND_EXT[1];
;;;1588   ibt._nd[3]=ND_EXT[2];
;;;1589   
;;;1590   ibt._avg1=0;
;;;1591   ibt._avg_cnt=4;
;;;1592   
;;;1593   if(ibt._nd[0]==0)
;;;1594   	{
;;;1595   	ibt._avg1+=ibt._T[0];
;;;1596   	}
;;;1597   else 
;;;1598   	{
;;;1599   	ibt._avg_cnt--;
;;;1600   	}
;;;1601   
;;;1602   if(ibt._nd[1]==0)
;;;1603   	{
;;;1604   	ibt._avg1+=ibt._T[1];
;;;1605   	}
;;;1606   else 
;;;1607   	{
;;;1608   	ibt._avg_cnt--;
;;;1609   	}
;;;1610   
;;;1611   if(ibt._nd[2]==0)
;;;1612   	{
;;;1613   	ibt._avg1+=ibt._T[2];
;;;1614   	}
;;;1615   else 
;;;1616   	{
;;;1617   	ibt._avg_cnt--;
;;;1618   	}
;;;1619   
;;;1620   if(ibt._nd[3]==0)
;;;1621   	{
;;;1622   	ibt._avg1+=ibt._T[3];
;;;1623   	}
;;;1624   else 
;;;1625   	{
;;;1626   	ibt._avg_cnt--;
;;;1627   	}
;;;1628   
;;;1629   if(ibt._avg_cnt==0)
;;;1630   	{
;;;1631   	}
;;;1632   else
;;;1633   	{
;;;1634   	ibt._avg1/=ibt._avg_cnt;
;;;1635   	}
;;;1636   
;;;1637   
;;;1638   if(ibt._nd[0]!=0)
;;;1639   	{
;;;1640   	ibt._T_dispers[0]=0;
;;;1641   	}
;;;1642   else 
;;;1643   	{
;;;1644   	ibt._T_dispers[0]=abs(ibt._T[0]-ibt._avg1);
;;;1645   	}
;;;1646   
;;;1647   if(ibt._nd[1]!=0)
;;;1648   	{
;;;1649   	ibt._T_dispers[1]=0;
;;;1650   	}
;;;1651   else 
;;;1652   	{
;;;1653   	ibt._T_dispers[1]=abs(ibt._T[1]-ibt._avg1);
;;;1654   	}
;;;1655   
;;;1656   if(ibt._nd[2]!=0)
;;;1657   	{
;;;1658   	ibt._T_dispers[2]=0;
;;;1659   	}
;;;1660   else 
;;;1661   	{
;;;1662   	ibt._T_dispers[2]=abs(ibt._T[2]-ibt._avg1);
;;;1663   	}
;;;1664   
;;;1665   if(ibt._nd[3]!=0)
;;;1666   	{
;;;1667   	ibt._T_dispers[3]=0;
;;;1668   	}
;;;1669   else 
;;;1670   	{
;;;1671   	ibt._T_dispers[3]=abs(ibt._T[3]-ibt._avg1);
;;;1672   	}
;;;1673   
;;;1674   if(	ibt._nd[0]&&
;;;1675   	ibt._nd[1]&&
;;;1676   	ibt._nd[2]&&
;;;1677   	ibt._nd[3]
;;;1678   	)
;;;1679   	{
;;;1680   	t_box=(bps[0]._Ti);
;;;1681   	}
;;;1682   
;;;1683   else if(	ibt._nd[0]||
;;;1684   	ibt._nd[1]||
;;;1685   	ibt._nd[2]||
;;;1686   	ibt._nd[3]
;;;1687   	)
;;;1688   	{
;;;1689   	t_box=(ibt._avg1-273);
;;;1690   	}
;;;1691   else 
;;;1692   	{
;;;1693   	ibt._max_dispers_num=0;
;;;1694   	ibt._max_dispers=ibt._T_dispers[0];
;;;1695   
;;;1696   	if(ibt._T_dispers[1]>ibt._max_dispers)
;;;1697   		{
;;;1698   		ibt._max_dispers_num=1;
;;;1699   		ibt._max_dispers=ibt._T_dispers[1];
;;;1700   		}
;;;1701   	if(ibt._T_dispers[2]>ibt._max_dispers)
;;;1702   		{
;;;1703   		ibt._max_dispers_num=2;
;;;1704   		ibt._max_dispers=ibt._T_dispers[2];
;;;1705   		}
;;;1706   	if(ibt._T_dispers[3]>ibt._max_dispers)
;;;1707   		{
;;;1708   		ibt._max_dispers_num=3;
;;;1709   		ibt._max_dispers=ibt._T_dispers[3];
;;;1710   		}
;;;1711   
;;;1712   	ibt._avg2=0;
;;;1713   
;;;1714   	if(ibt._max_dispers_num!=0)
;;;1715   		{
;;;1716   		ibt._avg2+=ibt._T[0];
;;;1717   		}
;;;1718   	if(ibt._max_dispers_num!=1)
;;;1719   		{
;;;1720   		ibt._avg2+=ibt._T[1];
;;;1721   		}
;;;1722   	if(ibt._max_dispers_num!=2)
;;;1723   		{
;;;1724   		ibt._avg2+=ibt._T[2];
;;;1725   		}
;;;1726   	if(ibt._max_dispers_num!=3)
;;;1727   		{
;;;1728   		ibt._avg2+=ibt._T[3];
;;;1729   		}
;;;1730   
;;;1731   	t_box=(ibt._avg2/3)-273;
;;;1732   
;;;1733   	}*/
;;;1734   
;;;1735   
;;;1736   //*********************************************
;;;1737   
;;;1738   #ifndef TELECORE
;;;1739   if((BAT_IS_ON[0]==bisON)&&(bat[0]._Ub>200)) Ibmax=bat[0]._Ib;
001366  48fc              LDR      r0,|L1.5976|
001368  7801              LDRB     r1,[r0,#0]  ; BAT_IS_ON
00136a  2955              CMP      r1,#0x55
00136c  d104              BNE      |L1.4984|
00136e  f1bb0fc8          CMP      r11,#0xc8
001372  dd01              BLE      |L1.4984|
001374  8929              LDRH     r1,[r5,#8]  ; bat
001376  8739              STRH     r1,[r7,#0x38]
                  |L1.4984|
;;;1740   if((BAT_IS_ON[1]==bisON)&&(bat[1]._Ub>200)&&(bat[1]._Ib>bat[0]._Ib)) Ibmax=bat[1]._Ib;
001378  7840              LDRB     r0,[r0,#1]  ; BAT_IS_ON
00137a  2855              CMP      r0,#0x55
00137c  d10a              BNE      |L1.5012|
00137e  f9b5004e          LDRSH    r0,[r5,#0x4e]  ; bat
001382  28c8              CMP      r0,#0xc8
001384  dd06              BLE      |L1.5012|
001386  f9b50054          LDRSH    r0,[r5,#0x54]  ; bat
00138a  f9b51008          LDRSH    r1,[r5,#8]  ; bat
00138e  4288              CMP      r0,r1
001390  dd00              BLE      |L1.5012|
001392  8738              STRH     r0,[r7,#0x38]
                  |L1.5012|
;;;1741   #endif
;;;1742   
;;;1743   #ifdef TELECORE
;;;1744   Ibmax=0;
;;;1745   /*
;;;1746   if((NUMBAT_TELECORE>0)&&(lakb[0]._communicationFullErrorStat==0)&&(lakb[0]._ch_curr/10>Ibmax))Ibmax=lakb[0]._ch_curr/10;
;;;1747   if((NUMBAT_TELECORE>1)&&(lakb[1]._communicationFullErrorStat==0)&&(lakb[1]._ch_curr/10>Ibmax))Ibmax=lakb[1]._ch_curr/10;
;;;1748   if((NUMBAT_TELECORE>2)&&(lakb[2]._communicationFullErrorStat==0)&&(lakb[2]._ch_curr/10>Ibmax))Ibmax=lakb[2]._ch_curr/10;
;;;1749   */
;;;1750   if((NUMBAT_TELECORE>0)&&(bat[0]._Ib/10>Ibmax))Ibmax=bat[0]._Ib/10;
;;;1751   if((NUMBAT_TELECORE>1)&&(bat[1]._Ib/10>Ibmax))Ibmax=bat[1]._Ib/10;
;;;1752   //if((BAT_IS_ON[0]==bisON)&&(bat[0]._Ub>200)) Ibmax=bat[0]._Ib/1;
;;;1753   //if((BAT_IS_ON[1]==bisON)&&(bat[1]._Ub>200)&&(bat[1]._Ib>bat[0]._Ib)) Ibmax=bat[1]._Ib;
;;;1754   #endif
;;;1755   //Ibmax=bat[0]._Ib;
;;;1756   //if((AUSW_MAIN==22063)||(AUSW_MAIN==22023)||(AUSW_MAIN==22043))Ibmax=Ib_ips_termokompensat;
;;;1757   #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;1758   Ibmax=Ib_ips_termokompensat;
001394  f8bc0000          LDRH     r0,[r12,#0]  ; Ib_ips_termokompensat
001398  8738              STRH     r0,[r7,#0x38]
;;;1759   #endif
;;;1760   for(i=0;i<NUMIST;i++)
00139a  f04f0100          MOV      r1,#0
00139e  e02f              B        |L1.5120|
                  |L1.5024|
;;;1761   	{
;;;1762   	if(bps[i]._cnt<25)
0013a0  ebc100c1          RSB      r0,r1,r1,LSL #3
0013a4  eb001001          ADD      r0,r0,r1,LSL #4
0013a8  eb040080          ADD      r0,r4,r0,LSL #2
0013ac  78c6              LDRB     r6,[r0,#3]
0013ae  2e19              CMP      r6,#0x19
0013b0  d21c              BCS      |L1.5100|
;;;1763        	{
;;;1764        	bps[i]._Ii=bps[i]._buff[0]+(bps[i]._buff[1]*256);
0013b2  7986              LDRB     r6,[r0,#6]
0013b4  79c7              LDRB     r7,[r0,#7]
0013b6  eb062607          ADD      r6,r6,r7,LSL #8
0013ba  6246              STR      r6,[r0,#0x24]
;;;1765        	bps[i]._Uin=bps[i]._buff[2]+(bps[i]._buff[3]*256);
0013bc  7a06              LDRB     r6,[r0,#8]
0013be  7a47              LDRB     r7,[r0,#9]
0013c0  eb062607          ADD      r6,r6,r7,LSL #8
0013c4  6206              STR      r6,[r0,#0x20]
;;;1766        	bps[i]._Uii=bps[i]._buff[4]+(bps[i]._buff[5]*256);
0013c6  7a86              LDRB     r6,[r0,#0xa]
0013c8  7ac7              LDRB     r7,[r0,#0xb]
0013ca  eb062607          ADD      r6,r6,r7,LSL #8
0013ce  61c6              STR      r6,[r0,#0x1c]
;;;1767        	bps[i]._Ti=(signed)(bps[i]._buff[6]);
0013d0  7b06              LDRB     r6,[r0,#0xc]
0013d2  6286              STR      r6,[r0,#0x28]
;;;1768        	bps[i]._adr_ee=bps[i]._buff[7];
0013d4  7b46              LDRB     r6,[r0,#0xd]
0013d6  f8806052          STRB     r6,[r0,#0x52]
;;;1769        	bps[i]._flags_tm=bps[i]._buff[8];
0013da  7b86              LDRB     r6,[r0,#0xe]
0013dc  f8806042          STRB     r6,[r0,#0x42]
;;;1770   	     bps[i]._rotor=bps[i]._buff[10]+(bps[i]._buff[11]*256);    
0013e0  7c06              LDRB     r6,[r0,#0x10]
0013e2  7c47              LDRB     r7,[r0,#0x11]
0013e4  eb062607          ADD      r6,r6,r7,LSL #8
0013e8  64c6              STR      r6,[r0,#0x4c]
0013ea  e006              B        |L1.5114|
                  |L1.5100|
;;;1771        	} 
;;;1772   	else 
;;;1773        	{
;;;1774        	bps[i]._Uii=0; 
0013ec  61c3              STR      r3,[r0,#0x1c]
;;;1775        	bps[i]._Ii=0;
0013ee  6243              STR      r3,[r0,#0x24]
;;;1776        	bps[i]._Uin=0;
0013f0  6203              STR      r3,[r0,#0x20]
;;;1777        	bps[i]._Ti=0;
0013f2  6283              STR      r3,[r0,#0x28]
;;;1778        	bps[i]._flags_tm=0; 
0013f4  f8803042          STRB     r3,[r0,#0x42]
;;;1779   	     bps[i]._rotor=0;    
0013f8  64c3              STR      r3,[r0,#0x4c]
                  |L1.5114|
0013fa  f1010101          ADD      r1,r1,#1              ;1760
0013fe  b2c9              UXTB     r1,r1                 ;1760
                  |L1.5120|
001400  4291              CMP      r1,r2                 ;1760
001402  dbcd              BLT      |L1.5024|
;;;1780        	}
;;;1781        
;;;1782        }
;;;1783   
;;;1784   load_I=0;
001404  4ed5              LDR      r6,|L1.5980|
;;;1785   #ifdef TELECORE
;;;1786   
;;;1787   /*for(i=0;i<NUMBAT_TELECORE;i++)
;;;1788   	{
;;;1789   	load_I-=lakb[i]._ch_curr/10;
;;;1790   	}*/
;;;1791   load_I=-(bat[0]._Ib/10)-(bat[1]._Ib/10);
;;;1792   #else
;;;1793   load_I=-(bat[0]._Ib/10)-(bat[1]._Ib/10);
001406  f9b51008          LDRSH    r1,[r5,#8]  ; bat
00140a  f04f000a          MOV      r0,#0xa
00140e  fb91f1f0          SDIV     r1,r1,r0
001412  f9b55054          LDRSH    r5,[r5,#0x54]  ; bat
001416  fb95f0f0          SDIV     r0,r5,r0
00141a  4408              ADD      r0,r0,r1
00141c  f1c00000          RSB      r0,r0,#0
001420  b207              SXTH     r7,r0
001422  8037              STRH     r7,[r6,#0]
;;;1794   #endif
;;;1795   Isumm=0;
001424  4dce              LDR      r5,|L1.5984|
001426  802b              STRH     r3,[r5,#0]
;;;1796   
;;;1797   for(i=0;i<NUMIST;i++)
001428  f04f0000          MOV      r0,#0
00142c  e012              B        |L1.5204|
                  |L1.5166|
;;;1798        {
;;;1799        if(bps[i]._cnt<5)Isumm+=bps[i]._Ii;
00142e  ebc001c0          RSB      r1,r0,r0,LSL #3
001432  eb011100          ADD      r1,r1,r0,LSL #4
001436  eb040181          ADD      r1,r4,r1,LSL #2
00143a  f891c003          LDRB     r12,[r1,#3]
00143e  f1bc0f05          CMP      r12,#5
001442  d204              BCS      |L1.5198|
001444  6a49              LDR      r1,[r1,#0x24]
001446  f8b5c000          LDRH     r12,[r5,#0]  ; Isumm
00144a  4461              ADD      r1,r1,r12
00144c  8029              STRH     r1,[r5,#0]
                  |L1.5198|
00144e  f1000001          ADD      r0,r0,#1              ;1797
001452  b2c0              UXTB     r0,r0                 ;1797
                  |L1.5204|
001454  4290              CMP      r0,r2                 ;1797
001456  dbea              BLT      |L1.5166|
;;;1800        }  
;;;1801        
;;;1802   load_I=load_I+Isumm;
001458  8828              LDRH     r0,[r5,#0]  ; Isumm
00145a  4438              ADD      r0,r0,r7
00145c  b200              SXTH     r0,r0
00145e  8030              STRH     r0,[r6,#0]
;;;1803   if(load_I<0)load_I=0;
001460  2800              CMP      r0,#0
001462  da00              BGE      |L1.5222|
001464  8033              STRH     r3,[r6,#0]
                  |L1.5222|
;;;1804   
;;;1805   #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;1806   load_I=0;
001466  8033              STRH     r3,[r6,#0]
;;;1807   
;;;1808   Isumm=0;
001468  802b              STRH     r3,[r5,#0]
;;;1809   
;;;1810   for(i=0;i<NUMIST;i++)
00146a  f04f0000          MOV      r0,#0
00146e  e00f              B        |L1.5264|
                  |L1.5232|
;;;1811        {
;;;1812        if(bps[i]._cnt<5)Isumm+=bps[i]._Ii;
001470  ebc001c0          RSB      r1,r0,r0,LSL #3
001474  eb011100          ADD      r1,r1,r0,LSL #4
001478  eb040181          ADD      r1,r4,r1,LSL #2
00147c  78cf              LDRB     r7,[r1,#3]
00147e  2f05              CMP      r7,#5
001480  d203              BCS      |L1.5258|
001482  6a49              LDR      r1,[r1,#0x24]
001484  882f              LDRH     r7,[r5,#0]  ; Isumm
001486  4439              ADD      r1,r1,r7
001488  8029              STRH     r1,[r5,#0]
                  |L1.5258|
00148a  f1000001          ADD      r0,r0,#1              ;1810
00148e  b2c0              UXTB     r0,r0                 ;1810
                  |L1.5264|
001490  4290              CMP      r0,r2                 ;1810
001492  dbed              BLT      |L1.5232|
;;;1813        }  
;;;1814        
;;;1815   load_I=load_I+Isumm;
001494  8829              LDRH     r1,[r5,#0]  ; Isumm
001496  eb030001          ADD      r0,r3,r1
00149a  b200              SXTH     r0,r0
00149c  8030              STRH     r0,[r6,#0]
;;;1816   if(load_I<0)load_I=0;
00149e  2800              CMP      r0,#0
0014a0  da00              BGE      |L1.5284|
0014a2  8033              STRH     r3,[r6,#0]
                  |L1.5284|
;;;1817   
;;;1818   #endif
;;;1819   
;;;1820   
;;;1821   
;;;1822   #ifdef UKU_GLONASS
;;;1823   inv[0]._Uio=6;
;;;1824   if (NUMINV)
;;;1825   	{
;;;1826   	for(i=0;i<NUMINV;i++)
;;;1827   		{
;;;1828   		if(bps[i+first_inv_slot]._cnt<25)
;;;1829        		{
;;;1830        		inv[i]._Ii=bps[i+first_inv_slot]._buff[0]+(bps[i+first_inv_slot]._buff[1]*256);
;;;1831        		inv[i]._Uin=bps[i+first_inv_slot]._buff[2]+(bps[i+first_inv_slot]._buff[3]*256);
;;;1832        		inv[i]._Uio=bps[i+first_inv_slot]._buff[4]+(bps[i+first_inv_slot]._buff[5]*256);
;;;1833        		inv[i]._Ti=(signed)(bps[i+first_inv_slot]._buff[6]);
;;;1834        		inv[i]._flags_tm=bps[i+first_inv_slot]._buff[8];
;;;1835   	    	//	inv[i]._rotor=bps[i+first_inv_slot]._buff[10]+(bps[i+first_inv_slot]._buff[11]*256);
;;;1836   			inv[i]._cnt=0;    
;;;1837        		} 
;;;1838   		else 
;;;1839        		{
;;;1840        		inv[i]._Uio=0; 
;;;1841        		inv[i]._Ii=0;
;;;1842        		inv[i]._Uin=0;
;;;1843        		inv[i]._Ti=0;
;;;1844        		inv[i]._flags_tm=0; 
;;;1845   //	     	inv[i]._rotor0;
;;;1846   			inv[i]._cnt=25;    
;;;1847        		}
;;;1848        	}
;;;1849      	}
;;;1850   #endif
;;;1851   
;;;1852   #ifndef UKU_GLONASS
;;;1853   if (NUMINV)
0014a4  48af              LDR      r0,|L1.5988|
0014a6  f9b05000          LDRSH    r5,[r0,#0]  ; NUMINV
0014aa  2d00              CMP      r5,#0
0014ac  d066              BEQ      |L1.5500|
;;;1854   	{
;;;1855   	for(i=0;i<NUMINV;i++)
0014ae  f04f0200          MOV      r2,#0
;;;1856   		{
;;;1857   		if(bps[i+20]._cnt<25)
;;;1858        		{
;;;1859        		inv[i]._Ii=bps[i+20]._buff[0]+(bps[i+20]._buff[1]*256);
0014b2  4ead              LDR      r6,|L1.5992|
0014b4  e060              B        |L1.5496|
                  |L1.5302|
0014b6  f1020014          ADD      r0,r2,#0x14           ;1857
0014ba  ebc001c0          RSB      r1,r0,r0,LSL #3       ;1857
0014be  eb011000          ADD      r0,r1,r0,LSL #4       ;1857
0014c2  eb040080          ADD      r0,r4,r0,LSL #2       ;1857
0014c6  78c1              LDRB     r1,[r0,#3]            ;1857
0014c8  2919              CMP      r1,#0x19              ;1857
0014ca  d239              BCS      |L1.5440|
0014cc  7981              LDRB     r1,[r0,#6]
0014ce  79c7              LDRB     r7,[r0,#7]
0014d0  eb012707          ADD      r7,r1,r7,LSL #8
0014d4  eb020142          ADD      r1,r2,r2,LSL #1
0014d8  eb061141          ADD      r1,r6,r1,LSL #5
0014dc  61cf              STR      r7,[r1,#0x1c]
;;;1860        		inv[i]._Pio=bps[i+20]._buff[2]+(bps[i+20]._buff[3]*256);
0014de  7a07              LDRB     r7,[r0,#8]
0014e0  f890c009          LDRB     r12,[r0,#9]
0014e4  eb07270c          ADD      r7,r7,r12,LSL #8
0014e8  62cf              STR      r7,[r1,#0x2c]
;;;1861        		inv[i]._Uio=bps[i+20]._buff[4]+(bps[i+20]._buff[5]*256);
0014ea  7a87              LDRB     r7,[r0,#0xa]
0014ec  f890c00b          LDRB     r12,[r0,#0xb]
0014f0  eb07270c          ADD      r7,r7,r12,LSL #8
0014f4  618f              STR      r7,[r1,#0x18]
;;;1862        		inv[i]._Ti=(signed)(bps[i+20]._buff[6]);
0014f6  7b07              LDRB     r7,[r0,#0xc]
0014f8  620f              STR      r7,[r1,#0x20]
;;;1863        		inv[i]._flags_tm=bps[i+20]._buff[7];
0014fa  7b47              LDRB     r7,[r0,#0xd]
0014fc  f8817046          STRB     r7,[r1,#0x46]
;;;1864        		inv[i]._Uin=bps[i+20]._buff[8]+(bps[i+20]._buff[9]*256);
001500  7b87              LDRB     r7,[r0,#0xe]
001502  f890c00f          LDRB     r12,[r0,#0xf]
001506  eb07270c          ADD      r7,r7,r12,LSL #8
00150a  628f              STR      r7,[r1,#0x28]
;;;1865        		inv[i]._Uil=bps[i+20]._buff[10]+(bps[i+20]._buff[11]*256);
00150c  7c07              LDRB     r7,[r0,#0x10]
00150e  f890c011          LDRB     r12,[r0,#0x11]
001512  eb07270c          ADD      r7,r7,r12,LSL #8
001516  624f              STR      r7,[r1,#0x24]
;;;1866   			inv[i]._cnt=0;
001518  708b              STRB     r3,[r1,#2]
;;;1867   			inv[i]._Uoutmin=bps[i+20]._buff[12]; 
00151a  7c87              LDRB     r7,[r0,#0x12]
00151c  f8817059          STRB     r7,[r1,#0x59]
;;;1868   			inv[i]._Uoutmax=bps[i+20]._buff[13]; 
001520  7cc7              LDRB     r7,[r0,#0x13]
001522  f881705a          STRB     r7,[r1,#0x5a]
;;;1869   			inv[i]._Pnom=bps[i+20]._buff[14]; 
001526  7d07              LDRB     r7,[r0,#0x14]
001528  f8817058          STRB     r7,[r1,#0x58]
;;;1870   			inv[i]._net_contr_en=bps[i+20]._buff[15];
00152c  7d47              LDRB     r7,[r0,#0x15]
00152e  f881705b          STRB     r7,[r1,#0x5b]
;;;1871   			inv[i]._pwm_en=bps[i+20]._buff[16];  
001532  7d87              LDRB     r7,[r0,#0x16]
001534  f881705c          STRB     r7,[r1,#0x5c]
;;;1872   			inv[i]._phase_mode=bps[i+20]._buff[17];  
001538  7dc0              LDRB     r0,[r0,#0x17]
00153a  f881005d          STRB     r0,[r1,#0x5d]
00153e  e018              B        |L1.5490|
                  |L1.5440|
;;;1873        		} 
;;;1874   		else 
;;;1875        		{
;;;1876         		inv[i]._Ii=0;
001540  eb020042          ADD      r0,r2,r2,LSL #1
001544  eb061040          ADD      r0,r6,r0,LSL #5
001548  61c3              STR      r3,[r0,#0x1c]
;;;1877   			inv[i]._Pio=0;
00154a  62c3              STR      r3,[r0,#0x2c]
;;;1878   			inv[i]._Uio=0;
00154c  6183              STR      r3,[r0,#0x18]
;;;1879        		inv[i]._Ti=0;
00154e  6203              STR      r3,[r0,#0x20]
;;;1880        		inv[i]._flags_tm=0; 
001550  f8803046          STRB     r3,[r0,#0x46]
;;;1881        		inv[i]._Uil=0;
001554  6243              STR      r3,[r0,#0x24]
;;;1882        		inv[i]._Uin=0;
001556  6283              STR      r3,[r0,#0x28]
;;;1883   			inv[i]._cnt=25; 
001558  f04f0119          MOV      r1,#0x19
00155c  7081              STRB     r1,[r0,#2]
;;;1884   			inv[i]._Uoutmin=0; 
00155e  f8803059          STRB     r3,[r0,#0x59]
;;;1885   			inv[i]._Uoutmax=0; 
001562  f880305a          STRB     r3,[r0,#0x5a]
;;;1886   			inv[i]._Pnom=0; 
001566  f8803058          STRB     r3,[r0,#0x58]
;;;1887   			inv[i]._net_contr_en=0;
00156a  f880305b          STRB     r3,[r0,#0x5b]
;;;1888   			inv[i]._pwm_en=0;   
00156e  f880305c          STRB     r3,[r0,#0x5c]
                  |L1.5490|
001572  f1020201          ADD      r2,r2,#1              ;1855
001576  b2d2              UXTB     r2,r2                 ;1855
                  |L1.5496|
001578  42aa              CMP      r2,r5                 ;1855
00157a  db9c              BLT      |L1.5302|
                  |L1.5500|
;;;1889   			   
;;;1890        		}
;;;1891        	}
;;;1892      	}
;;;1893   #endif
;;;1894   
;;;1895   #ifdef GLADKOV
;;;1896   inv[0]._Ii=bps[4]._buff[0]+(bps[4]._buff[1]*256);
;;;1897   inv[0]._Pio=bps[4]._buff[2]+(bps[4]._buff[3]*256);
;;;1898   inv[0]._Uio=bps[4]._buff[4]+(bps[4]._buff[5]*256);
;;;1899   inv[0]._Ti=(signed)(bps[4]._buff[6]);
;;;1900   inv[0]._flags_tm=bps[4]._buff[7];
;;;1901   inv[0]._Uin=bps[4]._buff[8]+(bps[4]._buff[9]*256);
;;;1902   inv[0]._Uil=bps[4]._buff[10]+(bps[4]._buff[11]*256);
;;;1903   inv[0]._cnt=0;    
;;;1904   
;;;1905   inv[1]._Ii=bps[21]._buff[0]+(bps[21]._buff[1]*256);
;;;1906   inv[1]._Pio=bps[21]._buff[2]+(bps[21]._buff[3]*256);
;;;1907   inv[1]._Uio=bps[21]._buff[4]+(bps[21]._buff[5]*256);
;;;1908   inv[1]._Ti=(signed)(bps[21]._buff[6]);
;;;1909   inv[1]._flags_tm=bps[21]._buff[7];
;;;1910   inv[1]._Uin=bps[21]._buff[8]+(bps[21]._buff[9]*256);
;;;1911   inv[1]._Uil=bps[21]._buff[10]+(bps[21]._buff[11]*256);
;;;1912   inv[1]._cnt=0;    
;;;1913   #endif
;;;1914   
;;;1915   /*
;;;1916   if((BAT_IS_ON[0]==bisON)&&(BAT_TYPE==1))
;;;1917   	{
;;;1918   	lakb[0]._battCommState=0;
;;;1919   	if(lakb[0]._cnt>10)lakb[0]._battCommState=2;
;;;1920   	else if(lakb[0]._bRS485ERR==1)lakb[0]._battCommState=1;
;;;1921   	
;;;1922   	if(lakb[0]._battCommState==0)
;;;1923   		{	
;;;1924   		bat[0]._Ub=(signed short)((lakb[0]._tot_bat_volt+5)/10);
;;;1925   		bat[0]._Ib=(signed short)lakb[0]._ch_curr;
;;;1926   		if(lakb[0]._dsch_curr) bat[0]._Ib=(signed short) (-lakb[0]._dsch_curr);
;;;1927   		bat[0]._Tb=(signed short)lakb[0]._max_cell_temp;
;;;1928   		}
;;;1929   	}
;;;1930   */
;;;1931   
;;;1932   #ifdef UKU_TELECORE2015
;;;1933   
;;;1934   	if(BAT_TYPE==2)
;;;1935   		{
;;;1936   		lakb[0]._ch_curr/*temp_SS*/=((ascii2halFhex(liBatteryInBuff[113]))<<12)+
;;;1937   					 		((ascii2halFhex(liBatteryInBuff[114]))<<8)+
;;;1938   							((ascii2halFhex(liBatteryInBuff[115]))<<4)+
;;;1939   							((ascii2halFhex(liBatteryInBuff[116])));
;;;1940   		
;;;1941   		/*if(temp_SS&0x8000)		lakb[0]._ch_curr=~temp_SS;
;;;1942   		else 				lakb[0]._ch_curr=temp_SS;*/
;;;1943   	
;;;1944   		lakb[0]._tot_bat_volt=	(unsigned short)(((ascii2halFhex(liBatteryInBuff[117]))<<12)+
;;;1945   							((ascii2halFhex(liBatteryInBuff[118]))<<8)+
;;;1946   							((ascii2halFhex(liBatteryInBuff[119]))<<4)+
;;;1947   							((ascii2halFhex(liBatteryInBuff[120]))))/100;
;;;1948   	
;;;1949   		lakb[0]._max_cell_temp= 	(((ascii2halFhex(liBatteryInBuff[93]))<<12)+
;;;1950   							((ascii2halFhex(liBatteryInBuff[94]))<<8)+
;;;1951   							((ascii2halFhex(liBatteryInBuff[95]))<<4)+
;;;1952   							((ascii2halFhex(liBatteryInBuff[96]))))/10-273;
;;;1953   	
;;;1954   		lakb[0]._s_o_c_abs=		(unsigned short)((ascii2halFhex(liBatteryInBuff[121]))<<12)+
;;;1955   							((ascii2halFhex(liBatteryInBuff[122]))<<8)+
;;;1956   							((ascii2halFhex(liBatteryInBuff[123]))<<4)+
;;;1957   							((ascii2halFhex(liBatteryInBuff[124])));
;;;1958   	
;;;1959   		lakb[0]._rat_cap=		(unsigned short)((ascii2halFhex(liBatteryInBuff[127]))<<12)+
;;;1960   							((ascii2halFhex(liBatteryInBuff[128]))<<8)+
;;;1961   							((ascii2halFhex(liBatteryInBuff[129]))<<4)+
;;;1962   							((ascii2halFhex(liBatteryInBuff[130])));
;;;1963   	
;;;1964   		lakb[0]._s_o_c=		lakb[0]._s_o_c_abs/(lakb[0]._rat_cap/100);
;;;1965   	
;;;1966   	
;;;1967   	/*	lakb[0]._rat_cap= (lakb_damp[i][13]*256)+ lakb_damp[i][14];
;;;1968   		lakb[0]._max_cell_volt= (lakb_damp[i][0]*256)+ lakb_damp[i][1];
;;;1969   		lakb[0]._min_cell_volt= (lakb_damp[i][2]*256)+ lakb_damp[i][3];
;;;1970   		lakb[0]._max_cell_temp= lakb_damp[i][4];
;;;1971   		lakb[0]._min_cell_temp= lakb_damp[i][5];
;;;1972   		lakb[0]._tot_bat_volt= (lakb_damp[i][6]*256)+ lakb_damp[i][7];
;;;1973   		lakb[0]._ch_curr= (lakb_damp[i][8]*256)+ lakb_damp[i][8];
;;;1974   		lakb[0]._dsch_curr= (lakb_damp[i][10]*256)+ lakb_damp[i][11];
;;;1975   		lakb[0]._s_o_c= lakb_damp[i][12];
;;;1976   		lakb[0]._r_b_t= lakb_damp[i][15];
;;;1977   		lakb[0]._c_c_l_v= (lakb_damp[i][16]*256)+ lakb_damp[i][17];
;;;1978   		lakb[0]._s_o_h= lakb_damp[i][18];
;;;1979   	
;;;1980   		if(lakb[i]._rat_cap==0)
;;;1981   			{
;;;1982   			if(lakb[i]._isOnCnt)
;;;1983   				{
;;;1984   				lakb[i]._isOnCnt--;
;;;1985   				if(lakb[i]._isOnCnt==0)
;;;1986   					{
;;;1987   					if(lakb[i]._battIsOn!=0) bLAKB_KONF_CH=1;
;;;1988   					}
;;;1989   				}
;;;1990   			}
;;;1991   		else 
;;;1992   			{
;;;1993   			if(lakb[i]._isOnCnt<50)
;;;1994   				{
;;;1995   				lakb[i]._isOnCnt++;
;;;1996   				if(lakb[i]._isOnCnt==50)
;;;1997   					{
;;;1998   					if(lakb[i]._battIsOn!=1) bLAKB_KONF_CH=1;
;;;1999   					}
;;;2000   				}
;;;2001   			}
;;;2002   		gran(&lakb[i]._isOnCnt,0,50);*/
;;;2003   		}
;;;2004   	else if(BAT_TYPE==3)
;;;2005   		{
;;;2006   		//short numOfPacks;
;;;2007   		//short numOfCells, numOfTemperCells, baseOfData;
;;;2008   		
;;;2009   		#ifndef UKU_TELECORE2016
;;;2010   		numOfCells=((ascii2halFhex(liBatteryInBuff[17]))<<4)+((ascii2halFhex(liBatteryInBuff[18])));
;;;2011   		numOfTemperCells=((ascii2halFhex(liBatteryInBuff[17+(numOfCells*4)+2]))<<4)+((ascii2halFhex(liBatteryInBuff[18+(numOfCells*4)+2])));
;;;2012   		numOfPacks=((ascii2halFhex(liBatteryInBuff[15]))<<4)+((ascii2halFhex(liBatteryInBuff[16])));
;;;2013   		if(numOfPacks)numOfPacks-=1;
;;;2014   		if((numOfPacks<0)||(numOfPacks>NUMBAT_TELECORE))numOfPacks=0;
;;;2015   		plazma_numOfCells=numOfCells;
;;;2016   		plazma_numOfTemperCells=numOfTemperCells;
;;;2017   		plazma_numOfPacks=numOfPacks;
;;;2018   
;;;2019   
;;;2020   		baseOfData=16+(numOfCells*4)+2+(numOfTemperCells*4)+2;
;;;2021   
;;;2022   		lakb[numOfPacks]._ch_curr=(signed short)(
;;;2023   							((ascii2halFhex(liBatteryInBuff[1+baseOfData]))<<12)+
;;;2024   							((ascii2halFhex(liBatteryInBuff[2+baseOfData]))<<8)+
;;;2025   							((ascii2halFhex(liBatteryInBuff[3+baseOfData]))<<4)+
;;;2026   							((ascii2halFhex(liBatteryInBuff[4+baseOfData])))
;;;2027   							);	  
;;;2028   
;;;2029   		lakb[numOfPacks]._tot_bat_volt=(signed short)(
;;;2030   							((ascii2halFhex(liBatteryInBuff[1+baseOfData+4]))<<12)+
;;;2031   							((ascii2halFhex(liBatteryInBuff[2+baseOfData+4]))<<8)+
;;;2032   							((ascii2halFhex(liBatteryInBuff[3+baseOfData+4]))<<4)+
;;;2033   							((ascii2halFhex(liBatteryInBuff[4+baseOfData+4])))
;;;2034   							)/10;
;;;2035   
;;;2036   		lakb[numOfPacks]._max_cell_temp=(signed short)(
;;;2037   							((ascii2halFhex(liBatteryInBuff[1+baseOfData-4]))<<12)+
;;;2038   							((ascii2halFhex(liBatteryInBuff[2+baseOfData-4]))<<8)+
;;;2039   							((ascii2halFhex(liBatteryInBuff[3+baseOfData-4]))<<4)+
;;;2040   							((ascii2halFhex(liBatteryInBuff[4+baseOfData-4])))
;;;2041   							)-2730;
;;;2042   
;;;2043   		lakb[numOfPacks]._s_o_c=(signed short)(
;;;2044   							((ascii2halFhex(liBatteryInBuff[1+baseOfData+8]))<<12)+
;;;2045   							((ascii2halFhex(liBatteryInBuff[2+baseOfData+8]))<<8)+
;;;2046   							((ascii2halFhex(liBatteryInBuff[3+baseOfData+8]))<<4)+
;;;2047   							((ascii2halFhex(liBatteryInBuff[4+baseOfData+8])))
;;;2048   							)/10;
;;;2049   
;;;2050   		lakb[numOfPacks]._s_o_h=(signed short)(
;;;2051   							((ascii2halFhex(liBatteryInBuff[1+baseOfData+14]))<<12)+
;;;2052   							((ascii2halFhex(liBatteryInBuff[2+baseOfData+14]))<<8)+
;;;2053   							((ascii2halFhex(liBatteryInBuff[3+baseOfData+14]))<<4)+
;;;2054   							((ascii2halFhex(liBatteryInBuff[4+baseOfData+14])))
;;;2055   							)/10;
;;;2056   		#endif
;;;2057   		
;;;2058   		#ifdef UKU_TELECORE2016
;;;2059   		{
;;;2060   		char i;
;;;2061   		
;;;2062   		for(i=0;i<NUMBAT_TELECORE;i++)
;;;2063   			{
;;;2064   			lakb[i]._s_o_c_percent= (signed short)(((unsigned long)lakb[i]._s_o_c*100UL)/(unsigned long)lakb[i]._s_o_h);
;;;2065   			}
;;;2066   		}
;;;2067   		#endif								  
;;;2068   		}
;;;2069   	
;;;2070   if(sacredSunSilentCnt<3) 
;;;2071   	{
;;;2072       	bat[0]._Ub=lakb[0]._tot_bat_volt;
;;;2073       	bat[0]._Tb=lakb[0]._max_cell_temp;
;;;2074      	//bat[0]._Ib=lakb[0]._ch_curr/10;
;;;2075   	}
;;;2076   else 
;;;2077   	{
;;;2078       	//bat[0]._Ub=0;
;;;2079       	//bat[0]._Tb=0;
;;;2080      	//bat[0]._Ib=0;
;;;2081   	}
;;;2082   
;;;2083   if(BAT_TYPE==1)
;;;2084   	{
;;;2085   	char i;
;;;2086   	for(i=0;i<1;i++)
;;;2087   		{
;;;2088   		lakb[i]._rat_cap= (lakb_damp[i][13]*256)+ lakb_damp[i][14];
;;;2089   		lakb[i]._max_cell_volt= (lakb_damp[i][0]*256)+ lakb_damp[i][1];
;;;2090   		lakb[i]._min_cell_volt= (lakb_damp[i][2]*256)+ lakb_damp[i][3];
;;;2091   		lakb[i]._max_cell_temp= lakb_damp[i][4];
;;;2092   		lakb[i]._min_cell_temp= lakb_damp[i][5];
;;;2093   		lakb[i]._tot_bat_volt= (lakb_damp[i][6]*256)+ lakb_damp[i][7];
;;;2094   		lakb[i]._ch_curr= (lakb_damp[i][8]*256)+ lakb_damp[i][9];
;;;2095   		lakb[i]._dsch_curr= (lakb_damp[i][10]*256)+ lakb_damp[i][11];
;;;2096   		lakb[i]._s_o_c= lakb_damp[i][12];
;;;2097   		lakb[i]._r_b_t= lakb_damp[i][15];
;;;2098   		lakb[i]._c_c_l_v= (lakb_damp[i][16]*256)+ lakb_damp[i][17];
;;;2099   		lakb[i]._s_o_h= lakb_damp[i][18];
;;;2100   		lakb[i]._flags1= lakb_damp[i][34];
;;;2101   		lakb[i]._flags2= lakb_damp[i][35];
;;;2102   		lakb[i]._b_p_ser_num= lakb_damp[i][36];
;;;2103   
;;;2104   /*		if(lakb[i]._rat_cap==0)
;;;2105   			{
;;;2106   			if(lakb[i]._isOnCnt)
;;;2107   				{
;;;2108   				lakb[i]._isOnCnt--;
;;;2109   				if(lakb[i]._isOnCnt==0)
;;;2110   					{
;;;2111   					if(lakb[i]._battIsOn!=0) bLAKB_KONF_CH=1;
;;;2112   					}
;;;2113   				}
;;;2114   			}
;;;2115   		else 
;;;2116   			{
;;;2117   			if(lakb[i]._isOnCnt<50)
;;;2118   				{
;;;2119   				lakb[i]._isOnCnt++;
;;;2120   				if(lakb[i]._isOnCnt==50)
;;;2121   					{
;;;2122   					if(lakb[i]._battIsOn!=1) bLAKB_KONF_CH=1;
;;;2123   					}
;;;2124   				}
;;;2125   			} */
;;;2126   		gran(&lakb[i]._isOnCnt,0,50);
;;;2127   	 	}
;;;2128   
;;;2129   	if(lakb_damp[0][41]==100)
;;;2130   		{
;;;2131   		li_bat._485Error=1;
;;;2132   		}
;;;2133   	if(lakb_damp[0][41]==0)
;;;2134   		{
;;;2135   		//if(bRS485ERR)bLAKB_KONF_CH=1;
;;;2136   		li_bat._485Error=0;
;;;2137   		}
;;;2138   	li_bat._485ErrorCnt=lakb_damp[0][41];
;;;2139   
;;;2140   
;;;2141   	}
;;;2142   
;;;2143   
;;;2144   #endif
;;;2145   
;;;2146   
;;;2147   #ifdef UKU_TELECORE2015
;;;2148   //   
;;;2149   //TODO          
;;;2150   li_bat._batStat=bsOK;
;;;2151   if(BAT_TYPE==1) //COSLIGHT
;;;2152   	{
;;;2153   	if(li_bat._batStat==bsOK)
;;;2154   		{
;;;2155   		li_bat._Ub=lakb[0]._tot_bat_volt/10;
;;;2156   
;;;2157   		if(lakb[0]._ch_curr)li_bat._Ib=lakb[0]._ch_curr/10;
;;;2158   		else if(lakb[0]._dsch_curr) li_bat._Ib=bat[0]._Ib/10;//lakb[0]._dsch_curr/10;
;;;2159   	
;;;2160   		li_bat._ratCap=lakb[0]._rat_cap/100;
;;;2161   		li_bat._soc=lakb[0]._s_o_c;
;;;2162   		li_bat._soh=lakb[0]._s_o_h;
;;;2163   		li_bat._cclv=lakb[0]._c_c_l_v/10;
;;;2164   		li_bat._Tb=lakb[0]._max_cell_temp;
;;;2165   		li_bat._rbt=lakb[0]._r_b_t;
;;;2166   		}
;;;2167   	else 
;;;2168   		{
;;;2169   		li_bat._Ub=bat[0]._Ub;
;;;2170   		li_bat._Ib=bat[0]._Ib/10;
;;;2171   		li_bat._Tb=bat[0]._Tb;
;;;2172   		}
;;;2173   
;;;2174   	if((li_bat._485Error)||(li_bat._canError))
;;;2175   		{
;;;2176   		li_bat._batStat=bsOFF;
;;;2177   		}
;;;2178   	else li_bat._batStat=bsOK;
;;;2179   	}
;;;2180   else if(BAT_TYPE==2) //SACRED SUN
;;;2181   	{
;;;2182   	}
;;;2183   else if(BAT_TYPE==3) //ZTT
;;;2184   	{
;;;2185   	if(li_bat._batStat==bsOK)
;;;2186   		{
;;;2187   
;;;2188   		}
;;;2189   	}
;;;2190   #endif
;;;2191   
;;;2192   
;;;2193   /*
;;;2194   if((BAT_IS_ON[0]==bisON)&&(BAT_TYPE[0]==1)&&(BAT_LINK==0))
;;;2195   	{
;;;2196   
;;;2197   
;;;2198   	if(bat_drv_rx_buff[13]<=0x39)bbb[0]=bat_drv_rx_buff[13]-0x30;
;;;2199   	else bbb[0]=bat_drv_rx_buff[13]-55;
;;;2200   	if(bat_drv_rx_buff[14]<=0x39)bbb[1]=bat_drv_rx_buff[14]-0x30;
;;;2201   	else bbb[1]=bat_drv_rx_buff[14]-55;
;;;2202   	if(bat_drv_rx_buff[15]<=0x39)bbb[2]=bat_drv_rx_buff[15]-0x30;
;;;2203   	else bbb[2]=bat_drv_rx_buff[15]-55;
;;;2204   	if(bat_drv_rx_buff[16]<=0x39)bbb[3]=bat_drv_rx_buff[16]-0x30;
;;;2205   	else bbb[3]=bat_drv_rx_buff[16]-55;
;;;2206   
;;;2207   	tempSS=0;
;;;2208   	tempSS=((bbb[0]*4096)+(bbb[1]*256)+(bbb[2]*16)+bbb[3]);
;;;2209   
;;;2210   	bat[0]._max_cell_volt=(tempSS+5)/10;
;;;2211   
;;;2212   	if(bat_drv_rx_buff[17]<=0x39)bbb[0]=bat_drv_rx_buff[17]-0x30;
;;;2213   	else bbb[0]=bat_drv_rx_buff[17]-55;
;;;2214   	if(bat_drv_rx_buff[18]<=0x39)bbb[1]=bat_drv_rx_buff[18]-0x30;
;;;2215   	else bbb[1]=bat_drv_rx_buff[18]-55;
;;;2216   	if(bat_drv_rx_buff[19]<=0x39)bbb[2]=bat_drv_rx_buff[19]-0x30;
;;;2217   	else bbb[2]=bat_drv_rx_buff[19]-55;
;;;2218   	if(bat_drv_rx_buff[20]<=0x39)bbb[3]=bat_drv_rx_buff[20]-0x30;
;;;2219   	else bbb[3]=bat_drv_rx_buff[20]-55;
;;;2220   
;;;2221   	tempSS=0;
;;;2222   	tempSS=((bbb[0]*4096)+(bbb[1]*256)+(bbb[2]*16)+bbb[3]);
;;;2223   
;;;2224   	bat[0]._min_cell_volt=(tempSS+5)/10;
;;;2225   
;;;2226   
;;;2227   	}*/
;;;2228   
;;;2229   
;;;2230   
;;;2231   }
00157c  e8bd8ffe          POP      {r1-r11,pc}
;;;2232   
                          ENDP

                  mnemo_hndl PROC
;;;2233   //-----------------------------------------------
;;;2234   void mnemo_hndl(void)
001580  4a7a              LDR      r2,|L1.5996|
;;;2235   {
;;;2236   if(((ind==iMn_220)||(ind==iMn))&&(sub_ind==0)&&(MNEMO_ON==mnON))
;;;2237   	{
;;;2238   	if(mnemo_cnt)mnemo_cnt--;
001582  497b              LDR      r1,|L1.6000|
001584  7810              LDRB     r0,[r2,#0]            ;2236  ; a_ind
001586  2804              CMP      r0,#4                 ;2236
001588  d001              BEQ      |L1.5518|
00158a  2801              CMP      r0,#1                 ;2236
00158c  d105              BNE      |L1.5530|
                  |L1.5518|
00158e  7850              LDRB     r0,[r2,#1]            ;2236  ; a_ind
001590  b918              CBNZ     r0,|L1.5530|
001592  4878              LDR      r0,|L1.6004|
001594  7800              LDRB     r0,[r0,#0]            ;2236  ; MNEMO_ON
001596  2855              CMP      r0,#0x55              ;2236
001598  d003              BEQ      |L1.5538|
                  |L1.5530|
;;;2239   	}
;;;2240   else mnemo_cnt=MNEMO_TIME;
00159a  4877              LDR      r0,|L1.6008|
00159c  8800              LDRH     r0,[r0,#0]  ; MNEMO_TIME
00159e  7008              STRB     r0,[r1,#0]
                  |L1.5536|
;;;2241   }
0015a0  4770              BX       lr
                  |L1.5538|
0015a2  7808              LDRB     r0,[r1,#0]            ;2238  ; mnemo_cnt
0015a4  2800              CMP      r0,#0                 ;2238
0015a6  d0fb              BEQ      |L1.5536|
0015a8  f1a00001          SUB      r0,r0,#1              ;2238
0015ac  7008              STRB     r0,[r1,#0]            ;2238
0015ae  4770              BX       lr
;;;2242   
                          ENDP

                  adc_init PROC
;;;2243   //-----------------------------------------------
;;;2244   void adc_init(void)
0015b0  4872              LDR      r0,|L1.6012|
;;;2245   {
;;;2246   
;;;2247   SET_REG(LPC_PINCON->PINSEL1,1,(25-16)*2,2);
0015b2  6841              LDR      r1,[r0,#4]
0015b4  f4212140          BIC      r1,r1,#0xc0000
0015b8  f4412180          ORR      r1,r1,#0x40000
0015bc  6041              STR      r1,[r0,#4]
;;;2248   SET_REG(LPC_PINCON->PINSEL1,1,(24-16)*2,2);
0015be  6841              LDR      r1,[r0,#4]
0015c0  f4213140          BIC      r1,r1,#0x30000
0015c4  f4413180          ORR      r1,r1,#0x10000
0015c8  6041              STR      r1,[r0,#4]
;;;2249   SET_REG(LPC_PINCON->PINSEL1,1,(23-16)*2,2);
0015ca  6841              LDR      r1,[r0,#4]
0015cc  f4214140          BIC      r1,r1,#0xc000
0015d0  f4414180          ORR      r1,r1,#0x4000
0015d4  6041              STR      r1,[r0,#4]
;;;2250   
;;;2251   
;;;2252   SET_REG(LPC_PINCON->PINMODE1,2,(25-16)*2,2);
0015d6  6c41              LDR      r1,[r0,#0x44]
0015d8  f4212140          BIC      r1,r1,#0xc0000
0015dc  f4412100          ORR      r1,r1,#0x80000
0015e0  6441              STR      r1,[r0,#0x44]
;;;2253   SET_REG(LPC_PINCON->PINMODE1,2,(24-16)*2,2);
0015e2  6c41              LDR      r1,[r0,#0x44]
0015e4  f4213140          BIC      r1,r1,#0x30000
0015e8  f4413100          ORR      r1,r1,#0x20000
0015ec  6441              STR      r1,[r0,#0x44]
;;;2254   SET_REG(LPC_PINCON->PINMODE1,2,(23-16)*2,2);
0015ee  6c41              LDR      r1,[r0,#0x44]
0015f0  f4214140          BIC      r1,r1,#0xc000
0015f4  f4414100          ORR      r1,r1,#0x8000
0015f8  6441              STR      r1,[r0,#0x44]
;;;2255   
;;;2256   SET_REG(LPC_ADC->ADCR,0,24,3);
0015fa  4861              LDR      r0,|L1.6016|
0015fc  6801              LDR      r1,[r0,#0]
0015fe  f02161e0          BIC      r1,r1,#0x7000000
001602  6001              STR      r1,[r0,#0]
;;;2257   
;;;2258   SET_REG(LPC_ADC->ADCR,1,21,1);
001604  6801              LDR      r1,[r0,#0]
001606  f4411100          ORR      r1,r1,#0x200000
00160a  6001              STR      r1,[r0,#0]
;;;2259   SET_REG(LPC_ADC->ADCR,0,16,1);
00160c  6801              LDR      r1,[r0,#0]
00160e  f4213180          BIC      r1,r1,#0x10000
001612  6001              STR      r1,[r0,#0]
;;;2260   SET_REG(LPC_ADC->ADCR,1,8,8);
001614  6801              LDR      r1,[r0,#0]
001616  f421417f          BIC      r1,r1,#0xff00
00161a  f4417180          ORR      r1,r1,#0x100
00161e  6001              STR      r1,[r0,#0]
;;;2261   
;;;2262   //SET_REG(LPC_GPIO0->FIODIR,7,5,3);
;;;2263   //SET_REG(LPC_GPIO0->FIOPIN,4,5,3);
;;;2264   	
;;;2265   	/*if(adc_ch<=7)*///SET_REG(LPC_ADC->ADCR,1<<5,0,8);
;;;2266        /*else if(adc_ch==8) SET_REG(LPC_ADC->ADCR,1<<2,0,8);
;;;2267        else SET_REG(LPC_ADC->ADCR,1<<4,0,8);*/
;;;2268   
;;;2269   LPC_ADC->ADINTEN     =  (1<< 8);      /* global enable interrupt            */
001620  f44f7180          MOV      r1,#0x100
001624  60c1              STR      r1,[r0,#0xc]
001626  4857              LDR      r0,|L1.6020|
001628  f44f0180          MOV      r1,#0x400000
00162c  6001              STR      r1,[r0,#0]
;;;2270   
;;;2271   NVIC_EnableIRQ(ADC_IRQn);             /* enable ADC Interrupt               */
;;;2272   
;;;2273   
;;;2274   }
00162e  4770              BX       lr
;;;2275   
                          ENDP

                  adc_drv7 PROC
;;;2276   //-----------------------------------------------
;;;2277   void adc_drv7(void) //(U - )
001630  e92d41f0          PUSH     {r4-r8,lr}
;;;2278   {
;;;2279   //int temp_S;
;;;2280   //char i;
;;;2281   //signed short temp_SS;
;;;2282   
;;;2283   adc_self_ch_disp[0]=abs_pal(adc_self_ch_buff[1]-adc_self_ch_buff[0]);//adc_self_ch_buff[0]&0x0f80;
001634  4c54              LDR      r4,|L1.6024|
001636  8860              LDRH     r0,[r4,#2]  ; adc_self_ch_buff
001638  8821              LDRH     r1,[r4,#0]  ; adc_self_ch_buff
00163a  1a40              SUBS     r0,r0,r1
00163c  b200              SXTH     r0,r0
00163e  f7fffffe          BL       abs_pal
001642  1da6              ADDS     r6,r4,#6
001644  8030              STRH     r0,[r6,#0]
;;;2284   adc_self_ch_disp[1]=abs_pal(adc_self_ch_buff[2]-adc_self_ch_buff[1]);//adc_self_ch_buff[1]&0x0f80;
001646  88a0              LDRH     r0,[r4,#4]  ; adc_self_ch_buff
001648  8861              LDRH     r1,[r4,#2]  ; adc_self_ch_buff
00164a  1a40              SUBS     r0,r0,r1
00164c  b200              SXTH     r0,r0
00164e  f7fffffe          BL       abs_pal
001652  8070              STRH     r0,[r6,#2]
;;;2285   adc_self_ch_disp[2]=abs_pal(adc_self_ch_buff[2]-adc_self_ch_buff[0]);//adc_self_ch_buff[2]&0x0f80;
001654  88a0              LDRH     r0,[r4,#4]  ; adc_self_ch_buff
001656  8821              LDRH     r1,[r4,#0]  ; adc_self_ch_buff
001658  1a40              SUBS     r0,r0,r1
00165a  b200              SXTH     r0,r0
00165c  f7fffffe          BL       abs_pal
001660  80b0              STRH     r0,[r6,#4]
;;;2286   
;;;2287   //adc_self_ch_disp[0]=adc_self_ch_buff[0]&0x0ff0;
;;;2288   //adc_self_ch_disp[1]=adc_self_ch_buff[1]&0x0ff0;
;;;2289   //adc_self_ch_disp[2]=adc_self_ch_buff[2]&0x0ff0;
;;;2290   
;;;2291   
;;;2292   if(adc_self_ch_disp[2]<300)//==adc_self_ch_disp[2])
001662  f44f7196          MOV      r1,#0x12c
;;;2293   	{
;;;2294   	adc_result=adc_self_ch_buff[2];
001666  f1a40596          SUB      r5,r4,#0x96
00166a  4288              CMP      r0,r1                 ;2292
00166c  da02              BGE      |L1.5748|
00166e  88a0              LDRH     r0,[r4,#4]  ; adc_self_ch_buff
001670  8568              STRH     r0,[r5,#0x2a]
001672  e00c              B        |L1.5774|
                  |L1.5748|
;;;2295   	} 
;;;2296   else if(adc_self_ch_disp[1]<300)//==adc_self_ch_disp[2])
001674  f9b60002          LDRSH    r0,[r6,#2]  ; adc_self_ch_disp
001678  4288              CMP      r0,r1
00167a  da02              BGE      |L1.5762|
;;;2297   	{
;;;2298   	adc_result=adc_self_ch_buff[1];
00167c  8860              LDRH     r0,[r4,#2]  ; adc_self_ch_buff
00167e  8568              STRH     r0,[r5,#0x2a]
001680  e005              B        |L1.5774|
                  |L1.5762|
;;;2299   	}
;;;2300   else if(adc_self_ch_disp[0]<300)//==adc_self_ch_disp[1])
001682  f9b60000          LDRSH    r0,[r6,#0]  ; adc_self_ch_disp
001686  4288              CMP      r0,r1
001688  da01              BGE      |L1.5774|
;;;2301   	{
;;;2302   	adc_result=adc_self_ch_buff[0];
00168a  8820              LDRH     r0,[r4,#0]  ; adc_self_ch_buff
00168c  8568              STRH     r0,[r5,#0x2a]
                  |L1.5774|
;;;2303   	}
;;;2304       //adc_result=92;
;;;2305   
;;;2306   if(adc_ch_net)
00168e  78af              LDRB     r7,[r5,#2]  ; adc_ch_net
001690  2600              MOVS     r6,#0
001692  b32f              CBZ      r7,|L1.5856|
;;;2307   	{
;;;2308   
;;;2309   	main_power_buffer[0]+=(long)(adc_result);
001694  483d              LDR      r0,|L1.6028|
001696  f9b5102a          LDRSH    r1,[r5,#0x2a]  ; adc_result
00169a  6802              LDR      r2,[r0,#0]  ; main_power_buffer
00169c  440a              ADD      r2,r2,r1
00169e  6002              STR      r2,[r0,#0]  ; main_power_buffer
;;;2310   	main_power_buffer[1]+=(long)(adc_result);
0016a0  6842              LDR      r2,[r0,#4]  ; main_power_buffer
0016a2  440a              ADD      r2,r2,r1
0016a4  6042              STR      r2,[r0,#4]  ; main_power_buffer
;;;2311   	main_power_buffer[2]+=(long)(adc_result);
0016a6  6882              LDR      r2,[r0,#8]  ; main_power_buffer
0016a8  440a              ADD      r2,r2,r1
0016aa  6082              STR      r2,[r0,#8]  ; main_power_buffer
;;;2312   	main_power_buffer[3]+=(long)(adc_result);
0016ac  68c2              LDR      r2,[r0,#0xc]  ; main_power_buffer
0016ae  4411              ADD      r1,r1,r2
0016b0  60c1              STR      r1,[r0,#0xc]  ; main_power_buffer
;;;2313   
;;;2314   	adc_net_buff_cnt++;
0016b2  8e69              LDRH     r1,[r5,#0x32]  ; adc_net_buff_cnt
0016b4  f1010101          ADD      r1,r1,#1
0016b8  b209              SXTH     r1,r1
0016ba  8669              STRH     r1,[r5,#0x32]
;;;2315   	if(adc_net_buff_cnt>=0x1000)
0016bc  f5b15f80          CMP      r1,#0x1000
0016c0  db00              BLT      |L1.5828|
;;;2316   		{
;;;2317   		adc_net_buff_cnt=0;
0016c2  866e              STRH     r6,[r5,#0x32]
                  |L1.5828|
;;;2318   		}
;;;2319   	if((adc_net_buff_cnt&0x03ff)==0)
0016c4  f9b51032          LDRSH    r1,[r5,#0x32]  ; adc_net_buff_cnt
0016c8  058a              LSLS     r2,r1,#22
0016ca  d131              BNE      |L1.5936|
;;;2320   		{
;;;2321   		#ifdef UKU_220
;;;2322   		net_buff_=(short)((main_power_buffer[adc_net_buff_cnt>>10])>>11);
;;;2323   		#else
;;;2324   		#ifdef UKU_220_V2
;;;2325   		net_buff_=(short)((main_power_buffer[adc_net_buff_cnt>>10])>>11);
;;;2326   		#else
;;;2327   		net_buff_=(short)((main_power_buffer[adc_net_buff_cnt>>10])>>8);
0016cc  ea4f21a1          ASR      r1,r1,#10
0016d0  f8502021          LDR      r2,[r0,r1,LSL #2]
0016d4  ea4f2222          ASR      r2,r2,#8
0016d8  852a              STRH     r2,[r5,#0x28]
;;;2328   		#endif
;;;2329   		#endif
;;;2330   		main_power_buffer[adc_net_buff_cnt>>10]=0;
0016da  f8406021          STR      r6,[r0,r1,LSL #2]
0016de  e027              B        |L1.5936|
                  |L1.5856|
;;;2331   		}
;;;2332   
;;;2333   
;;;2334   	} 
;;;2335   else if(!adc_ch_net)
;;;2336   	{
;;;2337   	adc_buff[adc_ch][adc_ch_cnt]=(long)adc_result;
0016e0  482b              LDR      r0,|L1.6032|
0016e2  78ec              LDRB     r4,[r5,#3]  ; adc_ch
0016e4  792a              LDRB     r2,[r5,#4]  ; adc_ch_cnt
0016e6  eb001384          ADD      r3,r0,r4,LSL #6
0016ea  f9b5102a          LDRSH    r1,[r5,#0x2a]  ; adc_result
0016ee  f8431022          STR      r1,[r3,r2,LSL #2]
;;;2338   	
;;;2339   	if((adc_ch_cnt&0x03)==0)
0016f2  0790              LSLS     r0,r2,#30
0016f4  d10f              BNE      |L1.5910|
;;;2340   		{
;;;2341   		long temp_L;
;;;2342   		char i;
;;;2343   		temp_L=0;
0016f6  4601              MOV      r1,r0
                  |L1.5880|
;;;2344   		for(i=0;i<16;i++)
;;;2345   			{
;;;2346   			temp_L+=adc_buff[adc_ch][i];
0016f8  f853c020          LDR      r12,[r3,r0,LSL #2]
0016fc  4461              ADD      r1,r1,r12
0016fe  f1000001          ADD      r0,r0,#1              ;2344
001702  b2c0              UXTB     r0,r0                 ;2344
001704  2810              CMP      r0,#0x10              ;2344
001706  d3f7              BCC      |L1.5880|
;;;2347   			}
;;;2348   		adc_buff_[adc_ch]= (short)(temp_L>>4);
001708  ea4f1021          ASR      r0,r1,#4
00170c  491f              LDR      r1,|L1.6028|
00170e  f1a10120          SUB      r1,r1,#0x20
001712  f8210014          STRH     r0,[r1,r4,LSL #1]
                  |L1.5910|
;;;2349   
;;;2350   		//adc_buff_[3]=346;
;;;2351   		}
;;;2352   	if(++adc_ch>=16) 
001716  1c64              ADDS     r4,r4,#1
001718  b2e0              UXTB     r0,r4
00171a  70e8              STRB     r0,[r5,#3]
00171c  2810              CMP      r0,#0x10
00171e  d307              BCC      |L1.5936|
;;;2353   		{
;;;2354   		adc_ch=0;
001720  70ee              STRB     r6,[r5,#3]
;;;2355   		adc_ch_cnt++;
001722  f1020201          ADD      r2,r2,#1
001726  b2d0              UXTB     r0,r2
001728  7128              STRB     r0,[r5,#4]
;;;2356   		if(adc_ch_cnt>=16)adc_ch_cnt=0;
00172a  2810              CMP      r0,#0x10
00172c  d300              BCC      |L1.5936|
00172e  712e              STRB     r6,[r5,#4]
                  |L1.5936|
;;;2357   		}
;;;2358   	}
;;;2359   
;;;2360   //adc_buff[adc_ch][adc_cnt1]=(adc_self_ch_buff[2]+adc_self_ch_buff[1])/2;
;;;2361   
;;;2362   //if(adc_buff[adc_ch][adc_cnt1]<adc_buff_min[adc_ch])adc_buff_min[adc_ch]=adc_buff[adc_ch][adc_cnt1];
;;;2363   //if(adc_buff[adc_ch][adc_cnt1]>adc_buff_max[adc_ch])adc_buff_max[adc_ch]=adc_buff[adc_ch][adc_cnt1];
;;;2364   /*
;;;2365   	{
;;;2366   	if((adc_cnt1&0x03)==0)
;;;2367   		{
;;;2368   		temp_S=0;
;;;2369   		for(i=0;i<16;i++)
;;;2370   			{
;;;2371   			temp_S+=adc_buff[adc_ch][i];
;;;2372   			} 
;;;2373            	adc_buff_[adc_ch]=temp_S>>4;
;;;2374             }
;;;2375   	}*/
;;;2376   
;;;2377   
;;;2378   		  
;;;2379   
;;;2380   adc_self_ch_cnt=0;
001730  706e              STRB     r6,[r5,#1]
;;;2381   
;;;2382   adc_ch_net++;
001732  f1070701          ADD      r7,r7,#1
;;;2383   adc_ch_net&=1;
001736  f0070001          AND      r0,r7,#1
00173a  70a8              STRB     r0,[r5,#2]
;;;2384   
;;;2385   //SET_REG(LPC_GPIO0->FIODIR,7,5,3);
;;;2386   //SET_REG(LPC_GPIO0->FIOPIN,adc_ch,5,3);
;;;2387   
;;;2388   if(adc_ch_net)
;;;2389   	{
;;;2390   	//LPC_GPIO2->FIODIR|=(1<<7);
;;;2391   	//LPC_GPIO2->FIOPIN|=(1<<7);
;;;2392   	SET_REG(LPC_ADC->ADCR,1<<2,0,8);
00173c  4a10              LDR      r2,|L1.6016|
00173e  b130              CBZ      r0,|L1.5966|
001740  6810              LDR      r0,[r2,#0]
001742  f02000ff          BIC      r0,r0,#0xff
001746  f1000004          ADD      r0,r0,#4
00174a  6010              STR      r0,[r2,#0]
00174c  e060              B        |L1.6160|
                  |L1.5966|
00174e  e021              B        |L1.6036|
                  |L1.5968|
                          DCD      t_ext_can_nd
                  |L1.5972|
                          DCD      t_ext_can
                  |L1.5976|
                          DCD      BAT_IS_ON
                  |L1.5980|
                          DCD      load_I
                  |L1.5984|
                          DCD      Isumm
                  |L1.5988|
                          DCD      NUMINV
                  |L1.5992|
                          DCD      inv
                  |L1.5996|
                          DCD      a_ind
                  |L1.6000|
                          DCD      mnemo_cnt
                  |L1.6004|
                          DCD      MNEMO_ON
                  |L1.6008|
                          DCD      MNEMO_TIME
                  |L1.6012|
                          DCD      0x4002c000
                  |L1.6016|
                          DCD      0x40034000
                  |L1.6020|
                          DCD      0xe000e100
                  |L1.6024|
                          DCD      ||area_number.21||+0x96
                  |L1.6028|
                          DCD      ||.bss||+0x420
                  |L1.6032|
                          DCD      ||.bss||
                  |L1.6036|
;;;2393   	}
;;;2394   else
;;;2395   	{
;;;2396   	//LPC_GPIO2->FIODIR|=(1<<7);
;;;2397   	//LPC_GPIO2->FIOPIN&=~(1<<7);
;;;2398   	if(!(adc_ch&(1<<3)))SET_REG(LPC_ADC->ADCR,1<<0,0,8);
001794  78e9              LDRB     r1,[r5,#3]  ; adc_ch
001796  0708              LSLS     r0,r1,#28
001798  d406              BMI      |L1.6056|
00179a  6810              LDR      r0,[r2,#0]
00179c  f02000ff          BIC      r0,r0,#0xff
0017a0  f1000001          ADD      r0,r0,#1
0017a4  6010              STR      r0,[r2,#0]
0017a6  e005              B        |L1.6068|
                  |L1.6056|
;;;2399   	else 			SET_REG(LPC_ADC->ADCR,1<<1,0,8);
0017a8  6810              LDR      r0,[r2,#0]
0017aa  f02000ff          BIC      r0,r0,#0xff
0017ae  f1000002          ADD      r0,r0,#2
0017b2  6010              STR      r0,[r2,#0]
                  |L1.6068|
;;;2400   
;;;2401   
;;;2402   	SET_REG(LPC_GPIO0->FIODIR,1,28,1);
0017b4  48fc              LDR      r0,|L1.7080|
0017b6  6803              LDR      r3,[r0,#0]
0017b8  f0435380          ORR      r3,r3,#0x10000000
0017bc  6003              STR      r3,[r0,#0]
;;;2403   	SET_REG(LPC_GPIO1->FIODIR,1,30,1);
0017be  6a03              LDR      r3,[r0,#0x20]
0017c0  f0434380          ORR      r3,r3,#0x40000000
0017c4  6203              STR      r3,[r0,#0x20]
;;;2404   	SET_REG(LPC_GPIO3->FIODIR,1,26,1);
0017c6  6e03              LDR      r3,[r0,#0x60]
0017c8  f0436380          ORR      r3,r3,#0x4000000
0017cc  6603              STR      r3,[r0,#0x60]
;;;2405   
;;;2406   	if(!(adc_ch&(1<<0)))SET_REG(LPC_GPIO0->FIOPIN,0,28,1);
0017ce  07cb              LSLS     r3,r1,#31
0017d0  d00a              BEQ      |L1.6120|
;;;2407   	else 			SET_REG(LPC_GPIO0->FIOPIN,1,28,1);
0017d2  6943              LDR      r3,[r0,#0x14]
0017d4  f0435380          ORR      r3,r3,#0x10000000
0017d8  6143              STR      r3,[r0,#0x14]
                  |L1.6106|
;;;2408   
;;;2409   	if(!(adc_ch&(1<<1)))SET_REG(LPC_GPIO1->FIOPIN,0,30,1);
0017da  078b              LSLS     r3,r1,#30
0017dc  d409              BMI      |L1.6130|
0017de  6b43              LDR      r3,[r0,#0x34]
0017e0  f0234380          BIC      r3,r3,#0x40000000
0017e4  6343              STR      r3,[r0,#0x34]
0017e6  e008              B        |L1.6138|
                  |L1.6120|
0017e8  6943              LDR      r3,[r0,#0x14]         ;2406
0017ea  f0235380          BIC      r3,r3,#0x10000000     ;2406
0017ee  6143              STR      r3,[r0,#0x14]         ;2406
0017f0  e7f3              B        |L1.6106|
                  |L1.6130|
;;;2410   	else 			SET_REG(LPC_GPIO1->FIOPIN,1,30,1);
0017f2  6b43              LDR      r3,[r0,#0x34]
0017f4  f0434380          ORR      r3,r3,#0x40000000
0017f8  6343              STR      r3,[r0,#0x34]
                  |L1.6138|
;;;2411   
;;;2412   	if(!(adc_ch&(1<<2)))SET_REG(LPC_GPIO3->FIOPIN,0,26,1);
0017fa  0749              LSLS     r1,r1,#29
0017fc  d404              BMI      |L1.6152|
0017fe  6f41              LDR      r1,[r0,#0x74]
001800  f0216180          BIC      r1,r1,#0x4000000
001804  6741              STR      r1,[r0,#0x74]
001806  e003              B        |L1.6160|
                  |L1.6152|
;;;2413   	else 			SET_REG(LPC_GPIO3->FIOPIN,1,26,1);
001808  6f41              LDR      r1,[r0,#0x74]
00180a  f0416180          ORR      r1,r1,#0x4000000
00180e  6741              STR      r1,[r0,#0x74]
                  |L1.6160|
;;;2414   	}
;;;2415   	
;;;2416   
;;;2417   
;;;2418   
;;;2419   LPC_ADC->ADCR |=  (1<<24);
001810  6810              LDR      r0,[r2,#0]
001812  f0407080          ORR      r0,r0,#0x1000000
001816  6010              STR      r0,[r2,#0]
                  |L1.6168|
;;;2420   
;;;2421   }
001818  e8bd81f0          POP      {r4-r8,pc}
;;;2422   
                          ENDP

                  avg_hndl PROC
;;;2679   //-----------------------------------------------
;;;2680   void avg_hndl(void)
00181c  b5f0              PUSH     {r4-r7,lr}
;;;2681   { 
;;;2682   char i;
;;;2683   
;;;2684   //#define AVGCNTMAX	5
;;;2685   if(avg_main_cnt)
00181e  4ce3              LDR      r4,|L1.7084|
001820  f9b40020          LDRSH    r0,[r4,#0x20]  ; avg_main_cnt
001824  b118              CBZ      r0,|L1.6190|
;;;2686   	{
;;;2687   	avg_main_cnt--;
001826  f1a00001          SUB      r0,r0,#1
00182a  8420              STRH     r0,[r4,#0x20]
;;;2688   	goto avg_hndl_end;
00182c  e090              B        |L1.6480|
                  |L1.6190|
;;;2689   	}                 
;;;2690   
;;;2691   avg_num=0;
00182e  f04f0500          MOV      r5,#0
001832  72e5              STRB     r5,[r4,#0xb]
;;;2692   
;;;2693   for(i=0;i<NUMIST;i++)
001834  4628              MOV      r0,r5
001836  49df              LDR      r1,|L1.7092|
;;;2694   	{
;;;2695   	if((bps[i]._state==bsWRK)&&(bps[i]._cnt<20))avg_num++;
001838  4bdd              LDR      r3,|L1.7088|
00183a  f9b12000          LDRSH    r2,[r1,#0]            ;2693
00183e  e012              B        |L1.6246|
                  |L1.6208|
001840  ebc001c0          RSB      r1,r0,r0,LSL #3
001844  eb011100          ADD      r1,r1,r0,LSL #4
001848  eb030181          ADD      r1,r3,r1,LSL #2
00184c  788e              LDRB     r6,[r1,#2]
00184e  2e01              CMP      r6,#1
001850  d106              BNE      |L1.6240|
001852  78c9              LDRB     r1,[r1,#3]
001854  2914              CMP      r1,#0x14
001856  d203              BCS      |L1.6240|
001858  7ae1              LDRB     r1,[r4,#0xb]  ; avg_num
00185a  f1010101          ADD      r1,r1,#1
00185e  72e1              STRB     r1,[r4,#0xb]
                  |L1.6240|
001860  f1000001          ADD      r0,r0,#1              ;2693
001864  b2c0              UXTB     r0,r0                 ;2693
                  |L1.6246|
001866  4290              CMP      r0,r2                 ;2693
001868  dbea              BLT      |L1.6208|
;;;2696   	}
;;;2697   
;;;2698   /*if((K[NUMI]>=1)&&(bps_state[0]==ssWRK))	avg_num++;
;;;2699   if((K[NUMI]>=2)&&(bps_state[1]==ssWRK))	avg_num++;
;;;2700   if((K[NUMI]>=3)&&(bps_state[2]==ssWRK))	avg_num++;*/
;;;2701   
;;;2702   	
;;;2703   if(avg_num<2)
00186a  7ae6              LDRB     r6,[r4,#0xb]  ; avg_num
00186c  2e02              CMP      r6,#2
00186e  d36f              BCC      |L1.6480|
;;;2704   	{
;;;2705   	goto avg_hndl_end;
;;;2706   	}
;;;2707   	
;;;2708   else
;;;2709   	{
;;;2710   	i_avg_min=5000;
001870  f2413088          MOV      r0,#0x1388
001874  6760              STR      r0,[r4,#0x74]  ; i_avg_min
;;;2711   	i_avg_max=0;
001876  6725              STR      r5,[r4,#0x70]  ; i_avg_max
;;;2712   	i_avg_summ=0;
001878  67a5              STR      r5,[r4,#0x78]  ; i_avg_summ
;;;2713   	for(i=0;i<NUMIST;i++)
00187a  f04f0100          MOV      r1,#0
00187e  e017              B        |L1.6320|
                  |L1.6272|
;;;2714   		{
;;;2715   		if(bps[i]._state==bsWRK)
001880  ebc100c1          RSB      r0,r1,r1,LSL #3
001884  eb001001          ADD      r0,r0,r1,LSL #4
001888  eb030080          ADD      r0,r3,r0,LSL #2
00188c  7887              LDRB     r7,[r0,#2]
00188e  2f01              CMP      r7,#1
001890  d10b              BNE      |L1.6314|
;;;2716   			{
;;;2717   			if(bps[i]._Ii>i_avg_max)i_avg_max=bps[i]._Ii;
001892  6a40              LDR      r0,[r0,#0x24]
001894  6f27              LDR      r7,[r4,#0x70]  ; i_avg_max
001896  42b8              CMP      r0,r7
001898  dd00              BLE      |L1.6300|
00189a  6720              STR      r0,[r4,#0x70]  ; i_avg_max
                  |L1.6300|
;;;2718   			if(bps[i]._Ii<i_avg_min)i_avg_min=bps[i]._Ii;
00189c  6f67              LDR      r7,[r4,#0x74]  ; i_avg_min
00189e  42b8              CMP      r0,r7
0018a0  da00              BGE      |L1.6308|
0018a2  6760              STR      r0,[r4,#0x74]  ; i_avg_min
                  |L1.6308|
;;;2719   			
;;;2720   			i_avg_summ+=bps[i]._Ii;
0018a4  6fa7              LDR      r7,[r4,#0x78]  ; i_avg_summ
0018a6  4438              ADD      r0,r0,r7
0018a8  67a0              STR      r0,[r4,#0x78]  ; i_avg_summ
                  |L1.6314|
0018aa  f1010101          ADD      r1,r1,#1              ;2713
0018ae  b2c9              UXTB     r1,r1                 ;2713
                  |L1.6320|
0018b0  4291              CMP      r1,r2                 ;2713
0018b2  dbe5              BLT      |L1.6272|
;;;2721   			}
;;;2722   		}
;;;2723   	i_avg=i_avg_summ/avg_num;	
0018b4  6fa0              LDR      r0,[r4,#0x78]  ; i_avg_summ
0018b6  fb90f6f6          SDIV     r6,r0,r6
0018ba  67e6              STR      r6,[r4,#0x7c]  ; i_avg
;;;2724   	
;;;2725   	if(i_avg_min==0)i_avg_min=1;
0018bc  6f60              LDR      r0,[r4,#0x74]  ; i_avg_min
0018be  2101              MOVS     r1,#1                 ;2695
0018c0  b900              CBNZ     r0,|L1.6340|
0018c2  6761              STR      r1,[r4,#0x74]  ; i_avg_min
                  |L1.6340|
;;;2726   
;;;2727   	avg=i_avg_max;
0018c4  4fb9              LDR      r7,|L1.7084|
0018c6  6f20              LDR      r0,[r4,#0x70]  ; i_avg_max
0018c8  3780              ADDS     r7,r7,#0x80
;;;2728   	avg*=100;
0018ca  f04f0c64          MOV      r12,#0x64
0018ce  fb00f00c          MUL      r0,r0,r12
;;;2729   	avg/=i_avg_min;
0018d2  f8d4c074          LDR      r12,[r4,#0x74]  ; i_avg_min
0018d6  fb90f0fc          SDIV     r0,r0,r12
0018da  6038              STR      r0,[r7,#0]  ; avg
;;;2730   
;;;2731   	if(avg>160) bAVG=1;
0018dc  28a0              CMP      r0,#0xa0
0018de  dd00              BLE      |L1.6370|
0018e0  72a1              STRB     r1,[r4,#0xa]
                  |L1.6370|
;;;2732   	if(avg<120) bAVG=0;
0018e2  2878              CMP      r0,#0x78
0018e4  da00              BGE      |L1.6376|
0018e6  72a5              STRB     r5,[r4,#0xa]
                  |L1.6376|
;;;2733   
;;;2734   	if(bAVG==1)
0018e8  7aa0              LDRB     r0,[r4,#0xa]  ; bAVG
0018ea  2801              CMP      r0,#1
0018ec  d130              BNE      |L1.6480|
;;;2735   		{
;;;2736   		for(i=0;i<NUMIST;i++)
0018ee  f04f0100          MOV      r1,#0
;;;2737   			{
;;;2738   			if(bps[i]._state==bsWRK)
;;;2739   				{
;;;2740   				if(bps[i]._Ii>i_avg)bps[i]._x_--;
;;;2741   				if(bps[i]._Ii<i_avg)bps[i]._x_++;
;;;2742   			
;;;2743   				if(bps[i]._x_<-50)bps[i]._x_=-50;
0018f2  f06f0431          MVN      r4,#0x31
0018f6  e029              B        |L1.6476|
                  |L1.6392|
0018f8  ebc100c1          RSB      r0,r1,r1,LSL #3       ;2738
0018fc  eb001001          ADD      r0,r0,r1,LSL #4       ;2738
001900  eb030080          ADD      r0,r3,r0,LSL #2       ;2738
001904  7885              LDRB     r5,[r0,#2]            ;2738
001906  2d01              CMP      r5,#1                 ;2738
001908  d11d              BNE      |L1.6470|
00190a  6a45              LDR      r5,[r0,#0x24]         ;2740
00190c  42b5              CMP      r5,r6                 ;2740
00190e  dd05              BLE      |L1.6428|
001910  f8b05050          LDRH     r5,[r0,#0x50]         ;2740
001914  f1a50501          SUB      r5,r5,#1              ;2740
001918  f8a05050          STRH     r5,[r0,#0x50]         ;2740
                  |L1.6428|
00191c  da05              BGE      |L1.6442|
00191e  f8b05050          LDRH     r5,[r0,#0x50]         ;2741
001922  f1050501          ADD      r5,r5,#1              ;2741
001926  f8a05050          STRH     r5,[r0,#0x50]         ;2741
                  |L1.6442|
00192a  f9b05050          LDRSH    r5,[r0,#0x50]
00192e  42a5              CMP      r5,r4
001930  da01              BGE      |L1.6454|
001932  f8a04050          STRH     r4,[r0,#0x50]
                  |L1.6454|
;;;2744   				if(bps[i]._x_>50)bps[i]._x_=50;	
001936  f9b05050          LDRSH    r5,[r0,#0x50]
00193a  2d32              CMP      r5,#0x32
00193c  dd03              BLE      |L1.6470|
00193e  f04f0532          MOV      r5,#0x32
001942  f8a05050          STRH     r5,[r0,#0x50]
                  |L1.6470|
001946  f1010101          ADD      r1,r1,#1              ;2736
00194a  b2c9              UXTB     r1,r1                 ;2736
                  |L1.6476|
00194c  4291              CMP      r1,r2                 ;2736
00194e  dbd3              BLT      |L1.6392|
                  |L1.6480|
;;;2745   				}
;;;2746   			}		
;;;2747   		}			
;;;2748   	}   	 
;;;2749   
;;;2750   
;;;2751   avg_hndl_end:
;;;2752   __nop();  
001950  bf00              NOP      
;;;2753   }
001952  bdf0              POP      {r4-r7,pc}
;;;2754   
                          ENDP

                  rele_hndl PROC
;;;2767   //*************-----------------------------------------------
;;;2768   void rele_hndl(void)
001954  e92d41f0          PUSH     {r4-r8,lr}
;;;2769   {
;;;2770   //static char cnt_rel_sam;
;;;2771   //char temp;
;;;2772   
;;;2773   //temp=0;
;;;2774   
;;;2775   
;;;2776   SET_REG(LPC_PINCON->PINSEL0,0,4*2,6*2);
001958  4897              LDR      r0,|L1.7096|
00195a  6801              LDR      r1,[r0,#0]
00195c  4a97              LDR      r2,|L1.7100|
00195e  ea010102          AND      r1,r1,r2
001962  6001              STR      r1,[r0,#0]
;;;2777   SET_REG(LPC_GPIO0->FIODIR,63,4,6);
001964  4c90              LDR      r4,|L1.7080|
001966  6821              LDR      r1,[r4,#0]
001968  f441717c          ORR      r1,r1,#0x3f0
00196c  6021              STR      r1,[r4,#0]
;;;2778   SET_REG(LPC_PINCON->PINSEL7,0,(25-16)*2,2);
00196e  69c1              LDR      r1,[r0,#0x1c]
001970  f4212140          BIC      r1,r1,#0xc0000
001974  61c1              STR      r1,[r0,#0x1c]
;;;2779   SET_REG(LPC_GPIO3->FIODIR,1,25,1);
001976  6e21              LDR      r1,[r4,#0x60]
001978  f0417100          ORR      r1,r1,#0x2000000
00197c  6621              STR      r1,[r4,#0x60]
;;;2780   SET_REG(LPC_PINCON->PINSEL1,0,(29-16)*2,2);
00197e  6841              LDR      r1,[r0,#4]
001980  f0216140          BIC      r1,r1,#0xc000000
001984  6041              STR      r1,[r0,#4]
;;;2781   SET_REG(LPC_GPIO0->FIODIR,1,29,1);
001986  6820              LDR      r0,[r4,#0]
001988  f0405000          ORR      r0,r0,#0x20000000
00198c  6020              STR      r0,[r4,#0]
;;;2782   
;;;2783   
;;;2784   
;;;2785   
;;;2786   
;;;2787   
;;;2788   if((((bat[0]._rel_stat)  || (tbatdisable_stat!=tbdsON))&&(tbatdisable_cmnd))	&& (main_1Hz_cnt>5))
00198e  488d              LDR      r0,|L1.7108|
001990  4d8b              LDR      r5,|L1.7104|
001992  498e              LDR      r1,|L1.7116|
001994  7802              LDRB     r2,[r0,#0]  ; tbatdisable_stat
001996  488c              LDR      r0,|L1.7112|
001998  f895303c          LDRB     r3,[r5,#0x3c]  ; bat
00199c  f9b11000          LDRSH    r1,[r1,#0]
0019a0  7800              LDRB     r0,[r0,#0]
0019a2  4313              ORRS     r3,r3,r2
0019a4  d007              BEQ      |L1.6582|
0019a6  b130              CBZ      r0,|L1.6582|
0019a8  2905              CMP      r1,#5
0019aa  dd04              BLE      |L1.6582|
;;;2789   	{
;;;2790   	SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_BAT1,1);
0019ac  69a3              LDR      r3,[r4,#0x18]
0019ae  f4437380          ORR      r3,r3,#0x100
0019b2  61a3              STR      r3,[r4,#0x18]
0019b4  e003              B        |L1.6590|
                  |L1.6582|
;;;2791   	}
;;;2792   else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_BAT1,1);	  	
0019b6  69e3              LDR      r3,[r4,#0x1c]
0019b8  f4437380          ORR      r3,r3,#0x100
0019bc  61e3              STR      r3,[r4,#0x1c]
                  |L1.6590|
;;;2793   
;;;2794   if((((bat[1]._rel_stat) || (tbatdisable_stat!=tbdsON))&&(tbatdisable_cmnd))	&& (main_1Hz_cnt>5))
0019be  f8953088          LDRB     r3,[r5,#0x88]  ; bat
0019c2  4313              ORRS     r3,r3,r2
0019c4  d007              BEQ      |L1.6614|
0019c6  b130              CBZ      r0,|L1.6614|
0019c8  2905              CMP      r1,#5
0019ca  dd04              BLE      |L1.6614|
;;;2795   	{
;;;2796   	SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_BAT2,1);
0019cc  69a0              LDR      r0,[r4,#0x18]
0019ce  f0400040          ORR      r0,r0,#0x40
0019d2  61a0              STR      r0,[r4,#0x18]
0019d4  e003              B        |L1.6622|
                  |L1.6614|
;;;2797   	}
;;;2798   else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_BAT2,1);
0019d6  69e0              LDR      r0,[r4,#0x1c]
0019d8  f0400040          ORR      r0,r0,#0x40
0019dc  61e0              STR      r0,[r4,#0x1c]
                  |L1.6622|
;;;2799   
;;;2800   
;;;2801   if(mess_find_unvol((MESS2RELE_HNDL))&&(mess_data[0]==PARAM_RELE_SAMOKALIBR)) 
0019de  20d2              MOVS     r0,#0xd2
0019e0  f7fffffe          BL       mess_find_unvol
0019e4  4d7a              LDR      r5,|L1.7120|
0019e6  b110              CBZ      r0,|L1.6638|
0019e8  6828              LDR      r0,[r5,#0]  ; mess_data
0019ea  2864              CMP      r0,#0x64
0019ec  d048              BEQ      |L1.6784|
                  |L1.6638|
;;;2802   	{
;;;2803   	if(mess_data[1]==1)SET_REG(LPC_GPIO0->FIOSET,1,29,1);
;;;2804   	else if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,29,1);
;;;2805   	}
;;;2806   else SET_REG(LPC_GPIO0->FIOCLR,1,29,1);
0019ee  69e0              LDR      r0,[r4,#0x1c]
0019f0  f0405000          ORR      r0,r0,#0x20000000
0019f4  61e0              STR      r0,[r4,#0x1c]
                  |L1.6646|
;;;2807   
;;;2808   
;;;2809   #ifndef UKU2071x
;;;2810   //  
;;;2811   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_NET))
;;;2812   	{
;;;2813   	if(mess_data[1]==0) 			SET_REG(LPC_GPIO3->FIOSET,1,SHIFT_REL_AV_NET,1);
;;;2814   	else 						SET_REG(LPC_GPIO3->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;2815   	}
;;;2816   else	if(!(avar_ind_stat&0x00000001)) 	SET_REG(LPC_GPIO3->FIOSET,1,SHIFT_REL_AV_NET,1);
;;;2817   else 							SET_REG(LPC_GPIO3->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;2818   #endif
;;;2819   #ifdef UKU2071x
;;;2820   //  
;;;2821   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_NET))
0019f6  20d2              MOVS     r0,#0xd2
0019f8  f7fffffe          BL       mess_find_unvol
;;;2822   	{
;;;2823   	if(mess_data[1]==0)				SET_REG(LPC_GPIO3->FIOCLR,1,SHIFT_REL_AV_NET,1); 
;;;2824   	else 						SET_REG(LPC_GPIO3->FIOSET,1,SHIFT_REL_AV_NET,1);
;;;2825   	}
;;;2826   else	if(!(avar_ind_stat&0x00000001))	SET_REG(LPC_GPIO3->FIOCLR,1,SHIFT_REL_AV_NET,1);
0019fc  4e75              LDR      r6,|L1.7124|
0019fe  b110              CBZ      r0,|L1.6662|
001a00  6828              LDR      r0,[r5,#0]            ;2821  ; mess_data
001a02  2866              CMP      r0,#0x66              ;2821
001a04  d04b              BEQ      |L1.6814|
                  |L1.6662|
001a06  6830              LDR      r0,[r6,#0]  ; avar_ind_stat
001a08  07c0              LSLS     r0,r0,#31
001a0a  d054              BEQ      |L1.6838|
;;;2827   else 					  		SET_REG(LPC_GPIO3->FIOSET,1,SHIFT_REL_AV_NET,1);
001a0c  6fa0              LDR      r0,[r4,#0x78]
001a0e  f0407000          ORR      r0,r0,#0x2000000
001a12  67a0              STR      r0,[r4,#0x78]
                  |L1.6676|
;;;2828   #endif
;;;2829   
;;;2830   #ifdef UKU_3U
;;;2831   //  
;;;2832   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BAT1))
;;;2833   	{
;;;2834   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT1,1);
;;;2835   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT1,1);
;;;2836        }
;;;2837   else 
;;;2838   	{
;;;2839   	if(!(avar_ind_stat&0x00000002)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT1,1);
;;;2840        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT1,1);
;;;2841   	} 
;;;2842   
;;;2843   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BAT2))
;;;2844   	{
;;;2845   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT2,1);
;;;2846   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT2,1);
;;;2847        }
;;;2848   else 
;;;2849   	{
;;;2850   	if(!(avar_ind_stat&0x00000004)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT2,1);
;;;2851        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT2,1);
;;;2852   	} 
;;;2853   
;;;2854   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BPS))
;;;2855   	{
;;;2856   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
;;;2857   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
;;;2858        }
;;;2859   else 
;;;2860   	{
;;;2861   	if(!(avar_ind_stat&0x000007f8)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
;;;2862        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
;;;2863   	} 
;;;2864   
;;;2865   #endif
;;;2866   
;;;2867   
;;;2868   #ifdef UKU_GLONASS
;;;2869   //  
;;;2870   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BAT1))
;;;2871   	{
;;;2872   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT1,1);
;;;2873   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT1,1);
;;;2874        }
;;;2875   else 
;;;2876   	{
;;;2877   	if(!(avar_ind_stat&0x00000002)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT1,1);
;;;2878        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT1,1);
;;;2879   	} 
;;;2880   
;;;2881   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BAT2))
;;;2882   	{
;;;2883   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT2,1);
;;;2884   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT2,1);
;;;2885        }
;;;2886   else 
;;;2887   	{
;;;2888   	if(!(avar_ind_stat&0x00000004)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT2,1);
;;;2889        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT2,1);
;;;2890   	} 
;;;2891   
;;;2892   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BPS))
;;;2893   	{
;;;2894   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
;;;2895   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
;;;2896        }
;;;2897   else 
;;;2898   	{
;;;2899   	if(!(avar_ind_stat&0x000007f8)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
;;;2900        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
;;;2901   	} 
;;;2902   
;;;2903   #endif
;;;2904   
;;;2905   #ifdef U 
;;;2906   
;;;2907   #endif
;;;2908   
;;;2909   #ifdef UKU_RSTKM
;;;2910   
;;;2911   //  
;;;2912   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_COMM))
;;;2913   	{
;;;2914   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_COMM,1);
;;;2915   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_COMM,1);
;;;2916   	}
;;;2917   else 
;;;2918   	{
;;;2919        if(  (!(avar_ind_stat&0x00007fff))/* &&
;;;2920             ((!SK_REL_EN[0]) || (sk_av_stat[0]!=sasON))  &&
;;;2921             ((!SK_REL_EN[1]) || (sk_av_stat[1]!=sasON))  &&
;;;2922             ((!SK_REL_EN[2]) || (sk_av_stat[2]!=sasON))  &&
;;;2923             ((!SK_REL_EN[3]) || (sk_av_stat[3]!=sasON))*/  )SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_COMM,1);
;;;2924        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_COMM,1);
;;;2925   	}
;;;2926   	
;;;2927   
;;;2928   // 
;;;2929   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_LIGHT))
;;;2930   	{
;;;2931   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LIGHT,1);
;;;2932   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LIGHT,1);
;;;2933        }
;;;2934   else 
;;;2935   	{
;;;2936   	if(sk_av_stat[0]!=sasON) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LIGHT,1);
;;;2937        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LIGHT,1);
;;;2938   	}
;;;2939   
;;;2940   
;;;2941   //  
;;;2942   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_LOAD_OFF))
;;;2943   	{
;;;2944   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LOAD_OFF,1);
;;;2945   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LOAD_OFF,1);
;;;2946        }
;;;2947   else if(tloaddisable_cmnd==0)
;;;2948   	{
;;;2949   	SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LOAD_OFF,1);
;;;2950   	}
;;;2951   else if((tloaddisable_cmnd)&&(tloaddisable_cmnd<=11))
;;;2952   	{
;;;2953   	SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LOAD_OFF,1);
;;;2954   	}
;;;2955   
;;;2956   else 
;;;2957   	{
;;;2958   	if(!(tloaddisable_stat==tldsON)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LOAD_OFF,1);
;;;2959        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LOAD_OFF,1);
;;;2960   	} 
;;;2961   
;;;2962   //  
;;;2963   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_VENT))
;;;2964   	{
;;;2965   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;2966   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT,1);
;;;2967   	}
;;;2968   else 
;;;2969   	{
;;;2970   	if(mixer_vent_stat==mvsOFF) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;2971        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT,1);
;;;2972   	} 
;;;2973   
;;;2974   #endif
;;;2975   
;;;2976   #ifdef UKU_KONTUR
;;;2977   
;;;2978   //  
;;;2979   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_COMM))
;;;2980   	{
;;;2981   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_COMM,1);
;;;2982   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_COMM,1);
;;;2983   	}
;;;2984   else 
;;;2985   	{
;;;2986        if(  (!(avar_ind_stat&0x00007fff)) &&
;;;2987             ((!SK_REL_EN[0]) || (sk_av_stat[0]!=sasON))  &&
;;;2988             ((!SK_REL_EN[1]) || (sk_av_stat[1]!=sasON))  &&
;;;2989             ((!SK_REL_EN[2]) || (sk_av_stat[2]!=sasON))  /*&&
;;;2990             ((!SK_REL_EN[3]) || (sk_av_stat[3]!=sasON))*/  )SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_COMM,1);
;;;2991        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_COMM,1);
;;;2992   	}
;;;2993   
;;;2994   	
;;;2995   //rel_warm_plazma=0;
;;;2996   //    
;;;2997   /*
;;;2998   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_WARM))
;;;2999   	{
;;;3000   	if(mess_data[1]==0)
;;;3001   		{
;;;3002   		SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_WARM,1);
;;;3003   		rel_warm_plazma=1;
;;;3004   		}
;;;3005   	else if(mess_data[1]==1) 
;;;3006   		{
;;;3007   		SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_WARM,1);
;;;3008   		rel_warm_plazma=2;
;;;3009   		}
;;;3010        }
;;;3011   else 
;;;3012   	{
;;;3013   	if(warm_stat_k==wsOFF) 
;;;3014   		{
;;;3015   		SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_WARM,1);
;;;3016   		rel_warm_plazma=3;
;;;3017   		}
;;;3018        else 
;;;3019   		{
;;;3020   		SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_WARM,1);
;;;3021   		rel_warm_plazma=4;
;;;3022   		}
;;;3023   	}
;;;3024   */
;;;3025   // 
;;;3026   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_LIGHT))
;;;3027   	{
;;;3028   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LIGHT,1);
;;;3029   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LIGHT,1);
;;;3030        }
;;;3031   else 
;;;3032   	{
;;;3033   	if(sk_av_stat[0]!=sasON) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LIGHT,1);
;;;3034        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LIGHT,1);
;;;3035   	}
;;;3036   
;;;3037   
;;;3038   
;;;3039   //  
;;;3040   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_LOAD_OFF))
;;;3041   	{
;;;3042   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LOAD_OFF,1);
;;;3043   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LOAD_OFF,1);
;;;3044        }
;;;3045   else if(tloaddisable_cmnd==0)
;;;3046   	{
;;;3047   	SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LOAD_OFF,1);
;;;3048   	}
;;;3049   else if((tloaddisable_cmnd)&&(tloaddisable_cmnd<=11))
;;;3050   	{
;;;3051   	SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LOAD_OFF,1);
;;;3052   	}
;;;3053   
;;;3054   else 
;;;3055   	{
;;;3056   	if(!(tloaddisable_stat==tldsON)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LOAD_OFF,1);
;;;3057        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LOAD_OFF,1);
;;;3058   	} 
;;;3059   
;;;3060   //    
;;;3061   if(RELE_LOG)
;;;3062   	{
;;;3063   	if((mess_find_unvol(MESS2RELE_HNDL))&&(mess_data[0]==PARAM_RELE_VENT_WARM))
;;;3064   		{
;;;3065   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT_WARM,1);
;;;3066   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT_WARM,1);
;;;3067   		}
;;;3068   	else 
;;;3069   		{
;;;3070   		if(warm_stat_k==wsOFF) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT_WARM,1);
;;;3071   	     else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT_WARM,1);
;;;3072   		} 
;;;3073   
;;;3074   	}
;;;3075   else 
;;;3076   	{
;;;3077   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_VENT_WARM))
;;;3078   		{
;;;3079   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT_WARM,1);
;;;3080   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT_WARM,1);
;;;3081   		}
;;;3082   	else 
;;;3083   		{
;;;3084   		if(vent_stat_k==vsOFF) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT_WARM,1);
;;;3085   	     else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT_WARM,1);
;;;3086   		} 
;;;3087   	}
;;;3088   #endif
;;;3089   
;;;3090   #ifdef UKU_6U
;;;3091   //  
;;;3092   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BAT1))
;;;3093   	{
;;;3094   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT1,1);
;;;3095   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT1,1);
;;;3096        }
;;;3097   else 
;;;3098   	{
;;;3099   	if(!(avar_ind_stat&0x00000002)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT1,1);
;;;3100        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT1,1);
;;;3101   	} 
;;;3102   
;;;3103   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BAT2))
;;;3104   	{
;;;3105   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT2,1);
;;;3106   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT2,1);
;;;3107       }
;;;3108   else if(NPN_OUT==npnoRELEAVBAT2)
;;;3109   	{
;;;3110   	if(npn_stat==npnsOFF)//&&(mess_find_unvol(MESS2RELE_HNDL))&&(mess_data[0]==PARAM_RELE_NPN))
;;;3111   		{
;;;3112   		/*if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT2,1);
;;;3113   		else if(mess_data[1]==1)*/ SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT2,1);
;;;3114        	}
;;;3115   	else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT2,1);
;;;3116   	}
;;;3117   else 
;;;3118   	{
;;;3119   	if(!(avar_ind_stat&0x00000004)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT2,1);
;;;3120       else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT2,1);
;;;3121   	} 
;;;3122   
;;;3123   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BPS))
;;;3124   	{
;;;3125   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
;;;3126   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
;;;3127        }
;;;3128   else 
;;;3129   	{
;;;3130   	if(!(avar_ind_stat&0x000007f8)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
;;;3131        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
;;;3132   	} 
;;;3133   
;;;3134   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_VENT))
;;;3135   	{
;;;3136   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT,1);
;;;3137   	else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;3138   	}
;;;3139   else if((NPN_OUT==npnoRELEVENT))
;;;3140   	{
;;;3141   	if(npn_stat==npnsOFF)//&&(mess_find_unvol(MESS2RELE_HNDL))&&(mess_data[0]==PARAM_RELE_NPN))
;;;3142   		{
;;;3143   		/*if(mess_data[1]==0)*/ SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;3144   		//else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;3145       	}
;;;3146   	else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT,1);
;;;3147   	}
;;;3148   else 
;;;3149   	{
;;;3150   	if(!vent_stat) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT,1);
;;;3151   	else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;3152   	}
;;;3153   
;;;3154   #endif
;;;3155   
;;;3156   #ifdef UKU_220
;;;3157   //  
;;;3158   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BAT))
;;;3159   	{
;;;3160   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT,1);
;;;3161   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT,1);
;;;3162        }
;;;3163   else 
;;;3164   	{
;;;3165   	if(!(avar_ind_stat&0x00000002)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT,1);
;;;3166        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT,1);
;;;3167   	} 
;;;3168   
;;;3169   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BPS))
;;;3170   	{
;;;3171   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
;;;3172   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
;;;3173        }
;;;3174   else 
;;;3175   	{
;;;3176   	if(!(avar_ind_stat&0x000007f8)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
;;;3177        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
;;;3178   	} 
;;;3179   
;;;3180   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_VENT))
;;;3181   	{
;;;3182   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT,1);
;;;3183   	else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;3184   	}
;;;3185   else 
;;;3186   	{
;;;3187   	if((RELE_VENT_LOGIC==0)||(RELE_VENT_LOGIC==1))
;;;3188   		{
;;;3189   		if(vent_stat) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT,1);
;;;3190   		else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;3191   		}
;;;3192   	else 
;;;3193   		{
;;;3194   		if((avar_ind_stat&0x00000004)) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT,1);
;;;3195        	else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;3196   		}
;;;3197   	}
;;;3198   
;;;3199   #endif
;;;3200   
;;;3201   #ifdef UKU_220_V2
;;;3202   //  
;;;3203   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BAT))
;;;3204   	{
;;;3205   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT,1);
;;;3206   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT,1);
;;;3207        }
;;;3208   else 
;;;3209   	{
;;;3210   	if(!(avar_ind_stat&0x00000002)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT,1);
;;;3211        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT,1);
;;;3212   	} 
;;;3213   
;;;3214   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BPS))
;;;3215   	{
;;;3216   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
;;;3217   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
;;;3218        }
;;;3219   else 
;;;3220   	{
;;;3221   	if(!(avar_ind_stat&0x000007f8)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
;;;3222        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
;;;3223   	} 
;;;3224   
;;;3225   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_VENT))
;;;3226   	{
;;;3227   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT,1);
;;;3228   	else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;3229   	}
;;;3230   else 
;;;3231   	{
;;;3232   	if((RELE_VENT_LOGIC==0)||(RELE_VENT_LOGIC==1))
;;;3233   		{
;;;3234   		if(vent_stat) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT,1);
;;;3235   		else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;3236   		}
;;;3237   	else 
;;;3238   		{
;;;3239   		if((avar_ind_stat&0x00000004)) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT,1);
;;;3240        	else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;3241   		}
;;;3242   	}
;;;3243   
;;;3244   #endif
;;;3245   
;;;3246   #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;3247   
;;;3248   if((AUSW_MAIN==22010)||(AUSW_MAIN==22011))
001a14  4870              LDR      r0,|L1.7128|
;;;3249   	{
;;;3250   	#ifndef UKU2071x
;;;3251   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_NET))
;;;3252   		{
;;;3253   		if(mess_data[1]==0) SET_REG(LPC_GPIO3->FIOSET,1,25,1);
;;;3254   		else SET_REG(LPC_GPIO3->FIOCLR,1,25,1);
;;;3255   		}
;;;3256   	else	if(!(avar_ind_stat&0x00000001)) SET_REG(LPC_GPIO3->FIOSET,1,25,1);
;;;3257   	else SET_REG(LPC_GPIO3->FIOCLR,1,25,1);
;;;3258   	#endif
;;;3259   	#ifdef UKU2071x
;;;3260   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_NET))
;;;3261   		{
;;;3262   		if(mess_data[1]==0) SET_REG(LPC_GPIO3->FIOCLR,1,25,1);
;;;3263   		else SET_REG(LPC_GPIO3->FIOSET,1,25,1);
;;;3264   		}
;;;3265   	else	if(!(avar_ind_stat&0x00000001)) SET_REG(LPC_GPIO3->FIOCLR,1,25,1);
;;;3266   	else SET_REG(LPC_GPIO3->FIOSET,1,25,1);
;;;3267   	#endif
;;;3268   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BPS))
;;;3269   		{
;;;3270   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,7,1);
;;;3271   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,7,1);
;;;3272   	     }
;;;3273   	else 
;;;3274   		{
;;;3275   		if(!(avar_ind_stat&0x100007f8)) SET_REG(LPC_GPIO0->FIOCLR,1,7,1);
;;;3276   	     else SET_REG(LPC_GPIO0->FIOSET,1,7,1);
;;;3277   		} 
;;;3278   
;;;3279   	//  
;;;3280   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BAT))
;;;3281   		{
;;;3282   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,4,1);
;;;3283   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,4,1);
;;;3284        	}
;;;3285   	else 
;;;3286   		{
;;;3287   		if(!(ips_bat_av_stat)) SET_REG(LPC_GPIO0->FIOCLR,1,4,1);
001a16  f8df81c4          LDR      r8,|L1.7132|
001a1a  4f71              LDR      r7,|L1.7136|
001a1c  8800              LDRH     r0,[r0,#0]            ;3248  ; AUSW_MAIN
001a1e  f5a041aa          SUB      r1,r0,#0x5500         ;3248
001a22  39fa              SUBS     r1,r1,#0xfa           ;3248
001a24  d001              BEQ      |L1.6698|
001a26  1e49              SUBS     r1,r1,#1              ;3248
001a28  d16f              BNE      |L1.6922|
                  |L1.6698|
001a2a  20d2              MOVS     r0,#0xd2              ;3260
001a2c  f7fffffe          BL       mess_find_unvol
001a30  b110              CBZ      r0,|L1.6712|
001a32  6828              LDR      r0,[r5,#0]            ;3260  ; mess_data
001a34  2866              CMP      r0,#0x66              ;3260
001a36  d043              BEQ      |L1.6848|
                  |L1.6712|
001a38  6830              LDR      r0,[r6,#0]            ;3265  ; avar_ind_stat
001a3a  07c0              LSLS     r0,r0,#31             ;3265
001a3c  d04d              BEQ      |L1.6874|
001a3e  6fa0              LDR      r0,[r4,#0x78]         ;3266
001a40  f0407000          ORR      r0,r0,#0x2000000      ;3266
001a44  67a0              STR      r0,[r4,#0x78]         ;3266
                  |L1.6726|
001a46  20d2              MOVS     r0,#0xd2              ;3268
001a48  f7fffffe          BL       mess_find_unvol
001a4c  b110              CBZ      r0,|L1.6740|
001a4e  6828              LDR      r0,[r5,#0]            ;3268  ; mess_data
001a50  286a              CMP      r0,#0x6a              ;3268
001a52  d047              BEQ      |L1.6884|
                  |L1.6740|
001a54  6830              LDR      r0,[r6,#0]            ;3275  ; avar_ind_stat
001a56  4238              TST      r0,r7                 ;3275
001a58  d052              BEQ      |L1.6912|
001a5a  69a0              LDR      r0,[r4,#0x18]         ;3276
001a5c  f0400080          ORR      r0,r0,#0x80           ;3276
001a60  61a0              STR      r0,[r4,#0x18]         ;3276
                  |L1.6754|
001a62  20d2              MOVS     r0,#0xd2              ;3280
001a64  f7fffffe          BL       mess_find_unvol
001a68  b110              CBZ      r0,|L1.6768|
001a6a  6828              LDR      r0,[r5,#0]            ;3280  ; mess_data
001a6c  2867              CMP      r0,#0x67              ;3280
001a6e  d04d              BEQ      |L1.6924|
                  |L1.6768|
001a70  f8980000          LDRB     r0,[r8,#0]  ; ips_bat_av_stat
001a74  b380              CBZ      r0,|L1.6872|
;;;3288        	else SET_REG(LPC_GPIO0->FIOSET,1,4,1);
001a76  69a0              LDR      r0,[r4,#0x18]
001a78  f0400010          ORR      r0,r0,#0x10
001a7c  61a0              STR      r0,[r4,#0x18]
001a7e  e1f1              B        |L1.7780|
                  |L1.6784|
001a80  6868              LDR      r0,[r5,#4]            ;2803  ; mess_data
001a82  2801              CMP      r0,#1                 ;2803
001a84  d006              BEQ      |L1.6804|
001a86  2800              CMP      r0,#0                 ;2804
001a88  d1b5              BNE      |L1.6646|
001a8a  69e0              LDR      r0,[r4,#0x1c]         ;2804
001a8c  f0405000          ORR      r0,r0,#0x20000000     ;2804
001a90  61e0              STR      r0,[r4,#0x1c]         ;2804
001a92  e7b0              B        |L1.6646|
                  |L1.6804|
001a94  69a0              LDR      r0,[r4,#0x18]         ;2803
001a96  f0405000          ORR      r0,r0,#0x20000000     ;2803
001a9a  61a0              STR      r0,[r4,#0x18]         ;2803
001a9c  e7ab              B        |L1.6646|
                  |L1.6814|
001a9e  6868              LDR      r0,[r5,#4]            ;2823  ; mess_data
001aa0  b120              CBZ      r0,|L1.6828|
001aa2  6fa0              LDR      r0,[r4,#0x78]         ;2824
001aa4  f0407000          ORR      r0,r0,#0x2000000      ;2824
001aa8  67a0              STR      r0,[r4,#0x78]         ;2824
001aaa  e7b3              B        |L1.6676|
                  |L1.6828|
001aac  6fe0              LDR      r0,[r4,#0x7c]         ;2823
001aae  f0407000          ORR      r0,r0,#0x2000000      ;2823
001ab2  67e0              STR      r0,[r4,#0x7c]         ;2823
001ab4  e7ae              B        |L1.6676|
                  |L1.6838|
001ab6  6fe0              LDR      r0,[r4,#0x7c]         ;2826
001ab8  f0407000          ORR      r0,r0,#0x2000000      ;2826
001abc  67e0              STR      r0,[r4,#0x7c]         ;2826
001abe  e7a9              B        |L1.6676|
                  |L1.6848|
001ac0  6868              LDR      r0,[r5,#4]            ;3262  ; mess_data
001ac2  b120              CBZ      r0,|L1.6862|
001ac4  6fa0              LDR      r0,[r4,#0x78]         ;3263
001ac6  f0407000          ORR      r0,r0,#0x2000000      ;3263
001aca  67a0              STR      r0,[r4,#0x78]         ;3263
001acc  e7bb              B        |L1.6726|
                  |L1.6862|
001ace  6fe0              LDR      r0,[r4,#0x7c]         ;3262
001ad0  f0407000          ORR      r0,r0,#0x2000000      ;3262
001ad4  67e0              STR      r0,[r4,#0x7c]         ;3262
001ad6  e7b6              B        |L1.6726|
                  |L1.6872|
001ad8  e027              B        |L1.6954|
                  |L1.6874|
001ada  6fe0              LDR      r0,[r4,#0x7c]         ;3265
001adc  f0407000          ORR      r0,r0,#0x2000000      ;3265
001ae0  67e0              STR      r0,[r4,#0x7c]         ;3265
001ae2  e7b0              B        |L1.6726|
                  |L1.6884|
001ae4  6868              LDR      r0,[r5,#4]            ;3270  ; mess_data
001ae6  b130              CBZ      r0,|L1.6902|
001ae8  2801              CMP      r0,#1                 ;3271
001aea  d1ba              BNE      |L1.6754|
001aec  69a0              LDR      r0,[r4,#0x18]         ;3271
001aee  f0400080          ORR      r0,r0,#0x80           ;3271
001af2  61a0              STR      r0,[r4,#0x18]         ;3271
001af4  e7b5              B        |L1.6754|
                  |L1.6902|
001af6  69e0              LDR      r0,[r4,#0x1c]         ;3270
001af8  f0400080          ORR      r0,r0,#0x80           ;3270
001afc  61e0              STR      r0,[r4,#0x1c]         ;3270
001afe  e7b0              B        |L1.6754|
                  |L1.6912|
001b00  69e0              LDR      r0,[r4,#0x1c]         ;3275
001b02  f0400080          ORR      r0,r0,#0x80           ;3275
001b06  61e0              STR      r0,[r4,#0x1c]         ;3275
001b08  e7ab              B        |L1.6754|
                  |L1.6922|
001b0a  e013              B        |L1.6964|
                  |L1.6924|
001b0c  6868              LDR      r0,[r5,#4]            ;3282  ; mess_data
001b0e  b110              CBZ      r0,|L1.6934|
001b10  2801              CMP      r0,#1                 ;3283
001b12  d005              BEQ      |L1.6944|
001b14  e1a6              B        |L1.7780|
                  |L1.6934|
001b16  69e0              LDR      r0,[r4,#0x1c]         ;3282
001b18  f0400010          ORR      r0,r0,#0x10           ;3282
001b1c  61e0              STR      r0,[r4,#0x1c]         ;3282
001b1e  e1a1              B        |L1.7780|
                  |L1.6944|
001b20  69a0              LDR      r0,[r4,#0x18]         ;3283
001b22  f0400010          ORR      r0,r0,#0x10           ;3283
001b26  61a0              STR      r0,[r4,#0x18]         ;3283
001b28  e19c              B        |L1.7780|
                  |L1.6954|
001b2a  69e0              LDR      r0,[r4,#0x1c]         ;3287
001b2c  f0400010          ORR      r0,r0,#0x10           ;3287
001b30  61e0              STR      r0,[r4,#0x1c]         ;3287
001b32  e197              B        |L1.7780|
                  |L1.6964|
;;;3289   		}
;;;3290   	}
;;;3291   
;;;3292   else	if(AUSW_MAIN==22023)
001b34  f5a041ac          SUB      r1,r0,#0x5600
001b38  3907              SUBS     r1,#7
001b3a  d173              BNE      |L1.7204|
;;;3293   	{
;;;3294   
;;;3295   	//  
;;;3296   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BAT))
001b3c  20d2              MOVS     r0,#0xd2
001b3e  f7fffffe          BL       mess_find_unvol
001b42  b110              CBZ      r0,|L1.6986|
001b44  6828              LDR      r0,[r5,#0]  ; mess_data
001b46  2867              CMP      r0,#0x67
001b48  d023              BEQ      |L1.7058|
                  |L1.6986|
;;;3297   		{
;;;3298   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,4,1);
;;;3299   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,4,1);
;;;3300        	}
;;;3301   	else 
;;;3302   		{
;;;3303   		if(!(ips_bat_av_stat)) SET_REG(LPC_GPIO0->FIOCLR,1,4,1);
001b4a  f8980000          LDRB     r0,[r8,#0]  ; ips_bat_av_stat
001b4e  b348              CBZ      r0,|L1.7076|
;;;3304        	else SET_REG(LPC_GPIO0->FIOSET,1,4,1);
001b50  69a0              LDR      r0,[r4,#0x18]
001b52  f0400010          ORR      r0,r0,#0x10
001b56  61a0              STR      r0,[r4,#0x18]
                  |L1.7000|
;;;3305   		} 
;;;3306   
;;;3307   
;;;3308   	//         .    
;;;3309   	#ifndef UKU2071x
;;;3310   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_NET))
;;;3311   		{
;;;3312   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;3313   		else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_NET,1);
;;;3314   		}
;;;3315   	else	if(!(avar_ind_stat&0x00000001)) SET_REG(LPC_GPIO1->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;3316   	else SET_REG(LPC_GPIO3->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;3317   	#endif
;;;3318   	#ifdef UKU2071x
;;;3319   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_NET))
001b58  20d2              MOVS     r0,#0xd2
001b5a  f7fffffe          BL       mess_find_unvol
001b5e  b110              CBZ      r0,|L1.7014|
001b60  6828              LDR      r0,[r5,#0]  ; mess_data
001b62  2866              CMP      r0,#0x66
001b64  d048              BEQ      |L1.7160|
                  |L1.7014|
;;;3320   		{
;;;3321   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_NET,1);
;;;3322   		else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;3323   		}
;;;3324   	else	if(!(avar_ind_stat&0x00000001)) SET_REG(LPC_GPIO1->FIOSET,1,SHIFT_REL_AV_NET,1);
001b66  6830              LDR      r0,[r6,#0]  ; avar_ind_stat
001b68  07c0              LSLS     r0,r0,#31
001b6a  d051              BEQ      |L1.7184|
;;;3325   	else SET_REG(LPC_GPIO3->FIOSET,1,SHIFT_REL_AV_NET,1);
001b6c  6fa0              LDR      r0,[r4,#0x78]
001b6e  f0407000          ORR      r0,r0,#0x2000000
001b72  67a0              STR      r0,[r4,#0x78]
                  |L1.7028|
;;;3326   	#endif
;;;3327   
;;;3328   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BPS))
001b74  20d2              MOVS     r0,#0xd2
001b76  f7fffffe          BL       mess_find_unvol
001b7a  b110              CBZ      r0,|L1.7042|
001b7c  6828              LDR      r0,[r5,#0]  ; mess_data
001b7e  286a              CMP      r0,#0x6a
001b80  d04b              BEQ      |L1.7194|
                  |L1.7042|
;;;3329   		{
;;;3330   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,7,1);
;;;3331   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,7,1);
;;;3332   	     }
;;;3333   	else 
;;;3334   		{
;;;3335   		if(!(avar_ind_stat&0x100007f8)) SET_REG(LPC_GPIO0->FIOCLR,1,7,1);
001b82  6830              LDR      r0,[r6,#0]  ; avar_ind_stat
001b84  4238              TST      r0,r7
001b86  d058              BEQ      |L1.7226|
;;;3336   	     else SET_REG(LPC_GPIO0->FIOSET,1,7,1);
001b88  69a0              LDR      r0,[r4,#0x18]
001b8a  f0400080          ORR      r0,r0,#0x80
001b8e  61a0              STR      r0,[r4,#0x18]
001b90  e168              B        |L1.7780|
                  |L1.7058|
001b92  6868              LDR      r0,[r5,#4]            ;3298  ; mess_data
001b94  b138              CBZ      r0,|L1.7078|
001b96  2801              CMP      r0,#1                 ;3299
001b98  d1de              BNE      |L1.7000|
001b9a  69a0              LDR      r0,[r4,#0x18]         ;3299
001b9c  f0400010          ORR      r0,r0,#0x10           ;3299
001ba0  61a0              STR      r0,[r4,#0x18]         ;3299
001ba2  e7d9              B        |L1.7000|
                  |L1.7076|
001ba4  e023              B        |L1.7150|
                  |L1.7078|
001ba6  e01d              B        |L1.7140|
                  |L1.7080|
                          DCD      0x2009c000
                  |L1.7084|
                          DCD      ||area_number.21||
                  |L1.7088|
                          DCD      bps
                  |L1.7092|
                          DCD      NUMIST
                  |L1.7096|
                          DCD      0x4002c000
                  |L1.7100|
                          DCD      0xfff000ff
                  |L1.7104|
                          DCD      bat
                  |L1.7108|
                          DCD      tbatdisable_stat
                  |L1.7112|
                          DCD      tbatdisable_cmnd
                  |L1.7116|
                          DCD      main_1Hz_cnt
                  |L1.7120|
                          DCD      mess_data
                  |L1.7124|
                          DCD      avar_ind_stat
                  |L1.7128|
                          DCD      AUSW_MAIN
                  |L1.7132|
                          DCD      ips_bat_av_stat
                  |L1.7136|
                          DCD      0x100007f8
                  |L1.7140|
001be4  69e0              LDR      r0,[r4,#0x1c]         ;3298
001be6  f0400010          ORR      r0,r0,#0x10           ;3298
001bea  61e0              STR      r0,[r4,#0x1c]         ;3298
001bec  e7b4              B        |L1.7000|
                  |L1.7150|
001bee  69e0              LDR      r0,[r4,#0x1c]         ;3303
001bf0  f0400010          ORR      r0,r0,#0x10           ;3303
001bf4  61e0              STR      r0,[r4,#0x1c]         ;3303
001bf6  e7af              B        |L1.7000|
                  |L1.7160|
001bf8  6868              LDR      r0,[r5,#4]            ;3321  ; mess_data
001bfa  b120              CBZ      r0,|L1.7174|
001bfc  69e0              LDR      r0,[r4,#0x1c]         ;3322
001bfe  f0407000          ORR      r0,r0,#0x2000000      ;3322
001c02  61e0              STR      r0,[r4,#0x1c]         ;3322
001c04  e7b6              B        |L1.7028|
                  |L1.7174|
001c06  69a0              LDR      r0,[r4,#0x18]         ;3321
001c08  f0407000          ORR      r0,r0,#0x2000000      ;3321
001c0c  61a0              STR      r0,[r4,#0x18]         ;3321
001c0e  e7b1              B        |L1.7028|
                  |L1.7184|
001c10  6ba0              LDR      r0,[r4,#0x38]         ;3324
001c12  f0407000          ORR      r0,r0,#0x2000000      ;3324
001c16  63a0              STR      r0,[r4,#0x38]         ;3324
001c18  e7ac              B        |L1.7028|
                  |L1.7194|
001c1a  6868              LDR      r0,[r5,#4]            ;3330  ; mess_data
001c1c  b118              CBZ      r0,|L1.7206|
001c1e  2801              CMP      r0,#1                 ;3331
001c20  d006              BEQ      |L1.7216|
001c22  e11f              B        |L1.7780|
                  |L1.7204|
001c24  e00e              B        |L1.7236|
                  |L1.7206|
001c26  69e0              LDR      r0,[r4,#0x1c]         ;3330
001c28  f0400080          ORR      r0,r0,#0x80           ;3330
001c2c  61e0              STR      r0,[r4,#0x1c]         ;3330
001c2e  e119              B        |L1.7780|
                  |L1.7216|
001c30  69a0              LDR      r0,[r4,#0x18]         ;3331
001c32  f0400080          ORR      r0,r0,#0x80           ;3331
001c36  61a0              STR      r0,[r4,#0x18]         ;3331
001c38  e114              B        |L1.7780|
                  |L1.7226|
001c3a  69e0              LDR      r0,[r4,#0x1c]         ;3335
001c3c  f0400080          ORR      r0,r0,#0x80           ;3335
001c40  61e0              STR      r0,[r4,#0x1c]         ;3335
001c42  e10f              B        |L1.7780|
                  |L1.7236|
;;;3337   		} 
;;;3338   	}
;;;3339   else	if(AUSW_MAIN==22043)
001c44  f5a041ac          SUB      r1,r0,#0x5600
001c48  391b              SUBS     r1,r1,#0x1b
001c4a  d170              BNE      |L1.7470|
;;;3340   	{
;;;3341   	//  
;;;3342   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BAT))
001c4c  20d2              MOVS     r0,#0xd2
001c4e  f7fffffe          BL       mess_find_unvol
001c52  b110              CBZ      r0,|L1.7258|
001c54  6828              LDR      r0,[r5,#0]  ; mess_data
001c56  2867              CMP      r0,#0x67
001c58  d031              BEQ      |L1.7358|
                  |L1.7258|
;;;3343   		{
;;;3344   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,4,1);
;;;3345   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,4,1);
;;;3346        	}
;;;3347   	else 
;;;3348   		{
;;;3349   		if(!(ips_bat_av_stat)) SET_REG(LPC_GPIO0->FIOCLR,1,4,1);
001c5a  f8980000          LDRB     r0,[r8,#0]  ; ips_bat_av_stat
001c5e  b3b8              CBZ      r0,|L1.7376|
;;;3350        	else SET_REG(LPC_GPIO0->FIOSET,1,4,1);
001c60  69a0              LDR      r0,[r4,#0x18]
001c62  f0400010          ORR      r0,r0,#0x10
001c66  61a0              STR      r0,[r4,#0x18]
                  |L1.7272|
;;;3351   		} 
;;;3352   	//         .    
;;;3353   	#ifndef UKU2071x 
;;;3354   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_NET))
;;;3355   		{
;;;3356   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;3357   		else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_NET,1);
;;;3358   		}
;;;3359   	else	if(!(avar_ind_stat&0x00000001)) SET_REG(LPC_GPIO1->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;3360   	else SET_REG(LPC_GPIO3->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;3361   	#endif
;;;3362   	#ifdef UKU2071x 
;;;3363   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_NET))
001c68  20d2              MOVS     r0,#0xd2
001c6a  f7fffffe          BL       mess_find_unvol
001c6e  b110              CBZ      r0,|L1.7286|
001c70  6828              LDR      r0,[r5,#0]  ; mess_data
001c72  2866              CMP      r0,#0x66
001c74  d037              BEQ      |L1.7398|
                  |L1.7286|
;;;3364   		{
;;;3365   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_NET,1);
;;;3366   		else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;3367   		}
;;;3368   	else	if(!(avar_ind_stat&0x00000001)) SET_REG(LPC_GPIO1->FIOSET,1,SHIFT_REL_AV_NET,1);
001c76  6830              LDR      r0,[r6,#0]  ; avar_ind_stat
001c78  07c0              LSLS     r0,r0,#31
001c7a  d040              BEQ      |L1.7422|
;;;3369   	else SET_REG(LPC_GPIO3->FIOSET,1,SHIFT_REL_AV_NET,1);
001c7c  6fa0              LDR      r0,[r4,#0x78]
001c7e  f0407000          ORR      r0,r0,#0x2000000
001c82  67a0              STR      r0,[r4,#0x78]
                  |L1.7300|
;;;3370   	#endif
;;;3371   
;;;3372   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BPS))
001c84  20d2              MOVS     r0,#0xd2
001c86  f7fffffe          BL       mess_find_unvol
001c8a  b110              CBZ      r0,|L1.7314|
001c8c  6828              LDR      r0,[r5,#0]  ; mess_data
001c8e  286a              CMP      r0,#0x6a
001c90  d03a              BEQ      |L1.7432|
                  |L1.7314|
;;;3373   		{
;;;3374   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,7,1);
;;;3375   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,7,1);
;;;3376   	     }
;;;3377   	else 
;;;3378   		{
;;;3379   		if(!(avar_ind_stat&0x100007f8)) SET_REG(LPC_GPIO0->FIOCLR,1,7,1);
001c92  6830              LDR      r0,[r6,#0]  ; avar_ind_stat
001c94  4238              TST      r0,r7
001c96  d045              BEQ      |L1.7460|
;;;3380   	     else SET_REG(LPC_GPIO0->FIOSET,1,7,1);
001c98  69a0              LDR      r0,[r4,#0x18]
001c9a  f0400080          ORR      r0,r0,#0x80
001c9e  61a0              STR      r0,[r4,#0x18]
                  |L1.7328|
;;;3381   		}
;;;3382   	//  
;;;3383   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BPS))
001ca0  20d2              MOVS     r0,#0xd2
001ca2  f7fffffe          BL       mess_find_unvol
001ca6  b110              CBZ      r0,|L1.7342|
001ca8  6828              LDR      r0,[r5,#0]  ; mess_data
001caa  286a              CMP      r0,#0x6a
001cac  d040              BEQ      |L1.7472|
                  |L1.7342|
;;;3384   		{
;;;3385   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
;;;3386   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
;;;3387        	}
;;;3388   	else 
;;;3389   		{
;;;3390   		if(!(avar_ind_stat&0x100007f8)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
001cae  6830              LDR      r0,[r6,#0]  ; avar_ind_stat
001cb0  4238              TST      r0,r7
001cb2  d04c              BEQ      |L1.7502|
;;;3391        	else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
001cb4  69a0              LDR      r0,[r4,#0x18]
001cb6  f0400020          ORR      r0,r0,#0x20
001cba  61a0              STR      r0,[r4,#0x18]
001cbc  e0d2              B        |L1.7780|
                  |L1.7358|
001cbe  6868              LDR      r0,[r5,#4]            ;3344  ; mess_data
001cc0  b138              CBZ      r0,|L1.7378|
001cc2  2801              CMP      r0,#1                 ;3345
001cc4  d1d0              BNE      |L1.7272|
001cc6  69a0              LDR      r0,[r4,#0x18]         ;3345
001cc8  f0400010          ORR      r0,r0,#0x10           ;3345
001ccc  61a0              STR      r0,[r4,#0x18]         ;3345
001cce  e7cb              B        |L1.7272|
                  |L1.7376|
001cd0  e004              B        |L1.7388|
                  |L1.7378|
001cd2  69e0              LDR      r0,[r4,#0x1c]         ;3344
001cd4  f0400010          ORR      r0,r0,#0x10           ;3344
001cd8  61e0              STR      r0,[r4,#0x1c]         ;3344
001cda  e7c5              B        |L1.7272|
                  |L1.7388|
001cdc  69e0              LDR      r0,[r4,#0x1c]         ;3349
001cde  f0400010          ORR      r0,r0,#0x10           ;3349
001ce2  61e0              STR      r0,[r4,#0x1c]         ;3349
001ce4  e7c0              B        |L1.7272|
                  |L1.7398|
001ce6  6868              LDR      r0,[r5,#4]            ;3365  ; mess_data
001ce8  b120              CBZ      r0,|L1.7412|
001cea  69e0              LDR      r0,[r4,#0x1c]         ;3366
001cec  f0407000          ORR      r0,r0,#0x2000000      ;3366
001cf0  61e0              STR      r0,[r4,#0x1c]         ;3366
001cf2  e7c7              B        |L1.7300|
                  |L1.7412|
001cf4  69a0              LDR      r0,[r4,#0x18]         ;3365
001cf6  f0407000          ORR      r0,r0,#0x2000000      ;3365
001cfa  61a0              STR      r0,[r4,#0x18]         ;3365
001cfc  e7c2              B        |L1.7300|
                  |L1.7422|
001cfe  6ba0              LDR      r0,[r4,#0x38]         ;3368
001d00  f0407000          ORR      r0,r0,#0x2000000      ;3368
001d04  63a0              STR      r0,[r4,#0x38]         ;3368
001d06  e7bd              B        |L1.7300|
                  |L1.7432|
001d08  6868              LDR      r0,[r5,#4]            ;3374  ; mess_data
001d0a  b130              CBZ      r0,|L1.7450|
001d0c  2801              CMP      r0,#1                 ;3375
001d0e  d1c7              BNE      |L1.7328|
001d10  69a0              LDR      r0,[r4,#0x18]         ;3375
001d12  f0400080          ORR      r0,r0,#0x80           ;3375
001d16  61a0              STR      r0,[r4,#0x18]         ;3375
001d18  e7c2              B        |L1.7328|
                  |L1.7450|
001d1a  69e0              LDR      r0,[r4,#0x1c]         ;3374
001d1c  f0400080          ORR      r0,r0,#0x80           ;3374
001d20  61e0              STR      r0,[r4,#0x1c]         ;3374
001d22  e7bd              B        |L1.7328|
                  |L1.7460|
001d24  69e0              LDR      r0,[r4,#0x1c]         ;3379
001d26  f0400080          ORR      r0,r0,#0x80           ;3379
001d2a  61e0              STR      r0,[r4,#0x1c]         ;3379
001d2c  e7b8              B        |L1.7328|
                  |L1.7470|
001d2e  e013              B        |L1.7512|
                  |L1.7472|
001d30  6868              LDR      r0,[r5,#4]            ;3385  ; mess_data
001d32  b110              CBZ      r0,|L1.7482|
001d34  2801              CMP      r0,#1                 ;3386
001d36  d005              BEQ      |L1.7492|
001d38  e094              B        |L1.7780|
                  |L1.7482|
001d3a  69e0              LDR      r0,[r4,#0x1c]         ;3385
001d3c  f0400020          ORR      r0,r0,#0x20           ;3385
001d40  61e0              STR      r0,[r4,#0x1c]         ;3385
001d42  e08f              B        |L1.7780|
                  |L1.7492|
001d44  69a0              LDR      r0,[r4,#0x18]         ;3386
001d46  f0400020          ORR      r0,r0,#0x20           ;3386
001d4a  61a0              STR      r0,[r4,#0x18]         ;3386
001d4c  e08a              B        |L1.7780|
                  |L1.7502|
001d4e  69e0              LDR      r0,[r4,#0x1c]         ;3390
001d50  f0400020          ORR      r0,r0,#0x20           ;3390
001d54  61e0              STR      r0,[r4,#0x1c]         ;3390
001d56  e085              B        |L1.7780|
                  |L1.7512|
;;;3392   		} 
;;;3393   	}
;;;3394   else	if((AUSW_MAIN==22033)||(AUSW_MAIN==22018))
001d58  f5a041ac          SUB      r1,r0,#0x5600
001d5c  3911              SUBS     r1,r1,#0x11
001d5e  d001              BEQ      |L1.7524|
001d60  310f              ADDS     r1,r1,#0xf
001d62  d163              BNE      |L1.7724|
                  |L1.7524|
;;;3395   	{
;;;3396   	#ifndef UKU2071x 
;;;3397   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_NET))
;;;3398   		{
;;;3399   		if(mess_data[1]==0) SET_REG(LPC_GPIO3->FIOSET,1,25,1);
;;;3400   		else SET_REG(LPC_GPIO3->FIOCLR,1,25,1);
;;;3401   		}
;;;3402   	else	if(!(avar_ind_stat&0x00000001)) SET_REG(LPC_GPIO3->FIOSET,1,25,1);
;;;3403   	else SET_REG(LPC_GPIO3->FIOCLR,1,25,1);
;;;3404   	#endif
;;;3405   	#ifdef UKU2071x 
;;;3406   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_NET))
001d64  20d2              MOVS     r0,#0xd2
001d66  f7fffffe          BL       mess_find_unvol
001d6a  b110              CBZ      r0,|L1.7538|
001d6c  6828              LDR      r0,[r5,#0]  ; mess_data
001d6e  2866              CMP      r0,#0x66
001d70  d023              BEQ      |L1.7610|
                  |L1.7538|
;;;3407   		{
;;;3408   		if(mess_data[1]==0) SET_REG(LPC_GPIO3->FIOCLR,1,25,1);
;;;3409   		else SET_REG(LPC_GPIO3->FIOSET,1,25,1);
;;;3410   		}
;;;3411   	else	if(!(avar_ind_stat&0x00000001)) SET_REG(LPC_GPIO3->FIOCLR,1,25,1);
001d72  6830              LDR      r0,[r6,#0]  ; avar_ind_stat
001d74  07c0              LSLS     r0,r0,#31
001d76  d02c              BEQ      |L1.7634|
;;;3412   	else SET_REG(LPC_GPIO3->FIOSET,1,25,1);
001d78  6fa0              LDR      r0,[r4,#0x78]
001d7a  f0407000          ORR      r0,r0,#0x2000000
001d7e  67a0              STR      r0,[r4,#0x78]
                  |L1.7552|
;;;3413   	#endif
;;;3414   	
;;;3415   	
;;;3416   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BPS))
001d80  20d2              MOVS     r0,#0xd2
001d82  f7fffffe          BL       mess_find_unvol
001d86  b110              CBZ      r0,|L1.7566|
001d88  6828              LDR      r0,[r5,#0]  ; mess_data
001d8a  286a              CMP      r0,#0x6a
001d8c  d026              BEQ      |L1.7644|
                  |L1.7566|
;;;3417   		{
;;;3418   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,7,1);
;;;3419   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,7,1);
;;;3420   	     }
;;;3421   	else 
;;;3422   		{
;;;3423   		if(!(avar_ind_stat&0x100007f8)) SET_REG(LPC_GPIO0->FIOCLR,1,7,1);
001d8e  6830              LDR      r0,[r6,#0]  ; avar_ind_stat
001d90  4238              TST      r0,r7
001d92  d031              BEQ      |L1.7672|
;;;3424   	     else SET_REG(LPC_GPIO0->FIOSET,1,7,1);
001d94  69a0              LDR      r0,[r4,#0x18]
001d96  f0400080          ORR      r0,r0,#0x80
001d9a  61a0              STR      r0,[r4,#0x18]
                  |L1.7580|
;;;3425   		} 
;;;3426   
;;;3427   	//  
;;;3428   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BAT))
001d9c  20d2              MOVS     r0,#0xd2
001d9e  f7fffffe          BL       mess_find_unvol
001da2  b110              CBZ      r0,|L1.7594|
001da4  6828              LDR      r0,[r5,#0]  ; mess_data
001da6  2867              CMP      r0,#0x67
001da8  d02b              BEQ      |L1.7682|
                  |L1.7594|
;;;3429   		{
;;;3430   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,4,1);
;;;3431   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,4,1);
;;;3432        	}
;;;3433   	else 
;;;3434   		{
;;;3435   		if(!(ips_bat_av_stat)) SET_REG(LPC_GPIO0->FIOCLR,1,4,1);
001daa  f8980000          LDRB     r0,[r8,#0]  ; ips_bat_av_stat
001dae  b390              CBZ      r0,|L1.7702|
;;;3436        	else SET_REG(LPC_GPIO0->FIOSET,1,4,1);
001db0  69a0              LDR      r0,[r4,#0x18]
001db2  f0400010          ORR      r0,r0,#0x10
001db6  61a0              STR      r0,[r4,#0x18]
001db8  e054              B        |L1.7780|
                  |L1.7610|
001dba  6868              LDR      r0,[r5,#4]            ;3408  ; mess_data
001dbc  b120              CBZ      r0,|L1.7624|
001dbe  6fa0              LDR      r0,[r4,#0x78]         ;3409
001dc0  f0407000          ORR      r0,r0,#0x2000000      ;3409
001dc4  67a0              STR      r0,[r4,#0x78]         ;3409
001dc6  e7db              B        |L1.7552|
                  |L1.7624|
001dc8  6fe0              LDR      r0,[r4,#0x7c]         ;3408
001dca  f0407000          ORR      r0,r0,#0x2000000      ;3408
001dce  67e0              STR      r0,[r4,#0x7c]         ;3408
001dd0  e7d6              B        |L1.7552|
                  |L1.7634|
001dd2  6fe0              LDR      r0,[r4,#0x7c]         ;3411
001dd4  f0407000          ORR      r0,r0,#0x2000000      ;3411
001dd8  67e0              STR      r0,[r4,#0x7c]         ;3411
001dda  e7d1              B        |L1.7552|
                  |L1.7644|
001ddc  6868              LDR      r0,[r5,#4]            ;3418  ; mess_data
001dde  b130              CBZ      r0,|L1.7662|
001de0  2801              CMP      r0,#1                 ;3419
001de2  d1db              BNE      |L1.7580|
001de4  69a0              LDR      r0,[r4,#0x18]         ;3419
001de6  f0400080          ORR      r0,r0,#0x80           ;3419
001dea  61a0              STR      r0,[r4,#0x18]         ;3419
001dec  e7d6              B        |L1.7580|
                  |L1.7662|
001dee  69e0              LDR      r0,[r4,#0x1c]         ;3418
001df0  f0400080          ORR      r0,r0,#0x80           ;3418
001df4  61e0              STR      r0,[r4,#0x1c]         ;3418
001df6  e7d1              B        |L1.7580|
                  |L1.7672|
001df8  69e0              LDR      r0,[r4,#0x1c]         ;3423
001dfa  f0400080          ORR      r0,r0,#0x80           ;3423
001dfe  61e0              STR      r0,[r4,#0x1c]         ;3423
001e00  e7cc              B        |L1.7580|
                  |L1.7682|
001e02  6868              LDR      r0,[r5,#4]            ;3430  ; mess_data
001e04  b110              CBZ      r0,|L1.7692|
001e06  2801              CMP      r0,#1                 ;3431
001e08  d006              BEQ      |L1.7704|
001e0a  e02b              B        |L1.7780|
                  |L1.7692|
001e0c  69e0              LDR      r0,[r4,#0x1c]         ;3430
001e0e  f0400010          ORR      r0,r0,#0x10           ;3430
001e12  61e0              STR      r0,[r4,#0x1c]         ;3430
001e14  e026              B        |L1.7780|
                  |L1.7702|
001e16  e004              B        |L1.7714|
                  |L1.7704|
001e18  69a0              LDR      r0,[r4,#0x18]         ;3431
001e1a  f0400010          ORR      r0,r0,#0x10           ;3431
001e1e  61a0              STR      r0,[r4,#0x18]         ;3431
001e20  e020              B        |L1.7780|
                  |L1.7714|
001e22  69e0              LDR      r0,[r4,#0x1c]         ;3435
001e24  f0400010          ORR      r0,r0,#0x10           ;3435
001e28  61e0              STR      r0,[r4,#0x1c]         ;3435
001e2a  e01b              B        |L1.7780|
                  |L1.7724|
;;;3437   		} 
;;;3438   	} 	 
;;;3439   else	
;;;3440   	{
;;;3441   	//         .    
;;;3442   	#ifndef UKU2071x 
;;;3443   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_NET))
;;;3444   		{
;;;3445   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;3446   		else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_NET,1);
;;;3447   		}
;;;3448   	else	if(!(avar_ind_stat&0x00000001)) SET_REG(LPC_GPIO1->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;3449   	else SET_REG(LPC_GPIO3->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;3450   	#endif
;;;3451   	#ifdef UKU2071x 
;;;3452   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_NET))
001e2c  20d2              MOVS     r0,#0xd2
001e2e  f7fffffe          BL       mess_find_unvol
001e32  b110              CBZ      r0,|L1.7738|
001e34  6828              LDR      r0,[r5,#0]  ; mess_data
001e36  2866              CMP      r0,#0x66
001e38  d02d              BEQ      |L1.7830|
                  |L1.7738|
;;;3453   		{
;;;3454   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_NET,1);
;;;3455   		else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;3456   		}
;;;3457   	else	if(!(avar_ind_stat&0x00000001)) SET_REG(LPC_GPIO1->FIOSET,1,SHIFT_REL_AV_NET,1);
001e3a  6830              LDR      r0,[r6,#0]  ; avar_ind_stat
001e3c  07c0              LSLS     r0,r0,#31
001e3e  d036              BEQ      |L1.7854|
;;;3458   	else SET_REG(LPC_GPIO3->FIOSET,1,SHIFT_REL_AV_NET,1);
001e40  6fa0              LDR      r0,[r4,#0x78]
001e42  f0407000          ORR      r0,r0,#0x2000000
001e46  67a0              STR      r0,[r4,#0x78]
                  |L1.7752|
;;;3459   	#endif
;;;3460   
;;;3461   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BPS))
001e48  20d2              MOVS     r0,#0xd2
001e4a  f7fffffe          BL       mess_find_unvol
001e4e  b110              CBZ      r0,|L1.7766|
001e50  6828              LDR      r0,[r5,#0]  ; mess_data
001e52  286a              CMP      r0,#0x6a
001e54  d030              BEQ      |L1.7864|
                  |L1.7766|
;;;3462   		{
;;;3463   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
;;;3464   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
;;;3465        	}
;;;3466   	else 
;;;3467   		{
;;;3468   		if(!(avar_ind_stat&0x100007f8)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
001e56  6830              LDR      r0,[r6,#0]  ; avar_ind_stat
001e58  4238              TST      r0,r7
001e5a  d03b              BEQ      |L1.7892|
;;;3469        	else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
001e5c  69a0              LDR      r0,[r4,#0x18]
001e5e  f0400020          ORR      r0,r0,#0x20
001e62  61a0              STR      r0,[r4,#0x18]
                  |L1.7780|
;;;3470   		}
;;;3471   	}
;;;3472   //   
;;;3473   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_EXT))	 
001e64  20d2              MOVS     r0,#0xd2
001e66  f7fffffe          BL       mess_find_unvol
001e6a  b110              CBZ      r0,|L1.7794|
001e6c  6828              LDR      r0,[r5,#0]  ; mess_data
001e6e  2871              CMP      r0,#0x71
001e70  d036              BEQ      |L1.7904|
                  |L1.7794|
;;;3474   	{
;;;3475   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,9,1);
;;;3476   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,9,1);
;;;3477   	}
;;;3478   else if(DOP_RELE_FUNC==0)	//     
001e72  48ff              LDR      r0,|L1.8816|
001e74  f9b00000          LDRSH    r0,[r0,#0]  ; DOP_RELE_FUNC
001e78  b388              CBZ      r0,|L1.7902|
;;;3479   	{
;;;3480   	if(!speedChIsOn) SET_REG(LPC_GPIO0->FIOCLR,1,9,1);
;;;3481   	else SET_REG(LPC_GPIO0->FIOSET,1,9,1);
;;;3482   	}
;;;3483   else if(DOP_RELE_FUNC==1)  //      
001e7a  2801              CMP      r0,#1
001e7c  d10a              BNE      |L1.7828|
;;;3484   	{
;;;3485   	if((mess_find_unvol(MESS2RELE_HNDL))&& (mess_data[0]==PARAM_RELE_BAT_IS_DISCHARGED)) SET_REG(LPC_GPIO0->FIOCLR,1,9,1);
001e7e  20d2              MOVS     r0,#0xd2
001e80  f7fffffe          BL       mess_find_unvol
001e84  b110              CBZ      r0,|L1.7820|
001e86  6828              LDR      r0,[r5,#0]  ; mess_data
001e88  2872              CMP      r0,#0x72
001e8a  d044              BEQ      |L1.7958|
                  |L1.7820|
;;;3486   	else SET_REG(LPC_GPIO0->FIOSET,1,9,1);
001e8c  69a0              LDR      r0,[r4,#0x18]
001e8e  f4407000          ORR      r0,r0,#0x200
001e92  61a0              STR      r0,[r4,#0x18]
                  |L1.7828|
;;;3487   	}	 	
;;;3488   #endif
;;;3489   
;;;3490   #ifdef UKU_KONTUR
;;;3491   
;;;3492   //  
;;;3493   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_COMM))
;;;3494   	{
;;;3495   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_COMM,1);
;;;3496   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_COMM,1);
;;;3497   	}
;;;3498   else 
;;;3499   	{
;;;3500        if(  (!(avar_ind_stat&0x00007fff)) &&
;;;3501             ((!SK_REL_EN[0]) || (sk_av_stat[0]!=sasON))  &&
;;;3502             ((!SK_REL_EN[1]) || (sk_av_stat[1]!=sasON))  &&
;;;3503             ((!SK_REL_EN[2]) || (sk_av_stat[2]!=sasON))  /*&&
;;;3504             ((!SK_REL_EN[3]) || (sk_av_stat[3]!=sasON))*/  )SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_COMM,1);
;;;3505        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_COMM,1);
;;;3506   	}
;;;3507   
;;;3508   	
;;;3509   //rel_warm_plazma=0;
;;;3510   //    
;;;3511   /*
;;;3512   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_WARM))
;;;3513   	{
;;;3514   	if(mess_data[1]==0)
;;;3515   		{
;;;3516   		SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_WARM,1);
;;;3517   		rel_warm_plazma=1;
;;;3518   		}
;;;3519   	else if(mess_data[1]==1) 
;;;3520   		{
;;;3521   		SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_WARM,1);
;;;3522   		rel_warm_plazma=2;
;;;3523   		}
;;;3524        }
;;;3525   else 
;;;3526   	{
;;;3527   	if(warm_stat_k==wsOFF) 
;;;3528   		{
;;;3529   		SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_WARM,1);
;;;3530   		rel_warm_plazma=3;
;;;3531   		}
;;;3532        else 
;;;3533   		{
;;;3534   		SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_WARM,1);
;;;3535   		rel_warm_plazma=4;
;;;3536   		}
;;;3537   	}
;;;3538   */
;;;3539   // 
;;;3540   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_LIGHT))
;;;3541   	{
;;;3542   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LIGHT,1);
;;;3543   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LIGHT,1);
;;;3544        }
;;;3545   else 
;;;3546   	{
;;;3547   	if(sk_av_stat[0]!=sasON) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LIGHT,1);
;;;3548        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LIGHT,1);
;;;3549   	}
;;;3550   
;;;3551   
;;;3552   
;;;3553   //  
;;;3554   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_LOAD_OFF))
;;;3555   	{
;;;3556   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LOAD_OFF,1);
;;;3557   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LOAD_OFF,1);
;;;3558        }
;;;3559   else if(tloaddisable_cmnd==0)
;;;3560   	{
;;;3561   	SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LOAD_OFF,1);
;;;3562   	}
;;;3563   else if((tloaddisable_cmnd)&&(tloaddisable_cmnd<=11))
;;;3564   	{
;;;3565   	SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LOAD_OFF,1);
;;;3566   	}
;;;3567   
;;;3568   else 
;;;3569   	{
;;;3570   	if(!(tloaddisable_stat==tldsON)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LOAD_OFF,1);
;;;3571        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LOAD_OFF,1);
;;;3572   	} 
;;;3573   
;;;3574   //    
;;;3575   if(RELE_LOG)
;;;3576   	{
;;;3577   	if((mess_find_unvol(MESS2RELE_HNDL))&&(mess_data[0]==PARAM_RELE_VENT_WARM))
;;;3578   		{
;;;3579   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT_WARM,1);
;;;3580   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT_WARM,1);
;;;3581   		}
;;;3582   	else 
;;;3583   		{
;;;3584   		if(warm_stat_k==wsOFF) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT_WARM,1);
;;;3585   	     else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT_WARM,1);
;;;3586   		} 
;;;3587   
;;;3588   	}
;;;3589   else 
;;;3590   	{
;;;3591   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_VENT_WARM))
;;;3592   		{
;;;3593   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT_WARM,1);
;;;3594   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT_WARM,1);
;;;3595   		}
;;;3596   	else 
;;;3597   		{
;;;3598   		if(vent_stat_k==vsOFF) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT_WARM,1);
;;;3599   	     else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT_WARM,1);
;;;3600   		} 
;;;3601   	}
;;;3602   #endif
;;;3603   
;;;3604   
;;;3605   #ifdef UKU_TELECORE2015
;;;3606   //  
;;;3607   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_NET))
;;;3608   	{
;;;3609   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;3610   	else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_NET,1);
;;;3611   	}
;;;3612   else	if(!(avar_ind_stat&0x00000001)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;3613   else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_NET,1);
;;;3614   
;;;3615   
;;;3616   // 
;;;3617   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_LIGHT))
;;;3618   	{
;;;3619   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LIGHT,1);
;;;3620   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LIGHT,1);
;;;3621        }
;;;3622   else 
;;;3623   	{
;;;3624   	if(sk_av_stat[0]!=sasON) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LIGHT,1);
;;;3625        else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LIGHT,1);
;;;3626   	}
;;;3627   
;;;3628   // 
;;;3629   if((mess_find_unvol(MESS2RELE_HNDL))&&(mess_data[0]==PARAM_RELE_WARM))
;;;3630   	{
;;;3631   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_WARM,1);
;;;3632   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_WARM,1);
;;;3633   	}
;;;3634   else 
;;;3635   	{
;;;3636   	if(warm_stat_k==wsOFF) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_WARM,1);
;;;3637        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_WARM,1);
;;;3638   	} 
;;;3639   // 
;;;3640   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_VENT))
;;;3641   	{
;;;3642   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT,1);
;;;3643   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;3644   	}
;;;3645   else 
;;;3646   	{
;;;3647   	if(vent_stat_k==vsOFF) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT,1);
;;;3648        else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;3649   	} 
;;;3650   
;;;3651   //  
;;;3652   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_VVENT))
;;;3653   	{
;;;3654   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VVENT,1);
;;;3655   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VVENT,1);
;;;3656   	}
;;;3657   else 
;;;3658   	{
;;;3659   	if(vvent_stat_k==vsOFF) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VVENT,1);
;;;3660        else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VVENT,1);
;;;3661   	} 
;;;3662   
;;;3663   #endif
;;;3664   
;;;3665   }
001e94  e4c0              B        |L1.6168|
                  |L1.7830|
001e96  6868              LDR      r0,[r5,#4]            ;3454  ; mess_data
001e98  b120              CBZ      r0,|L1.7844|
001e9a  69e0              LDR      r0,[r4,#0x1c]         ;3455
001e9c  f0407000          ORR      r0,r0,#0x2000000      ;3455
001ea0  61e0              STR      r0,[r4,#0x1c]         ;3455
001ea2  e7d1              B        |L1.7752|
                  |L1.7844|
001ea4  69a0              LDR      r0,[r4,#0x18]         ;3454
001ea6  f0407000          ORR      r0,r0,#0x2000000      ;3454
001eaa  61a0              STR      r0,[r4,#0x18]         ;3454
001eac  e7cc              B        |L1.7752|
                  |L1.7854|
001eae  6ba0              LDR      r0,[r4,#0x38]         ;3457
001eb0  f0407000          ORR      r0,r0,#0x2000000      ;3457
001eb4  63a0              STR      r0,[r4,#0x38]         ;3457
001eb6  e7c7              B        |L1.7752|
                  |L1.7864|
001eb8  6868              LDR      r0,[r5,#4]            ;3463  ; mess_data
001eba  b130              CBZ      r0,|L1.7882|
001ebc  2801              CMP      r0,#1                 ;3464
001ebe  d1d1              BNE      |L1.7780|
001ec0  69a0              LDR      r0,[r4,#0x18]         ;3464
001ec2  f0400020          ORR      r0,r0,#0x20           ;3464
001ec6  61a0              STR      r0,[r4,#0x18]         ;3464
001ec8  e7cc              B        |L1.7780|
                  |L1.7882|
001eca  69e0              LDR      r0,[r4,#0x1c]         ;3463
001ecc  f0400020          ORR      r0,r0,#0x20           ;3463
001ed0  61e0              STR      r0,[r4,#0x1c]         ;3463
001ed2  e7c7              B        |L1.7780|
                  |L1.7892|
001ed4  69e0              LDR      r0,[r4,#0x1c]         ;3468
001ed6  f0400020          ORR      r0,r0,#0x20           ;3468
001eda  61e0              STR      r0,[r4,#0x1c]         ;3468
001edc  e7c2              B        |L1.7780|
                  |L1.7902|
001ede  e00d              B        |L1.7932|
                  |L1.7904|
001ee0  6868              LDR      r0,[r5,#4]            ;3475  ; mess_data
001ee2  b130              CBZ      r0,|L1.7922|
001ee4  2801              CMP      r0,#1                 ;3476
001ee6  d1d5              BNE      |L1.7828|
001ee8  69a0              LDR      r0,[r4,#0x18]         ;3476
001eea  f4407000          ORR      r0,r0,#0x200          ;3476
001eee  61a0              STR      r0,[r4,#0x18]         ;3476
001ef0  e492              B        |L1.6168|
                  |L1.7922|
001ef2  69e0              LDR      r0,[r4,#0x1c]         ;3475
001ef4  f4407000          ORR      r0,r0,#0x200          ;3475
001ef8  61e0              STR      r0,[r4,#0x1c]         ;3475
001efa  e48d              B        |L1.6168|
                  |L1.7932|
001efc  48dd              LDR      r0,|L1.8820|
001efe  8800              LDRH     r0,[r0,#0]            ;3480  ; speedChIsOn
001f00  b120              CBZ      r0,|L1.7948|
001f02  69a0              LDR      r0,[r4,#0x18]         ;3481
001f04  f4407000          ORR      r0,r0,#0x200          ;3481
001f08  61a0              STR      r0,[r4,#0x18]         ;3481
001f0a  e485              B        |L1.6168|
                  |L1.7948|
001f0c  69e0              LDR      r0,[r4,#0x1c]         ;3480
001f0e  f4407000          ORR      r0,r0,#0x200          ;3480
001f12  61e0              STR      r0,[r4,#0x1c]         ;3480
001f14  e480              B        |L1.6168|
                  |L1.7958|
001f16  69e0              LDR      r0,[r4,#0x1c]         ;3485
001f18  f4407000          ORR      r0,r0,#0x200          ;3485
001f1c  61e0              STR      r0,[r4,#0x1c]         ;3485
001f1e  e47b              B        |L1.6168|
;;;3666   
                          ENDP

                  bps_hndl PROC
;;;3667   //-----------------------------------------------
;;;3668   void bps_hndl(void)
001f20  e92d5ff0          PUSH     {r4-r12,lr}
;;;3669   {
;;;3670   char ptr__,i;
;;;3671   unsigned short tempUS;
;;;3672   
;;;3673   if(sh_cnt0<10)
001f24  4ed4              LDR      r6,|L1.8824|
;;;3674   	{
;;;3675   	sh_cnt0++;
;;;3676   	if(sh_cnt0>=10)
;;;3677   		{
;;;3678   		sh_cnt0=0;
001f26  2700              MOVS     r7,#0
;;;3679   		b1Hz_sh=1;
001f28  f04f0a01          MOV      r10,#1
001f2c  7c70              LDRB     r0,[r6,#0x11]         ;3673  ; sh_cnt0
001f2e  280a              CMP      r0,#0xa               ;3673
001f30  d208              BCS      |L1.8004|
001f32  f1000001          ADD      r0,r0,#1              ;3675
001f36  b2c0              UXTB     r0,r0                 ;3675
001f38  7470              STRB     r0,[r6,#0x11]         ;3675
001f3a  280a              CMP      r0,#0xa               ;3676
001f3c  d302              BCC      |L1.8004|
001f3e  7477              STRB     r7,[r6,#0x11]         ;3678
001f40  f886a012          STRB     r10,[r6,#0x12]
                  |L1.8004|
;;;3680   		}
;;;3681   	}
;;;3682   
;;;3683   /*if(sh_cnt1<5)
;;;3684   	{
;;;3685   	sh_cnt1++;
;;;3686   	if(sh_cnt1==5)
;;;3687   		{
;;;3688   		sh_cnt1=0;
;;;3689   		b2Hz_sh=1;
;;;3690   		}
;;;3691   	} */
;;;3692   
;;;3693   
;;;3694   /*
;;;3695   if(mess_find(MESS_SRC_ON_OFF))
;;;3696   	{
;;;3697   	if(mess_data[0]==_MESS_SRC_MASK_BLOK_2SEC)
;;;3698   		{
;;;3699   		char i;
;;;3700   		for(i=0;i<NUMIST;i++)
;;;3701   			{
;;;3702   			if(mess_data[1]&(1<<i))src[i]._ist_blok_cnt=20;
;;;3703   			}
;;;3704   		
;;;3705   		}
;;;3706   	else if(mess_data[0]==_MESS_SRC_MASK_UNBLOK)
;;;3707   		{
;;;3708   		char i;
;;;3709   		for(i=0;i<NUMIST;i++)
;;;3710   			{
;;;3711   			if(mess_data[1]&(1<<i))src[i]._ist_blok_cnt=0;
;;;3712   			}
;;;3713   		
;;;3714   		}
;;;3715   	}
;;;3716   	
;;;3717   else if(mess_find(_MESS_SRC_MASK_ON))
;;;3718   	{				
;;;3719   	if(mess_data[0]==_MESS_SRC_MASK_ON)
;;;3720   		{
;;;3721   		char i;
;;;3722   		for(i=0;i<NUMIST;i++)
;;;3723   			{
;;;3724   			if(mess_data[1]&(1<<i))
;;;3725   				{
;;;3726   				src[i]._ist_blok_cnt=0;
;;;3727   				src[i]._flags_tu=2;
;;;3728   				}
;;;3729   			}
;;;3730   		
;;;3731   		}				
;;;3732   	}*/
;;;3733   
;;;3734   
;;;3735   
;;;3736   /*else*/ 
;;;3737   bps_on_mask=0;
001f44  f8a67048          STRH     r7,[r6,#0x48]
;;;3738   bps_off_mask=0;
001f48  f8a6704a          STRH     r7,[r6,#0x4a]
;;;3739   
;;;3740   if(mess_find_unvol(MESS2BPS_HNDL))
001f4c  20cd              MOVS     r0,#0xcd
001f4e  f7fffffe          BL       mess_find_unvol
;;;3741   	{
;;;3742   	if(mess_data[0]==PARAM_BPS_ALL_OFF_AFTER_2SEC)
;;;3743   		{
;;;3744   		bps_off_mask=0xffff;
;;;3745   		}
;;;3746   
;;;3747   	if(mess_data[0]==PARAM_BPS_MASK_OFF_AFTER_2SEC)
;;;3748   		{
;;;3749   		bps_off_mask=mess_data[1];
;;;3750   		}
;;;3751   
;;;3752   	if(mess_data[0]==PARAM_BPS_MASK_ON)
;;;3753   		{
;;;3754   		bps_on_mask=mess_data[1];
;;;3755   		}
;;;3756   
;;;3757   	if(mess_data[0]==PARAM_BPS_ALL_ON)
;;;3758   		{
;;;3759   		bps_on_mask=0xffff;
;;;3760   		}
;;;3761   
;;;3762   	if(mess_data[0]==PARAM_BPS_MASK_ON_OFF_AFTER_2SEC)
;;;3763   		{
;;;3764   		bps_on_mask=mess_data[1];
;;;3765   		bps_off_mask=~(mess_data[1]);
;;;3766   		}
;;;3767   
;;;3768   
;;;3769   	for(i=0;i<=NUMIST;i++)
;;;3770   		{
;;;3771   		if(bps_off_mask&(1<<i)) bps[i]._blok_cnt++;
001f52  f8df8328          LDR      r8,|L1.8828|
001f56  f8dfb328          LDR      r11,|L1.8832|
001f5a  b3a0              CBZ      r0,|L1.8134|
001f5c  49c9              LDR      r1,|L1.8836|
001f5e  f64f73ff          MOV      r3,#0xffff            ;3744
001f62  6808              LDR      r0,[r1,#0]            ;3742  ; mess_data
001f64  28ce              CMP      r0,#0xce              ;3742
001f66  d101              BNE      |L1.8044|
001f68  f8a6304a          STRH     r3,[r6,#0x4a]         ;3744
                  |L1.8044|
001f6c  28cf              CMP      r0,#0xcf              ;3747
001f6e  d102              BNE      |L1.8054|
001f70  684a              LDR      r2,[r1,#4]            ;3749  ; mess_data
001f72  f8a6204a          STRH     r2,[r6,#0x4a]         ;3749
                  |L1.8054|
001f76  28d1              CMP      r0,#0xd1              ;3752
001f78  d102              BNE      |L1.8064|
001f7a  684a              LDR      r2,[r1,#4]            ;3754  ; mess_data
001f7c  f8a62048          STRH     r2,[r6,#0x48]         ;3754
                  |L1.8064|
001f80  28d2              CMP      r0,#0xd2              ;3757
001f82  d101              BNE      |L1.8072|
001f84  f8a63048          STRH     r3,[r6,#0x48]         ;3759
                  |L1.8072|
001f88  28d0              CMP      r0,#0xd0              ;3762
001f8a  d106              BNE      |L1.8090|
001f8c  6848              LDR      r0,[r1,#4]            ;3764  ; mess_data
001f8e  f8a60048          STRH     r0,[r6,#0x48]         ;3764
001f92  ea6f0000          MVN      r0,r0                 ;3765
001f96  f8a6004a          STRH     r0,[r6,#0x4a]         ;3765
                  |L1.8090|
001f9a  f04f0400          MOV      r4,#0                 ;3769
001f9e  e037              B        |L1.8208|
                  |L1.8096|
001fa0  f8b6004a          LDRH     r0,[r6,#0x4a]  ; bps_off_mask
001fa4  fa0af904          LSL      r9,r10,r4
001fa8  ea190f00          TST      r9,r0
001fac  d00c              BEQ      |L1.8136|
001fae  ebc400c4          RSB      r0,r4,r4,LSL #3
001fb2  eb001004          ADD      r0,r0,r4,LSL #4
001fb6  eb080080          ADD      r0,r8,r0,LSL #2
001fba  f8301f40          LDRH     r1,[r0,#0x40]!
001fbe  f1010101          ADD      r1,r1,#1
001fc2  8001              STRH     r1,[r0,#0]
001fc4  e008              B        |L1.8152|
                  |L1.8134|
001fc6  e028              B        |L1.8218|
                  |L1.8136|
;;;3772   		else bps[i]._blok_cnt=0;
001fc8  ebc400c4          RSB      r0,r4,r4,LSL #3
001fcc  eb001004          ADD      r0,r0,r4,LSL #4
001fd0  eb080080          ADD      r0,r8,r0,LSL #2
001fd4  f8a07040          STRH     r7,[r0,#0x40]
                  |L1.8152|
;;;3773   		gran(&bps[i]._blok_cnt,0,50);
001fd8  ebc400c4          RSB      r0,r4,r4,LSL #3
001fdc  eb001004          ADD      r0,r0,r4,LSL #4
001fe0  eb080580          ADD      r5,r8,r0,LSL #2
001fe4  f1050040          ADD      r0,r5,#0x40
001fe8  2232              MOVS     r2,#0x32
001fea  2100              MOVS     r1,#0
001fec  f7fffffe          BL       gran
;;;3774   		if(bps[i]._blok_cnt>20) bps[i]._flags_tu=1;
001ff0  f9b50040          LDRSH    r0,[r5,#0x40]
001ff4  2814              CMP      r0,#0x14
001ff6  dd01              BLE      |L1.8188|
001ff8  f885a02c          STRB     r10,[r5,#0x2c]
                  |L1.8188|
;;;3775   		if(bps_on_mask&(1<<i)) bps[i]._flags_tu=0;
001ffc  f8b60048          LDRH     r0,[r6,#0x48]  ; bps_on_mask
002000  ea190f00          TST      r9,r0
002004  d001              BEQ      |L1.8202|
002006  f885702c          STRB     r7,[r5,#0x2c]
                  |L1.8202|
00200a  f1040401          ADD      r4,r4,#1              ;3769
00200e  b2e4              UXTB     r4,r4                 ;3769
                  |L1.8208|
002010  f9bb0000          LDRSH    r0,[r11,#0]           ;3769  ; NUMIST
002014  4284              CMP      r4,r0                 ;3769
002016  ddc3              BLE      |L1.8096|
002018  e08a              B        |L1.8496|
                  |L1.8218|
;;;3776   	     }
;;;3777   
;;;3778   	
;;;3779   /*
;;;3780   
;;;3781   	if(bps_all_off_cnt>20)
;;;3782   		{
;;;3783   		for(i=0;i<=NUMIST;i++)
;;;3784   			{
;;;3785   	     	bps[i]._flags_tu=1;
;;;3786   	     	}
;;;3787   		}
;;;3788   	else if(bps_mask_off_cnt>20)
;;;3789   		{
;;;3790   		for(i=0;i<=NUMIST;i++)
;;;3791   			{
;;;3792   			if(mess_data[1]&(1<<i)) bps[i]._flags_tu=1;
;;;3793   	     	}
;;;3794   		}	
;;;3795   		
;;;3796   	else if(bps_mask_on_off_cnt>20)
;;;3797   		{
;;;3798   		for(i=0;i<=NUMIST;i++)
;;;3799   			{
;;;3800   			if(mess_data[1]&(1<<i)) bps[i]._flags_tu=1;
;;;3801   			else bps[i]._flags_tu=0;
;;;3802   	     	}
;;;3803   		}
;;;3804   		
;;;3805   	if(mess_data[0]==PARAM_BPS_MASK_ON)
;;;3806   		{
;;;3807   		for(i=0;i<=NUMIST;i++)
;;;3808   			{
;;;3809   			if(mess_data[1]&(1<<i)) bps[i]._flags_tu=0;
;;;3810   	     	}
;;;3811   		}
;;;3812   */										
;;;3813   	}
;;;3814   
;;;3815   
;;;3816   else if(b1Hz_sh)
00201a  7cb0              LDRB     r0,[r6,#0x12]  ; b1Hz_sh
00201c  b3f0              CBZ      r0,|L1.8348|
;;;3817   	{
;;;3818   	ptr__=0;
00201e  f04f0400          MOV      r4,#0
;;;3819        for(i=0;i<=NUMIST;i++)
002022  4621              MOV      r1,r4
002024  f9bb0000          LDRSH    r0,[r11,#0]           ;3769
002028  e00a              B        |L1.8256|
                  |L1.8234|
;;;3820   		{
;;;3821   	     bps[i]._flags_tu=1;
00202a  ebc102c1          RSB      r2,r1,r1,LSL #3
00202e  eb021201          ADD      r2,r2,r1,LSL #4
002032  eb080282          ADD      r2,r8,r2,LSL #2
002036  f882a02c          STRB     r10,[r2,#0x2c]
00203a  f1010101          ADD      r1,r1,#1              ;3819
00203e  b2c9              UXTB     r1,r1                 ;3819
                  |L1.8256|
002040  4281              CMP      r1,r0                 ;3819
002042  ddf2              BLE      |L1.8234|
;;;3822   	     }	
;;;3823     	     
;;;3824     	for(i=0;(i<NUMIST)&&(ptr__<num_necc);i++)
002044  f04f0100          MOV      r1,#0
002048  e022              B        |L1.8336|
                  |L1.8266|
;;;3825     		{
;;;3826   		char ii,iii;
;;;3827   
;;;3828   		ii=(char)NUMIST;
00204a  b2c2              UXTB     r2,r0
;;;3829   		//if(ii<0)ii=0;
;;;3830   		if(ii>32)ii=32;
00204c  2a20              CMP      r2,#0x20
00204e  d901              BLS      |L1.8276|
002050  f04f0220          MOV      r2,#0x20
                  |L1.8276|
;;;3831   		iii=numOfForvardBps;
002054  7e33              LDRB     r3,[r6,#0x18]  ; numOfForvardBps
;;;3832   		if(iii<0)iii=0;
;;;3833   		if(iii>=NUMIST)iii=0;
002056  4283              CMP      r3,r0
002058  db01              BLT      |L1.8286|
00205a  f04f0300          MOV      r3,#0
                  |L1.8286|
;;;3834   		iii+=i;
00205e  440b              ADD      r3,r3,r1
002060  b2db              UXTB     r3,r3
;;;3835   		iii=iii%ii;
002062  fbb3f5f2          UDIV     r5,r3,r2
002066  fb023215          MLS      r2,r2,r5,r3
;;;3836   		
;;;3837     	     if((bps[iii]._state==bsRDY)||(bps[iii]._state==bsWRK))
00206a  ebc203c2          RSB      r3,r2,r2,LSL #3
00206e  eb031202          ADD      r2,r3,r2,LSL #4
002072  eb080282          ADD      r2,r8,r2,LSL #2
002076  7893              LDRB     r3,[r2,#2]
002078  2b02              CMP      r3,#2
00207a  d001              BEQ      |L1.8320|
00207c  2b01              CMP      r3,#1
00207e  d104              BNE      |L1.8330|
                  |L1.8320|
;;;3838     	         	{
;;;3839     	         	bps[iii]._flags_tu=0;
002080  f882702c          STRB     r7,[r2,#0x2c]
;;;3840     	         	ptr__++;
002084  f1040401          ADD      r4,r4,#1
002088  b2e4              UXTB     r4,r4
                  |L1.8330|
00208a  f1010101          ADD      r1,r1,#1              ;3824
00208e  b2c9              UXTB     r1,r1                 ;3824
                  |L1.8336|
002090  4281              CMP      r1,r0                 ;3824
002092  da06              BGE      |L1.8354|
002094  4a7c              LDR      r2,|L1.8840|
002096  f9b22000          LDRSH    r2,[r2,#0]            ;3824  ; num_necc
00209a  e000              B        |L1.8350|
                  |L1.8348|
00209c  e048              B        |L1.8496|
                  |L1.8350|
00209e  4294              CMP      r4,r2                 ;3824
0020a0  dbd3              BLT      |L1.8266|
                  |L1.8354|
;;;3841     	         	}
;;;3842   			
;;;3843     	     }
;;;3844   	bps[numOfForvardBps_old]._flags_tu=0;
0020a2  7e71              LDRB     r1,[r6,#0x19]  ; numOfForvardBps_old
0020a4  ebc102c1          RSB      r2,r1,r1,LSL #3
0020a8  eb021101          ADD      r1,r2,r1,LSL #4
0020ac  eb080181          ADD      r1,r8,r1,LSL #2
0020b0  f881702c          STRB     r7,[r1,#0x2c]
;;;3845   
;;;3846   	if(main_1Hz_cnt<60)
0020b4  4975              LDR      r1,|L1.8844|
0020b6  f9b11000          LDRSH    r1,[r1,#0]  ; main_1Hz_cnt
0020ba  293c              CMP      r1,#0x3c
0020bc  da0f              BGE      |L1.8414|
;;;3847   		{
;;;3848        	for(i=0;i<=NUMIST;i++)
0020be  f04f0100          MOV      r1,#0
0020c2  e00a              B        |L1.8410|
                  |L1.8388|
;;;3849   			{
;;;3850   	     	bps[i]._flags_tu=0;
0020c4  ebc102c1          RSB      r2,r1,r1,LSL #3
0020c8  eb021201          ADD      r2,r2,r1,LSL #4
0020cc  eb080282          ADD      r2,r8,r2,LSL #2
0020d0  f882702c          STRB     r7,[r2,#0x2c]
0020d4  f1010101          ADD      r1,r1,#1              ;3848
0020d8  b2c9              UXTB     r1,r1                 ;3848
                  |L1.8410|
0020da  4281              CMP      r1,r0                 ;3848
0020dc  ddf2              BLE      |L1.8388|
                  |L1.8414|
;;;3851   	     	}	
;;;3852   		}
;;;3853   	if(ipsBlckStat)
0020de  496c              LDR      r1,|L1.8848|
0020e0  8809              LDRH     r1,[r1,#0]  ; ipsBlckStat
0020e2  b179              CBZ      r1,|L1.8452|
;;;3854   		{
;;;3855        	for(i=0;i<=NUMIST;i++)
0020e4  f04f0100          MOV      r1,#0
0020e8  e00a              B        |L1.8448|
                  |L1.8426|
;;;3856   			{
;;;3857   	     	bps[i]._flags_tu=1;
0020ea  ebc102c1          RSB      r2,r1,r1,LSL #3
0020ee  eb021201          ADD      r2,r2,r1,LSL #4
0020f2  eb080282          ADD      r2,r8,r2,LSL #2
0020f6  f882a02c          STRB     r10,[r2,#0x2c]
0020fa  f1010101          ADD      r1,r1,#1              ;3855
0020fe  b2c9              UXTB     r1,r1                 ;3855
                  |L1.8448|
002100  4281              CMP      r1,r0                 ;3855
002102  ddf2              BLE      |L1.8426|
                  |L1.8452|
;;;3858   	     	}
;;;3859   		}
;;;3860   
;;;3861        for(i=0;i<=NUMIST;i++)
002104  f04f0100          MOV      r1,#0
;;;3862   		{
;;;3863   	    if(bps[i]._flags_tu==1) 	bps[i]._x_=-50;
002108  f06f0331          MVN      r3,#0x31
00210c  e00e              B        |L1.8492|
                  |L1.8462|
00210e  ebc102c1          RSB      r2,r1,r1,LSL #3
002112  eb021201          ADD      r2,r2,r1,LSL #4
002116  eb080282          ADD      r2,r8,r2,LSL #2
00211a  f892402c          LDRB     r4,[r2,#0x2c]
00211e  2c01              CMP      r4,#1
002120  d101              BNE      |L1.8486|
002122  f8a23050          STRH     r3,[r2,#0x50]
                  |L1.8486|
002126  f1010101          ADD      r1,r1,#1              ;3861
00212a  b2c9              UXTB     r1,r1                 ;3861
                  |L1.8492|
00212c  4281              CMP      r1,r0                 ;3861
00212e  ddee              BLE      |L1.8462|
                  |L1.8496|
;;;3864   	   	}	
;;;3865   		 
;;;3866     	}
;;;3867   
;;;3868   
;;;3869   for(i=0;i<NUMIST;i++)
002130  f04f0000          MOV      r0,#0
;;;3870        {
;;;3871        if(bps[i]._ist_blok_host_cnt!=0)
;;;3872             {
;;;3873             bps[i]._flags_tu=99;
002134  f04f0463          MOV      r4,#0x63
002138  f9bb3000          LDRSH    r3,[r11,#0]           ;3769
00213c  e00f              B        |L1.8542|
                  |L1.8510|
00213e  ebc001c0          RSB      r1,r0,r0,LSL #3       ;3871
002142  eb011100          ADD      r1,r1,r0,LSL #4       ;3871
002146  eb080181          ADD      r1,r8,r1,LSL #2       ;3871
00214a  6bca              LDR      r2,[r1,#0x3c]         ;3871
00214c  b122              CBZ      r2,|L1.8536|
00214e  f881402c          STRB     r4,[r1,#0x2c]
;;;3874   	     bps[i]._ist_blok_host_cnt--;
002152  f1a20201          SUB      r2,r2,#1
002156  63ca              STR      r2,[r1,#0x3c]
                  |L1.8536|
002158  f1000001          ADD      r0,r0,#1              ;3869
00215c  b2c0              UXTB     r0,r0                 ;3869
                  |L1.8542|
00215e  4298              CMP      r0,r3                 ;3869
002160  dbed              BLT      |L1.8510|
;;;3875             }
;;;3876        }
;;;3877   
;;;3878   
;;;3879   
;;;3880   
;;;3881   b1Hz_sh=0;
002162  74b7              STRB     r7,[r6,#0x12]
;;;3882   
;;;3883   
;;;3884   num_of_wrks_bps=0;
002164  73b7              STRB     r7,[r6,#0xe]
;;;3885   tempUS=0;
002166  f04f0100          MOV      r1,#0
;;;3886   for(i=0;i<NUMIST;i++)
00216a  4608              MOV      r0,r1
00216c  e013              B        |L1.8598|
                  |L1.8558|
;;;3887   	{
;;;3888   	if(bps[i]._state==bsWRK)
00216e  ebc002c0          RSB      r2,r0,r0,LSL #3
002172  eb021200          ADD      r2,r2,r0,LSL #4
002176  eb080282          ADD      r2,r8,r2,LSL #2
00217a  7894              LDRB     r4,[r2,#2]
00217c  2c01              CMP      r4,#1
00217e  d107              BNE      |L1.8592|
;;;3889   		{
;;;3890   		num_of_wrks_bps++;
002180  7bb4              LDRB     r4,[r6,#0xe]  ; num_of_wrks_bps
002182  f1040401          ADD      r4,r4,#1
002186  73b4              STRB     r4,[r6,#0xe]
;;;3891   		if(bps[i]._Uii>tempUS)tempUS=bps[i]._Uii;
002188  69d2              LDR      r2,[r2,#0x1c]
00218a  428a              CMP      r2,r1
00218c  dd00              BLE      |L1.8592|
00218e  b291              UXTH     r1,r2
                  |L1.8592|
002190  f1000001          ADD      r0,r0,#1              ;3886
002194  b2c0              UXTB     r0,r0                 ;3886
                  |L1.8598|
002196  4298              CMP      r0,r3                 ;3886
002198  dbe9              BLT      |L1.8558|
;;;3892   		}
;;;3893   	}
;;;3894   Ubpsmax=tempUS;
00219a  87b1              STRH     r1,[r6,#0x3c]
;;;3895   
;;;3896   }
00219c  e8bd9ff0          POP      {r4-r12,pc}
;;;3897   
                          ENDP

                  powerAntiAliasingHndl PROC
;;;3904   //-----------------------------------------------
;;;3905   void powerAntiAliasingHndl(void)
0021a0  b570              PUSH     {r4-r6,lr}
;;;3906   {
;;;3907   if((power_summary_tempo/10UL)==(power_summary_tempo_old/10UL))
0021a2  230a              MOVS     r3,#0xa
0021a4  4c3c              LDR      r4,|L1.8856|
0021a6  483b              LDR      r0,|L1.8852|
;;;3908   	{
;;;3909   	if(powerSummaryCnt<15)powerSummaryCnt++;
;;;3910   	if(powerSummaryCnt>=10)
;;;3911   		{
;;;3912   		power_summary=power_summary_tempo;
;;;3913   		}
;;;3914   	}
;;;3915   else powerSummaryCnt=0;
0021a8  2500              MOVS     r5,#0
0021aa  6822              LDR      r2,[r4,#0]            ;3907  ; power_summary_tempo_old
0021ac  6800              LDR      r0,[r0,#0]            ;3907  ; power_summary_tempo
0021ae  fbb2f6f3          UDIV     r6,r2,r3              ;3907
0021b2  fbb0f1f3          UDIV     r1,r0,r3              ;3907
0021b6  4a39              LDR      r2,|L1.8860|
0021b8  42b1              CMP      r1,r6                 ;3907
0021ba  d10b              BNE      |L1.8660|
0021bc  7811              LDRB     r1,[r2,#0]            ;3909  ; powerSummaryCnt
0021be  290f              CMP      r1,#0xf               ;3909
0021c0  d202              BCS      |L1.8648|
0021c2  f1010101          ADD      r1,r1,#1              ;3909
0021c6  7011              STRB     r1,[r2,#0]            ;3909
                  |L1.8648|
0021c8  7811              LDRB     r1,[r2,#0]            ;3910  ; powerSummaryCnt
0021ca  290a              CMP      r1,#0xa               ;3910
0021cc  d303              BCC      |L1.8662|
0021ce  4934              LDR      r1,|L1.8864|
0021d0  6008              STR      r0,[r1,#0]            ;3912  ; power_summary
0021d2  e000              B        |L1.8662|
                  |L1.8660|
0021d4  7015              STRB     r5,[r2,#0]
                  |L1.8662|
;;;3916   power_summary_tempo_old=power_summary_tempo;
0021d6  6020              STR      r0,[r4,#0]  ; power_summary_tempo_old
;;;3917   
;;;3918   if((power_current_tempo/10UL)==(power_current_tempo_old/10UL))
0021d8  4832              LDR      r0,|L1.8868|
0021da  4c33              LDR      r4,|L1.8872|
0021dc  f9b00000          LDRSH    r0,[r0,#0]  ; power_current_tempo
0021e0  f9b42000          LDRSH    r2,[r4,#0]  ; power_current_tempo_old
0021e4  fbb0f1f3          UDIV     r1,r0,r3
0021e8  fbb2f3f3          UDIV     r3,r2,r3
;;;3919   	{
;;;3920   	if(powerCurrentCnt<15)powerCurrentCnt++;
0021ec  4a2f              LDR      r2,|L1.8876|
0021ee  4299              CMP      r1,r3                 ;3918
0021f0  d10b              BNE      |L1.8714|
0021f2  7811              LDRB     r1,[r2,#0]  ; powerCurrentCnt
0021f4  290f              CMP      r1,#0xf
0021f6  d202              BCS      |L1.8702|
0021f8  f1010101          ADD      r1,r1,#1
0021fc  7011              STRB     r1,[r2,#0]
                  |L1.8702|
;;;3921   	if(powerCurrentCnt>=10)
0021fe  7811              LDRB     r1,[r2,#0]  ; powerCurrentCnt
002200  290a              CMP      r1,#0xa
002202  d303              BCC      |L1.8716|
;;;3922   		{
;;;3923   		power_current=power_current_tempo;
002204  492a              LDR      r1,|L1.8880|
002206  8008              STRH     r0,[r1,#0]
002208  e000              B        |L1.8716|
                  |L1.8714|
;;;3924   		}
;;;3925   	}
;;;3926   else powerCurrentCnt=0;
00220a  7015              STRB     r5,[r2,#0]
                  |L1.8716|
;;;3927   power_current_tempo_old=power_current_tempo;
00220c  8020              STRH     r0,[r4,#0]
;;;3928   }
00220e  bd70              POP      {r4-r6,pc}
;;;3929   
                          ENDP

                  ips_current_average_hndl PROC
;;;3930   //-----------------------------------------------
;;;3931   void ips_current_average_hndl(void)
002210  e92d43f0          PUSH     {r4-r9,lr}
;;;3932   {
002214  b085              SUB      sp,sp,#0x14
;;;3933   if(++ica_timer_cnt>=10)
002216  4c27              LDR      r4,|L1.8884|
;;;3934   	{
;;;3935   	ica_timer_cnt=0;
002218  2500              MOVS     r5,#0
;;;3936   	ica_plazma[0]++;
;;;3937   
;;;3938   	ica_my_current=bps_I;
;;;3939   
;;;3940   	if((ica_my_current>ica_your_current)&&((ica_my_current-ica_your_current)>=10)&&(ICA_EN==1))
00221a  4e27              LDR      r6,|L1.8888|
00221c  7820              LDRB     r0,[r4,#0]            ;3933  ; ica_timer_cnt
00221e  1c40              ADDS     r0,r0,#1              ;3933
002220  b2c0              UXTB     r0,r0                 ;3933
002222  7020              STRB     r0,[r4,#0]            ;3933
002224  280a              CMP      r0,#0xa               ;3933
002226  d371              BCC      |L1.8972|
002228  7025              STRB     r5,[r4,#0]            ;3935
00222a  f8dfc090          LDR      r12,|L1.8892|
00222e  f89c0000          LDRB     r0,[r12,#0]           ;3936  ; ica_plazma
002232  f1000001          ADD      r0,r0,#1              ;3936
002236  f88c0000          STRB     r0,[r12,#0]           ;3936
00223a  4821              LDR      r0,|L1.8896|
00223c  4921              LDR      r1,|L1.8900|
00223e  f9b00000          LDRSH    r0,[r0,#0]            ;3938  ; bps_I
002242  8008              STRH     r0,[r1,#0]            ;3938
002244  4920              LDR      r1,|L1.8904|
;;;3941   		{
;;;3942   		ica_plazma[1]++;
;;;3943   		ica_u_necc--;
002246  f8df8084          LDR      r8,|L1.8908|
00224a  4662              MOV      r2,r12                ;3936
00224c  4637              MOV      r7,r6                 ;3940
00224e  f9b11000          LDRSH    r1,[r1,#0]            ;3940  ; ica_your_current
002252  7852              LDRB     r2,[r2,#1]            ;3942
002254  f9b83000          LDRSH    r3,[r8,#0]
002258  f9b77000          LDRSH    r7,[r7,#0]            ;3940
00225c  4288              CMP      r0,r1                 ;3940
00225e  dd06              BLE      |L1.8814|
002260  eba00901          SUB      r9,r0,r1              ;3940
002264  f1b90f0a          CMP      r9,#0xa               ;3940
002268  db01              BLT      |L1.8814|
00226a  2f01              CMP      r7,#1                 ;3940
00226c  d038              BEQ      |L1.8928|
                  |L1.8814|
;;;3944   		}
;;;3945   	else if((ica_my_current<ica_your_current)&&((ica_your_current-ica_my_current)>=10)&&(ICA_EN==1))
00226e  e02f              B        |L1.8912|
                  |L1.8816|
                          DCD      DOP_RELE_FUNC
                  |L1.8820|
                          DCD      speedChIsOn
                  |L1.8824|
                          DCD      ||area_number.21||
                  |L1.8828|
                          DCD      bps
                  |L1.8832|
                          DCD      NUMIST
                  |L1.8836|
                          DCD      mess_data
                  |L1.8840|
                          DCD      num_necc
                  |L1.8844|
                          DCD      main_1Hz_cnt
                  |L1.8848|
                          DCD      ipsBlckStat
                  |L1.8852|
                          DCD      power_summary_tempo
                  |L1.8856|
                          DCD      power_summary_tempo_old
                  |L1.8860|
                          DCD      powerSummaryCnt
                  |L1.8864|
                          DCD      power_summary
                  |L1.8868|
                          DCD      power_current_tempo
                  |L1.8872|
                          DCD      power_current_tempo_old
                  |L1.8876|
                          DCD      powerCurrentCnt
                  |L1.8880|
                          DCD      power_current
                  |L1.8884|
                          DCD      ica_timer_cnt
                  |L1.8888|
                          DCD      ICA_EN
                  |L1.8892|
                          DCD      ica_plazma
                  |L1.8896|
                          DCD      bps_I
                  |L1.8900|
                          DCD      ica_my_current
                  |L1.8904|
                          DCD      ica_your_current
                  |L1.8908|
                          DCD      ica_u_necc
                  |L1.8912|
0022d0  4288              CMP      r0,r1
0022d2  da16              BGE      |L1.8962|
0022d4  1a08              SUBS     r0,r1,r0
0022d6  280a              CMP      r0,#0xa
0022d8  db13              BLT      |L1.8962|
0022da  2f01              CMP      r7,#1
0022dc  d009              BEQ      |L1.8946|
0022de  e010              B        |L1.8962|
                  |L1.8928|
0022e0  f1020201          ADD      r2,r2,#1              ;3942
0022e4  f88c2001          STRB     r2,[r12,#1]           ;3942
0022e8  f1a30301          SUB      r3,r3,#1              ;3943
0022ec  f8a83000          STRH     r3,[r8,#0]            ;3943
0022f0  e007              B        |L1.8962|
                  |L1.8946|
;;;3946   		{
;;;3947   		ica_plazma[1]--;
0022f2  f1a20201          SUB      r2,r2,#1
0022f6  f88c2001          STRB     r2,[r12,#1]
;;;3948   		ica_u_necc++;
0022fa  f1030301          ADD      r3,r3,#1
0022fe  f8a83000          STRH     r3,[r8,#0]
                  |L1.8962|
;;;3949   		}
;;;3950   	gran(&ica_u_necc,-20,20);
002302  2214              MOVS     r2,#0x14
002304  4251              RSBS     r1,r2,#0
002306  48ff              LDR      r0,|L1.9988|
002308  f7fffffe          BL       gran
                  |L1.8972|
;;;3951   	}
;;;3952   
;;;3953   if((ica_timer_cnt==8)&&(ICA_EN==1))
00230c  7820              LDRB     r0,[r4,#0]  ; ica_timer_cnt
00230e  2808              CMP      r0,#8
002310  d134              BNE      |L1.9084|
002312  8830              LDRH     r0,[r6,#0]  ; ICA_EN
002314  2801              CMP      r0,#1
002316  d131              BNE      |L1.9084|
;;;3954   	{
;;;3955   	char modbus_buff[20],i;
;;;3956   	short crc_temp;
;;;3957   
;;;3958   	modbus_buff[0] = ICA_MODBUS_ADDRESS;
002318  48fb              LDR      r0,|L1.9992|
00231a  8800              LDRH     r0,[r0,#0]  ; ICA_MODBUS_ADDRESS
00231c  f88d0000          STRB     r0,[sp,#0]
;;;3959   	modbus_buff[1] = 4;
002320  f04f0004          MOV      r0,#4
002324  f88d0001          STRB     r0,[sp,#1]
;;;3960   	modbus_buff[2] = 0;
002328  f88d5002          STRB     r5,[sp,#2]
;;;3961   	modbus_buff[3] = 2;
00232c  f04f0002          MOV      r0,#2
002330  f88d0003          STRB     r0,[sp,#3]
;;;3962   	modbus_buff[4] = 0;	
002334  f88d5004          STRB     r5,[sp,#4]
;;;3963   	modbus_buff[5] = 1;
002338  f04f0001          MOV      r0,#1
00233c  f88d0005          STRB     r0,[sp,#5]
;;;3964   
;;;3965   	crc_temp= CRC16_2(modbus_buff,6);
002340  f04f0106          MOV      r1,#6
002344  4668              MOV      r0,sp
002346  f7fffffe          BL       CRC16_2
;;;3966   
;;;3967   	modbus_buff[6]= (char)crc_temp;
00234a  f88d0006          STRB     r0,[sp,#6]
;;;3968   	modbus_buff[7]= (char)(crc_temp>>8);
00234e  ea4f2020          ASR      r0,r0,#8
002352  f88d0007          STRB     r0,[sp,#7]
;;;3969   
;;;3970   	if(ICA_CH==0)
002356  48ed              LDR      r0,|L1.9996|
002358  f9b00000          LDRSH    r0,[r0,#0]  ; ICA_CH
00235c  b188              CBZ      r0,|L1.9090|
;;;3971   		{
;;;3972   		for (i=0;i<8;i++)
;;;3973   			{
;;;3974   			putchar_sc16is700(modbus_buff[i]);
;;;3975   			}
;;;3976   		}
;;;3977   	else if(ICA_CH==1)
00235e  2801              CMP      r0,#1
002360  d10c              BNE      |L1.9084|
;;;3978   		{
;;;3979   		static U8 rem_IP[4];
;;;3980   		rem_IP[0]=ICA_MODBUS_TCP_IP1;
002362  48eb              LDR      r0,|L1.10000|
002364  8801              LDRH     r1,[r0,#0]  ; ICA_MODBUS_TCP_IP1
002366  48eb              LDR      r0,|L1.10004|
002368  7001              STRB     r1,[r0,#0]
;;;3981   		rem_IP[1]=ICA_MODBUS_TCP_IP2;
00236a  49eb              LDR      r1,|L1.10008|
00236c  8809              LDRH     r1,[r1,#0]  ; ICA_MODBUS_TCP_IP2
00236e  7041              STRB     r1,[r0,#1]
;;;3982   		rem_IP[2]=ICA_MODBUS_TCP_IP3;
002370  49ea              LDR      r1,|L1.10012|
002372  8809              LDRH     r1,[r1,#0]  ; ICA_MODBUS_TCP_IP3
002374  7081              STRB     r1,[r0,#2]
;;;3983   		rem_IP[3]=ICA_MODBUS_TCP_IP4;
002376  49ea              LDR      r1,|L1.10016|
002378  8809              LDRH     r1,[r1,#0]  ; ICA_MODBUS_TCP_IP4
00237a  70c1              STRB     r1,[r0,#3]
                  |L1.9084|
;;;3984     		//tcp_soc_avg = tcp_get_socket (TCP_TYPE_CLIENT, 0, 30, tcp_callback);
;;;3985     		if (tcp_soc_avg != 0) 
;;;3986   			{
;;;3987       		
;;;3988   			//tcp_connect_stat=0;
;;;3989       		//tcp_connect (tcp_soc_avg, rem_IP, 502, 1000);
;;;3990   			/*while(!tcp_connect_stat)
;;;3991   				{
;;;3992   				}*/
;;;3993   			//delay_us(500);
;;;3994   			//tcp_close(tcp_soc_avg);
;;;3995   
;;;3996   			}
;;;3997   		}
;;;3998   	}
;;;3999   
;;;4000   if((ica_timer_cnt==3)&&(ICA_EN==1))
;;;4001   	{
;;;4002   	//if(tcp_connect_stat)
;;;4003   		{
;;;4004   		//tcp_close(tcp_soc_avg);
;;;4005   		//tcp_connect_stat=3;
;;;4006   		}
;;;4007   	}
;;;4008   
;;;4009   }
00237c  b005              ADD      sp,sp,#0x14
00237e  e8bd83f0          POP      {r4-r9,pc}
                  |L1.9090|
002382  f04f0400          MOV      r4,#0                 ;3972
002386  466d              MOV      r5,sp                 ;3955
                  |L1.9096|
002388  5d28              LDRB     r0,[r5,r4]            ;3974
00238a  f7fffffe          BL       putchar_sc16is700
00238e  f1040401          ADD      r4,r4,#1              ;3972
002392  b2e4              UXTB     r4,r4                 ;3972
002394  2c08              CMP      r4,#8                 ;3972
002396  d3f7              BCC      |L1.9096|
002398  e7f0              B        |L1.9084|
;;;4010   
                          ENDP

                  ipsBlckHndl PROC
;;;4093   //-----------------------------------------------
;;;4094   void ipsBlckHndl(char in)
00239a  b510              PUSH     {r4,lr}
;;;4095   {
;;;4096   
;;;4097   ipsBlckStat=0;
00239c  4be1              LDR      r3,|L1.10020|
00239e  f04f0000          MOV      r0,#0
0023a2  8018              STRH     r0,[r3,#0]
;;;4098   if(ipsBlckSrc==1)
0023a4  48e0              LDR      r0,|L1.10024|
0023a6  f04f0401          MOV      r4,#1
;;;4099   	{
;;;4100   	if(((ipsBlckLog==0)&&(adc_buff_[11]>2000)) || ((ipsBlckLog==1)&&(adc_buff_[11]<2000))) ipsBlckStat=1;
0023aa  f44f62fa          MOV      r2,#0x7d0
0023ae  f9b01000          LDRSH    r1,[r0,#0]            ;4098  ; ipsBlckSrc
0023b2  48de              LDR      r0,|L1.10028|
0023b4  2901              CMP      r1,#1                 ;4098
0023b6  f9b00000          LDRSH    r0,[r0,#0]
0023ba  d006              BEQ      |L1.9162|
;;;4101   	}
;;;4102   else if(ipsBlckSrc==2)
0023bc  2902              CMP      r1,#2
0023be  d10f              BNE      |L1.9184|
0023c0  49db              LDR      r1,|L1.10032|
;;;4103   	{
;;;4104   	if(((ipsBlckLog==0)&&(adc_buff_[13]>2000)) || ((ipsBlckLog==1)&&(adc_buff_[13]<2000))) ipsBlckStat=1;
0023c2  f9b1101a          LDRSH    r1,[r1,#0x1a]
0023c6  b160              CBZ      r0,|L1.9186|
0023c8  e00d              B        |L1.9190|
                  |L1.9162|
0023ca  49d9              LDR      r1,|L1.10032|
0023cc  f9b11016          LDRSH    r1,[r1,#0x16]         ;4100
0023d0  b908              CBNZ     r0,|L1.9174|
0023d2  4291              CMP      r1,r2                 ;4100
0023d4  dc03              BGT      |L1.9182|
                  |L1.9174|
0023d6  2801              CMP      r0,#1                 ;4100
0023d8  d102              BNE      |L1.9184|
0023da  4291              CMP      r1,r2                 ;4100
0023dc  da00              BGE      |L1.9184|
                  |L1.9182|
0023de  801c              STRH     r4,[r3,#0]            ;4100
                  |L1.9184|
;;;4105   	}
;;;4106   }
0023e0  bd10              POP      {r4,pc}
                  |L1.9186|
0023e2  4291              CMP      r1,r2                 ;4104
0023e4  dc03              BGT      |L1.9198|
                  |L1.9190|
0023e6  2801              CMP      r0,#1                 ;4104
0023e8  d1fa              BNE      |L1.9184|
0023ea  4291              CMP      r1,r2                 ;4104
0023ec  daf8              BGE      |L1.9184|
                  |L1.9198|
0023ee  801c              STRH     r4,[r3,#0]            ;4104
0023f0  bd10              POP      {r4,pc}
;;;4107   
                          ENDP

                  bps_drv PROC
;;;4108   //-----------------------------------------------
;;;4109   void bps_drv(char in)
0023f2  e92d41f0          PUSH     {r4-r8,lr}
;;;4110   {
0023f6  4606              MOV      r6,r0
;;;4111   char temp;
;;;4112   
;;;4113   if (bps[in]._device!=dSRC) return;
0023f8  ebc600c6          RSB      r0,r6,r6,LSL #3
0023fc  49cd              LDR      r1,|L1.10036|
0023fe  eb001006          ADD      r0,r0,r6,LSL #4
002402  f8112020          LDRB     r2,[r1,r0,LSL #2]
002406  2a03              CMP      r2,#3
002408  d177              BNE      |L1.9466|
;;;4114   temp=bps[in]._flags_tm;
00240a  eb010480          ADD      r4,r1,r0,LSL #2
00240e  f8945042          LDRB     r5,[r4,#0x42]
;;;4115   if(temp&(1<<AV_T))
002412  07a8              LSLS     r0,r5,#30
002414  d517              BPL      |L1.9286|
;;;4116   	{
;;;4117   	if(bps[in]._temp_av_cnt<1200) 
002416  f9b41046          LDRSH    r1,[r4,#0x46]
00241a  f44f6096          MOV      r0,#0x4b0
00241e  4281              CMP      r1,r0
002420  da22              BGE      |L1.9320|
;;;4118   		{
;;;4119   		bps[in]._temp_av_cnt++;
002422  f1010101          ADD      r1,r1,#1
002426  b209              SXTH     r1,r1
002428  f8a41046          STRH     r1,[r4,#0x46]
;;;4120   		if(bps[in]._temp_av_cnt>=1200)
00242c  4281              CMP      r1,r0
00242e  db1b              BLT      |L1.9320|
;;;4121   			{
;;;4122   			bps[in]._temp_av_cnt=1200;
002430  f8a40046          STRH     r0,[r4,#0x46]
;;;4123   		   	if(!(bps[in]._av&(1<<0)))avar_bps_hndl(in,0,1);
002434  7860              LDRB     r0,[r4,#1]
002436  07c0              LSLS     r0,r0,#31
002438  d116              BNE      |L1.9320|
00243a  2201              MOVS     r2,#1
00243c  2100              MOVS     r1,#0
00243e  4630              MOV      r0,r6
002440  f7fffffe          BL       avar_bps_hndl
002444  e010              B        |L1.9320|
                  |L1.9286|
;;;4124   			}
;;;4125   		}
;;;4126   	}
;;;4127   
;;;4128   else if(!(temp&(1<<AV_T)))
;;;4129   	{
;;;4130   	if(bps[in]._temp_av_cnt) 
002446  f9b41046          LDRSH    r1,[r4,#0x46]
00244a  b169              CBZ      r1,|L1.9320|
;;;4131   		{
;;;4132   		bps[in]._temp_av_cnt--;
00244c  f1a10101          SUB      r1,r1,#1
002450  b208              SXTH     r0,r1
002452  f8a40046          STRH     r0,[r4,#0x46]
;;;4133   		if(!bps[in]._temp_av_cnt)
002456  b938              CBNZ     r0,|L1.9320|
;;;4134   			{
;;;4135   			if(bps[in]._av&(1<<0))avar_bps_hndl(in,0,0);
002458  7860              LDRB     r0,[r4,#1]
00245a  07c0              LSLS     r0,r0,#31
00245c  d004              BEQ      |L1.9320|
00245e  2200              MOVS     r2,#0
002460  4611              MOV      r1,r2
002462  4630              MOV      r0,r6
002464  f7fffffe          BL       avar_bps_hndl
                  |L1.9320|
;;;4136   			}
;;;4137   		} 	
;;;4138   
;;;4139   	}
;;;4140   
;;;4141   if((temp&(1<<AVUMAX)))
002468  0729              LSLS     r1,r5,#28
;;;4142   	{
;;;4143   	if(bps[in]._umax_av_cnt<10) 
;;;4144   		{
;;;4145   		bps[in]._umax_av_cnt++;
;;;4146   		if(bps[in]._umax_av_cnt>=10)
;;;4147   			{ 
;;;4148   			bps[in]._umax_av_cnt=10;
00246a  f04f070a          MOV      r7,#0xa
00246e  f04f0000          MOV      r0,#0                 ;4123
002472  d515              BPL      |L1.9376|
002474  f9b40048          LDRSH    r0,[r4,#0x48]         ;4143
002478  280a              CMP      r0,#0xa               ;4143
00247a  da26              BGE      |L1.9418|
00247c  f1000001          ADD      r0,r0,#1              ;4145
002480  b200              SXTH     r0,r0                 ;4145
002482  f8a40048          STRH     r0,[r4,#0x48]         ;4145
002486  280a              CMP      r0,#0xa               ;4146
002488  db1f              BLT      |L1.9418|
00248a  f8a47048          STRH     r7,[r4,#0x48]
;;;4149   			if(!(bps[in]._av&(1<<1)))avar_bps_hndl(in,1,1);
00248e  7860              LDRB     r0,[r4,#1]
002490  0780              LSLS     r0,r0,#30
002492  d41a              BMI      |L1.9418|
002494  2201              MOVS     r2,#1
002496  4611              MOV      r1,r2
002498  4630              MOV      r0,r6
00249a  f7fffffe          BL       avar_bps_hndl
00249e  e014              B        |L1.9418|
                  |L1.9376|
;;;4150   		  	/*if((K[APV]!=ON)||((apv_cnt[in,0]==0)&&(apv_cnt[in,1]==0)&&(apv_cnt[in,2]==0)&&(apv_flags[in]==afOFF)))avar_s_hndl(in,1,1);
;;;4151   			if((apv_cnt[in,0]==0)&&(apv_cnt[in,1]==0)&&(apv_cnt[in,2]==0)&&(apv_flags[in]==afON))
;;;4152   				{
;;;4153   				apv_cnt[in,0]=APV_INIT;
;;;4154   				apv_cnt[in,1]=APV_INIT;
;;;4155   				apv_cnt[in,2]=APV_INIT;
;;;4156   				apv_flags[in]=afOFF;
;;;4157   				}				*/
;;;4158   						
;;;4159   			}
;;;4160   		} 
;;;4161   	}		
;;;4162   else if(!(temp&(1<<AVUMAX)))
;;;4163   	{
;;;4164   	if(bps[in]._umax_av_cnt>0) 
0024a0  f9b41048          LDRSH    r1,[r4,#0x48]
0024a4  2900              CMP      r1,#0
0024a6  dd0d              BLE      |L1.9412|
;;;4165   		{
;;;4166   		bps[in]._umax_av_cnt--;
0024a8  f1a10101          SUB      r1,r1,#1
0024ac  b208              SXTH     r0,r1
0024ae  f8a40048          STRH     r0,[r4,#0x48]
;;;4167   		if(bps[in]._umax_av_cnt==0)
0024b2  b950              CBNZ     r0,|L1.9418|
;;;4168   			{
;;;4169   			bps[in]._umax_av_cnt=0;
;;;4170   			avar_bps_hndl(in,1,0);
0024b4  f04f0200          MOV      r2,#0
0024b8  f04f0101          MOV      r1,#1
0024bc  4630              MOV      r0,r6
0024be  f7fffffe          BL       avar_bps_hndl
0024c2  e002              B        |L1.9418|
                  |L1.9412|
;;;4171   	 //		apv_cnt[in,0]=0;
;;;4172   	//		apv_cnt[in,1]=0;
;;;4173   	 //		apv_cnt[in,2]=0;			
;;;4174   			}
;;;4175   		}
;;;4176   	else if(bps[in]._umax_av_cnt<0) bps[in]._umax_av_cnt=0;		 
0024c4  da01              BGE      |L1.9418|
0024c6  f8a40048          STRH     r0,[r4,#0x48]
                  |L1.9418|
;;;4177   	}
;;;4178   
;;;4179   if(temp&(1<<AVUMIN))
0024ca  06e8              LSLS     r0,r5,#27
0024cc  d516              BPL      |L1.9468|
;;;4180   	{
;;;4181   	if(bps[in]._umin_av_cnt<10) 
0024ce  f9b4004a          LDRSH    r0,[r4,#0x4a]
0024d2  280a              CMP      r0,#0xa
0024d4  da20              BGE      |L1.9496|
;;;4182   		{
;;;4183   		bps[in]._umin_av_cnt++;
0024d6  f1000001          ADD      r0,r0,#1
0024da  b200              SXTH     r0,r0
0024dc  f8a4004a          STRH     r0,[r4,#0x4a]
;;;4184   		if(bps[in]._umin_av_cnt>=10)
0024e0  280a              CMP      r0,#0xa
0024e2  db19              BLT      |L1.9496|
;;;4185   			{ 
;;;4186   			bps[in]._umin_av_cnt=10;
0024e4  f8a4704a          STRH     r7,[r4,#0x4a]
;;;4187   			if(!(bps[in]._av&(1<<2)))avar_bps_hndl(in,2,1);
0024e8  7860              LDRB     r0,[r4,#1]
0024ea  0740              LSLS     r0,r0,#29
0024ec  d414              BMI      |L1.9496|
0024ee  2201              MOVS     r2,#1
0024f0  2102              MOVS     r1,#2
0024f2  4630              MOV      r0,r6
0024f4  f7fffffe          BL       avar_bps_hndl
0024f8  e00e              B        |L1.9496|
                  |L1.9466|
0024fa  e047              B        |L1.9612|
                  |L1.9468|
;;;4188   		  	/*	if((K[APV]!=ON)||((apv_cnt[in,0]==0)&&(apv_cnt[in,1]==0)&&(apv_cnt[in,2]==0)&&(apv_flags[in]==afOFF)))avar_s_hndl(in,2,1);
;;;4189   			if((apv_cnt[in,0]==0)&&(apv_cnt[in,1]==0)&&(apv_cnt[in,2]==0)&&(apv_flags[in]==afON))
;;;4190   				{
;;;4191   				apv_cnt[in,0]=APV_INIT;
;;;4192   				apv_cnt[in,1]=APV_INIT;
;;;4193   				apv_cnt[in,2]=APV_INIT;
;;;4194   				apv_flags[in]=afOFF;
;;;4195   				}*/				
;;;4196   			}
;;;4197   		} 
;;;4198   	}	
;;;4199   	
;;;4200   else if(!(temp&(1<<AVUMIN)))
;;;4201   	{
;;;4202   	if(bps[in]._umin_av_cnt) 
0024fc  f9b4004a          LDRSH    r0,[r4,#0x4a]
002500  b150              CBZ      r0,|L1.9496|
;;;4203   		{
;;;4204   		bps[in]._umin_av_cnt--;
002502  f1a00001          SUB      r0,r0,#1
002506  b201              SXTH     r1,r0
002508  f8a4104a          STRH     r1,[r4,#0x4a]
;;;4205   		if(bps[in]._umin_av_cnt==0)
00250c  b921              CBNZ     r1,|L1.9496|
;;;4206   			{
;;;4207   			bps[in]._umin_av_cnt=0;
;;;4208   			avar_bps_hndl(in,2,0);
00250e  2200              MOVS     r2,#0
002510  2102              MOVS     r1,#2
002512  4630              MOV      r0,r6
002514  f7fffffe          BL       avar_bps_hndl
                  |L1.9496|
;;;4209   		//	apv_cnt[in,0]=0;
;;;4210   		//	apv_cnt[in,1]=0;
;;;4211   		//	apv_cnt[in,2]=0;
;;;4212   			}
;;;4213   		}
;;;4214   	else if(bps[in]._umin_av_cnt>10)bps[in]._umin_av_cnt--;	 
;;;4215   	}
;;;4216   
;;;4217   //bps[in]._state=bsOFF;
;;;4218   
;;;4219   if (bps[in]._av&0x0f)					bps[in]._state=bsAV;
002518  7860              LDRB     r0,[r4,#1]
00251a  0700              LSLS     r0,r0,#28
00251c  d003              BEQ      |L1.9510|
00251e  f04f0004          MOV      r0,#4
002522  70a0              STRB     r0,[r4,#2]
002524  e017              B        |L1.9558|
                  |L1.9510|
;;;4220   else if ( (net_av) && (bps[in]._cnt>20)/*&& 
002526  4884              LDR      r0,|L1.10040|
002528  7800              LDRB     r0,[r0,#0]  ; net_av
00252a  b130              CBZ      r0,|L1.9530|
00252c  78e0              LDRB     r0,[r4,#3]
00252e  2814              CMP      r0,#0x14
002530  d903              BLS      |L1.9530|
;;;4221   		(bps[in]._Uii<200)*/)				bps[in]._state=bsOFF_AV_NET;
002532  f04f0005          MOV      r0,#5
002536  70a0              STRB     r0,[r4,#2]
002538  e00d              B        |L1.9558|
                  |L1.9530|
;;;4222   else if (bps[in]._flags_tm&BIN8(100000))	bps[in]._state=bsRDY;
00253a  f8940042          LDRB     r0,[r4,#0x42]
00253e  0680              LSLS     r0,r0,#26
002540  d503              BPL      |L1.9546|
002542  f04f0002          MOV      r0,#2
002546  70a0              STRB     r0,[r4,#2]
002548  e005              B        |L1.9558|
                  |L1.9546|
;;;4223   else if (bps[in]._cnt<20)				bps[in]._state=bsWRK;
00254a  78e0              LDRB     r0,[r4,#3]
00254c  2814              CMP      r0,#0x14
00254e  d202              BCS      |L1.9558|
002550  f04f0001          MOV      r0,#1
002554  70a0              STRB     r0,[r4,#2]
                  |L1.9558|
;;;4224   
;;;4225   
;;;4226   
;;;4227   //else if(bps[in]._flags_tm&BIN8(100000)) bps[in]._state=ssBL;
;;;4228   //else if((!(bps[in]._flags_tm&BIN8(100000)))&&(net_U>100))bps[in]._state=ssWRK;
;;;4229   //else bps[0]._state=ssNOT;
;;;4230   
;;;4231   //bps[in]._is_ready=0;
;;;4232   //bps[in]._is_wrk=0;
;;;4233   //if(bps[in]._av_net) bps[in]._flags_bp='N';//  
;;;4234   //else if(bps[in]._av_u_max) bps[in]._flags_bp='P';//  (u_.av_.bAS1T)) bps_state[0]=ssAV;
;;;4235   //else if(bps[in]._av_u_min) bps[in]._flags_bp='M';//  
;;;4236   //else if(bps[in]._av_temper) bps[in]._flags_bp='T';// 
;;;4237   //else if(bps[in]._flags_tm&BIN8(100000)) 
;;;4238   //	{
;;;4239   //	bps[in]._flags_bp='B';// 
;;;4240   //	bps[in]._is_ready=1;
;;;4241   //	}
;;;4242   //else if((!(bps[in]._flags_tm&BIN8(100000)))&&(net_U>100))
;;;4243   //     {
;;;4244   //     bps[in]._flags_bp='W';// 
;;;4245   //     bps[in]._is_ready=1;
;;;4246   //     bps[in]._is_wrk=1;
;;;4247        
;;;4248   //     }
;;;4249   //else bps[in]._is_ready=1;     
;;;4250   
;;;4251   
;;;4252   
;;;4253   
;;;4254   
;;;4255   /*
;;;4256   bps[in]._flags_tu&=BIN8(11111110);
;;;4257   if(bps[in]._ist_blok_cnt)
;;;4258   	{
;;;4259   	bps[in]._ist_blok_cnt--;
;;;4260   	bps[in]._flags_tu|=BIN8(1);
;;;4261   	}
;;;4262   
;;;4263   	   */ 
;;;4264   
;;;4265   //    
;;;4266   if(bps[in]._cnt>=10) bps[in]._flags_tu|=BIN8(10000000);
002556  78e0              LDRB     r0,[r4,#3]
002558  280a              CMP      r0,#0xa
00255a  d306              BCC      |L1.9578|
00255c  f894002c          LDRB     r0,[r4,#0x2c]
002560  f0400080          ORR      r0,r0,#0x80
002564  f884002c          STRB     r0,[r4,#0x2c]
002568  e005              B        |L1.9590|
                  |L1.9578|
;;;4267   else bps[in]._flags_tu&=BIN8(1111111);
00256a  f894002c          LDRB     r0,[r4,#0x2c]
00256e  f000007f          AND      r0,r0,#0x7f
002572  f884002c          STRB     r0,[r4,#0x2c]
                  |L1.9590|
;;;4268   	
;;;4269   bps[in]._vol_u=cntrl_stat+bps[in]._x_;	
002576  4967              LDR      r1,|L1.10004|
002578  f9b40050          LDRSH    r0,[r4,#0x50]
00257c  396c              SUBS     r1,r1,#0x6c
00257e  f9b1101c          LDRSH    r1,[r1,#0x1c]  ; cntrl_stat
002582  4408              ADD      r0,r0,r1
002584  6320              STR      r0,[r4,#0x30]
;;;4270   bps[in]._vol_i=1000; 
002586  f44f707a          MOV      r0,#0x3e8
00258a  6360              STR      r0,[r4,#0x34]
                  |L1.9612|
;;;4271   }
00258c  e482              B        |L1.7828|
;;;4272   
                          ENDP

                  avt_hndl PROC
;;;4273   //-----------------------------------------------
;;;4274   void avt_hndl(void)
00258e  b570              PUSH     {r4-r6,lr}
;;;4275   {
;;;4276   char i;
;;;4277   for(i=0;i<12;i++)
002590  f04f0000          MOV      r0,#0
;;;4278   	{
;;;4279   	if(eb2_data_short[6]&(1<<i))
002594  4969              LDR      r1,|L1.10044|
;;;4280   		{
;;;4281   		avt_stat[i]=avtON;
002596  4d6a              LDR      r5,|L1.10048|
002598  f04f0401          MOV      r4,#1                 ;4279
00259c  f9b1200c          LDRSH    r2,[r1,#0xc]          ;4279
0025a0  4603              MOV      r3,r0                 ;4277
                  |L1.9634|
0025a2  fa04f100          LSL      r1,r4,r0              ;4279
0025a6  420a              TST      r2,r1                 ;4279
0025a8  d001              BEQ      |L1.9646|
0025aa  542c              STRB     r4,[r5,r0]
0025ac  e000              B        |L1.9648|
                  |L1.9646|
;;;4282   		}
;;;4283   	else avt_stat[i]=avtOFF;
0025ae  542b              STRB     r3,[r5,r0]
                  |L1.9648|
0025b0  f1000001          ADD      r0,r0,#1              ;4277
0025b4  b2c0              UXTB     r0,r0                 ;4277
0025b6  280c              CMP      r0,#0xc               ;4277
0025b8  d3f3              BCC      |L1.9634|
;;;4284   	}
;;;4285   
;;;4286   if((avt_stat_old[0]!=avt_stat[0])&&(NUMAVT>=1))
0025ba  4e62              LDR      r6,|L1.10052|
0025bc  7828              LDRB     r0,[r5,#0]  ; avt_stat
0025be  4c62              LDR      r4,|L1.10056|
0025c0  7831              LDRB     r1,[r6,#0]  ; avt_stat_old
0025c2  4281              CMP      r1,r0
0025c4  d00b              BEQ      |L1.9694|
0025c6  f9b41000          LDRSH    r1,[r4,#0]  ; NUMAVT
0025ca  2901              CMP      r1,#1
0025cc  db07              BLT      |L1.9694|
;;;4287   	{
;;;4288   	if(avt_stat[0]==avtON) 	snmp_trap_send("Avtomat #1 is ON ",11,1,1);
0025ce  2801              CMP      r0,#1
0025d0  d07e              BEQ      |L1.9936|
;;;4289   	else 				snmp_trap_send("Avtomat #1 is OFF",11,1,0);
0025d2  2300              MOVS     r3,#0
0025d4  2201              MOVS     r2,#1
0025d6  210b              MOVS     r1,#0xb
0025d8  a05c              ADR      r0,|L1.10060|
0025da  f7fffffe          BL       snmp_trap_send
                  |L1.9694|
;;;4290   	}
;;;4291   if((avt_stat_old[1]!=avt_stat[1])&&(NUMAVT>=2))
0025de  7871              LDRB     r1,[r6,#1]  ; avt_stat_old
0025e0  7868              LDRB     r0,[r5,#1]  ; avt_stat
0025e2  4281              CMP      r1,r0
0025e4  d00b              BEQ      |L1.9726|
0025e6  f9b41000          LDRSH    r1,[r4,#0]  ; NUMAVT
0025ea  2902              CMP      r1,#2
0025ec  db07              BLT      |L1.9726|
;;;4292   	{
;;;4293   	if(avt_stat[1]==avtON) 	snmp_trap_send("Avtomat #2 is ON ",11,2,1);
0025ee  2801              CMP      r0,#1
0025f0  d06f              BEQ      |L1.9938|
;;;4294   	else 				snmp_trap_send("Avtomat #2 is OFF",11,2,0);
0025f2  2300              MOVS     r3,#0
0025f4  2202              MOVS     r2,#2
0025f6  210b              MOVS     r1,#0xb
0025f8  a059              ADR      r0,|L1.10080|
0025fa  f7fffffe          BL       snmp_trap_send
                  |L1.9726|
;;;4295   	}
;;;4296   if((avt_stat_old[2]!=avt_stat[2])&&(NUMAVT>=3))
0025fe  78b1              LDRB     r1,[r6,#2]  ; avt_stat_old
002600  78a8              LDRB     r0,[r5,#2]  ; avt_stat
002602  4281              CMP      r1,r0
002604  d00b              BEQ      |L1.9758|
002606  f9b41000          LDRSH    r1,[r4,#0]  ; NUMAVT
00260a  2903              CMP      r1,#3
00260c  db07              BLT      |L1.9758|
;;;4297   	{
;;;4298   	if(avt_stat[2]==avtON) 	snmp_trap_send("Avtomat #3 is ON ",11,3,1);
00260e  2801              CMP      r0,#1
002610  d071              BEQ      |L1.9974|
;;;4299   	else 				snmp_trap_send("Avtomat #3 is OFF",11,3,0);
002612  2300              MOVS     r3,#0
002614  2203              MOVS     r2,#3
002616  210b              MOVS     r1,#0xb
002618  a056              ADR      r0,|L1.10100|
00261a  f7fffffe          BL       snmp_trap_send
                  |L1.9758|
;;;4300   	}
;;;4301   if((avt_stat_old[3]!=avt_stat[3])&&(NUMAVT>=4))
00261e  78f1              LDRB     r1,[r6,#3]  ; avt_stat_old
002620  78e8              LDRB     r0,[r5,#3]  ; avt_stat
002622  4281              CMP      r1,r0
002624  d00b              BEQ      |L1.9790|
002626  f9b41000          LDRSH    r1,[r4,#0]  ; NUMAVT
00262a  2904              CMP      r1,#4
00262c  db07              BLT      |L1.9790|
;;;4302   	{
;;;4303   	if(avt_stat[3]==avtON) 	snmp_trap_send("Avtomat #4 is ON ",11,4,1);
00262e  2801              CMP      r0,#1
002630  d062              BEQ      |L1.9976|
;;;4304   	else 				snmp_trap_send("Avtomat #4 is OFF",11,4,0);
002632  2300              MOVS     r3,#0
002634  2204              MOVS     r2,#4
002636  210b              MOVS     r1,#0xb
002638  a053              ADR      r0,|L1.10120|
00263a  f7fffffe          BL       snmp_trap_send
                  |L1.9790|
;;;4305   	}
;;;4306   if((avt_stat_old[4]!=avt_stat[4])&&(NUMAVT>=5))
00263e  7931              LDRB     r1,[r6,#4]  ; avt_stat_old
002640  7928              LDRB     r0,[r5,#4]  ; avt_stat
002642  4281              CMP      r1,r0
002644  d00b              BEQ      |L1.9822|
002646  f9b41000          LDRSH    r1,[r4,#0]  ; NUMAVT
00264a  2905              CMP      r1,#5
00264c  db07              BLT      |L1.9822|
;;;4307   	{
;;;4308   	if(avt_stat[4]==avtON) 	snmp_trap_send("Avtomat #5 is ON ",11,5,1);
00264e  2801              CMP      r0,#1
002650  d053              BEQ      |L1.9978|
;;;4309   	else 				snmp_trap_send("Avtomat #5 is OFF",11,5,0);
002652  2300              MOVS     r3,#0
002654  2205              MOVS     r2,#5
002656  210b              MOVS     r1,#0xb
002658  a050              ADR      r0,|L1.10140|
00265a  f7fffffe          BL       snmp_trap_send
                  |L1.9822|
;;;4310   	}
;;;4311   if((avt_stat_old[5]!=avt_stat[5])&&(NUMAVT>=6))
00265e  7971              LDRB     r1,[r6,#5]  ; avt_stat_old
002660  7968              LDRB     r0,[r5,#5]  ; avt_stat
002662  4281              CMP      r1,r0
002664  d00b              BEQ      |L1.9854|
002666  f9b41000          LDRSH    r1,[r4,#0]  ; NUMAVT
00266a  2906              CMP      r1,#6
00266c  db07              BLT      |L1.9854|
;;;4312   	{
;;;4313   	if(avt_stat[5]==avtON) 	snmp_trap_send("Avtomat #6 is ON ",11,6,1);
00266e  2801              CMP      r0,#1
002670  d044              BEQ      |L1.9980|
;;;4314   	else 				snmp_trap_send("Avtomat #6 is OFF",11,6,0);
002672  2300              MOVS     r3,#0
002674  2206              MOVS     r2,#6
002676  210b              MOVS     r1,#0xb
002678  a04d              ADR      r0,|L1.10160|
00267a  f7fffffe          BL       snmp_trap_send
                  |L1.9854|
;;;4315   	}
;;;4316   if((avt_stat_old[6]!=avt_stat[6])&&(NUMAVT>=7))
00267e  79b1              LDRB     r1,[r6,#6]  ; avt_stat_old
002680  79a8              LDRB     r0,[r5,#6]  ; avt_stat
002682  4281              CMP      r1,r0
002684  d00b              BEQ      |L1.9886|
002686  f9b41000          LDRSH    r1,[r4,#0]  ; NUMAVT
00268a  2907              CMP      r1,#7
00268c  db07              BLT      |L1.9886|
;;;4317   	{
;;;4318   	if(avt_stat[6]==avtON) 	snmp_trap_send("Avtomat #7 is ON ",11,7,1);
00268e  2801              CMP      r0,#1
002690  d035              BEQ      |L1.9982|
;;;4319   	else 				snmp_trap_send("Avtomat #7 is OFF",11,7,0);
002692  2300              MOVS     r3,#0
002694  2207              MOVS     r2,#7
002696  210b              MOVS     r1,#0xb
002698  a04a              ADR      r0,|L1.10180|
00269a  f7fffffe          BL       snmp_trap_send
                  |L1.9886|
;;;4320   	}
;;;4321   if((avt_stat_old[7]!=avt_stat[7])&&(NUMAVT>=8))
00269e  79f1              LDRB     r1,[r6,#7]  ; avt_stat_old
0026a0  79e8              LDRB     r0,[r5,#7]  ; avt_stat
0026a2  4281              CMP      r1,r0
0026a4  d00b              BEQ      |L1.9918|
0026a6  f9b41000          LDRSH    r1,[r4,#0]  ; NUMAVT
0026aa  2908              CMP      r1,#8
0026ac  db07              BLT      |L1.9918|
;;;4322   	{
;;;4323   	if(avt_stat[7]==avtON) 	snmp_trap_send("Avtomat #8 is ON ",11,8,1);
0026ae  2801              CMP      r0,#1
0026b0  d026              BEQ      |L1.9984|
;;;4324   	else 				snmp_trap_send("Avtomat #8 is OFF",11,8,0);
0026b2  2300              MOVS     r3,#0
0026b4  2208              MOVS     r2,#8
0026b6  210b              MOVS     r1,#0xb
0026b8  a047              ADR      r0,|L1.10200|
0026ba  f7fffffe          BL       snmp_trap_send
                  |L1.9918|
;;;4325   	}
;;;4326   if((avt_stat_old[8]!=avt_stat[8])&&(NUMAVT>=9))
0026be  7a31              LDRB     r1,[r6,#8]  ; avt_stat_old
0026c0  7a28              LDRB     r0,[r5,#8]  ; avt_stat
0026c2  4281              CMP      r1,r0
0026c4  d00e              BEQ      |L1.9956|
0026c6  f9b41000          LDRSH    r1,[r4,#0]  ; NUMAVT
0026ca  2909              CMP      r1,#9
0026cc  db0a              BLT      |L1.9956|
;;;4327   	{
;;;4328   	if(avt_stat[8]==avtON) 	snmp_trap_send("Avtomat #9 is ON ",11,9,1);
0026ce  e001              B        |L1.9940|
                  |L1.9936|
0026d0  e099              B        |L1.10246|
                  |L1.9938|
0026d2  e09f              B        |L1.10260|
                  |L1.9940|
0026d4  2801              CMP      r0,#1
0026d6  d014              BEQ      |L1.9986|
;;;4329   	else 				snmp_trap_send("Avtomat #9 is OFF",11,9,0);
0026d8  2300              MOVS     r3,#0
0026da  2209              MOVS     r2,#9
0026dc  210b              MOVS     r1,#0xb
0026de  a043              ADR      r0,|L1.10220|
0026e0  f7fffffe          BL       snmp_trap_send
                  |L1.9956|
;;;4330   	}
;;;4331   
;;;4332   for(i=0;i<12;i++)
0026e4  f04f0000          MOV      r0,#0
                  |L1.9960|
;;;4333   	{
;;;4334   	avt_stat_old[i]=avt_stat[i];
0026e8  5c29              LDRB     r1,[r5,r0]
0026ea  5431              STRB     r1,[r6,r0]
0026ec  f1000001          ADD      r0,r0,#1              ;4332
0026f0  b2c0              UXTB     r0,r0                 ;4332
0026f2  280c              CMP      r0,#0xc               ;4332
0026f4  e084              B        |L1.10240|
                  |L1.9974|
0026f6  e094              B        |L1.10274|
                  |L1.9976|
0026f8  e09a              B        |L1.10288|
                  |L1.9978|
0026fa  e0a0              B        |L1.10302|
                  |L1.9980|
0026fc  e0a6              B        |L1.10316|
                  |L1.9982|
0026fe  e0ac              B        |L1.10330|
                  |L1.9984|
002700  e0b2              B        |L1.10344|
                  |L1.9986|
002702  e0b8              B        |L1.10358|
                  |L1.9988|
                          DCD      ica_u_necc
                  |L1.9992|
                          DCD      ICA_MODBUS_ADDRESS
                  |L1.9996|
                          DCD      ICA_CH
                  |L1.10000|
                          DCD      ICA_MODBUS_TCP_IP1
                  |L1.10004|
                          DCD      ||area_number.21||+0x6c
                  |L1.10008|
                          DCD      ICA_MODBUS_TCP_IP2
                  |L1.10012|
                          DCD      ICA_MODBUS_TCP_IP3
                  |L1.10016|
                          DCD      ICA_MODBUS_TCP_IP4
                  |L1.10020|
                          DCD      ipsBlckStat
                  |L1.10024|
                          DCD      ipsBlckSrc
                  |L1.10028|
                          DCD      ipsBlckLog
                  |L1.10032|
                          DCD      ||.bss||+0x400
                  |L1.10036|
                          DCD      bps
                  |L1.10040|
                          DCD      net_av
                  |L1.10044|
                          DCD      eb2_data_short
                  |L1.10048|
                          DCD      avt_stat
                  |L1.10052|
                          DCD      avt_stat_old
                  |L1.10056|
                          DCD      NUMAVT
                  |L1.10060|
00274c  4176746f          DCB      "Avtomat #1 is OFF",0
002750  6d617420
002754  23312069
002758  73204f46
00275c  4600    
00275e  00                DCB      0
00275f  00                DCB      0
                  |L1.10080|
002760  4176746f          DCB      "Avtomat #2 is OFF",0
002764  6d617420
002768  23322069
00276c  73204f46
002770  4600    
002772  00                DCB      0
002773  00                DCB      0
                  |L1.10100|
002774  4176746f          DCB      "Avtomat #3 is OFF",0
002778  6d617420
00277c  23332069
002780  73204f46
002784  4600    
002786  00                DCB      0
002787  00                DCB      0
                  |L1.10120|
002788  4176746f          DCB      "Avtomat #4 is OFF",0
00278c  6d617420
002790  23342069
002794  73204f46
002798  4600    
00279a  00                DCB      0
00279b  00                DCB      0
                  |L1.10140|
00279c  4176746f          DCB      "Avtomat #5 is OFF",0
0027a0  6d617420
0027a4  23352069
0027a8  73204f46
0027ac  4600    
0027ae  00                DCB      0
0027af  00                DCB      0
                  |L1.10160|
0027b0  4176746f          DCB      "Avtomat #6 is OFF",0
0027b4  6d617420
0027b8  23362069
0027bc  73204f46
0027c0  4600    
0027c2  00                DCB      0
0027c3  00                DCB      0
                  |L1.10180|
0027c4  4176746f          DCB      "Avtomat #7 is OFF",0
0027c8  6d617420
0027cc  23372069
0027d0  73204f46
0027d4  4600    
0027d6  00                DCB      0
0027d7  00                DCB      0
                  |L1.10200|
0027d8  4176746f          DCB      "Avtomat #8 is OFF",0
0027dc  6d617420
0027e0  23382069
0027e4  73204f46
0027e8  4600    
0027ea  00                DCB      0
0027eb  00                DCB      0
                  |L1.10220|
0027ec  4176746f          DCB      "Avtomat #9 is OFF",0
0027f0  6d617420
0027f4  23392069
0027f8  73204f46
0027fc  4600    
0027fe  00                DCB      0
0027ff  00                DCB      0
                  |L1.10240|
002800  f4ffaf72          BCC      |L1.9960|
;;;4335   	}
;;;4336   }
002804  bd70              POP      {r4-r6,pc}
                  |L1.10246|
002806  2301              MOVS     r3,#1                 ;4288
002808  461a              MOV      r2,r3                 ;4288
00280a  210b              MOVS     r1,#0xb               ;4288
00280c  a0ec              ADR      r0,|L1.11200|
00280e  f7fffffe          BL       snmp_trap_send
002812  e6e4              B        |L1.9694|
                  |L1.10260|
002814  2301              MOVS     r3,#1                 ;4293
002816  2202              MOVS     r2,#2                 ;4293
002818  210b              MOVS     r1,#0xb               ;4293
00281a  a0ee              ADR      r0,|L1.11220|
00281c  f7fffffe          BL       snmp_trap_send
002820  e6ed              B        |L1.9726|
                  |L1.10274|
002822  2301              MOVS     r3,#1                 ;4298
002824  2203              MOVS     r2,#3                 ;4298
002826  210b              MOVS     r1,#0xb               ;4298
002828  a0ef              ADR      r0,|L1.11240|
00282a  f7fffffe          BL       snmp_trap_send
00282e  e6f6              B        |L1.9758|
                  |L1.10288|
002830  2301              MOVS     r3,#1                 ;4303
002832  2204              MOVS     r2,#4                 ;4303
002834  210b              MOVS     r1,#0xb               ;4303
002836  a0f1              ADR      r0,|L1.11260|
002838  f7fffffe          BL       snmp_trap_send
00283c  e6ff              B        |L1.9790|
                  |L1.10302|
00283e  2301              MOVS     r3,#1                 ;4308
002840  2205              MOVS     r2,#5                 ;4308
002842  210b              MOVS     r1,#0xb               ;4308
002844  a0f2              ADR      r0,|L1.11280|
002846  f7fffffe          BL       snmp_trap_send
00284a  e708              B        |L1.9822|
                  |L1.10316|
00284c  2301              MOVS     r3,#1                 ;4313
00284e  2206              MOVS     r2,#6                 ;4313
002850  210b              MOVS     r1,#0xb               ;4313
002852  a0f4              ADR      r0,|L1.11300|
002854  f7fffffe          BL       snmp_trap_send
002858  e711              B        |L1.9854|
                  |L1.10330|
00285a  2301              MOVS     r3,#1                 ;4318
00285c  2207              MOVS     r2,#7                 ;4318
00285e  210b              MOVS     r1,#0xb               ;4318
002860  a0f5              ADR      r0,|L1.11320|
002862  f7fffffe          BL       snmp_trap_send
002866  e71a              B        |L1.9886|
                  |L1.10344|
002868  2301              MOVS     r3,#1                 ;4323
00286a  2208              MOVS     r2,#8                 ;4323
00286c  210b              MOVS     r1,#0xb               ;4323
00286e  a0f7              ADR      r0,|L1.11340|
002870  f7fffffe          BL       snmp_trap_send
002874  e723              B        |L1.9918|
                  |L1.10358|
002876  2301              MOVS     r3,#1                 ;4328
002878  2209              MOVS     r2,#9                 ;4328
00287a  210b              MOVS     r1,#0xb               ;4328
00287c  a0f8              ADR      r0,|L1.11360|
00287e  f7fffffe          BL       snmp_trap_send
002882  e72f              B        |L1.9956|
;;;4337   
                          ENDP

                  bat_hndl PROC
;;;4338   //-----------------------------------------------
;;;4339   void bat_hndl(void)
002884  b570              PUSH     {r4-r6,lr}
;;;4340   {
;;;4341   /*if(mess_find(_MESS_BAT_MASK_ON))
;;;4342   	{
;;;4343   	if(mess_data[0]==_MESS_BAT_MASK_ON)
;;;4344   		{
;;;4345   		char i;
;;;4346   		for(i=0;i<2;i++)
;;;4347   			{
;;;4348   			if(mess_data[1]&(1<<i))
;;;4349   				{
;;;4350   				bat[i]._cnt_to_block=0;
;;;4351        			bat[i]._rel_stat=0;
;;;4352        			}
;;;4353   			}
;;;4354   		}
;;;4355   	}
;;;4356   if(mess_find(_MESS_BAT_MASK_OFF))
;;;4357   	{		
;;;4358   	if(mess_data[0]==_MESS_BAT_MASK_OFF)
;;;4359   		{
;;;4360   		char i;
;;;4361   		for(i=0;i<2;i++)
;;;4362   			{
;;;4363   			if((mess_data[1]&(1<<i)) && (bat[i]._cnt_to_block==0) && (bat[i]._rel_stat==0))
;;;4364   				{
;;;4365   				bat[i]._cnt_to_block=20;
;;;4366   				bat[i]._rel_stat=1;
;;;4367        			}
;;;4368   			}
;;;4369   		
;;;4370   		}		
;;;4371   	}*/
;;;4372   
;;;4373   if(mess_find_unvol(MESS2BAT_HNDL))
002886  20c8              MOVS     r0,#0xc8
002888  f7fffffe          BL       mess_find_unvol
;;;4374   	{ 
;;;4375   	char i;
;;;4376   	
;;;4377   	if(mess_data[0]==PARAM_BAT_ALL_OFF_AFTER_2SEC)
;;;4378   		{
;;;4379   		for(i=0;i<MAX_NUM_OF_BAT;i++)
;;;4380   			{
;;;4381   			if(bat[i]._cnt_to_block<50)bat[i]._cnt_to_block++;
00288c  49f9              LDR      r1,|L1.11380|
00288e  2200              MOVS     r2,#0                 ;4379
002890  b3a8              CBZ      r0,|L1.10494|
002892  4bf9              LDR      r3,|L1.11384|
;;;4382   			}
;;;4383   		}
;;;4384   
;;;4385   	else if(mess_data[0]==PARAM_BAT_MASK_OFF_AFTER_2SEC)
;;;4386   		{
;;;4387   		for(i=0;i<MAX_NUM_OF_BAT;i++)
;;;4388   			{
;;;4389   			if(mess_data[1]&(1<<i))
002894  2401              MOVS     r4,#1
002896  6818              LDR      r0,[r3,#0]            ;4377  ; mess_data
002898  28c9              CMP      r0,#0xc9              ;4377
00289a  d01c              BEQ      |L1.10454|
00289c  28ca              CMP      r0,#0xca              ;4385
00289e  d02f              BEQ      |L1.10496|
;;;4390   				{
;;;4391   				if(bat[i]._cnt_to_block<50) bat[i]._cnt_to_block++;
;;;4392   				}
;;;4393   			else bat[i]._cnt_to_block=0;
;;;4394   			}
;;;4395   		}
;;;4396   	else 
;;;4397   	 	{
;;;4398   		for(i=0;i<MAX_NUM_OF_BAT;i++)
0028a0  4610              MOV      r0,r2
                  |L1.10402|
;;;4399   			{
;;;4400   			bat[i]._cnt_to_block=0;
0028a2  eb000340          ADD      r3,r0,r0,LSL #1
0028a6  eb031300          ADD      r3,r3,r0,LSL #4
0028aa  f8012023          STRB     r2,[r1,r3,LSL #2]
0028ae  f1000001          ADD      r0,r0,#1              ;4398
0028b2  b2c0              UXTB     r0,r0                 ;4398
0028b4  2802              CMP      r0,#2                 ;4398
0028b6  d3f4              BCC      |L1.10402|
                  |L1.10424|
;;;4401   			}
;;;4402   
;;;4403   		}
;;;4404   	for(i=0;i<MAX_NUM_OF_BAT;i++)
0028b8  f04f0000          MOV      r0,#0
                  |L1.10428|
;;;4405   		{
;;;4406   		if(bat[i]._cnt_to_block>20)bat[i]._rel_stat=1;
0028bc  eb000340          ADD      r3,r0,r0,LSL #1
0028c0  eb031300          ADD      r3,r3,r0,LSL #4
0028c4  f8115023          LDRB     r5,[r1,r3,LSL #2]
0028c8  2d14              CMP      r5,#0x14
0028ca  d939              BLS      |L1.10560|
0028cc  eb010383          ADD      r3,r1,r3,LSL #2
0028d0  f883403c          STRB     r4,[r3,#0x3c]
0028d4  e038              B        |L1.10568|
                  |L1.10454|
0028d6  f04f0000          MOV      r0,#0                 ;4379
                  |L1.10458|
0028da  eb000340          ADD      r3,r0,r0,LSL #1       ;4381
0028de  eb031500          ADD      r5,r3,r0,LSL #4       ;4381
0028e2  f8113025          LDRB     r3,[r1,r5,LSL #2]     ;4381
0028e6  2b32              CMP      r3,#0x32              ;4381
0028e8  d203              BCS      |L1.10482|
0028ea  f1030301          ADD      r3,r3,#1              ;4381
0028ee  f8013025          STRB     r3,[r1,r5,LSL #2]     ;4381
                  |L1.10482|
0028f2  f1000001          ADD      r0,r0,#1              ;4379
0028f6  b2c0              UXTB     r0,r0                 ;4379
0028f8  2802              CMP      r0,#2                 ;4379
0028fa  d3ee              BCC      |L1.10458|
0028fc  e7dc              B        |L1.10424|
                  |L1.10494|
0028fe  e029              B        |L1.10580|
                  |L1.10496|
002900  f04f0000          MOV      r0,#0                 ;4387
002904  685e              LDR      r6,[r3,#4]            ;4389
                  |L1.10502|
002906  fa04f300          LSL      r3,r4,r0              ;4389
00290a  421e              TST      r6,r3                 ;4389
00290c  d00c              BEQ      |L1.10536|
00290e  eb000340          ADD      r3,r0,r0,LSL #1       ;4391
002912  eb031500          ADD      r5,r3,r0,LSL #4       ;4391
002916  f8113025          LDRB     r3,[r1,r5,LSL #2]     ;4391
00291a  2b32              CMP      r3,#0x32              ;4391
00291c  d20a              BCS      |L1.10548|
00291e  f1030301          ADD      r3,r3,#1              ;4391
002922  f8013025          STRB     r3,[r1,r5,LSL #2]     ;4391
002926  e005              B        |L1.10548|
                  |L1.10536|
002928  eb000340          ADD      r3,r0,r0,LSL #1       ;4393
00292c  eb031300          ADD      r3,r3,r0,LSL #4       ;4393
002930  f8012023          STRB     r2,[r1,r3,LSL #2]     ;4393
                  |L1.10548|
002934  f1000001          ADD      r0,r0,#1              ;4387
002938  b2c0              UXTB     r0,r0                 ;4387
00293a  2802              CMP      r0,#2                 ;4387
00293c  d3e3              BCC      |L1.10502|
00293e  e7bb              B        |L1.10424|
                  |L1.10560|
;;;4407   		else bat[i]._rel_stat=0;
002940  eb010383          ADD      r3,r1,r3,LSL #2
002944  f883203c          STRB     r2,[r3,#0x3c]
                  |L1.10568|
002948  f1000001          ADD      r0,r0,#1              ;4404
00294c  b2c0              UXTB     r0,r0                 ;4404
00294e  2802              CMP      r0,#2                 ;4404
002950  d3b4              BCC      |L1.10428|
;;;4408   		}
;;;4409   
;;;4410   	}
;;;4411   
;;;4412   else 
;;;4413   	{
;;;4414   	char i;
;;;4415   	for(i=0;i<MAX_NUM_OF_BAT;i++)
;;;4416   		{
;;;4417   		bat[i]._cnt_to_block=0;
;;;4418   		bat[i]._rel_stat=0;
;;;4419   		}
;;;4420   
;;;4421   	}
;;;4422   
;;;4423   /*if(mess_find_unvol(MESS2BAT_HNDL1))
;;;4424   	{
;;;4425   	if(PARAM_BAT_ON)
;;;4426   		{
;;;4427   		char i;
;;;4428   		for(i=0;i<MAX_NUM_OF_BAT;i++)
;;;4429   			{
;;;4430   			if(mess_data[1]&(1<<i))
;;;4431   				{
;;;4432   				bat[i]._cnt_to_block=0;
;;;4433   				bat[i]._rel_stat=0;
;;;4434   				}
;;;4435   			}
;;;4436   		}
;;;4437   	} */
;;;4438   }
002952  bd70              POP      {r4-r6,pc}
                  |L1.10580|
002954  f04f0000          MOV      r0,#0                 ;4415
                  |L1.10584|
002958  eb000340          ADD      r3,r0,r0,LSL #1       ;4417
00295c  eb031300          ADD      r3,r3,r0,LSL #4       ;4417
002960  f8012023          STRB     r2,[r1,r3,LSL #2]     ;4417
002964  eb010383          ADD      r3,r1,r3,LSL #2       ;4418
002968  f883203c          STRB     r2,[r3,#0x3c]         ;4418
00296c  f1000001          ADD      r0,r0,#1              ;4415
002970  b2c0              UXTB     r0,r0                 ;4415
002972  2802              CMP      r0,#2                 ;4415
002974  d3f0              BCC      |L1.10584|
002976  bd70              POP      {r4-r6,pc}
;;;4439   
                          ENDP

                  klimat_hndl PROC
;;;4569   //-----------------------------------------------
;;;4570   void klimat_hndl(void)
002978  e92d41f0          PUSH     {r4-r8,lr}
;;;4571   {
;;;4572   
;;;4573   
;;;4574   if(t_box>TBOXMAX)
00297c  4dbf              LDR      r5,|L1.11388|
00297e  48c0              LDR      r0,|L1.11392|
;;;4575   	{
;;;4576   	av_tbox_cnt++;
002980  4cc0              LDR      r4,|L1.11396|
002982  f9b51000          LDRSH    r1,[r5,#0]            ;4574  ; t_box
002986  f9b02000          LDRSH    r2,[r0,#0]            ;4574  ; TBOXMAX
00298a  f9b40000          LDRSH    r0,[r4,#0]
00298e  4291              CMP      r1,r2                 ;4574
002990  dd03              BLE      |L1.10650|
002992  f1000001          ADD      r0,r0,#1
002996  8020              STRH     r0,[r4,#0]
002998  e003              B        |L1.10658|
                  |L1.10650|
;;;4577   	} 
;;;4578   else if(t_box<TBOXMAX)
00299a  da02              BGE      |L1.10658|
;;;4579   	{
;;;4580   	av_tbox_cnt--;
00299c  f1a00001          SUB      r0,r0,#1
0029a0  8020              STRH     r0,[r4,#0]
                  |L1.10658|
;;;4581   	}
;;;4582   gran(&av_tbox_cnt,0,6);
0029a2  2206              MOVS     r2,#6
0029a4  2100              MOVS     r1,#0
0029a6  48b7              LDR      r0,|L1.11396|
0029a8  f7fffffe          BL       gran
;;;4583   
;;;4584   if(av_tbox_cnt>5)
0029ac  f9b40000          LDRSH    r0,[r4,#0]  ; av_tbox_cnt
;;;4585   	{
;;;4586   	av_tbox_stat=atsON;
0029b0  49b5              LDR      r1,|L1.11400|
0029b2  2601              MOVS     r6,#1
0029b4  2805              CMP      r0,#5                 ;4584
0029b6  dd00              BLE      |L1.10682|
0029b8  700e              STRB     r6,[r1,#0]
                  |L1.10682|
0029ba  2400              MOVS     r4,#0                 ;4582
;;;4587   	}
;;;4588   if(av_tbox_cnt<1)
0029bc  2801              CMP      r0,#1
0029be  da00              BGE      |L1.10690|
;;;4589   	{
;;;4590   	av_tbox_stat=atsOFF;
0029c0  700c              STRB     r4,[r1,#0]
                  |L1.10690|
;;;4591   	}
;;;4592   
;;;4593   if(t_box<(TBOXREG-2))
0029c2  49b2              LDR      r1,|L1.11404|
0029c4  f9b50000          LDRSH    r0,[r5,#0]  ; t_box
;;;4594   	{
;;;4595   	if(t_box_cnt<30)
0029c8  4ab1              LDR      r2,|L1.11408|
0029ca  f9b11000          LDRSH    r1,[r1,#0]            ;4593  ; TBOXREG
;;;4596   		{
;;;4597   		t_box_cnt++;
;;;4598   		if(t_box_cnt>=30)
;;;4599   			{
;;;4600   			main_vent_pos--;
0029ce  4fb1              LDR      r7,|L1.11412|
0029d0  1e8b              SUBS     r3,r1,#2              ;4593
0029d2  4298              CMP      r0,r3                 ;4593
0029d4  da0f              BGE      |L1.10742|
0029d6  f9921000          LDRSB    r1,[r2,#0]            ;4595  ; t_box_cnt
0029da  291e              CMP      r1,#0x1e              ;4595
0029dc  da1e              BGE      |L1.10780|
0029de  f1010101          ADD      r1,r1,#1              ;4597
0029e2  b249              SXTB     r1,r1                 ;4597
0029e4  7011              STRB     r1,[r2,#0]            ;4597
0029e6  291e              CMP      r1,#0x1e              ;4598
0029e8  db18              BLT      |L1.10780|
0029ea  8839              LDRH     r1,[r7,#0]  ; main_vent_pos
0029ec  f1a10101          SUB      r1,r1,#1
0029f0  8039              STRH     r1,[r7,#0]
;;;4601   			t_box_cnt=0;
0029f2  7014              STRB     r4,[r2,#0]
0029f4  e012              B        |L1.10780|
                  |L1.10742|
;;;4602   			}
;;;4603   		}
;;;4604   	}
;;;4605   else if(t_box>(TBOXREG))
0029f6  4288              CMP      r0,r1
0029f8  dd0f              BLE      |L1.10778|
;;;4606   	{
;;;4607   	if(t_box_cnt<30)
0029fa  f9921000          LDRSB    r1,[r2,#0]  ; t_box_cnt
0029fe  291e              CMP      r1,#0x1e
002a00  da0c              BGE      |L1.10780|
;;;4608   		{
;;;4609   		t_box_cnt++;
002a02  f1010101          ADD      r1,r1,#1
002a06  b249              SXTB     r1,r1
002a08  7011              STRB     r1,[r2,#0]
;;;4610   		if(t_box_cnt>=30)
002a0a  291e              CMP      r1,#0x1e
002a0c  db06              BLT      |L1.10780|
;;;4611   			{
;;;4612   			main_vent_pos++;
002a0e  8839              LDRH     r1,[r7,#0]  ; main_vent_pos
002a10  f1010101          ADD      r1,r1,#1
002a14  8039              STRH     r1,[r7,#0]
;;;4613   			t_box_cnt=0;
002a16  7014              STRB     r4,[r2,#0]
002a18  e000              B        |L1.10780|
                  |L1.10778|
;;;4614   			}
;;;4615   		}
;;;4616   	}
;;;4617   else
;;;4618   	{
;;;4619   	t_box_cnt=0;
002a1a  7014              STRB     r4,[r2,#0]
                  |L1.10780|
;;;4620   	}
;;;4621   
;;;4622   #ifndef UKU_KONTUR
;;;4623   if(t_box>TBOXVENTMAX)gran(&main_vent_pos,0,20); 
002a1c  499e              LDR      r1,|L1.11416|
002a1e  f9b11000          LDRSH    r1,[r1,#0]  ; TBOXVENTMAX
002a22  4288              CMP      r0,r1
002a24  dd05              BLE      |L1.10802|
002a26  2214              MOVS     r2,#0x14
002a28  2100              MOVS     r1,#0
002a2a  489a              LDR      r0,|L1.11412|
002a2c  f7fffffe          BL       gran
002a30  e007              B        |L1.10818|
                  |L1.10802|
;;;4624   else gran(&main_vent_pos,0,pos_vent+9);
002a32  489a              LDR      r0,|L1.11420|
002a34  2100              MOVS     r1,#0
002a36  8800              LDRH     r0,[r0,#0]  ; pos_vent
002a38  3009              ADDS     r0,r0,#9
002a3a  b202              SXTH     r2,r0
002a3c  4895              LDR      r0,|L1.11412|
002a3e  f7fffffe          BL       gran
                  |L1.10818|
;;;4625   
;;;4626   if((mess_find_unvol(MESS2VENT_HNDL))&&(mess_data[0]==PARAM_VENT_CB))
002a42  20f0              MOVS     r0,#0xf0
002a44  f7fffffe          BL       mess_find_unvol
002a48  b128              CBZ      r0,|L1.10838|
002a4a  488b              LDR      r0,|L1.11384|
002a4c  6801              LDR      r1,[r0,#0]  ; mess_data
002a4e  29f1              CMP      r1,#0xf1
002a50  d101              BNE      |L1.10838|
;;;4627   	{
;;;4628   	main_vent_pos=mess_data[1];
002a52  6840              LDR      r0,[r0,#4]  ; mess_data
002a54  8038              STRH     r0,[r7,#0]
                  |L1.10838|
;;;4629   	}
;;;4630   
;;;4631   
;;;4632   if(main_vent_pos<=1)mixer_vent_stat=mvsON;
002a56  f9b71000          LDRSH    r1,[r7,#0]  ; main_vent_pos
002a5a  4891              LDR      r0,|L1.11424|
002a5c  2901              CMP      r1,#1
002a5e  dc01              BGT      |L1.10852|
002a60  7006              STRB     r6,[r0,#0]
002a62  e000              B        |L1.10854|
                  |L1.10852|
;;;4633   else mixer_vent_stat=mvsOFF;
002a64  7004              STRB     r4,[r0,#0]
                  |L1.10854|
;;;4634   #endif
;;;4635   
;;;4636   #ifdef UKU_KONTUR
;;;4637   
;;;4638   if(t_box>TBOXVENTON) t_box_vent_on_cnt++;
;;;4639   else if(t_box<TBOXVENTOFF) t_box_vent_on_cnt--;
;;;4640   gran(&t_box_vent_on_cnt,0,10);
;;;4641   
;;;4642   if(t_box_vent_on_cnt>9) vent_stat_k=vsON;
;;;4643   else if(t_box_vent_on_cnt<1) vent_stat_k=vsOFF;
;;;4644   
;;;4645   if(t_box<TBOXWARMON) t_box_warm_on_cnt++;
;;;4646   else if(t_box>TBOXWARMOFF) t_box_warm_on_cnt--;
;;;4647   gran(&t_box_warm_on_cnt,0,10);
;;;4648   
;;;4649   if(t_box_warm_on_cnt>9) warm_stat_k=wsON;
;;;4650   else if(t_box_warm_on_cnt<1) warm_stat_k=wsOFF;
;;;4651   
;;;4652   #endif
;;;4653   
;;;4654   if((TBATDISABLE>=50) && (TBATDISABLE<=90))
002a66  488f              LDR      r0,|L1.11428|
;;;4655   	{
;;;4656   	if(t_box>TBATDISABLE)
;;;4657   		{
;;;4658   		tbatdisable_cnt++;
;;;4659   		}
;;;4660   	if(t_box<TBATENABLE)
;;;4661   		{
;;;4662   		tbatdisable_cnt--;
;;;4663   		}
;;;4664   	gran(&tbatdisable_cnt,0,6);
;;;4665   
;;;4666   	if(tbatdisable_cnt>5)
;;;4667   		{
;;;4668   		tbatdisable_stat=tbdsOFF;
002a68  f8df823c          LDR      r8,|L1.11432|
002a6c  f9b00000          LDRSH    r0,[r0,#0]            ;4654  ; TBATDISABLE
002a70  f1a00132          SUB      r1,r0,#0x32           ;4654
002a74  2928              CMP      r1,#0x28              ;4654
002a76  d821              BHI      |L1.10940|
002a78  f9b51000          LDRSH    r1,[r5,#0]            ;4656  ; t_box
002a7c  4f8b              LDR      r7,|L1.11436|
002a7e  4281              CMP      r1,r0                 ;4656
002a80  dd03              BLE      |L1.10890|
002a82  8838              LDRH     r0,[r7,#0]            ;4658  ; tbatdisable_cnt
002a84  f1000001          ADD      r0,r0,#1              ;4658
002a88  8038              STRH     r0,[r7,#0]            ;4658
                  |L1.10890|
002a8a  4889              LDR      r0,|L1.11440|
002a8c  f9b00000          LDRSH    r0,[r0,#0]            ;4660  ; TBATENABLE
002a90  4281              CMP      r1,r0                 ;4660
002a92  da03              BGE      |L1.10908|
002a94  8838              LDRH     r0,[r7,#0]            ;4662  ; tbatdisable_cnt
002a96  f1a00001          SUB      r0,r0,#1              ;4662
002a9a  8038              STRH     r0,[r7,#0]            ;4662
                  |L1.10908|
002a9c  2206              MOVS     r2,#6                 ;4664
002a9e  2100              MOVS     r1,#0                 ;4664
002aa0  4882              LDR      r0,|L1.11436|
002aa2  f7fffffe          BL       gran
002aa6  f9b70000          LDRSH    r0,[r7,#0]            ;4666  ; tbatdisable_cnt
002aaa  2805              CMP      r0,#5                 ;4666
002aac  dd01              BLE      |L1.10930|
002aae  f8886000          STRB     r6,[r8,#0]
                  |L1.10930|
;;;4669   		}
;;;4670   	if(tbatdisable_cnt<1)
002ab2  2801              CMP      r0,#1
002ab4  da04              BGE      |L1.10944|
;;;4671   		{
;;;4672   		tbatdisable_stat=tbdsON;
002ab6  f8884000          STRB     r4,[r8,#0]
002aba  e001              B        |L1.10944|
                  |L1.10940|
;;;4673   		}
;;;4674   	}
;;;4675   else 
;;;4676   	{
;;;4677   	tbatdisable_stat=tbdsON;
002abc  f8884000          STRB     r4,[r8,#0]
                  |L1.10944|
;;;4678   	}
;;;4679   
;;;4680   if((TLOADDISABLE>=50) && (TLOADDISABLE<=80))
002ac0  487c              LDR      r0,|L1.11444|
;;;4681   	{
;;;4682   	if(t_box>TLOADDISABLE)
;;;4683   		{
;;;4684   		tloaddisable_cnt++;
;;;4685   		}
;;;4686   	if(t_box<TLOADENABLE)
;;;4687   		{
;;;4688   		tloaddisable_cnt--;
;;;4689   		}
;;;4690   	gran(&tloaddisable_cnt,0,6);
;;;4691   
;;;4692   	if(tloaddisable_cnt>5)
;;;4693   		{
;;;4694   		tloaddisable_stat=tldsOFF;
002ac2  4f7d              LDR      r7,|L1.11448|
002ac4  f9b00000          LDRSH    r0,[r0,#0]            ;4680  ; TLOADDISABLE
002ac8  f1a00132          SUB      r1,r0,#0x32           ;4680
002acc  291e              CMP      r1,#0x1e              ;4680
002ace  d81f              BHI      |L1.11024|
002ad0  f9b51000          LDRSH    r1,[r5,#0]            ;4682  ; t_box
002ad4  4d79              LDR      r5,|L1.11452|
002ad6  4281              CMP      r1,r0                 ;4682
002ad8  dd03              BLE      |L1.10978|
002ada  8828              LDRH     r0,[r5,#0]            ;4684  ; tloaddisable_cnt
002adc  f1000001          ADD      r0,r0,#1              ;4684
002ae0  8028              STRH     r0,[r5,#0]            ;4684
                  |L1.10978|
002ae2  4877              LDR      r0,|L1.11456|
002ae4  f9b00000          LDRSH    r0,[r0,#0]            ;4686  ; TLOADENABLE
002ae8  4281              CMP      r1,r0                 ;4686
002aea  da03              BGE      |L1.10996|
002aec  8828              LDRH     r0,[r5,#0]            ;4688  ; tloaddisable_cnt
002aee  f1a00001          SUB      r0,r0,#1              ;4688
002af2  8028              STRH     r0,[r5,#0]            ;4688
                  |L1.10996|
002af4  2206              MOVS     r2,#6                 ;4690
002af6  2100              MOVS     r1,#0                 ;4690
002af8  4870              LDR      r0,|L1.11452|
002afa  f7fffffe          BL       gran
002afe  f9b50000          LDRSH    r0,[r5,#0]            ;4692  ; tloaddisable_cnt
002b02  2805              CMP      r0,#5                 ;4692
002b04  dd00              BLE      |L1.11016|
002b06  703e              STRB     r6,[r7,#0]
                  |L1.11016|
;;;4695   		}
;;;4696   	if(tloaddisable_cnt<1)
002b08  2801              CMP      r0,#1
002b0a  da00              BGE      |L1.11022|
;;;4697   		{
;;;4698   		tloaddisable_stat=tldsON;
002b0c  703c              STRB     r4,[r7,#0]
                  |L1.11022|
;;;4699   		}
;;;4700   	}
;;;4701   else 
;;;4702   	{
;;;4703   	tloaddisable_stat=tldsON;
;;;4704   	}
;;;4705   
;;;4706   }
002b0e  e53d              B        |L1.9612|
                  |L1.11024|
002b10  703c              STRB     r4,[r7,#0]            ;4703
002b12  e53b              B        |L1.9612|
;;;4707   #endif
                          ENDP

                  bat_drv PROC
;;;4843   //-----------------------------------------------
;;;4844   void bat_drv(char in)
002b14  e92d5ffc          PUSH     {r2-r12,lr}
;;;4845   {
002b18  4605              MOV      r5,r0
;;;4846   unsigned short /*tempUS,*/tempUS_;
;;;4847   unsigned long tempUL,tempUL_;
;;;4848   unsigned short b_zar;
;;;4849   //static unsigned short time_cnt[2];
;;;4850   
;;;4851   
;;;4852   
;;;4853   if(cntrl_stat_blok_cnt_plus[in])cntrl_stat_blok_cnt_plus[in]--;
002b1a  496a              LDR      r1,|L1.11460|
002b1c  f9310015          LDRSH    r0,[r1,r5,LSL #1]
002b20  b118              CBZ      r0,|L1.11050|
002b22  f1a00001          SUB      r0,r0,#1
002b26  f8210015          STRH     r0,[r1,r5,LSL #1]
                  |L1.11050|
;;;4854   if(cntrl_stat_blok_cnt_minus[in])cntrl_stat_blok_cnt_minus[in]--;
002b2a  4a66              LDR      r2,|L1.11460|
002b2c  1d12              ADDS     r2,r2,#4
002b2e  f9320015          LDRSH    r0,[r2,r5,LSL #1]
002b32  b118              CBZ      r0,|L1.11068|
002b34  f1a00001          SUB      r0,r0,#1
002b38  f8220015          STRH     r0,[r2,r5,LSL #1]
                  |L1.11068|
;;;4855   
;;;4856   
;;;4857   if(bat[in]._Ib>IZMAX) cntrl_stat_blok_cnt_plus[in]=100;
002b3c  eb050045          ADD      r0,r5,r5,LSL #1
002b40  eb001305          ADD      r3,r0,r5,LSL #4
002b44  484b              LDR      r0,|L1.11380|
002b46  f04f0b64          MOV      r11,#0x64
002b4a  eb000483          ADD      r4,r0,r3,LSL #2
002b4e  4b5e              LDR      r3,|L1.11464|
002b50  f9b40008          LDRSH    r0,[r4,#8]
002b54  f9b33000          LDRSH    r3,[r3,#0]  ; IZMAX
002b58  4298              CMP      r0,r3
002b5a  dd01              BLE      |L1.11104|
002b5c  f821b015          STRH     r11,[r1,r5,LSL #1]
                  |L1.11104|
;;;4858   if(bat[in]._Ib<0)     cntrl_stat_blok_cnt_minus[in]=100;
002b60  2800              CMP      r0,#0
002b62  da01              BGE      |L1.11112|
002b64  f822b015          STRH     r11,[r2,r5,LSL #1]
                  |L1.11112|
;;;4859   
;;;4860   if(cntrl_stat_blok_cnt_plus[in] && cntrl_stat_blok_cnt_minus[in])
;;;4861        {
;;;4862        if(!cntrl_stat_blok_cnt_)
002b68  4856              LDR      r0,|L1.11460|
002b6a  f8313015          LDRH     r3,[r1,r5,LSL #1]     ;4860
002b6e  3884              SUBS     r0,r0,#0x84
002b70  2700              MOVS     r7,#0
002b72  b14b              CBZ      r3,|L1.11144|
002b74  f8323015          LDRH     r3,[r2,r5,LSL #1]     ;4860
002b78  b133              CBZ      r3,|L1.11144|
002b7a  f8b03060          LDRH     r3,[r0,#0x60]  ; cntrl_stat_blok_cnt_
002b7e  b1a3              CBZ      r3,|L1.11178|
;;;4863             {
;;;4864             cntrl_stat_blok_cnt_=600; 
;;;4865             cntrl_stat_blok_cnt_plus[in]=0;
;;;4866             cntrl_stat_blok_cnt_minus[in]=0;
;;;4867             }
;;;4868        else cntrl_stat_blok_cnt=3000;
002b80  f64031b8          MOV      r1,#0xbb8
002b84  f8a0105e          STRH     r1,[r0,#0x5e]
                  |L1.11144|
;;;4869        }
;;;4870   cntrl_stat_blok_cnt=0;
002b88  f8a0705e          STRH     r7,[r0,#0x5e]
;;;4871   
;;;4872   if(++(bat[in]._time_cnt)>=10)
002b8c  f894003e          LDRB     r0,[r4,#0x3e]
002b90  1c40              ADDS     r0,r0,#1
002b92  b2c0              UXTB     r0,r0
002b94  f884003e          STRB     r0,[r4,#0x3e]
002b98  280a              CMP      r0,#0xa
002b9a  d301              BCC      |L1.11168|
;;;4873   	{
;;;4874   	bat[in]._time_cnt=0;
002b9c  f884703e          STRB     r7,[r4,#0x3e]
                  |L1.11168|
;;;4875   	//bat[in]._zar_cnt++;
;;;4876   	}
;;;4877   
;;;4878   if(main_10Hz_cnt==50)
002ba0  4e4a              LDR      r6,|L1.11468|
002ba2  8830              LDRH     r0,[r6,#0]  ; main_10Hz_cnt
002ba4  2832              CMP      r0,#0x32
002ba6  d009              BEQ      |L1.11196|
002ba8  e0a1              B        |L1.11502|
                  |L1.11178|
002baa  f44f7316          MOV      r3,#0x258             ;4864
002bae  f8a03060          STRH     r3,[r0,#0x60]         ;4864
002bb2  f8217015          STRH     r7,[r1,r5,LSL #1]     ;4865
002bb6  f8227015          STRH     r7,[r2,r5,LSL #1]     ;4866
002bba  e7e5              B        |L1.11144|
                  |L1.11196|
002bbc  e088              B        |L1.11472|
002bbe  0000              DCW      0x0000
                  |L1.11200|
002bc0  4176746f          DCB      "Avtomat #1 is ON ",0
002bc4  6d617420
002bc8  23312069
002bcc  73204f4e
002bd0  2000    
002bd2  00                DCB      0
002bd3  00                DCB      0
                  |L1.11220|
002bd4  4176746f          DCB      "Avtomat #2 is ON ",0
002bd8  6d617420
002bdc  23322069
002be0  73204f4e
002be4  2000    
002be6  00                DCB      0
002be7  00                DCB      0
                  |L1.11240|
002be8  4176746f          DCB      "Avtomat #3 is ON ",0
002bec  6d617420
002bf0  23332069
002bf4  73204f4e
002bf8  2000    
002bfa  00                DCB      0
002bfb  00                DCB      0
                  |L1.11260|
002bfc  4176746f          DCB      "Avtomat #4 is ON ",0
002c00  6d617420
002c04  23342069
002c08  73204f4e
002c0c  2000    
002c0e  00                DCB      0
002c0f  00                DCB      0
                  |L1.11280|
002c10  4176746f          DCB      "Avtomat #5 is ON ",0
002c14  6d617420
002c18  23352069
002c1c  73204f4e
002c20  2000    
002c22  00                DCB      0
002c23  00                DCB      0
                  |L1.11300|
002c24  4176746f          DCB      "Avtomat #6 is ON ",0
002c28  6d617420
002c2c  23362069
002c30  73204f4e
002c34  2000    
002c36  00                DCB      0
002c37  00                DCB      0
                  |L1.11320|
002c38  4176746f          DCB      "Avtomat #7 is ON ",0
002c3c  6d617420
002c40  23372069
002c44  73204f4e
002c48  2000    
002c4a  00                DCB      0
002c4b  00                DCB      0
                  |L1.11340|
002c4c  4176746f          DCB      "Avtomat #8 is ON ",0
002c50  6d617420
002c54  23382069
002c58  73204f4e
002c5c  2000    
002c5e  00                DCB      0
002c5f  00                DCB      0
                  |L1.11360|
002c60  4176746f          DCB      "Avtomat #9 is ON ",0
002c64  6d617420
002c68  23392069
002c6c  73204f4e
002c70  2000    
002c72  00                DCB      0
002c73  00                DCB      0
                  |L1.11380|
                          DCD      bat
                  |L1.11384|
                          DCD      mess_data
                  |L1.11388|
                          DCD      t_box
                  |L1.11392|
                          DCD      TBOXMAX
                  |L1.11396|
                          DCD      av_tbox_cnt
                  |L1.11400|
                          DCD      av_tbox_stat
                  |L1.11404|
                          DCD      TBOXREG
                  |L1.11408|
                          DCD      t_box_cnt
                  |L1.11412|
                          DCD      main_vent_pos
                  |L1.11416|
                          DCD      TBOXVENTMAX
                  |L1.11420|
                          DCD      pos_vent
                  |L1.11424|
                          DCD      mixer_vent_stat
                  |L1.11428|
                          DCD      TBATDISABLE
                  |L1.11432|
                          DCD      tbatdisable_stat
                  |L1.11436|
                          DCD      tbatdisable_cnt
                  |L1.11440|
                          DCD      TBATENABLE
                  |L1.11444|
                          DCD      TLOADDISABLE
                  |L1.11448|
                          DCD      tloaddisable_stat
                  |L1.11452|
                          DCD      tloaddisable_cnt
                  |L1.11456|
                          DCD      TLOADENABLE
                  |L1.11460|
                          DCD      ||area_number.21||+0x84
                  |L1.11464|
                          DCD      IZMAX
                  |L1.11468|
                          DCD      main_10Hz_cnt
                  |L1.11472|
;;;4879   	{
;;;4880   	if(!bat[in]._rel_stat)
002cd0  f894003c          LDRB     r0,[r4,#0x3c]
002cd4  b958              CBNZ     r0,|L1.11502|
;;;4881   		{
;;;4882   		
;;;4883   		if(bat[in]._Ub<80) 
002cd6  f9b40002          LDRSH    r0,[r4,#2]
002cda  2850              CMP      r0,#0x50
002cdc  da07              BGE      |L1.11502|
;;;4884   			{
;;;4885   			
;;;4886   			if(!(bat[in]._av&1))
002cde  f894003d          LDRB     r0,[r4,#0x3d]
002ce2  07c0              LSLS     r0,r0,#31
002ce4  d103              BNE      |L1.11502|
;;;4887   				{
;;;4888   				avar_bat_hndl(in,1);
002ce6  2101              MOVS     r1,#1
002ce8  4628              MOV      r0,r5
002cea  f7fffffe          BL       avar_bat_hndl
                  |L1.11502|
;;;4889   				//if(in==0)plazma_bat++;
;;;4890   				}
;;;4891   			}				
;;;4892   
;;;4893   		}
;;;4894   	}
;;;4895   
;;;4896   if(main_10Hz_cnt>200)
002cee  f9b60000          LDRSH    r0,[r6,#0]  ; main_10Hz_cnt
;;;4897   	{
;;;4898   	if(abs(bat[in]._Ib)>IKB) 
002cf2  4eff              LDR      r6,|L1.12528|
002cf4  28c8              CMP      r0,#0xc8              ;4896
002cf6  dd0f              BLE      |L1.11544|
002cf8  f9b40008          LDRSH    r0,[r4,#8]
002cfc  f7fffffe          BL       abs
002d00  f9b61000          LDRSH    r1,[r6,#0]  ; IKB
002d04  4288              CMP      r0,r1
002d06  dd07              BLE      |L1.11544|
;;;4899   		{
;;;4900   		if((bat[in]._av&1))avar_bat_hndl(in,0);
002d08  f894003d          LDRB     r0,[r4,#0x3d]
002d0c  07c0              LSLS     r0,r0,#31
002d0e  d003              BEQ      |L1.11544|
002d10  2100              MOVS     r1,#0
002d12  4628              MOV      r0,r5
002d14  f7fffffe          BL       avar_bat_hndl
                  |L1.11544|
;;;4901   		}
;;;4902   	}
;;;4903   
;;;4904   
;;;4905   
;;;4906   if(bat[in]._Ib>(-IKB))
002d18  48f5              LDR      r0,|L1.12528|
002d1a  f9b41008          LDRSH    r1,[r4,#8]
002d1e  f9b00000          LDRSH    r0,[r0,#0]  ; IKB
002d22  4240              RSBS     r0,r0,#0
002d24  4281              CMP      r1,r0
002d26  dd14              BLE      |L1.11602|
;;;4907   	{
;;;4908   	if(bat[in]._cnt_wrk<10)
002d28  7b60              LDRB     r0,[r4,#0xd]
002d2a  280a              CMP      r0,#0xa
002d2c  d20d              BCS      |L1.11594|
;;;4909   		{
;;;4910   		bat[in]._cnt_wrk++;
002d2e  f1000001          ADD      r0,r0,#1
002d32  b2c0              UXTB     r0,r0
002d34  7360              STRB     r0,[r4,#0xd]
;;;4911   		if((bat[in]._cnt_wrk>=10)&&(bat[in]._wrk)) 
002d36  280a              CMP      r0,#0xa
002d38  d371              BCC      |L1.11806|
002d3a  7ba0              LDRB     r0,[r4,#0xe]
002d3c  2800              CMP      r0,#0
002d3e  d06e              BEQ      |L1.11806|
;;;4912   			{
;;;4913   			bat[in]._wrk=0;
002d40  73a7              STRB     r7,[r4,#0xe]
;;;4914   			//beep_init(0x7L,'O');
;;;4915   			//wrk_mem_hndl(0);
;;;4916   			wrk_mem_hndl(in);
002d42  4628              MOV      r0,r5
002d44  f7fffffe          BL       wrk_mem_hndl
002d48  e069              B        |L1.11806|
                  |L1.11594|
;;;4917   			//plazma++;
;;;4918   			}
;;;4919   		}
;;;4920   	else bat[in]._cnt_wrk=10;	
002d4a  f04f000a          MOV      r0,#0xa
002d4e  7360              STRB     r0,[r4,#0xd]
002d50  e065              B        |L1.11806|
                  |L1.11602|
;;;4921   	}	
;;;4922   
;;;4923   else if(bat[in]._Ib<(-IKB))
002d52  da64              BGE      |L1.11806|
;;;4924   	{
;;;4925   	if(bat[in]._cnt_wrk)
002d54  7b60              LDRB     r0,[r4,#0xd]
002d56  b3f0              CBZ      r0,|L1.11734|
;;;4926   		{
;;;4927   		bat[in]._cnt_wrk--;
002d58  f1a00001          SUB      r0,r0,#1
002d5c  b2c0              UXTB     r0,r0
002d5e  7360              STRB     r0,[r4,#0xd]
;;;4928   		if((bat[in]._cnt_wrk==0)&&(bat[in]._wrk==0)) 
002d60  bbc8              CBNZ     r0,|L1.11734|
002d62  7ba0              LDRB     r0,[r4,#0xe]
002d64  bbb8              CBNZ     r0,|L1.11734|
;;;4929   			{
;;;4930   			bat[in]._wrk=1;
002d66  f04f0001          MOV      r0,#1
002d6a  73a0              STRB     r0,[r4,#0xe]
;;;4931   
;;;4932   				{
;;;4933   				char temp;
;;;4934   				signed short temp_temp;
;;;4935   				temp_temp=bat[in]._u_old[((bat_u_old_cnt+1)&0x07)];
002d6c  48e1              LDR      r0,|L1.12532|
002d6e  8800              LDRH     r0,[r0,#0]  ; bat_u_old_cnt
002d70  f1000001          ADD      r0,r0,#1
002d74  f0000007          AND      r0,r0,#7
002d78  eb040040          ADD      r0,r4,r0,LSL #1
002d7c  8c00              LDRH     r0,[r0,#0x20]
002d7e  9000              STR      r0,[sp,#0]
;;;4936   			 
;;;4937   				temp=LPC_RTC->YEAR;
002d80  4edd              LDR      r6,|L1.12536|
002d82  8bb0              LDRH     r0,[r6,#0x1c]
002d84  9001              STR      r0,[sp,#4]
;;;4938   				gran_char((signed char*)&temp,1,99);
002d86  f04f0263          MOV      r2,#0x63
002d8a  f04f0101          MOV      r1,#1
002d8e  a801              ADD      r0,sp,#4
002d90  f7fffffe          BL       gran_char
;;;4939   				*((char*)(&(bat[in]._wrk_date[0])))=temp;
002d94  f104041c          ADD      r4,r4,#0x1c
002d98  f89d0004          LDRB     r0,[sp,#4]
002d9c  7620              STRB     r0,[r4,#0x18]
;;;4940   			
;;;4941   				temp=LPC_RTC->MONTH;
002d9e  7e30              LDRB     r0,[r6,#0x18]
002da0  9001              STR      r0,[sp,#4]
;;;4942   				gran_char((signed char*)&temp,1,12);
002da2  f04f020c          MOV      r2,#0xc
002da6  f04f0101          MOV      r1,#1
002daa  a801              ADD      r0,sp,#4
002dac  f7fffffe          BL       gran_char
;;;4943   				*(((char*)(&(bat[in]._wrk_date[0])))+1)=temp;
002db0  f89d0004          LDRB     r0,[sp,#4]
002db4  7660              STRB     r0,[r4,#0x19]
;;;4944   			
;;;4945   				temp=LPC_RTC->DOM;
002db6  7b30              LDRB     r0,[r6,#0xc]
002db8  9001              STR      r0,[sp,#4]
;;;4946   				gran_char((signed char*)&temp,1,31);
002dba  221f              MOVS     r2,#0x1f
002dbc  2101              MOVS     r1,#1
002dbe  a801              ADD      r0,sp,#4
002dc0  f7fffffe          BL       gran_char
;;;4947   				*(((char*)(&(bat[in]._wrk_date[0])))+2)=temp;			
002dc4  f89d0004          LDRB     r0,[sp,#4]
002dc8  76a0              STRB     r0,[r4,#0x1a]
;;;4948   				
;;;4949   				*(((char*)(&(bat[in]._wrk_date[0])))+3)=*((char*)&temp_temp);
002dca  f89d0000          LDRB     r0,[sp,#0]
002dce  76e0              STRB     r0,[r4,#0x1b]
;;;4950   
;;;4951   				temp=LPC_RTC->HOUR;
002dd0  7a30              LDRB     r0,[r6,#8]
002dd2  9001              STR      r0,[sp,#4]
;;;4952   				gran_char((signed char*)&temp,0,23);
002dd4  e000              B        |L1.11736|
                  |L1.11734|
002dd6  e022              B        |L1.11806|
                  |L1.11736|
002dd8  2217              MOVS     r2,#0x17
002dda  2100              MOVS     r1,#0
002ddc  a801              ADD      r0,sp,#4
002dde  f7fffffe          BL       gran_char
;;;4953   				*((char*)(&(bat[in]._wrk_date[1])))=temp;
002de2  f89d0004          LDRB     r0,[sp,#4]
002de6  7720              STRB     r0,[r4,#0x1c]
;;;4954                  	
;;;4955   				temp=LPC_RTC->MIN;
002de8  7930              LDRB     r0,[r6,#4]
002dea  9001              STR      r0,[sp,#4]
;;;4956   				gran_char((signed char*)&temp,0,59);
002dec  223b              MOVS     r2,#0x3b
002dee  2100              MOVS     r1,#0
002df0  a801              ADD      r0,sp,#4
002df2  f7fffffe          BL       gran_char
;;;4957   				*(((char*)(&(bat[in]._wrk_date[1])))+1)=temp;
002df6  f89d0004          LDRB     r0,[sp,#4]
002dfa  7760              STRB     r0,[r4,#0x1d]
;;;4958   	          
;;;4959   				temp=LPC_RTC->SEC;
002dfc  7830              LDRB     r0,[r6,#0]
002dfe  9001              STR      r0,[sp,#4]
;;;4960   				gran_char((signed char*)&temp,0,59);
002e00  223b              MOVS     r2,#0x3b
002e02  2100              MOVS     r1,#0
002e04  a801              ADD      r0,sp,#4
002e06  f7fffffe          BL       gran_char
;;;4961   				*(((char*)(&(bat[in]._wrk_date[1])))+2)=temp;
002e0a  f89d0004          LDRB     r0,[sp,#4]
002e0e  77a0              STRB     r0,[r4,#0x1e]
;;;4962   			
;;;4963   				*(((char*)(&(bat[in]._wrk_date[1])))+3)=*(((char*)&temp_temp)+1);
002e10  f89d0001          LDRB     r0,[sp,#1]
002e14  77e0              STRB     r0,[r4,#0x1f]
;;;4964   				bat[in]._Iintegr=0;		//  
002e16  8027              STRH     r7,[r4,#0]
;;;4965   				bat[in]._Iintegr_=0;	//  
002e18  8067              STRH     r7,[r4,#2]
002e1a  f1a4041c          SUB      r4,r4,#0x1c
                  |L1.11806|
;;;4966   				}
;;;4967   	
;;;4968   			}
;;;4969   
;;;4970   		}
;;;4971   	else bat[in]._cnt_wrk=0;	 
;;;4972   	
;;;4973   	}					
;;;4974   
;;;4975   /*
;;;4976   if(Ibat>=(-IKB))
;;;4977   	{
;;;4978   	if(cnt_wrk<10)
;;;4979   		{
;;;4980   		cnt_wrk++;
;;;4981   		if((cnt_wrk>=10)&&(wrk!=wrkOFF)) 
;;;4982   			{
;;;4983   			wrk=wrkOFF;
;;;4984   			//beep_init(0x7L,'O');
;;;4985   			wrk_mem_hndl(ibat_integr);
;;;4986   			}
;;;4987   		}
;;;4988   	else cnt_wrk=10;	
;;;4989   	}	
;;;4990   
;;;4991   else if((Ibat<(-IKB))&&(spc_stat!=spc_KE))
;;;4992   	{
;;;4993   	if(cnt_wrk)
;;;4994   		{
;;;4995   		cnt_wrk--;
;;;4996   		if((cnt_wrk==0)&&(wrk!=wrkON)) 
;;;4997   			{
;;;4998   			char temp;
;;;4999   			signed short temp_temp;
;;;5000   			temp_temp=ubat_old[((ubat_old_cnt+1)&0x07)];
;;;5001   			 
;;;5002   			wrk=wrkON;
;;;5003   			
;;;5004   			temp=_year;
;;;5005   			gran_char(&temp,1,99);
;;;5006   			*((char*)(&(wrk_date[0])))=temp;
;;;5007   			
;;;5008   			temp=_month;
;;;5009   			gran_char(&temp,1,12);
;;;5010   			*(((char*)(&(wrk_date[0])))+1)=temp;
;;;5011   			
;;;5012   			temp=_date;
;;;5013   			gran_char(&temp,1,31);
;;;5014   			*(((char*)(&(wrk_date[0])))+2)=temp;			
;;;5015   				
;;;5016   			*(((char*)(&(wrk_date[0])))+3)=*((char*)&temp_temp);
;;;5017   
;;;5018   			temp=_hour;
;;;5019   			gran_char(&temp,0,23);
;;;5020   			*((char*)(&(wrk_date[1])))=temp;
;;;5021                  
;;;5022   			temp=_min;
;;;5023   			gran_char(&temp,0,59);
;;;5024   			*(((char*)(&(wrk_date[1])))+1)=temp;
;;;5025   	          
;;;5026   			temp=_sec;
;;;5027   			gran_char(&temp,0,59);
;;;5028   			*(((char*)(&(wrk_date[1])))+2)=temp;
;;;5029   			
;;;5030   			*(((char*)(&(wrk_date[1])))+3)=*(((char*)&temp_temp)+1);
;;;5031   
;;;5032   			
;;;5033   			//beep_init(0xFL,'O'); 
;;;5034   			ibat_integr=0;
;;;5035   			ibat_integr_=0;
;;;5036   			}
;;;5037   		}
;;;5038   	else cnt_wrk=0;	 
;;;5039   	
;;;5040   	}
;;;5041   if(wrk==wrkON)
;;;5042   	{
;;;5043   	ibat_integr_+=-Ibat;
;;;5044   	if(ibat_integr_>=SEC_IN_HOUR*10L)
;;;5045   		{
;;;5046   		ibat_integr_-=SEC_IN_HOUR*10L;
;;;5047   		ibat_integr++;
;;;5048   		}
;;;5049   	}
;;;5050   
;;;5051   */
;;;5052   
;;;5053   
;;;5054   /*if(bat[in]._cnt_to_block)
;;;5055   	{
;;;5056   	bat[in]._cnt_to_block--;
;;;5057   	if(!(bat[in]._cnt_to_block))
;;;5058   		{
;;;5059   		//bat[in]._rel_stat=1;
;;;5060   		}
;;;5061   	}
;;;5062   */
;;;5063   
;;;5064   
;;;5065   
;;;5066   
;;;5067   //unsigned int tempUI,tempUI_;
;;;5068   //unsigned int b_zar; 
;;;5069   //char i;
;;;5070   //Ibat[0]=5000;                     
;;;5071   
;;;5072   
;;;5073                               
;;;5074   if(bat[in]._time_cnt==0)
;;;5075   	{
;;;5076   	bat[in]._zar_cnt+=(signed long)bat[in]._Ib;
;;;5077   	
;;;5078   	if(bat[in]._zar_cnt>=AH_CONSTANT)
002e1e  f64848a0          MOV      r8,#0x8ca0
002e22  f894003e          LDRB     r0,[r4,#0x3e]         ;5074
002e26  2800              CMP      r0,#0                 ;5074
002e28  d17e              BNE      |L1.12072|
002e2a  f9b41008          LDRSH    r1,[r4,#8]            ;5076
002e2e  6960              LDR      r0,[r4,#0x14]         ;5076
002e30  4408              ADD      r0,r0,r1              ;5076
002e32  6160              STR      r0,[r4,#0x14]         ;5076
;;;5079   		{
;;;5080   		if(BAT_C_REAL[in]==0x5555) tempUS_=BAT_C_NOM[in];
;;;5081   		else tempUS_=BAT_C_REAL[in];
;;;5082   		
;;;5083   		b_zar=lc640_read_int(ADR_EE_BAT_ZAR_CNT[in]);
002e34  f8df92c4          LDR      r9,|L1.12540|
002e38  f8dfa2c4          LDR      r10,|L1.12544|
002e3c  4540              CMP      r0,r8                 ;5078
002e3e  db2a              BLT      |L1.11926|
002e40  f93a1015          LDRSH    r1,[r10,r5,LSL #1]    ;5080
002e44  f5a140aa          SUB      r0,r1,#0x5500         ;5080
002e48  3855              SUBS     r0,r0,#0x55           ;5080
002e4a  d103              BNE      |L1.11860|
002e4c  48ad              LDR      r0,|L1.12548|
002e4e  f8306015          LDRH     r6,[r0,r5,LSL #1]     ;5080
002e52  e001              B        |L1.11864|
                  |L1.11860|
002e54  f83a6015          LDRH     r6,[r10,r5,LSL #1]    ;5081
                  |L1.11864|
002e58  f8390015          LDRH     r0,[r9,r5,LSL #1]
002e5c  f7fffffe          BL       lc640_read_int
002e60  b280              UXTH     r0,r0
;;;5084   
;;;5085   		if(b_zar<(tempUS_/**10*/))
002e62  42b0              CMP      r0,r6
002e64  d20e              BCS      |L1.11908|
;;;5086   			{
;;;5087   			bat[in]._zar_cnt-=AH_CONSTANT;
002e66  6961              LDR      r1,[r4,#0x14]
002e68  f5a14100          SUB      r1,r1,#0x8000
002e6c  f5a1614a          SUB      r1,r1,#0xca0
002e70  6161              STR      r1,[r4,#0x14]
;;;5088   
;;;5089   			lc640_write_int(ADR_EE_BAT_ZAR_CNT[in],b_zar+1);
002e72  f9392015          LDRSH    r2,[r9,r5,LSL #1]
002e76  f1000001          ADD      r0,r0,#1
002e7a  b201              SXTH     r1,r0
002e7c  4610              MOV      r0,r2
002e7e  f7fffffe          BL       lc640_write_int
002e82  e033              B        |L1.12012|
                  |L1.11908|
;;;5090   			}
;;;5091   		else if(b_zar>(tempUS_/**10*/))  
002e84  d932              BLS      |L1.12012|
;;;5092   			{
;;;5093   			lc640_write_int(ADR_EE_BAT_ZAR_CNT[in],tempUS_);
002e86  f9390015          LDRSH    r0,[r9,r5,LSL #1]
002e8a  b231              SXTH     r1,r6
002e8c  f7fffffe          BL       lc640_write_int
;;;5094   			bat[in]._zar_cnt=AH_CONSTANT;
002e90  f8c48014          STR      r8,[r4,#0x14]
002e94  e02a              B        |L1.12012|
                  |L1.11926|
;;;5095   
;;;5096   			}
;;;5097   
;;;5098   		}
;;;5099   
;;;5100   	else if(bat[in]._zar_cnt<=-AH_CONSTANT)
002e96  499c              LDR      r1,|L1.12552|
002e98  4288              CMP      r0,r1
002e9a  dc27              BGT      |L1.12012|
;;;5101   		{
;;;5102   		if(BAT_C_REAL[in]==0x5555) tempUS_=BAT_C_NOM[in];
002e9c  f93a1015          LDRSH    r1,[r10,r5,LSL #1]
002ea0  f5a140aa          SUB      r0,r1,#0x5500
002ea4  3855              SUBS     r0,r0,#0x55
002ea6  d103              BNE      |L1.11952|
002ea8  4896              LDR      r0,|L1.12548|
002eaa  f8306015          LDRH     r6,[r0,r5,LSL #1]
002eae  e001              B        |L1.11956|
                  |L1.11952|
;;;5103   		else tempUS_=BAT_C_REAL[in];
002eb0  f83a6015          LDRH     r6,[r10,r5,LSL #1]
                  |L1.11956|
;;;5104   		
;;;5105   		b_zar=lc640_read_int(ADR_EE_BAT_ZAR_CNT[in]);
002eb4  f8390015          LDRH     r0,[r9,r5,LSL #1]
002eb8  f7fffffe          BL       lc640_read_int
002ebc  b280              UXTH     r0,r0
;;;5106   
;;;5107   		if(b_zar>tempUS_)
002ebe  42b0              CMP      r0,r6
002ec0  d905              BLS      |L1.11982|
;;;5108   			{
;;;5109   			lc640_write_int(ADR_EE_BAT_ZAR_CNT[in],tempUS_);
002ec2  f9390015          LDRSH    r0,[r9,r5,LSL #1]
002ec6  b231              SXTH     r1,r6
002ec8  f7fffffe          BL       lc640_write_int
;;;5110   			b_zar=tempUS_;
002ecc  4630              MOV      r0,r6
                  |L1.11982|
;;;5111   			}
;;;5112   		if(b_zar)
002ece  b158              CBZ      r0,|L1.12008|
;;;5113   			{
;;;5114   			bat[in]._zar_cnt+=AH_CONSTANT;
002ed0  6961              LDR      r1,[r4,#0x14]
002ed2  4441              ADD      r1,r1,r8
002ed4  6161              STR      r1,[r4,#0x14]
;;;5115   
;;;5116   			lc640_write_int(ADR_EE_BAT_ZAR_CNT[in],b_zar-1);
002ed6  f9392015          LDRSH    r2,[r9,r5,LSL #1]
002eda  f1a00001          SUB      r0,r0,#1
002ede  b201              SXTH     r1,r0
002ee0  4610              MOV      r0,r2
002ee2  f7fffffe          BL       lc640_write_int
002ee6  e001              B        |L1.12012|
                  |L1.12008|
;;;5117   			}
;;;5118   		else 
;;;5119   			{
;;;5120   			bat[in]._zar_cnt=-AH_CONSTANT;
002ee8  4887              LDR      r0,|L1.12552|
002eea  6160              STR      r0,[r4,#0x14]
                  |L1.12012|
;;;5121   			}
;;;5122   
;;;5123   		}
;;;5124   
;;;5125   			
;;;5126   	tempUL=(unsigned long)lc640_read_int(ADR_EE_BAT_ZAR_CNT[in]);
002eec  f8390015          LDRH     r0,[r9,r5,LSL #1]
002ef0  f7fffffe          BL       lc640_read_int
002ef4  4601              MOV      r1,r0
;;;5127   	
;;;5128   	if(BAT_C_REAL[in]==0x5555) tempUL_=(unsigned long)BAT_C_NOM[in];
002ef6  f93a0015          LDRSH    r0,[r10,r5,LSL #1]
002efa  f5a042aa          SUB      r2,r0,#0x5500
002efe  3a55              SUBS     r2,r2,#0x55
002f00  d102              BNE      |L1.12040|
002f02  4880              LDR      r0,|L1.12548|
002f04  f9300015          LDRSH    r0,[r0,r5,LSL #1]
                  |L1.12040|
;;;5129   	else tempUL_=(unsigned long)BAT_C_REAL[in];
;;;5130   		           	
;;;5131   	tempUL*=1000L;
002f08  f44f727a          MOV      r2,#0x3e8
002f0c  fb01f102          MUL      r1,r1,r2
;;;5132   
;;;5133   
;;;5134   	if(tempUL_==0) tempUL=0;
002f10  b168              CBZ      r0,|L1.12078|
;;;5135   	else tempUL/=tempUL_;
002f12  fbb1f0f0          UDIV     r0,r1,r0
                  |L1.12054|
;;;5136   
;;;5137   	tempUL/=10L;
002f16  f04f010a          MOV      r1,#0xa
002f1a  fbb0f0f1          UDIV     r0,r0,r1
;;;5138   
;;;5139   	bat[in]._zar=(unsigned short)tempUL;
002f1e  8220              STRH     r0,[r4,#0x10]
;;;5140   
;;;5141   	if(BAT_TYPE==1)
002f20  487a              LDR      r0,|L1.12556|
002f22  8800              LDRH     r0,[r0,#0]  ; BAT_TYPE
002f24  2801              CMP      r0,#1
002f26  e000              B        |L1.12074|
                  |L1.12072|
002f28  e00f              B        |L1.12106|
                  |L1.12074|
002f2a  d003              BEQ      |L1.12084|
002f2c  e007              B        |L1.12094|
                  |L1.12078|
002f2e  f04f0000          MOV      r0,#0                 ;5134
002f32  e7f0              B        |L1.12054|
                  |L1.12084|
;;;5142   		{
;;;5143   		bat[in]._zar=lakb[in]._s_o_c;
002f34  4876              LDR      r0,|L1.12560|
002f36  eb001085          ADD      r0,r0,r5,LSL #6
002f3a  8a40              LDRH     r0,[r0,#0x12]
002f3c  8220              STRH     r0,[r4,#0x10]
                  |L1.12094|
;;;5144   		}
;;;5145   	
;;;5146   	gran((signed short*)&bat[in]._zar,0,100);
002f3e  f1040010          ADD      r0,r4,#0x10
002f42  2264              MOVS     r2,#0x64
002f44  2100              MOVS     r1,#0
002f46  f7fffffe          BL       gran
                  |L1.12106|
;;;5147        }
;;;5148   
;;;5149   
;;;5150   //         
;;;5151   if(bat[in]._wrk==1)
002f4a  7ba0              LDRB     r0,[r4,#0xe]
002f4c  2801              CMP      r0,#1
002f4e  d113              BNE      |L1.12152|
;;;5152   	{
;;;5153   	if(bat[in]._Iintegr<36000)
002f50  8ba0              LDRH     r0,[r4,#0x1c]
002f52  4540              CMP      r0,r8
002f54  d20f              BCS      |L1.12150|
;;;5154   		{          
;;;5155   		bat[in]._Iintegr+=abs(bat[in]._Ib);
002f56  f9b40008          LDRSH    r0,[r4,#8]
002f5a  f7fffffe          BL       abs
002f5e  8ba1              LDRH     r1,[r4,#0x1c]
002f60  4408              ADD      r0,r0,r1
002f62  b280              UXTH     r0,r0
002f64  83a0              STRH     r0,[r4,#0x1c]
;;;5156   		if(bat[in]._Iintegr>=36000)
002f66  4540              CMP      r0,r8
002f68  d306              BCC      |L1.12152|
;;;5157   			{
;;;5158   			bat[in]._Iintegr=0;		//  
002f6a  83a7              STRH     r7,[r4,#0x1c]
;;;5159   			bat[in]._Iintegr_++;	//  
002f6c  8be0              LDRH     r0,[r4,#0x1e]
002f6e  f1000001          ADD      r0,r0,#1
002f72  83e0              STRH     r0,[r4,#0x1e]
002f74  e000              B        |L1.12152|
                  |L1.12150|
;;;5160   			}
;;;5161   		}
;;;5162   	else 
;;;5163   		{
;;;5164   		bat[in]._Iintegr=0;
002f76  83a7              STRH     r7,[r4,#0x1c]
                  |L1.12152|
;;;5165   		}	
;;;5166   	} 
;;;5167   	    
;;;5168   //
;;;5169   if((bat[in]._Tb>TBATSIGN)&&(!bat[in]._nd))	
002f78  4966              LDR      r1,|L1.12564|
002f7a  f9b4000a          LDRSH    r0,[r4,#0xa]
002f7e  f9b11000          LDRSH    r1,[r1,#0]  ; TBATSIGN
002f82  4288              CMP      r0,r1
002f84  dd01              BLE      |L1.12170|
002f86  7b20              LDRB     r0,[r4,#0xc]
002f88  b3e8              CBZ      r0,|L1.12294|
                  |L1.12170|
;;;5170   	{
;;;5171   	bat[in]._sign_temper_cnt++;
;;;5172   	}
;;;5173   else 
;;;5174   	{
;;;5175   	bat[in]._sign_temper_cnt--;
002f8a  f8b40040          LDRH     r0,[r4,#0x40]
002f8e  f1a00001          SUB      r0,r0,#1
002f92  f8a40040          STRH     r0,[r4,#0x40]
                  |L1.12182|
;;;5176   	}
;;;5177   
;;;5178   gran(&bat[in]._sign_temper_cnt,0,600);
002f96  f44f7916          MOV      r9,#0x258
002f9a  f1040040          ADD      r0,r4,#0x40
002f9e  464a              MOV      r2,r9
002fa0  2100              MOVS     r1,#0
002fa2  f7fffffe          BL       gran
;;;5179   if(bat[in]._sign_temper_cnt>=590)	bat[in]._temper_stat|=(1<<0);
002fa6  f9b40040          LDRSH    r0,[r4,#0x40]
002faa  f240264e          MOV      r6,#0x24e
002fae  42b0              CMP      r0,r6
002fb0  db05              BLT      |L1.12222|
002fb2  f894103f          LDRB     r1,[r4,#0x3f]
002fb6  f0410101          ORR      r1,r1,#1
002fba  f884103f          STRB     r1,[r4,#0x3f]
                  |L1.12222|
;;;5180   if(bat[in]._sign_temper_cnt<=10)	bat[in]._temper_stat&=~(1<<0);
002fbe  280a              CMP      r0,#0xa
002fc0  dc05              BGT      |L1.12238|
002fc2  f894003f          LDRB     r0,[r4,#0x3f]
002fc6  f0200001          BIC      r0,r0,#1
002fca  f884003f          STRB     r0,[r4,#0x3f]
                  |L1.12238|
;;;5181   
;;;5182   
;;;5183   if((bat[in]._Tb>TBATMAX)&&(!bat[in]._nd))	
002fce  4952              LDR      r1,|L1.12568|
002fd0  f9b4000a          LDRSH    r0,[r4,#0xa]
002fd4  f9b11000          LDRSH    r1,[r1,#0]  ; TBATMAX
002fd8  4288              CMP      r0,r1
002fda  dd01              BLE      |L1.12256|
002fdc  7b20              LDRB     r0,[r4,#0xc]
002fde  b3a0              CBZ      r0,|L1.12362|
                  |L1.12256|
;;;5184   	{
;;;5185   	bat[in]._max_temper_cnt++;
;;;5186   	}
;;;5187   else 
;;;5188   	{
;;;5189   	bat[in]._max_temper_cnt--;
002fe0  f8b40042          LDRH     r0,[r4,#0x42]
002fe4  f1a00001          SUB      r0,r0,#1
002fe8  f8a40042          STRH     r0,[r4,#0x42]
                  |L1.12268|
;;;5190   	}
;;;5191   
;;;5192   gran(&bat[in]._max_temper_cnt,0,600);
002fec  f1040042          ADD      r0,r4,#0x42
002ff0  464a              MOV      r2,r9
002ff2  2100              MOVS     r1,#0
002ff4  f7fffffe          BL       gran
;;;5193   if(bat[in]._max_temper_cnt>=590)	bat[in]._temper_stat|=(1<<1);
002ff8  f9b40042          LDRSH    r0,[r4,#0x42]
002ffc  42b0              CMP      r0,r6
002ffe  db07              BLT      |L1.12304|
003000  f894103f          LDRB     r1,[r4,#0x3f]
003004  e000              B        |L1.12296|
                  |L1.12294|
003006  e021              B        |L1.12364|
                  |L1.12296|
003008  f0410102          ORR      r1,r1,#2
00300c  f884103f          STRB     r1,[r4,#0x3f]
                  |L1.12304|
;;;5194   if(bat[in]._max_temper_cnt<=10)	bat[in]._temper_stat&=~(1<<1);
003010  280a              CMP      r0,#0xa
003012  dc05              BGT      |L1.12320|
003014  f894003f          LDRB     r0,[r4,#0x3f]
003018  f0200002          BIC      r0,r0,#2
00301c  f884003f          STRB     r0,[r4,#0x3f]
                  |L1.12320|
;;;5195   
;;;5196   
;;;5197   
;;;5198   //  
;;;5199   if(bat[in]._resurs_cnt<36000)
003020  6c60              LDR      r0,[r4,#0x44]
003022  4540              CMP      r0,r8
003024  da20              BGE      |L1.12392|
;;;5200   	{               
;;;5201   	bat[in]._resurs_cnt++;
003026  f1000001          ADD      r0,r0,#1
00302a  6460              STR      r0,[r4,#0x44]
;;;5202   	if(bat[in]._resurs_cnt>=36000)
00302c  4540              CMP      r0,r8
00302e  db1c              BLT      |L1.12394|
;;;5203   		{
;;;5204   		bat[in]._resurs_cnt=0;
003030  6467              STR      r7,[r4,#0x44]
;;;5205   		lc640_write_int(ADR_EE_BAT_RESURS[in],lc640_read_int(ADR_EE_BAT_RESURS[in])+1);
003032  4e3a              LDR      r6,|L1.12572|
003034  f8360015          LDRH     r0,[r6,r5,LSL #1]
003038  f7fffffe          BL       lc640_read_int
00303c  1c40              ADDS     r0,r0,#1
00303e  b201              SXTH     r1,r0
003040  f9360015          LDRSH    r0,[r6,r5,LSL #1]
003044  f7fffffe          BL       lc640_write_int
003048  e00f              B        |L1.12394|
                  |L1.12362|
00304a  e006              B        |L1.12378|
                  |L1.12364|
00304c  f8b40040          LDRH     r0,[r4,#0x40]         ;5171
003050  f1000001          ADD      r0,r0,#1              ;5171
003054  f8a40040          STRH     r0,[r4,#0x40]         ;5171
003058  e79d              B        |L1.12182|
                  |L1.12378|
00305a  f8b40042          LDRH     r0,[r4,#0x42]         ;5185
00305e  f1000001          ADD      r0,r0,#1              ;5185
003062  f8a40042          STRH     r0,[r4,#0x42]         ;5185
003066  e7c1              B        |L1.12268|
                  |L1.12392|
;;;5206   		}
;;;5207   	}
;;;5208   else bat[in]._resurs_cnt=0;
003068  6467              STR      r7,[r4,#0x44]
                  |L1.12394|
;;;5209   
;;;5210   
;;;5211   #ifndef UKU_220_V2
;;;5212   #ifndef UKU_GLONASS
;;;5213   #ifndef UKU_6U
;;;5214   //#ifndef UKU_220
;;;5215   if(UBM_AV)
00306a  4e2d              LDR      r6,|L1.12576|
00306c  8830              LDRH     r0,[r6,#0]  ; UBM_AV
00306e  2800              CMP      r0,#0
003070  d07d              BEQ      |L1.12654|
;;;5216        {
;;;5217        signed short temp_SS;
;;;5218   #ifdef UKU_220
;;;5219   temp_SS=bat[in]._Ub/2;
;;;5220   #else
;;;5221        if(U0B<600)
003072  482c              LDR      r0,|L1.12580|
003074  f9b00000          LDRSH    r0,[r0,#0]  ; U0B
003078  4548              CMP      r0,r9
00307a  da08              BGE      |L1.12430|
;;;5222             {
;;;5223             temp_SS=bat[in]._Ub/4;
00307c  f9b40002          LDRSH    r0,[r4,#2]
003080  ea4f71e0          ASR      r1,r0,#31
003084  eb007091          ADD      r0,r0,r1,LSR #30
003088  ea4f00a0          ASR      r0,r0,#2
00308c  e006              B        |L1.12444|
                  |L1.12430|
;;;5224             }
;;;5225        else temp_SS=bat[in]._Ub/5;
00308e  f9b40002          LDRSH    r0,[r4,#2]
003092  f04f0105          MOV      r1,#5
003096  fb90f0f1          SDIV     r0,r0,r1
00309a  b200              SXTH     r0,r0
                  |L1.12444|
;;;5226   	
;;;5227   	temp_SS+=temp_SS;     
00309c  ea4f0040          LSL      r0,r0,#1
;;;5228   #endif
;;;5229        temp_SS-=(bat[in]._Ubm);
0030a0  88a1              LDRH     r1,[r4,#4]
0030a2  eba00001          SUB      r0,r0,r1
0030a6  b200              SXTH     r0,r0
;;;5230   
;;;5231        temp_SS=abs(temp_SS);
0030a8  f7fffffe          BL       abs
;;;5232   
;;;5233        temp_SS*=10;
0030ac  eb000080          ADD      r0,r0,r0,LSL #2
0030b0  ea4f0040          LSL      r0,r0,#1
0030b4  b200              SXTH     r0,r0
;;;5234   
;;;5235        temp_SS/=12;
0030b6  f04f010c          MOV      r1,#0xc
0030ba  fb90f0f1          SDIV     r0,r0,r1
0030be  b200              SXTH     r0,r0
;;;5236   
;;;5237        bat[in]._dUbm=temp_SS;
0030c0  80e0              STRH     r0,[r4,#6]
;;;5238   
;;;5239   
;;;5240        if(	(bat[in]._dUbm>UBM_AV) &&
0030c2  f9b61000          LDRSH    r1,[r6,#0]  ; UBM_AV
0030c6  4288              CMP      r0,r1
0030c8  dd56              BLE      |L1.12664|
;;;5241   		(abs(bat[in]._Ib)<(5*IKB)) &&
0030ca  f9b40008          LDRSH    r0,[r4,#8]
0030ce  f7fffffe          BL       abs
0030d2  4601              MOV      r1,r0
0030d4  4806              LDR      r0,|L1.12528|
0030d6  f9b00000          LDRSH    r0,[r0,#0]  ; IKB
0030da  eb000080          ADD      r0,r0,r0,LSL #2
0030de  4281              CMP      r1,r0
0030e0  da4a              BGE      |L1.12664|
;;;5242   		(bat[in]._Ub>((short)(((long)USIGN*115)/100))) &&
0030e2  4811              LDR      r0,|L1.12584|
0030e4  2173              MOVS     r1,#0x73
0030e6  f9b00000          LDRSH    r0,[r0,#0]  ; USIGN
0030ea  4348              MULS     r0,r1,r0
0030ec  e01e              B        |L1.12588|
0030ee  0000              DCW      0x0000
                  |L1.12528|
                          DCD      IKB
                  |L1.12532|
                          DCD      bat_u_old_cnt
                  |L1.12536|
                          DCD      0x40024020
                  |L1.12540|
                          DCD      ADR_EE_BAT_ZAR_CNT
                  |L1.12544|
                          DCD      BAT_C_REAL
                  |L1.12548|
                          DCD      BAT_C_NOM
                  |L1.12552|
                          DCD      0xffff7360
                  |L1.12556|
                          DCD      BAT_TYPE
                  |L1.12560|
                          DCD      lakb
                  |L1.12564|
                          DCD      TBATSIGN
                  |L1.12568|
                          DCD      TBATMAX
                  |L1.12572|
                          DCD      ADR_EE_BAT_RESURS
                  |L1.12576|
                          DCD      UBM_AV
                  |L1.12580|
                          DCD      U0B
                  |L1.12584|
                          DCD      USIGN
                  |L1.12588|
00312c  fb90f0fb          SDIV     r0,r0,r11
003130  f9b41002          LDRSH    r1,[r4,#2]
003134  b200              SXTH     r0,r0
003136  4288              CMP      r0,r1
003138  da1e              BGE      |L1.12664|
;;;5243   		(!(bat[in]._av & 2))  )
00313a  f894003d          LDRB     r0,[r4,#0x3d]
00313e  0780              LSLS     r0,r0,#30
003140  d41a              BMI      |L1.12664|
;;;5244   		{
;;;5245   		bat[in]._cnt_as++;
003142  f8b40048          LDRH     r0,[r4,#0x48]
003146  f1000001          ADD      r0,r0,#1
00314a  b200              SXTH     r0,r0
00314c  f8a40048          STRH     r0,[r4,#0x48]
;;;5246   		if(bat[in]._cnt_as==3000)
003150  f5a06130          SUB      r1,r0,#0xb00
003154  39b8              SUBS     r1,r1,#0xb8
003156  d103              BNE      |L1.12640|
;;;5247   			{
;;;5248   			avar_bat_as_hndl(in,1);
003158  2101              MOVS     r1,#1
00315a  4628              MOV      r0,r5
00315c  f7fffffe          BL       avar_bat_as_hndl
                  |L1.12640|
;;;5249   			}
;;;5250   		if(bat[in]._cnt_as>=3005) bat[in]._cnt_as=3005;
003160  f9b41048          LDRSH    r1,[r4,#0x48]
003164  f64030bd          MOV      r0,#0xbbd
003168  4281              CMP      r1,r0
00316a  db03              BLT      |L1.12660|
00316c  e000              B        |L1.12656|
                  |L1.12654|
00316e  e001              B        |L1.12660|
                  |L1.12656|
003170  f8a40048          STRH     r0,[r4,#0x48]
                  |L1.12660|
;;;5251   		}
;;;5252   	else 
;;;5253   		{
;;;5254   		bat[in]._cnt_as=0;
;;;5255   		}
;;;5256        
;;;5257        }
;;;5258   #endif 
;;;5259   #endif 
;;;5260   #endif
;;;5261   
;;;5262   }
003174  e8bd9ffc          POP      {r2-r12,pc}
                  |L1.12664|
003178  f8a47048          STRH     r7,[r4,#0x48]         ;5254
00317c  e7fa              B        |L1.12660|
;;;5263   
                          ENDP

                  u_necc_hndl PROC
;;;5270   //-----------------------------------------------
;;;5271   void u_necc_hndl(void)
00317e  b538              PUSH     {r3-r5,lr}
;;;5272   {
;;;5273   signed long temp_L;
;;;5274   signed long temp_SL;
;;;5275   //signed short temp_SS;
;;;5276   signed short t[2];
;;;5277   //char i;
;;;5278   
;;;5279   //temp_SS=0;
;;;5280   
;;;5281   #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;5282   
;;;5283   if(!TERMOKOMPENS)
003180  48fb              LDR      r0,|L1.13680|
;;;5284   	{
;;;5285   	//u_necc=U0B;
;;;5286   	u_necc=UB20;
003182  4cfd              LDR      r4,|L1.13688|
003184  8801              LDRH     r1,[r0,#0]            ;5283  ; TERMOKOMPENS
003186  48fb              LDR      r0,|L1.13684|
003188  f9b02000          LDRSH    r2,[r0,#0]
00318c  b139              CBZ      r1,|L1.12702|
;;;5287   	}
;;;5288   else
;;;5289   	{
;;;5290   	if(ND_EXT[0])t[0]=20;
00318e  48fb              LDR      r0,|L1.13692|
003190  6800              LDR      r0,[r0,#0]  ; ND_EXT
003192  b130              CBZ      r0,|L1.12706|
003194  f04f0014          MOV      r0,#0x14
003198  f8ad0000          STRH     r0,[sp,#0]
00319c  e005              B        |L1.12714|
                  |L1.12702|
00319e  8022              STRH     r2,[r4,#0]            ;5286
0031a0  e027              B        |L1.12786|
                  |L1.12706|
;;;5291   	else t[0]=t_ext[0];
0031a2  48f7              LDR      r0,|L1.13696|
0031a4  8800              LDRH     r0,[r0,#0]  ; t_ext
0031a6  f8ad0000          STRH     r0,[sp,#0]
                  |L1.12714|
;;;5292   
;;;5293   	mat_temper=t[0];
0031aa  4bf6              LDR      r3,|L1.13700|
0031ac  f9bd1000          LDRSH    r1,[sp,#0]
0031b0  6019              STR      r1,[r3,#0]  ; mat_temper
;;;5294   			
;;;5295   	if(mat_temper<0)temp_SL=UB0; 
0031b2  48f5              LDR      r0,|L1.13704|
0031b4  2900              CMP      r1,#0
0031b6  f9b00000          LDRSH    r0,[r0,#0]
0031ba  db12              BLT      |L1.12770|
;;;5296   	else 
;;;5297   		{
;;;5298   		if(mat_temper>40)mat_temper=40; 
0031bc  2928              CMP      r1,#0x28
0031be  dd02              BLE      |L1.12742|
0031c0  f04f0128          MOV      r1,#0x28
0031c4  6019              STR      r1,[r3,#0]  ; mat_temper
                  |L1.12742|
;;;5299   		temp_SL=(UB20-UB0)*10;
0031c6  eba20100          SUB      r1,r2,r0
0031ca  eb010181          ADD      r1,r1,r1,LSL #2
0031ce  ea4f0141          LSL      r1,r1,#1
;;;5300   		temp_SL*=mat_temper;
0031d2  681a              LDR      r2,[r3,#0]  ; mat_temper
0031d4  fb01f102          MUL      r1,r1,r2
;;;5301   		temp_SL/=200;
0031d8  f04f02c8          MOV      r2,#0xc8
0031dc  fb91f1f2          SDIV     r1,r1,r2
;;;5302   		temp_SL+=UB0;
0031e0  4408              ADD      r0,r0,r1
                  |L1.12770|
;;;5303   		}
;;;5304   	if(spc_stat==spcVZ)
0031e2  49ea              LDR      r1,|L1.13708|
0031e4  7cc9              LDRB     r1,[r1,#0x13]  ; spc_stat
0031e6  2902              CMP      r1,#2
0031e8  d102              BNE      |L1.12784|
;;;5305   		{
;;;5306   		temp_SL=UVZ;
0031ea  48e9              LDR      r0,|L1.13712|
0031ec  f9b00000          LDRSH    r0,[r0,#0]  ; UVZ
                  |L1.12784|
;;;5307   		}
;;;5308   	u_necc=(unsigned int)temp_SL;
0031f0  8020              STRH     r0,[r4,#0]
                  |L1.12786|
;;;5309   	///u_necc=3456;
;;;5310   	}  
;;;5311   
;;;5312   //u_necc=2355;
;;;5313   
;;;5314   if(speedChIsOn)
0031f2  48e8              LDR      r0,|L1.13716|
0031f4  8800              LDRH     r0,[r0,#0]  ; speedChIsOn
0031f6  b110              CBZ      r0,|L1.12798|
;;;5315   	{
;;;5316   	u_necc=speedChrgVolt;
0031f8  48e7              LDR      r0,|L1.13720|
0031fa  8800              LDRH     r0,[r0,#0]  ; speedChrgVolt
0031fc  8020              STRH     r0,[r4,#0]
                  |L1.12798|
;;;5317   	}
;;;5318   
;;;5319   if(mess_find_unvol(MESS2UNECC_HNDL))
0031fe  20be              MOVS     r0,#0xbe
003200  f7fffffe          BL       mess_find_unvol
003204  b128              CBZ      r0,|L1.12818|
;;;5320   	{		
;;;5321   	if(mess_data[0]==PARAM_UNECC_SET)
003206  48e5              LDR      r0,|L1.13724|
003208  6801              LDR      r1,[r0,#0]  ; mess_data
00320a  29bf              CMP      r1,#0xbf
00320c  d101              BNE      |L1.12818|
;;;5322   		{
;;;5323   		u_necc=mess_data[1];
00320e  6840              LDR      r0,[r0,#4]  ; mess_data
003210  8020              STRH     r0,[r4,#0]
                  |L1.12818|
;;;5324   		}		
;;;5325   	}
;;;5326   if(ICA_EN)u_necc+=ica_u_necc;
003212  48e3              LDR      r0,|L1.13728|
003214  8800              LDRH     r0,[r0,#0]  ; ICA_EN
003216  b120              CBZ      r0,|L1.12834|
003218  49e2              LDR      r1,|L1.13732|
00321a  8820              LDRH     r0,[r4,#0]  ; u_necc
00321c  8809              LDRH     r1,[r1,#0]  ; ica_u_necc
00321e  4408              ADD      r0,r0,r1
003220  8020              STRH     r0,[r4,#0]
                  |L1.12834|
;;;5327   #endif
;;;5328   
;;;5329   
;;;5330   #ifndef UKU_220_IPS_TERMOKOMPENSAT
;;;5331   
;;;5332   #ifndef UKU_TELECORE2015
;;;5333   if(unh_cnt0<10)
;;;5334   	{
;;;5335   	unh_cnt0++;
;;;5336   	if(unh_cnt0>=10)
;;;5337   		{
;;;5338   		unh_cnt0=0;
;;;5339   		b1Hz_unh=1;
;;;5340   		}
;;;5341   	}
;;;5342   
;;;5343   if(unh_cnt1<5)
;;;5344   	{
;;;5345   	unh_cnt1++;
;;;5346   	if(unh_cnt1==5)
;;;5347   		{
;;;5348   		unh_cnt1=0;
;;;5349   //		b2Hz_unh=1;
;;;5350   		}
;;;5351   	} 
;;;5352   
;;;5353   
;;;5354   
;;;5355   if(mess_find_unvol(MESS2UNECC_HNDL))
;;;5356   	{		
;;;5357   	if(mess_data[0]==PARAM_UNECC_SET)
;;;5358   		{
;;;5359   		u_necc=mess_data[1];
;;;5360   		}		
;;;5361   	}
;;;5362   
;;;5363   
;;;5364   else if(b1Hz_unh)
;;;5365   	{
;;;5366   	
;;;5367   	if((BAT_IS_ON[0]!=bisON) && (BAT_IS_ON[1]!=bisON))
;;;5368   		{
;;;5369   		
;;;5370   		u_necc=U0B;
;;;5371   		}
;;;5372   	else 
;;;5373   		{
;;;5374   		if(BAT_TYPE==0) //  
;;;5375   			{
;;;5376   			for(i=0;i<2;i++)
;;;5377   				{
;;;5378   				if(BAT_IS_ON[i]==bisON)
;;;5379   					{
;;;5380   					if(bat[i]._nd)t[i]=20;
;;;5381   					else t[i]=bat[i]._Tb;
;;;5382   					}
;;;5383   				else
;;;5384   					{
;;;5385   					t[i]=-20;
;;;5386   					}
;;;5387   				}
;;;5388   			if(t[0]>t[1])mat_temper=t[0];
;;;5389   			else mat_temper=t[1];
;;;5390   			
;;;5391   		
;;;5392   			if(mat_temper<0)temp_SL=UB0; 
;;;5393   			else 
;;;5394   				{
;;;5395   				if(mat_temper>40)mat_temper=40; 
;;;5396   				temp_SL=(UB20-UB0)*10;
;;;5397   				temp_SL*=mat_temper;
;;;5398   				temp_SL/=200;
;;;5399   				temp_SL+=UB0;
;;;5400   				}
;;;5401   			if(spc_stat==spcVZ)
;;;5402   				{
;;;5403   				temp_SL=UVZ;
;;;5404   				}
;;;5405   			u_necc=(unsigned int)temp_SL;
;;;5406   			}
;;;5407   		else if(BAT_TYPE==1) //  
;;;5408   			{
;;;5409   			u_necc=U0B;
;;;5410   					
;;;5411   			u_necc=bat[0]._Ub+10;
;;;5412   
;;;5413   			
;;;5414   			if(spc_stat==spcVZ)
;;;5415   				{
;;;5416   				u_necc=UVZ;
;;;5417   				}
;;;5418   			if(u_necc>=UB0) u_necc=UB0;
;;;5419   			if(u_necc>=UB20) u_necc=UB20;
;;;5420   			}
;;;5421   		}  
;;;5422   	}
;;;5423   #endif
;;;5424   #ifdef UKU_TELECORE2015
;;;5425   
;;;5426   if(unh_cnt0<10)
;;;5427   	{
;;;5428   	unh_cnt0++;
;;;5429   	if(unh_cnt0>=10)
;;;5430   		{
;;;5431   		unh_cnt0=0;
;;;5432   		b1Hz_unh=1;
;;;5433   		}
;;;5434   	}
;;;5435   
;;;5436   if(unh_cnt1<5)
;;;5437   	{
;;;5438   	unh_cnt1++;
;;;5439   	if(unh_cnt1==5)
;;;5440   		{
;;;5441   		unh_cnt1=0;
;;;5442   //		b2Hz_unh=1;
;;;5443   		}
;;;5444   	} 
;;;5445   
;;;5446   
;;;5447   
;;;5448   if(mess_find_unvol(MESS2UNECC_HNDL))
;;;5449   	{		
;;;5450   	if(mess_data[0]==PARAM_UNECC_SET)
;;;5451   		{
;;;5452   		u_necc=mess_data[1];
;;;5453   		}		
;;;5454   	}
;;;5455   
;;;5456   
;;;5457   else if(b1Hz_unh)
;;;5458   	{
;;;5459   	b1Hz_unh=0;
;;;5460   
;;;5461   	if(BAT_TYPE==0)
;;;5462   		{
;;;5463   		if(bat[0]._nd)mat_temper=20;
;;;5464   		else mat_temper=bat[0]._Tb;
;;;5465   
;;;5466   			
;;;5467   		if(mat_temper<0)temp_SL=UB0; 
;;;5468   		else 
;;;5469   			{
;;;5470   			if(mat_temper>40)mat_temper=40; 
;;;5471   			temp_SL=(UB20-UB0)*10;
;;;5472   			temp_SL*=mat_temper;
;;;5473   			temp_SL/=200;
;;;5474   			temp_SL+=UB0;
;;;5475   			}
;;;5476   		if(spc_stat==spcVZ)
;;;5477   			{
;;;5478   			temp_SL=UVZ;
;;;5479   			}
;;;5480   		u_necc=(unsigned int)temp_SL;
;;;5481   	///u_necc=3456;
;;;5482   		}
;;;5483   	else if(BAT_TYPE==1)
;;;5484   		{
;;;5485   		
;;;5486   		gran(&DU_LI_BAT,1,30);
;;;5487   		u_necc=li_bat._Ub+DU_LI_BAT;
;;;5488   		gran(&u_necc,0,UB0);
;;;5489   		gran(&u_necc,0,UB20);
;;;5490   		gran(&u_necc,0,540);		
;;;5491   
;;;5492   
;;;5493   		if(li_bat._batStat!=bsOK)
;;;5494   			{
;;;5495   			u_necc=U0B;
;;;5496   			}
;;;5497   		if(spc_stat==spcVZ)
;;;5498   			{
;;;5499   			u_necc=UVZ;
;;;5500   			}
;;;5501   		/* 
;;;5502   		u_necc=U0B;
;;;5503   		
;;;5504   
;;;5505   	
;;;5506   		u_necc=UB0;
;;;5507   		u_necc=li_bat._Ub+10;
;;;5508   		if((li_bat._Ub<450)||(li_bat._Ub>550))
;;;5509   			{
;;;5510   			lakb_error_cnt++;
;;;5511   			if(lakb_error_cnt>=30)
;;;5512   				{
;;;5513   				lakb_error_cnt=30;
;;;5514   				u_necc=U0B;
;;;5515   				}
;;;5516   			}
;;;5517   		else lakb_error_cnt=0;*/
;;;5518   		}
;;;5519   	else if(BAT_TYPE==2)
;;;5520   		{
;;;5521   		u_necc=U0B;
;;;5522   		
;;;5523   		if(spc_stat==spcVZ)
;;;5524   			{
;;;5525   			u_necc=UVZ;
;;;5526   			}
;;;5527   	
;;;5528   		u_necc=UB0;
;;;5529   		}
;;;5530   
;;;5531   	else if(BAT_TYPE==3)
;;;5532   		{
;;;5533   		u_necc=U0B;
;;;5534   		
;;;5535   		if(spc_stat==spcVZ)
;;;5536   			{
;;;5537   			u_necc=UVZ;
;;;5538   			}
;;;5539   
;;;5540   		gran(&DU_LI_BAT,1,30);
;;;5541   
;;;5542   
;;;5543   		if(lakbNotErrorNum==0)
;;;5544   			{
;;;5545   			u_necc=U0B;
;;;5546   			}
;;;5547   		else 
;;;5548   			{
;;;5549   			signed short i;
;;;5550   			//signed short u_necc_max;
;;;5551   			//u_necc_max=0;
;;;5552   			char soc_flag=0;
;;;5553   
;;;5554   			for(i=(NUMBAT_TELECORE-1);i>=0;i--)
;;;5555   				{
;;;5556   				if(lakb[i]._communicationFullErrorStat==0)u_necc=lakb[i]._tot_bat_volt+DU_LI_BAT;
;;;5557   				if(lakb[i]._s_o_c_percent<QSODERG_LI_BAT)soc_flag=1;
;;;5558   				}
;;;5559   
;;;5560   			if(soc_flag==0)u_necc=USODERG_LI_BAT;
;;;5561   			}
;;;5562   		gran(&u_necc,0,UB0);
;;;5563   		//gran(&u_necc,0,UB20);
;;;5564   		gran(&u_necc,0,540);
;;;5565   		}
;;;5566   	}
;;;5567   
;;;5568   #endif 
;;;5569   
;;;5570   //u_necc=2356;
;;;5571   #endif//gran(&u_necc,400,UMAX);
;;;5572   
;;;5573   temp_L=(signed long) u_necc;
003222  f9b40000          LDRSH    r0,[r4,#0]  ; u_necc
;;;5574   temp_L*=98L;
003226  f04f0162          MOV      r1,#0x62
00322a  fb00f101          MUL      r1,r0,r1
;;;5575   temp_L/=100L;
00322e  f04f0264          MOV      r2,#0x64
003232  fb91f1f2          SDIV     r1,r1,r2
;;;5576   u_necc_dn=(signed short)temp_L;
003236  4bdc              LDR      r3,|L1.13736|
003238  8019              STRH     r1,[r3,#0]
;;;5577   
;;;5578   temp_L=(signed long) u_necc;
;;;5579   temp_L*=102L;
00323a  f04f0166          MOV      r1,#0x66
00323e  fb00f001          MUL      r0,r0,r1
;;;5580   temp_L/=100L;
003242  fb90f0f2          SDIV     r0,r0,r2
;;;5581   u_necc_up=(signed short)temp_L;
003246  49d9              LDR      r1,|L1.13740|
003248  8008              STRH     r0,[r1,#0]
;;;5582   
;;;5583   
;;;5584   }
00324a  bd38              POP      {r3-r5,pc}
;;;5585   
                          ENDP

                  num_necc_hndl PROC
;;;5587   //-----------------------------------------------
;;;5588   void num_necc_hndl(void)
00324c  e92d41f0          PUSH     {r4-r8,lr}
;;;5589   {
;;;5590   
;;;5591   static short num_necc_block_cnt;
;;;5592   if(num_necc_block_cnt) num_necc_block_cnt--;
003250  4cce              LDR      r4,|L1.13708|
003252  f9b40026          LDRSH    r0,[r4,#0x26]  ; num_necc_block_cnt
003256  b110              CBZ      r0,|L1.12894|
003258  f1a00001          SUB      r0,r0,#1
00325c  84e0              STRH     r0,[r4,#0x26]
                  |L1.12894|
;;;5593   
;;;5594   Isumm_=Isumm;
00325e  48d4              LDR      r0,|L1.13744|
003260  4dd4              LDR      r5,|L1.13748|
003262  8800              LDRH     r0,[r0,#0]  ; Isumm
003264  8028              STRH     r0,[r5,#0]
;;;5595   
;;;5596   if(bat[0]._Ib<0) Isumm_+=(abs(bat[0]._Ib))/10;
003266  4fd4              LDR      r7,|L1.13752|
003268  260a              MOVS     r6,#0xa
00326a  f9b70008          LDRSH    r0,[r7,#8]  ; bat
00326e  2800              CMP      r0,#0
003270  da06              BGE      |L1.12928|
003272  f7fffffe          BL       abs
003276  fb90f0f6          SDIV     r0,r0,r6
00327a  8829              LDRH     r1,[r5,#0]  ; Isumm_
00327c  4408              ADD      r0,r0,r1
00327e  8028              STRH     r0,[r5,#0]
                  |L1.12928|
;;;5597   if(bat[1]._Ib<0) Isumm_+=(abs(bat[1]._Ib))/10;
003280  f9b70054          LDRSH    r0,[r7,#0x54]  ; bat
003284  2800              CMP      r0,#0
003286  da06              BGE      |L1.12950|
003288  f7fffffe          BL       abs
00328c  fb90f0f6          SDIV     r0,r0,r6
003290  8829              LDRH     r1,[r5,#0]  ; Isumm_
003292  4408              ADD      r0,r0,r1
003294  8028              STRH     r0,[r5,#0]
                  |L1.12950|
;;;5598   
;;;5599   num_necc_up=(Isumm_/((signed short)IMAX))+1;
003296  48c9              LDR      r0,|L1.13756|
003298  f9b51000          LDRSH    r1,[r5,#0]  ; Isumm_
00329c  f9b00000          LDRSH    r0,[r0,#0]  ; IMAX
0032a0  fb91f0f0          SDIV     r0,r1,r0
0032a4  f1000001          ADD      r0,r0,#1
0032a8  b2c0              UXTB     r0,r0
0032aa  73e0              STRB     r0,[r4,#0xf]
;;;5600   ////Isumm_+=(signed short)((IMAX*(10-KIMAX))/10);
;;;5601   ////Isumm_+=(signed short)(IMAX-IMIN);
;;;5602   
;;;5603   num_necc_down=(Isumm_/((signed short)IMIN))+1;
0032ac  4ac4              LDR      r2,|L1.13760|
0032ae  f9b22000          LDRSH    r2,[r2,#0]  ; IMIN
0032b2  fb91f1f2          SDIV     r1,r1,r2
0032b6  f1010101          ADD      r1,r1,#1
0032ba  b2c9              UXTB     r1,r1
0032bc  7421              STRB     r1,[r4,#0x10]
;;;5604   
;;;5605   if(num_necc_up>num_necc)
0032be  4bc1              LDR      r3,|L1.13764|
;;;5606   	{
;;;5607   	num_necc=num_necc_up;
;;;5608   	num_necc_block_cnt=60;
0032c0  f04f053c          MOV      r5,#0x3c
0032c4  f9b32000          LDRSH    r2,[r3,#0]            ;5605  ; num_necc
0032c8  4290              CMP      r0,r2                 ;5605
0032ca  dd02              BLE      |L1.13010|
0032cc  8018              STRH     r0,[r3,#0]            ;5607
0032ce  84e5              STRH     r5,[r4,#0x26]
0032d0  e005              B        |L1.13022|
                  |L1.13010|
;;;5609   	}
;;;5610   else if(num_necc_down<num_necc)
0032d2  4291              CMP      r1,r2
0032d4  da03              BGE      |L1.13022|
;;;5611   	{
;;;5612   	if(!num_necc_block_cnt)
0032d6  8ce0              LDRH     r0,[r4,#0x26]  ; num_necc_block_cnt
0032d8  b908              CBNZ     r0,|L1.13022|
;;;5613   		{
;;;5614   		num_necc=num_necc_down;
0032da  8019              STRH     r1,[r3,#0]
;;;5615   		num_necc_block_cnt=60;
0032dc  84e5              STRH     r5,[r4,#0x26]
                  |L1.13022|
;;;5616   		}
;;;5617   	}
;;;5618   
;;;5619   if(PAR) num_necc=NUMIST;
0032de  48ba              LDR      r0,|L1.13768|
0032e0  8801              LDRH     r1,[r0,#0]  ; PAR
0032e2  48ba              LDR      r0,|L1.13772|
0032e4  b109              CBZ      r1,|L1.13034|
0032e6  8801              LDRH     r1,[r0,#0]  ; NUMIST
0032e8  8019              STRH     r1,[r3,#0]
                  |L1.13034|
;;;5620   
;;;5621   gran(&num_necc,1,NUMIST);
0032ea  f9b02000          LDRSH    r2,[r0,#0]  ; NUMIST
0032ee  e8bd41f0          POP      {r4-r8,lr}
0032f2  2101              MOVS     r1,#1
0032f4  48b3              LDR      r0,|L1.13764|
0032f6  f7ffbffe          B.W      gran
;;;5622   
;;;5623   }
;;;5624   
                          ENDP

                  cntrl_hndl PROC
;;;5627   //-----------------------------------------------
;;;5628   void cntrl_hndl(void)
0032fa  e92d5ff0          PUSH     {r4-r12,lr}
;;;5629   {
;;;5630   
;;;5631   IZMAX_=IZMAX;
0032fe  48b4              LDR      r0,|L1.13776|
003300  4ca2              LDR      r4,|L1.13708|
003302  f9b01000          LDRSH    r1,[r0,#0]  ; IZMAX
003306  8761              STRH     r1,[r4,#0x3a]
;;;5632   
;;;5633   if(speedChIsOn)IZMAX_=speedChrgCurr;
003308  48a2              LDR      r0,|L1.13716|
00330a  8800              LDRH     r0,[r0,#0]  ; speedChIsOn
00330c  b110              CBZ      r0,|L1.13076|
00330e  48b1              LDR      r0,|L1.13780|
003310  8800              LDRH     r0,[r0,#0]  ; speedChrgCurr
003312  8760              STRH     r0,[r4,#0x3a]
                  |L1.13076|
;;;5634   
;;;5635   if(cntrl_stat_blok_cnt)cntrl_stat_blok_cnt--;
003314  f9b4005e          LDRSH    r0,[r4,#0x5e]  ; cntrl_stat_blok_cnt
003318  b118              CBZ      r0,|L1.13090|
00331a  f1a00001          SUB      r0,r0,#1
00331e  f8a4005e          STRH     r0,[r4,#0x5e]
                  |L1.13090|
;;;5636   if(cntrl_stat_blok_cnt_)cntrl_stat_blok_cnt_--;
003322  f9b40060          LDRSH    r0,[r4,#0x60]  ; cntrl_stat_blok_cnt_
003326  b118              CBZ      r0,|L1.13104|
003328  f1a00001          SUB      r0,r0,#1
00332c  f8a40060          STRH     r0,[r4,#0x60]
                  |L1.13104|
;;;5637   
;;;5638   if((bat[0]._temper_stat&0x03)||(bat[1]._temper_stat&0x03))IZMAX_=IZMAX/10;
003330  48a1              LDR      r0,|L1.13752|
003332  f04f050a          MOV      r5,#0xa
003336  f890203f          LDRB     r2,[r0,#0x3f]  ; bat
00333a  0792              LSLS     r2,r2,#30
00333c  d103              BNE      |L1.13126|
00333e  f890008b          LDRB     r0,[r0,#0x8b]  ; bat
003342  0780              LSLS     r0,r0,#30
003344  d002              BEQ      |L1.13132|
                  |L1.13126|
003346  fb91f0f5          SDIV     r0,r1,r5
00334a  8760              STRH     r0,[r4,#0x3a]
                  |L1.13132|
;;;5639   
;;;5640   
;;;5641   if(ch_cnt0<10)
00334c  79a0              LDRB     r0,[r4,#6]  ; ch_cnt0
00334e  2600              MOVS     r6,#0                 ;5633
;;;5642   	{
;;;5643   	ch_cnt0++;
;;;5644   	if(ch_cnt0>=10)
;;;5645   		{
;;;5646   		ch_cnt0=0;
;;;5647   		b1Hz_ch=1;
003350  2701              MOVS     r7,#1
003352  280a              CMP      r0,#0xa               ;5641
003354  d207              BCS      |L1.13158|
003356  f1000001          ADD      r0,r0,#1              ;5643
00335a  b2c0              UXTB     r0,r0                 ;5643
00335c  71a0              STRB     r0,[r4,#6]            ;5643
00335e  280a              CMP      r0,#0xa               ;5644
003360  d301              BCC      |L1.13158|
003362  71a6              STRB     r6,[r4,#6]            ;5646
003364  71e7              STRB     r7,[r4,#7]
                  |L1.13158|
;;;5648   		}
;;;5649   	}
;;;5650   
;;;5651   
;;;5652   
;;;5653   
;;;5654   if(mess_find_unvol(MESS2CNTRL_HNDL))
003366  20e1              MOVS     r0,#0xe1
003368  f7fffffe          BL       mess_find_unvol
;;;5655   	{
;;;5656   	if(mess_data[0]==PARAM_CNTRL_STAT_PLUS)
;;;5657   		{
;;;5658   		cntrl_stat=cntrl_stat_old+mess_data[1];
;;;5659   		}
;;;5660   	else if(mess_data[0]==PARAM_CNTRL_STAT_MINUS)
;;;5661   		{
;;;5662   		cntrl_stat=cntrl_stat_old-mess_data[1];
;;;5663   		}
;;;5664   	else if(mess_data[0]==PARAM_CNTRL_STAT_STEP_DOWN)
;;;5665   		{
;;;5666   		cntrl_stat--;
;;;5667   
;;;5668   		if((cntrl_stat<=30)||(load_U<USIGN)) mess_send(MESS2KB_HNDL,PARAM_CNTRL_IS_DOWN,0,10);
;;;5669   
;;;5670   		}
;;;5671   	else if(mess_data[0]==PARAM_CNTRL_STAT_SET)
;;;5672   		{
;;;5673   		cntrl_stat=mess_data[1];
;;;5674   		}
;;;5675   
;;;5676   	else if(mess_data[0]==PARAM_CNTRL_STAT_FAST_REG)
;;;5677   		{
;;;5678   		#ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;5679   		if(load_U>u_necc)
00336c  4b82              LDR      r3,|L1.13688|
;;;5680   			{
;;;5681   			if(((bps_U-u_necc)>40)&&(cntrl_stat>0))cntrl_stat-=5;
00336e  f8dfc268          LDR      r12,|L1.13784|
;;;5682   			else if((cntrl_stat)&&b1Hz_ch)cntrl_stat--;
;;;5683   			}
;;;5684   		else if(bps_U<u_necc)
;;;5685   			{	
;;;5686   			if(((u_necc-bps_U)>40)&&(cntrl_stat<1015))cntrl_stat+=5;
;;;5687   			else	if((cntrl_stat<1020)&&b1Hz_ch)cntrl_stat++;
;;;5688   			}
;;;5689   		#elif defined(UKU_220)
;;;5690   		if(load_U>u_necc)
;;;5691   			{
;;;5692   			if(((load_U-u_necc)>40)&&(cntrl_stat>0))cntrl_stat-=5;
;;;5693   			else if((cntrl_stat)&&b1Hz_ch)cntrl_stat--;
;;;5694   			}
;;;5695   		else if(load_U<u_necc)
;;;5696   			{	
;;;5697   			if(((u_necc-load_U)>40)&&(cntrl_stat<1015))cntrl_stat+=5;
;;;5698   			else	if((cntrl_stat<1020)&&b1Hz_ch)cntrl_stat++;
;;;5699   			}
;;;5700   		#elif defined(UKU_220_V2)
;;;5701   		if(load_U>u_necc)
;;;5702   			{
;;;5703   			if(((load_U-u_necc)>40)&&(cntrl_stat>0))cntrl_stat-=5;
;;;5704   			else if((cntrl_stat)&&b1Hz_ch)cntrl_stat--;
;;;5705   			}
;;;5706   		else if(load_U<u_necc)
;;;5707   			{	
;;;5708   			if(((u_necc-load_U)>40)&&(cntrl_stat<1015))cntrl_stat+=5;
;;;5709   			else	if((cntrl_stat<1020)&&b1Hz_ch)cntrl_stat++;
;;;5710   			}
;;;5711   		#else
;;;5712   
;;;5713   		if(load_U>u_necc)
;;;5714   			{
;;;5715   			if(((load_U-u_necc)>10)&&(cntrl_stat>0))cntrl_stat-=5;
;;;5716   			else if((cntrl_stat)&&b1Hz_ch)cntrl_stat--;
;;;5717   			}
;;;5718   		else if(load_U<u_necc)
;;;5719   			{	
;;;5720   			if(((u_necc-load_U)>10)&&(cntrl_stat<1015))cntrl_stat+=5;
;;;5721   			else	if((cntrl_stat<1020)&&b1Hz_ch)cntrl_stat++;
;;;5722   			}
;;;5723   		#endif	
;;;5724   	 	}
;;;5725   	}
;;;5726   
;;;5727   #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;5728   else if((b1Hz_ch)&&((!bIBAT_SMKLBR)||(bps[8]._cnt>40)))
003372  f8df8268          LDR      r8,|L1.13788|
;;;5729   	{
;;;5730   	cntrl_stat_new=cntrl_stat_old;
;;;5731   	
;;;5732   	if((Ibmax/10)>(2*IZMAX_))
;;;5733   		{
;;;5734             if(cntrl_stat_blok_cnt)cntrl_stat_new--;
;;;5735   		else	cntrl_stat_new-=10;
;;;5736   		}		
;;;5737   	else if(((Ibmax/10)<(IZMAX_*2))&&(Ibmax>(IZMAX_*15)))
;;;5738   		{
;;;5739             if(cntrl_stat_blok_cnt)cntrl_stat_new--;
;;;5740             else	cntrl_stat_new-=3;
;;;5741   		}   
;;;5742   	else if((Ibmax<(IZMAX_*15))&&((Ibmax/10)>IZMAX_))
;;;5743   		{
;;;5744   		cntrl_stat_new--;
;;;5745   		}
;;;5746   		
;;;5747   	else if(bps_U<u_necc)
;;;5748   		{
;;;5749   		if(bps_U<(u_necc-(UB0-UB20)))
;;;5750   			{
;;;5751   			if(Ibmax<0)
;;;5752   				{
;;;5753                       if(cntrl_stat_blok_cnt)cntrl_stat_new++;
;;;5754   				else cntrl_stat_new+=10;
;;;5755   				}
;;;5756   			else if(Ibmax<(IZMAX_*5))
;;;5757   				{
;;;5758                       if(cntrl_stat_blok_cnt)cntrl_stat_new++;
;;;5759   				else	cntrl_stat_new+=2;
;;;5760   				}
;;;5761   			else if(Ibmax<((IZMAX_*95)/10))
;;;5762   				{
;;;5763   				cntrl_stat_new++;
;;;5764   				}					
;;;5765   			}
;;;5766   		else if(bps_U<(u_necc-((UB0-UB20)/4)))
;;;5767   			{
;;;5768   			if(Ibmax<(IZMAX_*5))
;;;5769   				{
;;;5770                       if(cntrl_stat_blok_cnt)cntrl_stat_new++;
;;;5771   				else	cntrl_stat_new+=2;
;;;5772   				}
;;;5773   			else if(Ibmax<((IZMAX_*95)/10))
;;;5774   				{
;;;5775   				cntrl_stat_new++;
;;;5776   				}					
;;;5777   			}	
;;;5778   		else if(bps_U<(u_necc-1))
;;;5779   			{
;;;5780   			if(Ibmax<((IZMAX_*95)/10))
;;;5781   				{
;;;5782   				cntrl_stat_new++;
;;;5783   				}					
;;;5784   			}					
;;;5785   		}	
;;;5786   	else if((bps_U>u_necc)/*&&(!cntrl_blok)*/)
;;;5787   		{
;;;5788   		if(bps_U>(u_necc+(UB0-UB20)))
;;;5789   			{
;;;5790                  if(cntrl_stat_blok_cnt)cntrl_stat_new--;
;;;5791   			else	cntrl_stat_new-=10;
;;;5792   			}
;;;5793   		else if(bps_U>(u_necc+((UB0-UB20)/4)))
;;;5794   			{
;;;5795                  if(cntrl_stat_blok_cnt)cntrl_stat_new--;
;;;5796   			else cntrl_stat_new-=2;
;;;5797   			}	
;;;5798   		else if(bps_U>(u_necc+1))
;;;5799   			{
;;;5800   			cntrl_stat_new--;
;;;5801   			}					
;;;5802   		}
;;;5803   
;;;5804   	gran(&cntrl_stat_new,10,1010);			
003376  f2403bf2          MOV      r11,#0x3f2
00337a  b380              CBZ      r0,|L1.13278|
00337c  4987              LDR      r1,|L1.13724|
00337e  6808              LDR      r0,[r1,#0]            ;5656  ; mess_data
003380  2864              CMP      r0,#0x64              ;5656
003382  d009              BEQ      |L1.13208|
003384  2869              CMP      r0,#0x69              ;5660
003386  d00c              BEQ      |L1.13218|
003388  4a95              LDR      r2,|L1.13792|
00338a  286e              CMP      r0,#0x6e              ;5664
00338c  d00f              BEQ      |L1.13230|
00338e  28e5              CMP      r0,#0xe5              ;5671
003390  d022              BEQ      |L1.13272|
003392  28e6              CMP      r0,#0xe6              ;5676
003394  d024              BEQ      |L1.13280|
                  |L1.13206|
003396  e17c              B        |L1.13970|
                  |L1.13208|
003398  6848              LDR      r0,[r1,#4]            ;5658  ; mess_data
00339a  8be1              LDRH     r1,[r4,#0x1e]         ;5658  ; cntrl_stat_old
00339c  4408              ADD      r0,r0,r1              ;5658
00339e  83a0              STRH     r0,[r4,#0x1c]         ;5658
0033a0  e177              B        |L1.13970|
                  |L1.13218|
0033a2  6849              LDR      r1,[r1,#4]            ;5662  ; mess_data
0033a4  8be0              LDRH     r0,[r4,#0x1e]         ;5662  ; cntrl_stat_old
0033a6  eba00001          SUB      r0,r0,r1              ;5662
0033aa  83a0              STRH     r0,[r4,#0x1c]         ;5662
0033ac  e171              B        |L1.13970|
                  |L1.13230|
0033ae  8ba0              LDRH     r0,[r4,#0x1c]         ;5666  ; cntrl_stat
0033b0  f1a00001          SUB      r0,r0,#1              ;5666
0033b4  b200              SXTH     r0,r0                 ;5666
0033b6  83a0              STRH     r0,[r4,#0x1c]         ;5666
0033b8  281e              CMP      r0,#0x1e              ;5668
0033ba  dd06              BLE      |L1.13258|
0033bc  4989              LDR      r1,|L1.13796|
0033be  f9b20000          LDRSH    r0,[r2,#0]            ;5668  ; load_U
0033c2  f9b11000          LDRSH    r1,[r1,#0]            ;5668  ; USIGN
0033c6  4288              CMP      r0,r1                 ;5668
0033c8  dae5              BGE      |L1.13206|
                  |L1.13258|
0033ca  230a              MOVS     r3,#0xa               ;5668
0033cc  2200              MOVS     r2,#0                 ;5668
0033ce  21e7              MOVS     r1,#0xe7              ;5668
0033d0  20e6              MOVS     r0,#0xe6              ;5668
0033d2  f7fffffe          BL       mess_send
0033d6  e15c              B        |L1.13970|
                  |L1.13272|
0033d8  6848              LDR      r0,[r1,#4]            ;5673  ; mess_data
0033da  83a0              STRH     r0,[r4,#0x1c]         ;5673
0033dc  e159              B        |L1.13970|
                  |L1.13278|
0033de  e03a              B        |L1.13398|
                  |L1.13280|
0033e0  f9b21000          LDRSH    r1,[r2,#0]            ;5679  ; load_U
0033e4  f9b30000          LDRSH    r0,[r3,#0]            ;5679  ; u_necc
0033e8  4281              CMP      r1,r0                 ;5679
0033ea  dd17              BLE      |L1.13340|
0033ec  f9bc1000          LDRSH    r1,[r12,#0]           ;5681  ; bps_U
0033f0  1a08              SUBS     r0,r1,r0              ;5681
0033f2  2828              CMP      r0,#0x28              ;5681
0033f4  dd07              BLE      |L1.13318|
0033f6  f9b4001c          LDRSH    r0,[r4,#0x1c]         ;5681  ; cntrl_stat
0033fa  2800              CMP      r0,#0                 ;5681
0033fc  dd03              BLE      |L1.13318|
0033fe  f1a00005          SUB      r0,r0,#5              ;5681
003402  83a0              STRH     r0,[r4,#0x1c]         ;5681
003404  e145              B        |L1.13970|
                  |L1.13318|
003406  f9b4001c          LDRSH    r0,[r4,#0x1c]         ;5682  ; cntrl_stat
00340a  2800              CMP      r0,#0                 ;5682
00340c  d005              BEQ      |L1.13338|
00340e  79e1              LDRB     r1,[r4,#7]            ;5682  ; b1Hz_ch
003410  2900              CMP      r1,#0                 ;5682
003412  d002              BEQ      |L1.13338|
003414  f1a00001          SUB      r0,r0,#1              ;5682
003418  83a0              STRH     r0,[r4,#0x1c]         ;5682
                  |L1.13338|
00341a  e13a              B        |L1.13970|
                  |L1.13340|
00341c  f9bc1000          LDRSH    r1,[r12,#0]           ;5684  ; bps_U
003420  4281              CMP      r1,r0                 ;5684
003422  da0b              BGE      |L1.13372|
003424  1a40              SUBS     r0,r0,r1              ;5686
003426  2828              CMP      r0,#0x28              ;5686
003428  dd09              BLE      |L1.13374|
00342a  f9b4001c          LDRSH    r0,[r4,#0x1c]         ;5686  ; cntrl_stat
00342e  f24031f7          MOV      r1,#0x3f7             ;5686
003432  4288              CMP      r0,r1                 ;5686
003434  da03              BGE      |L1.13374|
003436  f1000005          ADD      r0,r0,#5              ;5686
00343a  83a0              STRH     r0,[r4,#0x1c]         ;5686
                  |L1.13372|
00343c  e129              B        |L1.13970|
                  |L1.13374|
00343e  f9b4001c          LDRSH    r0,[r4,#0x1c]         ;5687  ; cntrl_stat
003442  f5b07f7f          CMP      r0,#0x3fc             ;5687
003446  da05              BGE      |L1.13396|
003448  79e1              LDRB     r1,[r4,#7]            ;5687  ; b1Hz_ch
00344a  2900              CMP      r1,#0                 ;5687
00344c  d002              BEQ      |L1.13396|
00344e  f1000001          ADD      r0,r0,#1              ;5687
003452  83a0              STRH     r0,[r4,#0x1c]         ;5687
                  |L1.13396|
003454  e11d              B        |L1.13970|
                  |L1.13398|
003456  79e0              LDRB     r0,[r4,#7]            ;5728  ; b1Hz_ch
003458  2800              CMP      r0,#0                 ;5728
00345a  d072              BEQ      |L1.13634|
00345c  4862              LDR      r0,|L1.13800|
00345e  8800              LDRH     r0,[r0,#0]            ;5728  ; bIBAT_SMKLBR
003460  b118              CBZ      r0,|L1.13418|
003462  f89802e3          LDRB     r0,[r8,#0x2e3]        ;5728  ; bps
003466  2828              CMP      r0,#0x28              ;5728
003468  d96b              BLS      |L1.13634|
                  |L1.13418|
00346a  f9b4001e          LDRSH    r0,[r4,#0x1e]         ;5730  ; cntrl_stat_old
00346e  86e0              STRH     r0,[r4,#0x36]         ;5730
003470  f9b41038          LDRSH    r1,[r4,#0x38]         ;5732  ; Ibmax
003474  8f62              LDRH     r2,[r4,#0x3a]         ;5732  ; IZMAX_
003476  fb91f9f5          SDIV     r9,r1,r5              ;5732
00347a  ebb90f42          CMP      r9,r2,LSL #1          ;5732
00347e  dd0a              BLE      |L1.13462|
003480  f8b4105e          LDRH     r1,[r4,#0x5e]         ;5734  ; cntrl_stat_blok_cnt
003484  b119              CBZ      r1,|L1.13454|
003486  f1a00001          SUB      r0,r0,#1              ;5734
00348a  86e0              STRH     r0,[r4,#0x36]         ;5734
00348c  e0f9              B        |L1.13954|
                  |L1.13454|
00348e  f1a0000a          SUB      r0,r0,#0xa            ;5735
003492  86e0              STRH     r0,[r4,#0x36]         ;5735
003494  e0f5              B        |L1.13954|
                  |L1.13462|
003496  da0e              BGE      |L1.13494|
003498  ebc21a02          RSB      r10,r2,r2,LSL #4      ;5737
00349c  458a              CMP      r10,r1                ;5737
00349e  da0a              BGE      |L1.13494|
0034a0  f8b4105e          LDRH     r1,[r4,#0x5e]         ;5739  ; cntrl_stat_blok_cnt
0034a4  b119              CBZ      r1,|L1.13486|
0034a6  f1a00001          SUB      r0,r0,#1              ;5739
0034aa  86e0              STRH     r0,[r4,#0x36]         ;5739
0034ac  e0e9              B        |L1.13954|
                  |L1.13486|
0034ae  f1a00003          SUB      r0,r0,#3              ;5740
0034b2  86e0              STRH     r0,[r4,#0x36]         ;5740
0034b4  e0e5              B        |L1.13954|
                  |L1.13494|
0034b6  ebc21a02          RSB      r10,r2,r2,LSL #4      ;5742
0034ba  458a              CMP      r10,r1                ;5742
0034bc  dd05              BLE      |L1.13514|
0034be  4591              CMP      r9,r2                 ;5742
0034c0  dd03              BLE      |L1.13514|
0034c2  f1a00001          SUB      r0,r0,#1              ;5744
0034c6  86e0              STRH     r0,[r4,#0x36]         ;5744
0034c8  e0db              B        |L1.13954|
                  |L1.13514|
0034ca  f9bcc000          LDRSH    r12,[r12,#0]          ;5747  ; bps_U
0034ce  f9b33000          LDRSH    r3,[r3,#0]            ;5747  ; u_necc
0034d2  f8df90b4          LDR      r9,|L1.13704|
0034d6  f8dfa09c          LDR      r10,|L1.13684|
0034da  459c              CMP      r12,r3                ;5747
0034dc  da45              BGE      |L1.13674|
0034de  f9b99000          LDRSH    r9,[r9,#0]            ;5749  ; UB0
0034e2  f9baa000          LDRSH    r10,[r10,#0]          ;5749  ; UB20
0034e6  eba9090a          SUB      r9,r9,r10             ;5749
0034ea  eba30a09          SUB      r10,r3,r9             ;5749
0034ee  45e2              CMP      r10,r12               ;5749
0034f0  dd28              BLE      |L1.13636|
0034f2  2900              CMP      r1,#0                 ;5751
0034f4  da0a              BGE      |L1.13580|
0034f6  f8b4105e          LDRH     r1,[r4,#0x5e]         ;5753  ; cntrl_stat_blok_cnt
0034fa  b119              CBZ      r1,|L1.13572|
0034fc  f1000001          ADD      r0,r0,#1              ;5753
003500  86e0              STRH     r0,[r4,#0x36]         ;5753
003502  e0be              B        |L1.13954|
                  |L1.13572|
003504  f100000a          ADD      r0,r0,#0xa            ;5754
003508  86e0              STRH     r0,[r4,#0x36]         ;5754
00350a  e0ba              B        |L1.13954|
                  |L1.13580|
00350c  eb020382          ADD      r3,r2,r2,LSL #2       ;5756
003510  428b              CMP      r3,r1                 ;5756
003512  dd0a              BLE      |L1.13610|
003514  f8b4105e          LDRH     r1,[r4,#0x5e]         ;5758  ; cntrl_stat_blok_cnt
003518  b119              CBZ      r1,|L1.13602|
00351a  f1000001          ADD      r0,r0,#1              ;5758
00351e  86e0              STRH     r0,[r4,#0x36]         ;5758
003520  e0af              B        |L1.13954|
                  |L1.13602|
003522  f1000002          ADD      r0,r0,#2              ;5759
003526  86e0              STRH     r0,[r4,#0x36]         ;5759
003528  e0ab              B        |L1.13954|
                  |L1.13610|
00352a  ebc21342          RSB      r3,r2,r2,LSL #5       ;5761
00352e  eb031282          ADD      r2,r3,r2,LSL #6       ;5761
003532  fbb2f2f5          UDIV     r2,r2,r5              ;5761
003536  428a              CMP      r2,r1                 ;5761
003538  dd02              BLE      |L1.13632|
00353a  f1000001          ADD      r0,r0,#1              ;5763
00353e  86e0              STRH     r0,[r4,#0x36]         ;5763
                  |L1.13632|
003540  e09f              B        |L1.13954|
                  |L1.13634|
003542  e0a6              B        |L1.13970|
                  |L1.13636|
003544  ea4f7ae9          ASR      r10,r9,#31            ;5766
003548  eb09799a          ADD      r9,r9,r10,LSR #30     ;5766
00354c  eba309a9          SUB      r9,r3,r9,ASR #2       ;5766
003550  45e1              CMP      r9,r12                ;5766
003552  dd5b              BLE      |L1.13836|
003554  eb020382          ADD      r3,r2,r2,LSL #2       ;5768
003558  428b              CMP      r3,r1                 ;5768
00355a  dd4b              BLE      |L1.13812|
00355c  f8b4105e          LDRH     r1,[r4,#0x5e]         ;5770  ; cntrl_stat_blok_cnt
003560  b121              CBZ      r1,|L1.13676|
003562  f1000001          ADD      r0,r0,#1              ;5770
003566  86e0              STRH     r0,[r4,#0x36]         ;5770
003568  e08b              B        |L1.13954|
                  |L1.13674|
00356a  e05e              B        |L1.13866|
                  |L1.13676|
00356c  e03e              B        |L1.13804|
00356e  0000              DCW      0x0000
                  |L1.13680|
                          DCD      TERMOKOMPENS
                  |L1.13684|
                          DCD      UB20
                  |L1.13688|
                          DCD      u_necc
                  |L1.13692|
                          DCD      ND_EXT
                  |L1.13696|
                          DCD      t_ext
                  |L1.13700|
                          DCD      mat_temper
                  |L1.13704|
                          DCD      UB0
                  |L1.13708|
                          DCD      ||area_number.21||
                  |L1.13712|
                          DCD      UVZ
                  |L1.13716|
                          DCD      speedChIsOn
                  |L1.13720|
                          DCD      speedChrgVolt
                  |L1.13724|
                          DCD      mess_data
                  |L1.13728|
                          DCD      ICA_EN
                  |L1.13732|
                          DCD      ica_u_necc
                  |L1.13736|
                          DCD      u_necc_dn
                  |L1.13740|
                          DCD      u_necc_up
                  |L1.13744|
                          DCD      Isumm
                  |L1.13748|
                          DCD      Isumm_
                  |L1.13752|
                          DCD      bat
                  |L1.13756|
                          DCD      IMAX
                  |L1.13760|
                          DCD      IMIN
                  |L1.13764|
                          DCD      num_necc
                  |L1.13768|
                          DCD      PAR
                  |L1.13772|
                          DCD      NUMIST
                  |L1.13776|
                          DCD      IZMAX
                  |L1.13780|
                          DCD      speedChrgCurr
                  |L1.13784|
                          DCD      bps_U
                  |L1.13788|
                          DCD      bps
                  |L1.13792|
                          DCD      load_U
                  |L1.13796|
                          DCD      USIGN
                  |L1.13800|
                          DCD      bIBAT_SMKLBR
                  |L1.13804|
0035ec  f1000002          ADD      r0,r0,#2              ;5771
0035f0  86e0              STRH     r0,[r4,#0x36]         ;5771
0035f2  e046              B        |L1.13954|
                  |L1.13812|
0035f4  ebc21342          RSB      r3,r2,r2,LSL #5       ;5773
0035f8  eb031282          ADD      r2,r3,r2,LSL #6       ;5773
0035fc  fbb2f2f5          UDIV     r2,r2,r5              ;5773
003600  428a              CMP      r2,r1                 ;5773
003602  dd3e              BLE      |L1.13954|
003604  f1000001          ADD      r0,r0,#1              ;5775
003608  86e0              STRH     r0,[r4,#0x36]         ;5775
00360a  e03a              B        |L1.13954|
                  |L1.13836|
00360c  1e5b              SUBS     r3,r3,#1              ;5778
00360e  459c              CMP      r12,r3                ;5778
003610  da37              BGE      |L1.13954|
003612  ebc21342          RSB      r3,r2,r2,LSL #5       ;5780
003616  eb031282          ADD      r2,r3,r2,LSL #6       ;5780
00361a  fbb2f2f5          UDIV     r2,r2,r5              ;5780
00361e  428a              CMP      r2,r1                 ;5780
003620  dd2f              BLE      |L1.13954|
003622  f1000001          ADD      r0,r0,#1              ;5782
003626  86e0              STRH     r0,[r4,#0x36]         ;5782
003628  e02b              B        |L1.13954|
                  |L1.13866|
00362a  dd2a              BLE      |L1.13954|
00362c  f9b91000          LDRSH    r1,[r9,#0]            ;5788  ; UB0
003630  f9ba2000          LDRSH    r2,[r10,#0]           ;5788  ; UB20
003634  1a89              SUBS     r1,r1,r2              ;5788
003636  18ca              ADDS     r2,r1,r3              ;5788
003638  4562              CMP      r2,r12                ;5788
00363a  da0a              BGE      |L1.13906|
00363c  f8b4105e          LDRH     r1,[r4,#0x5e]         ;5790  ; cntrl_stat_blok_cnt
003640  b119              CBZ      r1,|L1.13898|
003642  f1a00001          SUB      r0,r0,#1              ;5790
003646  86e0              STRH     r0,[r4,#0x36]         ;5790
003648  e01b              B        |L1.13954|
                  |L1.13898|
00364a  f1a0000a          SUB      r0,r0,#0xa            ;5791
00364e  86e0              STRH     r0,[r4,#0x36]         ;5791
003650  e017              B        |L1.13954|
                  |L1.13906|
003652  17ca              ASRS     r2,r1,#31             ;5793
003654  eb017192          ADD      r1,r1,r2,LSR #30      ;5793
003658  eb0301a1          ADD      r1,r3,r1,ASR #2       ;5793
00365c  4561              CMP      r1,r12                ;5793
00365e  da0a              BGE      |L1.13942|
003660  f8b4105e          LDRH     r1,[r4,#0x5e]         ;5795  ; cntrl_stat_blok_cnt
003664  b119              CBZ      r1,|L1.13934|
003666  f1a00001          SUB      r0,r0,#1              ;5795
00366a  86e0              STRH     r0,[r4,#0x36]         ;5795
00366c  e009              B        |L1.13954|
                  |L1.13934|
00366e  f1a00002          SUB      r0,r0,#2              ;5796
003672  86e0              STRH     r0,[r4,#0x36]         ;5796
003674  e005              B        |L1.13954|
                  |L1.13942|
003676  1c5b              ADDS     r3,r3,#1              ;5798
003678  459c              CMP      r12,r3                ;5798
00367a  dd02              BLE      |L1.13954|
00367c  f1a00001          SUB      r0,r0,#1              ;5800
003680  86e0              STRH     r0,[r4,#0x36]         ;5800
                  |L1.13954|
003682  465a              MOV      r2,r11
003684  210a              MOVS     r1,#0xa
003686  48ff              LDR      r0,|L1.14980|
003688  f7fffffe          BL       gran
;;;5805   	cntrl_stat_old=cntrl_stat_new;
00368c  8ee0              LDRH     r0,[r4,#0x36]  ; cntrl_stat_new
00368e  83e0              STRH     r0,[r4,#0x1e]
;;;5806   	cntrl_stat=cntrl_stat_new;	
003690  83a0              STRH     r0,[r4,#0x1c]
                  |L1.13970|
;;;5807   	}
;;;5808   #else
;;;5809   else if((b1Hz_ch)&&((!bIBAT_SMKLBR)||(bps[8]._cnt>40)))
;;;5810   	{
;;;5811   	cntrl_stat_new=cntrl_stat_old;
;;;5812   	
;;;5813   	if((Ibmax/10)>(2*IZMAX_))
;;;5814   		{
;;;5815             if(cntrl_stat_blok_cnt)cntrl_stat_new--;
;;;5816   		else	cntrl_stat_new-=10;
;;;5817   		}		
;;;5818   	else if(((Ibmax/10)<(IZMAX_*2))&&(Ibmax>(IZMAX_*15)))
;;;5819   		{
;;;5820             if(cntrl_stat_blok_cnt)cntrl_stat_new--;
;;;5821             else	cntrl_stat_new-=3;
;;;5822   		}   
;;;5823   	else if((Ibmax<(IZMAX_*15))&&((Ibmax/10)>IZMAX_))
;;;5824   		{
;;;5825   		cntrl_stat_new--;
;;;5826   		}
;;;5827   		
;;;5828   	else if(load_U<u_necc)
;;;5829   		{
;;;5830   		if(load_U<(u_necc-(UB0-UB20)))
;;;5831   			{
;;;5832   			if(Ibmax<0)
;;;5833   				{
;;;5834                       if(cntrl_stat_blok_cnt)cntrl_stat_new++;
;;;5835   				else cntrl_stat_new+=10;
;;;5836   				}
;;;5837   			else if(Ibmax<(IZMAX_*5))
;;;5838   				{
;;;5839                       if(cntrl_stat_blok_cnt)cntrl_stat_new++;
;;;5840   				else	cntrl_stat_new+=2;
;;;5841   				}
;;;5842   			else if(Ibmax<((IZMAX_*95)/10))
;;;5843   				{
;;;5844   				cntrl_stat_new++;
;;;5845   				}					
;;;5846   			}
;;;5847   		else if(load_U<(u_necc-((UB0-UB20)/4)))
;;;5848   			{
;;;5849   			if(Ibmax<(IZMAX_*5))
;;;5850   				{
;;;5851                       if(cntrl_stat_blok_cnt)cntrl_stat_new++;
;;;5852   				else	cntrl_stat_new+=2;
;;;5853   				}
;;;5854   			else if(Ibmax<((IZMAX_*95)/10))
;;;5855   				{
;;;5856   				cntrl_stat_new++;
;;;5857   				}					
;;;5858   			}	
;;;5859   		else if(load_U<(u_necc-1))
;;;5860   			{
;;;5861   			if(Ibmax<((IZMAX_*95)/10))
;;;5862   				{
;;;5863   				cntrl_stat_new++;
;;;5864   				}					
;;;5865   			}					
;;;5866   		}	
;;;5867   	else if((load_U>u_necc)/*&&(!cntrl_blok)*/)
;;;5868   		{
;;;5869   		if(load_U>(u_necc+(UB0-UB20)))
;;;5870   			{
;;;5871                  if(cntrl_stat_blok_cnt)cntrl_stat_new--;
;;;5872   			else	cntrl_stat_new-=10;
;;;5873   			}
;;;5874   		else if(load_U>(u_necc+((UB0-UB20)/4)))
;;;5875   			{
;;;5876                  if(cntrl_stat_blok_cnt)cntrl_stat_new--;
;;;5877   			else cntrl_stat_new-=2;
;;;5878   			}	
;;;5879   		else if(load_U>(u_necc+1))
;;;5880   			{
;;;5881   			cntrl_stat_new--;
;;;5882   			}					
;;;5883   		}
;;;5884   
;;;5885   	gran(&cntrl_stat_new,10,1010);			
;;;5886   	cntrl_stat_old=cntrl_stat_new;
;;;5887   	cntrl_stat=cntrl_stat_new;	
;;;5888   	}
;;;5889   #endif
;;;5890   
;;;5891   iiii=0;
003692  7266              STRB     r6,[r4,#9]
;;;5892   for(i=0;i<NUMIST;i++)
003694  7226              STRB     r6,[r4,#8]
003696  48fc              LDR      r0,|L1.14984|
003698  f9b01000          LDRSH    r1,[r0,#0]
00369c  e00c              B        |L1.14008|
                  |L1.13982|
;;;5893        {
;;;5894        if(bps[i]._cnt<30)iiii=1;
00369e  ebc002c0          RSB      r2,r0,r0,LSL #3
0036a2  eb021200          ADD      r2,r2,r0,LSL #4
0036a6  eb080282          ADD      r2,r8,r2,LSL #2
0036aa  78d2              LDRB     r2,[r2,#3]
0036ac  2a1e              CMP      r2,#0x1e
0036ae  d200              BCS      |L1.14002|
0036b0  7267              STRB     r7,[r4,#9]
                  |L1.14002|
0036b2  f1000001          ADD      r0,r0,#1              ;5892
0036b6  7220              STRB     r0,[r4,#8]            ;5892
                  |L1.14008|
0036b8  7a20              LDRB     r0,[r4,#8]            ;5892  ; i
0036ba  4288              CMP      r0,r1                 ;5892
0036bc  dbef              BLT      |L1.13982|
;;;5895        }
;;;5896   
;;;5897   if(iiii==0)
0036be  7a60              LDRB     r0,[r4,#9]  ; iiii
0036c0  b920              CBNZ     r0,|L1.14028|
;;;5898        {
;;;5899        cntrl_stat=600;	
0036c2  f44f7016          MOV      r0,#0x258
0036c6  83a0              STRH     r0,[r4,#0x1c]
;;;5900        cntrl_stat_old=600;
0036c8  83e0              STRH     r0,[r4,#0x1e]
;;;5901        cntrl_stat_new=600;
0036ca  86e0              STRH     r0,[r4,#0x36]
                  |L1.14028|
;;;5902   	#ifdef UKU_TELECORE2015
;;;5903   	//cntrl_stat=0;
;;;5904   	//cntrl_stat_old=0;
;;;5905   	//cntrl_stat_new=0;
;;;5906   	#endif
;;;5907        }
;;;5908   gran(&cntrl_stat,10,1010); 
0036cc  48ed              LDR      r0,|L1.14980|
0036ce  465a              MOV      r2,r11
0036d0  210a              MOVS     r1,#0xa
0036d2  381a              SUBS     r0,r0,#0x1a
0036d4  f7fffffe          BL       gran
;;;5909   b1Hz_ch=0;
0036d8  71e6              STRB     r6,[r4,#7]
                  |L1.14042|
;;;5910   }
0036da  e8bd9ff0          POP      {r4-r12,pc}
;;;5911   #endif
                          ENDP

                  ext_drv PROC
;;;6156   //-----------------------------------------------
;;;6157   void ext_drv(void)
0036de  e92d5ff0          PUSH     {r4-r12,lr}
;;;6158   {
;;;6159   char i;
;;;6160   
;;;6161   
;;;6162   for(i=0;i<NUMSK;i++)
0036e2  f04f0000          MOV      r0,#0
0036e6  4aeb              LDR      r2,|L1.14996|
;;;6163   	{
;;;6164   	#ifdef UKU_MGTS
;;;6165   	if(adc_buff_[sk_buff_RSTKM[i]]<2000)
;;;6166   	#endif
;;;6167   	#ifdef UKU_RSTKM
;;;6168   	if(adc_buff_[sk_buff_RSTKM[i]]<2000)
;;;6169   	#endif
;;;6170   	#ifdef UKU_3U
;;;6171   	if(adc_buff_[sk_buff_3U[i]]<2000)
;;;6172   	#endif
;;;6173   	#ifdef UKU_GLONASS
;;;6174   	if(adc_buff_[sk_buff_GLONASS[i]]<2000)
;;;6175   	#endif
;;;6176   	#ifdef UKU_KONTUR
;;;6177   	if(adc_buff_[sk_buff_KONTUR[i]]<2000)
;;;6178   	#endif
;;;6179   	#ifdef UKU_6U
;;;6180   	if(adc_buff_[sk_buff_6U[i]]<2000)
;;;6181   	#endif
;;;6182   	#ifdef UKU_220
;;;6183   	if(adc_buff_[sk_buff_220[i]]<2000)
;;;6184   	#endif
;;;6185   	#ifdef UKU_220_V2
;;;6186   	if(adc_buff_[sk_buff_220[i]]<2000)
;;;6187   	#endif
;;;6188   	#ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;6189   	if(adc_buff_[sk_buff_220[i]]<2000)
;;;6190   	#endif
;;;6191   	#ifdef UKU_TELECORE2015
;;;6192   	if(adc_buff_[sk_buff_TELECORE2015[i]]<2000)	 //TODO
;;;6193   	#endif
;;;6194   
;;;6195   		{
;;;6196   		if(sk_cnt[i]<10)
0036e8  4be8              LDR      r3,|L1.14988|
;;;6197   			{
;;;6198   			sk_cnt[i]++;
;;;6199   			if(sk_cnt[i]>=10)
;;;6200   				{
;;;6201   				sk_stat[i]=ssON;
0036ea  4de9              LDR      r5,|L1.14992|
0036ec  f04f0a01          MOV      r10,#1
;;;6202   				}
;;;6203   			}
;;;6204   		else 
;;;6205   			{
;;;6206   			sk_cnt[i]=10;
0036f0  f04f0b0a          MOV      r11,#0xa
0036f4  4606              MOV      r6,r0                 ;6162
0036f6  f9b24000          LDRSH    r4,[r2,#0]            ;6162
0036fa  e025              B        |L1.14152|
                  |L1.14076|
0036fc  49e6              LDR      r1,|L1.15000|
0036fe  4fe7              LDR      r7,|L1.15004|
003700  5c09              LDRB     r1,[r1,r0]            ;6189
003702  f9371011          LDRSH    r1,[r7,r1,LSL #1]     ;6189
003706  f5b16ffa          CMP      r1,#0x7d0             ;6189
00370a  da0e              BGE      |L1.14122|
00370c  5619              LDRSB    r1,[r3,r0]            ;6196
00370e  290a              CMP      r1,#0xa               ;6196
003710  da08              BGE      |L1.14116|
003712  f1010101          ADD      r1,r1,#1              ;6198
003716  b249              SXTB     r1,r1                 ;6198
003718  5419              STRB     r1,[r3,r0]            ;6198
00371a  290a              CMP      r1,#0xa               ;6199
00371c  db11              BLT      |L1.14146|
00371e  f805a000          STRB     r10,[r5,r0]           ;6201
003722  e00e              B        |L1.14146|
                  |L1.14116|
003724  f803b000          STRB     r11,[r3,r0]
003728  e00b              B        |L1.14146|
                  |L1.14122|
;;;6207   			}
;;;6208                  
;;;6209   		}
;;;6210   	else
;;;6211   		{
;;;6212   		if(sk_cnt[i]>0)
00372a  5619              LDRSB    r1,[r3,r0]
00372c  2900              CMP      r1,#0
00372e  dd07              BLE      |L1.14144|
;;;6213   			{
;;;6214   			sk_cnt[i]--;
003730  f1a10101          SUB      r1,r1,#1
003734  b249              SXTB     r1,r1
003736  5419              STRB     r1,[r3,r0]
;;;6215   			if(sk_cnt[i]<=0)
003738  2900              CMP      r1,#0
00373a  dc02              BGT      |L1.14146|
;;;6216   				{
;;;6217   				sk_stat[i]=ssOFF;
00373c  542e              STRB     r6,[r5,r0]
00373e  e000              B        |L1.14146|
                  |L1.14144|
;;;6218   				}
;;;6219   			}
;;;6220   		else 
;;;6221   			{
;;;6222   			sk_cnt[i]=0;
003740  541e              STRB     r6,[r3,r0]
                  |L1.14146|
003742  f1000001          ADD      r0,r0,#1              ;6162
003746  b2c0              UXTB     r0,r0                 ;6162
                  |L1.14152|
003748  42a0              CMP      r0,r4                 ;6162
00374a  dbd7              BLT      |L1.14076|
;;;6223   			}
;;;6224   		}
;;;6225   	}
;;;6226   
;;;6227   for(i=0;i<NUMSK;i++)
00374c  f04f0400          MOV      r4,#0
;;;6228   	{
;;;6229   	if(((SK_SIGN[i]==0)&&(sk_stat[i]==ssON))||((SK_SIGN[i])&&(sk_stat[i]==ssOFF)) )
;;;6230   		{
;;;6231   		if(sk_av_cnt[i]<10)
003750  f8df934c          LDR      r9,|L1.15008|
;;;6232   			{
;;;6233   			sk_av_cnt[i]++;
;;;6234   			if(sk_av_cnt[i]>=10)
;;;6235   				{
;;;6236   				sk_av_stat[i]=sasON;
003754  4fd3              LDR      r7,|L1.15012|
;;;6237   				}
;;;6238   			}
;;;6239   		else 
;;;6240   			{
;;;6241   			sk_av_cnt[i]=10;
;;;6242   			}
;;;6243   		}
;;;6244   	else
;;;6245   		{
;;;6246   		if(sk_av_cnt[i]>=0)
;;;6247   			{
;;;6248   			sk_av_cnt[i]--;
;;;6249   			if(sk_av_cnt[i]<=0)
;;;6250   				{
;;;6251   				sk_av_stat[i]=sasOFF;
;;;6252   				}
;;;6253   			}
;;;6254   		else 
;;;6255   			{
;;;6256   			sk_av_cnt[i]=0;
;;;6257   			}
;;;6258   		}
;;;6259   
;;;6260   #ifndef UKU_KONTUR
;;;6261   	if(sk_av_stat_old[i]!=sk_av_stat[i])
003756  f8df8350          LDR      r8,|L1.15016|
00375a  e083              B        |L1.14436|
                  |L1.14172|
00375c  48d3              LDR      r0,|L1.15020|
00375e  f9300014          LDRSH    r0,[r0,r4,LSL #1]     ;6229
003762  b910              CBNZ     r0,|L1.14186|
003764  5d29              LDRB     r1,[r5,r4]            ;6229
003766  2901              CMP      r1,#1                 ;6229
003768  d00f              BEQ      |L1.14218|
                  |L1.14186|
00376a  b108              CBZ      r0,|L1.14192|
00376c  5d28              LDRB     r0,[r5,r4]            ;6229
00376e  b160              CBZ      r0,|L1.14218|
                  |L1.14192|
003770  f9190004          LDRSB    r0,[r9,r4]            ;6246
003774  2800              CMP      r0,#0                 ;6246
003776  db19              BLT      |L1.14252|
003778  f1a00001          SUB      r0,r0,#1              ;6248
00377c  b240              SXTB     r0,r0                 ;6248
00377e  f8090004          STRB     r0,[r9,r4]            ;6248
003782  2800              CMP      r0,#0                 ;6249
003784  dc14              BGT      |L1.14256|
003786  553e              STRB     r6,[r7,r4]            ;6251
003788  e012              B        |L1.14256|
                  |L1.14218|
00378a  f9190004          LDRSB    r0,[r9,r4]            ;6231
00378e  280a              CMP      r0,#0xa               ;6231
003790  da09              BGE      |L1.14246|
003792  f1000001          ADD      r0,r0,#1              ;6233
003796  b240              SXTB     r0,r0                 ;6233
003798  f8090004          STRB     r0,[r9,r4]            ;6233
00379c  280a              CMP      r0,#0xa               ;6234
00379e  db07              BLT      |L1.14256|
0037a0  f807a004          STRB     r10,[r7,r4]           ;6236
0037a4  e004              B        |L1.14256|
                  |L1.14246|
0037a6  f809b004          STRB     r11,[r9,r4]           ;6241
0037aa  e001              B        |L1.14256|
                  |L1.14252|
0037ac  f8096004          STRB     r6,[r9,r4]            ;6256
                  |L1.14256|
0037b0  f8181004          LDRB     r1,[r8,r4]
0037b4  5d38              LDRB     r0,[r7,r4]
0037b6  4281              CMP      r1,r0
0037b8  d04e              BEQ      |L1.14424|
;;;6262   		{
;;;6263   		plazma_sk++;
0037ba  4ab2              LDR      r2,|L1.14980|
0037bc  3a36              SUBS     r2,r2,#0x36
0037be  8e91              LDRH     r1,[r2,#0x34]  ; plazma_sk
0037c0  f1010101          ADD      r1,r1,#1
0037c4  8691              STRH     r1,[r2,#0x34]
;;;6264   		if(sk_av_stat[i]==sasON)
0037c6  2801              CMP      r0,#1
0037c8  d007              BEQ      |L1.14298|
;;;6265   			{
;;;6266   			if(i==0)snmp_trap_send("SK #1 Alarm",15,1,1);
;;;6267   			else if(i==1)snmp_trap_send("SK #2 Alarm",15,2,1);
;;;6268   			else if(i==2)snmp_trap_send("SK #3 Alarm",15,3,1);
;;;6269   			else if(i==3)snmp_trap_send("SK #4 Alarm",15,4,1);
;;;6270   			}
;;;6271   		else 
;;;6272   			{
;;;6273   			if(i==0)snmp_trap_send("SK #1 Alarm is off",15,1,0);
0037ca  b354              CBZ      r4,|L1.14370|
;;;6274   			else if(i==1)snmp_trap_send("SK #2 Alarm is off",15,2,0);
0037cc  2c01              CMP      r4,#1
0037ce  d02f              BEQ      |L1.14384|
;;;6275   			else if(i==2)snmp_trap_send("SK #3 Alarm is off",15,3,0);
0037d0  2c02              CMP      r4,#2
0037d2  d034              BEQ      |L1.14398|
;;;6276   			else if(i==3)snmp_trap_send("SK #4 Alarm is off",15,4,0);
0037d4  2c03              CMP      r4,#3
0037d6  d039              BEQ      |L1.14412|
0037d8  e03e              B        |L1.14424|
                  |L1.14298|
0037da  b134              CBZ      r4,|L1.14314|
0037dc  2c01              CMP      r4,#1                 ;6267
0037de  d00b              BEQ      |L1.14328|
0037e0  2c02              CMP      r4,#2                 ;6268
0037e2  d010              BEQ      |L1.14342|
0037e4  2c03              CMP      r4,#3                 ;6269
0037e6  d015              BEQ      |L1.14356|
0037e8  e036              B        |L1.14424|
                  |L1.14314|
0037ea  2301              MOVS     r3,#1                 ;6266
0037ec  461a              MOV      r2,r3                 ;6266
0037ee  210f              MOVS     r1,#0xf               ;6266
0037f0  a0af              ADR      r0,|L1.15024|
0037f2  f7fffffe          BL       snmp_trap_send
0037f6  e02f              B        |L1.14424|
                  |L1.14328|
0037f8  2301              MOVS     r3,#1                 ;6267
0037fa  2202              MOVS     r2,#2                 ;6267
0037fc  210f              MOVS     r1,#0xf               ;6267
0037fe  a0af              ADR      r0,|L1.15036|
003800  f7fffffe          BL       snmp_trap_send
003804  e028              B        |L1.14424|
                  |L1.14342|
003806  2301              MOVS     r3,#1                 ;6268
003808  2203              MOVS     r2,#3                 ;6268
00380a  210f              MOVS     r1,#0xf               ;6268
00380c  a0ae              ADR      r0,|L1.15048|
00380e  f7fffffe          BL       snmp_trap_send
003812  e021              B        |L1.14424|
                  |L1.14356|
003814  2301              MOVS     r3,#1                 ;6269
003816  2204              MOVS     r2,#4                 ;6269
003818  210f              MOVS     r1,#0xf               ;6269
00381a  a0ae              ADR      r0,|L1.15060|
00381c  f7fffffe          BL       snmp_trap_send
003820  e01a              B        |L1.14424|
                  |L1.14370|
003822  2300              MOVS     r3,#0                 ;6273
003824  2201              MOVS     r2,#1                 ;6273
003826  210f              MOVS     r1,#0xf               ;6273
003828  a0ad              ADR      r0,|L1.15072|
00382a  f7fffffe          BL       snmp_trap_send
00382e  e013              B        |L1.14424|
                  |L1.14384|
003830  2300              MOVS     r3,#0                 ;6274
003832  2202              MOVS     r2,#2                 ;6274
003834  210f              MOVS     r1,#0xf               ;6274
003836  a0af              ADR      r0,|L1.15092|
003838  f7fffffe          BL       snmp_trap_send
00383c  e00c              B        |L1.14424|
                  |L1.14398|
00383e  2300              MOVS     r3,#0                 ;6275
003840  2203              MOVS     r2,#3                 ;6275
003842  210f              MOVS     r1,#0xf               ;6275
003844  a0b0              ADR      r0,|L1.15112|
003846  f7fffffe          BL       snmp_trap_send
00384a  e005              B        |L1.14424|
                  |L1.14412|
00384c  2300              MOVS     r3,#0
00384e  2204              MOVS     r2,#4
003850  210f              MOVS     r1,#0xf
003852  a0b2              ADR      r0,|L1.15132|
003854  f7fffffe          BL       snmp_trap_send
                  |L1.14424|
;;;6277   			}
;;;6278   	 	}
;;;6279   #endif
;;;6280   
;;;6281   #ifdef UKU_KONTUR
;;;6282   	if(sk_av_stat_old[i]!=sk_av_stat[i])
;;;6283   		{
;;;6284   		plazma_sk++;
;;;6285   		if(sk_av_stat[i]==sasON)
;;;6286   			{
;;;6287   			if(i==0)snmp_trap_send("Door is opened",15,1,1);
;;;6288   			else if(i==1)snmp_trap_send("Smoke Alarm",15,2,1);
;;;6289   			else if(i==2)snmp_trap_send("Shock Sensor Alarm",15,3,1);
;;;6290   			else if(i==3)snmp_trap_send("SK #4 Alarm",15,4,1);
;;;6291   			}
;;;6292   		else 
;;;6293   			{
;;;6294   			if(i==0)snmp_trap_send("Door is closed",15,1,0);
;;;6295   			else if(i==1)snmp_trap_send("Smoke Alarm is off",15,2,0);
;;;6296   			else if(i==2)snmp_trap_send("Shock Sensor Alarm is off",15,3,0);
;;;6297   			else if(i==3)snmp_trap_send("SK #4 Alarm is off",15,4,0);
;;;6298   			}
;;;6299   	 	}
;;;6300   #endif
;;;6301   	sk_av_stat_old[i]=sk_av_stat[i];
003858  5d38              LDRB     r0,[r7,r4]
00385a  f8080004          STRB     r0,[r8,r4]
00385e  f1040401          ADD      r4,r4,#1              ;6227
003862  b2e4              UXTB     r4,r4                 ;6227
                  |L1.14436|
003864  488b              LDR      r0,|L1.14996|
003866  f9b00000          LDRSH    r0,[r0,#0]            ;6227  ; NUMSK
00386a  4284              CMP      r4,r0                 ;6227
00386c  f6ffaf76          BLT      |L1.14172|
;;;6302   	}
;;;6303   }
003870  e733              B        |L1.14042|
;;;6304   
                          ENDP

                  zar_superviser_start PROC
;;;6341   //-----------------------------------------------
;;;6342   void zar_superviser_start(void)
003872  4aaf              LDR      r2,|L1.15152|
;;;6343   {
;;;6344   sign_U[0]=1;
003874  f04f0001          MOV      r0,#1
003878  7010              STRB     r0,[r2,#0]
;;;6345   sign_I[0]=1;
00387a  49ae              LDR      r1,|L1.15156|
00387c  7008              STRB     r0,[r1,#0]
;;;6346   sign_U[1]=1;
00387e  7050              STRB     r0,[r2,#1]
;;;6347   sign_I[1]=1;
003880  7048              STRB     r0,[r1,#1]
;;;6348   
;;;6349   }
003882  4770              BX       lr
;;;6350   
                          ENDP

                  zar_superviser_drv PROC
;;;6306   //-----------------------------------------------
;;;6307   void zar_superviser_drv(void)
003884  e92d5ff0          PUSH     {r4-r12,lr}
;;;6308   {
;;;6309   
;;;6310   if(((bat[0]._Ub>u_necc_up) || (bat[0]._Ub<u_necc_dn))&&(main_kb_cnt<((TBAT*60)-30))&&(main_kb_cnt>((TBAT*60)-150))) sign_U[0]=0;
003888  48ac              LDR      r0,|L1.15164|
00388a  f8df92b4          LDR      r9,|L1.15168|
00388e  f8df82a8          LDR      r8,|L1.15160|
003892  f9b0c000          LDRSH    r12,[r0,#0]  ; u_necc_up
003896  f9b90000          LDRSH    r0,[r9,#0]
00389a  4c7a              LDR      r4,|L1.14980|
00389c  ebc01100          RSB      r1,r0,r0,LSL #4
0038a0  3c36              SUBS     r4,r4,#0x36
0038a2  f9b87002          LDRSH    r7,[r8,#2]  ; bat
0038a6  f06f0a1d          MVN      r10,#0x1d
0038aa  f06f0b95          MVN      r11,#0x95
0038ae  2500              MOVS     r5,#0
0038b0  4e9f              LDR      r6,|L1.15152|
0038b2  f9b40040          LDRSH    r0,[r4,#0x40]
0038b6  eb0a0281          ADD      r2,r10,r1,LSL #2
0038ba  eb0b0381          ADD      r3,r11,r1,LSL #2
0038be  4567              CMP      r7,r12
0038c0  dc05              BGT      |L1.14542|
0038c2  f8dfc280          LDR      r12,|L1.15172|
0038c6  f9bcc000          LDRSH    r12,[r12,#0]  ; u_necc_dn
0038ca  4567              CMP      r7,r12
0038cc  da04              BGE      |L1.14552|
                  |L1.14542|
0038ce  4282              CMP      r2,r0
0038d0  dd02              BLE      |L1.14552|
0038d2  4283              CMP      r3,r0
0038d4  da00              BGE      |L1.14552|
0038d6  7035              STRB     r5,[r6,#0]
                  |L1.14552|
;;;6311   
;;;6312   if(((bat[0]._Ib>(2*IKB)) || (bat[0]._Ib<(-IKB*2))) &&(main_kb_cnt<((TBAT*60)-30))&&(main_kb_cnt>((TBAT*60)-150))) sign_I[0]=0;
0038d8  4f9b              LDR      r7,|L1.15176|
0038da  f9b8c008          LDRSH    r12,[r8,#8]  ; bat
0038de  f9b7e000          LDRSH    lr,[r7,#0]  ; IKB
0038e2  4f94              LDR      r7,|L1.15156|
0038e4  ebbc0f4e          CMP      r12,lr,LSL #1
0038e8  dc04              BGT      |L1.14580|
0038ea  f1ce0e00          RSB      lr,lr,#0
0038ee  ebbc0f4e          CMP      r12,lr,LSL #1
0038f2  da04              BGE      |L1.14590|
                  |L1.14580|
0038f4  4282              CMP      r2,r0
0038f6  dd02              BLE      |L1.14590|
0038f8  4283              CMP      r3,r0
0038fa  da00              BGE      |L1.14590|
0038fc  703d              STRB     r5,[r7,#0]
                  |L1.14590|
;;;6313   																 
;;;6314   if((main_kb_cnt==((TBAT*60)-10)) &&(spc_stat==spcOFF))
0038fe  f06f0209          MVN      r2,#9
003902  eb020181          ADD      r1,r2,r1,LSL #2
003906  4281              CMP      r1,r0
003908  d120              BNE      |L1.14668|
00390a  7ce0              LDRB     r0,[r4,#0x13]  ; spc_stat
00390c  b9f0              CBNZ     r0,|L1.14668|
;;;6315   	{
;;;6316   	if((sign_U[0]==1) && (sign_I[0]==1) && (lc640_read_int(EE_BAT1_ZAR_CNT)!=BAT_C_REAL[0]) && (NUMBAT) && (!(bat[0]._av&1)))
00390e  7830              LDRB     r0,[r6,#0]  ; sign_U
003910  2801              CMP      r0,#1
003912  d11b              BNE      |L1.14668|
003914  7838              LDRB     r0,[r7,#0]  ; sign_I
003916  2801              CMP      r0,#1
003918  d118              BNE      |L1.14668|
00391a  f44f70d6          MOV      r0,#0x1ac
00391e  f7fffffe          BL       lc640_read_int
003922  498a              LDR      r1,|L1.15180|
003924  f9b11000          LDRSH    r1,[r1,#0]  ; BAT_C_REAL
003928  4288              CMP      r0,r1
00392a  d00f              BEQ      |L1.14668|
00392c  4888              LDR      r0,|L1.15184|
00392e  8800              LDRH     r0,[r0,#0]  ; NUMBAT
003930  b160              CBZ      r0,|L1.14668|
003932  f898003d          LDRB     r0,[r8,#0x3d]  ; bat
003936  07c0              LSLS     r0,r0,#31
003938  d108              BNE      |L1.14668|
;;;6317   		{
;;;6318   		lc640_write_int(EE_BAT1_ZAR_CNT,BAT_C_REAL[0]);
00393a  f44f70d6          MOV      r0,#0x1ac
00393e  f7fffffe          BL       lc640_write_int
;;;6319   		superviser_cnt++;
003942  4884              LDR      r0,|L1.15188|
003944  7801              LDRB     r1,[r0,#0]  ; superviser_cnt
003946  f1010101          ADD      r1,r1,#1
00394a  7001              STRB     r1,[r0,#0]
                  |L1.14668|
;;;6320   		}
;;;6321   	
;;;6322   	}
;;;6323   
;;;6324   if(((bat[0]._Ub>u_necc_up) || (bat[1]._Ub<u_necc_dn))&&(main_kb_cnt<((TBAT*60)-30))&&(main_kb_cnt>((TBAT*60)-150))) sign_U[1]=0;
00394c  487b              LDR      r0,|L1.15164|
00394e  f9b81002          LDRSH    r1,[r8,#2]  ; bat
003952  f9b00000          LDRSH    r0,[r0,#0]  ; u_necc_up
003956  4281              CMP      r1,r0
003958  dc06              BGT      |L1.14696|
00395a  487a              LDR      r0,|L1.15172|
00395c  f9b8104e          LDRSH    r1,[r8,#0x4e]  ; bat
003960  f9b00000          LDRSH    r0,[r0,#0]  ; u_necc_dn
003964  4281              CMP      r1,r0
003966  da0e              BGE      |L1.14726|
                  |L1.14696|
003968  f9b90000          LDRSH    r0,[r9,#0]  ; TBAT
00396c  f9b41040          LDRSH    r1,[r4,#0x40]  ; main_kb_cnt
003970  ebc01000          RSB      r0,r0,r0,LSL #4
003974  eb0a0280          ADD      r2,r10,r0,LSL #2
003978  428a              CMP      r2,r1
00397a  dd04              BLE      |L1.14726|
00397c  eb0b0080          ADD      r0,r11,r0,LSL #2
003980  4288              CMP      r0,r1
003982  da00              BGE      |L1.14726|
003984  7075              STRB     r5,[r6,#1]
                  |L1.14726|
;;;6325   
;;;6326   if(((bat[1]._Ib>(2*IKB)) || (bat[1]._Ib<(-IKB*2))) &&(main_kb_cnt<((TBAT*60)-30))&&(main_kb_cnt>((TBAT*60)-150))) sign_I[1]=0;
003986  4970              LDR      r1,|L1.15176|
003988  f9b80054          LDRSH    r0,[r8,#0x54]  ; bat
00398c  f9b11000          LDRSH    r1,[r1,#0]  ; IKB
003990  ebb00f41          CMP      r0,r1,LSL #1
003994  dc03              BGT      |L1.14750|
003996  4249              RSBS     r1,r1,#0
003998  ebb00f41          CMP      r0,r1,LSL #1
00399c  da0e              BGE      |L1.14780|
                  |L1.14750|
00399e  f9b90000          LDRSH    r0,[r9,#0]  ; TBAT
0039a2  f9b41040          LDRSH    r1,[r4,#0x40]  ; main_kb_cnt
0039a6  ebc01000          RSB      r0,r0,r0,LSL #4
0039aa  eb0a0280          ADD      r2,r10,r0,LSL #2
0039ae  428a              CMP      r2,r1
0039b0  dd04              BLE      |L1.14780|
0039b2  eb0b0080          ADD      r0,r11,r0,LSL #2
0039b6  4288              CMP      r0,r1
0039b8  da00              BGE      |L1.14780|
0039ba  707d              STRB     r5,[r7,#1]
                  |L1.14780|
;;;6327   																 
;;;6328   if((main_kb_cnt==((TBAT*60)-10)) &&(spc_stat==spcOFF))
0039bc  f9b90000          LDRSH    r0,[r9,#0]  ; TBAT
0039c0  ebc01100          RSB      r1,r0,r0,LSL #4
0039c4  f06f0009          MVN      r0,#9
0039c8  eb000081          ADD      r0,r0,r1,LSL #2
0039cc  f9b41040          LDRSH    r1,[r4,#0x40]  ; main_kb_cnt
0039d0  4288              CMP      r0,r1
0039d2  d121              BNE      |L1.14872|
0039d4  7ce0              LDRB     r0,[r4,#0x13]  ; spc_stat
0039d6  b9f8              CBNZ     r0,|L1.14872|
;;;6329   	{
;;;6330   	if((sign_U[1]==1) && (sign_I[1]==1) && (lc640_read_int(EE_BAT2_ZAR_CNT)!=BAT_C_REAL[1]) && (NUMBAT==2) && (!(bat[1]._av&1)))
0039d8  7870              LDRB     r0,[r6,#1]  ; sign_U
0039da  2801              CMP      r0,#1
0039dc  d11c              BNE      |L1.14872|
0039de  7878              LDRB     r0,[r7,#1]  ; sign_I
0039e0  2801              CMP      r0,#1
0039e2  d119              BNE      |L1.14872|
0039e4  f44f75e5          MOV      r5,#0x1ca
0039e8  4628              MOV      r0,r5
0039ea  f7fffffe          BL       lc640_read_int
0039ee  4957              LDR      r1,|L1.15180|
0039f0  f9b11002          LDRSH    r1,[r1,#2]  ; BAT_C_REAL
0039f4  4288              CMP      r0,r1
0039f6  d00f              BEQ      |L1.14872|
0039f8  4855              LDR      r0,|L1.15184|
0039fa  8800              LDRH     r0,[r0,#0]  ; NUMBAT
0039fc  2802              CMP      r0,#2
0039fe  d10b              BNE      |L1.14872|
003a00  f8980089          LDRB     r0,[r8,#0x89]  ; bat
003a04  07c0              LSLS     r0,r0,#31
003a06  d107              BNE      |L1.14872|
;;;6331   		{
;;;6332   		lc640_write_int(EE_BAT2_ZAR_CNT,BAT_C_REAL[1]);
003a08  4628              MOV      r0,r5
003a0a  f7fffffe          BL       lc640_write_int
;;;6333   		superviser_cnt++;
003a0e  4851              LDR      r0,|L1.15188|
003a10  7801              LDRB     r1,[r0,#0]  ; superviser_cnt
003a12  f1010101          ADD      r1,r1,#1
003a16  7001              STRB     r1,[r0,#0]
                  |L1.14872|
;;;6334   		}
;;;6335   	
;;;6336   	}
;;;6337   
;;;6338   if(main_kb_cnt==((TBAT*60)-2)) zar_superviser_start();
003a18  f9b90000          LDRSH    r0,[r9,#0]  ; TBAT
003a1c  f06f0101          MVN      r1,#1
003a20  ebc01000          RSB      r0,r0,r0,LSL #4
003a24  eb010080          ADD      r0,r1,r0,LSL #2
003a28  f9b41040          LDRSH    r1,[r4,#0x40]  ; main_kb_cnt
003a2c  4288              CMP      r0,r1
003a2e  d102              BNE      |L1.14902|
003a30  e8bd5ff0          POP      {r4-r12,lr}
003a34  e7fe              B        zar_superviser_start
                  |L1.14902|
;;;6339   }
003a36  e650              B        |L1.14042|
;;;6340   
                          ENDP

                  npn_hndl PROC
;;;6351   //-----------------------------------------------
;;;6352   void npn_hndl(void)
003a38  e92d03f0          PUSH     {r4-r9}
;;;6353   {
;;;6354   if(NPN_OUT!=npnoOFF)
003a3c  4846              LDR      r0,|L1.15192|
;;;6355   	{
;;;6356   /*	if(NPN_SIGN==npnsAVNET)
;;;6357   		{
;;;6358   		if(net_av==1)
;;;6359   			{
;;;6360   			if(npn_tz_cnt<TZNPN)
;;;6361   				{
;;;6362   				npn_tz_cnt++;
;;;6363   				if(npn_tz_cnt==TZNPN)
;;;6364   					{
;;;6365   					npn_stat=npnsOFF;
;;;6366   					}
;;;6367   				}
;;;6368   			}
;;;6369   		else
;;;6370   			{
;;;6371   			if(npn_tz_cnt)
;;;6372   				{
;;;6373   				npn_tz_cnt--;
;;;6374   				if(npn_tz_cnt==0)
;;;6375   					{
;;;6376   					npn_stat=npnsON;
;;;6377   					}
;;;6378   				}
;;;6379   			}
;;;6380   		}*/
;;;6381   /*	if(NPN_SIGN==npnsULOAD)
;;;6382   		{
;;;6383   		if(load_U<UONPN)
;;;6384   			{
;;;6385   			if(npn_tz_cnt<TZNPN)
;;;6386   				{
;;;6387   				npn_tz_cnt++;
;;;6388   				if(npn_tz_cnt==TZNPN)
;;;6389   					{
;;;6390   					npn_stat=npnsOFF;
;;;6391   					}
;;;6392   				}
;;;6393   			}
;;;6394   		else if(load_U>UVNPN)
;;;6395   			{
;;;6396   			if(npn_tz_cnt)
;;;6397   				{
;;;6398   				npn_tz_cnt--;
;;;6399   				if(npn_tz_cnt==0)
;;;6400   					{
;;;6401   					npn_stat=npnsON;
;;;6402   					}
;;;6403   				}
;;;6404   			}
;;;6405   		}*/
;;;6406   
;;;6407   	if((load_U<UONPN)&&((net_Ua<UMN)||(net_Ub<UMN)||(net_Uc<UMN)))
;;;6408   		{
;;;6409   		if(npn_tz_cnt<TZNPN)
003a3e  4f47              LDR      r7,|L1.15196|
;;;6410   			{
;;;6411   			npn_tz_cnt++;
;;;6412   			if(npn_tz_cnt==TZNPN)
;;;6413   				{
;;;6414   				npn_stat=npnsOFF;
003a40  4e47              LDR      r6,|L1.15200|
003a42  7800              LDRB     r0,[r0,#0]            ;6354  ; NPN_OUT
003a44  f04f0c00          MOV      r12,#0                ;6354
;;;6415   				}
;;;6416   			}
;;;6417   		}
;;;6418   	else if((load_U>UVNPN)&&(net_Ua>UMN)&&(net_Ub>UMN)&&(net_Uc>UMN))
;;;6419   		{
;;;6420   		if(npn_tz_cnt)
;;;6421   			{
;;;6422   			npn_tz_cnt--;
;;;6423   			if(npn_tz_cnt==0)
;;;6424   				{
;;;6425   				npn_stat=npnsON;
003a48  f04f0801          MOV      r8,#1
003a4c  b1c0              CBZ      r0,|L1.14976|
003a4e  4845              LDR      r0,|L1.15204|
003a50  4639              MOV      r1,r7                 ;6409
003a52  f9b05000          LDRSH    r5,[r0,#0]            ;6407  ; load_U
003a56  4844              LDR      r0,|L1.15208|
003a58  f9b11000          LDRSH    r1,[r1,#0]            ;6409
003a5c  f9b09000          LDRSH    r9,[r0,#0]            ;6407  ; UONPN
003a60  4842              LDR      r0,|L1.15212|
003a62  454d              CMP      r5,r9                 ;6407
003a64  f9b02000          LDRSH    r2,[r0,#0]            ;6407
003a68  4841              LDR      r0,|L1.15216|
003a6a  f9b03000          LDRSH    r3,[r0,#0]            ;6407
003a6e  4841              LDR      r0,|L1.15220|
003a70  f9b04000          LDRSH    r4,[r0,#0]            ;6407
003a74  4840              LDR      r0,|L1.15224|
003a76  f9b00000          LDRSH    r0,[r0,#0]            ;6407
003a7a  da02              BGE      |L1.14978|
003a7c  4282              CMP      r2,r0                 ;6407
003a7e  e07d              B        |L1.15228|
                  |L1.14976|
003a80  e0a4              B        |L1.15308|
                  |L1.14978|
003a82  e08e              B        |L1.15266|
                  |L1.14980|
                          DCD      ||area_number.21||+0x36
                  |L1.14984|
                          DCD      NUMIST
                  |L1.14988|
                          DCD      sk_cnt
                  |L1.14992|
                          DCD      sk_stat
                  |L1.14996|
                          DCD      NUMSK
                  |L1.15000|
                          DCD      ||area_number.15||
                  |L1.15004|
                          DCD      ||.bss||+0x400
                  |L1.15008|
                          DCD      sk_av_cnt
                  |L1.15012|
                          DCD      sk_av_stat
                  |L1.15016|
                          DCD      sk_av_stat_old
                  |L1.15020|
                          DCD      SK_SIGN
                  |L1.15024|
003ab0  534b2023          DCB      "SK #1 Alarm",0
003ab4  3120416c
003ab8  61726d00
                  |L1.15036|
003abc  534b2023          DCB      "SK #2 Alarm",0
003ac0  3220416c
003ac4  61726d00
                  |L1.15048|
003ac8  534b2023          DCB      "SK #3 Alarm",0
003acc  3320416c
003ad0  61726d00
                  |L1.15060|
003ad4  534b2023          DCB      "SK #4 Alarm",0
003ad8  3420416c
003adc  61726d00
                  |L1.15072|
003ae0  534b2023          DCB      "SK #1 Alarm is off",0
003ae4  3120416c
003ae8  61726d20
003aec  6973206f
003af0  666600  
003af3  00                DCB      0
                  |L1.15092|
003af4  534b2023          DCB      "SK #2 Alarm is off",0
003af8  3220416c
003afc  61726d20
003b00  6973206f
003b04  666600  
003b07  00                DCB      0
                  |L1.15112|
003b08  534b2023          DCB      "SK #3 Alarm is off",0
003b0c  3320416c
003b10  61726d20
003b14  6973206f
003b18  666600  
003b1b  00                DCB      0
                  |L1.15132|
003b1c  534b2023          DCB      "SK #4 Alarm is off",0
003b20  3420416c
003b24  61726d20
003b28  6973206f
003b2c  666600  
003b2f  00                DCB      0
                  |L1.15152|
                          DCD      sign_U
                  |L1.15156|
                          DCD      sign_I
                  |L1.15160|
                          DCD      bat
                  |L1.15164|
                          DCD      u_necc_up
                  |L1.15168|
                          DCD      TBAT
                  |L1.15172|
                          DCD      u_necc_dn
                  |L1.15176|
                          DCD      IKB
                  |L1.15180|
                          DCD      BAT_C_REAL
                  |L1.15184|
                          DCD      NUMBAT
                  |L1.15188|
                          DCD      superviser_cnt
                  |L1.15192|
                          DCD      NPN_OUT
                  |L1.15196|
                          DCD      npn_tz_cnt
                  |L1.15200|
                          DCD      npn_stat
                  |L1.15204|
                          DCD      load_U
                  |L1.15208|
                          DCD      UONPN
                  |L1.15212|
                          DCD      net_Ua
                  |L1.15216|
                          DCD      net_Ub
                  |L1.15220|
                          DCD      net_Uc
                  |L1.15224|
                          DCD      UMN
                  |L1.15228|
003b7c  db03              BLT      |L1.15238|
003b7e  4283              CMP      r3,r0                 ;6407
003b80  db01              BLT      |L1.15238|
003b82  4284              CMP      r4,r0                 ;6407
003b84  da0d              BGE      |L1.15266|
                  |L1.15238|
003b86  48ff              LDR      r0,|L1.16260|
003b88  f9b02000          LDRSH    r2,[r0,#0]            ;6409  ; TZNPN
003b8c  4291              CMP      r1,r2                 ;6409
003b8e  da21              BGE      |L1.15316|
003b90  f1010101          ADD      r1,r1,#1              ;6411
003b94  b208              SXTH     r0,r1                 ;6411
003b96  8038              STRH     r0,[r7,#0]            ;6411
003b98  4290              CMP      r0,r2                 ;6412
003b9a  d11b              BNE      |L1.15316|
003b9c  f886c000          STRB     r12,[r6,#0]           ;6414
003ba0  e018              B        |L1.15316|
                  |L1.15266|
003ba2  f8dfc3e4          LDR      r12,|L1.16264|
003ba6  f9bcc000          LDRSH    r12,[r12,#0]          ;6418  ; UVNPN
003baa  4565              CMP      r5,r12                ;6418
003bac  dd12              BLE      |L1.15316|
003bae  4282              CMP      r2,r0                 ;6418
003bb0  dd10              BLE      |L1.15316|
003bb2  4283              CMP      r3,r0                 ;6418
003bb4  dd0e              BLE      |L1.15316|
003bb6  4284              CMP      r4,r0                 ;6418
003bb8  dd0c              BLE      |L1.15316|
003bba  b159              CBZ      r1,|L1.15316|
003bbc  f1a10101          SUB      r1,r1,#1              ;6422
003bc0  b208              SXTH     r0,r1                 ;6422
003bc2  8038              STRH     r0,[r7,#0]            ;6422
003bc4  b930              CBNZ     r0,|L1.15316|
003bc6  f8868000          STRB     r8,[r6,#0]
003bca  e003              B        |L1.15316|
                  |L1.15308|
;;;6426   				}
;;;6427   			}
;;;6428   		}
;;;6429   	}
;;;6430   else
;;;6431   	{
;;;6432   	npn_tz_cnt=0;
003bcc  f8a7c000          STRH     r12,[r7,#0]
;;;6433   	npn_stat=npnsON;
003bd0  f8868000          STRB     r8,[r6,#0]
                  |L1.15316|
;;;6434   	}
;;;6435   
;;;6436   if(npn_stat==npnsOFF) mess_send(MESS2RELE_HNDL,PARAM_RELE_NPN,1,15);
003bd4  7830              LDRB     r0,[r6,#0]  ; npn_stat
003bd6  2800              CMP      r0,#0
003bd8  d107              BNE      |L1.15338|
003bda  e8bd03f0          POP      {r4-r9}
003bde  230f              MOVS     r3,#0xf
003be0  2201              MOVS     r2,#1
003be2  216e              MOVS     r1,#0x6e
003be4  20d2              MOVS     r0,#0xd2
003be6  f7ffbffe          B.W      mess_send
                  |L1.15338|
;;;6437   
;;;6438   
;;;6439   }
003bea  e8bd03f0          POP      {r4-r9}
003bee  4770              BX       lr
;;;6440   
                          ENDP

                  speedChargeHndl PROC
;;;6441   //-----------------------------------------------
;;;6442   void speedChargeHndl(void)
003bf0  b5f8              PUSH     {r3-r7,lr}
;;;6443   {
;;;6444   if(speedChIsOn)
003bf2  4fe6              LDR      r7,|L1.16268|
;;;6445   	{
;;;6446   	speedChTimeCnt++;
;;;6447   	if(speedChTimeCnt>=((signed long)speedChrgTimeInHour*3600L))
;;;6448   		{
;;;6449   		speedChIsOn=0;
;;;6450   		}
;;;6451   	if(speedChrgBlckStat)
003bf4  4de6              LDR      r5,|L1.16272|
003bf6  2400              MOVS     r4,#0                 ;6444
003bf8  8838              LDRH     r0,[r7,#0]            ;6444  ; speedChIsOn
003bfa  b198              CBZ      r0,|L1.15396|
003bfc  4ae5              LDR      r2,|L1.16276|
003bfe  6811              LDR      r1,[r2,#0]            ;6446  ; speedChTimeCnt
003c00  f1010101          ADD      r1,r1,#1              ;6446
003c04  6011              STR      r1,[r2,#0]            ;6446  ; speedChTimeCnt
003c06  48e4              LDR      r0,|L1.16280|
003c08  f9b00000          LDRSH    r0,[r0,#0]            ;6447  ; speedChrgTimeInHour
003c0c  ebc01340          RSB      r3,r0,r0,LSL #5       ;6447
003c10  ebc32000          RSB      r0,r3,r0,LSL #8       ;6447
003c14  ebb11f00          CMP      r1,r0,LSL #4          ;6447
003c18  db00              BLT      |L1.15388|
003c1a  803c              STRH     r4,[r7,#0]            ;6449
                  |L1.15388|
003c1c  8828              LDRH     r0,[r5,#0]  ; speedChrgBlckStat
003c1e  b108              CBZ      r0,|L1.15396|
;;;6452   		{
;;;6453   		speedChIsOn=0;
003c20  803c              STRH     r4,[r7,#0]
;;;6454   		speedChTimeCnt=0;
003c22  6014              STR      r4,[r2,#0]  ; speedChTimeCnt
                  |L1.15396|
;;;6455   		}
;;;6456   	}
;;;6457   
;;;6458   
;;;6459   
;;;6460   if(speedChrgAvtEn)
003c24  48dd              LDR      r0,|L1.16284|
;;;6461   	{
;;;6462   	if(!speedChIsOn)
;;;6463   		{
;;;6464   		if((load_U<u_necc)&&((u_necc-load_U)>speedChrgDU)&&(abs(Ib_ips_termokompensat/10-IZMAX)<5)&&(!speedChrgBlckStat))
;;;6465   			{
;;;6466   			speedChIsOn=1;
003c26  2601              MOVS     r6,#1
003c28  8800              LDRH     r0,[r0,#0]            ;6460  ; speedChrgAvtEn
003c2a  b300              CBZ      r0,|L1.15470|
003c2c  8838              LDRH     r0,[r7,#0]            ;6462  ; speedChIsOn
003c2e  b9f0              CBNZ     r0,|L1.15470|
003c30  48db              LDR      r0,|L1.16288|
003c32  49dc              LDR      r1,|L1.16292|
003c34  f9b00000          LDRSH    r0,[r0,#0]            ;6464  ; load_U
003c38  f9b11000          LDRSH    r1,[r1,#0]            ;6464  ; u_necc
003c3c  4288              CMP      r0,r1                 ;6464
003c3e  da16              BGE      |L1.15470|
003c40  1a08              SUBS     r0,r1,r0              ;6464
003c42  49d9              LDR      r1,|L1.16296|
003c44  f9b11000          LDRSH    r1,[r1,#0]            ;6464  ; speedChrgDU
003c48  4288              CMP      r0,r1                 ;6464
003c4a  dd10              BLE      |L1.15470|
003c4c  48d7              LDR      r0,|L1.16300|
003c4e  210a              MOVS     r1,#0xa               ;6464
003c50  f9b00000          LDRSH    r0,[r0,#0]            ;6464  ; Ib_ips_termokompensat
003c54  fb90f0f1          SDIV     r0,r0,r1              ;6464
003c58  49d5              LDR      r1,|L1.16304|
003c5a  8809              LDRH     r1,[r1,#0]            ;6464  ; IZMAX
003c5c  1a40              SUBS     r0,r0,r1              ;6464
003c5e  b200              SXTH     r0,r0                 ;6464
003c60  f7fffffe          BL       abs
003c64  2805              CMP      r0,#5                 ;6464
003c66  da02              BGE      |L1.15470|
003c68  8828              LDRH     r0,[r5,#0]            ;6464  ; speedChrgBlckStat
003c6a  b900              CBNZ     r0,|L1.15470|
003c6c  803e              STRH     r6,[r7,#0]
                  |L1.15470|
;;;6467   			}
;;;6468   		}
;;;6469   	}
;;;6470   
;;;6471   
;;;6472   
;;;6473   if((speedChrgBlckSrc!=1)&&(speedChrgBlckSrc!=2)) speedChrgBlckStat=0;
003c6e  48d1              LDR      r0,|L1.16308|
003c70  f9b00000          LDRSH    r0,[r0,#0]  ; speedChrgBlckSrc
003c74  2801              CMP      r0,#1
003c76  d003              BEQ      |L1.15488|
003c78  2802              CMP      r0,#2
003c7a  d001              BEQ      |L1.15488|
003c7c  802c              STRH     r4,[r5,#0]
003c7e  e026              B        |L1.15566|
                  |L1.15488|
;;;6474   else
;;;6475   	{
;;;6476   	speedChrgBlckStat=0;
003c80  802c              STRH     r4,[r5,#0]
;;;6477   	if(speedChrgBlckSrc==1)
;;;6478   		{
;;;6479   		if(((speedChrgBlckLog==0)&&(adc_buff_[11]>2000)) || ((speedChrgBlckLog==1)&&(adc_buff_[11]<2000))) speedChrgBlckStat=1;
003c82  4bcd              LDR      r3,|L1.16312|
003c84  49cd              LDR      r1,|L1.16316|
003c86  f44f62fa          MOV      r2,#0x7d0
003c8a  2801              CMP      r0,#1                 ;6477
003c8c  d002              BEQ      |L1.15508|
;;;6480   		}
;;;6481   	else if(speedChrgBlckSrc==2)
003c8e  2802              CMP      r0,#2
003c90  d00f              BEQ      |L1.15538|
003c92  e01c              B        |L1.15566|
                  |L1.15508|
003c94  f9b30000          LDRSH    r0,[r3,#0]            ;6479  ; speedChrgBlckLog
003c98  b918              CBNZ     r0,|L1.15522|
003c9a  f9b13016          LDRSH    r3,[r1,#0x16]         ;6479  ; adc_buff_
003c9e  4293              CMP      r3,r2                 ;6479
003ca0  dc05              BGT      |L1.15534|
                  |L1.15522|
003ca2  2801              CMP      r0,#1                 ;6479
003ca4  d113              BNE      |L1.15566|
003ca6  f9b10016          LDRSH    r0,[r1,#0x16]         ;6479  ; adc_buff_
003caa  4290              CMP      r0,r2                 ;6479
003cac  da0f              BGE      |L1.15566|
                  |L1.15534|
003cae  802e              STRH     r6,[r5,#0]            ;6479
003cb0  e00d              B        |L1.15566|
                  |L1.15538|
;;;6482   		{
;;;6483   		if(((speedChrgBlckLog==0)&&(adc_buff_[13]>2000)) || ((speedChrgBlckLog==1)&&(adc_buff_[13]<2000))) speedChrgBlckStat=1;
003cb2  f9b30000          LDRSH    r0,[r3,#0]  ; speedChrgBlckLog
003cb6  b918              CBNZ     r0,|L1.15552|
003cb8  f9b1301a          LDRSH    r3,[r1,#0x1a]  ; adc_buff_
003cbc  4293              CMP      r3,r2
003cbe  dc05              BGT      |L1.15564|
                  |L1.15552|
003cc0  2801              CMP      r0,#1
003cc2  d104              BNE      |L1.15566|
003cc4  f9b1001a          LDRSH    r0,[r1,#0x1a]  ; adc_buff_
003cc8  4290              CMP      r0,r2
003cca  da00              BGE      |L1.15566|
                  |L1.15564|
003ccc  802e              STRH     r6,[r5,#0]
                  |L1.15566|
;;;6484   		}
;;;6485   	}
;;;6486   
;;;6487   
;;;6488   if(speedChrgBlckStat==1)
003cce  8828              LDRH     r0,[r5,#0]  ; speedChrgBlckStat
;;;6489   	{
;;;6490   
;;;6491   	//speedChargeStartStop();
;;;6492   
;;;6493   	speedChrgShowCnt++;
003cd0  49bb              LDR      r1,|L1.16320|
003cd2  2801              CMP      r0,#1                 ;6488
003cd4  d001              BEQ      |L1.15578|
;;;6494   	if(speedChrgShowCnt>=30)	
;;;6495   		{
;;;6496   		speedChrgShowCnt=0;
;;;6497   		show_mess(	"          ",
;;;6498   					"               ",
;;;6499   					"     !!!    ",
;;;6500   					"                    ",
;;;6501   					5000);
;;;6502   		}
;;;6503   	}
;;;6504   else speedChrgShowCnt=0;
003cd6  700c              STRB     r4,[r1,#0]
                  |L1.15576|
;;;6505   
;;;6506   
;;;6507   }
003cd8  bdf8              POP      {r3-r7,pc}
                  |L1.15578|
003cda  7808              LDRB     r0,[r1,#0]            ;6493  ; speedChrgShowCnt
003cdc  f1000001          ADD      r0,r0,#1              ;6493
003ce0  b2c0              UXTB     r0,r0                 ;6493
003ce2  7008              STRB     r0,[r1,#0]            ;6493
003ce4  281e              CMP      r0,#0x1e              ;6494
003ce6  d3f7              BCC      |L1.15576|
003ce8  700c              STRB     r4,[r1,#0]            ;6496
003cea  f2413088          MOV      r0,#0x1388            ;6497
003cee  9000              STR      r0,[sp,#0]            ;6497
003cf0  a3b4              ADR      r3,|L1.16324|
003cf2  a2ba              ADR      r2,|L1.16348|
003cf4  a1bf              ADR      r1,|L1.16372|
003cf6  a0c5              ADR      r0,|L1.16396|
003cf8  f7fffffe          BL       show_mess
003cfc  bdf8              POP      {r3-r7,pc}
;;;6508   
                          ENDP

                  speedChargeStartStop PROC
;;;6509   //-----------------------------------------------
;;;6510   void speedChargeStartStop(void)
003cfe  b508              PUSH     {r3,lr}
;;;6511   {
;;;6512   if(speedChIsOn)
003d00  48a2              LDR      r0,|L1.16268|
003d02  2100              MOVS     r1,#0
003d04  8802              LDRH     r2,[r0,#0]  ; speedChIsOn
003d06  b10a              CBZ      r2,|L1.15628|
;;;6513   	{
;;;6514   	speedChIsOn=0;
003d08  8001              STRH     r1,[r0,#0]
;;;6515   	}
;;;6516   
;;;6517   else
;;;6518   	{
;;;6519   	if(speedChrgBlckStat==0)
;;;6520   		{
;;;6521   		speedChIsOn=1;
;;;6522   		speedChTimeCnt=0;
;;;6523   		}
;;;6524   	else
;;;6525   		{
;;;6526   		show_mess(	"          ",
;;;6527   	          		"               ",
;;;6528   	          		"    !   ",
;;;6529   	          		"                    ",2000);	 
;;;6530   		}
;;;6531   	}
;;;6532   }
003d0a  bd08              POP      {r3,pc}
                  |L1.15628|
003d0c  4aa0              LDR      r2,|L1.16272|
003d0e  8812              LDRH     r2,[r2,#0]            ;6519  ; speedChrgBlckStat
003d10  b14a              CBZ      r2,|L1.15654|
003d12  f44f60fa          MOV      r0,#0x7d0             ;6526
003d16  9000              STR      r0,[sp,#0]            ;6526
003d18  a3aa              ADR      r3,|L1.16324|
003d1a  a2c2              ADR      r2,|L1.16420|
003d1c  a1c7              ADR      r1,|L1.16444|
003d1e  a0cd              ADR      r0,|L1.16468|
003d20  f7fffffe          BL       show_mess
003d24  bd08              POP      {r3,pc}
                  |L1.15654|
003d26  f04f0201          MOV      r2,#1                 ;6521
003d2a  8002              STRH     r2,[r0,#0]            ;6521
003d2c  4899              LDR      r0,|L1.16276|
003d2e  6001              STR      r1,[r0,#0]            ;6522  ; speedChTimeCnt
003d30  bd08              POP      {r3,pc}
;;;6533   
                          ENDP

                  numOfForvardBps_hndl PROC
;;;6534   //-----------------------------------------------
;;;6535   void	numOfForvardBps_hndl(void)			//       
003d32  e92d41f0          PUSH     {r4-r8,lr}
;;;6536   {
;;;6537   
;;;6538   numOfForvardBps_old=numOfForvardBps;
003d36  4ccd              LDR      r4,|L1.16492|
003d38  7e20              LDRB     r0,[r4,#0x18]  ; numOfForvardBps
003d3a  7660              STRB     r0,[r4,#0x19]
;;;6539   
;;;6540   numOfForvardBps=0;
003d3c  f04f0500          MOV      r5,#0
003d40  7625              STRB     r5,[r4,#0x18]
;;;6541   
;;;6542   //FORVARDBPSCHHOUR=10;
;;;6543   
;;;6544   if((FORVARDBPSCHHOUR<=0)||(FORVARDBPSCHHOUR>500))
003d42  4ecb              LDR      r6,|L1.16496|
003d44  f9b60000          LDRSH    r0,[r6,#0]  ; FORVARDBPSCHHOUR
003d48  2800              CMP      r0,#0
003d4a  dd02              BLE      |L1.15698|
003d4c  f5b07ffa          CMP      r0,#0x1f4
003d50  dd02              BLE      |L1.15704|
                  |L1.15698|
;;;6545   	{
;;;6546   	FORVARDBPSCHHOUR=0;
003d52  8035              STRH     r5,[r6,#0]
                  |L1.15700|
;;;6547   	return;
;;;6548   	}
;;;6549   
;;;6550   numOfForvardBps_minCnt++;
;;;6551   
;;;6552   
;;;6553   if(numOfForvardBps_minCnt>=60)
;;;6554   	{
;;;6555   	numOfForvardBps_minCnt=0;
;;;6556   	numOfForvardBps_hourCnt=lc640_read_int(EE_FORVBPSHOURCNT);
;;;6557   	numOfForvardBps_hourCnt++;
;;;6558   	if(numOfForvardBps_hourCnt>=(FORVARDBPSCHHOUR*NUMIST))
;;;6559   		{
;;;6560   		numOfForvardBps_hourCnt=0;
;;;6561   		}
;;;6562   	lc640_write_int(EE_FORVBPSHOURCNT,numOfForvardBps_hourCnt);
;;;6563   	}
;;;6564   
;;;6565   numOfForvardBps=numOfForvardBps_hourCnt/FORVARDBPSCHHOUR;
;;;6566   
;;;6567   //if(numOfForvardBps)
;;;6568   //numOfForvardBps_old=numOfForvardBps; 
;;;6569   }
003d54  e8bd81f0          POP      {r4-r8,pc}
                  |L1.15704|
003d58  7ea0              LDRB     r0,[r4,#0x1a]         ;6550  ; numOfForvardBps_minCnt
003d5a  f1000001          ADD      r0,r0,#1              ;6550
003d5e  b2c0              UXTB     r0,r0                 ;6550
003d60  76a0              STRB     r0,[r4,#0x1a]         ;6550
003d62  283c              CMP      r0,#0x3c              ;6553
003d64  d31a              BCC      |L1.15772|
003d66  76a5              STRB     r5,[r4,#0x1a]         ;6555
003d68  f44f7794          MOV      r7,#0x128             ;6556
003d6c  4638              MOV      r0,r7                 ;6556
003d6e  f7fffffe          BL       lc640_read_int
003d72  f1000001          ADD      r0,r0,#1              ;6557
003d76  b200              SXTH     r0,r0                 ;6557
003d78  f8a40062          STRH     r0,[r4,#0x62]         ;6557
003d7c  4abd              LDR      r2,|L1.16500|
003d7e  f9b61000          LDRSH    r1,[r6,#0]            ;6558  ; FORVARDBPSCHHOUR
003d82  f9b22000          LDRSH    r2,[r2,#0]            ;6558  ; NUMIST
003d86  fb01f102          MUL      r1,r1,r2              ;6558
003d8a  4281              CMP      r1,r0                 ;6558
003d8c  dc01              BGT      |L1.15762|
003d8e  f8a45062          STRH     r5,[r4,#0x62]         ;6560
                  |L1.15762|
003d92  f9b41062          LDRSH    r1,[r4,#0x62]         ;6562  ; numOfForvardBps_hourCnt
003d96  4638              MOV      r0,r7                 ;6562
003d98  f7fffffe          BL       lc640_write_int
                  |L1.15772|
003d9c  f9b40062          LDRSH    r0,[r4,#0x62]         ;6565  ; numOfForvardBps_hourCnt
003da0  f9b61000          LDRSH    r1,[r6,#0]            ;6565  ; FORVARDBPSCHHOUR
003da4  fb90f0f1          SDIV     r0,r0,r1              ;6565
003da8  7620              STRB     r0,[r4,#0x18]         ;6565
003daa  e7d3              B        |L1.15700|
;;;6570   
                          ENDP

                  numOfForvardBps_init PROC
;;;6571   //-----------------------------------------------
;;;6572   void	numOfForvardBps_init(void)			//         
003dac  b510              PUSH     {r4,lr}
;;;6573   {									//    -   
;;;6574   lc640_write_int(EE_FORVBPSHOURCNT,0);
003dae  2100              MOVS     r1,#0
003db0  f44f7094          MOV      r0,#0x128
003db4  f7fffffe          BL       lc640_write_int
;;;6575   numOfForvardBps_minCnt=58;
003db8  49ac              LDR      r1,|L1.16492|
003dba  f04f003a          MOV      r0,#0x3a
003dbe  7688              STRB     r0,[r1,#0x1a]
;;;6576   }
003dc0  bd10              POP      {r4,pc}
;;;6577   
                          ENDP

                  outVoltContrHndl PROC
;;;6578   //-----------------------------------------------
;;;6579   void outVoltContrHndl(void)
003dc2  b570              PUSH     {r4-r6,lr}
;;;6580   { 
;;;6581   if((load_U>U_OUT_KONTR_MAX)||(load_U<U_OUT_KONTR_MIN))
003dc4  4c76              LDR      r4,|L1.16288|
003dc6  48ac              LDR      r0,|L1.16504|
;;;6582   	{
;;;6583   	outVoltContrHndlCnt_=0;
;;;6584   	if(outVoltContrHndlCnt<U_OUT_KONTR_DELAY)
003dc8  4aac              LDR      r2,|L1.16508|
003dca  f9b41000          LDRSH    r1,[r4,#0]            ;6581  ; load_U
003dce  f9b06000          LDRSH    r6,[r0,#0]            ;6581  ; U_OUT_KONTR_MAX
003dd2  2500              MOVS     r5,#0                 ;6583
003dd4  f9b20000          LDRSH    r0,[r2,#0]
003dd8  4ba9              LDR      r3,|L1.16512|
003dda  42b1              CMP      r1,r6                 ;6581
003ddc  dc04              BGT      |L1.15848|
003dde  4ea9              LDR      r6,|L1.16516|
003de0  f9b66000          LDRSH    r6,[r6,#0]            ;6581  ; U_OUT_KONTR_MIN
003de4  42b1              CMP      r1,r6                 ;6581
003de6  da0f              BGE      |L1.15880|
                  |L1.15848|
003de8  801d              STRH     r5,[r3,#0]            ;6583
003dea  49a7              LDR      r1,|L1.16520|
003dec  f9b11000          LDRSH    r1,[r1,#0]  ; U_OUT_KONTR_DELAY
003df0  4288              CMP      r0,r1
003df2  da1b              BGE      |L1.15916|
;;;6585   		{
;;;6586   		outVoltContrHndlCnt++;
003df4  f1000001          ADD      r0,r0,#1
003df8  b200              SXTH     r0,r0
003dfa  8010              STRH     r0,[r2,#0]
;;;6587   		if(outVoltContrHndlCnt==U_OUT_KONTR_DELAY)
003dfc  4288              CMP      r0,r1
003dfe  d115              BNE      |L1.15916|
;;;6588   			{
;;;6589   			avar_uout_hndl(1);
003e00  2001              MOVS     r0,#1
003e02  f7fffffe          BL       avar_uout_hndl
003e06  e011              B        |L1.15916|
                  |L1.15880|
;;;6590   			}
;;;6591   		}
;;;6592   	}
;;;6593   else
;;;6594   	{
;;;6595   	if(outVoltContrHndlCnt)
003e08  b180              CBZ      r0,|L1.15916|
;;;6596   		{
;;;6597   		if(outVoltContrHndlCnt_<5)
003e0a  f9b30000          LDRSH    r0,[r3,#0]  ; outVoltContrHndlCnt_
003e0e  2805              CMP      r0,#5
003e10  da0c              BGE      |L1.15916|
;;;6598   			{
;;;6599   			outVoltContrHndlCnt_++;
003e12  f1000001          ADD      r0,r0,#1
003e16  b200              SXTH     r0,r0
003e18  8018              STRH     r0,[r3,#0]
;;;6600   			if(outVoltContrHndlCnt_>=5)
003e1a  2805              CMP      r0,#5
003e1c  db06              BLT      |L1.15916|
;;;6601   				{
;;;6602   				outVoltContrHndlCnt=0;
003e1e  8015              STRH     r5,[r2,#0]
;;;6603   				if(uout_av)avar_uout_hndl(0);
003e20  489a              LDR      r0,|L1.16524|
003e22  7800              LDRB     r0,[r0,#0]  ; uout_av
003e24  b110              CBZ      r0,|L1.15916|
003e26  2000              MOVS     r0,#0
003e28  f7fffffe          BL       avar_uout_hndl
                  |L1.15916|
;;;6604   				}
;;;6605   			}
;;;6606   		}
;;;6607   	}
;;;6608   
;;;6609   if (load_U<(USIGN*10)) 
003e2c  4898              LDR      r0,|L1.16528|
003e2e  f9b41000          LDRSH    r1,[r4,#0]  ; load_U
003e32  f9b00000          LDRSH    r0,[r0,#0]  ; USIGN
003e36  eb000080          ADD      r0,r0,r0,LSL #2
003e3a  ebb10f40          CMP      r1,r0,LSL #1
003e3e  da0b              BGE      |L1.15960|
;;;6610   	{
;;;6611   	if(!bSILENT)
003e40  4894              LDR      r0,|L1.16532|
003e42  6800              LDR      r0,[r0,#0]  ; bSILENT
003e44  2800              CMP      r0,#0
003e46  d107              BNE      |L1.15960|
;;;6612   		{
;;;6613   		mess_send(MESS2RELE_HNDL,PARAM_RELE_BAT_IS_DISCHARGED,1,20);
003e48  e8bd4070          POP      {r4-r6,lr}
003e4c  2314              MOVS     r3,#0x14
003e4e  2201              MOVS     r2,#1
003e50  2172              MOVS     r1,#0x72
003e52  20d2              MOVS     r0,#0xd2
003e54  f7ffbffe          B.W      mess_send
                  |L1.15960|
;;;6614   		}
;;;6615   
;;;6616   	//bU_BAT2REL_AV_BAT=1;
;;;6617   	}
;;;6618   
;;;6619   
;;;6620   }
003e58  bd70              POP      {r4-r6,pc}
;;;6621   
                          ENDP

                  vent_resurs_hndl PROC
;;;6622   //-----------------------------------------------
;;;6623   void vent_resurs_hndl(void)
003e5a  e92d41f0          PUSH     {r4-r8,lr}
;;;6624   {
;;;6625   char i;
;;;6626   char crc_in,crc_eval;
;;;6627   
;;;6628   for(i=0;i<NUMIST;i++)
003e5e  f04f0200          MOV      r2,#0
003e62  4884              LDR      r0,|L1.16500|
;;;6629   	{
;;;6630   	if((bps[i]._buff[7]&0xc0)==0x00)
003e64  4f8c              LDR      r7,|L1.16536|
003e66  f9b06000          LDRSH    r6,[r0,#0]            ;6628
003e6a  e06e              B        |L1.16202|
                  |L1.15980|
003e6c  ebc200c2          RSB      r0,r2,r2,LSL #3
003e70  eb001002          ADD      r0,r0,r2,LSL #4
003e74  eb070080          ADD      r0,r7,r0,LSL #2
003e78  7b41              LDRB     r1,[r0,#0xd]
003e7a  098b              LSRS     r3,r1,#6
003e7c  d006              BEQ      |L1.16012|
;;;6631   		{
;;;6632   		bps[i]._vent_resurs_temp[0]=bps[i]._buff[7];
;;;6633   		}
;;;6634   	else if((bps[i]._buff[7]&0xc0)==0x40)
003e7e  2301              MOVS     r3,#1
003e80  ebb31f91          CMP      r3,r1,LSR #6
003e84  d105              BNE      |L1.16018|
;;;6635   		{
;;;6636   		bps[i]._vent_resurs_temp[1]=bps[i]._buff[7];
003e86  f8801055          STRB     r1,[r0,#0x55]
003e8a  e00f              B        |L1.16044|
                  |L1.16012|
003e8c  f8801054          STRB     r1,[r0,#0x54]         ;6632
003e90  e00c              B        |L1.16044|
                  |L1.16018|
;;;6637   		}
;;;6638   	else if((bps[i]._buff[7]&0xc0)==0x80)
003e92  2302              MOVS     r3,#2
003e94  ebb31f91          CMP      r3,r1,LSR #6
003e98  d102              BNE      |L1.16032|
;;;6639   		{
;;;6640   		bps[i]._vent_resurs_temp[2]=bps[i]._buff[7];
003e9a  f8801056          STRB     r1,[r0,#0x56]
003e9e  e005              B        |L1.16044|
                  |L1.16032|
;;;6641   		}
;;;6642   	else if((bps[i]._buff[7]&0xc0)==0xc0)
003ea0  2303              MOVS     r3,#3
003ea2  ebb31f91          CMP      r3,r1,LSR #6
003ea6  d101              BNE      |L1.16044|
;;;6643   		{
;;;6644   		bps[i]._vent_resurs_temp[3]=bps[i]._buff[7];
003ea8  f8801057          STRB     r1,[r0,#0x57]
                  |L1.16044|
;;;6645   		}
;;;6646   	crc_in=0;
;;;6647   	crc_in|=(bps[i]._vent_resurs_temp[0]&0x30)>>4;
003eac  f8101f54          LDRB     r1,[r0,#0x54]!
003eb0  f3c11401          UBFX     r4,r1,#4,#2
;;;6648   	crc_in|=(bps[i]._vent_resurs_temp[1]&0x30)>>2;
003eb4  7843              LDRB     r3,[r0,#1]
003eb6  f0030530          AND      r5,r3,#0x30
003eba  ea440595          ORR      r5,r4,r5,LSR #2
;;;6649   	crc_in|=(bps[i]._vent_resurs_temp[2]&0x30);
003ebe  7884              LDRB     r4,[r0,#2]
003ec0  f0040c30          AND      r12,r4,#0x30
003ec4  ea4c0c05          ORR      r12,r12,r5
;;;6650   	crc_in|=(bps[i]._vent_resurs_temp[3]&0x30)<<2;
003ec8  78c5              LDRB     r5,[r0,#3]
003eca  f1a00054          SUB      r0,r0,#0x54
003ece  f0050830          AND      r8,r5,#0x30
003ed2  ea4c0c88          ORR      r12,r12,r8,LSL #2
;;;6651   
;;;6652   	crc_eval =bps[i]._vent_resurs_temp[0]&0x0f;
003ed6  f001010f          AND      r1,r1,#0xf
;;;6653   	crc_eval^=bps[i]._vent_resurs_temp[1]&0x0f;
003eda  f003030f          AND      r3,r3,#0xf
003ede  ea830801          EOR      r8,r3,r1
;;;6654   	crc_eval^=bps[i]._vent_resurs_temp[2]&0x0f;
003ee2  f004040f          AND      r4,r4,#0xf
003ee6  ea840808          EOR      r8,r4,r8
;;;6655   	crc_eval^=bps[i]._vent_resurs_temp[3]&0x0f;
003eea  f005050f          AND      r5,r5,#0xf
003eee  ea850808          EOR      r8,r5,r8
;;;6656   
;;;6657   	if(crc_eval==crc_in)
003ef2  45e0              CMP      r8,r12
003ef4  d113              BNE      |L1.16158|
;;;6658   		{
;;;6659   		unsigned short temp_US;
;;;6660   		temp_US=0;
;;;6661   
;;;6662   		temp_US|=(bps[i]._vent_resurs_temp[3]&0x0f);
;;;6663   		temp_US<<=4;
003ef6  ea4f1505          LSL      r5,r5,#4
;;;6664   		temp_US|=(bps[i]._vent_resurs_temp[2]&0x0f);
003efa  ea440405          ORR      r4,r4,r5
;;;6665   		temp_US<<=4;
003efe  ea4f1404          LSL      r4,r4,#4
;;;6666   		temp_US|=(bps[i]._vent_resurs_temp[1]&0x0f);
003f02  ea430304          ORR      r3,r3,r4
;;;6667   		temp_US<<=4;
003f06  ea4f5303          LSL      r3,r3,#20
003f0a  ea4f4313          LSR      r3,r3,#16
;;;6668   		temp_US|=(bps[i]._vent_resurs_temp[0]&0x0f);
003f0e  ea410103          ORR      r1,r1,r3
;;;6669   
;;;6670   		if(bps[i]._vent_resurs!=temp_US)bps[i]._vent_resurs=temp_US;
003f12  f8b03058          LDRH     r3,[r0,#0x58]
003f16  428b              CMP      r3,r1
003f18  d001              BEQ      |L1.16158|
003f1a  f8a01058          STRH     r1,[r0,#0x58]
                  |L1.16158|
;;;6671   		}
;;;6672   
;;;6673   	if(bps[i]._vent_resurs>TVENTMAX*10)
003f1e  495f              LDR      r1,|L1.16540|
003f20  f8b03058          LDRH     r3,[r0,#0x58]
003f24  f9b11000          LDRSH    r1,[r1,#0]  ; TVENTMAX
003f28  eb010181          ADD      r1,r1,r1,LSL #2
003f2c  ebb30f41          CMP      r3,r1,LSL #1
003f30  dd04              BLE      |L1.16188|
;;;6674   		{
;;;6675   		bps[i]._av|=(1<<4);
003f32  7841              LDRB     r1,[r0,#1]
003f34  f0410110          ORR      r1,r1,#0x10
003f38  7041              STRB     r1,[r0,#1]
003f3a  e003              B        |L1.16196|
                  |L1.16188|
;;;6676   		}
;;;6677   	else bps[i]._av&=~(1<<4);
003f3c  7841              LDRB     r1,[r0,#1]
003f3e  f0210110          BIC      r1,r1,#0x10
003f42  7041              STRB     r1,[r0,#1]
                  |L1.16196|
003f44  f1020201          ADD      r2,r2,#1              ;6628
003f48  b2d2              UXTB     r2,r2                 ;6628
                  |L1.16202|
003f4a  42b2              CMP      r2,r6                 ;6628
003f4c  db8e              BLT      |L1.15980|
;;;6678   	}
;;;6679   }
003f4e  e701              B        |L1.15700|
;;;6680   
                          ENDP

                  vent_hndl PROC
;;;6681   //-----------------------------------------------
;;;6682   void vent_hndl(void)
003f50  e92d4ff0          PUSH     {r4-r11,lr}
;;;6683   {
003f54  b087              SUB      sp,sp,#0x1c
;;;6684   if(RELEVENTSIGN==rvsAKB)
003f56  4852              LDR      r0,|L1.16544|
;;;6685   	{
;;;6686   	if(vent_stat==0)
003f58  4c44              LDR      r4,|L1.16492|
;;;6687   		{
;;;6688   		if	(
;;;6689   			(BAT_IS_ON[0]==bisON)&&((bat[0]._Tb>TVENTON)||(bat[0]._nd))
003f5a  4952              LDR      r1,|L1.16548|
;;;6690   			||
;;;6691   			(BAT_IS_ON[1]==bisON)&&((bat[1]._Tb>TVENTON)||(bat[1]._nd))
;;;6692   			)
;;;6693   			{
;;;6694   			vent_stat=1;
;;;6695   			}
;;;6696   		}
;;;6697   	else if(vent_stat==1)
;;;6698   		{
;;;6699   		if	(
;;;6700   			((BAT_IS_ON[0]!=bisON)||((BAT_IS_ON[0]==bisON)&&(bat[0]._Tb<TVENTOFF)&&(!bat[0]._nd)))
003f5c  4a52              LDR      r2,|L1.16552|
003f5e  7800              LDRB     r0,[r0,#0]            ;6684  ; RELEVENTSIGN
003f60  f9943000          LDRSB    r3,[r4,#0]            ;6686
003f64  f9b11000          LDRSH    r1,[r1,#0]            ;6689
003f68  f9b22000          LDRSH    r2,[r2,#0]
003f6c  b138              CBZ      r0,|L1.16254|
;;;6701   			&&
;;;6702   			((BAT_IS_ON[1]!=bisON)||((BAT_IS_ON[1]==bisON)&&(bat[1]._Tb<TVENTOFF)&&(!bat[1]._nd)))
;;;6703   			)
;;;6704   			{
;;;6705   			vent_stat=0;
;;;6706   			}
;;;6707   		}
;;;6708   	}
;;;6709   else if(RELEVENTSIGN==rvsBPS)
003f6e  2802              CMP      r0,#2
003f70  d006              BEQ      |L1.16256|
;;;6710   	{
;;;6711   /*	if	(
;;;6712   		(((bps[0]._flags_tm&0x06)||(bps[0]._cnt>=30)))||
;;;6713   		(((bps[1]._flags_tm&0x06)||(bps[1]._cnt>=30))&&(NUMIST>1))||
;;;6714   		(((bps[2]._flags_tm&0x06)||(bps[2]._cnt>=30))&&(NUMIST>2))||
;;;6715   		(((bps[3]._flags_tm&0x06)||(bps[3]._cnt>=30))&&(NUMIST>3))||
;;;6716   		(((bps[4]._flags_tm&0x06)||(bps[4]._cnt>=30))&&(NUMIST>4))||
;;;6717   		(((bps[5]._flags_tm&0x06)||(bps[5]._cnt>=30))&&(NUMIST>5))||
;;;6718   		(((bps[6]._flags_tm&0x06)||(bps[6]._cnt>=30))&&(NUMIST>6))
;;;6719   		)
;;;6720   		{
;;;6721   		vent_stat=1;
;;;6722   		}
;;;6723   	else vent_stat=0;
;;;6724   	*/
;;;6725   
;;;6726   	if	(
;;;6727   		((NUMIST)&&((bps[0]._Ti>TVENTON)||(bps[0]._cnt>=30)))
;;;6728   		||
;;;6729   		((NUMIST>1)&&((bps[1]._Ti>TVENTON)||(bps[1]._cnt>=30)))
;;;6730   		||
;;;6731   		((NUMIST>2)&&((bps[2]._Ti>TVENTON)||(bps[2]._cnt>=30)))
;;;6732   		||
;;;6733   		((NUMIST>3)&&((bps[3]._Ti>TVENTON)||(bps[3]._cnt>=30)))
;;;6734   		||
;;;6735   		((NUMIST>4)&&((bps[4]._Ti>TVENTON)||(bps[4]._cnt>=30)))
;;;6736   		||
;;;6737   		((NUMIST>5)&&((bps[5]._Ti>TVENTON)||(bps[5]._cnt>=30)))
;;;6738   		||
;;;6739   		((NUMIST>6)&&((bps[6]._Ti>TVENTON)||(bps[6]._cnt>=30)))
;;;6740   		||
;;;6741   		((NUMIST>7)&&((bps[7]._Ti>TVENTON)||(bps[7]._cnt>=30)))
;;;6742   		)
;;;6743   		{
;;;6744   		vent_stat=1;
;;;6745   		}
;;;6746   	else if(vent_stat==1)
;;;6747   		{
;;;6748   		if	(
;;;6749   			((!NUMIST)||((NUMIST)&&(bps[0]._Ti<TVENTOFF)&&(bps[0]._cnt<10)))
;;;6750   			&&
;;;6751   			((NUMIST<2)||((NUMIST>=2)&&(bps[1]._Ti<TVENTOFF)&&(bps[1]._cnt<10)))
;;;6752   			&&
;;;6753   			((NUMIST<3)||((NUMIST>=3)&&(bps[2]._Ti<TVENTOFF)&&(bps[2]._cnt<10)))
;;;6754   			&&
;;;6755   			((NUMIST<4)||((NUMIST>=4)&&(bps[3]._Ti<TVENTOFF)&&(bps[3]._cnt<10)))
;;;6756   			&&
;;;6757   			((NUMIST<5)||((NUMIST>=5)&&(bps[4]._Ti<TVENTOFF)&&(bps[4]._cnt<10)))
;;;6758   			&&
;;;6759   			((NUMIST<6)||((NUMIST>=6)&&(bps[5]._Ti<TVENTOFF)&&(bps[5]._cnt<10)))
;;;6760   			&&
;;;6761   			((NUMIST<7)||((NUMIST>=7)&&(bps[6]._Ti<TVENTOFF)&&(bps[6]._cnt<10)))
;;;6762   			&&
;;;6763   			((NUMIST<8)||((NUMIST>=8)&&(bps[7]._Ti<TVENTOFF)&&(bps[7]._cnt<10)))
;;;6764   			)
;;;6765   			{
;;;6766   			vent_stat=0;
;;;6767   			}
;;;6768   		}
;;;6769   	}
;;;6770   else if(RELEVENTSIGN==rvsEXT)
003f72  2801              CMP      r0,#1
003f74  d005              BEQ      |L1.16258|
;;;6771   	{
;;;6772   	if	(
;;;6773   		((NUMDT)&&((t_ext[0]>TVENTON)||(ND_EXT[0])))
;;;6774   		||
;;;6775   		((NUMDT>1)&&((t_ext[1]>TVENTON)||(ND_EXT[1])))
;;;6776   		||
;;;6777   		((NUMDT>2)&&((t_ext[2]>TVENTON)||(ND_EXT[2])))
;;;6778   		)
;;;6779   		{
;;;6780   		vent_stat=1;
;;;6781   		}
;;;6782   	else if(vent_stat==1)
;;;6783   		{
;;;6784   		if	(
;;;6785   			((!NUMDT)||((NUMDT)&&(t_ext[0]<TVENTOFF)&&(!ND_EXT[0])))
;;;6786   			&&
;;;6787   			((NUMDT<2)||((NUMDT>=2)&&(t_ext[1]<TVENTOFF)&&(!ND_EXT[1])))
;;;6788   			&&
;;;6789   			((NUMDT<3)||((NUMDT>=3)&&(t_ext[2]<TVENTOFF)&&(!ND_EXT[2])))
;;;6790   			)
;;;6791   			{
;;;6792   			vent_stat=0;
;;;6793   			}
;;;6794   		}
;;;6795   	}
;;;6796   else vent_stat=1;
003f76  f04f0001          MOV      r0,#1
003f7a  7020              STRB     r0,[r4,#0]
                  |L1.16252|
;;;6797   }
003f7c  e096              B        |L1.16556|
                  |L1.16254|
003f7e  e098              B        |L1.16562|
                  |L1.16256|
003f80  e0ce              B        |L1.16672|
                  |L1.16258|
003f82  e191              B        |L1.17064|
                  |L1.16260|
                          DCD      TZNPN
                  |L1.16264|
                          DCD      UVNPN
                  |L1.16268|
                          DCD      speedChIsOn
                  |L1.16272|
                          DCD      speedChrgBlckStat
                  |L1.16276|
                          DCD      speedChTimeCnt
                  |L1.16280|
                          DCD      speedChrgTimeInHour
                  |L1.16284|
                          DCD      speedChrgAvtEn
                  |L1.16288|
                          DCD      load_U
                  |L1.16292|
                          DCD      u_necc
                  |L1.16296|
                          DCD      speedChrgDU
                  |L1.16300|
                          DCD      Ib_ips_termokompensat
                  |L1.16304|
                          DCD      IZMAX
                  |L1.16308|
                          DCD      speedChrgBlckSrc
                  |L1.16312|
                          DCD      speedChrgBlckLog
                  |L1.16316|
                          DCD      ||.bss||+0x400
                  |L1.16320|
                          DCD      speedChrgShowCnt
                  |L1.16324|
003fc4  20202020          DCB      "                    ",0
003fc8  20202020
003fcc  20202020
003fd0  20202020
003fd4  20202020
003fd8  00      
003fd9  00                DCB      0
003fda  00                DCB      0
003fdb  00                DCB      0
                  |L1.16348|
003fdc  20202020          DCB      "     ",199,192,207,208,197,217,197,205,"!!!    ",0
003fe0  20c7c0cf
003fe4  d0c5d9c5
003fe8  cd212121
003fec  20202020
003ff0  00      
003ff1  00                DCB      0
003ff2  00                DCB      0
003ff3  00                DCB      0
                  |L1.16372|
003ff4  20202020          DCB      "       ",199,192,208,223,196,"        ",0
003ff8  202020c7
003ffc  c0d0dfc4
004000  20202020
004004  20202020
004008  00      
004009  00                DCB      0
00400a  00                DCB      0
00400b  00                DCB      0
                  |L1.16396|
00400c  20202020          DCB      "     ",211,209,202,206,208,197,205,205,219,201,"     ",0
004010  20d3d1ca
004014  ced0c5cd
004018  cddbc920
00401c  20202020
004020  00      
004021  00                DCB      0
004022  00                DCB      0
004023  00                DCB      0
                  |L1.16420|
004024  20202020          DCB      "    ",231,224,225,235,238,234,232,240,238,226,224,237,"!"
004028  e7e0e1eb
00402c  eeeae8f0
004030  eee2e0ed
004034  21      
004035  20202000          DCB      "   ",0
004039  00                DCB      0
00403a  00                DCB      0
00403b  00                DCB      0
                  |L1.16444|
00403c  20202020          DCB      "       ",231,224,240,255,228,"        ",0
004040  202020e7
004044  e0f0ffe4
004048  20202020
00404c  20202020
004050  00      
004051  00                DCB      0
004052  00                DCB      0
004053  00                DCB      0
                  |L1.16468|
004054  20202020          DCB      "     ",211,241,234,238,240,229,237,237,251,233,"     ",0
004058  20d3f1ea
00405c  eef0e5ed
004060  edfbe920
004064  20202020
004068  00      
004069  00                DCB      0
00406a  00                DCB      0
00406b  00                DCB      0
                  |L1.16492|
                          DCD      ||area_number.21||
                  |L1.16496|
                          DCD      FORVARDBPSCHHOUR
                  |L1.16500|
                          DCD      NUMIST
                  |L1.16504|
                          DCD      U_OUT_KONTR_MAX
                  |L1.16508|
                          DCD      outVoltContrHndlCnt
                  |L1.16512|
                          DCD      outVoltContrHndlCnt_
                  |L1.16516|
                          DCD      U_OUT_KONTR_MIN
                  |L1.16520|
                          DCD      U_OUT_KONTR_DELAY
                  |L1.16524|
                          DCD      uout_av
                  |L1.16528|
                          DCD      USIGN
                  |L1.16532|
                          DCD      bSILENT
                  |L1.16536|
                          DCD      bps
                  |L1.16540|
                          DCD      TVENTMAX
                  |L1.16544|
                          DCD      RELEVENTSIGN
                  |L1.16548|
                          DCD      TVENTON
                  |L1.16552|
                          DCD      TVENTOFF
                  |L1.16556|
0040ac  b007              ADD      sp,sp,#0x1c
0040ae  e8bd8ff0          POP      {r4-r11,pc}
                  |L1.16562|
0040b2  4fa0              LDR      r7,|L1.17204|
0040b4  f8df8280          LDR      r8,|L1.17208|
0040b8  f9b7000a          LDRSH    r0,[r7,#0xa]          ;6689
0040bc  7b3d              LDRB     r5,[r7,#0xc]          ;6689
0040be  f9b76056          LDRSH    r6,[r7,#0x56]         ;6691
0040c2  f898c000          LDRB     r12,[r8,#0]           ;6688
0040c6  f8977058          LDRB     r7,[r7,#0x58]         ;6691
0040ca  f8988001          LDRB     r8,[r8,#1]            ;6691
0040ce  b133              CBZ      r3,|L1.16606|
0040d0  2b01              CMP      r3,#1                 ;6697
                  |L1.16594|
0040d2  f47faf53          BNE      |L1.16252|
0040d6  f1bc0f55          CMP      r12,#0x55             ;6699
0040da  d116              BNE      |L1.16650|
0040dc  e011              B        |L1.16642|
                  |L1.16606|
0040de  f1bc0f55          CMP      r12,#0x55             ;6688
0040e2  d102              BNE      |L1.16618|
0040e4  4288              CMP      r0,r1                 ;6689
0040e6  dc08              BGT      |L1.16634|
0040e8  b93d              CBNZ     r5,|L1.16634|
                  |L1.16618|
0040ea  f1b80f55          CMP      r8,#0x55              ;6691
0040ee  d1f0              BNE      |L1.16594|
0040f0  428e              CMP      r6,r1                 ;6691
0040f2  dc02              BGT      |L1.16634|
0040f4  2f00              CMP      r7,#0                 ;6691
0040f6  f43faf41          BEQ      |L1.16252|
                  |L1.16634|
0040fa  f04f0001          MOV      r0,#1                 ;6694
0040fe  7020              STRB     r0,[r4,#0]            ;6694
                  |L1.16640|
004100  e73c              B        |L1.16252|
                  |L1.16642|
004102  4290              CMP      r0,r2                 ;6700
004104  dafc              BGE      |L1.16640|
004106  2d00              CMP      r5,#0                 ;6700
004108  d1fa              BNE      |L1.16640|
                  |L1.16650|
00410a  f1b80f55          CMP      r8,#0x55              ;6702
00410e  d103              BNE      |L1.16664|
004110  4296              CMP      r6,r2                 ;6702
004112  daf5              BGE      |L1.16640|
004114  2f00              CMP      r7,#0                 ;6702
004116  d1f3              BNE      |L1.16640|
                  |L1.16664|
004118  f04f0000          MOV      r0,#0                 ;6705
00411c  7020              STRB     r0,[r4,#0]            ;6705
00411e  e72d              B        |L1.16252|
                  |L1.16672|
004120  4e87              LDR      r6,|L1.17216|
004122  4886              LDR      r0,|L1.17212|
004124  6ab5              LDR      r5,[r6,#0x28]         ;6727
004126  f9b00000          LDRSH    r0,[r0,#0]            ;6726  ; NUMIST
00412a  78f6              LDRB     r6,[r6,#3]            ;6727
00412c  b118              CBZ      r0,|L1.16694|
00412e  428d              CMP      r5,r1                 ;6727
004130  dc78              BGT      |L1.16932|
004132  2e1e              CMP      r6,#0x1e              ;6727
004134  d276              BCS      |L1.16932|
                  |L1.16694|
004136  f8dfc208          LDR      r12,|L1.17216|
00413a  2801              CMP      r0,#1                 ;6729
00413c  f8dc7084          LDR      r7,[r12,#0x84]        ;6729
004140  f89cc05f          LDRB     r12,[r12,#0x5f]       ;6729
004144  f8cdc018          STR      r12,[sp,#0x18]        ;6729
004148  dd06              BLE      |L1.16728|
00414a  428f              CMP      r7,r1                 ;6729
00414c  dc6a              BGT      |L1.16932|
00414e  f8ddc018          LDR      r12,[sp,#0x18]        ;6729
004152  f1bc0f1e          CMP      r12,#0x1e             ;6729
004156  d265              BCS      |L1.16932|
                  |L1.16728|
004158  f8dfc1e4          LDR      r12,|L1.17216|
00415c  2802              CMP      r0,#2                 ;6731
00415e  f8dc80e0          LDR      r8,[r12,#0xe0]        ;6731
004162  f8cd8014          STR      r8,[sp,#0x14]         ;6731
004166  f89cc0bb          LDRB     r12,[r12,#0xbb]       ;6731
00416a  f8cdc010          STR      r12,[sp,#0x10]        ;6731
00416e  dd08              BLE      |L1.16770|
004170  f8ddc014          LDR      r12,[sp,#0x14]        ;6731
004174  458c              CMP      r12,r1                ;6731
004176  dc55              BGT      |L1.16932|
004178  f8ddc010          LDR      r12,[sp,#0x10]        ;6731
00417c  f1bc0f1e          CMP      r12,#0x1e             ;6731
004180  d250              BCS      |L1.16932|
                  |L1.16770|
004182  f8dfc1bc          LDR      r12,|L1.17216|
004186  2803              CMP      r0,#3                 ;6733
004188  f8dc813c          LDR      r8,[r12,#0x13c]       ;6733
00418c  f8cd800c          STR      r8,[sp,#0xc]          ;6733
004190  f89cc117          LDRB     r12,[r12,#0x117]      ;6733
004194  f8cdc008          STR      r12,[sp,#8]           ;6733
004198  dd08              BLE      |L1.16812|
00419a  f8ddc00c          LDR      r12,[sp,#0xc]         ;6733
00419e  458c              CMP      r12,r1                ;6733
0041a0  dc40              BGT      |L1.16932|
0041a2  f8ddc008          LDR      r12,[sp,#8]           ;6733
0041a6  f1bc0f1e          CMP      r12,#0x1e             ;6733
0041aa  d23b              BCS      |L1.16932|
                  |L1.16812|
0041ac  f8df8190          LDR      r8,|L1.17216|
0041b0  2804              CMP      r0,#4                 ;6735
0041b2  f8d8c198          LDR      r12,[r8,#0x198]       ;6735
0041b6  f8988173          LDRB     r8,[r8,#0x173]        ;6735
0041ba  f8cd8004          STR      r8,[sp,#4]            ;6735
0041be  dd06              BLE      |L1.16846|
0041c0  458c              CMP      r12,r1                ;6735
0041c2  dc2f              BGT      |L1.16932|
0041c4  f8dd8004          LDR      r8,[sp,#4]            ;6735
0041c8  f1b80f1e          CMP      r8,#0x1e              ;6735
0041cc  d22a              BCS      |L1.16932|
                  |L1.16846|
0041ce  f8df9170          LDR      r9,|L1.17216|
0041d2  2805              CMP      r0,#5                 ;6737
0041d4  f8d981f4          LDR      r8,[r9,#0x1f4]        ;6737
0041d8  f89991cf          LDRB     r9,[r9,#0x1cf]        ;6737
0041dc  f8cd9000          STR      r9,[sp,#0]            ;6737
0041e0  dd06              BLE      |L1.16880|
0041e2  4588              CMP      r8,r1                 ;6737
0041e4  dc1e              BGT      |L1.16932|
0041e6  f8dd9000          LDR      r9,[sp,#0]            ;6737
0041ea  f1b90f1e          CMP      r9,#0x1e              ;6737
0041ee  d219              BCS      |L1.16932|
                  |L1.16880|
0041f0  f8dfa14c          LDR      r10,|L1.17216|
0041f4  2806              CMP      r0,#6                 ;6739
0041f6  f89ae22b          LDRB     lr,[r10,#0x22b]       ;6739
0041fa  f8da9250          LDR      r9,[r10,#0x250]       ;6739
0041fe  dd04              BLE      |L1.16906|
004200  4589              CMP      r9,r1                 ;6739
004202  dc0f              BGT      |L1.16932|
004204  f1be0f1e          CMP      lr,#0x1e              ;6739
004208  d20c              BCS      |L1.16932|
                  |L1.16906|
00420a  f8dfb134          LDR      r11,|L1.17216|
00420e  2807              CMP      r0,#7                 ;6741
004210  f8dba2ac          LDR      r10,[r11,#0x2ac]      ;6741
004214  f89bb287          LDRB     r11,[r11,#0x287]      ;6741
004218  dd08              BLE      |L1.16940|
00421a  458a              CMP      r10,r1                ;6741
00421c  dc02              BGT      |L1.16932|
00421e  f1bb0f1e          CMP      r11,#0x1e             ;6741
004222  d303              BCC      |L1.16940|
                  |L1.16932|
004224  f04f0001          MOV      r0,#1                 ;6744
004228  7020              STRB     r0,[r4,#0]            ;6744
                  |L1.16938|
00422a  e6a7              B        |L1.16252|
                  |L1.16940|
00422c  2b01              CMP      r3,#1                 ;6746
00422e  d1fc              BNE      |L1.16938|
004230  b118              CBZ      r0,|L1.16954|
004232  4295              CMP      r5,r2                 ;6749
004234  daf9              BGE      |L1.16938|
004236  2e0a              CMP      r6,#0xa               ;6749
004238  d2f7              BCS      |L1.16938|
                  |L1.16954|
00423a  2802              CMP      r0,#2                 ;6751
00423c  db04              BLT      |L1.16968|
00423e  4297              CMP      r7,r2                 ;6751
004240  daf3              BGE      |L1.16938|
004242  9906              LDR      r1,[sp,#0x18]         ;6751
004244  290a              CMP      r1,#0xa               ;6751
004246  d2f0              BCS      |L1.16938|
                  |L1.16968|
004248  2803              CMP      r0,#3                 ;6753
00424a  db05              BLT      |L1.16984|
00424c  9905              LDR      r1,[sp,#0x14]         ;6753
00424e  4291              CMP      r1,r2                 ;6753
004250  daeb              BGE      |L1.16938|
004252  9904              LDR      r1,[sp,#0x10]         ;6753
004254  290a              CMP      r1,#0xa               ;6753
004256  d2e8              BCS      |L1.16938|
                  |L1.16984|
004258  2804              CMP      r0,#4                 ;6755
00425a  db05              BLT      |L1.17000|
00425c  9903              LDR      r1,[sp,#0xc]          ;6755
00425e  4291              CMP      r1,r2                 ;6755
004260  dae3              BGE      |L1.16938|
004262  9902              LDR      r1,[sp,#8]            ;6755
004264  290a              CMP      r1,#0xa               ;6755
004266  d2e0              BCS      |L1.16938|
                  |L1.17000|
004268  2805              CMP      r0,#5                 ;6757
00426a  db04              BLT      |L1.17014|
00426c  4594              CMP      r12,r2                ;6757
00426e  dadc              BGE      |L1.16938|
004270  9901              LDR      r1,[sp,#4]            ;6757
004272  290a              CMP      r1,#0xa               ;6757
004274  d2d9              BCS      |L1.16938|
                  |L1.17014|
004276  2806              CMP      r0,#6                 ;6759
004278  db04              BLT      |L1.17028|
00427a  4590              CMP      r8,r2                 ;6759
00427c  dad5              BGE      |L1.16938|
00427e  9900              LDR      r1,[sp,#0]            ;6759
004280  290a              CMP      r1,#0xa               ;6759
004282  d2d2              BCS      |L1.16938|
                  |L1.17028|
004284  2807              CMP      r0,#7                 ;6761
004286  db04              BLT      |L1.17042|
004288  4591              CMP      r9,r2                 ;6761
00428a  dace              BGE      |L1.16938|
00428c  f1be0f0a          CMP      lr,#0xa               ;6761
004290  d2cb              BCS      |L1.16938|
                  |L1.17042|
004292  2808              CMP      r0,#8                 ;6763
004294  db04              BLT      |L1.17056|
004296  4592              CMP      r10,r2                ;6763
004298  dac7              BGE      |L1.16938|
00429a  f1bb0f0a          CMP      r11,#0xa              ;6763
00429e  d2c4              BCS      |L1.16938|
                  |L1.17056|
0042a0  f04f0000          MOV      r0,#0                 ;6766
0042a4  7020              STRB     r0,[r4,#0]            ;6766
                  |L1.17062|
0042a6  e669              B        |L1.16252|
                  |L1.17064|
0042a8  4826              LDR      r0,|L1.17220|
0042aa  4d27              LDR      r5,|L1.17224|
0042ac  4e27              LDR      r6,|L1.17228|
0042ae  f9b00000          LDRSH    r0,[r0,#0]            ;6772  ; NUMDT
0042b2  f9b55000          LDRSH    r5,[r5,#0]            ;6773
0042b6  6836              LDR      r6,[r6,#0]            ;6773
0042b8  b110              CBZ      r0,|L1.17088|
0042ba  428d              CMP      r5,r1                 ;6773
0042bc  dc1d              BGT      |L1.17146|
0042be  b9e6              CBNZ     r6,|L1.17146|
                  |L1.17088|
0042c0  4f21              LDR      r7,|L1.17224|
0042c2  f8dfc088          LDR      r12,|L1.17228|
0042c6  2801              CMP      r0,#1                 ;6775
0042c8  f9b77002          LDRSH    r7,[r7,#2]            ;6775
0042cc  f8dcc004          LDR      r12,[r12,#4]          ;6775
0042d0  dd04              BLE      |L1.17116|
0042d2  428f              CMP      r7,r1                 ;6775
0042d4  dc11              BGT      |L1.17146|
0042d6  f1bc0f00          CMP      r12,#0                ;6775
0042da  d10e              BNE      |L1.17146|
                  |L1.17116|
0042dc  f8df8068          LDR      r8,|L1.17224|
0042e0  f8df9068          LDR      r9,|L1.17228|
0042e4  2802              CMP      r0,#2                 ;6777
0042e6  f9b88004          LDRSH    r8,[r8,#4]            ;6777
0042ea  f8d99008          LDR      r9,[r9,#8]            ;6777
0042ee  dd08              BLE      |L1.17154|
0042f0  4588              CMP      r8,r1                 ;6777
0042f2  dc02              BGT      |L1.17146|
0042f4  f1b90f00          CMP      r9,#0                 ;6777
0042f8  d003              BEQ      |L1.17154|
                  |L1.17146|
0042fa  f04f0001          MOV      r0,#1                 ;6780
0042fe  7020              STRB     r0,[r4,#0]            ;6780
004300  e63c              B        |L1.16252|
                  |L1.17154|
004302  2b01              CMP      r3,#1                 ;6782
004304  d191              BNE      |L1.16938|
004306  b118              CBZ      r0,|L1.17168|
004308  4295              CMP      r5,r2                 ;6785
00430a  da8e              BGE      |L1.16938|
00430c  2e00              CMP      r6,#0                 ;6785
00430e  d18c              BNE      |L1.16938|
                  |L1.17168|
004310  2802              CMP      r0,#2                 ;6787
004312  db04              BLT      |L1.17182|
004314  4297              CMP      r7,r2                 ;6787
004316  da88              BGE      |L1.16938|
004318  f1bc0f00          CMP      r12,#0                ;6787
00431c  d185              BNE      |L1.16938|
                  |L1.17182|
00431e  2803              CMP      r0,#3                 ;6789
004320  db04              BLT      |L1.17196|
004322  4590              CMP      r8,r2                 ;6789
004324  dabf              BGE      |L1.17062|
004326  f1b90f00          CMP      r9,#0                 ;6789
00432a  d1bc              BNE      |L1.17062|
                  |L1.17196|
00432c  f04f0000          MOV      r0,#0                 ;6792
004330  7020              STRB     r0,[r4,#0]            ;6792
004332  e623              B        |L1.16252|
;;;6798   
                          ENDP

                  |L1.17204|
                          DCD      bat
                  |L1.17208|
                          DCD      BAT_IS_ON
                  |L1.17212|
                          DCD      NUMIST
                  |L1.17216|
                          DCD      bps
                  |L1.17220|
                          DCD      NUMDT
                  |L1.17224|
                          DCD      t_ext
                  |L1.17228|
                          DCD      ND_EXT

                          AREA ||area_number.2||, CODE, READONLY, ALIGN=2

                          EXPORTAS ||area_number.2||, ||.text||
                  samokalibr_init PROC
;;;220    //-----------------------------------------------
;;;221    void ke_start(char in)
000000  4902              LDR      r1,|L2.12|
;;;222    {          
000002  f24060f9          MOV      r0,#0x6f9
;;;223    ke_start_stat=(enum_ke_start_stat)0;		 
000006  87c8              STRH     r0,[r1,#0x3e]
000008  4770              BX       lr
;;;224    
;;;225    if(spc_stat==spcVZ)ke_start_stat=kssNOT_VZ;
;;;226    else if(BAT_IS_ON[in]!=bisON)ke_start_stat=kssNOT_BAT;
;;;227    else if(bat[in]._av&(1<<0))ke_start_stat=kssNOT_BAT_AV;
;;;228    else if(bat[in]._temper_stat&(1<<1))ke_start_stat=kssNOT_BAT_AV_T;
;;;229    else if(bat[in]._av&(1<<1))ke_start_stat=kssNOT_BAT_AV_ASS;
;;;230    else if(bat[in]._Ib>IKB)ke_start_stat=kssNOT_BAT_ZAR;
;;;231    else if(bat[in]._Ib<-IKB)ke_start_stat=kssNOT_BAT_RAZR;
;;;232    else if((spc_stat==spcKE)&&(spc_bat==0))ke_start_stat=kssNOT_KE1;
;;;233    else if((spc_stat==spcKE)&&(spc_bat==1))ke_start_stat=kssNOT_KE2;
;;;234    else 
;;;235    	{
;;;236    
;;;237    	ke_start_stat=kssYES;
;;;238    
;;;239    	spc_stat=spcKE;
;;;240    	__ee_spc_stat=spcKE;
;;;241    	lc640_write_int(EE_SPC_STAT,__ee_spc_stat);
;;;242    	
;;;243    	spc_bat=in;
;;;244    	__ee_spc_bat=in;
;;;245    	lc640_write_int(EE_SPC_BAT,__ee_spc_bat);
;;;246    
;;;247    	bat[in]._zar_cnt_ke=0;
;;;248    	lc640_write_int(ADR_EE_BAT_ZAR_CNT_KE[in],0);
;;;249    	
;;;250    	spc_phase=0;
;;;251    	__ee_spc_phase=0;
;;;252    	lc640_write_int(EE_SPC_PHASE,__ee_spc_phase);
;;;253    
;;;254    	//ke_mem_hndl(in,lc640_read_int(ADR_EE_BAT_ZAR_CNT_KE[spc_bat]));
;;;255    
;;;256    		{					
;;;257    		signed short temp_temp;
;;;258    		signed char temp;
;;;259    		temp_temp=bat[in]._u_old[((bat_u_old_cnt+1)&0x07)]; 
;;;260    		    
;;;261    		temp=LPC_RTC->YEAR;
;;;262    		gran_char(&temp,1,99);
;;;263    		*((char*)(&(ke_date[0])))=temp;
;;;264    			
;;;265    		temp=LPC_RTC->MONTH;
;;;266    		gran_char(&temp,1,12);
;;;267    		*(((char*)(&(ke_date[0])))+1)=temp;
;;;268    		
;;;269    		temp=LPC_RTC->DOM;
;;;270    		gran_char(&temp,1,31);
;;;271    		*(((char*)(&(ke_date[0])))+2)=temp;			
;;;272    				
;;;273    		*(((char*)(&(ke_date[0])))+3)=*((char*)&temp_temp);
;;;274    		lc640_write_long(EE_SPC_KE_DATE0,ke_date[0]);
;;;275    
;;;276    		temp=LPC_RTC->HOUR;
;;;277    		gran_char(&temp,0,23);
;;;278    		*((char*)(&(ke_date[1])))=temp;
;;;279                   
;;;280    		temp=LPC_RTC->MIN;
;;;281    		gran_char(&temp,0,59);
;;;282    		*(((char*)(&(ke_date[1])))+1)=temp;
;;;283    	          
;;;284    		temp=LPC_RTC->SEC;
;;;285    		gran_char(&temp,0,59);
;;;286    		*(((char*)(&(ke_date[1])))+2)=temp;
;;;287    			
;;;288    		*(((char*)(&(ke_date[1])))+3)=*(((char*)&temp_temp)+1);
;;;289    		lc640_write_long(EE_SPC_KE_DATE1,ke_date[1]);
;;;290    		}
;;;291    
;;;292    	}
;;;293    }
;;;294    
                          ENDP

00000a  0000              DCW      0x0000
                  |L2.12|
                          DCD      ||area_number.21||

                          AREA ||area_number.3||, CODE, READONLY, ALIGN=2

                          EXPORTAS ||area_number.3||, ||.text||
                  adc_drv6 PROC
;;;220    //-----------------------------------------------
;;;221    void ke_start(char in)
000000  e92d41f0          PUSH     {r4-r8,lr}
;;;222    {          
000004  4c80              LDR      r4,|L3.520|
;;;223    ke_start_stat=(enum_ke_start_stat)0;		 
000006  8860              LDRH     r0,[r4,#2]  ; adc_self_ch_buff
000008  8821              LDRH     r1,[r4,#0]  ; adc_self_ch_buff
00000a  1a40              SUBS     r0,r0,r1
00000c  b200              SXTH     r0,r0
;;;224    
;;;225    if(spc_stat==spcVZ)ke_start_stat=kssNOT_VZ;
00000e  f7fffffe          BL       abs_pal
000012  1da5              ADDS     r5,r4,#6
000014  8028              STRH     r0,[r5,#0]
000016  88a0              LDRH     r0,[r4,#4]  ; adc_self_ch_buff
;;;226    else if(BAT_IS_ON[in]!=bisON)ke_start_stat=kssNOT_BAT;
000018  8861              LDRH     r1,[r4,#2]  ; adc_self_ch_buff
00001a  1a40              SUBS     r0,r0,r1
00001c  b200              SXTH     r0,r0
00001e  f7fffffe          BL       abs_pal
000022  8068              STRH     r0,[r5,#2]
000024  88a0              LDRH     r0,[r4,#4]  ; adc_self_ch_buff
;;;227    else if(bat[in]._av&(1<<0))ke_start_stat=kssNOT_BAT_AV;
;;;228    else if(bat[in]._temper_stat&(1<<1))ke_start_stat=kssNOT_BAT_AV_T;
;;;229    else if(bat[in]._av&(1<<1))ke_start_stat=kssNOT_BAT_AV_ASS;
;;;230    else if(bat[in]._Ib>IKB)ke_start_stat=kssNOT_BAT_ZAR;
;;;231    else if(bat[in]._Ib<-IKB)ke_start_stat=kssNOT_BAT_RAZR;
;;;232    else if((spc_stat==spcKE)&&(spc_bat==0))ke_start_stat=kssNOT_KE1;
;;;233    else if((spc_stat==spcKE)&&(spc_bat==1))ke_start_stat=kssNOT_KE2;
;;;234    else 
;;;235    	{
;;;236    
;;;237    	ke_start_stat=kssYES;
;;;238    
;;;239    	spc_stat=spcKE;
;;;240    	__ee_spc_stat=spcKE;
;;;241    	lc640_write_int(EE_SPC_STAT,__ee_spc_stat);
;;;242    	
;;;243    	spc_bat=in;
;;;244    	__ee_spc_bat=in;
;;;245    	lc640_write_int(EE_SPC_BAT,__ee_spc_bat);
;;;246    
;;;247    	bat[in]._zar_cnt_ke=0;
;;;248    	lc640_write_int(ADR_EE_BAT_ZAR_CNT_KE[in],0);
;;;249    	
;;;250    	spc_phase=0;
;;;251    	__ee_spc_phase=0;
;;;252    	lc640_write_int(EE_SPC_PHASE,__ee_spc_phase);
;;;253    
;;;254    	//ke_mem_hndl(in,lc640_read_int(ADR_EE_BAT_ZAR_CNT_KE[spc_bat]));
;;;255    
;;;256    		{					
;;;257    		signed short temp_temp;
;;;258    		signed char temp;
;;;259    		temp_temp=bat[in]._u_old[((bat_u_old_cnt+1)&0x07)]; 
;;;260    		    
;;;261    		temp=LPC_RTC->YEAR;
;;;262    		gran_char(&temp,1,99);
;;;263    		*((char*)(&(ke_date[0])))=temp;
;;;264    			
;;;265    		temp=LPC_RTC->MONTH;
;;;266    		gran_char(&temp,1,12);
;;;267    		*(((char*)(&(ke_date[0])))+1)=temp;
;;;268    		
;;;269    		temp=LPC_RTC->DOM;
;;;270    		gran_char(&temp,1,31);
;;;271    		*(((char*)(&(ke_date[0])))+2)=temp;			
;;;272    				
;;;273    		*(((char*)(&(ke_date[0])))+3)=*((char*)&temp_temp);
;;;274    		lc640_write_long(EE_SPC_KE_DATE0,ke_date[0]);
;;;275    
;;;276    		temp=LPC_RTC->HOUR;
;;;277    		gran_char(&temp,0,23);
;;;278    		*((char*)(&(ke_date[1])))=temp;
;;;279                   
;;;280    		temp=LPC_RTC->MIN;
;;;281    		gran_char(&temp,0,59);
;;;282    		*(((char*)(&(ke_date[1])))+1)=temp;
;;;283    	          
;;;284    		temp=LPC_RTC->SEC;
;;;285    		gran_char(&temp,0,59);
;;;286    		*(((char*)(&(ke_date[1])))+2)=temp;
;;;287    			
;;;288    		*(((char*)(&(ke_date[1])))+3)=*(((char*)&temp_temp)+1);
;;;289    		lc640_write_long(EE_SPC_KE_DATE1,ke_date[1]);
;;;290    		}
;;;291    
;;;292    	}
;;;293    }
000026  8821              LDRH     r1,[r4,#0]  ; adc_self_ch_buff
000028  1a40              SUBS     r0,r0,r1
00002a  b200              SXTH     r0,r0                 ;225
00002c  f7fffffe          BL       abs_pal
000030  80a8              STRH     r0,[r5,#4]            ;227
000032  f44f7196          MOV      r1,#0x12c             ;227
000036  f1a40696          SUB      r6,r4,#0x96           ;227
00003a  4288              CMP      r0,r1                 ;227
00003c  da02              BGE      |L3.68|
00003e  88a0              LDRH     r0,[r4,#4]            ;227  ; adc_self_ch_buff
000040  8570              STRH     r0,[r6,#0x2a]         ;227
000042  e00c              B        |L3.94|
                  |L3.68|
000044  f9b50002          LDRSH    r0,[r5,#2]            ;227  ; adc_self_ch_disp
000048  4288              CMP      r0,r1                 ;227
00004a  da02              BGE      |L3.82|
00004c  8860              LDRH     r0,[r4,#2]            ;228  ; adc_self_ch_buff
00004e  8570              STRH     r0,[r6,#0x2a]         ;228
000050  e005              B        |L3.94|
                  |L3.82|
000052  f9b50000          LDRSH    r0,[r5,#0]            ;228  ; adc_self_ch_disp
000056  4288              CMP      r0,r1                 ;228
000058  da01              BGE      |L3.94|
00005a  8820              LDRH     r0,[r4,#0]  ; adc_self_ch_buff
00005c  8570              STRH     r0,[r6,#0x2a]         ;229
                  |L3.94|
00005e  78b7              LDRB     r7,[r6,#2]            ;229  ; adc_ch_net
000060  2200              MOVS     r2,#0                 ;229
000062  b3f7              CBZ      r7,|L3.226|
000064  7973              LDRB     r3,[r6,#5]            ;229  ; adc_window_flag
000066  4869              LDR      r0,|L3.524|
000068  b18b              CBZ      r3,|L3.142|
00006a  f9b6102a          LDRSH    r1,[r6,#0x2a]         ;230  ; adc_result
00006e  6804              LDR      r4,[r0,#0]            ;230  ; main_power_buffer
000070  eb0404a1          ADD      r4,r4,r1,ASR #2       ;230
000074  6004              STR      r4,[r0,#0]            ;230  ; main_power_buffer
000076  6844              LDR      r4,[r0,#4]            ;230  ; main_power_buffer
000078  eb0404a1          ADD      r4,r4,r1,ASR #2       ;230
00007c  6044              STR      r4,[r0,#4]  ; main_power_buffer
00007e  6884              LDR      r4,[r0,#8]            ;231  ; main_power_buffer
000080  eb0404a1          ADD      r4,r4,r1,ASR #2       ;231
000084  6084              STR      r4,[r0,#8]            ;231  ; main_power_buffer
000086  68c4              LDR      r4,[r0,#0xc]          ;231  ; main_power_buffer
000088  eb0401a1          ADD      r1,r4,r1,ASR #2       ;231
00008c  60c1              STR      r1,[r0,#0xc]          ;223  ; main_power_buffer
                  |L3.142|
00008e  f9b6102a          LDRSH    r1,[r6,#0x2a]         ;232  ; adc_result
000092  2964              CMP      r1,#0x64              ;232
000094  da04              BGE      |L3.160|
000096  8df1              LDRH     r1,[r6,#0x2e]         ;233  ; adc_zero_cnt
000098  f1010101          ADD      r1,r1,#1              ;233
00009c  85f1              STRH     r1,[r6,#0x2e]         ;232
00009e  e000              B        |L3.162|
                  |L3.160|
0000a0  85f2              STRH     r2,[r6,#0x2e]         ;232
                  |L3.162|
0000a2  f9b6402e          LDRSH    r4,[r6,#0x2e]  ; adc_zero_cnt
0000a6  f44f61fa          MOV      r1,#0x7d0             ;233
0000aa  428c              CMP      r4,r1                 ;237
0000ac  db05              BLT      |L3.186|
0000ae  85f1              STRH     r1,[r6,#0x2e]         ;239
0000b0  6002              STR      r2,[r0,#0]            ;240  ; main_power_buffer
0000b2  6042              STR      r2,[r0,#4]            ;240  ; main_power_buffer
0000b4  6082              STR      r2,[r0,#8]            ;241  ; main_power_buffer
0000b6  60c2              STR      r2,[r0,#0xc]          ;241  ; main_power_buffer
0000b8  8532              STRH     r2,[r6,#0x28]         ;241
                  |L3.186|
0000ba  8df1              LDRH     r1,[r6,#0x2e]         ;241  ; adc_zero_cnt
0000bc  2905              CMP      r1,#5                 ;241
0000be  d14f              BNE      |L3.352|
0000c0  b1bb              CBZ      r3,|L3.242|
0000c2  8db1              LDRH     r1,[r6,#0x2c]         ;244  ; adc_gorb_cnt
0000c4  f1010101          ADD      r1,r1,#1              ;245
0000c8  b209              SXTH     r1,r1                 ;245
0000ca  85b1              STRH     r1,[r6,#0x2c]         ;245
0000cc  f5b17f00          CMP      r1,#0x200             ;245
0000d0  db00              BLT      |L3.212|
0000d2  85b2              STRH     r2,[r6,#0x2c]         ;248
                  |L3.212|
0000d4  f9b6102c          LDRSH    r1,[r6,#0x2c]         ;248  ; adc_gorb_cnt
0000d8  064c              LSLS     r4,r1,#25             ;248
0000da  d10a              BNE      |L3.242|
0000dc  ea4f11e1          ASR      r1,r1,#7              ;250
0000e0  e000              B        |L3.228|
                  |L3.226|
0000e2  e015              B        |L3.272|
                  |L3.228|
0000e4  f8504021          LDR      r4,[r0,r1,LSL #2]     ;252
0000e8  ea4f2424          ASR      r4,r4,#8              ;252
0000ec  8534              STRH     r4,[r6,#0x28]         ;259
0000ee  f8402021          STR      r2,[r0,r1,LSL #2]     ;259
                  |L3.242|
0000f2  f9b60030          LDRSH    r0,[r6,#0x30]         ;259  ; adc_window_cnt
0000f6  2896              CMP      r0,#0x96              ;259
0000f8  dd01              BLE      |L3.254|
0000fa  b103              CBZ      r3,|L3.254|
0000fc  7172              STRB     r2,[r6,#5]            ;259
                  |L3.254|
0000fe  381f              SUBS     r0,r0,#0x1f           ;259
000100  2827              CMP      r0,#0x27              ;261
000102  d22d              BCS      |L3.352|
000104  7970              LDRB     r0,[r6,#5]            ;261  ; adc_window_flag
000106  bb58              CBNZ     r0,|L3.352|
000108  f04f0001          MOV      r0,#1                 ;262
00010c  7170              STRB     r0,[r6,#5]            ;262
00010e  e027              B        |L3.352|
                  |L3.272|
000110  483f              LDR      r0,|L3.528|
000112  78f5              LDRB     r5,[r6,#3]            ;262  ; adc_ch
000114  7933              LDRB     r3,[r6,#4]            ;263  ; adc_ch_cnt
000116  eb001485          ADD      r4,r0,r5,LSL #6       ;263
00011a  f9b6102a          LDRSH    r1,[r6,#0x2a]         ;263  ; adc_result
00011e  f8441023          STR      r1,[r4,r3,LSL #2]     ;265
000122  0798              LSLS     r0,r3,#30             ;266
000124  d10f              BNE      |L3.326|
000126  4601              MOV      r1,r0                 ;266
                  |L3.296|
000128  f854c020          LDR      r12,[r4,r0,LSL #2]    ;266
00012c  4461              ADD      r1,r1,r12             ;267
00012e  f1000001          ADD      r0,r0,#1              ;267
000132  b2c0              UXTB     r0,r0                 ;269
000134  2810              CMP      r0,#0x10              ;269
000136  d3f7              BCC      |L3.296|
000138  ea4f1021          ASR      r0,r1,#4              ;270
00013c  4933              LDR      r1,|L3.524|
00013e  f1a10120          SUB      r1,r1,#0x20           ;270
000142  f8210015          STRH     r0,[r1,r5,LSL #1]     ;271
                  |L3.326|
000146  1c6d              ADDS     r5,r5,#1              ;273
000148  b2e8              UXTB     r0,r5                 ;273
00014a  70f0              STRB     r0,[r6,#3]            ;273
00014c  2810              CMP      r0,#0x10              ;274
00014e  d307              BCC      |L3.352|
000150  70f2              STRB     r2,[r6,#3]            ;274
000152  f1030301          ADD      r3,r3,#1              ;274
000156  b2d8              UXTB     r0,r3                 ;276
000158  7130              STRB     r0,[r6,#4]            ;276
00015a  2810              CMP      r0,#0x10              ;277
00015c  d300              BCC      |L3.352|
00015e  7132              STRB     r2,[r6,#4]            ;277
                  |L3.352|
000160  7072              STRB     r2,[r6,#1]            ;277
000162  f1070701          ADD      r7,r7,#1              ;277
000166  f0070001          AND      r0,r7,#1              ;278
00016a  70b0              STRB     r0,[r6,#2]            ;280
00016c  4a29              LDR      r2,|L3.532|
00016e  b130              CBZ      r0,|L3.382|
000170  6810              LDR      r0,[r2,#0]            ;281
000172  f02000ff          BIC      r0,r0,#0xff           ;281
000176  f1000004          ADD      r0,r0,#4              ;281
00017a  6010              STR      r0,[r2,#0]            ;282
00017c  e03d              B        |L3.506|
                  |L3.382|
00017e  78f1              LDRB     r1,[r6,#3]            ;284  ; adc_ch
000180  0708              LSLS     r0,r1,#28             ;284
000182  d406              BMI      |L3.402|
000184  6810              LDR      r0,[r2,#0]            ;285
000186  f02000ff          BIC      r0,r0,#0xff           ;285
00018a  f1000001          ADD      r0,r0,#1              ;285
00018e  6010              STR      r0,[r2,#0]            ;286
000190  e005              B        |L3.414|
                  |L3.402|
000192  6810              LDR      r0,[r2,#0]            ;288
000194  f02000ff          BIC      r0,r0,#0xff           ;288
000198  f1000002          ADD      r0,r0,#2              ;289
00019c  6010              STR      r0,[r2,#0]            ;289
                  |L3.414|
00019e  481e              LDR      r0,|L3.536|
0001a0  6803              LDR      r3,[r0,#0]            ;289
0001a2  f0435380          ORR      r3,r3,#0x10000000
0001a6  6003              STR      r3,[r0,#0]            ;233
0001a8  6a03              LDR      r3,[r0,#0x20]         ;233
0001aa  f0434380          ORR      r3,r3,#0x40000000     ;233
0001ae  6203              STR      r3,[r0,#0x20]
0001b0  6e03              LDR      r3,[r0,#0x60]
0001b2  f0436380          ORR      r3,r3,#0x4000000
0001b6  6603              STR      r3,[r0,#0x60]
0001b8  07cb              LSLS     r3,r1,#31
0001ba  d00a              BEQ      |L3.466|
0001bc  6943              LDR      r3,[r0,#0x14]
0001be  f0435380          ORR      r3,r3,#0x10000000
0001c2  6143              STR      r3,[r0,#0x14]
                  |L3.452|
0001c4  078b              LSLS     r3,r1,#30
0001c6  d409              BMI      |L3.476|
0001c8  6b43              LDR      r3,[r0,#0x34]
0001ca  f0234380          BIC      r3,r3,#0x40000000
0001ce  6343              STR      r3,[r0,#0x34]
0001d0  e008              B        |L3.484|
                  |L3.466|
0001d2  6943              LDR      r3,[r0,#0x14]
0001d4  f0235380          BIC      r3,r3,#0x10000000
0001d8  6143              STR      r3,[r0,#0x14]
0001da  e7f3              B        |L3.452|
                  |L3.476|
0001dc  6b43              LDR      r3,[r0,#0x34]
0001de  f0434380          ORR      r3,r3,#0x40000000
0001e2  6343              STR      r3,[r0,#0x34]
                  |L3.484|
0001e4  0749              LSLS     r1,r1,#29
0001e6  d404              BMI      |L3.498|
0001e8  6f41              LDR      r1,[r0,#0x74]
0001ea  f0216180          BIC      r1,r1,#0x4000000
0001ee  6741              STR      r1,[r0,#0x74]
0001f0  e003              B        |L3.506|
                  |L3.498|
0001f2  6f41              LDR      r1,[r0,#0x74]
0001f4  f0416180          ORR      r1,r1,#0x4000000
0001f8  6741              STR      r1,[r0,#0x74]
                  |L3.506|
0001fa  6810              LDR      r0,[r2,#0]
0001fc  f0407080          ORR      r0,r0,#0x1000000
000200  6010              STR      r0,[r2,#0]
000202  e8bd81f0          POP      {r4-r8,pc}
;;;294    
                          ENDP

000206  0000              DCW      0x0000
                  |L3.520|
                          DCD      ||area_number.21||+0x96
                  |L3.524|
                          DCD      ||.bss||+0x420
                  |L3.528|
                          DCD      ||.bss||
                  |L3.532|
                          DCD      0x40034000
                  |L3.536|
                          DCD      0x2009c000

                          AREA ||area_number.4||, CODE, READONLY, ALIGN=2

                          EXPORTAS ||area_number.4||, ||.text||
                  inv_drv PROC
;;;220    //-----------------------------------------------
;;;221    void ke_start(char in)
000000  b570              PUSH     {r4-r6,lr}
;;;222    {          
000002  4604              MOV      r4,r0
000004  f04f0207          MOV      r2,#7
;;;223    ke_start_stat=(enum_ke_start_stat)0;		 
000008  f04f0101          MOV      r1,#1
00000c  48a4              LDR      r0,|L4.672|
;;;224    
;;;225    if(spc_stat==spcVZ)ke_start_stat=kssNOT_VZ;
00000e  f7fffffe          BL       gran_char
000012  48a4              LDR      r0,|L4.676|
000014  eb040144          ADD      r1,r4,r4,LSL #1
;;;226    else if(BAT_IS_ON[in]!=bisON)ke_start_stat=kssNOT_BAT;
000018  eb001541          ADD      r5,r0,r1,LSL #5
00001c  f8950047          LDRB     r0,[r5,#0x47]
000020  f8951046          LDRB     r1,[r5,#0x46]
000024  ea800001          EOR      r0,r0,r1
;;;227    else if(bat[in]._av&(1<<0))ke_start_stat=kssNOT_BAT_AV;
;;;228    else if(bat[in]._temper_stat&(1<<1))ke_start_stat=kssNOT_BAT_AV_T;
;;;229    else if(bat[in]._av&(1<<1))ke_start_stat=kssNOT_BAT_AV_ASS;
;;;230    else if(bat[in]._Ib>IKB)ke_start_stat=kssNOT_BAT_ZAR;
;;;231    else if(bat[in]._Ib<-IKB)ke_start_stat=kssNOT_BAT_RAZR;
;;;232    else if((spc_stat==spcKE)&&(spc_bat==0))ke_start_stat=kssNOT_KE1;
;;;233    else if((spc_stat==spcKE)&&(spc_bat==1))ke_start_stat=kssNOT_KE2;
;;;234    else 
;;;235    	{
;;;236    
;;;237    	ke_start_stat=kssYES;
;;;238    
;;;239    	spc_stat=spcKE;
;;;240    	__ee_spc_stat=spcKE;
;;;241    	lc640_write_int(EE_SPC_STAT,__ee_spc_stat);
;;;242    	
;;;243    	spc_bat=in;
;;;244    	__ee_spc_bat=in;
;;;245    	lc640_write_int(EE_SPC_BAT,__ee_spc_bat);
;;;246    
;;;247    	bat[in]._zar_cnt_ke=0;
;;;248    	lc640_write_int(ADR_EE_BAT_ZAR_CNT_KE[in],0);
;;;249    	
;;;250    	spc_phase=0;
;;;251    	__ee_spc_phase=0;
;;;252    	lc640_write_int(EE_SPC_PHASE,__ee_spc_phase);
;;;253    
;;;254    	//ke_mem_hndl(in,lc640_read_int(ADR_EE_BAT_ZAR_CNT_KE[spc_bat]));
;;;255    
;;;256    		{					
;;;257    		signed short temp_temp;
;;;258    		signed char temp;
;;;259    		temp_temp=bat[in]._u_old[((bat_u_old_cnt+1)&0x07)]; 
;;;260    		    
;;;261    		temp=LPC_RTC->YEAR;
;;;262    		gran_char(&temp,1,99);
;;;263    		*((char*)(&(ke_date[0])))=temp;
;;;264    			
;;;265    		temp=LPC_RTC->MONTH;
;;;266    		gran_char(&temp,1,12);
;;;267    		*(((char*)(&(ke_date[0])))+1)=temp;
;;;268    		
;;;269    		temp=LPC_RTC->DOM;
;;;270    		gran_char(&temp,1,31);
;;;271    		*(((char*)(&(ke_date[0])))+2)=temp;			
;;;272    				
;;;273    		*(((char*)(&(ke_date[0])))+3)=*((char*)&temp_temp);
;;;274    		lc640_write_long(EE_SPC_KE_DATE0,ke_date[0]);
;;;275    
;;;276    		temp=LPC_RTC->HOUR;
;;;277    		gran_char(&temp,0,23);
;;;278    		*((char*)(&(ke_date[1])))=temp;
;;;279                   
;;;280    		temp=LPC_RTC->MIN;
;;;281    		gran_char(&temp,0,59);
;;;282    		*(((char*)(&(ke_date[1])))+1)=temp;
;;;283    	          
;;;284    		temp=LPC_RTC->SEC;
;;;285    		gran_char(&temp,0,59);
;;;286    		*(((char*)(&(ke_date[1])))+2)=temp;
;;;287    			
;;;288    		*(((char*)(&(ke_date[1])))+3)=*(((char*)&temp_temp)+1);
;;;289    		lc640_write_long(EE_SPC_KE_DATE1,ke_date[1]);
;;;290    		}
;;;291    
;;;292    	}
;;;293    }
000028  4a9f              LDR      r2,|L4.680|
00002a  b100              CBZ      r0,|L4.46|
00002c  7050              STRB     r0,[r2,#1]
                  |L4.46|
00002e  ea010100          AND      r1,r1,r0              ;227
000032  b101              CBZ      r1,|L4.54|
000034  7091              STRB     r1,[r2,#2]            ;227
                  |L4.54|
000036  ea000301          AND      r3,r0,r1              ;227
00003a  07db              LSLS     r3,r3,#31             ;227
00003c  d027              BEQ      |L4.142|
00003e  78d0              LDRB     r0,[r2,#3]            ;227  ; plazma_inv
000040  f1000001          ADD      r0,r0,#1              ;227
000044  70d0              STRB     r0,[r2,#3]            ;227
000046  b134              CBZ      r4,|L4.86|
000048  2c01              CMP      r4,#1                 ;227
00004a  d00b              BEQ      |L4.100|
00004c  2c02              CMP      r4,#2                 ;228
00004e  d010              BEQ      |L4.114|
000050  2c03              CMP      r4,#3                 ;228
000052  d015              BEQ      |L4.128|
000054  e120              B        |L4.664|
                  |L4.86|
000056  2301              MOVS     r3,#1                 ;228
000058  461a              MOV      r2,r3                 ;228
00005a  210e              MOVS     r1,#0xe
00005c  a093              ADR      r0,|L4.684|
00005e  f7fffffe          BL       snmp_trap_send
000062  e119              B        |L4.664|
                  |L4.100|
000064  2301              MOVS     r3,#1                 ;229
000066  2202              MOVS     r2,#2
000068  210e              MOVS     r1,#0xe               ;230
00006a  a097              ADR      r0,|L4.712|
00006c  f7fffffe          BL       snmp_trap_send
000070  e112              B        |L4.664|
                  |L4.114|
000072  2301              MOVS     r3,#1                 ;230
000074  2203              MOVS     r2,#3                 ;230
000076  210e              MOVS     r1,#0xe               ;230
000078  a09a              ADR      r0,|L4.740|
00007a  f7fffffe          BL       snmp_trap_send
00007e  e10b              B        |L4.664|
                  |L4.128|
000080  2301              MOVS     r3,#1                 ;231
000082  2204              MOVS     r2,#4                 ;231
000084  210e              MOVS     r1,#0xe               ;231
000086  a09e              ADR      r0,|L4.768|
000088  f7fffffe          BL       snmp_trap_send
00008c  e104              B        |L4.664|
                  |L4.142|
00008e  0783              LSLS     r3,r0,#30             ;232
000090  d529              BPL      |L4.230|
000092  078b              LSLS     r3,r1,#30             ;232
000094  d527              BPL      |L4.230|
000096  78d0              LDRB     r0,[r2,#3]            ;233  ; plazma_inv
000098  f1000001          ADD      r0,r0,#1              ;233
00009c  70d0              STRB     r0,[r2,#3]            ;232
00009e  b134              CBZ      r4,|L4.174|
0000a0  2c01              CMP      r4,#1                 ;232
0000a2  d00b              BEQ      |L4.188|
0000a4  2c02              CMP      r4,#2                 ;233
0000a6  d010              BEQ      |L4.202|
0000a8  2c03              CMP      r4,#3                 ;237
0000aa  d015              BEQ      |L4.216|
0000ac  e0f4              B        |L4.664|
                  |L4.174|
0000ae  2302              MOVS     r3,#2                 ;239
0000b0  2201              MOVS     r2,#1                 ;240
0000b2  210e              MOVS     r1,#0xe               ;240
0000b4  a099              ADR      r0,|L4.796|
0000b6  f7fffffe          BL       snmp_trap_send
0000ba  e0ed              B        |L4.664|
                  |L4.188|
0000bc  2302              MOVS     r3,#2                 ;241
0000be  461a              MOV      r2,r3                 ;243
0000c0  210e              MOVS     r1,#0xe               ;244
0000c2  a09d              ADR      r0,|L4.824|
0000c4  f7fffffe          BL       snmp_trap_send
0000c8  e0e6              B        |L4.664|
                  |L4.202|
0000ca  2302              MOVS     r3,#2                 ;245
0000cc  2203              MOVS     r2,#3                 ;245
0000ce  210e              MOVS     r1,#0xe               ;247
0000d0  a0a0              ADR      r0,|L4.852|
0000d2  f7fffffe          BL       snmp_trap_send
0000d6  e0df              B        |L4.664|
                  |L4.216|
0000d8  2302              MOVS     r3,#2                 ;248
0000da  2204              MOVS     r2,#4                 ;248
0000dc  210e              MOVS     r1,#0xe               ;250
0000de  a0a4              ADR      r0,|L4.880|
0000e0  f7fffffe          BL       snmp_trap_send
0000e4  e0d8              B        |L4.664|
                  |L4.230|
0000e6  0743              LSLS     r3,r0,#29             ;252
0000e8  d529              BPL      |L4.318|
0000ea  074b              LSLS     r3,r1,#29             ;252
0000ec  d527              BPL      |L4.318|
0000ee  78d0              LDRB     r0,[r2,#3]            ;259  ; plazma_inv
0000f0  f1000001          ADD      r0,r0,#1              ;259
0000f4  70d0              STRB     r0,[r2,#3]            ;259
0000f6  b134              CBZ      r4,|L4.262|
0000f8  2c01              CMP      r4,#1                 ;259
0000fa  d00b              BEQ      |L4.276|
0000fc  2c02              CMP      r4,#2                 ;259
0000fe  d010              BEQ      |L4.290|
000100  2c03              CMP      r4,#3                 ;261
000102  d015              BEQ      |L4.304|
000104  e0c8              B        |L4.664|
                  |L4.262|
000106  2303              MOVS     r3,#3                 ;262
000108  2201              MOVS     r2,#1                 ;262
00010a  210e              MOVS     r1,#0xe               ;262
00010c  a09f              ADR      r0,|L4.908|
00010e  f7fffffe          BL       snmp_trap_send
000112  e0c1              B        |L4.664|
                  |L4.276|
000114  2303              MOVS     r3,#3                 ;263
000116  2202              MOVS     r2,#2                 ;263
000118  210e              MOVS     r1,#0xe               ;263
00011a  a0a3              ADR      r0,|L4.936|
00011c  f7fffffe          BL       snmp_trap_send
000120  e0ba              B        |L4.664|
                  |L4.290|
000122  2303              MOVS     r3,#3                 ;266
000124  461a              MOV      r2,r3                 ;266
000126  210e              MOVS     r1,#0xe               ;266
000128  a0a6              ADR      r0,|L4.964|
00012a  f7fffffe          BL       snmp_trap_send
00012e  e0b3              B        |L4.664|
                  |L4.304|
000130  2303              MOVS     r3,#3                 ;267
000132  2204              MOVS     r2,#4                 ;269
000134  210e              MOVS     r1,#0xe               ;269
000136  a0aa              ADR      r0,|L4.992|
000138  f7fffffe          BL       snmp_trap_send
00013c  e0ac              B        |L4.664|
                  |L4.318|
00013e  0703              LSLS     r3,r0,#28             ;270
000140  d529              BPL      |L4.406|
000142  070b              LSLS     r3,r1,#28             ;271
000144  d527              BPL      |L4.406|
000146  78d0              LDRB     r0,[r2,#3]            ;273  ; plazma_inv
000148  f1000001          ADD      r0,r0,#1              ;273
00014c  70d0              STRB     r0,[r2,#3]            ;274
00014e  b134              CBZ      r4,|L4.350|
000150  2c01              CMP      r4,#1                 ;274
000152  d00b              BEQ      |L4.364|
000154  2c02              CMP      r4,#2                 ;274
000156  d010              BEQ      |L4.378|
000158  2c03              CMP      r4,#3                 ;276
00015a  d015              BEQ      |L4.392|
00015c  e09c              B        |L4.664|
                  |L4.350|
00015e  2304              MOVS     r3,#4                 ;277
000160  2201              MOVS     r2,#1                 ;277
000162  210e              MOVS     r1,#0xe               ;277
000164  a0a5              ADR      r0,|L4.1020|
000166  f7fffffe          BL       snmp_trap_send
00016a  e095              B        |L4.664|
                  |L4.364|
00016c  2304              MOVS     r3,#4                 ;280
00016e  2202              MOVS     r2,#2                 ;281
000170  210e              MOVS     r1,#0xe               ;281
000172  a0ab              ADR      r0,|L4.1056|
000174  f7fffffe          BL       snmp_trap_send
000178  e08e              B        |L4.664|
                  |L4.378|
00017a  2304              MOVS     r3,#4                 ;282
00017c  2203              MOVS     r2,#3                 ;282
00017e  210e              MOVS     r1,#0xe               ;284
000180  a0b0              ADR      r0,|L4.1092|
000182  f7fffffe          BL       snmp_trap_send
000186  e087              B        |L4.664|
                  |L4.392|
000188  2304              MOVS     r3,#4                 ;285
00018a  461a              MOV      r2,r3                 ;285
00018c  210e              MOVS     r1,#0xe               ;286
00018e  a0b6              ADR      r0,|L4.1128|
000190  f7fffffe          BL       snmp_trap_send
000194  e080              B        |L4.664|
                  |L4.406|
000196  06c3              LSLS     r3,r0,#27             ;288
000198  d529              BPL      |L4.494|
00019a  06cb              LSLS     r3,r1,#27             ;289
00019c  d527              BPL      |L4.494|
00019e  78d0              LDRB     r0,[r2,#3]            ;289  ; plazma_inv
0001a0  f1000001          ADD      r0,r0,#1              ;289
0001a4  70d0              STRB     r0,[r2,#3]
0001a6  b134              CBZ      r4,|L4.438|
0001a8  2c01              CMP      r4,#1                 ;233
0001aa  d00b              BEQ      |L4.452|
0001ac  2c02              CMP      r4,#2
0001ae  d010              BEQ      |L4.466|
0001b0  2c03              CMP      r4,#3
0001b2  d015              BEQ      |L4.480|
0001b4  e070              B        |L4.664|
                  |L4.438|
0001b6  2305              MOVS     r3,#5
0001b8  2201              MOVS     r2,#1
0001ba  210e              MOVS     r1,#0xe
0001bc  a0b3              ADR      r0,|L4.1164|
0001be  f7fffffe          BL       snmp_trap_send
0001c2  e069              B        |L4.664|
                  |L4.452|
0001c4  2305              MOVS     r3,#5
0001c6  2202              MOVS     r2,#2
0001c8  210e              MOVS     r1,#0xe
0001ca  a0b9              ADR      r0,|L4.1200|
0001cc  f7fffffe          BL       snmp_trap_send
0001d0  e062              B        |L4.664|
                  |L4.466|
0001d2  2305              MOVS     r3,#5
0001d4  2203              MOVS     r2,#3
0001d6  210e              MOVS     r1,#0xe
0001d8  a0be              ADR      r0,|L4.1236|
0001da  f7fffffe          BL       snmp_trap_send
0001de  e05b              B        |L4.664|
                  |L4.480|
0001e0  2305              MOVS     r3,#5
0001e2  2204              MOVS     r2,#4
0001e4  210e              MOVS     r1,#0xe
0001e6  a0c4              ADR      r0,|L4.1272|
0001e8  f7fffffe          BL       snmp_trap_send
0001ec  e054              B        |L4.664|
                  |L4.494|
0001ee  0683              LSLS     r3,r0,#26
0001f0  d529              BPL      |L4.582|
0001f2  068b              LSLS     r3,r1,#26
0001f4  d527              BPL      |L4.582|
0001f6  78d0              LDRB     r0,[r2,#3]  ; plazma_inv
0001f8  f1000001          ADD      r0,r0,#1
0001fc  70d0              STRB     r0,[r2,#3]
0001fe  b134              CBZ      r4,|L4.526|
000200  2c01              CMP      r4,#1
000202  d00b              BEQ      |L4.540|
000204  2c02              CMP      r4,#2
000206  d010              BEQ      |L4.554|
000208  2c03              CMP      r4,#3
00020a  d015              BEQ      |L4.568|
00020c  e044              B        |L4.664|
                  |L4.526|
00020e  2306              MOVS     r3,#6
000210  2201              MOVS     r2,#1
000212  210e              MOVS     r1,#0xe
000214  a0c1              ADR      r0,|L4.1308|
000216  f7fffffe          BL       snmp_trap_send
00021a  e03d              B        |L4.664|
                  |L4.540|
00021c  2306              MOVS     r3,#6
00021e  2202              MOVS     r2,#2
000220  210e              MOVS     r1,#0xe
000222  a0c7              ADR      r0,|L4.1344|
000224  f7fffffe          BL       snmp_trap_send
000228  e036              B        |L4.664|
                  |L4.554|
00022a  2306              MOVS     r3,#6
00022c  2203              MOVS     r2,#3
00022e  210e              MOVS     r1,#0xe
000230  a0cc              ADR      r0,|L4.1380|
000232  f7fffffe          BL       snmp_trap_send
000236  e02f              B        |L4.664|
                  |L4.568|
000238  2306              MOVS     r3,#6
00023a  2204              MOVS     r2,#4
00023c  210e              MOVS     r1,#0xe
00023e  a0d2              ADR      r0,|L4.1416|
000240  f7fffffe          BL       snmp_trap_send
000244  e028              B        |L4.664|
                  |L4.582|
000246  b300              CBZ      r0,|L4.650|
000248  b9f9              CBNZ     r1,|L4.650|
00024a  78d0              LDRB     r0,[r2,#3]  ; plazma_inv
00024c  f1000001          ADD      r0,r0,#1
000250  70d0              STRB     r0,[r2,#3]
000252  b134              CBZ      r4,|L4.610|
000254  2c01              CMP      r4,#1
000256  d00b              BEQ      |L4.624|
000258  2c02              CMP      r4,#2
00025a  d010              BEQ      |L4.638|
00025c  2c03              CMP      r4,#3
00025e  d015              BEQ      |L4.652|
000260  e01a              B        |L4.664|
                  |L4.610|
000262  2300              MOVS     r3,#0
000264  2201              MOVS     r2,#1
000266  210e              MOVS     r1,#0xe
000268  a0d0              ADR      r0,|L4.1452|
00026a  f7fffffe          BL       snmp_trap_send
00026e  e013              B        |L4.664|
                  |L4.624|
000270  2300              MOVS     r3,#0
000272  2202              MOVS     r2,#2
000274  210e              MOVS     r1,#0xe
000276  a0d2              ADR      r0,|L4.1472|
000278  f7fffffe          BL       snmp_trap_send
00027c  e00c              B        |L4.664|
                  |L4.638|
00027e  2300              MOVS     r3,#0
000280  2203              MOVS     r2,#3
000282  210e              MOVS     r1,#0xe
000284  a0d3              ADR      r0,|L4.1492|
000286  f7fffffe          BL       snmp_trap_send
                  |L4.650|
00028a  e005              B        |L4.664|
                  |L4.652|
00028c  2300              MOVS     r3,#0
00028e  2204              MOVS     r2,#4
000290  210e              MOVS     r1,#0xe
000292  a0d5              ADR      r0,|L4.1512|
000294  f7fffffe          BL       snmp_trap_send
                  |L4.664|
000298  f8150f46          LDRB     r0,[r5,#0x46]!
00029c  7068              STRB     r0,[r5,#1]
00029e  bd70              POP      {r4-r6,pc}
;;;294    
                          ENDP

                  |L4.672|
                          DCD      first_inv_slot
                  |L4.676|
                          DCD      inv
                  |L4.680|
                          DCD      ||area_number.21||+0x8c
                  |L4.684|
0002ac  496e7665          DCB      "Invertor #1 Alarm, overload",0
0002b0  72746f72
0002b4  20233120
0002b8  416c6172
0002bc  6d2c206f
0002c0  7665726c
0002c4  6f616400
                  |L4.712|
0002c8  496e7665          DCB      "Invertor #2 Alarm, overload",0
0002cc  72746f72
0002d0  20233220
0002d4  416c6172
0002d8  6d2c206f
0002dc  7665726c
0002e0  6f616400
                  |L4.740|
0002e4  496e7665          DCB      "Invertor #3 Alarm, overload",0
0002e8  72746f72
0002ec  20233320
0002f0  416c6172
0002f4  6d2c206f
0002f8  7665726c
0002fc  6f616400
                  |L4.768|
000300  496e7665          DCB      "Invertor #4 Alarm, overload",0
000304  72746f72
000308  20233420
00030c  416c6172
000310  6d2c206f
000314  7665726c
000318  6f616400
                  |L4.796|
00031c  496e7665          DCB      "Invertor #1 Alarm, overheat",0
000320  72746f72
000324  20233120
000328  416c6172
00032c  6d2c206f
000330  76657268
000334  65617400
                  |L4.824|
000338  496e7665          DCB      "Invertor #2 Alarm, overheat",0
00033c  72746f72
000340  20233220
000344  416c6172
000348  6d2c206f
00034c  76657268
000350  65617400
                  |L4.852|
000354  496e7665          DCB      "Invertor #3 Alarm, overheat",0
000358  72746f72
00035c  20233320
000360  416c6172
000364  6d2c206f
000368  76657268
00036c  65617400
                  |L4.880|
000370  496e7665          DCB      "Invertor #4 Alarm, overheat",0
000374  72746f72
000378  20233420
00037c  416c6172
000380  6d2c206f
000384  76657268
000388  65617400
                  |L4.908|
00038c  496e7665          DCB      "Invertor #1 Alarm, is warm",0
000390  72746f72
000394  20233120
000398  416c6172
00039c  6d2c2069
0003a0  73207761
0003a4  726d00  
0003a7  00                DCB      0
                  |L4.936|
0003a8  496e7665          DCB      "Invertor #2 Alarm, is warm",0
0003ac  72746f72
0003b0  20233220
0003b4  416c6172
0003b8  6d2c2069
0003bc  73207761
0003c0  726d00  
0003c3  00                DCB      0
                  |L4.964|
0003c4  496e7665          DCB      "Invertor #3 Alarm, is warm",0
0003c8  72746f72
0003cc  20233320
0003d0  416c6172
0003d4  6d2c2069
0003d8  73207761
0003dc  726d00  
0003df  00                DCB      0
                  |L4.992|
0003e0  496e7665          DCB      "Invertor #4 Alarm, is warm",0
0003e4  72746f72
0003e8  20233420
0003ec  416c6172
0003f0  6d2c2069
0003f4  73207761
0003f8  726d00  
0003fb  00                DCB      0
                  |L4.1020|
0003fc  496e7665          DCB      "Invertor #1 Alarm, voltage is up",0
000400  72746f72
000404  20233120
000408  416c6172
00040c  6d2c2076
000410  6f6c7461
000414  67652069
000418  73207570
00041c  00      
00041d  00                DCB      0
00041e  00                DCB      0
00041f  00                DCB      0
                  |L4.1056|
000420  496e7665          DCB      "Invertor #2 Alarm, voltage is up",0
000424  72746f72
000428  20233220
00042c  416c6172
000430  6d2c2076
000434  6f6c7461
000438  67652069
00043c  73207570
000440  00      
000441  00                DCB      0
000442  00                DCB      0
000443  00                DCB      0
                  |L4.1092|
000444  496e7665          DCB      "Invertor #3 Alarm, voltage is up",0
000448  72746f72
00044c  20233320
000450  416c6172
000454  6d2c2076
000458  6f6c7461
00045c  67652069
000460  73207570
000464  00      
000465  00                DCB      0
000466  00                DCB      0
000467  00                DCB      0
                  |L4.1128|
000468  496e7665          DCB      "Invertor #4 Alarm, voltage is up",0
00046c  72746f72
000470  20233420
000474  416c6172
000478  6d2c2076
00047c  6f6c7461
000480  67652069
000484  73207570
000488  00      
000489  00                DCB      0
00048a  00                DCB      0
00048b  00                DCB      0
                  |L4.1164|
00048c  496e7665          DCB      "Invertor #1 Alarm, voltage is down",0
000490  72746f72
000494  20233120
000498  416c6172
00049c  6d2c2076
0004a0  6f6c7461
0004a4  67652069
0004a8  7320646f
0004ac  776e00  
0004af  00                DCB      0
                  |L4.1200|
0004b0  496e7665          DCB      "Invertor #2 Alarm, voltage is down",0
0004b4  72746f72
0004b8  20233220
0004bc  416c6172
0004c0  6d2c2076
0004c4  6f6c7461
0004c8  67652069
0004cc  7320646f
0004d0  776e00  
0004d3  00                DCB      0
                  |L4.1236|
0004d4  496e7665          DCB      "Invertor #3 Alarm, voltage is down",0
0004d8  72746f72
0004dc  20233320
0004e0  416c6172
0004e4  6d2c2076
0004e8  6f6c7461
0004ec  67652069
0004f0  7320646f
0004f4  776e00  
0004f7  00                DCB      0
                  |L4.1272|
0004f8  496e7665          DCB      "Invertor #4 Alarm, voltage is down",0
0004fc  72746f72
000500  20233420
000504  416c6172
000508  6d2c2076
00050c  6f6c7461
000510  67652069
000514  7320646f
000518  776e00  
00051b  00                DCB      0
                  |L4.1308|
00051c  496e7665          DCB      "Invertor #1 Alarm, output is offed",0
000520  72746f72
000524  20233120
000528  416c6172
00052c  6d2c206f
000530  75747075
000534  74206973
000538  206f6666
00053c  656400  
00053f  00                DCB      0
                  |L4.1344|
000540  496e7665          DCB      "Invertor #2 Alarm, output is offed",0
000544  72746f72
000548  20233220
00054c  416c6172
000550  6d2c206f
000554  75747075
000558  74206973
00055c  206f6666
000560  656400  
000563  00                DCB      0
                  |L4.1380|
000564  496e7665          DCB      "Invertor #3 Alarm, output is offed",0
000568  72746f72
00056c  20233320
000570  416c6172
000574  6d2c206f
000578  75747075
00057c  74206973
000580  206f6666
000584  656400  
000587  00                DCB      0
                  |L4.1416|
000588  496e7665          DCB      "Invertor #4 Alarm, output is offed",0
00058c  72746f72
000590  20233420
000594  416c6172
000598  6d2c206f
00059c  75747075
0005a0  74206973
0005a4  206f6666
0005a8  656400  
0005ab  00                DCB      0
                  |L4.1452|
0005ac  496e7665          DCB      "Invertor #1 is norm",0
0005b0  72746f72
0005b4  20233120
0005b8  6973206e
0005bc  6f726d00
                  |L4.1472|
0005c0  496e7665          DCB      "Invertor #2 is norm",0
0005c4  72746f72
0005c8  20233220
0005cc  6973206e
0005d0  6f726d00
                  |L4.1492|
0005d4  496e7665          DCB      "Invertor #3 is norm",0
0005d8  72746f72
0005dc  20233320
0005e0  6973206e
0005e4  6f726d00
                  |L4.1512|
0005e8  496e7665          DCB      "Invertor #4 is norm",0
0005ec  72746f72
0005f0  20233420
0005f4  6973206e
0005f8  6f726d00

                          AREA ||.bss||, DATA, NOINIT, ALIGN=2

                  adc_buff
                          %        1024
                  adc_buff_
                          %        32
                  main_power_buffer
                          %        32

                          AREA ||area_number.7||, DATA, NOINIT, ALIGN=1

                          EXPORTAS ||area_number.7||, ||.bss||
                  adc_buff_max
                          %        24

                          AREA ||area_number.8||, DATA, NOINIT, ALIGN=1

                          EXPORTAS ||area_number.8||, ||.bss||
                  net_buff
                          %        64

                          AREA ||.constdata||, DATA, READONLY, ALIGN=0

                  sk_buff_KONTUR
000000  0d0b0f0e          DCB      0x0d,0x0b,0x0f,0x0e

                          AREA ||area_number.11||, DATA, READONLY, ALIGN=0

                          EXPORTAS ||area_number.11||, ||.constdata||
                  sk_buff_RSTKM
000000  0d0b0f0e          DCB      0x0d,0x0b,0x0f,0x0e

                          AREA ||area_number.12||, DATA, READONLY, ALIGN=0

                          EXPORTAS ||area_number.12||, ||.constdata||
                  sk_buff_GLONASS
000000  0b0d0f0e          DCB      0x0b,0x0d,0x0f,0x0e

                          AREA ||area_number.13||, DATA, READONLY, ALIGN=0

                          EXPORTAS ||area_number.13||, ||.constdata||
                  sk_buff_3U
000000  0b0d0f0e          DCB      0x0b,0x0d,0x0f,0x0e

                          AREA ||area_number.14||, DATA, READONLY, ALIGN=0

                          EXPORTAS ||area_number.14||, ||.constdata||
                  sk_buff_6U
000000  0b0d0f0e          DCB      0x0b,0x0d,0x0f,0x0e

                          AREA ||area_number.15||, DATA, READONLY, ALIGN=0

                          EXPORTAS ||area_number.15||, ||.constdata||
                  sk_buff_220
000000  0b0d0f0e          DCB      0x0b,0x0d,0x0f,0x0e

                          AREA ||area_number.16||, DATA, READONLY, ALIGN=0

                          EXPORTAS ||area_number.16||, ||.constdata||
                  sk_buff_TELECORE2015
000000  0b0d0f0e          DCB      0x0b,0x0d,0x0f,0x0e

                          AREA ||.data||, DATA, ALIGN=1

                  adc_buff_min
000000  13881388          DCW      0x1388,0x1388
000004  13881388          DCW      0x1388,0x1388
000008  13881388          DCW      0x1388,0x1388
00000c  13881388          DCW      0x1388,0x1388
000010  13881388          DCW      0x1388,0x1388
                          DCDU     0x00000000

                          AREA ||area_number.18||, DATA, ALIGN=1

                          EXPORTAS ||area_number.18||, ||.data||
                  unet_buff_min
000000  1388              DCW      0x1388

                          AREA ||area_number.19||, DATA, ALIGN=0

                          EXPORTAS ||area_number.19||, ||.data||
                  adc_stat
000000  01                DCB      0x01

                          AREA ||area_number.20||, DATA, ALIGN=1

                          EXPORTAS ||area_number.20||, ||.data||
                  bat_ver_cnt
000000  0096              DCW      0x0096

                          AREA ||area_number.21||, DATA, ALIGN=2

                          EXPORTAS ||area_number.21||, ||.data||
                  vent_stat
000000  00                DCB      0x00
                  adc_self_ch_cnt
000001  00                DCB      0x00
                  adc_ch_net
000002  00                DCB      0x00
                  adc_ch
000003  00                DCB      0x00
                  adc_ch_cnt
000004  00                DCB      0x00
                  adc_window_flag
000005  00                DCB      0x00
                  ch_cnt0
000006  00                DCB      0x00
                  b1Hz_ch
000007  00                DCB      0x00
                  i
000008  00                DCB      0x00
                  iiii
000009  00                DCB      0x00
                  bAVG
00000a  00                DCB      0x00
                  avg_num
00000b  00                DCB      0x00
                  kb_full_ver
00000c  00                DCB      0x00
                  kb_start_ips
00000d  00                DCB      0x00
                  num_of_wrks_bps
00000e  00                DCB      0x00
                  num_necc_up
00000f  00                DCB      0x00
                  num_necc_down
000010  00                DCB      0x00
                  sh_cnt0
000011  00                DCB      0x00
                  b1Hz_sh
000012  00                DCB      0x00
                  spc_stat
000013  00                DCB      0x00
                  spc_bat
000014  00                DCB      0x00
                  spc_phase
000015  00                DCB      0x00
                  bAVZ
000016  00                DCB      0x00
                  ke_start_stat
000017  00                DCB      0x00
                  numOfForvardBps
000018  00                DCB      0x00
                  numOfForvardBps_old
000019  00                DCB      0x00
                  numOfForvardBps_minCnt
00001a  0000              DCB      0x00,0x00
                  cntrl_stat
00001c  0258              DCW      0x0258
                  cntrl_stat_old
00001e  0258              DCW      0x0258
                  avg_main_cnt
000020  0014              DCW      0x0014
                  ibat_ips
000022  0000              DCB      0x00,0x00
                  ibat_ips_
000024  0000              DCB      0x00,0x00
                  num_necc_block_cnt
000026  0000              DCB      0x00,0x00
                  net_buff_
000028  0000              DCB      0x00,0x00
                  adc_result
00002a  0000              DCB      0x00,0x00
                  adc_gorb_cnt
00002c  0000              DCB      0x00,0x00
                  adc_zero_cnt
00002e  0000              DCB      0x00,0x00
                  adc_window_cnt
000030  0000              DCB      0x00,0x00
                  adc_net_buff_cnt
000032  0000              DCB      0x00,0x00
                  plazma_sk
000034  0000              DCB      0x00,0x00
                  cntrl_stat_new
000036  0000              DCB      0x00,0x00
                  Ibmax
000038  0000              DCB      0x00,0x00
                  IZMAX_
00003a  0000              DCB      0x00,0x00
                  Ubpsmax
00003c  0000              DCB      0x00,0x00
                  samokalibr_cnt
00003e  0000              DCB      0x00,0x00
                  main_kb_cnt
000040  0000              DCB      0x00,0x00
                  kb_cnt_1lev
000042  0000              DCB      0x00,0x00
                  kb_cnt_2lev
000044  0000              DCB      0x00,0x00
                  kb_start
000046  0000              DCB      0x00,0x00
                  bps_on_mask
000048  0000              DCB      0x00,0x00
                  bps_off_mask
00004a  0000              DCB      0x00,0x00
                  vz_cnt_s
00004c  0000              DCB      0x00,0x00
                  vz_cnt_s_
00004e  0000              DCB      0x00,0x00
                  vz_cnt_h
000050  0000              DCB      0x00,0x00
                  vz_cnt_h_
000052  0000              DCB      0x00,0x00
                  cnt_end_ke
000054  0000              DCB      0x00,0x00
                  __ee_vz_cnt
000056  0000              DCB      0x00,0x00
                  __ee_spc_stat
000058  0000              DCB      0x00,0x00
                  __ee_spc_bat
00005a  0000              DCB      0x00,0x00
                  __ee_spc_phase
00005c  0000              DCB      0x00,0x00
                  cntrl_stat_blok_cnt
00005e  0000              DCB      0x00,0x00
                  cntrl_stat_blok_cnt_
000060  0000              DCB      0x00,0x00
                  numOfForvardBps_hourCnt
000062  0000              DCB      0x00,0x00
                  ibat
                          DCD      0x00000000
                  ibat_
                          DCD      0x00000000
                  rem_IP
                          DCD      0x00000000
                  i_avg_max
                          DCD      0x00000000
                  i_avg_min
                          DCD      0x00000000
                  i_avg_summ
                          DCD      0x00000000
                  i_avg
                          DCD      0x00000000
                  avg
                          DCD      0x00000000
                  cntrl_stat_blok_cnt_plus
                          DCD      0x00000000
                  cntrl_stat_blok_cnt_minus
                          DCD      0x00000000
                  plazma_inv
                          DCD      0x00000000
                  net_metr_buff_
                          DCD      0x00000000
000094  0000              DCB      0x00,0x00
                  adc_self_ch_buff
000096  0000              DCB      0x00,0x00
                          DCD      0x00000000
                  adc_self_ch_disp
                          DCD      0x00000000
0000a0  00000000          DCB      0x00,0x00,0x00,0x00
                  ke_date
                          %        8

                          AREA ||area_number.22||, DATA, ALIGN=1

                          EXPORTAS ||area_number.22||, ||.data||
                  unet_buff_max
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.23||, DATA, ALIGN=0

                          EXPORTAS ||area_number.23||, ||.data||
                  adc_cnt
000000  00                DCB      0x00

                          AREA ||area_number.24||, DATA, ALIGN=0

                          EXPORTAS ||area_number.24||, ||.data||
                  adc_cnt1
000000  00                DCB      0x00

                          AREA ||area_number.25||, DATA, ALIGN=1

                          EXPORTAS ||area_number.25||, ||.data||
                  zero_cnt
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.26||, DATA, ALIGN=0

                          EXPORTAS ||area_number.26||, ||.data||
                  net_buff_cnt
000000  00                DCB      0x00

                          AREA ||area_number.27||, DATA, ALIGN=1

                          EXPORTAS ||area_number.27||, ||.data||
                  ADWR
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.28||, DATA, ALIGN=1

                          EXPORTAS ||area_number.28||, ||.data||
                  period_cnt
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.29||, DATA, ALIGN=1

                          EXPORTAS ||area_number.29||, ||.data||
                  non_zero_cnt
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.30||, DATA, ALIGN=0

                          EXPORTAS ||area_number.30||, ||.data||
                  rele_stat
000000  00                DCB      0x00

                          AREA ||area_number.31||, DATA, ALIGN=0

                          EXPORTAS ||area_number.31||, ||.data||
                  bRELE_OUT
000000  00                DCB      0x00

                          AREA ||area_number.32||, DATA, ALIGN=2

                          EXPORTAS ||area_number.32||, ||.data||
                  main_power_buffer_
                          DCD      0x00000000

                          AREA ||area_number.33||, DATA, ALIGN=1

                          EXPORTAS ||area_number.33||, ||.data||
                  main_power_buffer_cnt
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.34||, DATA, ALIGN=1

                          EXPORTAS ||area_number.34||, ||.data||
                  adc_buff_out_
                          DCDU     0x00000000
000004  0000              DCB      0x00,0x00

                          AREA ||area_number.35||, DATA, ALIGN=1

                          EXPORTAS ||area_number.35||, ||.data||
                  plazma_adc_cnt
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.36||, DATA, ALIGN=0

                          EXPORTAS ||area_number.36||, ||.data||
                  unh_cnt0
000000  00                DCB      0x00

                          AREA ||area_number.37||, DATA, ALIGN=0

                          EXPORTAS ||area_number.37||, ||.data||
                  unh_cnt1
000000  00                DCB      0x00

                          AREA ||area_number.38||, DATA, ALIGN=0

                          EXPORTAS ||area_number.38||, ||.data||
                  b1Hz_unh
000000  00                DCB      0x00

                          AREA ||area_number.39||, DATA, ALIGN=0

                          EXPORTAS ||area_number.39||, ||.data||
                  ch_cnt1
000000  00                DCB      0x00

                          AREA ||area_number.40||, DATA, ALIGN=0

                          EXPORTAS ||area_number.40||, ||.data||
                  b1_30Hz_ch
000000  00                DCB      0x00

                          AREA ||area_number.41||, DATA, ALIGN=1

                          EXPORTAS ||area_number.41||, ||.data||
                  cntrl_stat_blck_cnt
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.42||, DATA, ALIGN=0

                          EXPORTAS ||area_number.42||, ||.data||
                  avg_cnt
000000  00                DCB      0x00

                          AREA ||area_number.43||, DATA, ALIGN=0

                          EXPORTAS ||area_number.43||, ||.data||
                  bps_all_off_cnt
000000  00                DCB      0x00

                          AREA ||area_number.44||, DATA, ALIGN=0

                          EXPORTAS ||area_number.44||, ||.data||
                  bps_mask_off_cnt
000000  00                DCB      0x00

                          AREA ||area_number.45||, DATA, ALIGN=0

                          EXPORTAS ||area_number.45||, ||.data||
                  bps_mask_on_off_cnt
000000  00                DCB      0x00

                          AREA ||area_number.46||, DATA, ALIGN=0

                          EXPORTAS ||area_number.46||, ||.data||
                  bps_hndl_2sec_cnt
000000  00                DCB      0x00

                          AREA ||area_number.47||, DATA, ALIGN=0

                          EXPORTAS ||area_number.47||, ||.data||
                  plazma_bat
000000  00                DCB      0x00

                          AREA ||area_number.48||, DATA, ALIGN=0

                          EXPORTAS ||area_number.48||, ||.data||
                  plazma_cntrl_stat
000000  00                DCB      0x00
