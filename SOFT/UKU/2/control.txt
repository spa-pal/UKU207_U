; generated by ARM C/C++ Compiler, 4.1 [Build 644]
; commandline ArmCC [--list --debug -c --asm --interleave -o.\EXE\control.o --asm_dir=.\ --list_dir=.\ --depend=.\EXE\control.d --feedback=.\EXE\UKU_220_IPS_TERMOKOMPENSAT.fed --cpu=Cortex-M3 --apcs=interwork -O1 -IC:\Keil\ARM\CMSIS\Include -IC:\Keil\ARM\INC\NXP\LPC17xx -D__MICROLIB -DUKU_220_IPS_TERMOKOMPENSAT -DUKU2071x --omf_browse=.\EXE\control.crf control.c]
                          THUMB

                          AREA ||.text||, CODE, READONLY, ALIGN=2

                  ke_start PROC
;;;215    //-----------------------------------------------
;;;216    void ke_start(char in)
000000  e92d41fc          PUSH     {r2-r8,lr}
;;;217    {          
000004  4604              MOV      r4,r0
;;;218    ke_start_stat=(enum_ke_start_stat)0;		 
000006  4efe              LDR      r6,|L1.1024|
000008  f04f0700          MOV      r7,#0
00000c  75f7              STRB     r7,[r6,#0x17]
;;;219    
;;;220    if(spc_stat==spcVZ)ke_start_stat=kssNOT_VZ;
00000e  7cf0              LDRB     r0,[r6,#0x13]  ; spc_stat
000010  f04f0301          MOV      r3,#1
000014  2802              CMP      r0,#2
000016  d008              BEQ      |L1.42|
;;;221    else if(BAT_IS_ON[in]!=bisON)ke_start_stat=kssNOT_BAT;
000018  49fa              LDR      r1,|L1.1028|
00001a  5d09              LDRB     r1,[r1,r4]
00001c  2955              CMP      r1,#0x55
00001e  d006              BEQ      |L1.46|
000020  f04f0065          MOV      r0,#0x65
000024  75f0              STRB     r0,[r6,#0x17]
                  |L1.38|
;;;222    else if(bat[in]._av&(1<<0))ke_start_stat=kssNOT_BAT_AV;
;;;223    else if(bat[in]._temper_stat&(1<<1))ke_start_stat=kssNOT_BAT_AV_T;
;;;224    else if(bat[in]._av&(1<<1))ke_start_stat=kssNOT_BAT_AV_ASS;
;;;225    else if(bat[in]._Ib>IKB)ke_start_stat=kssNOT_BAT_ZAR;
;;;226    else if(bat[in]._Ib<-IKB)ke_start_stat=kssNOT_BAT_RAZR;
;;;227    else if((spc_stat==spcKE)&&(spc_bat==0))ke_start_stat=kssNOT_KE1;
;;;228    else if((spc_stat==spcKE)&&(spc_bat==1))ke_start_stat=kssNOT_KE2;
;;;229    else 
;;;230    	{
;;;231    
;;;232    	ke_start_stat=kssYES;
;;;233    
;;;234    	spc_stat=spcKE;
;;;235    	__ee_spc_stat=spcKE;
;;;236    	lc640_write_int(EE_SPC_STAT,__ee_spc_stat);
;;;237    	
;;;238    	spc_bat=in;
;;;239    	__ee_spc_bat=in;
;;;240    	lc640_write_int(EE_SPC_BAT,__ee_spc_bat);
;;;241    
;;;242    	bat[in]._zar_cnt_ke=0;
;;;243    	lc640_write_int(ADR_EE_BAT_ZAR_CNT_KE[in],0);
;;;244    	
;;;245    	spc_phase=0;
;;;246    	__ee_spc_phase=0;
;;;247    	lc640_write_int(EE_SPC_PHASE,__ee_spc_phase);
;;;248    
;;;249    	//ke_mem_hndl(in,lc640_read_int(ADR_EE_BAT_ZAR_CNT_KE[spc_bat]));
;;;250    
;;;251    		{					
;;;252    		signed short temp_temp;
;;;253    		signed char temp;
;;;254    		temp_temp=bat[in]._u_old[((bat_u_old_cnt+1)&0x07)]; 
;;;255    		    
;;;256    		temp=LPC_RTC->YEAR;
;;;257    		gran_char(&temp,1,99);
;;;258    		*((char*)(&(ke_date[0])))=temp;
;;;259    			
;;;260    		temp=LPC_RTC->MONTH;
;;;261    		gran_char(&temp,1,12);
;;;262    		*(((char*)(&(ke_date[0])))+1)=temp;
;;;263    		
;;;264    		temp=LPC_RTC->DOM;
;;;265    		gran_char(&temp,1,31);
;;;266    		*(((char*)(&(ke_date[0])))+2)=temp;			
;;;267    				
;;;268    		*(((char*)(&(ke_date[0])))+3)=*((char*)&temp_temp);
;;;269    		lc640_write_long(EE_SPC_KE_DATE0,ke_date[0]);
;;;270    
;;;271    		temp=LPC_RTC->HOUR;
;;;272    		gran_char(&temp,0,23);
;;;273    		*((char*)(&(ke_date[1])))=temp;
;;;274                   
;;;275    		temp=LPC_RTC->MIN;
;;;276    		gran_char(&temp,0,59);
;;;277    		*(((char*)(&(ke_date[1])))+1)=temp;
;;;278    	          
;;;279    		temp=LPC_RTC->SEC;
;;;280    		gran_char(&temp,0,59);
;;;281    		*(((char*)(&(ke_date[1])))+2)=temp;
;;;282    			
;;;283    		*(((char*)(&(ke_date[1])))+3)=*(((char*)&temp_temp)+1);
;;;284    		lc640_write_long(EE_SPC_KE_DATE1,ke_date[1]);
;;;285    		}
;;;286    
;;;287    	}
;;;288    }
000026  e8bd81fc          POP      {r2-r8,pc}
                  |L1.42|
00002a  75f3              STRB     r3,[r6,#0x17]         ;220
00002c  e7fb              B        |L1.38|
                  |L1.46|
00002e  eb040144          ADD      r1,r4,r4,LSL #1       ;222
000032  eb011204          ADD      r2,r1,r4,LSL #4       ;222
000036  49f4              LDR      r1,|L1.1032|
000038  eb010582          ADD      r5,r1,r2,LSL #2       ;222
00003c  f895103d          LDRB     r1,[r5,#0x3d]         ;222
000040  07ca              LSLS     r2,r1,#31             ;222
000042  d003              BEQ      |L1.76|
000044  f04f0066          MOV      r0,#0x66              ;222
000048  75f0              STRB     r0,[r6,#0x17]         ;222
00004a  e7ec              B        |L1.38|
                  |L1.76|
00004c  f895203f          LDRB     r2,[r5,#0x3f]         ;223
000050  0792              LSLS     r2,r2,#30             ;223
000052  d503              BPL      |L1.92|
000054  f04f0067          MOV      r0,#0x67              ;223
000058  75f0              STRB     r0,[r6,#0x17]         ;223
00005a  e7e4              B        |L1.38|
                  |L1.92|
00005c  0789              LSLS     r1,r1,#30             ;224
00005e  d503              BPL      |L1.104|
000060  f04f0068          MOV      r0,#0x68              ;224
000064  75f0              STRB     r0,[r6,#0x17]         ;224
000066  e7de              B        |L1.38|
                  |L1.104|
000068  4ae8              LDR      r2,|L1.1036|
00006a  f9b51008          LDRSH    r1,[r5,#8]            ;225
00006e  f9b22000          LDRSH    r2,[r2,#0]            ;225  ; IKB
000072  4291              CMP      r1,r2                 ;225
000074  dd03              BLE      |L1.126|
000076  f04f0069          MOV      r0,#0x69              ;225
00007a  75f0              STRB     r0,[r6,#0x17]         ;225
00007c  e7d3              B        |L1.38|
                  |L1.126|
00007e  4252              RSBS     r2,r2,#0              ;226
000080  4291              CMP      r1,r2                 ;226
000082  da03              BGE      |L1.140|
000084  f04f006a          MOV      r0,#0x6a              ;226
000088  75f0              STRB     r0,[r6,#0x17]         ;226
00008a  e7cc              B        |L1.38|
                  |L1.140|
00008c  49dc              LDR      r1,|L1.1024|
00008e  2801              CMP      r0,#1                 ;227
000090  7d09              LDRB     r1,[r1,#0x14]         ;227
000092  d100              BNE      |L1.150|
000094  b111              CBZ      r1,|L1.156|
                  |L1.150|
000096  2801              CMP      r0,#1                 ;228
000098  d004              BEQ      |L1.164|
00009a  e005              B        |L1.168|
                  |L1.156|
00009c  f04f006b          MOV      r0,#0x6b              ;227
0000a0  75f0              STRB     r0,[r6,#0x17]         ;227
0000a2  e7c0              B        |L1.38|
                  |L1.164|
0000a4  2901              CMP      r1,#1                 ;228
0000a6  d07e              BEQ      |L1.422|
                  |L1.168|
0000a8  f04f0064          MOV      r0,#0x64              ;232
0000ac  75f0              STRB     r0,[r6,#0x17]         ;232
0000ae  74f3              STRB     r3,[r6,#0x13]         ;234
0000b0  f8a63054          STRH     r3,[r6,#0x54]         ;235
0000b4  4619              MOV      r1,r3                 ;236
0000b6  f44f70f8          MOV      r0,#0x1f0             ;236
0000ba  f7fffffe          BL       lc640_write_int
0000be  7534              STRB     r4,[r6,#0x14]         ;238
0000c0  f8a64056          STRH     r4,[r6,#0x56]         ;239
0000c4  4621              MOV      r1,r4                 ;240
0000c6  f44f70fa          MOV      r0,#0x1f4             ;240
0000ca  f7fffffe          BL       lc640_write_int
0000ce  61af              STR      r7,[r5,#0x18]         ;242
0000d0  48cf              LDR      r0,|L1.1040|
0000d2  2100              MOVS     r1,#0                 ;243
0000d4  f9300014          LDRSH    r0,[r0,r4,LSL #1]     ;243
0000d8  f7fffffe          BL       lc640_write_int
0000dc  7577              STRB     r7,[r6,#0x15]         ;245
0000de  f8a67058          STRH     r7,[r6,#0x58]         ;246
0000e2  4639              MOV      r1,r7                 ;247
0000e4  f44f70fb          MOV      r0,#0x1f6             ;247
0000e8  f7fffffe          BL       lc640_write_int
0000ec  48c9              LDR      r0,|L1.1044|
0000ee  8800              LDRH     r0,[r0,#0]            ;254  ; bat_u_old_cnt
0000f0  f1000001          ADD      r0,r0,#1              ;254
0000f4  f0000007          AND      r0,r0,#7              ;254
0000f8  eb050040          ADD      r0,r5,r0,LSL #1       ;254
0000fc  8c00              LDRH     r0,[r0,#0x20]         ;254
0000fe  9001              STR      r0,[sp,#4]            ;254
000100  4dc5              LDR      r5,|L1.1048|
000102  8ba8              LDRH     r0,[r5,#0x1c]         ;256
000104  9000              STR      r0,[sp,#0]            ;256
000106  f04f0263          MOV      r2,#0x63              ;257
00010a  f04f0101          MOV      r1,#1                 ;257
00010e  4668              MOV      r0,sp                 ;257
000110  f7fffffe          BL       gran_char
000114  4cba              LDR      r4,|L1.1024|
000116  f89d0000          LDRB     r0,[sp,#0]            ;258
00011a  349c              ADDS     r4,r4,#0x9c           ;258
00011c  7020              STRB     r0,[r4,#0]            ;258
00011e  7e28              LDRB     r0,[r5,#0x18]         ;260
000120  9000              STR      r0,[sp,#0]            ;260
000122  220c              MOVS     r2,#0xc               ;261
000124  2101              MOVS     r1,#1                 ;261
000126  4668              MOV      r0,sp                 ;261
000128  f7fffffe          BL       gran_char
00012c  f89d0000          LDRB     r0,[sp,#0]            ;262
000130  7060              STRB     r0,[r4,#1]            ;262
000132  7b28              LDRB     r0,[r5,#0xc]          ;264
000134  9000              STR      r0,[sp,#0]            ;264
000136  221f              MOVS     r2,#0x1f              ;265
000138  2101              MOVS     r1,#1                 ;265
00013a  4668              MOV      r0,sp                 ;265
00013c  f7fffffe          BL       gran_char
000140  f89d0000          LDRB     r0,[sp,#0]            ;266
000144  70a0              STRB     r0,[r4,#2]            ;266
000146  f89d0004          LDRB     r0,[sp,#4]            ;268
00014a  70e0              STRB     r0,[r4,#3]            ;268
00014c  f44f70fc          MOV      r0,#0x1f8             ;269
000150  6821              LDR      r1,[r4,#0]            ;269  ; ke_date
000152  f7fffffe          BL       lc640_write_long
000156  7a28              LDRB     r0,[r5,#8]            ;271
000158  9000              STR      r0,[sp,#0]            ;271
00015a  2217              MOVS     r2,#0x17              ;272
00015c  2100              MOVS     r1,#0                 ;272
00015e  4668              MOV      r0,sp                 ;272
000160  f7fffffe          BL       gran_char
000164  f89d0000          LDRB     r0,[sp,#0]            ;273
000168  7120              STRB     r0,[r4,#4]            ;273
00016a  7928              LDRB     r0,[r5,#4]            ;275
00016c  9000              STR      r0,[sp,#0]            ;275
00016e  223b              MOVS     r2,#0x3b              ;276
000170  2100              MOVS     r1,#0                 ;276
000172  4668              MOV      r0,sp                 ;276
000174  f7fffffe          BL       gran_char
000178  f89d0000          LDRB     r0,[sp,#0]            ;277
00017c  7160              STRB     r0,[r4,#5]            ;277
00017e  7828              LDRB     r0,[r5,#0]            ;279
000180  9000              STR      r0,[sp,#0]            ;279
000182  223b              MOVS     r2,#0x3b              ;280
000184  2100              MOVS     r1,#0                 ;280
000186  4668              MOV      r0,sp                 ;280
000188  f7fffffe          BL       gran_char
00018c  f89d0000          LDRB     r0,[sp,#0]            ;281
000190  71a0              STRB     r0,[r4,#6]            ;281
000192  f89d0005          LDRB     r0,[sp,#5]            ;283
000196  71e0              STRB     r0,[r4,#7]            ;283
000198  f44f70fe          MOV      r0,#0x1fc             ;284
00019c  6861              LDR      r1,[r4,#4]            ;284  ; ke_date
00019e  f7fffffe          BL       lc640_write_long
0001a2  e740              B        |L1.38|
0001a4  e7ff              B        |L1.422|
                  |L1.422|
0001a6  f04f006c          MOV      r0,#0x6c              ;228
0001aa  75f0              STRB     r0,[r6,#0x17]         ;228
0001ac  e73b              B        |L1.38|
;;;289    
                          ENDP

                  ke_drv PROC
;;;290    //-----------------------------------------------
;;;291    void ke_drv(void)
0001ae  e92d47f0          PUSH     {r4-r10,lr}
;;;292    {
;;;293    
;;;294    if(spc_stat==spcKE)
0001b2  4c93              LDR      r4,|L1.1024|
0001b4  7ce0              LDRB     r0,[r4,#0x13]  ; spc_stat
0001b6  2801              CMP      r0,#1
0001b8  d17d              BNE      |L1.694|
0001ba  4621              MOV      r1,r4
0001bc  2601              MOVS     r6,#1
;;;295    	{
;;;296    	if(spc_phase==0)
;;;297    		{
;;;298    		mess_send(MESS2BAT_HNDL,PARAM_BAT_MASK_OFF_AFTER_2SEC,(1<<(1-spc_bat)),20);
0001be  7d09              LDRB     r1,[r1,#0x14]
0001c0  7d60              LDRB     r0,[r4,#0x15]         ;296  ; spc_phase
0001c2  f1c10201          RSB      r2,r1,#1
0001c6  fa06f102          LSL      r1,r6,r2
;;;299    		mess_send(MESS2BPS_HNDL,PARAM_BPS_ALL_OFF_AFTER_2SEC,0xffff,20);
;;;300    
;;;301    		bat[spc_bat]._zar_cnt_ke+=abs(bat[spc_bat]._Ib);
;;;302    	    	
;;;303    		if(bat[spc_bat]._zar_cnt_ke>=AH_CONSTANT)
;;;304    			{
;;;305    			bat[spc_bat]._zar_cnt_ke-=AH_CONSTANT;
;;;306    			lc640_write_int(ADR_EE_BAT_ZAR_CNT_KE[spc_bat],lc640_read_int(ADR_EE_BAT_ZAR_CNT_KE[spc_bat])+1);
0001ca  4f91              LDR      r7,|L1.1040|
0001cc  4d8e              LDR      r5,|L1.1032|
0001ce  b20a              SXTH     r2,r1                 ;298
0001d0  b110              CBZ      r0,|L1.472|
;;;307    			}
;;;308    		}
;;;309    
;;;310    	else if(spc_phase==1)
0001d2  2801              CMP      r0,#1
0001d4  d034              BEQ      |L1.576|
0001d6  e038              B        |L1.586|
                  |L1.472|
0001d8  2314              MOVS     r3,#0x14              ;298
0001da  21ca              MOVS     r1,#0xca              ;298
0001dc  20c8              MOVS     r0,#0xc8              ;298
0001de  f7fffffe          BL       mess_send
0001e2  2314              MOVS     r3,#0x14              ;299
0001e4  f04f32ff          MOV      r2,#0xffffffff        ;299
0001e8  21ce              MOVS     r1,#0xce              ;299
0001ea  20cd              MOVS     r0,#0xcd              ;299
0001ec  f7fffffe          BL       mess_send
0001f0  7d20              LDRB     r0,[r4,#0x14]         ;301  ; spc_bat
0001f2  eb000140          ADD      r1,r0,r0,LSL #1       ;301
0001f6  eb011000          ADD      r0,r1,r0,LSL #4       ;301
0001fa  eb050080          ADD      r0,r5,r0,LSL #2       ;301
0001fe  f9b00008          LDRSH    r0,[r0,#8]            ;301
000202  f7fffffe          BL       abs
000206  7d21              LDRB     r1,[r4,#0x14]         ;301  ; spc_bat
000208  eb010241          ADD      r2,r1,r1,LSL #1       ;301
00020c  eb021201          ADD      r2,r2,r1,LSL #4       ;301
000210  eb050282          ADD      r2,r5,r2,LSL #2       ;301
000214  6993              LDR      r3,[r2,#0x18]         ;301
000216  4418              ADD      r0,r0,r3              ;301
000218  6190              STR      r0,[r2,#0x18]         ;301
00021a  f64843a0          MOV      r3,#0x8ca0            ;303
00021e  4298              CMP      r0,r3                 ;303
000220  db13              BLT      |L1.586|
000222  eba00003          SUB      r0,r0,r3              ;305
000226  6190              STR      r0,[r2,#0x18]         ;305
000228  f8370011          LDRH     r0,[r7,r1,LSL #1]     ;306
00022c  f7fffffe          BL       lc640_read_int
000230  1c40              ADDS     r0,r0,#1              ;306
000232  b201              SXTH     r1,r0                 ;306
000234  7d20              LDRB     r0,[r4,#0x14]         ;306  ; spc_bat
000236  f9370010          LDRSH    r0,[r7,r0,LSL #1]     ;306
00023a  f7fffffe          BL       lc640_write_int
00023e  e004              B        |L1.586|
                  |L1.576|
;;;311    		{
;;;312    		mess_send(MESS2BAT_HNDL,PARAM_BAT_MASK_OFF_AFTER_2SEC,(1<<(1-spc_bat)),20);
000240  2314              MOVS     r3,#0x14
000242  21ca              MOVS     r1,#0xca
000244  20c8              MOVS     r0,#0xc8
000246  f7fffffe          BL       mess_send
                  |L1.586|
;;;313    		}
;;;314    
;;;315    	if(bat[spc_bat]._Ub<(USIGN*10))
00024a  7d21              LDRB     r1,[r4,#0x14]  ; spc_bat
;;;316    		{
;;;317    		cnt_end_ke++;
;;;318    		if(cnt_end_ke>=30)
;;;319    			{
;;;320    			
;;;321    			if((spc_stat==spcKE)&&(spc_phase==0))
;;;322    				{
;;;323    				lc640_write_int(ADR_EE_BAT_C_REAL[spc_bat],lc640_read_int(ADR_EE_BAT_ZAR_CNT_KE[spc_bat]));
;;;324    				ke_mem_hndl(spc_bat,lc640_read_int(ADR_EE_BAT_ZAR_CNT_KE[spc_bat]));
;;;325    				lc640_write_int(ADR_EE_BAT_ZAR_CNT[spc_bat],0);
;;;326    				cntrl_stat=50;
;;;327    				cntrl_stat_old=50;
;;;328    				}
;;;329    
;;;330    			if((BAT_IS_ON[1-spc_bat]) == bisON)
;;;331    				{
;;;332    				spc_phase=1;
;;;333    				__ee_spc_phase=1;
;;;334    				lc640_write_int(EE_SPC_PHASE,1);
;;;335    				}			
;;;336    			else
;;;337    				{
;;;338    				spc_stat=spcOFF;
;;;339    				__ee_spc_stat=spcOFF;
;;;340    				lc640_write_int(EE_SPC_STAT,spcOFF);
00024c  f44f79f8          MOV      r9,#0x1f0
000250  eb010041          ADD      r0,r1,r1,LSL #1       ;315
000254  eb001001          ADD      r0,r0,r1,LSL #4       ;315
000258  eb050080          ADD      r0,r5,r0,LSL #2       ;315
00025c  f04f0800          MOV      r8,#0                 ;296
000260  f9b02002          LDRSH    r2,[r0,#2]            ;315
000264  486d              LDR      r0,|L1.1052|
000266  f9b00000          LDRSH    r0,[r0,#0]            ;315  ; USIGN
00026a  eb000080          ADD      r0,r0,r0,LSL #2       ;315
00026e  ebb20f40          CMP      r2,r0,LSL #1          ;315
000272  da47              BGE      |L1.772|
000274  f8b40050          LDRH     r0,[r4,#0x50]         ;317  ; cnt_end_ke
000278  f1000001          ADD      r0,r0,#1              ;317
00027c  b200              SXTH     r0,r0                 ;317
00027e  f8a40050          STRH     r0,[r4,#0x50]         ;317
000282  281e              CMP      r0,#0x1e              ;318
000284  db40              BLT      |L1.776|
000286  7ce0              LDRB     r0,[r4,#0x13]         ;321  ; spc_stat
000288  2801              CMP      r0,#1                 ;321
00028a  d122              BNE      |L1.722|
00028c  7d60              LDRB     r0,[r4,#0x15]         ;321  ; spc_phase
00028e  bb00              CBNZ     r0,|L1.722|
000290  f8370011          LDRH     r0,[r7,r1,LSL #1]     ;323
000294  f7fffffe          BL       lc640_read_int
000298  b201              SXTH     r1,r0                 ;323
00029a  4861              LDR      r0,|L1.1056|
00029c  7d22              LDRB     r2,[r4,#0x14]         ;323  ; spc_bat
00029e  f9300012          LDRSH    r0,[r0,r2,LSL #1]     ;323
0002a2  f7fffffe          BL       lc640_write_int
0002a6  7d20              LDRB     r0,[r4,#0x14]         ;324  ; spc_bat
0002a8  f8370010          LDRH     r0,[r7,r0,LSL #1]     ;324
0002ac  f7fffffe          BL       lc640_read_int
0002b0  b281              UXTH     r1,r0                 ;324
0002b2  7d20              LDRB     r0,[r4,#0x14]         ;324  ; spc_bat
0002b4  e000              B        |L1.696|
                  |L1.694|
0002b6  e049              B        |L1.844|
                  |L1.696|
0002b8  f7fffffe          BL       ke_mem_hndl
0002bc  4859              LDR      r0,|L1.1060|
0002be  7d21              LDRB     r1,[r4,#0x14]         ;325  ; spc_bat
0002c0  f9300011          LDRSH    r0,[r0,r1,LSL #1]     ;325
0002c4  2100              MOVS     r1,#0                 ;325
0002c6  f7fffffe          BL       lc640_write_int
0002ca  f04f0032          MOV      r0,#0x32              ;326
0002ce  8360              STRH     r0,[r4,#0x1a]         ;326
0002d0  83a0              STRH     r0,[r4,#0x1c]         ;327
                  |L1.722|
0002d2  7d20              LDRB     r0,[r4,#0x14]         ;330  ; spc_bat
0002d4  494b              LDR      r1,|L1.1028|
0002d6  f1c00001          RSB      r0,r0,#1              ;330
0002da  5c08              LDRB     r0,[r1,r0]            ;330
0002dc  2855              CMP      r0,#0x55              ;330
0002de  d008              BEQ      |L1.754|
0002e0  f8848013          STRB     r8,[r4,#0x13]         ;338
0002e4  f8a48054          STRH     r8,[r4,#0x54]         ;339
0002e8  2100              MOVS     r1,#0
0002ea  4648              MOV      r0,r9
0002ec  f7fffffe          BL       lc640_write_int
0002f0  e00a              B        |L1.776|
                  |L1.754|
0002f2  7566              STRB     r6,[r4,#0x15]         ;332
0002f4  f8a46058          STRH     r6,[r4,#0x58]         ;333
0002f8  2101              MOVS     r1,#1                 ;334
0002fa  f44f70fb          MOV      r0,#0x1f6             ;334
0002fe  f7fffffe          BL       lc640_write_int
000302  e001              B        |L1.776|
                  |L1.772|
;;;341    				}
;;;342    			}
;;;343    		}
;;;344    	else cnt_end_ke=0;
000304  f8a48050          STRH     r8,[r4,#0x50]
                  |L1.776|
;;;345    
;;;346    	if((bat[spc_bat]._Ub>=bat[1-spc_bat]._Ub)&&(spc_phase==1))
000308  7d21              LDRB     r1,[r4,#0x14]  ; spc_bat
00030a  eb010041          ADD      r0,r1,r1,LSL #1
00030e  eb001001          ADD      r0,r0,r1,LSL #4
000312  eb050080          ADD      r0,r5,r0,LSL #2
000316  f9b02002          LDRSH    r2,[r0,#2]
00031a  f1c10001          RSB      r0,r1,#1
00031e  eb000140          ADD      r1,r0,r0,LSL #1
000322  eb011000          ADD      r0,r1,r0,LSL #4
000326  eb050080          ADD      r0,r5,r0,LSL #2
00032a  f9b00002          LDRSH    r0,[r0,#2]
00032e  4282              CMP      r2,r0
000330  db0c              BLT      |L1.844|
000332  7d60              LDRB     r0,[r4,#0x15]  ; spc_phase
000334  2801              CMP      r0,#1
000336  d109              BNE      |L1.844|
;;;347    		{
;;;348    		spc_stat=spcOFF;
000338  f8848013          STRB     r8,[r4,#0x13]
;;;349    		__ee_spc_stat=spcOFF;
00033c  f8a48054          STRH     r8,[r4,#0x54]
;;;350    		lc640_write_int(EE_SPC_STAT,spcOFF);
000340  4648              MOV      r0,r9
000342  e8bd47f0          POP      {r4-r10,lr}
000346  2100              MOVS     r1,#0
000348  f7ffbffe          B.W      lc640_write_int
                  |L1.844|
;;;351    		}
;;;352    	}
;;;353    			
;;;354    }
00034c  e8bd87f0          POP      {r4-r10,pc}
;;;355    
                          ENDP

                  vz_start PROC
;;;356    //-----------------------------------------------
;;;357    char vz_start(char hour)
000350  b570              PUSH     {r4-r6,lr}
;;;358    {          
000352  4605              MOV      r5,r0
;;;359    char out;
;;;360    out=0;
000354  f04f0600          MOV      r6,#0
;;;361    if(spc_stat==spcOFF)
000358  4c29              LDR      r4,|L1.1024|
00035a  7ce0              LDRB     r0,[r4,#0x13]  ; spc_stat
00035c  bb18              CBNZ     r0,|L1.934|
;;;362    	{
;;;363    	spc_stat=spcVZ;
00035e  f1040416          ADD      r4,r4,#0x16
000362  f04f0102          MOV      r1,#2
000366  f8041c03          STRB     r1,[r4,#-3]
;;;364    	__ee_spc_stat=spcVZ; 
00036a  87e1              STRH     r1,[r4,#0x3e]
;;;365    	lc640_write_int(EE_SPC_STAT,__ee_spc_stat);   
00036c  f44f70f8          MOV      r0,#0x1f0
000370  f7fffffe          BL       lc640_write_int
;;;366    	vz_cnt_h=hour;
000374  86e5              STRH     r5,[r4,#0x36]
;;;367    	__ee_vz_cnt=hour*60;
000376  ebc51005          RSB      r0,r5,r5,LSL #4
00037a  ea4f0180          LSL      r1,r0,#2
00037e  460d              MOV      r5,r1
000380  87a1              STRH     r1,[r4,#0x3c]
;;;368    	lc640_write_int(EE_VZ_CNT,__ee_vz_cnt);
000382  f44f70f9          MOV      r0,#0x1f2
000386  f7fffffe          BL       lc640_write_int
;;;369    	lc640_write_int(EE_SPC_VZ_LENGT,hour*60);	
00038a  4629              MOV      r1,r5
00038c  f44f70ff          MOV      r0,#0x1fe
000390  f7fffffe          BL       lc640_write_int
;;;370    	vz_cnt_h_=0;
000394  4630              MOV      r0,r6
000396  8720              STRH     r0,[r4,#0x38]
;;;371    	vz_cnt_s=0;
000398  8660              STRH     r0,[r4,#0x32]
;;;372    	out=1;
00039a  f04f0601          MOV      r6,#1
;;;373    	vz_mem_hndl(1);
00039e  f04f0001          MOV      r0,#1
0003a2  f7fffffe          BL       vz_mem_hndl
                  |L1.934|
;;;374    	}
;;;375    //else if((spc_stat==spc_KE1p1)||(spc_stat==spc_KE1p2)) out=22; 
;;;376    //else if((spc_stat==spc_KE2p1)||(spc_stat==spc_KE2p2)) out=33;
;;;377    //plazma=out;	
;;;378    return out;
0003a6  4630              MOV      r0,r6
;;;379    }
0003a8  bd70              POP      {r4-r6,pc}
;;;380    
                          ENDP

                  vz_stop PROC
;;;381    //-----------------------------------------------
;;;382    void vz_stop(void)
0003aa  b510              PUSH     {r4,lr}
;;;383    {
;;;384    if(spc_stat==spcVZ)
0003ac  4c14              LDR      r4,|L1.1024|
0003ae  7ce0              LDRB     r0,[r4,#0x13]  ; spc_stat
0003b0  2802              CMP      r0,#2
0003b2  d113              BNE      |L1.988|
;;;385         {
;;;386    vz_mem_hndl(vz_cnt_h);          
0003b4  f1040412          ADD      r4,r4,#0x12
0003b8  8f60              LDRH     r0,[r4,#0x3a]  ; vz_cnt_h
0003ba  f7fffffe          BL       vz_mem_hndl
;;;387    vz_cnt_s=0;
0003be  f04f0000          MOV      r0,#0
0003c2  86e0              STRH     r0,[r4,#0x36]
;;;388    vz_cnt_h=0;
0003c4  8760              STRH     r0,[r4,#0x3a]
;;;389    vz_cnt_h_=0;
0003c6  87a0              STRH     r0,[r4,#0x3c]
;;;390    spc_stat=spcOFF;
0003c8  7060              STRB     r0,[r4,#1]
;;;391    
;;;392    		__ee_spc_stat=spcOFF;
0003ca  f8a40042          STRH     r0,[r4,#0x42]
;;;393    		lc640_write_int(EE_SPC_STAT,spcOFF);
0003ce  4601              MOV      r1,r0
0003d0  e8bd4010          POP      {r4,lr}
0003d4  f44f70f8          MOV      r0,#0x1f0
0003d8  f7ffbffe          B.W      lc640_write_int
                  |L1.988|
;;;394         }
;;;395    
;;;396    }
0003dc  bd10              POP      {r4,pc}
;;;397    
                          ENDP

                  avz_next_date_hndl PROC
;;;398    //-----------------------------------------------
;;;399    void avz_next_date_hndl(void)
0003de  b570              PUSH     {r4-r6,lr}
;;;400    {
;;;401    if((LPC_RTC->MONTH+AVZ)>12)lc640_write_int(EE_YEAR_AVZ,LPC_RTC->YEAR+1);
0003e0  4c0d              LDR      r4,|L1.1048|
0003e2  3c20              SUBS     r4,r4,#0x20
0003e4  f8940038          LDRB     r0,[r4,#0x38]
0003e8  4d0f              LDR      r5,|L1.1064|
0003ea  7829              LDRB     r1,[r5,#0]  ; AVZ
0003ec  4408              ADD      r0,r0,r1
0003ee  280c              CMP      r0,#0xc
0003f0  d91c              BLS      |L1.1068|
0003f2  8fa0              LDRH     r0,[r4,#0x3c]
0003f4  1c40              ADDS     r0,r0,#1
0003f6  b201              SXTH     r1,r0
0003f8  20b8              MOVS     r0,#0xb8
0003fa  f7fffffe          BL       lc640_write_int
0003fe  e01a              B        |L1.1078|
                  |L1.1024|
                          DCD      ||area_number.21||
                  |L1.1028|
                          DCD      BAT_IS_ON
                  |L1.1032|
                          DCD      bat
                  |L1.1036|
                          DCD      IKB
                  |L1.1040|
                          DCD      ADR_EE_BAT_ZAR_CNT_KE
                  |L1.1044|
                          DCD      bat_u_old_cnt
                  |L1.1048|
                          DCD      0x40024020
                  |L1.1052|
                          DCD      USIGN
                  |L1.1056|
                          DCD      ADR_EE_BAT_C_REAL
                  |L1.1060|
                          DCD      ADR_EE_BAT_ZAR_CNT
                  |L1.1064|
                          DCD      AVZ
                  |L1.1068|
;;;402    else lc640_write_int(EE_YEAR_AVZ,LPC_RTC->YEAR);
00042c  f9b4103c          LDRSH    r1,[r4,#0x3c]
000430  20b8              MOVS     r0,#0xb8
000432  f7fffffe          BL       lc640_write_int
                  |L1.1078|
;;;403    
;;;404    //lc640_write_int(EE_YEAR_AVZ,6);
;;;405    
;;;406    if((LPC_RTC->MONTH+AVZ)>12)lc640_write_int(EE_MONTH_AVZ,(LPC_RTC->MONTH+AVZ)-12);
000436  f8941038          LDRB     r1,[r4,#0x38]
00043a  7828              LDRB     r0,[r5,#0]  ; AVZ
00043c  4401              ADD      r1,r1,r0
00043e  290c              CMP      r1,#0xc
000440  d907              BLS      |L1.1106|
000442  f8941038          LDRB     r1,[r4,#0x38]
000446  380c              SUBS     r0,r0,#0xc
000448  4401              ADD      r1,r1,r0
00044a  20b6              MOVS     r0,#0xb6
00044c  f7fffffe          BL       lc640_write_int
000450  e005              B        |L1.1118|
                  |L1.1106|
;;;407    else lc640_write_int(EE_MONTH_AVZ,LPC_RTC->MONTH+AVZ);                                                 
000452  f8941038          LDRB     r1,[r4,#0x38]
000456  4401              ADD      r1,r1,r0
000458  20b6              MOVS     r0,#0xb6
00045a  f7fffffe          BL       lc640_write_int
                  |L1.1118|
;;;408    
;;;409    //lc640_write_int(EE_MONTH_AVZ,5);
;;;410    
;;;411    if(LPC_RTC->DOM>28) lc640_write_int(EE_DATE_AVZ,28);
00045e  f894002c          LDRB     r0,[r4,#0x2c]
000462  281c              CMP      r0,#0x1c
000464  d904              BLS      |L1.1136|
000466  211c              MOVS     r1,#0x1c
000468  20b4              MOVS     r0,#0xb4
00046a  f7fffffe          BL       lc640_write_int
00046e  e004              B        |L1.1146|
                  |L1.1136|
;;;412    else lc640_write_int(EE_DATE_AVZ,LPC_RTC->DOM);
000470  f894102c          LDRB     r1,[r4,#0x2c]
000474  20b4              MOVS     r0,#0xb4
000476  f7fffffe          BL       lc640_write_int
                  |L1.1146|
;;;413    
;;;414    //lc640_write_int(EE_DATE_AVZ,4);
;;;415    
;;;416    lc640_write_int(EE_HOUR_AVZ,LPC_RTC->HOUR);
00047a  f1040420          ADD      r4,r4,#0x20
00047e  7a21              LDRB     r1,[r4,#8]
000480  f04f00ae          MOV      r0,#0xae
000484  f7fffffe          BL       lc640_write_int
;;;417    lc640_write_int(EE_MIN_AVZ,LPC_RTC->MIN);
000488  7921              LDRB     r1,[r4,#4]
00048a  20b0              MOVS     r0,#0xb0
00048c  f7fffffe          BL       lc640_write_int
;;;418    lc640_write_int(EE_SEC_AVZ,LPC_RTC->SEC);
000490  7821              LDRB     r1,[r4,#0]
000492  e8bd4070          POP      {r4-r6,lr}
000496  20b2              MOVS     r0,#0xb2
000498  f7ffbffe          B.W      lc640_write_int
;;;419    
;;;420    }
;;;421    
                          ENDP

                  avz_drv PROC
;;;422    //-----------------------------------------------
;;;423    void avz_drv(void)                               
00049c  b510              PUSH     {r4,lr}
;;;424    {                
;;;425    if(AVZ!=AVZ_OFF)
00049e  48ff              LDR      r0,|L1.2204|
;;;426    	{
;;;427    	if((LPC_RTC->YEAR==YEAR_AVZ)&&(LPC_RTC->MONTH==MONTH_AVZ)&&(LPC_RTC->DOM==DATE_AVZ)&&(LPC_RTC->HOUR==HOUR_AVZ)&&(LPC_RTC->MIN==MIN_AVZ)&&(LPC_RTC->SEC==SEC_AVZ))
;;;428    		{
;;;429    		bAVZ=1;
0004a0  4cff              LDR      r4,|L1.2208|
0004a2  7800              LDRB     r0,[r0,#0]            ;425  ; AVZ
0004a4  b330              CBZ      r0,|L1.1268|
0004a6  48ff              LDR      r0,|L1.2212|
0004a8  8f82              LDRH     r2,[r0,#0x3c]         ;427
0004aa  49ff              LDR      r1,|L1.2216|
0004ac  8809              LDRH     r1,[r1,#0]            ;427  ; YEAR_AVZ
0004ae  428a              CMP      r2,r1                 ;427
0004b0  d120              BNE      |L1.1268|
0004b2  f8902038          LDRB     r2,[r0,#0x38]         ;427
0004b6  49fd              LDR      r1,|L1.2220|
0004b8  8809              LDRH     r1,[r1,#0]            ;427  ; MONTH_AVZ
0004ba  428a              CMP      r2,r1                 ;427
0004bc  d11a              BNE      |L1.1268|
0004be  f890102c          LDRB     r1,[r0,#0x2c]         ;427
0004c2  4afb              LDR      r2,|L1.2224|
0004c4  8812              LDRH     r2,[r2,#0]            ;427  ; DATE_AVZ
0004c6  4291              CMP      r1,r2                 ;427
0004c8  d114              BNE      |L1.1268|
0004ca  f8901028          LDRB     r1,[r0,#0x28]         ;427
0004ce  4af9              LDR      r2,|L1.2228|
0004d0  8812              LDRH     r2,[r2,#0]            ;427  ; HOUR_AVZ
0004d2  4291              CMP      r1,r2                 ;427
0004d4  d10e              BNE      |L1.1268|
0004d6  f8901024          LDRB     r1,[r0,#0x24]         ;427
0004da  4af7              LDR      r2,|L1.2232|
0004dc  8812              LDRH     r2,[r2,#0]            ;427  ; MIN_AVZ
0004de  4291              CMP      r1,r2                 ;427
0004e0  d108              BNE      |L1.1268|
0004e2  f8900020          LDRB     r0,[r0,#0x20]         ;427
0004e6  49f5              LDR      r1,|L1.2236|
0004e8  8809              LDRH     r1,[r1,#0]            ;427  ; SEC_AVZ
0004ea  4288              CMP      r0,r1                 ;427
0004ec  d102              BNE      |L1.1268|
0004ee  f04f0001          MOV      r0,#1
0004f2  75a0              STRB     r0,[r4,#0x16]
                  |L1.1268|
;;;430    		}
;;;431    	}
;;;432    if(bAVZ)
0004f4  7da0              LDRB     r0,[r4,#0x16]  ; bAVZ
0004f6  2800              CMP      r0,#0
0004f8  d00c              BEQ      |L1.1300|
;;;433    	{
;;;434    	if(vz_start(AVZ_TIME))
0004fa  48f1              LDR      r0,|L1.2240|
0004fc  8800              LDRH     r0,[r0,#0]  ; AVZ_TIME
0004fe  b2c0              UXTB     r0,r0
000500  f7fffffe          BL       vz_start
000504  2800              CMP      r0,#0
000506  d005              BEQ      |L1.1300|
;;;435    		{
;;;436    		bAVZ=0;
000508  f04f0000          MOV      r0,#0
00050c  75a0              STRB     r0,[r4,#0x16]
;;;437    		avz_next_date_hndl();
00050e  e8bd4010          POP      {r4,lr}
000512  e7fe              B        avz_next_date_hndl
                  |L1.1300|
;;;438    		}
;;;439    	}	
;;;440    
;;;441    }
000514  bd10              POP      {r4,pc}
;;;442    
                          ENDP

                  vz_drv PROC
;;;443    //-----------------------------------------------
;;;444    void vz_drv(void)
000516  b570              PUSH     {r4-r6,lr}
;;;445    { 
;;;446    if(spc_stat==spcVZ)
000518  4ce1              LDR      r4,|L1.2208|
00051a  7ce0              LDRB     r0,[r4,#0x13]  ; spc_stat
00051c  2802              CMP      r0,#2
00051e  d144              BNE      |L1.1450|
;;;447    	{
;;;448    	if(vz_cnt_s_<3600)
000520  f8b4004a          LDRH     r0,[r4,#0x4a]  ; vz_cnt_s_
000524  f44f6161          MOV      r1,#0xe10
;;;449    		{
;;;450    		vz_cnt_s_++;
;;;451    		if(vz_cnt_s_>=3600)
;;;452    			{
;;;453    			vz_cnt_s_=0;
000528  2500              MOVS     r5,#0
00052a  4288              CMP      r0,r1                 ;448
00052c  d215              BCS      |L1.1370|
00052e  f1000001          ADD      r0,r0,#1              ;450
000532  b280              UXTH     r0,r0                 ;450
000534  f8a4004a          STRH     r0,[r4,#0x4a]         ;450
000538  4288              CMP      r0,r1                 ;451
00053a  d30e              BCC      |L1.1370|
00053c  f8a4504a          STRH     r5,[r4,#0x4a]
;;;454    			if(vz_cnt_h)
000540  f8b4004c          LDRH     r0,[r4,#0x4c]  ; vz_cnt_h
000544  b148              CBZ      r0,|L1.1370|
;;;455    				{
;;;456    				vz_cnt_h--;
000546  f1a00001          SUB      r0,r0,#1
00054a  f8240f4c          STRH     r0,[r4,#0x4c]!
;;;457    				vz_cnt_h_++;
00054e  8860              LDRH     r0,[r4,#2]  ; vz_cnt_h_
000550  f1000001          ADD      r0,r0,#1
000554  8060              STRH     r0,[r4,#2]
000556  f1a4044c          SUB      r4,r4,#0x4c
                  |L1.1370|
;;;458    				}
;;;459    			}
;;;460    		}
;;;461    
;;;462    
;;;463    	if(vz_cnt_s<60)
00055a  f8b40048          LDRH     r0,[r4,#0x48]  ; vz_cnt_s
00055e  283c              CMP      r0,#0x3c
000560  d223              BCS      |L1.1450|
;;;464    		{
;;;465    		vz_cnt_s++;
000562  f1000001          ADD      r0,r0,#1
000566  b280              UXTH     r0,r0
000568  f8a40048          STRH     r0,[r4,#0x48]
;;;466    		if(vz_cnt_s>=60)
00056c  283c              CMP      r0,#0x3c
00056e  d31c              BCC      |L1.1450|
;;;467    			{
;;;468    			vz_cnt_s=0;
000570  f8245f48          STRH     r5,[r4,#0x48]!
;;;469    			
;;;470    			__ee_vz_cnt--;
000574  8960              LDRH     r0,[r4,#0xa]  ; __ee_vz_cnt
000576  f1a00001          SUB      r0,r0,#1
00057a  b201              SXTH     r1,r0
00057c  8161              STRH     r1,[r4,#0xa]
;;;471    			lc640_write_int(EE_VZ_CNT,__ee_vz_cnt);
00057e  f44f70f9          MOV      r0,#0x1f2
000582  f7fffffe          BL       lc640_write_int
;;;472    			if(!__ee_vz_cnt)
000586  8960              LDRH     r0,[r4,#0xa]  ; __ee_vz_cnt
000588  f1a40448          SUB      r4,r4,#0x48
00058c  2800              CMP      r0,#0
00058e  d10c              BNE      |L1.1450|
;;;473    				{
;;;474    				spc_stat=spcOFF;
000590  74e5              STRB     r5,[r4,#0x13]
;;;475    						__ee_spc_stat=spcOFF;
000592  f8a45054          STRH     r5,[r4,#0x54]
;;;476    		lc640_write_int(EE_SPC_STAT,spcOFF);
000596  4601              MOV      r1,r0
000598  f44f70f8          MOV      r0,#0x1f0
00059c  f7fffffe          BL       lc640_write_int
;;;477    				vz_mem_hndl(0);
0005a0  e8bd4070          POP      {r4-r6,lr}
0005a4  2000              MOVS     r0,#0
0005a6  f7ffbffe          B.W      vz_mem_hndl
                  |L1.1450|
;;;478    				}
;;;479    			}
;;;480    		}
;;;481    
;;;482    	}
;;;483    
;;;484    
;;;485    } 
0005aa  bd70              POP      {r4-r6,pc}
;;;486    
                          ENDP

                  kb_init PROC
;;;490    //-----------------------------------------------
;;;491    void kb_init(void)
0005ac  48c5              LDR      r0,|L1.2244|
;;;492    {
;;;493    main_kb_cnt=(TBAT*60)-60/*120*/;
0005ae  f06f013b          MVN      r1,#0x3b
0005b2  8800              LDRH     r0,[r0,#0]  ; TBAT
0005b4  ebc01000          RSB      r0,r0,r0,LSL #4
0005b8  eb010080          ADD      r0,r1,r0,LSL #2
0005bc  49b8              LDR      r1,|L1.2208|
0005be  8788              STRH     r0,[r1,#0x3c]
;;;494    }
0005c0  4770              BX       lr
;;;495    
                          ENDP

                  kb_hndl PROC
;;;496    //-----------------------------------------------
;;;497    void kb_hndl(void)
0005c2  e92d5ff0          PUSH     {r4-r12,lr}
;;;498    {
;;;499    
;;;500    static signed short ibat[2],ibat_[2],ibat_ips,ibat_ips_;
;;;501    #ifdef UKU_TELECORE2015
;;;502    if(((++main_kb_cnt>=TBAT*60)&&(TBAT))&&(BAT_TYPE==0))
;;;503    #else 
;;;504    if(((++main_kb_cnt>=TBAT*60)&&(TBAT)))
0005c6  f8df82d8          LDR      r8,|L1.2208|
;;;505    #endif
;;;506    	{
;;;507    	main_kb_cnt=0;
;;;508    	
;;;509    	kb_start[0]=0;
;;;510    	kb_start[1]=0;
;;;511    	kb_start_ips=0;
;;;512    
;;;513    	if( (BAT_IS_ON[0]==bisON) && (bat[0]._Ub>80) && ( (abs(bat[0]._Ib)<IKB) || (bat[0]._av&1) ) ) kb_start[0]=1;
;;;514    	if( (BAT_IS_ON[1]==bisON) && (bat[1]._Ub>80) && ( (abs(bat[1]._Ib)<IKB) || (bat[1]._av&1) ) ) kb_start[1]=1;
;;;515    #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;516    	if( (!ips_bat_av_vzvod)                      && ((abs(Ib_ips_termokompensat)<IKB) || (bat_ips._av&1) ) ) kb_start_ips=1;
0005ca  f8dfa2fc          LDR      r10,|L1.2248|
0005ce  2500              MOVS     r5,#0                 ;504
0005d0  f8b8003c          LDRH     r0,[r8,#0x3c]         ;504  ; main_kb_cnt
0005d4  4ebd              LDR      r6,|L1.2252|
0005d6  1c40              ADDS     r0,r0,#1              ;504
0005d8  b201              SXTH     r1,r0                 ;504
0005da  48ba              LDR      r0,|L1.2244|
0005dc  f8a8103c          STRH     r1,[r8,#0x3c]         ;504
0005e0  f8df92ec          LDR      r9,|L1.2256|
0005e4  f9b00000          LDRSH    r0,[r0,#0]            ;504  ; TBAT
;;;517    #endif	
;;;518    	if( (net_av) || (num_of_wrks_bps==0) || ( (spc_stat!=spcOFF) && (spc_stat!=spcVZ) ) ) 
;;;519    		{
;;;520    		kb_start[0]=0;
;;;521    		kb_start[1]=0;
;;;522    		kb_start_ips=0;
;;;523    		}
;;;524    
;;;525    	if((kb_start[0]==1)||(kb_start[1]==1)||(kb_start_ips==1))
;;;526    		{
;;;527    		kb_cnt_1lev=10;
0005e8  270a              MOVS     r7,#0xa
0005ea  ebc01200          RSB      r2,r0,r0,LSL #4       ;504
0005ee  f04f0b01          MOV      r11,#1                ;513
0005f2  f1080442          ADD      r4,r8,#0x42           ;509
0005f6  ebb10f82          CMP      r1,r2,LSL #2          ;504
0005fa  db61              BLT      |L1.1728|
0005fc  b3f0              CBZ      r0,|L1.1660|
0005fe  f8a8503c          STRH     r5,[r8,#0x3c]         ;507
000602  7025              STRB     r5,[r4,#0]            ;509
000604  7065              STRB     r5,[r4,#1]            ;510
000606  f888500d          STRB     r5,[r8,#0xd]          ;511
00060a  48b2              LDR      r0,|L1.2260|
00060c  7800              LDRB     r0,[r0,#0]            ;513  ; BAT_IS_ON
00060e  2855              CMP      r0,#0x55              ;513
000610  d111              BNE      |L1.1590|
000612  f9b60002          LDRSH    r0,[r6,#2]            ;513  ; bat
000616  2850              CMP      r0,#0x50              ;513
000618  dd0d              BLE      |L1.1590|
00061a  f9b60008          LDRSH    r0,[r6,#8]            ;513  ; bat
00061e  f7fffffe          BL       abs
000622  f9b91000          LDRSH    r1,[r9,#0]            ;513  ; IKB
000626  4288              CMP      r0,r1                 ;513
000628  db03              BLT      |L1.1586|
00062a  f896003d          LDRB     r0,[r6,#0x3d]         ;513  ; bat
00062e  07c0              LSLS     r0,r0,#31             ;513
000630  d001              BEQ      |L1.1590|
                  |L1.1586|
000632  f884b000          STRB     r11,[r4,#0]           ;513
                  |L1.1590|
000636  48a7              LDR      r0,|L1.2260|
000638  7840              LDRB     r0,[r0,#1]            ;514  ; BAT_IS_ON
00063a  2855              CMP      r0,#0x55              ;514
00063c  d111              BNE      |L1.1634|
00063e  f9b6004e          LDRSH    r0,[r6,#0x4e]         ;514  ; bat
000642  2850              CMP      r0,#0x50              ;514
000644  dd0d              BLE      |L1.1634|
000646  f9b60054          LDRSH    r0,[r6,#0x54]         ;514  ; bat
00064a  f7fffffe          BL       abs
00064e  f9b91000          LDRSH    r1,[r9,#0]            ;514  ; IKB
000652  4288              CMP      r0,r1                 ;514
000654  db03              BLT      |L1.1630|
000656  f8960089          LDRB     r0,[r6,#0x89]         ;514  ; bat
00065a  07c0              LSLS     r0,r0,#31             ;514
00065c  d001              BEQ      |L1.1634|
                  |L1.1630|
00065e  f884b001          STRB     r11,[r4,#1]           ;514
                  |L1.1634|
000662  489d              LDR      r0,|L1.2264|
000664  7800              LDRB     r0,[r0,#0]            ;516  ; ips_bat_av_vzvod
000666  b980              CBNZ     r0,|L1.1674|
000668  f9ba0000          LDRSH    r0,[r10,#0]           ;516  ; Ib_ips_termokompensat
00066c  f7fffffe          BL       abs
000670  f9b91000          LDRSH    r1,[r9,#0]            ;516  ; IKB
000674  4288              CMP      r0,r1                 ;516
000676  db06              BLT      |L1.1670|
000678  4898              LDR      r0,|L1.2268|
00067a  e000              B        |L1.1662|
                  |L1.1660|
00067c  e020              B        |L1.1728|
                  |L1.1662|
00067e  f890003d          LDRB     r0,[r0,#0x3d]         ;516  ; bat_ips
000682  07c0              LSLS     r0,r0,#31             ;516
000684  d001              BEQ      |L1.1674|
                  |L1.1670|
000686  f888b00d          STRB     r11,[r8,#0xd]         ;516
                  |L1.1674|
00068a  4895              LDR      r0,|L1.2272|
00068c  7800              LDRB     r0,[r0,#0]            ;518  ; net_av
00068e  b938              CBNZ     r0,|L1.1696|
000690  f898000e          LDRB     r0,[r8,#0xe]          ;518  ; num_of_wrks_bps
000694  b120              CBZ      r0,|L1.1696|
000696  f8980013          LDRB     r0,[r8,#0x13]         ;518  ; spc_stat
00069a  b128              CBZ      r0,|L1.1704|
00069c  2802              CMP      r0,#2                 ;518
00069e  d003              BEQ      |L1.1704|
                  |L1.1696|
0006a0  7025              STRB     r5,[r4,#0]            ;520
0006a2  7065              STRB     r5,[r4,#1]            ;521
0006a4  f888500d          STRB     r5,[r8,#0xd]          ;522
                  |L1.1704|
0006a8  7820              LDRB     r0,[r4,#0]            ;525  ; kb_start
0006aa  2801              CMP      r0,#1                 ;525
0006ac  d01f              BEQ      |L1.1774|
0006ae  7860              LDRB     r0,[r4,#1]            ;525  ; kb_start
0006b0  2801              CMP      r0,#1                 ;525
0006b2  d01c              BEQ      |L1.1774|
0006b4  f898000d          LDRB     r0,[r8,#0xd]          ;525  ; kb_start_ips
0006b8  2801              CMP      r0,#1                 ;525
0006ba  d018              BEQ      |L1.1774|
;;;528    		}
;;;529    	else kb_cnt_1lev=0;
0006bc  f8a8503e          STRH     r5,[r8,#0x3e]
                  |L1.1728|
;;;530    	}
;;;531    
;;;532    if(kb_cnt_1lev)
0006c0  4641              MOV      r1,r8
0006c2  f9b8003e          LDRSH    r0,[r8,#0x3e]  ; kb_cnt_1lev
;;;533    	{
;;;534    	kb_cnt_1lev--;
;;;535    
;;;536    	if(kb_cnt_1lev>5)mess_send(MESS2CNTRL_HNDL,PARAM_CNTRL_STAT_PLUS,30,15);
;;;537    	else if(kb_cnt_1lev>0) mess_send(MESS2CNTRL_HNDL,PARAM_CNTRL_STAT_MINUS,30,15);
;;;538    
;;;539    
;;;540    	if(kb_cnt_1lev==5)
;;;541    		{
;;;542    		ibat[0]=abs(bat[0]._Ib);
0006c6  f8df81d8          LDR      r8,|L1.2208|
0006ca  2800              CMP      r0,#0                 ;532
0006cc  f1080860          ADD      r8,r8,#0x60
0006d0  d07e              BEQ      |L1.2000|
0006d2  f1a00001          SUB      r0,r0,#1              ;534
0006d6  b200              SXTH     r0,r0                 ;534
0006d8  468b              MOV      r11,r1                ;534
0006da  87c8              STRH     r0,[r1,#0x3e]         ;534
0006dc  2805              CMP      r0,#5                 ;536
0006de  dd09              BLE      |L1.1780|
0006e0  230f              MOVS     r3,#0xf               ;536
0006e2  221e              MOVS     r2,#0x1e              ;536
0006e4  2164              MOVS     r1,#0x64              ;536
0006e6  20e1              MOVS     r0,#0xe1              ;536
0006e8  f7fffffe          BL       mess_send
0006ec  e00a              B        |L1.1796|
                  |L1.1774|
0006ee  f8a8703e          STRH     r7,[r8,#0x3e]         ;527
0006f2  e7e5              B        |L1.1728|
                  |L1.1780|
0006f4  2800              CMP      r0,#0                 ;537
0006f6  dd05              BLE      |L1.1796|
0006f8  230f              MOVS     r3,#0xf               ;537
0006fa  221e              MOVS     r2,#0x1e              ;537
0006fc  2169              MOVS     r1,#0x69              ;537
0006fe  20e1              MOVS     r0,#0xe1              ;537
000700  f7fffffe          BL       mess_send
                  |L1.1796|
000704  f8bb003e          LDRH     r0,[r11,#0x3e]        ;540  ; kb_cnt_1lev
000708  2805              CMP      r0,#5                 ;540
00070a  d111              BNE      |L1.1840|
00070c  f9b60008          LDRSH    r0,[r6,#8]  ; bat
000710  f7fffffe          BL       abs
000714  f8a80000          STRH     r0,[r8,#0]
;;;543    		ibat[1]=abs(bat[1]._Ib);
000718  f9b60054          LDRSH    r0,[r6,#0x54]  ; bat
00071c  f7fffffe          BL       abs
000720  f8a80002          STRH     r0,[r8,#2]
;;;544    		ibat_ips=abs(Ib_ips_termokompensat);
000724  f9ba0000          LDRSH    r0,[r10,#0]  ; Ib_ips_termokompensat
000728  f7fffffe          BL       abs
00072c  f8ab0020          STRH     r0,[r11,#0x20]
                  |L1.1840|
;;;545    		}
;;;546    	
;;;547    	if(kb_cnt_1lev==0)
000730  485b              LDR      r0,|L1.2208|
000732  8fc0              LDRH     r0,[r0,#0x3e]  ; kb_cnt_1lev
000734  2800              CMP      r0,#0
000736  d154              BNE      |L1.2018|
;;;548    		{
;;;549    		ibat_[0]=abs(bat[0]._Ib);
000738  f9b60008          LDRSH    r0,[r6,#8]  ; bat
00073c  f7fffffe          BL       abs
000740  f8dfb15c          LDR      r11,|L1.2208|
000744  f10b0b64          ADD      r11,r11,#0x64
000748  f8ab0000          STRH     r0,[r11,#0]
;;;550    		ibat_[1]=abs(bat[1]._Ib);
00074c  f9b60054          LDRSH    r0,[r6,#0x54]  ; bat
000750  f7fffffe          BL       abs
000754  f8ab0002          STRH     r0,[r11,#2]
;;;551    		ibat_ips_=abs(Ib_ips_termokompensat);
000758  f9ba0000          LDRSH    r0,[r10,#0]  ; Ib_ips_termokompensat
00075c  f7fffffe          BL       abs
000760  f8dfa13c          LDR      r10,|L1.2208|
000764  f8aa0022          STRH     r0,[r10,#0x22]
;;;552    
;;;553    		kb_cnt_2lev=0;
000768  f8aa5040          STRH     r5,[r10,#0x40]
;;;554    
;;;555    
;;;556    		if(( (ibat[0]+ibat_[0]) < IKB )&& (kb_start[0]==1))
00076c  f9b80000          LDRSH    r0,[r8,#0]  ; ibat
000770  f9bb1000          LDRSH    r1,[r11,#0]  ; ibat_
000774  4408              ADD      r0,r0,r1
000776  f9b91000          LDRSH    r1,[r9,#0]  ; IKB
00077a  4288              CMP      r0,r1
00077c  da02              BGE      |L1.1924|
00077e  7820              LDRB     r0,[r4,#0]  ; kb_start
000780  2801              CMP      r0,#1
000782  d030              BEQ      |L1.2022|
                  |L1.1924|
;;;557    			{
;;;558    			kb_cnt_2lev=10;  
;;;559    			}
;;;560    		else if(bat[0]._Ub>200)
000784  f9b60002          LDRSH    r0,[r6,#2]  ; bat
000788  28c8              CMP      r0,#0xc8
00078a  dd04              BLE      |L1.1942|
;;;561    			{
;;;562    			kb_start[0]=0;
00078c  7025              STRB     r5,[r4,#0]
;;;563    			avar_bat_hndl(0,0);
00078e  2100              MOVS     r1,#0
000790  4608              MOV      r0,r1
000792  f7fffffe          BL       avar_bat_hndl
                  |L1.1942|
;;;564    			}
;;;565    		
;;;566    		if(( (ibat[1]+ibat_[1]) < IKB ) && (kb_start[1]==1))
000796  f9b80002          LDRSH    r0,[r8,#2]  ; ibat
00079a  f9bb1002          LDRSH    r1,[r11,#2]  ; ibat_
00079e  4408              ADD      r0,r0,r1
0007a0  f9b91000          LDRSH    r1,[r9,#0]  ; IKB
0007a4  4288              CMP      r0,r1
0007a6  da02              BGE      |L1.1966|
0007a8  7860              LDRB     r0,[r4,#1]  ; kb_start
0007aa  2801              CMP      r0,#1
0007ac  d01e              BEQ      |L1.2028|
                  |L1.1966|
;;;567    			{
;;;568    			kb_cnt_2lev=10;     
;;;569    			}
;;;570    		else  if(bat[1]._Ub>200)
0007ae  f9b6004e          LDRSH    r0,[r6,#0x4e]  ; bat
0007b2  28c8              CMP      r0,#0xc8
0007b4  dd04              BLE      |L1.1984|
;;;571    			{
;;;572    			kb_start[1]=0;
0007b6  7065              STRB     r5,[r4,#1]
;;;573    			avar_bat_hndl(1,0);
0007b8  2100              MOVS     r1,#0
0007ba  2001              MOVS     r0,#1
0007bc  f7fffffe          BL       avar_bat_hndl
                  |L1.1984|
;;;574    			}
;;;575    #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;576    		if(( (ibat_ips+ibat_ips_) < IKB ) && (kb_start_ips==1))
0007c0  f9ba0020          LDRSH    r0,[r10,#0x20]  ; ibat_ips
0007c4  f9ba1022          LDRSH    r1,[r10,#0x22]  ; ibat_ips_
0007c8  4408              ADD      r0,r0,r1
0007ca  f9b91000          LDRSH    r1,[r9,#0]  ; IKB
0007ce  e000              B        |L1.2002|
                  |L1.2000|
0007d0  e00f              B        |L1.2034|
                  |L1.2002|
0007d2  4288              CMP      r0,r1
0007d4  da05              BGE      |L1.2018|
0007d6  f89a000d          LDRB     r0,[r10,#0xd]  ; kb_start_ips
0007da  2801              CMP      r0,#1
0007dc  d101              BNE      |L1.2018|
;;;577    			{
;;;578    			kb_cnt_2lev=10;     
0007de  f8aa7040          STRH     r7,[r10,#0x40]
                  |L1.2018|
;;;579    			}
;;;580    /*		else  if(bat[1]._Ub>200)
;;;581    			{
;;;582    			kb_start[1]=0;
;;;583    			avar_bat_hndl(1,0);
;;;584    			} */
;;;585    #endif
;;;586    		}	
;;;587    
;;;588    
;;;589    	}
;;;590    else if(kb_cnt_2lev)
;;;591    	{
;;;592    	kb_cnt_2lev--;
;;;593    
;;;594    	if(kb_cnt_2lev>5)mess_send(MESS2CNTRL_HNDL,PARAM_CNTRL_STAT_PLUS,200,15);
;;;595    	else if(kb_cnt_2lev>0) mess_send(MESS2CNTRL_HNDL,PARAM_CNTRL_STAT_MINUS,200,15);
;;;596    
;;;597    
;;;598    	if(kb_cnt_2lev==5)
;;;599    		{
;;;600    		ibat[0]=abs(bat[0]._Ib);
;;;601    		ibat[1]=abs(bat[1]._Ib);
;;;602    		ibat_ips=abs(Ib_ips_termokompensat);
;;;603    		}
;;;604    	
;;;605    	if(kb_cnt_2lev==0)
;;;606    		{
;;;607    		ibat_[0]=abs(bat[0]._Ib);
;;;608    		ibat_[1]=abs(bat[1]._Ib);
;;;609    		ibat_ips_=abs(Ib_ips_termokompensat);
;;;610    
;;;611    		kb_full_ver=0;
;;;612    
;;;613    		if(( (ibat[0]+ibat_[0]) < IKB ) && (kb_start[0]==1))
;;;614    			{
;;;615    			kb_full_ver=1;  
;;;616    			}
;;;617    		else if(bat[0]._Ub>200)			
;;;618    			{
;;;619    			kb_start[0]=0;
;;;620    			avar_bat_hndl(0,0);
;;;621    			}
;;;622    
;;;623    		if(( (ibat[1]+ibat_[1]) < IKB ) && (kb_start[1]==1))
;;;624    			{
;;;625    			kb_full_ver=1;     
;;;626    			}
;;;627    		else	if(bat[1]._Ub>200)		
;;;628    			{
;;;629    			kb_start[1]=0;
;;;630    			avar_bat_hndl(1,0);
;;;631    			}
;;;632    #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;633    		if(( (ibat_ips+ibat_ips_) < IKB )  && (kb_start_ips==1))
;;;634    			{
;;;635    			kb_full_ver=1;     
;;;636    			}
;;;637    #endif
;;;638    		}	
;;;639    	}
;;;640    
;;;641    else if(kb_full_ver)
;;;642    	{
;;;643    	
;;;644    	mess_send(MESS2CNTRL_HNDL,PARAM_CNTRL_STAT_STEP_DOWN,0,15);
;;;645    
;;;646    	if( abs(bat[0]._Ib) > IKB ) 
;;;647    		{
;;;648    		if(kb_start[0]==1)
;;;649    			{
;;;650    			kb_start[0]=0;
;;;651    			avar_bat_hndl(0,0);
;;;652    			}
;;;653    		}
;;;654    
;;;655    	if( abs(bat[1]._Ib) > IKB ) 
;;;656    		{
;;;657    		if(kb_start[1]==1)
;;;658    			{
;;;659    			kb_start[1]=0;
;;;660    			avar_bat_hndl(1,0);
;;;661    			}
;;;662    		}
;;;663    #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;664    	if( abs(Ib_ips_termokompensat) > IKB ) 
;;;665    		{
;;;666    		if(kb_start_ips==1)
;;;667    			{
;;;668    			kb_start_ips=0;
;;;669    			avar_bat_ips_hndl(0);
;;;670    			}
;;;671    		}
;;;672    #endif
;;;673    
;;;674    	if ((kb_start[0]==0) && (kb_start[1]==0) && (kb_start_ips==0)) 
;;;675    		{
;;;676    		kb_full_ver=0;
;;;677    		}
;;;678    
;;;679    	if(( (mess_find(MESS2KB_HNDL))	&& (mess_data[0]==PARAM_CNTRL_IS_DOWN) ) || (load_U<(USIGN*10)) )
;;;680    		{
;;;681    		kb_full_ver=0;
;;;682    		if((kb_start[0]==1)&&((load_I>(2*IKB)/10))&&(!(bat[0]._av&0x01))) avar_bat_hndl(0,1);
;;;683    		if((kb_start[1]==1)&&((load_I>(2*IKB)/10))&&(!(bat[1]._av&0x01))) avar_bat_hndl(1,1);
;;;684    #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;685    		if((kb_start_ips==1)&&((load_I>(2*IKB)/10))&&(!(bat_ips._av&0x01))) avar_bat_ips_hndl(1);
;;;686    #endif
;;;687    		}
;;;688    	}
;;;689    
;;;690    }
0007e2  e8bd9ff0          POP      {r4-r12,pc}
                  |L1.2022|
0007e6  f8aa7040          STRH     r7,[r10,#0x40]        ;558
0007ea  e7d4              B        |L1.1942|
                  |L1.2028|
0007ec  f8aa7040          STRH     r7,[r10,#0x40]        ;568
0007f0  e7e6              B        |L1.1984|
                  |L1.2034|
0007f2  f9b10040          LDRSH    r0,[r1,#0x40]         ;590  ; kb_cnt_2lev
0007f6  b3e8              CBZ      r0,|L1.2164|
0007f8  f1a00001          SUB      r0,r0,#1              ;592
0007fc  b200              SXTH     r0,r0                 ;592
0007fe  460f              MOV      r7,r1                 ;592
000800  f8a10040          STRH     r0,[r1,#0x40]         ;592
000804  2805              CMP      r0,#5                 ;594
000806  dd06              BLE      |L1.2070|
000808  230f              MOVS     r3,#0xf               ;594
00080a  22c8              MOVS     r2,#0xc8              ;594
00080c  2164              MOVS     r1,#0x64              ;594
00080e  20e1              MOVS     r0,#0xe1              ;594
000810  f7fffffe          BL       mess_send
000814  e007              B        |L1.2086|
                  |L1.2070|
000816  2800              CMP      r0,#0                 ;595
000818  dd05              BLE      |L1.2086|
00081a  230f              MOVS     r3,#0xf               ;595
00081c  22c8              MOVS     r2,#0xc8              ;595
00081e  2169              MOVS     r1,#0x69              ;595
000820  20e1              MOVS     r0,#0xe1              ;595
000822  f7fffffe          BL       mess_send
                  |L1.2086|
000826  f8b70040          LDRH     r0,[r7,#0x40]         ;598  ; kb_cnt_2lev
00082a  2805              CMP      r0,#5                 ;598
00082c  d110              BNE      |L1.2128|
00082e  f9b60008          LDRSH    r0,[r6,#8]            ;600  ; bat
000832  f7fffffe          BL       abs
000836  f8a80000          STRH     r0,[r8,#0]            ;600
00083a  f9b60054          LDRSH    r0,[r6,#0x54]         ;601  ; bat
00083e  f7fffffe          BL       abs
000842  f8a80002          STRH     r0,[r8,#2]            ;601
000846  f9ba0000          LDRSH    r0,[r10,#0]           ;602  ; Ib_ips_termokompensat
00084a  f7fffffe          BL       abs
00084e  8438              STRH     r0,[r7,#0x20]         ;602
                  |L1.2128|
000850  4813              LDR      r0,|L1.2208|
000852  f8b00040          LDRH     r0,[r0,#0x40]         ;605  ; kb_cnt_2lev
000856  2800              CMP      r0,#0                 ;605
                  |L1.2136|
000858  d1c3              BNE      |L1.2018|
00085a  f9b60008          LDRSH    r0,[r6,#8]            ;607  ; bat
00085e  f7fffffe          BL       abs
000862  4f0f              LDR      r7,|L1.2208|
000864  3764              ADDS     r7,r7,#0x64           ;607
000866  8038              STRH     r0,[r7,#0]            ;607
000868  f9b60054          LDRSH    r0,[r6,#0x54]         ;608  ; bat
00086c  f7fffffe          BL       abs
000870  8078              STRH     r0,[r7,#2]            ;608
000872  e000              B        |L1.2166|
                  |L1.2164|
000874  e06f              B        |L1.2390|
                  |L1.2166|
000876  f9ba0000          LDRSH    r0,[r10,#0]           ;609  ; Ib_ips_termokompensat
00087a  f7fffffe          BL       abs
00087e  f8dfa020          LDR      r10,|L1.2208|
000882  f8aa0022          STRH     r0,[r10,#0x22]        ;609
000886  f88a500c          STRB     r5,[r10,#0xc]         ;611
00088a  f9b80000          LDRSH    r0,[r8,#0]            ;613  ; ibat
00088e  f9b71000          LDRSH    r1,[r7,#0]            ;613  ; ibat_
000892  4408              ADD      r0,r0,r1              ;613
000894  f9b91000          LDRSH    r1,[r9,#0]            ;613  ; IKB
000898  4288              CMP      r0,r1                 ;613
00089a  e023              B        |L1.2276|
                  |L1.2204|
                          DCD      AVZ
                  |L1.2208|
                          DCD      ||area_number.21||
                  |L1.2212|
                          DCD      0x40024000
                  |L1.2216|
                          DCD      YEAR_AVZ
                  |L1.2220|
                          DCD      MONTH_AVZ
                  |L1.2224|
                          DCD      DATE_AVZ
                  |L1.2228|
                          DCD      HOUR_AVZ
                  |L1.2232|
                          DCD      MIN_AVZ
                  |L1.2236|
                          DCD      SEC_AVZ
                  |L1.2240|
                          DCD      AVZ_TIME
                  |L1.2244|
                          DCD      TBAT
                  |L1.2248|
                          DCD      Ib_ips_termokompensat
                  |L1.2252|
                          DCD      bat
                  |L1.2256|
                          DCD      IKB
                  |L1.2260|
                          DCD      BAT_IS_ON
                  |L1.2264|
                          DCD      ips_bat_av_vzvod
                  |L1.2268|
                          DCD      bat_ips
                  |L1.2272|
                          DCD      net_av
                  |L1.2276|
0008e4  da02              BGE      |L1.2284|
0008e6  7820              LDRB     r0,[r4,#0]            ;613  ; kb_start
0008e8  2801              CMP      r0,#1                 ;613
0008ea  d02e              BEQ      |L1.2378|
                  |L1.2284|
0008ec  f9b60002          LDRSH    r0,[r6,#2]            ;617  ; bat
0008f0  28c8              CMP      r0,#0xc8              ;617
0008f2  dd04              BLE      |L1.2302|
0008f4  7025              STRB     r5,[r4,#0]            ;619
0008f6  2100              MOVS     r1,#0                 ;620
0008f8  4608              MOV      r0,r1                 ;620
0008fa  f7fffffe          BL       avar_bat_hndl
                  |L1.2302|
0008fe  f9b80002          LDRSH    r0,[r8,#2]            ;623  ; ibat
000902  f9b71002          LDRSH    r1,[r7,#2]            ;623  ; ibat_
000906  4408              ADD      r0,r0,r1              ;623
000908  f9b91000          LDRSH    r1,[r9,#0]            ;623  ; IKB
00090c  4288              CMP      r0,r1                 ;623
00090e  da02              BGE      |L1.2326|
000910  7860              LDRB     r0,[r4,#1]            ;623  ; kb_start
000912  2801              CMP      r0,#1                 ;623
000914  d01c              BEQ      |L1.2384|
                  |L1.2326|
000916  f9b6004e          LDRSH    r0,[r6,#0x4e]         ;627  ; bat
00091a  28c8              CMP      r0,#0xc8              ;627
00091c  dd04              BLE      |L1.2344|
00091e  7065              STRB     r5,[r4,#1]            ;629
000920  2100              MOVS     r1,#0                 ;630
000922  2001              MOVS     r0,#1                 ;630
000924  f7fffffe          BL       avar_bat_hndl
                  |L1.2344|
000928  f9ba0020          LDRSH    r0,[r10,#0x20]        ;633  ; ibat_ips
00092c  f9ba1022          LDRSH    r1,[r10,#0x22]        ;633  ; ibat_ips_
000930  4408              ADD      r0,r0,r1              ;633
000932  f9b91000          LDRSH    r1,[r9,#0]            ;633  ; IKB
000936  4288              CMP      r0,r1                 ;633
000938  f6bfaf53          BGE      |L1.2018|
00093c  f89a000d          LDRB     r0,[r10,#0xd]         ;633  ; kb_start_ips
000940  2801              CMP      r0,#1                 ;633
000942  d189              BNE      |L1.2136|
000944  f88ab00c          STRB     r11,[r10,#0xc]        ;635
                  |L1.2376|
000948  e74b              B        |L1.2018|
                  |L1.2378|
00094a  f88ab00c          STRB     r11,[r10,#0xc]        ;615
00094e  e7d6              B        |L1.2302|
                  |L1.2384|
000950  f88ab00c          STRB     r11,[r10,#0xc]        ;625
000954  e7e8              B        |L1.2344|
                  |L1.2390|
000956  7b08              LDRB     r0,[r1,#0xc]          ;641  ; kb_full_ver
000958  4688              MOV      r8,r1                 ;641
00095a  2800              CMP      r0,#0                 ;641
00095c  d0f4              BEQ      |L1.2376|
00095e  230f              MOVS     r3,#0xf               ;644
000960  2200              MOVS     r2,#0                 ;644
000962  216e              MOVS     r1,#0x6e              ;644
000964  20e1              MOVS     r0,#0xe1              ;644
000966  f7fffffe          BL       mess_send
00096a  f9b60008          LDRSH    r0,[r6,#8]            ;646  ; bat
00096e  f7fffffe          BL       abs
000972  f9b91000          LDRSH    r1,[r9,#0]            ;646  ; IKB
000976  4288              CMP      r0,r1                 ;646
000978  dd07              BLE      |L1.2442|
00097a  7820              LDRB     r0,[r4,#0]            ;648  ; kb_start
00097c  2801              CMP      r0,#1                 ;648
00097e  d104              BNE      |L1.2442|
000980  7025              STRB     r5,[r4,#0]            ;650
000982  2100              MOVS     r1,#0                 ;651
000984  4608              MOV      r0,r1                 ;651
000986  f7fffffe          BL       avar_bat_hndl
                  |L1.2442|
00098a  f9b60054          LDRSH    r0,[r6,#0x54]         ;655  ; bat
00098e  f7fffffe          BL       abs
000992  f9b91000          LDRSH    r1,[r9,#0]            ;655  ; IKB
000996  4288              CMP      r0,r1                 ;655
000998  dd06              BLE      |L1.2472|
00099a  7860              LDRB     r0,[r4,#1]            ;657  ; kb_start
00099c  2801              CMP      r0,#1                 ;657
00099e  d103              BNE      |L1.2472|
0009a0  7065              STRB     r5,[r4,#1]            ;659
0009a2  2100              MOVS     r1,#0                 ;660
0009a4  f7fffffe          BL       avar_bat_hndl
                  |L1.2472|
0009a8  f9ba0000          LDRSH    r0,[r10,#0]           ;664  ; Ib_ips_termokompensat
0009ac  f7fffffe          BL       abs
0009b0  f9b91000          LDRSH    r1,[r9,#0]            ;664  ; IKB
0009b4  4288              CMP      r0,r1                 ;664
0009b6  dd08              BLE      |L1.2506|
0009b8  f898000d          LDRB     r0,[r8,#0xd]          ;666  ; kb_start_ips
0009bc  2801              CMP      r0,#1                 ;666
0009be  d104              BNE      |L1.2506|
0009c0  f888500d          STRB     r5,[r8,#0xd]          ;668
0009c4  2000              MOVS     r0,#0                 ;669
0009c6  f7fffffe          BL       avar_bat_ips_hndl
                  |L1.2506|
0009ca  7820              LDRB     r0,[r4,#0]            ;674  ; kb_start
0009cc  b930              CBNZ     r0,|L1.2524|
0009ce  7860              LDRB     r0,[r4,#1]            ;674  ; kb_start
0009d0  b920              CBNZ     r0,|L1.2524|
0009d2  f898000d          LDRB     r0,[r8,#0xd]          ;674  ; kb_start_ips
0009d6  b908              CBNZ     r0,|L1.2524|
0009d8  f888500c          STRB     r5,[r8,#0xc]          ;676
                  |L1.2524|
0009dc  20e6              MOVS     r0,#0xe6              ;679
0009de  f7fffffe          BL       mess_find
0009e2  b118              CBZ      r0,|L1.2540|
0009e4  48ff              LDR      r0,|L1.3556|
0009e6  6800              LDR      r0,[r0,#0]            ;679  ; mess_data
0009e8  28e7              CMP      r0,#0xe7              ;679
0009ea  d00a              BEQ      |L1.2562|
                  |L1.2540|
0009ec  48fe              LDR      r0,|L1.3560|
0009ee  49ff              LDR      r1,|L1.3564|
0009f0  f9b00000          LDRSH    r0,[r0,#0]            ;679  ; USIGN
0009f4  f9b11000          LDRSH    r1,[r1,#0]            ;679  ; load_U
0009f8  eb000080          ADD      r0,r0,r0,LSL #2       ;679
0009fc  ebb10f40          CMP      r1,r0,LSL #1          ;679
                  |L1.2560|
000a00  daa2              BGE      |L1.2376|
                  |L1.2562|
000a02  f888500c          STRB     r5,[r8,#0xc]          ;681
000a06  7820              LDRB     r0,[r4,#0]            ;682  ; kb_start
000a08  4df9              LDR      r5,|L1.3568|
000a0a  2801              CMP      r0,#1                 ;682
000a0c  d10f              BNE      |L1.2606|
000a0e  f9b90000          LDRSH    r0,[r9,#0]            ;682  ; IKB
000a12  f9b51000          LDRSH    r1,[r5,#0]            ;682  ; load_I
000a16  0040              LSLS     r0,r0,#1              ;682
000a18  fb90f0f7          SDIV     r0,r0,r7              ;682
000a1c  4288              CMP      r0,r1                 ;682
000a1e  da06              BGE      |L1.2606|
000a20  f896003d          LDRB     r0,[r6,#0x3d]         ;682  ; bat
000a24  07c0              LSLS     r0,r0,#31             ;682
000a26  d102              BNE      |L1.2606|
000a28  2101              MOVS     r1,#1                 ;682
000a2a  f7fffffe          BL       avar_bat_hndl
                  |L1.2606|
000a2e  7860              LDRB     r0,[r4,#1]            ;683  ; kb_start
000a30  2801              CMP      r0,#1                 ;683
000a32  d110              BNE      |L1.2646|
000a34  f9b90000          LDRSH    r0,[r9,#0]            ;683  ; IKB
000a38  f9b51000          LDRSH    r1,[r5,#0]            ;683  ; load_I
000a3c  0040              LSLS     r0,r0,#1              ;683
000a3e  fb90f0f7          SDIV     r0,r0,r7              ;683
000a42  4288              CMP      r0,r1                 ;683
000a44  da07              BGE      |L1.2646|
000a46  f8960089          LDRB     r0,[r6,#0x89]         ;683  ; bat
000a4a  07c0              LSLS     r0,r0,#31             ;683
000a4c  d103              BNE      |L1.2646|
000a4e  2101              MOVS     r1,#1                 ;683
000a50  4608              MOV      r0,r1                 ;683
000a52  f7fffffe          BL       avar_bat_hndl
                  |L1.2646|
000a56  f898000d          LDRB     r0,[r8,#0xd]          ;685  ; kb_start_ips
000a5a  2801              CMP      r0,#1                 ;685
                  |L1.2652|
000a5c  f47faf74          BNE      |L1.2376|
000a60  f9b90000          LDRSH    r0,[r9,#0]            ;685  ; IKB
000a64  f9b51000          LDRSH    r1,[r5,#0]            ;685  ; load_I
000a68  0040              LSLS     r0,r0,#1              ;685
000a6a  fb90f0f7          SDIV     r0,r0,r7              ;685
000a6e  4288              CMP      r0,r1                 ;685
000a70  dac6              BGE      |L1.2560|
000a72  48e0              LDR      r0,|L1.3572|
000a74  f890003d          LDRB     r0,[r0,#0x3d]         ;685  ; bat_ips
000a78  07c0              LSLS     r0,r0,#31             ;685
000a7a  d1ef              BNE      |L1.2652|
000a7c  e8bd5ff0          POP      {r4-r12,lr}           ;685
000a80  2001              MOVS     r0,#1                 ;685
000a82  f7ffbffe          B.W      avar_bat_ips_hndl
;;;691    
                          ENDP

                  samokalibr_hndl PROC
;;;700    //-----------------------------------------------
;;;701    void samokalibr_hndl(void)
000a86  e92d47f0          PUSH     {r4-r10,lr}
;;;702    {
;;;703    if(++samokalibr_cnt>=1800)samokalibr_cnt=0;
000a8a  4cdb              LDR      r4,|L1.3576|
000a8c  8f60              LDRH     r0,[r4,#0x3a]  ; samokalibr_cnt
000a8e  1c40              ADDS     r0,r0,#1
000a90  b200              SXTH     r0,r0
000a92  8760              STRH     r0,[r4,#0x3a]
000a94  f5b06fe1          CMP      r0,#0x708
000a98  db02              BLT      |L1.2720|
000a9a  f04f0000          MOV      r0,#0
000a9e  8760              STRH     r0,[r4,#0x3a]
                  |L1.2720|
;;;704    
;;;705    if(samokalibr_cnt>=1785U)
000aa0  f9b4003a          LDRSH    r0,[r4,#0x3a]  ; samokalibr_cnt
000aa4  f5b06fdf          CMP      r0,#0x6f8
000aa8  d911              BLS      |L1.2766|
;;;706    	{
;;;707    	mess_send(MESS2RELE_HNDL,PARAM_RELE_SAMOKALIBR,1,15);
000aaa  230f              MOVS     r3,#0xf
000aac  2201              MOVS     r2,#1
000aae  2164              MOVS     r1,#0x64
000ab0  20d2              MOVS     r0,#0xd2
000ab2  f7fffffe          BL       mess_send
;;;708    	mess_send(MESS2IND_HNDL,PARAM_SAMOKALIBR,0,15);
000ab6  230f              MOVS     r3,#0xf
000ab8  2200              MOVS     r2,#0
000aba  21d8              MOVS     r1,#0xd8
000abc  20d7              MOVS     r0,#0xd7
000abe  f7fffffe          BL       mess_send
;;;709    	mess_send(MESS2MATEMAT,PARAM_SAMOKALIBR,0,15);
000ac2  230f              MOVS     r3,#0xf
000ac4  2200              MOVS     r2,#0
000ac6  21d8              MOVS     r1,#0xd8
000ac8  20dc              MOVS     r0,#0xdc
000aca  f7fffffe          BL       mess_send
                  |L1.2766|
;;;710    	} 
;;;711    
;;;712    if(samokalibr_cnt==1799U)
000ace  f9b4003a          LDRSH    r0,[r4,#0x3a]  ; samokalibr_cnt
000ad2  f5a061e0          SUB      r1,r0,#0x700
000ad6  3907              SUBS     r1,#7
000ad8  d133              BNE      |L1.2882|
;;;713    	{
;;;714    	if((Kibat0[0]!=ad7705_buff_[0])&&(abs(bat[0]._Ib/10)<IZMAX)) lc640_write_int(ADR_KI0BAT[0],ad7705_buff_[0]);
000ada  4dc8              LDR      r5,|L1.3580|
000adc  4cc8              LDR      r4,|L1.3584|
000ade  4ec9              LDR      r6,|L1.3588|
000ae0  8828              LDRH     r0,[r5,#0]  ; Kibat0
000ae2  8821              LDRH     r1,[r4,#0]  ; ad7705_buff_
000ae4  270a              MOVS     r7,#0xa
000ae6  f8df8320          LDR      r8,|L1.3592|
000aea  f8df9320          LDR      r9,|L1.3596|
000aee  4288              CMP      r0,r1
000af0  d010              BEQ      |L1.2836|
000af2  f9b60008          LDRSH    r0,[r6,#8]  ; bat
000af6  fb90f0f7          SDIV     r0,r0,r7
000afa  b200              SXTH     r0,r0
000afc  f7fffffe          BL       abs
000b00  f9b81000          LDRSH    r1,[r8,#0]  ; IZMAX
000b04  4288              CMP      r0,r1
000b06  da05              BGE      |L1.2836|
000b08  f9b41000          LDRSH    r1,[r4,#0]  ; ad7705_buff_
000b0c  f9b90000          LDRSH    r0,[r9,#0]  ; ADR_KI0BAT
000b10  f7fffffe          BL       lc640_write_int
                  |L1.2836|
;;;715    	if((Kibat0[1]!=ad7705_buff_[1])&&(abs(bat[0]._Ib/10)<IZMAX)) lc640_write_int(ADR_KI0BAT[1],ad7705_buff_[1]);
000b14  8868              LDRH     r0,[r5,#2]  ; Kibat0
000b16  8861              LDRH     r1,[r4,#2]  ; ad7705_buff_
000b18  4288              CMP      r0,r1
000b1a  d012              BEQ      |L1.2882|
000b1c  f9b60008          LDRSH    r0,[r6,#8]  ; bat
000b20  fb90f0f7          SDIV     r0,r0,r7
000b24  b200              SXTH     r0,r0
000b26  f7fffffe          BL       abs
000b2a  f9b81000          LDRSH    r1,[r8,#0]  ; IZMAX
000b2e  4288              CMP      r0,r1
000b30  da07              BGE      |L1.2882|
000b32  f9b41002          LDRSH    r1,[r4,#2]  ; ad7705_buff_
000b36  f9b90002          LDRSH    r0,[r9,#2]  ; ADR_KI0BAT
000b3a  e8bd47f0          POP      {r4-r10,lr}
000b3e  f7ffbffe          B.W      lc640_write_int
                  |L1.2882|
;;;716    	
;;;717    	}	 	
;;;718    }
000b42  e403              B        |L1.844|
;;;719    
                          ENDP

                  ubat_old_drv PROC
;;;722    //-----------------------------------------------
;;;723    void ubat_old_drv(void)
000b44  b510              PUSH     {r4,lr}
;;;724    {        
;;;725    bat_u_old_cnt++;
000b46  4cb2              LDR      r4,|L1.3600|
000b48  8820              LDRH     r0,[r4,#0]  ; bat_u_old_cnt
000b4a  f1000001          ADD      r0,r0,#1
000b4e  8020              STRH     r0,[r4,#0]
;;;726    gran_ring(&bat_u_old_cnt,0,8);
000b50  f04f0208          MOV      r2,#8
000b54  f04f0100          MOV      r1,#0
000b58  4620              MOV      r0,r4
000b5a  f7fffffe          BL       gran_ring
;;;727    
;;;728    bat[0]._u_old[bat_u_old_cnt]=bat[0]._Ub;
000b5e  49a9              LDR      r1,|L1.3588|
000b60  f9b40000          LDRSH    r0,[r4,#0]  ; bat_u_old_cnt
000b64  eb010040          ADD      r0,r1,r0,LSL #1
000b68  884a              LDRH     r2,[r1,#2]  ; bat
000b6a  8402              STRH     r2,[r0,#0x20]
;;;729    bat[1]._u_old[bat_u_old_cnt]=bat[1]._Ub;
000b6c  f8b1104e          LDRH     r1,[r1,#0x4e]  ; bat
000b70  f8a0106c          STRH     r1,[r0,#0x6c]
;;;730    }
000b74  bd10              POP      {r4,pc}
;;;731    
                          ENDP

                  unet_drv PROC
;;;732    //-----------------------------------------------
;;;733    void unet_drv(void)
000b76  b570              PUSH     {r4-r6,lr}
;;;734    {
;;;735    if(net_U<UMN)
000b78  4da6              LDR      r5,|L1.3604|
000b7a  48a7              LDR      r0,|L1.3608|
;;;736    	{
;;;737    	if((unet_drv_cnt<10)&&(main_1Hz_cnt>15))
000b7c  4aa7              LDR      r2,|L1.3612|
000b7e  f9b51000          LDRSH    r1,[r5,#0]            ;735  ; net_U
000b82  f9b03000          LDRSH    r3,[r0,#0]            ;735  ; UMN
000b86  f9920000          LDRSB    r0,[r2,#0]
000b8a  4299              CMP      r1,r3                 ;735
000b8c  da1f              BGE      |L1.3022|
;;;738    		{
;;;739    		unet_drv_cnt++;
;;;740    		if(unet_drv_cnt>=10)
;;;741    			{
;;;742    			net_Ustore=net_U;
000b8e  4ca4              LDR      r4,|L1.3616|
000b90  280a              CMP      r0,#0xa               ;737
000b92  da0f              BGE      |L1.2996|
000b94  4ba3              LDR      r3,|L1.3620|
000b96  f9b33000          LDRSH    r3,[r3,#0]            ;737  ; main_1Hz_cnt
000b9a  2b0f              CMP      r3,#0xf               ;737
000b9c  dd0a              BLE      |L1.2996|
000b9e  f1000001          ADD      r0,r0,#1              ;739
000ba2  b240              SXTB     r0,r0                 ;739
000ba4  7010              STRB     r0,[r2,#0]            ;739
000ba6  280a              CMP      r0,#0xa               ;740
000ba8  db09              BLT      |L1.3006|
000baa  8021              STRH     r1,[r4,#0]
;;;743    		 	avar_unet_hndl(1);
000bac  2001              MOVS     r0,#1
000bae  f7fffffe          BL       avar_unet_hndl
000bb2  e004              B        |L1.3006|
                  |L1.2996|
;;;744    			
;;;745    			}
;;;746    		}
;;;747    	else if(unet_drv_cnt>=10)unet_drv_cnt=10;
000bb4  280a              CMP      r0,#0xa
000bb6  db02              BLT      |L1.3006|
000bb8  f04f000a          MOV      r0,#0xa
000bbc  7010              STRB     r0,[r2,#0]
                  |L1.3006|
;;;748    
;;;749    	if(net_U<net_Ustore) net_Ustore=net_U;	
000bbe  f9b50000          LDRSH    r0,[r5,#0]  ; net_U
000bc2  f9b41000          LDRSH    r1,[r4,#0]  ; net_Ustore
000bc6  4288              CMP      r0,r1
000bc8  da00              BGE      |L1.3020|
000bca  8020              STRH     r0,[r4,#0]
                  |L1.3020|
;;;750    	}
;;;751    
;;;752    else if(net_U>UMN)
;;;753    	{                 
;;;754    	if(unet_drv_cnt)
;;;755    		{
;;;756    		unet_drv_cnt--;
;;;757    		if(unet_drv_cnt<=0)
;;;758    			{
;;;759    			avar_unet_hndl(0);
;;;760    			}
;;;761    		}
;;;762    	else if(unet_drv_cnt<0)unet_drv_cnt=0;
;;;763    	
;;;764    	}
;;;765    
;;;766    }
000bcc  bd70              POP      {r4-r6,pc}
                  |L1.3022|
000bce  ddfd              BLE      |L1.3020|
000bd0  2800              CMP      r0,#0                 ;754
000bd2  d0fb              BEQ      |L1.3020|
000bd4  f1a00001          SUB      r0,r0,#1              ;756
000bd8  b240              SXTB     r0,r0                 ;756
000bda  7010              STRB     r0,[r2,#0]            ;756
000bdc  2800              CMP      r0,#0                 ;757
000bde  dcf5              BGT      |L1.3020|
000be0  e8bd4070          POP      {r4-r6,lr}            ;759
000be4  2000              MOVS     r0,#0                 ;759
000be6  f7ffbffe          B.W      avar_unet_hndl
;;;767    
                          ENDP

                  matemat PROC
;;;768    //-----------------------------------------------
;;;769    void matemat(void)
000bea  e92d5fff          PUSH     {r0-r12,lr}
;;;770    {
;;;771    //signed short temp_SS;
;;;772    signed long temp_SL/*,temp_SL_*/;
;;;773    char /*temp,*/i;
;;;774    signed short temp_SS;
;;;775    
;;;776    #ifdef UKU_MGTS
;;;777    // 
;;;778    temp_SL=(signed long)net_buff_;
;;;779    temp_SL*=Kunet;
;;;780    temp_SL/=110000L;
;;;781    net_U=(signed short)temp_SL;
;;;782    #endif
;;;783    
;;;784    #ifdef UKU_RSTKM
;;;785    // 
;;;786    temp_SL=(signed long)net_buff_;
;;;787    temp_SL*=Kunet;
;;;788    temp_SL/=110000L;
;;;789    net_U=(signed short)temp_SL;
;;;790    #endif
;;;791    
;;;792    #ifdef UKU_3U
;;;793    // 
;;;794    temp_SL=(signed long)net_buff_;
;;;795    temp_SL*=Kunet;
;;;796    temp_SL/=36000L;
;;;797    net_U=(signed short)temp_SL;
;;;798    #endif
;;;799    
;;;800    #ifdef UKU_6U
;;;801    // 
;;;802    
;;;803    if((AUSW_MAIN%10)||(AUSW_MAIN==2400)||(AUSW_MAIN==4800)||(AUSW_MAIN==6000))
;;;804    	{
;;;805    
;;;806    	if(bps[11]._device==dNET_METR)
;;;807    		{
;;;808    		net_metr_buff_[0]=((signed short)bps[11]._buff[0])+(((signed short)bps[11]._buff[1])<<8);
;;;809    		net_metr_buff_[1]=((signed short)bps[11]._buff[2])+(((signed short)bps[11]._buff[3])<<8);
;;;810    		net_metr_buff_[2]=((signed short)bps[11]._buff[4])+(((signed short)bps[11]._buff[5])<<8);
;;;811    
;;;812    		temp_SL=(signed long)net_metr_buff_[0];
;;;813    		temp_SL*=KunetA;
;;;814    		temp_SL/=6000L;
;;;815    		net_Ua=(signed short)temp_SL;
;;;816    	
;;;817    		temp_SL=(signed long)net_metr_buff_[1];
;;;818    		temp_SL*=KunetB;
;;;819    		temp_SL/=6000L;
;;;820    		net_Ub=(signed short)temp_SL;
;;;821    	
;;;822    		temp_SL=(signed long)net_metr_buff_[2];
;;;823    		temp_SL*=KunetC;
;;;824    		temp_SL/=6000L;
;;;825    		net_Uc=(signed short)temp_SL;
;;;826    		}
;;;827    	else
;;;828    		{
;;;829    		temp_SL=(signed long)net_buff_;
;;;830    		temp_SL*=KunetA;
;;;831    		temp_SL/=110000L;
;;;832    		net_Ua=(signed short)temp_SL;
;;;833    	
;;;834    		temp_SL=(signed long)adc_buff_[3];
;;;835    		temp_SL*=KunetB;
;;;836    		temp_SL/=6000L;
;;;837    		net_Ub=(signed short)temp_SL;
;;;838    	
;;;839    		temp_SL=(signed long)adc_buff_[10];
;;;840    		temp_SL*=KunetC;
;;;841    		temp_SL/=6000L;
;;;842    		net_Uc=(signed short)temp_SL;
;;;843    		}
;;;844    
;;;845    	net_U=net_Ua;
;;;846    	if(net_Ub<net_U)net_U=net_Ub;
;;;847    	if(net_Uc<net_U)net_U=net_Uc;
;;;848    	}
;;;849    else 
;;;850    	{
;;;851    	temp_SL=(signed long)net_buff_;
;;;852    	temp_SL*=Kunet;
;;;853    	temp_SL/=110000L;
;;;854    	net_U=(signed short)temp_SL;
;;;855    	}
;;;856    
;;;857    
;;;858    
;;;859    
;;;860    #endif
;;;861    
;;;862    #ifdef UKU_GLONASS
;;;863    // 
;;;864    temp_SL=(signed long)net_buff_;
;;;865    temp_SL*=Kunet;
;;;866    temp_SL/=110000L;
;;;867    net_U=(signed short)temp_SL;
;;;868    #endif
;;;869    
;;;870    #ifdef UKU_KONTUR
;;;871    // 
;;;872    temp_SL=(signed long)net_buff_;
;;;873    temp_SL*=Kunet;
;;;874    temp_SL/=110000L;
;;;875    net_U=(signed short)temp_SL;
;;;876    #endif
;;;877    
;;;878    
;;;879    #ifdef UKU_220_V2
;;;880    // 
;;;881    
;;;882    if(AUSW_MAIN==22033)
;;;883    	{
;;;884    	temp_SL=(signed long)net_buff_;
;;;885    	temp_SL*=KunetA;
;;;886    	temp_SL/=6000L;
;;;887    	net_Ua=(signed short)temp_SL;
;;;888    
;;;889    	temp_SL=(signed long)adc_buff_[3];
;;;890    	temp_SL*=KunetB;
;;;891    	temp_SL/=6000L;
;;;892    	net_Ub=(signed short)temp_SL;
;;;893    
;;;894    	temp_SL=(signed long)adc_buff_[10];
;;;895    	temp_SL*=KunetC;
;;;896    	temp_SL/=6000L;
;;;897    	net_Uc=(signed short)temp_SL;
;;;898    
;;;899    	net_U=net_Ua;
;;;900    	if(net_Ub<net_U)net_U=net_Ub;
;;;901    	if(net_Uc<net_U)net_U=net_Uc;
;;;902    	}
;;;903    else
;;;904    	{
;;;905    	temp_SL=(signed long)net_buff_;
;;;906    	temp_SL*=Kunet;
;;;907    	temp_SL/=5000L;
;;;908    	net_U=(signed short)temp_SL;
;;;909    	}
;;;910    #endif
;;;911    
;;;912    
;;;913    #ifdef UKU_220
;;;914    // 
;;;915    
;;;916    if(AUSW_MAIN==22035)
;;;917    	{
;;;918    	temp_SL=(signed long)net_buff_;
;;;919    	temp_SL*=KunetA;
;;;920    	temp_SL/=6000L;
;;;921    	net_Ua=(signed short)temp_SL;
;;;922    
;;;923    	temp_SL=(signed long)adc_buff_[3];
;;;924    	temp_SL*=KunetB;
;;;925    	temp_SL/=6000L;
;;;926    	net_Ub=(signed short)temp_SL;
;;;927    
;;;928    	temp_SL=(signed long)adc_buff_[10];
;;;929    	temp_SL*=KunetC;
;;;930    	temp_SL/=6000L;
;;;931    	net_Uc=(signed short)temp_SL;
;;;932    
;;;933    	net_U=net_Ua;
;;;934    	if(net_Ub<net_U)net_U=net_Ub;
;;;935    	if(net_Uc<net_U)net_U=net_Uc;
;;;936    	}
;;;937    else
;;;938    	{
;;;939    	temp_SL=(signed long)net_buff_;
;;;940    	temp_SL*=Kunet;
;;;941    	#ifdef _ACDC_
;;;942    	temp_SL/=500L;
;;;943    	#else
;;;944    	temp_SL/=5000L;
;;;945    	#endif
;;;946    	net_U=(signed short)temp_SL;
;;;947    	
;;;948    	}
;;;949    #endif
;;;950    
;;;951    #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;952    // 
;;;953    
;;;954    
;;;955    	if(bps[11]._device==dNET_METR)
000bee  488e              LDR      r0,|L1.3624|
;;;956    		{
;;;957    		net_metr_buff_[0]=((signed short)bps[11]._buff[0])+(((signed short)bps[11]._buff[1])<<8);
;;;958    		net_metr_buff_[1]=((signed short)bps[11]._buff[2])+(((signed short)bps[11]._buff[3])<<8);
;;;959    		net_metr_buff_[2]=((signed short)bps[11]._buff[4])+(((signed short)bps[11]._buff[5])<<8);
;;;960    
;;;961    		temp_SL=(signed long)net_metr_buff_[2];
;;;962    		temp_SL*=KunetA;
000bf0  4b8e              LDR      r3,|L1.3628|
;;;963    		temp_SL/=6000L;
;;;964    		net_Ua=(signed short)temp_SL;
;;;965    	
;;;966    		temp_SL=(signed long)net_metr_buff_[1];
;;;967    		temp_SL*=KunetB;
000bf2  4990              LDR      r1,|L1.3636|
000bf4  f890039c          LDRB     r0,[r0,#0x39c]        ;955  ; bps
000bf8  9003              STR      r0,[sp,#0xc]          ;962
;;;968    		temp_SL/=6000L;
;;;969    		net_Ub=(signed short)temp_SL;
;;;970    	
;;;971    		temp_SL=(signed long)net_metr_buff_[0];
;;;972    		temp_SL*=KunetC;
000bfa  4a8f              LDR      r2,|L1.3640|
000bfc  f9b3b000          LDRSH    r11,[r3,#0]           ;962
000c00  f9b11000          LDRSH    r1,[r1,#0]            ;967
000c04  9102              STR      r1,[sp,#8]
000c06  f8dfc228          LDR      r12,|L1.3632|
000c0a  f9b21000          LDRSH    r1,[r2,#0]
000c0e  4b8b              LDR      r3,|L1.3644|
;;;973    		temp_SL/=6000L;
;;;974    		net_Uc=(signed short)temp_SL;
000c10  f8df822c          LDR      r8,|L1.3648|
;;;975    
;;;976    		net_F3=((signed short)bps[11]._buff[6])+(((signed short)bps[11]._buff[7])<<8);
;;;977    
;;;978    		net_U=net_Ua;
;;;979    		if(net_Ub<net_U)net_U=net_Ub;
;;;980    		if(net_Uc<net_U)net_U=net_Uc;
;;;981    		}
;;;982    	  else if(AUSW_MAIN==22033)
;;;983    	{
;;;984    	temp_SL=(signed long)net_buff_;
000c14  4f78              LDR      r7,|L1.3576|
000c16  f2456411          MOV      r4,#0x5611            ;982
;;;985    	temp_SL*=KunetA;
;;;986    	temp_SL/=4000L;
;;;987    	net_Ua=(signed short)temp_SL;
;;;988    
;;;989    	temp_SL=(signed long)adc_buff_[3];
;;;990    	temp_SL*=KunetB;
;;;991    	temp_SL/=6000L;
;;;992    	net_Ub=(signed short)temp_SL;
;;;993    
;;;994    	temp_SL=(signed long)adc_buff_[10];
;;;995    	temp_SL*=KunetC;
;;;996    	temp_SL/=6000L;
;;;997    	net_Uc=(signed short)temp_SL;
;;;998    
;;;999    	net_U=net_Ua;
;;;1000   	if(net_Ub<net_U)net_U=net_Ub;
;;;1001   	if(net_Uc<net_U)net_U=net_Uc;
;;;1002   	}
;;;1003   else if((AUSW_MAIN==22063)||(AUSW_MAIN==22023)||(AUSW_MAIN==22043))
;;;1004   	{
;;;1005   	temp_SL=(signed long)net_buff_;
;;;1006   	temp_SL*=KunetA;
;;;1007   	temp_SL/=40000L;
;;;1008   	net_Ua=(signed short)temp_SL;
;;;1009   
;;;1010   	temp_SL=(signed long)adc_buff_[3];
;;;1011   	temp_SL*=KunetB;
;;;1012   	temp_SL/=6000L;
;;;1013   	net_Ub=(signed short)temp_SL;
;;;1014   
;;;1015   	temp_SL=(signed long)adc_buff_[10];
;;;1016   	temp_SL*=KunetC;
;;;1017   	temp_SL/=6000L;
;;;1018   	net_Uc=(signed short)temp_SL;
;;;1019   
;;;1020   	net_U=net_Ua;
;;;1021   	if(net_Ub<net_U)net_U=net_Ub;
;;;1022   	if(net_Uc<net_U)net_U=net_Uc;
;;;1023   	}
;;;1024   else	if((AUSW_MAIN==22010)||(AUSW_MAIN==22011) )
;;;1025   	{
;;;1026   	temp_SL=(signed long)net_buff_;
;;;1027   	temp_SL*=Kunet;
;;;1028   	temp_SL/=35000L;
;;;1029   	net_U=(signed short)temp_SL;
;;;1030   	
;;;1031   	}
;;;1032   else
;;;1033   	{
;;;1034   	temp_SL=(signed long)net_buff_;
;;;1035   	temp_SL*=Kunet;
;;;1036   	#ifdef _ACDC_
;;;1037   	temp_SL/=500L;
000c1a  f44f76fa          MOV      r6,#0x1f4
000c1e  f24555fa          MOV      r5,#0x55fa            ;1024
000c22  9101              STR      r1,[sp,#4]            ;955
000c24  2807              CMP      r0,#7                 ;955
000c26  d03a              BEQ      |L1.3230|
000c28  4639              MOV      r1,r7                 ;984
000c2a  f8df921c          LDR      r9,|L1.3656|
000c2e  8cca              LDRH     r2,[r1,#0x26]         ;984
000c30  497e              LDR      r1,|L1.3628|
000c32  f8dfa200          LDR      r10,|L1.3636|
000c36  f2417b70          MOV      r11,#0x1770           ;963
000c3a  f9b11000          LDRSH    r1,[r1,#0]            ;962
000c3e  f9baa000          LDRSH    r10,[r10,#0]          ;967
000c42  434a              MULS     r2,r1,r2              ;985
000c44  f9b91006          LDRSH    r1,[r9,#6]            ;989
000c48  f9b99014          LDRSH    r9,[r9,#0x14]         ;994
000c4c  fb01f10a          MUL      r1,r1,r10             ;990
000c50  f8dfa1e4          LDR      r10,|L1.3640|
000c54  fb91f1fb          SDIV     r1,r1,r11             ;991
000c58  f9baa000          LDRSH    r10,[r10,#0]          ;972
000c5c  4879              LDR      r0,|L1.3652|
000c5e  fb09f90a          MUL      r9,r9,r10             ;995
000c62  fb99f9fb          SDIV     r9,r9,r11             ;996
000c66  8800              LDRH     r0,[r0,#0]            ;982  ; AUSW_MAIN
000c68  b209              SXTH     r1,r1                 ;992
000c6a  fa0ff989          SXTH     r9,r9                 ;997
000c6e  42a0              CMP      r0,r4                 ;982
000c70  d15c              BNE      |L1.3372|
000c72  f44f607a          MOV      r0,#0xfa0             ;986
000c76  fb92f0f0          SDIV     r0,r2,r0              ;986
000c7a  b200              SXTH     r0,r0                 ;987
000c7c  f8ac0000          STRH     r0,[r12,#0]           ;987
000c80  8019              STRH     r1,[r3,#0]            ;992
000c82  f8a89000          STRH     r9,[r8,#0]            ;997
000c86  4a63              LDR      r2,|L1.3604|
000c88  8010              STRH     r0,[r2,#0]            ;999
000c8a  4281              CMP      r1,r0                 ;1000
000c8c  da00              BGE      |L1.3216|
000c8e  8011              STRH     r1,[r2,#0]            ;1000
                  |L1.3216|
000c90  f9b20000          LDRSH    r0,[r2,#0]            ;1001  ; net_U
000c94  4581              CMP      r9,r0                 ;1001
000c96  da01              BGE      |L1.3228|
000c98  f8a29000          STRH     r9,[r2,#0]            ;1001
                  |L1.3228|
000c9c  e07e              B        |L1.3484|
                  |L1.3230|
000c9e  486b              LDR      r0,|L1.3660|
000ca0  f8df9154          LDR      r9,|L1.3576|
000ca4  7801              LDRB     r1,[r0,#0]            ;957  ; bps
000ca6  7842              LDRB     r2,[r0,#1]            ;957  ; bps
000ca8  f1090988          ADD      r9,r9,#0x88           ;957
000cac  eb012102          ADD      r1,r1,r2,LSL #8       ;957
000cb0  fa1ffa81          UXTH     r10,r1                ;957
000cb4  f8a9a000          STRH     r10,[r9,#0]           ;957
000cb8  7881              LDRB     r1,[r0,#2]            ;958  ; bps
000cba  78c2              LDRB     r2,[r0,#3]            ;958  ; bps
000cbc  eb012102          ADD      r1,r1,r2,LSL #8       ;958
000cc0  b289              UXTH     r1,r1                 ;958
000cc2  f8a91002          STRH     r1,[r9,#2]            ;958
000cc6  7902              LDRB     r2,[r0,#4]            ;959  ; bps
000cc8  f890e005          LDRB     lr,[r0,#5]            ;959  ; bps
000ccc  eb02220e          ADD      r2,r2,lr,LSL #8       ;959
000cd0  b292              UXTH     r2,r2                 ;959
000cd2  f8a92004          STRH     r2,[r9,#4]            ;959
000cd6  fb02f20b          MUL      r2,r2,r11             ;962
000cda  f2417970          MOV      r9,#0x1770            ;963
000cde  fb92f2f9          SDIV     r2,r2,r9              ;963
000ce2  fa0ffb82          SXTH     r11,r2                ;964
000ce6  f8acb000          STRH     r11,[r12,#0]          ;964
000cea  9a02              LDR      r2,[sp,#8]            ;967
000cec  fb01f102          MUL      r1,r1,r2              ;967
000cf0  fb91f1f9          SDIV     r1,r1,r9              ;968
000cf4  b209              SXTH     r1,r1                 ;969
000cf6  8019              STRH     r1,[r3,#0]            ;969
000cf8  9a01              LDR      r2,[sp,#4]            ;972
000cfa  fb0afa02          MUL      r10,r10,r2            ;972
000cfe  fb9af2f9          SDIV     r2,r10,r9             ;973
000d02  b212              SXTH     r2,r2                 ;974
000d04  f8a82000          STRH     r2,[r8,#0]            ;974
000d08  7983              LDRB     r3,[r0,#6]            ;976  ; bps
000d0a  79c0              LDRB     r0,[r0,#7]            ;976  ; bps
000d0c  eb032300          ADD      r3,r3,r0,LSL #8       ;976
000d10  484f              LDR      r0,|L1.3664|
000d12  8003              STRH     r3,[r0,#0]            ;976
000d14  483f              LDR      r0,|L1.3604|
000d16  f8a0b000          STRH     r11,[r0,#0]           ;978
000d1a  4559              CMP      r1,r11                ;979
000d1c  da00              BGE      |L1.3360|
000d1e  8001              STRH     r1,[r0,#0]            ;979
                  |L1.3360|
000d20  f9b01000          LDRSH    r1,[r0,#0]            ;980  ; net_U
000d24  428a              CMP      r2,r1                 ;980
000d26  da39              BGE      |L1.3484|
000d28  8002              STRH     r2,[r0,#0]            ;980
000d2a  e037              B        |L1.3484|
                  |L1.3372|
000d2c  f5a04aac          SUB      r10,r0,#0x5600        ;1003
000d30  f1ba0a2f          SUBS     r10,r10,#0x2f         ;1003
000d34  d005              BEQ      |L1.3394|
000d36  f11a0a28          ADDS     r10,r10,#0x28         ;1003
000d3a  d002              BEQ      |L1.3394|
000d3c  f1ba0a14          SUBS     r10,r10,#0x14         ;1003
000d40  d115              BNE      |L1.3438|
                  |L1.3394|
000d42  f6494040          MOV      r0,#0x9c40            ;1007
000d46  fb92f0f0          SDIV     r0,r2,r0              ;1007
000d4a  b200              SXTH     r0,r0                 ;1008
000d4c  f8ac0000          STRH     r0,[r12,#0]           ;1008
000d50  8019              STRH     r1,[r3,#0]            ;1013
000d52  f8a89000          STRH     r9,[r8,#0]            ;1018
000d56  4a2f              LDR      r2,|L1.3604|
000d58  8010              STRH     r0,[r2,#0]            ;1020
000d5a  4281              CMP      r1,r0                 ;1021
000d5c  da00              BGE      |L1.3424|
000d5e  8011              STRH     r1,[r2,#0]            ;1021
                  |L1.3424|
000d60  f9b20000          LDRSH    r0,[r2,#0]            ;1022  ; net_U
000d64  4581              CMP      r9,r0                 ;1022
000d66  da19              BGE      |L1.3484|
000d68  f8a29000          STRH     r9,[r2,#0]            ;1022
000d6c  e016              B        |L1.3484|
                  |L1.3438|
000d6e  4939              LDR      r1,|L1.3668|
000d70  f9b12000          LDRSH    r2,[r1,#0]            ;1027
000d74  4920              LDR      r1,|L1.3576|
000d76  8cc9              LDRH     r1,[r1,#0x26]         ;984
000d78  4351              MULS     r1,r2,r1              ;1027
000d7a  42a8              CMP      r0,r5                 ;1024
000d7c  d003              BEQ      |L1.3462|
000d7e  f5a042aa          SUB      r2,r0,#0x5500         ;1024
000d82  3afb              SUBS     r2,r2,#0xfb           ;1024
000d84  d106              BNE      |L1.3476|
                  |L1.3462|
000d86  f64800b8          MOV      r0,#0x88b8            ;1028
000d8a  fb91f0f0          SDIV     r0,r1,r0              ;1028
000d8e  4921              LDR      r1,|L1.3604|
000d90  8008              STRH     r0,[r1,#0]            ;1029
000d92  e003              B        |L1.3484|
                  |L1.3476|
000d94  fb91f0f6          SDIV     r0,r1,r6
;;;1038   	#else
;;;1039   	temp_SL/=5000L;
;;;1040   	#endif
;;;1041   	net_U=(signed short)temp_SL;
000d98  491e              LDR      r1,|L1.3604|
000d9a  8008              STRH     r0,[r1,#0]
                  |L1.3484|
;;;1042   	
;;;1043   	}
;;;1044   if(bps[11]._device!=dNET_METR) net_F3=net_F;
000d9c  9803              LDR      r0,[sp,#0xc]
000d9e  2807              CMP      r0,#7
000da0  d003              BEQ      |L1.3498|
000da2  482d              LDR      r0,|L1.3672|
000da4  8801              LDRH     r1,[r0,#0]  ; net_F
000da6  482a              LDR      r0,|L1.3664|
000da8  8001              STRH     r1,[r0,#0]
                  |L1.3498|
;;;1045   #endif
;;;1046   
;;;1047   #ifdef UKU_TELECORE2015
;;;1048   // 
;;;1049   temp_SL=(signed long)net_buff_;
;;;1050   temp_SL*=Kunet;
;;;1051   temp_SL/=110000L;
;;;1052   net_U=(signed short)temp_SL;
;;;1053   #endif
;;;1054   
;;;1055   // 
;;;1056   temp_SL=(signed long)adc_buff_[0];
000daa  4827              LDR      r0,|L1.3656|
000dac  f9b02000          LDRSH    r2,[r0,#0]  ; adc_buff_
;;;1057   temp_SL*=Kubat[0];
000db0  f8dfc0a8          LDR      r12,|L1.3676|
000db4  f9bc1000          LDRSH    r1,[r12,#0]  ; Kubat
000db8  4351              MULS     r1,r2,r1
;;;1058   temp_SL/=2000L;
000dba  f44f69fa          MOV      r9,#0x7d0
000dbe  fb91f1f9          SDIV     r1,r1,r9
;;;1059   bat[0]._Ub=(signed short)temp_SL;
000dc2  f8df8040          LDR      r8,|L1.3588|
000dc6  f8a81002          STRH     r1,[r8,#2]
;;;1060   
;;;1061   #ifdef UKU_220
;;;1062   // 
;;;1063   temp_SL=(signed long)adc_buff_[0];
;;;1064   temp_SL*=Kubat[0];
;;;1065   temp_SL/=400L;
;;;1066   bat[0]._Ub=(signed short)temp_SL;
;;;1067   #endif
;;;1068   
;;;1069   #ifdef UKU_220_V2
;;;1070   // 
;;;1071   temp_SL=(signed long)adc_buff_[0];
;;;1072   temp_SL*=Kubat[0];
;;;1073   temp_SL/=400L;
;;;1074   bat[0]._Ub=(signed short)temp_SL;
;;;1075   #endif
;;;1076   
;;;1077   temp_SL=(signed long)adc_buff_[4];
000dca  f9b03008          LDRSH    r3,[r0,#8]  ; adc_buff_
;;;1078   temp_SL*=Kubatm[0];
000dce  4a24              LDR      r2,|L1.3680|
000dd0  f9b21000          LDRSH    r1,[r2,#0]  ; Kubatm
000dd4  fb01f103          MUL      r1,r1,r3
;;;1079   temp_SL/=700L;
000dd8  f44f732f          MOV      r3,#0x2bc
000ddc  fb91f1f3          SDIV     r1,r1,r3
;;;1080   bat[0]._Ubm=(signed short)temp_SL;
000de0  e040              B        |L1.3684|
000de2  0000              DCW      0x0000
                  |L1.3556|
                          DCD      mess_data
                  |L1.3560|
                          DCD      USIGN
                  |L1.3564|
                          DCD      load_U
                  |L1.3568|
                          DCD      load_I
                  |L1.3572|
                          DCD      bat_ips
                  |L1.3576|
                          DCD      ||area_number.21||
                  |L1.3580|
                          DCD      Kibat0
                  |L1.3584|
                          DCD      ad7705_buff_
                  |L1.3588|
                          DCD      bat
                  |L1.3592|
                          DCD      IZMAX
                  |L1.3596|
                          DCD      ADR_KI0BAT
                  |L1.3600|
                          DCD      bat_u_old_cnt
                  |L1.3604|
                          DCD      net_U
                  |L1.3608|
                          DCD      UMN
                  |L1.3612|
                          DCD      unet_drv_cnt
                  |L1.3616|
                          DCD      net_Ustore
                  |L1.3620|
                          DCD      main_1Hz_cnt
                  |L1.3624|
                          DCD      bps
                  |L1.3628|
                          DCD      KunetA
                  |L1.3632|
                          DCD      net_Ua
                  |L1.3636|
                          DCD      KunetB
                  |L1.3640|
                          DCD      KunetC
                  |L1.3644|
                          DCD      net_Ub
                  |L1.3648|
                          DCD      net_Uc
                  |L1.3652|
                          DCD      AUSW_MAIN
                  |L1.3656|
                          DCD      ||.bss||+0x400
                  |L1.3660|
                          DCD      bps+0x3a2
                  |L1.3664|
                          DCD      net_F3
                  |L1.3668|
                          DCD      Kunet
                  |L1.3672|
                          DCD      net_F
                  |L1.3676|
                          DCD      Kubat
                  |L1.3680|
                          DCD      Kubatm
                  |L1.3684|
000e64  f8a81004          STRH     r1,[r8,#4]
;;;1081   
;;;1082   #ifdef UKU_KONTUR
;;;1083   temp_SL=(signed long)adc_buff_[4];
;;;1084   temp_SL*=Kubatm[0];
;;;1085   temp_SL/=2000L;
;;;1086   bat[0]._Ubm=(signed short)temp_SL;
;;;1087   #endif
;;;1088   
;;;1089   temp_SL=(signed long)adc_buff_[12];
000e68  f9b0a018          LDRSH    r10,[r0,#0x18]  ; adc_buff_
;;;1090   temp_SL*=Kubat[1];
000e6c  f9bc1002          LDRSH    r1,[r12,#2]  ; Kubat
000e70  fb01f10a          MUL      r1,r1,r10
;;;1091   temp_SL/=2000L;
000e74  fb91f1f9          SDIV     r1,r1,r9
;;;1092   bat[1]._Ub=(signed short)temp_SL;
000e78  f8a8104e          STRH     r1,[r8,#0x4e]
;;;1093   
;;;1094   #ifdef UKU_220
;;;1095   temp_SL=(signed long)adc_buff_[12];
;;;1096   temp_SL*=Kubat[1];
;;;1097   temp_SL/=400L;
;;;1098   bat[1]._Ub=(signed short)temp_SL;
;;;1099   #endif
;;;1100   
;;;1101   #ifdef UKU_220_V2
;;;1102   temp_SL=(signed long)adc_buff_[12];
;;;1103   temp_SL*=Kubat[1];
;;;1104   temp_SL/=400L;
;;;1105   bat[1]._Ub=(signed short)temp_SL;
;;;1106   #endif
;;;1107   
;;;1108   temp_SL=(signed long)adc_buff_[1];
000e7c  f9b01002          LDRSH    r1,[r0,#2]  ; adc_buff_
;;;1109   temp_SL*=Kubatm[1];
000e80  f9b20002          LDRSH    r0,[r2,#2]  ; Kubatm
000e84  fb00f001          MUL      r0,r0,r1
;;;1110   temp_SL/=700L;
000e88  fb90f0f3          SDIV     r0,r0,r3
;;;1111   bat[1]._Ubm=(signed short)temp_SL;
000e8c  f8a80050          STRH     r0,[r8,#0x50]
;;;1112   #ifdef UKU_KONTUR
;;;1113   temp_SL=(signed long)adc_buff_[1];
;;;1114   temp_SL*=Kubatm[1];
;;;1115   temp_SL/=2000L;
;;;1116   bat[1]._Ubm=(signed short)temp_SL;
;;;1117   #endif
;;;1118   
;;;1119   #ifdef UKU_TELECORE2015
;;;1120   temp_SL=(signed long)adc_buff_[2];
;;;1121   temp_SL*=Kubat[0];
;;;1122   temp_SL/=2000L;
;;;1123   bat[0]._Ub=(signed short)temp_SL;
;;;1124   #endif
;;;1125   
;;;1126   /*
;;;1127   // 
;;;1128   if(!mess_find_unvol(MESS2MATEMAT))
;;;1129   	{
;;;1130   	temp_SL=(signed long)ad7705_buff_[0];
;;;1131   	temp_SL-=(signed long)Kibat0[0];
;;;1132   	temp_SL*=(signed long)Kibat1[0];
;;;1133   	if((AUSW_MAIN==24120)||(AUSW_MAIN==24210))temp_SL/=300L;
;;;1134   	else temp_SL/=1000L;
;;;1135   	bat[0]._Ib=(signed short)temp_SL;
;;;1136   
;;;1137   	temp_SL=(signed long)ad7705_buff_[1];
;;;1138   	temp_SL-=(signed long)Kibat0[1];
;;;1139   	temp_SL*=(signed long)Kibat1[1];
;;;1140   	if((AUSW_MAIN==24120)||(AUSW_MAIN==24210))temp_SL/=300L;
;;;1141   	else temp_SL/=1000L;
;;;1142   	bat[1]._Ib=(signed short)temp_SL;
;;;1143   	}
;;;1144   */
;;;1145   
;;;1146   
;;;1147   // 
;;;1148   if(!mess_find_unvol(MESS2MATEMAT))
000e90  f04f00dc          MOV      r0,#0xdc
000e94  f7fffffe          BL       mess_find_unvol
;;;1149   	{
;;;1150   	temp_SL=(signed long)ad7705_buff_[0];
;;;1151   	temp_SL-=(signed long)Kibat0[0];
;;;1152   	temp_SL*=(signed long)Kibat1[0];
;;;1153   	if((AUSW_MAIN==24120)||(AUSW_MAIN==24210))temp_SL/=300L;
;;;1154   	else if((AUSW_MAIN==22010)||(AUSW_MAIN==22035)||(AUSW_MAIN==22033))temp_SL/=2000L;
000e98  f2456213          MOV      r2,#0x5613
000e9c  bbf0              CBNZ     r0,|L1.3868|
000e9e  f8dfa3fc          LDR      r10,|L1.4764|
000ea2  f8ba0000          LDRH     r0,[r10,#0]           ;1150  ; ad7705_buff_
000ea6  f8dfb3f8          LDR      r11,|L1.4768|
000eaa  f8bb1000          LDRH     r1,[r11,#0]           ;1151  ; Kibat0
000eae  eba00001          SUB      r0,r0,r1              ;1151
000eb2  4bfc              LDR      r3,|L1.4772|
000eb4  f9b31000          LDRSH    r1,[r3,#0]            ;1152  ; Kibat1
000eb8  fb01f100          MUL      r1,r1,r0              ;1152
000ebc  48fa              LDR      r0,|L1.4776|
000ebe  f6456c38          MOV      r12,#0x5e38           ;1153
000ec2  8800              LDRH     r0,[r0,#0]            ;1153  ; AUSW_MAIN
000ec4  4560              CMP      r0,r12                ;1153
000ec6  d004              BEQ      |L1.3794|
000ec8  f5a04ebc          SUB      lr,r0,#0x5e00         ;1153
000ecc  f1be0e92          SUBS     lr,lr,#0x92           ;1153
000ed0  d104              BNE      |L1.3804|
                  |L1.3794|
000ed2  f44f7e96          MOV      lr,#0x12c             ;1153
000ed6  fb91f1fe          SDIV     r1,r1,lr              ;1153
000eda  e00c              B        |L1.3830|
                  |L1.3804|
000edc  42a8              CMP      r0,r5
000ede  d003              BEQ      |L1.3816|
000ee0  4290              CMP      r0,r2
000ee2  d001              BEQ      |L1.3816|
000ee4  42a0              CMP      r0,r4
000ee6  d102              BNE      |L1.3822|
                  |L1.3816|
000ee8  fb91f1f9          SDIV     r1,r1,r9
000eec  e003              B        |L1.3830|
                  |L1.3822|
;;;1155   	else temp_SL/=1000L;
000eee  f44f7e7a          MOV      lr,#0x3e8
000ef2  fb91f1fe          SDIV     r1,r1,lr
                  |L1.3830|
;;;1156   	#ifdef UKU_TELECORE2015
;;;1157   	temp_SL/=2L;
;;;1158   	temp_SL=-temp_SL;
;;;1159   	#endif
;;;1160   	bat[0]._Ib=(signed short)temp_SL;
000ef6  f8a81008          STRH     r1,[r8,#8]
;;;1161   
;;;1162   	temp_SL=(signed long)ad7705_buff_[1];
000efa  f8ba1002          LDRH     r1,[r10,#2]  ; ad7705_buff_
;;;1163   	temp_SL-=(signed long)Kibat0[1];
000efe  f8bba002          LDRH     r10,[r11,#2]  ; Kibat0
000f02  eba10a0a          SUB      r10,r1,r10
;;;1164   	temp_SL*=(signed long)Kibat1[1];
000f06  f9b31002          LDRSH    r1,[r3,#2]  ; Kibat1
000f0a  fb01f10a          MUL      r1,r1,r10
;;;1165   	if((AUSW_MAIN==24120)||(AUSW_MAIN==24210))temp_SL/=300L;
000f0e  4560              CMP      r0,r12
000f10  d003              BEQ      |L1.3866|
000f12  f5a043bc          SUB      r3,r0,#0x5e00
000f16  3b92              SUBS     r3,r3,#0x92
000f18  d106              BNE      |L1.3880|
                  |L1.3866|
000f1a  e000              B        |L1.3870|
                  |L1.3868|
000f1c  e013              B        |L1.3910|
                  |L1.3870|
000f1e  f44f7096          MOV      r0,#0x12c
000f22  fb91f0f0          SDIV     r0,r1,r0
000f26  e00c              B        |L1.3906|
                  |L1.3880|
;;;1166   	else if((AUSW_MAIN==22010)||(AUSW_MAIN==22035)||(AUSW_MAIN==22033))temp_SL/=2000L;
000f28  42a8              CMP      r0,r5
000f2a  d003              BEQ      |L1.3892|
000f2c  4290              CMP      r0,r2
000f2e  d001              BEQ      |L1.3892|
000f30  42a0              CMP      r0,r4
000f32  d102              BNE      |L1.3898|
                  |L1.3892|
000f34  fb91f0f9          SDIV     r0,r1,r9
000f38  e003              B        |L1.3906|
                  |L1.3898|
;;;1167   	else temp_SL/=1000L;
000f3a  f44f707a          MOV      r0,#0x3e8
000f3e  fb91f0f0          SDIV     r0,r1,r0
                  |L1.3906|
;;;1168   	bat[1]._Ib=(signed short)temp_SL;
000f42  f8a80054          STRH     r0,[r8,#0x54]
                  |L1.3910|
;;;1169   	}
;;;1170   
;;;1171   
;;;1172   
;;;1173   
;;;1174   
;;;1175   // 
;;;1176   
;;;1177   #ifdef UKU_KONTUR
;;;1178   if((adc_buff_[6]>800)&&(adc_buff_[6]<3800))bat[0]._nd=0;
;;;1179   else bat[0]._nd=1;
;;;1180   temp_SL=(signed long)adc_buff_[6];
;;;1181   temp_SL*=Ktbat[0];
;;;1182   temp_SL/=20000L;
;;;1183   temp_SL-=273L;
;;;1184   bat[0]._Tb=(signed short)temp_SL;
;;;1185   #else
;;;1186   if((adc_buff_[6]>800)&&(adc_buff_[6]<3800))bat[0]._nd=0;
000f46  f8dfb364          LDR      r11,|L1.4780|
000f4a  f6403eb7          MOV      lr,#0xbb7
000f4e  2100              MOVS     r1,#0
000f50  f9bb000c          LDRSH    r0,[r11,#0xc]  ; adc_buff_
;;;1187   else bat[0]._nd=1;
000f54  f04f0c01          MOV      r12,#1
000f58  4603              MOV      r3,r0                 ;1186
000f5a  f2a03021          SUB      r0,r0,#0x321          ;1186
000f5e  9000              STR      r0,[sp,#0]            ;1186
000f60  4570              CMP      r0,lr                 ;1186
000f62  d202              BCS      |L1.3946|
000f64  f888100c          STRB     r1,[r8,#0xc]          ;1186
000f68  e001              B        |L1.3950|
                  |L1.3946|
000f6a  f888c00c          STRB     r12,[r8,#0xc]
                  |L1.3950|
;;;1188   temp_SL=(signed long)adc_buff_[6];
;;;1189   temp_SL*=Ktbat[0];
000f6e  48d0              LDR      r0,|L1.4784|
000f70  f9b00000          LDRSH    r0,[r0,#0]  ; Ktbat
000f74  4358              MULS     r0,r3,r0
;;;1190   temp_SL/=20000L;
000f76  f6446a20          MOV      r10,#0x4e20
000f7a  fb90f0fa          SDIV     r0,r0,r10
;;;1191   temp_SL-=273L;
000f7e  f2a01011          SUB      r0,r0,#0x111
;;;1192   bat[0]._Tb=(signed short)temp_SL;
000f82  f8a8000a          STRH     r0,[r8,#0xa]
;;;1193   #endif
;;;1194   
;;;1195   #ifdef UKU_KONTUR
;;;1196   if((adc_buff_[7]>800)&&(adc_buff_[7]<3800))bat[1]._nd=0;
;;;1197   else bat[1]._nd=1;
;;;1198   temp_SL=(signed long)adc_buff_[7];
;;;1199   temp_SL*=Ktbat[1];
;;;1200   temp_SL/=20000L;
;;;1201   temp_SL-=273L;
;;;1202   bat[1]._Tb=(signed short)temp_SL;
;;;1203   #else
;;;1204   if((adc_buff_[7]>800)&&(adc_buff_[7]<3800))bat[1]._nd=0;
000f86  f9bb000e          LDRSH    r0,[r11,#0xe]  ; adc_buff_
000f8a  f6403eb7          MOV      lr,#0xbb7
000f8e  f2a03a21          SUB      r10,r0,#0x321
000f92  45f2              CMP      r10,lr
000f94  d202              BCS      |L1.3996|
000f96  f8881058          STRB     r1,[r8,#0x58]
000f9a  e001              B        |L1.4000|
                  |L1.3996|
;;;1205   else bat[1]._nd=1;
000f9c  f888c058          STRB     r12,[r8,#0x58]
                  |L1.4000|
;;;1206   temp_SL=(signed long)adc_buff_[7];
;;;1207   temp_SL*=Ktbat[1];
000fa0  f8dfa30c          LDR      r10,|L1.4784|
000fa4  f9baa002          LDRSH    r10,[r10,#2]  ; Ktbat
000fa8  fb0afa00          MUL      r10,r10,r0
;;;1208   temp_SL/=20000L;
000fac  f6446020          MOV      r0,#0x4e20
000fb0  fb9af0f0          SDIV     r0,r10,r0
;;;1209   temp_SL-=273L;
000fb4  f2a01011          SUB      r0,r0,#0x111
;;;1210   bat[1]._Tb=(signed short)temp_SL;
000fb8  f8df82f8          LDR      r8,|L1.4788|
000fbc  f8a80056          STRH     r0,[r8,#0x56]
;;;1211   #endif
;;;1212   
;;;1213   #ifdef UKU_6U
;;;1214   
;;;1215   if(NUMMAKB==2)
;;;1216   	{
;;;1217   	if(makb[0]._cnt<5)
;;;1218   		{
;;;1219   		if(makb[0]._T_nd[0]==0)
;;;1220   			{
;;;1221   			bat[0]._Tb=makb[0]._T[0];
;;;1222   			bat[0]._nd=0;
;;;1223   			}
;;;1224   		}
;;;1225   
;;;1226   	if(makb[1]._cnt<5)
;;;1227   		{
;;;1228   		if(makb[1]._T_nd[0]==0)
;;;1229   			{
;;;1230   			bat[1]._Tb=makb[1]._T[0];
;;;1231   			bat[1]._nd=0;
;;;1232   			}
;;;1233   		}
;;;1234   
;;;1235   	}
;;;1236   else if(NUMMAKB==4)
;;;1237   	{
;;;1238   	signed short temp_t;
;;;1239   	temp_t=-20;
;;;1240   	if(makb[0]._cnt<5)
;;;1241   		{
;;;1242   		if(makb[0]._T_nd[0]==0)
;;;1243   			{
;;;1244   			temp_t=makb[0]._T[0];
;;;1245   			bat[0]._nd=0;
;;;1246   			}
;;;1247   		}
;;;1248   	if(makb[1]._cnt<5)
;;;1249   		{
;;;1250   		if(makb[1]._T_nd[0]==0)
;;;1251   			{
;;;1252   			if(temp_t<makb[1]._T[0])
;;;1253   				{
;;;1254   				bat[0]._nd=0;
;;;1255   				temp_t=makb[1]._T[0];
;;;1256   				}
;;;1257   			}
;;;1258   		}
;;;1259   	if(temp_t!=-20)bat[0]._Tb = temp_t;
;;;1260   
;;;1261    	temp_t=-20;
;;;1262   	if(makb[2]._cnt<5)
;;;1263   		{
;;;1264   		if(makb[2]._T_nd[0]==0)
;;;1265   			{
;;;1266   			temp_t=makb[2]._T[0];
;;;1267   			bat[1]._nd=0;
;;;1268   			}
;;;1269   		}
;;;1270   	if(makb[3]._cnt<5)
;;;1271   		{
;;;1272   		if(makb[3]._T_nd[0]==0)
;;;1273   			{
;;;1274   			if(temp_t<makb[3]._T[0])
;;;1275   				{
;;;1276   				bat[1]._nd=0;
;;;1277   				temp_t=makb[3]._T[0];
;;;1278   				}
;;;1279   			}
;;;1280   		}
;;;1281   	if(temp_t!=-20)bat[1]._Tb = temp_t;
;;;1282   	}
;;;1283   
;;;1284   #endif
;;;1285   
;;;1286   
;;;1287   // 
;;;1288   temp_SL=(signed long)adc_buff_[2];
000fc0  f9bb0004          LDRSH    r0,[r11,#4]  ; adc_buff_
;;;1289   temp_SL*=Kuload;
000fc4  f8df82f0          LDR      r8,|L1.4792|
000fc8  f9b88000          LDRSH    r8,[r8,#0]  ; Kuload
000fcc  fb00f808          MUL      r8,r0,r8
;;;1290   temp_SL/=2000L;
000fd0  f44f69fa          MOV      r9,#0x7d0
000fd4  fb98f8f9          SDIV     r8,r8,r9
;;;1291   load_U=(signed short)temp_SL;
000fd8  f8df92e0          LDR      r9,|L1.4796|
000fdc  f8a98000          STRH     r8,[r9,#0]
;;;1292   
;;;1293   #ifdef UKU_220 
;;;1294   // 
;;;1295   temp_SL=(signed long)adc_buff_[2];
;;;1296   temp_SL*=Kuload;
;;;1297   temp_SL/=350L;
;;;1298   load_U=(signed short)temp_SL;
;;;1299   #endif
;;;1300   
;;;1301   #ifdef UKU_220_V2 
;;;1302   // 
;;;1303   temp_SL=(signed long)adc_buff_[2];
;;;1304   temp_SL*=Kuload;
;;;1305   temp_SL/=350L;
;;;1306   load_U=(signed short)temp_SL;
;;;1307   #endif
;;;1308   
;;;1309   #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;1310   // 
;;;1311   temp_SL=(signed long)adc_buff_[1];
000fe0  f9bba002          LDRSH    r10,[r11,#2]  ; adc_buff_
;;;1312   temp_SL*=Kuout;
000fe4  f8df82d8          LDR      r8,|L1.4800|
000fe8  f9b88000          LDRSH    r8,[r8,#0]  ; Kuout
000fec  fb0afa08          MUL      r10,r10,r8
;;;1313   if(AUSW_MAIN==22010)temp_SL/=400L;
000ff0  f8df82b4          LDR      r8,|L1.4776|
000ff4  f8b88000          LDRH     r8,[r8,#0]  ; AUSW_MAIN
000ff8  45a8              CMP      r8,r5
000ffa  d104              BNE      |L1.4102|
000ffc  f44f7ec8          MOV      lr,#0x190
001000  fb9afafe          SDIV     r10,r10,lr
001004  e001              B        |L1.4106|
                  |L1.4102|
;;;1314   else temp_SL/=500L;
001006  fb9afaf6          SDIV     r10,r10,r6
                  |L1.4106|
;;;1315   out_U=(signed short)temp_SL;
00100a  f8dfe2b8          LDR      lr,|L1.4804|
00100e  fa0ffa8a          SXTH     r10,r10
001012  f8aea000          STRH     r10,[lr,#0]
;;;1316   load_U=out_U;
001016  f8a9a000          STRH     r10,[r9,#0]
;;;1317   
;;;1318   // 
;;;1319   temp_SL=(signed long)adc_buff_[2];
00101a  46de              MOV      lr,r11
;;;1320   temp_SL*=Kubps;
00101c  f8df92a8          LDR      r9,|L1.4808|
001020  f9b99000          LDRSH    r9,[r9,#0]  ; Kubps
001024  fb00f009          MUL      r0,r0,r9
;;;1321   if(AUSW_MAIN==22010)temp_SL/=400L;
001028  d104              BNE      |L1.4148|
00102a  f44f75c8          MOV      r5,#0x190
00102e  fb90f0f5          SDIV     r0,r0,r5
001032  e001              B        |L1.4152|
                  |L1.4148|
;;;1322   else temp_SL/=500L;
001034  fb90f0f6          SDIV     r0,r0,r6
                  |L1.4152|
;;;1323   bps_U=(signed short)temp_SL;
001038  4da4              LDR      r5,|L1.4812|
00103a  8028              STRH     r0,[r5,#0]
;;;1324   
;;;1325   //  
;;;1326   temp_SL=0;
00103c  f04f0900          MOV      r9,#0
;;;1327   for (i=0;i<NUMIST;i++)
001040  464e              MOV      r6,r9
001042  48a3              LDR      r0,|L1.4816|
001044  4da3              LDR      r5,|L1.4820|
001046  f9b00000          LDRSH    r0,[r0,#0]
00104a  e00b              B        |L1.4196|
                  |L1.4172|
;;;1328   	{
;;;1329   	temp_SL+=((signed long)bps[i]._Ii);
00104c  ebc60bc6          RSB      r11,r6,r6,LSL #3
001050  eb0b0b4b          ADD      r11,r11,r11,LSL #1
001054  eb050b8b          ADD      r11,r5,r11,LSL #2
001058  f8dbb024          LDR      r11,[r11,#0x24]
00105c  44d9              ADD      r9,r9,r11
00105e  f1060601          ADD      r6,r6,#1              ;1327
001062  b2f6              UXTB     r6,r6                 ;1327
                  |L1.4196|
001064  4286              CMP      r6,r0                 ;1327
001066  dbf1              BLT      |L1.4172|
;;;1330   	}
;;;1331   bps_I=(signed short)temp_SL;
001068  4e9b              LDR      r6,|L1.4824|
00106a  f8a69000          STRH     r9,[r6,#0]
;;;1332   
;;;1333   
;;;1334   #endif
;;;1335   
;;;1336   
;;;1337   #ifdef UKU_KONTUR
;;;1338   //   1(  )
;;;1339   if((adc_buff_[5]>800)&&(adc_buff_[5]<3800))ND_EXT[0]=0;
;;;1340   else ND_EXT[0]=1;
;;;1341   temp_SL=(signed long)adc_buff_[5];
;;;1342   temp_SL*=Ktext[0];
;;;1343   temp_SL/=20000L;
;;;1344   temp_SL-=273L;
;;;1345   t_ext[0]=(signed short)temp_SL;
;;;1346   #else 
;;;1347   //   1(  )
;;;1348   if((adc_buff_[5]>800)&&(adc_buff_[5]<3800))ND_EXT[0]=0;
00106e  f9beb00a          LDRSH    r11,[lr,#0xa]  ; adc_buff_
001072  f6403eb7          MOV      lr,#0xbb7
001076  f2ab3921          SUB      r9,r11,#0x321
00107a  4e98              LDR      r6,|L1.4828|
00107c  45f1              CMP      r9,lr
00107e  d201              BCS      |L1.4228|
001080  6031              STR      r1,[r6,#0]  ; ND_EXT
001082  e001              B        |L1.4232|
                  |L1.4228|
;;;1349   else ND_EXT[0]=1;
001084  f8c6c000          STR      r12,[r6,#0]  ; ND_EXT
                  |L1.4232|
;;;1350   temp_SL=(signed long)adc_buff_[5];
;;;1351   temp_SL*=Ktext[0];
001088  f8df9254          LDR      r9,|L1.4832|
00108c  f9b99000          LDRSH    r9,[r9,#0]  ; Ktext
001090  fb09fb0b          MUL      r11,r9,r11
;;;1352   temp_SL/=20000L;
001094  f6446e20          MOV      lr,#0x4e20
001098  fb9bfbfe          SDIV     r11,r11,lr
;;;1353   temp_SL-=273L;
00109c  f2ab1b11          SUB      r11,r11,#0x111
;;;1354   t_ext[0]=(signed short)temp_SL;
0010a0  f8dfe240          LDR      lr,|L1.4836|
0010a4  f8aeb000          STRH     r11,[lr,#0]
;;;1355   #endif
;;;1356   
;;;1357   #ifdef UKU_220
;;;1358   
;;;1359   //   2(  )
;;;1360   if((adc_buff_[3]>800)&&(adc_buff_[3]<3800))ND_EXT[1]=0;
;;;1361   else ND_EXT[1]=1;
;;;1362   temp_SL=(signed long)adc_buff_[3];
;;;1363   temp_SL*=Ktext[1];
;;;1364   temp_SL/=20000L;
;;;1365   temp_SL-=273L;
;;;1366   t_ext[1]=(signed short)temp_SL;
;;;1367   
;;;1368   //   3(  MSAN)
;;;1369   if((adc_buff_[10]>800)&&(adc_buff_[10]<3800))ND_EXT[2]=0;
;;;1370   else ND_EXT[2]=1;
;;;1371   temp_SL=(signed long)adc_buff_[10];
;;;1372   temp_SL*=Ktext[2];
;;;1373   temp_SL/=20000L;
;;;1374   temp_SL-=273L;
;;;1375   t_ext[2]=(signed short)temp_SL;
;;;1376   
;;;1377   #else
;;;1378   
;;;1379   
;;;1380   #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;1381   
;;;1382   //   
;;;1383   if((adc_buff_[6]>800)&&(adc_buff_[6]<3800))ND_EXT[0]=0;
0010a8  f8ddb000          LDR      r11,[sp,#0]
0010ac  f6403eb7          MOV      lr,#0xbb7
0010b0  45f3              CMP      r11,lr
0010b2  d201              BCS      |L1.4280|
0010b4  6031              STR      r1,[r6,#0]  ; ND_EXT
0010b6  e001              B        |L1.4284|
                  |L1.4280|
;;;1384   else ND_EXT[0]=1;
0010b8  f8c6c000          STR      r12,[r6,#0]  ; ND_EXT
                  |L1.4284|
;;;1385   temp_SL=(signed long)adc_buff_[6];
;;;1386   temp_SL*=Ktext[0];
0010bc  fb09f903          MUL      r9,r9,r3
;;;1387   temp_SL/=20000L;
0010c0  f6446320          MOV      r3,#0x4e20
0010c4  fb99f3f3          SDIV     r3,r9,r3
;;;1388   temp_SL-=273L;
0010c8  f2a31311          SUB      r3,r3,#0x111
;;;1389   t_ext[0]=(signed short)temp_SL;
0010cc  f8dfc214          LDR      r12,|L1.4836|
0010d0  f8ac3000          STRH     r3,[r12,#0]
;;;1390   
;;;1391   #else
;;;1392   
;;;1393   
;;;1394   
;;;1395   //   2(  )
;;;1396   if((adc_buff_[10]>800)&&(adc_buff_[10]<3800))ND_EXT[1]=0;
;;;1397   else ND_EXT[1]=1;
;;;1398   temp_SL=(signed long)adc_buff_[10];
;;;1399   temp_SL*=Ktext[1];
;;;1400   temp_SL/=20000L;
;;;1401   temp_SL-=273L;
;;;1402   t_ext[1]=(signed short)temp_SL;
;;;1403   
;;;1404   //   3(  MSAN)
;;;1405   if((adc_buff_[3]>800)&&(adc_buff_[3]<3800))ND_EXT[2]=0;
;;;1406   else ND_EXT[2]=1;
;;;1407   temp_SL=(signed long)adc_buff_[3];
;;;1408   temp_SL*=Ktext[2];
;;;1409   temp_SL/=20000L;
;;;1410   temp_SL-=273L;
;;;1411   t_ext[2]=(signed short)temp_SL;
;;;1412   
;;;1413   #endif
;;;1414   #endif
;;;1415   
;;;1416   #ifdef UKU_220_V2
;;;1417   
;;;1418   //   2(  )
;;;1419   if((adc_buff_[3]>800)&&(adc_buff_[3]<3800))ND_EXT[1]=0;
;;;1420   else ND_EXT[1]=1;
;;;1421   temp_SL=(signed long)adc_buff_[3];
;;;1422   temp_SL*=Ktext[1];
;;;1423   temp_SL/=20000L;
;;;1424   temp_SL-=273L;
;;;1425   t_ext[1]=(signed short)temp_SL;
;;;1426   
;;;1427   //   3(  MSAN)
;;;1428   if((adc_buff_[10]>800)&&(adc_buff_[10]<3800))ND_EXT[2]=0;
;;;1429   else ND_EXT[2]=1;
;;;1430   temp_SL=(signed long)adc_buff_[10];
;;;1431   temp_SL*=Ktext[2];
;;;1432   temp_SL/=20000L;
;;;1433   temp_SL-=273L;
;;;1434   t_ext[2]=(signed short)temp_SL;
;;;1435   
;;;1436   #else
;;;1437   
;;;1438   #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;1439   // 
;;;1440   if(bps[8]._device==dIBAT_METR)
0010d4  f89532a0          LDRB     r3,[r5,#0x2a0]  ; bps
;;;1441   	{
;;;1442   	ibat_metr_buff_[0]=((signed long)bps[8]._buff[0])+(((signed long)bps[8]._buff[1])<<8);
;;;1443   	ibat_metr_buff_[1]=((signed long)bps[8]._buff[2])+(((signed long)bps[8]._buff[3])<<8);
;;;1444   	bIBAT_SMKLBR=((signed short)bps[8]._buff[4])+(((signed short)bps[8]._buff[5])<<8);
;;;1445   
;;;1446   	if(!bIBAT_SMKLBR)
;;;1447   		{
;;;1448   		signed long temp_SL;
;;;1449   		temp_SL=(signed long)ibat_metr_buff_[0];
;;;1450   		temp_SL-=(signed long)ibat_metr_buff_[1];
;;;1451   		temp_SL*=(signed long)Kibat1[0];
;;;1452   		if((AUSW_MAIN==22010)||(AUSW_MAIN==22011)||(AUSW_MAIN==22035)||(AUSW_MAIN==22033)||(AUSW_MAIN==22063)||(AUSW_MAIN==22023)||(AUSW_MAIN==22043))temp_SL/=2000L;
;;;1453   	
;;;1454   		Ib_ips_termokompensat =(signed short)temp_SL;
0010d8  f8dfe20c          LDR      lr,|L1.4840|
0010dc  2b09              CMP      r3,#9                 ;1440
0010de  d140              BNE      |L1.4450|
0010e0  f89532a6          LDRB     r3,[r5,#0x2a6]        ;1442  ; bps
0010e4  f895c2a7          LDRB     r12,[r5,#0x2a7]       ;1442  ; bps
0010e8  f8df9200          LDR      r9,|L1.4844|
0010ec  eb03230c          ADD      r3,r3,r12,LSL #8      ;1442
0010f0  f8c93000          STR      r3,[r9,#0]            ;1442  ; ibat_metr_buff_
0010f4  f895c2a8          LDRB     r12,[r5,#0x2a8]       ;1443  ; bps
0010f8  f895b2a9          LDRB     r11,[r5,#0x2a9]       ;1443  ; bps
0010fc  eb0c2c0b          ADD      r12,r12,r11,LSL #8    ;1443
001100  f8c9c004          STR      r12,[r9,#4]           ;1443  ; ibat_metr_buff_
001104  f89592aa          LDRB     r9,[r5,#0x2aa]        ;1444  ; bps
001108  f895b2ab          LDRB     r11,[r5,#0x2ab]       ;1444  ; bps
00110c  eb09290b          ADD      r9,r9,r11,LSL #8      ;1444
001110  f8dfb1dc          LDR      r11,|L1.4848|
001114  fa0ff989          SXTH     r9,r9                 ;1444
001118  f8ab9000          STRH     r9,[r11,#0]           ;1444
00111c  f1b90f00          CMP      r9,#0                 ;1446
001120  d11f              BNE      |L1.4450|
001122  eba30c0c          SUB      r12,r3,r12            ;1450
001126  4b5f              LDR      r3,|L1.4772|
001128  f9b33000          LDRSH    r3,[r3,#0]            ;1451  ; Kibat1
00112c  fb03f30c          MUL      r3,r3,r12             ;1451
001130  f5a84ca8          SUB      r12,r8,#0x5400        ;1452
001134  f5bc7cfd          SUBS     r12,r12,#0x1fa        ;1452
001138  d00d              BEQ      |L1.4438|
00113a  f1bc0c01          SUBS     r12,r12,#1            ;1452
00113e  d00a              BEQ      |L1.4438|
001140  4590              CMP      r8,r2                 ;1452
001142  d008              BEQ      |L1.4438|
001144  45a0              CMP      r8,r4                 ;1452
001146  d006              BEQ      |L1.4438|
001148  f1bc0234          SUBS     r2,r12,#0x34          ;1452
00114c  d003              BEQ      |L1.4438|
00114e  3228              ADDS     r2,r2,#0x28           ;1452
001150  d001              BEQ      |L1.4438|
001152  3a14              SUBS     r2,r2,#0x14           ;1452
001154  d103              BNE      |L1.4446|
                  |L1.4438|
001156  f44f62fa          MOV      r2,#0x7d0             ;1452
00115a  fb93f3f2          SDIV     r3,r3,r2              ;1452
                  |L1.4446|
00115e  f8ae3000          STRH     r3,[lr,#0]
                  |L1.4450|
;;;1455   		}
;;;1456   	}
;;;1457   
;;;1458   bat[0]._Ub=load_U;
001162  f8dfc150          LDR      r12,|L1.4788|
001166  f8aca002          STRH     r10,[r12,#2]
;;;1459   bat[0]._Ib=Ib_ips_termokompensat;
00116a  f9be2000          LDRSH    r2,[lr,#0]  ; Ib_ips_termokompensat
00116e  f8ac2008          STRH     r2,[r12,#8]
;;;1460   
;;;1461   #endif
;;;1462   #endif
;;;1463   
;;;1464   
;;;1465   #ifdef UKU_TELECORE2015
;;;1466   
;;;1467   //   1
;;;1468   if((adc_buff_[7]>800)&&(adc_buff_[7]<3800))ND_EXT[0]=0;
;;;1469   else ND_EXT[0]=1;
;;;1470   temp_SL=(signed long)adc_buff_[7];
;;;1471   temp_SL*=Ktext[0];
;;;1472   temp_SL/=20000L;
;;;1473   temp_SL-=273L;
;;;1474   t_ext[0]=(signed short)temp_SL;
;;;1475   
;;;1476   
;;;1477   //   2
;;;1478   if((adc_buff_[6]>800)&&(adc_buff_[6]<3800))ND_EXT[1]=0;
;;;1479   else ND_EXT[1]=1;
;;;1480   temp_SL=(signed long)adc_buff_[6];
;;;1481   temp_SL*=Ktext[1];
;;;1482   temp_SL/=20000L;
;;;1483   temp_SL-=273L;
;;;1484   t_ext[1]=(signed short)temp_SL;
;;;1485   
;;;1486   #endif
;;;1487   
;;;1488   // 
;;;1489   temp_SL=(signed long)adc_buff_ext_[0];
001172  f8df8180          LDR      r8,|L1.4852|
001176  f8b84000          LDRH     r4,[r8,#0]  ; adc_buff_ext_
;;;1490   temp_SL*=Kunet_ext[0];
00117a  f8df917c          LDR      r9,|L1.4856|
00117e  f9b93000          LDRSH    r3,[r9,#0]  ; Kunet_ext
001182  4363              MULS     r3,r4,r3
;;;1491   temp_SL/=4000L;
001184  f44f6e7a          MOV      lr,#0xfa0
001188  fb93f3fe          SDIV     r3,r3,lr
;;;1492   Uvv[0]=(signed short)temp_SL;
00118c  4c5b              LDR      r4,|L1.4860|
00118e  b29b              UXTH     r3,r3
001190  8023              STRH     r3,[r4,#0]
;;;1493   if(Uvv[0]<100) Uvv0=Uvv[0];
001192  f8dfb16c          LDR      r11,|L1.4864|
001196  2b64              CMP      r3,#0x64
001198  d202              BCS      |L1.4512|
00119a  f8ab3000          STRH     r3,[r11,#0]
00119e  e003              B        |L1.4520|
                  |L1.4512|
;;;1494   else Uvv0=net_U;
0011a0  4b58              LDR      r3,|L1.4868|
0011a2  881b              LDRH     r3,[r3,#0]  ; net_U
0011a4  f8ab3000          STRH     r3,[r11,#0]
                  |L1.4520|
;;;1495   
;;;1496   // 
;;;1497   temp_SL=(signed long)adc_buff_ext_[1];
0011a8  f8b88002          LDRH     r8,[r8,#2]  ; adc_buff_ext_
;;;1498   temp_SL*=Kunet_ext[1];
0011ac  f9b93002          LDRSH    r3,[r9,#2]  ; Kunet_ext
0011b0  fb03f308          MUL      r3,r3,r8
;;;1499   temp_SL/=4000L;
0011b4  fb93f3fe          SDIV     r3,r3,lr
;;;1500   Uvv[1]=(signed short)temp_SL;
0011b8  8063              STRH     r3,[r4,#2]
;;;1501   
;;;1502   
;;;1503   //  
;;;1504   temp_SL=(signed long)eb2_data_short[0];
0011ba  4c53              LDR      r4,|L1.4872|
0011bc  f9b43000          LDRSH    r3,[r4,#0]  ; eb2_data_short
;;;1505   temp_SL*=Kvv_eb2[0];
0011c0  f8df8148          LDR      r8,|L1.4876|
0011c4  f9b89000          LDRSH    r9,[r8,#0]  ; Kvv_eb2
0011c8  fb09f903          MUL      r9,r9,r3
;;;1506   temp_SL/=6000L;
0011cc  f2417370          MOV      r3,#0x1770
0011d0  fb99fbf3          SDIV     r11,r9,r3
;;;1507   Uvv_eb2[0]=(signed short)temp_SL;
0011d4  f8df9138          LDR      r9,|L1.4880|
0011d8  f8a9b000          STRH     r11,[r9,#0]
;;;1508   
;;;1509   temp_SL=(signed long)eb2_data_short[1];
0011dc  f9b4e002          LDRSH    lr,[r4,#2]  ; eb2_data_short
;;;1510   temp_SL*=Kvv_eb2[1];
0011e0  f9b8b002          LDRSH    r11,[r8,#2]  ; Kvv_eb2
0011e4  fb0bfb0e          MUL      r11,r11,lr
;;;1511   temp_SL/=6000L;
0011e8  fb9bfbf3          SDIV     r11,r11,r3
;;;1512   Uvv_eb2[1]=(signed short)temp_SL;
0011ec  f8a9b002          STRH     r11,[r9,#2]
;;;1513   
;;;1514   temp_SL=(signed long)eb2_data_short[2];
0011f0  f9b4b004          LDRSH    r11,[r4,#4]  ; eb2_data_short
;;;1515   temp_SL*=Kvv_eb2[2];
0011f4  f9b88004          LDRSH    r8,[r8,#4]  ; Kvv_eb2
0011f8  fb08f80b          MUL      r8,r8,r11
;;;1516   temp_SL/=6000L;
0011fc  fb98f8f3          SDIV     r8,r8,r3
;;;1517   Uvv_eb2[2]=(signed short)temp_SL;
001200  f8a98004          STRH     r8,[r9,#4]
;;;1518   
;;;1519   //  
;;;1520   temp_SL=(signed long)eb2_data_short[3];
001204  f9b4b006          LDRSH    r11,[r4,#6]  ; eb2_data_short
;;;1521   temp_SL*=Kpes_eb2[0];
001208  f8df8108          LDR      r8,|L1.4884|
00120c  f9b89000          LDRSH    r9,[r8,#0]  ; Kpes_eb2
001210  fb09f90b          MUL      r9,r9,r11
;;;1522   temp_SL/=6000L;
001214  fb99fbf3          SDIV     r11,r9,r3
;;;1523   Upes_eb2[0]=(signed short)temp_SL;
001218  f8df90fc          LDR      r9,|L1.4888|
00121c  f8a9b000          STRH     r11,[r9,#0]
;;;1524   
;;;1525   temp_SL=(signed long)eb2_data_short[4];
001220  f9b4e008          LDRSH    lr,[r4,#8]  ; eb2_data_short
;;;1526   temp_SL*=Kpes_eb2[1];
001224  f9b8b002          LDRSH    r11,[r8,#2]  ; Kpes_eb2
001228  fb0bfb0e          MUL      r11,r11,lr
;;;1527   temp_SL/=6000L;
00122c  fb9bfbf3          SDIV     r11,r11,r3
;;;1528   Upes_eb2[1]=(signed short)temp_SL;
001230  f8a9b002          STRH     r11,[r9,#2]
;;;1529   
;;;1530   temp_SL=(signed long)eb2_data_short[5];
001234  f9b4b00a          LDRSH    r11,[r4,#0xa]  ; eb2_data_short
;;;1531   temp_SL*=Kpes_eb2[2];
001238  f9b84004          LDRSH    r4,[r8,#4]  ; Kpes_eb2
00123c  fb04f40b          MUL      r4,r4,r11
;;;1532   temp_SL/=6000L;
001240  fb94f3f3          SDIV     r3,r4,r3
;;;1533   Upes_eb2[2]=(signed short)temp_SL;
001244  f8a93004          STRH     r3,[r9,#4]
;;;1534   
;;;1535   //  
;;;1536   
;;;1537   ibt._T[0]=t_ext[1]+273;
001248  4c26              LDR      r4,|L1.4836|
00124a  f8dfb0d0          LDR      r11,|L1.4892|
00124e  8863              LDRH     r3,[r4,#2]  ; t_ext
001250  f2031311          ADD      r3,r3,#0x111
001254  fa0ff883          SXTH     r8,r3
001258  f8ab8000          STRH     r8,[r11,#0]
;;;1538   ibt._T[1]=t_ext[2]+273;
00125c  88a3              LDRH     r3,[r4,#4]  ; t_ext
00125e  f2031311          ADD      r3,r3,#0x111
001262  fa0ff983          SXTH     r9,r3
001266  f8ab9002          STRH     r9,[r11,#2]
;;;1539   
;;;1540   ibt._nd[0]=ND_EXT[1];
00126a  6873              LDR      r3,[r6,#4]  ; ND_EXT
00126c  b2dc              UXTB     r4,r3
00126e  f88b4008          STRB     r4,[r11,#8]
;;;1541   ibt._nd[1]=ND_EXT[2];
001272  68b3              LDR      r3,[r6,#8]  ; ND_EXT
001274  b2db              UXTB     r3,r3
001276  f88b3009          STRB     r3,[r11,#9]
;;;1542   
;;;1543   #ifndef UKU_TELECORE2015
;;;1544   if((ibt._nd[0]==0) &&  (ibt._nd[1]==0))
;;;1545   	{
;;;1546   	t_box=((ibt._T[0]+ibt._T[1])/2)-273;
00127a  4e29              LDR      r6,|L1.4896|
00127c  b904              CBNZ     r4,|L1.4736|
00127e  b113              CBZ      r3,|L1.4742|
                  |L1.4736|
;;;1547   	}
;;;1548   else if((ibt._nd[0]==1) &&  (ibt._nd[1]==0))
001280  2c01              CMP      r4,#1
001282  d04f              BEQ      |L1.4900|
001284  e04f              B        |L1.4902|
                  |L1.4742|
001286  eb080309          ADD      r3,r8,r9              ;1546
00128a  eb0373d3          ADD      r3,r3,r3,LSR #31      ;1546
00128e  f46f7488          MVN      r4,#0x110             ;1546
001292  eb040363          ADD      r3,r4,r3,ASR #1       ;1546
001296  8033              STRH     r3,[r6,#0]            ;1546
001298  e063              B        |L1.4962|
00129a  0000              DCW      0x0000
                  |L1.4764|
                          DCD      ad7705_buff_
                  |L1.4768|
                          DCD      Kibat0
                  |L1.4772|
                          DCD      Kibat1
                  |L1.4776|
                          DCD      AUSW_MAIN
                  |L1.4780|
                          DCD      ||.bss||+0x400
                  |L1.4784|
                          DCD      Ktbat
                  |L1.4788|
                          DCD      bat
                  |L1.4792|
                          DCD      Kuload
                  |L1.4796|
                          DCD      load_U
                  |L1.4800|
                          DCD      Kuout
                  |L1.4804|
                          DCD      out_U
                  |L1.4808|
                          DCD      Kubps
                  |L1.4812|
                          DCD      bps_U
                  |L1.4816|
                          DCD      NUMIST
                  |L1.4820|
                          DCD      bps
                  |L1.4824|
                          DCD      bps_I
                  |L1.4828|
                          DCD      ND_EXT
                  |L1.4832|
                          DCD      Ktext
                  |L1.4836|
                          DCD      t_ext
                  |L1.4840|
                          DCD      Ib_ips_termokompensat
                  |L1.4844|
                          DCD      ibat_metr_buff_
                  |L1.4848|
                          DCD      bIBAT_SMKLBR
                  |L1.4852|
                          DCD      adc_buff_ext_
                  |L1.4856|
                          DCD      Kunet_ext
                  |L1.4860|
                          DCD      Uvv
                  |L1.4864|
                          DCD      Uvv0
                  |L1.4868|
                          DCD      net_U
                  |L1.4872|
                          DCD      eb2_data_short
                  |L1.4876|
                          DCD      Kvv_eb2
                  |L1.4880|
                          DCD      Uvv_eb2
                  |L1.4884|
                          DCD      Kpes_eb2
                  |L1.4888|
                          DCD      Upes_eb2
                  |L1.4892|
                          DCD      ibt
                  |L1.4896|
                          DCD      t_box
                  |L1.4900|
001324  b10b              CBZ      r3,|L1.4906|
                  |L1.4902|
;;;1549   	{
;;;1550   	t_box=ibt._T[1]-273;
;;;1551   	}
;;;1552   else if((ibt._nd[0]==0) &&  (ibt._nd[1]==1))
001326  b12c              CBZ      r4,|L1.4916|
001328  e006              B        |L1.4920|
                  |L1.4906|
00132a  f2a91911          SUB      r9,r9,#0x111          ;1550
00132e  f8a69000          STRH     r9,[r6,#0]            ;1550
001332  e016              B        |L1.4962|
                  |L1.4916|
001334  2b01              CMP      r3,#1
001336  d002              BEQ      |L1.4926|
                  |L1.4920|
;;;1553   	{
;;;1554   	t_box=ibt._T[0]-273;
;;;1555   	}
;;;1556   else if((ibt._nd[0]==1) &&  (ibt._nd[1]==1))
001338  2c01              CMP      r4,#1
00133a  d005              BEQ      |L1.4936|
00133c  e011              B        |L1.4962|
                  |L1.4926|
00133e  f2a81811          SUB      r8,r8,#0x111          ;1554
001342  f8a68000          STRH     r8,[r6,#0]            ;1554
001346  e00c              B        |L1.4962|
                  |L1.4936|
001348  2b01              CMP      r3,#1
00134a  d10a              BNE      |L1.4962|
;;;1557   	{
;;;1558   	if(t_ext_can_nd<5)t_box= t_ext_can;
00134c  4bfb              LDR      r3,|L1.5948|
00134e  781b              LDRB     r3,[r3,#0]  ; t_ext_can_nd
001350  2b05              CMP      r3,#5
001352  d203              BCS      |L1.4956|
001354  4bfa              LDR      r3,|L1.5952|
001356  881b              LDRH     r3,[r3,#0]  ; t_ext_can
001358  8033              STRH     r3,[r6,#0]
00135a  e002              B        |L1.4962|
                  |L1.4956|
;;;1559   	else t_box=20;
00135c  f04f0314          MOV      r3,#0x14
001360  8033              STRH     r3,[r6,#0]
                  |L1.4962|
;;;1560   	}
;;;1561   #endif
;;;1562   /*
;;;1563   //  
;;;1564   
;;;1565   ibt._T[0]=bat[0]._Tb+273;
;;;1566   ibt._T[1]=bat[1]._Tb+273;
;;;1567   ibt._T[2]=t_ext[1]+273;
;;;1568   ibt._T[3]=t_ext[2]+273;
;;;1569   
;;;1570   ibt._nd[0]=bat[0]._nd;
;;;1571   ibt._nd[1]=bat[1]._nd;
;;;1572   ibt._nd[2]=ND_EXT[1];
;;;1573   ibt._nd[3]=ND_EXT[2];
;;;1574   
;;;1575   ibt._avg1=0;
;;;1576   ibt._avg_cnt=4;
;;;1577   
;;;1578   if(ibt._nd[0]==0)
;;;1579   	{
;;;1580   	ibt._avg1+=ibt._T[0];
;;;1581   	}
;;;1582   else 
;;;1583   	{
;;;1584   	ibt._avg_cnt--;
;;;1585   	}
;;;1586   
;;;1587   if(ibt._nd[1]==0)
;;;1588   	{
;;;1589   	ibt._avg1+=ibt._T[1];
;;;1590   	}
;;;1591   else 
;;;1592   	{
;;;1593   	ibt._avg_cnt--;
;;;1594   	}
;;;1595   
;;;1596   if(ibt._nd[2]==0)
;;;1597   	{
;;;1598   	ibt._avg1+=ibt._T[2];
;;;1599   	}
;;;1600   else 
;;;1601   	{
;;;1602   	ibt._avg_cnt--;
;;;1603   	}
;;;1604   
;;;1605   if(ibt._nd[3]==0)
;;;1606   	{
;;;1607   	ibt._avg1+=ibt._T[3];
;;;1608   	}
;;;1609   else 
;;;1610   	{
;;;1611   	ibt._avg_cnt--;
;;;1612   	}
;;;1613   
;;;1614   if(ibt._avg_cnt==0)
;;;1615   	{
;;;1616   	}
;;;1617   else
;;;1618   	{
;;;1619   	ibt._avg1/=ibt._avg_cnt;
;;;1620   	}
;;;1621   
;;;1622   
;;;1623   if(ibt._nd[0]!=0)
;;;1624   	{
;;;1625   	ibt._T_dispers[0]=0;
;;;1626   	}
;;;1627   else 
;;;1628   	{
;;;1629   	ibt._T_dispers[0]=abs(ibt._T[0]-ibt._avg1);
;;;1630   	}
;;;1631   
;;;1632   if(ibt._nd[1]!=0)
;;;1633   	{
;;;1634   	ibt._T_dispers[1]=0;
;;;1635   	}
;;;1636   else 
;;;1637   	{
;;;1638   	ibt._T_dispers[1]=abs(ibt._T[1]-ibt._avg1);
;;;1639   	}
;;;1640   
;;;1641   if(ibt._nd[2]!=0)
;;;1642   	{
;;;1643   	ibt._T_dispers[2]=0;
;;;1644   	}
;;;1645   else 
;;;1646   	{
;;;1647   	ibt._T_dispers[2]=abs(ibt._T[2]-ibt._avg1);
;;;1648   	}
;;;1649   
;;;1650   if(ibt._nd[3]!=0)
;;;1651   	{
;;;1652   	ibt._T_dispers[3]=0;
;;;1653   	}
;;;1654   else 
;;;1655   	{
;;;1656   	ibt._T_dispers[3]=abs(ibt._T[3]-ibt._avg1);
;;;1657   	}
;;;1658   
;;;1659   if(	ibt._nd[0]&&
;;;1660   	ibt._nd[1]&&
;;;1661   	ibt._nd[2]&&
;;;1662   	ibt._nd[3]
;;;1663   	)
;;;1664   	{
;;;1665   	t_box=(bps[0]._Ti);
;;;1666   	}
;;;1667   
;;;1668   else if(	ibt._nd[0]||
;;;1669   	ibt._nd[1]||
;;;1670   	ibt._nd[2]||
;;;1671   	ibt._nd[3]
;;;1672   	)
;;;1673   	{
;;;1674   	t_box=(ibt._avg1-273);
;;;1675   	}
;;;1676   else 
;;;1677   	{
;;;1678   	ibt._max_dispers_num=0;
;;;1679   	ibt._max_dispers=ibt._T_dispers[0];
;;;1680   
;;;1681   	if(ibt._T_dispers[1]>ibt._max_dispers)
;;;1682   		{
;;;1683   		ibt._max_dispers_num=1;
;;;1684   		ibt._max_dispers=ibt._T_dispers[1];
;;;1685   		}
;;;1686   	if(ibt._T_dispers[2]>ibt._max_dispers)
;;;1687   		{
;;;1688   		ibt._max_dispers_num=2;
;;;1689   		ibt._max_dispers=ibt._T_dispers[2];
;;;1690   		}
;;;1691   	if(ibt._T_dispers[3]>ibt._max_dispers)
;;;1692   		{
;;;1693   		ibt._max_dispers_num=3;
;;;1694   		ibt._max_dispers=ibt._T_dispers[3];
;;;1695   		}
;;;1696   
;;;1697   	ibt._avg2=0;
;;;1698   
;;;1699   	if(ibt._max_dispers_num!=0)
;;;1700   		{
;;;1701   		ibt._avg2+=ibt._T[0];
;;;1702   		}
;;;1703   	if(ibt._max_dispers_num!=1)
;;;1704   		{
;;;1705   		ibt._avg2+=ibt._T[1];
;;;1706   		}
;;;1707   	if(ibt._max_dispers_num!=2)
;;;1708   		{
;;;1709   		ibt._avg2+=ibt._T[2];
;;;1710   		}
;;;1711   	if(ibt._max_dispers_num!=3)
;;;1712   		{
;;;1713   		ibt._avg2+=ibt._T[3];
;;;1714   		}
;;;1715   
;;;1716   	t_box=(ibt._avg2/3)-273;
;;;1717   
;;;1718   	}*/
;;;1719   
;;;1720   
;;;1721   //*********************************************
;;;1722   
;;;1723   #ifndef TELECORE
;;;1724   if((BAT_IS_ON[0]==bisON)&&(bat[0]._Ub>200)) Ibmax=bat[0]._Ib;
001362  4cf8              LDR      r4,|L1.5956|
001364  7823              LDRB     r3,[r4,#0]  ; BAT_IS_ON
001366  2b55              CMP      r3,#0x55
001368  d103              BNE      |L1.4978|
00136a  f1ba0fc8          CMP      r10,#0xc8
00136e  dd00              BLE      |L1.4978|
001370  86fa              STRH     r2,[r7,#0x36]
                  |L1.4978|
;;;1725   if((BAT_IS_ON[1]==bisON)&&(bat[1]._Ub>200)&&(bat[1]._Ib>bat[0]._Ib)) Ibmax=bat[1]._Ib;
001372  7863              LDRB     r3,[r4,#1]  ; BAT_IS_ON
001374  2b55              CMP      r3,#0x55
001376  d108              BNE      |L1.5002|
001378  f9bc304e          LDRSH    r3,[r12,#0x4e]  ; bat
00137c  2bc8              CMP      r3,#0xc8
00137e  dd04              BLE      |L1.5002|
001380  f9bc3054          LDRSH    r3,[r12,#0x54]  ; bat
001384  4293              CMP      r3,r2
001386  dd00              BLE      |L1.5002|
001388  86fb              STRH     r3,[r7,#0x36]
                  |L1.5002|
;;;1726   #endif
;;;1727   
;;;1728   #ifdef TELECORE
;;;1729   Ibmax=0;
;;;1730   if((NUMBAT_TELECORE>0)&&(lakb[0]._communicationFullErrorStat==0)&&(lakb[0]._ch_curr>Ibmax))Ibmax=lakb[0]._ch_curr/10;
;;;1731   if((NUMBAT_TELECORE>1)&&(lakb[1]._communicationFullErrorStat==0)&&(lakb[1]._ch_curr>Ibmax))Ibmax=lakb[1]._ch_curr/10;
;;;1732   if((NUMBAT_TELECORE>2)&&(lakb[2]._communicationFullErrorStat==0)&&(lakb[2]._ch_curr>Ibmax))Ibmax=lakb[2]._ch_curr/10;
;;;1733   #endif
;;;1734   
;;;1735   //if((AUSW_MAIN==22063)||(AUSW_MAIN==22023)||(AUSW_MAIN==22043))Ibmax=Ib_ips_termokompensat;
;;;1736   #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;1737   Ibmax=Ib_ips_termokompensat;
00138a  86fa              STRH     r2,[r7,#0x36]
;;;1738   #endif
;;;1739   for(i=0;i<NUMIST;i++)
00138c  f04f0400          MOV      r4,#0
001390  e02f              B        |L1.5106|
                  |L1.5010|
;;;1740   	{
;;;1741   	if(bps[i]._cnt<25)
001392  ebc403c4          RSB      r3,r4,r4,LSL #3
001396  eb030343          ADD      r3,r3,r3,LSL #1
00139a  eb050383          ADD      r3,r5,r3,LSL #2
00139e  78de              LDRB     r6,[r3,#3]
0013a0  2e19              CMP      r6,#0x19
0013a2  d21c              BCS      |L1.5086|
;;;1742        	{
;;;1743        	bps[i]._Ii=bps[i]._buff[0]+(bps[i]._buff[1]*256);
0013a4  799e              LDRB     r6,[r3,#6]
0013a6  79df              LDRB     r7,[r3,#7]
0013a8  eb062607          ADD      r6,r6,r7,LSL #8
0013ac  625e              STR      r6,[r3,#0x24]
;;;1744        	bps[i]._Uin=bps[i]._buff[2]+(bps[i]._buff[3]*256);
0013ae  7a1e              LDRB     r6,[r3,#8]
0013b0  7a5f              LDRB     r7,[r3,#9]
0013b2  eb062607          ADD      r6,r6,r7,LSL #8
0013b6  621e              STR      r6,[r3,#0x20]
;;;1745        	bps[i]._Uii=bps[i]._buff[4]+(bps[i]._buff[5]*256);
0013b8  7a9e              LDRB     r6,[r3,#0xa]
0013ba  7adf              LDRB     r7,[r3,#0xb]
0013bc  eb062607          ADD      r6,r6,r7,LSL #8
0013c0  61de              STR      r6,[r3,#0x1c]
;;;1746        	bps[i]._Ti=(signed)(bps[i]._buff[6]);
0013c2  7b1e              LDRB     r6,[r3,#0xc]
0013c4  629e              STR      r6,[r3,#0x28]
;;;1747        	bps[i]._adr_ee=bps[i]._buff[7];
0013c6  7b5e              LDRB     r6,[r3,#0xd]
0013c8  f8836052          STRB     r6,[r3,#0x52]
;;;1748        	bps[i]._flags_tm=bps[i]._buff[8];
0013cc  7b9e              LDRB     r6,[r3,#0xe]
0013ce  f8836042          STRB     r6,[r3,#0x42]
;;;1749   	     bps[i]._rotor=bps[i]._buff[10]+(bps[i]._buff[11]*256);    
0013d2  7c1e              LDRB     r6,[r3,#0x10]
0013d4  7c5f              LDRB     r7,[r3,#0x11]
0013d6  eb062607          ADD      r6,r6,r7,LSL #8
0013da  64de              STR      r6,[r3,#0x4c]
0013dc  e006              B        |L1.5100|
                  |L1.5086|
;;;1750        	} 
;;;1751   	else 
;;;1752        	{
;;;1753        	bps[i]._Uii=0; 
0013de  61d9              STR      r1,[r3,#0x1c]
;;;1754        	bps[i]._Ii=0;
0013e0  6259              STR      r1,[r3,#0x24]
;;;1755        	bps[i]._Uin=0;
0013e2  6219              STR      r1,[r3,#0x20]
;;;1756        	bps[i]._Ti=0;
0013e4  6299              STR      r1,[r3,#0x28]
;;;1757        	bps[i]._flags_tm=0; 
0013e6  f8831042          STRB     r1,[r3,#0x42]
;;;1758   	     bps[i]._rotor=0;    
0013ea  64d9              STR      r1,[r3,#0x4c]
                  |L1.5100|
0013ec  f1040401          ADD      r4,r4,#1              ;1739
0013f0  b2e4              UXTB     r4,r4                 ;1739
                  |L1.5106|
0013f2  4284              CMP      r4,r0                 ;1739
0013f4  dbcd              BLT      |L1.5010|
;;;1759        	}
;;;1760        
;;;1761        }
;;;1762   
;;;1763   
;;;1764   #ifdef TELECORE
;;;1765   load_I=0;
;;;1766   for(i=0;i<NUMBAT_TELECORE;i++)
;;;1767   	{
;;;1768   	load_I+=lakb[i]._ch_curr;
;;;1769   	}
;;;1770   #else
;;;1771   load_I=-(bat[0]._Ib/10)-(bat[1]._Ib/10);
0013f6  f04f030a          MOV      r3,#0xa
0013fa  fb92f2f3          SDIV     r2,r2,r3
0013fe  f9bc4054          LDRSH    r4,[r12,#0x54]  ; bat
001402  4ed1              LDR      r6,|L1.5960|
001404  fb94f3f3          SDIV     r3,r4,r3
001408  441a              ADD      r2,r2,r3
00140a  f1c20200          RSB      r2,r2,#0
00140e  b217              SXTH     r7,r2
001410  8037              STRH     r7,[r6,#0]
;;;1772   #endif
;;;1773   Isumm=0;
001412  4cce              LDR      r4,|L1.5964|
001414  8021              STRH     r1,[r4,#0]
;;;1774   
;;;1775   for(i=0;i<NUMIST;i++)
001416  f04f0200          MOV      r2,#0
00141a  e012              B        |L1.5186|
                  |L1.5148|
;;;1776        {
;;;1777        if(bps[i]._cnt<5)Isumm+=bps[i]._Ii;
00141c  ebc203c2          RSB      r3,r2,r2,LSL #3
001420  eb030343          ADD      r3,r3,r3,LSL #1
001424  eb050383          ADD      r3,r5,r3,LSL #2
001428  f893c003          LDRB     r12,[r3,#3]
00142c  f1bc0f05          CMP      r12,#5
001430  d204              BCS      |L1.5180|
001432  6a5b              LDR      r3,[r3,#0x24]
001434  f8b4c000          LDRH     r12,[r4,#0]  ; Isumm
001438  4463              ADD      r3,r3,r12
00143a  8023              STRH     r3,[r4,#0]
                  |L1.5180|
00143c  f1020201          ADD      r2,r2,#1              ;1775
001440  b2d2              UXTB     r2,r2                 ;1775
                  |L1.5186|
001442  4282              CMP      r2,r0                 ;1775
001444  dbea              BLT      |L1.5148|
;;;1778        }  
;;;1779        
;;;1780   load_I=load_I+Isumm;
001446  8822              LDRH     r2,[r4,#0]  ; Isumm
001448  443a              ADD      r2,r2,r7
00144a  b212              SXTH     r2,r2
00144c  8032              STRH     r2,[r6,#0]
;;;1781   if(load_I<0)load_I=0;
00144e  2a00              CMP      r2,#0
001450  da00              BGE      |L1.5204|
001452  8031              STRH     r1,[r6,#0]
                  |L1.5204|
;;;1782   
;;;1783   #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;1784   load_I=0;
001454  8031              STRH     r1,[r6,#0]
;;;1785   
;;;1786   Isumm=0;
001456  8021              STRH     r1,[r4,#0]
;;;1787   
;;;1788   for(i=0;i<NUMIST;i++)
001458  f04f0200          MOV      r2,#0
00145c  e00f              B        |L1.5246|
                  |L1.5214|
;;;1789        {
;;;1790        if(bps[i]._cnt<5)Isumm+=bps[i]._Ii;
00145e  ebc203c2          RSB      r3,r2,r2,LSL #3
001462  eb030343          ADD      r3,r3,r3,LSL #1
001466  eb050383          ADD      r3,r5,r3,LSL #2
00146a  78df              LDRB     r7,[r3,#3]
00146c  2f05              CMP      r7,#5
00146e  d203              BCS      |L1.5240|
001470  6a5b              LDR      r3,[r3,#0x24]
001472  8827              LDRH     r7,[r4,#0]  ; Isumm
001474  443b              ADD      r3,r3,r7
001476  8023              STRH     r3,[r4,#0]
                  |L1.5240|
001478  f1020201          ADD      r2,r2,#1              ;1788
00147c  b2d2              UXTB     r2,r2                 ;1788
                  |L1.5246|
00147e  4282              CMP      r2,r0                 ;1788
001480  dbed              BLT      |L1.5214|
;;;1791        }  
;;;1792        
;;;1793   load_I=load_I+Isumm;
001482  8822              LDRH     r2,[r4,#0]  ; Isumm
001484  eb010002          ADD      r0,r1,r2
001488  b200              SXTH     r0,r0
00148a  8030              STRH     r0,[r6,#0]
;;;1794   if(load_I<0)load_I=0;
00148c  2800              CMP      r0,#0
00148e  da00              BGE      |L1.5266|
001490  8031              STRH     r1,[r6,#0]
                  |L1.5266|
;;;1795   
;;;1796   #endif
;;;1797   
;;;1798   
;;;1799   
;;;1800   #ifdef UKU_GLONASS
;;;1801   inv[0]._Uio=6;
;;;1802   if (NUMINV)
;;;1803   	{
;;;1804   	for(i=0;i<NUMINV;i++)
;;;1805   		{
;;;1806   		if(bps[i+first_inv_slot]._cnt<25)
;;;1807        		{
;;;1808        		inv[i]._Ii=bps[i+first_inv_slot]._buff[0]+(bps[i+first_inv_slot]._buff[1]*256);
;;;1809        		inv[i]._Uin=bps[i+first_inv_slot]._buff[2]+(bps[i+first_inv_slot]._buff[3]*256);
;;;1810        		inv[i]._Uio=bps[i+first_inv_slot]._buff[4]+(bps[i+first_inv_slot]._buff[5]*256);
;;;1811        		inv[i]._Ti=(signed)(bps[i+first_inv_slot]._buff[6]);
;;;1812        		inv[i]._flags_tm=bps[i+first_inv_slot]._buff[8];
;;;1813   	    	//	inv[i]._rotor=bps[i+first_inv_slot]._buff[10]+(bps[i+first_inv_slot]._buff[11]*256);
;;;1814   			inv[i]._cnt=0;    
;;;1815        		} 
;;;1816   		else 
;;;1817        		{
;;;1818        		inv[i]._Uio=0; 
;;;1819        		inv[i]._Ii=0;
;;;1820        		inv[i]._Uin=0;
;;;1821        		inv[i]._Ti=0;
;;;1822        		inv[i]._flags_tm=0; 
;;;1823   //	     	inv[i]._rotor0;
;;;1824   			inv[i]._cnt=25;    
;;;1825        		}
;;;1826        	}
;;;1827      	}
;;;1828   #endif
;;;1829   
;;;1830   #ifndef UKU_GLONASS
;;;1831   if (NUMINV)
001492  48af              LDR      r0,|L1.5968|
001494  f9b04000          LDRSH    r4,[r0,#0]  ; NUMINV
001498  2c00              CMP      r4,#0
00149a  d066              BEQ      |L1.5482|
;;;1832   	{
;;;1833   	for(i=0;i<NUMINV;i++)
00149c  f04f0300          MOV      r3,#0
;;;1834   		{
;;;1835   		if(bps[i+20]._cnt<25)
;;;1836        		{
;;;1837        		inv[i]._Ii=bps[i+20]._buff[0]+(bps[i+20]._buff[1]*256);
0014a0  4eac              LDR      r6,|L1.5972|
0014a2  e060              B        |L1.5478|
                  |L1.5284|
0014a4  f1030014          ADD      r0,r3,#0x14           ;1835
0014a8  ebc000c0          RSB      r0,r0,r0,LSL #3       ;1835
0014ac  eb000040          ADD      r0,r0,r0,LSL #1       ;1835
0014b0  eb050080          ADD      r0,r5,r0,LSL #2       ;1835
0014b4  78c2              LDRB     r2,[r0,#3]            ;1835
0014b6  2a19              CMP      r2,#0x19              ;1835
0014b8  d239              BCS      |L1.5422|
0014ba  7982              LDRB     r2,[r0,#6]
0014bc  79c7              LDRB     r7,[r0,#7]
0014be  eb022707          ADD      r7,r2,r7,LSL #8
0014c2  eb030243          ADD      r2,r3,r3,LSL #1
0014c6  eb061242          ADD      r2,r6,r2,LSL #5
0014ca  61d7              STR      r7,[r2,#0x1c]
;;;1838        		inv[i]._Pio=bps[i+20]._buff[2]+(bps[i+20]._buff[3]*256);
0014cc  7a07              LDRB     r7,[r0,#8]
0014ce  f890c009          LDRB     r12,[r0,#9]
0014d2  eb07270c          ADD      r7,r7,r12,LSL #8
0014d6  62d7              STR      r7,[r2,#0x2c]
;;;1839        		inv[i]._Uio=bps[i+20]._buff[4]+(bps[i+20]._buff[5]*256);
0014d8  7a87              LDRB     r7,[r0,#0xa]
0014da  f890c00b          LDRB     r12,[r0,#0xb]
0014de  eb07270c          ADD      r7,r7,r12,LSL #8
0014e2  6197              STR      r7,[r2,#0x18]
;;;1840        		inv[i]._Ti=(signed)(bps[i+20]._buff[6]);
0014e4  7b07              LDRB     r7,[r0,#0xc]
0014e6  6217              STR      r7,[r2,#0x20]
;;;1841        		inv[i]._flags_tm=bps[i+20]._buff[7];
0014e8  7b47              LDRB     r7,[r0,#0xd]
0014ea  f8827046          STRB     r7,[r2,#0x46]
;;;1842        		inv[i]._Uin=bps[i+20]._buff[8]+(bps[i+20]._buff[9]*256);
0014ee  7b87              LDRB     r7,[r0,#0xe]
0014f0  f890c00f          LDRB     r12,[r0,#0xf]
0014f4  eb07270c          ADD      r7,r7,r12,LSL #8
0014f8  6297              STR      r7,[r2,#0x28]
;;;1843        		inv[i]._Uil=bps[i+20]._buff[10]+(bps[i+20]._buff[11]*256);
0014fa  7c07              LDRB     r7,[r0,#0x10]
0014fc  f890c011          LDRB     r12,[r0,#0x11]
001500  eb07270c          ADD      r7,r7,r12,LSL #8
001504  6257              STR      r7,[r2,#0x24]
;;;1844   			inv[i]._cnt=0;
001506  7091              STRB     r1,[r2,#2]
;;;1845   			inv[i]._Uoutmin=bps[i+20]._buff[12]; 
001508  7c87              LDRB     r7,[r0,#0x12]
00150a  f8827059          STRB     r7,[r2,#0x59]
;;;1846   			inv[i]._Uoutmax=bps[i+20]._buff[13]; 
00150e  7cc7              LDRB     r7,[r0,#0x13]
001510  f882705a          STRB     r7,[r2,#0x5a]
;;;1847   			inv[i]._Pnom=bps[i+20]._buff[14]; 
001514  7d07              LDRB     r7,[r0,#0x14]
001516  f8827058          STRB     r7,[r2,#0x58]
;;;1848   			inv[i]._net_contr_en=bps[i+20]._buff[15];
00151a  7d47              LDRB     r7,[r0,#0x15]
00151c  f882705b          STRB     r7,[r2,#0x5b]
;;;1849   			inv[i]._pwm_en=bps[i+20]._buff[16];  
001520  7d87              LDRB     r7,[r0,#0x16]
001522  f882705c          STRB     r7,[r2,#0x5c]
;;;1850   			inv[i]._phase_mode=bps[i+20]._buff[17];  
001526  7dc0              LDRB     r0,[r0,#0x17]
001528  f882005d          STRB     r0,[r2,#0x5d]
00152c  e018              B        |L1.5472|
                  |L1.5422|
;;;1851        		} 
;;;1852   		else 
;;;1853        		{
;;;1854         		inv[i]._Ii=0;
00152e  eb030043          ADD      r0,r3,r3,LSL #1
001532  eb061040          ADD      r0,r6,r0,LSL #5
001536  61c1              STR      r1,[r0,#0x1c]
;;;1855   			inv[i]._Pio=0;
001538  62c1              STR      r1,[r0,#0x2c]
;;;1856   			inv[i]._Uio=0;
00153a  6181              STR      r1,[r0,#0x18]
;;;1857        		inv[i]._Ti=0;
00153c  6201              STR      r1,[r0,#0x20]
;;;1858        		inv[i]._flags_tm=0; 
00153e  f8801046          STRB     r1,[r0,#0x46]
;;;1859        		inv[i]._Uil=0;
001542  6241              STR      r1,[r0,#0x24]
;;;1860        		inv[i]._Uin=0;
001544  6281              STR      r1,[r0,#0x28]
;;;1861   			inv[i]._cnt=25; 
001546  f04f0219          MOV      r2,#0x19
00154a  7082              STRB     r2,[r0,#2]
;;;1862   			inv[i]._Uoutmin=0; 
00154c  f8801059          STRB     r1,[r0,#0x59]
;;;1863   			inv[i]._Uoutmax=0; 
001550  f880105a          STRB     r1,[r0,#0x5a]
;;;1864   			inv[i]._Pnom=0; 
001554  f8801058          STRB     r1,[r0,#0x58]
;;;1865   			inv[i]._net_contr_en=0;
001558  f880105b          STRB     r1,[r0,#0x5b]
;;;1866   			inv[i]._pwm_en=0;   
00155c  f880105c          STRB     r1,[r0,#0x5c]
                  |L1.5472|
001560  f1030301          ADD      r3,r3,#1              ;1833
001564  b2db              UXTB     r3,r3                 ;1833
                  |L1.5478|
001566  42a3              CMP      r3,r4                 ;1833
001568  db9c              BLT      |L1.5284|
                  |L1.5482|
;;;1867   			   
;;;1868        		}
;;;1869        	}
;;;1870      	}
;;;1871   #endif
;;;1872   
;;;1873   #ifdef GLADKOV
;;;1874   inv[0]._Ii=bps[4]._buff[0]+(bps[4]._buff[1]*256);
;;;1875   inv[0]._Pio=bps[4]._buff[2]+(bps[4]._buff[3]*256);
;;;1876   inv[0]._Uio=bps[4]._buff[4]+(bps[4]._buff[5]*256);
;;;1877   inv[0]._Ti=(signed)(bps[4]._buff[6]);
;;;1878   inv[0]._flags_tm=bps[4]._buff[7];
;;;1879   inv[0]._Uin=bps[4]._buff[8]+(bps[4]._buff[9]*256);
;;;1880   inv[0]._Uil=bps[4]._buff[10]+(bps[4]._buff[11]*256);
;;;1881   inv[0]._cnt=0;    
;;;1882   
;;;1883   inv[1]._Ii=bps[21]._buff[0]+(bps[21]._buff[1]*256);
;;;1884   inv[1]._Pio=bps[21]._buff[2]+(bps[21]._buff[3]*256);
;;;1885   inv[1]._Uio=bps[21]._buff[4]+(bps[21]._buff[5]*256);
;;;1886   inv[1]._Ti=(signed)(bps[21]._buff[6]);
;;;1887   inv[1]._flags_tm=bps[21]._buff[7];
;;;1888   inv[1]._Uin=bps[21]._buff[8]+(bps[21]._buff[9]*256);
;;;1889   inv[1]._Uil=bps[21]._buff[10]+(bps[21]._buff[11]*256);
;;;1890   inv[1]._cnt=0;    
;;;1891   #endif
;;;1892   
;;;1893   /*
;;;1894   if((BAT_IS_ON[0]==bisON)&&(BAT_TYPE==1))
;;;1895   	{
;;;1896   	lakb[0]._battCommState=0;
;;;1897   	if(lakb[0]._cnt>10)lakb[0]._battCommState=2;
;;;1898   	else if(lakb[0]._bRS485ERR==1)lakb[0]._battCommState=1;
;;;1899   	
;;;1900   	if(lakb[0]._battCommState==0)
;;;1901   		{	
;;;1902   		bat[0]._Ub=(signed short)((lakb[0]._tot_bat_volt+5)/10);
;;;1903   		bat[0]._Ib=(signed short)lakb[0]._ch_curr;
;;;1904   		if(lakb[0]._dsch_curr) bat[0]._Ib=(signed short) (-lakb[0]._dsch_curr);
;;;1905   		bat[0]._Tb=(signed short)lakb[0]._max_cell_temp;
;;;1906   		}
;;;1907   	}
;;;1908   */
;;;1909   
;;;1910   #ifdef UKU_TELECORE2015
;;;1911   
;;;1912   	if(BAT_TYPE==2)
;;;1913   		{
;;;1914   		lakb[0]._ch_curr/*temp_SS*/=((ascii2halFhex(liBatteryInBuff[113]))<<12)+
;;;1915   							((ascii2halFhex(liBatteryInBuff[114]))<<8)+
;;;1916   							((ascii2halFhex(liBatteryInBuff[115]))<<4)+
;;;1917   							((ascii2halFhex(liBatteryInBuff[116])));
;;;1918   		
;;;1919   		/*if(temp_SS&0x8000)		lakb[0]._ch_curr=~temp_SS;
;;;1920   		else 				lakb[0]._ch_curr=temp_SS;*/
;;;1921   	
;;;1922   		lakb[0]._tot_bat_volt=	(unsigned short)(((ascii2halFhex(liBatteryInBuff[117]))<<12)+
;;;1923   							((ascii2halFhex(liBatteryInBuff[118]))<<8)+
;;;1924   							((ascii2halFhex(liBatteryInBuff[119]))<<4)+
;;;1925   							((ascii2halFhex(liBatteryInBuff[120]))))/100;
;;;1926   	
;;;1927   		lakb[0]._max_cell_temp= 	(((ascii2halFhex(liBatteryInBuff[93]))<<12)+
;;;1928   							((ascii2halFhex(liBatteryInBuff[94]))<<8)+
;;;1929   							((ascii2halFhex(liBatteryInBuff[95]))<<4)+
;;;1930   							((ascii2halFhex(liBatteryInBuff[96]))))/10-273;
;;;1931   	
;;;1932   		lakb[0]._s_o_c_abs=		(unsigned short)((ascii2halFhex(liBatteryInBuff[121]))<<12)+
;;;1933   							((ascii2halFhex(liBatteryInBuff[122]))<<8)+
;;;1934   							((ascii2halFhex(liBatteryInBuff[123]))<<4)+
;;;1935   							((ascii2halFhex(liBatteryInBuff[124])));
;;;1936   	
;;;1937   		lakb[0]._rat_cap=		(unsigned short)((ascii2halFhex(liBatteryInBuff[127]))<<12)+
;;;1938   							((ascii2halFhex(liBatteryInBuff[128]))<<8)+
;;;1939   							((ascii2halFhex(liBatteryInBuff[129]))<<4)+
;;;1940   							((ascii2halFhex(liBatteryInBuff[130])));
;;;1941   	
;;;1942   		lakb[0]._s_o_c=		lakb[0]._s_o_c_abs/(lakb[0]._rat_cap/100);
;;;1943   	
;;;1944   	
;;;1945   	/*	lakb[0]._rat_cap= (lakb_damp[i][13]*256)+ lakb_damp[i][14];
;;;1946   		lakb[0]._max_cell_volt= (lakb_damp[i][0]*256)+ lakb_damp[i][1];
;;;1947   		lakb[0]._min_cell_volt= (lakb_damp[i][2]*256)+ lakb_damp[i][3];
;;;1948   		lakb[0]._max_cell_temp= lakb_damp[i][4];
;;;1949   		lakb[0]._min_cell_temp= lakb_damp[i][5];
;;;1950   		lakb[0]._tot_bat_volt= (lakb_damp[i][6]*256)+ lakb_damp[i][7];
;;;1951   		lakb[0]._ch_curr= (lakb_damp[i][8]*256)+ lakb_damp[i][8];
;;;1952   		lakb[0]._dsch_curr= (lakb_damp[i][10]*256)+ lakb_damp[i][11];
;;;1953   		lakb[0]._s_o_c= lakb_damp[i][12];
;;;1954   		lakb[0]._r_b_t= lakb_damp[i][15];
;;;1955   		lakb[0]._c_c_l_v= (lakb_damp[i][16]*256)+ lakb_damp[i][17];
;;;1956   		lakb[0]._s_o_h= lakb_damp[i][18];
;;;1957   	
;;;1958   		if(lakb[i]._rat_cap==0)
;;;1959   			{
;;;1960   			if(lakb[i]._isOnCnt)
;;;1961   				{
;;;1962   				lakb[i]._isOnCnt--;
;;;1963   				if(lakb[i]._isOnCnt==0)
;;;1964   					{
;;;1965   					if(lakb[i]._battIsOn!=0) bLAKB_KONF_CH=1;
;;;1966   					}
;;;1967   				}
;;;1968   			}
;;;1969   		else 
;;;1970   			{
;;;1971   			if(lakb[i]._isOnCnt<50)
;;;1972   				{
;;;1973   				lakb[i]._isOnCnt++;
;;;1974   				if(lakb[i]._isOnCnt==50)
;;;1975   					{
;;;1976   					if(lakb[i]._battIsOn!=1) bLAKB_KONF_CH=1;
;;;1977   					}
;;;1978   				}
;;;1979   			}
;;;1980   		gran(&lakb[i]._isOnCnt,0,50);*/
;;;1981   		}
;;;1982   	else if(BAT_TYPE==3)
;;;1983   		{
;;;1984   		//short numOfPacks;
;;;1985   		//short numOfCells, numOfTemperCells, baseOfData;
;;;1986   		
;;;1987   		#ifndef UKU_TELECORE2016
;;;1988   		numOfCells=((ascii2halFhex(liBatteryInBuff[17]))<<4)+((ascii2halFhex(liBatteryInBuff[18])));
;;;1989   		numOfTemperCells=((ascii2halFhex(liBatteryInBuff[17+(numOfCells*4)+2]))<<4)+((ascii2halFhex(liBatteryInBuff[18+(numOfCells*4)+2])));
;;;1990   		numOfPacks=((ascii2halFhex(liBatteryInBuff[15]))<<4)+((ascii2halFhex(liBatteryInBuff[16])));
;;;1991   		if(numOfPacks)numOfPacks-=1;
;;;1992   		if((numOfPacks<0)||(numOfPacks>NUMBAT_TELECORE))numOfPacks=0;
;;;1993   		plazma_numOfCells=numOfCells;
;;;1994   		plazma_numOfTemperCells=numOfTemperCells;
;;;1995   		plazma_numOfPacks=numOfPacks;
;;;1996   
;;;1997   
;;;1998   		baseOfData=16+(numOfCells*4)+2+(numOfTemperCells*4)+2;
;;;1999   
;;;2000   		lakb[numOfPacks]._ch_curr=(signed short)(
;;;2001   							((ascii2halFhex(liBatteryInBuff[1+baseOfData]))<<12)+
;;;2002   							((ascii2halFhex(liBatteryInBuff[2+baseOfData]))<<8)+
;;;2003   							((ascii2halFhex(liBatteryInBuff[3+baseOfData]))<<4)+
;;;2004   							((ascii2halFhex(liBatteryInBuff[4+baseOfData])))
;;;2005   							);	  
;;;2006   
;;;2007   		lakb[numOfPacks]._tot_bat_volt=(signed short)(
;;;2008   							((ascii2halFhex(liBatteryInBuff[1+baseOfData+4]))<<12)+
;;;2009   							((ascii2halFhex(liBatteryInBuff[2+baseOfData+4]))<<8)+
;;;2010   							((ascii2halFhex(liBatteryInBuff[3+baseOfData+4]))<<4)+
;;;2011   							((ascii2halFhex(liBatteryInBuff[4+baseOfData+4])))
;;;2012   							)/10;
;;;2013   
;;;2014   		lakb[numOfPacks]._max_cell_temp=(signed short)(
;;;2015   							((ascii2halFhex(liBatteryInBuff[1+baseOfData-4]))<<12)+
;;;2016   							((ascii2halFhex(liBatteryInBuff[2+baseOfData-4]))<<8)+
;;;2017   							((ascii2halFhex(liBatteryInBuff[3+baseOfData-4]))<<4)+
;;;2018   							((ascii2halFhex(liBatteryInBuff[4+baseOfData-4])))
;;;2019   							)-2730;
;;;2020   
;;;2021   		lakb[numOfPacks]._s_o_c=(signed short)(
;;;2022   							((ascii2halFhex(liBatteryInBuff[1+baseOfData+8]))<<12)+
;;;2023   							((ascii2halFhex(liBatteryInBuff[2+baseOfData+8]))<<8)+
;;;2024   							((ascii2halFhex(liBatteryInBuff[3+baseOfData+8]))<<4)+
;;;2025   							((ascii2halFhex(liBatteryInBuff[4+baseOfData+8])))
;;;2026   							)/10;
;;;2027   
;;;2028   		lakb[numOfPacks]._s_o_h=(signed short)(
;;;2029   							((ascii2halFhex(liBatteryInBuff[1+baseOfData+14]))<<12)+
;;;2030   							((ascii2halFhex(liBatteryInBuff[2+baseOfData+14]))<<8)+
;;;2031   							((ascii2halFhex(liBatteryInBuff[3+baseOfData+14]))<<4)+
;;;2032   							((ascii2halFhex(liBatteryInBuff[4+baseOfData+14])))
;;;2033   							)/10;
;;;2034   		#endif								  
;;;2035   		}
;;;2036   	
;;;2037   if(sacredSunSilentCnt<3) 
;;;2038   	{
;;;2039       	bat[0]._Ub=lakb[0]._tot_bat_volt;
;;;2040       	bat[0]._Tb=lakb[0]._max_cell_temp;
;;;2041      	bat[0]._Ib=lakb[0]._ch_curr/10;
;;;2042   	}
;;;2043   else 
;;;2044   	{
;;;2045       	//bat[0]._Ub=0;
;;;2046       	//bat[0]._Tb=0;
;;;2047      	//bat[0]._Ib=0;
;;;2048   	}
;;;2049   
;;;2050   if(BAT_TYPE==1)
;;;2051   	{
;;;2052   	char i;
;;;2053   	for(i=0;i<1;i++)
;;;2054   		{
;;;2055   		lakb[i]._rat_cap= (lakb_damp[i][13]*256)+ lakb_damp[i][14];
;;;2056   		lakb[i]._max_cell_volt= (lakb_damp[i][0]*256)+ lakb_damp[i][1];
;;;2057   		lakb[i]._min_cell_volt= (lakb_damp[i][2]*256)+ lakb_damp[i][3];
;;;2058   		lakb[i]._max_cell_temp= lakb_damp[i][4];
;;;2059   		lakb[i]._min_cell_temp= lakb_damp[i][5];
;;;2060   		lakb[i]._tot_bat_volt= (lakb_damp[i][6]*256)+ lakb_damp[i][7];
;;;2061   		lakb[i]._ch_curr= (lakb_damp[i][8]*256)+ lakb_damp[i][9];
;;;2062   		lakb[i]._dsch_curr= (lakb_damp[i][10]*256)+ lakb_damp[i][11];
;;;2063   		lakb[i]._s_o_c= lakb_damp[i][12];
;;;2064   		lakb[i]._r_b_t= lakb_damp[i][15];
;;;2065   		lakb[i]._c_c_l_v= (lakb_damp[i][16]*256)+ lakb_damp[i][17];
;;;2066   		lakb[i]._s_o_h= lakb_damp[i][18];
;;;2067   		lakb[i]._flags1= lakb_damp[i][34];
;;;2068   		lakb[i]._flags2= lakb_damp[i][35];
;;;2069   		lakb[i]._b_p_ser_num= lakb_damp[i][36];
;;;2070   
;;;2071   /*		if(lakb[i]._rat_cap==0)
;;;2072   			{
;;;2073   			if(lakb[i]._isOnCnt)
;;;2074   				{
;;;2075   				lakb[i]._isOnCnt--;
;;;2076   				if(lakb[i]._isOnCnt==0)
;;;2077   					{
;;;2078   					if(lakb[i]._battIsOn!=0) bLAKB_KONF_CH=1;
;;;2079   					}
;;;2080   				}
;;;2081   			}
;;;2082   		else 
;;;2083   			{
;;;2084   			if(lakb[i]._isOnCnt<50)
;;;2085   				{
;;;2086   				lakb[i]._isOnCnt++;
;;;2087   				if(lakb[i]._isOnCnt==50)
;;;2088   					{
;;;2089   					if(lakb[i]._battIsOn!=1) bLAKB_KONF_CH=1;
;;;2090   					}
;;;2091   				}
;;;2092   			} */
;;;2093   		gran(&lakb[i]._isOnCnt,0,50);
;;;2094   	 	}
;;;2095   
;;;2096   	if(lakb_damp[0][41]==100)
;;;2097   		{
;;;2098   		li_bat._485Error=1;
;;;2099   		}
;;;2100   	if(lakb_damp[0][41]==0)
;;;2101   		{
;;;2102   		//if(bRS485ERR)bLAKB_KONF_CH=1;
;;;2103   		li_bat._485Error=0;
;;;2104   		}
;;;2105   	li_bat._485ErrorCnt=lakb_damp[0][41];
;;;2106   
;;;2107   
;;;2108   	}
;;;2109   
;;;2110   
;;;2111   #endif
;;;2112   
;;;2113   
;;;2114   #ifdef UKU_TELECORE2015
;;;2115   //   
;;;2116   //TODO          
;;;2117   li_bat._batStat=bsOK;
;;;2118   if(BAT_TYPE==1) //COSLIGHT
;;;2119   	{
;;;2120   	if(li_bat._batStat==bsOK)
;;;2121   		{
;;;2122   		li_bat._Ub=lakb[0]._tot_bat_volt/10;
;;;2123   
;;;2124   		if(lakb[0]._ch_curr)li_bat._Ib=lakb[0]._ch_curr/10;
;;;2125   		else if(lakb[0]._dsch_curr) li_bat._Ib=bat[0]._Ib/10;//lakb[0]._dsch_curr/10;
;;;2126   	
;;;2127   		li_bat._ratCap=lakb[0]._rat_cap/100;
;;;2128   		li_bat._soc=lakb[0]._s_o_c;
;;;2129   		li_bat._soh=lakb[0]._s_o_h;
;;;2130   		li_bat._cclv=lakb[0]._c_c_l_v/10;
;;;2131   		li_bat._Tb=lakb[0]._max_cell_temp;
;;;2132   		li_bat._rbt=lakb[0]._r_b_t;
;;;2133   		}
;;;2134   	else 
;;;2135   		{
;;;2136   		li_bat._Ub=bat[0]._Ub;
;;;2137   		li_bat._Ib=bat[0]._Ib/10;
;;;2138   		li_bat._Tb=bat[0]._Tb;
;;;2139   		}
;;;2140   
;;;2141   	if((li_bat._485Error)||(li_bat._canError))
;;;2142   		{
;;;2143   		li_bat._batStat=bsOFF;
;;;2144   		}
;;;2145   	else li_bat._batStat=bsOK;
;;;2146   	}
;;;2147   else if(BAT_TYPE==2) //SACRED SUN
;;;2148   	{
;;;2149   	}
;;;2150   else if(BAT_TYPE==3) //ZTT
;;;2151   	{
;;;2152   	if(li_bat._batStat==bsOK)
;;;2153   		{
;;;2154   
;;;2155   		}
;;;2156   	}
;;;2157   #endif
;;;2158   
;;;2159   
;;;2160   /*
;;;2161   if((BAT_IS_ON[0]==bisON)&&(BAT_TYPE[0]==1)&&(BAT_LINK==0))
;;;2162   	{
;;;2163   
;;;2164   
;;;2165   	if(bat_drv_rx_buff[13]<=0x39)bbb[0]=bat_drv_rx_buff[13]-0x30;
;;;2166   	else bbb[0]=bat_drv_rx_buff[13]-55;
;;;2167   	if(bat_drv_rx_buff[14]<=0x39)bbb[1]=bat_drv_rx_buff[14]-0x30;
;;;2168   	else bbb[1]=bat_drv_rx_buff[14]-55;
;;;2169   	if(bat_drv_rx_buff[15]<=0x39)bbb[2]=bat_drv_rx_buff[15]-0x30;
;;;2170   	else bbb[2]=bat_drv_rx_buff[15]-55;
;;;2171   	if(bat_drv_rx_buff[16]<=0x39)bbb[3]=bat_drv_rx_buff[16]-0x30;
;;;2172   	else bbb[3]=bat_drv_rx_buff[16]-55;
;;;2173   
;;;2174   	tempSS=0;
;;;2175   	tempSS=((bbb[0]*4096)+(bbb[1]*256)+(bbb[2]*16)+bbb[3]);
;;;2176   
;;;2177   	bat[0]._max_cell_volt=(tempSS+5)/10;
;;;2178   
;;;2179   	if(bat_drv_rx_buff[17]<=0x39)bbb[0]=bat_drv_rx_buff[17]-0x30;
;;;2180   	else bbb[0]=bat_drv_rx_buff[17]-55;
;;;2181   	if(bat_drv_rx_buff[18]<=0x39)bbb[1]=bat_drv_rx_buff[18]-0x30;
;;;2182   	else bbb[1]=bat_drv_rx_buff[18]-55;
;;;2183   	if(bat_drv_rx_buff[19]<=0x39)bbb[2]=bat_drv_rx_buff[19]-0x30;
;;;2184   	else bbb[2]=bat_drv_rx_buff[19]-55;
;;;2185   	if(bat_drv_rx_buff[20]<=0x39)bbb[3]=bat_drv_rx_buff[20]-0x30;
;;;2186   	else bbb[3]=bat_drv_rx_buff[20]-55;
;;;2187   
;;;2188   	tempSS=0;
;;;2189   	tempSS=((bbb[0]*4096)+(bbb[1]*256)+(bbb[2]*16)+bbb[3]);
;;;2190   
;;;2191   	bat[0]._min_cell_volt=(tempSS+5)/10;
;;;2192   
;;;2193   
;;;2194   	}*/
;;;2195   
;;;2196   
;;;2197   
;;;2198   }
00156a  e8bd9fff          POP      {r0-r12,pc}
;;;2199   
                          ENDP

                  mnemo_hndl PROC
;;;2200   //-----------------------------------------------
;;;2201   void mnemo_hndl(void)
00156e  4a7a              LDR      r2,|L1.5976|
;;;2202   {
;;;2203   if(((ind==iMn_220)||(ind==iMn))&&(sub_ind==0)&&(MNEMO_ON==mnON))
;;;2204   	{
;;;2205   	if(mnemo_cnt)mnemo_cnt--;
001570  497a              LDR      r1,|L1.5980|
001572  7810              LDRB     r0,[r2,#0]            ;2203  ; a_ind
001574  2804              CMP      r0,#4                 ;2203
001576  d001              BEQ      |L1.5500|
001578  2801              CMP      r0,#1                 ;2203
00157a  d105              BNE      |L1.5512|
                  |L1.5500|
00157c  7850              LDRB     r0,[r2,#1]            ;2203  ; a_ind
00157e  b918              CBNZ     r0,|L1.5512|
001580  4877              LDR      r0,|L1.5984|
001582  7800              LDRB     r0,[r0,#0]            ;2203  ; MNEMO_ON
001584  2855              CMP      r0,#0x55              ;2203
001586  d003              BEQ      |L1.5520|
                  |L1.5512|
;;;2206   	}
;;;2207   else mnemo_cnt=MNEMO_TIME;
001588  4876              LDR      r0,|L1.5988|
00158a  8800              LDRH     r0,[r0,#0]  ; MNEMO_TIME
00158c  7008              STRB     r0,[r1,#0]
                  |L1.5518|
;;;2208   }
00158e  4770              BX       lr
                  |L1.5520|
001590  7808              LDRB     r0,[r1,#0]            ;2205  ; mnemo_cnt
001592  2800              CMP      r0,#0                 ;2205
001594  d0fb              BEQ      |L1.5518|
001596  f1a00001          SUB      r0,r0,#1              ;2205
00159a  7008              STRB     r0,[r1,#0]            ;2205
00159c  4770              BX       lr
;;;2209   
                          ENDP

                  adc_init PROC
;;;2210   //-----------------------------------------------
;;;2211   void adc_init(void)
00159e  4872              LDR      r0,|L1.5992|
;;;2212   {
;;;2213   
;;;2214   SET_REG(LPC_PINCON->PINSEL1,1,(25-16)*2,2);
0015a0  6841              LDR      r1,[r0,#4]
0015a2  f4212140          BIC      r1,r1,#0xc0000
0015a6  f4412180          ORR      r1,r1,#0x40000
0015aa  6041              STR      r1,[r0,#4]
;;;2215   SET_REG(LPC_PINCON->PINSEL1,1,(24-16)*2,2);
0015ac  6841              LDR      r1,[r0,#4]
0015ae  f4213140          BIC      r1,r1,#0x30000
0015b2  f4413180          ORR      r1,r1,#0x10000
0015b6  6041              STR      r1,[r0,#4]
;;;2216   SET_REG(LPC_PINCON->PINSEL1,1,(23-16)*2,2);
0015b8  6841              LDR      r1,[r0,#4]
0015ba  f4214140          BIC      r1,r1,#0xc000
0015be  f4414180          ORR      r1,r1,#0x4000
0015c2  6041              STR      r1,[r0,#4]
;;;2217   
;;;2218   
;;;2219   SET_REG(LPC_PINCON->PINMODE1,2,(25-16)*2,2);
0015c4  6c41              LDR      r1,[r0,#0x44]
0015c6  f4212140          BIC      r1,r1,#0xc0000
0015ca  f4412100          ORR      r1,r1,#0x80000
0015ce  6441              STR      r1,[r0,#0x44]
;;;2220   SET_REG(LPC_PINCON->PINMODE1,2,(24-16)*2,2);
0015d0  6c41              LDR      r1,[r0,#0x44]
0015d2  f4213140          BIC      r1,r1,#0x30000
0015d6  f4413100          ORR      r1,r1,#0x20000
0015da  6441              STR      r1,[r0,#0x44]
;;;2221   SET_REG(LPC_PINCON->PINMODE1,2,(23-16)*2,2);
0015dc  6c41              LDR      r1,[r0,#0x44]
0015de  f4214140          BIC      r1,r1,#0xc000
0015e2  f4414100          ORR      r1,r1,#0x8000
0015e6  6441              STR      r1,[r0,#0x44]
;;;2222   
;;;2223   SET_REG(LPC_ADC->ADCR,0,24,3);
0015e8  4860              LDR      r0,|L1.5996|
0015ea  6801              LDR      r1,[r0,#0]
0015ec  f02161e0          BIC      r1,r1,#0x7000000
0015f0  6001              STR      r1,[r0,#0]
;;;2224   
;;;2225   SET_REG(LPC_ADC->ADCR,1,21,1);
0015f2  6801              LDR      r1,[r0,#0]
0015f4  f4411100          ORR      r1,r1,#0x200000
0015f8  6001              STR      r1,[r0,#0]
;;;2226   SET_REG(LPC_ADC->ADCR,0,16,1);
0015fa  6801              LDR      r1,[r0,#0]
0015fc  f4213180          BIC      r1,r1,#0x10000
001600  6001              STR      r1,[r0,#0]
;;;2227   SET_REG(LPC_ADC->ADCR,1,8,8);
001602  6801              LDR      r1,[r0,#0]
001604  f421417f          BIC      r1,r1,#0xff00
001608  f4417180          ORR      r1,r1,#0x100
00160c  6001              STR      r1,[r0,#0]
;;;2228   
;;;2229   //SET_REG(LPC_GPIO0->FIODIR,7,5,3);
;;;2230   //SET_REG(LPC_GPIO0->FIOPIN,4,5,3);
;;;2231   	
;;;2232   	/*if(adc_ch<=7)*///SET_REG(LPC_ADC->ADCR,1<<5,0,8);
;;;2233        /*else if(adc_ch==8) SET_REG(LPC_ADC->ADCR,1<<2,0,8);
;;;2234        else SET_REG(LPC_ADC->ADCR,1<<4,0,8);*/
;;;2235   
;;;2236   LPC_ADC->ADINTEN     =  (1<< 8);      /* global enable interrupt            */
00160e  f44f7180          MOV      r1,#0x100
001612  60c1              STR      r1,[r0,#0xc]
001614  4856              LDR      r0,|L1.6000|
001616  f44f0180          MOV      r1,#0x400000
00161a  6001              STR      r1,[r0,#0]
;;;2237   
;;;2238   NVIC_EnableIRQ(ADC_IRQn);             /* enable ADC Interrupt               */
;;;2239   
;;;2240   
;;;2241   }
00161c  4770              BX       lr
;;;2242   
                          ENDP

                  adc_drv7 PROC
;;;2243   //-----------------------------------------------
;;;2244   void adc_drv7(void) //(U - )
00161e  e92d41f0          PUSH     {r4-r8,lr}
;;;2245   {
;;;2246   //int temp_S;
;;;2247   //char i;
;;;2248   //signed short temp_SS;
;;;2249   
;;;2250   adc_self_ch_disp[0]=abs_pal(adc_self_ch_buff[1]-adc_self_ch_buff[0]);//adc_self_ch_buff[0]&0x0f80;
001622  4c54              LDR      r4,|L1.6004|
001624  8860              LDRH     r0,[r4,#2]  ; adc_self_ch_buff
001626  8821              LDRH     r1,[r4,#0]  ; adc_self_ch_buff
001628  1a40              SUBS     r0,r0,r1
00162a  b200              SXTH     r0,r0
00162c  f7fffffe          BL       abs_pal
001630  1da6              ADDS     r6,r4,#6
001632  8030              STRH     r0,[r6,#0]
;;;2251   adc_self_ch_disp[1]=abs_pal(adc_self_ch_buff[2]-adc_self_ch_buff[1]);//adc_self_ch_buff[1]&0x0f80;
001634  88a0              LDRH     r0,[r4,#4]  ; adc_self_ch_buff
001636  8861              LDRH     r1,[r4,#2]  ; adc_self_ch_buff
001638  1a40              SUBS     r0,r0,r1
00163a  b200              SXTH     r0,r0
00163c  f7fffffe          BL       abs_pal
001640  8070              STRH     r0,[r6,#2]
;;;2252   adc_self_ch_disp[2]=abs_pal(adc_self_ch_buff[2]-adc_self_ch_buff[0]);//adc_self_ch_buff[2]&0x0f80;
001642  88a0              LDRH     r0,[r4,#4]  ; adc_self_ch_buff
001644  8821              LDRH     r1,[r4,#0]  ; adc_self_ch_buff
001646  1a40              SUBS     r0,r0,r1
001648  b200              SXTH     r0,r0
00164a  f7fffffe          BL       abs_pal
00164e  80b0              STRH     r0,[r6,#4]
;;;2253   
;;;2254   //adc_self_ch_disp[0]=adc_self_ch_buff[0]&0x0ff0;
;;;2255   //adc_self_ch_disp[1]=adc_self_ch_buff[1]&0x0ff0;
;;;2256   //adc_self_ch_disp[2]=adc_self_ch_buff[2]&0x0ff0;
;;;2257   
;;;2258   
;;;2259   if(adc_self_ch_disp[2]<300)//==adc_self_ch_disp[2])
001650  f44f7196          MOV      r1,#0x12c
;;;2260   	{
;;;2261   	adc_result=adc_self_ch_buff[2];
001654  f1a4058e          SUB      r5,r4,#0x8e
001658  4288              CMP      r0,r1                 ;2259
00165a  da02              BGE      |L1.5730|
00165c  88a0              LDRH     r0,[r4,#4]  ; adc_self_ch_buff
00165e  8528              STRH     r0,[r5,#0x28]
001660  e00c              B        |L1.5756|
                  |L1.5730|
;;;2262   	} 
;;;2263   else if(adc_self_ch_disp[1]<300)//==adc_self_ch_disp[2])
001662  f9b60002          LDRSH    r0,[r6,#2]  ; adc_self_ch_disp
001666  4288              CMP      r0,r1
001668  da02              BGE      |L1.5744|
;;;2264   	{
;;;2265   	adc_result=adc_self_ch_buff[1];
00166a  8860              LDRH     r0,[r4,#2]  ; adc_self_ch_buff
00166c  8528              STRH     r0,[r5,#0x28]
00166e  e005              B        |L1.5756|
                  |L1.5744|
;;;2266   	}
;;;2267   else if(adc_self_ch_disp[0]<300)//==adc_self_ch_disp[1])
001670  f9b60000          LDRSH    r0,[r6,#0]  ; adc_self_ch_disp
001674  4288              CMP      r0,r1
001676  da01              BGE      |L1.5756|
;;;2268   	{
;;;2269   	adc_result=adc_self_ch_buff[0];
001678  8820              LDRH     r0,[r4,#0]  ; adc_self_ch_buff
00167a  8528              STRH     r0,[r5,#0x28]
                  |L1.5756|
;;;2270   	}
;;;2271       //adc_result=92;
;;;2272   
;;;2273   if(adc_ch_net)
00167c  78af              LDRB     r7,[r5,#2]  ; adc_ch_net
00167e  2600              MOVS     r6,#0
001680  b32f              CBZ      r7,|L1.5838|
;;;2274   	{
;;;2275   
;;;2276   	main_power_buffer[0]+=(long)(adc_result);
001682  483d              LDR      r0,|L1.6008|
001684  f9b51028          LDRSH    r1,[r5,#0x28]  ; adc_result
001688  6802              LDR      r2,[r0,#0]  ; main_power_buffer
00168a  440a              ADD      r2,r2,r1
00168c  6002              STR      r2,[r0,#0]  ; main_power_buffer
;;;2277   	main_power_buffer[1]+=(long)(adc_result);
00168e  6842              LDR      r2,[r0,#4]  ; main_power_buffer
001690  440a              ADD      r2,r2,r1
001692  6042              STR      r2,[r0,#4]  ; main_power_buffer
;;;2278   	main_power_buffer[2]+=(long)(adc_result);
001694  6882              LDR      r2,[r0,#8]  ; main_power_buffer
001696  440a              ADD      r2,r2,r1
001698  6082              STR      r2,[r0,#8]  ; main_power_buffer
;;;2279   	main_power_buffer[3]+=(long)(adc_result);
00169a  68c2              LDR      r2,[r0,#0xc]  ; main_power_buffer
00169c  4411              ADD      r1,r1,r2
00169e  60c1              STR      r1,[r0,#0xc]  ; main_power_buffer
;;;2280   
;;;2281   	adc_net_buff_cnt++;
0016a0  8e29              LDRH     r1,[r5,#0x30]  ; adc_net_buff_cnt
0016a2  f1010101          ADD      r1,r1,#1
0016a6  b209              SXTH     r1,r1
0016a8  8629              STRH     r1,[r5,#0x30]
;;;2282   	if(adc_net_buff_cnt>=0x1000)
0016aa  f5b15f80          CMP      r1,#0x1000
0016ae  db00              BLT      |L1.5810|
;;;2283   		{
;;;2284   		adc_net_buff_cnt=0;
0016b0  862e              STRH     r6,[r5,#0x30]
                  |L1.5810|
;;;2285   		}
;;;2286   	if((adc_net_buff_cnt&0x03ff)==0)
0016b2  f9b51030          LDRSH    r1,[r5,#0x30]  ; adc_net_buff_cnt
0016b6  058a              LSLS     r2,r1,#22
0016b8  d131              BNE      |L1.5918|
;;;2287   		{
;;;2288   		#ifdef UKU_220
;;;2289   		net_buff_=(short)((main_power_buffer[adc_net_buff_cnt>>10])>>11);
;;;2290   		#else
;;;2291   		#ifdef UKU_220_V2
;;;2292   		net_buff_=(short)((main_power_buffer[adc_net_buff_cnt>>10])>>11);
;;;2293   		#else
;;;2294   		net_buff_=(short)((main_power_buffer[adc_net_buff_cnt>>10])>>8);
0016ba  ea4f21a1          ASR      r1,r1,#10
0016be  f8502021          LDR      r2,[r0,r1,LSL #2]
0016c2  ea4f2222          ASR      r2,r2,#8
0016c6  84ea              STRH     r2,[r5,#0x26]
;;;2295   		#endif
;;;2296   		#endif
;;;2297   		main_power_buffer[adc_net_buff_cnt>>10]=0;
0016c8  f8406021          STR      r6,[r0,r1,LSL #2]
0016cc  e027              B        |L1.5918|
                  |L1.5838|
;;;2298   		}
;;;2299   
;;;2300   
;;;2301   	} 
;;;2302   else if(!adc_ch_net)
;;;2303   	{
;;;2304   	adc_buff[adc_ch][adc_ch_cnt]=(long)adc_result;
0016ce  482b              LDR      r0,|L1.6012|
0016d0  78ec              LDRB     r4,[r5,#3]  ; adc_ch
0016d2  792a              LDRB     r2,[r5,#4]  ; adc_ch_cnt
0016d4  eb001384          ADD      r3,r0,r4,LSL #6
0016d8  f9b51028          LDRSH    r1,[r5,#0x28]  ; adc_result
0016dc  f8431022          STR      r1,[r3,r2,LSL #2]
;;;2305   	
;;;2306   	if((adc_ch_cnt&0x03)==0)
0016e0  0790              LSLS     r0,r2,#30
0016e2  d10f              BNE      |L1.5892|
;;;2307   		{
;;;2308   		long temp_L;
;;;2309   		char i;
;;;2310   		temp_L=0;
0016e4  4601              MOV      r1,r0
                  |L1.5862|
;;;2311   		for(i=0;i<16;i++)
;;;2312   			{
;;;2313   			temp_L+=adc_buff[adc_ch][i];
0016e6  f853c020          LDR      r12,[r3,r0,LSL #2]
0016ea  4461              ADD      r1,r1,r12
0016ec  f1000001          ADD      r0,r0,#1              ;2311
0016f0  b2c0              UXTB     r0,r0                 ;2311
0016f2  2810              CMP      r0,#0x10              ;2311
0016f4  d3f7              BCC      |L1.5862|
;;;2314   			}
;;;2315   		adc_buff_[adc_ch]= (short)(temp_L>>4);
0016f6  ea4f1021          ASR      r0,r1,#4
0016fa  491f              LDR      r1,|L1.6008|
0016fc  f1a10120          SUB      r1,r1,#0x20
001700  f8210014          STRH     r0,[r1,r4,LSL #1]
                  |L1.5892|
;;;2316   
;;;2317   		//adc_buff_[3]=346;
;;;2318   		}
;;;2319   	if(++adc_ch>=16) 
001704  1c64              ADDS     r4,r4,#1
001706  b2e0              UXTB     r0,r4
001708  70e8              STRB     r0,[r5,#3]
00170a  2810              CMP      r0,#0x10
00170c  d307              BCC      |L1.5918|
;;;2320   		{
;;;2321   		adc_ch=0;
00170e  70ee              STRB     r6,[r5,#3]
;;;2322   		adc_ch_cnt++;
001710  f1020201          ADD      r2,r2,#1
001714  b2d0              UXTB     r0,r2
001716  7128              STRB     r0,[r5,#4]
;;;2323   		if(adc_ch_cnt>=16)adc_ch_cnt=0;
001718  2810              CMP      r0,#0x10
00171a  d300              BCC      |L1.5918|
00171c  712e              STRB     r6,[r5,#4]
                  |L1.5918|
;;;2324   		}
;;;2325   	}
;;;2326   
;;;2327   //adc_buff[adc_ch][adc_cnt1]=(adc_self_ch_buff[2]+adc_self_ch_buff[1])/2;
;;;2328   
;;;2329   //if(adc_buff[adc_ch][adc_cnt1]<adc_buff_min[adc_ch])adc_buff_min[adc_ch]=adc_buff[adc_ch][adc_cnt1];
;;;2330   //if(adc_buff[adc_ch][adc_cnt1]>adc_buff_max[adc_ch])adc_buff_max[adc_ch]=adc_buff[adc_ch][adc_cnt1];
;;;2331   /*
;;;2332   	{
;;;2333   	if((adc_cnt1&0x03)==0)
;;;2334   		{
;;;2335   		temp_S=0;
;;;2336   		for(i=0;i<16;i++)
;;;2337   			{
;;;2338   			temp_S+=adc_buff[adc_ch][i];
;;;2339   			} 
;;;2340            	adc_buff_[adc_ch]=temp_S>>4;
;;;2341             }
;;;2342   	}*/
;;;2343   
;;;2344   
;;;2345   		  
;;;2346   
;;;2347   adc_self_ch_cnt=0;
00171e  706e              STRB     r6,[r5,#1]
;;;2348   
;;;2349   adc_ch_net++;
001720  f1070701          ADD      r7,r7,#1
;;;2350   adc_ch_net&=1;
001724  f0070001          AND      r0,r7,#1
001728  70a8              STRB     r0,[r5,#2]
;;;2351   
;;;2352   //SET_REG(LPC_GPIO0->FIODIR,7,5,3);
;;;2353   //SET_REG(LPC_GPIO0->FIOPIN,adc_ch,5,3);
;;;2354   
;;;2355   if(adc_ch_net)
;;;2356   	{
;;;2357   	//LPC_GPIO2->FIODIR|=(1<<7);
;;;2358   	//LPC_GPIO2->FIOPIN|=(1<<7);
;;;2359   	SET_REG(LPC_ADC->ADCR,1<<2,0,8);
00172a  4a10              LDR      r2,|L1.5996|
00172c  b340              CBZ      r0,|L1.6016|
00172e  6810              LDR      r0,[r2,#0]
001730  f02000ff          BIC      r0,r0,#0xff
001734  f1000004          ADD      r0,r0,#4
001738  6010              STR      r0,[r2,#0]
00173a  e060              B        |L1.6142|
                  |L1.5948|
                          DCD      t_ext_can_nd
                  |L1.5952|
                          DCD      t_ext_can
                  |L1.5956|
                          DCD      BAT_IS_ON
                  |L1.5960|
                          DCD      load_I
                  |L1.5964|
                          DCD      Isumm
                  |L1.5968|
                          DCD      NUMINV
                  |L1.5972|
                          DCD      inv
                  |L1.5976|
                          DCD      a_ind
                  |L1.5980|
                          DCD      mnemo_cnt
                  |L1.5984|
                          DCD      MNEMO_ON
                  |L1.5988|
                          DCD      MNEMO_TIME
                  |L1.5992|
                          DCD      0x4002c000
                  |L1.5996|
                          DCD      0x40034000
                  |L1.6000|
                          DCD      0xe000e100
                  |L1.6004|
                          DCD      ||area_number.21||+0x8e
                  |L1.6008|
                          DCD      ||.bss||+0x420
                  |L1.6012|
                          DCD      ||.bss||
                  |L1.6016|
001780  e7ff              B        |L1.6018|
                  |L1.6018|
;;;2360   	}
;;;2361   else
;;;2362   	{
;;;2363   	//LPC_GPIO2->FIODIR|=(1<<7);
;;;2364   	//LPC_GPIO2->FIOPIN&=~(1<<7);
;;;2365   	if(!(adc_ch&(1<<3)))SET_REG(LPC_ADC->ADCR,1<<0,0,8);
001782  78e9              LDRB     r1,[r5,#3]  ; adc_ch
001784  0708              LSLS     r0,r1,#28
001786  d406              BMI      |L1.6038|
001788  6810              LDR      r0,[r2,#0]
00178a  f02000ff          BIC      r0,r0,#0xff
00178e  f1000001          ADD      r0,r0,#1
001792  6010              STR      r0,[r2,#0]
001794  e005              B        |L1.6050|
                  |L1.6038|
;;;2366   	else 			SET_REG(LPC_ADC->ADCR,1<<1,0,8);
001796  6810              LDR      r0,[r2,#0]
001798  f02000ff          BIC      r0,r0,#0xff
00179c  f1000002          ADD      r0,r0,#2
0017a0  6010              STR      r0,[r2,#0]
                  |L1.6050|
;;;2367   
;;;2368   
;;;2369   	SET_REG(LPC_GPIO0->FIODIR,1,28,1);
0017a2  48fb              LDR      r0,|L1.7056|
0017a4  6803              LDR      r3,[r0,#0]
0017a6  f0435380          ORR      r3,r3,#0x10000000
0017aa  6003              STR      r3,[r0,#0]
;;;2370   	SET_REG(LPC_GPIO1->FIODIR,1,30,1);
0017ac  6a03              LDR      r3,[r0,#0x20]
0017ae  f0434380          ORR      r3,r3,#0x40000000
0017b2  6203              STR      r3,[r0,#0x20]
;;;2371   	SET_REG(LPC_GPIO3->FIODIR,1,26,1);
0017b4  6e03              LDR      r3,[r0,#0x60]
0017b6  f0436380          ORR      r3,r3,#0x4000000
0017ba  6603              STR      r3,[r0,#0x60]
;;;2372   
;;;2373   	if(!(adc_ch&(1<<0)))SET_REG(LPC_GPIO0->FIOPIN,0,28,1);
0017bc  07cb              LSLS     r3,r1,#31
0017be  d00a              BEQ      |L1.6102|
;;;2374   	else 			SET_REG(LPC_GPIO0->FIOPIN,1,28,1);
0017c0  6943              LDR      r3,[r0,#0x14]
0017c2  f0435380          ORR      r3,r3,#0x10000000
0017c6  6143              STR      r3,[r0,#0x14]
                  |L1.6088|
;;;2375   
;;;2376   	if(!(adc_ch&(1<<1)))SET_REG(LPC_GPIO1->FIOPIN,0,30,1);
0017c8  078b              LSLS     r3,r1,#30
0017ca  d409              BMI      |L1.6112|
0017cc  6b43              LDR      r3,[r0,#0x34]
0017ce  f0234380          BIC      r3,r3,#0x40000000
0017d2  6343              STR      r3,[r0,#0x34]
0017d4  e008              B        |L1.6120|
                  |L1.6102|
0017d6  6943              LDR      r3,[r0,#0x14]         ;2373
0017d8  f0235380          BIC      r3,r3,#0x10000000     ;2373
0017dc  6143              STR      r3,[r0,#0x14]         ;2373
0017de  e7f3              B        |L1.6088|
                  |L1.6112|
;;;2377   	else 			SET_REG(LPC_GPIO1->FIOPIN,1,30,1);
0017e0  6b43              LDR      r3,[r0,#0x34]
0017e2  f0434380          ORR      r3,r3,#0x40000000
0017e6  6343              STR      r3,[r0,#0x34]
                  |L1.6120|
;;;2378   
;;;2379   	if(!(adc_ch&(1<<2)))SET_REG(LPC_GPIO3->FIOPIN,0,26,1);
0017e8  0749              LSLS     r1,r1,#29
0017ea  d404              BMI      |L1.6134|
0017ec  6f41              LDR      r1,[r0,#0x74]
0017ee  f0216180          BIC      r1,r1,#0x4000000
0017f2  6741              STR      r1,[r0,#0x74]
0017f4  e003              B        |L1.6142|
                  |L1.6134|
;;;2380   	else 			SET_REG(LPC_GPIO3->FIOPIN,1,26,1);
0017f6  6f41              LDR      r1,[r0,#0x74]
0017f8  f0416180          ORR      r1,r1,#0x4000000
0017fc  6741              STR      r1,[r0,#0x74]
                  |L1.6142|
;;;2381   	}
;;;2382   	
;;;2383   
;;;2384   
;;;2385   
;;;2386   LPC_ADC->ADCR |=  (1<<24);
0017fe  6810              LDR      r0,[r2,#0]
001800  f0407080          ORR      r0,r0,#0x1000000
001804  6010              STR      r0,[r2,#0]
                  |L1.6150|
;;;2387   
;;;2388   }
001806  e8bd81f0          POP      {r4-r8,pc}
;;;2389   
                          ENDP

                  avg_hndl PROC
;;;2646   //-----------------------------------------------
;;;2647   void avg_hndl(void)
00180a  b5f0              PUSH     {r4-r7,lr}
;;;2648   { 
;;;2649   char i;
;;;2650   
;;;2651   #define AVGCNTMAX	5
;;;2652   if(avg_main_cnt)
00180c  4ce1              LDR      r4,|L1.7060|
00180e  f9b4001e          LDRSH    r0,[r4,#0x1e]  ; avg_main_cnt
001812  b118              CBZ      r0,|L1.6172|
;;;2653   	{
;;;2654   	avg_main_cnt--;
001814  f1a00001          SUB      r0,r0,#1
001818  83e0              STRH     r0,[r4,#0x1e]
;;;2655   	goto avg_hndl_end;
00181a  e08d              B        |L1.6456|
                  |L1.6172|
;;;2656   	}                 
;;;2657   
;;;2658   avg_num=0;
00181c  f04f0500          MOV      r5,#0
001820  72e5              STRB     r5,[r4,#0xb]
;;;2659   
;;;2660   for(i=0;i<NUMIST;i++)
001822  4628              MOV      r0,r5
001824  49dd              LDR      r1,|L1.7068|
;;;2661   	{
;;;2662   	if((bps[i]._state==bsWRK)&&(bps[i]._cnt<20))avg_num++;
001826  4bdc              LDR      r3,|L1.7064|
001828  f9b12000          LDRSH    r2,[r1,#0]            ;2660
00182c  e012              B        |L1.6228|
                  |L1.6190|
00182e  ebc001c0          RSB      r1,r0,r0,LSL #3
001832  eb010141          ADD      r1,r1,r1,LSL #1
001836  eb030181          ADD      r1,r3,r1,LSL #2
00183a  788e              LDRB     r6,[r1,#2]
00183c  2e01              CMP      r6,#1
00183e  d106              BNE      |L1.6222|
001840  78c9              LDRB     r1,[r1,#3]
001842  2914              CMP      r1,#0x14
001844  d203              BCS      |L1.6222|
001846  7ae1              LDRB     r1,[r4,#0xb]  ; avg_num
001848  f1010101          ADD      r1,r1,#1
00184c  72e1              STRB     r1,[r4,#0xb]
                  |L1.6222|
00184e  f1000001          ADD      r0,r0,#1              ;2660
001852  b2c0              UXTB     r0,r0                 ;2660
                  |L1.6228|
001854  4290              CMP      r0,r2                 ;2660
001856  dbea              BLT      |L1.6190|
;;;2663   	}
;;;2664   
;;;2665   /*if((K[NUMI]>=1)&&(bps_state[0]==ssWRK))	avg_num++;
;;;2666   if((K[NUMI]>=2)&&(bps_state[1]==ssWRK))	avg_num++;
;;;2667   if((K[NUMI]>=3)&&(bps_state[2]==ssWRK))	avg_num++;*/
;;;2668   
;;;2669   	
;;;2670   if(avg_num<2)
001858  7ae6              LDRB     r6,[r4,#0xb]  ; avg_num
00185a  2e02              CMP      r6,#2
00185c  d36c              BCC      |L1.6456|
;;;2671   	{
;;;2672   	goto avg_hndl_end;
;;;2673   	}
;;;2674   	
;;;2675   else
;;;2676   	{
;;;2677   	i_avg_min=5000;
00185e  f2413088          MOV      r0,#0x1388
001862  66e0              STR      r0,[r4,#0x6c]  ; i_avg_min
;;;2678   	i_avg_max=0;
001864  66a5              STR      r5,[r4,#0x68]  ; i_avg_max
;;;2679   	i_avg_summ=0;
001866  6725              STR      r5,[r4,#0x70]  ; i_avg_summ
;;;2680   	for(i=0;i<NUMIST;i++)
001868  f04f0100          MOV      r1,#0
00186c  e017              B        |L1.6302|
                  |L1.6254|
;;;2681   		{
;;;2682   		if(bps[i]._state==bsWRK)
00186e  ebc100c1          RSB      r0,r1,r1,LSL #3
001872  eb000040          ADD      r0,r0,r0,LSL #1
001876  eb030080          ADD      r0,r3,r0,LSL #2
00187a  7887              LDRB     r7,[r0,#2]
00187c  2f01              CMP      r7,#1
00187e  d10b              BNE      |L1.6296|
;;;2683   			{
;;;2684   			if(bps[i]._Ii>i_avg_max)i_avg_max=bps[i]._Ii;
001880  6a40              LDR      r0,[r0,#0x24]
001882  6ea7              LDR      r7,[r4,#0x68]  ; i_avg_max
001884  42b8              CMP      r0,r7
001886  dd00              BLE      |L1.6282|
001888  66a0              STR      r0,[r4,#0x68]  ; i_avg_max
                  |L1.6282|
;;;2685   			if(bps[i]._Ii<i_avg_min)i_avg_min=bps[i]._Ii;
00188a  6ee7              LDR      r7,[r4,#0x6c]  ; i_avg_min
00188c  42b8              CMP      r0,r7
00188e  da00              BGE      |L1.6290|
001890  66e0              STR      r0,[r4,#0x6c]  ; i_avg_min
                  |L1.6290|
;;;2686   			
;;;2687   			i_avg_summ+=bps[i]._Ii;
001892  6f27              LDR      r7,[r4,#0x70]  ; i_avg_summ
001894  4438              ADD      r0,r0,r7
001896  6720              STR      r0,[r4,#0x70]  ; i_avg_summ
                  |L1.6296|
001898  f1010101          ADD      r1,r1,#1              ;2680
00189c  b2c9              UXTB     r1,r1                 ;2680
                  |L1.6302|
00189e  4291              CMP      r1,r2                 ;2680
0018a0  dbe5              BLT      |L1.6254|
;;;2688   			}
;;;2689   		}
;;;2690   	i_avg=i_avg_summ/avg_num;	
0018a2  6f20              LDR      r0,[r4,#0x70]  ; i_avg_summ
0018a4  fb90f6f6          SDIV     r6,r0,r6
0018a8  6766              STR      r6,[r4,#0x74]  ; i_avg
;;;2691   	
;;;2692   	if(i_avg_min==0)i_avg_min=1;
0018aa  6ee0              LDR      r0,[r4,#0x6c]  ; i_avg_min
0018ac  2101              MOVS     r1,#1                 ;2662
0018ae  b900              CBNZ     r0,|L1.6322|
0018b0  66e1              STR      r1,[r4,#0x6c]  ; i_avg_min
                  |L1.6322|
;;;2693   
;;;2694   	avg=i_avg_max;
0018b2  6ea0              LDR      r0,[r4,#0x68]  ; i_avg_max
;;;2695   	avg*=100;
0018b4  f04f0764          MOV      r7,#0x64
0018b8  fb00f007          MUL      r0,r0,r7
;;;2696   	avg/=i_avg_min;
0018bc  6ee7              LDR      r7,[r4,#0x6c]  ; i_avg_min
0018be  fb90f0f7          SDIV     r0,r0,r7
0018c2  67a0              STR      r0,[r4,#0x78]  ; avg
;;;2697   
;;;2698   	if(avg>160) bAVG=1;
0018c4  28a0              CMP      r0,#0xa0
0018c6  dd00              BLE      |L1.6346|
0018c8  72a1              STRB     r1,[r4,#0xa]
                  |L1.6346|
;;;2699   	if(avg<120) bAVG=0;
0018ca  2878              CMP      r0,#0x78
0018cc  da00              BGE      |L1.6352|
0018ce  72a5              STRB     r5,[r4,#0xa]
                  |L1.6352|
;;;2700   
;;;2701   	if(bAVG==1)
0018d0  7aa0              LDRB     r0,[r4,#0xa]  ; bAVG
0018d2  2801              CMP      r0,#1
0018d4  d130              BNE      |L1.6456|
;;;2702   		{
;;;2703   		for(i=0;i<NUMIST;i++)
0018d6  f04f0100          MOV      r1,#0
;;;2704   			{
;;;2705   			if(bps[i]._state==bsWRK)
;;;2706   				{
;;;2707   				if(bps[i]._Ii>i_avg)bps[i]._x_--;
;;;2708   				if(bps[i]._Ii<i_avg)bps[i]._x_++;
;;;2709   			
;;;2710   				if(bps[i]._x_<-50)bps[i]._x_=-50;
0018da  f06f0431          MVN      r4,#0x31
0018de  e029              B        |L1.6452|
                  |L1.6368|
0018e0  ebc100c1          RSB      r0,r1,r1,LSL #3       ;2705
0018e4  eb000040          ADD      r0,r0,r0,LSL #1       ;2705
0018e8  eb030080          ADD      r0,r3,r0,LSL #2       ;2705
0018ec  7885              LDRB     r5,[r0,#2]            ;2705
0018ee  2d01              CMP      r5,#1                 ;2705
0018f0  d11d              BNE      |L1.6446|
0018f2  6a45              LDR      r5,[r0,#0x24]         ;2707
0018f4  42b5              CMP      r5,r6                 ;2707
0018f6  dd05              BLE      |L1.6404|
0018f8  f8b05050          LDRH     r5,[r0,#0x50]         ;2707
0018fc  f1a50501          SUB      r5,r5,#1              ;2707
001900  f8a05050          STRH     r5,[r0,#0x50]         ;2707
                  |L1.6404|
001904  da05              BGE      |L1.6418|
001906  f8b05050          LDRH     r5,[r0,#0x50]         ;2708
00190a  f1050501          ADD      r5,r5,#1              ;2708
00190e  f8a05050          STRH     r5,[r0,#0x50]         ;2708
                  |L1.6418|
001912  f9b05050          LDRSH    r5,[r0,#0x50]
001916  42a5              CMP      r5,r4
001918  da01              BGE      |L1.6430|
00191a  f8a04050          STRH     r4,[r0,#0x50]
                  |L1.6430|
;;;2711   				if(bps[i]._x_>50)bps[i]._x_=50;	
00191e  f9b05050          LDRSH    r5,[r0,#0x50]
001922  2d32              CMP      r5,#0x32
001924  dd03              BLE      |L1.6446|
001926  f04f0532          MOV      r5,#0x32
00192a  f8a05050          STRH     r5,[r0,#0x50]
                  |L1.6446|
00192e  f1010101          ADD      r1,r1,#1              ;2703
001932  b2c9              UXTB     r1,r1                 ;2703
                  |L1.6452|
001934  4291              CMP      r1,r2                 ;2703
001936  dbd3              BLT      |L1.6368|
                  |L1.6456|
;;;2712   				}
;;;2713   			}		
;;;2714   		}			
;;;2715   	}   	 
;;;2716   
;;;2717   
;;;2718   avg_hndl_end:
;;;2719   __nop();  
001938  bf00              NOP      
;;;2720   }
00193a  bdf0              POP      {r4-r7,pc}
;;;2721   
                          ENDP

                  rele_hndl PROC
;;;2734   //*************-----------------------------------------------
;;;2735   void rele_hndl(void)
00193c  e92d41f0          PUSH     {r4-r8,lr}
;;;2736   {
;;;2737   //static char cnt_rel_sam;
;;;2738   //char temp;
;;;2739   
;;;2740   //temp=0;
;;;2741   
;;;2742   
;;;2743   SET_REG(LPC_PINCON->PINSEL0,0,4*2,6*2);
001940  4897              LDR      r0,|L1.7072|
001942  6801              LDR      r1,[r0,#0]
001944  4a97              LDR      r2,|L1.7076|
001946  ea010102          AND      r1,r1,r2
00194a  6001              STR      r1,[r0,#0]
;;;2744   SET_REG(LPC_GPIO0->FIODIR,63,4,6);
00194c  4c90              LDR      r4,|L1.7056|
00194e  6821              LDR      r1,[r4,#0]
001950  f441717c          ORR      r1,r1,#0x3f0
001954  6021              STR      r1,[r4,#0]
;;;2745   SET_REG(LPC_PINCON->PINSEL7,0,(25-16)*2,2);
001956  69c1              LDR      r1,[r0,#0x1c]
001958  f4212140          BIC      r1,r1,#0xc0000
00195c  61c1              STR      r1,[r0,#0x1c]
;;;2746   SET_REG(LPC_GPIO3->FIODIR,1,25,1);
00195e  6e21              LDR      r1,[r4,#0x60]
001960  f0417100          ORR      r1,r1,#0x2000000
001964  6621              STR      r1,[r4,#0x60]
;;;2747   SET_REG(LPC_PINCON->PINSEL1,0,(29-16)*2,2);
001966  6841              LDR      r1,[r0,#4]
001968  f0216140          BIC      r1,r1,#0xc000000
00196c  6041              STR      r1,[r0,#4]
;;;2748   SET_REG(LPC_GPIO0->FIODIR,1,29,1);
00196e  6820              LDR      r0,[r4,#0]
001970  f0405000          ORR      r0,r0,#0x20000000
001974  6020              STR      r0,[r4,#0]
;;;2749   
;;;2750   
;;;2751   
;;;2752   
;;;2753   
;;;2754   
;;;2755   if((((bat[0]._rel_stat)  || (tbatdisable_stat!=tbdsON))&&(tbatdisable_cmnd))	&& (main_1Hz_cnt>5))
001976  488d              LDR      r0,|L1.7084|
001978  4d8b              LDR      r5,|L1.7080|
00197a  498e              LDR      r1,|L1.7092|
00197c  7802              LDRB     r2,[r0,#0]  ; tbatdisable_stat
00197e  488c              LDR      r0,|L1.7088|
001980  f895303c          LDRB     r3,[r5,#0x3c]  ; bat
001984  f9b11000          LDRSH    r1,[r1,#0]
001988  7800              LDRB     r0,[r0,#0]
00198a  4313              ORRS     r3,r3,r2
00198c  d007              BEQ      |L1.6558|
00198e  b130              CBZ      r0,|L1.6558|
001990  2905              CMP      r1,#5
001992  dd04              BLE      |L1.6558|
;;;2756   	{
;;;2757   	SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_BAT1,1);
001994  69a3              LDR      r3,[r4,#0x18]
001996  f4437380          ORR      r3,r3,#0x100
00199a  61a3              STR      r3,[r4,#0x18]
00199c  e003              B        |L1.6566|
                  |L1.6558|
;;;2758   	}
;;;2759   else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_BAT1,1);	  	
00199e  69e3              LDR      r3,[r4,#0x1c]
0019a0  f4437380          ORR      r3,r3,#0x100
0019a4  61e3              STR      r3,[r4,#0x1c]
                  |L1.6566|
;;;2760   
;;;2761   if((((bat[1]._rel_stat) || (tbatdisable_stat!=tbdsON))&&(tbatdisable_cmnd))	&& (main_1Hz_cnt>5))
0019a6  f8953088          LDRB     r3,[r5,#0x88]  ; bat
0019aa  4313              ORRS     r3,r3,r2
0019ac  d007              BEQ      |L1.6590|
0019ae  b130              CBZ      r0,|L1.6590|
0019b0  2905              CMP      r1,#5
0019b2  dd04              BLE      |L1.6590|
;;;2762   	{
;;;2763   	SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_BAT2,1);
0019b4  69a0              LDR      r0,[r4,#0x18]
0019b6  f0400040          ORR      r0,r0,#0x40
0019ba  61a0              STR      r0,[r4,#0x18]
0019bc  e003              B        |L1.6598|
                  |L1.6590|
;;;2764   	}
;;;2765   else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_BAT2,1);
0019be  69e0              LDR      r0,[r4,#0x1c]
0019c0  f0400040          ORR      r0,r0,#0x40
0019c4  61e0              STR      r0,[r4,#0x1c]
                  |L1.6598|
;;;2766   
;;;2767   
;;;2768   if(mess_find_unvol((MESS2RELE_HNDL))&&(mess_data[0]==PARAM_RELE_SAMOKALIBR)) 
0019c6  20d2              MOVS     r0,#0xd2
0019c8  f7fffffe          BL       mess_find_unvol
0019cc  4d7a              LDR      r5,|L1.7096|
0019ce  b110              CBZ      r0,|L1.6614|
0019d0  6828              LDR      r0,[r5,#0]  ; mess_data
0019d2  2864              CMP      r0,#0x64
0019d4  d048              BEQ      |L1.6760|
                  |L1.6614|
;;;2769   	{
;;;2770   	if(mess_data[1]==1)SET_REG(LPC_GPIO0->FIOSET,1,29,1);
;;;2771   	else if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,29,1);
;;;2772   	}
;;;2773   else SET_REG(LPC_GPIO0->FIOCLR,1,29,1);
0019d6  69e0              LDR      r0,[r4,#0x1c]
0019d8  f0405000          ORR      r0,r0,#0x20000000
0019dc  61e0              STR      r0,[r4,#0x1c]
                  |L1.6622|
;;;2774   
;;;2775   
;;;2776   #ifndef UKU2071x
;;;2777   //  
;;;2778   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_NET))
;;;2779   	{
;;;2780   	if(mess_data[1]==0) 			SET_REG(LPC_GPIO3->FIOSET,1,SHIFT_REL_AV_NET,1);
;;;2781   	else 						SET_REG(LPC_GPIO3->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;2782   	}
;;;2783   else	if(!(avar_ind_stat&0x00000001)) 	SET_REG(LPC_GPIO3->FIOSET,1,SHIFT_REL_AV_NET,1);
;;;2784   else 							SET_REG(LPC_GPIO3->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;2785   #endif
;;;2786   #ifdef UKU2071x
;;;2787   //  
;;;2788   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_NET))
0019de  20d2              MOVS     r0,#0xd2
0019e0  f7fffffe          BL       mess_find_unvol
;;;2789   	{
;;;2790   	if(mess_data[1]==0)				SET_REG(LPC_GPIO3->FIOCLR,1,SHIFT_REL_AV_NET,1); 
;;;2791   	else 						SET_REG(LPC_GPIO3->FIOSET,1,SHIFT_REL_AV_NET,1);
;;;2792   	}
;;;2793   else	if(!(avar_ind_stat&0x00000001))	SET_REG(LPC_GPIO3->FIOCLR,1,SHIFT_REL_AV_NET,1);
0019e4  4e75              LDR      r6,|L1.7100|
0019e6  b110              CBZ      r0,|L1.6638|
0019e8  6828              LDR      r0,[r5,#0]            ;2788  ; mess_data
0019ea  2866              CMP      r0,#0x66              ;2788
0019ec  d04b              BEQ      |L1.6790|
                  |L1.6638|
0019ee  6830              LDR      r0,[r6,#0]  ; avar_ind_stat
0019f0  07c0              LSLS     r0,r0,#31
0019f2  d054              BEQ      |L1.6814|
;;;2794   else 					  		SET_REG(LPC_GPIO3->FIOSET,1,SHIFT_REL_AV_NET,1);
0019f4  6fa0              LDR      r0,[r4,#0x78]
0019f6  f0407000          ORR      r0,r0,#0x2000000
0019fa  67a0              STR      r0,[r4,#0x78]
                  |L1.6652|
;;;2795   #endif
;;;2796   
;;;2797   #ifdef UKU_3U
;;;2798   //  
;;;2799   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BAT1))
;;;2800   	{
;;;2801   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT1,1);
;;;2802   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT1,1);
;;;2803        }
;;;2804   else 
;;;2805   	{
;;;2806   	if(!(avar_ind_stat&0x00000002)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT1,1);
;;;2807        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT1,1);
;;;2808   	} 
;;;2809   
;;;2810   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BAT2))
;;;2811   	{
;;;2812   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT2,1);
;;;2813   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT2,1);
;;;2814        }
;;;2815   else 
;;;2816   	{
;;;2817   	if(!(avar_ind_stat&0x00000004)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT2,1);
;;;2818        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT2,1);
;;;2819   	} 
;;;2820   
;;;2821   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BPS))
;;;2822   	{
;;;2823   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
;;;2824   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
;;;2825        }
;;;2826   else 
;;;2827   	{
;;;2828   	if(!(avar_ind_stat&0x000007f8)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
;;;2829        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
;;;2830   	} 
;;;2831   
;;;2832   #endif
;;;2833   
;;;2834   
;;;2835   #ifdef UKU_GLONASS
;;;2836   //  
;;;2837   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BAT1))
;;;2838   	{
;;;2839   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT1,1);
;;;2840   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT1,1);
;;;2841        }
;;;2842   else 
;;;2843   	{
;;;2844   	if(!(avar_ind_stat&0x00000002)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT1,1);
;;;2845        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT1,1);
;;;2846   	} 
;;;2847   
;;;2848   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BAT2))
;;;2849   	{
;;;2850   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT2,1);
;;;2851   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT2,1);
;;;2852        }
;;;2853   else 
;;;2854   	{
;;;2855   	if(!(avar_ind_stat&0x00000004)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT2,1);
;;;2856        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT2,1);
;;;2857   	} 
;;;2858   
;;;2859   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BPS))
;;;2860   	{
;;;2861   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
;;;2862   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
;;;2863        }
;;;2864   else 
;;;2865   	{
;;;2866   	if(!(avar_ind_stat&0x000007f8)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
;;;2867        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
;;;2868   	} 
;;;2869   
;;;2870   #endif
;;;2871   
;;;2872   #ifdef U /*
;;;2873   
;;;2874   
;;;2875   
;;;2876   /*
;;;2877   //  
;;;2878   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BAT))
;;;2879   	{
;;;2880   	if(mess_data[1]==0) temp&=~(1<<SHIFT_REL_AV_BAT);
;;;2881   	else if(mess_data[1]==1) temp|=(1<<SHIFT_REL_AV_BAT);
;;;2882        }
;;;2883   else 
;;;2884   	{
;;;2885   	if(!(avar_ind_stat&0x00000006)) temp&=~(1<<SHIFT_REL_AV_BAT);
;;;2886        else temp|=(1<<SHIFT_REL_AV_BAT);
;;;2887   	} 
;;;2888   */
;;;2889   
;;;2890   #endif
;;;2891   
;;;2892   #ifdef UKU_RSTKM
;;;2893   
;;;2894   //  
;;;2895   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_COMM))
;;;2896   	{
;;;2897   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_COMM,1);
;;;2898   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_COMM,1);
;;;2899   	}
;;;2900   else 
;;;2901   	{
;;;2902        if(  (!(avar_ind_stat&0x00007fff))/* &&
;;;2903             ((!SK_REL_EN[0]) || (sk_av_stat[0]!=sasON))  &&
;;;2904             ((!SK_REL_EN[1]) || (sk_av_stat[1]!=sasON))  &&
;;;2905             ((!SK_REL_EN[2]) || (sk_av_stat[2]!=sasON))  &&
;;;2906             ((!SK_REL_EN[3]) || (sk_av_stat[3]!=sasON))*/  )SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_COMM,1);
;;;2907        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_COMM,1);
;;;2908   	}
;;;2909   	
;;;2910   
;;;2911   // 
;;;2912   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_LIGHT))
;;;2913   	{
;;;2914   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LIGHT,1);
;;;2915   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LIGHT,1);
;;;2916        }
;;;2917   else 
;;;2918   	{
;;;2919   	if(sk_av_stat[0]!=sasON) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LIGHT,1);
;;;2920        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LIGHT,1);
;;;2921   	}
;;;2922   
;;;2923   
;;;2924   //  
;;;2925   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_LOAD_OFF))
;;;2926   	{
;;;2927   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LOAD_OFF,1);
;;;2928   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LOAD_OFF,1);
;;;2929        }
;;;2930   else if(tloaddisable_cmnd==0)
;;;2931   	{
;;;2932   	SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LOAD_OFF,1);
;;;2933   	}
;;;2934   else if((tloaddisable_cmnd)&&(tloaddisable_cmnd<=11))
;;;2935   	{
;;;2936   	SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LOAD_OFF,1);
;;;2937   	}
;;;2938   
;;;2939   else 
;;;2940   	{
;;;2941   	if(!(tloaddisable_stat==tldsON)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LOAD_OFF,1);
;;;2942        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LOAD_OFF,1);
;;;2943   	} 
;;;2944   
;;;2945   //  
;;;2946   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_VENT))
;;;2947   	{
;;;2948   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;2949   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT,1);
;;;2950   	}
;;;2951   else 
;;;2952   	{
;;;2953   	if(mixer_vent_stat==mvsOFF) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;2954        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT,1);
;;;2955   	} 
;;;2956   
;;;2957   #endif
;;;2958   
;;;2959   #ifdef UKU_KONTUR
;;;2960   
;;;2961   //  
;;;2962   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_COMM))
;;;2963   	{
;;;2964   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_COMM,1);
;;;2965   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_COMM,1);
;;;2966   	}
;;;2967   else 
;;;2968   	{
;;;2969        if(  (!(avar_ind_stat&0x00007fff)) &&
;;;2970             ((!SK_REL_EN[0]) || (sk_av_stat[0]!=sasON))  &&
;;;2971             ((!SK_REL_EN[1]) || (sk_av_stat[1]!=sasON))  &&
;;;2972             ((!SK_REL_EN[2]) || (sk_av_stat[2]!=sasON))  /*&&
;;;2973             ((!SK_REL_EN[3]) || (sk_av_stat[3]!=sasON))*/  )SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_COMM,1);
;;;2974        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_COMM,1);
;;;2975   	}
;;;2976   
;;;2977   	
;;;2978   //rel_warm_plazma=0;
;;;2979   //    
;;;2980   /*
;;;2981   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_WARM))
;;;2982   	{
;;;2983   	if(mess_data[1]==0)
;;;2984   		{
;;;2985   		SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_WARM,1);
;;;2986   		rel_warm_plazma=1;
;;;2987   		}
;;;2988   	else if(mess_data[1]==1) 
;;;2989   		{
;;;2990   		SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_WARM,1);
;;;2991   		rel_warm_plazma=2;
;;;2992   		}
;;;2993        }
;;;2994   else 
;;;2995   	{
;;;2996   	if(warm_stat_k==wsOFF) 
;;;2997   		{
;;;2998   		SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_WARM,1);
;;;2999   		rel_warm_plazma=3;
;;;3000   		}
;;;3001        else 
;;;3002   		{
;;;3003   		SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_WARM,1);
;;;3004   		rel_warm_plazma=4;
;;;3005   		}
;;;3006   	}
;;;3007   */
;;;3008   // 
;;;3009   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_LIGHT))
;;;3010   	{
;;;3011   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LIGHT,1);
;;;3012   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LIGHT,1);
;;;3013        }
;;;3014   else 
;;;3015   	{
;;;3016   	if(sk_av_stat[0]!=sasON) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LIGHT,1);
;;;3017        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LIGHT,1);
;;;3018   	}
;;;3019   
;;;3020   
;;;3021   
;;;3022   //  
;;;3023   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_LOAD_OFF))
;;;3024   	{
;;;3025   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LOAD_OFF,1);
;;;3026   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LOAD_OFF,1);
;;;3027        }
;;;3028   else if(tloaddisable_cmnd==0)
;;;3029   	{
;;;3030   	SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LOAD_OFF,1);
;;;3031   	}
;;;3032   else if((tloaddisable_cmnd)&&(tloaddisable_cmnd<=11))
;;;3033   	{
;;;3034   	SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LOAD_OFF,1);
;;;3035   	}
;;;3036   
;;;3037   else 
;;;3038   	{
;;;3039   	if(!(tloaddisable_stat==tldsON)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LOAD_OFF,1);
;;;3040        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LOAD_OFF,1);
;;;3041   	} 
;;;3042   
;;;3043   //    
;;;3044   if(RELE_LOG)
;;;3045   	{
;;;3046   	if((mess_find_unvol(MESS2RELE_HNDL))&&(mess_data[0]==PARAM_RELE_VENT_WARM))
;;;3047   		{
;;;3048   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT_WARM,1);
;;;3049   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT_WARM,1);
;;;3050   		}
;;;3051   	else 
;;;3052   		{
;;;3053   		if(warm_stat_k==wsOFF) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT_WARM,1);
;;;3054   	     else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT_WARM,1);
;;;3055   		} 
;;;3056   
;;;3057   	}
;;;3058   else 
;;;3059   	{
;;;3060   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_VENT_WARM))
;;;3061   		{
;;;3062   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT_WARM,1);
;;;3063   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT_WARM,1);
;;;3064   		}
;;;3065   	else 
;;;3066   		{
;;;3067   		if(vent_stat_k==vsOFF) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT_WARM,1);
;;;3068   	     else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT_WARM,1);
;;;3069   		} 
;;;3070   	}
;;;3071   #endif
;;;3072   
;;;3073   #ifdef UKU_6U
;;;3074   //  
;;;3075   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BAT1))
;;;3076   	{
;;;3077   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT1,1);
;;;3078   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT1,1);
;;;3079        }
;;;3080   else 
;;;3081   	{
;;;3082   	if(!(avar_ind_stat&0x00000002)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT1,1);
;;;3083        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT1,1);
;;;3084   	} 
;;;3085   
;;;3086   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BAT2))
;;;3087   	{
;;;3088   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT2,1);
;;;3089   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT2,1);
;;;3090       }
;;;3091   else if(NPN_OUT==npnoRELEAVBAT2)
;;;3092   	{
;;;3093   	if(npn_stat==npnsOFF)//&&(mess_find_unvol(MESS2RELE_HNDL))&&(mess_data[0]==PARAM_RELE_NPN))
;;;3094   		{
;;;3095   		/*if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT2,1);
;;;3096   		else if(mess_data[1]==1)*/ SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT2,1);
;;;3097        	}
;;;3098   	else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT2,1);
;;;3099   	}
;;;3100   else 
;;;3101   	{
;;;3102   	if(!(avar_ind_stat&0x00000004)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT2,1);
;;;3103       else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT2,1);
;;;3104   	} 
;;;3105   
;;;3106   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BPS))
;;;3107   	{
;;;3108   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
;;;3109   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
;;;3110        }
;;;3111   else 
;;;3112   	{
;;;3113   	if(!(avar_ind_stat&0x000007f8)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
;;;3114        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
;;;3115   	} 
;;;3116   
;;;3117   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_VENT))
;;;3118   	{
;;;3119   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT,1);
;;;3120   	else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;3121   	}
;;;3122   else if((NPN_OUT==npnoRELEVENT))
;;;3123   	{
;;;3124   	if(npn_stat==npnsOFF)//&&(mess_find_unvol(MESS2RELE_HNDL))&&(mess_data[0]==PARAM_RELE_NPN))
;;;3125   		{
;;;3126   		/*if(mess_data[1]==0)*/ SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;3127   		//else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;3128       	}
;;;3129   	else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT,1);
;;;3130   	}
;;;3131   else 
;;;3132   	{
;;;3133   	if(!vent_stat) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT,1);
;;;3134   	else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;3135   	}
;;;3136   
;;;3137   #endif
;;;3138   
;;;3139   #ifdef UKU_220
;;;3140   //  
;;;3141   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BAT))
;;;3142   	{
;;;3143   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT,1);
;;;3144   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT,1);
;;;3145        }
;;;3146   else 
;;;3147   	{
;;;3148   	if(!(avar_ind_stat&0x00000002)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT,1);
;;;3149        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT,1);
;;;3150   	} 
;;;3151   
;;;3152   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BPS))
;;;3153   	{
;;;3154   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
;;;3155   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
;;;3156        }
;;;3157   else 
;;;3158   	{
;;;3159   	if(!(avar_ind_stat&0x000007f8)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
;;;3160        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
;;;3161   	} 
;;;3162   
;;;3163   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_VENT))
;;;3164   	{
;;;3165   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT,1);
;;;3166   	else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;3167   	}
;;;3168   else 
;;;3169   	{
;;;3170   	if((RELE_VENT_LOGIC==0)||(RELE_VENT_LOGIC==1))
;;;3171   		{
;;;3172   		if(vent_stat) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT,1);
;;;3173   		else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;3174   		}
;;;3175   	else 
;;;3176   		{
;;;3177   		if((avar_ind_stat&0x00000004)) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT,1);
;;;3178        	else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;3179   		}
;;;3180   	}
;;;3181   
;;;3182   #endif
;;;3183   
;;;3184   #ifdef UKU_220_V2
;;;3185   //  
;;;3186   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BAT))
;;;3187   	{
;;;3188   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT,1);
;;;3189   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT,1);
;;;3190        }
;;;3191   else 
;;;3192   	{
;;;3193   	if(!(avar_ind_stat&0x00000002)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT,1);
;;;3194        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT,1);
;;;3195   	} 
;;;3196   
;;;3197   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BPS))
;;;3198   	{
;;;3199   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
;;;3200   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
;;;3201        }
;;;3202   else 
;;;3203   	{
;;;3204   	if(!(avar_ind_stat&0x000007f8)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
;;;3205        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
;;;3206   	} 
;;;3207   
;;;3208   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_VENT))
;;;3209   	{
;;;3210   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT,1);
;;;3211   	else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;3212   	}
;;;3213   else 
;;;3214   	{
;;;3215   	if((RELE_VENT_LOGIC==0)||(RELE_VENT_LOGIC==1))
;;;3216   		{
;;;3217   		if(vent_stat) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT,1);
;;;3218   		else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;3219   		}
;;;3220   	else 
;;;3221   		{
;;;3222   		if((avar_ind_stat&0x00000004)) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT,1);
;;;3223        	else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;3224   		}
;;;3225   	}
;;;3226   
;;;3227   #endif
;;;3228   
;;;3229   #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;3230   
;;;3231   if((AUSW_MAIN==22010)||(AUSW_MAIN==22011))
0019fc  4870              LDR      r0,|L1.7104|
;;;3232   	{
;;;3233   	#ifndef UKU2071x
;;;3234   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_NET))
;;;3235   		{
;;;3236   		if(mess_data[1]==0) SET_REG(LPC_GPIO3->FIOSET,1,25,1);
;;;3237   		else SET_REG(LPC_GPIO3->FIOCLR,1,25,1);
;;;3238   		}
;;;3239   	else	if(!(avar_ind_stat&0x00000001)) SET_REG(LPC_GPIO3->FIOSET,1,25,1);
;;;3240   	else SET_REG(LPC_GPIO3->FIOCLR,1,25,1);
;;;3241   	#endif
;;;3242   	#ifdef UKU2071x
;;;3243   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_NET))
;;;3244   		{
;;;3245   		if(mess_data[1]==0) SET_REG(LPC_GPIO3->FIOCLR,1,25,1);
;;;3246   		else SET_REG(LPC_GPIO3->FIOSET,1,25,1);
;;;3247   		}
;;;3248   	else	if(!(avar_ind_stat&0x00000001)) SET_REG(LPC_GPIO3->FIOCLR,1,25,1);
;;;3249   	else SET_REG(LPC_GPIO3->FIOSET,1,25,1);
;;;3250   	#endif
;;;3251   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BPS))
;;;3252   		{
;;;3253   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,7,1);
;;;3254   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,7,1);
;;;3255   	     }
;;;3256   	else 
;;;3257   		{
;;;3258   		if(!(avar_ind_stat&0x100007f8)) SET_REG(LPC_GPIO0->FIOCLR,1,7,1);
;;;3259   	     else SET_REG(LPC_GPIO0->FIOSET,1,7,1);
;;;3260   		} 
;;;3261   
;;;3262   	//  
;;;3263   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BAT))
;;;3264   		{
;;;3265   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,4,1);
;;;3266   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,4,1);
;;;3267        	}
;;;3268   	else 
;;;3269   		{
;;;3270   		if(!(ips_bat_av_stat)) SET_REG(LPC_GPIO0->FIOCLR,1,4,1);
0019fe  f8df81c4          LDR      r8,|L1.7108|
001a02  4f71              LDR      r7,|L1.7112|
001a04  8800              LDRH     r0,[r0,#0]            ;3231  ; AUSW_MAIN
001a06  f5a041aa          SUB      r1,r0,#0x5500         ;3231
001a0a  39fa              SUBS     r1,r1,#0xfa           ;3231
001a0c  d001              BEQ      |L1.6674|
001a0e  1e49              SUBS     r1,r1,#1              ;3231
001a10  d16f              BNE      |L1.6898|
                  |L1.6674|
001a12  20d2              MOVS     r0,#0xd2              ;3243
001a14  f7fffffe          BL       mess_find_unvol
001a18  b110              CBZ      r0,|L1.6688|
001a1a  6828              LDR      r0,[r5,#0]            ;3243  ; mess_data
001a1c  2866              CMP      r0,#0x66              ;3243
001a1e  d043              BEQ      |L1.6824|
                  |L1.6688|
001a20  6830              LDR      r0,[r6,#0]            ;3248  ; avar_ind_stat
001a22  07c0              LSLS     r0,r0,#31             ;3248
001a24  d04d              BEQ      |L1.6850|
001a26  6fa0              LDR      r0,[r4,#0x78]         ;3249
001a28  f0407000          ORR      r0,r0,#0x2000000      ;3249
001a2c  67a0              STR      r0,[r4,#0x78]         ;3249
                  |L1.6702|
001a2e  20d2              MOVS     r0,#0xd2              ;3251
001a30  f7fffffe          BL       mess_find_unvol
001a34  b110              CBZ      r0,|L1.6716|
001a36  6828              LDR      r0,[r5,#0]            ;3251  ; mess_data
001a38  286a              CMP      r0,#0x6a              ;3251
001a3a  d047              BEQ      |L1.6860|
                  |L1.6716|
001a3c  6830              LDR      r0,[r6,#0]            ;3258  ; avar_ind_stat
001a3e  4238              TST      r0,r7                 ;3258
001a40  d052              BEQ      |L1.6888|
001a42  69a0              LDR      r0,[r4,#0x18]         ;3259
001a44  f0400080          ORR      r0,r0,#0x80           ;3259
001a48  61a0              STR      r0,[r4,#0x18]         ;3259
                  |L1.6730|
001a4a  20d2              MOVS     r0,#0xd2              ;3263
001a4c  f7fffffe          BL       mess_find_unvol
001a50  b110              CBZ      r0,|L1.6744|
001a52  6828              LDR      r0,[r5,#0]            ;3263  ; mess_data
001a54  2867              CMP      r0,#0x67              ;3263
001a56  d04d              BEQ      |L1.6900|
                  |L1.6744|
001a58  f8980000          LDRB     r0,[r8,#0]  ; ips_bat_av_stat
001a5c  b380              CBZ      r0,|L1.6848|
;;;3271        	else SET_REG(LPC_GPIO0->FIOSET,1,4,1);
001a5e  69a0              LDR      r0,[r4,#0x18]
001a60  f0400010          ORR      r0,r0,#0x10
001a64  61a0              STR      r0,[r4,#0x18]
001a66  e1ef              B        |L1.7752|
                  |L1.6760|
001a68  6868              LDR      r0,[r5,#4]            ;2770  ; mess_data
001a6a  2801              CMP      r0,#1                 ;2770
001a6c  d006              BEQ      |L1.6780|
001a6e  2800              CMP      r0,#0                 ;2771
001a70  d1b5              BNE      |L1.6622|
001a72  69e0              LDR      r0,[r4,#0x1c]         ;2771
001a74  f0405000          ORR      r0,r0,#0x20000000     ;2771
001a78  61e0              STR      r0,[r4,#0x1c]         ;2771
001a7a  e7b0              B        |L1.6622|
                  |L1.6780|
001a7c  69a0              LDR      r0,[r4,#0x18]         ;2770
001a7e  f0405000          ORR      r0,r0,#0x20000000     ;2770
001a82  61a0              STR      r0,[r4,#0x18]         ;2770
001a84  e7ab              B        |L1.6622|
                  |L1.6790|
001a86  6868              LDR      r0,[r5,#4]            ;2790  ; mess_data
001a88  b120              CBZ      r0,|L1.6804|
001a8a  6fa0              LDR      r0,[r4,#0x78]         ;2791
001a8c  f0407000          ORR      r0,r0,#0x2000000      ;2791
001a90  67a0              STR      r0,[r4,#0x78]         ;2791
001a92  e7b3              B        |L1.6652|
                  |L1.6804|
001a94  6fe0              LDR      r0,[r4,#0x7c]         ;2790
001a96  f0407000          ORR      r0,r0,#0x2000000      ;2790
001a9a  67e0              STR      r0,[r4,#0x7c]         ;2790
001a9c  e7ae              B        |L1.6652|
                  |L1.6814|
001a9e  6fe0              LDR      r0,[r4,#0x7c]         ;2793
001aa0  f0407000          ORR      r0,r0,#0x2000000      ;2793
001aa4  67e0              STR      r0,[r4,#0x7c]         ;2793
001aa6  e7a9              B        |L1.6652|
                  |L1.6824|
001aa8  6868              LDR      r0,[r5,#4]            ;3245  ; mess_data
001aaa  b120              CBZ      r0,|L1.6838|
001aac  6fa0              LDR      r0,[r4,#0x78]         ;3246
001aae  f0407000          ORR      r0,r0,#0x2000000      ;3246
001ab2  67a0              STR      r0,[r4,#0x78]         ;3246
001ab4  e7bb              B        |L1.6702|
                  |L1.6838|
001ab6  6fe0              LDR      r0,[r4,#0x7c]         ;3245
001ab8  f0407000          ORR      r0,r0,#0x2000000      ;3245
001abc  67e0              STR      r0,[r4,#0x7c]         ;3245
001abe  e7b6              B        |L1.6702|
                  |L1.6848|
001ac0  e027              B        |L1.6930|
                  |L1.6850|
001ac2  6fe0              LDR      r0,[r4,#0x7c]         ;3248
001ac4  f0407000          ORR      r0,r0,#0x2000000      ;3248
001ac8  67e0              STR      r0,[r4,#0x7c]         ;3248
001aca  e7b0              B        |L1.6702|
                  |L1.6860|
001acc  6868              LDR      r0,[r5,#4]            ;3253  ; mess_data
001ace  b130              CBZ      r0,|L1.6878|
001ad0  2801              CMP      r0,#1                 ;3254
001ad2  d1ba              BNE      |L1.6730|
001ad4  69a0              LDR      r0,[r4,#0x18]         ;3254
001ad6  f0400080          ORR      r0,r0,#0x80           ;3254
001ada  61a0              STR      r0,[r4,#0x18]         ;3254
001adc  e7b5              B        |L1.6730|
                  |L1.6878|
001ade  69e0              LDR      r0,[r4,#0x1c]         ;3253
001ae0  f0400080          ORR      r0,r0,#0x80           ;3253
001ae4  61e0              STR      r0,[r4,#0x1c]         ;3253
001ae6  e7b0              B        |L1.6730|
                  |L1.6888|
001ae8  69e0              LDR      r0,[r4,#0x1c]         ;3258
001aea  f0400080          ORR      r0,r0,#0x80           ;3258
001aee  61e0              STR      r0,[r4,#0x1c]         ;3258
001af0  e7ab              B        |L1.6730|
                  |L1.6898|
001af2  e013              B        |L1.6940|
                  |L1.6900|
001af4  6868              LDR      r0,[r5,#4]            ;3265  ; mess_data
001af6  b110              CBZ      r0,|L1.6910|
001af8  2801              CMP      r0,#1                 ;3266
001afa  d005              BEQ      |L1.6920|
001afc  e1a4              B        |L1.7752|
                  |L1.6910|
001afe  69e0              LDR      r0,[r4,#0x1c]         ;3265
001b00  f0400010          ORR      r0,r0,#0x10           ;3265
001b04  61e0              STR      r0,[r4,#0x1c]         ;3265
001b06  e19f              B        |L1.7752|
                  |L1.6920|
001b08  69a0              LDR      r0,[r4,#0x18]         ;3266
001b0a  f0400010          ORR      r0,r0,#0x10           ;3266
001b0e  61a0              STR      r0,[r4,#0x18]         ;3266
001b10  e19a              B        |L1.7752|
                  |L1.6930|
001b12  69e0              LDR      r0,[r4,#0x1c]         ;3270
001b14  f0400010          ORR      r0,r0,#0x10           ;3270
001b18  61e0              STR      r0,[r4,#0x1c]         ;3270
001b1a  e195              B        |L1.7752|
                  |L1.6940|
;;;3272   		}
;;;3273   	}
;;;3274   
;;;3275   else	if(AUSW_MAIN==22023)
001b1c  f5a041ac          SUB      r1,r0,#0x5600
001b20  3907              SUBS     r1,#7
001b22  d173              BNE      |L1.7180|
;;;3276   	{
;;;3277   
;;;3278   	//  
;;;3279   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BAT))
001b24  20d2              MOVS     r0,#0xd2
001b26  f7fffffe          BL       mess_find_unvol
001b2a  b110              CBZ      r0,|L1.6962|
001b2c  6828              LDR      r0,[r5,#0]  ; mess_data
001b2e  2867              CMP      r0,#0x67
001b30  d023              BEQ      |L1.7034|
                  |L1.6962|
;;;3280   		{
;;;3281   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,4,1);
;;;3282   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,4,1);
;;;3283        	}
;;;3284   	else 
;;;3285   		{
;;;3286   		if(!(ips_bat_av_stat)) SET_REG(LPC_GPIO0->FIOCLR,1,4,1);
001b32  f8980000          LDRB     r0,[r8,#0]  ; ips_bat_av_stat
001b36  b348              CBZ      r0,|L1.7052|
;;;3287        	else SET_REG(LPC_GPIO0->FIOSET,1,4,1);
001b38  69a0              LDR      r0,[r4,#0x18]
001b3a  f0400010          ORR      r0,r0,#0x10
001b3e  61a0              STR      r0,[r4,#0x18]
                  |L1.6976|
;;;3288   		} 
;;;3289   
;;;3290   
;;;3291   	//         .    
;;;3292   	#ifndef UKU2071x
;;;3293   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_NET))
;;;3294   		{
;;;3295   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;3296   		else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_NET,1);
;;;3297   		}
;;;3298   	else	if(!(avar_ind_stat&0x00000001)) SET_REG(LPC_GPIO1->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;3299   	else SET_REG(LPC_GPIO3->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;3300   	#endif
;;;3301   	#ifdef UKU2071x
;;;3302   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_NET))
001b40  20d2              MOVS     r0,#0xd2
001b42  f7fffffe          BL       mess_find_unvol
001b46  b110              CBZ      r0,|L1.6990|
001b48  6828              LDR      r0,[r5,#0]  ; mess_data
001b4a  2866              CMP      r0,#0x66
001b4c  d048              BEQ      |L1.7136|
                  |L1.6990|
;;;3303   		{
;;;3304   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_NET,1);
;;;3305   		else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;3306   		}
;;;3307   	else	if(!(avar_ind_stat&0x00000001)) SET_REG(LPC_GPIO1->FIOSET,1,SHIFT_REL_AV_NET,1);
001b4e  6830              LDR      r0,[r6,#0]  ; avar_ind_stat
001b50  07c0              LSLS     r0,r0,#31
001b52  d051              BEQ      |L1.7160|
;;;3308   	else SET_REG(LPC_GPIO3->FIOSET,1,SHIFT_REL_AV_NET,1);
001b54  6fa0              LDR      r0,[r4,#0x78]
001b56  f0407000          ORR      r0,r0,#0x2000000
001b5a  67a0              STR      r0,[r4,#0x78]
                  |L1.7004|
;;;3309   	#endif
;;;3310   
;;;3311   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BPS))
001b5c  20d2              MOVS     r0,#0xd2
001b5e  f7fffffe          BL       mess_find_unvol
001b62  b110              CBZ      r0,|L1.7018|
001b64  6828              LDR      r0,[r5,#0]  ; mess_data
001b66  286a              CMP      r0,#0x6a
001b68  d04b              BEQ      |L1.7170|
                  |L1.7018|
;;;3312   		{
;;;3313   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,7,1);
;;;3314   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,7,1);
;;;3315   	     }
;;;3316   	else 
;;;3317   		{
;;;3318   		if(!(avar_ind_stat&0x100007f8)) SET_REG(LPC_GPIO0->FIOCLR,1,7,1);
001b6a  6830              LDR      r0,[r6,#0]  ; avar_ind_stat
001b6c  4238              TST      r0,r7
001b6e  d058              BEQ      |L1.7202|
;;;3319   	     else SET_REG(LPC_GPIO0->FIOSET,1,7,1);
001b70  69a0              LDR      r0,[r4,#0x18]
001b72  f0400080          ORR      r0,r0,#0x80
001b76  61a0              STR      r0,[r4,#0x18]
001b78  e166              B        |L1.7752|
                  |L1.7034|
001b7a  6868              LDR      r0,[r5,#4]            ;3281  ; mess_data
001b7c  b138              CBZ      r0,|L1.7054|
001b7e  2801              CMP      r0,#1                 ;3282
001b80  d1de              BNE      |L1.6976|
001b82  69a0              LDR      r0,[r4,#0x18]         ;3282
001b84  f0400010          ORR      r0,r0,#0x10           ;3282
001b88  61a0              STR      r0,[r4,#0x18]         ;3282
001b8a  e7d9              B        |L1.6976|
                  |L1.7052|
001b8c  e023              B        |L1.7126|
                  |L1.7054|
001b8e  e01d              B        |L1.7116|
                  |L1.7056|
                          DCD      0x2009c000
                  |L1.7060|
                          DCD      ||area_number.21||
                  |L1.7064|
                          DCD      bps
                  |L1.7068|
                          DCD      NUMIST
                  |L1.7072|
                          DCD      0x4002c000
                  |L1.7076|
                          DCD      0xfff000ff
                  |L1.7080|
                          DCD      bat
                  |L1.7084|
                          DCD      tbatdisable_stat
                  |L1.7088|
                          DCD      tbatdisable_cmnd
                  |L1.7092|
                          DCD      main_1Hz_cnt
                  |L1.7096|
                          DCD      mess_data
                  |L1.7100|
                          DCD      avar_ind_stat
                  |L1.7104|
                          DCD      AUSW_MAIN
                  |L1.7108|
                          DCD      ips_bat_av_stat
                  |L1.7112|
                          DCD      0x100007f8
                  |L1.7116|
001bcc  69e0              LDR      r0,[r4,#0x1c]         ;3281
001bce  f0400010          ORR      r0,r0,#0x10           ;3281
001bd2  61e0              STR      r0,[r4,#0x1c]         ;3281
001bd4  e7b4              B        |L1.6976|
                  |L1.7126|
001bd6  69e0              LDR      r0,[r4,#0x1c]         ;3286
001bd8  f0400010          ORR      r0,r0,#0x10           ;3286
001bdc  61e0              STR      r0,[r4,#0x1c]         ;3286
001bde  e7af              B        |L1.6976|
                  |L1.7136|
001be0  6868              LDR      r0,[r5,#4]            ;3304  ; mess_data
001be2  b120              CBZ      r0,|L1.7150|
001be4  69e0              LDR      r0,[r4,#0x1c]         ;3305
001be6  f0407000          ORR      r0,r0,#0x2000000      ;3305
001bea  61e0              STR      r0,[r4,#0x1c]         ;3305
001bec  e7b6              B        |L1.7004|
                  |L1.7150|
001bee  69a0              LDR      r0,[r4,#0x18]         ;3304
001bf0  f0407000          ORR      r0,r0,#0x2000000      ;3304
001bf4  61a0              STR      r0,[r4,#0x18]         ;3304
001bf6  e7b1              B        |L1.7004|
                  |L1.7160|
001bf8  6ba0              LDR      r0,[r4,#0x38]         ;3307
001bfa  f0407000          ORR      r0,r0,#0x2000000      ;3307
001bfe  63a0              STR      r0,[r4,#0x38]         ;3307
001c00  e7ac              B        |L1.7004|
                  |L1.7170|
001c02  6868              LDR      r0,[r5,#4]            ;3313  ; mess_data
001c04  b118              CBZ      r0,|L1.7182|
001c06  2801              CMP      r0,#1                 ;3314
001c08  d006              BEQ      |L1.7192|
001c0a  e11d              B        |L1.7752|
                  |L1.7180|
001c0c  e00e              B        |L1.7212|
                  |L1.7182|
001c0e  69e0              LDR      r0,[r4,#0x1c]         ;3313
001c10  f0400080          ORR      r0,r0,#0x80           ;3313
001c14  61e0              STR      r0,[r4,#0x1c]         ;3313
001c16  e117              B        |L1.7752|
                  |L1.7192|
001c18  69a0              LDR      r0,[r4,#0x18]         ;3314
001c1a  f0400080          ORR      r0,r0,#0x80           ;3314
001c1e  61a0              STR      r0,[r4,#0x18]         ;3314
001c20  e112              B        |L1.7752|
                  |L1.7202|
001c22  69e0              LDR      r0,[r4,#0x1c]         ;3318
001c24  f0400080          ORR      r0,r0,#0x80           ;3318
001c28  61e0              STR      r0,[r4,#0x1c]         ;3318
001c2a  e10d              B        |L1.7752|
                  |L1.7212|
;;;3320   		} 
;;;3321   	}
;;;3322   else	if(AUSW_MAIN==22043)
001c2c  f5a041ac          SUB      r1,r0,#0x5600
001c30  391b              SUBS     r1,r1,#0x1b
001c32  d170              BNE      |L1.7446|
;;;3323   	{
;;;3324   	//  
;;;3325   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BAT))
001c34  20d2              MOVS     r0,#0xd2
001c36  f7fffffe          BL       mess_find_unvol
001c3a  b110              CBZ      r0,|L1.7234|
001c3c  6828              LDR      r0,[r5,#0]  ; mess_data
001c3e  2867              CMP      r0,#0x67
001c40  d031              BEQ      |L1.7334|
                  |L1.7234|
;;;3326   		{
;;;3327   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,4,1);
;;;3328   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,4,1);
;;;3329        	}
;;;3330   	else 
;;;3331   		{
;;;3332   		if(!(ips_bat_av_stat)) SET_REG(LPC_GPIO0->FIOCLR,1,4,1);
001c42  f8980000          LDRB     r0,[r8,#0]  ; ips_bat_av_stat
001c46  b3b8              CBZ      r0,|L1.7352|
;;;3333        	else SET_REG(LPC_GPIO0->FIOSET,1,4,1);
001c48  69a0              LDR      r0,[r4,#0x18]
001c4a  f0400010          ORR      r0,r0,#0x10
001c4e  61a0              STR      r0,[r4,#0x18]
                  |L1.7248|
;;;3334   		} 
;;;3335   	//         .    
;;;3336   	#ifndef UKU2071x 
;;;3337   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_NET))
;;;3338   		{
;;;3339   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;3340   		else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_NET,1);
;;;3341   		}
;;;3342   	else	if(!(avar_ind_stat&0x00000001)) SET_REG(LPC_GPIO1->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;3343   	else SET_REG(LPC_GPIO3->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;3344   	#endif
;;;3345   	#ifdef UKU2071x 
;;;3346   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_NET))
001c50  20d2              MOVS     r0,#0xd2
001c52  f7fffffe          BL       mess_find_unvol
001c56  b110              CBZ      r0,|L1.7262|
001c58  6828              LDR      r0,[r5,#0]  ; mess_data
001c5a  2866              CMP      r0,#0x66
001c5c  d037              BEQ      |L1.7374|
                  |L1.7262|
;;;3347   		{
;;;3348   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_NET,1);
;;;3349   		else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;3350   		}
;;;3351   	else	if(!(avar_ind_stat&0x00000001)) SET_REG(LPC_GPIO1->FIOSET,1,SHIFT_REL_AV_NET,1);
001c5e  6830              LDR      r0,[r6,#0]  ; avar_ind_stat
001c60  07c0              LSLS     r0,r0,#31
001c62  d040              BEQ      |L1.7398|
;;;3352   	else SET_REG(LPC_GPIO3->FIOSET,1,SHIFT_REL_AV_NET,1);
001c64  6fa0              LDR      r0,[r4,#0x78]
001c66  f0407000          ORR      r0,r0,#0x2000000
001c6a  67a0              STR      r0,[r4,#0x78]
                  |L1.7276|
;;;3353   	#endif
;;;3354   
;;;3355   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BPS))
001c6c  20d2              MOVS     r0,#0xd2
001c6e  f7fffffe          BL       mess_find_unvol
001c72  b110              CBZ      r0,|L1.7290|
001c74  6828              LDR      r0,[r5,#0]  ; mess_data
001c76  286a              CMP      r0,#0x6a
001c78  d03a              BEQ      |L1.7408|
                  |L1.7290|
;;;3356   		{
;;;3357   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,7,1);
;;;3358   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,7,1);
;;;3359   	     }
;;;3360   	else 
;;;3361   		{
;;;3362   		if(!(avar_ind_stat&0x100007f8)) SET_REG(LPC_GPIO0->FIOCLR,1,7,1);
001c7a  6830              LDR      r0,[r6,#0]  ; avar_ind_stat
001c7c  4238              TST      r0,r7
001c7e  d045              BEQ      |L1.7436|
;;;3363   	     else SET_REG(LPC_GPIO0->FIOSET,1,7,1);
001c80  69a0              LDR      r0,[r4,#0x18]
001c82  f0400080          ORR      r0,r0,#0x80
001c86  61a0              STR      r0,[r4,#0x18]
                  |L1.7304|
;;;3364   		}
;;;3365   	//  
;;;3366   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BPS))
001c88  20d2              MOVS     r0,#0xd2
001c8a  f7fffffe          BL       mess_find_unvol
001c8e  b110              CBZ      r0,|L1.7318|
001c90  6828              LDR      r0,[r5,#0]  ; mess_data
001c92  286a              CMP      r0,#0x6a
001c94  d040              BEQ      |L1.7448|
                  |L1.7318|
;;;3367   		{
;;;3368   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
;;;3369   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
;;;3370        	}
;;;3371   	else 
;;;3372   		{
;;;3373   		if(!(avar_ind_stat&0x100007f8)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
001c96  6830              LDR      r0,[r6,#0]  ; avar_ind_stat
001c98  4238              TST      r0,r7
001c9a  d04c              BEQ      |L1.7478|
;;;3374        	else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
001c9c  69a0              LDR      r0,[r4,#0x18]
001c9e  f0400020          ORR      r0,r0,#0x20
001ca2  61a0              STR      r0,[r4,#0x18]
001ca4  e0d0              B        |L1.7752|
                  |L1.7334|
001ca6  6868              LDR      r0,[r5,#4]            ;3327  ; mess_data
001ca8  b138              CBZ      r0,|L1.7354|
001caa  2801              CMP      r0,#1                 ;3328
001cac  d1d0              BNE      |L1.7248|
001cae  69a0              LDR      r0,[r4,#0x18]         ;3328
001cb0  f0400010          ORR      r0,r0,#0x10           ;3328
001cb4  61a0              STR      r0,[r4,#0x18]         ;3328
001cb6  e7cb              B        |L1.7248|
                  |L1.7352|
001cb8  e004              B        |L1.7364|
                  |L1.7354|
001cba  69e0              LDR      r0,[r4,#0x1c]         ;3327
001cbc  f0400010          ORR      r0,r0,#0x10           ;3327
001cc0  61e0              STR      r0,[r4,#0x1c]         ;3327
001cc2  e7c5              B        |L1.7248|
                  |L1.7364|
001cc4  69e0              LDR      r0,[r4,#0x1c]         ;3332
001cc6  f0400010          ORR      r0,r0,#0x10           ;3332
001cca  61e0              STR      r0,[r4,#0x1c]         ;3332
001ccc  e7c0              B        |L1.7248|
                  |L1.7374|
001cce  6868              LDR      r0,[r5,#4]            ;3348  ; mess_data
001cd0  b120              CBZ      r0,|L1.7388|
001cd2  69e0              LDR      r0,[r4,#0x1c]         ;3349
001cd4  f0407000          ORR      r0,r0,#0x2000000      ;3349
001cd8  61e0              STR      r0,[r4,#0x1c]         ;3349
001cda  e7c7              B        |L1.7276|
                  |L1.7388|
001cdc  69a0              LDR      r0,[r4,#0x18]         ;3348
001cde  f0407000          ORR      r0,r0,#0x2000000      ;3348
001ce2  61a0              STR      r0,[r4,#0x18]         ;3348
001ce4  e7c2              B        |L1.7276|
                  |L1.7398|
001ce6  6ba0              LDR      r0,[r4,#0x38]         ;3351
001ce8  f0407000          ORR      r0,r0,#0x2000000      ;3351
001cec  63a0              STR      r0,[r4,#0x38]         ;3351
001cee  e7bd              B        |L1.7276|
                  |L1.7408|
001cf0  6868              LDR      r0,[r5,#4]            ;3357  ; mess_data
001cf2  b130              CBZ      r0,|L1.7426|
001cf4  2801              CMP      r0,#1                 ;3358
001cf6  d1c7              BNE      |L1.7304|
001cf8  69a0              LDR      r0,[r4,#0x18]         ;3358
001cfa  f0400080          ORR      r0,r0,#0x80           ;3358
001cfe  61a0              STR      r0,[r4,#0x18]         ;3358
001d00  e7c2              B        |L1.7304|
                  |L1.7426|
001d02  69e0              LDR      r0,[r4,#0x1c]         ;3357
001d04  f0400080          ORR      r0,r0,#0x80           ;3357
001d08  61e0              STR      r0,[r4,#0x1c]         ;3357
001d0a  e7bd              B        |L1.7304|
                  |L1.7436|
001d0c  69e0              LDR      r0,[r4,#0x1c]         ;3362
001d0e  f0400080          ORR      r0,r0,#0x80           ;3362
001d12  61e0              STR      r0,[r4,#0x1c]         ;3362
001d14  e7b8              B        |L1.7304|
                  |L1.7446|
001d16  e013              B        |L1.7488|
                  |L1.7448|
001d18  6868              LDR      r0,[r5,#4]            ;3368  ; mess_data
001d1a  b110              CBZ      r0,|L1.7458|
001d1c  2801              CMP      r0,#1                 ;3369
001d1e  d005              BEQ      |L1.7468|
001d20  e092              B        |L1.7752|
                  |L1.7458|
001d22  69e0              LDR      r0,[r4,#0x1c]         ;3368
001d24  f0400020          ORR      r0,r0,#0x20           ;3368
001d28  61e0              STR      r0,[r4,#0x1c]         ;3368
001d2a  e08d              B        |L1.7752|
                  |L1.7468|
001d2c  69a0              LDR      r0,[r4,#0x18]         ;3369
001d2e  f0400020          ORR      r0,r0,#0x20           ;3369
001d32  61a0              STR      r0,[r4,#0x18]         ;3369
001d34  e088              B        |L1.7752|
                  |L1.7478|
001d36  69e0              LDR      r0,[r4,#0x1c]         ;3373
001d38  f0400020          ORR      r0,r0,#0x20           ;3373
001d3c  61e0              STR      r0,[r4,#0x1c]         ;3373
001d3e  e083              B        |L1.7752|
                  |L1.7488|
;;;3375   		} 
;;;3376   	}
;;;3377   else	if(AUSW_MAIN==22033)
001d40  f5a041ac          SUB      r1,r0,#0x5600
001d44  3911              SUBS     r1,r1,#0x11
001d46  d163              BNE      |L1.7696|
;;;3378   	{
;;;3379   	#ifndef UKU2071x 
;;;3380   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_NET))
;;;3381   		{
;;;3382   		if(mess_data[1]==0) SET_REG(LPC_GPIO3->FIOSET,1,25,1);
;;;3383   		else SET_REG(LPC_GPIO3->FIOCLR,1,25,1);
;;;3384   		}
;;;3385   	else	if(!(avar_ind_stat&0x00000001)) SET_REG(LPC_GPIO3->FIOSET,1,25,1);
;;;3386   	else SET_REG(LPC_GPIO3->FIOCLR,1,25,1);
;;;3387   	#endif
;;;3388   	#ifdef UKU2071x 
;;;3389   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_NET))
001d48  20d2              MOVS     r0,#0xd2
001d4a  f7fffffe          BL       mess_find_unvol
001d4e  b110              CBZ      r0,|L1.7510|
001d50  6828              LDR      r0,[r5,#0]  ; mess_data
001d52  2866              CMP      r0,#0x66
001d54  d023              BEQ      |L1.7582|
                  |L1.7510|
;;;3390   		{
;;;3391   		if(mess_data[1]==0) SET_REG(LPC_GPIO3->FIOCLR,1,25,1);
;;;3392   		else SET_REG(LPC_GPIO3->FIOSET,1,25,1);
;;;3393   		}
;;;3394   	else	if(!(avar_ind_stat&0x00000001)) SET_REG(LPC_GPIO3->FIOCLR,1,25,1);
001d56  6830              LDR      r0,[r6,#0]  ; avar_ind_stat
001d58  07c0              LSLS     r0,r0,#31
001d5a  d02c              BEQ      |L1.7606|
;;;3395   	else SET_REG(LPC_GPIO3->FIOSET,1,25,1);
001d5c  6fa0              LDR      r0,[r4,#0x78]
001d5e  f0407000          ORR      r0,r0,#0x2000000
001d62  67a0              STR      r0,[r4,#0x78]
                  |L1.7524|
;;;3396   	#endif
;;;3397   	
;;;3398   	
;;;3399   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BPS))
001d64  20d2              MOVS     r0,#0xd2
001d66  f7fffffe          BL       mess_find_unvol
001d6a  b110              CBZ      r0,|L1.7538|
001d6c  6828              LDR      r0,[r5,#0]  ; mess_data
001d6e  286a              CMP      r0,#0x6a
001d70  d026              BEQ      |L1.7616|
                  |L1.7538|
;;;3400   		{
;;;3401   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,7,1);
;;;3402   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,7,1);
;;;3403   	     }
;;;3404   	else 
;;;3405   		{
;;;3406   		if(!(avar_ind_stat&0x100007f8)) SET_REG(LPC_GPIO0->FIOCLR,1,7,1);
001d72  6830              LDR      r0,[r6,#0]  ; avar_ind_stat
001d74  4238              TST      r0,r7
001d76  d031              BEQ      |L1.7644|
;;;3407   	     else SET_REG(LPC_GPIO0->FIOSET,1,7,1);
001d78  69a0              LDR      r0,[r4,#0x18]
001d7a  f0400080          ORR      r0,r0,#0x80
001d7e  61a0              STR      r0,[r4,#0x18]
                  |L1.7552|
;;;3408   		} 
;;;3409   
;;;3410   	//  
;;;3411   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BAT))
001d80  20d2              MOVS     r0,#0xd2
001d82  f7fffffe          BL       mess_find_unvol
001d86  b110              CBZ      r0,|L1.7566|
001d88  6828              LDR      r0,[r5,#0]  ; mess_data
001d8a  2867              CMP      r0,#0x67
001d8c  d02b              BEQ      |L1.7654|
                  |L1.7566|
;;;3412   		{
;;;3413   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,4,1);
;;;3414   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,4,1);
;;;3415        	}
;;;3416   	else 
;;;3417   		{
;;;3418   		if(!(ips_bat_av_stat)) SET_REG(LPC_GPIO0->FIOCLR,1,4,1);
001d8e  f8980000          LDRB     r0,[r8,#0]  ; ips_bat_av_stat
001d92  b390              CBZ      r0,|L1.7674|
;;;3419        	else SET_REG(LPC_GPIO0->FIOSET,1,4,1);
001d94  69a0              LDR      r0,[r4,#0x18]
001d96  f0400010          ORR      r0,r0,#0x10
001d9a  61a0              STR      r0,[r4,#0x18]
001d9c  e054              B        |L1.7752|
                  |L1.7582|
001d9e  6868              LDR      r0,[r5,#4]            ;3391  ; mess_data
001da0  b120              CBZ      r0,|L1.7596|
001da2  6fa0              LDR      r0,[r4,#0x78]         ;3392
001da4  f0407000          ORR      r0,r0,#0x2000000      ;3392
001da8  67a0              STR      r0,[r4,#0x78]         ;3392
001daa  e7db              B        |L1.7524|
                  |L1.7596|
001dac  6fe0              LDR      r0,[r4,#0x7c]         ;3391
001dae  f0407000          ORR      r0,r0,#0x2000000      ;3391
001db2  67e0              STR      r0,[r4,#0x7c]         ;3391
001db4  e7d6              B        |L1.7524|
                  |L1.7606|
001db6  6fe0              LDR      r0,[r4,#0x7c]         ;3394
001db8  f0407000          ORR      r0,r0,#0x2000000      ;3394
001dbc  67e0              STR      r0,[r4,#0x7c]         ;3394
001dbe  e7d1              B        |L1.7524|
                  |L1.7616|
001dc0  6868              LDR      r0,[r5,#4]            ;3401  ; mess_data
001dc2  b130              CBZ      r0,|L1.7634|
001dc4  2801              CMP      r0,#1                 ;3402
001dc6  d1db              BNE      |L1.7552|
001dc8  69a0              LDR      r0,[r4,#0x18]         ;3402
001dca  f0400080          ORR      r0,r0,#0x80           ;3402
001dce  61a0              STR      r0,[r4,#0x18]         ;3402
001dd0  e7d6              B        |L1.7552|
                  |L1.7634|
001dd2  69e0              LDR      r0,[r4,#0x1c]         ;3401
001dd4  f0400080          ORR      r0,r0,#0x80           ;3401
001dd8  61e0              STR      r0,[r4,#0x1c]         ;3401
001dda  e7d1              B        |L1.7552|
                  |L1.7644|
001ddc  69e0              LDR      r0,[r4,#0x1c]         ;3406
001dde  f0400080          ORR      r0,r0,#0x80           ;3406
001de2  61e0              STR      r0,[r4,#0x1c]         ;3406
001de4  e7cc              B        |L1.7552|
                  |L1.7654|
001de6  6868              LDR      r0,[r5,#4]            ;3413  ; mess_data
001de8  b110              CBZ      r0,|L1.7664|
001dea  2801              CMP      r0,#1                 ;3414
001dec  d006              BEQ      |L1.7676|
001dee  e02b              B        |L1.7752|
                  |L1.7664|
001df0  69e0              LDR      r0,[r4,#0x1c]         ;3413
001df2  f0400010          ORR      r0,r0,#0x10           ;3413
001df6  61e0              STR      r0,[r4,#0x1c]         ;3413
001df8  e026              B        |L1.7752|
                  |L1.7674|
001dfa  e004              B        |L1.7686|
                  |L1.7676|
001dfc  69a0              LDR      r0,[r4,#0x18]         ;3414
001dfe  f0400010          ORR      r0,r0,#0x10           ;3414
001e02  61a0              STR      r0,[r4,#0x18]         ;3414
001e04  e020              B        |L1.7752|
                  |L1.7686|
001e06  69e0              LDR      r0,[r4,#0x1c]         ;3418
001e08  f0400010          ORR      r0,r0,#0x10           ;3418
001e0c  61e0              STR      r0,[r4,#0x1c]         ;3418
001e0e  e01b              B        |L1.7752|
                  |L1.7696|
;;;3420   		} 
;;;3421   	} 	 
;;;3422   else	
;;;3423   	{
;;;3424   	//         .    
;;;3425   	#ifndef UKU2071x 
;;;3426   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_NET))
;;;3427   		{
;;;3428   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;3429   		else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_NET,1);
;;;3430   		}
;;;3431   	else	if(!(avar_ind_stat&0x00000001)) SET_REG(LPC_GPIO1->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;3432   	else SET_REG(LPC_GPIO3->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;3433   	#endif
;;;3434   	#ifdef UKU2071x 
;;;3435   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_NET))
001e10  20d2              MOVS     r0,#0xd2
001e12  f7fffffe          BL       mess_find_unvol
001e16  b110              CBZ      r0,|L1.7710|
001e18  6828              LDR      r0,[r5,#0]  ; mess_data
001e1a  2866              CMP      r0,#0x66
001e1c  d02d              BEQ      |L1.7802|
                  |L1.7710|
;;;3436   		{
;;;3437   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_NET,1);
;;;3438   		else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;3439   		}
;;;3440   	else	if(!(avar_ind_stat&0x00000001)) SET_REG(LPC_GPIO1->FIOSET,1,SHIFT_REL_AV_NET,1);
001e1e  6830              LDR      r0,[r6,#0]  ; avar_ind_stat
001e20  07c0              LSLS     r0,r0,#31
001e22  d036              BEQ      |L1.7826|
;;;3441   	else SET_REG(LPC_GPIO3->FIOSET,1,SHIFT_REL_AV_NET,1);
001e24  6fa0              LDR      r0,[r4,#0x78]
001e26  f0407000          ORR      r0,r0,#0x2000000
001e2a  67a0              STR      r0,[r4,#0x78]
                  |L1.7724|
;;;3442   	#endif
;;;3443   
;;;3444   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BPS))
001e2c  20d2              MOVS     r0,#0xd2
001e2e  f7fffffe          BL       mess_find_unvol
001e32  b110              CBZ      r0,|L1.7738|
001e34  6828              LDR      r0,[r5,#0]  ; mess_data
001e36  286a              CMP      r0,#0x6a
001e38  d030              BEQ      |L1.7836|
                  |L1.7738|
;;;3445   		{
;;;3446   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
;;;3447   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
;;;3448        	}
;;;3449   	else 
;;;3450   		{
;;;3451   		if(!(avar_ind_stat&0x100007f8)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
001e3a  6830              LDR      r0,[r6,#0]  ; avar_ind_stat
001e3c  4238              TST      r0,r7
001e3e  d03b              BEQ      |L1.7864|
;;;3452        	else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
001e40  69a0              LDR      r0,[r4,#0x18]
001e42  f0400020          ORR      r0,r0,#0x20
001e46  61a0              STR      r0,[r4,#0x18]
                  |L1.7752|
;;;3453   		}
;;;3454   	}
;;;3455   //   
;;;3456   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_EXT))	 
001e48  20d2              MOVS     r0,#0xd2
001e4a  f7fffffe          BL       mess_find_unvol
001e4e  b110              CBZ      r0,|L1.7766|
001e50  6828              LDR      r0,[r5,#0]  ; mess_data
001e52  2871              CMP      r0,#0x71
001e54  d036              BEQ      |L1.7876|
                  |L1.7766|
;;;3457   	{
;;;3458   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,9,1);
;;;3459   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,9,1);
;;;3460   	}
;;;3461   else if(DOP_RELE_FUNC==0)	//     
001e56  48ff              LDR      r0,|L1.8788|
001e58  f9b00000          LDRSH    r0,[r0,#0]  ; DOP_RELE_FUNC
001e5c  b388              CBZ      r0,|L1.7874|
;;;3462   	{
;;;3463   	if(!speedChIsOn) SET_REG(LPC_GPIO0->FIOCLR,1,9,1);
;;;3464   	else SET_REG(LPC_GPIO0->FIOSET,1,9,1);
;;;3465   	}
;;;3466   else if(DOP_RELE_FUNC==1)  //      
001e5e  2801              CMP      r0,#1
001e60  d10a              BNE      |L1.7800|
;;;3467   	{
;;;3468   	if((mess_find_unvol(MESS2RELE_HNDL))&& (mess_data[0]==PARAM_RELE_BAT_IS_DISCHARGED)) SET_REG(LPC_GPIO0->FIOCLR,1,9,1);
001e62  20d2              MOVS     r0,#0xd2
001e64  f7fffffe          BL       mess_find_unvol
001e68  b110              CBZ      r0,|L1.7792|
001e6a  6828              LDR      r0,[r5,#0]  ; mess_data
001e6c  2872              CMP      r0,#0x72
001e6e  d044              BEQ      |L1.7930|
                  |L1.7792|
;;;3469   	else SET_REG(LPC_GPIO0->FIOSET,1,9,1);
001e70  69a0              LDR      r0,[r4,#0x18]
001e72  f4407000          ORR      r0,r0,#0x200
001e76  61a0              STR      r0,[r4,#0x18]
                  |L1.7800|
;;;3470   	}	 	
;;;3471   #endif
;;;3472   
;;;3473   #ifdef UKU_KONTUR
;;;3474   
;;;3475   //  
;;;3476   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_COMM))
;;;3477   	{
;;;3478   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_COMM,1);
;;;3479   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_COMM,1);
;;;3480   	}
;;;3481   else 
;;;3482   	{
;;;3483        if(  (!(avar_ind_stat&0x00007fff)) &&
;;;3484             ((!SK_REL_EN[0]) || (sk_av_stat[0]!=sasON))  &&
;;;3485             ((!SK_REL_EN[1]) || (sk_av_stat[1]!=sasON))  &&
;;;3486             ((!SK_REL_EN[2]) || (sk_av_stat[2]!=sasON))  /*&&
;;;3487             ((!SK_REL_EN[3]) || (sk_av_stat[3]!=sasON))*/  )SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_COMM,1);
;;;3488        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_COMM,1);
;;;3489   	}
;;;3490   
;;;3491   	
;;;3492   //rel_warm_plazma=0;
;;;3493   //    
;;;3494   /*
;;;3495   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_WARM))
;;;3496   	{
;;;3497   	if(mess_data[1]==0)
;;;3498   		{
;;;3499   		SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_WARM,1);
;;;3500   		rel_warm_plazma=1;
;;;3501   		}
;;;3502   	else if(mess_data[1]==1) 
;;;3503   		{
;;;3504   		SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_WARM,1);
;;;3505   		rel_warm_plazma=2;
;;;3506   		}
;;;3507        }
;;;3508   else 
;;;3509   	{
;;;3510   	if(warm_stat_k==wsOFF) 
;;;3511   		{
;;;3512   		SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_WARM,1);
;;;3513   		rel_warm_plazma=3;
;;;3514   		}
;;;3515        else 
;;;3516   		{
;;;3517   		SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_WARM,1);
;;;3518   		rel_warm_plazma=4;
;;;3519   		}
;;;3520   	}
;;;3521   */
;;;3522   // 
;;;3523   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_LIGHT))
;;;3524   	{
;;;3525   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LIGHT,1);
;;;3526   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LIGHT,1);
;;;3527        }
;;;3528   else 
;;;3529   	{
;;;3530   	if(sk_av_stat[0]!=sasON) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LIGHT,1);
;;;3531        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LIGHT,1);
;;;3532   	}
;;;3533   
;;;3534   
;;;3535   
;;;3536   //  
;;;3537   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_LOAD_OFF))
;;;3538   	{
;;;3539   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LOAD_OFF,1);
;;;3540   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LOAD_OFF,1);
;;;3541        }
;;;3542   else if(tloaddisable_cmnd==0)
;;;3543   	{
;;;3544   	SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LOAD_OFF,1);
;;;3545   	}
;;;3546   else if((tloaddisable_cmnd)&&(tloaddisable_cmnd<=11))
;;;3547   	{
;;;3548   	SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LOAD_OFF,1);
;;;3549   	}
;;;3550   
;;;3551   else 
;;;3552   	{
;;;3553   	if(!(tloaddisable_stat==tldsON)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LOAD_OFF,1);
;;;3554        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LOAD_OFF,1);
;;;3555   	} 
;;;3556   
;;;3557   //    
;;;3558   if(RELE_LOG)
;;;3559   	{
;;;3560   	if((mess_find_unvol(MESS2RELE_HNDL))&&(mess_data[0]==PARAM_RELE_VENT_WARM))
;;;3561   		{
;;;3562   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT_WARM,1);
;;;3563   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT_WARM,1);
;;;3564   		}
;;;3565   	else 
;;;3566   		{
;;;3567   		if(warm_stat_k==wsOFF) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT_WARM,1);
;;;3568   	     else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT_WARM,1);
;;;3569   		} 
;;;3570   
;;;3571   	}
;;;3572   else 
;;;3573   	{
;;;3574   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_VENT_WARM))
;;;3575   		{
;;;3576   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT_WARM,1);
;;;3577   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT_WARM,1);
;;;3578   		}
;;;3579   	else 
;;;3580   		{
;;;3581   		if(vent_stat_k==vsOFF) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT_WARM,1);
;;;3582   	     else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT_WARM,1);
;;;3583   		} 
;;;3584   	}
;;;3585   #endif
;;;3586   
;;;3587   
;;;3588   #ifdef UKU_TELECORE2015
;;;3589   //  
;;;3590   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_NET))
;;;3591   	{
;;;3592   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;3593   	else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_NET,1);
;;;3594   	}
;;;3595   else	if(!(avar_ind_stat&0x00000001)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;3596   else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_NET,1);
;;;3597   
;;;3598   
;;;3599   // 
;;;3600   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_LIGHT))
;;;3601   	{
;;;3602   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LIGHT,1);
;;;3603   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LIGHT,1);
;;;3604        }
;;;3605   else 
;;;3606   	{
;;;3607   	if(sk_av_stat[0]!=sasON) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LIGHT,1);
;;;3608        else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LIGHT,1);
;;;3609   	}
;;;3610   
;;;3611   // 
;;;3612   if((mess_find_unvol(MESS2RELE_HNDL))&&(mess_data[0]==PARAM_RELE_WARM))
;;;3613   	{
;;;3614   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_WARM,1);
;;;3615   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_WARM,1);
;;;3616   	}
;;;3617   else 
;;;3618   	{
;;;3619   	if(warm_stat_k==wsOFF) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_WARM,1);
;;;3620        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_WARM,1);
;;;3621   	} 
;;;3622   // 
;;;3623   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_VENT))
;;;3624   	{
;;;3625   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT,1);
;;;3626   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;3627   	}
;;;3628   else 
;;;3629   	{
;;;3630   	if(vent_stat_k==vsOFF) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT,1);
;;;3631        else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;3632   	} 
;;;3633   
;;;3634   //  
;;;3635   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_VVENT))
;;;3636   	{
;;;3637   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VVENT,1);
;;;3638   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VVENT,1);
;;;3639   	}
;;;3640   else 
;;;3641   	{
;;;3642   	if(vvent_stat_k==vsOFF) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VVENT,1);
;;;3643        else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VVENT,1);
;;;3644   	} 
;;;3645   
;;;3646   #endif
;;;3647   
;;;3648   }
001e78  e4c5              B        |L1.6150|
                  |L1.7802|
001e7a  6868              LDR      r0,[r5,#4]            ;3437  ; mess_data
001e7c  b120              CBZ      r0,|L1.7816|
001e7e  69e0              LDR      r0,[r4,#0x1c]         ;3438
001e80  f0407000          ORR      r0,r0,#0x2000000      ;3438
001e84  61e0              STR      r0,[r4,#0x1c]         ;3438
001e86  e7d1              B        |L1.7724|
                  |L1.7816|
001e88  69a0              LDR      r0,[r4,#0x18]         ;3437
001e8a  f0407000          ORR      r0,r0,#0x2000000      ;3437
001e8e  61a0              STR      r0,[r4,#0x18]         ;3437
001e90  e7cc              B        |L1.7724|
                  |L1.7826|
001e92  6ba0              LDR      r0,[r4,#0x38]         ;3440
001e94  f0407000          ORR      r0,r0,#0x2000000      ;3440
001e98  63a0              STR      r0,[r4,#0x38]         ;3440
001e9a  e7c7              B        |L1.7724|
                  |L1.7836|
001e9c  6868              LDR      r0,[r5,#4]            ;3446  ; mess_data
001e9e  b130              CBZ      r0,|L1.7854|
001ea0  2801              CMP      r0,#1                 ;3447
001ea2  d1d1              BNE      |L1.7752|
001ea4  69a0              LDR      r0,[r4,#0x18]         ;3447
001ea6  f0400020          ORR      r0,r0,#0x20           ;3447
001eaa  61a0              STR      r0,[r4,#0x18]         ;3447
001eac  e7cc              B        |L1.7752|
                  |L1.7854|
001eae  69e0              LDR      r0,[r4,#0x1c]         ;3446
001eb0  f0400020          ORR      r0,r0,#0x20           ;3446
001eb4  61e0              STR      r0,[r4,#0x1c]         ;3446
001eb6  e7c7              B        |L1.7752|
                  |L1.7864|
001eb8  69e0              LDR      r0,[r4,#0x1c]         ;3451
001eba  f0400020          ORR      r0,r0,#0x20           ;3451
001ebe  61e0              STR      r0,[r4,#0x1c]         ;3451
001ec0  e7c2              B        |L1.7752|
                  |L1.7874|
001ec2  e00d              B        |L1.7904|
                  |L1.7876|
001ec4  6868              LDR      r0,[r5,#4]            ;3458  ; mess_data
001ec6  b130              CBZ      r0,|L1.7894|
001ec8  2801              CMP      r0,#1                 ;3459
001eca  d1d5              BNE      |L1.7800|
001ecc  69a0              LDR      r0,[r4,#0x18]         ;3459
001ece  f4407000          ORR      r0,r0,#0x200          ;3459
001ed2  61a0              STR      r0,[r4,#0x18]         ;3459
001ed4  e497              B        |L1.6150|
                  |L1.7894|
001ed6  69e0              LDR      r0,[r4,#0x1c]         ;3458
001ed8  f4407000          ORR      r0,r0,#0x200          ;3458
001edc  61e0              STR      r0,[r4,#0x1c]         ;3458
001ede  e492              B        |L1.6150|
                  |L1.7904|
001ee0  48dd              LDR      r0,|L1.8792|
001ee2  8800              LDRH     r0,[r0,#0]            ;3463  ; speedChIsOn
001ee4  b120              CBZ      r0,|L1.7920|
001ee6  69a0              LDR      r0,[r4,#0x18]         ;3464
001ee8  f4407000          ORR      r0,r0,#0x200          ;3464
001eec  61a0              STR      r0,[r4,#0x18]         ;3464
001eee  e48a              B        |L1.6150|
                  |L1.7920|
001ef0  69e0              LDR      r0,[r4,#0x1c]         ;3463
001ef2  f4407000          ORR      r0,r0,#0x200          ;3463
001ef6  61e0              STR      r0,[r4,#0x1c]         ;3463
001ef8  e485              B        |L1.6150|
                  |L1.7930|
001efa  69e0              LDR      r0,[r4,#0x1c]         ;3468
001efc  f4407000          ORR      r0,r0,#0x200          ;3468
001f00  61e0              STR      r0,[r4,#0x1c]         ;3468
001f02  e480              B        |L1.6150|
;;;3649   
                          ENDP

                  bps_hndl PROC
;;;3650   //-----------------------------------------------
;;;3651   void bps_hndl(void)
001f04  e92d5ff0          PUSH     {r4-r12,lr}
;;;3652   {
;;;3653   char ptr__,i;
;;;3654   
;;;3655   if(sh_cnt0<10)
001f08  4ed4              LDR      r6,|L1.8796|
;;;3656   	{
;;;3657   	sh_cnt0++;
;;;3658   	if(sh_cnt0>=10)
;;;3659   		{
;;;3660   		sh_cnt0=0;
001f0a  2700              MOVS     r7,#0
;;;3661   		b1Hz_sh=1;
001f0c  f04f0a01          MOV      r10,#1
001f10  7c70              LDRB     r0,[r6,#0x11]         ;3655  ; sh_cnt0
001f12  280a              CMP      r0,#0xa               ;3655
001f14  d208              BCS      |L1.7976|
001f16  f1000001          ADD      r0,r0,#1              ;3657
001f1a  b2c0              UXTB     r0,r0                 ;3657
001f1c  7470              STRB     r0,[r6,#0x11]         ;3657
001f1e  280a              CMP      r0,#0xa               ;3658
001f20  d302              BCC      |L1.7976|
001f22  7477              STRB     r7,[r6,#0x11]         ;3660
001f24  f886a012          STRB     r10,[r6,#0x12]
                  |L1.7976|
;;;3662   		}
;;;3663   	}
;;;3664   
;;;3665   /*if(sh_cnt1<5)
;;;3666   	{
;;;3667   	sh_cnt1++;
;;;3668   	if(sh_cnt1==5)
;;;3669   		{
;;;3670   		sh_cnt1=0;
;;;3671   		b2Hz_sh=1;
;;;3672   		}
;;;3673   	} */
;;;3674   
;;;3675   
;;;3676   /*
;;;3677   if(mess_find(MESS_SRC_ON_OFF))
;;;3678   	{
;;;3679   	if(mess_data[0]==_MESS_SRC_MASK_BLOK_2SEC)
;;;3680   		{
;;;3681   		char i;
;;;3682   		for(i=0;i<NUMIST;i++)
;;;3683   			{
;;;3684   			if(mess_data[1]&(1<<i))src[i]._ist_blok_cnt=20;
;;;3685   			}
;;;3686   		
;;;3687   		}
;;;3688   	else if(mess_data[0]==_MESS_SRC_MASK_UNBLOK)
;;;3689   		{
;;;3690   		char i;
;;;3691   		for(i=0;i<NUMIST;i++)
;;;3692   			{
;;;3693   			if(mess_data[1]&(1<<i))src[i]._ist_blok_cnt=0;
;;;3694   			}
;;;3695   		
;;;3696   		}
;;;3697   	}
;;;3698   	
;;;3699   else if(mess_find(_MESS_SRC_MASK_ON))
;;;3700   	{				
;;;3701   	if(mess_data[0]==_MESS_SRC_MASK_ON)
;;;3702   		{
;;;3703   		char i;
;;;3704   		for(i=0;i<NUMIST;i++)
;;;3705   			{
;;;3706   			if(mess_data[1]&(1<<i))
;;;3707   				{
;;;3708   				src[i]._ist_blok_cnt=0;
;;;3709   				src[i]._flags_tu=2;
;;;3710   				}
;;;3711   			}
;;;3712   		
;;;3713   		}				
;;;3714   	}*/
;;;3715   
;;;3716   
;;;3717   
;;;3718   /*else*/ 
;;;3719   bps_on_mask=0;
001f28  f8a67044          STRH     r7,[r6,#0x44]
;;;3720   bps_off_mask=0;
001f2c  f8a67046          STRH     r7,[r6,#0x46]
;;;3721   
;;;3722   if(mess_find_unvol(MESS2BPS_HNDL))
001f30  20cd              MOVS     r0,#0xcd
001f32  f7fffffe          BL       mess_find_unvol
;;;3723   	{
;;;3724   	if(mess_data[0]==PARAM_BPS_ALL_OFF_AFTER_2SEC)
;;;3725   		{
;;;3726   		bps_off_mask=0xffff;
;;;3727   		}
;;;3728   
;;;3729   	if(mess_data[0]==PARAM_BPS_MASK_OFF_AFTER_2SEC)
;;;3730   		{
;;;3731   		bps_off_mask=mess_data[1];
;;;3732   		}
;;;3733   
;;;3734   	if(mess_data[0]==PARAM_BPS_MASK_ON)
;;;3735   		{
;;;3736   		bps_on_mask=mess_data[1];
;;;3737   		}
;;;3738   
;;;3739   	if(mess_data[0]==PARAM_BPS_ALL_ON)
;;;3740   		{
;;;3741   		bps_on_mask=0xffff;
;;;3742   		}
;;;3743   
;;;3744   	if(mess_data[0]==PARAM_BPS_MASK_ON_OFF_AFTER_2SEC)
;;;3745   		{
;;;3746   		bps_on_mask=mess_data[1];
;;;3747   		bps_off_mask=~(mess_data[1]);
;;;3748   		}
;;;3749   
;;;3750   
;;;3751   	for(i=0;i<=NUMIST;i++)
;;;3752   		{
;;;3753   		if(bps_off_mask&(1<<i)) bps[i]._blok_cnt++;
001f36  f8df8328          LDR      r8,|L1.8800|
001f3a  f8dfb328          LDR      r11,|L1.8804|
001f3e  b3a0              CBZ      r0,|L1.8106|
001f40  49c9              LDR      r1,|L1.8808|
001f42  f64f73ff          MOV      r3,#0xffff            ;3726
001f46  6808              LDR      r0,[r1,#0]            ;3724  ; mess_data
001f48  28ce              CMP      r0,#0xce              ;3724
001f4a  d101              BNE      |L1.8016|
001f4c  f8a63046          STRH     r3,[r6,#0x46]         ;3726
                  |L1.8016|
001f50  28cf              CMP      r0,#0xcf              ;3729
001f52  d102              BNE      |L1.8026|
001f54  684a              LDR      r2,[r1,#4]            ;3731  ; mess_data
001f56  f8a62046          STRH     r2,[r6,#0x46]         ;3731
                  |L1.8026|
001f5a  28d1              CMP      r0,#0xd1              ;3734
001f5c  d102              BNE      |L1.8036|
001f5e  684a              LDR      r2,[r1,#4]            ;3736  ; mess_data
001f60  f8a62044          STRH     r2,[r6,#0x44]         ;3736
                  |L1.8036|
001f64  28d2              CMP      r0,#0xd2              ;3739
001f66  d101              BNE      |L1.8044|
001f68  f8a63044          STRH     r3,[r6,#0x44]         ;3741
                  |L1.8044|
001f6c  28d0              CMP      r0,#0xd0              ;3744
001f6e  d106              BNE      |L1.8062|
001f70  6848              LDR      r0,[r1,#4]            ;3746  ; mess_data
001f72  f8a60044          STRH     r0,[r6,#0x44]         ;3746
001f76  ea6f0000          MVN      r0,r0                 ;3747
001f7a  f8a60046          STRH     r0,[r6,#0x46]         ;3747
                  |L1.8062|
001f7e  f04f0400          MOV      r4,#0                 ;3751
001f82  e037              B        |L1.8180|
                  |L1.8068|
001f84  f8b60046          LDRH     r0,[r6,#0x46]  ; bps_off_mask
001f88  fa0af904          LSL      r9,r10,r4
001f8c  ea190f00          TST      r9,r0
001f90  d00c              BEQ      |L1.8108|
001f92  ebc400c4          RSB      r0,r4,r4,LSL #3
001f96  eb000040          ADD      r0,r0,r0,LSL #1
001f9a  eb080080          ADD      r0,r8,r0,LSL #2
001f9e  f8301f40          LDRH     r1,[r0,#0x40]!
001fa2  f1010101          ADD      r1,r1,#1
001fa6  8001              STRH     r1,[r0,#0]
001fa8  e008              B        |L1.8124|
                  |L1.8106|
001faa  e028              B        |L1.8190|
                  |L1.8108|
;;;3754   		else bps[i]._blok_cnt=0;
001fac  ebc400c4          RSB      r0,r4,r4,LSL #3
001fb0  eb000040          ADD      r0,r0,r0,LSL #1
001fb4  eb080080          ADD      r0,r8,r0,LSL #2
001fb8  f8a07040          STRH     r7,[r0,#0x40]
                  |L1.8124|
;;;3755   		gran(&bps[i]._blok_cnt,0,50);
001fbc  ebc400c4          RSB      r0,r4,r4,LSL #3
001fc0  eb000040          ADD      r0,r0,r0,LSL #1
001fc4  eb080580          ADD      r5,r8,r0,LSL #2
001fc8  f1050040          ADD      r0,r5,#0x40
001fcc  2232              MOVS     r2,#0x32
001fce  2100              MOVS     r1,#0
001fd0  f7fffffe          BL       gran
;;;3756   		if(bps[i]._blok_cnt>20) bps[i]._flags_tu=1;
001fd4  f9b50040          LDRSH    r0,[r5,#0x40]
001fd8  2814              CMP      r0,#0x14
001fda  dd01              BLE      |L1.8160|
001fdc  f885a02c          STRB     r10,[r5,#0x2c]
                  |L1.8160|
;;;3757   		if(bps_on_mask&(1<<i)) bps[i]._flags_tu=0;
001fe0  f8b60044          LDRH     r0,[r6,#0x44]  ; bps_on_mask
001fe4  ea190f00          TST      r9,r0
001fe8  d001              BEQ      |L1.8174|
001fea  f885702c          STRB     r7,[r5,#0x2c]
                  |L1.8174|
001fee  f1040401          ADD      r4,r4,#1              ;3751
001ff2  b2e4              UXTB     r4,r4                 ;3751
                  |L1.8180|
001ff4  f9bb0000          LDRSH    r0,[r11,#0]           ;3751  ; NUMIST
001ff8  4284              CMP      r4,r0                 ;3751
001ffa  ddc3              BLE      |L1.8068|
001ffc  e06b              B        |L1.8406|
                  |L1.8190|
;;;3758   	     }
;;;3759   
;;;3760   	
;;;3761   /*
;;;3762   
;;;3763   	if(bps_all_off_cnt>20)
;;;3764   		{
;;;3765   		for(i=0;i<=NUMIST;i++)
;;;3766   			{
;;;3767   	     	bps[i]._flags_tu=1;
;;;3768   	     	}
;;;3769   		}
;;;3770   	else if(bps_mask_off_cnt>20)
;;;3771   		{
;;;3772   		for(i=0;i<=NUMIST;i++)
;;;3773   			{
;;;3774   			if(mess_data[1]&(1<<i)) bps[i]._flags_tu=1;
;;;3775   	     	}
;;;3776   		}	
;;;3777   		
;;;3778   	else if(bps_mask_on_off_cnt>20)
;;;3779   		{
;;;3780   		for(i=0;i<=NUMIST;i++)
;;;3781   			{
;;;3782   			if(mess_data[1]&(1<<i)) bps[i]._flags_tu=1;
;;;3783   			else bps[i]._flags_tu=0;
;;;3784   	     	}
;;;3785   		}
;;;3786   		
;;;3787   	if(mess_data[0]==PARAM_BPS_MASK_ON)
;;;3788   		{
;;;3789   		for(i=0;i<=NUMIST;i++)
;;;3790   			{
;;;3791   			if(mess_data[1]&(1<<i)) bps[i]._flags_tu=0;
;;;3792   	     	}
;;;3793   		}
;;;3794   */										
;;;3795   	}
;;;3796   
;;;3797   
;;;3798   else if(b1Hz_sh)
001ffe  7cb0              LDRB     r0,[r6,#0x12]  ; b1Hz_sh
002000  b3f0              CBZ      r0,|L1.8320|
;;;3799   	{
;;;3800   	ptr__=0;
002002  f04f0400          MOV      r4,#0
;;;3801        for(i=0;i<=NUMIST;i++)
002006  4621              MOV      r1,r4
002008  f9bb0000          LDRSH    r0,[r11,#0]           ;3751
00200c  e00a              B        |L1.8228|
                  |L1.8206|
;;;3802   		{
;;;3803   	     bps[i]._flags_tu=1;
00200e  ebc102c1          RSB      r2,r1,r1,LSL #3
002012  eb020242          ADD      r2,r2,r2,LSL #1
002016  eb080282          ADD      r2,r8,r2,LSL #2
00201a  f882a02c          STRB     r10,[r2,#0x2c]
00201e  f1010101          ADD      r1,r1,#1              ;3801
002022  b2c9              UXTB     r1,r1                 ;3801
                  |L1.8228|
002024  4281              CMP      r1,r0                 ;3801
002026  ddf2              BLE      |L1.8206|
;;;3804   	     }	
;;;3805     	     
;;;3806     	for(i=0;(i<NUMIST)&&(ptr__<num_necc);i++)
002028  f04f0100          MOV      r1,#0
00202c  e022              B        |L1.8308|
                  |L1.8238|
;;;3807     		{
;;;3808   		char ii,iii;
;;;3809   
;;;3810   		ii=(char)NUMIST;
00202e  b2c2              UXTB     r2,r0
;;;3811   		if(ii<0)ii=0;
;;;3812   		if(ii>32)ii=32;
002030  2a20              CMP      r2,#0x20
002032  d901              BLS      |L1.8248|
002034  f04f0220          MOV      r2,#0x20
                  |L1.8248|
;;;3813   		iii=numOfForvardBps;
002038  7e33              LDRB     r3,[r6,#0x18]  ; numOfForvardBps
;;;3814   		if(iii<0)iii=0;
;;;3815   		if(iii>=NUMIST)iii=0;
00203a  4283              CMP      r3,r0
00203c  db01              BLT      |L1.8258|
00203e  f04f0300          MOV      r3,#0
                  |L1.8258|
;;;3816   		iii+=i;
002042  440b              ADD      r3,r3,r1
002044  b2db              UXTB     r3,r3
;;;3817   		iii=iii%ii;
002046  fbb3f5f2          UDIV     r5,r3,r2
00204a  fb023215          MLS      r2,r2,r5,r3
;;;3818   		
;;;3819     	     if((bps[iii]._state==bsRDY)||(bps[iii]._state==bsWRK))
00204e  ebc202c2          RSB      r2,r2,r2,LSL #3
002052  eb020242          ADD      r2,r2,r2,LSL #1
002056  eb080282          ADD      r2,r8,r2,LSL #2
00205a  7893              LDRB     r3,[r2,#2]
00205c  2b02              CMP      r3,#2
00205e  d001              BEQ      |L1.8292|
002060  2b01              CMP      r3,#1
002062  d104              BNE      |L1.8302|
                  |L1.8292|
;;;3820     	         	{
;;;3821     	         	bps[iii]._flags_tu=0;
002064  f882702c          STRB     r7,[r2,#0x2c]
;;;3822     	         	ptr__++;
002068  f1040401          ADD      r4,r4,#1
00206c  b2e4              UXTB     r4,r4
                  |L1.8302|
00206e  f1010101          ADD      r1,r1,#1              ;3806
002072  b2c9              UXTB     r1,r1                 ;3806
                  |L1.8308|
002074  4281              CMP      r1,r0                 ;3806
002076  da06              BGE      |L1.8326|
002078  4a7c              LDR      r2,|L1.8812|
00207a  f9b22000          LDRSH    r2,[r2,#0]            ;3806  ; num_necc
00207e  e000              B        |L1.8322|
                  |L1.8320|
002080  e029              B        |L1.8406|
                  |L1.8322|
002082  4294              CMP      r4,r2                 ;3806
002084  dbd3              BLT      |L1.8238|
                  |L1.8326|
;;;3823     	         	}
;;;3824     	     }
;;;3825   	if(main_1Hz_cnt<60)
002086  497a              LDR      r1,|L1.8816|
002088  f9b11000          LDRSH    r1,[r1,#0]  ; main_1Hz_cnt
00208c  293c              CMP      r1,#0x3c
00208e  da0f              BGE      |L1.8368|
;;;3826   		{
;;;3827        	for(i=0;i<=NUMIST;i++)
002090  f04f0100          MOV      r1,#0
002094  e00a              B        |L1.8364|
                  |L1.8342|
;;;3828   			{
;;;3829   	     	bps[i]._flags_tu=0;
002096  ebc102c1          RSB      r2,r1,r1,LSL #3
00209a  eb020242          ADD      r2,r2,r2,LSL #1
00209e  eb080282          ADD      r2,r8,r2,LSL #2
0020a2  f882702c          STRB     r7,[r2,#0x2c]
0020a6  f1010101          ADD      r1,r1,#1              ;3827
0020aa  b2c9              UXTB     r1,r1                 ;3827
                  |L1.8364|
0020ac  4281              CMP      r1,r0                 ;3827
0020ae  ddf2              BLE      |L1.8342|
                  |L1.8368|
;;;3830   	     	}	
;;;3831   		}
;;;3832   	if(ipsBlckStat)
0020b0  4970              LDR      r1,|L1.8820|
0020b2  8809              LDRH     r1,[r1,#0]  ; ipsBlckStat
0020b4  b179              CBZ      r1,|L1.8406|
;;;3833   		{
;;;3834        	for(i=0;i<=NUMIST;i++)
0020b6  f04f0100          MOV      r1,#0
0020ba  e00a              B        |L1.8402|
                  |L1.8380|
;;;3835   			{
;;;3836   	     	bps[i]._flags_tu=1;
0020bc  ebc102c1          RSB      r2,r1,r1,LSL #3
0020c0  eb020242          ADD      r2,r2,r2,LSL #1
0020c4  eb080282          ADD      r2,r8,r2,LSL #2
0020c8  f882a02c          STRB     r10,[r2,#0x2c]
0020cc  f1010101          ADD      r1,r1,#1              ;3834
0020d0  b2c9              UXTB     r1,r1                 ;3834
                  |L1.8402|
0020d2  4281              CMP      r1,r0                 ;3834
0020d4  ddf2              BLE      |L1.8380|
                  |L1.8406|
;;;3837   	     	}
;;;3838   		}
;;;3839   		 
;;;3840     	}
;;;3841   
;;;3842   
;;;3843   for(i=0;i<NUMIST;i++)
0020d6  f04f0000          MOV      r0,#0
;;;3844        {
;;;3845        if(bps[i]._ist_blok_host_cnt!=0)
;;;3846             {
;;;3847             bps[i]._flags_tu=99;
0020da  f04f0463          MOV      r4,#0x63
0020de  f9bb3000          LDRSH    r3,[r11,#0]           ;3751
0020e2  e00f              B        |L1.8452|
                  |L1.8420|
0020e4  ebc001c0          RSB      r1,r0,r0,LSL #3       ;3845
0020e8  eb010141          ADD      r1,r1,r1,LSL #1       ;3845
0020ec  eb080181          ADD      r1,r8,r1,LSL #2       ;3845
0020f0  6bca              LDR      r2,[r1,#0x3c]         ;3845
0020f2  b122              CBZ      r2,|L1.8446|
0020f4  f881402c          STRB     r4,[r1,#0x2c]
;;;3848   	     bps[i]._ist_blok_host_cnt--;
0020f8  f1a20201          SUB      r2,r2,#1
0020fc  63ca              STR      r2,[r1,#0x3c]
                  |L1.8446|
0020fe  f1000001          ADD      r0,r0,#1              ;3843
002102  b2c0              UXTB     r0,r0                 ;3843
                  |L1.8452|
002104  4298              CMP      r0,r3                 ;3843
002106  dbed              BLT      |L1.8420|
;;;3849             }
;;;3850        }
;;;3851   
;;;3852   
;;;3853   
;;;3854   
;;;3855   b1Hz_sh=0;
002108  74b7              STRB     r7,[r6,#0x12]
;;;3856   
;;;3857   
;;;3858   num_of_wrks_bps=0;
00210a  73b7              STRB     r7,[r6,#0xe]
;;;3859   for(i=0;i<NUMIST;i++)
00210c  f04f0000          MOV      r0,#0
002110  e00f              B        |L1.8498|
                  |L1.8466|
;;;3860   	{
;;;3861   	if(bps[i]._state==bsWRK)num_of_wrks_bps++;
002112  ebc001c0          RSB      r1,r0,r0,LSL #3
002116  eb010141          ADD      r1,r1,r1,LSL #1
00211a  eb080181          ADD      r1,r8,r1,LSL #2
00211e  7889              LDRB     r1,[r1,#2]
002120  2901              CMP      r1,#1
002122  d103              BNE      |L1.8492|
002124  7bb1              LDRB     r1,[r6,#0xe]  ; num_of_wrks_bps
002126  f1010101          ADD      r1,r1,#1
00212a  73b1              STRB     r1,[r6,#0xe]
                  |L1.8492|
00212c  f1000001          ADD      r0,r0,#1              ;3859
002130  b2c0              UXTB     r0,r0                 ;3859
                  |L1.8498|
002132  4298              CMP      r0,r3                 ;3859
002134  dbed              BLT      |L1.8466|
;;;3862   	}
;;;3863   
;;;3864   
;;;3865   }
002136  e8bd9ff0          POP      {r4-r12,pc}
;;;3866   
                          ENDP

                  powerAntiAliasingHndl PROC
;;;3873   //-----------------------------------------------
;;;3874   void powerAntiAliasingHndl(void)
00213a  b570              PUSH     {r4-r6,lr}
;;;3875   {
;;;3876   if((power_summary_tempo/10UL)==(power_summary_tempo_old/10UL))
00213c  230a              MOVS     r3,#0xa
00213e  4c4f              LDR      r4,|L1.8828|
002140  484d              LDR      r0,|L1.8824|
;;;3877   	{
;;;3878   	if(powerSummaryCnt<15)powerSummaryCnt++;
;;;3879   	if(powerSummaryCnt>=10)
;;;3880   		{
;;;3881   		power_summary=power_summary_tempo;
;;;3882   		}
;;;3883   	}
;;;3884   else powerSummaryCnt=0;
002142  2500              MOVS     r5,#0
002144  6822              LDR      r2,[r4,#0]            ;3876  ; power_summary_tempo_old
002146  6800              LDR      r0,[r0,#0]            ;3876  ; power_summary_tempo
002148  fbb2f6f3          UDIV     r6,r2,r3              ;3876
00214c  fbb0f1f3          UDIV     r1,r0,r3              ;3876
002150  4a4b              LDR      r2,|L1.8832|
002152  42b1              CMP      r1,r6                 ;3876
002154  d10b              BNE      |L1.8558|
002156  7811              LDRB     r1,[r2,#0]            ;3878  ; powerSummaryCnt
002158  290f              CMP      r1,#0xf               ;3878
00215a  d202              BCS      |L1.8546|
00215c  f1010101          ADD      r1,r1,#1              ;3878
002160  7011              STRB     r1,[r2,#0]            ;3878
                  |L1.8546|
002162  7811              LDRB     r1,[r2,#0]            ;3879  ; powerSummaryCnt
002164  290a              CMP      r1,#0xa               ;3879
002166  d303              BCC      |L1.8560|
002168  4946              LDR      r1,|L1.8836|
00216a  6008              STR      r0,[r1,#0]            ;3881  ; power_summary
00216c  e000              B        |L1.8560|
                  |L1.8558|
00216e  7015              STRB     r5,[r2,#0]
                  |L1.8560|
;;;3885   power_summary_tempo_old=power_summary_tempo;
002170  6020              STR      r0,[r4,#0]  ; power_summary_tempo_old
;;;3886   
;;;3887   if((power_current_tempo/10UL)==(power_current_tempo_old/10UL))
002172  4845              LDR      r0,|L1.8840|
002174  4c45              LDR      r4,|L1.8844|
002176  f9b00000          LDRSH    r0,[r0,#0]  ; power_current_tempo
00217a  f9b42000          LDRSH    r2,[r4,#0]  ; power_current_tempo_old
00217e  fbb0f1f3          UDIV     r1,r0,r3
002182  fbb2f3f3          UDIV     r3,r2,r3
;;;3888   	{
;;;3889   	if(powerCurrentCnt<15)powerCurrentCnt++;
002186  4a42              LDR      r2,|L1.8848|
002188  4299              CMP      r1,r3                 ;3887
00218a  d10b              BNE      |L1.8612|
00218c  7811              LDRB     r1,[r2,#0]  ; powerCurrentCnt
00218e  290f              CMP      r1,#0xf
002190  d202              BCS      |L1.8600|
002192  f1010101          ADD      r1,r1,#1
002196  7011              STRB     r1,[r2,#0]
                  |L1.8600|
;;;3890   	if(powerCurrentCnt>=10)
002198  7811              LDRB     r1,[r2,#0]  ; powerCurrentCnt
00219a  290a              CMP      r1,#0xa
00219c  d303              BCC      |L1.8614|
;;;3891   		{
;;;3892   		power_current=power_current_tempo;
00219e  493d              LDR      r1,|L1.8852|
0021a0  8008              STRH     r0,[r1,#0]
0021a2  e000              B        |L1.8614|
                  |L1.8612|
;;;3893   		}
;;;3894   	}
;;;3895   else powerCurrentCnt=0;
0021a4  7015              STRB     r5,[r2,#0]
                  |L1.8614|
;;;3896   power_current_tempo_old=power_current_tempo;
0021a6  8020              STRH     r0,[r4,#0]
;;;3897   }
0021a8  bd70              POP      {r4-r6,pc}
;;;3898   
                          ENDP

                  ipsBlckHndl PROC
;;;3981   //-----------------------------------------------
;;;3982   void ipsBlckHndl(char in)
0021aa  b510              PUSH     {r4,lr}
;;;3983   {
;;;3984   
;;;3985   ipsBlckStat=0;
0021ac  4b31              LDR      r3,|L1.8820|
0021ae  f04f0000          MOV      r0,#0
0021b2  8018              STRH     r0,[r3,#0]
;;;3986   if(ipsBlckSrc==1)
0021b4  4838              LDR      r0,|L1.8856|
0021b6  f04f0401          MOV      r4,#1
;;;3987   	{
;;;3988   	if(((ipsBlckLog==0)&&(adc_buff_[11]>2000)) || ((ipsBlckLog==1)&&(adc_buff_[11]<2000))) ipsBlckStat=1;
0021ba  f44f62fa          MOV      r2,#0x7d0
0021be  f9b01000          LDRSH    r1,[r0,#0]            ;3986  ; ipsBlckSrc
0021c2  4836              LDR      r0,|L1.8860|
0021c4  2901              CMP      r1,#1                 ;3986
0021c6  f9b00000          LDRSH    r0,[r0,#0]
0021ca  d006              BEQ      |L1.8666|
;;;3989   	}
;;;3990   else if(ipsBlckSrc==2)
0021cc  2902              CMP      r1,#2
0021ce  d10f              BNE      |L1.8688|
0021d0  4933              LDR      r1,|L1.8864|
;;;3991   	{
;;;3992   	if(((ipsBlckLog==0)&&(adc_buff_[13]>2000)) || ((ipsBlckLog==1)&&(adc_buff_[13]<2000))) ipsBlckStat=1;
0021d2  f9b1101a          LDRSH    r1,[r1,#0x1a]
0021d6  b160              CBZ      r0,|L1.8690|
0021d8  e00d              B        |L1.8694|
                  |L1.8666|
0021da  4931              LDR      r1,|L1.8864|
0021dc  f9b11016          LDRSH    r1,[r1,#0x16]         ;3988
0021e0  b908              CBNZ     r0,|L1.8678|
0021e2  4291              CMP      r1,r2                 ;3988
0021e4  dc03              BGT      |L1.8686|
                  |L1.8678|
0021e6  2801              CMP      r0,#1                 ;3988
0021e8  d102              BNE      |L1.8688|
0021ea  4291              CMP      r1,r2                 ;3988
0021ec  da00              BGE      |L1.8688|
                  |L1.8686|
0021ee  801c              STRH     r4,[r3,#0]            ;3988
                  |L1.8688|
;;;3993   	}
;;;3994   }
0021f0  bd10              POP      {r4,pc}
                  |L1.8690|
0021f2  4291              CMP      r1,r2                 ;3992
0021f4  dc03              BGT      |L1.8702|
                  |L1.8694|
0021f6  2801              CMP      r0,#1                 ;3992
0021f8  d1fa              BNE      |L1.8688|
0021fa  4291              CMP      r1,r2                 ;3992
0021fc  daf8              BGE      |L1.8688|
                  |L1.8702|
0021fe  801c              STRH     r4,[r3,#0]            ;3992
002200  bd10              POP      {r4,pc}
;;;3995   
                          ENDP

                  bps_drv PROC
;;;3996   //-----------------------------------------------
;;;3997   void bps_drv(char in)
002202  e92d41f0          PUSH     {r4-r8,lr}
;;;3998   {
002206  4606              MOV      r6,r0
;;;3999   char temp;
;;;4000   
;;;4001   if (bps[in]._device!=dSRC) return;
002208  ebc600c6          RSB      r0,r6,r6,LSL #3
00220c  4914              LDR      r1,|L1.8800|
00220e  eb000040          ADD      r0,r0,r0,LSL #1
002212  f8112020          LDRB     r2,[r1,r0,LSL #2]
002216  2a03              CMP      r2,#3
002218  d174              BNE      |L1.8964|
;;;4002   temp=bps[in]._flags_tm;
00221a  eb010480          ADD      r4,r1,r0,LSL #2
00221e  f8945042          LDRB     r5,[r4,#0x42]
;;;4003   if(temp&(1<<AV_T))
002222  07a8              LSLS     r0,r5,#30
002224  d541              BPL      |L1.8874|
;;;4004   	{
;;;4005   	if(bps[in]._temp_av_cnt<1200) 
002226  f9b41046          LDRSH    r1,[r4,#0x46]
00222a  f44f6296          MOV      r2,#0x4b0
00222e  4291              CMP      r1,r2
002230  da4c              BGE      |L1.8908|
;;;4006   		{
;;;4007   		bps[in]._temp_av_cnt++;
002232  f1010101          ADD      r1,r1,#1
002236  b208              SXTH     r0,r1
002238  f8a40046          STRH     r0,[r4,#0x46]
;;;4008   		if(bps[in]._temp_av_cnt>=1200)
00223c  4290              CMP      r0,r2
00223e  db45              BLT      |L1.8908|
;;;4009   			{
;;;4010   			bps[in]._temp_av_cnt=1200;
002240  f8a42046          STRH     r2,[r4,#0x46]
;;;4011   		   	if(!(bps[in]._av&(1<<0)))avar_bps_hndl(in,0,1);
002244  7860              LDRB     r0,[r4,#1]
002246  07c0              LSLS     r0,r0,#31
002248  d140              BNE      |L1.8908|
00224a  2201              MOVS     r2,#1
00224c  2100              MOVS     r1,#0
00224e  4630              MOV      r0,r6
002250  e028              B        |L1.8868|
002252  0000              DCW      0x0000
                  |L1.8788|
                          DCD      DOP_RELE_FUNC
                  |L1.8792|
                          DCD      speedChIsOn
                  |L1.8796|
                          DCD      ||area_number.21||
                  |L1.8800|
                          DCD      bps
                  |L1.8804|
                          DCD      NUMIST
                  |L1.8808|
                          DCD      mess_data
                  |L1.8812|
                          DCD      num_necc
                  |L1.8816|
                          DCD      main_1Hz_cnt
                  |L1.8820|
                          DCD      ipsBlckStat
                  |L1.8824|
                          DCD      power_summary_tempo
                  |L1.8828|
                          DCD      power_summary_tempo_old
                  |L1.8832|
                          DCD      powerSummaryCnt
                  |L1.8836|
                          DCD      power_summary
                  |L1.8840|
                          DCD      power_current_tempo
                  |L1.8844|
                          DCD      power_current_tempo_old
                  |L1.8848|
                          DCD      powerCurrentCnt
                  |L1.8852|
                          DCD      power_current
                  |L1.8856|
                          DCD      ipsBlckSrc
                  |L1.8860|
                          DCD      ipsBlckLog
                  |L1.8864|
                          DCD      ||.bss||+0x400
                  |L1.8868|
0022a4  f7fffffe          BL       avar_bps_hndl
0022a8  e010              B        |L1.8908|
                  |L1.8874|
;;;4012   			}
;;;4013   		}
;;;4014   	}
;;;4015   
;;;4016   else if(!(temp&(1<<AV_T)))
;;;4017   	{
;;;4018   	if(bps[in]._temp_av_cnt) 
0022aa  f9b41046          LDRSH    r1,[r4,#0x46]
0022ae  b169              CBZ      r1,|L1.8908|
;;;4019   		{
;;;4020   		bps[in]._temp_av_cnt--;
0022b0  f1a10101          SUB      r1,r1,#1
0022b4  b208              SXTH     r0,r1
0022b6  f8a40046          STRH     r0,[r4,#0x46]
;;;4021   		if(!bps[in]._temp_av_cnt)
0022ba  b938              CBNZ     r0,|L1.8908|
;;;4022   			{
;;;4023   			if(bps[in]._av&(1<<0))avar_bps_hndl(in,0,0);
0022bc  7860              LDRB     r0,[r4,#1]
0022be  07c0              LSLS     r0,r0,#31
0022c0  d004              BEQ      |L1.8908|
0022c2  2200              MOVS     r2,#0
0022c4  4611              MOV      r1,r2
0022c6  4630              MOV      r0,r6
0022c8  f7fffffe          BL       avar_bps_hndl
                  |L1.8908|
;;;4024   			}
;;;4025   		} 	
;;;4026   
;;;4027   	}
;;;4028   
;;;4029   if((temp&(1<<AVUMAX)))
0022cc  0729              LSLS     r1,r5,#28
;;;4030   	{
;;;4031   	if(bps[in]._umax_av_cnt<10) 
;;;4032   		{
;;;4033   		bps[in]._umax_av_cnt++;
;;;4034   		if(bps[in]._umax_av_cnt>=10)
;;;4035   			{ 
;;;4036   			bps[in]._umax_av_cnt=10;
0022ce  f04f070a          MOV      r7,#0xa
0022d2  f04f0000          MOV      r0,#0                 ;4011
0022d6  d516              BPL      |L1.8966|
0022d8  f9b41048          LDRSH    r1,[r4,#0x48]         ;4031
0022dc  290a              CMP      r1,#0xa               ;4031
0022de  da27              BGE      |L1.9008|
0022e0  f1010101          ADD      r1,r1,#1              ;4033
0022e4  b208              SXTH     r0,r1                 ;4033
0022e6  f8a40048          STRH     r0,[r4,#0x48]         ;4033
0022ea  280a              CMP      r0,#0xa               ;4034
0022ec  db20              BLT      |L1.9008|
0022ee  f8a47048          STRH     r7,[r4,#0x48]
;;;4037   			if(!(bps[in]._av&(1<<1)))avar_bps_hndl(in,1,1);
0022f2  7860              LDRB     r0,[r4,#1]
0022f4  0780              LSLS     r0,r0,#30
0022f6  d41b              BMI      |L1.9008|
0022f8  2201              MOVS     r2,#1
0022fa  4611              MOV      r1,r2
0022fc  4630              MOV      r0,r6
0022fe  f7fffffe          BL       avar_bps_hndl
002302  e015              B        |L1.9008|
                  |L1.8964|
002304  e073              B        |L1.9198|
                  |L1.8966|
;;;4038   		  	/*if((K[APV]!=ON)||((apv_cnt[in,0]==0)&&(apv_cnt[in,1]==0)&&(apv_cnt[in,2]==0)&&(apv_flags[in]==afOFF)))avar_s_hndl(in,1,1);
;;;4039   			if((apv_cnt[in,0]==0)&&(apv_cnt[in,1]==0)&&(apv_cnt[in,2]==0)&&(apv_flags[in]==afON))
;;;4040   				{
;;;4041   				apv_cnt[in,0]=APV_INIT;
;;;4042   				apv_cnt[in,1]=APV_INIT;
;;;4043   				apv_cnt[in,2]=APV_INIT;
;;;4044   				apv_flags[in]=afOFF;
;;;4045   				}				*/
;;;4046   						
;;;4047   			}
;;;4048   		} 
;;;4049   	}		
;;;4050   else if(!(temp&(1<<AVUMAX)))
;;;4051   	{
;;;4052   	if(bps[in]._umax_av_cnt>0) 
002306  f9b41048          LDRSH    r1,[r4,#0x48]
00230a  2900              CMP      r1,#0
00230c  dd0d              BLE      |L1.9002|
;;;4053   		{
;;;4054   		bps[in]._umax_av_cnt--;
00230e  f1a10101          SUB      r1,r1,#1
002312  b208              SXTH     r0,r1
002314  f8a40048          STRH     r0,[r4,#0x48]
;;;4055   		if(bps[in]._umax_av_cnt==0)
002318  b950              CBNZ     r0,|L1.9008|
;;;4056   			{
;;;4057   			bps[in]._umax_av_cnt=0;
;;;4058   			avar_bps_hndl(in,1,0);
00231a  f04f0200          MOV      r2,#0
00231e  f04f0101          MOV      r1,#1
002322  4630              MOV      r0,r6
002324  f7fffffe          BL       avar_bps_hndl
002328  e002              B        |L1.9008|
                  |L1.9002|
;;;4059   	 //		apv_cnt[in,0]=0;
;;;4060   	//		apv_cnt[in,1]=0;
;;;4061   	 //		apv_cnt[in,2]=0;			
;;;4062   			}
;;;4063   		}
;;;4064   	else if(bps[in]._umax_av_cnt<0) bps[in]._umax_av_cnt=0;		 
00232a  da01              BGE      |L1.9008|
00232c  f8a40048          STRH     r0,[r4,#0x48]
                  |L1.9008|
;;;4065   	}
;;;4066   
;;;4067   if(temp&(1<<AVUMIN))
002330  06e8              LSLS     r0,r5,#27
002332  d515              BPL      |L1.9056|
;;;4068   	{
;;;4069   	if(bps[in]._umin_av_cnt<10) 
002334  f9b4104a          LDRSH    r1,[r4,#0x4a]
002338  290a              CMP      r1,#0xa
00233a  da1f              BGE      |L1.9084|
;;;4070   		{
;;;4071   		bps[in]._umin_av_cnt++;
00233c  f1010101          ADD      r1,r1,#1
002340  b208              SXTH     r0,r1
002342  f8a4004a          STRH     r0,[r4,#0x4a]
;;;4072   		if(bps[in]._umin_av_cnt>=10)
002346  280a              CMP      r0,#0xa
002348  db18              BLT      |L1.9084|
;;;4073   			{ 
;;;4074   			bps[in]._umin_av_cnt=10;
00234a  f8a4704a          STRH     r7,[r4,#0x4a]
;;;4075   			if(!(bps[in]._av&(1<<2)))avar_bps_hndl(in,2,1);
00234e  7860              LDRB     r0,[r4,#1]
002350  0740              LSLS     r0,r0,#29
002352  d413              BMI      |L1.9084|
002354  2201              MOVS     r2,#1
002356  2102              MOVS     r1,#2
002358  4630              MOV      r0,r6
00235a  f7fffffe          BL       avar_bps_hndl
00235e  e00d              B        |L1.9084|
                  |L1.9056|
;;;4076   		  	/*	if((K[APV]!=ON)||((apv_cnt[in,0]==0)&&(apv_cnt[in,1]==0)&&(apv_cnt[in,2]==0)&&(apv_flags[in]==afOFF)))avar_s_hndl(in,2,1);
;;;4077   			if((apv_cnt[in,0]==0)&&(apv_cnt[in,1]==0)&&(apv_cnt[in,2]==0)&&(apv_flags[in]==afON))
;;;4078   				{
;;;4079   				apv_cnt[in,0]=APV_INIT;
;;;4080   				apv_cnt[in,1]=APV_INIT;
;;;4081   				apv_cnt[in,2]=APV_INIT;
;;;4082   				apv_flags[in]=afOFF;
;;;4083   				}*/				
;;;4084   			}
;;;4085   		} 
;;;4086   	}	
;;;4087   	
;;;4088   else if(!(temp&(1<<AVUMIN)))
;;;4089   	{
;;;4090   	if(bps[in]._umin_av_cnt) 
002360  f9b4004a          LDRSH    r0,[r4,#0x4a]
002364  b150              CBZ      r0,|L1.9084|
;;;4091   		{
;;;4092   		bps[in]._umin_av_cnt--;
002366  f1a00001          SUB      r0,r0,#1
00236a  b200              SXTH     r0,r0
00236c  f8a4004a          STRH     r0,[r4,#0x4a]
;;;4093   		if(bps[in]._umin_av_cnt==0)
002370  b920              CBNZ     r0,|L1.9084|
;;;4094   			{
;;;4095   			bps[in]._umin_av_cnt=0;
;;;4096   			avar_bps_hndl(in,2,0);
002372  2200              MOVS     r2,#0
002374  2102              MOVS     r1,#2
002376  4630              MOV      r0,r6
002378  f7fffffe          BL       avar_bps_hndl
                  |L1.9084|
;;;4097   		//	apv_cnt[in,0]=0;
;;;4098   		//	apv_cnt[in,1]=0;
;;;4099   		//	apv_cnt[in,2]=0;
;;;4100   			}
;;;4101   		}
;;;4102   	else if(bps[in]._umin_av_cnt>10)bps[in]._umin_av_cnt--;	 
;;;4103   	}
;;;4104   
;;;4105   //bps[in]._state=bsOFF;
;;;4106   
;;;4107   if (bps[in]._av&0x0f)					bps[in]._state=bsAV;
00237c  7860              LDRB     r0,[r4,#1]
00237e  0700              LSLS     r0,r0,#28
002380  d003              BEQ      |L1.9098|
002382  f04f0004          MOV      r0,#4
002386  70a0              STRB     r0,[r4,#2]
002388  e017              B        |L1.9146|
                  |L1.9098|
;;;4108   else if ( (net_av) && (bps[in]._cnt>20)/*&& 
00238a  48fb              LDR      r0,|L1.10104|
00238c  7800              LDRB     r0,[r0,#0]  ; net_av
00238e  b130              CBZ      r0,|L1.9118|
002390  78e0              LDRB     r0,[r4,#3]
002392  2814              CMP      r0,#0x14
002394  d903              BLS      |L1.9118|
;;;4109   		(bps[in]._Uii<200)*/)				bps[in]._state=bsOFF_AV_NET;
002396  f04f0005          MOV      r0,#5
00239a  70a0              STRB     r0,[r4,#2]
00239c  e00d              B        |L1.9146|
                  |L1.9118|
;;;4110   else if (bps[in]._flags_tm&BIN8(100000))	bps[in]._state=bsRDY;
00239e  f8940042          LDRB     r0,[r4,#0x42]
0023a2  0680              LSLS     r0,r0,#26
0023a4  d503              BPL      |L1.9134|
0023a6  f04f0002          MOV      r0,#2
0023aa  70a0              STRB     r0,[r4,#2]
0023ac  e005              B        |L1.9146|
                  |L1.9134|
;;;4111   else if (bps[in]._cnt<20)				bps[in]._state=bsWRK;
0023ae  78e0              LDRB     r0,[r4,#3]
0023b0  2814              CMP      r0,#0x14
0023b2  d202              BCS      |L1.9146|
0023b4  f04f0001          MOV      r0,#1
0023b8  70a0              STRB     r0,[r4,#2]
                  |L1.9146|
;;;4112   
;;;4113   
;;;4114   
;;;4115   //else if(bps[in]._flags_tm&BIN8(100000)) bps[in]._state=ssBL;
;;;4116   //else if((!(bps[in]._flags_tm&BIN8(100000)))&&(net_U>100))bps[in]._state=ssWRK;
;;;4117   //else bps[0]._state=ssNOT;
;;;4118   
;;;4119   //bps[in]._is_ready=0;
;;;4120   //bps[in]._is_wrk=0;
;;;4121   //if(bps[in]._av_net) bps[in]._flags_bp='N';//  
;;;4122   //else if(bps[in]._av_u_max) bps[in]._flags_bp='P';//  (u_.av_.bAS1T)) bps_state[0]=ssAV;
;;;4123   //else if(bps[in]._av_u_min) bps[in]._flags_bp='M';//  
;;;4124   //else if(bps[in]._av_temper) bps[in]._flags_bp='T';// 
;;;4125   //else if(bps[in]._flags_tm&BIN8(100000)) 
;;;4126   //	{
;;;4127   //	bps[in]._flags_bp='B';// 
;;;4128   //	bps[in]._is_ready=1;
;;;4129   //	}
;;;4130   //else if((!(bps[in]._flags_tm&BIN8(100000)))&&(net_U>100))
;;;4131   //     {
;;;4132   //     bps[in]._flags_bp='W';// 
;;;4133   //     bps[in]._is_ready=1;
;;;4134   //     bps[in]._is_wrk=1;
;;;4135        
;;;4136   //     }
;;;4137   //else bps[in]._is_ready=1;     
;;;4138   
;;;4139   
;;;4140   
;;;4141   
;;;4142   
;;;4143   /*
;;;4144   bps[in]._flags_tu&=BIN8(11111110);
;;;4145   if(bps[in]._ist_blok_cnt)
;;;4146   	{
;;;4147   	bps[in]._ist_blok_cnt--;
;;;4148   	bps[in]._flags_tu|=BIN8(1);
;;;4149   	}
;;;4150   
;;;4151   	   */ 
;;;4152   
;;;4153   //    
;;;4154   if(bps[in]._cnt>=10) bps[in]._flags_tu|=BIN8(10000000);
0023ba  78e0              LDRB     r0,[r4,#3]
0023bc  280a              CMP      r0,#0xa
0023be  d306              BCC      |L1.9166|
0023c0  f894002c          LDRB     r0,[r4,#0x2c]
0023c4  f0400080          ORR      r0,r0,#0x80
0023c8  f884002c          STRB     r0,[r4,#0x2c]
0023cc  e005              B        |L1.9178|
                  |L1.9166|
;;;4155   else bps[in]._flags_tu&=BIN8(1111111);
0023ce  f894002c          LDRB     r0,[r4,#0x2c]
0023d2  f000007f          AND      r0,r0,#0x7f
0023d6  f884002c          STRB     r0,[r4,#0x2c]
                  |L1.9178|
;;;4156   	
;;;4157   bps[in]._vol_u=cntrl_stat+bps[in]._x_;	
0023da  49e8              LDR      r1,|L1.10108|
0023dc  f9b40050          LDRSH    r0,[r4,#0x50]
0023e0  f9b1101a          LDRSH    r1,[r1,#0x1a]  ; cntrl_stat
0023e4  4408              ADD      r0,r0,r1
0023e6  6320              STR      r0,[r4,#0x30]
;;;4158   bps[in]._vol_i=1000; 
0023e8  f44f707a          MOV      r0,#0x3e8
0023ec  6360              STR      r0,[r4,#0x34]
                  |L1.9198|
;;;4159   }
0023ee  e543              B        |L1.7800|
;;;4160   
                          ENDP

                  avt_hndl PROC
;;;4161   //-----------------------------------------------
;;;4162   void avt_hndl(void)
0023f0  b570              PUSH     {r4-r6,lr}
;;;4163   {
;;;4164   char i;
;;;4165   for(i=0;i<12;i++)
0023f2  f04f0000          MOV      r0,#0
;;;4166   	{
;;;4167   	if(eb2_data_short[6]&(1<<i))
0023f6  49e2              LDR      r1,|L1.10112|
;;;4168   		{
;;;4169   		avt_stat[i]=avtON;
0023f8  4de2              LDR      r5,|L1.10116|
0023fa  f04f0401          MOV      r4,#1                 ;4167
0023fe  f9b1200c          LDRSH    r2,[r1,#0xc]          ;4167
002402  4603              MOV      r3,r0                 ;4165
                  |L1.9220|
002404  fa04f100          LSL      r1,r4,r0              ;4167
002408  420a              TST      r2,r1                 ;4167
00240a  d001              BEQ      |L1.9232|
00240c  542c              STRB     r4,[r5,r0]
00240e  e000              B        |L1.9234|
                  |L1.9232|
;;;4170   		}
;;;4171   	else avt_stat[i]=avtOFF;
002410  542b              STRB     r3,[r5,r0]
                  |L1.9234|
002412  f1000001          ADD      r0,r0,#1              ;4165
002416  b2c0              UXTB     r0,r0                 ;4165
002418  280c              CMP      r0,#0xc               ;4165
00241a  d3f3              BCC      |L1.9220|
;;;4172   	}
;;;4173   
;;;4174   if((avt_stat_old[0]!=avt_stat[0])&&(NUMAVT>=1))
00241c  4eda              LDR      r6,|L1.10120|
00241e  7828              LDRB     r0,[r5,#0]  ; avt_stat
002420  4cda              LDR      r4,|L1.10124|
002422  7831              LDRB     r1,[r6,#0]  ; avt_stat_old
002424  4281              CMP      r1,r0
002426  d00b              BEQ      |L1.9280|
002428  f9b41000          LDRSH    r1,[r4,#0]  ; NUMAVT
00242c  2901              CMP      r1,#1
00242e  db07              BLT      |L1.9280|
;;;4175   	{
;;;4176   	if(avt_stat[0]==avtON) 	snmp_trap_send("Avtomat #1 is ON ",11,1,1);
002430  2801              CMP      r0,#1
002432  d07e              BEQ      |L1.9522|
;;;4177   	else 				snmp_trap_send("Avtomat #1 is OFF",11,1,0);
002434  2300              MOVS     r3,#0
002436  2201              MOVS     r2,#1
002438  210b              MOVS     r1,#0xb
00243a  a0d5              ADR      r0,|L1.10128|
00243c  f7fffffe          BL       snmp_trap_send
                  |L1.9280|
;;;4178   	}
;;;4179   if((avt_stat_old[1]!=avt_stat[1])&&(NUMAVT>=2))
002440  7871              LDRB     r1,[r6,#1]  ; avt_stat_old
002442  7868              LDRB     r0,[r5,#1]  ; avt_stat
002444  4281              CMP      r1,r0
002446  d00b              BEQ      |L1.9312|
002448  f9b41000          LDRSH    r1,[r4,#0]  ; NUMAVT
00244c  2902              CMP      r1,#2
00244e  db07              BLT      |L1.9312|
;;;4180   	{
;;;4181   	if(avt_stat[1]==avtON) 	snmp_trap_send("Avtomat #2 is ON ",11,2,1);
002450  2801              CMP      r0,#1
002452  d06f              BEQ      |L1.9524|
;;;4182   	else 				snmp_trap_send("Avtomat #2 is OFF",11,2,0);
002454  2300              MOVS     r3,#0
002456  2202              MOVS     r2,#2
002458  210b              MOVS     r1,#0xb
00245a  a0d2              ADR      r0,|L1.10148|
00245c  f7fffffe          BL       snmp_trap_send
                  |L1.9312|
;;;4183   	}
;;;4184   if((avt_stat_old[2]!=avt_stat[2])&&(NUMAVT>=3))
002460  78b1              LDRB     r1,[r6,#2]  ; avt_stat_old
002462  78a8              LDRB     r0,[r5,#2]  ; avt_stat
002464  4281              CMP      r1,r0
002466  d00b              BEQ      |L1.9344|
002468  f9b41000          LDRSH    r1,[r4,#0]  ; NUMAVT
00246c  2903              CMP      r1,#3
00246e  db07              BLT      |L1.9344|
;;;4185   	{
;;;4186   	if(avt_stat[2]==avtON) 	snmp_trap_send("Avtomat #3 is ON ",11,3,1);
002470  2801              CMP      r0,#1
002472  d072              BEQ      |L1.9562|
;;;4187   	else 				snmp_trap_send("Avtomat #3 is OFF",11,3,0);
002474  2300              MOVS     r3,#0
002476  2203              MOVS     r2,#3
002478  210b              MOVS     r1,#0xb
00247a  a0cf              ADR      r0,|L1.10168|
00247c  f7fffffe          BL       snmp_trap_send
                  |L1.9344|
;;;4188   	}
;;;4189   if((avt_stat_old[3]!=avt_stat[3])&&(NUMAVT>=4))
002480  78f1              LDRB     r1,[r6,#3]  ; avt_stat_old
002482  78e8              LDRB     r0,[r5,#3]  ; avt_stat
002484  4281              CMP      r1,r0
002486  d00b              BEQ      |L1.9376|
002488  f9b41000          LDRSH    r1,[r4,#0]  ; NUMAVT
00248c  2904              CMP      r1,#4
00248e  db07              BLT      |L1.9376|
;;;4190   	{
;;;4191   	if(avt_stat[3]==avtON) 	snmp_trap_send("Avtomat #4 is ON ",11,4,1);
002490  2801              CMP      r0,#1
002492  d079              BEQ      |L1.9608|
;;;4192   	else 				snmp_trap_send("Avtomat #4 is OFF",11,4,0);
002494  2300              MOVS     r3,#0
002496  2204              MOVS     r2,#4
002498  210b              MOVS     r1,#0xb
00249a  a0cc              ADR      r0,|L1.10188|
00249c  f7fffffe          BL       snmp_trap_send
                  |L1.9376|
;;;4193   	}
;;;4194   if((avt_stat_old[4]!=avt_stat[4])&&(NUMAVT>=5))
0024a0  7931              LDRB     r1,[r6,#4]  ; avt_stat_old
0024a2  7928              LDRB     r0,[r5,#4]  ; avt_stat
0024a4  4281              CMP      r1,r0
0024a6  d00b              BEQ      |L1.9408|
0024a8  f9b41000          LDRSH    r1,[r4,#0]  ; NUMAVT
0024ac  2905              CMP      r1,#5
0024ae  db07              BLT      |L1.9408|
;;;4195   	{
;;;4196   	if(avt_stat[4]==avtON) 	snmp_trap_send("Avtomat #5 is ON ",11,5,1);
0024b0  2801              CMP      r0,#1
0024b2  d071              BEQ      |L1.9624|
;;;4197   	else 				snmp_trap_send("Avtomat #5 is OFF",11,5,0);
0024b4  2300              MOVS     r3,#0
0024b6  2205              MOVS     r2,#5
0024b8  210b              MOVS     r1,#0xb
0024ba  a0c9              ADR      r0,|L1.10208|
0024bc  f7fffffe          BL       snmp_trap_send
                  |L1.9408|
;;;4198   	}
;;;4199   if((avt_stat_old[5]!=avt_stat[5])&&(NUMAVT>=6))
0024c0  7971              LDRB     r1,[r6,#5]  ; avt_stat_old
0024c2  7968              LDRB     r0,[r5,#5]  ; avt_stat
0024c4  4281              CMP      r1,r0
0024c6  d00b              BEQ      |L1.9440|
0024c8  f9b41000          LDRSH    r1,[r4,#0]  ; NUMAVT
0024cc  2906              CMP      r1,#6
0024ce  db07              BLT      |L1.9440|
;;;4200   	{
;;;4201   	if(avt_stat[5]==avtON) 	snmp_trap_send("Avtomat #6 is ON ",11,6,1);
0024d0  2801              CMP      r0,#1
0024d2  d068              BEQ      |L1.9638|
;;;4202   	else 				snmp_trap_send("Avtomat #6 is OFF",11,6,0);
0024d4  2300              MOVS     r3,#0
0024d6  2206              MOVS     r2,#6
0024d8  210b              MOVS     r1,#0xb
0024da  a0c6              ADR      r0,|L1.10228|
0024dc  f7fffffe          BL       snmp_trap_send
                  |L1.9440|
;;;4203   	}
;;;4204   if((avt_stat_old[6]!=avt_stat[6])&&(NUMAVT>=7))
0024e0  79b1              LDRB     r1,[r6,#6]  ; avt_stat_old
0024e2  79a8              LDRB     r0,[r5,#6]  ; avt_stat
0024e4  4281              CMP      r1,r0
0024e6  d00b              BEQ      |L1.9472|
0024e8  f9b41000          LDRSH    r1,[r4,#0]  ; NUMAVT
0024ec  2907              CMP      r1,#7
0024ee  db07              BLT      |L1.9472|
;;;4205   	{
;;;4206   	if(avt_stat[6]==avtON) 	snmp_trap_send("Avtomat #7 is ON ",11,7,1);
0024f0  2801              CMP      r0,#1
0024f2  d05f              BEQ      |L1.9652|
;;;4207   	else 				snmp_trap_send("Avtomat #7 is OFF",11,7,0);
0024f4  2300              MOVS     r3,#0
0024f6  2207              MOVS     r2,#7
0024f8  210b              MOVS     r1,#0xb
0024fa  a0c3              ADR      r0,|L1.10248|
0024fc  f7fffffe          BL       snmp_trap_send
                  |L1.9472|
;;;4208   	}
;;;4209   if((avt_stat_old[7]!=avt_stat[7])&&(NUMAVT>=8))
002500  79f1              LDRB     r1,[r6,#7]  ; avt_stat_old
002502  79e8              LDRB     r0,[r5,#7]  ; avt_stat
002504  4281              CMP      r1,r0
002506  d00b              BEQ      |L1.9504|
002508  f9b41000          LDRSH    r1,[r4,#0]  ; NUMAVT
00250c  2908              CMP      r1,#8
00250e  db07              BLT      |L1.9504|
;;;4210   	{
;;;4211   	if(avt_stat[7]==avtON) 	snmp_trap_send("Avtomat #8 is ON ",11,8,1);
002510  2801              CMP      r0,#1
002512  d056              BEQ      |L1.9666|
;;;4212   	else 				snmp_trap_send("Avtomat #8 is OFF",11,8,0);
002514  2300              MOVS     r3,#0
002516  2208              MOVS     r2,#8
002518  210b              MOVS     r1,#0xb
00251a  a0c0              ADR      r0,|L1.10268|
00251c  f7fffffe          BL       snmp_trap_send
                  |L1.9504|
;;;4213   	}
;;;4214   if((avt_stat_old[8]!=avt_stat[8])&&(NUMAVT>=9))
002520  7a31              LDRB     r1,[r6,#8]  ; avt_stat_old
002522  7a28              LDRB     r0,[r5,#8]  ; avt_stat
002524  4281              CMP      r1,r0
002526  d00e              BEQ      |L1.9542|
002528  f9b41000          LDRSH    r1,[r4,#0]  ; NUMAVT
00252c  2909              CMP      r1,#9
00252e  db0a              BLT      |L1.9542|
;;;4215   	{
;;;4216   	if(avt_stat[8]==avtON) 	snmp_trap_send("Avtomat #9 is ON ",11,9,1);
002530  e001              B        |L1.9526|
                  |L1.9522|
002532  e013              B        |L1.9564|
                  |L1.9524|
002534  e019              B        |L1.9578|
                  |L1.9526|
002536  2801              CMP      r0,#1
002538  d04a              BEQ      |L1.9680|
;;;4217   	else 				snmp_trap_send("Avtomat #9 is OFF",11,9,0);
00253a  2300              MOVS     r3,#0
00253c  2209              MOVS     r2,#9
00253e  210b              MOVS     r1,#0xb
002540  a0bb              ADR      r0,|L1.10288|
002542  f7fffffe          BL       snmp_trap_send
                  |L1.9542|
;;;4218   	}
;;;4219   
;;;4220   for(i=0;i<12;i++)
002546  f04f0000          MOV      r0,#0
                  |L1.9546|
;;;4221   	{
;;;4222   	avt_stat_old[i]=avt_stat[i];
00254a  5c29              LDRB     r1,[r5,r0]
00254c  5431              STRB     r1,[r6,r0]
00254e  f1000001          ADD      r0,r0,#1              ;4220
002552  b2c0              UXTB     r0,r0                 ;4220
002554  280c              CMP      r0,#0xc               ;4220
002556  d3f8              BCC      |L1.9546|
                  |L1.9560|
;;;4223   	}
;;;4224   }
002558  bd70              POP      {r4-r6,pc}
                  |L1.9562|
00255a  e00e              B        |L1.9594|
                  |L1.9564|
00255c  2301              MOVS     r3,#1                 ;4176
00255e  461a              MOV      r2,r3                 ;4176
002560  210b              MOVS     r1,#0xb               ;4176
002562  a0b8              ADR      r0,|L1.10308|
002564  f7fffffe          BL       snmp_trap_send
002568  e76a              B        |L1.9280|
                  |L1.9578|
00256a  2301              MOVS     r3,#1                 ;4181
00256c  2202              MOVS     r2,#2                 ;4181
00256e  210b              MOVS     r1,#0xb               ;4181
002570  a0b9              ADR      r0,|L1.10328|
002572  f7fffffe          BL       snmp_trap_send
002576  e773              B        |L1.9312|
002578  e006              B        |L1.9608|
                  |L1.9594|
00257a  2301              MOVS     r3,#1                 ;4186
00257c  2203              MOVS     r2,#3                 ;4186
00257e  210b              MOVS     r1,#0xb               ;4186
002580  a0ba              ADR      r0,|L1.10348|
002582  f7fffffe          BL       snmp_trap_send
002586  e77b              B        |L1.9344|
                  |L1.9608|
002588  2301              MOVS     r3,#1                 ;4191
00258a  2204              MOVS     r2,#4                 ;4191
00258c  210b              MOVS     r1,#0xb               ;4191
00258e  a0bc              ADR      r0,|L1.10368|
002590  f7fffffe          BL       snmp_trap_send
002594  e784              B        |L1.9376|
002596  e7ff              B        |L1.9624|
                  |L1.9624|
002598  2301              MOVS     r3,#1                 ;4196
00259a  2205              MOVS     r2,#5                 ;4196
00259c  210b              MOVS     r1,#0xb               ;4196
00259e  a0bd              ADR      r0,|L1.10388|
0025a0  f7fffffe          BL       snmp_trap_send
0025a4  e78c              B        |L1.9408|
                  |L1.9638|
0025a6  2301              MOVS     r3,#1                 ;4201
0025a8  2206              MOVS     r2,#6                 ;4201
0025aa  210b              MOVS     r1,#0xb               ;4201
0025ac  a0be              ADR      r0,|L1.10408|
0025ae  f7fffffe          BL       snmp_trap_send
0025b2  e795              B        |L1.9440|
                  |L1.9652|
0025b4  2301              MOVS     r3,#1                 ;4206
0025b6  2207              MOVS     r2,#7                 ;4206
0025b8  210b              MOVS     r1,#0xb               ;4206
0025ba  a0c0              ADR      r0,|L1.10428|
0025bc  f7fffffe          BL       snmp_trap_send
0025c0  e79e              B        |L1.9472|
                  |L1.9666|
0025c2  2301              MOVS     r3,#1                 ;4211
0025c4  2208              MOVS     r2,#8                 ;4211
0025c6  210b              MOVS     r1,#0xb               ;4211
0025c8  a0c1              ADR      r0,|L1.10448|
0025ca  f7fffffe          BL       snmp_trap_send
0025ce  e7a7              B        |L1.9504|
                  |L1.9680|
0025d0  2301              MOVS     r3,#1                 ;4216
0025d2  2209              MOVS     r2,#9                 ;4216
0025d4  210b              MOVS     r1,#0xb               ;4216
0025d6  a0c3              ADR      r0,|L1.10468|
0025d8  f7fffffe          BL       snmp_trap_send
0025dc  e7b3              B        |L1.9542|
;;;4225   
                          ENDP

                  bat_hndl PROC
;;;4226   //-----------------------------------------------
;;;4227   void bat_hndl(void)
0025de  b570              PUSH     {r4-r6,lr}
;;;4228   {
;;;4229   /*if(mess_find(_MESS_BAT_MASK_ON))
;;;4230   	{
;;;4231   	if(mess_data[0]==_MESS_BAT_MASK_ON)
;;;4232   		{
;;;4233   		char i;
;;;4234   		for(i=0;i<2;i++)
;;;4235   			{
;;;4236   			if(mess_data[1]&(1<<i))
;;;4237   				{
;;;4238   				bat[i]._cnt_to_block=0;
;;;4239        			bat[i]._rel_stat=0;
;;;4240        			}
;;;4241   			}
;;;4242   		}
;;;4243   	}
;;;4244   if(mess_find(_MESS_BAT_MASK_OFF))
;;;4245   	{		
;;;4246   	if(mess_data[0]==_MESS_BAT_MASK_OFF)
;;;4247   		{
;;;4248   		char i;
;;;4249   		for(i=0;i<2;i++)
;;;4250   			{
;;;4251   			if((mess_data[1]&(1<<i)) && (bat[i]._cnt_to_block==0) && (bat[i]._rel_stat==0))
;;;4252   				{
;;;4253   				bat[i]._cnt_to_block=20;
;;;4254   				bat[i]._rel_stat=1;
;;;4255        			}
;;;4256   			}
;;;4257   		
;;;4258   		}		
;;;4259   	}*/
;;;4260   
;;;4261   if(mess_find_unvol(MESS2BAT_HNDL))
0025e0  20c8              MOVS     r0,#0xc8
0025e2  f7fffffe          BL       mess_find_unvol
;;;4262   	{ 
;;;4263   	char i;
;;;4264   	
;;;4265   	if(mess_data[0]==PARAM_BAT_ALL_OFF_AFTER_2SEC)
;;;4266   		{
;;;4267   		for(i=0;i<MAX_NUM_OF_BAT;i++)
;;;4268   			{
;;;4269   			if(bat[i]._cnt_to_block<50)bat[i]._cnt_to_block++;
0025e6  49c4              LDR      r1,|L1.10488|
0025e8  2200              MOVS     r2,#0                 ;4267
0025ea  b3a8              CBZ      r0,|L1.9816|
0025ec  4bc3              LDR      r3,|L1.10492|
;;;4270   			}
;;;4271   		}
;;;4272   
;;;4273   	else if(mess_data[0]==PARAM_BAT_MASK_OFF_AFTER_2SEC)
;;;4274   		{
;;;4275   		for(i=0;i<MAX_NUM_OF_BAT;i++)
;;;4276   			{
;;;4277   			if(mess_data[1]&(1<<i))
0025ee  2401              MOVS     r4,#1
0025f0  6818              LDR      r0,[r3,#0]            ;4265  ; mess_data
0025f2  28c9              CMP      r0,#0xc9              ;4265
0025f4  d01c              BEQ      |L1.9776|
0025f6  28ca              CMP      r0,#0xca              ;4273
0025f8  d02f              BEQ      |L1.9818|
;;;4278   				{
;;;4279   				if(bat[i]._cnt_to_block<50) bat[i]._cnt_to_block++;
;;;4280   				}
;;;4281   			else bat[i]._cnt_to_block=0;
;;;4282   			}
;;;4283   		}
;;;4284   	else 
;;;4285   	 	{
;;;4286   		for(i=0;i<MAX_NUM_OF_BAT;i++)
0025fa  4610              MOV      r0,r2
                  |L1.9724|
;;;4287   			{
;;;4288   			bat[i]._cnt_to_block=0;
0025fc  eb000340          ADD      r3,r0,r0,LSL #1
002600  eb031300          ADD      r3,r3,r0,LSL #4
002604  f8012023          STRB     r2,[r1,r3,LSL #2]
002608  f1000001          ADD      r0,r0,#1              ;4286
00260c  b2c0              UXTB     r0,r0                 ;4286
00260e  2802              CMP      r0,#2                 ;4286
002610  d3f4              BCC      |L1.9724|
                  |L1.9746|
;;;4289   			}
;;;4290   
;;;4291   		}
;;;4292   	for(i=0;i<MAX_NUM_OF_BAT;i++)
002612  f04f0000          MOV      r0,#0
                  |L1.9750|
;;;4293   		{
;;;4294   		if(bat[i]._cnt_to_block>20)bat[i]._rel_stat=1;
002616  eb000340          ADD      r3,r0,r0,LSL #1
00261a  eb031300          ADD      r3,r3,r0,LSL #4
00261e  f8115023          LDRB     r5,[r1,r3,LSL #2]
002622  2d14              CMP      r5,#0x14
002624  d939              BLS      |L1.9882|
002626  eb010383          ADD      r3,r1,r3,LSL #2
00262a  f883403c          STRB     r4,[r3,#0x3c]
00262e  e038              B        |L1.9890|
                  |L1.9776|
002630  f04f0000          MOV      r0,#0                 ;4267
                  |L1.9780|
002634  eb000340          ADD      r3,r0,r0,LSL #1       ;4269
002638  eb031500          ADD      r5,r3,r0,LSL #4       ;4269
00263c  f8113025          LDRB     r3,[r1,r5,LSL #2]     ;4269
002640  2b32              CMP      r3,#0x32              ;4269
002642  d203              BCS      |L1.9804|
002644  f1030301          ADD      r3,r3,#1              ;4269
002648  f8013025          STRB     r3,[r1,r5,LSL #2]     ;4269
                  |L1.9804|
00264c  f1000001          ADD      r0,r0,#1              ;4267
002650  b2c0              UXTB     r0,r0                 ;4267
002652  2802              CMP      r0,#2                 ;4267
002654  d3ee              BCC      |L1.9780|
002656  e7dc              B        |L1.9746|
                  |L1.9816|
002658  e029              B        |L1.9902|
                  |L1.9818|
00265a  f04f0000          MOV      r0,#0                 ;4275
00265e  685e              LDR      r6,[r3,#4]            ;4277
                  |L1.9824|
002660  fa04f300          LSL      r3,r4,r0              ;4277
002664  421e              TST      r6,r3                 ;4277
002666  d00c              BEQ      |L1.9858|
002668  eb000340          ADD      r3,r0,r0,LSL #1       ;4279
00266c  eb031500          ADD      r5,r3,r0,LSL #4       ;4279
002670  f8113025          LDRB     r3,[r1,r5,LSL #2]     ;4279
002674  2b32              CMP      r3,#0x32              ;4279
002676  d20a              BCS      |L1.9870|
002678  f1030301          ADD      r3,r3,#1              ;4279
00267c  f8013025          STRB     r3,[r1,r5,LSL #2]     ;4279
002680  e005              B        |L1.9870|
                  |L1.9858|
002682  eb000340          ADD      r3,r0,r0,LSL #1       ;4281
002686  eb031300          ADD      r3,r3,r0,LSL #4       ;4281
00268a  f8012023          STRB     r2,[r1,r3,LSL #2]     ;4281
                  |L1.9870|
00268e  f1000001          ADD      r0,r0,#1              ;4275
002692  b2c0              UXTB     r0,r0                 ;4275
002694  2802              CMP      r0,#2                 ;4275
002696  d3e3              BCC      |L1.9824|
002698  e7bb              B        |L1.9746|
                  |L1.9882|
;;;4295   		else bat[i]._rel_stat=0;
00269a  eb010383          ADD      r3,r1,r3,LSL #2
00269e  f883203c          STRB     r2,[r3,#0x3c]
                  |L1.9890|
0026a2  f1000001          ADD      r0,r0,#1              ;4292
0026a6  b2c0              UXTB     r0,r0                 ;4292
0026a8  2802              CMP      r0,#2                 ;4292
0026aa  d3b4              BCC      |L1.9750|
;;;4296   		}
;;;4297   
;;;4298   	}
;;;4299   
;;;4300   else 
;;;4301   	{
;;;4302   	char i;
;;;4303   	for(i=0;i<MAX_NUM_OF_BAT;i++)
;;;4304   		{
;;;4305   		bat[i]._cnt_to_block=0;
;;;4306   		bat[i]._rel_stat=0;
;;;4307   		}
;;;4308   
;;;4309   	}
;;;4310   
;;;4311   /*if(mess_find_unvol(MESS2BAT_HNDL1))
;;;4312   	{
;;;4313   	if(PARAM_BAT_ON)
;;;4314   		{
;;;4315   		char i;
;;;4316   		for(i=0;i<MAX_NUM_OF_BAT;i++)
;;;4317   			{
;;;4318   			if(mess_data[1]&(1<<i))
;;;4319   				{
;;;4320   				bat[i]._cnt_to_block=0;
;;;4321   				bat[i]._rel_stat=0;
;;;4322   				}
;;;4323   			}
;;;4324   		}
;;;4325   	} */
;;;4326   }
0026ac  e754              B        |L1.9560|
                  |L1.9902|
0026ae  f04f0000          MOV      r0,#0                 ;4303
                  |L1.9906|
0026b2  eb000340          ADD      r3,r0,r0,LSL #1       ;4305
0026b6  eb031300          ADD      r3,r3,r0,LSL #4       ;4305
0026ba  f8012023          STRB     r2,[r1,r3,LSL #2]     ;4305
0026be  eb010383          ADD      r3,r1,r3,LSL #2       ;4306
0026c2  f883203c          STRB     r2,[r3,#0x3c]         ;4306
0026c6  f1000001          ADD      r0,r0,#1              ;4303
0026ca  b2c0              UXTB     r0,r0                 ;4303
0026cc  2802              CMP      r0,#2                 ;4303
0026ce  d3f0              BCC      |L1.9906|
0026d0  e742              B        |L1.9560|
;;;4327   
                          ENDP

                  klimat_hndl PROC
;;;4457   //-----------------------------------------------
;;;4458   void klimat_hndl(void)
0026d2  e92d41f0          PUSH     {r4-r8,lr}
;;;4459   {
;;;4460   
;;;4461   
;;;4462   if(t_box>TBOXMAX)
0026d6  4d8a              LDR      r5,|L1.10496|
0026d8  488a              LDR      r0,|L1.10500|
;;;4463   	{
;;;4464   	av_tbox_cnt++;
0026da  4c8b              LDR      r4,|L1.10504|
0026dc  f9b51000          LDRSH    r1,[r5,#0]            ;4462  ; t_box
0026e0  f9b02000          LDRSH    r2,[r0,#0]            ;4462  ; TBOXMAX
0026e4  f9b40000          LDRSH    r0,[r4,#0]
0026e8  4291              CMP      r1,r2                 ;4462
0026ea  dd03              BLE      |L1.9972|
0026ec  f1000001          ADD      r0,r0,#1
0026f0  8020              STRH     r0,[r4,#0]
0026f2  e003              B        |L1.9980|
                  |L1.9972|
;;;4465   	} 
;;;4466   else if(t_box<TBOXMAX)
0026f4  da02              BGE      |L1.9980|
;;;4467   	{
;;;4468   	av_tbox_cnt--;
0026f6  f1a00001          SUB      r0,r0,#1
0026fa  8020              STRH     r0,[r4,#0]
                  |L1.9980|
;;;4469   	}
;;;4470   gran(&av_tbox_cnt,0,6);
0026fc  2206              MOVS     r2,#6
0026fe  2100              MOVS     r1,#0
002700  4881              LDR      r0,|L1.10504|
002702  f7fffffe          BL       gran
;;;4471   
;;;4472   if(av_tbox_cnt>5)
002706  f9b40000          LDRSH    r0,[r4,#0]  ; av_tbox_cnt
;;;4473   	{
;;;4474   	av_tbox_stat=atsON;
00270a  4980              LDR      r1,|L1.10508|
00270c  2601              MOVS     r6,#1
00270e  2805              CMP      r0,#5                 ;4472
002710  dd00              BLE      |L1.10004|
002712  700e              STRB     r6,[r1,#0]
                  |L1.10004|
002714  2400              MOVS     r4,#0                 ;4470
;;;4475   	}
;;;4476   if(av_tbox_cnt<1)
002716  2801              CMP      r0,#1
002718  da00              BGE      |L1.10012|
;;;4477   	{
;;;4478   	av_tbox_stat=atsOFF;
00271a  700c              STRB     r4,[r1,#0]
                  |L1.10012|
;;;4479   	}
;;;4480   
;;;4481   if(t_box<(TBOXREG-2))
00271c  497c              LDR      r1,|L1.10512|
00271e  f9b50000          LDRSH    r0,[r5,#0]  ; t_box
;;;4482   	{
;;;4483   	if(t_box_cnt<30)
002722  4a7c              LDR      r2,|L1.10516|
002724  f9b11000          LDRSH    r1,[r1,#0]            ;4481  ; TBOXREG
;;;4484   		{
;;;4485   		t_box_cnt++;
;;;4486   		if(t_box_cnt>=30)
;;;4487   			{
;;;4488   			main_vent_pos--;
002728  4f7b              LDR      r7,|L1.10520|
00272a  1e8b              SUBS     r3,r1,#2              ;4481
00272c  4298              CMP      r0,r3                 ;4481
00272e  da0f              BGE      |L1.10064|
002730  f9921000          LDRSB    r1,[r2,#0]            ;4483  ; t_box_cnt
002734  291e              CMP      r1,#0x1e              ;4483
002736  da0a              BGE      |L1.10062|
002738  f1010101          ADD      r1,r1,#1              ;4485
00273c  b249              SXTB     r1,r1                 ;4485
00273e  7011              STRB     r1,[r2,#0]            ;4485
002740  291e              CMP      r1,#0x1e              ;4486
002742  db04              BLT      |L1.10062|
002744  8839              LDRH     r1,[r7,#0]  ; main_vent_pos
002746  f1a10101          SUB      r1,r1,#1
00274a  8039              STRH     r1,[r7,#0]
;;;4489   			t_box_cnt=0;
00274c  7014              STRB     r4,[r2,#0]
                  |L1.10062|
00274e  e0e6              B        |L1.10526|
                  |L1.10064|
;;;4490   			}
;;;4491   		}
;;;4492   	}
;;;4493   else if(t_box>(TBOXREG))
002750  4288              CMP      r0,r1
002752  dd0f              BLE      |L1.10100|
;;;4494   	{
;;;4495   	if(t_box_cnt<30)
002754  f9921000          LDRSB    r1,[r2,#0]  ; t_box_cnt
002758  291e              CMP      r1,#0x1e
00275a  da0a              BGE      |L1.10098|
;;;4496   		{
;;;4497   		t_box_cnt++;
00275c  f1010101          ADD      r1,r1,#1
002760  b249              SXTB     r1,r1
002762  7011              STRB     r1,[r2,#0]
;;;4498   		if(t_box_cnt>=30)
002764  291e              CMP      r1,#0x1e
002766  db04              BLT      |L1.10098|
;;;4499   			{
;;;4500   			main_vent_pos++;
002768  8839              LDRH     r1,[r7,#0]  ; main_vent_pos
00276a  f1010101          ADD      r1,r1,#1
00276e  8039              STRH     r1,[r7,#0]
;;;4501   			t_box_cnt=0;
002770  7014              STRB     r4,[r2,#0]
                  |L1.10098|
002772  e0d4              B        |L1.10526|
                  |L1.10100|
002774  e0d2              B        |L1.10524|
002776  0000              DCW      0x0000
                  |L1.10104|
                          DCD      net_av
                  |L1.10108|
                          DCD      ||area_number.21||
                  |L1.10112|
                          DCD      eb2_data_short
                  |L1.10116|
                          DCD      avt_stat
                  |L1.10120|
                          DCD      avt_stat_old
                  |L1.10124|
                          DCD      NUMAVT
                  |L1.10128|
002790  4176746f          DCB      "Avtomat #1 is OFF",0
002794  6d617420
002798  23312069
00279c  73204f46
0027a0  4600    
0027a2  00                DCB      0
0027a3  00                DCB      0
                  |L1.10148|
0027a4  4176746f          DCB      "Avtomat #2 is OFF",0
0027a8  6d617420
0027ac  23322069
0027b0  73204f46
0027b4  4600    
0027b6  00                DCB      0
0027b7  00                DCB      0
                  |L1.10168|
0027b8  4176746f          DCB      "Avtomat #3 is OFF",0
0027bc  6d617420
0027c0  23332069
0027c4  73204f46
0027c8  4600    
0027ca  00                DCB      0
0027cb  00                DCB      0
                  |L1.10188|
0027cc  4176746f          DCB      "Avtomat #4 is OFF",0
0027d0  6d617420
0027d4  23342069
0027d8  73204f46
0027dc  4600    
0027de  00                DCB      0
0027df  00                DCB      0
                  |L1.10208|
0027e0  4176746f          DCB      "Avtomat #5 is OFF",0
0027e4  6d617420
0027e8  23352069
0027ec  73204f46
0027f0  4600    
0027f2  00                DCB      0
0027f3  00                DCB      0
                  |L1.10228|
0027f4  4176746f          DCB      "Avtomat #6 is OFF",0
0027f8  6d617420
0027fc  23362069
002800  73204f46
002804  4600    
002806  00                DCB      0
002807  00                DCB      0
                  |L1.10248|
002808  4176746f          DCB      "Avtomat #7 is OFF",0
00280c  6d617420
002810  23372069
002814  73204f46
002818  4600    
00281a  00                DCB      0
00281b  00                DCB      0
                  |L1.10268|
00281c  4176746f          DCB      "Avtomat #8 is OFF",0
002820  6d617420
002824  23382069
002828  73204f46
00282c  4600    
00282e  00                DCB      0
00282f  00                DCB      0
                  |L1.10288|
002830  4176746f          DCB      "Avtomat #9 is OFF",0
002834  6d617420
002838  23392069
00283c  73204f46
002840  4600    
002842  00                DCB      0
002843  00                DCB      0
                  |L1.10308|
002844  4176746f          DCB      "Avtomat #1 is ON ",0
002848  6d617420
00284c  23312069
002850  73204f4e
002854  2000    
002856  00                DCB      0
002857  00                DCB      0
                  |L1.10328|
002858  4176746f          DCB      "Avtomat #2 is ON ",0
00285c  6d617420
002860  23322069
002864  73204f4e
002868  2000    
00286a  00                DCB      0
00286b  00                DCB      0
                  |L1.10348|
00286c  4176746f          DCB      "Avtomat #3 is ON ",0
002870  6d617420
002874  23332069
002878  73204f4e
00287c  2000    
00287e  00                DCB      0
00287f  00                DCB      0
                  |L1.10368|
002880  4176746f          DCB      "Avtomat #4 is ON ",0
002884  6d617420
002888  23342069
00288c  73204f4e
002890  2000    
002892  00                DCB      0
002893  00                DCB      0
                  |L1.10388|
002894  4176746f          DCB      "Avtomat #5 is ON ",0
002898  6d617420
00289c  23352069
0028a0  73204f4e
0028a4  2000    
0028a6  00                DCB      0
0028a7  00                DCB      0
                  |L1.10408|
0028a8  4176746f          DCB      "Avtomat #6 is ON ",0
0028ac  6d617420
0028b0  23362069
0028b4  73204f4e
0028b8  2000    
0028ba  00                DCB      0
0028bb  00                DCB      0
                  |L1.10428|
0028bc  4176746f          DCB      "Avtomat #7 is ON ",0
0028c0  6d617420
0028c4  23372069
0028c8  73204f4e
0028cc  2000    
0028ce  00                DCB      0
0028cf  00                DCB      0
                  |L1.10448|
0028d0  4176746f          DCB      "Avtomat #8 is ON ",0
0028d4  6d617420
0028d8  23382069
0028dc  73204f4e
0028e0  2000    
0028e2  00                DCB      0
0028e3  00                DCB      0
                  |L1.10468|
0028e4  4176746f          DCB      "Avtomat #9 is ON ",0
0028e8  6d617420
0028ec  23392069
0028f0  73204f4e
0028f4  2000    
0028f6  00                DCB      0
0028f7  00                DCB      0
                  |L1.10488|
                          DCD      bat
                  |L1.10492|
                          DCD      mess_data
                  |L1.10496|
                          DCD      t_box
                  |L1.10500|
                          DCD      TBOXMAX
                  |L1.10504|
                          DCD      av_tbox_cnt
                  |L1.10508|
                          DCD      av_tbox_stat
                  |L1.10512|
                          DCD      TBOXREG
                  |L1.10516|
                          DCD      t_box_cnt
                  |L1.10520|
                          DCD      main_vent_pos
                  |L1.10524|
;;;4502   			}
;;;4503   		}
;;;4504   	}
;;;4505   else
;;;4506   	{
;;;4507   	t_box_cnt=0;
00291c  7014              STRB     r4,[r2,#0]
                  |L1.10526|
;;;4508   	}
;;;4509   
;;;4510   #ifndef UKU_KONTUR
;;;4511   if(t_box>TBOXVENTMAX)gran(&main_vent_pos,0,20); 
00291e  49fe              LDR      r1,|L1.11544|
002920  f9b11000          LDRSH    r1,[r1,#0]  ; TBOXVENTMAX
002924  4288              CMP      r0,r1
002926  dd05              BLE      |L1.10548|
002928  2214              MOVS     r2,#0x14
00292a  2100              MOVS     r1,#0
00292c  48fb              LDR      r0,|L1.11548|
00292e  f7fffffe          BL       gran
002932  e007              B        |L1.10564|
                  |L1.10548|
;;;4512   else gran(&main_vent_pos,0,pos_vent+9);
002934  48fa              LDR      r0,|L1.11552|
002936  2100              MOVS     r1,#0
002938  8800              LDRH     r0,[r0,#0]  ; pos_vent
00293a  3009              ADDS     r0,r0,#9
00293c  b202              SXTH     r2,r0
00293e  48f7              LDR      r0,|L1.11548|
002940  f7fffffe          BL       gran
                  |L1.10564|
;;;4513   
;;;4514   if((mess_find_unvol(MESS2VENT_HNDL))&&(mess_data[0]==PARAM_VENT_CB))
002944  20f0              MOVS     r0,#0xf0
002946  f7fffffe          BL       mess_find_unvol
00294a  b128              CBZ      r0,|L1.10584|
00294c  48f5              LDR      r0,|L1.11556|
00294e  6801              LDR      r1,[r0,#0]  ; mess_data
002950  29f1              CMP      r1,#0xf1
002952  d101              BNE      |L1.10584|
;;;4515   	{
;;;4516   	main_vent_pos=mess_data[1];
002954  6840              LDR      r0,[r0,#4]  ; mess_data
002956  8038              STRH     r0,[r7,#0]
                  |L1.10584|
;;;4517   	}
;;;4518   
;;;4519   
;;;4520   if(main_vent_pos<=1)mixer_vent_stat=mvsON;
002958  f9b71000          LDRSH    r1,[r7,#0]  ; main_vent_pos
00295c  48f2              LDR      r0,|L1.11560|
00295e  2901              CMP      r1,#1
002960  dc01              BGT      |L1.10598|
002962  7006              STRB     r6,[r0,#0]
002964  e000              B        |L1.10600|
                  |L1.10598|
;;;4521   else mixer_vent_stat=mvsOFF;
002966  7004              STRB     r4,[r0,#0]
                  |L1.10600|
;;;4522   #endif
;;;4523   
;;;4524   #ifdef UKU_KONTUR
;;;4525   
;;;4526   if(t_box>TBOXVENTON) t_box_vent_on_cnt++;
;;;4527   else if(t_box<TBOXVENTOFF) t_box_vent_on_cnt--;
;;;4528   gran(&t_box_vent_on_cnt,0,10);
;;;4529   
;;;4530   if(t_box_vent_on_cnt>9) vent_stat_k=vsON;
;;;4531   else if(t_box_vent_on_cnt<1) vent_stat_k=vsOFF;
;;;4532   
;;;4533   if(t_box<TBOXWARMON) t_box_warm_on_cnt++;
;;;4534   else if(t_box>TBOXWARMOFF) t_box_warm_on_cnt--;
;;;4535   gran(&t_box_warm_on_cnt,0,10);
;;;4536   
;;;4537   if(t_box_warm_on_cnt>9) warm_stat_k=wsON;
;;;4538   else if(t_box_warm_on_cnt<1) warm_stat_k=wsOFF;
;;;4539   
;;;4540   #endif
;;;4541   
;;;4542   if((TBATDISABLE>=50) && (TBATDISABLE<=90))
002968  48f0              LDR      r0,|L1.11564|
;;;4543   	{
;;;4544   	if(t_box>TBATDISABLE)
;;;4545   		{
;;;4546   		tbatdisable_cnt++;
;;;4547   		}
;;;4548   	if(t_box<TBATENABLE)
;;;4549   		{
;;;4550   		tbatdisable_cnt--;
;;;4551   		}
;;;4552   	gran(&tbatdisable_cnt,0,6);
;;;4553   
;;;4554   	if(tbatdisable_cnt>5)
;;;4555   		{
;;;4556   		tbatdisable_stat=tbdsOFF;
00296a  f8df83c4          LDR      r8,|L1.11568|
00296e  f9b00000          LDRSH    r0,[r0,#0]            ;4542  ; TBATDISABLE
002972  f1a00132          SUB      r1,r0,#0x32           ;4542
002976  2928              CMP      r1,#0x28              ;4542
002978  d821              BHI      |L1.10686|
00297a  f9b51000          LDRSH    r1,[r5,#0]            ;4544  ; t_box
00297e  4fed              LDR      r7,|L1.11572|
002980  4281              CMP      r1,r0                 ;4544
002982  dd03              BLE      |L1.10636|
002984  8838              LDRH     r0,[r7,#0]            ;4546  ; tbatdisable_cnt
002986  f1000001          ADD      r0,r0,#1              ;4546
00298a  8038              STRH     r0,[r7,#0]            ;4546
                  |L1.10636|
00298c  48ea              LDR      r0,|L1.11576|
00298e  f9b00000          LDRSH    r0,[r0,#0]            ;4548  ; TBATENABLE
002992  4281              CMP      r1,r0                 ;4548
002994  da03              BGE      |L1.10654|
002996  8838              LDRH     r0,[r7,#0]            ;4550  ; tbatdisable_cnt
002998  f1a00001          SUB      r0,r0,#1              ;4550
00299c  8038              STRH     r0,[r7,#0]            ;4550
                  |L1.10654|
00299e  2206              MOVS     r2,#6                 ;4552
0029a0  2100              MOVS     r1,#0                 ;4552
0029a2  48e4              LDR      r0,|L1.11572|
0029a4  f7fffffe          BL       gran
0029a8  f9b70000          LDRSH    r0,[r7,#0]            ;4554  ; tbatdisable_cnt
0029ac  2805              CMP      r0,#5                 ;4554
0029ae  dd01              BLE      |L1.10676|
0029b0  f8886000          STRB     r6,[r8,#0]
                  |L1.10676|
;;;4557   		}
;;;4558   	if(tbatdisable_cnt<1)
0029b4  2801              CMP      r0,#1
0029b6  da04              BGE      |L1.10690|
;;;4559   		{
;;;4560   		tbatdisable_stat=tbdsON;
0029b8  f8884000          STRB     r4,[r8,#0]
0029bc  e001              B        |L1.10690|
                  |L1.10686|
;;;4561   		}
;;;4562   	}
;;;4563   else 
;;;4564   	{
;;;4565   	tbatdisable_stat=tbdsON;
0029be  f8884000          STRB     r4,[r8,#0]
                  |L1.10690|
;;;4566   	}
;;;4567   
;;;4568   if((TLOADDISABLE>=50) && (TLOADDISABLE<=80))
0029c2  48de              LDR      r0,|L1.11580|
;;;4569   	{
;;;4570   	if(t_box>TLOADDISABLE)
;;;4571   		{
;;;4572   		tloaddisable_cnt++;
;;;4573   		}
;;;4574   	if(t_box<TLOADENABLE)
;;;4575   		{
;;;4576   		tloaddisable_cnt--;
;;;4577   		}
;;;4578   	gran(&tloaddisable_cnt,0,6);
;;;4579   
;;;4580   	if(tloaddisable_cnt>5)
;;;4581   		{
;;;4582   		tloaddisable_stat=tldsOFF;
0029c4  4fde              LDR      r7,|L1.11584|
0029c6  f9b00000          LDRSH    r0,[r0,#0]            ;4568  ; TLOADDISABLE
0029ca  f1a00132          SUB      r1,r0,#0x32           ;4568
0029ce  291e              CMP      r1,#0x1e              ;4568
0029d0  d81f              BHI      |L1.10770|
0029d2  f9b51000          LDRSH    r1,[r5,#0]            ;4570  ; t_box
0029d6  4ddb              LDR      r5,|L1.11588|
0029d8  4281              CMP      r1,r0                 ;4570
0029da  dd03              BLE      |L1.10724|
0029dc  8828              LDRH     r0,[r5,#0]            ;4572  ; tloaddisable_cnt
0029de  f1000001          ADD      r0,r0,#1              ;4572
0029e2  8028              STRH     r0,[r5,#0]            ;4572
                  |L1.10724|
0029e4  48d8              LDR      r0,|L1.11592|
0029e6  f9b00000          LDRSH    r0,[r0,#0]            ;4574  ; TLOADENABLE
0029ea  4281              CMP      r1,r0                 ;4574
0029ec  da03              BGE      |L1.10742|
0029ee  8828              LDRH     r0,[r5,#0]            ;4576  ; tloaddisable_cnt
0029f0  f1a00001          SUB      r0,r0,#1              ;4576
0029f4  8028              STRH     r0,[r5,#0]            ;4576
                  |L1.10742|
0029f6  2206              MOVS     r2,#6                 ;4578
0029f8  2100              MOVS     r1,#0                 ;4578
0029fa  48d2              LDR      r0,|L1.11588|
0029fc  f7fffffe          BL       gran
002a00  f9b50000          LDRSH    r0,[r5,#0]            ;4580  ; tloaddisable_cnt
002a04  2805              CMP      r0,#5                 ;4580
002a06  dd00              BLE      |L1.10762|
002a08  703e              STRB     r6,[r7,#0]
                  |L1.10762|
;;;4583   		}
;;;4584   	if(tloaddisable_cnt<1)
002a0a  2801              CMP      r0,#1
002a0c  da00              BGE      |L1.10768|
;;;4585   		{
;;;4586   		tloaddisable_stat=tldsON;
002a0e  703c              STRB     r4,[r7,#0]
                  |L1.10768|
;;;4587   		}
;;;4588   	}
;;;4589   else 
;;;4590   	{
;;;4591   	tloaddisable_stat=tldsON;
;;;4592   	}
;;;4593   
;;;4594   }
002a10  e4ed              B        |L1.9198|
                  |L1.10770|
002a12  703c              STRB     r4,[r7,#0]            ;4591
002a14  e4eb              B        |L1.9198|
;;;4595   #endif
                          ENDP

                  bat_drv PROC
;;;4731   //-----------------------------------------------
;;;4732   void bat_drv(char in)
002a16  e92d5ffc          PUSH     {r2-r12,lr}
;;;4733   {
002a1a  4605              MOV      r5,r0
;;;4734   unsigned short /*tempUS,*/tempUS_;
;;;4735   unsigned long tempUL,tempUL_;
;;;4736   unsigned short b_zar;
;;;4737   //static unsigned short time_cnt[2];
;;;4738   
;;;4739   
;;;4740   
;;;4741   if(cntrl_stat_blok_cnt_plus[in])cntrl_stat_blok_cnt_plus[in]--;
002a1c  49cb              LDR      r1,|L1.11596|
002a1e  f9310015          LDRSH    r0,[r1,r5,LSL #1]
002a22  b118              CBZ      r0,|L1.10796|
002a24  f1a00001          SUB      r0,r0,#1
002a28  f8210015          STRH     r0,[r1,r5,LSL #1]
                  |L1.10796|
;;;4742   if(cntrl_stat_blok_cnt_minus[in])cntrl_stat_blok_cnt_minus[in]--;
002a2c  4ac7              LDR      r2,|L1.11596|
002a2e  1d12              ADDS     r2,r2,#4
002a30  f9320015          LDRSH    r0,[r2,r5,LSL #1]
002a34  b118              CBZ      r0,|L1.10814|
002a36  f1a00001          SUB      r0,r0,#1
002a3a  f8220015          STRH     r0,[r2,r5,LSL #1]
                  |L1.10814|
;;;4743   
;;;4744   
;;;4745   if(bat[in]._Ib>IZMAX) cntrl_stat_blok_cnt_plus[in]=100;
002a3e  eb050045          ADD      r0,r5,r5,LSL #1
002a42  eb001305          ADD      r3,r0,r5,LSL #4
002a46  48c2              LDR      r0,|L1.11600|
002a48  f04f0b64          MOV      r11,#0x64
002a4c  eb000483          ADD      r4,r0,r3,LSL #2
002a50  4bc0              LDR      r3,|L1.11604|
002a52  f9b40008          LDRSH    r0,[r4,#8]
002a56  f9b33000          LDRSH    r3,[r3,#0]  ; IZMAX
002a5a  4298              CMP      r0,r3
002a5c  dd01              BLE      |L1.10850|
002a5e  f821b015          STRH     r11,[r1,r5,LSL #1]
                  |L1.10850|
;;;4746   if(bat[in]._Ib<0)     cntrl_stat_blok_cnt_minus[in]=100;
002a62  2800              CMP      r0,#0
002a64  da01              BGE      |L1.10858|
002a66  f822b015          STRH     r11,[r2,r5,LSL #1]
                  |L1.10858|
;;;4747   
;;;4748   if(cntrl_stat_blok_cnt_plus[in] && cntrl_stat_blok_cnt_minus[in])
;;;4749        {
;;;4750        if(!cntrl_stat_blok_cnt_)
002a6a  48b8              LDR      r0,|L1.11596|
002a6c  f8313015          LDRH     r3,[r1,r5,LSL #1]     ;4748
002a70  387c              SUBS     r0,r0,#0x7c
002a72  2700              MOVS     r7,#0
002a74  b14b              CBZ      r3,|L1.10890|
002a76  f8323015          LDRH     r3,[r2,r5,LSL #1]     ;4748
002a7a  b133              CBZ      r3,|L1.10890|
002a7c  f8b0305c          LDRH     r3,[r0,#0x5c]  ; cntrl_stat_blok_cnt_
002a80  b1a3              CBZ      r3,|L1.10924|
;;;4751             {
;;;4752             cntrl_stat_blok_cnt_=600; 
;;;4753             cntrl_stat_blok_cnt_plus[in]=0;
;;;4754             cntrl_stat_blok_cnt_minus[in]=0;
;;;4755             }
;;;4756        else cntrl_stat_blok_cnt=3000;
002a82  f64031b8          MOV      r1,#0xbb8
002a86  f8a0105a          STRH     r1,[r0,#0x5a]
                  |L1.10890|
;;;4757        }
;;;4758   cntrl_stat_blok_cnt=0;
002a8a  f8a0705a          STRH     r7,[r0,#0x5a]
;;;4759   
;;;4760   if(++(bat[in]._time_cnt)>=10)
002a8e  f894003e          LDRB     r0,[r4,#0x3e]
002a92  1c40              ADDS     r0,r0,#1
002a94  b2c0              UXTB     r0,r0
002a96  f884003e          STRB     r0,[r4,#0x3e]
002a9a  280a              CMP      r0,#0xa
002a9c  d301              BCC      |L1.10914|
;;;4761   	{
;;;4762   	bat[in]._time_cnt=0;
002a9e  f884703e          STRB     r7,[r4,#0x3e]
                  |L1.10914|
;;;4763   	//bat[in]._zar_cnt++;
;;;4764   	}
;;;4765   
;;;4766   if(main_10Hz_cnt==50)
002aa2  4ead              LDR      r6,|L1.11608|
002aa4  8830              LDRH     r0,[r6,#0]  ; main_10Hz_cnt
002aa6  2832              CMP      r0,#0x32
002aa8  d009              BEQ      |L1.10942|
002aaa  e017              B        |L1.10972|
                  |L1.10924|
002aac  f44f7316          MOV      r3,#0x258             ;4752
002ab0  f8a0305c          STRH     r3,[r0,#0x5c]         ;4752
002ab4  f8217015          STRH     r7,[r1,r5,LSL #1]     ;4753
002ab8  f8227015          STRH     r7,[r2,r5,LSL #1]     ;4754
002abc  e7e5              B        |L1.10890|
                  |L1.10942|
;;;4767   	{
;;;4768   	if(!bat[in]._rel_stat)
002abe  f894003c          LDRB     r0,[r4,#0x3c]
002ac2  b958              CBNZ     r0,|L1.10972|
;;;4769   		{
;;;4770   		
;;;4771   		if(bat[in]._Ub<80) 
002ac4  f9b40002          LDRSH    r0,[r4,#2]
002ac8  2850              CMP      r0,#0x50
002aca  da07              BGE      |L1.10972|
;;;4772   			{
;;;4773   			
;;;4774   			if(!(bat[in]._av&1))
002acc  f894003d          LDRB     r0,[r4,#0x3d]
002ad0  07c0              LSLS     r0,r0,#31
002ad2  d103              BNE      |L1.10972|
;;;4775   				{
;;;4776   				avar_bat_hndl(in,1);
002ad4  2101              MOVS     r1,#1
002ad6  4628              MOV      r0,r5
002ad8  f7fffffe          BL       avar_bat_hndl
                  |L1.10972|
;;;4777   				//if(in==0)plazma_bat++;
;;;4778   				}
;;;4779   			}				
;;;4780   
;;;4781   		}
;;;4782   	}
;;;4783   
;;;4784   if(main_10Hz_cnt>200)
002adc  f9b60000          LDRSH    r0,[r6,#0]  ; main_10Hz_cnt
;;;4785   	{
;;;4786   	if(abs(bat[in]._Ib)>IKB) 
002ae0  4e9e              LDR      r6,|L1.11612|
002ae2  28c8              CMP      r0,#0xc8              ;4784
002ae4  dd0f              BLE      |L1.11014|
002ae6  f9b40008          LDRSH    r0,[r4,#8]
002aea  f7fffffe          BL       abs
002aee  f9b61000          LDRSH    r1,[r6,#0]  ; IKB
002af2  4288              CMP      r0,r1
002af4  dd07              BLE      |L1.11014|
;;;4787   		{
;;;4788   		if((bat[in]._av&1))avar_bat_hndl(in,0);
002af6  f894003d          LDRB     r0,[r4,#0x3d]
002afa  07c0              LSLS     r0,r0,#31
002afc  d003              BEQ      |L1.11014|
002afe  2100              MOVS     r1,#0
002b00  4628              MOV      r0,r5
002b02  f7fffffe          BL       avar_bat_hndl
                  |L1.11014|
;;;4789   		}
;;;4790   	}
;;;4791   
;;;4792   
;;;4793   
;;;4794   if(bat[in]._Ib>(-IKB))
002b06  4895              LDR      r0,|L1.11612|
002b08  f9b41008          LDRSH    r1,[r4,#8]
002b0c  f9b00000          LDRSH    r0,[r0,#0]  ; IKB
002b10  4240              RSBS     r0,r0,#0
002b12  4281              CMP      r1,r0
002b14  dd14              BLE      |L1.11072|
;;;4795   	{
;;;4796   	if(bat[in]._cnt_wrk<10)
002b16  7b60              LDRB     r0,[r4,#0xd]
002b18  280a              CMP      r0,#0xa
002b1a  d20d              BCS      |L1.11064|
;;;4797   		{
;;;4798   		bat[in]._cnt_wrk++;
002b1c  f1000001          ADD      r0,r0,#1
002b20  b2c0              UXTB     r0,r0
002b22  7360              STRB     r0,[r4,#0xd]
;;;4799   		if((bat[in]._cnt_wrk>=10)&&(bat[in]._wrk)) 
002b24  280a              CMP      r0,#0xa
002b26  d371              BCC      |L1.11276|
002b28  7ba0              LDRB     r0,[r4,#0xe]
002b2a  2800              CMP      r0,#0
002b2c  d06e              BEQ      |L1.11276|
;;;4800   			{
;;;4801   			bat[in]._wrk=0;
002b2e  73a7              STRB     r7,[r4,#0xe]
;;;4802   			//beep_init(0x7L,'O');
;;;4803   			//wrk_mem_hndl(0);
;;;4804   			wrk_mem_hndl(in);
002b30  4628              MOV      r0,r5
002b32  f7fffffe          BL       wrk_mem_hndl
002b36  e069              B        |L1.11276|
                  |L1.11064|
;;;4805   			//plazma++;
;;;4806   			}
;;;4807   		}
;;;4808   	else bat[in]._cnt_wrk=10;	
002b38  f04f000a          MOV      r0,#0xa
002b3c  7360              STRB     r0,[r4,#0xd]
002b3e  e065              B        |L1.11276|
                  |L1.11072|
;;;4809   	}	
;;;4810   
;;;4811   else if(bat[in]._Ib<(-IKB))
002b40  da64              BGE      |L1.11276|
;;;4812   	{
;;;4813   	if(bat[in]._cnt_wrk)
002b42  7b60              LDRB     r0,[r4,#0xd]
002b44  b3f0              CBZ      r0,|L1.11204|
;;;4814   		{
;;;4815   		bat[in]._cnt_wrk--;
002b46  f1a00001          SUB      r0,r0,#1
002b4a  b2c0              UXTB     r0,r0
002b4c  7360              STRB     r0,[r4,#0xd]
;;;4816   		if((bat[in]._cnt_wrk==0)&&(bat[in]._wrk==0)) 
002b4e  bbc8              CBNZ     r0,|L1.11204|
002b50  7ba0              LDRB     r0,[r4,#0xe]
002b52  bbb8              CBNZ     r0,|L1.11204|
;;;4817   			{
;;;4818   			bat[in]._wrk=1;
002b54  f04f0001          MOV      r0,#1
002b58  73a0              STRB     r0,[r4,#0xe]
;;;4819   
;;;4820   				{
;;;4821   				char temp;
;;;4822   				signed short temp_temp;
;;;4823   				temp_temp=bat[in]._u_old[((bat_u_old_cnt+1)&0x07)];
002b5a  4881              LDR      r0,|L1.11616|
002b5c  8800              LDRH     r0,[r0,#0]  ; bat_u_old_cnt
002b5e  f1000001          ADD      r0,r0,#1
002b62  f0000007          AND      r0,r0,#7
002b66  eb040040          ADD      r0,r4,r0,LSL #1
002b6a  8c00              LDRH     r0,[r0,#0x20]
002b6c  9000              STR      r0,[sp,#0]
;;;4824   			 
;;;4825   				temp=LPC_RTC->YEAR;
002b6e  4e7d              LDR      r6,|L1.11620|
002b70  8bb0              LDRH     r0,[r6,#0x1c]
002b72  9001              STR      r0,[sp,#4]
;;;4826   				gran_char((signed char*)&temp,1,99);
002b74  f04f0263          MOV      r2,#0x63
002b78  f04f0101          MOV      r1,#1
002b7c  a801              ADD      r0,sp,#4
002b7e  f7fffffe          BL       gran_char
;;;4827   				*((char*)(&(bat[in]._wrk_date[0])))=temp;
002b82  f104041c          ADD      r4,r4,#0x1c
002b86  f89d0004          LDRB     r0,[sp,#4]
002b8a  7620              STRB     r0,[r4,#0x18]
;;;4828   			
;;;4829   				temp=LPC_RTC->MONTH;
002b8c  7e30              LDRB     r0,[r6,#0x18]
002b8e  9001              STR      r0,[sp,#4]
;;;4830   				gran_char((signed char*)&temp,1,12);
002b90  f04f020c          MOV      r2,#0xc
002b94  f04f0101          MOV      r1,#1
002b98  a801              ADD      r0,sp,#4
002b9a  f7fffffe          BL       gran_char
;;;4831   				*(((char*)(&(bat[in]._wrk_date[0])))+1)=temp;
002b9e  f89d0004          LDRB     r0,[sp,#4]
002ba2  7660              STRB     r0,[r4,#0x19]
;;;4832   			
;;;4833   				temp=LPC_RTC->DOM;
002ba4  7b30              LDRB     r0,[r6,#0xc]
002ba6  9001              STR      r0,[sp,#4]
;;;4834   				gran_char((signed char*)&temp,1,31);
002ba8  221f              MOVS     r2,#0x1f
002baa  2101              MOVS     r1,#1
002bac  a801              ADD      r0,sp,#4
002bae  f7fffffe          BL       gran_char
;;;4835   				*(((char*)(&(bat[in]._wrk_date[0])))+2)=temp;			
002bb2  f89d0004          LDRB     r0,[sp,#4]
002bb6  76a0              STRB     r0,[r4,#0x1a]
;;;4836   				
;;;4837   				*(((char*)(&(bat[in]._wrk_date[0])))+3)=*((char*)&temp_temp);
002bb8  f89d0000          LDRB     r0,[sp,#0]
002bbc  76e0              STRB     r0,[r4,#0x1b]
;;;4838   
;;;4839   				temp=LPC_RTC->HOUR;
002bbe  7a30              LDRB     r0,[r6,#8]
002bc0  9001              STR      r0,[sp,#4]
;;;4840   				gran_char((signed char*)&temp,0,23);
002bc2  e000              B        |L1.11206|
                  |L1.11204|
002bc4  e022              B        |L1.11276|
                  |L1.11206|
002bc6  2217              MOVS     r2,#0x17
002bc8  2100              MOVS     r1,#0
002bca  a801              ADD      r0,sp,#4
002bcc  f7fffffe          BL       gran_char
;;;4841   				*((char*)(&(bat[in]._wrk_date[1])))=temp;
002bd0  f89d0004          LDRB     r0,[sp,#4]
002bd4  7720              STRB     r0,[r4,#0x1c]
;;;4842                  	
;;;4843   				temp=LPC_RTC->MIN;
002bd6  7930              LDRB     r0,[r6,#4]
002bd8  9001              STR      r0,[sp,#4]
;;;4844   				gran_char((signed char*)&temp,0,59);
002bda  223b              MOVS     r2,#0x3b
002bdc  2100              MOVS     r1,#0
002bde  a801              ADD      r0,sp,#4
002be0  f7fffffe          BL       gran_char
;;;4845   				*(((char*)(&(bat[in]._wrk_date[1])))+1)=temp;
002be4  f89d0004          LDRB     r0,[sp,#4]
002be8  7760              STRB     r0,[r4,#0x1d]
;;;4846   	          
;;;4847   				temp=LPC_RTC->SEC;
002bea  7830              LDRB     r0,[r6,#0]
002bec  9001              STR      r0,[sp,#4]
;;;4848   				gran_char((signed char*)&temp,0,59);
002bee  223b              MOVS     r2,#0x3b
002bf0  2100              MOVS     r1,#0
002bf2  a801              ADD      r0,sp,#4
002bf4  f7fffffe          BL       gran_char
;;;4849   				*(((char*)(&(bat[in]._wrk_date[1])))+2)=temp;
002bf8  f89d0004          LDRB     r0,[sp,#4]
002bfc  77a0              STRB     r0,[r4,#0x1e]
;;;4850   			
;;;4851   				*(((char*)(&(bat[in]._wrk_date[1])))+3)=*(((char*)&temp_temp)+1);
002bfe  f89d0001          LDRB     r0,[sp,#1]
002c02  77e0              STRB     r0,[r4,#0x1f]
;;;4852   				bat[in]._Iintegr=0;		//  
002c04  8027              STRH     r7,[r4,#0]
;;;4853   				bat[in]._Iintegr_=0;	//  
002c06  8067              STRH     r7,[r4,#2]
002c08  f1a4041c          SUB      r4,r4,#0x1c
                  |L1.11276|
;;;4854   				}
;;;4855   	
;;;4856   			}
;;;4857   
;;;4858   		}
;;;4859   	else bat[in]._cnt_wrk=0;	 
;;;4860   	
;;;4861   	}					
;;;4862   
;;;4863   /*
;;;4864   if(Ibat>=(-IKB))
;;;4865   	{
;;;4866   	if(cnt_wrk<10)
;;;4867   		{
;;;4868   		cnt_wrk++;
;;;4869   		if((cnt_wrk>=10)&&(wrk!=wrkOFF)) 
;;;4870   			{
;;;4871   			wrk=wrkOFF;
;;;4872   			//beep_init(0x7L,'O');
;;;4873   			wrk_mem_hndl(ibat_integr);
;;;4874   			}
;;;4875   		}
;;;4876   	else cnt_wrk=10;	
;;;4877   	}	
;;;4878   
;;;4879   else if((Ibat<(-IKB))&&(spc_stat!=spc_KE))
;;;4880   	{
;;;4881   	if(cnt_wrk)
;;;4882   		{
;;;4883   		cnt_wrk--;
;;;4884   		if((cnt_wrk==0)&&(wrk!=wrkON)) 
;;;4885   			{
;;;4886   			char temp;
;;;4887   			signed short temp_temp;
;;;4888   			temp_temp=ubat_old[((ubat_old_cnt+1)&0x07)];
;;;4889   			 
;;;4890   			wrk=wrkON;
;;;4891   			
;;;4892   			temp=_year;
;;;4893   			gran_char(&temp,1,99);
;;;4894   			*((char*)(&(wrk_date[0])))=temp;
;;;4895   			
;;;4896   			temp=_month;
;;;4897   			gran_char(&temp,1,12);
;;;4898   			*(((char*)(&(wrk_date[0])))+1)=temp;
;;;4899   			
;;;4900   			temp=_date;
;;;4901   			gran_char(&temp,1,31);
;;;4902   			*(((char*)(&(wrk_date[0])))+2)=temp;			
;;;4903   				
;;;4904   			*(((char*)(&(wrk_date[0])))+3)=*((char*)&temp_temp);
;;;4905   
;;;4906   			temp=_hour;
;;;4907   			gran_char(&temp,0,23);
;;;4908   			*((char*)(&(wrk_date[1])))=temp;
;;;4909                  
;;;4910   			temp=_min;
;;;4911   			gran_char(&temp,0,59);
;;;4912   			*(((char*)(&(wrk_date[1])))+1)=temp;
;;;4913   	          
;;;4914   			temp=_sec;
;;;4915   			gran_char(&temp,0,59);
;;;4916   			*(((char*)(&(wrk_date[1])))+2)=temp;
;;;4917   			
;;;4918   			*(((char*)(&(wrk_date[1])))+3)=*(((char*)&temp_temp)+1);
;;;4919   
;;;4920   			
;;;4921   			//beep_init(0xFL,'O'); 
;;;4922   			ibat_integr=0;
;;;4923   			ibat_integr_=0;
;;;4924   			}
;;;4925   		}
;;;4926   	else cnt_wrk=0;	 
;;;4927   	
;;;4928   	}
;;;4929   if(wrk==wrkON)
;;;4930   	{
;;;4931   	ibat_integr_+=-Ibat;
;;;4932   	if(ibat_integr_>=SEC_IN_HOUR*10L)
;;;4933   		{
;;;4934   		ibat_integr_-=SEC_IN_HOUR*10L;
;;;4935   		ibat_integr++;
;;;4936   		}
;;;4937   	}
;;;4938   
;;;4939   */
;;;4940   
;;;4941   
;;;4942   /*if(bat[in]._cnt_to_block)
;;;4943   	{
;;;4944   	bat[in]._cnt_to_block--;
;;;4945   	if(!(bat[in]._cnt_to_block))
;;;4946   		{
;;;4947   		//bat[in]._rel_stat=1;
;;;4948   		}
;;;4949   	}
;;;4950   */
;;;4951   
;;;4952   
;;;4953   
;;;4954   
;;;4955   //unsigned int tempUI,tempUI_;
;;;4956   //unsigned int b_zar; 
;;;4957   //char i;
;;;4958   //Ibat[0]=5000;                     
;;;4959   
;;;4960   
;;;4961                               
;;;4962   if(bat[in]._time_cnt==0)
;;;4963   	{
;;;4964   	bat[in]._zar_cnt+=(signed long)bat[in]._Ib;
;;;4965   	
;;;4966   	if(bat[in]._zar_cnt>=AH_CONSTANT)
002c0c  f64848a0          MOV      r8,#0x8ca0
002c10  f894003e          LDRB     r0,[r4,#0x3e]         ;4962
002c14  2800              CMP      r0,#0                 ;4962
002c16  d17e              BNE      |L1.11542|
002c18  f9b41008          LDRSH    r1,[r4,#8]            ;4964
002c1c  6960              LDR      r0,[r4,#0x14]         ;4964
002c1e  4408              ADD      r0,r0,r1              ;4964
002c20  6160              STR      r0,[r4,#0x14]         ;4964
;;;4967   		{
;;;4968   		if(BAT_C_REAL[in]==0x5555) tempUS_=BAT_C_NOM[in];
;;;4969   		else tempUS_=BAT_C_REAL[in];
;;;4970   		
;;;4971   		b_zar=lc640_read_int(ADR_EE_BAT_ZAR_CNT[in]);
002c22  f8df9144          LDR      r9,|L1.11624|
002c26  f8dfa144          LDR      r10,|L1.11628|
002c2a  4540              CMP      r0,r8                 ;4966
002c2c  db2a              BLT      |L1.11396|
002c2e  f93a1015          LDRSH    r1,[r10,r5,LSL #1]    ;4968
002c32  f5a140aa          SUB      r0,r1,#0x5500         ;4968
002c36  3855              SUBS     r0,r0,#0x55           ;4968
002c38  d103              BNE      |L1.11330|
002c3a  484d              LDR      r0,|L1.11632|
002c3c  f8306015          LDRH     r6,[r0,r5,LSL #1]     ;4968
002c40  e001              B        |L1.11334|
                  |L1.11330|
002c42  f83a6015          LDRH     r6,[r10,r5,LSL #1]    ;4969
                  |L1.11334|
002c46  f8390015          LDRH     r0,[r9,r5,LSL #1]
002c4a  f7fffffe          BL       lc640_read_int
002c4e  b280              UXTH     r0,r0
;;;4972   
;;;4973   		if(b_zar<(tempUS_/**10*/))
002c50  42b0              CMP      r0,r6
002c52  d20e              BCS      |L1.11378|
;;;4974   			{
;;;4975   			bat[in]._zar_cnt-=AH_CONSTANT;
002c54  6961              LDR      r1,[r4,#0x14]
002c56  f5a14100          SUB      r1,r1,#0x8000
002c5a  f5a1614a          SUB      r1,r1,#0xca0
002c5e  6161              STR      r1,[r4,#0x14]
;;;4976   
;;;4977   			lc640_write_int(ADR_EE_BAT_ZAR_CNT[in],b_zar+1);
002c60  f9392015          LDRSH    r2,[r9,r5,LSL #1]
002c64  f1000001          ADD      r0,r0,#1
002c68  b201              SXTH     r1,r0
002c6a  4610              MOV      r0,r2
002c6c  f7fffffe          BL       lc640_write_int
002c70  e033              B        |L1.11482|
                  |L1.11378|
;;;4978   			}
;;;4979   		else if(b_zar>(tempUS_/**10*/))  
002c72  d932              BLS      |L1.11482|
;;;4980   			{
;;;4981   			lc640_write_int(ADR_EE_BAT_ZAR_CNT[in],tempUS_);
002c74  f9390015          LDRSH    r0,[r9,r5,LSL #1]
002c78  b231              SXTH     r1,r6
002c7a  f7fffffe          BL       lc640_write_int
;;;4982   			bat[in]._zar_cnt=AH_CONSTANT;
002c7e  f8c48014          STR      r8,[r4,#0x14]
002c82  e02a              B        |L1.11482|
                  |L1.11396|
;;;4983   
;;;4984   			}
;;;4985   
;;;4986   		}
;;;4987   
;;;4988   	else if(bat[in]._zar_cnt<=-AH_CONSTANT)
002c84  493b              LDR      r1,|L1.11636|
002c86  4288              CMP      r0,r1
002c88  dc27              BGT      |L1.11482|
;;;4989   		{
;;;4990   		if(BAT_C_REAL[in]==0x5555) tempUS_=BAT_C_NOM[in];
002c8a  f93a1015          LDRSH    r1,[r10,r5,LSL #1]
002c8e  f5a140aa          SUB      r0,r1,#0x5500
002c92  3855              SUBS     r0,r0,#0x55
002c94  d103              BNE      |L1.11422|
002c96  4836              LDR      r0,|L1.11632|
002c98  f8306015          LDRH     r6,[r0,r5,LSL #1]
002c9c  e001              B        |L1.11426|
                  |L1.11422|
;;;4991   		else tempUS_=BAT_C_REAL[in];
002c9e  f83a6015          LDRH     r6,[r10,r5,LSL #1]
                  |L1.11426|
;;;4992   		
;;;4993   		b_zar=lc640_read_int(ADR_EE_BAT_ZAR_CNT[in]);
002ca2  f8390015          LDRH     r0,[r9,r5,LSL #1]
002ca6  f7fffffe          BL       lc640_read_int
002caa  b280              UXTH     r0,r0
;;;4994   
;;;4995   		if(b_zar>tempUS_)
002cac  42b0              CMP      r0,r6
002cae  d905              BLS      |L1.11452|
;;;4996   			{
;;;4997   			lc640_write_int(ADR_EE_BAT_ZAR_CNT[in],tempUS_);
002cb0  f9390015          LDRSH    r0,[r9,r5,LSL #1]
002cb4  b231              SXTH     r1,r6
002cb6  f7fffffe          BL       lc640_write_int
;;;4998   			b_zar=tempUS_;
002cba  4630              MOV      r0,r6
                  |L1.11452|
;;;4999   			}
;;;5000   		if(b_zar)
002cbc  b158              CBZ      r0,|L1.11478|
;;;5001   			{
;;;5002   			bat[in]._zar_cnt+=AH_CONSTANT;
002cbe  6961              LDR      r1,[r4,#0x14]
002cc0  4441              ADD      r1,r1,r8
002cc2  6161              STR      r1,[r4,#0x14]
;;;5003   
;;;5004   			lc640_write_int(ADR_EE_BAT_ZAR_CNT[in],b_zar-1);
002cc4  f9392015          LDRSH    r2,[r9,r5,LSL #1]
002cc8  f1a00001          SUB      r0,r0,#1
002ccc  b201              SXTH     r1,r0
002cce  4610              MOV      r0,r2
002cd0  f7fffffe          BL       lc640_write_int
002cd4  e001              B        |L1.11482|
                  |L1.11478|
;;;5005   			}
;;;5006   		else 
;;;5007   			{
;;;5008   			bat[in]._zar_cnt=-AH_CONSTANT;
002cd6  4827              LDR      r0,|L1.11636|
002cd8  6160              STR      r0,[r4,#0x14]
                  |L1.11482|
;;;5009   			}
;;;5010   
;;;5011   		}
;;;5012   
;;;5013   			
;;;5014   	tempUL=(unsigned long)lc640_read_int(ADR_EE_BAT_ZAR_CNT[in]);
002cda  f8390015          LDRH     r0,[r9,r5,LSL #1]
002cde  f7fffffe          BL       lc640_read_int
002ce2  4601              MOV      r1,r0
;;;5015   	
;;;5016   	if(BAT_C_REAL[in]==0x5555) tempUL_=(unsigned long)BAT_C_NOM[in];
002ce4  f93a0015          LDRSH    r0,[r10,r5,LSL #1]
002ce8  f5a042aa          SUB      r2,r0,#0x5500
002cec  3a55              SUBS     r2,r2,#0x55
002cee  d102              BNE      |L1.11510|
002cf0  481f              LDR      r0,|L1.11632|
002cf2  f9300015          LDRSH    r0,[r0,r5,LSL #1]
                  |L1.11510|
;;;5017   	else tempUL_=(unsigned long)BAT_C_REAL[in];
;;;5018   		           	
;;;5019   	tempUL*=1000L;
002cf6  f44f727a          MOV      r2,#0x3e8
002cfa  fb01f102          MUL      r1,r1,r2
;;;5020   
;;;5021   
;;;5022   	if(tempUL_==0) tempUL=0;
002cfe  b3e8              CBZ      r0,|L1.11644|
;;;5023   	else tempUL/=tempUL_;
002d00  fbb1f0f0          UDIV     r0,r1,r0
                  |L1.11524|
;;;5024   
;;;5025   	tempUL/=10L;
002d04  f04f010a          MOV      r1,#0xa
002d08  fbb0f0f1          UDIV     r0,r0,r1
;;;5026   
;;;5027   	bat[in]._zar=(unsigned short)tempUL;
002d0c  8220              STRH     r0,[r4,#0x10]
;;;5028   
;;;5029   	if(BAT_TYPE==1)
002d0e  481a              LDR      r0,|L1.11640|
002d10  8800              LDRH     r0,[r0,#0]  ; BAT_TYPE
002d12  2801              CMP      r0,#1
002d14  e033              B        |L1.11646|
                  |L1.11542|
002d16  e044              B        |L1.11682|
                  |L1.11544|
                          DCD      TBOXVENTMAX
                  |L1.11548|
                          DCD      main_vent_pos
                  |L1.11552|
                          DCD      pos_vent
                  |L1.11556|
                          DCD      mess_data
                  |L1.11560|
                          DCD      mixer_vent_stat
                  |L1.11564|
                          DCD      TBATDISABLE
                  |L1.11568|
                          DCD      tbatdisable_stat
                  |L1.11572|
                          DCD      tbatdisable_cnt
                  |L1.11576|
                          DCD      TBATENABLE
                  |L1.11580|
                          DCD      TLOADDISABLE
                  |L1.11584|
                          DCD      tloaddisable_stat
                  |L1.11588|
                          DCD      tloaddisable_cnt
                  |L1.11592|
                          DCD      TLOADENABLE
                  |L1.11596|
                          DCD      ||area_number.21||+0x7c
                  |L1.11600|
                          DCD      bat
                  |L1.11604|
                          DCD      IZMAX
                  |L1.11608|
                          DCD      main_10Hz_cnt
                  |L1.11612|
                          DCD      IKB
                  |L1.11616|
                          DCD      bat_u_old_cnt
                  |L1.11620|
                          DCD      0x40024020
                  |L1.11624|
                          DCD      ADR_EE_BAT_ZAR_CNT
                  |L1.11628|
                          DCD      BAT_C_REAL
                  |L1.11632|
                          DCD      BAT_C_NOM
                  |L1.11636|
                          DCD      0xffff7360
                  |L1.11640|
                          DCD      BAT_TYPE
                  |L1.11644|
002d7c  e001              B        |L1.11650|
                  |L1.11646|
002d7e  d003              BEQ      |L1.11656|
002d80  e009              B        |L1.11670|
                  |L1.11650|
002d82  f04f0000          MOV      r0,#0                 ;5022
002d86  e7bd              B        |L1.11524|
                  |L1.11656|
;;;5030   		{
;;;5031   		bat[in]._zar=lakb[in]._s_o_c;
002d88  ebc500c5          RSB      r0,r5,r5,LSL #3
002d8c  49ff              LDR      r1,|L1.12684|
002d8e  eb0100c0          ADD      r0,r1,r0,LSL #3
002d92  8a40              LDRH     r0,[r0,#0x12]
002d94  8220              STRH     r0,[r4,#0x10]
                  |L1.11670|
;;;5032   		}
;;;5033   	
;;;5034   	gran((signed short*)&bat[in]._zar,0,100);
002d96  f1040010          ADD      r0,r4,#0x10
002d9a  2264              MOVS     r2,#0x64
002d9c  2100              MOVS     r1,#0
002d9e  f7fffffe          BL       gran
                  |L1.11682|
;;;5035        }
;;;5036   
;;;5037   
;;;5038   //         
;;;5039   if(bat[in]._wrk==1)
002da2  7ba0              LDRB     r0,[r4,#0xe]
002da4  2801              CMP      r0,#1
002da6  d113              BNE      |L1.11728|
;;;5040   	{
;;;5041   	if(bat[in]._Iintegr<36000)
002da8  8ba0              LDRH     r0,[r4,#0x1c]
002daa  4540              CMP      r0,r8
002dac  d20f              BCS      |L1.11726|
;;;5042   		{          
;;;5043   		bat[in]._Iintegr+=abs(bat[in]._Ib);
002dae  f9b40008          LDRSH    r0,[r4,#8]
002db2  f7fffffe          BL       abs
002db6  8ba1              LDRH     r1,[r4,#0x1c]
002db8  4408              ADD      r0,r0,r1
002dba  b280              UXTH     r0,r0
002dbc  83a0              STRH     r0,[r4,#0x1c]
;;;5044   		if(bat[in]._Iintegr>=36000)
002dbe  4540              CMP      r0,r8
002dc0  d306              BCC      |L1.11728|
;;;5045   			{
;;;5046   			bat[in]._Iintegr=0;		//  
002dc2  83a7              STRH     r7,[r4,#0x1c]
;;;5047   			bat[in]._Iintegr_++;	//  
002dc4  8be0              LDRH     r0,[r4,#0x1e]
002dc6  f1000001          ADD      r0,r0,#1
002dca  83e0              STRH     r0,[r4,#0x1e]
002dcc  e000              B        |L1.11728|
                  |L1.11726|
;;;5048   			}
;;;5049   		}
;;;5050   	else 
;;;5051   		{
;;;5052   		bat[in]._Iintegr=0;
002dce  83a7              STRH     r7,[r4,#0x1c]
                  |L1.11728|
;;;5053   		}	
;;;5054   	} 
;;;5055   	    
;;;5056   //
;;;5057   if((bat[in]._Tb>TBATSIGN)&&(!bat[in]._nd))	
002dd0  49ef              LDR      r1,|L1.12688|
002dd2  f9b4000a          LDRSH    r0,[r4,#0xa]
002dd6  f9b11000          LDRSH    r1,[r1,#0]  ; TBATSIGN
002dda  4288              CMP      r0,r1
002ddc  dd01              BLE      |L1.11746|
002dde  7b20              LDRB     r0,[r4,#0xc]
002de0  b3e8              CBZ      r0,|L1.11870|
                  |L1.11746|
;;;5058   	{
;;;5059   	bat[in]._sign_temper_cnt++;
;;;5060   	}
;;;5061   else 
;;;5062   	{
;;;5063   	bat[in]._sign_temper_cnt--;
002de2  f8b40040          LDRH     r0,[r4,#0x40]
002de6  f1a00001          SUB      r0,r0,#1
002dea  f8a40040          STRH     r0,[r4,#0x40]
                  |L1.11758|
;;;5064   	}
;;;5065   
;;;5066   gran(&bat[in]._sign_temper_cnt,0,600);
002dee  f44f7916          MOV      r9,#0x258
002df2  f1040040          ADD      r0,r4,#0x40
002df6  464a              MOV      r2,r9
002df8  2100              MOVS     r1,#0
002dfa  f7fffffe          BL       gran
;;;5067   if(bat[in]._sign_temper_cnt>=590)	bat[in]._temper_stat|=(1<<0);
002dfe  f9b40040          LDRSH    r0,[r4,#0x40]
002e02  f240264e          MOV      r6,#0x24e
002e06  42b0              CMP      r0,r6
002e08  db05              BLT      |L1.11798|
002e0a  f894103f          LDRB     r1,[r4,#0x3f]
002e0e  f0410101          ORR      r1,r1,#1
002e12  f884103f          STRB     r1,[r4,#0x3f]
                  |L1.11798|
;;;5068   if(bat[in]._sign_temper_cnt<=10)	bat[in]._temper_stat&=~(1<<0);
002e16  280a              CMP      r0,#0xa
002e18  dc05              BGT      |L1.11814|
002e1a  f894003f          LDRB     r0,[r4,#0x3f]
002e1e  f0200001          BIC      r0,r0,#1
002e22  f884003f          STRB     r0,[r4,#0x3f]
                  |L1.11814|
;;;5069   
;;;5070   
;;;5071   if((bat[in]._Tb>TBATMAX)&&(!bat[in]._nd))	
002e26  49db              LDR      r1,|L1.12692|
002e28  f9b4000a          LDRSH    r0,[r4,#0xa]
002e2c  f9b11000          LDRSH    r1,[r1,#0]  ; TBATMAX
002e30  4288              CMP      r0,r1
002e32  dd01              BLE      |L1.11832|
002e34  7b20              LDRB     r0,[r4,#0xc]
002e36  b3a0              CBZ      r0,|L1.11938|
                  |L1.11832|
;;;5072   	{
;;;5073   	bat[in]._max_temper_cnt++;
;;;5074   	}
;;;5075   else 
;;;5076   	{
;;;5077   	bat[in]._max_temper_cnt--;
002e38  f8b40042          LDRH     r0,[r4,#0x42]
002e3c  f1a00001          SUB      r0,r0,#1
002e40  f8a40042          STRH     r0,[r4,#0x42]
                  |L1.11844|
;;;5078   	}
;;;5079   
;;;5080   gran(&bat[in]._max_temper_cnt,0,600);
002e44  f1040042          ADD      r0,r4,#0x42
002e48  464a              MOV      r2,r9
002e4a  2100              MOVS     r1,#0
002e4c  f7fffffe          BL       gran
;;;5081   if(bat[in]._max_temper_cnt>=590)	bat[in]._temper_stat|=(1<<1);
002e50  f9b40042          LDRSH    r0,[r4,#0x42]
002e54  42b0              CMP      r0,r6
002e56  db07              BLT      |L1.11880|
002e58  f894103f          LDRB     r1,[r4,#0x3f]
002e5c  e000              B        |L1.11872|
                  |L1.11870|
002e5e  e021              B        |L1.11940|
                  |L1.11872|
002e60  f0410102          ORR      r1,r1,#2
002e64  f884103f          STRB     r1,[r4,#0x3f]
                  |L1.11880|
;;;5082   if(bat[in]._max_temper_cnt<=10)	bat[in]._temper_stat&=~(1<<1);
002e68  280a              CMP      r0,#0xa
002e6a  dc05              BGT      |L1.11896|
002e6c  f894003f          LDRB     r0,[r4,#0x3f]
002e70  f0200002          BIC      r0,r0,#2
002e74  f884003f          STRB     r0,[r4,#0x3f]
                  |L1.11896|
;;;5083   
;;;5084   
;;;5085   
;;;5086   //  
;;;5087   if(bat[in]._resurs_cnt<36000)
002e78  6c60              LDR      r0,[r4,#0x44]
002e7a  4540              CMP      r0,r8
002e7c  da20              BGE      |L1.11968|
;;;5088   	{               
;;;5089   	bat[in]._resurs_cnt++;
002e7e  f1000001          ADD      r0,r0,#1
002e82  6460              STR      r0,[r4,#0x44]
;;;5090   	if(bat[in]._resurs_cnt>=36000)
002e84  4540              CMP      r0,r8
002e86  db1c              BLT      |L1.11970|
;;;5091   		{
;;;5092   		bat[in]._resurs_cnt=0;
002e88  6467              STR      r7,[r4,#0x44]
;;;5093   		lc640_write_int(ADR_EE_BAT_RESURS[in],lc640_read_int(ADR_EE_BAT_RESURS[in])+1);
002e8a  4ec3              LDR      r6,|L1.12696|
002e8c  f8360015          LDRH     r0,[r6,r5,LSL #1]
002e90  f7fffffe          BL       lc640_read_int
002e94  1c40              ADDS     r0,r0,#1
002e96  b201              SXTH     r1,r0
002e98  f9360015          LDRSH    r0,[r6,r5,LSL #1]
002e9c  f7fffffe          BL       lc640_write_int
002ea0  e00f              B        |L1.11970|
                  |L1.11938|
002ea2  e006              B        |L1.11954|
                  |L1.11940|
002ea4  f8b40040          LDRH     r0,[r4,#0x40]         ;5059
002ea8  f1000001          ADD      r0,r0,#1              ;5059
002eac  f8a40040          STRH     r0,[r4,#0x40]         ;5059
002eb0  e79d              B        |L1.11758|
                  |L1.11954|
002eb2  f8b40042          LDRH     r0,[r4,#0x42]         ;5073
002eb6  f1000001          ADD      r0,r0,#1              ;5073
002eba  f8a40042          STRH     r0,[r4,#0x42]         ;5073
002ebe  e7c1              B        |L1.11844|
                  |L1.11968|
;;;5094   		}
;;;5095   	}
;;;5096   else bat[in]._resurs_cnt=0;
002ec0  6467              STR      r7,[r4,#0x44]
                  |L1.11970|
;;;5097   
;;;5098   
;;;5099   #ifndef UKU_220_V2
;;;5100   #ifndef UKU_GLONASS
;;;5101   #ifndef UKU_6U
;;;5102   //#ifndef UKU_220
;;;5103   if(UBM_AV)
002ec2  4eb6              LDR      r6,|L1.12700|
002ec4  8830              LDRH     r0,[r6,#0]  ; UBM_AV
002ec6  2800              CMP      r0,#0
002ec8  d05e              BEQ      |L1.12168|
;;;5104        {
;;;5105        signed short temp_SS;
;;;5106   #ifdef UKU_220
;;;5107   temp_SS=bat[in]._Ub/2;
;;;5108   #else
;;;5109        if(U0B<600)
002eca  48b5              LDR      r0,|L1.12704|
002ecc  f9b00000          LDRSH    r0,[r0,#0]  ; U0B
002ed0  4548              CMP      r0,r9
002ed2  da08              BGE      |L1.12006|
;;;5110             {
;;;5111             temp_SS=bat[in]._Ub/4;
002ed4  f9b40002          LDRSH    r0,[r4,#2]
002ed8  ea4f71e0          ASR      r1,r0,#31
002edc  eb007091          ADD      r0,r0,r1,LSR #30
002ee0  ea4f00a0          ASR      r0,r0,#2
002ee4  e006              B        |L1.12020|
                  |L1.12006|
;;;5112             }
;;;5113        else temp_SS=bat[in]._Ub/5;
002ee6  f9b40002          LDRSH    r0,[r4,#2]
002eea  f04f0105          MOV      r1,#5
002eee  fb90f0f1          SDIV     r0,r0,r1
002ef2  b200              SXTH     r0,r0
                  |L1.12020|
;;;5114   	
;;;5115   	temp_SS+=temp_SS;     
002ef4  ea4f0040          LSL      r0,r0,#1
;;;5116   #endif
;;;5117        temp_SS-=(bat[in]._Ubm);
002ef8  88a1              LDRH     r1,[r4,#4]
002efa  eba00001          SUB      r0,r0,r1
002efe  b200              SXTH     r0,r0
;;;5118   
;;;5119        temp_SS=abs(temp_SS);
002f00  f7fffffe          BL       abs
;;;5120   
;;;5121        temp_SS*=10;
002f04  eb000080          ADD      r0,r0,r0,LSL #2
002f08  ea4f0040          LSL      r0,r0,#1
002f0c  b200              SXTH     r0,r0
;;;5122   
;;;5123        temp_SS/=12;
002f0e  f04f010c          MOV      r1,#0xc
002f12  fb90f0f1          SDIV     r0,r0,r1
002f16  b200              SXTH     r0,r0
;;;5124   
;;;5125        bat[in]._dUbm=temp_SS;
002f18  80e0              STRH     r0,[r4,#6]
;;;5126   
;;;5127   
;;;5128        if(	(bat[in]._dUbm>UBM_AV) &&
002f1a  f9b61000          LDRSH    r1,[r6,#0]  ; UBM_AV
002f1e  4288              CMP      r0,r1
002f20  dd34              BLE      |L1.12172|
;;;5129   		(abs(bat[in]._Ib)<(5*IKB)) &&
002f22  f9b40008          LDRSH    r0,[r4,#8]
002f26  f7fffffe          BL       abs
002f2a  4601              MOV      r1,r0
002f2c  489d              LDR      r0,|L1.12708|
002f2e  f9b00000          LDRSH    r0,[r0,#0]  ; IKB
002f32  eb000080          ADD      r0,r0,r0,LSL #2
002f36  4281              CMP      r1,r0
002f38  da28              BGE      |L1.12172|
;;;5130   		(bat[in]._Ub>((short)(((long)USIGN*115)/100))) &&
002f3a  489b              LDR      r0,|L1.12712|
002f3c  2173              MOVS     r1,#0x73
002f3e  f9b00000          LDRSH    r0,[r0,#0]  ; USIGN
002f42  4348              MULS     r0,r1,r0
002f44  fb90f0fb          SDIV     r0,r0,r11
002f48  f9b41002          LDRSH    r1,[r4,#2]
002f4c  b200              SXTH     r0,r0
002f4e  4288              CMP      r0,r1
002f50  da1c              BGE      |L1.12172|
;;;5131   		(!(bat[in]._av & 2))  )
002f52  f894003d          LDRB     r0,[r4,#0x3d]
002f56  0780              LSLS     r0,r0,#30
002f58  d418              BMI      |L1.12172|
;;;5132   		{
;;;5133   		bat[in]._cnt_as++;
002f5a  f8b40048          LDRH     r0,[r4,#0x48]
002f5e  f1000001          ADD      r0,r0,#1
002f62  b200              SXTH     r0,r0
002f64  f8a40048          STRH     r0,[r4,#0x48]
;;;5134   		if(bat[in]._cnt_as==3000)
002f68  f5a06130          SUB      r1,r0,#0xb00
002f6c  39b8              SUBS     r1,r1,#0xb8
002f6e  d103              BNE      |L1.12152|
;;;5135   			{
;;;5136   			avar_bat_as_hndl(in,1);
002f70  2101              MOVS     r1,#1
002f72  4628              MOV      r0,r5
002f74  f7fffffe          BL       avar_bat_as_hndl
                  |L1.12152|
;;;5137   			}
;;;5138   		if(bat[in]._cnt_as>=3005) bat[in]._cnt_as=3005;
002f78  f9b41048          LDRSH    r1,[r4,#0x48]
002f7c  f64030bd          MOV      r0,#0xbbd
002f80  4281              CMP      r1,r0
002f82  db01              BLT      |L1.12168|
002f84  f8a40048          STRH     r0,[r4,#0x48]
                  |L1.12168|
;;;5139   		}
;;;5140   	else 
;;;5141   		{
;;;5142   		bat[in]._cnt_as=0;
;;;5143   		}
;;;5144        
;;;5145        }
;;;5146   #endif 
;;;5147   #endif 
;;;5148   #endif
;;;5149   
;;;5150   }
002f88  e8bd9ffc          POP      {r2-r12,pc}
                  |L1.12172|
002f8c  f8a47048          STRH     r7,[r4,#0x48]         ;5142
002f90  e7fa              B        |L1.12168|
;;;5151   
                          ENDP

                  u_necc_hndl PROC
;;;5158   //-----------------------------------------------
;;;5159   void u_necc_hndl(void)
002f92  b538              PUSH     {r3-r5,lr}
;;;5160   {
;;;5161   signed long temp_L;
;;;5162   signed long temp_SL;
;;;5163   //signed short temp_SS;
;;;5164   signed short t[2];
;;;5165   char i;
;;;5166   
;;;5167   //temp_SS=0;
;;;5168   
;;;5169   #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;5170   
;;;5171   if(!TERMOKOMPENS)
002f94  4885              LDR      r0,|L1.12716|
;;;5172   	{
;;;5173   	//u_necc=U0B;
;;;5174   	u_necc=UB20;
002f96  4c87              LDR      r4,|L1.12724|
002f98  8801              LDRH     r1,[r0,#0]            ;5171  ; TERMOKOMPENS
002f9a  4885              LDR      r0,|L1.12720|
002f9c  f9b02000          LDRSH    r2,[r0,#0]
002fa0  b139              CBZ      r1,|L1.12210|
;;;5175   	}
;;;5176   else
;;;5177   	{
;;;5178   	if(ND_EXT[0])t[0]=20;
002fa2  4885              LDR      r0,|L1.12728|
002fa4  6800              LDR      r0,[r0,#0]  ; ND_EXT
002fa6  b130              CBZ      r0,|L1.12214|
002fa8  f04f0014          MOV      r0,#0x14
002fac  f8ad0000          STRH     r0,[sp,#0]
002fb0  e005              B        |L1.12222|
                  |L1.12210|
002fb2  8022              STRH     r2,[r4,#0]            ;5174
002fb4  e027              B        |L1.12294|
                  |L1.12214|
;;;5179   	else t[0]=t_ext[0];
002fb6  4881              LDR      r0,|L1.12732|
002fb8  8800              LDRH     r0,[r0,#0]  ; t_ext
002fba  f8ad0000          STRH     r0,[sp,#0]
                  |L1.12222|
;;;5180   
;;;5181   	mat_temper=t[0];
002fbe  4b80              LDR      r3,|L1.12736|
002fc0  f9bd1000          LDRSH    r1,[sp,#0]
002fc4  6019              STR      r1,[r3,#0]  ; mat_temper
;;;5182   			
;;;5183   	if(mat_temper<0)temp_SL=UB0; 
002fc6  487f              LDR      r0,|L1.12740|
002fc8  2900              CMP      r1,#0
002fca  f9b00000          LDRSH    r0,[r0,#0]
002fce  db12              BLT      |L1.12278|
;;;5184   	else 
;;;5185   		{
;;;5186   		if(mat_temper>40)mat_temper=40; 
002fd0  2928              CMP      r1,#0x28
002fd2  dd02              BLE      |L1.12250|
002fd4  f04f0128          MOV      r1,#0x28
002fd8  6019              STR      r1,[r3,#0]  ; mat_temper
                  |L1.12250|
;;;5187   		temp_SL=(UB20-UB0)*10;
002fda  eba20100          SUB      r1,r2,r0
002fde  eb010181          ADD      r1,r1,r1,LSL #2
002fe2  ea4f0141          LSL      r1,r1,#1
;;;5188   		temp_SL*=mat_temper;
002fe6  681a              LDR      r2,[r3,#0]  ; mat_temper
002fe8  fb01f102          MUL      r1,r1,r2
;;;5189   		temp_SL/=200;
002fec  f04f02c8          MOV      r2,#0xc8
002ff0  fb91f1f2          SDIV     r1,r1,r2
;;;5190   		temp_SL+=UB0;
002ff4  4408              ADD      r0,r0,r1
                  |L1.12278|
;;;5191   		}
;;;5192   	if(spc_stat==spcVZ)
002ff6  4974              LDR      r1,|L1.12744|
002ff8  7cc9              LDRB     r1,[r1,#0x13]  ; spc_stat
002ffa  2902              CMP      r1,#2
002ffc  d102              BNE      |L1.12292|
;;;5193   		{
;;;5194   		temp_SL=UVZ;
002ffe  4873              LDR      r0,|L1.12748|
003000  f9b00000          LDRSH    r0,[r0,#0]  ; UVZ
                  |L1.12292|
;;;5195   		}
;;;5196   	u_necc=(unsigned int)temp_SL;
003004  8020              STRH     r0,[r4,#0]
                  |L1.12294|
;;;5197   	///u_necc=3456;
;;;5198   	}  
;;;5199   
;;;5200   //u_necc=2355;
;;;5201   
;;;5202   if(speedChIsOn)
003006  4872              LDR      r0,|L1.12752|
003008  8800              LDRH     r0,[r0,#0]  ; speedChIsOn
00300a  b110              CBZ      r0,|L1.12306|
;;;5203   	{
;;;5204   	u_necc=speedChrgVolt;
00300c  4871              LDR      r0,|L1.12756|
00300e  8800              LDRH     r0,[r0,#0]  ; speedChrgVolt
003010  8020              STRH     r0,[r4,#0]
                  |L1.12306|
;;;5205   	}
;;;5206   
;;;5207   if(mess_find_unvol(MESS2UNECC_HNDL))
003012  20be              MOVS     r0,#0xbe
003014  f7fffffe          BL       mess_find_unvol
003018  b128              CBZ      r0,|L1.12326|
;;;5208   	{		
;;;5209   	if(mess_data[0]==PARAM_UNECC_SET)
00301a  486f              LDR      r0,|L1.12760|
00301c  6801              LDR      r1,[r0,#0]  ; mess_data
00301e  29bf              CMP      r1,#0xbf
003020  d101              BNE      |L1.12326|
;;;5210   		{
;;;5211   		u_necc=mess_data[1];
003022  6840              LDR      r0,[r0,#4]  ; mess_data
003024  8020              STRH     r0,[r4,#0]
                  |L1.12326|
;;;5212   		}		
;;;5213   	}
;;;5214   #endif
;;;5215   
;;;5216   
;;;5217   #ifndef UKU_220_IPS_TERMOKOMPENSAT
;;;5218   
;;;5219   #ifndef UKU_TELECORE2015
;;;5220   if(unh_cnt0<10)
;;;5221   	{
;;;5222   	unh_cnt0++;
;;;5223   	if(unh_cnt0>=10)
;;;5224   		{
;;;5225   		unh_cnt0=0;
;;;5226   		b1Hz_unh=1;
;;;5227   		}
;;;5228   	}
;;;5229   
;;;5230   if(unh_cnt1<5)
;;;5231   	{
;;;5232   	unh_cnt1++;
;;;5233   	if(unh_cnt1==5)
;;;5234   		{
;;;5235   		unh_cnt1=0;
;;;5236   //		b2Hz_unh=1;
;;;5237   		}
;;;5238   	} 
;;;5239   
;;;5240   
;;;5241   
;;;5242   if(mess_find_unvol(MESS2UNECC_HNDL))
;;;5243   	{		
;;;5244   	if(mess_data[0]==PARAM_UNECC_SET)
;;;5245   		{
;;;5246   		u_necc=mess_data[1];
;;;5247   		}		
;;;5248   	}
;;;5249   
;;;5250   
;;;5251   else if(b1Hz_unh)
;;;5252   	{
;;;5253   	
;;;5254   	if((BAT_IS_ON[0]!=bisON) && (BAT_IS_ON[1]!=bisON))
;;;5255   		{
;;;5256   		
;;;5257   		u_necc=U0B;
;;;5258   		}
;;;5259   	else 
;;;5260   		{
;;;5261   		if(BAT_TYPE==0) //  
;;;5262   			{
;;;5263   			for(i=0;i<2;i++)
;;;5264   				{
;;;5265   				if(BAT_IS_ON[i]==bisON)
;;;5266   					{
;;;5267   					if(bat[i]._nd)t[i]=20;
;;;5268   					else t[i]=bat[i]._Tb;
;;;5269   					}
;;;5270   				else
;;;5271   					{
;;;5272   					t[i]=-20;
;;;5273   					}
;;;5274   				}
;;;5275   			if(t[0]>t[1])mat_temper=t[0];
;;;5276   			else mat_temper=t[1];
;;;5277   			
;;;5278   		
;;;5279   			if(mat_temper<0)temp_SL=UB0; 
;;;5280   			else 
;;;5281   				{
;;;5282   				if(mat_temper>40)mat_temper=40; 
;;;5283   				temp_SL=(UB20-UB0)*10;
;;;5284   				temp_SL*=mat_temper;
;;;5285   				temp_SL/=200;
;;;5286   				temp_SL+=UB0;
;;;5287   				}
;;;5288   			if(spc_stat==spcVZ)
;;;5289   				{
;;;5290   				temp_SL=UVZ;
;;;5291   				}
;;;5292   			u_necc=(unsigned int)temp_SL;
;;;5293   			}
;;;5294   		else if(BAT_TYPE==1) //  
;;;5295   			{
;;;5296   			u_necc=U0B;
;;;5297   					
;;;5298   			u_necc=bat[0]._Ub+10;
;;;5299   
;;;5300   			
;;;5301   			if(spc_stat==spcVZ)
;;;5302   				{
;;;5303   				u_necc=UVZ;
;;;5304   				}
;;;5305   			if(u_necc>=UB0) u_necc=UB0;
;;;5306   			if(u_necc>=UB20) u_necc=UB20;
;;;5307   			}
;;;5308   		}  
;;;5309   	}
;;;5310   #endif
;;;5311   #ifdef UKU_TELECORE2015
;;;5312   
;;;5313   if(unh_cnt0<10)
;;;5314   	{
;;;5315   	unh_cnt0++;
;;;5316   	if(unh_cnt0>=10)
;;;5317   		{
;;;5318   		unh_cnt0=0;
;;;5319   		b1Hz_unh=1;
;;;5320   		}
;;;5321   	}
;;;5322   
;;;5323   if(unh_cnt1<5)
;;;5324   	{
;;;5325   	unh_cnt1++;
;;;5326   	if(unh_cnt1==5)
;;;5327   		{
;;;5328   		unh_cnt1=0;
;;;5329   //		b2Hz_unh=1;
;;;5330   		}
;;;5331   	} 
;;;5332   
;;;5333   
;;;5334   
;;;5335   if(mess_find_unvol(MESS2UNECC_HNDL))
;;;5336   	{		
;;;5337   	if(mess_data[0]==PARAM_UNECC_SET)
;;;5338   		{
;;;5339   		u_necc=mess_data[1];
;;;5340   		}		
;;;5341   	}
;;;5342   
;;;5343   
;;;5344   else if(b1Hz_unh)
;;;5345   	{
;;;5346   	b1Hz_unh=0;
;;;5347   
;;;5348   	if(BAT_TYPE==0)
;;;5349   		{
;;;5350   		if(bat[0]._nd)mat_temper=20;
;;;5351   		else mat_temper=bat[0]._Tb;
;;;5352   
;;;5353   			
;;;5354   		if(mat_temper<0)temp_SL=UB0; 
;;;5355   		else 
;;;5356   			{
;;;5357   			if(mat_temper>40)mat_temper=40; 
;;;5358   			temp_SL=(UB20-UB0)*10;
;;;5359   			temp_SL*=mat_temper;
;;;5360   			temp_SL/=200;
;;;5361   			temp_SL+=UB0;
;;;5362   			}
;;;5363   		if(spc_stat==spcVZ)
;;;5364   			{
;;;5365   			temp_SL=UVZ;
;;;5366   			}
;;;5367   		u_necc=(unsigned int)temp_SL;
;;;5368   	///u_necc=3456;
;;;5369   		}
;;;5370   	else if(BAT_TYPE==1)
;;;5371   		{
;;;5372   		
;;;5373   		gran(&DU_LI_BAT,1,30);
;;;5374   		u_necc=li_bat._Ub+DU_LI_BAT;
;;;5375   		gran(&u_necc,0,UB0);
;;;5376   		gran(&u_necc,0,UB20);
;;;5377   		gran(&u_necc,0,540);		
;;;5378   
;;;5379   
;;;5380   		if(li_bat._batStat!=bsOK)
;;;5381   			{
;;;5382   			u_necc=U0B;
;;;5383   			}
;;;5384   		if(spc_stat==spcVZ)
;;;5385   			{
;;;5386   			u_necc=UVZ;
;;;5387   			}
;;;5388   		/* 
;;;5389   		u_necc=U0B;
;;;5390   		
;;;5391   
;;;5392   	
;;;5393   		u_necc=UB0;
;;;5394   		u_necc=li_bat._Ub+10;
;;;5395   		if((li_bat._Ub<450)||(li_bat._Ub>550))
;;;5396   			{
;;;5397   			lakb_error_cnt++;
;;;5398   			if(lakb_error_cnt>=30)
;;;5399   				{
;;;5400   				lakb_error_cnt=30;
;;;5401   				u_necc=U0B;
;;;5402   				}
;;;5403   			}
;;;5404   		else lakb_error_cnt=0;*/
;;;5405   		}
;;;5406   	else if(BAT_TYPE==2)
;;;5407   		{
;;;5408   		u_necc=U0B;
;;;5409   		
;;;5410   		if(spc_stat==spcVZ)
;;;5411   			{
;;;5412   			u_necc=UVZ;
;;;5413   			}
;;;5414   	
;;;5415   		u_necc=UB0;
;;;5416   		}
;;;5417   
;;;5418   	else if(BAT_TYPE==3)
;;;5419   		{
;;;5420   		u_necc=U0B;
;;;5421   		
;;;5422   		if(spc_stat==spcVZ)
;;;5423   			{
;;;5424   			u_necc=UVZ;
;;;5425   			}
;;;5426   
;;;5427   		gran(&DU_LI_BAT,1,30);
;;;5428   
;;;5429   
;;;5430   		if(lakbNotErrorNum==0)
;;;5431   			{
;;;5432   			u_necc=U0B;
;;;5433   			}
;;;5434   		else 
;;;5435   			{
;;;5436   			signed short i;
;;;5437   			for(i=(NUMBAT_TELECORE-1);i>=0;i--)
;;;5438   				{
;;;5439   				if(lakb[i]._communicationFullErrorStat==0)u_necc=lakb[i]._tot_bat_volt+DU_LI_BAT;
;;;5440   				}
;;;5441   			}
;;;5442   		gran(&u_necc,0,UB0);
;;;5443   		gran(&u_necc,0,UB20);
;;;5444   		gran(&u_necc,0,540);
;;;5445   		}
;;;5446   	}
;;;5447   
;;;5448   #endif 
;;;5449   
;;;5450   //u_necc=2356;
;;;5451   #endif//gran(&u_necc,400,UMAX);
;;;5452   
;;;5453   temp_L=(signed long) u_necc;
003026  f9b40000          LDRSH    r0,[r4,#0]  ; u_necc
;;;5454   temp_L*=98L;
00302a  f04f0162          MOV      r1,#0x62
00302e  fb00f101          MUL      r1,r0,r1
;;;5455   temp_L/=100L;
003032  f04f0264          MOV      r2,#0x64
003036  fb91f1f2          SDIV     r1,r1,r2
;;;5456   u_necc_dn=(signed short)temp_L;
00303a  4b68              LDR      r3,|L1.12764|
00303c  8019              STRH     r1,[r3,#0]
;;;5457   
;;;5458   temp_L=(signed long) u_necc;
;;;5459   temp_L*=102L;
00303e  f04f0166          MOV      r1,#0x66
003042  fb00f001          MUL      r0,r0,r1
;;;5460   temp_L/=100L;
003046  fb90f0f2          SDIV     r0,r0,r2
;;;5461   u_necc_up=(signed short)temp_L;
00304a  4965              LDR      r1,|L1.12768|
00304c  8008              STRH     r0,[r1,#0]
;;;5462   
;;;5463   
;;;5464   }
00304e  bd38              POP      {r3-r5,pc}
;;;5465   
                          ENDP

                  num_necc_hndl PROC
;;;5467   //-----------------------------------------------
;;;5468   void num_necc_hndl(void)
003050  e92d41f0          PUSH     {r4-r8,lr}
;;;5469   {
;;;5470   
;;;5471   static short num_necc_block_cnt;
;;;5472   if(num_necc_block_cnt) num_necc_block_cnt--;
003054  4c5c              LDR      r4,|L1.12744|
003056  f9b40024          LDRSH    r0,[r4,#0x24]  ; num_necc_block_cnt
00305a  b110              CBZ      r0,|L1.12386|
00305c  f1a00001          SUB      r0,r0,#1
003060  84a0              STRH     r0,[r4,#0x24]
                  |L1.12386|
;;;5473   
;;;5474   Isumm_=Isumm;
003062  4860              LDR      r0,|L1.12772|
003064  4d60              LDR      r5,|L1.12776|
003066  8800              LDRH     r0,[r0,#0]  ; Isumm
003068  8028              STRH     r0,[r5,#0]
;;;5475   
;;;5476   if(bat[0]._Ib<0) Isumm_+=(abs(bat[0]._Ib))/10;
00306a  4f60              LDR      r7,|L1.12780|
00306c  260a              MOVS     r6,#0xa
00306e  f9b70008          LDRSH    r0,[r7,#8]  ; bat
003072  2800              CMP      r0,#0
003074  da06              BGE      |L1.12420|
003076  f7fffffe          BL       abs
00307a  fb90f0f6          SDIV     r0,r0,r6
00307e  8829              LDRH     r1,[r5,#0]  ; Isumm_
003080  4408              ADD      r0,r0,r1
003082  8028              STRH     r0,[r5,#0]
                  |L1.12420|
;;;5477   if(bat[1]._Ib<0) Isumm_+=(abs(bat[1]._Ib))/10;
003084  f9b70054          LDRSH    r0,[r7,#0x54]  ; bat
003088  2800              CMP      r0,#0
00308a  da06              BGE      |L1.12442|
00308c  f7fffffe          BL       abs
003090  fb90f0f6          SDIV     r0,r0,r6
003094  8829              LDRH     r1,[r5,#0]  ; Isumm_
003096  4408              ADD      r0,r0,r1
003098  8028              STRH     r0,[r5,#0]
                  |L1.12442|
;;;5478   
;;;5479   num_necc_up=(Isumm_/((signed short)IMAX))+1;
00309a  4855              LDR      r0,|L1.12784|
00309c  f9b51000          LDRSH    r1,[r5,#0]  ; Isumm_
0030a0  f9b00000          LDRSH    r0,[r0,#0]  ; IMAX
0030a4  fb91f0f0          SDIV     r0,r1,r0
0030a8  f1000001          ADD      r0,r0,#1
0030ac  b2c0              UXTB     r0,r0
0030ae  73e0              STRB     r0,[r4,#0xf]
;;;5480   ////Isumm_+=(signed short)((IMAX*(10-KIMAX))/10);
;;;5481   ////Isumm_+=(signed short)(IMAX-IMIN);
;;;5482   
;;;5483   num_necc_down=(Isumm_/((signed short)IMIN))+1;
0030b0  4a50              LDR      r2,|L1.12788|
0030b2  f9b22000          LDRSH    r2,[r2,#0]  ; IMIN
0030b6  fb91f1f2          SDIV     r1,r1,r2
0030ba  f1010101          ADD      r1,r1,#1
0030be  b2c9              UXTB     r1,r1
0030c0  7421              STRB     r1,[r4,#0x10]
;;;5484   
;;;5485   if(num_necc_up>num_necc)
0030c2  4b4d              LDR      r3,|L1.12792|
;;;5486   	{
;;;5487   	num_necc=num_necc_up;
;;;5488   	num_necc_block_cnt=60;
0030c4  f04f053c          MOV      r5,#0x3c
0030c8  f9b32000          LDRSH    r2,[r3,#0]            ;5485  ; num_necc
0030cc  4290              CMP      r0,r2                 ;5485
0030ce  dd02              BLE      |L1.12502|
0030d0  8018              STRH     r0,[r3,#0]            ;5487
0030d2  84a5              STRH     r5,[r4,#0x24]
0030d4  e005              B        |L1.12514|
                  |L1.12502|
;;;5489   	}
;;;5490   else if(num_necc_down<num_necc)
0030d6  4291              CMP      r1,r2
0030d8  da03              BGE      |L1.12514|
;;;5491   	{
;;;5492   	if(!num_necc_block_cnt)
0030da  8ca0              LDRH     r0,[r4,#0x24]  ; num_necc_block_cnt
0030dc  b908              CBNZ     r0,|L1.12514|
;;;5493   		{
;;;5494   		num_necc=num_necc_down;
0030de  8019              STRH     r1,[r3,#0]
;;;5495   		num_necc_block_cnt=60;
0030e0  84a5              STRH     r5,[r4,#0x24]
                  |L1.12514|
;;;5496   		}
;;;5497   	}
;;;5498   
;;;5499   if(PAR) num_necc=NUMIST;
0030e2  4846              LDR      r0,|L1.12796|
0030e4  8801              LDRH     r1,[r0,#0]  ; PAR
0030e6  4846              LDR      r0,|L1.12800|
0030e8  b109              CBZ      r1,|L1.12526|
0030ea  8801              LDRH     r1,[r0,#0]  ; NUMIST
0030ec  8019              STRH     r1,[r3,#0]
                  |L1.12526|
;;;5500   
;;;5501   gran(&num_necc,1,NUMIST);
0030ee  f9b02000          LDRSH    r2,[r0,#0]  ; NUMIST
0030f2  e8bd41f0          POP      {r4-r8,lr}
0030f6  2101              MOVS     r1,#1
0030f8  483f              LDR      r0,|L1.12792|
0030fa  f7ffbffe          B.W      gran
;;;5502   
;;;5503   }
;;;5504   
                          ENDP

                  cntrl_hndl PROC
;;;5507   //-----------------------------------------------
;;;5508   void cntrl_hndl(void)
0030fe  e92d5ff0          PUSH     {r4-r12,lr}
;;;5509   {
;;;5510   
;;;5511   IZMAX_=IZMAX;
003102  4840              LDR      r0,|L1.12804|
003104  4c30              LDR      r4,|L1.12744|
003106  f9b01000          LDRSH    r1,[r0,#0]  ; IZMAX
00310a  8721              STRH     r1,[r4,#0x38]
;;;5512   
;;;5513   if(speedChIsOn)IZMAX_=speedChrgCurr;
00310c  4830              LDR      r0,|L1.12752|
00310e  8800              LDRH     r0,[r0,#0]  ; speedChIsOn
003110  b110              CBZ      r0,|L1.12568|
003112  483d              LDR      r0,|L1.12808|
003114  8800              LDRH     r0,[r0,#0]  ; speedChrgCurr
003116  8720              STRH     r0,[r4,#0x38]
                  |L1.12568|
;;;5514   
;;;5515   if(cntrl_stat_blok_cnt)cntrl_stat_blok_cnt--;
003118  f9b4005a          LDRSH    r0,[r4,#0x5a]  ; cntrl_stat_blok_cnt
00311c  b118              CBZ      r0,|L1.12582|
00311e  f1a00001          SUB      r0,r0,#1
003122  f8a4005a          STRH     r0,[r4,#0x5a]
                  |L1.12582|
;;;5516   if(cntrl_stat_blok_cnt_)cntrl_stat_blok_cnt_--;
003126  f9b4005c          LDRSH    r0,[r4,#0x5c]  ; cntrl_stat_blok_cnt_
00312a  b118              CBZ      r0,|L1.12596|
00312c  f1a00001          SUB      r0,r0,#1
003130  f8a4005c          STRH     r0,[r4,#0x5c]
                  |L1.12596|
;;;5517   
;;;5518   if((bat[0]._temper_stat&0x03)||(bat[1]._temper_stat&0x03))IZMAX_=IZMAX/10;
003134  482d              LDR      r0,|L1.12780|
003136  f04f050a          MOV      r5,#0xa
00313a  f890203f          LDRB     r2,[r0,#0x3f]  ; bat
00313e  0792              LSLS     r2,r2,#30
003140  d103              BNE      |L1.12618|
003142  f890008b          LDRB     r0,[r0,#0x8b]  ; bat
003146  0780              LSLS     r0,r0,#30
003148  d002              BEQ      |L1.12624|
                  |L1.12618|
00314a  fb91f0f5          SDIV     r0,r1,r5
00314e  8720              STRH     r0,[r4,#0x38]
                  |L1.12624|
;;;5519   
;;;5520   
;;;5521   if(ch_cnt0<10)
003150  79a0              LDRB     r0,[r4,#6]  ; ch_cnt0
003152  2600              MOVS     r6,#0                 ;5513
;;;5522   	{
;;;5523   	ch_cnt0++;
;;;5524   	if(ch_cnt0>=10)
;;;5525   		{
;;;5526   		ch_cnt0=0;
;;;5527   		b1Hz_ch=1;
003154  2701              MOVS     r7,#1
003156  280a              CMP      r0,#0xa               ;5521
003158  d207              BCS      |L1.12650|
00315a  f1000001          ADD      r0,r0,#1              ;5523
00315e  b2c0              UXTB     r0,r0                 ;5523
003160  71a0              STRB     r0,[r4,#6]            ;5523
003162  280a              CMP      r0,#0xa               ;5524
003164  d301              BCC      |L1.12650|
003166  71a6              STRB     r6,[r4,#6]            ;5526
003168  71e7              STRB     r7,[r4,#7]
                  |L1.12650|
;;;5528   		}
;;;5529   	}
;;;5530   
;;;5531   
;;;5532   
;;;5533   
;;;5534   if(mess_find_unvol(MESS2CNTRL_HNDL))
00316a  20e1              MOVS     r0,#0xe1
00316c  f7fffffe          BL       mess_find_unvol
;;;5535   	{
;;;5536   	if(mess_data[0]==PARAM_CNTRL_STAT_PLUS)
;;;5537   		{
;;;5538   		cntrl_stat=cntrl_stat_old+mess_data[1];
;;;5539   		}
;;;5540   	else if(mess_data[0]==PARAM_CNTRL_STAT_MINUS)
;;;5541   		{
;;;5542   		cntrl_stat=cntrl_stat_old-mess_data[1];
;;;5543   		}
;;;5544   	else if(mess_data[0]==PARAM_CNTRL_STAT_STEP_DOWN)
;;;5545   		{
;;;5546   		cntrl_stat--;
;;;5547   
;;;5548   		if((cntrl_stat<=30)||(load_U<USIGN)) mess_send(MESS2KB_HNDL,PARAM_CNTRL_IS_DOWN,0,10);
003170  f8dfc098          LDR      r12,|L1.12812|
;;;5549   
;;;5550   		}
;;;5551   	else if(mess_data[0]==PARAM_CNTRL_STAT_SET)
;;;5552   		{
;;;5553   		cntrl_stat=mess_data[1];
;;;5554   		}
;;;5555   
;;;5556   	else if(mess_data[0]==PARAM_CNTRL_STAT_FAST_REG)
;;;5557   		{
;;;5558   		#ifdef UKU_220
;;;5559   		if(load_U>u_necc)
;;;5560   			{
;;;5561   			if(((load_U-u_necc)>40)&&(cntrl_stat>0))cntrl_stat-=5;
;;;5562   			else if((cntrl_stat)&&b1Hz_ch)cntrl_stat--;
;;;5563   			}
;;;5564   		else if(load_U<u_necc)
;;;5565   			{	
;;;5566   			if(((u_necc-load_U)>40)&&(cntrl_stat<1015))cntrl_stat+=5;
;;;5567   			else	if((cntrl_stat<1020)&&b1Hz_ch)cntrl_stat++;
;;;5568   			}
;;;5569   		#endif	
;;;5570   
;;;5571   		#ifndef UKU_220
;;;5572   
;;;5573   		#ifdef UKU_220_V2
;;;5574   		if(load_U>u_necc)
;;;5575   			{
;;;5576   			if(((load_U-u_necc)>40)&&(cntrl_stat>0))cntrl_stat-=5;
;;;5577   			else if((cntrl_stat)&&b1Hz_ch)cntrl_stat--;
;;;5578   			}
;;;5579   		else if(load_U<u_necc)
;;;5580   			{	
;;;5581   			if(((u_necc-load_U)>40)&&(cntrl_stat<1015))cntrl_stat+=5;
;;;5582   			else	if((cntrl_stat<1020)&&b1Hz_ch)cntrl_stat++;
;;;5583   			}
;;;5584   		#else
;;;5585   
;;;5586   		if(load_U>u_necc)
003174  4b0f              LDR      r3,|L1.12724|
;;;5587   			{
;;;5588   			if(((load_U-u_necc)>10)&&(cntrl_stat>0))cntrl_stat-=5;
;;;5589   			else if((cntrl_stat)&&b1Hz_ch)cntrl_stat--;
;;;5590   			}
;;;5591   		else if(load_U<u_necc)
;;;5592   			{	
;;;5593   			if(((u_necc-load_U)>10)&&(cntrl_stat<1015))cntrl_stat+=5;
;;;5594   			else	if((cntrl_stat<1020)&&b1Hz_ch)cntrl_stat++;
;;;5595   			}
;;;5596   		#endif	
;;;5597   		#endif
;;;5598   		 }
;;;5599   
;;;5600   	}
;;;5601   
;;;5602   else if((b1Hz_ch)&&((!bIBAT_SMKLBR)||(bps[8]._cnt>40)))
003176  f8df8098          LDR      r8,|L1.12816|
;;;5603   	{
;;;5604   	cntrl_stat_new=cntrl_stat_old;
;;;5605   	
;;;5606   	if((Ibmax/10)>(2*IZMAX_))
;;;5607   		{
;;;5608             if(cntrl_stat_blok_cnt)cntrl_stat_new--;
;;;5609   		else	cntrl_stat_new-=10;
;;;5610   		}		
;;;5611   	else if(((Ibmax/10)<(IZMAX_*2))&&(Ibmax>(IZMAX_*15)))
;;;5612   		{
;;;5613             if(cntrl_stat_blok_cnt)cntrl_stat_new--;
;;;5614             else	cntrl_stat_new-=3;
;;;5615   		}   
;;;5616   	else if((Ibmax<(IZMAX_*15))&&((Ibmax/10)>IZMAX_))
;;;5617   		{
;;;5618   		cntrl_stat_new--;
;;;5619   		}
;;;5620   		
;;;5621   	else if(load_U<u_necc)
;;;5622   		{
;;;5623   		if(load_U<(u_necc-(UB0-UB20)))
;;;5624   			{
;;;5625   			if(Ibmax<0)
;;;5626   				{
;;;5627                       if(cntrl_stat_blok_cnt)cntrl_stat_new++;
;;;5628   				else cntrl_stat_new+=10;
;;;5629   				}
;;;5630   			else if(Ibmax<(IZMAX_*5))
;;;5631   				{
;;;5632                       if(cntrl_stat_blok_cnt)cntrl_stat_new++;
;;;5633   				else	cntrl_stat_new+=2;
;;;5634   				}
;;;5635   			else if(Ibmax<((IZMAX_*95)/10))
;;;5636   				{
;;;5637   				cntrl_stat_new++;
;;;5638   				}					
;;;5639   			}
;;;5640   		else if(load_U<(u_necc-((UB0-UB20)/4)))
;;;5641   			{
;;;5642   			if(Ibmax<(IZMAX_*5))
;;;5643   				{
;;;5644                       if(cntrl_stat_blok_cnt)cntrl_stat_new++;
;;;5645   				else	cntrl_stat_new+=2;
;;;5646   				}
;;;5647   			else if(Ibmax<((IZMAX_*95)/10))
;;;5648   				{
;;;5649   				cntrl_stat_new++;
;;;5650   				}					
;;;5651   			}	
;;;5652   		else if(load_U<(u_necc-1))
;;;5653   			{
;;;5654   			if(Ibmax<((IZMAX_*95)/10))
;;;5655   				{
;;;5656   				cntrl_stat_new++;
;;;5657   				}					
;;;5658   			}					
;;;5659   		}	
;;;5660   	else if((load_U>u_necc)/*&&(!cntrl_blok)*/)
;;;5661   		{
;;;5662   		if(load_U>(u_necc+(UB0-UB20)))
;;;5663   			{
;;;5664                  if(cntrl_stat_blok_cnt)cntrl_stat_new--;
;;;5665   			else	cntrl_stat_new-=10;
;;;5666   			}
;;;5667   		else if(load_U>(u_necc+((UB0-UB20)/4)))
;;;5668   			{
;;;5669                  if(cntrl_stat_blok_cnt)cntrl_stat_new--;
;;;5670   			else cntrl_stat_new-=2;
;;;5671   			}	
;;;5672   		else if(load_U>(u_necc+1))
;;;5673   			{
;;;5674   			cntrl_stat_new--;
;;;5675   			}					
;;;5676   		}
;;;5677   
;;;5678   	gran(&cntrl_stat_new,10,1010);			
00317a  f2403bf2          MOV      r11,#0x3f2
00317e  b120              CBZ      r0,|L1.12682|
003180  4915              LDR      r1,|L1.12760|
003182  6808              LDR      r0,[r1,#0]            ;5536  ; mess_data
003184  2864              CMP      r0,#0x64              ;5536
003186  d04e              BEQ      |L1.12838|
003188  e044              B        |L1.12820|
                  |L1.12682|
00318a  e0a6              B        |L1.13018|
                  |L1.12684|
                          DCD      lakb
                  |L1.12688|
                          DCD      TBATSIGN
                  |L1.12692|
                          DCD      TBATMAX
                  |L1.12696|
                          DCD      ADR_EE_BAT_RESURS
                  |L1.12700|
                          DCD      UBM_AV
                  |L1.12704|
                          DCD      U0B
                  |L1.12708|
                          DCD      IKB
                  |L1.12712|
                          DCD      USIGN
                  |L1.12716|
                          DCD      TERMOKOMPENS
                  |L1.12720|
                          DCD      UB20
                  |L1.12724|
                          DCD      u_necc
                  |L1.12728|
                          DCD      ND_EXT
                  |L1.12732|
                          DCD      t_ext
                  |L1.12736|
                          DCD      mat_temper
                  |L1.12740|
                          DCD      UB0
                  |L1.12744|
                          DCD      ||area_number.21||
                  |L1.12748|
                          DCD      UVZ
                  |L1.12752|
                          DCD      speedChIsOn
                  |L1.12756|
                          DCD      speedChrgVolt
                  |L1.12760|
                          DCD      mess_data
                  |L1.12764|
                          DCD      u_necc_dn
                  |L1.12768|
                          DCD      u_necc_up
                  |L1.12772|
                          DCD      Isumm
                  |L1.12776|
                          DCD      Isumm_
                  |L1.12780|
                          DCD      bat
                  |L1.12784|
                          DCD      IMAX
                  |L1.12788|
                          DCD      IMIN
                  |L1.12792|
                          DCD      num_necc
                  |L1.12796|
                          DCD      PAR
                  |L1.12800|
                          DCD      NUMIST
                  |L1.12804|
                          DCD      IZMAX
                  |L1.12808|
                          DCD      speedChrgCurr
                  |L1.12812|
                          DCD      load_U
                  |L1.12816|
                          DCD      bps
                  |L1.12820|
003214  2869              CMP      r0,#0x69              ;5540
003216  d00b              BEQ      |L1.12848|
003218  286e              CMP      r0,#0x6e              ;5544
00321a  d00f              BEQ      |L1.12860|
00321c  28e5              CMP      r0,#0xe5              ;5551
00321e  d022              BEQ      |L1.12902|
003220  28e6              CMP      r0,#0xe6              ;5556
003222  d023              BEQ      |L1.12908|
                  |L1.12836|
003224  e136              B        |L1.13460|
                  |L1.12838|
003226  6848              LDR      r0,[r1,#4]            ;5538  ; mess_data
003228  8ba1              LDRH     r1,[r4,#0x1c]         ;5538  ; cntrl_stat_old
00322a  4408              ADD      r0,r0,r1              ;5538
00322c  8360              STRH     r0,[r4,#0x1a]         ;5538
00322e  e131              B        |L1.13460|
                  |L1.12848|
003230  6848              LDR      r0,[r1,#4]            ;5542  ; mess_data
003232  8ba1              LDRH     r1,[r4,#0x1c]         ;5542  ; cntrl_stat_old
003234  eba10000          SUB      r0,r1,r0              ;5542
003238  8360              STRH     r0,[r4,#0x1a]         ;5542
00323a  e12b              B        |L1.13460|
                  |L1.12860|
00323c  8b60              LDRH     r0,[r4,#0x1a]         ;5546  ; cntrl_stat
00323e  f1a00001          SUB      r0,r0,#1              ;5546
003242  b200              SXTH     r0,r0                 ;5546
003244  8360              STRH     r0,[r4,#0x1a]         ;5546
003246  281e              CMP      r0,#0x1e              ;5548
003248  dd06              BLE      |L1.12888|
00324a  49fa              LDR      r1,|L1.13876|
00324c  f9bc0000          LDRSH    r0,[r12,#0]           ;5548  ; load_U
003250  f9b11000          LDRSH    r1,[r1,#0]            ;5548  ; USIGN
003254  4288              CMP      r0,r1                 ;5548
003256  dae5              BGE      |L1.12836|
                  |L1.12888|
003258  230a              MOVS     r3,#0xa               ;5548
00325a  2200              MOVS     r2,#0                 ;5548
00325c  21e7              MOVS     r1,#0xe7              ;5548
00325e  20e6              MOVS     r0,#0xe6              ;5548
003260  f7fffffe          BL       mess_send
003264  e116              B        |L1.13460|
                  |L1.12902|
003266  6848              LDR      r0,[r1,#4]            ;5553  ; mess_data
003268  8360              STRH     r0,[r4,#0x1a]         ;5553
00326a  e113              B        |L1.13460|
                  |L1.12908|
00326c  f9bc0000          LDRSH    r0,[r12,#0]           ;5586  ; load_U
003270  f9b31000          LDRSH    r1,[r3,#0]            ;5586  ; u_necc
003274  4288              CMP      r0,r1                 ;5586
003276  dd16              BLE      |L1.12966|
003278  eba00001          SUB      r0,r0,r1              ;5588
00327c  280a              CMP      r0,#0xa               ;5588
00327e  dd07              BLE      |L1.12944|
003280  f9b4001a          LDRSH    r0,[r4,#0x1a]         ;5588  ; cntrl_stat
003284  2800              CMP      r0,#0                 ;5588
003286  dd03              BLE      |L1.12944|
003288  f1a00005          SUB      r0,r0,#5              ;5588
00328c  8360              STRH     r0,[r4,#0x1a]         ;5588
00328e  e101              B        |L1.13460|
                  |L1.12944|
003290  f9b4001a          LDRSH    r0,[r4,#0x1a]         ;5589  ; cntrl_stat
003294  2800              CMP      r0,#0                 ;5589
003296  d005              BEQ      |L1.12964|
003298  79e1              LDRB     r1,[r4,#7]            ;5589  ; b1Hz_ch
00329a  2900              CMP      r1,#0                 ;5589
00329c  d002              BEQ      |L1.12964|
00329e  f1a00001          SUB      r0,r0,#1              ;5589
0032a2  8360              STRH     r0,[r4,#0x1a]         ;5589
                  |L1.12964|
0032a4  e0f6              B        |L1.13460|
                  |L1.12966|
0032a6  da0b              BGE      |L1.12992|
0032a8  1a08              SUBS     r0,r1,r0              ;5593
0032aa  280a              CMP      r0,#0xa               ;5593
0032ac  dd09              BLE      |L1.12994|
0032ae  f9b4001a          LDRSH    r0,[r4,#0x1a]         ;5593  ; cntrl_stat
0032b2  f24031f7          MOV      r1,#0x3f7             ;5593
0032b6  4288              CMP      r0,r1                 ;5593
0032b8  da03              BGE      |L1.12994|
0032ba  f1000005          ADD      r0,r0,#5              ;5593
0032be  8360              STRH     r0,[r4,#0x1a]         ;5593
                  |L1.12992|
0032c0  e0e8              B        |L1.13460|
                  |L1.12994|
0032c2  f9b4001a          LDRSH    r0,[r4,#0x1a]         ;5594  ; cntrl_stat
0032c6  f5b07f7f          CMP      r0,#0x3fc             ;5594
0032ca  da05              BGE      |L1.13016|
0032cc  79e1              LDRB     r1,[r4,#7]            ;5594  ; b1Hz_ch
0032ce  2900              CMP      r1,#0                 ;5594
0032d0  d002              BEQ      |L1.13016|
0032d2  f1000001          ADD      r0,r0,#1              ;5594
0032d6  8360              STRH     r0,[r4,#0x1a]         ;5594
                  |L1.13016|
0032d8  e0dc              B        |L1.13460|
                  |L1.13018|
0032da  79e0              LDRB     r0,[r4,#7]            ;5602  ; b1Hz_ch
0032dc  2800              CMP      r0,#0                 ;5602
0032de  d072              BEQ      |L1.13254|
0032e0  48d5              LDR      r0,|L1.13880|
0032e2  8800              LDRH     r0,[r0,#0]            ;5602  ; bIBAT_SMKLBR
0032e4  b118              CBZ      r0,|L1.13038|
0032e6  f89802a3          LDRB     r0,[r8,#0x2a3]        ;5602  ; bps
0032ea  2828              CMP      r0,#0x28              ;5602
0032ec  d96b              BLS      |L1.13254|
                  |L1.13038|
0032ee  f9b4001c          LDRSH    r0,[r4,#0x1c]         ;5604  ; cntrl_stat_old
0032f2  86a0              STRH     r0,[r4,#0x34]         ;5604
0032f4  f9b41036          LDRSH    r1,[r4,#0x36]         ;5606  ; Ibmax
0032f8  8f22              LDRH     r2,[r4,#0x38]         ;5606  ; IZMAX_
0032fa  fb91f9f5          SDIV     r9,r1,r5              ;5606
0032fe  ebb90f42          CMP      r9,r2,LSL #1          ;5606
003302  dd0a              BLE      |L1.13082|
003304  f8b4105a          LDRH     r1,[r4,#0x5a]         ;5608  ; cntrl_stat_blok_cnt
003308  b119              CBZ      r1,|L1.13074|
00330a  f1a00001          SUB      r0,r0,#1              ;5608
00330e  86a0              STRH     r0,[r4,#0x34]         ;5608
003310  e0b8              B        |L1.13444|
                  |L1.13074|
003312  f1a0000a          SUB      r0,r0,#0xa            ;5609
003316  86a0              STRH     r0,[r4,#0x34]         ;5609
003318  e0b4              B        |L1.13444|
                  |L1.13082|
00331a  da0e              BGE      |L1.13114|
00331c  ebc21a02          RSB      r10,r2,r2,LSL #4      ;5611
003320  458a              CMP      r10,r1                ;5611
003322  da0a              BGE      |L1.13114|
003324  f8b4105a          LDRH     r1,[r4,#0x5a]         ;5613  ; cntrl_stat_blok_cnt
003328  b119              CBZ      r1,|L1.13106|
00332a  f1a00001          SUB      r0,r0,#1              ;5613
00332e  86a0              STRH     r0,[r4,#0x34]         ;5613
003330  e0a8              B        |L1.13444|
                  |L1.13106|
003332  f1a00003          SUB      r0,r0,#3              ;5614
003336  86a0              STRH     r0,[r4,#0x34]         ;5614
003338  e0a4              B        |L1.13444|
                  |L1.13114|
00333a  ebc21a02          RSB      r10,r2,r2,LSL #4      ;5616
00333e  458a              CMP      r10,r1                ;5616
003340  dd05              BLE      |L1.13134|
003342  4591              CMP      r9,r2                 ;5616
003344  dd03              BLE      |L1.13134|
003346  f1a00001          SUB      r0,r0,#1              ;5618
00334a  86a0              STRH     r0,[r4,#0x34]         ;5618
00334c  e09a              B        |L1.13444|
                  |L1.13134|
00334e  f9bcc000          LDRSH    r12,[r12,#0]          ;5621  ; load_U
003352  f9b33000          LDRSH    r3,[r3,#0]            ;5621  ; u_necc
003356  f8df92e4          LDR      r9,|L1.13884|
00335a  f8dfa2e4          LDR      r10,|L1.13888|
00335e  459c              CMP      r12,r3                ;5621
003360  da64              BGE      |L1.13356|
003362  f9b99000          LDRSH    r9,[r9,#0]            ;5623  ; UB0
003366  f9baa000          LDRSH    r10,[r10,#0]          ;5623  ; UB20
00336a  eba9090a          SUB      r9,r9,r10             ;5623
00336e  eba30a09          SUB      r10,r3,r9             ;5623
003372  45e2              CMP      r10,r12               ;5623
003374  dd28              BLE      |L1.13256|
003376  2900              CMP      r1,#0                 ;5625
003378  da0a              BGE      |L1.13200|
00337a  f8b4105a          LDRH     r1,[r4,#0x5a]         ;5627  ; cntrl_stat_blok_cnt
00337e  b119              CBZ      r1,|L1.13192|
003380  f1000001          ADD      r0,r0,#1              ;5627
003384  86a0              STRH     r0,[r4,#0x34]         ;5627
003386  e07d              B        |L1.13444|
                  |L1.13192|
003388  f100000a          ADD      r0,r0,#0xa            ;5628
00338c  86a0              STRH     r0,[r4,#0x34]         ;5628
00338e  e079              B        |L1.13444|
                  |L1.13200|
003390  eb020382          ADD      r3,r2,r2,LSL #2       ;5630
003394  428b              CMP      r3,r1                 ;5630
003396  dd0a              BLE      |L1.13230|
003398  f8b4105a          LDRH     r1,[r4,#0x5a]         ;5632  ; cntrl_stat_blok_cnt
00339c  b119              CBZ      r1,|L1.13222|
00339e  f1000001          ADD      r0,r0,#1              ;5632
0033a2  86a0              STRH     r0,[r4,#0x34]         ;5632
0033a4  e06e              B        |L1.13444|
                  |L1.13222|
0033a6  f1000002          ADD      r0,r0,#2              ;5633
0033aa  86a0              STRH     r0,[r4,#0x34]         ;5633
0033ac  e06a              B        |L1.13444|
                  |L1.13230|
0033ae  ebc21342          RSB      r3,r2,r2,LSL #5       ;5635
0033b2  eb031282          ADD      r2,r3,r2,LSL #6       ;5635
0033b6  fbb2f2f5          UDIV     r2,r2,r5              ;5635
0033ba  428a              CMP      r2,r1                 ;5635
0033bc  dd62              BLE      |L1.13444|
0033be  f1000001          ADD      r0,r0,#1              ;5637
0033c2  86a0              STRH     r0,[r4,#0x34]         ;5637
0033c4  e05e              B        |L1.13444|
                  |L1.13254|
0033c6  e065              B        |L1.13460|
                  |L1.13256|
0033c8  ea4f7ae9          ASR      r10,r9,#31            ;5640
0033cc  eb09799a          ADD      r9,r9,r10,LSR #30     ;5640
0033d0  eba309a9          SUB      r9,r3,r9,ASR #2       ;5640
0033d4  45e1              CMP      r9,r12                ;5640
0033d6  dd1a              BLE      |L1.13326|
0033d8  eb020382          ADD      r3,r2,r2,LSL #2       ;5642
0033dc  428b              CMP      r3,r1                 ;5642
0033de  dd0a              BLE      |L1.13302|
0033e0  f8b4105a          LDRH     r1,[r4,#0x5a]         ;5644  ; cntrl_stat_blok_cnt
0033e4  b119              CBZ      r1,|L1.13294|
0033e6  f1000001          ADD      r0,r0,#1              ;5644
0033ea  86a0              STRH     r0,[r4,#0x34]         ;5644
0033ec  e04a              B        |L1.13444|
                  |L1.13294|
0033ee  f1000002          ADD      r0,r0,#2              ;5645
0033f2  86a0              STRH     r0,[r4,#0x34]         ;5645
0033f4  e046              B        |L1.13444|
                  |L1.13302|
0033f6  ebc21342          RSB      r3,r2,r2,LSL #5       ;5647
0033fa  eb031282          ADD      r2,r3,r2,LSL #6       ;5647
0033fe  fbb2f2f5          UDIV     r2,r2,r5              ;5647
003402  428a              CMP      r2,r1                 ;5647
003404  dd3e              BLE      |L1.13444|
003406  f1000001          ADD      r0,r0,#1              ;5649
00340a  86a0              STRH     r0,[r4,#0x34]         ;5649
00340c  e03a              B        |L1.13444|
                  |L1.13326|
00340e  1e5b              SUBS     r3,r3,#1              ;5652
003410  459c              CMP      r12,r3                ;5652
003412  da37              BGE      |L1.13444|
003414  ebc21342          RSB      r3,r2,r2,LSL #5       ;5654
003418  eb031282          ADD      r2,r3,r2,LSL #6       ;5654
00341c  fbb2f2f5          UDIV     r2,r2,r5              ;5654
003420  428a              CMP      r2,r1                 ;5654
003422  dd2f              BLE      |L1.13444|
003424  f1000001          ADD      r0,r0,#1              ;5656
003428  86a0              STRH     r0,[r4,#0x34]         ;5656
00342a  e02b              B        |L1.13444|
                  |L1.13356|
00342c  dd2a              BLE      |L1.13444|
00342e  f9b91000          LDRSH    r1,[r9,#0]            ;5662  ; UB0
003432  f9ba2000          LDRSH    r2,[r10,#0]           ;5662  ; UB20
003436  1a89              SUBS     r1,r1,r2              ;5662
003438  18ca              ADDS     r2,r1,r3              ;5662
00343a  4562              CMP      r2,r12                ;5662
00343c  da0a              BGE      |L1.13396|
00343e  f8b4105a          LDRH     r1,[r4,#0x5a]         ;5664  ; cntrl_stat_blok_cnt
003442  b119              CBZ      r1,|L1.13388|
003444  f1a00001          SUB      r0,r0,#1              ;5664
003448  86a0              STRH     r0,[r4,#0x34]         ;5664
00344a  e01b              B        |L1.13444|
                  |L1.13388|
00344c  f1a0000a          SUB      r0,r0,#0xa            ;5665
003450  86a0              STRH     r0,[r4,#0x34]         ;5665
003452  e017              B        |L1.13444|
                  |L1.13396|
003454  17ca              ASRS     r2,r1,#31             ;5667
003456  eb017192          ADD      r1,r1,r2,LSR #30      ;5667
00345a  eb0301a1          ADD      r1,r3,r1,ASR #2       ;5667
00345e  4561              CMP      r1,r12                ;5667
003460  da0a              BGE      |L1.13432|
003462  f8b4105a          LDRH     r1,[r4,#0x5a]         ;5669  ; cntrl_stat_blok_cnt
003466  b119              CBZ      r1,|L1.13424|
003468  f1a00001          SUB      r0,r0,#1              ;5669
00346c  86a0              STRH     r0,[r4,#0x34]         ;5669
00346e  e009              B        |L1.13444|
                  |L1.13424|
003470  f1a00002          SUB      r0,r0,#2              ;5670
003474  86a0              STRH     r0,[r4,#0x34]         ;5670
003476  e005              B        |L1.13444|
                  |L1.13432|
003478  1c5b              ADDS     r3,r3,#1              ;5672
00347a  459c              CMP      r12,r3                ;5672
00347c  dd02              BLE      |L1.13444|
00347e  f1a00001          SUB      r0,r0,#1              ;5674
003482  86a0              STRH     r0,[r4,#0x34]         ;5674
                  |L1.13444|
003484  465a              MOV      r2,r11
003486  210a              MOVS     r1,#0xa
003488  486e              LDR      r0,|L1.13892|
00348a  f7fffffe          BL       gran
;;;5679   	cntrl_stat_old=cntrl_stat_new;
00348e  8ea0              LDRH     r0,[r4,#0x34]  ; cntrl_stat_new
003490  83a0              STRH     r0,[r4,#0x1c]
;;;5680   	cntrl_stat=cntrl_stat_new;	
003492  8360              STRH     r0,[r4,#0x1a]
                  |L1.13460|
;;;5681   	}
;;;5682   
;;;5683   
;;;5684   iiii=0;
003494  7266              STRB     r6,[r4,#9]
;;;5685   for(i=0;i<NUMIST;i++)
003496  7226              STRB     r6,[r4,#8]
003498  486b              LDR      r0,|L1.13896|
00349a  f9b02000          LDRSH    r2,[r0,#0]
00349e  e00c              B        |L1.13498|
                  |L1.13472|
;;;5686        {
;;;5687        if(bps[i]._cnt<30)iiii=1;
0034a0  ebc001c0          RSB      r1,r0,r0,LSL #3
0034a4  eb010141          ADD      r1,r1,r1,LSL #1
0034a8  eb080181          ADD      r1,r8,r1,LSL #2
0034ac  78c9              LDRB     r1,[r1,#3]
0034ae  291e              CMP      r1,#0x1e
0034b0  d200              BCS      |L1.13492|
0034b2  7267              STRB     r7,[r4,#9]
                  |L1.13492|
0034b4  f1000001          ADD      r0,r0,#1              ;5685
0034b8  7220              STRB     r0,[r4,#8]            ;5685
                  |L1.13498|
0034ba  7a20              LDRB     r0,[r4,#8]            ;5685  ; i
0034bc  4290              CMP      r0,r2                 ;5685
0034be  dbef              BLT      |L1.13472|
;;;5688        }
;;;5689   
;;;5690   if(iiii==0)
0034c0  7a60              LDRB     r0,[r4,#9]  ; iiii
0034c2  b920              CBNZ     r0,|L1.13518|
;;;5691        {
;;;5692        cntrl_stat=600;	
0034c4  f44f7016          MOV      r0,#0x258
0034c8  8360              STRH     r0,[r4,#0x1a]
;;;5693        cntrl_stat_old=600;
0034ca  83a0              STRH     r0,[r4,#0x1c]
;;;5694        cntrl_stat_new=600;
0034cc  86a0              STRH     r0,[r4,#0x34]
                  |L1.13518|
;;;5695   	#ifdef UKU_TELECORE2015
;;;5696   	//cntrl_stat=0;
;;;5697   	//cntrl_stat_old=0;
;;;5698   	//cntrl_stat_new=0;
;;;5699   	#endif
;;;5700        }
;;;5701   gran(&cntrl_stat,10,1010); 
0034ce  485d              LDR      r0,|L1.13892|
0034d0  465a              MOV      r2,r11
0034d2  210a              MOVS     r1,#0xa
0034d4  381a              SUBS     r0,r0,#0x1a
0034d6  f7fffffe          BL       gran
;;;5702   b1Hz_ch=0;
0034da  71e6              STRB     r6,[r4,#7]
                  |L1.13532|
;;;5703   }
0034dc  e8bd9ff0          POP      {r4-r12,pc}
;;;5704   #endif
                          ENDP

                  ext_drv PROC
;;;5863   //-----------------------------------------------
;;;5864   void ext_drv(void)
0034e0  e92d5ff0          PUSH     {r4-r12,lr}
;;;5865   {
;;;5866   char i;
;;;5867   
;;;5868   
;;;5869   for(i=0;i<NUMSK;i++)
0034e4  f04f0000          MOV      r0,#0
0034e8  4a5a              LDR      r2,|L1.13908|
;;;5870   	{
;;;5871   	#ifdef UKU_MGTS
;;;5872   	if(adc_buff_[sk_buff_RSTKM[i]]<2000)
;;;5873   	#endif
;;;5874   	#ifdef UKU_RSTKM
;;;5875   	if(adc_buff_[sk_buff_RSTKM[i]]<2000)
;;;5876   	#endif
;;;5877   	#ifdef UKU_3U
;;;5878   	if(adc_buff_[sk_buff_3U[i]]<2000)
;;;5879   	#endif
;;;5880   	#ifdef UKU_GLONASS
;;;5881   	if(adc_buff_[sk_buff_GLONASS[i]]<2000)
;;;5882   	#endif
;;;5883   	#ifdef UKU_KONTUR
;;;5884   	if(adc_buff_[sk_buff_KONTUR[i]]<2000)
;;;5885   	#endif
;;;5886   	#ifdef UKU_6U
;;;5887   	if(adc_buff_[sk_buff_6U[i]]<2000)
;;;5888   	#endif
;;;5889   	#ifdef UKU_220
;;;5890   	if(adc_buff_[sk_buff_220[i]]<2000)
;;;5891   	#endif
;;;5892   	#ifdef UKU_220_V2
;;;5893   	if(adc_buff_[sk_buff_220[i]]<2000)
;;;5894   	#endif
;;;5895   	#ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;5896   	if(adc_buff_[sk_buff_220[i]]<2000)
;;;5897   	#endif
;;;5898   	#ifdef UKU_TELECORE2015
;;;5899   	if(adc_buff_[sk_buff_TELECORE2015[i]]<1000)	 //TODO
;;;5900   	#endif
;;;5901   
;;;5902   		{
;;;5903   		if(sk_cnt[i]<10)
0034ea  4b58              LDR      r3,|L1.13900|
;;;5904   			{
;;;5905   			sk_cnt[i]++;
;;;5906   			if(sk_cnt[i]>=10)
;;;5907   				{
;;;5908   				sk_stat[i]=ssON;
0034ec  4d58              LDR      r5,|L1.13904|
0034ee  f04f0a01          MOV      r10,#1
;;;5909   				}
;;;5910   			}
;;;5911   		else 
;;;5912   			{
;;;5913   			sk_cnt[i]=10;
0034f2  f04f0b0a          MOV      r11,#0xa
0034f6  4606              MOV      r6,r0                 ;5869
0034f8  f9b24000          LDRSH    r4,[r2,#0]            ;5869
0034fc  e025              B        |L1.13642|
                  |L1.13566|
0034fe  4956              LDR      r1,|L1.13912|
003500  4f56              LDR      r7,|L1.13916|
003502  5c09              LDRB     r1,[r1,r0]            ;5896
003504  f9371011          LDRSH    r1,[r7,r1,LSL #1]     ;5896
003508  f5b16ffa          CMP      r1,#0x7d0             ;5896
00350c  da0e              BGE      |L1.13612|
00350e  5619              LDRSB    r1,[r3,r0]            ;5903
003510  290a              CMP      r1,#0xa               ;5903
003512  da08              BGE      |L1.13606|
003514  f1010101          ADD      r1,r1,#1              ;5905
003518  b249              SXTB     r1,r1                 ;5905
00351a  5419              STRB     r1,[r3,r0]            ;5905
00351c  290a              CMP      r1,#0xa               ;5906
00351e  db11              BLT      |L1.13636|
003520  f805a000          STRB     r10,[r5,r0]           ;5908
003524  e00e              B        |L1.13636|
                  |L1.13606|
003526  f803b000          STRB     r11,[r3,r0]
00352a  e00b              B        |L1.13636|
                  |L1.13612|
;;;5914   			}
;;;5915                  
;;;5916   		}
;;;5917   	else
;;;5918   		{
;;;5919   		if(sk_cnt[i]>0)
00352c  5619              LDRSB    r1,[r3,r0]
00352e  2900              CMP      r1,#0
003530  dd07              BLE      |L1.13634|
;;;5920   			{
;;;5921   			sk_cnt[i]--;
003532  f1a10101          SUB      r1,r1,#1
003536  b249              SXTB     r1,r1
003538  5419              STRB     r1,[r3,r0]
;;;5922   			if(sk_cnt[i]<=0)
00353a  2900              CMP      r1,#0
00353c  dc02              BGT      |L1.13636|
;;;5923   				{
;;;5924   				sk_stat[i]=ssOFF;
00353e  542e              STRB     r6,[r5,r0]
003540  e000              B        |L1.13636|
                  |L1.13634|
;;;5925   				}
;;;5926   			}
;;;5927   		else 
;;;5928   			{
;;;5929   			sk_cnt[i]=0;
003542  541e              STRB     r6,[r3,r0]
                  |L1.13636|
003544  f1000001          ADD      r0,r0,#1              ;5869
003548  b2c0              UXTB     r0,r0                 ;5869
                  |L1.13642|
00354a  42a0              CMP      r0,r4                 ;5869
00354c  dbd7              BLT      |L1.13566|
;;;5930   			}
;;;5931   		}
;;;5932   	}
;;;5933   
;;;5934   for(i=0;i<NUMSK;i++)
00354e  f04f0400          MOV      r4,#0
;;;5935   	{
;;;5936   	if(((SK_SIGN[i]==0)&&(sk_stat[i]==ssON))||((SK_SIGN[i])&&(sk_stat[i]==ssOFF)) )
;;;5937   		{
;;;5938   		if(sk_av_cnt[i]<10)
003552  f8df910c          LDR      r9,|L1.13920|
;;;5939   			{
;;;5940   			sk_av_cnt[i]++;
;;;5941   			if(sk_av_cnt[i]>=10)
;;;5942   				{
;;;5943   				sk_av_stat[i]=sasON;
003556  4f43              LDR      r7,|L1.13924|
;;;5944   				}
;;;5945   			}
;;;5946   		else 
;;;5947   			{
;;;5948   			sk_av_cnt[i]=10;
;;;5949   			}
;;;5950   		}
;;;5951   	else
;;;5952   		{
;;;5953   		if(sk_av_cnt[i]>=0)
;;;5954   			{
;;;5955   			sk_av_cnt[i]--;
;;;5956   			if(sk_av_cnt[i]<=0)
;;;5957   				{
;;;5958   				sk_av_stat[i]=sasOFF;
;;;5959   				}
;;;5960   			}
;;;5961   		else 
;;;5962   			{
;;;5963   			sk_av_cnt[i]=0;
;;;5964   			}
;;;5965   		}
;;;5966   
;;;5967   #ifndef UKU_KONTUR
;;;5968   	if(sk_av_stat_old[i]!=sk_av_stat[i])
003558  f8df810c          LDR      r8,|L1.13928|
00355c  e0c6              B        |L1.14060|
                  |L1.13662|
00355e  4843              LDR      r0,|L1.13932|
003560  f9300014          LDRSH    r0,[r0,r4,LSL #1]     ;5936
003564  b910              CBNZ     r0,|L1.13676|
003566  5d29              LDRB     r1,[r5,r4]            ;5936
003568  2901              CMP      r1,#1                 ;5936
00356a  d00f              BEQ      |L1.13708|
                  |L1.13676|
00356c  b108              CBZ      r0,|L1.13682|
00356e  5d28              LDRB     r0,[r5,r4]            ;5936
003570  b160              CBZ      r0,|L1.13708|
                  |L1.13682|
003572  f9190004          LDRSB    r0,[r9,r4]            ;5953
003576  2800              CMP      r0,#0                 ;5953
003578  db19              BLT      |L1.13742|
00357a  f1a00001          SUB      r0,r0,#1              ;5955
00357e  b240              SXTB     r0,r0                 ;5955
003580  f8090004          STRB     r0,[r9,r4]            ;5955
003584  2800              CMP      r0,#0                 ;5956
003586  dc14              BGT      |L1.13746|
003588  553e              STRB     r6,[r7,r4]            ;5958
00358a  e012              B        |L1.13746|
                  |L1.13708|
00358c  f9190004          LDRSB    r0,[r9,r4]            ;5938
003590  280a              CMP      r0,#0xa               ;5938
003592  da09              BGE      |L1.13736|
003594  f1000001          ADD      r0,r0,#1              ;5940
003598  b240              SXTB     r0,r0                 ;5940
00359a  f8090004          STRB     r0,[r9,r4]            ;5940
00359e  280a              CMP      r0,#0xa               ;5941
0035a0  db07              BLT      |L1.13746|
0035a2  f807a004          STRB     r10,[r7,r4]           ;5943
0035a6  e004              B        |L1.13746|
                  |L1.13736|
0035a8  f809b004          STRB     r11,[r9,r4]           ;5948
0035ac  e001              B        |L1.13746|
                  |L1.13742|
0035ae  f8096004          STRB     r6,[r9,r4]            ;5963
                  |L1.13746|
0035b2  f8181004          LDRB     r1,[r8,r4]
0035b6  5d38              LDRB     r0,[r7,r4]
0035b8  4281              CMP      r1,r0
0035ba  d00e              BEQ      |L1.13786|
;;;5969   		{
;;;5970   		plazma_sk++;
0035bc  4a21              LDR      r2,|L1.13892|
0035be  3a34              SUBS     r2,r2,#0x34
0035c0  8e51              LDRH     r1,[r2,#0x32]  ; plazma_sk
0035c2  f1010101          ADD      r1,r1,#1
0035c6  8651              STRH     r1,[r2,#0x32]
;;;5971   		if(sk_av_stat[i]==sasON)
0035c8  2801              CMP      r0,#1
0035ca  d007              BEQ      |L1.13788|
;;;5972   			{
;;;5973   			if(i==0)snmp_trap_send("SK #1 Alarm",15,1,1);
;;;5974   			else if(i==1)snmp_trap_send("SK #2 Alarm",15,2,1);
;;;5975   			else if(i==2)snmp_trap_send("SK #3 Alarm",15,3,1);
;;;5976   			else if(i==3)snmp_trap_send("SK #4 Alarm",15,4,1);
;;;5977   			}
;;;5978   		else 
;;;5979   			{
;;;5980   			if(i==0)snmp_trap_send("SK #1 Alarm is off",15,1,0);
0035cc  b354              CBZ      r4,|L1.13860|
;;;5981   			else if(i==1)snmp_trap_send("SK #2 Alarm is off",15,2,0);
0035ce  2c01              CMP      r4,#1
0035d0  d072              BEQ      |L1.14008|
;;;5982   			else if(i==2)snmp_trap_send("SK #3 Alarm is off",15,3,0);
0035d2  2c02              CMP      r4,#2
0035d4  d077              BEQ      |L1.14022|
;;;5983   			else if(i==3)snmp_trap_send("SK #4 Alarm is off",15,4,0);
0035d6  2c03              CMP      r4,#3
0035d8  d07c              BEQ      |L1.14036|
                  |L1.13786|
0035da  e081              B        |L1.14048|
                  |L1.13788|
0035dc  b134              CBZ      r4,|L1.13804|
0035de  2c01              CMP      r4,#1                 ;5974
0035e0  d00b              BEQ      |L1.13818|
0035e2  2c02              CMP      r4,#2                 ;5975
0035e4  d010              BEQ      |L1.13832|
0035e6  2c03              CMP      r4,#3                 ;5976
0035e8  d015              BEQ      |L1.13846|
0035ea  e079              B        |L1.14048|
                  |L1.13804|
0035ec  2301              MOVS     r3,#1                 ;5973
0035ee  461a              MOV      r2,r3                 ;5973
0035f0  210f              MOVS     r1,#0xf               ;5973
0035f2  a01f              ADR      r0,|L1.13936|
0035f4  f7fffffe          BL       snmp_trap_send
0035f8  e072              B        |L1.14048|
                  |L1.13818|
0035fa  2301              MOVS     r3,#1                 ;5974
0035fc  2202              MOVS     r2,#2                 ;5974
0035fe  210f              MOVS     r1,#0xf               ;5974
003600  a01e              ADR      r0,|L1.13948|
003602  f7fffffe          BL       snmp_trap_send
003606  e06b              B        |L1.14048|
                  |L1.13832|
003608  2301              MOVS     r3,#1                 ;5975
00360a  2203              MOVS     r2,#3                 ;5975
00360c  210f              MOVS     r1,#0xf               ;5975
00360e  a01e              ADR      r0,|L1.13960|
003610  f7fffffe          BL       snmp_trap_send
003614  e064              B        |L1.14048|
                  |L1.13846|
003616  2301              MOVS     r3,#1                 ;5976
003618  2204              MOVS     r2,#4                 ;5976
00361a  210f              MOVS     r1,#0xf               ;5976
00361c  a01d              ADR      r0,|L1.13972|
00361e  f7fffffe          BL       snmp_trap_send
003622  e05d              B        |L1.14048|
                  |L1.13860|
003624  2300              MOVS     r3,#0                 ;5980
003626  2201              MOVS     r2,#1                 ;5980
003628  210f              MOVS     r1,#0xf               ;5980
00362a  a01d              ADR      r0,|L1.13984|
00362c  f7fffffe          BL       snmp_trap_send
003630  e056              B        |L1.14048|
003632  e041              B        |L1.14008|
                  |L1.13876|
                          DCD      USIGN
                  |L1.13880|
                          DCD      bIBAT_SMKLBR
                  |L1.13884|
                          DCD      UB0
                  |L1.13888|
                          DCD      UB20
                  |L1.13892|
                          DCD      ||area_number.21||+0x34
                  |L1.13896|
                          DCD      NUMIST
                  |L1.13900|
                          DCD      sk_cnt
                  |L1.13904|
                          DCD      sk_stat
                  |L1.13908|
                          DCD      NUMSK
                  |L1.13912|
                          DCD      ||area_number.15||
                  |L1.13916|
                          DCD      ||.bss||+0x400
                  |L1.13920|
                          DCD      sk_av_cnt
                  |L1.13924|
                          DCD      sk_av_stat
                  |L1.13928|
                          DCD      sk_av_stat_old
                  |L1.13932|
                          DCD      SK_SIGN
                  |L1.13936|
003670  534b2023          DCB      "SK #1 Alarm",0
003674  3120416c
003678  61726d00
                  |L1.13948|
00367c  534b2023          DCB      "SK #2 Alarm",0
003680  3220416c
003684  61726d00
                  |L1.13960|
003688  534b2023          DCB      "SK #3 Alarm",0
00368c  3320416c
003690  61726d00
                  |L1.13972|
003694  534b2023          DCB      "SK #4 Alarm",0
003698  3420416c
00369c  61726d00
                  |L1.13984|
0036a0  534b2023          DCB      "SK #1 Alarm is off",0
0036a4  3120416c
0036a8  61726d20
0036ac  6973206f
0036b0  666600  
0036b3  00                DCB      0
0036b4  e007              B        |L1.14022|
0036b6  e00d              B        |L1.14036|
                  |L1.14008|
0036b8  2300              MOVS     r3,#0                 ;5981
0036ba  2202              MOVS     r2,#2                 ;5981
0036bc  210f              MOVS     r1,#0xf               ;5981
0036be  a0f7              ADR      r0,|L1.15004|
0036c0  f7fffffe          BL       snmp_trap_send
0036c4  e00c              B        |L1.14048|
                  |L1.14022|
0036c6  2300              MOVS     r3,#0                 ;5982
0036c8  2203              MOVS     r2,#3                 ;5982
0036ca  210f              MOVS     r1,#0xf               ;5982
0036cc  a0f8              ADR      r0,|L1.15024|
0036ce  f7fffffe          BL       snmp_trap_send
0036d2  e005              B        |L1.14048|
                  |L1.14036|
0036d4  2300              MOVS     r3,#0
0036d6  2204              MOVS     r2,#4
0036d8  210f              MOVS     r1,#0xf
0036da  a0fa              ADR      r0,|L1.15044|
0036dc  f7fffffe          BL       snmp_trap_send
                  |L1.14048|
;;;5984   			}
;;;5985   	 	}
;;;5986   #endif
;;;5987   
;;;5988   #ifdef UKU_KONTUR
;;;5989   	if(sk_av_stat_old[i]!=sk_av_stat[i])
;;;5990   		{
;;;5991   		plazma_sk++;
;;;5992   		if(sk_av_stat[i]==sasON)
;;;5993   			{
;;;5994   			if(i==0)snmp_trap_send("Door is opened",15,1,1);
;;;5995   			else if(i==1)snmp_trap_send("Smoke Alarm",15,2,1);
;;;5996   			else if(i==2)snmp_trap_send("Shock Sensor Alarm",15,3,1);
;;;5997   			else if(i==3)snmp_trap_send("SK #4 Alarm",15,4,1);
;;;5998   			}
;;;5999   		else 
;;;6000   			{
;;;6001   			if(i==0)snmp_trap_send("Door is closed",15,1,0);
;;;6002   			else if(i==1)snmp_trap_send("Smoke Alarm is off",15,2,0);
;;;6003   			else if(i==2)snmp_trap_send("Shock Sensor Alarm is off",15,3,0);
;;;6004   			else if(i==3)snmp_trap_send("SK #4 Alarm is off",15,4,0);
;;;6005   			}
;;;6006   	 	}
;;;6007   #endif
;;;6008   	sk_av_stat_old[i]=sk_av_stat[i];
0036e0  5d38              LDRB     r0,[r7,r4]
0036e2  f8080004          STRB     r0,[r8,r4]
0036e6  f1040401          ADD      r4,r4,#1              ;5934
0036ea  b2e4              UXTB     r4,r4                 ;5934
                  |L1.14060|
0036ec  48fa              LDR      r0,|L1.15064|
0036ee  f9b00000          LDRSH    r0,[r0,#0]            ;5934  ; NUMSK
0036f2  4284              CMP      r4,r0                 ;5934
0036f4  f6ffaf33          BLT      |L1.13662|
;;;6009   	}
;;;6010   }
0036f8  e6f0              B        |L1.13532|
;;;6011   
                          ENDP

                  zar_superviser_start PROC
;;;6048   //-----------------------------------------------
;;;6049   void zar_superviser_start(void)
0036fa  4af8              LDR      r2,|L1.15068|
;;;6050   {
;;;6051   sign_U[0]=1;
0036fc  f04f0001          MOV      r0,#1
003700  7010              STRB     r0,[r2,#0]
;;;6052   sign_I[0]=1;
003702  49f7              LDR      r1,|L1.15072|
003704  7008              STRB     r0,[r1,#0]
;;;6053   sign_U[1]=1;
003706  7050              STRB     r0,[r2,#1]
;;;6054   sign_I[1]=1;
003708  7048              STRB     r0,[r1,#1]
;;;6055   
;;;6056   }
00370a  4770              BX       lr
;;;6057   
                          ENDP

                  zar_superviser_drv PROC
;;;6013   //-----------------------------------------------
;;;6014   void zar_superviser_drv(void)
00370c  e92d5ff0          PUSH     {r4-r12,lr}
;;;6015   {
;;;6016   
;;;6017   if(((bat[0]._Ub>u_necc_up) || (bat[0]._Ub<u_necc_dn))&&(main_kb_cnt<((TBAT*60)-30))&&(main_kb_cnt>((TBAT*60)-150))) sign_U[0]=0;
003710  48f5              LDR      r0,|L1.15080|
003712  f8df93d8          LDR      r9,|L1.15084|
003716  f8df83cc          LDR      r8,|L1.15076|
00371a  f9b0c000          LDRSH    r12,[r0,#0]  ; u_necc_up
00371e  f9b90000          LDRSH    r0,[r9,#0]
003722  4cf3              LDR      r4,|L1.15088|
003724  ebc01100          RSB      r1,r0,r0,LSL #4
003728  f9b87002          LDRSH    r7,[r8,#2]  ; bat
00372c  f06f0a1d          MVN      r10,#0x1d
003730  f06f0b95          MVN      r11,#0x95
003734  2500              MOVS     r5,#0
003736  4ee9              LDR      r6,|L1.15068|
003738  f9b4003c          LDRSH    r0,[r4,#0x3c]
00373c  eb0a0281          ADD      r2,r10,r1,LSL #2
003740  eb0b0381          ADD      r3,r11,r1,LSL #2
003744  4567              CMP      r7,r12
003746  dc05              BGT      |L1.14164|
003748  f8dfc3a8          LDR      r12,|L1.15092|
00374c  f9bcc000          LDRSH    r12,[r12,#0]  ; u_necc_dn
003750  4567              CMP      r7,r12
003752  da04              BGE      |L1.14174|
                  |L1.14164|
003754  4282              CMP      r2,r0
003756  dd02              BLE      |L1.14174|
003758  4283              CMP      r3,r0
00375a  da00              BGE      |L1.14174|
00375c  7035              STRB     r5,[r6,#0]
                  |L1.14174|
;;;6018   
;;;6019   if(((bat[0]._Ib>(2*IKB)) || (bat[0]._Ib<(-IKB*2))) &&(main_kb_cnt<((TBAT*60)-30))&&(main_kb_cnt>((TBAT*60)-150))) sign_I[0]=0;
00375e  4fe6              LDR      r7,|L1.15096|
003760  f9b8c008          LDRSH    r12,[r8,#8]  ; bat
003764  f9b7e000          LDRSH    lr,[r7,#0]  ; IKB
003768  4fdd              LDR      r7,|L1.15072|
00376a  ebbc0f4e          CMP      r12,lr,LSL #1
00376e  dc04              BGT      |L1.14202|
003770  f1ce0e00          RSB      lr,lr,#0
003774  ebbc0f4e          CMP      r12,lr,LSL #1
003778  da04              BGE      |L1.14212|
                  |L1.14202|
00377a  4282              CMP      r2,r0
00377c  dd02              BLE      |L1.14212|
00377e  4283              CMP      r3,r0
003780  da00              BGE      |L1.14212|
003782  703d              STRB     r5,[r7,#0]
                  |L1.14212|
;;;6020   																 
;;;6021   if((main_kb_cnt==((TBAT*60)-10)) &&(spc_stat==spcOFF))
003784  f06f0209          MVN      r2,#9
003788  eb020181          ADD      r1,r2,r1,LSL #2
00378c  4281              CMP      r1,r0
00378e  d120              BNE      |L1.14290|
003790  7ce0              LDRB     r0,[r4,#0x13]  ; spc_stat
003792  b9f0              CBNZ     r0,|L1.14290|
;;;6022   	{
;;;6023   	if((sign_U[0]==1) && (sign_I[0]==1) && (lc640_read_int(EE_BAT1_ZAR_CNT)!=BAT_C_REAL[0]) && (NUMBAT) && (!(bat[0]._av&1)))
003794  7830              LDRB     r0,[r6,#0]  ; sign_U
003796  2801              CMP      r0,#1
003798  d11b              BNE      |L1.14290|
00379a  7838              LDRB     r0,[r7,#0]  ; sign_I
00379c  2801              CMP      r0,#1
00379e  d118              BNE      |L1.14290|
0037a0  f44f70d6          MOV      r0,#0x1ac
0037a4  f7fffffe          BL       lc640_read_int
0037a8  49d4              LDR      r1,|L1.15100|
0037aa  f9b11000          LDRSH    r1,[r1,#0]  ; BAT_C_REAL
0037ae  4288              CMP      r0,r1
0037b0  d00f              BEQ      |L1.14290|
0037b2  48d3              LDR      r0,|L1.15104|
0037b4  8800              LDRH     r0,[r0,#0]  ; NUMBAT
0037b6  b160              CBZ      r0,|L1.14290|
0037b8  f898003d          LDRB     r0,[r8,#0x3d]  ; bat
0037bc  07c0              LSLS     r0,r0,#31
0037be  d108              BNE      |L1.14290|
;;;6024   		{
;;;6025   		lc640_write_int(EE_BAT1_ZAR_CNT,BAT_C_REAL[0]);
0037c0  f44f70d6          MOV      r0,#0x1ac
0037c4  f7fffffe          BL       lc640_write_int
;;;6026   		superviser_cnt++;
0037c8  48ce              LDR      r0,|L1.15108|
0037ca  7801              LDRB     r1,[r0,#0]  ; superviser_cnt
0037cc  f1010101          ADD      r1,r1,#1
0037d0  7001              STRB     r1,[r0,#0]
                  |L1.14290|
;;;6027   		}
;;;6028   	
;;;6029   	}
;;;6030   
;;;6031   if(((bat[0]._Ub>u_necc_up) || (bat[1]._Ub<u_necc_dn))&&(main_kb_cnt<((TBAT*60)-30))&&(main_kb_cnt>((TBAT*60)-150))) sign_U[1]=0;
0037d2  48c5              LDR      r0,|L1.15080|
0037d4  f9b81002          LDRSH    r1,[r8,#2]  ; bat
0037d8  f9b00000          LDRSH    r0,[r0,#0]  ; u_necc_up
0037dc  4281              CMP      r1,r0
0037de  dc06              BGT      |L1.14318|
0037e0  48c4              LDR      r0,|L1.15092|
0037e2  f9b8104e          LDRSH    r1,[r8,#0x4e]  ; bat
0037e6  f9b00000          LDRSH    r0,[r0,#0]  ; u_necc_dn
0037ea  4281              CMP      r1,r0
0037ec  da0e              BGE      |L1.14348|
                  |L1.14318|
0037ee  f9b90000          LDRSH    r0,[r9,#0]  ; TBAT
0037f2  f9b4103c          LDRSH    r1,[r4,#0x3c]  ; main_kb_cnt
0037f6  ebc01000          RSB      r0,r0,r0,LSL #4
0037fa  eb0a0280          ADD      r2,r10,r0,LSL #2
0037fe  428a              CMP      r2,r1
003800  dd04              BLE      |L1.14348|
003802  eb0b0080          ADD      r0,r11,r0,LSL #2
003806  4288              CMP      r0,r1
003808  da00              BGE      |L1.14348|
00380a  7075              STRB     r5,[r6,#1]
                  |L1.14348|
;;;6032   
;;;6033   if(((bat[1]._Ib>(2*IKB)) || (bat[1]._Ib<(-IKB*2))) &&(main_kb_cnt<((TBAT*60)-30))&&(main_kb_cnt>((TBAT*60)-150))) sign_I[1]=0;
00380c  49ba              LDR      r1,|L1.15096|
00380e  f9b80054          LDRSH    r0,[r8,#0x54]  ; bat
003812  f9b11000          LDRSH    r1,[r1,#0]  ; IKB
003816  ebb00f41          CMP      r0,r1,LSL #1
00381a  dc03              BGT      |L1.14372|
00381c  4249              RSBS     r1,r1,#0
00381e  ebb00f41          CMP      r0,r1,LSL #1
003822  da0e              BGE      |L1.14402|
                  |L1.14372|
003824  f9b90000          LDRSH    r0,[r9,#0]  ; TBAT
003828  f9b4103c          LDRSH    r1,[r4,#0x3c]  ; main_kb_cnt
00382c  ebc01000          RSB      r0,r0,r0,LSL #4
003830  eb0a0280          ADD      r2,r10,r0,LSL #2
003834  428a              CMP      r2,r1
003836  dd04              BLE      |L1.14402|
003838  eb0b0080          ADD      r0,r11,r0,LSL #2
00383c  4288              CMP      r0,r1
00383e  da00              BGE      |L1.14402|
003840  707d              STRB     r5,[r7,#1]
                  |L1.14402|
;;;6034   																 
;;;6035   if((main_kb_cnt==((TBAT*60)-10)) &&(spc_stat==spcOFF))
003842  f9b90000          LDRSH    r0,[r9,#0]  ; TBAT
003846  ebc01100          RSB      r1,r0,r0,LSL #4
00384a  f06f0009          MVN      r0,#9
00384e  eb000081          ADD      r0,r0,r1,LSL #2
003852  f9b4103c          LDRSH    r1,[r4,#0x3c]  ; main_kb_cnt
003856  4288              CMP      r0,r1
003858  d121              BNE      |L1.14494|
00385a  7ce0              LDRB     r0,[r4,#0x13]  ; spc_stat
00385c  b9f8              CBNZ     r0,|L1.14494|
;;;6036   	{
;;;6037   	if((sign_U[1]==1) && (sign_I[1]==1) && (lc640_read_int(EE_BAT2_ZAR_CNT)!=BAT_C_REAL[1]) && (NUMBAT==2) && (!(bat[1]._av&1)))
00385e  7870              LDRB     r0,[r6,#1]  ; sign_U
003860  2801              CMP      r0,#1
003862  d11c              BNE      |L1.14494|
003864  7878              LDRB     r0,[r7,#1]  ; sign_I
003866  2801              CMP      r0,#1
003868  d119              BNE      |L1.14494|
00386a  f44f75e5          MOV      r5,#0x1ca
00386e  4628              MOV      r0,r5
003870  f7fffffe          BL       lc640_read_int
003874  49a1              LDR      r1,|L1.15100|
003876  f9b11002          LDRSH    r1,[r1,#2]  ; BAT_C_REAL
00387a  4288              CMP      r0,r1
00387c  d00f              BEQ      |L1.14494|
00387e  48a0              LDR      r0,|L1.15104|
003880  8800              LDRH     r0,[r0,#0]  ; NUMBAT
003882  2802              CMP      r0,#2
003884  d10b              BNE      |L1.14494|
003886  f8980089          LDRB     r0,[r8,#0x89]  ; bat
00388a  07c0              LSLS     r0,r0,#31
00388c  d107              BNE      |L1.14494|
;;;6038   		{
;;;6039   		lc640_write_int(EE_BAT2_ZAR_CNT,BAT_C_REAL[1]);
00388e  4628              MOV      r0,r5
003890  f7fffffe          BL       lc640_write_int
;;;6040   		superviser_cnt++;
003894  489b              LDR      r0,|L1.15108|
003896  7801              LDRB     r1,[r0,#0]  ; superviser_cnt
003898  f1010101          ADD      r1,r1,#1
00389c  7001              STRB     r1,[r0,#0]
                  |L1.14494|
;;;6041   		}
;;;6042   	
;;;6043   	}
;;;6044   
;;;6045   if(main_kb_cnt==((TBAT*60)-2)) zar_superviser_start();
00389e  f9b90000          LDRSH    r0,[r9,#0]  ; TBAT
0038a2  f06f0101          MVN      r1,#1
0038a6  ebc01000          RSB      r0,r0,r0,LSL #4
0038aa  eb010080          ADD      r0,r1,r0,LSL #2
0038ae  f9b4103c          LDRSH    r1,[r4,#0x3c]  ; main_kb_cnt
0038b2  4288              CMP      r0,r1
0038b4  d102              BNE      |L1.14524|
0038b6  e8bd5ff0          POP      {r4-r12,lr}
0038ba  e7fe              B        zar_superviser_start
                  |L1.14524|
;;;6046   }
0038bc  e60e              B        |L1.13532|
;;;6047   
                          ENDP

                  npn_hndl PROC
;;;6058   //-----------------------------------------------
;;;6059   void npn_hndl(void)
0038be  e92d03f0          PUSH     {r4-r9}
;;;6060   {
;;;6061   if(NPN_OUT!=npnoOFF)
0038c2  4891              LDR      r0,|L1.15112|
;;;6062   	{
;;;6063   /*	if(NPN_SIGN==npnsAVNET)
;;;6064   		{
;;;6065   		if(net_av==1)
;;;6066   			{
;;;6067   			if(npn_tz_cnt<TZNPN)
;;;6068   				{
;;;6069   				npn_tz_cnt++;
;;;6070   				if(npn_tz_cnt==TZNPN)
;;;6071   					{
;;;6072   					npn_stat=npnsOFF;
;;;6073   					}
;;;6074   				}
;;;6075   			}
;;;6076   		else
;;;6077   			{
;;;6078   			if(npn_tz_cnt)
;;;6079   				{
;;;6080   				npn_tz_cnt--;
;;;6081   				if(npn_tz_cnt==0)
;;;6082   					{
;;;6083   					npn_stat=npnsON;
;;;6084   					}
;;;6085   				}
;;;6086   			}
;;;6087   		}*/
;;;6088   /*	if(NPN_SIGN==npnsULOAD)
;;;6089   		{
;;;6090   		if(load_U<UONPN)
;;;6091   			{
;;;6092   			if(npn_tz_cnt<TZNPN)
;;;6093   				{
;;;6094   				npn_tz_cnt++;
;;;6095   				if(npn_tz_cnt==TZNPN)
;;;6096   					{
;;;6097   					npn_stat=npnsOFF;
;;;6098   					}
;;;6099   				}
;;;6100   			}
;;;6101   		else if(load_U>UVNPN)
;;;6102   			{
;;;6103   			if(npn_tz_cnt)
;;;6104   				{
;;;6105   				npn_tz_cnt--;
;;;6106   				if(npn_tz_cnt==0)
;;;6107   					{
;;;6108   					npn_stat=npnsON;
;;;6109   					}
;;;6110   				}
;;;6111   			}
;;;6112   		}*/
;;;6113   
;;;6114   	if((load_U<UONPN)&&((net_Ua<UMN)||(net_Ub<UMN)||(net_Uc<UMN)))
;;;6115   		{
;;;6116   		if(npn_tz_cnt<TZNPN)
0038c4  4f91              LDR      r7,|L1.15116|
;;;6117   			{
;;;6118   			npn_tz_cnt++;
;;;6119   			if(npn_tz_cnt==TZNPN)
;;;6120   				{
;;;6121   				npn_stat=npnsOFF;
0038c6  4e92              LDR      r6,|L1.15120|
0038c8  7800              LDRB     r0,[r0,#0]            ;6061  ; NPN_OUT
0038ca  f04f0c00          MOV      r12,#0                ;6061
;;;6122   				}
;;;6123   			}
;;;6124   		}
;;;6125   	else if((load_U>UVNPN)&&(net_Ua>UMN)&&(net_Ub>UMN)&&(net_Uc>UMN))
;;;6126   		{
;;;6127   		if(npn_tz_cnt)
;;;6128   			{
;;;6129   			npn_tz_cnt--;
;;;6130   			if(npn_tz_cnt==0)
;;;6131   				{
;;;6132   				npn_stat=npnsON;
0038ce  f04f0801          MOV      r8,#1
0038d2  b3e8              CBZ      r0,|L1.14672|
0038d4  488f              LDR      r0,|L1.15124|
0038d6  4639              MOV      r1,r7                 ;6116
0038d8  f9b05000          LDRSH    r5,[r0,#0]            ;6114  ; load_U
0038dc  488e              LDR      r0,|L1.15128|
0038de  f9b11000          LDRSH    r1,[r1,#0]            ;6116
0038e2  f9b09000          LDRSH    r9,[r0,#0]            ;6114  ; UONPN
0038e6  488d              LDR      r0,|L1.15132|
0038e8  454d              CMP      r5,r9                 ;6114
0038ea  f9b02000          LDRSH    r2,[r0,#0]            ;6114
0038ee  488c              LDR      r0,|L1.15136|
0038f0  f9b03000          LDRSH    r3,[r0,#0]            ;6114
0038f4  488b              LDR      r0,|L1.15140|
0038f6  f9b04000          LDRSH    r4,[r0,#0]            ;6114
0038fa  488b              LDR      r0,|L1.15144|
0038fc  f9b00000          LDRSH    r0,[r0,#0]            ;6114
003900  da13              BGE      |L1.14634|
003902  4282              CMP      r2,r0                 ;6114
003904  db03              BLT      |L1.14606|
003906  4283              CMP      r3,r0                 ;6114
003908  db01              BLT      |L1.14606|
00390a  4284              CMP      r4,r0                 ;6114
00390c  da0d              BGE      |L1.14634|
                  |L1.14606|
00390e  4887              LDR      r0,|L1.15148|
003910  f9b02000          LDRSH    r2,[r0,#0]            ;6116  ; TZNPN
003914  4291              CMP      r1,r2                 ;6116
003916  da23              BGE      |L1.14688|
003918  f1010101          ADD      r1,r1,#1              ;6118
00391c  b208              SXTH     r0,r1                 ;6118
00391e  8038              STRH     r0,[r7,#0]            ;6118
003920  4290              CMP      r0,r2                 ;6119
003922  d11d              BNE      |L1.14688|
003924  f886c000          STRB     r12,[r6,#0]           ;6121
003928  e01a              B        |L1.14688|
                  |L1.14634|
00392a  f8dfc204          LDR      r12,|L1.15152|
00392e  f9bcc000          LDRSH    r12,[r12,#0]          ;6125  ; UVNPN
003932  4565              CMP      r5,r12                ;6125
003934  dd14              BLE      |L1.14688|
003936  4282              CMP      r2,r0                 ;6125
003938  dd12              BLE      |L1.14688|
00393a  4283              CMP      r3,r0                 ;6125
00393c  dd10              BLE      |L1.14688|
00393e  4284              CMP      r4,r0                 ;6125
003940  dd0e              BLE      |L1.14688|
003942  b169              CBZ      r1,|L1.14688|
003944  f1a10101          SUB      r1,r1,#1              ;6129
003948  b208              SXTH     r0,r1                 ;6129
00394a  8038              STRH     r0,[r7,#0]            ;6129
00394c  b940              CBNZ     r0,|L1.14688|
00394e  e000              B        |L1.14674|
                  |L1.14672|
003950  e002              B        |L1.14680|
                  |L1.14674|
003952  f8868000          STRB     r8,[r6,#0]
003956  e003              B        |L1.14688|
                  |L1.14680|
;;;6133   				}
;;;6134   			}
;;;6135   		}
;;;6136   	}
;;;6137   else
;;;6138   	{
;;;6139   	npn_tz_cnt=0;
003958  f8a7c000          STRH     r12,[r7,#0]
;;;6140   	npn_stat=npnsON;
00395c  f8868000          STRB     r8,[r6,#0]
                  |L1.14688|
;;;6141   	}
;;;6142   
;;;6143   if(npn_stat==npnsOFF) mess_send(MESS2RELE_HNDL,PARAM_RELE_NPN,1,15);
003960  7830              LDRB     r0,[r6,#0]  ; npn_stat
003962  2800              CMP      r0,#0
003964  d107              BNE      |L1.14710|
003966  e8bd03f0          POP      {r4-r9}
00396a  230f              MOVS     r3,#0xf
00396c  2201              MOVS     r2,#1
00396e  216e              MOVS     r1,#0x6e
003970  20d2              MOVS     r0,#0xd2
003972  f7ffbffe          B.W      mess_send
                  |L1.14710|
;;;6144   
;;;6145   
;;;6146   }
003976  e8bd03f0          POP      {r4-r9}
00397a  4770              BX       lr
;;;6147   
                          ENDP

                  speedChargeHndl PROC
;;;6148   //-----------------------------------------------
;;;6149   void speedChargeHndl(void)
00397c  b5f8              PUSH     {r3-r7,lr}
;;;6150   {
;;;6151   if(speedChIsOn)
00397e  4f6d              LDR      r7,|L1.15156|
;;;6152   	{
;;;6153   	speedChTimeCnt++;
;;;6154   	if(speedChTimeCnt>=((signed long)speedChrgTimeInHour*3600L))
;;;6155   		{
;;;6156   		speedChIsOn=0;
;;;6157   		}
;;;6158   	if(speedChrgBlckStat)
003980  4d6d              LDR      r5,|L1.15160|
003982  2400              MOVS     r4,#0                 ;6151
003984  8838              LDRH     r0,[r7,#0]            ;6151  ; speedChIsOn
003986  b198              CBZ      r0,|L1.14768|
003988  4a6c              LDR      r2,|L1.15164|
00398a  6811              LDR      r1,[r2,#0]            ;6153  ; speedChTimeCnt
00398c  f1010101          ADD      r1,r1,#1              ;6153
003990  6011              STR      r1,[r2,#0]            ;6153  ; speedChTimeCnt
003992  486b              LDR      r0,|L1.15168|
003994  f9b00000          LDRSH    r0,[r0,#0]            ;6154  ; speedChrgTimeInHour
003998  ebc01340          RSB      r3,r0,r0,LSL #5       ;6154
00399c  ebc32000          RSB      r0,r3,r0,LSL #8       ;6154
0039a0  ebb11f00          CMP      r1,r0,LSL #4          ;6154
0039a4  db00              BLT      |L1.14760|
0039a6  803c              STRH     r4,[r7,#0]            ;6156
                  |L1.14760|
0039a8  8828              LDRH     r0,[r5,#0]  ; speedChrgBlckStat
0039aa  b108              CBZ      r0,|L1.14768|
;;;6159   		{
;;;6160   		speedChIsOn=0;
0039ac  803c              STRH     r4,[r7,#0]
;;;6161   		speedChTimeCnt=0;
0039ae  6014              STR      r4,[r2,#0]  ; speedChTimeCnt
                  |L1.14768|
;;;6162   		}
;;;6163   	}
;;;6164   
;;;6165   
;;;6166   
;;;6167   if(speedChrgAvtEn)
0039b0  4864              LDR      r0,|L1.15172|
;;;6168   	{
;;;6169   	if(!speedChIsOn)
;;;6170   		{
;;;6171   		if((load_U<u_necc)&&((u_necc-load_U)>speedChrgDU)&&(abs(Ib_ips_termokompensat/10-IZMAX)<5)&&(!speedChrgBlckStat))
;;;6172   			{
;;;6173   			speedChIsOn=1;
0039b2  2601              MOVS     r6,#1
0039b4  8800              LDRH     r0,[r0,#0]            ;6167  ; speedChrgAvtEn
0039b6  b300              CBZ      r0,|L1.14842|
0039b8  8838              LDRH     r0,[r7,#0]            ;6169  ; speedChIsOn
0039ba  b9f0              CBNZ     r0,|L1.14842|
0039bc  4855              LDR      r0,|L1.15124|
0039be  4962              LDR      r1,|L1.15176|
0039c0  f9b00000          LDRSH    r0,[r0,#0]            ;6171  ; load_U
0039c4  f9b11000          LDRSH    r1,[r1,#0]            ;6171  ; u_necc
0039c8  4288              CMP      r0,r1                 ;6171
0039ca  da16              BGE      |L1.14842|
0039cc  1a08              SUBS     r0,r1,r0              ;6171
0039ce  495f              LDR      r1,|L1.15180|
0039d0  f9b11000          LDRSH    r1,[r1,#0]            ;6171  ; speedChrgDU
0039d4  4288              CMP      r0,r1                 ;6171
0039d6  dd10              BLE      |L1.14842|
0039d8  485d              LDR      r0,|L1.15184|
0039da  210a              MOVS     r1,#0xa               ;6171
0039dc  f9b00000          LDRSH    r0,[r0,#0]            ;6171  ; Ib_ips_termokompensat
0039e0  fb90f0f1          SDIV     r0,r0,r1              ;6171
0039e4  495b              LDR      r1,|L1.15188|
0039e6  8809              LDRH     r1,[r1,#0]            ;6171  ; IZMAX
0039e8  1a40              SUBS     r0,r0,r1              ;6171
0039ea  b200              SXTH     r0,r0                 ;6171
0039ec  f7fffffe          BL       abs
0039f0  2805              CMP      r0,#5                 ;6171
0039f2  da02              BGE      |L1.14842|
0039f4  8828              LDRH     r0,[r5,#0]            ;6171  ; speedChrgBlckStat
0039f6  b900              CBNZ     r0,|L1.14842|
0039f8  803e              STRH     r6,[r7,#0]
                  |L1.14842|
;;;6174   			}
;;;6175   		}
;;;6176   	}
;;;6177   
;;;6178   
;;;6179   
;;;6180   if((speedChrgBlckSrc!=1)&&(speedChrgBlckSrc!=2)) speedChrgBlckStat=0;
0039fa  4857              LDR      r0,|L1.15192|
0039fc  f9b00000          LDRSH    r0,[r0,#0]  ; speedChrgBlckSrc
003a00  2801              CMP      r0,#1
003a02  d003              BEQ      |L1.14860|
003a04  2802              CMP      r0,#2
003a06  d001              BEQ      |L1.14860|
003a08  802c              STRH     r4,[r5,#0]
003a0a  e026              B        |L1.14938|
                  |L1.14860|
;;;6181   else
;;;6182   	{
;;;6183   	speedChrgBlckStat=0;
003a0c  802c              STRH     r4,[r5,#0]
;;;6184   	if(speedChrgBlckSrc==1)
;;;6185   		{
;;;6186   		if(((speedChrgBlckLog==0)&&(adc_buff_[11]>2000)) || ((speedChrgBlckLog==1)&&(adc_buff_[11]<2000))) speedChrgBlckStat=1;
003a0e  4b53              LDR      r3,|L1.15196|
003a10  4953              LDR      r1,|L1.15200|
003a12  f44f62fa          MOV      r2,#0x7d0
003a16  2801              CMP      r0,#1                 ;6184
003a18  d002              BEQ      |L1.14880|
;;;6187   		}
;;;6188   	else if(speedChrgBlckSrc==2)
003a1a  2802              CMP      r0,#2
003a1c  d00f              BEQ      |L1.14910|
003a1e  e01c              B        |L1.14938|
                  |L1.14880|
003a20  f9b30000          LDRSH    r0,[r3,#0]            ;6186  ; speedChrgBlckLog
003a24  b918              CBNZ     r0,|L1.14894|
003a26  f9b13016          LDRSH    r3,[r1,#0x16]         ;6186  ; adc_buff_
003a2a  4293              CMP      r3,r2                 ;6186
003a2c  dc05              BGT      |L1.14906|
                  |L1.14894|
003a2e  2801              CMP      r0,#1                 ;6186
003a30  d113              BNE      |L1.14938|
003a32  f9b10016          LDRSH    r0,[r1,#0x16]         ;6186  ; adc_buff_
003a36  4290              CMP      r0,r2                 ;6186
003a38  da0f              BGE      |L1.14938|
                  |L1.14906|
003a3a  802e              STRH     r6,[r5,#0]            ;6186
003a3c  e00d              B        |L1.14938|
                  |L1.14910|
;;;6189   		{
;;;6190   		if(((speedChrgBlckLog==0)&&(adc_buff_[13]>2000)) || ((speedChrgBlckLog==1)&&(adc_buff_[13]<2000))) speedChrgBlckStat=1;
003a3e  f9b30000          LDRSH    r0,[r3,#0]  ; speedChrgBlckLog
003a42  b918              CBNZ     r0,|L1.14924|
003a44  f9b1301a          LDRSH    r3,[r1,#0x1a]  ; adc_buff_
003a48  4293              CMP      r3,r2
003a4a  dc05              BGT      |L1.14936|
                  |L1.14924|
003a4c  2801              CMP      r0,#1
003a4e  d104              BNE      |L1.14938|
003a50  f9b1001a          LDRSH    r0,[r1,#0x1a]  ; adc_buff_
003a54  4290              CMP      r0,r2
003a56  da00              BGE      |L1.14938|
                  |L1.14936|
003a58  802e              STRH     r6,[r5,#0]
                  |L1.14938|
;;;6191   		}
;;;6192   	}
;;;6193   
;;;6194   
;;;6195   if(speedChrgBlckStat==1)
003a5a  8828              LDRH     r0,[r5,#0]  ; speedChrgBlckStat
;;;6196   	{
;;;6197   
;;;6198   	//speedChargeStartStop();
;;;6199   
;;;6200   	speedChrgShowCnt++;
003a5c  4941              LDR      r1,|L1.15204|
003a5e  2801              CMP      r0,#1                 ;6195
003a60  d001              BEQ      |L1.14950|
;;;6201   	if(speedChrgShowCnt>=30)	
;;;6202   		{
;;;6203   		speedChrgShowCnt=0;
;;;6204   		show_mess(	"          ",
;;;6205   					"               ",
;;;6206   					"     !!!    ",
;;;6207   					"                    ",
;;;6208   					5000);
;;;6209   		}
;;;6210   	}
;;;6211   else speedChrgShowCnt=0;
003a62  700c              STRB     r4,[r1,#0]
                  |L1.14948|
;;;6212   
;;;6213   
;;;6214   }
003a64  bdf8              POP      {r3-r7,pc}
                  |L1.14950|
003a66  7808              LDRB     r0,[r1,#0]            ;6200  ; speedChrgShowCnt
003a68  f1000001          ADD      r0,r0,#1              ;6200
003a6c  b2c0              UXTB     r0,r0                 ;6200
003a6e  7008              STRB     r0,[r1,#0]            ;6200
003a70  281e              CMP      r0,#0x1e              ;6201
003a72  d3f7              BCC      |L1.14948|
003a74  700c              STRB     r4,[r1,#0]            ;6203
003a76  f2413088          MOV      r0,#0x1388            ;6204
003a7a  9000              STR      r0,[sp,#0]            ;6204
003a7c  a33a              ADR      r3,|L1.15208|
003a7e  a240              ADR      r2,|L1.15232|
003a80  a145              ADR      r1,|L1.15256|
003a82  a04b              ADR      r0,|L1.15280|
003a84  f7fffffe          BL       show_mess
003a88  bdf8              POP      {r3-r7,pc}
;;;6215   
                          ENDP

                  speedChargeStartStop PROC
;;;6216   //-----------------------------------------------
;;;6217   void speedChargeStartStop(void)
003a8a  b508              PUSH     {r3,lr}
;;;6218   {
;;;6219   if(speedChIsOn)
003a8c  4829              LDR      r0,|L1.15156|
003a8e  2100              MOVS     r1,#0
003a90  8802              LDRH     r2,[r0,#0]  ; speedChIsOn
003a92  b10a              CBZ      r2,|L1.15000|
;;;6220   	{
;;;6221   	speedChIsOn=0;
003a94  8001              STRH     r1,[r0,#0]
                  |L1.14998|
;;;6222   	}
;;;6223   
;;;6224   else
;;;6225   	{
;;;6226   	if(speedChrgBlckStat==0)
;;;6227   		{
;;;6228   		speedChIsOn=1;
;;;6229   		speedChTimeCnt=0;
;;;6230   		}
;;;6231   	else
;;;6232   		{
;;;6233   		show_mess(	"          ",
;;;6234   	          		"               ",
;;;6235   	          		"    !   ",
;;;6236   	          		"                    ",2000);	 
;;;6237   		}
;;;6238   	}
;;;6239   }
003a96  bd08              POP      {r3,pc}
                  |L1.15000|
003a98  e096              B        |L1.15304|
003a9a  0000              DCW      0x0000
                  |L1.15004|
003a9c  534b2023          DCB      "SK #2 Alarm is off",0
003aa0  3220416c
003aa4  61726d20
003aa8  6973206f
003aac  666600  
003aaf  00                DCB      0
                  |L1.15024|
003ab0  534b2023          DCB      "SK #3 Alarm is off",0
003ab4  3320416c
003ab8  61726d20
003abc  6973206f
003ac0  666600  
003ac3  00                DCB      0
                  |L1.15044|
003ac4  534b2023          DCB      "SK #4 Alarm is off",0
003ac8  3420416c
003acc  61726d20
003ad0  6973206f
003ad4  666600  
003ad7  00                DCB      0
                  |L1.15064|
                          DCD      NUMSK
                  |L1.15068|
                          DCD      sign_U
                  |L1.15072|
                          DCD      sign_I
                  |L1.15076|
                          DCD      bat
                  |L1.15080|
                          DCD      u_necc_up
                  |L1.15084|
                          DCD      TBAT
                  |L1.15088|
                          DCD      ||area_number.21||
                  |L1.15092|
                          DCD      u_necc_dn
                  |L1.15096|
                          DCD      IKB
                  |L1.15100|
                          DCD      BAT_C_REAL
                  |L1.15104|
                          DCD      NUMBAT
                  |L1.15108|
                          DCD      superviser_cnt
                  |L1.15112|
                          DCD      NPN_OUT
                  |L1.15116|
                          DCD      npn_tz_cnt
                  |L1.15120|
                          DCD      npn_stat
                  |L1.15124|
                          DCD      load_U
                  |L1.15128|
                          DCD      UONPN
                  |L1.15132|
                          DCD      net_Ua
                  |L1.15136|
                          DCD      net_Ub
                  |L1.15140|
                          DCD      net_Uc
                  |L1.15144|
                          DCD      UMN
                  |L1.15148|
                          DCD      TZNPN
                  |L1.15152|
                          DCD      UVNPN
                  |L1.15156|
                          DCD      speedChIsOn
                  |L1.15160|
                          DCD      speedChrgBlckStat
                  |L1.15164|
                          DCD      speedChTimeCnt
                  |L1.15168|
                          DCD      speedChrgTimeInHour
                  |L1.15172|
                          DCD      speedChrgAvtEn
                  |L1.15176|
                          DCD      u_necc
                  |L1.15180|
                          DCD      speedChrgDU
                  |L1.15184|
                          DCD      Ib_ips_termokompensat
                  |L1.15188|
                          DCD      IZMAX
                  |L1.15192|
                          DCD      speedChrgBlckSrc
                  |L1.15196|
                          DCD      speedChrgBlckLog
                  |L1.15200|
                          DCD      ||.bss||+0x400
                  |L1.15204|
                          DCD      speedChrgShowCnt
                  |L1.15208|
003b68  20202020          DCB      "                    ",0
003b6c  20202020
003b70  20202020
003b74  20202020
003b78  20202020
003b7c  00      
003b7d  00                DCB      0
003b7e  00                DCB      0
003b7f  00                DCB      0
                  |L1.15232|
003b80  20202020          DCB      "     ",199,192,207,208,197,217,197,205,"!!!    ",0
003b84  20c7c0cf
003b88  d0c5d9c5
003b8c  cd212121
003b90  20202020
003b94  00      
003b95  00                DCB      0
003b96  00                DCB      0
003b97  00                DCB      0
                  |L1.15256|
003b98  20202020          DCB      "       ",199,192,208,223,196,"        ",0
003b9c  202020c7
003ba0  c0d0dfc4
003ba4  20202020
003ba8  20202020
003bac  00      
003bad  00                DCB      0
003bae  00                DCB      0
003baf  00                DCB      0
                  |L1.15280|
003bb0  20202020          DCB      "     ",211,209,202,206,208,197,205,205,219,201,"     ",0
003bb4  20d3d1ca
003bb8  ced0c5cd
003bbc  cddbc920
003bc0  20202020
003bc4  00      
003bc5  00                DCB      0
003bc6  00                DCB      0
003bc7  00                DCB      0
                  |L1.15304|
003bc8  4af3              LDR      r2,|L1.16280|
003bca  8812              LDRH     r2,[r2,#0]            ;6226  ; speedChrgBlckStat
003bcc  b152              CBZ      r2,|L1.15332|
003bce  f44f60fa          MOV      r0,#0x7d0             ;6233
003bd2  f2af036c          ADR      r3,|L1.15208|
003bd6  9000              STR      r0,[sp,#0]            ;6233
003bd8  a2f0              ADR      r2,|L1.16284|
003bda  a1f6              ADR      r1,|L1.16308|
003bdc  a0fb              ADR      r0,|L1.16332|
003bde  f7fffffe          BL       show_mess
003be2  e758              B        |L1.14998|
                  |L1.15332|
003be4  f04f0201          MOV      r2,#1                 ;6228
003be8  8002              STRH     r2,[r0,#0]            ;6228
003bea  48fe              LDR      r0,|L1.16356|
003bec  6001              STR      r1,[r0,#0]            ;6229  ; speedChTimeCnt
003bee  e752              B        |L1.14998|
;;;6240   
                          ENDP

                  numOfForvardBps_hndl PROC
;;;6241   //-----------------------------------------------
;;;6242   void	numOfForvardBps_hndl(void)			//       
003bf0  e92d41f0          PUSH     {r4-r8,lr}
;;;6243   {
;;;6244   numOfForvardBps=0;
003bf4  4cfc              LDR      r4,|L1.16360|
003bf6  f04f0500          MOV      r5,#0
003bfa  7625              STRB     r5,[r4,#0x18]
;;;6245   
;;;6246   //FORVARDBPSCHHOUR=10;
;;;6247   
;;;6248   if((FORVARDBPSCHHOUR<=0)||(FORVARDBPSCHHOUR>500))
003bfc  4efb              LDR      r6,|L1.16364|
003bfe  f9b60000          LDRSH    r0,[r6,#0]  ; FORVARDBPSCHHOUR
003c02  2800              CMP      r0,#0
003c04  dd02              BLE      |L1.15372|
003c06  f5b07ffa          CMP      r0,#0x1f4
003c0a  dd02              BLE      |L1.15378|
                  |L1.15372|
;;;6249   	{
;;;6250   	FORVARDBPSCHHOUR=0;
003c0c  8035              STRH     r5,[r6,#0]
                  |L1.15374|
;;;6251   	return;
;;;6252   	}
;;;6253   
;;;6254   numOfForvardBps_minCnt++;
;;;6255   
;;;6256   
;;;6257   if(numOfForvardBps_minCnt>=60)
;;;6258   	{
;;;6259   	numOfForvardBps_minCnt=0;
;;;6260   	numOfForvardBps_hourCnt=lc640_read_int(EE_FORVBPSHOURCNT);
;;;6261   	numOfForvardBps_hourCnt++;
;;;6262   	if(numOfForvardBps_hourCnt>=(FORVARDBPSCHHOUR*NUMIST))
;;;6263   		{
;;;6264   		numOfForvardBps_hourCnt=0;
;;;6265   		}
;;;6266   	lc640_write_int(EE_FORVBPSHOURCNT,numOfForvardBps_hourCnt);
;;;6267   	}
;;;6268   
;;;6269   numOfForvardBps=numOfForvardBps_hourCnt/FORVARDBPSCHHOUR; 
;;;6270   }
003c0e  e8bd81f0          POP      {r4-r8,pc}
                  |L1.15378|
003c12  7e60              LDRB     r0,[r4,#0x19]         ;6254  ; numOfForvardBps_minCnt
003c14  f1000001          ADD      r0,r0,#1              ;6254
003c18  b2c0              UXTB     r0,r0                 ;6254
003c1a  7660              STRB     r0,[r4,#0x19]         ;6254
003c1c  283c              CMP      r0,#0x3c              ;6257
003c1e  d31a              BCC      |L1.15446|
003c20  7665              STRB     r5,[r4,#0x19]         ;6259
003c22  f44f7794          MOV      r7,#0x128             ;6260
003c26  4638              MOV      r0,r7                 ;6260
003c28  f7fffffe          BL       lc640_read_int
003c2c  f1000001          ADD      r0,r0,#1              ;6261
003c30  b200              SXTH     r0,r0                 ;6261
003c32  f8a4005e          STRH     r0,[r4,#0x5e]         ;6261
003c36  4aee              LDR      r2,|L1.16368|
003c38  f9b61000          LDRSH    r1,[r6,#0]            ;6262  ; FORVARDBPSCHHOUR
003c3c  f9b22000          LDRSH    r2,[r2,#0]            ;6262  ; NUMIST
003c40  fb01f102          MUL      r1,r1,r2              ;6262
003c44  4281              CMP      r1,r0                 ;6262
003c46  dc01              BGT      |L1.15436|
003c48  f8a4505e          STRH     r5,[r4,#0x5e]         ;6264
                  |L1.15436|
003c4c  f9b4105e          LDRSH    r1,[r4,#0x5e]         ;6266  ; numOfForvardBps_hourCnt
003c50  4638              MOV      r0,r7                 ;6266
003c52  f7fffffe          BL       lc640_write_int
                  |L1.15446|
003c56  f9b4005e          LDRSH    r0,[r4,#0x5e]         ;6269  ; numOfForvardBps_hourCnt
003c5a  f9b61000          LDRSH    r1,[r6,#0]            ;6269  ; FORVARDBPSCHHOUR
003c5e  fb90f0f1          SDIV     r0,r0,r1              ;6269
003c62  7620              STRB     r0,[r4,#0x18]         ;6269
003c64  e7d3              B        |L1.15374|
;;;6271   
                          ENDP

                  numOfForvardBps_init PROC
;;;6272   //-----------------------------------------------
;;;6273   void	numOfForvardBps_init(void)			//         
003c66  b510              PUSH     {r4,lr}
;;;6274   {									//    -   
;;;6275   lc640_write_int(EE_FORVBPSHOURCNT,0);
003c68  2100              MOVS     r1,#0
003c6a  f44f7094          MOV      r0,#0x128
003c6e  f7fffffe          BL       lc640_write_int
;;;6276   numOfForvardBps_minCnt=0;
003c72  49dd              LDR      r1,|L1.16360|
003c74  f04f0000          MOV      r0,#0
003c78  7648              STRB     r0,[r1,#0x19]
;;;6277   }
003c7a  bd10              POP      {r4,pc}
;;;6278   
                          ENDP

                  outVoltContrHndl PROC
;;;6279   //-----------------------------------------------
;;;6280   void outVoltContrHndl(void)
003c7c  b570              PUSH     {r4-r6,lr}
;;;6281   { 
;;;6282   if((load_U>U_OUT_KONTR_MAX)||(load_U<U_OUT_KONTR_MIN))
003c7e  4cdd              LDR      r4,|L1.16372|
003c80  48dd              LDR      r0,|L1.16376|
;;;6283   	{
;;;6284   	outVoltContrHndlCnt_=0;
;;;6285   	if(outVoltContrHndlCnt<U_OUT_KONTR_DELAY)
003c82  4ade              LDR      r2,|L1.16380|
003c84  f9b41000          LDRSH    r1,[r4,#0]            ;6282  ; load_U
003c88  f9b06000          LDRSH    r6,[r0,#0]            ;6282  ; U_OUT_KONTR_MAX
003c8c  2500              MOVS     r5,#0                 ;6284
003c8e  f9b20000          LDRSH    r0,[r2,#0]
003c92  4bdb              LDR      r3,|L1.16384|
003c94  42b1              CMP      r1,r6                 ;6282
003c96  dc04              BGT      |L1.15522|
003c98  4eda              LDR      r6,|L1.16388|
003c9a  f9b66000          LDRSH    r6,[r6,#0]            ;6282  ; U_OUT_KONTR_MIN
003c9e  42b1              CMP      r1,r6                 ;6282
003ca0  da0f              BGE      |L1.15554|
                  |L1.15522|
003ca2  801d              STRH     r5,[r3,#0]            ;6284
003ca4  49d8              LDR      r1,|L1.16392|
003ca6  f9b11000          LDRSH    r1,[r1,#0]  ; U_OUT_KONTR_DELAY
003caa  4288              CMP      r0,r1
003cac  da1b              BGE      |L1.15590|
;;;6286   		{
;;;6287   		outVoltContrHndlCnt++;
003cae  f1000001          ADD      r0,r0,#1
003cb2  b200              SXTH     r0,r0
003cb4  8010              STRH     r0,[r2,#0]
;;;6288   		if(outVoltContrHndlCnt==U_OUT_KONTR_DELAY)
003cb6  4288              CMP      r0,r1
003cb8  d115              BNE      |L1.15590|
;;;6289   			{
;;;6290   			avar_uout_hndl(1);
003cba  2001              MOVS     r0,#1
003cbc  f7fffffe          BL       avar_uout_hndl
003cc0  e011              B        |L1.15590|
                  |L1.15554|
;;;6291   			}
;;;6292   		}
;;;6293   	}
;;;6294   else
;;;6295   	{
;;;6296   	if(outVoltContrHndlCnt)
003cc2  b180              CBZ      r0,|L1.15590|
;;;6297   		{
;;;6298   		if(outVoltContrHndlCnt_<5)
003cc4  f9b30000          LDRSH    r0,[r3,#0]  ; outVoltContrHndlCnt_
003cc8  2805              CMP      r0,#5
003cca  da0c              BGE      |L1.15590|
;;;6299   			{
;;;6300   			outVoltContrHndlCnt_++;
003ccc  f1000001          ADD      r0,r0,#1
003cd0  b200              SXTH     r0,r0
003cd2  8018              STRH     r0,[r3,#0]
;;;6301   			if(outVoltContrHndlCnt_>=5)
003cd4  2805              CMP      r0,#5
003cd6  db06              BLT      |L1.15590|
;;;6302   				{
;;;6303   				outVoltContrHndlCnt=0;
003cd8  8015              STRH     r5,[r2,#0]
;;;6304   				if(uout_av)avar_uout_hndl(0);
003cda  48cc              LDR      r0,|L1.16396|
003cdc  7800              LDRB     r0,[r0,#0]  ; uout_av
003cde  b110              CBZ      r0,|L1.15590|
003ce0  2000              MOVS     r0,#0
003ce2  f7fffffe          BL       avar_uout_hndl
                  |L1.15590|
;;;6305   				}
;;;6306   			}
;;;6307   		}
;;;6308   	}
;;;6309   
;;;6310   if (load_U<(USIGN*10)) 
003ce6  48ca              LDR      r0,|L1.16400|
003ce8  f9b41000          LDRSH    r1,[r4,#0]  ; load_U
003cec  f9b00000          LDRSH    r0,[r0,#0]  ; USIGN
003cf0  eb000080          ADD      r0,r0,r0,LSL #2
003cf4  ebb10f40          CMP      r1,r0,LSL #1
003cf8  da0b              BGE      |L1.15634|
;;;6311   	{
;;;6312   	if(!bSILENT)
003cfa  48c6              LDR      r0,|L1.16404|
003cfc  6800              LDR      r0,[r0,#0]  ; bSILENT
003cfe  2800              CMP      r0,#0
003d00  d107              BNE      |L1.15634|
;;;6313   		{
;;;6314   		mess_send(MESS2RELE_HNDL,PARAM_RELE_BAT_IS_DISCHARGED,1,20);
003d02  e8bd4070          POP      {r4-r6,lr}
003d06  2314              MOVS     r3,#0x14
003d08  2201              MOVS     r2,#1
003d0a  2172              MOVS     r1,#0x72
003d0c  20d2              MOVS     r0,#0xd2
003d0e  f7ffbffe          B.W      mess_send
                  |L1.15634|
;;;6315   		}
;;;6316   
;;;6317   	//bU_BAT2REL_AV_BAT=1;
;;;6318   	}
;;;6319   
;;;6320   
;;;6321   }
003d12  bd70              POP      {r4-r6,pc}
;;;6322   
                          ENDP

                  vent_hndl PROC
;;;6323   //-----------------------------------------------
;;;6324   void vent_hndl(void)
003d14  e92d4ff0          PUSH     {r4-r11,lr}
;;;6325   {
003d18  b087              SUB      sp,sp,#0x1c
;;;6326   if(RELEVENTSIGN==rvsAKB)
003d1a  48bf              LDR      r0,|L1.16408|
;;;6327   	{
;;;6328   	if(vent_stat==0)
003d1c  4cb2              LDR      r4,|L1.16360|
;;;6329   		{
;;;6330   		if	(
;;;6331   			(BAT_IS_ON[0]==bisON)&&((bat[0]._Tb>TVENTON)||(bat[0]._nd))
003d1e  49bf              LDR      r1,|L1.16412|
;;;6332   			||
;;;6333   			(BAT_IS_ON[1]==bisON)&&((bat[1]._Tb>TVENTON)||(bat[1]._nd))
;;;6334   			)
;;;6335   			{
;;;6336   			vent_stat=1;
;;;6337   			}
;;;6338   		}
;;;6339   	else if(vent_stat==1)
;;;6340   		{
;;;6341   		if	(
;;;6342   			((BAT_IS_ON[0]!=bisON)||((BAT_IS_ON[0]==bisON)&&(bat[0]._Tb<TVENTOFF)&&(!bat[0]._nd)))
003d20  4abf              LDR      r2,|L1.16416|
003d22  7800              LDRB     r0,[r0,#0]            ;6326  ; RELEVENTSIGN
003d24  f9943000          LDRSB    r3,[r4,#0]            ;6328
003d28  f9b11000          LDRSH    r1,[r1,#0]            ;6331
003d2c  f9b22000          LDRSH    r2,[r2,#0]
003d30  b148              CBZ      r0,|L1.15686|
;;;6343   			&&
;;;6344   			((BAT_IS_ON[1]!=bisON)||((BAT_IS_ON[1]==bisON)&&(bat[1]._Tb<TVENTOFF)&&(!bat[1]._nd)))
;;;6345   			)
;;;6346   			{
;;;6347   			vent_stat=0;
;;;6348   			}
;;;6349   		}
;;;6350   	}
;;;6351   else if(RELEVENTSIGN==rvsBPS)
003d32  2802              CMP      r0,#2
003d34  d03c              BEQ      |L1.15792|
;;;6352   	{
;;;6353   /*	if	(
;;;6354   		(((bps[0]._flags_tm&0x06)||(bps[0]._cnt>=30)))||
;;;6355   		(((bps[1]._flags_tm&0x06)||(bps[1]._cnt>=30))&&(NUMIST>1))||
;;;6356   		(((bps[2]._flags_tm&0x06)||(bps[2]._cnt>=30))&&(NUMIST>2))||
;;;6357   		(((bps[3]._flags_tm&0x06)||(bps[3]._cnt>=30))&&(NUMIST>3))||
;;;6358   		(((bps[4]._flags_tm&0x06)||(bps[4]._cnt>=30))&&(NUMIST>4))||
;;;6359   		(((bps[5]._flags_tm&0x06)||(bps[5]._cnt>=30))&&(NUMIST>5))||
;;;6360   		(((bps[6]._flags_tm&0x06)||(bps[6]._cnt>=30))&&(NUMIST>6))
;;;6361   		)
;;;6362   		{
;;;6363   		vent_stat=1;
;;;6364   		}
;;;6365   	else vent_stat=0;
;;;6366   	*/
;;;6367   
;;;6368   	if	(
;;;6369   		((NUMIST)&&((bps[0]._Ti>TVENTON)||(bps[0]._cnt>=30)))
;;;6370   		||
;;;6371   		((NUMIST>1)&&((bps[1]._Ti>TVENTON)||(bps[1]._cnt>=30)))
;;;6372   		||
;;;6373   		((NUMIST>2)&&((bps[2]._Ti>TVENTON)||(bps[2]._cnt>=30)))
;;;6374   		||
;;;6375   		((NUMIST>3)&&((bps[3]._Ti>TVENTON)||(bps[3]._cnt>=30)))
;;;6376   		||
;;;6377   		((NUMIST>4)&&((bps[4]._Ti>TVENTON)||(bps[4]._cnt>=30)))
;;;6378   		||
;;;6379   		((NUMIST>5)&&((bps[5]._Ti>TVENTON)||(bps[5]._cnt>=30)))
;;;6380   		||
;;;6381   		((NUMIST>6)&&((bps[6]._Ti>TVENTON)||(bps[6]._cnt>=30)))
;;;6382   		||
;;;6383   		((NUMIST>7)&&((bps[7]._Ti>TVENTON)||(bps[7]._cnt>=30)))
;;;6384   		)
;;;6385   		{
;;;6386   		vent_stat=1;
;;;6387   		}
;;;6388   	else if(vent_stat==1)
;;;6389   		{
;;;6390   		if	(
;;;6391   			((!NUMIST)||((NUMIST)&&(bps[0]._Ti<TVENTOFF)&&(bps[0]._cnt<10)))
;;;6392   			&&
;;;6393   			((NUMIST<2)||((NUMIST>=2)&&(bps[1]._Ti<TVENTOFF)&&(bps[1]._cnt<10)))
;;;6394   			&&
;;;6395   			((NUMIST<3)||((NUMIST>=3)&&(bps[2]._Ti<TVENTOFF)&&(bps[2]._cnt<10)))
;;;6396   			&&
;;;6397   			((NUMIST<4)||((NUMIST>=4)&&(bps[3]._Ti<TVENTOFF)&&(bps[3]._cnt<10)))
;;;6398   			&&
;;;6399   			((NUMIST<5)||((NUMIST>=5)&&(bps[4]._Ti<TVENTOFF)&&(bps[4]._cnt<10)))
;;;6400   			&&
;;;6401   			((NUMIST<6)||((NUMIST>=6)&&(bps[5]._Ti<TVENTOFF)&&(bps[5]._cnt<10)))
;;;6402   			&&
;;;6403   			((NUMIST<7)||((NUMIST>=7)&&(bps[6]._Ti<TVENTOFF)&&(bps[6]._cnt<10)))
;;;6404   			&&
;;;6405   			((NUMIST<8)||((NUMIST>=8)&&(bps[7]._Ti<TVENTOFF)&&(bps[7]._cnt<10)))
;;;6406   			)
;;;6407   			{
;;;6408   			vent_stat=0;
;;;6409   			}
;;;6410   		}
;;;6411   	}
;;;6412   else if(RELEVENTSIGN==rvsEXT)
003d36  2801              CMP      r0,#1
003d38  d07e              BEQ      |L1.15928|
;;;6413   	{
;;;6414   	if	(
;;;6415   		((NUMDT)&&((t_ext[0]>TVENTON)||(ND_EXT[0])))
;;;6416   		||
;;;6417   		((NUMDT>1)&&((t_ext[1]>TVENTON)||(ND_EXT[1])))
;;;6418   		||
;;;6419   		((NUMDT>2)&&((t_ext[2]>TVENTON)||(ND_EXT[2])))
;;;6420   		)
;;;6421   		{
;;;6422   		vent_stat=1;
;;;6423   		}
;;;6424   	else if(vent_stat==1)
;;;6425   		{
;;;6426   		if	(
;;;6427   			((!NUMDT)||((NUMDT)&&(t_ext[0]<TVENTOFF)&&(!ND_EXT[0])))
;;;6428   			&&
;;;6429   			((NUMDT<2)||((NUMDT>=2)&&(t_ext[1]<TVENTOFF)&&(!ND_EXT[1])))
;;;6430   			&&
;;;6431   			((NUMDT<3)||((NUMDT>=3)&&(t_ext[2]<TVENTOFF)&&(!ND_EXT[2])))
;;;6432   			)
;;;6433   			{
;;;6434   			vent_stat=0;
;;;6435   			}
;;;6436   		}
;;;6437   	}
;;;6438   else vent_stat=1;
003d3a  f04f0001          MOV      r0,#1
003d3e  7020              STRB     r0,[r4,#0]
                  |L1.15680|
;;;6439   }
003d40  b007              ADD      sp,sp,#0x1c
003d42  e8bd8ff0          POP      {r4-r11,pc}
                  |L1.15686|
003d46  4fb7              LDR      r7,|L1.16420|
003d48  f8df82dc          LDR      r8,|L1.16424|
003d4c  f9b7000a          LDRSH    r0,[r7,#0xa]          ;6331
003d50  7b3d              LDRB     r5,[r7,#0xc]          ;6331
003d52  f9b76056          LDRSH    r6,[r7,#0x56]         ;6333
003d56  f898c000          LDRB     r12,[r8,#0]           ;6330
003d5a  f8977058          LDRB     r7,[r7,#0x58]         ;6333
003d5e  f8988001          LDRB     r8,[r8,#1]            ;6333
003d62  b12b              CBZ      r3,|L1.15728|
003d64  2b01              CMP      r3,#1                 ;6339
003d66  d1eb              BNE      |L1.15680|
003d68  f1bc0f55          CMP      r12,#0x55             ;6341
003d6c  d115              BNE      |L1.15770|
003d6e  e010              B        |L1.15762|
                  |L1.15728|
003d70  f1bc0f55          CMP      r12,#0x55             ;6330
003d74  d102              BNE      |L1.15740|
003d76  4288              CMP      r0,r1                 ;6331
003d78  dc07              BGT      |L1.15754|
003d7a  b935              CBNZ     r5,|L1.15754|
                  |L1.15740|
003d7c  f1b80f55          CMP      r8,#0x55              ;6333
003d80  d1de              BNE      |L1.15680|
003d82  428e              CMP      r6,r1                 ;6333
003d84  dc01              BGT      |L1.15754|
003d86  2f00              CMP      r7,#0                 ;6333
003d88  d0da              BEQ      |L1.15680|
                  |L1.15754|
003d8a  f04f0001          MOV      r0,#1                 ;6336
003d8e  7020              STRB     r0,[r4,#0]            ;6336
003d90  e7d6              B        |L1.15680|
                  |L1.15762|
003d92  4290              CMP      r0,r2                 ;6342
003d94  dad4              BGE      |L1.15680|
003d96  2d00              CMP      r5,#0                 ;6342
003d98  d1d2              BNE      |L1.15680|
                  |L1.15770|
003d9a  f1b80f55          CMP      r8,#0x55              ;6344
003d9e  d103              BNE      |L1.15784|
003da0  4296              CMP      r6,r2                 ;6344
003da2  dacd              BGE      |L1.15680|
003da4  2f00              CMP      r7,#0                 ;6344
003da6  d1cb              BNE      |L1.15680|
                  |L1.15784|
003da8  f04f0000          MOV      r0,#0                 ;6347
003dac  7020              STRB     r0,[r4,#0]            ;6347
003dae  e7c7              B        |L1.15680|
                  |L1.15792|
003db0  4e9e              LDR      r6,|L1.16428|
003db2  488f              LDR      r0,|L1.16368|
003db4  6ab5              LDR      r5,[r6,#0x28]         ;6369
003db6  f9b00000          LDRSH    r0,[r0,#0]            ;6368  ; NUMIST
003dba  78f6              LDRB     r6,[r6,#3]            ;6369
003dbc  b118              CBZ      r0,|L1.15814|
003dbe  428d              CMP      r5,r1                 ;6369
003dc0  dc7a              BGT      |L1.16056|
003dc2  2e1e              CMP      r6,#0x1e              ;6369
003dc4  d278              BCS      |L1.16056|
                  |L1.15814|
003dc6  f8dfc264          LDR      r12,|L1.16428|
003dca  2801              CMP      r0,#1                 ;6371
003dcc  f8dc707c          LDR      r7,[r12,#0x7c]        ;6371
003dd0  f89cc057          LDRB     r12,[r12,#0x57]       ;6371
003dd4  f8cdc018          STR      r12,[sp,#0x18]        ;6371
003dd8  dd06              BLE      |L1.15848|
003dda  428f              CMP      r7,r1                 ;6371
003ddc  dc6c              BGT      |L1.16056|
003dde  f8ddc018          LDR      r12,[sp,#0x18]        ;6371
003de2  f1bc0f1e          CMP      r12,#0x1e             ;6371
003de6  d267              BCS      |L1.16056|
                  |L1.15848|
003de8  f8dfc240          LDR      r12,|L1.16428|
003dec  2802              CMP      r0,#2                 ;6373
003dee  f8dc80d0          LDR      r8,[r12,#0xd0]        ;6373
003df2  f8cd8014          STR      r8,[sp,#0x14]         ;6373
003df6  f89cc0ab          LDRB     r12,[r12,#0xab]       ;6373
003dfa  f8cdc010          STR      r12,[sp,#0x10]        ;6373
003dfe  dd08              BLE      |L1.15890|
003e00  f8ddc014          LDR      r12,[sp,#0x14]        ;6373
003e04  458c              CMP      r12,r1                ;6373
003e06  dc57              BGT      |L1.16056|
003e08  f8ddc010          LDR      r12,[sp,#0x10]        ;6373
003e0c  f1bc0f1e          CMP      r12,#0x1e             ;6373
003e10  d252              BCS      |L1.16056|
                  |L1.15890|
003e12  f8dfc218          LDR      r12,|L1.16428|
003e16  2803              CMP      r0,#3                 ;6375
003e18  f8dc8124          LDR      r8,[r12,#0x124]       ;6375
003e1c  f8cd800c          STR      r8,[sp,#0xc]          ;6375
003e20  f89cc0ff          LDRB     r12,[r12,#0xff]       ;6375
003e24  f8cdc008          STR      r12,[sp,#8]           ;6375
003e28  dd0a              BLE      |L1.15936|
003e2a  f8ddc00c          LDR      r12,[sp,#0xc]         ;6375
003e2e  458c              CMP      r12,r1                ;6375
003e30  dc42              BGT      |L1.16056|
003e32  f8ddc008          LDR      r12,[sp,#8]           ;6375
003e36  e000              B        |L1.15930|
                  |L1.15928|
003e38  e080              B        |L1.16188|
                  |L1.15930|
003e3a  f1bc0f1e          CMP      r12,#0x1e             ;6375
003e3e  d23b              BCS      |L1.16056|
                  |L1.15936|
003e40  f8df81e8          LDR      r8,|L1.16428|
003e44  2804              CMP      r0,#4                 ;6377
003e46  f8d8c178          LDR      r12,[r8,#0x178]       ;6377
003e4a  f8988153          LDRB     r8,[r8,#0x153]        ;6377
003e4e  f8cd8004          STR      r8,[sp,#4]            ;6377
003e52  dd06              BLE      |L1.15970|
003e54  458c              CMP      r12,r1                ;6377
003e56  dc2f              BGT      |L1.16056|
003e58  f8dd8004          LDR      r8,[sp,#4]            ;6377
003e5c  f1b80f1e          CMP      r8,#0x1e              ;6377
003e60  d22a              BCS      |L1.16056|
                  |L1.15970|
003e62  f8df91c8          LDR      r9,|L1.16428|
003e66  2805              CMP      r0,#5                 ;6379
003e68  f8d981cc          LDR      r8,[r9,#0x1cc]        ;6379
003e6c  f89991a7          LDRB     r9,[r9,#0x1a7]        ;6379
003e70  f8cd9000          STR      r9,[sp,#0]            ;6379
003e74  dd06              BLE      |L1.16004|
003e76  4588              CMP      r8,r1                 ;6379
003e78  dc1e              BGT      |L1.16056|
003e7a  f8dd9000          LDR      r9,[sp,#0]            ;6379
003e7e  f1b90f1e          CMP      r9,#0x1e              ;6379
003e82  d219              BCS      |L1.16056|
                  |L1.16004|
003e84  f8dfa1a4          LDR      r10,|L1.16428|
003e88  2806              CMP      r0,#6                 ;6381
003e8a  f89ae1fb          LDRB     lr,[r10,#0x1fb]       ;6381
003e8e  f8da9220          LDR      r9,[r10,#0x220]       ;6381
003e92  dd04              BLE      |L1.16030|
003e94  4589              CMP      r9,r1                 ;6381
003e96  dc0f              BGT      |L1.16056|
003e98  f1be0f1e          CMP      lr,#0x1e              ;6381
003e9c  d20c              BCS      |L1.16056|
                  |L1.16030|
003e9e  f8dfb18c          LDR      r11,|L1.16428|
003ea2  2807              CMP      r0,#7                 ;6383
003ea4  f8dba274          LDR      r10,[r11,#0x274]      ;6383
003ea8  f89bb24f          LDRB     r11,[r11,#0x24f]      ;6383
003eac  dd08              BLE      |L1.16064|
003eae  458a              CMP      r10,r1                ;6383
003eb0  dc02              BGT      |L1.16056|
003eb2  f1bb0f1e          CMP      r11,#0x1e             ;6383
003eb6  d303              BCC      |L1.16064|
                  |L1.16056|
003eb8  f04f0001          MOV      r0,#1                 ;6386
003ebc  7020              STRB     r0,[r4,#0]            ;6386
                  |L1.16062|
003ebe  e73f              B        |L1.15680|
                  |L1.16064|
003ec0  2b01              CMP      r3,#1                 ;6388
003ec2  d1fc              BNE      |L1.16062|
003ec4  b118              CBZ      r0,|L1.16078|
003ec6  4295              CMP      r5,r2                 ;6391
003ec8  daf9              BGE      |L1.16062|
003eca  2e0a              CMP      r6,#0xa               ;6391
003ecc  d2f7              BCS      |L1.16062|
                  |L1.16078|
003ece  2802              CMP      r0,#2                 ;6393
003ed0  db04              BLT      |L1.16092|
003ed2  4297              CMP      r7,r2                 ;6393
003ed4  daf3              BGE      |L1.16062|
003ed6  9906              LDR      r1,[sp,#0x18]         ;6393
003ed8  290a              CMP      r1,#0xa               ;6393
003eda  d2f0              BCS      |L1.16062|
                  |L1.16092|
003edc  2803              CMP      r0,#3                 ;6395
003ede  db05              BLT      |L1.16108|
003ee0  9905              LDR      r1,[sp,#0x14]         ;6395
003ee2  4291              CMP      r1,r2                 ;6395
003ee4  daeb              BGE      |L1.16062|
003ee6  9904              LDR      r1,[sp,#0x10]         ;6395
003ee8  290a              CMP      r1,#0xa               ;6395
003eea  d2e8              BCS      |L1.16062|
                  |L1.16108|
003eec  2804              CMP      r0,#4                 ;6397
003eee  db05              BLT      |L1.16124|
003ef0  9903              LDR      r1,[sp,#0xc]          ;6397
003ef2  4291              CMP      r1,r2                 ;6397
003ef4  dae3              BGE      |L1.16062|
003ef6  9902              LDR      r1,[sp,#8]            ;6397
003ef8  290a              CMP      r1,#0xa               ;6397
003efa  d2e0              BCS      |L1.16062|
                  |L1.16124|
003efc  2805              CMP      r0,#5                 ;6399
003efe  db04              BLT      |L1.16138|
003f00  4594              CMP      r12,r2                ;6399
003f02  dadc              BGE      |L1.16062|
003f04  9901              LDR      r1,[sp,#4]            ;6399
003f06  290a              CMP      r1,#0xa               ;6399
003f08  d2d9              BCS      |L1.16062|
                  |L1.16138|
003f0a  2806              CMP      r0,#6                 ;6401
003f0c  db04              BLT      |L1.16152|
003f0e  4590              CMP      r8,r2                 ;6401
003f10  dad5              BGE      |L1.16062|
003f12  9900              LDR      r1,[sp,#0]            ;6401
003f14  290a              CMP      r1,#0xa               ;6401
003f16  d2d2              BCS      |L1.16062|
                  |L1.16152|
003f18  2807              CMP      r0,#7                 ;6403
003f1a  db04              BLT      |L1.16166|
003f1c  4591              CMP      r9,r2                 ;6403
003f1e  dace              BGE      |L1.16062|
003f20  f1be0f0a          CMP      lr,#0xa               ;6403
003f24  d2cb              BCS      |L1.16062|
                  |L1.16166|
003f26  2808              CMP      r0,#8                 ;6405
003f28  db04              BLT      |L1.16180|
003f2a  4592              CMP      r10,r2                ;6405
003f2c  dac7              BGE      |L1.16062|
003f2e  f1bb0f0a          CMP      r11,#0xa              ;6405
003f32  d2c4              BCS      |L1.16062|
                  |L1.16180|
003f34  f04f0000          MOV      r0,#0                 ;6408
003f38  7020              STRB     r0,[r4,#0]            ;6408
003f3a  e701              B        |L1.15680|
                  |L1.16188|
003f3c  483c              LDR      r0,|L1.16432|
003f3e  4d3d              LDR      r5,|L1.16436|
003f40  4e3d              LDR      r6,|L1.16440|
003f42  f9b00000          LDRSH    r0,[r0,#0]            ;6414  ; NUMDT
003f46  f9b55000          LDRSH    r5,[r5,#0]            ;6415
003f4a  6836              LDR      r6,[r6,#0]            ;6415
003f4c  b110              CBZ      r0,|L1.16212|
003f4e  428d              CMP      r5,r1                 ;6415
003f50  dc1d              BGT      |L1.16270|
003f52  b9e6              CBNZ     r6,|L1.16270|
                  |L1.16212|
003f54  4f37              LDR      r7,|L1.16436|
003f56  f8dfc0e0          LDR      r12,|L1.16440|
003f5a  2801              CMP      r0,#1                 ;6417
003f5c  f9b77002          LDRSH    r7,[r7,#2]            ;6417
003f60  f8dcc004          LDR      r12,[r12,#4]          ;6417
003f64  dd04              BLE      |L1.16240|
003f66  428f              CMP      r7,r1                 ;6417
003f68  dc11              BGT      |L1.16270|
003f6a  f1bc0f00          CMP      r12,#0                ;6417
003f6e  d10e              BNE      |L1.16270|
                  |L1.16240|
003f70  f8df80c0          LDR      r8,|L1.16436|
003f74  f8df90c0          LDR      r9,|L1.16440|
003f78  2802              CMP      r0,#2                 ;6419
003f7a  f9b88004          LDRSH    r8,[r8,#4]            ;6419
003f7e  f8d99008          LDR      r9,[r9,#8]            ;6419
003f82  dd5b              BLE      |L1.16444|
003f84  4588              CMP      r8,r1                 ;6419
003f86  dc02              BGT      |L1.16270|
003f88  f1b90f00          CMP      r9,#0                 ;6419
003f8c  d056              BEQ      |L1.16444|
                  |L1.16270|
003f8e  f04f0001          MOV      r0,#1                 ;6422
003f92  7020              STRB     r0,[r4,#0]            ;6422
                  |L1.16276|
003f94  e6d4              B        |L1.15680|
003f96  0000              DCW      0x0000
                  |L1.16280|
                          DCD      speedChrgBlckStat
                  |L1.16284|
003f9c  20202020          DCB      "    ",231,224,225,235,238,234,232,240,238,226,224,237,"!"
003fa0  e7e0e1eb
003fa4  eeeae8f0
003fa8  eee2e0ed
003fac  21      
003fad  20202000          DCB      "   ",0
003fb1  00                DCB      0
003fb2  00                DCB      0
003fb3  00                DCB      0
                  |L1.16308|
003fb4  20202020          DCB      "       ",231,224,240,255,228,"        ",0
003fb8  202020e7
003fbc  e0f0ffe4
003fc0  20202020
003fc4  20202020
003fc8  00      
003fc9  00                DCB      0
003fca  00                DCB      0
003fcb  00                DCB      0
                  |L1.16332|
003fcc  20202020          DCB      "     ",211,241,234,238,240,229,237,237,251,233,"     ",0
003fd0  20d3f1ea
003fd4  eef0e5ed
003fd8  edfbe920
003fdc  20202020
003fe0  00      
003fe1  00                DCB      0
003fe2  00                DCB      0
003fe3  00                DCB      0
                  |L1.16356|
                          DCD      speedChTimeCnt
                  |L1.16360|
                          DCD      ||area_number.21||
                  |L1.16364|
                          DCD      FORVARDBPSCHHOUR
                  |L1.16368|
                          DCD      NUMIST
                  |L1.16372|
                          DCD      load_U
                  |L1.16376|
                          DCD      U_OUT_KONTR_MAX
                  |L1.16380|
                          DCD      outVoltContrHndlCnt
                  |L1.16384|
                          DCD      outVoltContrHndlCnt_
                  |L1.16388|
                          DCD      U_OUT_KONTR_MIN
                  |L1.16392|
                          DCD      U_OUT_KONTR_DELAY
                  |L1.16396|
                          DCD      uout_av
                  |L1.16400|
                          DCD      USIGN
                  |L1.16404|
                          DCD      bSILENT
                  |L1.16408|
                          DCD      RELEVENTSIGN
                  |L1.16412|
                          DCD      TVENTON
                  |L1.16416|
                          DCD      TVENTOFF
                  |L1.16420|
                          DCD      bat
                  |L1.16424|
                          DCD      BAT_IS_ON
                  |L1.16428|
                          DCD      bps
                  |L1.16432|
                          DCD      NUMDT
                  |L1.16436|
                          DCD      t_ext
                  |L1.16440|
                          DCD      ND_EXT
                  |L1.16444|
00403c  2b01              CMP      r3,#1                 ;6424
00403e  d1a9              BNE      |L1.16276|
004040  b118              CBZ      r0,|L1.16458|
004042  4295              CMP      r5,r2                 ;6427
004044  daa6              BGE      |L1.16276|
004046  2e00              CMP      r6,#0                 ;6427
004048  d1a4              BNE      |L1.16276|
                  |L1.16458|
00404a  2802              CMP      r0,#2                 ;6429
00404c  db04              BLT      |L1.16472|
00404e  4297              CMP      r7,r2                 ;6429
004050  daa0              BGE      |L1.16276|
004052  f1bc0f00          CMP      r12,#0                ;6429
004056  d19d              BNE      |L1.16276|
                  |L1.16472|
004058  2803              CMP      r0,#3                 ;6431
00405a  db04              BLT      |L1.16486|
00405c  4590              CMP      r8,r2                 ;6431
00405e  da99              BGE      |L1.16276|
004060  f1b90f00          CMP      r9,#0                 ;6431
004064  d196              BNE      |L1.16276|
                  |L1.16486|
004066  f04f0000          MOV      r0,#0                 ;6434
00406a  7020              STRB     r0,[r4,#0]            ;6434
00406c  e668              B        |L1.15680|
;;;6440   
                          ENDP


                          AREA ||area_number.2||, CODE, READONLY, ALIGN=2

                          EXPORTAS ||area_number.2||, ||.text||
                  samokalibr_init PROC
;;;215    //-----------------------------------------------
;;;216    void ke_start(char in)
000000  4902              LDR      r1,|L2.12|
;;;217    {          
000002  f24060f9          MOV      r0,#0x6f9
;;;218    ke_start_stat=(enum_ke_start_stat)0;		 
000006  8748              STRH     r0,[r1,#0x3a]
000008  4770              BX       lr
;;;219    
;;;220    if(spc_stat==spcVZ)ke_start_stat=kssNOT_VZ;
;;;221    else if(BAT_IS_ON[in]!=bisON)ke_start_stat=kssNOT_BAT;
;;;222    else if(bat[in]._av&(1<<0))ke_start_stat=kssNOT_BAT_AV;
;;;223    else if(bat[in]._temper_stat&(1<<1))ke_start_stat=kssNOT_BAT_AV_T;
;;;224    else if(bat[in]._av&(1<<1))ke_start_stat=kssNOT_BAT_AV_ASS;
;;;225    else if(bat[in]._Ib>IKB)ke_start_stat=kssNOT_BAT_ZAR;
;;;226    else if(bat[in]._Ib<-IKB)ke_start_stat=kssNOT_BAT_RAZR;
;;;227    else if((spc_stat==spcKE)&&(spc_bat==0))ke_start_stat=kssNOT_KE1;
;;;228    else if((spc_stat==spcKE)&&(spc_bat==1))ke_start_stat=kssNOT_KE2;
;;;229    else 
;;;230    	{
;;;231    
;;;232    	ke_start_stat=kssYES;
;;;233    
;;;234    	spc_stat=spcKE;
;;;235    	__ee_spc_stat=spcKE;
;;;236    	lc640_write_int(EE_SPC_STAT,__ee_spc_stat);
;;;237    	
;;;238    	spc_bat=in;
;;;239    	__ee_spc_bat=in;
;;;240    	lc640_write_int(EE_SPC_BAT,__ee_spc_bat);
;;;241    
;;;242    	bat[in]._zar_cnt_ke=0;
;;;243    	lc640_write_int(ADR_EE_BAT_ZAR_CNT_KE[in],0);
;;;244    	
;;;245    	spc_phase=0;
;;;246    	__ee_spc_phase=0;
;;;247    	lc640_write_int(EE_SPC_PHASE,__ee_spc_phase);
;;;248    
;;;249    	//ke_mem_hndl(in,lc640_read_int(ADR_EE_BAT_ZAR_CNT_KE[spc_bat]));
;;;250    
;;;251    		{					
;;;252    		signed short temp_temp;
;;;253    		signed char temp;
;;;254    		temp_temp=bat[in]._u_old[((bat_u_old_cnt+1)&0x07)]; 
;;;255    		    
;;;256    		temp=LPC_RTC->YEAR;
;;;257    		gran_char(&temp,1,99);
;;;258    		*((char*)(&(ke_date[0])))=temp;
;;;259    			
;;;260    		temp=LPC_RTC->MONTH;
;;;261    		gran_char(&temp,1,12);
;;;262    		*(((char*)(&(ke_date[0])))+1)=temp;
;;;263    		
;;;264    		temp=LPC_RTC->DOM;
;;;265    		gran_char(&temp,1,31);
;;;266    		*(((char*)(&(ke_date[0])))+2)=temp;			
;;;267    				
;;;268    		*(((char*)(&(ke_date[0])))+3)=*((char*)&temp_temp);
;;;269    		lc640_write_long(EE_SPC_KE_DATE0,ke_date[0]);
;;;270    
;;;271    		temp=LPC_RTC->HOUR;
;;;272    		gran_char(&temp,0,23);
;;;273    		*((char*)(&(ke_date[1])))=temp;
;;;274                   
;;;275    		temp=LPC_RTC->MIN;
;;;276    		gran_char(&temp,0,59);
;;;277    		*(((char*)(&(ke_date[1])))+1)=temp;
;;;278    	          
;;;279    		temp=LPC_RTC->SEC;
;;;280    		gran_char(&temp,0,59);
;;;281    		*(((char*)(&(ke_date[1])))+2)=temp;
;;;282    			
;;;283    		*(((char*)(&(ke_date[1])))+3)=*(((char*)&temp_temp)+1);
;;;284    		lc640_write_long(EE_SPC_KE_DATE1,ke_date[1]);
;;;285    		}
;;;286    
;;;287    	}
;;;288    }
;;;289    
                          ENDP

00000a  0000              DCW      0x0000
                  |L2.12|
                          DCD      ||area_number.21||

                          AREA ||area_number.3||, CODE, READONLY, ALIGN=2

                          EXPORTAS ||area_number.3||, ||.text||
                  adc_drv6 PROC
;;;215    //-----------------------------------------------
;;;216    void ke_start(char in)
000000  e92d41f0          PUSH     {r4-r8,lr}
;;;217    {          
000004  4c80              LDR      r4,|L3.520|
;;;218    ke_start_stat=(enum_ke_start_stat)0;		 
000006  8860              LDRH     r0,[r4,#2]  ; adc_self_ch_buff
000008  8821              LDRH     r1,[r4,#0]  ; adc_self_ch_buff
00000a  1a40              SUBS     r0,r0,r1
00000c  b200              SXTH     r0,r0
;;;219    
;;;220    if(spc_stat==spcVZ)ke_start_stat=kssNOT_VZ;
00000e  f7fffffe          BL       abs_pal
000012  1da5              ADDS     r5,r4,#6
000014  8028              STRH     r0,[r5,#0]
000016  88a0              LDRH     r0,[r4,#4]  ; adc_self_ch_buff
;;;221    else if(BAT_IS_ON[in]!=bisON)ke_start_stat=kssNOT_BAT;
000018  8861              LDRH     r1,[r4,#2]  ; adc_self_ch_buff
00001a  1a40              SUBS     r0,r0,r1
00001c  b200              SXTH     r0,r0
00001e  f7fffffe          BL       abs_pal
000022  8068              STRH     r0,[r5,#2]
000024  88a0              LDRH     r0,[r4,#4]  ; adc_self_ch_buff
;;;222    else if(bat[in]._av&(1<<0))ke_start_stat=kssNOT_BAT_AV;
;;;223    else if(bat[in]._temper_stat&(1<<1))ke_start_stat=kssNOT_BAT_AV_T;
;;;224    else if(bat[in]._av&(1<<1))ke_start_stat=kssNOT_BAT_AV_ASS;
;;;225    else if(bat[in]._Ib>IKB)ke_start_stat=kssNOT_BAT_ZAR;
;;;226    else if(bat[in]._Ib<-IKB)ke_start_stat=kssNOT_BAT_RAZR;
;;;227    else if((spc_stat==spcKE)&&(spc_bat==0))ke_start_stat=kssNOT_KE1;
;;;228    else if((spc_stat==spcKE)&&(spc_bat==1))ke_start_stat=kssNOT_KE2;
;;;229    else 
;;;230    	{
;;;231    
;;;232    	ke_start_stat=kssYES;
;;;233    
;;;234    	spc_stat=spcKE;
;;;235    	__ee_spc_stat=spcKE;
;;;236    	lc640_write_int(EE_SPC_STAT,__ee_spc_stat);
;;;237    	
;;;238    	spc_bat=in;
;;;239    	__ee_spc_bat=in;
;;;240    	lc640_write_int(EE_SPC_BAT,__ee_spc_bat);
;;;241    
;;;242    	bat[in]._zar_cnt_ke=0;
;;;243    	lc640_write_int(ADR_EE_BAT_ZAR_CNT_KE[in],0);
;;;244    	
;;;245    	spc_phase=0;
;;;246    	__ee_spc_phase=0;
;;;247    	lc640_write_int(EE_SPC_PHASE,__ee_spc_phase);
;;;248    
;;;249    	//ke_mem_hndl(in,lc640_read_int(ADR_EE_BAT_ZAR_CNT_KE[spc_bat]));
;;;250    
;;;251    		{					
;;;252    		signed short temp_temp;
;;;253    		signed char temp;
;;;254    		temp_temp=bat[in]._u_old[((bat_u_old_cnt+1)&0x07)]; 
;;;255    		    
;;;256    		temp=LPC_RTC->YEAR;
;;;257    		gran_char(&temp,1,99);
;;;258    		*((char*)(&(ke_date[0])))=temp;
;;;259    			
;;;260    		temp=LPC_RTC->MONTH;
;;;261    		gran_char(&temp,1,12);
;;;262    		*(((char*)(&(ke_date[0])))+1)=temp;
;;;263    		
;;;264    		temp=LPC_RTC->DOM;
;;;265    		gran_char(&temp,1,31);
;;;266    		*(((char*)(&(ke_date[0])))+2)=temp;			
;;;267    				
;;;268    		*(((char*)(&(ke_date[0])))+3)=*((char*)&temp_temp);
;;;269    		lc640_write_long(EE_SPC_KE_DATE0,ke_date[0]);
;;;270    
;;;271    		temp=LPC_RTC->HOUR;
;;;272    		gran_char(&temp,0,23);
;;;273    		*((char*)(&(ke_date[1])))=temp;
;;;274                   
;;;275    		temp=LPC_RTC->MIN;
;;;276    		gran_char(&temp,0,59);
;;;277    		*(((char*)(&(ke_date[1])))+1)=temp;
;;;278    	          
;;;279    		temp=LPC_RTC->SEC;
;;;280    		gran_char(&temp,0,59);
;;;281    		*(((char*)(&(ke_date[1])))+2)=temp;
;;;282    			
;;;283    		*(((char*)(&(ke_date[1])))+3)=*(((char*)&temp_temp)+1);
;;;284    		lc640_write_long(EE_SPC_KE_DATE1,ke_date[1]);
;;;285    		}
;;;286    
;;;287    	}
;;;288    }
000026  8821              LDRH     r1,[r4,#0]  ; adc_self_ch_buff
000028  1a40              SUBS     r0,r0,r1
00002a  b200              SXTH     r0,r0                 ;220
00002c  f7fffffe          BL       abs_pal
000030  80a8              STRH     r0,[r5,#4]            ;222
000032  f44f7196          MOV      r1,#0x12c             ;222
000036  f1a4068e          SUB      r6,r4,#0x8e           ;222
00003a  4288              CMP      r0,r1                 ;222
00003c  da02              BGE      |L3.68|
00003e  88a0              LDRH     r0,[r4,#4]            ;222  ; adc_self_ch_buff
000040  8530              STRH     r0,[r6,#0x28]         ;222
000042  e00c              B        |L3.94|
                  |L3.68|
000044  f9b50002          LDRSH    r0,[r5,#2]            ;222  ; adc_self_ch_disp
000048  4288              CMP      r0,r1                 ;222
00004a  da02              BGE      |L3.82|
00004c  8860              LDRH     r0,[r4,#2]            ;223  ; adc_self_ch_buff
00004e  8530              STRH     r0,[r6,#0x28]         ;223
000050  e005              B        |L3.94|
                  |L3.82|
000052  f9b50000          LDRSH    r0,[r5,#0]            ;223  ; adc_self_ch_disp
000056  4288              CMP      r0,r1                 ;223
000058  da01              BGE      |L3.94|
00005a  8820              LDRH     r0,[r4,#0]  ; adc_self_ch_buff
00005c  8530              STRH     r0,[r6,#0x28]         ;224
                  |L3.94|
00005e  78b7              LDRB     r7,[r6,#2]            ;224  ; adc_ch_net
000060  2200              MOVS     r2,#0                 ;224
000062  b3f7              CBZ      r7,|L3.226|
000064  7973              LDRB     r3,[r6,#5]            ;224  ; adc_window_flag
000066  4869              LDR      r0,|L3.524|
000068  b18b              CBZ      r3,|L3.142|
00006a  f9b61028          LDRSH    r1,[r6,#0x28]         ;225  ; adc_result
00006e  6804              LDR      r4,[r0,#0]            ;225  ; main_power_buffer
000070  eb0404a1          ADD      r4,r4,r1,ASR #2       ;225
000074  6004              STR      r4,[r0,#0]            ;225  ; main_power_buffer
000076  6844              LDR      r4,[r0,#4]            ;225  ; main_power_buffer
000078  eb0404a1          ADD      r4,r4,r1,ASR #2       ;225
00007c  6044              STR      r4,[r0,#4]  ; main_power_buffer
00007e  6884              LDR      r4,[r0,#8]            ;226  ; main_power_buffer
000080  eb0404a1          ADD      r4,r4,r1,ASR #2       ;226
000084  6084              STR      r4,[r0,#8]            ;226  ; main_power_buffer
000086  68c4              LDR      r4,[r0,#0xc]          ;226  ; main_power_buffer
000088  eb0401a1          ADD      r1,r4,r1,ASR #2       ;226
00008c  60c1              STR      r1,[r0,#0xc]          ;218  ; main_power_buffer
                  |L3.142|
00008e  f9b61028          LDRSH    r1,[r6,#0x28]         ;227  ; adc_result
000092  2964              CMP      r1,#0x64              ;227
000094  da04              BGE      |L3.160|
000096  8db1              LDRH     r1,[r6,#0x2c]         ;228  ; adc_zero_cnt
000098  f1010101          ADD      r1,r1,#1              ;228
00009c  85b1              STRH     r1,[r6,#0x2c]         ;227
00009e  e000              B        |L3.162|
                  |L3.160|
0000a0  85b2              STRH     r2,[r6,#0x2c]         ;227
                  |L3.162|
0000a2  f9b6402c          LDRSH    r4,[r6,#0x2c]  ; adc_zero_cnt
0000a6  f44f61fa          MOV      r1,#0x7d0             ;228
0000aa  428c              CMP      r4,r1                 ;232
0000ac  db05              BLT      |L3.186|
0000ae  85b1              STRH     r1,[r6,#0x2c]         ;234
0000b0  6002              STR      r2,[r0,#0]            ;235  ; main_power_buffer
0000b2  6042              STR      r2,[r0,#4]            ;235  ; main_power_buffer
0000b4  6082              STR      r2,[r0,#8]            ;236  ; main_power_buffer
0000b6  60c2              STR      r2,[r0,#0xc]          ;236  ; main_power_buffer
0000b8  84f2              STRH     r2,[r6,#0x26]         ;236
                  |L3.186|
0000ba  8db1              LDRH     r1,[r6,#0x2c]         ;236  ; adc_zero_cnt
0000bc  2905              CMP      r1,#5                 ;236
0000be  d14f              BNE      |L3.352|
0000c0  b1bb              CBZ      r3,|L3.242|
0000c2  8d71              LDRH     r1,[r6,#0x2a]         ;239  ; adc_gorb_cnt
0000c4  f1010101          ADD      r1,r1,#1              ;240
0000c8  b209              SXTH     r1,r1                 ;240
0000ca  8571              STRH     r1,[r6,#0x2a]         ;240
0000cc  f5b17f00          CMP      r1,#0x200             ;240
0000d0  db00              BLT      |L3.212|
0000d2  8572              STRH     r2,[r6,#0x2a]         ;243
                  |L3.212|
0000d4  f9b6102a          LDRSH    r1,[r6,#0x2a]         ;243  ; adc_gorb_cnt
0000d8  064c              LSLS     r4,r1,#25             ;243
0000da  d10a              BNE      |L3.242|
0000dc  ea4f11e1          ASR      r1,r1,#7              ;245
0000e0  e000              B        |L3.228|
                  |L3.226|
0000e2  e015              B        |L3.272|
                  |L3.228|
0000e4  f8504021          LDR      r4,[r0,r1,LSL #2]     ;247
0000e8  ea4f2424          ASR      r4,r4,#8              ;247
0000ec  84f4              STRH     r4,[r6,#0x26]         ;254
0000ee  f8402021          STR      r2,[r0,r1,LSL #2]     ;254
                  |L3.242|
0000f2  f9b6002e          LDRSH    r0,[r6,#0x2e]         ;254  ; adc_window_cnt
0000f6  2896              CMP      r0,#0x96              ;254
0000f8  dd01              BLE      |L3.254|
0000fa  b103              CBZ      r3,|L3.254|
0000fc  7172              STRB     r2,[r6,#5]            ;254
                  |L3.254|
0000fe  381f              SUBS     r0,r0,#0x1f           ;254
000100  2827              CMP      r0,#0x27              ;256
000102  d22d              BCS      |L3.352|
000104  7970              LDRB     r0,[r6,#5]            ;256  ; adc_window_flag
000106  bb58              CBNZ     r0,|L3.352|
000108  f04f0001          MOV      r0,#1                 ;257
00010c  7170              STRB     r0,[r6,#5]            ;257
00010e  e027              B        |L3.352|
                  |L3.272|
000110  483f              LDR      r0,|L3.528|
000112  78f5              LDRB     r5,[r6,#3]            ;257  ; adc_ch
000114  7933              LDRB     r3,[r6,#4]            ;258  ; adc_ch_cnt
000116  eb001485          ADD      r4,r0,r5,LSL #6       ;258
00011a  f9b61028          LDRSH    r1,[r6,#0x28]         ;258  ; adc_result
00011e  f8441023          STR      r1,[r4,r3,LSL #2]     ;260
000122  0798              LSLS     r0,r3,#30             ;261
000124  d10f              BNE      |L3.326|
000126  4601              MOV      r1,r0                 ;261
                  |L3.296|
000128  f854c020          LDR      r12,[r4,r0,LSL #2]    ;261
00012c  4461              ADD      r1,r1,r12             ;262
00012e  f1000001          ADD      r0,r0,#1              ;262
000132  b2c0              UXTB     r0,r0                 ;264
000134  2810              CMP      r0,#0x10              ;264
000136  d3f7              BCC      |L3.296|
000138  ea4f1021          ASR      r0,r1,#4              ;265
00013c  4933              LDR      r1,|L3.524|
00013e  f1a10120          SUB      r1,r1,#0x20           ;265
000142  f8210015          STRH     r0,[r1,r5,LSL #1]     ;266
                  |L3.326|
000146  1c6d              ADDS     r5,r5,#1              ;268
000148  b2e8              UXTB     r0,r5                 ;268
00014a  70f0              STRB     r0,[r6,#3]            ;268
00014c  2810              CMP      r0,#0x10              ;269
00014e  d307              BCC      |L3.352|
000150  70f2              STRB     r2,[r6,#3]            ;269
000152  f1030301          ADD      r3,r3,#1              ;269
000156  b2d8              UXTB     r0,r3                 ;271
000158  7130              STRB     r0,[r6,#4]            ;271
00015a  2810              CMP      r0,#0x10              ;272
00015c  d300              BCC      |L3.352|
00015e  7132              STRB     r2,[r6,#4]            ;272
                  |L3.352|
000160  7072              STRB     r2,[r6,#1]            ;272
000162  f1070701          ADD      r7,r7,#1              ;272
000166  f0070001          AND      r0,r7,#1              ;273
00016a  70b0              STRB     r0,[r6,#2]            ;275
00016c  4a29              LDR      r2,|L3.532|
00016e  b130              CBZ      r0,|L3.382|
000170  6810              LDR      r0,[r2,#0]            ;276
000172  f02000ff          BIC      r0,r0,#0xff           ;276
000176  f1000004          ADD      r0,r0,#4              ;276
00017a  6010              STR      r0,[r2,#0]            ;277
00017c  e03d              B        |L3.506|
                  |L3.382|
00017e  78f1              LDRB     r1,[r6,#3]            ;279  ; adc_ch
000180  0708              LSLS     r0,r1,#28             ;279
000182  d406              BMI      |L3.402|
000184  6810              LDR      r0,[r2,#0]            ;280
000186  f02000ff          BIC      r0,r0,#0xff           ;280
00018a  f1000001          ADD      r0,r0,#1              ;280
00018e  6010              STR      r0,[r2,#0]            ;281
000190  e005              B        |L3.414|
                  |L3.402|
000192  6810              LDR      r0,[r2,#0]            ;283
000194  f02000ff          BIC      r0,r0,#0xff           ;283
000198  f1000002          ADD      r0,r0,#2              ;284
00019c  6010              STR      r0,[r2,#0]            ;284
                  |L3.414|
00019e  481e              LDR      r0,|L3.536|
0001a0  6803              LDR      r3,[r0,#0]            ;284
0001a2  f0435380          ORR      r3,r3,#0x10000000
0001a6  6003              STR      r3,[r0,#0]            ;228
0001a8  6a03              LDR      r3,[r0,#0x20]         ;228
0001aa  f0434380          ORR      r3,r3,#0x40000000     ;228
0001ae  6203              STR      r3,[r0,#0x20]
0001b0  6e03              LDR      r3,[r0,#0x60]
0001b2  f0436380          ORR      r3,r3,#0x4000000
0001b6  6603              STR      r3,[r0,#0x60]
0001b8  07cb              LSLS     r3,r1,#31
0001ba  d00a              BEQ      |L3.466|
0001bc  6943              LDR      r3,[r0,#0x14]
0001be  f0435380          ORR      r3,r3,#0x10000000
0001c2  6143              STR      r3,[r0,#0x14]
                  |L3.452|
0001c4  078b              LSLS     r3,r1,#30
0001c6  d409              BMI      |L3.476|
0001c8  6b43              LDR      r3,[r0,#0x34]
0001ca  f0234380          BIC      r3,r3,#0x40000000
0001ce  6343              STR      r3,[r0,#0x34]
0001d0  e008              B        |L3.484|
                  |L3.466|
0001d2  6943              LDR      r3,[r0,#0x14]
0001d4  f0235380          BIC      r3,r3,#0x10000000
0001d8  6143              STR      r3,[r0,#0x14]
0001da  e7f3              B        |L3.452|
                  |L3.476|
0001dc  6b43              LDR      r3,[r0,#0x34]
0001de  f0434380          ORR      r3,r3,#0x40000000
0001e2  6343              STR      r3,[r0,#0x34]
                  |L3.484|
0001e4  0749              LSLS     r1,r1,#29
0001e6  d404              BMI      |L3.498|
0001e8  6f41              LDR      r1,[r0,#0x74]
0001ea  f0216180          BIC      r1,r1,#0x4000000
0001ee  6741              STR      r1,[r0,#0x74]
0001f0  e003              B        |L3.506|
                  |L3.498|
0001f2  6f41              LDR      r1,[r0,#0x74]
0001f4  f0416180          ORR      r1,r1,#0x4000000
0001f8  6741              STR      r1,[r0,#0x74]
                  |L3.506|
0001fa  6810              LDR      r0,[r2,#0]
0001fc  f0407080          ORR      r0,r0,#0x1000000
000200  6010              STR      r0,[r2,#0]
000202  e8bd81f0          POP      {r4-r8,pc}
;;;289    
                          ENDP

000206  0000              DCW      0x0000
                  |L3.520|
                          DCD      ||area_number.21||+0x8e
                  |L3.524|
                          DCD      ||.bss||+0x420
                  |L3.528|
                          DCD      ||.bss||
                  |L3.532|
                          DCD      0x40034000
                  |L3.536|
                          DCD      0x2009c000

                          AREA ||area_number.4||, CODE, READONLY, ALIGN=2

                          EXPORTAS ||area_number.4||, ||.text||
                  inv_drv PROC
;;;215    //-----------------------------------------------
;;;216    void ke_start(char in)
000000  b570              PUSH     {r4-r6,lr}
;;;217    {          
000002  4604              MOV      r4,r0
000004  f04f0207          MOV      r2,#7
;;;218    ke_start_stat=(enum_ke_start_stat)0;		 
000008  f04f0101          MOV      r1,#1
00000c  48a4              LDR      r0,|L4.672|
;;;219    
;;;220    if(spc_stat==spcVZ)ke_start_stat=kssNOT_VZ;
00000e  f7fffffe          BL       gran_char
000012  48a4              LDR      r0,|L4.676|
000014  eb040144          ADD      r1,r4,r4,LSL #1
;;;221    else if(BAT_IS_ON[in]!=bisON)ke_start_stat=kssNOT_BAT;
000018  eb001541          ADD      r5,r0,r1,LSL #5
00001c  f8950047          LDRB     r0,[r5,#0x47]
000020  f8951046          LDRB     r1,[r5,#0x46]
000024  ea800001          EOR      r0,r0,r1
;;;222    else if(bat[in]._av&(1<<0))ke_start_stat=kssNOT_BAT_AV;
;;;223    else if(bat[in]._temper_stat&(1<<1))ke_start_stat=kssNOT_BAT_AV_T;
;;;224    else if(bat[in]._av&(1<<1))ke_start_stat=kssNOT_BAT_AV_ASS;
;;;225    else if(bat[in]._Ib>IKB)ke_start_stat=kssNOT_BAT_ZAR;
;;;226    else if(bat[in]._Ib<-IKB)ke_start_stat=kssNOT_BAT_RAZR;
;;;227    else if((spc_stat==spcKE)&&(spc_bat==0))ke_start_stat=kssNOT_KE1;
;;;228    else if((spc_stat==spcKE)&&(spc_bat==1))ke_start_stat=kssNOT_KE2;
;;;229    else 
;;;230    	{
;;;231    
;;;232    	ke_start_stat=kssYES;
;;;233    
;;;234    	spc_stat=spcKE;
;;;235    	__ee_spc_stat=spcKE;
;;;236    	lc640_write_int(EE_SPC_STAT,__ee_spc_stat);
;;;237    	
;;;238    	spc_bat=in;
;;;239    	__ee_spc_bat=in;
;;;240    	lc640_write_int(EE_SPC_BAT,__ee_spc_bat);
;;;241    
;;;242    	bat[in]._zar_cnt_ke=0;
;;;243    	lc640_write_int(ADR_EE_BAT_ZAR_CNT_KE[in],0);
;;;244    	
;;;245    	spc_phase=0;
;;;246    	__ee_spc_phase=0;
;;;247    	lc640_write_int(EE_SPC_PHASE,__ee_spc_phase);
;;;248    
;;;249    	//ke_mem_hndl(in,lc640_read_int(ADR_EE_BAT_ZAR_CNT_KE[spc_bat]));
;;;250    
;;;251    		{					
;;;252    		signed short temp_temp;
;;;253    		signed char temp;
;;;254    		temp_temp=bat[in]._u_old[((bat_u_old_cnt+1)&0x07)]; 
;;;255    		    
;;;256    		temp=LPC_RTC->YEAR;
;;;257    		gran_char(&temp,1,99);
;;;258    		*((char*)(&(ke_date[0])))=temp;
;;;259    			
;;;260    		temp=LPC_RTC->MONTH;
;;;261    		gran_char(&temp,1,12);
;;;262    		*(((char*)(&(ke_date[0])))+1)=temp;
;;;263    		
;;;264    		temp=LPC_RTC->DOM;
;;;265    		gran_char(&temp,1,31);
;;;266    		*(((char*)(&(ke_date[0])))+2)=temp;			
;;;267    				
;;;268    		*(((char*)(&(ke_date[0])))+3)=*((char*)&temp_temp);
;;;269    		lc640_write_long(EE_SPC_KE_DATE0,ke_date[0]);
;;;270    
;;;271    		temp=LPC_RTC->HOUR;
;;;272    		gran_char(&temp,0,23);
;;;273    		*((char*)(&(ke_date[1])))=temp;
;;;274                   
;;;275    		temp=LPC_RTC->MIN;
;;;276    		gran_char(&temp,0,59);
;;;277    		*(((char*)(&(ke_date[1])))+1)=temp;
;;;278    	          
;;;279    		temp=LPC_RTC->SEC;
;;;280    		gran_char(&temp,0,59);
;;;281    		*(((char*)(&(ke_date[1])))+2)=temp;
;;;282    			
;;;283    		*(((char*)(&(ke_date[1])))+3)=*(((char*)&temp_temp)+1);
;;;284    		lc640_write_long(EE_SPC_KE_DATE1,ke_date[1]);
;;;285    		}
;;;286    
;;;287    	}
;;;288    }
000028  4a9f              LDR      r2,|L4.680|
00002a  b100              CBZ      r0,|L4.46|
00002c  7050              STRB     r0,[r2,#1]
                  |L4.46|
00002e  ea010100          AND      r1,r1,r0              ;222
000032  b101              CBZ      r1,|L4.54|
000034  7091              STRB     r1,[r2,#2]            ;222
                  |L4.54|
000036  ea000301          AND      r3,r0,r1              ;222
00003a  07db              LSLS     r3,r3,#31             ;222
00003c  d027              BEQ      |L4.142|
00003e  78d0              LDRB     r0,[r2,#3]            ;222  ; plazma_inv
000040  f1000001          ADD      r0,r0,#1              ;222
000044  70d0              STRB     r0,[r2,#3]            ;222
000046  b134              CBZ      r4,|L4.86|
000048  2c01              CMP      r4,#1                 ;222
00004a  d00b              BEQ      |L4.100|
00004c  2c02              CMP      r4,#2                 ;223
00004e  d010              BEQ      |L4.114|
000050  2c03              CMP      r4,#3                 ;223
000052  d015              BEQ      |L4.128|
000054  e120              B        |L4.664|
                  |L4.86|
000056  2301              MOVS     r3,#1                 ;223
000058  461a              MOV      r2,r3                 ;223
00005a  210e              MOVS     r1,#0xe
00005c  a093              ADR      r0,|L4.684|
00005e  f7fffffe          BL       snmp_trap_send
000062  e119              B        |L4.664|
                  |L4.100|
000064  2301              MOVS     r3,#1                 ;224
000066  2202              MOVS     r2,#2
000068  210e              MOVS     r1,#0xe               ;225
00006a  a097              ADR      r0,|L4.712|
00006c  f7fffffe          BL       snmp_trap_send
000070  e112              B        |L4.664|
                  |L4.114|
000072  2301              MOVS     r3,#1                 ;225
000074  2203              MOVS     r2,#3                 ;225
000076  210e              MOVS     r1,#0xe               ;225
000078  a09a              ADR      r0,|L4.740|
00007a  f7fffffe          BL       snmp_trap_send
00007e  e10b              B        |L4.664|
                  |L4.128|
000080  2301              MOVS     r3,#1                 ;226
000082  2204              MOVS     r2,#4                 ;226
000084  210e              MOVS     r1,#0xe               ;226
000086  a09e              ADR      r0,|L4.768|
000088  f7fffffe          BL       snmp_trap_send
00008c  e104              B        |L4.664|
                  |L4.142|
00008e  0783              LSLS     r3,r0,#30             ;227
000090  d529              BPL      |L4.230|
000092  078b              LSLS     r3,r1,#30             ;227
000094  d527              BPL      |L4.230|
000096  78d0              LDRB     r0,[r2,#3]            ;228  ; plazma_inv
000098  f1000001          ADD      r0,r0,#1              ;228
00009c  70d0              STRB     r0,[r2,#3]            ;227
00009e  b134              CBZ      r4,|L4.174|
0000a0  2c01              CMP      r4,#1                 ;227
0000a2  d00b              BEQ      |L4.188|
0000a4  2c02              CMP      r4,#2                 ;228
0000a6  d010              BEQ      |L4.202|
0000a8  2c03              CMP      r4,#3                 ;232
0000aa  d015              BEQ      |L4.216|
0000ac  e0f4              B        |L4.664|
                  |L4.174|
0000ae  2302              MOVS     r3,#2                 ;234
0000b0  2201              MOVS     r2,#1                 ;235
0000b2  210e              MOVS     r1,#0xe               ;235
0000b4  a099              ADR      r0,|L4.796|
0000b6  f7fffffe          BL       snmp_trap_send
0000ba  e0ed              B        |L4.664|
                  |L4.188|
0000bc  2302              MOVS     r3,#2                 ;236
0000be  461a              MOV      r2,r3                 ;238
0000c0  210e              MOVS     r1,#0xe               ;239
0000c2  a09d              ADR      r0,|L4.824|
0000c4  f7fffffe          BL       snmp_trap_send
0000c8  e0e6              B        |L4.664|
                  |L4.202|
0000ca  2302              MOVS     r3,#2                 ;240
0000cc  2203              MOVS     r2,#3                 ;240
0000ce  210e              MOVS     r1,#0xe               ;242
0000d0  a0a0              ADR      r0,|L4.852|
0000d2  f7fffffe          BL       snmp_trap_send
0000d6  e0df              B        |L4.664|
                  |L4.216|
0000d8  2302              MOVS     r3,#2                 ;243
0000da  2204              MOVS     r2,#4                 ;243
0000dc  210e              MOVS     r1,#0xe               ;245
0000de  a0a4              ADR      r0,|L4.880|
0000e0  f7fffffe          BL       snmp_trap_send
0000e4  e0d8              B        |L4.664|
                  |L4.230|
0000e6  0743              LSLS     r3,r0,#29             ;247
0000e8  d529              BPL      |L4.318|
0000ea  074b              LSLS     r3,r1,#29             ;247
0000ec  d527              BPL      |L4.318|
0000ee  78d0              LDRB     r0,[r2,#3]            ;254  ; plazma_inv
0000f0  f1000001          ADD      r0,r0,#1              ;254
0000f4  70d0              STRB     r0,[r2,#3]            ;254
0000f6  b134              CBZ      r4,|L4.262|
0000f8  2c01              CMP      r4,#1                 ;254
0000fa  d00b              BEQ      |L4.276|
0000fc  2c02              CMP      r4,#2                 ;254
0000fe  d010              BEQ      |L4.290|
000100  2c03              CMP      r4,#3                 ;256
000102  d015              BEQ      |L4.304|
000104  e0c8              B        |L4.664|
                  |L4.262|
000106  2303              MOVS     r3,#3                 ;257
000108  2201              MOVS     r2,#1                 ;257
00010a  210e              MOVS     r1,#0xe               ;257
00010c  a09f              ADR      r0,|L4.908|
00010e  f7fffffe          BL       snmp_trap_send
000112  e0c1              B        |L4.664|
                  |L4.276|
000114  2303              MOVS     r3,#3                 ;258
000116  2202              MOVS     r2,#2                 ;258
000118  210e              MOVS     r1,#0xe               ;258
00011a  a0a3              ADR      r0,|L4.936|
00011c  f7fffffe          BL       snmp_trap_send
000120  e0ba              B        |L4.664|
                  |L4.290|
000122  2303              MOVS     r3,#3                 ;261
000124  461a              MOV      r2,r3                 ;261
000126  210e              MOVS     r1,#0xe               ;261
000128  a0a6              ADR      r0,|L4.964|
00012a  f7fffffe          BL       snmp_trap_send
00012e  e0b3              B        |L4.664|
                  |L4.304|
000130  2303              MOVS     r3,#3                 ;262
000132  2204              MOVS     r2,#4                 ;264
000134  210e              MOVS     r1,#0xe               ;264
000136  a0aa              ADR      r0,|L4.992|
000138  f7fffffe          BL       snmp_trap_send
00013c  e0ac              B        |L4.664|
                  |L4.318|
00013e  0703              LSLS     r3,r0,#28             ;265
000140  d529              BPL      |L4.406|
000142  070b              LSLS     r3,r1,#28             ;266
000144  d527              BPL      |L4.406|
000146  78d0              LDRB     r0,[r2,#3]            ;268  ; plazma_inv
000148  f1000001          ADD      r0,r0,#1              ;268
00014c  70d0              STRB     r0,[r2,#3]            ;269
00014e  b134              CBZ      r4,|L4.350|
000150  2c01              CMP      r4,#1                 ;269
000152  d00b              BEQ      |L4.364|
000154  2c02              CMP      r4,#2                 ;269
000156  d010              BEQ      |L4.378|
000158  2c03              CMP      r4,#3                 ;271
00015a  d015              BEQ      |L4.392|
00015c  e09c              B        |L4.664|
                  |L4.350|
00015e  2304              MOVS     r3,#4                 ;272
000160  2201              MOVS     r2,#1                 ;272
000162  210e              MOVS     r1,#0xe               ;272
000164  a0a5              ADR      r0,|L4.1020|
000166  f7fffffe          BL       snmp_trap_send
00016a  e095              B        |L4.664|
                  |L4.364|
00016c  2304              MOVS     r3,#4                 ;275
00016e  2202              MOVS     r2,#2                 ;276
000170  210e              MOVS     r1,#0xe               ;276
000172  a0ab              ADR      r0,|L4.1056|
000174  f7fffffe          BL       snmp_trap_send
000178  e08e              B        |L4.664|
                  |L4.378|
00017a  2304              MOVS     r3,#4                 ;277
00017c  2203              MOVS     r2,#3                 ;277
00017e  210e              MOVS     r1,#0xe               ;279
000180  a0b0              ADR      r0,|L4.1092|
000182  f7fffffe          BL       snmp_trap_send
000186  e087              B        |L4.664|
                  |L4.392|
000188  2304              MOVS     r3,#4                 ;280
00018a  461a              MOV      r2,r3                 ;280
00018c  210e              MOVS     r1,#0xe               ;281
00018e  a0b6              ADR      r0,|L4.1128|
000190  f7fffffe          BL       snmp_trap_send
000194  e080              B        |L4.664|
                  |L4.406|
000196  06c3              LSLS     r3,r0,#27             ;283
000198  d529              BPL      |L4.494|
00019a  06cb              LSLS     r3,r1,#27             ;284
00019c  d527              BPL      |L4.494|
00019e  78d0              LDRB     r0,[r2,#3]            ;284  ; plazma_inv
0001a0  f1000001          ADD      r0,r0,#1              ;284
0001a4  70d0              STRB     r0,[r2,#3]
0001a6  b134              CBZ      r4,|L4.438|
0001a8  2c01              CMP      r4,#1                 ;228
0001aa  d00b              BEQ      |L4.452|
0001ac  2c02              CMP      r4,#2
0001ae  d010              BEQ      |L4.466|
0001b0  2c03              CMP      r4,#3
0001b2  d015              BEQ      |L4.480|
0001b4  e070              B        |L4.664|
                  |L4.438|
0001b6  2305              MOVS     r3,#5
0001b8  2201              MOVS     r2,#1
0001ba  210e              MOVS     r1,#0xe
0001bc  a0b3              ADR      r0,|L4.1164|
0001be  f7fffffe          BL       snmp_trap_send
0001c2  e069              B        |L4.664|
                  |L4.452|
0001c4  2305              MOVS     r3,#5
0001c6  2202              MOVS     r2,#2
0001c8  210e              MOVS     r1,#0xe
0001ca  a0b9              ADR      r0,|L4.1200|
0001cc  f7fffffe          BL       snmp_trap_send
0001d0  e062              B        |L4.664|
                  |L4.466|
0001d2  2305              MOVS     r3,#5
0001d4  2203              MOVS     r2,#3
0001d6  210e              MOVS     r1,#0xe
0001d8  a0be              ADR      r0,|L4.1236|
0001da  f7fffffe          BL       snmp_trap_send
0001de  e05b              B        |L4.664|
                  |L4.480|
0001e0  2305              MOVS     r3,#5
0001e2  2204              MOVS     r2,#4
0001e4  210e              MOVS     r1,#0xe
0001e6  a0c4              ADR      r0,|L4.1272|
0001e8  f7fffffe          BL       snmp_trap_send
0001ec  e054              B        |L4.664|
                  |L4.494|
0001ee  0683              LSLS     r3,r0,#26
0001f0  d529              BPL      |L4.582|
0001f2  068b              LSLS     r3,r1,#26
0001f4  d527              BPL      |L4.582|
0001f6  78d0              LDRB     r0,[r2,#3]  ; plazma_inv
0001f8  f1000001          ADD      r0,r0,#1
0001fc  70d0              STRB     r0,[r2,#3]
0001fe  b134              CBZ      r4,|L4.526|
000200  2c01              CMP      r4,#1
000202  d00b              BEQ      |L4.540|
000204  2c02              CMP      r4,#2
000206  d010              BEQ      |L4.554|
000208  2c03              CMP      r4,#3
00020a  d015              BEQ      |L4.568|
00020c  e044              B        |L4.664|
                  |L4.526|
00020e  2306              MOVS     r3,#6
000210  2201              MOVS     r2,#1
000212  210e              MOVS     r1,#0xe
000214  a0c1              ADR      r0,|L4.1308|
000216  f7fffffe          BL       snmp_trap_send
00021a  e03d              B        |L4.664|
                  |L4.540|
00021c  2306              MOVS     r3,#6
00021e  2202              MOVS     r2,#2
000220  210e              MOVS     r1,#0xe
000222  a0c7              ADR      r0,|L4.1344|
000224  f7fffffe          BL       snmp_trap_send
000228  e036              B        |L4.664|
                  |L4.554|
00022a  2306              MOVS     r3,#6
00022c  2203              MOVS     r2,#3
00022e  210e              MOVS     r1,#0xe
000230  a0cc              ADR      r0,|L4.1380|
000232  f7fffffe          BL       snmp_trap_send
000236  e02f              B        |L4.664|
                  |L4.568|
000238  2306              MOVS     r3,#6
00023a  2204              MOVS     r2,#4
00023c  210e              MOVS     r1,#0xe
00023e  a0d2              ADR      r0,|L4.1416|
000240  f7fffffe          BL       snmp_trap_send
000244  e028              B        |L4.664|
                  |L4.582|
000246  b300              CBZ      r0,|L4.650|
000248  b9f9              CBNZ     r1,|L4.650|
00024a  78d0              LDRB     r0,[r2,#3]  ; plazma_inv
00024c  f1000001          ADD      r0,r0,#1
000250  70d0              STRB     r0,[r2,#3]
000252  b134              CBZ      r4,|L4.610|
000254  2c01              CMP      r4,#1
000256  d00b              BEQ      |L4.624|
000258  2c02              CMP      r4,#2
00025a  d010              BEQ      |L4.638|
00025c  2c03              CMP      r4,#3
00025e  d015              BEQ      |L4.652|
000260  e01a              B        |L4.664|
                  |L4.610|
000262  2300              MOVS     r3,#0
000264  2201              MOVS     r2,#1
000266  210e              MOVS     r1,#0xe
000268  a0d0              ADR      r0,|L4.1452|
00026a  f7fffffe          BL       snmp_trap_send
00026e  e013              B        |L4.664|
                  |L4.624|
000270  2300              MOVS     r3,#0
000272  2202              MOVS     r2,#2
000274  210e              MOVS     r1,#0xe
000276  a0d2              ADR      r0,|L4.1472|
000278  f7fffffe          BL       snmp_trap_send
00027c  e00c              B        |L4.664|
                  |L4.638|
00027e  2300              MOVS     r3,#0
000280  2203              MOVS     r2,#3
000282  210e              MOVS     r1,#0xe
000284  a0d3              ADR      r0,|L4.1492|
000286  f7fffffe          BL       snmp_trap_send
                  |L4.650|
00028a  e005              B        |L4.664|
                  |L4.652|
00028c  2300              MOVS     r3,#0
00028e  2204              MOVS     r2,#4
000290  210e              MOVS     r1,#0xe
000292  a0d5              ADR      r0,|L4.1512|
000294  f7fffffe          BL       snmp_trap_send
                  |L4.664|
000298  f8150f46          LDRB     r0,[r5,#0x46]!
00029c  7068              STRB     r0,[r5,#1]
00029e  bd70              POP      {r4-r6,pc}
;;;289    
                          ENDP

                  |L4.672|
                          DCD      first_inv_slot
                  |L4.676|
                          DCD      inv
                  |L4.680|
                          DCD      ||area_number.21||+0x84
                  |L4.684|
0002ac  496e7665          DCB      "Invertor #1 Alarm, overload",0
0002b0  72746f72
0002b4  20233120
0002b8  416c6172
0002bc  6d2c206f
0002c0  7665726c
0002c4  6f616400
                  |L4.712|
0002c8  496e7665          DCB      "Invertor #2 Alarm, overload",0
0002cc  72746f72
0002d0  20233220
0002d4  416c6172
0002d8  6d2c206f
0002dc  7665726c
0002e0  6f616400
                  |L4.740|
0002e4  496e7665          DCB      "Invertor #3 Alarm, overload",0
0002e8  72746f72
0002ec  20233320
0002f0  416c6172
0002f4  6d2c206f
0002f8  7665726c
0002fc  6f616400
                  |L4.768|
000300  496e7665          DCB      "Invertor #4 Alarm, overload",0
000304  72746f72
000308  20233420
00030c  416c6172
000310  6d2c206f
000314  7665726c
000318  6f616400
                  |L4.796|
00031c  496e7665          DCB      "Invertor #1 Alarm, overheat",0
000320  72746f72
000324  20233120
000328  416c6172
00032c  6d2c206f
000330  76657268
000334  65617400
                  |L4.824|
000338  496e7665          DCB      "Invertor #2 Alarm, overheat",0
00033c  72746f72
000340  20233220
000344  416c6172
000348  6d2c206f
00034c  76657268
000350  65617400
                  |L4.852|
000354  496e7665          DCB      "Invertor #3 Alarm, overheat",0
000358  72746f72
00035c  20233320
000360  416c6172
000364  6d2c206f
000368  76657268
00036c  65617400
                  |L4.880|
000370  496e7665          DCB      "Invertor #4 Alarm, overheat",0
000374  72746f72
000378  20233420
00037c  416c6172
000380  6d2c206f
000384  76657268
000388  65617400
                  |L4.908|
00038c  496e7665          DCB      "Invertor #1 Alarm, is warm",0
000390  72746f72
000394  20233120
000398  416c6172
00039c  6d2c2069
0003a0  73207761
0003a4  726d00  
0003a7  00                DCB      0
                  |L4.936|
0003a8  496e7665          DCB      "Invertor #2 Alarm, is warm",0
0003ac  72746f72
0003b0  20233220
0003b4  416c6172
0003b8  6d2c2069
0003bc  73207761
0003c0  726d00  
0003c3  00                DCB      0
                  |L4.964|
0003c4  496e7665          DCB      "Invertor #3 Alarm, is warm",0
0003c8  72746f72
0003cc  20233320
0003d0  416c6172
0003d4  6d2c2069
0003d8  73207761
0003dc  726d00  
0003df  00                DCB      0
                  |L4.992|
0003e0  496e7665          DCB      "Invertor #4 Alarm, is warm",0
0003e4  72746f72
0003e8  20233420
0003ec  416c6172
0003f0  6d2c2069
0003f4  73207761
0003f8  726d00  
0003fb  00                DCB      0
                  |L4.1020|
0003fc  496e7665          DCB      "Invertor #1 Alarm, voltage is up",0
000400  72746f72
000404  20233120
000408  416c6172
00040c  6d2c2076
000410  6f6c7461
000414  67652069
000418  73207570
00041c  00      
00041d  00                DCB      0
00041e  00                DCB      0
00041f  00                DCB      0
                  |L4.1056|
000420  496e7665          DCB      "Invertor #2 Alarm, voltage is up",0
000424  72746f72
000428  20233220
00042c  416c6172
000430  6d2c2076
000434  6f6c7461
000438  67652069
00043c  73207570
000440  00      
000441  00                DCB      0
000442  00                DCB      0
000443  00                DCB      0
                  |L4.1092|
000444  496e7665          DCB      "Invertor #3 Alarm, voltage is up",0
000448  72746f72
00044c  20233320
000450  416c6172
000454  6d2c2076
000458  6f6c7461
00045c  67652069
000460  73207570
000464  00      
000465  00                DCB      0
000466  00                DCB      0
000467  00                DCB      0
                  |L4.1128|
000468  496e7665          DCB      "Invertor #4 Alarm, voltage is up",0
00046c  72746f72
000470  20233420
000474  416c6172
000478  6d2c2076
00047c  6f6c7461
000480  67652069
000484  73207570
000488  00      
000489  00                DCB      0
00048a  00                DCB      0
00048b  00                DCB      0
                  |L4.1164|
00048c  496e7665          DCB      "Invertor #1 Alarm, voltage is down",0
000490  72746f72
000494  20233120
000498  416c6172
00049c  6d2c2076
0004a0  6f6c7461
0004a4  67652069
0004a8  7320646f
0004ac  776e00  
0004af  00                DCB      0
                  |L4.1200|
0004b0  496e7665          DCB      "Invertor #2 Alarm, voltage is down",0
0004b4  72746f72
0004b8  20233220
0004bc  416c6172
0004c0  6d2c2076
0004c4  6f6c7461
0004c8  67652069
0004cc  7320646f
0004d0  776e00  
0004d3  00                DCB      0
                  |L4.1236|
0004d4  496e7665          DCB      "Invertor #3 Alarm, voltage is down",0
0004d8  72746f72
0004dc  20233320
0004e0  416c6172
0004e4  6d2c2076
0004e8  6f6c7461
0004ec  67652069
0004f0  7320646f
0004f4  776e00  
0004f7  00                DCB      0
                  |L4.1272|
0004f8  496e7665          DCB      "Invertor #4 Alarm, voltage is down",0
0004fc  72746f72
000500  20233420
000504  416c6172
000508  6d2c2076
00050c  6f6c7461
000510  67652069
000514  7320646f
000518  776e00  
00051b  00                DCB      0
                  |L4.1308|
00051c  496e7665          DCB      "Invertor #1 Alarm, output is offed",0
000520  72746f72
000524  20233120
000528  416c6172
00052c  6d2c206f
000530  75747075
000534  74206973
000538  206f6666
00053c  656400  
00053f  00                DCB      0
                  |L4.1344|
000540  496e7665          DCB      "Invertor #2 Alarm, output is offed",0
000544  72746f72
000548  20233220
00054c  416c6172
000550  6d2c206f
000554  75747075
000558  74206973
00055c  206f6666
000560  656400  
000563  00                DCB      0
                  |L4.1380|
000564  496e7665          DCB      "Invertor #3 Alarm, output is offed",0
000568  72746f72
00056c  20233320
000570  416c6172
000574  6d2c206f
000578  75747075
00057c  74206973
000580  206f6666
000584  656400  
000587  00                DCB      0
                  |L4.1416|
000588  496e7665          DCB      "Invertor #4 Alarm, output is offed",0
00058c  72746f72
000590  20233420
000594  416c6172
000598  6d2c206f
00059c  75747075
0005a0  74206973
0005a4  206f6666
0005a8  656400  
0005ab  00                DCB      0
                  |L4.1452|
0005ac  496e7665          DCB      "Invertor #1 is norm",0
0005b0  72746f72
0005b4  20233120
0005b8  6973206e
0005bc  6f726d00
                  |L4.1472|
0005c0  496e7665          DCB      "Invertor #2 is norm",0
0005c4  72746f72
0005c8  20233220
0005cc  6973206e
0005d0  6f726d00
                  |L4.1492|
0005d4  496e7665          DCB      "Invertor #3 is norm",0
0005d8  72746f72
0005dc  20233320
0005e0  6973206e
0005e4  6f726d00
                  |L4.1512|
0005e8  496e7665          DCB      "Invertor #4 is norm",0
0005ec  72746f72
0005f0  20233420
0005f4  6973206e
0005f8  6f726d00

                          AREA ||.bss||, DATA, NOINIT, ALIGN=2

                  adc_buff
                          %        1024
                  adc_buff_
                          %        32
                  main_power_buffer
                          %        32

                          AREA ||area_number.7||, DATA, NOINIT, ALIGN=1

                          EXPORTAS ||area_number.7||, ||.bss||
                  adc_buff_max
                          %        24

                          AREA ||area_number.8||, DATA, NOINIT, ALIGN=1

                          EXPORTAS ||area_number.8||, ||.bss||
                  net_buff
                          %        64

                          AREA ||.constdata||, DATA, READONLY, ALIGN=0

                  sk_buff_KONTUR
000000  0d0b0f0e          DCB      0x0d,0x0b,0x0f,0x0e

                          AREA ||area_number.11||, DATA, READONLY, ALIGN=0

                          EXPORTAS ||area_number.11||, ||.constdata||
                  sk_buff_RSTKM
000000  0d0b0f0e          DCB      0x0d,0x0b,0x0f,0x0e

                          AREA ||area_number.12||, DATA, READONLY, ALIGN=0

                          EXPORTAS ||area_number.12||, ||.constdata||
                  sk_buff_GLONASS
000000  0b0d0f0e          DCB      0x0b,0x0d,0x0f,0x0e

                          AREA ||area_number.13||, DATA, READONLY, ALIGN=0

                          EXPORTAS ||area_number.13||, ||.constdata||
                  sk_buff_3U
000000  0b0d0f0e          DCB      0x0b,0x0d,0x0f,0x0e

                          AREA ||area_number.14||, DATA, READONLY, ALIGN=0

                          EXPORTAS ||area_number.14||, ||.constdata||
                  sk_buff_6U
000000  0b0d0f0e          DCB      0x0b,0x0d,0x0f,0x0e

                          AREA ||area_number.15||, DATA, READONLY, ALIGN=0

                          EXPORTAS ||area_number.15||, ||.constdata||
                  sk_buff_220
000000  0b0d0f0e          DCB      0x0b,0x0d,0x0f,0x0e

                          AREA ||area_number.16||, DATA, READONLY, ALIGN=0

                          EXPORTAS ||area_number.16||, ||.constdata||
                  sk_buff_TELECORE2015
000000  0a0d0f0e          DCB      0x0a,0x0d,0x0f,0x0e

                          AREA ||.data||, DATA, ALIGN=1

                  adc_buff_min
000000  13881388          DCW      0x1388,0x1388
000004  13881388          DCW      0x1388,0x1388
000008  13881388          DCW      0x1388,0x1388
00000c  13881388          DCW      0x1388,0x1388
000010  13881388          DCW      0x1388,0x1388
                          DCDU     0x00000000

                          AREA ||area_number.18||, DATA, ALIGN=1

                          EXPORTAS ||area_number.18||, ||.data||
                  unet_buff_min
000000  1388              DCW      0x1388

                          AREA ||area_number.19||, DATA, ALIGN=0

                          EXPORTAS ||area_number.19||, ||.data||
                  adc_stat
000000  01                DCB      0x01

                          AREA ||area_number.20||, DATA, ALIGN=1

                          EXPORTAS ||area_number.20||, ||.data||
                  bat_ver_cnt
000000  0096              DCW      0x0096

                          AREA ||area_number.21||, DATA, ALIGN=2

                          EXPORTAS ||area_number.21||, ||.data||
                  vent_stat
000000  00                DCB      0x00
                  adc_self_ch_cnt
000001  00                DCB      0x00
                  adc_ch_net
000002  00                DCB      0x00
                  adc_ch
000003  00                DCB      0x00
                  adc_ch_cnt
000004  00                DCB      0x00
                  adc_window_flag
000005  00                DCB      0x00
                  ch_cnt0
000006  00                DCB      0x00
                  b1Hz_ch
000007  00                DCB      0x00
                  i
000008  00                DCB      0x00
                  iiii
000009  00                DCB      0x00
                  bAVG
00000a  00                DCB      0x00
                  avg_num
00000b  00                DCB      0x00
                  kb_full_ver
00000c  00                DCB      0x00
                  kb_start_ips
00000d  00                DCB      0x00
                  num_of_wrks_bps
00000e  00                DCB      0x00
                  num_necc_up
00000f  00                DCB      0x00
                  num_necc_down
000010  00                DCB      0x00
                  sh_cnt0
000011  00                DCB      0x00
                  b1Hz_sh
000012  00                DCB      0x00
                  spc_stat
000013  00                DCB      0x00
                  spc_bat
000014  00                DCB      0x00
                  spc_phase
000015  00                DCB      0x00
                  bAVZ
000016  00                DCB      0x00
                  ke_start_stat
000017  00                DCB      0x00
                  numOfForvardBps
000018  00                DCB      0x00
                  numOfForvardBps_minCnt
000019  00                DCB      0x00
                  cntrl_stat
00001a  0258              DCW      0x0258
                  cntrl_stat_old
00001c  0258              DCW      0x0258
                  avg_main_cnt
00001e  0014              DCW      0x0014
                  ibat_ips
000020  0000              DCB      0x00,0x00
                  ibat_ips_
000022  0000              DCB      0x00,0x00
                  num_necc_block_cnt
000024  0000              DCB      0x00,0x00
                  net_buff_
000026  0000              DCB      0x00,0x00
                  adc_result
000028  0000              DCB      0x00,0x00
                  adc_gorb_cnt
00002a  0000              DCB      0x00,0x00
                  adc_zero_cnt
00002c  0000              DCB      0x00,0x00
                  adc_window_cnt
00002e  0000              DCB      0x00,0x00
                  adc_net_buff_cnt
000030  0000              DCB      0x00,0x00
                  plazma_sk
000032  0000              DCB      0x00,0x00
                  cntrl_stat_new
000034  0000              DCB      0x00,0x00
                  Ibmax
000036  0000              DCB      0x00,0x00
                  IZMAX_
000038  0000              DCB      0x00,0x00
                  samokalibr_cnt
00003a  0000              DCB      0x00,0x00
                  main_kb_cnt
00003c  0000              DCB      0x00,0x00
                  kb_cnt_1lev
00003e  0000              DCB      0x00,0x00
                  kb_cnt_2lev
000040  0000              DCB      0x00,0x00
                  kb_start
000042  0000              DCB      0x00,0x00
                  bps_on_mask
000044  0000              DCB      0x00,0x00
                  bps_off_mask
000046  0000              DCB      0x00,0x00
                  vz_cnt_s
000048  0000              DCB      0x00,0x00
                  vz_cnt_s_
00004a  0000              DCB      0x00,0x00
                  vz_cnt_h
00004c  0000              DCB      0x00,0x00
                  vz_cnt_h_
00004e  0000              DCB      0x00,0x00
                  cnt_end_ke
000050  0000              DCB      0x00,0x00
                  __ee_vz_cnt
000052  0000              DCB      0x00,0x00
                  __ee_spc_stat
000054  0000              DCB      0x00,0x00
                  __ee_spc_bat
000056  0000              DCB      0x00,0x00
                  __ee_spc_phase
000058  0000              DCB      0x00,0x00
                  cntrl_stat_blok_cnt
00005a  0000              DCB      0x00,0x00
                  cntrl_stat_blok_cnt_
00005c  0000              DCB      0x00,0x00
                  numOfForvardBps_hourCnt
00005e  0000              DCB      0x00,0x00
                  ibat
                          DCD      0x00000000
                  ibat_
                          DCD      0x00000000
                  i_avg_max
                          DCD      0x00000000
                  i_avg_min
                          DCD      0x00000000
                  i_avg_summ
                          DCD      0x00000000
                  i_avg
                          DCD      0x00000000
                  avg
                          DCD      0x00000000
                  cntrl_stat_blok_cnt_plus
                          DCD      0x00000000
                  cntrl_stat_blok_cnt_minus
                          DCD      0x00000000
                  plazma_inv
                          DCD      0x00000000
                  net_metr_buff_
                          DCD      0x00000000
00008c  0000              DCB      0x00,0x00
                  adc_self_ch_buff
00008e  0000              DCB      0x00,0x00
                          DCD      0x00000000
                  adc_self_ch_disp
                          DCD      0x00000000
000098  00000000          DCB      0x00,0x00,0x00,0x00
                  ke_date
                          %        8

                          AREA ||area_number.22||, DATA, ALIGN=1

                          EXPORTAS ||area_number.22||, ||.data||
                  unet_buff_max
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.23||, DATA, ALIGN=0

                          EXPORTAS ||area_number.23||, ||.data||
                  adc_cnt
000000  00                DCB      0x00

                          AREA ||area_number.24||, DATA, ALIGN=0

                          EXPORTAS ||area_number.24||, ||.data||
                  adc_cnt1
000000  00                DCB      0x00

                          AREA ||area_number.25||, DATA, ALIGN=1

                          EXPORTAS ||area_number.25||, ||.data||
                  zero_cnt
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.26||, DATA, ALIGN=0

                          EXPORTAS ||area_number.26||, ||.data||
                  net_buff_cnt
000000  00                DCB      0x00

                          AREA ||area_number.27||, DATA, ALIGN=1

                          EXPORTAS ||area_number.27||, ||.data||
                  ADWR
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.28||, DATA, ALIGN=1

                          EXPORTAS ||area_number.28||, ||.data||
                  period_cnt
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.29||, DATA, ALIGN=1

                          EXPORTAS ||area_number.29||, ||.data||
                  non_zero_cnt
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.30||, DATA, ALIGN=0

                          EXPORTAS ||area_number.30||, ||.data||
                  rele_stat
000000  00                DCB      0x00

                          AREA ||area_number.31||, DATA, ALIGN=0

                          EXPORTAS ||area_number.31||, ||.data||
                  bRELE_OUT
000000  00                DCB      0x00

                          AREA ||area_number.32||, DATA, ALIGN=2

                          EXPORTAS ||area_number.32||, ||.data||
                  main_power_buffer_
                          DCD      0x00000000

                          AREA ||area_number.33||, DATA, ALIGN=1

                          EXPORTAS ||area_number.33||, ||.data||
                  main_power_buffer_cnt
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.34||, DATA, ALIGN=1

                          EXPORTAS ||area_number.34||, ||.data||
                  adc_buff_out_
                          DCDU     0x00000000
000004  0000              DCB      0x00,0x00

                          AREA ||area_number.35||, DATA, ALIGN=1

                          EXPORTAS ||area_number.35||, ||.data||
                  plazma_adc_cnt
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.36||, DATA, ALIGN=0

                          EXPORTAS ||area_number.36||, ||.data||
                  unh_cnt0
000000  00                DCB      0x00

                          AREA ||area_number.37||, DATA, ALIGN=0

                          EXPORTAS ||area_number.37||, ||.data||
                  unh_cnt1
000000  00                DCB      0x00

                          AREA ||area_number.38||, DATA, ALIGN=0

                          EXPORTAS ||area_number.38||, ||.data||
                  b1Hz_unh
000000  00                DCB      0x00

                          AREA ||area_number.39||, DATA, ALIGN=0

                          EXPORTAS ||area_number.39||, ||.data||
                  ch_cnt1
000000  00                DCB      0x00

                          AREA ||area_number.40||, DATA, ALIGN=0

                          EXPORTAS ||area_number.40||, ||.data||
                  b1_30Hz_ch
000000  00                DCB      0x00

                          AREA ||area_number.41||, DATA, ALIGN=0

                          EXPORTAS ||area_number.41||, ||.data||
                  avg_cnt
000000  00                DCB      0x00

                          AREA ||area_number.42||, DATA, ALIGN=0

                          EXPORTAS ||area_number.42||, ||.data||
                  bps_all_off_cnt
000000  00                DCB      0x00

                          AREA ||area_number.43||, DATA, ALIGN=0

                          EXPORTAS ||area_number.43||, ||.data||
                  bps_mask_off_cnt
000000  00                DCB      0x00

                          AREA ||area_number.44||, DATA, ALIGN=0

                          EXPORTAS ||area_number.44||, ||.data||
                  bps_mask_on_off_cnt
000000  00                DCB      0x00

                          AREA ||area_number.45||, DATA, ALIGN=0

                          EXPORTAS ||area_number.45||, ||.data||
                  bps_hndl_2sec_cnt
000000  00                DCB      0x00

                          AREA ||area_number.46||, DATA, ALIGN=0

                          EXPORTAS ||area_number.46||, ||.data||
                  plazma_bat
000000  00                DCB      0x00
