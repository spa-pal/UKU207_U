; generated by ARM C/C++ Compiler, 4.1 [Build 644]
; commandline ArmCC [--list --debug -c --asm --interleave -o.\EXE\control.o --asm_dir=.\ --list_dir=.\ --depend=.\EXE\control.d --feedback=.\EXE\UKU_220_IPS_TERMOKOMPENSAT.fed --cpu=Cortex-M3 --apcs=interwork -O1 -IC:\Keil\ARM\CMSIS\Include -IC:\Keil\ARM\INC\NXP\LPC17xx -D__MICROLIB -DUKU_220_IPS_TERMOKOMPENSAT -DUKU2071x --omf_browse=.\EXE\control.crf control.c]
                          THUMB

                          AREA ||.text||, CODE, READONLY, ALIGN=2

                  ke_start PROC
;;;223    //-----------------------------------------------
;;;224    void ke_start(char in)
000000  e92d41fc          PUSH     {r2-r8,lr}
;;;225    {          
000004  4604              MOV      r4,r0
;;;226    ke_start_stat=(enum_ke_start_stat)0;		 
000006  4efe              LDR      r6,|L1.1024|
000008  f04f0700          MOV      r7,#0
00000c  75f7              STRB     r7,[r6,#0x17]
;;;227    
;;;228    if(spc_stat==spcVZ)ke_start_stat=kssNOT_VZ;
00000e  7cf0              LDRB     r0,[r6,#0x13]  ; spc_stat
000010  f04f0301          MOV      r3,#1
000014  2802              CMP      r0,#2
000016  d008              BEQ      |L1.42|
;;;229    else if(BAT_IS_ON[in]!=bisON)ke_start_stat=kssNOT_BAT;
000018  49fa              LDR      r1,|L1.1028|
00001a  5d09              LDRB     r1,[r1,r4]
00001c  2955              CMP      r1,#0x55
00001e  d006              BEQ      |L1.46|
000020  f04f0065          MOV      r0,#0x65
000024  75f0              STRB     r0,[r6,#0x17]
                  |L1.38|
;;;230    else if(bat[in]._av&(1<<0))ke_start_stat=kssNOT_BAT_AV;
;;;231    else if(bat[in]._temper_stat&(1<<1))ke_start_stat=kssNOT_BAT_AV_T;
;;;232    else if(bat[in]._av&(1<<1))ke_start_stat=kssNOT_BAT_AV_ASS;
;;;233    else if(bat[in]._Ib>IKB)ke_start_stat=kssNOT_BAT_ZAR;
;;;234    else if(bat[in]._Ib<-IKB)ke_start_stat=kssNOT_BAT_RAZR;
;;;235    else if((spc_stat==spcKE)&&(spc_bat==0))ke_start_stat=kssNOT_KE1;
;;;236    else if((spc_stat==spcKE)&&(spc_bat==1))ke_start_stat=kssNOT_KE2;
;;;237    else 
;;;238    	{
;;;239    
;;;240    	ke_start_stat=kssYES;
;;;241    
;;;242    	spc_stat=spcKE;
;;;243    	__ee_spc_stat=spcKE;
;;;244    	lc640_write_int(EE_SPC_STAT,__ee_spc_stat);
;;;245    	
;;;246    	spc_bat=in;
;;;247    	__ee_spc_bat=in;
;;;248    	lc640_write_int(EE_SPC_BAT,__ee_spc_bat);
;;;249    
;;;250    	bat[in]._zar_cnt_ke=0;
;;;251    	lc640_write_int(ADR_EE_BAT_ZAR_CNT_KE[in],0);
;;;252    	
;;;253    	spc_phase=0;
;;;254    	__ee_spc_phase=0;
;;;255    	lc640_write_int(EE_SPC_PHASE,__ee_spc_phase);
;;;256    
;;;257    	//ke_mem_hndl(in,lc640_read_int(ADR_EE_BAT_ZAR_CNT_KE[spc_bat]));
;;;258    
;;;259    		{					
;;;260    		signed short temp_temp;
;;;261    		signed char temp;
;;;262    		temp_temp=bat[in]._u_old[((bat_u_old_cnt+1)&0x07)]; 
;;;263    		    
;;;264    		temp=LPC_RTC->YEAR;
;;;265    		gran_char(&temp,1,99);
;;;266    		*((char*)(&(ke_date[0])))=temp;
;;;267    			
;;;268    		temp=LPC_RTC->MONTH;
;;;269    		gran_char(&temp,1,12);
;;;270    		*(((char*)(&(ke_date[0])))+1)=temp;
;;;271    		
;;;272    		temp=LPC_RTC->DOM;
;;;273    		gran_char(&temp,1,31);
;;;274    		*(((char*)(&(ke_date[0])))+2)=temp;			
;;;275    				
;;;276    		*(((char*)(&(ke_date[0])))+3)=*((char*)&temp_temp);
;;;277    		lc640_write_long(EE_SPC_KE_DATE0,ke_date[0]);
;;;278    
;;;279    		temp=LPC_RTC->HOUR;
;;;280    		gran_char(&temp,0,23);
;;;281    		*((char*)(&(ke_date[1])))=temp;
;;;282                   
;;;283    		temp=LPC_RTC->MIN;
;;;284    		gran_char(&temp,0,59);
;;;285    		*(((char*)(&(ke_date[1])))+1)=temp;
;;;286    	          
;;;287    		temp=LPC_RTC->SEC;
;;;288    		gran_char(&temp,0,59);
;;;289    		*(((char*)(&(ke_date[1])))+2)=temp;
;;;290    			
;;;291    		*(((char*)(&(ke_date[1])))+3)=*(((char*)&temp_temp)+1);
;;;292    		lc640_write_long(EE_SPC_KE_DATE1,ke_date[1]);
;;;293    		}
;;;294    
;;;295    	}
;;;296    }
000026  e8bd81fc          POP      {r2-r8,pc}
                  |L1.42|
00002a  75f3              STRB     r3,[r6,#0x17]         ;228
00002c  e7fb              B        |L1.38|
                  |L1.46|
00002e  eb040144          ADD      r1,r4,r4,LSL #1       ;230
000032  eb011204          ADD      r2,r1,r4,LSL #4       ;230
000036  49f4              LDR      r1,|L1.1032|
000038  eb010582          ADD      r5,r1,r2,LSL #2       ;230
00003c  f895103d          LDRB     r1,[r5,#0x3d]         ;230
000040  07ca              LSLS     r2,r1,#31             ;230
000042  d003              BEQ      |L1.76|
000044  f04f0066          MOV      r0,#0x66              ;230
000048  75f0              STRB     r0,[r6,#0x17]         ;230
00004a  e7ec              B        |L1.38|
                  |L1.76|
00004c  f895203f          LDRB     r2,[r5,#0x3f]         ;231
000050  0792              LSLS     r2,r2,#30             ;231
000052  d503              BPL      |L1.92|
000054  f04f0067          MOV      r0,#0x67              ;231
000058  75f0              STRB     r0,[r6,#0x17]         ;231
00005a  e7e4              B        |L1.38|
                  |L1.92|
00005c  0789              LSLS     r1,r1,#30             ;232
00005e  d503              BPL      |L1.104|
000060  f04f0068          MOV      r0,#0x68              ;232
000064  75f0              STRB     r0,[r6,#0x17]         ;232
000066  e7de              B        |L1.38|
                  |L1.104|
000068  4ae8              LDR      r2,|L1.1036|
00006a  f9b51008          LDRSH    r1,[r5,#8]            ;233
00006e  f9b22000          LDRSH    r2,[r2,#0]            ;233  ; IKB
000072  4291              CMP      r1,r2                 ;233
000074  dd03              BLE      |L1.126|
000076  f04f0069          MOV      r0,#0x69              ;233
00007a  75f0              STRB     r0,[r6,#0x17]         ;233
00007c  e7d3              B        |L1.38|
                  |L1.126|
00007e  4252              RSBS     r2,r2,#0              ;234
000080  4291              CMP      r1,r2                 ;234
000082  da03              BGE      |L1.140|
000084  f04f006a          MOV      r0,#0x6a              ;234
000088  75f0              STRB     r0,[r6,#0x17]         ;234
00008a  e7cc              B        |L1.38|
                  |L1.140|
00008c  49dc              LDR      r1,|L1.1024|
00008e  2801              CMP      r0,#1                 ;235
000090  7d09              LDRB     r1,[r1,#0x14]         ;235
000092  d100              BNE      |L1.150|
000094  b111              CBZ      r1,|L1.156|
                  |L1.150|
000096  2801              CMP      r0,#1                 ;236
000098  d004              BEQ      |L1.164|
00009a  e005              B        |L1.168|
                  |L1.156|
00009c  f04f006b          MOV      r0,#0x6b              ;235
0000a0  75f0              STRB     r0,[r6,#0x17]         ;235
0000a2  e7c0              B        |L1.38|
                  |L1.164|
0000a4  2901              CMP      r1,#1                 ;236
0000a6  d07e              BEQ      |L1.422|
                  |L1.168|
0000a8  f04f0064          MOV      r0,#0x64              ;240
0000ac  75f0              STRB     r0,[r6,#0x17]         ;240
0000ae  74f3              STRB     r3,[r6,#0x13]         ;242
0000b0  f8a63058          STRH     r3,[r6,#0x58]         ;243
0000b4  4619              MOV      r1,r3                 ;244
0000b6  f44f70f8          MOV      r0,#0x1f0             ;244
0000ba  f7fffffe          BL       lc640_write_int
0000be  7534              STRB     r4,[r6,#0x14]         ;246
0000c0  f8a6405a          STRH     r4,[r6,#0x5a]         ;247
0000c4  4621              MOV      r1,r4                 ;248
0000c6  f44f70fa          MOV      r0,#0x1f4             ;248
0000ca  f7fffffe          BL       lc640_write_int
0000ce  61af              STR      r7,[r5,#0x18]         ;250
0000d0  48cf              LDR      r0,|L1.1040|
0000d2  2100              MOVS     r1,#0                 ;251
0000d4  f9300014          LDRSH    r0,[r0,r4,LSL #1]     ;251
0000d8  f7fffffe          BL       lc640_write_int
0000dc  7577              STRB     r7,[r6,#0x15]         ;253
0000de  f8a6705c          STRH     r7,[r6,#0x5c]         ;254
0000e2  4639              MOV      r1,r7                 ;255
0000e4  f44f70fb          MOV      r0,#0x1f6             ;255
0000e8  f7fffffe          BL       lc640_write_int
0000ec  48c9              LDR      r0,|L1.1044|
0000ee  8800              LDRH     r0,[r0,#0]            ;262  ; bat_u_old_cnt
0000f0  f1000001          ADD      r0,r0,#1              ;262
0000f4  f0000007          AND      r0,r0,#7              ;262
0000f8  eb050040          ADD      r0,r5,r0,LSL #1       ;262
0000fc  8c00              LDRH     r0,[r0,#0x20]         ;262
0000fe  9001              STR      r0,[sp,#4]            ;262
000100  4dc5              LDR      r5,|L1.1048|
000102  8ba8              LDRH     r0,[r5,#0x1c]         ;264
000104  9000              STR      r0,[sp,#0]            ;264
000106  f04f0263          MOV      r2,#0x63              ;265
00010a  f04f0101          MOV      r1,#1                 ;265
00010e  4668              MOV      r0,sp                 ;265
000110  f7fffffe          BL       gran_char
000114  4cba              LDR      r4,|L1.1024|
000116  f89d0000          LDRB     r0,[sp,#0]            ;266
00011a  34a4              ADDS     r4,r4,#0xa4           ;266
00011c  7020              STRB     r0,[r4,#0]            ;266
00011e  7e28              LDRB     r0,[r5,#0x18]         ;268
000120  9000              STR      r0,[sp,#0]            ;268
000122  220c              MOVS     r2,#0xc               ;269
000124  2101              MOVS     r1,#1                 ;269
000126  4668              MOV      r0,sp                 ;269
000128  f7fffffe          BL       gran_char
00012c  f89d0000          LDRB     r0,[sp,#0]            ;270
000130  7060              STRB     r0,[r4,#1]            ;270
000132  7b28              LDRB     r0,[r5,#0xc]          ;272
000134  9000              STR      r0,[sp,#0]            ;272
000136  221f              MOVS     r2,#0x1f              ;273
000138  2101              MOVS     r1,#1                 ;273
00013a  4668              MOV      r0,sp                 ;273
00013c  f7fffffe          BL       gran_char
000140  f89d0000          LDRB     r0,[sp,#0]            ;274
000144  70a0              STRB     r0,[r4,#2]            ;274
000146  f89d0004          LDRB     r0,[sp,#4]            ;276
00014a  70e0              STRB     r0,[r4,#3]            ;276
00014c  f44f70fc          MOV      r0,#0x1f8             ;277
000150  6821              LDR      r1,[r4,#0]            ;277  ; ke_date
000152  f7fffffe          BL       lc640_write_long
000156  7a28              LDRB     r0,[r5,#8]            ;279
000158  9000              STR      r0,[sp,#0]            ;279
00015a  2217              MOVS     r2,#0x17              ;280
00015c  2100              MOVS     r1,#0                 ;280
00015e  4668              MOV      r0,sp                 ;280
000160  f7fffffe          BL       gran_char
000164  f89d0000          LDRB     r0,[sp,#0]            ;281
000168  7120              STRB     r0,[r4,#4]            ;281
00016a  7928              LDRB     r0,[r5,#4]            ;283
00016c  9000              STR      r0,[sp,#0]            ;283
00016e  223b              MOVS     r2,#0x3b              ;284
000170  2100              MOVS     r1,#0                 ;284
000172  4668              MOV      r0,sp                 ;284
000174  f7fffffe          BL       gran_char
000178  f89d0000          LDRB     r0,[sp,#0]            ;285
00017c  7160              STRB     r0,[r4,#5]            ;285
00017e  7828              LDRB     r0,[r5,#0]            ;287
000180  9000              STR      r0,[sp,#0]            ;287
000182  223b              MOVS     r2,#0x3b              ;288
000184  2100              MOVS     r1,#0                 ;288
000186  4668              MOV      r0,sp                 ;288
000188  f7fffffe          BL       gran_char
00018c  f89d0000          LDRB     r0,[sp,#0]            ;289
000190  71a0              STRB     r0,[r4,#6]            ;289
000192  f89d0005          LDRB     r0,[sp,#5]            ;291
000196  71e0              STRB     r0,[r4,#7]            ;291
000198  f44f70fe          MOV      r0,#0x1fc             ;292
00019c  6861              LDR      r1,[r4,#4]            ;292  ; ke_date
00019e  f7fffffe          BL       lc640_write_long
0001a2  e740              B        |L1.38|
0001a4  e7ff              B        |L1.422|
                  |L1.422|
0001a6  f04f006c          MOV      r0,#0x6c              ;236
0001aa  75f0              STRB     r0,[r6,#0x17]         ;236
0001ac  e73b              B        |L1.38|
;;;297    
                          ENDP

                  ke_drv PROC
;;;298    //-----------------------------------------------
;;;299    void ke_drv(void)
0001ae  e92d47f0          PUSH     {r4-r10,lr}
;;;300    {
;;;301    
;;;302    if(spc_stat==spcKE)
0001b2  4c93              LDR      r4,|L1.1024|
0001b4  7ce0              LDRB     r0,[r4,#0x13]  ; spc_stat
0001b6  2801              CMP      r0,#1
0001b8  d17d              BNE      |L1.694|
0001ba  4621              MOV      r1,r4
0001bc  2601              MOVS     r6,#1
;;;303    	{
;;;304    	if(spc_phase==0)
;;;305    		{
;;;306    		mess_send(MESS2BAT_HNDL,PARAM_BAT_MASK_OFF_AFTER_2SEC,(1<<(1-spc_bat)),20);
0001be  7d09              LDRB     r1,[r1,#0x14]
0001c0  7d60              LDRB     r0,[r4,#0x15]         ;304  ; spc_phase
0001c2  f1c10201          RSB      r2,r1,#1
0001c6  fa06f102          LSL      r1,r6,r2
;;;307    		mess_send(MESS2BPS_HNDL,PARAM_BPS_ALL_OFF_AFTER_2SEC,0xffff,20);
;;;308    
;;;309    		bat[spc_bat]._zar_cnt_ke+=abs(bat[spc_bat]._Ib);
;;;310    	    	
;;;311    		if(bat[spc_bat]._zar_cnt_ke>=AH_CONSTANT)
;;;312    			{
;;;313    			bat[spc_bat]._zar_cnt_ke-=AH_CONSTANT;
;;;314    			lc640_write_int(ADR_EE_BAT_ZAR_CNT_KE[spc_bat],lc640_read_int(ADR_EE_BAT_ZAR_CNT_KE[spc_bat])+1);
0001ca  4f91              LDR      r7,|L1.1040|
0001cc  4d8e              LDR      r5,|L1.1032|
0001ce  b20a              SXTH     r2,r1                 ;306
0001d0  b110              CBZ      r0,|L1.472|
;;;315    			}
;;;316    		}
;;;317    
;;;318    	else if(spc_phase==1)
0001d2  2801              CMP      r0,#1
0001d4  d034              BEQ      |L1.576|
0001d6  e038              B        |L1.586|
                  |L1.472|
0001d8  2314              MOVS     r3,#0x14              ;306
0001da  21ca              MOVS     r1,#0xca              ;306
0001dc  20c8              MOVS     r0,#0xc8              ;306
0001de  f7fffffe          BL       mess_send
0001e2  2314              MOVS     r3,#0x14              ;307
0001e4  f04f32ff          MOV      r2,#0xffffffff        ;307
0001e8  21ce              MOVS     r1,#0xce              ;307
0001ea  20cd              MOVS     r0,#0xcd              ;307
0001ec  f7fffffe          BL       mess_send
0001f0  7d20              LDRB     r0,[r4,#0x14]         ;309  ; spc_bat
0001f2  eb000140          ADD      r1,r0,r0,LSL #1       ;309
0001f6  eb011000          ADD      r0,r1,r0,LSL #4       ;309
0001fa  eb050080          ADD      r0,r5,r0,LSL #2       ;309
0001fe  f9b00008          LDRSH    r0,[r0,#8]            ;309
000202  f7fffffe          BL       abs
000206  7d21              LDRB     r1,[r4,#0x14]         ;309  ; spc_bat
000208  eb010241          ADD      r2,r1,r1,LSL #1       ;309
00020c  eb021201          ADD      r2,r2,r1,LSL #4       ;309
000210  eb050282          ADD      r2,r5,r2,LSL #2       ;309
000214  6993              LDR      r3,[r2,#0x18]         ;309
000216  4418              ADD      r0,r0,r3              ;309
000218  6190              STR      r0,[r2,#0x18]         ;309
00021a  f64843a0          MOV      r3,#0x8ca0            ;311
00021e  4298              CMP      r0,r3                 ;311
000220  db13              BLT      |L1.586|
000222  eba00003          SUB      r0,r0,r3              ;313
000226  6190              STR      r0,[r2,#0x18]         ;313
000228  f8370011          LDRH     r0,[r7,r1,LSL #1]     ;314
00022c  f7fffffe          BL       lc640_read_int
000230  1c40              ADDS     r0,r0,#1              ;314
000232  b201              SXTH     r1,r0                 ;314
000234  7d20              LDRB     r0,[r4,#0x14]         ;314  ; spc_bat
000236  f9370010          LDRSH    r0,[r7,r0,LSL #1]     ;314
00023a  f7fffffe          BL       lc640_write_int
00023e  e004              B        |L1.586|
                  |L1.576|
;;;319    		{
;;;320    		mess_send(MESS2BAT_HNDL,PARAM_BAT_MASK_OFF_AFTER_2SEC,(1<<(1-spc_bat)),20);
000240  2314              MOVS     r3,#0x14
000242  21ca              MOVS     r1,#0xca
000244  20c8              MOVS     r0,#0xc8
000246  f7fffffe          BL       mess_send
                  |L1.586|
;;;321    		}
;;;322    
;;;323    	if(bat[spc_bat]._Ub<(USIGN*10))
00024a  7d21              LDRB     r1,[r4,#0x14]  ; spc_bat
;;;324    		{
;;;325    		cnt_end_ke++;
;;;326    		if(cnt_end_ke>=30)
;;;327    			{
;;;328    			
;;;329    			if((spc_stat==spcKE)&&(spc_phase==0))
;;;330    				{
;;;331    				lc640_write_int(ADR_EE_BAT_C_REAL[spc_bat],lc640_read_int(ADR_EE_BAT_ZAR_CNT_KE[spc_bat]));
;;;332    				ke_mem_hndl(spc_bat,lc640_read_int(ADR_EE_BAT_ZAR_CNT_KE[spc_bat]));
;;;333    				lc640_write_int(ADR_EE_BAT_ZAR_CNT[spc_bat],0);
;;;334    				cntrl_stat=50;
;;;335    				cntrl_stat_old=50;
;;;336    				}
;;;337    
;;;338    			if((BAT_IS_ON[1-spc_bat]) == bisON)
;;;339    				{
;;;340    				spc_phase=1;
;;;341    				__ee_spc_phase=1;
;;;342    				lc640_write_int(EE_SPC_PHASE,1);
;;;343    				}			
;;;344    			else
;;;345    				{
;;;346    				spc_stat=spcOFF;
;;;347    				__ee_spc_stat=spcOFF;
;;;348    				lc640_write_int(EE_SPC_STAT,spcOFF);
00024c  f44f79f8          MOV      r9,#0x1f0
000250  eb010041          ADD      r0,r1,r1,LSL #1       ;323
000254  eb001001          ADD      r0,r0,r1,LSL #4       ;323
000258  eb050080          ADD      r0,r5,r0,LSL #2       ;323
00025c  f04f0800          MOV      r8,#0                 ;304
000260  f9b02002          LDRSH    r2,[r0,#2]            ;323
000264  486d              LDR      r0,|L1.1052|
000266  f9b00000          LDRSH    r0,[r0,#0]            ;323  ; USIGN
00026a  eb000080          ADD      r0,r0,r0,LSL #2       ;323
00026e  ebb20f40          CMP      r2,r0,LSL #1          ;323
000272  da47              BGE      |L1.772|
000274  f8b40054          LDRH     r0,[r4,#0x54]         ;325  ; cnt_end_ke
000278  f1000001          ADD      r0,r0,#1              ;325
00027c  b200              SXTH     r0,r0                 ;325
00027e  f8a40054          STRH     r0,[r4,#0x54]         ;325
000282  281e              CMP      r0,#0x1e              ;326
000284  db40              BLT      |L1.776|
000286  7ce0              LDRB     r0,[r4,#0x13]         ;329  ; spc_stat
000288  2801              CMP      r0,#1                 ;329
00028a  d122              BNE      |L1.722|
00028c  7d60              LDRB     r0,[r4,#0x15]         ;329  ; spc_phase
00028e  bb00              CBNZ     r0,|L1.722|
000290  f8370011          LDRH     r0,[r7,r1,LSL #1]     ;331
000294  f7fffffe          BL       lc640_read_int
000298  b201              SXTH     r1,r0                 ;331
00029a  4861              LDR      r0,|L1.1056|
00029c  7d22              LDRB     r2,[r4,#0x14]         ;331  ; spc_bat
00029e  f9300012          LDRSH    r0,[r0,r2,LSL #1]     ;331
0002a2  f7fffffe          BL       lc640_write_int
0002a6  7d20              LDRB     r0,[r4,#0x14]         ;332  ; spc_bat
0002a8  f8370010          LDRH     r0,[r7,r0,LSL #1]     ;332
0002ac  f7fffffe          BL       lc640_read_int
0002b0  b281              UXTH     r1,r0                 ;332
0002b2  7d20              LDRB     r0,[r4,#0x14]         ;332  ; spc_bat
0002b4  e000              B        |L1.696|
                  |L1.694|
0002b6  e049              B        |L1.844|
                  |L1.696|
0002b8  f7fffffe          BL       ke_mem_hndl
0002bc  4859              LDR      r0,|L1.1060|
0002be  7d21              LDRB     r1,[r4,#0x14]         ;333  ; spc_bat
0002c0  f9300011          LDRSH    r0,[r0,r1,LSL #1]     ;333
0002c4  2100              MOVS     r1,#0                 ;333
0002c6  f7fffffe          BL       lc640_write_int
0002ca  f04f0032          MOV      r0,#0x32              ;334
0002ce  83a0              STRH     r0,[r4,#0x1c]         ;334
0002d0  83e0              STRH     r0,[r4,#0x1e]         ;335
                  |L1.722|
0002d2  7d20              LDRB     r0,[r4,#0x14]         ;338  ; spc_bat
0002d4  494b              LDR      r1,|L1.1028|
0002d6  f1c00001          RSB      r0,r0,#1              ;338
0002da  5c08              LDRB     r0,[r1,r0]            ;338
0002dc  2855              CMP      r0,#0x55              ;338
0002de  d008              BEQ      |L1.754|
0002e0  f8848013          STRB     r8,[r4,#0x13]         ;346
0002e4  f8a48058          STRH     r8,[r4,#0x58]         ;347
0002e8  2100              MOVS     r1,#0
0002ea  4648              MOV      r0,r9
0002ec  f7fffffe          BL       lc640_write_int
0002f0  e00a              B        |L1.776|
                  |L1.754|
0002f2  7566              STRB     r6,[r4,#0x15]         ;340
0002f4  f8a4605c          STRH     r6,[r4,#0x5c]         ;341
0002f8  2101              MOVS     r1,#1                 ;342
0002fa  f44f70fb          MOV      r0,#0x1f6             ;342
0002fe  f7fffffe          BL       lc640_write_int
000302  e001              B        |L1.776|
                  |L1.772|
;;;349    				}
;;;350    			}
;;;351    		}
;;;352    	else cnt_end_ke=0;
000304  f8a48054          STRH     r8,[r4,#0x54]
                  |L1.776|
;;;353    
;;;354    	if((bat[spc_bat]._Ub>=bat[1-spc_bat]._Ub)&&(spc_phase==1))
000308  7d21              LDRB     r1,[r4,#0x14]  ; spc_bat
00030a  eb010041          ADD      r0,r1,r1,LSL #1
00030e  eb001001          ADD      r0,r0,r1,LSL #4
000312  eb050080          ADD      r0,r5,r0,LSL #2
000316  f9b02002          LDRSH    r2,[r0,#2]
00031a  f1c10001          RSB      r0,r1,#1
00031e  eb000140          ADD      r1,r0,r0,LSL #1
000322  eb011000          ADD      r0,r1,r0,LSL #4
000326  eb050080          ADD      r0,r5,r0,LSL #2
00032a  f9b00002          LDRSH    r0,[r0,#2]
00032e  4282              CMP      r2,r0
000330  db0c              BLT      |L1.844|
000332  7d60              LDRB     r0,[r4,#0x15]  ; spc_phase
000334  2801              CMP      r0,#1
000336  d109              BNE      |L1.844|
;;;355    		{
;;;356    		spc_stat=spcOFF;
000338  f8848013          STRB     r8,[r4,#0x13]
;;;357    		__ee_spc_stat=spcOFF;
00033c  f8a48058          STRH     r8,[r4,#0x58]
;;;358    		lc640_write_int(EE_SPC_STAT,spcOFF);
000340  4648              MOV      r0,r9
000342  e8bd47f0          POP      {r4-r10,lr}
000346  2100              MOVS     r1,#0
000348  f7ffbffe          B.W      lc640_write_int
                  |L1.844|
;;;359    		}
;;;360    	}
;;;361    			
;;;362    }
00034c  e8bd87f0          POP      {r4-r10,pc}
;;;363    
                          ENDP

                  vz_start PROC
;;;364    //-----------------------------------------------
;;;365    char vz_start(char hour)
000350  b570              PUSH     {r4-r6,lr}
;;;366    {          
000352  4605              MOV      r5,r0
;;;367    char out;
;;;368    out=0;
000354  f04f0600          MOV      r6,#0
;;;369    if(spc_stat==spcOFF)
000358  4c29              LDR      r4,|L1.1024|
00035a  7ce0              LDRB     r0,[r4,#0x13]  ; spc_stat
00035c  bb18              CBNZ     r0,|L1.934|
;;;370    	{
;;;371    	spc_stat=spcVZ;
00035e  f104041a          ADD      r4,r4,#0x1a
000362  f04f0102          MOV      r1,#2
000366  f8041c07          STRB     r1,[r4,#-7]
;;;372    	__ee_spc_stat=spcVZ; 
00036a  87e1              STRH     r1,[r4,#0x3e]
;;;373    	lc640_write_int(EE_SPC_STAT,__ee_spc_stat);   
00036c  f44f70f8          MOV      r0,#0x1f0
000370  f7fffffe          BL       lc640_write_int
;;;374    	vz_cnt_h=hour;
000374  86e5              STRH     r5,[r4,#0x36]
;;;375    	__ee_vz_cnt=hour*60;
000376  ebc51005          RSB      r0,r5,r5,LSL #4
00037a  ea4f0180          LSL      r1,r0,#2
00037e  460d              MOV      r5,r1
000380  87a1              STRH     r1,[r4,#0x3c]
;;;376    	lc640_write_int(EE_VZ_CNT,__ee_vz_cnt);
000382  f44f70f9          MOV      r0,#0x1f2
000386  f7fffffe          BL       lc640_write_int
;;;377    	lc640_write_int(EE_SPC_VZ_LENGT,hour*60);	
00038a  4629              MOV      r1,r5
00038c  f44f70ff          MOV      r0,#0x1fe
000390  f7fffffe          BL       lc640_write_int
;;;378    	vz_cnt_h_=0;
000394  4630              MOV      r0,r6
000396  8720              STRH     r0,[r4,#0x38]
;;;379    	vz_cnt_s=0;
000398  8660              STRH     r0,[r4,#0x32]
;;;380    	out=1;
00039a  f04f0601          MOV      r6,#1
;;;381    	vz_mem_hndl(1);
00039e  f04f0001          MOV      r0,#1
0003a2  f7fffffe          BL       vz_mem_hndl
                  |L1.934|
;;;382    	}
;;;383    //else if((spc_stat==spc_KE1p1)||(spc_stat==spc_KE1p2)) out=22; 
;;;384    //else if((spc_stat==spc_KE2p1)||(spc_stat==spc_KE2p2)) out=33;
;;;385    //plazma=out;	
;;;386    return out;
0003a6  4630              MOV      r0,r6
;;;387    }
0003a8  bd70              POP      {r4-r6,pc}
;;;388    
                          ENDP

                  vz_stop PROC
;;;389    //-----------------------------------------------
;;;390    void vz_stop(void)
0003aa  b510              PUSH     {r4,lr}
;;;391    {
;;;392    if(spc_stat==spcVZ)
0003ac  4c14              LDR      r4,|L1.1024|
0003ae  7ce0              LDRB     r0,[r4,#0x13]  ; spc_stat
0003b0  2802              CMP      r0,#2
0003b2  d113              BNE      |L1.988|
;;;393         {
;;;394    vz_mem_hndl(vz_cnt_h);          
0003b4  f104041a          ADD      r4,r4,#0x1a
0003b8  8ee0              LDRH     r0,[r4,#0x36]  ; vz_cnt_h
0003ba  f7fffffe          BL       vz_mem_hndl
;;;395    vz_cnt_s=0;
0003be  f04f0000          MOV      r0,#0
0003c2  8660              STRH     r0,[r4,#0x32]
;;;396    vz_cnt_h=0;
0003c4  86e0              STRH     r0,[r4,#0x36]
;;;397    vz_cnt_h_=0;
0003c6  8720              STRH     r0,[r4,#0x38]
;;;398    spc_stat=spcOFF;
0003c8  f8040c07          STRB     r0,[r4,#-7]
;;;399    
;;;400    		__ee_spc_stat=spcOFF;
0003cc  87e0              STRH     r0,[r4,#0x3e]
;;;401    		lc640_write_int(EE_SPC_STAT,spcOFF);
0003ce  4601              MOV      r1,r0
0003d0  e8bd4010          POP      {r4,lr}
0003d4  f44f70f8          MOV      r0,#0x1f0
0003d8  f7ffbffe          B.W      lc640_write_int
                  |L1.988|
;;;402         }
;;;403    
;;;404    }
0003dc  bd10              POP      {r4,pc}
;;;405    
                          ENDP

                  avz_next_date_hndl PROC
;;;406    //-----------------------------------------------
;;;407    void avz_next_date_hndl(void)
0003de  b570              PUSH     {r4-r6,lr}
;;;408    {
;;;409    if((LPC_RTC->MONTH+AVZ)>12)lc640_write_int(EE_YEAR_AVZ,LPC_RTC->YEAR+1);
0003e0  4c0d              LDR      r4,|L1.1048|
0003e2  3c20              SUBS     r4,r4,#0x20
0003e4  f8940038          LDRB     r0,[r4,#0x38]
0003e8  4d0f              LDR      r5,|L1.1064|
0003ea  7829              LDRB     r1,[r5,#0]  ; AVZ
0003ec  4408              ADD      r0,r0,r1
0003ee  280c              CMP      r0,#0xc
0003f0  d91c              BLS      |L1.1068|
0003f2  8fa0              LDRH     r0,[r4,#0x3c]
0003f4  1c40              ADDS     r0,r0,#1
0003f6  b201              SXTH     r1,r0
0003f8  20b8              MOVS     r0,#0xb8
0003fa  f7fffffe          BL       lc640_write_int
0003fe  e01a              B        |L1.1078|
                  |L1.1024|
                          DCD      ||area_number.21||
                  |L1.1028|
                          DCD      BAT_IS_ON
                  |L1.1032|
                          DCD      bat
                  |L1.1036|
                          DCD      IKB
                  |L1.1040|
                          DCD      ADR_EE_BAT_ZAR_CNT_KE
                  |L1.1044|
                          DCD      bat_u_old_cnt
                  |L1.1048|
                          DCD      0x40024020
                  |L1.1052|
                          DCD      USIGN
                  |L1.1056|
                          DCD      ADR_EE_BAT_C_REAL
                  |L1.1060|
                          DCD      ADR_EE_BAT_ZAR_CNT
                  |L1.1064|
                          DCD      AVZ
                  |L1.1068|
;;;410    else lc640_write_int(EE_YEAR_AVZ,LPC_RTC->YEAR);
00042c  f9b4103c          LDRSH    r1,[r4,#0x3c]
000430  20b8              MOVS     r0,#0xb8
000432  f7fffffe          BL       lc640_write_int
                  |L1.1078|
;;;411    
;;;412    //lc640_write_int(EE_YEAR_AVZ,6);
;;;413    
;;;414    if((LPC_RTC->MONTH+AVZ)>12)lc640_write_int(EE_MONTH_AVZ,(LPC_RTC->MONTH+AVZ)-12);
000436  f8941038          LDRB     r1,[r4,#0x38]
00043a  7828              LDRB     r0,[r5,#0]  ; AVZ
00043c  4401              ADD      r1,r1,r0
00043e  290c              CMP      r1,#0xc
000440  d907              BLS      |L1.1106|
000442  f8941038          LDRB     r1,[r4,#0x38]
000446  380c              SUBS     r0,r0,#0xc
000448  4401              ADD      r1,r1,r0
00044a  20b6              MOVS     r0,#0xb6
00044c  f7fffffe          BL       lc640_write_int
000450  e005              B        |L1.1118|
                  |L1.1106|
;;;415    else lc640_write_int(EE_MONTH_AVZ,LPC_RTC->MONTH+AVZ);                                                 
000452  f8941038          LDRB     r1,[r4,#0x38]
000456  4401              ADD      r1,r1,r0
000458  20b6              MOVS     r0,#0xb6
00045a  f7fffffe          BL       lc640_write_int
                  |L1.1118|
;;;416    
;;;417    //lc640_write_int(EE_MONTH_AVZ,5);
;;;418    
;;;419    if(LPC_RTC->DOM>28) lc640_write_int(EE_DATE_AVZ,28);
00045e  f894002c          LDRB     r0,[r4,#0x2c]
000462  281c              CMP      r0,#0x1c
000464  d904              BLS      |L1.1136|
000466  211c              MOVS     r1,#0x1c
000468  20b4              MOVS     r0,#0xb4
00046a  f7fffffe          BL       lc640_write_int
00046e  e004              B        |L1.1146|
                  |L1.1136|
;;;420    else lc640_write_int(EE_DATE_AVZ,LPC_RTC->DOM);
000470  f894102c          LDRB     r1,[r4,#0x2c]
000474  20b4              MOVS     r0,#0xb4
000476  f7fffffe          BL       lc640_write_int
                  |L1.1146|
;;;421    
;;;422    //lc640_write_int(EE_DATE_AVZ,4);
;;;423    
;;;424    lc640_write_int(EE_HOUR_AVZ,LPC_RTC->HOUR);
00047a  f1040420          ADD      r4,r4,#0x20
00047e  7a21              LDRB     r1,[r4,#8]
000480  f04f00ae          MOV      r0,#0xae
000484  f7fffffe          BL       lc640_write_int
;;;425    lc640_write_int(EE_MIN_AVZ,LPC_RTC->MIN);
000488  7921              LDRB     r1,[r4,#4]
00048a  20b0              MOVS     r0,#0xb0
00048c  f7fffffe          BL       lc640_write_int
;;;426    lc640_write_int(EE_SEC_AVZ,LPC_RTC->SEC);
000490  7821              LDRB     r1,[r4,#0]
000492  e8bd4070          POP      {r4-r6,lr}
000496  20b2              MOVS     r0,#0xb2
000498  f7ffbffe          B.W      lc640_write_int
;;;427    
;;;428    }
;;;429    
                          ENDP

                  avz_drv PROC
;;;430    //-----------------------------------------------
;;;431    void avz_drv(void)                               
00049c  b510              PUSH     {r4,lr}
;;;432    {                
;;;433    if(AVZ!=AVZ_OFF)
00049e  48ff              LDR      r0,|L1.2204|
;;;434    	{
;;;435    	if((LPC_RTC->YEAR==YEAR_AVZ)&&(LPC_RTC->MONTH==MONTH_AVZ)&&(LPC_RTC->DOM==DATE_AVZ)&&(LPC_RTC->HOUR==HOUR_AVZ)&&(LPC_RTC->MIN==MIN_AVZ)&&(LPC_RTC->SEC==SEC_AVZ))
;;;436    		{
;;;437    		bAVZ=1;
0004a0  4cff              LDR      r4,|L1.2208|
0004a2  7800              LDRB     r0,[r0,#0]            ;433  ; AVZ
0004a4  b330              CBZ      r0,|L1.1268|
0004a6  48ff              LDR      r0,|L1.2212|
0004a8  8f82              LDRH     r2,[r0,#0x3c]         ;435
0004aa  49ff              LDR      r1,|L1.2216|
0004ac  8809              LDRH     r1,[r1,#0]            ;435  ; YEAR_AVZ
0004ae  428a              CMP      r2,r1                 ;435
0004b0  d120              BNE      |L1.1268|
0004b2  f8902038          LDRB     r2,[r0,#0x38]         ;435
0004b6  49fd              LDR      r1,|L1.2220|
0004b8  8809              LDRH     r1,[r1,#0]            ;435  ; MONTH_AVZ
0004ba  428a              CMP      r2,r1                 ;435
0004bc  d11a              BNE      |L1.1268|
0004be  f890102c          LDRB     r1,[r0,#0x2c]         ;435
0004c2  4afb              LDR      r2,|L1.2224|
0004c4  8812              LDRH     r2,[r2,#0]            ;435  ; DATE_AVZ
0004c6  4291              CMP      r1,r2                 ;435
0004c8  d114              BNE      |L1.1268|
0004ca  f8901028          LDRB     r1,[r0,#0x28]         ;435
0004ce  4af9              LDR      r2,|L1.2228|
0004d0  8812              LDRH     r2,[r2,#0]            ;435  ; HOUR_AVZ
0004d2  4291              CMP      r1,r2                 ;435
0004d4  d10e              BNE      |L1.1268|
0004d6  f8901024          LDRB     r1,[r0,#0x24]         ;435
0004da  4af7              LDR      r2,|L1.2232|
0004dc  8812              LDRH     r2,[r2,#0]            ;435  ; MIN_AVZ
0004de  4291              CMP      r1,r2                 ;435
0004e0  d108              BNE      |L1.1268|
0004e2  f8900020          LDRB     r0,[r0,#0x20]         ;435
0004e6  49f5              LDR      r1,|L1.2236|
0004e8  8809              LDRH     r1,[r1,#0]            ;435  ; SEC_AVZ
0004ea  4288              CMP      r0,r1                 ;435
0004ec  d102              BNE      |L1.1268|
0004ee  f04f0001          MOV      r0,#1
0004f2  75a0              STRB     r0,[r4,#0x16]
                  |L1.1268|
;;;438    		}
;;;439    	}
;;;440    if(bAVZ)
0004f4  7da0              LDRB     r0,[r4,#0x16]  ; bAVZ
0004f6  2800              CMP      r0,#0
0004f8  d00c              BEQ      |L1.1300|
;;;441    	{
;;;442    	if(vz_start(AVZ_TIME))
0004fa  48f1              LDR      r0,|L1.2240|
0004fc  8800              LDRH     r0,[r0,#0]  ; AVZ_TIME
0004fe  b2c0              UXTB     r0,r0
000500  f7fffffe          BL       vz_start
000504  2800              CMP      r0,#0
000506  d005              BEQ      |L1.1300|
;;;443    		{
;;;444    		bAVZ=0;
000508  f04f0000          MOV      r0,#0
00050c  75a0              STRB     r0,[r4,#0x16]
;;;445    		avz_next_date_hndl();
00050e  e8bd4010          POP      {r4,lr}
000512  e7fe              B        avz_next_date_hndl
                  |L1.1300|
;;;446    		}
;;;447    	}	
;;;448    
;;;449    }
000514  bd10              POP      {r4,pc}
;;;450    
                          ENDP

                  vz_drv PROC
;;;451    //-----------------------------------------------
;;;452    void vz_drv(void)
000516  b570              PUSH     {r4-r6,lr}
;;;453    { 
;;;454    if(spc_stat==spcVZ)
000518  4ce1              LDR      r4,|L1.2208|
00051a  7ce0              LDRB     r0,[r4,#0x13]  ; spc_stat
00051c  2802              CMP      r0,#2
00051e  d144              BNE      |L1.1450|
;;;455    	{
;;;456    	if(vz_cnt_s_<3600)
000520  f8b4004e          LDRH     r0,[r4,#0x4e]  ; vz_cnt_s_
000524  f44f6161          MOV      r1,#0xe10
;;;457    		{
;;;458    		vz_cnt_s_++;
;;;459    		if(vz_cnt_s_>=3600)
;;;460    			{
;;;461    			vz_cnt_s_=0;
000528  2500              MOVS     r5,#0
00052a  4288              CMP      r0,r1                 ;456
00052c  d215              BCS      |L1.1370|
00052e  f1000001          ADD      r0,r0,#1              ;458
000532  b280              UXTH     r0,r0                 ;458
000534  f8a4004e          STRH     r0,[r4,#0x4e]         ;458
000538  4288              CMP      r0,r1                 ;459
00053a  d30e              BCC      |L1.1370|
00053c  f8a4504e          STRH     r5,[r4,#0x4e]
;;;462    			if(vz_cnt_h)
000540  f8b40050          LDRH     r0,[r4,#0x50]  ; vz_cnt_h
000544  b148              CBZ      r0,|L1.1370|
;;;463    				{
;;;464    				vz_cnt_h--;
000546  f1a00001          SUB      r0,r0,#1
00054a  f8240f50          STRH     r0,[r4,#0x50]!
;;;465    				vz_cnt_h_++;
00054e  8860              LDRH     r0,[r4,#2]  ; vz_cnt_h_
000550  f1000001          ADD      r0,r0,#1
000554  8060              STRH     r0,[r4,#2]
000556  f1a40450          SUB      r4,r4,#0x50
                  |L1.1370|
;;;466    				}
;;;467    			}
;;;468    		}
;;;469    
;;;470    
;;;471    	if(vz_cnt_s<60)
00055a  f8b4004c          LDRH     r0,[r4,#0x4c]  ; vz_cnt_s
00055e  283c              CMP      r0,#0x3c
000560  d223              BCS      |L1.1450|
;;;472    		{
;;;473    		vz_cnt_s++;
000562  f1000001          ADD      r0,r0,#1
000566  b280              UXTH     r0,r0
000568  f8a4004c          STRH     r0,[r4,#0x4c]
;;;474    		if(vz_cnt_s>=60)
00056c  283c              CMP      r0,#0x3c
00056e  d31c              BCC      |L1.1450|
;;;475    			{
;;;476    			vz_cnt_s=0;
000570  f8245f4c          STRH     r5,[r4,#0x4c]!
;;;477    			
;;;478    			__ee_vz_cnt--;
000574  8960              LDRH     r0,[r4,#0xa]  ; __ee_vz_cnt
000576  f1a00001          SUB      r0,r0,#1
00057a  b201              SXTH     r1,r0
00057c  8161              STRH     r1,[r4,#0xa]
;;;479    			lc640_write_int(EE_VZ_CNT,__ee_vz_cnt);
00057e  f44f70f9          MOV      r0,#0x1f2
000582  f7fffffe          BL       lc640_write_int
;;;480    			if(!__ee_vz_cnt)
000586  8960              LDRH     r0,[r4,#0xa]  ; __ee_vz_cnt
000588  f1a4044c          SUB      r4,r4,#0x4c
00058c  2800              CMP      r0,#0
00058e  d10c              BNE      |L1.1450|
;;;481    				{
;;;482    				spc_stat=spcOFF;
000590  74e5              STRB     r5,[r4,#0x13]
;;;483    						__ee_spc_stat=spcOFF;
000592  f8a45058          STRH     r5,[r4,#0x58]
;;;484    		lc640_write_int(EE_SPC_STAT,spcOFF);
000596  4601              MOV      r1,r0
000598  f44f70f8          MOV      r0,#0x1f0
00059c  f7fffffe          BL       lc640_write_int
;;;485    				vz_mem_hndl(0);
0005a0  e8bd4070          POP      {r4-r6,lr}
0005a4  2000              MOVS     r0,#0
0005a6  f7ffbffe          B.W      vz_mem_hndl
                  |L1.1450|
;;;486    				}
;;;487    			}
;;;488    		}
;;;489    
;;;490    	}
;;;491    
;;;492    
;;;493    } 
0005aa  bd70              POP      {r4-r6,pc}
;;;494    
                          ENDP

                  kb_init PROC
;;;498    //-----------------------------------------------
;;;499    void kb_init(void)
0005ac  48c5              LDR      r0,|L1.2244|
;;;500    {
;;;501    main_kb_cnt=(TBAT*60)-60/*120*/;
0005ae  f06f013b          MVN      r1,#0x3b
0005b2  8800              LDRH     r0,[r0,#0]  ; TBAT
0005b4  ebc01000          RSB      r0,r0,r0,LSL #4
0005b8  eb010080          ADD      r0,r1,r0,LSL #2
0005bc  49b8              LDR      r1,|L1.2208|
0005be  8788              STRH     r0,[r1,#0x3c]
;;;502    }
0005c0  4770              BX       lr
;;;503    
                          ENDP

                  kb_hndl PROC
;;;504    //-----------------------------------------------
;;;505    void kb_hndl(void)
0005c2  e92d5ff0          PUSH     {r4-r12,lr}
;;;506    {
;;;507    
;;;508    static signed short ibat[2],ibat_[2];
;;;509    #ifdef UKU_TELECORE2015
;;;510    if(((++main_kb_cnt>=TBAT*60)&&(TBAT))&&(BAT_TYPE==0))
;;;511    #else 
;;;512    if(((++main_kb_cnt>=TBAT*60)&&(TBAT)))
0005c6  f8df82d8          LDR      r8,|L1.2208|
;;;513    #endif
;;;514    	{
;;;515    	main_kb_cnt=0;
;;;516    	
;;;517    	kb_start[0]=0;
;;;518    	kb_start[1]=0;
;;;519    	kb_start_ips=0;
;;;520    
;;;521    	if( (BAT_IS_ON[0]==bisON) && (bat[0]._Ub>80) && ( (abs(bat[0]._Ib)<IKB) || (bat[0]._av&1) ) ) kb_start[0]=1;
;;;522    	if( (BAT_IS_ON[1]==bisON) && (bat[1]._Ub>80) && ( (abs(bat[1]._Ib)<IKB) || (bat[1]._av&1) ) ) kb_start[1]=1;
;;;523    #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;524    	if( (!ips_bat_av_vzvod)                      && ((abs(Ib_ips_termokompensat)<IKB) || (bat_ips._av&1) ) ) kb_start_ips=1;
0005ca  f8dfa2fc          LDR      r10,|L1.2248|
0005ce  2500              MOVS     r5,#0                 ;512
0005d0  f8b8003c          LDRH     r0,[r8,#0x3c]         ;512  ; main_kb_cnt
0005d4  4ebd              LDR      r6,|L1.2252|
0005d6  1c40              ADDS     r0,r0,#1              ;512
0005d8  b201              SXTH     r1,r0                 ;512
0005da  48ba              LDR      r0,|L1.2244|
0005dc  f8a8103c          STRH     r1,[r8,#0x3c]         ;512
0005e0  f8df92ec          LDR      r9,|L1.2256|
0005e4  f9b00000          LDRSH    r0,[r0,#0]            ;512  ; TBAT
;;;525    #endif	
;;;526    	if( (net_av) || (num_of_wrks_bps==0) || ( (spc_stat!=spcOFF) && (spc_stat!=spcVZ) ) ) 
;;;527    		{
;;;528    		kb_start[0]=0;
;;;529    		kb_start[1]=0;
;;;530    		kb_start_ips=0;
;;;531    		}
;;;532    
;;;533    	if((kb_start[0]==1)||(kb_start[1]==1)||(kb_start_ips==1))
;;;534    		{
;;;535    		kb_cnt_1lev=10;
0005e8  270a              MOVS     r7,#0xa
0005ea  ebc01200          RSB      r2,r0,r0,LSL #4       ;512
0005ee  f04f0b01          MOV      r11,#1                ;521
0005f2  f1080442          ADD      r4,r8,#0x42           ;517
0005f6  ebb10f82          CMP      r1,r2,LSL #2          ;512
0005fa  db61              BLT      |L1.1728|
0005fc  b3f0              CBZ      r0,|L1.1660|
0005fe  f8a8503c          STRH     r5,[r8,#0x3c]         ;515
000602  7025              STRB     r5,[r4,#0]            ;517
000604  7065              STRB     r5,[r4,#1]            ;518
000606  f888500d          STRB     r5,[r8,#0xd]          ;519
00060a  48b2              LDR      r0,|L1.2260|
00060c  7800              LDRB     r0,[r0,#0]            ;521  ; BAT_IS_ON
00060e  2855              CMP      r0,#0x55              ;521
000610  d111              BNE      |L1.1590|
000612  f9b60002          LDRSH    r0,[r6,#2]            ;521  ; bat
000616  2850              CMP      r0,#0x50              ;521
000618  dd0d              BLE      |L1.1590|
00061a  f9b60008          LDRSH    r0,[r6,#8]            ;521  ; bat
00061e  f7fffffe          BL       abs
000622  f9b91000          LDRSH    r1,[r9,#0]            ;521  ; IKB
000626  4288              CMP      r0,r1                 ;521
000628  db03              BLT      |L1.1586|
00062a  f896003d          LDRB     r0,[r6,#0x3d]         ;521  ; bat
00062e  07c0              LSLS     r0,r0,#31             ;521
000630  d001              BEQ      |L1.1590|
                  |L1.1586|
000632  f884b000          STRB     r11,[r4,#0]           ;521
                  |L1.1590|
000636  48a7              LDR      r0,|L1.2260|
000638  7840              LDRB     r0,[r0,#1]            ;522  ; BAT_IS_ON
00063a  2855              CMP      r0,#0x55              ;522
00063c  d111              BNE      |L1.1634|
00063e  f9b6004e          LDRSH    r0,[r6,#0x4e]         ;522  ; bat
000642  2850              CMP      r0,#0x50              ;522
000644  dd0d              BLE      |L1.1634|
000646  f9b60054          LDRSH    r0,[r6,#0x54]         ;522  ; bat
00064a  f7fffffe          BL       abs
00064e  f9b91000          LDRSH    r1,[r9,#0]            ;522  ; IKB
000652  4288              CMP      r0,r1                 ;522
000654  db03              BLT      |L1.1630|
000656  f8960089          LDRB     r0,[r6,#0x89]         ;522  ; bat
00065a  07c0              LSLS     r0,r0,#31             ;522
00065c  d001              BEQ      |L1.1634|
                  |L1.1630|
00065e  f884b001          STRB     r11,[r4,#1]           ;522
                  |L1.1634|
000662  489d              LDR      r0,|L1.2264|
000664  7800              LDRB     r0,[r0,#0]            ;524  ; ips_bat_av_vzvod
000666  b980              CBNZ     r0,|L1.1674|
000668  f9ba0000          LDRSH    r0,[r10,#0]           ;524  ; Ib_ips_termokompensat
00066c  f7fffffe          BL       abs
000670  f9b91000          LDRSH    r1,[r9,#0]            ;524  ; IKB
000674  4288              CMP      r0,r1                 ;524
000676  db06              BLT      |L1.1670|
000678  4898              LDR      r0,|L1.2268|
00067a  e000              B        |L1.1662|
                  |L1.1660|
00067c  e020              B        |L1.1728|
                  |L1.1662|
00067e  f890003d          LDRB     r0,[r0,#0x3d]         ;524  ; bat_ips
000682  07c0              LSLS     r0,r0,#31             ;524
000684  d001              BEQ      |L1.1674|
                  |L1.1670|
000686  f888b00d          STRB     r11,[r8,#0xd]         ;524
                  |L1.1674|
00068a  4895              LDR      r0,|L1.2272|
00068c  7800              LDRB     r0,[r0,#0]            ;526  ; net_av
00068e  b938              CBNZ     r0,|L1.1696|
000690  f898000e          LDRB     r0,[r8,#0xe]          ;526  ; num_of_wrks_bps
000694  b120              CBZ      r0,|L1.1696|
000696  f8980013          LDRB     r0,[r8,#0x13]         ;526  ; spc_stat
00069a  b128              CBZ      r0,|L1.1704|
00069c  2802              CMP      r0,#2                 ;526
00069e  d003              BEQ      |L1.1704|
                  |L1.1696|
0006a0  7025              STRB     r5,[r4,#0]            ;528
0006a2  7065              STRB     r5,[r4,#1]            ;529
0006a4  f888500d          STRB     r5,[r8,#0xd]          ;530
                  |L1.1704|
0006a8  7820              LDRB     r0,[r4,#0]            ;533  ; kb_start
0006aa  2801              CMP      r0,#1                 ;533
0006ac  d01f              BEQ      |L1.1774|
0006ae  7860              LDRB     r0,[r4,#1]            ;533  ; kb_start
0006b0  2801              CMP      r0,#1                 ;533
0006b2  d01c              BEQ      |L1.1774|
0006b4  f898000d          LDRB     r0,[r8,#0xd]          ;533  ; kb_start_ips
0006b8  2801              CMP      r0,#1                 ;533
0006ba  d018              BEQ      |L1.1774|
;;;536    		}
;;;537    	else kb_cnt_1lev=0;
0006bc  f8a8503e          STRH     r5,[r8,#0x3e]
                  |L1.1728|
;;;538    	}
;;;539    
;;;540    if(kb_cnt_1lev)
0006c0  4641              MOV      r1,r8
0006c2  f9b8003e          LDRSH    r0,[r8,#0x3e]  ; kb_cnt_1lev
;;;541    	{
;;;542    	kb_cnt_1lev--;
;;;543    
;;;544    	if(kb_cnt_1lev>5)mess_send(MESS2CNTRL_HNDL,PARAM_CNTRL_STAT_PLUS,30,15);
;;;545    	else if(kb_cnt_1lev>0) mess_send(MESS2CNTRL_HNDL,PARAM_CNTRL_STAT_MINUS,30,15);
;;;546    
;;;547    
;;;548    	if(kb_cnt_1lev==5)
;;;549    		{
;;;550    		ibat[0]=abs(bat[0]._Ib);
0006c6  f8df81d8          LDR      r8,|L1.2208|
0006ca  2800              CMP      r0,#0                 ;540
0006cc  f1080864          ADD      r8,r8,#0x64
0006d0  d07e              BEQ      |L1.2000|
0006d2  f1a00001          SUB      r0,r0,#1              ;542
0006d6  b200              SXTH     r0,r0                 ;542
0006d8  468b              MOV      r11,r1                ;542
0006da  87c8              STRH     r0,[r1,#0x3e]         ;542
0006dc  2805              CMP      r0,#5                 ;544
0006de  dd09              BLE      |L1.1780|
0006e0  230f              MOVS     r3,#0xf               ;544
0006e2  221e              MOVS     r2,#0x1e              ;544
0006e4  2164              MOVS     r1,#0x64              ;544
0006e6  20e1              MOVS     r0,#0xe1              ;544
0006e8  f7fffffe          BL       mess_send
0006ec  e00a              B        |L1.1796|
                  |L1.1774|
0006ee  f8a8703e          STRH     r7,[r8,#0x3e]         ;535
0006f2  e7e5              B        |L1.1728|
                  |L1.1780|
0006f4  2800              CMP      r0,#0                 ;545
0006f6  dd05              BLE      |L1.1796|
0006f8  230f              MOVS     r3,#0xf               ;545
0006fa  221e              MOVS     r2,#0x1e              ;545
0006fc  2169              MOVS     r1,#0x69              ;545
0006fe  20e1              MOVS     r0,#0xe1              ;545
000700  f7fffffe          BL       mess_send
                  |L1.1796|
000704  f8bb003e          LDRH     r0,[r11,#0x3e]        ;548  ; kb_cnt_1lev
000708  2805              CMP      r0,#5                 ;548
00070a  d111              BNE      |L1.1840|
00070c  f9b60008          LDRSH    r0,[r6,#8]  ; bat
000710  f7fffffe          BL       abs
000714  f8a80000          STRH     r0,[r8,#0]
;;;551    		ibat[1]=abs(bat[1]._Ib);
000718  f9b60054          LDRSH    r0,[r6,#0x54]  ; bat
00071c  f7fffffe          BL       abs
000720  f8a80002          STRH     r0,[r8,#2]
;;;552    		ibat_ips=abs(Ib_ips_termokompensat);
000724  f9ba0000          LDRSH    r0,[r10,#0]  ; Ib_ips_termokompensat
000728  f7fffffe          BL       abs
00072c  f8ab0044          STRH     r0,[r11,#0x44]
                  |L1.1840|
;;;553    		}
;;;554    	
;;;555    	if(kb_cnt_1lev==0)
000730  485b              LDR      r0,|L1.2208|
000732  8fc0              LDRH     r0,[r0,#0x3e]  ; kb_cnt_1lev
000734  2800              CMP      r0,#0
000736  d158              BNE      |L1.2026|
;;;556    		{
;;;557    		ibat_[0]=abs(bat[0]._Ib);
000738  f9b60008          LDRSH    r0,[r6,#8]  ; bat
00073c  f7fffffe          BL       abs
000740  f8dfb15c          LDR      r11,|L1.2208|
000744  f10b0b68          ADD      r11,r11,#0x68
000748  f8ab0000          STRH     r0,[r11,#0]
;;;558    		ibat_[1]=abs(bat[1]._Ib);
00074c  f9b60054          LDRSH    r0,[r6,#0x54]  ; bat
000750  f7fffffe          BL       abs
000754  f8ab0002          STRH     r0,[r11,#2]
;;;559    		ibat_ips_=abs(Ib_ips_termokompensat);
000758  f9ba0000          LDRSH    r0,[r10,#0]  ; Ib_ips_termokompensat
00075c  f7fffffe          BL       abs
000760  f8dfa13c          LDR      r10,|L1.2208|
000764  f8aa0046          STRH     r0,[r10,#0x46]
;;;560    
;;;561    		kb_cnt_2lev=0;
000768  f8aa5040          STRH     r5,[r10,#0x40]
;;;562    
;;;563    
;;;564    		if(( (ibat[0]+ibat_[0]) < IKB )&& (kb_start[0]==1))
00076c  f9b80000          LDRSH    r0,[r8,#0]  ; ibat
000770  f9bb1000          LDRSH    r1,[r11,#0]  ; ibat_
000774  4408              ADD      r0,r0,r1
000776  f9b91000          LDRSH    r1,[r9,#0]  ; IKB
00077a  4288              CMP      r0,r1
00077c  da02              BGE      |L1.1924|
00077e  7820              LDRB     r0,[r4,#0]  ; kb_start
000780  2801              CMP      r0,#1
000782  d034              BEQ      |L1.2030|
                  |L1.1924|
;;;565    			{
;;;566    			kb_cnt_2lev=10;  
;;;567    			}
;;;568    		else if(bat[0]._Ub>200)
000784  f9b60002          LDRSH    r0,[r6,#2]  ; bat
000788  28c8              CMP      r0,#0xc8
00078a  dd04              BLE      |L1.1942|
;;;569    			{
;;;570    			kb_start[0]=0;
00078c  7025              STRB     r5,[r4,#0]
;;;571    			avar_bat_hndl(0,0);
00078e  2100              MOVS     r1,#0
000790  4608              MOV      r0,r1
000792  f7fffffe          BL       avar_bat_hndl
                  |L1.1942|
;;;572    			}
;;;573    		
;;;574    		if(( (ibat[1]+ibat_[1]) < IKB ) && (kb_start[1]==1))
000796  f9b80002          LDRSH    r0,[r8,#2]  ; ibat
00079a  f9bb1002          LDRSH    r1,[r11,#2]  ; ibat_
00079e  4408              ADD      r0,r0,r1
0007a0  f9b91000          LDRSH    r1,[r9,#0]  ; IKB
0007a4  4288              CMP      r0,r1
0007a6  da02              BGE      |L1.1966|
0007a8  7860              LDRB     r0,[r4,#1]  ; kb_start
0007aa  2801              CMP      r0,#1
0007ac  d022              BEQ      |L1.2036|
                  |L1.1966|
;;;575    			{
;;;576    			kb_cnt_2lev=10;     
;;;577    			}
;;;578    		else  if(bat[1]._Ub>200)
0007ae  f9b6004e          LDRSH    r0,[r6,#0x4e]  ; bat
0007b2  28c8              CMP      r0,#0xc8
0007b4  dd04              BLE      |L1.1984|
;;;579    			{
;;;580    			kb_start[1]=0;
0007b6  7065              STRB     r5,[r4,#1]
;;;581    			avar_bat_hndl(1,0);
0007b8  2100              MOVS     r1,#0
0007ba  2001              MOVS     r0,#1
0007bc  f7fffffe          BL       avar_bat_hndl
                  |L1.1984|
;;;582    			}
;;;583    #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;584    		if(( (ibat_ips+ibat_ips_) < IKB ) && (kb_start_ips==1))
0007c0  f9ba0044          LDRSH    r0,[r10,#0x44]  ; ibat_ips
0007c4  f9ba1046          LDRSH    r1,[r10,#0x46]  ; ibat_ips_
0007c8  4408              ADD      r0,r0,r1
0007ca  f9b91000          LDRSH    r1,[r9,#0]  ; IKB
0007ce  e000              B        |L1.2002|
                  |L1.2000|
0007d0  e019              B        |L1.2054|
                  |L1.2002|
0007d2  4288              CMP      r0,r1
0007d4  da09              BGE      |L1.2026|
0007d6  f89a000d          LDRB     r0,[r10,#0xd]  ; kb_start_ips
0007da  2801              CMP      r0,#1
0007dc  d105              BNE      |L1.2026|
;;;585    			{
;;;586    			if(KB_ALGORITM==1)
0007de  4841              LDR      r0,|L1.2276|
0007e0  8800              LDRH     r0,[r0,#0]  ; KB_ALGORITM
0007e2  2801              CMP      r0,#1
0007e4  d009              BEQ      |L1.2042|
;;;587    				{
;;;588    				avar_bat_ips_hndl(1);
;;;589    				kb_start_ips=0;
;;;590    				}
;;;591    			else
;;;592    				{
;;;593    				kb_cnt_2lev=10;     
0007e6  f8aa7040          STRH     r7,[r10,#0x40]
                  |L1.2026|
;;;594    				}
;;;595    			}
;;;596    #endif
;;;597    		}	
;;;598    
;;;599    
;;;600    	}
;;;601    else if(kb_cnt_2lev)
;;;602    	{
;;;603    	kb_cnt_2lev--;
;;;604    
;;;605    	if(kb_cnt_2lev>5)mess_send(MESS2CNTRL_HNDL,PARAM_CNTRL_STAT_PLUS,200,15);
;;;606    	else if(kb_cnt_2lev>0) mess_send(MESS2CNTRL_HNDL,PARAM_CNTRL_STAT_MINUS,200,15);
;;;607    
;;;608    
;;;609    	if(kb_cnt_2lev==5)
;;;610    		{
;;;611    		ibat[0]=abs(bat[0]._Ib);
;;;612    		ibat[1]=abs(bat[1]._Ib);
;;;613    		ibat_ips=abs(Ib_ips_termokompensat);
;;;614    		}
;;;615    	
;;;616    	if(kb_cnt_2lev==0)
;;;617    		{
;;;618    		ibat_[0]=abs(bat[0]._Ib);
;;;619    		ibat_[1]=abs(bat[1]._Ib);
;;;620    		ibat_ips_=abs(Ib_ips_termokompensat);
;;;621    
;;;622    		kb_full_ver=0;
;;;623    
;;;624    		if(( (ibat[0]+ibat_[0]) < IKB ) && (kb_start[0]==1))
;;;625    			{
;;;626    			kb_full_ver=1;  
;;;627    			}
;;;628    		else if(bat[0]._Ub>200)			
;;;629    			{
;;;630    			kb_start[0]=0;
;;;631    			avar_bat_hndl(0,0);
;;;632    			}
;;;633    
;;;634    		if(( (ibat[1]+ibat_[1]) < IKB ) && (kb_start[1]==1))
;;;635    			{
;;;636    			kb_full_ver=1;     
;;;637    			}
;;;638    		else	if(bat[1]._Ub>200)		
;;;639    			{
;;;640    			kb_start[1]=0;
;;;641    			avar_bat_hndl(1,0);
;;;642    			}
;;;643    #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;644    		if(( (ibat_ips+ibat_ips_) < IKB )  && (kb_start_ips==1))
;;;645    			{
;;;646    			if(KB_ALGORITM==2)
;;;647    				{
;;;648    				avar_bat_ips_hndl(1);
;;;649    				kb_start_ips=0;
;;;650    				}
;;;651    			else
;;;652    				{
;;;653    				kb_full_ver=1;     
;;;654    				}
;;;655    			}
;;;656    #endif
;;;657    		}	
;;;658    	}
;;;659    
;;;660    else if(kb_full_ver)
;;;661    	{
;;;662    	
;;;663    	mess_send(MESS2CNTRL_HNDL,PARAM_CNTRL_STAT_STEP_DOWN,0,15);
;;;664    
;;;665    	if( abs(bat[0]._Ib) > IKB ) 
;;;666    		{
;;;667    		if(kb_start[0]==1)
;;;668    			{
;;;669    			kb_start[0]=0;
;;;670    			avar_bat_hndl(0,0);
;;;671    			}
;;;672    		}
;;;673    
;;;674    	if( abs(bat[1]._Ib) > IKB ) 
;;;675    		{
;;;676    		if(kb_start[1]==1)
;;;677    			{
;;;678    			kb_start[1]=0;
;;;679    			avar_bat_hndl(1,0);
;;;680    			}
;;;681    		}
;;;682    #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;683    	if( abs(Ib_ips_termokompensat) > IKB ) 
;;;684    		{
;;;685    		if(kb_start_ips==1)
;;;686    			{
;;;687    			kb_start_ips=0;
;;;688    			avar_bat_ips_hndl(0);
;;;689    			}
;;;690    		}
;;;691    #endif
;;;692    
;;;693    	if ((kb_start[0]==0) && (kb_start[1]==0) && (kb_start_ips==0)) 
;;;694    		{
;;;695    		kb_full_ver=0;
;;;696    		}
;;;697    
;;;698    	if(( (mess_find(MESS2KB_HNDL))	&& (mess_data[0]==PARAM_CNTRL_IS_DOWN) ) || (load_U<(USIGN*10)) )
;;;699    		{
;;;700    		kb_full_ver=0;
;;;701    		if((kb_start[0]==1)&&((load_I>(2*IKB)/10))&&(!(bat[0]._av&0x01))) avar_bat_hndl(0,1);
;;;702    		if((kb_start[1]==1)&&((load_I>(2*IKB)/10))&&(!(bat[1]._av&0x01))) avar_bat_hndl(1,1);
;;;703    #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;704    		if((kb_start_ips==1)&&((load_I>(2*IKB)/10))&&(!(bat_ips._av&0x01))) avar_bat_ips_hndl(1);
;;;705    #endif
;;;706    		}
;;;707    	}
;;;708    
;;;709    }
0007ea  e8bd9ff0          POP      {r4-r12,pc}
                  |L1.2030|
0007ee  f8aa7040          STRH     r7,[r10,#0x40]        ;566
0007f2  e7d0              B        |L1.1942|
                  |L1.2036|
0007f4  f8aa7040          STRH     r7,[r10,#0x40]        ;576
0007f8  e7e2              B        |L1.1984|
                  |L1.2042|
0007fa  2001              MOVS     r0,#1                 ;588
0007fc  f7fffffe          BL       avar_bat_ips_hndl
000800  f88a500d          STRB     r5,[r10,#0xd]         ;589
                  |L1.2052|
000804  e7f1              B        |L1.2026|
                  |L1.2054|
000806  f9b10040          LDRSH    r0,[r1,#0x40]         ;601  ; kb_cnt_2lev
00080a  b3f0              CBZ      r0,|L1.2186|
00080c  f1a00001          SUB      r0,r0,#1              ;603
000810  b200              SXTH     r0,r0                 ;603
000812  460f              MOV      r7,r1                 ;603
000814  f8a10040          STRH     r0,[r1,#0x40]         ;603
000818  2805              CMP      r0,#5                 ;605
00081a  dd06              BLE      |L1.2090|
00081c  230f              MOVS     r3,#0xf               ;605
00081e  22c8              MOVS     r2,#0xc8              ;605
000820  2164              MOVS     r1,#0x64              ;605
000822  20e1              MOVS     r0,#0xe1              ;605
000824  f7fffffe          BL       mess_send
000828  e007              B        |L1.2106|
                  |L1.2090|
00082a  2800              CMP      r0,#0                 ;606
00082c  dd05              BLE      |L1.2106|
00082e  230f              MOVS     r3,#0xf               ;606
000830  22c8              MOVS     r2,#0xc8              ;606
000832  2169              MOVS     r1,#0x69              ;606
000834  20e1              MOVS     r0,#0xe1              ;606
000836  f7fffffe          BL       mess_send
                  |L1.2106|
00083a  f8b70040          LDRH     r0,[r7,#0x40]         ;609  ; kb_cnt_2lev
00083e  2805              CMP      r0,#5                 ;609
000840  d111              BNE      |L1.2150|
000842  f9b60008          LDRSH    r0,[r6,#8]            ;611  ; bat
000846  f7fffffe          BL       abs
00084a  f8a80000          STRH     r0,[r8,#0]            ;611
00084e  f9b60054          LDRSH    r0,[r6,#0x54]         ;612  ; bat
000852  f7fffffe          BL       abs
000856  f8a80002          STRH     r0,[r8,#2]            ;612
00085a  f9ba0000          LDRSH    r0,[r10,#0]           ;613  ; Ib_ips_termokompensat
00085e  f7fffffe          BL       abs
000862  f8a70044          STRH     r0,[r7,#0x44]         ;613
                  |L1.2150|
000866  480e              LDR      r0,|L1.2208|
000868  f8b00040          LDRH     r0,[r0,#0x40]         ;616  ; kb_cnt_2lev
00086c  2800              CMP      r0,#0                 ;616
                  |L1.2158|
00086e  d1bc              BNE      |L1.2026|
000870  f9b60008          LDRSH    r0,[r6,#8]            ;618  ; bat
000874  f7fffffe          BL       abs
000878  4f09              LDR      r7,|L1.2208|
00087a  3768              ADDS     r7,r7,#0x68           ;618
00087c  8038              STRH     r0,[r7,#0]            ;618
00087e  f9b60054          LDRSH    r0,[r6,#0x54]         ;619  ; bat
000882  f7fffffe          BL       abs
000886  8078              STRH     r0,[r7,#2]            ;619
000888  e000              B        |L1.2188|
                  |L1.2186|
00088a  e07c              B        |L1.2438|
                  |L1.2188|
00088c  f9ba0000          LDRSH    r0,[r10,#0]           ;620  ; Ib_ips_termokompensat
000890  f7fffffe          BL       abs
000894  f8dfa008          LDR      r10,|L1.2208|
000898  e026              B        |L1.2280|
00089a  0000              DCW      0x0000
                  |L1.2204|
                          DCD      AVZ
                  |L1.2208|
                          DCD      ||area_number.21||
                  |L1.2212|
                          DCD      0x40024000
                  |L1.2216|
                          DCD      YEAR_AVZ
                  |L1.2220|
                          DCD      MONTH_AVZ
                  |L1.2224|
                          DCD      DATE_AVZ
                  |L1.2228|
                          DCD      HOUR_AVZ
                  |L1.2232|
                          DCD      MIN_AVZ
                  |L1.2236|
                          DCD      SEC_AVZ
                  |L1.2240|
                          DCD      AVZ_TIME
                  |L1.2244|
                          DCD      TBAT
                  |L1.2248|
                          DCD      Ib_ips_termokompensat
                  |L1.2252|
                          DCD      bat
                  |L1.2256|
                          DCD      IKB
                  |L1.2260|
                          DCD      BAT_IS_ON
                  |L1.2264|
                          DCD      ips_bat_av_vzvod
                  |L1.2268|
                          DCD      bat_ips
                  |L1.2272|
                          DCD      net_av
                  |L1.2276|
                          DCD      KB_ALGORITM
                  |L1.2280|
0008e8  f8aa0046          STRH     r0,[r10,#0x46]        ;620
0008ec  f88a500c          STRB     r5,[r10,#0xc]         ;622
0008f0  f9b80000          LDRSH    r0,[r8,#0]            ;624  ; ibat
0008f4  f9b71000          LDRSH    r1,[r7,#0]            ;624  ; ibat_
0008f8  4408              ADD      r0,r0,r1              ;624
0008fa  f9b91000          LDRSH    r1,[r9,#0]            ;624  ; IKB
0008fe  4288              CMP      r0,r1                 ;624
000900  da02              BGE      |L1.2312|
000902  7820              LDRB     r0,[r4,#0]            ;624  ; kb_start
000904  2801              CMP      r0,#1                 ;624
000906  d032              BEQ      |L1.2414|
                  |L1.2312|
000908  f9b60002          LDRSH    r0,[r6,#2]            ;628  ; bat
00090c  28c8              CMP      r0,#0xc8              ;628
00090e  dd04              BLE      |L1.2330|
000910  7025              STRB     r5,[r4,#0]            ;630
000912  2100              MOVS     r1,#0                 ;631
000914  4608              MOV      r0,r1                 ;631
000916  f7fffffe          BL       avar_bat_hndl
                  |L1.2330|
00091a  f9b80002          LDRSH    r0,[r8,#2]            ;634  ; ibat
00091e  f9b71002          LDRSH    r1,[r7,#2]            ;634  ; ibat_
000922  4408              ADD      r0,r0,r1              ;634
000924  f9b91000          LDRSH    r1,[r9,#0]            ;634  ; IKB
000928  4288              CMP      r0,r1                 ;634
00092a  da02              BGE      |L1.2354|
00092c  7860              LDRB     r0,[r4,#1]            ;634  ; kb_start
00092e  2801              CMP      r0,#1                 ;634
000930  d020              BEQ      |L1.2420|
                  |L1.2354|
000932  f9b6004e          LDRSH    r0,[r6,#0x4e]         ;638  ; bat
000936  28c8              CMP      r0,#0xc8              ;638
000938  dd04              BLE      |L1.2372|
00093a  7065              STRB     r5,[r4,#1]            ;640
00093c  2100              MOVS     r1,#0                 ;641
00093e  2001              MOVS     r0,#1                 ;641
000940  f7fffffe          BL       avar_bat_hndl
                  |L1.2372|
000944  f9ba0044          LDRSH    r0,[r10,#0x44]        ;644  ; ibat_ips
000948  f9ba1046          LDRSH    r1,[r10,#0x46]        ;644  ; ibat_ips_
00094c  4408              ADD      r0,r0,r1              ;644
00094e  f9b91000          LDRSH    r1,[r9,#0]            ;644  ; IKB
000952  4288              CMP      r0,r1                 ;644
000954  f6bfaf56          BGE      |L1.2052|
000958  f89a000d          LDRB     r0,[r10,#0xd]         ;644  ; kb_start_ips
00095c  2801              CMP      r0,#1                 ;644
00095e  d186              BNE      |L1.2158|
000960  48f9              LDR      r0,|L1.3400|
000962  8800              LDRH     r0,[r0,#0]            ;646  ; KB_ALGORITM
000964  2802              CMP      r0,#2                 ;646
000966  d008              BEQ      |L1.2426|
000968  f88ab00c          STRB     r11,[r10,#0xc]        ;653
                  |L1.2412|
00096c  e73d              B        |L1.2026|
                  |L1.2414|
00096e  f88ab00c          STRB     r11,[r10,#0xc]        ;626
000972  e7d2              B        |L1.2330|
                  |L1.2420|
000974  f88ab00c          STRB     r11,[r10,#0xc]        ;636
000978  e7e4              B        |L1.2372|
                  |L1.2426|
00097a  2001              MOVS     r0,#1                 ;648
00097c  f7fffffe          BL       avar_bat_ips_hndl
000980  f88a500d          STRB     r5,[r10,#0xd]         ;649
000984  e731              B        |L1.2026|
                  |L1.2438|
000986  7b08              LDRB     r0,[r1,#0xc]          ;660  ; kb_full_ver
000988  4688              MOV      r8,r1                 ;660
00098a  2800              CMP      r0,#0                 ;660
00098c  d0ee              BEQ      |L1.2412|
00098e  230f              MOVS     r3,#0xf               ;663
000990  2200              MOVS     r2,#0                 ;663
000992  216e              MOVS     r1,#0x6e              ;663
000994  20e1              MOVS     r0,#0xe1              ;663
000996  f7fffffe          BL       mess_send
00099a  f9b60008          LDRSH    r0,[r6,#8]            ;665  ; bat
00099e  f7fffffe          BL       abs
0009a2  f9b91000          LDRSH    r1,[r9,#0]            ;665  ; IKB
0009a6  4288              CMP      r0,r1                 ;665
0009a8  dd07              BLE      |L1.2490|
0009aa  7820              LDRB     r0,[r4,#0]            ;667  ; kb_start
0009ac  2801              CMP      r0,#1                 ;667
0009ae  d104              BNE      |L1.2490|
0009b0  7025              STRB     r5,[r4,#0]            ;669
0009b2  2100              MOVS     r1,#0                 ;670
0009b4  4608              MOV      r0,r1                 ;670
0009b6  f7fffffe          BL       avar_bat_hndl
                  |L1.2490|
0009ba  f9b60054          LDRSH    r0,[r6,#0x54]         ;674  ; bat
0009be  f7fffffe          BL       abs
0009c2  f9b91000          LDRSH    r1,[r9,#0]            ;674  ; IKB
0009c6  4288              CMP      r0,r1                 ;674
0009c8  dd06              BLE      |L1.2520|
0009ca  7860              LDRB     r0,[r4,#1]            ;676  ; kb_start
0009cc  2801              CMP      r0,#1                 ;676
0009ce  d103              BNE      |L1.2520|
0009d0  7065              STRB     r5,[r4,#1]            ;678
0009d2  2100              MOVS     r1,#0                 ;679
0009d4  f7fffffe          BL       avar_bat_hndl
                  |L1.2520|
0009d8  f9ba0000          LDRSH    r0,[r10,#0]           ;683  ; Ib_ips_termokompensat
0009dc  f7fffffe          BL       abs
0009e0  f9b91000          LDRSH    r1,[r9,#0]            ;683  ; IKB
0009e4  4288              CMP      r0,r1                 ;683
0009e6  dd08              BLE      |L1.2554|
0009e8  f898000d          LDRB     r0,[r8,#0xd]          ;685  ; kb_start_ips
0009ec  2801              CMP      r0,#1                 ;685
0009ee  d104              BNE      |L1.2554|
0009f0  f888500d          STRB     r5,[r8,#0xd]          ;687
0009f4  2000              MOVS     r0,#0                 ;688
0009f6  f7fffffe          BL       avar_bat_ips_hndl
                  |L1.2554|
0009fa  7820              LDRB     r0,[r4,#0]            ;693  ; kb_start
0009fc  b930              CBNZ     r0,|L1.2572|
0009fe  7860              LDRB     r0,[r4,#1]            ;693  ; kb_start
000a00  b920              CBNZ     r0,|L1.2572|
000a02  f898000d          LDRB     r0,[r8,#0xd]          ;693  ; kb_start_ips
000a06  b908              CBNZ     r0,|L1.2572|
000a08  f888500c          STRB     r5,[r8,#0xc]          ;695
                  |L1.2572|
000a0c  20e6              MOVS     r0,#0xe6              ;698
000a0e  f7fffffe          BL       mess_find
000a12  b118              CBZ      r0,|L1.2588|
000a14  48cd              LDR      r0,|L1.3404|
000a16  6800              LDR      r0,[r0,#0]            ;698  ; mess_data
000a18  28e7              CMP      r0,#0xe7              ;698
000a1a  d00a              BEQ      |L1.2610|
                  |L1.2588|
000a1c  48cc              LDR      r0,|L1.3408|
000a1e  49cd              LDR      r1,|L1.3412|
000a20  f9b00000          LDRSH    r0,[r0,#0]            ;698  ; USIGN
000a24  f9b11000          LDRSH    r1,[r1,#0]            ;698  ; load_U
000a28  eb000080          ADD      r0,r0,r0,LSL #2       ;698
000a2c  ebb10f40          CMP      r1,r0,LSL #1          ;698
                  |L1.2608|
000a30  da9c              BGE      |L1.2412|
                  |L1.2610|
000a32  f888500c          STRB     r5,[r8,#0xc]          ;700
000a36  7820              LDRB     r0,[r4,#0]            ;701  ; kb_start
000a38  4dc7              LDR      r5,|L1.3416|
000a3a  2801              CMP      r0,#1                 ;701
000a3c  d10f              BNE      |L1.2654|
000a3e  f9b90000          LDRSH    r0,[r9,#0]            ;701  ; IKB
000a42  f9b51000          LDRSH    r1,[r5,#0]            ;701  ; load_I
000a46  0040              LSLS     r0,r0,#1              ;701
000a48  fb90f0f7          SDIV     r0,r0,r7              ;701
000a4c  4288              CMP      r0,r1                 ;701
000a4e  da06              BGE      |L1.2654|
000a50  f896003d          LDRB     r0,[r6,#0x3d]         ;701  ; bat
000a54  07c0              LSLS     r0,r0,#31             ;701
000a56  d102              BNE      |L1.2654|
000a58  2101              MOVS     r1,#1                 ;701
000a5a  f7fffffe          BL       avar_bat_hndl
                  |L1.2654|
000a5e  7860              LDRB     r0,[r4,#1]            ;702  ; kb_start
000a60  2801              CMP      r0,#1                 ;702
000a62  d110              BNE      |L1.2694|
000a64  f9b90000          LDRSH    r0,[r9,#0]            ;702  ; IKB
000a68  f9b51000          LDRSH    r1,[r5,#0]            ;702  ; load_I
000a6c  0040              LSLS     r0,r0,#1              ;702
000a6e  fb90f0f7          SDIV     r0,r0,r7              ;702
000a72  4288              CMP      r0,r1                 ;702
000a74  da07              BGE      |L1.2694|
000a76  f8960089          LDRB     r0,[r6,#0x89]         ;702  ; bat
000a7a  07c0              LSLS     r0,r0,#31             ;702
000a7c  d103              BNE      |L1.2694|
000a7e  2101              MOVS     r1,#1                 ;702
000a80  4608              MOV      r0,r1                 ;702
000a82  f7fffffe          BL       avar_bat_hndl
                  |L1.2694|
000a86  f898000d          LDRB     r0,[r8,#0xd]          ;704  ; kb_start_ips
000a8a  2801              CMP      r0,#1                 ;704
                  |L1.2700|
000a8c  f47faeba          BNE      |L1.2052|
000a90  f9b90000          LDRSH    r0,[r9,#0]            ;704  ; IKB
000a94  f9b51000          LDRSH    r1,[r5,#0]            ;704  ; load_I
000a98  0040              LSLS     r0,r0,#1              ;704
000a9a  fb90f0f7          SDIV     r0,r0,r7              ;704
000a9e  4288              CMP      r0,r1                 ;704
000aa0  dac6              BGE      |L1.2608|
000aa2  48ae              LDR      r0,|L1.3420|
000aa4  f890003d          LDRB     r0,[r0,#0x3d]         ;704  ; bat_ips
000aa8  07c0              LSLS     r0,r0,#31             ;704
000aaa  d1ef              BNE      |L1.2700|
000aac  e8bd5ff0          POP      {r4-r12,lr}           ;704
000ab0  2001              MOVS     r0,#1                 ;704
000ab2  f7ffbffe          B.W      avar_bat_ips_hndl
;;;710    
                          ENDP

                  samokalibr_hndl PROC
;;;719    //-----------------------------------------------
;;;720    void samokalibr_hndl(void)
000ab6  e92d47f0          PUSH     {r4-r10,lr}
;;;721    {
;;;722    if(++samokalibr_cnt>=1800)samokalibr_cnt=0;
000aba  4ca9              LDR      r4,|L1.3424|
000abc  8f60              LDRH     r0,[r4,#0x3a]  ; samokalibr_cnt
000abe  1c40              ADDS     r0,r0,#1
000ac0  b200              SXTH     r0,r0
000ac2  8760              STRH     r0,[r4,#0x3a]
000ac4  f5b06fe1          CMP      r0,#0x708
000ac8  db02              BLT      |L1.2768|
000aca  f04f0000          MOV      r0,#0
000ace  8760              STRH     r0,[r4,#0x3a]
                  |L1.2768|
;;;723    
;;;724    if(samokalibr_cnt>=1785U)
000ad0  f9b4003a          LDRSH    r0,[r4,#0x3a]  ; samokalibr_cnt
000ad4  f5b06fdf          CMP      r0,#0x6f8
000ad8  d911              BLS      |L1.2814|
;;;725    	{
;;;726    	mess_send(MESS2RELE_HNDL,PARAM_RELE_SAMOKALIBR,1,15);
000ada  230f              MOVS     r3,#0xf
000adc  2201              MOVS     r2,#1
000ade  2164              MOVS     r1,#0x64
000ae0  20d2              MOVS     r0,#0xd2
000ae2  f7fffffe          BL       mess_send
;;;727    	mess_send(MESS2IND_HNDL,PARAM_SAMOKALIBR,0,15);
000ae6  230f              MOVS     r3,#0xf
000ae8  2200              MOVS     r2,#0
000aea  21d8              MOVS     r1,#0xd8
000aec  20d7              MOVS     r0,#0xd7
000aee  f7fffffe          BL       mess_send
;;;728    	mess_send(MESS2MATEMAT,PARAM_SAMOKALIBR,0,15);
000af2  230f              MOVS     r3,#0xf
000af4  2200              MOVS     r2,#0
000af6  21d8              MOVS     r1,#0xd8
000af8  20dc              MOVS     r0,#0xdc
000afa  f7fffffe          BL       mess_send
                  |L1.2814|
;;;729    	} 
;;;730    
;;;731    if(samokalibr_cnt==1799U)
000afe  f9b4003a          LDRSH    r0,[r4,#0x3a]  ; samokalibr_cnt
000b02  f5a061e0          SUB      r1,r0,#0x700
000b06  3907              SUBS     r1,#7
000b08  d133              BNE      |L1.2930|
;;;732    	{
;;;733    	if((Kibat0[0]!=ad7705_buff_[0])&&(abs(bat[0]._Ib/10)<IZMAX)) lc640_write_int(ADR_KI0BAT[0],ad7705_buff_[0]);
000b0a  4d96              LDR      r5,|L1.3428|
000b0c  4c96              LDR      r4,|L1.3432|
000b0e  4e97              LDR      r6,|L1.3436|
000b10  8828              LDRH     r0,[r5,#0]  ; Kibat0
000b12  8821              LDRH     r1,[r4,#0]  ; ad7705_buff_
000b14  270a              MOVS     r7,#0xa
000b16  f8df8258          LDR      r8,|L1.3440|
000b1a  f8df9258          LDR      r9,|L1.3444|
000b1e  4288              CMP      r0,r1
000b20  d010              BEQ      |L1.2884|
000b22  f9b60008          LDRSH    r0,[r6,#8]  ; bat
000b26  fb90f0f7          SDIV     r0,r0,r7
000b2a  b200              SXTH     r0,r0
000b2c  f7fffffe          BL       abs
000b30  f9b81000          LDRSH    r1,[r8,#0]  ; IZMAX
000b34  4288              CMP      r0,r1
000b36  da05              BGE      |L1.2884|
000b38  f9b41000          LDRSH    r1,[r4,#0]  ; ad7705_buff_
000b3c  f9b90000          LDRSH    r0,[r9,#0]  ; ADR_KI0BAT
000b40  f7fffffe          BL       lc640_write_int
                  |L1.2884|
;;;734    	if((Kibat0[1]!=ad7705_buff_[1])&&(abs(bat[0]._Ib/10)<IZMAX)) lc640_write_int(ADR_KI0BAT[1],ad7705_buff_[1]);
000b44  8868              LDRH     r0,[r5,#2]  ; Kibat0
000b46  8861              LDRH     r1,[r4,#2]  ; ad7705_buff_
000b48  4288              CMP      r0,r1
000b4a  d012              BEQ      |L1.2930|
000b4c  f9b60008          LDRSH    r0,[r6,#8]  ; bat
000b50  fb90f0f7          SDIV     r0,r0,r7
000b54  b200              SXTH     r0,r0
000b56  f7fffffe          BL       abs
000b5a  f9b81000          LDRSH    r1,[r8,#0]  ; IZMAX
000b5e  4288              CMP      r0,r1
000b60  da07              BGE      |L1.2930|
000b62  f9b41002          LDRSH    r1,[r4,#2]  ; ad7705_buff_
000b66  f9b90002          LDRSH    r0,[r9,#2]  ; ADR_KI0BAT
000b6a  e8bd47f0          POP      {r4-r10,lr}
000b6e  f7ffbffe          B.W      lc640_write_int
                  |L1.2930|
;;;735    	
;;;736    	}	 	
;;;737    }
000b72  e8bd87f0          POP      {r4-r10,pc}
;;;738    
                          ENDP

                  ubat_old_drv PROC
;;;741    //-----------------------------------------------
;;;742    void ubat_old_drv(void)
000b76  b510              PUSH     {r4,lr}
;;;743    {        
;;;744    bat_u_old_cnt++;
000b78  4c7f              LDR      r4,|L1.3448|
000b7a  8820              LDRH     r0,[r4,#0]  ; bat_u_old_cnt
000b7c  f1000001          ADD      r0,r0,#1
000b80  8020              STRH     r0,[r4,#0]
;;;745    gran_ring(&bat_u_old_cnt,0,8);
000b82  f04f0208          MOV      r2,#8
000b86  f04f0100          MOV      r1,#0
000b8a  4620              MOV      r0,r4
000b8c  f7fffffe          BL       gran_ring
;;;746    
;;;747    bat[0]._u_old[bat_u_old_cnt]=bat[0]._Ub;
000b90  4976              LDR      r1,|L1.3436|
000b92  f9b40000          LDRSH    r0,[r4,#0]  ; bat_u_old_cnt
000b96  eb010040          ADD      r0,r1,r0,LSL #1
000b9a  884a              LDRH     r2,[r1,#2]  ; bat
000b9c  8402              STRH     r2,[r0,#0x20]
;;;748    bat[1]._u_old[bat_u_old_cnt]=bat[1]._Ub;
000b9e  f8b1104e          LDRH     r1,[r1,#0x4e]  ; bat
000ba2  f8a0106c          STRH     r1,[r0,#0x6c]
;;;749    }
000ba6  bd10              POP      {r4,pc}
;;;750    
                          ENDP

                  unet_drv PROC
;;;751    //-----------------------------------------------
;;;752    void unet_drv(void)
000ba8  b570              PUSH     {r4-r6,lr}
;;;753    {
;;;754    if(net_U<UMN)
000baa  4d74              LDR      r5,|L1.3452|
000bac  4874              LDR      r0,|L1.3456|
;;;755    	{
;;;756    	if((unet_drv_cnt<10)&&(main_1Hz_cnt>15))
000bae  4a75              LDR      r2,|L1.3460|
000bb0  f9b51000          LDRSH    r1,[r5,#0]            ;754  ; net_U
000bb4  f9b03000          LDRSH    r3,[r0,#0]            ;754  ; UMN
000bb8  f9920000          LDRSB    r0,[r2,#0]
000bbc  4299              CMP      r1,r3                 ;754
000bbe  da1f              BGE      |L1.3072|
;;;757    		{
;;;758    		unet_drv_cnt++;
;;;759    		if(unet_drv_cnt>=10)
;;;760    			{
;;;761    			net_Ustore=net_U;
000bc0  4c71              LDR      r4,|L1.3464|
000bc2  280a              CMP      r0,#0xa               ;756
000bc4  da0f              BGE      |L1.3046|
000bc6  4b71              LDR      r3,|L1.3468|
000bc8  f9b33000          LDRSH    r3,[r3,#0]            ;756  ; main_1Hz_cnt
000bcc  2b0f              CMP      r3,#0xf               ;756
000bce  dd0a              BLE      |L1.3046|
000bd0  f1000001          ADD      r0,r0,#1              ;758
000bd4  b240              SXTB     r0,r0                 ;758
000bd6  7010              STRB     r0,[r2,#0]            ;758
000bd8  280a              CMP      r0,#0xa               ;759
000bda  db09              BLT      |L1.3056|
000bdc  8021              STRH     r1,[r4,#0]
;;;762    		 	avar_unet_hndl(1);
000bde  2001              MOVS     r0,#1
000be0  f7fffffe          BL       avar_unet_hndl
000be4  e004              B        |L1.3056|
                  |L1.3046|
;;;763    			
;;;764    			}
;;;765    		}
;;;766    	else if(unet_drv_cnt>=10)unet_drv_cnt=10;
000be6  280a              CMP      r0,#0xa
000be8  db02              BLT      |L1.3056|
000bea  f04f000a          MOV      r0,#0xa
000bee  7010              STRB     r0,[r2,#0]
                  |L1.3056|
;;;767    
;;;768    	if(net_U<net_Ustore) net_Ustore=net_U;	
000bf0  f9b50000          LDRSH    r0,[r5,#0]  ; net_U
000bf4  f9b41000          LDRSH    r1,[r4,#0]  ; net_Ustore
000bf8  4288              CMP      r0,r1
000bfa  da00              BGE      |L1.3070|
000bfc  8020              STRH     r0,[r4,#0]
                  |L1.3070|
;;;769    	}
;;;770    
;;;771    else if(net_U>UMN)
;;;772    	{                 
;;;773    	if(unet_drv_cnt)
;;;774    		{
;;;775    		unet_drv_cnt--;
;;;776    		if(unet_drv_cnt<=0)
;;;777    			{
;;;778    			avar_unet_hndl(0);
;;;779    			}
;;;780    		}
;;;781    	else if(unet_drv_cnt<0)unet_drv_cnt=0;
;;;782    	
;;;783    	}
;;;784    
;;;785    }
000bfe  bd70              POP      {r4-r6,pc}
                  |L1.3072|
000c00  ddfd              BLE      |L1.3070|
000c02  2800              CMP      r0,#0                 ;773
000c04  d0fb              BEQ      |L1.3070|
000c06  f1a00001          SUB      r0,r0,#1              ;775
000c0a  b240              SXTB     r0,r0                 ;775
000c0c  7010              STRB     r0,[r2,#0]            ;775
000c0e  2800              CMP      r0,#0                 ;776
000c10  dcf5              BGT      |L1.3070|
000c12  e8bd4070          POP      {r4-r6,lr}            ;778
000c16  2000              MOVS     r0,#0                 ;778
000c18  f7ffbffe          B.W      avar_unet_hndl
;;;786    
                          ENDP

                  matemat PROC
;;;787    //-----------------------------------------------
;;;788    void matemat(void)
000c1c  e92d4ffe          PUSH     {r1-r11,lr}
;;;789    {
;;;790    //signed short temp_SS;
;;;791    signed long temp_SL/*,temp_SL_*/;
;;;792    char /*temp,*/i;
;;;793    //signed short temp_SS;
;;;794    
;;;795    #ifdef UKU_MGTS
;;;796    // 
;;;797    temp_SL=(signed long)net_buff_;
;;;798    temp_SL*=Kunet;
;;;799    temp_SL/=110000L;
;;;800    net_U=(signed short)temp_SL;
;;;801    #endif
;;;802    
;;;803    #ifdef UKU_RSTKM
;;;804    // 
;;;805    temp_SL=(signed long)net_buff_;
;;;806    temp_SL*=Kunet;
;;;807    temp_SL/=110000L;
;;;808    net_U=(signed short)temp_SL;
;;;809    #endif
;;;810    
;;;811    #ifdef UKU_3U
;;;812    // 
;;;813    temp_SL=(signed long)net_buff_;
;;;814    temp_SL*=Kunet;
;;;815    temp_SL/=36000L;
;;;816    net_U=(signed short)temp_SL;
;;;817    #endif
;;;818    
;;;819    #ifdef UKU_6U
;;;820    // 
;;;821    
;;;822    if((AUSW_MAIN%10)||(AUSW_MAIN==2400)||(AUSW_MAIN==4800)||(AUSW_MAIN==6000))
;;;823    	{
;;;824    
;;;825    	if(bps[11]._device==dNET_METR)
;;;826    		{
;;;827    		net_metr_buff_[0]=((signed short)bps[11]._buff[0])+(((signed short)bps[11]._buff[1])<<8);
;;;828    		net_metr_buff_[1]=((signed short)bps[11]._buff[2])+(((signed short)bps[11]._buff[3])<<8);
;;;829    		net_metr_buff_[2]=((signed short)bps[11]._buff[4])+(((signed short)bps[11]._buff[5])<<8);
;;;830    
;;;831    		temp_SL=(signed long)net_metr_buff_[0];
;;;832    		temp_SL*=KunetA;
;;;833    		temp_SL/=6000L;
;;;834    		net_Ua=(signed short)temp_SL;
;;;835    	
;;;836    		temp_SL=(signed long)net_metr_buff_[1];
;;;837    		temp_SL*=KunetB;
;;;838    		temp_SL/=6000L;
;;;839    		net_Ub=(signed short)temp_SL;
;;;840    	
;;;841    		temp_SL=(signed long)net_metr_buff_[2];
;;;842    		temp_SL*=KunetC;
;;;843    		temp_SL/=6000L;
;;;844    		net_Uc=(signed short)temp_SL;
;;;845    		}
;;;846    	else
;;;847    		{
;;;848    		temp_SL=(signed long)net_buff_;
;;;849    		temp_SL*=KunetA;
;;;850    		temp_SL/=110000L;
;;;851    		net_Ua=(signed short)temp_SL;
;;;852    	
;;;853    		temp_SL=(signed long)adc_buff_[3];
;;;854    		temp_SL*=KunetB;
;;;855    		temp_SL/=6000L;
;;;856    		net_Ub=(signed short)temp_SL;
;;;857    	
;;;858    		temp_SL=(signed long)adc_buff_[10];
;;;859    		temp_SL*=KunetC;
;;;860    		temp_SL/=6000L;
;;;861    		net_Uc=(signed short)temp_SL;
;;;862    		}
;;;863    
;;;864    	net_U=net_Ua;
;;;865    	if(net_Ub<net_U)net_U=net_Ub;
;;;866    	if(net_Uc<net_U)net_U=net_Uc;
;;;867    	}
;;;868    else 
;;;869    	{
;;;870    	temp_SL=(signed long)net_buff_;
;;;871    	temp_SL*=Kunet;
;;;872    	temp_SL/=110000L;
;;;873    	net_U=(signed short)temp_SL;
;;;874    	}
;;;875    
;;;876    
;;;877    
;;;878    
;;;879    #endif
;;;880    
;;;881    #ifdef UKU_GLONASS
;;;882    // 
;;;883    temp_SL=(signed long)net_buff_;
;;;884    temp_SL*=Kunet;
;;;885    temp_SL/=110000L;
;;;886    net_U=(signed short)temp_SL;
;;;887    #endif
;;;888    
;;;889    #ifdef UKU_KONTUR
;;;890    // 
;;;891    temp_SL=(signed long)net_buff_;
;;;892    temp_SL*=Kunet;
;;;893    temp_SL/=110000L;
;;;894    net_U=(signed short)temp_SL;
;;;895    #endif
;;;896    
;;;897    
;;;898    #ifdef UKU_220_V2
;;;899    // 
;;;900    
;;;901    if(AUSW_MAIN==22033)
;;;902    	{
;;;903    	temp_SL=(signed long)net_buff_;
;;;904    	temp_SL*=KunetA;
;;;905    	temp_SL/=6000L;
;;;906    	net_Ua=(signed short)temp_SL;
;;;907    
;;;908    	temp_SL=(signed long)adc_buff_[3];
;;;909    	temp_SL*=KunetB;
;;;910    	temp_SL/=6000L;
;;;911    	net_Ub=(signed short)temp_SL;
;;;912    
;;;913    	temp_SL=(signed long)adc_buff_[10];
;;;914    	temp_SL*=KunetC;
;;;915    	temp_SL/=6000L;
;;;916    	net_Uc=(signed short)temp_SL;
;;;917    
;;;918    	net_U=net_Ua;
;;;919    	if(net_Ub<net_U)net_U=net_Ub;
;;;920    	if(net_Uc<net_U)net_U=net_Uc;
;;;921    	}
;;;922    else
;;;923    	{
;;;924    	temp_SL=(signed long)net_buff_;
;;;925    	temp_SL*=Kunet;
;;;926    	temp_SL/=5000L;
;;;927    	net_U=(signed short)temp_SL;
;;;928    	}
;;;929    #endif
;;;930    
;;;931    
;;;932    #ifdef UKU_220
;;;933    // 
;;;934    
;;;935    if(AUSW_MAIN==22035)
;;;936    	{
;;;937    	temp_SL=(signed long)net_buff_;
;;;938    	temp_SL*=KunetA;
;;;939    	temp_SL/=6000L;
;;;940    	net_Ua=(signed short)temp_SL;
;;;941    
;;;942    	temp_SL=(signed long)adc_buff_[3];
;;;943    	temp_SL*=KunetB;
;;;944    	temp_SL/=6000L;
;;;945    	net_Ub=(signed short)temp_SL;
;;;946    
;;;947    	temp_SL=(signed long)adc_buff_[10];
;;;948    	temp_SL*=KunetC;
;;;949    	temp_SL/=6000L;
;;;950    	net_Uc=(signed short)temp_SL;
;;;951    
;;;952    	net_U=net_Ua;
;;;953    	if(net_Ub<net_U)net_U=net_Ub;
;;;954    	if(net_Uc<net_U)net_U=net_Uc;
;;;955    	}
;;;956    else
;;;957    	{
;;;958    	temp_SL=(signed long)net_buff_;
;;;959    	temp_SL*=Kunet;
;;;960    	#ifdef _ACDC_
;;;961    	temp_SL/=500L;
;;;962    	#else
;;;963    	temp_SL/=5000L;
;;;964    	#endif
;;;965    	net_U=(signed short)temp_SL;
;;;966    	
;;;967    	}
;;;968    #endif
;;;969    
;;;970    #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;971    // 
;;;972    
;;;973    
;;;974    	if(bps[11]._device==dNET_METR)
000c20  485b              LDR      r0,|L1.3472|
;;;975    		{
;;;976    		net_metr_buff_[0]=((signed short)bps[11]._buff[0])+(((signed short)bps[11]._buff[1])<<8);
;;;977    		net_metr_buff_[1]=((signed short)bps[11]._buff[2])+(((signed short)bps[11]._buff[3])<<8);
;;;978    		net_metr_buff_[2]=((signed short)bps[11]._buff[4])+(((signed short)bps[11]._buff[5])<<8);
;;;979    
;;;980    		temp_SL=(signed long)net_metr_buff_[2];
;;;981    		temp_SL*=KunetA;
;;;982    		temp_SL/=6000L;
;;;983    		net_Ua=(signed short)temp_SL;
;;;984    	
;;;985    		temp_SL=(signed long)net_metr_buff_[1];
;;;986    		temp_SL*=KunetB;
000c22  495e              LDR      r1,|L1.3484|
000c24  4a5b              LDR      r2,|L1.3476|
000c26  f89003f4          LDRB     r0,[r0,#0x3f4]        ;974  ; bps
;;;987    		temp_SL/=6000L;
;;;988    		net_Ub=(signed short)temp_SL;
;;;989    	
;;;990    		temp_SL=(signed long)net_metr_buff_[0];
;;;991    		temp_SL*=KunetC;
000c2a  4b5d              LDR      r3,|L1.3488|
000c2c  9002              STR      r0,[sp,#8]            ;981
000c2e  f9b1b000          LDRSH    r11,[r1,#0]           ;986
000c32  f8dfc164          LDR      r12,|L1.3480|
000c36  f9b2a000          LDRSH    r10,[r2,#0]           ;981
000c3a  f9b31000          LDRSH    r1,[r3,#0]
000c3e  4d59              LDR      r5,|L1.3492|
;;;992    		temp_SL/=6000L;
;;;993    		net_Uc=(signed short)temp_SL;
000c40  4c59              LDR      r4,|L1.3496|
;;;994    
;;;995    		net_F3=((signed short)bps[11]._buff[6])+(((signed short)bps[11]._buff[7])<<8);
;;;996    
;;;997    		net_U=net_Ua;
;;;998    		if(net_Ub<net_U)net_U=net_Ub;
;;;999    		if(net_Uc<net_U)net_U=net_Uc;
;;;1000   		}
;;;1001   	  else if(AUSW_MAIN==22033)
;;;1002   	{
;;;1003   	temp_SL=(signed long)net_buff_;
000c42  4f47              LDR      r7,|L1.3424|
000c44  f2456611          MOV      r6,#0x5611            ;1001
;;;1004   	temp_SL*=KunetA;
;;;1005   	temp_SL/=4000L;
;;;1006   	net_Ua=(signed short)temp_SL;
;;;1007   
;;;1008   	temp_SL=(signed long)adc_buff_[3];
;;;1009   	temp_SL*=KunetB;
;;;1010   	temp_SL/=6000L;
;;;1011   	net_Ub=(signed short)temp_SL;
;;;1012   
;;;1013   	temp_SL=(signed long)adc_buff_[10];
;;;1014   	temp_SL*=KunetC;
;;;1015   	temp_SL/=6000L;
;;;1016   	net_Uc=(signed short)temp_SL;
;;;1017   
;;;1018   	net_U=net_Ua;
;;;1019   	if(net_Ub<net_U)net_U=net_Ub;
;;;1020   	if(net_Uc<net_U)net_U=net_Uc;
;;;1021   	}
;;;1022   else if((AUSW_MAIN==22063)||(AUSW_MAIN==22023)||(AUSW_MAIN==22043)||(AUSW_MAIN==22018))
;;;1023   	{
;;;1024   	temp_SL=(signed long)net_buff_;
;;;1025   	temp_SL*=KunetA;
;;;1026   	temp_SL/=40000L;
;;;1027   	net_Ua=(signed short)temp_SL;
;;;1028   
;;;1029   	temp_SL=(signed long)adc_buff_[3];
;;;1030   	temp_SL*=KunetB;
;;;1031   	temp_SL/=6000L;
;;;1032   	net_Ub=(signed short)temp_SL;
;;;1033   
;;;1034   	temp_SL=(signed long)adc_buff_[10];
;;;1035   	temp_SL*=KunetC;
;;;1036   	temp_SL/=6000L;
;;;1037   	net_Uc=(signed short)temp_SL;
;;;1038   
;;;1039   	net_U=net_Ua;
;;;1040   	if(net_Ub<net_U)net_U=net_Ub;
;;;1041   	if(net_Uc<net_U)net_U=net_Uc;
;;;1042   	}
;;;1043   else	if((AUSW_MAIN==22010)||(AUSW_MAIN==22011) )
;;;1044   	{
;;;1045   	temp_SL=(signed long)net_buff_;
;;;1046   	temp_SL*=Kunet;
;;;1047   	temp_SL/=35000L;
;;;1048   	net_U=(signed short)temp_SL;
;;;1049   	
;;;1050   	}
;;;1051   else
;;;1052   	{
;;;1053   	temp_SL=(signed long)net_buff_;
;;;1054   	temp_SL*=Kunet;
;;;1055   	#ifdef _ACDC_
;;;1056   	temp_SL/=500L;
000c48  f44f78fa          MOV      r8,#0x1f4
000c4c  9101              STR      r1,[sp,#4]            ;974
000c4e  2807              CMP      r0,#7                 ;974
000c50  d036              BEQ      |L1.3264|
000c52  4639              MOV      r1,r7                 ;1003
000c54  4b56              LDR      r3,|L1.3504|
000c56  8c8a              LDRH     r2,[r1,#0x24]         ;1003
000c58  494e              LDR      r1,|L1.3476|
000c5a  f8df9140          LDR      r9,|L1.3484|
000c5e  f2417a70          MOV      r10,#0x1770           ;982
000c62  f9b11000          LDRSH    r1,[r1,#0]            ;981
000c66  f9b99000          LDRSH    r9,[r9,#0]            ;986
000c6a  434a              MULS     r2,r1,r2              ;1004
000c6c  f9b31006          LDRSH    r1,[r3,#6]            ;1008
000c70  f9b33014          LDRSH    r3,[r3,#0x14]         ;1013
000c74  fb01f109          MUL      r1,r1,r9              ;1009
000c78  f8df9124          LDR      r9,|L1.3488|
000c7c  fb91f1fa          SDIV     r1,r1,r10             ;1010
000c80  f9b99000          LDRSH    r9,[r9,#0]            ;991
000c84  4849              LDR      r0,|L1.3500|
000c86  fb03f309          MUL      r3,r3,r9              ;1014
000c8a  fb93f3fa          SDIV     r3,r3,r10             ;1015
000c8e  8800              LDRH     r0,[r0,#0]            ;1001  ; AUSW_MAIN
000c90  b209              SXTH     r1,r1                 ;1011
000c92  b21b              SXTH     r3,r3                 ;1016
000c94  42b0              CMP      r0,r6                 ;1001
000c96  d155              BNE      |L1.3396|
000c98  f44f607a          MOV      r0,#0xfa0             ;1005
000c9c  fb92f0f0          SDIV     r0,r2,r0              ;1005
000ca0  b200              SXTH     r0,r0                 ;1006
000ca2  f8ac0000          STRH     r0,[r12,#0]           ;1006
000ca6  8029              STRH     r1,[r5,#0]            ;1011
000ca8  8023              STRH     r3,[r4,#0]            ;1016
000caa  4a34              LDR      r2,|L1.3452|
000cac  8010              STRH     r0,[r2,#0]            ;1018
000cae  4281              CMP      r1,r0                 ;1019
000cb0  da00              BGE      |L1.3252|
000cb2  8011              STRH     r1,[r2,#0]            ;1019
                  |L1.3252|
000cb4  f9b20000          LDRSH    r0,[r2,#0]            ;1020  ; net_U
000cb8  4283              CMP      r3,r0                 ;1020
000cba  da00              BGE      |L1.3262|
000cbc  8013              STRH     r3,[r2,#0]            ;1020
                  |L1.3262|
000cbe  e0b6              B        |L1.3630|
                  |L1.3264|
000cc0  483c              LDR      r0,|L1.3508|
000cc2  4b27              LDR      r3,|L1.3424|
000cc4  7801              LDRB     r1,[r0,#0]            ;976  ; bps
000cc6  7842              LDRB     r2,[r0,#1]            ;976  ; bps
000cc8  f1030390          ADD      r3,r3,#0x90           ;976
000ccc  eb012102          ADD      r1,r1,r2,LSL #8       ;976
000cd0  fa1ff981          UXTH     r9,r1                 ;976
000cd4  f8a39000          STRH     r9,[r3,#0]            ;976
000cd8  7881              LDRB     r1,[r0,#2]            ;977  ; bps
000cda  78c2              LDRB     r2,[r0,#3]            ;977  ; bps
000cdc  eb012102          ADD      r1,r1,r2,LSL #8       ;977
000ce0  b28a              UXTH     r2,r1                 ;977
000ce2  805a              STRH     r2,[r3,#2]            ;977
000ce4  7901              LDRB     r1,[r0,#4]            ;978  ; bps
000ce6  f890e005          LDRB     lr,[r0,#5]            ;978  ; bps
000cea  eb01210e          ADD      r1,r1,lr,LSL #8       ;978
000cee  b289              UXTH     r1,r1                 ;978
000cf0  8099              STRH     r1,[r3,#4]            ;978
000cf2  fb01f10a          MUL      r1,r1,r10             ;981
000cf6  f2417370          MOV      r3,#0x1770            ;982
000cfa  fb91f1f3          SDIV     r1,r1,r3              ;982
000cfe  fa0ffa81          SXTH     r10,r1                ;983
000d02  f8aca000          STRH     r10,[r12,#0]          ;983
000d06  fb02f20b          MUL      r2,r2,r11             ;986
000d0a  fb92f1f3          SDIV     r1,r2,r3              ;987
000d0e  b209              SXTH     r1,r1                 ;988
000d10  8029              STRH     r1,[r5,#0]            ;988
000d12  9a01              LDR      r2,[sp,#4]            ;991
000d14  fb09f902          MUL      r9,r9,r2              ;991
000d18  fb99f2f3          SDIV     r2,r9,r3              ;992
000d1c  b212              SXTH     r2,r2                 ;993
000d1e  8022              STRH     r2,[r4,#0]            ;993
000d20  7983              LDRB     r3,[r0,#6]            ;995  ; bps
000d22  79c0              LDRB     r0,[r0,#7]            ;995  ; bps
000d24  eb032000          ADD      r0,r3,r0,LSL #8       ;995
000d28  4b23              LDR      r3,|L1.3512|
000d2a  8018              STRH     r0,[r3,#0]            ;995
000d2c  4813              LDR      r0,|L1.3452|
000d2e  f8a0a000          STRH     r10,[r0,#0]           ;997
000d32  4551              CMP      r1,r10                ;998
000d34  da00              BGE      |L1.3384|
000d36  8001              STRH     r1,[r0,#0]            ;998
                  |L1.3384|
000d38  f9b01000          LDRSH    r1,[r0,#0]            ;999  ; net_U
000d3c  428a              CMP      r2,r1                 ;999
000d3e  da76              BGE      |L1.3630|
000d40  8002              STRH     r2,[r0,#0]            ;999
000d42  e074              B        |L1.3630|
                  |L1.3396|
000d44  e03a              B        |L1.3516|
000d46  0000              DCW      0x0000
                  |L1.3400|
                          DCD      KB_ALGORITM
                  |L1.3404|
                          DCD      mess_data
                  |L1.3408|
                          DCD      USIGN
                  |L1.3412|
                          DCD      load_U
                  |L1.3416|
                          DCD      load_I
                  |L1.3420|
                          DCD      bat_ips
                  |L1.3424|
                          DCD      ||area_number.21||
                  |L1.3428|
                          DCD      Kibat0
                  |L1.3432|
                          DCD      ad7705_buff_
                  |L1.3436|
                          DCD      bat
                  |L1.3440|
                          DCD      IZMAX
                  |L1.3444|
                          DCD      ADR_KI0BAT
                  |L1.3448|
                          DCD      bat_u_old_cnt
                  |L1.3452|
                          DCD      net_U
                  |L1.3456|
                          DCD      UMN
                  |L1.3460|
                          DCD      unet_drv_cnt
                  |L1.3464|
                          DCD      net_Ustore
                  |L1.3468|
                          DCD      main_1Hz_cnt
                  |L1.3472|
                          DCD      bps
                  |L1.3476|
                          DCD      KunetA
                  |L1.3480|
                          DCD      net_Ua
                  |L1.3484|
                          DCD      KunetB
                  |L1.3488|
                          DCD      KunetC
                  |L1.3492|
                          DCD      net_Ub
                  |L1.3496|
                          DCD      net_Uc
                  |L1.3500|
                          DCD      AUSW_MAIN
                  |L1.3504|
                          DCD      ||.bss||+0x400
                  |L1.3508|
                          DCD      bps+0x3fa
                  |L1.3512|
                          DCD      net_F3
                  |L1.3516|
000dbc  f5a049ac          SUB      r9,r0,#0x5600         ;1022
000dc0  f1b9092f          SUBS     r9,r9,#0x2f           ;1022
000dc4  d008              BEQ      |L1.3544|
000dc6  f1190928          ADDS     r9,r9,#0x28           ;1022
000dca  d005              BEQ      |L1.3544|
000dcc  f1b90914          SUBS     r9,r9,#0x14           ;1022
000dd0  d002              BEQ      |L1.3544|
000dd2  f1190919          ADDS     r9,r9,#0x19           ;1022
000dd6  d113              BNE      |L1.3584|
                  |L1.3544|
000dd8  f6494040          MOV      r0,#0x9c40            ;1026
000ddc  fb92f0f0          SDIV     r0,r2,r0              ;1026
000de0  b200              SXTH     r0,r0                 ;1027
000de2  f8ac0000          STRH     r0,[r12,#0]           ;1027
000de6  8029              STRH     r1,[r5,#0]            ;1032
000de8  8023              STRH     r3,[r4,#0]            ;1037
000dea  4af9              LDR      r2,|L1.4560|
000dec  8010              STRH     r0,[r2,#0]            ;1039
000dee  4281              CMP      r1,r0                 ;1040
000df0  da00              BGE      |L1.3572|
000df2  8011              STRH     r1,[r2,#0]            ;1040
                  |L1.3572|
000df4  f9b20000          LDRSH    r0,[r2,#0]            ;1041  ; net_U
000df8  4283              CMP      r3,r0                 ;1041
000dfa  da18              BGE      |L1.3630|
000dfc  8013              STRH     r3,[r2,#0]            ;1041
000dfe  e016              B        |L1.3630|
                  |L1.3584|
000e00  49f4              LDR      r1,|L1.4564|
000e02  f5a043aa          SUB      r3,r0,#0x5500         ;1043
000e06  f9b12000          LDRSH    r2,[r1,#0]            ;1046
000e0a  49f3              LDR      r1,|L1.4568|
000e0c  8c89              LDRH     r1,[r1,#0x24]         ;1003
000e0e  4351              MULS     r1,r2,r1              ;1046
000e10  3bfa              SUBS     r3,r3,#0xfa           ;1043
000e12  d001              BEQ      |L1.3608|
000e14  1e5a              SUBS     r2,r3,#1              ;1043
000e16  d106              BNE      |L1.3622|
                  |L1.3608|
000e18  f64800b8          MOV      r0,#0x88b8            ;1047
000e1c  fb91f0f0          SDIV     r0,r1,r0              ;1047
000e20  49eb              LDR      r1,|L1.4560|
000e22  8008              STRH     r0,[r1,#0]            ;1048
000e24  e003              B        |L1.3630|
                  |L1.3622|
000e26  fb91f0f8          SDIV     r0,r1,r8
;;;1057   	#else
;;;1058   	temp_SL/=5000L;
;;;1059   	#endif
;;;1060   	net_U=(signed short)temp_SL;
000e2a  49e9              LDR      r1,|L1.4560|
000e2c  8008              STRH     r0,[r1,#0]
                  |L1.3630|
;;;1061   	
;;;1062   	}
;;;1063   if(bps[11]._device!=dNET_METR) net_F3=net_F;
000e2e  9802              LDR      r0,[sp,#8]
000e30  2807              CMP      r0,#7
000e32  d003              BEQ      |L1.3644|
000e34  48e9              LDR      r0,|L1.4572|
000e36  8801              LDRH     r1,[r0,#0]  ; net_F
000e38  48e9              LDR      r0,|L1.4576|
000e3a  8001              STRH     r1,[r0,#0]
                  |L1.3644|
;;;1064   #endif
;;;1065   
;;;1066   #ifdef UKU_TELECORE2015
;;;1067   // 
;;;1068   temp_SL=(signed long)net_buff_;
;;;1069   temp_SL*=Kunet;
;;;1070   temp_SL/=110000L;
;;;1071   net_U=(signed short)temp_SL;
;;;1072   #endif
;;;1073   
;;;1074   // 
;;;1075   temp_SL=(signed long)adc_buff_[0];
000e3c  f8dfa3a4          LDR      r10,|L1.4580|
000e40  f9ba1000          LDRSH    r1,[r10,#0]  ; adc_buff_
;;;1076   temp_SL*=Kubat[0];
000e44  4be8              LDR      r3,|L1.4584|
000e46  f9b30000          LDRSH    r0,[r3,#0]  ; Kubat
000e4a  4348              MULS     r0,r1,r0
;;;1077   temp_SL/=2000L;
000e4c  f44f65fa          MOV      r5,#0x7d0
000e50  fb90f0f5          SDIV     r0,r0,r5
;;;1078   bat[0]._Ub=(signed short)temp_SL;
000e54  4ce5              LDR      r4,|L1.4588|
000e56  8060              STRH     r0,[r4,#2]
;;;1079   
;;;1080   #ifdef UKU_220
;;;1081   // 
;;;1082   temp_SL=(signed long)adc_buff_[0];
;;;1083   temp_SL*=Kubat[0];
;;;1084   temp_SL/=400L;
;;;1085   bat[0]._Ub=(signed short)temp_SL;
;;;1086   #endif
;;;1087   
;;;1088   #ifdef UKU_220_V2
;;;1089   // 
;;;1090   temp_SL=(signed long)adc_buff_[0];
;;;1091   temp_SL*=Kubat[0];
;;;1092   temp_SL/=400L;
;;;1093   bat[0]._Ub=(signed short)temp_SL;
;;;1094   #endif
;;;1095   
;;;1096   temp_SL=(signed long)adc_buff_[4];
000e58  f9ba2008          LDRSH    r2,[r10,#8]  ; adc_buff_
;;;1097   temp_SL*=Kubatm[0];
000e5c  49e4              LDR      r1,|L1.4592|
000e5e  f9b10000          LDRSH    r0,[r1,#0]  ; Kubatm
000e62  fb00f002          MUL      r0,r0,r2
;;;1098   temp_SL/=700L;
000e66  f44f722f          MOV      r2,#0x2bc
000e6a  fb90f0f2          SDIV     r0,r0,r2
;;;1099   bat[0]._Ubm=(signed short)temp_SL;
000e6e  80a0              STRH     r0,[r4,#4]
;;;1100   
;;;1101   #ifdef UKU_KONTUR
;;;1102   temp_SL=(signed long)adc_buff_[4];
;;;1103   temp_SL*=Kubatm[0];
;;;1104   temp_SL/=2000L;
;;;1105   bat[0]._Ubm=(signed short)temp_SL;
;;;1106   #endif
;;;1107   
;;;1108   temp_SL=(signed long)adc_buff_[12];
000e70  f9bac018          LDRSH    r12,[r10,#0x18]  ; adc_buff_
;;;1109   temp_SL*=Kubat[1];
000e74  f9b30002          LDRSH    r0,[r3,#2]  ; Kubat
000e78  fb00f00c          MUL      r0,r0,r12
;;;1110   temp_SL/=2000L;
000e7c  fb90f0f5          SDIV     r0,r0,r5
;;;1111   bat[1]._Ub=(signed short)temp_SL;
000e80  f8a4004e          STRH     r0,[r4,#0x4e]
;;;1112   
;;;1113   #ifdef UKU_220
;;;1114   temp_SL=(signed long)adc_buff_[12];
;;;1115   temp_SL*=Kubat[1];
;;;1116   temp_SL/=400L;
;;;1117   bat[1]._Ub=(signed short)temp_SL;
;;;1118   #endif
;;;1119   
;;;1120   #ifdef UKU_220_V2
;;;1121   temp_SL=(signed long)adc_buff_[12];
;;;1122   temp_SL*=Kubat[1];
;;;1123   temp_SL/=400L;
;;;1124   bat[1]._Ub=(signed short)temp_SL;
;;;1125   #endif
;;;1126   
;;;1127   temp_SL=(signed long)adc_buff_[1];
000e84  f9ba3002          LDRSH    r3,[r10,#2]  ; adc_buff_
;;;1128   temp_SL*=Kubatm[1];
000e88  f9b10002          LDRSH    r0,[r1,#2]  ; Kubatm
000e8c  fb00f003          MUL      r0,r0,r3
;;;1129   temp_SL/=700L;
000e90  fb90f0f2          SDIV     r0,r0,r2
;;;1130   bat[1]._Ubm=(signed short)temp_SL;
000e94  f8a40050          STRH     r0,[r4,#0x50]
;;;1131   #ifdef UKU_KONTUR
;;;1132   temp_SL=(signed long)adc_buff_[1];
;;;1133   temp_SL*=Kubatm[1];
;;;1134   temp_SL/=2000L;
;;;1135   bat[1]._Ubm=(signed short)temp_SL;
;;;1136   #endif
;;;1137   
;;;1138   #ifdef UKU_TELECORE2015
;;;1139   temp_SL=(signed long)adc_buff_[2];
;;;1140   temp_SL*=Kubat[0];
;;;1141   temp_SL/=2000L;
;;;1142   bat[0]._Ub=(signed short)temp_SL;
;;;1143   #endif
;;;1144   
;;;1145   /*
;;;1146   // 
;;;1147   if(!mess_find_unvol(MESS2MATEMAT))
;;;1148   	{
;;;1149   	temp_SL=(signed long)ad7705_buff_[0];
;;;1150   	temp_SL-=(signed long)Kibat0[0];
;;;1151   	temp_SL*=(signed long)Kibat1[0];
;;;1152   	if((AUSW_MAIN==24120)||(AUSW_MAIN==24210))temp_SL/=300L;
;;;1153   	else temp_SL/=1000L;
;;;1154   	bat[0]._Ib=(signed short)temp_SL;
;;;1155   
;;;1156   	temp_SL=(signed long)ad7705_buff_[1];
;;;1157   	temp_SL-=(signed long)Kibat0[1];
;;;1158   	temp_SL*=(signed long)Kibat1[1];
;;;1159   	if((AUSW_MAIN==24120)||(AUSW_MAIN==24210))temp_SL/=300L;
;;;1160   	else temp_SL/=1000L;
;;;1161   	bat[1]._Ib=(signed short)temp_SL;
;;;1162   	}
;;;1163   */
;;;1164   
;;;1165   
;;;1166   // 
;;;1167   if(!mess_find_unvol(MESS2MATEMAT))
000e98  f04f00dc          MOV      r0,#0xdc
000e9c  f7fffffe          BL       mess_find_unvol
;;;1168   	{
;;;1169   	temp_SL=(signed long)ad7705_buff_[0];
;;;1170   	temp_SL-=(signed long)Kibat0[0];
;;;1171   	temp_SL*=(signed long)Kibat1[0];
;;;1172   	if((AUSW_MAIN==24120)||(AUSW_MAIN==24210))temp_SL/=300L;
;;;1173   	else if((AUSW_MAIN==22010)||(AUSW_MAIN==22035)||(AUSW_MAIN==22033))temp_SL/=2000L;
000ea0  f2456913          MOV      r9,#0x5613
000ea4  bbf0              CBNZ     r0,|L1.3876|
000ea6  f8dfc34c          LDR      r12,|L1.4596|
000eaa  f8bc0000          LDRH     r0,[r12,#0]           ;1169  ; ad7705_buff_
000eae  f8dfb348          LDR      r11,|L1.4600|
000eb2  f8bb1000          LDRH     r1,[r11,#0]           ;1170  ; Kibat0
000eb6  eba00001          SUB      r0,r0,r1              ;1170
000eba  4ad0              LDR      r2,|L1.4604|
000ebc  f9b21000          LDRSH    r1,[r2,#0]            ;1171  ; Kibat1
000ec0  fb01f100          MUL      r1,r1,r0              ;1171
000ec4  48ce              LDR      r0,|L1.4608|
000ec6  f6456338          MOV      r3,#0x5e38            ;1172
000eca  8800              LDRH     r0,[r0,#0]            ;1172  ; AUSW_MAIN
000ecc  4298              CMP      r0,r3                 ;1172
000ece  d004              BEQ      |L1.3802|
000ed0  f5a04ebc          SUB      lr,r0,#0x5e00         ;1172
000ed4  f1be0e92          SUBS     lr,lr,#0x92           ;1172
000ed8  d104              BNE      |L1.3812|
                  |L1.3802|
000eda  f44f7e96          MOV      lr,#0x12c             ;1172
000ede  fb91f1fe          SDIV     r1,r1,lr              ;1172
000ee2  e00f              B        |L1.3844|
                  |L1.3812|
000ee4  f5a04ea8          SUB      lr,r0,#0x5400
000ee8  f5be7efd          SUBS     lr,lr,#0x1fa
000eec  d003              BEQ      |L1.3830|
000eee  4548              CMP      r0,r9
000ef0  d001              BEQ      |L1.3830|
000ef2  42b0              CMP      r0,r6
000ef4  d102              BNE      |L1.3836|
                  |L1.3830|
000ef6  fb91f1f5          SDIV     r1,r1,r5
000efa  e003              B        |L1.3844|
                  |L1.3836|
;;;1174   	else temp_SL/=1000L;
000efc  f44f7e7a          MOV      lr,#0x3e8
000f00  fb91f1fe          SDIV     r1,r1,lr
                  |L1.3844|
;;;1175   	#ifdef UKU_TELECORE2015
;;;1176   	temp_SL/=2L;
;;;1177   	//temp_SL=-temp_SL;
;;;1178   	#endif
;;;1179   	bat[0]._Ib=(signed short)temp_SL;
000f04  8121              STRH     r1,[r4,#8]
;;;1180   
;;;1181   	temp_SL=(signed long)ad7705_buff_[1];
000f06  f8bc1002          LDRH     r1,[r12,#2]  ; ad7705_buff_
;;;1182   	temp_SL-=(signed long)Kibat0[1];
000f0a  f8bbc002          LDRH     r12,[r11,#2]  ; Kibat0
000f0e  eba10c0c          SUB      r12,r1,r12
;;;1183   	temp_SL*=(signed long)Kibat1[1];
000f12  f9b21002          LDRSH    r1,[r2,#2]  ; Kibat1
000f16  fb01f10c          MUL      r1,r1,r12
;;;1184   	if((AUSW_MAIN==24120)||(AUSW_MAIN==24210))temp_SL/=300L;
000f1a  4298              CMP      r0,r3
000f1c  d005              BEQ      |L1.3882|
000f1e  f5a042bc          SUB      r2,r0,#0x5e00
000f22  e000              B        |L1.3878|
                  |L1.3876|
000f24  e017              B        |L1.3926|
                  |L1.3878|
000f26  3a92              SUBS     r2,r2,#0x92
000f28  d104              BNE      |L1.3892|
                  |L1.3882|
000f2a  f44f7096          MOV      r0,#0x12c
000f2e  fb91f0f0          SDIV     r0,r1,r0
000f32  e00e              B        |L1.3922|
                  |L1.3892|
;;;1185   	else if((AUSW_MAIN==22010)||(AUSW_MAIN==22035)||(AUSW_MAIN==22033))temp_SL/=2000L;
000f34  f5a042aa          SUB      r2,r0,#0x5500
000f38  3afa              SUBS     r2,r2,#0xfa
000f3a  d003              BEQ      |L1.3908|
000f3c  4548              CMP      r0,r9
000f3e  d001              BEQ      |L1.3908|
000f40  42b0              CMP      r0,r6
000f42  d102              BNE      |L1.3914|
                  |L1.3908|
000f44  fb91f0f5          SDIV     r0,r1,r5
000f48  e003              B        |L1.3922|
                  |L1.3914|
;;;1186   	else temp_SL/=1000L;
000f4a  f44f707a          MOV      r0,#0x3e8
000f4e  fb91f0f0          SDIV     r0,r1,r0
                  |L1.3922|
;;;1187   	bat[1]._Ib=(signed short)temp_SL;
000f52  f8a40054          STRH     r0,[r4,#0x54]
                  |L1.3926|
;;;1188   	}
;;;1189   
;;;1190   
;;;1191   
;;;1192   
;;;1193   
;;;1194   // 
;;;1195   
;;;1196   #ifdef UKU_KONTUR
;;;1197   if((adc_buff_[6]>800)&&(adc_buff_[6]<3800))bat[0]._nd=0;
;;;1198   else bat[0]._nd=1;
;;;1199   temp_SL=(signed long)adc_buff_[6];
;;;1200   temp_SL*=Ktbat[0];
;;;1201   temp_SL/=20000L;
;;;1202   temp_SL-=273L;
;;;1203   bat[0]._Tb=(signed short)temp_SL;
;;;1204   #else
;;;1205   if((adc_buff_[6]>800)&&(adc_buff_[6]<3800))bat[0]._nd=0;
000f56  f9ba000c          LDRSH    r0,[r10,#0xc]  ; adc_buff_
000f5a  46d6              MOV      lr,r10
000f5c  4684              MOV      r12,r0
000f5e  f2a03021          SUB      r0,r0,#0x321
000f62  f64031b7          MOV      r1,#0xbb7
000f66  2300              MOVS     r3,#0
;;;1206   else bat[0]._nd=1;
000f68  f04f0a01          MOV      r10,#1
000f6c  9000              STR      r0,[sp,#0]            ;1205
000f6e  4288              CMP      r0,r1                 ;1205
000f70  d201              BCS      |L1.3958|
000f72  7323              STRB     r3,[r4,#0xc]          ;1205
000f74  e001              B        |L1.3962|
                  |L1.3958|
000f76  f884a00c          STRB     r10,[r4,#0xc]
                  |L1.3962|
;;;1207   temp_SL=(signed long)adc_buff_[6];
;;;1208   temp_SL*=Ktbat[0];
000f7a  48a2              LDR      r0,|L1.4612|
000f7c  f9b02000          LDRSH    r2,[r0,#0]  ; Ktbat
000f80  fb02f20c          MUL      r2,r2,r12
;;;1209   temp_SL/=20000L;
000f84  f6446020          MOV      r0,#0x4e20
000f88  fb92f2f0          SDIV     r2,r2,r0
;;;1210   temp_SL-=273L;
000f8c  f2a21211          SUB      r2,r2,#0x111
;;;1211   bat[0]._Tb=(signed short)temp_SL;
000f90  8162              STRH     r2,[r4,#0xa]
;;;1212   #endif
;;;1213   
;;;1214   #ifdef UKU_KONTUR
;;;1215   if((adc_buff_[7]>800)&&(adc_buff_[7]<3800))bat[1]._nd=0;
;;;1216   else bat[1]._nd=1;
;;;1217   temp_SL=(signed long)adc_buff_[7];
;;;1218   temp_SL*=Ktbat[1];
;;;1219   temp_SL/=20000L;
;;;1220   temp_SL-=273L;
;;;1221   bat[1]._Tb=(signed short)temp_SL;
;;;1222   #else
;;;1223   if((adc_buff_[7]>800)&&(adc_buff_[7]<3800))bat[1]._nd=0;
000f92  f9be200e          LDRSH    r2,[lr,#0xe]  ; adc_buff_
000f96  f64031b7          MOV      r1,#0xbb7
000f9a  f2a23b21          SUB      r11,r2,#0x321
000f9e  458b              CMP      r11,r1
000fa0  d202              BCS      |L1.4008|
000fa2  f8843058          STRB     r3,[r4,#0x58]
000fa6  e001              B        |L1.4012|
                  |L1.4008|
;;;1224   else bat[1]._nd=1;
000fa8  f884a058          STRB     r10,[r4,#0x58]
                  |L1.4012|
;;;1225   temp_SL=(signed long)adc_buff_[7];
;;;1226   temp_SL*=Ktbat[1];
000fac  4995              LDR      r1,|L1.4612|
000fae  f9b11002          LDRSH    r1,[r1,#2]  ; Ktbat
000fb2  4351              MULS     r1,r2,r1
;;;1227   temp_SL/=20000L;
000fb4  f6446020          MOV      r0,#0x4e20
000fb8  fb91f0f0          SDIV     r0,r1,r0
;;;1228   temp_SL-=273L;
000fbc  f2a01011          SUB      r0,r0,#0x111
;;;1229   bat[1]._Tb=(signed short)temp_SL;
000fc0  498a              LDR      r1,|L1.4588|
000fc2  f8a10056          STRH     r0,[r1,#0x56]
;;;1230   #endif
;;;1231   
;;;1232   #ifdef UKU_6U
;;;1233   
;;;1234   if(NUMMAKB==2)
;;;1235   	{
;;;1236   	if(makb[0]._cnt<5)
;;;1237   		{
;;;1238   		if(makb[0]._T_nd[0]==0)
;;;1239   			{
;;;1240   			bat[0]._Tb=makb[0]._T[0];
;;;1241   			bat[0]._nd=0;
;;;1242   			}
;;;1243   		}
;;;1244   
;;;1245   	if(makb[1]._cnt<5)
;;;1246   		{
;;;1247   		if(makb[1]._T_nd[0]==0)
;;;1248   			{
;;;1249   			bat[1]._Tb=makb[1]._T[0];
;;;1250   			bat[1]._nd=0;
;;;1251   			}
;;;1252   		}
;;;1253   
;;;1254   	}
;;;1255   else if(NUMMAKB==4)
;;;1256   	{
;;;1257   	signed short temp_t;
;;;1258   	temp_t=-20;
;;;1259   	if(makb[0]._cnt<5)
;;;1260   		{
;;;1261   		if(makb[0]._T_nd[0]==0)
;;;1262   			{
;;;1263   			temp_t=makb[0]._T[0];
;;;1264   			bat[0]._nd=0;
;;;1265   			}
;;;1266   		}
;;;1267   	if(makb[1]._cnt<5)
;;;1268   		{
;;;1269   		if(makb[1]._T_nd[0]==0)
;;;1270   			{
;;;1271   			if(temp_t<makb[1]._T[0])
;;;1272   				{
;;;1273   				bat[0]._nd=0;
;;;1274   				temp_t=makb[1]._T[0];
;;;1275   				}
;;;1276   			}
;;;1277   		}
;;;1278   	if(temp_t!=-20)bat[0]._Tb = temp_t;
;;;1279   
;;;1280    	temp_t=-20;
;;;1281   	if(makb[2]._cnt<5)
;;;1282   		{
;;;1283   		if(makb[2]._T_nd[0]==0)
;;;1284   			{
;;;1285   			temp_t=makb[2]._T[0];
;;;1286   			bat[1]._nd=0;
;;;1287   			}
;;;1288   		}
;;;1289   	if(makb[3]._cnt<5)
;;;1290   		{
;;;1291   		if(makb[3]._T_nd[0]==0)
;;;1292   			{
;;;1293   			if(temp_t<makb[3]._T[0])
;;;1294   				{
;;;1295   				bat[1]._nd=0;
;;;1296   				temp_t=makb[3]._T[0];
;;;1297   				}
;;;1298   			}
;;;1299   		}
;;;1300   	if(temp_t!=-20)bat[1]._Tb = temp_t;
;;;1301   	}
;;;1302   
;;;1303   #endif
;;;1304   
;;;1305   
;;;1306   // 
;;;1307   temp_SL=(signed long)adc_buff_[2];
000fc6  f9be1004          LDRSH    r1,[lr,#4]  ; adc_buff_
;;;1308   temp_SL*=Kuload;
000fca  488f              LDR      r0,|L1.4616|
000fcc  f9b00000          LDRSH    r0,[r0,#0]  ; Kuload
000fd0  fb01f000          MUL      r0,r1,r0
;;;1309   temp_SL/=2000L;
000fd4  f44f62fa          MOV      r2,#0x7d0
000fd8  fb90f0f2          SDIV     r0,r0,r2
;;;1310   load_U=(signed short)temp_SL;
000fdc  4c8b              LDR      r4,|L1.4620|
000fde  8020              STRH     r0,[r4,#0]
;;;1311   
;;;1312   #ifdef UKU_220 
;;;1313   // 
;;;1314   temp_SL=(signed long)adc_buff_[2];
;;;1315   temp_SL*=Kuload;
;;;1316   temp_SL/=350L;
;;;1317   load_U=(signed short)temp_SL;
;;;1318   #endif
;;;1319   
;;;1320   #ifdef UKU_220_V2 
;;;1321   // 
;;;1322   temp_SL=(signed long)adc_buff_[2];
;;;1323   temp_SL*=Kuload;
;;;1324   temp_SL/=350L;
;;;1325   load_U=(signed short)temp_SL;
;;;1326   #endif
;;;1327   
;;;1328   #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;1329   // 
;;;1330   temp_SL=(signed long)adc_buff_[1];
000fe0  f9be2002          LDRSH    r2,[lr,#2]  ; adc_buff_
;;;1331   temp_SL*=Kuout;
000fe4  488a              LDR      r0,|L1.4624|
000fe6  f9b00000          LDRSH    r0,[r0,#0]  ; Kuout
000fea  fb02f200          MUL      r2,r2,r0
;;;1332   if(AUSW_MAIN==22010)temp_SL/=400L;
000fee  4884              LDR      r0,|L1.4608|
000ff0  f24555fa          MOV      r5,#0x55fa
000ff4  8800              LDRH     r0,[r0,#0]  ; AUSW_MAIN
000ff6  42a8              CMP      r0,r5
000ff8  d104              BNE      |L1.4100|
000ffa  f44f75c8          MOV      r5,#0x190
000ffe  fb92f2f5          SDIV     r2,r2,r5
001002  e001              B        |L1.4104|
                  |L1.4100|
;;;1333   else temp_SL/=500L;
001004  fb92f2f8          SDIV     r2,r2,r8
                  |L1.4104|
;;;1334   out_U=(signed short)temp_SL;
001008  fa0ffb82          SXTH     r11,r2
00100c  4a81              LDR      r2,|L1.4628|
00100e  f8a2b000          STRH     r11,[r2,#0]
;;;1335   load_U=out_U;
001012  f8a4b000          STRH     r11,[r4,#0]
;;;1336   
;;;1337   // 
;;;1338   temp_SL=(signed long)adc_buff_[2];
;;;1339   temp_SL*=Kubps;
001016  4a80              LDR      r2,|L1.4632|
001018  f9b22000          LDRSH    r2,[r2,#0]  ; Kubps
00101c  fb01f102          MUL      r1,r1,r2
;;;1340   if(AUSW_MAIN==22010)temp_SL/=400L;
001020  d104              BNE      |L1.4140|
001022  f44f72c8          MOV      r2,#0x190
001026  fb91f1f2          SDIV     r1,r1,r2
00102a  e001              B        |L1.4144|
                  |L1.4140|
;;;1341   else temp_SL/=500L;
00102c  fb91f1f8          SDIV     r1,r1,r8
                  |L1.4144|
;;;1342   bps_U=(signed short)temp_SL;
001030  4d7a              LDR      r5,|L1.4636|
001032  b209              SXTH     r1,r1
001034  8029              STRH     r1,[r5,#0]
;;;1343   
;;;1344   if(bps_U<100)
001036  2964              CMP      r1,#0x64
001038  da18              BGE      |L1.4204|
;;;1345   	{
;;;1346   	char i;
;;;1347   	for(i=0;i<NUMIST;i++)
00103a  f04f0100          MOV      r1,#0
00103e  4a78              LDR      r2,|L1.4640|
001040  f8dfe1e0          LDR      lr,|L1.4644|
001044  f9b28000          LDRSH    r8,[r2,#0]
001048  e00e              B        |L1.4200|
                  |L1.4170|
;;;1348   		{
;;;1349   		if(bps[i]._Uin>bps_U)bps_U=bps[i]._Uin;
00104a  ebc102c1          RSB      r2,r1,r1,LSL #3
00104e  eb021201          ADD      r2,r2,r1,LSL #4
001052  eb0e0282          ADD      r2,lr,r2,LSL #2
001056  f9b54000          LDRSH    r4,[r5,#0]  ; bps_U
00105a  6a12              LDR      r2,[r2,#0x20]
00105c  42a2              CMP      r2,r4
00105e  dd00              BLE      |L1.4194|
001060  802a              STRH     r2,[r5,#0]
                  |L1.4194|
001062  f1010101          ADD      r1,r1,#1              ;1347
001066  b2c9              UXTB     r1,r1                 ;1347
                  |L1.4200|
001068  4541              CMP      r1,r8                 ;1347
00106a  dbee              BLT      |L1.4170|
                  |L1.4204|
;;;1350   		}
;;;1351   	}
;;;1352   
;;;1353   //  
;;;1354   temp_SL=0;
00106c  f04f0500          MOV      r5,#0
;;;1355   for (i=0;i<NUMIST;i++)
001070  4629              MOV      r1,r5
001072  4a6b              LDR      r2,|L1.4640|
001074  4c6b              LDR      r4,|L1.4644|
001076  f9b22000          LDRSH    r2,[r2,#0]            ;1347
00107a  e00b              B        |L1.4244|
                  |L1.4220|
;;;1356   	{
;;;1357   	temp_SL+=((signed long)bps[i]._Ii);
00107c  ebc108c1          RSB      r8,r1,r1,LSL #3
001080  eb081801          ADD      r8,r8,r1,LSL #4
001084  eb040888          ADD      r8,r4,r8,LSL #2
001088  f8d88024          LDR      r8,[r8,#0x24]
00108c  4445              ADD      r5,r5,r8
00108e  f1010101          ADD      r1,r1,#1              ;1355
001092  b2c9              UXTB     r1,r1                 ;1355
                  |L1.4244|
001094  4291              CMP      r1,r2                 ;1355
001096  dbf1              BLT      |L1.4220|
;;;1358   	}
;;;1359   bps_I=(signed short)temp_SL;
001098  4963              LDR      r1,|L1.4648|
00109a  800d              STRH     r5,[r1,#0]
;;;1360   
;;;1361   
;;;1362   #endif
;;;1363   
;;;1364   
;;;1365   #ifdef UKU_KONTUR
;;;1366   //   1(  )
;;;1367   if((adc_buff_[5]>800)&&(adc_buff_[5]<3800))ND_EXT[0]=0;
;;;1368   else ND_EXT[0]=1;
;;;1369   temp_SL=(signed long)adc_buff_[5];
;;;1370   temp_SL*=Ktext[0];
;;;1371   temp_SL/=20000L;
;;;1372   temp_SL-=273L;
;;;1373   t_ext[0]=(signed short)temp_SL;
;;;1374   #else 
;;;1375   //   1(  )
;;;1376   if((adc_buff_[5]>800)&&(adc_buff_[5]<3800))ND_EXT[0]=0;
00109c  4951              LDR      r1,|L1.4580|
00109e  f8df818c          LDR      r8,|L1.4652|
0010a2  f9b1500a          LDRSH    r5,[r1,#0xa]  ; adc_buff_
0010a6  f64031b7          MOV      r1,#0xbb7
0010aa  f2a53e21          SUB      lr,r5,#0x321
0010ae  458e              CMP      lr,r1
0010b0  d202              BCS      |L1.4280|
0010b2  f8c83000          STR      r3,[r8,#0]  ; ND_EXT
0010b6  e001              B        |L1.4284|
                  |L1.4280|
;;;1377   else ND_EXT[0]=1;
0010b8  f8c8a000          STR      r10,[r8,#0]  ; ND_EXT
                  |L1.4284|
;;;1378   temp_SL=(signed long)adc_buff_[5];
;;;1379   temp_SL*=Ktext[0];
0010bc  495c              LDR      r1,|L1.4656|
0010be  f9b11000          LDRSH    r1,[r1,#0]  ; Ktext
0010c2  434d              MULS     r5,r1,r5
;;;1380   temp_SL/=20000L;
0010c4  f6446e20          MOV      lr,#0x4e20
0010c8  fb95f5fe          SDIV     r5,r5,lr
;;;1381   temp_SL-=273L;
0010cc  f2a51511          SUB      r5,r5,#0x111
;;;1382   t_ext[0]=(signed short)temp_SL;
0010d0  f8dfe160          LDR      lr,|L1.4660|
0010d4  f8ae5000          STRH     r5,[lr,#0]
;;;1383   #endif
;;;1384   
;;;1385   #ifdef UKU_220
;;;1386   
;;;1387   //   2(  )
;;;1388   if((adc_buff_[3]>800)&&(adc_buff_[3]<3800))ND_EXT[1]=0;
;;;1389   else ND_EXT[1]=1;
;;;1390   temp_SL=(signed long)adc_buff_[3];
;;;1391   temp_SL*=Ktext[1];
;;;1392   temp_SL/=20000L;
;;;1393   temp_SL-=273L;
;;;1394   t_ext[1]=(signed short)temp_SL;
;;;1395   
;;;1396   //   3(  MSAN)
;;;1397   if((adc_buff_[10]>800)&&(adc_buff_[10]<3800))ND_EXT[2]=0;
;;;1398   else ND_EXT[2]=1;
;;;1399   temp_SL=(signed long)adc_buff_[10];
;;;1400   temp_SL*=Ktext[2];
;;;1401   temp_SL/=20000L;
;;;1402   temp_SL-=273L;
;;;1403   t_ext[2]=(signed short)temp_SL;
;;;1404   
;;;1405   #else
;;;1406   
;;;1407   
;;;1408   #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;1409   
;;;1410   //   
;;;1411   if((adc_buff_[6]>800)&&(adc_buff_[6]<3800))ND_EXT[0]=0;
0010d8  9d00              LDR      r5,[sp,#0]
0010da  f6403eb7          MOV      lr,#0xbb7
0010de  4575              CMP      r5,lr
0010e0  d202              BCS      |L1.4328|
0010e2  f8c83000          STR      r3,[r8,#0]  ; ND_EXT
0010e6  e001              B        |L1.4332|
                  |L1.4328|
;;;1412   else ND_EXT[0]=1;
0010e8  f8c8a000          STR      r10,[r8,#0]  ; ND_EXT
                  |L1.4332|
;;;1413   temp_SL=(signed long)adc_buff_[6];
;;;1414   temp_SL*=Ktext[0];
0010ec  fb01f10c          MUL      r1,r1,r12
;;;1415   temp_SL/=20000L;
0010f0  f6446520          MOV      r5,#0x4e20
0010f4  fb91f1f5          SDIV     r1,r1,r5
;;;1416   temp_SL-=273L;
0010f8  f2a11111          SUB      r1,r1,#0x111
;;;1417   t_ext[0]=(signed short)temp_SL;
0010fc  4d4d              LDR      r5,|L1.4660|
0010fe  8029              STRH     r1,[r5,#0]
;;;1418   
;;;1419   #else
;;;1420   
;;;1421   
;;;1422   
;;;1423   //   2(  )
;;;1424   if((adc_buff_[10]>800)&&(adc_buff_[10]<3800))ND_EXT[1]=0;
;;;1425   else ND_EXT[1]=1;
;;;1426   temp_SL=(signed long)adc_buff_[10];
;;;1427   temp_SL*=Ktext[1];
;;;1428   temp_SL/=20000L;
;;;1429   temp_SL-=273L;
;;;1430   t_ext[1]=(signed short)temp_SL;
;;;1431   
;;;1432   //   3(  MSAN)
;;;1433   if((adc_buff_[3]>800)&&(adc_buff_[3]<3800))ND_EXT[2]=0;
;;;1434   else ND_EXT[2]=1;
;;;1435   temp_SL=(signed long)adc_buff_[3];
;;;1436   temp_SL*=Ktext[2];
;;;1437   temp_SL/=20000L;
;;;1438   temp_SL-=273L;
;;;1439   t_ext[2]=(signed short)temp_SL;
;;;1440   
;;;1441   #endif
;;;1442   #endif
;;;1443   
;;;1444   #ifdef UKU_220_V2
;;;1445   
;;;1446   //   2(  )
;;;1447   if((adc_buff_[3]>800)&&(adc_buff_[3]<3800))ND_EXT[1]=0;
;;;1448   else ND_EXT[1]=1;
;;;1449   temp_SL=(signed long)adc_buff_[3];
;;;1450   temp_SL*=Ktext[1];
;;;1451   temp_SL/=20000L;
;;;1452   temp_SL-=273L;
;;;1453   t_ext[1]=(signed short)temp_SL;
;;;1454   
;;;1455   //   3(  MSAN)
;;;1456   if((adc_buff_[10]>800)&&(adc_buff_[10]<3800))ND_EXT[2]=0;
;;;1457   else ND_EXT[2]=1;
;;;1458   temp_SL=(signed long)adc_buff_[10];
;;;1459   temp_SL*=Ktext[2];
;;;1460   temp_SL/=20000L;
;;;1461   temp_SL-=273L;
;;;1462   t_ext[2]=(signed short)temp_SL;
;;;1463   
;;;1464   #else
;;;1465   
;;;1466   #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;1467   // 
;;;1468   if(bps[8]._device==dIBAT_METR)
001100  f89412e0          LDRB     r1,[r4,#0x2e0]  ; bps
;;;1469   	{
;;;1470   	ibat_metr_buff_[0]=((signed long)bps[8]._buff[0])+(((signed long)bps[8]._buff[1])<<8);
;;;1471   	ibat_metr_buff_[1]=((signed long)bps[8]._buff[2])+(((signed long)bps[8]._buff[3])<<8);
;;;1472   	bIBAT_SMKLBR=((signed short)bps[8]._buff[4])+(((signed short)bps[8]._buff[5])<<8);
;;;1473   
;;;1474   	if(!bIBAT_SMKLBR)
;;;1475   		{
;;;1476   		signed long temp_SL;
;;;1477   		temp_SL=(signed long)ibat_metr_buff_[0];
;;;1478   		temp_SL-=(signed long)ibat_metr_buff_[1];
;;;1479   		temp_SL*=(signed long)Kibat1[0];
;;;1480   		if((AUSW_MAIN==22010)||(AUSW_MAIN==22011)||(AUSW_MAIN==22035)||(AUSW_MAIN==22033)||(AUSW_MAIN==22063)||(AUSW_MAIN==22023)||(AUSW_MAIN==22043))temp_SL/=2000L;
;;;1481   	
;;;1482   		Ib_ips_termokompensat =(signed short)temp_SL;
001104  f8dfc130          LDR      r12,|L1.4664|
001108  2909              CMP      r1,#9                 ;1468
00110a  d13d              BNE      |L1.4488|
00110c  f89412e6          LDRB     r1,[r4,#0x2e6]        ;1470  ; bps
001110  f89452e7          LDRB     r5,[r4,#0x2e7]        ;1470  ; bps
001114  f8dfe124          LDR      lr,|L1.4668|
001118  eb012105          ADD      r1,r1,r5,LSL #8       ;1470
00111c  f8ce1000          STR      r1,[lr,#0]            ;1470  ; ibat_metr_buff_
001120  f89452e8          LDRB     r5,[r4,#0x2e8]        ;1471  ; bps
001124  f894a2e9          LDRB     r10,[r4,#0x2e9]       ;1471  ; bps
001128  eb05250a          ADD      r5,r5,r10,LSL #8      ;1471
00112c  f8ce5004          STR      r5,[lr,#4]            ;1471  ; ibat_metr_buff_
001130  f894a2ea          LDRB     r10,[r4,#0x2ea]       ;1472  ; bps
001134  f894e2eb          LDRB     lr,[r4,#0x2eb]        ;1472  ; bps
001138  eb0a2a0e          ADD      r10,r10,lr,LSL #8     ;1472
00113c  f8dfe100          LDR      lr,|L1.4672|
001140  fa0ffa8a          SXTH     r10,r10               ;1472
001144  f8aea000          STRH     r10,[lr,#0]           ;1472
001148  f1ba0f00          CMP      r10,#0                ;1474
00114c  d11c              BNE      |L1.4488|
00114e  eba10505          SUB      r5,r1,r5              ;1478
001152  492a              LDR      r1,|L1.4604|
001154  f9b11000          LDRSH    r1,[r1,#0]            ;1479  ; Kibat1
001158  fb01f105          MUL      r1,r1,r5              ;1479
00115c  f5a045aa          SUB      r5,r0,#0x5500         ;1480
001160  3dfa              SUBS     r5,r5,#0xfa           ;1480
001162  d00b              BEQ      |L1.4476|
001164  1e6d              SUBS     r5,r5,#1              ;1480
001166  d009              BEQ      |L1.4476|
001168  4548              CMP      r0,r9                 ;1480
00116a  d007              BEQ      |L1.4476|
00116c  42b0              CMP      r0,r6                 ;1480
00116e  d005              BEQ      |L1.4476|
001170  3d34              SUBS     r5,r5,#0x34           ;1480
001172  d003              BEQ      |L1.4476|
001174  3528              ADDS     r5,r5,#0x28           ;1480
001176  d001              BEQ      |L1.4476|
001178  3d14              SUBS     r5,r5,#0x14           ;1480
00117a  d103              BNE      |L1.4484|
                  |L1.4476|
00117c  f44f65fa          MOV      r5,#0x7d0             ;1480
001180  fb91f1f5          SDIV     r1,r1,r5              ;1480
                  |L1.4484|
001184  f8ac1000          STRH     r1,[r12,#0]
                  |L1.4488|
;;;1483   		}
;;;1484   	}
;;;1485   
;;;1486   bat[0]._Ub=load_U;
001188  4d18              LDR      r5,|L1.4588|
00118a  f8a5b002          STRH     r11,[r5,#2]
;;;1487   if(AUSW_MAIN==22018) Ib_ips_termokompensat=bat[0]._Ib;
00118e  f5a041ac          SUB      r1,r0,#0x5600
001192  3902              SUBS     r1,#2
001194  d103              BNE      |L1.4510|
001196  8928              LDRH     r0,[r5,#8]  ; bat
001198  f8ac0000          STRH     r0,[r12,#0]
00119c  e002              B        |L1.4516|
                  |L1.4510|
;;;1488   else bat[0]._Ib=Ib_ips_termokompensat;
00119e  f8bc0000          LDRH     r0,[r12,#0]  ; Ib_ips_termokompensat
0011a2  8128              STRH     r0,[r5,#8]
                  |L1.4516|
;;;1489   
;;;1490   #endif
;;;1491   #endif
;;;1492   
;;;1493   
;;;1494   #ifdef UKU_TELECORE2015
;;;1495   
;;;1496   //   1
;;;1497   if((adc_buff_[7]>800)&&(adc_buff_[7]<3800))ND_EXT[0]=0;
;;;1498   else ND_EXT[0]=1;
;;;1499   temp_SL=(signed long)adc_buff_[7];
;;;1500   temp_SL*=Ktext[0];
;;;1501   temp_SL/=20000L;
;;;1502   temp_SL-=273L;
;;;1503   t_ext[0]=(signed short)temp_SL;
;;;1504   
;;;1505   
;;;1506   //   2
;;;1507   if((adc_buff_[6]>800)&&(adc_buff_[6]<3800))ND_EXT[1]=0;
;;;1508   else ND_EXT[1]=1;
;;;1509   temp_SL=(signed long)adc_buff_[6];
;;;1510   temp_SL*=Ktext[1];
;;;1511   temp_SL/=20000L;
;;;1512   temp_SL-=273L;
;;;1513   t_ext[1]=(signed short)temp_SL;
;;;1514   
;;;1515   #endif
;;;1516   
;;;1517   // 
;;;1518   temp_SL=(signed long)adc_buff_ext_[0];
0011a4  4e27              LDR      r6,|L1.4676|
0011a6  8831              LDRH     r1,[r6,#0]  ; adc_buff_ext_
;;;1519   temp_SL*=Kunet_ext[0];
0011a8  f8df909c          LDR      r9,|L1.4680|
0011ac  f9b90000          LDRSH    r0,[r9,#0]  ; Kunet_ext
0011b0  4348              MULS     r0,r1,r0
;;;1520   temp_SL/=4000L;
0011b2  f44f6a7a          MOV      r10,#0xfa0
0011b6  fb90f0fa          SDIV     r0,r0,r10
;;;1521   Uvv[0]=(signed short)temp_SL;
0011ba  4924              LDR      r1,|L1.4684|
0011bc  b280              UXTH     r0,r0
0011be  8008              STRH     r0,[r1,#0]
;;;1522   if(Uvv[0]<100) Uvv0=Uvv[0];
0011c0  f8dfe08c          LDR      lr,|L1.4688|
0011c4  2864              CMP      r0,#0x64
0011c6  d245              BCS      |L1.4692|
0011c8  f8ae0000          STRH     r0,[lr,#0]
0011cc  e046              B        |L1.4700|
0011ce  0000              DCW      0x0000
                  |L1.4560|
                          DCD      net_U
                  |L1.4564|
                          DCD      Kunet
                  |L1.4568|
                          DCD      ||area_number.21||
                  |L1.4572|
                          DCD      net_F
                  |L1.4576|
                          DCD      net_F3
                  |L1.4580|
                          DCD      ||.bss||+0x400
                  |L1.4584|
                          DCD      Kubat
                  |L1.4588|
                          DCD      bat
                  |L1.4592|
                          DCD      Kubatm
                  |L1.4596|
                          DCD      ad7705_buff_
                  |L1.4600|
                          DCD      Kibat0
                  |L1.4604|
                          DCD      Kibat1
                  |L1.4608|
                          DCD      AUSW_MAIN
                  |L1.4612|
                          DCD      Ktbat
                  |L1.4616|
                          DCD      Kuload
                  |L1.4620|
                          DCD      load_U
                  |L1.4624|
                          DCD      Kuout
                  |L1.4628|
                          DCD      out_U
                  |L1.4632|
                          DCD      Kubps
                  |L1.4636|
                          DCD      bps_U
                  |L1.4640|
                          DCD      NUMIST
                  |L1.4644|
                          DCD      bps
                  |L1.4648|
                          DCD      bps_I
                  |L1.4652|
                          DCD      ND_EXT
                  |L1.4656|
                          DCD      Ktext
                  |L1.4660|
                          DCD      t_ext
                  |L1.4664|
                          DCD      Ib_ips_termokompensat
                  |L1.4668|
                          DCD      ibat_metr_buff_
                  |L1.4672|
                          DCD      bIBAT_SMKLBR
                  |L1.4676|
                          DCD      adc_buff_ext_
                  |L1.4680|
                          DCD      Kunet_ext
                  |L1.4684|
                          DCD      Uvv
                  |L1.4688|
                          DCD      Uvv0
                  |L1.4692|
;;;1523   else Uvv0=net_U;
001254  48fd              LDR      r0,|L1.5708|
001256  8800              LDRH     r0,[r0,#0]  ; net_U
001258  f8ae0000          STRH     r0,[lr,#0]
                  |L1.4700|
;;;1524   
;;;1525   // 
;;;1526   temp_SL=(signed long)adc_buff_ext_[1];
00125c  8876              LDRH     r6,[r6,#2]  ; adc_buff_ext_
;;;1527   temp_SL*=Kunet_ext[1];
00125e  f9b90002          LDRSH    r0,[r9,#2]  ; Kunet_ext
001262  4370              MULS     r0,r6,r0
;;;1528   temp_SL/=4000L;
001264  fb90f0fa          SDIV     r0,r0,r10
;;;1529   Uvv[1]=(signed short)temp_SL;
001268  8048              STRH     r0,[r1,#2]
;;;1530   
;;;1531   
;;;1532   //  
;;;1533   temp_SL=(signed long)eb2_data_short[0];
00126a  49f9              LDR      r1,|L1.5712|
00126c  f9b10000          LDRSH    r0,[r1,#0]  ; eb2_data_short
;;;1534   temp_SL*=Kvv_eb2[0];
001270  f8df93e0          LDR      r9,|L1.5716|
001274  f9b96000          LDRSH    r6,[r9,#0]  ; Kvv_eb2
001278  4346              MULS     r6,r0,r6
;;;1535   temp_SL/=6000L;
00127a  f2417070          MOV      r0,#0x1770
00127e  fb96faf0          SDIV     r10,r6,r0
;;;1536   Uvv_eb2[0]=(signed short)temp_SL;
001282  4ef5              LDR      r6,|L1.5720|
001284  f8a6a000          STRH     r10,[r6,#0]
;;;1537   
;;;1538   temp_SL=(signed long)eb2_data_short[1];
001288  f9b1e002          LDRSH    lr,[r1,#2]  ; eb2_data_short
;;;1539   temp_SL*=Kvv_eb2[1];
00128c  f9b9a002          LDRSH    r10,[r9,#2]  ; Kvv_eb2
001290  fb0afa0e          MUL      r10,r10,lr
;;;1540   temp_SL/=6000L;
001294  fb9afaf0          SDIV     r10,r10,r0
;;;1541   Uvv_eb2[1]=(signed short)temp_SL;
001298  f8a6a002          STRH     r10,[r6,#2]
;;;1542   
;;;1543   temp_SL=(signed long)eb2_data_short[2];
00129c  f9b1a004          LDRSH    r10,[r1,#4]  ; eb2_data_short
;;;1544   temp_SL*=Kvv_eb2[2];
0012a0  f9b99004          LDRSH    r9,[r9,#4]  ; Kvv_eb2
0012a4  fb09f90a          MUL      r9,r9,r10
;;;1545   temp_SL/=6000L;
0012a8  fb99f9f0          SDIV     r9,r9,r0
;;;1546   Uvv_eb2[2]=(signed short)temp_SL;
0012ac  f8a69004          STRH     r9,[r6,#4]
;;;1547   
;;;1548   //  
;;;1549   temp_SL=(signed long)eb2_data_short[3];
0012b0  f9b1a006          LDRSH    r10,[r1,#6]  ; eb2_data_short
;;;1550   temp_SL*=Kpes_eb2[0];
0012b4  4ee9              LDR      r6,|L1.5724|
0012b6  f9b69000          LDRSH    r9,[r6,#0]  ; Kpes_eb2
0012ba  fb09f90a          MUL      r9,r9,r10
;;;1551   temp_SL/=6000L;
0012be  fb99faf0          SDIV     r10,r9,r0
;;;1552   Upes_eb2[0]=(signed short)temp_SL;
0012c2  f8df939c          LDR      r9,|L1.5728|
0012c6  f8a9a000          STRH     r10,[r9,#0]
;;;1553   
;;;1554   temp_SL=(signed long)eb2_data_short[4];
0012ca  f9b1e008          LDRSH    lr,[r1,#8]  ; eb2_data_short
;;;1555   temp_SL*=Kpes_eb2[1];
0012ce  f9b6a002          LDRSH    r10,[r6,#2]  ; Kpes_eb2
0012d2  fb0afa0e          MUL      r10,r10,lr
;;;1556   temp_SL/=6000L;
0012d6  fb9afaf0          SDIV     r10,r10,r0
;;;1557   Upes_eb2[1]=(signed short)temp_SL;
0012da  f8a9a002          STRH     r10,[r9,#2]
;;;1558   
;;;1559   temp_SL=(signed long)eb2_data_short[5];
0012de  f9b1100a          LDRSH    r1,[r1,#0xa]  ; eb2_data_short
;;;1560   temp_SL*=Kpes_eb2[2];
0012e2  f9b66004          LDRSH    r6,[r6,#4]  ; Kpes_eb2
0012e6  fb06f601          MUL      r6,r6,r1
;;;1561   temp_SL/=6000L;
0012ea  fb96f0f0          SDIV     r0,r6,r0
;;;1562   Upes_eb2[2]=(signed short)temp_SL;
0012ee  f8a90004          STRH     r0,[r9,#4]
;;;1563   
;;;1564   //  
;;;1565   
;;;1566   ibt._T[0]=t_ext[1]+273;
0012f2  48dc              LDR      r0,|L1.5732|
0012f4  4edc              LDR      r6,|L1.5736|
0012f6  8841              LDRH     r1,[r0,#2]  ; t_ext
0012f8  f2011111          ADD      r1,r1,#0x111
0012fc  fa0ff981          SXTH     r9,r1
001300  f8a69000          STRH     r9,[r6,#0]
;;;1567   ibt._T[1]=t_ext[2]+273;
001304  8880              LDRH     r0,[r0,#4]  ; t_ext
001306  f2001011          ADD      r0,r0,#0x111
00130a  fa0ffa80          SXTH     r10,r0
00130e  f8a6a002          STRH     r10,[r6,#2]
;;;1568   
;;;1569   ibt._nd[0]=ND_EXT[1];
001312  f8d80004          LDR      r0,[r8,#4]  ; ND_EXT
001316  b2c1              UXTB     r1,r0
001318  7231              STRB     r1,[r6,#8]
;;;1570   ibt._nd[1]=ND_EXT[2];
00131a  f8d80008          LDR      r0,[r8,#8]  ; ND_EXT
00131e  b2c0              UXTB     r0,r0
001320  7270              STRB     r0,[r6,#9]
;;;1571   
;;;1572   #ifndef UKU_TELECORE2015
;;;1573   if((ibt._nd[0]==0) &&  (ibt._nd[1]==0))
;;;1574   	{
;;;1575   	t_box=((ibt._T[0]+ibt._T[1])/2)-273;
001322  4ed2              LDR      r6,|L1.5740|
001324  b901              CBNZ     r1,|L1.4904|
001326  b110              CBZ      r0,|L1.4910|
                  |L1.4904|
;;;1576   	}
;;;1577   else if((ibt._nd[0]==1) &&  (ibt._nd[1]==0))
001328  2901              CMP      r1,#1
00132a  d00a              BEQ      |L1.4930|
00132c  e00a              B        |L1.4932|
                  |L1.4910|
00132e  eb09000a          ADD      r0,r9,r10             ;1575
001332  eb0070d0          ADD      r0,r0,r0,LSR #31      ;1575
001336  f46f7188          MVN      r1,#0x110             ;1575
00133a  eb010060          ADD      r0,r1,r0,ASR #1       ;1575
00133e  8030              STRH     r0,[r6,#0]            ;1575
001340  e01e              B        |L1.4992|
                  |L1.4930|
001342  b108              CBZ      r0,|L1.4936|
                  |L1.4932|
;;;1578   	{
;;;1579   	t_box=ibt._T[1]-273;
;;;1580   	}
;;;1581   else if((ibt._nd[0]==0) &&  (ibt._nd[1]==1))
001344  b129              CBZ      r1,|L1.4946|
001346  e006              B        |L1.4950|
                  |L1.4936|
001348  f2aa1a11          SUB      r10,r10,#0x111        ;1579
00134c  f8a6a000          STRH     r10,[r6,#0]           ;1579
001350  e016              B        |L1.4992|
                  |L1.4946|
001352  2801              CMP      r0,#1
001354  d002              BEQ      |L1.4956|
                  |L1.4950|
;;;1582   	{
;;;1583   	t_box=ibt._T[0]-273;
;;;1584   	}
;;;1585   else if((ibt._nd[0]==1) &&  (ibt._nd[1]==1))
001356  2901              CMP      r1,#1
001358  d005              BEQ      |L1.4966|
00135a  e011              B        |L1.4992|
                  |L1.4956|
00135c  f2a91911          SUB      r9,r9,#0x111          ;1583
001360  f8a69000          STRH     r9,[r6,#0]            ;1583
001364  e00c              B        |L1.4992|
                  |L1.4966|
001366  2801              CMP      r0,#1
001368  d10a              BNE      |L1.4992|
;;;1586   	{
;;;1587   	if(t_ext_can_nd<5)t_box= t_ext_can;
00136a  48c1              LDR      r0,|L1.5744|
00136c  7800              LDRB     r0,[r0,#0]  ; t_ext_can_nd
00136e  2805              CMP      r0,#5
001370  d203              BCS      |L1.4986|
001372  48c0              LDR      r0,|L1.5748|
001374  8800              LDRH     r0,[r0,#0]  ; t_ext_can
001376  8030              STRH     r0,[r6,#0]
001378  e002              B        |L1.4992|
                  |L1.4986|
;;;1588   	else t_box=20;
00137a  f04f0014          MOV      r0,#0x14
00137e  8030              STRH     r0,[r6,#0]
                  |L1.4992|
;;;1589   	}
;;;1590   #endif
;;;1591   /*
;;;1592   //  
;;;1593   
;;;1594   ibt._T[0]=bat[0]._Tb+273;
;;;1595   ibt._T[1]=bat[1]._Tb+273;
;;;1596   ibt._T[2]=t_ext[1]+273;
;;;1597   ibt._T[3]=t_ext[2]+273;
;;;1598   
;;;1599   ibt._nd[0]=bat[0]._nd;
;;;1600   ibt._nd[1]=bat[1]._nd;
;;;1601   ibt._nd[2]=ND_EXT[1];
;;;1602   ibt._nd[3]=ND_EXT[2];
;;;1603   
;;;1604   ibt._avg1=0;
;;;1605   ibt._avg_cnt=4;
;;;1606   
;;;1607   if(ibt._nd[0]==0)
;;;1608   	{
;;;1609   	ibt._avg1+=ibt._T[0];
;;;1610   	}
;;;1611   else 
;;;1612   	{
;;;1613   	ibt._avg_cnt--;
;;;1614   	}
;;;1615   
;;;1616   if(ibt._nd[1]==0)
;;;1617   	{
;;;1618   	ibt._avg1+=ibt._T[1];
;;;1619   	}
;;;1620   else 
;;;1621   	{
;;;1622   	ibt._avg_cnt--;
;;;1623   	}
;;;1624   
;;;1625   if(ibt._nd[2]==0)
;;;1626   	{
;;;1627   	ibt._avg1+=ibt._T[2];
;;;1628   	}
;;;1629   else 
;;;1630   	{
;;;1631   	ibt._avg_cnt--;
;;;1632   	}
;;;1633   
;;;1634   if(ibt._nd[3]==0)
;;;1635   	{
;;;1636   	ibt._avg1+=ibt._T[3];
;;;1637   	}
;;;1638   else 
;;;1639   	{
;;;1640   	ibt._avg_cnt--;
;;;1641   	}
;;;1642   
;;;1643   if(ibt._avg_cnt==0)
;;;1644   	{
;;;1645   	}
;;;1646   else
;;;1647   	{
;;;1648   	ibt._avg1/=ibt._avg_cnt;
;;;1649   	}
;;;1650   
;;;1651   
;;;1652   if(ibt._nd[0]!=0)
;;;1653   	{
;;;1654   	ibt._T_dispers[0]=0;
;;;1655   	}
;;;1656   else 
;;;1657   	{
;;;1658   	ibt._T_dispers[0]=abs(ibt._T[0]-ibt._avg1);
;;;1659   	}
;;;1660   
;;;1661   if(ibt._nd[1]!=0)
;;;1662   	{
;;;1663   	ibt._T_dispers[1]=0;
;;;1664   	}
;;;1665   else 
;;;1666   	{
;;;1667   	ibt._T_dispers[1]=abs(ibt._T[1]-ibt._avg1);
;;;1668   	}
;;;1669   
;;;1670   if(ibt._nd[2]!=0)
;;;1671   	{
;;;1672   	ibt._T_dispers[2]=0;
;;;1673   	}
;;;1674   else 
;;;1675   	{
;;;1676   	ibt._T_dispers[2]=abs(ibt._T[2]-ibt._avg1);
;;;1677   	}
;;;1678   
;;;1679   if(ibt._nd[3]!=0)
;;;1680   	{
;;;1681   	ibt._T_dispers[3]=0;
;;;1682   	}
;;;1683   else 
;;;1684   	{
;;;1685   	ibt._T_dispers[3]=abs(ibt._T[3]-ibt._avg1);
;;;1686   	}
;;;1687   
;;;1688   if(	ibt._nd[0]&&
;;;1689   	ibt._nd[1]&&
;;;1690   	ibt._nd[2]&&
;;;1691   	ibt._nd[3]
;;;1692   	)
;;;1693   	{
;;;1694   	t_box=(bps[0]._Ti);
;;;1695   	}
;;;1696   
;;;1697   else if(	ibt._nd[0]||
;;;1698   	ibt._nd[1]||
;;;1699   	ibt._nd[2]||
;;;1700   	ibt._nd[3]
;;;1701   	)
;;;1702   	{
;;;1703   	t_box=(ibt._avg1-273);
;;;1704   	}
;;;1705   else 
;;;1706   	{
;;;1707   	ibt._max_dispers_num=0;
;;;1708   	ibt._max_dispers=ibt._T_dispers[0];
;;;1709   
;;;1710   	if(ibt._T_dispers[1]>ibt._max_dispers)
;;;1711   		{
;;;1712   		ibt._max_dispers_num=1;
;;;1713   		ibt._max_dispers=ibt._T_dispers[1];
;;;1714   		}
;;;1715   	if(ibt._T_dispers[2]>ibt._max_dispers)
;;;1716   		{
;;;1717   		ibt._max_dispers_num=2;
;;;1718   		ibt._max_dispers=ibt._T_dispers[2];
;;;1719   		}
;;;1720   	if(ibt._T_dispers[3]>ibt._max_dispers)
;;;1721   		{
;;;1722   		ibt._max_dispers_num=3;
;;;1723   		ibt._max_dispers=ibt._T_dispers[3];
;;;1724   		}
;;;1725   
;;;1726   	ibt._avg2=0;
;;;1727   
;;;1728   	if(ibt._max_dispers_num!=0)
;;;1729   		{
;;;1730   		ibt._avg2+=ibt._T[0];
;;;1731   		}
;;;1732   	if(ibt._max_dispers_num!=1)
;;;1733   		{
;;;1734   		ibt._avg2+=ibt._T[1];
;;;1735   		}
;;;1736   	if(ibt._max_dispers_num!=2)
;;;1737   		{
;;;1738   		ibt._avg2+=ibt._T[2];
;;;1739   		}
;;;1740   	if(ibt._max_dispers_num!=3)
;;;1741   		{
;;;1742   		ibt._avg2+=ibt._T[3];
;;;1743   		}
;;;1744   
;;;1745   	t_box=(ibt._avg2/3)-273;
;;;1746   
;;;1747   	}*/
;;;1748   
;;;1749   
;;;1750   //*********************************************
;;;1751   
;;;1752   #ifndef TELECORE
;;;1753   if((BAT_IS_ON[0]==bisON)&&(bat[0]._Ub>200)) Ibmax=bat[0]._Ib;
001380  48bd              LDR      r0,|L1.5752|
001382  7801              LDRB     r1,[r0,#0]  ; BAT_IS_ON
001384  2955              CMP      r1,#0x55
001386  d104              BNE      |L1.5010|
001388  f1bb0fc8          CMP      r11,#0xc8
00138c  dd01              BLE      |L1.5010|
00138e  8929              LDRH     r1,[r5,#8]  ; bat
001390  86b9              STRH     r1,[r7,#0x34]
                  |L1.5010|
;;;1754   if((BAT_IS_ON[1]==bisON)&&(bat[1]._Ub>200)&&(bat[1]._Ib>bat[0]._Ib)) Ibmax=bat[1]._Ib;
001392  7840              LDRB     r0,[r0,#1]  ; BAT_IS_ON
001394  2855              CMP      r0,#0x55
001396  d10a              BNE      |L1.5038|
001398  f9b5004e          LDRSH    r0,[r5,#0x4e]  ; bat
00139c  28c8              CMP      r0,#0xc8
00139e  dd06              BLE      |L1.5038|
0013a0  f9b50054          LDRSH    r0,[r5,#0x54]  ; bat
0013a4  f9b51008          LDRSH    r1,[r5,#8]  ; bat
0013a8  4288              CMP      r0,r1
0013aa  dd00              BLE      |L1.5038|
0013ac  86b8              STRH     r0,[r7,#0x34]
                  |L1.5038|
;;;1755   #endif
;;;1756   
;;;1757   #ifdef TELECORE
;;;1758   Ibmax=0;
;;;1759   /*
;;;1760   if((NUMBAT_TELECORE>0)&&(lakb[0]._communicationFullErrorStat==0)&&(lakb[0]._ch_curr/10>Ibmax))Ibmax=lakb[0]._ch_curr/10;
;;;1761   if((NUMBAT_TELECORE>1)&&(lakb[1]._communicationFullErrorStat==0)&&(lakb[1]._ch_curr/10>Ibmax))Ibmax=lakb[1]._ch_curr/10;
;;;1762   if((NUMBAT_TELECORE>2)&&(lakb[2]._communicationFullErrorStat==0)&&(lakb[2]._ch_curr/10>Ibmax))Ibmax=lakb[2]._ch_curr/10;
;;;1763   */
;;;1764   if((NUMBAT_TELECORE>0)&&(bat[0]._Ib/10>Ibmax))Ibmax=bat[0]._Ib/10;
;;;1765   if((NUMBAT_TELECORE>1)&&(bat[1]._Ib/10>Ibmax))Ibmax=bat[1]._Ib/10;
;;;1766   //if((BAT_IS_ON[0]==bisON)&&(bat[0]._Ub>200)) Ibmax=bat[0]._Ib/1;
;;;1767   //if((BAT_IS_ON[1]==bisON)&&(bat[1]._Ub>200)&&(bat[1]._Ib>bat[0]._Ib)) Ibmax=bat[1]._Ib;
;;;1768   #endif
;;;1769   //Ibmax=bat[0]._Ib;
;;;1770   //if((AUSW_MAIN==22063)||(AUSW_MAIN==22023)||(AUSW_MAIN==22043))Ibmax=Ib_ips_termokompensat;
;;;1771   #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;1772   Ibmax=Ib_ips_termokompensat;
0013ae  f8bc0000          LDRH     r0,[r12,#0]  ; Ib_ips_termokompensat
0013b2  86b8              STRH     r0,[r7,#0x34]
;;;1773   #endif
;;;1774   for(i=0;i<NUMIST;i++)
0013b4  f04f0100          MOV      r1,#0
0013b8  e02f              B        |L1.5146|
                  |L1.5050|
;;;1775   	{
;;;1776   	if(bps[i]._cnt<25)
0013ba  ebc100c1          RSB      r0,r1,r1,LSL #3
0013be  eb001001          ADD      r0,r0,r1,LSL #4
0013c2  eb040080          ADD      r0,r4,r0,LSL #2
0013c6  78c6              LDRB     r6,[r0,#3]
0013c8  2e19              CMP      r6,#0x19
0013ca  d21c              BCS      |L1.5126|
;;;1777        	{
;;;1778        	bps[i]._Ii=bps[i]._buff[0]+(bps[i]._buff[1]*256);
0013cc  7986              LDRB     r6,[r0,#6]
0013ce  79c7              LDRB     r7,[r0,#7]
0013d0  eb062607          ADD      r6,r6,r7,LSL #8
0013d4  6246              STR      r6,[r0,#0x24]
;;;1779        	bps[i]._Uin=bps[i]._buff[2]+(bps[i]._buff[3]*256);
0013d6  7a06              LDRB     r6,[r0,#8]
0013d8  7a47              LDRB     r7,[r0,#9]
0013da  eb062607          ADD      r6,r6,r7,LSL #8
0013de  6206              STR      r6,[r0,#0x20]
;;;1780        	bps[i]._Uii=bps[i]._buff[4]+(bps[i]._buff[5]*256);
0013e0  7a86              LDRB     r6,[r0,#0xa]
0013e2  7ac7              LDRB     r7,[r0,#0xb]
0013e4  eb062607          ADD      r6,r6,r7,LSL #8
0013e8  61c6              STR      r6,[r0,#0x1c]
;;;1781        	bps[i]._Ti=(signed)(bps[i]._buff[6]);
0013ea  7b06              LDRB     r6,[r0,#0xc]
0013ec  6286              STR      r6,[r0,#0x28]
;;;1782        	bps[i]._adr_ee=bps[i]._buff[7];
0013ee  7b46              LDRB     r6,[r0,#0xd]
0013f0  f8806052          STRB     r6,[r0,#0x52]
;;;1783        	bps[i]._flags_tm=bps[i]._buff[8];
0013f4  7b86              LDRB     r6,[r0,#0xe]
0013f6  f8806042          STRB     r6,[r0,#0x42]
;;;1784   	     bps[i]._rotor=bps[i]._buff[10]+(bps[i]._buff[11]*256);    
0013fa  7c06              LDRB     r6,[r0,#0x10]
0013fc  7c47              LDRB     r7,[r0,#0x11]
0013fe  eb062607          ADD      r6,r6,r7,LSL #8
001402  64c6              STR      r6,[r0,#0x4c]
001404  e006              B        |L1.5140|
                  |L1.5126|
;;;1785        	} 
;;;1786   	else 
;;;1787        	{
;;;1788        	bps[i]._Uii=0; 
001406  61c3              STR      r3,[r0,#0x1c]
;;;1789        	bps[i]._Ii=0;
001408  6243              STR      r3,[r0,#0x24]
;;;1790        	bps[i]._Uin=0;
00140a  6203              STR      r3,[r0,#0x20]
;;;1791        	bps[i]._Ti=0;
00140c  6283              STR      r3,[r0,#0x28]
;;;1792        	bps[i]._flags_tm=0; 
00140e  f8803042          STRB     r3,[r0,#0x42]
;;;1793   	     bps[i]._rotor=0;    
001412  64c3              STR      r3,[r0,#0x4c]
                  |L1.5140|
001414  f1010101          ADD      r1,r1,#1              ;1774
001418  b2c9              UXTB     r1,r1                 ;1774
                  |L1.5146|
00141a  4291              CMP      r1,r2                 ;1774
00141c  dbcd              BLT      |L1.5050|
;;;1794        	}
;;;1795        
;;;1796        }
;;;1797   
;;;1798   load_I=0;
00141e  4e97              LDR      r6,|L1.5756|
;;;1799   #ifdef TELECORE
;;;1800   
;;;1801   /*for(i=0;i<NUMBAT_TELECORE;i++)
;;;1802   	{
;;;1803   	load_I-=lakb[i]._ch_curr/10;
;;;1804   	}*/
;;;1805   load_I=-(bat[0]._Ib/10)-(bat[1]._Ib/10);
;;;1806   #else
;;;1807   load_I=-(bat[0]._Ib/10)-(bat[1]._Ib/10);
001420  f9b51008          LDRSH    r1,[r5,#8]  ; bat
001424  f04f000a          MOV      r0,#0xa
001428  fb91f1f0          SDIV     r1,r1,r0
00142c  f9b55054          LDRSH    r5,[r5,#0x54]  ; bat
001430  fb95f0f0          SDIV     r0,r5,r0
001434  4408              ADD      r0,r0,r1
001436  f1c00000          RSB      r0,r0,#0
00143a  b207              SXTH     r7,r0
00143c  8037              STRH     r7,[r6,#0]
;;;1808   #endif
;;;1809   Isumm=0;
00143e  4d90              LDR      r5,|L1.5760|
001440  802b              STRH     r3,[r5,#0]
;;;1810   
;;;1811   for(i=0;i<NUMIST;i++)
001442  f04f0000          MOV      r0,#0
001446  e012              B        |L1.5230|
                  |L1.5192|
;;;1812        {
;;;1813        if(bps[i]._cnt<5)Isumm+=bps[i]._Ii;
001448  ebc001c0          RSB      r1,r0,r0,LSL #3
00144c  eb011100          ADD      r1,r1,r0,LSL #4
001450  eb040181          ADD      r1,r4,r1,LSL #2
001454  f891c003          LDRB     r12,[r1,#3]
001458  f1bc0f05          CMP      r12,#5
00145c  d204              BCS      |L1.5224|
00145e  6a49              LDR      r1,[r1,#0x24]
001460  f8b5c000          LDRH     r12,[r5,#0]  ; Isumm
001464  4461              ADD      r1,r1,r12
001466  8029              STRH     r1,[r5,#0]
                  |L1.5224|
001468  f1000001          ADD      r0,r0,#1              ;1811
00146c  b2c0              UXTB     r0,r0                 ;1811
                  |L1.5230|
00146e  4290              CMP      r0,r2                 ;1811
001470  dbea              BLT      |L1.5192|
;;;1814        }  
;;;1815        
;;;1816   load_I=load_I+Isumm;
001472  8828              LDRH     r0,[r5,#0]  ; Isumm
001474  4438              ADD      r0,r0,r7
001476  b200              SXTH     r0,r0
001478  8030              STRH     r0,[r6,#0]
;;;1817   if(load_I<0)load_I=0;
00147a  2800              CMP      r0,#0
00147c  da00              BGE      |L1.5248|
00147e  8033              STRH     r3,[r6,#0]
                  |L1.5248|
;;;1818   
;;;1819   #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;1820   load_I=0;
001480  8033              STRH     r3,[r6,#0]
;;;1821   
;;;1822   Isumm=0;
001482  802b              STRH     r3,[r5,#0]
;;;1823   
;;;1824   for(i=0;i<NUMIST;i++)
001484  f04f0000          MOV      r0,#0
001488  e00f              B        |L1.5290|
                  |L1.5258|
;;;1825        {
;;;1826        if(bps[i]._cnt<5)Isumm+=bps[i]._Ii;
00148a  ebc001c0          RSB      r1,r0,r0,LSL #3
00148e  eb011100          ADD      r1,r1,r0,LSL #4
001492  eb040181          ADD      r1,r4,r1,LSL #2
001496  78cf              LDRB     r7,[r1,#3]
001498  2f05              CMP      r7,#5
00149a  d203              BCS      |L1.5284|
00149c  6a49              LDR      r1,[r1,#0x24]
00149e  882f              LDRH     r7,[r5,#0]  ; Isumm
0014a0  4439              ADD      r1,r1,r7
0014a2  8029              STRH     r1,[r5,#0]
                  |L1.5284|
0014a4  f1000001          ADD      r0,r0,#1              ;1824
0014a8  b2c0              UXTB     r0,r0                 ;1824
                  |L1.5290|
0014aa  4290              CMP      r0,r2                 ;1824
0014ac  dbed              BLT      |L1.5258|
;;;1827        }  
;;;1828        
;;;1829   load_I=load_I+Isumm;
0014ae  8829              LDRH     r1,[r5,#0]  ; Isumm
0014b0  eb030001          ADD      r0,r3,r1
0014b4  b200              SXTH     r0,r0
0014b6  8030              STRH     r0,[r6,#0]
;;;1830   if(load_I<0)load_I=0;
0014b8  2800              CMP      r0,#0
0014ba  da00              BGE      |L1.5310|
0014bc  8033              STRH     r3,[r6,#0]
                  |L1.5310|
;;;1831   
;;;1832   #endif
;;;1833   
;;;1834   
;;;1835   
;;;1836   #ifdef UKU_GLONASS
;;;1837   inv[0]._Uio=6;
;;;1838   if (NUMINV)
;;;1839   	{
;;;1840   	for(i=0;i<NUMINV;i++)
;;;1841   		{
;;;1842   		if(bps[i+first_inv_slot]._cnt<25)
;;;1843        		{
;;;1844        		inv[i]._Ii=bps[i+first_inv_slot]._buff[0]+(bps[i+first_inv_slot]._buff[1]*256);
;;;1845        		inv[i]._Uin=bps[i+first_inv_slot]._buff[2]+(bps[i+first_inv_slot]._buff[3]*256);
;;;1846        		inv[i]._Uio=bps[i+first_inv_slot]._buff[4]+(bps[i+first_inv_slot]._buff[5]*256);
;;;1847        		inv[i]._Ti=(signed)(bps[i+first_inv_slot]._buff[6]);
;;;1848        		inv[i]._flags_tm=bps[i+first_inv_slot]._buff[8];
;;;1849   	    	//	inv[i]._rotor=bps[i+first_inv_slot]._buff[10]+(bps[i+first_inv_slot]._buff[11]*256);
;;;1850   			inv[i]._cnt=0;    
;;;1851        		} 
;;;1852   		else 
;;;1853        		{
;;;1854        		inv[i]._Uio=0; 
;;;1855        		inv[i]._Ii=0;
;;;1856        		inv[i]._Uin=0;
;;;1857        		inv[i]._Ti=0;
;;;1858        		inv[i]._flags_tm=0; 
;;;1859   //	     	inv[i]._rotor0;
;;;1860   			inv[i]._cnt=25;    
;;;1861        		}
;;;1862        	}
;;;1863      	}
;;;1864   #endif
;;;1865   
;;;1866   #ifndef UKU_GLONASS
;;;1867   if (NUMINV)
0014be  4871              LDR      r0,|L1.5764|
0014c0  f9b05000          LDRSH    r5,[r0,#0]  ; NUMINV
0014c4  2d00              CMP      r5,#0
0014c6  d066              BEQ      |L1.5526|
;;;1868   	{
;;;1869   	for(i=0;i<NUMINV;i++)
0014c8  f04f0200          MOV      r2,#0
;;;1870   		{
;;;1871   		if(bps[i+20]._cnt<25)
;;;1872        		{
;;;1873        		inv[i]._Ii=bps[i+20]._buff[0]+(bps[i+20]._buff[1]*256);
0014cc  4e6e              LDR      r6,|L1.5768|
0014ce  e060              B        |L1.5522|
                  |L1.5328|
0014d0  f1020014          ADD      r0,r2,#0x14           ;1871
0014d4  ebc001c0          RSB      r1,r0,r0,LSL #3       ;1871
0014d8  eb011000          ADD      r0,r1,r0,LSL #4       ;1871
0014dc  eb040080          ADD      r0,r4,r0,LSL #2       ;1871
0014e0  78c1              LDRB     r1,[r0,#3]            ;1871
0014e2  2919              CMP      r1,#0x19              ;1871
0014e4  d239              BCS      |L1.5466|
0014e6  7981              LDRB     r1,[r0,#6]
0014e8  79c7              LDRB     r7,[r0,#7]
0014ea  eb012707          ADD      r7,r1,r7,LSL #8
0014ee  eb020142          ADD      r1,r2,r2,LSL #1
0014f2  eb061141          ADD      r1,r6,r1,LSL #5
0014f6  61cf              STR      r7,[r1,#0x1c]
;;;1874        		inv[i]._Pio=bps[i+20]._buff[2]+(bps[i+20]._buff[3]*256);
0014f8  7a07              LDRB     r7,[r0,#8]
0014fa  f890c009          LDRB     r12,[r0,#9]
0014fe  eb07270c          ADD      r7,r7,r12,LSL #8
001502  62cf              STR      r7,[r1,#0x2c]
;;;1875        		inv[i]._Uio=bps[i+20]._buff[4]+(bps[i+20]._buff[5]*256);
001504  7a87              LDRB     r7,[r0,#0xa]
001506  f890c00b          LDRB     r12,[r0,#0xb]
00150a  eb07270c          ADD      r7,r7,r12,LSL #8
00150e  618f              STR      r7,[r1,#0x18]
;;;1876        		inv[i]._Ti=(signed)(bps[i+20]._buff[6]);
001510  7b07              LDRB     r7,[r0,#0xc]
001512  620f              STR      r7,[r1,#0x20]
;;;1877        		inv[i]._flags_tm=bps[i+20]._buff[7];
001514  7b47              LDRB     r7,[r0,#0xd]
001516  f8817046          STRB     r7,[r1,#0x46]
;;;1878        		inv[i]._Uin=bps[i+20]._buff[8]+(bps[i+20]._buff[9]*256);
00151a  7b87              LDRB     r7,[r0,#0xe]
00151c  f890c00f          LDRB     r12,[r0,#0xf]
001520  eb07270c          ADD      r7,r7,r12,LSL #8
001524  628f              STR      r7,[r1,#0x28]
;;;1879        		inv[i]._Uil=bps[i+20]._buff[10]+(bps[i+20]._buff[11]*256);
001526  7c07              LDRB     r7,[r0,#0x10]
001528  f890c011          LDRB     r12,[r0,#0x11]
00152c  eb07270c          ADD      r7,r7,r12,LSL #8
001530  624f              STR      r7,[r1,#0x24]
;;;1880   			inv[i]._cnt=0;
001532  708b              STRB     r3,[r1,#2]
;;;1881   			inv[i]._Uoutmin=bps[i+20]._buff[12]; 
001534  7c87              LDRB     r7,[r0,#0x12]
001536  f8817059          STRB     r7,[r1,#0x59]
;;;1882   			inv[i]._Uoutmax=bps[i+20]._buff[13]; 
00153a  7cc7              LDRB     r7,[r0,#0x13]
00153c  f881705a          STRB     r7,[r1,#0x5a]
;;;1883   			inv[i]._Pnom=bps[i+20]._buff[14]; 
001540  7d07              LDRB     r7,[r0,#0x14]
001542  f8817058          STRB     r7,[r1,#0x58]
;;;1884   			inv[i]._net_contr_en=bps[i+20]._buff[15];
001546  7d47              LDRB     r7,[r0,#0x15]
001548  f881705b          STRB     r7,[r1,#0x5b]
;;;1885   			inv[i]._pwm_en=bps[i+20]._buff[16];  
00154c  7d87              LDRB     r7,[r0,#0x16]
00154e  f881705c          STRB     r7,[r1,#0x5c]
;;;1886   			inv[i]._phase_mode=bps[i+20]._buff[17];  
001552  7dc0              LDRB     r0,[r0,#0x17]
001554  f881005d          STRB     r0,[r1,#0x5d]
001558  e018              B        |L1.5516|
                  |L1.5466|
;;;1887        		} 
;;;1888   		else 
;;;1889        		{
;;;1890         		inv[i]._Ii=0;
00155a  eb020042          ADD      r0,r2,r2,LSL #1
00155e  eb061040          ADD      r0,r6,r0,LSL #5
001562  61c3              STR      r3,[r0,#0x1c]
;;;1891   			inv[i]._Pio=0;
001564  62c3              STR      r3,[r0,#0x2c]
;;;1892   			inv[i]._Uio=0;
001566  6183              STR      r3,[r0,#0x18]
;;;1893        		inv[i]._Ti=0;
001568  6203              STR      r3,[r0,#0x20]
;;;1894        		inv[i]._flags_tm=0; 
00156a  f8803046          STRB     r3,[r0,#0x46]
;;;1895        		inv[i]._Uil=0;
00156e  6243              STR      r3,[r0,#0x24]
;;;1896        		inv[i]._Uin=0;
001570  6283              STR      r3,[r0,#0x28]
;;;1897   			inv[i]._cnt=25; 
001572  f04f0119          MOV      r1,#0x19
001576  7081              STRB     r1,[r0,#2]
;;;1898   			inv[i]._Uoutmin=0; 
001578  f8803059          STRB     r3,[r0,#0x59]
;;;1899   			inv[i]._Uoutmax=0; 
00157c  f880305a          STRB     r3,[r0,#0x5a]
;;;1900   			inv[i]._Pnom=0; 
001580  f8803058          STRB     r3,[r0,#0x58]
;;;1901   			inv[i]._net_contr_en=0;
001584  f880305b          STRB     r3,[r0,#0x5b]
;;;1902   			inv[i]._pwm_en=0;   
001588  f880305c          STRB     r3,[r0,#0x5c]
                  |L1.5516|
00158c  f1020201          ADD      r2,r2,#1              ;1869
001590  b2d2              UXTB     r2,r2                 ;1869
                  |L1.5522|
001592  42aa              CMP      r2,r5                 ;1869
001594  db9c              BLT      |L1.5328|
                  |L1.5526|
;;;1903   			   
;;;1904        		}
;;;1905        	}
;;;1906      	}
;;;1907   #endif
;;;1908   
;;;1909   #ifdef GLADKOV
;;;1910   inv[0]._Ii=bps[4]._buff[0]+(bps[4]._buff[1]*256);
;;;1911   inv[0]._Pio=bps[4]._buff[2]+(bps[4]._buff[3]*256);
;;;1912   inv[0]._Uio=bps[4]._buff[4]+(bps[4]._buff[5]*256);
;;;1913   inv[0]._Ti=(signed)(bps[4]._buff[6]);
;;;1914   inv[0]._flags_tm=bps[4]._buff[7];
;;;1915   inv[0]._Uin=bps[4]._buff[8]+(bps[4]._buff[9]*256);
;;;1916   inv[0]._Uil=bps[4]._buff[10]+(bps[4]._buff[11]*256);
;;;1917   inv[0]._cnt=0;    
;;;1918   
;;;1919   inv[1]._Ii=bps[21]._buff[0]+(bps[21]._buff[1]*256);
;;;1920   inv[1]._Pio=bps[21]._buff[2]+(bps[21]._buff[3]*256);
;;;1921   inv[1]._Uio=bps[21]._buff[4]+(bps[21]._buff[5]*256);
;;;1922   inv[1]._Ti=(signed)(bps[21]._buff[6]);
;;;1923   inv[1]._flags_tm=bps[21]._buff[7];
;;;1924   inv[1]._Uin=bps[21]._buff[8]+(bps[21]._buff[9]*256);
;;;1925   inv[1]._Uil=bps[21]._buff[10]+(bps[21]._buff[11]*256);
;;;1926   inv[1]._cnt=0;    
;;;1927   #endif
;;;1928   
;;;1929   /*
;;;1930   if((BAT_IS_ON[0]==bisON)&&(BAT_TYPE==1))
;;;1931   	{
;;;1932   	lakb[0]._battCommState=0;
;;;1933   	if(lakb[0]._cnt>10)lakb[0]._battCommState=2;
;;;1934   	else if(lakb[0]._bRS485ERR==1)lakb[0]._battCommState=1;
;;;1935   	
;;;1936   	if(lakb[0]._battCommState==0)
;;;1937   		{	
;;;1938   		bat[0]._Ub=(signed short)((lakb[0]._tot_bat_volt+5)/10);
;;;1939   		bat[0]._Ib=(signed short)lakb[0]._ch_curr;
;;;1940   		if(lakb[0]._dsch_curr) bat[0]._Ib=(signed short) (-lakb[0]._dsch_curr);
;;;1941   		bat[0]._Tb=(signed short)lakb[0]._max_cell_temp;
;;;1942   		}
;;;1943   	}
;;;1944   */
;;;1945   
;;;1946   #ifdef UKU_TELECORE2015
;;;1947   
;;;1948   	if(BAT_TYPE==2)
;;;1949   		{
;;;1950   		lakb[0]._ch_curr/*temp_SS*/=((ascii2halFhex(liBatteryInBuff[113]))<<12)+
;;;1951   					 		((ascii2halFhex(liBatteryInBuff[114]))<<8)+
;;;1952   							((ascii2halFhex(liBatteryInBuff[115]))<<4)+
;;;1953   							((ascii2halFhex(liBatteryInBuff[116])));
;;;1954   		
;;;1955   		/*if(temp_SS&0x8000)		lakb[0]._ch_curr=~temp_SS;
;;;1956   		else 				lakb[0]._ch_curr=temp_SS;*/
;;;1957   	
;;;1958   		lakb[0]._tot_bat_volt=	(unsigned short)(((ascii2halFhex(liBatteryInBuff[117]))<<12)+
;;;1959   							((ascii2halFhex(liBatteryInBuff[118]))<<8)+
;;;1960   							((ascii2halFhex(liBatteryInBuff[119]))<<4)+
;;;1961   							((ascii2halFhex(liBatteryInBuff[120]))))/100;
;;;1962   	
;;;1963   		lakb[0]._max_cell_temp= 	(((ascii2halFhex(liBatteryInBuff[93]))<<12)+
;;;1964   							((ascii2halFhex(liBatteryInBuff[94]))<<8)+
;;;1965   							((ascii2halFhex(liBatteryInBuff[95]))<<4)+
;;;1966   							((ascii2halFhex(liBatteryInBuff[96]))))/10-273;
;;;1967   	
;;;1968   		lakb[0]._s_o_c_abs=		(unsigned short)((ascii2halFhex(liBatteryInBuff[121]))<<12)+
;;;1969   							((ascii2halFhex(liBatteryInBuff[122]))<<8)+
;;;1970   							((ascii2halFhex(liBatteryInBuff[123]))<<4)+
;;;1971   							((ascii2halFhex(liBatteryInBuff[124])));
;;;1972   	
;;;1973   		lakb[0]._rat_cap=		(unsigned short)((ascii2halFhex(liBatteryInBuff[127]))<<12)+
;;;1974   							((ascii2halFhex(liBatteryInBuff[128]))<<8)+
;;;1975   							((ascii2halFhex(liBatteryInBuff[129]))<<4)+
;;;1976   							((ascii2halFhex(liBatteryInBuff[130])));
;;;1977   	
;;;1978   		lakb[0]._s_o_c=		lakb[0]._s_o_c_abs/(lakb[0]._rat_cap/100);
;;;1979   	
;;;1980   	
;;;1981   	/*	lakb[0]._rat_cap= (lakb_damp[i][13]*256)+ lakb_damp[i][14];
;;;1982   		lakb[0]._max_cell_volt= (lakb_damp[i][0]*256)+ lakb_damp[i][1];
;;;1983   		lakb[0]._min_cell_volt= (lakb_damp[i][2]*256)+ lakb_damp[i][3];
;;;1984   		lakb[0]._max_cell_temp= lakb_damp[i][4];
;;;1985   		lakb[0]._min_cell_temp= lakb_damp[i][5];
;;;1986   		lakb[0]._tot_bat_volt= (lakb_damp[i][6]*256)+ lakb_damp[i][7];
;;;1987   		lakb[0]._ch_curr= (lakb_damp[i][8]*256)+ lakb_damp[i][8];
;;;1988   		lakb[0]._dsch_curr= (lakb_damp[i][10]*256)+ lakb_damp[i][11];
;;;1989   		lakb[0]._s_o_c= lakb_damp[i][12];
;;;1990   		lakb[0]._r_b_t= lakb_damp[i][15];
;;;1991   		lakb[0]._c_c_l_v= (lakb_damp[i][16]*256)+ lakb_damp[i][17];
;;;1992   		lakb[0]._s_o_h= lakb_damp[i][18];
;;;1993   	
;;;1994   		if(lakb[i]._rat_cap==0)
;;;1995   			{
;;;1996   			if(lakb[i]._isOnCnt)
;;;1997   				{
;;;1998   				lakb[i]._isOnCnt--;
;;;1999   				if(lakb[i]._isOnCnt==0)
;;;2000   					{
;;;2001   					if(lakb[i]._battIsOn!=0) bLAKB_KONF_CH=1;
;;;2002   					}
;;;2003   				}
;;;2004   			}
;;;2005   		else 
;;;2006   			{
;;;2007   			if(lakb[i]._isOnCnt<50)
;;;2008   				{
;;;2009   				lakb[i]._isOnCnt++;
;;;2010   				if(lakb[i]._isOnCnt==50)
;;;2011   					{
;;;2012   					if(lakb[i]._battIsOn!=1) bLAKB_KONF_CH=1;
;;;2013   					}
;;;2014   				}
;;;2015   			}
;;;2016   		gran(&lakb[i]._isOnCnt,0,50);*/
;;;2017   		}
;;;2018   	else if(BAT_TYPE==3)
;;;2019   		{
;;;2020   		//short numOfPacks;
;;;2021   		//short numOfCells, numOfTemperCells, baseOfData;
;;;2022   		
;;;2023   		#ifndef UKU_TELECORE2016
;;;2024   		numOfCells=((ascii2halFhex(liBatteryInBuff[17]))<<4)+((ascii2halFhex(liBatteryInBuff[18])));
;;;2025   		numOfTemperCells=((ascii2halFhex(liBatteryInBuff[17+(numOfCells*4)+2]))<<4)+((ascii2halFhex(liBatteryInBuff[18+(numOfCells*4)+2])));
;;;2026   		numOfPacks=((ascii2halFhex(liBatteryInBuff[15]))<<4)+((ascii2halFhex(liBatteryInBuff[16])));
;;;2027   		if(numOfPacks)numOfPacks-=1;
;;;2028   		if((numOfPacks<0)||(numOfPacks>NUMBAT_TELECORE))numOfPacks=0;
;;;2029   		plazma_numOfCells=numOfCells;
;;;2030   		plazma_numOfTemperCells=numOfTemperCells;
;;;2031   		plazma_numOfPacks=numOfPacks;
;;;2032   
;;;2033   
;;;2034   		baseOfData=16+(numOfCells*4)+2+(numOfTemperCells*4)+2;
;;;2035   
;;;2036   		lakb[numOfPacks]._ch_curr=(signed short)(
;;;2037   							((ascii2halFhex(liBatteryInBuff[1+baseOfData]))<<12)+
;;;2038   							((ascii2halFhex(liBatteryInBuff[2+baseOfData]))<<8)+
;;;2039   							((ascii2halFhex(liBatteryInBuff[3+baseOfData]))<<4)+
;;;2040   							((ascii2halFhex(liBatteryInBuff[4+baseOfData])))
;;;2041   							);	  
;;;2042   
;;;2043   		lakb[numOfPacks]._tot_bat_volt=(signed short)(
;;;2044   							((ascii2halFhex(liBatteryInBuff[1+baseOfData+4]))<<12)+
;;;2045   							((ascii2halFhex(liBatteryInBuff[2+baseOfData+4]))<<8)+
;;;2046   							((ascii2halFhex(liBatteryInBuff[3+baseOfData+4]))<<4)+
;;;2047   							((ascii2halFhex(liBatteryInBuff[4+baseOfData+4])))
;;;2048   							)/10;
;;;2049   
;;;2050   		lakb[numOfPacks]._max_cell_temp=(signed short)(
;;;2051   							((ascii2halFhex(liBatteryInBuff[1+baseOfData-4]))<<12)+
;;;2052   							((ascii2halFhex(liBatteryInBuff[2+baseOfData-4]))<<8)+
;;;2053   							((ascii2halFhex(liBatteryInBuff[3+baseOfData-4]))<<4)+
;;;2054   							((ascii2halFhex(liBatteryInBuff[4+baseOfData-4])))
;;;2055   							)-2730;
;;;2056   
;;;2057   		lakb[numOfPacks]._s_o_c=(signed short)(
;;;2058   							((ascii2halFhex(liBatteryInBuff[1+baseOfData+8]))<<12)+
;;;2059   							((ascii2halFhex(liBatteryInBuff[2+baseOfData+8]))<<8)+
;;;2060   							((ascii2halFhex(liBatteryInBuff[3+baseOfData+8]))<<4)+
;;;2061   							((ascii2halFhex(liBatteryInBuff[4+baseOfData+8])))
;;;2062   							)/10;
;;;2063   
;;;2064   		lakb[numOfPacks]._s_o_h=(signed short)(
;;;2065   							((ascii2halFhex(liBatteryInBuff[1+baseOfData+14]))<<12)+
;;;2066   							((ascii2halFhex(liBatteryInBuff[2+baseOfData+14]))<<8)+
;;;2067   							((ascii2halFhex(liBatteryInBuff[3+baseOfData+14]))<<4)+
;;;2068   							((ascii2halFhex(liBatteryInBuff[4+baseOfData+14])))
;;;2069   							)/10;
;;;2070   		#endif
;;;2071   		
;;;2072   		#ifdef UKU_TELECORE2016
;;;2073   		{
;;;2074   		char i;
;;;2075   		
;;;2076   		for(i=0;i<NUMBAT_TELECORE;i++)
;;;2077   			{
;;;2078   			lakb[i]._s_o_c_percent= (signed short)(((unsigned long)lakb[i]._s_o_c*100UL)/(unsigned long)lakb[i]._s_o_h);
;;;2079   			}
;;;2080   		}
;;;2081   		#endif								  
;;;2082   		}
;;;2083   	
;;;2084   if(sacredSunSilentCnt<3) 
;;;2085   	{
;;;2086       	bat[0]._Ub=lakb[0]._tot_bat_volt;
;;;2087       	bat[0]._Tb=lakb[0]._max_cell_temp;
;;;2088      	//bat[0]._Ib=lakb[0]._ch_curr/10;
;;;2089   	}
;;;2090   else 
;;;2091   	{
;;;2092       	//bat[0]._Ub=0;
;;;2093       	//bat[0]._Tb=0;
;;;2094      	//bat[0]._Ib=0;
;;;2095   	}
;;;2096   
;;;2097   if(BAT_TYPE==1)
;;;2098   	{
;;;2099   	char i;
;;;2100   	for(i=0;i<1;i++)
;;;2101   		{
;;;2102   		lakb[i]._rat_cap= (lakb_damp[i][13]*256)+ lakb_damp[i][14];
;;;2103   		lakb[i]._max_cell_volt= (lakb_damp[i][0]*256)+ lakb_damp[i][1];
;;;2104   		lakb[i]._min_cell_volt= (lakb_damp[i][2]*256)+ lakb_damp[i][3];
;;;2105   		lakb[i]._max_cell_temp= lakb_damp[i][4];
;;;2106   		lakb[i]._min_cell_temp= lakb_damp[i][5];
;;;2107   		lakb[i]._tot_bat_volt= (lakb_damp[i][6]*256)+ lakb_damp[i][7];
;;;2108   		lakb[i]._ch_curr= (lakb_damp[i][8]*256)+ lakb_damp[i][9];
;;;2109   		lakb[i]._dsch_curr= (lakb_damp[i][10]*256)+ lakb_damp[i][11];
;;;2110   		lakb[i]._s_o_c= lakb_damp[i][12];
;;;2111   		lakb[i]._r_b_t= lakb_damp[i][15];
;;;2112   		lakb[i]._c_c_l_v= (lakb_damp[i][16]*256)+ lakb_damp[i][17];
;;;2113   		lakb[i]._s_o_h= lakb_damp[i][18];
;;;2114   		lakb[i]._flags1= lakb_damp[i][34];
;;;2115   		lakb[i]._flags2= lakb_damp[i][35];
;;;2116   		lakb[i]._b_p_ser_num= lakb_damp[i][36];
;;;2117   
;;;2118   /*		if(lakb[i]._rat_cap==0)
;;;2119   			{
;;;2120   			if(lakb[i]._isOnCnt)
;;;2121   				{
;;;2122   				lakb[i]._isOnCnt--;
;;;2123   				if(lakb[i]._isOnCnt==0)
;;;2124   					{
;;;2125   					if(lakb[i]._battIsOn!=0) bLAKB_KONF_CH=1;
;;;2126   					}
;;;2127   				}
;;;2128   			}
;;;2129   		else 
;;;2130   			{
;;;2131   			if(lakb[i]._isOnCnt<50)
;;;2132   				{
;;;2133   				lakb[i]._isOnCnt++;
;;;2134   				if(lakb[i]._isOnCnt==50)
;;;2135   					{
;;;2136   					if(lakb[i]._battIsOn!=1) bLAKB_KONF_CH=1;
;;;2137   					}
;;;2138   				}
;;;2139   			} */
;;;2140   		gran(&lakb[i]._isOnCnt,0,50);
;;;2141   	 	}
;;;2142   
;;;2143   	if(lakb_damp[0][41]==100)
;;;2144   		{
;;;2145   		li_bat._485Error=1;
;;;2146   		}
;;;2147   	if(lakb_damp[0][41]==0)
;;;2148   		{
;;;2149   		//if(bRS485ERR)bLAKB_KONF_CH=1;
;;;2150   		li_bat._485Error=0;
;;;2151   		}
;;;2152   	li_bat._485ErrorCnt=lakb_damp[0][41];
;;;2153   
;;;2154   
;;;2155   	}
;;;2156   
;;;2157   
;;;2158   #endif
;;;2159   
;;;2160   
;;;2161   #ifdef UKU_TELECORE2015
;;;2162   //   
;;;2163   //TODO          
;;;2164   li_bat._batStat=bsOK;
;;;2165   if(BAT_TYPE==1) //COSLIGHT
;;;2166   	{
;;;2167   	if(li_bat._batStat==bsOK)
;;;2168   		{
;;;2169   		li_bat._Ub=lakb[0]._tot_bat_volt/10;
;;;2170   
;;;2171   		if(lakb[0]._ch_curr)li_bat._Ib=lakb[0]._ch_curr/10;
;;;2172   		else if(lakb[0]._dsch_curr) li_bat._Ib=bat[0]._Ib/10;//lakb[0]._dsch_curr/10;
;;;2173   	
;;;2174   		li_bat._ratCap=lakb[0]._rat_cap/100;
;;;2175   		li_bat._soc=lakb[0]._s_o_c;
;;;2176   		li_bat._soh=lakb[0]._s_o_h;
;;;2177   		li_bat._cclv=lakb[0]._c_c_l_v/10;
;;;2178   		li_bat._Tb=lakb[0]._max_cell_temp;
;;;2179   		li_bat._rbt=lakb[0]._r_b_t;
;;;2180   		}
;;;2181   	else 
;;;2182   		{
;;;2183   		li_bat._Ub=bat[0]._Ub;
;;;2184   		li_bat._Ib=bat[0]._Ib/10;
;;;2185   		li_bat._Tb=bat[0]._Tb;
;;;2186   		}
;;;2187   
;;;2188   	if((li_bat._485Error)||(li_bat._canError))
;;;2189   		{
;;;2190   		li_bat._batStat=bsOFF;
;;;2191   		}
;;;2192   	else li_bat._batStat=bsOK;
;;;2193   	}
;;;2194   else if(BAT_TYPE==2) //SACRED SUN
;;;2195   	{
;;;2196   	}
;;;2197   else if(BAT_TYPE==3) //ZTT
;;;2198   	{
;;;2199   	if(li_bat._batStat==bsOK)
;;;2200   		{
;;;2201   
;;;2202   		}
;;;2203   	}
;;;2204   #endif
;;;2205   
;;;2206   
;;;2207   /*
;;;2208   if((BAT_IS_ON[0]==bisON)&&(BAT_TYPE[0]==1)&&(BAT_LINK==0))
;;;2209   	{
;;;2210   
;;;2211   
;;;2212   	if(bat_drv_rx_buff[13]<=0x39)bbb[0]=bat_drv_rx_buff[13]-0x30;
;;;2213   	else bbb[0]=bat_drv_rx_buff[13]-55;
;;;2214   	if(bat_drv_rx_buff[14]<=0x39)bbb[1]=bat_drv_rx_buff[14]-0x30;
;;;2215   	else bbb[1]=bat_drv_rx_buff[14]-55;
;;;2216   	if(bat_drv_rx_buff[15]<=0x39)bbb[2]=bat_drv_rx_buff[15]-0x30;
;;;2217   	else bbb[2]=bat_drv_rx_buff[15]-55;
;;;2218   	if(bat_drv_rx_buff[16]<=0x39)bbb[3]=bat_drv_rx_buff[16]-0x30;
;;;2219   	else bbb[3]=bat_drv_rx_buff[16]-55;
;;;2220   
;;;2221   	tempSS=0;
;;;2222   	tempSS=((bbb[0]*4096)+(bbb[1]*256)+(bbb[2]*16)+bbb[3]);
;;;2223   
;;;2224   	bat[0]._max_cell_volt=(tempSS+5)/10;
;;;2225   
;;;2226   	if(bat_drv_rx_buff[17]<=0x39)bbb[0]=bat_drv_rx_buff[17]-0x30;
;;;2227   	else bbb[0]=bat_drv_rx_buff[17]-55;
;;;2228   	if(bat_drv_rx_buff[18]<=0x39)bbb[1]=bat_drv_rx_buff[18]-0x30;
;;;2229   	else bbb[1]=bat_drv_rx_buff[18]-55;
;;;2230   	if(bat_drv_rx_buff[19]<=0x39)bbb[2]=bat_drv_rx_buff[19]-0x30;
;;;2231   	else bbb[2]=bat_drv_rx_buff[19]-55;
;;;2232   	if(bat_drv_rx_buff[20]<=0x39)bbb[3]=bat_drv_rx_buff[20]-0x30;
;;;2233   	else bbb[3]=bat_drv_rx_buff[20]-55;
;;;2234   
;;;2235   	tempSS=0;
;;;2236   	tempSS=((bbb[0]*4096)+(bbb[1]*256)+(bbb[2]*16)+bbb[3]);
;;;2237   
;;;2238   	bat[0]._min_cell_volt=(tempSS+5)/10;
;;;2239   
;;;2240   
;;;2241   	}*/
;;;2242   
;;;2243   
;;;2244   
;;;2245   }
001596  e8bd8ffe          POP      {r1-r11,pc}
;;;2246   
                          ENDP

                  mnemo_hndl PROC
;;;2247   //-----------------------------------------------
;;;2248   void mnemo_hndl(void)
00159a  4a3c              LDR      r2,|L1.5772|
;;;2249   {
;;;2250   if(((ind==iMn_220)||(ind==iMn))&&(sub_ind==0)&&(MNEMO_ON==mnON))
;;;2251   	{
;;;2252   	if(mnemo_cnt)mnemo_cnt--;
00159c  493c              LDR      r1,|L1.5776|
00159e  7810              LDRB     r0,[r2,#0]            ;2250  ; a_ind
0015a0  2804              CMP      r0,#4                 ;2250
0015a2  d001              BEQ      |L1.5544|
0015a4  2801              CMP      r0,#1                 ;2250
0015a6  d105              BNE      |L1.5556|
                  |L1.5544|
0015a8  7850              LDRB     r0,[r2,#1]            ;2250  ; a_ind
0015aa  b918              CBNZ     r0,|L1.5556|
0015ac  4839              LDR      r0,|L1.5780|
0015ae  7800              LDRB     r0,[r0,#0]            ;2250  ; MNEMO_ON
0015b0  2855              CMP      r0,#0x55              ;2250
0015b2  d003              BEQ      |L1.5564|
                  |L1.5556|
;;;2253   	}
;;;2254   else mnemo_cnt=MNEMO_TIME;
0015b4  4838              LDR      r0,|L1.5784|
0015b6  8800              LDRH     r0,[r0,#0]  ; MNEMO_TIME
0015b8  7008              STRB     r0,[r1,#0]
                  |L1.5562|
;;;2255   }
0015ba  4770              BX       lr
                  |L1.5564|
0015bc  7808              LDRB     r0,[r1,#0]            ;2252  ; mnemo_cnt
0015be  2800              CMP      r0,#0                 ;2252
0015c0  d0fb              BEQ      |L1.5562|
0015c2  f1a00001          SUB      r0,r0,#1              ;2252
0015c6  7008              STRB     r0,[r1,#0]            ;2252
0015c8  4770              BX       lr
;;;2256   
                          ENDP

                  adc_init PROC
;;;2257   //-----------------------------------------------
;;;2258   void adc_init(void)
0015ca  4834              LDR      r0,|L1.5788|
;;;2259   {
;;;2260   
;;;2261   SET_REG(LPC_PINCON->PINSEL1,1,(25-16)*2,2);
0015cc  6841              LDR      r1,[r0,#4]
0015ce  f4212140          BIC      r1,r1,#0xc0000
0015d2  f4412180          ORR      r1,r1,#0x40000
0015d6  6041              STR      r1,[r0,#4]
;;;2262   SET_REG(LPC_PINCON->PINSEL1,1,(24-16)*2,2);
0015d8  6841              LDR      r1,[r0,#4]
0015da  f4213140          BIC      r1,r1,#0x30000
0015de  f4413180          ORR      r1,r1,#0x10000
0015e2  6041              STR      r1,[r0,#4]
;;;2263   SET_REG(LPC_PINCON->PINSEL1,1,(23-16)*2,2);
0015e4  6841              LDR      r1,[r0,#4]
0015e6  f4214140          BIC      r1,r1,#0xc000
0015ea  f4414180          ORR      r1,r1,#0x4000
0015ee  6041              STR      r1,[r0,#4]
;;;2264   
;;;2265   
;;;2266   SET_REG(LPC_PINCON->PINMODE1,2,(25-16)*2,2);
0015f0  6c41              LDR      r1,[r0,#0x44]
0015f2  f4212140          BIC      r1,r1,#0xc0000
0015f6  f4412100          ORR      r1,r1,#0x80000
0015fa  6441              STR      r1,[r0,#0x44]
;;;2267   SET_REG(LPC_PINCON->PINMODE1,2,(24-16)*2,2);
0015fc  6c41              LDR      r1,[r0,#0x44]
0015fe  f4213140          BIC      r1,r1,#0x30000
001602  f4413100          ORR      r1,r1,#0x20000
001606  6441              STR      r1,[r0,#0x44]
;;;2268   SET_REG(LPC_PINCON->PINMODE1,2,(23-16)*2,2);
001608  6c41              LDR      r1,[r0,#0x44]
00160a  f4214140          BIC      r1,r1,#0xc000
00160e  f4414100          ORR      r1,r1,#0x8000
001612  6441              STR      r1,[r0,#0x44]
;;;2269   
;;;2270   SET_REG(LPC_ADC->ADCR,0,24,3);
001614  4822              LDR      r0,|L1.5792|
001616  6801              LDR      r1,[r0,#0]
001618  f02161e0          BIC      r1,r1,#0x7000000
00161c  6001              STR      r1,[r0,#0]
;;;2271   
;;;2272   SET_REG(LPC_ADC->ADCR,1,21,1);
00161e  6801              LDR      r1,[r0,#0]
001620  f4411100          ORR      r1,r1,#0x200000
001624  6001              STR      r1,[r0,#0]
;;;2273   SET_REG(LPC_ADC->ADCR,0,16,1);
001626  6801              LDR      r1,[r0,#0]
001628  f4213180          BIC      r1,r1,#0x10000
00162c  6001              STR      r1,[r0,#0]
;;;2274   SET_REG(LPC_ADC->ADCR,1,8,8);
00162e  6801              LDR      r1,[r0,#0]
001630  f421417f          BIC      r1,r1,#0xff00
001634  f4417180          ORR      r1,r1,#0x100
001638  6001              STR      r1,[r0,#0]
;;;2275   
;;;2276   //SET_REG(LPC_GPIO0->FIODIR,7,5,3);
;;;2277   //SET_REG(LPC_GPIO0->FIOPIN,4,5,3);
;;;2278   	
;;;2279   	/*if(adc_ch<=7)*///SET_REG(LPC_ADC->ADCR,1<<5,0,8);
;;;2280        /*else if(adc_ch==8) SET_REG(LPC_ADC->ADCR,1<<2,0,8);
;;;2281        else SET_REG(LPC_ADC->ADCR,1<<4,0,8);*/
;;;2282   
;;;2283   LPC_ADC->ADINTEN     =  (1<< 8);      /* global enable interrupt            */
00163a  f44f7180          MOV      r1,#0x100
00163e  60c1              STR      r1,[r0,#0xc]
001640  4818              LDR      r0,|L1.5796|
001642  f44f0180          MOV      r1,#0x400000
001646  6001              STR      r1,[r0,#0]
;;;2284   
;;;2285   NVIC_EnableIRQ(ADC_IRQn);             /* enable ADC Interrupt               */
;;;2286   
;;;2287   
;;;2288   }
001648  4770              BX       lr
00164a  0000              DCW      0x0000
                  |L1.5708|
                          DCD      net_U
                  |L1.5712|
                          DCD      eb2_data_short
                  |L1.5716|
                          DCD      Kvv_eb2
                  |L1.5720|
                          DCD      Uvv_eb2
                  |L1.5724|
                          DCD      Kpes_eb2
                  |L1.5728|
                          DCD      Upes_eb2
                  |L1.5732|
                          DCD      t_ext
                  |L1.5736|
                          DCD      ibt
                  |L1.5740|
                          DCD      t_box
                  |L1.5744|
                          DCD      t_ext_can_nd
                  |L1.5748|
                          DCD      t_ext_can
                  |L1.5752|
                          DCD      BAT_IS_ON
                  |L1.5756|
                          DCD      load_I
                  |L1.5760|
                          DCD      Isumm
                  |L1.5764|
                          DCD      NUMINV
                  |L1.5768|
                          DCD      inv
                  |L1.5772|
                          DCD      a_ind
                  |L1.5776|
                          DCD      mnemo_cnt
                  |L1.5780|
                          DCD      MNEMO_ON
                  |L1.5784|
                          DCD      MNEMO_TIME
                  |L1.5788|
                          DCD      0x4002c000
                  |L1.5792|
                          DCD      0x40034000
                  |L1.5796|
                          DCD      0xe000e100
                          ENDP

                  adc_drv7 PROC
;;;2290   //-----------------------------------------------
;;;2291   void adc_drv7(void) //(U - )
0016a8  e92d41f0          PUSH     {r4-r8,lr}
;;;2292   {
;;;2293   //int temp_S;
;;;2294   //char i;
;;;2295   //signed short temp_SS;
;;;2296   
;;;2297   adc_self_ch_disp[0]=abs_pal(adc_self_ch_buff[1]-adc_self_ch_buff[0]);//adc_self_ch_buff[0]&0x0f80;
0016ac  4cff              LDR      r4,|L1.6828|
0016ae  8860              LDRH     r0,[r4,#2]  ; adc_self_ch_buff
0016b0  8821              LDRH     r1,[r4,#0]  ; adc_self_ch_buff
0016b2  1a40              SUBS     r0,r0,r1
0016b4  b200              SXTH     r0,r0
0016b6  f7fffffe          BL       abs_pal
0016ba  1da6              ADDS     r6,r4,#6
0016bc  8030              STRH     r0,[r6,#0]
;;;2298   adc_self_ch_disp[1]=abs_pal(adc_self_ch_buff[2]-adc_self_ch_buff[1]);//adc_self_ch_buff[1]&0x0f80;
0016be  88a0              LDRH     r0,[r4,#4]  ; adc_self_ch_buff
0016c0  8861              LDRH     r1,[r4,#2]  ; adc_self_ch_buff
0016c2  1a40              SUBS     r0,r0,r1
0016c4  b200              SXTH     r0,r0
0016c6  f7fffffe          BL       abs_pal
0016ca  8070              STRH     r0,[r6,#2]
;;;2299   adc_self_ch_disp[2]=abs_pal(adc_self_ch_buff[2]-adc_self_ch_buff[0]);//adc_self_ch_buff[2]&0x0f80;
0016cc  88a0              LDRH     r0,[r4,#4]  ; adc_self_ch_buff
0016ce  8821              LDRH     r1,[r4,#0]  ; adc_self_ch_buff
0016d0  1a40              SUBS     r0,r0,r1
0016d2  b200              SXTH     r0,r0
0016d4  f7fffffe          BL       abs_pal
0016d8  80b0              STRH     r0,[r6,#4]
;;;2300   
;;;2301   //adc_self_ch_disp[0]=adc_self_ch_buff[0]&0x0ff0;
;;;2302   //adc_self_ch_disp[1]=adc_self_ch_buff[1]&0x0ff0;
;;;2303   //adc_self_ch_disp[2]=adc_self_ch_buff[2]&0x0ff0;
;;;2304   
;;;2305   
;;;2306   if(adc_self_ch_disp[2]<300)//==adc_self_ch_disp[2])
0016da  f44f7196          MOV      r1,#0x12c
;;;2307   	{
;;;2308   	adc_result=adc_self_ch_buff[2];
0016de  f1a40596          SUB      r5,r4,#0x96
0016e2  4288              CMP      r0,r1                 ;2306
0016e4  da02              BGE      |L1.5868|
0016e6  88a0              LDRH     r0,[r4,#4]  ; adc_self_ch_buff
0016e8  84e8              STRH     r0,[r5,#0x26]
0016ea  e00c              B        |L1.5894|
                  |L1.5868|
;;;2309   	} 
;;;2310   else if(adc_self_ch_disp[1]<300)//==adc_self_ch_disp[2])
0016ec  f9b60002          LDRSH    r0,[r6,#2]  ; adc_self_ch_disp
0016f0  4288              CMP      r0,r1
0016f2  da02              BGE      |L1.5882|
;;;2311   	{
;;;2312   	adc_result=adc_self_ch_buff[1];
0016f4  8860              LDRH     r0,[r4,#2]  ; adc_self_ch_buff
0016f6  84e8              STRH     r0,[r5,#0x26]
0016f8  e005              B        |L1.5894|
                  |L1.5882|
;;;2313   	}
;;;2314   else if(adc_self_ch_disp[0]<300)//==adc_self_ch_disp[1])
0016fa  f9b60000          LDRSH    r0,[r6,#0]  ; adc_self_ch_disp
0016fe  4288              CMP      r0,r1
001700  da01              BGE      |L1.5894|
;;;2315   	{
;;;2316   	adc_result=adc_self_ch_buff[0];
001702  8820              LDRH     r0,[r4,#0]  ; adc_self_ch_buff
001704  84e8              STRH     r0,[r5,#0x26]
                  |L1.5894|
;;;2317   	}
;;;2318       //adc_result=92;
;;;2319   
;;;2320   if(adc_ch_net)
001706  78af              LDRB     r7,[r5,#2]  ; adc_ch_net
001708  2600              MOVS     r6,#0
00170a  b32f              CBZ      r7,|L1.5976|
;;;2321   	{
;;;2322   
;;;2323   	main_power_buffer[0]+=(long)(adc_result);
00170c  48e8              LDR      r0,|L1.6832|
00170e  f9b51026          LDRSH    r1,[r5,#0x26]  ; adc_result
001712  6802              LDR      r2,[r0,#0]  ; main_power_buffer
001714  440a              ADD      r2,r2,r1
001716  6002              STR      r2,[r0,#0]  ; main_power_buffer
;;;2324   	main_power_buffer[1]+=(long)(adc_result);
001718  6842              LDR      r2,[r0,#4]  ; main_power_buffer
00171a  440a              ADD      r2,r2,r1
00171c  6042              STR      r2,[r0,#4]  ; main_power_buffer
;;;2325   	main_power_buffer[2]+=(long)(adc_result);
00171e  6882              LDR      r2,[r0,#8]  ; main_power_buffer
001720  440a              ADD      r2,r2,r1
001722  6082              STR      r2,[r0,#8]  ; main_power_buffer
;;;2326   	main_power_buffer[3]+=(long)(adc_result);
001724  68c2              LDR      r2,[r0,#0xc]  ; main_power_buffer
001726  4411              ADD      r1,r1,r2
001728  60c1              STR      r1,[r0,#0xc]  ; main_power_buffer
;;;2327   
;;;2328   	adc_net_buff_cnt++;
00172a  8de9              LDRH     r1,[r5,#0x2e]  ; adc_net_buff_cnt
00172c  f1010101          ADD      r1,r1,#1
001730  b209              SXTH     r1,r1
001732  85e9              STRH     r1,[r5,#0x2e]
;;;2329   	if(adc_net_buff_cnt>=0x1000)
001734  f5b15f80          CMP      r1,#0x1000
001738  db00              BLT      |L1.5948|
;;;2330   		{
;;;2331   		adc_net_buff_cnt=0;
00173a  85ee              STRH     r6,[r5,#0x2e]
                  |L1.5948|
;;;2332   		}
;;;2333   	if((adc_net_buff_cnt&0x03ff)==0)
00173c  f9b5102e          LDRSH    r1,[r5,#0x2e]  ; adc_net_buff_cnt
001740  058a              LSLS     r2,r1,#22
001742  d131              BNE      |L1.6056|
;;;2334   		{
;;;2335   		#ifdef UKU_220
;;;2336   		net_buff_=(short)((main_power_buffer[adc_net_buff_cnt>>10])>>11);
;;;2337   		#else
;;;2338   		#ifdef UKU_220_V2
;;;2339   		net_buff_=(short)((main_power_buffer[adc_net_buff_cnt>>10])>>11);
;;;2340   		#else
;;;2341   		net_buff_=(short)((main_power_buffer[adc_net_buff_cnt>>10])>>8);
001744  ea4f21a1          ASR      r1,r1,#10
001748  f8502021          LDR      r2,[r0,r1,LSL #2]
00174c  ea4f2222          ASR      r2,r2,#8
001750  84aa              STRH     r2,[r5,#0x24]
;;;2342   		#endif
;;;2343   		#endif
;;;2344   		main_power_buffer[adc_net_buff_cnt>>10]=0;
001752  f8406021          STR      r6,[r0,r1,LSL #2]
001756  e027              B        |L1.6056|
                  |L1.5976|
;;;2345   		}
;;;2346   
;;;2347   
;;;2348   	} 
;;;2349   else if(!adc_ch_net)
;;;2350   	{
;;;2351   	adc_buff[adc_ch][adc_ch_cnt]=(long)adc_result;
001758  48d6              LDR      r0,|L1.6836|
00175a  78ec              LDRB     r4,[r5,#3]  ; adc_ch
00175c  792a              LDRB     r2,[r5,#4]  ; adc_ch_cnt
00175e  eb001384          ADD      r3,r0,r4,LSL #6
001762  f9b51026          LDRSH    r1,[r5,#0x26]  ; adc_result
001766  f8431022          STR      r1,[r3,r2,LSL #2]
;;;2352   	
;;;2353   	if((adc_ch_cnt&0x03)==0)
00176a  0790              LSLS     r0,r2,#30
00176c  d10f              BNE      |L1.6030|
;;;2354   		{
;;;2355   		long temp_L;
;;;2356   		char i;
;;;2357   		temp_L=0;
00176e  4601              MOV      r1,r0
                  |L1.6000|
;;;2358   		for(i=0;i<16;i++)
;;;2359   			{
;;;2360   			temp_L+=adc_buff[adc_ch][i];
001770  f853c020          LDR      r12,[r3,r0,LSL #2]
001774  4461              ADD      r1,r1,r12
001776  f1000001          ADD      r0,r0,#1              ;2358
00177a  b2c0              UXTB     r0,r0                 ;2358
00177c  2810              CMP      r0,#0x10              ;2358
00177e  d3f7              BCC      |L1.6000|
;;;2361   			}
;;;2362   		adc_buff_[adc_ch]= (short)(temp_L>>4);
001780  ea4f1021          ASR      r0,r1,#4
001784  49ca              LDR      r1,|L1.6832|
001786  f1a10120          SUB      r1,r1,#0x20
00178a  f8210014          STRH     r0,[r1,r4,LSL #1]
                  |L1.6030|
;;;2363   
;;;2364   		//adc_buff_[3]=346;
;;;2365   		}
;;;2366   	if(++adc_ch>=16) 
00178e  1c64              ADDS     r4,r4,#1
001790  b2e0              UXTB     r0,r4
001792  70e8              STRB     r0,[r5,#3]
001794  2810              CMP      r0,#0x10
001796  d307              BCC      |L1.6056|
;;;2367   		{
;;;2368   		adc_ch=0;
001798  70ee              STRB     r6,[r5,#3]
;;;2369   		adc_ch_cnt++;
00179a  f1020201          ADD      r2,r2,#1
00179e  b2d0              UXTB     r0,r2
0017a0  7128              STRB     r0,[r5,#4]
;;;2370   		if(adc_ch_cnt>=16)adc_ch_cnt=0;
0017a2  2810              CMP      r0,#0x10
0017a4  d300              BCC      |L1.6056|
0017a6  712e              STRB     r6,[r5,#4]
                  |L1.6056|
;;;2371   		}
;;;2372   	}
;;;2373   
;;;2374   //adc_buff[adc_ch][adc_cnt1]=(adc_self_ch_buff[2]+adc_self_ch_buff[1])/2;
;;;2375   
;;;2376   //if(adc_buff[adc_ch][adc_cnt1]<adc_buff_min[adc_ch])adc_buff_min[adc_ch]=adc_buff[adc_ch][adc_cnt1];
;;;2377   //if(adc_buff[adc_ch][adc_cnt1]>adc_buff_max[adc_ch])adc_buff_max[adc_ch]=adc_buff[adc_ch][adc_cnt1];
;;;2378   /*
;;;2379   	{
;;;2380   	if((adc_cnt1&0x03)==0)
;;;2381   		{
;;;2382   		temp_S=0;
;;;2383   		for(i=0;i<16;i++)
;;;2384   			{
;;;2385   			temp_S+=adc_buff[adc_ch][i];
;;;2386   			} 
;;;2387            	adc_buff_[adc_ch]=temp_S>>4;
;;;2388             }
;;;2389   	}*/
;;;2390   
;;;2391   
;;;2392   		  
;;;2393   
;;;2394   adc_self_ch_cnt=0;
0017a8  706e              STRB     r6,[r5,#1]
;;;2395   
;;;2396   adc_ch_net++;
0017aa  f1070701          ADD      r7,r7,#1
;;;2397   adc_ch_net&=1;
0017ae  f0070001          AND      r0,r7,#1
0017b2  70a8              STRB     r0,[r5,#2]
;;;2398   
;;;2399   //SET_REG(LPC_GPIO0->FIODIR,7,5,3);
;;;2400   //SET_REG(LPC_GPIO0->FIOPIN,adc_ch,5,3);
;;;2401   
;;;2402   if(adc_ch_net)
;;;2403   	{
;;;2404   	//LPC_GPIO2->FIODIR|=(1<<7);
;;;2405   	//LPC_GPIO2->FIOPIN|=(1<<7);
;;;2406   	SET_REG(LPC_ADC->ADCR,1<<2,0,8);
0017b4  4ac0              LDR      r2,|L1.6840|
0017b6  b130              CBZ      r0,|L1.6086|
0017b8  6810              LDR      r0,[r2,#0]
0017ba  f02000ff          BIC      r0,r0,#0xff
0017be  f1000004          ADD      r0,r0,#4
0017c2  6010              STR      r0,[r2,#0]
0017c4  e03d              B        |L1.6210|
                  |L1.6086|
;;;2407   	}
;;;2408   else
;;;2409   	{
;;;2410   	//LPC_GPIO2->FIODIR|=(1<<7);
;;;2411   	//LPC_GPIO2->FIOPIN&=~(1<<7);
;;;2412   	if(!(adc_ch&(1<<3)))SET_REG(LPC_ADC->ADCR,1<<0,0,8);
0017c6  78e9              LDRB     r1,[r5,#3]  ; adc_ch
0017c8  0708              LSLS     r0,r1,#28
0017ca  d406              BMI      |L1.6106|
0017cc  6810              LDR      r0,[r2,#0]
0017ce  f02000ff          BIC      r0,r0,#0xff
0017d2  f1000001          ADD      r0,r0,#1
0017d6  6010              STR      r0,[r2,#0]
0017d8  e005              B        |L1.6118|
                  |L1.6106|
;;;2413   	else 			SET_REG(LPC_ADC->ADCR,1<<1,0,8);
0017da  6810              LDR      r0,[r2,#0]
0017dc  f02000ff          BIC      r0,r0,#0xff
0017e0  f1000002          ADD      r0,r0,#2
0017e4  6010              STR      r0,[r2,#0]
                  |L1.6118|
;;;2414   
;;;2415   
;;;2416   	SET_REG(LPC_GPIO0->FIODIR,1,28,1);
0017e6  48b5              LDR      r0,|L1.6844|
0017e8  6803              LDR      r3,[r0,#0]
0017ea  f0435380          ORR      r3,r3,#0x10000000
0017ee  6003              STR      r3,[r0,#0]
;;;2417   	SET_REG(LPC_GPIO1->FIODIR,1,30,1);
0017f0  6a03              LDR      r3,[r0,#0x20]
0017f2  f0434380          ORR      r3,r3,#0x40000000
0017f6  6203              STR      r3,[r0,#0x20]
;;;2418   	SET_REG(LPC_GPIO3->FIODIR,1,26,1);
0017f8  6e03              LDR      r3,[r0,#0x60]
0017fa  f0436380          ORR      r3,r3,#0x4000000
0017fe  6603              STR      r3,[r0,#0x60]
;;;2419   
;;;2420   	if(!(adc_ch&(1<<0)))SET_REG(LPC_GPIO0->FIOPIN,0,28,1);
001800  07cb              LSLS     r3,r1,#31
001802  d00a              BEQ      |L1.6170|
;;;2421   	else 			SET_REG(LPC_GPIO0->FIOPIN,1,28,1);
001804  6943              LDR      r3,[r0,#0x14]
001806  f0435380          ORR      r3,r3,#0x10000000
00180a  6143              STR      r3,[r0,#0x14]
                  |L1.6156|
;;;2422   
;;;2423   	if(!(adc_ch&(1<<1)))SET_REG(LPC_GPIO1->FIOPIN,0,30,1);
00180c  078b              LSLS     r3,r1,#30
00180e  d409              BMI      |L1.6180|
001810  6b43              LDR      r3,[r0,#0x34]
001812  f0234380          BIC      r3,r3,#0x40000000
001816  6343              STR      r3,[r0,#0x34]
001818  e008              B        |L1.6188|
                  |L1.6170|
00181a  6943              LDR      r3,[r0,#0x14]         ;2420
00181c  f0235380          BIC      r3,r3,#0x10000000     ;2420
001820  6143              STR      r3,[r0,#0x14]         ;2420
001822  e7f3              B        |L1.6156|
                  |L1.6180|
;;;2424   	else 			SET_REG(LPC_GPIO1->FIOPIN,1,30,1);
001824  6b43              LDR      r3,[r0,#0x34]
001826  f0434380          ORR      r3,r3,#0x40000000
00182a  6343              STR      r3,[r0,#0x34]
                  |L1.6188|
;;;2425   
;;;2426   	if(!(adc_ch&(1<<2)))SET_REG(LPC_GPIO3->FIOPIN,0,26,1);
00182c  0749              LSLS     r1,r1,#29
00182e  d404              BMI      |L1.6202|
001830  6f41              LDR      r1,[r0,#0x74]
001832  f0216180          BIC      r1,r1,#0x4000000
001836  6741              STR      r1,[r0,#0x74]
001838  e003              B        |L1.6210|
                  |L1.6202|
;;;2427   	else 			SET_REG(LPC_GPIO3->FIOPIN,1,26,1);
00183a  6f41              LDR      r1,[r0,#0x74]
00183c  f0416180          ORR      r1,r1,#0x4000000
001840  6741              STR      r1,[r0,#0x74]
                  |L1.6210|
;;;2428   	}
;;;2429   	
;;;2430   
;;;2431   
;;;2432   
;;;2433   LPC_ADC->ADCR |=  (1<<24);
001842  6810              LDR      r0,[r2,#0]
001844  f0407080          ORR      r0,r0,#0x1000000
001848  6010              STR      r0,[r2,#0]
                  |L1.6218|
;;;2434   
;;;2435   }
00184a  e8bd81f0          POP      {r4-r8,pc}
;;;2436   
                          ENDP

                  avg_hndl PROC
;;;2693   //-----------------------------------------------
;;;2694   void avg_hndl(void)
00184e  b5f0              PUSH     {r4-r7,lr}
;;;2695   { 
;;;2696   char i;
;;;2697   
;;;2698   //#define AVGCNTMAX	5
;;;2699   if(avg_main_cnt)
001850  4c96              LDR      r4,|L1.6828|
001852  3c96              SUBS     r4,r4,#0x96
001854  f9b40020          LDRSH    r0,[r4,#0x20]  ; avg_main_cnt
001858  b118              CBZ      r0,|L1.6242|
;;;2700   	{
;;;2701   	avg_main_cnt--;
00185a  f1a00001          SUB      r0,r0,#1
00185e  8420              STRH     r0,[r4,#0x20]
;;;2702   	goto avg_hndl_end;
001860  e090              B        |L1.6532|
                  |L1.6242|
;;;2703   	}                 
;;;2704   
;;;2705   avg_num=0;
001862  f04f0500          MOV      r5,#0
001866  72e5              STRB     r5,[r4,#0xb]
;;;2706   
;;;2707   for(i=0;i<NUMIST;i++)
001868  4628              MOV      r0,r5
00186a  4996              LDR      r1,|L1.6852|
;;;2708   	{
;;;2709   	if((bps[i]._state==bsWRK)&&(bps[i]._cnt<20))avg_num++;
00186c  4b94              LDR      r3,|L1.6848|
00186e  f9b12000          LDRSH    r2,[r1,#0]            ;2707
001872  e012              B        |L1.6298|
                  |L1.6260|
001874  ebc001c0          RSB      r1,r0,r0,LSL #3
001878  eb011100          ADD      r1,r1,r0,LSL #4
00187c  eb030181          ADD      r1,r3,r1,LSL #2
001880  788e              LDRB     r6,[r1,#2]
001882  2e01              CMP      r6,#1
001884  d106              BNE      |L1.6292|
001886  78c9              LDRB     r1,[r1,#3]
001888  2914              CMP      r1,#0x14
00188a  d203              BCS      |L1.6292|
00188c  7ae1              LDRB     r1,[r4,#0xb]  ; avg_num
00188e  f1010101          ADD      r1,r1,#1
001892  72e1              STRB     r1,[r4,#0xb]
                  |L1.6292|
001894  f1000001          ADD      r0,r0,#1              ;2707
001898  b2c0              UXTB     r0,r0                 ;2707
                  |L1.6298|
00189a  4290              CMP      r0,r2                 ;2707
00189c  dbea              BLT      |L1.6260|
;;;2710   	}
;;;2711   
;;;2712   /*if((K[NUMI]>=1)&&(bps_state[0]==ssWRK))	avg_num++;
;;;2713   if((K[NUMI]>=2)&&(bps_state[1]==ssWRK))	avg_num++;
;;;2714   if((K[NUMI]>=3)&&(bps_state[2]==ssWRK))	avg_num++;*/
;;;2715   
;;;2716   	
;;;2717   if(avg_num<2)
00189e  7ae6              LDRB     r6,[r4,#0xb]  ; avg_num
0018a0  2e02              CMP      r6,#2
0018a2  d36f              BCC      |L1.6532|
;;;2718   	{
;;;2719   	goto avg_hndl_end;
;;;2720   	}
;;;2721   	
;;;2722   else
;;;2723   	{
;;;2724   	i_avg_min=5000;
0018a4  f2413088          MOV      r0,#0x1388
0018a8  6760              STR      r0,[r4,#0x74]  ; i_avg_min
;;;2725   	i_avg_max=0;
0018aa  6725              STR      r5,[r4,#0x70]  ; i_avg_max
;;;2726   	i_avg_summ=0;
0018ac  67a5              STR      r5,[r4,#0x78]  ; i_avg_summ
;;;2727   	for(i=0;i<NUMIST;i++)
0018ae  f04f0100          MOV      r1,#0
0018b2  e017              B        |L1.6372|
                  |L1.6324|
;;;2728   		{
;;;2729   		if(bps[i]._state==bsWRK)
0018b4  ebc100c1          RSB      r0,r1,r1,LSL #3
0018b8  eb001001          ADD      r0,r0,r1,LSL #4
0018bc  eb030080          ADD      r0,r3,r0,LSL #2
0018c0  7887              LDRB     r7,[r0,#2]
0018c2  2f01              CMP      r7,#1
0018c4  d10b              BNE      |L1.6366|
;;;2730   			{
;;;2731   			if(bps[i]._Ii>i_avg_max)i_avg_max=bps[i]._Ii;
0018c6  6a40              LDR      r0,[r0,#0x24]
0018c8  6f27              LDR      r7,[r4,#0x70]  ; i_avg_max
0018ca  42b8              CMP      r0,r7
0018cc  dd00              BLE      |L1.6352|
0018ce  6720              STR      r0,[r4,#0x70]  ; i_avg_max
                  |L1.6352|
;;;2732   			if(bps[i]._Ii<i_avg_min)i_avg_min=bps[i]._Ii;
0018d0  6f67              LDR      r7,[r4,#0x74]  ; i_avg_min
0018d2  42b8              CMP      r0,r7
0018d4  da00              BGE      |L1.6360|
0018d6  6760              STR      r0,[r4,#0x74]  ; i_avg_min
                  |L1.6360|
;;;2733   			
;;;2734   			i_avg_summ+=bps[i]._Ii;
0018d8  6fa7              LDR      r7,[r4,#0x78]  ; i_avg_summ
0018da  4438              ADD      r0,r0,r7
0018dc  67a0              STR      r0,[r4,#0x78]  ; i_avg_summ
                  |L1.6366|
0018de  f1010101          ADD      r1,r1,#1              ;2727
0018e2  b2c9              UXTB     r1,r1                 ;2727
                  |L1.6372|
0018e4  4291              CMP      r1,r2                 ;2727
0018e6  dbe5              BLT      |L1.6324|
;;;2735   			}
;;;2736   		}
;;;2737   	i_avg=i_avg_summ/avg_num;	
0018e8  6fa0              LDR      r0,[r4,#0x78]  ; i_avg_summ
0018ea  fb90f6f6          SDIV     r6,r0,r6
0018ee  67e6              STR      r6,[r4,#0x7c]  ; i_avg
;;;2738   	
;;;2739   	if(i_avg_min==0)i_avg_min=1;
0018f0  6f60              LDR      r0,[r4,#0x74]  ; i_avg_min
0018f2  2101              MOVS     r1,#1                 ;2709
0018f4  b900              CBNZ     r0,|L1.6392|
0018f6  6761              STR      r1,[r4,#0x74]  ; i_avg_min
                  |L1.6392|
;;;2740   
;;;2741   	avg=i_avg_max;
0018f8  4f6c              LDR      r7,|L1.6828|
0018fa  6f20              LDR      r0,[r4,#0x70]  ; i_avg_max
0018fc  3f16              SUBS     r7,r7,#0x16
;;;2742   	avg*=100;
0018fe  f04f0c64          MOV      r12,#0x64
001902  fb00f00c          MUL      r0,r0,r12
;;;2743   	avg/=i_avg_min;
001906  f8d4c074          LDR      r12,[r4,#0x74]  ; i_avg_min
00190a  fb90f0fc          SDIV     r0,r0,r12
00190e  6038              STR      r0,[r7,#0]  ; avg
;;;2744   
;;;2745   	if(avg>160) bAVG=1;
001910  28a0              CMP      r0,#0xa0
001912  dd00              BLE      |L1.6422|
001914  72a1              STRB     r1,[r4,#0xa]
                  |L1.6422|
;;;2746   	if(avg<120) bAVG=0;
001916  2878              CMP      r0,#0x78
001918  da00              BGE      |L1.6428|
00191a  72a5              STRB     r5,[r4,#0xa]
                  |L1.6428|
;;;2747   
;;;2748   	if(bAVG==1)
00191c  7aa0              LDRB     r0,[r4,#0xa]  ; bAVG
00191e  2801              CMP      r0,#1
001920  d130              BNE      |L1.6532|
;;;2749   		{
;;;2750   		for(i=0;i<NUMIST;i++)
001922  f04f0100          MOV      r1,#0
;;;2751   			{
;;;2752   			if(bps[i]._state==bsWRK)
;;;2753   				{
;;;2754   				if(bps[i]._Ii>i_avg)bps[i]._x_--;
;;;2755   				if(bps[i]._Ii<i_avg)bps[i]._x_++;
;;;2756   			
;;;2757   				if(bps[i]._x_<-50)bps[i]._x_=-50;
001926  f06f0431          MVN      r4,#0x31
00192a  e029              B        |L1.6528|
                  |L1.6444|
00192c  ebc100c1          RSB      r0,r1,r1,LSL #3       ;2752
001930  eb001001          ADD      r0,r0,r1,LSL #4       ;2752
001934  eb030080          ADD      r0,r3,r0,LSL #2       ;2752
001938  7885              LDRB     r5,[r0,#2]            ;2752
00193a  2d01              CMP      r5,#1                 ;2752
00193c  d11d              BNE      |L1.6522|
00193e  6a45              LDR      r5,[r0,#0x24]         ;2754
001940  42b5              CMP      r5,r6                 ;2754
001942  dd05              BLE      |L1.6480|
001944  f8b05050          LDRH     r5,[r0,#0x50]         ;2754
001948  f1a50501          SUB      r5,r5,#1              ;2754
00194c  f8a05050          STRH     r5,[r0,#0x50]         ;2754
                  |L1.6480|
001950  da05              BGE      |L1.6494|
001952  f8b05050          LDRH     r5,[r0,#0x50]         ;2755
001956  f1050501          ADD      r5,r5,#1              ;2755
00195a  f8a05050          STRH     r5,[r0,#0x50]         ;2755
                  |L1.6494|
00195e  f9b05050          LDRSH    r5,[r0,#0x50]
001962  42a5              CMP      r5,r4
001964  da01              BGE      |L1.6506|
001966  f8a04050          STRH     r4,[r0,#0x50]
                  |L1.6506|
;;;2758   				if(bps[i]._x_>50)bps[i]._x_=50;	
00196a  f9b05050          LDRSH    r5,[r0,#0x50]
00196e  2d32              CMP      r5,#0x32
001970  dd03              BLE      |L1.6522|
001972  f04f0532          MOV      r5,#0x32
001976  f8a05050          STRH     r5,[r0,#0x50]
                  |L1.6522|
00197a  f1010101          ADD      r1,r1,#1              ;2750
00197e  b2c9              UXTB     r1,r1                 ;2750
                  |L1.6528|
001980  4291              CMP      r1,r2                 ;2750
001982  dbd3              BLT      |L1.6444|
                  |L1.6532|
;;;2759   				}
;;;2760   			}		
;;;2761   		}			
;;;2762   	}   	 
;;;2763   
;;;2764   
;;;2765   avg_hndl_end:
;;;2766   __nop();  
001984  bf00              NOP      
;;;2767   }
001986  bdf0              POP      {r4-r7,pc}
;;;2768   
                          ENDP

                  rele_hndl PROC
;;;2781   //*************-----------------------------------------------
;;;2782   void rele_hndl(void)
001988  e92d41f0          PUSH     {r4-r8,lr}
;;;2783   {
;;;2784   //static char cnt_rel_sam;
;;;2785   //char temp;
;;;2786   
;;;2787   //temp=0;
;;;2788   
;;;2789   
;;;2790   SET_REG(LPC_PINCON->PINSEL0,0,4*2,6*2);
00198c  484e              LDR      r0,|L1.6856|
00198e  6801              LDR      r1,[r0,#0]
001990  4a4e              LDR      r2,|L1.6860|
001992  ea010102          AND      r1,r1,r2
001996  6001              STR      r1,[r0,#0]
;;;2791   SET_REG(LPC_GPIO0->FIODIR,63,4,6);
001998  4c48              LDR      r4,|L1.6844|
00199a  6821              LDR      r1,[r4,#0]
00199c  f441717c          ORR      r1,r1,#0x3f0
0019a0  6021              STR      r1,[r4,#0]
;;;2792   SET_REG(LPC_PINCON->PINSEL7,0,(25-16)*2,2);
0019a2  69c1              LDR      r1,[r0,#0x1c]
0019a4  f4212140          BIC      r1,r1,#0xc0000
0019a8  61c1              STR      r1,[r0,#0x1c]
;;;2793   SET_REG(LPC_GPIO3->FIODIR,1,25,1);
0019aa  6e21              LDR      r1,[r4,#0x60]
0019ac  f0417100          ORR      r1,r1,#0x2000000
0019b0  6621              STR      r1,[r4,#0x60]
;;;2794   SET_REG(LPC_PINCON->PINSEL1,0,(29-16)*2,2);
0019b2  6841              LDR      r1,[r0,#4]
0019b4  f0216140          BIC      r1,r1,#0xc000000
0019b8  6041              STR      r1,[r0,#4]
;;;2795   SET_REG(LPC_GPIO0->FIODIR,1,29,1);
0019ba  6820              LDR      r0,[r4,#0]
0019bc  f0405000          ORR      r0,r0,#0x20000000
0019c0  6020              STR      r0,[r4,#0]
;;;2796   
;;;2797   
;;;2798   
;;;2799   
;;;2800   
;;;2801   
;;;2802   if((((bat[0]._rel_stat)  || (tbatdisable_stat!=tbdsON))&&(tbatdisable_cmnd))	&& (main_1Hz_cnt>5))
0019c2  4844              LDR      r0,|L1.6868|
0019c4  4d42              LDR      r5,|L1.6864|
0019c6  4945              LDR      r1,|L1.6876|
0019c8  7802              LDRB     r2,[r0,#0]  ; tbatdisable_stat
0019ca  4843              LDR      r0,|L1.6872|
0019cc  f895303c          LDRB     r3,[r5,#0x3c]  ; bat
0019d0  f9b11000          LDRSH    r1,[r1,#0]
0019d4  7800              LDRB     r0,[r0,#0]
0019d6  4313              ORRS     r3,r3,r2
0019d8  d007              BEQ      |L1.6634|
0019da  b130              CBZ      r0,|L1.6634|
0019dc  2905              CMP      r1,#5
0019de  dd04              BLE      |L1.6634|
;;;2803   	{
;;;2804   	SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_BAT1,1);
0019e0  69a3              LDR      r3,[r4,#0x18]
0019e2  f4437380          ORR      r3,r3,#0x100
0019e6  61a3              STR      r3,[r4,#0x18]
0019e8  e003              B        |L1.6642|
                  |L1.6634|
;;;2805   	}
;;;2806   else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_BAT1,1);	  	
0019ea  69e3              LDR      r3,[r4,#0x1c]
0019ec  f4437380          ORR      r3,r3,#0x100
0019f0  61e3              STR      r3,[r4,#0x1c]
                  |L1.6642|
;;;2807   
;;;2808   if((((bat[1]._rel_stat) || (tbatdisable_stat!=tbdsON))&&(tbatdisable_cmnd))	&& (main_1Hz_cnt>5))
0019f2  f8953088          LDRB     r3,[r5,#0x88]  ; bat
0019f6  4313              ORRS     r3,r3,r2
0019f8  d007              BEQ      |L1.6666|
0019fa  b130              CBZ      r0,|L1.6666|
0019fc  2905              CMP      r1,#5
0019fe  dd04              BLE      |L1.6666|
;;;2809   	{
;;;2810   	SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_BAT2,1);
001a00  69a0              LDR      r0,[r4,#0x18]
001a02  f0400040          ORR      r0,r0,#0x40
001a06  61a0              STR      r0,[r4,#0x18]
001a08  e003              B        |L1.6674|
                  |L1.6666|
;;;2811   	}
;;;2812   else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_BAT2,1);
001a0a  69e0              LDR      r0,[r4,#0x1c]
001a0c  f0400040          ORR      r0,r0,#0x40
001a10  61e0              STR      r0,[r4,#0x1c]
                  |L1.6674|
;;;2813   
;;;2814   
;;;2815   if(mess_find_unvol((MESS2RELE_HNDL))&&(mess_data[0]==PARAM_RELE_SAMOKALIBR)) 
001a12  20d2              MOVS     r0,#0xd2
001a14  f7fffffe          BL       mess_find_unvol
001a18  4d31              LDR      r5,|L1.6880|
001a1a  b110              CBZ      r0,|L1.6690|
001a1c  6828              LDR      r0,[r5,#0]  ; mess_data
001a1e  2864              CMP      r0,#0x64
001a20  d06e              BEQ      |L1.6912|
                  |L1.6690|
;;;2816   	{
;;;2817   	if(mess_data[1]==1)SET_REG(LPC_GPIO0->FIOSET,1,29,1);
;;;2818   	else if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,29,1);
;;;2819   	}
;;;2820   else SET_REG(LPC_GPIO0->FIOCLR,1,29,1);
001a22  69e0              LDR      r0,[r4,#0x1c]
001a24  f0405000          ORR      r0,r0,#0x20000000
001a28  61e0              STR      r0,[r4,#0x1c]
                  |L1.6698|
;;;2821   
;;;2822   
;;;2823   #ifndef UKU2071x
;;;2824   //  
;;;2825   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_NET))
;;;2826   	{
;;;2827   	if(mess_data[1]==0) 			SET_REG(LPC_GPIO3->FIOSET,1,SHIFT_REL_AV_NET,1);
;;;2828   	else 						SET_REG(LPC_GPIO3->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;2829   	}
;;;2830   else	if(!(avar_ind_stat&0x00000001)) 	SET_REG(LPC_GPIO3->FIOSET,1,SHIFT_REL_AV_NET,1);
;;;2831   else 							SET_REG(LPC_GPIO3->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;2832   #endif
;;;2833   #ifdef UKU2071x
;;;2834   //  
;;;2835   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_NET))
001a2a  20d2              MOVS     r0,#0xd2
001a2c  f7fffffe          BL       mess_find_unvol
;;;2836   	{
;;;2837   	if(mess_data[1]==0)				SET_REG(LPC_GPIO3->FIOCLR,1,SHIFT_REL_AV_NET,1); 
;;;2838   	else 						SET_REG(LPC_GPIO3->FIOSET,1,SHIFT_REL_AV_NET,1);
;;;2839   	}
;;;2840   else	if(!(avar_ind_stat&0x00000001))	SET_REG(LPC_GPIO3->FIOCLR,1,SHIFT_REL_AV_NET,1);
001a30  4e2c              LDR      r6,|L1.6884|
001a32  b110              CBZ      r0,|L1.6714|
001a34  6828              LDR      r0,[r5,#0]            ;2835  ; mess_data
001a36  2866              CMP      r0,#0x66              ;2835
001a38  d074              BEQ      |L1.6948|
                  |L1.6714|
001a3a  6830              LDR      r0,[r6,#0]  ; avar_ind_stat
001a3c  07c0              LSLS     r0,r0,#31
001a3e  d07d              BEQ      |L1.6972|
;;;2841   else 					  		SET_REG(LPC_GPIO3->FIOSET,1,SHIFT_REL_AV_NET,1);
001a40  6fa0              LDR      r0,[r4,#0x78]
001a42  f0407000          ORR      r0,r0,#0x2000000
001a46  67a0              STR      r0,[r4,#0x78]
                  |L1.6728|
;;;2842   #endif
;;;2843   
;;;2844   #ifdef UKU_3U
;;;2845   //  
;;;2846   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BAT1))
;;;2847   	{
;;;2848   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT1,1);
;;;2849   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT1,1);
;;;2850        }
;;;2851   else 
;;;2852   	{
;;;2853   	if(!(avar_ind_stat&0x00000002)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT1,1);
;;;2854        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT1,1);
;;;2855   	} 
;;;2856   
;;;2857   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BAT2))
;;;2858   	{
;;;2859   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT2,1);
;;;2860   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT2,1);
;;;2861        }
;;;2862   else 
;;;2863   	{
;;;2864   	if(!(avar_ind_stat&0x00000004)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT2,1);
;;;2865        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT2,1);
;;;2866   	} 
;;;2867   
;;;2868   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BPS))
;;;2869   	{
;;;2870   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
;;;2871   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
;;;2872        }
;;;2873   else 
;;;2874   	{
;;;2875   	if(!(avar_ind_stat&0x000007f8)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
;;;2876        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
;;;2877   	} 
;;;2878   
;;;2879   #endif
;;;2880   
;;;2881   
;;;2882   #ifdef UKU_GLONASS
;;;2883   //  
;;;2884   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BAT1))
;;;2885   	{
;;;2886   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT1,1);
;;;2887   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT1,1);
;;;2888        }
;;;2889   else 
;;;2890   	{
;;;2891   	if(!(avar_ind_stat&0x00000002)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT1,1);
;;;2892        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT1,1);
;;;2893   	} 
;;;2894   
;;;2895   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BAT2))
;;;2896   	{
;;;2897   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT2,1);
;;;2898   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT2,1);
;;;2899        }
;;;2900   else 
;;;2901   	{
;;;2902   	if(!(avar_ind_stat&0x00000004)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT2,1);
;;;2903        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT2,1);
;;;2904   	} 
;;;2905   
;;;2906   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BPS))
;;;2907   	{
;;;2908   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
;;;2909   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
;;;2910        }
;;;2911   else 
;;;2912   	{
;;;2913   	if(!(avar_ind_stat&0x000007f8)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
;;;2914        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
;;;2915   	} 
;;;2916   
;;;2917   #endif
;;;2918   
;;;2919   #ifdef U 
;;;2920   
;;;2921   #endif
;;;2922   
;;;2923   #ifdef UKU_RSTKM
;;;2924   
;;;2925   //  
;;;2926   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_COMM))
;;;2927   	{
;;;2928   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_COMM,1);
;;;2929   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_COMM,1);
;;;2930   	}
;;;2931   else 
;;;2932   	{
;;;2933        if(  (!(avar_ind_stat&0x00007fff))/* &&
;;;2934             ((!SK_REL_EN[0]) || (sk_av_stat[0]!=sasON))  &&
;;;2935             ((!SK_REL_EN[1]) || (sk_av_stat[1]!=sasON))  &&
;;;2936             ((!SK_REL_EN[2]) || (sk_av_stat[2]!=sasON))  &&
;;;2937             ((!SK_REL_EN[3]) || (sk_av_stat[3]!=sasON))*/  )SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_COMM,1);
;;;2938        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_COMM,1);
;;;2939   	}
;;;2940   	
;;;2941   
;;;2942   // 
;;;2943   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_LIGHT))
;;;2944   	{
;;;2945   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LIGHT,1);
;;;2946   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LIGHT,1);
;;;2947        }
;;;2948   else 
;;;2949   	{
;;;2950   	if(sk_av_stat[0]!=sasON) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LIGHT,1);
;;;2951        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LIGHT,1);
;;;2952   	}
;;;2953   
;;;2954   
;;;2955   //  
;;;2956   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_LOAD_OFF))
;;;2957   	{
;;;2958   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LOAD_OFF,1);
;;;2959   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LOAD_OFF,1);
;;;2960        }
;;;2961   else if(tloaddisable_cmnd==0)
;;;2962   	{
;;;2963   	SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LOAD_OFF,1);
;;;2964   	}
;;;2965   else if((tloaddisable_cmnd)&&(tloaddisable_cmnd<=11))
;;;2966   	{
;;;2967   	SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LOAD_OFF,1);
;;;2968   	}
;;;2969   
;;;2970   else 
;;;2971   	{
;;;2972   	if(!(tloaddisable_stat==tldsON)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LOAD_OFF,1);
;;;2973        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LOAD_OFF,1);
;;;2974   	} 
;;;2975   
;;;2976   //  
;;;2977   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_VENT))
;;;2978   	{
;;;2979   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;2980   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT,1);
;;;2981   	}
;;;2982   else 
;;;2983   	{
;;;2984   	if(mixer_vent_stat==mvsOFF) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;2985        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT,1);
;;;2986   	} 
;;;2987   
;;;2988   #endif
;;;2989   
;;;2990   #ifdef UKU_KONTUR
;;;2991   
;;;2992   //  
;;;2993   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_COMM))
;;;2994   	{
;;;2995   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_COMM,1);
;;;2996   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_COMM,1);
;;;2997   	}
;;;2998   else 
;;;2999   	{
;;;3000        if(  (!(avar_ind_stat&0x00007fff)) &&
;;;3001             ((!SK_REL_EN[0]) || (sk_av_stat[0]!=sasON))  &&
;;;3002             ((!SK_REL_EN[1]) || (sk_av_stat[1]!=sasON))  &&
;;;3003             ((!SK_REL_EN[2]) || (sk_av_stat[2]!=sasON))  /*&&
;;;3004             ((!SK_REL_EN[3]) || (sk_av_stat[3]!=sasON))*/  )SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_COMM,1);
;;;3005        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_COMM,1);
;;;3006   	}
;;;3007   
;;;3008   	
;;;3009   //rel_warm_plazma=0;
;;;3010   //    
;;;3011   /*
;;;3012   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_WARM))
;;;3013   	{
;;;3014   	if(mess_data[1]==0)
;;;3015   		{
;;;3016   		SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_WARM,1);
;;;3017   		rel_warm_plazma=1;
;;;3018   		}
;;;3019   	else if(mess_data[1]==1) 
;;;3020   		{
;;;3021   		SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_WARM,1);
;;;3022   		rel_warm_plazma=2;
;;;3023   		}
;;;3024        }
;;;3025   else 
;;;3026   	{
;;;3027   	if(warm_stat_k==wsOFF) 
;;;3028   		{
;;;3029   		SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_WARM,1);
;;;3030   		rel_warm_plazma=3;
;;;3031   		}
;;;3032        else 
;;;3033   		{
;;;3034   		SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_WARM,1);
;;;3035   		rel_warm_plazma=4;
;;;3036   		}
;;;3037   	}
;;;3038   */
;;;3039   // 
;;;3040   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_LIGHT))
;;;3041   	{
;;;3042   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LIGHT,1);
;;;3043   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LIGHT,1);
;;;3044        }
;;;3045   else 
;;;3046   	{
;;;3047   	if(sk_av_stat[0]!=sasON) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LIGHT,1);
;;;3048        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LIGHT,1);
;;;3049   	}
;;;3050   
;;;3051   
;;;3052   
;;;3053   //  
;;;3054   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_LOAD_OFF))
;;;3055   	{
;;;3056   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LOAD_OFF,1);
;;;3057   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LOAD_OFF,1);
;;;3058        }
;;;3059   else if(tloaddisable_cmnd==0)
;;;3060   	{
;;;3061   	SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LOAD_OFF,1);
;;;3062   	}
;;;3063   else if((tloaddisable_cmnd)&&(tloaddisable_cmnd<=11))
;;;3064   	{
;;;3065   	SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LOAD_OFF,1);
;;;3066   	}
;;;3067   
;;;3068   else 
;;;3069   	{
;;;3070   	if(!(tloaddisable_stat==tldsON)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LOAD_OFF,1);
;;;3071        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LOAD_OFF,1);
;;;3072   	} 
;;;3073   
;;;3074   //    
;;;3075   if(RELE_LOG)
;;;3076   	{
;;;3077   	if((mess_find_unvol(MESS2RELE_HNDL))&&(mess_data[0]==PARAM_RELE_VENT_WARM))
;;;3078   		{
;;;3079   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT_WARM,1);
;;;3080   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT_WARM,1);
;;;3081   		}
;;;3082   	else 
;;;3083   		{
;;;3084   		if(warm_stat_k==wsOFF) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT_WARM,1);
;;;3085   	     else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT_WARM,1);
;;;3086   		} 
;;;3087   
;;;3088   	}
;;;3089   else 
;;;3090   	{
;;;3091   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_VENT_WARM))
;;;3092   		{
;;;3093   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT_WARM,1);
;;;3094   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT_WARM,1);
;;;3095   		}
;;;3096   	else 
;;;3097   		{
;;;3098   		if(vent_stat_k==vsOFF) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT_WARM,1);
;;;3099   	     else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT_WARM,1);
;;;3100   		} 
;;;3101   	}
;;;3102   #endif
;;;3103   
;;;3104   #ifdef UKU_6U
;;;3105   //  
;;;3106   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BAT1))
;;;3107   	{
;;;3108   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT1,1);
;;;3109   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT1,1);
;;;3110        }
;;;3111   else 
;;;3112   	{
;;;3113   	if(!(avar_ind_stat&0x00000002)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT1,1);
;;;3114        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT1,1);
;;;3115   	} 
;;;3116   
;;;3117   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BAT2))
;;;3118   	{
;;;3119   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT2,1);
;;;3120   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT2,1);
;;;3121       }
;;;3122   else if(NPN_OUT==npnoRELEAVBAT2)
;;;3123   	{
;;;3124   	if(npn_stat==npnsOFF)//&&(mess_find_unvol(MESS2RELE_HNDL))&&(mess_data[0]==PARAM_RELE_NPN))
;;;3125   		{
;;;3126   		/*if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT2,1);
;;;3127   		else if(mess_data[1]==1)*/ SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT2,1);
;;;3128        	}
;;;3129   	else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT2,1);
;;;3130   	}
;;;3131   else 
;;;3132   	{
;;;3133   	if(!(avar_ind_stat&0x00000004)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT2,1);
;;;3134       else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT2,1);
;;;3135   	} 
;;;3136   
;;;3137   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BPS))
;;;3138   	{
;;;3139   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
;;;3140   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
;;;3141        }
;;;3142   else 
;;;3143   	{
;;;3144   	if(!(avar_ind_stat&0x000007f8)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
;;;3145        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
;;;3146   	} 
;;;3147   
;;;3148   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_VENT))
;;;3149   	{
;;;3150   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT,1);
;;;3151   	else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;3152   	}
;;;3153   else if((NPN_OUT==npnoRELEVENT))
;;;3154   	{
;;;3155   	if(npn_stat==npnsOFF)//&&(mess_find_unvol(MESS2RELE_HNDL))&&(mess_data[0]==PARAM_RELE_NPN))
;;;3156   		{
;;;3157   		/*if(mess_data[1]==0)*/ SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;3158   		//else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;3159       	}
;;;3160   	else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT,1);
;;;3161   	}
;;;3162   else 
;;;3163   	{
;;;3164   	if(!vent_stat) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT,1);
;;;3165   	else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;3166   	}
;;;3167   
;;;3168   #endif
;;;3169   
;;;3170   #ifdef UKU_220
;;;3171   //  
;;;3172   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BAT))
;;;3173   	{
;;;3174   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT,1);
;;;3175   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT,1);
;;;3176        }
;;;3177   else 
;;;3178   	{
;;;3179   	if(!(avar_ind_stat&0x00000002)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT,1);
;;;3180        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT,1);
;;;3181   	} 
;;;3182   
;;;3183   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BPS))
;;;3184   	{
;;;3185   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
;;;3186   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
;;;3187        }
;;;3188   else 
;;;3189   	{
;;;3190   	if(!(avar_ind_stat&0x000007f8)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
;;;3191        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
;;;3192   	} 
;;;3193   
;;;3194   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_VENT))
;;;3195   	{
;;;3196   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT,1);
;;;3197   	else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;3198   	}
;;;3199   else 
;;;3200   	{
;;;3201   	if((RELE_VENT_LOGIC==0)||(RELE_VENT_LOGIC==1))
;;;3202   		{
;;;3203   		if(vent_stat) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT,1);
;;;3204   		else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;3205   		}
;;;3206   	else 
;;;3207   		{
;;;3208   		if((avar_ind_stat&0x00000004)) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT,1);
;;;3209        	else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;3210   		}
;;;3211   	}
;;;3212   
;;;3213   #endif
;;;3214   
;;;3215   #ifdef UKU_220_V2
;;;3216   //  
;;;3217   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BAT))
;;;3218   	{
;;;3219   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT,1);
;;;3220   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT,1);
;;;3221        }
;;;3222   else 
;;;3223   	{
;;;3224   	if(!(avar_ind_stat&0x00000002)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT,1);
;;;3225        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT,1);
;;;3226   	} 
;;;3227   
;;;3228   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BPS))
;;;3229   	{
;;;3230   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
;;;3231   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
;;;3232        }
;;;3233   else 
;;;3234   	{
;;;3235   	if(!(avar_ind_stat&0x000007f8)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
;;;3236        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
;;;3237   	} 
;;;3238   
;;;3239   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_VENT))
;;;3240   	{
;;;3241   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT,1);
;;;3242   	else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;3243   	}
;;;3244   else 
;;;3245   	{
;;;3246   	if((RELE_VENT_LOGIC==0)||(RELE_VENT_LOGIC==1))
;;;3247   		{
;;;3248   		if(vent_stat) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT,1);
;;;3249   		else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;3250   		}
;;;3251   	else 
;;;3252   		{
;;;3253   		if((avar_ind_stat&0x00000004)) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT,1);
;;;3254        	else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;3255   		}
;;;3256   	}
;;;3257   
;;;3258   #endif
;;;3259   
;;;3260   #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;3261   
;;;3262   if((AUSW_MAIN==22010)||(AUSW_MAIN==22011))
001a48  4827              LDR      r0,|L1.6888|
;;;3263   	{
;;;3264   	#ifndef UKU2071x
;;;3265   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_NET))
;;;3266   		{
;;;3267   		if(mess_data[1]==0) SET_REG(LPC_GPIO3->FIOSET,1,25,1);
;;;3268   		else SET_REG(LPC_GPIO3->FIOCLR,1,25,1);
;;;3269   		}
;;;3270   	else	if(!(avar_ind_stat&0x00000001)) SET_REG(LPC_GPIO3->FIOSET,1,25,1);
;;;3271   	else SET_REG(LPC_GPIO3->FIOCLR,1,25,1);
;;;3272   	#endif
;;;3273   	#ifdef UKU2071x
;;;3274   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_NET))
;;;3275   		{
;;;3276   		if(mess_data[1]==0) SET_REG(LPC_GPIO3->FIOCLR,1,25,1);
;;;3277   		else SET_REG(LPC_GPIO3->FIOSET,1,25,1);
;;;3278   		}
;;;3279   	else	if(!(avar_ind_stat&0x00000001)) SET_REG(LPC_GPIO3->FIOCLR,1,25,1);
;;;3280   	else SET_REG(LPC_GPIO3->FIOSET,1,25,1);
;;;3281   	#endif
;;;3282   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BPS))
;;;3283   		{
;;;3284   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,7,1);
;;;3285   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,7,1);
;;;3286   	     }
;;;3287   	else 
;;;3288   		{
;;;3289   		if(!(avar_ind_stat&0x100007f8)) SET_REG(LPC_GPIO0->FIOCLR,1,7,1);
;;;3290   	     else SET_REG(LPC_GPIO0->FIOSET,1,7,1);
;;;3291   		} 
;;;3292   
;;;3293   	//  
;;;3294   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BAT))
;;;3295   		{
;;;3296   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,4,1);
;;;3297   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,4,1);
;;;3298        	}
;;;3299   	else 
;;;3300   		{
;;;3301   		if(!(ips_bat_av_stat)) SET_REG(LPC_GPIO0->FIOCLR,1,4,1);
001a4a  f8df80a0          LDR      r8,|L1.6892|
001a4e  4f28              LDR      r7,|L1.6896|
001a50  8800              LDRH     r0,[r0,#0]            ;3262  ; AUSW_MAIN
001a52  f5a041aa          SUB      r1,r0,#0x5500         ;3262
001a56  39fa              SUBS     r1,r1,#0xfa           ;3262
001a58  d001              BEQ      |L1.6750|
001a5a  1e49              SUBS     r1,r1,#1              ;3262
001a5c  d173              BNE      |L1.6982|
                  |L1.6750|
001a5e  20d2              MOVS     r0,#0xd2              ;3274
001a60  f7fffffe          BL       mess_find_unvol
001a64  b110              CBZ      r0,|L1.6764|
001a66  6828              LDR      r0,[r5,#0]            ;3274  ; mess_data
001a68  2866              CMP      r0,#0x66              ;3274
001a6a  d06f              BEQ      |L1.6988|
                  |L1.6764|
001a6c  6830              LDR      r0,[r6,#0]            ;3279  ; avar_ind_stat
001a6e  07c0              LSLS     r0,r0,#31             ;3279
001a70  d078              BEQ      |L1.7012|
001a72  6fa0              LDR      r0,[r4,#0x78]         ;3280
001a74  f0407000          ORR      r0,r0,#0x2000000      ;3280
001a78  67a0              STR      r0,[r4,#0x78]         ;3280
                  |L1.6778|
001a7a  20d2              MOVS     r0,#0xd2              ;3282
001a7c  f7fffffe          BL       mess_find_unvol
001a80  b110              CBZ      r0,|L1.6792|
001a82  6828              LDR      r0,[r5,#0]            ;3282  ; mess_data
001a84  286a              CMP      r0,#0x6a              ;3282
001a86  d074              BEQ      |L1.7026|
                  |L1.6792|
001a88  6830              LDR      r0,[r6,#0]            ;3289  ; avar_ind_stat
001a8a  4238              TST      r0,r7                 ;3289
001a8c  d070              BEQ      |L1.7024|
001a8e  69a0              LDR      r0,[r4,#0x18]         ;3290
001a90  f0400080          ORR      r0,r0,#0x80           ;3290
001a94  61a0              STR      r0,[r4,#0x18]         ;3290
                  |L1.6806|
001a96  20d2              MOVS     r0,#0xd2              ;3294
001a98  f7fffffe          BL       mess_find_unvol
001a9c  b110              CBZ      r0,|L1.6820|
001a9e  6828              LDR      r0,[r5,#0]            ;3294  ; mess_data
001aa0  2867              CMP      r0,#0x67              ;3294
001aa2  d07a              BEQ      |L1.7066|
                  |L1.6820|
001aa4  f8980000          LDRB     r0,[r8,#0]  ; ips_bat_av_stat
001aa8  b3a0              CBZ      r0,|L1.6932|
;;;3302        	else SET_REG(LPC_GPIO0->FIOSET,1,4,1);
001aaa  e024              B        |L1.6902|
                  |L1.6828|
                          DCD      ||area_number.21||+0x96
                  |L1.6832|
                          DCD      ||.bss||+0x420
                  |L1.6836|
                          DCD      ||.bss||
                  |L1.6840|
                          DCD      0x40034000
                  |L1.6844|
                          DCD      0x2009c000
                  |L1.6848|
                          DCD      bps
                  |L1.6852|
                          DCD      NUMIST
                  |L1.6856|
                          DCD      0x4002c000
                  |L1.6860|
                          DCD      0xfff000ff
                  |L1.6864|
                          DCD      bat
                  |L1.6868|
                          DCD      tbatdisable_stat
                  |L1.6872|
                          DCD      tbatdisable_cmnd
                  |L1.6876|
                          DCD      main_1Hz_cnt
                  |L1.6880|
                          DCD      mess_data
                  |L1.6884|
                          DCD      avar_ind_stat
                  |L1.6888|
                          DCD      AUSW_MAIN
                  |L1.6892|
                          DCD      ips_bat_av_stat
                  |L1.6896|
                          DCD      0x100007f8
001af4  e004              B        |L1.6912|
                  |L1.6902|
001af6  69a0              LDR      r0,[r4,#0x18]
001af8  f0400010          ORR      r0,r0,#0x10
001afc  61a0              STR      r0,[r4,#0x18]
001afe  e1d7              B        |L1.7856|
                  |L1.6912|
001b00  6868              LDR      r0,[r5,#4]            ;2817  ; mess_data
001b02  2801              CMP      r0,#1                 ;2817
001b04  d009              BEQ      |L1.6938|
001b06  2800              CMP      r0,#0                 ;2818
001b08  d18f              BNE      |L1.6698|
001b0a  69e0              LDR      r0,[r4,#0x1c]         ;2818
001b0c  f0405000          ORR      r0,r0,#0x20000000     ;2818
001b10  61e0              STR      r0,[r4,#0x1c]         ;2818
001b12  e78a              B        |L1.6698|
                  |L1.6932|
001b14  e050              B        |L1.7096|
001b16  e005              B        |L1.6948|
001b18  e010              B        |L1.6972|
                  |L1.6938|
001b1a  69a0              LDR      r0,[r4,#0x18]         ;2817
001b1c  f0405000          ORR      r0,r0,#0x20000000     ;2817
001b20  61a0              STR      r0,[r4,#0x18]         ;2817
001b22  e782              B        |L1.6698|
                  |L1.6948|
001b24  6868              LDR      r0,[r5,#4]            ;2837  ; mess_data
001b26  b120              CBZ      r0,|L1.6962|
001b28  6fa0              LDR      r0,[r4,#0x78]         ;2838
001b2a  f0407000          ORR      r0,r0,#0x2000000      ;2838
001b2e  67a0              STR      r0,[r4,#0x78]         ;2838
001b30  e78a              B        |L1.6728|
                  |L1.6962|
001b32  6fe0              LDR      r0,[r4,#0x7c]         ;2837
001b34  f0407000          ORR      r0,r0,#0x2000000      ;2837
001b38  67e0              STR      r0,[r4,#0x7c]         ;2837
001b3a  e785              B        |L1.6728|
                  |L1.6972|
001b3c  6fe0              LDR      r0,[r4,#0x7c]         ;2840
001b3e  f0407000          ORR      r0,r0,#0x2000000      ;2840
001b42  67e0              STR      r0,[r4,#0x7c]         ;2840
001b44  e780              B        |L1.6728|
                  |L1.6982|
001b46  e03c              B        |L1.7106|
001b48  e000              B        |L1.6988|
001b4a  e00b              B        |L1.7012|
                  |L1.6988|
001b4c  6868              LDR      r0,[r5,#4]            ;3276  ; mess_data
001b4e  b120              CBZ      r0,|L1.7002|
001b50  6fa0              LDR      r0,[r4,#0x78]         ;3277
001b52  f0407000          ORR      r0,r0,#0x2000000      ;3277
001b56  67a0              STR      r0,[r4,#0x78]         ;3277
001b58  e78f              B        |L1.6778|
                  |L1.7002|
001b5a  6fe0              LDR      r0,[r4,#0x7c]         ;3276
001b5c  f0407000          ORR      r0,r0,#0x2000000      ;3276
001b60  67e0              STR      r0,[r4,#0x7c]         ;3276
001b62  e78a              B        |L1.6778|
                  |L1.7012|
001b64  6fe0              LDR      r0,[r4,#0x7c]         ;3279
001b66  f0407000          ORR      r0,r0,#0x2000000      ;3279
001b6a  67e0              STR      r0,[r4,#0x7c]         ;3279
001b6c  e785              B        |L1.6778|
001b6e  e000              B        |L1.7026|
                  |L1.7024|
001b70  e00e              B        |L1.7056|
                  |L1.7026|
001b72  6868              LDR      r0,[r5,#4]            ;3284  ; mess_data
001b74  b138              CBZ      r0,|L1.7046|
001b76  2801              CMP      r0,#1                 ;3285
001b78  d18d              BNE      |L1.6806|
001b7a  69a0              LDR      r0,[r4,#0x18]         ;3285
001b7c  f0400080          ORR      r0,r0,#0x80           ;3285
001b80  61a0              STR      r0,[r4,#0x18]         ;3285
001b82  e788              B        |L1.6806|
001b84  e009              B        |L1.7066|
                  |L1.7046|
001b86  69e0              LDR      r0,[r4,#0x1c]         ;3284
001b88  f0400080          ORR      r0,r0,#0x80           ;3284
001b8c  61e0              STR      r0,[r4,#0x1c]         ;3284
001b8e  e782              B        |L1.6806|
                  |L1.7056|
001b90  69e0              LDR      r0,[r4,#0x1c]         ;3289
001b92  f0400080          ORR      r0,r0,#0x80           ;3289
001b96  61e0              STR      r0,[r4,#0x1c]         ;3289
001b98  e77d              B        |L1.6806|
                  |L1.7066|
001b9a  6868              LDR      r0,[r5,#4]            ;3296  ; mess_data
001b9c  b110              CBZ      r0,|L1.7076|
001b9e  2801              CMP      r0,#1                 ;3297
001ba0  d005              BEQ      |L1.7086|
001ba2  e185              B        |L1.7856|
                  |L1.7076|
001ba4  69e0              LDR      r0,[r4,#0x1c]         ;3296
001ba6  f0400010          ORR      r0,r0,#0x10           ;3296
001baa  61e0              STR      r0,[r4,#0x1c]         ;3296
001bac  e180              B        |L1.7856|
                  |L1.7086|
001bae  69a0              LDR      r0,[r4,#0x18]         ;3297
001bb0  f0400010          ORR      r0,r0,#0x10           ;3297
001bb4  61a0              STR      r0,[r4,#0x18]         ;3297
001bb6  e17b              B        |L1.7856|
                  |L1.7096|
001bb8  69e0              LDR      r0,[r4,#0x1c]         ;3301
001bba  f0400010          ORR      r0,r0,#0x10           ;3301
001bbe  61e0              STR      r0,[r4,#0x1c]         ;3301
001bc0  e176              B        |L1.7856|
                  |L1.7106|
;;;3303   		}
;;;3304   	}
;;;3305   
;;;3306   else	if(AUSW_MAIN==22023)
001bc2  f5a041ac          SUB      r1,r0,#0x5600
001bc6  3907              SUBS     r1,#7
001bc8  d162              BNE      |L1.7312|
;;;3307   	{
;;;3308   
;;;3309   	//  
;;;3310   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BAT))
001bca  20d2              MOVS     r0,#0xd2
001bcc  f7fffffe          BL       mess_find_unvol
001bd0  b110              CBZ      r0,|L1.7128|
001bd2  6828              LDR      r0,[r5,#0]  ; mess_data
001bd4  2867              CMP      r0,#0x67
001bd6  d023              BEQ      |L1.7200|
                  |L1.7128|
;;;3311   		{
;;;3312   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,4,1);
;;;3313   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,4,1);
;;;3314        	}
;;;3315   	else 
;;;3316   		{
;;;3317   		if(!(ips_bat_av_stat)) SET_REG(LPC_GPIO0->FIOCLR,1,4,1);
001bd8  f8980000          LDRB     r0,[r8,#0]  ; ips_bat_av_stat
001bdc  b370              CBZ      r0,|L1.7228|
;;;3318        	else SET_REG(LPC_GPIO0->FIOSET,1,4,1);
001bde  69a0              LDR      r0,[r4,#0x18]
001be0  f0400010          ORR      r0,r0,#0x10
001be4  61a0              STR      r0,[r4,#0x18]
                  |L1.7142|
;;;3319   		} 
;;;3320   
;;;3321   
;;;3322   	//         .    
;;;3323   	#ifndef UKU2071x
;;;3324   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_NET))
;;;3325   		{
;;;3326   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;3327   		else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_NET,1);
;;;3328   		}
;;;3329   	else	if(!(avar_ind_stat&0x00000001)) SET_REG(LPC_GPIO1->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;3330   	else SET_REG(LPC_GPIO3->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;3331   	#endif
;;;3332   	#ifdef UKU2071x
;;;3333   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_NET))
001be6  20d2              MOVS     r0,#0xd2
001be8  f7fffffe          BL       mess_find_unvol
001bec  b110              CBZ      r0,|L1.7156|
001bee  6828              LDR      r0,[r5,#0]  ; mess_data
001bf0  2866              CMP      r0,#0x66
001bf2  d028              BEQ      |L1.7238|
                  |L1.7156|
;;;3334   		{
;;;3335   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_NET,1);
;;;3336   		else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;3337   		}
;;;3338   	else	if(!(avar_ind_stat&0x00000001)) SET_REG(LPC_GPIO1->FIOSET,1,SHIFT_REL_AV_NET,1);
001bf4  6830              LDR      r0,[r6,#0]  ; avar_ind_stat
001bf6  07c0              LSLS     r0,r0,#31
001bf8  d031              BEQ      |L1.7262|
;;;3339   	else SET_REG(LPC_GPIO3->FIOSET,1,SHIFT_REL_AV_NET,1);
001bfa  6fa0              LDR      r0,[r4,#0x78]
001bfc  f0407000          ORR      r0,r0,#0x2000000
001c00  67a0              STR      r0,[r4,#0x78]
                  |L1.7170|
;;;3340   	#endif
;;;3341   
;;;3342   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BPS))
001c02  20d2              MOVS     r0,#0xd2
001c04  f7fffffe          BL       mess_find_unvol
001c08  b110              CBZ      r0,|L1.7184|
001c0a  6828              LDR      r0,[r5,#0]  ; mess_data
001c0c  286a              CMP      r0,#0x6a
001c0e  d02b              BEQ      |L1.7272|
                  |L1.7184|
;;;3343   		{
;;;3344   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,7,1);
;;;3345   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,7,1);
;;;3346   	     }
;;;3347   	else 
;;;3348   		{
;;;3349   		if(!(avar_ind_stat&0x100007f8)) SET_REG(LPC_GPIO0->FIOCLR,1,7,1);
001c10  6830              LDR      r0,[r6,#0]  ; avar_ind_stat
001c12  4238              TST      r0,r7
001c14  d037              BEQ      |L1.7302|
;;;3350   	     else SET_REG(LPC_GPIO0->FIOSET,1,7,1);
001c16  69a0              LDR      r0,[r4,#0x18]
001c18  f0400080          ORR      r0,r0,#0x80
001c1c  61a0              STR      r0,[r4,#0x18]
001c1e  e147              B        |L1.7856|
                  |L1.7200|
001c20  6868              LDR      r0,[r5,#4]            ;3312  ; mess_data
001c22  b130              CBZ      r0,|L1.7218|
001c24  2801              CMP      r0,#1                 ;3313
001c26  d1de              BNE      |L1.7142|
001c28  69a0              LDR      r0,[r4,#0x18]         ;3313
001c2a  f0400010          ORR      r0,r0,#0x10           ;3313
001c2e  61a0              STR      r0,[r4,#0x18]         ;3313
001c30  e7d9              B        |L1.7142|
                  |L1.7218|
001c32  69e0              LDR      r0,[r4,#0x1c]         ;3312
001c34  f0400010          ORR      r0,r0,#0x10           ;3312
001c38  61e0              STR      r0,[r4,#0x1c]         ;3312
001c3a  e7d4              B        |L1.7142|
                  |L1.7228|
001c3c  69e0              LDR      r0,[r4,#0x1c]         ;3317
001c3e  f0400010          ORR      r0,r0,#0x10           ;3317
001c42  61e0              STR      r0,[r4,#0x1c]         ;3317
001c44  e7cf              B        |L1.7142|
                  |L1.7238|
001c46  6868              LDR      r0,[r5,#4]            ;3335  ; mess_data
001c48  b120              CBZ      r0,|L1.7252|
001c4a  69e0              LDR      r0,[r4,#0x1c]         ;3336
001c4c  f0407000          ORR      r0,r0,#0x2000000      ;3336
001c50  61e0              STR      r0,[r4,#0x1c]         ;3336
001c52  e7d6              B        |L1.7170|
                  |L1.7252|
001c54  69a0              LDR      r0,[r4,#0x18]         ;3335
001c56  f0407000          ORR      r0,r0,#0x2000000      ;3335
001c5a  61a0              STR      r0,[r4,#0x18]         ;3335
001c5c  e7d1              B        |L1.7170|
                  |L1.7262|
001c5e  6ba0              LDR      r0,[r4,#0x38]         ;3338
001c60  f0407000          ORR      r0,r0,#0x2000000      ;3338
001c64  63a0              STR      r0,[r4,#0x38]         ;3338
001c66  e7cc              B        |L1.7170|
                  |L1.7272|
001c68  6868              LDR      r0,[r5,#4]            ;3344  ; mess_data
001c6a  b110              CBZ      r0,|L1.7282|
001c6c  2801              CMP      r0,#1                 ;3345
001c6e  d005              BEQ      |L1.7292|
001c70  e11e              B        |L1.7856|
                  |L1.7282|
001c72  69e0              LDR      r0,[r4,#0x1c]         ;3344
001c74  f0400080          ORR      r0,r0,#0x80           ;3344
001c78  61e0              STR      r0,[r4,#0x1c]         ;3344
001c7a  e119              B        |L1.7856|
                  |L1.7292|
001c7c  69a0              LDR      r0,[r4,#0x18]         ;3345
001c7e  f0400080          ORR      r0,r0,#0x80           ;3345
001c82  61a0              STR      r0,[r4,#0x18]         ;3345
001c84  e114              B        |L1.7856|
                  |L1.7302|
001c86  69e0              LDR      r0,[r4,#0x1c]         ;3349
001c88  f0400080          ORR      r0,r0,#0x80           ;3349
001c8c  61e0              STR      r0,[r4,#0x1c]         ;3349
001c8e  e10f              B        |L1.7856|
                  |L1.7312|
;;;3351   		} 
;;;3352   	}
;;;3353   else	if(AUSW_MAIN==22043)
001c90  f5a041ac          SUB      r1,r0,#0x5600
001c94  391b              SUBS     r1,r1,#0x1b
001c96  d170              BNE      |L1.7546|
;;;3354   	{
;;;3355   	//  
;;;3356   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BAT))
001c98  20d2              MOVS     r0,#0xd2
001c9a  f7fffffe          BL       mess_find_unvol
001c9e  b110              CBZ      r0,|L1.7334|
001ca0  6828              LDR      r0,[r5,#0]  ; mess_data
001ca2  2867              CMP      r0,#0x67
001ca4  d031              BEQ      |L1.7434|
                  |L1.7334|
;;;3357   		{
;;;3358   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,4,1);
;;;3359   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,4,1);
;;;3360        	}
;;;3361   	else 
;;;3362   		{
;;;3363   		if(!(ips_bat_av_stat)) SET_REG(LPC_GPIO0->FIOCLR,1,4,1);
001ca6  f8980000          LDRB     r0,[r8,#0]  ; ips_bat_av_stat
001caa  b3b8              CBZ      r0,|L1.7452|
;;;3364        	else SET_REG(LPC_GPIO0->FIOSET,1,4,1);
001cac  69a0              LDR      r0,[r4,#0x18]
001cae  f0400010          ORR      r0,r0,#0x10
001cb2  61a0              STR      r0,[r4,#0x18]
                  |L1.7348|
;;;3365   		} 
;;;3366   	//         .    
;;;3367   	#ifndef UKU2071x 
;;;3368   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_NET))
;;;3369   		{
;;;3370   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;3371   		else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_NET,1);
;;;3372   		}
;;;3373   	else	if(!(avar_ind_stat&0x00000001)) SET_REG(LPC_GPIO1->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;3374   	else SET_REG(LPC_GPIO3->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;3375   	#endif
;;;3376   	#ifdef UKU2071x 
;;;3377   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_NET))
001cb4  20d2              MOVS     r0,#0xd2
001cb6  f7fffffe          BL       mess_find_unvol
001cba  b110              CBZ      r0,|L1.7362|
001cbc  6828              LDR      r0,[r5,#0]  ; mess_data
001cbe  2866              CMP      r0,#0x66
001cc0  d037              BEQ      |L1.7474|
                  |L1.7362|
;;;3378   		{
;;;3379   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_NET,1);
;;;3380   		else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;3381   		}
;;;3382   	else	if(!(avar_ind_stat&0x00000001)) SET_REG(LPC_GPIO1->FIOSET,1,SHIFT_REL_AV_NET,1);
001cc2  6830              LDR      r0,[r6,#0]  ; avar_ind_stat
001cc4  07c0              LSLS     r0,r0,#31
001cc6  d040              BEQ      |L1.7498|
;;;3383   	else SET_REG(LPC_GPIO3->FIOSET,1,SHIFT_REL_AV_NET,1);
001cc8  6fa0              LDR      r0,[r4,#0x78]
001cca  f0407000          ORR      r0,r0,#0x2000000
001cce  67a0              STR      r0,[r4,#0x78]
                  |L1.7376|
;;;3384   	#endif
;;;3385   
;;;3386   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BPS))
001cd0  20d2              MOVS     r0,#0xd2
001cd2  f7fffffe          BL       mess_find_unvol
001cd6  b110              CBZ      r0,|L1.7390|
001cd8  6828              LDR      r0,[r5,#0]  ; mess_data
001cda  286a              CMP      r0,#0x6a
001cdc  d03a              BEQ      |L1.7508|
                  |L1.7390|
;;;3387   		{
;;;3388   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,7,1);
;;;3389   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,7,1);
;;;3390   	     }
;;;3391   	else 
;;;3392   		{
;;;3393   		if(!(avar_ind_stat&0x100007f8)) SET_REG(LPC_GPIO0->FIOCLR,1,7,1);
001cde  6830              LDR      r0,[r6,#0]  ; avar_ind_stat
001ce0  4238              TST      r0,r7
001ce2  d045              BEQ      |L1.7536|
;;;3394   	     else SET_REG(LPC_GPIO0->FIOSET,1,7,1);
001ce4  69a0              LDR      r0,[r4,#0x18]
001ce6  f0400080          ORR      r0,r0,#0x80
001cea  61a0              STR      r0,[r4,#0x18]
                  |L1.7404|
;;;3395   		}
;;;3396   	//  
;;;3397   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BPS))
001cec  20d2              MOVS     r0,#0xd2
001cee  f7fffffe          BL       mess_find_unvol
001cf2  b110              CBZ      r0,|L1.7418|
001cf4  6828              LDR      r0,[r5,#0]  ; mess_data
001cf6  286a              CMP      r0,#0x6a
001cf8  d040              BEQ      |L1.7548|
                  |L1.7418|
;;;3398   		{
;;;3399   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
;;;3400   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
;;;3401        	}
;;;3402   	else 
;;;3403   		{
;;;3404   		if(!(avar_ind_stat&0x100007f8)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
001cfa  6830              LDR      r0,[r6,#0]  ; avar_ind_stat
001cfc  4238              TST      r0,r7
001cfe  d04c              BEQ      |L1.7578|
;;;3405        	else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
001d00  69a0              LDR      r0,[r4,#0x18]
001d02  f0400020          ORR      r0,r0,#0x20
001d06  61a0              STR      r0,[r4,#0x18]
001d08  e0d2              B        |L1.7856|
                  |L1.7434|
001d0a  6868              LDR      r0,[r5,#4]            ;3358  ; mess_data
001d0c  b138              CBZ      r0,|L1.7454|
001d0e  2801              CMP      r0,#1                 ;3359
001d10  d1d0              BNE      |L1.7348|
001d12  69a0              LDR      r0,[r4,#0x18]         ;3359
001d14  f0400010          ORR      r0,r0,#0x10           ;3359
001d18  61a0              STR      r0,[r4,#0x18]         ;3359
001d1a  e7cb              B        |L1.7348|
                  |L1.7452|
001d1c  e004              B        |L1.7464|
                  |L1.7454|
001d1e  69e0              LDR      r0,[r4,#0x1c]         ;3358
001d20  f0400010          ORR      r0,r0,#0x10           ;3358
001d24  61e0              STR      r0,[r4,#0x1c]         ;3358
001d26  e7c5              B        |L1.7348|
                  |L1.7464|
001d28  69e0              LDR      r0,[r4,#0x1c]         ;3363
001d2a  f0400010          ORR      r0,r0,#0x10           ;3363
001d2e  61e0              STR      r0,[r4,#0x1c]         ;3363
001d30  e7c0              B        |L1.7348|
                  |L1.7474|
001d32  6868              LDR      r0,[r5,#4]            ;3379  ; mess_data
001d34  b120              CBZ      r0,|L1.7488|
001d36  69e0              LDR      r0,[r4,#0x1c]         ;3380
001d38  f0407000          ORR      r0,r0,#0x2000000      ;3380
001d3c  61e0              STR      r0,[r4,#0x1c]         ;3380
001d3e  e7c7              B        |L1.7376|
                  |L1.7488|
001d40  69a0              LDR      r0,[r4,#0x18]         ;3379
001d42  f0407000          ORR      r0,r0,#0x2000000      ;3379
001d46  61a0              STR      r0,[r4,#0x18]         ;3379
001d48  e7c2              B        |L1.7376|
                  |L1.7498|
001d4a  6ba0              LDR      r0,[r4,#0x38]         ;3382
001d4c  f0407000          ORR      r0,r0,#0x2000000      ;3382
001d50  63a0              STR      r0,[r4,#0x38]         ;3382
001d52  e7bd              B        |L1.7376|
                  |L1.7508|
001d54  6868              LDR      r0,[r5,#4]            ;3388  ; mess_data
001d56  b130              CBZ      r0,|L1.7526|
001d58  2801              CMP      r0,#1                 ;3389
001d5a  d1c7              BNE      |L1.7404|
001d5c  69a0              LDR      r0,[r4,#0x18]         ;3389
001d5e  f0400080          ORR      r0,r0,#0x80           ;3389
001d62  61a0              STR      r0,[r4,#0x18]         ;3389
001d64  e7c2              B        |L1.7404|
                  |L1.7526|
001d66  69e0              LDR      r0,[r4,#0x1c]         ;3388
001d68  f0400080          ORR      r0,r0,#0x80           ;3388
001d6c  61e0              STR      r0,[r4,#0x1c]         ;3388
001d6e  e7bd              B        |L1.7404|
                  |L1.7536|
001d70  69e0              LDR      r0,[r4,#0x1c]         ;3393
001d72  f0400080          ORR      r0,r0,#0x80           ;3393
001d76  61e0              STR      r0,[r4,#0x1c]         ;3393
001d78  e7b8              B        |L1.7404|
                  |L1.7546|
001d7a  e013              B        |L1.7588|
                  |L1.7548|
001d7c  6868              LDR      r0,[r5,#4]            ;3399  ; mess_data
001d7e  b110              CBZ      r0,|L1.7558|
001d80  2801              CMP      r0,#1                 ;3400
001d82  d005              BEQ      |L1.7568|
001d84  e094              B        |L1.7856|
                  |L1.7558|
001d86  69e0              LDR      r0,[r4,#0x1c]         ;3399
001d88  f0400020          ORR      r0,r0,#0x20           ;3399
001d8c  61e0              STR      r0,[r4,#0x1c]         ;3399
001d8e  e08f              B        |L1.7856|
                  |L1.7568|
001d90  69a0              LDR      r0,[r4,#0x18]         ;3400
001d92  f0400020          ORR      r0,r0,#0x20           ;3400
001d96  61a0              STR      r0,[r4,#0x18]         ;3400
001d98  e08a              B        |L1.7856|
                  |L1.7578|
001d9a  69e0              LDR      r0,[r4,#0x1c]         ;3404
001d9c  f0400020          ORR      r0,r0,#0x20           ;3404
001da0  61e0              STR      r0,[r4,#0x1c]         ;3404
001da2  e085              B        |L1.7856|
                  |L1.7588|
;;;3406   		} 
;;;3407   	}
;;;3408   else	if((AUSW_MAIN==22033)||(AUSW_MAIN==22018))
001da4  f5a041ac          SUB      r1,r0,#0x5600
001da8  3911              SUBS     r1,r1,#0x11
001daa  d001              BEQ      |L1.7600|
001dac  310f              ADDS     r1,r1,#0xf
001dae  d163              BNE      |L1.7800|
                  |L1.7600|
;;;3409   	{
;;;3410   	#ifndef UKU2071x 
;;;3411   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_NET))
;;;3412   		{
;;;3413   		if(mess_data[1]==0) SET_REG(LPC_GPIO3->FIOSET,1,25,1);
;;;3414   		else SET_REG(LPC_GPIO3->FIOCLR,1,25,1);
;;;3415   		}
;;;3416   	else	if(!(avar_ind_stat&0x00000001)) SET_REG(LPC_GPIO3->FIOSET,1,25,1);
;;;3417   	else SET_REG(LPC_GPIO3->FIOCLR,1,25,1);
;;;3418   	#endif
;;;3419   	#ifdef UKU2071x 
;;;3420   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_NET))
001db0  20d2              MOVS     r0,#0xd2
001db2  f7fffffe          BL       mess_find_unvol
001db6  b110              CBZ      r0,|L1.7614|
001db8  6828              LDR      r0,[r5,#0]  ; mess_data
001dba  2866              CMP      r0,#0x66
001dbc  d023              BEQ      |L1.7686|
                  |L1.7614|
;;;3421   		{
;;;3422   		if(mess_data[1]==0) SET_REG(LPC_GPIO3->FIOCLR,1,25,1);
;;;3423   		else SET_REG(LPC_GPIO3->FIOSET,1,25,1);
;;;3424   		}
;;;3425   	else	if(!(avar_ind_stat&0x00000001)) SET_REG(LPC_GPIO3->FIOCLR,1,25,1);
001dbe  6830              LDR      r0,[r6,#0]  ; avar_ind_stat
001dc0  07c0              LSLS     r0,r0,#31
001dc2  d02c              BEQ      |L1.7710|
;;;3426   	else SET_REG(LPC_GPIO3->FIOSET,1,25,1);
001dc4  6fa0              LDR      r0,[r4,#0x78]
001dc6  f0407000          ORR      r0,r0,#0x2000000
001dca  67a0              STR      r0,[r4,#0x78]
                  |L1.7628|
;;;3427   	#endif
;;;3428   	
;;;3429   	
;;;3430   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BPS))
001dcc  20d2              MOVS     r0,#0xd2
001dce  f7fffffe          BL       mess_find_unvol
001dd2  b110              CBZ      r0,|L1.7642|
001dd4  6828              LDR      r0,[r5,#0]  ; mess_data
001dd6  286a              CMP      r0,#0x6a
001dd8  d026              BEQ      |L1.7720|
                  |L1.7642|
;;;3431   		{
;;;3432   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,7,1);
;;;3433   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,7,1);
;;;3434   	     }
;;;3435   	else 
;;;3436   		{
;;;3437   		if(!(avar_ind_stat&0x100007f8)) SET_REG(LPC_GPIO0->FIOCLR,1,7,1);
001dda  6830              LDR      r0,[r6,#0]  ; avar_ind_stat
001ddc  4238              TST      r0,r7
001dde  d031              BEQ      |L1.7748|
;;;3438   	     else SET_REG(LPC_GPIO0->FIOSET,1,7,1);
001de0  69a0              LDR      r0,[r4,#0x18]
001de2  f0400080          ORR      r0,r0,#0x80
001de6  61a0              STR      r0,[r4,#0x18]
                  |L1.7656|
;;;3439   		} 
;;;3440   
;;;3441   	//  
;;;3442   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BAT))
001de8  20d2              MOVS     r0,#0xd2
001dea  f7fffffe          BL       mess_find_unvol
001dee  b110              CBZ      r0,|L1.7670|
001df0  6828              LDR      r0,[r5,#0]  ; mess_data
001df2  2867              CMP      r0,#0x67
001df4  d02b              BEQ      |L1.7758|
                  |L1.7670|
;;;3443   		{
;;;3444   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,4,1);
;;;3445   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,4,1);
;;;3446        	}
;;;3447   	else 
;;;3448   		{
;;;3449   		if(!(ips_bat_av_stat)) SET_REG(LPC_GPIO0->FIOCLR,1,4,1);
001df6  f8980000          LDRB     r0,[r8,#0]  ; ips_bat_av_stat
001dfa  b390              CBZ      r0,|L1.7778|
;;;3450        	else SET_REG(LPC_GPIO0->FIOSET,1,4,1);
001dfc  69a0              LDR      r0,[r4,#0x18]
001dfe  f0400010          ORR      r0,r0,#0x10
001e02  61a0              STR      r0,[r4,#0x18]
001e04  e054              B        |L1.7856|
                  |L1.7686|
001e06  6868              LDR      r0,[r5,#4]            ;3422  ; mess_data
001e08  b120              CBZ      r0,|L1.7700|
001e0a  6fa0              LDR      r0,[r4,#0x78]         ;3423
001e0c  f0407000          ORR      r0,r0,#0x2000000      ;3423
001e10  67a0              STR      r0,[r4,#0x78]         ;3423
001e12  e7db              B        |L1.7628|
                  |L1.7700|
001e14  6fe0              LDR      r0,[r4,#0x7c]         ;3422
001e16  f0407000          ORR      r0,r0,#0x2000000      ;3422
001e1a  67e0              STR      r0,[r4,#0x7c]         ;3422
001e1c  e7d6              B        |L1.7628|
                  |L1.7710|
001e1e  6fe0              LDR      r0,[r4,#0x7c]         ;3425
001e20  f0407000          ORR      r0,r0,#0x2000000      ;3425
001e24  67e0              STR      r0,[r4,#0x7c]         ;3425
001e26  e7d1              B        |L1.7628|
                  |L1.7720|
001e28  6868              LDR      r0,[r5,#4]            ;3432  ; mess_data
001e2a  b130              CBZ      r0,|L1.7738|
001e2c  2801              CMP      r0,#1                 ;3433
001e2e  d1db              BNE      |L1.7656|
001e30  69a0              LDR      r0,[r4,#0x18]         ;3433
001e32  f0400080          ORR      r0,r0,#0x80           ;3433
001e36  61a0              STR      r0,[r4,#0x18]         ;3433
001e38  e7d6              B        |L1.7656|
                  |L1.7738|
001e3a  69e0              LDR      r0,[r4,#0x1c]         ;3432
001e3c  f0400080          ORR      r0,r0,#0x80           ;3432
001e40  61e0              STR      r0,[r4,#0x1c]         ;3432
001e42  e7d1              B        |L1.7656|
                  |L1.7748|
001e44  69e0              LDR      r0,[r4,#0x1c]         ;3437
001e46  f0400080          ORR      r0,r0,#0x80           ;3437
001e4a  61e0              STR      r0,[r4,#0x1c]         ;3437
001e4c  e7cc              B        |L1.7656|
                  |L1.7758|
001e4e  6868              LDR      r0,[r5,#4]            ;3444  ; mess_data
001e50  b110              CBZ      r0,|L1.7768|
001e52  2801              CMP      r0,#1                 ;3445
001e54  d006              BEQ      |L1.7780|
001e56  e02b              B        |L1.7856|
                  |L1.7768|
001e58  69e0              LDR      r0,[r4,#0x1c]         ;3444
001e5a  f0400010          ORR      r0,r0,#0x10           ;3444
001e5e  61e0              STR      r0,[r4,#0x1c]         ;3444
001e60  e026              B        |L1.7856|
                  |L1.7778|
001e62  e004              B        |L1.7790|
                  |L1.7780|
001e64  69a0              LDR      r0,[r4,#0x18]         ;3445
001e66  f0400010          ORR      r0,r0,#0x10           ;3445
001e6a  61a0              STR      r0,[r4,#0x18]         ;3445
001e6c  e020              B        |L1.7856|
                  |L1.7790|
001e6e  69e0              LDR      r0,[r4,#0x1c]         ;3449
001e70  f0400010          ORR      r0,r0,#0x10           ;3449
001e74  61e0              STR      r0,[r4,#0x1c]         ;3449
001e76  e01b              B        |L1.7856|
                  |L1.7800|
;;;3451   		} 
;;;3452   	} 	 
;;;3453   else	
;;;3454   	{
;;;3455   	//         .    
;;;3456   	#ifndef UKU2071x 
;;;3457   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_NET))
;;;3458   		{
;;;3459   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;3460   		else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_NET,1);
;;;3461   		}
;;;3462   	else	if(!(avar_ind_stat&0x00000001)) SET_REG(LPC_GPIO1->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;3463   	else SET_REG(LPC_GPIO3->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;3464   	#endif
;;;3465   	#ifdef UKU2071x 
;;;3466   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_NET))
001e78  20d2              MOVS     r0,#0xd2
001e7a  f7fffffe          BL       mess_find_unvol
001e7e  b110              CBZ      r0,|L1.7814|
001e80  6828              LDR      r0,[r5,#0]  ; mess_data
001e82  2866              CMP      r0,#0x66
001e84  d02d              BEQ      |L1.7906|
                  |L1.7814|
;;;3467   		{
;;;3468   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_NET,1);
;;;3469   		else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;3470   		}
;;;3471   	else	if(!(avar_ind_stat&0x00000001)) SET_REG(LPC_GPIO1->FIOSET,1,SHIFT_REL_AV_NET,1);
001e86  6830              LDR      r0,[r6,#0]  ; avar_ind_stat
001e88  07c0              LSLS     r0,r0,#31
001e8a  d036              BEQ      |L1.7930|
;;;3472   	else SET_REG(LPC_GPIO3->FIOSET,1,SHIFT_REL_AV_NET,1);
001e8c  6fa0              LDR      r0,[r4,#0x78]
001e8e  f0407000          ORR      r0,r0,#0x2000000
001e92  67a0              STR      r0,[r4,#0x78]
                  |L1.7828|
;;;3473   	#endif
;;;3474   
;;;3475   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BPS))
001e94  20d2              MOVS     r0,#0xd2
001e96  f7fffffe          BL       mess_find_unvol
001e9a  b110              CBZ      r0,|L1.7842|
001e9c  6828              LDR      r0,[r5,#0]  ; mess_data
001e9e  286a              CMP      r0,#0x6a
001ea0  d030              BEQ      |L1.7940|
                  |L1.7842|
;;;3476   		{
;;;3477   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
;;;3478   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
;;;3479        	}
;;;3480   	else 
;;;3481   		{
;;;3482   		if(!(avar_ind_stat&0x100007f8)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
001ea2  6830              LDR      r0,[r6,#0]  ; avar_ind_stat
001ea4  4238              TST      r0,r7
001ea6  d03b              BEQ      |L1.7968|
;;;3483        	else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
001ea8  69a0              LDR      r0,[r4,#0x18]
001eaa  f0400020          ORR      r0,r0,#0x20
001eae  61a0              STR      r0,[r4,#0x18]
                  |L1.7856|
;;;3484   		}
;;;3485   	}
;;;3486   //   
;;;3487   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_EXT))	 
001eb0  20d2              MOVS     r0,#0xd2
001eb2  f7fffffe          BL       mess_find_unvol
001eb6  b110              CBZ      r0,|L1.7870|
001eb8  6828              LDR      r0,[r5,#0]  ; mess_data
001eba  2871              CMP      r0,#0x71
001ebc  d036              BEQ      |L1.7980|
                  |L1.7870|
;;;3488   	{
;;;3489   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,9,1);
;;;3490   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,9,1);
;;;3491   	}
;;;3492   else if(DOP_RELE_FUNC==0)	//     
001ebe  48ff              LDR      r0,|L1.8892|
001ec0  f9b00000          LDRSH    r0,[r0,#0]  ; DOP_RELE_FUNC
001ec4  b388              CBZ      r0,|L1.7978|
;;;3493   	{
;;;3494   	if(!speedChIsOn) SET_REG(LPC_GPIO0->FIOCLR,1,9,1);
;;;3495   	else SET_REG(LPC_GPIO0->FIOSET,1,9,1);
;;;3496   	}
;;;3497   else if(DOP_RELE_FUNC==1)  //      
001ec6  2801              CMP      r0,#1
001ec8  d10a              BNE      |L1.7904|
;;;3498   	{
;;;3499   	if((mess_find_unvol(MESS2RELE_HNDL))&& (mess_data[0]==PARAM_RELE_BAT_IS_DISCHARGED)) SET_REG(LPC_GPIO0->FIOCLR,1,9,1);
001eca  20d2              MOVS     r0,#0xd2
001ecc  f7fffffe          BL       mess_find_unvol
001ed0  b110              CBZ      r0,|L1.7896|
001ed2  6828              LDR      r0,[r5,#0]  ; mess_data
001ed4  2872              CMP      r0,#0x72
001ed6  d044              BEQ      |L1.8034|
                  |L1.7896|
;;;3500   	else SET_REG(LPC_GPIO0->FIOSET,1,9,1);
001ed8  69a0              LDR      r0,[r4,#0x18]
001eda  f4407000          ORR      r0,r0,#0x200
001ede  61a0              STR      r0,[r4,#0x18]
                  |L1.7904|
;;;3501   	}	 	
;;;3502   #endif
;;;3503   
;;;3504   #ifdef UKU_KONTUR
;;;3505   
;;;3506   //  
;;;3507   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_COMM))
;;;3508   	{
;;;3509   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_COMM,1);
;;;3510   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_COMM,1);
;;;3511   	}
;;;3512   else 
;;;3513   	{
;;;3514        if(  (!(avar_ind_stat&0x00007fff)) &&
;;;3515             ((!SK_REL_EN[0]) || (sk_av_stat[0]!=sasON))  &&
;;;3516             ((!SK_REL_EN[1]) || (sk_av_stat[1]!=sasON))  &&
;;;3517             ((!SK_REL_EN[2]) || (sk_av_stat[2]!=sasON))  /*&&
;;;3518             ((!SK_REL_EN[3]) || (sk_av_stat[3]!=sasON))*/  )SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_COMM,1);
;;;3519        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_COMM,1);
;;;3520   	}
;;;3521   
;;;3522   	
;;;3523   //rel_warm_plazma=0;
;;;3524   //    
;;;3525   /*
;;;3526   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_WARM))
;;;3527   	{
;;;3528   	if(mess_data[1]==0)
;;;3529   		{
;;;3530   		SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_WARM,1);
;;;3531   		rel_warm_plazma=1;
;;;3532   		}
;;;3533   	else if(mess_data[1]==1) 
;;;3534   		{
;;;3535   		SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_WARM,1);
;;;3536   		rel_warm_plazma=2;
;;;3537   		}
;;;3538        }
;;;3539   else 
;;;3540   	{
;;;3541   	if(warm_stat_k==wsOFF) 
;;;3542   		{
;;;3543   		SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_WARM,1);
;;;3544   		rel_warm_plazma=3;
;;;3545   		}
;;;3546        else 
;;;3547   		{
;;;3548   		SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_WARM,1);
;;;3549   		rel_warm_plazma=4;
;;;3550   		}
;;;3551   	}
;;;3552   */
;;;3553   // 
;;;3554   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_LIGHT))
;;;3555   	{
;;;3556   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LIGHT,1);
;;;3557   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LIGHT,1);
;;;3558        }
;;;3559   else 
;;;3560   	{
;;;3561   	if(sk_av_stat[0]!=sasON) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LIGHT,1);
;;;3562        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LIGHT,1);
;;;3563   	}
;;;3564   
;;;3565   
;;;3566   
;;;3567   //  
;;;3568   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_LOAD_OFF))
;;;3569   	{
;;;3570   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LOAD_OFF,1);
;;;3571   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LOAD_OFF,1);
;;;3572        }
;;;3573   else if(tloaddisable_cmnd==0)
;;;3574   	{
;;;3575   	SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LOAD_OFF,1);
;;;3576   	}
;;;3577   else if((tloaddisable_cmnd)&&(tloaddisable_cmnd<=11))
;;;3578   	{
;;;3579   	SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LOAD_OFF,1);
;;;3580   	}
;;;3581   
;;;3582   else 
;;;3583   	{
;;;3584   	if(!(tloaddisable_stat==tldsON)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LOAD_OFF,1);
;;;3585        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LOAD_OFF,1);
;;;3586   	} 
;;;3587   
;;;3588   //    
;;;3589   if(RELE_LOG)
;;;3590   	{
;;;3591   	if((mess_find_unvol(MESS2RELE_HNDL))&&(mess_data[0]==PARAM_RELE_VENT_WARM))
;;;3592   		{
;;;3593   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT_WARM,1);
;;;3594   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT_WARM,1);
;;;3595   		}
;;;3596   	else 
;;;3597   		{
;;;3598   		if(warm_stat_k==wsOFF) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT_WARM,1);
;;;3599   	     else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT_WARM,1);
;;;3600   		} 
;;;3601   
;;;3602   	}
;;;3603   else 
;;;3604   	{
;;;3605   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_VENT_WARM))
;;;3606   		{
;;;3607   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT_WARM,1);
;;;3608   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT_WARM,1);
;;;3609   		}
;;;3610   	else 
;;;3611   		{
;;;3612   		if(vent_stat_k==vsOFF) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT_WARM,1);
;;;3613   	     else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT_WARM,1);
;;;3614   		} 
;;;3615   	}
;;;3616   #endif
;;;3617   
;;;3618   
;;;3619   #ifdef UKU_TELECORE2015
;;;3620   //  
;;;3621   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_NET))
;;;3622   	{
;;;3623   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;3624   	else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_NET,1);
;;;3625   	}
;;;3626   else	if(!(avar_ind_stat&0x00000001)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;3627   else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_NET,1);
;;;3628   
;;;3629   
;;;3630   // 
;;;3631   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_LIGHT))
;;;3632   	{
;;;3633   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LIGHT,1);
;;;3634   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LIGHT,1);
;;;3635        }
;;;3636   else 
;;;3637   	{
;;;3638   	if(sk_av_stat[0]!=sasON) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LIGHT,1);
;;;3639        else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LIGHT,1);
;;;3640   	}
;;;3641   
;;;3642   // 
;;;3643   if((mess_find_unvol(MESS2RELE_HNDL))&&(mess_data[0]==PARAM_RELE_WARM))
;;;3644   	{
;;;3645   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_WARM,1);
;;;3646   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_WARM,1);
;;;3647   	}
;;;3648   else 
;;;3649   	{
;;;3650   	if(warm_stat_k==wsOFF) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_WARM,1);
;;;3651        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_WARM,1);
;;;3652   	} 
;;;3653   // 
;;;3654   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_VENT))
;;;3655   	{
;;;3656   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT,1);
;;;3657   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;3658   	}
;;;3659   else 
;;;3660   	{
;;;3661   	if(vent_stat_k==vsOFF) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT,1);
;;;3662        else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;3663   	} 
;;;3664   
;;;3665   //  
;;;3666   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_VVENT))
;;;3667   	{
;;;3668   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VVENT,1);
;;;3669   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VVENT,1);
;;;3670   	}
;;;3671   else 
;;;3672   	{
;;;3673   	if(vvent_stat_k==vsOFF) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VVENT,1);
;;;3674        else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VVENT,1);
;;;3675   	} 
;;;3676   
;;;3677   #endif
;;;3678   
;;;3679   }
001ee0  e4b3              B        |L1.6218|
                  |L1.7906|
001ee2  6868              LDR      r0,[r5,#4]            ;3468  ; mess_data
001ee4  b120              CBZ      r0,|L1.7920|
001ee6  69e0              LDR      r0,[r4,#0x1c]         ;3469
001ee8  f0407000          ORR      r0,r0,#0x2000000      ;3469
001eec  61e0              STR      r0,[r4,#0x1c]         ;3469
001eee  e7d1              B        |L1.7828|
                  |L1.7920|
001ef0  69a0              LDR      r0,[r4,#0x18]         ;3468
001ef2  f0407000          ORR      r0,r0,#0x2000000      ;3468
001ef6  61a0              STR      r0,[r4,#0x18]         ;3468
001ef8  e7cc              B        |L1.7828|
                  |L1.7930|
001efa  6ba0              LDR      r0,[r4,#0x38]         ;3471
001efc  f0407000          ORR      r0,r0,#0x2000000      ;3471
001f00  63a0              STR      r0,[r4,#0x38]         ;3471
001f02  e7c7              B        |L1.7828|
                  |L1.7940|
001f04  6868              LDR      r0,[r5,#4]            ;3477  ; mess_data
001f06  b130              CBZ      r0,|L1.7958|
001f08  2801              CMP      r0,#1                 ;3478
001f0a  d1d1              BNE      |L1.7856|
001f0c  69a0              LDR      r0,[r4,#0x18]         ;3478
001f0e  f0400020          ORR      r0,r0,#0x20           ;3478
001f12  61a0              STR      r0,[r4,#0x18]         ;3478
001f14  e7cc              B        |L1.7856|
                  |L1.7958|
001f16  69e0              LDR      r0,[r4,#0x1c]         ;3477
001f18  f0400020          ORR      r0,r0,#0x20           ;3477
001f1c  61e0              STR      r0,[r4,#0x1c]         ;3477
001f1e  e7c7              B        |L1.7856|
                  |L1.7968|
001f20  69e0              LDR      r0,[r4,#0x1c]         ;3482
001f22  f0400020          ORR      r0,r0,#0x20           ;3482
001f26  61e0              STR      r0,[r4,#0x1c]         ;3482
001f28  e7c2              B        |L1.7856|
                  |L1.7978|
001f2a  e00d              B        |L1.8008|
                  |L1.7980|
001f2c  6868              LDR      r0,[r5,#4]            ;3489  ; mess_data
001f2e  b130              CBZ      r0,|L1.7998|
001f30  2801              CMP      r0,#1                 ;3490
001f32  d1d5              BNE      |L1.7904|
001f34  69a0              LDR      r0,[r4,#0x18]         ;3490
001f36  f4407000          ORR      r0,r0,#0x200          ;3490
001f3a  61a0              STR      r0,[r4,#0x18]         ;3490
001f3c  e485              B        |L1.6218|
                  |L1.7998|
001f3e  69e0              LDR      r0,[r4,#0x1c]         ;3489
001f40  f4407000          ORR      r0,r0,#0x200          ;3489
001f44  61e0              STR      r0,[r4,#0x1c]         ;3489
001f46  e480              B        |L1.6218|
                  |L1.8008|
001f48  48dd              LDR      r0,|L1.8896|
001f4a  8800              LDRH     r0,[r0,#0]            ;3494  ; speedChIsOn
001f4c  b120              CBZ      r0,|L1.8024|
001f4e  69a0              LDR      r0,[r4,#0x18]         ;3495
001f50  f4407000          ORR      r0,r0,#0x200          ;3495
001f54  61a0              STR      r0,[r4,#0x18]         ;3495
001f56  e478              B        |L1.6218|
                  |L1.8024|
001f58  69e0              LDR      r0,[r4,#0x1c]         ;3494
001f5a  f4407000          ORR      r0,r0,#0x200          ;3494
001f5e  61e0              STR      r0,[r4,#0x1c]         ;3494
001f60  e473              B        |L1.6218|
                  |L1.8034|
001f62  69e0              LDR      r0,[r4,#0x1c]         ;3499
001f64  f4407000          ORR      r0,r0,#0x200          ;3499
001f68  61e0              STR      r0,[r4,#0x1c]         ;3499
001f6a  e46e              B        |L1.6218|
;;;3680   
                          ENDP

                  bps_hndl PROC
;;;3681   //-----------------------------------------------
;;;3682   void bps_hndl(void)
001f6c  e92d5ff0          PUSH     {r4-r12,lr}
;;;3683   {
;;;3684   char ptr__,i;
;;;3685   unsigned short tempUS;
;;;3686   
;;;3687   if(sh_cnt0<10)
001f70  4ed4              LDR      r6,|L1.8900|
;;;3688   	{
;;;3689   	sh_cnt0++;
;;;3690   	if(sh_cnt0>=10)
;;;3691   		{
;;;3692   		sh_cnt0=0;
001f72  2700              MOVS     r7,#0
;;;3693   		b1Hz_sh=1;
001f74  f04f0a01          MOV      r10,#1
001f78  7c70              LDRB     r0,[r6,#0x11]         ;3687  ; sh_cnt0
001f7a  280a              CMP      r0,#0xa               ;3687
001f7c  d208              BCS      |L1.8080|
001f7e  f1000001          ADD      r0,r0,#1              ;3689
001f82  b2c0              UXTB     r0,r0                 ;3689
001f84  7470              STRB     r0,[r6,#0x11]         ;3689
001f86  280a              CMP      r0,#0xa               ;3690
001f88  d302              BCC      |L1.8080|
001f8a  7477              STRB     r7,[r6,#0x11]         ;3692
001f8c  f886a012          STRB     r10,[r6,#0x12]
                  |L1.8080|
;;;3694   		}
;;;3695   	}
;;;3696   
;;;3697   /*if(sh_cnt1<5)
;;;3698   	{
;;;3699   	sh_cnt1++;
;;;3700   	if(sh_cnt1==5)
;;;3701   		{
;;;3702   		sh_cnt1=0;
;;;3703   		b2Hz_sh=1;
;;;3704   		}
;;;3705   	} */
;;;3706   
;;;3707   
;;;3708   /*
;;;3709   if(mess_find(MESS_SRC_ON_OFF))
;;;3710   	{
;;;3711   	if(mess_data[0]==_MESS_SRC_MASK_BLOK_2SEC)
;;;3712   		{
;;;3713   		char i;
;;;3714   		for(i=0;i<NUMIST;i++)
;;;3715   			{
;;;3716   			if(mess_data[1]&(1<<i))src[i]._ist_blok_cnt=20;
;;;3717   			}
;;;3718   		
;;;3719   		}
;;;3720   	else if(mess_data[0]==_MESS_SRC_MASK_UNBLOK)
;;;3721   		{
;;;3722   		char i;
;;;3723   		for(i=0;i<NUMIST;i++)
;;;3724   			{
;;;3725   			if(mess_data[1]&(1<<i))src[i]._ist_blok_cnt=0;
;;;3726   			}
;;;3727   		
;;;3728   		}
;;;3729   	}
;;;3730   	
;;;3731   else if(mess_find(_MESS_SRC_MASK_ON))
;;;3732   	{				
;;;3733   	if(mess_data[0]==_MESS_SRC_MASK_ON)
;;;3734   		{
;;;3735   		char i;
;;;3736   		for(i=0;i<NUMIST;i++)
;;;3737   			{
;;;3738   			if(mess_data[1]&(1<<i))
;;;3739   				{
;;;3740   				src[i]._ist_blok_cnt=0;
;;;3741   				src[i]._flags_tu=2;
;;;3742   				}
;;;3743   			}
;;;3744   		
;;;3745   		}				
;;;3746   	}*/
;;;3747   
;;;3748   
;;;3749   
;;;3750   /*else*/ 
;;;3751   bps_on_mask=0;
001f90  f8a67048          STRH     r7,[r6,#0x48]
;;;3752   bps_off_mask=0;
001f94  f8a6704a          STRH     r7,[r6,#0x4a]
;;;3753   
;;;3754   if(mess_find_unvol(MESS2BPS_HNDL))
001f98  20cd              MOVS     r0,#0xcd
001f9a  f7fffffe          BL       mess_find_unvol
;;;3755   	{
;;;3756   	if(mess_data[0]==PARAM_BPS_ALL_OFF_AFTER_2SEC)
;;;3757   		{
;;;3758   		bps_off_mask=0xffff;
;;;3759   		}
;;;3760   
;;;3761   	if(mess_data[0]==PARAM_BPS_MASK_OFF_AFTER_2SEC)
;;;3762   		{
;;;3763   		bps_off_mask=mess_data[1];
;;;3764   		}
;;;3765   
;;;3766   	if(mess_data[0]==PARAM_BPS_MASK_ON)
;;;3767   		{
;;;3768   		bps_on_mask=mess_data[1];
;;;3769   		}
;;;3770   
;;;3771   	if(mess_data[0]==PARAM_BPS_ALL_ON)
;;;3772   		{
;;;3773   		bps_on_mask=0xffff;
;;;3774   		}
;;;3775   
;;;3776   	if(mess_data[0]==PARAM_BPS_MASK_ON_OFF_AFTER_2SEC)
;;;3777   		{
;;;3778   		bps_on_mask=mess_data[1];
;;;3779   		bps_off_mask=~(mess_data[1]);
;;;3780   		}
;;;3781   
;;;3782   
;;;3783   	for(i=0;i<=NUMIST;i++)
;;;3784   		{
;;;3785   		if(bps_off_mask&(1<<i)) bps[i]._blok_cnt++;
001f9e  f8df8328          LDR      r8,|L1.8904|
001fa2  f8dfb328          LDR      r11,|L1.8908|
001fa6  b3a0              CBZ      r0,|L1.8210|
001fa8  49c9              LDR      r1,|L1.8912|
001faa  f64f73ff          MOV      r3,#0xffff            ;3758
001fae  6808              LDR      r0,[r1,#0]            ;3756  ; mess_data
001fb0  28ce              CMP      r0,#0xce              ;3756
001fb2  d101              BNE      |L1.8120|
001fb4  f8a6304a          STRH     r3,[r6,#0x4a]         ;3758
                  |L1.8120|
001fb8  28cf              CMP      r0,#0xcf              ;3761
001fba  d102              BNE      |L1.8130|
001fbc  684a              LDR      r2,[r1,#4]            ;3763  ; mess_data
001fbe  f8a6204a          STRH     r2,[r6,#0x4a]         ;3763
                  |L1.8130|
001fc2  28d1              CMP      r0,#0xd1              ;3766
001fc4  d102              BNE      |L1.8140|
001fc6  684a              LDR      r2,[r1,#4]            ;3768  ; mess_data
001fc8  f8a62048          STRH     r2,[r6,#0x48]         ;3768
                  |L1.8140|
001fcc  28d2              CMP      r0,#0xd2              ;3771
001fce  d101              BNE      |L1.8148|
001fd0  f8a63048          STRH     r3,[r6,#0x48]         ;3773
                  |L1.8148|
001fd4  28d0              CMP      r0,#0xd0              ;3776
001fd6  d106              BNE      |L1.8166|
001fd8  6848              LDR      r0,[r1,#4]            ;3778  ; mess_data
001fda  f8a60048          STRH     r0,[r6,#0x48]         ;3778
001fde  ea6f0000          MVN      r0,r0                 ;3779
001fe2  f8a6004a          STRH     r0,[r6,#0x4a]         ;3779
                  |L1.8166|
001fe6  f04f0400          MOV      r4,#0                 ;3783
001fea  e037              B        |L1.8284|
                  |L1.8172|
001fec  f8b6004a          LDRH     r0,[r6,#0x4a]  ; bps_off_mask
001ff0  fa0af904          LSL      r9,r10,r4
001ff4  ea190f00          TST      r9,r0
001ff8  d00c              BEQ      |L1.8212|
001ffa  ebc400c4          RSB      r0,r4,r4,LSL #3
001ffe  eb001004          ADD      r0,r0,r4,LSL #4
002002  eb080080          ADD      r0,r8,r0,LSL #2
002006  f8301f40          LDRH     r1,[r0,#0x40]!
00200a  f1010101          ADD      r1,r1,#1
00200e  8001              STRH     r1,[r0,#0]
002010  e008              B        |L1.8228|
                  |L1.8210|
002012  e028              B        |L1.8294|
                  |L1.8212|
;;;3786   		else bps[i]._blok_cnt=0;
002014  ebc400c4          RSB      r0,r4,r4,LSL #3
002018  eb001004          ADD      r0,r0,r4,LSL #4
00201c  eb080080          ADD      r0,r8,r0,LSL #2
002020  f8a07040          STRH     r7,[r0,#0x40]
                  |L1.8228|
;;;3787   		gran(&bps[i]._blok_cnt,0,50);
002024  ebc400c4          RSB      r0,r4,r4,LSL #3
002028  eb001004          ADD      r0,r0,r4,LSL #4
00202c  eb080580          ADD      r5,r8,r0,LSL #2
002030  f1050040          ADD      r0,r5,#0x40
002034  2232              MOVS     r2,#0x32
002036  2100              MOVS     r1,#0
002038  f7fffffe          BL       gran
;;;3788   		if(bps[i]._blok_cnt>20) bps[i]._flags_tu=1;
00203c  f9b50040          LDRSH    r0,[r5,#0x40]
002040  2814              CMP      r0,#0x14
002042  dd01              BLE      |L1.8264|
002044  f885a02c          STRB     r10,[r5,#0x2c]
                  |L1.8264|
;;;3789   		if(bps_on_mask&(1<<i)) bps[i]._flags_tu=0;
002048  f8b60048          LDRH     r0,[r6,#0x48]  ; bps_on_mask
00204c  ea190f00          TST      r9,r0
002050  d001              BEQ      |L1.8278|
002052  f885702c          STRB     r7,[r5,#0x2c]
                  |L1.8278|
002056  f1040401          ADD      r4,r4,#1              ;3783
00205a  b2e4              UXTB     r4,r4                 ;3783
                  |L1.8284|
00205c  f9bb0000          LDRSH    r0,[r11,#0]           ;3783  ; NUMIST
002060  4284              CMP      r4,r0                 ;3783
002062  ddc3              BLE      |L1.8172|
002064  e08a              B        |L1.8572|
                  |L1.8294|
;;;3790   	     }
;;;3791   
;;;3792   	
;;;3793   /*
;;;3794   
;;;3795   	if(bps_all_off_cnt>20)
;;;3796   		{
;;;3797   		for(i=0;i<=NUMIST;i++)
;;;3798   			{
;;;3799   	     	bps[i]._flags_tu=1;
;;;3800   	     	}
;;;3801   		}
;;;3802   	else if(bps_mask_off_cnt>20)
;;;3803   		{
;;;3804   		for(i=0;i<=NUMIST;i++)
;;;3805   			{
;;;3806   			if(mess_data[1]&(1<<i)) bps[i]._flags_tu=1;
;;;3807   	     	}
;;;3808   		}	
;;;3809   		
;;;3810   	else if(bps_mask_on_off_cnt>20)
;;;3811   		{
;;;3812   		for(i=0;i<=NUMIST;i++)
;;;3813   			{
;;;3814   			if(mess_data[1]&(1<<i)) bps[i]._flags_tu=1;
;;;3815   			else bps[i]._flags_tu=0;
;;;3816   	     	}
;;;3817   		}
;;;3818   		
;;;3819   	if(mess_data[0]==PARAM_BPS_MASK_ON)
;;;3820   		{
;;;3821   		for(i=0;i<=NUMIST;i++)
;;;3822   			{
;;;3823   			if(mess_data[1]&(1<<i)) bps[i]._flags_tu=0;
;;;3824   	     	}
;;;3825   		}
;;;3826   */										
;;;3827   	}
;;;3828   
;;;3829   
;;;3830   else if(b1Hz_sh)
002066  7cb0              LDRB     r0,[r6,#0x12]  ; b1Hz_sh
002068  b3f0              CBZ      r0,|L1.8424|
;;;3831   	{
;;;3832   	ptr__=0;
00206a  f04f0400          MOV      r4,#0
;;;3833        for(i=0;i<=NUMIST;i++)
00206e  4621              MOV      r1,r4
002070  f9bb0000          LDRSH    r0,[r11,#0]           ;3783
002074  e00a              B        |L1.8332|
                  |L1.8310|
;;;3834   		{
;;;3835   	     bps[i]._flags_tu=1;
002076  ebc102c1          RSB      r2,r1,r1,LSL #3
00207a  eb021201          ADD      r2,r2,r1,LSL #4
00207e  eb080282          ADD      r2,r8,r2,LSL #2
002082  f882a02c          STRB     r10,[r2,#0x2c]
002086  f1010101          ADD      r1,r1,#1              ;3833
00208a  b2c9              UXTB     r1,r1                 ;3833
                  |L1.8332|
00208c  4281              CMP      r1,r0                 ;3833
00208e  ddf2              BLE      |L1.8310|
;;;3836   	     }	
;;;3837     	     
;;;3838     	for(i=0;(i<NUMIST)&&(ptr__<num_necc);i++)
002090  f04f0100          MOV      r1,#0
002094  e022              B        |L1.8412|
                  |L1.8342|
;;;3839     		{
;;;3840   		char ii,iii;
;;;3841   
;;;3842   		ii=(char)NUMIST;
002096  b2c2              UXTB     r2,r0
;;;3843   		//if(ii<0)ii=0;
;;;3844   		if(ii>32)ii=32;
002098  2a20              CMP      r2,#0x20
00209a  d901              BLS      |L1.8352|
00209c  f04f0220          MOV      r2,#0x20
                  |L1.8352|
;;;3845   		iii=numOfForvardBps;
0020a0  7e33              LDRB     r3,[r6,#0x18]  ; numOfForvardBps
;;;3846   		if(iii<0)iii=0;
;;;3847   		if(iii>=NUMIST)iii=0;
0020a2  4283              CMP      r3,r0
0020a4  db01              BLT      |L1.8362|
0020a6  f04f0300          MOV      r3,#0
                  |L1.8362|
;;;3848   		iii+=i;
0020aa  440b              ADD      r3,r3,r1
0020ac  b2db              UXTB     r3,r3
;;;3849   		iii=iii%ii;
0020ae  fbb3f5f2          UDIV     r5,r3,r2
0020b2  fb023215          MLS      r2,r2,r5,r3
;;;3850   		
;;;3851     	     if((bps[iii]._state==bsRDY)||(bps[iii]._state==bsWRK))
0020b6  ebc203c2          RSB      r3,r2,r2,LSL #3
0020ba  eb031202          ADD      r2,r3,r2,LSL #4
0020be  eb080282          ADD      r2,r8,r2,LSL #2
0020c2  7893              LDRB     r3,[r2,#2]
0020c4  2b02              CMP      r3,#2
0020c6  d001              BEQ      |L1.8396|
0020c8  2b01              CMP      r3,#1
0020ca  d104              BNE      |L1.8406|
                  |L1.8396|
;;;3852     	         	{
;;;3853     	         	bps[iii]._flags_tu=0;
0020cc  f882702c          STRB     r7,[r2,#0x2c]
;;;3854     	         	ptr__++;
0020d0  f1040401          ADD      r4,r4,#1
0020d4  b2e4              UXTB     r4,r4
                  |L1.8406|
0020d6  f1010101          ADD      r1,r1,#1              ;3838
0020da  b2c9              UXTB     r1,r1                 ;3838
                  |L1.8412|
0020dc  4281              CMP      r1,r0                 ;3838
0020de  da06              BGE      |L1.8430|
0020e0  4a7c              LDR      r2,|L1.8916|
0020e2  f9b22000          LDRSH    r2,[r2,#0]            ;3838  ; num_necc
0020e6  e000              B        |L1.8426|
                  |L1.8424|
0020e8  e048              B        |L1.8572|
                  |L1.8426|
0020ea  4294              CMP      r4,r2                 ;3838
0020ec  dbd3              BLT      |L1.8342|
                  |L1.8430|
;;;3855     	         	}
;;;3856   			
;;;3857     	     }
;;;3858   	bps[numOfForvardBps_old]._flags_tu=0;
0020ee  7e71              LDRB     r1,[r6,#0x19]  ; numOfForvardBps_old
0020f0  ebc102c1          RSB      r2,r1,r1,LSL #3
0020f4  eb021101          ADD      r1,r2,r1,LSL #4
0020f8  eb080181          ADD      r1,r8,r1,LSL #2
0020fc  f881702c          STRB     r7,[r1,#0x2c]
;;;3859   
;;;3860   	if(main_1Hz_cnt<60)
002100  4975              LDR      r1,|L1.8920|
002102  f9b11000          LDRSH    r1,[r1,#0]  ; main_1Hz_cnt
002106  293c              CMP      r1,#0x3c
002108  da0f              BGE      |L1.8490|
;;;3861   		{
;;;3862        	for(i=0;i<=NUMIST;i++)
00210a  f04f0100          MOV      r1,#0
00210e  e00a              B        |L1.8486|
                  |L1.8464|
;;;3863   			{
;;;3864   	     	bps[i]._flags_tu=0;
002110  ebc102c1          RSB      r2,r1,r1,LSL #3
002114  eb021201          ADD      r2,r2,r1,LSL #4
002118  eb080282          ADD      r2,r8,r2,LSL #2
00211c  f882702c          STRB     r7,[r2,#0x2c]
002120  f1010101          ADD      r1,r1,#1              ;3862
002124  b2c9              UXTB     r1,r1                 ;3862
                  |L1.8486|
002126  4281              CMP      r1,r0                 ;3862
002128  ddf2              BLE      |L1.8464|
                  |L1.8490|
;;;3865   	     	}	
;;;3866   		}
;;;3867   	if(ipsBlckStat)
00212a  496c              LDR      r1,|L1.8924|
00212c  8809              LDRH     r1,[r1,#0]  ; ipsBlckStat
00212e  b179              CBZ      r1,|L1.8528|
;;;3868   		{
;;;3869        	for(i=0;i<=NUMIST;i++)
002130  f04f0100          MOV      r1,#0
002134  e00a              B        |L1.8524|
                  |L1.8502|
;;;3870   			{
;;;3871   	     	bps[i]._flags_tu=1;
002136  ebc102c1          RSB      r2,r1,r1,LSL #3
00213a  eb021201          ADD      r2,r2,r1,LSL #4
00213e  eb080282          ADD      r2,r8,r2,LSL #2
002142  f882a02c          STRB     r10,[r2,#0x2c]
002146  f1010101          ADD      r1,r1,#1              ;3869
00214a  b2c9              UXTB     r1,r1                 ;3869
                  |L1.8524|
00214c  4281              CMP      r1,r0                 ;3869
00214e  ddf2              BLE      |L1.8502|
                  |L1.8528|
;;;3872   	     	}
;;;3873   		}
;;;3874   
;;;3875        for(i=0;i<=NUMIST;i++)
002150  f04f0100          MOV      r1,#0
;;;3876   		{
;;;3877   	    if(bps[i]._flags_tu==1) 	bps[i]._x_=-50;
002154  f06f0331          MVN      r3,#0x31
002158  e00e              B        |L1.8568|
                  |L1.8538|
00215a  ebc102c1          RSB      r2,r1,r1,LSL #3
00215e  eb021201          ADD      r2,r2,r1,LSL #4
002162  eb080282          ADD      r2,r8,r2,LSL #2
002166  f892402c          LDRB     r4,[r2,#0x2c]
00216a  2c01              CMP      r4,#1
00216c  d101              BNE      |L1.8562|
00216e  f8a23050          STRH     r3,[r2,#0x50]
                  |L1.8562|
002172  f1010101          ADD      r1,r1,#1              ;3875
002176  b2c9              UXTB     r1,r1                 ;3875
                  |L1.8568|
002178  4281              CMP      r1,r0                 ;3875
00217a  ddee              BLE      |L1.8538|
                  |L1.8572|
;;;3878   	   	}	
;;;3879   		 
;;;3880     	}
;;;3881   
;;;3882   
;;;3883   for(i=0;i<NUMIST;i++)
00217c  f04f0000          MOV      r0,#0
;;;3884        {
;;;3885        if(bps[i]._ist_blok_host_cnt!=0)
;;;3886             {
;;;3887             bps[i]._flags_tu=99;
002180  f04f0463          MOV      r4,#0x63
002184  f9bb3000          LDRSH    r3,[r11,#0]           ;3783
002188  e00f              B        |L1.8618|
                  |L1.8586|
00218a  ebc001c0          RSB      r1,r0,r0,LSL #3       ;3885
00218e  eb011100          ADD      r1,r1,r0,LSL #4       ;3885
002192  eb080181          ADD      r1,r8,r1,LSL #2       ;3885
002196  6bca              LDR      r2,[r1,#0x3c]         ;3885
002198  b122              CBZ      r2,|L1.8612|
00219a  f881402c          STRB     r4,[r1,#0x2c]
;;;3888   	     bps[i]._ist_blok_host_cnt--;
00219e  f1a20201          SUB      r2,r2,#1
0021a2  63ca              STR      r2,[r1,#0x3c]
                  |L1.8612|
0021a4  f1000001          ADD      r0,r0,#1              ;3883
0021a8  b2c0              UXTB     r0,r0                 ;3883
                  |L1.8618|
0021aa  4298              CMP      r0,r3                 ;3883
0021ac  dbed              BLT      |L1.8586|
;;;3889             }
;;;3890        }
;;;3891   
;;;3892   
;;;3893   
;;;3894   
;;;3895   b1Hz_sh=0;
0021ae  74b7              STRB     r7,[r6,#0x12]
;;;3896   
;;;3897   
;;;3898   num_of_wrks_bps=0;
0021b0  73b7              STRB     r7,[r6,#0xe]
;;;3899   tempUS=0;
0021b2  f04f0100          MOV      r1,#0
;;;3900   for(i=0;i<NUMIST;i++)
0021b6  4608              MOV      r0,r1
0021b8  e013              B        |L1.8674|
                  |L1.8634|
;;;3901   	{
;;;3902   	if(bps[i]._state==bsWRK)
0021ba  ebc002c0          RSB      r2,r0,r0,LSL #3
0021be  eb021200          ADD      r2,r2,r0,LSL #4
0021c2  eb080282          ADD      r2,r8,r2,LSL #2
0021c6  7894              LDRB     r4,[r2,#2]
0021c8  2c01              CMP      r4,#1
0021ca  d107              BNE      |L1.8668|
;;;3903   		{
;;;3904   		num_of_wrks_bps++;
0021cc  7bb4              LDRB     r4,[r6,#0xe]  ; num_of_wrks_bps
0021ce  f1040401          ADD      r4,r4,#1
0021d2  73b4              STRB     r4,[r6,#0xe]
;;;3905   		if(bps[i]._Uii>tempUS)tempUS=bps[i]._Uii;
0021d4  69d2              LDR      r2,[r2,#0x1c]
0021d6  428a              CMP      r2,r1
0021d8  dd00              BLE      |L1.8668|
0021da  b291              UXTH     r1,r2
                  |L1.8668|
0021dc  f1000001          ADD      r0,r0,#1              ;3900
0021e0  b2c0              UXTB     r0,r0                 ;3900
                  |L1.8674|
0021e2  4298              CMP      r0,r3                 ;3900
0021e4  dbe9              BLT      |L1.8634|
;;;3906   		}
;;;3907   	}
;;;3908   Ubpsmax=tempUS;
0021e6  8731              STRH     r1,[r6,#0x38]
;;;3909   
;;;3910   }
0021e8  e8bd9ff0          POP      {r4-r12,pc}
;;;3911   
                          ENDP

                  powerAntiAliasingHndl PROC
;;;3918   //-----------------------------------------------
;;;3919   void powerAntiAliasingHndl(void)
0021ec  b570              PUSH     {r4-r6,lr}
;;;3920   {
;;;3921   if((power_summary_tempo/10UL)==(power_summary_tempo_old/10UL))
0021ee  230a              MOVS     r3,#0xa
0021f0  4c3c              LDR      r4,|L1.8932|
0021f2  483b              LDR      r0,|L1.8928|
;;;3922   	{
;;;3923   	if(powerSummaryCnt<15)powerSummaryCnt++;
;;;3924   	if(powerSummaryCnt>=10)
;;;3925   		{
;;;3926   		power_summary=power_summary_tempo;
;;;3927   		}
;;;3928   	}
;;;3929   else powerSummaryCnt=0;
0021f4  2500              MOVS     r5,#0
0021f6  6822              LDR      r2,[r4,#0]            ;3921  ; power_summary_tempo_old
0021f8  6800              LDR      r0,[r0,#0]            ;3921  ; power_summary_tempo
0021fa  fbb2f6f3          UDIV     r6,r2,r3              ;3921
0021fe  fbb0f1f3          UDIV     r1,r0,r3              ;3921
002202  4a39              LDR      r2,|L1.8936|
002204  42b1              CMP      r1,r6                 ;3921
002206  d10b              BNE      |L1.8736|
002208  7811              LDRB     r1,[r2,#0]            ;3923  ; powerSummaryCnt
00220a  290f              CMP      r1,#0xf               ;3923
00220c  d202              BCS      |L1.8724|
00220e  f1010101          ADD      r1,r1,#1              ;3923
002212  7011              STRB     r1,[r2,#0]            ;3923
                  |L1.8724|
002214  7811              LDRB     r1,[r2,#0]            ;3924  ; powerSummaryCnt
002216  290a              CMP      r1,#0xa               ;3924
002218  d303              BCC      |L1.8738|
00221a  4934              LDR      r1,|L1.8940|
00221c  6008              STR      r0,[r1,#0]            ;3926  ; power_summary
00221e  e000              B        |L1.8738|
                  |L1.8736|
002220  7015              STRB     r5,[r2,#0]
                  |L1.8738|
;;;3930   power_summary_tempo_old=power_summary_tempo;
002222  6020              STR      r0,[r4,#0]  ; power_summary_tempo_old
;;;3931   
;;;3932   if((power_current_tempo/10UL)==(power_current_tempo_old/10UL))
002224  4832              LDR      r0,|L1.8944|
002226  4c33              LDR      r4,|L1.8948|
002228  f9b00000          LDRSH    r0,[r0,#0]  ; power_current_tempo
00222c  f9b42000          LDRSH    r2,[r4,#0]  ; power_current_tempo_old
002230  fbb0f1f3          UDIV     r1,r0,r3
002234  fbb2f3f3          UDIV     r3,r2,r3
;;;3933   	{
;;;3934   	if(powerCurrentCnt<15)powerCurrentCnt++;
002238  4a2f              LDR      r2,|L1.8952|
00223a  4299              CMP      r1,r3                 ;3932
00223c  d10b              BNE      |L1.8790|
00223e  7811              LDRB     r1,[r2,#0]  ; powerCurrentCnt
002240  290f              CMP      r1,#0xf
002242  d202              BCS      |L1.8778|
002244  f1010101          ADD      r1,r1,#1
002248  7011              STRB     r1,[r2,#0]
                  |L1.8778|
;;;3935   	if(powerCurrentCnt>=10)
00224a  7811              LDRB     r1,[r2,#0]  ; powerCurrentCnt
00224c  290a              CMP      r1,#0xa
00224e  d303              BCC      |L1.8792|
;;;3936   		{
;;;3937   		power_current=power_current_tempo;
002250  492a              LDR      r1,|L1.8956|
002252  8008              STRH     r0,[r1,#0]
002254  e000              B        |L1.8792|
                  |L1.8790|
;;;3938   		}
;;;3939   	}
;;;3940   else powerCurrentCnt=0;
002256  7015              STRB     r5,[r2,#0]
                  |L1.8792|
;;;3941   power_current_tempo_old=power_current_tempo;
002258  8020              STRH     r0,[r4,#0]
;;;3942   }
00225a  bd70              POP      {r4-r6,pc}
;;;3943   
                          ENDP

                  ips_current_average_hndl PROC
;;;3944   //-----------------------------------------------
;;;3945   void ips_current_average_hndl(void)
00225c  e92d43f0          PUSH     {r4-r9,lr}
;;;3946   {
002260  b085              SUB      sp,sp,#0x14
;;;3947   if(++ica_timer_cnt>=10)
002262  4c27              LDR      r4,|L1.8960|
;;;3948   	{
;;;3949   	ica_timer_cnt=0;
002264  2500              MOVS     r5,#0
;;;3950   	ica_plazma[0]++;
;;;3951   
;;;3952   	ica_my_current=bps_I;
;;;3953   
;;;3954   	if((ica_my_current>ica_your_current)&&((ica_my_current-ica_your_current)>=10)&&(ICA_EN==1))
002266  4e27              LDR      r6,|L1.8964|
002268  7820              LDRB     r0,[r4,#0]            ;3947  ; ica_timer_cnt
00226a  1c40              ADDS     r0,r0,#1              ;3947
00226c  b2c0              UXTB     r0,r0                 ;3947
00226e  7020              STRB     r0,[r4,#0]            ;3947
002270  280a              CMP      r0,#0xa               ;3947
002272  d371              BCC      |L1.9048|
002274  7025              STRB     r5,[r4,#0]            ;3949
002276  f8dfc090          LDR      r12,|L1.8968|
00227a  f89c0000          LDRB     r0,[r12,#0]           ;3950  ; ica_plazma
00227e  f1000001          ADD      r0,r0,#1              ;3950
002282  f88c0000          STRB     r0,[r12,#0]           ;3950
002286  4821              LDR      r0,|L1.8972|
002288  4921              LDR      r1,|L1.8976|
00228a  f9b00000          LDRSH    r0,[r0,#0]            ;3952  ; bps_I
00228e  8008              STRH     r0,[r1,#0]            ;3952
002290  4920              LDR      r1,|L1.8980|
;;;3955   		{
;;;3956   		ica_plazma[1]++;
;;;3957   		ica_u_necc--;
002292  f8df8084          LDR      r8,|L1.8984|
002296  4662              MOV      r2,r12                ;3950
002298  4637              MOV      r7,r6                 ;3954
00229a  f9b11000          LDRSH    r1,[r1,#0]            ;3954  ; ica_your_current
00229e  7852              LDRB     r2,[r2,#1]            ;3956
0022a0  f9b83000          LDRSH    r3,[r8,#0]
0022a4  f9b77000          LDRSH    r7,[r7,#0]            ;3954
0022a8  4288              CMP      r0,r1                 ;3954
0022aa  dd06              BLE      |L1.8890|
0022ac  eba00901          SUB      r9,r0,r1              ;3954
0022b0  f1b90f0a          CMP      r9,#0xa               ;3954
0022b4  db01              BLT      |L1.8890|
0022b6  2f01              CMP      r7,#1                 ;3954
0022b8  d038              BEQ      |L1.9004|
                  |L1.8890|
;;;3958   		}
;;;3959   	else if((ica_my_current<ica_your_current)&&((ica_your_current-ica_my_current)>=10)&&(ICA_EN==1))
0022ba  e02f              B        |L1.8988|
                  |L1.8892|
                          DCD      DOP_RELE_FUNC
                  |L1.8896|
                          DCD      speedChIsOn
                  |L1.8900|
                          DCD      ||area_number.21||
                  |L1.8904|
                          DCD      bps
                  |L1.8908|
                          DCD      NUMIST
                  |L1.8912|
                          DCD      mess_data
                  |L1.8916|
                          DCD      num_necc
                  |L1.8920|
                          DCD      main_1Hz_cnt
                  |L1.8924|
                          DCD      ipsBlckStat
                  |L1.8928|
                          DCD      power_summary_tempo
                  |L1.8932|
                          DCD      power_summary_tempo_old
                  |L1.8936|
                          DCD      powerSummaryCnt
                  |L1.8940|
                          DCD      power_summary
                  |L1.8944|
                          DCD      power_current_tempo
                  |L1.8948|
                          DCD      power_current_tempo_old
                  |L1.8952|
                          DCD      powerCurrentCnt
                  |L1.8956|
                          DCD      power_current
                  |L1.8960|
                          DCD      ica_timer_cnt
                  |L1.8964|
                          DCD      ICA_EN
                  |L1.8968|
                          DCD      ica_plazma
                  |L1.8972|
                          DCD      bps_I
                  |L1.8976|
                          DCD      ica_my_current
                  |L1.8980|
                          DCD      ica_your_current
                  |L1.8984|
                          DCD      ica_u_necc
                  |L1.8988|
00231c  4288              CMP      r0,r1
00231e  da16              BGE      |L1.9038|
002320  1a08              SUBS     r0,r1,r0
002322  280a              CMP      r0,#0xa
002324  db13              BLT      |L1.9038|
002326  2f01              CMP      r7,#1
002328  d009              BEQ      |L1.9022|
00232a  e010              B        |L1.9038|
                  |L1.9004|
00232c  f1020201          ADD      r2,r2,#1              ;3956
002330  f88c2001          STRB     r2,[r12,#1]           ;3956
002334  f1a30301          SUB      r3,r3,#1              ;3957
002338  f8a83000          STRH     r3,[r8,#0]            ;3957
00233c  e007              B        |L1.9038|
                  |L1.9022|
;;;3960   		{
;;;3961   		ica_plazma[1]--;
00233e  f1a20201          SUB      r2,r2,#1
002342  f88c2001          STRB     r2,[r12,#1]
;;;3962   		ica_u_necc++;
002346  f1030301          ADD      r3,r3,#1
00234a  f8a83000          STRH     r3,[r8,#0]
                  |L1.9038|
;;;3963   		}
;;;3964   	gran(&ica_u_necc,-20,20);
00234e  2214              MOVS     r2,#0x14
002350  4251              RSBS     r1,r2,#0
002352  48ff              LDR      r0,|L1.10064|
002354  f7fffffe          BL       gran
                  |L1.9048|
;;;3965   	}
;;;3966   
;;;3967   if((ica_timer_cnt==8)&&(ICA_EN==1))
002358  7820              LDRB     r0,[r4,#0]  ; ica_timer_cnt
00235a  2808              CMP      r0,#8
00235c  d134              BNE      |L1.9160|
00235e  8830              LDRH     r0,[r6,#0]  ; ICA_EN
002360  2801              CMP      r0,#1
002362  d131              BNE      |L1.9160|
;;;3968   	{
;;;3969   	char modbus_buff[20],i;
;;;3970   	short crc_temp;
;;;3971   
;;;3972   	modbus_buff[0] = ICA_MODBUS_ADDRESS;
002364  48fb              LDR      r0,|L1.10068|
002366  8800              LDRH     r0,[r0,#0]  ; ICA_MODBUS_ADDRESS
002368  f88d0000          STRB     r0,[sp,#0]
;;;3973   	modbus_buff[1] = 4;
00236c  f04f0004          MOV      r0,#4
002370  f88d0001          STRB     r0,[sp,#1]
;;;3974   	modbus_buff[2] = 0;
002374  f88d5002          STRB     r5,[sp,#2]
;;;3975   	modbus_buff[3] = 2;
002378  f04f0002          MOV      r0,#2
00237c  f88d0003          STRB     r0,[sp,#3]
;;;3976   	modbus_buff[4] = 0;	
002380  f88d5004          STRB     r5,[sp,#4]
;;;3977   	modbus_buff[5] = 1;
002384  f04f0001          MOV      r0,#1
002388  f88d0005          STRB     r0,[sp,#5]
;;;3978   
;;;3979   	crc_temp= CRC16_2(modbus_buff,6);
00238c  f04f0106          MOV      r1,#6
002390  4668              MOV      r0,sp
002392  f7fffffe          BL       CRC16_2
;;;3980   
;;;3981   	modbus_buff[6]= (char)crc_temp;
002396  f88d0006          STRB     r0,[sp,#6]
;;;3982   	modbus_buff[7]= (char)(crc_temp>>8);
00239a  ea4f2020          ASR      r0,r0,#8
00239e  f88d0007          STRB     r0,[sp,#7]
;;;3983   
;;;3984   	if(ICA_CH==0)
0023a2  48ed              LDR      r0,|L1.10072|
0023a4  f9b00000          LDRSH    r0,[r0,#0]  ; ICA_CH
0023a8  b188              CBZ      r0,|L1.9166|
;;;3985   		{
;;;3986   		for (i=0;i<8;i++)
;;;3987   			{
;;;3988   			putchar_sc16is700(modbus_buff[i]);
;;;3989   			}
;;;3990   		}
;;;3991   	else if(ICA_CH==1)
0023aa  2801              CMP      r0,#1
0023ac  d10c              BNE      |L1.9160|
;;;3992   		{
;;;3993   		static U8 rem_IP[4];
;;;3994   		rem_IP[0]=ICA_MODBUS_TCP_IP1;
0023ae  48eb              LDR      r0,|L1.10076|
0023b0  8801              LDRH     r1,[r0,#0]  ; ICA_MODBUS_TCP_IP1
0023b2  48eb              LDR      r0,|L1.10080|
0023b4  7001              STRB     r1,[r0,#0]
;;;3995   		rem_IP[1]=ICA_MODBUS_TCP_IP2;
0023b6  49eb              LDR      r1,|L1.10084|
0023b8  8809              LDRH     r1,[r1,#0]  ; ICA_MODBUS_TCP_IP2
0023ba  7041              STRB     r1,[r0,#1]
;;;3996   		rem_IP[2]=ICA_MODBUS_TCP_IP3;
0023bc  49ea              LDR      r1,|L1.10088|
0023be  8809              LDRH     r1,[r1,#0]  ; ICA_MODBUS_TCP_IP3
0023c0  7081              STRB     r1,[r0,#2]
;;;3997   		rem_IP[3]=ICA_MODBUS_TCP_IP4;
0023c2  49ea              LDR      r1,|L1.10092|
0023c4  8809              LDRH     r1,[r1,#0]  ; ICA_MODBUS_TCP_IP4
0023c6  70c1              STRB     r1,[r0,#3]
                  |L1.9160|
;;;3998     		//tcp_soc_avg = tcp_get_socket (TCP_TYPE_CLIENT, 0, 30, tcp_callback);
;;;3999     		if (tcp_soc_avg != 0) 
;;;4000   			{
;;;4001       		
;;;4002   			//tcp_connect_stat=0;
;;;4003       		//tcp_connect (tcp_soc_avg, rem_IP, 502, 1000);
;;;4004   			/*while(!tcp_connect_stat)
;;;4005   				{
;;;4006   				}*/
;;;4007   			//delay_us(500);
;;;4008   			//tcp_close(tcp_soc_avg);
;;;4009   
;;;4010   			}
;;;4011   		}
;;;4012   	}
;;;4013   
;;;4014   if((ica_timer_cnt==3)&&(ICA_EN==1))
;;;4015   	{
;;;4016   	//if(tcp_connect_stat)
;;;4017   		{
;;;4018   		//tcp_close(tcp_soc_avg);
;;;4019   		//tcp_connect_stat=3;
;;;4020   		}
;;;4021   	}
;;;4022   
;;;4023   }
0023c8  b005              ADD      sp,sp,#0x14
0023ca  e8bd83f0          POP      {r4-r9,pc}
                  |L1.9166|
0023ce  f04f0400          MOV      r4,#0                 ;3986
0023d2  466d              MOV      r5,sp                 ;3969
                  |L1.9172|
0023d4  5d28              LDRB     r0,[r5,r4]            ;3988
0023d6  f7fffffe          BL       putchar_sc16is700
0023da  f1040401          ADD      r4,r4,#1              ;3986
0023de  b2e4              UXTB     r4,r4                 ;3986
0023e0  2c08              CMP      r4,#8                 ;3986
0023e2  d3f7              BCC      |L1.9172|
0023e4  e7f0              B        |L1.9160|
;;;4024   
                          ENDP

                  ipsBlckHndl PROC
;;;4107   //-----------------------------------------------
;;;4108   void ipsBlckHndl(char in)
0023e6  b510              PUSH     {r4,lr}
;;;4109   {
;;;4110   
;;;4111   ipsBlckStat=0;
0023e8  4be1              LDR      r3,|L1.10096|
0023ea  f04f0000          MOV      r0,#0
0023ee  8018              STRH     r0,[r3,#0]
;;;4112   if(ipsBlckSrc==1)
0023f0  48e0              LDR      r0,|L1.10100|
0023f2  f04f0401          MOV      r4,#1
;;;4113   	{
;;;4114   	if(((ipsBlckLog==0)&&(adc_buff_[11]>2000)) || ((ipsBlckLog==1)&&(adc_buff_[11]<2000))) ipsBlckStat=1;
0023f6  f44f62fa          MOV      r2,#0x7d0
0023fa  f9b01000          LDRSH    r1,[r0,#0]            ;4112  ; ipsBlckSrc
0023fe  48de              LDR      r0,|L1.10104|
002400  2901              CMP      r1,#1                 ;4112
002402  f9b00000          LDRSH    r0,[r0,#0]
002406  d006              BEQ      |L1.9238|
;;;4115   	}
;;;4116   else if(ipsBlckSrc==2)
002408  2902              CMP      r1,#2
00240a  d10f              BNE      |L1.9260|
00240c  49db              LDR      r1,|L1.10108|
;;;4117   	{
;;;4118   	if(((ipsBlckLog==0)&&(adc_buff_[13]>2000)) || ((ipsBlckLog==1)&&(adc_buff_[13]<2000))) ipsBlckStat=1;
00240e  f9b1101a          LDRSH    r1,[r1,#0x1a]
002412  b160              CBZ      r0,|L1.9262|
002414  e00d              B        |L1.9266|
                  |L1.9238|
002416  49d9              LDR      r1,|L1.10108|
002418  f9b11016          LDRSH    r1,[r1,#0x16]         ;4114
00241c  b908              CBNZ     r0,|L1.9250|
00241e  4291              CMP      r1,r2                 ;4114
002420  dc03              BGT      |L1.9258|
                  |L1.9250|
002422  2801              CMP      r0,#1                 ;4114
002424  d102              BNE      |L1.9260|
002426  4291              CMP      r1,r2                 ;4114
002428  da00              BGE      |L1.9260|
                  |L1.9258|
00242a  801c              STRH     r4,[r3,#0]            ;4114
                  |L1.9260|
;;;4119   	}
;;;4120   }
00242c  bd10              POP      {r4,pc}
                  |L1.9262|
00242e  4291              CMP      r1,r2                 ;4118
002430  dc03              BGT      |L1.9274|
                  |L1.9266|
002432  2801              CMP      r0,#1                 ;4118
002434  d1fa              BNE      |L1.9260|
002436  4291              CMP      r1,r2                 ;4118
002438  daf8              BGE      |L1.9260|
                  |L1.9274|
00243a  801c              STRH     r4,[r3,#0]            ;4118
00243c  bd10              POP      {r4,pc}
;;;4121   
                          ENDP

                  bps_drv PROC
;;;4122   //-----------------------------------------------
;;;4123   void bps_drv(char in)
00243e  e92d41f0          PUSH     {r4-r8,lr}
;;;4124   {
002442  4606              MOV      r6,r0
;;;4125   char temp;
;;;4126   
;;;4127   if (bps[in]._device!=dSRC) return;
002444  ebc600c6          RSB      r0,r6,r6,LSL #3
002448  49cd              LDR      r1,|L1.10112|
00244a  eb001006          ADD      r0,r0,r6,LSL #4
00244e  f8112020          LDRB     r2,[r1,r0,LSL #2]
002452  2a03              CMP      r2,#3
002454  d177              BNE      |L1.9542|
;;;4128   temp=bps[in]._flags_tm;
002456  eb010480          ADD      r4,r1,r0,LSL #2
00245a  f8945042          LDRB     r5,[r4,#0x42]
;;;4129   if(temp&(1<<AV_T))
00245e  07a8              LSLS     r0,r5,#30
002460  d517              BPL      |L1.9362|
;;;4130   	{
;;;4131   	if(bps[in]._temp_av_cnt<1200) 
002462  f9b41046          LDRSH    r1,[r4,#0x46]
002466  f44f6096          MOV      r0,#0x4b0
00246a  4281              CMP      r1,r0
00246c  da22              BGE      |L1.9396|
;;;4132   		{
;;;4133   		bps[in]._temp_av_cnt++;
00246e  f1010101          ADD      r1,r1,#1
002472  b209              SXTH     r1,r1
002474  f8a41046          STRH     r1,[r4,#0x46]
;;;4134   		if(bps[in]._temp_av_cnt>=1200)
002478  4281              CMP      r1,r0
00247a  db1b              BLT      |L1.9396|
;;;4135   			{
;;;4136   			bps[in]._temp_av_cnt=1200;
00247c  f8a40046          STRH     r0,[r4,#0x46]
;;;4137   		   	if(!(bps[in]._av&(1<<0)))avar_bps_hndl(in,0,1);
002480  7860              LDRB     r0,[r4,#1]
002482  07c0              LSLS     r0,r0,#31
002484  d116              BNE      |L1.9396|
002486  2201              MOVS     r2,#1
002488  2100              MOVS     r1,#0
00248a  4630              MOV      r0,r6
00248c  f7fffffe          BL       avar_bps_hndl
002490  e010              B        |L1.9396|
                  |L1.9362|
;;;4138   			}
;;;4139   		}
;;;4140   	}
;;;4141   
;;;4142   else if(!(temp&(1<<AV_T)))
;;;4143   	{
;;;4144   	if(bps[in]._temp_av_cnt) 
002492  f9b41046          LDRSH    r1,[r4,#0x46]
002496  b169              CBZ      r1,|L1.9396|
;;;4145   		{
;;;4146   		bps[in]._temp_av_cnt--;
002498  f1a10101          SUB      r1,r1,#1
00249c  b208              SXTH     r0,r1
00249e  f8a40046          STRH     r0,[r4,#0x46]
;;;4147   		if(!bps[in]._temp_av_cnt)
0024a2  b938              CBNZ     r0,|L1.9396|
;;;4148   			{
;;;4149   			if(bps[in]._av&(1<<0))avar_bps_hndl(in,0,0);
0024a4  7860              LDRB     r0,[r4,#1]
0024a6  07c0              LSLS     r0,r0,#31
0024a8  d004              BEQ      |L1.9396|
0024aa  2200              MOVS     r2,#0
0024ac  4611              MOV      r1,r2
0024ae  4630              MOV      r0,r6
0024b0  f7fffffe          BL       avar_bps_hndl
                  |L1.9396|
;;;4150   			}
;;;4151   		} 	
;;;4152   
;;;4153   	}
;;;4154   
;;;4155   if((temp&(1<<AVUMAX)))
0024b4  0729              LSLS     r1,r5,#28
;;;4156   	{
;;;4157   	if(bps[in]._umax_av_cnt<10) 
;;;4158   		{
;;;4159   		bps[in]._umax_av_cnt++;
;;;4160   		if(bps[in]._umax_av_cnt>=10)
;;;4161   			{ 
;;;4162   			bps[in]._umax_av_cnt=10;
0024b6  f04f070a          MOV      r7,#0xa
0024ba  f04f0000          MOV      r0,#0                 ;4137
0024be  d515              BPL      |L1.9452|
0024c0  f9b40048          LDRSH    r0,[r4,#0x48]         ;4157
0024c4  280a              CMP      r0,#0xa               ;4157
0024c6  da26              BGE      |L1.9494|
0024c8  f1000001          ADD      r0,r0,#1              ;4159
0024cc  b200              SXTH     r0,r0                 ;4159
0024ce  f8a40048          STRH     r0,[r4,#0x48]         ;4159
0024d2  280a              CMP      r0,#0xa               ;4160
0024d4  db1f              BLT      |L1.9494|
0024d6  f8a47048          STRH     r7,[r4,#0x48]
;;;4163   			if(!(bps[in]._av&(1<<1)))avar_bps_hndl(in,1,1);
0024da  7860              LDRB     r0,[r4,#1]
0024dc  0780              LSLS     r0,r0,#30
0024de  d41a              BMI      |L1.9494|
0024e0  2201              MOVS     r2,#1
0024e2  4611              MOV      r1,r2
0024e4  4630              MOV      r0,r6
0024e6  f7fffffe          BL       avar_bps_hndl
0024ea  e014              B        |L1.9494|
                  |L1.9452|
;;;4164   		  	/*if((K[APV]!=ON)||((apv_cnt[in,0]==0)&&(apv_cnt[in,1]==0)&&(apv_cnt[in,2]==0)&&(apv_flags[in]==afOFF)))avar_s_hndl(in,1,1);
;;;4165   			if((apv_cnt[in,0]==0)&&(apv_cnt[in,1]==0)&&(apv_cnt[in,2]==0)&&(apv_flags[in]==afON))
;;;4166   				{
;;;4167   				apv_cnt[in,0]=APV_INIT;
;;;4168   				apv_cnt[in,1]=APV_INIT;
;;;4169   				apv_cnt[in,2]=APV_INIT;
;;;4170   				apv_flags[in]=afOFF;
;;;4171   				}				*/
;;;4172   						
;;;4173   			}
;;;4174   		} 
;;;4175   	}		
;;;4176   else if(!(temp&(1<<AVUMAX)))
;;;4177   	{
;;;4178   	if(bps[in]._umax_av_cnt>0) 
0024ec  f9b41048          LDRSH    r1,[r4,#0x48]
0024f0  2900              CMP      r1,#0
0024f2  dd0d              BLE      |L1.9488|
;;;4179   		{
;;;4180   		bps[in]._umax_av_cnt--;
0024f4  f1a10101          SUB      r1,r1,#1
0024f8  b208              SXTH     r0,r1
0024fa  f8a40048          STRH     r0,[r4,#0x48]
;;;4181   		if(bps[in]._umax_av_cnt==0)
0024fe  b950              CBNZ     r0,|L1.9494|
;;;4182   			{
;;;4183   			bps[in]._umax_av_cnt=0;
;;;4184   			avar_bps_hndl(in,1,0);
002500  f04f0200          MOV      r2,#0
002504  f04f0101          MOV      r1,#1
002508  4630              MOV      r0,r6
00250a  f7fffffe          BL       avar_bps_hndl
00250e  e002              B        |L1.9494|
                  |L1.9488|
;;;4185   	 //		apv_cnt[in,0]=0;
;;;4186   	//		apv_cnt[in,1]=0;
;;;4187   	 //		apv_cnt[in,2]=0;			
;;;4188   			}
;;;4189   		}
;;;4190   	else if(bps[in]._umax_av_cnt<0) bps[in]._umax_av_cnt=0;		 
002510  da01              BGE      |L1.9494|
002512  f8a40048          STRH     r0,[r4,#0x48]
                  |L1.9494|
;;;4191   	}
;;;4192   
;;;4193   if(temp&(1<<AVUMIN))
002516  06e8              LSLS     r0,r5,#27
002518  d516              BPL      |L1.9544|
;;;4194   	{
;;;4195   	if(bps[in]._umin_av_cnt<10) 
00251a  f9b4004a          LDRSH    r0,[r4,#0x4a]
00251e  280a              CMP      r0,#0xa
002520  da20              BGE      |L1.9572|
;;;4196   		{
;;;4197   		bps[in]._umin_av_cnt++;
002522  f1000001          ADD      r0,r0,#1
002526  b200              SXTH     r0,r0
002528  f8a4004a          STRH     r0,[r4,#0x4a]
;;;4198   		if(bps[in]._umin_av_cnt>=10)
00252c  280a              CMP      r0,#0xa
00252e  db19              BLT      |L1.9572|
;;;4199   			{ 
;;;4200   			bps[in]._umin_av_cnt=10;
002530  f8a4704a          STRH     r7,[r4,#0x4a]
;;;4201   			if(!(bps[in]._av&(1<<2)))avar_bps_hndl(in,2,1);
002534  7860              LDRB     r0,[r4,#1]
002536  0740              LSLS     r0,r0,#29
002538  d414              BMI      |L1.9572|
00253a  2201              MOVS     r2,#1
00253c  2102              MOVS     r1,#2
00253e  4630              MOV      r0,r6
002540  f7fffffe          BL       avar_bps_hndl
002544  e00e              B        |L1.9572|
                  |L1.9542|
002546  e047              B        |L1.9688|
                  |L1.9544|
;;;4202   		  	/*	if((K[APV]!=ON)||((apv_cnt[in,0]==0)&&(apv_cnt[in,1]==0)&&(apv_cnt[in,2]==0)&&(apv_flags[in]==afOFF)))avar_s_hndl(in,2,1);
;;;4203   			if((apv_cnt[in,0]==0)&&(apv_cnt[in,1]==0)&&(apv_cnt[in,2]==0)&&(apv_flags[in]==afON))
;;;4204   				{
;;;4205   				apv_cnt[in,0]=APV_INIT;
;;;4206   				apv_cnt[in,1]=APV_INIT;
;;;4207   				apv_cnt[in,2]=APV_INIT;
;;;4208   				apv_flags[in]=afOFF;
;;;4209   				}*/				
;;;4210   			}
;;;4211   		} 
;;;4212   	}	
;;;4213   	
;;;4214   else if(!(temp&(1<<AVUMIN)))
;;;4215   	{
;;;4216   	if(bps[in]._umin_av_cnt) 
002548  f9b4004a          LDRSH    r0,[r4,#0x4a]
00254c  b150              CBZ      r0,|L1.9572|
;;;4217   		{
;;;4218   		bps[in]._umin_av_cnt--;
00254e  f1a00001          SUB      r0,r0,#1
002552  b201              SXTH     r1,r0
002554  f8a4104a          STRH     r1,[r4,#0x4a]
;;;4219   		if(bps[in]._umin_av_cnt==0)
002558  b921              CBNZ     r1,|L1.9572|
;;;4220   			{
;;;4221   			bps[in]._umin_av_cnt=0;
;;;4222   			avar_bps_hndl(in,2,0);
00255a  2200              MOVS     r2,#0
00255c  2102              MOVS     r1,#2
00255e  4630              MOV      r0,r6
002560  f7fffffe          BL       avar_bps_hndl
                  |L1.9572|
;;;4223   		//	apv_cnt[in,0]=0;
;;;4224   		//	apv_cnt[in,1]=0;
;;;4225   		//	apv_cnt[in,2]=0;
;;;4226   			}
;;;4227   		}
;;;4228   	else if(bps[in]._umin_av_cnt>10)bps[in]._umin_av_cnt--;	 
;;;4229   	}
;;;4230   
;;;4231   //bps[in]._state=bsOFF;
;;;4232   
;;;4233   if (bps[in]._av&0x0f)					bps[in]._state=bsAV;
002564  7860              LDRB     r0,[r4,#1]
002566  0700              LSLS     r0,r0,#28
002568  d003              BEQ      |L1.9586|
00256a  f04f0004          MOV      r0,#4
00256e  70a0              STRB     r0,[r4,#2]
002570  e017              B        |L1.9634|
                  |L1.9586|
;;;4234   else if ( (net_av) && (bps[in]._cnt>20)/*&& 
002572  4884              LDR      r0,|L1.10116|
002574  7800              LDRB     r0,[r0,#0]  ; net_av
002576  b130              CBZ      r0,|L1.9606|
002578  78e0              LDRB     r0,[r4,#3]
00257a  2814              CMP      r0,#0x14
00257c  d903              BLS      |L1.9606|
;;;4235   		(bps[in]._Uii<200)*/)				bps[in]._state=bsOFF_AV_NET;
00257e  f04f0005          MOV      r0,#5
002582  70a0              STRB     r0,[r4,#2]
002584  e00d              B        |L1.9634|
                  |L1.9606|
;;;4236   else if (bps[in]._flags_tm&BIN8(100000))	bps[in]._state=bsRDY;
002586  f8940042          LDRB     r0,[r4,#0x42]
00258a  0680              LSLS     r0,r0,#26
00258c  d503              BPL      |L1.9622|
00258e  f04f0002          MOV      r0,#2
002592  70a0              STRB     r0,[r4,#2]
002594  e005              B        |L1.9634|
                  |L1.9622|
;;;4237   else if (bps[in]._cnt<20)				bps[in]._state=bsWRK;
002596  78e0              LDRB     r0,[r4,#3]
002598  2814              CMP      r0,#0x14
00259a  d202              BCS      |L1.9634|
00259c  f04f0001          MOV      r0,#1
0025a0  70a0              STRB     r0,[r4,#2]
                  |L1.9634|
;;;4238   
;;;4239   
;;;4240   
;;;4241   //else if(bps[in]._flags_tm&BIN8(100000)) bps[in]._state=ssBL;
;;;4242   //else if((!(bps[in]._flags_tm&BIN8(100000)))&&(net_U>100))bps[in]._state=ssWRK;
;;;4243   //else bps[0]._state=ssNOT;
;;;4244   
;;;4245   //bps[in]._is_ready=0;
;;;4246   //bps[in]._is_wrk=0;
;;;4247   //if(bps[in]._av_net) bps[in]._flags_bp='N';//  
;;;4248   //else if(bps[in]._av_u_max) bps[in]._flags_bp='P';//  (u_.av_.bAS1T)) bps_state[0]=ssAV;
;;;4249   //else if(bps[in]._av_u_min) bps[in]._flags_bp='M';//  
;;;4250   //else if(bps[in]._av_temper) bps[in]._flags_bp='T';// 
;;;4251   //else if(bps[in]._flags_tm&BIN8(100000)) 
;;;4252   //	{
;;;4253   //	bps[in]._flags_bp='B';// 
;;;4254   //	bps[in]._is_ready=1;
;;;4255   //	}
;;;4256   //else if((!(bps[in]._flags_tm&BIN8(100000)))&&(net_U>100))
;;;4257   //     {
;;;4258   //     bps[in]._flags_bp='W';// 
;;;4259   //     bps[in]._is_ready=1;
;;;4260   //     bps[in]._is_wrk=1;
;;;4261        
;;;4262   //     }
;;;4263   //else bps[in]._is_ready=1;     
;;;4264   
;;;4265   
;;;4266   
;;;4267   
;;;4268   
;;;4269   /*
;;;4270   bps[in]._flags_tu&=BIN8(11111110);
;;;4271   if(bps[in]._ist_blok_cnt)
;;;4272   	{
;;;4273   	bps[in]._ist_blok_cnt--;
;;;4274   	bps[in]._flags_tu|=BIN8(1);
;;;4275   	}
;;;4276   
;;;4277   	   */ 
;;;4278   
;;;4279   //    
;;;4280   if(bps[in]._cnt>=10) bps[in]._flags_tu|=BIN8(10000000);
0025a2  78e0              LDRB     r0,[r4,#3]
0025a4  280a              CMP      r0,#0xa
0025a6  d306              BCC      |L1.9654|
0025a8  f894002c          LDRB     r0,[r4,#0x2c]
0025ac  f0400080          ORR      r0,r0,#0x80
0025b0  f884002c          STRB     r0,[r4,#0x2c]
0025b4  e005              B        |L1.9666|
                  |L1.9654|
;;;4281   else bps[in]._flags_tu&=BIN8(1111111);
0025b6  f894002c          LDRB     r0,[r4,#0x2c]
0025ba  f000007f          AND      r0,r0,#0x7f
0025be  f884002c          STRB     r0,[r4,#0x2c]
                  |L1.9666|
;;;4282   	
;;;4283   bps[in]._vol_u=cntrl_stat+bps[in]._x_;	
0025c2  4967              LDR      r1,|L1.10080|
0025c4  f9b40050          LDRSH    r0,[r4,#0x50]
0025c8  396c              SUBS     r1,r1,#0x6c
0025ca  f9b1101c          LDRSH    r1,[r1,#0x1c]  ; cntrl_stat
0025ce  4408              ADD      r0,r0,r1
0025d0  6320              STR      r0,[r4,#0x30]
;;;4284   bps[in]._vol_i=1000; 
0025d2  f44f707a          MOV      r0,#0x3e8
0025d6  6360              STR      r0,[r4,#0x34]
                  |L1.9688|
;;;4285   }
0025d8  e482              B        |L1.7904|
;;;4286   
                          ENDP

                  avt_hndl PROC
;;;4287   //-----------------------------------------------
;;;4288   void avt_hndl(void)
0025da  b570              PUSH     {r4-r6,lr}
;;;4289   {
;;;4290   char i;
;;;4291   for(i=0;i<12;i++)
0025dc  f04f0000          MOV      r0,#0
;;;4292   	{
;;;4293   	if(eb2_data_short[6]&(1<<i))
0025e0  4969              LDR      r1,|L1.10120|
;;;4294   		{
;;;4295   		avt_stat[i]=avtON;
0025e2  4d6a              LDR      r5,|L1.10124|
0025e4  f04f0401          MOV      r4,#1                 ;4293
0025e8  f9b1200c          LDRSH    r2,[r1,#0xc]          ;4293
0025ec  4603              MOV      r3,r0                 ;4291
                  |L1.9710|
0025ee  fa04f100          LSL      r1,r4,r0              ;4293
0025f2  420a              TST      r2,r1                 ;4293
0025f4  d001              BEQ      |L1.9722|
0025f6  542c              STRB     r4,[r5,r0]
0025f8  e000              B        |L1.9724|
                  |L1.9722|
;;;4296   		}
;;;4297   	else avt_stat[i]=avtOFF;
0025fa  542b              STRB     r3,[r5,r0]
                  |L1.9724|
0025fc  f1000001          ADD      r0,r0,#1              ;4291
002600  b2c0              UXTB     r0,r0                 ;4291
002602  280c              CMP      r0,#0xc               ;4291
002604  d3f3              BCC      |L1.9710|
;;;4298   	}
;;;4299   
;;;4300   if((avt_stat_old[0]!=avt_stat[0])&&(NUMAVT>=1))
002606  4e62              LDR      r6,|L1.10128|
002608  7828              LDRB     r0,[r5,#0]  ; avt_stat
00260a  4c62              LDR      r4,|L1.10132|
00260c  7831              LDRB     r1,[r6,#0]  ; avt_stat_old
00260e  4281              CMP      r1,r0
002610  d00b              BEQ      |L1.9770|
002612  f9b41000          LDRSH    r1,[r4,#0]  ; NUMAVT
002616  2901              CMP      r1,#1
002618  db07              BLT      |L1.9770|
;;;4301   	{
;;;4302   	if(avt_stat[0]==avtON) 	snmp_trap_send("Avtomat #1 is ON ",11,1,1);
00261a  2801              CMP      r0,#1
00261c  d07e              BEQ      |L1.10012|
;;;4303   	else 				snmp_trap_send("Avtomat #1 is OFF",11,1,0);
00261e  2300              MOVS     r3,#0
002620  2201              MOVS     r2,#1
002622  210b              MOVS     r1,#0xb
002624  a05c              ADR      r0,|L1.10136|
002626  f7fffffe          BL       snmp_trap_send
                  |L1.9770|
;;;4304   	}
;;;4305   if((avt_stat_old[1]!=avt_stat[1])&&(NUMAVT>=2))
00262a  7871              LDRB     r1,[r6,#1]  ; avt_stat_old
00262c  7868              LDRB     r0,[r5,#1]  ; avt_stat
00262e  4281              CMP      r1,r0
002630  d00b              BEQ      |L1.9802|
002632  f9b41000          LDRSH    r1,[r4,#0]  ; NUMAVT
002636  2902              CMP      r1,#2
002638  db07              BLT      |L1.9802|
;;;4306   	{
;;;4307   	if(avt_stat[1]==avtON) 	snmp_trap_send("Avtomat #2 is ON ",11,2,1);
00263a  2801              CMP      r0,#1
00263c  d06f              BEQ      |L1.10014|
;;;4308   	else 				snmp_trap_send("Avtomat #2 is OFF",11,2,0);
00263e  2300              MOVS     r3,#0
002640  2202              MOVS     r2,#2
002642  210b              MOVS     r1,#0xb
002644  a059              ADR      r0,|L1.10156|
002646  f7fffffe          BL       snmp_trap_send
                  |L1.9802|
;;;4309   	}
;;;4310   if((avt_stat_old[2]!=avt_stat[2])&&(NUMAVT>=3))
00264a  78b1              LDRB     r1,[r6,#2]  ; avt_stat_old
00264c  78a8              LDRB     r0,[r5,#2]  ; avt_stat
00264e  4281              CMP      r1,r0
002650  d00b              BEQ      |L1.9834|
002652  f9b41000          LDRSH    r1,[r4,#0]  ; NUMAVT
002656  2903              CMP      r1,#3
002658  db07              BLT      |L1.9834|
;;;4311   	{
;;;4312   	if(avt_stat[2]==avtON) 	snmp_trap_send("Avtomat #3 is ON ",11,3,1);
00265a  2801              CMP      r0,#1
00265c  d071              BEQ      |L1.10050|
;;;4313   	else 				snmp_trap_send("Avtomat #3 is OFF",11,3,0);
00265e  2300              MOVS     r3,#0
002660  2203              MOVS     r2,#3
002662  210b              MOVS     r1,#0xb
002664  a056              ADR      r0,|L1.10176|
002666  f7fffffe          BL       snmp_trap_send
                  |L1.9834|
;;;4314   	}
;;;4315   if((avt_stat_old[3]!=avt_stat[3])&&(NUMAVT>=4))
00266a  78f1              LDRB     r1,[r6,#3]  ; avt_stat_old
00266c  78e8              LDRB     r0,[r5,#3]  ; avt_stat
00266e  4281              CMP      r1,r0
002670  d00b              BEQ      |L1.9866|
002672  f9b41000          LDRSH    r1,[r4,#0]  ; NUMAVT
002676  2904              CMP      r1,#4
002678  db07              BLT      |L1.9866|
;;;4316   	{
;;;4317   	if(avt_stat[3]==avtON) 	snmp_trap_send("Avtomat #4 is ON ",11,4,1);
00267a  2801              CMP      r0,#1
00267c  d062              BEQ      |L1.10052|
;;;4318   	else 				snmp_trap_send("Avtomat #4 is OFF",11,4,0);
00267e  2300              MOVS     r3,#0
002680  2204              MOVS     r2,#4
002682  210b              MOVS     r1,#0xb
002684  a053              ADR      r0,|L1.10196|
002686  f7fffffe          BL       snmp_trap_send
                  |L1.9866|
;;;4319   	}
;;;4320   if((avt_stat_old[4]!=avt_stat[4])&&(NUMAVT>=5))
00268a  7931              LDRB     r1,[r6,#4]  ; avt_stat_old
00268c  7928              LDRB     r0,[r5,#4]  ; avt_stat
00268e  4281              CMP      r1,r0
002690  d00b              BEQ      |L1.9898|
002692  f9b41000          LDRSH    r1,[r4,#0]  ; NUMAVT
002696  2905              CMP      r1,#5
002698  db07              BLT      |L1.9898|
;;;4321   	{
;;;4322   	if(avt_stat[4]==avtON) 	snmp_trap_send("Avtomat #5 is ON ",11,5,1);
00269a  2801              CMP      r0,#1
00269c  d053              BEQ      |L1.10054|
;;;4323   	else 				snmp_trap_send("Avtomat #5 is OFF",11,5,0);
00269e  2300              MOVS     r3,#0
0026a0  2205              MOVS     r2,#5
0026a2  210b              MOVS     r1,#0xb
0026a4  a050              ADR      r0,|L1.10216|
0026a6  f7fffffe          BL       snmp_trap_send
                  |L1.9898|
;;;4324   	}
;;;4325   if((avt_stat_old[5]!=avt_stat[5])&&(NUMAVT>=6))
0026aa  7971              LDRB     r1,[r6,#5]  ; avt_stat_old
0026ac  7968              LDRB     r0,[r5,#5]  ; avt_stat
0026ae  4281              CMP      r1,r0
0026b0  d00b              BEQ      |L1.9930|
0026b2  f9b41000          LDRSH    r1,[r4,#0]  ; NUMAVT
0026b6  2906              CMP      r1,#6
0026b8  db07              BLT      |L1.9930|
;;;4326   	{
;;;4327   	if(avt_stat[5]==avtON) 	snmp_trap_send("Avtomat #6 is ON ",11,6,1);
0026ba  2801              CMP      r0,#1
0026bc  d044              BEQ      |L1.10056|
;;;4328   	else 				snmp_trap_send("Avtomat #6 is OFF",11,6,0);
0026be  2300              MOVS     r3,#0
0026c0  2206              MOVS     r2,#6
0026c2  210b              MOVS     r1,#0xb
0026c4  a04d              ADR      r0,|L1.10236|
0026c6  f7fffffe          BL       snmp_trap_send
                  |L1.9930|
;;;4329   	}
;;;4330   if((avt_stat_old[6]!=avt_stat[6])&&(NUMAVT>=7))
0026ca  79b1              LDRB     r1,[r6,#6]  ; avt_stat_old
0026cc  79a8              LDRB     r0,[r5,#6]  ; avt_stat
0026ce  4281              CMP      r1,r0
0026d0  d00b              BEQ      |L1.9962|
0026d2  f9b41000          LDRSH    r1,[r4,#0]  ; NUMAVT
0026d6  2907              CMP      r1,#7
0026d8  db07              BLT      |L1.9962|
;;;4331   	{
;;;4332   	if(avt_stat[6]==avtON) 	snmp_trap_send("Avtomat #7 is ON ",11,7,1);
0026da  2801              CMP      r0,#1
0026dc  d035              BEQ      |L1.10058|
;;;4333   	else 				snmp_trap_send("Avtomat #7 is OFF",11,7,0);
0026de  2300              MOVS     r3,#0
0026e0  2207              MOVS     r2,#7
0026e2  210b              MOVS     r1,#0xb
0026e4  a04a              ADR      r0,|L1.10256|
0026e6  f7fffffe          BL       snmp_trap_send
                  |L1.9962|
;;;4334   	}
;;;4335   if((avt_stat_old[7]!=avt_stat[7])&&(NUMAVT>=8))
0026ea  79f1              LDRB     r1,[r6,#7]  ; avt_stat_old
0026ec  79e8              LDRB     r0,[r5,#7]  ; avt_stat
0026ee  4281              CMP      r1,r0
0026f0  d00b              BEQ      |L1.9994|
0026f2  f9b41000          LDRSH    r1,[r4,#0]  ; NUMAVT
0026f6  2908              CMP      r1,#8
0026f8  db07              BLT      |L1.9994|
;;;4336   	{
;;;4337   	if(avt_stat[7]==avtON) 	snmp_trap_send("Avtomat #8 is ON ",11,8,1);
0026fa  2801              CMP      r0,#1
0026fc  d026              BEQ      |L1.10060|
;;;4338   	else 				snmp_trap_send("Avtomat #8 is OFF",11,8,0);
0026fe  2300              MOVS     r3,#0
002700  2208              MOVS     r2,#8
002702  210b              MOVS     r1,#0xb
002704  a047              ADR      r0,|L1.10276|
002706  f7fffffe          BL       snmp_trap_send
                  |L1.9994|
;;;4339   	}
;;;4340   if((avt_stat_old[8]!=avt_stat[8])&&(NUMAVT>=9))
00270a  7a31              LDRB     r1,[r6,#8]  ; avt_stat_old
00270c  7a28              LDRB     r0,[r5,#8]  ; avt_stat
00270e  4281              CMP      r1,r0
002710  d00e              BEQ      |L1.10032|
002712  f9b41000          LDRSH    r1,[r4,#0]  ; NUMAVT
002716  2909              CMP      r1,#9
002718  db0a              BLT      |L1.10032|
;;;4341   	{
;;;4342   	if(avt_stat[8]==avtON) 	snmp_trap_send("Avtomat #9 is ON ",11,9,1);
00271a  e001              B        |L1.10016|
                  |L1.10012|
00271c  e099              B        |L1.10322|
                  |L1.10014|
00271e  e09f              B        |L1.10336|
                  |L1.10016|
002720  2801              CMP      r0,#1
002722  d014              BEQ      |L1.10062|
;;;4343   	else 				snmp_trap_send("Avtomat #9 is OFF",11,9,0);
002724  2300              MOVS     r3,#0
002726  2209              MOVS     r2,#9
002728  210b              MOVS     r1,#0xb
00272a  a043              ADR      r0,|L1.10296|
00272c  f7fffffe          BL       snmp_trap_send
                  |L1.10032|
;;;4344   	}
;;;4345   
;;;4346   for(i=0;i<12;i++)
002730  f04f0000          MOV      r0,#0
                  |L1.10036|
;;;4347   	{
;;;4348   	avt_stat_old[i]=avt_stat[i];
002734  5c29              LDRB     r1,[r5,r0]
002736  5431              STRB     r1,[r6,r0]
002738  f1000001          ADD      r0,r0,#1              ;4346
00273c  b2c0              UXTB     r0,r0                 ;4346
00273e  280c              CMP      r0,#0xc               ;4346
002740  e084              B        |L1.10316|
                  |L1.10050|
002742  e094              B        |L1.10350|
                  |L1.10052|
002744  e09a              B        |L1.10364|
                  |L1.10054|
002746  e0a0              B        |L1.10378|
                  |L1.10056|
002748  e0a6              B        |L1.10392|
                  |L1.10058|
00274a  e0ac              B        |L1.10406|
                  |L1.10060|
00274c  e0b2              B        |L1.10420|
                  |L1.10062|
00274e  e0b8              B        |L1.10434|
                  |L1.10064|
                          DCD      ica_u_necc
                  |L1.10068|
                          DCD      ICA_MODBUS_ADDRESS
                  |L1.10072|
                          DCD      ICA_CH
                  |L1.10076|
                          DCD      ICA_MODBUS_TCP_IP1
                  |L1.10080|
                          DCD      ||area_number.21||+0x6c
                  |L1.10084|
                          DCD      ICA_MODBUS_TCP_IP2
                  |L1.10088|
                          DCD      ICA_MODBUS_TCP_IP3
                  |L1.10092|
                          DCD      ICA_MODBUS_TCP_IP4
                  |L1.10096|
                          DCD      ipsBlckStat
                  |L1.10100|
                          DCD      ipsBlckSrc
                  |L1.10104|
                          DCD      ipsBlckLog
                  |L1.10108|
                          DCD      ||.bss||+0x400
                  |L1.10112|
                          DCD      bps
                  |L1.10116|
                          DCD      net_av
                  |L1.10120|
                          DCD      eb2_data_short
                  |L1.10124|
                          DCD      avt_stat
                  |L1.10128|
                          DCD      avt_stat_old
                  |L1.10132|
                          DCD      NUMAVT
                  |L1.10136|
002798  4176746f          DCB      "Avtomat #1 is OFF",0
00279c  6d617420
0027a0  23312069
0027a4  73204f46
0027a8  4600    
0027aa  00                DCB      0
0027ab  00                DCB      0
                  |L1.10156|
0027ac  4176746f          DCB      "Avtomat #2 is OFF",0
0027b0  6d617420
0027b4  23322069
0027b8  73204f46
0027bc  4600    
0027be  00                DCB      0
0027bf  00                DCB      0
                  |L1.10176|
0027c0  4176746f          DCB      "Avtomat #3 is OFF",0
0027c4  6d617420
0027c8  23332069
0027cc  73204f46
0027d0  4600    
0027d2  00                DCB      0
0027d3  00                DCB      0
                  |L1.10196|
0027d4  4176746f          DCB      "Avtomat #4 is OFF",0
0027d8  6d617420
0027dc  23342069
0027e0  73204f46
0027e4  4600    
0027e6  00                DCB      0
0027e7  00                DCB      0
                  |L1.10216|
0027e8  4176746f          DCB      "Avtomat #5 is OFF",0
0027ec  6d617420
0027f0  23352069
0027f4  73204f46
0027f8  4600    
0027fa  00                DCB      0
0027fb  00                DCB      0
                  |L1.10236|
0027fc  4176746f          DCB      "Avtomat #6 is OFF",0
002800  6d617420
002804  23362069
002808  73204f46
00280c  4600    
00280e  00                DCB      0
00280f  00                DCB      0
                  |L1.10256|
002810  4176746f          DCB      "Avtomat #7 is OFF",0
002814  6d617420
002818  23372069
00281c  73204f46
002820  4600    
002822  00                DCB      0
002823  00                DCB      0
                  |L1.10276|
002824  4176746f          DCB      "Avtomat #8 is OFF",0
002828  6d617420
00282c  23382069
002830  73204f46
002834  4600    
002836  00                DCB      0
002837  00                DCB      0
                  |L1.10296|
002838  4176746f          DCB      "Avtomat #9 is OFF",0
00283c  6d617420
002840  23392069
002844  73204f46
002848  4600    
00284a  00                DCB      0
00284b  00                DCB      0
                  |L1.10316|
00284c  f4ffaf72          BCC      |L1.10036|
;;;4349   	}
;;;4350   }
002850  bd70              POP      {r4-r6,pc}
                  |L1.10322|
002852  2301              MOVS     r3,#1                 ;4302
002854  461a              MOV      r2,r3                 ;4302
002856  210b              MOVS     r1,#0xb               ;4302
002858  a0ec              ADR      r0,|L1.11276|
00285a  f7fffffe          BL       snmp_trap_send
00285e  e6e4              B        |L1.9770|
                  |L1.10336|
002860  2301              MOVS     r3,#1                 ;4307
002862  2202              MOVS     r2,#2                 ;4307
002864  210b              MOVS     r1,#0xb               ;4307
002866  a0ee              ADR      r0,|L1.11296|
002868  f7fffffe          BL       snmp_trap_send
00286c  e6ed              B        |L1.9802|
                  |L1.10350|
00286e  2301              MOVS     r3,#1                 ;4312
002870  2203              MOVS     r2,#3                 ;4312
002872  210b              MOVS     r1,#0xb               ;4312
002874  a0ef              ADR      r0,|L1.11316|
002876  f7fffffe          BL       snmp_trap_send
00287a  e6f6              B        |L1.9834|
                  |L1.10364|
00287c  2301              MOVS     r3,#1                 ;4317
00287e  2204              MOVS     r2,#4                 ;4317
002880  210b              MOVS     r1,#0xb               ;4317
002882  a0f1              ADR      r0,|L1.11336|
002884  f7fffffe          BL       snmp_trap_send
002888  e6ff              B        |L1.9866|
                  |L1.10378|
00288a  2301              MOVS     r3,#1                 ;4322
00288c  2205              MOVS     r2,#5                 ;4322
00288e  210b              MOVS     r1,#0xb               ;4322
002890  a0f2              ADR      r0,|L1.11356|
002892  f7fffffe          BL       snmp_trap_send
002896  e708              B        |L1.9898|
                  |L1.10392|
002898  2301              MOVS     r3,#1                 ;4327
00289a  2206              MOVS     r2,#6                 ;4327
00289c  210b              MOVS     r1,#0xb               ;4327
00289e  a0f4              ADR      r0,|L1.11376|
0028a0  f7fffffe          BL       snmp_trap_send
0028a4  e711              B        |L1.9930|
                  |L1.10406|
0028a6  2301              MOVS     r3,#1                 ;4332
0028a8  2207              MOVS     r2,#7                 ;4332
0028aa  210b              MOVS     r1,#0xb               ;4332
0028ac  a0f5              ADR      r0,|L1.11396|
0028ae  f7fffffe          BL       snmp_trap_send
0028b2  e71a              B        |L1.9962|
                  |L1.10420|
0028b4  2301              MOVS     r3,#1                 ;4337
0028b6  2208              MOVS     r2,#8                 ;4337
0028b8  210b              MOVS     r1,#0xb               ;4337
0028ba  a0f7              ADR      r0,|L1.11416|
0028bc  f7fffffe          BL       snmp_trap_send
0028c0  e723              B        |L1.9994|
                  |L1.10434|
0028c2  2301              MOVS     r3,#1                 ;4342
0028c4  2209              MOVS     r2,#9                 ;4342
0028c6  210b              MOVS     r1,#0xb               ;4342
0028c8  a0f8              ADR      r0,|L1.11436|
0028ca  f7fffffe          BL       snmp_trap_send
0028ce  e72f              B        |L1.10032|
;;;4351   
                          ENDP

                  bat_hndl PROC
;;;4352   //-----------------------------------------------
;;;4353   void bat_hndl(void)
0028d0  b570              PUSH     {r4-r6,lr}
;;;4354   {
;;;4355   /*if(mess_find(_MESS_BAT_MASK_ON))
;;;4356   	{
;;;4357   	if(mess_data[0]==_MESS_BAT_MASK_ON)
;;;4358   		{
;;;4359   		char i;
;;;4360   		for(i=0;i<2;i++)
;;;4361   			{
;;;4362   			if(mess_data[1]&(1<<i))
;;;4363   				{
;;;4364   				bat[i]._cnt_to_block=0;
;;;4365        			bat[i]._rel_stat=0;
;;;4366        			}
;;;4367   			}
;;;4368   		}
;;;4369   	}
;;;4370   if(mess_find(_MESS_BAT_MASK_OFF))
;;;4371   	{		
;;;4372   	if(mess_data[0]==_MESS_BAT_MASK_OFF)
;;;4373   		{
;;;4374   		char i;
;;;4375   		for(i=0;i<2;i++)
;;;4376   			{
;;;4377   			if((mess_data[1]&(1<<i)) && (bat[i]._cnt_to_block==0) && (bat[i]._rel_stat==0))
;;;4378   				{
;;;4379   				bat[i]._cnt_to_block=20;
;;;4380   				bat[i]._rel_stat=1;
;;;4381        			}
;;;4382   			}
;;;4383   		
;;;4384   		}		
;;;4385   	}*/
;;;4386   
;;;4387   if(mess_find_unvol(MESS2BAT_HNDL))
0028d2  20c8              MOVS     r0,#0xc8
0028d4  f7fffffe          BL       mess_find_unvol
;;;4388   	{ 
;;;4389   	char i;
;;;4390   	
;;;4391   	if(mess_data[0]==PARAM_BAT_ALL_OFF_AFTER_2SEC)
;;;4392   		{
;;;4393   		for(i=0;i<MAX_NUM_OF_BAT;i++)
;;;4394   			{
;;;4395   			if(bat[i]._cnt_to_block<50)bat[i]._cnt_to_block++;
0028d8  49f9              LDR      r1,|L1.11456|
0028da  2200              MOVS     r2,#0                 ;4393
0028dc  b3a8              CBZ      r0,|L1.10570|
0028de  4bf9              LDR      r3,|L1.11460|
;;;4396   			}
;;;4397   		}
;;;4398   
;;;4399   	else if(mess_data[0]==PARAM_BAT_MASK_OFF_AFTER_2SEC)
;;;4400   		{
;;;4401   		for(i=0;i<MAX_NUM_OF_BAT;i++)
;;;4402   			{
;;;4403   			if(mess_data[1]&(1<<i))
0028e0  2401              MOVS     r4,#1
0028e2  6818              LDR      r0,[r3,#0]            ;4391  ; mess_data
0028e4  28c9              CMP      r0,#0xc9              ;4391
0028e6  d01c              BEQ      |L1.10530|
0028e8  28ca              CMP      r0,#0xca              ;4399
0028ea  d02f              BEQ      |L1.10572|
;;;4404   				{
;;;4405   				if(bat[i]._cnt_to_block<50) bat[i]._cnt_to_block++;
;;;4406   				}
;;;4407   			else bat[i]._cnt_to_block=0;
;;;4408   			}
;;;4409   		}
;;;4410   	else 
;;;4411   	 	{
;;;4412   		for(i=0;i<MAX_NUM_OF_BAT;i++)
0028ec  4610              MOV      r0,r2
                  |L1.10478|
;;;4413   			{
;;;4414   			bat[i]._cnt_to_block=0;
0028ee  eb000340          ADD      r3,r0,r0,LSL #1
0028f2  eb031300          ADD      r3,r3,r0,LSL #4
0028f6  f8012023          STRB     r2,[r1,r3,LSL #2]
0028fa  f1000001          ADD      r0,r0,#1              ;4412
0028fe  b2c0              UXTB     r0,r0                 ;4412
002900  2802              CMP      r0,#2                 ;4412
002902  d3f4              BCC      |L1.10478|
                  |L1.10500|
;;;4415   			}
;;;4416   
;;;4417   		}
;;;4418   	for(i=0;i<MAX_NUM_OF_BAT;i++)
002904  f04f0000          MOV      r0,#0
                  |L1.10504|
;;;4419   		{
;;;4420   		if(bat[i]._cnt_to_block>20)bat[i]._rel_stat=1;
002908  eb000340          ADD      r3,r0,r0,LSL #1
00290c  eb031300          ADD      r3,r3,r0,LSL #4
002910  f8115023          LDRB     r5,[r1,r3,LSL #2]
002914  2d14              CMP      r5,#0x14
002916  d939              BLS      |L1.10636|
002918  eb010383          ADD      r3,r1,r3,LSL #2
00291c  f883403c          STRB     r4,[r3,#0x3c]
002920  e038              B        |L1.10644|
                  |L1.10530|
002922  f04f0000          MOV      r0,#0                 ;4393
                  |L1.10534|
002926  eb000340          ADD      r3,r0,r0,LSL #1       ;4395
00292a  eb031500          ADD      r5,r3,r0,LSL #4       ;4395
00292e  f8113025          LDRB     r3,[r1,r5,LSL #2]     ;4395
002932  2b32              CMP      r3,#0x32              ;4395
002934  d203              BCS      |L1.10558|
002936  f1030301          ADD      r3,r3,#1              ;4395
00293a  f8013025          STRB     r3,[r1,r5,LSL #2]     ;4395
                  |L1.10558|
00293e  f1000001          ADD      r0,r0,#1              ;4393
002942  b2c0              UXTB     r0,r0                 ;4393
002944  2802              CMP      r0,#2                 ;4393
002946  d3ee              BCC      |L1.10534|
002948  e7dc              B        |L1.10500|
                  |L1.10570|
00294a  e029              B        |L1.10656|
                  |L1.10572|
00294c  f04f0000          MOV      r0,#0                 ;4401
002950  685e              LDR      r6,[r3,#4]            ;4403
                  |L1.10578|
002952  fa04f300          LSL      r3,r4,r0              ;4403
002956  421e              TST      r6,r3                 ;4403
002958  d00c              BEQ      |L1.10612|
00295a  eb000340          ADD      r3,r0,r0,LSL #1       ;4405
00295e  eb031500          ADD      r5,r3,r0,LSL #4       ;4405
002962  f8113025          LDRB     r3,[r1,r5,LSL #2]     ;4405
002966  2b32              CMP      r3,#0x32              ;4405
002968  d20a              BCS      |L1.10624|
00296a  f1030301          ADD      r3,r3,#1              ;4405
00296e  f8013025          STRB     r3,[r1,r5,LSL #2]     ;4405
002972  e005              B        |L1.10624|
                  |L1.10612|
002974  eb000340          ADD      r3,r0,r0,LSL #1       ;4407
002978  eb031300          ADD      r3,r3,r0,LSL #4       ;4407
00297c  f8012023          STRB     r2,[r1,r3,LSL #2]     ;4407
                  |L1.10624|
002980  f1000001          ADD      r0,r0,#1              ;4401
002984  b2c0              UXTB     r0,r0                 ;4401
002986  2802              CMP      r0,#2                 ;4401
002988  d3e3              BCC      |L1.10578|
00298a  e7bb              B        |L1.10500|
                  |L1.10636|
;;;4421   		else bat[i]._rel_stat=0;
00298c  eb010383          ADD      r3,r1,r3,LSL #2
002990  f883203c          STRB     r2,[r3,#0x3c]
                  |L1.10644|
002994  f1000001          ADD      r0,r0,#1              ;4418
002998  b2c0              UXTB     r0,r0                 ;4418
00299a  2802              CMP      r0,#2                 ;4418
00299c  d3b4              BCC      |L1.10504|
;;;4422   		}
;;;4423   
;;;4424   	}
;;;4425   
;;;4426   else 
;;;4427   	{
;;;4428   	char i;
;;;4429   	for(i=0;i<MAX_NUM_OF_BAT;i++)
;;;4430   		{
;;;4431   		bat[i]._cnt_to_block=0;
;;;4432   		bat[i]._rel_stat=0;
;;;4433   		}
;;;4434   
;;;4435   	}
;;;4436   
;;;4437   /*if(mess_find_unvol(MESS2BAT_HNDL1))
;;;4438   	{
;;;4439   	if(PARAM_BAT_ON)
;;;4440   		{
;;;4441   		char i;
;;;4442   		for(i=0;i<MAX_NUM_OF_BAT;i++)
;;;4443   			{
;;;4444   			if(mess_data[1]&(1<<i))
;;;4445   				{
;;;4446   				bat[i]._cnt_to_block=0;
;;;4447   				bat[i]._rel_stat=0;
;;;4448   				}
;;;4449   			}
;;;4450   		}
;;;4451   	} */
;;;4452   }
00299e  bd70              POP      {r4-r6,pc}
                  |L1.10656|
0029a0  f04f0000          MOV      r0,#0                 ;4429
                  |L1.10660|
0029a4  eb000340          ADD      r3,r0,r0,LSL #1       ;4431
0029a8  eb031300          ADD      r3,r3,r0,LSL #4       ;4431
0029ac  f8012023          STRB     r2,[r1,r3,LSL #2]     ;4431
0029b0  eb010383          ADD      r3,r1,r3,LSL #2       ;4432
0029b4  f883203c          STRB     r2,[r3,#0x3c]         ;4432
0029b8  f1000001          ADD      r0,r0,#1              ;4429
0029bc  b2c0              UXTB     r0,r0                 ;4429
0029be  2802              CMP      r0,#2                 ;4429
0029c0  d3f0              BCC      |L1.10660|
0029c2  bd70              POP      {r4-r6,pc}
;;;4453   
                          ENDP

                  klimat_hndl PROC
;;;4583   //-----------------------------------------------
;;;4584   void klimat_hndl(void)
0029c4  e92d41f0          PUSH     {r4-r8,lr}
;;;4585   {
;;;4586   
;;;4587   
;;;4588   if(t_box>TBOXMAX)
0029c8  4dbf              LDR      r5,|L1.11464|
0029ca  48c0              LDR      r0,|L1.11468|
;;;4589   	{
;;;4590   	av_tbox_cnt++;
0029cc  4cc0              LDR      r4,|L1.11472|
0029ce  f9b51000          LDRSH    r1,[r5,#0]            ;4588  ; t_box
0029d2  f9b02000          LDRSH    r2,[r0,#0]            ;4588  ; TBOXMAX
0029d6  f9b40000          LDRSH    r0,[r4,#0]
0029da  4291              CMP      r1,r2                 ;4588
0029dc  dd03              BLE      |L1.10726|
0029de  f1000001          ADD      r0,r0,#1
0029e2  8020              STRH     r0,[r4,#0]
0029e4  e003              B        |L1.10734|
                  |L1.10726|
;;;4591   	} 
;;;4592   else if(t_box<TBOXMAX)
0029e6  da02              BGE      |L1.10734|
;;;4593   	{
;;;4594   	av_tbox_cnt--;
0029e8  f1a00001          SUB      r0,r0,#1
0029ec  8020              STRH     r0,[r4,#0]
                  |L1.10734|
;;;4595   	}
;;;4596   gran(&av_tbox_cnt,0,6);
0029ee  2206              MOVS     r2,#6
0029f0  2100              MOVS     r1,#0
0029f2  48b7              LDR      r0,|L1.11472|
0029f4  f7fffffe          BL       gran
;;;4597   
;;;4598   if(av_tbox_cnt>5)
0029f8  f9b40000          LDRSH    r0,[r4,#0]  ; av_tbox_cnt
;;;4599   	{
;;;4600   	av_tbox_stat=atsON;
0029fc  49b5              LDR      r1,|L1.11476|
0029fe  2601              MOVS     r6,#1
002a00  2805              CMP      r0,#5                 ;4598
002a02  dd00              BLE      |L1.10758|
002a04  700e              STRB     r6,[r1,#0]
                  |L1.10758|
002a06  2400              MOVS     r4,#0                 ;4596
;;;4601   	}
;;;4602   if(av_tbox_cnt<1)
002a08  2801              CMP      r0,#1
002a0a  da00              BGE      |L1.10766|
;;;4603   	{
;;;4604   	av_tbox_stat=atsOFF;
002a0c  700c              STRB     r4,[r1,#0]
                  |L1.10766|
;;;4605   	}
;;;4606   
;;;4607   if(t_box<(TBOXREG-2))
002a0e  49b2              LDR      r1,|L1.11480|
002a10  f9b50000          LDRSH    r0,[r5,#0]  ; t_box
;;;4608   	{
;;;4609   	if(t_box_cnt<30)
002a14  4ab1              LDR      r2,|L1.11484|
002a16  f9b11000          LDRSH    r1,[r1,#0]            ;4607  ; TBOXREG
;;;4610   		{
;;;4611   		t_box_cnt++;
;;;4612   		if(t_box_cnt>=30)
;;;4613   			{
;;;4614   			main_vent_pos--;
002a1a  4fb1              LDR      r7,|L1.11488|
002a1c  1e8b              SUBS     r3,r1,#2              ;4607
002a1e  4298              CMP      r0,r3                 ;4607
002a20  da0f              BGE      |L1.10818|
002a22  f9921000          LDRSB    r1,[r2,#0]            ;4609  ; t_box_cnt
002a26  291e              CMP      r1,#0x1e              ;4609
002a28  da1e              BGE      |L1.10856|
002a2a  f1010101          ADD      r1,r1,#1              ;4611
002a2e  b249              SXTB     r1,r1                 ;4611
002a30  7011              STRB     r1,[r2,#0]            ;4611
002a32  291e              CMP      r1,#0x1e              ;4612
002a34  db18              BLT      |L1.10856|
002a36  8839              LDRH     r1,[r7,#0]  ; main_vent_pos
002a38  f1a10101          SUB      r1,r1,#1
002a3c  8039              STRH     r1,[r7,#0]
;;;4615   			t_box_cnt=0;
002a3e  7014              STRB     r4,[r2,#0]
002a40  e012              B        |L1.10856|
                  |L1.10818|
;;;4616   			}
;;;4617   		}
;;;4618   	}
;;;4619   else if(t_box>(TBOXREG))
002a42  4288              CMP      r0,r1
002a44  dd0f              BLE      |L1.10854|
;;;4620   	{
;;;4621   	if(t_box_cnt<30)
002a46  f9921000          LDRSB    r1,[r2,#0]  ; t_box_cnt
002a4a  291e              CMP      r1,#0x1e
002a4c  da0c              BGE      |L1.10856|
;;;4622   		{
;;;4623   		t_box_cnt++;
002a4e  f1010101          ADD      r1,r1,#1
002a52  b249              SXTB     r1,r1
002a54  7011              STRB     r1,[r2,#0]
;;;4624   		if(t_box_cnt>=30)
002a56  291e              CMP      r1,#0x1e
002a58  db06              BLT      |L1.10856|
;;;4625   			{
;;;4626   			main_vent_pos++;
002a5a  8839              LDRH     r1,[r7,#0]  ; main_vent_pos
002a5c  f1010101          ADD      r1,r1,#1
002a60  8039              STRH     r1,[r7,#0]
;;;4627   			t_box_cnt=0;
002a62  7014              STRB     r4,[r2,#0]
002a64  e000              B        |L1.10856|
                  |L1.10854|
;;;4628   			}
;;;4629   		}
;;;4630   	}
;;;4631   else
;;;4632   	{
;;;4633   	t_box_cnt=0;
002a66  7014              STRB     r4,[r2,#0]
                  |L1.10856|
;;;4634   	}
;;;4635   
;;;4636   #ifndef UKU_KONTUR
;;;4637   if(t_box>TBOXVENTMAX)gran(&main_vent_pos,0,20); 
002a68  499e              LDR      r1,|L1.11492|
002a6a  f9b11000          LDRSH    r1,[r1,#0]  ; TBOXVENTMAX
002a6e  4288              CMP      r0,r1
002a70  dd05              BLE      |L1.10878|
002a72  2214              MOVS     r2,#0x14
002a74  2100              MOVS     r1,#0
002a76  489a              LDR      r0,|L1.11488|
002a78  f7fffffe          BL       gran
002a7c  e007              B        |L1.10894|
                  |L1.10878|
;;;4638   else gran(&main_vent_pos,0,pos_vent+9);
002a7e  489a              LDR      r0,|L1.11496|
002a80  2100              MOVS     r1,#0
002a82  8800              LDRH     r0,[r0,#0]  ; pos_vent
002a84  3009              ADDS     r0,r0,#9
002a86  b202              SXTH     r2,r0
002a88  4895              LDR      r0,|L1.11488|
002a8a  f7fffffe          BL       gran
                  |L1.10894|
;;;4639   
;;;4640   if((mess_find_unvol(MESS2VENT_HNDL))&&(mess_data[0]==PARAM_VENT_CB))
002a8e  20f0              MOVS     r0,#0xf0
002a90  f7fffffe          BL       mess_find_unvol
002a94  b128              CBZ      r0,|L1.10914|
002a96  488b              LDR      r0,|L1.11460|
002a98  6801              LDR      r1,[r0,#0]  ; mess_data
002a9a  29f1              CMP      r1,#0xf1
002a9c  d101              BNE      |L1.10914|
;;;4641   	{
;;;4642   	main_vent_pos=mess_data[1];
002a9e  6840              LDR      r0,[r0,#4]  ; mess_data
002aa0  8038              STRH     r0,[r7,#0]
                  |L1.10914|
;;;4643   	}
;;;4644   
;;;4645   
;;;4646   if(main_vent_pos<=1)mixer_vent_stat=mvsON;
002aa2  f9b71000          LDRSH    r1,[r7,#0]  ; main_vent_pos
002aa6  4891              LDR      r0,|L1.11500|
002aa8  2901              CMP      r1,#1
002aaa  dc01              BGT      |L1.10928|
002aac  7006              STRB     r6,[r0,#0]
002aae  e000              B        |L1.10930|
                  |L1.10928|
;;;4647   else mixer_vent_stat=mvsOFF;
002ab0  7004              STRB     r4,[r0,#0]
                  |L1.10930|
;;;4648   #endif
;;;4649   
;;;4650   #ifdef UKU_KONTUR
;;;4651   
;;;4652   if(t_box>TBOXVENTON) t_box_vent_on_cnt++;
;;;4653   else if(t_box<TBOXVENTOFF) t_box_vent_on_cnt--;
;;;4654   gran(&t_box_vent_on_cnt,0,10);
;;;4655   
;;;4656   if(t_box_vent_on_cnt>9) vent_stat_k=vsON;
;;;4657   else if(t_box_vent_on_cnt<1) vent_stat_k=vsOFF;
;;;4658   
;;;4659   if(t_box<TBOXWARMON) t_box_warm_on_cnt++;
;;;4660   else if(t_box>TBOXWARMOFF) t_box_warm_on_cnt--;
;;;4661   gran(&t_box_warm_on_cnt,0,10);
;;;4662   
;;;4663   if(t_box_warm_on_cnt>9) warm_stat_k=wsON;
;;;4664   else if(t_box_warm_on_cnt<1) warm_stat_k=wsOFF;
;;;4665   
;;;4666   #endif
;;;4667   
;;;4668   if((TBATDISABLE>=50) && (TBATDISABLE<=90))
002ab2  488f              LDR      r0,|L1.11504|
;;;4669   	{
;;;4670   	if(t_box>TBATDISABLE)
;;;4671   		{
;;;4672   		tbatdisable_cnt++;
;;;4673   		}
;;;4674   	if(t_box<TBATENABLE)
;;;4675   		{
;;;4676   		tbatdisable_cnt--;
;;;4677   		}
;;;4678   	gran(&tbatdisable_cnt,0,6);
;;;4679   
;;;4680   	if(tbatdisable_cnt>5)
;;;4681   		{
;;;4682   		tbatdisable_stat=tbdsOFF;
002ab4  f8df823c          LDR      r8,|L1.11508|
002ab8  f9b00000          LDRSH    r0,[r0,#0]            ;4668  ; TBATDISABLE
002abc  f1a00132          SUB      r1,r0,#0x32           ;4668
002ac0  2928              CMP      r1,#0x28              ;4668
002ac2  d821              BHI      |L1.11016|
002ac4  f9b51000          LDRSH    r1,[r5,#0]            ;4670  ; t_box
002ac8  4f8b              LDR      r7,|L1.11512|
002aca  4281              CMP      r1,r0                 ;4670
002acc  dd03              BLE      |L1.10966|
002ace  8838              LDRH     r0,[r7,#0]            ;4672  ; tbatdisable_cnt
002ad0  f1000001          ADD      r0,r0,#1              ;4672
002ad4  8038              STRH     r0,[r7,#0]            ;4672
                  |L1.10966|
002ad6  4889              LDR      r0,|L1.11516|
002ad8  f9b00000          LDRSH    r0,[r0,#0]            ;4674  ; TBATENABLE
002adc  4281              CMP      r1,r0                 ;4674
002ade  da03              BGE      |L1.10984|
002ae0  8838              LDRH     r0,[r7,#0]            ;4676  ; tbatdisable_cnt
002ae2  f1a00001          SUB      r0,r0,#1              ;4676
002ae6  8038              STRH     r0,[r7,#0]            ;4676
                  |L1.10984|
002ae8  2206              MOVS     r2,#6                 ;4678
002aea  2100              MOVS     r1,#0                 ;4678
002aec  4882              LDR      r0,|L1.11512|
002aee  f7fffffe          BL       gran
002af2  f9b70000          LDRSH    r0,[r7,#0]            ;4680  ; tbatdisable_cnt
002af6  2805              CMP      r0,#5                 ;4680
002af8  dd01              BLE      |L1.11006|
002afa  f8886000          STRB     r6,[r8,#0]
                  |L1.11006|
;;;4683   		}
;;;4684   	if(tbatdisable_cnt<1)
002afe  2801              CMP      r0,#1
002b00  da04              BGE      |L1.11020|
;;;4685   		{
;;;4686   		tbatdisable_stat=tbdsON;
002b02  f8884000          STRB     r4,[r8,#0]
002b06  e001              B        |L1.11020|
                  |L1.11016|
;;;4687   		}
;;;4688   	}
;;;4689   else 
;;;4690   	{
;;;4691   	tbatdisable_stat=tbdsON;
002b08  f8884000          STRB     r4,[r8,#0]
                  |L1.11020|
;;;4692   	}
;;;4693   
;;;4694   if((TLOADDISABLE>=50) && (TLOADDISABLE<=80))
002b0c  487c              LDR      r0,|L1.11520|
;;;4695   	{
;;;4696   	if(t_box>TLOADDISABLE)
;;;4697   		{
;;;4698   		tloaddisable_cnt++;
;;;4699   		}
;;;4700   	if(t_box<TLOADENABLE)
;;;4701   		{
;;;4702   		tloaddisable_cnt--;
;;;4703   		}
;;;4704   	gran(&tloaddisable_cnt,0,6);
;;;4705   
;;;4706   	if(tloaddisable_cnt>5)
;;;4707   		{
;;;4708   		tloaddisable_stat=tldsOFF;
002b0e  4f7d              LDR      r7,|L1.11524|
002b10  f9b00000          LDRSH    r0,[r0,#0]            ;4694  ; TLOADDISABLE
002b14  f1a00132          SUB      r1,r0,#0x32           ;4694
002b18  291e              CMP      r1,#0x1e              ;4694
002b1a  d81f              BHI      |L1.11100|
002b1c  f9b51000          LDRSH    r1,[r5,#0]            ;4696  ; t_box
002b20  4d79              LDR      r5,|L1.11528|
002b22  4281              CMP      r1,r0                 ;4696
002b24  dd03              BLE      |L1.11054|
002b26  8828              LDRH     r0,[r5,#0]            ;4698  ; tloaddisable_cnt
002b28  f1000001          ADD      r0,r0,#1              ;4698
002b2c  8028              STRH     r0,[r5,#0]            ;4698
                  |L1.11054|
002b2e  4877              LDR      r0,|L1.11532|
002b30  f9b00000          LDRSH    r0,[r0,#0]            ;4700  ; TLOADENABLE
002b34  4281              CMP      r1,r0                 ;4700
002b36  da03              BGE      |L1.11072|
002b38  8828              LDRH     r0,[r5,#0]            ;4702  ; tloaddisable_cnt
002b3a  f1a00001          SUB      r0,r0,#1              ;4702
002b3e  8028              STRH     r0,[r5,#0]            ;4702
                  |L1.11072|
002b40  2206              MOVS     r2,#6                 ;4704
002b42  2100              MOVS     r1,#0                 ;4704
002b44  4870              LDR      r0,|L1.11528|
002b46  f7fffffe          BL       gran
002b4a  f9b50000          LDRSH    r0,[r5,#0]            ;4706  ; tloaddisable_cnt
002b4e  2805              CMP      r0,#5                 ;4706
002b50  dd00              BLE      |L1.11092|
002b52  703e              STRB     r6,[r7,#0]
                  |L1.11092|
;;;4709   		}
;;;4710   	if(tloaddisable_cnt<1)
002b54  2801              CMP      r0,#1
002b56  da00              BGE      |L1.11098|
;;;4711   		{
;;;4712   		tloaddisable_stat=tldsON;
002b58  703c              STRB     r4,[r7,#0]
                  |L1.11098|
;;;4713   		}
;;;4714   	}
;;;4715   else 
;;;4716   	{
;;;4717   	tloaddisable_stat=tldsON;
;;;4718   	}
;;;4719   
;;;4720   }
002b5a  e53d              B        |L1.9688|
                  |L1.11100|
002b5c  703c              STRB     r4,[r7,#0]            ;4717
002b5e  e53b              B        |L1.9688|
;;;4721   #endif
                          ENDP

                  bat_drv PROC
;;;4857   //-----------------------------------------------
;;;4858   void bat_drv(char in)
002b60  e92d5ffc          PUSH     {r2-r12,lr}
;;;4859   {
002b64  4605              MOV      r5,r0
;;;4860   unsigned short /*tempUS,*/tempUS_;
;;;4861   unsigned long tempUL,tempUL_;
;;;4862   unsigned short b_zar;
;;;4863   //static unsigned short time_cnt[2];
;;;4864   
;;;4865   
;;;4866   
;;;4867   if(cntrl_stat_blok_cnt_plus[in])cntrl_stat_blok_cnt_plus[in]--;
002b66  496a              LDR      r1,|L1.11536|
002b68  f9310015          LDRSH    r0,[r1,r5,LSL #1]
002b6c  b118              CBZ      r0,|L1.11126|
002b6e  f1a00001          SUB      r0,r0,#1
002b72  f8210015          STRH     r0,[r1,r5,LSL #1]
                  |L1.11126|
;;;4868   if(cntrl_stat_blok_cnt_minus[in])cntrl_stat_blok_cnt_minus[in]--;
002b76  4a66              LDR      r2,|L1.11536|
002b78  1d12              ADDS     r2,r2,#4
002b7a  f9320015          LDRSH    r0,[r2,r5,LSL #1]
002b7e  b118              CBZ      r0,|L1.11144|
002b80  f1a00001          SUB      r0,r0,#1
002b84  f8220015          STRH     r0,[r2,r5,LSL #1]
                  |L1.11144|
;;;4869   
;;;4870   
;;;4871   if(bat[in]._Ib>IZMAX) cntrl_stat_blok_cnt_plus[in]=100;
002b88  eb050045          ADD      r0,r5,r5,LSL #1
002b8c  eb001305          ADD      r3,r0,r5,LSL #4
002b90  484b              LDR      r0,|L1.11456|
002b92  f04f0b64          MOV      r11,#0x64
002b96  eb000483          ADD      r4,r0,r3,LSL #2
002b9a  4b5e              LDR      r3,|L1.11540|
002b9c  f9b40008          LDRSH    r0,[r4,#8]
002ba0  f9b33000          LDRSH    r3,[r3,#0]  ; IZMAX
002ba4  4298              CMP      r0,r3
002ba6  dd01              BLE      |L1.11180|
002ba8  f821b015          STRH     r11,[r1,r5,LSL #1]
                  |L1.11180|
;;;4872   if(bat[in]._Ib<0)     cntrl_stat_blok_cnt_minus[in]=100;
002bac  2800              CMP      r0,#0
002bae  da01              BGE      |L1.11188|
002bb0  f822b015          STRH     r11,[r2,r5,LSL #1]
                  |L1.11188|
;;;4873   
;;;4874   if(cntrl_stat_blok_cnt_plus[in] && cntrl_stat_blok_cnt_minus[in])
;;;4875        {
;;;4876        if(!cntrl_stat_blok_cnt_)
002bb4  4856              LDR      r0,|L1.11536|
002bb6  f8313015          LDRH     r3,[r1,r5,LSL #1]     ;4874
002bba  3884              SUBS     r0,r0,#0x84
002bbc  2700              MOVS     r7,#0
002bbe  b14b              CBZ      r3,|L1.11220|
002bc0  f8323015          LDRH     r3,[r2,r5,LSL #1]     ;4874
002bc4  b133              CBZ      r3,|L1.11220|
002bc6  f8b03060          LDRH     r3,[r0,#0x60]  ; cntrl_stat_blok_cnt_
002bca  b1a3              CBZ      r3,|L1.11254|
;;;4877             {
;;;4878             cntrl_stat_blok_cnt_=600; 
;;;4879             cntrl_stat_blok_cnt_plus[in]=0;
;;;4880             cntrl_stat_blok_cnt_minus[in]=0;
;;;4881             }
;;;4882        else cntrl_stat_blok_cnt=3000;
002bcc  f64031b8          MOV      r1,#0xbb8
002bd0  f8a0105e          STRH     r1,[r0,#0x5e]
                  |L1.11220|
;;;4883        }
;;;4884   cntrl_stat_blok_cnt=0;
002bd4  f8a0705e          STRH     r7,[r0,#0x5e]
;;;4885   
;;;4886   if(++(bat[in]._time_cnt)>=10)
002bd8  f894003e          LDRB     r0,[r4,#0x3e]
002bdc  1c40              ADDS     r0,r0,#1
002bde  b2c0              UXTB     r0,r0
002be0  f884003e          STRB     r0,[r4,#0x3e]
002be4  280a              CMP      r0,#0xa
002be6  d301              BCC      |L1.11244|
;;;4887   	{
;;;4888   	bat[in]._time_cnt=0;
002be8  f884703e          STRB     r7,[r4,#0x3e]
                  |L1.11244|
;;;4889   	//bat[in]._zar_cnt++;
;;;4890   	}
;;;4891   
;;;4892   if(main_10Hz_cnt==50)
002bec  4e4a              LDR      r6,|L1.11544|
002bee  8830              LDRH     r0,[r6,#0]  ; main_10Hz_cnt
002bf0  2832              CMP      r0,#0x32
002bf2  d009              BEQ      |L1.11272|
002bf4  e0a1              B        |L1.11578|
                  |L1.11254|
002bf6  f44f7316          MOV      r3,#0x258             ;4878
002bfa  f8a03060          STRH     r3,[r0,#0x60]         ;4878
002bfe  f8217015          STRH     r7,[r1,r5,LSL #1]     ;4879
002c02  f8227015          STRH     r7,[r2,r5,LSL #1]     ;4880
002c06  e7e5              B        |L1.11220|
                  |L1.11272|
002c08  e088              B        |L1.11548|
002c0a  0000              DCW      0x0000
                  |L1.11276|
002c0c  4176746f          DCB      "Avtomat #1 is ON ",0
002c10  6d617420
002c14  23312069
002c18  73204f4e
002c1c  2000    
002c1e  00                DCB      0
002c1f  00                DCB      0
                  |L1.11296|
002c20  4176746f          DCB      "Avtomat #2 is ON ",0
002c24  6d617420
002c28  23322069
002c2c  73204f4e
002c30  2000    
002c32  00                DCB      0
002c33  00                DCB      0
                  |L1.11316|
002c34  4176746f          DCB      "Avtomat #3 is ON ",0
002c38  6d617420
002c3c  23332069
002c40  73204f4e
002c44  2000    
002c46  00                DCB      0
002c47  00                DCB      0
                  |L1.11336|
002c48  4176746f          DCB      "Avtomat #4 is ON ",0
002c4c  6d617420
002c50  23342069
002c54  73204f4e
002c58  2000    
002c5a  00                DCB      0
002c5b  00                DCB      0
                  |L1.11356|
002c5c  4176746f          DCB      "Avtomat #5 is ON ",0
002c60  6d617420
002c64  23352069
002c68  73204f4e
002c6c  2000    
002c6e  00                DCB      0
002c6f  00                DCB      0
                  |L1.11376|
002c70  4176746f          DCB      "Avtomat #6 is ON ",0
002c74  6d617420
002c78  23362069
002c7c  73204f4e
002c80  2000    
002c82  00                DCB      0
002c83  00                DCB      0
                  |L1.11396|
002c84  4176746f          DCB      "Avtomat #7 is ON ",0
002c88  6d617420
002c8c  23372069
002c90  73204f4e
002c94  2000    
002c96  00                DCB      0
002c97  00                DCB      0
                  |L1.11416|
002c98  4176746f          DCB      "Avtomat #8 is ON ",0
002c9c  6d617420
002ca0  23382069
002ca4  73204f4e
002ca8  2000    
002caa  00                DCB      0
002cab  00                DCB      0
                  |L1.11436|
002cac  4176746f          DCB      "Avtomat #9 is ON ",0
002cb0  6d617420
002cb4  23392069
002cb8  73204f4e
002cbc  2000    
002cbe  00                DCB      0
002cbf  00                DCB      0
                  |L1.11456|
                          DCD      bat
                  |L1.11460|
                          DCD      mess_data
                  |L1.11464|
                          DCD      t_box
                  |L1.11468|
                          DCD      TBOXMAX
                  |L1.11472|
                          DCD      av_tbox_cnt
                  |L1.11476|
                          DCD      av_tbox_stat
                  |L1.11480|
                          DCD      TBOXREG
                  |L1.11484|
                          DCD      t_box_cnt
                  |L1.11488|
                          DCD      main_vent_pos
                  |L1.11492|
                          DCD      TBOXVENTMAX
                  |L1.11496|
                          DCD      pos_vent
                  |L1.11500|
                          DCD      mixer_vent_stat
                  |L1.11504|
                          DCD      TBATDISABLE
                  |L1.11508|
                          DCD      tbatdisable_stat
                  |L1.11512|
                          DCD      tbatdisable_cnt
                  |L1.11516|
                          DCD      TBATENABLE
                  |L1.11520|
                          DCD      TLOADDISABLE
                  |L1.11524|
                          DCD      tloaddisable_stat
                  |L1.11528|
                          DCD      tloaddisable_cnt
                  |L1.11532|
                          DCD      TLOADENABLE
                  |L1.11536|
                          DCD      ||area_number.21||+0x84
                  |L1.11540|
                          DCD      IZMAX
                  |L1.11544|
                          DCD      main_10Hz_cnt
                  |L1.11548|
;;;4893   	{
;;;4894   	if(!bat[in]._rel_stat)
002d1c  f894003c          LDRB     r0,[r4,#0x3c]
002d20  b958              CBNZ     r0,|L1.11578|
;;;4895   		{
;;;4896   		
;;;4897   		if(bat[in]._Ub<80) 
002d22  f9b40002          LDRSH    r0,[r4,#2]
002d26  2850              CMP      r0,#0x50
002d28  da07              BGE      |L1.11578|
;;;4898   			{
;;;4899   			
;;;4900   			if(!(bat[in]._av&1))
002d2a  f894003d          LDRB     r0,[r4,#0x3d]
002d2e  07c0              LSLS     r0,r0,#31
002d30  d103              BNE      |L1.11578|
;;;4901   				{
;;;4902   				avar_bat_hndl(in,1);
002d32  2101              MOVS     r1,#1
002d34  4628              MOV      r0,r5
002d36  f7fffffe          BL       avar_bat_hndl
                  |L1.11578|
;;;4903   				//if(in==0)plazma_bat++;
;;;4904   				}
;;;4905   			}				
;;;4906   
;;;4907   		}
;;;4908   	}
;;;4909   
;;;4910   if(main_10Hz_cnt>200)
002d3a  f9b60000          LDRSH    r0,[r6,#0]  ; main_10Hz_cnt
;;;4911   	{
;;;4912   	if(abs(bat[in]._Ib)>IKB) 
002d3e  4eff              LDR      r6,|L1.12604|
002d40  28c8              CMP      r0,#0xc8              ;4910
002d42  dd0f              BLE      |L1.11620|
002d44  f9b40008          LDRSH    r0,[r4,#8]
002d48  f7fffffe          BL       abs
002d4c  f9b61000          LDRSH    r1,[r6,#0]  ; IKB
002d50  4288              CMP      r0,r1
002d52  dd07              BLE      |L1.11620|
;;;4913   		{
;;;4914   		if((bat[in]._av&1))avar_bat_hndl(in,0);
002d54  f894003d          LDRB     r0,[r4,#0x3d]
002d58  07c0              LSLS     r0,r0,#31
002d5a  d003              BEQ      |L1.11620|
002d5c  2100              MOVS     r1,#0
002d5e  4628              MOV      r0,r5
002d60  f7fffffe          BL       avar_bat_hndl
                  |L1.11620|
;;;4915   		}
;;;4916   	}
;;;4917   
;;;4918   
;;;4919   
;;;4920   if(bat[in]._Ib>(-IKB))
002d64  48f5              LDR      r0,|L1.12604|
002d66  f9b41008          LDRSH    r1,[r4,#8]
002d6a  f9b00000          LDRSH    r0,[r0,#0]  ; IKB
002d6e  4240              RSBS     r0,r0,#0
002d70  4281              CMP      r1,r0
002d72  dd14              BLE      |L1.11678|
;;;4921   	{
;;;4922   	if(bat[in]._cnt_wrk<10)
002d74  7b60              LDRB     r0,[r4,#0xd]
002d76  280a              CMP      r0,#0xa
002d78  d20d              BCS      |L1.11670|
;;;4923   		{
;;;4924   		bat[in]._cnt_wrk++;
002d7a  f1000001          ADD      r0,r0,#1
002d7e  b2c0              UXTB     r0,r0
002d80  7360              STRB     r0,[r4,#0xd]
;;;4925   		if((bat[in]._cnt_wrk>=10)&&(bat[in]._wrk)) 
002d82  280a              CMP      r0,#0xa
002d84  d371              BCC      |L1.11882|
002d86  7ba0              LDRB     r0,[r4,#0xe]
002d88  2800              CMP      r0,#0
002d8a  d06e              BEQ      |L1.11882|
;;;4926   			{
;;;4927   			bat[in]._wrk=0;
002d8c  73a7              STRB     r7,[r4,#0xe]
;;;4928   			//beep_init(0x7L,'O');
;;;4929   			//wrk_mem_hndl(0);
;;;4930   			wrk_mem_hndl(in);
002d8e  4628              MOV      r0,r5
002d90  f7fffffe          BL       wrk_mem_hndl
002d94  e069              B        |L1.11882|
                  |L1.11670|
;;;4931   			//plazma++;
;;;4932   			}
;;;4933   		}
;;;4934   	else bat[in]._cnt_wrk=10;	
002d96  f04f000a          MOV      r0,#0xa
002d9a  7360              STRB     r0,[r4,#0xd]
002d9c  e065              B        |L1.11882|
                  |L1.11678|
;;;4935   	}	
;;;4936   
;;;4937   else if(bat[in]._Ib<(-IKB))
002d9e  da64              BGE      |L1.11882|
;;;4938   	{
;;;4939   	if(bat[in]._cnt_wrk)
002da0  7b60              LDRB     r0,[r4,#0xd]
002da2  b3f0              CBZ      r0,|L1.11810|
;;;4940   		{
;;;4941   		bat[in]._cnt_wrk--;
002da4  f1a00001          SUB      r0,r0,#1
002da8  b2c0              UXTB     r0,r0
002daa  7360              STRB     r0,[r4,#0xd]
;;;4942   		if((bat[in]._cnt_wrk==0)&&(bat[in]._wrk==0)) 
002dac  bbc8              CBNZ     r0,|L1.11810|
002dae  7ba0              LDRB     r0,[r4,#0xe]
002db0  bbb8              CBNZ     r0,|L1.11810|
;;;4943   			{
;;;4944   			bat[in]._wrk=1;
002db2  f04f0001          MOV      r0,#1
002db6  73a0              STRB     r0,[r4,#0xe]
;;;4945   
;;;4946   				{
;;;4947   				char temp;
;;;4948   				signed short temp_temp;
;;;4949   				temp_temp=bat[in]._u_old[((bat_u_old_cnt+1)&0x07)];
002db8  48e1              LDR      r0,|L1.12608|
002dba  8800              LDRH     r0,[r0,#0]  ; bat_u_old_cnt
002dbc  f1000001          ADD      r0,r0,#1
002dc0  f0000007          AND      r0,r0,#7
002dc4  eb040040          ADD      r0,r4,r0,LSL #1
002dc8  8c00              LDRH     r0,[r0,#0x20]
002dca  9000              STR      r0,[sp,#0]
;;;4950   			 
;;;4951   				temp=LPC_RTC->YEAR;
002dcc  4edd              LDR      r6,|L1.12612|
002dce  8bb0              LDRH     r0,[r6,#0x1c]
002dd0  9001              STR      r0,[sp,#4]
;;;4952   				gran_char((signed char*)&temp,1,99);
002dd2  f04f0263          MOV      r2,#0x63
002dd6  f04f0101          MOV      r1,#1
002dda  a801              ADD      r0,sp,#4
002ddc  f7fffffe          BL       gran_char
;;;4953   				*((char*)(&(bat[in]._wrk_date[0])))=temp;
002de0  f104041c          ADD      r4,r4,#0x1c
002de4  f89d0004          LDRB     r0,[sp,#4]
002de8  7620              STRB     r0,[r4,#0x18]
;;;4954   			
;;;4955   				temp=LPC_RTC->MONTH;
002dea  7e30              LDRB     r0,[r6,#0x18]
002dec  9001              STR      r0,[sp,#4]
;;;4956   				gran_char((signed char*)&temp,1,12);
002dee  f04f020c          MOV      r2,#0xc
002df2  f04f0101          MOV      r1,#1
002df6  a801              ADD      r0,sp,#4
002df8  f7fffffe          BL       gran_char
;;;4957   				*(((char*)(&(bat[in]._wrk_date[0])))+1)=temp;
002dfc  f89d0004          LDRB     r0,[sp,#4]
002e00  7660              STRB     r0,[r4,#0x19]
;;;4958   			
;;;4959   				temp=LPC_RTC->DOM;
002e02  7b30              LDRB     r0,[r6,#0xc]
002e04  9001              STR      r0,[sp,#4]
;;;4960   				gran_char((signed char*)&temp,1,31);
002e06  221f              MOVS     r2,#0x1f
002e08  2101              MOVS     r1,#1
002e0a  a801              ADD      r0,sp,#4
002e0c  f7fffffe          BL       gran_char
;;;4961   				*(((char*)(&(bat[in]._wrk_date[0])))+2)=temp;			
002e10  f89d0004          LDRB     r0,[sp,#4]
002e14  76a0              STRB     r0,[r4,#0x1a]
;;;4962   				
;;;4963   				*(((char*)(&(bat[in]._wrk_date[0])))+3)=*((char*)&temp_temp);
002e16  f89d0000          LDRB     r0,[sp,#0]
002e1a  76e0              STRB     r0,[r4,#0x1b]
;;;4964   
;;;4965   				temp=LPC_RTC->HOUR;
002e1c  7a30              LDRB     r0,[r6,#8]
002e1e  9001              STR      r0,[sp,#4]
;;;4966   				gran_char((signed char*)&temp,0,23);
002e20  e000              B        |L1.11812|
                  |L1.11810|
002e22  e022              B        |L1.11882|
                  |L1.11812|
002e24  2217              MOVS     r2,#0x17
002e26  2100              MOVS     r1,#0
002e28  a801              ADD      r0,sp,#4
002e2a  f7fffffe          BL       gran_char
;;;4967   				*((char*)(&(bat[in]._wrk_date[1])))=temp;
002e2e  f89d0004          LDRB     r0,[sp,#4]
002e32  7720              STRB     r0,[r4,#0x1c]
;;;4968                  	
;;;4969   				temp=LPC_RTC->MIN;
002e34  7930              LDRB     r0,[r6,#4]
002e36  9001              STR      r0,[sp,#4]
;;;4970   				gran_char((signed char*)&temp,0,59);
002e38  223b              MOVS     r2,#0x3b
002e3a  2100              MOVS     r1,#0
002e3c  a801              ADD      r0,sp,#4
002e3e  f7fffffe          BL       gran_char
;;;4971   				*(((char*)(&(bat[in]._wrk_date[1])))+1)=temp;
002e42  f89d0004          LDRB     r0,[sp,#4]
002e46  7760              STRB     r0,[r4,#0x1d]
;;;4972   	          
;;;4973   				temp=LPC_RTC->SEC;
002e48  7830              LDRB     r0,[r6,#0]
002e4a  9001              STR      r0,[sp,#4]
;;;4974   				gran_char((signed char*)&temp,0,59);
002e4c  223b              MOVS     r2,#0x3b
002e4e  2100              MOVS     r1,#0
002e50  a801              ADD      r0,sp,#4
002e52  f7fffffe          BL       gran_char
;;;4975   				*(((char*)(&(bat[in]._wrk_date[1])))+2)=temp;
002e56  f89d0004          LDRB     r0,[sp,#4]
002e5a  77a0              STRB     r0,[r4,#0x1e]
;;;4976   			
;;;4977   				*(((char*)(&(bat[in]._wrk_date[1])))+3)=*(((char*)&temp_temp)+1);
002e5c  f89d0001          LDRB     r0,[sp,#1]
002e60  77e0              STRB     r0,[r4,#0x1f]
;;;4978   				bat[in]._Iintegr=0;		//  
002e62  8027              STRH     r7,[r4,#0]
;;;4979   				bat[in]._Iintegr_=0;	//  
002e64  8067              STRH     r7,[r4,#2]
002e66  f1a4041c          SUB      r4,r4,#0x1c
                  |L1.11882|
;;;4980   				}
;;;4981   	
;;;4982   			}
;;;4983   
;;;4984   		}
;;;4985   	else bat[in]._cnt_wrk=0;	 
;;;4986   	
;;;4987   	}					
;;;4988   
;;;4989   /*
;;;4990   if(Ibat>=(-IKB))
;;;4991   	{
;;;4992   	if(cnt_wrk<10)
;;;4993   		{
;;;4994   		cnt_wrk++;
;;;4995   		if((cnt_wrk>=10)&&(wrk!=wrkOFF)) 
;;;4996   			{
;;;4997   			wrk=wrkOFF;
;;;4998   			//beep_init(0x7L,'O');
;;;4999   			wrk_mem_hndl(ibat_integr);
;;;5000   			}
;;;5001   		}
;;;5002   	else cnt_wrk=10;	
;;;5003   	}	
;;;5004   
;;;5005   else if((Ibat<(-IKB))&&(spc_stat!=spc_KE))
;;;5006   	{
;;;5007   	if(cnt_wrk)
;;;5008   		{
;;;5009   		cnt_wrk--;
;;;5010   		if((cnt_wrk==0)&&(wrk!=wrkON)) 
;;;5011   			{
;;;5012   			char temp;
;;;5013   			signed short temp_temp;
;;;5014   			temp_temp=ubat_old[((ubat_old_cnt+1)&0x07)];
;;;5015   			 
;;;5016   			wrk=wrkON;
;;;5017   			
;;;5018   			temp=_year;
;;;5019   			gran_char(&temp,1,99);
;;;5020   			*((char*)(&(wrk_date[0])))=temp;
;;;5021   			
;;;5022   			temp=_month;
;;;5023   			gran_char(&temp,1,12);
;;;5024   			*(((char*)(&(wrk_date[0])))+1)=temp;
;;;5025   			
;;;5026   			temp=_date;
;;;5027   			gran_char(&temp,1,31);
;;;5028   			*(((char*)(&(wrk_date[0])))+2)=temp;			
;;;5029   				
;;;5030   			*(((char*)(&(wrk_date[0])))+3)=*((char*)&temp_temp);
;;;5031   
;;;5032   			temp=_hour;
;;;5033   			gran_char(&temp,0,23);
;;;5034   			*((char*)(&(wrk_date[1])))=temp;
;;;5035                  
;;;5036   			temp=_min;
;;;5037   			gran_char(&temp,0,59);
;;;5038   			*(((char*)(&(wrk_date[1])))+1)=temp;
;;;5039   	          
;;;5040   			temp=_sec;
;;;5041   			gran_char(&temp,0,59);
;;;5042   			*(((char*)(&(wrk_date[1])))+2)=temp;
;;;5043   			
;;;5044   			*(((char*)(&(wrk_date[1])))+3)=*(((char*)&temp_temp)+1);
;;;5045   
;;;5046   			
;;;5047   			//beep_init(0xFL,'O'); 
;;;5048   			ibat_integr=0;
;;;5049   			ibat_integr_=0;
;;;5050   			}
;;;5051   		}
;;;5052   	else cnt_wrk=0;	 
;;;5053   	
;;;5054   	}
;;;5055   if(wrk==wrkON)
;;;5056   	{
;;;5057   	ibat_integr_+=-Ibat;
;;;5058   	if(ibat_integr_>=SEC_IN_HOUR*10L)
;;;5059   		{
;;;5060   		ibat_integr_-=SEC_IN_HOUR*10L;
;;;5061   		ibat_integr++;
;;;5062   		}
;;;5063   	}
;;;5064   
;;;5065   */
;;;5066   
;;;5067   
;;;5068   /*if(bat[in]._cnt_to_block)
;;;5069   	{
;;;5070   	bat[in]._cnt_to_block--;
;;;5071   	if(!(bat[in]._cnt_to_block))
;;;5072   		{
;;;5073   		//bat[in]._rel_stat=1;
;;;5074   		}
;;;5075   	}
;;;5076   */
;;;5077   
;;;5078   
;;;5079   
;;;5080   
;;;5081   //unsigned int tempUI,tempUI_;
;;;5082   //unsigned int b_zar; 
;;;5083   //char i;
;;;5084   //Ibat[0]=5000;                     
;;;5085   
;;;5086   
;;;5087                               
;;;5088   if(bat[in]._time_cnt==0)
;;;5089   	{
;;;5090   	bat[in]._zar_cnt+=(signed long)bat[in]._Ib;
;;;5091   	
;;;5092   	if(bat[in]._zar_cnt>=AH_CONSTANT)
002e6a  f64848a0          MOV      r8,#0x8ca0
002e6e  f894003e          LDRB     r0,[r4,#0x3e]         ;5088
002e72  2800              CMP      r0,#0                 ;5088
002e74  d17e              BNE      |L1.12148|
002e76  f9b41008          LDRSH    r1,[r4,#8]            ;5090
002e7a  6960              LDR      r0,[r4,#0x14]         ;5090
002e7c  4408              ADD      r0,r0,r1              ;5090
002e7e  6160              STR      r0,[r4,#0x14]         ;5090
;;;5093   		{
;;;5094   		if(BAT_C_REAL[in]==0x5555) tempUS_=BAT_C_NOM[in];
;;;5095   		else tempUS_=BAT_C_REAL[in];
;;;5096   		
;;;5097   		b_zar=lc640_read_int(ADR_EE_BAT_ZAR_CNT[in]);
002e80  f8df92c4          LDR      r9,|L1.12616|
002e84  f8dfa2c4          LDR      r10,|L1.12620|
002e88  4540              CMP      r0,r8                 ;5092
002e8a  db2a              BLT      |L1.12002|
002e8c  f93a1015          LDRSH    r1,[r10,r5,LSL #1]    ;5094
002e90  f5a140aa          SUB      r0,r1,#0x5500         ;5094
002e94  3855              SUBS     r0,r0,#0x55           ;5094
002e96  d103              BNE      |L1.11936|
002e98  48ad              LDR      r0,|L1.12624|
002e9a  f8306015          LDRH     r6,[r0,r5,LSL #1]     ;5094
002e9e  e001              B        |L1.11940|
                  |L1.11936|
002ea0  f83a6015          LDRH     r6,[r10,r5,LSL #1]    ;5095
                  |L1.11940|
002ea4  f8390015          LDRH     r0,[r9,r5,LSL #1]
002ea8  f7fffffe          BL       lc640_read_int
002eac  b280              UXTH     r0,r0
;;;5098   
;;;5099   		if(b_zar<(tempUS_/**10*/))
002eae  42b0              CMP      r0,r6
002eb0  d20e              BCS      |L1.11984|
;;;5100   			{
;;;5101   			bat[in]._zar_cnt-=AH_CONSTANT;
002eb2  6961              LDR      r1,[r4,#0x14]
002eb4  f5a14100          SUB      r1,r1,#0x8000
002eb8  f5a1614a          SUB      r1,r1,#0xca0
002ebc  6161              STR      r1,[r4,#0x14]
;;;5102   
;;;5103   			lc640_write_int(ADR_EE_BAT_ZAR_CNT[in],b_zar+1);
002ebe  f9392015          LDRSH    r2,[r9,r5,LSL #1]
002ec2  f1000001          ADD      r0,r0,#1
002ec6  b201              SXTH     r1,r0
002ec8  4610              MOV      r0,r2
002eca  f7fffffe          BL       lc640_write_int
002ece  e033              B        |L1.12088|
                  |L1.11984|
;;;5104   			}
;;;5105   		else if(b_zar>(tempUS_/**10*/))  
002ed0  d932              BLS      |L1.12088|
;;;5106   			{
;;;5107   			lc640_write_int(ADR_EE_BAT_ZAR_CNT[in],tempUS_);
002ed2  f9390015          LDRSH    r0,[r9,r5,LSL #1]
002ed6  b231              SXTH     r1,r6
002ed8  f7fffffe          BL       lc640_write_int
;;;5108   			bat[in]._zar_cnt=AH_CONSTANT;
002edc  f8c48014          STR      r8,[r4,#0x14]
002ee0  e02a              B        |L1.12088|
                  |L1.12002|
;;;5109   
;;;5110   			}
;;;5111   
;;;5112   		}
;;;5113   
;;;5114   	else if(bat[in]._zar_cnt<=-AH_CONSTANT)
002ee2  499c              LDR      r1,|L1.12628|
002ee4  4288              CMP      r0,r1
002ee6  dc27              BGT      |L1.12088|
;;;5115   		{
;;;5116   		if(BAT_C_REAL[in]==0x5555) tempUS_=BAT_C_NOM[in];
002ee8  f93a1015          LDRSH    r1,[r10,r5,LSL #1]
002eec  f5a140aa          SUB      r0,r1,#0x5500
002ef0  3855              SUBS     r0,r0,#0x55
002ef2  d103              BNE      |L1.12028|
002ef4  4896              LDR      r0,|L1.12624|
002ef6  f8306015          LDRH     r6,[r0,r5,LSL #1]
002efa  e001              B        |L1.12032|
                  |L1.12028|
;;;5117   		else tempUS_=BAT_C_REAL[in];
002efc  f83a6015          LDRH     r6,[r10,r5,LSL #1]
                  |L1.12032|
;;;5118   		
;;;5119   		b_zar=lc640_read_int(ADR_EE_BAT_ZAR_CNT[in]);
002f00  f8390015          LDRH     r0,[r9,r5,LSL #1]
002f04  f7fffffe          BL       lc640_read_int
002f08  b280              UXTH     r0,r0
;;;5120   
;;;5121   		if(b_zar>tempUS_)
002f0a  42b0              CMP      r0,r6
002f0c  d905              BLS      |L1.12058|
;;;5122   			{
;;;5123   			lc640_write_int(ADR_EE_BAT_ZAR_CNT[in],tempUS_);
002f0e  f9390015          LDRSH    r0,[r9,r5,LSL #1]
002f12  b231              SXTH     r1,r6
002f14  f7fffffe          BL       lc640_write_int
;;;5124   			b_zar=tempUS_;
002f18  4630              MOV      r0,r6
                  |L1.12058|
;;;5125   			}
;;;5126   		if(b_zar)
002f1a  b158              CBZ      r0,|L1.12084|
;;;5127   			{
;;;5128   			bat[in]._zar_cnt+=AH_CONSTANT;
002f1c  6961              LDR      r1,[r4,#0x14]
002f1e  4441              ADD      r1,r1,r8
002f20  6161              STR      r1,[r4,#0x14]
;;;5129   
;;;5130   			lc640_write_int(ADR_EE_BAT_ZAR_CNT[in],b_zar-1);
002f22  f9392015          LDRSH    r2,[r9,r5,LSL #1]
002f26  f1a00001          SUB      r0,r0,#1
002f2a  b201              SXTH     r1,r0
002f2c  4610              MOV      r0,r2
002f2e  f7fffffe          BL       lc640_write_int
002f32  e001              B        |L1.12088|
                  |L1.12084|
;;;5131   			}
;;;5132   		else 
;;;5133   			{
;;;5134   			bat[in]._zar_cnt=-AH_CONSTANT;
002f34  4887              LDR      r0,|L1.12628|
002f36  6160              STR      r0,[r4,#0x14]
                  |L1.12088|
;;;5135   			}
;;;5136   
;;;5137   		}
;;;5138   
;;;5139   			
;;;5140   	tempUL=(unsigned long)lc640_read_int(ADR_EE_BAT_ZAR_CNT[in]);
002f38  f8390015          LDRH     r0,[r9,r5,LSL #1]
002f3c  f7fffffe          BL       lc640_read_int
002f40  4601              MOV      r1,r0
;;;5141   	
;;;5142   	if(BAT_C_REAL[in]==0x5555) tempUL_=(unsigned long)BAT_C_NOM[in];
002f42  f93a0015          LDRSH    r0,[r10,r5,LSL #1]
002f46  f5a042aa          SUB      r2,r0,#0x5500
002f4a  3a55              SUBS     r2,r2,#0x55
002f4c  d102              BNE      |L1.12116|
002f4e  4880              LDR      r0,|L1.12624|
002f50  f9300015          LDRSH    r0,[r0,r5,LSL #1]
                  |L1.12116|
;;;5143   	else tempUL_=(unsigned long)BAT_C_REAL[in];
;;;5144   		           	
;;;5145   	tempUL*=1000L;
002f54  f44f727a          MOV      r2,#0x3e8
002f58  fb01f102          MUL      r1,r1,r2
;;;5146   
;;;5147   
;;;5148   	if(tempUL_==0) tempUL=0;
002f5c  b168              CBZ      r0,|L1.12154|
;;;5149   	else tempUL/=tempUL_;
002f5e  fbb1f0f0          UDIV     r0,r1,r0
                  |L1.12130|
;;;5150   
;;;5151   	tempUL/=10L;
002f62  f04f010a          MOV      r1,#0xa
002f66  fbb0f0f1          UDIV     r0,r0,r1
;;;5152   
;;;5153   	bat[in]._zar=(unsigned short)tempUL;
002f6a  8220              STRH     r0,[r4,#0x10]
;;;5154   
;;;5155   	if(BAT_TYPE==1)
002f6c  487a              LDR      r0,|L1.12632|
002f6e  8800              LDRH     r0,[r0,#0]  ; BAT_TYPE
002f70  2801              CMP      r0,#1
002f72  e000              B        |L1.12150|
                  |L1.12148|
002f74  e00f              B        |L1.12182|
                  |L1.12150|
002f76  d003              BEQ      |L1.12160|
002f78  e007              B        |L1.12170|
                  |L1.12154|
002f7a  f04f0000          MOV      r0,#0                 ;5148
002f7e  e7f0              B        |L1.12130|
                  |L1.12160|
;;;5156   		{
;;;5157   		bat[in]._zar=lakb[in]._s_o_c;
002f80  4876              LDR      r0,|L1.12636|
002f82  eb001085          ADD      r0,r0,r5,LSL #6
002f86  8a40              LDRH     r0,[r0,#0x12]
002f88  8220              STRH     r0,[r4,#0x10]
                  |L1.12170|
;;;5158   		}
;;;5159   	
;;;5160   	gran((signed short*)&bat[in]._zar,0,100);
002f8a  f1040010          ADD      r0,r4,#0x10
002f8e  2264              MOVS     r2,#0x64
002f90  2100              MOVS     r1,#0
002f92  f7fffffe          BL       gran
                  |L1.12182|
;;;5161        }
;;;5162   
;;;5163   
;;;5164   //         
;;;5165   if(bat[in]._wrk==1)
002f96  7ba0              LDRB     r0,[r4,#0xe]
002f98  2801              CMP      r0,#1
002f9a  d113              BNE      |L1.12228|
;;;5166   	{
;;;5167   	if(bat[in]._Iintegr<36000)
002f9c  8ba0              LDRH     r0,[r4,#0x1c]
002f9e  4540              CMP      r0,r8
002fa0  d20f              BCS      |L1.12226|
;;;5168   		{          
;;;5169   		bat[in]._Iintegr+=abs(bat[in]._Ib);
002fa2  f9b40008          LDRSH    r0,[r4,#8]
002fa6  f7fffffe          BL       abs
002faa  8ba1              LDRH     r1,[r4,#0x1c]
002fac  4408              ADD      r0,r0,r1
002fae  b280              UXTH     r0,r0
002fb0  83a0              STRH     r0,[r4,#0x1c]
;;;5170   		if(bat[in]._Iintegr>=36000)
002fb2  4540              CMP      r0,r8
002fb4  d306              BCC      |L1.12228|
;;;5171   			{
;;;5172   			bat[in]._Iintegr=0;		//  
002fb6  83a7              STRH     r7,[r4,#0x1c]
;;;5173   			bat[in]._Iintegr_++;	//  
002fb8  8be0              LDRH     r0,[r4,#0x1e]
002fba  f1000001          ADD      r0,r0,#1
002fbe  83e0              STRH     r0,[r4,#0x1e]
002fc0  e000              B        |L1.12228|
                  |L1.12226|
;;;5174   			}
;;;5175   		}
;;;5176   	else 
;;;5177   		{
;;;5178   		bat[in]._Iintegr=0;
002fc2  83a7              STRH     r7,[r4,#0x1c]
                  |L1.12228|
;;;5179   		}	
;;;5180   	} 
;;;5181   	    
;;;5182   //
;;;5183   if((bat[in]._Tb>TBATSIGN)&&(!bat[in]._nd))	
002fc4  4966              LDR      r1,|L1.12640|
002fc6  f9b4000a          LDRSH    r0,[r4,#0xa]
002fca  f9b11000          LDRSH    r1,[r1,#0]  ; TBATSIGN
002fce  4288              CMP      r0,r1
002fd0  dd01              BLE      |L1.12246|
002fd2  7b20              LDRB     r0,[r4,#0xc]
002fd4  b3e8              CBZ      r0,|L1.12370|
                  |L1.12246|
;;;5184   	{
;;;5185   	bat[in]._sign_temper_cnt++;
;;;5186   	}
;;;5187   else 
;;;5188   	{
;;;5189   	bat[in]._sign_temper_cnt--;
002fd6  f8b40040          LDRH     r0,[r4,#0x40]
002fda  f1a00001          SUB      r0,r0,#1
002fde  f8a40040          STRH     r0,[r4,#0x40]
                  |L1.12258|
;;;5190   	}
;;;5191   
;;;5192   gran(&bat[in]._sign_temper_cnt,0,600);
002fe2  f44f7916          MOV      r9,#0x258
002fe6  f1040040          ADD      r0,r4,#0x40
002fea  464a              MOV      r2,r9
002fec  2100              MOVS     r1,#0
002fee  f7fffffe          BL       gran
;;;5193   if(bat[in]._sign_temper_cnt>=590)	bat[in]._temper_stat|=(1<<0);
002ff2  f9b40040          LDRSH    r0,[r4,#0x40]
002ff6  f240264e          MOV      r6,#0x24e
002ffa  42b0              CMP      r0,r6
002ffc  db05              BLT      |L1.12298|
002ffe  f894103f          LDRB     r1,[r4,#0x3f]
003002  f0410101          ORR      r1,r1,#1
003006  f884103f          STRB     r1,[r4,#0x3f]
                  |L1.12298|
;;;5194   if(bat[in]._sign_temper_cnt<=10)	bat[in]._temper_stat&=~(1<<0);
00300a  280a              CMP      r0,#0xa
00300c  dc05              BGT      |L1.12314|
00300e  f894003f          LDRB     r0,[r4,#0x3f]
003012  f0200001          BIC      r0,r0,#1
003016  f884003f          STRB     r0,[r4,#0x3f]
                  |L1.12314|
;;;5195   
;;;5196   
;;;5197   if((bat[in]._Tb>TBATMAX)&&(!bat[in]._nd))	
00301a  4952              LDR      r1,|L1.12644|
00301c  f9b4000a          LDRSH    r0,[r4,#0xa]
003020  f9b11000          LDRSH    r1,[r1,#0]  ; TBATMAX
003024  4288              CMP      r0,r1
003026  dd01              BLE      |L1.12332|
003028  7b20              LDRB     r0,[r4,#0xc]
00302a  b3a0              CBZ      r0,|L1.12438|
                  |L1.12332|
;;;5198   	{
;;;5199   	bat[in]._max_temper_cnt++;
;;;5200   	}
;;;5201   else 
;;;5202   	{
;;;5203   	bat[in]._max_temper_cnt--;
00302c  f8b40042          LDRH     r0,[r4,#0x42]
003030  f1a00001          SUB      r0,r0,#1
003034  f8a40042          STRH     r0,[r4,#0x42]
                  |L1.12344|
;;;5204   	}
;;;5205   
;;;5206   gran(&bat[in]._max_temper_cnt,0,600);
003038  f1040042          ADD      r0,r4,#0x42
00303c  464a              MOV      r2,r9
00303e  2100              MOVS     r1,#0
003040  f7fffffe          BL       gran
;;;5207   if(bat[in]._max_temper_cnt>=590)	bat[in]._temper_stat|=(1<<1);
003044  f9b40042          LDRSH    r0,[r4,#0x42]
003048  42b0              CMP      r0,r6
00304a  db07              BLT      |L1.12380|
00304c  f894103f          LDRB     r1,[r4,#0x3f]
003050  e000              B        |L1.12372|
                  |L1.12370|
003052  e021              B        |L1.12440|
                  |L1.12372|
003054  f0410102          ORR      r1,r1,#2
003058  f884103f          STRB     r1,[r4,#0x3f]
                  |L1.12380|
;;;5208   if(bat[in]._max_temper_cnt<=10)	bat[in]._temper_stat&=~(1<<1);
00305c  280a              CMP      r0,#0xa
00305e  dc05              BGT      |L1.12396|
003060  f894003f          LDRB     r0,[r4,#0x3f]
003064  f0200002          BIC      r0,r0,#2
003068  f884003f          STRB     r0,[r4,#0x3f]
                  |L1.12396|
;;;5209   
;;;5210   
;;;5211   
;;;5212   //  
;;;5213   if(bat[in]._resurs_cnt<36000)
00306c  6c60              LDR      r0,[r4,#0x44]
00306e  4540              CMP      r0,r8
003070  da20              BGE      |L1.12468|
;;;5214   	{               
;;;5215   	bat[in]._resurs_cnt++;
003072  f1000001          ADD      r0,r0,#1
003076  6460              STR      r0,[r4,#0x44]
;;;5216   	if(bat[in]._resurs_cnt>=36000)
003078  4540              CMP      r0,r8
00307a  db1c              BLT      |L1.12470|
;;;5217   		{
;;;5218   		bat[in]._resurs_cnt=0;
00307c  6467              STR      r7,[r4,#0x44]
;;;5219   		lc640_write_int(ADR_EE_BAT_RESURS[in],lc640_read_int(ADR_EE_BAT_RESURS[in])+1);
00307e  4e3a              LDR      r6,|L1.12648|
003080  f8360015          LDRH     r0,[r6,r5,LSL #1]
003084  f7fffffe          BL       lc640_read_int
003088  1c40              ADDS     r0,r0,#1
00308a  b201              SXTH     r1,r0
00308c  f9360015          LDRSH    r0,[r6,r5,LSL #1]
003090  f7fffffe          BL       lc640_write_int
003094  e00f              B        |L1.12470|
                  |L1.12438|
003096  e006              B        |L1.12454|
                  |L1.12440|
003098  f8b40040          LDRH     r0,[r4,#0x40]         ;5185
00309c  f1000001          ADD      r0,r0,#1              ;5185
0030a0  f8a40040          STRH     r0,[r4,#0x40]         ;5185
0030a4  e79d              B        |L1.12258|
                  |L1.12454|
0030a6  f8b40042          LDRH     r0,[r4,#0x42]         ;5199
0030aa  f1000001          ADD      r0,r0,#1              ;5199
0030ae  f8a40042          STRH     r0,[r4,#0x42]         ;5199
0030b2  e7c1              B        |L1.12344|
                  |L1.12468|
;;;5220   		}
;;;5221   	}
;;;5222   else bat[in]._resurs_cnt=0;
0030b4  6467              STR      r7,[r4,#0x44]
                  |L1.12470|
;;;5223   
;;;5224   
;;;5225   #ifndef UKU_220_V2
;;;5226   #ifndef UKU_GLONASS
;;;5227   #ifndef UKU_6U
;;;5228   //#ifndef UKU_220
;;;5229   if(UBM_AV)
0030b6  4e2d              LDR      r6,|L1.12652|
0030b8  8830              LDRH     r0,[r6,#0]  ; UBM_AV
0030ba  2800              CMP      r0,#0
0030bc  d07d              BEQ      |L1.12730|
;;;5230        {
;;;5231        signed short temp_SS;
;;;5232   #ifdef UKU_220
;;;5233   temp_SS=bat[in]._Ub/2;
;;;5234   #else
;;;5235        if(U0B<600)
0030be  482c              LDR      r0,|L1.12656|
0030c0  f9b00000          LDRSH    r0,[r0,#0]  ; U0B
0030c4  4548              CMP      r0,r9
0030c6  da08              BGE      |L1.12506|
;;;5236             {
;;;5237             temp_SS=bat[in]._Ub/4;
0030c8  f9b40002          LDRSH    r0,[r4,#2]
0030cc  ea4f71e0          ASR      r1,r0,#31
0030d0  eb007091          ADD      r0,r0,r1,LSR #30
0030d4  ea4f00a0          ASR      r0,r0,#2
0030d8  e006              B        |L1.12520|
                  |L1.12506|
;;;5238             }
;;;5239        else temp_SS=bat[in]._Ub/5;
0030da  f9b40002          LDRSH    r0,[r4,#2]
0030de  f04f0105          MOV      r1,#5
0030e2  fb90f0f1          SDIV     r0,r0,r1
0030e6  b200              SXTH     r0,r0
                  |L1.12520|
;;;5240   	
;;;5241   	temp_SS+=temp_SS;     
0030e8  ea4f0040          LSL      r0,r0,#1
;;;5242   #endif
;;;5243        temp_SS-=(bat[in]._Ubm);
0030ec  88a1              LDRH     r1,[r4,#4]
0030ee  eba00001          SUB      r0,r0,r1
0030f2  b200              SXTH     r0,r0
;;;5244   
;;;5245        temp_SS=abs(temp_SS);
0030f4  f7fffffe          BL       abs
;;;5246   
;;;5247        temp_SS*=10;
0030f8  eb000080          ADD      r0,r0,r0,LSL #2
0030fc  ea4f0040          LSL      r0,r0,#1
003100  b200              SXTH     r0,r0
;;;5248   
;;;5249        temp_SS/=12;
003102  f04f010c          MOV      r1,#0xc
003106  fb90f0f1          SDIV     r0,r0,r1
00310a  b200              SXTH     r0,r0
;;;5250   
;;;5251        bat[in]._dUbm=temp_SS;
00310c  80e0              STRH     r0,[r4,#6]
;;;5252   
;;;5253   
;;;5254        if(	(bat[in]._dUbm>UBM_AV) &&
00310e  f9b61000          LDRSH    r1,[r6,#0]  ; UBM_AV
003112  4288              CMP      r0,r1
003114  dd56              BLE      |L1.12740|
;;;5255   		(abs(bat[in]._Ib)<(5*IKB)) &&
003116  f9b40008          LDRSH    r0,[r4,#8]
00311a  f7fffffe          BL       abs
00311e  4601              MOV      r1,r0
003120  4806              LDR      r0,|L1.12604|
003122  f9b00000          LDRSH    r0,[r0,#0]  ; IKB
003126  eb000080          ADD      r0,r0,r0,LSL #2
00312a  4281              CMP      r1,r0
00312c  da4a              BGE      |L1.12740|
;;;5256   		(bat[in]._Ub>((short)(((long)USIGN*115)/100))) &&
00312e  4811              LDR      r0,|L1.12660|
003130  2173              MOVS     r1,#0x73
003132  f9b00000          LDRSH    r0,[r0,#0]  ; USIGN
003136  4348              MULS     r0,r1,r0
003138  e01e              B        |L1.12664|
00313a  0000              DCW      0x0000
                  |L1.12604|
                          DCD      IKB
                  |L1.12608|
                          DCD      bat_u_old_cnt
                  |L1.12612|
                          DCD      0x40024020
                  |L1.12616|
                          DCD      ADR_EE_BAT_ZAR_CNT
                  |L1.12620|
                          DCD      BAT_C_REAL
                  |L1.12624|
                          DCD      BAT_C_NOM
                  |L1.12628|
                          DCD      0xffff7360
                  |L1.12632|
                          DCD      BAT_TYPE
                  |L1.12636|
                          DCD      lakb
                  |L1.12640|
                          DCD      TBATSIGN
                  |L1.12644|
                          DCD      TBATMAX
                  |L1.12648|
                          DCD      ADR_EE_BAT_RESURS
                  |L1.12652|
                          DCD      UBM_AV
                  |L1.12656|
                          DCD      U0B
                  |L1.12660|
                          DCD      USIGN
                  |L1.12664|
003178  fb90f0fb          SDIV     r0,r0,r11
00317c  f9b41002          LDRSH    r1,[r4,#2]
003180  b200              SXTH     r0,r0
003182  4288              CMP      r0,r1
003184  da1e              BGE      |L1.12740|
;;;5257   		(!(bat[in]._av & 2))  )
003186  f894003d          LDRB     r0,[r4,#0x3d]
00318a  0780              LSLS     r0,r0,#30
00318c  d41a              BMI      |L1.12740|
;;;5258   		{
;;;5259   		bat[in]._cnt_as++;
00318e  f8b40048          LDRH     r0,[r4,#0x48]
003192  f1000001          ADD      r0,r0,#1
003196  b200              SXTH     r0,r0
003198  f8a40048          STRH     r0,[r4,#0x48]
;;;5260   		if(bat[in]._cnt_as==3000)
00319c  f5a06130          SUB      r1,r0,#0xb00
0031a0  39b8              SUBS     r1,r1,#0xb8
0031a2  d103              BNE      |L1.12716|
;;;5261   			{
;;;5262   			avar_bat_as_hndl(in,1);
0031a4  2101              MOVS     r1,#1
0031a6  4628              MOV      r0,r5
0031a8  f7fffffe          BL       avar_bat_as_hndl
                  |L1.12716|
;;;5263   			}
;;;5264   		if(bat[in]._cnt_as>=3005) bat[in]._cnt_as=3005;
0031ac  f9b41048          LDRSH    r1,[r4,#0x48]
0031b0  f64030bd          MOV      r0,#0xbbd
0031b4  4281              CMP      r1,r0
0031b6  db03              BLT      |L1.12736|
0031b8  e000              B        |L1.12732|
                  |L1.12730|
0031ba  e001              B        |L1.12736|
                  |L1.12732|
0031bc  f8a40048          STRH     r0,[r4,#0x48]
                  |L1.12736|
;;;5265   		}
;;;5266   	else 
;;;5267   		{
;;;5268   		bat[in]._cnt_as=0;
;;;5269   		}
;;;5270        
;;;5271        }
;;;5272   #endif 
;;;5273   #endif 
;;;5274   #endif
;;;5275   
;;;5276   }
0031c0  e8bd9ffc          POP      {r2-r12,pc}
                  |L1.12740|
0031c4  f8a47048          STRH     r7,[r4,#0x48]         ;5268
0031c8  e7fa              B        |L1.12736|
;;;5277   
                          ENDP

                  u_necc_hndl PROC
;;;5284   //-----------------------------------------------
;;;5285   void u_necc_hndl(void)
0031ca  b538              PUSH     {r3-r5,lr}
;;;5286   {
;;;5287   signed long temp_L;
;;;5288   signed long temp_SL;
;;;5289   //signed short temp_SS;
;;;5290   signed short t[2];
;;;5291   //char i;
;;;5292   
;;;5293   //temp_SS=0;
;;;5294   
;;;5295   #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;5296   
;;;5297   if(!TERMOKOMPENS)
0031cc  48f8              LDR      r0,|L1.13744|
;;;5298   	{
;;;5299   	//u_necc=U0B;
;;;5300   	u_necc=UB20;
0031ce  4cfa              LDR      r4,|L1.13752|
0031d0  8801              LDRH     r1,[r0,#0]            ;5297  ; TERMOKOMPENS
0031d2  48f8              LDR      r0,|L1.13748|
0031d4  f9b02000          LDRSH    r2,[r0,#0]
0031d8  b139              CBZ      r1,|L1.12778|
;;;5301   	}
;;;5302   else
;;;5303   	{
;;;5304   	if(ND_EXT[0])t[0]=20;
0031da  48f8              LDR      r0,|L1.13756|
0031dc  6800              LDR      r0,[r0,#0]  ; ND_EXT
0031de  b130              CBZ      r0,|L1.12782|
0031e0  f04f0014          MOV      r0,#0x14
0031e4  f8ad0000          STRH     r0,[sp,#0]
0031e8  e005              B        |L1.12790|
                  |L1.12778|
0031ea  8022              STRH     r2,[r4,#0]            ;5300
0031ec  e027              B        |L1.12862|
                  |L1.12782|
;;;5305   	else t[0]=t_ext[0];
0031ee  48f4              LDR      r0,|L1.13760|
0031f0  8800              LDRH     r0,[r0,#0]  ; t_ext
0031f2  f8ad0000          STRH     r0,[sp,#0]
                  |L1.12790|
;;;5306   
;;;5307   	mat_temper=t[0];
0031f6  4bf3              LDR      r3,|L1.13764|
0031f8  f9bd1000          LDRSH    r1,[sp,#0]
0031fc  6019              STR      r1,[r3,#0]  ; mat_temper
;;;5308   			
;;;5309   	if(mat_temper<0)temp_SL=UB0; 
0031fe  48f2              LDR      r0,|L1.13768|
003200  2900              CMP      r1,#0
003202  f9b00000          LDRSH    r0,[r0,#0]
003206  db12              BLT      |L1.12846|
;;;5310   	else 
;;;5311   		{
;;;5312   		if(mat_temper>40)mat_temper=40; 
003208  2928              CMP      r1,#0x28
00320a  dd02              BLE      |L1.12818|
00320c  f04f0128          MOV      r1,#0x28
003210  6019              STR      r1,[r3,#0]  ; mat_temper
                  |L1.12818|
;;;5313   		temp_SL=(UB20-UB0)*10;
003212  eba20100          SUB      r1,r2,r0
003216  eb010181          ADD      r1,r1,r1,LSL #2
00321a  ea4f0141          LSL      r1,r1,#1
;;;5314   		temp_SL*=mat_temper;
00321e  681a              LDR      r2,[r3,#0]  ; mat_temper
003220  fb01f102          MUL      r1,r1,r2
;;;5315   		temp_SL/=200;
003224  f04f02c8          MOV      r2,#0xc8
003228  fb91f1f2          SDIV     r1,r1,r2
;;;5316   		temp_SL+=UB0;
00322c  4408              ADD      r0,r0,r1
                  |L1.12846|
;;;5317   		}
;;;5318   	if(spc_stat==spcVZ)
00322e  49e7              LDR      r1,|L1.13772|
003230  7cc9              LDRB     r1,[r1,#0x13]  ; spc_stat
003232  2902              CMP      r1,#2
003234  d102              BNE      |L1.12860|
;;;5319   		{
;;;5320   		temp_SL=UVZ;
003236  48e6              LDR      r0,|L1.13776|
003238  f9b00000          LDRSH    r0,[r0,#0]  ; UVZ
                  |L1.12860|
;;;5321   		}
;;;5322   	u_necc=(unsigned int)temp_SL;
00323c  8020              STRH     r0,[r4,#0]
                  |L1.12862|
;;;5323   	///u_necc=3456;
;;;5324   	}  
;;;5325   
;;;5326   //u_necc=2355;
;;;5327   
;;;5328   if(speedChIsOn)
00323e  48e5              LDR      r0,|L1.13780|
003240  8800              LDRH     r0,[r0,#0]  ; speedChIsOn
003242  b110              CBZ      r0,|L1.12874|
;;;5329   	{
;;;5330   	u_necc=speedChrgVolt;
003244  48e4              LDR      r0,|L1.13784|
003246  8800              LDRH     r0,[r0,#0]  ; speedChrgVolt
003248  8020              STRH     r0,[r4,#0]
                  |L1.12874|
;;;5331   	}
;;;5332   
;;;5333   if(mess_find_unvol(MESS2UNECC_HNDL))
00324a  20be              MOVS     r0,#0xbe
00324c  f7fffffe          BL       mess_find_unvol
003250  b128              CBZ      r0,|L1.12894|
;;;5334   	{		
;;;5335   	if(mess_data[0]==PARAM_UNECC_SET)
003252  48e2              LDR      r0,|L1.13788|
003254  6801              LDR      r1,[r0,#0]  ; mess_data
003256  29bf              CMP      r1,#0xbf
003258  d101              BNE      |L1.12894|
;;;5336   		{
;;;5337   		u_necc=mess_data[1];
00325a  6840              LDR      r0,[r0,#4]  ; mess_data
00325c  8020              STRH     r0,[r4,#0]
                  |L1.12894|
;;;5338   		}		
;;;5339   	}
;;;5340   if(ICA_EN)u_necc+=ica_u_necc;
00325e  48e0              LDR      r0,|L1.13792|
003260  8800              LDRH     r0,[r0,#0]  ; ICA_EN
003262  b120              CBZ      r0,|L1.12910|
003264  49df              LDR      r1,|L1.13796|
003266  8820              LDRH     r0,[r4,#0]  ; u_necc
003268  8809              LDRH     r1,[r1,#0]  ; ica_u_necc
00326a  4408              ADD      r0,r0,r1
00326c  8020              STRH     r0,[r4,#0]
                  |L1.12910|
;;;5341   #endif
;;;5342   
;;;5343   
;;;5344   #ifndef UKU_220_IPS_TERMOKOMPENSAT
;;;5345   
;;;5346   #ifndef UKU_TELECORE2015
;;;5347   if(unh_cnt0<10)
;;;5348   	{
;;;5349   	unh_cnt0++;
;;;5350   	if(unh_cnt0>=10)
;;;5351   		{
;;;5352   		unh_cnt0=0;
;;;5353   		b1Hz_unh=1;
;;;5354   		}
;;;5355   	}
;;;5356   
;;;5357   if(unh_cnt1<5)
;;;5358   	{
;;;5359   	unh_cnt1++;
;;;5360   	if(unh_cnt1==5)
;;;5361   		{
;;;5362   		unh_cnt1=0;
;;;5363   //		b2Hz_unh=1;
;;;5364   		}
;;;5365   	} 
;;;5366   
;;;5367   
;;;5368   
;;;5369   if(mess_find_unvol(MESS2UNECC_HNDL))
;;;5370   	{		
;;;5371   	if(mess_data[0]==PARAM_UNECC_SET)
;;;5372   		{
;;;5373   		u_necc=mess_data[1];
;;;5374   		}		
;;;5375   	}
;;;5376   
;;;5377   
;;;5378   else if(b1Hz_unh)
;;;5379   	{
;;;5380   	
;;;5381   	if((BAT_IS_ON[0]!=bisON) && (BAT_IS_ON[1]!=bisON))
;;;5382   		{
;;;5383   		
;;;5384   		u_necc=U0B;
;;;5385   		}
;;;5386   	else 
;;;5387   		{
;;;5388   		if(BAT_TYPE==0) //  
;;;5389   			{
;;;5390   			for(i=0;i<2;i++)
;;;5391   				{
;;;5392   				if(BAT_IS_ON[i]==bisON)
;;;5393   					{
;;;5394   					if(bat[i]._nd)t[i]=20;
;;;5395   					else t[i]=bat[i]._Tb;
;;;5396   					}
;;;5397   				else
;;;5398   					{
;;;5399   					t[i]=-20;
;;;5400   					}
;;;5401   				}
;;;5402   			if(t[0]>t[1])mat_temper=t[0];
;;;5403   			else mat_temper=t[1];
;;;5404   			
;;;5405   		
;;;5406   			if(mat_temper<0)temp_SL=UB0; 
;;;5407   			else 
;;;5408   				{
;;;5409   				if(mat_temper>40)mat_temper=40; 
;;;5410   				temp_SL=(UB20-UB0)*10;
;;;5411   				temp_SL*=mat_temper;
;;;5412   				temp_SL/=200;
;;;5413   				temp_SL+=UB0;
;;;5414   				}
;;;5415   			if(spc_stat==spcVZ)
;;;5416   				{
;;;5417   				temp_SL=UVZ;
;;;5418   				}
;;;5419   			u_necc=(unsigned int)temp_SL;
;;;5420   			}
;;;5421   		else if(BAT_TYPE==1) //  
;;;5422   			{
;;;5423   			u_necc=U0B;
;;;5424   					
;;;5425   			u_necc=bat[0]._Ub+10;
;;;5426   
;;;5427   			
;;;5428   			if(spc_stat==spcVZ)
;;;5429   				{
;;;5430   				u_necc=UVZ;
;;;5431   				}
;;;5432   			if(u_necc>=UB0) u_necc=UB0;
;;;5433   			if(u_necc>=UB20) u_necc=UB20;
;;;5434   			}
;;;5435   		}  
;;;5436   	}
;;;5437   #endif
;;;5438   #ifdef UKU_TELECORE2015
;;;5439   
;;;5440   if(unh_cnt0<10)
;;;5441   	{
;;;5442   	unh_cnt0++;
;;;5443   	if(unh_cnt0>=10)
;;;5444   		{
;;;5445   		unh_cnt0=0;
;;;5446   		b1Hz_unh=1;
;;;5447   		}
;;;5448   	}
;;;5449   
;;;5450   if(unh_cnt1<5)
;;;5451   	{
;;;5452   	unh_cnt1++;
;;;5453   	if(unh_cnt1==5)
;;;5454   		{
;;;5455   		unh_cnt1=0;
;;;5456   //		b2Hz_unh=1;
;;;5457   		}
;;;5458   	} 
;;;5459   
;;;5460   
;;;5461   
;;;5462   if(mess_find_unvol(MESS2UNECC_HNDL))
;;;5463   	{		
;;;5464   	if(mess_data[0]==PARAM_UNECC_SET)
;;;5465   		{
;;;5466   		u_necc=mess_data[1];
;;;5467   		}		
;;;5468   	}
;;;5469   
;;;5470   
;;;5471   else if(b1Hz_unh)
;;;5472   	{
;;;5473   	b1Hz_unh=0;
;;;5474   
;;;5475   	if(BAT_TYPE==0)
;;;5476   		{
;;;5477   		if(bat[0]._nd)mat_temper=20;
;;;5478   		else mat_temper=bat[0]._Tb;
;;;5479   
;;;5480   			
;;;5481   		if(mat_temper<0)temp_SL=UB0; 
;;;5482   		else 
;;;5483   			{
;;;5484   			if(mat_temper>40)mat_temper=40; 
;;;5485   			temp_SL=(UB20-UB0)*10;
;;;5486   			temp_SL*=mat_temper;
;;;5487   			temp_SL/=200;
;;;5488   			temp_SL+=UB0;
;;;5489   			}
;;;5490   		if(spc_stat==spcVZ)
;;;5491   			{
;;;5492   			temp_SL=UVZ;
;;;5493   			}
;;;5494   		u_necc=(unsigned int)temp_SL;
;;;5495   	///u_necc=3456;
;;;5496   		}
;;;5497   	else if(BAT_TYPE==1)
;;;5498   		{
;;;5499   		
;;;5500   		gran(&DU_LI_BAT,1,30);
;;;5501   		u_necc=li_bat._Ub+DU_LI_BAT;
;;;5502   		gran(&u_necc,0,UB0);
;;;5503   		gran(&u_necc,0,UB20);
;;;5504   		gran(&u_necc,0,540);		
;;;5505   
;;;5506   
;;;5507   		if(li_bat._batStat!=bsOK)
;;;5508   			{
;;;5509   			u_necc=U0B;
;;;5510   			}
;;;5511   		if(spc_stat==spcVZ)
;;;5512   			{
;;;5513   			u_necc=UVZ;
;;;5514   			}
;;;5515   		/* 
;;;5516   		u_necc=U0B;
;;;5517   		
;;;5518   
;;;5519   	
;;;5520   		u_necc=UB0;
;;;5521   		u_necc=li_bat._Ub+10;
;;;5522   		if((li_bat._Ub<450)||(li_bat._Ub>550))
;;;5523   			{
;;;5524   			lakb_error_cnt++;
;;;5525   			if(lakb_error_cnt>=30)
;;;5526   				{
;;;5527   				lakb_error_cnt=30;
;;;5528   				u_necc=U0B;
;;;5529   				}
;;;5530   			}
;;;5531   		else lakb_error_cnt=0;*/
;;;5532   		}
;;;5533   	else if(BAT_TYPE==2)
;;;5534   		{
;;;5535   		u_necc=U0B;
;;;5536   		
;;;5537   		if(spc_stat==spcVZ)
;;;5538   			{
;;;5539   			u_necc=UVZ;
;;;5540   			}
;;;5541   	
;;;5542   		u_necc=UB0;
;;;5543   		}
;;;5544   
;;;5545   	else if(BAT_TYPE==3)
;;;5546   		{
;;;5547   		u_necc=U0B;
;;;5548   		
;;;5549   		if(spc_stat==spcVZ)
;;;5550   			{
;;;5551   			u_necc=UVZ;
;;;5552   			}
;;;5553   
;;;5554   		gran(&DU_LI_BAT,1,30);
;;;5555   
;;;5556   
;;;5557   		if(lakbNotErrorNum==0)
;;;5558   			{
;;;5559   			u_necc=U0B;
;;;5560   			}
;;;5561   		else 
;;;5562   			{
;;;5563   			signed short i;
;;;5564   			//signed short u_necc_max;
;;;5565   			//u_necc_max=0;
;;;5566   			char soc_flag=0;
;;;5567   
;;;5568   			for(i=(NUMBAT_TELECORE-1);i>=0;i--)
;;;5569   				{
;;;5570   				if(lakb[i]._communicationFullErrorStat==0)u_necc=lakb[i]._tot_bat_volt+DU_LI_BAT;
;;;5571   				if(lakb[i]._s_o_c_percent<QSODERG_LI_BAT)soc_flag=1;
;;;5572   				}
;;;5573   
;;;5574   			if(soc_flag==0)u_necc=USODERG_LI_BAT;
;;;5575   			}
;;;5576   		gran(&u_necc,0,UB0);
;;;5577   		//gran(&u_necc,0,UB20);
;;;5578   		gran(&u_necc,0,540);
;;;5579   		}
;;;5580   	}
;;;5581   
;;;5582   #endif 
;;;5583   
;;;5584   //u_necc=2356;
;;;5585   #endif//gran(&u_necc,400,UMAX);
;;;5586   
;;;5587   temp_L=(signed long) u_necc;
00326e  f9b40000          LDRSH    r0,[r4,#0]  ; u_necc
;;;5588   temp_L*=98L;
003272  f04f0162          MOV      r1,#0x62
003276  fb00f101          MUL      r1,r0,r1
;;;5589   temp_L/=100L;
00327a  f04f0264          MOV      r2,#0x64
00327e  fb91f1f2          SDIV     r1,r1,r2
;;;5590   u_necc_dn=(signed short)temp_L;
003282  4bd9              LDR      r3,|L1.13800|
003284  8019              STRH     r1,[r3,#0]
;;;5591   
;;;5592   temp_L=(signed long) u_necc;
;;;5593   temp_L*=102L;
003286  f04f0166          MOV      r1,#0x66
00328a  fb00f001          MUL      r0,r0,r1
;;;5594   temp_L/=100L;
00328e  fb90f0f2          SDIV     r0,r0,r2
;;;5595   u_necc_up=(signed short)temp_L;
003292  49d6              LDR      r1,|L1.13804|
003294  8008              STRH     r0,[r1,#0]
;;;5596   
;;;5597   
;;;5598   }
003296  bd38              POP      {r3-r5,pc}
;;;5599   
                          ENDP

                  num_necc_hndl PROC
;;;5601   //-----------------------------------------------
;;;5602   void num_necc_hndl(void)
003298  e92d41f0          PUSH     {r4-r8,lr}
;;;5603   {
;;;5604   
;;;5605   static short num_necc_block_cnt;
;;;5606   if(num_necc_block_cnt) num_necc_block_cnt--;
00329c  4ccb              LDR      r4,|L1.13772|
00329e  f9b40022          LDRSH    r0,[r4,#0x22]  ; num_necc_block_cnt
0032a2  b110              CBZ      r0,|L1.12970|
0032a4  f1a00001          SUB      r0,r0,#1
0032a8  8460              STRH     r0,[r4,#0x22]
                  |L1.12970|
;;;5607   
;;;5608   Isumm_=Isumm;
0032aa  48d1              LDR      r0,|L1.13808|
0032ac  4dd1              LDR      r5,|L1.13812|
0032ae  8800              LDRH     r0,[r0,#0]  ; Isumm
0032b0  8028              STRH     r0,[r5,#0]
;;;5609   
;;;5610   if(bat[0]._Ib<0) Isumm_+=(abs(bat[0]._Ib))/10;
0032b2  4fd1              LDR      r7,|L1.13816|
0032b4  260a              MOVS     r6,#0xa
0032b6  f9b70008          LDRSH    r0,[r7,#8]  ; bat
0032ba  2800              CMP      r0,#0
0032bc  da06              BGE      |L1.13004|
0032be  f7fffffe          BL       abs
0032c2  fb90f0f6          SDIV     r0,r0,r6
0032c6  8829              LDRH     r1,[r5,#0]  ; Isumm_
0032c8  4408              ADD      r0,r0,r1
0032ca  8028              STRH     r0,[r5,#0]
                  |L1.13004|
;;;5611   if(bat[1]._Ib<0) Isumm_+=(abs(bat[1]._Ib))/10;
0032cc  f9b70054          LDRSH    r0,[r7,#0x54]  ; bat
0032d0  2800              CMP      r0,#0
0032d2  da06              BGE      |L1.13026|
0032d4  f7fffffe          BL       abs
0032d8  fb90f0f6          SDIV     r0,r0,r6
0032dc  8829              LDRH     r1,[r5,#0]  ; Isumm_
0032de  4408              ADD      r0,r0,r1
0032e0  8028              STRH     r0,[r5,#0]
                  |L1.13026|
;;;5612   
;;;5613   num_necc_up=(Isumm_/((signed short)IMAX))+1;
0032e2  48c6              LDR      r0,|L1.13820|
0032e4  f9b51000          LDRSH    r1,[r5,#0]  ; Isumm_
0032e8  f9b00000          LDRSH    r0,[r0,#0]  ; IMAX
0032ec  fb91f0f0          SDIV     r0,r1,r0
0032f0  f1000001          ADD      r0,r0,#1
0032f4  b2c0              UXTB     r0,r0
0032f6  73e0              STRB     r0,[r4,#0xf]
;;;5614   ////Isumm_+=(signed short)((IMAX*(10-KIMAX))/10);
;;;5615   ////Isumm_+=(signed short)(IMAX-IMIN);
;;;5616   
;;;5617   num_necc_down=(Isumm_/((signed short)IMIN))+1;
0032f8  4ac1              LDR      r2,|L1.13824|
0032fa  f9b22000          LDRSH    r2,[r2,#0]  ; IMIN
0032fe  fb91f1f2          SDIV     r1,r1,r2
003302  f1010101          ADD      r1,r1,#1
003306  b2c9              UXTB     r1,r1
003308  7421              STRB     r1,[r4,#0x10]
;;;5618   
;;;5619   if(num_necc_up>num_necc)
00330a  4bbe              LDR      r3,|L1.13828|
;;;5620   	{
;;;5621   	num_necc=num_necc_up;
;;;5622   	num_necc_block_cnt=60;
00330c  f04f053c          MOV      r5,#0x3c
003310  f9b32000          LDRSH    r2,[r3,#0]            ;5619  ; num_necc
003314  4290              CMP      r0,r2                 ;5619
003316  dd02              BLE      |L1.13086|
003318  8018              STRH     r0,[r3,#0]            ;5621
00331a  8465              STRH     r5,[r4,#0x22]
00331c  e005              B        |L1.13098|
                  |L1.13086|
;;;5623   	}
;;;5624   else if(num_necc_down<num_necc)
00331e  4291              CMP      r1,r2
003320  da03              BGE      |L1.13098|
;;;5625   	{
;;;5626   	if(!num_necc_block_cnt)
003322  8c60              LDRH     r0,[r4,#0x22]  ; num_necc_block_cnt
003324  b908              CBNZ     r0,|L1.13098|
;;;5627   		{
;;;5628   		num_necc=num_necc_down;
003326  8019              STRH     r1,[r3,#0]
;;;5629   		num_necc_block_cnt=60;
003328  8465              STRH     r5,[r4,#0x22]
                  |L1.13098|
;;;5630   		}
;;;5631   	}
;;;5632   
;;;5633   if(PAR) num_necc=NUMIST;
00332a  48b7              LDR      r0,|L1.13832|
00332c  8801              LDRH     r1,[r0,#0]  ; PAR
00332e  48b7              LDR      r0,|L1.13836|
003330  b109              CBZ      r1,|L1.13110|
003332  8801              LDRH     r1,[r0,#0]  ; NUMIST
003334  8019              STRH     r1,[r3,#0]
                  |L1.13110|
;;;5634   
;;;5635   gran(&num_necc,1,NUMIST);
003336  f9b02000          LDRSH    r2,[r0,#0]  ; NUMIST
00333a  e8bd41f0          POP      {r4-r8,lr}
00333e  2101              MOVS     r1,#1
003340  48b0              LDR      r0,|L1.13828|
003342  f7ffbffe          B.W      gran
;;;5636   
;;;5637   }
;;;5638   
                          ENDP

                  cntrl_hndl PROC
;;;5641   //-----------------------------------------------
;;;5642   void cntrl_hndl(void)
003346  e92d5ff0          PUSH     {r4-r12,lr}
;;;5643   {
;;;5644   
;;;5645   IZMAX_=IZMAX;
00334a  48b1              LDR      r0,|L1.13840|
00334c  4c9f              LDR      r4,|L1.13772|
00334e  f9b01000          LDRSH    r1,[r0,#0]  ; IZMAX
003352  86e1              STRH     r1,[r4,#0x36]
;;;5646   
;;;5647   //cntrl_hndl_plazma=10;
;;;5648   
;;;5649   if(speedChIsOn)IZMAX_=speedChrgCurr;
003354  489f              LDR      r0,|L1.13780|
003356  8800              LDRH     r0,[r0,#0]  ; speedChIsOn
003358  b110              CBZ      r0,|L1.13152|
00335a  48ae              LDR      r0,|L1.13844|
00335c  8800              LDRH     r0,[r0,#0]  ; speedChrgCurr
00335e  86e0              STRH     r0,[r4,#0x36]
                  |L1.13152|
;;;5650   
;;;5651   if(cntrl_stat_blok_cnt)cntrl_stat_blok_cnt--;
003360  f9b4005e          LDRSH    r0,[r4,#0x5e]  ; cntrl_stat_blok_cnt
003364  b118              CBZ      r0,|L1.13166|
003366  f1a00001          SUB      r0,r0,#1
00336a  f8a4005e          STRH     r0,[r4,#0x5e]
                  |L1.13166|
;;;5652   if(cntrl_stat_blok_cnt_)cntrl_stat_blok_cnt_--;
00336e  f9b40060          LDRSH    r0,[r4,#0x60]  ; cntrl_stat_blok_cnt_
003372  b118              CBZ      r0,|L1.13180|
003374  f1a00001          SUB      r0,r0,#1
003378  f8a40060          STRH     r0,[r4,#0x60]
                  |L1.13180|
;;;5653   
;;;5654   if((bat[0]._temper_stat&0x03)||(bat[1]._temper_stat&0x03))IZMAX_=IZMAX/10;
00337c  489e              LDR      r0,|L1.13816|
00337e  f04f080a          MOV      r8,#0xa
003382  f890203f          LDRB     r2,[r0,#0x3f]  ; bat
003386  0792              LSLS     r2,r2,#30
003388  d103              BNE      |L1.13202|
00338a  f890008b          LDRB     r0,[r0,#0x8b]  ; bat
00338e  0780              LSLS     r0,r0,#30
003390  d002              BEQ      |L1.13208|
                  |L1.13202|
003392  fb91f0f8          SDIV     r0,r1,r8
003396  86e0              STRH     r0,[r4,#0x36]
                  |L1.13208|
;;;5655   
;;;5656   
;;;5657   #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;5658   if((REG_SPEED<1)||(REG_SPEED>5)) REG_SPEED=1;
003398  489f              LDR      r0,|L1.13848|
00339a  2501              MOVS     r5,#1
00339c  f9b01000          LDRSH    r1,[r0,#0]  ; REG_SPEED
0033a0  1e49              SUBS     r1,r1,#1
0033a2  2905              CMP      r1,#5
0033a4  d300              BCC      |L1.13224|
0033a6  8005              STRH     r5,[r0,#0]
                  |L1.13224|
;;;5659   if(ch_cnt0<(10*REG_SPEED))
0033a8  f9b00000          LDRSH    r0,[r0,#0]  ; REG_SPEED
0033ac  2600              MOVS     r6,#0                 ;5649
0033ae  eb000180          ADD      r1,r0,r0,LSL #2
0033b2  79a0              LDRB     r0,[r4,#6]  ; ch_cnt0
0033b4  ebb00f41          CMP      r0,r1,LSL #1
0033b8  da08              BGE      |L1.13260|
;;;5660   	{
;;;5661   	ch_cnt0++;
0033ba  f1000001          ADD      r0,r0,#1
0033be  b2c0              UXTB     r0,r0
0033c0  71a0              STRB     r0,[r4,#6]
;;;5662   	if(ch_cnt0>=10*REG_SPEED)
0033c2  ebb00f41          CMP      r0,r1,LSL #1
0033c6  db01              BLT      |L1.13260|
;;;5663   		{
;;;5664   		ch_cnt0=0;
0033c8  71a6              STRB     r6,[r4,#6]
;;;5665   		b1Hz_ch=1;
0033ca  71e5              STRB     r5,[r4,#7]
                  |L1.13260|
;;;5666   		}
;;;5667   	}
;;;5668   #endif
;;;5669   #ifndef UKU_220_IPS_TERMOKOMPENSAT
;;;5670   if(ch_cnt0<10)
;;;5671   	{
;;;5672   	ch_cnt0++;
;;;5673   	if(ch_cnt0>=10)
;;;5674   		{
;;;5675   		ch_cnt0=0;
;;;5676   		b1Hz_ch=1;
;;;5677   		}
;;;5678   	}
;;;5679   #endif
;;;5680   
;;;5681   
;;;5682   if(mess_find_unvol(MESS2CNTRL_HNDL))
0033cc  20e1              MOVS     r0,#0xe1
0033ce  f7fffffe          BL       mess_find_unvol
;;;5683   	{
;;;5684   	if(mess_data[0]==PARAM_CNTRL_STAT_PLUS)
;;;5685   		{
;;;5686   		cntrl_stat=cntrl_stat_old+mess_data[1];
;;;5687   		}
;;;5688   	else if(mess_data[0]==PARAM_CNTRL_STAT_MINUS)
;;;5689   		{
;;;5690   		cntrl_stat=cntrl_stat_old-mess_data[1];
;;;5691   		}
;;;5692   	else if(mess_data[0]==PARAM_CNTRL_STAT_STEP_DOWN)
;;;5693   		{
;;;5694   		cntrl_stat--;
;;;5695   
;;;5696   		if((cntrl_stat<=30)||(load_U<USIGN)) mess_send(MESS2KB_HNDL,PARAM_CNTRL_IS_DOWN,0,10);
;;;5697   
;;;5698   		}
;;;5699   	else if(mess_data[0]==PARAM_CNTRL_STAT_SET)
;;;5700   		{
;;;5701   		cntrl_stat=mess_data[1];
;;;5702   		}
;;;5703   
;;;5704   	else if(mess_data[0]==PARAM_CNTRL_STAT_FAST_REG)
;;;5705   		{
;;;5706   		#ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;5707   		if(load_U>u_necc)
0033d2  f8df91e4          LDR      r9,|L1.13752|
;;;5708   			{
;;;5709   			cntrl_hndl_plazma=11;
;;;5710   			if(((bps_U-u_necc)>40)&&(cntrl_stat>0))cntrl_stat-=5;
0033d6  4a91              LDR      r2,|L1.13852|
;;;5711   			else if((cntrl_stat)&&b1Hz_ch)cntrl_stat--;
;;;5712   			}
;;;5713   		else if(bps_U<u_necc)
;;;5714   			{
;;;5715   			cntrl_hndl_plazma=12;	
;;;5716   			if(((u_necc-bps_U)>40)&&(cntrl_stat<1015))cntrl_stat+=5;
;;;5717   			else	if((cntrl_stat<1020)&&b1Hz_ch)cntrl_stat++;
;;;5718   			}
;;;5719   		#elif defined(UKU_220)
;;;5720   		if(load_U>u_necc)
;;;5721   			{
;;;5722   			cntrl_hndl_plazma=13;
;;;5723   			if(((load_U-u_necc)>40)&&(cntrl_stat>0))cntrl_stat-=5;
;;;5724   			else if((cntrl_stat)&&b1Hz_ch)cntrl_stat--;
;;;5725   			}
;;;5726   		else if(load_U<u_necc)
;;;5727   			{
;;;5728   			cntrl_hndl_plazma=14;	
;;;5729   			if(((u_necc-load_U)>40)&&(cntrl_stat<1015))cntrl_stat+=5;
;;;5730   			else	if((cntrl_stat<1020)&&b1Hz_ch)cntrl_stat++;
;;;5731   			}
;;;5732   		#elif defined(UKU_220_V2)
;;;5733   		if(load_U>u_necc)
;;;5734   			{
;;;5735   			cntrl_hndl_plazma=15;
;;;5736   			if(((load_U-u_necc)>40)&&(cntrl_stat>0))cntrl_stat-=5;
;;;5737   			else if((cntrl_stat)&&b1Hz_ch)cntrl_stat--;
;;;5738   			}
;;;5739   		else if(load_U<u_necc)
;;;5740   			{
;;;5741   			cntrl_hndl_plazma=16;	
;;;5742   			if(((u_necc-load_U)>40)&&(cntrl_stat<1015))cntrl_stat+=5;
;;;5743   			else	if((cntrl_stat<1020)&&b1Hz_ch)cntrl_stat++;
;;;5744   			}
;;;5745   		#else
;;;5746   
;;;5747   		if(load_U>u_necc)
;;;5748   			{
;;;5749   			cntrl_hndl_plazma=17;
;;;5750   			if(((load_U-u_necc)>10)&&(cntrl_stat>0))cntrl_stat-=5;
;;;5751   			else if((cntrl_stat)&&b1Hz_ch)cntrl_stat--;
;;;5752   			}
;;;5753   		else if(load_U<u_necc)
;;;5754   			{
;;;5755   			cntrl_hndl_plazma=18;	
;;;5756   			if(((u_necc-load_U)>10)&&(cntrl_stat<1015))cntrl_stat+=5;
;;;5757   			else	if((cntrl_stat<1020)&&b1Hz_ch)cntrl_stat++;
;;;5758   			}
;;;5759   		#endif	
;;;5760   	 	}
;;;5761   	}
;;;5762   
;;;5763   #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;5764   else if((b1Hz_ch)&&((!bIBAT_SMKLBR)||(bps[8]._cnt>40)))
0033d8  4f91              LDR      r7,|L1.13856|
;;;5765   	{
;;;5766   	cntrl_stat_new=cntrl_stat_old;
;;;5767   	cntrl_hndl_plazma=19;
;;;5768   	if((Ibmax/10)>(2*IZMAX_))
;;;5769   		{
;;;5770   		cntrl_hndl_plazma=20;
;;;5771             if(cntrl_stat_blok_cnt)cntrl_stat_new--;
;;;5772   		else	cntrl_stat_new-=10;
;;;5773   		}		
;;;5774   	else if(((Ibmax/10)<(IZMAX_*2))&&(Ibmax>(IZMAX_*15)))
;;;5775   		{
;;;5776   		cntrl_hndl_plazma=21;
;;;5777             if(cntrl_stat_blok_cnt)cntrl_stat_new--;
;;;5778             else	cntrl_stat_new-=3;
;;;5779   		}   
;;;5780   	else if((Ibmax<(IZMAX_*15))&&((Ibmax/10)>IZMAX_))
;;;5781   		{
;;;5782   		cntrl_hndl_plazma=22;
;;;5783   		cntrl_stat_new--;
;;;5784   		}
;;;5785   		
;;;5786   	else if(bps_U<u_necc)
;;;5787   		{
;;;5788   		cntrl_hndl_plazma=23;
;;;5789   		if(bps_U<(u_necc-(UB0-UB20)))
;;;5790   			{
;;;5791   			cntrl_hndl_plazma=24;
;;;5792   			if(Ibmax<0)
;;;5793   				{
;;;5794   				cntrl_hndl_plazma=25;
;;;5795                       if(cntrl_stat_blok_cnt)cntrl_stat_new++;
;;;5796   				else cntrl_stat_new+=10;
;;;5797   				}
;;;5798   			else if(Ibmax<(IZMAX_*5))
;;;5799   				{
;;;5800   				cntrl_hndl_plazma=26;
;;;5801                       if(cntrl_stat_blok_cnt)cntrl_stat_new++;
;;;5802   				else	cntrl_stat_new+=2;
;;;5803   				}
;;;5804   			else if(Ibmax<((IZMAX_*10)/*-10*/))//(Ibmax<((IZMAX_*95)/10))
;;;5805   				{
;;;5806   				cntrl_hndl_plazma=27;
;;;5807   				cntrl_stat_new++;
;;;5808   				}					
;;;5809   			}
;;;5810   		else if(bps_U<(u_necc-((UB0-UB20)/4)))
;;;5811   			{
;;;5812   			cntrl_hndl_plazma=28;
;;;5813   			if(Ibmax<(IZMAX_*5))
;;;5814   				{
;;;5815   				cntrl_hndl_plazma=29;
;;;5816                       if(cntrl_stat_blok_cnt)cntrl_stat_new++;
;;;5817   				else	cntrl_stat_new+=2;
;;;5818   				}
;;;5819   			else if(Ibmax<((IZMAX_*10)/*-10*/))//(Ibmax<((IZMAX_*95)/10))
;;;5820   				{
;;;5821   				cntrl_hndl_plazma=30;
;;;5822   				cntrl_stat_new++;
;;;5823   				}					
;;;5824   			}	
;;;5825   		else if(bps_U<(u_necc-1))
;;;5826   			{
;;;5827   			cntrl_hndl_plazma=31;
;;;5828   			if(Ibmax<((IZMAX_*10)/*-10*/))//(Ibmax<((IZMAX_*95)/10))
;;;5829   				{
;;;5830   				cntrl_hndl_plazma=32;
;;;5831   				cntrl_stat_new++;
;;;5832   				}					
;;;5833   			}					
;;;5834   		}	
;;;5835   	else if((bps_U>u_necc)/*&&(!cntrl_blok)*/)
;;;5836   		{ 	
;;;5837   		cntrl_hndl_plazma=33;
;;;5838   		if(bps_U>(u_necc+(UB0-UB20)))
;;;5839   			{
;;;5840   			cntrl_hndl_plazma=34;
;;;5841                  if(cntrl_stat_blok_cnt)cntrl_stat_new--;
;;;5842   			else	cntrl_stat_new-=10;
;;;5843   			}
;;;5844   		else if(bps_U>(u_necc+((UB0-UB20)/4)))
;;;5845   			{
;;;5846   			cntrl_hndl_plazma=35;
;;;5847                  if(cntrl_stat_blok_cnt)cntrl_stat_new--;
;;;5848   			else cntrl_stat_new-=2;
;;;5849   			}	
;;;5850   		else if(bps_U>(u_necc+1))
;;;5851   			{
;;;5852   			cntrl_hndl_plazma=36;
;;;5853   			cntrl_stat_new--;
;;;5854   			}					
;;;5855   		}
;;;5856   
;;;5857   	gran(&cntrl_stat_new,10,1010);			
0033da  f2403bf2          MOV      r11,#0x3f2
0033de  b380              CBZ      r0,|L1.13378|
0033e0  497e              LDR      r1,|L1.13788|
0033e2  6808              LDR      r0,[r1,#0]            ;5684  ; mess_data
0033e4  2864              CMP      r0,#0x64              ;5684
0033e6  d009              BEQ      |L1.13308|
0033e8  2869              CMP      r0,#0x69              ;5688
0033ea  d00c              BEQ      |L1.13318|
0033ec  4b8d              LDR      r3,|L1.13860|
0033ee  286e              CMP      r0,#0x6e              ;5692
0033f0  d00f              BEQ      |L1.13330|
0033f2  28e5              CMP      r0,#0xe5              ;5699
0033f4  d022              BEQ      |L1.13372|
0033f6  28e6              CMP      r0,#0xe6              ;5704
0033f8  d024              BEQ      |L1.13380|
                  |L1.13306|
0033fa  e1b1              B        |L1.14176|
                  |L1.13308|
0033fc  6848              LDR      r0,[r1,#4]            ;5686  ; mess_data
0033fe  8be1              LDRH     r1,[r4,#0x1e]         ;5686  ; cntrl_stat_old
003400  4408              ADD      r0,r0,r1              ;5686
003402  83a0              STRH     r0,[r4,#0x1c]         ;5686
003404  e1ac              B        |L1.14176|
                  |L1.13318|
003406  6848              LDR      r0,[r1,#4]            ;5690  ; mess_data
003408  8be1              LDRH     r1,[r4,#0x1e]         ;5690  ; cntrl_stat_old
00340a  eba10000          SUB      r0,r1,r0              ;5690
00340e  83a0              STRH     r0,[r4,#0x1c]         ;5690
003410  e1a6              B        |L1.14176|
                  |L1.13330|
003412  8ba0              LDRH     r0,[r4,#0x1c]         ;5694  ; cntrl_stat
003414  f1a00001          SUB      r0,r0,#1              ;5694
003418  b200              SXTH     r0,r0                 ;5694
00341a  83a0              STRH     r0,[r4,#0x1c]         ;5694
00341c  281e              CMP      r0,#0x1e              ;5696
00341e  dd06              BLE      |L1.13358|
003420  4981              LDR      r1,|L1.13864|
003422  f9b30000          LDRSH    r0,[r3,#0]            ;5696  ; load_U
003426  f9b11000          LDRSH    r1,[r1,#0]            ;5696  ; USIGN
00342a  4288              CMP      r0,r1                 ;5696
00342c  dae5              BGE      |L1.13306|
                  |L1.13358|
00342e  230a              MOVS     r3,#0xa               ;5696
003430  2200              MOVS     r2,#0                 ;5696
003432  21e7              MOVS     r1,#0xe7              ;5696
003434  20e6              MOVS     r0,#0xe6              ;5696
003436  f7fffffe          BL       mess_send
00343a  e191              B        |L1.14176|
                  |L1.13372|
00343c  6848              LDR      r0,[r1,#4]            ;5701  ; mess_data
00343e  83a0              STRH     r0,[r4,#0x1c]         ;5701
003440  e18e              B        |L1.14176|
                  |L1.13378|
003442  e042              B        |L1.13514|
                  |L1.13380|
003444  f9b31000          LDRSH    r1,[r3,#0]            ;5707  ; load_U
003448  f9b90000          LDRSH    r0,[r9,#0]            ;5707  ; u_necc
00344c  4281              CMP      r1,r0                 ;5707
00344e  dd1b              BLE      |L1.13448|
003450  f04f010b          MOV      r1,#0xb               ;5709
003454  76e1              STRB     r1,[r4,#0x1b]         ;5709
003456  f9b21000          LDRSH    r1,[r2,#0]            ;5710  ; bps_U
00345a  eba10000          SUB      r0,r1,r0              ;5710
00345e  2828              CMP      r0,#0x28              ;5710
003460  dd07              BLE      |L1.13426|
003462  f9b4001c          LDRSH    r0,[r4,#0x1c]         ;5710  ; cntrl_stat
003466  2800              CMP      r0,#0                 ;5710
003468  dd03              BLE      |L1.13426|
00346a  f1a00005          SUB      r0,r0,#5              ;5710
00346e  83a0              STRH     r0,[r4,#0x1c]         ;5710
003470  e176              B        |L1.14176|
                  |L1.13426|
003472  f9b4001c          LDRSH    r0,[r4,#0x1c]         ;5711  ; cntrl_stat
003476  2800              CMP      r0,#0                 ;5711
003478  d0bf              BEQ      |L1.13306|
00347a  79e1              LDRB     r1,[r4,#7]            ;5711  ; b1Hz_ch
00347c  2900              CMP      r1,#0                 ;5711
00347e  d0bc              BEQ      |L1.13306|
003480  f1a00001          SUB      r0,r0,#1              ;5711
003484  83a0              STRH     r0,[r4,#0x1c]         ;5711
003486  e16b              B        |L1.14176|
                  |L1.13448|
003488  f9b21000          LDRSH    r1,[r2,#0]            ;5713  ; bps_U
00348c  4281              CMP      r1,r0                 ;5713
00348e  dab4              BGE      |L1.13306|
003490  f04f020c          MOV      r2,#0xc               ;5715
003494  76e2              STRB     r2,[r4,#0x1b]         ;5715
003496  eba00001          SUB      r0,r0,r1              ;5716
00349a  2828              CMP      r0,#0x28              ;5716
00349c  dd09              BLE      |L1.13490|
00349e  f9b4001c          LDRSH    r0,[r4,#0x1c]         ;5716  ; cntrl_stat
0034a2  f24031f7          MOV      r1,#0x3f7             ;5716
0034a6  4288              CMP      r0,r1                 ;5716
0034a8  da03              BGE      |L1.13490|
0034aa  f1000005          ADD      r0,r0,#5              ;5716
0034ae  83a0              STRH     r0,[r4,#0x1c]         ;5716
0034b0  e156              B        |L1.14176|
                  |L1.13490|
0034b2  f9b4001c          LDRSH    r0,[r4,#0x1c]         ;5717  ; cntrl_stat
0034b6  f5b07f7f          CMP      r0,#0x3fc             ;5717
0034ba  da05              BGE      |L1.13512|
0034bc  79e1              LDRB     r1,[r4,#7]            ;5717  ; b1Hz_ch
0034be  2900              CMP      r1,#0                 ;5717
0034c0  d002              BEQ      |L1.13512|
0034c2  f1000001          ADD      r0,r0,#1              ;5717
0034c6  83a0              STRH     r0,[r4,#0x1c]         ;5717
                  |L1.13512|
0034c8  e14a              B        |L1.14176|
                  |L1.13514|
0034ca  79e0              LDRB     r0,[r4,#7]            ;5764  ; b1Hz_ch
0034cc  2800              CMP      r0,#0                 ;5764
0034ce  d06d              BEQ      |L1.13740|
0034d0  4856              LDR      r0,|L1.13868|
0034d2  8800              LDRH     r0,[r0,#0]            ;5764  ; bIBAT_SMKLBR
0034d4  b118              CBZ      r0,|L1.13534|
0034d6  f89702e3          LDRB     r0,[r7,#0x2e3]        ;5764  ; bps
0034da  2828              CMP      r0,#0x28              ;5764
0034dc  d966              BLS      |L1.13740|
                  |L1.13534|
0034de  f9b4001e          LDRSH    r0,[r4,#0x1e]         ;5766  ; cntrl_stat_old
0034e2  8660              STRH     r0,[r4,#0x32]         ;5766
0034e4  f04f0113          MOV      r1,#0x13              ;5767
0034e8  76e1              STRB     r1,[r4,#0x1b]         ;5767
0034ea  f9b41034          LDRSH    r1,[r4,#0x34]         ;5768  ; Ibmax
0034ee  8ee3              LDRH     r3,[r4,#0x36]         ;5768  ; IZMAX_
0034f0  fb91fcf8          SDIV     r12,r1,r8             ;5768
0034f4  ebbc0f43          CMP      r12,r3,LSL #1         ;5768
0034f8  dd0d              BLE      |L1.13590|
0034fa  f04f0114          MOV      r1,#0x14              ;5770
0034fe  76e1              STRB     r1,[r4,#0x1b]         ;5770
003500  f8b4105e          LDRH     r1,[r4,#0x5e]         ;5771  ; cntrl_stat_blok_cnt
003504  b119              CBZ      r1,|L1.13582|
003506  f1a00001          SUB      r0,r0,#1              ;5771
00350a  8660              STRH     r0,[r4,#0x32]         ;5771
00350c  e120              B        |L1.14160|
                  |L1.13582|
00350e  f1a0000a          SUB      r0,r0,#0xa            ;5772
003512  8660              STRH     r0,[r4,#0x32]         ;5772
003514  e11c              B        |L1.14160|
                  |L1.13590|
003516  da11              BGE      |L1.13628|
003518  ebc31803          RSB      r8,r3,r3,LSL #4       ;5774
00351c  4588              CMP      r8,r1                 ;5774
00351e  da0d              BGE      |L1.13628|
003520  f04f0115          MOV      r1,#0x15              ;5776
003524  76e1              STRB     r1,[r4,#0x1b]         ;5776
003526  f8b4105e          LDRH     r1,[r4,#0x5e]         ;5777  ; cntrl_stat_blok_cnt
00352a  b119              CBZ      r1,|L1.13620|
00352c  f1a00001          SUB      r0,r0,#1              ;5777
003530  8660              STRH     r0,[r4,#0x32]         ;5777
003532  e10d              B        |L1.14160|
                  |L1.13620|
003534  f1a00003          SUB      r0,r0,#3              ;5778
003538  8660              STRH     r0,[r4,#0x32]         ;5778
00353a  e109              B        |L1.14160|
                  |L1.13628|
00353c  ebc31803          RSB      r8,r3,r3,LSL #4       ;5780
003540  4588              CMP      r8,r1                 ;5780
003542  dd08              BLE      |L1.13654|
003544  459c              CMP      r12,r3                ;5780
003546  dd06              BLE      |L1.13654|
003548  f04f0116          MOV      r1,#0x16              ;5782
00354c  76e1              STRB     r1,[r4,#0x1b]         ;5782
00354e  f1a00001          SUB      r0,r0,#1              ;5783
003552  8660              STRH     r0,[r4,#0x32]         ;5783
003554  e0fc              B        |L1.14160|
                  |L1.13654|
003556  f9b2c000          LDRSH    r12,[r2,#0]           ;5786  ; bps_U
00355a  f9b92000          LDRSH    r2,[r9,#0]            ;5786  ; u_necc
00355e  f8df9068          LDR      r9,|L1.13768|
003562  f8dfa050          LDR      r10,|L1.13748|
003566  4594              CMP      r12,r2                ;5786
003568  da21              BGE      |L1.13742|
00356a  f04f0817          MOV      r8,#0x17              ;5788
00356e  f884801b          STRB     r8,[r4,#0x1b]         ;5788
003572  f9b98000          LDRSH    r8,[r9,#0]            ;5789  ; UB0
003576  f9ba9000          LDRSH    r9,[r10,#0]           ;5789  ; UB20
00357a  eba80809          SUB      r8,r8,r9              ;5789
00357e  eba20908          SUB      r9,r2,r8              ;5789
003582  45e1              CMP      r9,r12                ;5789
003584  dd71              BLE      |L1.13930|
003586  f04f0218          MOV      r2,#0x18              ;5791
00358a  76e2              STRB     r2,[r4,#0x1b]         ;5791
00358c  2900              CMP      r1,#0                 ;5792
00358e  da4f              BGE      |L1.13872|
003590  f04f0119          MOV      r1,#0x19              ;5794
003594  76e1              STRB     r1,[r4,#0x1b]         ;5794
003596  f8b4105e          LDRH     r1,[r4,#0x5e]         ;5795  ; cntrl_stat_blok_cnt
00359a  b119              CBZ      r1,|L1.13732|
00359c  f1000001          ADD      r0,r0,#1              ;5795
0035a0  8660              STRH     r0,[r4,#0x32]         ;5795
0035a2  e0d5              B        |L1.14160|
                  |L1.13732|
0035a4  f100000a          ADD      r0,r0,#0xa            ;5796
0035a8  8660              STRH     r0,[r4,#0x32]         ;5796
0035aa  e0d1              B        |L1.14160|
                  |L1.13740|
0035ac  e0d8              B        |L1.14176|
                  |L1.13742|
0035ae  e095              B        |L1.14044|
                  |L1.13744|
                          DCD      TERMOKOMPENS
                  |L1.13748|
                          DCD      UB20
                  |L1.13752|
                          DCD      u_necc
                  |L1.13756|
                          DCD      ND_EXT
                  |L1.13760|
                          DCD      t_ext
                  |L1.13764|
                          DCD      mat_temper
                  |L1.13768|
                          DCD      UB0
                  |L1.13772|
                          DCD      ||area_number.21||
                  |L1.13776|
                          DCD      UVZ
                  |L1.13780|
                          DCD      speedChIsOn
                  |L1.13784|
                          DCD      speedChrgVolt
                  |L1.13788|
                          DCD      mess_data
                  |L1.13792|
                          DCD      ICA_EN
                  |L1.13796|
                          DCD      ica_u_necc
                  |L1.13800|
                          DCD      u_necc_dn
                  |L1.13804|
                          DCD      u_necc_up
                  |L1.13808|
                          DCD      Isumm
                  |L1.13812|
                          DCD      Isumm_
                  |L1.13816|
                          DCD      bat
                  |L1.13820|
                          DCD      IMAX
                  |L1.13824|
                          DCD      IMIN
                  |L1.13828|
                          DCD      num_necc
                  |L1.13832|
                          DCD      PAR
                  |L1.13836|
                          DCD      NUMIST
                  |L1.13840|
                          DCD      IZMAX
                  |L1.13844|
                          DCD      speedChrgCurr
                  |L1.13848|
                          DCD      REG_SPEED
                  |L1.13852|
                          DCD      bps_U
                  |L1.13856|
                          DCD      bps
                  |L1.13860|
                          DCD      load_U
                  |L1.13864|
                          DCD      USIGN
                  |L1.13868|
                          DCD      bIBAT_SMKLBR
                  |L1.13872|
003630  eb030283          ADD      r2,r3,r3,LSL #2       ;5798
003634  428a              CMP      r2,r1                 ;5798
003636  dd0d              BLE      |L1.13908|
003638  f04f011a          MOV      r1,#0x1a              ;5800
00363c  76e1              STRB     r1,[r4,#0x1b]         ;5800
00363e  f8b4105e          LDRH     r1,[r4,#0x5e]         ;5801  ; cntrl_stat_blok_cnt
003642  b119              CBZ      r1,|L1.13900|
003644  f1000001          ADD      r0,r0,#1              ;5801
003648  8660              STRH     r0,[r4,#0x32]         ;5801
00364a  e081              B        |L1.14160|
                  |L1.13900|
00364c  f1000002          ADD      r0,r0,#2              ;5802
003650  8660              STRH     r0,[r4,#0x32]         ;5802
003652  e07d              B        |L1.14160|
                  |L1.13908|
003654  ebb10f42          CMP      r1,r2,LSL #1          ;5804
003658  da7a              BGE      |L1.14160|
00365a  f04f011b          MOV      r1,#0x1b              ;5806
00365e  76e1              STRB     r1,[r4,#0x1b]         ;5806
003660  f1000001          ADD      r0,r0,#1              ;5807
003664  8660              STRH     r0,[r4,#0x32]         ;5807
003666  e073              B        |L1.14160|
003668  e7ff              B        |L1.13930|
                  |L1.13930|
00366a  ea4f79e8          ASR      r9,r8,#31             ;5810
00366e  eb087899          ADD      r8,r8,r9,LSR #30      ;5810
003672  eba208a8          SUB      r8,r2,r8,ASR #2       ;5810
003676  45e0              CMP      r8,r12                ;5810
003678  dd1e              BLE      |L1.14008|
00367a  f04f021c          MOV      r2,#0x1c              ;5812
00367e  76e2              STRB     r2,[r4,#0x1b]         ;5812
003680  eb030283          ADD      r2,r3,r3,LSL #2       ;5813
003684  428a              CMP      r2,r1                 ;5813
003686  dd0d              BLE      |L1.13988|
003688  f04f011d          MOV      r1,#0x1d              ;5815
00368c  76e1              STRB     r1,[r4,#0x1b]         ;5815
00368e  f8b4105e          LDRH     r1,[r4,#0x5e]         ;5816  ; cntrl_stat_blok_cnt
003692  b119              CBZ      r1,|L1.13980|
003694  f1000001          ADD      r0,r0,#1              ;5816
003698  8660              STRH     r0,[r4,#0x32]         ;5816
00369a  e059              B        |L1.14160|
                  |L1.13980|
00369c  f1000002          ADD      r0,r0,#2              ;5817
0036a0  8660              STRH     r0,[r4,#0x32]         ;5817
0036a2  e055              B        |L1.14160|
                  |L1.13988|
0036a4  ebb10f42          CMP      r1,r2,LSL #1          ;5819
0036a8  da52              BGE      |L1.14160|
0036aa  f04f011e          MOV      r1,#0x1e              ;5821
0036ae  76e1              STRB     r1,[r4,#0x1b]         ;5821
0036b0  f1000001          ADD      r0,r0,#1              ;5822
0036b4  8660              STRH     r0,[r4,#0x32]         ;5822
0036b6  e04b              B        |L1.14160|
                  |L1.14008|
0036b8  1e52              SUBS     r2,r2,#1              ;5825
0036ba  4594              CMP      r12,r2                ;5825
0036bc  da48              BGE      |L1.14160|
0036be  f04f021f          MOV      r2,#0x1f              ;5827
0036c2  76e2              STRB     r2,[r4,#0x1b]         ;5827
0036c4  eb030283          ADD      r2,r3,r3,LSL #2       ;5828
0036c8  ebb10f42          CMP      r1,r2,LSL #1          ;5828
0036cc  da40              BGE      |L1.14160|
0036ce  f04f0120          MOV      r1,#0x20              ;5830
0036d2  76e1              STRB     r1,[r4,#0x1b]         ;5830
0036d4  f1000001          ADD      r0,r0,#1              ;5831
0036d8  8660              STRH     r0,[r4,#0x32]         ;5831
0036da  e039              B        |L1.14160|
                  |L1.14044|
0036dc  dd38              BLE      |L1.14160|
0036de  f04f0121          MOV      r1,#0x21              ;5837
0036e2  76e1              STRB     r1,[r4,#0x1b]         ;5837
0036e4  f9b91000          LDRSH    r1,[r9,#0]            ;5838  ; UB0
0036e8  f9ba3000          LDRSH    r3,[r10,#0]           ;5838  ; UB20
0036ec  eba10103          SUB      r1,r1,r3              ;5838
0036f0  eb010302          ADD      r3,r1,r2              ;5838
0036f4  4563              CMP      r3,r12                ;5838
0036f6  da0d              BGE      |L1.14100|
0036f8  f04f0122          MOV      r1,#0x22              ;5840
0036fc  76e1              STRB     r1,[r4,#0x1b]         ;5840
0036fe  f8b4105e          LDRH     r1,[r4,#0x5e]         ;5841  ; cntrl_stat_blok_cnt
003702  b119              CBZ      r1,|L1.14092|
003704  f1a00001          SUB      r0,r0,#1              ;5841
003708  8660              STRH     r0,[r4,#0x32]         ;5841
00370a  e021              B        |L1.14160|
                  |L1.14092|
00370c  f1a0000a          SUB      r0,r0,#0xa            ;5842
003710  8660              STRH     r0,[r4,#0x32]         ;5842
003712  e01d              B        |L1.14160|
                  |L1.14100|
003714  17cb              ASRS     r3,r1,#31             ;5844
003716  eb017193          ADD      r1,r1,r3,LSR #30      ;5844
00371a  eb0201a1          ADD      r1,r2,r1,ASR #2       ;5844
00371e  4561              CMP      r1,r12                ;5844
003720  da0d              BGE      |L1.14142|
003722  f04f0123          MOV      r1,#0x23              ;5846
003726  76e1              STRB     r1,[r4,#0x1b]         ;5846
003728  f8b4105e          LDRH     r1,[r4,#0x5e]         ;5847  ; cntrl_stat_blok_cnt
00372c  b119              CBZ      r1,|L1.14134|
00372e  f1a00001          SUB      r0,r0,#1              ;5847
003732  8660              STRH     r0,[r4,#0x32]         ;5847
003734  e00c              B        |L1.14160|
                  |L1.14134|
003736  f1a00002          SUB      r0,r0,#2              ;5848
00373a  8660              STRH     r0,[r4,#0x32]         ;5848
00373c  e008              B        |L1.14160|
                  |L1.14142|
00373e  1c52              ADDS     r2,r2,#1              ;5850
003740  4594              CMP      r12,r2                ;5850
003742  dd05              BLE      |L1.14160|
003744  f04f0124          MOV      r1,#0x24              ;5852
003748  76e1              STRB     r1,[r4,#0x1b]         ;5852
00374a  f1a00001          SUB      r0,r0,#1              ;5853
00374e  8660              STRH     r0,[r4,#0x32]         ;5853
                  |L1.14160|
003750  465a              MOV      r2,r11
003752  210a              MOVS     r1,#0xa
003754  48fe              LDR      r0,|L1.15184|
003756  f7fffffe          BL       gran
;;;5858   	cntrl_stat_old=cntrl_stat_new;
00375a  8e60              LDRH     r0,[r4,#0x32]  ; cntrl_stat_new
00375c  83e0              STRH     r0,[r4,#0x1e]
;;;5859   	cntrl_stat=cntrl_stat_new;	
00375e  83a0              STRH     r0,[r4,#0x1c]
                  |L1.14176|
;;;5860   	}
;;;5861   #else
;;;5862   else if((b1Hz_ch)&&((!bIBAT_SMKLBR)||(bps[8]._cnt>40)))
;;;5863   	{
;;;5864   	cntrl_hndl_plazma=37;
;;;5865   	cntrl_stat_new=cntrl_stat_old;
;;;5866   	
;;;5867   	if((Ibmax/10)>(2*IZMAX_))
;;;5868   		{
;;;5869   		cntrl_hndl_plazma=38;
;;;5870             if(cntrl_stat_blok_cnt)cntrl_stat_new--;
;;;5871   		else	cntrl_stat_new-=10;
;;;5872   		}		
;;;5873   	else if(((Ibmax/10)<(IZMAX_*2))&&(Ibmax>(IZMAX_*15)))
;;;5874   		{
;;;5875   		cntrl_hndl_plazma=39;
;;;5876             if(cntrl_stat_blok_cnt)cntrl_stat_new--;
;;;5877             else	cntrl_stat_new-=3;
;;;5878   		}   
;;;5879   	else if((Ibmax<(IZMAX_*15))&&((Ibmax/10)>IZMAX_))
;;;5880   		{
;;;5881   		cntrl_hndl_plazma=40;
;;;5882   		cntrl_stat_new--;
;;;5883   		}
;;;5884   		
;;;5885   	else if(load_U<u_necc)
;;;5886   		{
;;;5887   		cntrl_hndl_plazma=41;
;;;5888   		if(load_U<(u_necc-(UB0-UB20)))
;;;5889   			{
;;;5890   			cntrl_hndl_plazma=42;
;;;5891   			if(Ibmax<0)
;;;5892   				{
;;;5893   				cntrl_hndl_plazma=43;
;;;5894                       if(cntrl_stat_blok_cnt)cntrl_stat_new++;
;;;5895   				else cntrl_stat_new+=10;
;;;5896   				}
;;;5897   			else if(Ibmax<(IZMAX_*5))
;;;5898   				{
;;;5899   				cntrl_hndl_plazma=44;
;;;5900                       if(cntrl_stat_blok_cnt)cntrl_stat_new++;
;;;5901   				else	cntrl_stat_new+=2;
;;;5902   				}
;;;5903   			else if(Ibmax<((IZMAX_*95)/10))
;;;5904   				{
;;;5905   				cntrl_hndl_plazma=45;
;;;5906   				cntrl_stat_new++;
;;;5907   				}					
;;;5908   			}
;;;5909   		else if(load_U<(u_necc-((UB0-UB20)/4)))
;;;5910   			{
;;;5911   			cntrl_hndl_plazma=46;
;;;5912   			if(Ibmax<(IZMAX_*5))
;;;5913   				{
;;;5914   				cntrl_hndl_plazma=47;
;;;5915                       if(cntrl_stat_blok_cnt)cntrl_stat_new++;
;;;5916   				else	cntrl_stat_new+=2;
;;;5917   				}
;;;5918   			else if(Ibmax<((IZMAX_*95)/10))
;;;5919   				{
;;;5920   				cntrl_hndl_plazma=48;
;;;5921   				cntrl_stat_new++;
;;;5922   				}					
;;;5923   			}	
;;;5924   		else if(load_U<(u_necc-1))
;;;5925   			{
;;;5926   			cntrl_hndl_plazma=49;
;;;5927   			if(Ibmax<((IZMAX_*95)/10))
;;;5928   				{
;;;5929   				cntrl_hndl_plazma=50;
;;;5930   				cntrl_stat_new++;
;;;5931   				}					
;;;5932   			}					
;;;5933   		}	
;;;5934   	else if((load_U>u_necc)/*&&(!cntrl_blok)*/)
;;;5935   		{
;;;5936   		cntrl_hndl_plazma=51;
;;;5937   		if(load_U>(u_necc+(UB0-UB20)))
;;;5938   			{
;;;5939   			cntrl_hndl_plazma=52;
;;;5940                  if(cntrl_stat_blok_cnt)cntrl_stat_new--;
;;;5941   			else	cntrl_stat_new-=10;
;;;5942   			}
;;;5943   		else if(load_U>(u_necc+((UB0-UB20)/4)))
;;;5944   			{
;;;5945   			cntrl_hndl_plazma=53;
;;;5946                  if(cntrl_stat_blok_cnt)cntrl_stat_new--;
;;;5947   			else cntrl_stat_new-=2;
;;;5948   			}	
;;;5949   		else if(load_U>(u_necc+1))
;;;5950   			{
;;;5951   			cntrl_hndl_plazma=54;
;;;5952   			cntrl_stat_new--;
;;;5953   			}					
;;;5954   		}
;;;5955   
;;;5956   	gran(&cntrl_stat_new,10,1010);			
;;;5957   	cntrl_stat_old=cntrl_stat_new;
;;;5958   	cntrl_stat=cntrl_stat_new;	
;;;5959   	}
;;;5960   #endif
;;;5961   
;;;5962   iiii=0;
003760  7266              STRB     r6,[r4,#9]
;;;5963   for(i=0;i<NUMIST;i++)
003762  7226              STRB     r6,[r4,#8]
003764  48fb              LDR      r0,|L1.15188|
003766  f9b01000          LDRSH    r1,[r0,#0]
00376a  e00c              B        |L1.14214|
                  |L1.14188|
;;;5964        {
;;;5965        if(bps[i]._cnt<30)iiii=1;
00376c  ebc002c0          RSB      r2,r0,r0,LSL #3
003770  eb021200          ADD      r2,r2,r0,LSL #4
003774  eb070282          ADD      r2,r7,r2,LSL #2
003778  78d2              LDRB     r2,[r2,#3]
00377a  2a1e              CMP      r2,#0x1e
00377c  d200              BCS      |L1.14208|
00377e  7265              STRB     r5,[r4,#9]
                  |L1.14208|
003780  f1000001          ADD      r0,r0,#1              ;5963
003784  7220              STRB     r0,[r4,#8]            ;5963
                  |L1.14214|
003786  7a20              LDRB     r0,[r4,#8]            ;5963  ; i
003788  4288              CMP      r0,r1                 ;5963
00378a  dbef              BLT      |L1.14188|
;;;5966        }
;;;5967   
;;;5968   if(iiii==0)
00378c  7a60              LDRB     r0,[r4,#9]  ; iiii
00378e  b920              CBNZ     r0,|L1.14234|
;;;5969        {
;;;5970        cntrl_stat=600;	
003790  f44f7016          MOV      r0,#0x258
003794  83a0              STRH     r0,[r4,#0x1c]
;;;5971        cntrl_stat_old=600;
003796  83e0              STRH     r0,[r4,#0x1e]
;;;5972        cntrl_stat_new=600;
003798  8660              STRH     r0,[r4,#0x32]
                  |L1.14234|
;;;5973   	#ifdef UKU_TELECORE2015
;;;5974   	//cntrl_stat=0;
;;;5975   	//cntrl_stat_old=0;
;;;5976   	//cntrl_stat_new=0;
;;;5977   	#endif
;;;5978        }
;;;5979   gran(&cntrl_stat,10,1010); 
00379a  48ed              LDR      r0,|L1.15184|
00379c  465a              MOV      r2,r11
00379e  210a              MOVS     r1,#0xa
0037a0  3816              SUBS     r0,r0,#0x16
0037a2  f7fffffe          BL       gran
;;;5980   b1Hz_ch=0;
0037a6  71e6              STRB     r6,[r4,#7]
                  |L1.14248|
;;;5981   }
0037a8  e8bd9ff0          POP      {r4-r12,pc}
;;;5982   #endif
                          ENDP

                  ext_drv PROC
;;;6227   //-----------------------------------------------
;;;6228   void ext_drv(void)
0037ac  e92d5ff0          PUSH     {r4-r12,lr}
;;;6229   {
;;;6230   char i;
;;;6231   
;;;6232   
;;;6233   for(i=0;i<NUMSK;i++)
0037b0  f04f0000          MOV      r0,#0
0037b4  4aea              LDR      r2,|L1.15200|
;;;6234   	{
;;;6235   	#ifdef UKU_MGTS
;;;6236   	if(adc_buff_[sk_buff_RSTKM[i]]<2000)
;;;6237   	#endif
;;;6238   	#ifdef UKU_RSTKM
;;;6239   	if(adc_buff_[sk_buff_RSTKM[i]]<2000)
;;;6240   	#endif
;;;6241   	#ifdef UKU_3U
;;;6242   	if(adc_buff_[sk_buff_3U[i]]<2000)
;;;6243   	#endif
;;;6244   	#ifdef UKU_GLONASS
;;;6245   	if(adc_buff_[sk_buff_GLONASS[i]]<2000)
;;;6246   	#endif
;;;6247   	#ifdef UKU_KONTUR
;;;6248   	if(adc_buff_[sk_buff_KONTUR[i]]<2000)
;;;6249   	#endif
;;;6250   	#ifdef UKU_6U
;;;6251   	if(adc_buff_[sk_buff_6U[i]]<2000)
;;;6252   	#endif
;;;6253   	#ifdef UKU_220
;;;6254   	if(adc_buff_[sk_buff_220[i]]<2000)
;;;6255   	#endif
;;;6256   	#ifdef UKU_220_V2
;;;6257   	if(adc_buff_[sk_buff_220[i]]<2000)
;;;6258   	#endif
;;;6259   	#ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;6260   	if(adc_buff_[sk_buff_220[i]]<2000)
;;;6261   	#endif
;;;6262   	#ifdef UKU_TELECORE2015
;;;6263   	if(adc_buff_[sk_buff_TELECORE2015[i]]<2000)	 //TODO
;;;6264   	#endif
;;;6265   
;;;6266   		{
;;;6267   		if(sk_cnt[i]<10)
0037b6  4be8              LDR      r3,|L1.15192|
;;;6268   			{
;;;6269   			sk_cnt[i]++;
;;;6270   			if(sk_cnt[i]>=10)
;;;6271   				{
;;;6272   				sk_stat[i]=ssON;
0037b8  4de8              LDR      r5,|L1.15196|
0037ba  f04f0a01          MOV      r10,#1
;;;6273   				}
;;;6274   			}
;;;6275   		else 
;;;6276   			{
;;;6277   			sk_cnt[i]=10;
0037be  f04f0b0a          MOV      r11,#0xa
0037c2  4606              MOV      r6,r0                 ;6233
0037c4  f9b24000          LDRSH    r4,[r2,#0]            ;6233
0037c8  e025              B        |L1.14358|
                  |L1.14282|
0037ca  49e6              LDR      r1,|L1.15204|
0037cc  4fe6              LDR      r7,|L1.15208|
0037ce  5c09              LDRB     r1,[r1,r0]            ;6260
0037d0  f9371011          LDRSH    r1,[r7,r1,LSL #1]     ;6260
0037d4  f5b16ffa          CMP      r1,#0x7d0             ;6260
0037d8  da0e              BGE      |L1.14328|
0037da  5619              LDRSB    r1,[r3,r0]            ;6267
0037dc  290a              CMP      r1,#0xa               ;6267
0037de  da08              BGE      |L1.14322|
0037e0  f1010101          ADD      r1,r1,#1              ;6269
0037e4  b249              SXTB     r1,r1                 ;6269
0037e6  5419              STRB     r1,[r3,r0]            ;6269
0037e8  290a              CMP      r1,#0xa               ;6270
0037ea  db11              BLT      |L1.14352|
0037ec  f805a000          STRB     r10,[r5,r0]           ;6272
0037f0  e00e              B        |L1.14352|
                  |L1.14322|
0037f2  f803b000          STRB     r11,[r3,r0]
0037f6  e00b              B        |L1.14352|
                  |L1.14328|
;;;6278   			}
;;;6279                  
;;;6280   		}
;;;6281   	else
;;;6282   		{
;;;6283   		if(sk_cnt[i]>0)
0037f8  5619              LDRSB    r1,[r3,r0]
0037fa  2900              CMP      r1,#0
0037fc  dd07              BLE      |L1.14350|
;;;6284   			{
;;;6285   			sk_cnt[i]--;
0037fe  f1a10101          SUB      r1,r1,#1
003802  b249              SXTB     r1,r1
003804  5419              STRB     r1,[r3,r0]
;;;6286   			if(sk_cnt[i]<=0)
003806  2900              CMP      r1,#0
003808  dc02              BGT      |L1.14352|
;;;6287   				{
;;;6288   				sk_stat[i]=ssOFF;
00380a  542e              STRB     r6,[r5,r0]
00380c  e000              B        |L1.14352|
                  |L1.14350|
;;;6289   				}
;;;6290   			}
;;;6291   		else 
;;;6292   			{
;;;6293   			sk_cnt[i]=0;
00380e  541e              STRB     r6,[r3,r0]
                  |L1.14352|
003810  f1000001          ADD      r0,r0,#1              ;6233
003814  b2c0              UXTB     r0,r0                 ;6233
                  |L1.14358|
003816  42a0              CMP      r0,r4                 ;6233
003818  dbd7              BLT      |L1.14282|
;;;6294   			}
;;;6295   		}
;;;6296   	}
;;;6297   
;;;6298   for(i=0;i<NUMSK;i++)
00381a  f04f0400          MOV      r4,#0
;;;6299   	{
;;;6300   	if(((SK_SIGN[i]==0)&&(sk_stat[i]==ssON))||((SK_SIGN[i])&&(sk_stat[i]==ssOFF)) )
;;;6301   		{
;;;6302   		if(sk_av_cnt[i]<10)
00381e  f8df934c          LDR      r9,|L1.15212|
;;;6303   			{
;;;6304   			sk_av_cnt[i]++;
;;;6305   			if(sk_av_cnt[i]>=10)
;;;6306   				{
;;;6307   				sk_av_stat[i]=sasON;
003822  4fd3              LDR      r7,|L1.15216|
;;;6308   				}
;;;6309   			}
;;;6310   		else 
;;;6311   			{
;;;6312   			sk_av_cnt[i]=10;
;;;6313   			}
;;;6314   		}
;;;6315   	else
;;;6316   		{
;;;6317   		if(sk_av_cnt[i]>=0)
;;;6318   			{
;;;6319   			sk_av_cnt[i]--;
;;;6320   			if(sk_av_cnt[i]<=0)
;;;6321   				{
;;;6322   				sk_av_stat[i]=sasOFF;
;;;6323   				}
;;;6324   			}
;;;6325   		else 
;;;6326   			{
;;;6327   			sk_av_cnt[i]=0;
;;;6328   			}
;;;6329   		}
;;;6330   
;;;6331   #ifndef UKU_KONTUR
;;;6332   	if(sk_av_stat_old[i]!=sk_av_stat[i])
003824  f8df834c          LDR      r8,|L1.15220|
003828  e083              B        |L1.14642|
                  |L1.14378|
00382a  48d3              LDR      r0,|L1.15224|
00382c  f9300014          LDRSH    r0,[r0,r4,LSL #1]     ;6300
003830  b910              CBNZ     r0,|L1.14392|
003832  5d29              LDRB     r1,[r5,r4]            ;6300
003834  2901              CMP      r1,#1                 ;6300
003836  d00f              BEQ      |L1.14424|
                  |L1.14392|
003838  b108              CBZ      r0,|L1.14398|
00383a  5d28              LDRB     r0,[r5,r4]            ;6300
00383c  b160              CBZ      r0,|L1.14424|
                  |L1.14398|
00383e  f9190004          LDRSB    r0,[r9,r4]            ;6317
003842  2800              CMP      r0,#0                 ;6317
003844  db19              BLT      |L1.14458|
003846  f1a00001          SUB      r0,r0,#1              ;6319
00384a  b240              SXTB     r0,r0                 ;6319
00384c  f8090004          STRB     r0,[r9,r4]            ;6319
003850  2800              CMP      r0,#0                 ;6320
003852  dc14              BGT      |L1.14462|
003854  553e              STRB     r6,[r7,r4]            ;6322
003856  e012              B        |L1.14462|
                  |L1.14424|
003858  f9190004          LDRSB    r0,[r9,r4]            ;6302
00385c  280a              CMP      r0,#0xa               ;6302
00385e  da09              BGE      |L1.14452|
003860  f1000001          ADD      r0,r0,#1              ;6304
003864  b240              SXTB     r0,r0                 ;6304
003866  f8090004          STRB     r0,[r9,r4]            ;6304
00386a  280a              CMP      r0,#0xa               ;6305
00386c  db07              BLT      |L1.14462|
00386e  f807a004          STRB     r10,[r7,r4]           ;6307
003872  e004              B        |L1.14462|
                  |L1.14452|
003874  f809b004          STRB     r11,[r9,r4]           ;6312
003878  e001              B        |L1.14462|
                  |L1.14458|
00387a  f8096004          STRB     r6,[r9,r4]            ;6327
                  |L1.14462|
00387e  f8181004          LDRB     r1,[r8,r4]
003882  5d38              LDRB     r0,[r7,r4]
003884  4281              CMP      r1,r0
003886  d04e              BEQ      |L1.14630|
;;;6333   		{
;;;6334   		plazma_sk++;
003888  4ab1              LDR      r2,|L1.15184|
00388a  3a32              SUBS     r2,r2,#0x32
00388c  8e11              LDRH     r1,[r2,#0x30]  ; plazma_sk
00388e  f1010101          ADD      r1,r1,#1
003892  8611              STRH     r1,[r2,#0x30]
;;;6335   		if(sk_av_stat[i]==sasON)
003894  2801              CMP      r0,#1
003896  d007              BEQ      |L1.14504|
;;;6336   			{
;;;6337   			if(i==0)snmp_trap_send("SK #1 Alarm",15,1,1);
;;;6338   			else if(i==1)snmp_trap_send("SK #2 Alarm",15,2,1);
;;;6339   			else if(i==2)snmp_trap_send("SK #3 Alarm",15,3,1);
;;;6340   			else if(i==3)snmp_trap_send("SK #4 Alarm",15,4,1);
;;;6341   			}
;;;6342   		else 
;;;6343   			{
;;;6344   			if(i==0)snmp_trap_send("SK #1 Alarm is off",15,1,0);
003898  b354              CBZ      r4,|L1.14576|
;;;6345   			else if(i==1)snmp_trap_send("SK #2 Alarm is off",15,2,0);
00389a  2c01              CMP      r4,#1
00389c  d02f              BEQ      |L1.14590|
;;;6346   			else if(i==2)snmp_trap_send("SK #3 Alarm is off",15,3,0);
00389e  2c02              CMP      r4,#2
0038a0  d034              BEQ      |L1.14604|
;;;6347   			else if(i==3)snmp_trap_send("SK #4 Alarm is off",15,4,0);
0038a2  2c03              CMP      r4,#3
0038a4  d039              BEQ      |L1.14618|
0038a6  e03e              B        |L1.14630|
                  |L1.14504|
0038a8  b134              CBZ      r4,|L1.14520|
0038aa  2c01              CMP      r4,#1                 ;6338
0038ac  d00b              BEQ      |L1.14534|
0038ae  2c02              CMP      r4,#2                 ;6339
0038b0  d010              BEQ      |L1.14548|
0038b2  2c03              CMP      r4,#3                 ;6340
0038b4  d015              BEQ      |L1.14562|
0038b6  e036              B        |L1.14630|
                  |L1.14520|
0038b8  2301              MOVS     r3,#1                 ;6337
0038ba  461a              MOV      r2,r3                 ;6337
0038bc  210f              MOVS     r1,#0xf               ;6337
0038be  a0af              ADR      r0,|L1.15228|
0038c0  f7fffffe          BL       snmp_trap_send
0038c4  e02f              B        |L1.14630|
                  |L1.14534|
0038c6  2301              MOVS     r3,#1                 ;6338
0038c8  2202              MOVS     r2,#2                 ;6338
0038ca  210f              MOVS     r1,#0xf               ;6338
0038cc  a0ae              ADR      r0,|L1.15240|
0038ce  f7fffffe          BL       snmp_trap_send
0038d2  e028              B        |L1.14630|
                  |L1.14548|
0038d4  2301              MOVS     r3,#1                 ;6339
0038d6  2203              MOVS     r2,#3                 ;6339
0038d8  210f              MOVS     r1,#0xf               ;6339
0038da  a0ae              ADR      r0,|L1.15252|
0038dc  f7fffffe          BL       snmp_trap_send
0038e0  e021              B        |L1.14630|
                  |L1.14562|
0038e2  2301              MOVS     r3,#1                 ;6340
0038e4  2204              MOVS     r2,#4                 ;6340
0038e6  210f              MOVS     r1,#0xf               ;6340
0038e8  a0ad              ADR      r0,|L1.15264|
0038ea  f7fffffe          BL       snmp_trap_send
0038ee  e01a              B        |L1.14630|
                  |L1.14576|
0038f0  2300              MOVS     r3,#0                 ;6344
0038f2  2201              MOVS     r2,#1                 ;6344
0038f4  210f              MOVS     r1,#0xf               ;6344
0038f6  a0ad              ADR      r0,|L1.15276|
0038f8  f7fffffe          BL       snmp_trap_send
0038fc  e013              B        |L1.14630|
                  |L1.14590|
0038fe  2300              MOVS     r3,#0                 ;6345
003900  2202              MOVS     r2,#2                 ;6345
003902  210f              MOVS     r1,#0xf               ;6345
003904  a0ae              ADR      r0,|L1.15296|
003906  f7fffffe          BL       snmp_trap_send
00390a  e00c              B        |L1.14630|
                  |L1.14604|
00390c  2300              MOVS     r3,#0                 ;6346
00390e  2203              MOVS     r2,#3                 ;6346
003910  210f              MOVS     r1,#0xf               ;6346
003912  a0b0              ADR      r0,|L1.15316|
003914  f7fffffe          BL       snmp_trap_send
003918  e005              B        |L1.14630|
                  |L1.14618|
00391a  2300              MOVS     r3,#0
00391c  2204              MOVS     r2,#4
00391e  210f              MOVS     r1,#0xf
003920  a0b1              ADR      r0,|L1.15336|
003922  f7fffffe          BL       snmp_trap_send
                  |L1.14630|
;;;6348   			}
;;;6349   	 	}
;;;6350   #endif
;;;6351   
;;;6352   #ifdef UKU_KONTUR
;;;6353   	if(sk_av_stat_old[i]!=sk_av_stat[i])
;;;6354   		{
;;;6355   		plazma_sk++;
;;;6356   		if(sk_av_stat[i]==sasON)
;;;6357   			{
;;;6358   			if(i==0)snmp_trap_send("Door is opened",15,1,1);
;;;6359   			else if(i==1)snmp_trap_send("Smoke Alarm",15,2,1);
;;;6360   			else if(i==2)snmp_trap_send("Shock Sensor Alarm",15,3,1);
;;;6361   			else if(i==3)snmp_trap_send("SK #4 Alarm",15,4,1);
;;;6362   			}
;;;6363   		else 
;;;6364   			{
;;;6365   			if(i==0)snmp_trap_send("Door is closed",15,1,0);
;;;6366   			else if(i==1)snmp_trap_send("Smoke Alarm is off",15,2,0);
;;;6367   			else if(i==2)snmp_trap_send("Shock Sensor Alarm is off",15,3,0);
;;;6368   			else if(i==3)snmp_trap_send("SK #4 Alarm is off",15,4,0);
;;;6369   			}
;;;6370   	 	}
;;;6371   #endif
;;;6372   	sk_av_stat_old[i]=sk_av_stat[i];
003926  5d38              LDRB     r0,[r7,r4]
003928  f8080004          STRB     r0,[r8,r4]
00392c  f1040401          ADD      r4,r4,#1              ;6298
003930  b2e4              UXTB     r4,r4                 ;6298
                  |L1.14642|
003932  488b              LDR      r0,|L1.15200|
003934  f9b00000          LDRSH    r0,[r0,#0]            ;6298  ; NUMSK
003938  4284              CMP      r4,r0                 ;6298
00393a  f6ffaf76          BLT      |L1.14378|
;;;6373   	}
;;;6374   }
00393e  e733              B        |L1.14248|
;;;6375   
                          ENDP

                  zar_superviser_start PROC
;;;6412   //-----------------------------------------------
;;;6413   void zar_superviser_start(void)
003940  4aae              LDR      r2,|L1.15356|
;;;6414   {
;;;6415   sign_U[0]=1;
003942  f04f0001          MOV      r0,#1
003946  7010              STRB     r0,[r2,#0]
;;;6416   sign_I[0]=1;
003948  49ad              LDR      r1,|L1.15360|
00394a  7008              STRB     r0,[r1,#0]
;;;6417   sign_U[1]=1;
00394c  7050              STRB     r0,[r2,#1]
;;;6418   sign_I[1]=1;
00394e  7048              STRB     r0,[r1,#1]
;;;6419   
;;;6420   }
003950  4770              BX       lr
;;;6421   
                          ENDP

                  zar_superviser_drv PROC
;;;6377   //-----------------------------------------------
;;;6378   void zar_superviser_drv(void)
003952  e92d5ff0          PUSH     {r4-r12,lr}
;;;6379   {
;;;6380   
;;;6381   if(((bat[0]._Ub>u_necc_up) || (bat[0]._Ub<u_necc_dn))&&(main_kb_cnt<((TBAT*60)-30))&&(main_kb_cnt>((TBAT*60)-150))) sign_U[0]=0;
003956  48ac              LDR      r0,|L1.15368|
003958  f8df92b0          LDR      r9,|L1.15372|
00395c  f8df82a4          LDR      r8,|L1.15364|
003960  f9b0c000          LDRSH    r12,[r0,#0]  ; u_necc_up
003964  f9b90000          LDRSH    r0,[r9,#0]
003968  4c79              LDR      r4,|L1.15184|
00396a  ebc01100          RSB      r1,r0,r0,LSL #4
00396e  3c32              SUBS     r4,r4,#0x32
003970  f9b87002          LDRSH    r7,[r8,#2]  ; bat
003974  f06f0a1d          MVN      r10,#0x1d
003978  f06f0b95          MVN      r11,#0x95
00397c  2500              MOVS     r5,#0
00397e  4e9f              LDR      r6,|L1.15356|
003980  f9b4003c          LDRSH    r0,[r4,#0x3c]
003984  eb0a0281          ADD      r2,r10,r1,LSL #2
003988  eb0b0381          ADD      r3,r11,r1,LSL #2
00398c  4567              CMP      r7,r12
00398e  dc05              BGT      |L1.14748|
003990  f8dfc27c          LDR      r12,|L1.15376|
003994  f9bcc000          LDRSH    r12,[r12,#0]  ; u_necc_dn
003998  4567              CMP      r7,r12
00399a  da04              BGE      |L1.14758|
                  |L1.14748|
00399c  4282              CMP      r2,r0
00399e  dd02              BLE      |L1.14758|
0039a0  4283              CMP      r3,r0
0039a2  da00              BGE      |L1.14758|
0039a4  7035              STRB     r5,[r6,#0]
                  |L1.14758|
;;;6382   
;;;6383   if(((bat[0]._Ib>(2*IKB)) || (bat[0]._Ib<(-IKB*2))) &&(main_kb_cnt<((TBAT*60)-30))&&(main_kb_cnt>((TBAT*60)-150))) sign_I[0]=0;
0039a6  4f9b              LDR      r7,|L1.15380|
0039a8  f9b8c008          LDRSH    r12,[r8,#8]  ; bat
0039ac  f9b7e000          LDRSH    lr,[r7,#0]  ; IKB
0039b0  4f93              LDR      r7,|L1.15360|
0039b2  ebbc0f4e          CMP      r12,lr,LSL #1
0039b6  dc04              BGT      |L1.14786|
0039b8  f1ce0e00          RSB      lr,lr,#0
0039bc  ebbc0f4e          CMP      r12,lr,LSL #1
0039c0  da04              BGE      |L1.14796|
                  |L1.14786|
0039c2  4282              CMP      r2,r0
0039c4  dd02              BLE      |L1.14796|
0039c6  4283              CMP      r3,r0
0039c8  da00              BGE      |L1.14796|
0039ca  703d              STRB     r5,[r7,#0]
                  |L1.14796|
;;;6384   																 
;;;6385   if((main_kb_cnt==((TBAT*60)-10)) &&(spc_stat==spcOFF))
0039cc  f06f0209          MVN      r2,#9
0039d0  eb020181          ADD      r1,r2,r1,LSL #2
0039d4  4281              CMP      r1,r0
0039d6  d120              BNE      |L1.14874|
0039d8  7ce0              LDRB     r0,[r4,#0x13]  ; spc_stat
0039da  b9f0              CBNZ     r0,|L1.14874|
;;;6386   	{
;;;6387   	if((sign_U[0]==1) && (sign_I[0]==1) && (lc640_read_int(EE_BAT1_ZAR_CNT)!=BAT_C_REAL[0]) && (NUMBAT) && (!(bat[0]._av&1)))
0039dc  7830              LDRB     r0,[r6,#0]  ; sign_U
0039de  2801              CMP      r0,#1
0039e0  d11b              BNE      |L1.14874|
0039e2  7838              LDRB     r0,[r7,#0]  ; sign_I
0039e4  2801              CMP      r0,#1
0039e6  d118              BNE      |L1.14874|
0039e8  f44f70d6          MOV      r0,#0x1ac
0039ec  f7fffffe          BL       lc640_read_int
0039f0  4989              LDR      r1,|L1.15384|
0039f2  f9b11000          LDRSH    r1,[r1,#0]  ; BAT_C_REAL
0039f6  4288              CMP      r0,r1
0039f8  d00f              BEQ      |L1.14874|
0039fa  4888              LDR      r0,|L1.15388|
0039fc  8800              LDRH     r0,[r0,#0]  ; NUMBAT
0039fe  b160              CBZ      r0,|L1.14874|
003a00  f898003d          LDRB     r0,[r8,#0x3d]  ; bat
003a04  07c0              LSLS     r0,r0,#31
003a06  d108              BNE      |L1.14874|
;;;6388   		{
;;;6389   		lc640_write_int(EE_BAT1_ZAR_CNT,BAT_C_REAL[0]);
003a08  f44f70d6          MOV      r0,#0x1ac
003a0c  f7fffffe          BL       lc640_write_int
;;;6390   		superviser_cnt++;
003a10  4883              LDR      r0,|L1.15392|
003a12  7801              LDRB     r1,[r0,#0]  ; superviser_cnt
003a14  f1010101          ADD      r1,r1,#1
003a18  7001              STRB     r1,[r0,#0]
                  |L1.14874|
;;;6391   		}
;;;6392   	
;;;6393   	}
;;;6394   
;;;6395   if(((bat[0]._Ub>u_necc_up) || (bat[1]._Ub<u_necc_dn))&&(main_kb_cnt<((TBAT*60)-30))&&(main_kb_cnt>((TBAT*60)-150))) sign_U[1]=0;
003a1a  487b              LDR      r0,|L1.15368|
003a1c  f9b81002          LDRSH    r1,[r8,#2]  ; bat
003a20  f9b00000          LDRSH    r0,[r0,#0]  ; u_necc_up
003a24  4281              CMP      r1,r0
003a26  dc06              BGT      |L1.14902|
003a28  4879              LDR      r0,|L1.15376|
003a2a  f9b8104e          LDRSH    r1,[r8,#0x4e]  ; bat
003a2e  f9b00000          LDRSH    r0,[r0,#0]  ; u_necc_dn
003a32  4281              CMP      r1,r0
003a34  da0e              BGE      |L1.14932|
                  |L1.14902|
003a36  f9b90000          LDRSH    r0,[r9,#0]  ; TBAT
003a3a  f9b4103c          LDRSH    r1,[r4,#0x3c]  ; main_kb_cnt
003a3e  ebc01000          RSB      r0,r0,r0,LSL #4
003a42  eb0a0280          ADD      r2,r10,r0,LSL #2
003a46  428a              CMP      r2,r1
003a48  dd04              BLE      |L1.14932|
003a4a  eb0b0080          ADD      r0,r11,r0,LSL #2
003a4e  4288              CMP      r0,r1
003a50  da00              BGE      |L1.14932|
003a52  7075              STRB     r5,[r6,#1]
                  |L1.14932|
;;;6396   
;;;6397   if(((bat[1]._Ib>(2*IKB)) || (bat[1]._Ib<(-IKB*2))) &&(main_kb_cnt<((TBAT*60)-30))&&(main_kb_cnt>((TBAT*60)-150))) sign_I[1]=0;
003a54  496f              LDR      r1,|L1.15380|
003a56  f9b80054          LDRSH    r0,[r8,#0x54]  ; bat
003a5a  f9b11000          LDRSH    r1,[r1,#0]  ; IKB
003a5e  ebb00f41          CMP      r0,r1,LSL #1
003a62  dc03              BGT      |L1.14956|
003a64  4249              RSBS     r1,r1,#0
003a66  ebb00f41          CMP      r0,r1,LSL #1
003a6a  da0e              BGE      |L1.14986|
                  |L1.14956|
003a6c  f9b90000          LDRSH    r0,[r9,#0]  ; TBAT
003a70  f9b4103c          LDRSH    r1,[r4,#0x3c]  ; main_kb_cnt
003a74  ebc01000          RSB      r0,r0,r0,LSL #4
003a78  eb0a0280          ADD      r2,r10,r0,LSL #2
003a7c  428a              CMP      r2,r1
003a7e  dd04              BLE      |L1.14986|
003a80  eb0b0080          ADD      r0,r11,r0,LSL #2
003a84  4288              CMP      r0,r1
003a86  da00              BGE      |L1.14986|
003a88  707d              STRB     r5,[r7,#1]
                  |L1.14986|
;;;6398   																 
;;;6399   if((main_kb_cnt==((TBAT*60)-10)) &&(spc_stat==spcOFF))
003a8a  f9b90000          LDRSH    r0,[r9,#0]  ; TBAT
003a8e  ebc01100          RSB      r1,r0,r0,LSL #4
003a92  f06f0009          MVN      r0,#9
003a96  eb000081          ADD      r0,r0,r1,LSL #2
003a9a  f9b4103c          LDRSH    r1,[r4,#0x3c]  ; main_kb_cnt
003a9e  4288              CMP      r0,r1
003aa0  d121              BNE      |L1.15078|
003aa2  7ce0              LDRB     r0,[r4,#0x13]  ; spc_stat
003aa4  b9f8              CBNZ     r0,|L1.15078|
;;;6400   	{
;;;6401   	if((sign_U[1]==1) && (sign_I[1]==1) && (lc640_read_int(EE_BAT2_ZAR_CNT)!=BAT_C_REAL[1]) && (NUMBAT==2) && (!(bat[1]._av&1)))
003aa6  7870              LDRB     r0,[r6,#1]  ; sign_U
003aa8  2801              CMP      r0,#1
003aaa  d11c              BNE      |L1.15078|
003aac  7878              LDRB     r0,[r7,#1]  ; sign_I
003aae  2801              CMP      r0,#1
003ab0  d119              BNE      |L1.15078|
003ab2  f44f75e5          MOV      r5,#0x1ca
003ab6  4628              MOV      r0,r5
003ab8  f7fffffe          BL       lc640_read_int
003abc  4956              LDR      r1,|L1.15384|
003abe  f9b11002          LDRSH    r1,[r1,#2]  ; BAT_C_REAL
003ac2  4288              CMP      r0,r1
003ac4  d00f              BEQ      |L1.15078|
003ac6  4855              LDR      r0,|L1.15388|
003ac8  8800              LDRH     r0,[r0,#0]  ; NUMBAT
003aca  2802              CMP      r0,#2
003acc  d10b              BNE      |L1.15078|
003ace  f8980089          LDRB     r0,[r8,#0x89]  ; bat
003ad2  07c0              LSLS     r0,r0,#31
003ad4  d107              BNE      |L1.15078|
;;;6402   		{
;;;6403   		lc640_write_int(EE_BAT2_ZAR_CNT,BAT_C_REAL[1]);
003ad6  4628              MOV      r0,r5
003ad8  f7fffffe          BL       lc640_write_int
;;;6404   		superviser_cnt++;
003adc  4850              LDR      r0,|L1.15392|
003ade  7801              LDRB     r1,[r0,#0]  ; superviser_cnt
003ae0  f1010101          ADD      r1,r1,#1
003ae4  7001              STRB     r1,[r0,#0]
                  |L1.15078|
;;;6405   		}
;;;6406   	
;;;6407   	}
;;;6408   
;;;6409   if(main_kb_cnt==((TBAT*60)-2)) zar_superviser_start();
003ae6  f9b90000          LDRSH    r0,[r9,#0]  ; TBAT
003aea  f06f0101          MVN      r1,#1
003aee  ebc01000          RSB      r0,r0,r0,LSL #4
003af2  eb010080          ADD      r0,r1,r0,LSL #2
003af6  f9b4103c          LDRSH    r1,[r4,#0x3c]  ; main_kb_cnt
003afa  4288              CMP      r0,r1
003afc  d102              BNE      |L1.15108|
003afe  e8bd5ff0          POP      {r4-r12,lr}
003b02  e7fe              B        zar_superviser_start
                  |L1.15108|
;;;6410   }
003b04  e650              B        |L1.14248|
;;;6411   
                          ENDP

                  npn_hndl PROC
;;;6422   //-----------------------------------------------
;;;6423   void npn_hndl(void)
003b06  e92d03f0          PUSH     {r4-r9}
;;;6424   {
;;;6425   if(NPN_OUT!=npnoOFF)
003b0a  4846              LDR      r0,|L1.15396|
;;;6426   	{
;;;6427   /*	if(NPN_SIGN==npnsAVNET)
;;;6428   		{
;;;6429   		if(net_av==1)
;;;6430   			{
;;;6431   			if(npn_tz_cnt<TZNPN)
;;;6432   				{
;;;6433   				npn_tz_cnt++;
;;;6434   				if(npn_tz_cnt==TZNPN)
;;;6435   					{
;;;6436   					npn_stat=npnsOFF;
;;;6437   					}
;;;6438   				}
;;;6439   			}
;;;6440   		else
;;;6441   			{
;;;6442   			if(npn_tz_cnt)
;;;6443   				{
;;;6444   				npn_tz_cnt--;
;;;6445   				if(npn_tz_cnt==0)
;;;6446   					{
;;;6447   					npn_stat=npnsON;
;;;6448   					}
;;;6449   				}
;;;6450   			}
;;;6451   		}*/
;;;6452   /*	if(NPN_SIGN==npnsULOAD)
;;;6453   		{
;;;6454   		if(load_U<UONPN)
;;;6455   			{
;;;6456   			if(npn_tz_cnt<TZNPN)
;;;6457   				{
;;;6458   				npn_tz_cnt++;
;;;6459   				if(npn_tz_cnt==TZNPN)
;;;6460   					{
;;;6461   					npn_stat=npnsOFF;
;;;6462   					}
;;;6463   				}
;;;6464   			}
;;;6465   		else if(load_U>UVNPN)
;;;6466   			{
;;;6467   			if(npn_tz_cnt)
;;;6468   				{
;;;6469   				npn_tz_cnt--;
;;;6470   				if(npn_tz_cnt==0)
;;;6471   					{
;;;6472   					npn_stat=npnsON;
;;;6473   					}
;;;6474   				}
;;;6475   			}
;;;6476   		}*/
;;;6477   
;;;6478   	if((load_U<UONPN)&&((net_Ua<UMN)||(net_Ub<UMN)||(net_Uc<UMN)))
;;;6479   		{
;;;6480   		if(npn_tz_cnt<TZNPN)
003b0c  4f46              LDR      r7,|L1.15400|
;;;6481   			{
;;;6482   			npn_tz_cnt++;
;;;6483   			if(npn_tz_cnt==TZNPN)
;;;6484   				{
;;;6485   				npn_stat=npnsOFF;
003b0e  4e47              LDR      r6,|L1.15404|
003b10  7800              LDRB     r0,[r0,#0]            ;6425  ; NPN_OUT
003b12  f04f0c00          MOV      r12,#0                ;6425
;;;6486   				}
;;;6487   			}
;;;6488   		}
;;;6489   	else if((load_U>UVNPN)&&(net_Ua>UMN)&&(net_Ub>UMN)&&(net_Uc>UMN))
;;;6490   		{
;;;6491   		if(npn_tz_cnt)
;;;6492   			{
;;;6493   			npn_tz_cnt--;
;;;6494   			if(npn_tz_cnt==0)
;;;6495   				{
;;;6496   				npn_stat=npnsON;
003b16  f04f0801          MOV      r8,#1
003b1a  b1c0              CBZ      r0,|L1.15182|
003b1c  4844              LDR      r0,|L1.15408|
003b1e  4639              MOV      r1,r7                 ;6480
003b20  f9b05000          LDRSH    r5,[r0,#0]            ;6478  ; load_U
003b24  4843              LDR      r0,|L1.15412|
003b26  f9b11000          LDRSH    r1,[r1,#0]            ;6480
003b2a  f9b09000          LDRSH    r9,[r0,#0]            ;6478  ; UONPN
003b2e  4842              LDR      r0,|L1.15416|
003b30  454d              CMP      r5,r9                 ;6478
003b32  f9b02000          LDRSH    r2,[r0,#0]            ;6478
003b36  4841              LDR      r0,|L1.15420|
003b38  f9b03000          LDRSH    r3,[r0,#0]            ;6478
003b3c  4840              LDR      r0,|L1.15424|
003b3e  f9b04000          LDRSH    r4,[r0,#0]            ;6478
003b42  4840              LDR      r0,|L1.15428|
003b44  f9b00000          LDRSH    r0,[r0,#0]            ;6478
003b48  da7e              BGE      |L1.15432|
003b4a  4282              CMP      r2,r0                 ;6478
003b4c  e07d              B        |L1.15434|
                  |L1.15182|
003b4e  e0a4              B        |L1.15514|
                  |L1.15184|
                          DCD      ||area_number.21||+0x32
                  |L1.15188|
                          DCD      NUMIST
                  |L1.15192|
                          DCD      sk_cnt
                  |L1.15196|
                          DCD      sk_stat
                  |L1.15200|
                          DCD      NUMSK
                  |L1.15204|
                          DCD      ||area_number.15||
                  |L1.15208|
                          DCD      ||.bss||+0x400
                  |L1.15212|
                          DCD      sk_av_cnt
                  |L1.15216|
                          DCD      sk_av_stat
                  |L1.15220|
                          DCD      sk_av_stat_old
                  |L1.15224|
                          DCD      SK_SIGN
                  |L1.15228|
003b7c  534b2023          DCB      "SK #1 Alarm",0
003b80  3120416c
003b84  61726d00
                  |L1.15240|
003b88  534b2023          DCB      "SK #2 Alarm",0
003b8c  3220416c
003b90  61726d00
                  |L1.15252|
003b94  534b2023          DCB      "SK #3 Alarm",0
003b98  3320416c
003b9c  61726d00
                  |L1.15264|
003ba0  534b2023          DCB      "SK #4 Alarm",0
003ba4  3420416c
003ba8  61726d00
                  |L1.15276|
003bac  534b2023          DCB      "SK #1 Alarm is off",0
003bb0  3120416c
003bb4  61726d20
003bb8  6973206f
003bbc  666600  
003bbf  00                DCB      0
                  |L1.15296|
003bc0  534b2023          DCB      "SK #2 Alarm is off",0
003bc4  3220416c
003bc8  61726d20
003bcc  6973206f
003bd0  666600  
003bd3  00                DCB      0
                  |L1.15316|
003bd4  534b2023          DCB      "SK #3 Alarm is off",0
003bd8  3320416c
003bdc  61726d20
003be0  6973206f
003be4  666600  
003be7  00                DCB      0
                  |L1.15336|
003be8  534b2023          DCB      "SK #4 Alarm is off",0
003bec  3420416c
003bf0  61726d20
003bf4  6973206f
003bf8  666600  
003bfb  00                DCB      0
                  |L1.15356|
                          DCD      sign_U
                  |L1.15360|
                          DCD      sign_I
                  |L1.15364|
                          DCD      bat
                  |L1.15368|
                          DCD      u_necc_up
                  |L1.15372|
                          DCD      TBAT
                  |L1.15376|
                          DCD      u_necc_dn
                  |L1.15380|
                          DCD      IKB
                  |L1.15384|
                          DCD      BAT_C_REAL
                  |L1.15388|
                          DCD      NUMBAT
                  |L1.15392|
                          DCD      superviser_cnt
                  |L1.15396|
                          DCD      NPN_OUT
                  |L1.15400|
                          DCD      npn_tz_cnt
                  |L1.15404|
                          DCD      npn_stat
                  |L1.15408|
                          DCD      load_U
                  |L1.15412|
                          DCD      UONPN
                  |L1.15416|
                          DCD      net_Ua
                  |L1.15420|
                          DCD      net_Ub
                  |L1.15424|
                          DCD      net_Uc
                  |L1.15428|
                          DCD      UMN
                  |L1.15432|
003c48  e012              B        |L1.15472|
                  |L1.15434|
003c4a  db03              BLT      |L1.15444|
003c4c  4283              CMP      r3,r0                 ;6478
003c4e  db01              BLT      |L1.15444|
003c50  4284              CMP      r4,r0                 ;6478
003c52  da0d              BGE      |L1.15472|
                  |L1.15444|
003c54  48ff              LDR      r0,|L1.16468|
003c56  f9b02000          LDRSH    r2,[r0,#0]            ;6480  ; TZNPN
003c5a  4291              CMP      r1,r2                 ;6480
003c5c  da21              BGE      |L1.15522|
003c5e  f1010101          ADD      r1,r1,#1              ;6482
003c62  b208              SXTH     r0,r1                 ;6482
003c64  8038              STRH     r0,[r7,#0]            ;6482
003c66  4290              CMP      r0,r2                 ;6483
003c68  d11b              BNE      |L1.15522|
003c6a  f886c000          STRB     r12,[r6,#0]           ;6485
003c6e  e018              B        |L1.15522|
                  |L1.15472|
003c70  f8dfc3e4          LDR      r12,|L1.16472|
003c74  f9bcc000          LDRSH    r12,[r12,#0]          ;6489  ; UVNPN
003c78  4565              CMP      r5,r12                ;6489
003c7a  dd12              BLE      |L1.15522|
003c7c  4282              CMP      r2,r0                 ;6489
003c7e  dd10              BLE      |L1.15522|
003c80  4283              CMP      r3,r0                 ;6489
003c82  dd0e              BLE      |L1.15522|
003c84  4284              CMP      r4,r0                 ;6489
003c86  dd0c              BLE      |L1.15522|
003c88  b159              CBZ      r1,|L1.15522|
003c8a  f1a10101          SUB      r1,r1,#1              ;6493
003c8e  b208              SXTH     r0,r1                 ;6493
003c90  8038              STRH     r0,[r7,#0]            ;6493
003c92  b930              CBNZ     r0,|L1.15522|
003c94  f8868000          STRB     r8,[r6,#0]
003c98  e003              B        |L1.15522|
                  |L1.15514|
;;;6497   				}
;;;6498   			}
;;;6499   		}
;;;6500   	}
;;;6501   else
;;;6502   	{
;;;6503   	npn_tz_cnt=0;
003c9a  f8a7c000          STRH     r12,[r7,#0]
;;;6504   	npn_stat=npnsON;
003c9e  f8868000          STRB     r8,[r6,#0]
                  |L1.15522|
;;;6505   	}
;;;6506   
;;;6507   if(npn_stat==npnsOFF) mess_send(MESS2RELE_HNDL,PARAM_RELE_NPN,1,15);
003ca2  7830              LDRB     r0,[r6,#0]  ; npn_stat
003ca4  2800              CMP      r0,#0
003ca6  d107              BNE      |L1.15544|
003ca8  e8bd03f0          POP      {r4-r9}
003cac  230f              MOVS     r3,#0xf
003cae  2201              MOVS     r2,#1
003cb0  216e              MOVS     r1,#0x6e
003cb2  20d2              MOVS     r0,#0xd2
003cb4  f7ffbffe          B.W      mess_send
                  |L1.15544|
;;;6508   
;;;6509   
;;;6510   }
003cb8  e8bd03f0          POP      {r4-r9}
003cbc  4770              BX       lr
;;;6511   
                          ENDP

                  speedChargeHndl PROC
;;;6512   //-----------------------------------------------
;;;6513   void speedChargeHndl(void)
003cbe  b5f8              PUSH     {r3-r7,lr}
;;;6514   {
;;;6515   if(speedChIsOn)
003cc0  4fe6              LDR      r7,|L1.16476|
;;;6516   	{
;;;6517   	speedChTimeCnt++;
;;;6518   	if(speedChTimeCnt>=((signed long)speedChrgTimeInHour*3600L))
;;;6519   		{
;;;6520   		speedChIsOn=0;
;;;6521   		}
;;;6522   	if(speedChrgBlckStat)
003cc2  4de7              LDR      r5,|L1.16480|
003cc4  2400              MOVS     r4,#0                 ;6515
003cc6  8838              LDRH     r0,[r7,#0]            ;6515  ; speedChIsOn
003cc8  b198              CBZ      r0,|L1.15602|
003cca  4ae6              LDR      r2,|L1.16484|
003ccc  6811              LDR      r1,[r2,#0]            ;6517  ; speedChTimeCnt
003cce  f1010101          ADD      r1,r1,#1              ;6517
003cd2  6011              STR      r1,[r2,#0]            ;6517  ; speedChTimeCnt
003cd4  48e4              LDR      r0,|L1.16488|
003cd6  f9b00000          LDRSH    r0,[r0,#0]            ;6518  ; speedChrgTimeInHour
003cda  ebc01340          RSB      r3,r0,r0,LSL #5       ;6518
003cde  ebc32000          RSB      r0,r3,r0,LSL #8       ;6518
003ce2  ebb11f00          CMP      r1,r0,LSL #4          ;6518
003ce6  db00              BLT      |L1.15594|
003ce8  803c              STRH     r4,[r7,#0]            ;6520
                  |L1.15594|
003cea  8828              LDRH     r0,[r5,#0]  ; speedChrgBlckStat
003cec  b108              CBZ      r0,|L1.15602|
;;;6523   		{
;;;6524   		speedChIsOn=0;
003cee  803c              STRH     r4,[r7,#0]
;;;6525   		speedChTimeCnt=0;
003cf0  6014              STR      r4,[r2,#0]  ; speedChTimeCnt
                  |L1.15602|
;;;6526   		}
;;;6527   	}
;;;6528   
;;;6529   
;;;6530   
;;;6531   if(speedChrgAvtEn)
003cf2  48de              LDR      r0,|L1.16492|
;;;6532   	{
;;;6533   	if(!speedChIsOn)
;;;6534   		{
;;;6535   		if((load_U<u_necc)&&((u_necc-load_U)>speedChrgDU)&&(abs(Ib_ips_termokompensat/10-IZMAX)<5)&&(!speedChrgBlckStat))
;;;6536   			{
;;;6537   			speedChIsOn=1;
003cf4  2601              MOVS     r6,#1
003cf6  8800              LDRH     r0,[r0,#0]            ;6531  ; speedChrgAvtEn
003cf8  b300              CBZ      r0,|L1.15676|
003cfa  8838              LDRH     r0,[r7,#0]            ;6533  ; speedChIsOn
003cfc  b9f0              CBNZ     r0,|L1.15676|
003cfe  48dc              LDR      r0,|L1.16496|
003d00  49dc              LDR      r1,|L1.16500|
003d02  f9b00000          LDRSH    r0,[r0,#0]            ;6535  ; load_U
003d06  f9b11000          LDRSH    r1,[r1,#0]            ;6535  ; u_necc
003d0a  4288              CMP      r0,r1                 ;6535
003d0c  da16              BGE      |L1.15676|
003d0e  1a08              SUBS     r0,r1,r0              ;6535
003d10  49d9              LDR      r1,|L1.16504|
003d12  f9b11000          LDRSH    r1,[r1,#0]            ;6535  ; speedChrgDU
003d16  4288              CMP      r0,r1                 ;6535
003d18  dd10              BLE      |L1.15676|
003d1a  48d8              LDR      r0,|L1.16508|
003d1c  210a              MOVS     r1,#0xa               ;6535
003d1e  f9b00000          LDRSH    r0,[r0,#0]            ;6535  ; Ib_ips_termokompensat
003d22  fb90f0f1          SDIV     r0,r0,r1              ;6535
003d26  49d6              LDR      r1,|L1.16512|
003d28  8809              LDRH     r1,[r1,#0]            ;6535  ; IZMAX
003d2a  1a40              SUBS     r0,r0,r1              ;6535
003d2c  b200              SXTH     r0,r0                 ;6535
003d2e  f7fffffe          BL       abs
003d32  2805              CMP      r0,#5                 ;6535
003d34  da02              BGE      |L1.15676|
003d36  8828              LDRH     r0,[r5,#0]            ;6535  ; speedChrgBlckStat
003d38  b900              CBNZ     r0,|L1.15676|
003d3a  803e              STRH     r6,[r7,#0]
                  |L1.15676|
;;;6538   			}
;;;6539   		}
;;;6540   	}
;;;6541   
;;;6542   
;;;6543   
;;;6544   if((speedChrgBlckSrc!=1)&&(speedChrgBlckSrc!=2)) speedChrgBlckStat=0;
003d3c  48d1              LDR      r0,|L1.16516|
003d3e  f9b00000          LDRSH    r0,[r0,#0]  ; speedChrgBlckSrc
003d42  2801              CMP      r0,#1
003d44  d003              BEQ      |L1.15694|
003d46  2802              CMP      r0,#2
003d48  d001              BEQ      |L1.15694|
003d4a  802c              STRH     r4,[r5,#0]
003d4c  e026              B        |L1.15772|
                  |L1.15694|
;;;6545   else
;;;6546   	{
;;;6547   	speedChrgBlckStat=0;
003d4e  802c              STRH     r4,[r5,#0]
;;;6548   	if(speedChrgBlckSrc==1)
;;;6549   		{
;;;6550   		if(((speedChrgBlckLog==0)&&(adc_buff_[11]>2000)) || ((speedChrgBlckLog==1)&&(adc_buff_[11]<2000))) speedChrgBlckStat=1;
003d50  4bcd              LDR      r3,|L1.16520|
003d52  49ce              LDR      r1,|L1.16524|
003d54  f44f62fa          MOV      r2,#0x7d0
003d58  2801              CMP      r0,#1                 ;6548
003d5a  d002              BEQ      |L1.15714|
;;;6551   		}
;;;6552   	else if(speedChrgBlckSrc==2)
003d5c  2802              CMP      r0,#2
003d5e  d00f              BEQ      |L1.15744|
003d60  e01c              B        |L1.15772|
                  |L1.15714|
003d62  f9b30000          LDRSH    r0,[r3,#0]            ;6550  ; speedChrgBlckLog
003d66  b918              CBNZ     r0,|L1.15728|
003d68  f9b13016          LDRSH    r3,[r1,#0x16]         ;6550  ; adc_buff_
003d6c  4293              CMP      r3,r2                 ;6550
003d6e  dc05              BGT      |L1.15740|
                  |L1.15728|
003d70  2801              CMP      r0,#1                 ;6550
003d72  d113              BNE      |L1.15772|
003d74  f9b10016          LDRSH    r0,[r1,#0x16]         ;6550  ; adc_buff_
003d78  4290              CMP      r0,r2                 ;6550
003d7a  da0f              BGE      |L1.15772|
                  |L1.15740|
003d7c  802e              STRH     r6,[r5,#0]            ;6550
003d7e  e00d              B        |L1.15772|
                  |L1.15744|
;;;6553   		{
;;;6554   		if(((speedChrgBlckLog==0)&&(adc_buff_[13]>2000)) || ((speedChrgBlckLog==1)&&(adc_buff_[13]<2000))) speedChrgBlckStat=1;
003d80  f9b30000          LDRSH    r0,[r3,#0]  ; speedChrgBlckLog
003d84  b918              CBNZ     r0,|L1.15758|
003d86  f9b1301a          LDRSH    r3,[r1,#0x1a]  ; adc_buff_
003d8a  4293              CMP      r3,r2
003d8c  dc05              BGT      |L1.15770|
                  |L1.15758|
003d8e  2801              CMP      r0,#1
003d90  d104              BNE      |L1.15772|
003d92  f9b1001a          LDRSH    r0,[r1,#0x1a]  ; adc_buff_
003d96  4290              CMP      r0,r2
003d98  da00              BGE      |L1.15772|
                  |L1.15770|
003d9a  802e              STRH     r6,[r5,#0]
                  |L1.15772|
;;;6555   		}
;;;6556   	}
;;;6557   
;;;6558   
;;;6559   if(speedChrgBlckStat==1)
003d9c  8828              LDRH     r0,[r5,#0]  ; speedChrgBlckStat
;;;6560   	{
;;;6561   
;;;6562   	//speedChargeStartStop();
;;;6563   
;;;6564   	speedChrgShowCnt++;
003d9e  49bc              LDR      r1,|L1.16528|
003da0  2801              CMP      r0,#1                 ;6559
003da2  d001              BEQ      |L1.15784|
;;;6565   	if(speedChrgShowCnt>=30)	
;;;6566   		{
;;;6567   		speedChrgShowCnt=0;
;;;6568   		show_mess(	"          ",
;;;6569   					"               ",
;;;6570   					"     !!!    ",
;;;6571   					"                    ",
;;;6572   					5000);
;;;6573   		}
;;;6574   	}
;;;6575   else speedChrgShowCnt=0;
003da4  700c              STRB     r4,[r1,#0]
                  |L1.15782|
;;;6576   
;;;6577   
;;;6578   }
003da6  bdf8              POP      {r3-r7,pc}
                  |L1.15784|
003da8  7808              LDRB     r0,[r1,#0]            ;6564  ; speedChrgShowCnt
003daa  f1000001          ADD      r0,r0,#1              ;6564
003dae  b2c0              UXTB     r0,r0                 ;6564
003db0  7008              STRB     r0,[r1,#0]            ;6564
003db2  281e              CMP      r0,#0x1e              ;6565
003db4  d3f7              BCC      |L1.15782|
003db6  700c              STRB     r4,[r1,#0]            ;6567
003db8  f2413088          MOV      r0,#0x1388            ;6568
003dbc  9000              STR      r0,[sp,#0]            ;6568
003dbe  a3b5              ADR      r3,|L1.16532|
003dc0  a2ba              ADR      r2,|L1.16556|
003dc2  a1c0              ADR      r1,|L1.16580|
003dc4  a0c5              ADR      r0,|L1.16604|
003dc6  f7fffffe          BL       show_mess
003dca  bdf8              POP      {r3-r7,pc}
;;;6579   
                          ENDP

                  speedChargeStartStop PROC
;;;6580   //-----------------------------------------------
;;;6581   void speedChargeStartStop(void)
003dcc  b508              PUSH     {r3,lr}
;;;6582   {
;;;6583   if(speedChIsOn)
003dce  48a3              LDR      r0,|L1.16476|
003dd0  2100              MOVS     r1,#0
003dd2  8802              LDRH     r2,[r0,#0]  ; speedChIsOn
003dd4  b10a              CBZ      r2,|L1.15834|
;;;6584   	{
;;;6585   	speedChIsOn=0;
003dd6  8001              STRH     r1,[r0,#0]
;;;6586   	}
;;;6587   
;;;6588   else
;;;6589   	{
;;;6590   	if(speedChrgBlckStat==0)
;;;6591   		{
;;;6592   		speedChIsOn=1;
;;;6593   		speedChTimeCnt=0;
;;;6594   		}
;;;6595   	else
;;;6596   		{
;;;6597   		show_mess(	"          ",
;;;6598   	          		"               ",
;;;6599   	          		"    !   ",
;;;6600   	          		"                    ",2000);	 
;;;6601   		}
;;;6602   	}
;;;6603   }
003dd8  bd08              POP      {r3,pc}
                  |L1.15834|
003dda  4aa1              LDR      r2,|L1.16480|
003ddc  8812              LDRH     r2,[r2,#0]            ;6590  ; speedChrgBlckStat
003dde  b14a              CBZ      r2,|L1.15860|
003de0  f44f60fa          MOV      r0,#0x7d0             ;6597
003de4  9000              STR      r0,[sp,#0]            ;6597
003de6  a3ab              ADR      r3,|L1.16532|
003de8  a2c2              ADR      r2,|L1.16628|
003dea  a1c8              ADR      r1,|L1.16652|
003dec  a0cd              ADR      r0,|L1.16676|
003dee  f7fffffe          BL       show_mess
003df2  bd08              POP      {r3,pc}
                  |L1.15860|
003df4  f04f0201          MOV      r2,#1                 ;6592
003df8  8002              STRH     r2,[r0,#0]            ;6592
003dfa  489a              LDR      r0,|L1.16484|
003dfc  6001              STR      r1,[r0,#0]            ;6593  ; speedChTimeCnt
003dfe  bd08              POP      {r3,pc}
;;;6604   
                          ENDP

                  numOfForvardBps_hndl PROC
;;;6605   //-----------------------------------------------
;;;6606   void	numOfForvardBps_hndl(void)			//       
003e00  e92d41f0          PUSH     {r4-r8,lr}
;;;6607   {
;;;6608   
;;;6609   numOfForvardBps_old=numOfForvardBps;
003e04  4ccd              LDR      r4,|L1.16700|
003e06  7e20              LDRB     r0,[r4,#0x18]  ; numOfForvardBps
003e08  7660              STRB     r0,[r4,#0x19]
;;;6610   
;;;6611   numOfForvardBps=0;
003e0a  f04f0500          MOV      r5,#0
003e0e  7625              STRB     r5,[r4,#0x18]
;;;6612   
;;;6613   //FORVARDBPSCHHOUR=10;
;;;6614   
;;;6615   if((FORVARDBPSCHHOUR<=0)||(FORVARDBPSCHHOUR>500))
003e10  4ecb              LDR      r6,|L1.16704|
003e12  f9b60000          LDRSH    r0,[r6,#0]  ; FORVARDBPSCHHOUR
003e16  2800              CMP      r0,#0
003e18  dd02              BLE      |L1.15904|
003e1a  f5b07ffa          CMP      r0,#0x1f4
003e1e  dd02              BLE      |L1.15910|
                  |L1.15904|
;;;6616   	{
;;;6617   	FORVARDBPSCHHOUR=0;
003e20  8035              STRH     r5,[r6,#0]
                  |L1.15906|
;;;6618   	return;
;;;6619   	}
;;;6620   
;;;6621   numOfForvardBps_minCnt++;
;;;6622   
;;;6623   
;;;6624   if(numOfForvardBps_minCnt>=60)
;;;6625   	{
;;;6626   	numOfForvardBps_minCnt=0;
;;;6627   	numOfForvardBps_hourCnt=lc640_read_int(EE_FORVBPSHOURCNT);
;;;6628   	numOfForvardBps_hourCnt++;
;;;6629   	if(numOfForvardBps_hourCnt>=(FORVARDBPSCHHOUR*NUMIST))
;;;6630   		{
;;;6631   		numOfForvardBps_hourCnt=0;
;;;6632   		}
;;;6633   	lc640_write_int(EE_FORVBPSHOURCNT,numOfForvardBps_hourCnt);
;;;6634   	}
;;;6635   
;;;6636   numOfForvardBps=numOfForvardBps_hourCnt/FORVARDBPSCHHOUR;
;;;6637   
;;;6638   //if(numOfForvardBps)
;;;6639   //numOfForvardBps_old=numOfForvardBps; 
;;;6640   }
003e22  e8bd81f0          POP      {r4-r8,pc}
                  |L1.15910|
003e26  7ea0              LDRB     r0,[r4,#0x1a]         ;6621  ; numOfForvardBps_minCnt
003e28  f1000001          ADD      r0,r0,#1              ;6621
003e2c  b2c0              UXTB     r0,r0                 ;6621
003e2e  76a0              STRB     r0,[r4,#0x1a]         ;6621
003e30  283c              CMP      r0,#0x3c              ;6624
003e32  d31a              BCC      |L1.15978|
003e34  76a5              STRB     r5,[r4,#0x1a]         ;6626
003e36  f44f7794          MOV      r7,#0x128             ;6627
003e3a  4638              MOV      r0,r7                 ;6627
003e3c  f7fffffe          BL       lc640_read_int
003e40  f1000001          ADD      r0,r0,#1              ;6628
003e44  b200              SXTH     r0,r0                 ;6628
003e46  f8a40062          STRH     r0,[r4,#0x62]         ;6628
003e4a  4abe              LDR      r2,|L1.16708|
003e4c  f9b61000          LDRSH    r1,[r6,#0]            ;6629  ; FORVARDBPSCHHOUR
003e50  f9b22000          LDRSH    r2,[r2,#0]            ;6629  ; NUMIST
003e54  fb01f102          MUL      r1,r1,r2              ;6629
003e58  4281              CMP      r1,r0                 ;6629
003e5a  dc01              BGT      |L1.15968|
003e5c  f8a45062          STRH     r5,[r4,#0x62]         ;6631
                  |L1.15968|
003e60  f9b41062          LDRSH    r1,[r4,#0x62]         ;6633  ; numOfForvardBps_hourCnt
003e64  4638              MOV      r0,r7                 ;6633
003e66  f7fffffe          BL       lc640_write_int
                  |L1.15978|
003e6a  f9b40062          LDRSH    r0,[r4,#0x62]         ;6636  ; numOfForvardBps_hourCnt
003e6e  f9b61000          LDRSH    r1,[r6,#0]            ;6636  ; FORVARDBPSCHHOUR
003e72  fb90f0f1          SDIV     r0,r0,r1              ;6636
003e76  7620              STRB     r0,[r4,#0x18]         ;6636
003e78  e7d3              B        |L1.15906|
;;;6641   
                          ENDP

                  numOfForvardBps_init PROC
;;;6642   //-----------------------------------------------
;;;6643   void	numOfForvardBps_init(void)			//         
003e7a  b510              PUSH     {r4,lr}
;;;6644   {									//    -   
;;;6645   lc640_write_int(EE_FORVBPSHOURCNT,0);
003e7c  2100              MOVS     r1,#0
003e7e  f44f7094          MOV      r0,#0x128
003e82  f7fffffe          BL       lc640_write_int
;;;6646   numOfForvardBps_minCnt=58;
003e86  49ad              LDR      r1,|L1.16700|
003e88  f04f003a          MOV      r0,#0x3a
003e8c  7688              STRB     r0,[r1,#0x1a]
;;;6647   }
003e8e  bd10              POP      {r4,pc}
;;;6648   
                          ENDP

                  outVoltContrHndl PROC
;;;6649   //-----------------------------------------------
;;;6650   void outVoltContrHndl(void)
003e90  b570              PUSH     {r4-r6,lr}
;;;6651   { 
;;;6652   if((load_U>U_OUT_KONTR_MAX)||(load_U<U_OUT_KONTR_MIN))
003e92  4c77              LDR      r4,|L1.16496|
003e94  48ac              LDR      r0,|L1.16712|
;;;6653   	{
;;;6654   	outVoltContrHndlCnt_=0;
;;;6655   	if(outVoltContrHndlCnt<U_OUT_KONTR_DELAY)
003e96  4aad              LDR      r2,|L1.16716|
003e98  f9b41000          LDRSH    r1,[r4,#0]            ;6652  ; load_U
003e9c  f9b06000          LDRSH    r6,[r0,#0]            ;6652  ; U_OUT_KONTR_MAX
003ea0  2500              MOVS     r5,#0                 ;6654
003ea2  f9b20000          LDRSH    r0,[r2,#0]
003ea6  4baa              LDR      r3,|L1.16720|
003ea8  42b1              CMP      r1,r6                 ;6652
003eaa  dc04              BGT      |L1.16054|
003eac  4ea9              LDR      r6,|L1.16724|
003eae  f9b66000          LDRSH    r6,[r6,#0]            ;6652  ; U_OUT_KONTR_MIN
003eb2  42b1              CMP      r1,r6                 ;6652
003eb4  da0f              BGE      |L1.16086|
                  |L1.16054|
003eb6  801d              STRH     r5,[r3,#0]            ;6654
003eb8  49a7              LDR      r1,|L1.16728|
003eba  f9b11000          LDRSH    r1,[r1,#0]  ; U_OUT_KONTR_DELAY
003ebe  4288              CMP      r0,r1
003ec0  da1b              BGE      |L1.16122|
;;;6656   		{
;;;6657   		outVoltContrHndlCnt++;
003ec2  f1000001          ADD      r0,r0,#1
003ec6  b200              SXTH     r0,r0
003ec8  8010              STRH     r0,[r2,#0]
;;;6658   		if(outVoltContrHndlCnt==U_OUT_KONTR_DELAY)
003eca  4288              CMP      r0,r1
003ecc  d115              BNE      |L1.16122|
;;;6659   			{
;;;6660   			avar_uout_hndl(1);
003ece  2001              MOVS     r0,#1
003ed0  f7fffffe          BL       avar_uout_hndl
003ed4  e011              B        |L1.16122|
                  |L1.16086|
;;;6661   			}
;;;6662   		}
;;;6663   	}
;;;6664   else
;;;6665   	{
;;;6666   	if(outVoltContrHndlCnt)
003ed6  b180              CBZ      r0,|L1.16122|
;;;6667   		{
;;;6668   		if(outVoltContrHndlCnt_<5)
003ed8  f9b30000          LDRSH    r0,[r3,#0]  ; outVoltContrHndlCnt_
003edc  2805              CMP      r0,#5
003ede  da0c              BGE      |L1.16122|
;;;6669   			{
;;;6670   			outVoltContrHndlCnt_++;
003ee0  f1000001          ADD      r0,r0,#1
003ee4  b200              SXTH     r0,r0
003ee6  8018              STRH     r0,[r3,#0]
;;;6671   			if(outVoltContrHndlCnt_>=5)
003ee8  2805              CMP      r0,#5
003eea  db06              BLT      |L1.16122|
;;;6672   				{
;;;6673   				outVoltContrHndlCnt=0;
003eec  8015              STRH     r5,[r2,#0]
;;;6674   				if(uout_av)avar_uout_hndl(0);
003eee  489b              LDR      r0,|L1.16732|
003ef0  7800              LDRB     r0,[r0,#0]  ; uout_av
003ef2  b110              CBZ      r0,|L1.16122|
003ef4  2000              MOVS     r0,#0
003ef6  f7fffffe          BL       avar_uout_hndl
                  |L1.16122|
;;;6675   				}
;;;6676   			}
;;;6677   		}
;;;6678   	}
;;;6679   
;;;6680   if (load_U<(USIGN*10)) 
003efa  4899              LDR      r0,|L1.16736|
003efc  f9b41000          LDRSH    r1,[r4,#0]  ; load_U
003f00  f9b00000          LDRSH    r0,[r0,#0]  ; USIGN
003f04  eb000080          ADD      r0,r0,r0,LSL #2
003f08  ebb10f40          CMP      r1,r0,LSL #1
003f0c  da0b              BGE      |L1.16166|
;;;6681   	{
;;;6682   	if(!bSILENT)
003f0e  4895              LDR      r0,|L1.16740|
003f10  6800              LDR      r0,[r0,#0]  ; bSILENT
003f12  2800              CMP      r0,#0
003f14  d107              BNE      |L1.16166|
;;;6683   		{
;;;6684   		mess_send(MESS2RELE_HNDL,PARAM_RELE_BAT_IS_DISCHARGED,1,20);
003f16  e8bd4070          POP      {r4-r6,lr}
003f1a  2314              MOVS     r3,#0x14
003f1c  2201              MOVS     r2,#1
003f1e  2172              MOVS     r1,#0x72
003f20  20d2              MOVS     r0,#0xd2
003f22  f7ffbffe          B.W      mess_send
                  |L1.16166|
;;;6685   		}
;;;6686   
;;;6687   	//bU_BAT2REL_AV_BAT=1;
;;;6688   	}
;;;6689   
;;;6690   
;;;6691   }
003f26  bd70              POP      {r4-r6,pc}
;;;6692   
                          ENDP

                  vent_resurs_hndl PROC
;;;6693   //-----------------------------------------------
;;;6694   void vent_resurs_hndl(void)
003f28  e92d41f0          PUSH     {r4-r8,lr}
;;;6695   {
;;;6696   char i;
;;;6697   char crc_in,crc_eval;
;;;6698   
;;;6699   for(i=0;i<NUMIST;i++)
003f2c  f04f0200          MOV      r2,#0
003f30  4884              LDR      r0,|L1.16708|
;;;6700   	{
;;;6701   	if((bps[i]._buff[7]&0xc0)==0x00)
003f32  4f8d              LDR      r7,|L1.16744|
003f34  f9b06000          LDRSH    r6,[r0,#0]            ;6699
003f38  e06e              B        |L1.16408|
                  |L1.16186|
003f3a  ebc200c2          RSB      r0,r2,r2,LSL #3
003f3e  eb001002          ADD      r0,r0,r2,LSL #4
003f42  eb070080          ADD      r0,r7,r0,LSL #2
003f46  7b41              LDRB     r1,[r0,#0xd]
003f48  098b              LSRS     r3,r1,#6
003f4a  d006              BEQ      |L1.16218|
;;;6702   		{
;;;6703   		bps[i]._vent_resurs_temp[0]=bps[i]._buff[7];
;;;6704   		}
;;;6705   	else if((bps[i]._buff[7]&0xc0)==0x40)
003f4c  2301              MOVS     r3,#1
003f4e  ebb31f91          CMP      r3,r1,LSR #6
003f52  d105              BNE      |L1.16224|
;;;6706   		{
;;;6707   		bps[i]._vent_resurs_temp[1]=bps[i]._buff[7];
003f54  f8801055          STRB     r1,[r0,#0x55]
003f58  e00f              B        |L1.16250|
                  |L1.16218|
003f5a  f8801054          STRB     r1,[r0,#0x54]         ;6703
003f5e  e00c              B        |L1.16250|
                  |L1.16224|
;;;6708   		}
;;;6709   	else if((bps[i]._buff[7]&0xc0)==0x80)
003f60  2302              MOVS     r3,#2
003f62  ebb31f91          CMP      r3,r1,LSR #6
003f66  d102              BNE      |L1.16238|
;;;6710   		{
;;;6711   		bps[i]._vent_resurs_temp[2]=bps[i]._buff[7];
003f68  f8801056          STRB     r1,[r0,#0x56]
003f6c  e005              B        |L1.16250|
                  |L1.16238|
;;;6712   		}
;;;6713   	else if((bps[i]._buff[7]&0xc0)==0xc0)
003f6e  2303              MOVS     r3,#3
003f70  ebb31f91          CMP      r3,r1,LSR #6
003f74  d101              BNE      |L1.16250|
;;;6714   		{
;;;6715   		bps[i]._vent_resurs_temp[3]=bps[i]._buff[7];
003f76  f8801057          STRB     r1,[r0,#0x57]
                  |L1.16250|
;;;6716   		}
;;;6717   	crc_in=0;
;;;6718   	crc_in|=(bps[i]._vent_resurs_temp[0]&0x30)>>4;
003f7a  f8101f54          LDRB     r1,[r0,#0x54]!
003f7e  f3c11401          UBFX     r4,r1,#4,#2
;;;6719   	crc_in|=(bps[i]._vent_resurs_temp[1]&0x30)>>2;
003f82  7843              LDRB     r3,[r0,#1]
003f84  f0030530          AND      r5,r3,#0x30
003f88  ea440595          ORR      r5,r4,r5,LSR #2
;;;6720   	crc_in|=(bps[i]._vent_resurs_temp[2]&0x30);
003f8c  7884              LDRB     r4,[r0,#2]
003f8e  f0040c30          AND      r12,r4,#0x30
003f92  ea4c0c05          ORR      r12,r12,r5
;;;6721   	crc_in|=(bps[i]._vent_resurs_temp[3]&0x30)<<2;
003f96  78c5              LDRB     r5,[r0,#3]
003f98  f1a00054          SUB      r0,r0,#0x54
003f9c  f0050830          AND      r8,r5,#0x30
003fa0  ea4c0c88          ORR      r12,r12,r8,LSL #2
;;;6722   
;;;6723   	crc_eval =bps[i]._vent_resurs_temp[0]&0x0f;
003fa4  f001010f          AND      r1,r1,#0xf
;;;6724   	crc_eval^=bps[i]._vent_resurs_temp[1]&0x0f;
003fa8  f003030f          AND      r3,r3,#0xf
003fac  ea830801          EOR      r8,r3,r1
;;;6725   	crc_eval^=bps[i]._vent_resurs_temp[2]&0x0f;
003fb0  f004040f          AND      r4,r4,#0xf
003fb4  ea840808          EOR      r8,r4,r8
;;;6726   	crc_eval^=bps[i]._vent_resurs_temp[3]&0x0f;
003fb8  f005050f          AND      r5,r5,#0xf
003fbc  ea850808          EOR      r8,r5,r8
;;;6727   
;;;6728   	if(crc_eval==crc_in)
003fc0  45e0              CMP      r8,r12
003fc2  d113              BNE      |L1.16364|
;;;6729   		{
;;;6730   		unsigned short temp_US;
;;;6731   		temp_US=0;
;;;6732   
;;;6733   		temp_US|=(bps[i]._vent_resurs_temp[3]&0x0f);
;;;6734   		temp_US<<=4;
003fc4  ea4f1505          LSL      r5,r5,#4
;;;6735   		temp_US|=(bps[i]._vent_resurs_temp[2]&0x0f);
003fc8  ea440405          ORR      r4,r4,r5
;;;6736   		temp_US<<=4;
003fcc  ea4f1404          LSL      r4,r4,#4
;;;6737   		temp_US|=(bps[i]._vent_resurs_temp[1]&0x0f);
003fd0  ea430304          ORR      r3,r3,r4
;;;6738   		temp_US<<=4;
003fd4  ea4f5303          LSL      r3,r3,#20
003fd8  ea4f4313          LSR      r3,r3,#16
;;;6739   		temp_US|=(bps[i]._vent_resurs_temp[0]&0x0f);
003fdc  ea410103          ORR      r1,r1,r3
;;;6740   
;;;6741   		if(bps[i]._vent_resurs!=temp_US)bps[i]._vent_resurs=temp_US;
003fe0  f8b03058          LDRH     r3,[r0,#0x58]
003fe4  428b              CMP      r3,r1
003fe6  d001              BEQ      |L1.16364|
003fe8  f8a01058          STRH     r1,[r0,#0x58]
                  |L1.16364|
;;;6742   		}
;;;6743   
;;;6744   	if(bps[i]._vent_resurs>TVENTMAX*10)
003fec  495f              LDR      r1,|L1.16748|
003fee  f8b03058          LDRH     r3,[r0,#0x58]
003ff2  f9b11000          LDRSH    r1,[r1,#0]  ; TVENTMAX
003ff6  eb010181          ADD      r1,r1,r1,LSL #2
003ffa  ebb30f41          CMP      r3,r1,LSL #1
003ffe  dd04              BLE      |L1.16394|
;;;6745   		{
;;;6746   		bps[i]._av|=(1<<4);
004000  7841              LDRB     r1,[r0,#1]
004002  f0410110          ORR      r1,r1,#0x10
004006  7041              STRB     r1,[r0,#1]
004008  e003              B        |L1.16402|
                  |L1.16394|
;;;6747   		}
;;;6748   	else bps[i]._av&=~(1<<4);
00400a  7841              LDRB     r1,[r0,#1]
00400c  f0210110          BIC      r1,r1,#0x10
004010  7041              STRB     r1,[r0,#1]
                  |L1.16402|
004012  f1020201          ADD      r2,r2,#1              ;6699
004016  b2d2              UXTB     r2,r2                 ;6699
                  |L1.16408|
004018  42b2              CMP      r2,r6                 ;6699
00401a  db8e              BLT      |L1.16186|
;;;6749   	}
;;;6750   }
00401c  e701              B        |L1.15906|
;;;6751   
                          ENDP

                  vent_hndl PROC
;;;6752   //-----------------------------------------------
;;;6753   void vent_hndl(void)
00401e  e92d4ff0          PUSH     {r4-r11,lr}
;;;6754   {
004022  b087              SUB      sp,sp,#0x1c
;;;6755   if(RELEVENTSIGN==rvsAKB)
004024  4852              LDR      r0,|L1.16752|
;;;6756   	{
;;;6757   	if(vent_stat==0)
004026  4c45              LDR      r4,|L1.16700|
;;;6758   		{
;;;6759   		if	(
;;;6760   			(BAT_IS_ON[0]==bisON)&&((bat[0]._Tb>TVENTON)||(bat[0]._nd))
004028  4952              LDR      r1,|L1.16756|
;;;6761   			||
;;;6762   			(BAT_IS_ON[1]==bisON)&&((bat[1]._Tb>TVENTON)||(bat[1]._nd))
;;;6763   			)
;;;6764   			{
;;;6765   			vent_stat=1;
;;;6766   			}
;;;6767   		}
;;;6768   	else if(vent_stat==1)
;;;6769   		{
;;;6770   		if	(
;;;6771   			((BAT_IS_ON[0]!=bisON)||((BAT_IS_ON[0]==bisON)&&(bat[0]._Tb<TVENTOFF)&&(!bat[0]._nd)))
00402a  4a53              LDR      r2,|L1.16760|
00402c  7800              LDRB     r0,[r0,#0]            ;6755  ; RELEVENTSIGN
00402e  f9943000          LDRSB    r3,[r4,#0]            ;6757
004032  f9b11000          LDRSH    r1,[r1,#0]            ;6760
004036  f9b22000          LDRSH    r2,[r2,#0]
00403a  b140              CBZ      r0,|L1.16462|
;;;6772   			&&
;;;6773   			((BAT_IS_ON[1]!=bisON)||((BAT_IS_ON[1]==bisON)&&(bat[1]._Tb<TVENTOFF)&&(!bat[1]._nd)))
;;;6774   			)
;;;6775   			{
;;;6776   			vent_stat=0;
;;;6777   			}
;;;6778   		}
;;;6779   	}
;;;6780   else if(RELEVENTSIGN==rvsBPS)
00403c  2802              CMP      r0,#2
00403e  d007              BEQ      |L1.16464|
;;;6781   	{
;;;6782   /*	if	(
;;;6783   		(((bps[0]._flags_tm&0x06)||(bps[0]._cnt>=30)))||
;;;6784   		(((bps[1]._flags_tm&0x06)||(bps[1]._cnt>=30))&&(NUMIST>1))||
;;;6785   		(((bps[2]._flags_tm&0x06)||(bps[2]._cnt>=30))&&(NUMIST>2))||
;;;6786   		(((bps[3]._flags_tm&0x06)||(bps[3]._cnt>=30))&&(NUMIST>3))||
;;;6787   		(((bps[4]._flags_tm&0x06)||(bps[4]._cnt>=30))&&(NUMIST>4))||
;;;6788   		(((bps[5]._flags_tm&0x06)||(bps[5]._cnt>=30))&&(NUMIST>5))||
;;;6789   		(((bps[6]._flags_tm&0x06)||(bps[6]._cnt>=30))&&(NUMIST>6))
;;;6790   		)
;;;6791   		{
;;;6792   		vent_stat=1;
;;;6793   		}
;;;6794   	else vent_stat=0;
;;;6795   	*/
;;;6796   
;;;6797   	if	(
;;;6798   		((NUMIST)&&((bps[0]._Ti>TVENTON)||(bps[0]._cnt>=30)))
;;;6799   		||
;;;6800   		((NUMIST>1)&&((bps[1]._Ti>TVENTON)||(bps[1]._cnt>=30)))
;;;6801   		||
;;;6802   		((NUMIST>2)&&((bps[2]._Ti>TVENTON)||(bps[2]._cnt>=30)))
;;;6803   		||
;;;6804   		((NUMIST>3)&&((bps[3]._Ti>TVENTON)||(bps[3]._cnt>=30)))
;;;6805   		||
;;;6806   		((NUMIST>4)&&((bps[4]._Ti>TVENTON)||(bps[4]._cnt>=30)))
;;;6807   		||
;;;6808   		((NUMIST>5)&&((bps[5]._Ti>TVENTON)||(bps[5]._cnt>=30)))
;;;6809   		||
;;;6810   		((NUMIST>6)&&((bps[6]._Ti>TVENTON)||(bps[6]._cnt>=30)))
;;;6811   		||
;;;6812   		((NUMIST>7)&&((bps[7]._Ti>TVENTON)||(bps[7]._cnt>=30)))
;;;6813   		)
;;;6814   		{
;;;6815   		vent_stat=1;
;;;6816   		}
;;;6817   	else if(vent_stat==1)
;;;6818   		{
;;;6819   		if	(
;;;6820   			((!NUMIST)||((NUMIST)&&(bps[0]._Ti<TVENTOFF)&&(bps[0]._cnt<10)))
;;;6821   			&&
;;;6822   			((NUMIST<2)||((NUMIST>=2)&&(bps[1]._Ti<TVENTOFF)&&(bps[1]._cnt<10)))
;;;6823   			&&
;;;6824   			((NUMIST<3)||((NUMIST>=3)&&(bps[2]._Ti<TVENTOFF)&&(bps[2]._cnt<10)))
;;;6825   			&&
;;;6826   			((NUMIST<4)||((NUMIST>=4)&&(bps[3]._Ti<TVENTOFF)&&(bps[3]._cnt<10)))
;;;6827   			&&
;;;6828   			((NUMIST<5)||((NUMIST>=5)&&(bps[4]._Ti<TVENTOFF)&&(bps[4]._cnt<10)))
;;;6829   			&&
;;;6830   			((NUMIST<6)||((NUMIST>=6)&&(bps[5]._Ti<TVENTOFF)&&(bps[5]._cnt<10)))
;;;6831   			&&
;;;6832   			((NUMIST<7)||((NUMIST>=7)&&(bps[6]._Ti<TVENTOFF)&&(bps[6]._cnt<10)))
;;;6833   			&&
;;;6834   			((NUMIST<8)||((NUMIST>=8)&&(bps[7]._Ti<TVENTOFF)&&(bps[7]._cnt<10)))
;;;6835   			)
;;;6836   			{
;;;6837   			vent_stat=0;
;;;6838   			}
;;;6839   		}
;;;6840   	}
;;;6841   else if(RELEVENTSIGN==rvsEXT)
004040  2801              CMP      r0,#1
004042  d006              BEQ      |L1.16466|
;;;6842   	{
;;;6843   	if	(
;;;6844   		((NUMDT)&&((t_ext[0]>TVENTON)||(ND_EXT[0])))
;;;6845   		||
;;;6846   		((NUMDT>1)&&((t_ext[1]>TVENTON)||(ND_EXT[1])))
;;;6847   		||
;;;6848   		((NUMDT>2)&&((t_ext[2]>TVENTON)||(ND_EXT[2])))
;;;6849   		)
;;;6850   		{
;;;6851   		vent_stat=1;
;;;6852   		}
;;;6853   	else if(vent_stat==1)
;;;6854   		{
;;;6855   		if	(
;;;6856   			((!NUMDT)||((NUMDT)&&(t_ext[0]<TVENTOFF)&&(!ND_EXT[0])))
;;;6857   			&&
;;;6858   			((NUMDT<2)||((NUMDT>=2)&&(t_ext[1]<TVENTOFF)&&(!ND_EXT[1])))
;;;6859   			&&
;;;6860   			((NUMDT<3)||((NUMDT>=3)&&(t_ext[2]<TVENTOFF)&&(!ND_EXT[2])))
;;;6861   			)
;;;6862   			{
;;;6863   			vent_stat=0;
;;;6864   			}
;;;6865   		}
;;;6866   	}
;;;6867   else vent_stat=1;
004044  f04f0001          MOV      r0,#1
004048  7020              STRB     r0,[r4,#0]
                  |L1.16458|
;;;6868   }
00404a  b007              ADD      sp,sp,#0x1c
00404c  e096              B        |L1.16764|
                  |L1.16462|
00404e  e097              B        |L1.16768|
                  |L1.16464|
004050  e0cd              B        |L1.16878|
                  |L1.16466|
004052  e190              B        |L1.17270|
                  |L1.16468|
                          DCD      TZNPN
                  |L1.16472|
                          DCD      UVNPN
                  |L1.16476|
                          DCD      speedChIsOn
                  |L1.16480|
                          DCD      speedChrgBlckStat
                  |L1.16484|
                          DCD      speedChTimeCnt
                  |L1.16488|
                          DCD      speedChrgTimeInHour
                  |L1.16492|
                          DCD      speedChrgAvtEn
                  |L1.16496|
                          DCD      load_U
                  |L1.16500|
                          DCD      u_necc
                  |L1.16504|
                          DCD      speedChrgDU
                  |L1.16508|
                          DCD      Ib_ips_termokompensat
                  |L1.16512|
                          DCD      IZMAX
                  |L1.16516|
                          DCD      speedChrgBlckSrc
                  |L1.16520|
                          DCD      speedChrgBlckLog
                  |L1.16524|
                          DCD      ||.bss||+0x400
                  |L1.16528|
                          DCD      speedChrgShowCnt
                  |L1.16532|
004094  20202020          DCB      "                    ",0
004098  20202020
00409c  20202020
0040a0  20202020
0040a4  20202020
0040a8  00      
0040a9  00                DCB      0
0040aa  00                DCB      0
0040ab  00                DCB      0
                  |L1.16556|
0040ac  20202020          DCB      "     ",199,192,207,208,197,217,197,205,"!!!    ",0
0040b0  20c7c0cf
0040b4  d0c5d9c5
0040b8  cd212121
0040bc  20202020
0040c0  00      
0040c1  00                DCB      0
0040c2  00                DCB      0
0040c3  00                DCB      0
                  |L1.16580|
0040c4  20202020          DCB      "       ",199,192,208,223,196,"        ",0
0040c8  202020c7
0040cc  c0d0dfc4
0040d0  20202020
0040d4  20202020
0040d8  00      
0040d9  00                DCB      0
0040da  00                DCB      0
0040db  00                DCB      0
                  |L1.16604|
0040dc  20202020          DCB      "     ",211,209,202,206,208,197,205,205,219,201,"     ",0
0040e0  20d3d1ca
0040e4  ced0c5cd
0040e8  cddbc920
0040ec  20202020
0040f0  00      
0040f1  00                DCB      0
0040f2  00                DCB      0
0040f3  00                DCB      0
                  |L1.16628|
0040f4  20202020          DCB      "    ",231,224,225,235,238,234,232,240,238,226,224,237,"!"
0040f8  e7e0e1eb
0040fc  eeeae8f0
004100  eee2e0ed
004104  21      
004105  20202000          DCB      "   ",0
004109  00                DCB      0
00410a  00                DCB      0
00410b  00                DCB      0
                  |L1.16652|
00410c  20202020          DCB      "       ",231,224,240,255,228,"        ",0
004110  202020e7
004114  e0f0ffe4
004118  20202020
00411c  20202020
004120  00      
004121  00                DCB      0
004122  00                DCB      0
004123  00                DCB      0
                  |L1.16676|
004124  20202020          DCB      "     ",211,241,234,238,240,229,237,237,251,233,"     ",0
004128  20d3f1ea
00412c  eef0e5ed
004130  edfbe920
004134  20202020
004138  00      
004139  00                DCB      0
00413a  00                DCB      0
00413b  00                DCB      0
                  |L1.16700|
                          DCD      ||area_number.21||
                  |L1.16704|
                          DCD      FORVARDBPSCHHOUR
                  |L1.16708|
                          DCD      NUMIST
                  |L1.16712|
                          DCD      U_OUT_KONTR_MAX
                  |L1.16716|
                          DCD      outVoltContrHndlCnt
                  |L1.16720|
                          DCD      outVoltContrHndlCnt_
                  |L1.16724|
                          DCD      U_OUT_KONTR_MIN
                  |L1.16728|
                          DCD      U_OUT_KONTR_DELAY
                  |L1.16732|
                          DCD      uout_av
                  |L1.16736|
                          DCD      USIGN
                  |L1.16740|
                          DCD      bSILENT
                  |L1.16744|
                          DCD      bps
                  |L1.16748|
                          DCD      TVENTMAX
                  |L1.16752|
                          DCD      RELEVENTSIGN
                  |L1.16756|
                          DCD      TVENTON
                  |L1.16760|
                          DCD      TVENTOFF
                  |L1.16764|
00417c  e8bd8ff0          POP      {r4-r11,pc}
                  |L1.16768|
004180  4fa0              LDR      r7,|L1.17412|
004182  f8df8284          LDR      r8,|L1.17416|
004186  f9b7000a          LDRSH    r0,[r7,#0xa]          ;6760
00418a  7b3d              LDRB     r5,[r7,#0xc]          ;6760
00418c  f9b76056          LDRSH    r6,[r7,#0x56]         ;6762
004190  f898c000          LDRB     r12,[r8,#0]           ;6759
004194  f8977058          LDRB     r7,[r7,#0x58]         ;6762
004198  f8988001          LDRB     r8,[r8,#1]            ;6762
00419c  b133              CBZ      r3,|L1.16812|
00419e  2b01              CMP      r3,#1                 ;6768
                  |L1.16800|
0041a0  f47faf53          BNE      |L1.16458|
0041a4  f1bc0f55          CMP      r12,#0x55             ;6770
0041a8  d116              BNE      |L1.16856|
0041aa  e011              B        |L1.16848|
                  |L1.16812|
0041ac  f1bc0f55          CMP      r12,#0x55             ;6759
0041b0  d102              BNE      |L1.16824|
0041b2  4288              CMP      r0,r1                 ;6760
0041b4  dc08              BGT      |L1.16840|
0041b6  b93d              CBNZ     r5,|L1.16840|
                  |L1.16824|
0041b8  f1b80f55          CMP      r8,#0x55              ;6762
0041bc  d1f0              BNE      |L1.16800|
0041be  428e              CMP      r6,r1                 ;6762
0041c0  dc02              BGT      |L1.16840|
0041c2  2f00              CMP      r7,#0                 ;6762
0041c4  f43faf41          BEQ      |L1.16458|
                  |L1.16840|
0041c8  f04f0001          MOV      r0,#1                 ;6765
0041cc  7020              STRB     r0,[r4,#0]            ;6765
                  |L1.16846|
0041ce  e73c              B        |L1.16458|
                  |L1.16848|
0041d0  4290              CMP      r0,r2                 ;6771
0041d2  dafc              BGE      |L1.16846|
0041d4  2d00              CMP      r5,#0                 ;6771
0041d6  d1fa              BNE      |L1.16846|
                  |L1.16856|
0041d8  f1b80f55          CMP      r8,#0x55              ;6773
0041dc  d103              BNE      |L1.16870|
0041de  4296              CMP      r6,r2                 ;6773
0041e0  daf5              BGE      |L1.16846|
0041e2  2f00              CMP      r7,#0                 ;6773
0041e4  d1f3              BNE      |L1.16846|
                  |L1.16870|
0041e6  f04f0000          MOV      r0,#0                 ;6776
0041ea  7020              STRB     r0,[r4,#0]            ;6776
0041ec  e72d              B        |L1.16458|
                  |L1.16878|
0041ee  4e88              LDR      r6,|L1.17424|
0041f0  4886              LDR      r0,|L1.17420|
0041f2  6ab5              LDR      r5,[r6,#0x28]         ;6798
0041f4  f9b00000          LDRSH    r0,[r0,#0]            ;6797  ; NUMIST
0041f8  78f6              LDRB     r6,[r6,#3]            ;6798
0041fa  b118              CBZ      r0,|L1.16900|
0041fc  428d              CMP      r5,r1                 ;6798
0041fe  dc78              BGT      |L1.17138|
004200  2e1e              CMP      r6,#0x1e              ;6798
004202  d276              BCS      |L1.17138|
                  |L1.16900|
004204  f8dfc208          LDR      r12,|L1.17424|
004208  2801              CMP      r0,#1                 ;6800
00420a  f8dc7084          LDR      r7,[r12,#0x84]        ;6800
00420e  f89cc05f          LDRB     r12,[r12,#0x5f]       ;6800
004212  f8cdc018          STR      r12,[sp,#0x18]        ;6800
004216  dd06              BLE      |L1.16934|
004218  428f              CMP      r7,r1                 ;6800
00421a  dc6a              BGT      |L1.17138|
00421c  f8ddc018          LDR      r12,[sp,#0x18]        ;6800
004220  f1bc0f1e          CMP      r12,#0x1e             ;6800
004224  d265              BCS      |L1.17138|
                  |L1.16934|
004226  f8dfc1e8          LDR      r12,|L1.17424|
00422a  2802              CMP      r0,#2                 ;6802
00422c  f8dc80e0          LDR      r8,[r12,#0xe0]        ;6802
004230  f8cd8014          STR      r8,[sp,#0x14]         ;6802
004234  f89cc0bb          LDRB     r12,[r12,#0xbb]       ;6802
004238  f8cdc010          STR      r12,[sp,#0x10]        ;6802
00423c  dd08              BLE      |L1.16976|
00423e  f8ddc014          LDR      r12,[sp,#0x14]        ;6802
004242  458c              CMP      r12,r1                ;6802
004244  dc55              BGT      |L1.17138|
004246  f8ddc010          LDR      r12,[sp,#0x10]        ;6802
00424a  f1bc0f1e          CMP      r12,#0x1e             ;6802
00424e  d250              BCS      |L1.17138|
                  |L1.16976|
004250  f8dfc1bc          LDR      r12,|L1.17424|
004254  2803              CMP      r0,#3                 ;6804
004256  f8dc813c          LDR      r8,[r12,#0x13c]       ;6804
00425a  f8cd800c          STR      r8,[sp,#0xc]          ;6804
00425e  f89cc117          LDRB     r12,[r12,#0x117]      ;6804
004262  f8cdc008          STR      r12,[sp,#8]           ;6804
004266  dd08              BLE      |L1.17018|
004268  f8ddc00c          LDR      r12,[sp,#0xc]         ;6804
00426c  458c              CMP      r12,r1                ;6804
00426e  dc40              BGT      |L1.17138|
004270  f8ddc008          LDR      r12,[sp,#8]           ;6804
004274  f1bc0f1e          CMP      r12,#0x1e             ;6804
004278  d23b              BCS      |L1.17138|
                  |L1.17018|
00427a  f8df8194          LDR      r8,|L1.17424|
00427e  2804              CMP      r0,#4                 ;6806
004280  f8d8c198          LDR      r12,[r8,#0x198]       ;6806
004284  f8988173          LDRB     r8,[r8,#0x173]        ;6806
004288  f8cd8004          STR      r8,[sp,#4]            ;6806
00428c  dd06              BLE      |L1.17052|
00428e  458c              CMP      r12,r1                ;6806
004290  dc2f              BGT      |L1.17138|
004292  f8dd8004          LDR      r8,[sp,#4]            ;6806
004296  f1b80f1e          CMP      r8,#0x1e              ;6806
00429a  d22a              BCS      |L1.17138|
                  |L1.17052|
00429c  f8df9170          LDR      r9,|L1.17424|
0042a0  2805              CMP      r0,#5                 ;6808
0042a2  f8d981f4          LDR      r8,[r9,#0x1f4]        ;6808
0042a6  f89991cf          LDRB     r9,[r9,#0x1cf]        ;6808
0042aa  f8cd9000          STR      r9,[sp,#0]            ;6808
0042ae  dd06              BLE      |L1.17086|
0042b0  4588              CMP      r8,r1                 ;6808
0042b2  dc1e              BGT      |L1.17138|
0042b4  f8dd9000          LDR      r9,[sp,#0]            ;6808
0042b8  f1b90f1e          CMP      r9,#0x1e              ;6808
0042bc  d219              BCS      |L1.17138|
                  |L1.17086|
0042be  f8dfa150          LDR      r10,|L1.17424|
0042c2  2806              CMP      r0,#6                 ;6810
0042c4  f89ae22b          LDRB     lr,[r10,#0x22b]       ;6810
0042c8  f8da9250          LDR      r9,[r10,#0x250]       ;6810
0042cc  dd04              BLE      |L1.17112|
0042ce  4589              CMP      r9,r1                 ;6810
0042d0  dc0f              BGT      |L1.17138|
0042d2  f1be0f1e          CMP      lr,#0x1e              ;6810
0042d6  d20c              BCS      |L1.17138|
                  |L1.17112|
0042d8  f8dfb134          LDR      r11,|L1.17424|
0042dc  2807              CMP      r0,#7                 ;6812
0042de  f8dba2ac          LDR      r10,[r11,#0x2ac]      ;6812
0042e2  f89bb287          LDRB     r11,[r11,#0x287]      ;6812
0042e6  dd08              BLE      |L1.17146|
0042e8  458a              CMP      r10,r1                ;6812
0042ea  dc02              BGT      |L1.17138|
0042ec  f1bb0f1e          CMP      r11,#0x1e             ;6812
0042f0  d303              BCC      |L1.17146|
                  |L1.17138|
0042f2  f04f0001          MOV      r0,#1                 ;6815
0042f6  7020              STRB     r0,[r4,#0]            ;6815
                  |L1.17144|
0042f8  e6a7              B        |L1.16458|
                  |L1.17146|
0042fa  2b01              CMP      r3,#1                 ;6817
0042fc  d1fc              BNE      |L1.17144|
0042fe  b118              CBZ      r0,|L1.17160|
004300  4295              CMP      r5,r2                 ;6820
004302  daf9              BGE      |L1.17144|
004304  2e0a              CMP      r6,#0xa               ;6820
004306  d2f7              BCS      |L1.17144|
                  |L1.17160|
004308  2802              CMP      r0,#2                 ;6822
00430a  db04              BLT      |L1.17174|
00430c  4297              CMP      r7,r2                 ;6822
00430e  daf3              BGE      |L1.17144|
004310  9906              LDR      r1,[sp,#0x18]         ;6822
004312  290a              CMP      r1,#0xa               ;6822
004314  d2f0              BCS      |L1.17144|
                  |L1.17174|
004316  2803              CMP      r0,#3                 ;6824
004318  db05              BLT      |L1.17190|
00431a  9905              LDR      r1,[sp,#0x14]         ;6824
00431c  4291              CMP      r1,r2                 ;6824
00431e  daeb              BGE      |L1.17144|
004320  9904              LDR      r1,[sp,#0x10]         ;6824
004322  290a              CMP      r1,#0xa               ;6824
004324  d2e8              BCS      |L1.17144|
                  |L1.17190|
004326  2804              CMP      r0,#4                 ;6826
004328  db05              BLT      |L1.17206|
00432a  9903              LDR      r1,[sp,#0xc]          ;6826
00432c  4291              CMP      r1,r2                 ;6826
00432e  dae3              BGE      |L1.17144|
004330  9902              LDR      r1,[sp,#8]            ;6826
004332  290a              CMP      r1,#0xa               ;6826
004334  d2e0              BCS      |L1.17144|
                  |L1.17206|
004336  2805              CMP      r0,#5                 ;6828
004338  db04              BLT      |L1.17220|
00433a  4594              CMP      r12,r2                ;6828
00433c  dadc              BGE      |L1.17144|
00433e  9901              LDR      r1,[sp,#4]            ;6828
004340  290a              CMP      r1,#0xa               ;6828
004342  d2d9              BCS      |L1.17144|
                  |L1.17220|
004344  2806              CMP      r0,#6                 ;6830
004346  db04              BLT      |L1.17234|
004348  4590              CMP      r8,r2                 ;6830
00434a  dad5              BGE      |L1.17144|
00434c  9900              LDR      r1,[sp,#0]            ;6830
00434e  290a              CMP      r1,#0xa               ;6830
004350  d2d2              BCS      |L1.17144|
                  |L1.17234|
004352  2807              CMP      r0,#7                 ;6832
004354  db04              BLT      |L1.17248|
004356  4591              CMP      r9,r2                 ;6832
004358  dace              BGE      |L1.17144|
00435a  f1be0f0a          CMP      lr,#0xa               ;6832
00435e  d2cb              BCS      |L1.17144|
                  |L1.17248|
004360  2808              CMP      r0,#8                 ;6834
004362  db04              BLT      |L1.17262|
004364  4592              CMP      r10,r2                ;6834
004366  dac7              BGE      |L1.17144|
004368  f1bb0f0a          CMP      r11,#0xa              ;6834
00436c  d2c4              BCS      |L1.17144|
                  |L1.17262|
00436e  f04f0000          MOV      r0,#0                 ;6837
004372  7020              STRB     r0,[r4,#0]            ;6837
                  |L1.17268|
004374  e669              B        |L1.16458|
                  |L1.17270|
004376  4827              LDR      r0,|L1.17428|
004378  4d27              LDR      r5,|L1.17432|
00437a  4e28              LDR      r6,|L1.17436|
00437c  f9b00000          LDRSH    r0,[r0,#0]            ;6843  ; NUMDT
004380  f9b55000          LDRSH    r5,[r5,#0]            ;6844
004384  6836              LDR      r6,[r6,#0]            ;6844
004386  b110              CBZ      r0,|L1.17294|
004388  428d              CMP      r5,r1                 ;6844
00438a  dc1d              BGT      |L1.17352|
00438c  b9e6              CBNZ     r6,|L1.17352|
                  |L1.17294|
00438e  4f22              LDR      r7,|L1.17432|
004390  f8dfc088          LDR      r12,|L1.17436|
004394  2801              CMP      r0,#1                 ;6846
004396  f9b77002          LDRSH    r7,[r7,#2]            ;6846
00439a  f8dcc004          LDR      r12,[r12,#4]          ;6846
00439e  dd04              BLE      |L1.17322|
0043a0  428f              CMP      r7,r1                 ;6846
0043a2  dc11              BGT      |L1.17352|
0043a4  f1bc0f00          CMP      r12,#0                ;6846
0043a8  d10e              BNE      |L1.17352|
                  |L1.17322|
0043aa  f8df806c          LDR      r8,|L1.17432|
0043ae  f8df906c          LDR      r9,|L1.17436|
0043b2  2802              CMP      r0,#2                 ;6848
0043b4  f9b88004          LDRSH    r8,[r8,#4]            ;6848
0043b8  f8d99008          LDR      r9,[r9,#8]            ;6848
0043bc  dd08              BLE      |L1.17360|
0043be  4588              CMP      r8,r1                 ;6848
0043c0  dc02              BGT      |L1.17352|
0043c2  f1b90f00          CMP      r9,#0                 ;6848
0043c6  d003              BEQ      |L1.17360|
                  |L1.17352|
0043c8  f04f0001          MOV      r0,#1                 ;6851
0043cc  7020              STRB     r0,[r4,#0]            ;6851
0043ce  e63c              B        |L1.16458|
                  |L1.17360|
0043d0  2b01              CMP      r3,#1                 ;6853
0043d2  d191              BNE      |L1.17144|
0043d4  b118              CBZ      r0,|L1.17374|
0043d6  4295              CMP      r5,r2                 ;6856
0043d8  da8e              BGE      |L1.17144|
0043da  2e00              CMP      r6,#0                 ;6856
0043dc  d18c              BNE      |L1.17144|
                  |L1.17374|
0043de  2802              CMP      r0,#2                 ;6858
0043e0  db04              BLT      |L1.17388|
0043e2  4297              CMP      r7,r2                 ;6858
0043e4  da88              BGE      |L1.17144|
0043e6  f1bc0f00          CMP      r12,#0                ;6858
0043ea  d185              BNE      |L1.17144|
                  |L1.17388|
0043ec  2803              CMP      r0,#3                 ;6860
0043ee  db04              BLT      |L1.17402|
0043f0  4590              CMP      r8,r2                 ;6860
0043f2  dabf              BGE      |L1.17268|
0043f4  f1b90f00          CMP      r9,#0                 ;6860
0043f8  d1bc              BNE      |L1.17268|
                  |L1.17402|
0043fa  f04f0000          MOV      r0,#0                 ;6863
0043fe  7020              STRB     r0,[r4,#0]            ;6863
004400  e623              B        |L1.16458|
;;;6869   
                          ENDP

004402  0000              DCW      0x0000
                  |L1.17412|
                          DCD      bat
                  |L1.17416|
                          DCD      BAT_IS_ON
                  |L1.17420|
                          DCD      NUMIST
                  |L1.17424|
                          DCD      bps
                  |L1.17428|
                          DCD      NUMDT
                  |L1.17432|
                          DCD      t_ext
                  |L1.17436|
                          DCD      ND_EXT

                          AREA ||area_number.2||, CODE, READONLY, ALIGN=2

                          EXPORTAS ||area_number.2||, ||.text||
                  samokalibr_init PROC
;;;223    //-----------------------------------------------
;;;224    void ke_start(char in)
000000  4902              LDR      r1,|L2.12|
;;;225    {          
000002  f24060f9          MOV      r0,#0x6f9
;;;226    ke_start_stat=(enum_ke_start_stat)0;		 
000006  8748              STRH     r0,[r1,#0x3a]
000008  4770              BX       lr
;;;227    
;;;228    if(spc_stat==spcVZ)ke_start_stat=kssNOT_VZ;
;;;229    else if(BAT_IS_ON[in]!=bisON)ke_start_stat=kssNOT_BAT;
;;;230    else if(bat[in]._av&(1<<0))ke_start_stat=kssNOT_BAT_AV;
;;;231    else if(bat[in]._temper_stat&(1<<1))ke_start_stat=kssNOT_BAT_AV_T;
;;;232    else if(bat[in]._av&(1<<1))ke_start_stat=kssNOT_BAT_AV_ASS;
;;;233    else if(bat[in]._Ib>IKB)ke_start_stat=kssNOT_BAT_ZAR;
;;;234    else if(bat[in]._Ib<-IKB)ke_start_stat=kssNOT_BAT_RAZR;
;;;235    else if((spc_stat==spcKE)&&(spc_bat==0))ke_start_stat=kssNOT_KE1;
;;;236    else if((spc_stat==spcKE)&&(spc_bat==1))ke_start_stat=kssNOT_KE2;
;;;237    else 
;;;238    	{
;;;239    
;;;240    	ke_start_stat=kssYES;
;;;241    
;;;242    	spc_stat=spcKE;
;;;243    	__ee_spc_stat=spcKE;
;;;244    	lc640_write_int(EE_SPC_STAT,__ee_spc_stat);
;;;245    	
;;;246    	spc_bat=in;
;;;247    	__ee_spc_bat=in;
;;;248    	lc640_write_int(EE_SPC_BAT,__ee_spc_bat);
;;;249    
;;;250    	bat[in]._zar_cnt_ke=0;
;;;251    	lc640_write_int(ADR_EE_BAT_ZAR_CNT_KE[in],0);
;;;252    	
;;;253    	spc_phase=0;
;;;254    	__ee_spc_phase=0;
;;;255    	lc640_write_int(EE_SPC_PHASE,__ee_spc_phase);
;;;256    
;;;257    	//ke_mem_hndl(in,lc640_read_int(ADR_EE_BAT_ZAR_CNT_KE[spc_bat]));
;;;258    
;;;259    		{					
;;;260    		signed short temp_temp;
;;;261    		signed char temp;
;;;262    		temp_temp=bat[in]._u_old[((bat_u_old_cnt+1)&0x07)]; 
;;;263    		    
;;;264    		temp=LPC_RTC->YEAR;
;;;265    		gran_char(&temp,1,99);
;;;266    		*((char*)(&(ke_date[0])))=temp;
;;;267    			
;;;268    		temp=LPC_RTC->MONTH;
;;;269    		gran_char(&temp,1,12);
;;;270    		*(((char*)(&(ke_date[0])))+1)=temp;
;;;271    		
;;;272    		temp=LPC_RTC->DOM;
;;;273    		gran_char(&temp,1,31);
;;;274    		*(((char*)(&(ke_date[0])))+2)=temp;			
;;;275    				
;;;276    		*(((char*)(&(ke_date[0])))+3)=*((char*)&temp_temp);
;;;277    		lc640_write_long(EE_SPC_KE_DATE0,ke_date[0]);
;;;278    
;;;279    		temp=LPC_RTC->HOUR;
;;;280    		gran_char(&temp,0,23);
;;;281    		*((char*)(&(ke_date[1])))=temp;
;;;282                   
;;;283    		temp=LPC_RTC->MIN;
;;;284    		gran_char(&temp,0,59);
;;;285    		*(((char*)(&(ke_date[1])))+1)=temp;
;;;286    	          
;;;287    		temp=LPC_RTC->SEC;
;;;288    		gran_char(&temp,0,59);
;;;289    		*(((char*)(&(ke_date[1])))+2)=temp;
;;;290    			
;;;291    		*(((char*)(&(ke_date[1])))+3)=*(((char*)&temp_temp)+1);
;;;292    		lc640_write_long(EE_SPC_KE_DATE1,ke_date[1]);
;;;293    		}
;;;294    
;;;295    	}
;;;296    }
;;;297    
                          ENDP

00000a  0000              DCW      0x0000
                  |L2.12|
                          DCD      ||area_number.21||

                          AREA ||area_number.3||, CODE, READONLY, ALIGN=2

                          EXPORTAS ||area_number.3||, ||.text||
                  adc_drv6 PROC
;;;223    //-----------------------------------------------
;;;224    void ke_start(char in)
000000  e92d41f0          PUSH     {r4-r8,lr}
;;;225    {          
000004  4c80              LDR      r4,|L3.520|
;;;226    ke_start_stat=(enum_ke_start_stat)0;		 
000006  8860              LDRH     r0,[r4,#2]  ; adc_self_ch_buff
000008  8821              LDRH     r1,[r4,#0]  ; adc_self_ch_buff
00000a  1a40              SUBS     r0,r0,r1
00000c  b200              SXTH     r0,r0
;;;227    
;;;228    if(spc_stat==spcVZ)ke_start_stat=kssNOT_VZ;
00000e  f7fffffe          BL       abs_pal
000012  1da5              ADDS     r5,r4,#6
000014  8028              STRH     r0,[r5,#0]
000016  88a0              LDRH     r0,[r4,#4]  ; adc_self_ch_buff
;;;229    else if(BAT_IS_ON[in]!=bisON)ke_start_stat=kssNOT_BAT;
000018  8861              LDRH     r1,[r4,#2]  ; adc_self_ch_buff
00001a  1a40              SUBS     r0,r0,r1
00001c  b200              SXTH     r0,r0
00001e  f7fffffe          BL       abs_pal
000022  8068              STRH     r0,[r5,#2]
000024  88a0              LDRH     r0,[r4,#4]  ; adc_self_ch_buff
;;;230    else if(bat[in]._av&(1<<0))ke_start_stat=kssNOT_BAT_AV;
;;;231    else if(bat[in]._temper_stat&(1<<1))ke_start_stat=kssNOT_BAT_AV_T;
;;;232    else if(bat[in]._av&(1<<1))ke_start_stat=kssNOT_BAT_AV_ASS;
;;;233    else if(bat[in]._Ib>IKB)ke_start_stat=kssNOT_BAT_ZAR;
;;;234    else if(bat[in]._Ib<-IKB)ke_start_stat=kssNOT_BAT_RAZR;
;;;235    else if((spc_stat==spcKE)&&(spc_bat==0))ke_start_stat=kssNOT_KE1;
;;;236    else if((spc_stat==spcKE)&&(spc_bat==1))ke_start_stat=kssNOT_KE2;
;;;237    else 
;;;238    	{
;;;239    
;;;240    	ke_start_stat=kssYES;
;;;241    
;;;242    	spc_stat=spcKE;
;;;243    	__ee_spc_stat=spcKE;
;;;244    	lc640_write_int(EE_SPC_STAT,__ee_spc_stat);
;;;245    	
;;;246    	spc_bat=in;
;;;247    	__ee_spc_bat=in;
;;;248    	lc640_write_int(EE_SPC_BAT,__ee_spc_bat);
;;;249    
;;;250    	bat[in]._zar_cnt_ke=0;
;;;251    	lc640_write_int(ADR_EE_BAT_ZAR_CNT_KE[in],0);
;;;252    	
;;;253    	spc_phase=0;
;;;254    	__ee_spc_phase=0;
;;;255    	lc640_write_int(EE_SPC_PHASE,__ee_spc_phase);
;;;256    
;;;257    	//ke_mem_hndl(in,lc640_read_int(ADR_EE_BAT_ZAR_CNT_KE[spc_bat]));
;;;258    
;;;259    		{					
;;;260    		signed short temp_temp;
;;;261    		signed char temp;
;;;262    		temp_temp=bat[in]._u_old[((bat_u_old_cnt+1)&0x07)]; 
;;;263    		    
;;;264    		temp=LPC_RTC->YEAR;
;;;265    		gran_char(&temp,1,99);
;;;266    		*((char*)(&(ke_date[0])))=temp;
;;;267    			
;;;268    		temp=LPC_RTC->MONTH;
;;;269    		gran_char(&temp,1,12);
;;;270    		*(((char*)(&(ke_date[0])))+1)=temp;
;;;271    		
;;;272    		temp=LPC_RTC->DOM;
;;;273    		gran_char(&temp,1,31);
;;;274    		*(((char*)(&(ke_date[0])))+2)=temp;			
;;;275    				
;;;276    		*(((char*)(&(ke_date[0])))+3)=*((char*)&temp_temp);
;;;277    		lc640_write_long(EE_SPC_KE_DATE0,ke_date[0]);
;;;278    
;;;279    		temp=LPC_RTC->HOUR;
;;;280    		gran_char(&temp,0,23);
;;;281    		*((char*)(&(ke_date[1])))=temp;
;;;282                   
;;;283    		temp=LPC_RTC->MIN;
;;;284    		gran_char(&temp,0,59);
;;;285    		*(((char*)(&(ke_date[1])))+1)=temp;
;;;286    	          
;;;287    		temp=LPC_RTC->SEC;
;;;288    		gran_char(&temp,0,59);
;;;289    		*(((char*)(&(ke_date[1])))+2)=temp;
;;;290    			
;;;291    		*(((char*)(&(ke_date[1])))+3)=*(((char*)&temp_temp)+1);
;;;292    		lc640_write_long(EE_SPC_KE_DATE1,ke_date[1]);
;;;293    		}
;;;294    
;;;295    	}
;;;296    }
000026  8821              LDRH     r1,[r4,#0]  ; adc_self_ch_buff
000028  1a40              SUBS     r0,r0,r1
00002a  b200              SXTH     r0,r0                 ;228
00002c  f7fffffe          BL       abs_pal
000030  80a8              STRH     r0,[r5,#4]            ;230
000032  f44f7196          MOV      r1,#0x12c             ;230
000036  f1a40696          SUB      r6,r4,#0x96           ;230
00003a  4288              CMP      r0,r1                 ;230
00003c  da02              BGE      |L3.68|
00003e  88a0              LDRH     r0,[r4,#4]            ;230  ; adc_self_ch_buff
000040  84f0              STRH     r0,[r6,#0x26]         ;230
000042  e00c              B        |L3.94|
                  |L3.68|
000044  f9b50002          LDRSH    r0,[r5,#2]            ;230  ; adc_self_ch_disp
000048  4288              CMP      r0,r1                 ;230
00004a  da02              BGE      |L3.82|
00004c  8860              LDRH     r0,[r4,#2]            ;231  ; adc_self_ch_buff
00004e  84f0              STRH     r0,[r6,#0x26]         ;231
000050  e005              B        |L3.94|
                  |L3.82|
000052  f9b50000          LDRSH    r0,[r5,#0]            ;231  ; adc_self_ch_disp
000056  4288              CMP      r0,r1                 ;231
000058  da01              BGE      |L3.94|
00005a  8820              LDRH     r0,[r4,#0]  ; adc_self_ch_buff
00005c  84f0              STRH     r0,[r6,#0x26]         ;232
                  |L3.94|
00005e  78b7              LDRB     r7,[r6,#2]            ;232  ; adc_ch_net
000060  2200              MOVS     r2,#0                 ;232
000062  b3f7              CBZ      r7,|L3.226|
000064  7973              LDRB     r3,[r6,#5]            ;232  ; adc_window_flag
000066  4869              LDR      r0,|L3.524|
000068  b18b              CBZ      r3,|L3.142|
00006a  f9b61026          LDRSH    r1,[r6,#0x26]         ;233  ; adc_result
00006e  6804              LDR      r4,[r0,#0]            ;233  ; main_power_buffer
000070  eb0404a1          ADD      r4,r4,r1,ASR #2       ;233
000074  6004              STR      r4,[r0,#0]            ;233  ; main_power_buffer
000076  6844              LDR      r4,[r0,#4]            ;233  ; main_power_buffer
000078  eb0404a1          ADD      r4,r4,r1,ASR #2       ;233
00007c  6044              STR      r4,[r0,#4]  ; main_power_buffer
00007e  6884              LDR      r4,[r0,#8]            ;234  ; main_power_buffer
000080  eb0404a1          ADD      r4,r4,r1,ASR #2       ;234
000084  6084              STR      r4,[r0,#8]            ;234  ; main_power_buffer
000086  68c4              LDR      r4,[r0,#0xc]          ;234  ; main_power_buffer
000088  eb0401a1          ADD      r1,r4,r1,ASR #2       ;234
00008c  60c1              STR      r1,[r0,#0xc]          ;226  ; main_power_buffer
                  |L3.142|
00008e  f9b61026          LDRSH    r1,[r6,#0x26]         ;235  ; adc_result
000092  2964              CMP      r1,#0x64              ;235
000094  da04              BGE      |L3.160|
000096  8d71              LDRH     r1,[r6,#0x2a]         ;236  ; adc_zero_cnt
000098  f1010101          ADD      r1,r1,#1              ;236
00009c  8571              STRH     r1,[r6,#0x2a]         ;235
00009e  e000              B        |L3.162|
                  |L3.160|
0000a0  8572              STRH     r2,[r6,#0x2a]         ;235
                  |L3.162|
0000a2  f9b6402a          LDRSH    r4,[r6,#0x2a]  ; adc_zero_cnt
0000a6  f44f61fa          MOV      r1,#0x7d0             ;236
0000aa  428c              CMP      r4,r1                 ;240
0000ac  db05              BLT      |L3.186|
0000ae  8571              STRH     r1,[r6,#0x2a]         ;242
0000b0  6002              STR      r2,[r0,#0]            ;243  ; main_power_buffer
0000b2  6042              STR      r2,[r0,#4]            ;243  ; main_power_buffer
0000b4  6082              STR      r2,[r0,#8]            ;244  ; main_power_buffer
0000b6  60c2              STR      r2,[r0,#0xc]          ;244  ; main_power_buffer
0000b8  84b2              STRH     r2,[r6,#0x24]         ;244
                  |L3.186|
0000ba  8d71              LDRH     r1,[r6,#0x2a]         ;244  ; adc_zero_cnt
0000bc  2905              CMP      r1,#5                 ;244
0000be  d14f              BNE      |L3.352|
0000c0  b1bb              CBZ      r3,|L3.242|
0000c2  8d31              LDRH     r1,[r6,#0x28]         ;247  ; adc_gorb_cnt
0000c4  f1010101          ADD      r1,r1,#1              ;248
0000c8  b209              SXTH     r1,r1                 ;248
0000ca  8531              STRH     r1,[r6,#0x28]         ;248
0000cc  f5b17f00          CMP      r1,#0x200             ;248
0000d0  db00              BLT      |L3.212|
0000d2  8532              STRH     r2,[r6,#0x28]         ;251
                  |L3.212|
0000d4  f9b61028          LDRSH    r1,[r6,#0x28]         ;251  ; adc_gorb_cnt
0000d8  064c              LSLS     r4,r1,#25             ;251
0000da  d10a              BNE      |L3.242|
0000dc  ea4f11e1          ASR      r1,r1,#7              ;253
0000e0  e000              B        |L3.228|
                  |L3.226|
0000e2  e015              B        |L3.272|
                  |L3.228|
0000e4  f8504021          LDR      r4,[r0,r1,LSL #2]     ;255
0000e8  ea4f2424          ASR      r4,r4,#8              ;255
0000ec  84b4              STRH     r4,[r6,#0x24]         ;262
0000ee  f8402021          STR      r2,[r0,r1,LSL #2]     ;262
                  |L3.242|
0000f2  f9b6002c          LDRSH    r0,[r6,#0x2c]         ;262  ; adc_window_cnt
0000f6  2896              CMP      r0,#0x96              ;262
0000f8  dd01              BLE      |L3.254|
0000fa  b103              CBZ      r3,|L3.254|
0000fc  7172              STRB     r2,[r6,#5]            ;262
                  |L3.254|
0000fe  381f              SUBS     r0,r0,#0x1f           ;262
000100  2827              CMP      r0,#0x27              ;264
000102  d22d              BCS      |L3.352|
000104  7970              LDRB     r0,[r6,#5]            ;264  ; adc_window_flag
000106  bb58              CBNZ     r0,|L3.352|
000108  f04f0001          MOV      r0,#1                 ;265
00010c  7170              STRB     r0,[r6,#5]            ;265
00010e  e027              B        |L3.352|
                  |L3.272|
000110  483f              LDR      r0,|L3.528|
000112  78f5              LDRB     r5,[r6,#3]            ;265  ; adc_ch
000114  7933              LDRB     r3,[r6,#4]            ;266  ; adc_ch_cnt
000116  eb001485          ADD      r4,r0,r5,LSL #6       ;266
00011a  f9b61026          LDRSH    r1,[r6,#0x26]         ;266  ; adc_result
00011e  f8441023          STR      r1,[r4,r3,LSL #2]     ;268
000122  0798              LSLS     r0,r3,#30             ;269
000124  d10f              BNE      |L3.326|
000126  4601              MOV      r1,r0                 ;269
                  |L3.296|
000128  f854c020          LDR      r12,[r4,r0,LSL #2]    ;269
00012c  4461              ADD      r1,r1,r12             ;270
00012e  f1000001          ADD      r0,r0,#1              ;270
000132  b2c0              UXTB     r0,r0                 ;272
000134  2810              CMP      r0,#0x10              ;272
000136  d3f7              BCC      |L3.296|
000138  ea4f1021          ASR      r0,r1,#4              ;273
00013c  4933              LDR      r1,|L3.524|
00013e  f1a10120          SUB      r1,r1,#0x20           ;273
000142  f8210015          STRH     r0,[r1,r5,LSL #1]     ;274
                  |L3.326|
000146  1c6d              ADDS     r5,r5,#1              ;276
000148  b2e8              UXTB     r0,r5                 ;276
00014a  70f0              STRB     r0,[r6,#3]            ;276
00014c  2810              CMP      r0,#0x10              ;277
00014e  d307              BCC      |L3.352|
000150  70f2              STRB     r2,[r6,#3]            ;277
000152  f1030301          ADD      r3,r3,#1              ;277
000156  b2d8              UXTB     r0,r3                 ;279
000158  7130              STRB     r0,[r6,#4]            ;279
00015a  2810              CMP      r0,#0x10              ;280
00015c  d300              BCC      |L3.352|
00015e  7132              STRB     r2,[r6,#4]            ;280
                  |L3.352|
000160  7072              STRB     r2,[r6,#1]            ;280
000162  f1070701          ADD      r7,r7,#1              ;280
000166  f0070001          AND      r0,r7,#1              ;281
00016a  70b0              STRB     r0,[r6,#2]            ;283
00016c  4a29              LDR      r2,|L3.532|
00016e  b130              CBZ      r0,|L3.382|
000170  6810              LDR      r0,[r2,#0]            ;284
000172  f02000ff          BIC      r0,r0,#0xff           ;284
000176  f1000004          ADD      r0,r0,#4              ;284
00017a  6010              STR      r0,[r2,#0]            ;285
00017c  e03d              B        |L3.506|
                  |L3.382|
00017e  78f1              LDRB     r1,[r6,#3]            ;287  ; adc_ch
000180  0708              LSLS     r0,r1,#28             ;287
000182  d406              BMI      |L3.402|
000184  6810              LDR      r0,[r2,#0]            ;288
000186  f02000ff          BIC      r0,r0,#0xff           ;288
00018a  f1000001          ADD      r0,r0,#1              ;288
00018e  6010              STR      r0,[r2,#0]            ;289
000190  e005              B        |L3.414|
                  |L3.402|
000192  6810              LDR      r0,[r2,#0]            ;291
000194  f02000ff          BIC      r0,r0,#0xff           ;291
000198  f1000002          ADD      r0,r0,#2              ;292
00019c  6010              STR      r0,[r2,#0]            ;292
                  |L3.414|
00019e  481e              LDR      r0,|L3.536|
0001a0  6803              LDR      r3,[r0,#0]            ;292
0001a2  f0435380          ORR      r3,r3,#0x10000000
0001a6  6003              STR      r3,[r0,#0]            ;236
0001a8  6a03              LDR      r3,[r0,#0x20]         ;236
0001aa  f0434380          ORR      r3,r3,#0x40000000     ;236
0001ae  6203              STR      r3,[r0,#0x20]
0001b0  6e03              LDR      r3,[r0,#0x60]
0001b2  f0436380          ORR      r3,r3,#0x4000000
0001b6  6603              STR      r3,[r0,#0x60]
0001b8  07cb              LSLS     r3,r1,#31
0001ba  d00a              BEQ      |L3.466|
0001bc  6943              LDR      r3,[r0,#0x14]
0001be  f0435380          ORR      r3,r3,#0x10000000
0001c2  6143              STR      r3,[r0,#0x14]
                  |L3.452|
0001c4  078b              LSLS     r3,r1,#30
0001c6  d409              BMI      |L3.476|
0001c8  6b43              LDR      r3,[r0,#0x34]
0001ca  f0234380          BIC      r3,r3,#0x40000000
0001ce  6343              STR      r3,[r0,#0x34]
0001d0  e008              B        |L3.484|
                  |L3.466|
0001d2  6943              LDR      r3,[r0,#0x14]
0001d4  f0235380          BIC      r3,r3,#0x10000000
0001d8  6143              STR      r3,[r0,#0x14]
0001da  e7f3              B        |L3.452|
                  |L3.476|
0001dc  6b43              LDR      r3,[r0,#0x34]
0001de  f0434380          ORR      r3,r3,#0x40000000
0001e2  6343              STR      r3,[r0,#0x34]
                  |L3.484|
0001e4  0749              LSLS     r1,r1,#29
0001e6  d404              BMI      |L3.498|
0001e8  6f41              LDR      r1,[r0,#0x74]
0001ea  f0216180          BIC      r1,r1,#0x4000000
0001ee  6741              STR      r1,[r0,#0x74]
0001f0  e003              B        |L3.506|
                  |L3.498|
0001f2  6f41              LDR      r1,[r0,#0x74]
0001f4  f0416180          ORR      r1,r1,#0x4000000
0001f8  6741              STR      r1,[r0,#0x74]
                  |L3.506|
0001fa  6810              LDR      r0,[r2,#0]
0001fc  f0407080          ORR      r0,r0,#0x1000000
000200  6010              STR      r0,[r2,#0]
000202  e8bd81f0          POP      {r4-r8,pc}
;;;297    
                          ENDP

000206  0000              DCW      0x0000
                  |L3.520|
                          DCD      ||area_number.21||+0x96
                  |L3.524|
                          DCD      ||.bss||+0x420
                  |L3.528|
                          DCD      ||.bss||
                  |L3.532|
                          DCD      0x40034000
                  |L3.536|
                          DCD      0x2009c000

                          AREA ||area_number.4||, CODE, READONLY, ALIGN=2

                          EXPORTAS ||area_number.4||, ||.text||
                  inv_drv PROC
;;;223    //-----------------------------------------------
;;;224    void ke_start(char in)
000000  b570              PUSH     {r4-r6,lr}
;;;225    {          
000002  4604              MOV      r4,r0
000004  f04f0207          MOV      r2,#7
;;;226    ke_start_stat=(enum_ke_start_stat)0;		 
000008  f04f0101          MOV      r1,#1
00000c  48a4              LDR      r0,|L4.672|
;;;227    
;;;228    if(spc_stat==spcVZ)ke_start_stat=kssNOT_VZ;
00000e  f7fffffe          BL       gran_char
000012  48a4              LDR      r0,|L4.676|
000014  eb040144          ADD      r1,r4,r4,LSL #1
;;;229    else if(BAT_IS_ON[in]!=bisON)ke_start_stat=kssNOT_BAT;
000018  eb001541          ADD      r5,r0,r1,LSL #5
00001c  f8950047          LDRB     r0,[r5,#0x47]
000020  f8951046          LDRB     r1,[r5,#0x46]
000024  ea800001          EOR      r0,r0,r1
;;;230    else if(bat[in]._av&(1<<0))ke_start_stat=kssNOT_BAT_AV;
;;;231    else if(bat[in]._temper_stat&(1<<1))ke_start_stat=kssNOT_BAT_AV_T;
;;;232    else if(bat[in]._av&(1<<1))ke_start_stat=kssNOT_BAT_AV_ASS;
;;;233    else if(bat[in]._Ib>IKB)ke_start_stat=kssNOT_BAT_ZAR;
;;;234    else if(bat[in]._Ib<-IKB)ke_start_stat=kssNOT_BAT_RAZR;
;;;235    else if((spc_stat==spcKE)&&(spc_bat==0))ke_start_stat=kssNOT_KE1;
;;;236    else if((spc_stat==spcKE)&&(spc_bat==1))ke_start_stat=kssNOT_KE2;
;;;237    else 
;;;238    	{
;;;239    
;;;240    	ke_start_stat=kssYES;
;;;241    
;;;242    	spc_stat=spcKE;
;;;243    	__ee_spc_stat=spcKE;
;;;244    	lc640_write_int(EE_SPC_STAT,__ee_spc_stat);
;;;245    	
;;;246    	spc_bat=in;
;;;247    	__ee_spc_bat=in;
;;;248    	lc640_write_int(EE_SPC_BAT,__ee_spc_bat);
;;;249    
;;;250    	bat[in]._zar_cnt_ke=0;
;;;251    	lc640_write_int(ADR_EE_BAT_ZAR_CNT_KE[in],0);
;;;252    	
;;;253    	spc_phase=0;
;;;254    	__ee_spc_phase=0;
;;;255    	lc640_write_int(EE_SPC_PHASE,__ee_spc_phase);
;;;256    
;;;257    	//ke_mem_hndl(in,lc640_read_int(ADR_EE_BAT_ZAR_CNT_KE[spc_bat]));
;;;258    
;;;259    		{					
;;;260    		signed short temp_temp;
;;;261    		signed char temp;
;;;262    		temp_temp=bat[in]._u_old[((bat_u_old_cnt+1)&0x07)]; 
;;;263    		    
;;;264    		temp=LPC_RTC->YEAR;
;;;265    		gran_char(&temp,1,99);
;;;266    		*((char*)(&(ke_date[0])))=temp;
;;;267    			
;;;268    		temp=LPC_RTC->MONTH;
;;;269    		gran_char(&temp,1,12);
;;;270    		*(((char*)(&(ke_date[0])))+1)=temp;
;;;271    		
;;;272    		temp=LPC_RTC->DOM;
;;;273    		gran_char(&temp,1,31);
;;;274    		*(((char*)(&(ke_date[0])))+2)=temp;			
;;;275    				
;;;276    		*(((char*)(&(ke_date[0])))+3)=*((char*)&temp_temp);
;;;277    		lc640_write_long(EE_SPC_KE_DATE0,ke_date[0]);
;;;278    
;;;279    		temp=LPC_RTC->HOUR;
;;;280    		gran_char(&temp,0,23);
;;;281    		*((char*)(&(ke_date[1])))=temp;
;;;282                   
;;;283    		temp=LPC_RTC->MIN;
;;;284    		gran_char(&temp,0,59);
;;;285    		*(((char*)(&(ke_date[1])))+1)=temp;
;;;286    	          
;;;287    		temp=LPC_RTC->SEC;
;;;288    		gran_char(&temp,0,59);
;;;289    		*(((char*)(&(ke_date[1])))+2)=temp;
;;;290    			
;;;291    		*(((char*)(&(ke_date[1])))+3)=*(((char*)&temp_temp)+1);
;;;292    		lc640_write_long(EE_SPC_KE_DATE1,ke_date[1]);
;;;293    		}
;;;294    
;;;295    	}
;;;296    }
000028  4a9f              LDR      r2,|L4.680|
00002a  b100              CBZ      r0,|L4.46|
00002c  7050              STRB     r0,[r2,#1]
                  |L4.46|
00002e  ea010100          AND      r1,r1,r0              ;230
000032  b101              CBZ      r1,|L4.54|
000034  7091              STRB     r1,[r2,#2]            ;230
                  |L4.54|
000036  ea000301          AND      r3,r0,r1              ;230
00003a  07db              LSLS     r3,r3,#31             ;230
00003c  d027              BEQ      |L4.142|
00003e  78d0              LDRB     r0,[r2,#3]            ;230  ; plazma_inv
000040  f1000001          ADD      r0,r0,#1              ;230
000044  70d0              STRB     r0,[r2,#3]            ;230
000046  b134              CBZ      r4,|L4.86|
000048  2c01              CMP      r4,#1                 ;230
00004a  d00b              BEQ      |L4.100|
00004c  2c02              CMP      r4,#2                 ;231
00004e  d010              BEQ      |L4.114|
000050  2c03              CMP      r4,#3                 ;231
000052  d015              BEQ      |L4.128|
000054  e120              B        |L4.664|
                  |L4.86|
000056  2301              MOVS     r3,#1                 ;231
000058  461a              MOV      r2,r3                 ;231
00005a  210e              MOVS     r1,#0xe
00005c  a093              ADR      r0,|L4.684|
00005e  f7fffffe          BL       snmp_trap_send
000062  e119              B        |L4.664|
                  |L4.100|
000064  2301              MOVS     r3,#1                 ;232
000066  2202              MOVS     r2,#2
000068  210e              MOVS     r1,#0xe               ;233
00006a  a097              ADR      r0,|L4.712|
00006c  f7fffffe          BL       snmp_trap_send
000070  e112              B        |L4.664|
                  |L4.114|
000072  2301              MOVS     r3,#1                 ;233
000074  2203              MOVS     r2,#3                 ;233
000076  210e              MOVS     r1,#0xe               ;233
000078  a09a              ADR      r0,|L4.740|
00007a  f7fffffe          BL       snmp_trap_send
00007e  e10b              B        |L4.664|
                  |L4.128|
000080  2301              MOVS     r3,#1                 ;234
000082  2204              MOVS     r2,#4                 ;234
000084  210e              MOVS     r1,#0xe               ;234
000086  a09e              ADR      r0,|L4.768|
000088  f7fffffe          BL       snmp_trap_send
00008c  e104              B        |L4.664|
                  |L4.142|
00008e  0783              LSLS     r3,r0,#30             ;235
000090  d529              BPL      |L4.230|
000092  078b              LSLS     r3,r1,#30             ;235
000094  d527              BPL      |L4.230|
000096  78d0              LDRB     r0,[r2,#3]            ;236  ; plazma_inv
000098  f1000001          ADD      r0,r0,#1              ;236
00009c  70d0              STRB     r0,[r2,#3]            ;235
00009e  b134              CBZ      r4,|L4.174|
0000a0  2c01              CMP      r4,#1                 ;235
0000a2  d00b              BEQ      |L4.188|
0000a4  2c02              CMP      r4,#2                 ;236
0000a6  d010              BEQ      |L4.202|
0000a8  2c03              CMP      r4,#3                 ;240
0000aa  d015              BEQ      |L4.216|
0000ac  e0f4              B        |L4.664|
                  |L4.174|
0000ae  2302              MOVS     r3,#2                 ;242
0000b0  2201              MOVS     r2,#1                 ;243
0000b2  210e              MOVS     r1,#0xe               ;243
0000b4  a099              ADR      r0,|L4.796|
0000b6  f7fffffe          BL       snmp_trap_send
0000ba  e0ed              B        |L4.664|
                  |L4.188|
0000bc  2302              MOVS     r3,#2                 ;244
0000be  461a              MOV      r2,r3                 ;246
0000c0  210e              MOVS     r1,#0xe               ;247
0000c2  a09d              ADR      r0,|L4.824|
0000c4  f7fffffe          BL       snmp_trap_send
0000c8  e0e6              B        |L4.664|
                  |L4.202|
0000ca  2302              MOVS     r3,#2                 ;248
0000cc  2203              MOVS     r2,#3                 ;248
0000ce  210e              MOVS     r1,#0xe               ;250
0000d0  a0a0              ADR      r0,|L4.852|
0000d2  f7fffffe          BL       snmp_trap_send
0000d6  e0df              B        |L4.664|
                  |L4.216|
0000d8  2302              MOVS     r3,#2                 ;251
0000da  2204              MOVS     r2,#4                 ;251
0000dc  210e              MOVS     r1,#0xe               ;253
0000de  a0a4              ADR      r0,|L4.880|
0000e0  f7fffffe          BL       snmp_trap_send
0000e4  e0d8              B        |L4.664|
                  |L4.230|
0000e6  0743              LSLS     r3,r0,#29             ;255
0000e8  d529              BPL      |L4.318|
0000ea  074b              LSLS     r3,r1,#29             ;255
0000ec  d527              BPL      |L4.318|
0000ee  78d0              LDRB     r0,[r2,#3]            ;262  ; plazma_inv
0000f0  f1000001          ADD      r0,r0,#1              ;262
0000f4  70d0              STRB     r0,[r2,#3]            ;262
0000f6  b134              CBZ      r4,|L4.262|
0000f8  2c01              CMP      r4,#1                 ;262
0000fa  d00b              BEQ      |L4.276|
0000fc  2c02              CMP      r4,#2                 ;262
0000fe  d010              BEQ      |L4.290|
000100  2c03              CMP      r4,#3                 ;264
000102  d015              BEQ      |L4.304|
000104  e0c8              B        |L4.664|
                  |L4.262|
000106  2303              MOVS     r3,#3                 ;265
000108  2201              MOVS     r2,#1                 ;265
00010a  210e              MOVS     r1,#0xe               ;265
00010c  a09f              ADR      r0,|L4.908|
00010e  f7fffffe          BL       snmp_trap_send
000112  e0c1              B        |L4.664|
                  |L4.276|
000114  2303              MOVS     r3,#3                 ;266
000116  2202              MOVS     r2,#2                 ;266
000118  210e              MOVS     r1,#0xe               ;266
00011a  a0a3              ADR      r0,|L4.936|
00011c  f7fffffe          BL       snmp_trap_send
000120  e0ba              B        |L4.664|
                  |L4.290|
000122  2303              MOVS     r3,#3                 ;269
000124  461a              MOV      r2,r3                 ;269
000126  210e              MOVS     r1,#0xe               ;269
000128  a0a6              ADR      r0,|L4.964|
00012a  f7fffffe          BL       snmp_trap_send
00012e  e0b3              B        |L4.664|
                  |L4.304|
000130  2303              MOVS     r3,#3                 ;270
000132  2204              MOVS     r2,#4                 ;272
000134  210e              MOVS     r1,#0xe               ;272
000136  a0aa              ADR      r0,|L4.992|
000138  f7fffffe          BL       snmp_trap_send
00013c  e0ac              B        |L4.664|
                  |L4.318|
00013e  0703              LSLS     r3,r0,#28             ;273
000140  d529              BPL      |L4.406|
000142  070b              LSLS     r3,r1,#28             ;274
000144  d527              BPL      |L4.406|
000146  78d0              LDRB     r0,[r2,#3]            ;276  ; plazma_inv
000148  f1000001          ADD      r0,r0,#1              ;276
00014c  70d0              STRB     r0,[r2,#3]            ;277
00014e  b134              CBZ      r4,|L4.350|
000150  2c01              CMP      r4,#1                 ;277
000152  d00b              BEQ      |L4.364|
000154  2c02              CMP      r4,#2                 ;277
000156  d010              BEQ      |L4.378|
000158  2c03              CMP      r4,#3                 ;279
00015a  d015              BEQ      |L4.392|
00015c  e09c              B        |L4.664|
                  |L4.350|
00015e  2304              MOVS     r3,#4                 ;280
000160  2201              MOVS     r2,#1                 ;280
000162  210e              MOVS     r1,#0xe               ;280
000164  a0a5              ADR      r0,|L4.1020|
000166  f7fffffe          BL       snmp_trap_send
00016a  e095              B        |L4.664|
                  |L4.364|
00016c  2304              MOVS     r3,#4                 ;283
00016e  2202              MOVS     r2,#2                 ;284
000170  210e              MOVS     r1,#0xe               ;284
000172  a0ab              ADR      r0,|L4.1056|
000174  f7fffffe          BL       snmp_trap_send
000178  e08e              B        |L4.664|
                  |L4.378|
00017a  2304              MOVS     r3,#4                 ;285
00017c  2203              MOVS     r2,#3                 ;285
00017e  210e              MOVS     r1,#0xe               ;287
000180  a0b0              ADR      r0,|L4.1092|
000182  f7fffffe          BL       snmp_trap_send
000186  e087              B        |L4.664|
                  |L4.392|
000188  2304              MOVS     r3,#4                 ;288
00018a  461a              MOV      r2,r3                 ;288
00018c  210e              MOVS     r1,#0xe               ;289
00018e  a0b6              ADR      r0,|L4.1128|
000190  f7fffffe          BL       snmp_trap_send
000194  e080              B        |L4.664|
                  |L4.406|
000196  06c3              LSLS     r3,r0,#27             ;291
000198  d529              BPL      |L4.494|
00019a  06cb              LSLS     r3,r1,#27             ;292
00019c  d527              BPL      |L4.494|
00019e  78d0              LDRB     r0,[r2,#3]            ;292  ; plazma_inv
0001a0  f1000001          ADD      r0,r0,#1              ;292
0001a4  70d0              STRB     r0,[r2,#3]
0001a6  b134              CBZ      r4,|L4.438|
0001a8  2c01              CMP      r4,#1                 ;236
0001aa  d00b              BEQ      |L4.452|
0001ac  2c02              CMP      r4,#2
0001ae  d010              BEQ      |L4.466|
0001b0  2c03              CMP      r4,#3
0001b2  d015              BEQ      |L4.480|
0001b4  e070              B        |L4.664|
                  |L4.438|
0001b6  2305              MOVS     r3,#5
0001b8  2201              MOVS     r2,#1
0001ba  210e              MOVS     r1,#0xe
0001bc  a0b3              ADR      r0,|L4.1164|
0001be  f7fffffe          BL       snmp_trap_send
0001c2  e069              B        |L4.664|
                  |L4.452|
0001c4  2305              MOVS     r3,#5
0001c6  2202              MOVS     r2,#2
0001c8  210e              MOVS     r1,#0xe
0001ca  a0b9              ADR      r0,|L4.1200|
0001cc  f7fffffe          BL       snmp_trap_send
0001d0  e062              B        |L4.664|
                  |L4.466|
0001d2  2305              MOVS     r3,#5
0001d4  2203              MOVS     r2,#3
0001d6  210e              MOVS     r1,#0xe
0001d8  a0be              ADR      r0,|L4.1236|
0001da  f7fffffe          BL       snmp_trap_send
0001de  e05b              B        |L4.664|
                  |L4.480|
0001e0  2305              MOVS     r3,#5
0001e2  2204              MOVS     r2,#4
0001e4  210e              MOVS     r1,#0xe
0001e6  a0c4              ADR      r0,|L4.1272|
0001e8  f7fffffe          BL       snmp_trap_send
0001ec  e054              B        |L4.664|
                  |L4.494|
0001ee  0683              LSLS     r3,r0,#26
0001f0  d529              BPL      |L4.582|
0001f2  068b              LSLS     r3,r1,#26
0001f4  d527              BPL      |L4.582|
0001f6  78d0              LDRB     r0,[r2,#3]  ; plazma_inv
0001f8  f1000001          ADD      r0,r0,#1
0001fc  70d0              STRB     r0,[r2,#3]
0001fe  b134              CBZ      r4,|L4.526|
000200  2c01              CMP      r4,#1
000202  d00b              BEQ      |L4.540|
000204  2c02              CMP      r4,#2
000206  d010              BEQ      |L4.554|
000208  2c03              CMP      r4,#3
00020a  d015              BEQ      |L4.568|
00020c  e044              B        |L4.664|
                  |L4.526|
00020e  2306              MOVS     r3,#6
000210  2201              MOVS     r2,#1
000212  210e              MOVS     r1,#0xe
000214  a0c1              ADR      r0,|L4.1308|
000216  f7fffffe          BL       snmp_trap_send
00021a  e03d              B        |L4.664|
                  |L4.540|
00021c  2306              MOVS     r3,#6
00021e  2202              MOVS     r2,#2
000220  210e              MOVS     r1,#0xe
000222  a0c7              ADR      r0,|L4.1344|
000224  f7fffffe          BL       snmp_trap_send
000228  e036              B        |L4.664|
                  |L4.554|
00022a  2306              MOVS     r3,#6
00022c  2203              MOVS     r2,#3
00022e  210e              MOVS     r1,#0xe
000230  a0cc              ADR      r0,|L4.1380|
000232  f7fffffe          BL       snmp_trap_send
000236  e02f              B        |L4.664|
                  |L4.568|
000238  2306              MOVS     r3,#6
00023a  2204              MOVS     r2,#4
00023c  210e              MOVS     r1,#0xe
00023e  a0d2              ADR      r0,|L4.1416|
000240  f7fffffe          BL       snmp_trap_send
000244  e028              B        |L4.664|
                  |L4.582|
000246  b300              CBZ      r0,|L4.650|
000248  b9f9              CBNZ     r1,|L4.650|
00024a  78d0              LDRB     r0,[r2,#3]  ; plazma_inv
00024c  f1000001          ADD      r0,r0,#1
000250  70d0              STRB     r0,[r2,#3]
000252  b134              CBZ      r4,|L4.610|
000254  2c01              CMP      r4,#1
000256  d00b              BEQ      |L4.624|
000258  2c02              CMP      r4,#2
00025a  d010              BEQ      |L4.638|
00025c  2c03              CMP      r4,#3
00025e  d015              BEQ      |L4.652|
000260  e01a              B        |L4.664|
                  |L4.610|
000262  2300              MOVS     r3,#0
000264  2201              MOVS     r2,#1
000266  210e              MOVS     r1,#0xe
000268  a0d0              ADR      r0,|L4.1452|
00026a  f7fffffe          BL       snmp_trap_send
00026e  e013              B        |L4.664|
                  |L4.624|
000270  2300              MOVS     r3,#0
000272  2202              MOVS     r2,#2
000274  210e              MOVS     r1,#0xe
000276  a0d2              ADR      r0,|L4.1472|
000278  f7fffffe          BL       snmp_trap_send
00027c  e00c              B        |L4.664|
                  |L4.638|
00027e  2300              MOVS     r3,#0
000280  2203              MOVS     r2,#3
000282  210e              MOVS     r1,#0xe
000284  a0d3              ADR      r0,|L4.1492|
000286  f7fffffe          BL       snmp_trap_send
                  |L4.650|
00028a  e005              B        |L4.664|
                  |L4.652|
00028c  2300              MOVS     r3,#0
00028e  2204              MOVS     r2,#4
000290  210e              MOVS     r1,#0xe
000292  a0d5              ADR      r0,|L4.1512|
000294  f7fffffe          BL       snmp_trap_send
                  |L4.664|
000298  f8150f46          LDRB     r0,[r5,#0x46]!
00029c  7068              STRB     r0,[r5,#1]
00029e  bd70              POP      {r4-r6,pc}
;;;297    
                          ENDP

                  |L4.672|
                          DCD      first_inv_slot
                  |L4.676|
                          DCD      inv
                  |L4.680|
                          DCD      ||area_number.21||+0x8c
                  |L4.684|
0002ac  496e7665          DCB      "Invertor #1 Alarm, overload",0
0002b0  72746f72
0002b4  20233120
0002b8  416c6172
0002bc  6d2c206f
0002c0  7665726c
0002c4  6f616400
                  |L4.712|
0002c8  496e7665          DCB      "Invertor #2 Alarm, overload",0
0002cc  72746f72
0002d0  20233220
0002d4  416c6172
0002d8  6d2c206f
0002dc  7665726c
0002e0  6f616400
                  |L4.740|
0002e4  496e7665          DCB      "Invertor #3 Alarm, overload",0
0002e8  72746f72
0002ec  20233320
0002f0  416c6172
0002f4  6d2c206f
0002f8  7665726c
0002fc  6f616400
                  |L4.768|
000300  496e7665          DCB      "Invertor #4 Alarm, overload",0
000304  72746f72
000308  20233420
00030c  416c6172
000310  6d2c206f
000314  7665726c
000318  6f616400
                  |L4.796|
00031c  496e7665          DCB      "Invertor #1 Alarm, overheat",0
000320  72746f72
000324  20233120
000328  416c6172
00032c  6d2c206f
000330  76657268
000334  65617400
                  |L4.824|
000338  496e7665          DCB      "Invertor #2 Alarm, overheat",0
00033c  72746f72
000340  20233220
000344  416c6172
000348  6d2c206f
00034c  76657268
000350  65617400
                  |L4.852|
000354  496e7665          DCB      "Invertor #3 Alarm, overheat",0
000358  72746f72
00035c  20233320
000360  416c6172
000364  6d2c206f
000368  76657268
00036c  65617400
                  |L4.880|
000370  496e7665          DCB      "Invertor #4 Alarm, overheat",0
000374  72746f72
000378  20233420
00037c  416c6172
000380  6d2c206f
000384  76657268
000388  65617400
                  |L4.908|
00038c  496e7665          DCB      "Invertor #1 Alarm, is warm",0
000390  72746f72
000394  20233120
000398  416c6172
00039c  6d2c2069
0003a0  73207761
0003a4  726d00  
0003a7  00                DCB      0
                  |L4.936|
0003a8  496e7665          DCB      "Invertor #2 Alarm, is warm",0
0003ac  72746f72
0003b0  20233220
0003b4  416c6172
0003b8  6d2c2069
0003bc  73207761
0003c0  726d00  
0003c3  00                DCB      0
                  |L4.964|
0003c4  496e7665          DCB      "Invertor #3 Alarm, is warm",0
0003c8  72746f72
0003cc  20233320
0003d0  416c6172
0003d4  6d2c2069
0003d8  73207761
0003dc  726d00  
0003df  00                DCB      0
                  |L4.992|
0003e0  496e7665          DCB      "Invertor #4 Alarm, is warm",0
0003e4  72746f72
0003e8  20233420
0003ec  416c6172
0003f0  6d2c2069
0003f4  73207761
0003f8  726d00  
0003fb  00                DCB      0
                  |L4.1020|
0003fc  496e7665          DCB      "Invertor #1 Alarm, voltage is up",0
000400  72746f72
000404  20233120
000408  416c6172
00040c  6d2c2076
000410  6f6c7461
000414  67652069
000418  73207570
00041c  00      
00041d  00                DCB      0
00041e  00                DCB      0
00041f  00                DCB      0
                  |L4.1056|
000420  496e7665          DCB      "Invertor #2 Alarm, voltage is up",0
000424  72746f72
000428  20233220
00042c  416c6172
000430  6d2c2076
000434  6f6c7461
000438  67652069
00043c  73207570
000440  00      
000441  00                DCB      0
000442  00                DCB      0
000443  00                DCB      0
                  |L4.1092|
000444  496e7665          DCB      "Invertor #3 Alarm, voltage is up",0
000448  72746f72
00044c  20233320
000450  416c6172
000454  6d2c2076
000458  6f6c7461
00045c  67652069
000460  73207570
000464  00      
000465  00                DCB      0
000466  00                DCB      0
000467  00                DCB      0
                  |L4.1128|
000468  496e7665          DCB      "Invertor #4 Alarm, voltage is up",0
00046c  72746f72
000470  20233420
000474  416c6172
000478  6d2c2076
00047c  6f6c7461
000480  67652069
000484  73207570
000488  00      
000489  00                DCB      0
00048a  00                DCB      0
00048b  00                DCB      0
                  |L4.1164|
00048c  496e7665          DCB      "Invertor #1 Alarm, voltage is down",0
000490  72746f72
000494  20233120
000498  416c6172
00049c  6d2c2076
0004a0  6f6c7461
0004a4  67652069
0004a8  7320646f
0004ac  776e00  
0004af  00                DCB      0
                  |L4.1200|
0004b0  496e7665          DCB      "Invertor #2 Alarm, voltage is down",0
0004b4  72746f72
0004b8  20233220
0004bc  416c6172
0004c0  6d2c2076
0004c4  6f6c7461
0004c8  67652069
0004cc  7320646f
0004d0  776e00  
0004d3  00                DCB      0
                  |L4.1236|
0004d4  496e7665          DCB      "Invertor #3 Alarm, voltage is down",0
0004d8  72746f72
0004dc  20233320
0004e0  416c6172
0004e4  6d2c2076
0004e8  6f6c7461
0004ec  67652069
0004f0  7320646f
0004f4  776e00  
0004f7  00                DCB      0
                  |L4.1272|
0004f8  496e7665          DCB      "Invertor #4 Alarm, voltage is down",0
0004fc  72746f72
000500  20233420
000504  416c6172
000508  6d2c2076
00050c  6f6c7461
000510  67652069
000514  7320646f
000518  776e00  
00051b  00                DCB      0
                  |L4.1308|
00051c  496e7665          DCB      "Invertor #1 Alarm, output is offed",0
000520  72746f72
000524  20233120
000528  416c6172
00052c  6d2c206f
000530  75747075
000534  74206973
000538  206f6666
00053c  656400  
00053f  00                DCB      0
                  |L4.1344|
000540  496e7665          DCB      "Invertor #2 Alarm, output is offed",0
000544  72746f72
000548  20233220
00054c  416c6172
000550  6d2c206f
000554  75747075
000558  74206973
00055c  206f6666
000560  656400  
000563  00                DCB      0
                  |L4.1380|
000564  496e7665          DCB      "Invertor #3 Alarm, output is offed",0
000568  72746f72
00056c  20233320
000570  416c6172
000574  6d2c206f
000578  75747075
00057c  74206973
000580  206f6666
000584  656400  
000587  00                DCB      0
                  |L4.1416|
000588  496e7665          DCB      "Invertor #4 Alarm, output is offed",0
00058c  72746f72
000590  20233420
000594  416c6172
000598  6d2c206f
00059c  75747075
0005a0  74206973
0005a4  206f6666
0005a8  656400  
0005ab  00                DCB      0
                  |L4.1452|
0005ac  496e7665          DCB      "Invertor #1 is norm",0
0005b0  72746f72
0005b4  20233120
0005b8  6973206e
0005bc  6f726d00
                  |L4.1472|
0005c0  496e7665          DCB      "Invertor #2 is norm",0
0005c4  72746f72
0005c8  20233220
0005cc  6973206e
0005d0  6f726d00
                  |L4.1492|
0005d4  496e7665          DCB      "Invertor #3 is norm",0
0005d8  72746f72
0005dc  20233320
0005e0  6973206e
0005e4  6f726d00
                  |L4.1512|
0005e8  496e7665          DCB      "Invertor #4 is norm",0
0005ec  72746f72
0005f0  20233420
0005f4  6973206e
0005f8  6f726d00

                          AREA ||.bss||, DATA, NOINIT, ALIGN=2

                  adc_buff
                          %        1024
                  adc_buff_
                          %        32
                  main_power_buffer
                          %        32

                          AREA ||area_number.7||, DATA, NOINIT, ALIGN=1

                          EXPORTAS ||area_number.7||, ||.bss||
                  adc_buff_max
                          %        24

                          AREA ||area_number.8||, DATA, NOINIT, ALIGN=1

                          EXPORTAS ||area_number.8||, ||.bss||
                  net_buff
                          %        64

                          AREA ||.constdata||, DATA, READONLY, ALIGN=0

                  sk_buff_KONTUR
000000  0d0b0f0e          DCB      0x0d,0x0b,0x0f,0x0e

                          AREA ||area_number.11||, DATA, READONLY, ALIGN=0

                          EXPORTAS ||area_number.11||, ||.constdata||
                  sk_buff_RSTKM
000000  0d0b0f0e          DCB      0x0d,0x0b,0x0f,0x0e

                          AREA ||area_number.12||, DATA, READONLY, ALIGN=0

                          EXPORTAS ||area_number.12||, ||.constdata||
                  sk_buff_GLONASS
000000  0b0d0f0e          DCB      0x0b,0x0d,0x0f,0x0e

                          AREA ||area_number.13||, DATA, READONLY, ALIGN=0

                          EXPORTAS ||area_number.13||, ||.constdata||
                  sk_buff_3U
000000  0b0d0f0e          DCB      0x0b,0x0d,0x0f,0x0e

                          AREA ||area_number.14||, DATA, READONLY, ALIGN=0

                          EXPORTAS ||area_number.14||, ||.constdata||
                  sk_buff_6U
000000  0b0d0f0e          DCB      0x0b,0x0d,0x0f,0x0e

                          AREA ||area_number.15||, DATA, READONLY, ALIGN=0

                          EXPORTAS ||area_number.15||, ||.constdata||
                  sk_buff_220
000000  0b0d0f0e          DCB      0x0b,0x0d,0x0f,0x0e

                          AREA ||area_number.16||, DATA, READONLY, ALIGN=0

                          EXPORTAS ||area_number.16||, ||.constdata||
                  sk_buff_TELECORE2015
000000  0b0d0f0e          DCB      0x0b,0x0d,0x0f,0x0e

                          AREA ||.data||, DATA, ALIGN=1

                  adc_buff_min
000000  13881388          DCW      0x1388,0x1388
000004  13881388          DCW      0x1388,0x1388
000008  13881388          DCW      0x1388,0x1388
00000c  13881388          DCW      0x1388,0x1388
000010  13881388          DCW      0x1388,0x1388
                          DCDU     0x00000000

                          AREA ||area_number.18||, DATA, ALIGN=1

                          EXPORTAS ||area_number.18||, ||.data||
                  unet_buff_min
000000  1388              DCW      0x1388

                          AREA ||area_number.19||, DATA, ALIGN=0

                          EXPORTAS ||area_number.19||, ||.data||
                  adc_stat
000000  01                DCB      0x01

                          AREA ||area_number.20||, DATA, ALIGN=1

                          EXPORTAS ||area_number.20||, ||.data||
                  bat_ver_cnt
000000  0096              DCW      0x0096

                          AREA ||area_number.21||, DATA, ALIGN=2

                          EXPORTAS ||area_number.21||, ||.data||
                  vent_stat
000000  00                DCB      0x00
                  adc_self_ch_cnt
000001  00                DCB      0x00
                  adc_ch_net
000002  00                DCB      0x00
                  adc_ch
000003  00                DCB      0x00
                  adc_ch_cnt
000004  00                DCB      0x00
                  adc_window_flag
000005  00                DCB      0x00
                  ch_cnt0
000006  00                DCB      0x00
                  b1Hz_ch
000007  00                DCB      0x00
                  i
000008  00                DCB      0x00
                  iiii
000009  00                DCB      0x00
                  bAVG
00000a  00                DCB      0x00
                  avg_num
00000b  00                DCB      0x00
                  kb_full_ver
00000c  00                DCB      0x00
                  kb_start_ips
00000d  00                DCB      0x00
                  num_of_wrks_bps
00000e  00                DCB      0x00
                  num_necc_up
00000f  00                DCB      0x00
                  num_necc_down
000010  00                DCB      0x00
                  sh_cnt0
000011  00                DCB      0x00
                  b1Hz_sh
000012  00                DCB      0x00
                  spc_stat
000013  00                DCB      0x00
                  spc_bat
000014  00                DCB      0x00
                  spc_phase
000015  00                DCB      0x00
                  bAVZ
000016  00                DCB      0x00
                  ke_start_stat
000017  00                DCB      0x00
                  numOfForvardBps
000018  00                DCB      0x00
                  numOfForvardBps_old
000019  00                DCB      0x00
                  numOfForvardBps_minCnt
00001a  00                DCB      0x00
                  cntrl_hndl_plazma
00001b  00                DCB      0x00
                  cntrl_stat
00001c  0258              DCW      0x0258
                  cntrl_stat_old
00001e  0258              DCW      0x0258
                  avg_main_cnt
000020  0014              DCW      0x0014
                  num_necc_block_cnt
000022  0000              DCB      0x00,0x00
                  net_buff_
000024  0000              DCB      0x00,0x00
                  adc_result
000026  0000              DCB      0x00,0x00
                  adc_gorb_cnt
000028  0000              DCB      0x00,0x00
                  adc_zero_cnt
00002a  0000              DCB      0x00,0x00
                  adc_window_cnt
00002c  0000              DCB      0x00,0x00
                  adc_net_buff_cnt
00002e  0000              DCB      0x00,0x00
                  plazma_sk
000030  0000              DCB      0x00,0x00
                  cntrl_stat_new
000032  0000              DCB      0x00,0x00
                  Ibmax
000034  0000              DCB      0x00,0x00
                  IZMAX_
000036  0000              DCB      0x00,0x00
                  Ubpsmax
000038  0000              DCB      0x00,0x00
                  samokalibr_cnt
00003a  0000              DCB      0x00,0x00
                  main_kb_cnt
00003c  0000              DCB      0x00,0x00
                  kb_cnt_1lev
00003e  0000              DCB      0x00,0x00
                  kb_cnt_2lev
000040  0000              DCB      0x00,0x00
                  kb_start
000042  0000              DCB      0x00,0x00
                  ibat_ips
000044  0000              DCB      0x00,0x00
                  ibat_ips_
000046  0000              DCB      0x00,0x00
                  bps_on_mask
000048  0000              DCB      0x00,0x00
                  bps_off_mask
00004a  0000              DCB      0x00,0x00
                  vz_cnt_s
00004c  0000              DCB      0x00,0x00
                  vz_cnt_s_
00004e  0000              DCB      0x00,0x00
                  vz_cnt_h
000050  0000              DCB      0x00,0x00
                  vz_cnt_h_
000052  0000              DCB      0x00,0x00
                  cnt_end_ke
000054  0000              DCB      0x00,0x00
                  __ee_vz_cnt
000056  0000              DCB      0x00,0x00
                  __ee_spc_stat
000058  0000              DCB      0x00,0x00
                  __ee_spc_bat
00005a  0000              DCB      0x00,0x00
                  __ee_spc_phase
00005c  0000              DCB      0x00,0x00
                  cntrl_stat_blok_cnt
00005e  0000              DCB      0x00,0x00
                  cntrl_stat_blok_cnt_
000060  0000              DCB      0x00,0x00
                  numOfForvardBps_hourCnt
000062  0000              DCB      0x00,0x00
                  ibat
                          DCD      0x00000000
                  ibat_
                          DCD      0x00000000
                  rem_IP
                          DCD      0x00000000
                  i_avg_max
                          DCD      0x00000000
                  i_avg_min
                          DCD      0x00000000
                  i_avg_summ
                          DCD      0x00000000
                  i_avg
                          DCD      0x00000000
                  avg
                          DCD      0x00000000
                  cntrl_stat_blok_cnt_plus
                          DCD      0x00000000
                  cntrl_stat_blok_cnt_minus
                          DCD      0x00000000
                  plazma_inv
                          DCD      0x00000000
                  net_metr_buff_
                          DCD      0x00000000
000094  0000              DCB      0x00,0x00
                  adc_self_ch_buff
000096  0000              DCB      0x00,0x00
                          DCD      0x00000000
                  adc_self_ch_disp
                          DCD      0x00000000
0000a0  00000000          DCB      0x00,0x00,0x00,0x00
                  ke_date
                          %        8

                          AREA ||area_number.22||, DATA, ALIGN=1

                          EXPORTAS ||area_number.22||, ||.data||
                  unet_buff_max
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.23||, DATA, ALIGN=0

                          EXPORTAS ||area_number.23||, ||.data||
                  adc_cnt
000000  00                DCB      0x00

                          AREA ||area_number.24||, DATA, ALIGN=0

                          EXPORTAS ||area_number.24||, ||.data||
                  adc_cnt1
000000  00                DCB      0x00

                          AREA ||area_number.25||, DATA, ALIGN=1

                          EXPORTAS ||area_number.25||, ||.data||
                  zero_cnt
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.26||, DATA, ALIGN=0

                          EXPORTAS ||area_number.26||, ||.data||
                  net_buff_cnt
000000  00                DCB      0x00

                          AREA ||area_number.27||, DATA, ALIGN=1

                          EXPORTAS ||area_number.27||, ||.data||
                  ADWR
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.28||, DATA, ALIGN=1

                          EXPORTAS ||area_number.28||, ||.data||
                  period_cnt
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.29||, DATA, ALIGN=1

                          EXPORTAS ||area_number.29||, ||.data||
                  non_zero_cnt
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.30||, DATA, ALIGN=0

                          EXPORTAS ||area_number.30||, ||.data||
                  rele_stat
000000  00                DCB      0x00

                          AREA ||area_number.31||, DATA, ALIGN=0

                          EXPORTAS ||area_number.31||, ||.data||
                  bRELE_OUT
000000  00                DCB      0x00

                          AREA ||area_number.32||, DATA, ALIGN=2

                          EXPORTAS ||area_number.32||, ||.data||
                  main_power_buffer_
                          DCD      0x00000000

                          AREA ||area_number.33||, DATA, ALIGN=1

                          EXPORTAS ||area_number.33||, ||.data||
                  main_power_buffer_cnt
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.34||, DATA, ALIGN=1

                          EXPORTAS ||area_number.34||, ||.data||
                  adc_buff_out_
                          DCDU     0x00000000
000004  0000              DCB      0x00,0x00

                          AREA ||area_number.35||, DATA, ALIGN=1

                          EXPORTAS ||area_number.35||, ||.data||
                  plazma_adc_cnt
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.36||, DATA, ALIGN=0

                          EXPORTAS ||area_number.36||, ||.data||
                  unh_cnt0
000000  00                DCB      0x00

                          AREA ||area_number.37||, DATA, ALIGN=0

                          EXPORTAS ||area_number.37||, ||.data||
                  unh_cnt1
000000  00                DCB      0x00

                          AREA ||area_number.38||, DATA, ALIGN=0

                          EXPORTAS ||area_number.38||, ||.data||
                  b1Hz_unh
000000  00                DCB      0x00

                          AREA ||area_number.39||, DATA, ALIGN=0

                          EXPORTAS ||area_number.39||, ||.data||
                  ch_cnt1
000000  00                DCB      0x00

                          AREA ||area_number.40||, DATA, ALIGN=0

                          EXPORTAS ||area_number.40||, ||.data||
                  b1_30Hz_ch
000000  00                DCB      0x00

                          AREA ||area_number.41||, DATA, ALIGN=1

                          EXPORTAS ||area_number.41||, ||.data||
                  cntrl_stat_blck_cnt
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.42||, DATA, ALIGN=0

                          EXPORTAS ||area_number.42||, ||.data||
                  avg_cnt
000000  00                DCB      0x00

                          AREA ||area_number.43||, DATA, ALIGN=0

                          EXPORTAS ||area_number.43||, ||.data||
                  bps_all_off_cnt
000000  00                DCB      0x00

                          AREA ||area_number.44||, DATA, ALIGN=0

                          EXPORTAS ||area_number.44||, ||.data||
                  bps_mask_off_cnt
000000  00                DCB      0x00

                          AREA ||area_number.45||, DATA, ALIGN=0

                          EXPORTAS ||area_number.45||, ||.data||
                  bps_mask_on_off_cnt
000000  00                DCB      0x00

                          AREA ||area_number.46||, DATA, ALIGN=0

                          EXPORTAS ||area_number.46||, ||.data||
                  bps_hndl_2sec_cnt
000000  00                DCB      0x00

                          AREA ||area_number.47||, DATA, ALIGN=0

                          EXPORTAS ||area_number.47||, ||.data||
                  plazma_bat
000000  00                DCB      0x00

                          AREA ||area_number.48||, DATA, ALIGN=0

                          EXPORTAS ||area_number.48||, ||.data||
                  plazma_cntrl_stat
000000  00                DCB      0x00
