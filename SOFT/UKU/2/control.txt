; generated by ARM C/C++ Compiler, 4.1 [Build 644]
; commandline ArmCC [--list --debug -c --asm --interleave -o.\EXE\control.o --asm_dir=.\ --list_dir=.\ --depend=.\EXE\control.d --feedback=.\EXE\UKU_220_IPS_TERMOKOMPENSAT.fed --cpu=Cortex-M3 --apcs=interwork -O1 -IC:\Keil\ARM\CMSIS\Include -IC:\Keil\ARM\INC\NXP\LPC17xx -D__MICROLIB -DUKU_220_IPS_TERMOKOMPENSAT -DUKU2071x --omf_browse=.\EXE\control.crf control.c]
                          THUMB

                          AREA ||.text||, CODE, READONLY, ALIGN=2

                  ke_start PROC
;;;214    //-----------------------------------------------
;;;215    void ke_start(char in)
000000  e92d41fc          PUSH     {r2-r8,lr}
;;;216    {          
000004  4604              MOV      r4,r0
;;;217    ke_start_stat=(enum_ke_start_stat)0;		 
000006  4efe              LDR      r6,|L1.1024|
000008  f04f0700          MOV      r7,#0
00000c  75f7              STRB     r7,[r6,#0x17]
;;;218    
;;;219    if(spc_stat==spcVZ)ke_start_stat=kssNOT_VZ;
00000e  7cf0              LDRB     r0,[r6,#0x13]  ; spc_stat
000010  f04f0301          MOV      r3,#1
000014  2802              CMP      r0,#2
000016  d008              BEQ      |L1.42|
;;;220    else if(BAT_IS_ON[in]!=bisON)ke_start_stat=kssNOT_BAT;
000018  49fa              LDR      r1,|L1.1028|
00001a  5d09              LDRB     r1,[r1,r4]
00001c  2955              CMP      r1,#0x55
00001e  d006              BEQ      |L1.46|
000020  f04f0065          MOV      r0,#0x65
000024  75f0              STRB     r0,[r6,#0x17]
                  |L1.38|
;;;221    else if(bat[in]._av&(1<<0))ke_start_stat=kssNOT_BAT_AV;
;;;222    else if(bat[in]._temper_stat&(1<<1))ke_start_stat=kssNOT_BAT_AV_T;
;;;223    else if(bat[in]._av&(1<<1))ke_start_stat=kssNOT_BAT_AV_ASS;
;;;224    else if(bat[in]._Ib>IKB)ke_start_stat=kssNOT_BAT_ZAR;
;;;225    else if(bat[in]._Ib<-IKB)ke_start_stat=kssNOT_BAT_RAZR;
;;;226    else if((spc_stat==spcKE)&&(spc_bat==0))ke_start_stat=kssNOT_KE1;
;;;227    else if((spc_stat==spcKE)&&(spc_bat==1))ke_start_stat=kssNOT_KE2;
;;;228    else 
;;;229    	{
;;;230    
;;;231    	ke_start_stat=kssYES;
;;;232    
;;;233    	spc_stat=spcKE;
;;;234    	__ee_spc_stat=spcKE;
;;;235    	lc640_write_int(EE_SPC_STAT,__ee_spc_stat);
;;;236    	
;;;237    	spc_bat=in;
;;;238    	__ee_spc_bat=in;
;;;239    	lc640_write_int(EE_SPC_BAT,__ee_spc_bat);
;;;240    
;;;241    	bat[in]._zar_cnt_ke=0;
;;;242    	lc640_write_int(ADR_EE_BAT_ZAR_CNT_KE[in],0);
;;;243    	
;;;244    	spc_phase=0;
;;;245    	__ee_spc_phase=0;
;;;246    	lc640_write_int(EE_SPC_PHASE,__ee_spc_phase);
;;;247    
;;;248    	//ke_mem_hndl(in,lc640_read_int(ADR_EE_BAT_ZAR_CNT_KE[spc_bat]));
;;;249    
;;;250    		{					
;;;251    		signed short temp_temp;
;;;252    		signed char temp;
;;;253    		temp_temp=bat[in]._u_old[((bat_u_old_cnt+1)&0x07)]; 
;;;254    		    
;;;255    		temp=LPC_RTC->YEAR;
;;;256    		gran_char(&temp,1,99);
;;;257    		*((char*)(&(ke_date[0])))=temp;
;;;258    			
;;;259    		temp=LPC_RTC->MONTH;
;;;260    		gran_char(&temp,1,12);
;;;261    		*(((char*)(&(ke_date[0])))+1)=temp;
;;;262    		
;;;263    		temp=LPC_RTC->DOM;
;;;264    		gran_char(&temp,1,31);
;;;265    		*(((char*)(&(ke_date[0])))+2)=temp;			
;;;266    				
;;;267    		*(((char*)(&(ke_date[0])))+3)=*((char*)&temp_temp);
;;;268    		lc640_write_long(EE_SPC_KE_DATE0,ke_date[0]);
;;;269    
;;;270    		temp=LPC_RTC->HOUR;
;;;271    		gran_char(&temp,0,23);
;;;272    		*((char*)(&(ke_date[1])))=temp;
;;;273                   
;;;274    		temp=LPC_RTC->MIN;
;;;275    		gran_char(&temp,0,59);
;;;276    		*(((char*)(&(ke_date[1])))+1)=temp;
;;;277    	          
;;;278    		temp=LPC_RTC->SEC;
;;;279    		gran_char(&temp,0,59);
;;;280    		*(((char*)(&(ke_date[1])))+2)=temp;
;;;281    			
;;;282    		*(((char*)(&(ke_date[1])))+3)=*(((char*)&temp_temp)+1);
;;;283    		lc640_write_long(EE_SPC_KE_DATE1,ke_date[1]);
;;;284    		}
;;;285    
;;;286    	}
;;;287    }
000026  e8bd81fc          POP      {r2-r8,pc}
                  |L1.42|
00002a  75f3              STRB     r3,[r6,#0x17]         ;219
00002c  e7fb              B        |L1.38|
                  |L1.46|
00002e  eb040144          ADD      r1,r4,r4,LSL #1       ;221
000032  eb011204          ADD      r2,r1,r4,LSL #4       ;221
000036  49f4              LDR      r1,|L1.1032|
000038  eb010582          ADD      r5,r1,r2,LSL #2       ;221
00003c  f895103d          LDRB     r1,[r5,#0x3d]         ;221
000040  07ca              LSLS     r2,r1,#31             ;221
000042  d003              BEQ      |L1.76|
000044  f04f0066          MOV      r0,#0x66              ;221
000048  75f0              STRB     r0,[r6,#0x17]         ;221
00004a  e7ec              B        |L1.38|
                  |L1.76|
00004c  f895203f          LDRB     r2,[r5,#0x3f]         ;222
000050  0792              LSLS     r2,r2,#30             ;222
000052  d503              BPL      |L1.92|
000054  f04f0067          MOV      r0,#0x67              ;222
000058  75f0              STRB     r0,[r6,#0x17]         ;222
00005a  e7e4              B        |L1.38|
                  |L1.92|
00005c  0789              LSLS     r1,r1,#30             ;223
00005e  d503              BPL      |L1.104|
000060  f04f0068          MOV      r0,#0x68              ;223
000064  75f0              STRB     r0,[r6,#0x17]         ;223
000066  e7de              B        |L1.38|
                  |L1.104|
000068  4ae8              LDR      r2,|L1.1036|
00006a  f9b51008          LDRSH    r1,[r5,#8]            ;224
00006e  f9b22000          LDRSH    r2,[r2,#0]            ;224  ; IKB
000072  4291              CMP      r1,r2                 ;224
000074  dd03              BLE      |L1.126|
000076  f04f0069          MOV      r0,#0x69              ;224
00007a  75f0              STRB     r0,[r6,#0x17]         ;224
00007c  e7d3              B        |L1.38|
                  |L1.126|
00007e  4252              RSBS     r2,r2,#0              ;225
000080  4291              CMP      r1,r2                 ;225
000082  da03              BGE      |L1.140|
000084  f04f006a          MOV      r0,#0x6a              ;225
000088  75f0              STRB     r0,[r6,#0x17]         ;225
00008a  e7cc              B        |L1.38|
                  |L1.140|
00008c  49dc              LDR      r1,|L1.1024|
00008e  2801              CMP      r0,#1                 ;226
000090  7d09              LDRB     r1,[r1,#0x14]         ;226
000092  d100              BNE      |L1.150|
000094  b111              CBZ      r1,|L1.156|
                  |L1.150|
000096  2801              CMP      r0,#1                 ;227
000098  d004              BEQ      |L1.164|
00009a  e005              B        |L1.168|
                  |L1.156|
00009c  f04f006b          MOV      r0,#0x6b              ;226
0000a0  75f0              STRB     r0,[r6,#0x17]         ;226
0000a2  e7c0              B        |L1.38|
                  |L1.164|
0000a4  2901              CMP      r1,#1                 ;227
0000a6  d07e              BEQ      |L1.422|
                  |L1.168|
0000a8  f04f0064          MOV      r0,#0x64              ;231
0000ac  75f0              STRB     r0,[r6,#0x17]         ;231
0000ae  74f3              STRB     r3,[r6,#0x13]         ;233
0000b0  f8a63054          STRH     r3,[r6,#0x54]         ;234
0000b4  4619              MOV      r1,r3                 ;235
0000b6  f44f70f8          MOV      r0,#0x1f0             ;235
0000ba  f7fffffe          BL       lc640_write_int
0000be  7534              STRB     r4,[r6,#0x14]         ;237
0000c0  f8a64056          STRH     r4,[r6,#0x56]         ;238
0000c4  4621              MOV      r1,r4                 ;239
0000c6  f44f70fa          MOV      r0,#0x1f4             ;239
0000ca  f7fffffe          BL       lc640_write_int
0000ce  61af              STR      r7,[r5,#0x18]         ;241
0000d0  48cf              LDR      r0,|L1.1040|
0000d2  2100              MOVS     r1,#0                 ;242
0000d4  f9300014          LDRSH    r0,[r0,r4,LSL #1]     ;242
0000d8  f7fffffe          BL       lc640_write_int
0000dc  7577              STRB     r7,[r6,#0x15]         ;244
0000de  f8a67058          STRH     r7,[r6,#0x58]         ;245
0000e2  4639              MOV      r1,r7                 ;246
0000e4  f44f70fb          MOV      r0,#0x1f6             ;246
0000e8  f7fffffe          BL       lc640_write_int
0000ec  48c9              LDR      r0,|L1.1044|
0000ee  8800              LDRH     r0,[r0,#0]            ;253  ; bat_u_old_cnt
0000f0  f1000001          ADD      r0,r0,#1              ;253
0000f4  f0000007          AND      r0,r0,#7              ;253
0000f8  eb050040          ADD      r0,r5,r0,LSL #1       ;253
0000fc  8c00              LDRH     r0,[r0,#0x20]         ;253
0000fe  9001              STR      r0,[sp,#4]            ;253
000100  4dc5              LDR      r5,|L1.1048|
000102  8ba8              LDRH     r0,[r5,#0x1c]         ;255
000104  9000              STR      r0,[sp,#0]            ;255
000106  f04f0263          MOV      r2,#0x63              ;256
00010a  f04f0101          MOV      r1,#1                 ;256
00010e  4668              MOV      r0,sp                 ;256
000110  f7fffffe          BL       gran_char
000114  4cba              LDR      r4,|L1.1024|
000116  f89d0000          LDRB     r0,[sp,#0]            ;257
00011a  349c              ADDS     r4,r4,#0x9c           ;257
00011c  7020              STRB     r0,[r4,#0]            ;257
00011e  7e28              LDRB     r0,[r5,#0x18]         ;259
000120  9000              STR      r0,[sp,#0]            ;259
000122  220c              MOVS     r2,#0xc               ;260
000124  2101              MOVS     r1,#1                 ;260
000126  4668              MOV      r0,sp                 ;260
000128  f7fffffe          BL       gran_char
00012c  f89d0000          LDRB     r0,[sp,#0]            ;261
000130  7060              STRB     r0,[r4,#1]            ;261
000132  7b28              LDRB     r0,[r5,#0xc]          ;263
000134  9000              STR      r0,[sp,#0]            ;263
000136  221f              MOVS     r2,#0x1f              ;264
000138  2101              MOVS     r1,#1                 ;264
00013a  4668              MOV      r0,sp                 ;264
00013c  f7fffffe          BL       gran_char
000140  f89d0000          LDRB     r0,[sp,#0]            ;265
000144  70a0              STRB     r0,[r4,#2]            ;265
000146  f89d0004          LDRB     r0,[sp,#4]            ;267
00014a  70e0              STRB     r0,[r4,#3]            ;267
00014c  f44f70fc          MOV      r0,#0x1f8             ;268
000150  6821              LDR      r1,[r4,#0]            ;268  ; ke_date
000152  f7fffffe          BL       lc640_write_long
000156  7a28              LDRB     r0,[r5,#8]            ;270
000158  9000              STR      r0,[sp,#0]            ;270
00015a  2217              MOVS     r2,#0x17              ;271
00015c  2100              MOVS     r1,#0                 ;271
00015e  4668              MOV      r0,sp                 ;271
000160  f7fffffe          BL       gran_char
000164  f89d0000          LDRB     r0,[sp,#0]            ;272
000168  7120              STRB     r0,[r4,#4]            ;272
00016a  7928              LDRB     r0,[r5,#4]            ;274
00016c  9000              STR      r0,[sp,#0]            ;274
00016e  223b              MOVS     r2,#0x3b              ;275
000170  2100              MOVS     r1,#0                 ;275
000172  4668              MOV      r0,sp                 ;275
000174  f7fffffe          BL       gran_char
000178  f89d0000          LDRB     r0,[sp,#0]            ;276
00017c  7160              STRB     r0,[r4,#5]            ;276
00017e  7828              LDRB     r0,[r5,#0]            ;278
000180  9000              STR      r0,[sp,#0]            ;278
000182  223b              MOVS     r2,#0x3b              ;279
000184  2100              MOVS     r1,#0                 ;279
000186  4668              MOV      r0,sp                 ;279
000188  f7fffffe          BL       gran_char
00018c  f89d0000          LDRB     r0,[sp,#0]            ;280
000190  71a0              STRB     r0,[r4,#6]            ;280
000192  f89d0005          LDRB     r0,[sp,#5]            ;282
000196  71e0              STRB     r0,[r4,#7]            ;282
000198  f44f70fe          MOV      r0,#0x1fc             ;283
00019c  6861              LDR      r1,[r4,#4]            ;283  ; ke_date
00019e  f7fffffe          BL       lc640_write_long
0001a2  e740              B        |L1.38|
0001a4  e7ff              B        |L1.422|
                  |L1.422|
0001a6  f04f006c          MOV      r0,#0x6c              ;227
0001aa  75f0              STRB     r0,[r6,#0x17]         ;227
0001ac  e73b              B        |L1.38|
;;;288    
                          ENDP

                  ke_drv PROC
;;;289    //-----------------------------------------------
;;;290    void ke_drv(void)
0001ae  e92d47f0          PUSH     {r4-r10,lr}
;;;291    {
;;;292    
;;;293    if(spc_stat==spcKE)
0001b2  4c93              LDR      r4,|L1.1024|
0001b4  7ce0              LDRB     r0,[r4,#0x13]  ; spc_stat
0001b6  2801              CMP      r0,#1
0001b8  d17d              BNE      |L1.694|
0001ba  4621              MOV      r1,r4
0001bc  2601              MOVS     r6,#1
;;;294    	{
;;;295    	if(spc_phase==0)
;;;296    		{
;;;297    		mess_send(MESS2BAT_HNDL,PARAM_BAT_MASK_OFF_AFTER_2SEC,(1<<(1-spc_bat)),20);
0001be  7d09              LDRB     r1,[r1,#0x14]
0001c0  7d60              LDRB     r0,[r4,#0x15]         ;295  ; spc_phase
0001c2  f1c10201          RSB      r2,r1,#1
0001c6  fa06f102          LSL      r1,r6,r2
;;;298    		mess_send(MESS2BPS_HNDL,PARAM_BPS_ALL_OFF_AFTER_2SEC,0xffff,20);
;;;299    
;;;300    		bat[spc_bat]._zar_cnt_ke+=abs(bat[spc_bat]._Ib);
;;;301    	    	
;;;302    		if(bat[spc_bat]._zar_cnt_ke>=AH_CONSTANT)
;;;303    			{
;;;304    			bat[spc_bat]._zar_cnt_ke-=AH_CONSTANT;
;;;305    			lc640_write_int(ADR_EE_BAT_ZAR_CNT_KE[spc_bat],lc640_read_int(ADR_EE_BAT_ZAR_CNT_KE[spc_bat])+1);
0001ca  4f91              LDR      r7,|L1.1040|
0001cc  4d8e              LDR      r5,|L1.1032|
0001ce  b20a              SXTH     r2,r1                 ;297
0001d0  b110              CBZ      r0,|L1.472|
;;;306    			}
;;;307    		}
;;;308    
;;;309    	else if(spc_phase==1)
0001d2  2801              CMP      r0,#1
0001d4  d034              BEQ      |L1.576|
0001d6  e038              B        |L1.586|
                  |L1.472|
0001d8  2314              MOVS     r3,#0x14              ;297
0001da  21ca              MOVS     r1,#0xca              ;297
0001dc  20c8              MOVS     r0,#0xc8              ;297
0001de  f7fffffe          BL       mess_send
0001e2  2314              MOVS     r3,#0x14              ;298
0001e4  f04f32ff          MOV      r2,#0xffffffff        ;298
0001e8  21ce              MOVS     r1,#0xce              ;298
0001ea  20cd              MOVS     r0,#0xcd              ;298
0001ec  f7fffffe          BL       mess_send
0001f0  7d20              LDRB     r0,[r4,#0x14]         ;300  ; spc_bat
0001f2  eb000140          ADD      r1,r0,r0,LSL #1       ;300
0001f6  eb011000          ADD      r0,r1,r0,LSL #4       ;300
0001fa  eb050080          ADD      r0,r5,r0,LSL #2       ;300
0001fe  f9b00008          LDRSH    r0,[r0,#8]            ;300
000202  f7fffffe          BL       abs
000206  7d21              LDRB     r1,[r4,#0x14]         ;300  ; spc_bat
000208  eb010241          ADD      r2,r1,r1,LSL #1       ;300
00020c  eb021201          ADD      r2,r2,r1,LSL #4       ;300
000210  eb050282          ADD      r2,r5,r2,LSL #2       ;300
000214  6993              LDR      r3,[r2,#0x18]         ;300
000216  4418              ADD      r0,r0,r3              ;300
000218  6190              STR      r0,[r2,#0x18]         ;300
00021a  f64843a0          MOV      r3,#0x8ca0            ;302
00021e  4298              CMP      r0,r3                 ;302
000220  db13              BLT      |L1.586|
000222  eba00003          SUB      r0,r0,r3              ;304
000226  6190              STR      r0,[r2,#0x18]         ;304
000228  f8370011          LDRH     r0,[r7,r1,LSL #1]     ;305
00022c  f7fffffe          BL       lc640_read_int
000230  1c40              ADDS     r0,r0,#1              ;305
000232  b201              SXTH     r1,r0                 ;305
000234  7d20              LDRB     r0,[r4,#0x14]         ;305  ; spc_bat
000236  f9370010          LDRSH    r0,[r7,r0,LSL #1]     ;305
00023a  f7fffffe          BL       lc640_write_int
00023e  e004              B        |L1.586|
                  |L1.576|
;;;310    		{
;;;311    		mess_send(MESS2BAT_HNDL,PARAM_BAT_MASK_OFF_AFTER_2SEC,(1<<(1-spc_bat)),20);
000240  2314              MOVS     r3,#0x14
000242  21ca              MOVS     r1,#0xca
000244  20c8              MOVS     r0,#0xc8
000246  f7fffffe          BL       mess_send
                  |L1.586|
;;;312    		}
;;;313    
;;;314    	if(bat[spc_bat]._Ub<(USIGN*10))
00024a  7d21              LDRB     r1,[r4,#0x14]  ; spc_bat
;;;315    		{
;;;316    		cnt_end_ke++;
;;;317    		if(cnt_end_ke>=30)
;;;318    			{
;;;319    			
;;;320    			if((spc_stat==spcKE)&&(spc_phase==0))
;;;321    				{
;;;322    				lc640_write_int(ADR_EE_BAT_C_REAL[spc_bat],lc640_read_int(ADR_EE_BAT_ZAR_CNT_KE[spc_bat]));
;;;323    				ke_mem_hndl(spc_bat,lc640_read_int(ADR_EE_BAT_ZAR_CNT_KE[spc_bat]));
;;;324    				lc640_write_int(ADR_EE_BAT_ZAR_CNT[spc_bat],0);
;;;325    				cntrl_stat=50;
;;;326    				cntrl_stat_old=50;
;;;327    				}
;;;328    
;;;329    			if((BAT_IS_ON[1-spc_bat]) == bisON)
;;;330    				{
;;;331    				spc_phase=1;
;;;332    				__ee_spc_phase=1;
;;;333    				lc640_write_int(EE_SPC_PHASE,1);
;;;334    				}			
;;;335    			else
;;;336    				{
;;;337    				spc_stat=spcOFF;
;;;338    				__ee_spc_stat=spcOFF;
;;;339    				lc640_write_int(EE_SPC_STAT,spcOFF);
00024c  f44f79f8          MOV      r9,#0x1f0
000250  eb010041          ADD      r0,r1,r1,LSL #1       ;314
000254  eb001001          ADD      r0,r0,r1,LSL #4       ;314
000258  eb050080          ADD      r0,r5,r0,LSL #2       ;314
00025c  f04f0800          MOV      r8,#0                 ;295
000260  f9b02002          LDRSH    r2,[r0,#2]            ;314
000264  486d              LDR      r0,|L1.1052|
000266  f9b00000          LDRSH    r0,[r0,#0]            ;314  ; USIGN
00026a  eb000080          ADD      r0,r0,r0,LSL #2       ;314
00026e  ebb20f40          CMP      r2,r0,LSL #1          ;314
000272  da47              BGE      |L1.772|
000274  f8b40050          LDRH     r0,[r4,#0x50]         ;316  ; cnt_end_ke
000278  f1000001          ADD      r0,r0,#1              ;316
00027c  b200              SXTH     r0,r0                 ;316
00027e  f8a40050          STRH     r0,[r4,#0x50]         ;316
000282  281e              CMP      r0,#0x1e              ;317
000284  db40              BLT      |L1.776|
000286  7ce0              LDRB     r0,[r4,#0x13]         ;320  ; spc_stat
000288  2801              CMP      r0,#1                 ;320
00028a  d122              BNE      |L1.722|
00028c  7d60              LDRB     r0,[r4,#0x15]         ;320  ; spc_phase
00028e  bb00              CBNZ     r0,|L1.722|
000290  f8370011          LDRH     r0,[r7,r1,LSL #1]     ;322
000294  f7fffffe          BL       lc640_read_int
000298  b201              SXTH     r1,r0                 ;322
00029a  4861              LDR      r0,|L1.1056|
00029c  7d22              LDRB     r2,[r4,#0x14]         ;322  ; spc_bat
00029e  f9300012          LDRSH    r0,[r0,r2,LSL #1]     ;322
0002a2  f7fffffe          BL       lc640_write_int
0002a6  7d20              LDRB     r0,[r4,#0x14]         ;323  ; spc_bat
0002a8  f8370010          LDRH     r0,[r7,r0,LSL #1]     ;323
0002ac  f7fffffe          BL       lc640_read_int
0002b0  b281              UXTH     r1,r0                 ;323
0002b2  7d20              LDRB     r0,[r4,#0x14]         ;323  ; spc_bat
0002b4  e000              B        |L1.696|
                  |L1.694|
0002b6  e049              B        |L1.844|
                  |L1.696|
0002b8  f7fffffe          BL       ke_mem_hndl
0002bc  4859              LDR      r0,|L1.1060|
0002be  7d21              LDRB     r1,[r4,#0x14]         ;324  ; spc_bat
0002c0  f9300011          LDRSH    r0,[r0,r1,LSL #1]     ;324
0002c4  2100              MOVS     r1,#0                 ;324
0002c6  f7fffffe          BL       lc640_write_int
0002ca  f04f0032          MOV      r0,#0x32              ;325
0002ce  8360              STRH     r0,[r4,#0x1a]         ;325
0002d0  83a0              STRH     r0,[r4,#0x1c]         ;326
                  |L1.722|
0002d2  7d20              LDRB     r0,[r4,#0x14]         ;329  ; spc_bat
0002d4  494b              LDR      r1,|L1.1028|
0002d6  f1c00001          RSB      r0,r0,#1              ;329
0002da  5c08              LDRB     r0,[r1,r0]            ;329
0002dc  2855              CMP      r0,#0x55              ;329
0002de  d008              BEQ      |L1.754|
0002e0  f8848013          STRB     r8,[r4,#0x13]         ;337
0002e4  f8a48054          STRH     r8,[r4,#0x54]         ;338
0002e8  2100              MOVS     r1,#0
0002ea  4648              MOV      r0,r9
0002ec  f7fffffe          BL       lc640_write_int
0002f0  e00a              B        |L1.776|
                  |L1.754|
0002f2  7566              STRB     r6,[r4,#0x15]         ;331
0002f4  f8a46058          STRH     r6,[r4,#0x58]         ;332
0002f8  2101              MOVS     r1,#1                 ;333
0002fa  f44f70fb          MOV      r0,#0x1f6             ;333
0002fe  f7fffffe          BL       lc640_write_int
000302  e001              B        |L1.776|
                  |L1.772|
;;;340    				}
;;;341    			}
;;;342    		}
;;;343    	else cnt_end_ke=0;
000304  f8a48050          STRH     r8,[r4,#0x50]
                  |L1.776|
;;;344    
;;;345    	if((bat[spc_bat]._Ub>=bat[1-spc_bat]._Ub)&&(spc_phase==1))
000308  7d21              LDRB     r1,[r4,#0x14]  ; spc_bat
00030a  eb010041          ADD      r0,r1,r1,LSL #1
00030e  eb001001          ADD      r0,r0,r1,LSL #4
000312  eb050080          ADD      r0,r5,r0,LSL #2
000316  f9b02002          LDRSH    r2,[r0,#2]
00031a  f1c10001          RSB      r0,r1,#1
00031e  eb000140          ADD      r1,r0,r0,LSL #1
000322  eb011000          ADD      r0,r1,r0,LSL #4
000326  eb050080          ADD      r0,r5,r0,LSL #2
00032a  f9b00002          LDRSH    r0,[r0,#2]
00032e  4282              CMP      r2,r0
000330  db0c              BLT      |L1.844|
000332  7d60              LDRB     r0,[r4,#0x15]  ; spc_phase
000334  2801              CMP      r0,#1
000336  d109              BNE      |L1.844|
;;;346    		{
;;;347    		spc_stat=spcOFF;
000338  f8848013          STRB     r8,[r4,#0x13]
;;;348    		__ee_spc_stat=spcOFF;
00033c  f8a48054          STRH     r8,[r4,#0x54]
;;;349    		lc640_write_int(EE_SPC_STAT,spcOFF);
000340  4648              MOV      r0,r9
000342  e8bd47f0          POP      {r4-r10,lr}
000346  2100              MOVS     r1,#0
000348  f7ffbffe          B.W      lc640_write_int
                  |L1.844|
;;;350    		}
;;;351    	}
;;;352    			
;;;353    }
00034c  e8bd87f0          POP      {r4-r10,pc}
;;;354    
                          ENDP

                  vz_start PROC
;;;355    //-----------------------------------------------
;;;356    char vz_start(char hour)
000350  b570              PUSH     {r4-r6,lr}
;;;357    {          
000352  4605              MOV      r5,r0
;;;358    char out;
;;;359    out=0;
000354  f04f0600          MOV      r6,#0
;;;360    if(spc_stat==spcOFF)
000358  4c29              LDR      r4,|L1.1024|
00035a  7ce0              LDRB     r0,[r4,#0x13]  ; spc_stat
00035c  bb18              CBNZ     r0,|L1.934|
;;;361    	{
;;;362    	spc_stat=spcVZ;
00035e  f1040416          ADD      r4,r4,#0x16
000362  f04f0102          MOV      r1,#2
000366  f8041c03          STRB     r1,[r4,#-3]
;;;363    	__ee_spc_stat=spcVZ; 
00036a  87e1              STRH     r1,[r4,#0x3e]
;;;364    	lc640_write_int(EE_SPC_STAT,__ee_spc_stat);   
00036c  f44f70f8          MOV      r0,#0x1f0
000370  f7fffffe          BL       lc640_write_int
;;;365    	vz_cnt_h=hour;
000374  86e5              STRH     r5,[r4,#0x36]
;;;366    	__ee_vz_cnt=hour*60;
000376  ebc51005          RSB      r0,r5,r5,LSL #4
00037a  ea4f0180          LSL      r1,r0,#2
00037e  460d              MOV      r5,r1
000380  87a1              STRH     r1,[r4,#0x3c]
;;;367    	lc640_write_int(EE_VZ_CNT,__ee_vz_cnt);
000382  f44f70f9          MOV      r0,#0x1f2
000386  f7fffffe          BL       lc640_write_int
;;;368    	lc640_write_int(EE_SPC_VZ_LENGT,hour*60);	
00038a  4629              MOV      r1,r5
00038c  f44f70ff          MOV      r0,#0x1fe
000390  f7fffffe          BL       lc640_write_int
;;;369    	vz_cnt_h_=0;
000394  4630              MOV      r0,r6
000396  8720              STRH     r0,[r4,#0x38]
;;;370    	vz_cnt_s=0;
000398  8660              STRH     r0,[r4,#0x32]
;;;371    	out=1;
00039a  f04f0601          MOV      r6,#1
;;;372    	vz_mem_hndl(1);
00039e  f04f0001          MOV      r0,#1
0003a2  f7fffffe          BL       vz_mem_hndl
                  |L1.934|
;;;373    	}
;;;374    //else if((spc_stat==spc_KE1p1)||(spc_stat==spc_KE1p2)) out=22; 
;;;375    //else if((spc_stat==spc_KE2p1)||(spc_stat==spc_KE2p2)) out=33;
;;;376    //plazma=out;	
;;;377    return out;
0003a6  4630              MOV      r0,r6
;;;378    }
0003a8  bd70              POP      {r4-r6,pc}
;;;379    
                          ENDP

                  vz_stop PROC
;;;380    //-----------------------------------------------
;;;381    void vz_stop(void)
0003aa  b510              PUSH     {r4,lr}
;;;382    {
;;;383    if(spc_stat==spcVZ)
0003ac  4c14              LDR      r4,|L1.1024|
0003ae  7ce0              LDRB     r0,[r4,#0x13]  ; spc_stat
0003b0  2802              CMP      r0,#2
0003b2  d113              BNE      |L1.988|
;;;384         {
;;;385    vz_mem_hndl(vz_cnt_h);          
0003b4  f1040412          ADD      r4,r4,#0x12
0003b8  8f60              LDRH     r0,[r4,#0x3a]  ; vz_cnt_h
0003ba  f7fffffe          BL       vz_mem_hndl
;;;386    vz_cnt_s=0;
0003be  f04f0000          MOV      r0,#0
0003c2  86e0              STRH     r0,[r4,#0x36]
;;;387    vz_cnt_h=0;
0003c4  8760              STRH     r0,[r4,#0x3a]
;;;388    vz_cnt_h_=0;
0003c6  87a0              STRH     r0,[r4,#0x3c]
;;;389    spc_stat=spcOFF;
0003c8  7060              STRB     r0,[r4,#1]
;;;390    
;;;391    		__ee_spc_stat=spcOFF;
0003ca  f8a40042          STRH     r0,[r4,#0x42]
;;;392    		lc640_write_int(EE_SPC_STAT,spcOFF);
0003ce  4601              MOV      r1,r0
0003d0  e8bd4010          POP      {r4,lr}
0003d4  f44f70f8          MOV      r0,#0x1f0
0003d8  f7ffbffe          B.W      lc640_write_int
                  |L1.988|
;;;393         }
;;;394    
;;;395    }
0003dc  bd10              POP      {r4,pc}
;;;396    
                          ENDP

                  avz_next_date_hndl PROC
;;;397    //-----------------------------------------------
;;;398    void avz_next_date_hndl(void)
0003de  b570              PUSH     {r4-r6,lr}
;;;399    {
;;;400    if((LPC_RTC->MONTH+AVZ)>12)lc640_write_int(EE_YEAR_AVZ,LPC_RTC->YEAR+1);
0003e0  4c0d              LDR      r4,|L1.1048|
0003e2  3c20              SUBS     r4,r4,#0x20
0003e4  f8940038          LDRB     r0,[r4,#0x38]
0003e8  4d0f              LDR      r5,|L1.1064|
0003ea  7829              LDRB     r1,[r5,#0]  ; AVZ
0003ec  4408              ADD      r0,r0,r1
0003ee  280c              CMP      r0,#0xc
0003f0  d91c              BLS      |L1.1068|
0003f2  8fa0              LDRH     r0,[r4,#0x3c]
0003f4  1c40              ADDS     r0,r0,#1
0003f6  b201              SXTH     r1,r0
0003f8  20b8              MOVS     r0,#0xb8
0003fa  f7fffffe          BL       lc640_write_int
0003fe  e01a              B        |L1.1078|
                  |L1.1024|
                          DCD      ||area_number.21||
                  |L1.1028|
                          DCD      BAT_IS_ON
                  |L1.1032|
                          DCD      bat
                  |L1.1036|
                          DCD      IKB
                  |L1.1040|
                          DCD      ADR_EE_BAT_ZAR_CNT_KE
                  |L1.1044|
                          DCD      bat_u_old_cnt
                  |L1.1048|
                          DCD      0x40024020
                  |L1.1052|
                          DCD      USIGN
                  |L1.1056|
                          DCD      ADR_EE_BAT_C_REAL
                  |L1.1060|
                          DCD      ADR_EE_BAT_ZAR_CNT
                  |L1.1064|
                          DCD      AVZ
                  |L1.1068|
;;;401    else lc640_write_int(EE_YEAR_AVZ,LPC_RTC->YEAR);
00042c  f9b4103c          LDRSH    r1,[r4,#0x3c]
000430  20b8              MOVS     r0,#0xb8
000432  f7fffffe          BL       lc640_write_int
                  |L1.1078|
;;;402    
;;;403    //lc640_write_int(EE_YEAR_AVZ,6);
;;;404    
;;;405    if((LPC_RTC->MONTH+AVZ)>12)lc640_write_int(EE_MONTH_AVZ,(LPC_RTC->MONTH+AVZ)-12);
000436  f8941038          LDRB     r1,[r4,#0x38]
00043a  7828              LDRB     r0,[r5,#0]  ; AVZ
00043c  4401              ADD      r1,r1,r0
00043e  290c              CMP      r1,#0xc
000440  d907              BLS      |L1.1106|
000442  f8941038          LDRB     r1,[r4,#0x38]
000446  380c              SUBS     r0,r0,#0xc
000448  4401              ADD      r1,r1,r0
00044a  20b6              MOVS     r0,#0xb6
00044c  f7fffffe          BL       lc640_write_int
000450  e005              B        |L1.1118|
                  |L1.1106|
;;;406    else lc640_write_int(EE_MONTH_AVZ,LPC_RTC->MONTH+AVZ);                                                 
000452  f8941038          LDRB     r1,[r4,#0x38]
000456  4401              ADD      r1,r1,r0
000458  20b6              MOVS     r0,#0xb6
00045a  f7fffffe          BL       lc640_write_int
                  |L1.1118|
;;;407    
;;;408    //lc640_write_int(EE_MONTH_AVZ,5);
;;;409    
;;;410    if(LPC_RTC->DOM>28) lc640_write_int(EE_DATE_AVZ,28);
00045e  f894002c          LDRB     r0,[r4,#0x2c]
000462  281c              CMP      r0,#0x1c
000464  d904              BLS      |L1.1136|
000466  211c              MOVS     r1,#0x1c
000468  20b4              MOVS     r0,#0xb4
00046a  f7fffffe          BL       lc640_write_int
00046e  e004              B        |L1.1146|
                  |L1.1136|
;;;411    else lc640_write_int(EE_DATE_AVZ,LPC_RTC->DOM);
000470  f894102c          LDRB     r1,[r4,#0x2c]
000474  20b4              MOVS     r0,#0xb4
000476  f7fffffe          BL       lc640_write_int
                  |L1.1146|
;;;412    
;;;413    //lc640_write_int(EE_DATE_AVZ,4);
;;;414    
;;;415    lc640_write_int(EE_HOUR_AVZ,LPC_RTC->HOUR);
00047a  f1040420          ADD      r4,r4,#0x20
00047e  7a21              LDRB     r1,[r4,#8]
000480  f04f00ae          MOV      r0,#0xae
000484  f7fffffe          BL       lc640_write_int
;;;416    lc640_write_int(EE_MIN_AVZ,LPC_RTC->MIN);
000488  7921              LDRB     r1,[r4,#4]
00048a  20b0              MOVS     r0,#0xb0
00048c  f7fffffe          BL       lc640_write_int
;;;417    lc640_write_int(EE_SEC_AVZ,LPC_RTC->SEC);
000490  7821              LDRB     r1,[r4,#0]
000492  e8bd4070          POP      {r4-r6,lr}
000496  20b2              MOVS     r0,#0xb2
000498  f7ffbffe          B.W      lc640_write_int
;;;418    
;;;419    }
;;;420    
                          ENDP

                  avz_drv PROC
;;;421    //-----------------------------------------------
;;;422    void avz_drv(void)                               
00049c  b510              PUSH     {r4,lr}
;;;423    {                
;;;424    if(AVZ!=AVZ_OFF)
00049e  48ff              LDR      r0,|L1.2204|
;;;425    	{
;;;426    	if((LPC_RTC->YEAR==YEAR_AVZ)&&(LPC_RTC->MONTH==MONTH_AVZ)&&(LPC_RTC->DOM==DATE_AVZ)&&(LPC_RTC->HOUR==HOUR_AVZ)&&(LPC_RTC->MIN==MIN_AVZ)&&(LPC_RTC->SEC==SEC_AVZ))
;;;427    		{
;;;428    		bAVZ=1;
0004a0  4cff              LDR      r4,|L1.2208|
0004a2  7800              LDRB     r0,[r0,#0]            ;424  ; AVZ
0004a4  b330              CBZ      r0,|L1.1268|
0004a6  48ff              LDR      r0,|L1.2212|
0004a8  8f82              LDRH     r2,[r0,#0x3c]         ;426
0004aa  49ff              LDR      r1,|L1.2216|
0004ac  8809              LDRH     r1,[r1,#0]            ;426  ; YEAR_AVZ
0004ae  428a              CMP      r2,r1                 ;426
0004b0  d120              BNE      |L1.1268|
0004b2  f8902038          LDRB     r2,[r0,#0x38]         ;426
0004b6  49fd              LDR      r1,|L1.2220|
0004b8  8809              LDRH     r1,[r1,#0]            ;426  ; MONTH_AVZ
0004ba  428a              CMP      r2,r1                 ;426
0004bc  d11a              BNE      |L1.1268|
0004be  f890102c          LDRB     r1,[r0,#0x2c]         ;426
0004c2  4afb              LDR      r2,|L1.2224|
0004c4  8812              LDRH     r2,[r2,#0]            ;426  ; DATE_AVZ
0004c6  4291              CMP      r1,r2                 ;426
0004c8  d114              BNE      |L1.1268|
0004ca  f8901028          LDRB     r1,[r0,#0x28]         ;426
0004ce  4af9              LDR      r2,|L1.2228|
0004d0  8812              LDRH     r2,[r2,#0]            ;426  ; HOUR_AVZ
0004d2  4291              CMP      r1,r2                 ;426
0004d4  d10e              BNE      |L1.1268|
0004d6  f8901024          LDRB     r1,[r0,#0x24]         ;426
0004da  4af7              LDR      r2,|L1.2232|
0004dc  8812              LDRH     r2,[r2,#0]            ;426  ; MIN_AVZ
0004de  4291              CMP      r1,r2                 ;426
0004e0  d108              BNE      |L1.1268|
0004e2  f8900020          LDRB     r0,[r0,#0x20]         ;426
0004e6  49f5              LDR      r1,|L1.2236|
0004e8  8809              LDRH     r1,[r1,#0]            ;426  ; SEC_AVZ
0004ea  4288              CMP      r0,r1                 ;426
0004ec  d102              BNE      |L1.1268|
0004ee  f04f0001          MOV      r0,#1
0004f2  75a0              STRB     r0,[r4,#0x16]
                  |L1.1268|
;;;429    		}
;;;430    	}
;;;431    if(bAVZ)
0004f4  7da0              LDRB     r0,[r4,#0x16]  ; bAVZ
0004f6  2800              CMP      r0,#0
0004f8  d00c              BEQ      |L1.1300|
;;;432    	{
;;;433    	if(vz_start(AVZ_TIME))
0004fa  48f1              LDR      r0,|L1.2240|
0004fc  8800              LDRH     r0,[r0,#0]  ; AVZ_TIME
0004fe  b2c0              UXTB     r0,r0
000500  f7fffffe          BL       vz_start
000504  2800              CMP      r0,#0
000506  d005              BEQ      |L1.1300|
;;;434    		{
;;;435    		bAVZ=0;
000508  f04f0000          MOV      r0,#0
00050c  75a0              STRB     r0,[r4,#0x16]
;;;436    		avz_next_date_hndl();
00050e  e8bd4010          POP      {r4,lr}
000512  e7fe              B        avz_next_date_hndl
                  |L1.1300|
;;;437    		}
;;;438    	}	
;;;439    
;;;440    }
000514  bd10              POP      {r4,pc}
;;;441    
                          ENDP

                  vz_drv PROC
;;;442    //-----------------------------------------------
;;;443    void vz_drv(void)
000516  b570              PUSH     {r4-r6,lr}
;;;444    { 
;;;445    if(spc_stat==spcVZ)
000518  4ce1              LDR      r4,|L1.2208|
00051a  7ce0              LDRB     r0,[r4,#0x13]  ; spc_stat
00051c  2802              CMP      r0,#2
00051e  d144              BNE      |L1.1450|
;;;446    	{
;;;447    	if(vz_cnt_s_<3600)
000520  f8b4004a          LDRH     r0,[r4,#0x4a]  ; vz_cnt_s_
000524  f44f6161          MOV      r1,#0xe10
;;;448    		{
;;;449    		vz_cnt_s_++;
;;;450    		if(vz_cnt_s_>=3600)
;;;451    			{
;;;452    			vz_cnt_s_=0;
000528  2500              MOVS     r5,#0
00052a  4288              CMP      r0,r1                 ;447
00052c  d215              BCS      |L1.1370|
00052e  f1000001          ADD      r0,r0,#1              ;449
000532  b280              UXTH     r0,r0                 ;449
000534  f8a4004a          STRH     r0,[r4,#0x4a]         ;449
000538  4288              CMP      r0,r1                 ;450
00053a  d30e              BCC      |L1.1370|
00053c  f8a4504a          STRH     r5,[r4,#0x4a]
;;;453    			if(vz_cnt_h)
000540  f8b4004c          LDRH     r0,[r4,#0x4c]  ; vz_cnt_h
000544  b148              CBZ      r0,|L1.1370|
;;;454    				{
;;;455    				vz_cnt_h--;
000546  f1a00001          SUB      r0,r0,#1
00054a  f8240f4c          STRH     r0,[r4,#0x4c]!
;;;456    				vz_cnt_h_++;
00054e  8860              LDRH     r0,[r4,#2]  ; vz_cnt_h_
000550  f1000001          ADD      r0,r0,#1
000554  8060              STRH     r0,[r4,#2]
000556  f1a4044c          SUB      r4,r4,#0x4c
                  |L1.1370|
;;;457    				}
;;;458    			}
;;;459    		}
;;;460    
;;;461    
;;;462    	if(vz_cnt_s<60)
00055a  f8b40048          LDRH     r0,[r4,#0x48]  ; vz_cnt_s
00055e  283c              CMP      r0,#0x3c
000560  d223              BCS      |L1.1450|
;;;463    		{
;;;464    		vz_cnt_s++;
000562  f1000001          ADD      r0,r0,#1
000566  b280              UXTH     r0,r0
000568  f8a40048          STRH     r0,[r4,#0x48]
;;;465    		if(vz_cnt_s>=60)
00056c  283c              CMP      r0,#0x3c
00056e  d31c              BCC      |L1.1450|
;;;466    			{
;;;467    			vz_cnt_s=0;
000570  f8245f48          STRH     r5,[r4,#0x48]!
;;;468    			
;;;469    			__ee_vz_cnt--;
000574  8960              LDRH     r0,[r4,#0xa]  ; __ee_vz_cnt
000576  f1a00001          SUB      r0,r0,#1
00057a  b201              SXTH     r1,r0
00057c  8161              STRH     r1,[r4,#0xa]
;;;470    			lc640_write_int(EE_VZ_CNT,__ee_vz_cnt);
00057e  f44f70f9          MOV      r0,#0x1f2
000582  f7fffffe          BL       lc640_write_int
;;;471    			if(!__ee_vz_cnt)
000586  8960              LDRH     r0,[r4,#0xa]  ; __ee_vz_cnt
000588  f1a40448          SUB      r4,r4,#0x48
00058c  2800              CMP      r0,#0
00058e  d10c              BNE      |L1.1450|
;;;472    				{
;;;473    				spc_stat=spcOFF;
000590  74e5              STRB     r5,[r4,#0x13]
;;;474    						__ee_spc_stat=spcOFF;
000592  f8a45054          STRH     r5,[r4,#0x54]
;;;475    		lc640_write_int(EE_SPC_STAT,spcOFF);
000596  4601              MOV      r1,r0
000598  f44f70f8          MOV      r0,#0x1f0
00059c  f7fffffe          BL       lc640_write_int
;;;476    				vz_mem_hndl(0);
0005a0  e8bd4070          POP      {r4-r6,lr}
0005a4  2000              MOVS     r0,#0
0005a6  f7ffbffe          B.W      vz_mem_hndl
                  |L1.1450|
;;;477    				}
;;;478    			}
;;;479    		}
;;;480    
;;;481    	}
;;;482    
;;;483    
;;;484    } 
0005aa  bd70              POP      {r4-r6,pc}
;;;485    
                          ENDP

                  kb_init PROC
;;;489    //-----------------------------------------------
;;;490    void kb_init(void)
0005ac  48c5              LDR      r0,|L1.2244|
;;;491    {
;;;492    main_kb_cnt=(TBAT*60)-60/*120*/;
0005ae  f06f013b          MVN      r1,#0x3b
0005b2  8800              LDRH     r0,[r0,#0]  ; TBAT
0005b4  ebc01000          RSB      r0,r0,r0,LSL #4
0005b8  eb010080          ADD      r0,r1,r0,LSL #2
0005bc  49b8              LDR      r1,|L1.2208|
0005be  8788              STRH     r0,[r1,#0x3c]
;;;493    }
0005c0  4770              BX       lr
;;;494    
                          ENDP

                  kb_hndl PROC
;;;495    //-----------------------------------------------
;;;496    void kb_hndl(void)
0005c2  e92d5ff0          PUSH     {r4-r12,lr}
;;;497    {
;;;498    
;;;499    static signed short ibat[2],ibat_[2],ibat_ips,ibat_ips_;
;;;500    #ifdef UKU_TELECORE2015
;;;501    if(((++main_kb_cnt>=TBAT*60)&&(TBAT))&&(BAT_TYPE==0))
;;;502    #else 
;;;503    if(((++main_kb_cnt>=TBAT*60)&&(TBAT)))
0005c6  f8df82d8          LDR      r8,|L1.2208|
;;;504    #endif
;;;505    	{
;;;506    	main_kb_cnt=0;
;;;507    	
;;;508    	kb_start[0]=0;
;;;509    	kb_start[1]=0;
;;;510    	kb_start_ips=0;
;;;511    
;;;512    	if( (BAT_IS_ON[0]==bisON) && (bat[0]._Ub>80) && ( (abs(bat[0]._Ib)<IKB) || (bat[0]._av&1) ) ) kb_start[0]=1;
;;;513    	if( (BAT_IS_ON[1]==bisON) && (bat[1]._Ub>80) && ( (abs(bat[1]._Ib)<IKB) || (bat[1]._av&1) ) ) kb_start[1]=1;
;;;514    #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;515    	if( (!ips_bat_av_vzvod)                      && ((abs(Ib_ips_termokompensat)<IKB) || (bat_ips._av&1) ) ) kb_start_ips=1;
0005ca  f8dfa2fc          LDR      r10,|L1.2248|
0005ce  2500              MOVS     r5,#0                 ;503
0005d0  f8b8003c          LDRH     r0,[r8,#0x3c]         ;503  ; main_kb_cnt
0005d4  4ebd              LDR      r6,|L1.2252|
0005d6  1c40              ADDS     r0,r0,#1              ;503
0005d8  b201              SXTH     r1,r0                 ;503
0005da  48ba              LDR      r0,|L1.2244|
0005dc  f8a8103c          STRH     r1,[r8,#0x3c]         ;503
0005e0  f8df92ec          LDR      r9,|L1.2256|
0005e4  f9b00000          LDRSH    r0,[r0,#0]            ;503  ; TBAT
;;;516    #endif	
;;;517    	if( (net_av) || (num_of_wrks_bps==0) || ( (spc_stat!=spcOFF) && (spc_stat!=spcVZ) ) ) 
;;;518    		{
;;;519    		kb_start[0]=0;
;;;520    		kb_start[1]=0;
;;;521    		kb_start_ips=0;
;;;522    		}
;;;523    
;;;524    	if((kb_start[0]==1)||(kb_start[1]==1)||(kb_start_ips==1))
;;;525    		{
;;;526    		kb_cnt_1lev=10;
0005e8  270a              MOVS     r7,#0xa
0005ea  ebc01200          RSB      r2,r0,r0,LSL #4       ;503
0005ee  f04f0b01          MOV      r11,#1                ;512
0005f2  f1080442          ADD      r4,r8,#0x42           ;508
0005f6  ebb10f82          CMP      r1,r2,LSL #2          ;503
0005fa  db61              BLT      |L1.1728|
0005fc  b3f0              CBZ      r0,|L1.1660|
0005fe  f8a8503c          STRH     r5,[r8,#0x3c]         ;506
000602  7025              STRB     r5,[r4,#0]            ;508
000604  7065              STRB     r5,[r4,#1]            ;509
000606  f888500d          STRB     r5,[r8,#0xd]          ;510
00060a  48b2              LDR      r0,|L1.2260|
00060c  7800              LDRB     r0,[r0,#0]            ;512  ; BAT_IS_ON
00060e  2855              CMP      r0,#0x55              ;512
000610  d111              BNE      |L1.1590|
000612  f9b60002          LDRSH    r0,[r6,#2]            ;512  ; bat
000616  2850              CMP      r0,#0x50              ;512
000618  dd0d              BLE      |L1.1590|
00061a  f9b60008          LDRSH    r0,[r6,#8]            ;512  ; bat
00061e  f7fffffe          BL       abs
000622  f9b91000          LDRSH    r1,[r9,#0]            ;512  ; IKB
000626  4288              CMP      r0,r1                 ;512
000628  db03              BLT      |L1.1586|
00062a  f896003d          LDRB     r0,[r6,#0x3d]         ;512  ; bat
00062e  07c0              LSLS     r0,r0,#31             ;512
000630  d001              BEQ      |L1.1590|
                  |L1.1586|
000632  f884b000          STRB     r11,[r4,#0]           ;512
                  |L1.1590|
000636  48a7              LDR      r0,|L1.2260|
000638  7840              LDRB     r0,[r0,#1]            ;513  ; BAT_IS_ON
00063a  2855              CMP      r0,#0x55              ;513
00063c  d111              BNE      |L1.1634|
00063e  f9b6004e          LDRSH    r0,[r6,#0x4e]         ;513  ; bat
000642  2850              CMP      r0,#0x50              ;513
000644  dd0d              BLE      |L1.1634|
000646  f9b60054          LDRSH    r0,[r6,#0x54]         ;513  ; bat
00064a  f7fffffe          BL       abs
00064e  f9b91000          LDRSH    r1,[r9,#0]            ;513  ; IKB
000652  4288              CMP      r0,r1                 ;513
000654  db03              BLT      |L1.1630|
000656  f8960089          LDRB     r0,[r6,#0x89]         ;513  ; bat
00065a  07c0              LSLS     r0,r0,#31             ;513
00065c  d001              BEQ      |L1.1634|
                  |L1.1630|
00065e  f884b001          STRB     r11,[r4,#1]           ;513
                  |L1.1634|
000662  489d              LDR      r0,|L1.2264|
000664  7800              LDRB     r0,[r0,#0]            ;515  ; ips_bat_av_vzvod
000666  b980              CBNZ     r0,|L1.1674|
000668  f9ba0000          LDRSH    r0,[r10,#0]           ;515  ; Ib_ips_termokompensat
00066c  f7fffffe          BL       abs
000670  f9b91000          LDRSH    r1,[r9,#0]            ;515  ; IKB
000674  4288              CMP      r0,r1                 ;515
000676  db06              BLT      |L1.1670|
000678  4898              LDR      r0,|L1.2268|
00067a  e000              B        |L1.1662|
                  |L1.1660|
00067c  e020              B        |L1.1728|
                  |L1.1662|
00067e  f890003d          LDRB     r0,[r0,#0x3d]         ;515  ; bat_ips
000682  07c0              LSLS     r0,r0,#31             ;515
000684  d001              BEQ      |L1.1674|
                  |L1.1670|
000686  f888b00d          STRB     r11,[r8,#0xd]         ;515
                  |L1.1674|
00068a  4895              LDR      r0,|L1.2272|
00068c  7800              LDRB     r0,[r0,#0]            ;517  ; net_av
00068e  b938              CBNZ     r0,|L1.1696|
000690  f898000e          LDRB     r0,[r8,#0xe]          ;517  ; num_of_wrks_bps
000694  b120              CBZ      r0,|L1.1696|
000696  f8980013          LDRB     r0,[r8,#0x13]         ;517  ; spc_stat
00069a  b128              CBZ      r0,|L1.1704|
00069c  2802              CMP      r0,#2                 ;517
00069e  d003              BEQ      |L1.1704|
                  |L1.1696|
0006a0  7025              STRB     r5,[r4,#0]            ;519
0006a2  7065              STRB     r5,[r4,#1]            ;520
0006a4  f888500d          STRB     r5,[r8,#0xd]          ;521
                  |L1.1704|
0006a8  7820              LDRB     r0,[r4,#0]            ;524  ; kb_start
0006aa  2801              CMP      r0,#1                 ;524
0006ac  d01f              BEQ      |L1.1774|
0006ae  7860              LDRB     r0,[r4,#1]            ;524  ; kb_start
0006b0  2801              CMP      r0,#1                 ;524
0006b2  d01c              BEQ      |L1.1774|
0006b4  f898000d          LDRB     r0,[r8,#0xd]          ;524  ; kb_start_ips
0006b8  2801              CMP      r0,#1                 ;524
0006ba  d018              BEQ      |L1.1774|
;;;527    		}
;;;528    	else kb_cnt_1lev=0;
0006bc  f8a8503e          STRH     r5,[r8,#0x3e]
                  |L1.1728|
;;;529    	}
;;;530    
;;;531    if(kb_cnt_1lev)
0006c0  4641              MOV      r1,r8
0006c2  f9b8003e          LDRSH    r0,[r8,#0x3e]  ; kb_cnt_1lev
;;;532    	{
;;;533    	kb_cnt_1lev--;
;;;534    
;;;535    	if(kb_cnt_1lev>5)mess_send(MESS2CNTRL_HNDL,PARAM_CNTRL_STAT_PLUS,30,15);
;;;536    	else if(kb_cnt_1lev>0) mess_send(MESS2CNTRL_HNDL,PARAM_CNTRL_STAT_MINUS,30,15);
;;;537    
;;;538    
;;;539    	if(kb_cnt_1lev==5)
;;;540    		{
;;;541    		ibat[0]=abs(bat[0]._Ib);
0006c6  f8df81d8          LDR      r8,|L1.2208|
0006ca  2800              CMP      r0,#0                 ;531
0006cc  f1080860          ADD      r8,r8,#0x60
0006d0  d07e              BEQ      |L1.2000|
0006d2  f1a00001          SUB      r0,r0,#1              ;533
0006d6  b200              SXTH     r0,r0                 ;533
0006d8  468b              MOV      r11,r1                ;533
0006da  87c8              STRH     r0,[r1,#0x3e]         ;533
0006dc  2805              CMP      r0,#5                 ;535
0006de  dd09              BLE      |L1.1780|
0006e0  230f              MOVS     r3,#0xf               ;535
0006e2  221e              MOVS     r2,#0x1e              ;535
0006e4  2164              MOVS     r1,#0x64              ;535
0006e6  20e1              MOVS     r0,#0xe1              ;535
0006e8  f7fffffe          BL       mess_send
0006ec  e00a              B        |L1.1796|
                  |L1.1774|
0006ee  f8a8703e          STRH     r7,[r8,#0x3e]         ;526
0006f2  e7e5              B        |L1.1728|
                  |L1.1780|
0006f4  2800              CMP      r0,#0                 ;536
0006f6  dd05              BLE      |L1.1796|
0006f8  230f              MOVS     r3,#0xf               ;536
0006fa  221e              MOVS     r2,#0x1e              ;536
0006fc  2169              MOVS     r1,#0x69              ;536
0006fe  20e1              MOVS     r0,#0xe1              ;536
000700  f7fffffe          BL       mess_send
                  |L1.1796|
000704  f8bb003e          LDRH     r0,[r11,#0x3e]        ;539  ; kb_cnt_1lev
000708  2805              CMP      r0,#5                 ;539
00070a  d111              BNE      |L1.1840|
00070c  f9b60008          LDRSH    r0,[r6,#8]  ; bat
000710  f7fffffe          BL       abs
000714  f8a80000          STRH     r0,[r8,#0]
;;;542    		ibat[1]=abs(bat[1]._Ib);
000718  f9b60054          LDRSH    r0,[r6,#0x54]  ; bat
00071c  f7fffffe          BL       abs
000720  f8a80002          STRH     r0,[r8,#2]
;;;543    		ibat_ips=abs(Ib_ips_termokompensat);
000724  f9ba0000          LDRSH    r0,[r10,#0]  ; Ib_ips_termokompensat
000728  f7fffffe          BL       abs
00072c  f8ab0020          STRH     r0,[r11,#0x20]
                  |L1.1840|
;;;544    		}
;;;545    	
;;;546    	if(kb_cnt_1lev==0)
000730  485b              LDR      r0,|L1.2208|
000732  8fc0              LDRH     r0,[r0,#0x3e]  ; kb_cnt_1lev
000734  2800              CMP      r0,#0
000736  d154              BNE      |L1.2018|
;;;547    		{
;;;548    		ibat_[0]=abs(bat[0]._Ib);
000738  f9b60008          LDRSH    r0,[r6,#8]  ; bat
00073c  f7fffffe          BL       abs
000740  f8dfb15c          LDR      r11,|L1.2208|
000744  f10b0b64          ADD      r11,r11,#0x64
000748  f8ab0000          STRH     r0,[r11,#0]
;;;549    		ibat_[1]=abs(bat[1]._Ib);
00074c  f9b60054          LDRSH    r0,[r6,#0x54]  ; bat
000750  f7fffffe          BL       abs
000754  f8ab0002          STRH     r0,[r11,#2]
;;;550    		ibat_ips_=abs(Ib_ips_termokompensat);
000758  f9ba0000          LDRSH    r0,[r10,#0]  ; Ib_ips_termokompensat
00075c  f7fffffe          BL       abs
000760  f8dfa13c          LDR      r10,|L1.2208|
000764  f8aa0022          STRH     r0,[r10,#0x22]
;;;551    
;;;552    		kb_cnt_2lev=0;
000768  f8aa5040          STRH     r5,[r10,#0x40]
;;;553    
;;;554    
;;;555    		if(( (ibat[0]+ibat_[0]) < IKB )&& (kb_start[0]==1))
00076c  f9b80000          LDRSH    r0,[r8,#0]  ; ibat
000770  f9bb1000          LDRSH    r1,[r11,#0]  ; ibat_
000774  4408              ADD      r0,r0,r1
000776  f9b91000          LDRSH    r1,[r9,#0]  ; IKB
00077a  4288              CMP      r0,r1
00077c  da02              BGE      |L1.1924|
00077e  7820              LDRB     r0,[r4,#0]  ; kb_start
000780  2801              CMP      r0,#1
000782  d030              BEQ      |L1.2022|
                  |L1.1924|
;;;556    			{
;;;557    			kb_cnt_2lev=10;  
;;;558    			}
;;;559    		else if(bat[0]._Ub>200)
000784  f9b60002          LDRSH    r0,[r6,#2]  ; bat
000788  28c8              CMP      r0,#0xc8
00078a  dd04              BLE      |L1.1942|
;;;560    			{
;;;561    			kb_start[0]=0;
00078c  7025              STRB     r5,[r4,#0]
;;;562    			avar_bat_hndl(0,0);
00078e  2100              MOVS     r1,#0
000790  4608              MOV      r0,r1
000792  f7fffffe          BL       avar_bat_hndl
                  |L1.1942|
;;;563    			}
;;;564    		
;;;565    		if(( (ibat[1]+ibat_[1]) < IKB ) && (kb_start[1]==1))
000796  f9b80002          LDRSH    r0,[r8,#2]  ; ibat
00079a  f9bb1002          LDRSH    r1,[r11,#2]  ; ibat_
00079e  4408              ADD      r0,r0,r1
0007a0  f9b91000          LDRSH    r1,[r9,#0]  ; IKB
0007a4  4288              CMP      r0,r1
0007a6  da02              BGE      |L1.1966|
0007a8  7860              LDRB     r0,[r4,#1]  ; kb_start
0007aa  2801              CMP      r0,#1
0007ac  d01e              BEQ      |L1.2028|
                  |L1.1966|
;;;566    			{
;;;567    			kb_cnt_2lev=10;     
;;;568    			}
;;;569    		else  if(bat[1]._Ub>200)
0007ae  f9b6004e          LDRSH    r0,[r6,#0x4e]  ; bat
0007b2  28c8              CMP      r0,#0xc8
0007b4  dd04              BLE      |L1.1984|
;;;570    			{
;;;571    			kb_start[1]=0;
0007b6  7065              STRB     r5,[r4,#1]
;;;572    			avar_bat_hndl(1,0);
0007b8  2100              MOVS     r1,#0
0007ba  2001              MOVS     r0,#1
0007bc  f7fffffe          BL       avar_bat_hndl
                  |L1.1984|
;;;573    			}
;;;574    #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;575    		if(( (ibat_ips+ibat_ips_) < IKB ) && (kb_start_ips==1))
0007c0  f9ba0020          LDRSH    r0,[r10,#0x20]  ; ibat_ips
0007c4  f9ba1022          LDRSH    r1,[r10,#0x22]  ; ibat_ips_
0007c8  4408              ADD      r0,r0,r1
0007ca  f9b91000          LDRSH    r1,[r9,#0]  ; IKB
0007ce  e000              B        |L1.2002|
                  |L1.2000|
0007d0  e00f              B        |L1.2034|
                  |L1.2002|
0007d2  4288              CMP      r0,r1
0007d4  da05              BGE      |L1.2018|
0007d6  f89a000d          LDRB     r0,[r10,#0xd]  ; kb_start_ips
0007da  2801              CMP      r0,#1
0007dc  d101              BNE      |L1.2018|
;;;576    			{
;;;577    			kb_cnt_2lev=10;     
0007de  f8aa7040          STRH     r7,[r10,#0x40]
                  |L1.2018|
;;;578    			}
;;;579    /*		else  if(bat[1]._Ub>200)
;;;580    			{
;;;581    			kb_start[1]=0;
;;;582    			avar_bat_hndl(1,0);
;;;583    			} */
;;;584    #endif
;;;585    		}	
;;;586    
;;;587    
;;;588    	}
;;;589    else if(kb_cnt_2lev)
;;;590    	{
;;;591    	kb_cnt_2lev--;
;;;592    
;;;593    	if(kb_cnt_2lev>5)mess_send(MESS2CNTRL_HNDL,PARAM_CNTRL_STAT_PLUS,200,15);
;;;594    	else if(kb_cnt_2lev>0) mess_send(MESS2CNTRL_HNDL,PARAM_CNTRL_STAT_MINUS,200,15);
;;;595    
;;;596    
;;;597    	if(kb_cnt_2lev==5)
;;;598    		{
;;;599    		ibat[0]=abs(bat[0]._Ib);
;;;600    		ibat[1]=abs(bat[1]._Ib);
;;;601    		ibat_ips=abs(Ib_ips_termokompensat);
;;;602    		}
;;;603    	
;;;604    	if(kb_cnt_2lev==0)
;;;605    		{
;;;606    		ibat_[0]=abs(bat[0]._Ib);
;;;607    		ibat_[1]=abs(bat[1]._Ib);
;;;608    		ibat_ips_=abs(Ib_ips_termokompensat);
;;;609    
;;;610    		kb_full_ver=0;
;;;611    
;;;612    		if(( (ibat[0]+ibat_[0]) < IKB ) && (kb_start[0]==1))
;;;613    			{
;;;614    			kb_full_ver=1;  
;;;615    			}
;;;616    		else if(bat[0]._Ub>200)			
;;;617    			{
;;;618    			kb_start[0]=0;
;;;619    			avar_bat_hndl(0,0);
;;;620    			}
;;;621    
;;;622    		if(( (ibat[1]+ibat_[1]) < IKB ) && (kb_start[1]==1))
;;;623    			{
;;;624    			kb_full_ver=1;     
;;;625    			}
;;;626    		else	if(bat[1]._Ub>200)		
;;;627    			{
;;;628    			kb_start[1]=0;
;;;629    			avar_bat_hndl(1,0);
;;;630    			}
;;;631    #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;632    		if(( (ibat_ips+ibat_ips_) < IKB )  && (kb_start_ips==1))
;;;633    			{
;;;634    			kb_full_ver=1;     
;;;635    			}
;;;636    #endif
;;;637    		}	
;;;638    	}
;;;639    
;;;640    else if(kb_full_ver)
;;;641    	{
;;;642    	
;;;643    	mess_send(MESS2CNTRL_HNDL,PARAM_CNTRL_STAT_STEP_DOWN,0,15);
;;;644    
;;;645    	if( abs(bat[0]._Ib) > IKB ) 
;;;646    		{
;;;647    		if(kb_start[0]==1)
;;;648    			{
;;;649    			kb_start[0]=0;
;;;650    			avar_bat_hndl(0,0);
;;;651    			}
;;;652    		}
;;;653    
;;;654    	if( abs(bat[1]._Ib) > IKB ) 
;;;655    		{
;;;656    		if(kb_start[1]==1)
;;;657    			{
;;;658    			kb_start[1]=0;
;;;659    			avar_bat_hndl(1,0);
;;;660    			}
;;;661    		}
;;;662    #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;663    	if( abs(Ib_ips_termokompensat) > IKB ) 
;;;664    		{
;;;665    		if(kb_start_ips==1)
;;;666    			{
;;;667    			kb_start_ips=0;
;;;668    			avar_bat_ips_hndl(0);
;;;669    			}
;;;670    		}
;;;671    #endif
;;;672    
;;;673    	if ((kb_start[0]==0) && (kb_start[1]==0) && (kb_start_ips==0)) 
;;;674    		{
;;;675    		kb_full_ver=0;
;;;676    		}
;;;677    
;;;678    	if(( (mess_find(MESS2KB_HNDL))	&& (mess_data[0]==PARAM_CNTRL_IS_DOWN) ) || (load_U<(USIGN*10)) )
;;;679    		{
;;;680    		kb_full_ver=0;
;;;681    		if((kb_start[0]==1)&&((load_I>(2*IKB)/10))&&(!(bat[0]._av&0x01))) avar_bat_hndl(0,1);
;;;682    		if((kb_start[1]==1)&&((load_I>(2*IKB)/10))&&(!(bat[1]._av&0x01))) avar_bat_hndl(1,1);
;;;683    #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;684    		if((kb_start_ips==1)&&((load_I>(2*IKB)/10))&&(!(bat_ips._av&0x01))) avar_bat_ips_hndl(1);
;;;685    #endif
;;;686    		}
;;;687    	}
;;;688    
;;;689    }
0007e2  e8bd9ff0          POP      {r4-r12,pc}
                  |L1.2022|
0007e6  f8aa7040          STRH     r7,[r10,#0x40]        ;557
0007ea  e7d4              B        |L1.1942|
                  |L1.2028|
0007ec  f8aa7040          STRH     r7,[r10,#0x40]        ;567
0007f0  e7e6              B        |L1.1984|
                  |L1.2034|
0007f2  f9b10040          LDRSH    r0,[r1,#0x40]         ;589  ; kb_cnt_2lev
0007f6  b3e8              CBZ      r0,|L1.2164|
0007f8  f1a00001          SUB      r0,r0,#1              ;591
0007fc  b200              SXTH     r0,r0                 ;591
0007fe  460f              MOV      r7,r1                 ;591
000800  f8a10040          STRH     r0,[r1,#0x40]         ;591
000804  2805              CMP      r0,#5                 ;593
000806  dd06              BLE      |L1.2070|
000808  230f              MOVS     r3,#0xf               ;593
00080a  22c8              MOVS     r2,#0xc8              ;593
00080c  2164              MOVS     r1,#0x64              ;593
00080e  20e1              MOVS     r0,#0xe1              ;593
000810  f7fffffe          BL       mess_send
000814  e007              B        |L1.2086|
                  |L1.2070|
000816  2800              CMP      r0,#0                 ;594
000818  dd05              BLE      |L1.2086|
00081a  230f              MOVS     r3,#0xf               ;594
00081c  22c8              MOVS     r2,#0xc8              ;594
00081e  2169              MOVS     r1,#0x69              ;594
000820  20e1              MOVS     r0,#0xe1              ;594
000822  f7fffffe          BL       mess_send
                  |L1.2086|
000826  f8b70040          LDRH     r0,[r7,#0x40]         ;597  ; kb_cnt_2lev
00082a  2805              CMP      r0,#5                 ;597
00082c  d110              BNE      |L1.2128|
00082e  f9b60008          LDRSH    r0,[r6,#8]            ;599  ; bat
000832  f7fffffe          BL       abs
000836  f8a80000          STRH     r0,[r8,#0]            ;599
00083a  f9b60054          LDRSH    r0,[r6,#0x54]         ;600  ; bat
00083e  f7fffffe          BL       abs
000842  f8a80002          STRH     r0,[r8,#2]            ;600
000846  f9ba0000          LDRSH    r0,[r10,#0]           ;601  ; Ib_ips_termokompensat
00084a  f7fffffe          BL       abs
00084e  8438              STRH     r0,[r7,#0x20]         ;601
                  |L1.2128|
000850  4813              LDR      r0,|L1.2208|
000852  f8b00040          LDRH     r0,[r0,#0x40]         ;604  ; kb_cnt_2lev
000856  2800              CMP      r0,#0                 ;604
                  |L1.2136|
000858  d1c3              BNE      |L1.2018|
00085a  f9b60008          LDRSH    r0,[r6,#8]            ;606  ; bat
00085e  f7fffffe          BL       abs
000862  4f0f              LDR      r7,|L1.2208|
000864  3764              ADDS     r7,r7,#0x64           ;606
000866  8038              STRH     r0,[r7,#0]            ;606
000868  f9b60054          LDRSH    r0,[r6,#0x54]         ;607  ; bat
00086c  f7fffffe          BL       abs
000870  8078              STRH     r0,[r7,#2]            ;607
000872  e000              B        |L1.2166|
                  |L1.2164|
000874  e06f              B        |L1.2390|
                  |L1.2166|
000876  f9ba0000          LDRSH    r0,[r10,#0]           ;608  ; Ib_ips_termokompensat
00087a  f7fffffe          BL       abs
00087e  f8dfa020          LDR      r10,|L1.2208|
000882  f8aa0022          STRH     r0,[r10,#0x22]        ;608
000886  f88a500c          STRB     r5,[r10,#0xc]         ;610
00088a  f9b80000          LDRSH    r0,[r8,#0]            ;612  ; ibat
00088e  f9b71000          LDRSH    r1,[r7,#0]            ;612  ; ibat_
000892  4408              ADD      r0,r0,r1              ;612
000894  f9b91000          LDRSH    r1,[r9,#0]            ;612  ; IKB
000898  4288              CMP      r0,r1                 ;612
00089a  e023              B        |L1.2276|
                  |L1.2204|
                          DCD      AVZ
                  |L1.2208|
                          DCD      ||area_number.21||
                  |L1.2212|
                          DCD      0x40024000
                  |L1.2216|
                          DCD      YEAR_AVZ
                  |L1.2220|
                          DCD      MONTH_AVZ
                  |L1.2224|
                          DCD      DATE_AVZ
                  |L1.2228|
                          DCD      HOUR_AVZ
                  |L1.2232|
                          DCD      MIN_AVZ
                  |L1.2236|
                          DCD      SEC_AVZ
                  |L1.2240|
                          DCD      AVZ_TIME
                  |L1.2244|
                          DCD      TBAT
                  |L1.2248|
                          DCD      Ib_ips_termokompensat
                  |L1.2252|
                          DCD      bat
                  |L1.2256|
                          DCD      IKB
                  |L1.2260|
                          DCD      BAT_IS_ON
                  |L1.2264|
                          DCD      ips_bat_av_vzvod
                  |L1.2268|
                          DCD      bat_ips
                  |L1.2272|
                          DCD      net_av
                  |L1.2276|
0008e4  da02              BGE      |L1.2284|
0008e6  7820              LDRB     r0,[r4,#0]            ;612  ; kb_start
0008e8  2801              CMP      r0,#1                 ;612
0008ea  d02e              BEQ      |L1.2378|
                  |L1.2284|
0008ec  f9b60002          LDRSH    r0,[r6,#2]            ;616  ; bat
0008f0  28c8              CMP      r0,#0xc8              ;616
0008f2  dd04              BLE      |L1.2302|
0008f4  7025              STRB     r5,[r4,#0]            ;618
0008f6  2100              MOVS     r1,#0                 ;619
0008f8  4608              MOV      r0,r1                 ;619
0008fa  f7fffffe          BL       avar_bat_hndl
                  |L1.2302|
0008fe  f9b80002          LDRSH    r0,[r8,#2]            ;622  ; ibat
000902  f9b71002          LDRSH    r1,[r7,#2]            ;622  ; ibat_
000906  4408              ADD      r0,r0,r1              ;622
000908  f9b91000          LDRSH    r1,[r9,#0]            ;622  ; IKB
00090c  4288              CMP      r0,r1                 ;622
00090e  da02              BGE      |L1.2326|
000910  7860              LDRB     r0,[r4,#1]            ;622  ; kb_start
000912  2801              CMP      r0,#1                 ;622
000914  d01c              BEQ      |L1.2384|
                  |L1.2326|
000916  f9b6004e          LDRSH    r0,[r6,#0x4e]         ;626  ; bat
00091a  28c8              CMP      r0,#0xc8              ;626
00091c  dd04              BLE      |L1.2344|
00091e  7065              STRB     r5,[r4,#1]            ;628
000920  2100              MOVS     r1,#0                 ;629
000922  2001              MOVS     r0,#1                 ;629
000924  f7fffffe          BL       avar_bat_hndl
                  |L1.2344|
000928  f9ba0020          LDRSH    r0,[r10,#0x20]        ;632  ; ibat_ips
00092c  f9ba1022          LDRSH    r1,[r10,#0x22]        ;632  ; ibat_ips_
000930  4408              ADD      r0,r0,r1              ;632
000932  f9b91000          LDRSH    r1,[r9,#0]            ;632  ; IKB
000936  4288              CMP      r0,r1                 ;632
000938  f6bfaf53          BGE      |L1.2018|
00093c  f89a000d          LDRB     r0,[r10,#0xd]         ;632  ; kb_start_ips
000940  2801              CMP      r0,#1                 ;632
000942  d189              BNE      |L1.2136|
000944  f88ab00c          STRB     r11,[r10,#0xc]        ;634
                  |L1.2376|
000948  e74b              B        |L1.2018|
                  |L1.2378|
00094a  f88ab00c          STRB     r11,[r10,#0xc]        ;614
00094e  e7d6              B        |L1.2302|
                  |L1.2384|
000950  f88ab00c          STRB     r11,[r10,#0xc]        ;624
000954  e7e8              B        |L1.2344|
                  |L1.2390|
000956  7b08              LDRB     r0,[r1,#0xc]          ;640  ; kb_full_ver
000958  4688              MOV      r8,r1                 ;640
00095a  2800              CMP      r0,#0                 ;640
00095c  d0f4              BEQ      |L1.2376|
00095e  230f              MOVS     r3,#0xf               ;643
000960  2200              MOVS     r2,#0                 ;643
000962  216e              MOVS     r1,#0x6e              ;643
000964  20e1              MOVS     r0,#0xe1              ;643
000966  f7fffffe          BL       mess_send
00096a  f9b60008          LDRSH    r0,[r6,#8]            ;645  ; bat
00096e  f7fffffe          BL       abs
000972  f9b91000          LDRSH    r1,[r9,#0]            ;645  ; IKB
000976  4288              CMP      r0,r1                 ;645
000978  dd07              BLE      |L1.2442|
00097a  7820              LDRB     r0,[r4,#0]            ;647  ; kb_start
00097c  2801              CMP      r0,#1                 ;647
00097e  d104              BNE      |L1.2442|
000980  7025              STRB     r5,[r4,#0]            ;649
000982  2100              MOVS     r1,#0                 ;650
000984  4608              MOV      r0,r1                 ;650
000986  f7fffffe          BL       avar_bat_hndl
                  |L1.2442|
00098a  f9b60054          LDRSH    r0,[r6,#0x54]         ;654  ; bat
00098e  f7fffffe          BL       abs
000992  f9b91000          LDRSH    r1,[r9,#0]            ;654  ; IKB
000996  4288              CMP      r0,r1                 ;654
000998  dd06              BLE      |L1.2472|
00099a  7860              LDRB     r0,[r4,#1]            ;656  ; kb_start
00099c  2801              CMP      r0,#1                 ;656
00099e  d103              BNE      |L1.2472|
0009a0  7065              STRB     r5,[r4,#1]            ;658
0009a2  2100              MOVS     r1,#0                 ;659
0009a4  f7fffffe          BL       avar_bat_hndl
                  |L1.2472|
0009a8  f9ba0000          LDRSH    r0,[r10,#0]           ;663  ; Ib_ips_termokompensat
0009ac  f7fffffe          BL       abs
0009b0  f9b91000          LDRSH    r1,[r9,#0]            ;663  ; IKB
0009b4  4288              CMP      r0,r1                 ;663
0009b6  dd08              BLE      |L1.2506|
0009b8  f898000d          LDRB     r0,[r8,#0xd]          ;665  ; kb_start_ips
0009bc  2801              CMP      r0,#1                 ;665
0009be  d104              BNE      |L1.2506|
0009c0  f888500d          STRB     r5,[r8,#0xd]          ;667
0009c4  2000              MOVS     r0,#0                 ;668
0009c6  f7fffffe          BL       avar_bat_ips_hndl
                  |L1.2506|
0009ca  7820              LDRB     r0,[r4,#0]            ;673  ; kb_start
0009cc  b930              CBNZ     r0,|L1.2524|
0009ce  7860              LDRB     r0,[r4,#1]            ;673  ; kb_start
0009d0  b920              CBNZ     r0,|L1.2524|
0009d2  f898000d          LDRB     r0,[r8,#0xd]          ;673  ; kb_start_ips
0009d6  b908              CBNZ     r0,|L1.2524|
0009d8  f888500c          STRB     r5,[r8,#0xc]          ;675
                  |L1.2524|
0009dc  20e6              MOVS     r0,#0xe6              ;678
0009de  f7fffffe          BL       mess_find
0009e2  b118              CBZ      r0,|L1.2540|
0009e4  48ff              LDR      r0,|L1.3556|
0009e6  6800              LDR      r0,[r0,#0]            ;678  ; mess_data
0009e8  28e7              CMP      r0,#0xe7              ;678
0009ea  d00a              BEQ      |L1.2562|
                  |L1.2540|
0009ec  48fe              LDR      r0,|L1.3560|
0009ee  49ff              LDR      r1,|L1.3564|
0009f0  f9b00000          LDRSH    r0,[r0,#0]            ;678  ; USIGN
0009f4  f9b11000          LDRSH    r1,[r1,#0]            ;678  ; load_U
0009f8  eb000080          ADD      r0,r0,r0,LSL #2       ;678
0009fc  ebb10f40          CMP      r1,r0,LSL #1          ;678
                  |L1.2560|
000a00  daa2              BGE      |L1.2376|
                  |L1.2562|
000a02  f888500c          STRB     r5,[r8,#0xc]          ;680
000a06  7820              LDRB     r0,[r4,#0]            ;681  ; kb_start
000a08  4df9              LDR      r5,|L1.3568|
000a0a  2801              CMP      r0,#1                 ;681
000a0c  d10f              BNE      |L1.2606|
000a0e  f9b90000          LDRSH    r0,[r9,#0]            ;681  ; IKB
000a12  f9b51000          LDRSH    r1,[r5,#0]            ;681  ; load_I
000a16  0040              LSLS     r0,r0,#1              ;681
000a18  fb90f0f7          SDIV     r0,r0,r7              ;681
000a1c  4288              CMP      r0,r1                 ;681
000a1e  da06              BGE      |L1.2606|
000a20  f896003d          LDRB     r0,[r6,#0x3d]         ;681  ; bat
000a24  07c0              LSLS     r0,r0,#31             ;681
000a26  d102              BNE      |L1.2606|
000a28  2101              MOVS     r1,#1                 ;681
000a2a  f7fffffe          BL       avar_bat_hndl
                  |L1.2606|
000a2e  7860              LDRB     r0,[r4,#1]            ;682  ; kb_start
000a30  2801              CMP      r0,#1                 ;682
000a32  d110              BNE      |L1.2646|
000a34  f9b90000          LDRSH    r0,[r9,#0]            ;682  ; IKB
000a38  f9b51000          LDRSH    r1,[r5,#0]            ;682  ; load_I
000a3c  0040              LSLS     r0,r0,#1              ;682
000a3e  fb90f0f7          SDIV     r0,r0,r7              ;682
000a42  4288              CMP      r0,r1                 ;682
000a44  da07              BGE      |L1.2646|
000a46  f8960089          LDRB     r0,[r6,#0x89]         ;682  ; bat
000a4a  07c0              LSLS     r0,r0,#31             ;682
000a4c  d103              BNE      |L1.2646|
000a4e  2101              MOVS     r1,#1                 ;682
000a50  4608              MOV      r0,r1                 ;682
000a52  f7fffffe          BL       avar_bat_hndl
                  |L1.2646|
000a56  f898000d          LDRB     r0,[r8,#0xd]          ;684  ; kb_start_ips
000a5a  2801              CMP      r0,#1                 ;684
                  |L1.2652|
000a5c  f47faf74          BNE      |L1.2376|
000a60  f9b90000          LDRSH    r0,[r9,#0]            ;684  ; IKB
000a64  f9b51000          LDRSH    r1,[r5,#0]            ;684  ; load_I
000a68  0040              LSLS     r0,r0,#1              ;684
000a6a  fb90f0f7          SDIV     r0,r0,r7              ;684
000a6e  4288              CMP      r0,r1                 ;684
000a70  dac6              BGE      |L1.2560|
000a72  48e0              LDR      r0,|L1.3572|
000a74  f890003d          LDRB     r0,[r0,#0x3d]         ;684  ; bat_ips
000a78  07c0              LSLS     r0,r0,#31             ;684
000a7a  d1ef              BNE      |L1.2652|
000a7c  e8bd5ff0          POP      {r4-r12,lr}           ;684
000a80  2001              MOVS     r0,#1                 ;684
000a82  f7ffbffe          B.W      avar_bat_ips_hndl
;;;690    
                          ENDP

                  samokalibr_hndl PROC
;;;699    //-----------------------------------------------
;;;700    void samokalibr_hndl(void)
000a86  b570              PUSH     {r4-r6,lr}
;;;701    {
;;;702    if(++samokalibr_cnt>=1800)samokalibr_cnt=0;
000a88  4cdb              LDR      r4,|L1.3576|
000a8a  8f60              LDRH     r0,[r4,#0x3a]  ; samokalibr_cnt
000a8c  1c40              ADDS     r0,r0,#1
000a8e  b200              SXTH     r0,r0
000a90  8760              STRH     r0,[r4,#0x3a]
000a92  f5b06fe1          CMP      r0,#0x708
000a96  db02              BLT      |L1.2718|
000a98  f04f0000          MOV      r0,#0
000a9c  8760              STRH     r0,[r4,#0x3a]
                  |L1.2718|
;;;703    
;;;704    if(samokalibr_cnt>=1785U)
000a9e  f9b4003a          LDRSH    r0,[r4,#0x3a]  ; samokalibr_cnt
000aa2  f5b06fdf          CMP      r0,#0x6f8
000aa6  d911              BLS      |L1.2764|
;;;705    	{
;;;706    	mess_send(MESS2RELE_HNDL,PARAM_RELE_SAMOKALIBR,1,15);
000aa8  230f              MOVS     r3,#0xf
000aaa  2201              MOVS     r2,#1
000aac  2164              MOVS     r1,#0x64
000aae  20d2              MOVS     r0,#0xd2
000ab0  f7fffffe          BL       mess_send
;;;707    	mess_send(MESS2IND_HNDL,PARAM_SAMOKALIBR,0,15);
000ab4  230f              MOVS     r3,#0xf
000ab6  2200              MOVS     r2,#0
000ab8  21d8              MOVS     r1,#0xd8
000aba  20d7              MOVS     r0,#0xd7
000abc  f7fffffe          BL       mess_send
;;;708    	mess_send(MESS2MATEMAT,PARAM_SAMOKALIBR,0,15);
000ac0  230f              MOVS     r3,#0xf
000ac2  2200              MOVS     r2,#0
000ac4  21d8              MOVS     r1,#0xd8
000ac6  20dc              MOVS     r0,#0xdc
000ac8  f7fffffe          BL       mess_send
                  |L1.2764|
;;;709    	} 
;;;710    
;;;711    if(samokalibr_cnt==1799U)
000acc  f9b4003a          LDRSH    r0,[r4,#0x3a]  ; samokalibr_cnt
000ad0  f5a061e0          SUB      r1,r0,#0x700
000ad4  3907              SUBS     r1,#7
000ad6  d118              BNE      |L1.2826|
;;;712    	{
;;;713    	if(Kibat0[0]!=ad7705_buff_[0]) lc640_write_int(ADR_KI0BAT[0],ad7705_buff_[0]);
000ad8  4ec8              LDR      r6,|L1.3580|
000ada  4cc9              LDR      r4,|L1.3584|
000adc  4dc9              LDR      r5,|L1.3588|
000ade  8830              LDRH     r0,[r6,#0]  ; Kibat0
000ae0  8821              LDRH     r1,[r4,#0]  ; ad7705_buff_
000ae2  4288              CMP      r0,r1
000ae4  d005              BEQ      |L1.2802|
000ae6  f9b41000          LDRSH    r1,[r4,#0]  ; ad7705_buff_
000aea  f9b50000          LDRSH    r0,[r5,#0]  ; ADR_KI0BAT
000aee  f7fffffe          BL       lc640_write_int
                  |L1.2802|
;;;714    	if(Kibat0[1]!=ad7705_buff_[1]) lc640_write_int(ADR_KI0BAT[1],ad7705_buff_[1]);
000af2  8870              LDRH     r0,[r6,#2]  ; Kibat0
000af4  8861              LDRH     r1,[r4,#2]  ; ad7705_buff_
000af6  4288              CMP      r0,r1
000af8  d007              BEQ      |L1.2826|
000afa  f9b41002          LDRSH    r1,[r4,#2]  ; ad7705_buff_
000afe  f9b50002          LDRSH    r0,[r5,#2]  ; ADR_KI0BAT
000b02  e8bd4070          POP      {r4-r6,lr}
000b06  f7ffbffe          B.W      lc640_write_int
                  |L1.2826|
;;;715    	
;;;716    	}	 	
;;;717    }
000b0a  bd70              POP      {r4-r6,pc}
;;;718    
                          ENDP

                  ubat_old_drv PROC
;;;721    //-----------------------------------------------
;;;722    void ubat_old_drv(void)
000b0c  b510              PUSH     {r4,lr}
;;;723    {        
;;;724    bat_u_old_cnt++;
000b0e  4cbe              LDR      r4,|L1.3592|
000b10  8820              LDRH     r0,[r4,#0]  ; bat_u_old_cnt
000b12  f1000001          ADD      r0,r0,#1
000b16  8020              STRH     r0,[r4,#0]
;;;725    gran_ring(&bat_u_old_cnt,0,8);
000b18  f04f0208          MOV      r2,#8
000b1c  f04f0100          MOV      r1,#0
000b20  4620              MOV      r0,r4
000b22  f7fffffe          BL       gran_ring
;;;726    
;;;727    bat[0]._u_old[bat_u_old_cnt]=bat[0]._Ub;
000b26  49b9              LDR      r1,|L1.3596|
000b28  f9b40000          LDRSH    r0,[r4,#0]  ; bat_u_old_cnt
000b2c  eb010040          ADD      r0,r1,r0,LSL #1
000b30  884a              LDRH     r2,[r1,#2]  ; bat
000b32  8402              STRH     r2,[r0,#0x20]
;;;728    bat[1]._u_old[bat_u_old_cnt]=bat[1]._Ub;
000b34  f8b1104e          LDRH     r1,[r1,#0x4e]  ; bat
000b38  f8a0106c          STRH     r1,[r0,#0x6c]
;;;729    }
000b3c  bd10              POP      {r4,pc}
;;;730    
                          ENDP

                  unet_drv PROC
;;;731    //-----------------------------------------------
;;;732    void unet_drv(void)
000b3e  b570              PUSH     {r4-r6,lr}
;;;733    {
;;;734    if(net_U<UMN)
000b40  4db3              LDR      r5,|L1.3600|
000b42  48b4              LDR      r0,|L1.3604|
;;;735    	{
;;;736    	if((unet_drv_cnt<10)&&(main_1Hz_cnt>15))
000b44  4ab4              LDR      r2,|L1.3608|
000b46  f9b51000          LDRSH    r1,[r5,#0]            ;734  ; net_U
000b4a  f9b03000          LDRSH    r3,[r0,#0]            ;734  ; UMN
000b4e  f9920000          LDRSB    r0,[r2,#0]
000b52  4299              CMP      r1,r3                 ;734
000b54  da1f              BGE      |L1.2966|
;;;737    		{
;;;738    		unet_drv_cnt++;
;;;739    		if(unet_drv_cnt>=10)
;;;740    			{
;;;741    			net_Ustore=net_U;
000b56  4cb1              LDR      r4,|L1.3612|
000b58  280a              CMP      r0,#0xa               ;736
000b5a  da0f              BGE      |L1.2940|
000b5c  4bb0              LDR      r3,|L1.3616|
000b5e  f9b33000          LDRSH    r3,[r3,#0]            ;736  ; main_1Hz_cnt
000b62  2b0f              CMP      r3,#0xf               ;736
000b64  dd0a              BLE      |L1.2940|
000b66  f1000001          ADD      r0,r0,#1              ;738
000b6a  b240              SXTB     r0,r0                 ;738
000b6c  7010              STRB     r0,[r2,#0]            ;738
000b6e  280a              CMP      r0,#0xa               ;739
000b70  db09              BLT      |L1.2950|
000b72  8021              STRH     r1,[r4,#0]
;;;742    		 	avar_unet_hndl(1);
000b74  2001              MOVS     r0,#1
000b76  f7fffffe          BL       avar_unet_hndl
000b7a  e004              B        |L1.2950|
                  |L1.2940|
;;;743    			
;;;744    			}
;;;745    		}
;;;746    	else if(unet_drv_cnt>=10)unet_drv_cnt=10;
000b7c  280a              CMP      r0,#0xa
000b7e  db02              BLT      |L1.2950|
000b80  f04f000a          MOV      r0,#0xa
000b84  7010              STRB     r0,[r2,#0]
                  |L1.2950|
;;;747    
;;;748    	if(net_U<net_Ustore) net_Ustore=net_U;	
000b86  f9b50000          LDRSH    r0,[r5,#0]  ; net_U
000b8a  f9b41000          LDRSH    r1,[r4,#0]  ; net_Ustore
000b8e  4288              CMP      r0,r1
000b90  da00              BGE      |L1.2964|
000b92  8020              STRH     r0,[r4,#0]
                  |L1.2964|
;;;749    	}
;;;750    
;;;751    else if(net_U>UMN)
;;;752    	{                 
;;;753    	if(unet_drv_cnt)
;;;754    		{
;;;755    		unet_drv_cnt--;
;;;756    		if(unet_drv_cnt<=0)
;;;757    			{
;;;758    			avar_unet_hndl(0);
;;;759    			}
;;;760    		}
;;;761    	else if(unet_drv_cnt<0)unet_drv_cnt=0;
;;;762    	
;;;763    	}
;;;764    
;;;765    }
000b94  bd70              POP      {r4-r6,pc}
                  |L1.2966|
000b96  ddfd              BLE      |L1.2964|
000b98  2800              CMP      r0,#0                 ;753
000b9a  d0fb              BEQ      |L1.2964|
000b9c  f1a00001          SUB      r0,r0,#1              ;755
000ba0  b240              SXTB     r0,r0                 ;755
000ba2  7010              STRB     r0,[r2,#0]            ;755
000ba4  2800              CMP      r0,#0                 ;756
000ba6  dcf5              BGT      |L1.2964|
000ba8  e8bd4070          POP      {r4-r6,lr}            ;758
000bac  2000              MOVS     r0,#0                 ;758
000bae  f7ffbffe          B.W      avar_unet_hndl
;;;766    
                          ENDP

                  matemat PROC
;;;767    //-----------------------------------------------
;;;768    void matemat(void)
000bb2  e92d5ffc          PUSH     {r2-r12,lr}
;;;769    {
;;;770    //signed short temp_SS;
;;;771    signed long temp_SL/*,temp_SL_*/;
;;;772    char /*temp,*/i;
;;;773    signed short temp_SS;
;;;774    
;;;775    #ifdef UKU_MGTS
;;;776    // 
;;;777    temp_SL=(signed long)net_buff_;
;;;778    temp_SL*=Kunet;
;;;779    temp_SL/=110000L;
;;;780    net_U=(signed short)temp_SL;
;;;781    #endif
;;;782    
;;;783    #ifdef UKU_RSTKM
;;;784    // 
;;;785    temp_SL=(signed long)net_buff_;
;;;786    temp_SL*=Kunet;
;;;787    temp_SL/=110000L;
;;;788    net_U=(signed short)temp_SL;
;;;789    #endif
;;;790    
;;;791    #ifdef UKU_3U
;;;792    // 
;;;793    temp_SL=(signed long)net_buff_;
;;;794    temp_SL*=Kunet;
;;;795    temp_SL/=36000L;
;;;796    net_U=(signed short)temp_SL;
;;;797    #endif
;;;798    
;;;799    #ifdef UKU_6U
;;;800    // 
;;;801    
;;;802    if((AUSW_MAIN%10)||(AUSW_MAIN==2400)||(AUSW_MAIN==4800)||(AUSW_MAIN==6000))
;;;803    	{
;;;804    
;;;805    	if(bps[11]._device==dNET_METR)
;;;806    		{
;;;807    		net_metr_buff_[0]=((signed short)bps[11]._buff[0])+(((signed short)bps[11]._buff[1])<<8);
;;;808    		net_metr_buff_[1]=((signed short)bps[11]._buff[2])+(((signed short)bps[11]._buff[3])<<8);
;;;809    		net_metr_buff_[2]=((signed short)bps[11]._buff[4])+(((signed short)bps[11]._buff[5])<<8);
;;;810    
;;;811    		temp_SL=(signed long)net_metr_buff_[0];
;;;812    		temp_SL*=KunetA;
;;;813    		temp_SL/=6000L;
;;;814    		net_Ua=(signed short)temp_SL;
;;;815    	
;;;816    		temp_SL=(signed long)net_metr_buff_[1];
;;;817    		temp_SL*=KunetB;
;;;818    		temp_SL/=6000L;
;;;819    		net_Ub=(signed short)temp_SL;
;;;820    	
;;;821    		temp_SL=(signed long)net_metr_buff_[2];
;;;822    		temp_SL*=KunetC;
;;;823    		temp_SL/=6000L;
;;;824    		net_Uc=(signed short)temp_SL;
;;;825    		}
;;;826    	else
;;;827    		{
;;;828    		temp_SL=(signed long)net_buff_;
;;;829    		temp_SL*=KunetA;
;;;830    		temp_SL/=110000L;
;;;831    		net_Ua=(signed short)temp_SL;
;;;832    	
;;;833    		temp_SL=(signed long)adc_buff_[3];
;;;834    		temp_SL*=KunetB;
;;;835    		temp_SL/=6000L;
;;;836    		net_Ub=(signed short)temp_SL;
;;;837    	
;;;838    		temp_SL=(signed long)adc_buff_[10];
;;;839    		temp_SL*=KunetC;
;;;840    		temp_SL/=6000L;
;;;841    		net_Uc=(signed short)temp_SL;
;;;842    		}
;;;843    
;;;844    	net_U=net_Ua;
;;;845    	if(net_Ub<net_U)net_U=net_Ub;
;;;846    	if(net_Uc<net_U)net_U=net_Uc;
;;;847    	}
;;;848    else 
;;;849    	{
;;;850    	temp_SL=(signed long)net_buff_;
;;;851    	temp_SL*=Kunet;
;;;852    	temp_SL/=110000L;
;;;853    	net_U=(signed short)temp_SL;
;;;854    	}
;;;855    
;;;856    
;;;857    
;;;858    
;;;859    #endif
;;;860    
;;;861    #ifdef UKU_GLONASS
;;;862    // 
;;;863    temp_SL=(signed long)net_buff_;
;;;864    temp_SL*=Kunet;
;;;865    temp_SL/=110000L;
;;;866    net_U=(signed short)temp_SL;
;;;867    #endif
;;;868    
;;;869    #ifdef UKU_KONTUR
;;;870    // 
;;;871    temp_SL=(signed long)net_buff_;
;;;872    temp_SL*=Kunet;
;;;873    temp_SL/=110000L;
;;;874    net_U=(signed short)temp_SL;
;;;875    #endif
;;;876    
;;;877    
;;;878    #ifdef UKU_220_V2
;;;879    // 
;;;880    	temp_SL=(signed long)net_buff_;
;;;881    	temp_SL*=Kunet;
;;;882    	temp_SL/=5000L;
;;;883    	net_U=(signed short)temp_SL;
;;;884    
;;;885    #endif
;;;886    
;;;887    
;;;888    #ifdef UKU_220
;;;889    // 
;;;890    
;;;891    if(AUSW_MAIN==22035)
;;;892    	{
;;;893    	temp_SL=(signed long)net_buff_;
;;;894    	temp_SL*=KunetA;
;;;895    	temp_SL/=6000L;
;;;896    	net_Ua=(signed short)temp_SL;
;;;897    
;;;898    	temp_SL=(signed long)adc_buff_[3];
;;;899    	temp_SL*=KunetB;
;;;900    	temp_SL/=6000L;
;;;901    	net_Ub=(signed short)temp_SL;
;;;902    
;;;903    	temp_SL=(signed long)adc_buff_[10];
;;;904    	temp_SL*=KunetC;
;;;905    	temp_SL/=6000L;
;;;906    	net_Uc=(signed short)temp_SL;
;;;907    
;;;908    	net_U=net_Ua;
;;;909    	if(net_Ub<net_U)net_U=net_Ub;
;;;910    	if(net_Uc<net_U)net_U=net_Uc;
;;;911    	}
;;;912    else
;;;913    	{
;;;914    	temp_SL=(signed long)net_buff_;
;;;915    	temp_SL*=Kunet;
;;;916    	#ifdef _ACDC_
;;;917    	temp_SL/=500L;
;;;918    	#else
;;;919    	temp_SL/=5000L;
;;;920    	#endif
;;;921    	net_U=(signed short)temp_SL;
;;;922    	
;;;923    	}
;;;924    #endif
;;;925    
;;;926    #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;927    // 
;;;928    
;;;929    
;;;930    	if(bps[11]._device==dNET_METR)
000bb6  489b              LDR      r0,|L1.3620|
;;;931    		{
;;;932    		net_metr_buff_[0]=((signed short)bps[11]._buff[0])+(((signed short)bps[11]._buff[1])<<8);
;;;933    		net_metr_buff_[1]=((signed short)bps[11]._buff[2])+(((signed short)bps[11]._buff[3])<<8);
;;;934    		net_metr_buff_[2]=((signed short)bps[11]._buff[4])+(((signed short)bps[11]._buff[5])<<8);
;;;935    
;;;936    		temp_SL=(signed long)net_metr_buff_[2];
;;;937    		temp_SL*=KunetA;
000bb8  4a9b              LDR      r2,|L1.3624|
;;;938    		temp_SL/=6000L;
;;;939    		net_Ua=(signed short)temp_SL;
;;;940    	
;;;941    		temp_SL=(signed long)net_metr_buff_[1];
;;;942    		temp_SL*=KunetB;
000bba  499d              LDR      r1,|L1.3632|
000bbc  f890c39c          LDRB     r12,[r0,#0x39c]       ;930  ; bps
;;;943    		temp_SL/=6000L;
;;;944    		net_Ub=(signed short)temp_SL;
;;;945    	
;;;946    		temp_SL=(signed long)net_metr_buff_[0];
;;;947    		temp_SL*=KunetC;
000bc0  489c              LDR      r0,|L1.3636|
000bc2  f9b2b000          LDRSH    r11,[r2,#0]           ;937
000bc6  f9b11000          LDRSH    r1,[r1,#0]            ;942
000bca  9101              STR      r1,[sp,#4]
000bcc  4c97              LDR      r4,|L1.3628|
000bce  f9b00000          LDRSH    r0,[r0,#0]
000bd2  4b99              LDR      r3,|L1.3640|
;;;948    		temp_SL/=6000L;
;;;949    		net_Uc=(signed short)temp_SL;
000bd4  4d99              LDR      r5,|L1.3644|
;;;950    
;;;951    		net_F3=((signed short)bps[11]._buff[6])+(((signed short)bps[11]._buff[7])<<8);
;;;952    
;;;953    		net_U=net_Ua;
;;;954    		if(net_Ub<net_U)net_U=net_Ub;
;;;955    		if(net_Uc<net_U)net_U=net_Uc;
;;;956    		}
;;;957    	  else if(AUSW_MAIN==22033)
;;;958    	{
;;;959    	temp_SL=(signed long)net_buff_;
000bd6  4f88              LDR      r7,|L1.3576|
000bd8  f2456611          MOV      r6,#0x5611            ;957
;;;960    	temp_SL*=KunetA;
;;;961    	temp_SL/=4000L;
;;;962    	net_Ua=(signed short)temp_SL;
;;;963    
;;;964    	temp_SL=(signed long)adc_buff_[3];
;;;965    	temp_SL*=KunetB;
;;;966    	temp_SL/=6000L;
;;;967    	net_Ub=(signed short)temp_SL;
;;;968    
;;;969    	temp_SL=(signed long)adc_buff_[10];
;;;970    	temp_SL*=KunetC;
;;;971    	temp_SL/=6000L;
;;;972    	net_Uc=(signed short)temp_SL;
;;;973    
;;;974    	net_U=net_Ua;
;;;975    	if(net_Ub<net_U)net_U=net_Ub;
;;;976    	if(net_Uc<net_U)net_U=net_Uc;
;;;977    	}
;;;978    else if((AUSW_MAIN==22063)||(AUSW_MAIN==22023)||(AUSW_MAIN==22043))
;;;979    	{
;;;980    	temp_SL=(signed long)net_buff_;
;;;981    	temp_SL*=KunetA;
;;;982    	temp_SL/=40000L;
;;;983    	net_Ua=(signed short)temp_SL;
;;;984    
;;;985    	temp_SL=(signed long)adc_buff_[3];
;;;986    	temp_SL*=KunetB;
;;;987    	temp_SL/=6000L;
;;;988    	net_Ub=(signed short)temp_SL;
;;;989    
;;;990    	temp_SL=(signed long)adc_buff_[10];
;;;991    	temp_SL*=KunetC;
;;;992    	temp_SL/=6000L;
;;;993    	net_Uc=(signed short)temp_SL;
;;;994    
;;;995    	net_U=net_Ua;
;;;996    	if(net_Ub<net_U)net_U=net_Ub;
;;;997    	if(net_Uc<net_U)net_U=net_Uc;
;;;998    	}
;;;999    else	if((AUSW_MAIN==22010)||(AUSW_MAIN==22011) )
000bdc  f24558fa          MOV      r8,#0x55fa
000be0  9000              STR      r0,[sp,#0]            ;930
000be2  f1bc0f07          CMP      r12,#7                ;930
000be6  d039              BEQ      |L1.3164|
000be8  4639              MOV      r1,r7                 ;959
000bea  f8df9258          LDR      r9,|L1.3652|
000bee  8cca              LDRH     r2,[r1,#0x26]         ;959
000bf0  498d              LDR      r1,|L1.3624|
000bf2  f8dfa23c          LDR      r10,|L1.3632|
000bf6  f2417b70          MOV      r11,#0x1770           ;938
000bfa  f9b11000          LDRSH    r1,[r1,#0]            ;937
000bfe  f9baa000          LDRSH    r10,[r10,#0]          ;942
000c02  434a              MULS     r2,r1,r2              ;960
000c04  f9b91006          LDRSH    r1,[r9,#6]            ;964
000c08  f9b99014          LDRSH    r9,[r9,#0x14]         ;969
000c0c  fb01f10a          MUL      r1,r1,r10             ;965
000c10  f8dfa220          LDR      r10,|L1.3636|
000c14  fb91f1fb          SDIV     r1,r1,r11             ;966
000c18  f9baa000          LDRSH    r10,[r10,#0]          ;947
000c1c  4888              LDR      r0,|L1.3648|
000c1e  fb09f90a          MUL      r9,r9,r10             ;970
000c22  fb99f9fb          SDIV     r9,r9,r11             ;971
000c26  8800              LDRH     r0,[r0,#0]            ;957  ; AUSW_MAIN
000c28  b209              SXTH     r1,r1                 ;967
000c2a  fa0ff989          SXTH     r9,r9                 ;972
000c2e  42b0              CMP      r0,r6                 ;957
000c30  d15a              BNE      |L1.3304|
000c32  f44f607a          MOV      r0,#0xfa0             ;961
000c36  fb92f0f0          SDIV     r0,r2,r0              ;961
000c3a  b200              SXTH     r0,r0                 ;962
000c3c  8020              STRH     r0,[r4,#0]            ;962
000c3e  8019              STRH     r1,[r3,#0]            ;967
000c40  f8a59000          STRH     r9,[r5,#0]            ;972
000c44  4a72              LDR      r2,|L1.3600|
000c46  8010              STRH     r0,[r2,#0]            ;974
000c48  4281              CMP      r1,r0                 ;975
000c4a  da00              BGE      |L1.3150|
000c4c  8011              STRH     r1,[r2,#0]            ;975
                  |L1.3150|
000c4e  f9b20000          LDRSH    r0,[r2,#0]            ;976  ; net_U
000c52  4581              CMP      r9,r0                 ;976
000c54  da01              BGE      |L1.3162|
000c56  f8a29000          STRH     r9,[r2,#0]            ;976
                  |L1.3162|
000c5a  e07e              B        |L1.3418|
                  |L1.3164|
000c5c  487a              LDR      r0,|L1.3656|
000c5e  f8df9198          LDR      r9,|L1.3576|
000c62  7801              LDRB     r1,[r0,#0]            ;932  ; bps
000c64  7842              LDRB     r2,[r0,#1]            ;932  ; bps
000c66  f1090988          ADD      r9,r9,#0x88           ;932
000c6a  eb012102          ADD      r1,r1,r2,LSL #8       ;932
000c6e  fa1ffa81          UXTH     r10,r1                ;932
000c72  f8a9a000          STRH     r10,[r9,#0]           ;932
000c76  7881              LDRB     r1,[r0,#2]            ;933  ; bps
000c78  78c2              LDRB     r2,[r0,#3]            ;933  ; bps
000c7a  eb012102          ADD      r1,r1,r2,LSL #8       ;933
000c7e  b289              UXTH     r1,r1                 ;933
000c80  f8a91002          STRH     r1,[r9,#2]            ;933
000c84  7902              LDRB     r2,[r0,#4]            ;934  ; bps
000c86  f890e005          LDRB     lr,[r0,#5]            ;934  ; bps
000c8a  eb02220e          ADD      r2,r2,lr,LSL #8       ;934
000c8e  b292              UXTH     r2,r2                 ;934
000c90  f8a92004          STRH     r2,[r9,#4]            ;934
000c94  fb02f20b          MUL      r2,r2,r11             ;937
000c98  f2417970          MOV      r9,#0x1770            ;938
000c9c  fb92f2f9          SDIV     r2,r2,r9              ;938
000ca0  fa0ffb82          SXTH     r11,r2                ;939
000ca4  f8a4b000          STRH     r11,[r4,#0]           ;939
000ca8  9a01              LDR      r2,[sp,#4]            ;942
000caa  fb01f102          MUL      r1,r1,r2              ;942
000cae  fb91f1f9          SDIV     r1,r1,r9              ;943
000cb2  b209              SXTH     r1,r1                 ;944
000cb4  8019              STRH     r1,[r3,#0]            ;944
000cb6  9a00              LDR      r2,[sp,#0]            ;947
000cb8  fb0afa02          MUL      r10,r10,r2            ;947
000cbc  fb9af2f9          SDIV     r2,r10,r9             ;948
000cc0  b212              SXTH     r2,r2                 ;949
000cc2  802a              STRH     r2,[r5,#0]            ;949
000cc4  7983              LDRB     r3,[r0,#6]            ;951  ; bps
000cc6  79c0              LDRB     r0,[r0,#7]            ;951  ; bps
000cc8  eb032300          ADD      r3,r3,r0,LSL #8       ;951
000ccc  485f              LDR      r0,|L1.3660|
000cce  8003              STRH     r3,[r0,#0]            ;951
000cd0  484f              LDR      r0,|L1.3600|
000cd2  f8a0b000          STRH     r11,[r0,#0]           ;953
000cd6  4559              CMP      r1,r11                ;954
000cd8  da00              BGE      |L1.3292|
000cda  8001              STRH     r1,[r0,#0]            ;954
                  |L1.3292|
000cdc  f9b01000          LDRSH    r1,[r0,#0]            ;955  ; net_U
000ce0  428a              CMP      r2,r1                 ;955
000ce2  da3a              BGE      |L1.3418|
000ce4  8002              STRH     r2,[r0,#0]            ;955
000ce6  e038              B        |L1.3418|
                  |L1.3304|
000ce8  f5a04aac          SUB      r10,r0,#0x5600        ;978
000cec  f1ba0a2f          SUBS     r10,r10,#0x2f         ;978
000cf0  d005              BEQ      |L1.3326|
000cf2  f11a0a28          ADDS     r10,r10,#0x28         ;978
000cf6  d002              BEQ      |L1.3326|
000cf8  f1ba0a14          SUBS     r10,r10,#0x14         ;978
000cfc  d114              BNE      |L1.3368|
                  |L1.3326|
000cfe  f6494040          MOV      r0,#0x9c40            ;982
000d02  fb92f0f0          SDIV     r0,r2,r0              ;982
000d06  b200              SXTH     r0,r0                 ;983
000d08  8020              STRH     r0,[r4,#0]            ;983
000d0a  8019              STRH     r1,[r3,#0]            ;988
000d0c  f8a59000          STRH     r9,[r5,#0]            ;993
000d10  4a3f              LDR      r2,|L1.3600|
000d12  8010              STRH     r0,[r2,#0]            ;995
000d14  4281              CMP      r1,r0                 ;996
000d16  da00              BGE      |L1.3354|
000d18  8011              STRH     r1,[r2,#0]            ;996
                  |L1.3354|
000d1a  f9b20000          LDRSH    r0,[r2,#0]            ;997  ; net_U
000d1e  4581              CMP      r9,r0                 ;997
000d20  da1b              BGE      |L1.3418|
000d22  f8a29000          STRH     r9,[r2,#0]            ;997
000d26  e018              B        |L1.3418|
                  |L1.3368|
;;;1000   	{
;;;1001   	temp_SL=(signed long)net_buff_;
;;;1002   	temp_SL*=Kunet;
000d28  4949              LDR      r1,|L1.3664|
000d2a  f9b12000          LDRSH    r2,[r1,#0]
000d2e  4932              LDR      r1,|L1.3576|
000d30  8cc9              LDRH     r1,[r1,#0x26]         ;959
000d32  4351              MULS     r1,r2,r1
000d34  4540              CMP      r0,r8                 ;999
000d36  d003              BEQ      |L1.3392|
000d38  f5a042aa          SUB      r2,r0,#0x5500         ;999
000d3c  3afb              SUBS     r2,r2,#0xfb           ;999
000d3e  d106              BNE      |L1.3406|
                  |L1.3392|
;;;1003   	temp_SL/=35000L;
000d40  f64800b8          MOV      r0,#0x88b8
000d44  fb91f0f0          SDIV     r0,r1,r0
;;;1004   	net_U=(signed short)temp_SL;
000d48  4931              LDR      r1,|L1.3600|
000d4a  8008              STRH     r0,[r1,#0]
000d4c  e005              B        |L1.3418|
                  |L1.3406|
;;;1005   	
;;;1006   	}
;;;1007   else
;;;1008   	{
;;;1009   	temp_SL=(signed long)net_buff_;
;;;1010   	temp_SL*=Kunet;
;;;1011   	#ifdef _ACDC_
;;;1012   	temp_SL/=500L;
000d4e  f44f70fa          MOV      r0,#0x1f4
000d52  fb91f0f0          SDIV     r0,r1,r0
;;;1013   	#else
;;;1014   	temp_SL/=5000L;
;;;1015   	#endif
;;;1016   	net_U=(signed short)temp_SL;
000d56  492e              LDR      r1,|L1.3600|
000d58  8008              STRH     r0,[r1,#0]
                  |L1.3418|
;;;1017   	
;;;1018   	}
;;;1019   if(bps[11]._device!=dNET_METR) net_F3=net_F;
000d5a  f1bc0f07          CMP      r12,#7
000d5e  d003              BEQ      |L1.3432|
000d60  483c              LDR      r0,|L1.3668|
000d62  8801              LDRH     r1,[r0,#0]  ; net_F
000d64  4839              LDR      r0,|L1.3660|
000d66  8001              STRH     r1,[r0,#0]
                  |L1.3432|
;;;1020   #endif
;;;1021   
;;;1022   #ifdef UKU_TELECORE2015
;;;1023   // 
;;;1024   temp_SL=(signed long)net_buff_;
;;;1025   temp_SL*=Kunet;
;;;1026   temp_SL/=110000L;
;;;1027   net_U=(signed short)temp_SL;
;;;1028   #endif
;;;1029   
;;;1030   // 
;;;1031   temp_SL=(signed long)adc_buff_[0];
000d68  f8dfb0d8          LDR      r11,|L1.3652|
000d6c  f9bb1000          LDRSH    r1,[r11,#0]  ; adc_buff_
;;;1032   temp_SL*=Kubat[0];
000d70  f8dfc0e4          LDR      r12,|L1.3672|
000d74  f9bc0000          LDRSH    r0,[r12,#0]  ; Kubat
000d78  4348              MULS     r0,r1,r0
;;;1033   temp_SL/=2000L;
000d7a  f44f65fa          MOV      r5,#0x7d0
000d7e  fb90f0f5          SDIV     r0,r0,r5
;;;1034   bat[0]._Ub=(signed short)temp_SL;
000d82  4c22              LDR      r4,|L1.3596|
000d84  8060              STRH     r0,[r4,#2]
;;;1035   
;;;1036   #ifdef UKU_220
;;;1037   // 
;;;1038   temp_SL=(signed long)adc_buff_[0];
;;;1039   temp_SL*=Kubat[0];
;;;1040   temp_SL/=400L;
;;;1041   bat[0]._Ub=(signed short)temp_SL;
;;;1042   #endif
;;;1043   
;;;1044   #ifdef UKU_220_V2
;;;1045   // 
;;;1046   temp_SL=(signed long)adc_buff_[0];
;;;1047   temp_SL*=Kubat[0];
;;;1048   temp_SL/=400L;
;;;1049   bat[0]._Ub=(signed short)temp_SL;
;;;1050   #endif
;;;1051   
;;;1052   temp_SL=(signed long)adc_buff_[4];
000d86  f9bb1008          LDRSH    r1,[r11,#8]  ; adc_buff_
;;;1053   temp_SL*=Kubatm[0];
000d8a  4a34              LDR      r2,|L1.3676|
000d8c  f9b20000          LDRSH    r0,[r2,#0]  ; Kubatm
000d90  fb00f001          MUL      r0,r0,r1
;;;1054   temp_SL/=700L;
000d94  f44f732f          MOV      r3,#0x2bc
000d98  fb90f0f3          SDIV     r0,r0,r3
;;;1055   bat[0]._Ubm=(signed short)temp_SL;
000d9c  80a0              STRH     r0,[r4,#4]
;;;1056   
;;;1057   #ifdef UKU_KONTUR
;;;1058   temp_SL=(signed long)adc_buff_[4];
;;;1059   temp_SL*=Kubatm[0];
;;;1060   temp_SL/=2000L;
;;;1061   bat[0]._Ubm=(signed short)temp_SL;
;;;1062   #endif
;;;1063   
;;;1064   temp_SL=(signed long)adc_buff_[12];
000d9e  f9bb1018          LDRSH    r1,[r11,#0x18]  ; adc_buff_
;;;1065   temp_SL*=Kubat[1];
000da2  f9bc0002          LDRSH    r0,[r12,#2]  ; Kubat
000da6  fb00f001          MUL      r0,r0,r1
;;;1066   temp_SL/=2000L;
000daa  fb90f0f5          SDIV     r0,r0,r5
;;;1067   bat[1]._Ub=(signed short)temp_SL;
000dae  f8a4004e          STRH     r0,[r4,#0x4e]
;;;1068   
;;;1069   #ifdef UKU_220
;;;1070   temp_SL=(signed long)adc_buff_[12];
;;;1071   temp_SL*=Kubat[1];
;;;1072   temp_SL/=400L;
;;;1073   bat[1]._Ub=(signed short)temp_SL;
;;;1074   #endif
;;;1075   
;;;1076   #ifdef UKU_220_V2
;;;1077   temp_SL=(signed long)adc_buff_[12];
;;;1078   temp_SL*=Kubat[1];
;;;1079   temp_SL/=400L;
;;;1080   bat[1]._Ub=(signed short)temp_SL;
;;;1081   #endif
;;;1082   
;;;1083   temp_SL=(signed long)adc_buff_[1];
000db2  f9bb1002          LDRSH    r1,[r11,#2]  ; adc_buff_
;;;1084   temp_SL*=Kubatm[1];
000db6  f9b20002          LDRSH    r0,[r2,#2]  ; Kubatm
000dba  fb00f001          MUL      r0,r0,r1
;;;1085   temp_SL/=700L;
000dbe  fb90f0f3          SDIV     r0,r0,r3
;;;1086   bat[1]._Ubm=(signed short)temp_SL;
000dc2  f8a40050          STRH     r0,[r4,#0x50]
;;;1087   #ifdef UKU_KONTUR
;;;1088   temp_SL=(signed long)adc_buff_[1];
;;;1089   temp_SL*=Kubatm[1];
;;;1090   temp_SL/=2000L;
;;;1091   bat[1]._Ubm=(signed short)temp_SL;
;;;1092   #endif
;;;1093   
;;;1094   #ifdef UKU_TELECORE2015
;;;1095   temp_SL=(signed long)adc_buff_[2];
;;;1096   temp_SL*=Kubat[0];
;;;1097   temp_SL/=2000L;
;;;1098   bat[0]._Ub=(signed short)temp_SL;
;;;1099   #endif
;;;1100   
;;;1101   /*
;;;1102   // 
;;;1103   if(!mess_find_unvol(MESS2MATEMAT))
;;;1104   	{
;;;1105   	temp_SL=(signed long)ad7705_buff_[0];
;;;1106   	temp_SL-=(signed long)Kibat0[0];
;;;1107   	temp_SL*=(signed long)Kibat1[0];
;;;1108   	if((AUSW_MAIN==24120)||(AUSW_MAIN==24210))temp_SL/=300L;
;;;1109   	else temp_SL/=1000L;
;;;1110   	bat[0]._Ib=(signed short)temp_SL;
;;;1111   
;;;1112   	temp_SL=(signed long)ad7705_buff_[1];
;;;1113   	temp_SL-=(signed long)Kibat0[1];
;;;1114   	temp_SL*=(signed long)Kibat1[1];
;;;1115   	if((AUSW_MAIN==24120)||(AUSW_MAIN==24210))temp_SL/=300L;
;;;1116   	else temp_SL/=1000L;
;;;1117   	bat[1]._Ib=(signed short)temp_SL;
;;;1118   	}
;;;1119   */
;;;1120   
;;;1121   
;;;1122   // 
;;;1123   if(!mess_find_unvol(MESS2MATEMAT))
000dc6  f04f00dc          MOV      r0,#0xdc
000dca  f7fffffe          BL       mess_find_unvol
;;;1124   	{
;;;1125   	temp_SL=(signed long)ad7705_buff_[0];
;;;1126   	temp_SL-=(signed long)Kibat0[0];
;;;1127   	temp_SL*=(signed long)Kibat1[0];
;;;1128   	if((AUSW_MAIN==24120)||(AUSW_MAIN==24210))temp_SL/=300L;
;;;1129   	else if((AUSW_MAIN==22010)||(AUSW_MAIN==22035)||(AUSW_MAIN==22033))temp_SL/=2000L;
000dce  f2456313          MOV      r3,#0x5613
000dd2  b930              CBNZ     r0,|L1.3554|
000dd4  f8df9028          LDR      r9,|L1.3584|
000dd8  f8b90000          LDRH     r0,[r9,#0]            ;1125  ; ad7705_buff_
000ddc  f8dfa01c          LDR      r10,|L1.3580|
000de0  e03e              B        |L1.3680|
                  |L1.3554|
000de2  e088              B        |L1.3830|
                  |L1.3556|
                          DCD      mess_data
                  |L1.3560|
                          DCD      USIGN
                  |L1.3564|
                          DCD      load_U
                  |L1.3568|
                          DCD      load_I
                  |L1.3572|
                          DCD      bat_ips
                  |L1.3576|
                          DCD      ||area_number.21||
                  |L1.3580|
                          DCD      Kibat0
                  |L1.3584|
                          DCD      ad7705_buff_
                  |L1.3588|
                          DCD      ADR_KI0BAT
                  |L1.3592|
                          DCD      bat_u_old_cnt
                  |L1.3596|
                          DCD      bat
                  |L1.3600|
                          DCD      net_U
                  |L1.3604|
                          DCD      UMN
                  |L1.3608|
                          DCD      unet_drv_cnt
                  |L1.3612|
                          DCD      net_Ustore
                  |L1.3616|
                          DCD      main_1Hz_cnt
                  |L1.3620|
                          DCD      bps
                  |L1.3624|
                          DCD      KunetA
                  |L1.3628|
                          DCD      net_Ua
                  |L1.3632|
                          DCD      KunetB
                  |L1.3636|
                          DCD      KunetC
                  |L1.3640|
                          DCD      net_Ub
                  |L1.3644|
                          DCD      net_Uc
                  |L1.3648|
                          DCD      AUSW_MAIN
                  |L1.3652|
                          DCD      ||.bss||+0x400
                  |L1.3656|
                          DCD      bps+0x3a2
                  |L1.3660|
                          DCD      net_F3
                  |L1.3664|
                          DCD      Kunet
                  |L1.3668|
                          DCD      net_F
                  |L1.3672|
                          DCD      Kubat
                  |L1.3676|
                          DCD      Kubatm
                  |L1.3680|
000e60  f8ba1000          LDRH     r1,[r10,#0]           ;1126  ; Kibat0
000e64  eba00001          SUB      r0,r0,r1              ;1126
000e68  4aff              LDR      r2,|L1.4712|
000e6a  f9b21000          LDRSH    r1,[r2,#0]            ;1127  ; Kibat1
000e6e  fb01f100          MUL      r1,r1,r0              ;1127
000e72  48fe              LDR      r0,|L1.4716|
000e74  f6456c38          MOV      r12,#0x5e38           ;1128
000e78  8800              LDRH     r0,[r0,#0]            ;1128  ; AUSW_MAIN
000e7a  4560              CMP      r0,r12                ;1128
000e7c  d004              BEQ      |L1.3720|
000e7e  f5a04ebc          SUB      lr,r0,#0x5e00         ;1128
000e82  f1be0e92          SUBS     lr,lr,#0x92           ;1128
000e86  d104              BNE      |L1.3730|
                  |L1.3720|
000e88  f44f7e96          MOV      lr,#0x12c             ;1128
000e8c  fb91f1fe          SDIV     r1,r1,lr              ;1128
000e90  e00c              B        |L1.3756|
                  |L1.3730|
000e92  4540              CMP      r0,r8
000e94  d003              BEQ      |L1.3742|
000e96  4298              CMP      r0,r3
000e98  d001              BEQ      |L1.3742|
000e9a  42b0              CMP      r0,r6
000e9c  d102              BNE      |L1.3748|
                  |L1.3742|
000e9e  fb91f1f5          SDIV     r1,r1,r5
000ea2  e003              B        |L1.3756|
                  |L1.3748|
;;;1130   	else temp_SL/=1000L;
000ea4  f44f7e7a          MOV      lr,#0x3e8
000ea8  fb91f1fe          SDIV     r1,r1,lr
                  |L1.3756|
;;;1131   	#ifdef UKU_TELECORE2015
;;;1132   	temp_SL/=2L;
;;;1133   	temp_SL=-temp_SL;
;;;1134   	#endif
;;;1135   	bat[0]._Ib=(signed short)temp_SL;
000eac  8121              STRH     r1,[r4,#8]
;;;1136   
;;;1137   	temp_SL=(signed long)ad7705_buff_[1];
000eae  f8b91002          LDRH     r1,[r9,#2]  ; ad7705_buff_
;;;1138   	temp_SL-=(signed long)Kibat0[1];
000eb2  f8ba9002          LDRH     r9,[r10,#2]  ; Kibat0
000eb6  eba10909          SUB      r9,r1,r9
;;;1139   	temp_SL*=(signed long)Kibat1[1];
000eba  f9b21002          LDRSH    r1,[r2,#2]  ; Kibat1
000ebe  fb01f109          MUL      r1,r1,r9
;;;1140   	if((AUSW_MAIN==24120)||(AUSW_MAIN==24210))temp_SL/=300L;
000ec2  4560              CMP      r0,r12
000ec4  d003              BEQ      |L1.3790|
000ec6  f5a042bc          SUB      r2,r0,#0x5e00
000eca  3a92              SUBS     r2,r2,#0x92
000ecc  d104              BNE      |L1.3800|
                  |L1.3790|
000ece  f44f7096          MOV      r0,#0x12c
000ed2  fb91f0f0          SDIV     r0,r1,r0
000ed6  e00c              B        |L1.3826|
                  |L1.3800|
;;;1141   	else if((AUSW_MAIN==22010)||(AUSW_MAIN==22035)||(AUSW_MAIN==22033))temp_SL/=2000L;
000ed8  4540              CMP      r0,r8
000eda  d003              BEQ      |L1.3812|
000edc  4298              CMP      r0,r3
000ede  d001              BEQ      |L1.3812|
000ee0  42b0              CMP      r0,r6
000ee2  d102              BNE      |L1.3818|
                  |L1.3812|
000ee4  fb91f0f5          SDIV     r0,r1,r5
000ee8  e003              B        |L1.3826|
                  |L1.3818|
;;;1142   	else temp_SL/=1000L;
000eea  f44f707a          MOV      r0,#0x3e8
000eee  fb91f0f0          SDIV     r0,r1,r0
                  |L1.3826|
;;;1143   	bat[1]._Ib=(signed short)temp_SL;
000ef2  f8a40054          STRH     r0,[r4,#0x54]
                  |L1.3830|
;;;1144   	}
;;;1145   
;;;1146   
;;;1147   
;;;1148   
;;;1149   
;;;1150   // 
;;;1151   
;;;1152   #ifdef UKU_KONTUR
;;;1153   if((adc_buff_[6]>800)&&(adc_buff_[6]<3800))bat[0]._nd=0;
;;;1154   else bat[0]._nd=1;
;;;1155   temp_SL=(signed long)adc_buff_[6];
;;;1156   temp_SL*=Ktbat[0];
;;;1157   temp_SL/=20000L;
;;;1158   temp_SL-=273L;
;;;1159   bat[0]._Tb=(signed short)temp_SL;
;;;1160   #else
;;;1161   if((adc_buff_[6]>800)&&(adc_buff_[6]<3800))bat[0]._nd=0;
000ef6  f9bb200c          LDRSH    r2,[r11,#0xc]  ; adc_buff_
000efa  f64031b7          MOV      r1,#0xbb7
000efe  f2a23a21          SUB      r10,r2,#0x321
000f02  2000              MOVS     r0,#0
;;;1162   else bat[0]._nd=1;
000f04  f04f0c01          MOV      r12,#1
000f08  458a              CMP      r10,r1                ;1161
000f0a  d201              BCS      |L1.3856|
000f0c  7320              STRB     r0,[r4,#0xc]          ;1161
000f0e  e001              B        |L1.3860|
                  |L1.3856|
000f10  f884c00c          STRB     r12,[r4,#0xc]
                  |L1.3860|
;;;1163   temp_SL=(signed long)adc_buff_[6];
;;;1164   temp_SL*=Ktbat[0];
000f14  f8df9358          LDR      r9,|L1.4720|
000f18  f9b99000          LDRSH    r9,[r9,#0]  ; Ktbat
000f1c  fb09f902          MUL      r9,r9,r2
;;;1165   temp_SL/=20000L;
000f20  f6446e20          MOV      lr,#0x4e20
000f24  fb99f9fe          SDIV     r9,r9,lr
;;;1166   temp_SL-=273L;
000f28  f2a91911          SUB      r9,r9,#0x111
;;;1167   bat[0]._Tb=(signed short)temp_SL;
000f2c  f8a4900a          STRH     r9,[r4,#0xa]
;;;1168   #endif
;;;1169   
;;;1170   #ifdef UKU_KONTUR
;;;1171   if((adc_buff_[7]>800)&&(adc_buff_[7]<3800))bat[1]._nd=0;
;;;1172   else bat[1]._nd=1;
;;;1173   temp_SL=(signed long)adc_buff_[7];
;;;1174   temp_SL*=Ktbat[1];
;;;1175   temp_SL/=20000L;
;;;1176   temp_SL-=273L;
;;;1177   bat[1]._Tb=(signed short)temp_SL;
;;;1178   #else
;;;1179   if((adc_buff_[7]>800)&&(adc_buff_[7]<3800))bat[1]._nd=0;
000f30  f9bb900e          LDRSH    r9,[r11,#0xe]  ; adc_buff_
000f34  f64031b7          MOV      r1,#0xbb7
000f38  f2a93e21          SUB      lr,r9,#0x321
000f3c  458e              CMP      lr,r1
000f3e  d202              BCS      |L1.3910|
000f40  f8840058          STRB     r0,[r4,#0x58]
000f44  e001              B        |L1.3914|
                  |L1.3910|
;;;1180   else bat[1]._nd=1;
000f46  f884c058          STRB     r12,[r4,#0x58]
                  |L1.3914|
;;;1181   temp_SL=(signed long)adc_buff_[7];
;;;1182   temp_SL*=Ktbat[1];
000f4a  49c9              LDR      r1,|L1.4720|
000f4c  f9b11002          LDRSH    r1,[r1,#2]  ; Ktbat
000f50  fb01f109          MUL      r1,r1,r9
;;;1183   temp_SL/=20000L;
000f54  f6446e20          MOV      lr,#0x4e20
000f58  fb91f1fe          SDIV     r1,r1,lr
;;;1184   temp_SL-=273L;
000f5c  f2a11111          SUB      r1,r1,#0x111
;;;1185   bat[1]._Tb=(signed short)temp_SL;
000f60  4cc4              LDR      r4,|L1.4724|
000f62  f8a41056          STRH     r1,[r4,#0x56]
;;;1186   #endif
;;;1187   
;;;1188   #ifdef UKU_6U
;;;1189   
;;;1190   if(NUMMAKB==2)
;;;1191   	{
;;;1192   	if(makb[0]._cnt<5)
;;;1193   		{
;;;1194   		if(makb[0]._T_nd[0]==0)
;;;1195   			{
;;;1196   			bat[0]._Tb=makb[0]._T[0];
;;;1197   			bat[0]._nd=0;
;;;1198   			}
;;;1199   		}
;;;1200   
;;;1201   	if(makb[1]._cnt<5)
;;;1202   		{
;;;1203   		if(makb[1]._T_nd[0]==0)
;;;1204   			{
;;;1205   			bat[1]._Tb=makb[1]._T[0];
;;;1206   			bat[1]._nd=0;
;;;1207   			}
;;;1208   		}
;;;1209   
;;;1210   	}
;;;1211   else if(NUMMAKB==4)
;;;1212   	{
;;;1213   	signed short temp_t;
;;;1214   	temp_t=-20;
;;;1215   	if(makb[0]._cnt<5)
;;;1216   		{
;;;1217   		if(makb[0]._T_nd[0]==0)
;;;1218   			{
;;;1219   			temp_t=makb[0]._T[0];
;;;1220   			bat[0]._nd=0;
;;;1221   			}
;;;1222   		}
;;;1223   	if(makb[1]._cnt<5)
;;;1224   		{
;;;1225   		if(makb[1]._T_nd[0]==0)
;;;1226   			{
;;;1227   			if(temp_t<makb[1]._T[0])
;;;1228   				{
;;;1229   				bat[0]._nd=0;
;;;1230   				temp_t=makb[1]._T[0];
;;;1231   				}
;;;1232   			}
;;;1233   		}
;;;1234   	if(temp_t!=-20)bat[0]._Tb = temp_t;
;;;1235   
;;;1236    	temp_t=-20;
;;;1237   	if(makb[2]._cnt<5)
;;;1238   		{
;;;1239   		if(makb[2]._T_nd[0]==0)
;;;1240   			{
;;;1241   			temp_t=makb[2]._T[0];
;;;1242   			bat[1]._nd=0;
;;;1243   			}
;;;1244   		}
;;;1245   	if(makb[3]._cnt<5)
;;;1246   		{
;;;1247   		if(makb[3]._T_nd[0]==0)
;;;1248   			{
;;;1249   			if(temp_t<makb[3]._T[0])
;;;1250   				{
;;;1251   				bat[1]._nd=0;
;;;1252   				temp_t=makb[3]._T[0];
;;;1253   				}
;;;1254   			}
;;;1255   		}
;;;1256   	if(temp_t!=-20)bat[1]._Tb = temp_t;
;;;1257   	}
;;;1258   
;;;1259   #endif
;;;1260   
;;;1261   
;;;1262   // 
;;;1263   temp_SL=(signed long)adc_buff_[2];
000f66  f9bb4004          LDRSH    r4,[r11,#4]  ; adc_buff_
;;;1264   temp_SL*=Kuload;
000f6a  49c3              LDR      r1,|L1.4728|
000f6c  f9b11000          LDRSH    r1,[r1,#0]  ; Kuload
000f70  fb04f401          MUL      r4,r4,r1
;;;1265   temp_SL/=2000L;
000f74  f44f61fa          MOV      r1,#0x7d0
000f78  fb94f1f1          SDIV     r1,r4,r1
;;;1266   load_U=(signed short)temp_SL;
000f7c  4dbf              LDR      r5,|L1.4732|
000f7e  8029              STRH     r1,[r5,#0]
;;;1267   
;;;1268   #ifdef UKU_220 
;;;1269   // 
;;;1270   temp_SL=(signed long)adc_buff_[2];
;;;1271   temp_SL*=Kuload;
;;;1272   temp_SL/=350L;
;;;1273   load_U=(signed short)temp_SL;
;;;1274   #endif
;;;1275   
;;;1276   #ifdef UKU_220_V2 
;;;1277   // 
;;;1278   temp_SL=(signed long)adc_buff_[2];
;;;1279   temp_SL*=Kuload;
;;;1280   temp_SL/=350L;
;;;1281   load_U=(signed short)temp_SL;
;;;1282   #endif
;;;1283   
;;;1284   #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;1285   // 
;;;1286   temp_SL=(signed long)adc_buff_[2];
;;;1287   temp_SL*=Kuload;
;;;1288   if(AUSW_MAIN==22010)temp_SL/=400L;
000f80  49ba              LDR      r1,|L1.4716|
000f82  8809              LDRH     r1,[r1,#0]  ; AUSW_MAIN
000f84  f5a148a8          SUB      r8,r1,#0x5400
000f88  f5b878fd          SUBS     r8,r8,#0x1fa
000f8c  d104              BNE      |L1.3992|
000f8e  f44f78c8          MOV      r8,#0x190
000f92  fb94f4f8          SDIV     r4,r4,r8
000f96  e003              B        |L1.4000|
                  |L1.3992|
;;;1289   else temp_SL/=500L;
000f98  f44f78fa          MOV      r8,#0x1f4
000f9c  fb94f4f8          SDIV     r4,r4,r8
                  |L1.4000|
;;;1290   load_U=(signed short)temp_SL;
000fa0  fa0ff984          SXTH     r9,r4
000fa4  f8a59000          STRH     r9,[r5,#0]
;;;1291   #endif
;;;1292   
;;;1293   
;;;1294   #ifdef UKU_KONTUR
;;;1295   //   1(  )
;;;1296   if((adc_buff_[5]>800)&&(adc_buff_[5]<3800))ND_EXT[0]=0;
;;;1297   else ND_EXT[0]=1;
;;;1298   temp_SL=(signed long)adc_buff_[5];
;;;1299   temp_SL*=Ktext[0];
;;;1300   temp_SL/=20000L;
;;;1301   temp_SL-=273L;
;;;1302   t_ext[0]=(signed short)temp_SL;
;;;1303   #else 
;;;1304   //   1(  )
;;;1305   if((adc_buff_[5]>800)&&(adc_buff_[5]<3800))ND_EXT[0]=0;
000fa8  f9bb800a          LDRSH    r8,[r11,#0xa]  ; adc_buff_
000fac  f6403bb7          MOV      r11,#0xbb7
000fb0  f2a83421          SUB      r4,r8,#0x321
000fb4  4db2              LDR      r5,|L1.4736|
000fb6  455c              CMP      r4,r11
000fb8  d201              BCS      |L1.4030|
000fba  6028              STR      r0,[r5,#0]  ; ND_EXT
000fbc  e001              B        |L1.4034|
                  |L1.4030|
;;;1306   else ND_EXT[0]=1;
000fbe  f8c5c000          STR      r12,[r5,#0]  ; ND_EXT
                  |L1.4034|
;;;1307   temp_SL=(signed long)adc_buff_[5];
;;;1308   temp_SL*=Ktext[0];
000fc2  4cb0              LDR      r4,|L1.4740|
000fc4  f9b44000          LDRSH    r4,[r4,#0]  ; Ktext
000fc8  fb04f808          MUL      r8,r4,r8
;;;1309   temp_SL/=20000L;
000fcc  f6446e20          MOV      lr,#0x4e20
000fd0  fb98f8fe          SDIV     r8,r8,lr
;;;1310   temp_SL-=273L;
000fd4  f2a81811          SUB      r8,r8,#0x111
;;;1311   t_ext[0]=(signed short)temp_SL;
000fd8  f8dfe2ac          LDR      lr,|L1.4744|
000fdc  f8ae8000          STRH     r8,[lr,#0]
;;;1312   #endif
;;;1313   
;;;1314   #ifdef UKU_220
;;;1315   
;;;1316   //   2(  )
;;;1317   if((adc_buff_[3]>800)&&(adc_buff_[3]<3800))ND_EXT[1]=0;
;;;1318   else ND_EXT[1]=1;
;;;1319   temp_SL=(signed long)adc_buff_[3];
;;;1320   temp_SL*=Ktext[1];
;;;1321   temp_SL/=20000L;
;;;1322   temp_SL-=273L;
;;;1323   t_ext[1]=(signed short)temp_SL;
;;;1324   
;;;1325   //   3(  MSAN)
;;;1326   if((adc_buff_[10]>800)&&(adc_buff_[10]<3800))ND_EXT[2]=0;
;;;1327   else ND_EXT[2]=1;
;;;1328   temp_SL=(signed long)adc_buff_[10];
;;;1329   temp_SL*=Ktext[2];
;;;1330   temp_SL/=20000L;
;;;1331   temp_SL-=273L;
;;;1332   t_ext[2]=(signed short)temp_SL;
;;;1333   
;;;1334   #else
;;;1335   
;;;1336   
;;;1337   #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;1338   
;;;1339   //   
;;;1340   if((adc_buff_[6]>800)&&(adc_buff_[6]<3800))ND_EXT[0]=0;
000fe0  45da              CMP      r10,r11
000fe2  d201              BCS      |L1.4072|
000fe4  6028              STR      r0,[r5,#0]  ; ND_EXT
000fe6  e001              B        |L1.4076|
                  |L1.4072|
;;;1341   else ND_EXT[0]=1;
000fe8  f8c5c000          STR      r12,[r5,#0]  ; ND_EXT
                  |L1.4076|
;;;1342   temp_SL=(signed long)adc_buff_[6];
;;;1343   temp_SL*=Ktext[0];
000fec  4354              MULS     r4,r2,r4
;;;1344   temp_SL/=20000L;
000fee  f6446220          MOV      r2,#0x4e20
000ff2  fb94f2f2          SDIV     r2,r4,r2
;;;1345   temp_SL-=273L;
000ff6  f2a21211          SUB      r2,r2,#0x111
;;;1346   t_ext[0]=(signed short)temp_SL;
000ffa  f8ae2000          STRH     r2,[lr,#0]
;;;1347   
;;;1348   #else
;;;1349   
;;;1350   
;;;1351   
;;;1352   //   2(  )
;;;1353   if((adc_buff_[10]>800)&&(adc_buff_[10]<3800))ND_EXT[1]=0;
;;;1354   else ND_EXT[1]=1;
;;;1355   temp_SL=(signed long)adc_buff_[10];
;;;1356   temp_SL*=Ktext[1];
;;;1357   temp_SL/=20000L;
;;;1358   temp_SL-=273L;
;;;1359   t_ext[1]=(signed short)temp_SL;
;;;1360   
;;;1361   //   3(  MSAN)
;;;1362   if((adc_buff_[3]>800)&&(adc_buff_[3]<3800))ND_EXT[2]=0;
;;;1363   else ND_EXT[2]=1;
;;;1364   temp_SL=(signed long)adc_buff_[3];
;;;1365   temp_SL*=Ktext[2];
;;;1366   temp_SL/=20000L;
;;;1367   temp_SL-=273L;
;;;1368   t_ext[2]=(signed short)temp_SL;
;;;1369   
;;;1370   #endif
;;;1371   #endif
;;;1372   
;;;1373   #ifdef UKU_220_V2
;;;1374   
;;;1375   //   2(  )
;;;1376   if((adc_buff_[3]>800)&&(adc_buff_[3]<3800))ND_EXT[1]=0;
;;;1377   else ND_EXT[1]=1;
;;;1378   temp_SL=(signed long)adc_buff_[3];
;;;1379   temp_SL*=Ktext[1];
;;;1380   temp_SL/=20000L;
;;;1381   temp_SL-=273L;
;;;1382   t_ext[1]=(signed short)temp_SL;
;;;1383   
;;;1384   //   3(  MSAN)
;;;1385   if((adc_buff_[10]>800)&&(adc_buff_[10]<3800))ND_EXT[2]=0;
;;;1386   else ND_EXT[2]=1;
;;;1387   temp_SL=(signed long)adc_buff_[10];
;;;1388   temp_SL*=Ktext[2];
;;;1389   temp_SL/=20000L;
;;;1390   temp_SL-=273L;
;;;1391   t_ext[2]=(signed short)temp_SL;
;;;1392   
;;;1393   #else
;;;1394   
;;;1395   #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;1396   // 
;;;1397   if(bps[8]._device==dIBAT_METR)
000ffe  4ca3              LDR      r4,|L1.4748|
;;;1398   	{
;;;1399   	ibat_metr_buff_[0]=((signed long)bps[8]._buff[0])+(((signed long)bps[8]._buff[1])<<8);
;;;1400   	ibat_metr_buff_[1]=((signed long)bps[8]._buff[2])+(((signed long)bps[8]._buff[3])<<8);
;;;1401   	bIBAT_SMKLBR=((signed short)bps[8]._buff[4])+(((signed short)bps[8]._buff[5])<<8);
;;;1402   
;;;1403   	if(!bIBAT_SMKLBR)
;;;1404   		{
;;;1405   		signed long temp_SL;
;;;1406   		temp_SL=(signed long)ibat_metr_buff_[0];
;;;1407   		temp_SL-=(signed long)ibat_metr_buff_[1];
;;;1408   		temp_SL*=(signed long)Kibat1[0];
;;;1409   		if((AUSW_MAIN==22010)||(AUSW_MAIN==22011)||(AUSW_MAIN==22035)||(AUSW_MAIN==22033)||(AUSW_MAIN==22063)||(AUSW_MAIN==22023)||(AUSW_MAIN==22043))temp_SL/=2000L;
;;;1410   	
;;;1411   		Ib_ips_termokompensat =(signed short)temp_SL;
001000  f8dfc28c          LDR      r12,|L1.4752|
001004  f89422a0          LDRB     r2,[r4,#0x2a0]        ;1397  ; bps
001008  2a09              CMP      r2,#9                 ;1397
00100a  d140              BNE      |L1.4238|
00100c  f89422a6          LDRB     r2,[r4,#0x2a6]        ;1399  ; bps
001010  f89482a7          LDRB     r8,[r4,#0x2a7]        ;1399  ; bps
001014  f8dfb27c          LDR      r11,|L1.4756|
001018  eb022208          ADD      r2,r2,r8,LSL #8       ;1399
00101c  f8cb2000          STR      r2,[r11,#0]           ;1399  ; ibat_metr_buff_
001020  f89482a8          LDRB     r8,[r4,#0x2a8]        ;1400  ; bps
001024  f894a2a9          LDRB     r10,[r4,#0x2a9]       ;1400  ; bps
001028  eb08280a          ADD      r8,r8,r10,LSL #8      ;1400
00102c  f8cb8004          STR      r8,[r11,#4]           ;1400  ; ibat_metr_buff_
001030  f894a2aa          LDRB     r10,[r4,#0x2aa]       ;1401  ; bps
001034  f894b2ab          LDRB     r11,[r4,#0x2ab]       ;1401  ; bps
001038  eb0a2a0b          ADD      r10,r10,r11,LSL #8    ;1401
00103c  f8dfb258          LDR      r11,|L1.4760|
001040  fa0ffa8a          SXTH     r10,r10               ;1401
001044  f8aba000          STRH     r10,[r11,#0]          ;1401
001048  f1ba0f00          CMP      r10,#0                ;1403
00104c  d11f              BNE      |L1.4238|
00104e  eba20808          SUB      r8,r2,r8              ;1407
001052  4a85              LDR      r2,|L1.4712|
001054  f9b22000          LDRSH    r2,[r2,#0]            ;1408  ; Kibat1
001058  fb02f208          MUL      r2,r2,r8              ;1408
00105c  f5a148a8          SUB      r8,r1,#0x5400         ;1409
001060  f5b878fd          SUBS     r8,r8,#0x1fa          ;1409
001064  d00d              BEQ      |L1.4226|
001066  f1b80801          SUBS     r8,r8,#1              ;1409
00106a  d00a              BEQ      |L1.4226|
00106c  4299              CMP      r1,r3                 ;1409
00106e  d008              BEQ      |L1.4226|
001070  42b1              CMP      r1,r6                 ;1409
001072  d006              BEQ      |L1.4226|
001074  f1b80334          SUBS     r3,r8,#0x34           ;1409
001078  d003              BEQ      |L1.4226|
00107a  3328              ADDS     r3,r3,#0x28           ;1409
00107c  d001              BEQ      |L1.4226|
00107e  3b14              SUBS     r3,r3,#0x14           ;1409
001080  d103              BNE      |L1.4234|
                  |L1.4226|
001082  f44f61fa          MOV      r1,#0x7d0             ;1409
001086  fb92f2f1          SDIV     r2,r2,r1              ;1409
                  |L1.4234|
00108a  f8ac2000          STRH     r2,[r12,#0]
                  |L1.4238|
;;;1412   		}
;;;1413   	}
;;;1414   
;;;1415   bat[0]._Ub=load_U;
00108e  4e79              LDR      r6,|L1.4724|
001090  f8a69002          STRH     r9,[r6,#2]
;;;1416   bat[0]._Ib=Ib_ips_termokompensat;
001094  f9bc1000          LDRSH    r1,[r12,#0]  ; Ib_ips_termokompensat
001098  8131              STRH     r1,[r6,#8]
;;;1417   
;;;1418   #endif
;;;1419   #endif
;;;1420   
;;;1421   
;;;1422   #ifdef UKU_TELECORE2015
;;;1423   
;;;1424   //   1
;;;1425   if((adc_buff_[7]>800)&&(adc_buff_[7]<3800))ND_EXT[0]=0;
;;;1426   else ND_EXT[0]=1;
;;;1427   temp_SL=(signed long)adc_buff_[7];
;;;1428   temp_SL*=Ktext[0];
;;;1429   temp_SL/=20000L;
;;;1430   temp_SL-=273L;
;;;1431   t_ext[0]=(signed short)temp_SL;
;;;1432   
;;;1433   
;;;1434   //   2
;;;1435   if((adc_buff_[6]>800)&&(adc_buff_[6]<3800))ND_EXT[1]=0;
;;;1436   else ND_EXT[1]=1;
;;;1437   temp_SL=(signed long)adc_buff_[6];
;;;1438   temp_SL*=Ktext[1];
;;;1439   temp_SL/=20000L;
;;;1440   temp_SL-=273L;
;;;1441   t_ext[1]=(signed short)temp_SL;
;;;1442   
;;;1443   #endif
;;;1444   
;;;1445   // 
;;;1446   temp_SL=(signed long)adc_buff_ext_[0];
00109a  f8dfc200          LDR      r12,|L1.4764|
00109e  f8bc3000          LDRH     r3,[r12,#0]  ; adc_buff_ext_
;;;1447   temp_SL*=Kunet_ext[0];
0010a2  f8df81fc          LDR      r8,|L1.4768|
0010a6  f9b82000          LDRSH    r2,[r8,#0]  ; Kunet_ext
0010aa  435a              MULS     r2,r3,r2
;;;1448   temp_SL/=4000L;
0010ac  f44f6b7a          MOV      r11,#0xfa0
0010b0  fb92f2fb          SDIV     r2,r2,r11
;;;1449   Uvv[0]=(signed short)temp_SL;
0010b4  4b7b              LDR      r3,|L1.4772|
0010b6  b292              UXTH     r2,r2
0010b8  801a              STRH     r2,[r3,#0]
;;;1450   if(Uvv[0]<100) Uvv0=Uvv[0];
0010ba  f8dfa1ec          LDR      r10,|L1.4776|
0010be  2a64              CMP      r2,#0x64
0010c0  d202              BCS      |L1.4296|
0010c2  f8aa2000          STRH     r2,[r10,#0]
0010c6  e003              B        |L1.4304|
                  |L1.4296|
;;;1451   else Uvv0=net_U;
0010c8  4a78              LDR      r2,|L1.4780|
0010ca  8812              LDRH     r2,[r2,#0]  ; net_U
0010cc  f8aa2000          STRH     r2,[r10,#0]
                  |L1.4304|
;;;1452   
;;;1453   // 
;;;1454   temp_SL=(signed long)adc_buff_ext_[1];
0010d0  f8bcc002          LDRH     r12,[r12,#2]  ; adc_buff_ext_
;;;1455   temp_SL*=Kunet_ext[1];
0010d4  f9b82002          LDRSH    r2,[r8,#2]  ; Kunet_ext
0010d8  fb02f20c          MUL      r2,r2,r12
;;;1456   temp_SL/=4000L;
0010dc  fb92f2fb          SDIV     r2,r2,r11
;;;1457   Uvv[1]=(signed short)temp_SL;
0010e0  805a              STRH     r2,[r3,#2]
;;;1458   
;;;1459   
;;;1460   //  
;;;1461   temp_SL=(signed long)eb2_data_short[0];
0010e2  4b73              LDR      r3,|L1.4784|
0010e4  f9b32000          LDRSH    r2,[r3,#0]  ; eb2_data_short
;;;1462   temp_SL*=Kvv_eb2[0];
0010e8  f8dfc1c8          LDR      r12,|L1.4788|
0010ec  f9bc8000          LDRSH    r8,[r12,#0]  ; Kvv_eb2
0010f0  fb08f802          MUL      r8,r8,r2
;;;1463   temp_SL/=6000L;
0010f4  f2417270          MOV      r2,#0x1770
0010f8  fb98faf2          SDIV     r10,r8,r2
;;;1464   Uvv_eb2[0]=(signed short)temp_SL;
0010fc  f8df81b8          LDR      r8,|L1.4792|
001100  f8a8a000          STRH     r10,[r8,#0]
;;;1465   
;;;1466   temp_SL=(signed long)eb2_data_short[1];
001104  f9b3a002          LDRSH    r10,[r3,#2]  ; eb2_data_short
;;;1467   temp_SL*=Kvv_eb2[1];
001108  f9bcb002          LDRSH    r11,[r12,#2]  ; Kvv_eb2
00110c  fb0bfb0a          MUL      r11,r11,r10
;;;1468   temp_SL/=6000L;
001110  fb9bfaf2          SDIV     r10,r11,r2
;;;1469   Uvv_eb2[1]=(signed short)temp_SL;
001114  f8a8a002          STRH     r10,[r8,#2]
;;;1470   
;;;1471   temp_SL=(signed long)eb2_data_short[2];
001118  f9b3a004          LDRSH    r10,[r3,#4]  ; eb2_data_short
;;;1472   temp_SL*=Kvv_eb2[2];
00111c  f9bcc004          LDRSH    r12,[r12,#4]  ; Kvv_eb2
001120  fb0cfc0a          MUL      r12,r12,r10
;;;1473   temp_SL/=6000L;
001124  fb9cfcf2          SDIV     r12,r12,r2
;;;1474   Uvv_eb2[2]=(signed short)temp_SL;
001128  f8a8c004          STRH     r12,[r8,#4]
;;;1475   
;;;1476   //  
;;;1477   temp_SL=(signed long)eb2_data_short[3];
00112c  f9b3a006          LDRSH    r10,[r3,#6]  ; eb2_data_short
;;;1478   temp_SL*=Kpes_eb2[0];
001130  f8dfc188          LDR      r12,|L1.4796|
001134  f9bc8000          LDRSH    r8,[r12,#0]  ; Kpes_eb2
001138  fb08f80a          MUL      r8,r8,r10
;;;1479   temp_SL/=6000L;
00113c  fb98faf2          SDIV     r10,r8,r2
;;;1480   Upes_eb2[0]=(signed short)temp_SL;
001140  f8df817c          LDR      r8,|L1.4800|
001144  f8a8a000          STRH     r10,[r8,#0]
;;;1481   
;;;1482   temp_SL=(signed long)eb2_data_short[4];
001148  f9b3a008          LDRSH    r10,[r3,#8]  ; eb2_data_short
;;;1483   temp_SL*=Kpes_eb2[1];
00114c  f9bcb002          LDRSH    r11,[r12,#2]  ; Kpes_eb2
001150  fb0bfb0a          MUL      r11,r11,r10
;;;1484   temp_SL/=6000L;
001154  fb9bfaf2          SDIV     r10,r11,r2
;;;1485   Upes_eb2[1]=(signed short)temp_SL;
001158  f8a8a002          STRH     r10,[r8,#2]
;;;1486   
;;;1487   temp_SL=(signed long)eb2_data_short[5];
00115c  f9b3a00a          LDRSH    r10,[r3,#0xa]  ; eb2_data_short
;;;1488   temp_SL*=Kpes_eb2[2];
001160  f9bc3004          LDRSH    r3,[r12,#4]  ; Kpes_eb2
001164  fb03f30a          MUL      r3,r3,r10
;;;1489   temp_SL/=6000L;
001168  fb93f2f2          SDIV     r2,r3,r2
;;;1490   Upes_eb2[2]=(signed short)temp_SL;
00116c  f8a82004          STRH     r2,[r8,#4]
;;;1491   
;;;1492   //  
;;;1493   
;;;1494   ibt._T[0]=t_ext[1]+273;
001170  f8be2002          LDRH     r2,[lr,#2]  ; t_ext
001174  f8df814c          LDR      r8,|L1.4804|
001178  f2021211          ADD      r2,r2,#0x111
00117c  fa0ffc82          SXTH     r12,r2
001180  f8a8c000          STRH     r12,[r8,#0]
;;;1495   ibt._T[1]=t_ext[2]+273;
001184  f8be2004          LDRH     r2,[lr,#4]  ; t_ext
001188  f2021211          ADD      r2,r2,#0x111
00118c  fa0ffa82          SXTH     r10,r2
001190  f8a8a002          STRH     r10,[r8,#2]
;;;1496   
;;;1497   ibt._nd[0]=ND_EXT[1];
001194  686a              LDR      r2,[r5,#4]  ; ND_EXT
001196  b2d3              UXTB     r3,r2
001198  f8883008          STRB     r3,[r8,#8]
;;;1498   ibt._nd[1]=ND_EXT[2];
00119c  68aa              LDR      r2,[r5,#8]  ; ND_EXT
00119e  b2d2              UXTB     r2,r2
0011a0  f8882009          STRB     r2,[r8,#9]
;;;1499   
;;;1500   #ifndef UKU_TELECORE2015
;;;1501   if((ibt._nd[0]==0) &&  (ibt._nd[1]==0))
;;;1502   	{
;;;1503   	t_box=((ibt._T[0]+ibt._T[1])/2)-273;
0011a4  4d48              LDR      r5,|L1.4808|
0011a6  b903              CBNZ     r3,|L1.4522|
0011a8  b112              CBZ      r2,|L1.4528|
                  |L1.4522|
;;;1504   	}
;;;1505   else if((ibt._nd[0]==1) &&  (ibt._nd[1]==0))
0011aa  2b01              CMP      r3,#1
0011ac  d00a              BEQ      |L1.4548|
0011ae  e00a              B        |L1.4550|
                  |L1.4528|
0011b0  eb0c020a          ADD      r2,r12,r10            ;1503
0011b4  eb0272d2          ADD      r2,r2,r2,LSR #31      ;1503
0011b8  f46f7388          MVN      r3,#0x110             ;1503
0011bc  eb030262          ADD      r2,r3,r2,ASR #1       ;1503
0011c0  802a              STRH     r2,[r5,#0]            ;1503
0011c2  e01e              B        |L1.4610|
                  |L1.4548|
0011c4  b10a              CBZ      r2,|L1.4554|
                  |L1.4550|
;;;1506   	{
;;;1507   	t_box=ibt._T[1]-273;
;;;1508   	}
;;;1509   else if((ibt._nd[0]==0) &&  (ibt._nd[1]==1))
0011c6  b12b              CBZ      r3,|L1.4564|
0011c8  e006              B        |L1.4568|
                  |L1.4554|
0011ca  f2aa1a11          SUB      r10,r10,#0x111        ;1507
0011ce  f8a5a000          STRH     r10,[r5,#0]           ;1507
0011d2  e016              B        |L1.4610|
                  |L1.4564|
0011d4  2a01              CMP      r2,#1
0011d6  d002              BEQ      |L1.4574|
                  |L1.4568|
;;;1510   	{
;;;1511   	t_box=ibt._T[0]-273;
;;;1512   	}
;;;1513   else if((ibt._nd[0]==1) &&  (ibt._nd[1]==1))
0011d8  2b01              CMP      r3,#1
0011da  d005              BEQ      |L1.4584|
0011dc  e011              B        |L1.4610|
                  |L1.4574|
0011de  f2ac1c11          SUB      r12,r12,#0x111        ;1511
0011e2  f8a5c000          STRH     r12,[r5,#0]           ;1511
0011e6  e00c              B        |L1.4610|
                  |L1.4584|
0011e8  2a01              CMP      r2,#1
0011ea  d10a              BNE      |L1.4610|
;;;1514   	{
;;;1515   	if(t_ext_can_nd<5)t_box= t_ext_can;
0011ec  4a37              LDR      r2,|L1.4812|
0011ee  7812              LDRB     r2,[r2,#0]  ; t_ext_can_nd
0011f0  2a05              CMP      r2,#5
0011f2  d203              BCS      |L1.4604|
0011f4  4a36              LDR      r2,|L1.4816|
0011f6  8812              LDRH     r2,[r2,#0]  ; t_ext_can
0011f8  802a              STRH     r2,[r5,#0]
0011fa  e002              B        |L1.4610|
                  |L1.4604|
;;;1516   	else t_box=20;
0011fc  f04f0214          MOV      r2,#0x14
001200  802a              STRH     r2,[r5,#0]
                  |L1.4610|
;;;1517   	}
;;;1518   #endif
;;;1519   /*
;;;1520   //  
;;;1521   
;;;1522   ibt._T[0]=bat[0]._Tb+273;
;;;1523   ibt._T[1]=bat[1]._Tb+273;
;;;1524   ibt._T[2]=t_ext[1]+273;
;;;1525   ibt._T[3]=t_ext[2]+273;
;;;1526   
;;;1527   ibt._nd[0]=bat[0]._nd;
;;;1528   ibt._nd[1]=bat[1]._nd;
;;;1529   ibt._nd[2]=ND_EXT[1];
;;;1530   ibt._nd[3]=ND_EXT[2];
;;;1531   
;;;1532   ibt._avg1=0;
;;;1533   ibt._avg_cnt=4;
;;;1534   
;;;1535   if(ibt._nd[0]==0)
;;;1536   	{
;;;1537   	ibt._avg1+=ibt._T[0];
;;;1538   	}
;;;1539   else 
;;;1540   	{
;;;1541   	ibt._avg_cnt--;
;;;1542   	}
;;;1543   
;;;1544   if(ibt._nd[1]==0)
;;;1545   	{
;;;1546   	ibt._avg1+=ibt._T[1];
;;;1547   	}
;;;1548   else 
;;;1549   	{
;;;1550   	ibt._avg_cnt--;
;;;1551   	}
;;;1552   
;;;1553   if(ibt._nd[2]==0)
;;;1554   	{
;;;1555   	ibt._avg1+=ibt._T[2];
;;;1556   	}
;;;1557   else 
;;;1558   	{
;;;1559   	ibt._avg_cnt--;
;;;1560   	}
;;;1561   
;;;1562   if(ibt._nd[3]==0)
;;;1563   	{
;;;1564   	ibt._avg1+=ibt._T[3];
;;;1565   	}
;;;1566   else 
;;;1567   	{
;;;1568   	ibt._avg_cnt--;
;;;1569   	}
;;;1570   
;;;1571   if(ibt._avg_cnt==0)
;;;1572   	{
;;;1573   	}
;;;1574   else
;;;1575   	{
;;;1576   	ibt._avg1/=ibt._avg_cnt;
;;;1577   	}
;;;1578   
;;;1579   
;;;1580   if(ibt._nd[0]!=0)
;;;1581   	{
;;;1582   	ibt._T_dispers[0]=0;
;;;1583   	}
;;;1584   else 
;;;1585   	{
;;;1586   	ibt._T_dispers[0]=abs(ibt._T[0]-ibt._avg1);
;;;1587   	}
;;;1588   
;;;1589   if(ibt._nd[1]!=0)
;;;1590   	{
;;;1591   	ibt._T_dispers[1]=0;
;;;1592   	}
;;;1593   else 
;;;1594   	{
;;;1595   	ibt._T_dispers[1]=abs(ibt._T[1]-ibt._avg1);
;;;1596   	}
;;;1597   
;;;1598   if(ibt._nd[2]!=0)
;;;1599   	{
;;;1600   	ibt._T_dispers[2]=0;
;;;1601   	}
;;;1602   else 
;;;1603   	{
;;;1604   	ibt._T_dispers[2]=abs(ibt._T[2]-ibt._avg1);
;;;1605   	}
;;;1606   
;;;1607   if(ibt._nd[3]!=0)
;;;1608   	{
;;;1609   	ibt._T_dispers[3]=0;
;;;1610   	}
;;;1611   else 
;;;1612   	{
;;;1613   	ibt._T_dispers[3]=abs(ibt._T[3]-ibt._avg1);
;;;1614   	}
;;;1615   
;;;1616   if(	ibt._nd[0]&&
;;;1617   	ibt._nd[1]&&
;;;1618   	ibt._nd[2]&&
;;;1619   	ibt._nd[3]
;;;1620   	)
;;;1621   	{
;;;1622   	t_box=(bps[0]._Ti);
;;;1623   	}
;;;1624   
;;;1625   else if(	ibt._nd[0]||
;;;1626   	ibt._nd[1]||
;;;1627   	ibt._nd[2]||
;;;1628   	ibt._nd[3]
;;;1629   	)
;;;1630   	{
;;;1631   	t_box=(ibt._avg1-273);
;;;1632   	}
;;;1633   else 
;;;1634   	{
;;;1635   	ibt._max_dispers_num=0;
;;;1636   	ibt._max_dispers=ibt._T_dispers[0];
;;;1637   
;;;1638   	if(ibt._T_dispers[1]>ibt._max_dispers)
;;;1639   		{
;;;1640   		ibt._max_dispers_num=1;
;;;1641   		ibt._max_dispers=ibt._T_dispers[1];
;;;1642   		}
;;;1643   	if(ibt._T_dispers[2]>ibt._max_dispers)
;;;1644   		{
;;;1645   		ibt._max_dispers_num=2;
;;;1646   		ibt._max_dispers=ibt._T_dispers[2];
;;;1647   		}
;;;1648   	if(ibt._T_dispers[3]>ibt._max_dispers)
;;;1649   		{
;;;1650   		ibt._max_dispers_num=3;
;;;1651   		ibt._max_dispers=ibt._T_dispers[3];
;;;1652   		}
;;;1653   
;;;1654   	ibt._avg2=0;
;;;1655   
;;;1656   	if(ibt._max_dispers_num!=0)
;;;1657   		{
;;;1658   		ibt._avg2+=ibt._T[0];
;;;1659   		}
;;;1660   	if(ibt._max_dispers_num!=1)
;;;1661   		{
;;;1662   		ibt._avg2+=ibt._T[1];
;;;1663   		}
;;;1664   	if(ibt._max_dispers_num!=2)
;;;1665   		{
;;;1666   		ibt._avg2+=ibt._T[2];
;;;1667   		}
;;;1668   	if(ibt._max_dispers_num!=3)
;;;1669   		{
;;;1670   		ibt._avg2+=ibt._T[3];
;;;1671   		}
;;;1672   
;;;1673   	t_box=(ibt._avg2/3)-273;
;;;1674   
;;;1675   	}*/
;;;1676   
;;;1677   
;;;1678   //*********************************************
;;;1679   
;;;1680   if((BAT_IS_ON[0]==bisON)&&(bat[0]._Ub>200)) Ibmax=bat[0]._Ib;
001202  4a34              LDR      r2,|L1.4820|
001204  7813              LDRB     r3,[r2,#0]  ; BAT_IS_ON
001206  2b55              CMP      r3,#0x55
001208  d103              BNE      |L1.4626|
00120a  f1b90fc8          CMP      r9,#0xc8
00120e  dd00              BLE      |L1.4626|
001210  86f9              STRH     r1,[r7,#0x36]
                  |L1.4626|
;;;1681   if((BAT_IS_ON[1]==bisON)&&(bat[1]._Ub>200)&&(bat[1]._Ib>bat[0]._Ib)) Ibmax=bat[1]._Ib;
001212  7852              LDRB     r2,[r2,#1]  ; BAT_IS_ON
001214  2a55              CMP      r2,#0x55
001216  d108              BNE      |L1.4650|
001218  f9b6204e          LDRSH    r2,[r6,#0x4e]  ; bat
00121c  2ac8              CMP      r2,#0xc8
00121e  dd04              BLE      |L1.4650|
001220  f9b62054          LDRSH    r2,[r6,#0x54]  ; bat
001224  428a              CMP      r2,r1
001226  dd00              BLE      |L1.4650|
001228  86fa              STRH     r2,[r7,#0x36]
                  |L1.4650|
;;;1682   
;;;1683   //if((AUSW_MAIN==22063)||(AUSW_MAIN==22023)||(AUSW_MAIN==22043))Ibmax=Ib_ips_termokompensat;
;;;1684   #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;1685   Ibmax=Ib_ips_termokompensat;
00122a  86f9              STRH     r1,[r7,#0x36]
;;;1686   #endif
;;;1687   for(i=0;i<NUMIST;i++)
00122c  f04f0300          MOV      r3,#0
001230  4a29              LDR      r2,|L1.4824|
001232  f9b25000          LDRSH    r5,[r2,#0]
001236  e06f              B        |L1.4888|
                  |L1.4664|
;;;1688   	{
;;;1689   	if(bps[i]._cnt<25)
001238  ebc302c3          RSB      r2,r3,r3,LSL #3
00123c  eb020242          ADD      r2,r2,r2,LSL #1
001240  eb040282          ADD      r2,r4,r2,LSL #2
001244  78d7              LDRB     r7,[r2,#3]
001246  2f19              CMP      r7,#0x19
001248  d25c              BCS      |L1.4868|
;;;1690        	{
;;;1691        	bps[i]._Ii=bps[i]._buff[0]+(bps[i]._buff[1]*256);
00124a  7997              LDRB     r7,[r2,#6]
00124c  f892c007          LDRB     r12,[r2,#7]
001250  eb07270c          ADD      r7,r7,r12,LSL #8
001254  6257              STR      r7,[r2,#0x24]
;;;1692        	bps[i]._Uin=bps[i]._buff[2]+(bps[i]._buff[3]*256);
001256  7a17              LDRB     r7,[r2,#8]
001258  f892c009          LDRB     r12,[r2,#9]
00125c  eb07270c          ADD      r7,r7,r12,LSL #8
001260  6217              STR      r7,[r2,#0x20]
;;;1693        	bps[i]._Uii=bps[i]._buff[4]+(bps[i]._buff[5]*256);
001262  7a97              LDRB     r7,[r2,#0xa]
001264  e03a              B        |L1.4828|
001266  0000              DCW      0x0000
                  |L1.4712|
                          DCD      Kibat1
                  |L1.4716|
                          DCD      AUSW_MAIN
                  |L1.4720|
                          DCD      Ktbat
                  |L1.4724|
                          DCD      bat
                  |L1.4728|
                          DCD      Kuload
                  |L1.4732|
                          DCD      load_U
                  |L1.4736|
                          DCD      ND_EXT
                  |L1.4740|
                          DCD      Ktext
                  |L1.4744|
                          DCD      t_ext
                  |L1.4748|
                          DCD      bps
                  |L1.4752|
                          DCD      Ib_ips_termokompensat
                  |L1.4756|
                          DCD      ibat_metr_buff_
                  |L1.4760|
                          DCD      bIBAT_SMKLBR
                  |L1.4764|
                          DCD      adc_buff_ext_
                  |L1.4768|
                          DCD      Kunet_ext
                  |L1.4772|
                          DCD      Uvv
                  |L1.4776|
                          DCD      Uvv0
                  |L1.4780|
                          DCD      net_U
                  |L1.4784|
                          DCD      eb2_data_short
                  |L1.4788|
                          DCD      Kvv_eb2
                  |L1.4792|
                          DCD      Uvv_eb2
                  |L1.4796|
                          DCD      Kpes_eb2
                  |L1.4800|
                          DCD      Upes_eb2
                  |L1.4804|
                          DCD      ibt
                  |L1.4808|
                          DCD      t_box
                  |L1.4812|
                          DCD      t_ext_can_nd
                  |L1.4816|
                          DCD      t_ext_can
                  |L1.4820|
                          DCD      BAT_IS_ON
                  |L1.4824|
                          DCD      NUMIST
                  |L1.4828|
0012dc  f892c00b          LDRB     r12,[r2,#0xb]
0012e0  eb07270c          ADD      r7,r7,r12,LSL #8
0012e4  61d7              STR      r7,[r2,#0x1c]
;;;1694        	bps[i]._Ti=(signed)(bps[i]._buff[6]);
0012e6  7b17              LDRB     r7,[r2,#0xc]
0012e8  6297              STR      r7,[r2,#0x28]
;;;1695        	bps[i]._adr_ee=bps[i]._buff[7];
0012ea  7b57              LDRB     r7,[r2,#0xd]
0012ec  f8827052          STRB     r7,[r2,#0x52]
;;;1696        	bps[i]._flags_tm=bps[i]._buff[8];
0012f0  7b97              LDRB     r7,[r2,#0xe]
0012f2  f8827042          STRB     r7,[r2,#0x42]
;;;1697   	     bps[i]._rotor=bps[i]._buff[10]+(bps[i]._buff[11]*256);    
0012f6  7c17              LDRB     r7,[r2,#0x10]
0012f8  f892c011          LDRB     r12,[r2,#0x11]
0012fc  eb07270c          ADD      r7,r7,r12,LSL #8
001300  64d7              STR      r7,[r2,#0x4c]
001302  e006              B        |L1.4882|
                  |L1.4868|
;;;1698        	} 
;;;1699   	else 
;;;1700        	{
;;;1701        	bps[i]._Uii=0; 
001304  61d0              STR      r0,[r2,#0x1c]
;;;1702        	bps[i]._Ii=0;
001306  6250              STR      r0,[r2,#0x24]
;;;1703        	bps[i]._Uin=0;
001308  6210              STR      r0,[r2,#0x20]
;;;1704        	bps[i]._Ti=0;
00130a  6290              STR      r0,[r2,#0x28]
;;;1705        	bps[i]._flags_tm=0; 
00130c  f8820042          STRB     r0,[r2,#0x42]
;;;1706   	     bps[i]._rotor=0;    
001310  64d0              STR      r0,[r2,#0x4c]
                  |L1.4882|
001312  f1030301          ADD      r3,r3,#1              ;1687
001316  b2db              UXTB     r3,r3                 ;1687
                  |L1.4888|
001318  42ab              CMP      r3,r5                 ;1687
00131a  db8d              BLT      |L1.4664|
;;;1707        	}
;;;1708        
;;;1709        }
;;;1710   
;;;1711   
;;;1712   
;;;1713   load_I=-(bat[0]._Ib/10)-(bat[1]._Ib/10);
00131c  f04f020a          MOV      r2,#0xa
001320  fb91f1f2          SDIV     r1,r1,r2
001324  f9b63054          LDRSH    r3,[r6,#0x54]  ; bat
001328  fb93f2f2          SDIV     r2,r3,r2
00132c  4411              ADD      r1,r1,r2
00132e  f1c10100          RSB      r1,r1,#0
001332  b20f              SXTH     r7,r1
001334  4eff              LDR      r6,|L1.5940|
001336  8037              STRH     r7,[r6,#0]
;;;1714   
;;;1715   Isumm=0;
001338  4bff              LDR      r3,|L1.5944|
00133a  8018              STRH     r0,[r3,#0]
;;;1716   
;;;1717   for(i=0;i<NUMIST;i++)
00133c  f04f0100          MOV      r1,#0
001340  e012              B        |L1.4968|
                  |L1.4930|
;;;1718        {
;;;1719        if(bps[i]._cnt<5)Isumm+=bps[i]._Ii;
001342  ebc102c1          RSB      r2,r1,r1,LSL #3
001346  eb020242          ADD      r2,r2,r2,LSL #1
00134a  eb040282          ADD      r2,r4,r2,LSL #2
00134e  f892c003          LDRB     r12,[r2,#3]
001352  f1bc0f05          CMP      r12,#5
001356  d204              BCS      |L1.4962|
001358  6a52              LDR      r2,[r2,#0x24]
00135a  f8b3c000          LDRH     r12,[r3,#0]  ; Isumm
00135e  4462              ADD      r2,r2,r12
001360  801a              STRH     r2,[r3,#0]
                  |L1.4962|
001362  f1010101          ADD      r1,r1,#1              ;1717
001366  b2c9              UXTB     r1,r1                 ;1717
                  |L1.4968|
001368  42a9              CMP      r1,r5                 ;1717
00136a  dbea              BLT      |L1.4930|
;;;1720        }  
;;;1721        
;;;1722   load_I=load_I+Isumm;
00136c  8819              LDRH     r1,[r3,#0]  ; Isumm
00136e  4439              ADD      r1,r1,r7
001370  b209              SXTH     r1,r1
001372  8031              STRH     r1,[r6,#0]
;;;1723   if(load_I<0)load_I=0;
001374  2900              CMP      r1,#0
001376  da00              BGE      |L1.4986|
001378  8030              STRH     r0,[r6,#0]
                  |L1.4986|
;;;1724   
;;;1725   #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;1726   load_I=0;
00137a  8030              STRH     r0,[r6,#0]
;;;1727   
;;;1728   Isumm=0;
00137c  8018              STRH     r0,[r3,#0]
;;;1729   
;;;1730   for(i=0;i<NUMIST;i++)
00137e  f04f0100          MOV      r1,#0
001382  e00f              B        |L1.5028|
                  |L1.4996|
;;;1731        {
;;;1732        if(bps[i]._cnt<5)Isumm+=bps[i]._Ii;
001384  ebc102c1          RSB      r2,r1,r1,LSL #3
001388  eb020242          ADD      r2,r2,r2,LSL #1
00138c  eb040282          ADD      r2,r4,r2,LSL #2
001390  78d7              LDRB     r7,[r2,#3]
001392  2f05              CMP      r7,#5
001394  d203              BCS      |L1.5022|
001396  6a52              LDR      r2,[r2,#0x24]
001398  881f              LDRH     r7,[r3,#0]  ; Isumm
00139a  443a              ADD      r2,r2,r7
00139c  801a              STRH     r2,[r3,#0]
                  |L1.5022|
00139e  f1010101          ADD      r1,r1,#1              ;1730
0013a2  b2c9              UXTB     r1,r1                 ;1730
                  |L1.5028|
0013a4  42a9              CMP      r1,r5                 ;1730
0013a6  dbed              BLT      |L1.4996|
;;;1733        }  
;;;1734        
;;;1735   load_I=load_I+Isumm;
0013a8  881a              LDRH     r2,[r3,#0]  ; Isumm
0013aa  eb000102          ADD      r1,r0,r2
0013ae  b209              SXTH     r1,r1
0013b0  8031              STRH     r1,[r6,#0]
;;;1736   if(load_I<0)load_I=0;
0013b2  2900              CMP      r1,#0
0013b4  da00              BGE      |L1.5048|
0013b6  8030              STRH     r0,[r6,#0]
                  |L1.5048|
;;;1737   
;;;1738   #endif
;;;1739   
;;;1740   
;;;1741   
;;;1742   #ifdef UKU_GLONASS
;;;1743   inv[0]._Uio=6;
;;;1744   if (NUMINV)
;;;1745   	{
;;;1746   	for(i=0;i<NUMINV;i++)
;;;1747   		{
;;;1748   		if(bps[i+first_inv_slot]._cnt<25)
;;;1749        		{
;;;1750        		inv[i]._Ii=bps[i+first_inv_slot]._buff[0]+(bps[i+first_inv_slot]._buff[1]*256);
;;;1751        		inv[i]._Uin=bps[i+first_inv_slot]._buff[2]+(bps[i+first_inv_slot]._buff[3]*256);
;;;1752        		inv[i]._Uio=bps[i+first_inv_slot]._buff[4]+(bps[i+first_inv_slot]._buff[5]*256);
;;;1753        		inv[i]._Ti=(signed)(bps[i+first_inv_slot]._buff[6]);
;;;1754        		inv[i]._flags_tm=bps[i+first_inv_slot]._buff[8];
;;;1755   	    	//	inv[i]._rotor=bps[i+first_inv_slot]._buff[10]+(bps[i+first_inv_slot]._buff[11]*256);
;;;1756   			inv[i]._cnt=0;    
;;;1757        		} 
;;;1758   		else 
;;;1759        		{
;;;1760        		inv[i]._Uio=0; 
;;;1761        		inv[i]._Ii=0;
;;;1762        		inv[i]._Uin=0;
;;;1763        		inv[i]._Ti=0;
;;;1764        		inv[i]._flags_tm=0; 
;;;1765   //	     	inv[i]._rotor0;
;;;1766   			inv[i]._cnt=25;    
;;;1767        		}
;;;1768        	}
;;;1769      	}
;;;1770   #endif
;;;1771   
;;;1772   #ifndef UKU_GLONASS
;;;1773   if (NUMINV)
0013b8  49e0              LDR      r1,|L1.5948|
0013ba  f9b15000          LDRSH    r5,[r1,#0]  ; NUMINV
0013be  2d00              CMP      r5,#0
0013c0  d066              BEQ      |L1.5264|
;;;1774   	{
;;;1775   	for(i=0;i<NUMINV;i++)
0013c2  f04f0300          MOV      r3,#0
;;;1776   		{
;;;1777   		if(bps[i+20]._cnt<25)
;;;1778        		{
;;;1779        		inv[i]._Ii=bps[i+20]._buff[0]+(bps[i+20]._buff[1]*256);
0013c6  4ede              LDR      r6,|L1.5952|
0013c8  e060              B        |L1.5260|
                  |L1.5066|
0013ca  f1030114          ADD      r1,r3,#0x14           ;1777
0013ce  ebc101c1          RSB      r1,r1,r1,LSL #3       ;1777
0013d2  eb010141          ADD      r1,r1,r1,LSL #1       ;1777
0013d6  eb040181          ADD      r1,r4,r1,LSL #2       ;1777
0013da  78ca              LDRB     r2,[r1,#3]            ;1777
0013dc  2a19              CMP      r2,#0x19              ;1777
0013de  d239              BCS      |L1.5204|
0013e0  798a              LDRB     r2,[r1,#6]
0013e2  79cf              LDRB     r7,[r1,#7]
0013e4  eb022707          ADD      r7,r2,r7,LSL #8
0013e8  eb030243          ADD      r2,r3,r3,LSL #1
0013ec  eb061242          ADD      r2,r6,r2,LSL #5
0013f0  61d7              STR      r7,[r2,#0x1c]
;;;1780        		inv[i]._Pio=bps[i+20]._buff[2]+(bps[i+20]._buff[3]*256);
0013f2  7a0f              LDRB     r7,[r1,#8]
0013f4  f891c009          LDRB     r12,[r1,#9]
0013f8  eb07270c          ADD      r7,r7,r12,LSL #8
0013fc  62d7              STR      r7,[r2,#0x2c]
;;;1781        		inv[i]._Uio=bps[i+20]._buff[4]+(bps[i+20]._buff[5]*256);
0013fe  7a8f              LDRB     r7,[r1,#0xa]
001400  f891c00b          LDRB     r12,[r1,#0xb]
001404  eb07270c          ADD      r7,r7,r12,LSL #8
001408  6197              STR      r7,[r2,#0x18]
;;;1782        		inv[i]._Ti=(signed)(bps[i+20]._buff[6]);
00140a  7b0f              LDRB     r7,[r1,#0xc]
00140c  6217              STR      r7,[r2,#0x20]
;;;1783        		inv[i]._flags_tm=bps[i+20]._buff[7];
00140e  7b4f              LDRB     r7,[r1,#0xd]
001410  f8827046          STRB     r7,[r2,#0x46]
;;;1784        		inv[i]._Uin=bps[i+20]._buff[8]+(bps[i+20]._buff[9]*256);
001414  7b8f              LDRB     r7,[r1,#0xe]
001416  f891c00f          LDRB     r12,[r1,#0xf]
00141a  eb07270c          ADD      r7,r7,r12,LSL #8
00141e  6297              STR      r7,[r2,#0x28]
;;;1785        		inv[i]._Uil=bps[i+20]._buff[10]+(bps[i+20]._buff[11]*256);
001420  7c0f              LDRB     r7,[r1,#0x10]
001422  f891c011          LDRB     r12,[r1,#0x11]
001426  eb07270c          ADD      r7,r7,r12,LSL #8
00142a  6257              STR      r7,[r2,#0x24]
;;;1786   			inv[i]._cnt=0;
00142c  7090              STRB     r0,[r2,#2]
;;;1787   			inv[i]._Uoutmin=bps[i+20]._buff[12]; 
00142e  7c8f              LDRB     r7,[r1,#0x12]
001430  f8827059          STRB     r7,[r2,#0x59]
;;;1788   			inv[i]._Uoutmax=bps[i+20]._buff[13]; 
001434  7ccf              LDRB     r7,[r1,#0x13]
001436  f882705a          STRB     r7,[r2,#0x5a]
;;;1789   			inv[i]._Pnom=bps[i+20]._buff[14]; 
00143a  7d0f              LDRB     r7,[r1,#0x14]
00143c  f8827058          STRB     r7,[r2,#0x58]
;;;1790   			inv[i]._net_contr_en=bps[i+20]._buff[15];
001440  7d4f              LDRB     r7,[r1,#0x15]
001442  f882705b          STRB     r7,[r2,#0x5b]
;;;1791   			inv[i]._pwm_en=bps[i+20]._buff[16];  
001446  7d8f              LDRB     r7,[r1,#0x16]
001448  f882705c          STRB     r7,[r2,#0x5c]
;;;1792   			inv[i]._phase_mode=bps[i+20]._buff[17];  
00144c  7dc9              LDRB     r1,[r1,#0x17]
00144e  f882105d          STRB     r1,[r2,#0x5d]
001452  e018              B        |L1.5254|
                  |L1.5204|
;;;1793        		} 
;;;1794   		else 
;;;1795        		{
;;;1796         		inv[i]._Ii=0;
001454  eb030143          ADD      r1,r3,r3,LSL #1
001458  eb061141          ADD      r1,r6,r1,LSL #5
00145c  61c8              STR      r0,[r1,#0x1c]
;;;1797   			inv[i]._Pio=0;
00145e  62c8              STR      r0,[r1,#0x2c]
;;;1798   			inv[i]._Uio=0;
001460  6188              STR      r0,[r1,#0x18]
;;;1799        		inv[i]._Ti=0;
001462  6208              STR      r0,[r1,#0x20]
;;;1800        		inv[i]._flags_tm=0; 
001464  f8810046          STRB     r0,[r1,#0x46]
;;;1801        		inv[i]._Uil=0;
001468  6248              STR      r0,[r1,#0x24]
;;;1802        		inv[i]._Uin=0;
00146a  6288              STR      r0,[r1,#0x28]
;;;1803   			inv[i]._cnt=25; 
00146c  f04f0219          MOV      r2,#0x19
001470  708a              STRB     r2,[r1,#2]
;;;1804   			inv[i]._Uoutmin=0; 
001472  f8810059          STRB     r0,[r1,#0x59]
;;;1805   			inv[i]._Uoutmax=0; 
001476  f881005a          STRB     r0,[r1,#0x5a]
;;;1806   			inv[i]._Pnom=0; 
00147a  f8810058          STRB     r0,[r1,#0x58]
;;;1807   			inv[i]._net_contr_en=0;
00147e  f881005b          STRB     r0,[r1,#0x5b]
;;;1808   			inv[i]._pwm_en=0;   
001482  f881005c          STRB     r0,[r1,#0x5c]
                  |L1.5254|
001486  f1030301          ADD      r3,r3,#1              ;1775
00148a  b2db              UXTB     r3,r3                 ;1775
                  |L1.5260|
00148c  42ab              CMP      r3,r5                 ;1775
00148e  db9c              BLT      |L1.5066|
                  |L1.5264|
;;;1809   			   
;;;1810        		}
;;;1811        	}
;;;1812      	}
;;;1813   #endif
;;;1814   
;;;1815   #ifdef GLADKOV
;;;1816   inv[0]._Ii=bps[4]._buff[0]+(bps[4]._buff[1]*256);
;;;1817   inv[0]._Pio=bps[4]._buff[2]+(bps[4]._buff[3]*256);
;;;1818   inv[0]._Uio=bps[4]._buff[4]+(bps[4]._buff[5]*256);
;;;1819   inv[0]._Ti=(signed)(bps[4]._buff[6]);
;;;1820   inv[0]._flags_tm=bps[4]._buff[7];
;;;1821   inv[0]._Uin=bps[4]._buff[8]+(bps[4]._buff[9]*256);
;;;1822   inv[0]._Uil=bps[4]._buff[10]+(bps[4]._buff[11]*256);
;;;1823   inv[0]._cnt=0;    
;;;1824   
;;;1825   inv[1]._Ii=bps[21]._buff[0]+(bps[21]._buff[1]*256);
;;;1826   inv[1]._Pio=bps[21]._buff[2]+(bps[21]._buff[3]*256);
;;;1827   inv[1]._Uio=bps[21]._buff[4]+(bps[21]._buff[5]*256);
;;;1828   inv[1]._Ti=(signed)(bps[21]._buff[6]);
;;;1829   inv[1]._flags_tm=bps[21]._buff[7];
;;;1830   inv[1]._Uin=bps[21]._buff[8]+(bps[21]._buff[9]*256);
;;;1831   inv[1]._Uil=bps[21]._buff[10]+(bps[21]._buff[11]*256);
;;;1832   inv[1]._cnt=0;    
;;;1833   #endif
;;;1834   
;;;1835   /*
;;;1836   if((BAT_IS_ON[0]==bisON)&&(BAT_TYPE==1))
;;;1837   	{
;;;1838   	lakb[0]._battCommState=0;
;;;1839   	if(lakb[0]._cnt>10)lakb[0]._battCommState=2;
;;;1840   	else if(lakb[0]._bRS485ERR==1)lakb[0]._battCommState=1;
;;;1841   	
;;;1842   	if(lakb[0]._battCommState==0)
;;;1843   		{	
;;;1844   		bat[0]._Ub=(signed short)((lakb[0]._tot_bat_volt+5)/10);
;;;1845   		bat[0]._Ib=(signed short)lakb[0]._ch_curr;
;;;1846   		if(lakb[0]._dsch_curr) bat[0]._Ib=(signed short) (-lakb[0]._dsch_curr);
;;;1847   		bat[0]._Tb=(signed short)lakb[0]._max_cell_temp;
;;;1848   		}
;;;1849   	}
;;;1850   */
;;;1851   
;;;1852   #ifdef UKU_TELECORE2015
;;;1853   
;;;1854   	lakb[0]._ch_curr/*temp_SS*/=((ascii2halFhex(sacredSunBatteryInBuff[113]))<<12)+
;;;1855   						((ascii2halFhex(sacredSunBatteryInBuff[114]))<<8)+
;;;1856   						((ascii2halFhex(sacredSunBatteryInBuff[115]))<<4)+
;;;1857   						((ascii2halFhex(sacredSunBatteryInBuff[116])));
;;;1858   	
;;;1859   	/*if(temp_SS&0x8000)		lakb[0]._ch_curr=~temp_SS;
;;;1860   	else 				lakb[0]._ch_curr=temp_SS;*/
;;;1861   
;;;1862   	lakb[0]._tot_bat_volt=	(unsigned short)(((ascii2halFhex(sacredSunBatteryInBuff[117]))<<12)+
;;;1863   						((ascii2halFhex(sacredSunBatteryInBuff[118]))<<8)+
;;;1864   						((ascii2halFhex(sacredSunBatteryInBuff[119]))<<4)+
;;;1865   						((ascii2halFhex(sacredSunBatteryInBuff[120]))))/100;
;;;1866   
;;;1867   	lakb[0]._max_cell_temp= 	(((ascii2halFhex(sacredSunBatteryInBuff[93]))<<12)+
;;;1868   						((ascii2halFhex(sacredSunBatteryInBuff[94]))<<8)+
;;;1869   						((ascii2halFhex(sacredSunBatteryInBuff[95]))<<4)+
;;;1870   						((ascii2halFhex(sacredSunBatteryInBuff[96]))))/10-273;
;;;1871   
;;;1872   	lakb[0]._s_o_c_abs=		(unsigned short)((ascii2halFhex(sacredSunBatteryInBuff[121]))<<12)+
;;;1873   						((ascii2halFhex(sacredSunBatteryInBuff[122]))<<8)+
;;;1874   						((ascii2halFhex(sacredSunBatteryInBuff[123]))<<4)+
;;;1875   						((ascii2halFhex(sacredSunBatteryInBuff[124])));
;;;1876   
;;;1877   	lakb[0]._rat_cap=		(unsigned short)((ascii2halFhex(sacredSunBatteryInBuff[127]))<<12)+
;;;1878   						((ascii2halFhex(sacredSunBatteryInBuff[128]))<<8)+
;;;1879   						((ascii2halFhex(sacredSunBatteryInBuff[129]))<<4)+
;;;1880   						((ascii2halFhex(sacredSunBatteryInBuff[130])));
;;;1881   
;;;1882   	lakb[0]._s_o_c=		lakb[0]._s_o_c_abs/(lakb[0]._rat_cap/100);
;;;1883   
;;;1884   
;;;1885   /*	lakb[0]._rat_cap= (lakb_damp[i][13]*256)+ lakb_damp[i][14];
;;;1886   	lakb[0]._max_cell_volt= (lakb_damp[i][0]*256)+ lakb_damp[i][1];
;;;1887   	lakb[0]._min_cell_volt= (lakb_damp[i][2]*256)+ lakb_damp[i][3];
;;;1888   	lakb[0]._max_cell_temp= lakb_damp[i][4];
;;;1889   	lakb[0]._min_cell_temp= lakb_damp[i][5];
;;;1890   	lakb[0]._tot_bat_volt= (lakb_damp[i][6]*256)+ lakb_damp[i][7];
;;;1891   	lakb[0]._ch_curr= (lakb_damp[i][8]*256)+ lakb_damp[i][8];
;;;1892   	lakb[0]._dsch_curr= (lakb_damp[i][10]*256)+ lakb_damp[i][11];
;;;1893   	lakb[0]._s_o_c= lakb_damp[i][12];
;;;1894   	lakb[0]._r_b_t= lakb_damp[i][15];
;;;1895   	lakb[0]._c_c_l_v= (lakb_damp[i][16]*256)+ lakb_damp[i][17];
;;;1896   	lakb[0]._s_o_h= lakb_damp[i][18];
;;;1897   
;;;1898   	if(lakb[i]._rat_cap==0)
;;;1899   		{
;;;1900   		if(lakb[i]._isOnCnt)
;;;1901   			{
;;;1902   			lakb[i]._isOnCnt--;
;;;1903   			if(lakb[i]._isOnCnt==0)
;;;1904   				{
;;;1905   				if(lakb[i]._battIsOn!=0) bLAKB_KONF_CH=1;
;;;1906   				}
;;;1907   			}
;;;1908   		}
;;;1909   	else 
;;;1910   		{
;;;1911   		if(lakb[i]._isOnCnt<50)
;;;1912   			{
;;;1913   			lakb[i]._isOnCnt++;
;;;1914   			if(lakb[i]._isOnCnt==50)
;;;1915   				{
;;;1916   				if(lakb[i]._battIsOn!=1) bLAKB_KONF_CH=1;
;;;1917   				}
;;;1918   			}
;;;1919   		}
;;;1920   	gran(&lakb[i]._isOnCnt,0,50);*/
;;;1921   
;;;1922   	
;;;1923   if(sacredSunSilentCnt<3) 
;;;1924   	{
;;;1925       	bat[0]._Ub=lakb[0]._tot_bat_volt;
;;;1926       	bat[0]._Tb=lakb[0]._max_cell_temp;
;;;1927      	bat[0]._Ib=lakb[0]._ch_curr/10;
;;;1928   	}
;;;1929   else 
;;;1930   	{
;;;1931       	//bat[0]._Ub=0;
;;;1932       	//bat[0]._Tb=0;
;;;1933      	//bat[0]._Ib=0;
;;;1934   	}
;;;1935   
;;;1936   if(BAT_TYPE==1)
;;;1937   	{
;;;1938   	char i;
;;;1939   	for(i=0;i<1;i++)
;;;1940   		{
;;;1941   		lakb[i]._rat_cap= (lakb_damp[i][13]*256)+ lakb_damp[i][14];
;;;1942   		lakb[i]._max_cell_volt= (lakb_damp[i][0]*256)+ lakb_damp[i][1];
;;;1943   		lakb[i]._min_cell_volt= (lakb_damp[i][2]*256)+ lakb_damp[i][3];
;;;1944   		lakb[i]._max_cell_temp= lakb_damp[i][4];
;;;1945   		lakb[i]._min_cell_temp= lakb_damp[i][5];
;;;1946   		lakb[i]._tot_bat_volt= (lakb_damp[i][6]*256)+ lakb_damp[i][7];
;;;1947   		lakb[i]._ch_curr= (lakb_damp[i][8]*256)+ lakb_damp[i][9];
;;;1948   		lakb[i]._dsch_curr= (lakb_damp[i][10]*256)+ lakb_damp[i][11];
;;;1949   		lakb[i]._s_o_c= lakb_damp[i][12];
;;;1950   		lakb[i]._r_b_t= lakb_damp[i][15];
;;;1951   		lakb[i]._c_c_l_v= (lakb_damp[i][16]*256)+ lakb_damp[i][17];
;;;1952   		lakb[i]._s_o_h= lakb_damp[i][18];
;;;1953   		lakb[i]._flags1= lakb_damp[i][34];
;;;1954   		lakb[i]._flags2= lakb_damp[i][35];
;;;1955   		lakb[i]._b_p_ser_num= lakb_damp[i][36];
;;;1956   
;;;1957   /*		if(lakb[i]._rat_cap==0)
;;;1958   			{
;;;1959   			if(lakb[i]._isOnCnt)
;;;1960   				{
;;;1961   				lakb[i]._isOnCnt--;
;;;1962   				if(lakb[i]._isOnCnt==0)
;;;1963   					{
;;;1964   					if(lakb[i]._battIsOn!=0) bLAKB_KONF_CH=1;
;;;1965   					}
;;;1966   				}
;;;1967   			}
;;;1968   		else 
;;;1969   			{
;;;1970   			if(lakb[i]._isOnCnt<50)
;;;1971   				{
;;;1972   				lakb[i]._isOnCnt++;
;;;1973   				if(lakb[i]._isOnCnt==50)
;;;1974   					{
;;;1975   					if(lakb[i]._battIsOn!=1) bLAKB_KONF_CH=1;
;;;1976   					}
;;;1977   				}
;;;1978   			} */
;;;1979   		gran(&lakb[i]._isOnCnt,0,50);
;;;1980   	 	}
;;;1981   
;;;1982   	if(lakb_damp[0][41]==100)
;;;1983   		{
;;;1984   		li_bat._485Error=1;
;;;1985   		}
;;;1986   	if(lakb_damp[0][41]==0)
;;;1987   		{
;;;1988   		//if(bRS485ERR)bLAKB_KONF_CH=1;
;;;1989   		li_bat._485Error=0;
;;;1990   		}
;;;1991   	li_bat._485ErrorCnt=lakb_damp[0][41];
;;;1992   
;;;1993   
;;;1994   	}
;;;1995   
;;;1996   
;;;1997   #endif
;;;1998   
;;;1999   
;;;2000   #ifdef UKU_TELECORE2015
;;;2001   //   
;;;2002   //TODO          
;;;2003   li_bat._batStat=bsOK;
;;;2004   if(BAT_TYPE==1) //COSLIGHT
;;;2005   	{
;;;2006   	if(li_bat._batStat==bsOK)
;;;2007   		{
;;;2008   		li_bat._Ub=lakb[0]._tot_bat_volt/10;
;;;2009   
;;;2010   		if(lakb[0]._ch_curr)li_bat._Ib=lakb[0]._ch_curr/10;
;;;2011   		else if(lakb[0]._dsch_curr) li_bat._Ib=bat[0]._Ib/10;//lakb[0]._dsch_curr/10;
;;;2012   	
;;;2013   		li_bat._ratCap=lakb[0]._rat_cap/100;
;;;2014   		li_bat._soc=lakb[0]._s_o_c;
;;;2015   		li_bat._soh=lakb[0]._s_o_h;
;;;2016   		li_bat._cclv=lakb[0]._c_c_l_v/10;
;;;2017   		li_bat._Tb=lakb[0]._max_cell_temp;
;;;2018   		li_bat._rbt=lakb[0]._r_b_t;
;;;2019   		}
;;;2020   	else 
;;;2021   		{
;;;2022   		li_bat._Ub=bat[0]._Ub;
;;;2023   		li_bat._Ib=bat[0]._Ib/10;
;;;2024   		li_bat._Tb=bat[0]._Tb;
;;;2025   		}
;;;2026   
;;;2027   	if((li_bat._485Error)||(li_bat._canError))
;;;2028   		{
;;;2029   		li_bat._batStat=bsOFF;
;;;2030   		}
;;;2031   	else li_bat._batStat=bsOK;
;;;2032   	}
;;;2033   #endif
;;;2034   
;;;2035   
;;;2036   /*
;;;2037   if((BAT_IS_ON[0]==bisON)&&(BAT_TYPE[0]==1)&&(BAT_LINK==0))
;;;2038   	{
;;;2039   
;;;2040   
;;;2041   	if(bat_drv_rx_buff[13]<=0x39)bbb[0]=bat_drv_rx_buff[13]-0x30;
;;;2042   	else bbb[0]=bat_drv_rx_buff[13]-55;
;;;2043   	if(bat_drv_rx_buff[14]<=0x39)bbb[1]=bat_drv_rx_buff[14]-0x30;
;;;2044   	else bbb[1]=bat_drv_rx_buff[14]-55;
;;;2045   	if(bat_drv_rx_buff[15]<=0x39)bbb[2]=bat_drv_rx_buff[15]-0x30;
;;;2046   	else bbb[2]=bat_drv_rx_buff[15]-55;
;;;2047   	if(bat_drv_rx_buff[16]<=0x39)bbb[3]=bat_drv_rx_buff[16]-0x30;
;;;2048   	else bbb[3]=bat_drv_rx_buff[16]-55;
;;;2049   
;;;2050   	tempSS=0;
;;;2051   	tempSS=((bbb[0]*4096)+(bbb[1]*256)+(bbb[2]*16)+bbb[3]);
;;;2052   
;;;2053   	bat[0]._max_cell_volt=(tempSS+5)/10;
;;;2054   
;;;2055   	if(bat_drv_rx_buff[17]<=0x39)bbb[0]=bat_drv_rx_buff[17]-0x30;
;;;2056   	else bbb[0]=bat_drv_rx_buff[17]-55;
;;;2057   	if(bat_drv_rx_buff[18]<=0x39)bbb[1]=bat_drv_rx_buff[18]-0x30;
;;;2058   	else bbb[1]=bat_drv_rx_buff[18]-55;
;;;2059   	if(bat_drv_rx_buff[19]<=0x39)bbb[2]=bat_drv_rx_buff[19]-0x30;
;;;2060   	else bbb[2]=bat_drv_rx_buff[19]-55;
;;;2061   	if(bat_drv_rx_buff[20]<=0x39)bbb[3]=bat_drv_rx_buff[20]-0x30;
;;;2062   	else bbb[3]=bat_drv_rx_buff[20]-55;
;;;2063   
;;;2064   	tempSS=0;
;;;2065   	tempSS=((bbb[0]*4096)+(bbb[1]*256)+(bbb[2]*16)+bbb[3]);
;;;2066   
;;;2067   	bat[0]._min_cell_volt=(tempSS+5)/10;
;;;2068   
;;;2069   
;;;2070   	}*/
;;;2071   
;;;2072   
;;;2073   
;;;2074   }
001490  e8bd9ffc          POP      {r2-r12,pc}
;;;2075   
                          ENDP

                  mnemo_hndl PROC
;;;2076   //-----------------------------------------------
;;;2077   void mnemo_hndl(void)
001494  4aab              LDR      r2,|L1.5956|
;;;2078   {
;;;2079   if(((ind==iMn_220)||(ind==iMn))&&(sub_ind==0)&&(MNEMO_ON==mnON))
;;;2080   	{
;;;2081   	if(mnemo_cnt)mnemo_cnt--;
001496  49ac              LDR      r1,|L1.5960|
001498  7810              LDRB     r0,[r2,#0]            ;2079  ; a_ind
00149a  2804              CMP      r0,#4                 ;2079
00149c  d001              BEQ      |L1.5282|
00149e  2801              CMP      r0,#1                 ;2079
0014a0  d105              BNE      |L1.5294|
                  |L1.5282|
0014a2  7850              LDRB     r0,[r2,#1]            ;2079  ; a_ind
0014a4  b918              CBNZ     r0,|L1.5294|
0014a6  48a9              LDR      r0,|L1.5964|
0014a8  7800              LDRB     r0,[r0,#0]            ;2079  ; MNEMO_ON
0014aa  2855              CMP      r0,#0x55              ;2079
0014ac  d003              BEQ      |L1.5302|
                  |L1.5294|
;;;2082   	}
;;;2083   else mnemo_cnt=MNEMO_TIME;
0014ae  48a8              LDR      r0,|L1.5968|
0014b0  8800              LDRH     r0,[r0,#0]  ; MNEMO_TIME
0014b2  7008              STRB     r0,[r1,#0]
                  |L1.5300|
;;;2084   }
0014b4  4770              BX       lr
                  |L1.5302|
0014b6  7808              LDRB     r0,[r1,#0]            ;2081  ; mnemo_cnt
0014b8  2800              CMP      r0,#0                 ;2081
0014ba  d0fb              BEQ      |L1.5300|
0014bc  f1a00001          SUB      r0,r0,#1              ;2081
0014c0  7008              STRB     r0,[r1,#0]            ;2081
0014c2  4770              BX       lr
;;;2085   
                          ENDP

                  adc_init PROC
;;;2086   //-----------------------------------------------
;;;2087   void adc_init(void)
0014c4  48a3              LDR      r0,|L1.5972|
;;;2088   {
;;;2089   
;;;2090   SET_REG(LPC_PINCON->PINSEL1,1,(25-16)*2,2);
0014c6  6841              LDR      r1,[r0,#4]
0014c8  f4212140          BIC      r1,r1,#0xc0000
0014cc  f4412180          ORR      r1,r1,#0x40000
0014d0  6041              STR      r1,[r0,#4]
;;;2091   SET_REG(LPC_PINCON->PINSEL1,1,(24-16)*2,2);
0014d2  6841              LDR      r1,[r0,#4]
0014d4  f4213140          BIC      r1,r1,#0x30000
0014d8  f4413180          ORR      r1,r1,#0x10000
0014dc  6041              STR      r1,[r0,#4]
;;;2092   SET_REG(LPC_PINCON->PINSEL1,1,(23-16)*2,2);
0014de  6841              LDR      r1,[r0,#4]
0014e0  f4214140          BIC      r1,r1,#0xc000
0014e4  f4414180          ORR      r1,r1,#0x4000
0014e8  6041              STR      r1,[r0,#4]
;;;2093   
;;;2094   
;;;2095   SET_REG(LPC_PINCON->PINMODE1,2,(25-16)*2,2);
0014ea  6c41              LDR      r1,[r0,#0x44]
0014ec  f4212140          BIC      r1,r1,#0xc0000
0014f0  f4412100          ORR      r1,r1,#0x80000
0014f4  6441              STR      r1,[r0,#0x44]
;;;2096   SET_REG(LPC_PINCON->PINMODE1,2,(24-16)*2,2);
0014f6  6c41              LDR      r1,[r0,#0x44]
0014f8  f4213140          BIC      r1,r1,#0x30000
0014fc  f4413100          ORR      r1,r1,#0x20000
001500  6441              STR      r1,[r0,#0x44]
;;;2097   SET_REG(LPC_PINCON->PINMODE1,2,(23-16)*2,2);
001502  6c41              LDR      r1,[r0,#0x44]
001504  f4214140          BIC      r1,r1,#0xc000
001508  f4414100          ORR      r1,r1,#0x8000
00150c  6441              STR      r1,[r0,#0x44]
;;;2098   
;;;2099   SET_REG(LPC_ADC->ADCR,0,24,3);
00150e  4892              LDR      r0,|L1.5976|
001510  6801              LDR      r1,[r0,#0]
001512  f02161e0          BIC      r1,r1,#0x7000000
001516  6001              STR      r1,[r0,#0]
;;;2100   
;;;2101   SET_REG(LPC_ADC->ADCR,1,21,1);
001518  6801              LDR      r1,[r0,#0]
00151a  f4411100          ORR      r1,r1,#0x200000
00151e  6001              STR      r1,[r0,#0]
;;;2102   SET_REG(LPC_ADC->ADCR,0,16,1);
001520  6801              LDR      r1,[r0,#0]
001522  f4213180          BIC      r1,r1,#0x10000
001526  6001              STR      r1,[r0,#0]
;;;2103   SET_REG(LPC_ADC->ADCR,1,8,8);
001528  6801              LDR      r1,[r0,#0]
00152a  f421417f          BIC      r1,r1,#0xff00
00152e  f4417180          ORR      r1,r1,#0x100
001532  6001              STR      r1,[r0,#0]
;;;2104   
;;;2105   //SET_REG(LPC_GPIO0->FIODIR,7,5,3);
;;;2106   //SET_REG(LPC_GPIO0->FIOPIN,4,5,3);
;;;2107   	
;;;2108   	/*if(adc_ch<=7)*///SET_REG(LPC_ADC->ADCR,1<<5,0,8);
;;;2109        /*else if(adc_ch==8) SET_REG(LPC_ADC->ADCR,1<<2,0,8);
;;;2110        else SET_REG(LPC_ADC->ADCR,1<<4,0,8);*/
;;;2111   
;;;2112   LPC_ADC->ADINTEN     =  (1<< 8);      /* global enable interrupt            */
001534  f44f7180          MOV      r1,#0x100
001538  60c1              STR      r1,[r0,#0xc]
00153a  4888              LDR      r0,|L1.5980|
00153c  f44f0180          MOV      r1,#0x400000
001540  6001              STR      r1,[r0,#0]
;;;2113   
;;;2114   NVIC_EnableIRQ(ADC_IRQn);             /* enable ADC Interrupt               */
;;;2115   
;;;2116   
;;;2117   }
001542  4770              BX       lr
;;;2118   
                          ENDP

                  adc_drv7 PROC
;;;2119   //-----------------------------------------------
;;;2120   void adc_drv7(void) //(U - )
001544  e92d41f0          PUSH     {r4-r8,lr}
;;;2121   {
;;;2122   //int temp_S;
;;;2123   //char i;
;;;2124   //signed short temp_SS;
;;;2125   
;;;2126   adc_self_ch_disp[0]=abs_pal(adc_self_ch_buff[1]-adc_self_ch_buff[0]);//adc_self_ch_buff[0]&0x0f80;
001548  4c85              LDR      r4,|L1.5984|
00154a  8860              LDRH     r0,[r4,#2]  ; adc_self_ch_buff
00154c  8821              LDRH     r1,[r4,#0]  ; adc_self_ch_buff
00154e  1a40              SUBS     r0,r0,r1
001550  b200              SXTH     r0,r0
001552  f7fffffe          BL       abs_pal
001556  1da6              ADDS     r6,r4,#6
001558  8030              STRH     r0,[r6,#0]
;;;2127   adc_self_ch_disp[1]=abs_pal(adc_self_ch_buff[2]-adc_self_ch_buff[1]);//adc_self_ch_buff[1]&0x0f80;
00155a  88a0              LDRH     r0,[r4,#4]  ; adc_self_ch_buff
00155c  8861              LDRH     r1,[r4,#2]  ; adc_self_ch_buff
00155e  1a40              SUBS     r0,r0,r1
001560  b200              SXTH     r0,r0
001562  f7fffffe          BL       abs_pal
001566  8070              STRH     r0,[r6,#2]
;;;2128   adc_self_ch_disp[2]=abs_pal(adc_self_ch_buff[2]-adc_self_ch_buff[0]);//adc_self_ch_buff[2]&0x0f80;
001568  88a0              LDRH     r0,[r4,#4]  ; adc_self_ch_buff
00156a  8821              LDRH     r1,[r4,#0]  ; adc_self_ch_buff
00156c  1a40              SUBS     r0,r0,r1
00156e  b200              SXTH     r0,r0
001570  f7fffffe          BL       abs_pal
001574  80b0              STRH     r0,[r6,#4]
;;;2129   
;;;2130   //adc_self_ch_disp[0]=adc_self_ch_buff[0]&0x0ff0;
;;;2131   //adc_self_ch_disp[1]=adc_self_ch_buff[1]&0x0ff0;
;;;2132   //adc_self_ch_disp[2]=adc_self_ch_buff[2]&0x0ff0;
;;;2133   
;;;2134   
;;;2135   if(adc_self_ch_disp[2]<300)//==adc_self_ch_disp[2])
001576  f44f7196          MOV      r1,#0x12c
;;;2136   	{
;;;2137   	adc_result=adc_self_ch_buff[2];
00157a  f1a4058e          SUB      r5,r4,#0x8e
00157e  4288              CMP      r0,r1                 ;2135
001580  da02              BGE      |L1.5512|
001582  88a0              LDRH     r0,[r4,#4]  ; adc_self_ch_buff
001584  8528              STRH     r0,[r5,#0x28]
001586  e00c              B        |L1.5538|
                  |L1.5512|
;;;2138   	} 
;;;2139   else if(adc_self_ch_disp[1]<300)//==adc_self_ch_disp[2])
001588  f9b60002          LDRSH    r0,[r6,#2]  ; adc_self_ch_disp
00158c  4288              CMP      r0,r1
00158e  da02              BGE      |L1.5526|
;;;2140   	{
;;;2141   	adc_result=adc_self_ch_buff[1];
001590  8860              LDRH     r0,[r4,#2]  ; adc_self_ch_buff
001592  8528              STRH     r0,[r5,#0x28]
001594  e005              B        |L1.5538|
                  |L1.5526|
;;;2142   	}
;;;2143   else if(adc_self_ch_disp[0]<300)//==adc_self_ch_disp[1])
001596  f9b60000          LDRSH    r0,[r6,#0]  ; adc_self_ch_disp
00159a  4288              CMP      r0,r1
00159c  da01              BGE      |L1.5538|
;;;2144   	{
;;;2145   	adc_result=adc_self_ch_buff[0];
00159e  8820              LDRH     r0,[r4,#0]  ; adc_self_ch_buff
0015a0  8528              STRH     r0,[r5,#0x28]
                  |L1.5538|
;;;2146   	}
;;;2147       //adc_result=92;
;;;2148   
;;;2149   if(adc_ch_net)
0015a2  78af              LDRB     r7,[r5,#2]  ; adc_ch_net
0015a4  2600              MOVS     r6,#0
0015a6  b32f              CBZ      r7,|L1.5620|
;;;2150   	{
;;;2151   
;;;2152   	main_power_buffer[0]+=(long)(adc_result);
0015a8  486e              LDR      r0,|L1.5988|
0015aa  f9b51028          LDRSH    r1,[r5,#0x28]  ; adc_result
0015ae  6802              LDR      r2,[r0,#0]  ; main_power_buffer
0015b0  440a              ADD      r2,r2,r1
0015b2  6002              STR      r2,[r0,#0]  ; main_power_buffer
;;;2153   	main_power_buffer[1]+=(long)(adc_result);
0015b4  6842              LDR      r2,[r0,#4]  ; main_power_buffer
0015b6  440a              ADD      r2,r2,r1
0015b8  6042              STR      r2,[r0,#4]  ; main_power_buffer
;;;2154   	main_power_buffer[2]+=(long)(adc_result);
0015ba  6882              LDR      r2,[r0,#8]  ; main_power_buffer
0015bc  440a              ADD      r2,r2,r1
0015be  6082              STR      r2,[r0,#8]  ; main_power_buffer
;;;2155   	main_power_buffer[3]+=(long)(adc_result);
0015c0  68c2              LDR      r2,[r0,#0xc]  ; main_power_buffer
0015c2  4411              ADD      r1,r1,r2
0015c4  60c1              STR      r1,[r0,#0xc]  ; main_power_buffer
;;;2156   
;;;2157   	adc_net_buff_cnt++;
0015c6  8e29              LDRH     r1,[r5,#0x30]  ; adc_net_buff_cnt
0015c8  f1010101          ADD      r1,r1,#1
0015cc  b209              SXTH     r1,r1
0015ce  8629              STRH     r1,[r5,#0x30]
;;;2158   	if(adc_net_buff_cnt>=0x1000)
0015d0  f5b15f80          CMP      r1,#0x1000
0015d4  db00              BLT      |L1.5592|
;;;2159   		{
;;;2160   		adc_net_buff_cnt=0;
0015d6  862e              STRH     r6,[r5,#0x30]
                  |L1.5592|
;;;2161   		}
;;;2162   	if((adc_net_buff_cnt&0x03ff)==0)
0015d8  f9b51030          LDRSH    r1,[r5,#0x30]  ; adc_net_buff_cnt
0015dc  058a              LSLS     r2,r1,#22
0015de  d131              BNE      |L1.5700|
;;;2163   		{
;;;2164   		#ifdef UKU_220
;;;2165   		net_buff_=(short)((main_power_buffer[adc_net_buff_cnt>>10])>>11);
;;;2166   		#else
;;;2167   		#ifdef UKU_220_V2
;;;2168   		net_buff_=(short)((main_power_buffer[adc_net_buff_cnt>>10])>>11);
;;;2169   		#else
;;;2170   		net_buff_=(short)((main_power_buffer[adc_net_buff_cnt>>10])>>8);
0015e0  ea4f21a1          ASR      r1,r1,#10
0015e4  f8502021          LDR      r2,[r0,r1,LSL #2]
0015e8  ea4f2222          ASR      r2,r2,#8
0015ec  84ea              STRH     r2,[r5,#0x26]
;;;2171   		#endif
;;;2172   		#endif
;;;2173   		main_power_buffer[adc_net_buff_cnt>>10]=0;
0015ee  f8406021          STR      r6,[r0,r1,LSL #2]
0015f2  e027              B        |L1.5700|
                  |L1.5620|
;;;2174   		}
;;;2175   
;;;2176   
;;;2177   	} 
;;;2178   else if(!adc_ch_net)
;;;2179   	{
;;;2180   	adc_buff[adc_ch][adc_ch_cnt]=(long)adc_result;
0015f4  485c              LDR      r0,|L1.5992|
0015f6  78ec              LDRB     r4,[r5,#3]  ; adc_ch
0015f8  792a              LDRB     r2,[r5,#4]  ; adc_ch_cnt
0015fa  eb001384          ADD      r3,r0,r4,LSL #6
0015fe  f9b51028          LDRSH    r1,[r5,#0x28]  ; adc_result
001602  f8431022          STR      r1,[r3,r2,LSL #2]
;;;2181   	
;;;2182   	if((adc_ch_cnt&0x03)==0)
001606  0790              LSLS     r0,r2,#30
001608  d10f              BNE      |L1.5674|
;;;2183   		{
;;;2184   		long temp_L;
;;;2185   		char i;
;;;2186   		temp_L=0;
00160a  4601              MOV      r1,r0
                  |L1.5644|
;;;2187   		for(i=0;i<16;i++)
;;;2188   			{
;;;2189   			temp_L+=adc_buff[adc_ch][i];
00160c  f853c020          LDR      r12,[r3,r0,LSL #2]
001610  4461              ADD      r1,r1,r12
001612  f1000001          ADD      r0,r0,#1              ;2187
001616  b2c0              UXTB     r0,r0                 ;2187
001618  2810              CMP      r0,#0x10              ;2187
00161a  d3f7              BCC      |L1.5644|
;;;2190   			}
;;;2191   		adc_buff_[adc_ch]= (short)(temp_L>>4);
00161c  ea4f1021          ASR      r0,r1,#4
001620  4950              LDR      r1,|L1.5988|
001622  f1a10120          SUB      r1,r1,#0x20
001626  f8210014          STRH     r0,[r1,r4,LSL #1]
                  |L1.5674|
;;;2192   
;;;2193   		//adc_buff_[3]=346;
;;;2194   		}
;;;2195   	if(++adc_ch>=16) 
00162a  1c64              ADDS     r4,r4,#1
00162c  b2e0              UXTB     r0,r4
00162e  70e8              STRB     r0,[r5,#3]
001630  2810              CMP      r0,#0x10
001632  d307              BCC      |L1.5700|
;;;2196   		{
;;;2197   		adc_ch=0;
001634  70ee              STRB     r6,[r5,#3]
;;;2198   		adc_ch_cnt++;
001636  f1020201          ADD      r2,r2,#1
00163a  b2d0              UXTB     r0,r2
00163c  7128              STRB     r0,[r5,#4]
;;;2199   		if(adc_ch_cnt>=16)adc_ch_cnt=0;
00163e  2810              CMP      r0,#0x10
001640  d300              BCC      |L1.5700|
001642  712e              STRB     r6,[r5,#4]
                  |L1.5700|
;;;2200   		}
;;;2201   	}
;;;2202   
;;;2203   //adc_buff[adc_ch][adc_cnt1]=(adc_self_ch_buff[2]+adc_self_ch_buff[1])/2;
;;;2204   
;;;2205   //if(adc_buff[adc_ch][adc_cnt1]<adc_buff_min[adc_ch])adc_buff_min[adc_ch]=adc_buff[adc_ch][adc_cnt1];
;;;2206   //if(adc_buff[adc_ch][adc_cnt1]>adc_buff_max[adc_ch])adc_buff_max[adc_ch]=adc_buff[adc_ch][adc_cnt1];
;;;2207   /*
;;;2208   	{
;;;2209   	if((adc_cnt1&0x03)==0)
;;;2210   		{
;;;2211   		temp_S=0;
;;;2212   		for(i=0;i<16;i++)
;;;2213   			{
;;;2214   			temp_S+=adc_buff[adc_ch][i];
;;;2215   			} 
;;;2216            	adc_buff_[adc_ch]=temp_S>>4;
;;;2217             }
;;;2218   	}*/
;;;2219   
;;;2220   
;;;2221   		  
;;;2222   
;;;2223   adc_self_ch_cnt=0;
001644  706e              STRB     r6,[r5,#1]
;;;2224   
;;;2225   adc_ch_net++;
001646  f1070701          ADD      r7,r7,#1
;;;2226   adc_ch_net&=1;
00164a  f0070001          AND      r0,r7,#1
00164e  70a8              STRB     r0,[r5,#2]
;;;2227   
;;;2228   //SET_REG(LPC_GPIO0->FIODIR,7,5,3);
;;;2229   //SET_REG(LPC_GPIO0->FIOPIN,adc_ch,5,3);
;;;2230   
;;;2231   if(adc_ch_net)
;;;2232   	{
;;;2233   	//LPC_GPIO2->FIODIR|=(1<<7);
;;;2234   	//LPC_GPIO2->FIOPIN|=(1<<7);
;;;2235   	SET_REG(LPC_ADC->ADCR,1<<2,0,8);
001650  4a41              LDR      r2,|L1.5976|
001652  b130              CBZ      r0,|L1.5730|
001654  6810              LDR      r0,[r2,#0]
001656  f02000ff          BIC      r0,r0,#0xff
00165a  f1000004          ADD      r0,r0,#4
00165e  6010              STR      r0,[r2,#0]
001660  e03d              B        |L1.5854|
                  |L1.5730|
;;;2236   	}
;;;2237   else
;;;2238   	{
;;;2239   	//LPC_GPIO2->FIODIR|=(1<<7);
;;;2240   	//LPC_GPIO2->FIOPIN&=~(1<<7);
;;;2241   	if(!(adc_ch&(1<<3)))SET_REG(LPC_ADC->ADCR,1<<0,0,8);
001662  78e9              LDRB     r1,[r5,#3]  ; adc_ch
001664  0708              LSLS     r0,r1,#28
001666  d406              BMI      |L1.5750|
001668  6810              LDR      r0,[r2,#0]
00166a  f02000ff          BIC      r0,r0,#0xff
00166e  f1000001          ADD      r0,r0,#1
001672  6010              STR      r0,[r2,#0]
001674  e005              B        |L1.5762|
                  |L1.5750|
;;;2242   	else 			SET_REG(LPC_ADC->ADCR,1<<1,0,8);
001676  6810              LDR      r0,[r2,#0]
001678  f02000ff          BIC      r0,r0,#0xff
00167c  f1000002          ADD      r0,r0,#2
001680  6010              STR      r0,[r2,#0]
                  |L1.5762|
;;;2243   
;;;2244   
;;;2245   	SET_REG(LPC_GPIO0->FIODIR,1,28,1);
001682  483a              LDR      r0,|L1.5996|
001684  6803              LDR      r3,[r0,#0]
001686  f0435380          ORR      r3,r3,#0x10000000
00168a  6003              STR      r3,[r0,#0]
;;;2246   	SET_REG(LPC_GPIO1->FIODIR,1,30,1);
00168c  6a03              LDR      r3,[r0,#0x20]
00168e  f0434380          ORR      r3,r3,#0x40000000
001692  6203              STR      r3,[r0,#0x20]
;;;2247   	SET_REG(LPC_GPIO3->FIODIR,1,26,1);
001694  6e03              LDR      r3,[r0,#0x60]
001696  f0436380          ORR      r3,r3,#0x4000000
00169a  6603              STR      r3,[r0,#0x60]
;;;2248   
;;;2249   	if(!(adc_ch&(1<<0)))SET_REG(LPC_GPIO0->FIOPIN,0,28,1);
00169c  07cb              LSLS     r3,r1,#31
00169e  d00a              BEQ      |L1.5814|
;;;2250   	else 			SET_REG(LPC_GPIO0->FIOPIN,1,28,1);
0016a0  6943              LDR      r3,[r0,#0x14]
0016a2  f0435380          ORR      r3,r3,#0x10000000
0016a6  6143              STR      r3,[r0,#0x14]
                  |L1.5800|
;;;2251   
;;;2252   	if(!(adc_ch&(1<<1)))SET_REG(LPC_GPIO1->FIOPIN,0,30,1);
0016a8  078b              LSLS     r3,r1,#30
0016aa  d409              BMI      |L1.5824|
0016ac  6b43              LDR      r3,[r0,#0x34]
0016ae  f0234380          BIC      r3,r3,#0x40000000
0016b2  6343              STR      r3,[r0,#0x34]
0016b4  e008              B        |L1.5832|
                  |L1.5814|
0016b6  6943              LDR      r3,[r0,#0x14]         ;2249
0016b8  f0235380          BIC      r3,r3,#0x10000000     ;2249
0016bc  6143              STR      r3,[r0,#0x14]         ;2249
0016be  e7f3              B        |L1.5800|
                  |L1.5824|
;;;2253   	else 			SET_REG(LPC_GPIO1->FIOPIN,1,30,1);
0016c0  6b43              LDR      r3,[r0,#0x34]
0016c2  f0434380          ORR      r3,r3,#0x40000000
0016c6  6343              STR      r3,[r0,#0x34]
                  |L1.5832|
;;;2254   
;;;2255   	if(!(adc_ch&(1<<2)))SET_REG(LPC_GPIO3->FIOPIN,0,26,1);
0016c8  0749              LSLS     r1,r1,#29
0016ca  d404              BMI      |L1.5846|
0016cc  6f41              LDR      r1,[r0,#0x74]
0016ce  f0216180          BIC      r1,r1,#0x4000000
0016d2  6741              STR      r1,[r0,#0x74]
0016d4  e003              B        |L1.5854|
                  |L1.5846|
;;;2256   	else 			SET_REG(LPC_GPIO3->FIOPIN,1,26,1);
0016d6  6f41              LDR      r1,[r0,#0x74]
0016d8  f0416180          ORR      r1,r1,#0x4000000
0016dc  6741              STR      r1,[r0,#0x74]
                  |L1.5854|
;;;2257   	}
;;;2258   	
;;;2259   
;;;2260   
;;;2261   
;;;2262   LPC_ADC->ADCR |=  (1<<24);
0016de  6810              LDR      r0,[r2,#0]
0016e0  f0407080          ORR      r0,r0,#0x1000000
0016e4  6010              STR      r0,[r2,#0]
                  |L1.5862|
;;;2263   
;;;2264   }
0016e6  e8bd81f0          POP      {r4-r8,pc}
;;;2265   
                          ENDP

                  avg_hndl PROC
;;;2522   //-----------------------------------------------
;;;2523   void avg_hndl(void)
0016ea  b5f0              PUSH     {r4-r7,lr}
;;;2524   { 
;;;2525   char i;
;;;2526   
;;;2527   #define AVGCNTMAX	5
;;;2528   if(avg_main_cnt)
0016ec  4c1c              LDR      r4,|L1.5984|
0016ee  3c8e              SUBS     r4,r4,#0x8e
0016f0  f9b4001e          LDRSH    r0,[r4,#0x1e]  ; avg_main_cnt
0016f4  b118              CBZ      r0,|L1.5886|
;;;2529   	{
;;;2530   	avg_main_cnt--;
0016f6  f1a00001          SUB      r0,r0,#1
0016fa  83e0              STRH     r0,[r4,#0x1e]
;;;2531   	goto avg_hndl_end;
0016fc  e0b1              B        |L1.6242|
                  |L1.5886|
;;;2532   	}                 
;;;2533   
;;;2534   avg_num=0;
0016fe  f04f0500          MOV      r5,#0
001702  72e5              STRB     r5,[r4,#0xb]
;;;2535   
;;;2536   for(i=0;i<NUMIST;i++)
001704  4628              MOV      r0,r5
001706  491b              LDR      r1,|L1.6004|
;;;2537   	{
;;;2538   	if((bps[i]._state==bsWRK)&&(bps[i]._cnt<20))avg_num++;
001708  4b19              LDR      r3,|L1.6000|
00170a  f9b12000          LDRSH    r2,[r1,#0]            ;2536
00170e  e036              B        |L1.6014|
                  |L1.5904|
001710  ebc001c0          RSB      r1,r0,r0,LSL #3
001714  eb010141          ADD      r1,r1,r1,LSL #1
001718  eb030181          ADD      r1,r3,r1,LSL #2
00171c  788e              LDRB     r6,[r1,#2]
00171e  2e01              CMP      r6,#1
001720  d106              BNE      |L1.5936|
001722  78c9              LDRB     r1,[r1,#3]
001724  2914              CMP      r1,#0x14
001726  d203              BCS      |L1.5936|
001728  7ae1              LDRB     r1,[r4,#0xb]  ; avg_num
00172a  f1010101          ADD      r1,r1,#1
00172e  72e1              STRB     r1,[r4,#0xb]
                  |L1.5936|
001730  e022              B        |L1.6008|
001732  0000              DCW      0x0000
                  |L1.5940|
                          DCD      load_I
                  |L1.5944|
                          DCD      Isumm
                  |L1.5948|
                          DCD      NUMINV
                  |L1.5952|
                          DCD      inv
                  |L1.5956|
                          DCD      a_ind
                  |L1.5960|
                          DCD      mnemo_cnt
                  |L1.5964|
                          DCD      MNEMO_ON
                  |L1.5968|
                          DCD      MNEMO_TIME
                  |L1.5972|
                          DCD      0x4002c000
                  |L1.5976|
                          DCD      0x40034000
                  |L1.5980|
                          DCD      0xe000e100
                  |L1.5984|
                          DCD      ||area_number.21||+0x8e
                  |L1.5988|
                          DCD      ||.bss||+0x420
                  |L1.5992|
                          DCD      ||.bss||
                  |L1.5996|
                          DCD      0x2009c000
                  |L1.6000|
                          DCD      bps
                  |L1.6004|
                          DCD      NUMIST
                  |L1.6008|
001778  f1000001          ADD      r0,r0,#1              ;2536
00177c  b2c0              UXTB     r0,r0                 ;2536
                  |L1.6014|
00177e  4290              CMP      r0,r2                 ;2536
001780  dbc6              BLT      |L1.5904|
;;;2539   	}
;;;2540   
;;;2541   /*if((K[NUMI]>=1)&&(bps_state[0]==ssWRK))	avg_num++;
;;;2542   if((K[NUMI]>=2)&&(bps_state[1]==ssWRK))	avg_num++;
;;;2543   if((K[NUMI]>=3)&&(bps_state[2]==ssWRK))	avg_num++;*/
;;;2544   
;;;2545   	
;;;2546   if(avg_num<2)
001782  7ae6              LDRB     r6,[r4,#0xb]  ; avg_num
001784  2e02              CMP      r6,#2
001786  d36c              BCC      |L1.6242|
;;;2547   	{
;;;2548   	goto avg_hndl_end;
;;;2549   	}
;;;2550   	
;;;2551   else
;;;2552   	{
;;;2553   	i_avg_min=5000;
001788  f2413088          MOV      r0,#0x1388
00178c  66e0              STR      r0,[r4,#0x6c]  ; i_avg_min
;;;2554   	i_avg_max=0;
00178e  66a5              STR      r5,[r4,#0x68]  ; i_avg_max
;;;2555   	i_avg_summ=0;
001790  6725              STR      r5,[r4,#0x70]  ; i_avg_summ
;;;2556   	for(i=0;i<NUMIST;i++)
001792  f04f0100          MOV      r1,#0
001796  e017              B        |L1.6088|
                  |L1.6040|
;;;2557   		{
;;;2558   		if(bps[i]._state==bsWRK)
001798  ebc100c1          RSB      r0,r1,r1,LSL #3
00179c  eb000040          ADD      r0,r0,r0,LSL #1
0017a0  eb030080          ADD      r0,r3,r0,LSL #2
0017a4  7887              LDRB     r7,[r0,#2]
0017a6  2f01              CMP      r7,#1
0017a8  d10b              BNE      |L1.6082|
;;;2559   			{
;;;2560   			if(bps[i]._Ii>i_avg_max)i_avg_max=bps[i]._Ii;
0017aa  6a40              LDR      r0,[r0,#0x24]
0017ac  6ea7              LDR      r7,[r4,#0x68]  ; i_avg_max
0017ae  42b8              CMP      r0,r7
0017b0  dd00              BLE      |L1.6068|
0017b2  66a0              STR      r0,[r4,#0x68]  ; i_avg_max
                  |L1.6068|
;;;2561   			if(bps[i]._Ii<i_avg_min)i_avg_min=bps[i]._Ii;
0017b4  6ee7              LDR      r7,[r4,#0x6c]  ; i_avg_min
0017b6  42b8              CMP      r0,r7
0017b8  da00              BGE      |L1.6076|
0017ba  66e0              STR      r0,[r4,#0x6c]  ; i_avg_min
                  |L1.6076|
;;;2562   			
;;;2563   			i_avg_summ+=bps[i]._Ii;
0017bc  6f27              LDR      r7,[r4,#0x70]  ; i_avg_summ
0017be  4438              ADD      r0,r0,r7
0017c0  6720              STR      r0,[r4,#0x70]  ; i_avg_summ
                  |L1.6082|
0017c2  f1010101          ADD      r1,r1,#1              ;2556
0017c6  b2c9              UXTB     r1,r1                 ;2556
                  |L1.6088|
0017c8  4291              CMP      r1,r2                 ;2556
0017ca  dbe5              BLT      |L1.6040|
;;;2564   			}
;;;2565   		}
;;;2566   	i_avg=i_avg_summ/avg_num;	
0017cc  6f20              LDR      r0,[r4,#0x70]  ; i_avg_summ
0017ce  fb90f6f6          SDIV     r6,r0,r6
0017d2  6766              STR      r6,[r4,#0x74]  ; i_avg
;;;2567   	
;;;2568   	if(i_avg_min==0)i_avg_min=1;
0017d4  6ee0              LDR      r0,[r4,#0x6c]  ; i_avg_min
0017d6  2101              MOVS     r1,#1                 ;2538
0017d8  b900              CBNZ     r0,|L1.6108|
0017da  66e1              STR      r1,[r4,#0x6c]  ; i_avg_min
                  |L1.6108|
;;;2569   
;;;2570   	avg=i_avg_max;
0017dc  6ea0              LDR      r0,[r4,#0x68]  ; i_avg_max
;;;2571   	avg*=100;
0017de  f04f0764          MOV      r7,#0x64
0017e2  fb00f007          MUL      r0,r0,r7
;;;2572   	avg/=i_avg_min;
0017e6  6ee7              LDR      r7,[r4,#0x6c]  ; i_avg_min
0017e8  fb90f0f7          SDIV     r0,r0,r7
0017ec  67a0              STR      r0,[r4,#0x78]  ; avg
;;;2573   
;;;2574   	if(avg>160) bAVG=1;
0017ee  28a0              CMP      r0,#0xa0
0017f0  dd00              BLE      |L1.6132|
0017f2  72a1              STRB     r1,[r4,#0xa]
                  |L1.6132|
;;;2575   	if(avg<120) bAVG=0;
0017f4  2878              CMP      r0,#0x78
0017f6  da00              BGE      |L1.6138|
0017f8  72a5              STRB     r5,[r4,#0xa]
                  |L1.6138|
;;;2576   
;;;2577   	if(bAVG==1)
0017fa  7aa0              LDRB     r0,[r4,#0xa]  ; bAVG
0017fc  2801              CMP      r0,#1
0017fe  d130              BNE      |L1.6242|
;;;2578   		{
;;;2579   		for(i=0;i<NUMIST;i++)
001800  f04f0100          MOV      r1,#0
;;;2580   			{
;;;2581   			if(bps[i]._state==bsWRK)
;;;2582   				{
;;;2583   				if(bps[i]._Ii>i_avg)bps[i]._x_--;
;;;2584   				if(bps[i]._Ii<i_avg)bps[i]._x_++;
;;;2585   			
;;;2586   				if(bps[i]._x_<-50)bps[i]._x_=-50;
001804  f06f0431          MVN      r4,#0x31
001808  e029              B        |L1.6238|
                  |L1.6154|
00180a  ebc100c1          RSB      r0,r1,r1,LSL #3       ;2581
00180e  eb000040          ADD      r0,r0,r0,LSL #1       ;2581
001812  eb030080          ADD      r0,r3,r0,LSL #2       ;2581
001816  7885              LDRB     r5,[r0,#2]            ;2581
001818  2d01              CMP      r5,#1                 ;2581
00181a  d11d              BNE      |L1.6232|
00181c  6a45              LDR      r5,[r0,#0x24]         ;2583
00181e  42b5              CMP      r5,r6                 ;2583
001820  dd05              BLE      |L1.6190|
001822  f8b05050          LDRH     r5,[r0,#0x50]         ;2583
001826  f1a50501          SUB      r5,r5,#1              ;2583
00182a  f8a05050          STRH     r5,[r0,#0x50]         ;2583
                  |L1.6190|
00182e  da05              BGE      |L1.6204|
001830  f8b05050          LDRH     r5,[r0,#0x50]         ;2584
001834  f1050501          ADD      r5,r5,#1              ;2584
001838  f8a05050          STRH     r5,[r0,#0x50]         ;2584
                  |L1.6204|
00183c  f9b05050          LDRSH    r5,[r0,#0x50]
001840  42a5              CMP      r5,r4
001842  da01              BGE      |L1.6216|
001844  f8a04050          STRH     r4,[r0,#0x50]
                  |L1.6216|
;;;2587   				if(bps[i]._x_>50)bps[i]._x_=50;	
001848  f9b05050          LDRSH    r5,[r0,#0x50]
00184c  2d32              CMP      r5,#0x32
00184e  dd03              BLE      |L1.6232|
001850  f04f0532          MOV      r5,#0x32
001854  f8a05050          STRH     r5,[r0,#0x50]
                  |L1.6232|
001858  f1010101          ADD      r1,r1,#1              ;2579
00185c  b2c9              UXTB     r1,r1                 ;2579
                  |L1.6238|
00185e  4291              CMP      r1,r2                 ;2579
001860  dbd3              BLT      |L1.6154|
                  |L1.6242|
;;;2588   				}
;;;2589   			}		
;;;2590   		}			
;;;2591   	}   	 
;;;2592   
;;;2593   
;;;2594   avg_hndl_end:
;;;2595   __nop();  
001862  bf00              NOP      
;;;2596   }
001864  bdf0              POP      {r4-r7,pc}
;;;2597   
                          ENDP

                  rele_hndl PROC
;;;2610   //*************-----------------------------------------------
;;;2611   void rele_hndl(void)
001866  e92d41f0          PUSH     {r4-r8,lr}
;;;2612   {
;;;2613   //static char cnt_rel_sam;
;;;2614   //char temp;
;;;2615   
;;;2616   //temp=0;
;;;2617   
;;;2618   
;;;2619   SET_REG(LPC_PINCON->PINSEL0,0,4*2,6*2);
00186a  48ff              LDR      r0,|L1.7272|
00186c  6801              LDR      r1,[r0,#0]
00186e  4aff              LDR      r2,|L1.7276|
001870  ea010102          AND      r1,r1,r2
001874  6001              STR      r1,[r0,#0]
;;;2620   SET_REG(LPC_GPIO0->FIODIR,63,4,6);
001876  4cfe              LDR      r4,|L1.7280|
001878  6821              LDR      r1,[r4,#0]
00187a  f441717c          ORR      r1,r1,#0x3f0
00187e  6021              STR      r1,[r4,#0]
;;;2621   SET_REG(LPC_PINCON->PINSEL7,0,(25-16)*2,2);
001880  69c1              LDR      r1,[r0,#0x1c]
001882  f4212140          BIC      r1,r1,#0xc0000
001886  61c1              STR      r1,[r0,#0x1c]
;;;2622   SET_REG(LPC_GPIO3->FIODIR,1,25,1);
001888  6e21              LDR      r1,[r4,#0x60]
00188a  f0417100          ORR      r1,r1,#0x2000000
00188e  6621              STR      r1,[r4,#0x60]
;;;2623   SET_REG(LPC_PINCON->PINSEL1,0,(29-16)*2,2);
001890  6841              LDR      r1,[r0,#4]
001892  f0216140          BIC      r1,r1,#0xc000000
001896  6041              STR      r1,[r0,#4]
;;;2624   SET_REG(LPC_GPIO0->FIODIR,1,29,1);
001898  6820              LDR      r0,[r4,#0]
00189a  f0405000          ORR      r0,r0,#0x20000000
00189e  6020              STR      r0,[r4,#0]
;;;2625   
;;;2626   
;;;2627   
;;;2628   
;;;2629   
;;;2630   
;;;2631   if((((bat[0]._rel_stat)  || (tbatdisable_stat!=tbdsON))&&(tbatdisable_cmnd))	&& (main_1Hz_cnt>5))
0018a0  48f5              LDR      r0,|L1.7288|
0018a2  4df4              LDR      r5,|L1.7284|
0018a4  49f6              LDR      r1,|L1.7296|
0018a6  7802              LDRB     r2,[r0,#0]  ; tbatdisable_stat
0018a8  48f4              LDR      r0,|L1.7292|
0018aa  f895303c          LDRB     r3,[r5,#0x3c]  ; bat
0018ae  f9b11000          LDRSH    r1,[r1,#0]
0018b2  7800              LDRB     r0,[r0,#0]
0018b4  4313              ORRS     r3,r3,r2
0018b6  d007              BEQ      |L1.6344|
0018b8  b130              CBZ      r0,|L1.6344|
0018ba  2905              CMP      r1,#5
0018bc  dd04              BLE      |L1.6344|
;;;2632   	{
;;;2633   	SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_BAT1,1);
0018be  69a3              LDR      r3,[r4,#0x18]
0018c0  f4437380          ORR      r3,r3,#0x100
0018c4  61a3              STR      r3,[r4,#0x18]
0018c6  e003              B        |L1.6352|
                  |L1.6344|
;;;2634   	}
;;;2635   else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_BAT1,1);	  	
0018c8  69e3              LDR      r3,[r4,#0x1c]
0018ca  f4437380          ORR      r3,r3,#0x100
0018ce  61e3              STR      r3,[r4,#0x1c]
                  |L1.6352|
;;;2636   
;;;2637   if((((bat[1]._rel_stat) || (tbatdisable_stat!=tbdsON))&&(tbatdisable_cmnd))	&& (main_1Hz_cnt>5))
0018d0  f8953088          LDRB     r3,[r5,#0x88]  ; bat
0018d4  4313              ORRS     r3,r3,r2
0018d6  d007              BEQ      |L1.6376|
0018d8  b130              CBZ      r0,|L1.6376|
0018da  2905              CMP      r1,#5
0018dc  dd04              BLE      |L1.6376|
;;;2638   	{
;;;2639   	SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_BAT2,1);
0018de  69a0              LDR      r0,[r4,#0x18]
0018e0  f0400040          ORR      r0,r0,#0x40
0018e4  61a0              STR      r0,[r4,#0x18]
0018e6  e003              B        |L1.6384|
                  |L1.6376|
;;;2640   	}
;;;2641   else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_BAT2,1);
0018e8  69e0              LDR      r0,[r4,#0x1c]
0018ea  f0400040          ORR      r0,r0,#0x40
0018ee  61e0              STR      r0,[r4,#0x1c]
                  |L1.6384|
;;;2642   
;;;2643   
;;;2644   if(mess_find_unvol((MESS2RELE_HNDL))&&(mess_data[0]==PARAM_RELE_SAMOKALIBR)) 
0018f0  20d2              MOVS     r0,#0xd2
0018f2  f7fffffe          BL       mess_find_unvol
0018f6  4de3              LDR      r5,|L1.7300|
0018f8  b110              CBZ      r0,|L1.6400|
0018fa  6828              LDR      r0,[r5,#0]  ; mess_data
0018fc  2864              CMP      r0,#0x64
0018fe  d048              BEQ      |L1.6546|
                  |L1.6400|
;;;2645   	{
;;;2646   	if(mess_data[1]==1)SET_REG(LPC_GPIO0->FIOSET,1,29,1);
;;;2647   	else if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,29,1);
;;;2648   	}
;;;2649   else SET_REG(LPC_GPIO0->FIOCLR,1,29,1);
001900  69e0              LDR      r0,[r4,#0x1c]
001902  f0405000          ORR      r0,r0,#0x20000000
001906  61e0              STR      r0,[r4,#0x1c]
                  |L1.6408|
;;;2650   
;;;2651   
;;;2652   #ifndef UKU2071x
;;;2653   //  
;;;2654   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_NET))
;;;2655   	{
;;;2656   	if(mess_data[1]==0) 			SET_REG(LPC_GPIO3->FIOSET,1,SHIFT_REL_AV_NET,1);
;;;2657   	else 						SET_REG(LPC_GPIO3->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;2658   	}
;;;2659   else	if(!(avar_ind_stat&0x00000001)) 	SET_REG(LPC_GPIO3->FIOSET,1,SHIFT_REL_AV_NET,1);
;;;2660   else 							SET_REG(LPC_GPIO3->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;2661   #endif
;;;2662   #ifdef UKU2071x
;;;2663   //  
;;;2664   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_NET))
001908  20d2              MOVS     r0,#0xd2
00190a  f7fffffe          BL       mess_find_unvol
;;;2665   	{
;;;2666   	if(mess_data[1]==0)				SET_REG(LPC_GPIO3->FIOCLR,1,SHIFT_REL_AV_NET,1); 
;;;2667   	else 						SET_REG(LPC_GPIO3->FIOSET,1,SHIFT_REL_AV_NET,1);
;;;2668   	}
;;;2669   else	if(!(avar_ind_stat&0x00000001))	SET_REG(LPC_GPIO3->FIOCLR,1,SHIFT_REL_AV_NET,1);
00190e  4ede              LDR      r6,|L1.7304|
001910  b110              CBZ      r0,|L1.6424|
001912  6828              LDR      r0,[r5,#0]            ;2664  ; mess_data
001914  2866              CMP      r0,#0x66              ;2664
001916  d04b              BEQ      |L1.6576|
                  |L1.6424|
001918  6830              LDR      r0,[r6,#0]  ; avar_ind_stat
00191a  07c0              LSLS     r0,r0,#31
00191c  d054              BEQ      |L1.6600|
;;;2670   else 					  		SET_REG(LPC_GPIO3->FIOSET,1,SHIFT_REL_AV_NET,1);
00191e  6fa0              LDR      r0,[r4,#0x78]
001920  f0407000          ORR      r0,r0,#0x2000000
001924  67a0              STR      r0,[r4,#0x78]
                  |L1.6438|
;;;2671   #endif
;;;2672   
;;;2673   #ifdef UKU_3U
;;;2674   //  
;;;2675   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BAT1))
;;;2676   	{
;;;2677   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT1,1);
;;;2678   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT1,1);
;;;2679        }
;;;2680   else 
;;;2681   	{
;;;2682   	if(!(avar_ind_stat&0x00000002)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT1,1);
;;;2683        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT1,1);
;;;2684   	} 
;;;2685   
;;;2686   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BAT2))
;;;2687   	{
;;;2688   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT2,1);
;;;2689   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT2,1);
;;;2690        }
;;;2691   else 
;;;2692   	{
;;;2693   	if(!(avar_ind_stat&0x00000004)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT2,1);
;;;2694        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT2,1);
;;;2695   	} 
;;;2696   
;;;2697   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BPS))
;;;2698   	{
;;;2699   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
;;;2700   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
;;;2701        }
;;;2702   else 
;;;2703   	{
;;;2704   	if(!(avar_ind_stat&0x000007f8)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
;;;2705        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
;;;2706   	} 
;;;2707   
;;;2708   #endif
;;;2709   
;;;2710   
;;;2711   #ifdef UKU_GLONASS
;;;2712   //  
;;;2713   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BAT1))
;;;2714   	{
;;;2715   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT1,1);
;;;2716   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT1,1);
;;;2717        }
;;;2718   else 
;;;2719   	{
;;;2720   	if(!(avar_ind_stat&0x00000002)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT1,1);
;;;2721        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT1,1);
;;;2722   	} 
;;;2723   
;;;2724   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BAT2))
;;;2725   	{
;;;2726   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT2,1);
;;;2727   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT2,1);
;;;2728        }
;;;2729   else 
;;;2730   	{
;;;2731   	if(!(avar_ind_stat&0x00000004)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT2,1);
;;;2732        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT2,1);
;;;2733   	} 
;;;2734   
;;;2735   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BPS))
;;;2736   	{
;;;2737   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
;;;2738   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
;;;2739        }
;;;2740   else 
;;;2741   	{
;;;2742   	if(!(avar_ind_stat&0x000007f8)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
;;;2743        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
;;;2744   	} 
;;;2745   
;;;2746   #endif
;;;2747   
;;;2748   #ifdef U /*
;;;2749   
;;;2750   
;;;2751   
;;;2752   /*
;;;2753   //  
;;;2754   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BAT))
;;;2755   	{
;;;2756   	if(mess_data[1]==0) temp&=~(1<<SHIFT_REL_AV_BAT);
;;;2757   	else if(mess_data[1]==1) temp|=(1<<SHIFT_REL_AV_BAT);
;;;2758        }
;;;2759   else 
;;;2760   	{
;;;2761   	if(!(avar_ind_stat&0x00000006)) temp&=~(1<<SHIFT_REL_AV_BAT);
;;;2762        else temp|=(1<<SHIFT_REL_AV_BAT);
;;;2763   	} 
;;;2764   */
;;;2765   
;;;2766   #endif
;;;2767   
;;;2768   #ifdef UKU_RSTKM
;;;2769   
;;;2770   //  
;;;2771   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_COMM))
;;;2772   	{
;;;2773   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_COMM,1);
;;;2774   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_COMM,1);
;;;2775   	}
;;;2776   else 
;;;2777   	{
;;;2778        if(  (!(avar_ind_stat&0x00007fff))/* &&
;;;2779             ((!SK_REL_EN[0]) || (sk_av_stat[0]!=sasON))  &&
;;;2780             ((!SK_REL_EN[1]) || (sk_av_stat[1]!=sasON))  &&
;;;2781             ((!SK_REL_EN[2]) || (sk_av_stat[2]!=sasON))  &&
;;;2782             ((!SK_REL_EN[3]) || (sk_av_stat[3]!=sasON))*/  )SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_COMM,1);
;;;2783        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_COMM,1);
;;;2784   	}
;;;2785   	
;;;2786   
;;;2787   // 
;;;2788   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_LIGHT))
;;;2789   	{
;;;2790   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LIGHT,1);
;;;2791   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LIGHT,1);
;;;2792        }
;;;2793   else 
;;;2794   	{
;;;2795   	if(sk_av_stat[0]!=sasON) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LIGHT,1);
;;;2796        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LIGHT,1);
;;;2797   	}
;;;2798   
;;;2799   
;;;2800   //  
;;;2801   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_LOAD_OFF))
;;;2802   	{
;;;2803   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LOAD_OFF,1);
;;;2804   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LOAD_OFF,1);
;;;2805        }
;;;2806   else if(tloaddisable_cmnd==0)
;;;2807   	{
;;;2808   	SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LOAD_OFF,1);
;;;2809   	}
;;;2810   else if((tloaddisable_cmnd)&&(tloaddisable_cmnd<=11))
;;;2811   	{
;;;2812   	SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LOAD_OFF,1);
;;;2813   	}
;;;2814   
;;;2815   else 
;;;2816   	{
;;;2817   	if(!(tloaddisable_stat==tldsON)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LOAD_OFF,1);
;;;2818        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LOAD_OFF,1);
;;;2819   	} 
;;;2820   
;;;2821   //  
;;;2822   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_VENT))
;;;2823   	{
;;;2824   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;2825   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT,1);
;;;2826   	}
;;;2827   else 
;;;2828   	{
;;;2829   	if(mixer_vent_stat==mvsOFF) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;2830        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT,1);
;;;2831   	} 
;;;2832   
;;;2833   #endif
;;;2834   
;;;2835   #ifdef UKU_KONTUR
;;;2836   
;;;2837   //  
;;;2838   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_COMM))
;;;2839   	{
;;;2840   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_COMM,1);
;;;2841   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_COMM,1);
;;;2842   	}
;;;2843   else 
;;;2844   	{
;;;2845        if(  (!(avar_ind_stat&0x00007fff)) &&
;;;2846             ((!SK_REL_EN[0]) || (sk_av_stat[0]!=sasON))  &&
;;;2847             ((!SK_REL_EN[1]) || (sk_av_stat[1]!=sasON))  &&
;;;2848             ((!SK_REL_EN[2]) || (sk_av_stat[2]!=sasON))  /*&&
;;;2849             ((!SK_REL_EN[3]) || (sk_av_stat[3]!=sasON))*/  )SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_COMM,1);
;;;2850        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_COMM,1);
;;;2851   	}
;;;2852   
;;;2853   	
;;;2854   //rel_warm_plazma=0;
;;;2855   //    
;;;2856   /*
;;;2857   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_WARM))
;;;2858   	{
;;;2859   	if(mess_data[1]==0)
;;;2860   		{
;;;2861   		SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_WARM,1);
;;;2862   		rel_warm_plazma=1;
;;;2863   		}
;;;2864   	else if(mess_data[1]==1) 
;;;2865   		{
;;;2866   		SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_WARM,1);
;;;2867   		rel_warm_plazma=2;
;;;2868   		}
;;;2869        }
;;;2870   else 
;;;2871   	{
;;;2872   	if(warm_stat_k==wsOFF) 
;;;2873   		{
;;;2874   		SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_WARM,1);
;;;2875   		rel_warm_plazma=3;
;;;2876   		}
;;;2877        else 
;;;2878   		{
;;;2879   		SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_WARM,1);
;;;2880   		rel_warm_plazma=4;
;;;2881   		}
;;;2882   	}
;;;2883   */
;;;2884   // 
;;;2885   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_LIGHT))
;;;2886   	{
;;;2887   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LIGHT,1);
;;;2888   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LIGHT,1);
;;;2889        }
;;;2890   else 
;;;2891   	{
;;;2892   	if(sk_av_stat[0]!=sasON) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LIGHT,1);
;;;2893        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LIGHT,1);
;;;2894   	}
;;;2895   
;;;2896   
;;;2897   
;;;2898   //  
;;;2899   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_LOAD_OFF))
;;;2900   	{
;;;2901   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LOAD_OFF,1);
;;;2902   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LOAD_OFF,1);
;;;2903        }
;;;2904   else if(tloaddisable_cmnd==0)
;;;2905   	{
;;;2906   	SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LOAD_OFF,1);
;;;2907   	}
;;;2908   else if((tloaddisable_cmnd)&&(tloaddisable_cmnd<=11))
;;;2909   	{
;;;2910   	SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LOAD_OFF,1);
;;;2911   	}
;;;2912   
;;;2913   else 
;;;2914   	{
;;;2915   	if(!(tloaddisable_stat==tldsON)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LOAD_OFF,1);
;;;2916        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LOAD_OFF,1);
;;;2917   	} 
;;;2918   
;;;2919   //    
;;;2920   if(RELE_LOG)
;;;2921   	{
;;;2922   	if((mess_find_unvol(MESS2RELE_HNDL))&&(mess_data[0]==PARAM_RELE_VENT_WARM))
;;;2923   		{
;;;2924   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT_WARM,1);
;;;2925   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT_WARM,1);
;;;2926   		}
;;;2927   	else 
;;;2928   		{
;;;2929   		if(warm_stat_k==wsOFF) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT_WARM,1);
;;;2930   	     else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT_WARM,1);
;;;2931   		} 
;;;2932   
;;;2933   	}
;;;2934   else 
;;;2935   	{
;;;2936   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_VENT_WARM))
;;;2937   		{
;;;2938   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT_WARM,1);
;;;2939   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT_WARM,1);
;;;2940   		}
;;;2941   	else 
;;;2942   		{
;;;2943   		if(vent_stat_k==vsOFF) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT_WARM,1);
;;;2944   	     else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT_WARM,1);
;;;2945   		} 
;;;2946   	}
;;;2947   #endif
;;;2948   
;;;2949   #ifdef UKU_6U
;;;2950   //  
;;;2951   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BAT1))
;;;2952   	{
;;;2953   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT1,1);
;;;2954   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT1,1);
;;;2955        }
;;;2956   else 
;;;2957   	{
;;;2958   	if(!(avar_ind_stat&0x00000002)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT1,1);
;;;2959        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT1,1);
;;;2960   	} 
;;;2961   
;;;2962   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BAT2))
;;;2963   	{
;;;2964   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT2,1);
;;;2965   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT2,1);
;;;2966       }
;;;2967   else if(NPN_OUT==npnoRELEAVBAT2)
;;;2968   	{
;;;2969   	if(npn_stat==npnsOFF)//&&(mess_find_unvol(MESS2RELE_HNDL))&&(mess_data[0]==PARAM_RELE_NPN))
;;;2970   		{
;;;2971   		/*if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT2,1);
;;;2972   		else if(mess_data[1]==1)*/ SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT2,1);
;;;2973        	}
;;;2974   	else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT2,1);
;;;2975   	}
;;;2976   else 
;;;2977   	{
;;;2978   	if(!(avar_ind_stat&0x00000004)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT2,1);
;;;2979       else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT2,1);
;;;2980   	} 
;;;2981   
;;;2982   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BPS))
;;;2983   	{
;;;2984   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
;;;2985   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
;;;2986        }
;;;2987   else 
;;;2988   	{
;;;2989   	if(!(avar_ind_stat&0x000007f8)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
;;;2990        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
;;;2991   	} 
;;;2992   
;;;2993   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_VENT))
;;;2994   	{
;;;2995   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT,1);
;;;2996   	else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;2997   	}
;;;2998   else if((NPN_OUT==npnoRELEVENT))
;;;2999   	{
;;;3000   	if(npn_stat==npnsOFF)//&&(mess_find_unvol(MESS2RELE_HNDL))&&(mess_data[0]==PARAM_RELE_NPN))
;;;3001   		{
;;;3002   		/*if(mess_data[1]==0)*/ SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;3003   		//else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;3004       	}
;;;3005   	else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT,1);
;;;3006   	}
;;;3007   else 
;;;3008   	{
;;;3009   	if(!vent_stat) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT,1);
;;;3010   	else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;3011   	}
;;;3012   
;;;3013   #endif
;;;3014   
;;;3015   #ifdef UKU_220
;;;3016   //  
;;;3017   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BAT))
;;;3018   	{
;;;3019   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT,1);
;;;3020   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT,1);
;;;3021        }
;;;3022   else 
;;;3023   	{
;;;3024   	if(!(avar_ind_stat&0x00000002)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT,1);
;;;3025        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT,1);
;;;3026   	} 
;;;3027   
;;;3028   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BPS))
;;;3029   	{
;;;3030   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
;;;3031   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
;;;3032        }
;;;3033   else 
;;;3034   	{
;;;3035   	if(!(avar_ind_stat&0x000007f8)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
;;;3036        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
;;;3037   	} 
;;;3038   
;;;3039   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_VENT))
;;;3040   	{
;;;3041   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT,1);
;;;3042   	else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;3043   	}
;;;3044   else 
;;;3045   	{
;;;3046   	if((RELE_VENT_LOGIC==0)||(RELE_VENT_LOGIC==1))
;;;3047   		{
;;;3048   		if(vent_stat) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT,1);
;;;3049   		else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;3050   		}
;;;3051   	else 
;;;3052   		{
;;;3053   		if((avar_ind_stat&0x00000004)) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT,1);
;;;3054        	else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;3055   		}
;;;3056   	}
;;;3057   
;;;3058   #endif
;;;3059   
;;;3060   #ifdef UKU_220_V2
;;;3061   //  
;;;3062   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BAT))
;;;3063   	{
;;;3064   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT,1);
;;;3065   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT,1);
;;;3066        }
;;;3067   else 
;;;3068   	{
;;;3069   	if(!(avar_ind_stat&0x00000002)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT,1);
;;;3070        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT,1);
;;;3071   	} 
;;;3072   
;;;3073   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BPS))
;;;3074   	{
;;;3075   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
;;;3076   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
;;;3077        }
;;;3078   else 
;;;3079   	{
;;;3080   	if(!(avar_ind_stat&0x000007f8)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
;;;3081        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
;;;3082   	} 
;;;3083   
;;;3084   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_VENT))
;;;3085   	{
;;;3086   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT,1);
;;;3087   	else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;3088   	}
;;;3089   else 
;;;3090   	{
;;;3091   	if((RELE_VENT_LOGIC==0)||(RELE_VENT_LOGIC==1))
;;;3092   		{
;;;3093   		if(vent_stat) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT,1);
;;;3094   		else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;3095   		}
;;;3096   	else 
;;;3097   		{
;;;3098   		if((avar_ind_stat&0x00000004)) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT,1);
;;;3099        	else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;3100   		}
;;;3101   	}
;;;3102   
;;;3103   #endif
;;;3104   
;;;3105   #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;3106   
;;;3107   if((AUSW_MAIN==22010)||(AUSW_MAIN==22011))
001926  48d9              LDR      r0,|L1.7308|
;;;3108   	{
;;;3109   	#ifndef UKU2071x
;;;3110   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_NET))
;;;3111   		{
;;;3112   		if(mess_data[1]==0) SET_REG(LPC_GPIO3->FIOSET,1,25,1);
;;;3113   		else SET_REG(LPC_GPIO3->FIOCLR,1,25,1);
;;;3114   		}
;;;3115   	else	if(!(avar_ind_stat&0x00000001)) SET_REG(LPC_GPIO3->FIOSET,1,25,1);
;;;3116   	else SET_REG(LPC_GPIO3->FIOCLR,1,25,1);
;;;3117   	#endif
;;;3118   	#ifdef UKU2071x
;;;3119   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_NET))
;;;3120   		{
;;;3121   		if(mess_data[1]==0) SET_REG(LPC_GPIO3->FIOCLR,1,25,1);
;;;3122   		else SET_REG(LPC_GPIO3->FIOSET,1,25,1);
;;;3123   		}
;;;3124   	else	if(!(avar_ind_stat&0x00000001)) SET_REG(LPC_GPIO3->FIOCLR,1,25,1);
;;;3125   	else SET_REG(LPC_GPIO3->FIOSET,1,25,1);
;;;3126   	#endif
;;;3127   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BPS))
;;;3128   		{
;;;3129   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,7,1);
;;;3130   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,7,1);
;;;3131   	     }
;;;3132   	else 
;;;3133   		{
;;;3134   		if(!(avar_ind_stat&0x100007f8)) SET_REG(LPC_GPIO0->FIOCLR,1,7,1);
;;;3135   	     else SET_REG(LPC_GPIO0->FIOSET,1,7,1);
;;;3136   		} 
;;;3137   
;;;3138   	//  
;;;3139   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BAT))
;;;3140   		{
;;;3141   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,4,1);
;;;3142   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,4,1);
;;;3143        	}
;;;3144   	else 
;;;3145   		{
;;;3146   		if(!(ips_bat_av_stat)) SET_REG(LPC_GPIO0->FIOCLR,1,4,1);
001928  f8df8364          LDR      r8,|L1.7312|
00192c  4fd9              LDR      r7,|L1.7316|
00192e  8800              LDRH     r0,[r0,#0]            ;3107  ; AUSW_MAIN
001930  f5a041aa          SUB      r1,r0,#0x5500         ;3107
001934  39fa              SUBS     r1,r1,#0xfa           ;3107
001936  d001              BEQ      |L1.6460|
001938  1e49              SUBS     r1,r1,#1              ;3107
00193a  d16f              BNE      |L1.6684|
                  |L1.6460|
00193c  20d2              MOVS     r0,#0xd2              ;3119
00193e  f7fffffe          BL       mess_find_unvol
001942  b110              CBZ      r0,|L1.6474|
001944  6828              LDR      r0,[r5,#0]            ;3119  ; mess_data
001946  2866              CMP      r0,#0x66              ;3119
001948  d043              BEQ      |L1.6610|
                  |L1.6474|
00194a  6830              LDR      r0,[r6,#0]            ;3124  ; avar_ind_stat
00194c  07c0              LSLS     r0,r0,#31             ;3124
00194e  d04d              BEQ      |L1.6636|
001950  6fa0              LDR      r0,[r4,#0x78]         ;3125
001952  f0407000          ORR      r0,r0,#0x2000000      ;3125
001956  67a0              STR      r0,[r4,#0x78]         ;3125
                  |L1.6488|
001958  20d2              MOVS     r0,#0xd2              ;3127
00195a  f7fffffe          BL       mess_find_unvol
00195e  b110              CBZ      r0,|L1.6502|
001960  6828              LDR      r0,[r5,#0]            ;3127  ; mess_data
001962  286a              CMP      r0,#0x6a              ;3127
001964  d047              BEQ      |L1.6646|
                  |L1.6502|
001966  6830              LDR      r0,[r6,#0]            ;3134  ; avar_ind_stat
001968  4238              TST      r0,r7                 ;3134
00196a  d052              BEQ      |L1.6674|
00196c  69a0              LDR      r0,[r4,#0x18]         ;3135
00196e  f0400080          ORR      r0,r0,#0x80           ;3135
001972  61a0              STR      r0,[r4,#0x18]         ;3135
                  |L1.6516|
001974  20d2              MOVS     r0,#0xd2              ;3139
001976  f7fffffe          BL       mess_find_unvol
00197a  b110              CBZ      r0,|L1.6530|
00197c  6828              LDR      r0,[r5,#0]            ;3139  ; mess_data
00197e  2867              CMP      r0,#0x67              ;3139
001980  d04d              BEQ      |L1.6686|
                  |L1.6530|
001982  f8980000          LDRB     r0,[r8,#0]  ; ips_bat_av_stat
001986  b380              CBZ      r0,|L1.6634|
;;;3147        	else SET_REG(LPC_GPIO0->FIOSET,1,4,1);
001988  69a0              LDR      r0,[r4,#0x18]
00198a  f0400010          ORR      r0,r0,#0x10
00198e  61a0              STR      r0,[r4,#0x18]
001990  e1e8              B        |L1.7524|
                  |L1.6546|
001992  6868              LDR      r0,[r5,#4]            ;2646  ; mess_data
001994  2801              CMP      r0,#1                 ;2646
001996  d006              BEQ      |L1.6566|
001998  2800              CMP      r0,#0                 ;2647
00199a  d1b5              BNE      |L1.6408|
00199c  69e0              LDR      r0,[r4,#0x1c]         ;2647
00199e  f0405000          ORR      r0,r0,#0x20000000     ;2647
0019a2  61e0              STR      r0,[r4,#0x1c]         ;2647
0019a4  e7b0              B        |L1.6408|
                  |L1.6566|
0019a6  69a0              LDR      r0,[r4,#0x18]         ;2646
0019a8  f0405000          ORR      r0,r0,#0x20000000     ;2646
0019ac  61a0              STR      r0,[r4,#0x18]         ;2646
0019ae  e7ab              B        |L1.6408|
                  |L1.6576|
0019b0  6868              LDR      r0,[r5,#4]            ;2666  ; mess_data
0019b2  b120              CBZ      r0,|L1.6590|
0019b4  6fa0              LDR      r0,[r4,#0x78]         ;2667
0019b6  f0407000          ORR      r0,r0,#0x2000000      ;2667
0019ba  67a0              STR      r0,[r4,#0x78]         ;2667
0019bc  e7b3              B        |L1.6438|
                  |L1.6590|
0019be  6fe0              LDR      r0,[r4,#0x7c]         ;2666
0019c0  f0407000          ORR      r0,r0,#0x2000000      ;2666
0019c4  67e0              STR      r0,[r4,#0x7c]         ;2666
0019c6  e7ae              B        |L1.6438|
                  |L1.6600|
0019c8  6fe0              LDR      r0,[r4,#0x7c]         ;2669
0019ca  f0407000          ORR      r0,r0,#0x2000000      ;2669
0019ce  67e0              STR      r0,[r4,#0x7c]         ;2669
0019d0  e7a9              B        |L1.6438|
                  |L1.6610|
0019d2  6868              LDR      r0,[r5,#4]            ;3121  ; mess_data
0019d4  b120              CBZ      r0,|L1.6624|
0019d6  6fa0              LDR      r0,[r4,#0x78]         ;3122
0019d8  f0407000          ORR      r0,r0,#0x2000000      ;3122
0019dc  67a0              STR      r0,[r4,#0x78]         ;3122
0019de  e7bb              B        |L1.6488|
                  |L1.6624|
0019e0  6fe0              LDR      r0,[r4,#0x7c]         ;3121
0019e2  f0407000          ORR      r0,r0,#0x2000000      ;3121
0019e6  67e0              STR      r0,[r4,#0x7c]         ;3121
0019e8  e7b6              B        |L1.6488|
                  |L1.6634|
0019ea  e027              B        |L1.6716|
                  |L1.6636|
0019ec  6fe0              LDR      r0,[r4,#0x7c]         ;3124
0019ee  f0407000          ORR      r0,r0,#0x2000000      ;3124
0019f2  67e0              STR      r0,[r4,#0x7c]         ;3124
0019f4  e7b0              B        |L1.6488|
                  |L1.6646|
0019f6  6868              LDR      r0,[r5,#4]            ;3129  ; mess_data
0019f8  b130              CBZ      r0,|L1.6664|
0019fa  2801              CMP      r0,#1                 ;3130
0019fc  d1ba              BNE      |L1.6516|
0019fe  69a0              LDR      r0,[r4,#0x18]         ;3130
001a00  f0400080          ORR      r0,r0,#0x80           ;3130
001a04  61a0              STR      r0,[r4,#0x18]         ;3130
001a06  e7b5              B        |L1.6516|
                  |L1.6664|
001a08  69e0              LDR      r0,[r4,#0x1c]         ;3129
001a0a  f0400080          ORR      r0,r0,#0x80           ;3129
001a0e  61e0              STR      r0,[r4,#0x1c]         ;3129
001a10  e7b0              B        |L1.6516|
                  |L1.6674|
001a12  69e0              LDR      r0,[r4,#0x1c]         ;3134
001a14  f0400080          ORR      r0,r0,#0x80           ;3134
001a18  61e0              STR      r0,[r4,#0x1c]         ;3134
001a1a  e7ab              B        |L1.6516|
                  |L1.6684|
001a1c  e013              B        |L1.6726|
                  |L1.6686|
001a1e  6868              LDR      r0,[r5,#4]            ;3141  ; mess_data
001a20  b110              CBZ      r0,|L1.6696|
001a22  2801              CMP      r0,#1                 ;3142
001a24  d005              BEQ      |L1.6706|
001a26  e19d              B        |L1.7524|
                  |L1.6696|
001a28  69e0              LDR      r0,[r4,#0x1c]         ;3141
001a2a  f0400010          ORR      r0,r0,#0x10           ;3141
001a2e  61e0              STR      r0,[r4,#0x1c]         ;3141
001a30  e198              B        |L1.7524|
                  |L1.6706|
001a32  69a0              LDR      r0,[r4,#0x18]         ;3142
001a34  f0400010          ORR      r0,r0,#0x10           ;3142
001a38  61a0              STR      r0,[r4,#0x18]         ;3142
001a3a  e193              B        |L1.7524|
                  |L1.6716|
001a3c  69e0              LDR      r0,[r4,#0x1c]         ;3146
001a3e  f0400010          ORR      r0,r0,#0x10           ;3146
001a42  61e0              STR      r0,[r4,#0x1c]         ;3146
001a44  e18e              B        |L1.7524|
                  |L1.6726|
;;;3148   		}
;;;3149   	}
;;;3150   
;;;3151   else	if(AUSW_MAIN==22023)
001a46  f5a041ac          SUB      r1,r0,#0x5600
001a4a  3907              SUBS     r1,#7
001a4c  d162              BNE      |L1.6932|
;;;3152   	{
;;;3153   
;;;3154   	//  
;;;3155   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BAT))
001a4e  20d2              MOVS     r0,#0xd2
001a50  f7fffffe          BL       mess_find_unvol
001a54  b110              CBZ      r0,|L1.6748|
001a56  6828              LDR      r0,[r5,#0]  ; mess_data
001a58  2867              CMP      r0,#0x67
001a5a  d023              BEQ      |L1.6820|
                  |L1.6748|
;;;3156   		{
;;;3157   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,4,1);
;;;3158   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,4,1);
;;;3159        	}
;;;3160   	else 
;;;3161   		{
;;;3162   		if(!(ips_bat_av_stat)) SET_REG(LPC_GPIO0->FIOCLR,1,4,1);
001a5c  f8980000          LDRB     r0,[r8,#0]  ; ips_bat_av_stat
001a60  b370              CBZ      r0,|L1.6848|
;;;3163        	else SET_REG(LPC_GPIO0->FIOSET,1,4,1);
001a62  69a0              LDR      r0,[r4,#0x18]
001a64  f0400010          ORR      r0,r0,#0x10
001a68  61a0              STR      r0,[r4,#0x18]
                  |L1.6762|
;;;3164   		} 
;;;3165   
;;;3166   
;;;3167   	//         .    
;;;3168   	#ifndef UKU2071x
;;;3169   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_NET))
;;;3170   		{
;;;3171   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;3172   		else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_NET,1);
;;;3173   		}
;;;3174   	else	if(!(avar_ind_stat&0x00000001)) SET_REG(LPC_GPIO1->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;3175   	else SET_REG(LPC_GPIO3->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;3176   	#endif
;;;3177   	#ifdef UKU2071x
;;;3178   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_NET))
001a6a  20d2              MOVS     r0,#0xd2
001a6c  f7fffffe          BL       mess_find_unvol
001a70  b110              CBZ      r0,|L1.6776|
001a72  6828              LDR      r0,[r5,#0]  ; mess_data
001a74  2866              CMP      r0,#0x66
001a76  d028              BEQ      |L1.6858|
                  |L1.6776|
;;;3179   		{
;;;3180   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_NET,1);
;;;3181   		else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;3182   		}
;;;3183   	else	if(!(avar_ind_stat&0x00000001)) SET_REG(LPC_GPIO1->FIOSET,1,SHIFT_REL_AV_NET,1);
001a78  6830              LDR      r0,[r6,#0]  ; avar_ind_stat
001a7a  07c0              LSLS     r0,r0,#31
001a7c  d031              BEQ      |L1.6882|
;;;3184   	else SET_REG(LPC_GPIO3->FIOSET,1,SHIFT_REL_AV_NET,1);
001a7e  6fa0              LDR      r0,[r4,#0x78]
001a80  f0407000          ORR      r0,r0,#0x2000000
001a84  67a0              STR      r0,[r4,#0x78]
                  |L1.6790|
;;;3185   	#endif
;;;3186   
;;;3187   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BPS))
001a86  20d2              MOVS     r0,#0xd2
001a88  f7fffffe          BL       mess_find_unvol
001a8c  b110              CBZ      r0,|L1.6804|
001a8e  6828              LDR      r0,[r5,#0]  ; mess_data
001a90  286a              CMP      r0,#0x6a
001a92  d02b              BEQ      |L1.6892|
                  |L1.6804|
;;;3188   		{
;;;3189   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,7,1);
;;;3190   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,7,1);
;;;3191   	     }
;;;3192   	else 
;;;3193   		{
;;;3194   		if(!(avar_ind_stat&0x100007f8)) SET_REG(LPC_GPIO0->FIOCLR,1,7,1);
001a94  6830              LDR      r0,[r6,#0]  ; avar_ind_stat
001a96  4238              TST      r0,r7
001a98  d037              BEQ      |L1.6922|
;;;3195   	     else SET_REG(LPC_GPIO0->FIOSET,1,7,1);
001a9a  69a0              LDR      r0,[r4,#0x18]
001a9c  f0400080          ORR      r0,r0,#0x80
001aa0  61a0              STR      r0,[r4,#0x18]
001aa2  e15f              B        |L1.7524|
                  |L1.6820|
001aa4  6868              LDR      r0,[r5,#4]            ;3157  ; mess_data
001aa6  b130              CBZ      r0,|L1.6838|
001aa8  2801              CMP      r0,#1                 ;3158
001aaa  d1de              BNE      |L1.6762|
001aac  69a0              LDR      r0,[r4,#0x18]         ;3158
001aae  f0400010          ORR      r0,r0,#0x10           ;3158
001ab2  61a0              STR      r0,[r4,#0x18]         ;3158
001ab4  e7d9              B        |L1.6762|
                  |L1.6838|
001ab6  69e0              LDR      r0,[r4,#0x1c]         ;3157
001ab8  f0400010          ORR      r0,r0,#0x10           ;3157
001abc  61e0              STR      r0,[r4,#0x1c]         ;3157
001abe  e7d4              B        |L1.6762|
                  |L1.6848|
001ac0  69e0              LDR      r0,[r4,#0x1c]         ;3162
001ac2  f0400010          ORR      r0,r0,#0x10           ;3162
001ac6  61e0              STR      r0,[r4,#0x1c]         ;3162
001ac8  e7cf              B        |L1.6762|
                  |L1.6858|
001aca  6868              LDR      r0,[r5,#4]            ;3180  ; mess_data
001acc  b120              CBZ      r0,|L1.6872|
001ace  69e0              LDR      r0,[r4,#0x1c]         ;3181
001ad0  f0407000          ORR      r0,r0,#0x2000000      ;3181
001ad4  61e0              STR      r0,[r4,#0x1c]         ;3181
001ad6  e7d6              B        |L1.6790|
                  |L1.6872|
001ad8  69a0              LDR      r0,[r4,#0x18]         ;3180
001ada  f0407000          ORR      r0,r0,#0x2000000      ;3180
001ade  61a0              STR      r0,[r4,#0x18]         ;3180
001ae0  e7d1              B        |L1.6790|
                  |L1.6882|
001ae2  6ba0              LDR      r0,[r4,#0x38]         ;3183
001ae4  f0407000          ORR      r0,r0,#0x2000000      ;3183
001ae8  63a0              STR      r0,[r4,#0x38]         ;3183
001aea  e7cc              B        |L1.6790|
                  |L1.6892|
001aec  6868              LDR      r0,[r5,#4]            ;3189  ; mess_data
001aee  b110              CBZ      r0,|L1.6902|
001af0  2801              CMP      r0,#1                 ;3190
001af2  d005              BEQ      |L1.6912|
001af4  e136              B        |L1.7524|
                  |L1.6902|
001af6  69e0              LDR      r0,[r4,#0x1c]         ;3189
001af8  f0400080          ORR      r0,r0,#0x80           ;3189
001afc  61e0              STR      r0,[r4,#0x1c]         ;3189
001afe  e131              B        |L1.7524|
                  |L1.6912|
001b00  69a0              LDR      r0,[r4,#0x18]         ;3190
001b02  f0400080          ORR      r0,r0,#0x80           ;3190
001b06  61a0              STR      r0,[r4,#0x18]         ;3190
001b08  e12c              B        |L1.7524|
                  |L1.6922|
001b0a  69e0              LDR      r0,[r4,#0x1c]         ;3194
001b0c  f0400080          ORR      r0,r0,#0x80           ;3194
001b10  61e0              STR      r0,[r4,#0x1c]         ;3194
001b12  e127              B        |L1.7524|
                  |L1.6932|
;;;3196   		} 
;;;3197   	}
;;;3198   else	if(AUSW_MAIN==22043)
001b14  f5a041ac          SUB      r1,r0,#0x5600
001b18  391b              SUBS     r1,r1,#0x1b
001b1a  d170              BNE      |L1.7166|
;;;3199   	{
;;;3200   	//  
;;;3201   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BAT))
001b1c  20d2              MOVS     r0,#0xd2
001b1e  f7fffffe          BL       mess_find_unvol
001b22  b110              CBZ      r0,|L1.6954|
001b24  6828              LDR      r0,[r5,#0]  ; mess_data
001b26  2867              CMP      r0,#0x67
001b28  d031              BEQ      |L1.7054|
                  |L1.6954|
;;;3202   		{
;;;3203   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,4,1);
;;;3204   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,4,1);
;;;3205        	}
;;;3206   	else 
;;;3207   		{
;;;3208   		if(!(ips_bat_av_stat)) SET_REG(LPC_GPIO0->FIOCLR,1,4,1);
001b2a  f8980000          LDRB     r0,[r8,#0]  ; ips_bat_av_stat
001b2e  b3b8              CBZ      r0,|L1.7072|
;;;3209        	else SET_REG(LPC_GPIO0->FIOSET,1,4,1);
001b30  69a0              LDR      r0,[r4,#0x18]
001b32  f0400010          ORR      r0,r0,#0x10
001b36  61a0              STR      r0,[r4,#0x18]
                  |L1.6968|
;;;3210   		} 
;;;3211   	//         .    
;;;3212   	#ifndef UKU2071x 
;;;3213   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_NET))
;;;3214   		{
;;;3215   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;3216   		else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_NET,1);
;;;3217   		}
;;;3218   	else	if(!(avar_ind_stat&0x00000001)) SET_REG(LPC_GPIO1->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;3219   	else SET_REG(LPC_GPIO3->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;3220   	#endif
;;;3221   	#ifdef UKU2071x 
;;;3222   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_NET))
001b38  20d2              MOVS     r0,#0xd2
001b3a  f7fffffe          BL       mess_find_unvol
001b3e  b110              CBZ      r0,|L1.6982|
001b40  6828              LDR      r0,[r5,#0]  ; mess_data
001b42  2866              CMP      r0,#0x66
001b44  d037              BEQ      |L1.7094|
                  |L1.6982|
;;;3223   		{
;;;3224   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_NET,1);
;;;3225   		else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;3226   		}
;;;3227   	else	if(!(avar_ind_stat&0x00000001)) SET_REG(LPC_GPIO1->FIOSET,1,SHIFT_REL_AV_NET,1);
001b46  6830              LDR      r0,[r6,#0]  ; avar_ind_stat
001b48  07c0              LSLS     r0,r0,#31
001b4a  d040              BEQ      |L1.7118|
;;;3228   	else SET_REG(LPC_GPIO3->FIOSET,1,SHIFT_REL_AV_NET,1);
001b4c  6fa0              LDR      r0,[r4,#0x78]
001b4e  f0407000          ORR      r0,r0,#0x2000000
001b52  67a0              STR      r0,[r4,#0x78]
                  |L1.6996|
;;;3229   	#endif
;;;3230   
;;;3231   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BPS))
001b54  20d2              MOVS     r0,#0xd2
001b56  f7fffffe          BL       mess_find_unvol
001b5a  b110              CBZ      r0,|L1.7010|
001b5c  6828              LDR      r0,[r5,#0]  ; mess_data
001b5e  286a              CMP      r0,#0x6a
001b60  d03a              BEQ      |L1.7128|
                  |L1.7010|
;;;3232   		{
;;;3233   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,7,1);
;;;3234   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,7,1);
;;;3235   	     }
;;;3236   	else 
;;;3237   		{
;;;3238   		if(!(avar_ind_stat&0x100007f8)) SET_REG(LPC_GPIO0->FIOCLR,1,7,1);
001b62  6830              LDR      r0,[r6,#0]  ; avar_ind_stat
001b64  4238              TST      r0,r7
001b66  d045              BEQ      |L1.7156|
;;;3239   	     else SET_REG(LPC_GPIO0->FIOSET,1,7,1);
001b68  69a0              LDR      r0,[r4,#0x18]
001b6a  f0400080          ORR      r0,r0,#0x80
001b6e  61a0              STR      r0,[r4,#0x18]
                  |L1.7024|
;;;3240   		}
;;;3241   	//  
;;;3242   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BPS))
001b70  20d2              MOVS     r0,#0xd2
001b72  f7fffffe          BL       mess_find_unvol
001b76  b110              CBZ      r0,|L1.7038|
001b78  6828              LDR      r0,[r5,#0]  ; mess_data
001b7a  286a              CMP      r0,#0x6a
001b7c  d040              BEQ      |L1.7168|
                  |L1.7038|
;;;3243   		{
;;;3244   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
;;;3245   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
;;;3246        	}
;;;3247   	else 
;;;3248   		{
;;;3249   		if(!(avar_ind_stat&0x100007f8)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
001b7e  6830              LDR      r0,[r6,#0]  ; avar_ind_stat
001b80  4238              TST      r0,r7
001b82  d04c              BEQ      |L1.7198|
;;;3250        	else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
001b84  69a0              LDR      r0,[r4,#0x18]
001b86  f0400020          ORR      r0,r0,#0x20
001b8a  61a0              STR      r0,[r4,#0x18]
001b8c  e0ea              B        |L1.7524|
                  |L1.7054|
001b8e  6868              LDR      r0,[r5,#4]            ;3203  ; mess_data
001b90  b138              CBZ      r0,|L1.7074|
001b92  2801              CMP      r0,#1                 ;3204
001b94  d1d0              BNE      |L1.6968|
001b96  69a0              LDR      r0,[r4,#0x18]         ;3204
001b98  f0400010          ORR      r0,r0,#0x10           ;3204
001b9c  61a0              STR      r0,[r4,#0x18]         ;3204
001b9e  e7cb              B        |L1.6968|
                  |L1.7072|
001ba0  e004              B        |L1.7084|
                  |L1.7074|
001ba2  69e0              LDR      r0,[r4,#0x1c]         ;3203
001ba4  f0400010          ORR      r0,r0,#0x10           ;3203
001ba8  61e0              STR      r0,[r4,#0x1c]         ;3203
001baa  e7c5              B        |L1.6968|
                  |L1.7084|
001bac  69e0              LDR      r0,[r4,#0x1c]         ;3208
001bae  f0400010          ORR      r0,r0,#0x10           ;3208
001bb2  61e0              STR      r0,[r4,#0x1c]         ;3208
001bb4  e7c0              B        |L1.6968|
                  |L1.7094|
001bb6  6868              LDR      r0,[r5,#4]            ;3224  ; mess_data
001bb8  b120              CBZ      r0,|L1.7108|
001bba  69e0              LDR      r0,[r4,#0x1c]         ;3225
001bbc  f0407000          ORR      r0,r0,#0x2000000      ;3225
001bc0  61e0              STR      r0,[r4,#0x1c]         ;3225
001bc2  e7c7              B        |L1.6996|
                  |L1.7108|
001bc4  69a0              LDR      r0,[r4,#0x18]         ;3224
001bc6  f0407000          ORR      r0,r0,#0x2000000      ;3224
001bca  61a0              STR      r0,[r4,#0x18]         ;3224
001bcc  e7c2              B        |L1.6996|
                  |L1.7118|
001bce  6ba0              LDR      r0,[r4,#0x38]         ;3227
001bd0  f0407000          ORR      r0,r0,#0x2000000      ;3227
001bd4  63a0              STR      r0,[r4,#0x38]         ;3227
001bd6  e7bd              B        |L1.6996|
                  |L1.7128|
001bd8  6868              LDR      r0,[r5,#4]            ;3233  ; mess_data
001bda  b130              CBZ      r0,|L1.7146|
001bdc  2801              CMP      r0,#1                 ;3234
001bde  d1c7              BNE      |L1.7024|
001be0  69a0              LDR      r0,[r4,#0x18]         ;3234
001be2  f0400080          ORR      r0,r0,#0x80           ;3234
001be6  61a0              STR      r0,[r4,#0x18]         ;3234
001be8  e7c2              B        |L1.7024|
                  |L1.7146|
001bea  69e0              LDR      r0,[r4,#0x1c]         ;3233
001bec  f0400080          ORR      r0,r0,#0x80           ;3233
001bf0  61e0              STR      r0,[r4,#0x1c]         ;3233
001bf2  e7bd              B        |L1.7024|
                  |L1.7156|
001bf4  69e0              LDR      r0,[r4,#0x1c]         ;3238
001bf6  f0400080          ORR      r0,r0,#0x80           ;3238
001bfa  61e0              STR      r0,[r4,#0x1c]         ;3238
001bfc  e7b8              B        |L1.7024|
                  |L1.7166|
001bfe  e013              B        |L1.7208|
                  |L1.7168|
001c00  6868              LDR      r0,[r5,#4]            ;3244  ; mess_data
001c02  b110              CBZ      r0,|L1.7178|
001c04  2801              CMP      r0,#1                 ;3245
001c06  d005              BEQ      |L1.7188|
001c08  e0ac              B        |L1.7524|
                  |L1.7178|
001c0a  69e0              LDR      r0,[r4,#0x1c]         ;3244
001c0c  f0400020          ORR      r0,r0,#0x20           ;3244
001c10  61e0              STR      r0,[r4,#0x1c]         ;3244
001c12  e0a7              B        |L1.7524|
                  |L1.7188|
001c14  69a0              LDR      r0,[r4,#0x18]         ;3245
001c16  f0400020          ORR      r0,r0,#0x20           ;3245
001c1a  61a0              STR      r0,[r4,#0x18]         ;3245
001c1c  e0a2              B        |L1.7524|
                  |L1.7198|
001c1e  69e0              LDR      r0,[r4,#0x1c]         ;3249
001c20  f0400020          ORR      r0,r0,#0x20           ;3249
001c24  61e0              STR      r0,[r4,#0x1c]         ;3249
001c26  e09d              B        |L1.7524|
                  |L1.7208|
;;;3251   		} 
;;;3252   	}
;;;3253   else	if(AUSW_MAIN==22033)
001c28  f5a041ac          SUB      r1,r0,#0x5600
001c2c  3911              SUBS     r1,r1,#0x11
001c2e  d17d              BNE      |L1.7468|
;;;3254   	{
;;;3255   	#ifndef UKU2071x 
;;;3256   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_NET))
;;;3257   		{
;;;3258   		if(mess_data[1]==0) SET_REG(LPC_GPIO3->FIOSET,1,25,1);
;;;3259   		else SET_REG(LPC_GPIO3->FIOCLR,1,25,1);
;;;3260   		}
;;;3261   	else	if(!(avar_ind_stat&0x00000001)) SET_REG(LPC_GPIO3->FIOSET,1,25,1);
;;;3262   	else SET_REG(LPC_GPIO3->FIOCLR,1,25,1);
;;;3263   	#endif
;;;3264   	#ifdef UKU2071x 
;;;3265   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_NET))
001c30  20d2              MOVS     r0,#0xd2
001c32  f7fffffe          BL       mess_find_unvol
001c36  b110              CBZ      r0,|L1.7230|
001c38  6828              LDR      r0,[r5,#0]  ; mess_data
001c3a  2866              CMP      r0,#0x66
001c3c  d03c              BEQ      |L1.7352|
                  |L1.7230|
;;;3266   		{
;;;3267   		if(mess_data[1]==0) SET_REG(LPC_GPIO3->FIOCLR,1,25,1);
;;;3268   		else SET_REG(LPC_GPIO3->FIOSET,1,25,1);
;;;3269   		}
;;;3270   	else	if(!(avar_ind_stat&0x00000001)) SET_REG(LPC_GPIO3->FIOCLR,1,25,1);
001c3e  6830              LDR      r0,[r6,#0]  ; avar_ind_stat
001c40  07c0              LSLS     r0,r0,#31
001c42  d045              BEQ      |L1.7376|
;;;3271   	else SET_REG(LPC_GPIO3->FIOSET,1,25,1);
001c44  6fa0              LDR      r0,[r4,#0x78]
001c46  f0407000          ORR      r0,r0,#0x2000000
001c4a  67a0              STR      r0,[r4,#0x78]
                  |L1.7244|
;;;3272   	#endif
;;;3273   	
;;;3274   	
;;;3275   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BPS))
001c4c  20d2              MOVS     r0,#0xd2
001c4e  f7fffffe          BL       mess_find_unvol
001c52  b110              CBZ      r0,|L1.7258|
001c54  6828              LDR      r0,[r5,#0]  ; mess_data
001c56  286a              CMP      r0,#0x6a
001c58  d03f              BEQ      |L1.7386|
                  |L1.7258|
;;;3276   		{
;;;3277   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,7,1);
;;;3278   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,7,1);
;;;3279   	     }
;;;3280   	else 
;;;3281   		{
;;;3282   		if(!(avar_ind_stat&0x100007f8)) SET_REG(LPC_GPIO0->FIOCLR,1,7,1);
001c5a  6830              LDR      r0,[r6,#0]  ; avar_ind_stat
001c5c  4238              TST      r0,r7
001c5e  d04a              BEQ      |L1.7414|
;;;3283   	     else SET_REG(LPC_GPIO0->FIOSET,1,7,1);
001c60  69a0              LDR      r0,[r4,#0x18]
001c62  f0400080          ORR      r0,r0,#0x80
001c66  e017              B        |L1.7320|
                  |L1.7272|
                          DCD      0x4002c000
                  |L1.7276|
                          DCD      0xfff000ff
                  |L1.7280|
                          DCD      0x2009c000
                  |L1.7284|
                          DCD      bat
                  |L1.7288|
                          DCD      tbatdisable_stat
                  |L1.7292|
                          DCD      tbatdisable_cmnd
                  |L1.7296|
                          DCD      main_1Hz_cnt
                  |L1.7300|
                          DCD      mess_data
                  |L1.7304|
                          DCD      avar_ind_stat
                  |L1.7308|
                          DCD      AUSW_MAIN
                  |L1.7312|
                          DCD      ips_bat_av_stat
                  |L1.7316|
                          DCD      0x100007f8
                  |L1.7320|
001c98  61a0              STR      r0,[r4,#0x18]
                  |L1.7322|
;;;3284   		} 
;;;3285   
;;;3286   	//  
;;;3287   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BAT))
001c9a  20d2              MOVS     r0,#0xd2
001c9c  f7fffffe          BL       mess_find_unvol
001ca0  b110              CBZ      r0,|L1.7336|
001ca2  6828              LDR      r0,[r5,#0]  ; mess_data
001ca4  2867              CMP      r0,#0x67
001ca6  d02b              BEQ      |L1.7424|
                  |L1.7336|
;;;3288   		{
;;;3289   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,4,1);
;;;3290   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,4,1);
;;;3291        	}
;;;3292   	else 
;;;3293   		{
;;;3294   		if(!(ips_bat_av_stat)) SET_REG(LPC_GPIO0->FIOCLR,1,4,1);
001ca8  f8980000          LDRB     r0,[r8,#0]  ; ips_bat_av_stat
001cac  b390              CBZ      r0,|L1.7444|
;;;3295        	else SET_REG(LPC_GPIO0->FIOSET,1,4,1);
001cae  69a0              LDR      r0,[r4,#0x18]
001cb0  f0400010          ORR      r0,r0,#0x10
001cb4  61a0              STR      r0,[r4,#0x18]
001cb6  e055              B        |L1.7524|
                  |L1.7352|
001cb8  6868              LDR      r0,[r5,#4]            ;3267  ; mess_data
001cba  b120              CBZ      r0,|L1.7366|
001cbc  6fa0              LDR      r0,[r4,#0x78]         ;3268
001cbe  f0407000          ORR      r0,r0,#0x2000000      ;3268
001cc2  67a0              STR      r0,[r4,#0x78]         ;3268
001cc4  e7c2              B        |L1.7244|
                  |L1.7366|
001cc6  6fe0              LDR      r0,[r4,#0x7c]         ;3267
001cc8  f0407000          ORR      r0,r0,#0x2000000      ;3267
001ccc  67e0              STR      r0,[r4,#0x7c]         ;3267
001cce  e7bd              B        |L1.7244|
                  |L1.7376|
001cd0  6fe0              LDR      r0,[r4,#0x7c]         ;3270
001cd2  f0407000          ORR      r0,r0,#0x2000000      ;3270
001cd6  67e0              STR      r0,[r4,#0x7c]         ;3270
001cd8  e7b8              B        |L1.7244|
                  |L1.7386|
001cda  6868              LDR      r0,[r5,#4]            ;3277  ; mess_data
001cdc  b130              CBZ      r0,|L1.7404|
001cde  2801              CMP      r0,#1                 ;3278
001ce0  d1db              BNE      |L1.7322|
001ce2  69a0              LDR      r0,[r4,#0x18]         ;3278
001ce4  f0400080          ORR      r0,r0,#0x80           ;3278
001ce8  61a0              STR      r0,[r4,#0x18]         ;3278
001cea  e7d6              B        |L1.7322|
                  |L1.7404|
001cec  69e0              LDR      r0,[r4,#0x1c]         ;3277
001cee  f0400080          ORR      r0,r0,#0x80           ;3277
001cf2  61e0              STR      r0,[r4,#0x1c]         ;3277
001cf4  e7d1              B        |L1.7322|
                  |L1.7414|
001cf6  69e0              LDR      r0,[r4,#0x1c]         ;3282
001cf8  f0400080          ORR      r0,r0,#0x80           ;3282
001cfc  61e0              STR      r0,[r4,#0x1c]         ;3282
001cfe  e7cc              B        |L1.7322|
                  |L1.7424|
001d00  6868              LDR      r0,[r5,#4]            ;3289  ; mess_data
001d02  b110              CBZ      r0,|L1.7434|
001d04  2801              CMP      r0,#1                 ;3290
001d06  d007              BEQ      |L1.7448|
001d08  e02c              B        |L1.7524|
                  |L1.7434|
001d0a  69e0              LDR      r0,[r4,#0x1c]         ;3289
001d0c  f0400010          ORR      r0,r0,#0x10           ;3289
001d10  61e0              STR      r0,[r4,#0x1c]         ;3289
001d12  e027              B        |L1.7524|
                  |L1.7444|
001d14  e005              B        |L1.7458|
001d16  e009              B        |L1.7468|
                  |L1.7448|
001d18  69a0              LDR      r0,[r4,#0x18]         ;3290
001d1a  f0400010          ORR      r0,r0,#0x10           ;3290
001d1e  61a0              STR      r0,[r4,#0x18]         ;3290
001d20  e020              B        |L1.7524|
                  |L1.7458|
001d22  69e0              LDR      r0,[r4,#0x1c]         ;3294
001d24  f0400010          ORR      r0,r0,#0x10           ;3294
001d28  61e0              STR      r0,[r4,#0x1c]         ;3294
001d2a  e01b              B        |L1.7524|
                  |L1.7468|
;;;3296   		} 
;;;3297   	} 	 
;;;3298   else	
;;;3299   	{
;;;3300   	//         .    
;;;3301   	#ifndef UKU2071x 
;;;3302   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_NET))
;;;3303   		{
;;;3304   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;3305   		else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_NET,1);
;;;3306   		}
;;;3307   	else	if(!(avar_ind_stat&0x00000001)) SET_REG(LPC_GPIO1->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;3308   	else SET_REG(LPC_GPIO3->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;3309   	#endif
;;;3310   	#ifdef UKU2071x 
;;;3311   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_NET))
001d2c  20d2              MOVS     r0,#0xd2
001d2e  f7fffffe          BL       mess_find_unvol
001d32  b110              CBZ      r0,|L1.7482|
001d34  6828              LDR      r0,[r5,#0]  ; mess_data
001d36  2866              CMP      r0,#0x66
001d38  d02d              BEQ      |L1.7574|
                  |L1.7482|
;;;3312   		{
;;;3313   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_NET,1);
;;;3314   		else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;3315   		}
;;;3316   	else	if(!(avar_ind_stat&0x00000001)) SET_REG(LPC_GPIO1->FIOSET,1,SHIFT_REL_AV_NET,1);
001d3a  6830              LDR      r0,[r6,#0]  ; avar_ind_stat
001d3c  07c0              LSLS     r0,r0,#31
001d3e  d036              BEQ      |L1.7598|
;;;3317   	else SET_REG(LPC_GPIO3->FIOSET,1,SHIFT_REL_AV_NET,1);
001d40  6fa0              LDR      r0,[r4,#0x78]
001d42  f0407000          ORR      r0,r0,#0x2000000
001d46  67a0              STR      r0,[r4,#0x78]
                  |L1.7496|
;;;3318   	#endif
;;;3319   
;;;3320   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BPS))
001d48  20d2              MOVS     r0,#0xd2
001d4a  f7fffffe          BL       mess_find_unvol
001d4e  b110              CBZ      r0,|L1.7510|
001d50  6828              LDR      r0,[r5,#0]  ; mess_data
001d52  286a              CMP      r0,#0x6a
001d54  d030              BEQ      |L1.7608|
                  |L1.7510|
;;;3321   		{
;;;3322   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
;;;3323   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
;;;3324        	}
;;;3325   	else 
;;;3326   		{
;;;3327   		if(!(avar_ind_stat&0x100007f8)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
001d56  6830              LDR      r0,[r6,#0]  ; avar_ind_stat
001d58  4238              TST      r0,r7
001d5a  d03b              BEQ      |L1.7636|
;;;3328        	else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
001d5c  69a0              LDR      r0,[r4,#0x18]
001d5e  f0400020          ORR      r0,r0,#0x20
001d62  61a0              STR      r0,[r4,#0x18]
                  |L1.7524|
;;;3329   		}
;;;3330   	}
;;;3331   //   
;;;3332   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_EXT))	 
001d64  20d2              MOVS     r0,#0xd2
001d66  f7fffffe          BL       mess_find_unvol
001d6a  b110              CBZ      r0,|L1.7538|
001d6c  6828              LDR      r0,[r5,#0]  ; mess_data
001d6e  2871              CMP      r0,#0x71
001d70  d036              BEQ      |L1.7648|
                  |L1.7538|
;;;3333   	{
;;;3334   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,9,1);
;;;3335   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,9,1);
;;;3336   	}
;;;3337   else if(DOP_RELE_FUNC==0)	//     
001d72  48ff              LDR      r0,|L1.8560|
001d74  f9b00000          LDRSH    r0,[r0,#0]  ; DOP_RELE_FUNC
001d78  b388              CBZ      r0,|L1.7646|
;;;3338   	{
;;;3339   	if(!speedChIsOn) SET_REG(LPC_GPIO0->FIOCLR,1,9,1);
;;;3340   	else SET_REG(LPC_GPIO0->FIOSET,1,9,1);
;;;3341   	}
;;;3342   else if(DOP_RELE_FUNC==1)  //      
001d7a  2801              CMP      r0,#1
001d7c  d10a              BNE      |L1.7572|
;;;3343   	{
;;;3344   	if((mess_find_unvol(MESS2RELE_HNDL))&& (mess_data[0]==PARAM_RELE_BAT_IS_DISCHARGED)) SET_REG(LPC_GPIO0->FIOCLR,1,9,1);
001d7e  20d2              MOVS     r0,#0xd2
001d80  f7fffffe          BL       mess_find_unvol
001d84  b110              CBZ      r0,|L1.7564|
001d86  6828              LDR      r0,[r5,#0]  ; mess_data
001d88  2872              CMP      r0,#0x72
001d8a  d044              BEQ      |L1.7702|
                  |L1.7564|
;;;3345   	else SET_REG(LPC_GPIO0->FIOSET,1,9,1);
001d8c  69a0              LDR      r0,[r4,#0x18]
001d8e  f4407000          ORR      r0,r0,#0x200
001d92  61a0              STR      r0,[r4,#0x18]
                  |L1.7572|
;;;3346   	}	 	
;;;3347   #endif
;;;3348   
;;;3349   #ifdef UKU_KONTUR
;;;3350   
;;;3351   //  
;;;3352   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_COMM))
;;;3353   	{
;;;3354   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_COMM,1);
;;;3355   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_COMM,1);
;;;3356   	}
;;;3357   else 
;;;3358   	{
;;;3359        if(  (!(avar_ind_stat&0x00007fff)) &&
;;;3360             ((!SK_REL_EN[0]) || (sk_av_stat[0]!=sasON))  &&
;;;3361             ((!SK_REL_EN[1]) || (sk_av_stat[1]!=sasON))  &&
;;;3362             ((!SK_REL_EN[2]) || (sk_av_stat[2]!=sasON))  /*&&
;;;3363             ((!SK_REL_EN[3]) || (sk_av_stat[3]!=sasON))*/  )SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_COMM,1);
;;;3364        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_COMM,1);
;;;3365   	}
;;;3366   
;;;3367   	
;;;3368   //rel_warm_plazma=0;
;;;3369   //    
;;;3370   /*
;;;3371   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_WARM))
;;;3372   	{
;;;3373   	if(mess_data[1]==0)
;;;3374   		{
;;;3375   		SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_WARM,1);
;;;3376   		rel_warm_plazma=1;
;;;3377   		}
;;;3378   	else if(mess_data[1]==1) 
;;;3379   		{
;;;3380   		SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_WARM,1);
;;;3381   		rel_warm_plazma=2;
;;;3382   		}
;;;3383        }
;;;3384   else 
;;;3385   	{
;;;3386   	if(warm_stat_k==wsOFF) 
;;;3387   		{
;;;3388   		SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_WARM,1);
;;;3389   		rel_warm_plazma=3;
;;;3390   		}
;;;3391        else 
;;;3392   		{
;;;3393   		SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_WARM,1);
;;;3394   		rel_warm_plazma=4;
;;;3395   		}
;;;3396   	}
;;;3397   */
;;;3398   // 
;;;3399   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_LIGHT))
;;;3400   	{
;;;3401   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LIGHT,1);
;;;3402   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LIGHT,1);
;;;3403        }
;;;3404   else 
;;;3405   	{
;;;3406   	if(sk_av_stat[0]!=sasON) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LIGHT,1);
;;;3407        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LIGHT,1);
;;;3408   	}
;;;3409   
;;;3410   
;;;3411   
;;;3412   //  
;;;3413   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_LOAD_OFF))
;;;3414   	{
;;;3415   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LOAD_OFF,1);
;;;3416   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LOAD_OFF,1);
;;;3417        }
;;;3418   else if(tloaddisable_cmnd==0)
;;;3419   	{
;;;3420   	SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LOAD_OFF,1);
;;;3421   	}
;;;3422   else if((tloaddisable_cmnd)&&(tloaddisable_cmnd<=11))
;;;3423   	{
;;;3424   	SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LOAD_OFF,1);
;;;3425   	}
;;;3426   
;;;3427   else 
;;;3428   	{
;;;3429   	if(!(tloaddisable_stat==tldsON)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LOAD_OFF,1);
;;;3430        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LOAD_OFF,1);
;;;3431   	} 
;;;3432   
;;;3433   //    
;;;3434   if(RELE_LOG)
;;;3435   	{
;;;3436   	if((mess_find_unvol(MESS2RELE_HNDL))&&(mess_data[0]==PARAM_RELE_VENT_WARM))
;;;3437   		{
;;;3438   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT_WARM,1);
;;;3439   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT_WARM,1);
;;;3440   		}
;;;3441   	else 
;;;3442   		{
;;;3443   		if(warm_stat_k==wsOFF) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT_WARM,1);
;;;3444   	     else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT_WARM,1);
;;;3445   		} 
;;;3446   
;;;3447   	}
;;;3448   else 
;;;3449   	{
;;;3450   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_VENT_WARM))
;;;3451   		{
;;;3452   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT_WARM,1);
;;;3453   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT_WARM,1);
;;;3454   		}
;;;3455   	else 
;;;3456   		{
;;;3457   		if(vent_stat_k==vsOFF) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT_WARM,1);
;;;3458   	     else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT_WARM,1);
;;;3459   		} 
;;;3460   	}
;;;3461   #endif
;;;3462   
;;;3463   
;;;3464   #ifdef UKU_TELECORE2015
;;;3465   //  
;;;3466   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_NET))
;;;3467   	{
;;;3468   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;3469   	else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_NET,1);
;;;3470   	}
;;;3471   else	if(!(avar_ind_stat&0x00000001)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;3472   else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_NET,1);
;;;3473   
;;;3474   
;;;3475   // 
;;;3476   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_LIGHT))
;;;3477   	{
;;;3478   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LIGHT,1);
;;;3479   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LIGHT,1);
;;;3480        }
;;;3481   else 
;;;3482   	{
;;;3483   	if(sk_av_stat[0]!=sasON) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LIGHT,1);
;;;3484        else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LIGHT,1);
;;;3485   	}
;;;3486   
;;;3487   // 
;;;3488   if((mess_find_unvol(MESS2RELE_HNDL))&&(mess_data[0]==PARAM_RELE_WARM))
;;;3489   	{
;;;3490   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_WARM,1);
;;;3491   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_WARM,1);
;;;3492   	}
;;;3493   else 
;;;3494   	{
;;;3495   	if(warm_stat_k==wsOFF) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_WARM,1);
;;;3496        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_WARM,1);
;;;3497   	} 
;;;3498   // 
;;;3499   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_VENT))
;;;3500   	{
;;;3501   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT,1);
;;;3502   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;3503   	}
;;;3504   else 
;;;3505   	{
;;;3506   	if(vent_stat_k==vsOFF) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT,1);
;;;3507        else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;3508   	} 
;;;3509   
;;;3510   //  
;;;3511   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_VVENT))
;;;3512   	{
;;;3513   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VVENT,1);
;;;3514   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VVENT,1);
;;;3515   	}
;;;3516   else 
;;;3517   	{
;;;3518   	if(vvent_stat_k==vsOFF) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VVENT,1);
;;;3519        else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VVENT,1);
;;;3520   	} 
;;;3521   
;;;3522   #endif
;;;3523   
;;;3524   }
001d94  e4a7              B        |L1.5862|
                  |L1.7574|
001d96  6868              LDR      r0,[r5,#4]            ;3313  ; mess_data
001d98  b120              CBZ      r0,|L1.7588|
001d9a  69e0              LDR      r0,[r4,#0x1c]         ;3314
001d9c  f0407000          ORR      r0,r0,#0x2000000      ;3314
001da0  61e0              STR      r0,[r4,#0x1c]         ;3314
001da2  e7d1              B        |L1.7496|
                  |L1.7588|
001da4  69a0              LDR      r0,[r4,#0x18]         ;3313
001da6  f0407000          ORR      r0,r0,#0x2000000      ;3313
001daa  61a0              STR      r0,[r4,#0x18]         ;3313
001dac  e7cc              B        |L1.7496|
                  |L1.7598|
001dae  6ba0              LDR      r0,[r4,#0x38]         ;3316
001db0  f0407000          ORR      r0,r0,#0x2000000      ;3316
001db4  63a0              STR      r0,[r4,#0x38]         ;3316
001db6  e7c7              B        |L1.7496|
                  |L1.7608|
001db8  6868              LDR      r0,[r5,#4]            ;3322  ; mess_data
001dba  b130              CBZ      r0,|L1.7626|
001dbc  2801              CMP      r0,#1                 ;3323
001dbe  d1d1              BNE      |L1.7524|
001dc0  69a0              LDR      r0,[r4,#0x18]         ;3323
001dc2  f0400020          ORR      r0,r0,#0x20           ;3323
001dc6  61a0              STR      r0,[r4,#0x18]         ;3323
001dc8  e7cc              B        |L1.7524|
                  |L1.7626|
001dca  69e0              LDR      r0,[r4,#0x1c]         ;3322
001dcc  f0400020          ORR      r0,r0,#0x20           ;3322
001dd0  61e0              STR      r0,[r4,#0x1c]         ;3322
001dd2  e7c7              B        |L1.7524|
                  |L1.7636|
001dd4  69e0              LDR      r0,[r4,#0x1c]         ;3327
001dd6  f0400020          ORR      r0,r0,#0x20           ;3327
001dda  61e0              STR      r0,[r4,#0x1c]         ;3327
001ddc  e7c2              B        |L1.7524|
                  |L1.7646|
001dde  e00d              B        |L1.7676|
                  |L1.7648|
001de0  6868              LDR      r0,[r5,#4]            ;3334  ; mess_data
001de2  b130              CBZ      r0,|L1.7666|
001de4  2801              CMP      r0,#1                 ;3335
001de6  d1d5              BNE      |L1.7572|
001de8  69a0              LDR      r0,[r4,#0x18]         ;3335
001dea  f4407000          ORR      r0,r0,#0x200          ;3335
001dee  61a0              STR      r0,[r4,#0x18]         ;3335
001df0  e479              B        |L1.5862|
                  |L1.7666|
001df2  69e0              LDR      r0,[r4,#0x1c]         ;3334
001df4  f4407000          ORR      r0,r0,#0x200          ;3334
001df8  61e0              STR      r0,[r4,#0x1c]         ;3334
001dfa  e474              B        |L1.5862|
                  |L1.7676|
001dfc  48dd              LDR      r0,|L1.8564|
001dfe  8800              LDRH     r0,[r0,#0]            ;3339  ; speedChIsOn
001e00  b120              CBZ      r0,|L1.7692|
001e02  69a0              LDR      r0,[r4,#0x18]         ;3340
001e04  f4407000          ORR      r0,r0,#0x200          ;3340
001e08  61a0              STR      r0,[r4,#0x18]         ;3340
001e0a  e46c              B        |L1.5862|
                  |L1.7692|
001e0c  69e0              LDR      r0,[r4,#0x1c]         ;3339
001e0e  f4407000          ORR      r0,r0,#0x200          ;3339
001e12  61e0              STR      r0,[r4,#0x1c]         ;3339
001e14  e467              B        |L1.5862|
                  |L1.7702|
001e16  69e0              LDR      r0,[r4,#0x1c]         ;3344
001e18  f4407000          ORR      r0,r0,#0x200          ;3344
001e1c  61e0              STR      r0,[r4,#0x1c]         ;3344
001e1e  e462              B        |L1.5862|
;;;3525   
                          ENDP

                  bps_hndl PROC
;;;3526   //-----------------------------------------------
;;;3527   void bps_hndl(void)
001e20  e92d5ff0          PUSH     {r4-r12,lr}
;;;3528   {
;;;3529   char ptr__,i;
;;;3530   
;;;3531   if(sh_cnt0<10)
001e24  4ed4              LDR      r6,|L1.8568|
;;;3532   	{
;;;3533   	sh_cnt0++;
;;;3534   	if(sh_cnt0>=10)
;;;3535   		{
;;;3536   		sh_cnt0=0;
001e26  2700              MOVS     r7,#0
;;;3537   		b1Hz_sh=1;
001e28  f04f0a01          MOV      r10,#1
001e2c  7c70              LDRB     r0,[r6,#0x11]         ;3531  ; sh_cnt0
001e2e  280a              CMP      r0,#0xa               ;3531
001e30  d208              BCS      |L1.7748|
001e32  f1000001          ADD      r0,r0,#1              ;3533
001e36  b2c0              UXTB     r0,r0                 ;3533
001e38  7470              STRB     r0,[r6,#0x11]         ;3533
001e3a  280a              CMP      r0,#0xa               ;3534
001e3c  d302              BCC      |L1.7748|
001e3e  7477              STRB     r7,[r6,#0x11]         ;3536
001e40  f886a012          STRB     r10,[r6,#0x12]
                  |L1.7748|
;;;3538   		}
;;;3539   	}
;;;3540   
;;;3541   /*if(sh_cnt1<5)
;;;3542   	{
;;;3543   	sh_cnt1++;
;;;3544   	if(sh_cnt1==5)
;;;3545   		{
;;;3546   		sh_cnt1=0;
;;;3547   		b2Hz_sh=1;
;;;3548   		}
;;;3549   	} */
;;;3550   
;;;3551   
;;;3552   /*
;;;3553   if(mess_find(MESS_SRC_ON_OFF))
;;;3554   	{
;;;3555   	if(mess_data[0]==_MESS_SRC_MASK_BLOK_2SEC)
;;;3556   		{
;;;3557   		char i;
;;;3558   		for(i=0;i<NUMIST;i++)
;;;3559   			{
;;;3560   			if(mess_data[1]&(1<<i))src[i]._ist_blok_cnt=20;
;;;3561   			}
;;;3562   		
;;;3563   		}
;;;3564   	else if(mess_data[0]==_MESS_SRC_MASK_UNBLOK)
;;;3565   		{
;;;3566   		char i;
;;;3567   		for(i=0;i<NUMIST;i++)
;;;3568   			{
;;;3569   			if(mess_data[1]&(1<<i))src[i]._ist_blok_cnt=0;
;;;3570   			}
;;;3571   		
;;;3572   		}
;;;3573   	}
;;;3574   	
;;;3575   else if(mess_find(_MESS_SRC_MASK_ON))
;;;3576   	{				
;;;3577   	if(mess_data[0]==_MESS_SRC_MASK_ON)
;;;3578   		{
;;;3579   		char i;
;;;3580   		for(i=0;i<NUMIST;i++)
;;;3581   			{
;;;3582   			if(mess_data[1]&(1<<i))
;;;3583   				{
;;;3584   				src[i]._ist_blok_cnt=0;
;;;3585   				src[i]._flags_tu=2;
;;;3586   				}
;;;3587   			}
;;;3588   		
;;;3589   		}				
;;;3590   	}*/
;;;3591   
;;;3592   
;;;3593   
;;;3594   /*else*/ 
;;;3595   bps_on_mask=0;
001e44  f8a67044          STRH     r7,[r6,#0x44]
;;;3596   bps_off_mask=0;
001e48  f8a67046          STRH     r7,[r6,#0x46]
;;;3597   
;;;3598   if(mess_find_unvol(MESS2BPS_HNDL))
001e4c  20cd              MOVS     r0,#0xcd
001e4e  f7fffffe          BL       mess_find_unvol
;;;3599   	{
;;;3600   	if(mess_data[0]==PARAM_BPS_ALL_OFF_AFTER_2SEC)
;;;3601   		{
;;;3602   		bps_off_mask=0xffff;
;;;3603   		}
;;;3604   
;;;3605   	if(mess_data[0]==PARAM_BPS_MASK_OFF_AFTER_2SEC)
;;;3606   		{
;;;3607   		bps_off_mask=mess_data[1];
;;;3608   		}
;;;3609   
;;;3610   	if(mess_data[0]==PARAM_BPS_MASK_ON)
;;;3611   		{
;;;3612   		bps_on_mask=mess_data[1];
;;;3613   		}
;;;3614   
;;;3615   	if(mess_data[0]==PARAM_BPS_ALL_ON)
;;;3616   		{
;;;3617   		bps_on_mask=0xffff;
;;;3618   		}
;;;3619   
;;;3620   	if(mess_data[0]==PARAM_BPS_MASK_ON_OFF_AFTER_2SEC)
;;;3621   		{
;;;3622   		bps_on_mask=mess_data[1];
;;;3623   		bps_off_mask=~(mess_data[1]);
;;;3624   		}
;;;3625   
;;;3626   
;;;3627   	for(i=0;i<=NUMIST;i++)
;;;3628   		{
;;;3629   		if(bps_off_mask&(1<<i)) bps[i]._blok_cnt++;
001e52  f8df8328          LDR      r8,|L1.8572|
001e56  f8dfb328          LDR      r11,|L1.8576|
001e5a  b3a0              CBZ      r0,|L1.7878|
001e5c  4ac9              LDR      r2,|L1.8580|
001e5e  f64f73ff          MOV      r3,#0xffff            ;3602
001e62  6810              LDR      r0,[r2,#0]            ;3600  ; mess_data
001e64  28ce              CMP      r0,#0xce              ;3600
001e66  d101              BNE      |L1.7788|
001e68  f8a63046          STRH     r3,[r6,#0x46]         ;3602
                  |L1.7788|
001e6c  28cf              CMP      r0,#0xcf              ;3605
001e6e  d102              BNE      |L1.7798|
001e70  6851              LDR      r1,[r2,#4]            ;3607  ; mess_data
001e72  f8a61046          STRH     r1,[r6,#0x46]         ;3607
                  |L1.7798|
001e76  28d1              CMP      r0,#0xd1              ;3610
001e78  d102              BNE      |L1.7808|
001e7a  6851              LDR      r1,[r2,#4]            ;3612  ; mess_data
001e7c  f8a61044          STRH     r1,[r6,#0x44]         ;3612
                  |L1.7808|
001e80  28d2              CMP      r0,#0xd2              ;3615
001e82  d101              BNE      |L1.7816|
001e84  f8a63044          STRH     r3,[r6,#0x44]         ;3617
                  |L1.7816|
001e88  28d0              CMP      r0,#0xd0              ;3620
001e8a  d106              BNE      |L1.7834|
001e8c  6850              LDR      r0,[r2,#4]            ;3622  ; mess_data
001e8e  f8a60044          STRH     r0,[r6,#0x44]         ;3622
001e92  ea6f0000          MVN      r0,r0                 ;3623
001e96  f8a60046          STRH     r0,[r6,#0x46]         ;3623
                  |L1.7834|
001e9a  f04f0400          MOV      r4,#0                 ;3627
001e9e  e037              B        |L1.7952|
                  |L1.7840|
001ea0  f8b60046          LDRH     r0,[r6,#0x46]  ; bps_off_mask
001ea4  fa0af904          LSL      r9,r10,r4
001ea8  ea190f00          TST      r9,r0
001eac  d00c              BEQ      |L1.7880|
001eae  ebc400c4          RSB      r0,r4,r4,LSL #3
001eb2  eb000040          ADD      r0,r0,r0,LSL #1
001eb6  eb080080          ADD      r0,r8,r0,LSL #2
001eba  f8301f40          LDRH     r1,[r0,#0x40]!
001ebe  f1010101          ADD      r1,r1,#1
001ec2  8001              STRH     r1,[r0,#0]
001ec4  e008              B        |L1.7896|
                  |L1.7878|
001ec6  e028              B        |L1.7962|
                  |L1.7880|
;;;3630   		else bps[i]._blok_cnt=0;
001ec8  ebc400c4          RSB      r0,r4,r4,LSL #3
001ecc  eb000040          ADD      r0,r0,r0,LSL #1
001ed0  eb080080          ADD      r0,r8,r0,LSL #2
001ed4  f8a07040          STRH     r7,[r0,#0x40]
                  |L1.7896|
;;;3631   		gran(&bps[i]._blok_cnt,0,50);
001ed8  ebc400c4          RSB      r0,r4,r4,LSL #3
001edc  eb000040          ADD      r0,r0,r0,LSL #1
001ee0  eb080580          ADD      r5,r8,r0,LSL #2
001ee4  f1050040          ADD      r0,r5,#0x40
001ee8  2232              MOVS     r2,#0x32
001eea  2100              MOVS     r1,#0
001eec  f7fffffe          BL       gran
;;;3632   		if(bps[i]._blok_cnt>20) bps[i]._flags_tu=1;
001ef0  f9b50040          LDRSH    r0,[r5,#0x40]
001ef4  2814              CMP      r0,#0x14
001ef6  dd01              BLE      |L1.7932|
001ef8  f885a02c          STRB     r10,[r5,#0x2c]
                  |L1.7932|
;;;3633   		if(bps_on_mask&(1<<i)) bps[i]._flags_tu=0;
001efc  f8b60044          LDRH     r0,[r6,#0x44]  ; bps_on_mask
001f00  ea190f00          TST      r9,r0
001f04  d001              BEQ      |L1.7946|
001f06  f885702c          STRB     r7,[r5,#0x2c]
                  |L1.7946|
001f0a  f1040401          ADD      r4,r4,#1              ;3627
001f0e  b2e4              UXTB     r4,r4                 ;3627
                  |L1.7952|
001f10  f9bb0000          LDRSH    r0,[r11,#0]           ;3627  ; NUMIST
001f14  4284              CMP      r4,r0                 ;3627
001f16  ddc3              BLE      |L1.7840|
001f18  e058              B        |L1.8140|
                  |L1.7962|
;;;3634   	     }
;;;3635   
;;;3636   	
;;;3637   /*
;;;3638   
;;;3639   	if(bps_all_off_cnt>20)
;;;3640   		{
;;;3641   		for(i=0;i<=NUMIST;i++)
;;;3642   			{
;;;3643   	     	bps[i]._flags_tu=1;
;;;3644   	     	}
;;;3645   		}
;;;3646   	else if(bps_mask_off_cnt>20)
;;;3647   		{
;;;3648   		for(i=0;i<=NUMIST;i++)
;;;3649   			{
;;;3650   			if(mess_data[1]&(1<<i)) bps[i]._flags_tu=1;
;;;3651   	     	}
;;;3652   		}	
;;;3653   		
;;;3654   	else if(bps_mask_on_off_cnt>20)
;;;3655   		{
;;;3656   		for(i=0;i<=NUMIST;i++)
;;;3657   			{
;;;3658   			if(mess_data[1]&(1<<i)) bps[i]._flags_tu=1;
;;;3659   			else bps[i]._flags_tu=0;
;;;3660   	     	}
;;;3661   		}
;;;3662   		
;;;3663   	if(mess_data[0]==PARAM_BPS_MASK_ON)
;;;3664   		{
;;;3665   		for(i=0;i<=NUMIST;i++)
;;;3666   			{
;;;3667   			if(mess_data[1]&(1<<i)) bps[i]._flags_tu=0;
;;;3668   	     	}
;;;3669   		}
;;;3670   */										
;;;3671   	}
;;;3672   
;;;3673   
;;;3674   else if(b1Hz_sh)
001f1a  7cb0              LDRB     r0,[r6,#0x12]  ; b1Hz_sh
001f1c  b3f0              CBZ      r0,|L1.8092|
;;;3675   	{
;;;3676   	ptr__=0;
001f1e  f04f0400          MOV      r4,#0
;;;3677        for(i=0;i<=NUMIST;i++)
001f22  4621              MOV      r1,r4
001f24  f9bb0000          LDRSH    r0,[r11,#0]           ;3627
001f28  e00a              B        |L1.8000|
                  |L1.7978|
;;;3678   		{
;;;3679   	     bps[i]._flags_tu=1;
001f2a  ebc102c1          RSB      r2,r1,r1,LSL #3
001f2e  eb020242          ADD      r2,r2,r2,LSL #1
001f32  eb080282          ADD      r2,r8,r2,LSL #2
001f36  f882a02c          STRB     r10,[r2,#0x2c]
001f3a  f1010101          ADD      r1,r1,#1              ;3677
001f3e  b2c9              UXTB     r1,r1                 ;3677
                  |L1.8000|
001f40  4281              CMP      r1,r0                 ;3677
001f42  ddf2              BLE      |L1.7978|
;;;3680   	     }	
;;;3681     	     
;;;3682     	for(i=0;(i<NUMIST)&&(ptr__<num_necc);i++)
001f44  f04f0100          MOV      r1,#0
001f48  e022              B        |L1.8080|
                  |L1.8010|
;;;3683     		{
;;;3684   		char ii,iii;
;;;3685   
;;;3686   		ii=(char)NUMIST;
001f4a  b2c2              UXTB     r2,r0
;;;3687   		if(ii<0)ii=0;
;;;3688   		if(ii>32)ii=32;
001f4c  2a20              CMP      r2,#0x20
001f4e  d901              BLS      |L1.8020|
001f50  f04f0220          MOV      r2,#0x20
                  |L1.8020|
;;;3689   		iii=numOfForvardBps;
001f54  7e33              LDRB     r3,[r6,#0x18]  ; numOfForvardBps
;;;3690   		if(iii<0)iii=0;
;;;3691   		if(iii>=NUMIST)iii=0;
001f56  4283              CMP      r3,r0
001f58  db01              BLT      |L1.8030|
001f5a  f04f0300          MOV      r3,#0
                  |L1.8030|
;;;3692   		iii+=i;
001f5e  440b              ADD      r3,r3,r1
001f60  b2db              UXTB     r3,r3
;;;3693   		iii=iii%ii;
001f62  fbb3f5f2          UDIV     r5,r3,r2
001f66  fb023215          MLS      r2,r2,r5,r3
;;;3694   		
;;;3695     	     if((bps[iii]._state==bsRDY)||(bps[iii]._state==bsWRK))
001f6a  ebc202c2          RSB      r2,r2,r2,LSL #3
001f6e  eb020242          ADD      r2,r2,r2,LSL #1
001f72  eb080282          ADD      r2,r8,r2,LSL #2
001f76  7893              LDRB     r3,[r2,#2]
001f78  2b02              CMP      r3,#2
001f7a  d001              BEQ      |L1.8064|
001f7c  2b01              CMP      r3,#1
001f7e  d104              BNE      |L1.8074|
                  |L1.8064|
;;;3696     	         	{
;;;3697     	         	bps[iii]._flags_tu=0;
001f80  f882702c          STRB     r7,[r2,#0x2c]
;;;3698     	         	ptr__++;
001f84  f1040401          ADD      r4,r4,#1
001f88  b2e4              UXTB     r4,r4
                  |L1.8074|
001f8a  f1010101          ADD      r1,r1,#1              ;3682
001f8e  b2c9              UXTB     r1,r1                 ;3682
                  |L1.8080|
001f90  4281              CMP      r1,r0                 ;3682
001f92  da06              BGE      |L1.8098|
001f94  4a7c              LDR      r2,|L1.8584|
001f96  f9b22000          LDRSH    r2,[r2,#0]            ;3682  ; num_necc
001f9a  e000              B        |L1.8094|
                  |L1.8092|
001f9c  e016              B        |L1.8140|
                  |L1.8094|
001f9e  4294              CMP      r4,r2                 ;3682
001fa0  dbd3              BLT      |L1.8010|
                  |L1.8098|
;;;3699     	         	}
;;;3700     	     }
;;;3701   	if(main_1Hz_cnt<60)
001fa2  497a              LDR      r1,|L1.8588|
001fa4  f9b11000          LDRSH    r1,[r1,#0]  ; main_1Hz_cnt
001fa8  293c              CMP      r1,#0x3c
001faa  da0f              BGE      |L1.8140|
;;;3702   		{
;;;3703        	for(i=0;i<=NUMIST;i++)
001fac  f04f0100          MOV      r1,#0
001fb0  e00a              B        |L1.8136|
                  |L1.8114|
;;;3704   			{
;;;3705   	     	bps[i]._flags_tu=0;
001fb2  ebc102c1          RSB      r2,r1,r1,LSL #3
001fb6  eb020242          ADD      r2,r2,r2,LSL #1
001fba  eb080282          ADD      r2,r8,r2,LSL #2
001fbe  f882702c          STRB     r7,[r2,#0x2c]
001fc2  f1010101          ADD      r1,r1,#1              ;3703
001fc6  b2c9              UXTB     r1,r1                 ;3703
                  |L1.8136|
001fc8  4281              CMP      r1,r0                 ;3703
001fca  ddf2              BLE      |L1.8114|
                  |L1.8140|
;;;3706   	     	}	
;;;3707   		}
;;;3708   	
;;;3709   		 
;;;3710     	}
;;;3711   
;;;3712   
;;;3713   for(i=0;i<NUMIST;i++)
001fcc  f04f0000          MOV      r0,#0
;;;3714        {
;;;3715        if(bps[i]._ist_blok_host_cnt!=0)
;;;3716             {
;;;3717             bps[i]._flags_tu=99;
001fd0  f04f0463          MOV      r4,#0x63
001fd4  f9bb3000          LDRSH    r3,[r11,#0]           ;3627
001fd8  e00f              B        |L1.8186|
                  |L1.8154|
001fda  ebc001c0          RSB      r1,r0,r0,LSL #3       ;3715
001fde  eb010141          ADD      r1,r1,r1,LSL #1       ;3715
001fe2  eb080181          ADD      r1,r8,r1,LSL #2       ;3715
001fe6  6bca              LDR      r2,[r1,#0x3c]         ;3715
001fe8  b122              CBZ      r2,|L1.8180|
001fea  f881402c          STRB     r4,[r1,#0x2c]
;;;3718   	     bps[i]._ist_blok_host_cnt--;
001fee  f1a20201          SUB      r2,r2,#1
001ff2  63ca              STR      r2,[r1,#0x3c]
                  |L1.8180|
001ff4  f1000001          ADD      r0,r0,#1              ;3713
001ff8  b2c0              UXTB     r0,r0                 ;3713
                  |L1.8186|
001ffa  4298              CMP      r0,r3                 ;3713
001ffc  dbed              BLT      |L1.8154|
;;;3719             }
;;;3720        }
;;;3721   
;;;3722   
;;;3723   
;;;3724   
;;;3725   b1Hz_sh=0;
001ffe  74b7              STRB     r7,[r6,#0x12]
;;;3726   
;;;3727   
;;;3728   num_of_wrks_bps=0;
002000  73b7              STRB     r7,[r6,#0xe]
;;;3729   for(i=0;i<NUMIST;i++)
002002  f04f0000          MOV      r0,#0
002006  e00f              B        |L1.8232|
                  |L1.8200|
;;;3730   	{
;;;3731   	if(bps[i]._state==bsWRK)num_of_wrks_bps++;
002008  ebc001c0          RSB      r1,r0,r0,LSL #3
00200c  eb010141          ADD      r1,r1,r1,LSL #1
002010  eb080181          ADD      r1,r8,r1,LSL #2
002014  7889              LDRB     r1,[r1,#2]
002016  2901              CMP      r1,#1
002018  d103              BNE      |L1.8226|
00201a  7bb1              LDRB     r1,[r6,#0xe]  ; num_of_wrks_bps
00201c  f1010101          ADD      r1,r1,#1
002020  73b1              STRB     r1,[r6,#0xe]
                  |L1.8226|
002022  f1000001          ADD      r0,r0,#1              ;3729
002026  b2c0              UXTB     r0,r0                 ;3729
                  |L1.8232|
002028  4298              CMP      r0,r3                 ;3729
00202a  dbed              BLT      |L1.8200|
;;;3732   	}
;;;3733   
;;;3734   
;;;3735   }
00202c  e8bd9ff0          POP      {r4-r12,pc}
;;;3736   
                          ENDP

                  powerAntiAliasingHndl PROC
;;;3743   //-----------------------------------------------
;;;3744   void powerAntiAliasingHndl(void)
002030  b570              PUSH     {r4-r6,lr}
;;;3745   {
;;;3746   if((power_summary_tempo/10UL)==(power_summary_tempo_old/10UL))
002032  230a              MOVS     r3,#0xa
002034  4c57              LDR      r4,|L1.8596|
002036  4856              LDR      r0,|L1.8592|
;;;3747   	{
;;;3748   	if(powerSummaryCnt<15)powerSummaryCnt++;
;;;3749   	if(powerSummaryCnt>=10)
;;;3750   		{
;;;3751   		power_summary=power_summary_tempo;
;;;3752   		}
;;;3753   	}
;;;3754   else powerSummaryCnt=0;
002038  2500              MOVS     r5,#0
00203a  6822              LDR      r2,[r4,#0]            ;3746  ; power_summary_tempo_old
00203c  6800              LDR      r0,[r0,#0]            ;3746  ; power_summary_tempo
00203e  fbb2f6f3          UDIV     r6,r2,r3              ;3746
002042  fbb0f1f3          UDIV     r1,r0,r3              ;3746
002046  4a54              LDR      r2,|L1.8600|
002048  42b1              CMP      r1,r6                 ;3746
00204a  d10b              BNE      |L1.8292|
00204c  7811              LDRB     r1,[r2,#0]            ;3748  ; powerSummaryCnt
00204e  290f              CMP      r1,#0xf               ;3748
002050  d202              BCS      |L1.8280|
002052  f1010101          ADD      r1,r1,#1              ;3748
002056  7011              STRB     r1,[r2,#0]            ;3748
                  |L1.8280|
002058  7811              LDRB     r1,[r2,#0]            ;3749  ; powerSummaryCnt
00205a  290a              CMP      r1,#0xa               ;3749
00205c  d303              BCC      |L1.8294|
00205e  494f              LDR      r1,|L1.8604|
002060  6008              STR      r0,[r1,#0]            ;3751  ; power_summary
002062  e000              B        |L1.8294|
                  |L1.8292|
002064  7015              STRB     r5,[r2,#0]
                  |L1.8294|
;;;3755   power_summary_tempo_old=power_summary_tempo;
002066  6020              STR      r0,[r4,#0]  ; power_summary_tempo_old
;;;3756   
;;;3757   if((power_current_tempo/10UL)==(power_current_tempo_old/10UL))
002068  484d              LDR      r0,|L1.8608|
00206a  4c4e              LDR      r4,|L1.8612|
00206c  f9b00000          LDRSH    r0,[r0,#0]  ; power_current_tempo
002070  f9b42000          LDRSH    r2,[r4,#0]  ; power_current_tempo_old
002074  fbb0f1f3          UDIV     r1,r0,r3
002078  fbb2f3f3          UDIV     r3,r2,r3
;;;3758   	{
;;;3759   	if(powerCurrentCnt<15)powerCurrentCnt++;
00207c  4a4a              LDR      r2,|L1.8616|
00207e  4299              CMP      r1,r3                 ;3757
002080  d10b              BNE      |L1.8346|
002082  7811              LDRB     r1,[r2,#0]  ; powerCurrentCnt
002084  290f              CMP      r1,#0xf
002086  d202              BCS      |L1.8334|
002088  f1010101          ADD      r1,r1,#1
00208c  7011              STRB     r1,[r2,#0]
                  |L1.8334|
;;;3760   	if(powerCurrentCnt>=10)
00208e  7811              LDRB     r1,[r2,#0]  ; powerCurrentCnt
002090  290a              CMP      r1,#0xa
002092  d303              BCC      |L1.8348|
;;;3761   		{
;;;3762   		power_current=power_current_tempo;
002094  4945              LDR      r1,|L1.8620|
002096  8008              STRH     r0,[r1,#0]
002098  e000              B        |L1.8348|
                  |L1.8346|
;;;3763   		}
;;;3764   	}
;;;3765   else powerCurrentCnt=0;
00209a  7015              STRB     r5,[r2,#0]
                  |L1.8348|
;;;3766   power_current_tempo_old=power_current_tempo;
00209c  8020              STRH     r0,[r4,#0]
;;;3767   }
00209e  bd70              POP      {r4-r6,pc}
;;;3768   
                          ENDP

                  bps_drv PROC
;;;3851   //-----------------------------------------------
;;;3852   void bps_drv(char in)
0020a0  e92d41f0          PUSH     {r4-r8,lr}
;;;3853   {
0020a4  4606              MOV      r6,r0
;;;3854   char temp;
;;;3855   
;;;3856   if (bps[in]._device!=dSRC) return;
0020a6  ebc600c6          RSB      r0,r6,r6,LSL #3
0020aa  4934              LDR      r1,|L1.8572|
0020ac  eb000040          ADD      r0,r0,r0,LSL #1
0020b0  f8112020          LDRB     r2,[r1,r0,LSL #2]
0020b4  2a03              CMP      r2,#3
0020b6  d15a              BNE      |L1.8558|
;;;3857   temp=bps[in]._flags_tm;
0020b8  eb010480          ADD      r4,r1,r0,LSL #2
0020bc  f8945042          LDRB     r5,[r4,#0x42]
;;;3858   if(temp&(1<<AV_T))
0020c0  07a8              LSLS     r0,r5,#30
0020c2  d517              BPL      |L1.8436|
;;;3859   	{
;;;3860   	if(bps[in]._temp_av_cnt<1200) 
0020c4  f9b41046          LDRSH    r1,[r4,#0x46]
0020c8  f44f6296          MOV      r2,#0x4b0
0020cc  4291              CMP      r1,r2
0020ce  da22              BGE      |L1.8470|
;;;3861   		{
;;;3862   		bps[in]._temp_av_cnt++;
0020d0  f1010101          ADD      r1,r1,#1
0020d4  b208              SXTH     r0,r1
0020d6  f8a40046          STRH     r0,[r4,#0x46]
;;;3863   		if(bps[in]._temp_av_cnt>=1200)
0020da  4290              CMP      r0,r2
0020dc  db1b              BLT      |L1.8470|
;;;3864   			{
;;;3865   			bps[in]._temp_av_cnt=1200;
0020de  f8a42046          STRH     r2,[r4,#0x46]
;;;3866   		   	if(!(bps[in]._av&(1<<0)))avar_bps_hndl(in,0,1);
0020e2  7860              LDRB     r0,[r4,#1]
0020e4  07c0              LSLS     r0,r0,#31
0020e6  d116              BNE      |L1.8470|
0020e8  2201              MOVS     r2,#1
0020ea  2100              MOVS     r1,#0
0020ec  4630              MOV      r0,r6
0020ee  f7fffffe          BL       avar_bps_hndl
0020f2  e010              B        |L1.8470|
                  |L1.8436|
;;;3867   			}
;;;3868   		}
;;;3869   	}
;;;3870   
;;;3871   else if(!(temp&(1<<AV_T)))
;;;3872   	{
;;;3873   	if(bps[in]._temp_av_cnt) 
0020f4  f9b41046          LDRSH    r1,[r4,#0x46]
0020f8  b169              CBZ      r1,|L1.8470|
;;;3874   		{
;;;3875   		bps[in]._temp_av_cnt--;
0020fa  f1a10101          SUB      r1,r1,#1
0020fe  b208              SXTH     r0,r1
002100  f8a40046          STRH     r0,[r4,#0x46]
;;;3876   		if(!bps[in]._temp_av_cnt)
002104  b938              CBNZ     r0,|L1.8470|
;;;3877   			{
;;;3878   			if(bps[in]._av&(1<<0))avar_bps_hndl(in,0,0);
002106  7860              LDRB     r0,[r4,#1]
002108  07c0              LSLS     r0,r0,#31
00210a  d004              BEQ      |L1.8470|
00210c  2200              MOVS     r2,#0
00210e  4611              MOV      r1,r2
002110  4630              MOV      r0,r6
002112  f7fffffe          BL       avar_bps_hndl
                  |L1.8470|
;;;3879   			}
;;;3880   		} 	
;;;3881   
;;;3882   	}
;;;3883   
;;;3884   if((temp&(1<<AVUMAX)))
002116  0729              LSLS     r1,r5,#28
;;;3885   	{
;;;3886   	if(bps[in]._umax_av_cnt<10) 
;;;3887   		{
;;;3888   		bps[in]._umax_av_cnt++;
;;;3889   		if(bps[in]._umax_av_cnt>=10)
;;;3890   			{ 
;;;3891   			bps[in]._umax_av_cnt=10;
002118  f04f070a          MOV      r7,#0xa
00211c  f04f0000          MOV      r0,#0                 ;3866
002120  d515              BPL      |L1.8526|
002122  f9b41048          LDRSH    r1,[r4,#0x48]         ;3886
002126  290a              CMP      r1,#0xa               ;3886
002128  da49              BGE      |L1.8638|
00212a  f1010101          ADD      r1,r1,#1              ;3888
00212e  b208              SXTH     r0,r1                 ;3888
002130  f8a40048          STRH     r0,[r4,#0x48]         ;3888
002134  280a              CMP      r0,#0xa               ;3889
002136  db42              BLT      |L1.8638|
002138  f8a47048          STRH     r7,[r4,#0x48]
;;;3892   			if(!(bps[in]._av&(1<<1)))avar_bps_hndl(in,1,1);
00213c  7860              LDRB     r0,[r4,#1]
00213e  0780              LSLS     r0,r0,#30
002140  d43d              BMI      |L1.8638|
002142  2201              MOVS     r2,#1
002144  4611              MOV      r1,r2
002146  4630              MOV      r0,r6
002148  f7fffffe          BL       avar_bps_hndl
00214c  e037              B        |L1.8638|
                  |L1.8526|
;;;3893   		  	/*if((K[APV]!=ON)||((apv_cnt[in,0]==0)&&(apv_cnt[in,1]==0)&&(apv_cnt[in,2]==0)&&(apv_flags[in]==afOFF)))avar_s_hndl(in,1,1);
;;;3894   			if((apv_cnt[in,0]==0)&&(apv_cnt[in,1]==0)&&(apv_cnt[in,2]==0)&&(apv_flags[in]==afON))
;;;3895   				{
;;;3896   				apv_cnt[in,0]=APV_INIT;
;;;3897   				apv_cnt[in,1]=APV_INIT;
;;;3898   				apv_cnt[in,2]=APV_INIT;
;;;3899   				apv_flags[in]=afOFF;
;;;3900   				}				*/
;;;3901   						
;;;3902   			}
;;;3903   		} 
;;;3904   	}		
;;;3905   else if(!(temp&(1<<AVUMAX)))
;;;3906   	{
;;;3907   	if(bps[in]._umax_av_cnt>0) 
00214e  f9b41048          LDRSH    r1,[r4,#0x48]
002152  2900              CMP      r1,#0
002154  dd30              BLE      |L1.8632|
;;;3908   		{
;;;3909   		bps[in]._umax_av_cnt--;
002156  f1a10101          SUB      r1,r1,#1
00215a  b208              SXTH     r0,r1
00215c  f8a40048          STRH     r0,[r4,#0x48]
;;;3910   		if(bps[in]._umax_av_cnt==0)
002160  bb30              CBNZ     r0,|L1.8624|
;;;3911   			{
;;;3912   			bps[in]._umax_av_cnt=0;
;;;3913   			avar_bps_hndl(in,1,0);
002162  f04f0200          MOV      r2,#0
002166  f04f0101          MOV      r1,#1
00216a  4630              MOV      r0,r6
00216c  e021              B        |L1.8626|
                  |L1.8558|
00216e  e085              B        |L1.8828|
                  |L1.8560|
                          DCD      DOP_RELE_FUNC
                  |L1.8564|
                          DCD      speedChIsOn
                  |L1.8568|
                          DCD      ||area_number.21||
                  |L1.8572|
                          DCD      bps
                  |L1.8576|
                          DCD      NUMIST
                  |L1.8580|
                          DCD      mess_data
                  |L1.8584|
                          DCD      num_necc
                  |L1.8588|
                          DCD      main_1Hz_cnt
                  |L1.8592|
                          DCD      power_summary_tempo
                  |L1.8596|
                          DCD      power_summary_tempo_old
                  |L1.8600|
                          DCD      powerSummaryCnt
                  |L1.8604|
                          DCD      power_summary
                  |L1.8608|
                          DCD      power_current_tempo
                  |L1.8612|
                          DCD      power_current_tempo_old
                  |L1.8616|
                          DCD      powerCurrentCnt
                  |L1.8620|
                          DCD      power_current
                  |L1.8624|
0021b0  e005              B        |L1.8638|
                  |L1.8626|
0021b2  f7fffffe          BL       avar_bps_hndl
0021b6  e002              B        |L1.8638|
                  |L1.8632|
;;;3914   	 //		apv_cnt[in,0]=0;
;;;3915   	//		apv_cnt[in,1]=0;
;;;3916   	 //		apv_cnt[in,2]=0;			
;;;3917   			}
;;;3918   		}
;;;3919   	else if(bps[in]._umax_av_cnt<0) bps[in]._umax_av_cnt=0;		 
0021b8  da01              BGE      |L1.8638|
0021ba  f8a40048          STRH     r0,[r4,#0x48]
                  |L1.8638|
;;;3920   	}
;;;3921   
;;;3922   if(temp&(1<<AVUMIN))
0021be  06e8              LSLS     r0,r5,#27
0021c0  d515              BPL      |L1.8686|
;;;3923   	{
;;;3924   	if(bps[in]._umin_av_cnt<10) 
0021c2  f9b4104a          LDRSH    r1,[r4,#0x4a]
0021c6  290a              CMP      r1,#0xa
0021c8  da1f              BGE      |L1.8714|
;;;3925   		{
;;;3926   		bps[in]._umin_av_cnt++;
0021ca  f1010101          ADD      r1,r1,#1
0021ce  b208              SXTH     r0,r1
0021d0  f8a4004a          STRH     r0,[r4,#0x4a]
;;;3927   		if(bps[in]._umin_av_cnt>=10)
0021d4  280a              CMP      r0,#0xa
0021d6  db18              BLT      |L1.8714|
;;;3928   			{ 
;;;3929   			bps[in]._umin_av_cnt=10;
0021d8  f8a4704a          STRH     r7,[r4,#0x4a]
;;;3930   			if(!(bps[in]._av&(1<<2)))avar_bps_hndl(in,2,1);
0021dc  7860              LDRB     r0,[r4,#1]
0021de  0740              LSLS     r0,r0,#29
0021e0  d413              BMI      |L1.8714|
0021e2  2201              MOVS     r2,#1
0021e4  2102              MOVS     r1,#2
0021e6  4630              MOV      r0,r6
0021e8  f7fffffe          BL       avar_bps_hndl
0021ec  e00d              B        |L1.8714|
                  |L1.8686|
;;;3931   		  	/*	if((K[APV]!=ON)||((apv_cnt[in,0]==0)&&(apv_cnt[in,1]==0)&&(apv_cnt[in,2]==0)&&(apv_flags[in]==afOFF)))avar_s_hndl(in,2,1);
;;;3932   			if((apv_cnt[in,0]==0)&&(apv_cnt[in,1]==0)&&(apv_cnt[in,2]==0)&&(apv_flags[in]==afON))
;;;3933   				{
;;;3934   				apv_cnt[in,0]=APV_INIT;
;;;3935   				apv_cnt[in,1]=APV_INIT;
;;;3936   				apv_cnt[in,2]=APV_INIT;
;;;3937   				apv_flags[in]=afOFF;
;;;3938   				}*/				
;;;3939   			}
;;;3940   		} 
;;;3941   	}	
;;;3942   	
;;;3943   else if(!(temp&(1<<AVUMIN)))
;;;3944   	{
;;;3945   	if(bps[in]._umin_av_cnt) 
0021ee  f9b4004a          LDRSH    r0,[r4,#0x4a]
0021f2  b150              CBZ      r0,|L1.8714|
;;;3946   		{
;;;3947   		bps[in]._umin_av_cnt--;
0021f4  f1a00001          SUB      r0,r0,#1
0021f8  b200              SXTH     r0,r0
0021fa  f8a4004a          STRH     r0,[r4,#0x4a]
;;;3948   		if(bps[in]._umin_av_cnt==0)
0021fe  b920              CBNZ     r0,|L1.8714|
;;;3949   			{
;;;3950   			bps[in]._umin_av_cnt=0;
;;;3951   			avar_bps_hndl(in,2,0);
002200  2200              MOVS     r2,#0
002202  2102              MOVS     r1,#2
002204  4630              MOV      r0,r6
002206  f7fffffe          BL       avar_bps_hndl
                  |L1.8714|
;;;3952   		//	apv_cnt[in,0]=0;
;;;3953   		//	apv_cnt[in,1]=0;
;;;3954   		//	apv_cnt[in,2]=0;
;;;3955   			}
;;;3956   		}
;;;3957   	else if(bps[in]._umin_av_cnt>10)bps[in]._umin_av_cnt--;	 
;;;3958   	}
;;;3959   
;;;3960   //bps[in]._state=bsOFF;
;;;3961   
;;;3962   if (bps[in]._av&0x0f)					bps[in]._state=bsAV;
00220a  7860              LDRB     r0,[r4,#1]
00220c  0700              LSLS     r0,r0,#28
00220e  d003              BEQ      |L1.8728|
002210  f04f0004          MOV      r0,#4
002214  70a0              STRB     r0,[r4,#2]
002216  e017              B        |L1.8776|
                  |L1.8728|
;;;3963   else if ( (net_av) && (bps[in]._cnt>20)/*&& 
002218  48fa              LDR      r0,|L1.9732|
00221a  7800              LDRB     r0,[r0,#0]  ; net_av
00221c  b130              CBZ      r0,|L1.8748|
00221e  78e0              LDRB     r0,[r4,#3]
002220  2814              CMP      r0,#0x14
002222  d903              BLS      |L1.8748|
;;;3964   		(bps[in]._Uii<200)*/)				bps[in]._state=bsOFF_AV_NET;
002224  f04f0005          MOV      r0,#5
002228  70a0              STRB     r0,[r4,#2]
00222a  e00d              B        |L1.8776|
                  |L1.8748|
;;;3965   else if (bps[in]._flags_tm&BIN8(100000))	bps[in]._state=bsRDY;
00222c  f8940042          LDRB     r0,[r4,#0x42]
002230  0680              LSLS     r0,r0,#26
002232  d503              BPL      |L1.8764|
002234  f04f0002          MOV      r0,#2
002238  70a0              STRB     r0,[r4,#2]
00223a  e005              B        |L1.8776|
                  |L1.8764|
;;;3966   else if (bps[in]._cnt<20)				bps[in]._state=bsWRK;
00223c  78e0              LDRB     r0,[r4,#3]
00223e  2814              CMP      r0,#0x14
002240  d202              BCS      |L1.8776|
002242  f04f0001          MOV      r0,#1
002246  70a0              STRB     r0,[r4,#2]
                  |L1.8776|
;;;3967   
;;;3968   
;;;3969   
;;;3970   //else if(bps[in]._flags_tm&BIN8(100000)) bps[in]._state=ssBL;
;;;3971   //else if((!(bps[in]._flags_tm&BIN8(100000)))&&(net_U>100))bps[in]._state=ssWRK;
;;;3972   //else bps[0]._state=ssNOT;
;;;3973   
;;;3974   //bps[in]._is_ready=0;
;;;3975   //bps[in]._is_wrk=0;
;;;3976   //if(bps[in]._av_net) bps[in]._flags_bp='N';//  
;;;3977   //else if(bps[in]._av_u_max) bps[in]._flags_bp='P';//  (u_.av_.bAS1T)) bps_state[0]=ssAV;
;;;3978   //else if(bps[in]._av_u_min) bps[in]._flags_bp='M';//  
;;;3979   //else if(bps[in]._av_temper) bps[in]._flags_bp='T';// 
;;;3980   //else if(bps[in]._flags_tm&BIN8(100000)) 
;;;3981   //	{
;;;3982   //	bps[in]._flags_bp='B';// 
;;;3983   //	bps[in]._is_ready=1;
;;;3984   //	}
;;;3985   //else if((!(bps[in]._flags_tm&BIN8(100000)))&&(net_U>100))
;;;3986   //     {
;;;3987   //     bps[in]._flags_bp='W';// 
;;;3988   //     bps[in]._is_ready=1;
;;;3989   //     bps[in]._is_wrk=1;
;;;3990        
;;;3991   //     }
;;;3992   //else bps[in]._is_ready=1;     
;;;3993   
;;;3994   
;;;3995   
;;;3996   
;;;3997   
;;;3998   /*
;;;3999   bps[in]._flags_tu&=BIN8(11111110);
;;;4000   if(bps[in]._ist_blok_cnt)
;;;4001   	{
;;;4002   	bps[in]._ist_blok_cnt--;
;;;4003   	bps[in]._flags_tu|=BIN8(1);
;;;4004   	}
;;;4005   
;;;4006   	   */ 
;;;4007   
;;;4008   //    
;;;4009   if(bps[in]._cnt>=10) bps[in]._flags_tu|=BIN8(10000000);
002248  78e0              LDRB     r0,[r4,#3]
00224a  280a              CMP      r0,#0xa
00224c  d306              BCC      |L1.8796|
00224e  f894002c          LDRB     r0,[r4,#0x2c]
002252  f0400080          ORR      r0,r0,#0x80
002256  f884002c          STRB     r0,[r4,#0x2c]
00225a  e005              B        |L1.8808|
                  |L1.8796|
;;;4010   else bps[in]._flags_tu&=BIN8(1111111);
00225c  f894002c          LDRB     r0,[r4,#0x2c]
002260  f000007f          AND      r0,r0,#0x7f
002264  f884002c          STRB     r0,[r4,#0x2c]
                  |L1.8808|
;;;4011   	
;;;4012   bps[in]._vol_u=cntrl_stat+bps[in]._x_;	
002268  49e7              LDR      r1,|L1.9736|
00226a  f9b40050          LDRSH    r0,[r4,#0x50]
00226e  f9b1101a          LDRSH    r1,[r1,#0x1a]  ; cntrl_stat
002272  4408              ADD      r0,r0,r1
002274  6320              STR      r0,[r4,#0x30]
;;;4013   bps[in]._vol_i=1000; 
002276  f44f707a          MOV      r0,#0x3e8
00227a  6360              STR      r0,[r4,#0x34]
                  |L1.8828|
;;;4014   }
00227c  e58a              B        |L1.7572|
;;;4015   
                          ENDP

                  avt_hndl PROC
;;;4016   //-----------------------------------------------
;;;4017   void avt_hndl(void)
00227e  b570              PUSH     {r4-r6,lr}
;;;4018   {
;;;4019   char i;
;;;4020   for(i=0;i<12;i++)
002280  f04f0000          MOV      r0,#0
;;;4021   	{
;;;4022   	if(eb2_data_short[6]&(1<<i))
002284  49e1              LDR      r1,|L1.9740|
;;;4023   		{
;;;4024   		avt_stat[i]=avtON;
002286  4de2              LDR      r5,|L1.9744|
002288  f04f0401          MOV      r4,#1                 ;4022
00228c  f9b1200c          LDRSH    r2,[r1,#0xc]          ;4022
002290  4603              MOV      r3,r0                 ;4020
                  |L1.8850|
002292  fa04f100          LSL      r1,r4,r0              ;4022
002296  420a              TST      r2,r1                 ;4022
002298  d001              BEQ      |L1.8862|
00229a  542c              STRB     r4,[r5,r0]
00229c  e000              B        |L1.8864|
                  |L1.8862|
;;;4025   		}
;;;4026   	else avt_stat[i]=avtOFF;
00229e  542b              STRB     r3,[r5,r0]
                  |L1.8864|
0022a0  f1000001          ADD      r0,r0,#1              ;4020
0022a4  b2c0              UXTB     r0,r0                 ;4020
0022a6  280c              CMP      r0,#0xc               ;4020
0022a8  d3f3              BCC      |L1.8850|
;;;4027   	}
;;;4028   
;;;4029   if((avt_stat_old[0]!=avt_stat[0])&&(NUMAVT>=1))
0022aa  4eda              LDR      r6,|L1.9748|
0022ac  7828              LDRB     r0,[r5,#0]  ; avt_stat
0022ae  4cda              LDR      r4,|L1.9752|
0022b0  7831              LDRB     r1,[r6,#0]  ; avt_stat_old
0022b2  4281              CMP      r1,r0
0022b4  d00b              BEQ      |L1.8910|
0022b6  f9b41000          LDRSH    r1,[r4,#0]  ; NUMAVT
0022ba  2901              CMP      r1,#1
0022bc  db07              BLT      |L1.8910|
;;;4030   	{
;;;4031   	if(avt_stat[0]==avtON) 	snmp_trap_send("Avtomat #1 is ON ",11,1,1);
0022be  2801              CMP      r0,#1
0022c0  d07e              BEQ      |L1.9152|
;;;4032   	else 				snmp_trap_send("Avtomat #1 is OFF",11,1,0);
0022c2  2300              MOVS     r3,#0
0022c4  2201              MOVS     r2,#1
0022c6  210b              MOVS     r1,#0xb
0022c8  a0d4              ADR      r0,|L1.9756|
0022ca  f7fffffe          BL       snmp_trap_send
                  |L1.8910|
;;;4033   	}
;;;4034   if((avt_stat_old[1]!=avt_stat[1])&&(NUMAVT>=2))
0022ce  7871              LDRB     r1,[r6,#1]  ; avt_stat_old
0022d0  7868              LDRB     r0,[r5,#1]  ; avt_stat
0022d2  4281              CMP      r1,r0
0022d4  d00b              BEQ      |L1.8942|
0022d6  f9b41000          LDRSH    r1,[r4,#0]  ; NUMAVT
0022da  2902              CMP      r1,#2
0022dc  db07              BLT      |L1.8942|
;;;4035   	{
;;;4036   	if(avt_stat[1]==avtON) 	snmp_trap_send("Avtomat #2 is ON ",11,2,1);
0022de  2801              CMP      r0,#1
0022e0  d06f              BEQ      |L1.9154|
;;;4037   	else 				snmp_trap_send("Avtomat #2 is OFF",11,2,0);
0022e2  2300              MOVS     r3,#0
0022e4  2202              MOVS     r2,#2
0022e6  210b              MOVS     r1,#0xb
0022e8  a0d1              ADR      r0,|L1.9776|
0022ea  f7fffffe          BL       snmp_trap_send
                  |L1.8942|
;;;4038   	}
;;;4039   if((avt_stat_old[2]!=avt_stat[2])&&(NUMAVT>=3))
0022ee  78b1              LDRB     r1,[r6,#2]  ; avt_stat_old
0022f0  78a8              LDRB     r0,[r5,#2]  ; avt_stat
0022f2  4281              CMP      r1,r0
0022f4  d00b              BEQ      |L1.8974|
0022f6  f9b41000          LDRSH    r1,[r4,#0]  ; NUMAVT
0022fa  2903              CMP      r1,#3
0022fc  db07              BLT      |L1.8974|
;;;4040   	{
;;;4041   	if(avt_stat[2]==avtON) 	snmp_trap_send("Avtomat #3 is ON ",11,3,1);
0022fe  2801              CMP      r0,#1
002300  d072              BEQ      |L1.9192|
;;;4042   	else 				snmp_trap_send("Avtomat #3 is OFF",11,3,0);
002302  2300              MOVS     r3,#0
002304  2203              MOVS     r2,#3
002306  210b              MOVS     r1,#0xb
002308  a0ce              ADR      r0,|L1.9796|
00230a  f7fffffe          BL       snmp_trap_send
                  |L1.8974|
;;;4043   	}
;;;4044   if((avt_stat_old[3]!=avt_stat[3])&&(NUMAVT>=4))
00230e  78f1              LDRB     r1,[r6,#3]  ; avt_stat_old
002310  78e8              LDRB     r0,[r5,#3]  ; avt_stat
002312  4281              CMP      r1,r0
002314  d00b              BEQ      |L1.9006|
002316  f9b41000          LDRSH    r1,[r4,#0]  ; NUMAVT
00231a  2904              CMP      r1,#4
00231c  db07              BLT      |L1.9006|
;;;4045   	{
;;;4046   	if(avt_stat[3]==avtON) 	snmp_trap_send("Avtomat #4 is ON ",11,4,1);
00231e  2801              CMP      r0,#1
002320  d079              BEQ      |L1.9238|
;;;4047   	else 				snmp_trap_send("Avtomat #4 is OFF",11,4,0);
002322  2300              MOVS     r3,#0
002324  2204              MOVS     r2,#4
002326  210b              MOVS     r1,#0xb
002328  a0cb              ADR      r0,|L1.9816|
00232a  f7fffffe          BL       snmp_trap_send
                  |L1.9006|
;;;4048   	}
;;;4049   if((avt_stat_old[4]!=avt_stat[4])&&(NUMAVT>=5))
00232e  7931              LDRB     r1,[r6,#4]  ; avt_stat_old
002330  7928              LDRB     r0,[r5,#4]  ; avt_stat
002332  4281              CMP      r1,r0
002334  d00b              BEQ      |L1.9038|
002336  f9b41000          LDRSH    r1,[r4,#0]  ; NUMAVT
00233a  2905              CMP      r1,#5
00233c  db07              BLT      |L1.9038|
;;;4050   	{
;;;4051   	if(avt_stat[4]==avtON) 	snmp_trap_send("Avtomat #5 is ON ",11,5,1);
00233e  2801              CMP      r0,#1
002340  d071              BEQ      |L1.9254|
;;;4052   	else 				snmp_trap_send("Avtomat #5 is OFF",11,5,0);
002342  2300              MOVS     r3,#0
002344  2205              MOVS     r2,#5
002346  210b              MOVS     r1,#0xb
002348  a0c8              ADR      r0,|L1.9836|
00234a  f7fffffe          BL       snmp_trap_send
                  |L1.9038|
;;;4053   	}
;;;4054   if((avt_stat_old[5]!=avt_stat[5])&&(NUMAVT>=6))
00234e  7971              LDRB     r1,[r6,#5]  ; avt_stat_old
002350  7968              LDRB     r0,[r5,#5]  ; avt_stat
002352  4281              CMP      r1,r0
002354  d00b              BEQ      |L1.9070|
002356  f9b41000          LDRSH    r1,[r4,#0]  ; NUMAVT
00235a  2906              CMP      r1,#6
00235c  db07              BLT      |L1.9070|
;;;4055   	{
;;;4056   	if(avt_stat[5]==avtON) 	snmp_trap_send("Avtomat #6 is ON ",11,6,1);
00235e  2801              CMP      r0,#1
002360  d068              BEQ      |L1.9268|
;;;4057   	else 				snmp_trap_send("Avtomat #6 is OFF",11,6,0);
002362  2300              MOVS     r3,#0
002364  2206              MOVS     r2,#6
002366  210b              MOVS     r1,#0xb
002368  a0c5              ADR      r0,|L1.9856|
00236a  f7fffffe          BL       snmp_trap_send
                  |L1.9070|
;;;4058   	}
;;;4059   if((avt_stat_old[6]!=avt_stat[6])&&(NUMAVT>=7))
00236e  79b1              LDRB     r1,[r6,#6]  ; avt_stat_old
002370  79a8              LDRB     r0,[r5,#6]  ; avt_stat
002372  4281              CMP      r1,r0
002374  d00b              BEQ      |L1.9102|
002376  f9b41000          LDRSH    r1,[r4,#0]  ; NUMAVT
00237a  2907              CMP      r1,#7
00237c  db07              BLT      |L1.9102|
;;;4060   	{
;;;4061   	if(avt_stat[6]==avtON) 	snmp_trap_send("Avtomat #7 is ON ",11,7,1);
00237e  2801              CMP      r0,#1
002380  d05f              BEQ      |L1.9282|
;;;4062   	else 				snmp_trap_send("Avtomat #7 is OFF",11,7,0);
002382  2300              MOVS     r3,#0
002384  2207              MOVS     r2,#7
002386  210b              MOVS     r1,#0xb
002388  a0c2              ADR      r0,|L1.9876|
00238a  f7fffffe          BL       snmp_trap_send
                  |L1.9102|
;;;4063   	}
;;;4064   if((avt_stat_old[7]!=avt_stat[7])&&(NUMAVT>=8))
00238e  79f1              LDRB     r1,[r6,#7]  ; avt_stat_old
002390  79e8              LDRB     r0,[r5,#7]  ; avt_stat
002392  4281              CMP      r1,r0
002394  d00b              BEQ      |L1.9134|
002396  f9b41000          LDRSH    r1,[r4,#0]  ; NUMAVT
00239a  2908              CMP      r1,#8
00239c  db07              BLT      |L1.9134|
;;;4065   	{
;;;4066   	if(avt_stat[7]==avtON) 	snmp_trap_send("Avtomat #8 is ON ",11,8,1);
00239e  2801              CMP      r0,#1
0023a0  d056              BEQ      |L1.9296|
;;;4067   	else 				snmp_trap_send("Avtomat #8 is OFF",11,8,0);
0023a2  2300              MOVS     r3,#0
0023a4  2208              MOVS     r2,#8
0023a6  210b              MOVS     r1,#0xb
0023a8  a0bf              ADR      r0,|L1.9896|
0023aa  f7fffffe          BL       snmp_trap_send
                  |L1.9134|
;;;4068   	}
;;;4069   if((avt_stat_old[8]!=avt_stat[8])&&(NUMAVT>=9))
0023ae  7a31              LDRB     r1,[r6,#8]  ; avt_stat_old
0023b0  7a28              LDRB     r0,[r5,#8]  ; avt_stat
0023b2  4281              CMP      r1,r0
0023b4  d00e              BEQ      |L1.9172|
0023b6  f9b41000          LDRSH    r1,[r4,#0]  ; NUMAVT
0023ba  2909              CMP      r1,#9
0023bc  db0a              BLT      |L1.9172|
;;;4070   	{
;;;4071   	if(avt_stat[8]==avtON) 	snmp_trap_send("Avtomat #9 is ON ",11,9,1);
0023be  e001              B        |L1.9156|
                  |L1.9152|
0023c0  e013              B        |L1.9194|
                  |L1.9154|
0023c2  e019              B        |L1.9208|
                  |L1.9156|
0023c4  2801              CMP      r0,#1
0023c6  d04a              BEQ      |L1.9310|
;;;4072   	else 				snmp_trap_send("Avtomat #9 is OFF",11,9,0);
0023c8  2300              MOVS     r3,#0
0023ca  2209              MOVS     r2,#9
0023cc  210b              MOVS     r1,#0xb
0023ce  a0bb              ADR      r0,|L1.9916|
0023d0  f7fffffe          BL       snmp_trap_send
                  |L1.9172|
;;;4073   	}
;;;4074   
;;;4075   for(i=0;i<12;i++)
0023d4  f04f0000          MOV      r0,#0
                  |L1.9176|
;;;4076   	{
;;;4077   	avt_stat_old[i]=avt_stat[i];
0023d8  5c29              LDRB     r1,[r5,r0]
0023da  5431              STRB     r1,[r6,r0]
0023dc  f1000001          ADD      r0,r0,#1              ;4075
0023e0  b2c0              UXTB     r0,r0                 ;4075
0023e2  280c              CMP      r0,#0xc               ;4075
0023e4  d3f8              BCC      |L1.9176|
                  |L1.9190|
;;;4078   	}
;;;4079   }
0023e6  bd70              POP      {r4-r6,pc}
                  |L1.9192|
0023e8  e00e              B        |L1.9224|
                  |L1.9194|
0023ea  2301              MOVS     r3,#1                 ;4031
0023ec  461a              MOV      r2,r3                 ;4031
0023ee  210b              MOVS     r1,#0xb               ;4031
0023f0  a0b7              ADR      r0,|L1.9936|
0023f2  f7fffffe          BL       snmp_trap_send
0023f6  e76a              B        |L1.8910|
                  |L1.9208|
0023f8  2301              MOVS     r3,#1                 ;4036
0023fa  2202              MOVS     r2,#2                 ;4036
0023fc  210b              MOVS     r1,#0xb               ;4036
0023fe  a0b9              ADR      r0,|L1.9956|
002400  f7fffffe          BL       snmp_trap_send
002404  e773              B        |L1.8942|
002406  e006              B        |L1.9238|
                  |L1.9224|
002408  2301              MOVS     r3,#1                 ;4041
00240a  2203              MOVS     r2,#3                 ;4041
00240c  210b              MOVS     r1,#0xb               ;4041
00240e  a0ba              ADR      r0,|L1.9976|
002410  f7fffffe          BL       snmp_trap_send
002414  e77b              B        |L1.8974|
                  |L1.9238|
002416  2301              MOVS     r3,#1                 ;4046
002418  2204              MOVS     r2,#4                 ;4046
00241a  210b              MOVS     r1,#0xb               ;4046
00241c  a0bb              ADR      r0,|L1.9996|
00241e  f7fffffe          BL       snmp_trap_send
002422  e784              B        |L1.9006|
002424  e7ff              B        |L1.9254|
                  |L1.9254|
002426  2301              MOVS     r3,#1                 ;4051
002428  2205              MOVS     r2,#5                 ;4051
00242a  210b              MOVS     r1,#0xb               ;4051
00242c  a0bc              ADR      r0,|L1.10016|
00242e  f7fffffe          BL       snmp_trap_send
002432  e78c              B        |L1.9038|
                  |L1.9268|
002434  2301              MOVS     r3,#1                 ;4056
002436  2206              MOVS     r2,#6                 ;4056
002438  210b              MOVS     r1,#0xb               ;4056
00243a  a0be              ADR      r0,|L1.10036|
00243c  f7fffffe          BL       snmp_trap_send
002440  e795              B        |L1.9070|
                  |L1.9282|
002442  2301              MOVS     r3,#1                 ;4061
002444  2207              MOVS     r2,#7                 ;4061
002446  210b              MOVS     r1,#0xb               ;4061
002448  a0bf              ADR      r0,|L1.10056|
00244a  f7fffffe          BL       snmp_trap_send
00244e  e79e              B        |L1.9102|
                  |L1.9296|
002450  2301              MOVS     r3,#1                 ;4066
002452  2208              MOVS     r2,#8                 ;4066
002454  210b              MOVS     r1,#0xb               ;4066
002456  a0c1              ADR      r0,|L1.10076|
002458  f7fffffe          BL       snmp_trap_send
00245c  e7a7              B        |L1.9134|
                  |L1.9310|
00245e  2301              MOVS     r3,#1                 ;4071
002460  2209              MOVS     r2,#9                 ;4071
002462  210b              MOVS     r1,#0xb               ;4071
002464  a0c2              ADR      r0,|L1.10096|
002466  f7fffffe          BL       snmp_trap_send
00246a  e7b3              B        |L1.9172|
;;;4080   
                          ENDP

                  bat_hndl PROC
;;;4081   //-----------------------------------------------
;;;4082   void bat_hndl(void)
00246c  b570              PUSH     {r4-r6,lr}
;;;4083   {
;;;4084   /*if(mess_find(_MESS_BAT_MASK_ON))
;;;4085   	{
;;;4086   	if(mess_data[0]==_MESS_BAT_MASK_ON)
;;;4087   		{
;;;4088   		char i;
;;;4089   		for(i=0;i<2;i++)
;;;4090   			{
;;;4091   			if(mess_data[1]&(1<<i))
;;;4092   				{
;;;4093   				bat[i]._cnt_to_block=0;
;;;4094        			bat[i]._rel_stat=0;
;;;4095        			}
;;;4096   			}
;;;4097   		}
;;;4098   	}
;;;4099   if(mess_find(_MESS_BAT_MASK_OFF))
;;;4100   	{		
;;;4101   	if(mess_data[0]==_MESS_BAT_MASK_OFF)
;;;4102   		{
;;;4103   		char i;
;;;4104   		for(i=0;i<2;i++)
;;;4105   			{
;;;4106   			if((mess_data[1]&(1<<i)) && (bat[i]._cnt_to_block==0) && (bat[i]._rel_stat==0))
;;;4107   				{
;;;4108   				bat[i]._cnt_to_block=20;
;;;4109   				bat[i]._rel_stat=1;
;;;4110        			}
;;;4111   			}
;;;4112   		
;;;4113   		}		
;;;4114   	}*/
;;;4115   
;;;4116   if(mess_find_unvol(MESS2BAT_HNDL))
00246e  20c8              MOVS     r0,#0xc8
002470  f7fffffe          BL       mess_find_unvol
;;;4117   	{ 
;;;4118   	char i;
;;;4119   	
;;;4120   	if(mess_data[0]==PARAM_BAT_ALL_OFF_AFTER_2SEC)
;;;4121   		{
;;;4122   		for(i=0;i<MAX_NUM_OF_BAT;i++)
;;;4123   			{
;;;4124   			if(bat[i]._cnt_to_block<50)bat[i]._cnt_to_block++;
002474  49c3              LDR      r1,|L1.10116|
002476  2200              MOVS     r2,#0                 ;4122
002478  b3a8              CBZ      r0,|L1.9446|
00247a  4bc3              LDR      r3,|L1.10120|
;;;4125   			}
;;;4126   		}
;;;4127   
;;;4128   	else if(mess_data[0]==PARAM_BAT_MASK_OFF_AFTER_2SEC)
;;;4129   		{
;;;4130   		for(i=0;i<MAX_NUM_OF_BAT;i++)
;;;4131   			{
;;;4132   			if(mess_data[1]&(1<<i))
00247c  2401              MOVS     r4,#1
00247e  6818              LDR      r0,[r3,#0]            ;4120  ; mess_data
002480  28c9              CMP      r0,#0xc9              ;4120
002482  d01c              BEQ      |L1.9406|
002484  28ca              CMP      r0,#0xca              ;4128
002486  d02f              BEQ      |L1.9448|
;;;4133   				{
;;;4134   				if(bat[i]._cnt_to_block<50) bat[i]._cnt_to_block++;
;;;4135   				}
;;;4136   			else bat[i]._cnt_to_block=0;
;;;4137   			}
;;;4138   		}
;;;4139   	else 
;;;4140   	 	{
;;;4141   		for(i=0;i<MAX_NUM_OF_BAT;i++)
002488  4610              MOV      r0,r2
                  |L1.9354|
;;;4142   			{
;;;4143   			bat[i]._cnt_to_block=0;
00248a  eb000340          ADD      r3,r0,r0,LSL #1
00248e  eb031300          ADD      r3,r3,r0,LSL #4
002492  f8012023          STRB     r2,[r1,r3,LSL #2]
002496  f1000001          ADD      r0,r0,#1              ;4141
00249a  b2c0              UXTB     r0,r0                 ;4141
00249c  2802              CMP      r0,#2                 ;4141
00249e  d3f4              BCC      |L1.9354|
                  |L1.9376|
;;;4144   			}
;;;4145   
;;;4146   		}
;;;4147   	for(i=0;i<MAX_NUM_OF_BAT;i++)
0024a0  f04f0000          MOV      r0,#0
                  |L1.9380|
;;;4148   		{
;;;4149   		if(bat[i]._cnt_to_block>20)bat[i]._rel_stat=1;
0024a4  eb000340          ADD      r3,r0,r0,LSL #1
0024a8  eb031300          ADD      r3,r3,r0,LSL #4
0024ac  f8115023          LDRB     r5,[r1,r3,LSL #2]
0024b0  2d14              CMP      r5,#0x14
0024b2  d939              BLS      |L1.9512|
0024b4  eb010383          ADD      r3,r1,r3,LSL #2
0024b8  f883403c          STRB     r4,[r3,#0x3c]
0024bc  e038              B        |L1.9520|
                  |L1.9406|
0024be  f04f0000          MOV      r0,#0                 ;4122
                  |L1.9410|
0024c2  eb000340          ADD      r3,r0,r0,LSL #1       ;4124
0024c6  eb031500          ADD      r5,r3,r0,LSL #4       ;4124
0024ca  f8113025          LDRB     r3,[r1,r5,LSL #2]     ;4124
0024ce  2b32              CMP      r3,#0x32              ;4124
0024d0  d203              BCS      |L1.9434|
0024d2  f1030301          ADD      r3,r3,#1              ;4124
0024d6  f8013025          STRB     r3,[r1,r5,LSL #2]     ;4124
                  |L1.9434|
0024da  f1000001          ADD      r0,r0,#1              ;4122
0024de  b2c0              UXTB     r0,r0                 ;4122
0024e0  2802              CMP      r0,#2                 ;4122
0024e2  d3ee              BCC      |L1.9410|
0024e4  e7dc              B        |L1.9376|
                  |L1.9446|
0024e6  e029              B        |L1.9532|
                  |L1.9448|
0024e8  f04f0000          MOV      r0,#0                 ;4130
0024ec  685e              LDR      r6,[r3,#4]            ;4132
                  |L1.9454|
0024ee  fa04f300          LSL      r3,r4,r0              ;4132
0024f2  421e              TST      r6,r3                 ;4132
0024f4  d00c              BEQ      |L1.9488|
0024f6  eb000340          ADD      r3,r0,r0,LSL #1       ;4134
0024fa  eb031500          ADD      r5,r3,r0,LSL #4       ;4134
0024fe  f8113025          LDRB     r3,[r1,r5,LSL #2]     ;4134
002502  2b32              CMP      r3,#0x32              ;4134
002504  d20a              BCS      |L1.9500|
002506  f1030301          ADD      r3,r3,#1              ;4134
00250a  f8013025          STRB     r3,[r1,r5,LSL #2]     ;4134
00250e  e005              B        |L1.9500|
                  |L1.9488|
002510  eb000340          ADD      r3,r0,r0,LSL #1       ;4136
002514  eb031300          ADD      r3,r3,r0,LSL #4       ;4136
002518  f8012023          STRB     r2,[r1,r3,LSL #2]     ;4136
                  |L1.9500|
00251c  f1000001          ADD      r0,r0,#1              ;4130
002520  b2c0              UXTB     r0,r0                 ;4130
002522  2802              CMP      r0,#2                 ;4130
002524  d3e3              BCC      |L1.9454|
002526  e7bb              B        |L1.9376|
                  |L1.9512|
;;;4150   		else bat[i]._rel_stat=0;
002528  eb010383          ADD      r3,r1,r3,LSL #2
00252c  f883203c          STRB     r2,[r3,#0x3c]
                  |L1.9520|
002530  f1000001          ADD      r0,r0,#1              ;4147
002534  b2c0              UXTB     r0,r0                 ;4147
002536  2802              CMP      r0,#2                 ;4147
002538  d3b4              BCC      |L1.9380|
;;;4151   		}
;;;4152   
;;;4153   	}
;;;4154   
;;;4155   else 
;;;4156   	{
;;;4157   	char i;
;;;4158   	for(i=0;i<MAX_NUM_OF_BAT;i++)
;;;4159   		{
;;;4160   		bat[i]._cnt_to_block=0;
;;;4161   		bat[i]._rel_stat=0;
;;;4162   		}
;;;4163   
;;;4164   	}
;;;4165   
;;;4166   /*if(mess_find_unvol(MESS2BAT_HNDL1))
;;;4167   	{
;;;4168   	if(PARAM_BAT_ON)
;;;4169   		{
;;;4170   		char i;
;;;4171   		for(i=0;i<MAX_NUM_OF_BAT;i++)
;;;4172   			{
;;;4173   			if(mess_data[1]&(1<<i))
;;;4174   				{
;;;4175   				bat[i]._cnt_to_block=0;
;;;4176   				bat[i]._rel_stat=0;
;;;4177   				}
;;;4178   			}
;;;4179   		}
;;;4180   	} */
;;;4181   }
00253a  e754              B        |L1.9190|
                  |L1.9532|
00253c  f04f0000          MOV      r0,#0                 ;4158
                  |L1.9536|
002540  eb000340          ADD      r3,r0,r0,LSL #1       ;4160
002544  eb031300          ADD      r3,r3,r0,LSL #4       ;4160
002548  f8012023          STRB     r2,[r1,r3,LSL #2]     ;4160
00254c  eb010383          ADD      r3,r1,r3,LSL #2       ;4161
002550  f883203c          STRB     r2,[r3,#0x3c]         ;4161
002554  f1000001          ADD      r0,r0,#1              ;4158
002558  b2c0              UXTB     r0,r0                 ;4158
00255a  2802              CMP      r0,#2                 ;4158
00255c  d3f0              BCC      |L1.9536|
00255e  e742              B        |L1.9190|
;;;4182   
                          ENDP

                  klimat_hndl PROC
;;;4250   //-----------------------------------------------
;;;4251   void klimat_hndl(void)
002560  e92d41f0          PUSH     {r4-r8,lr}
;;;4252   {
;;;4253   
;;;4254   
;;;4255   if(t_box>TBOXMAX)
002564  4d89              LDR      r5,|L1.10124|
002566  488a              LDR      r0,|L1.10128|
;;;4256   	{
;;;4257   	av_tbox_cnt++;
002568  4c8a              LDR      r4,|L1.10132|
00256a  f9b51000          LDRSH    r1,[r5,#0]            ;4255  ; t_box
00256e  f9b02000          LDRSH    r2,[r0,#0]            ;4255  ; TBOXMAX
002572  f9b40000          LDRSH    r0,[r4,#0]
002576  4291              CMP      r1,r2                 ;4255
002578  dd03              BLE      |L1.9602|
00257a  f1000001          ADD      r0,r0,#1
00257e  8020              STRH     r0,[r4,#0]
002580  e003              B        |L1.9610|
                  |L1.9602|
;;;4258   	} 
;;;4259   else if(t_box<TBOXMAX)
002582  da02              BGE      |L1.9610|
;;;4260   	{
;;;4261   	av_tbox_cnt--;
002584  f1a00001          SUB      r0,r0,#1
002588  8020              STRH     r0,[r4,#0]
                  |L1.9610|
;;;4262   	}
;;;4263   gran(&av_tbox_cnt,0,6);
00258a  2206              MOVS     r2,#6
00258c  2100              MOVS     r1,#0
00258e  4881              LDR      r0,|L1.10132|
002590  f7fffffe          BL       gran
;;;4264   
;;;4265   if(av_tbox_cnt>5)
002594  f9b40000          LDRSH    r0,[r4,#0]  ; av_tbox_cnt
;;;4266   	{
;;;4267   	av_tbox_stat=atsON;
002598  497f              LDR      r1,|L1.10136|
00259a  2601              MOVS     r6,#1
00259c  2805              CMP      r0,#5                 ;4265
00259e  dd00              BLE      |L1.9634|
0025a0  700e              STRB     r6,[r1,#0]
                  |L1.9634|
0025a2  2400              MOVS     r4,#0                 ;4263
;;;4268   	}
;;;4269   if(av_tbox_cnt<1)
0025a4  2801              CMP      r0,#1
0025a6  da00              BGE      |L1.9642|
;;;4270   	{
;;;4271   	av_tbox_stat=atsOFF;
0025a8  700c              STRB     r4,[r1,#0]
                  |L1.9642|
;;;4272   	}
;;;4273   
;;;4274   if(t_box<(TBOXREG-2))
0025aa  497c              LDR      r1,|L1.10140|
0025ac  f9b50000          LDRSH    r0,[r5,#0]  ; t_box
;;;4275   	{
;;;4276   	if(t_box_cnt<30)
0025b0  4a7b              LDR      r2,|L1.10144|
0025b2  f9b11000          LDRSH    r1,[r1,#0]            ;4274  ; TBOXREG
;;;4277   		{
;;;4278   		t_box_cnt++;
;;;4279   		if(t_box_cnt>=30)
;;;4280   			{
;;;4281   			main_vent_pos--;
0025b6  4f7b              LDR      r7,|L1.10148|
0025b8  1e8b              SUBS     r3,r1,#2              ;4274
0025ba  4298              CMP      r0,r3                 ;4274
0025bc  da0f              BGE      |L1.9694|
0025be  f9921000          LDRSB    r1,[r2,#0]            ;4276  ; t_box_cnt
0025c2  291e              CMP      r1,#0x1e              ;4276
0025c4  da0a              BGE      |L1.9692|
0025c6  f1010101          ADD      r1,r1,#1              ;4278
0025ca  b249              SXTB     r1,r1                 ;4278
0025cc  7011              STRB     r1,[r2,#0]            ;4278
0025ce  291e              CMP      r1,#0x1e              ;4279
0025d0  db04              BLT      |L1.9692|
0025d2  8839              LDRH     r1,[r7,#0]  ; main_vent_pos
0025d4  f1a10101          SUB      r1,r1,#1
0025d8  8039              STRH     r1,[r7,#0]
;;;4282   			t_box_cnt=0;
0025da  7014              STRB     r4,[r2,#0]
                  |L1.9692|
0025dc  e0e5              B        |L1.10154|
                  |L1.9694|
;;;4283   			}
;;;4284   		}
;;;4285   	}
;;;4286   else if(t_box>(TBOXREG))
0025de  4288              CMP      r0,r1
0025e0  dd0f              BLE      |L1.9730|
;;;4287   	{
;;;4288   	if(t_box_cnt<30)
0025e2  f9921000          LDRSB    r1,[r2,#0]  ; t_box_cnt
0025e6  291e              CMP      r1,#0x1e
0025e8  da0a              BGE      |L1.9728|
;;;4289   		{
;;;4290   		t_box_cnt++;
0025ea  f1010101          ADD      r1,r1,#1
0025ee  b249              SXTB     r1,r1
0025f0  7011              STRB     r1,[r2,#0]
;;;4291   		if(t_box_cnt>=30)
0025f2  291e              CMP      r1,#0x1e
0025f4  db04              BLT      |L1.9728|
;;;4292   			{
;;;4293   			main_vent_pos++;
0025f6  8839              LDRH     r1,[r7,#0]  ; main_vent_pos
0025f8  f1010101          ADD      r1,r1,#1
0025fc  8039              STRH     r1,[r7,#0]
;;;4294   			t_box_cnt=0;
0025fe  7014              STRB     r4,[r2,#0]
                  |L1.9728|
002600  e0d3              B        |L1.10154|
                  |L1.9730|
002602  e0d1              B        |L1.10152|
                  |L1.9732|
                          DCD      net_av
                  |L1.9736|
                          DCD      ||area_number.21||
                  |L1.9740|
                          DCD      eb2_data_short
                  |L1.9744|
                          DCD      avt_stat
                  |L1.9748|
                          DCD      avt_stat_old
                  |L1.9752|
                          DCD      NUMAVT
                  |L1.9756|
00261c  4176746f          DCB      "Avtomat #1 is OFF",0
002620  6d617420
002624  23312069
002628  73204f46
00262c  4600    
00262e  00                DCB      0
00262f  00                DCB      0
                  |L1.9776|
002630  4176746f          DCB      "Avtomat #2 is OFF",0
002634  6d617420
002638  23322069
00263c  73204f46
002640  4600    
002642  00                DCB      0
002643  00                DCB      0
                  |L1.9796|
002644  4176746f          DCB      "Avtomat #3 is OFF",0
002648  6d617420
00264c  23332069
002650  73204f46
002654  4600    
002656  00                DCB      0
002657  00                DCB      0
                  |L1.9816|
002658  4176746f          DCB      "Avtomat #4 is OFF",0
00265c  6d617420
002660  23342069
002664  73204f46
002668  4600    
00266a  00                DCB      0
00266b  00                DCB      0
                  |L1.9836|
00266c  4176746f          DCB      "Avtomat #5 is OFF",0
002670  6d617420
002674  23352069
002678  73204f46
00267c  4600    
00267e  00                DCB      0
00267f  00                DCB      0
                  |L1.9856|
002680  4176746f          DCB      "Avtomat #6 is OFF",0
002684  6d617420
002688  23362069
00268c  73204f46
002690  4600    
002692  00                DCB      0
002693  00                DCB      0
                  |L1.9876|
002694  4176746f          DCB      "Avtomat #7 is OFF",0
002698  6d617420
00269c  23372069
0026a0  73204f46
0026a4  4600    
0026a6  00                DCB      0
0026a7  00                DCB      0
                  |L1.9896|
0026a8  4176746f          DCB      "Avtomat #8 is OFF",0
0026ac  6d617420
0026b0  23382069
0026b4  73204f46
0026b8  4600    
0026ba  00                DCB      0
0026bb  00                DCB      0
                  |L1.9916|
0026bc  4176746f          DCB      "Avtomat #9 is OFF",0
0026c0  6d617420
0026c4  23392069
0026c8  73204f46
0026cc  4600    
0026ce  00                DCB      0
0026cf  00                DCB      0
                  |L1.9936|
0026d0  4176746f          DCB      "Avtomat #1 is ON ",0
0026d4  6d617420
0026d8  23312069
0026dc  73204f4e
0026e0  2000    
0026e2  00                DCB      0
0026e3  00                DCB      0
                  |L1.9956|
0026e4  4176746f          DCB      "Avtomat #2 is ON ",0
0026e8  6d617420
0026ec  23322069
0026f0  73204f4e
0026f4  2000    
0026f6  00                DCB      0
0026f7  00                DCB      0
                  |L1.9976|
0026f8  4176746f          DCB      "Avtomat #3 is ON ",0
0026fc  6d617420
002700  23332069
002704  73204f4e
002708  2000    
00270a  00                DCB      0
00270b  00                DCB      0
                  |L1.9996|
00270c  4176746f          DCB      "Avtomat #4 is ON ",0
002710  6d617420
002714  23342069
002718  73204f4e
00271c  2000    
00271e  00                DCB      0
00271f  00                DCB      0
                  |L1.10016|
002720  4176746f          DCB      "Avtomat #5 is ON ",0
002724  6d617420
002728  23352069
00272c  73204f4e
002730  2000    
002732  00                DCB      0
002733  00                DCB      0
                  |L1.10036|
002734  4176746f          DCB      "Avtomat #6 is ON ",0
002738  6d617420
00273c  23362069
002740  73204f4e
002744  2000    
002746  00                DCB      0
002747  00                DCB      0
                  |L1.10056|
002748  4176746f          DCB      "Avtomat #7 is ON ",0
00274c  6d617420
002750  23372069
002754  73204f4e
002758  2000    
00275a  00                DCB      0
00275b  00                DCB      0
                  |L1.10076|
00275c  4176746f          DCB      "Avtomat #8 is ON ",0
002760  6d617420
002764  23382069
002768  73204f4e
00276c  2000    
00276e  00                DCB      0
00276f  00                DCB      0
                  |L1.10096|
002770  4176746f          DCB      "Avtomat #9 is ON ",0
002774  6d617420
002778  23392069
00277c  73204f4e
002780  2000    
002782  00                DCB      0
002783  00                DCB      0
                  |L1.10116|
                          DCD      bat
                  |L1.10120|
                          DCD      mess_data
                  |L1.10124|
                          DCD      t_box
                  |L1.10128|
                          DCD      TBOXMAX
                  |L1.10132|
                          DCD      av_tbox_cnt
                  |L1.10136|
                          DCD      av_tbox_stat
                  |L1.10140|
                          DCD      TBOXREG
                  |L1.10144|
                          DCD      t_box_cnt
                  |L1.10148|
                          DCD      main_vent_pos
                  |L1.10152|
;;;4295   			}
;;;4296   		}
;;;4297   	}
;;;4298   else
;;;4299   	{
;;;4300   	t_box_cnt=0;
0027a8  7014              STRB     r4,[r2,#0]
                  |L1.10154|
;;;4301   	}
;;;4302   
;;;4303   #ifndef UKU_KONTUR
;;;4304   if(t_box>TBOXVENTMAX)gran(&main_vent_pos,0,20); 
0027aa  49fe              LDR      r1,|L1.11172|
0027ac  f9b11000          LDRSH    r1,[r1,#0]  ; TBOXVENTMAX
0027b0  4288              CMP      r0,r1
0027b2  dd05              BLE      |L1.10176|
0027b4  2214              MOVS     r2,#0x14
0027b6  2100              MOVS     r1,#0
0027b8  48fb              LDR      r0,|L1.11176|
0027ba  f7fffffe          BL       gran
0027be  e007              B        |L1.10192|
                  |L1.10176|
;;;4305   else gran(&main_vent_pos,0,pos_vent+9);
0027c0  48fa              LDR      r0,|L1.11180|
0027c2  2100              MOVS     r1,#0
0027c4  8800              LDRH     r0,[r0,#0]  ; pos_vent
0027c6  3009              ADDS     r0,r0,#9
0027c8  b202              SXTH     r2,r0
0027ca  48f7              LDR      r0,|L1.11176|
0027cc  f7fffffe          BL       gran
                  |L1.10192|
;;;4306   
;;;4307   if((mess_find_unvol(MESS2VENT_HNDL))&&(mess_data[0]==PARAM_VENT_CB))
0027d0  20f0              MOVS     r0,#0xf0
0027d2  f7fffffe          BL       mess_find_unvol
0027d6  b128              CBZ      r0,|L1.10212|
0027d8  48f5              LDR      r0,|L1.11184|
0027da  6801              LDR      r1,[r0,#0]  ; mess_data
0027dc  29f1              CMP      r1,#0xf1
0027de  d101              BNE      |L1.10212|
;;;4308   	{
;;;4309   	main_vent_pos=mess_data[1];
0027e0  6840              LDR      r0,[r0,#4]  ; mess_data
0027e2  8038              STRH     r0,[r7,#0]
                  |L1.10212|
;;;4310   	}
;;;4311   
;;;4312   
;;;4313   if(main_vent_pos<=1)mixer_vent_stat=mvsON;
0027e4  f9b71000          LDRSH    r1,[r7,#0]  ; main_vent_pos
0027e8  48f2              LDR      r0,|L1.11188|
0027ea  2901              CMP      r1,#1
0027ec  dc01              BGT      |L1.10226|
0027ee  7006              STRB     r6,[r0,#0]
0027f0  e000              B        |L1.10228|
                  |L1.10226|
;;;4314   else mixer_vent_stat=mvsOFF;
0027f2  7004              STRB     r4,[r0,#0]
                  |L1.10228|
;;;4315   #endif
;;;4316   
;;;4317   #ifdef UKU_KONTUR
;;;4318   
;;;4319   if(t_box>TBOXVENTON) t_box_vent_on_cnt++;
;;;4320   else if(t_box<TBOXVENTOFF) t_box_vent_on_cnt--;
;;;4321   gran(&t_box_vent_on_cnt,0,10);
;;;4322   
;;;4323   if(t_box_vent_on_cnt>9) vent_stat_k=vsON;
;;;4324   else if(t_box_vent_on_cnt<1) vent_stat_k=vsOFF;
;;;4325   
;;;4326   if(t_box<TBOXWARMON) t_box_warm_on_cnt++;
;;;4327   else if(t_box>TBOXWARMOFF) t_box_warm_on_cnt--;
;;;4328   gran(&t_box_warm_on_cnt,0,10);
;;;4329   
;;;4330   if(t_box_warm_on_cnt>9) warm_stat_k=wsON;
;;;4331   else if(t_box_warm_on_cnt<1) warm_stat_k=wsOFF;
;;;4332   
;;;4333   #endif
;;;4334   
;;;4335   if((TBATDISABLE>=50) && (TBATDISABLE<=90))
0027f4  48f0              LDR      r0,|L1.11192|
;;;4336   	{
;;;4337   	if(t_box>TBATDISABLE)
;;;4338   		{
;;;4339   		tbatdisable_cnt++;
;;;4340   		}
;;;4341   	if(t_box<TBATENABLE)
;;;4342   		{
;;;4343   		tbatdisable_cnt--;
;;;4344   		}
;;;4345   	gran(&tbatdisable_cnt,0,6);
;;;4346   
;;;4347   	if(tbatdisable_cnt>5)
;;;4348   		{
;;;4349   		tbatdisable_stat=tbdsOFF;
0027f6  f8df83c4          LDR      r8,|L1.11196|
0027fa  f9b00000          LDRSH    r0,[r0,#0]            ;4335  ; TBATDISABLE
0027fe  f1a00132          SUB      r1,r0,#0x32           ;4335
002802  2928              CMP      r1,#0x28              ;4335
002804  d821              BHI      |L1.10314|
002806  f9b51000          LDRSH    r1,[r5,#0]            ;4337  ; t_box
00280a  4fed              LDR      r7,|L1.11200|
00280c  4281              CMP      r1,r0                 ;4337
00280e  dd03              BLE      |L1.10264|
002810  8838              LDRH     r0,[r7,#0]            ;4339  ; tbatdisable_cnt
002812  f1000001          ADD      r0,r0,#1              ;4339
002816  8038              STRH     r0,[r7,#0]            ;4339
                  |L1.10264|
002818  48ea              LDR      r0,|L1.11204|
00281a  f9b00000          LDRSH    r0,[r0,#0]            ;4341  ; TBATENABLE
00281e  4281              CMP      r1,r0                 ;4341
002820  da03              BGE      |L1.10282|
002822  8838              LDRH     r0,[r7,#0]            ;4343  ; tbatdisable_cnt
002824  f1a00001          SUB      r0,r0,#1              ;4343
002828  8038              STRH     r0,[r7,#0]            ;4343
                  |L1.10282|
00282a  2206              MOVS     r2,#6                 ;4345
00282c  2100              MOVS     r1,#0                 ;4345
00282e  48e4              LDR      r0,|L1.11200|
002830  f7fffffe          BL       gran
002834  f9b70000          LDRSH    r0,[r7,#0]            ;4347  ; tbatdisable_cnt
002838  2805              CMP      r0,#5                 ;4347
00283a  dd01              BLE      |L1.10304|
00283c  f8886000          STRB     r6,[r8,#0]
                  |L1.10304|
;;;4350   		}
;;;4351   	if(tbatdisable_cnt<1)
002840  2801              CMP      r0,#1
002842  da04              BGE      |L1.10318|
;;;4352   		{
;;;4353   		tbatdisable_stat=tbdsON;
002844  f8884000          STRB     r4,[r8,#0]
002848  e001              B        |L1.10318|
                  |L1.10314|
;;;4354   		}
;;;4355   	}
;;;4356   else 
;;;4357   	{
;;;4358   	tbatdisable_stat=tbdsON;
00284a  f8884000          STRB     r4,[r8,#0]
                  |L1.10318|
;;;4359   	}
;;;4360   
;;;4361   if((TLOADDISABLE>=50) && (TLOADDISABLE<=80))
00284e  48de              LDR      r0,|L1.11208|
;;;4362   	{
;;;4363   	if(t_box>TLOADDISABLE)
;;;4364   		{
;;;4365   		tloaddisable_cnt++;
;;;4366   		}
;;;4367   	if(t_box<TLOADENABLE)
;;;4368   		{
;;;4369   		tloaddisable_cnt--;
;;;4370   		}
;;;4371   	gran(&tloaddisable_cnt,0,6);
;;;4372   
;;;4373   	if(tloaddisable_cnt>5)
;;;4374   		{
;;;4375   		tloaddisable_stat=tldsOFF;
002850  4fde              LDR      r7,|L1.11212|
002852  f9b00000          LDRSH    r0,[r0,#0]            ;4361  ; TLOADDISABLE
002856  f1a00132          SUB      r1,r0,#0x32           ;4361
00285a  291e              CMP      r1,#0x1e              ;4361
00285c  d81f              BHI      |L1.10398|
00285e  f9b51000          LDRSH    r1,[r5,#0]            ;4363  ; t_box
002862  4ddb              LDR      r5,|L1.11216|
002864  4281              CMP      r1,r0                 ;4363
002866  dd03              BLE      |L1.10352|
002868  8828              LDRH     r0,[r5,#0]            ;4365  ; tloaddisable_cnt
00286a  f1000001          ADD      r0,r0,#1              ;4365
00286e  8028              STRH     r0,[r5,#0]            ;4365
                  |L1.10352|
002870  48d8              LDR      r0,|L1.11220|
002872  f9b00000          LDRSH    r0,[r0,#0]            ;4367  ; TLOADENABLE
002876  4281              CMP      r1,r0                 ;4367
002878  da03              BGE      |L1.10370|
00287a  8828              LDRH     r0,[r5,#0]            ;4369  ; tloaddisable_cnt
00287c  f1a00001          SUB      r0,r0,#1              ;4369
002880  8028              STRH     r0,[r5,#0]            ;4369
                  |L1.10370|
002882  2206              MOVS     r2,#6                 ;4371
002884  2100              MOVS     r1,#0                 ;4371
002886  48d2              LDR      r0,|L1.11216|
002888  f7fffffe          BL       gran
00288c  f9b50000          LDRSH    r0,[r5,#0]            ;4373  ; tloaddisable_cnt
002890  2805              CMP      r0,#5                 ;4373
002892  dd00              BLE      |L1.10390|
002894  703e              STRB     r6,[r7,#0]
                  |L1.10390|
;;;4376   		}
;;;4377   	if(tloaddisable_cnt<1)
002896  2801              CMP      r0,#1
002898  da00              BGE      |L1.10396|
;;;4378   		{
;;;4379   		tloaddisable_stat=tldsON;
00289a  703c              STRB     r4,[r7,#0]
                  |L1.10396|
;;;4380   		}
;;;4381   	}
;;;4382   else 
;;;4383   	{
;;;4384   	tloaddisable_stat=tldsON;
;;;4385   	}
;;;4386   
;;;4387   }
00289c  e4ee              B        |L1.8828|
                  |L1.10398|
00289e  703c              STRB     r4,[r7,#0]            ;4384
0028a0  e4ec              B        |L1.8828|
;;;4388   #endif
                          ENDP

                  bat_drv PROC
;;;4524   //-----------------------------------------------
;;;4525   void bat_drv(char in)
0028a2  e92d5ffc          PUSH     {r2-r12,lr}
;;;4526   {
0028a6  4605              MOV      r5,r0
;;;4527   unsigned short /*tempUS,*/tempUS_;
;;;4528   unsigned long tempUL,tempUL_;
;;;4529   unsigned short b_zar;
;;;4530   //static unsigned short time_cnt[2];
;;;4531   
;;;4532   
;;;4533   
;;;4534   if(cntrl_stat_blok_cnt_plus[in])cntrl_stat_blok_cnt_plus[in]--;
0028a8  49cb              LDR      r1,|L1.11224|
0028aa  f9310015          LDRSH    r0,[r1,r5,LSL #1]
0028ae  b118              CBZ      r0,|L1.10424|
0028b0  f1a00001          SUB      r0,r0,#1
0028b4  f8210015          STRH     r0,[r1,r5,LSL #1]
                  |L1.10424|
;;;4535   if(cntrl_stat_blok_cnt_minus[in])cntrl_stat_blok_cnt_minus[in]--;
0028b8  4ac7              LDR      r2,|L1.11224|
0028ba  1d12              ADDS     r2,r2,#4
0028bc  f9320015          LDRSH    r0,[r2,r5,LSL #1]
0028c0  b118              CBZ      r0,|L1.10442|
0028c2  f1a00001          SUB      r0,r0,#1
0028c6  f8220015          STRH     r0,[r2,r5,LSL #1]
                  |L1.10442|
;;;4536   
;;;4537   
;;;4538   if(bat[in]._Ib>IZMAX) cntrl_stat_blok_cnt_plus[in]=100;
0028ca  eb050045          ADD      r0,r5,r5,LSL #1
0028ce  eb001305          ADD      r3,r0,r5,LSL #4
0028d2  48c2              LDR      r0,|L1.11228|
0028d4  f04f0b64          MOV      r11,#0x64
0028d8  eb000483          ADD      r4,r0,r3,LSL #2
0028dc  4bc0              LDR      r3,|L1.11232|
0028de  f9b40008          LDRSH    r0,[r4,#8]
0028e2  f9b33000          LDRSH    r3,[r3,#0]  ; IZMAX
0028e6  4298              CMP      r0,r3
0028e8  dd01              BLE      |L1.10478|
0028ea  f821b015          STRH     r11,[r1,r5,LSL #1]
                  |L1.10478|
;;;4539   if(bat[in]._Ib<0)     cntrl_stat_blok_cnt_minus[in]=100;
0028ee  2800              CMP      r0,#0
0028f0  da01              BGE      |L1.10486|
0028f2  f822b015          STRH     r11,[r2,r5,LSL #1]
                  |L1.10486|
;;;4540   
;;;4541   if(cntrl_stat_blok_cnt_plus[in] && cntrl_stat_blok_cnt_minus[in])
;;;4542        {
;;;4543        if(!cntrl_stat_blok_cnt_)
0028f6  48b8              LDR      r0,|L1.11224|
0028f8  f8313015          LDRH     r3,[r1,r5,LSL #1]     ;4541
0028fc  387c              SUBS     r0,r0,#0x7c
0028fe  2700              MOVS     r7,#0
002900  b14b              CBZ      r3,|L1.10518|
002902  f8323015          LDRH     r3,[r2,r5,LSL #1]     ;4541
002906  b133              CBZ      r3,|L1.10518|
002908  f8b0305c          LDRH     r3,[r0,#0x5c]  ; cntrl_stat_blok_cnt_
00290c  b1a3              CBZ      r3,|L1.10552|
;;;4544             {
;;;4545             cntrl_stat_blok_cnt_=600; 
;;;4546             cntrl_stat_blok_cnt_plus[in]=0;
;;;4547             cntrl_stat_blok_cnt_minus[in]=0;
;;;4548             }
;;;4549        else cntrl_stat_blok_cnt=3000;
00290e  f64031b8          MOV      r1,#0xbb8
002912  f8a0105a          STRH     r1,[r0,#0x5a]
                  |L1.10518|
;;;4550        }
;;;4551   cntrl_stat_blok_cnt=0;
002916  f8a0705a          STRH     r7,[r0,#0x5a]
;;;4552   
;;;4553   if(++(bat[in]._time_cnt)>=10)
00291a  f894003e          LDRB     r0,[r4,#0x3e]
00291e  1c40              ADDS     r0,r0,#1
002920  b2c0              UXTB     r0,r0
002922  f884003e          STRB     r0,[r4,#0x3e]
002926  280a              CMP      r0,#0xa
002928  d301              BCC      |L1.10542|
;;;4554   	{
;;;4555   	bat[in]._time_cnt=0;
00292a  f884703e          STRB     r7,[r4,#0x3e]
                  |L1.10542|
;;;4556   	//bat[in]._zar_cnt++;
;;;4557   	}
;;;4558   
;;;4559   if(main_10Hz_cnt==50)
00292e  4ead              LDR      r6,|L1.11236|
002930  8830              LDRH     r0,[r6,#0]  ; main_10Hz_cnt
002932  2832              CMP      r0,#0x32
002934  d009              BEQ      |L1.10570|
002936  e017              B        |L1.10600|
                  |L1.10552|
002938  f44f7316          MOV      r3,#0x258             ;4545
00293c  f8a0305c          STRH     r3,[r0,#0x5c]         ;4545
002940  f8217015          STRH     r7,[r1,r5,LSL #1]     ;4546
002944  f8227015          STRH     r7,[r2,r5,LSL #1]     ;4547
002948  e7e5              B        |L1.10518|
                  |L1.10570|
;;;4560   	{
;;;4561   	if(!bat[in]._rel_stat)
00294a  f894003c          LDRB     r0,[r4,#0x3c]
00294e  b958              CBNZ     r0,|L1.10600|
;;;4562   		{
;;;4563   		
;;;4564   		if(bat[in]._Ub<80) 
002950  f9b40002          LDRSH    r0,[r4,#2]
002954  2850              CMP      r0,#0x50
002956  da07              BGE      |L1.10600|
;;;4565   			{
;;;4566   			
;;;4567   			if(!(bat[in]._av&1))
002958  f894003d          LDRB     r0,[r4,#0x3d]
00295c  07c0              LSLS     r0,r0,#31
00295e  d103              BNE      |L1.10600|
;;;4568   				{
;;;4569   				avar_bat_hndl(in,1);
002960  2101              MOVS     r1,#1
002962  4628              MOV      r0,r5
002964  f7fffffe          BL       avar_bat_hndl
                  |L1.10600|
;;;4570   				//if(in==0)plazma_bat++;
;;;4571   				}
;;;4572   			}				
;;;4573   
;;;4574   		}
;;;4575   	}
;;;4576   
;;;4577   if(main_10Hz_cnt>200)
002968  f9b60000          LDRSH    r0,[r6,#0]  ; main_10Hz_cnt
;;;4578   	{
;;;4579   	if(abs(bat[in]._Ib)>IKB) 
00296c  4e9e              LDR      r6,|L1.11240|
00296e  28c8              CMP      r0,#0xc8              ;4577
002970  dd0f              BLE      |L1.10642|
002972  f9b40008          LDRSH    r0,[r4,#8]
002976  f7fffffe          BL       abs
00297a  f9b61000          LDRSH    r1,[r6,#0]  ; IKB
00297e  4288              CMP      r0,r1
002980  dd07              BLE      |L1.10642|
;;;4580   		{
;;;4581   		if((bat[in]._av&1))avar_bat_hndl(in,0);
002982  f894003d          LDRB     r0,[r4,#0x3d]
002986  07c0              LSLS     r0,r0,#31
002988  d003              BEQ      |L1.10642|
00298a  2100              MOVS     r1,#0
00298c  4628              MOV      r0,r5
00298e  f7fffffe          BL       avar_bat_hndl
                  |L1.10642|
;;;4582   		}
;;;4583   	}
;;;4584   
;;;4585   
;;;4586   
;;;4587   if(bat[in]._Ib>(-IKB))
002992  4895              LDR      r0,|L1.11240|
002994  f9b41008          LDRSH    r1,[r4,#8]
002998  f9b00000          LDRSH    r0,[r0,#0]  ; IKB
00299c  4240              RSBS     r0,r0,#0
00299e  4281              CMP      r1,r0
0029a0  dd14              BLE      |L1.10700|
;;;4588   	{
;;;4589   	if(bat[in]._cnt_wrk<10)
0029a2  7b60              LDRB     r0,[r4,#0xd]
0029a4  280a              CMP      r0,#0xa
0029a6  d20d              BCS      |L1.10692|
;;;4590   		{
;;;4591   		bat[in]._cnt_wrk++;
0029a8  f1000001          ADD      r0,r0,#1
0029ac  b2c0              UXTB     r0,r0
0029ae  7360              STRB     r0,[r4,#0xd]
;;;4592   		if((bat[in]._cnt_wrk>=10)&&(bat[in]._wrk)) 
0029b0  280a              CMP      r0,#0xa
0029b2  d371              BCC      |L1.10904|
0029b4  7ba0              LDRB     r0,[r4,#0xe]
0029b6  2800              CMP      r0,#0
0029b8  d06e              BEQ      |L1.10904|
;;;4593   			{
;;;4594   			bat[in]._wrk=0;
0029ba  73a7              STRB     r7,[r4,#0xe]
;;;4595   			//beep_init(0x7L,'O');
;;;4596   			//wrk_mem_hndl(0);
;;;4597   			wrk_mem_hndl(in);
0029bc  4628              MOV      r0,r5
0029be  f7fffffe          BL       wrk_mem_hndl
0029c2  e069              B        |L1.10904|
                  |L1.10692|
;;;4598   			//plazma++;
;;;4599   			}
;;;4600   		}
;;;4601   	else bat[in]._cnt_wrk=10;	
0029c4  f04f000a          MOV      r0,#0xa
0029c8  7360              STRB     r0,[r4,#0xd]
0029ca  e065              B        |L1.10904|
                  |L1.10700|
;;;4602   	}	
;;;4603   
;;;4604   else if(bat[in]._Ib<(-IKB))
0029cc  da64              BGE      |L1.10904|
;;;4605   	{
;;;4606   	if(bat[in]._cnt_wrk)
0029ce  7b60              LDRB     r0,[r4,#0xd]
0029d0  b3f0              CBZ      r0,|L1.10832|
;;;4607   		{
;;;4608   		bat[in]._cnt_wrk--;
0029d2  f1a00001          SUB      r0,r0,#1
0029d6  b2c0              UXTB     r0,r0
0029d8  7360              STRB     r0,[r4,#0xd]
;;;4609   		if((bat[in]._cnt_wrk==0)&&(bat[in]._wrk==0)) 
0029da  bbc8              CBNZ     r0,|L1.10832|
0029dc  7ba0              LDRB     r0,[r4,#0xe]
0029de  bbb8              CBNZ     r0,|L1.10832|
;;;4610   			{
;;;4611   			bat[in]._wrk=1;
0029e0  f04f0001          MOV      r0,#1
0029e4  73a0              STRB     r0,[r4,#0xe]
;;;4612   
;;;4613   				{
;;;4614   				char temp;
;;;4615   				signed short temp_temp;
;;;4616   				temp_temp=bat[in]._u_old[((bat_u_old_cnt+1)&0x07)];
0029e6  4881              LDR      r0,|L1.11244|
0029e8  8800              LDRH     r0,[r0,#0]  ; bat_u_old_cnt
0029ea  f1000001          ADD      r0,r0,#1
0029ee  f0000007          AND      r0,r0,#7
0029f2  eb040040          ADD      r0,r4,r0,LSL #1
0029f6  8c00              LDRH     r0,[r0,#0x20]
0029f8  9000              STR      r0,[sp,#0]
;;;4617   			 
;;;4618   				temp=LPC_RTC->YEAR;
0029fa  4e7d              LDR      r6,|L1.11248|
0029fc  8bb0              LDRH     r0,[r6,#0x1c]
0029fe  9001              STR      r0,[sp,#4]
;;;4619   				gran_char((signed char*)&temp,1,99);
002a00  f04f0263          MOV      r2,#0x63
002a04  f04f0101          MOV      r1,#1
002a08  a801              ADD      r0,sp,#4
002a0a  f7fffffe          BL       gran_char
;;;4620   				*((char*)(&(bat[in]._wrk_date[0])))=temp;
002a0e  f104041c          ADD      r4,r4,#0x1c
002a12  f89d0004          LDRB     r0,[sp,#4]
002a16  7620              STRB     r0,[r4,#0x18]
;;;4621   			
;;;4622   				temp=LPC_RTC->MONTH;
002a18  7e30              LDRB     r0,[r6,#0x18]
002a1a  9001              STR      r0,[sp,#4]
;;;4623   				gran_char((signed char*)&temp,1,12);
002a1c  f04f020c          MOV      r2,#0xc
002a20  f04f0101          MOV      r1,#1
002a24  a801              ADD      r0,sp,#4
002a26  f7fffffe          BL       gran_char
;;;4624   				*(((char*)(&(bat[in]._wrk_date[0])))+1)=temp;
002a2a  f89d0004          LDRB     r0,[sp,#4]
002a2e  7660              STRB     r0,[r4,#0x19]
;;;4625   			
;;;4626   				temp=LPC_RTC->DOM;
002a30  7b30              LDRB     r0,[r6,#0xc]
002a32  9001              STR      r0,[sp,#4]
;;;4627   				gran_char((signed char*)&temp,1,31);
002a34  221f              MOVS     r2,#0x1f
002a36  2101              MOVS     r1,#1
002a38  a801              ADD      r0,sp,#4
002a3a  f7fffffe          BL       gran_char
;;;4628   				*(((char*)(&(bat[in]._wrk_date[0])))+2)=temp;			
002a3e  f89d0004          LDRB     r0,[sp,#4]
002a42  76a0              STRB     r0,[r4,#0x1a]
;;;4629   				
;;;4630   				*(((char*)(&(bat[in]._wrk_date[0])))+3)=*((char*)&temp_temp);
002a44  f89d0000          LDRB     r0,[sp,#0]
002a48  76e0              STRB     r0,[r4,#0x1b]
;;;4631   
;;;4632   				temp=LPC_RTC->HOUR;
002a4a  7a30              LDRB     r0,[r6,#8]
002a4c  9001              STR      r0,[sp,#4]
;;;4633   				gran_char((signed char*)&temp,0,23);
002a4e  e000              B        |L1.10834|
                  |L1.10832|
002a50  e022              B        |L1.10904|
                  |L1.10834|
002a52  2217              MOVS     r2,#0x17
002a54  2100              MOVS     r1,#0
002a56  a801              ADD      r0,sp,#4
002a58  f7fffffe          BL       gran_char
;;;4634   				*((char*)(&(bat[in]._wrk_date[1])))=temp;
002a5c  f89d0004          LDRB     r0,[sp,#4]
002a60  7720              STRB     r0,[r4,#0x1c]
;;;4635                  	
;;;4636   				temp=LPC_RTC->MIN;
002a62  7930              LDRB     r0,[r6,#4]
002a64  9001              STR      r0,[sp,#4]
;;;4637   				gran_char((signed char*)&temp,0,59);
002a66  223b              MOVS     r2,#0x3b
002a68  2100              MOVS     r1,#0
002a6a  a801              ADD      r0,sp,#4
002a6c  f7fffffe          BL       gran_char
;;;4638   				*(((char*)(&(bat[in]._wrk_date[1])))+1)=temp;
002a70  f89d0004          LDRB     r0,[sp,#4]
002a74  7760              STRB     r0,[r4,#0x1d]
;;;4639   	          
;;;4640   				temp=LPC_RTC->SEC;
002a76  7830              LDRB     r0,[r6,#0]
002a78  9001              STR      r0,[sp,#4]
;;;4641   				gran_char((signed char*)&temp,0,59);
002a7a  223b              MOVS     r2,#0x3b
002a7c  2100              MOVS     r1,#0
002a7e  a801              ADD      r0,sp,#4
002a80  f7fffffe          BL       gran_char
;;;4642   				*(((char*)(&(bat[in]._wrk_date[1])))+2)=temp;
002a84  f89d0004          LDRB     r0,[sp,#4]
002a88  77a0              STRB     r0,[r4,#0x1e]
;;;4643   			
;;;4644   				*(((char*)(&(bat[in]._wrk_date[1])))+3)=*(((char*)&temp_temp)+1);
002a8a  f89d0001          LDRB     r0,[sp,#1]
002a8e  77e0              STRB     r0,[r4,#0x1f]
;;;4645   				bat[in]._Iintegr=0;		//  
002a90  8027              STRH     r7,[r4,#0]
;;;4646   				bat[in]._Iintegr_=0;	//  
002a92  8067              STRH     r7,[r4,#2]
002a94  f1a4041c          SUB      r4,r4,#0x1c
                  |L1.10904|
;;;4647   				}
;;;4648   	
;;;4649   			}
;;;4650   
;;;4651   		}
;;;4652   	else bat[in]._cnt_wrk=0;	 
;;;4653   	
;;;4654   	}					
;;;4655   
;;;4656   /*
;;;4657   if(Ibat>=(-IKB))
;;;4658   	{
;;;4659   	if(cnt_wrk<10)
;;;4660   		{
;;;4661   		cnt_wrk++;
;;;4662   		if((cnt_wrk>=10)&&(wrk!=wrkOFF)) 
;;;4663   			{
;;;4664   			wrk=wrkOFF;
;;;4665   			//beep_init(0x7L,'O');
;;;4666   			wrk_mem_hndl(ibat_integr);
;;;4667   			}
;;;4668   		}
;;;4669   	else cnt_wrk=10;	
;;;4670   	}	
;;;4671   
;;;4672   else if((Ibat<(-IKB))&&(spc_stat!=spc_KE))
;;;4673   	{
;;;4674   	if(cnt_wrk)
;;;4675   		{
;;;4676   		cnt_wrk--;
;;;4677   		if((cnt_wrk==0)&&(wrk!=wrkON)) 
;;;4678   			{
;;;4679   			char temp;
;;;4680   			signed short temp_temp;
;;;4681   			temp_temp=ubat_old[((ubat_old_cnt+1)&0x07)];
;;;4682   			 
;;;4683   			wrk=wrkON;
;;;4684   			
;;;4685   			temp=_year;
;;;4686   			gran_char(&temp,1,99);
;;;4687   			*((char*)(&(wrk_date[0])))=temp;
;;;4688   			
;;;4689   			temp=_month;
;;;4690   			gran_char(&temp,1,12);
;;;4691   			*(((char*)(&(wrk_date[0])))+1)=temp;
;;;4692   			
;;;4693   			temp=_date;
;;;4694   			gran_char(&temp,1,31);
;;;4695   			*(((char*)(&(wrk_date[0])))+2)=temp;			
;;;4696   				
;;;4697   			*(((char*)(&(wrk_date[0])))+3)=*((char*)&temp_temp);
;;;4698   
;;;4699   			temp=_hour;
;;;4700   			gran_char(&temp,0,23);
;;;4701   			*((char*)(&(wrk_date[1])))=temp;
;;;4702                  
;;;4703   			temp=_min;
;;;4704   			gran_char(&temp,0,59);
;;;4705   			*(((char*)(&(wrk_date[1])))+1)=temp;
;;;4706   	          
;;;4707   			temp=_sec;
;;;4708   			gran_char(&temp,0,59);
;;;4709   			*(((char*)(&(wrk_date[1])))+2)=temp;
;;;4710   			
;;;4711   			*(((char*)(&(wrk_date[1])))+3)=*(((char*)&temp_temp)+1);
;;;4712   
;;;4713   			
;;;4714   			//beep_init(0xFL,'O'); 
;;;4715   			ibat_integr=0;
;;;4716   			ibat_integr_=0;
;;;4717   			}
;;;4718   		}
;;;4719   	else cnt_wrk=0;	 
;;;4720   	
;;;4721   	}
;;;4722   if(wrk==wrkON)
;;;4723   	{
;;;4724   	ibat_integr_+=-Ibat;
;;;4725   	if(ibat_integr_>=SEC_IN_HOUR*10L)
;;;4726   		{
;;;4727   		ibat_integr_-=SEC_IN_HOUR*10L;
;;;4728   		ibat_integr++;
;;;4729   		}
;;;4730   	}
;;;4731   
;;;4732   */
;;;4733   
;;;4734   
;;;4735   /*if(bat[in]._cnt_to_block)
;;;4736   	{
;;;4737   	bat[in]._cnt_to_block--;
;;;4738   	if(!(bat[in]._cnt_to_block))
;;;4739   		{
;;;4740   		//bat[in]._rel_stat=1;
;;;4741   		}
;;;4742   	}
;;;4743   */
;;;4744   
;;;4745   
;;;4746   
;;;4747   
;;;4748   //unsigned int tempUI,tempUI_;
;;;4749   //unsigned int b_zar; 
;;;4750   //char i;
;;;4751   //Ibat[0]=5000;                     
;;;4752   
;;;4753   
;;;4754                               
;;;4755   if(bat[in]._time_cnt==0)
;;;4756   	{
;;;4757   	bat[in]._zar_cnt+=(signed long)bat[in]._Ib;
;;;4758   	
;;;4759   	if(bat[in]._zar_cnt>=AH_CONSTANT)
002a98  f64848a0          MOV      r8,#0x8ca0
002a9c  f894003e          LDRB     r0,[r4,#0x3e]         ;4755
002aa0  2800              CMP      r0,#0                 ;4755
002aa2  d17e              BNE      |L1.11170|
002aa4  f9b41008          LDRSH    r1,[r4,#8]            ;4757
002aa8  6960              LDR      r0,[r4,#0x14]         ;4757
002aaa  4408              ADD      r0,r0,r1              ;4757
002aac  6160              STR      r0,[r4,#0x14]         ;4757
;;;4760   		{
;;;4761   		if(BAT_C_REAL[in]==0x5555) tempUS_=BAT_C_NOM[in];
;;;4762   		else tempUS_=BAT_C_REAL[in];
;;;4763   		
;;;4764   		b_zar=lc640_read_int(ADR_EE_BAT_ZAR_CNT[in]);
002aae  f8df9144          LDR      r9,|L1.11252|
002ab2  f8dfa144          LDR      r10,|L1.11256|
002ab6  4540              CMP      r0,r8                 ;4759
002ab8  db2a              BLT      |L1.11024|
002aba  f93a1015          LDRSH    r1,[r10,r5,LSL #1]    ;4761
002abe  f5a140aa          SUB      r0,r1,#0x5500         ;4761
002ac2  3855              SUBS     r0,r0,#0x55           ;4761
002ac4  d103              BNE      |L1.10958|
002ac6  484d              LDR      r0,|L1.11260|
002ac8  f8306015          LDRH     r6,[r0,r5,LSL #1]     ;4761
002acc  e001              B        |L1.10962|
                  |L1.10958|
002ace  f83a6015          LDRH     r6,[r10,r5,LSL #1]    ;4762
                  |L1.10962|
002ad2  f8390015          LDRH     r0,[r9,r5,LSL #1]
002ad6  f7fffffe          BL       lc640_read_int
002ada  b280              UXTH     r0,r0
;;;4765   
;;;4766   		if(b_zar<(tempUS_/**10*/))
002adc  42b0              CMP      r0,r6
002ade  d20e              BCS      |L1.11006|
;;;4767   			{
;;;4768   			bat[in]._zar_cnt-=AH_CONSTANT;
002ae0  6961              LDR      r1,[r4,#0x14]
002ae2  f5a14100          SUB      r1,r1,#0x8000
002ae6  f5a1614a          SUB      r1,r1,#0xca0
002aea  6161              STR      r1,[r4,#0x14]
;;;4769   
;;;4770   			lc640_write_int(ADR_EE_BAT_ZAR_CNT[in],b_zar+1);
002aec  f9392015          LDRSH    r2,[r9,r5,LSL #1]
002af0  f1000001          ADD      r0,r0,#1
002af4  b201              SXTH     r1,r0
002af6  4610              MOV      r0,r2
002af8  f7fffffe          BL       lc640_write_int
002afc  e033              B        |L1.11110|
                  |L1.11006|
;;;4771   			}
;;;4772   		else if(b_zar>(tempUS_/**10*/))  
002afe  d932              BLS      |L1.11110|
;;;4773   			{
;;;4774   			lc640_write_int(ADR_EE_BAT_ZAR_CNT[in],tempUS_);
002b00  f9390015          LDRSH    r0,[r9,r5,LSL #1]
002b04  b231              SXTH     r1,r6
002b06  f7fffffe          BL       lc640_write_int
;;;4775   			bat[in]._zar_cnt=AH_CONSTANT;
002b0a  f8c48014          STR      r8,[r4,#0x14]
002b0e  e02a              B        |L1.11110|
                  |L1.11024|
;;;4776   
;;;4777   			}
;;;4778   
;;;4779   		}
;;;4780   
;;;4781   	else if(bat[in]._zar_cnt<=-AH_CONSTANT)
002b10  493b              LDR      r1,|L1.11264|
002b12  4288              CMP      r0,r1
002b14  dc27              BGT      |L1.11110|
;;;4782   		{
;;;4783   		if(BAT_C_REAL[in]==0x5555) tempUS_=BAT_C_NOM[in];
002b16  f93a1015          LDRSH    r1,[r10,r5,LSL #1]
002b1a  f5a140aa          SUB      r0,r1,#0x5500
002b1e  3855              SUBS     r0,r0,#0x55
002b20  d103              BNE      |L1.11050|
002b22  4836              LDR      r0,|L1.11260|
002b24  f8306015          LDRH     r6,[r0,r5,LSL #1]
002b28  e001              B        |L1.11054|
                  |L1.11050|
;;;4784   		else tempUS_=BAT_C_REAL[in];
002b2a  f83a6015          LDRH     r6,[r10,r5,LSL #1]
                  |L1.11054|
;;;4785   		
;;;4786   		b_zar=lc640_read_int(ADR_EE_BAT_ZAR_CNT[in]);
002b2e  f8390015          LDRH     r0,[r9,r5,LSL #1]
002b32  f7fffffe          BL       lc640_read_int
002b36  b280              UXTH     r0,r0
;;;4787   
;;;4788   		if(b_zar>tempUS_)
002b38  42b0              CMP      r0,r6
002b3a  d905              BLS      |L1.11080|
;;;4789   			{
;;;4790   			lc640_write_int(ADR_EE_BAT_ZAR_CNT[in],tempUS_);
002b3c  f9390015          LDRSH    r0,[r9,r5,LSL #1]
002b40  b231              SXTH     r1,r6
002b42  f7fffffe          BL       lc640_write_int
;;;4791   			b_zar=tempUS_;
002b46  4630              MOV      r0,r6
                  |L1.11080|
;;;4792   			}
;;;4793   		if(b_zar)
002b48  b158              CBZ      r0,|L1.11106|
;;;4794   			{
;;;4795   			bat[in]._zar_cnt+=AH_CONSTANT;
002b4a  6961              LDR      r1,[r4,#0x14]
002b4c  4441              ADD      r1,r1,r8
002b4e  6161              STR      r1,[r4,#0x14]
;;;4796   
;;;4797   			lc640_write_int(ADR_EE_BAT_ZAR_CNT[in],b_zar-1);
002b50  f9392015          LDRSH    r2,[r9,r5,LSL #1]
002b54  f1a00001          SUB      r0,r0,#1
002b58  b201              SXTH     r1,r0
002b5a  4610              MOV      r0,r2
002b5c  f7fffffe          BL       lc640_write_int
002b60  e001              B        |L1.11110|
                  |L1.11106|
;;;4798   			}
;;;4799   		else 
;;;4800   			{
;;;4801   			bat[in]._zar_cnt=-AH_CONSTANT;
002b62  4827              LDR      r0,|L1.11264|
002b64  6160              STR      r0,[r4,#0x14]
                  |L1.11110|
;;;4802   			}
;;;4803   
;;;4804   		}
;;;4805   
;;;4806   			
;;;4807   	tempUL=(unsigned long)lc640_read_int(ADR_EE_BAT_ZAR_CNT[in]);
002b66  f8390015          LDRH     r0,[r9,r5,LSL #1]
002b6a  f7fffffe          BL       lc640_read_int
002b6e  4601              MOV      r1,r0
;;;4808   	
;;;4809   	if(BAT_C_REAL[in]==0x5555) tempUL_=(unsigned long)BAT_C_NOM[in];
002b70  f93a0015          LDRSH    r0,[r10,r5,LSL #1]
002b74  f5a042aa          SUB      r2,r0,#0x5500
002b78  3a55              SUBS     r2,r2,#0x55
002b7a  d102              BNE      |L1.11138|
002b7c  481f              LDR      r0,|L1.11260|
002b7e  f9300015          LDRSH    r0,[r0,r5,LSL #1]
                  |L1.11138|
;;;4810   	else tempUL_=(unsigned long)BAT_C_REAL[in];
;;;4811   		           	
;;;4812   	tempUL*=1000L;
002b82  f44f727a          MOV      r2,#0x3e8
002b86  fb01f102          MUL      r1,r1,r2
;;;4813   
;;;4814   
;;;4815   	if(tempUL_==0) tempUL=0;
002b8a  b3e8              CBZ      r0,|L1.11272|
;;;4816   	else tempUL/=tempUL_;
002b8c  fbb1f0f0          UDIV     r0,r1,r0
                  |L1.11152|
;;;4817   
;;;4818   	tempUL/=10L;
002b90  f04f010a          MOV      r1,#0xa
002b94  fbb0f0f1          UDIV     r0,r0,r1
;;;4819   
;;;4820   	bat[in]._zar=(unsigned short)tempUL;
002b98  8220              STRH     r0,[r4,#0x10]
;;;4821   
;;;4822   	if(BAT_TYPE==1)
002b9a  481a              LDR      r0,|L1.11268|
002b9c  8800              LDRH     r0,[r0,#0]  ; BAT_TYPE
002b9e  2801              CMP      r0,#1
002ba0  e033              B        |L1.11274|
                  |L1.11170|
002ba2  e046              B        |L1.11314|
                  |L1.11172|
                          DCD      TBOXVENTMAX
                  |L1.11176|
                          DCD      main_vent_pos
                  |L1.11180|
                          DCD      pos_vent
                  |L1.11184|
                          DCD      mess_data
                  |L1.11188|
                          DCD      mixer_vent_stat
                  |L1.11192|
                          DCD      TBATDISABLE
                  |L1.11196|
                          DCD      tbatdisable_stat
                  |L1.11200|
                          DCD      tbatdisable_cnt
                  |L1.11204|
                          DCD      TBATENABLE
                  |L1.11208|
                          DCD      TLOADDISABLE
                  |L1.11212|
                          DCD      tloaddisable_stat
                  |L1.11216|
                          DCD      tloaddisable_cnt
                  |L1.11220|
                          DCD      TLOADENABLE
                  |L1.11224|
                          DCD      ||area_number.21||+0x7c
                  |L1.11228|
                          DCD      bat
                  |L1.11232|
                          DCD      IZMAX
                  |L1.11236|
                          DCD      main_10Hz_cnt
                  |L1.11240|
                          DCD      IKB
                  |L1.11244|
                          DCD      bat_u_old_cnt
                  |L1.11248|
                          DCD      0x40024020
                  |L1.11252|
                          DCD      ADR_EE_BAT_ZAR_CNT
                  |L1.11256|
                          DCD      BAT_C_REAL
                  |L1.11260|
                          DCD      BAT_C_NOM
                  |L1.11264|
                          DCD      0xffff7360
                  |L1.11268|
                          DCD      BAT_TYPE
                  |L1.11272|
002c08  e001              B        |L1.11278|
                  |L1.11274|
002c0a  d003              BEQ      |L1.11284|
002c0c  e00b              B        |L1.11302|
                  |L1.11278|
002c0e  f04f0000          MOV      r0,#0                 ;4815
002c12  e7bd              B        |L1.11152|
                  |L1.11284|
;;;4823   		{
;;;4824   		bat[in]._zar=lakb[in]._s_o_c;
002c14  eb050085          ADD      r0,r5,r5,LSL #2
002c18  eb0000c5          ADD      r0,r0,r5,LSL #3
002c1c  49ff              LDR      r1,|L1.12316|
002c1e  eb010080          ADD      r0,r1,r0,LSL #2
002c22  8a40              LDRH     r0,[r0,#0x12]
002c24  8220              STRH     r0,[r4,#0x10]
                  |L1.11302|
;;;4825   		}
;;;4826   	
;;;4827   	gran((signed short*)&bat[in]._zar,0,100);
002c26  f1040010          ADD      r0,r4,#0x10
002c2a  2264              MOVS     r2,#0x64
002c2c  2100              MOVS     r1,#0
002c2e  f7fffffe          BL       gran
                  |L1.11314|
;;;4828        }
;;;4829   
;;;4830   
;;;4831   //         
;;;4832   if(bat[in]._wrk==1)
002c32  7ba0              LDRB     r0,[r4,#0xe]
002c34  2801              CMP      r0,#1
002c36  d113              BNE      |L1.11360|
;;;4833   	{
;;;4834   	if(bat[in]._Iintegr<36000)
002c38  8ba0              LDRH     r0,[r4,#0x1c]
002c3a  4540              CMP      r0,r8
002c3c  d20f              BCS      |L1.11358|
;;;4835   		{          
;;;4836   		bat[in]._Iintegr+=abs(bat[in]._Ib);
002c3e  f9b40008          LDRSH    r0,[r4,#8]
002c42  f7fffffe          BL       abs
002c46  8ba1              LDRH     r1,[r4,#0x1c]
002c48  4408              ADD      r0,r0,r1
002c4a  b280              UXTH     r0,r0
002c4c  83a0              STRH     r0,[r4,#0x1c]
;;;4837   		if(bat[in]._Iintegr>=36000)
002c4e  4540              CMP      r0,r8
002c50  d306              BCC      |L1.11360|
;;;4838   			{
;;;4839   			bat[in]._Iintegr=0;		//  
002c52  83a7              STRH     r7,[r4,#0x1c]
;;;4840   			bat[in]._Iintegr_++;	//  
002c54  8be0              LDRH     r0,[r4,#0x1e]
002c56  f1000001          ADD      r0,r0,#1
002c5a  83e0              STRH     r0,[r4,#0x1e]
002c5c  e000              B        |L1.11360|
                  |L1.11358|
;;;4841   			}
;;;4842   		}
;;;4843   	else 
;;;4844   		{
;;;4845   		bat[in]._Iintegr=0;
002c5e  83a7              STRH     r7,[r4,#0x1c]
                  |L1.11360|
;;;4846   		}	
;;;4847   	} 
;;;4848   	    
;;;4849   //
;;;4850   if((bat[in]._Tb>TBATSIGN)&&(!bat[in]._nd))	
002c60  49ef              LDR      r1,|L1.12320|
002c62  f9b4000a          LDRSH    r0,[r4,#0xa]
002c66  f9b11000          LDRSH    r1,[r1,#0]  ; TBATSIGN
002c6a  4288              CMP      r0,r1
002c6c  dd01              BLE      |L1.11378|
002c6e  7b20              LDRB     r0,[r4,#0xc]
002c70  b3e8              CBZ      r0,|L1.11502|
                  |L1.11378|
;;;4851   	{
;;;4852   	bat[in]._sign_temper_cnt++;
;;;4853   	}
;;;4854   else 
;;;4855   	{
;;;4856   	bat[in]._sign_temper_cnt--;
002c72  f8b40040          LDRH     r0,[r4,#0x40]
002c76  f1a00001          SUB      r0,r0,#1
002c7a  f8a40040          STRH     r0,[r4,#0x40]
                  |L1.11390|
;;;4857   	}
;;;4858   
;;;4859   gran(&bat[in]._sign_temper_cnt,0,600);
002c7e  f44f7916          MOV      r9,#0x258
002c82  f1040040          ADD      r0,r4,#0x40
002c86  464a              MOV      r2,r9
002c88  2100              MOVS     r1,#0
002c8a  f7fffffe          BL       gran
;;;4860   if(bat[in]._sign_temper_cnt>=590)	bat[in]._temper_stat|=(1<<0);
002c8e  f9b40040          LDRSH    r0,[r4,#0x40]
002c92  f240264e          MOV      r6,#0x24e
002c96  42b0              CMP      r0,r6
002c98  db05              BLT      |L1.11430|
002c9a  f894103f          LDRB     r1,[r4,#0x3f]
002c9e  f0410101          ORR      r1,r1,#1
002ca2  f884103f          STRB     r1,[r4,#0x3f]
                  |L1.11430|
;;;4861   if(bat[in]._sign_temper_cnt<=10)	bat[in]._temper_stat&=~(1<<0);
002ca6  280a              CMP      r0,#0xa
002ca8  dc05              BGT      |L1.11446|
002caa  f894003f          LDRB     r0,[r4,#0x3f]
002cae  f0200001          BIC      r0,r0,#1
002cb2  f884003f          STRB     r0,[r4,#0x3f]
                  |L1.11446|
;;;4862   
;;;4863   
;;;4864   if((bat[in]._Tb>TBATMAX)&&(!bat[in]._nd))	
002cb6  49db              LDR      r1,|L1.12324|
002cb8  f9b4000a          LDRSH    r0,[r4,#0xa]
002cbc  f9b11000          LDRSH    r1,[r1,#0]  ; TBATMAX
002cc0  4288              CMP      r0,r1
002cc2  dd01              BLE      |L1.11464|
002cc4  7b20              LDRB     r0,[r4,#0xc]
002cc6  b3a0              CBZ      r0,|L1.11570|
                  |L1.11464|
;;;4865   	{
;;;4866   	bat[in]._max_temper_cnt++;
;;;4867   	}
;;;4868   else 
;;;4869   	{
;;;4870   	bat[in]._max_temper_cnt--;
002cc8  f8b40042          LDRH     r0,[r4,#0x42]
002ccc  f1a00001          SUB      r0,r0,#1
002cd0  f8a40042          STRH     r0,[r4,#0x42]
                  |L1.11476|
;;;4871   	}
;;;4872   
;;;4873   gran(&bat[in]._max_temper_cnt,0,600);
002cd4  f1040042          ADD      r0,r4,#0x42
002cd8  464a              MOV      r2,r9
002cda  2100              MOVS     r1,#0
002cdc  f7fffffe          BL       gran
;;;4874   if(bat[in]._max_temper_cnt>=590)	bat[in]._temper_stat|=(1<<1);
002ce0  f9b40042          LDRSH    r0,[r4,#0x42]
002ce4  42b0              CMP      r0,r6
002ce6  db07              BLT      |L1.11512|
002ce8  f894103f          LDRB     r1,[r4,#0x3f]
002cec  e000              B        |L1.11504|
                  |L1.11502|
002cee  e021              B        |L1.11572|
                  |L1.11504|
002cf0  f0410102          ORR      r1,r1,#2
002cf4  f884103f          STRB     r1,[r4,#0x3f]
                  |L1.11512|
;;;4875   if(bat[in]._max_temper_cnt<=10)	bat[in]._temper_stat&=~(1<<1);
002cf8  280a              CMP      r0,#0xa
002cfa  dc05              BGT      |L1.11528|
002cfc  f894003f          LDRB     r0,[r4,#0x3f]
002d00  f0200002          BIC      r0,r0,#2
002d04  f884003f          STRB     r0,[r4,#0x3f]
                  |L1.11528|
;;;4876   
;;;4877   
;;;4878   
;;;4879   //  
;;;4880   if(bat[in]._resurs_cnt<36000)
002d08  6c60              LDR      r0,[r4,#0x44]
002d0a  4540              CMP      r0,r8
002d0c  da20              BGE      |L1.11600|
;;;4881   	{               
;;;4882   	bat[in]._resurs_cnt++;
002d0e  f1000001          ADD      r0,r0,#1
002d12  6460              STR      r0,[r4,#0x44]
;;;4883   	if(bat[in]._resurs_cnt>=36000)
002d14  4540              CMP      r0,r8
002d16  db1c              BLT      |L1.11602|
;;;4884   		{
;;;4885   		bat[in]._resurs_cnt=0;
002d18  6467              STR      r7,[r4,#0x44]
;;;4886   		lc640_write_int(ADR_EE_BAT_RESURS[in],lc640_read_int(ADR_EE_BAT_RESURS[in])+1);
002d1a  4ec3              LDR      r6,|L1.12328|
002d1c  f8360015          LDRH     r0,[r6,r5,LSL #1]
002d20  f7fffffe          BL       lc640_read_int
002d24  1c40              ADDS     r0,r0,#1
002d26  b201              SXTH     r1,r0
002d28  f9360015          LDRSH    r0,[r6,r5,LSL #1]
002d2c  f7fffffe          BL       lc640_write_int
002d30  e00f              B        |L1.11602|
                  |L1.11570|
002d32  e006              B        |L1.11586|
                  |L1.11572|
002d34  f8b40040          LDRH     r0,[r4,#0x40]         ;4852
002d38  f1000001          ADD      r0,r0,#1              ;4852
002d3c  f8a40040          STRH     r0,[r4,#0x40]         ;4852
002d40  e79d              B        |L1.11390|
                  |L1.11586|
002d42  f8b40042          LDRH     r0,[r4,#0x42]         ;4866
002d46  f1000001          ADD      r0,r0,#1              ;4866
002d4a  f8a40042          STRH     r0,[r4,#0x42]         ;4866
002d4e  e7c1              B        |L1.11476|
                  |L1.11600|
;;;4887   		}
;;;4888   	}
;;;4889   else bat[in]._resurs_cnt=0;
002d50  6467              STR      r7,[r4,#0x44]
                  |L1.11602|
;;;4890   
;;;4891   
;;;4892   #ifndef UKU_220_V2
;;;4893   #ifndef UKU_GLONASS
;;;4894   #ifndef UKU_6U
;;;4895   //#ifndef UKU_220
;;;4896   if(UBM_AV)
002d52  4eb6              LDR      r6,|L1.12332|
002d54  8830              LDRH     r0,[r6,#0]  ; UBM_AV
002d56  2800              CMP      r0,#0
002d58  d05e              BEQ      |L1.11800|
;;;4897        {
;;;4898        signed short temp_SS;
;;;4899   #ifdef UKU_220
;;;4900   temp_SS=bat[in]._Ub/2;
;;;4901   #else
;;;4902        if(U0B<600)
002d5a  48b5              LDR      r0,|L1.12336|
002d5c  f9b00000          LDRSH    r0,[r0,#0]  ; U0B
002d60  4548              CMP      r0,r9
002d62  da08              BGE      |L1.11638|
;;;4903             {
;;;4904             temp_SS=bat[in]._Ub/4;
002d64  f9b40002          LDRSH    r0,[r4,#2]
002d68  ea4f71e0          ASR      r1,r0,#31
002d6c  eb007091          ADD      r0,r0,r1,LSR #30
002d70  ea4f00a0          ASR      r0,r0,#2
002d74  e006              B        |L1.11652|
                  |L1.11638|
;;;4905             }
;;;4906        else temp_SS=bat[in]._Ub/5;
002d76  f9b40002          LDRSH    r0,[r4,#2]
002d7a  f04f0105          MOV      r1,#5
002d7e  fb90f0f1          SDIV     r0,r0,r1
002d82  b200              SXTH     r0,r0
                  |L1.11652|
;;;4907   	
;;;4908   	temp_SS+=temp_SS;     
002d84  ea4f0040          LSL      r0,r0,#1
;;;4909   #endif
;;;4910        temp_SS-=(bat[in]._Ubm);
002d88  88a1              LDRH     r1,[r4,#4]
002d8a  eba00001          SUB      r0,r0,r1
002d8e  b200              SXTH     r0,r0
;;;4911   
;;;4912        temp_SS=abs(temp_SS);
002d90  f7fffffe          BL       abs
;;;4913   
;;;4914        temp_SS*=10;
002d94  eb000080          ADD      r0,r0,r0,LSL #2
002d98  ea4f0040          LSL      r0,r0,#1
002d9c  b200              SXTH     r0,r0
;;;4915   
;;;4916        temp_SS/=12;
002d9e  f04f010c          MOV      r1,#0xc
002da2  fb90f0f1          SDIV     r0,r0,r1
002da6  b200              SXTH     r0,r0
;;;4917   
;;;4918        bat[in]._dUbm=temp_SS;
002da8  80e0              STRH     r0,[r4,#6]
;;;4919   
;;;4920   
;;;4921        if(	(bat[in]._dUbm>UBM_AV) &&
002daa  f9b61000          LDRSH    r1,[r6,#0]  ; UBM_AV
002dae  4288              CMP      r0,r1
002db0  dd34              BLE      |L1.11804|
;;;4922   		(abs(bat[in]._Ib)<(5*IKB)) &&
002db2  f9b40008          LDRSH    r0,[r4,#8]
002db6  f7fffffe          BL       abs
002dba  4601              MOV      r1,r0
002dbc  489d              LDR      r0,|L1.12340|
002dbe  f9b00000          LDRSH    r0,[r0,#0]  ; IKB
002dc2  eb000080          ADD      r0,r0,r0,LSL #2
002dc6  4281              CMP      r1,r0
002dc8  da28              BGE      |L1.11804|
;;;4923   		(bat[in]._Ub>((short)(((long)USIGN*115)/100))) &&
002dca  489b              LDR      r0,|L1.12344|
002dcc  2173              MOVS     r1,#0x73
002dce  f9b00000          LDRSH    r0,[r0,#0]  ; USIGN
002dd2  4348              MULS     r0,r1,r0
002dd4  fb90f0fb          SDIV     r0,r0,r11
002dd8  f9b41002          LDRSH    r1,[r4,#2]
002ddc  b200              SXTH     r0,r0
002dde  4288              CMP      r0,r1
002de0  da1c              BGE      |L1.11804|
;;;4924   		(!(bat[in]._av & 2))  )
002de2  f894003d          LDRB     r0,[r4,#0x3d]
002de6  0780              LSLS     r0,r0,#30
002de8  d418              BMI      |L1.11804|
;;;4925   		{
;;;4926   		bat[in]._cnt_as++;
002dea  f8b40048          LDRH     r0,[r4,#0x48]
002dee  f1000001          ADD      r0,r0,#1
002df2  b200              SXTH     r0,r0
002df4  f8a40048          STRH     r0,[r4,#0x48]
;;;4927   		if(bat[in]._cnt_as==3000)
002df8  f5a06130          SUB      r1,r0,#0xb00
002dfc  39b8              SUBS     r1,r1,#0xb8
002dfe  d103              BNE      |L1.11784|
;;;4928   			{
;;;4929   			avar_bat_as_hndl(in,1);
002e00  2101              MOVS     r1,#1
002e02  4628              MOV      r0,r5
002e04  f7fffffe          BL       avar_bat_as_hndl
                  |L1.11784|
;;;4930   			}
;;;4931   		if(bat[in]._cnt_as>=3005) bat[in]._cnt_as=3005;
002e08  f9b41048          LDRSH    r1,[r4,#0x48]
002e0c  f64030bd          MOV      r0,#0xbbd
002e10  4281              CMP      r1,r0
002e12  db01              BLT      |L1.11800|
002e14  f8a40048          STRH     r0,[r4,#0x48]
                  |L1.11800|
;;;4932   		}
;;;4933   	else 
;;;4934   		{
;;;4935   		bat[in]._cnt_as=0;
;;;4936   		}
;;;4937        
;;;4938        }
;;;4939   #endif 
;;;4940   #endif 
;;;4941   #endif
;;;4942   
;;;4943   }
002e18  e8bd9ffc          POP      {r2-r12,pc}
                  |L1.11804|
002e1c  f8a47048          STRH     r7,[r4,#0x48]         ;4935
002e20  e7fa              B        |L1.11800|
;;;4944   
                          ENDP

                  u_necc_hndl PROC
;;;4951   //-----------------------------------------------
;;;4952   void u_necc_hndl(void)
002e22  b538              PUSH     {r3-r5,lr}
;;;4953   {
;;;4954   signed long temp_L;
;;;4955   signed long temp_SL;
;;;4956   //signed short temp_SS;
;;;4957   signed short t[2];
;;;4958   char i;
;;;4959   
;;;4960   //temp_SS=0;
;;;4961   
;;;4962   #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;4963   
;;;4964   if(!TERMOKOMPENS)
002e24  4885              LDR      r0,|L1.12348|
;;;4965   	{
;;;4966   	u_necc=U0B;
002e26  4c86              LDR      r4,|L1.12352|
002e28  8800              LDRH     r0,[r0,#0]            ;4964  ; TERMOKOMPENS
002e2a  b138              CBZ      r0,|L1.11836|
;;;4967   	}
;;;4968   else
;;;4969   	{
;;;4970   	if(ND_EXT[0])t[0]=20;
002e2c  4885              LDR      r0,|L1.12356|
002e2e  6800              LDR      r0,[r0,#0]  ; ND_EXT
002e30  b140              CBZ      r0,|L1.11844|
002e32  f04f0014          MOV      r0,#0x14
002e36  f8ad0000          STRH     r0,[sp,#0]
002e3a  e007              B        |L1.11852|
                  |L1.11836|
002e3c  487c              LDR      r0,|L1.12336|
002e3e  8800              LDRH     r0,[r0,#0]            ;4966  ; U0B
002e40  8020              STRH     r0,[r4,#0]            ;4966
002e42  e02a              B        |L1.11930|
                  |L1.11844|
;;;4971   	else t[0]=t_ext[0];
002e44  4880              LDR      r0,|L1.12360|
002e46  8800              LDRH     r0,[r0,#0]  ; t_ext
002e48  f8ad0000          STRH     r0,[sp,#0]
                  |L1.11852|
;;;4972   
;;;4973   	mat_temper=t[0];
002e4c  4a7f              LDR      r2,|L1.12364|
002e4e  f9bd1000          LDRSH    r1,[sp,#0]
002e52  6011              STR      r1,[r2,#0]  ; mat_temper
;;;4974   			
;;;4975   	if(mat_temper<0)temp_SL=UB0; 
002e54  487e              LDR      r0,|L1.12368|
002e56  2900              CMP      r1,#0
002e58  f9b00000          LDRSH    r0,[r0,#0]
002e5c  db15              BLT      |L1.11914|
;;;4976   	else 
;;;4977   		{
;;;4978   		if(mat_temper>40)mat_temper=40; 
002e5e  2928              CMP      r1,#0x28
002e60  dd02              BLE      |L1.11880|
002e62  f04f0128          MOV      r1,#0x28
002e66  6011              STR      r1,[r2,#0]  ; mat_temper
                  |L1.11880|
;;;4979   		temp_SL=(UB20-UB0)*10;
002e68  497a              LDR      r1,|L1.12372|
002e6a  f9b11000          LDRSH    r1,[r1,#0]  ; UB20
002e6e  eba10100          SUB      r1,r1,r0
002e72  eb010181          ADD      r1,r1,r1,LSL #2
002e76  ea4f0141          LSL      r1,r1,#1
;;;4980   		temp_SL*=mat_temper;
002e7a  6812              LDR      r2,[r2,#0]  ; mat_temper
002e7c  fb01f102          MUL      r1,r1,r2
;;;4981   		temp_SL/=200;
002e80  f04f02c8          MOV      r2,#0xc8
002e84  fb91f1f2          SDIV     r1,r1,r2
;;;4982   		temp_SL+=UB0;
002e88  4408              ADD      r0,r0,r1
                  |L1.11914|
;;;4983   		}
;;;4984   	if(spc_stat==spcVZ)
002e8a  4973              LDR      r1,|L1.12376|
002e8c  7cc9              LDRB     r1,[r1,#0x13]  ; spc_stat
002e8e  2902              CMP      r1,#2
002e90  d102              BNE      |L1.11928|
;;;4985   		{
;;;4986   		temp_SL=UVZ;
002e92  4872              LDR      r0,|L1.12380|
002e94  f9b00000          LDRSH    r0,[r0,#0]  ; UVZ
                  |L1.11928|
;;;4987   		}
;;;4988   	u_necc=(unsigned int)temp_SL;
002e98  8020              STRH     r0,[r4,#0]
                  |L1.11930|
;;;4989   	///u_necc=3456;
;;;4990   	}  
;;;4991   
;;;4992   //u_necc=2355;
;;;4993   
;;;4994   if(speedChIsOn)
002e9a  4871              LDR      r0,|L1.12384|
002e9c  8800              LDRH     r0,[r0,#0]  ; speedChIsOn
002e9e  b110              CBZ      r0,|L1.11942|
;;;4995   	{
;;;4996   	u_necc=speedChrgVolt;
002ea0  4870              LDR      r0,|L1.12388|
002ea2  8800              LDRH     r0,[r0,#0]  ; speedChrgVolt
002ea4  8020              STRH     r0,[r4,#0]
                  |L1.11942|
;;;4997   	}
;;;4998   
;;;4999   if(mess_find_unvol(MESS2UNECC_HNDL))
002ea6  20be              MOVS     r0,#0xbe
002ea8  f7fffffe          BL       mess_find_unvol
002eac  b128              CBZ      r0,|L1.11962|
;;;5000   	{		
;;;5001   	if(mess_data[0]==PARAM_UNECC_SET)
002eae  486e              LDR      r0,|L1.12392|
002eb0  6801              LDR      r1,[r0,#0]  ; mess_data
002eb2  29bf              CMP      r1,#0xbf
002eb4  d101              BNE      |L1.11962|
;;;5002   		{
;;;5003   		u_necc=mess_data[1];
002eb6  6840              LDR      r0,[r0,#4]  ; mess_data
002eb8  8020              STRH     r0,[r4,#0]
                  |L1.11962|
;;;5004   		}		
;;;5005   	}
;;;5006   #endif
;;;5007   
;;;5008   
;;;5009   #ifndef UKU_220_IPS_TERMOKOMPENSAT
;;;5010   
;;;5011   #ifndef UKU_TELECORE2015
;;;5012   if(unh_cnt0<10)
;;;5013   	{
;;;5014   	unh_cnt0++;
;;;5015   	if(unh_cnt0>=10)
;;;5016   		{
;;;5017   		unh_cnt0=0;
;;;5018   		b1Hz_unh=1;
;;;5019   		}
;;;5020   	}
;;;5021   
;;;5022   if(unh_cnt1<5)
;;;5023   	{
;;;5024   	unh_cnt1++;
;;;5025   	if(unh_cnt1==5)
;;;5026   		{
;;;5027   		unh_cnt1=0;
;;;5028   //		b2Hz_unh=1;
;;;5029   		}
;;;5030   	} 
;;;5031   
;;;5032   
;;;5033   
;;;5034   if(mess_find_unvol(MESS2UNECC_HNDL))
;;;5035   	{		
;;;5036   	if(mess_data[0]==PARAM_UNECC_SET)
;;;5037   		{
;;;5038   		u_necc=mess_data[1];
;;;5039   		}		
;;;5040   	}
;;;5041   
;;;5042   
;;;5043   else if(b1Hz_unh)
;;;5044   	{
;;;5045   	
;;;5046   	if((BAT_IS_ON[0]!=bisON) && (BAT_IS_ON[1]!=bisON))
;;;5047   		{
;;;5048   		
;;;5049   		u_necc=U0B;
;;;5050   		}
;;;5051   	else 
;;;5052   		{
;;;5053   		if(BAT_TYPE==0) //  
;;;5054   			{
;;;5055   			for(i=0;i<2;i++)
;;;5056   				{
;;;5057   				if(BAT_IS_ON[i]==bisON)
;;;5058   					{
;;;5059   					if(bat[i]._nd)t[i]=20;
;;;5060   					else t[i]=bat[i]._Tb;
;;;5061   					}
;;;5062   				else
;;;5063   					{
;;;5064   					t[i]=-20;
;;;5065   					}
;;;5066   				}
;;;5067   			if(t[0]>t[1])mat_temper=t[0];
;;;5068   			else mat_temper=t[1];
;;;5069   			
;;;5070   		
;;;5071   			if(mat_temper<0)temp_SL=UB0; 
;;;5072   			else 
;;;5073   				{
;;;5074   				if(mat_temper>40)mat_temper=40; 
;;;5075   				temp_SL=(UB20-UB0)*10;
;;;5076   				temp_SL*=mat_temper;
;;;5077   				temp_SL/=200;
;;;5078   				temp_SL+=UB0;
;;;5079   				}
;;;5080   			if(spc_stat==spcVZ)
;;;5081   				{
;;;5082   				temp_SL=UVZ;
;;;5083   				}
;;;5084   			u_necc=(unsigned int)temp_SL;
;;;5085   			}
;;;5086   		else if(BAT_TYPE==1) //  
;;;5087   			{
;;;5088   			u_necc=U0B;
;;;5089   					
;;;5090   			u_necc=bat[0]._Ub+10;
;;;5091   
;;;5092   			
;;;5093   			if(spc_stat==spcVZ)
;;;5094   				{
;;;5095   				u_necc=UVZ;
;;;5096   				}
;;;5097   			if(u_necc>=UB0) u_necc=UB0;
;;;5098   			if(u_necc>=UB20) u_necc=UB20;
;;;5099   			}
;;;5100   		}  
;;;5101   	}
;;;5102   #endif
;;;5103   #ifdef UKU_TELECORE2015
;;;5104   
;;;5105   if(unh_cnt0<10)
;;;5106   	{
;;;5107   	unh_cnt0++;
;;;5108   	if(unh_cnt0>=10)
;;;5109   		{
;;;5110   		unh_cnt0=0;
;;;5111   		b1Hz_unh=1;
;;;5112   		}
;;;5113   	}
;;;5114   
;;;5115   if(unh_cnt1<5)
;;;5116   	{
;;;5117   	unh_cnt1++;
;;;5118   	if(unh_cnt1==5)
;;;5119   		{
;;;5120   		unh_cnt1=0;
;;;5121   //		b2Hz_unh=1;
;;;5122   		}
;;;5123   	} 
;;;5124   
;;;5125   
;;;5126   
;;;5127   if(mess_find_unvol(MESS2UNECC_HNDL))
;;;5128   	{		
;;;5129   	if(mess_data[0]==PARAM_UNECC_SET)
;;;5130   		{
;;;5131   		u_necc=mess_data[1];
;;;5132   		}		
;;;5133   	}
;;;5134   
;;;5135   
;;;5136   else if(b1Hz_unh)
;;;5137   	{
;;;5138   	b1Hz_unh=0;
;;;5139   
;;;5140   	if(BAT_TYPE==0)
;;;5141   		{
;;;5142   		if(bat[0]._nd)mat_temper=20;
;;;5143   		else mat_temper=bat[0]._Tb;
;;;5144   
;;;5145   			
;;;5146   		if(mat_temper<0)temp_SL=UB0; 
;;;5147   		else 
;;;5148   			{
;;;5149   			if(mat_temper>40)mat_temper=40; 
;;;5150   			temp_SL=(UB20-UB0)*10;
;;;5151   			temp_SL*=mat_temper;
;;;5152   			temp_SL/=200;
;;;5153   			temp_SL+=UB0;
;;;5154   			}
;;;5155   		if(spc_stat==spcVZ)
;;;5156   			{
;;;5157   			temp_SL=UVZ;
;;;5158   			}
;;;5159   		u_necc=(unsigned int)temp_SL;
;;;5160   	///u_necc=3456;
;;;5161   		}
;;;5162   	else if(BAT_TYPE==1)
;;;5163   		{
;;;5164   		
;;;5165   		gran(&DU_LI_BAT,1,30);
;;;5166   		u_necc=li_bat._Ub+DU_LI_BAT;
;;;5167   		gran(&u_necc,0,UB0);
;;;5168   		gran(&u_necc,0,UB20);
;;;5169   		gran(&u_necc,0,540);		
;;;5170   
;;;5171   
;;;5172   		if(li_bat._batStat!=bsOK)
;;;5173   			{
;;;5174   			u_necc=U0B;
;;;5175   			}
;;;5176   		if(spc_stat==spcVZ)
;;;5177   			{
;;;5178   			u_necc=UVZ;
;;;5179   			}
;;;5180   		/* 
;;;5181   		u_necc=U0B;
;;;5182   		
;;;5183   
;;;5184   	
;;;5185   		u_necc=UB0;
;;;5186   		u_necc=li_bat._Ub+10;
;;;5187   		if((li_bat._Ub<450)||(li_bat._Ub>550))
;;;5188   			{
;;;5189   			lakb_error_cnt++;
;;;5190   			if(lakb_error_cnt>=30)
;;;5191   				{
;;;5192   				lakb_error_cnt=30;
;;;5193   				u_necc=U0B;
;;;5194   				}
;;;5195   			}
;;;5196   		else lakb_error_cnt=0;*/
;;;5197   		}
;;;5198   	else if(BAT_TYPE==2)
;;;5199   		{
;;;5200   		u_necc=U0B;
;;;5201   		
;;;5202   		if(spc_stat==spcVZ)
;;;5203   			{
;;;5204   			u_necc=UVZ;
;;;5205   			}
;;;5206   	
;;;5207   		u_necc=UB0;
;;;5208   		}
;;;5209   
;;;5210   
;;;5211   	
;;;5212   		 
;;;5213   	}
;;;5214   
;;;5215   #endif 
;;;5216   
;;;5217   //u_necc=2356;
;;;5218   #endif//gran(&u_necc,400,UMAX);
;;;5219   
;;;5220   temp_L=(signed long) u_necc;
002eba  f9b40000          LDRSH    r0,[r4,#0]  ; u_necc
;;;5221   temp_L*=98L;
002ebe  f04f0162          MOV      r1,#0x62
002ec2  fb00f101          MUL      r1,r0,r1
;;;5222   temp_L/=100L;
002ec6  f04f0264          MOV      r2,#0x64
002eca  fb91f1f2          SDIV     r1,r1,r2
;;;5223   u_necc_dn=(signed short)temp_L;
002ece  4b67              LDR      r3,|L1.12396|
002ed0  8019              STRH     r1,[r3,#0]
;;;5224   
;;;5225   temp_L=(signed long) u_necc;
;;;5226   temp_L*=102L;
002ed2  f04f0166          MOV      r1,#0x66
002ed6  fb00f001          MUL      r0,r0,r1
;;;5227   temp_L/=100L;
002eda  fb90f0f2          SDIV     r0,r0,r2
;;;5228   u_necc_up=(signed short)temp_L;
002ede  4964              LDR      r1,|L1.12400|
002ee0  8008              STRH     r0,[r1,#0]
;;;5229   
;;;5230   
;;;5231   }
002ee2  bd38              POP      {r3-r5,pc}
;;;5232   
                          ENDP

                  num_necc_hndl PROC
;;;5234   //-----------------------------------------------
;;;5235   void num_necc_hndl(void)
002ee4  e92d41f0          PUSH     {r4-r8,lr}
;;;5236   {
;;;5237   
;;;5238   static short num_necc_block_cnt;
;;;5239   if(num_necc_block_cnt) num_necc_block_cnt--;
002ee8  4c5b              LDR      r4,|L1.12376|
002eea  f9b40024          LDRSH    r0,[r4,#0x24]  ; num_necc_block_cnt
002eee  b110              CBZ      r0,|L1.12022|
002ef0  f1a00001          SUB      r0,r0,#1
002ef4  84a0              STRH     r0,[r4,#0x24]
                  |L1.12022|
;;;5240   
;;;5241   Isumm_=Isumm;
002ef6  485f              LDR      r0,|L1.12404|
002ef8  4d5f              LDR      r5,|L1.12408|
002efa  8800              LDRH     r0,[r0,#0]  ; Isumm
002efc  8028              STRH     r0,[r5,#0]
;;;5242   
;;;5243   if(bat[0]._Ib<0) Isumm_+=(abs(bat[0]._Ib))/10;
002efe  4f5f              LDR      r7,|L1.12412|
002f00  260a              MOVS     r6,#0xa
002f02  f9b70008          LDRSH    r0,[r7,#8]  ; bat
002f06  2800              CMP      r0,#0
002f08  da06              BGE      |L1.12056|
002f0a  f7fffffe          BL       abs
002f0e  fb90f0f6          SDIV     r0,r0,r6
002f12  8829              LDRH     r1,[r5,#0]  ; Isumm_
002f14  4408              ADD      r0,r0,r1
002f16  8028              STRH     r0,[r5,#0]
                  |L1.12056|
;;;5244   if(bat[1]._Ib<0) Isumm_+=(abs(bat[1]._Ib))/10;
002f18  f9b70054          LDRSH    r0,[r7,#0x54]  ; bat
002f1c  2800              CMP      r0,#0
002f1e  da06              BGE      |L1.12078|
002f20  f7fffffe          BL       abs
002f24  fb90f0f6          SDIV     r0,r0,r6
002f28  8829              LDRH     r1,[r5,#0]  ; Isumm_
002f2a  4408              ADD      r0,r0,r1
002f2c  8028              STRH     r0,[r5,#0]
                  |L1.12078|
;;;5245   
;;;5246   num_necc_up=(Isumm_/((signed short)IMAX))+1;
002f2e  4854              LDR      r0,|L1.12416|
002f30  f9b51000          LDRSH    r1,[r5,#0]  ; Isumm_
002f34  f9b00000          LDRSH    r0,[r0,#0]  ; IMAX
002f38  fb91f0f0          SDIV     r0,r1,r0
002f3c  f1000001          ADD      r0,r0,#1
002f40  b2c0              UXTB     r0,r0
002f42  73e0              STRB     r0,[r4,#0xf]
;;;5247   ////Isumm_+=(signed short)((IMAX*(10-KIMAX))/10);
;;;5248   ////Isumm_+=(signed short)(IMAX-IMIN);
;;;5249   
;;;5250   num_necc_down=(Isumm_/((signed short)IMIN))+1;
002f44  4a4f              LDR      r2,|L1.12420|
002f46  f9b22000          LDRSH    r2,[r2,#0]  ; IMIN
002f4a  fb91f1f2          SDIV     r1,r1,r2
002f4e  f1010101          ADD      r1,r1,#1
002f52  b2c9              UXTB     r1,r1
002f54  7421              STRB     r1,[r4,#0x10]
;;;5251   
;;;5252   if(num_necc_up>num_necc)
002f56  4b4c              LDR      r3,|L1.12424|
;;;5253   	{
;;;5254   	num_necc=num_necc_up;
;;;5255   	num_necc_block_cnt=60;
002f58  f04f053c          MOV      r5,#0x3c
002f5c  f9b32000          LDRSH    r2,[r3,#0]            ;5252  ; num_necc
002f60  4290              CMP      r0,r2                 ;5252
002f62  dd02              BLE      |L1.12138|
002f64  8018              STRH     r0,[r3,#0]            ;5254
002f66  84a5              STRH     r5,[r4,#0x24]
002f68  e005              B        |L1.12150|
                  |L1.12138|
;;;5256   	}
;;;5257   else if(num_necc_down<num_necc)
002f6a  4291              CMP      r1,r2
002f6c  da03              BGE      |L1.12150|
;;;5258   	{
;;;5259   	if(!num_necc_block_cnt)
002f6e  8ca0              LDRH     r0,[r4,#0x24]  ; num_necc_block_cnt
002f70  b908              CBNZ     r0,|L1.12150|
;;;5260   		{
;;;5261   		num_necc=num_necc_down;
002f72  8019              STRH     r1,[r3,#0]
;;;5262   		num_necc_block_cnt=60;
002f74  84a5              STRH     r5,[r4,#0x24]
                  |L1.12150|
;;;5263   		}
;;;5264   	}
;;;5265   
;;;5266   if(PAR) num_necc=NUMIST;
002f76  4845              LDR      r0,|L1.12428|
002f78  8801              LDRH     r1,[r0,#0]  ; PAR
002f7a  4845              LDR      r0,|L1.12432|
002f7c  b109              CBZ      r1,|L1.12162|
002f7e  8801              LDRH     r1,[r0,#0]  ; NUMIST
002f80  8019              STRH     r1,[r3,#0]
                  |L1.12162|
;;;5267   
;;;5268   gran(&num_necc,1,NUMIST);
002f82  f9b02000          LDRSH    r2,[r0,#0]  ; NUMIST
002f86  e8bd41f0          POP      {r4-r8,lr}
002f8a  2101              MOVS     r1,#1
002f8c  483e              LDR      r0,|L1.12424|
002f8e  f7ffbffe          B.W      gran
;;;5269   
;;;5270   }
;;;5271   
                          ENDP

                  cntrl_hndl PROC
;;;5272   //-----------------------------------------------
;;;5273   void cntrl_hndl(void)
002f92  e92d5ff0          PUSH     {r4-r12,lr}
;;;5274   {
;;;5275   
;;;5276   IZMAX_=IZMAX;
002f96  483f              LDR      r0,|L1.12436|
002f98  4c2f              LDR      r4,|L1.12376|
002f9a  f9b01000          LDRSH    r1,[r0,#0]  ; IZMAX
002f9e  8721              STRH     r1,[r4,#0x38]
;;;5277   
;;;5278   if(speedChIsOn)IZMAX_=speedChrgCurr;
002fa0  482f              LDR      r0,|L1.12384|
002fa2  8800              LDRH     r0,[r0,#0]  ; speedChIsOn
002fa4  b110              CBZ      r0,|L1.12204|
002fa6  483c              LDR      r0,|L1.12440|
002fa8  8800              LDRH     r0,[r0,#0]  ; speedChrgCurr
002faa  8720              STRH     r0,[r4,#0x38]
                  |L1.12204|
;;;5279   
;;;5280   if(cntrl_stat_blok_cnt)cntrl_stat_blok_cnt--;
002fac  f9b4005a          LDRSH    r0,[r4,#0x5a]  ; cntrl_stat_blok_cnt
002fb0  b118              CBZ      r0,|L1.12218|
002fb2  f1a00001          SUB      r0,r0,#1
002fb6  f8a4005a          STRH     r0,[r4,#0x5a]
                  |L1.12218|
;;;5281   if(cntrl_stat_blok_cnt_)cntrl_stat_blok_cnt_--;
002fba  f9b4005c          LDRSH    r0,[r4,#0x5c]  ; cntrl_stat_blok_cnt_
002fbe  b118              CBZ      r0,|L1.12232|
002fc0  f1a00001          SUB      r0,r0,#1
002fc4  f8a4005c          STRH     r0,[r4,#0x5c]
                  |L1.12232|
;;;5282   
;;;5283   if((bat[0]._temper_stat&0x03)||(bat[1]._temper_stat&0x03))IZMAX_=IZMAX/10;
002fc8  482c              LDR      r0,|L1.12412|
002fca  f04f050a          MOV      r5,#0xa
002fce  f890203f          LDRB     r2,[r0,#0x3f]  ; bat
002fd2  0792              LSLS     r2,r2,#30
002fd4  d103              BNE      |L1.12254|
002fd6  f890008b          LDRB     r0,[r0,#0x8b]  ; bat
002fda  0780              LSLS     r0,r0,#30
002fdc  d002              BEQ      |L1.12260|
                  |L1.12254|
002fde  fb91f0f5          SDIV     r0,r1,r5
002fe2  8720              STRH     r0,[r4,#0x38]
                  |L1.12260|
;;;5284   
;;;5285   
;;;5286   if(ch_cnt0<10)
002fe4  79a0              LDRB     r0,[r4,#6]  ; ch_cnt0
002fe6  2600              MOVS     r6,#0                 ;5278
;;;5287   	{
;;;5288   	ch_cnt0++;
;;;5289   	if(ch_cnt0>=10)
;;;5290   		{
;;;5291   		ch_cnt0=0;
;;;5292   		b1Hz_ch=1;
002fe8  2701              MOVS     r7,#1
002fea  280a              CMP      r0,#0xa               ;5286
002fec  d207              BCS      |L1.12286|
002fee  f1000001          ADD      r0,r0,#1              ;5288
002ff2  b2c0              UXTB     r0,r0                 ;5288
002ff4  71a0              STRB     r0,[r4,#6]            ;5288
002ff6  280a              CMP      r0,#0xa               ;5289
002ff8  d301              BCC      |L1.12286|
002ffa  71a6              STRB     r6,[r4,#6]            ;5291
002ffc  71e7              STRB     r7,[r4,#7]
                  |L1.12286|
;;;5293   		}
;;;5294   	}
;;;5295   
;;;5296   
;;;5297   
;;;5298   
;;;5299   if(mess_find_unvol(MESS2CNTRL_HNDL))
002ffe  20e1              MOVS     r0,#0xe1
003000  f7fffffe          BL       mess_find_unvol
;;;5300   	{
;;;5301   	if(mess_data[0]==PARAM_CNTRL_STAT_PLUS)
;;;5302   		{
;;;5303   		cntrl_stat=cntrl_stat_old+mess_data[1];
;;;5304   		}
;;;5305   	else if(mess_data[0]==PARAM_CNTRL_STAT_MINUS)
;;;5306   		{
;;;5307   		cntrl_stat=cntrl_stat_old-mess_data[1];
;;;5308   		}
;;;5309   	else if(mess_data[0]==PARAM_CNTRL_STAT_STEP_DOWN)
;;;5310   		{
;;;5311   		cntrl_stat--;
;;;5312   
;;;5313   		if((cntrl_stat<=30)||(load_U<USIGN)) mess_send(MESS2KB_HNDL,PARAM_CNTRL_IS_DOWN,0,10);
003004  f8dfc094          LDR      r12,|L1.12444|
;;;5314   
;;;5315   		}
;;;5316   	else if(mess_data[0]==PARAM_CNTRL_STAT_SET)
;;;5317   		{
;;;5318   		cntrl_stat=mess_data[1];
;;;5319   		}
;;;5320   
;;;5321   	else if(mess_data[0]==PARAM_CNTRL_STAT_FAST_REG)
;;;5322   		{
;;;5323   		#ifdef UKU_220
;;;5324   		if(load_U>u_necc)
;;;5325   			{
;;;5326   			if(((load_U-u_necc)>40)&&(cntrl_stat>0))cntrl_stat-=5;
;;;5327   			else if((cntrl_stat)&&b1Hz_ch)cntrl_stat--;
;;;5328   			}
;;;5329   		else if(load_U<u_necc)
;;;5330   			{	
;;;5331   			if(((u_necc-load_U)>40)&&(cntrl_stat<1015))cntrl_stat+=5;
;;;5332   			else	if((cntrl_stat<1020)&&b1Hz_ch)cntrl_stat++;
;;;5333   			}
;;;5334   		#endif	
;;;5335   
;;;5336   		#ifndef UKU_220
;;;5337   
;;;5338   		#ifdef UKU_220_V2
;;;5339   		if(load_U>u_necc)
;;;5340   			{
;;;5341   			if(((load_U-u_necc)>40)&&(cntrl_stat>0))cntrl_stat-=5;
;;;5342   			else if((cntrl_stat)&&b1Hz_ch)cntrl_stat--;
;;;5343   			}
;;;5344   		else if(load_U<u_necc)
;;;5345   			{	
;;;5346   			if(((u_necc-load_U)>40)&&(cntrl_stat<1015))cntrl_stat+=5;
;;;5347   			else	if((cntrl_stat<1020)&&b1Hz_ch)cntrl_stat++;
;;;5348   			}
;;;5349   		#else
;;;5350   
;;;5351   		if(load_U>u_necc)
003008  4b0d              LDR      r3,|L1.12352|
;;;5352   			{
;;;5353   			if(((load_U-u_necc)>10)&&(cntrl_stat>0))cntrl_stat-=5;
;;;5354   			else if((cntrl_stat)&&b1Hz_ch)cntrl_stat--;
;;;5355   			}
;;;5356   		else if(load_U<u_necc)
;;;5357   			{	
;;;5358   			if(((u_necc-load_U)>10)&&(cntrl_stat<1015))cntrl_stat+=5;
;;;5359   			else	if((cntrl_stat<1020)&&b1Hz_ch)cntrl_stat++;
;;;5360   			}
;;;5361   		#endif	
;;;5362   		#endif
;;;5363   		 }
;;;5364   
;;;5365   	}
;;;5366   
;;;5367   else if((b1Hz_ch)&&((!bIBAT_SMKLBR)||(bps[8]._cnt>40)))
00300a  f8df8094          LDR      r8,|L1.12448|
;;;5368   	{
;;;5369   	cntrl_stat_new=cntrl_stat_old;
;;;5370   	
;;;5371   	if((Ibmax/10)>(2*IZMAX_))
;;;5372   		{
;;;5373             if(cntrl_stat_blok_cnt)cntrl_stat_new--;
;;;5374   		else	cntrl_stat_new-=10;
;;;5375   		}		
;;;5376   	else if(((Ibmax/10)<(IZMAX_*2))&&(Ibmax>(IZMAX_*15)))
;;;5377   		{
;;;5378             if(cntrl_stat_blok_cnt)cntrl_stat_new--;
;;;5379             else	cntrl_stat_new-=3;
;;;5380   		}   
;;;5381   	else if((Ibmax<(IZMAX_*15))&&((Ibmax/10)>IZMAX_))
;;;5382   		{
;;;5383   		cntrl_stat_new--;
;;;5384   		}
;;;5385   		
;;;5386   	else if(load_U<u_necc)
;;;5387   		{
;;;5388   		if(load_U<(u_necc-(UB0-UB20)))
;;;5389   			{
;;;5390   			if(Ibmax<0)
;;;5391   				{
;;;5392                       if(cntrl_stat_blok_cnt)cntrl_stat_new++;
;;;5393   				else cntrl_stat_new+=10;
;;;5394   				}
;;;5395   			else if(Ibmax<(IZMAX_*5))
;;;5396   				{
;;;5397                       if(cntrl_stat_blok_cnt)cntrl_stat_new++;
;;;5398   				else	cntrl_stat_new+=2;
;;;5399   				}
;;;5400   			else if(Ibmax<((IZMAX_*95)/10))
;;;5401   				{
;;;5402   				cntrl_stat_new++;
;;;5403   				}					
;;;5404   			}
;;;5405   		else if(load_U<(u_necc-((UB0-UB20)/4)))
;;;5406   			{
;;;5407   			if(Ibmax<(IZMAX_*5))
;;;5408   				{
;;;5409                       if(cntrl_stat_blok_cnt)cntrl_stat_new++;
;;;5410   				else	cntrl_stat_new+=2;
;;;5411   				}
;;;5412   			else if(Ibmax<((IZMAX_*95)/10))
;;;5413   				{
;;;5414   				cntrl_stat_new++;
;;;5415   				}					
;;;5416   			}	
;;;5417   		else if(load_U<(u_necc-1))
;;;5418   			{
;;;5419   			if(Ibmax<((IZMAX_*95)/10))
;;;5420   				{
;;;5421   				cntrl_stat_new++;
;;;5422   				}					
;;;5423   			}					
;;;5424   		}	
;;;5425   	else if((load_U>u_necc)/*&&(!cntrl_blok)*/)
;;;5426   		{
;;;5427   		if(load_U>(u_necc+(UB0-UB20)))
;;;5428   			{
;;;5429                  if(cntrl_stat_blok_cnt)cntrl_stat_new--;
;;;5430   			else	cntrl_stat_new-=10;
;;;5431   			}
;;;5432   		else if(load_U>(u_necc+((UB0-UB20)/4)))
;;;5433   			{
;;;5434                  if(cntrl_stat_blok_cnt)cntrl_stat_new--;
;;;5435   			else cntrl_stat_new-=2;
;;;5436   			}	
;;;5437   		else if(load_U>(u_necc+1))
;;;5438   			{
;;;5439   			cntrl_stat_new--;
;;;5440   			}					
;;;5441   		}
;;;5442   
;;;5443   	gran(&cntrl_stat_new,10,1010);			
00300e  f2403bf2          MOV      r11,#0x3f2
003012  b110              CBZ      r0,|L1.12314|
003014  4914              LDR      r1,|L1.12392|
003016  6808              LDR      r0,[r1,#0]            ;5301  ; mess_data
003018  e044              B        |L1.12452|
                  |L1.12314|
00301a  e0a8              B        |L1.12654|
                  |L1.12316|
                          DCD      lakb
                  |L1.12320|
                          DCD      TBATSIGN
                  |L1.12324|
                          DCD      TBATMAX
                  |L1.12328|
                          DCD      ADR_EE_BAT_RESURS
                  |L1.12332|
                          DCD      UBM_AV
                  |L1.12336|
                          DCD      U0B
                  |L1.12340|
                          DCD      IKB
                  |L1.12344|
                          DCD      USIGN
                  |L1.12348|
                          DCD      TERMOKOMPENS
                  |L1.12352|
                          DCD      u_necc
                  |L1.12356|
                          DCD      ND_EXT
                  |L1.12360|
                          DCD      t_ext
                  |L1.12364|
                          DCD      mat_temper
                  |L1.12368|
                          DCD      UB0
                  |L1.12372|
                          DCD      UB20
                  |L1.12376|
                          DCD      ||area_number.21||
                  |L1.12380|
                          DCD      UVZ
                  |L1.12384|
                          DCD      speedChIsOn
                  |L1.12388|
                          DCD      speedChrgVolt
                  |L1.12392|
                          DCD      mess_data
                  |L1.12396|
                          DCD      u_necc_dn
                  |L1.12400|
                          DCD      u_necc_up
                  |L1.12404|
                          DCD      Isumm
                  |L1.12408|
                          DCD      Isumm_
                  |L1.12412|
                          DCD      bat
                  |L1.12416|
                          DCD      IMAX
                  |L1.12420|
                          DCD      IMIN
                  |L1.12424|
                          DCD      num_necc
                  |L1.12428|
                          DCD      PAR
                  |L1.12432|
                          DCD      NUMIST
                  |L1.12436|
                          DCD      IZMAX
                  |L1.12440|
                          DCD      speedChrgCurr
                  |L1.12444|
                          DCD      load_U
                  |L1.12448|
                          DCD      bps
                  |L1.12452|
0030a4  2864              CMP      r0,#0x64              ;5301
0030a6  d008              BEQ      |L1.12474|
0030a8  2869              CMP      r0,#0x69              ;5305
0030aa  d00b              BEQ      |L1.12484|
0030ac  286e              CMP      r0,#0x6e              ;5309
0030ae  d00f              BEQ      |L1.12496|
0030b0  28e5              CMP      r0,#0xe5              ;5316
0030b2  d022              BEQ      |L1.12538|
0030b4  28e6              CMP      r0,#0xe6              ;5321
0030b6  d023              BEQ      |L1.12544|
                  |L1.12472|
0030b8  e136              B        |L1.13096|
                  |L1.12474|
0030ba  6848              LDR      r0,[r1,#4]            ;5303  ; mess_data
0030bc  8ba1              LDRH     r1,[r4,#0x1c]         ;5303  ; cntrl_stat_old
0030be  4408              ADD      r0,r0,r1              ;5303
0030c0  8360              STRH     r0,[r4,#0x1a]         ;5303
0030c2  e131              B        |L1.13096|
                  |L1.12484|
0030c4  6848              LDR      r0,[r1,#4]            ;5307  ; mess_data
0030c6  8ba1              LDRH     r1,[r4,#0x1c]         ;5307  ; cntrl_stat_old
0030c8  eba10000          SUB      r0,r1,r0              ;5307
0030cc  8360              STRH     r0,[r4,#0x1a]         ;5307
0030ce  e12b              B        |L1.13096|
                  |L1.12496|
0030d0  8b60              LDRH     r0,[r4,#0x1a]         ;5311  ; cntrl_stat
0030d2  f1a00001          SUB      r0,r0,#1              ;5311
0030d6  b200              SXTH     r0,r0                 ;5311
0030d8  8360              STRH     r0,[r4,#0x1a]         ;5311
0030da  281e              CMP      r0,#0x1e              ;5313
0030dc  dd06              BLE      |L1.12524|
0030de  49fa              LDR      r1,|L1.13512|
0030e0  f9bc0000          LDRSH    r0,[r12,#0]           ;5313  ; load_U
0030e4  f9b11000          LDRSH    r1,[r1,#0]            ;5313  ; USIGN
0030e8  4288              CMP      r0,r1                 ;5313
0030ea  dae5              BGE      |L1.12472|
                  |L1.12524|
0030ec  230a              MOVS     r3,#0xa               ;5313
0030ee  2200              MOVS     r2,#0                 ;5313
0030f0  21e7              MOVS     r1,#0xe7              ;5313
0030f2  20e6              MOVS     r0,#0xe6              ;5313
0030f4  f7fffffe          BL       mess_send
0030f8  e116              B        |L1.13096|
                  |L1.12538|
0030fa  6848              LDR      r0,[r1,#4]            ;5318  ; mess_data
0030fc  8360              STRH     r0,[r4,#0x1a]         ;5318
0030fe  e113              B        |L1.13096|
                  |L1.12544|
003100  f9bc0000          LDRSH    r0,[r12,#0]           ;5351  ; load_U
003104  f9b31000          LDRSH    r1,[r3,#0]            ;5351  ; u_necc
003108  4288              CMP      r0,r1                 ;5351
00310a  dd16              BLE      |L1.12602|
00310c  eba00001          SUB      r0,r0,r1              ;5353
003110  280a              CMP      r0,#0xa               ;5353
003112  dd07              BLE      |L1.12580|
003114  f9b4001a          LDRSH    r0,[r4,#0x1a]         ;5353  ; cntrl_stat
003118  2800              CMP      r0,#0                 ;5353
00311a  dd03              BLE      |L1.12580|
00311c  f1a00005          SUB      r0,r0,#5              ;5353
003120  8360              STRH     r0,[r4,#0x1a]         ;5353
003122  e101              B        |L1.13096|
                  |L1.12580|
003124  f9b4001a          LDRSH    r0,[r4,#0x1a]         ;5354  ; cntrl_stat
003128  2800              CMP      r0,#0                 ;5354
00312a  d005              BEQ      |L1.12600|
00312c  79e1              LDRB     r1,[r4,#7]            ;5354  ; b1Hz_ch
00312e  2900              CMP      r1,#0                 ;5354
003130  d002              BEQ      |L1.12600|
003132  f1a00001          SUB      r0,r0,#1              ;5354
003136  8360              STRH     r0,[r4,#0x1a]         ;5354
                  |L1.12600|
003138  e0f6              B        |L1.13096|
                  |L1.12602|
00313a  da0b              BGE      |L1.12628|
00313c  1a08              SUBS     r0,r1,r0              ;5358
00313e  280a              CMP      r0,#0xa               ;5358
003140  dd09              BLE      |L1.12630|
003142  f9b4001a          LDRSH    r0,[r4,#0x1a]         ;5358  ; cntrl_stat
003146  f24031f7          MOV      r1,#0x3f7             ;5358
00314a  4288              CMP      r0,r1                 ;5358
00314c  da03              BGE      |L1.12630|
00314e  f1000005          ADD      r0,r0,#5              ;5358
003152  8360              STRH     r0,[r4,#0x1a]         ;5358
                  |L1.12628|
003154  e0e8              B        |L1.13096|
                  |L1.12630|
003156  f9b4001a          LDRSH    r0,[r4,#0x1a]         ;5359  ; cntrl_stat
00315a  f5b07f7f          CMP      r0,#0x3fc             ;5359
00315e  da05              BGE      |L1.12652|
003160  79e1              LDRB     r1,[r4,#7]            ;5359  ; b1Hz_ch
003162  2900              CMP      r1,#0                 ;5359
003164  d002              BEQ      |L1.12652|
003166  f1000001          ADD      r0,r0,#1              ;5359
00316a  8360              STRH     r0,[r4,#0x1a]         ;5359
                  |L1.12652|
00316c  e0dc              B        |L1.13096|
                  |L1.12654|
00316e  79e0              LDRB     r0,[r4,#7]            ;5367  ; b1Hz_ch
003170  2800              CMP      r0,#0                 ;5367
003172  d072              BEQ      |L1.12890|
003174  48d5              LDR      r0,|L1.13516|
003176  8800              LDRH     r0,[r0,#0]            ;5367  ; bIBAT_SMKLBR
003178  b118              CBZ      r0,|L1.12674|
00317a  f89802a3          LDRB     r0,[r8,#0x2a3]        ;5367  ; bps
00317e  2828              CMP      r0,#0x28              ;5367
003180  d96b              BLS      |L1.12890|
                  |L1.12674|
003182  f9b4001c          LDRSH    r0,[r4,#0x1c]         ;5369  ; cntrl_stat_old
003186  86a0              STRH     r0,[r4,#0x34]         ;5369
003188  f9b41036          LDRSH    r1,[r4,#0x36]         ;5371  ; Ibmax
00318c  8f22              LDRH     r2,[r4,#0x38]         ;5371  ; IZMAX_
00318e  fb91f9f5          SDIV     r9,r1,r5              ;5371
003192  ebb90f42          CMP      r9,r2,LSL #1          ;5371
003196  dd0a              BLE      |L1.12718|
003198  f8b4105a          LDRH     r1,[r4,#0x5a]         ;5373  ; cntrl_stat_blok_cnt
00319c  b119              CBZ      r1,|L1.12710|
00319e  f1a00001          SUB      r0,r0,#1              ;5373
0031a2  86a0              STRH     r0,[r4,#0x34]         ;5373
0031a4  e0b8              B        |L1.13080|
                  |L1.12710|
0031a6  f1a0000a          SUB      r0,r0,#0xa            ;5374
0031aa  86a0              STRH     r0,[r4,#0x34]         ;5374
0031ac  e0b4              B        |L1.13080|
                  |L1.12718|
0031ae  da0e              BGE      |L1.12750|
0031b0  ebc21a02          RSB      r10,r2,r2,LSL #4      ;5376
0031b4  458a              CMP      r10,r1                ;5376
0031b6  da0a              BGE      |L1.12750|
0031b8  f8b4105a          LDRH     r1,[r4,#0x5a]         ;5378  ; cntrl_stat_blok_cnt
0031bc  b119              CBZ      r1,|L1.12742|
0031be  f1a00001          SUB      r0,r0,#1              ;5378
0031c2  86a0              STRH     r0,[r4,#0x34]         ;5378
0031c4  e0a8              B        |L1.13080|
                  |L1.12742|
0031c6  f1a00003          SUB      r0,r0,#3              ;5379
0031ca  86a0              STRH     r0,[r4,#0x34]         ;5379
0031cc  e0a4              B        |L1.13080|
                  |L1.12750|
0031ce  ebc21a02          RSB      r10,r2,r2,LSL #4      ;5381
0031d2  458a              CMP      r10,r1                ;5381
0031d4  dd05              BLE      |L1.12770|
0031d6  4591              CMP      r9,r2                 ;5381
0031d8  dd03              BLE      |L1.12770|
0031da  f1a00001          SUB      r0,r0,#1              ;5383
0031de  86a0              STRH     r0,[r4,#0x34]         ;5383
0031e0  e09a              B        |L1.13080|
                  |L1.12770|
0031e2  f9bcc000          LDRSH    r12,[r12,#0]          ;5386  ; load_U
0031e6  f9b33000          LDRSH    r3,[r3,#0]            ;5386  ; u_necc
0031ea  f8df92e4          LDR      r9,|L1.13520|
0031ee  f8dfa2e4          LDR      r10,|L1.13524|
0031f2  459c              CMP      r12,r3                ;5386
0031f4  da64              BGE      |L1.12992|
0031f6  f9b99000          LDRSH    r9,[r9,#0]            ;5388  ; UB0
0031fa  f9baa000          LDRSH    r10,[r10,#0]          ;5388  ; UB20
0031fe  eba9090a          SUB      r9,r9,r10             ;5388
003202  eba30a09          SUB      r10,r3,r9             ;5388
003206  45e2              CMP      r10,r12               ;5388
003208  dd28              BLE      |L1.12892|
00320a  2900              CMP      r1,#0                 ;5390
00320c  da0a              BGE      |L1.12836|
00320e  f8b4105a          LDRH     r1,[r4,#0x5a]         ;5392  ; cntrl_stat_blok_cnt
003212  b119              CBZ      r1,|L1.12828|
003214  f1000001          ADD      r0,r0,#1              ;5392
003218  86a0              STRH     r0,[r4,#0x34]         ;5392
00321a  e07d              B        |L1.13080|
                  |L1.12828|
00321c  f100000a          ADD      r0,r0,#0xa            ;5393
003220  86a0              STRH     r0,[r4,#0x34]         ;5393
003222  e079              B        |L1.13080|
                  |L1.12836|
003224  eb020382          ADD      r3,r2,r2,LSL #2       ;5395
003228  428b              CMP      r3,r1                 ;5395
00322a  dd0a              BLE      |L1.12866|
00322c  f8b4105a          LDRH     r1,[r4,#0x5a]         ;5397  ; cntrl_stat_blok_cnt
003230  b119              CBZ      r1,|L1.12858|
003232  f1000001          ADD      r0,r0,#1              ;5397
003236  86a0              STRH     r0,[r4,#0x34]         ;5397
003238  e06e              B        |L1.13080|
                  |L1.12858|
00323a  f1000002          ADD      r0,r0,#2              ;5398
00323e  86a0              STRH     r0,[r4,#0x34]         ;5398
003240  e06a              B        |L1.13080|
                  |L1.12866|
003242  ebc21342          RSB      r3,r2,r2,LSL #5       ;5400
003246  eb031282          ADD      r2,r3,r2,LSL #6       ;5400
00324a  fbb2f2f5          UDIV     r2,r2,r5              ;5400
00324e  428a              CMP      r2,r1                 ;5400
003250  dd62              BLE      |L1.13080|
003252  f1000001          ADD      r0,r0,#1              ;5402
003256  86a0              STRH     r0,[r4,#0x34]         ;5402
003258  e05e              B        |L1.13080|
                  |L1.12890|
00325a  e065              B        |L1.13096|
                  |L1.12892|
00325c  ea4f7ae9          ASR      r10,r9,#31            ;5405
003260  eb09799a          ADD      r9,r9,r10,LSR #30     ;5405
003264  eba309a9          SUB      r9,r3,r9,ASR #2       ;5405
003268  45e1              CMP      r9,r12                ;5405
00326a  dd1a              BLE      |L1.12962|
00326c  eb020382          ADD      r3,r2,r2,LSL #2       ;5407
003270  428b              CMP      r3,r1                 ;5407
003272  dd0a              BLE      |L1.12938|
003274  f8b4105a          LDRH     r1,[r4,#0x5a]         ;5409  ; cntrl_stat_blok_cnt
003278  b119              CBZ      r1,|L1.12930|
00327a  f1000001          ADD      r0,r0,#1              ;5409
00327e  86a0              STRH     r0,[r4,#0x34]         ;5409
003280  e04a              B        |L1.13080|
                  |L1.12930|
003282  f1000002          ADD      r0,r0,#2              ;5410
003286  86a0              STRH     r0,[r4,#0x34]         ;5410
003288  e046              B        |L1.13080|
                  |L1.12938|
00328a  ebc21342          RSB      r3,r2,r2,LSL #5       ;5412
00328e  eb031282          ADD      r2,r3,r2,LSL #6       ;5412
003292  fbb2f2f5          UDIV     r2,r2,r5              ;5412
003296  428a              CMP      r2,r1                 ;5412
003298  dd3e              BLE      |L1.13080|
00329a  f1000001          ADD      r0,r0,#1              ;5414
00329e  86a0              STRH     r0,[r4,#0x34]         ;5414
0032a0  e03a              B        |L1.13080|
                  |L1.12962|
0032a2  1e5b              SUBS     r3,r3,#1              ;5417
0032a4  459c              CMP      r12,r3                ;5417
0032a6  da37              BGE      |L1.13080|
0032a8  ebc21342          RSB      r3,r2,r2,LSL #5       ;5419
0032ac  eb031282          ADD      r2,r3,r2,LSL #6       ;5419
0032b0  fbb2f2f5          UDIV     r2,r2,r5              ;5419
0032b4  428a              CMP      r2,r1                 ;5419
0032b6  dd2f              BLE      |L1.13080|
0032b8  f1000001          ADD      r0,r0,#1              ;5421
0032bc  86a0              STRH     r0,[r4,#0x34]         ;5421
0032be  e02b              B        |L1.13080|
                  |L1.12992|
0032c0  dd2a              BLE      |L1.13080|
0032c2  f9b91000          LDRSH    r1,[r9,#0]            ;5427  ; UB0
0032c6  f9ba2000          LDRSH    r2,[r10,#0]           ;5427  ; UB20
0032ca  1a89              SUBS     r1,r1,r2              ;5427
0032cc  18ca              ADDS     r2,r1,r3              ;5427
0032ce  4562              CMP      r2,r12                ;5427
0032d0  da0a              BGE      |L1.13032|
0032d2  f8b4105a          LDRH     r1,[r4,#0x5a]         ;5429  ; cntrl_stat_blok_cnt
0032d6  b119              CBZ      r1,|L1.13024|
0032d8  f1a00001          SUB      r0,r0,#1              ;5429
0032dc  86a0              STRH     r0,[r4,#0x34]         ;5429
0032de  e01b              B        |L1.13080|
                  |L1.13024|
0032e0  f1a0000a          SUB      r0,r0,#0xa            ;5430
0032e4  86a0              STRH     r0,[r4,#0x34]         ;5430
0032e6  e017              B        |L1.13080|
                  |L1.13032|
0032e8  17ca              ASRS     r2,r1,#31             ;5432
0032ea  eb017192          ADD      r1,r1,r2,LSR #30      ;5432
0032ee  eb0301a1          ADD      r1,r3,r1,ASR #2       ;5432
0032f2  4561              CMP      r1,r12                ;5432
0032f4  da0a              BGE      |L1.13068|
0032f6  f8b4105a          LDRH     r1,[r4,#0x5a]         ;5434  ; cntrl_stat_blok_cnt
0032fa  b119              CBZ      r1,|L1.13060|
0032fc  f1a00001          SUB      r0,r0,#1              ;5434
003300  86a0              STRH     r0,[r4,#0x34]         ;5434
003302  e009              B        |L1.13080|
                  |L1.13060|
003304  f1a00002          SUB      r0,r0,#2              ;5435
003308  86a0              STRH     r0,[r4,#0x34]         ;5435
00330a  e005              B        |L1.13080|
                  |L1.13068|
00330c  1c5b              ADDS     r3,r3,#1              ;5437
00330e  459c              CMP      r12,r3                ;5437
003310  dd02              BLE      |L1.13080|
003312  f1a00001          SUB      r0,r0,#1              ;5439
003316  86a0              STRH     r0,[r4,#0x34]         ;5439
                  |L1.13080|
003318  465a              MOV      r2,r11
00331a  210a              MOVS     r1,#0xa
00331c  486e              LDR      r0,|L1.13528|
00331e  f7fffffe          BL       gran
;;;5444   	cntrl_stat_old=cntrl_stat_new;
003322  8ea0              LDRH     r0,[r4,#0x34]  ; cntrl_stat_new
003324  83a0              STRH     r0,[r4,#0x1c]
;;;5445   	cntrl_stat=cntrl_stat_new;	
003326  8360              STRH     r0,[r4,#0x1a]
                  |L1.13096|
;;;5446   	}
;;;5447   
;;;5448   
;;;5449   iiii=0;
003328  7266              STRB     r6,[r4,#9]
;;;5450   for(i=0;i<NUMIST;i++)
00332a  7226              STRB     r6,[r4,#8]
00332c  486b              LDR      r0,|L1.13532|
00332e  f9b02000          LDRSH    r2,[r0,#0]
003332  e00c              B        |L1.13134|
                  |L1.13108|
;;;5451        {
;;;5452        if(bps[i]._cnt<30)iiii=1;
003334  ebc001c0          RSB      r1,r0,r0,LSL #3
003338  eb010141          ADD      r1,r1,r1,LSL #1
00333c  eb080181          ADD      r1,r8,r1,LSL #2
003340  78c9              LDRB     r1,[r1,#3]
003342  291e              CMP      r1,#0x1e
003344  d200              BCS      |L1.13128|
003346  7267              STRB     r7,[r4,#9]
                  |L1.13128|
003348  f1000001          ADD      r0,r0,#1              ;5450
00334c  7220              STRB     r0,[r4,#8]            ;5450
                  |L1.13134|
00334e  7a20              LDRB     r0,[r4,#8]            ;5450  ; i
003350  4290              CMP      r0,r2                 ;5450
003352  dbef              BLT      |L1.13108|
;;;5453        }
;;;5454   
;;;5455   if(iiii==0)
003354  7a60              LDRB     r0,[r4,#9]  ; iiii
003356  b920              CBNZ     r0,|L1.13154|
;;;5456        {
;;;5457        cntrl_stat=600;	
003358  f44f7016          MOV      r0,#0x258
00335c  8360              STRH     r0,[r4,#0x1a]
;;;5458        cntrl_stat_old=600;
00335e  83a0              STRH     r0,[r4,#0x1c]
;;;5459        cntrl_stat_new=600;
003360  86a0              STRH     r0,[r4,#0x34]
                  |L1.13154|
;;;5460   	#ifdef UKU_TELECORE2015
;;;5461   	cntrl_stat=0;
;;;5462   	cntrl_stat_old=0;
;;;5463   	cntrl_stat_new=0;
;;;5464   	#endif
;;;5465        }
;;;5466   gran(&cntrl_stat,10,1010); 
003362  485d              LDR      r0,|L1.13528|
003364  465a              MOV      r2,r11
003366  210a              MOVS     r1,#0xa
003368  381a              SUBS     r0,r0,#0x1a
00336a  f7fffffe          BL       gran
;;;5467   b1Hz_ch=0;
00336e  71e6              STRB     r6,[r4,#7]
                  |L1.13168|
;;;5468   }
003370  e8bd9ff0          POP      {r4-r12,pc}
;;;5469   
                          ENDP

                  ext_drv PROC
;;;5470   //-----------------------------------------------
;;;5471   void ext_drv(void)
003374  e92d5ff0          PUSH     {r4-r12,lr}
;;;5472   {
;;;5473   char i;
;;;5474   
;;;5475   
;;;5476   for(i=0;i<NUMSK;i++)
003378  f04f0000          MOV      r0,#0
00337c  4a5a              LDR      r2,|L1.13544|
;;;5477   	{
;;;5478   	#ifdef UKU_MGTS
;;;5479   	if(adc_buff_[sk_buff_RSTKM[i]]<2000)
;;;5480   	#endif
;;;5481   	#ifdef UKU_RSTKM
;;;5482   	if(adc_buff_[sk_buff_RSTKM[i]]<2000)
;;;5483   	#endif
;;;5484   	#ifdef UKU_3U
;;;5485   	if(adc_buff_[sk_buff_3U[i]]<2000)
;;;5486   	#endif
;;;5487   	#ifdef UKU_GLONASS
;;;5488   	if(adc_buff_[sk_buff_GLONASS[i]]<2000)
;;;5489   	#endif
;;;5490   	#ifdef UKU_KONTUR
;;;5491   	if(adc_buff_[sk_buff_KONTUR[i]]<2000)
;;;5492   	#endif
;;;5493   	#ifdef UKU_6U
;;;5494   	if(adc_buff_[sk_buff_6U[i]]<2000)
;;;5495   	#endif
;;;5496   	#ifdef UKU_220
;;;5497   	if(adc_buff_[sk_buff_220[i]]<2000)
;;;5498   	#endif
;;;5499   	#ifdef UKU_220_V2
;;;5500   	if(adc_buff_[sk_buff_220[i]]<2000)
;;;5501   	#endif
;;;5502   	#ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;5503   	if(adc_buff_[sk_buff_220[i]]<2000)
;;;5504   	#endif
;;;5505   	#ifdef UKU_TELECORE2015
;;;5506   	if(adc_buff_[sk_buff_TELECORE2015[i]]<2000)	 //TODO
;;;5507   	#endif
;;;5508   
;;;5509   		{
;;;5510   		if(sk_cnt[i]<10)
00337e  4b58              LDR      r3,|L1.13536|
;;;5511   			{
;;;5512   			sk_cnt[i]++;
;;;5513   			if(sk_cnt[i]>=10)
;;;5514   				{
;;;5515   				sk_stat[i]=ssON;
003380  4d58              LDR      r5,|L1.13540|
003382  f04f0a01          MOV      r10,#1
;;;5516   				}
;;;5517   			}
;;;5518   		else 
;;;5519   			{
;;;5520   			sk_cnt[i]=10;
003386  f04f0b0a          MOV      r11,#0xa
00338a  4606              MOV      r6,r0                 ;5476
00338c  f9b24000          LDRSH    r4,[r2,#0]            ;5476
003390  e025              B        |L1.13278|
                  |L1.13202|
003392  4956              LDR      r1,|L1.13548|
003394  4f56              LDR      r7,|L1.13552|
003396  5c09              LDRB     r1,[r1,r0]            ;5503
003398  f9371011          LDRSH    r1,[r7,r1,LSL #1]     ;5503
00339c  f5b16ffa          CMP      r1,#0x7d0             ;5503
0033a0  da0e              BGE      |L1.13248|
0033a2  5619              LDRSB    r1,[r3,r0]            ;5510
0033a4  290a              CMP      r1,#0xa               ;5510
0033a6  da08              BGE      |L1.13242|
0033a8  f1010101          ADD      r1,r1,#1              ;5512
0033ac  b249              SXTB     r1,r1                 ;5512
0033ae  5419              STRB     r1,[r3,r0]            ;5512
0033b0  290a              CMP      r1,#0xa               ;5513
0033b2  db11              BLT      |L1.13272|
0033b4  f805a000          STRB     r10,[r5,r0]           ;5515
0033b8  e00e              B        |L1.13272|
                  |L1.13242|
0033ba  f803b000          STRB     r11,[r3,r0]
0033be  e00b              B        |L1.13272|
                  |L1.13248|
;;;5521   			}
;;;5522                  
;;;5523   		}
;;;5524   	else
;;;5525   		{
;;;5526   		if(sk_cnt[i]>=0)
0033c0  5619              LDRSB    r1,[r3,r0]
0033c2  2900              CMP      r1,#0
0033c4  db07              BLT      |L1.13270|
;;;5527   			{
;;;5528   			sk_cnt[i]--;
0033c6  f1a10101          SUB      r1,r1,#1
0033ca  b249              SXTB     r1,r1
0033cc  5419              STRB     r1,[r3,r0]
;;;5529   			if(sk_cnt[i]<=0)
0033ce  2900              CMP      r1,#0
0033d0  dc02              BGT      |L1.13272|
;;;5530   				{
;;;5531   				sk_stat[i]=ssOFF;
0033d2  542e              STRB     r6,[r5,r0]
0033d4  e000              B        |L1.13272|
                  |L1.13270|
;;;5532   				}
;;;5533   			}
;;;5534   		else 
;;;5535   			{
;;;5536   			sk_cnt[i]=0;
0033d6  541e              STRB     r6,[r3,r0]
                  |L1.13272|
0033d8  f1000001          ADD      r0,r0,#1              ;5476
0033dc  b2c0              UXTB     r0,r0                 ;5476
                  |L1.13278|
0033de  42a0              CMP      r0,r4                 ;5476
0033e0  dbd7              BLT      |L1.13202|
;;;5537   			}
;;;5538   		}
;;;5539   	}
;;;5540   
;;;5541   for(i=0;i<NUMSK;i++)
0033e2  f04f0400          MOV      r4,#0
;;;5542   	{
;;;5543   	if(((SK_SIGN[i]==0)&&(sk_stat[i]==ssON))||((SK_SIGN[i])&&(sk_stat[i]==ssOFF)) )
;;;5544   		{
;;;5545   		if(sk_av_cnt[i]<10)
0033e6  f8df910c          LDR      r9,|L1.13556|
;;;5546   			{
;;;5547   			sk_av_cnt[i]++;
;;;5548   			if(sk_av_cnt[i]>=10)
;;;5549   				{
;;;5550   				sk_av_stat[i]=sasON;
0033ea  4f43              LDR      r7,|L1.13560|
;;;5551   				}
;;;5552   			}
;;;5553   		else 
;;;5554   			{
;;;5555   			sk_av_cnt[i]=10;
;;;5556   			}
;;;5557   		}
;;;5558   	else
;;;5559   		{
;;;5560   		if(sk_av_cnt[i]>=0)
;;;5561   			{
;;;5562   			sk_av_cnt[i]--;
;;;5563   			if(sk_av_cnt[i]<=0)
;;;5564   				{
;;;5565   				sk_av_stat[i]=sasOFF;
;;;5566   				}
;;;5567   			}
;;;5568   		else 
;;;5569   			{
;;;5570   			sk_av_cnt[i]=0;
;;;5571   			}
;;;5572   		}
;;;5573   
;;;5574   #ifndef UKU_KONTUR
;;;5575   	if(sk_av_stat_old[i]!=sk_av_stat[i])
0033ec  f8df810c          LDR      r8,|L1.13564|
0033f0  e0c6              B        |L1.13696|
                  |L1.13298|
0033f2  4843              LDR      r0,|L1.13568|
0033f4  f9300014          LDRSH    r0,[r0,r4,LSL #1]     ;5543
0033f8  b910              CBNZ     r0,|L1.13312|
0033fa  5d29              LDRB     r1,[r5,r4]            ;5543
0033fc  2901              CMP      r1,#1                 ;5543
0033fe  d00f              BEQ      |L1.13344|
                  |L1.13312|
003400  b108              CBZ      r0,|L1.13318|
003402  5d28              LDRB     r0,[r5,r4]            ;5543
003404  b160              CBZ      r0,|L1.13344|
                  |L1.13318|
003406  f9190004          LDRSB    r0,[r9,r4]            ;5560
00340a  2800              CMP      r0,#0                 ;5560
00340c  db19              BLT      |L1.13378|
00340e  f1a00001          SUB      r0,r0,#1              ;5562
003412  b240              SXTB     r0,r0                 ;5562
003414  f8090004          STRB     r0,[r9,r4]            ;5562
003418  2800              CMP      r0,#0                 ;5563
00341a  dc14              BGT      |L1.13382|
00341c  553e              STRB     r6,[r7,r4]            ;5565
00341e  e012              B        |L1.13382|
                  |L1.13344|
003420  f9190004          LDRSB    r0,[r9,r4]            ;5545
003424  280a              CMP      r0,#0xa               ;5545
003426  da09              BGE      |L1.13372|
003428  f1000001          ADD      r0,r0,#1              ;5547
00342c  b240              SXTB     r0,r0                 ;5547
00342e  f8090004          STRB     r0,[r9,r4]            ;5547
003432  280a              CMP      r0,#0xa               ;5548
003434  db07              BLT      |L1.13382|
003436  f807a004          STRB     r10,[r7,r4]           ;5550
00343a  e004              B        |L1.13382|
                  |L1.13372|
00343c  f809b004          STRB     r11,[r9,r4]           ;5555
003440  e001              B        |L1.13382|
                  |L1.13378|
003442  f8096004          STRB     r6,[r9,r4]            ;5570
                  |L1.13382|
003446  f8181004          LDRB     r1,[r8,r4]
00344a  5d38              LDRB     r0,[r7,r4]
00344c  4281              CMP      r1,r0
00344e  d00e              BEQ      |L1.13422|
;;;5576   		{
;;;5577   		plazma_sk++;
003450  4a21              LDR      r2,|L1.13528|
003452  3a34              SUBS     r2,r2,#0x34
003454  8e51              LDRH     r1,[r2,#0x32]  ; plazma_sk
003456  f1010101          ADD      r1,r1,#1
00345a  8651              STRH     r1,[r2,#0x32]
;;;5578   		if(sk_av_stat[i]==sasON)
00345c  2801              CMP      r0,#1
00345e  d007              BEQ      |L1.13424|
;;;5579   			{
;;;5580   			if(i==0)snmp_trap_send("SK #1 Alarm",15,1,1);
;;;5581   			else if(i==1)snmp_trap_send("SK #2 Alarm",15,2,1);
;;;5582   			else if(i==2)snmp_trap_send("SK #3 Alarm",15,3,1);
;;;5583   			else if(i==3)snmp_trap_send("SK #4 Alarm",15,4,1);
;;;5584   			}
;;;5585   		else 
;;;5586   			{
;;;5587   			if(i==0)snmp_trap_send("SK #1 Alarm is off",15,1,0);
003460  b354              CBZ      r4,|L1.13496|
;;;5588   			else if(i==1)snmp_trap_send("SK #2 Alarm is off",15,2,0);
003462  2c01              CMP      r4,#1
003464  d072              BEQ      |L1.13644|
;;;5589   			else if(i==2)snmp_trap_send("SK #3 Alarm is off",15,3,0);
003466  2c02              CMP      r4,#2
003468  d077              BEQ      |L1.13658|
;;;5590   			else if(i==3)snmp_trap_send("SK #4 Alarm is off",15,4,0);
00346a  2c03              CMP      r4,#3
00346c  d07c              BEQ      |L1.13672|
                  |L1.13422|
00346e  e081              B        |L1.13684|
                  |L1.13424|
003470  b134              CBZ      r4,|L1.13440|
003472  2c01              CMP      r4,#1                 ;5581
003474  d00b              BEQ      |L1.13454|
003476  2c02              CMP      r4,#2                 ;5582
003478  d010              BEQ      |L1.13468|
00347a  2c03              CMP      r4,#3                 ;5583
00347c  d015              BEQ      |L1.13482|
00347e  e079              B        |L1.13684|
                  |L1.13440|
003480  2301              MOVS     r3,#1                 ;5580
003482  461a              MOV      r2,r3                 ;5580
003484  210f              MOVS     r1,#0xf               ;5580
003486  a01f              ADR      r0,|L1.13572|
003488  f7fffffe          BL       snmp_trap_send
00348c  e072              B        |L1.13684|
                  |L1.13454|
00348e  2301              MOVS     r3,#1                 ;5581
003490  2202              MOVS     r2,#2                 ;5581
003492  210f              MOVS     r1,#0xf               ;5581
003494  a01e              ADR      r0,|L1.13584|
003496  f7fffffe          BL       snmp_trap_send
00349a  e06b              B        |L1.13684|
                  |L1.13468|
00349c  2301              MOVS     r3,#1                 ;5582
00349e  2203              MOVS     r2,#3                 ;5582
0034a0  210f              MOVS     r1,#0xf               ;5582
0034a2  a01e              ADR      r0,|L1.13596|
0034a4  f7fffffe          BL       snmp_trap_send
0034a8  e064              B        |L1.13684|
                  |L1.13482|
0034aa  2301              MOVS     r3,#1                 ;5583
0034ac  2204              MOVS     r2,#4                 ;5583
0034ae  210f              MOVS     r1,#0xf               ;5583
0034b0  a01d              ADR      r0,|L1.13608|
0034b2  f7fffffe          BL       snmp_trap_send
0034b6  e05d              B        |L1.13684|
                  |L1.13496|
0034b8  2300              MOVS     r3,#0                 ;5587
0034ba  2201              MOVS     r2,#1                 ;5587
0034bc  210f              MOVS     r1,#0xf               ;5587
0034be  a01d              ADR      r0,|L1.13620|
0034c0  f7fffffe          BL       snmp_trap_send
0034c4  e056              B        |L1.13684|
0034c6  e041              B        |L1.13644|
                  |L1.13512|
                          DCD      USIGN
                  |L1.13516|
                          DCD      bIBAT_SMKLBR
                  |L1.13520|
                          DCD      UB0
                  |L1.13524|
                          DCD      UB20
                  |L1.13528|
                          DCD      ||area_number.21||+0x34
                  |L1.13532|
                          DCD      NUMIST
                  |L1.13536|
                          DCD      sk_cnt
                  |L1.13540|
                          DCD      sk_stat
                  |L1.13544|
                          DCD      NUMSK
                  |L1.13548|
                          DCD      ||area_number.15||
                  |L1.13552|
                          DCD      ||.bss||+0x400
                  |L1.13556|
                          DCD      sk_av_cnt
                  |L1.13560|
                          DCD      sk_av_stat
                  |L1.13564|
                          DCD      sk_av_stat_old
                  |L1.13568|
                          DCD      SK_SIGN
                  |L1.13572|
003504  534b2023          DCB      "SK #1 Alarm",0
003508  3120416c
00350c  61726d00
                  |L1.13584|
003510  534b2023          DCB      "SK #2 Alarm",0
003514  3220416c
003518  61726d00
                  |L1.13596|
00351c  534b2023          DCB      "SK #3 Alarm",0
003520  3320416c
003524  61726d00
                  |L1.13608|
003528  534b2023          DCB      "SK #4 Alarm",0
00352c  3420416c
003530  61726d00
                  |L1.13620|
003534  534b2023          DCB      "SK #1 Alarm is off",0
003538  3120416c
00353c  61726d20
003540  6973206f
003544  666600  
003547  00                DCB      0
003548  e007              B        |L1.13658|
00354a  e00d              B        |L1.13672|
                  |L1.13644|
00354c  2300              MOVS     r3,#0                 ;5588
00354e  2202              MOVS     r2,#2                 ;5588
003550  210f              MOVS     r1,#0xf               ;5588
003552  a0f6              ADR      r0,|L1.14636|
003554  f7fffffe          BL       snmp_trap_send
003558  e00c              B        |L1.13684|
                  |L1.13658|
00355a  2300              MOVS     r3,#0                 ;5589
00355c  2203              MOVS     r2,#3                 ;5589
00355e  210f              MOVS     r1,#0xf               ;5589
003560  a0f7              ADR      r0,|L1.14656|
003562  f7fffffe          BL       snmp_trap_send
003566  e005              B        |L1.13684|
                  |L1.13672|
003568  2300              MOVS     r3,#0
00356a  2204              MOVS     r2,#4
00356c  210f              MOVS     r1,#0xf
00356e  a0f9              ADR      r0,|L1.14676|
003570  f7fffffe          BL       snmp_trap_send
                  |L1.13684|
;;;5591   			}
;;;5592   	 	}
;;;5593   #endif
;;;5594   
;;;5595   #ifdef UKU_KONTUR
;;;5596   	if(sk_av_stat_old[i]!=sk_av_stat[i])
;;;5597   		{
;;;5598   		plazma_sk++;
;;;5599   		if(sk_av_stat[i]==sasON)
;;;5600   			{
;;;5601   			if(i==0)snmp_trap_send("Door is opened",15,1,1);
;;;5602   			else if(i==1)snmp_trap_send("Smoke Alarm",15,2,1);
;;;5603   			else if(i==2)snmp_trap_send("Shock Sensor Alarm",15,3,1);
;;;5604   			else if(i==3)snmp_trap_send("SK #4 Alarm",15,4,1);
;;;5605   			}
;;;5606   		else 
;;;5607   			{
;;;5608   			if(i==0)snmp_trap_send("Door is closed",15,1,0);
;;;5609   			else if(i==1)snmp_trap_send("Smoke Alarm is off",15,2,0);
;;;5610   			else if(i==2)snmp_trap_send("Shock Sensor Alarm is off",15,3,0);
;;;5611   			else if(i==3)snmp_trap_send("SK #4 Alarm is off",15,4,0);
;;;5612   			}
;;;5613   	 	}
;;;5614   #endif
;;;5615   	sk_av_stat_old[i]=sk_av_stat[i];
003574  5d38              LDRB     r0,[r7,r4]
003576  f8080004          STRB     r0,[r8,r4]
00357a  f1040401          ADD      r4,r4,#1              ;5541
00357e  b2e4              UXTB     r4,r4                 ;5541
                  |L1.13696|
003580  48f9              LDR      r0,|L1.14696|
003582  f9b00000          LDRSH    r0,[r0,#0]            ;5541  ; NUMSK
003586  4284              CMP      r4,r0                 ;5541
003588  f6ffaf33          BLT      |L1.13298|
;;;5616   	}
;;;5617   }
00358c  e6f0              B        |L1.13168|
;;;5618   
                          ENDP

                  zar_superviser_start PROC
;;;5655   //-----------------------------------------------
;;;5656   void zar_superviser_start(void)
00358e  4af7              LDR      r2,|L1.14700|
;;;5657   {
;;;5658   sign_U[0]=1;
003590  f04f0001          MOV      r0,#1
003594  7010              STRB     r0,[r2,#0]
;;;5659   sign_I[0]=1;
003596  49f6              LDR      r1,|L1.14704|
003598  7008              STRB     r0,[r1,#0]
;;;5660   sign_U[1]=1;
00359a  7050              STRB     r0,[r2,#1]
;;;5661   sign_I[1]=1;
00359c  7048              STRB     r0,[r1,#1]
;;;5662   
;;;5663   }
00359e  4770              BX       lr
;;;5664   
                          ENDP

                  zar_superviser_drv PROC
;;;5620   //-----------------------------------------------
;;;5621   void zar_superviser_drv(void)
0035a0  e92d5ff0          PUSH     {r4-r12,lr}
;;;5622   {
;;;5623   
;;;5624   if(((bat[0]._Ub>u_necc_up) || (bat[0]._Ub<u_necc_dn))&&(main_kb_cnt<((TBAT*60)-30))&&(main_kb_cnt>((TBAT*60)-150))) sign_U[0]=0;
0035a4  48f4              LDR      r0,|L1.14712|
0035a6  f8df93d4          LDR      r9,|L1.14716|
0035aa  f8df83c8          LDR      r8,|L1.14708|
0035ae  f9b0c000          LDRSH    r12,[r0,#0]  ; u_necc_up
0035b2  f9b90000          LDRSH    r0,[r9,#0]
0035b6  4cf2              LDR      r4,|L1.14720|
0035b8  ebc01100          RSB      r1,r0,r0,LSL #4
0035bc  f9b87002          LDRSH    r7,[r8,#2]  ; bat
0035c0  f06f0a1d          MVN      r10,#0x1d
0035c4  f06f0b95          MVN      r11,#0x95
0035c8  2500              MOVS     r5,#0
0035ca  4ee8              LDR      r6,|L1.14700|
0035cc  f9b4003c          LDRSH    r0,[r4,#0x3c]
0035d0  eb0a0281          ADD      r2,r10,r1,LSL #2
0035d4  eb0b0381          ADD      r3,r11,r1,LSL #2
0035d8  4567              CMP      r7,r12
0035da  dc05              BGT      |L1.13800|
0035dc  f8dfc3a4          LDR      r12,|L1.14724|
0035e0  f9bcc000          LDRSH    r12,[r12,#0]  ; u_necc_dn
0035e4  4567              CMP      r7,r12
0035e6  da04              BGE      |L1.13810|
                  |L1.13800|
0035e8  4282              CMP      r2,r0
0035ea  dd02              BLE      |L1.13810|
0035ec  4283              CMP      r3,r0
0035ee  da00              BGE      |L1.13810|
0035f0  7035              STRB     r5,[r6,#0]
                  |L1.13810|
;;;5625   
;;;5626   if(((bat[0]._Ib>(2*IKB)) || (bat[0]._Ib<(-IKB*2))) &&(main_kb_cnt<((TBAT*60)-30))&&(main_kb_cnt>((TBAT*60)-150))) sign_I[0]=0;
0035f2  4fe5              LDR      r7,|L1.14728|
0035f4  f9b8c008          LDRSH    r12,[r8,#8]  ; bat
0035f8  f9b7e000          LDRSH    lr,[r7,#0]  ; IKB
0035fc  4fdc              LDR      r7,|L1.14704|
0035fe  ebbc0f4e          CMP      r12,lr,LSL #1
003602  dc04              BGT      |L1.13838|
003604  f1ce0e00          RSB      lr,lr,#0
003608  ebbc0f4e          CMP      r12,lr,LSL #1
00360c  da04              BGE      |L1.13848|
                  |L1.13838|
00360e  4282              CMP      r2,r0
003610  dd02              BLE      |L1.13848|
003612  4283              CMP      r3,r0
003614  da00              BGE      |L1.13848|
003616  703d              STRB     r5,[r7,#0]
                  |L1.13848|
;;;5627   																 
;;;5628   if((main_kb_cnt==((TBAT*60)-10)) &&(spc_stat==spcOFF))
003618  f06f0209          MVN      r2,#9
00361c  eb020181          ADD      r1,r2,r1,LSL #2
003620  4281              CMP      r1,r0
003622  d120              BNE      |L1.13926|
003624  7ce0              LDRB     r0,[r4,#0x13]  ; spc_stat
003626  b9f0              CBNZ     r0,|L1.13926|
;;;5629   	{
;;;5630   	if((sign_U[0]==1) && (sign_I[0]==1) && (lc640_read_int(EE_BAT1_ZAR_CNT)!=BAT_C_REAL[0]) && (NUMBAT) && (!(bat[0]._av&1)))
003628  7830              LDRB     r0,[r6,#0]  ; sign_U
00362a  2801              CMP      r0,#1
00362c  d11b              BNE      |L1.13926|
00362e  7838              LDRB     r0,[r7,#0]  ; sign_I
003630  2801              CMP      r0,#1
003632  d118              BNE      |L1.13926|
003634  f44f70d6          MOV      r0,#0x1ac
003638  f7fffffe          BL       lc640_read_int
00363c  49d3              LDR      r1,|L1.14732|
00363e  f9b11000          LDRSH    r1,[r1,#0]  ; BAT_C_REAL
003642  4288              CMP      r0,r1
003644  d00f              BEQ      |L1.13926|
003646  48d2              LDR      r0,|L1.14736|
003648  8800              LDRH     r0,[r0,#0]  ; NUMBAT
00364a  b160              CBZ      r0,|L1.13926|
00364c  f898003d          LDRB     r0,[r8,#0x3d]  ; bat
003650  07c0              LSLS     r0,r0,#31
003652  d108              BNE      |L1.13926|
;;;5631   		{
;;;5632   		lc640_write_int(EE_BAT1_ZAR_CNT,BAT_C_REAL[0]);
003654  f44f70d6          MOV      r0,#0x1ac
003658  f7fffffe          BL       lc640_write_int
;;;5633   		superviser_cnt++;
00365c  48cd              LDR      r0,|L1.14740|
00365e  7801              LDRB     r1,[r0,#0]  ; superviser_cnt
003660  f1010101          ADD      r1,r1,#1
003664  7001              STRB     r1,[r0,#0]
                  |L1.13926|
;;;5634   		}
;;;5635   	
;;;5636   	}
;;;5637   
;;;5638   if(((bat[0]._Ub>u_necc_up) || (bat[1]._Ub<u_necc_dn))&&(main_kb_cnt<((TBAT*60)-30))&&(main_kb_cnt>((TBAT*60)-150))) sign_U[1]=0;
003666  48c4              LDR      r0,|L1.14712|
003668  f9b81002          LDRSH    r1,[r8,#2]  ; bat
00366c  f9b00000          LDRSH    r0,[r0,#0]  ; u_necc_up
003670  4281              CMP      r1,r0
003672  dc06              BGT      |L1.13954|
003674  48c3              LDR      r0,|L1.14724|
003676  f9b8104e          LDRSH    r1,[r8,#0x4e]  ; bat
00367a  f9b00000          LDRSH    r0,[r0,#0]  ; u_necc_dn
00367e  4281              CMP      r1,r0
003680  da0e              BGE      |L1.13984|
                  |L1.13954|
003682  f9b90000          LDRSH    r0,[r9,#0]  ; TBAT
003686  f9b4103c          LDRSH    r1,[r4,#0x3c]  ; main_kb_cnt
00368a  ebc01000          RSB      r0,r0,r0,LSL #4
00368e  eb0a0280          ADD      r2,r10,r0,LSL #2
003692  428a              CMP      r2,r1
003694  dd04              BLE      |L1.13984|
003696  eb0b0080          ADD      r0,r11,r0,LSL #2
00369a  4288              CMP      r0,r1
00369c  da00              BGE      |L1.13984|
00369e  7075              STRB     r5,[r6,#1]
                  |L1.13984|
;;;5639   
;;;5640   if(((bat[1]._Ib>(2*IKB)) || (bat[1]._Ib<(-IKB*2))) &&(main_kb_cnt<((TBAT*60)-30))&&(main_kb_cnt>((TBAT*60)-150))) sign_I[1]=0;
0036a0  49b9              LDR      r1,|L1.14728|
0036a2  f9b80054          LDRSH    r0,[r8,#0x54]  ; bat
0036a6  f9b11000          LDRSH    r1,[r1,#0]  ; IKB
0036aa  ebb00f41          CMP      r0,r1,LSL #1
0036ae  dc03              BGT      |L1.14008|
0036b0  4249              RSBS     r1,r1,#0
0036b2  ebb00f41          CMP      r0,r1,LSL #1
0036b6  da0e              BGE      |L1.14038|
                  |L1.14008|
0036b8  f9b90000          LDRSH    r0,[r9,#0]  ; TBAT
0036bc  f9b4103c          LDRSH    r1,[r4,#0x3c]  ; main_kb_cnt
0036c0  ebc01000          RSB      r0,r0,r0,LSL #4
0036c4  eb0a0280          ADD      r2,r10,r0,LSL #2
0036c8  428a              CMP      r2,r1
0036ca  dd04              BLE      |L1.14038|
0036cc  eb0b0080          ADD      r0,r11,r0,LSL #2
0036d0  4288              CMP      r0,r1
0036d2  da00              BGE      |L1.14038|
0036d4  707d              STRB     r5,[r7,#1]
                  |L1.14038|
;;;5641   																 
;;;5642   if((main_kb_cnt==((TBAT*60)-10)) &&(spc_stat==spcOFF))
0036d6  f9b90000          LDRSH    r0,[r9,#0]  ; TBAT
0036da  ebc01100          RSB      r1,r0,r0,LSL #4
0036de  f06f0009          MVN      r0,#9
0036e2  eb000081          ADD      r0,r0,r1,LSL #2
0036e6  f9b4103c          LDRSH    r1,[r4,#0x3c]  ; main_kb_cnt
0036ea  4288              CMP      r0,r1
0036ec  d121              BNE      |L1.14130|
0036ee  7ce0              LDRB     r0,[r4,#0x13]  ; spc_stat
0036f0  b9f8              CBNZ     r0,|L1.14130|
;;;5643   	{
;;;5644   	if((sign_U[1]==1) && (sign_I[1]==1) && (lc640_read_int(EE_BAT2_ZAR_CNT)!=BAT_C_REAL[1]) && (NUMBAT==2) && (!(bat[1]._av&1)))
0036f2  7870              LDRB     r0,[r6,#1]  ; sign_U
0036f4  2801              CMP      r0,#1
0036f6  d11c              BNE      |L1.14130|
0036f8  7878              LDRB     r0,[r7,#1]  ; sign_I
0036fa  2801              CMP      r0,#1
0036fc  d119              BNE      |L1.14130|
0036fe  f44f75e5          MOV      r5,#0x1ca
003702  4628              MOV      r0,r5
003704  f7fffffe          BL       lc640_read_int
003708  49a0              LDR      r1,|L1.14732|
00370a  f9b11002          LDRSH    r1,[r1,#2]  ; BAT_C_REAL
00370e  4288              CMP      r0,r1
003710  d00f              BEQ      |L1.14130|
003712  489f              LDR      r0,|L1.14736|
003714  8800              LDRH     r0,[r0,#0]  ; NUMBAT
003716  2802              CMP      r0,#2
003718  d10b              BNE      |L1.14130|
00371a  f8980089          LDRB     r0,[r8,#0x89]  ; bat
00371e  07c0              LSLS     r0,r0,#31
003720  d107              BNE      |L1.14130|
;;;5645   		{
;;;5646   		lc640_write_int(EE_BAT2_ZAR_CNT,BAT_C_REAL[1]);
003722  4628              MOV      r0,r5
003724  f7fffffe          BL       lc640_write_int
;;;5647   		superviser_cnt++;
003728  489a              LDR      r0,|L1.14740|
00372a  7801              LDRB     r1,[r0,#0]  ; superviser_cnt
00372c  f1010101          ADD      r1,r1,#1
003730  7001              STRB     r1,[r0,#0]
                  |L1.14130|
;;;5648   		}
;;;5649   	
;;;5650   	}
;;;5651   
;;;5652   if(main_kb_cnt==((TBAT*60)-2)) zar_superviser_start();
003732  f9b90000          LDRSH    r0,[r9,#0]  ; TBAT
003736  f06f0101          MVN      r1,#1
00373a  ebc01000          RSB      r0,r0,r0,LSL #4
00373e  eb010080          ADD      r0,r1,r0,LSL #2
003742  f9b4103c          LDRSH    r1,[r4,#0x3c]  ; main_kb_cnt
003746  4288              CMP      r0,r1
003748  d102              BNE      |L1.14160|
00374a  e8bd5ff0          POP      {r4-r12,lr}
00374e  e7fe              B        zar_superviser_start
                  |L1.14160|
;;;5653   }
003750  e60e              B        |L1.13168|
;;;5654   
                          ENDP

                  npn_hndl PROC
;;;5665   //-----------------------------------------------
;;;5666   void npn_hndl(void)
003752  e92d03f0          PUSH     {r4-r9}
;;;5667   {
;;;5668   if(NPN_OUT!=npnoOFF)
003756  4890              LDR      r0,|L1.14744|
;;;5669   	{
;;;5670   /*	if(NPN_SIGN==npnsAVNET)
;;;5671   		{
;;;5672   		if(net_av==1)
;;;5673   			{
;;;5674   			if(npn_tz_cnt<TZNPN)
;;;5675   				{
;;;5676   				npn_tz_cnt++;
;;;5677   				if(npn_tz_cnt==TZNPN)
;;;5678   					{
;;;5679   					npn_stat=npnsOFF;
;;;5680   					}
;;;5681   				}
;;;5682   			}
;;;5683   		else
;;;5684   			{
;;;5685   			if(npn_tz_cnt)
;;;5686   				{
;;;5687   				npn_tz_cnt--;
;;;5688   				if(npn_tz_cnt==0)
;;;5689   					{
;;;5690   					npn_stat=npnsON;
;;;5691   					}
;;;5692   				}
;;;5693   			}
;;;5694   		}*/
;;;5695   /*	if(NPN_SIGN==npnsULOAD)
;;;5696   		{
;;;5697   		if(load_U<UONPN)
;;;5698   			{
;;;5699   			if(npn_tz_cnt<TZNPN)
;;;5700   				{
;;;5701   				npn_tz_cnt++;
;;;5702   				if(npn_tz_cnt==TZNPN)
;;;5703   					{
;;;5704   					npn_stat=npnsOFF;
;;;5705   					}
;;;5706   				}
;;;5707   			}
;;;5708   		else if(load_U>UVNPN)
;;;5709   			{
;;;5710   			if(npn_tz_cnt)
;;;5711   				{
;;;5712   				npn_tz_cnt--;
;;;5713   				if(npn_tz_cnt==0)
;;;5714   					{
;;;5715   					npn_stat=npnsON;
;;;5716   					}
;;;5717   				}
;;;5718   			}
;;;5719   		}*/
;;;5720   
;;;5721   	if((load_U<UONPN)&&((net_Ua<UMN)||(net_Ub<UMN)||(net_Uc<UMN)))
;;;5722   		{
;;;5723   		if(npn_tz_cnt<TZNPN)
003758  4f90              LDR      r7,|L1.14748|
;;;5724   			{
;;;5725   			npn_tz_cnt++;
;;;5726   			if(npn_tz_cnt==TZNPN)
;;;5727   				{
;;;5728   				npn_stat=npnsOFF;
00375a  4e91              LDR      r6,|L1.14752|
00375c  7800              LDRB     r0,[r0,#0]            ;5668  ; NPN_OUT
00375e  f04f0c00          MOV      r12,#0                ;5668
;;;5729   				}
;;;5730   			}
;;;5731   		}
;;;5732   	else if((load_U>UVNPN)&&(net_Ua>UMN)&&(net_Ub>UMN)&&(net_Uc>UMN))
;;;5733   		{
;;;5734   		if(npn_tz_cnt)
;;;5735   			{
;;;5736   			npn_tz_cnt--;
;;;5737   			if(npn_tz_cnt==0)
;;;5738   				{
;;;5739   				npn_stat=npnsON;
003762  f04f0801          MOV      r8,#1
003766  b3e8              CBZ      r0,|L1.14308|
003768  488e              LDR      r0,|L1.14756|
00376a  4639              MOV      r1,r7                 ;5723
00376c  f9b05000          LDRSH    r5,[r0,#0]            ;5721  ; load_U
003770  488d              LDR      r0,|L1.14760|
003772  f9b11000          LDRSH    r1,[r1,#0]            ;5723
003776  f9b09000          LDRSH    r9,[r0,#0]            ;5721  ; UONPN
00377a  488c              LDR      r0,|L1.14764|
00377c  454d              CMP      r5,r9                 ;5721
00377e  f9b02000          LDRSH    r2,[r0,#0]            ;5721
003782  488b              LDR      r0,|L1.14768|
003784  f9b03000          LDRSH    r3,[r0,#0]            ;5721
003788  488a              LDR      r0,|L1.14772|
00378a  f9b04000          LDRSH    r4,[r0,#0]            ;5721
00378e  488a              LDR      r0,|L1.14776|
003790  f9b00000          LDRSH    r0,[r0,#0]            ;5721
003794  da13              BGE      |L1.14270|
003796  4282              CMP      r2,r0                 ;5721
003798  db03              BLT      |L1.14242|
00379a  4283              CMP      r3,r0                 ;5721
00379c  db01              BLT      |L1.14242|
00379e  4284              CMP      r4,r0                 ;5721
0037a0  da0d              BGE      |L1.14270|
                  |L1.14242|
0037a2  4886              LDR      r0,|L1.14780|
0037a4  f9b02000          LDRSH    r2,[r0,#0]            ;5723  ; TZNPN
0037a8  4291              CMP      r1,r2                 ;5723
0037aa  da23              BGE      |L1.14324|
0037ac  f1010101          ADD      r1,r1,#1              ;5725
0037b0  b208              SXTH     r0,r1                 ;5725
0037b2  8038              STRH     r0,[r7,#0]            ;5725
0037b4  4290              CMP      r0,r2                 ;5726
0037b6  d11d              BNE      |L1.14324|
0037b8  f886c000          STRB     r12,[r6,#0]           ;5728
0037bc  e01a              B        |L1.14324|
                  |L1.14270|
0037be  f8dfc200          LDR      r12,|L1.14784|
0037c2  f9bcc000          LDRSH    r12,[r12,#0]          ;5732  ; UVNPN
0037c6  4565              CMP      r5,r12                ;5732
0037c8  dd14              BLE      |L1.14324|
0037ca  4282              CMP      r2,r0                 ;5732
0037cc  dd12              BLE      |L1.14324|
0037ce  4283              CMP      r3,r0                 ;5732
0037d0  dd10              BLE      |L1.14324|
0037d2  4284              CMP      r4,r0                 ;5732
0037d4  dd0e              BLE      |L1.14324|
0037d6  b169              CBZ      r1,|L1.14324|
0037d8  f1a10101          SUB      r1,r1,#1              ;5736
0037dc  b208              SXTH     r0,r1                 ;5736
0037de  8038              STRH     r0,[r7,#0]            ;5736
0037e0  b940              CBNZ     r0,|L1.14324|
0037e2  e000              B        |L1.14310|
                  |L1.14308|
0037e4  e002              B        |L1.14316|
                  |L1.14310|
0037e6  f8868000          STRB     r8,[r6,#0]
0037ea  e003              B        |L1.14324|
                  |L1.14316|
;;;5740   				}
;;;5741   			}
;;;5742   		}
;;;5743   	}
;;;5744   else
;;;5745   	{
;;;5746   	npn_tz_cnt=0;
0037ec  f8a7c000          STRH     r12,[r7,#0]
;;;5747   	npn_stat=npnsON;
0037f0  f8868000          STRB     r8,[r6,#0]
                  |L1.14324|
;;;5748   	}
;;;5749   
;;;5750   if(npn_stat==npnsOFF) mess_send(MESS2RELE_HNDL,PARAM_RELE_NPN,1,15);
0037f4  7830              LDRB     r0,[r6,#0]  ; npn_stat
0037f6  2800              CMP      r0,#0
0037f8  d107              BNE      |L1.14346|
0037fa  e8bd03f0          POP      {r4-r9}
0037fe  230f              MOVS     r3,#0xf
003800  2201              MOVS     r2,#1
003802  216e              MOVS     r1,#0x6e
003804  20d2              MOVS     r0,#0xd2
003806  f7ffbffe          B.W      mess_send
                  |L1.14346|
;;;5751   
;;;5752   
;;;5753   }
00380a  e8bd03f0          POP      {r4-r9}
00380e  4770              BX       lr
;;;5754   
                          ENDP

                  speedChargeHndl PROC
;;;5755   //-----------------------------------------------
;;;5756   void speedChargeHndl(void)
003810  b5f8              PUSH     {r3-r7,lr}
;;;5757   {
;;;5758   if(speedChIsOn)
003812  4f6c              LDR      r7,|L1.14788|
;;;5759   	{
;;;5760   	speedChTimeCnt++;
;;;5761   	if(speedChTimeCnt>=((signed long)speedChrgTimeInHour*3600L))
;;;5762   		{
;;;5763   		speedChIsOn=0;
;;;5764   		}
;;;5765   	if(speedChrgBlckStat)
003814  4d6c              LDR      r5,|L1.14792|
003816  2400              MOVS     r4,#0                 ;5758
003818  8838              LDRH     r0,[r7,#0]            ;5758  ; speedChIsOn
00381a  b198              CBZ      r0,|L1.14404|
00381c  4a6b              LDR      r2,|L1.14796|
00381e  6811              LDR      r1,[r2,#0]            ;5760  ; speedChTimeCnt
003820  f1010101          ADD      r1,r1,#1              ;5760
003824  6011              STR      r1,[r2,#0]            ;5760  ; speedChTimeCnt
003826  486a              LDR      r0,|L1.14800|
003828  f9b00000          LDRSH    r0,[r0,#0]            ;5761  ; speedChrgTimeInHour
00382c  ebc01340          RSB      r3,r0,r0,LSL #5       ;5761
003830  ebc32000          RSB      r0,r3,r0,LSL #8       ;5761
003834  ebb11f00          CMP      r1,r0,LSL #4          ;5761
003838  db00              BLT      |L1.14396|
00383a  803c              STRH     r4,[r7,#0]            ;5763
                  |L1.14396|
00383c  8828              LDRH     r0,[r5,#0]  ; speedChrgBlckStat
00383e  b108              CBZ      r0,|L1.14404|
;;;5766   		{
;;;5767   		speedChIsOn=0;
003840  803c              STRH     r4,[r7,#0]
;;;5768   		speedChTimeCnt=0;
003842  6014              STR      r4,[r2,#0]  ; speedChTimeCnt
                  |L1.14404|
;;;5769   		}
;;;5770   	}
;;;5771   
;;;5772   
;;;5773   
;;;5774   if(speedChrgAvtEn)
003844  4863              LDR      r0,|L1.14804|
;;;5775   	{
;;;5776   	if(!speedChIsOn)
;;;5777   		{
;;;5778   		if((load_U<u_necc)&&((u_necc-load_U)>speedChrgDU)&&(abs(Ib_ips_termokompensat/10-IZMAX)<5)&&(!speedChrgBlckStat))
;;;5779   			{
;;;5780   			speedChIsOn=1;
003846  2601              MOVS     r6,#1
003848  8800              LDRH     r0,[r0,#0]            ;5774  ; speedChrgAvtEn
00384a  b300              CBZ      r0,|L1.14478|
00384c  8838              LDRH     r0,[r7,#0]            ;5776  ; speedChIsOn
00384e  b9f0              CBNZ     r0,|L1.14478|
003850  4854              LDR      r0,|L1.14756|
003852  4961              LDR      r1,|L1.14808|
003854  f9b00000          LDRSH    r0,[r0,#0]            ;5778  ; load_U
003858  f9b11000          LDRSH    r1,[r1,#0]            ;5778  ; u_necc
00385c  4288              CMP      r0,r1                 ;5778
00385e  da16              BGE      |L1.14478|
003860  1a08              SUBS     r0,r1,r0              ;5778
003862  495e              LDR      r1,|L1.14812|
003864  f9b11000          LDRSH    r1,[r1,#0]            ;5778  ; speedChrgDU
003868  4288              CMP      r0,r1                 ;5778
00386a  dd10              BLE      |L1.14478|
00386c  485c              LDR      r0,|L1.14816|
00386e  210a              MOVS     r1,#0xa               ;5778
003870  f9b00000          LDRSH    r0,[r0,#0]            ;5778  ; Ib_ips_termokompensat
003874  fb90f0f1          SDIV     r0,r0,r1              ;5778
003878  495a              LDR      r1,|L1.14820|
00387a  8809              LDRH     r1,[r1,#0]            ;5778  ; IZMAX
00387c  1a40              SUBS     r0,r0,r1              ;5778
00387e  b200              SXTH     r0,r0                 ;5778
003880  f7fffffe          BL       abs
003884  2805              CMP      r0,#5                 ;5778
003886  da02              BGE      |L1.14478|
003888  8828              LDRH     r0,[r5,#0]            ;5778  ; speedChrgBlckStat
00388a  b900              CBNZ     r0,|L1.14478|
00388c  803e              STRH     r6,[r7,#0]
                  |L1.14478|
;;;5781   			}
;;;5782   		}
;;;5783   	}
;;;5784   
;;;5785   
;;;5786   
;;;5787   if((speedChrgBlckSrc!=1)&&(speedChrgBlckSrc!=2)) speedChrgBlckStat=0;
00388e  4856              LDR      r0,|L1.14824|
003890  f9b00000          LDRSH    r0,[r0,#0]  ; speedChrgBlckSrc
003894  2801              CMP      r0,#1
003896  d003              BEQ      |L1.14496|
003898  2802              CMP      r0,#2
00389a  d001              BEQ      |L1.14496|
00389c  802c              STRH     r4,[r5,#0]
00389e  e026              B        |L1.14574|
                  |L1.14496|
;;;5788   else
;;;5789   	{
;;;5790   	speedChrgBlckStat=0;
0038a0  802c              STRH     r4,[r5,#0]
;;;5791   	if(speedChrgBlckSrc==1)
;;;5792   		{
;;;5793   		if(((speedChrgBlckLog==0)&&(adc_buff_[11]>2000)) || ((speedChrgBlckLog==1)&&(adc_buff_[11]<2000))) speedChrgBlckStat=1;
0038a2  4b52              LDR      r3,|L1.14828|
0038a4  4952              LDR      r1,|L1.14832|
0038a6  f44f62fa          MOV      r2,#0x7d0
0038aa  2801              CMP      r0,#1                 ;5791
0038ac  d002              BEQ      |L1.14516|
;;;5794   		}
;;;5795   	else if(speedChrgBlckSrc==2)
0038ae  2802              CMP      r0,#2
0038b0  d00f              BEQ      |L1.14546|
0038b2  e01c              B        |L1.14574|
                  |L1.14516|
0038b4  f9b30000          LDRSH    r0,[r3,#0]            ;5793  ; speedChrgBlckLog
0038b8  b918              CBNZ     r0,|L1.14530|
0038ba  f9b13016          LDRSH    r3,[r1,#0x16]         ;5793  ; adc_buff_
0038be  4293              CMP      r3,r2                 ;5793
0038c0  dc05              BGT      |L1.14542|
                  |L1.14530|
0038c2  2801              CMP      r0,#1                 ;5793
0038c4  d113              BNE      |L1.14574|
0038c6  f9b10016          LDRSH    r0,[r1,#0x16]         ;5793  ; adc_buff_
0038ca  4290              CMP      r0,r2                 ;5793
0038cc  da0f              BGE      |L1.14574|
                  |L1.14542|
0038ce  802e              STRH     r6,[r5,#0]            ;5793
0038d0  e00d              B        |L1.14574|
                  |L1.14546|
;;;5796   		{
;;;5797   		if(((speedChrgBlckLog==0)&&(adc_buff_[13]>2000)) || ((speedChrgBlckLog==1)&&(adc_buff_[13]<2000))) speedChrgBlckStat=1;
0038d2  f9b30000          LDRSH    r0,[r3,#0]  ; speedChrgBlckLog
0038d6  b918              CBNZ     r0,|L1.14560|
0038d8  f9b1301a          LDRSH    r3,[r1,#0x1a]  ; adc_buff_
0038dc  4293              CMP      r3,r2
0038de  dc05              BGT      |L1.14572|
                  |L1.14560|
0038e0  2801              CMP      r0,#1
0038e2  d104              BNE      |L1.14574|
0038e4  f9b1001a          LDRSH    r0,[r1,#0x1a]  ; adc_buff_
0038e8  4290              CMP      r0,r2
0038ea  da00              BGE      |L1.14574|
                  |L1.14572|
0038ec  802e              STRH     r6,[r5,#0]
                  |L1.14574|
;;;5798   		}
;;;5799   	}
;;;5800   
;;;5801   
;;;5802   if(speedChrgBlckStat==1)
0038ee  8828              LDRH     r0,[r5,#0]  ; speedChrgBlckStat
;;;5803   	{
;;;5804   
;;;5805   	//speedChargeStartStop();
;;;5806   
;;;5807   	speedChrgShowCnt++;
0038f0  4940              LDR      r1,|L1.14836|
0038f2  2801              CMP      r0,#1                 ;5802
0038f4  d001              BEQ      |L1.14586|
;;;5808   	if(speedChrgShowCnt>=30)	
;;;5809   		{
;;;5810   		speedChrgShowCnt=0;
;;;5811   		show_mess(	"          ",
;;;5812   					"               ",
;;;5813   					"     !!!    ",
;;;5814   					"                    ",
;;;5815   					5000);
;;;5816   		}
;;;5817   	}
;;;5818   else speedChrgShowCnt=0;
0038f6  700c              STRB     r4,[r1,#0]
                  |L1.14584|
;;;5819   
;;;5820   
;;;5821   }
0038f8  bdf8              POP      {r3-r7,pc}
                  |L1.14586|
0038fa  7808              LDRB     r0,[r1,#0]            ;5807  ; speedChrgShowCnt
0038fc  f1000001          ADD      r0,r0,#1              ;5807
003900  b2c0              UXTB     r0,r0                 ;5807
003902  7008              STRB     r0,[r1,#0]            ;5807
003904  281e              CMP      r0,#0x1e              ;5808
003906  d3f7              BCC      |L1.14584|
003908  700c              STRB     r4,[r1,#0]            ;5810
00390a  f2413088          MOV      r0,#0x1388            ;5811
00390e  9000              STR      r0,[sp,#0]            ;5811
003910  a339              ADR      r3,|L1.14840|
003912  a23f              ADR      r2,|L1.14864|
003914  a144              ADR      r1,|L1.14888|
003916  a04a              ADR      r0,|L1.14912|
003918  f7fffffe          BL       show_mess
00391c  bdf8              POP      {r3-r7,pc}
;;;5822   
                          ENDP

                  speedChargeStartStop PROC
;;;5823   //-----------------------------------------------
;;;5824   void speedChargeStartStop(void)
00391e  4829              LDR      r0,|L1.14788|
;;;5825   {
;;;5826   if(speedChIsOn)
003920  2100              MOVS     r1,#0
003922  8802              LDRH     r2,[r0,#0]  ; speedChIsOn
003924  b10a              CBZ      r2,|L1.14634|
;;;5827   	{
;;;5828   	speedChIsOn=0;
003926  8001              STRH     r1,[r0,#0]
                  |L1.14632|
;;;5829   	}
;;;5830   
;;;5831   else	if(speedChrgBlckStat==0)
;;;5832   	{
;;;5833   	speedChIsOn=1;
;;;5834   	speedChTimeCnt=0;
;;;5835   	} 
;;;5836   
;;;5837   }
003928  4770              BX       lr
                  |L1.14634|
00392a  e095              B        |L1.14936|
                  |L1.14636|
00392c  534b2023          DCB      "SK #2 Alarm is off",0
003930  3220416c
003934  61726d20
003938  6973206f
00393c  666600  
00393f  00                DCB      0
                  |L1.14656|
003940  534b2023          DCB      "SK #3 Alarm is off",0
003944  3320416c
003948  61726d20
00394c  6973206f
003950  666600  
003953  00                DCB      0
                  |L1.14676|
003954  534b2023          DCB      "SK #4 Alarm is off",0
003958  3420416c
00395c  61726d20
003960  6973206f
003964  666600  
003967  00                DCB      0
                  |L1.14696|
                          DCD      NUMSK
                  |L1.14700|
                          DCD      sign_U
                  |L1.14704|
                          DCD      sign_I
                  |L1.14708|
                          DCD      bat
                  |L1.14712|
                          DCD      u_necc_up
                  |L1.14716|
                          DCD      TBAT
                  |L1.14720|
                          DCD      ||area_number.21||
                  |L1.14724|
                          DCD      u_necc_dn
                  |L1.14728|
                          DCD      IKB
                  |L1.14732|
                          DCD      BAT_C_REAL
                  |L1.14736|
                          DCD      NUMBAT
                  |L1.14740|
                          DCD      superviser_cnt
                  |L1.14744|
                          DCD      NPN_OUT
                  |L1.14748|
                          DCD      npn_tz_cnt
                  |L1.14752|
                          DCD      npn_stat
                  |L1.14756|
                          DCD      load_U
                  |L1.14760|
                          DCD      UONPN
                  |L1.14764|
                          DCD      net_Ua
                  |L1.14768|
                          DCD      net_Ub
                  |L1.14772|
                          DCD      net_Uc
                  |L1.14776|
                          DCD      UMN
                  |L1.14780|
                          DCD      TZNPN
                  |L1.14784|
                          DCD      UVNPN
                  |L1.14788|
                          DCD      speedChIsOn
                  |L1.14792|
                          DCD      speedChrgBlckStat
                  |L1.14796|
                          DCD      speedChTimeCnt
                  |L1.14800|
                          DCD      speedChrgTimeInHour
                  |L1.14804|
                          DCD      speedChrgAvtEn
                  |L1.14808|
                          DCD      u_necc
                  |L1.14812|
                          DCD      speedChrgDU
                  |L1.14816|
                          DCD      Ib_ips_termokompensat
                  |L1.14820|
                          DCD      IZMAX
                  |L1.14824|
                          DCD      speedChrgBlckSrc
                  |L1.14828|
                          DCD      speedChrgBlckLog
                  |L1.14832|
                          DCD      ||.bss||+0x400
                  |L1.14836|
                          DCD      speedChrgShowCnt
                  |L1.14840|
0039f8  20202020          DCB      "                    ",0
0039fc  20202020
003a00  20202020
003a04  20202020
003a08  20202020
003a0c  00      
003a0d  00                DCB      0
003a0e  00                DCB      0
003a0f  00                DCB      0
                  |L1.14864|
003a10  20202020          DCB      "     ",199,192,207,208,197,217,197,205,"!!!    ",0
003a14  20c7c0cf
003a18  d0c5d9c5
003a1c  cd212121
003a20  20202020
003a24  00      
003a25  00                DCB      0
003a26  00                DCB      0
003a27  00                DCB      0
                  |L1.14888|
003a28  20202020          DCB      "       ",199,192,208,223,196,"        ",0
003a2c  202020c7
003a30  c0d0dfc4
003a34  20202020
003a38  20202020
003a3c  00      
003a3d  00                DCB      0
003a3e  00                DCB      0
003a3f  00                DCB      0
                  |L1.14912|
003a40  20202020          DCB      "     ",211,209,202,206,208,197,205,205,219,201,"     ",0
003a44  20d3d1ca
003a48  ced0c5cd
003a4c  cddbc920
003a50  20202020
003a54  00      
003a55  00                DCB      0
003a56  00                DCB      0
003a57  00                DCB      0
                  |L1.14936|
003a58  4af5              LDR      r2,|L1.15920|
003a5a  8812              LDRH     r2,[r2,#0]            ;5831  ; speedChrgBlckStat
003a5c  2a00              CMP      r2,#0                 ;5831
003a5e  f47faf63          BNE      |L1.14632|
003a62  f04f0201          MOV      r2,#1                 ;5833
003a66  8002              STRH     r2,[r0,#0]            ;5833
003a68  48f2              LDR      r0,|L1.15924|
003a6a  6001              STR      r1,[r0,#0]            ;5834  ; speedChTimeCnt
003a6c  e75c              B        |L1.14632|
;;;5838   
                          ENDP

                  numOfForvardBps_hndl PROC
;;;5839   //-----------------------------------------------
;;;5840   void	numOfForvardBps_hndl(void)			//       
003a6e  e92d41f0          PUSH     {r4-r8,lr}
;;;5841   {
;;;5842   numOfForvardBps=0;
003a72  4cf1              LDR      r4,|L1.15928|
003a74  f04f0500          MOV      r5,#0
003a78  7625              STRB     r5,[r4,#0x18]
;;;5843   
;;;5844   //FORVARDBPSCHHOUR=10;
;;;5845   
;;;5846   if((FORVARDBPSCHHOUR<=0)||(FORVARDBPSCHHOUR>500))
003a7a  4ef0              LDR      r6,|L1.15932|
003a7c  f9b60000          LDRSH    r0,[r6,#0]  ; FORVARDBPSCHHOUR
003a80  2800              CMP      r0,#0
003a82  dd02              BLE      |L1.14986|
003a84  f5b07ffa          CMP      r0,#0x1f4
003a88  dd02              BLE      |L1.14992|
                  |L1.14986|
;;;5847   	{
;;;5848   	FORVARDBPSCHHOUR=0;
003a8a  8035              STRH     r5,[r6,#0]
                  |L1.14988|
;;;5849   	return;
;;;5850   	}
;;;5851   
;;;5852   numOfForvardBps_minCnt++;
;;;5853   
;;;5854   
;;;5855   if(numOfForvardBps_minCnt>=60)
;;;5856   	{
;;;5857   	numOfForvardBps_minCnt=0;
;;;5858   	numOfForvardBps_hourCnt=lc640_read_int(EE_FORVBPSHOURCNT);
;;;5859   	numOfForvardBps_hourCnt++;
;;;5860   	if(numOfForvardBps_hourCnt>=(FORVARDBPSCHHOUR*NUMIST))
;;;5861   		{
;;;5862   		numOfForvardBps_hourCnt=0;
;;;5863   		}
;;;5864   	lc640_write_int(EE_FORVBPSHOURCNT,numOfForvardBps_hourCnt);
;;;5865   	}
;;;5866   
;;;5867   numOfForvardBps=numOfForvardBps_hourCnt/FORVARDBPSCHHOUR; 
;;;5868   }
003a8c  e8bd81f0          POP      {r4-r8,pc}
                  |L1.14992|
003a90  7e60              LDRB     r0,[r4,#0x19]         ;5852  ; numOfForvardBps_minCnt
003a92  f1000001          ADD      r0,r0,#1              ;5852
003a96  b2c0              UXTB     r0,r0                 ;5852
003a98  7660              STRB     r0,[r4,#0x19]         ;5852
003a9a  283c              CMP      r0,#0x3c              ;5855
003a9c  d31a              BCC      |L1.15060|
003a9e  7665              STRB     r5,[r4,#0x19]         ;5857
003aa0  f44f7794          MOV      r7,#0x128             ;5858
003aa4  4638              MOV      r0,r7                 ;5858
003aa6  f7fffffe          BL       lc640_read_int
003aaa  f1000001          ADD      r0,r0,#1              ;5859
003aae  b200              SXTH     r0,r0                 ;5859
003ab0  f8a4005e          STRH     r0,[r4,#0x5e]         ;5859
003ab4  4ae2              LDR      r2,|L1.15936|
003ab6  f9b61000          LDRSH    r1,[r6,#0]            ;5860  ; FORVARDBPSCHHOUR
003aba  f9b22000          LDRSH    r2,[r2,#0]            ;5860  ; NUMIST
003abe  fb01f102          MUL      r1,r1,r2              ;5860
003ac2  4281              CMP      r1,r0                 ;5860
003ac4  dc01              BGT      |L1.15050|
003ac6  f8a4505e          STRH     r5,[r4,#0x5e]         ;5862
                  |L1.15050|
003aca  f9b4105e          LDRSH    r1,[r4,#0x5e]         ;5864  ; numOfForvardBps_hourCnt
003ace  4638              MOV      r0,r7                 ;5864
003ad0  f7fffffe          BL       lc640_write_int
                  |L1.15060|
003ad4  f9b4005e          LDRSH    r0,[r4,#0x5e]         ;5867  ; numOfForvardBps_hourCnt
003ad8  f9b61000          LDRSH    r1,[r6,#0]            ;5867  ; FORVARDBPSCHHOUR
003adc  fb90f0f1          SDIV     r0,r0,r1              ;5867
003ae0  7620              STRB     r0,[r4,#0x18]         ;5867
003ae2  e7d3              B        |L1.14988|
;;;5869   
                          ENDP

                  numOfForvardBps_init PROC
;;;5870   //-----------------------------------------------
;;;5871   void	numOfForvardBps_init(void)			//         
003ae4  b510              PUSH     {r4,lr}
;;;5872   {									//    -   
;;;5873   lc640_write_int(EE_FORVBPSHOURCNT,0);
003ae6  2100              MOVS     r1,#0
003ae8  f44f7094          MOV      r0,#0x128
003aec  f7fffffe          BL       lc640_write_int
;;;5874   numOfForvardBps_minCnt=0;
003af0  49d1              LDR      r1,|L1.15928|
003af2  f04f0000          MOV      r0,#0
003af6  7648              STRB     r0,[r1,#0x19]
;;;5875   }
003af8  bd10              POP      {r4,pc}
;;;5876   
                          ENDP

                  outVoltContrHndl PROC
;;;5877   //-----------------------------------------------
;;;5878   void outVoltContrHndl(void)
003afa  b510              PUSH     {r4,lr}
;;;5879   { 
;;;5880   if((load_U>U_OUT_KONTR_MAX)||(load_U<U_OUT_KONTR_MIN))
003afc  4cd1              LDR      r4,|L1.15940|
003afe  48d2              LDR      r0,|L1.15944|
;;;5881   	{
;;;5882   	if(outVoltContrHndlCnt<U_OUT_KONTR_DELAY)
003b00  4ad2              LDR      r2,|L1.15948|
003b02  f9b41000          LDRSH    r1,[r4,#0]            ;5880  ; load_U
003b06  f9b03000          LDRSH    r3,[r0,#0]            ;5880  ; U_OUT_KONTR_MAX
003b0a  f9b20000          LDRSH    r0,[r2,#0]
003b0e  4299              CMP      r1,r3                 ;5880
003b10  dc04              BGT      |L1.15132|
003b12  4bcf              LDR      r3,|L1.15952|
003b14  f9b33000          LDRSH    r3,[r3,#0]            ;5880  ; U_OUT_KONTR_MIN
003b18  4299              CMP      r1,r3                 ;5880
003b1a  da0e              BGE      |L1.15162|
                  |L1.15132|
003b1c  49cd              LDR      r1,|L1.15956|
003b1e  f9b11000          LDRSH    r1,[r1,#0]  ; U_OUT_KONTR_DELAY
003b22  4288              CMP      r0,r1
003b24  da12              BGE      |L1.15180|
;;;5883   		{
;;;5884   		outVoltContrHndlCnt++;
003b26  f1000001          ADD      r0,r0,#1
003b2a  b200              SXTH     r0,r0
003b2c  8010              STRH     r0,[r2,#0]
;;;5885   		if(outVoltContrHndlCnt==U_OUT_KONTR_DELAY)
003b2e  4288              CMP      r0,r1
003b30  d10c              BNE      |L1.15180|
;;;5886   			{
;;;5887   			avar_uout_hndl(1);
003b32  2001              MOVS     r0,#1
003b34  f7fffffe          BL       avar_uout_hndl
003b38  e008              B        |L1.15180|
                  |L1.15162|
;;;5888   			}
;;;5889   		}
;;;5890   	}
;;;5891   else
;;;5892   	{
;;;5893   	if(outVoltContrHndlCnt)
003b3a  b138              CBZ      r0,|L1.15180|
;;;5894   		{
;;;5895   		outVoltContrHndlCnt--;
003b3c  f1a00001          SUB      r0,r0,#1
003b40  b200              SXTH     r0,r0
003b42  8010              STRH     r0,[r2,#0]
;;;5896   		if(outVoltContrHndlCnt==0)
003b44  b910              CBNZ     r0,|L1.15180|
;;;5897   			{
;;;5898   			avar_uout_hndl(0);
003b46  2000              MOVS     r0,#0
003b48  f7fffffe          BL       avar_uout_hndl
                  |L1.15180|
;;;5899   			}
;;;5900   		}
;;;5901   	}
;;;5902   
;;;5903   if (load_U<(USIGN*10)) 
003b4c  48c2              LDR      r0,|L1.15960|
003b4e  f9b41000          LDRSH    r1,[r4,#0]  ; load_U
003b52  f9b00000          LDRSH    r0,[r0,#0]  ; USIGN
003b56  eb000080          ADD      r0,r0,r0,LSL #2
003b5a  ebb10f40          CMP      r1,r0,LSL #1
003b5e  da0b              BGE      |L1.15224|
;;;5904   	{
;;;5905   	if(!bSILENT)
003b60  48be              LDR      r0,|L1.15964|
003b62  6800              LDR      r0,[r0,#0]  ; bSILENT
003b64  2800              CMP      r0,#0
003b66  d107              BNE      |L1.15224|
;;;5906   		{
;;;5907   		mess_send(MESS2RELE_HNDL,PARAM_RELE_BAT_IS_DISCHARGED,1,20);
003b68  2314              MOVS     r3,#0x14
003b6a  2201              MOVS     r2,#1
003b6c  2172              MOVS     r1,#0x72
003b6e  e8bd4010          POP      {r4,lr}
003b72  20d2              MOVS     r0,#0xd2
003b74  f7ffbffe          B.W      mess_send
                  |L1.15224|
;;;5908   		}
;;;5909   
;;;5910   	//bU_BAT2REL_AV_BAT=1;
;;;5911   	}
;;;5912   
;;;5913   
;;;5914   }
003b78  bd10              POP      {r4,pc}
;;;5915   
                          ENDP

                  vent_hndl PROC
;;;5916   //-----------------------------------------------
;;;5917   void vent_hndl(void)
003b7a  e92d4ff0          PUSH     {r4-r11,lr}
;;;5918   {
003b7e  b087              SUB      sp,sp,#0x1c
;;;5919   if(RELEVENTSIGN==rvsAKB)
003b80  48b7              LDR      r0,|L1.15968|
;;;5920   	{
;;;5921   	if(vent_stat==0)
003b82  4cad              LDR      r4,|L1.15928|
;;;5922   		{
;;;5923   		if	(
;;;5924   			(BAT_IS_ON[0]==bisON)&&((bat[0]._Tb>TVENTON)||(bat[0]._nd))
003b84  49b7              LDR      r1,|L1.15972|
;;;5925   			||
;;;5926   			(BAT_IS_ON[1]==bisON)&&((bat[1]._Tb>TVENTON)||(bat[1]._nd))
;;;5927   			)
;;;5928   			{
;;;5929   			vent_stat=1;
;;;5930   			}
;;;5931   		}
;;;5932   	else if(vent_stat==1)
;;;5933   		{
;;;5934   		if	(
;;;5935   			((BAT_IS_ON[0]!=bisON)||((BAT_IS_ON[0]==bisON)&&(bat[0]._Tb<TVENTOFF)&&(!bat[0]._nd)))
003b86  4ab8              LDR      r2,|L1.15976|
003b88  7800              LDRB     r0,[r0,#0]            ;5919  ; RELEVENTSIGN
003b8a  f9943000          LDRSB    r3,[r4,#0]            ;5921
003b8e  f9b11000          LDRSH    r1,[r1,#0]            ;5924
003b92  f9b22000          LDRSH    r2,[r2,#0]
003b96  b148              CBZ      r0,|L1.15276|
;;;5936   			&&
;;;5937   			((BAT_IS_ON[1]!=bisON)||((BAT_IS_ON[1]==bisON)&&(bat[1]._Tb<TVENTOFF)&&(!bat[1]._nd)))
;;;5938   			)
;;;5939   			{
;;;5940   			vent_stat=0;
;;;5941   			}
;;;5942   		}
;;;5943   	}
;;;5944   else if(RELEVENTSIGN==rvsBPS)
003b98  2802              CMP      r0,#2
003b9a  d03c              BEQ      |L1.15382|
;;;5945   	{
;;;5946   /*	if	(
;;;5947   		(((bps[0]._flags_tm&0x06)||(bps[0]._cnt>=30)))||
;;;5948   		(((bps[1]._flags_tm&0x06)||(bps[1]._cnt>=30))&&(NUMIST>1))||
;;;5949   		(((bps[2]._flags_tm&0x06)||(bps[2]._cnt>=30))&&(NUMIST>2))||
;;;5950   		(((bps[3]._flags_tm&0x06)||(bps[3]._cnt>=30))&&(NUMIST>3))||
;;;5951   		(((bps[4]._flags_tm&0x06)||(bps[4]._cnt>=30))&&(NUMIST>4))||
;;;5952   		(((bps[5]._flags_tm&0x06)||(bps[5]._cnt>=30))&&(NUMIST>5))||
;;;5953   		(((bps[6]._flags_tm&0x06)||(bps[6]._cnt>=30))&&(NUMIST>6))
;;;5954   		)
;;;5955   		{
;;;5956   		vent_stat=1;
;;;5957   		}
;;;5958   	else vent_stat=0;
;;;5959   	*/
;;;5960   
;;;5961   	if	(
;;;5962   		((NUMIST)&&((bps[0]._Ti>TVENTON)||(bps[0]._cnt>=30)))
;;;5963   		||
;;;5964   		((NUMIST>1)&&((bps[1]._Ti>TVENTON)||(bps[1]._cnt>=30)))
;;;5965   		||
;;;5966   		((NUMIST>2)&&((bps[2]._Ti>TVENTON)||(bps[2]._cnt>=30)))
;;;5967   		||
;;;5968   		((NUMIST>3)&&((bps[3]._Ti>TVENTON)||(bps[3]._cnt>=30)))
;;;5969   		||
;;;5970   		((NUMIST>4)&&((bps[4]._Ti>TVENTON)||(bps[4]._cnt>=30)))
;;;5971   		||
;;;5972   		((NUMIST>5)&&((bps[5]._Ti>TVENTON)||(bps[5]._cnt>=30)))
;;;5973   		||
;;;5974   		((NUMIST>6)&&((bps[6]._Ti>TVENTON)||(bps[6]._cnt>=30)))
;;;5975   		||
;;;5976   		((NUMIST>7)&&((bps[7]._Ti>TVENTON)||(bps[7]._cnt>=30)))
;;;5977   		)
;;;5978   		{
;;;5979   		vent_stat=1;
;;;5980   		}
;;;5981   	else if(vent_stat==1)
;;;5982   		{
;;;5983   		if	(
;;;5984   			((!NUMIST)||((NUMIST)&&(bps[0]._Ti<TVENTOFF)&&(bps[0]._cnt<10)))
;;;5985   			&&
;;;5986   			((NUMIST<2)||((NUMIST>=2)&&(bps[1]._Ti<TVENTOFF)&&(bps[1]._cnt<10)))
;;;5987   			&&
;;;5988   			((NUMIST<3)||((NUMIST>=3)&&(bps[2]._Ti<TVENTOFF)&&(bps[2]._cnt<10)))
;;;5989   			&&
;;;5990   			((NUMIST<4)||((NUMIST>=4)&&(bps[3]._Ti<TVENTOFF)&&(bps[3]._cnt<10)))
;;;5991   			&&
;;;5992   			((NUMIST<5)||((NUMIST>=5)&&(bps[4]._Ti<TVENTOFF)&&(bps[4]._cnt<10)))
;;;5993   			&&
;;;5994   			((NUMIST<6)||((NUMIST>=6)&&(bps[5]._Ti<TVENTOFF)&&(bps[5]._cnt<10)))
;;;5995   			&&
;;;5996   			((NUMIST<7)||((NUMIST>=7)&&(bps[6]._Ti<TVENTOFF)&&(bps[6]._cnt<10)))
;;;5997   			&&
;;;5998   			((NUMIST<8)||((NUMIST>=8)&&(bps[7]._Ti<TVENTOFF)&&(bps[7]._cnt<10)))
;;;5999   			)
;;;6000   			{
;;;6001   			vent_stat=0;
;;;6002   			}
;;;6003   		}
;;;6004   	}
;;;6005   else if(RELEVENTSIGN==rvsEXT)
003b9c  2801              CMP      r0,#1
003b9e  d07e              BEQ      |L1.15518|
;;;6006   	{
;;;6007   	if	(
;;;6008   		((NUMDT)&&((t_ext[0]>TVENTON)||(ND_EXT[0])))
;;;6009   		||
;;;6010   		((NUMDT>1)&&((t_ext[1]>TVENTON)||(ND_EXT[1])))
;;;6011   		||
;;;6012   		((NUMDT>2)&&((t_ext[2]>TVENTON)||(ND_EXT[2])))
;;;6013   		)
;;;6014   		{
;;;6015   		vent_stat=1;
;;;6016   		}
;;;6017   	else if(vent_stat==1)
;;;6018   		{
;;;6019   		if	(
;;;6020   			((!NUMDT)||((NUMDT)&&(t_ext[0]<TVENTOFF)&&(!ND_EXT[0])))
;;;6021   			&&
;;;6022   			((NUMDT<2)||((NUMDT>=2)&&(t_ext[1]<TVENTOFF)&&(!ND_EXT[1])))
;;;6023   			&&
;;;6024   			((NUMDT<3)||((NUMDT>=3)&&(t_ext[2]<TVENTOFF)&&(!ND_EXT[2])))
;;;6025   			)
;;;6026   			{
;;;6027   			vent_stat=0;
;;;6028   			}
;;;6029   		}
;;;6030   	}
;;;6031   else vent_stat=1;
003ba0  f04f0001          MOV      r0,#1
003ba4  7020              STRB     r0,[r4,#0]
                  |L1.15270|
;;;6032   }
003ba6  b007              ADD      sp,sp,#0x1c
003ba8  e8bd8ff0          POP      {r4-r11,pc}
                  |L1.15276|
003bac  4faf              LDR      r7,|L1.15980|
003bae  f8df82c0          LDR      r8,|L1.15984|
003bb2  f9b7000a          LDRSH    r0,[r7,#0xa]          ;5924
003bb6  7b3d              LDRB     r5,[r7,#0xc]          ;5924
003bb8  f9b76056          LDRSH    r6,[r7,#0x56]         ;5926
003bbc  f898c000          LDRB     r12,[r8,#0]           ;5923
003bc0  f8977058          LDRB     r7,[r7,#0x58]         ;5926
003bc4  f8988001          LDRB     r8,[r8,#1]            ;5926
003bc8  b12b              CBZ      r3,|L1.15318|
003bca  2b01              CMP      r3,#1                 ;5932
003bcc  d1eb              BNE      |L1.15270|
003bce  f1bc0f55          CMP      r12,#0x55             ;5934
003bd2  d115              BNE      |L1.15360|
003bd4  e010              B        |L1.15352|
                  |L1.15318|
003bd6  f1bc0f55          CMP      r12,#0x55             ;5923
003bda  d102              BNE      |L1.15330|
003bdc  4288              CMP      r0,r1                 ;5924
003bde  dc07              BGT      |L1.15344|
003be0  b935              CBNZ     r5,|L1.15344|
                  |L1.15330|
003be2  f1b80f55          CMP      r8,#0x55              ;5926
003be6  d1de              BNE      |L1.15270|
003be8  428e              CMP      r6,r1                 ;5926
003bea  dc01              BGT      |L1.15344|
003bec  2f00              CMP      r7,#0                 ;5926
003bee  d0da              BEQ      |L1.15270|
                  |L1.15344|
003bf0  f04f0001          MOV      r0,#1                 ;5929
003bf4  7020              STRB     r0,[r4,#0]            ;5929
003bf6  e7d6              B        |L1.15270|
                  |L1.15352|
003bf8  4290              CMP      r0,r2                 ;5935
003bfa  dad4              BGE      |L1.15270|
003bfc  2d00              CMP      r5,#0                 ;5935
003bfe  d1d2              BNE      |L1.15270|
                  |L1.15360|
003c00  f1b80f55          CMP      r8,#0x55              ;5937
003c04  d103              BNE      |L1.15374|
003c06  4296              CMP      r6,r2                 ;5937
003c08  dacd              BGE      |L1.15270|
003c0a  2f00              CMP      r7,#0                 ;5937
003c0c  d1cb              BNE      |L1.15270|
                  |L1.15374|
003c0e  f04f0000          MOV      r0,#0                 ;5940
003c12  7020              STRB     r0,[r4,#0]            ;5940
003c14  e7c7              B        |L1.15270|
                  |L1.15382|
003c16  4e97              LDR      r6,|L1.15988|
003c18  4889              LDR      r0,|L1.15936|
003c1a  6ab5              LDR      r5,[r6,#0x28]         ;5962
003c1c  f9b00000          LDRSH    r0,[r0,#0]            ;5961  ; NUMIST
003c20  78f6              LDRB     r6,[r6,#3]            ;5962
003c22  b118              CBZ      r0,|L1.15404|
003c24  428d              CMP      r5,r1                 ;5962
003c26  dc7a              BGT      |L1.15646|
003c28  2e1e              CMP      r6,#0x1e              ;5962
003c2a  d278              BCS      |L1.15646|
                  |L1.15404|
003c2c  f8dfc244          LDR      r12,|L1.15988|
003c30  2801              CMP      r0,#1                 ;5964
003c32  f8dc707c          LDR      r7,[r12,#0x7c]        ;5964
003c36  f89cc057          LDRB     r12,[r12,#0x57]       ;5964
003c3a  f8cdc018          STR      r12,[sp,#0x18]        ;5964
003c3e  dd06              BLE      |L1.15438|
003c40  428f              CMP      r7,r1                 ;5964
003c42  dc6c              BGT      |L1.15646|
003c44  f8ddc018          LDR      r12,[sp,#0x18]        ;5964
003c48  f1bc0f1e          CMP      r12,#0x1e             ;5964
003c4c  d267              BCS      |L1.15646|
                  |L1.15438|
003c4e  f8dfc224          LDR      r12,|L1.15988|
003c52  2802              CMP      r0,#2                 ;5966
003c54  f8dc80d0          LDR      r8,[r12,#0xd0]        ;5966
003c58  f8cd8014          STR      r8,[sp,#0x14]         ;5966
003c5c  f89cc0ab          LDRB     r12,[r12,#0xab]       ;5966
003c60  f8cdc010          STR      r12,[sp,#0x10]        ;5966
003c64  dd08              BLE      |L1.15480|
003c66  f8ddc014          LDR      r12,[sp,#0x14]        ;5966
003c6a  458c              CMP      r12,r1                ;5966
003c6c  dc57              BGT      |L1.15646|
003c6e  f8ddc010          LDR      r12,[sp,#0x10]        ;5966
003c72  f1bc0f1e          CMP      r12,#0x1e             ;5966
003c76  d252              BCS      |L1.15646|
                  |L1.15480|
003c78  f8dfc1f8          LDR      r12,|L1.15988|
003c7c  2803              CMP      r0,#3                 ;5968
003c7e  f8dc8124          LDR      r8,[r12,#0x124]       ;5968
003c82  f8cd800c          STR      r8,[sp,#0xc]          ;5968
003c86  f89cc0ff          LDRB     r12,[r12,#0xff]       ;5968
003c8a  f8cdc008          STR      r12,[sp,#8]           ;5968
003c8e  dd0a              BLE      |L1.15526|
003c90  f8ddc00c          LDR      r12,[sp,#0xc]         ;5968
003c94  458c              CMP      r12,r1                ;5968
003c96  dc42              BGT      |L1.15646|
003c98  f8ddc008          LDR      r12,[sp,#8]           ;5968
003c9c  e000              B        |L1.15520|
                  |L1.15518|
003c9e  e080              B        |L1.15778|
                  |L1.15520|
003ca0  f1bc0f1e          CMP      r12,#0x1e             ;5968
003ca4  d23b              BCS      |L1.15646|
                  |L1.15526|
003ca6  f8df81cc          LDR      r8,|L1.15988|
003caa  2804              CMP      r0,#4                 ;5970
003cac  f8d8c178          LDR      r12,[r8,#0x178]       ;5970
003cb0  f8988153          LDRB     r8,[r8,#0x153]        ;5970
003cb4  f8cd8004          STR      r8,[sp,#4]            ;5970
003cb8  dd06              BLE      |L1.15560|
003cba  458c              CMP      r12,r1                ;5970
003cbc  dc2f              BGT      |L1.15646|
003cbe  f8dd8004          LDR      r8,[sp,#4]            ;5970
003cc2  f1b80f1e          CMP      r8,#0x1e              ;5970
003cc6  d22a              BCS      |L1.15646|
                  |L1.15560|
003cc8  f8df91a8          LDR      r9,|L1.15988|
003ccc  2805              CMP      r0,#5                 ;5972
003cce  f8d981cc          LDR      r8,[r9,#0x1cc]        ;5972
003cd2  f89991a7          LDRB     r9,[r9,#0x1a7]        ;5972
003cd6  f8cd9000          STR      r9,[sp,#0]            ;5972
003cda  dd06              BLE      |L1.15594|
003cdc  4588              CMP      r8,r1                 ;5972
003cde  dc1e              BGT      |L1.15646|
003ce0  f8dd9000          LDR      r9,[sp,#0]            ;5972
003ce4  f1b90f1e          CMP      r9,#0x1e              ;5972
003ce8  d219              BCS      |L1.15646|
                  |L1.15594|
003cea  f8dfa188          LDR      r10,|L1.15988|
003cee  2806              CMP      r0,#6                 ;5974
003cf0  f89ae1fb          LDRB     lr,[r10,#0x1fb]       ;5974
003cf4  f8da9220          LDR      r9,[r10,#0x220]       ;5974
003cf8  dd04              BLE      |L1.15620|
003cfa  4589              CMP      r9,r1                 ;5974
003cfc  dc0f              BGT      |L1.15646|
003cfe  f1be0f1e          CMP      lr,#0x1e              ;5974
003d02  d20c              BCS      |L1.15646|
                  |L1.15620|
003d04  f8dfb16c          LDR      r11,|L1.15988|
003d08  2807              CMP      r0,#7                 ;5976
003d0a  f8dba274          LDR      r10,[r11,#0x274]      ;5976
003d0e  f89bb24f          LDRB     r11,[r11,#0x24f]      ;5976
003d12  dd08              BLE      |L1.15654|
003d14  458a              CMP      r10,r1                ;5976
003d16  dc02              BGT      |L1.15646|
003d18  f1bb0f1e          CMP      r11,#0x1e             ;5976
003d1c  d303              BCC      |L1.15654|
                  |L1.15646|
003d1e  f04f0001          MOV      r0,#1                 ;5979
003d22  7020              STRB     r0,[r4,#0]            ;5979
                  |L1.15652|
003d24  e73f              B        |L1.15270|
                  |L1.15654|
003d26  2b01              CMP      r3,#1                 ;5981
003d28  d1fc              BNE      |L1.15652|
003d2a  b118              CBZ      r0,|L1.15668|
003d2c  4295              CMP      r5,r2                 ;5984
003d2e  daf9              BGE      |L1.15652|
003d30  2e0a              CMP      r6,#0xa               ;5984
003d32  d2f7              BCS      |L1.15652|
                  |L1.15668|
003d34  2802              CMP      r0,#2                 ;5986
003d36  db04              BLT      |L1.15682|
003d38  4297              CMP      r7,r2                 ;5986
003d3a  daf3              BGE      |L1.15652|
003d3c  9906              LDR      r1,[sp,#0x18]         ;5986
003d3e  290a              CMP      r1,#0xa               ;5986
003d40  d2f0              BCS      |L1.15652|
                  |L1.15682|
003d42  2803              CMP      r0,#3                 ;5988
003d44  db05              BLT      |L1.15698|
003d46  9905              LDR      r1,[sp,#0x14]         ;5988
003d48  4291              CMP      r1,r2                 ;5988
003d4a  daeb              BGE      |L1.15652|
003d4c  9904              LDR      r1,[sp,#0x10]         ;5988
003d4e  290a              CMP      r1,#0xa               ;5988
003d50  d2e8              BCS      |L1.15652|
                  |L1.15698|
003d52  2804              CMP      r0,#4                 ;5990
003d54  db05              BLT      |L1.15714|
003d56  9903              LDR      r1,[sp,#0xc]          ;5990
003d58  4291              CMP      r1,r2                 ;5990
003d5a  dae3              BGE      |L1.15652|
003d5c  9902              LDR      r1,[sp,#8]            ;5990
003d5e  290a              CMP      r1,#0xa               ;5990
003d60  d2e0              BCS      |L1.15652|
                  |L1.15714|
003d62  2805              CMP      r0,#5                 ;5992
003d64  db04              BLT      |L1.15728|
003d66  4594              CMP      r12,r2                ;5992
003d68  dadc              BGE      |L1.15652|
003d6a  9901              LDR      r1,[sp,#4]            ;5992
003d6c  290a              CMP      r1,#0xa               ;5992
003d6e  d2d9              BCS      |L1.15652|
                  |L1.15728|
003d70  2806              CMP      r0,#6                 ;5994
003d72  db04              BLT      |L1.15742|
003d74  4590              CMP      r8,r2                 ;5994
003d76  dad5              BGE      |L1.15652|
003d78  9900              LDR      r1,[sp,#0]            ;5994
003d7a  290a              CMP      r1,#0xa               ;5994
003d7c  d2d2              BCS      |L1.15652|
                  |L1.15742|
003d7e  2807              CMP      r0,#7                 ;5996
003d80  db04              BLT      |L1.15756|
003d82  4591              CMP      r9,r2                 ;5996
003d84  dace              BGE      |L1.15652|
003d86  f1be0f0a          CMP      lr,#0xa               ;5996
003d8a  d2cb              BCS      |L1.15652|
                  |L1.15756|
003d8c  2808              CMP      r0,#8                 ;5998
003d8e  db04              BLT      |L1.15770|
003d90  4592              CMP      r10,r2                ;5998
003d92  dac7              BGE      |L1.15652|
003d94  f1bb0f0a          CMP      r11,#0xa              ;5998
003d98  d2c4              BCS      |L1.15652|
                  |L1.15770|
003d9a  f04f0000          MOV      r0,#0                 ;6001
003d9e  7020              STRB     r0,[r4,#0]            ;6001
                  |L1.15776|
003da0  e701              B        |L1.15270|
                  |L1.15778|
003da2  4835              LDR      r0,|L1.15992|
003da4  4d35              LDR      r5,|L1.15996|
003da6  4e36              LDR      r6,|L1.16000|
003da8  f9b00000          LDRSH    r0,[r0,#0]            ;6007  ; NUMDT
003dac  f9b55000          LDRSH    r5,[r5,#0]            ;6008
003db0  6836              LDR      r6,[r6,#0]            ;6008
003db2  b110              CBZ      r0,|L1.15802|
003db4  428d              CMP      r5,r1                 ;6008
003db6  dc1d              BGT      |L1.15860|
003db8  b9e6              CBNZ     r6,|L1.15860|
                  |L1.15802|
003dba  4f30              LDR      r7,|L1.15996|
003dbc  f8dfc0c0          LDR      r12,|L1.16000|
003dc0  2801              CMP      r0,#1                 ;6010
003dc2  f9b77002          LDRSH    r7,[r7,#2]            ;6010
003dc6  f8dcc004          LDR      r12,[r12,#4]          ;6010
003dca  dd04              BLE      |L1.15830|
003dcc  428f              CMP      r7,r1                 ;6010
003dce  dc11              BGT      |L1.15860|
003dd0  f1bc0f00          CMP      r12,#0                ;6010
003dd4  d10e              BNE      |L1.15860|
                  |L1.15830|
003dd6  f8df80a4          LDR      r8,|L1.15996|
003dda  f8df90a4          LDR      r9,|L1.16000|
003dde  2802              CMP      r0,#2                 ;6012
003de0  f9b88004          LDRSH    r8,[r8,#4]            ;6012
003de4  f8d99008          LDR      r9,[r9,#8]            ;6012
003de8  dd08              BLE      |L1.15868|
003dea  4588              CMP      r8,r1                 ;6012
003dec  dc02              BGT      |L1.15860|
003dee  f1b90f00          CMP      r9,#0                 ;6012
003df2  d003              BEQ      |L1.15868|
                  |L1.15860|
003df4  f04f0001          MOV      r0,#1                 ;6015
003df8  7020              STRB     r0,[r4,#0]            ;6015
003dfa  e6d4              B        |L1.15270|
                  |L1.15868|
003dfc  2b01              CMP      r3,#1                 ;6017
003dfe  d191              BNE      |L1.15652|
003e00  b118              CBZ      r0,|L1.15882|
003e02  4295              CMP      r5,r2                 ;6020
003e04  da8e              BGE      |L1.15652|
003e06  2e00              CMP      r6,#0                 ;6020
003e08  d18c              BNE      |L1.15652|
                  |L1.15882|
003e0a  2802              CMP      r0,#2                 ;6022
003e0c  db04              BLT      |L1.15896|
003e0e  4297              CMP      r7,r2                 ;6022
003e10  da88              BGE      |L1.15652|
003e12  f1bc0f00          CMP      r12,#0                ;6022
003e16  d185              BNE      |L1.15652|
                  |L1.15896|
003e18  2803              CMP      r0,#3                 ;6024
003e1a  db04              BLT      |L1.15910|
003e1c  4590              CMP      r8,r2                 ;6024
003e1e  dabf              BGE      |L1.15776|
003e20  f1b90f00          CMP      r9,#0                 ;6024
003e24  d1bc              BNE      |L1.15776|
                  |L1.15910|
003e26  f04f0000          MOV      r0,#0                 ;6027
003e2a  7020              STRB     r0,[r4,#0]            ;6027
003e2c  e6bb              B        |L1.15270|
;;;6033   
                          ENDP

003e2e  0000              DCW      0x0000
                  |L1.15920|
                          DCD      speedChrgBlckStat
                  |L1.15924|
                          DCD      speedChTimeCnt
                  |L1.15928|
                          DCD      ||area_number.21||
                  |L1.15932|
                          DCD      FORVARDBPSCHHOUR
                  |L1.15936|
                          DCD      NUMIST
                  |L1.15940|
                          DCD      load_U
                  |L1.15944|
                          DCD      U_OUT_KONTR_MAX
                  |L1.15948|
                          DCD      outVoltContrHndlCnt
                  |L1.15952|
                          DCD      U_OUT_KONTR_MIN
                  |L1.15956|
                          DCD      U_OUT_KONTR_DELAY
                  |L1.15960|
                          DCD      USIGN
                  |L1.15964|
                          DCD      bSILENT
                  |L1.15968|
                          DCD      RELEVENTSIGN
                  |L1.15972|
                          DCD      TVENTON
                  |L1.15976|
                          DCD      TVENTOFF
                  |L1.15980|
                          DCD      bat
                  |L1.15984|
                          DCD      BAT_IS_ON
                  |L1.15988|
                          DCD      bps
                  |L1.15992|
                          DCD      NUMDT
                  |L1.15996|
                          DCD      t_ext
                  |L1.16000|
                          DCD      ND_EXT

                          AREA ||area_number.2||, CODE, READONLY, ALIGN=2

                          EXPORTAS ||area_number.2||, ||.text||
                  samokalibr_init PROC
;;;214    //-----------------------------------------------
;;;215    void ke_start(char in)
000000  4902              LDR      r1,|L2.12|
;;;216    {          
000002  f24060f9          MOV      r0,#0x6f9
;;;217    ke_start_stat=(enum_ke_start_stat)0;		 
000006  8748              STRH     r0,[r1,#0x3a]
000008  4770              BX       lr
;;;218    
;;;219    if(spc_stat==spcVZ)ke_start_stat=kssNOT_VZ;
;;;220    else if(BAT_IS_ON[in]!=bisON)ke_start_stat=kssNOT_BAT;
;;;221    else if(bat[in]._av&(1<<0))ke_start_stat=kssNOT_BAT_AV;
;;;222    else if(bat[in]._temper_stat&(1<<1))ke_start_stat=kssNOT_BAT_AV_T;
;;;223    else if(bat[in]._av&(1<<1))ke_start_stat=kssNOT_BAT_AV_ASS;
;;;224    else if(bat[in]._Ib>IKB)ke_start_stat=kssNOT_BAT_ZAR;
;;;225    else if(bat[in]._Ib<-IKB)ke_start_stat=kssNOT_BAT_RAZR;
;;;226    else if((spc_stat==spcKE)&&(spc_bat==0))ke_start_stat=kssNOT_KE1;
;;;227    else if((spc_stat==spcKE)&&(spc_bat==1))ke_start_stat=kssNOT_KE2;
;;;228    else 
;;;229    	{
;;;230    
;;;231    	ke_start_stat=kssYES;
;;;232    
;;;233    	spc_stat=spcKE;
;;;234    	__ee_spc_stat=spcKE;
;;;235    	lc640_write_int(EE_SPC_STAT,__ee_spc_stat);
;;;236    	
;;;237    	spc_bat=in;
;;;238    	__ee_spc_bat=in;
;;;239    	lc640_write_int(EE_SPC_BAT,__ee_spc_bat);
;;;240    
;;;241    	bat[in]._zar_cnt_ke=0;
;;;242    	lc640_write_int(ADR_EE_BAT_ZAR_CNT_KE[in],0);
;;;243    	
;;;244    	spc_phase=0;
;;;245    	__ee_spc_phase=0;
;;;246    	lc640_write_int(EE_SPC_PHASE,__ee_spc_phase);
;;;247    
;;;248    	//ke_mem_hndl(in,lc640_read_int(ADR_EE_BAT_ZAR_CNT_KE[spc_bat]));
;;;249    
;;;250    		{					
;;;251    		signed short temp_temp;
;;;252    		signed char temp;
;;;253    		temp_temp=bat[in]._u_old[((bat_u_old_cnt+1)&0x07)]; 
;;;254    		    
;;;255    		temp=LPC_RTC->YEAR;
;;;256    		gran_char(&temp,1,99);
;;;257    		*((char*)(&(ke_date[0])))=temp;
;;;258    			
;;;259    		temp=LPC_RTC->MONTH;
;;;260    		gran_char(&temp,1,12);
;;;261    		*(((char*)(&(ke_date[0])))+1)=temp;
;;;262    		
;;;263    		temp=LPC_RTC->DOM;
;;;264    		gran_char(&temp,1,31);
;;;265    		*(((char*)(&(ke_date[0])))+2)=temp;			
;;;266    				
;;;267    		*(((char*)(&(ke_date[0])))+3)=*((char*)&temp_temp);
;;;268    		lc640_write_long(EE_SPC_KE_DATE0,ke_date[0]);
;;;269    
;;;270    		temp=LPC_RTC->HOUR;
;;;271    		gran_char(&temp,0,23);
;;;272    		*((char*)(&(ke_date[1])))=temp;
;;;273                   
;;;274    		temp=LPC_RTC->MIN;
;;;275    		gran_char(&temp,0,59);
;;;276    		*(((char*)(&(ke_date[1])))+1)=temp;
;;;277    	          
;;;278    		temp=LPC_RTC->SEC;
;;;279    		gran_char(&temp,0,59);
;;;280    		*(((char*)(&(ke_date[1])))+2)=temp;
;;;281    			
;;;282    		*(((char*)(&(ke_date[1])))+3)=*(((char*)&temp_temp)+1);
;;;283    		lc640_write_long(EE_SPC_KE_DATE1,ke_date[1]);
;;;284    		}
;;;285    
;;;286    	}
;;;287    }
;;;288    
                          ENDP

00000a  0000              DCW      0x0000
                  |L2.12|
                          DCD      ||area_number.21||

                          AREA ||area_number.3||, CODE, READONLY, ALIGN=2

                          EXPORTAS ||area_number.3||, ||.text||
                  adc_drv6 PROC
;;;214    //-----------------------------------------------
;;;215    void ke_start(char in)
000000  e92d41f0          PUSH     {r4-r8,lr}
;;;216    {          
000004  4c80              LDR      r4,|L3.520|
;;;217    ke_start_stat=(enum_ke_start_stat)0;		 
000006  8860              LDRH     r0,[r4,#2]  ; adc_self_ch_buff
000008  8821              LDRH     r1,[r4,#0]  ; adc_self_ch_buff
00000a  1a40              SUBS     r0,r0,r1
00000c  b200              SXTH     r0,r0
;;;218    
;;;219    if(spc_stat==spcVZ)ke_start_stat=kssNOT_VZ;
00000e  f7fffffe          BL       abs_pal
000012  1da5              ADDS     r5,r4,#6
000014  8028              STRH     r0,[r5,#0]
000016  88a0              LDRH     r0,[r4,#4]  ; adc_self_ch_buff
;;;220    else if(BAT_IS_ON[in]!=bisON)ke_start_stat=kssNOT_BAT;
000018  8861              LDRH     r1,[r4,#2]  ; adc_self_ch_buff
00001a  1a40              SUBS     r0,r0,r1
00001c  b200              SXTH     r0,r0
00001e  f7fffffe          BL       abs_pal
000022  8068              STRH     r0,[r5,#2]
000024  88a0              LDRH     r0,[r4,#4]  ; adc_self_ch_buff
;;;221    else if(bat[in]._av&(1<<0))ke_start_stat=kssNOT_BAT_AV;
;;;222    else if(bat[in]._temper_stat&(1<<1))ke_start_stat=kssNOT_BAT_AV_T;
;;;223    else if(bat[in]._av&(1<<1))ke_start_stat=kssNOT_BAT_AV_ASS;
;;;224    else if(bat[in]._Ib>IKB)ke_start_stat=kssNOT_BAT_ZAR;
;;;225    else if(bat[in]._Ib<-IKB)ke_start_stat=kssNOT_BAT_RAZR;
;;;226    else if((spc_stat==spcKE)&&(spc_bat==0))ke_start_stat=kssNOT_KE1;
;;;227    else if((spc_stat==spcKE)&&(spc_bat==1))ke_start_stat=kssNOT_KE2;
;;;228    else 
;;;229    	{
;;;230    
;;;231    	ke_start_stat=kssYES;
;;;232    
;;;233    	spc_stat=spcKE;
;;;234    	__ee_spc_stat=spcKE;
;;;235    	lc640_write_int(EE_SPC_STAT,__ee_spc_stat);
;;;236    	
;;;237    	spc_bat=in;
;;;238    	__ee_spc_bat=in;
;;;239    	lc640_write_int(EE_SPC_BAT,__ee_spc_bat);
;;;240    
;;;241    	bat[in]._zar_cnt_ke=0;
;;;242    	lc640_write_int(ADR_EE_BAT_ZAR_CNT_KE[in],0);
;;;243    	
;;;244    	spc_phase=0;
;;;245    	__ee_spc_phase=0;
;;;246    	lc640_write_int(EE_SPC_PHASE,__ee_spc_phase);
;;;247    
;;;248    	//ke_mem_hndl(in,lc640_read_int(ADR_EE_BAT_ZAR_CNT_KE[spc_bat]));
;;;249    
;;;250    		{					
;;;251    		signed short temp_temp;
;;;252    		signed char temp;
;;;253    		temp_temp=bat[in]._u_old[((bat_u_old_cnt+1)&0x07)]; 
;;;254    		    
;;;255    		temp=LPC_RTC->YEAR;
;;;256    		gran_char(&temp,1,99);
;;;257    		*((char*)(&(ke_date[0])))=temp;
;;;258    			
;;;259    		temp=LPC_RTC->MONTH;
;;;260    		gran_char(&temp,1,12);
;;;261    		*(((char*)(&(ke_date[0])))+1)=temp;
;;;262    		
;;;263    		temp=LPC_RTC->DOM;
;;;264    		gran_char(&temp,1,31);
;;;265    		*(((char*)(&(ke_date[0])))+2)=temp;			
;;;266    				
;;;267    		*(((char*)(&(ke_date[0])))+3)=*((char*)&temp_temp);
;;;268    		lc640_write_long(EE_SPC_KE_DATE0,ke_date[0]);
;;;269    
;;;270    		temp=LPC_RTC->HOUR;
;;;271    		gran_char(&temp,0,23);
;;;272    		*((char*)(&(ke_date[1])))=temp;
;;;273                   
;;;274    		temp=LPC_RTC->MIN;
;;;275    		gran_char(&temp,0,59);
;;;276    		*(((char*)(&(ke_date[1])))+1)=temp;
;;;277    	          
;;;278    		temp=LPC_RTC->SEC;
;;;279    		gran_char(&temp,0,59);
;;;280    		*(((char*)(&(ke_date[1])))+2)=temp;
;;;281    			
;;;282    		*(((char*)(&(ke_date[1])))+3)=*(((char*)&temp_temp)+1);
;;;283    		lc640_write_long(EE_SPC_KE_DATE1,ke_date[1]);
;;;284    		}
;;;285    
;;;286    	}
;;;287    }
000026  8821              LDRH     r1,[r4,#0]  ; adc_self_ch_buff
000028  1a40              SUBS     r0,r0,r1
00002a  b200              SXTH     r0,r0                 ;219
00002c  f7fffffe          BL       abs_pal
000030  80a8              STRH     r0,[r5,#4]            ;221
000032  f44f7196          MOV      r1,#0x12c             ;221
000036  f1a4068e          SUB      r6,r4,#0x8e           ;221
00003a  4288              CMP      r0,r1                 ;221
00003c  da02              BGE      |L3.68|
00003e  88a0              LDRH     r0,[r4,#4]            ;221  ; adc_self_ch_buff
000040  8530              STRH     r0,[r6,#0x28]         ;221
000042  e00c              B        |L3.94|
                  |L3.68|
000044  f9b50002          LDRSH    r0,[r5,#2]            ;221  ; adc_self_ch_disp
000048  4288              CMP      r0,r1                 ;221
00004a  da02              BGE      |L3.82|
00004c  8860              LDRH     r0,[r4,#2]            ;222  ; adc_self_ch_buff
00004e  8530              STRH     r0,[r6,#0x28]         ;222
000050  e005              B        |L3.94|
                  |L3.82|
000052  f9b50000          LDRSH    r0,[r5,#0]            ;222  ; adc_self_ch_disp
000056  4288              CMP      r0,r1                 ;222
000058  da01              BGE      |L3.94|
00005a  8820              LDRH     r0,[r4,#0]  ; adc_self_ch_buff
00005c  8530              STRH     r0,[r6,#0x28]         ;223
                  |L3.94|
00005e  78b7              LDRB     r7,[r6,#2]            ;223  ; adc_ch_net
000060  2200              MOVS     r2,#0                 ;223
000062  b3f7              CBZ      r7,|L3.226|
000064  7973              LDRB     r3,[r6,#5]            ;223  ; adc_window_flag
000066  4869              LDR      r0,|L3.524|
000068  b18b              CBZ      r3,|L3.142|
00006a  f9b61028          LDRSH    r1,[r6,#0x28]         ;224  ; adc_result
00006e  6804              LDR      r4,[r0,#0]            ;224  ; main_power_buffer
000070  eb0404a1          ADD      r4,r4,r1,ASR #2       ;224
000074  6004              STR      r4,[r0,#0]            ;224  ; main_power_buffer
000076  6844              LDR      r4,[r0,#4]            ;224  ; main_power_buffer
000078  eb0404a1          ADD      r4,r4,r1,ASR #2       ;224
00007c  6044              STR      r4,[r0,#4]  ; main_power_buffer
00007e  6884              LDR      r4,[r0,#8]            ;225  ; main_power_buffer
000080  eb0404a1          ADD      r4,r4,r1,ASR #2       ;225
000084  6084              STR      r4,[r0,#8]            ;225  ; main_power_buffer
000086  68c4              LDR      r4,[r0,#0xc]          ;225  ; main_power_buffer
000088  eb0401a1          ADD      r1,r4,r1,ASR #2       ;225
00008c  60c1              STR      r1,[r0,#0xc]          ;217  ; main_power_buffer
                  |L3.142|
00008e  f9b61028          LDRSH    r1,[r6,#0x28]         ;226  ; adc_result
000092  2964              CMP      r1,#0x64              ;226
000094  da04              BGE      |L3.160|
000096  8db1              LDRH     r1,[r6,#0x2c]         ;227  ; adc_zero_cnt
000098  f1010101          ADD      r1,r1,#1              ;227
00009c  85b1              STRH     r1,[r6,#0x2c]         ;226
00009e  e000              B        |L3.162|
                  |L3.160|
0000a0  85b2              STRH     r2,[r6,#0x2c]         ;226
                  |L3.162|
0000a2  f9b6402c          LDRSH    r4,[r6,#0x2c]  ; adc_zero_cnt
0000a6  f44f61fa          MOV      r1,#0x7d0             ;227
0000aa  428c              CMP      r4,r1                 ;231
0000ac  db05              BLT      |L3.186|
0000ae  85b1              STRH     r1,[r6,#0x2c]         ;233
0000b0  6002              STR      r2,[r0,#0]            ;234  ; main_power_buffer
0000b2  6042              STR      r2,[r0,#4]            ;234  ; main_power_buffer
0000b4  6082              STR      r2,[r0,#8]            ;235  ; main_power_buffer
0000b6  60c2              STR      r2,[r0,#0xc]          ;235  ; main_power_buffer
0000b8  84f2              STRH     r2,[r6,#0x26]         ;235
                  |L3.186|
0000ba  8db1              LDRH     r1,[r6,#0x2c]         ;235  ; adc_zero_cnt
0000bc  2905              CMP      r1,#5                 ;235
0000be  d14f              BNE      |L3.352|
0000c0  b1bb              CBZ      r3,|L3.242|
0000c2  8d71              LDRH     r1,[r6,#0x2a]         ;238  ; adc_gorb_cnt
0000c4  f1010101          ADD      r1,r1,#1              ;239
0000c8  b209              SXTH     r1,r1                 ;239
0000ca  8571              STRH     r1,[r6,#0x2a]         ;239
0000cc  f5b17f00          CMP      r1,#0x200             ;239
0000d0  db00              BLT      |L3.212|
0000d2  8572              STRH     r2,[r6,#0x2a]         ;242
                  |L3.212|
0000d4  f9b6102a          LDRSH    r1,[r6,#0x2a]         ;242  ; adc_gorb_cnt
0000d8  064c              LSLS     r4,r1,#25             ;242
0000da  d10a              BNE      |L3.242|
0000dc  ea4f11e1          ASR      r1,r1,#7              ;244
0000e0  e000              B        |L3.228|
                  |L3.226|
0000e2  e015              B        |L3.272|
                  |L3.228|
0000e4  f8504021          LDR      r4,[r0,r1,LSL #2]     ;246
0000e8  ea4f2424          ASR      r4,r4,#8              ;246
0000ec  84f4              STRH     r4,[r6,#0x26]         ;253
0000ee  f8402021          STR      r2,[r0,r1,LSL #2]     ;253
                  |L3.242|
0000f2  f9b6002e          LDRSH    r0,[r6,#0x2e]         ;253  ; adc_window_cnt
0000f6  2896              CMP      r0,#0x96              ;253
0000f8  dd01              BLE      |L3.254|
0000fa  b103              CBZ      r3,|L3.254|
0000fc  7172              STRB     r2,[r6,#5]            ;253
                  |L3.254|
0000fe  381f              SUBS     r0,r0,#0x1f           ;253
000100  2827              CMP      r0,#0x27              ;255
000102  d22d              BCS      |L3.352|
000104  7970              LDRB     r0,[r6,#5]            ;255  ; adc_window_flag
000106  bb58              CBNZ     r0,|L3.352|
000108  f04f0001          MOV      r0,#1                 ;256
00010c  7170              STRB     r0,[r6,#5]            ;256
00010e  e027              B        |L3.352|
                  |L3.272|
000110  483f              LDR      r0,|L3.528|
000112  78f5              LDRB     r5,[r6,#3]            ;256  ; adc_ch
000114  7933              LDRB     r3,[r6,#4]            ;257  ; adc_ch_cnt
000116  eb001485          ADD      r4,r0,r5,LSL #6       ;257
00011a  f9b61028          LDRSH    r1,[r6,#0x28]         ;257  ; adc_result
00011e  f8441023          STR      r1,[r4,r3,LSL #2]     ;259
000122  0798              LSLS     r0,r3,#30             ;260
000124  d10f              BNE      |L3.326|
000126  4601              MOV      r1,r0                 ;260
                  |L3.296|
000128  f854c020          LDR      r12,[r4,r0,LSL #2]    ;260
00012c  4461              ADD      r1,r1,r12             ;261
00012e  f1000001          ADD      r0,r0,#1              ;261
000132  b2c0              UXTB     r0,r0                 ;263
000134  2810              CMP      r0,#0x10              ;263
000136  d3f7              BCC      |L3.296|
000138  ea4f1021          ASR      r0,r1,#4              ;264
00013c  4933              LDR      r1,|L3.524|
00013e  f1a10120          SUB      r1,r1,#0x20           ;264
000142  f8210015          STRH     r0,[r1,r5,LSL #1]     ;265
                  |L3.326|
000146  1c6d              ADDS     r5,r5,#1              ;267
000148  b2e8              UXTB     r0,r5                 ;267
00014a  70f0              STRB     r0,[r6,#3]            ;267
00014c  2810              CMP      r0,#0x10              ;268
00014e  d307              BCC      |L3.352|
000150  70f2              STRB     r2,[r6,#3]            ;268
000152  f1030301          ADD      r3,r3,#1              ;268
000156  b2d8              UXTB     r0,r3                 ;270
000158  7130              STRB     r0,[r6,#4]            ;270
00015a  2810              CMP      r0,#0x10              ;271
00015c  d300              BCC      |L3.352|
00015e  7132              STRB     r2,[r6,#4]            ;271
                  |L3.352|
000160  7072              STRB     r2,[r6,#1]            ;271
000162  f1070701          ADD      r7,r7,#1              ;271
000166  f0070001          AND      r0,r7,#1              ;272
00016a  70b0              STRB     r0,[r6,#2]            ;274
00016c  4a29              LDR      r2,|L3.532|
00016e  b130              CBZ      r0,|L3.382|
000170  6810              LDR      r0,[r2,#0]            ;275
000172  f02000ff          BIC      r0,r0,#0xff           ;275
000176  f1000004          ADD      r0,r0,#4              ;275
00017a  6010              STR      r0,[r2,#0]            ;276
00017c  e03d              B        |L3.506|
                  |L3.382|
00017e  78f1              LDRB     r1,[r6,#3]            ;278  ; adc_ch
000180  0708              LSLS     r0,r1,#28             ;278
000182  d406              BMI      |L3.402|
000184  6810              LDR      r0,[r2,#0]            ;279
000186  f02000ff          BIC      r0,r0,#0xff           ;279
00018a  f1000001          ADD      r0,r0,#1              ;279
00018e  6010              STR      r0,[r2,#0]            ;280
000190  e005              B        |L3.414|
                  |L3.402|
000192  6810              LDR      r0,[r2,#0]            ;282
000194  f02000ff          BIC      r0,r0,#0xff           ;282
000198  f1000002          ADD      r0,r0,#2              ;283
00019c  6010              STR      r0,[r2,#0]            ;283
                  |L3.414|
00019e  481e              LDR      r0,|L3.536|
0001a0  6803              LDR      r3,[r0,#0]            ;283
0001a2  f0435380          ORR      r3,r3,#0x10000000
0001a6  6003              STR      r3,[r0,#0]            ;227
0001a8  6a03              LDR      r3,[r0,#0x20]         ;227
0001aa  f0434380          ORR      r3,r3,#0x40000000     ;227
0001ae  6203              STR      r3,[r0,#0x20]
0001b0  6e03              LDR      r3,[r0,#0x60]
0001b2  f0436380          ORR      r3,r3,#0x4000000
0001b6  6603              STR      r3,[r0,#0x60]
0001b8  07cb              LSLS     r3,r1,#31
0001ba  d00a              BEQ      |L3.466|
0001bc  6943              LDR      r3,[r0,#0x14]
0001be  f0435380          ORR      r3,r3,#0x10000000
0001c2  6143              STR      r3,[r0,#0x14]
                  |L3.452|
0001c4  078b              LSLS     r3,r1,#30
0001c6  d409              BMI      |L3.476|
0001c8  6b43              LDR      r3,[r0,#0x34]
0001ca  f0234380          BIC      r3,r3,#0x40000000
0001ce  6343              STR      r3,[r0,#0x34]
0001d0  e008              B        |L3.484|
                  |L3.466|
0001d2  6943              LDR      r3,[r0,#0x14]
0001d4  f0235380          BIC      r3,r3,#0x10000000
0001d8  6143              STR      r3,[r0,#0x14]
0001da  e7f3              B        |L3.452|
                  |L3.476|
0001dc  6b43              LDR      r3,[r0,#0x34]
0001de  f0434380          ORR      r3,r3,#0x40000000
0001e2  6343              STR      r3,[r0,#0x34]
                  |L3.484|
0001e4  0749              LSLS     r1,r1,#29
0001e6  d404              BMI      |L3.498|
0001e8  6f41              LDR      r1,[r0,#0x74]
0001ea  f0216180          BIC      r1,r1,#0x4000000
0001ee  6741              STR      r1,[r0,#0x74]
0001f0  e003              B        |L3.506|
                  |L3.498|
0001f2  6f41              LDR      r1,[r0,#0x74]
0001f4  f0416180          ORR      r1,r1,#0x4000000
0001f8  6741              STR      r1,[r0,#0x74]
                  |L3.506|
0001fa  6810              LDR      r0,[r2,#0]
0001fc  f0407080          ORR      r0,r0,#0x1000000
000200  6010              STR      r0,[r2,#0]
000202  e8bd81f0          POP      {r4-r8,pc}
;;;288    
                          ENDP

000206  0000              DCW      0x0000
                  |L3.520|
                          DCD      ||area_number.21||+0x8e
                  |L3.524|
                          DCD      ||.bss||+0x420
                  |L3.528|
                          DCD      ||.bss||
                  |L3.532|
                          DCD      0x40034000
                  |L3.536|
                          DCD      0x2009c000

                          AREA ||area_number.4||, CODE, READONLY, ALIGN=2

                          EXPORTAS ||area_number.4||, ||.text||
                  inv_drv PROC
;;;214    //-----------------------------------------------
;;;215    void ke_start(char in)
000000  b570              PUSH     {r4-r6,lr}
;;;216    {          
000002  4604              MOV      r4,r0
000004  f04f0207          MOV      r2,#7
;;;217    ke_start_stat=(enum_ke_start_stat)0;		 
000008  f04f0101          MOV      r1,#1
00000c  48a4              LDR      r0,|L4.672|
;;;218    
;;;219    if(spc_stat==spcVZ)ke_start_stat=kssNOT_VZ;
00000e  f7fffffe          BL       gran_char
000012  48a4              LDR      r0,|L4.676|
000014  eb040144          ADD      r1,r4,r4,LSL #1
;;;220    else if(BAT_IS_ON[in]!=bisON)ke_start_stat=kssNOT_BAT;
000018  eb001541          ADD      r5,r0,r1,LSL #5
00001c  f8950047          LDRB     r0,[r5,#0x47]
000020  f8951046          LDRB     r1,[r5,#0x46]
000024  ea800001          EOR      r0,r0,r1
;;;221    else if(bat[in]._av&(1<<0))ke_start_stat=kssNOT_BAT_AV;
;;;222    else if(bat[in]._temper_stat&(1<<1))ke_start_stat=kssNOT_BAT_AV_T;
;;;223    else if(bat[in]._av&(1<<1))ke_start_stat=kssNOT_BAT_AV_ASS;
;;;224    else if(bat[in]._Ib>IKB)ke_start_stat=kssNOT_BAT_ZAR;
;;;225    else if(bat[in]._Ib<-IKB)ke_start_stat=kssNOT_BAT_RAZR;
;;;226    else if((spc_stat==spcKE)&&(spc_bat==0))ke_start_stat=kssNOT_KE1;
;;;227    else if((spc_stat==spcKE)&&(spc_bat==1))ke_start_stat=kssNOT_KE2;
;;;228    else 
;;;229    	{
;;;230    
;;;231    	ke_start_stat=kssYES;
;;;232    
;;;233    	spc_stat=spcKE;
;;;234    	__ee_spc_stat=spcKE;
;;;235    	lc640_write_int(EE_SPC_STAT,__ee_spc_stat);
;;;236    	
;;;237    	spc_bat=in;
;;;238    	__ee_spc_bat=in;
;;;239    	lc640_write_int(EE_SPC_BAT,__ee_spc_bat);
;;;240    
;;;241    	bat[in]._zar_cnt_ke=0;
;;;242    	lc640_write_int(ADR_EE_BAT_ZAR_CNT_KE[in],0);
;;;243    	
;;;244    	spc_phase=0;
;;;245    	__ee_spc_phase=0;
;;;246    	lc640_write_int(EE_SPC_PHASE,__ee_spc_phase);
;;;247    
;;;248    	//ke_mem_hndl(in,lc640_read_int(ADR_EE_BAT_ZAR_CNT_KE[spc_bat]));
;;;249    
;;;250    		{					
;;;251    		signed short temp_temp;
;;;252    		signed char temp;
;;;253    		temp_temp=bat[in]._u_old[((bat_u_old_cnt+1)&0x07)]; 
;;;254    		    
;;;255    		temp=LPC_RTC->YEAR;
;;;256    		gran_char(&temp,1,99);
;;;257    		*((char*)(&(ke_date[0])))=temp;
;;;258    			
;;;259    		temp=LPC_RTC->MONTH;
;;;260    		gran_char(&temp,1,12);
;;;261    		*(((char*)(&(ke_date[0])))+1)=temp;
;;;262    		
;;;263    		temp=LPC_RTC->DOM;
;;;264    		gran_char(&temp,1,31);
;;;265    		*(((char*)(&(ke_date[0])))+2)=temp;			
;;;266    				
;;;267    		*(((char*)(&(ke_date[0])))+3)=*((char*)&temp_temp);
;;;268    		lc640_write_long(EE_SPC_KE_DATE0,ke_date[0]);
;;;269    
;;;270    		temp=LPC_RTC->HOUR;
;;;271    		gran_char(&temp,0,23);
;;;272    		*((char*)(&(ke_date[1])))=temp;
;;;273                   
;;;274    		temp=LPC_RTC->MIN;
;;;275    		gran_char(&temp,0,59);
;;;276    		*(((char*)(&(ke_date[1])))+1)=temp;
;;;277    	          
;;;278    		temp=LPC_RTC->SEC;
;;;279    		gran_char(&temp,0,59);
;;;280    		*(((char*)(&(ke_date[1])))+2)=temp;
;;;281    			
;;;282    		*(((char*)(&(ke_date[1])))+3)=*(((char*)&temp_temp)+1);
;;;283    		lc640_write_long(EE_SPC_KE_DATE1,ke_date[1]);
;;;284    		}
;;;285    
;;;286    	}
;;;287    }
000028  4a9f              LDR      r2,|L4.680|
00002a  b100              CBZ      r0,|L4.46|
00002c  7050              STRB     r0,[r2,#1]
                  |L4.46|
00002e  ea010100          AND      r1,r1,r0              ;221
000032  b101              CBZ      r1,|L4.54|
000034  7091              STRB     r1,[r2,#2]            ;221
                  |L4.54|
000036  ea000301          AND      r3,r0,r1              ;221
00003a  07db              LSLS     r3,r3,#31             ;221
00003c  d027              BEQ      |L4.142|
00003e  78d0              LDRB     r0,[r2,#3]            ;221  ; plazma_inv
000040  f1000001          ADD      r0,r0,#1              ;221
000044  70d0              STRB     r0,[r2,#3]            ;221
000046  b134              CBZ      r4,|L4.86|
000048  2c01              CMP      r4,#1                 ;221
00004a  d00b              BEQ      |L4.100|
00004c  2c02              CMP      r4,#2                 ;222
00004e  d010              BEQ      |L4.114|
000050  2c03              CMP      r4,#3                 ;222
000052  d015              BEQ      |L4.128|
000054  e120              B        |L4.664|
                  |L4.86|
000056  2301              MOVS     r3,#1                 ;222
000058  461a              MOV      r2,r3                 ;222
00005a  210e              MOVS     r1,#0xe
00005c  a093              ADR      r0,|L4.684|
00005e  f7fffffe          BL       snmp_trap_send
000062  e119              B        |L4.664|
                  |L4.100|
000064  2301              MOVS     r3,#1                 ;223
000066  2202              MOVS     r2,#2
000068  210e              MOVS     r1,#0xe               ;224
00006a  a097              ADR      r0,|L4.712|
00006c  f7fffffe          BL       snmp_trap_send
000070  e112              B        |L4.664|
                  |L4.114|
000072  2301              MOVS     r3,#1                 ;224
000074  2203              MOVS     r2,#3                 ;224
000076  210e              MOVS     r1,#0xe               ;224
000078  a09a              ADR      r0,|L4.740|
00007a  f7fffffe          BL       snmp_trap_send
00007e  e10b              B        |L4.664|
                  |L4.128|
000080  2301              MOVS     r3,#1                 ;225
000082  2204              MOVS     r2,#4                 ;225
000084  210e              MOVS     r1,#0xe               ;225
000086  a09e              ADR      r0,|L4.768|
000088  f7fffffe          BL       snmp_trap_send
00008c  e104              B        |L4.664|
                  |L4.142|
00008e  0783              LSLS     r3,r0,#30             ;226
000090  d529              BPL      |L4.230|
000092  078b              LSLS     r3,r1,#30             ;226
000094  d527              BPL      |L4.230|
000096  78d0              LDRB     r0,[r2,#3]            ;227  ; plazma_inv
000098  f1000001          ADD      r0,r0,#1              ;227
00009c  70d0              STRB     r0,[r2,#3]            ;226
00009e  b134              CBZ      r4,|L4.174|
0000a0  2c01              CMP      r4,#1                 ;226
0000a2  d00b              BEQ      |L4.188|
0000a4  2c02              CMP      r4,#2                 ;227
0000a6  d010              BEQ      |L4.202|
0000a8  2c03              CMP      r4,#3                 ;231
0000aa  d015              BEQ      |L4.216|
0000ac  e0f4              B        |L4.664|
                  |L4.174|
0000ae  2302              MOVS     r3,#2                 ;233
0000b0  2201              MOVS     r2,#1                 ;234
0000b2  210e              MOVS     r1,#0xe               ;234
0000b4  a099              ADR      r0,|L4.796|
0000b6  f7fffffe          BL       snmp_trap_send
0000ba  e0ed              B        |L4.664|
                  |L4.188|
0000bc  2302              MOVS     r3,#2                 ;235
0000be  461a              MOV      r2,r3                 ;237
0000c0  210e              MOVS     r1,#0xe               ;238
0000c2  a09d              ADR      r0,|L4.824|
0000c4  f7fffffe          BL       snmp_trap_send
0000c8  e0e6              B        |L4.664|
                  |L4.202|
0000ca  2302              MOVS     r3,#2                 ;239
0000cc  2203              MOVS     r2,#3                 ;239
0000ce  210e              MOVS     r1,#0xe               ;241
0000d0  a0a0              ADR      r0,|L4.852|
0000d2  f7fffffe          BL       snmp_trap_send
0000d6  e0df              B        |L4.664|
                  |L4.216|
0000d8  2302              MOVS     r3,#2                 ;242
0000da  2204              MOVS     r2,#4                 ;242
0000dc  210e              MOVS     r1,#0xe               ;244
0000de  a0a4              ADR      r0,|L4.880|
0000e0  f7fffffe          BL       snmp_trap_send
0000e4  e0d8              B        |L4.664|
                  |L4.230|
0000e6  0743              LSLS     r3,r0,#29             ;246
0000e8  d529              BPL      |L4.318|
0000ea  074b              LSLS     r3,r1,#29             ;246
0000ec  d527              BPL      |L4.318|
0000ee  78d0              LDRB     r0,[r2,#3]            ;253  ; plazma_inv
0000f0  f1000001          ADD      r0,r0,#1              ;253
0000f4  70d0              STRB     r0,[r2,#3]            ;253
0000f6  b134              CBZ      r4,|L4.262|
0000f8  2c01              CMP      r4,#1                 ;253
0000fa  d00b              BEQ      |L4.276|
0000fc  2c02              CMP      r4,#2                 ;253
0000fe  d010              BEQ      |L4.290|
000100  2c03              CMP      r4,#3                 ;255
000102  d015              BEQ      |L4.304|
000104  e0c8              B        |L4.664|
                  |L4.262|
000106  2303              MOVS     r3,#3                 ;256
000108  2201              MOVS     r2,#1                 ;256
00010a  210e              MOVS     r1,#0xe               ;256
00010c  a09f              ADR      r0,|L4.908|
00010e  f7fffffe          BL       snmp_trap_send
000112  e0c1              B        |L4.664|
                  |L4.276|
000114  2303              MOVS     r3,#3                 ;257
000116  2202              MOVS     r2,#2                 ;257
000118  210e              MOVS     r1,#0xe               ;257
00011a  a0a3              ADR      r0,|L4.936|
00011c  f7fffffe          BL       snmp_trap_send
000120  e0ba              B        |L4.664|
                  |L4.290|
000122  2303              MOVS     r3,#3                 ;260
000124  461a              MOV      r2,r3                 ;260
000126  210e              MOVS     r1,#0xe               ;260
000128  a0a6              ADR      r0,|L4.964|
00012a  f7fffffe          BL       snmp_trap_send
00012e  e0b3              B        |L4.664|
                  |L4.304|
000130  2303              MOVS     r3,#3                 ;261
000132  2204              MOVS     r2,#4                 ;263
000134  210e              MOVS     r1,#0xe               ;263
000136  a0aa              ADR      r0,|L4.992|
000138  f7fffffe          BL       snmp_trap_send
00013c  e0ac              B        |L4.664|
                  |L4.318|
00013e  0703              LSLS     r3,r0,#28             ;264
000140  d529              BPL      |L4.406|
000142  070b              LSLS     r3,r1,#28             ;265
000144  d527              BPL      |L4.406|
000146  78d0              LDRB     r0,[r2,#3]            ;267  ; plazma_inv
000148  f1000001          ADD      r0,r0,#1              ;267
00014c  70d0              STRB     r0,[r2,#3]            ;268
00014e  b134              CBZ      r4,|L4.350|
000150  2c01              CMP      r4,#1                 ;268
000152  d00b              BEQ      |L4.364|
000154  2c02              CMP      r4,#2                 ;268
000156  d010              BEQ      |L4.378|
000158  2c03              CMP      r4,#3                 ;270
00015a  d015              BEQ      |L4.392|
00015c  e09c              B        |L4.664|
                  |L4.350|
00015e  2304              MOVS     r3,#4                 ;271
000160  2201              MOVS     r2,#1                 ;271
000162  210e              MOVS     r1,#0xe               ;271
000164  a0a5              ADR      r0,|L4.1020|
000166  f7fffffe          BL       snmp_trap_send
00016a  e095              B        |L4.664|
                  |L4.364|
00016c  2304              MOVS     r3,#4                 ;274
00016e  2202              MOVS     r2,#2                 ;275
000170  210e              MOVS     r1,#0xe               ;275
000172  a0ab              ADR      r0,|L4.1056|
000174  f7fffffe          BL       snmp_trap_send
000178  e08e              B        |L4.664|
                  |L4.378|
00017a  2304              MOVS     r3,#4                 ;276
00017c  2203              MOVS     r2,#3                 ;276
00017e  210e              MOVS     r1,#0xe               ;278
000180  a0b0              ADR      r0,|L4.1092|
000182  f7fffffe          BL       snmp_trap_send
000186  e087              B        |L4.664|
                  |L4.392|
000188  2304              MOVS     r3,#4                 ;279
00018a  461a              MOV      r2,r3                 ;279
00018c  210e              MOVS     r1,#0xe               ;280
00018e  a0b6              ADR      r0,|L4.1128|
000190  f7fffffe          BL       snmp_trap_send
000194  e080              B        |L4.664|
                  |L4.406|
000196  06c3              LSLS     r3,r0,#27             ;282
000198  d529              BPL      |L4.494|
00019a  06cb              LSLS     r3,r1,#27             ;283
00019c  d527              BPL      |L4.494|
00019e  78d0              LDRB     r0,[r2,#3]            ;283  ; plazma_inv
0001a0  f1000001          ADD      r0,r0,#1              ;283
0001a4  70d0              STRB     r0,[r2,#3]
0001a6  b134              CBZ      r4,|L4.438|
0001a8  2c01              CMP      r4,#1                 ;227
0001aa  d00b              BEQ      |L4.452|
0001ac  2c02              CMP      r4,#2
0001ae  d010              BEQ      |L4.466|
0001b0  2c03              CMP      r4,#3
0001b2  d015              BEQ      |L4.480|
0001b4  e070              B        |L4.664|
                  |L4.438|
0001b6  2305              MOVS     r3,#5
0001b8  2201              MOVS     r2,#1
0001ba  210e              MOVS     r1,#0xe
0001bc  a0b3              ADR      r0,|L4.1164|
0001be  f7fffffe          BL       snmp_trap_send
0001c2  e069              B        |L4.664|
                  |L4.452|
0001c4  2305              MOVS     r3,#5
0001c6  2202              MOVS     r2,#2
0001c8  210e              MOVS     r1,#0xe
0001ca  a0b9              ADR      r0,|L4.1200|
0001cc  f7fffffe          BL       snmp_trap_send
0001d0  e062              B        |L4.664|
                  |L4.466|
0001d2  2305              MOVS     r3,#5
0001d4  2203              MOVS     r2,#3
0001d6  210e              MOVS     r1,#0xe
0001d8  a0be              ADR      r0,|L4.1236|
0001da  f7fffffe          BL       snmp_trap_send
0001de  e05b              B        |L4.664|
                  |L4.480|
0001e0  2305              MOVS     r3,#5
0001e2  2204              MOVS     r2,#4
0001e4  210e              MOVS     r1,#0xe
0001e6  a0c4              ADR      r0,|L4.1272|
0001e8  f7fffffe          BL       snmp_trap_send
0001ec  e054              B        |L4.664|
                  |L4.494|
0001ee  0683              LSLS     r3,r0,#26
0001f0  d529              BPL      |L4.582|
0001f2  068b              LSLS     r3,r1,#26
0001f4  d527              BPL      |L4.582|
0001f6  78d0              LDRB     r0,[r2,#3]  ; plazma_inv
0001f8  f1000001          ADD      r0,r0,#1
0001fc  70d0              STRB     r0,[r2,#3]
0001fe  b134              CBZ      r4,|L4.526|
000200  2c01              CMP      r4,#1
000202  d00b              BEQ      |L4.540|
000204  2c02              CMP      r4,#2
000206  d010              BEQ      |L4.554|
000208  2c03              CMP      r4,#3
00020a  d015              BEQ      |L4.568|
00020c  e044              B        |L4.664|
                  |L4.526|
00020e  2306              MOVS     r3,#6
000210  2201              MOVS     r2,#1
000212  210e              MOVS     r1,#0xe
000214  a0c1              ADR      r0,|L4.1308|
000216  f7fffffe          BL       snmp_trap_send
00021a  e03d              B        |L4.664|
                  |L4.540|
00021c  2306              MOVS     r3,#6
00021e  2202              MOVS     r2,#2
000220  210e              MOVS     r1,#0xe
000222  a0c7              ADR      r0,|L4.1344|
000224  f7fffffe          BL       snmp_trap_send
000228  e036              B        |L4.664|
                  |L4.554|
00022a  2306              MOVS     r3,#6
00022c  2203              MOVS     r2,#3
00022e  210e              MOVS     r1,#0xe
000230  a0cc              ADR      r0,|L4.1380|
000232  f7fffffe          BL       snmp_trap_send
000236  e02f              B        |L4.664|
                  |L4.568|
000238  2306              MOVS     r3,#6
00023a  2204              MOVS     r2,#4
00023c  210e              MOVS     r1,#0xe
00023e  a0d2              ADR      r0,|L4.1416|
000240  f7fffffe          BL       snmp_trap_send
000244  e028              B        |L4.664|
                  |L4.582|
000246  b300              CBZ      r0,|L4.650|
000248  b9f9              CBNZ     r1,|L4.650|
00024a  78d0              LDRB     r0,[r2,#3]  ; plazma_inv
00024c  f1000001          ADD      r0,r0,#1
000250  70d0              STRB     r0,[r2,#3]
000252  b134              CBZ      r4,|L4.610|
000254  2c01              CMP      r4,#1
000256  d00b              BEQ      |L4.624|
000258  2c02              CMP      r4,#2
00025a  d010              BEQ      |L4.638|
00025c  2c03              CMP      r4,#3
00025e  d015              BEQ      |L4.652|
000260  e01a              B        |L4.664|
                  |L4.610|
000262  2300              MOVS     r3,#0
000264  2201              MOVS     r2,#1
000266  210e              MOVS     r1,#0xe
000268  a0d0              ADR      r0,|L4.1452|
00026a  f7fffffe          BL       snmp_trap_send
00026e  e013              B        |L4.664|
                  |L4.624|
000270  2300              MOVS     r3,#0
000272  2202              MOVS     r2,#2
000274  210e              MOVS     r1,#0xe
000276  a0d2              ADR      r0,|L4.1472|
000278  f7fffffe          BL       snmp_trap_send
00027c  e00c              B        |L4.664|
                  |L4.638|
00027e  2300              MOVS     r3,#0
000280  2203              MOVS     r2,#3
000282  210e              MOVS     r1,#0xe
000284  a0d3              ADR      r0,|L4.1492|
000286  f7fffffe          BL       snmp_trap_send
                  |L4.650|
00028a  e005              B        |L4.664|
                  |L4.652|
00028c  2300              MOVS     r3,#0
00028e  2204              MOVS     r2,#4
000290  210e              MOVS     r1,#0xe
000292  a0d5              ADR      r0,|L4.1512|
000294  f7fffffe          BL       snmp_trap_send
                  |L4.664|
000298  f8150f46          LDRB     r0,[r5,#0x46]!
00029c  7068              STRB     r0,[r5,#1]
00029e  bd70              POP      {r4-r6,pc}
;;;288    
                          ENDP

                  |L4.672|
                          DCD      first_inv_slot
                  |L4.676|
                          DCD      inv
                  |L4.680|
                          DCD      ||area_number.21||+0x84
                  |L4.684|
0002ac  496e7665          DCB      "Invertor #1 Alarm, overload",0
0002b0  72746f72
0002b4  20233120
0002b8  416c6172
0002bc  6d2c206f
0002c0  7665726c
0002c4  6f616400
                  |L4.712|
0002c8  496e7665          DCB      "Invertor #2 Alarm, overload",0
0002cc  72746f72
0002d0  20233220
0002d4  416c6172
0002d8  6d2c206f
0002dc  7665726c
0002e0  6f616400
                  |L4.740|
0002e4  496e7665          DCB      "Invertor #3 Alarm, overload",0
0002e8  72746f72
0002ec  20233320
0002f0  416c6172
0002f4  6d2c206f
0002f8  7665726c
0002fc  6f616400
                  |L4.768|
000300  496e7665          DCB      "Invertor #4 Alarm, overload",0
000304  72746f72
000308  20233420
00030c  416c6172
000310  6d2c206f
000314  7665726c
000318  6f616400
                  |L4.796|
00031c  496e7665          DCB      "Invertor #1 Alarm, overheat",0
000320  72746f72
000324  20233120
000328  416c6172
00032c  6d2c206f
000330  76657268
000334  65617400
                  |L4.824|
000338  496e7665          DCB      "Invertor #2 Alarm, overheat",0
00033c  72746f72
000340  20233220
000344  416c6172
000348  6d2c206f
00034c  76657268
000350  65617400
                  |L4.852|
000354  496e7665          DCB      "Invertor #3 Alarm, overheat",0
000358  72746f72
00035c  20233320
000360  416c6172
000364  6d2c206f
000368  76657268
00036c  65617400
                  |L4.880|
000370  496e7665          DCB      "Invertor #4 Alarm, overheat",0
000374  72746f72
000378  20233420
00037c  416c6172
000380  6d2c206f
000384  76657268
000388  65617400
                  |L4.908|
00038c  496e7665          DCB      "Invertor #1 Alarm, is warm",0
000390  72746f72
000394  20233120
000398  416c6172
00039c  6d2c2069
0003a0  73207761
0003a4  726d00  
0003a7  00                DCB      0
                  |L4.936|
0003a8  496e7665          DCB      "Invertor #2 Alarm, is warm",0
0003ac  72746f72
0003b0  20233220
0003b4  416c6172
0003b8  6d2c2069
0003bc  73207761
0003c0  726d00  
0003c3  00                DCB      0
                  |L4.964|
0003c4  496e7665          DCB      "Invertor #3 Alarm, is warm",0
0003c8  72746f72
0003cc  20233320
0003d0  416c6172
0003d4  6d2c2069
0003d8  73207761
0003dc  726d00  
0003df  00                DCB      0
                  |L4.992|
0003e0  496e7665          DCB      "Invertor #4 Alarm, is warm",0
0003e4  72746f72
0003e8  20233420
0003ec  416c6172
0003f0  6d2c2069
0003f4  73207761
0003f8  726d00  
0003fb  00                DCB      0
                  |L4.1020|
0003fc  496e7665          DCB      "Invertor #1 Alarm, voltage is up",0
000400  72746f72
000404  20233120
000408  416c6172
00040c  6d2c2076
000410  6f6c7461
000414  67652069
000418  73207570
00041c  00      
00041d  00                DCB      0
00041e  00                DCB      0
00041f  00                DCB      0
                  |L4.1056|
000420  496e7665          DCB      "Invertor #2 Alarm, voltage is up",0
000424  72746f72
000428  20233220
00042c  416c6172
000430  6d2c2076
000434  6f6c7461
000438  67652069
00043c  73207570
000440  00      
000441  00                DCB      0
000442  00                DCB      0
000443  00                DCB      0
                  |L4.1092|
000444  496e7665          DCB      "Invertor #3 Alarm, voltage is up",0
000448  72746f72
00044c  20233320
000450  416c6172
000454  6d2c2076
000458  6f6c7461
00045c  67652069
000460  73207570
000464  00      
000465  00                DCB      0
000466  00                DCB      0
000467  00                DCB      0
                  |L4.1128|
000468  496e7665          DCB      "Invertor #4 Alarm, voltage is up",0
00046c  72746f72
000470  20233420
000474  416c6172
000478  6d2c2076
00047c  6f6c7461
000480  67652069
000484  73207570
000488  00      
000489  00                DCB      0
00048a  00                DCB      0
00048b  00                DCB      0
                  |L4.1164|
00048c  496e7665          DCB      "Invertor #1 Alarm, voltage is down",0
000490  72746f72
000494  20233120
000498  416c6172
00049c  6d2c2076
0004a0  6f6c7461
0004a4  67652069
0004a8  7320646f
0004ac  776e00  
0004af  00                DCB      0
                  |L4.1200|
0004b0  496e7665          DCB      "Invertor #2 Alarm, voltage is down",0
0004b4  72746f72
0004b8  20233220
0004bc  416c6172
0004c0  6d2c2076
0004c4  6f6c7461
0004c8  67652069
0004cc  7320646f
0004d0  776e00  
0004d3  00                DCB      0
                  |L4.1236|
0004d4  496e7665          DCB      "Invertor #3 Alarm, voltage is down",0
0004d8  72746f72
0004dc  20233320
0004e0  416c6172
0004e4  6d2c2076
0004e8  6f6c7461
0004ec  67652069
0004f0  7320646f
0004f4  776e00  
0004f7  00                DCB      0
                  |L4.1272|
0004f8  496e7665          DCB      "Invertor #4 Alarm, voltage is down",0
0004fc  72746f72
000500  20233420
000504  416c6172
000508  6d2c2076
00050c  6f6c7461
000510  67652069
000514  7320646f
000518  776e00  
00051b  00                DCB      0
                  |L4.1308|
00051c  496e7665          DCB      "Invertor #1 Alarm, output is offed",0
000520  72746f72
000524  20233120
000528  416c6172
00052c  6d2c206f
000530  75747075
000534  74206973
000538  206f6666
00053c  656400  
00053f  00                DCB      0
                  |L4.1344|
000540  496e7665          DCB      "Invertor #2 Alarm, output is offed",0
000544  72746f72
000548  20233220
00054c  416c6172
000550  6d2c206f
000554  75747075
000558  74206973
00055c  206f6666
000560  656400  
000563  00                DCB      0
                  |L4.1380|
000564  496e7665          DCB      "Invertor #3 Alarm, output is offed",0
000568  72746f72
00056c  20233320
000570  416c6172
000574  6d2c206f
000578  75747075
00057c  74206973
000580  206f6666
000584  656400  
000587  00                DCB      0
                  |L4.1416|
000588  496e7665          DCB      "Invertor #4 Alarm, output is offed",0
00058c  72746f72
000590  20233420
000594  416c6172
000598  6d2c206f
00059c  75747075
0005a0  74206973
0005a4  206f6666
0005a8  656400  
0005ab  00                DCB      0
                  |L4.1452|
0005ac  496e7665          DCB      "Invertor #1 is norm",0
0005b0  72746f72
0005b4  20233120
0005b8  6973206e
0005bc  6f726d00
                  |L4.1472|
0005c0  496e7665          DCB      "Invertor #2 is norm",0
0005c4  72746f72
0005c8  20233220
0005cc  6973206e
0005d0  6f726d00
                  |L4.1492|
0005d4  496e7665          DCB      "Invertor #3 is norm",0
0005d8  72746f72
0005dc  20233320
0005e0  6973206e
0005e4  6f726d00
                  |L4.1512|
0005e8  496e7665          DCB      "Invertor #4 is norm",0
0005ec  72746f72
0005f0  20233420
0005f4  6973206e
0005f8  6f726d00

                          AREA ||.bss||, DATA, NOINIT, ALIGN=2

                  adc_buff
                          %        1024
                  adc_buff_
                          %        32
                  main_power_buffer
                          %        32

                          AREA ||area_number.7||, DATA, NOINIT, ALIGN=1

                          EXPORTAS ||area_number.7||, ||.bss||
                  adc_buff_max
                          %        24

                          AREA ||area_number.8||, DATA, NOINIT, ALIGN=1

                          EXPORTAS ||area_number.8||, ||.bss||
                  net_buff
                          %        64

                          AREA ||.constdata||, DATA, READONLY, ALIGN=0

                  sk_buff_KONTUR
000000  0d0b0f0e          DCB      0x0d,0x0b,0x0f,0x0e

                          AREA ||area_number.11||, DATA, READONLY, ALIGN=0

                          EXPORTAS ||area_number.11||, ||.constdata||
                  sk_buff_RSTKM
000000  0d0b0f0e          DCB      0x0d,0x0b,0x0f,0x0e

                          AREA ||area_number.12||, DATA, READONLY, ALIGN=0

                          EXPORTAS ||area_number.12||, ||.constdata||
                  sk_buff_GLONASS
000000  0b0d0f0e          DCB      0x0b,0x0d,0x0f,0x0e

                          AREA ||area_number.13||, DATA, READONLY, ALIGN=0

                          EXPORTAS ||area_number.13||, ||.constdata||
                  sk_buff_3U
000000  0b0d0f0e          DCB      0x0b,0x0d,0x0f,0x0e

                          AREA ||area_number.14||, DATA, READONLY, ALIGN=0

                          EXPORTAS ||area_number.14||, ||.constdata||
                  sk_buff_6U
000000  0b0d0f0e          DCB      0x0b,0x0d,0x0f,0x0e

                          AREA ||area_number.15||, DATA, READONLY, ALIGN=0

                          EXPORTAS ||area_number.15||, ||.constdata||
                  sk_buff_220
000000  0b0d0f0e          DCB      0x0b,0x0d,0x0f,0x0e

                          AREA ||area_number.16||, DATA, READONLY, ALIGN=0

                          EXPORTAS ||area_number.16||, ||.constdata||
                  sk_buff_TELECORE2015
000000  0b0d0f0e          DCB      0x0b,0x0d,0x0f,0x0e

                          AREA ||.data||, DATA, ALIGN=1

                  adc_buff_min
000000  13881388          DCW      0x1388,0x1388
000004  13881388          DCW      0x1388,0x1388
000008  13881388          DCW      0x1388,0x1388
00000c  13881388          DCW      0x1388,0x1388
000010  13881388          DCW      0x1388,0x1388
                          DCDU     0x00000000

                          AREA ||area_number.18||, DATA, ALIGN=1

                          EXPORTAS ||area_number.18||, ||.data||
                  unet_buff_min
000000  1388              DCW      0x1388

                          AREA ||area_number.19||, DATA, ALIGN=0

                          EXPORTAS ||area_number.19||, ||.data||
                  adc_stat
000000  01                DCB      0x01

                          AREA ||area_number.20||, DATA, ALIGN=1

                          EXPORTAS ||area_number.20||, ||.data||
                  bat_ver_cnt
000000  0096              DCW      0x0096

                          AREA ||area_number.21||, DATA, ALIGN=2

                          EXPORTAS ||area_number.21||, ||.data||
                  vent_stat
000000  00                DCB      0x00
                  adc_self_ch_cnt
000001  00                DCB      0x00
                  adc_ch_net
000002  00                DCB      0x00
                  adc_ch
000003  00                DCB      0x00
                  adc_ch_cnt
000004  00                DCB      0x00
                  adc_window_flag
000005  00                DCB      0x00
                  ch_cnt0
000006  00                DCB      0x00
                  b1Hz_ch
000007  00                DCB      0x00
                  i
000008  00                DCB      0x00
                  iiii
000009  00                DCB      0x00
                  bAVG
00000a  00                DCB      0x00
                  avg_num
00000b  00                DCB      0x00
                  kb_full_ver
00000c  00                DCB      0x00
                  kb_start_ips
00000d  00                DCB      0x00
                  num_of_wrks_bps
00000e  00                DCB      0x00
                  num_necc_up
00000f  00                DCB      0x00
                  num_necc_down
000010  00                DCB      0x00
                  sh_cnt0
000011  00                DCB      0x00
                  b1Hz_sh
000012  00                DCB      0x00
                  spc_stat
000013  00                DCB      0x00
                  spc_bat
000014  00                DCB      0x00
                  spc_phase
000015  00                DCB      0x00
                  bAVZ
000016  00                DCB      0x00
                  ke_start_stat
000017  00                DCB      0x00
                  numOfForvardBps
000018  00                DCB      0x00
                  numOfForvardBps_minCnt
000019  00                DCB      0x00
                  cntrl_stat
00001a  0258              DCW      0x0258
                  cntrl_stat_old
00001c  0258              DCW      0x0258
                  avg_main_cnt
00001e  0014              DCW      0x0014
                  ibat_ips
000020  0000              DCB      0x00,0x00
                  ibat_ips_
000022  0000              DCB      0x00,0x00
                  num_necc_block_cnt
000024  0000              DCB      0x00,0x00
                  net_buff_
000026  0000              DCB      0x00,0x00
                  adc_result
000028  0000              DCB      0x00,0x00
                  adc_gorb_cnt
00002a  0000              DCB      0x00,0x00
                  adc_zero_cnt
00002c  0000              DCB      0x00,0x00
                  adc_window_cnt
00002e  0000              DCB      0x00,0x00
                  adc_net_buff_cnt
000030  0000              DCB      0x00,0x00
                  plazma_sk
000032  0000              DCB      0x00,0x00
                  cntrl_stat_new
000034  0000              DCB      0x00,0x00
                  Ibmax
000036  0000              DCB      0x00,0x00
                  IZMAX_
000038  0000              DCB      0x00,0x00
                  samokalibr_cnt
00003a  0000              DCB      0x00,0x00
                  main_kb_cnt
00003c  0000              DCB      0x00,0x00
                  kb_cnt_1lev
00003e  0000              DCB      0x00,0x00
                  kb_cnt_2lev
000040  0000              DCB      0x00,0x00
                  kb_start
000042  0000              DCB      0x00,0x00
                  bps_on_mask
000044  0000              DCB      0x00,0x00
                  bps_off_mask
000046  0000              DCB      0x00,0x00
                  vz_cnt_s
000048  0000              DCB      0x00,0x00
                  vz_cnt_s_
00004a  0000              DCB      0x00,0x00
                  vz_cnt_h
00004c  0000              DCB      0x00,0x00
                  vz_cnt_h_
00004e  0000              DCB      0x00,0x00
                  cnt_end_ke
000050  0000              DCB      0x00,0x00
                  __ee_vz_cnt
000052  0000              DCB      0x00,0x00
                  __ee_spc_stat
000054  0000              DCB      0x00,0x00
                  __ee_spc_bat
000056  0000              DCB      0x00,0x00
                  __ee_spc_phase
000058  0000              DCB      0x00,0x00
                  cntrl_stat_blok_cnt
00005a  0000              DCB      0x00,0x00
                  cntrl_stat_blok_cnt_
00005c  0000              DCB      0x00,0x00
                  numOfForvardBps_hourCnt
00005e  0000              DCB      0x00,0x00
                  ibat
                          DCD      0x00000000
                  ibat_
                          DCD      0x00000000
                  i_avg_max
                          DCD      0x00000000
                  i_avg_min
                          DCD      0x00000000
                  i_avg_summ
                          DCD      0x00000000
                  i_avg
                          DCD      0x00000000
                  avg
                          DCD      0x00000000
                  cntrl_stat_blok_cnt_plus
                          DCD      0x00000000
                  cntrl_stat_blok_cnt_minus
                          DCD      0x00000000
                  plazma_inv
                          DCD      0x00000000
                  net_metr_buff_
                          DCD      0x00000000
00008c  0000              DCB      0x00,0x00
                  adc_self_ch_buff
00008e  0000              DCB      0x00,0x00
                          DCD      0x00000000
                  adc_self_ch_disp
                          DCD      0x00000000
000098  00000000          DCB      0x00,0x00,0x00,0x00
                  ke_date
                          %        8

                          AREA ||area_number.22||, DATA, ALIGN=1

                          EXPORTAS ||area_number.22||, ||.data||
                  unet_buff_max
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.23||, DATA, ALIGN=0

                          EXPORTAS ||area_number.23||, ||.data||
                  adc_cnt
000000  00                DCB      0x00

                          AREA ||area_number.24||, DATA, ALIGN=0

                          EXPORTAS ||area_number.24||, ||.data||
                  adc_cnt1
000000  00                DCB      0x00

                          AREA ||area_number.25||, DATA, ALIGN=1

                          EXPORTAS ||area_number.25||, ||.data||
                  zero_cnt
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.26||, DATA, ALIGN=0

                          EXPORTAS ||area_number.26||, ||.data||
                  net_buff_cnt
000000  00                DCB      0x00

                          AREA ||area_number.27||, DATA, ALIGN=1

                          EXPORTAS ||area_number.27||, ||.data||
                  ADWR
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.28||, DATA, ALIGN=1

                          EXPORTAS ||area_number.28||, ||.data||
                  period_cnt
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.29||, DATA, ALIGN=1

                          EXPORTAS ||area_number.29||, ||.data||
                  non_zero_cnt
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.30||, DATA, ALIGN=0

                          EXPORTAS ||area_number.30||, ||.data||
                  rele_stat
000000  00                DCB      0x00

                          AREA ||area_number.31||, DATA, ALIGN=0

                          EXPORTAS ||area_number.31||, ||.data||
                  bRELE_OUT
000000  00                DCB      0x00

                          AREA ||area_number.32||, DATA, ALIGN=2

                          EXPORTAS ||area_number.32||, ||.data||
                  main_power_buffer_
                          DCD      0x00000000

                          AREA ||area_number.33||, DATA, ALIGN=1

                          EXPORTAS ||area_number.33||, ||.data||
                  main_power_buffer_cnt
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.34||, DATA, ALIGN=1

                          EXPORTAS ||area_number.34||, ||.data||
                  adc_buff_out_
                          DCDU     0x00000000
000004  0000              DCB      0x00,0x00

                          AREA ||area_number.35||, DATA, ALIGN=1

                          EXPORTAS ||area_number.35||, ||.data||
                  plazma_adc_cnt
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.36||, DATA, ALIGN=0

                          EXPORTAS ||area_number.36||, ||.data||
                  unh_cnt0
000000  00                DCB      0x00

                          AREA ||area_number.37||, DATA, ALIGN=0

                          EXPORTAS ||area_number.37||, ||.data||
                  unh_cnt1
000000  00                DCB      0x00

                          AREA ||area_number.38||, DATA, ALIGN=0

                          EXPORTAS ||area_number.38||, ||.data||
                  b1Hz_unh
000000  00                DCB      0x00

                          AREA ||area_number.39||, DATA, ALIGN=0

                          EXPORTAS ||area_number.39||, ||.data||
                  avg_cnt
000000  00                DCB      0x00

                          AREA ||area_number.40||, DATA, ALIGN=0

                          EXPORTAS ||area_number.40||, ||.data||
                  bps_all_off_cnt
000000  00                DCB      0x00

                          AREA ||area_number.41||, DATA, ALIGN=0

                          EXPORTAS ||area_number.41||, ||.data||
                  bps_mask_off_cnt
000000  00                DCB      0x00

                          AREA ||area_number.42||, DATA, ALIGN=0

                          EXPORTAS ||area_number.42||, ||.data||
                  bps_mask_on_off_cnt
000000  00                DCB      0x00

                          AREA ||area_number.43||, DATA, ALIGN=0

                          EXPORTAS ||area_number.43||, ||.data||
                  bps_hndl_2sec_cnt
000000  00                DCB      0x00

                          AREA ||area_number.44||, DATA, ALIGN=0

                          EXPORTAS ||area_number.44||, ||.data||
                  plazma_bat
000000  00                DCB      0x00
