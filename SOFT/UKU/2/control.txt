; generated by ARM C/C++ Compiler, 4.1 [Build 644]
; commandline ArmCC [--list --debug -c --asm --interleave -o.\EXE\control.o --asm_dir=.\ --list_dir=.\ --depend=.\EXE\control.d --feedback=.\EXE\UKU_220_IPS_TERMOKOMPENSAT.fed --cpu=Cortex-M3 --apcs=interwork -O1 -IC:\Keil\ARM\CMSIS\Include -IC:\Keil\ARM\INC\NXP\LPC17xx -D__MICROLIB -DUKU_220_IPS_TERMOKOMPENSAT -DUKU2071x --omf_browse=.\EXE\control.crf control.c]
                          THUMB

                          AREA ||.text||, CODE, READONLY, ALIGN=2

                  ke_start PROC
;;;218    //-----------------------------------------------
;;;219    void ke_start(char in)
000000  e92d41fc          PUSH     {r2-r8,lr}
;;;220    {          
000004  4604              MOV      r4,r0
;;;221    ke_start_stat=(enum_ke_start_stat)0;		 
000006  4efe              LDR      r6,|L1.1024|
000008  f04f0700          MOV      r7,#0
00000c  75f7              STRB     r7,[r6,#0x17]
;;;222    
;;;223    if(spc_stat==spcVZ)ke_start_stat=kssNOT_VZ;
00000e  7cf0              LDRB     r0,[r6,#0x13]  ; spc_stat
000010  f04f0301          MOV      r3,#1
000014  2802              CMP      r0,#2
000016  d008              BEQ      |L1.42|
;;;224    else if(BAT_IS_ON[in]!=bisON)ke_start_stat=kssNOT_BAT;
000018  49fa              LDR      r1,|L1.1028|
00001a  5d09              LDRB     r1,[r1,r4]
00001c  2955              CMP      r1,#0x55
00001e  d006              BEQ      |L1.46|
000020  f04f0065          MOV      r0,#0x65
000024  75f0              STRB     r0,[r6,#0x17]
                  |L1.38|
;;;225    else if(bat[in]._av&(1<<0))ke_start_stat=kssNOT_BAT_AV;
;;;226    else if(bat[in]._temper_stat&(1<<1))ke_start_stat=kssNOT_BAT_AV_T;
;;;227    else if(bat[in]._av&(1<<1))ke_start_stat=kssNOT_BAT_AV_ASS;
;;;228    else if(bat[in]._Ib>IKB)ke_start_stat=kssNOT_BAT_ZAR;
;;;229    else if(bat[in]._Ib<-IKB)ke_start_stat=kssNOT_BAT_RAZR;
;;;230    else if((spc_stat==spcKE)&&(spc_bat==0))ke_start_stat=kssNOT_KE1;
;;;231    else if((spc_stat==spcKE)&&(spc_bat==1))ke_start_stat=kssNOT_KE2;
;;;232    else 
;;;233    	{
;;;234    
;;;235    	ke_start_stat=kssYES;
;;;236    
;;;237    	spc_stat=spcKE;
;;;238    	__ee_spc_stat=spcKE;
;;;239    	lc640_write_int(EE_SPC_STAT,__ee_spc_stat);
;;;240    	
;;;241    	spc_bat=in;
;;;242    	__ee_spc_bat=in;
;;;243    	lc640_write_int(EE_SPC_BAT,__ee_spc_bat);
;;;244    
;;;245    	bat[in]._zar_cnt_ke=0;
;;;246    	lc640_write_int(ADR_EE_BAT_ZAR_CNT_KE[in],0);
;;;247    	
;;;248    	spc_phase=0;
;;;249    	__ee_spc_phase=0;
;;;250    	lc640_write_int(EE_SPC_PHASE,__ee_spc_phase);
;;;251    
;;;252    	//ke_mem_hndl(in,lc640_read_int(ADR_EE_BAT_ZAR_CNT_KE[spc_bat]));
;;;253    
;;;254    		{					
;;;255    		signed short temp_temp;
;;;256    		signed char temp;
;;;257    		temp_temp=bat[in]._u_old[((bat_u_old_cnt+1)&0x07)]; 
;;;258    		    
;;;259    		temp=LPC_RTC->YEAR;
;;;260    		gran_char(&temp,1,99);
;;;261    		*((char*)(&(ke_date[0])))=temp;
;;;262    			
;;;263    		temp=LPC_RTC->MONTH;
;;;264    		gran_char(&temp,1,12);
;;;265    		*(((char*)(&(ke_date[0])))+1)=temp;
;;;266    		
;;;267    		temp=LPC_RTC->DOM;
;;;268    		gran_char(&temp,1,31);
;;;269    		*(((char*)(&(ke_date[0])))+2)=temp;			
;;;270    				
;;;271    		*(((char*)(&(ke_date[0])))+3)=*((char*)&temp_temp);
;;;272    		lc640_write_long(EE_SPC_KE_DATE0,ke_date[0]);
;;;273    
;;;274    		temp=LPC_RTC->HOUR;
;;;275    		gran_char(&temp,0,23);
;;;276    		*((char*)(&(ke_date[1])))=temp;
;;;277                   
;;;278    		temp=LPC_RTC->MIN;
;;;279    		gran_char(&temp,0,59);
;;;280    		*(((char*)(&(ke_date[1])))+1)=temp;
;;;281    	          
;;;282    		temp=LPC_RTC->SEC;
;;;283    		gran_char(&temp,0,59);
;;;284    		*(((char*)(&(ke_date[1])))+2)=temp;
;;;285    			
;;;286    		*(((char*)(&(ke_date[1])))+3)=*(((char*)&temp_temp)+1);
;;;287    		lc640_write_long(EE_SPC_KE_DATE1,ke_date[1]);
;;;288    		}
;;;289    
;;;290    	}
;;;291    }
000026  e8bd81fc          POP      {r2-r8,pc}
                  |L1.42|
00002a  75f3              STRB     r3,[r6,#0x17]         ;223
00002c  e7fb              B        |L1.38|
                  |L1.46|
00002e  eb040144          ADD      r1,r4,r4,LSL #1       ;225
000032  eb011204          ADD      r2,r1,r4,LSL #4       ;225
000036  49f4              LDR      r1,|L1.1032|
000038  eb010582          ADD      r5,r1,r2,LSL #2       ;225
00003c  f895103d          LDRB     r1,[r5,#0x3d]         ;225
000040  07ca              LSLS     r2,r1,#31             ;225
000042  d003              BEQ      |L1.76|
000044  f04f0066          MOV      r0,#0x66              ;225
000048  75f0              STRB     r0,[r6,#0x17]         ;225
00004a  e7ec              B        |L1.38|
                  |L1.76|
00004c  f895203f          LDRB     r2,[r5,#0x3f]         ;226
000050  0792              LSLS     r2,r2,#30             ;226
000052  d503              BPL      |L1.92|
000054  f04f0067          MOV      r0,#0x67              ;226
000058  75f0              STRB     r0,[r6,#0x17]         ;226
00005a  e7e4              B        |L1.38|
                  |L1.92|
00005c  0789              LSLS     r1,r1,#30             ;227
00005e  d503              BPL      |L1.104|
000060  f04f0068          MOV      r0,#0x68              ;227
000064  75f0              STRB     r0,[r6,#0x17]         ;227
000066  e7de              B        |L1.38|
                  |L1.104|
000068  4ae8              LDR      r2,|L1.1036|
00006a  f9b51008          LDRSH    r1,[r5,#8]            ;228
00006e  f9b22000          LDRSH    r2,[r2,#0]            ;228  ; IKB
000072  4291              CMP      r1,r2                 ;228
000074  dd03              BLE      |L1.126|
000076  f04f0069          MOV      r0,#0x69              ;228
00007a  75f0              STRB     r0,[r6,#0x17]         ;228
00007c  e7d3              B        |L1.38|
                  |L1.126|
00007e  4252              RSBS     r2,r2,#0              ;229
000080  4291              CMP      r1,r2                 ;229
000082  da03              BGE      |L1.140|
000084  f04f006a          MOV      r0,#0x6a              ;229
000088  75f0              STRB     r0,[r6,#0x17]         ;229
00008a  e7cc              B        |L1.38|
                  |L1.140|
00008c  49dc              LDR      r1,|L1.1024|
00008e  2801              CMP      r0,#1                 ;230
000090  7d09              LDRB     r1,[r1,#0x14]         ;230
000092  d100              BNE      |L1.150|
000094  b111              CBZ      r1,|L1.156|
                  |L1.150|
000096  2801              CMP      r0,#1                 ;231
000098  d004              BEQ      |L1.164|
00009a  e005              B        |L1.168|
                  |L1.156|
00009c  f04f006b          MOV      r0,#0x6b              ;230
0000a0  75f0              STRB     r0,[r6,#0x17]         ;230
0000a2  e7c0              B        |L1.38|
                  |L1.164|
0000a4  2901              CMP      r1,#1                 ;231
0000a6  d07e              BEQ      |L1.422|
                  |L1.168|
0000a8  f04f0064          MOV      r0,#0x64              ;235
0000ac  75f0              STRB     r0,[r6,#0x17]         ;235
0000ae  74f3              STRB     r3,[r6,#0x13]         ;237
0000b0  f8a63058          STRH     r3,[r6,#0x58]         ;238
0000b4  4619              MOV      r1,r3                 ;239
0000b6  f44f70f8          MOV      r0,#0x1f0             ;239
0000ba  f7fffffe          BL       lc640_write_int
0000be  7534              STRB     r4,[r6,#0x14]         ;241
0000c0  f8a6405a          STRH     r4,[r6,#0x5a]         ;242
0000c4  4621              MOV      r1,r4                 ;243
0000c6  f44f70fa          MOV      r0,#0x1f4             ;243
0000ca  f7fffffe          BL       lc640_write_int
0000ce  61af              STR      r7,[r5,#0x18]         ;245
0000d0  48cf              LDR      r0,|L1.1040|
0000d2  2100              MOVS     r1,#0                 ;246
0000d4  f9300014          LDRSH    r0,[r0,r4,LSL #1]     ;246
0000d8  f7fffffe          BL       lc640_write_int
0000dc  7577              STRB     r7,[r6,#0x15]         ;248
0000de  f8a6705c          STRH     r7,[r6,#0x5c]         ;249
0000e2  4639              MOV      r1,r7                 ;250
0000e4  f44f70fb          MOV      r0,#0x1f6             ;250
0000e8  f7fffffe          BL       lc640_write_int
0000ec  48c9              LDR      r0,|L1.1044|
0000ee  8800              LDRH     r0,[r0,#0]            ;257  ; bat_u_old_cnt
0000f0  f1000001          ADD      r0,r0,#1              ;257
0000f4  f0000007          AND      r0,r0,#7              ;257
0000f8  eb050040          ADD      r0,r5,r0,LSL #1       ;257
0000fc  8c00              LDRH     r0,[r0,#0x20]         ;257
0000fe  9001              STR      r0,[sp,#4]            ;257
000100  4dc5              LDR      r5,|L1.1048|
000102  8ba8              LDRH     r0,[r5,#0x1c]         ;259
000104  9000              STR      r0,[sp,#0]            ;259
000106  f04f0263          MOV      r2,#0x63              ;260
00010a  f04f0101          MOV      r1,#1                 ;260
00010e  4668              MOV      r0,sp                 ;260
000110  f7fffffe          BL       gran_char
000114  4cba              LDR      r4,|L1.1024|
000116  f89d0000          LDRB     r0,[sp,#0]            ;261
00011a  34a0              ADDS     r4,r4,#0xa0           ;261
00011c  7020              STRB     r0,[r4,#0]            ;261
00011e  7e28              LDRB     r0,[r5,#0x18]         ;263
000120  9000              STR      r0,[sp,#0]            ;263
000122  220c              MOVS     r2,#0xc               ;264
000124  2101              MOVS     r1,#1                 ;264
000126  4668              MOV      r0,sp                 ;264
000128  f7fffffe          BL       gran_char
00012c  f89d0000          LDRB     r0,[sp,#0]            ;265
000130  7060              STRB     r0,[r4,#1]            ;265
000132  7b28              LDRB     r0,[r5,#0xc]          ;267
000134  9000              STR      r0,[sp,#0]            ;267
000136  221f              MOVS     r2,#0x1f              ;268
000138  2101              MOVS     r1,#1                 ;268
00013a  4668              MOV      r0,sp                 ;268
00013c  f7fffffe          BL       gran_char
000140  f89d0000          LDRB     r0,[sp,#0]            ;269
000144  70a0              STRB     r0,[r4,#2]            ;269
000146  f89d0004          LDRB     r0,[sp,#4]            ;271
00014a  70e0              STRB     r0,[r4,#3]            ;271
00014c  f44f70fc          MOV      r0,#0x1f8             ;272
000150  6821              LDR      r1,[r4,#0]            ;272  ; ke_date
000152  f7fffffe          BL       lc640_write_long
000156  7a28              LDRB     r0,[r5,#8]            ;274
000158  9000              STR      r0,[sp,#0]            ;274
00015a  2217              MOVS     r2,#0x17              ;275
00015c  2100              MOVS     r1,#0                 ;275
00015e  4668              MOV      r0,sp                 ;275
000160  f7fffffe          BL       gran_char
000164  f89d0000          LDRB     r0,[sp,#0]            ;276
000168  7120              STRB     r0,[r4,#4]            ;276
00016a  7928              LDRB     r0,[r5,#4]            ;278
00016c  9000              STR      r0,[sp,#0]            ;278
00016e  223b              MOVS     r2,#0x3b              ;279
000170  2100              MOVS     r1,#0                 ;279
000172  4668              MOV      r0,sp                 ;279
000174  f7fffffe          BL       gran_char
000178  f89d0000          LDRB     r0,[sp,#0]            ;280
00017c  7160              STRB     r0,[r4,#5]            ;280
00017e  7828              LDRB     r0,[r5,#0]            ;282
000180  9000              STR      r0,[sp,#0]            ;282
000182  223b              MOVS     r2,#0x3b              ;283
000184  2100              MOVS     r1,#0                 ;283
000186  4668              MOV      r0,sp                 ;283
000188  f7fffffe          BL       gran_char
00018c  f89d0000          LDRB     r0,[sp,#0]            ;284
000190  71a0              STRB     r0,[r4,#6]            ;284
000192  f89d0005          LDRB     r0,[sp,#5]            ;286
000196  71e0              STRB     r0,[r4,#7]            ;286
000198  f44f70fe          MOV      r0,#0x1fc             ;287
00019c  6861              LDR      r1,[r4,#4]            ;287  ; ke_date
00019e  f7fffffe          BL       lc640_write_long
0001a2  e740              B        |L1.38|
0001a4  e7ff              B        |L1.422|
                  |L1.422|
0001a6  f04f006c          MOV      r0,#0x6c              ;231
0001aa  75f0              STRB     r0,[r6,#0x17]         ;231
0001ac  e73b              B        |L1.38|
;;;292    
                          ENDP

                  ke_drv PROC
;;;293    //-----------------------------------------------
;;;294    void ke_drv(void)
0001ae  e92d47f0          PUSH     {r4-r10,lr}
;;;295    {
;;;296    
;;;297    if(spc_stat==spcKE)
0001b2  4c93              LDR      r4,|L1.1024|
0001b4  7ce0              LDRB     r0,[r4,#0x13]  ; spc_stat
0001b6  2801              CMP      r0,#1
0001b8  d17d              BNE      |L1.694|
0001ba  4621              MOV      r1,r4
0001bc  2601              MOVS     r6,#1
;;;298    	{
;;;299    	if(spc_phase==0)
;;;300    		{
;;;301    		mess_send(MESS2BAT_HNDL,PARAM_BAT_MASK_OFF_AFTER_2SEC,(1<<(1-spc_bat)),20);
0001be  7d09              LDRB     r1,[r1,#0x14]
0001c0  7d60              LDRB     r0,[r4,#0x15]         ;299  ; spc_phase
0001c2  f1c10201          RSB      r2,r1,#1
0001c6  fa06f102          LSL      r1,r6,r2
;;;302    		mess_send(MESS2BPS_HNDL,PARAM_BPS_ALL_OFF_AFTER_2SEC,0xffff,20);
;;;303    
;;;304    		bat[spc_bat]._zar_cnt_ke+=abs(bat[spc_bat]._Ib);
;;;305    	    	
;;;306    		if(bat[spc_bat]._zar_cnt_ke>=AH_CONSTANT)
;;;307    			{
;;;308    			bat[spc_bat]._zar_cnt_ke-=AH_CONSTANT;
;;;309    			lc640_write_int(ADR_EE_BAT_ZAR_CNT_KE[spc_bat],lc640_read_int(ADR_EE_BAT_ZAR_CNT_KE[spc_bat])+1);
0001ca  4f91              LDR      r7,|L1.1040|
0001cc  4d8e              LDR      r5,|L1.1032|
0001ce  b20a              SXTH     r2,r1                 ;301
0001d0  b110              CBZ      r0,|L1.472|
;;;310    			}
;;;311    		}
;;;312    
;;;313    	else if(spc_phase==1)
0001d2  2801              CMP      r0,#1
0001d4  d034              BEQ      |L1.576|
0001d6  e038              B        |L1.586|
                  |L1.472|
0001d8  2314              MOVS     r3,#0x14              ;301
0001da  21ca              MOVS     r1,#0xca              ;301
0001dc  20c8              MOVS     r0,#0xc8              ;301
0001de  f7fffffe          BL       mess_send
0001e2  2314              MOVS     r3,#0x14              ;302
0001e4  f04f32ff          MOV      r2,#0xffffffff        ;302
0001e8  21ce              MOVS     r1,#0xce              ;302
0001ea  20cd              MOVS     r0,#0xcd              ;302
0001ec  f7fffffe          BL       mess_send
0001f0  7d20              LDRB     r0,[r4,#0x14]         ;304  ; spc_bat
0001f2  eb000140          ADD      r1,r0,r0,LSL #1       ;304
0001f6  eb011000          ADD      r0,r1,r0,LSL #4       ;304
0001fa  eb050080          ADD      r0,r5,r0,LSL #2       ;304
0001fe  f9b00008          LDRSH    r0,[r0,#8]            ;304
000202  f7fffffe          BL       abs
000206  7d21              LDRB     r1,[r4,#0x14]         ;304  ; spc_bat
000208  eb010241          ADD      r2,r1,r1,LSL #1       ;304
00020c  eb021201          ADD      r2,r2,r1,LSL #4       ;304
000210  eb050282          ADD      r2,r5,r2,LSL #2       ;304
000214  6993              LDR      r3,[r2,#0x18]         ;304
000216  4418              ADD      r0,r0,r3              ;304
000218  6190              STR      r0,[r2,#0x18]         ;304
00021a  f64843a0          MOV      r3,#0x8ca0            ;306
00021e  4298              CMP      r0,r3                 ;306
000220  db13              BLT      |L1.586|
000222  eba00003          SUB      r0,r0,r3              ;308
000226  6190              STR      r0,[r2,#0x18]         ;308
000228  f8370011          LDRH     r0,[r7,r1,LSL #1]     ;309
00022c  f7fffffe          BL       lc640_read_int
000230  1c40              ADDS     r0,r0,#1              ;309
000232  b201              SXTH     r1,r0                 ;309
000234  7d20              LDRB     r0,[r4,#0x14]         ;309  ; spc_bat
000236  f9370010          LDRSH    r0,[r7,r0,LSL #1]     ;309
00023a  f7fffffe          BL       lc640_write_int
00023e  e004              B        |L1.586|
                  |L1.576|
;;;314    		{
;;;315    		mess_send(MESS2BAT_HNDL,PARAM_BAT_MASK_OFF_AFTER_2SEC,(1<<(1-spc_bat)),20);
000240  2314              MOVS     r3,#0x14
000242  21ca              MOVS     r1,#0xca
000244  20c8              MOVS     r0,#0xc8
000246  f7fffffe          BL       mess_send
                  |L1.586|
;;;316    		}
;;;317    
;;;318    	if(bat[spc_bat]._Ub<(USIGN*10))
00024a  7d21              LDRB     r1,[r4,#0x14]  ; spc_bat
;;;319    		{
;;;320    		cnt_end_ke++;
;;;321    		if(cnt_end_ke>=30)
;;;322    			{
;;;323    			
;;;324    			if((spc_stat==spcKE)&&(spc_phase==0))
;;;325    				{
;;;326    				lc640_write_int(ADR_EE_BAT_C_REAL[spc_bat],lc640_read_int(ADR_EE_BAT_ZAR_CNT_KE[spc_bat]));
;;;327    				ke_mem_hndl(spc_bat,lc640_read_int(ADR_EE_BAT_ZAR_CNT_KE[spc_bat]));
;;;328    				lc640_write_int(ADR_EE_BAT_ZAR_CNT[spc_bat],0);
;;;329    				cntrl_stat=50;
;;;330    				cntrl_stat_old=50;
;;;331    				}
;;;332    
;;;333    			if((BAT_IS_ON[1-spc_bat]) == bisON)
;;;334    				{
;;;335    				spc_phase=1;
;;;336    				__ee_spc_phase=1;
;;;337    				lc640_write_int(EE_SPC_PHASE,1);
;;;338    				}			
;;;339    			else
;;;340    				{
;;;341    				spc_stat=spcOFF;
;;;342    				__ee_spc_stat=spcOFF;
;;;343    				lc640_write_int(EE_SPC_STAT,spcOFF);
00024c  f44f79f8          MOV      r9,#0x1f0
000250  eb010041          ADD      r0,r1,r1,LSL #1       ;318
000254  eb001001          ADD      r0,r0,r1,LSL #4       ;318
000258  eb050080          ADD      r0,r5,r0,LSL #2       ;318
00025c  f04f0800          MOV      r8,#0                 ;299
000260  f9b02002          LDRSH    r2,[r0,#2]            ;318
000264  486d              LDR      r0,|L1.1052|
000266  f9b00000          LDRSH    r0,[r0,#0]            ;318  ; USIGN
00026a  eb000080          ADD      r0,r0,r0,LSL #2       ;318
00026e  ebb20f40          CMP      r2,r0,LSL #1          ;318
000272  da47              BGE      |L1.772|
000274  f8b40054          LDRH     r0,[r4,#0x54]         ;320  ; cnt_end_ke
000278  f1000001          ADD      r0,r0,#1              ;320
00027c  b200              SXTH     r0,r0                 ;320
00027e  f8a40054          STRH     r0,[r4,#0x54]         ;320
000282  281e              CMP      r0,#0x1e              ;321
000284  db40              BLT      |L1.776|
000286  7ce0              LDRB     r0,[r4,#0x13]         ;324  ; spc_stat
000288  2801              CMP      r0,#1                 ;324
00028a  d122              BNE      |L1.722|
00028c  7d60              LDRB     r0,[r4,#0x15]         ;324  ; spc_phase
00028e  bb00              CBNZ     r0,|L1.722|
000290  f8370011          LDRH     r0,[r7,r1,LSL #1]     ;326
000294  f7fffffe          BL       lc640_read_int
000298  b201              SXTH     r1,r0                 ;326
00029a  4861              LDR      r0,|L1.1056|
00029c  7d22              LDRB     r2,[r4,#0x14]         ;326  ; spc_bat
00029e  f9300012          LDRSH    r0,[r0,r2,LSL #1]     ;326
0002a2  f7fffffe          BL       lc640_write_int
0002a6  7d20              LDRB     r0,[r4,#0x14]         ;327  ; spc_bat
0002a8  f8370010          LDRH     r0,[r7,r0,LSL #1]     ;327
0002ac  f7fffffe          BL       lc640_read_int
0002b0  b281              UXTH     r1,r0                 ;327
0002b2  7d20              LDRB     r0,[r4,#0x14]         ;327  ; spc_bat
0002b4  e000              B        |L1.696|
                  |L1.694|
0002b6  e049              B        |L1.844|
                  |L1.696|
0002b8  f7fffffe          BL       ke_mem_hndl
0002bc  4859              LDR      r0,|L1.1060|
0002be  7d21              LDRB     r1,[r4,#0x14]         ;328  ; spc_bat
0002c0  f9300011          LDRSH    r0,[r0,r1,LSL #1]     ;328
0002c4  2100              MOVS     r1,#0                 ;328
0002c6  f7fffffe          BL       lc640_write_int
0002ca  f04f0032          MOV      r0,#0x32              ;329
0002ce  83a0              STRH     r0,[r4,#0x1c]         ;329
0002d0  83e0              STRH     r0,[r4,#0x1e]         ;330
                  |L1.722|
0002d2  7d20              LDRB     r0,[r4,#0x14]         ;333  ; spc_bat
0002d4  494b              LDR      r1,|L1.1028|
0002d6  f1c00001          RSB      r0,r0,#1              ;333
0002da  5c08              LDRB     r0,[r1,r0]            ;333
0002dc  2855              CMP      r0,#0x55              ;333
0002de  d008              BEQ      |L1.754|
0002e0  f8848013          STRB     r8,[r4,#0x13]         ;341
0002e4  f8a48058          STRH     r8,[r4,#0x58]         ;342
0002e8  2100              MOVS     r1,#0
0002ea  4648              MOV      r0,r9
0002ec  f7fffffe          BL       lc640_write_int
0002f0  e00a              B        |L1.776|
                  |L1.754|
0002f2  7566              STRB     r6,[r4,#0x15]         ;335
0002f4  f8a4605c          STRH     r6,[r4,#0x5c]         ;336
0002f8  2101              MOVS     r1,#1                 ;337
0002fa  f44f70fb          MOV      r0,#0x1f6             ;337
0002fe  f7fffffe          BL       lc640_write_int
000302  e001              B        |L1.776|
                  |L1.772|
;;;344    				}
;;;345    			}
;;;346    		}
;;;347    	else cnt_end_ke=0;
000304  f8a48054          STRH     r8,[r4,#0x54]
                  |L1.776|
;;;348    
;;;349    	if((bat[spc_bat]._Ub>=bat[1-spc_bat]._Ub)&&(spc_phase==1))
000308  7d21              LDRB     r1,[r4,#0x14]  ; spc_bat
00030a  eb010041          ADD      r0,r1,r1,LSL #1
00030e  eb001001          ADD      r0,r0,r1,LSL #4
000312  eb050080          ADD      r0,r5,r0,LSL #2
000316  f9b02002          LDRSH    r2,[r0,#2]
00031a  f1c10001          RSB      r0,r1,#1
00031e  eb000140          ADD      r1,r0,r0,LSL #1
000322  eb011000          ADD      r0,r1,r0,LSL #4
000326  eb050080          ADD      r0,r5,r0,LSL #2
00032a  f9b00002          LDRSH    r0,[r0,#2]
00032e  4282              CMP      r2,r0
000330  db0c              BLT      |L1.844|
000332  7d60              LDRB     r0,[r4,#0x15]  ; spc_phase
000334  2801              CMP      r0,#1
000336  d109              BNE      |L1.844|
;;;350    		{
;;;351    		spc_stat=spcOFF;
000338  f8848013          STRB     r8,[r4,#0x13]
;;;352    		__ee_spc_stat=spcOFF;
00033c  f8a48058          STRH     r8,[r4,#0x58]
;;;353    		lc640_write_int(EE_SPC_STAT,spcOFF);
000340  4648              MOV      r0,r9
000342  e8bd47f0          POP      {r4-r10,lr}
000346  2100              MOVS     r1,#0
000348  f7ffbffe          B.W      lc640_write_int
                  |L1.844|
;;;354    		}
;;;355    	}
;;;356    			
;;;357    }
00034c  e8bd87f0          POP      {r4-r10,pc}
;;;358    
                          ENDP

                  vz_start PROC
;;;359    //-----------------------------------------------
;;;360    char vz_start(char hour)
000350  b570              PUSH     {r4-r6,lr}
;;;361    {          
000352  4605              MOV      r5,r0
;;;362    char out;
;;;363    out=0;
000354  f04f0600          MOV      r6,#0
;;;364    if(spc_stat==spcOFF)
000358  4c29              LDR      r4,|L1.1024|
00035a  7ce0              LDRB     r0,[r4,#0x13]  ; spc_stat
00035c  bb18              CBNZ     r0,|L1.934|
;;;365    	{
;;;366    	spc_stat=spcVZ;
00035e  f104041a          ADD      r4,r4,#0x1a
000362  f04f0102          MOV      r1,#2
000366  f8041c07          STRB     r1,[r4,#-7]
;;;367    	__ee_spc_stat=spcVZ; 
00036a  87e1              STRH     r1,[r4,#0x3e]
;;;368    	lc640_write_int(EE_SPC_STAT,__ee_spc_stat);   
00036c  f44f70f8          MOV      r0,#0x1f0
000370  f7fffffe          BL       lc640_write_int
;;;369    	vz_cnt_h=hour;
000374  86e5              STRH     r5,[r4,#0x36]
;;;370    	__ee_vz_cnt=hour*60;
000376  ebc51005          RSB      r0,r5,r5,LSL #4
00037a  ea4f0180          LSL      r1,r0,#2
00037e  460d              MOV      r5,r1
000380  87a1              STRH     r1,[r4,#0x3c]
;;;371    	lc640_write_int(EE_VZ_CNT,__ee_vz_cnt);
000382  f44f70f9          MOV      r0,#0x1f2
000386  f7fffffe          BL       lc640_write_int
;;;372    	lc640_write_int(EE_SPC_VZ_LENGT,hour*60);	
00038a  4629              MOV      r1,r5
00038c  f44f70ff          MOV      r0,#0x1fe
000390  f7fffffe          BL       lc640_write_int
;;;373    	vz_cnt_h_=0;
000394  4630              MOV      r0,r6
000396  8720              STRH     r0,[r4,#0x38]
;;;374    	vz_cnt_s=0;
000398  8660              STRH     r0,[r4,#0x32]
;;;375    	out=1;
00039a  f04f0601          MOV      r6,#1
;;;376    	vz_mem_hndl(1);
00039e  f04f0001          MOV      r0,#1
0003a2  f7fffffe          BL       vz_mem_hndl
                  |L1.934|
;;;377    	}
;;;378    //else if((spc_stat==spc_KE1p1)||(spc_stat==spc_KE1p2)) out=22; 
;;;379    //else if((spc_stat==spc_KE2p1)||(spc_stat==spc_KE2p2)) out=33;
;;;380    //plazma=out;	
;;;381    return out;
0003a6  4630              MOV      r0,r6
;;;382    }
0003a8  bd70              POP      {r4-r6,pc}
;;;383    
                          ENDP

                  vz_stop PROC
;;;384    //-----------------------------------------------
;;;385    void vz_stop(void)
0003aa  b510              PUSH     {r4,lr}
;;;386    {
;;;387    if(spc_stat==spcVZ)
0003ac  4c14              LDR      r4,|L1.1024|
0003ae  7ce0              LDRB     r0,[r4,#0x13]  ; spc_stat
0003b0  2802              CMP      r0,#2
0003b2  d113              BNE      |L1.988|
;;;388         {
;;;389    vz_mem_hndl(vz_cnt_h);          
0003b4  f104041a          ADD      r4,r4,#0x1a
0003b8  8ee0              LDRH     r0,[r4,#0x36]  ; vz_cnt_h
0003ba  f7fffffe          BL       vz_mem_hndl
;;;390    vz_cnt_s=0;
0003be  f04f0000          MOV      r0,#0
0003c2  8660              STRH     r0,[r4,#0x32]
;;;391    vz_cnt_h=0;
0003c4  86e0              STRH     r0,[r4,#0x36]
;;;392    vz_cnt_h_=0;
0003c6  8720              STRH     r0,[r4,#0x38]
;;;393    spc_stat=spcOFF;
0003c8  f8040c07          STRB     r0,[r4,#-7]
;;;394    
;;;395    		__ee_spc_stat=spcOFF;
0003cc  87e0              STRH     r0,[r4,#0x3e]
;;;396    		lc640_write_int(EE_SPC_STAT,spcOFF);
0003ce  4601              MOV      r1,r0
0003d0  e8bd4010          POP      {r4,lr}
0003d4  f44f70f8          MOV      r0,#0x1f0
0003d8  f7ffbffe          B.W      lc640_write_int
                  |L1.988|
;;;397         }
;;;398    
;;;399    }
0003dc  bd10              POP      {r4,pc}
;;;400    
                          ENDP

                  avz_next_date_hndl PROC
;;;401    //-----------------------------------------------
;;;402    void avz_next_date_hndl(void)
0003de  b570              PUSH     {r4-r6,lr}
;;;403    {
;;;404    if((LPC_RTC->MONTH+AVZ)>12)lc640_write_int(EE_YEAR_AVZ,LPC_RTC->YEAR+1);
0003e0  4c0d              LDR      r4,|L1.1048|
0003e2  3c20              SUBS     r4,r4,#0x20
0003e4  f8940038          LDRB     r0,[r4,#0x38]
0003e8  4d0f              LDR      r5,|L1.1064|
0003ea  7829              LDRB     r1,[r5,#0]  ; AVZ
0003ec  4408              ADD      r0,r0,r1
0003ee  280c              CMP      r0,#0xc
0003f0  d91c              BLS      |L1.1068|
0003f2  8fa0              LDRH     r0,[r4,#0x3c]
0003f4  1c40              ADDS     r0,r0,#1
0003f6  b201              SXTH     r1,r0
0003f8  20b8              MOVS     r0,#0xb8
0003fa  f7fffffe          BL       lc640_write_int
0003fe  e01a              B        |L1.1078|
                  |L1.1024|
                          DCD      ||area_number.21||
                  |L1.1028|
                          DCD      BAT_IS_ON
                  |L1.1032|
                          DCD      bat
                  |L1.1036|
                          DCD      IKB
                  |L1.1040|
                          DCD      ADR_EE_BAT_ZAR_CNT_KE
                  |L1.1044|
                          DCD      bat_u_old_cnt
                  |L1.1048|
                          DCD      0x40024020
                  |L1.1052|
                          DCD      USIGN
                  |L1.1056|
                          DCD      ADR_EE_BAT_C_REAL
                  |L1.1060|
                          DCD      ADR_EE_BAT_ZAR_CNT
                  |L1.1064|
                          DCD      AVZ
                  |L1.1068|
;;;405    else lc640_write_int(EE_YEAR_AVZ,LPC_RTC->YEAR);
00042c  f9b4103c          LDRSH    r1,[r4,#0x3c]
000430  20b8              MOVS     r0,#0xb8
000432  f7fffffe          BL       lc640_write_int
                  |L1.1078|
;;;406    
;;;407    //lc640_write_int(EE_YEAR_AVZ,6);
;;;408    
;;;409    if((LPC_RTC->MONTH+AVZ)>12)lc640_write_int(EE_MONTH_AVZ,(LPC_RTC->MONTH+AVZ)-12);
000436  f8941038          LDRB     r1,[r4,#0x38]
00043a  7828              LDRB     r0,[r5,#0]  ; AVZ
00043c  4401              ADD      r1,r1,r0
00043e  290c              CMP      r1,#0xc
000440  d907              BLS      |L1.1106|
000442  f8941038          LDRB     r1,[r4,#0x38]
000446  380c              SUBS     r0,r0,#0xc
000448  4401              ADD      r1,r1,r0
00044a  20b6              MOVS     r0,#0xb6
00044c  f7fffffe          BL       lc640_write_int
000450  e005              B        |L1.1118|
                  |L1.1106|
;;;410    else lc640_write_int(EE_MONTH_AVZ,LPC_RTC->MONTH+AVZ);                                                 
000452  f8941038          LDRB     r1,[r4,#0x38]
000456  4401              ADD      r1,r1,r0
000458  20b6              MOVS     r0,#0xb6
00045a  f7fffffe          BL       lc640_write_int
                  |L1.1118|
;;;411    
;;;412    //lc640_write_int(EE_MONTH_AVZ,5);
;;;413    
;;;414    if(LPC_RTC->DOM>28) lc640_write_int(EE_DATE_AVZ,28);
00045e  f894002c          LDRB     r0,[r4,#0x2c]
000462  281c              CMP      r0,#0x1c
000464  d904              BLS      |L1.1136|
000466  211c              MOVS     r1,#0x1c
000468  20b4              MOVS     r0,#0xb4
00046a  f7fffffe          BL       lc640_write_int
00046e  e004              B        |L1.1146|
                  |L1.1136|
;;;415    else lc640_write_int(EE_DATE_AVZ,LPC_RTC->DOM);
000470  f894102c          LDRB     r1,[r4,#0x2c]
000474  20b4              MOVS     r0,#0xb4
000476  f7fffffe          BL       lc640_write_int
                  |L1.1146|
;;;416    
;;;417    //lc640_write_int(EE_DATE_AVZ,4);
;;;418    
;;;419    lc640_write_int(EE_HOUR_AVZ,LPC_RTC->HOUR);
00047a  f1040420          ADD      r4,r4,#0x20
00047e  7a21              LDRB     r1,[r4,#8]
000480  f04f00ae          MOV      r0,#0xae
000484  f7fffffe          BL       lc640_write_int
;;;420    lc640_write_int(EE_MIN_AVZ,LPC_RTC->MIN);
000488  7921              LDRB     r1,[r4,#4]
00048a  20b0              MOVS     r0,#0xb0
00048c  f7fffffe          BL       lc640_write_int
;;;421    lc640_write_int(EE_SEC_AVZ,LPC_RTC->SEC);
000490  7821              LDRB     r1,[r4,#0]
000492  e8bd4070          POP      {r4-r6,lr}
000496  20b2              MOVS     r0,#0xb2
000498  f7ffbffe          B.W      lc640_write_int
;;;422    
;;;423    }
;;;424    
                          ENDP

                  avz_drv PROC
;;;425    //-----------------------------------------------
;;;426    void avz_drv(void)                               
00049c  b510              PUSH     {r4,lr}
;;;427    {                
;;;428    if(AVZ!=AVZ_OFF)
00049e  48ff              LDR      r0,|L1.2204|
;;;429    	{
;;;430    	if((LPC_RTC->YEAR==YEAR_AVZ)&&(LPC_RTC->MONTH==MONTH_AVZ)&&(LPC_RTC->DOM==DATE_AVZ)&&(LPC_RTC->HOUR==HOUR_AVZ)&&(LPC_RTC->MIN==MIN_AVZ)&&(LPC_RTC->SEC==SEC_AVZ))
;;;431    		{
;;;432    		bAVZ=1;
0004a0  4cff              LDR      r4,|L1.2208|
0004a2  7800              LDRB     r0,[r0,#0]            ;428  ; AVZ
0004a4  b330              CBZ      r0,|L1.1268|
0004a6  48ff              LDR      r0,|L1.2212|
0004a8  8f82              LDRH     r2,[r0,#0x3c]         ;430
0004aa  49ff              LDR      r1,|L1.2216|
0004ac  8809              LDRH     r1,[r1,#0]            ;430  ; YEAR_AVZ
0004ae  428a              CMP      r2,r1                 ;430
0004b0  d120              BNE      |L1.1268|
0004b2  f8902038          LDRB     r2,[r0,#0x38]         ;430
0004b6  49fd              LDR      r1,|L1.2220|
0004b8  8809              LDRH     r1,[r1,#0]            ;430  ; MONTH_AVZ
0004ba  428a              CMP      r2,r1                 ;430
0004bc  d11a              BNE      |L1.1268|
0004be  f890102c          LDRB     r1,[r0,#0x2c]         ;430
0004c2  4afb              LDR      r2,|L1.2224|
0004c4  8812              LDRH     r2,[r2,#0]            ;430  ; DATE_AVZ
0004c6  4291              CMP      r1,r2                 ;430
0004c8  d114              BNE      |L1.1268|
0004ca  f8901028          LDRB     r1,[r0,#0x28]         ;430
0004ce  4af9              LDR      r2,|L1.2228|
0004d0  8812              LDRH     r2,[r2,#0]            ;430  ; HOUR_AVZ
0004d2  4291              CMP      r1,r2                 ;430
0004d4  d10e              BNE      |L1.1268|
0004d6  f8901024          LDRB     r1,[r0,#0x24]         ;430
0004da  4af7              LDR      r2,|L1.2232|
0004dc  8812              LDRH     r2,[r2,#0]            ;430  ; MIN_AVZ
0004de  4291              CMP      r1,r2                 ;430
0004e0  d108              BNE      |L1.1268|
0004e2  f8900020          LDRB     r0,[r0,#0x20]         ;430
0004e6  49f5              LDR      r1,|L1.2236|
0004e8  8809              LDRH     r1,[r1,#0]            ;430  ; SEC_AVZ
0004ea  4288              CMP      r0,r1                 ;430
0004ec  d102              BNE      |L1.1268|
0004ee  f04f0001          MOV      r0,#1
0004f2  75a0              STRB     r0,[r4,#0x16]
                  |L1.1268|
;;;433    		}
;;;434    	}
;;;435    if(bAVZ)
0004f4  7da0              LDRB     r0,[r4,#0x16]  ; bAVZ
0004f6  2800              CMP      r0,#0
0004f8  d00c              BEQ      |L1.1300|
;;;436    	{
;;;437    	if(vz_start(AVZ_TIME))
0004fa  48f1              LDR      r0,|L1.2240|
0004fc  8800              LDRH     r0,[r0,#0]  ; AVZ_TIME
0004fe  b2c0              UXTB     r0,r0
000500  f7fffffe          BL       vz_start
000504  2800              CMP      r0,#0
000506  d005              BEQ      |L1.1300|
;;;438    		{
;;;439    		bAVZ=0;
000508  f04f0000          MOV      r0,#0
00050c  75a0              STRB     r0,[r4,#0x16]
;;;440    		avz_next_date_hndl();
00050e  e8bd4010          POP      {r4,lr}
000512  e7fe              B        avz_next_date_hndl
                  |L1.1300|
;;;441    		}
;;;442    	}	
;;;443    
;;;444    }
000514  bd10              POP      {r4,pc}
;;;445    
                          ENDP

                  vz_drv PROC
;;;446    //-----------------------------------------------
;;;447    void vz_drv(void)
000516  b570              PUSH     {r4-r6,lr}
;;;448    { 
;;;449    if(spc_stat==spcVZ)
000518  4ce1              LDR      r4,|L1.2208|
00051a  7ce0              LDRB     r0,[r4,#0x13]  ; spc_stat
00051c  2802              CMP      r0,#2
00051e  d144              BNE      |L1.1450|
;;;450    	{
;;;451    	if(vz_cnt_s_<3600)
000520  f8b4004e          LDRH     r0,[r4,#0x4e]  ; vz_cnt_s_
000524  f44f6161          MOV      r1,#0xe10
;;;452    		{
;;;453    		vz_cnt_s_++;
;;;454    		if(vz_cnt_s_>=3600)
;;;455    			{
;;;456    			vz_cnt_s_=0;
000528  2500              MOVS     r5,#0
00052a  4288              CMP      r0,r1                 ;451
00052c  d215              BCS      |L1.1370|
00052e  f1000001          ADD      r0,r0,#1              ;453
000532  b280              UXTH     r0,r0                 ;453
000534  f8a4004e          STRH     r0,[r4,#0x4e]         ;453
000538  4288              CMP      r0,r1                 ;454
00053a  d30e              BCC      |L1.1370|
00053c  f8a4504e          STRH     r5,[r4,#0x4e]
;;;457    			if(vz_cnt_h)
000540  f8b40050          LDRH     r0,[r4,#0x50]  ; vz_cnt_h
000544  b148              CBZ      r0,|L1.1370|
;;;458    				{
;;;459    				vz_cnt_h--;
000546  f1a00001          SUB      r0,r0,#1
00054a  f8240f50          STRH     r0,[r4,#0x50]!
;;;460    				vz_cnt_h_++;
00054e  8860              LDRH     r0,[r4,#2]  ; vz_cnt_h_
000550  f1000001          ADD      r0,r0,#1
000554  8060              STRH     r0,[r4,#2]
000556  f1a40450          SUB      r4,r4,#0x50
                  |L1.1370|
;;;461    				}
;;;462    			}
;;;463    		}
;;;464    
;;;465    
;;;466    	if(vz_cnt_s<60)
00055a  f8b4004c          LDRH     r0,[r4,#0x4c]  ; vz_cnt_s
00055e  283c              CMP      r0,#0x3c
000560  d223              BCS      |L1.1450|
;;;467    		{
;;;468    		vz_cnt_s++;
000562  f1000001          ADD      r0,r0,#1
000566  b280              UXTH     r0,r0
000568  f8a4004c          STRH     r0,[r4,#0x4c]
;;;469    		if(vz_cnt_s>=60)
00056c  283c              CMP      r0,#0x3c
00056e  d31c              BCC      |L1.1450|
;;;470    			{
;;;471    			vz_cnt_s=0;
000570  f8245f4c          STRH     r5,[r4,#0x4c]!
;;;472    			
;;;473    			__ee_vz_cnt--;
000574  8960              LDRH     r0,[r4,#0xa]  ; __ee_vz_cnt
000576  f1a00001          SUB      r0,r0,#1
00057a  b201              SXTH     r1,r0
00057c  8161              STRH     r1,[r4,#0xa]
;;;474    			lc640_write_int(EE_VZ_CNT,__ee_vz_cnt);
00057e  f44f70f9          MOV      r0,#0x1f2
000582  f7fffffe          BL       lc640_write_int
;;;475    			if(!__ee_vz_cnt)
000586  8960              LDRH     r0,[r4,#0xa]  ; __ee_vz_cnt
000588  f1a4044c          SUB      r4,r4,#0x4c
00058c  2800              CMP      r0,#0
00058e  d10c              BNE      |L1.1450|
;;;476    				{
;;;477    				spc_stat=spcOFF;
000590  74e5              STRB     r5,[r4,#0x13]
;;;478    						__ee_spc_stat=spcOFF;
000592  f8a45058          STRH     r5,[r4,#0x58]
;;;479    		lc640_write_int(EE_SPC_STAT,spcOFF);
000596  4601              MOV      r1,r0
000598  f44f70f8          MOV      r0,#0x1f0
00059c  f7fffffe          BL       lc640_write_int
;;;480    				vz_mem_hndl(0);
0005a0  e8bd4070          POP      {r4-r6,lr}
0005a4  2000              MOVS     r0,#0
0005a6  f7ffbffe          B.W      vz_mem_hndl
                  |L1.1450|
;;;481    				}
;;;482    			}
;;;483    		}
;;;484    
;;;485    	}
;;;486    
;;;487    
;;;488    } 
0005aa  bd70              POP      {r4-r6,pc}
;;;489    
                          ENDP

                  kb_init PROC
;;;493    //-----------------------------------------------
;;;494    void kb_init(void)
0005ac  48c5              LDR      r0,|L1.2244|
;;;495    {
;;;496    main_kb_cnt=(TBAT*60)-60/*120*/;
0005ae  f06f013b          MVN      r1,#0x3b
0005b2  8800              LDRH     r0,[r0,#0]  ; TBAT
0005b4  ebc01000          RSB      r0,r0,r0,LSL #4
0005b8  eb010080          ADD      r0,r1,r0,LSL #2
0005bc  49b8              LDR      r1,|L1.2208|
0005be  f8a10040          STRH     r0,[r1,#0x40]
;;;497    }
0005c2  4770              BX       lr
;;;498    
                          ENDP

                  kb_hndl PROC
;;;499    //-----------------------------------------------
;;;500    void kb_hndl(void)
0005c4  e92d5ff0          PUSH     {r4-r12,lr}
;;;501    {
;;;502    
;;;503    static signed short ibat[2],ibat_[2],ibat_ips,ibat_ips_;
;;;504    #ifdef UKU_TELECORE2015
;;;505    if(((++main_kb_cnt>=TBAT*60)&&(TBAT))&&(BAT_TYPE==0))
;;;506    #else 
;;;507    if(((++main_kb_cnt>=TBAT*60)&&(TBAT)))
0005c8  f8df82d4          LDR      r8,|L1.2208|
;;;508    #endif
;;;509    	{
;;;510    	main_kb_cnt=0;
;;;511    	
;;;512    	kb_start[0]=0;
;;;513    	kb_start[1]=0;
;;;514    	kb_start_ips=0;
;;;515    
;;;516    	if( (BAT_IS_ON[0]==bisON) && (bat[0]._Ub>80) && ( (abs(bat[0]._Ib)<IKB) || (bat[0]._av&1) ) ) kb_start[0]=1;
;;;517    	if( (BAT_IS_ON[1]==bisON) && (bat[1]._Ub>80) && ( (abs(bat[1]._Ib)<IKB) || (bat[1]._av&1) ) ) kb_start[1]=1;
;;;518    #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;519    	if( (!ips_bat_av_vzvod)                      && ((abs(Ib_ips_termokompensat)<IKB) || (bat_ips._av&1) ) ) kb_start_ips=1;
0005cc  f8dfa2f8          LDR      r10,|L1.2248|
0005d0  2500              MOVS     r5,#0                 ;507
0005d2  f8b80040          LDRH     r0,[r8,#0x40]         ;507  ; main_kb_cnt
0005d6  4ebd              LDR      r6,|L1.2252|
0005d8  1c40              ADDS     r0,r0,#1              ;507
0005da  b201              SXTH     r1,r0                 ;507
0005dc  48b9              LDR      r0,|L1.2244|
0005de  f8a81040          STRH     r1,[r8,#0x40]         ;507
0005e2  f8df92ec          LDR      r9,|L1.2256|
0005e6  f9b00000          LDRSH    r0,[r0,#0]            ;507  ; TBAT
;;;520    #endif	
;;;521    	if( (net_av) || (num_of_wrks_bps==0) || ( (spc_stat!=spcOFF) && (spc_stat!=spcVZ) ) ) 
;;;522    		{
;;;523    		kb_start[0]=0;
;;;524    		kb_start[1]=0;
;;;525    		kb_start_ips=0;
;;;526    		}
;;;527    
;;;528    	if((kb_start[0]==1)||(kb_start[1]==1)||(kb_start_ips==1))
;;;529    		{
;;;530    		kb_cnt_1lev=10;
0005ea  270a              MOVS     r7,#0xa
0005ec  ebc01200          RSB      r2,r0,r0,LSL #4       ;507
0005f0  f04f0b01          MOV      r11,#1                ;516
0005f4  f1080446          ADD      r4,r8,#0x46           ;512
0005f8  ebb10f82          CMP      r1,r2,LSL #2          ;507
0005fc  db61              BLT      |L1.1730|
0005fe  b3f0              CBZ      r0,|L1.1662|
000600  f8a85040          STRH     r5,[r8,#0x40]         ;510
000604  7025              STRB     r5,[r4,#0]            ;512
000606  7065              STRB     r5,[r4,#1]            ;513
000608  f888500d          STRB     r5,[r8,#0xd]          ;514
00060c  48b1              LDR      r0,|L1.2260|
00060e  7800              LDRB     r0,[r0,#0]            ;516  ; BAT_IS_ON
000610  2855              CMP      r0,#0x55              ;516
000612  d111              BNE      |L1.1592|
000614  f9b60002          LDRSH    r0,[r6,#2]            ;516  ; bat
000618  2850              CMP      r0,#0x50              ;516
00061a  dd0d              BLE      |L1.1592|
00061c  f9b60008          LDRSH    r0,[r6,#8]            ;516  ; bat
000620  f7fffffe          BL       abs
000624  f9b91000          LDRSH    r1,[r9,#0]            ;516  ; IKB
000628  4288              CMP      r0,r1                 ;516
00062a  db03              BLT      |L1.1588|
00062c  f896003d          LDRB     r0,[r6,#0x3d]         ;516  ; bat
000630  07c0              LSLS     r0,r0,#31             ;516
000632  d001              BEQ      |L1.1592|
                  |L1.1588|
000634  f884b000          STRB     r11,[r4,#0]           ;516
                  |L1.1592|
000638  48a6              LDR      r0,|L1.2260|
00063a  7840              LDRB     r0,[r0,#1]            ;517  ; BAT_IS_ON
00063c  2855              CMP      r0,#0x55              ;517
00063e  d111              BNE      |L1.1636|
000640  f9b6004e          LDRSH    r0,[r6,#0x4e]         ;517  ; bat
000644  2850              CMP      r0,#0x50              ;517
000646  dd0d              BLE      |L1.1636|
000648  f9b60054          LDRSH    r0,[r6,#0x54]         ;517  ; bat
00064c  f7fffffe          BL       abs
000650  f9b91000          LDRSH    r1,[r9,#0]            ;517  ; IKB
000654  4288              CMP      r0,r1                 ;517
000656  db03              BLT      |L1.1632|
000658  f8960089          LDRB     r0,[r6,#0x89]         ;517  ; bat
00065c  07c0              LSLS     r0,r0,#31             ;517
00065e  d001              BEQ      |L1.1636|
                  |L1.1632|
000660  f884b001          STRB     r11,[r4,#1]           ;517
                  |L1.1636|
000664  489c              LDR      r0,|L1.2264|
000666  7800              LDRB     r0,[r0,#0]            ;519  ; ips_bat_av_vzvod
000668  b980              CBNZ     r0,|L1.1676|
00066a  f9ba0000          LDRSH    r0,[r10,#0]           ;519  ; Ib_ips_termokompensat
00066e  f7fffffe          BL       abs
000672  f9b91000          LDRSH    r1,[r9,#0]            ;519  ; IKB
000676  4288              CMP      r0,r1                 ;519
000678  db06              BLT      |L1.1672|
00067a  4898              LDR      r0,|L1.2268|
00067c  e000              B        |L1.1664|
                  |L1.1662|
00067e  e020              B        |L1.1730|
                  |L1.1664|
000680  f890003d          LDRB     r0,[r0,#0x3d]         ;519  ; bat_ips
000684  07c0              LSLS     r0,r0,#31             ;519
000686  d001              BEQ      |L1.1676|
                  |L1.1672|
000688  f888b00d          STRB     r11,[r8,#0xd]         ;519
                  |L1.1676|
00068c  4894              LDR      r0,|L1.2272|
00068e  7800              LDRB     r0,[r0,#0]            ;521  ; net_av
000690  b938              CBNZ     r0,|L1.1698|
000692  f898000e          LDRB     r0,[r8,#0xe]          ;521  ; num_of_wrks_bps
000696  b120              CBZ      r0,|L1.1698|
000698  f8980013          LDRB     r0,[r8,#0x13]         ;521  ; spc_stat
00069c  b128              CBZ      r0,|L1.1706|
00069e  2802              CMP      r0,#2                 ;521
0006a0  d003              BEQ      |L1.1706|
                  |L1.1698|
0006a2  7025              STRB     r5,[r4,#0]            ;523
0006a4  7065              STRB     r5,[r4,#1]            ;524
0006a6  f888500d          STRB     r5,[r8,#0xd]          ;525
                  |L1.1706|
0006aa  7820              LDRB     r0,[r4,#0]            ;528  ; kb_start
0006ac  2801              CMP      r0,#1                 ;528
0006ae  d020              BEQ      |L1.1778|
0006b0  7860              LDRB     r0,[r4,#1]            ;528  ; kb_start
0006b2  2801              CMP      r0,#1                 ;528
0006b4  d01d              BEQ      |L1.1778|
0006b6  f898000d          LDRB     r0,[r8,#0xd]          ;528  ; kb_start_ips
0006ba  2801              CMP      r0,#1                 ;528
0006bc  d019              BEQ      |L1.1778|
;;;531    		}
;;;532    	else kb_cnt_1lev=0;
0006be  f8a85042          STRH     r5,[r8,#0x42]
                  |L1.1730|
;;;533    	}
;;;534    
;;;535    if(kb_cnt_1lev)
0006c2  4641              MOV      r1,r8
0006c4  f9b80042          LDRSH    r0,[r8,#0x42]  ; kb_cnt_1lev
;;;536    	{
;;;537    	kb_cnt_1lev--;
;;;538    
;;;539    	if(kb_cnt_1lev>5)mess_send(MESS2CNTRL_HNDL,PARAM_CNTRL_STAT_PLUS,30,15);
;;;540    	else if(kb_cnt_1lev>0) mess_send(MESS2CNTRL_HNDL,PARAM_CNTRL_STAT_MINUS,30,15);
;;;541    
;;;542    
;;;543    	if(kb_cnt_1lev==5)
;;;544    		{
;;;545    		ibat[0]=abs(bat[0]._Ib);
0006c8  f8df81d4          LDR      r8,|L1.2208|
0006cc  2800              CMP      r0,#0                 ;535
0006ce  f1080864          ADD      r8,r8,#0x64
0006d2  d07e              BEQ      |L1.2002|
0006d4  f1a00001          SUB      r0,r0,#1              ;537
0006d8  b200              SXTH     r0,r0                 ;537
0006da  468b              MOV      r11,r1                ;537
0006dc  f8a10042          STRH     r0,[r1,#0x42]         ;537
0006e0  2805              CMP      r0,#5                 ;539
0006e2  dd09              BLE      |L1.1784|
0006e4  230f              MOVS     r3,#0xf               ;539
0006e6  221e              MOVS     r2,#0x1e              ;539
0006e8  2164              MOVS     r1,#0x64              ;539
0006ea  20e1              MOVS     r0,#0xe1              ;539
0006ec  f7fffffe          BL       mess_send
0006f0  e00a              B        |L1.1800|
                  |L1.1778|
0006f2  f8a87042          STRH     r7,[r8,#0x42]         ;530
0006f6  e7e4              B        |L1.1730|
                  |L1.1784|
0006f8  2800              CMP      r0,#0                 ;540
0006fa  dd05              BLE      |L1.1800|
0006fc  230f              MOVS     r3,#0xf               ;540
0006fe  221e              MOVS     r2,#0x1e              ;540
000700  2169              MOVS     r1,#0x69              ;540
000702  20e1              MOVS     r0,#0xe1              ;540
000704  f7fffffe          BL       mess_send
                  |L1.1800|
000708  f8bb0042          LDRH     r0,[r11,#0x42]        ;543  ; kb_cnt_1lev
00070c  2805              CMP      r0,#5                 ;543
00070e  d111              BNE      |L1.1844|
000710  f9b60008          LDRSH    r0,[r6,#8]  ; bat
000714  f7fffffe          BL       abs
000718  f8a80000          STRH     r0,[r8,#0]
;;;546    		ibat[1]=abs(bat[1]._Ib);
00071c  f9b60054          LDRSH    r0,[r6,#0x54]  ; bat
000720  f7fffffe          BL       abs
000724  f8a80002          STRH     r0,[r8,#2]
;;;547    		ibat_ips=abs(Ib_ips_termokompensat);
000728  f9ba0000          LDRSH    r0,[r10,#0]  ; Ib_ips_termokompensat
00072c  f7fffffe          BL       abs
000730  f8ab0022          STRH     r0,[r11,#0x22]
                  |L1.1844|
;;;548    		}
;;;549    	
;;;550    	if(kb_cnt_1lev==0)
000734  485a              LDR      r0,|L1.2208|
000736  f8b00042          LDRH     r0,[r0,#0x42]  ; kb_cnt_1lev
00073a  2800              CMP      r0,#0
00073c  d154              BNE      |L1.2024|
;;;551    		{
;;;552    		ibat_[0]=abs(bat[0]._Ib);
00073e  f9b60008          LDRSH    r0,[r6,#8]  ; bat
000742  f7fffffe          BL       abs
000746  f8dfb158          LDR      r11,|L1.2208|
00074a  f10b0b68          ADD      r11,r11,#0x68
00074e  f8ab0000          STRH     r0,[r11,#0]
;;;553    		ibat_[1]=abs(bat[1]._Ib);
000752  f9b60054          LDRSH    r0,[r6,#0x54]  ; bat
000756  f7fffffe          BL       abs
00075a  f8ab0002          STRH     r0,[r11,#2]
;;;554    		ibat_ips_=abs(Ib_ips_termokompensat);
00075e  f9ba0000          LDRSH    r0,[r10,#0]  ; Ib_ips_termokompensat
000762  f7fffffe          BL       abs
000766  f8dfa138          LDR      r10,|L1.2208|
00076a  f8aa0024          STRH     r0,[r10,#0x24]
;;;555    
;;;556    		kb_cnt_2lev=0;
00076e  f8aa5044          STRH     r5,[r10,#0x44]
;;;557    
;;;558    
;;;559    		if(( (ibat[0]+ibat_[0]) < IKB )&& (kb_start[0]==1))
000772  f9b80000          LDRSH    r0,[r8,#0]  ; ibat
000776  f9bb1000          LDRSH    r1,[r11,#0]  ; ibat_
00077a  4408              ADD      r0,r0,r1
00077c  f9b91000          LDRSH    r1,[r9,#0]  ; IKB
000780  4288              CMP      r0,r1
000782  da02              BGE      |L1.1930|
000784  7820              LDRB     r0,[r4,#0]  ; kb_start
000786  2801              CMP      r0,#1
000788  d030              BEQ      |L1.2028|
                  |L1.1930|
;;;560    			{
;;;561    			kb_cnt_2lev=10;  
;;;562    			}
;;;563    		else if(bat[0]._Ub>200)
00078a  f9b60002          LDRSH    r0,[r6,#2]  ; bat
00078e  28c8              CMP      r0,#0xc8
000790  dd04              BLE      |L1.1948|
;;;564    			{
;;;565    			kb_start[0]=0;
000792  7025              STRB     r5,[r4,#0]
;;;566    			avar_bat_hndl(0,0);
000794  2100              MOVS     r1,#0
000796  4608              MOV      r0,r1
000798  f7fffffe          BL       avar_bat_hndl
                  |L1.1948|
;;;567    			}
;;;568    		
;;;569    		if(( (ibat[1]+ibat_[1]) < IKB ) && (kb_start[1]==1))
00079c  f9b80002          LDRSH    r0,[r8,#2]  ; ibat
0007a0  f9bb1002          LDRSH    r1,[r11,#2]  ; ibat_
0007a4  4408              ADD      r0,r0,r1
0007a6  f9b91000          LDRSH    r1,[r9,#0]  ; IKB
0007aa  4288              CMP      r0,r1
0007ac  da02              BGE      |L1.1972|
0007ae  7860              LDRB     r0,[r4,#1]  ; kb_start
0007b0  2801              CMP      r0,#1
0007b2  d01e              BEQ      |L1.2034|
                  |L1.1972|
;;;570    			{
;;;571    			kb_cnt_2lev=10;     
;;;572    			}
;;;573    		else  if(bat[1]._Ub>200)
0007b4  f9b6004e          LDRSH    r0,[r6,#0x4e]  ; bat
0007b8  28c8              CMP      r0,#0xc8
0007ba  dd04              BLE      |L1.1990|
;;;574    			{
;;;575    			kb_start[1]=0;
0007bc  7065              STRB     r5,[r4,#1]
;;;576    			avar_bat_hndl(1,0);
0007be  2100              MOVS     r1,#0
0007c0  2001              MOVS     r0,#1
0007c2  f7fffffe          BL       avar_bat_hndl
                  |L1.1990|
;;;577    			}
;;;578    #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;579    		if(( (ibat_ips+ibat_ips_) < IKB ) && (kb_start_ips==1))
0007c6  f9ba0022          LDRSH    r0,[r10,#0x22]  ; ibat_ips
0007ca  f9ba1024          LDRSH    r1,[r10,#0x24]  ; ibat_ips_
0007ce  4408              ADD      r0,r0,r1
0007d0  e000              B        |L1.2004|
                  |L1.2002|
0007d2  e011              B        |L1.2040|
                  |L1.2004|
0007d4  f9b91000          LDRSH    r1,[r9,#0]  ; IKB
0007d8  4288              CMP      r0,r1
0007da  da05              BGE      |L1.2024|
0007dc  f89a000d          LDRB     r0,[r10,#0xd]  ; kb_start_ips
0007e0  2801              CMP      r0,#1
0007e2  d101              BNE      |L1.2024|
;;;580    			{
;;;581    			kb_cnt_2lev=10;     
0007e4  f8aa7044          STRH     r7,[r10,#0x44]
                  |L1.2024|
;;;582    			}
;;;583    /*		else  if(bat[1]._Ub>200)
;;;584    			{
;;;585    			kb_start[1]=0;
;;;586    			avar_bat_hndl(1,0);
;;;587    			} */
;;;588    #endif
;;;589    		}	
;;;590    
;;;591    
;;;592    	}
;;;593    else if(kb_cnt_2lev)
;;;594    	{
;;;595    	kb_cnt_2lev--;
;;;596    
;;;597    	if(kb_cnt_2lev>5)mess_send(MESS2CNTRL_HNDL,PARAM_CNTRL_STAT_PLUS,200,15);
;;;598    	else if(kb_cnt_2lev>0) mess_send(MESS2CNTRL_HNDL,PARAM_CNTRL_STAT_MINUS,200,15);
;;;599    
;;;600    
;;;601    	if(kb_cnt_2lev==5)
;;;602    		{
;;;603    		ibat[0]=abs(bat[0]._Ib);
;;;604    		ibat[1]=abs(bat[1]._Ib);
;;;605    		ibat_ips=abs(Ib_ips_termokompensat);
;;;606    		}
;;;607    	
;;;608    	if(kb_cnt_2lev==0)
;;;609    		{
;;;610    		ibat_[0]=abs(bat[0]._Ib);
;;;611    		ibat_[1]=abs(bat[1]._Ib);
;;;612    		ibat_ips_=abs(Ib_ips_termokompensat);
;;;613    
;;;614    		kb_full_ver=0;
;;;615    
;;;616    		if(( (ibat[0]+ibat_[0]) < IKB ) && (kb_start[0]==1))
;;;617    			{
;;;618    			kb_full_ver=1;  
;;;619    			}
;;;620    		else if(bat[0]._Ub>200)			
;;;621    			{
;;;622    			kb_start[0]=0;
;;;623    			avar_bat_hndl(0,0);
;;;624    			}
;;;625    
;;;626    		if(( (ibat[1]+ibat_[1]) < IKB ) && (kb_start[1]==1))
;;;627    			{
;;;628    			kb_full_ver=1;     
;;;629    			}
;;;630    		else	if(bat[1]._Ub>200)		
;;;631    			{
;;;632    			kb_start[1]=0;
;;;633    			avar_bat_hndl(1,0);
;;;634    			}
;;;635    #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;636    		if(( (ibat_ips+ibat_ips_) < IKB )  && (kb_start_ips==1))
;;;637    			{
;;;638    			kb_full_ver=1;     
;;;639    			}
;;;640    #endif
;;;641    		}	
;;;642    	}
;;;643    
;;;644    else if(kb_full_ver)
;;;645    	{
;;;646    	
;;;647    	mess_send(MESS2CNTRL_HNDL,PARAM_CNTRL_STAT_STEP_DOWN,0,15);
;;;648    
;;;649    	if( abs(bat[0]._Ib) > IKB ) 
;;;650    		{
;;;651    		if(kb_start[0]==1)
;;;652    			{
;;;653    			kb_start[0]=0;
;;;654    			avar_bat_hndl(0,0);
;;;655    			}
;;;656    		}
;;;657    
;;;658    	if( abs(bat[1]._Ib) > IKB ) 
;;;659    		{
;;;660    		if(kb_start[1]==1)
;;;661    			{
;;;662    			kb_start[1]=0;
;;;663    			avar_bat_hndl(1,0);
;;;664    			}
;;;665    		}
;;;666    #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;667    	if( abs(Ib_ips_termokompensat) > IKB ) 
;;;668    		{
;;;669    		if(kb_start_ips==1)
;;;670    			{
;;;671    			kb_start_ips=0;
;;;672    			avar_bat_ips_hndl(0);
;;;673    			}
;;;674    		}
;;;675    #endif
;;;676    
;;;677    	if ((kb_start[0]==0) && (kb_start[1]==0) && (kb_start_ips==0)) 
;;;678    		{
;;;679    		kb_full_ver=0;
;;;680    		}
;;;681    
;;;682    	if(( (mess_find(MESS2KB_HNDL))	&& (mess_data[0]==PARAM_CNTRL_IS_DOWN) ) || (load_U<(USIGN*10)) )
;;;683    		{
;;;684    		kb_full_ver=0;
;;;685    		if((kb_start[0]==1)&&((load_I>(2*IKB)/10))&&(!(bat[0]._av&0x01))) avar_bat_hndl(0,1);
;;;686    		if((kb_start[1]==1)&&((load_I>(2*IKB)/10))&&(!(bat[1]._av&0x01))) avar_bat_hndl(1,1);
;;;687    #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;688    		if((kb_start_ips==1)&&((load_I>(2*IKB)/10))&&(!(bat_ips._av&0x01))) avar_bat_ips_hndl(1);
;;;689    #endif
;;;690    		}
;;;691    	}
;;;692    
;;;693    }
0007e8  e8bd9ff0          POP      {r4-r12,pc}
                  |L1.2028|
0007ec  f8aa7044          STRH     r7,[r10,#0x44]        ;561
0007f0  e7d4              B        |L1.1948|
                  |L1.2034|
0007f2  f8aa7044          STRH     r7,[r10,#0x44]        ;571
0007f6  e7e6              B        |L1.1990|
                  |L1.2040|
0007f8  f9b10044          LDRSH    r0,[r1,#0x44]         ;593  ; kb_cnt_2lev
0007fc  b3e8              CBZ      r0,|L1.2170|
0007fe  f1a00001          SUB      r0,r0,#1              ;595
000802  b200              SXTH     r0,r0                 ;595
000804  460f              MOV      r7,r1                 ;595
000806  f8a10044          STRH     r0,[r1,#0x44]         ;595
00080a  2805              CMP      r0,#5                 ;597
00080c  dd06              BLE      |L1.2076|
00080e  230f              MOVS     r3,#0xf               ;597
000810  22c8              MOVS     r2,#0xc8              ;597
000812  2164              MOVS     r1,#0x64              ;597
000814  20e1              MOVS     r0,#0xe1              ;597
000816  f7fffffe          BL       mess_send
00081a  e007              B        |L1.2092|
                  |L1.2076|
00081c  2800              CMP      r0,#0                 ;598
00081e  dd05              BLE      |L1.2092|
000820  230f              MOVS     r3,#0xf               ;598
000822  22c8              MOVS     r2,#0xc8              ;598
000824  2169              MOVS     r1,#0x69              ;598
000826  20e1              MOVS     r0,#0xe1              ;598
000828  f7fffffe          BL       mess_send
                  |L1.2092|
00082c  f8b70044          LDRH     r0,[r7,#0x44]         ;601  ; kb_cnt_2lev
000830  2805              CMP      r0,#5                 ;601
000832  d110              BNE      |L1.2134|
000834  f9b60008          LDRSH    r0,[r6,#8]            ;603  ; bat
000838  f7fffffe          BL       abs
00083c  f8a80000          STRH     r0,[r8,#0]            ;603
000840  f9b60054          LDRSH    r0,[r6,#0x54]         ;604  ; bat
000844  f7fffffe          BL       abs
000848  f8a80002          STRH     r0,[r8,#2]            ;604
00084c  f9ba0000          LDRSH    r0,[r10,#0]           ;605  ; Ib_ips_termokompensat
000850  f7fffffe          BL       abs
000854  8478              STRH     r0,[r7,#0x22]         ;605
                  |L1.2134|
000856  4812              LDR      r0,|L1.2208|
000858  f8b00044          LDRH     r0,[r0,#0x44]         ;608  ; kb_cnt_2lev
00085c  2800              CMP      r0,#0                 ;608
                  |L1.2142|
00085e  d1c3              BNE      |L1.2024|
000860  f9b60008          LDRSH    r0,[r6,#8]            ;610  ; bat
000864  f7fffffe          BL       abs
000868  4f0d              LDR      r7,|L1.2208|
00086a  3768              ADDS     r7,r7,#0x68           ;610
00086c  8038              STRH     r0,[r7,#0]            ;610
00086e  f9b60054          LDRSH    r0,[r6,#0x54]         ;611  ; bat
000872  f7fffffe          BL       abs
000876  8078              STRH     r0,[r7,#2]            ;611
000878  e000              B        |L1.2172|
                  |L1.2170|
00087a  e06f              B        |L1.2396|
                  |L1.2172|
00087c  f9ba0000          LDRSH    r0,[r10,#0]           ;612  ; Ib_ips_termokompensat
000880  f7fffffe          BL       abs
000884  f8dfa018          LDR      r10,|L1.2208|
000888  f8aa0024          STRH     r0,[r10,#0x24]        ;612
00088c  f88a500c          STRB     r5,[r10,#0xc]         ;614
000890  f9b80000          LDRSH    r0,[r8,#0]            ;616  ; ibat
000894  f9b71000          LDRSH    r1,[r7,#0]            ;616  ; ibat_
000898  4408              ADD      r0,r0,r1              ;616
00089a  e023              B        |L1.2276|
                  |L1.2204|
                          DCD      AVZ
                  |L1.2208|
                          DCD      ||area_number.21||
                  |L1.2212|
                          DCD      0x40024000
                  |L1.2216|
                          DCD      YEAR_AVZ
                  |L1.2220|
                          DCD      MONTH_AVZ
                  |L1.2224|
                          DCD      DATE_AVZ
                  |L1.2228|
                          DCD      HOUR_AVZ
                  |L1.2232|
                          DCD      MIN_AVZ
                  |L1.2236|
                          DCD      SEC_AVZ
                  |L1.2240|
                          DCD      AVZ_TIME
                  |L1.2244|
                          DCD      TBAT
                  |L1.2248|
                          DCD      Ib_ips_termokompensat
                  |L1.2252|
                          DCD      bat
                  |L1.2256|
                          DCD      IKB
                  |L1.2260|
                          DCD      BAT_IS_ON
                  |L1.2264|
                          DCD      ips_bat_av_vzvod
                  |L1.2268|
                          DCD      bat_ips
                  |L1.2272|
                          DCD      net_av
                  |L1.2276|
0008e4  f9b91000          LDRSH    r1,[r9,#0]            ;616  ; IKB
0008e8  4288              CMP      r0,r1                 ;616
0008ea  da02              BGE      |L1.2290|
0008ec  7820              LDRB     r0,[r4,#0]            ;616  ; kb_start
0008ee  2801              CMP      r0,#1                 ;616
0008f0  d02e              BEQ      |L1.2384|
                  |L1.2290|
0008f2  f9b60002          LDRSH    r0,[r6,#2]            ;620  ; bat
0008f6  28c8              CMP      r0,#0xc8              ;620
0008f8  dd04              BLE      |L1.2308|
0008fa  7025              STRB     r5,[r4,#0]            ;622
0008fc  2100              MOVS     r1,#0                 ;623
0008fe  4608              MOV      r0,r1                 ;623
000900  f7fffffe          BL       avar_bat_hndl
                  |L1.2308|
000904  f9b80002          LDRSH    r0,[r8,#2]            ;626  ; ibat
000908  f9b71002          LDRSH    r1,[r7,#2]            ;626  ; ibat_
00090c  4408              ADD      r0,r0,r1              ;626
00090e  f9b91000          LDRSH    r1,[r9,#0]            ;626  ; IKB
000912  4288              CMP      r0,r1                 ;626
000914  da02              BGE      |L1.2332|
000916  7860              LDRB     r0,[r4,#1]            ;626  ; kb_start
000918  2801              CMP      r0,#1                 ;626
00091a  d01c              BEQ      |L1.2390|
                  |L1.2332|
00091c  f9b6004e          LDRSH    r0,[r6,#0x4e]         ;630  ; bat
000920  28c8              CMP      r0,#0xc8              ;630
000922  dd04              BLE      |L1.2350|
000924  7065              STRB     r5,[r4,#1]            ;632
000926  2100              MOVS     r1,#0                 ;633
000928  2001              MOVS     r0,#1                 ;633
00092a  f7fffffe          BL       avar_bat_hndl
                  |L1.2350|
00092e  f9ba0022          LDRSH    r0,[r10,#0x22]        ;636  ; ibat_ips
000932  f9ba1024          LDRSH    r1,[r10,#0x24]        ;636  ; ibat_ips_
000936  4408              ADD      r0,r0,r1              ;636
000938  f9b91000          LDRSH    r1,[r9,#0]            ;636  ; IKB
00093c  4288              CMP      r0,r1                 ;636
00093e  f6bfaf53          BGE      |L1.2024|
000942  f89a000d          LDRB     r0,[r10,#0xd]         ;636  ; kb_start_ips
000946  2801              CMP      r0,#1                 ;636
000948  d189              BNE      |L1.2142|
00094a  f88ab00c          STRB     r11,[r10,#0xc]        ;638
                  |L1.2382|
00094e  e74b              B        |L1.2024|
                  |L1.2384|
000950  f88ab00c          STRB     r11,[r10,#0xc]        ;618
000954  e7d6              B        |L1.2308|
                  |L1.2390|
000956  f88ab00c          STRB     r11,[r10,#0xc]        ;628
00095a  e7e8              B        |L1.2350|
                  |L1.2396|
00095c  7b08              LDRB     r0,[r1,#0xc]          ;644  ; kb_full_ver
00095e  4688              MOV      r8,r1                 ;644
000960  2800              CMP      r0,#0                 ;644
000962  d0f4              BEQ      |L1.2382|
000964  230f              MOVS     r3,#0xf               ;647
000966  2200              MOVS     r2,#0                 ;647
000968  216e              MOVS     r1,#0x6e              ;647
00096a  20e1              MOVS     r0,#0xe1              ;647
00096c  f7fffffe          BL       mess_send
000970  f9b60008          LDRSH    r0,[r6,#8]            ;649  ; bat
000974  f7fffffe          BL       abs
000978  f9b91000          LDRSH    r1,[r9,#0]            ;649  ; IKB
00097c  4288              CMP      r0,r1                 ;649
00097e  dd07              BLE      |L1.2448|
000980  7820              LDRB     r0,[r4,#0]            ;651  ; kb_start
000982  2801              CMP      r0,#1                 ;651
000984  d104              BNE      |L1.2448|
000986  7025              STRB     r5,[r4,#0]            ;653
000988  2100              MOVS     r1,#0                 ;654
00098a  4608              MOV      r0,r1                 ;654
00098c  f7fffffe          BL       avar_bat_hndl
                  |L1.2448|
000990  f9b60054          LDRSH    r0,[r6,#0x54]         ;658  ; bat
000994  f7fffffe          BL       abs
000998  f9b91000          LDRSH    r1,[r9,#0]            ;658  ; IKB
00099c  4288              CMP      r0,r1                 ;658
00099e  dd06              BLE      |L1.2478|
0009a0  7860              LDRB     r0,[r4,#1]            ;660  ; kb_start
0009a2  2801              CMP      r0,#1                 ;660
0009a4  d103              BNE      |L1.2478|
0009a6  7065              STRB     r5,[r4,#1]            ;662
0009a8  2100              MOVS     r1,#0                 ;663
0009aa  f7fffffe          BL       avar_bat_hndl
                  |L1.2478|
0009ae  f9ba0000          LDRSH    r0,[r10,#0]           ;667  ; Ib_ips_termokompensat
0009b2  f7fffffe          BL       abs
0009b6  f9b91000          LDRSH    r1,[r9,#0]            ;667  ; IKB
0009ba  4288              CMP      r0,r1                 ;667
0009bc  dd08              BLE      |L1.2512|
0009be  f898000d          LDRB     r0,[r8,#0xd]          ;669  ; kb_start_ips
0009c2  2801              CMP      r0,#1                 ;669
0009c4  d104              BNE      |L1.2512|
0009c6  f888500d          STRB     r5,[r8,#0xd]          ;671
0009ca  2000              MOVS     r0,#0                 ;672
0009cc  f7fffffe          BL       avar_bat_ips_hndl
                  |L1.2512|
0009d0  7820              LDRB     r0,[r4,#0]            ;677  ; kb_start
0009d2  b930              CBNZ     r0,|L1.2530|
0009d4  7860              LDRB     r0,[r4,#1]            ;677  ; kb_start
0009d6  b920              CBNZ     r0,|L1.2530|
0009d8  f898000d          LDRB     r0,[r8,#0xd]          ;677  ; kb_start_ips
0009dc  b908              CBNZ     r0,|L1.2530|
0009de  f888500c          STRB     r5,[r8,#0xc]          ;679
                  |L1.2530|
0009e2  20e6              MOVS     r0,#0xe6              ;682
0009e4  f7fffffe          BL       mess_find
0009e8  b118              CBZ      r0,|L1.2546|
0009ea  48ff              LDR      r0,|L1.3560|
0009ec  6800              LDR      r0,[r0,#0]            ;682  ; mess_data
0009ee  28e7              CMP      r0,#0xe7              ;682
0009f0  d00a              BEQ      |L1.2568|
                  |L1.2546|
0009f2  48fe              LDR      r0,|L1.3564|
0009f4  49fe              LDR      r1,|L1.3568|
0009f6  f9b00000          LDRSH    r0,[r0,#0]            ;682  ; USIGN
0009fa  f9b11000          LDRSH    r1,[r1,#0]            ;682  ; load_U
0009fe  eb000080          ADD      r0,r0,r0,LSL #2       ;682
000a02  ebb10f40          CMP      r1,r0,LSL #1          ;682
                  |L1.2566|
000a06  daa2              BGE      |L1.2382|
                  |L1.2568|
000a08  f888500c          STRB     r5,[r8,#0xc]          ;684
000a0c  7820              LDRB     r0,[r4,#0]            ;685  ; kb_start
000a0e  4df9              LDR      r5,|L1.3572|
000a10  2801              CMP      r0,#1                 ;685
000a12  d10f              BNE      |L1.2612|
000a14  f9b90000          LDRSH    r0,[r9,#0]            ;685  ; IKB
000a18  f9b51000          LDRSH    r1,[r5,#0]            ;685  ; load_I
000a1c  0040              LSLS     r0,r0,#1              ;685
000a1e  fb90f0f7          SDIV     r0,r0,r7              ;685
000a22  4288              CMP      r0,r1                 ;685
000a24  da06              BGE      |L1.2612|
000a26  f896003d          LDRB     r0,[r6,#0x3d]         ;685  ; bat
000a2a  07c0              LSLS     r0,r0,#31             ;685
000a2c  d102              BNE      |L1.2612|
000a2e  2101              MOVS     r1,#1                 ;685
000a30  f7fffffe          BL       avar_bat_hndl
                  |L1.2612|
000a34  7860              LDRB     r0,[r4,#1]            ;686  ; kb_start
000a36  2801              CMP      r0,#1                 ;686
000a38  d110              BNE      |L1.2652|
000a3a  f9b90000          LDRSH    r0,[r9,#0]            ;686  ; IKB
000a3e  f9b51000          LDRSH    r1,[r5,#0]            ;686  ; load_I
000a42  0040              LSLS     r0,r0,#1              ;686
000a44  fb90f0f7          SDIV     r0,r0,r7              ;686
000a48  4288              CMP      r0,r1                 ;686
000a4a  da07              BGE      |L1.2652|
000a4c  f8960089          LDRB     r0,[r6,#0x89]         ;686  ; bat
000a50  07c0              LSLS     r0,r0,#31             ;686
000a52  d103              BNE      |L1.2652|
000a54  2101              MOVS     r1,#1                 ;686
000a56  4608              MOV      r0,r1                 ;686
000a58  f7fffffe          BL       avar_bat_hndl
                  |L1.2652|
000a5c  f898000d          LDRB     r0,[r8,#0xd]          ;688  ; kb_start_ips
000a60  2801              CMP      r0,#1                 ;688
                  |L1.2658|
000a62  f47faf74          BNE      |L1.2382|
000a66  f9b90000          LDRSH    r0,[r9,#0]            ;688  ; IKB
000a6a  f9b51000          LDRSH    r1,[r5,#0]            ;688  ; load_I
000a6e  0040              LSLS     r0,r0,#1              ;688
000a70  fb90f0f7          SDIV     r0,r0,r7              ;688
000a74  4288              CMP      r0,r1                 ;688
000a76  dac6              BGE      |L1.2566|
000a78  48df              LDR      r0,|L1.3576|
000a7a  f890003d          LDRB     r0,[r0,#0x3d]         ;688  ; bat_ips
000a7e  07c0              LSLS     r0,r0,#31             ;688
000a80  d1ef              BNE      |L1.2658|
000a82  e8bd5ff0          POP      {r4-r12,lr}           ;688
000a86  2001              MOVS     r0,#1                 ;688
000a88  f7ffbffe          B.W      avar_bat_ips_hndl
;;;694    
                          ENDP

                  samokalibr_hndl PROC
;;;703    //-----------------------------------------------
;;;704    void samokalibr_hndl(void)
000a8c  e92d47f0          PUSH     {r4-r10,lr}
;;;705    {
;;;706    if(++samokalibr_cnt>=1800)samokalibr_cnt=0;
000a90  4cda              LDR      r4,|L1.3580|
000a92  8fe0              LDRH     r0,[r4,#0x3e]  ; samokalibr_cnt
000a94  1c40              ADDS     r0,r0,#1
000a96  b200              SXTH     r0,r0
000a98  87e0              STRH     r0,[r4,#0x3e]
000a9a  f5b06fe1          CMP      r0,#0x708
000a9e  db02              BLT      |L1.2726|
000aa0  f04f0000          MOV      r0,#0
000aa4  87e0              STRH     r0,[r4,#0x3e]
                  |L1.2726|
;;;707    
;;;708    if(samokalibr_cnt>=1785U)
000aa6  f9b4003e          LDRSH    r0,[r4,#0x3e]  ; samokalibr_cnt
000aaa  f5b06fdf          CMP      r0,#0x6f8
000aae  d911              BLS      |L1.2772|
;;;709    	{
;;;710    	mess_send(MESS2RELE_HNDL,PARAM_RELE_SAMOKALIBR,1,15);
000ab0  230f              MOVS     r3,#0xf
000ab2  2201              MOVS     r2,#1
000ab4  2164              MOVS     r1,#0x64
000ab6  20d2              MOVS     r0,#0xd2
000ab8  f7fffffe          BL       mess_send
;;;711    	mess_send(MESS2IND_HNDL,PARAM_SAMOKALIBR,0,15);
000abc  230f              MOVS     r3,#0xf
000abe  2200              MOVS     r2,#0
000ac0  21d8              MOVS     r1,#0xd8
000ac2  20d7              MOVS     r0,#0xd7
000ac4  f7fffffe          BL       mess_send
;;;712    	mess_send(MESS2MATEMAT,PARAM_SAMOKALIBR,0,15);
000ac8  230f              MOVS     r3,#0xf
000aca  2200              MOVS     r2,#0
000acc  21d8              MOVS     r1,#0xd8
000ace  20dc              MOVS     r0,#0xdc
000ad0  f7fffffe          BL       mess_send
                  |L1.2772|
;;;713    	} 
;;;714    
;;;715    if(samokalibr_cnt==1799U)
000ad4  f9b4003e          LDRSH    r0,[r4,#0x3e]  ; samokalibr_cnt
000ad8  f5a061e0          SUB      r1,r0,#0x700
000adc  3907              SUBS     r1,#7
000ade  d133              BNE      |L1.2888|
;;;716    	{
;;;717    	if((Kibat0[0]!=ad7705_buff_[0])&&(abs(bat[0]._Ib/10)<IZMAX)) lc640_write_int(ADR_KI0BAT[0],ad7705_buff_[0]);
000ae0  4dc7              LDR      r5,|L1.3584|
000ae2  4cc8              LDR      r4,|L1.3588|
000ae4  4ec8              LDR      r6,|L1.3592|
000ae6  8828              LDRH     r0,[r5,#0]  ; Kibat0
000ae8  8821              LDRH     r1,[r4,#0]  ; ad7705_buff_
000aea  270a              MOVS     r7,#0xa
000aec  f8df831c          LDR      r8,|L1.3596|
000af0  f8df931c          LDR      r9,|L1.3600|
000af4  4288              CMP      r0,r1
000af6  d010              BEQ      |L1.2842|
000af8  f9b60008          LDRSH    r0,[r6,#8]  ; bat
000afc  fb90f0f7          SDIV     r0,r0,r7
000b00  b200              SXTH     r0,r0
000b02  f7fffffe          BL       abs
000b06  f9b81000          LDRSH    r1,[r8,#0]  ; IZMAX
000b0a  4288              CMP      r0,r1
000b0c  da05              BGE      |L1.2842|
000b0e  f9b41000          LDRSH    r1,[r4,#0]  ; ad7705_buff_
000b12  f9b90000          LDRSH    r0,[r9,#0]  ; ADR_KI0BAT
000b16  f7fffffe          BL       lc640_write_int
                  |L1.2842|
;;;718    	if((Kibat0[1]!=ad7705_buff_[1])&&(abs(bat[0]._Ib/10)<IZMAX)) lc640_write_int(ADR_KI0BAT[1],ad7705_buff_[1]);
000b1a  8868              LDRH     r0,[r5,#2]  ; Kibat0
000b1c  8861              LDRH     r1,[r4,#2]  ; ad7705_buff_
000b1e  4288              CMP      r0,r1
000b20  d012              BEQ      |L1.2888|
000b22  f9b60008          LDRSH    r0,[r6,#8]  ; bat
000b26  fb90f0f7          SDIV     r0,r0,r7
000b2a  b200              SXTH     r0,r0
000b2c  f7fffffe          BL       abs
000b30  f9b81000          LDRSH    r1,[r8,#0]  ; IZMAX
000b34  4288              CMP      r0,r1
000b36  da07              BGE      |L1.2888|
000b38  f9b41002          LDRSH    r1,[r4,#2]  ; ad7705_buff_
000b3c  f9b90002          LDRSH    r0,[r9,#2]  ; ADR_KI0BAT
000b40  e8bd47f0          POP      {r4-r10,lr}
000b44  f7ffbffe          B.W      lc640_write_int
                  |L1.2888|
;;;719    	
;;;720    	}	 	
;;;721    }
000b48  e8bd87f0          POP      {r4-r10,pc}
;;;722    
                          ENDP

                  ubat_old_drv PROC
;;;725    //-----------------------------------------------
;;;726    void ubat_old_drv(void)
000b4c  b510              PUSH     {r4,lr}
;;;727    {        
;;;728    bat_u_old_cnt++;
000b4e  4cb1              LDR      r4,|L1.3604|
000b50  8820              LDRH     r0,[r4,#0]  ; bat_u_old_cnt
000b52  f1000001          ADD      r0,r0,#1
000b56  8020              STRH     r0,[r4,#0]
;;;729    gran_ring(&bat_u_old_cnt,0,8);
000b58  f04f0208          MOV      r2,#8
000b5c  f04f0100          MOV      r1,#0
000b60  4620              MOV      r0,r4
000b62  f7fffffe          BL       gran_ring
;;;730    
;;;731    bat[0]._u_old[bat_u_old_cnt]=bat[0]._Ub;
000b66  49a8              LDR      r1,|L1.3592|
000b68  f9b40000          LDRSH    r0,[r4,#0]  ; bat_u_old_cnt
000b6c  eb010040          ADD      r0,r1,r0,LSL #1
000b70  884a              LDRH     r2,[r1,#2]  ; bat
000b72  8402              STRH     r2,[r0,#0x20]
;;;732    bat[1]._u_old[bat_u_old_cnt]=bat[1]._Ub;
000b74  f8b1104e          LDRH     r1,[r1,#0x4e]  ; bat
000b78  f8a0106c          STRH     r1,[r0,#0x6c]
;;;733    }
000b7c  bd10              POP      {r4,pc}
;;;734    
                          ENDP

                  unet_drv PROC
;;;735    //-----------------------------------------------
;;;736    void unet_drv(void)
000b7e  b570              PUSH     {r4-r6,lr}
;;;737    {
;;;738    if(net_U<UMN)
000b80  4da5              LDR      r5,|L1.3608|
000b82  48a6              LDR      r0,|L1.3612|
;;;739    	{
;;;740    	if((unet_drv_cnt<10)&&(main_1Hz_cnt>15))
000b84  4aa6              LDR      r2,|L1.3616|
000b86  f9b51000          LDRSH    r1,[r5,#0]            ;738  ; net_U
000b8a  f9b03000          LDRSH    r3,[r0,#0]            ;738  ; UMN
000b8e  f9920000          LDRSB    r0,[r2,#0]
000b92  4299              CMP      r1,r3                 ;738
000b94  da1f              BGE      |L1.3030|
;;;741    		{
;;;742    		unet_drv_cnt++;
;;;743    		if(unet_drv_cnt>=10)
;;;744    			{
;;;745    			net_Ustore=net_U;
000b96  4ca3              LDR      r4,|L1.3620|
000b98  280a              CMP      r0,#0xa               ;740
000b9a  da0f              BGE      |L1.3004|
000b9c  4ba2              LDR      r3,|L1.3624|
000b9e  f9b33000          LDRSH    r3,[r3,#0]            ;740  ; main_1Hz_cnt
000ba2  2b0f              CMP      r3,#0xf               ;740
000ba4  dd0a              BLE      |L1.3004|
000ba6  f1000001          ADD      r0,r0,#1              ;742
000baa  b240              SXTB     r0,r0                 ;742
000bac  7010              STRB     r0,[r2,#0]            ;742
000bae  280a              CMP      r0,#0xa               ;743
000bb0  db09              BLT      |L1.3014|
000bb2  8021              STRH     r1,[r4,#0]
;;;746    		 	avar_unet_hndl(1);
000bb4  2001              MOVS     r0,#1
000bb6  f7fffffe          BL       avar_unet_hndl
000bba  e004              B        |L1.3014|
                  |L1.3004|
;;;747    			
;;;748    			}
;;;749    		}
;;;750    	else if(unet_drv_cnt>=10)unet_drv_cnt=10;
000bbc  280a              CMP      r0,#0xa
000bbe  db02              BLT      |L1.3014|
000bc0  f04f000a          MOV      r0,#0xa
000bc4  7010              STRB     r0,[r2,#0]
                  |L1.3014|
;;;751    
;;;752    	if(net_U<net_Ustore) net_Ustore=net_U;	
000bc6  f9b50000          LDRSH    r0,[r5,#0]  ; net_U
000bca  f9b41000          LDRSH    r1,[r4,#0]  ; net_Ustore
000bce  4288              CMP      r0,r1
000bd0  da00              BGE      |L1.3028|
000bd2  8020              STRH     r0,[r4,#0]
                  |L1.3028|
;;;753    	}
;;;754    
;;;755    else if(net_U>UMN)
;;;756    	{                 
;;;757    	if(unet_drv_cnt)
;;;758    		{
;;;759    		unet_drv_cnt--;
;;;760    		if(unet_drv_cnt<=0)
;;;761    			{
;;;762    			avar_unet_hndl(0);
;;;763    			}
;;;764    		}
;;;765    	else if(unet_drv_cnt<0)unet_drv_cnt=0;
;;;766    	
;;;767    	}
;;;768    
;;;769    }
000bd4  bd70              POP      {r4-r6,pc}
                  |L1.3030|
000bd6  ddfd              BLE      |L1.3028|
000bd8  2800              CMP      r0,#0                 ;757
000bda  d0fb              BEQ      |L1.3028|
000bdc  f1a00001          SUB      r0,r0,#1              ;759
000be0  b240              SXTB     r0,r0                 ;759
000be2  7010              STRB     r0,[r2,#0]            ;759
000be4  2800              CMP      r0,#0                 ;760
000be6  dcf5              BGT      |L1.3028|
000be8  e8bd4070          POP      {r4-r6,lr}            ;762
000bec  2000              MOVS     r0,#0                 ;762
000bee  f7ffbffe          B.W      avar_unet_hndl
;;;770    
                          ENDP

                  matemat PROC
;;;771    //-----------------------------------------------
;;;772    void matemat(void)
000bf2  e92d4ffe          PUSH     {r1-r11,lr}
;;;773    {
;;;774    //signed short temp_SS;
;;;775    signed long temp_SL/*,temp_SL_*/;
;;;776    char /*temp,*/i;
;;;777    signed short temp_SS;
;;;778    
;;;779    #ifdef UKU_MGTS
;;;780    // 
;;;781    temp_SL=(signed long)net_buff_;
;;;782    temp_SL*=Kunet;
;;;783    temp_SL/=110000L;
;;;784    net_U=(signed short)temp_SL;
;;;785    #endif
;;;786    
;;;787    #ifdef UKU_RSTKM
;;;788    // 
;;;789    temp_SL=(signed long)net_buff_;
;;;790    temp_SL*=Kunet;
;;;791    temp_SL/=110000L;
;;;792    net_U=(signed short)temp_SL;
;;;793    #endif
;;;794    
;;;795    #ifdef UKU_3U
;;;796    // 
;;;797    temp_SL=(signed long)net_buff_;
;;;798    temp_SL*=Kunet;
;;;799    temp_SL/=36000L;
;;;800    net_U=(signed short)temp_SL;
;;;801    #endif
;;;802    
;;;803    #ifdef UKU_6U
;;;804    // 
;;;805    
;;;806    if((AUSW_MAIN%10)||(AUSW_MAIN==2400)||(AUSW_MAIN==4800)||(AUSW_MAIN==6000))
;;;807    	{
;;;808    
;;;809    	if(bps[11]._device==dNET_METR)
;;;810    		{
;;;811    		net_metr_buff_[0]=((signed short)bps[11]._buff[0])+(((signed short)bps[11]._buff[1])<<8);
;;;812    		net_metr_buff_[1]=((signed short)bps[11]._buff[2])+(((signed short)bps[11]._buff[3])<<8);
;;;813    		net_metr_buff_[2]=((signed short)bps[11]._buff[4])+(((signed short)bps[11]._buff[5])<<8);
;;;814    
;;;815    		temp_SL=(signed long)net_metr_buff_[0];
;;;816    		temp_SL*=KunetA;
;;;817    		temp_SL/=6000L;
;;;818    		net_Ua=(signed short)temp_SL;
;;;819    	
;;;820    		temp_SL=(signed long)net_metr_buff_[1];
;;;821    		temp_SL*=KunetB;
;;;822    		temp_SL/=6000L;
;;;823    		net_Ub=(signed short)temp_SL;
;;;824    	
;;;825    		temp_SL=(signed long)net_metr_buff_[2];
;;;826    		temp_SL*=KunetC;
;;;827    		temp_SL/=6000L;
;;;828    		net_Uc=(signed short)temp_SL;
;;;829    		}
;;;830    	else
;;;831    		{
;;;832    		temp_SL=(signed long)net_buff_;
;;;833    		temp_SL*=KunetA;
;;;834    		temp_SL/=110000L;
;;;835    		net_Ua=(signed short)temp_SL;
;;;836    	
;;;837    		temp_SL=(signed long)adc_buff_[3];
;;;838    		temp_SL*=KunetB;
;;;839    		temp_SL/=6000L;
;;;840    		net_Ub=(signed short)temp_SL;
;;;841    	
;;;842    		temp_SL=(signed long)adc_buff_[10];
;;;843    		temp_SL*=KunetC;
;;;844    		temp_SL/=6000L;
;;;845    		net_Uc=(signed short)temp_SL;
;;;846    		}
;;;847    
;;;848    	net_U=net_Ua;
;;;849    	if(net_Ub<net_U)net_U=net_Ub;
;;;850    	if(net_Uc<net_U)net_U=net_Uc;
;;;851    	}
;;;852    else 
;;;853    	{
;;;854    	temp_SL=(signed long)net_buff_;
;;;855    	temp_SL*=Kunet;
;;;856    	temp_SL/=110000L;
;;;857    	net_U=(signed short)temp_SL;
;;;858    	}
;;;859    
;;;860    
;;;861    
;;;862    
;;;863    #endif
;;;864    
;;;865    #ifdef UKU_GLONASS
;;;866    // 
;;;867    temp_SL=(signed long)net_buff_;
;;;868    temp_SL*=Kunet;
;;;869    temp_SL/=110000L;
;;;870    net_U=(signed short)temp_SL;
;;;871    #endif
;;;872    
;;;873    #ifdef UKU_KONTUR
;;;874    // 
;;;875    temp_SL=(signed long)net_buff_;
;;;876    temp_SL*=Kunet;
;;;877    temp_SL/=110000L;
;;;878    net_U=(signed short)temp_SL;
;;;879    #endif
;;;880    
;;;881    
;;;882    #ifdef UKU_220_V2
;;;883    // 
;;;884    
;;;885    if(AUSW_MAIN==22033)
;;;886    	{
;;;887    	temp_SL=(signed long)net_buff_;
;;;888    	temp_SL*=KunetA;
;;;889    	temp_SL/=6000L;
;;;890    	net_Ua=(signed short)temp_SL;
;;;891    
;;;892    	temp_SL=(signed long)adc_buff_[3];
;;;893    	temp_SL*=KunetB;
;;;894    	temp_SL/=6000L;
;;;895    	net_Ub=(signed short)temp_SL;
;;;896    
;;;897    	temp_SL=(signed long)adc_buff_[10];
;;;898    	temp_SL*=KunetC;
;;;899    	temp_SL/=6000L;
;;;900    	net_Uc=(signed short)temp_SL;
;;;901    
;;;902    	net_U=net_Ua;
;;;903    	if(net_Ub<net_U)net_U=net_Ub;
;;;904    	if(net_Uc<net_U)net_U=net_Uc;
;;;905    	}
;;;906    else
;;;907    	{
;;;908    	temp_SL=(signed long)net_buff_;
;;;909    	temp_SL*=Kunet;
;;;910    	temp_SL/=5000L;
;;;911    	net_U=(signed short)temp_SL;
;;;912    	}
;;;913    #endif
;;;914    
;;;915    
;;;916    #ifdef UKU_220
;;;917    // 
;;;918    
;;;919    if(AUSW_MAIN==22035)
;;;920    	{
;;;921    	temp_SL=(signed long)net_buff_;
;;;922    	temp_SL*=KunetA;
;;;923    	temp_SL/=6000L;
;;;924    	net_Ua=(signed short)temp_SL;
;;;925    
;;;926    	temp_SL=(signed long)adc_buff_[3];
;;;927    	temp_SL*=KunetB;
;;;928    	temp_SL/=6000L;
;;;929    	net_Ub=(signed short)temp_SL;
;;;930    
;;;931    	temp_SL=(signed long)adc_buff_[10];
;;;932    	temp_SL*=KunetC;
;;;933    	temp_SL/=6000L;
;;;934    	net_Uc=(signed short)temp_SL;
;;;935    
;;;936    	net_U=net_Ua;
;;;937    	if(net_Ub<net_U)net_U=net_Ub;
;;;938    	if(net_Uc<net_U)net_U=net_Uc;
;;;939    	}
;;;940    else
;;;941    	{
;;;942    	temp_SL=(signed long)net_buff_;
;;;943    	temp_SL*=Kunet;
;;;944    	#ifdef _ACDC_
;;;945    	temp_SL/=500L;
;;;946    	#else
;;;947    	temp_SL/=5000L;
;;;948    	#endif
;;;949    	net_U=(signed short)temp_SL;
;;;950    	
;;;951    	}
;;;952    #endif
;;;953    
;;;954    #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;955    // 
;;;956    
;;;957    
;;;958    	if(bps[11]._device==dNET_METR)
000bf6  488d              LDR      r0,|L1.3628|
;;;959    		{
;;;960    		net_metr_buff_[0]=((signed short)bps[11]._buff[0])+(((signed short)bps[11]._buff[1])<<8);
;;;961    		net_metr_buff_[1]=((signed short)bps[11]._buff[2])+(((signed short)bps[11]._buff[3])<<8);
;;;962    		net_metr_buff_[2]=((signed short)bps[11]._buff[4])+(((signed short)bps[11]._buff[5])<<8);
;;;963    
;;;964    		temp_SL=(signed long)net_metr_buff_[2];
;;;965    		temp_SL*=KunetA;
000bf8  498d              LDR      r1,|L1.3632|
;;;966    		temp_SL/=6000L;
;;;967    		net_Ua=(signed short)temp_SL;
;;;968    	
;;;969    		temp_SL=(signed long)net_metr_buff_[1];
;;;970    		temp_SL*=KunetB;
000bfa  4a8f              LDR      r2,|L1.3640|
000bfc  f89003f4          LDRB     r0,[r0,#0x3f4]        ;958  ; bps
000c00  9002              STR      r0,[sp,#8]            ;965
;;;971    		temp_SL/=6000L;
;;;972    		net_Ub=(signed short)temp_SL;
;;;973    	
;;;974    		temp_SL=(signed long)net_metr_buff_[0];
;;;975    		temp_SL*=KunetC;
000c02  4b8e              LDR      r3,|L1.3644|
000c04  f9b1b000          LDRSH    r11,[r1,#0]           ;965
000c08  f9b21000          LDRSH    r1,[r2,#0]            ;970
000c0c  9101              STR      r1,[sp,#4]
000c0e  f8df8224          LDR      r8,|L1.3636|
000c12  f9b3a000          LDRSH    r10,[r3,#0]
000c16  f8dfc228          LDR      r12,|L1.3648|
;;;976    		temp_SL/=6000L;
;;;977    		net_Uc=(signed short)temp_SL;
000c1a  4c8a              LDR      r4,|L1.3652|
;;;978    
;;;979    		net_F3=((signed short)bps[11]._buff[6])+(((signed short)bps[11]._buff[7])<<8);
;;;980    
;;;981    		net_U=net_Ua;
;;;982    		if(net_Ub<net_U)net_U=net_Ub;
;;;983    		if(net_Uc<net_U)net_U=net_Uc;
;;;984    		}
;;;985    	  else if(AUSW_MAIN==22033)
;;;986    	{
;;;987    	temp_SL=(signed long)net_buff_;
000c1c  4e77              LDR      r6,|L1.3580|
000c1e  f2456511          MOV      r5,#0x5611            ;985
;;;988    	temp_SL*=KunetA;
;;;989    	temp_SL/=4000L;
;;;990    	net_Ua=(signed short)temp_SL;
;;;991    
;;;992    	temp_SL=(signed long)adc_buff_[3];
;;;993    	temp_SL*=KunetB;
;;;994    	temp_SL/=6000L;
;;;995    	net_Ub=(signed short)temp_SL;
;;;996    
;;;997    	temp_SL=(signed long)adc_buff_[10];
;;;998    	temp_SL*=KunetC;
;;;999    	temp_SL/=6000L;
;;;1000   	net_Uc=(signed short)temp_SL;
;;;1001   
;;;1002   	net_U=net_Ua;
;;;1003   	if(net_Ub<net_U)net_U=net_Ub;
;;;1004   	if(net_Uc<net_U)net_U=net_Uc;
;;;1005   	}
;;;1006   else if((AUSW_MAIN==22063)||(AUSW_MAIN==22023)||(AUSW_MAIN==22043)||(AUSW_MAIN==22018))
;;;1007   	{
;;;1008   	temp_SL=(signed long)net_buff_;
;;;1009   	temp_SL*=KunetA;
;;;1010   	temp_SL/=40000L;
;;;1011   	net_Ua=(signed short)temp_SL;
;;;1012   
;;;1013   	temp_SL=(signed long)adc_buff_[3];
;;;1014   	temp_SL*=KunetB;
;;;1015   	temp_SL/=6000L;
;;;1016   	net_Ub=(signed short)temp_SL;
;;;1017   
;;;1018   	temp_SL=(signed long)adc_buff_[10];
;;;1019   	temp_SL*=KunetC;
;;;1020   	temp_SL/=6000L;
;;;1021   	net_Uc=(signed short)temp_SL;
;;;1022   
;;;1023   	net_U=net_Ua;
;;;1024   	if(net_Ub<net_U)net_U=net_Ub;
;;;1025   	if(net_Uc<net_U)net_U=net_Uc;
;;;1026   	}
;;;1027   else	if((AUSW_MAIN==22010)||(AUSW_MAIN==22011) )
;;;1028   	{
;;;1029   	temp_SL=(signed long)net_buff_;
;;;1030   	temp_SL*=Kunet;
;;;1031   	temp_SL/=35000L;
;;;1032   	net_U=(signed short)temp_SL;
;;;1033   	
;;;1034   	}
;;;1035   else
;;;1036   	{
;;;1037   	temp_SL=(signed long)net_buff_;
;;;1038   	temp_SL*=Kunet;
;;;1039   	#ifdef _ACDC_
;;;1040   	temp_SL/=500L;
000c22  f44f77fa          MOV      r7,#0x1f4
000c26  2807              CMP      r0,#7                 ;958
000c28  d037              BEQ      |L1.3226|
000c2a  4631              MOV      r1,r6                 ;987
000c2c  4b87              LDR      r3,|L1.3660|
000c2e  8d0a              LDRH     r2,[r1,#0x28]         ;987
000c30  497f              LDR      r1,|L1.3632|
000c32  f8df9204          LDR      r9,|L1.3640|
000c36  f2417a70          MOV      r10,#0x1770           ;966
000c3a  f9b11000          LDRSH    r1,[r1,#0]            ;965
000c3e  f9b99000          LDRSH    r9,[r9,#0]            ;970
000c42  434a              MULS     r2,r1,r2              ;988
000c44  f9b31006          LDRSH    r1,[r3,#6]            ;992
000c48  f9b33014          LDRSH    r3,[r3,#0x14]         ;997
000c4c  fb01f109          MUL      r1,r1,r9              ;993
000c50  f8df91e8          LDR      r9,|L1.3644|
000c54  fb91f1fa          SDIV     r1,r1,r10             ;994
000c58  f9b99000          LDRSH    r9,[r9,#0]            ;975
000c5c  487a              LDR      r0,|L1.3656|
000c5e  fb03f309          MUL      r3,r3,r9              ;998
000c62  fb93f3fa          SDIV     r3,r3,r10             ;999
000c66  8800              LDRH     r0,[r0,#0]            ;985  ; AUSW_MAIN
000c68  b209              SXTH     r1,r1                 ;995
000c6a  b21b              SXTH     r3,r3                 ;1000
000c6c  42a8              CMP      r0,r5                 ;985
000c6e  d157              BNE      |L1.3360|
000c70  f44f607a          MOV      r0,#0xfa0             ;989
000c74  fb92f0f0          SDIV     r0,r2,r0              ;989
000c78  b200              SXTH     r0,r0                 ;990
000c7a  f8a80000          STRH     r0,[r8,#0]            ;990
000c7e  f8ac1000          STRH     r1,[r12,#0]           ;995
000c82  8023              STRH     r3,[r4,#0]            ;1000
000c84  4a64              LDR      r2,|L1.3608|
000c86  8010              STRH     r0,[r2,#0]            ;1002
000c88  4281              CMP      r1,r0                 ;1003
000c8a  da00              BGE      |L1.3214|
000c8c  8011              STRH     r1,[r2,#0]            ;1003
                  |L1.3214|
000c8e  f9b20000          LDRSH    r0,[r2,#0]            ;1004  ; net_U
000c92  4283              CMP      r3,r0                 ;1004
000c94  da7e              BGE      |L1.3476|
000c96  8013              STRH     r3,[r2,#0]            ;1004
000c98  e07c              B        |L1.3476|
                  |L1.3226|
000c9a  486d              LDR      r0,|L1.3664|
000c9c  4b57              LDR      r3,|L1.3580|
000c9e  7801              LDRB     r1,[r0,#0]            ;960  ; bps
000ca0  7842              LDRB     r2,[r0,#1]            ;960  ; bps
000ca2  f103038c          ADD      r3,r3,#0x8c           ;960
000ca6  eb012102          ADD      r1,r1,r2,LSL #8       ;960
000caa  fa1ff981          UXTH     r9,r1                 ;960
000cae  f8a39000          STRH     r9,[r3,#0]            ;960
000cb2  7881              LDRB     r1,[r0,#2]            ;961  ; bps
000cb4  78c2              LDRB     r2,[r0,#3]            ;961  ; bps
000cb6  eb012102          ADD      r1,r1,r2,LSL #8       ;961
000cba  b289              UXTH     r1,r1                 ;961
000cbc  8059              STRH     r1,[r3,#2]            ;961
000cbe  7902              LDRB     r2,[r0,#4]            ;962  ; bps
000cc0  f890e005          LDRB     lr,[r0,#5]            ;962  ; bps
000cc4  eb02220e          ADD      r2,r2,lr,LSL #8       ;962
000cc8  b292              UXTH     r2,r2                 ;962
000cca  809a              STRH     r2,[r3,#4]            ;962
000ccc  fb02f20b          MUL      r2,r2,r11             ;965
000cd0  f2417370          MOV      r3,#0x1770            ;966
000cd4  fb92f2f3          SDIV     r2,r2,r3              ;966
000cd8  fa0ffb82          SXTH     r11,r2                ;967
000cdc  f8a8b000          STRH     r11,[r8,#0]           ;967
000ce0  9a01              LDR      r2,[sp,#4]            ;970
000ce2  fb01f102          MUL      r1,r1,r2              ;970
000ce6  fb91f1f3          SDIV     r1,r1,r3              ;971
000cea  b209              SXTH     r1,r1                 ;972
000cec  f8ac1000          STRH     r1,[r12,#0]           ;972
000cf0  fb09f90a          MUL      r9,r9,r10             ;975
000cf4  fb99f2f3          SDIV     r2,r9,r3              ;976
000cf8  b212              SXTH     r2,r2                 ;977
000cfa  8022              STRH     r2,[r4,#0]            ;977
000cfc  7983              LDRB     r3,[r0,#6]            ;979  ; bps
000cfe  79c0              LDRB     r0,[r0,#7]            ;979  ; bps
000d00  eb032300          ADD      r3,r3,r0,LSL #8       ;979
000d04  4853              LDR      r0,|L1.3668|
000d06  8003              STRH     r3,[r0,#0]            ;979
000d08  4843              LDR      r0,|L1.3608|
000d0a  f8a0b000          STRH     r11,[r0,#0]           ;981
000d0e  4559              CMP      r1,r11                ;982
000d10  da00              BGE      |L1.3348|
000d12  8001              STRH     r1,[r0,#0]            ;982
                  |L1.3348|
000d14  f9b01000          LDRSH    r1,[r0,#0]            ;983  ; net_U
000d18  428a              CMP      r2,r1                 ;983
000d1a  da3b              BGE      |L1.3476|
000d1c  8002              STRH     r2,[r0,#0]            ;983
000d1e  e039              B        |L1.3476|
                  |L1.3360|
000d20  f5a049ac          SUB      r9,r0,#0x5600         ;1006
000d24  f1b9092f          SUBS     r9,r9,#0x2f           ;1006
000d28  d008              BEQ      |L1.3388|
000d2a  f1190928          ADDS     r9,r9,#0x28           ;1006
000d2e  d005              BEQ      |L1.3388|
000d30  f1b90914          SUBS     r9,r9,#0x14           ;1006
000d34  d002              BEQ      |L1.3388|
000d36  f1190919          ADDS     r9,r9,#0x19           ;1006
000d3a  d114              BNE      |L1.3430|
                  |L1.3388|
000d3c  f6494040          MOV      r0,#0x9c40            ;1010
000d40  fb92f0f0          SDIV     r0,r2,r0              ;1010
000d44  b200              SXTH     r0,r0                 ;1011
000d46  f8a80000          STRH     r0,[r8,#0]            ;1011
000d4a  f8ac1000          STRH     r1,[r12,#0]           ;1016
000d4e  8023              STRH     r3,[r4,#0]            ;1021
000d50  4a31              LDR      r2,|L1.3608|
000d52  8010              STRH     r0,[r2,#0]            ;1023
000d54  4281              CMP      r1,r0                 ;1024
000d56  da00              BGE      |L1.3418|
000d58  8011              STRH     r1,[r2,#0]            ;1024
                  |L1.3418|
000d5a  f9b20000          LDRSH    r0,[r2,#0]            ;1025  ; net_U
000d5e  4283              CMP      r3,r0                 ;1025
000d60  da18              BGE      |L1.3476|
000d62  8013              STRH     r3,[r2,#0]            ;1025
000d64  e016              B        |L1.3476|
                  |L1.3430|
000d66  493c              LDR      r1,|L1.3672|
000d68  f5a043aa          SUB      r3,r0,#0x5500         ;1027
000d6c  f9b12000          LDRSH    r2,[r1,#0]            ;1030
000d70  4922              LDR      r1,|L1.3580|
000d72  8d09              LDRH     r1,[r1,#0x28]         ;987
000d74  4351              MULS     r1,r2,r1              ;1030
000d76  3bfa              SUBS     r3,r3,#0xfa           ;1027
000d78  d001              BEQ      |L1.3454|
000d7a  1e5a              SUBS     r2,r3,#1              ;1027
000d7c  d106              BNE      |L1.3468|
                  |L1.3454|
000d7e  f64800b8          MOV      r0,#0x88b8            ;1031
000d82  fb91f0f0          SDIV     r0,r1,r0              ;1031
000d86  4924              LDR      r1,|L1.3608|
000d88  8008              STRH     r0,[r1,#0]            ;1032
000d8a  e003              B        |L1.3476|
                  |L1.3468|
000d8c  fb91f0f7          SDIV     r0,r1,r7
;;;1041   	#else
;;;1042   	temp_SL/=5000L;
;;;1043   	#endif
;;;1044   	net_U=(signed short)temp_SL;
000d90  4921              LDR      r1,|L1.3608|
000d92  8008              STRH     r0,[r1,#0]
                  |L1.3476|
;;;1045   	
;;;1046   	}
;;;1047   if(bps[11]._device!=dNET_METR) net_F3=net_F;
000d94  9802              LDR      r0,[sp,#8]
000d96  2807              CMP      r0,#7
000d98  d003              BEQ      |L1.3490|
000d9a  4830              LDR      r0,|L1.3676|
000d9c  8801              LDRH     r1,[r0,#0]  ; net_F
000d9e  482d              LDR      r0,|L1.3668|
000da0  8001              STRH     r1,[r0,#0]
                  |L1.3490|
;;;1048   #endif
;;;1049   
;;;1050   #ifdef UKU_TELECORE2015
;;;1051   // 
;;;1052   temp_SL=(signed long)net_buff_;
;;;1053   temp_SL*=Kunet;
;;;1054   temp_SL/=110000L;
;;;1055   net_U=(signed short)temp_SL;
;;;1056   #endif
;;;1057   
;;;1058   // 
;;;1059   temp_SL=(signed long)adc_buff_[0];
000da2  f8df80a8          LDR      r8,|L1.3660|
000da6  f9b82000          LDRSH    r2,[r8,#0]  ; adc_buff_
;;;1060   temp_SL*=Kubat[0];
000daa  492d              LDR      r1,|L1.3680|
000dac  f9b10000          LDRSH    r0,[r1,#0]  ; Kubat
000db0  4350              MULS     r0,r2,r0
;;;1061   temp_SL/=2000L;
000db2  f44f69fa          MOV      r9,#0x7d0
000db6  fb90f0f9          SDIV     r0,r0,r9
;;;1062   bat[0]._Ub=(signed short)temp_SL;
000dba  4c13              LDR      r4,|L1.3592|
000dbc  8060              STRH     r0,[r4,#2]
;;;1063   
;;;1064   #ifdef UKU_220
;;;1065   // 
;;;1066   temp_SL=(signed long)adc_buff_[0];
;;;1067   temp_SL*=Kubat[0];
;;;1068   temp_SL/=400L;
;;;1069   bat[0]._Ub=(signed short)temp_SL;
;;;1070   #endif
;;;1071   
;;;1072   #ifdef UKU_220_V2
;;;1073   // 
;;;1074   temp_SL=(signed long)adc_buff_[0];
;;;1075   temp_SL*=Kubat[0];
;;;1076   temp_SL/=400L;
;;;1077   bat[0]._Ub=(signed short)temp_SL;
;;;1078   #endif
;;;1079   
;;;1080   temp_SL=(signed long)adc_buff_[4];
000dbe  f9b82008          LDRSH    r2,[r8,#8]  ; adc_buff_
;;;1081   temp_SL*=Kubatm[0];
000dc2  4b28              LDR      r3,|L1.3684|
000dc4  f9b30000          LDRSH    r0,[r3,#0]  ; Kubatm
000dc8  fb00f002          MUL      r0,r0,r2
;;;1082   temp_SL/=700L;
000dcc  f44f722f          MOV      r2,#0x2bc
000dd0  fb90f0f2          SDIV     r0,r0,r2
;;;1083   bat[0]._Ubm=(signed short)temp_SL;
000dd4  80a0              STRH     r0,[r4,#4]
;;;1084   
;;;1085   #ifdef UKU_KONTUR
;;;1086   temp_SL=(signed long)adc_buff_[4];
;;;1087   temp_SL*=Kubatm[0];
;;;1088   temp_SL/=2000L;
;;;1089   bat[0]._Ubm=(signed short)temp_SL;
;;;1090   #endif
;;;1091   
;;;1092   temp_SL=(signed long)adc_buff_[12];
000dd6  f9b8c018          LDRSH    r12,[r8,#0x18]  ; adc_buff_
;;;1093   temp_SL*=Kubat[1];
000dda  f9b10002          LDRSH    r0,[r1,#2]  ; Kubat
000dde  fb00f00c          MUL      r0,r0,r12
;;;1094   temp_SL/=2000L;
000de2  fb90f0f9          SDIV     r0,r0,r9
;;;1095   bat[1]._Ub=(signed short)temp_SL;
000de6  e03f              B        |L1.3688|
                  |L1.3560|
                          DCD      mess_data
                  |L1.3564|
                          DCD      USIGN
                  |L1.3568|
                          DCD      load_U
                  |L1.3572|
                          DCD      load_I
                  |L1.3576|
                          DCD      bat_ips
                  |L1.3580|
                          DCD      ||area_number.21||
                  |L1.3584|
                          DCD      Kibat0
                  |L1.3588|
                          DCD      ad7705_buff_
                  |L1.3592|
                          DCD      bat
                  |L1.3596|
                          DCD      IZMAX
                  |L1.3600|
                          DCD      ADR_KI0BAT
                  |L1.3604|
                          DCD      bat_u_old_cnt
                  |L1.3608|
                          DCD      net_U
                  |L1.3612|
                          DCD      UMN
                  |L1.3616|
                          DCD      unet_drv_cnt
                  |L1.3620|
                          DCD      net_Ustore
                  |L1.3624|
                          DCD      main_1Hz_cnt
                  |L1.3628|
                          DCD      bps
                  |L1.3632|
                          DCD      KunetA
                  |L1.3636|
                          DCD      net_Ua
                  |L1.3640|
                          DCD      KunetB
                  |L1.3644|
                          DCD      KunetC
                  |L1.3648|
                          DCD      net_Ub
                  |L1.3652|
                          DCD      net_Uc
                  |L1.3656|
                          DCD      AUSW_MAIN
                  |L1.3660|
                          DCD      ||.bss||+0x400
                  |L1.3664|
                          DCD      bps+0x3fa
                  |L1.3668|
                          DCD      net_F3
                  |L1.3672|
                          DCD      Kunet
                  |L1.3676|
                          DCD      net_F
                  |L1.3680|
                          DCD      Kubat
                  |L1.3684|
                          DCD      Kubatm
                  |L1.3688|
000e68  f8a4004e          STRH     r0,[r4,#0x4e]
;;;1096   
;;;1097   #ifdef UKU_220
;;;1098   temp_SL=(signed long)adc_buff_[12];
;;;1099   temp_SL*=Kubat[1];
;;;1100   temp_SL/=400L;
;;;1101   bat[1]._Ub=(signed short)temp_SL;
;;;1102   #endif
;;;1103   
;;;1104   #ifdef UKU_220_V2
;;;1105   temp_SL=(signed long)adc_buff_[12];
;;;1106   temp_SL*=Kubat[1];
;;;1107   temp_SL/=400L;
;;;1108   bat[1]._Ub=(signed short)temp_SL;
;;;1109   #endif
;;;1110   
;;;1111   temp_SL=(signed long)adc_buff_[1];
000e6c  f9b81002          LDRSH    r1,[r8,#2]  ; adc_buff_
;;;1112   temp_SL*=Kubatm[1];
000e70  f9b30002          LDRSH    r0,[r3,#2]  ; Kubatm
000e74  fb00f001          MUL      r0,r0,r1
;;;1113   temp_SL/=700L;
000e78  fb90f0f2          SDIV     r0,r0,r2
;;;1114   bat[1]._Ubm=(signed short)temp_SL;
000e7c  f8a40050          STRH     r0,[r4,#0x50]
;;;1115   #ifdef UKU_KONTUR
;;;1116   temp_SL=(signed long)adc_buff_[1];
;;;1117   temp_SL*=Kubatm[1];
;;;1118   temp_SL/=2000L;
;;;1119   bat[1]._Ubm=(signed short)temp_SL;
;;;1120   #endif
;;;1121   
;;;1122   #ifdef UKU_TELECORE2015
;;;1123   temp_SL=(signed long)adc_buff_[2];
;;;1124   temp_SL*=Kubat[0];
;;;1125   temp_SL/=2000L;
;;;1126   bat[0]._Ub=(signed short)temp_SL;
;;;1127   #endif
;;;1128   
;;;1129   /*
;;;1130   // 
;;;1131   if(!mess_find_unvol(MESS2MATEMAT))
;;;1132   	{
;;;1133   	temp_SL=(signed long)ad7705_buff_[0];
;;;1134   	temp_SL-=(signed long)Kibat0[0];
;;;1135   	temp_SL*=(signed long)Kibat1[0];
;;;1136   	if((AUSW_MAIN==24120)||(AUSW_MAIN==24210))temp_SL/=300L;
;;;1137   	else temp_SL/=1000L;
;;;1138   	bat[0]._Ib=(signed short)temp_SL;
;;;1139   
;;;1140   	temp_SL=(signed long)ad7705_buff_[1];
;;;1141   	temp_SL-=(signed long)Kibat0[1];
;;;1142   	temp_SL*=(signed long)Kibat1[1];
;;;1143   	if((AUSW_MAIN==24120)||(AUSW_MAIN==24210))temp_SL/=300L;
;;;1144   	else temp_SL/=1000L;
;;;1145   	bat[1]._Ib=(signed short)temp_SL;
;;;1146   	}
;;;1147   */
;;;1148   
;;;1149   
;;;1150   // 
;;;1151   if(!mess_find_unvol(MESS2MATEMAT))
000e80  f04f00dc          MOV      r0,#0xdc
000e84  f7fffffe          BL       mess_find_unvol
;;;1152   	{
;;;1153   	temp_SL=(signed long)ad7705_buff_[0];
;;;1154   	temp_SL-=(signed long)Kibat0[0];
;;;1155   	temp_SL*=(signed long)Kibat1[0];
;;;1156   	if((AUSW_MAIN==24120)||(AUSW_MAIN==24210))temp_SL/=300L;
;;;1157   	else if((AUSW_MAIN==22010)||(AUSW_MAIN==22035)||(AUSW_MAIN==22033))temp_SL/=2000L;
000e88  f2456c13          MOV      r12,#0x5613
000e8c  bbf0              CBNZ     r0,|L1.3852|
000e8e  f8dfa3f8          LDR      r10,|L1.4744|
000e92  f8ba0000          LDRH     r0,[r10,#0]           ;1153  ; ad7705_buff_
000e96  f8dfb3f4          LDR      r11,|L1.4748|
000e9a  f8bb1000          LDRH     r1,[r11,#0]           ;1154  ; Kibat0
000e9e  eba00001          SUB      r0,r0,r1              ;1154
000ea2  4afb              LDR      r2,|L1.4752|
000ea4  f9b21000          LDRSH    r1,[r2,#0]            ;1155  ; Kibat1
000ea8  fb01f100          MUL      r1,r1,r0              ;1155
000eac  48f9              LDR      r0,|L1.4756|
000eae  f6456338          MOV      r3,#0x5e38            ;1156
000eb2  8800              LDRH     r0,[r0,#0]            ;1156  ; AUSW_MAIN
000eb4  4298              CMP      r0,r3                 ;1156
000eb6  d004              BEQ      |L1.3778|
000eb8  f5a04ebc          SUB      lr,r0,#0x5e00         ;1156
000ebc  f1be0e92          SUBS     lr,lr,#0x92           ;1156
000ec0  d104              BNE      |L1.3788|
                  |L1.3778|
000ec2  f44f7e96          MOV      lr,#0x12c             ;1156
000ec6  fb91f1fe          SDIV     r1,r1,lr              ;1156
000eca  e00f              B        |L1.3820|
                  |L1.3788|
000ecc  f5a04ea8          SUB      lr,r0,#0x5400
000ed0  f5be7efd          SUBS     lr,lr,#0x1fa
000ed4  d003              BEQ      |L1.3806|
000ed6  4560              CMP      r0,r12
000ed8  d001              BEQ      |L1.3806|
000eda  42a8              CMP      r0,r5
000edc  d102              BNE      |L1.3812|
                  |L1.3806|
000ede  fb91f1f9          SDIV     r1,r1,r9
000ee2  e003              B        |L1.3820|
                  |L1.3812|
;;;1158   	else temp_SL/=1000L;
000ee4  f44f7e7a          MOV      lr,#0x3e8
000ee8  fb91f1fe          SDIV     r1,r1,lr
                  |L1.3820|
;;;1159   	#ifdef UKU_TELECORE2015
;;;1160   	temp_SL/=2L;
;;;1161   	//temp_SL=-temp_SL;
;;;1162   	#endif
;;;1163   	bat[0]._Ib=(signed short)temp_SL;
000eec  8121              STRH     r1,[r4,#8]
;;;1164   
;;;1165   	temp_SL=(signed long)ad7705_buff_[1];
000eee  f8ba1002          LDRH     r1,[r10,#2]  ; ad7705_buff_
;;;1166   	temp_SL-=(signed long)Kibat0[1];
000ef2  f8bba002          LDRH     r10,[r11,#2]  ; Kibat0
000ef6  eba10a0a          SUB      r10,r1,r10
;;;1167   	temp_SL*=(signed long)Kibat1[1];
000efa  f9b21002          LDRSH    r1,[r2,#2]  ; Kibat1
000efe  fb01f10a          MUL      r1,r1,r10
;;;1168   	if((AUSW_MAIN==24120)||(AUSW_MAIN==24210))temp_SL/=300L;
000f02  4298              CMP      r0,r3
000f04  d005              BEQ      |L1.3858|
000f06  f5a042bc          SUB      r2,r0,#0x5e00
000f0a  e000              B        |L1.3854|
                  |L1.3852|
000f0c  e017              B        |L1.3902|
                  |L1.3854|
000f0e  3a92              SUBS     r2,r2,#0x92
000f10  d104              BNE      |L1.3868|
                  |L1.3858|
000f12  f44f7096          MOV      r0,#0x12c
000f16  fb91f0f0          SDIV     r0,r1,r0
000f1a  e00e              B        |L1.3898|
                  |L1.3868|
;;;1169   	else if((AUSW_MAIN==22010)||(AUSW_MAIN==22035)||(AUSW_MAIN==22033))temp_SL/=2000L;
000f1c  f5a042aa          SUB      r2,r0,#0x5500
000f20  3afa              SUBS     r2,r2,#0xfa
000f22  d003              BEQ      |L1.3884|
000f24  4560              CMP      r0,r12
000f26  d001              BEQ      |L1.3884|
000f28  42a8              CMP      r0,r5
000f2a  d102              BNE      |L1.3890|
                  |L1.3884|
000f2c  fb91f0f9          SDIV     r0,r1,r9
000f30  e003              B        |L1.3898|
                  |L1.3890|
;;;1170   	else temp_SL/=1000L;
000f32  f44f707a          MOV      r0,#0x3e8
000f36  fb91f0f0          SDIV     r0,r1,r0
                  |L1.3898|
;;;1171   	bat[1]._Ib=(signed short)temp_SL;
000f3a  f8a40054          STRH     r0,[r4,#0x54]
                  |L1.3902|
;;;1172   	}
;;;1173   
;;;1174   
;;;1175   
;;;1176   
;;;1177   
;;;1178   // 
;;;1179   
;;;1180   #ifdef UKU_KONTUR
;;;1181   if((adc_buff_[6]>800)&&(adc_buff_[6]<3800))bat[0]._nd=0;
;;;1182   else bat[0]._nd=1;
;;;1183   temp_SL=(signed long)adc_buff_[6];
;;;1184   temp_SL*=Ktbat[0];
;;;1185   temp_SL/=20000L;
;;;1186   temp_SL-=273L;
;;;1187   bat[0]._Tb=(signed short)temp_SL;
;;;1188   #else
;;;1189   if((adc_buff_[6]>800)&&(adc_buff_[6]<3800))bat[0]._nd=0;
000f3e  f9b8000c          LDRSH    r0,[r8,#0xc]  ; adc_buff_
000f42  f64031b7          MOV      r1,#0xbb7
000f46  4682              MOV      r10,r0
000f48  f2a03021          SUB      r0,r0,#0x321
000f4c  2300              MOVS     r3,#0
;;;1190   else bat[0]._nd=1;
000f4e  f04f0b01          MOV      r11,#1
000f52  9000              STR      r0,[sp,#0]            ;1189
000f54  4288              CMP      r0,r1                 ;1189
000f56  d201              BCS      |L1.3932|
000f58  7323              STRB     r3,[r4,#0xc]          ;1189
000f5a  e001              B        |L1.3936|
                  |L1.3932|
000f5c  f884b00c          STRB     r11,[r4,#0xc]
                  |L1.3936|
;;;1191   temp_SL=(signed long)adc_buff_[6];
;;;1192   temp_SL*=Ktbat[0];
000f60  48cd              LDR      r0,|L1.4760|
000f62  f9b02000          LDRSH    r2,[r0,#0]  ; Ktbat
000f66  fb02f20a          MUL      r2,r2,r10
;;;1193   temp_SL/=20000L;
000f6a  f6446020          MOV      r0,#0x4e20
000f6e  fb92f2f0          SDIV     r2,r2,r0
;;;1194   temp_SL-=273L;
000f72  f2a21211          SUB      r2,r2,#0x111
;;;1195   bat[0]._Tb=(signed short)temp_SL;
000f76  8162              STRH     r2,[r4,#0xa]
;;;1196   #endif
;;;1197   
;;;1198   #ifdef UKU_KONTUR
;;;1199   if((adc_buff_[7]>800)&&(adc_buff_[7]<3800))bat[1]._nd=0;
;;;1200   else bat[1]._nd=1;
;;;1201   temp_SL=(signed long)adc_buff_[7];
;;;1202   temp_SL*=Ktbat[1];
;;;1203   temp_SL/=20000L;
;;;1204   temp_SL-=273L;
;;;1205   bat[1]._Tb=(signed short)temp_SL;
;;;1206   #else
;;;1207   if((adc_buff_[7]>800)&&(adc_buff_[7]<3800))bat[1]._nd=0;
000f78  f9b8200e          LDRSH    r2,[r8,#0xe]  ; adc_buff_
000f7c  f64031b7          MOV      r1,#0xbb7
000f80  f2a23e21          SUB      lr,r2,#0x321
000f84  458e              CMP      lr,r1
000f86  d202              BCS      |L1.3982|
000f88  f8843058          STRB     r3,[r4,#0x58]
000f8c  e001              B        |L1.3986|
                  |L1.3982|
;;;1208   else bat[1]._nd=1;
000f8e  f884b058          STRB     r11,[r4,#0x58]
                  |L1.3986|
;;;1209   temp_SL=(signed long)adc_buff_[7];
;;;1210   temp_SL*=Ktbat[1];
000f92  49c1              LDR      r1,|L1.4760|
000f94  f9b11002          LDRSH    r1,[r1,#2]  ; Ktbat
000f98  4351              MULS     r1,r2,r1
;;;1211   temp_SL/=20000L;
000f9a  f6446020          MOV      r0,#0x4e20
000f9e  fb91f0f0          SDIV     r0,r1,r0
;;;1212   temp_SL-=273L;
000fa2  f2a01011          SUB      r0,r0,#0x111
;;;1213   bat[1]._Tb=(signed short)temp_SL;
000fa6  49bd              LDR      r1,|L1.4764|
000fa8  f8a10056          STRH     r0,[r1,#0x56]
;;;1214   #endif
;;;1215   
;;;1216   #ifdef UKU_6U
;;;1217   
;;;1218   if(NUMMAKB==2)
;;;1219   	{
;;;1220   	if(makb[0]._cnt<5)
;;;1221   		{
;;;1222   		if(makb[0]._T_nd[0]==0)
;;;1223   			{
;;;1224   			bat[0]._Tb=makb[0]._T[0];
;;;1225   			bat[0]._nd=0;
;;;1226   			}
;;;1227   		}
;;;1228   
;;;1229   	if(makb[1]._cnt<5)
;;;1230   		{
;;;1231   		if(makb[1]._T_nd[0]==0)
;;;1232   			{
;;;1233   			bat[1]._Tb=makb[1]._T[0];
;;;1234   			bat[1]._nd=0;
;;;1235   			}
;;;1236   		}
;;;1237   
;;;1238   	}
;;;1239   else if(NUMMAKB==4)
;;;1240   	{
;;;1241   	signed short temp_t;
;;;1242   	temp_t=-20;
;;;1243   	if(makb[0]._cnt<5)
;;;1244   		{
;;;1245   		if(makb[0]._T_nd[0]==0)
;;;1246   			{
;;;1247   			temp_t=makb[0]._T[0];
;;;1248   			bat[0]._nd=0;
;;;1249   			}
;;;1250   		}
;;;1251   	if(makb[1]._cnt<5)
;;;1252   		{
;;;1253   		if(makb[1]._T_nd[0]==0)
;;;1254   			{
;;;1255   			if(temp_t<makb[1]._T[0])
;;;1256   				{
;;;1257   				bat[0]._nd=0;
;;;1258   				temp_t=makb[1]._T[0];
;;;1259   				}
;;;1260   			}
;;;1261   		}
;;;1262   	if(temp_t!=-20)bat[0]._Tb = temp_t;
;;;1263   
;;;1264    	temp_t=-20;
;;;1265   	if(makb[2]._cnt<5)
;;;1266   		{
;;;1267   		if(makb[2]._T_nd[0]==0)
;;;1268   			{
;;;1269   			temp_t=makb[2]._T[0];
;;;1270   			bat[1]._nd=0;
;;;1271   			}
;;;1272   		}
;;;1273   	if(makb[3]._cnt<5)
;;;1274   		{
;;;1275   		if(makb[3]._T_nd[0]==0)
;;;1276   			{
;;;1277   			if(temp_t<makb[3]._T[0])
;;;1278   				{
;;;1279   				bat[1]._nd=0;
;;;1280   				temp_t=makb[3]._T[0];
;;;1281   				}
;;;1282   			}
;;;1283   		}
;;;1284   	if(temp_t!=-20)bat[1]._Tb = temp_t;
;;;1285   	}
;;;1286   
;;;1287   #endif
;;;1288   
;;;1289   
;;;1290   // 
;;;1291   temp_SL=(signed long)adc_buff_[2];
000fac  f9b81004          LDRSH    r1,[r8,#4]  ; adc_buff_
;;;1292   temp_SL*=Kuload;
000fb0  48bb              LDR      r0,|L1.4768|
000fb2  f9b00000          LDRSH    r0,[r0,#0]  ; Kuload
000fb6  fb01f000          MUL      r0,r1,r0
;;;1293   temp_SL/=2000L;
000fba  f44f62fa          MOV      r2,#0x7d0
000fbe  fb90f0f2          SDIV     r0,r0,r2
;;;1294   load_U=(signed short)temp_SL;
000fc2  f8dfe2e0          LDR      lr,|L1.4772|
000fc6  f8ae0000          STRH     r0,[lr,#0]
;;;1295   
;;;1296   #ifdef UKU_220 
;;;1297   // 
;;;1298   temp_SL=(signed long)adc_buff_[2];
;;;1299   temp_SL*=Kuload;
;;;1300   temp_SL/=350L;
;;;1301   load_U=(signed short)temp_SL;
;;;1302   #endif
;;;1303   
;;;1304   #ifdef UKU_220_V2 
;;;1305   // 
;;;1306   temp_SL=(signed long)adc_buff_[2];
;;;1307   temp_SL*=Kuload;
;;;1308   temp_SL/=350L;
;;;1309   load_U=(signed short)temp_SL;
;;;1310   #endif
;;;1311   
;;;1312   #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;1313   // 
;;;1314   temp_SL=(signed long)adc_buff_[1];
000fca  f9b82002          LDRSH    r2,[r8,#2]  ; adc_buff_
;;;1315   temp_SL*=Kuout;
000fce  48b6              LDR      r0,|L1.4776|
000fd0  f9b00000          LDRSH    r0,[r0,#0]  ; Kuout
000fd4  fb02f200          MUL      r2,r2,r0
;;;1316   if(AUSW_MAIN==22010)temp_SL/=400L;
000fd8  48ae              LDR      r0,|L1.4756|
000fda  f24554fa          MOV      r4,#0x55fa
000fde  8800              LDRH     r0,[r0,#0]  ; AUSW_MAIN
000fe0  42a0              CMP      r0,r4
000fe2  d104              BNE      |L1.4078|
000fe4  f44f79c8          MOV      r9,#0x190
000fe8  fb92f2f9          SDIV     r2,r2,r9
000fec  e001              B        |L1.4082|
                  |L1.4078|
;;;1317   else temp_SL/=500L;
000fee  fb92f2f7          SDIV     r2,r2,r7
                  |L1.4082|
;;;1318   out_U=(signed short)temp_SL;
000ff2  fa0ff982          SXTH     r9,r2
000ff6  4aad              LDR      r2,|L1.4780|
000ff8  f8a29000          STRH     r9,[r2,#0]
;;;1319   load_U=out_U;
000ffc  f8ae9000          STRH     r9,[lr,#0]
;;;1320   
;;;1321   // 
;;;1322   temp_SL=(signed long)adc_buff_[2];
001000  46c6              MOV      lr,r8
;;;1323   temp_SL*=Kubps;
001002  4aab              LDR      r2,|L1.4784|
001004  f9b22000          LDRSH    r2,[r2,#0]  ; Kubps
001008  fb01f102          MUL      r1,r1,r2
;;;1324   if(AUSW_MAIN==22010)temp_SL/=400L;
00100c  d104              BNE      |L1.4120|
00100e  f44f72c8          MOV      r2,#0x190
001012  fb91f1f2          SDIV     r1,r1,r2
001016  e001              B        |L1.4124|
                  |L1.4120|
;;;1325   else temp_SL/=500L;
001018  fb91f1f7          SDIV     r1,r1,r7
                  |L1.4124|
;;;1326   bps_U=(signed short)temp_SL;
00101c  4aa5              LDR      r2,|L1.4788|
00101e  8011              STRH     r1,[r2,#0]
;;;1327   
;;;1328   //  
;;;1329   temp_SL=0;
001020  f04f0700          MOV      r7,#0
;;;1330   for (i=0;i<NUMIST;i++)
001024  4639              MOV      r1,r7
001026  4aa4              LDR      r2,|L1.4792|
001028  4ca4              LDR      r4,|L1.4796|
00102a  f9b22000          LDRSH    r2,[r2,#0]
00102e  e00b              B        |L1.4168|
                  |L1.4144|
;;;1331   	{
;;;1332   	temp_SL+=((signed long)bps[i]._Ii);
001030  ebc108c1          RSB      r8,r1,r1,LSL #3
001034  eb081801          ADD      r8,r8,r1,LSL #4
001038  eb040888          ADD      r8,r4,r8,LSL #2
00103c  f8d88024          LDR      r8,[r8,#0x24]
001040  4447              ADD      r7,r7,r8
001042  f1010101          ADD      r1,r1,#1              ;1330
001046  b2c9              UXTB     r1,r1                 ;1330
                  |L1.4168|
001048  4291              CMP      r1,r2                 ;1330
00104a  dbf1              BLT      |L1.4144|
;;;1333   	}
;;;1334   bps_I=(signed short)temp_SL;
00104c  499c              LDR      r1,|L1.4800|
00104e  800f              STRH     r7,[r1,#0]
;;;1335   
;;;1336   
;;;1337   #endif
;;;1338   
;;;1339   
;;;1340   #ifdef UKU_KONTUR
;;;1341   //   1(  )
;;;1342   if((adc_buff_[5]>800)&&(adc_buff_[5]<3800))ND_EXT[0]=0;
;;;1343   else ND_EXT[0]=1;
;;;1344   temp_SL=(signed long)adc_buff_[5];
;;;1345   temp_SL*=Ktext[0];
;;;1346   temp_SL/=20000L;
;;;1347   temp_SL-=273L;
;;;1348   t_ext[0]=(signed short)temp_SL;
;;;1349   #else 
;;;1350   //   1(  )
;;;1351   if((adc_buff_[5]>800)&&(adc_buff_[5]<3800))ND_EXT[0]=0;
001050  f9be800a          LDRSH    r8,[lr,#0xa]  ; adc_buff_
001054  f6403eb7          MOV      lr,#0xbb7
001058  f2a83121          SUB      r1,r8,#0x321
00105c  4f99              LDR      r7,|L1.4804|
00105e  4571              CMP      r1,lr
001060  d201              BCS      |L1.4198|
001062  603b              STR      r3,[r7,#0]  ; ND_EXT
001064  e001              B        |L1.4202|
                  |L1.4198|
;;;1352   else ND_EXT[0]=1;
001066  f8c7b000          STR      r11,[r7,#0]  ; ND_EXT
                  |L1.4202|
;;;1353   temp_SL=(signed long)adc_buff_[5];
;;;1354   temp_SL*=Ktext[0];
00106a  4997              LDR      r1,|L1.4808|
00106c  f9b11000          LDRSH    r1,[r1,#0]  ; Ktext
001070  fb01f808          MUL      r8,r1,r8
;;;1355   temp_SL/=20000L;
001074  f6446e20          MOV      lr,#0x4e20
001078  fb98f8fe          SDIV     r8,r8,lr
;;;1356   temp_SL-=273L;
00107c  f2a81811          SUB      r8,r8,#0x111
;;;1357   t_ext[0]=(signed short)temp_SL;
001080  f8dfe248          LDR      lr,|L1.4812|
001084  f8ae8000          STRH     r8,[lr,#0]
;;;1358   #endif
;;;1359   
;;;1360   #ifdef UKU_220
;;;1361   
;;;1362   //   2(  )
;;;1363   if((adc_buff_[3]>800)&&(adc_buff_[3]<3800))ND_EXT[1]=0;
;;;1364   else ND_EXT[1]=1;
;;;1365   temp_SL=(signed long)adc_buff_[3];
;;;1366   temp_SL*=Ktext[1];
;;;1367   temp_SL/=20000L;
;;;1368   temp_SL-=273L;
;;;1369   t_ext[1]=(signed short)temp_SL;
;;;1370   
;;;1371   //   3(  MSAN)
;;;1372   if((adc_buff_[10]>800)&&(adc_buff_[10]<3800))ND_EXT[2]=0;
;;;1373   else ND_EXT[2]=1;
;;;1374   temp_SL=(signed long)adc_buff_[10];
;;;1375   temp_SL*=Ktext[2];
;;;1376   temp_SL/=20000L;
;;;1377   temp_SL-=273L;
;;;1378   t_ext[2]=(signed short)temp_SL;
;;;1379   
;;;1380   #else
;;;1381   
;;;1382   
;;;1383   #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;1384   
;;;1385   //   
;;;1386   if((adc_buff_[6]>800)&&(adc_buff_[6]<3800))ND_EXT[0]=0;
001088  f8dd8000          LDR      r8,[sp,#0]
00108c  f6403eb7          MOV      lr,#0xbb7
001090  45f0              CMP      r8,lr
001092  d201              BCS      |L1.4248|
001094  603b              STR      r3,[r7,#0]  ; ND_EXT
001096  e001              B        |L1.4252|
                  |L1.4248|
;;;1387   else ND_EXT[0]=1;
001098  f8c7b000          STR      r11,[r7,#0]  ; ND_EXT
                  |L1.4252|
;;;1388   temp_SL=(signed long)adc_buff_[6];
;;;1389   temp_SL*=Ktext[0];
00109c  fb01f10a          MUL      r1,r1,r10
;;;1390   temp_SL/=20000L;
0010a0  f6446820          MOV      r8,#0x4e20
0010a4  fb91f1f8          SDIV     r1,r1,r8
;;;1391   temp_SL-=273L;
0010a8  f2a11111          SUB      r1,r1,#0x111
;;;1392   t_ext[0]=(signed short)temp_SL;
0010ac  f8df821c          LDR      r8,|L1.4812|
0010b0  f8a81000          STRH     r1,[r8,#0]
;;;1393   
;;;1394   #else
;;;1395   
;;;1396   
;;;1397   
;;;1398   //   2(  )
;;;1399   if((adc_buff_[10]>800)&&(adc_buff_[10]<3800))ND_EXT[1]=0;
;;;1400   else ND_EXT[1]=1;
;;;1401   temp_SL=(signed long)adc_buff_[10];
;;;1402   temp_SL*=Ktext[1];
;;;1403   temp_SL/=20000L;
;;;1404   temp_SL-=273L;
;;;1405   t_ext[1]=(signed short)temp_SL;
;;;1406   
;;;1407   //   3(  MSAN)
;;;1408   if((adc_buff_[3]>800)&&(adc_buff_[3]<3800))ND_EXT[2]=0;
;;;1409   else ND_EXT[2]=1;
;;;1410   temp_SL=(signed long)adc_buff_[3];
;;;1411   temp_SL*=Ktext[2];
;;;1412   temp_SL/=20000L;
;;;1413   temp_SL-=273L;
;;;1414   t_ext[2]=(signed short)temp_SL;
;;;1415   
;;;1416   #endif
;;;1417   #endif
;;;1418   
;;;1419   #ifdef UKU_220_V2
;;;1420   
;;;1421   //   2(  )
;;;1422   if((adc_buff_[3]>800)&&(adc_buff_[3]<3800))ND_EXT[1]=0;
;;;1423   else ND_EXT[1]=1;
;;;1424   temp_SL=(signed long)adc_buff_[3];
;;;1425   temp_SL*=Ktext[1];
;;;1426   temp_SL/=20000L;
;;;1427   temp_SL-=273L;
;;;1428   t_ext[1]=(signed short)temp_SL;
;;;1429   
;;;1430   //   3(  MSAN)
;;;1431   if((adc_buff_[10]>800)&&(adc_buff_[10]<3800))ND_EXT[2]=0;
;;;1432   else ND_EXT[2]=1;
;;;1433   temp_SL=(signed long)adc_buff_[10];
;;;1434   temp_SL*=Ktext[2];
;;;1435   temp_SL/=20000L;
;;;1436   temp_SL-=273L;
;;;1437   t_ext[2]=(signed short)temp_SL;
;;;1438   
;;;1439   #else
;;;1440   
;;;1441   #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;1442   // 
;;;1443   if(bps[8]._device==dIBAT_METR)
0010b4  f89412e0          LDRB     r1,[r4,#0x2e0]  ; bps
;;;1444   	{
;;;1445   	ibat_metr_buff_[0]=((signed long)bps[8]._buff[0])+(((signed long)bps[8]._buff[1])<<8);
;;;1446   	ibat_metr_buff_[1]=((signed long)bps[8]._buff[2])+(((signed long)bps[8]._buff[3])<<8);
;;;1447   	bIBAT_SMKLBR=((signed short)bps[8]._buff[4])+(((signed short)bps[8]._buff[5])<<8);
;;;1448   
;;;1449   	if(!bIBAT_SMKLBR)
;;;1450   		{
;;;1451   		signed long temp_SL;
;;;1452   		temp_SL=(signed long)ibat_metr_buff_[0];
;;;1453   		temp_SL-=(signed long)ibat_metr_buff_[1];
;;;1454   		temp_SL*=(signed long)Kibat1[0];
;;;1455   		if((AUSW_MAIN==22010)||(AUSW_MAIN==22011)||(AUSW_MAIN==22035)||(AUSW_MAIN==22033)||(AUSW_MAIN==22063)||(AUSW_MAIN==22023)||(AUSW_MAIN==22043))temp_SL/=2000L;
;;;1456   	
;;;1457   		Ib_ips_termokompensat =(signed short)temp_SL;
0010b8  f8df8214          LDR      r8,|L1.4816|
0010bc  2909              CMP      r1,#9                 ;1443
0010be  d140              BNE      |L1.4418|
0010c0  f89412e6          LDRB     r1,[r4,#0x2e6]        ;1445  ; bps
0010c4  f894a2e7          LDRB     r10,[r4,#0x2e7]       ;1445  ; bps
0010c8  f8dfe208          LDR      lr,|L1.4820|
0010cc  eb01210a          ADD      r1,r1,r10,LSL #8      ;1445
0010d0  f8ce1000          STR      r1,[lr,#0]            ;1445  ; ibat_metr_buff_
0010d4  f894a2e8          LDRB     r10,[r4,#0x2e8]       ;1446  ; bps
0010d8  f894b2e9          LDRB     r11,[r4,#0x2e9]       ;1446  ; bps
0010dc  eb0a2a0b          ADD      r10,r10,r11,LSL #8    ;1446
0010e0  f8cea004          STR      r10,[lr,#4]           ;1446  ; ibat_metr_buff_
0010e4  f894b2ea          LDRB     r11,[r4,#0x2ea]       ;1447  ; bps
0010e8  f894e2eb          LDRB     lr,[r4,#0x2eb]        ;1447  ; bps
0010ec  eb0b2b0e          ADD      r11,r11,lr,LSL #8     ;1447
0010f0  f8dfe1e4          LDR      lr,|L1.4824|
0010f4  fa0ffb8b          SXTH     r11,r11               ;1447
0010f8  f8aeb000          STRH     r11,[lr,#0]           ;1447
0010fc  f1bb0f00          CMP      r11,#0                ;1449
001100  d11f              BNE      |L1.4418|
001102  eba10a0a          SUB      r10,r1,r10            ;1453
001106  4962              LDR      r1,|L1.4752|
001108  f9b11000          LDRSH    r1,[r1,#0]            ;1454  ; Kibat1
00110c  fb01f10a          MUL      r1,r1,r10             ;1454
001110  f5a04aa8          SUB      r10,r0,#0x5400        ;1455
001114  f5ba7afd          SUBS     r10,r10,#0x1fa        ;1455
001118  d00d              BEQ      |L1.4406|
00111a  f1ba0a01          SUBS     r10,r10,#1            ;1455
00111e  d00a              BEQ      |L1.4406|
001120  4560              CMP      r0,r12                ;1455
001122  d008              BEQ      |L1.4406|
001124  42a8              CMP      r0,r5                 ;1455
001126  d006              BEQ      |L1.4406|
001128  f1ba0534          SUBS     r5,r10,#0x34          ;1455
00112c  d003              BEQ      |L1.4406|
00112e  3528              ADDS     r5,r5,#0x28           ;1455
001130  d001              BEQ      |L1.4406|
001132  3d14              SUBS     r5,r5,#0x14           ;1455
001134  d103              BNE      |L1.4414|
                  |L1.4406|
001136  f44f65fa          MOV      r5,#0x7d0             ;1455
00113a  fb91f1f5          SDIV     r1,r1,r5              ;1455
                  |L1.4414|
00113e  f8a81000          STRH     r1,[r8,#0]
                  |L1.4418|
;;;1458   		}
;;;1459   	}
;;;1460   
;;;1461   bat[0]._Ub=load_U;
001142  4d56              LDR      r5,|L1.4764|
001144  f8a59002          STRH     r9,[r5,#2]
;;;1462   if(AUSW_MAIN==22018) Ib_ips_termokompensat=bat[0]._Ib;
001148  f5a041ac          SUB      r1,r0,#0x5600
00114c  3902              SUBS     r1,#2
00114e  d103              BNE      |L1.4440|
001150  8928              LDRH     r0,[r5,#8]  ; bat
001152  f8a80000          STRH     r0,[r8,#0]
001156  e002              B        |L1.4446|
                  |L1.4440|
;;;1463   else bat[0]._Ib=Ib_ips_termokompensat;
001158  f8b80000          LDRH     r0,[r8,#0]  ; Ib_ips_termokompensat
00115c  8128              STRH     r0,[r5,#8]
                  |L1.4446|
;;;1464   
;;;1465   #endif
;;;1466   #endif
;;;1467   
;;;1468   
;;;1469   #ifdef UKU_TELECORE2015
;;;1470   
;;;1471   //   1
;;;1472   if((adc_buff_[7]>800)&&(adc_buff_[7]<3800))ND_EXT[0]=0;
;;;1473   else ND_EXT[0]=1;
;;;1474   temp_SL=(signed long)adc_buff_[7];
;;;1475   temp_SL*=Ktext[0];
;;;1476   temp_SL/=20000L;
;;;1477   temp_SL-=273L;
;;;1478   t_ext[0]=(signed short)temp_SL;
;;;1479   
;;;1480   
;;;1481   //   2
;;;1482   if((adc_buff_[6]>800)&&(adc_buff_[6]<3800))ND_EXT[1]=0;
;;;1483   else ND_EXT[1]=1;
;;;1484   temp_SL=(signed long)adc_buff_[6];
;;;1485   temp_SL*=Ktext[1];
;;;1486   temp_SL/=20000L;
;;;1487   temp_SL-=273L;
;;;1488   t_ext[1]=(signed short)temp_SL;
;;;1489   
;;;1490   #endif
;;;1491   
;;;1492   // 
;;;1493   temp_SL=(signed long)adc_buff_ext_[0];
00115e  495f              LDR      r1,|L1.4828|
001160  8808              LDRH     r0,[r1,#0]  ; adc_buff_ext_
;;;1494   temp_SL*=Kunet_ext[0];
001162  f8dfb17c          LDR      r11,|L1.4832|
001166  f9bbc000          LDRSH    r12,[r11,#0]  ; Kunet_ext
00116a  fb0cfc00          MUL      r12,r12,r0
;;;1495   temp_SL/=4000L;
00116e  f44f6a7a          MOV      r10,#0xfa0
001172  fb9cf0fa          SDIV     r0,r12,r10
;;;1496   Uvv[0]=(signed short)temp_SL;
001176  f8dfc16c          LDR      r12,|L1.4836|
00117a  b280              UXTH     r0,r0
00117c  f8ac0000          STRH     r0,[r12,#0]
;;;1497   if(Uvv[0]<100) Uvv0=Uvv[0];
001180  f8dfe164          LDR      lr,|L1.4840|
001184  2864              CMP      r0,#0x64
001186  d202              BCS      |L1.4494|
001188  f8ae0000          STRH     r0,[lr,#0]
00118c  e003              B        |L1.4502|
                  |L1.4494|
;;;1498   else Uvv0=net_U;
00118e  4857              LDR      r0,|L1.4844|
001190  8800              LDRH     r0,[r0,#0]  ; net_U
001192  f8ae0000          STRH     r0,[lr,#0]
                  |L1.4502|
;;;1499   
;;;1500   // 
;;;1501   temp_SL=(signed long)adc_buff_ext_[1];
001196  8849              LDRH     r1,[r1,#2]  ; adc_buff_ext_
;;;1502   temp_SL*=Kunet_ext[1];
001198  f9bb0002          LDRSH    r0,[r11,#2]  ; Kunet_ext
00119c  4348              MULS     r0,r1,r0
;;;1503   temp_SL/=4000L;
00119e  fb90f0fa          SDIV     r0,r0,r10
;;;1504   Uvv[1]=(signed short)temp_SL;
0011a2  f8ac0002          STRH     r0,[r12,#2]
;;;1505   
;;;1506   
;;;1507   //  
;;;1508   temp_SL=(signed long)eb2_data_short[0];
0011a6  4952              LDR      r1,|L1.4848|
0011a8  f9b10000          LDRSH    r0,[r1,#0]  ; eb2_data_short
;;;1509   temp_SL*=Kvv_eb2[0];
0011ac  f8dfc144          LDR      r12,|L1.4852|
0011b0  f9bca000          LDRSH    r10,[r12,#0]  ; Kvv_eb2
0011b4  fb0afa00          MUL      r10,r10,r0
;;;1510   temp_SL/=6000L;
0011b8  f2417070          MOV      r0,#0x1770
0011bc  fb9afbf0          SDIV     r11,r10,r0
;;;1511   Uvv_eb2[0]=(signed short)temp_SL;
0011c0  f8dfa134          LDR      r10,|L1.4856|
0011c4  f8aab000          STRH     r11,[r10,#0]
;;;1512   
;;;1513   temp_SL=(signed long)eb2_data_short[1];
0011c8  f9b1e002          LDRSH    lr,[r1,#2]  ; eb2_data_short
;;;1514   temp_SL*=Kvv_eb2[1];
0011cc  f9bcb002          LDRSH    r11,[r12,#2]  ; Kvv_eb2
0011d0  fb0bfb0e          MUL      r11,r11,lr
;;;1515   temp_SL/=6000L;
0011d4  fb9bfbf0          SDIV     r11,r11,r0
;;;1516   Uvv_eb2[1]=(signed short)temp_SL;
0011d8  f8aab002          STRH     r11,[r10,#2]
;;;1517   
;;;1518   temp_SL=(signed long)eb2_data_short[2];
0011dc  f9b1b004          LDRSH    r11,[r1,#4]  ; eb2_data_short
;;;1519   temp_SL*=Kvv_eb2[2];
0011e0  f9bcc004          LDRSH    r12,[r12,#4]  ; Kvv_eb2
0011e4  fb0cfc0b          MUL      r12,r12,r11
;;;1520   temp_SL/=6000L;
0011e8  fb9cfcf0          SDIV     r12,r12,r0
;;;1521   Uvv_eb2[2]=(signed short)temp_SL;
0011ec  f8aac004          STRH     r12,[r10,#4]
;;;1522   
;;;1523   //  
;;;1524   temp_SL=(signed long)eb2_data_short[3];
0011f0  f9b1a006          LDRSH    r10,[r1,#6]  ; eb2_data_short
;;;1525   temp_SL*=Kpes_eb2[0];
0011f4  f8dfc104          LDR      r12,|L1.4860|
0011f8  f9bcb000          LDRSH    r11,[r12,#0]  ; Kpes_eb2
0011fc  fb0bfb0a          MUL      r11,r11,r10
;;;1526   temp_SL/=6000L;
001200  fb9bfbf0          SDIV     r11,r11,r0
;;;1527   Upes_eb2[0]=(signed short)temp_SL;
001204  f8dfa0f8          LDR      r10,|L1.4864|
001208  f8aab000          STRH     r11,[r10,#0]
;;;1528   
;;;1529   temp_SL=(signed long)eb2_data_short[4];
00120c  f9b1e008          LDRSH    lr,[r1,#8]  ; eb2_data_short
;;;1530   temp_SL*=Kpes_eb2[1];
001210  f9bcb002          LDRSH    r11,[r12,#2]  ; Kpes_eb2
001214  fb0bfb0e          MUL      r11,r11,lr
;;;1531   temp_SL/=6000L;
001218  fb9bfbf0          SDIV     r11,r11,r0
;;;1532   Upes_eb2[1]=(signed short)temp_SL;
00121c  f8aab002          STRH     r11,[r10,#2]
;;;1533   
;;;1534   temp_SL=(signed long)eb2_data_short[5];
001220  f9b1100a          LDRSH    r1,[r1,#0xa]  ; eb2_data_short
;;;1535   temp_SL*=Kpes_eb2[2];
001224  f9bcc004          LDRSH    r12,[r12,#4]  ; Kpes_eb2
001228  fb0cfc01          MUL      r12,r12,r1
;;;1536   temp_SL/=6000L;
00122c  fb9cf0f0          SDIV     r0,r12,r0
;;;1537   Upes_eb2[2]=(signed short)temp_SL;
001230  f8aa0004          STRH     r0,[r10,#4]
;;;1538   
;;;1539   //  
;;;1540   
;;;1541   ibt._T[0]=t_ext[1]+273;
001234  4825              LDR      r0,|L1.4812|
001236  f8dfb0cc          LDR      r11,|L1.4868|
00123a  8841              LDRH     r1,[r0,#2]  ; t_ext
00123c  f2011111          ADD      r1,r1,#0x111
001240  fa0ffc81          SXTH     r12,r1
001244  f8abc000          STRH     r12,[r11,#0]
;;;1542   ibt._T[1]=t_ext[2]+273;
001248  8880              LDRH     r0,[r0,#4]  ; t_ext
00124a  f2001011          ADD      r0,r0,#0x111
00124e  fa0ffa80          SXTH     r10,r0
001252  f8aba002          STRH     r10,[r11,#2]
;;;1543   
;;;1544   ibt._nd[0]=ND_EXT[1];
001256  6878              LDR      r0,[r7,#4]  ; ND_EXT
001258  b2c1              UXTB     r1,r0
00125a  f88b1008          STRB     r1,[r11,#8]
;;;1545   ibt._nd[1]=ND_EXT[2];
00125e  68b8              LDR      r0,[r7,#8]  ; ND_EXT
001260  b2c0              UXTB     r0,r0
001262  f88b0009          STRB     r0,[r11,#9]
;;;1546   
;;;1547   #ifndef UKU_TELECORE2015
;;;1548   if((ibt._nd[0]==0) &&  (ibt._nd[1]==0))
;;;1549   	{
;;;1550   	t_box=((ibt._T[0]+ibt._T[1])/2)-273;
001266  4f28              LDR      r7,|L1.4872|
001268  b901              CBNZ     r1,|L1.4716|
00126a  b110              CBZ      r0,|L1.4722|
                  |L1.4716|
;;;1551   	}
;;;1552   else if((ibt._nd[0]==1) &&  (ibt._nd[1]==0))
00126c  2901              CMP      r1,#1
00126e  d04d              BEQ      |L1.4876|
001270  e04d              B        |L1.4878|
                  |L1.4722|
001272  eb0c000a          ADD      r0,r12,r10            ;1550
001276  eb0070d0          ADD      r0,r0,r0,LSR #31      ;1550
00127a  f46f7188          MVN      r1,#0x110             ;1550
00127e  eb010060          ADD      r0,r1,r0,ASR #1       ;1550
001282  8038              STRH     r0,[r7,#0]            ;1550
001284  e061              B        |L1.4938|
001286  0000              DCW      0x0000
                  |L1.4744|
                          DCD      ad7705_buff_
                  |L1.4748|
                          DCD      Kibat0
                  |L1.4752|
                          DCD      Kibat1
                  |L1.4756|
                          DCD      AUSW_MAIN
                  |L1.4760|
                          DCD      Ktbat
                  |L1.4764|
                          DCD      bat
                  |L1.4768|
                          DCD      Kuload
                  |L1.4772|
                          DCD      load_U
                  |L1.4776|
                          DCD      Kuout
                  |L1.4780|
                          DCD      out_U
                  |L1.4784|
                          DCD      Kubps
                  |L1.4788|
                          DCD      bps_U
                  |L1.4792|
                          DCD      NUMIST
                  |L1.4796|
                          DCD      bps
                  |L1.4800|
                          DCD      bps_I
                  |L1.4804|
                          DCD      ND_EXT
                  |L1.4808|
                          DCD      Ktext
                  |L1.4812|
                          DCD      t_ext
                  |L1.4816|
                          DCD      Ib_ips_termokompensat
                  |L1.4820|
                          DCD      ibat_metr_buff_
                  |L1.4824|
                          DCD      bIBAT_SMKLBR
                  |L1.4828|
                          DCD      adc_buff_ext_
                  |L1.4832|
                          DCD      Kunet_ext
                  |L1.4836|
                          DCD      Uvv
                  |L1.4840|
                          DCD      Uvv0
                  |L1.4844|
                          DCD      net_U
                  |L1.4848|
                          DCD      eb2_data_short
                  |L1.4852|
                          DCD      Kvv_eb2
                  |L1.4856|
                          DCD      Uvv_eb2
                  |L1.4860|
                          DCD      Kpes_eb2
                  |L1.4864|
                          DCD      Upes_eb2
                  |L1.4868|
                          DCD      ibt
                  |L1.4872|
                          DCD      t_box
                  |L1.4876|
00130c  b108              CBZ      r0,|L1.4882|
                  |L1.4878|
;;;1553   	{
;;;1554   	t_box=ibt._T[1]-273;
;;;1555   	}
;;;1556   else if((ibt._nd[0]==0) &&  (ibt._nd[1]==1))
00130e  b129              CBZ      r1,|L1.4892|
001310  e006              B        |L1.4896|
                  |L1.4882|
001312  f2aa1a11          SUB      r10,r10,#0x111        ;1554
001316  f8a7a000          STRH     r10,[r7,#0]           ;1554
00131a  e016              B        |L1.4938|
                  |L1.4892|
00131c  2801              CMP      r0,#1
00131e  d002              BEQ      |L1.4902|
                  |L1.4896|
;;;1557   	{
;;;1558   	t_box=ibt._T[0]-273;
;;;1559   	}
;;;1560   else if((ibt._nd[0]==1) &&  (ibt._nd[1]==1))
001320  2901              CMP      r1,#1
001322  d005              BEQ      |L1.4912|
001324  e011              B        |L1.4938|
                  |L1.4902|
001326  f2ac1c11          SUB      r12,r12,#0x111        ;1558
00132a  f8a7c000          STRH     r12,[r7,#0]           ;1558
00132e  e00c              B        |L1.4938|
                  |L1.4912|
001330  2801              CMP      r0,#1
001332  d10a              BNE      |L1.4938|
;;;1561   	{
;;;1562   	if(t_ext_can_nd<5)t_box= t_ext_can;
001334  48ff              LDR      r0,|L1.5940|
001336  7800              LDRB     r0,[r0,#0]  ; t_ext_can_nd
001338  2805              CMP      r0,#5
00133a  d203              BCS      |L1.4932|
00133c  48fe              LDR      r0,|L1.5944|
00133e  8800              LDRH     r0,[r0,#0]  ; t_ext_can
001340  8038              STRH     r0,[r7,#0]
001342  e002              B        |L1.4938|
                  |L1.4932|
;;;1563   	else t_box=20;
001344  f04f0014          MOV      r0,#0x14
001348  8038              STRH     r0,[r7,#0]
                  |L1.4938|
;;;1564   	}
;;;1565   #endif
;;;1566   /*
;;;1567   //  
;;;1568   
;;;1569   ibt._T[0]=bat[0]._Tb+273;
;;;1570   ibt._T[1]=bat[1]._Tb+273;
;;;1571   ibt._T[2]=t_ext[1]+273;
;;;1572   ibt._T[3]=t_ext[2]+273;
;;;1573   
;;;1574   ibt._nd[0]=bat[0]._nd;
;;;1575   ibt._nd[1]=bat[1]._nd;
;;;1576   ibt._nd[2]=ND_EXT[1];
;;;1577   ibt._nd[3]=ND_EXT[2];
;;;1578   
;;;1579   ibt._avg1=0;
;;;1580   ibt._avg_cnt=4;
;;;1581   
;;;1582   if(ibt._nd[0]==0)
;;;1583   	{
;;;1584   	ibt._avg1+=ibt._T[0];
;;;1585   	}
;;;1586   else 
;;;1587   	{
;;;1588   	ibt._avg_cnt--;
;;;1589   	}
;;;1590   
;;;1591   if(ibt._nd[1]==0)
;;;1592   	{
;;;1593   	ibt._avg1+=ibt._T[1];
;;;1594   	}
;;;1595   else 
;;;1596   	{
;;;1597   	ibt._avg_cnt--;
;;;1598   	}
;;;1599   
;;;1600   if(ibt._nd[2]==0)
;;;1601   	{
;;;1602   	ibt._avg1+=ibt._T[2];
;;;1603   	}
;;;1604   else 
;;;1605   	{
;;;1606   	ibt._avg_cnt--;
;;;1607   	}
;;;1608   
;;;1609   if(ibt._nd[3]==0)
;;;1610   	{
;;;1611   	ibt._avg1+=ibt._T[3];
;;;1612   	}
;;;1613   else 
;;;1614   	{
;;;1615   	ibt._avg_cnt--;
;;;1616   	}
;;;1617   
;;;1618   if(ibt._avg_cnt==0)
;;;1619   	{
;;;1620   	}
;;;1621   else
;;;1622   	{
;;;1623   	ibt._avg1/=ibt._avg_cnt;
;;;1624   	}
;;;1625   
;;;1626   
;;;1627   if(ibt._nd[0]!=0)
;;;1628   	{
;;;1629   	ibt._T_dispers[0]=0;
;;;1630   	}
;;;1631   else 
;;;1632   	{
;;;1633   	ibt._T_dispers[0]=abs(ibt._T[0]-ibt._avg1);
;;;1634   	}
;;;1635   
;;;1636   if(ibt._nd[1]!=0)
;;;1637   	{
;;;1638   	ibt._T_dispers[1]=0;
;;;1639   	}
;;;1640   else 
;;;1641   	{
;;;1642   	ibt._T_dispers[1]=abs(ibt._T[1]-ibt._avg1);
;;;1643   	}
;;;1644   
;;;1645   if(ibt._nd[2]!=0)
;;;1646   	{
;;;1647   	ibt._T_dispers[2]=0;
;;;1648   	}
;;;1649   else 
;;;1650   	{
;;;1651   	ibt._T_dispers[2]=abs(ibt._T[2]-ibt._avg1);
;;;1652   	}
;;;1653   
;;;1654   if(ibt._nd[3]!=0)
;;;1655   	{
;;;1656   	ibt._T_dispers[3]=0;
;;;1657   	}
;;;1658   else 
;;;1659   	{
;;;1660   	ibt._T_dispers[3]=abs(ibt._T[3]-ibt._avg1);
;;;1661   	}
;;;1662   
;;;1663   if(	ibt._nd[0]&&
;;;1664   	ibt._nd[1]&&
;;;1665   	ibt._nd[2]&&
;;;1666   	ibt._nd[3]
;;;1667   	)
;;;1668   	{
;;;1669   	t_box=(bps[0]._Ti);
;;;1670   	}
;;;1671   
;;;1672   else if(	ibt._nd[0]||
;;;1673   	ibt._nd[1]||
;;;1674   	ibt._nd[2]||
;;;1675   	ibt._nd[3]
;;;1676   	)
;;;1677   	{
;;;1678   	t_box=(ibt._avg1-273);
;;;1679   	}
;;;1680   else 
;;;1681   	{
;;;1682   	ibt._max_dispers_num=0;
;;;1683   	ibt._max_dispers=ibt._T_dispers[0];
;;;1684   
;;;1685   	if(ibt._T_dispers[1]>ibt._max_dispers)
;;;1686   		{
;;;1687   		ibt._max_dispers_num=1;
;;;1688   		ibt._max_dispers=ibt._T_dispers[1];
;;;1689   		}
;;;1690   	if(ibt._T_dispers[2]>ibt._max_dispers)
;;;1691   		{
;;;1692   		ibt._max_dispers_num=2;
;;;1693   		ibt._max_dispers=ibt._T_dispers[2];
;;;1694   		}
;;;1695   	if(ibt._T_dispers[3]>ibt._max_dispers)
;;;1696   		{
;;;1697   		ibt._max_dispers_num=3;
;;;1698   		ibt._max_dispers=ibt._T_dispers[3];
;;;1699   		}
;;;1700   
;;;1701   	ibt._avg2=0;
;;;1702   
;;;1703   	if(ibt._max_dispers_num!=0)
;;;1704   		{
;;;1705   		ibt._avg2+=ibt._T[0];
;;;1706   		}
;;;1707   	if(ibt._max_dispers_num!=1)
;;;1708   		{
;;;1709   		ibt._avg2+=ibt._T[1];
;;;1710   		}
;;;1711   	if(ibt._max_dispers_num!=2)
;;;1712   		{
;;;1713   		ibt._avg2+=ibt._T[2];
;;;1714   		}
;;;1715   	if(ibt._max_dispers_num!=3)
;;;1716   		{
;;;1717   		ibt._avg2+=ibt._T[3];
;;;1718   		}
;;;1719   
;;;1720   	t_box=(ibt._avg2/3)-273;
;;;1721   
;;;1722   	}*/
;;;1723   
;;;1724   
;;;1725   //*********************************************
;;;1726   
;;;1727   #ifndef TELECORE
;;;1728   if((BAT_IS_ON[0]==bisON)&&(bat[0]._Ub>200)) Ibmax=bat[0]._Ib;
00134a  48fc              LDR      r0,|L1.5948|
00134c  7801              LDRB     r1,[r0,#0]  ; BAT_IS_ON
00134e  2955              CMP      r1,#0x55
001350  d104              BNE      |L1.4956|
001352  f1b90fc8          CMP      r9,#0xc8
001356  dd01              BLE      |L1.4956|
001358  8929              LDRH     r1,[r5,#8]  ; bat
00135a  8731              STRH     r1,[r6,#0x38]
                  |L1.4956|
;;;1729   if((BAT_IS_ON[1]==bisON)&&(bat[1]._Ub>200)&&(bat[1]._Ib>bat[0]._Ib)) Ibmax=bat[1]._Ib;
00135c  7840              LDRB     r0,[r0,#1]  ; BAT_IS_ON
00135e  2855              CMP      r0,#0x55
001360  d10a              BNE      |L1.4984|
001362  f9b5004e          LDRSH    r0,[r5,#0x4e]  ; bat
001366  28c8              CMP      r0,#0xc8
001368  dd06              BLE      |L1.4984|
00136a  f9b50054          LDRSH    r0,[r5,#0x54]  ; bat
00136e  f9b51008          LDRSH    r1,[r5,#8]  ; bat
001372  4288              CMP      r0,r1
001374  dd00              BLE      |L1.4984|
001376  8730              STRH     r0,[r6,#0x38]
                  |L1.4984|
;;;1730   #endif
;;;1731   
;;;1732   #ifdef TELECORE
;;;1733   Ibmax=0;
;;;1734   /*
;;;1735   if((NUMBAT_TELECORE>0)&&(lakb[0]._communicationFullErrorStat==0)&&(lakb[0]._ch_curr/10>Ibmax))Ibmax=lakb[0]._ch_curr/10;
;;;1736   if((NUMBAT_TELECORE>1)&&(lakb[1]._communicationFullErrorStat==0)&&(lakb[1]._ch_curr/10>Ibmax))Ibmax=lakb[1]._ch_curr/10;
;;;1737   if((NUMBAT_TELECORE>2)&&(lakb[2]._communicationFullErrorStat==0)&&(lakb[2]._ch_curr/10>Ibmax))Ibmax=lakb[2]._ch_curr/10;
;;;1738   */
;;;1739   if((NUMBAT_TELECORE>0)&&(bat[0]._Ib/10>Ibmax))Ibmax=bat[0]._Ib/10;
;;;1740   if((NUMBAT_TELECORE>1)&&(bat[1]._Ib/10>Ibmax))Ibmax=bat[1]._Ib/10;
;;;1741   //if((BAT_IS_ON[0]==bisON)&&(bat[0]._Ub>200)) Ibmax=bat[0]._Ib/1;
;;;1742   //if((BAT_IS_ON[1]==bisON)&&(bat[1]._Ub>200)&&(bat[1]._Ib>bat[0]._Ib)) Ibmax=bat[1]._Ib;
;;;1743   #endif
;;;1744   //Ibmax=bat[0]._Ib;
;;;1745   //if((AUSW_MAIN==22063)||(AUSW_MAIN==22023)||(AUSW_MAIN==22043))Ibmax=Ib_ips_termokompensat;
;;;1746   #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;1747   Ibmax=Ib_ips_termokompensat;
001378  f8b80000          LDRH     r0,[r8,#0]  ; Ib_ips_termokompensat
00137c  8730              STRH     r0,[r6,#0x38]
;;;1748   #endif
;;;1749   for(i=0;i<NUMIST;i++)
00137e  f04f0100          MOV      r1,#0
001382  e02f              B        |L1.5092|
                  |L1.4996|
;;;1750   	{
;;;1751   	if(bps[i]._cnt<25)
001384  ebc100c1          RSB      r0,r1,r1,LSL #3
001388  eb001001          ADD      r0,r0,r1,LSL #4
00138c  eb040080          ADD      r0,r4,r0,LSL #2
001390  78c6              LDRB     r6,[r0,#3]
001392  2e19              CMP      r6,#0x19
001394  d21c              BCS      |L1.5072|
;;;1752        	{
;;;1753        	bps[i]._Ii=bps[i]._buff[0]+(bps[i]._buff[1]*256);
001396  7986              LDRB     r6,[r0,#6]
001398  79c7              LDRB     r7,[r0,#7]
00139a  eb062607          ADD      r6,r6,r7,LSL #8
00139e  6246              STR      r6,[r0,#0x24]
;;;1754        	bps[i]._Uin=bps[i]._buff[2]+(bps[i]._buff[3]*256);
0013a0  7a06              LDRB     r6,[r0,#8]
0013a2  7a47              LDRB     r7,[r0,#9]
0013a4  eb062607          ADD      r6,r6,r7,LSL #8
0013a8  6206              STR      r6,[r0,#0x20]
;;;1755        	bps[i]._Uii=bps[i]._buff[4]+(bps[i]._buff[5]*256);
0013aa  7a86              LDRB     r6,[r0,#0xa]
0013ac  7ac7              LDRB     r7,[r0,#0xb]
0013ae  eb062607          ADD      r6,r6,r7,LSL #8
0013b2  61c6              STR      r6,[r0,#0x1c]
;;;1756        	bps[i]._Ti=(signed)(bps[i]._buff[6]);
0013b4  7b06              LDRB     r6,[r0,#0xc]
0013b6  6286              STR      r6,[r0,#0x28]
;;;1757        	bps[i]._adr_ee=bps[i]._buff[7];
0013b8  7b46              LDRB     r6,[r0,#0xd]
0013ba  f8806052          STRB     r6,[r0,#0x52]
;;;1758        	bps[i]._flags_tm=bps[i]._buff[8];
0013be  7b86              LDRB     r6,[r0,#0xe]
0013c0  f8806042          STRB     r6,[r0,#0x42]
;;;1759   	     bps[i]._rotor=bps[i]._buff[10]+(bps[i]._buff[11]*256);    
0013c4  7c06              LDRB     r6,[r0,#0x10]
0013c6  7c47              LDRB     r7,[r0,#0x11]
0013c8  eb062607          ADD      r6,r6,r7,LSL #8
0013cc  64c6              STR      r6,[r0,#0x4c]
0013ce  e006              B        |L1.5086|
                  |L1.5072|
;;;1760        	} 
;;;1761   	else 
;;;1762        	{
;;;1763        	bps[i]._Uii=0; 
0013d0  61c3              STR      r3,[r0,#0x1c]
;;;1764        	bps[i]._Ii=0;
0013d2  6243              STR      r3,[r0,#0x24]
;;;1765        	bps[i]._Uin=0;
0013d4  6203              STR      r3,[r0,#0x20]
;;;1766        	bps[i]._Ti=0;
0013d6  6283              STR      r3,[r0,#0x28]
;;;1767        	bps[i]._flags_tm=0; 
0013d8  f8803042          STRB     r3,[r0,#0x42]
;;;1768   	     bps[i]._rotor=0;    
0013dc  64c3              STR      r3,[r0,#0x4c]
                  |L1.5086|
0013de  f1010101          ADD      r1,r1,#1              ;1749
0013e2  b2c9              UXTB     r1,r1                 ;1749
                  |L1.5092|
0013e4  4291              CMP      r1,r2                 ;1749
0013e6  dbcd              BLT      |L1.4996|
;;;1769        	}
;;;1770        
;;;1771        }
;;;1772   
;;;1773   load_I=0;
0013e8  4ed5              LDR      r6,|L1.5952|
;;;1774   #ifdef TELECORE
;;;1775   
;;;1776   /*for(i=0;i<NUMBAT_TELECORE;i++)
;;;1777   	{
;;;1778   	load_I-=lakb[i]._ch_curr/10;
;;;1779   	}*/
;;;1780   load_I=-(bat[0]._Ib/10)-(bat[1]._Ib/10);
;;;1781   #else
;;;1782   load_I=-(bat[0]._Ib/10)-(bat[1]._Ib/10);
0013ea  f9b51008          LDRSH    r1,[r5,#8]  ; bat
0013ee  f04f000a          MOV      r0,#0xa
0013f2  fb91f1f0          SDIV     r1,r1,r0
0013f6  f9b55054          LDRSH    r5,[r5,#0x54]  ; bat
0013fa  fb95f0f0          SDIV     r0,r5,r0
0013fe  4408              ADD      r0,r0,r1
001400  f1c00000          RSB      r0,r0,#0
001404  b207              SXTH     r7,r0
001406  8037              STRH     r7,[r6,#0]
;;;1783   #endif
;;;1784   Isumm=0;
001408  4dce              LDR      r5,|L1.5956|
00140a  802b              STRH     r3,[r5,#0]
;;;1785   
;;;1786   for(i=0;i<NUMIST;i++)
00140c  f04f0000          MOV      r0,#0
001410  e012              B        |L1.5176|
                  |L1.5138|
;;;1787        {
;;;1788        if(bps[i]._cnt<5)Isumm+=bps[i]._Ii;
001412  ebc001c0          RSB      r1,r0,r0,LSL #3
001416  eb011100          ADD      r1,r1,r0,LSL #4
00141a  eb040181          ADD      r1,r4,r1,LSL #2
00141e  f891c003          LDRB     r12,[r1,#3]
001422  f1bc0f05          CMP      r12,#5
001426  d204              BCS      |L1.5170|
001428  6a49              LDR      r1,[r1,#0x24]
00142a  f8b5c000          LDRH     r12,[r5,#0]  ; Isumm
00142e  4461              ADD      r1,r1,r12
001430  8029              STRH     r1,[r5,#0]
                  |L1.5170|
001432  f1000001          ADD      r0,r0,#1              ;1786
001436  b2c0              UXTB     r0,r0                 ;1786
                  |L1.5176|
001438  4290              CMP      r0,r2                 ;1786
00143a  dbea              BLT      |L1.5138|
;;;1789        }  
;;;1790        
;;;1791   load_I=load_I+Isumm;
00143c  8828              LDRH     r0,[r5,#0]  ; Isumm
00143e  4438              ADD      r0,r0,r7
001440  b200              SXTH     r0,r0
001442  8030              STRH     r0,[r6,#0]
;;;1792   if(load_I<0)load_I=0;
001444  2800              CMP      r0,#0
001446  da00              BGE      |L1.5194|
001448  8033              STRH     r3,[r6,#0]
                  |L1.5194|
;;;1793   
;;;1794   #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;1795   load_I=0;
00144a  8033              STRH     r3,[r6,#0]
;;;1796   
;;;1797   Isumm=0;
00144c  802b              STRH     r3,[r5,#0]
;;;1798   
;;;1799   for(i=0;i<NUMIST;i++)
00144e  f04f0000          MOV      r0,#0
001452  e00f              B        |L1.5236|
                  |L1.5204|
;;;1800        {
;;;1801        if(bps[i]._cnt<5)Isumm+=bps[i]._Ii;
001454  ebc001c0          RSB      r1,r0,r0,LSL #3
001458  eb011100          ADD      r1,r1,r0,LSL #4
00145c  eb040181          ADD      r1,r4,r1,LSL #2
001460  78cf              LDRB     r7,[r1,#3]
001462  2f05              CMP      r7,#5
001464  d203              BCS      |L1.5230|
001466  6a49              LDR      r1,[r1,#0x24]
001468  882f              LDRH     r7,[r5,#0]  ; Isumm
00146a  4439              ADD      r1,r1,r7
00146c  8029              STRH     r1,[r5,#0]
                  |L1.5230|
00146e  f1000001          ADD      r0,r0,#1              ;1799
001472  b2c0              UXTB     r0,r0                 ;1799
                  |L1.5236|
001474  4290              CMP      r0,r2                 ;1799
001476  dbed              BLT      |L1.5204|
;;;1802        }  
;;;1803        
;;;1804   load_I=load_I+Isumm;
001478  8829              LDRH     r1,[r5,#0]  ; Isumm
00147a  eb030001          ADD      r0,r3,r1
00147e  b200              SXTH     r0,r0
001480  8030              STRH     r0,[r6,#0]
;;;1805   if(load_I<0)load_I=0;
001482  2800              CMP      r0,#0
001484  da00              BGE      |L1.5256|
001486  8033              STRH     r3,[r6,#0]
                  |L1.5256|
;;;1806   
;;;1807   #endif
;;;1808   
;;;1809   
;;;1810   
;;;1811   #ifdef UKU_GLONASS
;;;1812   inv[0]._Uio=6;
;;;1813   if (NUMINV)
;;;1814   	{
;;;1815   	for(i=0;i<NUMINV;i++)
;;;1816   		{
;;;1817   		if(bps[i+first_inv_slot]._cnt<25)
;;;1818        		{
;;;1819        		inv[i]._Ii=bps[i+first_inv_slot]._buff[0]+(bps[i+first_inv_slot]._buff[1]*256);
;;;1820        		inv[i]._Uin=bps[i+first_inv_slot]._buff[2]+(bps[i+first_inv_slot]._buff[3]*256);
;;;1821        		inv[i]._Uio=bps[i+first_inv_slot]._buff[4]+(bps[i+first_inv_slot]._buff[5]*256);
;;;1822        		inv[i]._Ti=(signed)(bps[i+first_inv_slot]._buff[6]);
;;;1823        		inv[i]._flags_tm=bps[i+first_inv_slot]._buff[8];
;;;1824   	    	//	inv[i]._rotor=bps[i+first_inv_slot]._buff[10]+(bps[i+first_inv_slot]._buff[11]*256);
;;;1825   			inv[i]._cnt=0;    
;;;1826        		} 
;;;1827   		else 
;;;1828        		{
;;;1829        		inv[i]._Uio=0; 
;;;1830        		inv[i]._Ii=0;
;;;1831        		inv[i]._Uin=0;
;;;1832        		inv[i]._Ti=0;
;;;1833        		inv[i]._flags_tm=0; 
;;;1834   //	     	inv[i]._rotor0;
;;;1835   			inv[i]._cnt=25;    
;;;1836        		}
;;;1837        	}
;;;1838      	}
;;;1839   #endif
;;;1840   
;;;1841   #ifndef UKU_GLONASS
;;;1842   if (NUMINV)
001488  48af              LDR      r0,|L1.5960|
00148a  f9b05000          LDRSH    r5,[r0,#0]  ; NUMINV
00148e  2d00              CMP      r5,#0
001490  d066              BEQ      |L1.5472|
;;;1843   	{
;;;1844   	for(i=0;i<NUMINV;i++)
001492  f04f0200          MOV      r2,#0
;;;1845   		{
;;;1846   		if(bps[i+20]._cnt<25)
;;;1847        		{
;;;1848        		inv[i]._Ii=bps[i+20]._buff[0]+(bps[i+20]._buff[1]*256);
001496  4ead              LDR      r6,|L1.5964|
001498  e060              B        |L1.5468|
                  |L1.5274|
00149a  f1020014          ADD      r0,r2,#0x14           ;1846
00149e  ebc001c0          RSB      r1,r0,r0,LSL #3       ;1846
0014a2  eb011000          ADD      r0,r1,r0,LSL #4       ;1846
0014a6  eb040080          ADD      r0,r4,r0,LSL #2       ;1846
0014aa  78c1              LDRB     r1,[r0,#3]            ;1846
0014ac  2919              CMP      r1,#0x19              ;1846
0014ae  d239              BCS      |L1.5412|
0014b0  7981              LDRB     r1,[r0,#6]
0014b2  79c7              LDRB     r7,[r0,#7]
0014b4  eb012707          ADD      r7,r1,r7,LSL #8
0014b8  eb020142          ADD      r1,r2,r2,LSL #1
0014bc  eb061141          ADD      r1,r6,r1,LSL #5
0014c0  61cf              STR      r7,[r1,#0x1c]
;;;1849        		inv[i]._Pio=bps[i+20]._buff[2]+(bps[i+20]._buff[3]*256);
0014c2  7a07              LDRB     r7,[r0,#8]
0014c4  f890c009          LDRB     r12,[r0,#9]
0014c8  eb07270c          ADD      r7,r7,r12,LSL #8
0014cc  62cf              STR      r7,[r1,#0x2c]
;;;1850        		inv[i]._Uio=bps[i+20]._buff[4]+(bps[i+20]._buff[5]*256);
0014ce  7a87              LDRB     r7,[r0,#0xa]
0014d0  f890c00b          LDRB     r12,[r0,#0xb]
0014d4  eb07270c          ADD      r7,r7,r12,LSL #8
0014d8  618f              STR      r7,[r1,#0x18]
;;;1851        		inv[i]._Ti=(signed)(bps[i+20]._buff[6]);
0014da  7b07              LDRB     r7,[r0,#0xc]
0014dc  620f              STR      r7,[r1,#0x20]
;;;1852        		inv[i]._flags_tm=bps[i+20]._buff[7];
0014de  7b47              LDRB     r7,[r0,#0xd]
0014e0  f8817046          STRB     r7,[r1,#0x46]
;;;1853        		inv[i]._Uin=bps[i+20]._buff[8]+(bps[i+20]._buff[9]*256);
0014e4  7b87              LDRB     r7,[r0,#0xe]
0014e6  f890c00f          LDRB     r12,[r0,#0xf]
0014ea  eb07270c          ADD      r7,r7,r12,LSL #8
0014ee  628f              STR      r7,[r1,#0x28]
;;;1854        		inv[i]._Uil=bps[i+20]._buff[10]+(bps[i+20]._buff[11]*256);
0014f0  7c07              LDRB     r7,[r0,#0x10]
0014f2  f890c011          LDRB     r12,[r0,#0x11]
0014f6  eb07270c          ADD      r7,r7,r12,LSL #8
0014fa  624f              STR      r7,[r1,#0x24]
;;;1855   			inv[i]._cnt=0;
0014fc  708b              STRB     r3,[r1,#2]
;;;1856   			inv[i]._Uoutmin=bps[i+20]._buff[12]; 
0014fe  7c87              LDRB     r7,[r0,#0x12]
001500  f8817059          STRB     r7,[r1,#0x59]
;;;1857   			inv[i]._Uoutmax=bps[i+20]._buff[13]; 
001504  7cc7              LDRB     r7,[r0,#0x13]
001506  f881705a          STRB     r7,[r1,#0x5a]
;;;1858   			inv[i]._Pnom=bps[i+20]._buff[14]; 
00150a  7d07              LDRB     r7,[r0,#0x14]
00150c  f8817058          STRB     r7,[r1,#0x58]
;;;1859   			inv[i]._net_contr_en=bps[i+20]._buff[15];
001510  7d47              LDRB     r7,[r0,#0x15]
001512  f881705b          STRB     r7,[r1,#0x5b]
;;;1860   			inv[i]._pwm_en=bps[i+20]._buff[16];  
001516  7d87              LDRB     r7,[r0,#0x16]
001518  f881705c          STRB     r7,[r1,#0x5c]
;;;1861   			inv[i]._phase_mode=bps[i+20]._buff[17];  
00151c  7dc0              LDRB     r0,[r0,#0x17]
00151e  f881005d          STRB     r0,[r1,#0x5d]
001522  e018              B        |L1.5462|
                  |L1.5412|
;;;1862        		} 
;;;1863   		else 
;;;1864        		{
;;;1865         		inv[i]._Ii=0;
001524  eb020042          ADD      r0,r2,r2,LSL #1
001528  eb061040          ADD      r0,r6,r0,LSL #5
00152c  61c3              STR      r3,[r0,#0x1c]
;;;1866   			inv[i]._Pio=0;
00152e  62c3              STR      r3,[r0,#0x2c]
;;;1867   			inv[i]._Uio=0;
001530  6183              STR      r3,[r0,#0x18]
;;;1868        		inv[i]._Ti=0;
001532  6203              STR      r3,[r0,#0x20]
;;;1869        		inv[i]._flags_tm=0; 
001534  f8803046          STRB     r3,[r0,#0x46]
;;;1870        		inv[i]._Uil=0;
001538  6243              STR      r3,[r0,#0x24]
;;;1871        		inv[i]._Uin=0;
00153a  6283              STR      r3,[r0,#0x28]
;;;1872   			inv[i]._cnt=25; 
00153c  f04f0119          MOV      r1,#0x19
001540  7081              STRB     r1,[r0,#2]
;;;1873   			inv[i]._Uoutmin=0; 
001542  f8803059          STRB     r3,[r0,#0x59]
;;;1874   			inv[i]._Uoutmax=0; 
001546  f880305a          STRB     r3,[r0,#0x5a]
;;;1875   			inv[i]._Pnom=0; 
00154a  f8803058          STRB     r3,[r0,#0x58]
;;;1876   			inv[i]._net_contr_en=0;
00154e  f880305b          STRB     r3,[r0,#0x5b]
;;;1877   			inv[i]._pwm_en=0;   
001552  f880305c          STRB     r3,[r0,#0x5c]
                  |L1.5462|
001556  f1020201          ADD      r2,r2,#1              ;1844
00155a  b2d2              UXTB     r2,r2                 ;1844
                  |L1.5468|
00155c  42aa              CMP      r2,r5                 ;1844
00155e  db9c              BLT      |L1.5274|
                  |L1.5472|
;;;1878   			   
;;;1879        		}
;;;1880        	}
;;;1881      	}
;;;1882   #endif
;;;1883   
;;;1884   #ifdef GLADKOV
;;;1885   inv[0]._Ii=bps[4]._buff[0]+(bps[4]._buff[1]*256);
;;;1886   inv[0]._Pio=bps[4]._buff[2]+(bps[4]._buff[3]*256);
;;;1887   inv[0]._Uio=bps[4]._buff[4]+(bps[4]._buff[5]*256);
;;;1888   inv[0]._Ti=(signed)(bps[4]._buff[6]);
;;;1889   inv[0]._flags_tm=bps[4]._buff[7];
;;;1890   inv[0]._Uin=bps[4]._buff[8]+(bps[4]._buff[9]*256);
;;;1891   inv[0]._Uil=bps[4]._buff[10]+(bps[4]._buff[11]*256);
;;;1892   inv[0]._cnt=0;    
;;;1893   
;;;1894   inv[1]._Ii=bps[21]._buff[0]+(bps[21]._buff[1]*256);
;;;1895   inv[1]._Pio=bps[21]._buff[2]+(bps[21]._buff[3]*256);
;;;1896   inv[1]._Uio=bps[21]._buff[4]+(bps[21]._buff[5]*256);
;;;1897   inv[1]._Ti=(signed)(bps[21]._buff[6]);
;;;1898   inv[1]._flags_tm=bps[21]._buff[7];
;;;1899   inv[1]._Uin=bps[21]._buff[8]+(bps[21]._buff[9]*256);
;;;1900   inv[1]._Uil=bps[21]._buff[10]+(bps[21]._buff[11]*256);
;;;1901   inv[1]._cnt=0;    
;;;1902   #endif
;;;1903   
;;;1904   /*
;;;1905   if((BAT_IS_ON[0]==bisON)&&(BAT_TYPE==1))
;;;1906   	{
;;;1907   	lakb[0]._battCommState=0;
;;;1908   	if(lakb[0]._cnt>10)lakb[0]._battCommState=2;
;;;1909   	else if(lakb[0]._bRS485ERR==1)lakb[0]._battCommState=1;
;;;1910   	
;;;1911   	if(lakb[0]._battCommState==0)
;;;1912   		{	
;;;1913   		bat[0]._Ub=(signed short)((lakb[0]._tot_bat_volt+5)/10);
;;;1914   		bat[0]._Ib=(signed short)lakb[0]._ch_curr;
;;;1915   		if(lakb[0]._dsch_curr) bat[0]._Ib=(signed short) (-lakb[0]._dsch_curr);
;;;1916   		bat[0]._Tb=(signed short)lakb[0]._max_cell_temp;
;;;1917   		}
;;;1918   	}
;;;1919   */
;;;1920   
;;;1921   #ifdef UKU_TELECORE2015
;;;1922   
;;;1923   	if(BAT_TYPE==2)
;;;1924   		{
;;;1925   		lakb[0]._ch_curr/*temp_SS*/=((ascii2halFhex(liBatteryInBuff[113]))<<12)+
;;;1926   					 		((ascii2halFhex(liBatteryInBuff[114]))<<8)+
;;;1927   							((ascii2halFhex(liBatteryInBuff[115]))<<4)+
;;;1928   							((ascii2halFhex(liBatteryInBuff[116])));
;;;1929   		
;;;1930   		/*if(temp_SS&0x8000)		lakb[0]._ch_curr=~temp_SS;
;;;1931   		else 				lakb[0]._ch_curr=temp_SS;*/
;;;1932   	
;;;1933   		lakb[0]._tot_bat_volt=	(unsigned short)(((ascii2halFhex(liBatteryInBuff[117]))<<12)+
;;;1934   							((ascii2halFhex(liBatteryInBuff[118]))<<8)+
;;;1935   							((ascii2halFhex(liBatteryInBuff[119]))<<4)+
;;;1936   							((ascii2halFhex(liBatteryInBuff[120]))))/100;
;;;1937   	
;;;1938   		lakb[0]._max_cell_temp= 	(((ascii2halFhex(liBatteryInBuff[93]))<<12)+
;;;1939   							((ascii2halFhex(liBatteryInBuff[94]))<<8)+
;;;1940   							((ascii2halFhex(liBatteryInBuff[95]))<<4)+
;;;1941   							((ascii2halFhex(liBatteryInBuff[96]))))/10-273;
;;;1942   	
;;;1943   		lakb[0]._s_o_c_abs=		(unsigned short)((ascii2halFhex(liBatteryInBuff[121]))<<12)+
;;;1944   							((ascii2halFhex(liBatteryInBuff[122]))<<8)+
;;;1945   							((ascii2halFhex(liBatteryInBuff[123]))<<4)+
;;;1946   							((ascii2halFhex(liBatteryInBuff[124])));
;;;1947   	
;;;1948   		lakb[0]._rat_cap=		(unsigned short)((ascii2halFhex(liBatteryInBuff[127]))<<12)+
;;;1949   							((ascii2halFhex(liBatteryInBuff[128]))<<8)+
;;;1950   							((ascii2halFhex(liBatteryInBuff[129]))<<4)+
;;;1951   							((ascii2halFhex(liBatteryInBuff[130])));
;;;1952   	
;;;1953   		lakb[0]._s_o_c=		lakb[0]._s_o_c_abs/(lakb[0]._rat_cap/100);
;;;1954   	
;;;1955   	
;;;1956   	/*	lakb[0]._rat_cap= (lakb_damp[i][13]*256)+ lakb_damp[i][14];
;;;1957   		lakb[0]._max_cell_volt= (lakb_damp[i][0]*256)+ lakb_damp[i][1];
;;;1958   		lakb[0]._min_cell_volt= (lakb_damp[i][2]*256)+ lakb_damp[i][3];
;;;1959   		lakb[0]._max_cell_temp= lakb_damp[i][4];
;;;1960   		lakb[0]._min_cell_temp= lakb_damp[i][5];
;;;1961   		lakb[0]._tot_bat_volt= (lakb_damp[i][6]*256)+ lakb_damp[i][7];
;;;1962   		lakb[0]._ch_curr= (lakb_damp[i][8]*256)+ lakb_damp[i][8];
;;;1963   		lakb[0]._dsch_curr= (lakb_damp[i][10]*256)+ lakb_damp[i][11];
;;;1964   		lakb[0]._s_o_c= lakb_damp[i][12];
;;;1965   		lakb[0]._r_b_t= lakb_damp[i][15];
;;;1966   		lakb[0]._c_c_l_v= (lakb_damp[i][16]*256)+ lakb_damp[i][17];
;;;1967   		lakb[0]._s_o_h= lakb_damp[i][18];
;;;1968   	
;;;1969   		if(lakb[i]._rat_cap==0)
;;;1970   			{
;;;1971   			if(lakb[i]._isOnCnt)
;;;1972   				{
;;;1973   				lakb[i]._isOnCnt--;
;;;1974   				if(lakb[i]._isOnCnt==0)
;;;1975   					{
;;;1976   					if(lakb[i]._battIsOn!=0) bLAKB_KONF_CH=1;
;;;1977   					}
;;;1978   				}
;;;1979   			}
;;;1980   		else 
;;;1981   			{
;;;1982   			if(lakb[i]._isOnCnt<50)
;;;1983   				{
;;;1984   				lakb[i]._isOnCnt++;
;;;1985   				if(lakb[i]._isOnCnt==50)
;;;1986   					{
;;;1987   					if(lakb[i]._battIsOn!=1) bLAKB_KONF_CH=1;
;;;1988   					}
;;;1989   				}
;;;1990   			}
;;;1991   		gran(&lakb[i]._isOnCnt,0,50);*/
;;;1992   		}
;;;1993   	else if(BAT_TYPE==3)
;;;1994   		{
;;;1995   		//short numOfPacks;
;;;1996   		//short numOfCells, numOfTemperCells, baseOfData;
;;;1997   		
;;;1998   		#ifndef UKU_TELECORE2016
;;;1999   		numOfCells=((ascii2halFhex(liBatteryInBuff[17]))<<4)+((ascii2halFhex(liBatteryInBuff[18])));
;;;2000   		numOfTemperCells=((ascii2halFhex(liBatteryInBuff[17+(numOfCells*4)+2]))<<4)+((ascii2halFhex(liBatteryInBuff[18+(numOfCells*4)+2])));
;;;2001   		numOfPacks=((ascii2halFhex(liBatteryInBuff[15]))<<4)+((ascii2halFhex(liBatteryInBuff[16])));
;;;2002   		if(numOfPacks)numOfPacks-=1;
;;;2003   		if((numOfPacks<0)||(numOfPacks>NUMBAT_TELECORE))numOfPacks=0;
;;;2004   		plazma_numOfCells=numOfCells;
;;;2005   		plazma_numOfTemperCells=numOfTemperCells;
;;;2006   		plazma_numOfPacks=numOfPacks;
;;;2007   
;;;2008   
;;;2009   		baseOfData=16+(numOfCells*4)+2+(numOfTemperCells*4)+2;
;;;2010   
;;;2011   		lakb[numOfPacks]._ch_curr=(signed short)(
;;;2012   							((ascii2halFhex(liBatteryInBuff[1+baseOfData]))<<12)+
;;;2013   							((ascii2halFhex(liBatteryInBuff[2+baseOfData]))<<8)+
;;;2014   							((ascii2halFhex(liBatteryInBuff[3+baseOfData]))<<4)+
;;;2015   							((ascii2halFhex(liBatteryInBuff[4+baseOfData])))
;;;2016   							);	  
;;;2017   
;;;2018   		lakb[numOfPacks]._tot_bat_volt=(signed short)(
;;;2019   							((ascii2halFhex(liBatteryInBuff[1+baseOfData+4]))<<12)+
;;;2020   							((ascii2halFhex(liBatteryInBuff[2+baseOfData+4]))<<8)+
;;;2021   							((ascii2halFhex(liBatteryInBuff[3+baseOfData+4]))<<4)+
;;;2022   							((ascii2halFhex(liBatteryInBuff[4+baseOfData+4])))
;;;2023   							)/10;
;;;2024   
;;;2025   		lakb[numOfPacks]._max_cell_temp=(signed short)(
;;;2026   							((ascii2halFhex(liBatteryInBuff[1+baseOfData-4]))<<12)+
;;;2027   							((ascii2halFhex(liBatteryInBuff[2+baseOfData-4]))<<8)+
;;;2028   							((ascii2halFhex(liBatteryInBuff[3+baseOfData-4]))<<4)+
;;;2029   							((ascii2halFhex(liBatteryInBuff[4+baseOfData-4])))
;;;2030   							)-2730;
;;;2031   
;;;2032   		lakb[numOfPacks]._s_o_c=(signed short)(
;;;2033   							((ascii2halFhex(liBatteryInBuff[1+baseOfData+8]))<<12)+
;;;2034   							((ascii2halFhex(liBatteryInBuff[2+baseOfData+8]))<<8)+
;;;2035   							((ascii2halFhex(liBatteryInBuff[3+baseOfData+8]))<<4)+
;;;2036   							((ascii2halFhex(liBatteryInBuff[4+baseOfData+8])))
;;;2037   							)/10;
;;;2038   
;;;2039   		lakb[numOfPacks]._s_o_h=(signed short)(
;;;2040   							((ascii2halFhex(liBatteryInBuff[1+baseOfData+14]))<<12)+
;;;2041   							((ascii2halFhex(liBatteryInBuff[2+baseOfData+14]))<<8)+
;;;2042   							((ascii2halFhex(liBatteryInBuff[3+baseOfData+14]))<<4)+
;;;2043   							((ascii2halFhex(liBatteryInBuff[4+baseOfData+14])))
;;;2044   							)/10;
;;;2045   		#endif
;;;2046   		
;;;2047   		#ifdef UKU_TELECORE2016
;;;2048   		{
;;;2049   		char i;
;;;2050   		
;;;2051   		for(i=0;i<NUMBAT_TELECORE;i++)
;;;2052   			{
;;;2053   			lakb[i]._s_o_c_percent= (signed short)(((unsigned long)lakb[i]._s_o_c*100UL)/(unsigned long)lakb[i]._s_o_h);
;;;2054   			}
;;;2055   		}
;;;2056   		#endif								  
;;;2057   		}
;;;2058   	
;;;2059   if(sacredSunSilentCnt<3) 
;;;2060   	{
;;;2061       	bat[0]._Ub=lakb[0]._tot_bat_volt;
;;;2062       	bat[0]._Tb=lakb[0]._max_cell_temp;
;;;2063      	//bat[0]._Ib=lakb[0]._ch_curr/10;
;;;2064   	}
;;;2065   else 
;;;2066   	{
;;;2067       	//bat[0]._Ub=0;
;;;2068       	//bat[0]._Tb=0;
;;;2069      	//bat[0]._Ib=0;
;;;2070   	}
;;;2071   
;;;2072   if(BAT_TYPE==1)
;;;2073   	{
;;;2074   	char i;
;;;2075   	for(i=0;i<1;i++)
;;;2076   		{
;;;2077   		lakb[i]._rat_cap= (lakb_damp[i][13]*256)+ lakb_damp[i][14];
;;;2078   		lakb[i]._max_cell_volt= (lakb_damp[i][0]*256)+ lakb_damp[i][1];
;;;2079   		lakb[i]._min_cell_volt= (lakb_damp[i][2]*256)+ lakb_damp[i][3];
;;;2080   		lakb[i]._max_cell_temp= lakb_damp[i][4];
;;;2081   		lakb[i]._min_cell_temp= lakb_damp[i][5];
;;;2082   		lakb[i]._tot_bat_volt= (lakb_damp[i][6]*256)+ lakb_damp[i][7];
;;;2083   		lakb[i]._ch_curr= (lakb_damp[i][8]*256)+ lakb_damp[i][9];
;;;2084   		lakb[i]._dsch_curr= (lakb_damp[i][10]*256)+ lakb_damp[i][11];
;;;2085   		lakb[i]._s_o_c= lakb_damp[i][12];
;;;2086   		lakb[i]._r_b_t= lakb_damp[i][15];
;;;2087   		lakb[i]._c_c_l_v= (lakb_damp[i][16]*256)+ lakb_damp[i][17];
;;;2088   		lakb[i]._s_o_h= lakb_damp[i][18];
;;;2089   		lakb[i]._flags1= lakb_damp[i][34];
;;;2090   		lakb[i]._flags2= lakb_damp[i][35];
;;;2091   		lakb[i]._b_p_ser_num= lakb_damp[i][36];
;;;2092   
;;;2093   /*		if(lakb[i]._rat_cap==0)
;;;2094   			{
;;;2095   			if(lakb[i]._isOnCnt)
;;;2096   				{
;;;2097   				lakb[i]._isOnCnt--;
;;;2098   				if(lakb[i]._isOnCnt==0)
;;;2099   					{
;;;2100   					if(lakb[i]._battIsOn!=0) bLAKB_KONF_CH=1;
;;;2101   					}
;;;2102   				}
;;;2103   			}
;;;2104   		else 
;;;2105   			{
;;;2106   			if(lakb[i]._isOnCnt<50)
;;;2107   				{
;;;2108   				lakb[i]._isOnCnt++;
;;;2109   				if(lakb[i]._isOnCnt==50)
;;;2110   					{
;;;2111   					if(lakb[i]._battIsOn!=1) bLAKB_KONF_CH=1;
;;;2112   					}
;;;2113   				}
;;;2114   			} */
;;;2115   		gran(&lakb[i]._isOnCnt,0,50);
;;;2116   	 	}
;;;2117   
;;;2118   	if(lakb_damp[0][41]==100)
;;;2119   		{
;;;2120   		li_bat._485Error=1;
;;;2121   		}
;;;2122   	if(lakb_damp[0][41]==0)
;;;2123   		{
;;;2124   		//if(bRS485ERR)bLAKB_KONF_CH=1;
;;;2125   		li_bat._485Error=0;
;;;2126   		}
;;;2127   	li_bat._485ErrorCnt=lakb_damp[0][41];
;;;2128   
;;;2129   
;;;2130   	}
;;;2131   
;;;2132   
;;;2133   #endif
;;;2134   
;;;2135   
;;;2136   #ifdef UKU_TELECORE2015
;;;2137   //   
;;;2138   //TODO          
;;;2139   li_bat._batStat=bsOK;
;;;2140   if(BAT_TYPE==1) //COSLIGHT
;;;2141   	{
;;;2142   	if(li_bat._batStat==bsOK)
;;;2143   		{
;;;2144   		li_bat._Ub=lakb[0]._tot_bat_volt/10;
;;;2145   
;;;2146   		if(lakb[0]._ch_curr)li_bat._Ib=lakb[0]._ch_curr/10;
;;;2147   		else if(lakb[0]._dsch_curr) li_bat._Ib=bat[0]._Ib/10;//lakb[0]._dsch_curr/10;
;;;2148   	
;;;2149   		li_bat._ratCap=lakb[0]._rat_cap/100;
;;;2150   		li_bat._soc=lakb[0]._s_o_c;
;;;2151   		li_bat._soh=lakb[0]._s_o_h;
;;;2152   		li_bat._cclv=lakb[0]._c_c_l_v/10;
;;;2153   		li_bat._Tb=lakb[0]._max_cell_temp;
;;;2154   		li_bat._rbt=lakb[0]._r_b_t;
;;;2155   		}
;;;2156   	else 
;;;2157   		{
;;;2158   		li_bat._Ub=bat[0]._Ub;
;;;2159   		li_bat._Ib=bat[0]._Ib/10;
;;;2160   		li_bat._Tb=bat[0]._Tb;
;;;2161   		}
;;;2162   
;;;2163   	if((li_bat._485Error)||(li_bat._canError))
;;;2164   		{
;;;2165   		li_bat._batStat=bsOFF;
;;;2166   		}
;;;2167   	else li_bat._batStat=bsOK;
;;;2168   	}
;;;2169   else if(BAT_TYPE==2) //SACRED SUN
;;;2170   	{
;;;2171   	}
;;;2172   else if(BAT_TYPE==3) //ZTT
;;;2173   	{
;;;2174   	if(li_bat._batStat==bsOK)
;;;2175   		{
;;;2176   
;;;2177   		}
;;;2178   	}
;;;2179   #endif
;;;2180   
;;;2181   
;;;2182   /*
;;;2183   if((BAT_IS_ON[0]==bisON)&&(BAT_TYPE[0]==1)&&(BAT_LINK==0))
;;;2184   	{
;;;2185   
;;;2186   
;;;2187   	if(bat_drv_rx_buff[13]<=0x39)bbb[0]=bat_drv_rx_buff[13]-0x30;
;;;2188   	else bbb[0]=bat_drv_rx_buff[13]-55;
;;;2189   	if(bat_drv_rx_buff[14]<=0x39)bbb[1]=bat_drv_rx_buff[14]-0x30;
;;;2190   	else bbb[1]=bat_drv_rx_buff[14]-55;
;;;2191   	if(bat_drv_rx_buff[15]<=0x39)bbb[2]=bat_drv_rx_buff[15]-0x30;
;;;2192   	else bbb[2]=bat_drv_rx_buff[15]-55;
;;;2193   	if(bat_drv_rx_buff[16]<=0x39)bbb[3]=bat_drv_rx_buff[16]-0x30;
;;;2194   	else bbb[3]=bat_drv_rx_buff[16]-55;
;;;2195   
;;;2196   	tempSS=0;
;;;2197   	tempSS=((bbb[0]*4096)+(bbb[1]*256)+(bbb[2]*16)+bbb[3]);
;;;2198   
;;;2199   	bat[0]._max_cell_volt=(tempSS+5)/10;
;;;2200   
;;;2201   	if(bat_drv_rx_buff[17]<=0x39)bbb[0]=bat_drv_rx_buff[17]-0x30;
;;;2202   	else bbb[0]=bat_drv_rx_buff[17]-55;
;;;2203   	if(bat_drv_rx_buff[18]<=0x39)bbb[1]=bat_drv_rx_buff[18]-0x30;
;;;2204   	else bbb[1]=bat_drv_rx_buff[18]-55;
;;;2205   	if(bat_drv_rx_buff[19]<=0x39)bbb[2]=bat_drv_rx_buff[19]-0x30;
;;;2206   	else bbb[2]=bat_drv_rx_buff[19]-55;
;;;2207   	if(bat_drv_rx_buff[20]<=0x39)bbb[3]=bat_drv_rx_buff[20]-0x30;
;;;2208   	else bbb[3]=bat_drv_rx_buff[20]-55;
;;;2209   
;;;2210   	tempSS=0;
;;;2211   	tempSS=((bbb[0]*4096)+(bbb[1]*256)+(bbb[2]*16)+bbb[3]);
;;;2212   
;;;2213   	bat[0]._min_cell_volt=(tempSS+5)/10;
;;;2214   
;;;2215   
;;;2216   	}*/
;;;2217   
;;;2218   
;;;2219   
;;;2220   }
001560  e8bd8ffe          POP      {r1-r11,pc}
;;;2221   
                          ENDP

                  mnemo_hndl PROC
;;;2222   //-----------------------------------------------
;;;2223   void mnemo_hndl(void)
001564  4a7a              LDR      r2,|L1.5968|
;;;2224   {
;;;2225   if(((ind==iMn_220)||(ind==iMn))&&(sub_ind==0)&&(MNEMO_ON==mnON))
;;;2226   	{
;;;2227   	if(mnemo_cnt)mnemo_cnt--;
001566  497b              LDR      r1,|L1.5972|
001568  7810              LDRB     r0,[r2,#0]            ;2225  ; a_ind
00156a  2804              CMP      r0,#4                 ;2225
00156c  d001              BEQ      |L1.5490|
00156e  2801              CMP      r0,#1                 ;2225
001570  d105              BNE      |L1.5502|
                  |L1.5490|
001572  7850              LDRB     r0,[r2,#1]            ;2225  ; a_ind
001574  b918              CBNZ     r0,|L1.5502|
001576  4878              LDR      r0,|L1.5976|
001578  7800              LDRB     r0,[r0,#0]            ;2225  ; MNEMO_ON
00157a  2855              CMP      r0,#0x55              ;2225
00157c  d003              BEQ      |L1.5510|
                  |L1.5502|
;;;2228   	}
;;;2229   else mnemo_cnt=MNEMO_TIME;
00157e  4877              LDR      r0,|L1.5980|
001580  8800              LDRH     r0,[r0,#0]  ; MNEMO_TIME
001582  7008              STRB     r0,[r1,#0]
                  |L1.5508|
;;;2230   }
001584  4770              BX       lr
                  |L1.5510|
001586  7808              LDRB     r0,[r1,#0]            ;2227  ; mnemo_cnt
001588  2800              CMP      r0,#0                 ;2227
00158a  d0fb              BEQ      |L1.5508|
00158c  f1a00001          SUB      r0,r0,#1              ;2227
001590  7008              STRB     r0,[r1,#0]            ;2227
001592  4770              BX       lr
;;;2231   
                          ENDP

                  adc_init PROC
;;;2232   //-----------------------------------------------
;;;2233   void adc_init(void)
001594  4872              LDR      r0,|L1.5984|
;;;2234   {
;;;2235   
;;;2236   SET_REG(LPC_PINCON->PINSEL1,1,(25-16)*2,2);
001596  6841              LDR      r1,[r0,#4]
001598  f4212140          BIC      r1,r1,#0xc0000
00159c  f4412180          ORR      r1,r1,#0x40000
0015a0  6041              STR      r1,[r0,#4]
;;;2237   SET_REG(LPC_PINCON->PINSEL1,1,(24-16)*2,2);
0015a2  6841              LDR      r1,[r0,#4]
0015a4  f4213140          BIC      r1,r1,#0x30000
0015a8  f4413180          ORR      r1,r1,#0x10000
0015ac  6041              STR      r1,[r0,#4]
;;;2238   SET_REG(LPC_PINCON->PINSEL1,1,(23-16)*2,2);
0015ae  6841              LDR      r1,[r0,#4]
0015b0  f4214140          BIC      r1,r1,#0xc000
0015b4  f4414180          ORR      r1,r1,#0x4000
0015b8  6041              STR      r1,[r0,#4]
;;;2239   
;;;2240   
;;;2241   SET_REG(LPC_PINCON->PINMODE1,2,(25-16)*2,2);
0015ba  6c41              LDR      r1,[r0,#0x44]
0015bc  f4212140          BIC      r1,r1,#0xc0000
0015c0  f4412100          ORR      r1,r1,#0x80000
0015c4  6441              STR      r1,[r0,#0x44]
;;;2242   SET_REG(LPC_PINCON->PINMODE1,2,(24-16)*2,2);
0015c6  6c41              LDR      r1,[r0,#0x44]
0015c8  f4213140          BIC      r1,r1,#0x30000
0015cc  f4413100          ORR      r1,r1,#0x20000
0015d0  6441              STR      r1,[r0,#0x44]
;;;2243   SET_REG(LPC_PINCON->PINMODE1,2,(23-16)*2,2);
0015d2  6c41              LDR      r1,[r0,#0x44]
0015d4  f4214140          BIC      r1,r1,#0xc000
0015d8  f4414100          ORR      r1,r1,#0x8000
0015dc  6441              STR      r1,[r0,#0x44]
;;;2244   
;;;2245   SET_REG(LPC_ADC->ADCR,0,24,3);
0015de  4861              LDR      r0,|L1.5988|
0015e0  6801              LDR      r1,[r0,#0]
0015e2  f02161e0          BIC      r1,r1,#0x7000000
0015e6  6001              STR      r1,[r0,#0]
;;;2246   
;;;2247   SET_REG(LPC_ADC->ADCR,1,21,1);
0015e8  6801              LDR      r1,[r0,#0]
0015ea  f4411100          ORR      r1,r1,#0x200000
0015ee  6001              STR      r1,[r0,#0]
;;;2248   SET_REG(LPC_ADC->ADCR,0,16,1);
0015f0  6801              LDR      r1,[r0,#0]
0015f2  f4213180          BIC      r1,r1,#0x10000
0015f6  6001              STR      r1,[r0,#0]
;;;2249   SET_REG(LPC_ADC->ADCR,1,8,8);
0015f8  6801              LDR      r1,[r0,#0]
0015fa  f421417f          BIC      r1,r1,#0xff00
0015fe  f4417180          ORR      r1,r1,#0x100
001602  6001              STR      r1,[r0,#0]
;;;2250   
;;;2251   //SET_REG(LPC_GPIO0->FIODIR,7,5,3);
;;;2252   //SET_REG(LPC_GPIO0->FIOPIN,4,5,3);
;;;2253   	
;;;2254   	/*if(adc_ch<=7)*///SET_REG(LPC_ADC->ADCR,1<<5,0,8);
;;;2255        /*else if(adc_ch==8) SET_REG(LPC_ADC->ADCR,1<<2,0,8);
;;;2256        else SET_REG(LPC_ADC->ADCR,1<<4,0,8);*/
;;;2257   
;;;2258   LPC_ADC->ADINTEN     =  (1<< 8);      /* global enable interrupt            */
001604  f44f7180          MOV      r1,#0x100
001608  60c1              STR      r1,[r0,#0xc]
00160a  4857              LDR      r0,|L1.5992|
00160c  f44f0180          MOV      r1,#0x400000
001610  6001              STR      r1,[r0,#0]
;;;2259   
;;;2260   NVIC_EnableIRQ(ADC_IRQn);             /* enable ADC Interrupt               */
;;;2261   
;;;2262   
;;;2263   }
001612  4770              BX       lr
;;;2264   
                          ENDP

                  adc_drv7 PROC
;;;2265   //-----------------------------------------------
;;;2266   void adc_drv7(void) //(U - )
001614  e92d41f0          PUSH     {r4-r8,lr}
;;;2267   {
;;;2268   //int temp_S;
;;;2269   //char i;
;;;2270   //signed short temp_SS;
;;;2271   
;;;2272   adc_self_ch_disp[0]=abs_pal(adc_self_ch_buff[1]-adc_self_ch_buff[0]);//adc_self_ch_buff[0]&0x0f80;
001618  4c54              LDR      r4,|L1.5996|
00161a  8860              LDRH     r0,[r4,#2]  ; adc_self_ch_buff
00161c  8821              LDRH     r1,[r4,#0]  ; adc_self_ch_buff
00161e  1a40              SUBS     r0,r0,r1
001620  b200              SXTH     r0,r0
001622  f7fffffe          BL       abs_pal
001626  1da6              ADDS     r6,r4,#6
001628  8030              STRH     r0,[r6,#0]
;;;2273   adc_self_ch_disp[1]=abs_pal(adc_self_ch_buff[2]-adc_self_ch_buff[1]);//adc_self_ch_buff[1]&0x0f80;
00162a  88a0              LDRH     r0,[r4,#4]  ; adc_self_ch_buff
00162c  8861              LDRH     r1,[r4,#2]  ; adc_self_ch_buff
00162e  1a40              SUBS     r0,r0,r1
001630  b200              SXTH     r0,r0
001632  f7fffffe          BL       abs_pal
001636  8070              STRH     r0,[r6,#2]
;;;2274   adc_self_ch_disp[2]=abs_pal(adc_self_ch_buff[2]-adc_self_ch_buff[0]);//adc_self_ch_buff[2]&0x0f80;
001638  88a0              LDRH     r0,[r4,#4]  ; adc_self_ch_buff
00163a  8821              LDRH     r1,[r4,#0]  ; adc_self_ch_buff
00163c  1a40              SUBS     r0,r0,r1
00163e  b200              SXTH     r0,r0
001640  f7fffffe          BL       abs_pal
001644  80b0              STRH     r0,[r6,#4]
;;;2275   
;;;2276   //adc_self_ch_disp[0]=adc_self_ch_buff[0]&0x0ff0;
;;;2277   //adc_self_ch_disp[1]=adc_self_ch_buff[1]&0x0ff0;
;;;2278   //adc_self_ch_disp[2]=adc_self_ch_buff[2]&0x0ff0;
;;;2279   
;;;2280   
;;;2281   if(adc_self_ch_disp[2]<300)//==adc_self_ch_disp[2])
001646  f44f7196          MOV      r1,#0x12c
;;;2282   	{
;;;2283   	adc_result=adc_self_ch_buff[2];
00164a  f1a40592          SUB      r5,r4,#0x92
00164e  4288              CMP      r0,r1                 ;2281
001650  da02              BGE      |L1.5720|
001652  88a0              LDRH     r0,[r4,#4]  ; adc_self_ch_buff
001654  8568              STRH     r0,[r5,#0x2a]
001656  e00c              B        |L1.5746|
                  |L1.5720|
;;;2284   	} 
;;;2285   else if(adc_self_ch_disp[1]<300)//==adc_self_ch_disp[2])
001658  f9b60002          LDRSH    r0,[r6,#2]  ; adc_self_ch_disp
00165c  4288              CMP      r0,r1
00165e  da02              BGE      |L1.5734|
;;;2286   	{
;;;2287   	adc_result=adc_self_ch_buff[1];
001660  8860              LDRH     r0,[r4,#2]  ; adc_self_ch_buff
001662  8568              STRH     r0,[r5,#0x2a]
001664  e005              B        |L1.5746|
                  |L1.5734|
;;;2288   	}
;;;2289   else if(adc_self_ch_disp[0]<300)//==adc_self_ch_disp[1])
001666  f9b60000          LDRSH    r0,[r6,#0]  ; adc_self_ch_disp
00166a  4288              CMP      r0,r1
00166c  da01              BGE      |L1.5746|
;;;2290   	{
;;;2291   	adc_result=adc_self_ch_buff[0];
00166e  8820              LDRH     r0,[r4,#0]  ; adc_self_ch_buff
001670  8568              STRH     r0,[r5,#0x2a]
                  |L1.5746|
;;;2292   	}
;;;2293       //adc_result=92;
;;;2294   
;;;2295   if(adc_ch_net)
001672  78af              LDRB     r7,[r5,#2]  ; adc_ch_net
001674  2600              MOVS     r6,#0
001676  b32f              CBZ      r7,|L1.5828|
;;;2296   	{
;;;2297   
;;;2298   	main_power_buffer[0]+=(long)(adc_result);
001678  483d              LDR      r0,|L1.6000|
00167a  f9b5102a          LDRSH    r1,[r5,#0x2a]  ; adc_result
00167e  6802              LDR      r2,[r0,#0]  ; main_power_buffer
001680  440a              ADD      r2,r2,r1
001682  6002              STR      r2,[r0,#0]  ; main_power_buffer
;;;2299   	main_power_buffer[1]+=(long)(adc_result);
001684  6842              LDR      r2,[r0,#4]  ; main_power_buffer
001686  440a              ADD      r2,r2,r1
001688  6042              STR      r2,[r0,#4]  ; main_power_buffer
;;;2300   	main_power_buffer[2]+=(long)(adc_result);
00168a  6882              LDR      r2,[r0,#8]  ; main_power_buffer
00168c  440a              ADD      r2,r2,r1
00168e  6082              STR      r2,[r0,#8]  ; main_power_buffer
;;;2301   	main_power_buffer[3]+=(long)(adc_result);
001690  68c2              LDR      r2,[r0,#0xc]  ; main_power_buffer
001692  4411              ADD      r1,r1,r2
001694  60c1              STR      r1,[r0,#0xc]  ; main_power_buffer
;;;2302   
;;;2303   	adc_net_buff_cnt++;
001696  8e69              LDRH     r1,[r5,#0x32]  ; adc_net_buff_cnt
001698  f1010101          ADD      r1,r1,#1
00169c  b209              SXTH     r1,r1
00169e  8669              STRH     r1,[r5,#0x32]
;;;2304   	if(adc_net_buff_cnt>=0x1000)
0016a0  f5b15f80          CMP      r1,#0x1000
0016a4  db00              BLT      |L1.5800|
;;;2305   		{
;;;2306   		adc_net_buff_cnt=0;
0016a6  866e              STRH     r6,[r5,#0x32]
                  |L1.5800|
;;;2307   		}
;;;2308   	if((adc_net_buff_cnt&0x03ff)==0)
0016a8  f9b51032          LDRSH    r1,[r5,#0x32]  ; adc_net_buff_cnt
0016ac  058a              LSLS     r2,r1,#22
0016ae  d131              BNE      |L1.5908|
;;;2309   		{
;;;2310   		#ifdef UKU_220
;;;2311   		net_buff_=(short)((main_power_buffer[adc_net_buff_cnt>>10])>>11);
;;;2312   		#else
;;;2313   		#ifdef UKU_220_V2
;;;2314   		net_buff_=(short)((main_power_buffer[adc_net_buff_cnt>>10])>>11);
;;;2315   		#else
;;;2316   		net_buff_=(short)((main_power_buffer[adc_net_buff_cnt>>10])>>8);
0016b0  ea4f21a1          ASR      r1,r1,#10
0016b4  f8502021          LDR      r2,[r0,r1,LSL #2]
0016b8  ea4f2222          ASR      r2,r2,#8
0016bc  852a              STRH     r2,[r5,#0x28]
;;;2317   		#endif
;;;2318   		#endif
;;;2319   		main_power_buffer[adc_net_buff_cnt>>10]=0;
0016be  f8406021          STR      r6,[r0,r1,LSL #2]
0016c2  e027              B        |L1.5908|
                  |L1.5828|
;;;2320   		}
;;;2321   
;;;2322   
;;;2323   	} 
;;;2324   else if(!adc_ch_net)
;;;2325   	{
;;;2326   	adc_buff[adc_ch][adc_ch_cnt]=(long)adc_result;
0016c4  482b              LDR      r0,|L1.6004|
0016c6  78ec              LDRB     r4,[r5,#3]  ; adc_ch
0016c8  792a              LDRB     r2,[r5,#4]  ; adc_ch_cnt
0016ca  eb001384          ADD      r3,r0,r4,LSL #6
0016ce  f9b5102a          LDRSH    r1,[r5,#0x2a]  ; adc_result
0016d2  f8431022          STR      r1,[r3,r2,LSL #2]
;;;2327   	
;;;2328   	if((adc_ch_cnt&0x03)==0)
0016d6  0790              LSLS     r0,r2,#30
0016d8  d10f              BNE      |L1.5882|
;;;2329   		{
;;;2330   		long temp_L;
;;;2331   		char i;
;;;2332   		temp_L=0;
0016da  4601              MOV      r1,r0
                  |L1.5852|
;;;2333   		for(i=0;i<16;i++)
;;;2334   			{
;;;2335   			temp_L+=adc_buff[adc_ch][i];
0016dc  f853c020          LDR      r12,[r3,r0,LSL #2]
0016e0  4461              ADD      r1,r1,r12
0016e2  f1000001          ADD      r0,r0,#1              ;2333
0016e6  b2c0              UXTB     r0,r0                 ;2333
0016e8  2810              CMP      r0,#0x10              ;2333
0016ea  d3f7              BCC      |L1.5852|
;;;2336   			}
;;;2337   		adc_buff_[adc_ch]= (short)(temp_L>>4);
0016ec  ea4f1021          ASR      r0,r1,#4
0016f0  491f              LDR      r1,|L1.6000|
0016f2  f1a10120          SUB      r1,r1,#0x20
0016f6  f8210014          STRH     r0,[r1,r4,LSL #1]
                  |L1.5882|
;;;2338   
;;;2339   		//adc_buff_[3]=346;
;;;2340   		}
;;;2341   	if(++adc_ch>=16) 
0016fa  1c64              ADDS     r4,r4,#1
0016fc  b2e0              UXTB     r0,r4
0016fe  70e8              STRB     r0,[r5,#3]
001700  2810              CMP      r0,#0x10
001702  d307              BCC      |L1.5908|
;;;2342   		{
;;;2343   		adc_ch=0;
001704  70ee              STRB     r6,[r5,#3]
;;;2344   		adc_ch_cnt++;
001706  f1020201          ADD      r2,r2,#1
00170a  b2d0              UXTB     r0,r2
00170c  7128              STRB     r0,[r5,#4]
;;;2345   		if(adc_ch_cnt>=16)adc_ch_cnt=0;
00170e  2810              CMP      r0,#0x10
001710  d300              BCC      |L1.5908|
001712  712e              STRB     r6,[r5,#4]
                  |L1.5908|
;;;2346   		}
;;;2347   	}
;;;2348   
;;;2349   //adc_buff[adc_ch][adc_cnt1]=(adc_self_ch_buff[2]+adc_self_ch_buff[1])/2;
;;;2350   
;;;2351   //if(adc_buff[adc_ch][adc_cnt1]<adc_buff_min[adc_ch])adc_buff_min[adc_ch]=adc_buff[adc_ch][adc_cnt1];
;;;2352   //if(adc_buff[adc_ch][adc_cnt1]>adc_buff_max[adc_ch])adc_buff_max[adc_ch]=adc_buff[adc_ch][adc_cnt1];
;;;2353   /*
;;;2354   	{
;;;2355   	if((adc_cnt1&0x03)==0)
;;;2356   		{
;;;2357   		temp_S=0;
;;;2358   		for(i=0;i<16;i++)
;;;2359   			{
;;;2360   			temp_S+=adc_buff[adc_ch][i];
;;;2361   			} 
;;;2362            	adc_buff_[adc_ch]=temp_S>>4;
;;;2363             }
;;;2364   	}*/
;;;2365   
;;;2366   
;;;2367   		  
;;;2368   
;;;2369   adc_self_ch_cnt=0;
001714  706e              STRB     r6,[r5,#1]
;;;2370   
;;;2371   adc_ch_net++;
001716  f1070701          ADD      r7,r7,#1
;;;2372   adc_ch_net&=1;
00171a  f0070001          AND      r0,r7,#1
00171e  70a8              STRB     r0,[r5,#2]
;;;2373   
;;;2374   //SET_REG(LPC_GPIO0->FIODIR,7,5,3);
;;;2375   //SET_REG(LPC_GPIO0->FIOPIN,adc_ch,5,3);
;;;2376   
;;;2377   if(adc_ch_net)
;;;2378   	{
;;;2379   	//LPC_GPIO2->FIODIR|=(1<<7);
;;;2380   	//LPC_GPIO2->FIOPIN|=(1<<7);
;;;2381   	SET_REG(LPC_ADC->ADCR,1<<2,0,8);
001720  4a10              LDR      r2,|L1.5988|
001722  b130              CBZ      r0,|L1.5938|
001724  6810              LDR      r0,[r2,#0]
001726  f02000ff          BIC      r0,r0,#0xff
00172a  f1000004          ADD      r0,r0,#4
00172e  6010              STR      r0,[r2,#0]
001730  e060              B        |L1.6132|
                  |L1.5938|
001732  e021              B        |L1.6008|
                  |L1.5940|
                          DCD      t_ext_can_nd
                  |L1.5944|
                          DCD      t_ext_can
                  |L1.5948|
                          DCD      BAT_IS_ON
                  |L1.5952|
                          DCD      load_I
                  |L1.5956|
                          DCD      Isumm
                  |L1.5960|
                          DCD      NUMINV
                  |L1.5964|
                          DCD      inv
                  |L1.5968|
                          DCD      a_ind
                  |L1.5972|
                          DCD      mnemo_cnt
                  |L1.5976|
                          DCD      MNEMO_ON
                  |L1.5980|
                          DCD      MNEMO_TIME
                  |L1.5984|
                          DCD      0x4002c000
                  |L1.5988|
                          DCD      0x40034000
                  |L1.5992|
                          DCD      0xe000e100
                  |L1.5996|
                          DCD      ||area_number.21||+0x92
                  |L1.6000|
                          DCD      ||.bss||+0x420
                  |L1.6004|
                          DCD      ||.bss||
                  |L1.6008|
;;;2382   	}
;;;2383   else
;;;2384   	{
;;;2385   	//LPC_GPIO2->FIODIR|=(1<<7);
;;;2386   	//LPC_GPIO2->FIOPIN&=~(1<<7);
;;;2387   	if(!(adc_ch&(1<<3)))SET_REG(LPC_ADC->ADCR,1<<0,0,8);
001778  78e9              LDRB     r1,[r5,#3]  ; adc_ch
00177a  0708              LSLS     r0,r1,#28
00177c  d406              BMI      |L1.6028|
00177e  6810              LDR      r0,[r2,#0]
001780  f02000ff          BIC      r0,r0,#0xff
001784  f1000001          ADD      r0,r0,#1
001788  6010              STR      r0,[r2,#0]
00178a  e005              B        |L1.6040|
                  |L1.6028|
;;;2388   	else 			SET_REG(LPC_ADC->ADCR,1<<1,0,8);
00178c  6810              LDR      r0,[r2,#0]
00178e  f02000ff          BIC      r0,r0,#0xff
001792  f1000002          ADD      r0,r0,#2
001796  6010              STR      r0,[r2,#0]
                  |L1.6040|
;;;2389   
;;;2390   
;;;2391   	SET_REG(LPC_GPIO0->FIODIR,1,28,1);
001798  48fa              LDR      r0,|L1.7044|
00179a  6803              LDR      r3,[r0,#0]
00179c  f0435380          ORR      r3,r3,#0x10000000
0017a0  6003              STR      r3,[r0,#0]
;;;2392   	SET_REG(LPC_GPIO1->FIODIR,1,30,1);
0017a2  6a03              LDR      r3,[r0,#0x20]
0017a4  f0434380          ORR      r3,r3,#0x40000000
0017a8  6203              STR      r3,[r0,#0x20]
;;;2393   	SET_REG(LPC_GPIO3->FIODIR,1,26,1);
0017aa  6e03              LDR      r3,[r0,#0x60]
0017ac  f0436380          ORR      r3,r3,#0x4000000
0017b0  6603              STR      r3,[r0,#0x60]
;;;2394   
;;;2395   	if(!(adc_ch&(1<<0)))SET_REG(LPC_GPIO0->FIOPIN,0,28,1);
0017b2  07cb              LSLS     r3,r1,#31
0017b4  d00a              BEQ      |L1.6092|
;;;2396   	else 			SET_REG(LPC_GPIO0->FIOPIN,1,28,1);
0017b6  6943              LDR      r3,[r0,#0x14]
0017b8  f0435380          ORR      r3,r3,#0x10000000
0017bc  6143              STR      r3,[r0,#0x14]
                  |L1.6078|
;;;2397   
;;;2398   	if(!(adc_ch&(1<<1)))SET_REG(LPC_GPIO1->FIOPIN,0,30,1);
0017be  078b              LSLS     r3,r1,#30
0017c0  d409              BMI      |L1.6102|
0017c2  6b43              LDR      r3,[r0,#0x34]
0017c4  f0234380          BIC      r3,r3,#0x40000000
0017c8  6343              STR      r3,[r0,#0x34]
0017ca  e008              B        |L1.6110|
                  |L1.6092|
0017cc  6943              LDR      r3,[r0,#0x14]         ;2395
0017ce  f0235380          BIC      r3,r3,#0x10000000     ;2395
0017d2  6143              STR      r3,[r0,#0x14]         ;2395
0017d4  e7f3              B        |L1.6078|
                  |L1.6102|
;;;2399   	else 			SET_REG(LPC_GPIO1->FIOPIN,1,30,1);
0017d6  6b43              LDR      r3,[r0,#0x34]
0017d8  f0434380          ORR      r3,r3,#0x40000000
0017dc  6343              STR      r3,[r0,#0x34]
                  |L1.6110|
;;;2400   
;;;2401   	if(!(adc_ch&(1<<2)))SET_REG(LPC_GPIO3->FIOPIN,0,26,1);
0017de  0749              LSLS     r1,r1,#29
0017e0  d404              BMI      |L1.6124|
0017e2  6f41              LDR      r1,[r0,#0x74]
0017e4  f0216180          BIC      r1,r1,#0x4000000
0017e8  6741              STR      r1,[r0,#0x74]
0017ea  e003              B        |L1.6132|
                  |L1.6124|
;;;2402   	else 			SET_REG(LPC_GPIO3->FIOPIN,1,26,1);
0017ec  6f41              LDR      r1,[r0,#0x74]
0017ee  f0416180          ORR      r1,r1,#0x4000000
0017f2  6741              STR      r1,[r0,#0x74]
                  |L1.6132|
;;;2403   	}
;;;2404   	
;;;2405   
;;;2406   
;;;2407   
;;;2408   LPC_ADC->ADCR |=  (1<<24);
0017f4  6810              LDR      r0,[r2,#0]
0017f6  f0407080          ORR      r0,r0,#0x1000000
0017fa  6010              STR      r0,[r2,#0]
                  |L1.6140|
;;;2409   
;;;2410   }
0017fc  e8bd81f0          POP      {r4-r8,pc}
;;;2411   
                          ENDP

                  avg_hndl PROC
;;;2668   //-----------------------------------------------
;;;2669   void avg_hndl(void)
001800  b5f0              PUSH     {r4-r7,lr}
;;;2670   { 
;;;2671   char i;
;;;2672   
;;;2673   //#define AVGCNTMAX	5
;;;2674   if(avg_main_cnt)
001802  4ce1              LDR      r4,|L1.7048|
001804  f9b40020          LDRSH    r0,[r4,#0x20]  ; avg_main_cnt
001808  b118              CBZ      r0,|L1.6162|
;;;2675   	{
;;;2676   	avg_main_cnt--;
00180a  f1a00001          SUB      r0,r0,#1
00180e  8420              STRH     r0,[r4,#0x20]
;;;2677   	goto avg_hndl_end;
001810  e08d              B        |L1.6446|
                  |L1.6162|
;;;2678   	}                 
;;;2679   
;;;2680   avg_num=0;
001812  f04f0500          MOV      r5,#0
001816  72e5              STRB     r5,[r4,#0xb]
;;;2681   
;;;2682   for(i=0;i<NUMIST;i++)
001818  4628              MOV      r0,r5
00181a  49dd              LDR      r1,|L1.7056|
;;;2683   	{
;;;2684   	if((bps[i]._state==bsWRK)&&(bps[i]._cnt<20))avg_num++;
00181c  4bdb              LDR      r3,|L1.7052|
00181e  f9b12000          LDRSH    r2,[r1,#0]            ;2682
001822  e012              B        |L1.6218|
                  |L1.6180|
001824  ebc001c0          RSB      r1,r0,r0,LSL #3
001828  eb011100          ADD      r1,r1,r0,LSL #4
00182c  eb030181          ADD      r1,r3,r1,LSL #2
001830  788e              LDRB     r6,[r1,#2]
001832  2e01              CMP      r6,#1
001834  d106              BNE      |L1.6212|
001836  78c9              LDRB     r1,[r1,#3]
001838  2914              CMP      r1,#0x14
00183a  d203              BCS      |L1.6212|
00183c  7ae1              LDRB     r1,[r4,#0xb]  ; avg_num
00183e  f1010101          ADD      r1,r1,#1
001842  72e1              STRB     r1,[r4,#0xb]
                  |L1.6212|
001844  f1000001          ADD      r0,r0,#1              ;2682
001848  b2c0              UXTB     r0,r0                 ;2682
                  |L1.6218|
00184a  4290              CMP      r0,r2                 ;2682
00184c  dbea              BLT      |L1.6180|
;;;2685   	}
;;;2686   
;;;2687   /*if((K[NUMI]>=1)&&(bps_state[0]==ssWRK))	avg_num++;
;;;2688   if((K[NUMI]>=2)&&(bps_state[1]==ssWRK))	avg_num++;
;;;2689   if((K[NUMI]>=3)&&(bps_state[2]==ssWRK))	avg_num++;*/
;;;2690   
;;;2691   	
;;;2692   if(avg_num<2)
00184e  7ae6              LDRB     r6,[r4,#0xb]  ; avg_num
001850  2e02              CMP      r6,#2
001852  d36c              BCC      |L1.6446|
;;;2693   	{
;;;2694   	goto avg_hndl_end;
;;;2695   	}
;;;2696   	
;;;2697   else
;;;2698   	{
;;;2699   	i_avg_min=5000;
001854  f2413088          MOV      r0,#0x1388
001858  6720              STR      r0,[r4,#0x70]  ; i_avg_min
;;;2700   	i_avg_max=0;
00185a  66e5              STR      r5,[r4,#0x6c]  ; i_avg_max
;;;2701   	i_avg_summ=0;
00185c  6765              STR      r5,[r4,#0x74]  ; i_avg_summ
;;;2702   	for(i=0;i<NUMIST;i++)
00185e  f04f0100          MOV      r1,#0
001862  e017              B        |L1.6292|
                  |L1.6244|
;;;2703   		{
;;;2704   		if(bps[i]._state==bsWRK)
001864  ebc100c1          RSB      r0,r1,r1,LSL #3
001868  eb001001          ADD      r0,r0,r1,LSL #4
00186c  eb030080          ADD      r0,r3,r0,LSL #2
001870  7887              LDRB     r7,[r0,#2]
001872  2f01              CMP      r7,#1
001874  d10b              BNE      |L1.6286|
;;;2705   			{
;;;2706   			if(bps[i]._Ii>i_avg_max)i_avg_max=bps[i]._Ii;
001876  6a40              LDR      r0,[r0,#0x24]
001878  6ee7              LDR      r7,[r4,#0x6c]  ; i_avg_max
00187a  42b8              CMP      r0,r7
00187c  dd00              BLE      |L1.6272|
00187e  66e0              STR      r0,[r4,#0x6c]  ; i_avg_max
                  |L1.6272|
;;;2707   			if(bps[i]._Ii<i_avg_min)i_avg_min=bps[i]._Ii;
001880  6f27              LDR      r7,[r4,#0x70]  ; i_avg_min
001882  42b8              CMP      r0,r7
001884  da00              BGE      |L1.6280|
001886  6720              STR      r0,[r4,#0x70]  ; i_avg_min
                  |L1.6280|
;;;2708   			
;;;2709   			i_avg_summ+=bps[i]._Ii;
001888  6f67              LDR      r7,[r4,#0x74]  ; i_avg_summ
00188a  4438              ADD      r0,r0,r7
00188c  6760              STR      r0,[r4,#0x74]  ; i_avg_summ
                  |L1.6286|
00188e  f1010101          ADD      r1,r1,#1              ;2702
001892  b2c9              UXTB     r1,r1                 ;2702
                  |L1.6292|
001894  4291              CMP      r1,r2                 ;2702
001896  dbe5              BLT      |L1.6244|
;;;2710   			}
;;;2711   		}
;;;2712   	i_avg=i_avg_summ/avg_num;	
001898  6f60              LDR      r0,[r4,#0x74]  ; i_avg_summ
00189a  fb90f6f6          SDIV     r6,r0,r6
00189e  67a6              STR      r6,[r4,#0x78]  ; i_avg
;;;2713   	
;;;2714   	if(i_avg_min==0)i_avg_min=1;
0018a0  6f20              LDR      r0,[r4,#0x70]  ; i_avg_min
0018a2  2101              MOVS     r1,#1                 ;2684
0018a4  b900              CBNZ     r0,|L1.6312|
0018a6  6721              STR      r1,[r4,#0x70]  ; i_avg_min
                  |L1.6312|
;;;2715   
;;;2716   	avg=i_avg_max;
0018a8  6ee0              LDR      r0,[r4,#0x6c]  ; i_avg_max
;;;2717   	avg*=100;
0018aa  f04f0764          MOV      r7,#0x64
0018ae  fb00f007          MUL      r0,r0,r7
;;;2718   	avg/=i_avg_min;
0018b2  6f27              LDR      r7,[r4,#0x70]  ; i_avg_min
0018b4  fb90f0f7          SDIV     r0,r0,r7
0018b8  67e0              STR      r0,[r4,#0x7c]  ; avg
;;;2719   
;;;2720   	if(avg>160) bAVG=1;
0018ba  28a0              CMP      r0,#0xa0
0018bc  dd00              BLE      |L1.6336|
0018be  72a1              STRB     r1,[r4,#0xa]
                  |L1.6336|
;;;2721   	if(avg<120) bAVG=0;
0018c0  2878              CMP      r0,#0x78
0018c2  da00              BGE      |L1.6342|
0018c4  72a5              STRB     r5,[r4,#0xa]
                  |L1.6342|
;;;2722   
;;;2723   	if(bAVG==1)
0018c6  7aa0              LDRB     r0,[r4,#0xa]  ; bAVG
0018c8  2801              CMP      r0,#1
0018ca  d130              BNE      |L1.6446|
;;;2724   		{
;;;2725   		for(i=0;i<NUMIST;i++)
0018cc  f04f0100          MOV      r1,#0
;;;2726   			{
;;;2727   			if(bps[i]._state==bsWRK)
;;;2728   				{
;;;2729   				if(bps[i]._Ii>i_avg)bps[i]._x_--;
;;;2730   				if(bps[i]._Ii<i_avg)bps[i]._x_++;
;;;2731   			
;;;2732   				if(bps[i]._x_<-50)bps[i]._x_=-50;
0018d0  f06f0431          MVN      r4,#0x31
0018d4  e029              B        |L1.6442|
                  |L1.6358|
0018d6  ebc100c1          RSB      r0,r1,r1,LSL #3       ;2727
0018da  eb001001          ADD      r0,r0,r1,LSL #4       ;2727
0018de  eb030080          ADD      r0,r3,r0,LSL #2       ;2727
0018e2  7885              LDRB     r5,[r0,#2]            ;2727
0018e4  2d01              CMP      r5,#1                 ;2727
0018e6  d11d              BNE      |L1.6436|
0018e8  6a45              LDR      r5,[r0,#0x24]         ;2729
0018ea  42b5              CMP      r5,r6                 ;2729
0018ec  dd05              BLE      |L1.6394|
0018ee  f8b05050          LDRH     r5,[r0,#0x50]         ;2729
0018f2  f1a50501          SUB      r5,r5,#1              ;2729
0018f6  f8a05050          STRH     r5,[r0,#0x50]         ;2729
                  |L1.6394|
0018fa  da05              BGE      |L1.6408|
0018fc  f8b05050          LDRH     r5,[r0,#0x50]         ;2730
001900  f1050501          ADD      r5,r5,#1              ;2730
001904  f8a05050          STRH     r5,[r0,#0x50]         ;2730
                  |L1.6408|
001908  f9b05050          LDRSH    r5,[r0,#0x50]
00190c  42a5              CMP      r5,r4
00190e  da01              BGE      |L1.6420|
001910  f8a04050          STRH     r4,[r0,#0x50]
                  |L1.6420|
;;;2733   				if(bps[i]._x_>50)bps[i]._x_=50;	
001914  f9b05050          LDRSH    r5,[r0,#0x50]
001918  2d32              CMP      r5,#0x32
00191a  dd03              BLE      |L1.6436|
00191c  f04f0532          MOV      r5,#0x32
001920  f8a05050          STRH     r5,[r0,#0x50]
                  |L1.6436|
001924  f1010101          ADD      r1,r1,#1              ;2725
001928  b2c9              UXTB     r1,r1                 ;2725
                  |L1.6442|
00192a  4291              CMP      r1,r2                 ;2725
00192c  dbd3              BLT      |L1.6358|
                  |L1.6446|
;;;2734   				}
;;;2735   			}		
;;;2736   		}			
;;;2737   	}   	 
;;;2738   
;;;2739   
;;;2740   avg_hndl_end:
;;;2741   __nop();  
00192e  bf00              NOP      
;;;2742   }
001930  bdf0              POP      {r4-r7,pc}
;;;2743   
                          ENDP

                  rele_hndl PROC
;;;2756   //*************-----------------------------------------------
;;;2757   void rele_hndl(void)
001932  e92d41f0          PUSH     {r4-r8,lr}
;;;2758   {
;;;2759   //static char cnt_rel_sam;
;;;2760   //char temp;
;;;2761   
;;;2762   //temp=0;
;;;2763   
;;;2764   
;;;2765   SET_REG(LPC_PINCON->PINSEL0,0,4*2,6*2);
001936  4897              LDR      r0,|L1.7060|
001938  6801              LDR      r1,[r0,#0]
00193a  4a97              LDR      r2,|L1.7064|
00193c  ea010102          AND      r1,r1,r2
001940  6001              STR      r1,[r0,#0]
;;;2766   SET_REG(LPC_GPIO0->FIODIR,63,4,6);
001942  4c90              LDR      r4,|L1.7044|
001944  6821              LDR      r1,[r4,#0]
001946  f441717c          ORR      r1,r1,#0x3f0
00194a  6021              STR      r1,[r4,#0]
;;;2767   SET_REG(LPC_PINCON->PINSEL7,0,(25-16)*2,2);
00194c  69c1              LDR      r1,[r0,#0x1c]
00194e  f4212140          BIC      r1,r1,#0xc0000
001952  61c1              STR      r1,[r0,#0x1c]
;;;2768   SET_REG(LPC_GPIO3->FIODIR,1,25,1);
001954  6e21              LDR      r1,[r4,#0x60]
001956  f0417100          ORR      r1,r1,#0x2000000
00195a  6621              STR      r1,[r4,#0x60]
;;;2769   SET_REG(LPC_PINCON->PINSEL1,0,(29-16)*2,2);
00195c  6841              LDR      r1,[r0,#4]
00195e  f0216140          BIC      r1,r1,#0xc000000
001962  6041              STR      r1,[r0,#4]
;;;2770   SET_REG(LPC_GPIO0->FIODIR,1,29,1);
001964  6820              LDR      r0,[r4,#0]
001966  f0405000          ORR      r0,r0,#0x20000000
00196a  6020              STR      r0,[r4,#0]
;;;2771   
;;;2772   
;;;2773   
;;;2774   
;;;2775   
;;;2776   
;;;2777   if((((bat[0]._rel_stat)  || (tbatdisable_stat!=tbdsON))&&(tbatdisable_cmnd))	&& (main_1Hz_cnt>5))
00196c  488c              LDR      r0,|L1.7072|
00196e  4d8b              LDR      r5,|L1.7068|
001970  498d              LDR      r1,|L1.7080|
001972  7802              LDRB     r2,[r0,#0]  ; tbatdisable_stat
001974  488b              LDR      r0,|L1.7076|
001976  f895303c          LDRB     r3,[r5,#0x3c]  ; bat
00197a  f9b11000          LDRSH    r1,[r1,#0]
00197e  7800              LDRB     r0,[r0,#0]
001980  4313              ORRS     r3,r3,r2
001982  d007              BEQ      |L1.6548|
001984  b130              CBZ      r0,|L1.6548|
001986  2905              CMP      r1,#5
001988  dd04              BLE      |L1.6548|
;;;2778   	{
;;;2779   	SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_BAT1,1);
00198a  69a3              LDR      r3,[r4,#0x18]
00198c  f4437380          ORR      r3,r3,#0x100
001990  61a3              STR      r3,[r4,#0x18]
001992  e003              B        |L1.6556|
                  |L1.6548|
;;;2780   	}
;;;2781   else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_BAT1,1);	  	
001994  69e3              LDR      r3,[r4,#0x1c]
001996  f4437380          ORR      r3,r3,#0x100
00199a  61e3              STR      r3,[r4,#0x1c]
                  |L1.6556|
;;;2782   
;;;2783   if((((bat[1]._rel_stat) || (tbatdisable_stat!=tbdsON))&&(tbatdisable_cmnd))	&& (main_1Hz_cnt>5))
00199c  f8953088          LDRB     r3,[r5,#0x88]  ; bat
0019a0  4313              ORRS     r3,r3,r2
0019a2  d007              BEQ      |L1.6580|
0019a4  b130              CBZ      r0,|L1.6580|
0019a6  2905              CMP      r1,#5
0019a8  dd04              BLE      |L1.6580|
;;;2784   	{
;;;2785   	SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_BAT2,1);
0019aa  69a0              LDR      r0,[r4,#0x18]
0019ac  f0400040          ORR      r0,r0,#0x40
0019b0  61a0              STR      r0,[r4,#0x18]
0019b2  e003              B        |L1.6588|
                  |L1.6580|
;;;2786   	}
;;;2787   else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_BAT2,1);
0019b4  69e0              LDR      r0,[r4,#0x1c]
0019b6  f0400040          ORR      r0,r0,#0x40
0019ba  61e0              STR      r0,[r4,#0x1c]
                  |L1.6588|
;;;2788   
;;;2789   
;;;2790   if(mess_find_unvol((MESS2RELE_HNDL))&&(mess_data[0]==PARAM_RELE_SAMOKALIBR)) 
0019bc  20d2              MOVS     r0,#0xd2
0019be  f7fffffe          BL       mess_find_unvol
0019c2  4d7a              LDR      r5,|L1.7084|
0019c4  b110              CBZ      r0,|L1.6604|
0019c6  6828              LDR      r0,[r5,#0]  ; mess_data
0019c8  2864              CMP      r0,#0x64
0019ca  d048              BEQ      |L1.6750|
                  |L1.6604|
;;;2791   	{
;;;2792   	if(mess_data[1]==1)SET_REG(LPC_GPIO0->FIOSET,1,29,1);
;;;2793   	else if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,29,1);
;;;2794   	}
;;;2795   else SET_REG(LPC_GPIO0->FIOCLR,1,29,1);
0019cc  69e0              LDR      r0,[r4,#0x1c]
0019ce  f0405000          ORR      r0,r0,#0x20000000
0019d2  61e0              STR      r0,[r4,#0x1c]
                  |L1.6612|
;;;2796   
;;;2797   
;;;2798   #ifndef UKU2071x
;;;2799   //  
;;;2800   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_NET))
;;;2801   	{
;;;2802   	if(mess_data[1]==0) 			SET_REG(LPC_GPIO3->FIOSET,1,SHIFT_REL_AV_NET,1);
;;;2803   	else 						SET_REG(LPC_GPIO3->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;2804   	}
;;;2805   else	if(!(avar_ind_stat&0x00000001)) 	SET_REG(LPC_GPIO3->FIOSET,1,SHIFT_REL_AV_NET,1);
;;;2806   else 							SET_REG(LPC_GPIO3->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;2807   #endif
;;;2808   #ifdef UKU2071x
;;;2809   //  
;;;2810   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_NET))
0019d4  20d2              MOVS     r0,#0xd2
0019d6  f7fffffe          BL       mess_find_unvol
;;;2811   	{
;;;2812   	if(mess_data[1]==0)				SET_REG(LPC_GPIO3->FIOCLR,1,SHIFT_REL_AV_NET,1); 
;;;2813   	else 						SET_REG(LPC_GPIO3->FIOSET,1,SHIFT_REL_AV_NET,1);
;;;2814   	}
;;;2815   else	if(!(avar_ind_stat&0x00000001))	SET_REG(LPC_GPIO3->FIOCLR,1,SHIFT_REL_AV_NET,1);
0019da  4e75              LDR      r6,|L1.7088|
0019dc  b110              CBZ      r0,|L1.6628|
0019de  6828              LDR      r0,[r5,#0]            ;2810  ; mess_data
0019e0  2866              CMP      r0,#0x66              ;2810
0019e2  d04b              BEQ      |L1.6780|
                  |L1.6628|
0019e4  6830              LDR      r0,[r6,#0]  ; avar_ind_stat
0019e6  07c0              LSLS     r0,r0,#31
0019e8  d054              BEQ      |L1.6804|
;;;2816   else 					  		SET_REG(LPC_GPIO3->FIOSET,1,SHIFT_REL_AV_NET,1);
0019ea  6fa0              LDR      r0,[r4,#0x78]
0019ec  f0407000          ORR      r0,r0,#0x2000000
0019f0  67a0              STR      r0,[r4,#0x78]
                  |L1.6642|
;;;2817   #endif
;;;2818   
;;;2819   #ifdef UKU_3U
;;;2820   //  
;;;2821   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BAT1))
;;;2822   	{
;;;2823   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT1,1);
;;;2824   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT1,1);
;;;2825        }
;;;2826   else 
;;;2827   	{
;;;2828   	if(!(avar_ind_stat&0x00000002)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT1,1);
;;;2829        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT1,1);
;;;2830   	} 
;;;2831   
;;;2832   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BAT2))
;;;2833   	{
;;;2834   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT2,1);
;;;2835   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT2,1);
;;;2836        }
;;;2837   else 
;;;2838   	{
;;;2839   	if(!(avar_ind_stat&0x00000004)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT2,1);
;;;2840        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT2,1);
;;;2841   	} 
;;;2842   
;;;2843   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BPS))
;;;2844   	{
;;;2845   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
;;;2846   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
;;;2847        }
;;;2848   else 
;;;2849   	{
;;;2850   	if(!(avar_ind_stat&0x000007f8)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
;;;2851        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
;;;2852   	} 
;;;2853   
;;;2854   #endif
;;;2855   
;;;2856   
;;;2857   #ifdef UKU_GLONASS
;;;2858   //  
;;;2859   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BAT1))
;;;2860   	{
;;;2861   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT1,1);
;;;2862   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT1,1);
;;;2863        }
;;;2864   else 
;;;2865   	{
;;;2866   	if(!(avar_ind_stat&0x00000002)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT1,1);
;;;2867        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT1,1);
;;;2868   	} 
;;;2869   
;;;2870   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BAT2))
;;;2871   	{
;;;2872   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT2,1);
;;;2873   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT2,1);
;;;2874        }
;;;2875   else 
;;;2876   	{
;;;2877   	if(!(avar_ind_stat&0x00000004)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT2,1);
;;;2878        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT2,1);
;;;2879   	} 
;;;2880   
;;;2881   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BPS))
;;;2882   	{
;;;2883   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
;;;2884   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
;;;2885        }
;;;2886   else 
;;;2887   	{
;;;2888   	if(!(avar_ind_stat&0x000007f8)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
;;;2889        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
;;;2890   	} 
;;;2891   
;;;2892   #endif
;;;2893   
;;;2894   #ifdef U /*
;;;2895   
;;;2896   
;;;2897   
;;;2898   /*
;;;2899   //  
;;;2900   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BAT))
;;;2901   	{
;;;2902   	if(mess_data[1]==0) temp&=~(1<<SHIFT_REL_AV_BAT);
;;;2903   	else if(mess_data[1]==1) temp|=(1<<SHIFT_REL_AV_BAT);
;;;2904        }
;;;2905   else 
;;;2906   	{
;;;2907   	if(!(avar_ind_stat&0x00000006)) temp&=~(1<<SHIFT_REL_AV_BAT);
;;;2908        else temp|=(1<<SHIFT_REL_AV_BAT);
;;;2909   	} 
;;;2910   */
;;;2911   
;;;2912   #endif
;;;2913   
;;;2914   #ifdef UKU_RSTKM
;;;2915   
;;;2916   //  
;;;2917   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_COMM))
;;;2918   	{
;;;2919   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_COMM,1);
;;;2920   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_COMM,1);
;;;2921   	}
;;;2922   else 
;;;2923   	{
;;;2924        if(  (!(avar_ind_stat&0x00007fff))/* &&
;;;2925             ((!SK_REL_EN[0]) || (sk_av_stat[0]!=sasON))  &&
;;;2926             ((!SK_REL_EN[1]) || (sk_av_stat[1]!=sasON))  &&
;;;2927             ((!SK_REL_EN[2]) || (sk_av_stat[2]!=sasON))  &&
;;;2928             ((!SK_REL_EN[3]) || (sk_av_stat[3]!=sasON))*/  )SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_COMM,1);
;;;2929        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_COMM,1);
;;;2930   	}
;;;2931   	
;;;2932   
;;;2933   // 
;;;2934   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_LIGHT))
;;;2935   	{
;;;2936   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LIGHT,1);
;;;2937   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LIGHT,1);
;;;2938        }
;;;2939   else 
;;;2940   	{
;;;2941   	if(sk_av_stat[0]!=sasON) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LIGHT,1);
;;;2942        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LIGHT,1);
;;;2943   	}
;;;2944   
;;;2945   
;;;2946   //  
;;;2947   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_LOAD_OFF))
;;;2948   	{
;;;2949   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LOAD_OFF,1);
;;;2950   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LOAD_OFF,1);
;;;2951        }
;;;2952   else if(tloaddisable_cmnd==0)
;;;2953   	{
;;;2954   	SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LOAD_OFF,1);
;;;2955   	}
;;;2956   else if((tloaddisable_cmnd)&&(tloaddisable_cmnd<=11))
;;;2957   	{
;;;2958   	SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LOAD_OFF,1);
;;;2959   	}
;;;2960   
;;;2961   else 
;;;2962   	{
;;;2963   	if(!(tloaddisable_stat==tldsON)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LOAD_OFF,1);
;;;2964        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LOAD_OFF,1);
;;;2965   	} 
;;;2966   
;;;2967   //  
;;;2968   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_VENT))
;;;2969   	{
;;;2970   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;2971   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT,1);
;;;2972   	}
;;;2973   else 
;;;2974   	{
;;;2975   	if(mixer_vent_stat==mvsOFF) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;2976        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT,1);
;;;2977   	} 
;;;2978   
;;;2979   #endif
;;;2980   
;;;2981   #ifdef UKU_KONTUR
;;;2982   
;;;2983   //  
;;;2984   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_COMM))
;;;2985   	{
;;;2986   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_COMM,1);
;;;2987   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_COMM,1);
;;;2988   	}
;;;2989   else 
;;;2990   	{
;;;2991        if(  (!(avar_ind_stat&0x00007fff)) &&
;;;2992             ((!SK_REL_EN[0]) || (sk_av_stat[0]!=sasON))  &&
;;;2993             ((!SK_REL_EN[1]) || (sk_av_stat[1]!=sasON))  &&
;;;2994             ((!SK_REL_EN[2]) || (sk_av_stat[2]!=sasON))  /*&&
;;;2995             ((!SK_REL_EN[3]) || (sk_av_stat[3]!=sasON))*/  )SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_COMM,1);
;;;2996        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_COMM,1);
;;;2997   	}
;;;2998   
;;;2999   	
;;;3000   //rel_warm_plazma=0;
;;;3001   //    
;;;3002   /*
;;;3003   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_WARM))
;;;3004   	{
;;;3005   	if(mess_data[1]==0)
;;;3006   		{
;;;3007   		SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_WARM,1);
;;;3008   		rel_warm_plazma=1;
;;;3009   		}
;;;3010   	else if(mess_data[1]==1) 
;;;3011   		{
;;;3012   		SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_WARM,1);
;;;3013   		rel_warm_plazma=2;
;;;3014   		}
;;;3015        }
;;;3016   else 
;;;3017   	{
;;;3018   	if(warm_stat_k==wsOFF) 
;;;3019   		{
;;;3020   		SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_WARM,1);
;;;3021   		rel_warm_plazma=3;
;;;3022   		}
;;;3023        else 
;;;3024   		{
;;;3025   		SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_WARM,1);
;;;3026   		rel_warm_plazma=4;
;;;3027   		}
;;;3028   	}
;;;3029   */
;;;3030   // 
;;;3031   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_LIGHT))
;;;3032   	{
;;;3033   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LIGHT,1);
;;;3034   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LIGHT,1);
;;;3035        }
;;;3036   else 
;;;3037   	{
;;;3038   	if(sk_av_stat[0]!=sasON) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LIGHT,1);
;;;3039        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LIGHT,1);
;;;3040   	}
;;;3041   
;;;3042   
;;;3043   
;;;3044   //  
;;;3045   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_LOAD_OFF))
;;;3046   	{
;;;3047   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LOAD_OFF,1);
;;;3048   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LOAD_OFF,1);
;;;3049        }
;;;3050   else if(tloaddisable_cmnd==0)
;;;3051   	{
;;;3052   	SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LOAD_OFF,1);
;;;3053   	}
;;;3054   else if((tloaddisable_cmnd)&&(tloaddisable_cmnd<=11))
;;;3055   	{
;;;3056   	SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LOAD_OFF,1);
;;;3057   	}
;;;3058   
;;;3059   else 
;;;3060   	{
;;;3061   	if(!(tloaddisable_stat==tldsON)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LOAD_OFF,1);
;;;3062        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LOAD_OFF,1);
;;;3063   	} 
;;;3064   
;;;3065   //    
;;;3066   if(RELE_LOG)
;;;3067   	{
;;;3068   	if((mess_find_unvol(MESS2RELE_HNDL))&&(mess_data[0]==PARAM_RELE_VENT_WARM))
;;;3069   		{
;;;3070   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT_WARM,1);
;;;3071   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT_WARM,1);
;;;3072   		}
;;;3073   	else 
;;;3074   		{
;;;3075   		if(warm_stat_k==wsOFF) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT_WARM,1);
;;;3076   	     else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT_WARM,1);
;;;3077   		} 
;;;3078   
;;;3079   	}
;;;3080   else 
;;;3081   	{
;;;3082   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_VENT_WARM))
;;;3083   		{
;;;3084   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT_WARM,1);
;;;3085   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT_WARM,1);
;;;3086   		}
;;;3087   	else 
;;;3088   		{
;;;3089   		if(vent_stat_k==vsOFF) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT_WARM,1);
;;;3090   	     else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT_WARM,1);
;;;3091   		} 
;;;3092   	}
;;;3093   #endif
;;;3094   
;;;3095   #ifdef UKU_6U
;;;3096   //  
;;;3097   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BAT1))
;;;3098   	{
;;;3099   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT1,1);
;;;3100   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT1,1);
;;;3101        }
;;;3102   else 
;;;3103   	{
;;;3104   	if(!(avar_ind_stat&0x00000002)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT1,1);
;;;3105        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT1,1);
;;;3106   	} 
;;;3107   
;;;3108   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BAT2))
;;;3109   	{
;;;3110   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT2,1);
;;;3111   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT2,1);
;;;3112       }
;;;3113   else if(NPN_OUT==npnoRELEAVBAT2)
;;;3114   	{
;;;3115   	if(npn_stat==npnsOFF)//&&(mess_find_unvol(MESS2RELE_HNDL))&&(mess_data[0]==PARAM_RELE_NPN))
;;;3116   		{
;;;3117   		/*if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT2,1);
;;;3118   		else if(mess_data[1]==1)*/ SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT2,1);
;;;3119        	}
;;;3120   	else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT2,1);
;;;3121   	}
;;;3122   else 
;;;3123   	{
;;;3124   	if(!(avar_ind_stat&0x00000004)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT2,1);
;;;3125       else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT2,1);
;;;3126   	} 
;;;3127   
;;;3128   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BPS))
;;;3129   	{
;;;3130   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
;;;3131   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
;;;3132        }
;;;3133   else 
;;;3134   	{
;;;3135   	if(!(avar_ind_stat&0x000007f8)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
;;;3136        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
;;;3137   	} 
;;;3138   
;;;3139   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_VENT))
;;;3140   	{
;;;3141   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT,1);
;;;3142   	else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;3143   	}
;;;3144   else if((NPN_OUT==npnoRELEVENT))
;;;3145   	{
;;;3146   	if(npn_stat==npnsOFF)//&&(mess_find_unvol(MESS2RELE_HNDL))&&(mess_data[0]==PARAM_RELE_NPN))
;;;3147   		{
;;;3148   		/*if(mess_data[1]==0)*/ SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;3149   		//else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;3150       	}
;;;3151   	else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT,1);
;;;3152   	}
;;;3153   else 
;;;3154   	{
;;;3155   	if(!vent_stat) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT,1);
;;;3156   	else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;3157   	}
;;;3158   
;;;3159   #endif
;;;3160   
;;;3161   #ifdef UKU_220
;;;3162   //  
;;;3163   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BAT))
;;;3164   	{
;;;3165   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT,1);
;;;3166   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT,1);
;;;3167        }
;;;3168   else 
;;;3169   	{
;;;3170   	if(!(avar_ind_stat&0x00000002)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT,1);
;;;3171        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT,1);
;;;3172   	} 
;;;3173   
;;;3174   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BPS))
;;;3175   	{
;;;3176   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
;;;3177   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
;;;3178        }
;;;3179   else 
;;;3180   	{
;;;3181   	if(!(avar_ind_stat&0x000007f8)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
;;;3182        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
;;;3183   	} 
;;;3184   
;;;3185   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_VENT))
;;;3186   	{
;;;3187   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT,1);
;;;3188   	else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;3189   	}
;;;3190   else 
;;;3191   	{
;;;3192   	if((RELE_VENT_LOGIC==0)||(RELE_VENT_LOGIC==1))
;;;3193   		{
;;;3194   		if(vent_stat) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT,1);
;;;3195   		else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;3196   		}
;;;3197   	else 
;;;3198   		{
;;;3199   		if((avar_ind_stat&0x00000004)) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT,1);
;;;3200        	else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;3201   		}
;;;3202   	}
;;;3203   
;;;3204   #endif
;;;3205   
;;;3206   #ifdef UKU_220_V2
;;;3207   //  
;;;3208   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BAT))
;;;3209   	{
;;;3210   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT,1);
;;;3211   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT,1);
;;;3212        }
;;;3213   else 
;;;3214   	{
;;;3215   	if(!(avar_ind_stat&0x00000002)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT,1);
;;;3216        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT,1);
;;;3217   	} 
;;;3218   
;;;3219   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BPS))
;;;3220   	{
;;;3221   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
;;;3222   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
;;;3223        }
;;;3224   else 
;;;3225   	{
;;;3226   	if(!(avar_ind_stat&0x000007f8)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
;;;3227        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
;;;3228   	} 
;;;3229   
;;;3230   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_VENT))
;;;3231   	{
;;;3232   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT,1);
;;;3233   	else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;3234   	}
;;;3235   else 
;;;3236   	{
;;;3237   	if((RELE_VENT_LOGIC==0)||(RELE_VENT_LOGIC==1))
;;;3238   		{
;;;3239   		if(vent_stat) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT,1);
;;;3240   		else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;3241   		}
;;;3242   	else 
;;;3243   		{
;;;3244   		if((avar_ind_stat&0x00000004)) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT,1);
;;;3245        	else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;3246   		}
;;;3247   	}
;;;3248   
;;;3249   #endif
;;;3250   
;;;3251   #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;3252   
;;;3253   if((AUSW_MAIN==22010)||(AUSW_MAIN==22011))
0019f2  4870              LDR      r0,|L1.7092|
;;;3254   	{
;;;3255   	#ifndef UKU2071x
;;;3256   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_NET))
;;;3257   		{
;;;3258   		if(mess_data[1]==0) SET_REG(LPC_GPIO3->FIOSET,1,25,1);
;;;3259   		else SET_REG(LPC_GPIO3->FIOCLR,1,25,1);
;;;3260   		}
;;;3261   	else	if(!(avar_ind_stat&0x00000001)) SET_REG(LPC_GPIO3->FIOSET,1,25,1);
;;;3262   	else SET_REG(LPC_GPIO3->FIOCLR,1,25,1);
;;;3263   	#endif
;;;3264   	#ifdef UKU2071x
;;;3265   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_NET))
;;;3266   		{
;;;3267   		if(mess_data[1]==0) SET_REG(LPC_GPIO3->FIOCLR,1,25,1);
;;;3268   		else SET_REG(LPC_GPIO3->FIOSET,1,25,1);
;;;3269   		}
;;;3270   	else	if(!(avar_ind_stat&0x00000001)) SET_REG(LPC_GPIO3->FIOCLR,1,25,1);
;;;3271   	else SET_REG(LPC_GPIO3->FIOSET,1,25,1);
;;;3272   	#endif
;;;3273   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BPS))
;;;3274   		{
;;;3275   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,7,1);
;;;3276   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,7,1);
;;;3277   	     }
;;;3278   	else 
;;;3279   		{
;;;3280   		if(!(avar_ind_stat&0x100007f8)) SET_REG(LPC_GPIO0->FIOCLR,1,7,1);
;;;3281   	     else SET_REG(LPC_GPIO0->FIOSET,1,7,1);
;;;3282   		} 
;;;3283   
;;;3284   	//  
;;;3285   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BAT))
;;;3286   		{
;;;3287   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,4,1);
;;;3288   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,4,1);
;;;3289        	}
;;;3290   	else 
;;;3291   		{
;;;3292   		if(!(ips_bat_av_stat)) SET_REG(LPC_GPIO0->FIOCLR,1,4,1);
0019f4  f8df81c0          LDR      r8,|L1.7096|
0019f8  4f70              LDR      r7,|L1.7100|
0019fa  8800              LDRH     r0,[r0,#0]            ;3253  ; AUSW_MAIN
0019fc  f5a041aa          SUB      r1,r0,#0x5500         ;3253
001a00  39fa              SUBS     r1,r1,#0xfa           ;3253
001a02  d001              BEQ      |L1.6664|
001a04  1e49              SUBS     r1,r1,#1              ;3253
001a06  d16f              BNE      |L1.6888|
                  |L1.6664|
001a08  20d2              MOVS     r0,#0xd2              ;3265
001a0a  f7fffffe          BL       mess_find_unvol
001a0e  b110              CBZ      r0,|L1.6678|
001a10  6828              LDR      r0,[r5,#0]            ;3265  ; mess_data
001a12  2866              CMP      r0,#0x66              ;3265
001a14  d043              BEQ      |L1.6814|
                  |L1.6678|
001a16  6830              LDR      r0,[r6,#0]            ;3270  ; avar_ind_stat
001a18  07c0              LSLS     r0,r0,#31             ;3270
001a1a  d04d              BEQ      |L1.6840|
001a1c  6fa0              LDR      r0,[r4,#0x78]         ;3271
001a1e  f0407000          ORR      r0,r0,#0x2000000      ;3271
001a22  67a0              STR      r0,[r4,#0x78]         ;3271
                  |L1.6692|
001a24  20d2              MOVS     r0,#0xd2              ;3273
001a26  f7fffffe          BL       mess_find_unvol
001a2a  b110              CBZ      r0,|L1.6706|
001a2c  6828              LDR      r0,[r5,#0]            ;3273  ; mess_data
001a2e  286a              CMP      r0,#0x6a              ;3273
001a30  d047              BEQ      |L1.6850|
                  |L1.6706|
001a32  6830              LDR      r0,[r6,#0]            ;3280  ; avar_ind_stat
001a34  4238              TST      r0,r7                 ;3280
001a36  d052              BEQ      |L1.6878|
001a38  69a0              LDR      r0,[r4,#0x18]         ;3281
001a3a  f0400080          ORR      r0,r0,#0x80           ;3281
001a3e  61a0              STR      r0,[r4,#0x18]         ;3281
                  |L1.6720|
001a40  20d2              MOVS     r0,#0xd2              ;3285
001a42  f7fffffe          BL       mess_find_unvol
001a46  b110              CBZ      r0,|L1.6734|
001a48  6828              LDR      r0,[r5,#0]            ;3285  ; mess_data
001a4a  2867              CMP      r0,#0x67              ;3285
001a4c  d04d              BEQ      |L1.6890|
                  |L1.6734|
001a4e  f8980000          LDRB     r0,[r8,#0]  ; ips_bat_av_stat
001a52  b380              CBZ      r0,|L1.6838|
;;;3293        	else SET_REG(LPC_GPIO0->FIOSET,1,4,1);
001a54  69a0              LDR      r0,[r4,#0x18]
001a56  f0400010          ORR      r0,r0,#0x10
001a5a  61a0              STR      r0,[r4,#0x18]
001a5c  e1f0              B        |L1.7744|
                  |L1.6750|
001a5e  6868              LDR      r0,[r5,#4]            ;2792  ; mess_data
001a60  2801              CMP      r0,#1                 ;2792
001a62  d006              BEQ      |L1.6770|
001a64  2800              CMP      r0,#0                 ;2793
001a66  d1b5              BNE      |L1.6612|
001a68  69e0              LDR      r0,[r4,#0x1c]         ;2793
001a6a  f0405000          ORR      r0,r0,#0x20000000     ;2793
001a6e  61e0              STR      r0,[r4,#0x1c]         ;2793
001a70  e7b0              B        |L1.6612|
                  |L1.6770|
001a72  69a0              LDR      r0,[r4,#0x18]         ;2792
001a74  f0405000          ORR      r0,r0,#0x20000000     ;2792
001a78  61a0              STR      r0,[r4,#0x18]         ;2792
001a7a  e7ab              B        |L1.6612|
                  |L1.6780|
001a7c  6868              LDR      r0,[r5,#4]            ;2812  ; mess_data
001a7e  b120              CBZ      r0,|L1.6794|
001a80  6fa0              LDR      r0,[r4,#0x78]         ;2813
001a82  f0407000          ORR      r0,r0,#0x2000000      ;2813
001a86  67a0              STR      r0,[r4,#0x78]         ;2813
001a88  e7b3              B        |L1.6642|
                  |L1.6794|
001a8a  6fe0              LDR      r0,[r4,#0x7c]         ;2812
001a8c  f0407000          ORR      r0,r0,#0x2000000      ;2812
001a90  67e0              STR      r0,[r4,#0x7c]         ;2812
001a92  e7ae              B        |L1.6642|
                  |L1.6804|
001a94  6fe0              LDR      r0,[r4,#0x7c]         ;2815
001a96  f0407000          ORR      r0,r0,#0x2000000      ;2815
001a9a  67e0              STR      r0,[r4,#0x7c]         ;2815
001a9c  e7a9              B        |L1.6642|
                  |L1.6814|
001a9e  6868              LDR      r0,[r5,#4]            ;3267  ; mess_data
001aa0  b120              CBZ      r0,|L1.6828|
001aa2  6fa0              LDR      r0,[r4,#0x78]         ;3268
001aa4  f0407000          ORR      r0,r0,#0x2000000      ;3268
001aa8  67a0              STR      r0,[r4,#0x78]         ;3268
001aaa  e7bb              B        |L1.6692|
                  |L1.6828|
001aac  6fe0              LDR      r0,[r4,#0x7c]         ;3267
001aae  f0407000          ORR      r0,r0,#0x2000000      ;3267
001ab2  67e0              STR      r0,[r4,#0x7c]         ;3267
001ab4  e7b6              B        |L1.6692|
                  |L1.6838|
001ab6  e027              B        |L1.6920|
                  |L1.6840|
001ab8  6fe0              LDR      r0,[r4,#0x7c]         ;3270
001aba  f0407000          ORR      r0,r0,#0x2000000      ;3270
001abe  67e0              STR      r0,[r4,#0x7c]         ;3270
001ac0  e7b0              B        |L1.6692|
                  |L1.6850|
001ac2  6868              LDR      r0,[r5,#4]            ;3275  ; mess_data
001ac4  b130              CBZ      r0,|L1.6868|
001ac6  2801              CMP      r0,#1                 ;3276
001ac8  d1ba              BNE      |L1.6720|
001aca  69a0              LDR      r0,[r4,#0x18]         ;3276
001acc  f0400080          ORR      r0,r0,#0x80           ;3276
001ad0  61a0              STR      r0,[r4,#0x18]         ;3276
001ad2  e7b5              B        |L1.6720|
                  |L1.6868|
001ad4  69e0              LDR      r0,[r4,#0x1c]         ;3275
001ad6  f0400080          ORR      r0,r0,#0x80           ;3275
001ada  61e0              STR      r0,[r4,#0x1c]         ;3275
001adc  e7b0              B        |L1.6720|
                  |L1.6878|
001ade  69e0              LDR      r0,[r4,#0x1c]         ;3280
001ae0  f0400080          ORR      r0,r0,#0x80           ;3280
001ae4  61e0              STR      r0,[r4,#0x1c]         ;3280
001ae6  e7ab              B        |L1.6720|
                  |L1.6888|
001ae8  e013              B        |L1.6930|
                  |L1.6890|
001aea  6868              LDR      r0,[r5,#4]            ;3287  ; mess_data
001aec  b110              CBZ      r0,|L1.6900|
001aee  2801              CMP      r0,#1                 ;3288
001af0  d005              BEQ      |L1.6910|
001af2  e1a5              B        |L1.7744|
                  |L1.6900|
001af4  69e0              LDR      r0,[r4,#0x1c]         ;3287
001af6  f0400010          ORR      r0,r0,#0x10           ;3287
001afa  61e0              STR      r0,[r4,#0x1c]         ;3287
001afc  e1a0              B        |L1.7744|
                  |L1.6910|
001afe  69a0              LDR      r0,[r4,#0x18]         ;3288
001b00  f0400010          ORR      r0,r0,#0x10           ;3288
001b04  61a0              STR      r0,[r4,#0x18]         ;3288
001b06  e19b              B        |L1.7744|
                  |L1.6920|
001b08  69e0              LDR      r0,[r4,#0x1c]         ;3292
001b0a  f0400010          ORR      r0,r0,#0x10           ;3292
001b0e  61e0              STR      r0,[r4,#0x1c]         ;3292
001b10  e196              B        |L1.7744|
                  |L1.6930|
;;;3294   		}
;;;3295   	}
;;;3296   
;;;3297   else	if(AUSW_MAIN==22023)
001b12  f5a041ac          SUB      r1,r0,#0x5600
001b16  3907              SUBS     r1,#7
001b18  d172              BNE      |L1.7168|
;;;3298   	{
;;;3299   
;;;3300   	//  
;;;3301   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BAT))
001b1a  20d2              MOVS     r0,#0xd2
001b1c  f7fffffe          BL       mess_find_unvol
001b20  b110              CBZ      r0,|L1.6952|
001b22  6828              LDR      r0,[r5,#0]  ; mess_data
001b24  2867              CMP      r0,#0x67
001b26  d023              BEQ      |L1.7024|
                  |L1.6952|
;;;3302   		{
;;;3303   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,4,1);
;;;3304   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,4,1);
;;;3305        	}
;;;3306   	else 
;;;3307   		{
;;;3308   		if(!(ips_bat_av_stat)) SET_REG(LPC_GPIO0->FIOCLR,1,4,1);
001b28  f8980000          LDRB     r0,[r8,#0]  ; ips_bat_av_stat
001b2c  b348              CBZ      r0,|L1.7042|
;;;3309        	else SET_REG(LPC_GPIO0->FIOSET,1,4,1);
001b2e  69a0              LDR      r0,[r4,#0x18]
001b30  f0400010          ORR      r0,r0,#0x10
001b34  61a0              STR      r0,[r4,#0x18]
                  |L1.6966|
;;;3310   		} 
;;;3311   
;;;3312   
;;;3313   	//         .    
;;;3314   	#ifndef UKU2071x
;;;3315   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_NET))
;;;3316   		{
;;;3317   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;3318   		else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_NET,1);
;;;3319   		}
;;;3320   	else	if(!(avar_ind_stat&0x00000001)) SET_REG(LPC_GPIO1->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;3321   	else SET_REG(LPC_GPIO3->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;3322   	#endif
;;;3323   	#ifdef UKU2071x
;;;3324   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_NET))
001b36  20d2              MOVS     r0,#0xd2
001b38  f7fffffe          BL       mess_find_unvol
001b3c  b110              CBZ      r0,|L1.6980|
001b3e  6828              LDR      r0,[r5,#0]  ; mess_data
001b40  2866              CMP      r0,#0x66
001b42  d047              BEQ      |L1.7124|
                  |L1.6980|
;;;3325   		{
;;;3326   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_NET,1);
;;;3327   		else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;3328   		}
;;;3329   	else	if(!(avar_ind_stat&0x00000001)) SET_REG(LPC_GPIO1->FIOSET,1,SHIFT_REL_AV_NET,1);
001b44  6830              LDR      r0,[r6,#0]  ; avar_ind_stat
001b46  07c0              LSLS     r0,r0,#31
001b48  d050              BEQ      |L1.7148|
;;;3330   	else SET_REG(LPC_GPIO3->FIOSET,1,SHIFT_REL_AV_NET,1);
001b4a  6fa0              LDR      r0,[r4,#0x78]
001b4c  f0407000          ORR      r0,r0,#0x2000000
001b50  67a0              STR      r0,[r4,#0x78]
                  |L1.6994|
;;;3331   	#endif
;;;3332   
;;;3333   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BPS))
001b52  20d2              MOVS     r0,#0xd2
001b54  f7fffffe          BL       mess_find_unvol
001b58  b110              CBZ      r0,|L1.7008|
001b5a  6828              LDR      r0,[r5,#0]  ; mess_data
001b5c  286a              CMP      r0,#0x6a
001b5e  d04a              BEQ      |L1.7158|
                  |L1.7008|
;;;3334   		{
;;;3335   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,7,1);
;;;3336   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,7,1);
;;;3337   	     }
;;;3338   	else 
;;;3339   		{
;;;3340   		if(!(avar_ind_stat&0x100007f8)) SET_REG(LPC_GPIO0->FIOCLR,1,7,1);
001b60  6830              LDR      r0,[r6,#0]  ; avar_ind_stat
001b62  4238              TST      r0,r7
001b64  d057              BEQ      |L1.7190|
;;;3341   	     else SET_REG(LPC_GPIO0->FIOSET,1,7,1);
001b66  69a0              LDR      r0,[r4,#0x18]
001b68  f0400080          ORR      r0,r0,#0x80
001b6c  61a0              STR      r0,[r4,#0x18]
001b6e  e167              B        |L1.7744|
                  |L1.7024|
001b70  6868              LDR      r0,[r5,#4]            ;3303  ; mess_data
001b72  b328              CBZ      r0,|L1.7104|
001b74  2801              CMP      r0,#1                 ;3304
001b76  d1de              BNE      |L1.6966|
001b78  69a0              LDR      r0,[r4,#0x18]         ;3304
001b7a  f0400010          ORR      r0,r0,#0x10           ;3304
001b7e  61a0              STR      r0,[r4,#0x18]         ;3304
001b80  e7d9              B        |L1.6966|
                  |L1.7042|
001b82  e022              B        |L1.7114|
                  |L1.7044|
                          DCD      0x2009c000
                  |L1.7048|
                          DCD      ||area_number.21||
                  |L1.7052|
                          DCD      bps
                  |L1.7056|
                          DCD      NUMIST
                  |L1.7060|
                          DCD      0x4002c000
                  |L1.7064|
                          DCD      0xfff000ff
                  |L1.7068|
                          DCD      bat
                  |L1.7072|
                          DCD      tbatdisable_stat
                  |L1.7076|
                          DCD      tbatdisable_cmnd
                  |L1.7080|
                          DCD      main_1Hz_cnt
                  |L1.7084|
                          DCD      mess_data
                  |L1.7088|
                          DCD      avar_ind_stat
                  |L1.7092|
                          DCD      AUSW_MAIN
                  |L1.7096|
                          DCD      ips_bat_av_stat
                  |L1.7100|
                          DCD      0x100007f8
                  |L1.7104|
001bc0  69e0              LDR      r0,[r4,#0x1c]         ;3303
001bc2  f0400010          ORR      r0,r0,#0x10           ;3303
001bc6  61e0              STR      r0,[r4,#0x1c]         ;3303
001bc8  e7b5              B        |L1.6966|
                  |L1.7114|
001bca  69e0              LDR      r0,[r4,#0x1c]         ;3308
001bcc  f0400010          ORR      r0,r0,#0x10           ;3308
001bd0  61e0              STR      r0,[r4,#0x1c]         ;3308
001bd2  e7b0              B        |L1.6966|
                  |L1.7124|
001bd4  6868              LDR      r0,[r5,#4]            ;3326  ; mess_data
001bd6  b120              CBZ      r0,|L1.7138|
001bd8  69e0              LDR      r0,[r4,#0x1c]         ;3327
001bda  f0407000          ORR      r0,r0,#0x2000000      ;3327
001bde  61e0              STR      r0,[r4,#0x1c]         ;3327
001be0  e7b7              B        |L1.6994|
                  |L1.7138|
001be2  69a0              LDR      r0,[r4,#0x18]         ;3326
001be4  f0407000          ORR      r0,r0,#0x2000000      ;3326
001be8  61a0              STR      r0,[r4,#0x18]         ;3326
001bea  e7b2              B        |L1.6994|
                  |L1.7148|
001bec  6ba0              LDR      r0,[r4,#0x38]         ;3329
001bee  f0407000          ORR      r0,r0,#0x2000000      ;3329
001bf2  63a0              STR      r0,[r4,#0x38]         ;3329
001bf4  e7ad              B        |L1.6994|
                  |L1.7158|
001bf6  6868              LDR      r0,[r5,#4]            ;3335  ; mess_data
001bf8  b118              CBZ      r0,|L1.7170|
001bfa  2801              CMP      r0,#1                 ;3336
001bfc  d006              BEQ      |L1.7180|
001bfe  e11f              B        |L1.7744|
                  |L1.7168|
001c00  e00e              B        |L1.7200|
                  |L1.7170|
001c02  69e0              LDR      r0,[r4,#0x1c]         ;3335
001c04  f0400080          ORR      r0,r0,#0x80           ;3335
001c08  61e0              STR      r0,[r4,#0x1c]         ;3335
001c0a  e119              B        |L1.7744|
                  |L1.7180|
001c0c  69a0              LDR      r0,[r4,#0x18]         ;3336
001c0e  f0400080          ORR      r0,r0,#0x80           ;3336
001c12  61a0              STR      r0,[r4,#0x18]         ;3336
001c14  e114              B        |L1.7744|
                  |L1.7190|
001c16  69e0              LDR      r0,[r4,#0x1c]         ;3340
001c18  f0400080          ORR      r0,r0,#0x80           ;3340
001c1c  61e0              STR      r0,[r4,#0x1c]         ;3340
001c1e  e10f              B        |L1.7744|
                  |L1.7200|
;;;3342   		} 
;;;3343   	}
;;;3344   else	if(AUSW_MAIN==22043)
001c20  f5a041ac          SUB      r1,r0,#0x5600
001c24  391b              SUBS     r1,r1,#0x1b
001c26  d170              BNE      |L1.7434|
;;;3345   	{
;;;3346   	//  
;;;3347   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BAT))
001c28  20d2              MOVS     r0,#0xd2
001c2a  f7fffffe          BL       mess_find_unvol
001c2e  b110              CBZ      r0,|L1.7222|
001c30  6828              LDR      r0,[r5,#0]  ; mess_data
001c32  2867              CMP      r0,#0x67
001c34  d031              BEQ      |L1.7322|
                  |L1.7222|
;;;3348   		{
;;;3349   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,4,1);
;;;3350   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,4,1);
;;;3351        	}
;;;3352   	else 
;;;3353   		{
;;;3354   		if(!(ips_bat_av_stat)) SET_REG(LPC_GPIO0->FIOCLR,1,4,1);
001c36  f8980000          LDRB     r0,[r8,#0]  ; ips_bat_av_stat
001c3a  b3b8              CBZ      r0,|L1.7340|
;;;3355        	else SET_REG(LPC_GPIO0->FIOSET,1,4,1);
001c3c  69a0              LDR      r0,[r4,#0x18]
001c3e  f0400010          ORR      r0,r0,#0x10
001c42  61a0              STR      r0,[r4,#0x18]
                  |L1.7236|
;;;3356   		} 
;;;3357   	//         .    
;;;3358   	#ifndef UKU2071x 
;;;3359   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_NET))
;;;3360   		{
;;;3361   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;3362   		else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_NET,1);
;;;3363   		}
;;;3364   	else	if(!(avar_ind_stat&0x00000001)) SET_REG(LPC_GPIO1->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;3365   	else SET_REG(LPC_GPIO3->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;3366   	#endif
;;;3367   	#ifdef UKU2071x 
;;;3368   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_NET))
001c44  20d2              MOVS     r0,#0xd2
001c46  f7fffffe          BL       mess_find_unvol
001c4a  b110              CBZ      r0,|L1.7250|
001c4c  6828              LDR      r0,[r5,#0]  ; mess_data
001c4e  2866              CMP      r0,#0x66
001c50  d037              BEQ      |L1.7362|
                  |L1.7250|
;;;3369   		{
;;;3370   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_NET,1);
;;;3371   		else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;3372   		}
;;;3373   	else	if(!(avar_ind_stat&0x00000001)) SET_REG(LPC_GPIO1->FIOSET,1,SHIFT_REL_AV_NET,1);
001c52  6830              LDR      r0,[r6,#0]  ; avar_ind_stat
001c54  07c0              LSLS     r0,r0,#31
001c56  d040              BEQ      |L1.7386|
;;;3374   	else SET_REG(LPC_GPIO3->FIOSET,1,SHIFT_REL_AV_NET,1);
001c58  6fa0              LDR      r0,[r4,#0x78]
001c5a  f0407000          ORR      r0,r0,#0x2000000
001c5e  67a0              STR      r0,[r4,#0x78]
                  |L1.7264|
;;;3375   	#endif
;;;3376   
;;;3377   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BPS))
001c60  20d2              MOVS     r0,#0xd2
001c62  f7fffffe          BL       mess_find_unvol
001c66  b110              CBZ      r0,|L1.7278|
001c68  6828              LDR      r0,[r5,#0]  ; mess_data
001c6a  286a              CMP      r0,#0x6a
001c6c  d03a              BEQ      |L1.7396|
                  |L1.7278|
;;;3378   		{
;;;3379   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,7,1);
;;;3380   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,7,1);
;;;3381   	     }
;;;3382   	else 
;;;3383   		{
;;;3384   		if(!(avar_ind_stat&0x100007f8)) SET_REG(LPC_GPIO0->FIOCLR,1,7,1);
001c6e  6830              LDR      r0,[r6,#0]  ; avar_ind_stat
001c70  4238              TST      r0,r7
001c72  d045              BEQ      |L1.7424|
;;;3385   	     else SET_REG(LPC_GPIO0->FIOSET,1,7,1);
001c74  69a0              LDR      r0,[r4,#0x18]
001c76  f0400080          ORR      r0,r0,#0x80
001c7a  61a0              STR      r0,[r4,#0x18]
                  |L1.7292|
;;;3386   		}
;;;3387   	//  
;;;3388   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BPS))
001c7c  20d2              MOVS     r0,#0xd2
001c7e  f7fffffe          BL       mess_find_unvol
001c82  b110              CBZ      r0,|L1.7306|
001c84  6828              LDR      r0,[r5,#0]  ; mess_data
001c86  286a              CMP      r0,#0x6a
001c88  d040              BEQ      |L1.7436|
                  |L1.7306|
;;;3389   		{
;;;3390   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
;;;3391   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
;;;3392        	}
;;;3393   	else 
;;;3394   		{
;;;3395   		if(!(avar_ind_stat&0x100007f8)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
001c8a  6830              LDR      r0,[r6,#0]  ; avar_ind_stat
001c8c  4238              TST      r0,r7
001c8e  d04c              BEQ      |L1.7466|
;;;3396        	else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
001c90  69a0              LDR      r0,[r4,#0x18]
001c92  f0400020          ORR      r0,r0,#0x20
001c96  61a0              STR      r0,[r4,#0x18]
001c98  e0d2              B        |L1.7744|
                  |L1.7322|
001c9a  6868              LDR      r0,[r5,#4]            ;3349  ; mess_data
001c9c  b138              CBZ      r0,|L1.7342|
001c9e  2801              CMP      r0,#1                 ;3350
001ca0  d1d0              BNE      |L1.7236|
001ca2  69a0              LDR      r0,[r4,#0x18]         ;3350
001ca4  f0400010          ORR      r0,r0,#0x10           ;3350
001ca8  61a0              STR      r0,[r4,#0x18]         ;3350
001caa  e7cb              B        |L1.7236|
                  |L1.7340|
001cac  e004              B        |L1.7352|
                  |L1.7342|
001cae  69e0              LDR      r0,[r4,#0x1c]         ;3349
001cb0  f0400010          ORR      r0,r0,#0x10           ;3349
001cb4  61e0              STR      r0,[r4,#0x1c]         ;3349
001cb6  e7c5              B        |L1.7236|
                  |L1.7352|
001cb8  69e0              LDR      r0,[r4,#0x1c]         ;3354
001cba  f0400010          ORR      r0,r0,#0x10           ;3354
001cbe  61e0              STR      r0,[r4,#0x1c]         ;3354
001cc0  e7c0              B        |L1.7236|
                  |L1.7362|
001cc2  6868              LDR      r0,[r5,#4]            ;3370  ; mess_data
001cc4  b120              CBZ      r0,|L1.7376|
001cc6  69e0              LDR      r0,[r4,#0x1c]         ;3371
001cc8  f0407000          ORR      r0,r0,#0x2000000      ;3371
001ccc  61e0              STR      r0,[r4,#0x1c]         ;3371
001cce  e7c7              B        |L1.7264|
                  |L1.7376|
001cd0  69a0              LDR      r0,[r4,#0x18]         ;3370
001cd2  f0407000          ORR      r0,r0,#0x2000000      ;3370
001cd6  61a0              STR      r0,[r4,#0x18]         ;3370
001cd8  e7c2              B        |L1.7264|
                  |L1.7386|
001cda  6ba0              LDR      r0,[r4,#0x38]         ;3373
001cdc  f0407000          ORR      r0,r0,#0x2000000      ;3373
001ce0  63a0              STR      r0,[r4,#0x38]         ;3373
001ce2  e7bd              B        |L1.7264|
                  |L1.7396|
001ce4  6868              LDR      r0,[r5,#4]            ;3379  ; mess_data
001ce6  b130              CBZ      r0,|L1.7414|
001ce8  2801              CMP      r0,#1                 ;3380
001cea  d1c7              BNE      |L1.7292|
001cec  69a0              LDR      r0,[r4,#0x18]         ;3380
001cee  f0400080          ORR      r0,r0,#0x80           ;3380
001cf2  61a0              STR      r0,[r4,#0x18]         ;3380
001cf4  e7c2              B        |L1.7292|
                  |L1.7414|
001cf6  69e0              LDR      r0,[r4,#0x1c]         ;3379
001cf8  f0400080          ORR      r0,r0,#0x80           ;3379
001cfc  61e0              STR      r0,[r4,#0x1c]         ;3379
001cfe  e7bd              B        |L1.7292|
                  |L1.7424|
001d00  69e0              LDR      r0,[r4,#0x1c]         ;3384
001d02  f0400080          ORR      r0,r0,#0x80           ;3384
001d06  61e0              STR      r0,[r4,#0x1c]         ;3384
001d08  e7b8              B        |L1.7292|
                  |L1.7434|
001d0a  e013              B        |L1.7476|
                  |L1.7436|
001d0c  6868              LDR      r0,[r5,#4]            ;3390  ; mess_data
001d0e  b110              CBZ      r0,|L1.7446|
001d10  2801              CMP      r0,#1                 ;3391
001d12  d005              BEQ      |L1.7456|
001d14  e094              B        |L1.7744|
                  |L1.7446|
001d16  69e0              LDR      r0,[r4,#0x1c]         ;3390
001d18  f0400020          ORR      r0,r0,#0x20           ;3390
001d1c  61e0              STR      r0,[r4,#0x1c]         ;3390
001d1e  e08f              B        |L1.7744|
                  |L1.7456|
001d20  69a0              LDR      r0,[r4,#0x18]         ;3391
001d22  f0400020          ORR      r0,r0,#0x20           ;3391
001d26  61a0              STR      r0,[r4,#0x18]         ;3391
001d28  e08a              B        |L1.7744|
                  |L1.7466|
001d2a  69e0              LDR      r0,[r4,#0x1c]         ;3395
001d2c  f0400020          ORR      r0,r0,#0x20           ;3395
001d30  61e0              STR      r0,[r4,#0x1c]         ;3395
001d32  e085              B        |L1.7744|
                  |L1.7476|
;;;3397   		} 
;;;3398   	}
;;;3399   else	if((AUSW_MAIN==22033)||(AUSW_MAIN==22018))
001d34  f5a041ac          SUB      r1,r0,#0x5600
001d38  3911              SUBS     r1,r1,#0x11
001d3a  d001              BEQ      |L1.7488|
001d3c  310f              ADDS     r1,r1,#0xf
001d3e  d163              BNE      |L1.7688|
                  |L1.7488|
;;;3400   	{
;;;3401   	#ifndef UKU2071x 
;;;3402   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_NET))
;;;3403   		{
;;;3404   		if(mess_data[1]==0) SET_REG(LPC_GPIO3->FIOSET,1,25,1);
;;;3405   		else SET_REG(LPC_GPIO3->FIOCLR,1,25,1);
;;;3406   		}
;;;3407   	else	if(!(avar_ind_stat&0x00000001)) SET_REG(LPC_GPIO3->FIOSET,1,25,1);
;;;3408   	else SET_REG(LPC_GPIO3->FIOCLR,1,25,1);
;;;3409   	#endif
;;;3410   	#ifdef UKU2071x 
;;;3411   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_NET))
001d40  20d2              MOVS     r0,#0xd2
001d42  f7fffffe          BL       mess_find_unvol
001d46  b110              CBZ      r0,|L1.7502|
001d48  6828              LDR      r0,[r5,#0]  ; mess_data
001d4a  2866              CMP      r0,#0x66
001d4c  d023              BEQ      |L1.7574|
                  |L1.7502|
;;;3412   		{
;;;3413   		if(mess_data[1]==0) SET_REG(LPC_GPIO3->FIOCLR,1,25,1);
;;;3414   		else SET_REG(LPC_GPIO3->FIOSET,1,25,1);
;;;3415   		}
;;;3416   	else	if(!(avar_ind_stat&0x00000001)) SET_REG(LPC_GPIO3->FIOCLR,1,25,1);
001d4e  6830              LDR      r0,[r6,#0]  ; avar_ind_stat
001d50  07c0              LSLS     r0,r0,#31
001d52  d02c              BEQ      |L1.7598|
;;;3417   	else SET_REG(LPC_GPIO3->FIOSET,1,25,1);
001d54  6fa0              LDR      r0,[r4,#0x78]
001d56  f0407000          ORR      r0,r0,#0x2000000
001d5a  67a0              STR      r0,[r4,#0x78]
                  |L1.7516|
;;;3418   	#endif
;;;3419   	
;;;3420   	
;;;3421   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BPS))
001d5c  20d2              MOVS     r0,#0xd2
001d5e  f7fffffe          BL       mess_find_unvol
001d62  b110              CBZ      r0,|L1.7530|
001d64  6828              LDR      r0,[r5,#0]  ; mess_data
001d66  286a              CMP      r0,#0x6a
001d68  d026              BEQ      |L1.7608|
                  |L1.7530|
;;;3422   		{
;;;3423   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,7,1);
;;;3424   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,7,1);
;;;3425   	     }
;;;3426   	else 
;;;3427   		{
;;;3428   		if(!(avar_ind_stat&0x100007f8)) SET_REG(LPC_GPIO0->FIOCLR,1,7,1);
001d6a  6830              LDR      r0,[r6,#0]  ; avar_ind_stat
001d6c  4238              TST      r0,r7
001d6e  d031              BEQ      |L1.7636|
;;;3429   	     else SET_REG(LPC_GPIO0->FIOSET,1,7,1);
001d70  69a0              LDR      r0,[r4,#0x18]
001d72  f0400080          ORR      r0,r0,#0x80
001d76  61a0              STR      r0,[r4,#0x18]
                  |L1.7544|
;;;3430   		} 
;;;3431   
;;;3432   	//  
;;;3433   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BAT))
001d78  20d2              MOVS     r0,#0xd2
001d7a  f7fffffe          BL       mess_find_unvol
001d7e  b110              CBZ      r0,|L1.7558|
001d80  6828              LDR      r0,[r5,#0]  ; mess_data
001d82  2867              CMP      r0,#0x67
001d84  d02b              BEQ      |L1.7646|
                  |L1.7558|
;;;3434   		{
;;;3435   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,4,1);
;;;3436   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,4,1);
;;;3437        	}
;;;3438   	else 
;;;3439   		{
;;;3440   		if(!(ips_bat_av_stat)) SET_REG(LPC_GPIO0->FIOCLR,1,4,1);
001d86  f8980000          LDRB     r0,[r8,#0]  ; ips_bat_av_stat
001d8a  b390              CBZ      r0,|L1.7666|
;;;3441        	else SET_REG(LPC_GPIO0->FIOSET,1,4,1);
001d8c  69a0              LDR      r0,[r4,#0x18]
001d8e  f0400010          ORR      r0,r0,#0x10
001d92  61a0              STR      r0,[r4,#0x18]
001d94  e054              B        |L1.7744|
                  |L1.7574|
001d96  6868              LDR      r0,[r5,#4]            ;3413  ; mess_data
001d98  b120              CBZ      r0,|L1.7588|
001d9a  6fa0              LDR      r0,[r4,#0x78]         ;3414
001d9c  f0407000          ORR      r0,r0,#0x2000000      ;3414
001da0  67a0              STR      r0,[r4,#0x78]         ;3414
001da2  e7db              B        |L1.7516|
                  |L1.7588|
001da4  6fe0              LDR      r0,[r4,#0x7c]         ;3413
001da6  f0407000          ORR      r0,r0,#0x2000000      ;3413
001daa  67e0              STR      r0,[r4,#0x7c]         ;3413
001dac  e7d6              B        |L1.7516|
                  |L1.7598|
001dae  6fe0              LDR      r0,[r4,#0x7c]         ;3416
001db0  f0407000          ORR      r0,r0,#0x2000000      ;3416
001db4  67e0              STR      r0,[r4,#0x7c]         ;3416
001db6  e7d1              B        |L1.7516|
                  |L1.7608|
001db8  6868              LDR      r0,[r5,#4]            ;3423  ; mess_data
001dba  b130              CBZ      r0,|L1.7626|
001dbc  2801              CMP      r0,#1                 ;3424
001dbe  d1db              BNE      |L1.7544|
001dc0  69a0              LDR      r0,[r4,#0x18]         ;3424
001dc2  f0400080          ORR      r0,r0,#0x80           ;3424
001dc6  61a0              STR      r0,[r4,#0x18]         ;3424
001dc8  e7d6              B        |L1.7544|
                  |L1.7626|
001dca  69e0              LDR      r0,[r4,#0x1c]         ;3423
001dcc  f0400080          ORR      r0,r0,#0x80           ;3423
001dd0  61e0              STR      r0,[r4,#0x1c]         ;3423
001dd2  e7d1              B        |L1.7544|
                  |L1.7636|
001dd4  69e0              LDR      r0,[r4,#0x1c]         ;3428
001dd6  f0400080          ORR      r0,r0,#0x80           ;3428
001dda  61e0              STR      r0,[r4,#0x1c]         ;3428
001ddc  e7cc              B        |L1.7544|
                  |L1.7646|
001dde  6868              LDR      r0,[r5,#4]            ;3435  ; mess_data
001de0  b110              CBZ      r0,|L1.7656|
001de2  2801              CMP      r0,#1                 ;3436
001de4  d006              BEQ      |L1.7668|
001de6  e02b              B        |L1.7744|
                  |L1.7656|
001de8  69e0              LDR      r0,[r4,#0x1c]         ;3435
001dea  f0400010          ORR      r0,r0,#0x10           ;3435
001dee  61e0              STR      r0,[r4,#0x1c]         ;3435
001df0  e026              B        |L1.7744|
                  |L1.7666|
001df2  e004              B        |L1.7678|
                  |L1.7668|
001df4  69a0              LDR      r0,[r4,#0x18]         ;3436
001df6  f0400010          ORR      r0,r0,#0x10           ;3436
001dfa  61a0              STR      r0,[r4,#0x18]         ;3436
001dfc  e020              B        |L1.7744|
                  |L1.7678|
001dfe  69e0              LDR      r0,[r4,#0x1c]         ;3440
001e00  f0400010          ORR      r0,r0,#0x10           ;3440
001e04  61e0              STR      r0,[r4,#0x1c]         ;3440
001e06  e01b              B        |L1.7744|
                  |L1.7688|
;;;3442   		} 
;;;3443   	} 	 
;;;3444   else	
;;;3445   	{
;;;3446   	//         .    
;;;3447   	#ifndef UKU2071x 
;;;3448   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_NET))
;;;3449   		{
;;;3450   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;3451   		else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_NET,1);
;;;3452   		}
;;;3453   	else	if(!(avar_ind_stat&0x00000001)) SET_REG(LPC_GPIO1->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;3454   	else SET_REG(LPC_GPIO3->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;3455   	#endif
;;;3456   	#ifdef UKU2071x 
;;;3457   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_NET))
001e08  20d2              MOVS     r0,#0xd2
001e0a  f7fffffe          BL       mess_find_unvol
001e0e  b110              CBZ      r0,|L1.7702|
001e10  6828              LDR      r0,[r5,#0]  ; mess_data
001e12  2866              CMP      r0,#0x66
001e14  d02d              BEQ      |L1.7794|
                  |L1.7702|
;;;3458   		{
;;;3459   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_NET,1);
;;;3460   		else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;3461   		}
;;;3462   	else	if(!(avar_ind_stat&0x00000001)) SET_REG(LPC_GPIO1->FIOSET,1,SHIFT_REL_AV_NET,1);
001e16  6830              LDR      r0,[r6,#0]  ; avar_ind_stat
001e18  07c0              LSLS     r0,r0,#31
001e1a  d036              BEQ      |L1.7818|
;;;3463   	else SET_REG(LPC_GPIO3->FIOSET,1,SHIFT_REL_AV_NET,1);
001e1c  6fa0              LDR      r0,[r4,#0x78]
001e1e  f0407000          ORR      r0,r0,#0x2000000
001e22  67a0              STR      r0,[r4,#0x78]
                  |L1.7716|
;;;3464   	#endif
;;;3465   
;;;3466   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BPS))
001e24  20d2              MOVS     r0,#0xd2
001e26  f7fffffe          BL       mess_find_unvol
001e2a  b110              CBZ      r0,|L1.7730|
001e2c  6828              LDR      r0,[r5,#0]  ; mess_data
001e2e  286a              CMP      r0,#0x6a
001e30  d030              BEQ      |L1.7828|
                  |L1.7730|
;;;3467   		{
;;;3468   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
;;;3469   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
;;;3470        	}
;;;3471   	else 
;;;3472   		{
;;;3473   		if(!(avar_ind_stat&0x100007f8)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
001e32  6830              LDR      r0,[r6,#0]  ; avar_ind_stat
001e34  4238              TST      r0,r7
001e36  d03b              BEQ      |L1.7856|
;;;3474        	else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
001e38  69a0              LDR      r0,[r4,#0x18]
001e3a  f0400020          ORR      r0,r0,#0x20
001e3e  61a0              STR      r0,[r4,#0x18]
                  |L1.7744|
;;;3475   		}
;;;3476   	}
;;;3477   //   
;;;3478   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_EXT))	 
001e40  20d2              MOVS     r0,#0xd2
001e42  f7fffffe          BL       mess_find_unvol
001e46  b110              CBZ      r0,|L1.7758|
001e48  6828              LDR      r0,[r5,#0]  ; mess_data
001e4a  2871              CMP      r0,#0x71
001e4c  d036              BEQ      |L1.7868|
                  |L1.7758|
;;;3479   	{
;;;3480   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,9,1);
;;;3481   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,9,1);
;;;3482   	}
;;;3483   else if(DOP_RELE_FUNC==0)	//     
001e4e  48f9              LDR      r0,|L1.8756|
001e50  f9b00000          LDRSH    r0,[r0,#0]  ; DOP_RELE_FUNC
001e54  b388              CBZ      r0,|L1.7866|
;;;3484   	{
;;;3485   	if(!speedChIsOn) SET_REG(LPC_GPIO0->FIOCLR,1,9,1);
;;;3486   	else SET_REG(LPC_GPIO0->FIOSET,1,9,1);
;;;3487   	}
;;;3488   else if(DOP_RELE_FUNC==1)  //      
001e56  2801              CMP      r0,#1
001e58  d10a              BNE      |L1.7792|
;;;3489   	{
;;;3490   	if((mess_find_unvol(MESS2RELE_HNDL))&& (mess_data[0]==PARAM_RELE_BAT_IS_DISCHARGED)) SET_REG(LPC_GPIO0->FIOCLR,1,9,1);
001e5a  20d2              MOVS     r0,#0xd2
001e5c  f7fffffe          BL       mess_find_unvol
001e60  b110              CBZ      r0,|L1.7784|
001e62  6828              LDR      r0,[r5,#0]  ; mess_data
001e64  2872              CMP      r0,#0x72
001e66  d044              BEQ      |L1.7922|
                  |L1.7784|
;;;3491   	else SET_REG(LPC_GPIO0->FIOSET,1,9,1);
001e68  69a0              LDR      r0,[r4,#0x18]
001e6a  f4407000          ORR      r0,r0,#0x200
001e6e  61a0              STR      r0,[r4,#0x18]
                  |L1.7792|
;;;3492   	}	 	
;;;3493   #endif
;;;3494   
;;;3495   #ifdef UKU_KONTUR
;;;3496   
;;;3497   //  
;;;3498   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_COMM))
;;;3499   	{
;;;3500   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_COMM,1);
;;;3501   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_COMM,1);
;;;3502   	}
;;;3503   else 
;;;3504   	{
;;;3505        if(  (!(avar_ind_stat&0x00007fff)) &&
;;;3506             ((!SK_REL_EN[0]) || (sk_av_stat[0]!=sasON))  &&
;;;3507             ((!SK_REL_EN[1]) || (sk_av_stat[1]!=sasON))  &&
;;;3508             ((!SK_REL_EN[2]) || (sk_av_stat[2]!=sasON))  /*&&
;;;3509             ((!SK_REL_EN[3]) || (sk_av_stat[3]!=sasON))*/  )SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_COMM,1);
;;;3510        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_COMM,1);
;;;3511   	}
;;;3512   
;;;3513   	
;;;3514   //rel_warm_plazma=0;
;;;3515   //    
;;;3516   /*
;;;3517   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_WARM))
;;;3518   	{
;;;3519   	if(mess_data[1]==0)
;;;3520   		{
;;;3521   		SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_WARM,1);
;;;3522   		rel_warm_plazma=1;
;;;3523   		}
;;;3524   	else if(mess_data[1]==1) 
;;;3525   		{
;;;3526   		SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_WARM,1);
;;;3527   		rel_warm_plazma=2;
;;;3528   		}
;;;3529        }
;;;3530   else 
;;;3531   	{
;;;3532   	if(warm_stat_k==wsOFF) 
;;;3533   		{
;;;3534   		SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_WARM,1);
;;;3535   		rel_warm_plazma=3;
;;;3536   		}
;;;3537        else 
;;;3538   		{
;;;3539   		SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_WARM,1);
;;;3540   		rel_warm_plazma=4;
;;;3541   		}
;;;3542   	}
;;;3543   */
;;;3544   // 
;;;3545   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_LIGHT))
;;;3546   	{
;;;3547   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LIGHT,1);
;;;3548   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LIGHT,1);
;;;3549        }
;;;3550   else 
;;;3551   	{
;;;3552   	if(sk_av_stat[0]!=sasON) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LIGHT,1);
;;;3553        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LIGHT,1);
;;;3554   	}
;;;3555   
;;;3556   
;;;3557   
;;;3558   //  
;;;3559   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_LOAD_OFF))
;;;3560   	{
;;;3561   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LOAD_OFF,1);
;;;3562   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LOAD_OFF,1);
;;;3563        }
;;;3564   else if(tloaddisable_cmnd==0)
;;;3565   	{
;;;3566   	SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LOAD_OFF,1);
;;;3567   	}
;;;3568   else if((tloaddisable_cmnd)&&(tloaddisable_cmnd<=11))
;;;3569   	{
;;;3570   	SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LOAD_OFF,1);
;;;3571   	}
;;;3572   
;;;3573   else 
;;;3574   	{
;;;3575   	if(!(tloaddisable_stat==tldsON)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LOAD_OFF,1);
;;;3576        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LOAD_OFF,1);
;;;3577   	} 
;;;3578   
;;;3579   //    
;;;3580   if(RELE_LOG)
;;;3581   	{
;;;3582   	if((mess_find_unvol(MESS2RELE_HNDL))&&(mess_data[0]==PARAM_RELE_VENT_WARM))
;;;3583   		{
;;;3584   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT_WARM,1);
;;;3585   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT_WARM,1);
;;;3586   		}
;;;3587   	else 
;;;3588   		{
;;;3589   		if(warm_stat_k==wsOFF) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT_WARM,1);
;;;3590   	     else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT_WARM,1);
;;;3591   		} 
;;;3592   
;;;3593   	}
;;;3594   else 
;;;3595   	{
;;;3596   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_VENT_WARM))
;;;3597   		{
;;;3598   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT_WARM,1);
;;;3599   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT_WARM,1);
;;;3600   		}
;;;3601   	else 
;;;3602   		{
;;;3603   		if(vent_stat_k==vsOFF) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT_WARM,1);
;;;3604   	     else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT_WARM,1);
;;;3605   		} 
;;;3606   	}
;;;3607   #endif
;;;3608   
;;;3609   
;;;3610   #ifdef UKU_TELECORE2015
;;;3611   //  
;;;3612   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_NET))
;;;3613   	{
;;;3614   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;3615   	else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_NET,1);
;;;3616   	}
;;;3617   else	if(!(avar_ind_stat&0x00000001)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;3618   else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_NET,1);
;;;3619   
;;;3620   
;;;3621   // 
;;;3622   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_LIGHT))
;;;3623   	{
;;;3624   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LIGHT,1);
;;;3625   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LIGHT,1);
;;;3626        }
;;;3627   else 
;;;3628   	{
;;;3629   	if(sk_av_stat[0]!=sasON) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LIGHT,1);
;;;3630        else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LIGHT,1);
;;;3631   	}
;;;3632   
;;;3633   // 
;;;3634   if((mess_find_unvol(MESS2RELE_HNDL))&&(mess_data[0]==PARAM_RELE_WARM))
;;;3635   	{
;;;3636   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_WARM,1);
;;;3637   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_WARM,1);
;;;3638   	}
;;;3639   else 
;;;3640   	{
;;;3641   	if(warm_stat_k==wsOFF) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_WARM,1);
;;;3642        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_WARM,1);
;;;3643   	} 
;;;3644   // 
;;;3645   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_VENT))
;;;3646   	{
;;;3647   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT,1);
;;;3648   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;3649   	}
;;;3650   else 
;;;3651   	{
;;;3652   	if(vent_stat_k==vsOFF) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT,1);
;;;3653        else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;3654   	} 
;;;3655   
;;;3656   //  
;;;3657   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_VVENT))
;;;3658   	{
;;;3659   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VVENT,1);
;;;3660   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VVENT,1);
;;;3661   	}
;;;3662   else 
;;;3663   	{
;;;3664   	if(vvent_stat_k==vsOFF) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VVENT,1);
;;;3665        else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VVENT,1);
;;;3666   	} 
;;;3667   
;;;3668   #endif
;;;3669   
;;;3670   }
001e70  e4c4              B        |L1.6140|
                  |L1.7794|
001e72  6868              LDR      r0,[r5,#4]            ;3459  ; mess_data
001e74  b120              CBZ      r0,|L1.7808|
001e76  69e0              LDR      r0,[r4,#0x1c]         ;3460
001e78  f0407000          ORR      r0,r0,#0x2000000      ;3460
001e7c  61e0              STR      r0,[r4,#0x1c]         ;3460
001e7e  e7d1              B        |L1.7716|
                  |L1.7808|
001e80  69a0              LDR      r0,[r4,#0x18]         ;3459
001e82  f0407000          ORR      r0,r0,#0x2000000      ;3459
001e86  61a0              STR      r0,[r4,#0x18]         ;3459
001e88  e7cc              B        |L1.7716|
                  |L1.7818|
001e8a  6ba0              LDR      r0,[r4,#0x38]         ;3462
001e8c  f0407000          ORR      r0,r0,#0x2000000      ;3462
001e90  63a0              STR      r0,[r4,#0x38]         ;3462
001e92  e7c7              B        |L1.7716|
                  |L1.7828|
001e94  6868              LDR      r0,[r5,#4]            ;3468  ; mess_data
001e96  b130              CBZ      r0,|L1.7846|
001e98  2801              CMP      r0,#1                 ;3469
001e9a  d1d1              BNE      |L1.7744|
001e9c  69a0              LDR      r0,[r4,#0x18]         ;3469
001e9e  f0400020          ORR      r0,r0,#0x20           ;3469
001ea2  61a0              STR      r0,[r4,#0x18]         ;3469
001ea4  e7cc              B        |L1.7744|
                  |L1.7846|
001ea6  69e0              LDR      r0,[r4,#0x1c]         ;3468
001ea8  f0400020          ORR      r0,r0,#0x20           ;3468
001eac  61e0              STR      r0,[r4,#0x1c]         ;3468
001eae  e7c7              B        |L1.7744|
                  |L1.7856|
001eb0  69e0              LDR      r0,[r4,#0x1c]         ;3473
001eb2  f0400020          ORR      r0,r0,#0x20           ;3473
001eb6  61e0              STR      r0,[r4,#0x1c]         ;3473
001eb8  e7c2              B        |L1.7744|
                  |L1.7866|
001eba  e00d              B        |L1.7896|
                  |L1.7868|
001ebc  6868              LDR      r0,[r5,#4]            ;3480  ; mess_data
001ebe  b130              CBZ      r0,|L1.7886|
001ec0  2801              CMP      r0,#1                 ;3481
001ec2  d1d5              BNE      |L1.7792|
001ec4  69a0              LDR      r0,[r4,#0x18]         ;3481
001ec6  f4407000          ORR      r0,r0,#0x200          ;3481
001eca  61a0              STR      r0,[r4,#0x18]         ;3481
001ecc  e496              B        |L1.6140|
                  |L1.7886|
001ece  69e0              LDR      r0,[r4,#0x1c]         ;3480
001ed0  f4407000          ORR      r0,r0,#0x200          ;3480
001ed4  61e0              STR      r0,[r4,#0x1c]         ;3480
001ed6  e491              B        |L1.6140|
                  |L1.7896|
001ed8  48d7              LDR      r0,|L1.8760|
001eda  8800              LDRH     r0,[r0,#0]            ;3485  ; speedChIsOn
001edc  b120              CBZ      r0,|L1.7912|
001ede  69a0              LDR      r0,[r4,#0x18]         ;3486
001ee0  f4407000          ORR      r0,r0,#0x200          ;3486
001ee4  61a0              STR      r0,[r4,#0x18]         ;3486
001ee6  e489              B        |L1.6140|
                  |L1.7912|
001ee8  69e0              LDR      r0,[r4,#0x1c]         ;3485
001eea  f4407000          ORR      r0,r0,#0x200          ;3485
001eee  61e0              STR      r0,[r4,#0x1c]         ;3485
001ef0  e484              B        |L1.6140|
                  |L1.7922|
001ef2  69e0              LDR      r0,[r4,#0x1c]         ;3490
001ef4  f4407000          ORR      r0,r0,#0x200          ;3490
001ef8  61e0              STR      r0,[r4,#0x1c]         ;3490
001efa  e47f              B        |L1.6140|
;;;3671   
                          ENDP

                  bps_hndl PROC
;;;3672   //-----------------------------------------------
;;;3673   void bps_hndl(void)
001efc  e92d5ff0          PUSH     {r4-r12,lr}
;;;3674   {
;;;3675   char ptr__,i;
;;;3676   unsigned short tempUS;
;;;3677   
;;;3678   if(sh_cnt0<10)
001f00  4ece              LDR      r6,|L1.8764|
;;;3679   	{
;;;3680   	sh_cnt0++;
;;;3681   	if(sh_cnt0>=10)
;;;3682   		{
;;;3683   		sh_cnt0=0;
001f02  2700              MOVS     r7,#0
;;;3684   		b1Hz_sh=1;
001f04  f04f0a01          MOV      r10,#1
001f08  7c70              LDRB     r0,[r6,#0x11]         ;3678  ; sh_cnt0
001f0a  280a              CMP      r0,#0xa               ;3678
001f0c  d208              BCS      |L1.7968|
001f0e  f1000001          ADD      r0,r0,#1              ;3680
001f12  b2c0              UXTB     r0,r0                 ;3680
001f14  7470              STRB     r0,[r6,#0x11]         ;3680
001f16  280a              CMP      r0,#0xa               ;3681
001f18  d302              BCC      |L1.7968|
001f1a  7477              STRB     r7,[r6,#0x11]         ;3683
001f1c  f886a012          STRB     r10,[r6,#0x12]
                  |L1.7968|
;;;3685   		}
;;;3686   	}
;;;3687   
;;;3688   /*if(sh_cnt1<5)
;;;3689   	{
;;;3690   	sh_cnt1++;
;;;3691   	if(sh_cnt1==5)
;;;3692   		{
;;;3693   		sh_cnt1=0;
;;;3694   		b2Hz_sh=1;
;;;3695   		}
;;;3696   	} */
;;;3697   
;;;3698   
;;;3699   /*
;;;3700   if(mess_find(MESS_SRC_ON_OFF))
;;;3701   	{
;;;3702   	if(mess_data[0]==_MESS_SRC_MASK_BLOK_2SEC)
;;;3703   		{
;;;3704   		char i;
;;;3705   		for(i=0;i<NUMIST;i++)
;;;3706   			{
;;;3707   			if(mess_data[1]&(1<<i))src[i]._ist_blok_cnt=20;
;;;3708   			}
;;;3709   		
;;;3710   		}
;;;3711   	else if(mess_data[0]==_MESS_SRC_MASK_UNBLOK)
;;;3712   		{
;;;3713   		char i;
;;;3714   		for(i=0;i<NUMIST;i++)
;;;3715   			{
;;;3716   			if(mess_data[1]&(1<<i))src[i]._ist_blok_cnt=0;
;;;3717   			}
;;;3718   		
;;;3719   		}
;;;3720   	}
;;;3721   	
;;;3722   else if(mess_find(_MESS_SRC_MASK_ON))
;;;3723   	{				
;;;3724   	if(mess_data[0]==_MESS_SRC_MASK_ON)
;;;3725   		{
;;;3726   		char i;
;;;3727   		for(i=0;i<NUMIST;i++)
;;;3728   			{
;;;3729   			if(mess_data[1]&(1<<i))
;;;3730   				{
;;;3731   				src[i]._ist_blok_cnt=0;
;;;3732   				src[i]._flags_tu=2;
;;;3733   				}
;;;3734   			}
;;;3735   		
;;;3736   		}				
;;;3737   	}*/
;;;3738   
;;;3739   
;;;3740   
;;;3741   /*else*/ 
;;;3742   bps_on_mask=0;
001f20  f8a67048          STRH     r7,[r6,#0x48]
;;;3743   bps_off_mask=0;
001f24  f8a6704a          STRH     r7,[r6,#0x4a]
;;;3744   
;;;3745   if(mess_find_unvol(MESS2BPS_HNDL))
001f28  20cd              MOVS     r0,#0xcd
001f2a  f7fffffe          BL       mess_find_unvol
;;;3746   	{
;;;3747   	if(mess_data[0]==PARAM_BPS_ALL_OFF_AFTER_2SEC)
;;;3748   		{
;;;3749   		bps_off_mask=0xffff;
;;;3750   		}
;;;3751   
;;;3752   	if(mess_data[0]==PARAM_BPS_MASK_OFF_AFTER_2SEC)
;;;3753   		{
;;;3754   		bps_off_mask=mess_data[1];
;;;3755   		}
;;;3756   
;;;3757   	if(mess_data[0]==PARAM_BPS_MASK_ON)
;;;3758   		{
;;;3759   		bps_on_mask=mess_data[1];
;;;3760   		}
;;;3761   
;;;3762   	if(mess_data[0]==PARAM_BPS_ALL_ON)
;;;3763   		{
;;;3764   		bps_on_mask=0xffff;
;;;3765   		}
;;;3766   
;;;3767   	if(mess_data[0]==PARAM_BPS_MASK_ON_OFF_AFTER_2SEC)
;;;3768   		{
;;;3769   		bps_on_mask=mess_data[1];
;;;3770   		bps_off_mask=~(mess_data[1]);
;;;3771   		}
;;;3772   
;;;3773   
;;;3774   	for(i=0;i<=NUMIST;i++)
;;;3775   		{
;;;3776   		if(bps_off_mask&(1<<i)) bps[i]._blok_cnt++;
001f2e  f8df8310          LDR      r8,|L1.8768|
001f32  f8dfb310          LDR      r11,|L1.8772|
001f36  b3a0              CBZ      r0,|L1.8098|
001f38  49c3              LDR      r1,|L1.8776|
001f3a  f64f73ff          MOV      r3,#0xffff            ;3749
001f3e  6808              LDR      r0,[r1,#0]            ;3747  ; mess_data
001f40  28ce              CMP      r0,#0xce              ;3747
001f42  d101              BNE      |L1.8008|
001f44  f8a6304a          STRH     r3,[r6,#0x4a]         ;3749
                  |L1.8008|
001f48  28cf              CMP      r0,#0xcf              ;3752
001f4a  d102              BNE      |L1.8018|
001f4c  684a              LDR      r2,[r1,#4]            ;3754  ; mess_data
001f4e  f8a6204a          STRH     r2,[r6,#0x4a]         ;3754
                  |L1.8018|
001f52  28d1              CMP      r0,#0xd1              ;3757
001f54  d102              BNE      |L1.8028|
001f56  684a              LDR      r2,[r1,#4]            ;3759  ; mess_data
001f58  f8a62048          STRH     r2,[r6,#0x48]         ;3759
                  |L1.8028|
001f5c  28d2              CMP      r0,#0xd2              ;3762
001f5e  d101              BNE      |L1.8036|
001f60  f8a63048          STRH     r3,[r6,#0x48]         ;3764
                  |L1.8036|
001f64  28d0              CMP      r0,#0xd0              ;3767
001f66  d106              BNE      |L1.8054|
001f68  6848              LDR      r0,[r1,#4]            ;3769  ; mess_data
001f6a  f8a60048          STRH     r0,[r6,#0x48]         ;3769
001f6e  ea6f0000          MVN      r0,r0                 ;3770
001f72  f8a6004a          STRH     r0,[r6,#0x4a]         ;3770
                  |L1.8054|
001f76  f04f0400          MOV      r4,#0                 ;3774
001f7a  e037              B        |L1.8172|
                  |L1.8060|
001f7c  f8b6004a          LDRH     r0,[r6,#0x4a]  ; bps_off_mask
001f80  fa0af904          LSL      r9,r10,r4
001f84  ea190f00          TST      r9,r0
001f88  d00c              BEQ      |L1.8100|
001f8a  ebc400c4          RSB      r0,r4,r4,LSL #3
001f8e  eb001004          ADD      r0,r0,r4,LSL #4
001f92  eb080080          ADD      r0,r8,r0,LSL #2
001f96  f8301f40          LDRH     r1,[r0,#0x40]!
001f9a  f1010101          ADD      r1,r1,#1
001f9e  8001              STRH     r1,[r0,#0]
001fa0  e008              B        |L1.8116|
                  |L1.8098|
001fa2  e028              B        |L1.8182|
                  |L1.8100|
;;;3777   		else bps[i]._blok_cnt=0;
001fa4  ebc400c4          RSB      r0,r4,r4,LSL #3
001fa8  eb001004          ADD      r0,r0,r4,LSL #4
001fac  eb080080          ADD      r0,r8,r0,LSL #2
001fb0  f8a07040          STRH     r7,[r0,#0x40]
                  |L1.8116|
;;;3778   		gran(&bps[i]._blok_cnt,0,50);
001fb4  ebc400c4          RSB      r0,r4,r4,LSL #3
001fb8  eb001004          ADD      r0,r0,r4,LSL #4
001fbc  eb080580          ADD      r5,r8,r0,LSL #2
001fc0  f1050040          ADD      r0,r5,#0x40
001fc4  2232              MOVS     r2,#0x32
001fc6  2100              MOVS     r1,#0
001fc8  f7fffffe          BL       gran
;;;3779   		if(bps[i]._blok_cnt>20) bps[i]._flags_tu=1;
001fcc  f9b50040          LDRSH    r0,[r5,#0x40]
001fd0  2814              CMP      r0,#0x14
001fd2  dd01              BLE      |L1.8152|
001fd4  f885a02c          STRB     r10,[r5,#0x2c]
                  |L1.8152|
;;;3780   		if(bps_on_mask&(1<<i)) bps[i]._flags_tu=0;
001fd8  f8b60048          LDRH     r0,[r6,#0x48]  ; bps_on_mask
001fdc  ea190f00          TST      r9,r0
001fe0  d001              BEQ      |L1.8166|
001fe2  f885702c          STRB     r7,[r5,#0x2c]
                  |L1.8166|
001fe6  f1040401          ADD      r4,r4,#1              ;3774
001fea  b2e4              UXTB     r4,r4                 ;3774
                  |L1.8172|
001fec  f9bb0000          LDRSH    r0,[r11,#0]           ;3774  ; NUMIST
001ff0  4284              CMP      r4,r0                 ;3774
001ff2  ddc3              BLE      |L1.8060|
001ff4  e08a              B        |L1.8460|
                  |L1.8182|
;;;3781   	     }
;;;3782   
;;;3783   	
;;;3784   /*
;;;3785   
;;;3786   	if(bps_all_off_cnt>20)
;;;3787   		{
;;;3788   		for(i=0;i<=NUMIST;i++)
;;;3789   			{
;;;3790   	     	bps[i]._flags_tu=1;
;;;3791   	     	}
;;;3792   		}
;;;3793   	else if(bps_mask_off_cnt>20)
;;;3794   		{
;;;3795   		for(i=0;i<=NUMIST;i++)
;;;3796   			{
;;;3797   			if(mess_data[1]&(1<<i)) bps[i]._flags_tu=1;
;;;3798   	     	}
;;;3799   		}	
;;;3800   		
;;;3801   	else if(bps_mask_on_off_cnt>20)
;;;3802   		{
;;;3803   		for(i=0;i<=NUMIST;i++)
;;;3804   			{
;;;3805   			if(mess_data[1]&(1<<i)) bps[i]._flags_tu=1;
;;;3806   			else bps[i]._flags_tu=0;
;;;3807   	     	}
;;;3808   		}
;;;3809   		
;;;3810   	if(mess_data[0]==PARAM_BPS_MASK_ON)
;;;3811   		{
;;;3812   		for(i=0;i<=NUMIST;i++)
;;;3813   			{
;;;3814   			if(mess_data[1]&(1<<i)) bps[i]._flags_tu=0;
;;;3815   	     	}
;;;3816   		}
;;;3817   */										
;;;3818   	}
;;;3819   
;;;3820   
;;;3821   else if(b1Hz_sh)
001ff6  7cb0              LDRB     r0,[r6,#0x12]  ; b1Hz_sh
001ff8  b3f0              CBZ      r0,|L1.8312|
;;;3822   	{
;;;3823   	ptr__=0;
001ffa  f04f0400          MOV      r4,#0
;;;3824        for(i=0;i<=NUMIST;i++)
001ffe  4621              MOV      r1,r4
002000  f9bb0000          LDRSH    r0,[r11,#0]           ;3774
002004  e00a              B        |L1.8220|
                  |L1.8198|
;;;3825   		{
;;;3826   	     bps[i]._flags_tu=1;
002006  ebc102c1          RSB      r2,r1,r1,LSL #3
00200a  eb021201          ADD      r2,r2,r1,LSL #4
00200e  eb080282          ADD      r2,r8,r2,LSL #2
002012  f882a02c          STRB     r10,[r2,#0x2c]
002016  f1010101          ADD      r1,r1,#1              ;3824
00201a  b2c9              UXTB     r1,r1                 ;3824
                  |L1.8220|
00201c  4281              CMP      r1,r0                 ;3824
00201e  ddf2              BLE      |L1.8198|
;;;3827   	     }	
;;;3828     	     
;;;3829     	for(i=0;(i<NUMIST)&&(ptr__<num_necc);i++)
002020  f04f0100          MOV      r1,#0
002024  e022              B        |L1.8300|
                  |L1.8230|
;;;3830     		{
;;;3831   		char ii,iii;
;;;3832   
;;;3833   		ii=(char)NUMIST;
002026  b2c2              UXTB     r2,r0
;;;3834   		if(ii<0)ii=0;
;;;3835   		if(ii>32)ii=32;
002028  2a20              CMP      r2,#0x20
00202a  d901              BLS      |L1.8240|
00202c  f04f0220          MOV      r2,#0x20
                  |L1.8240|
;;;3836   		iii=numOfForvardBps;
002030  7e33              LDRB     r3,[r6,#0x18]  ; numOfForvardBps
;;;3837   		if(iii<0)iii=0;
;;;3838   		if(iii>=NUMIST)iii=0;
002032  4283              CMP      r3,r0
002034  db01              BLT      |L1.8250|
002036  f04f0300          MOV      r3,#0
                  |L1.8250|
;;;3839   		iii+=i;
00203a  440b              ADD      r3,r3,r1
00203c  b2db              UXTB     r3,r3
;;;3840   		iii=iii%ii;
00203e  fbb3f5f2          UDIV     r5,r3,r2
002042  fb023215          MLS      r2,r2,r5,r3
;;;3841   		
;;;3842     	     if((bps[iii]._state==bsRDY)||(bps[iii]._state==bsWRK))
002046  ebc203c2          RSB      r3,r2,r2,LSL #3
00204a  eb031202          ADD      r2,r3,r2,LSL #4
00204e  eb080282          ADD      r2,r8,r2,LSL #2
002052  7893              LDRB     r3,[r2,#2]
002054  2b02              CMP      r3,#2
002056  d001              BEQ      |L1.8284|
002058  2b01              CMP      r3,#1
00205a  d104              BNE      |L1.8294|
                  |L1.8284|
;;;3843     	         	{
;;;3844     	         	bps[iii]._flags_tu=0;
00205c  f882702c          STRB     r7,[r2,#0x2c]
;;;3845     	         	ptr__++;
002060  f1040401          ADD      r4,r4,#1
002064  b2e4              UXTB     r4,r4
                  |L1.8294|
002066  f1010101          ADD      r1,r1,#1              ;3829
00206a  b2c9              UXTB     r1,r1                 ;3829
                  |L1.8300|
00206c  4281              CMP      r1,r0                 ;3829
00206e  da06              BGE      |L1.8318|
002070  4a76              LDR      r2,|L1.8780|
002072  f9b22000          LDRSH    r2,[r2,#0]            ;3829  ; num_necc
002076  e000              B        |L1.8314|
                  |L1.8312|
002078  e048              B        |L1.8460|
                  |L1.8314|
00207a  4294              CMP      r4,r2                 ;3829
00207c  dbd3              BLT      |L1.8230|
                  |L1.8318|
;;;3846     	         	}
;;;3847   			
;;;3848     	     }
;;;3849   	bps[numOfForvardBps_old]._flags_tu=0;
00207e  7e71              LDRB     r1,[r6,#0x19]  ; numOfForvardBps_old
002080  ebc102c1          RSB      r2,r1,r1,LSL #3
002084  eb021101          ADD      r1,r2,r1,LSL #4
002088  eb080181          ADD      r1,r8,r1,LSL #2
00208c  f881702c          STRB     r7,[r1,#0x2c]
;;;3850   
;;;3851   	if(main_1Hz_cnt<60)
002090  496f              LDR      r1,|L1.8784|
002092  f9b11000          LDRSH    r1,[r1,#0]  ; main_1Hz_cnt
002096  293c              CMP      r1,#0x3c
002098  da0f              BGE      |L1.8378|
;;;3852   		{
;;;3853        	for(i=0;i<=NUMIST;i++)
00209a  f04f0100          MOV      r1,#0
00209e  e00a              B        |L1.8374|
                  |L1.8352|
;;;3854   			{
;;;3855   	     	bps[i]._flags_tu=0;
0020a0  ebc102c1          RSB      r2,r1,r1,LSL #3
0020a4  eb021201          ADD      r2,r2,r1,LSL #4
0020a8  eb080282          ADD      r2,r8,r2,LSL #2
0020ac  f882702c          STRB     r7,[r2,#0x2c]
0020b0  f1010101          ADD      r1,r1,#1              ;3853
0020b4  b2c9              UXTB     r1,r1                 ;3853
                  |L1.8374|
0020b6  4281              CMP      r1,r0                 ;3853
0020b8  ddf2              BLE      |L1.8352|
                  |L1.8378|
;;;3856   	     	}	
;;;3857   		}
;;;3858   	if(ipsBlckStat)
0020ba  4966              LDR      r1,|L1.8788|
0020bc  8809              LDRH     r1,[r1,#0]  ; ipsBlckStat
0020be  b179              CBZ      r1,|L1.8416|
;;;3859   		{
;;;3860        	for(i=0;i<=NUMIST;i++)
0020c0  f04f0100          MOV      r1,#0
0020c4  e00a              B        |L1.8412|
                  |L1.8390|
;;;3861   			{
;;;3862   	     	bps[i]._flags_tu=1;
0020c6  ebc102c1          RSB      r2,r1,r1,LSL #3
0020ca  eb021201          ADD      r2,r2,r1,LSL #4
0020ce  eb080282          ADD      r2,r8,r2,LSL #2
0020d2  f882a02c          STRB     r10,[r2,#0x2c]
0020d6  f1010101          ADD      r1,r1,#1              ;3860
0020da  b2c9              UXTB     r1,r1                 ;3860
                  |L1.8412|
0020dc  4281              CMP      r1,r0                 ;3860
0020de  ddf2              BLE      |L1.8390|
                  |L1.8416|
;;;3863   	     	}
;;;3864   		}
;;;3865   
;;;3866        for(i=0;i<=NUMIST;i++)
0020e0  f04f0100          MOV      r1,#0
;;;3867   		{
;;;3868   	    if(bps[i]._flags_tu==1) 	bps[i]._x_=-50;
0020e4  f06f0331          MVN      r3,#0x31
0020e8  e00e              B        |L1.8456|
                  |L1.8426|
0020ea  ebc102c1          RSB      r2,r1,r1,LSL #3
0020ee  eb021201          ADD      r2,r2,r1,LSL #4
0020f2  eb080282          ADD      r2,r8,r2,LSL #2
0020f6  f892402c          LDRB     r4,[r2,#0x2c]
0020fa  2c01              CMP      r4,#1
0020fc  d101              BNE      |L1.8450|
0020fe  f8a23050          STRH     r3,[r2,#0x50]
                  |L1.8450|
002102  f1010101          ADD      r1,r1,#1              ;3866
002106  b2c9              UXTB     r1,r1                 ;3866
                  |L1.8456|
002108  4281              CMP      r1,r0                 ;3866
00210a  ddee              BLE      |L1.8426|
                  |L1.8460|
;;;3869   	   	}	
;;;3870   		 
;;;3871     	}
;;;3872   
;;;3873   
;;;3874   for(i=0;i<NUMIST;i++)
00210c  f04f0000          MOV      r0,#0
;;;3875        {
;;;3876        if(bps[i]._ist_blok_host_cnt!=0)
;;;3877             {
;;;3878             bps[i]._flags_tu=99;
002110  f04f0463          MOV      r4,#0x63
002114  f9bb3000          LDRSH    r3,[r11,#0]           ;3774
002118  e00f              B        |L1.8506|
                  |L1.8474|
00211a  ebc001c0          RSB      r1,r0,r0,LSL #3       ;3876
00211e  eb011100          ADD      r1,r1,r0,LSL #4       ;3876
002122  eb080181          ADD      r1,r8,r1,LSL #2       ;3876
002126  6bca              LDR      r2,[r1,#0x3c]         ;3876
002128  b122              CBZ      r2,|L1.8500|
00212a  f881402c          STRB     r4,[r1,#0x2c]
;;;3879   	     bps[i]._ist_blok_host_cnt--;
00212e  f1a20201          SUB      r2,r2,#1
002132  63ca              STR      r2,[r1,#0x3c]
                  |L1.8500|
002134  f1000001          ADD      r0,r0,#1              ;3874
002138  b2c0              UXTB     r0,r0                 ;3874
                  |L1.8506|
00213a  4298              CMP      r0,r3                 ;3874
00213c  dbed              BLT      |L1.8474|
;;;3880             }
;;;3881        }
;;;3882   
;;;3883   
;;;3884   
;;;3885   
;;;3886   b1Hz_sh=0;
00213e  74b7              STRB     r7,[r6,#0x12]
;;;3887   
;;;3888   
;;;3889   num_of_wrks_bps=0;
002140  73b7              STRB     r7,[r6,#0xe]
;;;3890   tempUS=0;
002142  f04f0100          MOV      r1,#0
;;;3891   for(i=0;i<NUMIST;i++)
002146  4608              MOV      r0,r1
002148  e013              B        |L1.8562|
                  |L1.8522|
;;;3892   	{
;;;3893   	if(bps[i]._state==bsWRK)
00214a  ebc002c0          RSB      r2,r0,r0,LSL #3
00214e  eb021200          ADD      r2,r2,r0,LSL #4
002152  eb080282          ADD      r2,r8,r2,LSL #2
002156  7894              LDRB     r4,[r2,#2]
002158  2c01              CMP      r4,#1
00215a  d107              BNE      |L1.8556|
;;;3894   		{
;;;3895   		num_of_wrks_bps++;
00215c  7bb4              LDRB     r4,[r6,#0xe]  ; num_of_wrks_bps
00215e  f1040401          ADD      r4,r4,#1
002162  73b4              STRB     r4,[r6,#0xe]
;;;3896   		if(bps[i]._Uii>tempUS)tempUS=bps[i]._Uii;
002164  69d2              LDR      r2,[r2,#0x1c]
002166  428a              CMP      r2,r1
002168  dd00              BLE      |L1.8556|
00216a  b291              UXTH     r1,r2
                  |L1.8556|
00216c  f1000001          ADD      r0,r0,#1              ;3891
002170  b2c0              UXTB     r0,r0                 ;3891
                  |L1.8562|
002172  4298              CMP      r0,r3                 ;3891
002174  dbe9              BLT      |L1.8522|
;;;3897   		}
;;;3898   	}
;;;3899   Ubpsmax=tempUS;
002176  87b1              STRH     r1,[r6,#0x3c]
;;;3900   
;;;3901   }
002178  e8bd9ff0          POP      {r4-r12,pc}
;;;3902   
                          ENDP

                  powerAntiAliasingHndl PROC
;;;3909   //-----------------------------------------------
;;;3910   void powerAntiAliasingHndl(void)
00217c  b570              PUSH     {r4-r6,lr}
;;;3911   {
;;;3912   if((power_summary_tempo/10UL)==(power_summary_tempo_old/10UL))
00217e  230a              MOVS     r3,#0xa
002180  4c36              LDR      r4,|L1.8796|
002182  4835              LDR      r0,|L1.8792|
;;;3913   	{
;;;3914   	if(powerSummaryCnt<15)powerSummaryCnt++;
;;;3915   	if(powerSummaryCnt>=10)
;;;3916   		{
;;;3917   		power_summary=power_summary_tempo;
;;;3918   		}
;;;3919   	}
;;;3920   else powerSummaryCnt=0;
002184  2500              MOVS     r5,#0
002186  6822              LDR      r2,[r4,#0]            ;3912  ; power_summary_tempo_old
002188  6800              LDR      r0,[r0,#0]            ;3912  ; power_summary_tempo
00218a  fbb2f6f3          UDIV     r6,r2,r3              ;3912
00218e  fbb0f1f3          UDIV     r1,r0,r3              ;3912
002192  4a33              LDR      r2,|L1.8800|
002194  42b1              CMP      r1,r6                 ;3912
002196  d10b              BNE      |L1.8624|
002198  7811              LDRB     r1,[r2,#0]            ;3914  ; powerSummaryCnt
00219a  290f              CMP      r1,#0xf               ;3914
00219c  d202              BCS      |L1.8612|
00219e  f1010101          ADD      r1,r1,#1              ;3914
0021a2  7011              STRB     r1,[r2,#0]            ;3914
                  |L1.8612|
0021a4  7811              LDRB     r1,[r2,#0]            ;3915  ; powerSummaryCnt
0021a6  290a              CMP      r1,#0xa               ;3915
0021a8  d303              BCC      |L1.8626|
0021aa  492e              LDR      r1,|L1.8804|
0021ac  6008              STR      r0,[r1,#0]            ;3917  ; power_summary
0021ae  e000              B        |L1.8626|
                  |L1.8624|
0021b0  7015              STRB     r5,[r2,#0]
                  |L1.8626|
;;;3921   power_summary_tempo_old=power_summary_tempo;
0021b2  6020              STR      r0,[r4,#0]  ; power_summary_tempo_old
;;;3922   
;;;3923   if((power_current_tempo/10UL)==(power_current_tempo_old/10UL))
0021b4  482c              LDR      r0,|L1.8808|
0021b6  4c2d              LDR      r4,|L1.8812|
0021b8  f9b00000          LDRSH    r0,[r0,#0]  ; power_current_tempo
0021bc  f9b42000          LDRSH    r2,[r4,#0]  ; power_current_tempo_old
0021c0  fbb0f1f3          UDIV     r1,r0,r3
0021c4  fbb2f3f3          UDIV     r3,r2,r3
;;;3924   	{
;;;3925   	if(powerCurrentCnt<15)powerCurrentCnt++;
0021c8  4a29              LDR      r2,|L1.8816|
0021ca  4299              CMP      r1,r3                 ;3923
0021cc  d10b              BNE      |L1.8678|
0021ce  7811              LDRB     r1,[r2,#0]  ; powerCurrentCnt
0021d0  290f              CMP      r1,#0xf
0021d2  d202              BCS      |L1.8666|
0021d4  f1010101          ADD      r1,r1,#1
0021d8  7011              STRB     r1,[r2,#0]
                  |L1.8666|
;;;3926   	if(powerCurrentCnt>=10)
0021da  7811              LDRB     r1,[r2,#0]  ; powerCurrentCnt
0021dc  290a              CMP      r1,#0xa
0021de  d303              BCC      |L1.8680|
;;;3927   		{
;;;3928   		power_current=power_current_tempo;
0021e0  4924              LDR      r1,|L1.8820|
0021e2  8008              STRH     r0,[r1,#0]
0021e4  e000              B        |L1.8680|
                  |L1.8678|
;;;3929   		}
;;;3930   	}
;;;3931   else powerCurrentCnt=0;
0021e6  7015              STRB     r5,[r2,#0]
                  |L1.8680|
;;;3932   power_current_tempo_old=power_current_tempo;
0021e8  8020              STRH     r0,[r4,#0]
;;;3933   }
0021ea  bd70              POP      {r4-r6,pc}
;;;3934   
                          ENDP

                  ipsBlckHndl PROC
;;;4017   //-----------------------------------------------
;;;4018   void ipsBlckHndl(char in)
0021ec  b510              PUSH     {r4,lr}
;;;4019   {
;;;4020   
;;;4021   ipsBlckStat=0;
0021ee  4b19              LDR      r3,|L1.8788|
0021f0  f04f0000          MOV      r0,#0
0021f4  8018              STRH     r0,[r3,#0]
;;;4022   if(ipsBlckSrc==1)
0021f6  4820              LDR      r0,|L1.8824|
0021f8  f04f0401          MOV      r4,#1
;;;4023   	{
;;;4024   	if(((ipsBlckLog==0)&&(adc_buff_[11]>2000)) || ((ipsBlckLog==1)&&(adc_buff_[11]<2000))) ipsBlckStat=1;
0021fc  f44f62fa          MOV      r2,#0x7d0
002200  f9b01000          LDRSH    r1,[r0,#0]            ;4022  ; ipsBlckSrc
002204  481d              LDR      r0,|L1.8828|
002206  2901              CMP      r1,#1                 ;4022
002208  f9b00000          LDRSH    r0,[r0,#0]
00220c  d006              BEQ      |L1.8732|
;;;4025   	}
;;;4026   else if(ipsBlckSrc==2)
00220e  2902              CMP      r1,#2
002210  d10f              BNE      |L1.8754|
002212  491b              LDR      r1,|L1.8832|
;;;4027   	{
;;;4028   	if(((ipsBlckLog==0)&&(adc_buff_[13]>2000)) || ((ipsBlckLog==1)&&(adc_buff_[13]<2000))) ipsBlckStat=1;
002214  f9b1101a          LDRSH    r1,[r1,#0x1a]
002218  b3a0              CBZ      r0,|L1.8836|
00221a  e036              B        |L1.8842|
                  |L1.8732|
00221c  4918              LDR      r1,|L1.8832|
00221e  f9b11016          LDRSH    r1,[r1,#0x16]         ;4024
002222  b908              CBNZ     r0,|L1.8744|
002224  4291              CMP      r1,r2                 ;4024
002226  dc03              BGT      |L1.8752|
                  |L1.8744|
002228  2801              CMP      r0,#1                 ;4024
00222a  d102              BNE      |L1.8754|
00222c  4291              CMP      r1,r2                 ;4024
00222e  da00              BGE      |L1.8754|
                  |L1.8752|
002230  801c              STRH     r4,[r3,#0]            ;4024
                  |L1.8754|
;;;4029   	}
;;;4030   }
002232  bd10              POP      {r4,pc}
                  |L1.8756|
                          DCD      DOP_RELE_FUNC
                  |L1.8760|
                          DCD      speedChIsOn
                  |L1.8764|
                          DCD      ||area_number.21||
                  |L1.8768|
                          DCD      bps
                  |L1.8772|
                          DCD      NUMIST
                  |L1.8776|
                          DCD      mess_data
                  |L1.8780|
                          DCD      num_necc
                  |L1.8784|
                          DCD      main_1Hz_cnt
                  |L1.8788|
                          DCD      ipsBlckStat
                  |L1.8792|
                          DCD      power_summary_tempo
                  |L1.8796|
                          DCD      power_summary_tempo_old
                  |L1.8800|
                          DCD      powerSummaryCnt
                  |L1.8804|
                          DCD      power_summary
                  |L1.8808|
                          DCD      power_current_tempo
                  |L1.8812|
                          DCD      power_current_tempo_old
                  |L1.8816|
                          DCD      powerCurrentCnt
                  |L1.8820|
                          DCD      power_current
                  |L1.8824|
                          DCD      ipsBlckSrc
                  |L1.8828|
                          DCD      ipsBlckLog
                  |L1.8832|
                          DCD      ||.bss||+0x400
                  |L1.8836|
002284  e7ff              B        |L1.8838|
                  |L1.8838|
002286  4291              CMP      r1,r2                 ;4028
002288  dc03              BGT      |L1.8850|
                  |L1.8842|
00228a  2801              CMP      r0,#1                 ;4028
00228c  d1d1              BNE      |L1.8754|
00228e  4291              CMP      r1,r2                 ;4028
002290  dacf              BGE      |L1.8754|
                  |L1.8850|
002292  801c              STRH     r4,[r3,#0]            ;4028
002294  e7cd              B        |L1.8754|
;;;4031   
                          ENDP

                  bps_drv PROC
;;;4032   //-----------------------------------------------
;;;4033   void bps_drv(char in)
002296  e92d41f0          PUSH     {r4-r8,lr}
;;;4034   {
00229a  4606              MOV      r6,r0
;;;4035   char temp;
;;;4036   
;;;4037   if (bps[in]._device!=dSRC) return;
00229c  ebc600c6          RSB      r0,r6,r6,LSL #3
0022a0  49ff              LDR      r1,|L1.9888|
0022a2  eb001006          ADD      r0,r0,r6,LSL #4
0022a6  f8112020          LDRB     r2,[r1,r0,LSL #2]
0022aa  2a03              CMP      r2,#3
0022ac  d177              BNE      |L1.9118|
;;;4038   temp=bps[in]._flags_tm;
0022ae  eb010480          ADD      r4,r1,r0,LSL #2
0022b2  f8945042          LDRB     r5,[r4,#0x42]
;;;4039   if(temp&(1<<AV_T))
0022b6  07a8              LSLS     r0,r5,#30
0022b8  d517              BPL      |L1.8938|
;;;4040   	{
;;;4041   	if(bps[in]._temp_av_cnt<1200) 
0022ba  f9b41046          LDRSH    r1,[r4,#0x46]
0022be  f44f6096          MOV      r0,#0x4b0
0022c2  4281              CMP      r1,r0
0022c4  da22              BGE      |L1.8972|
;;;4042   		{
;;;4043   		bps[in]._temp_av_cnt++;
0022c6  f1010101          ADD      r1,r1,#1
0022ca  b209              SXTH     r1,r1
0022cc  f8a41046          STRH     r1,[r4,#0x46]
;;;4044   		if(bps[in]._temp_av_cnt>=1200)
0022d0  4281              CMP      r1,r0
0022d2  db1b              BLT      |L1.8972|
;;;4045   			{
;;;4046   			bps[in]._temp_av_cnt=1200;
0022d4  f8a40046          STRH     r0,[r4,#0x46]
;;;4047   		   	if(!(bps[in]._av&(1<<0)))avar_bps_hndl(in,0,1);
0022d8  7860              LDRB     r0,[r4,#1]
0022da  07c0              LSLS     r0,r0,#31
0022dc  d116              BNE      |L1.8972|
0022de  2201              MOVS     r2,#1
0022e0  2100              MOVS     r1,#0
0022e2  4630              MOV      r0,r6
0022e4  f7fffffe          BL       avar_bps_hndl
0022e8  e010              B        |L1.8972|
                  |L1.8938|
;;;4048   			}
;;;4049   		}
;;;4050   	}
;;;4051   
;;;4052   else if(!(temp&(1<<AV_T)))
;;;4053   	{
;;;4054   	if(bps[in]._temp_av_cnt) 
0022ea  f9b41046          LDRSH    r1,[r4,#0x46]
0022ee  b169              CBZ      r1,|L1.8972|
;;;4055   		{
;;;4056   		bps[in]._temp_av_cnt--;
0022f0  f1a10101          SUB      r1,r1,#1
0022f4  b208              SXTH     r0,r1
0022f6  f8a40046          STRH     r0,[r4,#0x46]
;;;4057   		if(!bps[in]._temp_av_cnt)
0022fa  b938              CBNZ     r0,|L1.8972|
;;;4058   			{
;;;4059   			if(bps[in]._av&(1<<0))avar_bps_hndl(in,0,0);
0022fc  7860              LDRB     r0,[r4,#1]
0022fe  07c0              LSLS     r0,r0,#31
002300  d004              BEQ      |L1.8972|
002302  2200              MOVS     r2,#0
002304  4611              MOV      r1,r2
002306  4630              MOV      r0,r6
002308  f7fffffe          BL       avar_bps_hndl
                  |L1.8972|
;;;4060   			}
;;;4061   		} 	
;;;4062   
;;;4063   	}
;;;4064   
;;;4065   if((temp&(1<<AVUMAX)))
00230c  0729              LSLS     r1,r5,#28
;;;4066   	{
;;;4067   	if(bps[in]._umax_av_cnt<10) 
;;;4068   		{
;;;4069   		bps[in]._umax_av_cnt++;
;;;4070   		if(bps[in]._umax_av_cnt>=10)
;;;4071   			{ 
;;;4072   			bps[in]._umax_av_cnt=10;
00230e  f04f070a          MOV      r7,#0xa
002312  f04f0000          MOV      r0,#0                 ;4047
002316  d515              BPL      |L1.9028|
002318  f9b40048          LDRSH    r0,[r4,#0x48]         ;4067
00231c  280a              CMP      r0,#0xa               ;4067
00231e  da26              BGE      |L1.9070|
002320  f1000001          ADD      r0,r0,#1              ;4069
002324  b200              SXTH     r0,r0                 ;4069
002326  f8a40048          STRH     r0,[r4,#0x48]         ;4069
00232a  280a              CMP      r0,#0xa               ;4070
00232c  db1f              BLT      |L1.9070|
00232e  f8a47048          STRH     r7,[r4,#0x48]
;;;4073   			if(!(bps[in]._av&(1<<1)))avar_bps_hndl(in,1,1);
002332  7860              LDRB     r0,[r4,#1]
002334  0780              LSLS     r0,r0,#30
002336  d41a              BMI      |L1.9070|
002338  2201              MOVS     r2,#1
00233a  4611              MOV      r1,r2
00233c  4630              MOV      r0,r6
00233e  f7fffffe          BL       avar_bps_hndl
002342  e014              B        |L1.9070|
                  |L1.9028|
;;;4074   		  	/*if((K[APV]!=ON)||((apv_cnt[in,0]==0)&&(apv_cnt[in,1]==0)&&(apv_cnt[in,2]==0)&&(apv_flags[in]==afOFF)))avar_s_hndl(in,1,1);
;;;4075   			if((apv_cnt[in,0]==0)&&(apv_cnt[in,1]==0)&&(apv_cnt[in,2]==0)&&(apv_flags[in]==afON))
;;;4076   				{
;;;4077   				apv_cnt[in,0]=APV_INIT;
;;;4078   				apv_cnt[in,1]=APV_INIT;
;;;4079   				apv_cnt[in,2]=APV_INIT;
;;;4080   				apv_flags[in]=afOFF;
;;;4081   				}				*/
;;;4082   						
;;;4083   			}
;;;4084   		} 
;;;4085   	}		
;;;4086   else if(!(temp&(1<<AVUMAX)))
;;;4087   	{
;;;4088   	if(bps[in]._umax_av_cnt>0) 
002344  f9b41048          LDRSH    r1,[r4,#0x48]
002348  2900              CMP      r1,#0
00234a  dd0d              BLE      |L1.9064|
;;;4089   		{
;;;4090   		bps[in]._umax_av_cnt--;
00234c  f1a10101          SUB      r1,r1,#1
002350  b208              SXTH     r0,r1
002352  f8a40048          STRH     r0,[r4,#0x48]
;;;4091   		if(bps[in]._umax_av_cnt==0)
002356  b950              CBNZ     r0,|L1.9070|
;;;4092   			{
;;;4093   			bps[in]._umax_av_cnt=0;
;;;4094   			avar_bps_hndl(in,1,0);
002358  f04f0200          MOV      r2,#0
00235c  f04f0101          MOV      r1,#1
002360  4630              MOV      r0,r6
002362  f7fffffe          BL       avar_bps_hndl
002366  e002              B        |L1.9070|
                  |L1.9064|
;;;4095   	 //		apv_cnt[in,0]=0;
;;;4096   	//		apv_cnt[in,1]=0;
;;;4097   	 //		apv_cnt[in,2]=0;			
;;;4098   			}
;;;4099   		}
;;;4100   	else if(bps[in]._umax_av_cnt<0) bps[in]._umax_av_cnt=0;		 
002368  da01              BGE      |L1.9070|
00236a  f8a40048          STRH     r0,[r4,#0x48]
                  |L1.9070|
;;;4101   	}
;;;4102   
;;;4103   if(temp&(1<<AVUMIN))
00236e  06e8              LSLS     r0,r5,#27
002370  d516              BPL      |L1.9120|
;;;4104   	{
;;;4105   	if(bps[in]._umin_av_cnt<10) 
002372  f9b4004a          LDRSH    r0,[r4,#0x4a]
002376  280a              CMP      r0,#0xa
002378  da20              BGE      |L1.9148|
;;;4106   		{
;;;4107   		bps[in]._umin_av_cnt++;
00237a  f1000001          ADD      r0,r0,#1
00237e  b200              SXTH     r0,r0
002380  f8a4004a          STRH     r0,[r4,#0x4a]
;;;4108   		if(bps[in]._umin_av_cnt>=10)
002384  280a              CMP      r0,#0xa
002386  db19              BLT      |L1.9148|
;;;4109   			{ 
;;;4110   			bps[in]._umin_av_cnt=10;
002388  f8a4704a          STRH     r7,[r4,#0x4a]
;;;4111   			if(!(bps[in]._av&(1<<2)))avar_bps_hndl(in,2,1);
00238c  7860              LDRB     r0,[r4,#1]
00238e  0740              LSLS     r0,r0,#29
002390  d414              BMI      |L1.9148|
002392  2201              MOVS     r2,#1
002394  2102              MOVS     r1,#2
002396  4630              MOV      r0,r6
002398  f7fffffe          BL       avar_bps_hndl
00239c  e00e              B        |L1.9148|
                  |L1.9118|
00239e  e046              B        |L1.9262|
                  |L1.9120|
;;;4112   		  	/*	if((K[APV]!=ON)||((apv_cnt[in,0]==0)&&(apv_cnt[in,1]==0)&&(apv_cnt[in,2]==0)&&(apv_flags[in]==afOFF)))avar_s_hndl(in,2,1);
;;;4113   			if((apv_cnt[in,0]==0)&&(apv_cnt[in,1]==0)&&(apv_cnt[in,2]==0)&&(apv_flags[in]==afON))
;;;4114   				{
;;;4115   				apv_cnt[in,0]=APV_INIT;
;;;4116   				apv_cnt[in,1]=APV_INIT;
;;;4117   				apv_cnt[in,2]=APV_INIT;
;;;4118   				apv_flags[in]=afOFF;
;;;4119   				}*/				
;;;4120   			}
;;;4121   		} 
;;;4122   	}	
;;;4123   	
;;;4124   else if(!(temp&(1<<AVUMIN)))
;;;4125   	{
;;;4126   	if(bps[in]._umin_av_cnt) 
0023a0  f9b4004a          LDRSH    r0,[r4,#0x4a]
0023a4  b150              CBZ      r0,|L1.9148|
;;;4127   		{
;;;4128   		bps[in]._umin_av_cnt--;
0023a6  f1a00001          SUB      r0,r0,#1
0023aa  b201              SXTH     r1,r0
0023ac  f8a4104a          STRH     r1,[r4,#0x4a]
;;;4129   		if(bps[in]._umin_av_cnt==0)
0023b0  b921              CBNZ     r1,|L1.9148|
;;;4130   			{
;;;4131   			bps[in]._umin_av_cnt=0;
;;;4132   			avar_bps_hndl(in,2,0);
0023b2  2200              MOVS     r2,#0
0023b4  2102              MOVS     r1,#2
0023b6  4630              MOV      r0,r6
0023b8  f7fffffe          BL       avar_bps_hndl
                  |L1.9148|
;;;4133   		//	apv_cnt[in,0]=0;
;;;4134   		//	apv_cnt[in,1]=0;
;;;4135   		//	apv_cnt[in,2]=0;
;;;4136   			}
;;;4137   		}
;;;4138   	else if(bps[in]._umin_av_cnt>10)bps[in]._umin_av_cnt--;	 
;;;4139   	}
;;;4140   
;;;4141   //bps[in]._state=bsOFF;
;;;4142   
;;;4143   if (bps[in]._av&0x0f)					bps[in]._state=bsAV;
0023bc  7860              LDRB     r0,[r4,#1]
0023be  0700              LSLS     r0,r0,#28
0023c0  d003              BEQ      |L1.9162|
0023c2  f04f0004          MOV      r0,#4
0023c6  70a0              STRB     r0,[r4,#2]
0023c8  e017              B        |L1.9210|
                  |L1.9162|
;;;4144   else if ( (net_av) && (bps[in]._cnt>20)/*&& 
0023ca  48b6              LDR      r0,|L1.9892|
0023cc  7800              LDRB     r0,[r0,#0]  ; net_av
0023ce  b130              CBZ      r0,|L1.9182|
0023d0  78e0              LDRB     r0,[r4,#3]
0023d2  2814              CMP      r0,#0x14
0023d4  d903              BLS      |L1.9182|
;;;4145   		(bps[in]._Uii<200)*/)				bps[in]._state=bsOFF_AV_NET;
0023d6  f04f0005          MOV      r0,#5
0023da  70a0              STRB     r0,[r4,#2]
0023dc  e00d              B        |L1.9210|
                  |L1.9182|
;;;4146   else if (bps[in]._flags_tm&BIN8(100000))	bps[in]._state=bsRDY;
0023de  f8940042          LDRB     r0,[r4,#0x42]
0023e2  0680              LSLS     r0,r0,#26
0023e4  d503              BPL      |L1.9198|
0023e6  f04f0002          MOV      r0,#2
0023ea  70a0              STRB     r0,[r4,#2]
0023ec  e005              B        |L1.9210|
                  |L1.9198|
;;;4147   else if (bps[in]._cnt<20)				bps[in]._state=bsWRK;
0023ee  78e0              LDRB     r0,[r4,#3]
0023f0  2814              CMP      r0,#0x14
0023f2  d202              BCS      |L1.9210|
0023f4  f04f0001          MOV      r0,#1
0023f8  70a0              STRB     r0,[r4,#2]
                  |L1.9210|
;;;4148   
;;;4149   
;;;4150   
;;;4151   //else if(bps[in]._flags_tm&BIN8(100000)) bps[in]._state=ssBL;
;;;4152   //else if((!(bps[in]._flags_tm&BIN8(100000)))&&(net_U>100))bps[in]._state=ssWRK;
;;;4153   //else bps[0]._state=ssNOT;
;;;4154   
;;;4155   //bps[in]._is_ready=0;
;;;4156   //bps[in]._is_wrk=0;
;;;4157   //if(bps[in]._av_net) bps[in]._flags_bp='N';//  
;;;4158   //else if(bps[in]._av_u_max) bps[in]._flags_bp='P';//  (u_.av_.bAS1T)) bps_state[0]=ssAV;
;;;4159   //else if(bps[in]._av_u_min) bps[in]._flags_bp='M';//  
;;;4160   //else if(bps[in]._av_temper) bps[in]._flags_bp='T';// 
;;;4161   //else if(bps[in]._flags_tm&BIN8(100000)) 
;;;4162   //	{
;;;4163   //	bps[in]._flags_bp='B';// 
;;;4164   //	bps[in]._is_ready=1;
;;;4165   //	}
;;;4166   //else if((!(bps[in]._flags_tm&BIN8(100000)))&&(net_U>100))
;;;4167   //     {
;;;4168   //     bps[in]._flags_bp='W';// 
;;;4169   //     bps[in]._is_ready=1;
;;;4170   //     bps[in]._is_wrk=1;
;;;4171        
;;;4172   //     }
;;;4173   //else bps[in]._is_ready=1;     
;;;4174   
;;;4175   
;;;4176   
;;;4177   
;;;4178   
;;;4179   /*
;;;4180   bps[in]._flags_tu&=BIN8(11111110);
;;;4181   if(bps[in]._ist_blok_cnt)
;;;4182   	{
;;;4183   	bps[in]._ist_blok_cnt--;
;;;4184   	bps[in]._flags_tu|=BIN8(1);
;;;4185   	}
;;;4186   
;;;4187   	   */ 
;;;4188   
;;;4189   //    
;;;4190   if(bps[in]._cnt>=10) bps[in]._flags_tu|=BIN8(10000000);
0023fa  78e0              LDRB     r0,[r4,#3]
0023fc  280a              CMP      r0,#0xa
0023fe  d306              BCC      |L1.9230|
002400  f894002c          LDRB     r0,[r4,#0x2c]
002404  f0400080          ORR      r0,r0,#0x80
002408  f884002c          STRB     r0,[r4,#0x2c]
00240c  e005              B        |L1.9242|
                  |L1.9230|
;;;4191   else bps[in]._flags_tu&=BIN8(1111111);
00240e  f894002c          LDRB     r0,[r4,#0x2c]
002412  f000007f          AND      r0,r0,#0x7f
002416  f884002c          STRB     r0,[r4,#0x2c]
                  |L1.9242|
;;;4192   	
;;;4193   bps[in]._vol_u=cntrl_stat+bps[in]._x_;	
00241a  49a3              LDR      r1,|L1.9896|
00241c  f9b40050          LDRSH    r0,[r4,#0x50]
002420  f9b1101c          LDRSH    r1,[r1,#0x1c]  ; cntrl_stat
002424  4408              ADD      r0,r0,r1
002426  6320              STR      r0,[r4,#0x30]
;;;4194   bps[in]._vol_i=1000; 
002428  f44f707a          MOV      r0,#0x3e8
00242c  6360              STR      r0,[r4,#0x34]
                  |L1.9262|
;;;4195   }
00242e  e51f              B        |L1.7792|
;;;4196   
                          ENDP

                  avt_hndl PROC
;;;4197   //-----------------------------------------------
;;;4198   void avt_hndl(void)
002430  b570              PUSH     {r4-r6,lr}
;;;4199   {
;;;4200   char i;
;;;4201   for(i=0;i<12;i++)
002432  f04f0000          MOV      r0,#0
;;;4202   	{
;;;4203   	if(eb2_data_short[6]&(1<<i))
002436  499d              LDR      r1,|L1.9900|
;;;4204   		{
;;;4205   		avt_stat[i]=avtON;
002438  4d9d              LDR      r5,|L1.9904|
00243a  f04f0401          MOV      r4,#1                 ;4203
00243e  f9b1200c          LDRSH    r2,[r1,#0xc]          ;4203
002442  4603              MOV      r3,r0                 ;4201
                  |L1.9284|
002444  fa04f100          LSL      r1,r4,r0              ;4203
002448  420a              TST      r2,r1                 ;4203
00244a  d001              BEQ      |L1.9296|
00244c  542c              STRB     r4,[r5,r0]
00244e  e000              B        |L1.9298|
                  |L1.9296|
;;;4206   		}
;;;4207   	else avt_stat[i]=avtOFF;
002450  542b              STRB     r3,[r5,r0]
                  |L1.9298|
002452  f1000001          ADD      r0,r0,#1              ;4201
002456  b2c0              UXTB     r0,r0                 ;4201
002458  280c              CMP      r0,#0xc               ;4201
00245a  d3f3              BCC      |L1.9284|
;;;4208   	}
;;;4209   
;;;4210   if((avt_stat_old[0]!=avt_stat[0])&&(NUMAVT>=1))
00245c  4e95              LDR      r6,|L1.9908|
00245e  7828              LDRB     r0,[r5,#0]  ; avt_stat
002460  4c95              LDR      r4,|L1.9912|
002462  7831              LDRB     r1,[r6,#0]  ; avt_stat_old
002464  4281              CMP      r1,r0
002466  d00b              BEQ      |L1.9344|
002468  f9b41000          LDRSH    r1,[r4,#0]  ; NUMAVT
00246c  2901              CMP      r1,#1
00246e  db07              BLT      |L1.9344|
;;;4211   	{
;;;4212   	if(avt_stat[0]==avtON) 	snmp_trap_send("Avtomat #1 is ON ",11,1,1);
002470  2801              CMP      r0,#1
002472  d07e              BEQ      |L1.9586|
;;;4213   	else 				snmp_trap_send("Avtomat #1 is OFF",11,1,0);
002474  2300              MOVS     r3,#0
002476  2201              MOVS     r2,#1
002478  210b              MOVS     r1,#0xb
00247a  a090              ADR      r0,|L1.9916|
00247c  f7fffffe          BL       snmp_trap_send
                  |L1.9344|
;;;4214   	}
;;;4215   if((avt_stat_old[1]!=avt_stat[1])&&(NUMAVT>=2))
002480  7871              LDRB     r1,[r6,#1]  ; avt_stat_old
002482  7868              LDRB     r0,[r5,#1]  ; avt_stat
002484  4281              CMP      r1,r0
002486  d00b              BEQ      |L1.9376|
002488  f9b41000          LDRSH    r1,[r4,#0]  ; NUMAVT
00248c  2902              CMP      r1,#2
00248e  db07              BLT      |L1.9376|
;;;4216   	{
;;;4217   	if(avt_stat[1]==avtON) 	snmp_trap_send("Avtomat #2 is ON ",11,2,1);
002490  2801              CMP      r0,#1
002492  d06f              BEQ      |L1.9588|
;;;4218   	else 				snmp_trap_send("Avtomat #2 is OFF",11,2,0);
002494  2300              MOVS     r3,#0
002496  2202              MOVS     r2,#2
002498  210b              MOVS     r1,#0xb
00249a  a08d              ADR      r0,|L1.9936|
00249c  f7fffffe          BL       snmp_trap_send
                  |L1.9376|
;;;4219   	}
;;;4220   if((avt_stat_old[2]!=avt_stat[2])&&(NUMAVT>=3))
0024a0  78b1              LDRB     r1,[r6,#2]  ; avt_stat_old
0024a2  78a8              LDRB     r0,[r5,#2]  ; avt_stat
0024a4  4281              CMP      r1,r0
0024a6  d00b              BEQ      |L1.9408|
0024a8  f9b41000          LDRSH    r1,[r4,#0]  ; NUMAVT
0024ac  2903              CMP      r1,#3
0024ae  db07              BLT      |L1.9408|
;;;4221   	{
;;;4222   	if(avt_stat[2]==avtON) 	snmp_trap_send("Avtomat #3 is ON ",11,3,1);
0024b0  2801              CMP      r0,#1
0024b2  d072              BEQ      |L1.9626|
;;;4223   	else 				snmp_trap_send("Avtomat #3 is OFF",11,3,0);
0024b4  2300              MOVS     r3,#0
0024b6  2203              MOVS     r2,#3
0024b8  210b              MOVS     r1,#0xb
0024ba  a08a              ADR      r0,|L1.9956|
0024bc  f7fffffe          BL       snmp_trap_send
                  |L1.9408|
;;;4224   	}
;;;4225   if((avt_stat_old[3]!=avt_stat[3])&&(NUMAVT>=4))
0024c0  78f1              LDRB     r1,[r6,#3]  ; avt_stat_old
0024c2  78e8              LDRB     r0,[r5,#3]  ; avt_stat
0024c4  4281              CMP      r1,r0
0024c6  d00b              BEQ      |L1.9440|
0024c8  f9b41000          LDRSH    r1,[r4,#0]  ; NUMAVT
0024cc  2904              CMP      r1,#4
0024ce  db07              BLT      |L1.9440|
;;;4226   	{
;;;4227   	if(avt_stat[3]==avtON) 	snmp_trap_send("Avtomat #4 is ON ",11,4,1);
0024d0  2801              CMP      r0,#1
0024d2  d079              BEQ      |L1.9672|
;;;4228   	else 				snmp_trap_send("Avtomat #4 is OFF",11,4,0);
0024d4  2300              MOVS     r3,#0
0024d6  2204              MOVS     r2,#4
0024d8  210b              MOVS     r1,#0xb
0024da  a087              ADR      r0,|L1.9976|
0024dc  f7fffffe          BL       snmp_trap_send
                  |L1.9440|
;;;4229   	}
;;;4230   if((avt_stat_old[4]!=avt_stat[4])&&(NUMAVT>=5))
0024e0  7931              LDRB     r1,[r6,#4]  ; avt_stat_old
0024e2  7928              LDRB     r0,[r5,#4]  ; avt_stat
0024e4  4281              CMP      r1,r0
0024e6  d00b              BEQ      |L1.9472|
0024e8  f9b41000          LDRSH    r1,[r4,#0]  ; NUMAVT
0024ec  2905              CMP      r1,#5
0024ee  db07              BLT      |L1.9472|
;;;4231   	{
;;;4232   	if(avt_stat[4]==avtON) 	snmp_trap_send("Avtomat #5 is ON ",11,5,1);
0024f0  2801              CMP      r0,#1
0024f2  d071              BEQ      |L1.9688|
;;;4233   	else 				snmp_trap_send("Avtomat #5 is OFF",11,5,0);
0024f4  2300              MOVS     r3,#0
0024f6  2205              MOVS     r2,#5
0024f8  210b              MOVS     r1,#0xb
0024fa  a084              ADR      r0,|L1.9996|
0024fc  f7fffffe          BL       snmp_trap_send
                  |L1.9472|
;;;4234   	}
;;;4235   if((avt_stat_old[5]!=avt_stat[5])&&(NUMAVT>=6))
002500  7971              LDRB     r1,[r6,#5]  ; avt_stat_old
002502  7968              LDRB     r0,[r5,#5]  ; avt_stat
002504  4281              CMP      r1,r0
002506  d00b              BEQ      |L1.9504|
002508  f9b41000          LDRSH    r1,[r4,#0]  ; NUMAVT
00250c  2906              CMP      r1,#6
00250e  db07              BLT      |L1.9504|
;;;4236   	{
;;;4237   	if(avt_stat[5]==avtON) 	snmp_trap_send("Avtomat #6 is ON ",11,6,1);
002510  2801              CMP      r0,#1
002512  d068              BEQ      |L1.9702|
;;;4238   	else 				snmp_trap_send("Avtomat #6 is OFF",11,6,0);
002514  2300              MOVS     r3,#0
002516  2206              MOVS     r2,#6
002518  210b              MOVS     r1,#0xb
00251a  a081              ADR      r0,|L1.10016|
00251c  f7fffffe          BL       snmp_trap_send
                  |L1.9504|
;;;4239   	}
;;;4240   if((avt_stat_old[6]!=avt_stat[6])&&(NUMAVT>=7))
002520  79b1              LDRB     r1,[r6,#6]  ; avt_stat_old
002522  79a8              LDRB     r0,[r5,#6]  ; avt_stat
002524  4281              CMP      r1,r0
002526  d00b              BEQ      |L1.9536|
002528  f9b41000          LDRSH    r1,[r4,#0]  ; NUMAVT
00252c  2907              CMP      r1,#7
00252e  db07              BLT      |L1.9536|
;;;4241   	{
;;;4242   	if(avt_stat[6]==avtON) 	snmp_trap_send("Avtomat #7 is ON ",11,7,1);
002530  2801              CMP      r0,#1
002532  d05f              BEQ      |L1.9716|
;;;4243   	else 				snmp_trap_send("Avtomat #7 is OFF",11,7,0);
002534  2300              MOVS     r3,#0
002536  2207              MOVS     r2,#7
002538  210b              MOVS     r1,#0xb
00253a  a07e              ADR      r0,|L1.10036|
00253c  f7fffffe          BL       snmp_trap_send
                  |L1.9536|
;;;4244   	}
;;;4245   if((avt_stat_old[7]!=avt_stat[7])&&(NUMAVT>=8))
002540  79f1              LDRB     r1,[r6,#7]  ; avt_stat_old
002542  79e8              LDRB     r0,[r5,#7]  ; avt_stat
002544  4281              CMP      r1,r0
002546  d00b              BEQ      |L1.9568|
002548  f9b41000          LDRSH    r1,[r4,#0]  ; NUMAVT
00254c  2908              CMP      r1,#8
00254e  db07              BLT      |L1.9568|
;;;4246   	{
;;;4247   	if(avt_stat[7]==avtON) 	snmp_trap_send("Avtomat #8 is ON ",11,8,1);
002550  2801              CMP      r0,#1
002552  d056              BEQ      |L1.9730|
;;;4248   	else 				snmp_trap_send("Avtomat #8 is OFF",11,8,0);
002554  2300              MOVS     r3,#0
002556  2208              MOVS     r2,#8
002558  210b              MOVS     r1,#0xb
00255a  a07b              ADR      r0,|L1.10056|
00255c  f7fffffe          BL       snmp_trap_send
                  |L1.9568|
;;;4249   	}
;;;4250   if((avt_stat_old[8]!=avt_stat[8])&&(NUMAVT>=9))
002560  7a31              LDRB     r1,[r6,#8]  ; avt_stat_old
002562  7a28              LDRB     r0,[r5,#8]  ; avt_stat
002564  4281              CMP      r1,r0
002566  d00e              BEQ      |L1.9606|
002568  f9b41000          LDRSH    r1,[r4,#0]  ; NUMAVT
00256c  2909              CMP      r1,#9
00256e  db0a              BLT      |L1.9606|
;;;4251   	{
;;;4252   	if(avt_stat[8]==avtON) 	snmp_trap_send("Avtomat #9 is ON ",11,9,1);
002570  e001              B        |L1.9590|
                  |L1.9586|
002572  e013              B        |L1.9628|
                  |L1.9588|
002574  e019              B        |L1.9642|
                  |L1.9590|
002576  2801              CMP      r0,#1
002578  d04a              BEQ      |L1.9744|
;;;4253   	else 				snmp_trap_send("Avtomat #9 is OFF",11,9,0);
00257a  2300              MOVS     r3,#0
00257c  2209              MOVS     r2,#9
00257e  210b              MOVS     r1,#0xb
002580  a076              ADR      r0,|L1.10076|
002582  f7fffffe          BL       snmp_trap_send
                  |L1.9606|
;;;4254   	}
;;;4255   
;;;4256   for(i=0;i<12;i++)
002586  f04f0000          MOV      r0,#0
                  |L1.9610|
;;;4257   	{
;;;4258   	avt_stat_old[i]=avt_stat[i];
00258a  5c29              LDRB     r1,[r5,r0]
00258c  5431              STRB     r1,[r6,r0]
00258e  f1000001          ADD      r0,r0,#1              ;4256
002592  b2c0              UXTB     r0,r0                 ;4256
002594  280c              CMP      r0,#0xc               ;4256
002596  d3f8              BCC      |L1.9610|
                  |L1.9624|
;;;4259   	}
;;;4260   }
002598  bd70              POP      {r4-r6,pc}
                  |L1.9626|
00259a  e00e              B        |L1.9658|
                  |L1.9628|
00259c  2301              MOVS     r3,#1                 ;4212
00259e  461a              MOV      r2,r3                 ;4212
0025a0  210b              MOVS     r1,#0xb               ;4212
0025a2  a073              ADR      r0,|L1.10096|
0025a4  f7fffffe          BL       snmp_trap_send
0025a8  e76a              B        |L1.9344|
                  |L1.9642|
0025aa  2301              MOVS     r3,#1                 ;4217
0025ac  2202              MOVS     r2,#2                 ;4217
0025ae  210b              MOVS     r1,#0xb               ;4217
0025b0  a074              ADR      r0,|L1.10116|
0025b2  f7fffffe          BL       snmp_trap_send
0025b6  e773              B        |L1.9376|
0025b8  e006              B        |L1.9672|
                  |L1.9658|
0025ba  2301              MOVS     r3,#1                 ;4222
0025bc  2203              MOVS     r2,#3                 ;4222
0025be  210b              MOVS     r1,#0xb               ;4222
0025c0  a075              ADR      r0,|L1.10136|
0025c2  f7fffffe          BL       snmp_trap_send
0025c6  e77b              B        |L1.9408|
                  |L1.9672|
0025c8  2301              MOVS     r3,#1                 ;4227
0025ca  2204              MOVS     r2,#4                 ;4227
0025cc  210b              MOVS     r1,#0xb               ;4227
0025ce  a077              ADR      r0,|L1.10156|
0025d0  f7fffffe          BL       snmp_trap_send
0025d4  e784              B        |L1.9440|
0025d6  e7ff              B        |L1.9688|
                  |L1.9688|
0025d8  2301              MOVS     r3,#1                 ;4232
0025da  2205              MOVS     r2,#5                 ;4232
0025dc  210b              MOVS     r1,#0xb               ;4232
0025de  a078              ADR      r0,|L1.10176|
0025e0  f7fffffe          BL       snmp_trap_send
0025e4  e78c              B        |L1.9472|
                  |L1.9702|
0025e6  2301              MOVS     r3,#1                 ;4237
0025e8  2206              MOVS     r2,#6                 ;4237
0025ea  210b              MOVS     r1,#0xb               ;4237
0025ec  a079              ADR      r0,|L1.10196|
0025ee  f7fffffe          BL       snmp_trap_send
0025f2  e795              B        |L1.9504|
                  |L1.9716|
0025f4  2301              MOVS     r3,#1                 ;4242
0025f6  2207              MOVS     r2,#7                 ;4242
0025f8  210b              MOVS     r1,#0xb               ;4242
0025fa  a07b              ADR      r0,|L1.10216|
0025fc  f7fffffe          BL       snmp_trap_send
002600  e79e              B        |L1.9536|
                  |L1.9730|
002602  2301              MOVS     r3,#1                 ;4247
002604  2208              MOVS     r2,#8                 ;4247
002606  210b              MOVS     r1,#0xb               ;4247
002608  a07c              ADR      r0,|L1.10236|
00260a  f7fffffe          BL       snmp_trap_send
00260e  e7a7              B        |L1.9568|
                  |L1.9744|
002610  2301              MOVS     r3,#1                 ;4252
002612  2209              MOVS     r2,#9                 ;4252
002614  210b              MOVS     r1,#0xb               ;4252
002616  a07e              ADR      r0,|L1.10256|
002618  f7fffffe          BL       snmp_trap_send
00261c  e7b3              B        |L1.9606|
;;;4261   
                          ENDP

                  bat_hndl PROC
;;;4262   //-----------------------------------------------
;;;4263   void bat_hndl(void)
00261e  b570              PUSH     {r4-r6,lr}
;;;4264   {
;;;4265   /*if(mess_find(_MESS_BAT_MASK_ON))
;;;4266   	{
;;;4267   	if(mess_data[0]==_MESS_BAT_MASK_ON)
;;;4268   		{
;;;4269   		char i;
;;;4270   		for(i=0;i<2;i++)
;;;4271   			{
;;;4272   			if(mess_data[1]&(1<<i))
;;;4273   				{
;;;4274   				bat[i]._cnt_to_block=0;
;;;4275        			bat[i]._rel_stat=0;
;;;4276        			}
;;;4277   			}
;;;4278   		}
;;;4279   	}
;;;4280   if(mess_find(_MESS_BAT_MASK_OFF))
;;;4281   	{		
;;;4282   	if(mess_data[0]==_MESS_BAT_MASK_OFF)
;;;4283   		{
;;;4284   		char i;
;;;4285   		for(i=0;i<2;i++)
;;;4286   			{
;;;4287   			if((mess_data[1]&(1<<i)) && (bat[i]._cnt_to_block==0) && (bat[i]._rel_stat==0))
;;;4288   				{
;;;4289   				bat[i]._cnt_to_block=20;
;;;4290   				bat[i]._rel_stat=1;
;;;4291        			}
;;;4292   			}
;;;4293   		
;;;4294   		}		
;;;4295   	}*/
;;;4296   
;;;4297   if(mess_find_unvol(MESS2BAT_HNDL))
002620  20c8              MOVS     r0,#0xc8
002622  f7fffffe          BL       mess_find_unvol
;;;4298   	{ 
;;;4299   	char i;
;;;4300   	
;;;4301   	if(mess_data[0]==PARAM_BAT_ALL_OFF_AFTER_2SEC)
;;;4302   		{
;;;4303   		for(i=0;i<MAX_NUM_OF_BAT;i++)
;;;4304   			{
;;;4305   			if(bat[i]._cnt_to_block<50)bat[i]._cnt_to_block++;
002626  497f              LDR      r1,|L1.10276|
002628  2200              MOVS     r2,#0                 ;4303
00262a  b3a8              CBZ      r0,|L1.9880|
00262c  4b7e              LDR      r3,|L1.10280|
;;;4306   			}
;;;4307   		}
;;;4308   
;;;4309   	else if(mess_data[0]==PARAM_BAT_MASK_OFF_AFTER_2SEC)
;;;4310   		{
;;;4311   		for(i=0;i<MAX_NUM_OF_BAT;i++)
;;;4312   			{
;;;4313   			if(mess_data[1]&(1<<i))
00262e  2401              MOVS     r4,#1
002630  6818              LDR      r0,[r3,#0]            ;4301  ; mess_data
002632  28c9              CMP      r0,#0xc9              ;4301
002634  d01c              BEQ      |L1.9840|
002636  28ca              CMP      r0,#0xca              ;4309
002638  d02f              BEQ      |L1.9882|
;;;4314   				{
;;;4315   				if(bat[i]._cnt_to_block<50) bat[i]._cnt_to_block++;
;;;4316   				}
;;;4317   			else bat[i]._cnt_to_block=0;
;;;4318   			}
;;;4319   		}
;;;4320   	else 
;;;4321   	 	{
;;;4322   		for(i=0;i<MAX_NUM_OF_BAT;i++)
00263a  4610              MOV      r0,r2
                  |L1.9788|
;;;4323   			{
;;;4324   			bat[i]._cnt_to_block=0;
00263c  eb000340          ADD      r3,r0,r0,LSL #1
002640  eb031300          ADD      r3,r3,r0,LSL #4
002644  f8012023          STRB     r2,[r1,r3,LSL #2]
002648  f1000001          ADD      r0,r0,#1              ;4322
00264c  b2c0              UXTB     r0,r0                 ;4322
00264e  2802              CMP      r0,#2                 ;4322
002650  d3f4              BCC      |L1.9788|
                  |L1.9810|
;;;4325   			}
;;;4326   
;;;4327   		}
;;;4328   	for(i=0;i<MAX_NUM_OF_BAT;i++)
002652  f04f0000          MOV      r0,#0
                  |L1.9814|
;;;4329   		{
;;;4330   		if(bat[i]._cnt_to_block>20)bat[i]._rel_stat=1;
002656  eb000340          ADD      r3,r0,r0,LSL #1
00265a  eb031300          ADD      r3,r3,r0,LSL #4
00265e  f8115023          LDRB     r5,[r1,r3,LSL #2]
002662  2d14              CMP      r5,#0x14
002664  d91a              BLS      |L1.9884|
002666  eb010383          ADD      r3,r1,r3,LSL #2
00266a  f883403c          STRB     r4,[r3,#0x3c]
00266e  e101              B        |L1.10356|
                  |L1.9840|
002670  f04f0000          MOV      r0,#0                 ;4303
                  |L1.9844|
002674  eb000340          ADD      r3,r0,r0,LSL #1       ;4305
002678  eb031500          ADD      r5,r3,r0,LSL #4       ;4305
00267c  f8113025          LDRB     r3,[r1,r5,LSL #2]     ;4305
002680  2b32              CMP      r3,#0x32              ;4305
002682  d203              BCS      |L1.9868|
002684  f1030301          ADD      r3,r3,#1              ;4305
002688  f8013025          STRB     r3,[r1,r5,LSL #2]     ;4305
                  |L1.9868|
00268c  f1000001          ADD      r0,r0,#1              ;4303
002690  b2c0              UXTB     r0,r0                 ;4303
002692  2802              CMP      r0,#2                 ;4303
002694  d3ee              BCC      |L1.9844|
002696  e7dc              B        |L1.9810|
                  |L1.9880|
002698  e0f3              B        |L1.10370|
                  |L1.9882|
00269a  e0c7              B        |L1.10284|
                  |L1.9884|
00269c  e0e6              B        |L1.10348|
00269e  0000              DCW      0x0000
                  |L1.9888|
                          DCD      bps
                  |L1.9892|
                          DCD      net_av
                  |L1.9896|
                          DCD      ||area_number.21||
                  |L1.9900|
                          DCD      eb2_data_short
                  |L1.9904|
                          DCD      avt_stat
                  |L1.9908|
                          DCD      avt_stat_old
                  |L1.9912|
                          DCD      NUMAVT
                  |L1.9916|
0026bc  4176746f          DCB      "Avtomat #1 is OFF",0
0026c0  6d617420
0026c4  23312069
0026c8  73204f46
0026cc  4600    
0026ce  00                DCB      0
0026cf  00                DCB      0
                  |L1.9936|
0026d0  4176746f          DCB      "Avtomat #2 is OFF",0
0026d4  6d617420
0026d8  23322069
0026dc  73204f46
0026e0  4600    
0026e2  00                DCB      0
0026e3  00                DCB      0
                  |L1.9956|
0026e4  4176746f          DCB      "Avtomat #3 is OFF",0
0026e8  6d617420
0026ec  23332069
0026f0  73204f46
0026f4  4600    
0026f6  00                DCB      0
0026f7  00                DCB      0
                  |L1.9976|
0026f8  4176746f          DCB      "Avtomat #4 is OFF",0
0026fc  6d617420
002700  23342069
002704  73204f46
002708  4600    
00270a  00                DCB      0
00270b  00                DCB      0
                  |L1.9996|
00270c  4176746f          DCB      "Avtomat #5 is OFF",0
002710  6d617420
002714  23352069
002718  73204f46
00271c  4600    
00271e  00                DCB      0
00271f  00                DCB      0
                  |L1.10016|
002720  4176746f          DCB      "Avtomat #6 is OFF",0
002724  6d617420
002728  23362069
00272c  73204f46
002730  4600    
002732  00                DCB      0
002733  00                DCB      0
                  |L1.10036|
002734  4176746f          DCB      "Avtomat #7 is OFF",0
002738  6d617420
00273c  23372069
002740  73204f46
002744  4600    
002746  00                DCB      0
002747  00                DCB      0
                  |L1.10056|
002748  4176746f          DCB      "Avtomat #8 is OFF",0
00274c  6d617420
002750  23382069
002754  73204f46
002758  4600    
00275a  00                DCB      0
00275b  00                DCB      0
                  |L1.10076|
00275c  4176746f          DCB      "Avtomat #9 is OFF",0
002760  6d617420
002764  23392069
002768  73204f46
00276c  4600    
00276e  00                DCB      0
00276f  00                DCB      0
                  |L1.10096|
002770  4176746f          DCB      "Avtomat #1 is ON ",0
002774  6d617420
002778  23312069
00277c  73204f4e
002780  2000    
002782  00                DCB      0
002783  00                DCB      0
                  |L1.10116|
002784  4176746f          DCB      "Avtomat #2 is ON ",0
002788  6d617420
00278c  23322069
002790  73204f4e
002794  2000    
002796  00                DCB      0
002797  00                DCB      0
                  |L1.10136|
002798  4176746f          DCB      "Avtomat #3 is ON ",0
00279c  6d617420
0027a0  23332069
0027a4  73204f4e
0027a8  2000    
0027aa  00                DCB      0
0027ab  00                DCB      0
                  |L1.10156|
0027ac  4176746f          DCB      "Avtomat #4 is ON ",0
0027b0  6d617420
0027b4  23342069
0027b8  73204f4e
0027bc  2000    
0027be  00                DCB      0
0027bf  00                DCB      0
                  |L1.10176|
0027c0  4176746f          DCB      "Avtomat #5 is ON ",0
0027c4  6d617420
0027c8  23352069
0027cc  73204f4e
0027d0  2000    
0027d2  00                DCB      0
0027d3  00                DCB      0
                  |L1.10196|
0027d4  4176746f          DCB      "Avtomat #6 is ON ",0
0027d8  6d617420
0027dc  23362069
0027e0  73204f4e
0027e4  2000    
0027e6  00                DCB      0
0027e7  00                DCB      0
                  |L1.10216|
0027e8  4176746f          DCB      "Avtomat #7 is ON ",0
0027ec  6d617420
0027f0  23372069
0027f4  73204f4e
0027f8  2000    
0027fa  00                DCB      0
0027fb  00                DCB      0
                  |L1.10236|
0027fc  4176746f          DCB      "Avtomat #8 is ON ",0
002800  6d617420
002804  23382069
002808  73204f4e
00280c  2000    
00280e  00                DCB      0
00280f  00                DCB      0
                  |L1.10256|
002810  4176746f          DCB      "Avtomat #9 is ON ",0
002814  6d617420
002818  23392069
00281c  73204f4e
002820  2000    
002822  00                DCB      0
002823  00                DCB      0
                  |L1.10276|
                          DCD      bat
                  |L1.10280|
                          DCD      mess_data
                  |L1.10284|
00282c  f04f0000          MOV      r0,#0                 ;4311
002830  685e              LDR      r6,[r3,#4]            ;4313
                  |L1.10290|
002832  fa04f300          LSL      r3,r4,r0              ;4313
002836  421e              TST      r6,r3                 ;4313
002838  d00c              BEQ      |L1.10324|
00283a  eb000340          ADD      r3,r0,r0,LSL #1       ;4315
00283e  eb031500          ADD      r5,r3,r0,LSL #4       ;4315
002842  f8113025          LDRB     r3,[r1,r5,LSL #2]     ;4315
002846  2b32              CMP      r3,#0x32              ;4315
002848  d20a              BCS      |L1.10336|
00284a  f1030301          ADD      r3,r3,#1              ;4315
00284e  f8013025          STRB     r3,[r1,r5,LSL #2]     ;4315
002852  e005              B        |L1.10336|
                  |L1.10324|
002854  eb000340          ADD      r3,r0,r0,LSL #1       ;4317
002858  eb031300          ADD      r3,r3,r0,LSL #4       ;4317
00285c  f8012023          STRB     r2,[r1,r3,LSL #2]     ;4317
                  |L1.10336|
002860  f1000001          ADD      r0,r0,#1              ;4311
002864  b2c0              UXTB     r0,r0                 ;4311
002866  2802              CMP      r0,#2                 ;4311
002868  d3e3              BCC      |L1.10290|
00286a  e6f2              B        |L1.9810|
                  |L1.10348|
;;;4331   		else bat[i]._rel_stat=0;
00286c  eb010383          ADD      r3,r1,r3,LSL #2
002870  f883203c          STRB     r2,[r3,#0x3c]
                  |L1.10356|
002874  f1000001          ADD      r0,r0,#1              ;4328
002878  b2c0              UXTB     r0,r0                 ;4328
00287a  2802              CMP      r0,#2                 ;4328
00287c  f4ffaeeb          BCC      |L1.9814|
;;;4332   		}
;;;4333   
;;;4334   	}
;;;4335   
;;;4336   else 
;;;4337   	{
;;;4338   	char i;
;;;4339   	for(i=0;i<MAX_NUM_OF_BAT;i++)
;;;4340   		{
;;;4341   		bat[i]._cnt_to_block=0;
;;;4342   		bat[i]._rel_stat=0;
;;;4343   		}
;;;4344   
;;;4345   	}
;;;4346   
;;;4347   /*if(mess_find_unvol(MESS2BAT_HNDL1))
;;;4348   	{
;;;4349   	if(PARAM_BAT_ON)
;;;4350   		{
;;;4351   		char i;
;;;4352   		for(i=0;i<MAX_NUM_OF_BAT;i++)
;;;4353   			{
;;;4354   			if(mess_data[1]&(1<<i))
;;;4355   				{
;;;4356   				bat[i]._cnt_to_block=0;
;;;4357   				bat[i]._rel_stat=0;
;;;4358   				}
;;;4359   			}
;;;4360   		}
;;;4361   	} */
;;;4362   }
002880  e68a              B        |L1.9624|
                  |L1.10370|
002882  f04f0000          MOV      r0,#0                 ;4339
                  |L1.10374|
002886  eb000340          ADD      r3,r0,r0,LSL #1       ;4341
00288a  eb031300          ADD      r3,r3,r0,LSL #4       ;4341
00288e  f8012023          STRB     r2,[r1,r3,LSL #2]     ;4341
002892  eb010383          ADD      r3,r1,r3,LSL #2       ;4342
002896  f883203c          STRB     r2,[r3,#0x3c]         ;4342
00289a  f1000001          ADD      r0,r0,#1              ;4339
00289e  b2c0              UXTB     r0,r0                 ;4339
0028a0  2802              CMP      r0,#2                 ;4339
0028a2  d3f0              BCC      |L1.10374|
0028a4  e678              B        |L1.9624|
;;;4363   
                          ENDP

                  klimat_hndl PROC
;;;4493   //-----------------------------------------------
;;;4494   void klimat_hndl(void)
0028a6  e92d41f0          PUSH     {r4-r8,lr}
;;;4495   {
;;;4496   
;;;4497   
;;;4498   if(t_box>TBOXMAX)
0028aa  4dfd              LDR      r5,|L1.11424|
0028ac  48fd              LDR      r0,|L1.11428|
;;;4499   	{
;;;4500   	av_tbox_cnt++;
0028ae  4cfe              LDR      r4,|L1.11432|
0028b0  f9b51000          LDRSH    r1,[r5,#0]            ;4498  ; t_box
0028b4  f9b02000          LDRSH    r2,[r0,#0]            ;4498  ; TBOXMAX
0028b8  f9b40000          LDRSH    r0,[r4,#0]
0028bc  4291              CMP      r1,r2                 ;4498
0028be  dd03              BLE      |L1.10440|
0028c0  f1000001          ADD      r0,r0,#1
0028c4  8020              STRH     r0,[r4,#0]
0028c6  e003              B        |L1.10448|
                  |L1.10440|
;;;4501   	} 
;;;4502   else if(t_box<TBOXMAX)
0028c8  da02              BGE      |L1.10448|
;;;4503   	{
;;;4504   	av_tbox_cnt--;
0028ca  f1a00001          SUB      r0,r0,#1
0028ce  8020              STRH     r0,[r4,#0]
                  |L1.10448|
;;;4505   	}
;;;4506   gran(&av_tbox_cnt,0,6);
0028d0  2206              MOVS     r2,#6
0028d2  2100              MOVS     r1,#0
0028d4  48f4              LDR      r0,|L1.11432|
0028d6  f7fffffe          BL       gran
;;;4507   
;;;4508   if(av_tbox_cnt>5)
0028da  f9b40000          LDRSH    r0,[r4,#0]  ; av_tbox_cnt
;;;4509   	{
;;;4510   	av_tbox_stat=atsON;
0028de  49f3              LDR      r1,|L1.11436|
0028e0  2601              MOVS     r6,#1
0028e2  2805              CMP      r0,#5                 ;4508
0028e4  dd00              BLE      |L1.10472|
0028e6  700e              STRB     r6,[r1,#0]
                  |L1.10472|
0028e8  2400              MOVS     r4,#0                 ;4506
;;;4511   	}
;;;4512   if(av_tbox_cnt<1)
0028ea  2801              CMP      r0,#1
0028ec  da00              BGE      |L1.10480|
;;;4513   	{
;;;4514   	av_tbox_stat=atsOFF;
0028ee  700c              STRB     r4,[r1,#0]
                  |L1.10480|
;;;4515   	}
;;;4516   
;;;4517   if(t_box<(TBOXREG-2))
0028f0  49ef              LDR      r1,|L1.11440|
0028f2  f9b50000          LDRSH    r0,[r5,#0]  ; t_box
;;;4518   	{
;;;4519   	if(t_box_cnt<30)
0028f6  4aef              LDR      r2,|L1.11444|
0028f8  f9b11000          LDRSH    r1,[r1,#0]            ;4517  ; TBOXREG
;;;4520   		{
;;;4521   		t_box_cnt++;
;;;4522   		if(t_box_cnt>=30)
;;;4523   			{
;;;4524   			main_vent_pos--;
0028fc  4fee              LDR      r7,|L1.11448|
0028fe  1e8b              SUBS     r3,r1,#2              ;4517
002900  4298              CMP      r0,r3                 ;4517
002902  da0f              BGE      |L1.10532|
002904  f9921000          LDRSB    r1,[r2,#0]            ;4519  ; t_box_cnt
002908  291e              CMP      r1,#0x1e              ;4519
00290a  da1e              BGE      |L1.10570|
00290c  f1010101          ADD      r1,r1,#1              ;4521
002910  b249              SXTB     r1,r1                 ;4521
002912  7011              STRB     r1,[r2,#0]            ;4521
002914  291e              CMP      r1,#0x1e              ;4522
002916  db18              BLT      |L1.10570|
002918  8839              LDRH     r1,[r7,#0]  ; main_vent_pos
00291a  f1a10101          SUB      r1,r1,#1
00291e  8039              STRH     r1,[r7,#0]
;;;4525   			t_box_cnt=0;
002920  7014              STRB     r4,[r2,#0]
002922  e012              B        |L1.10570|
                  |L1.10532|
;;;4526   			}
;;;4527   		}
;;;4528   	}
;;;4529   else if(t_box>(TBOXREG))
002924  4288              CMP      r0,r1
002926  dd0f              BLE      |L1.10568|
;;;4530   	{
;;;4531   	if(t_box_cnt<30)
002928  f9921000          LDRSB    r1,[r2,#0]  ; t_box_cnt
00292c  291e              CMP      r1,#0x1e
00292e  da0c              BGE      |L1.10570|
;;;4532   		{
;;;4533   		t_box_cnt++;
002930  f1010101          ADD      r1,r1,#1
002934  b249              SXTB     r1,r1
002936  7011              STRB     r1,[r2,#0]
;;;4534   		if(t_box_cnt>=30)
002938  291e              CMP      r1,#0x1e
00293a  db06              BLT      |L1.10570|
;;;4535   			{
;;;4536   			main_vent_pos++;
00293c  8839              LDRH     r1,[r7,#0]  ; main_vent_pos
00293e  f1010101          ADD      r1,r1,#1
002942  8039              STRH     r1,[r7,#0]
;;;4537   			t_box_cnt=0;
002944  7014              STRB     r4,[r2,#0]
002946  e000              B        |L1.10570|
                  |L1.10568|
;;;4538   			}
;;;4539   		}
;;;4540   	}
;;;4541   else
;;;4542   	{
;;;4543   	t_box_cnt=0;
002948  7014              STRB     r4,[r2,#0]
                  |L1.10570|
;;;4544   	}
;;;4545   
;;;4546   #ifndef UKU_KONTUR
;;;4547   if(t_box>TBOXVENTMAX)gran(&main_vent_pos,0,20); 
00294a  49dc              LDR      r1,|L1.11452|
00294c  f9b11000          LDRSH    r1,[r1,#0]  ; TBOXVENTMAX
002950  4288              CMP      r0,r1
002952  dd05              BLE      |L1.10592|
002954  2214              MOVS     r2,#0x14
002956  2100              MOVS     r1,#0
002958  48d7              LDR      r0,|L1.11448|
00295a  f7fffffe          BL       gran
00295e  e007              B        |L1.10608|
                  |L1.10592|
;;;4548   else gran(&main_vent_pos,0,pos_vent+9);
002960  48d7              LDR      r0,|L1.11456|
002962  2100              MOVS     r1,#0
002964  8800              LDRH     r0,[r0,#0]  ; pos_vent
002966  3009              ADDS     r0,r0,#9
002968  b202              SXTH     r2,r0
00296a  48d3              LDR      r0,|L1.11448|
00296c  f7fffffe          BL       gran
                  |L1.10608|
;;;4549   
;;;4550   if((mess_find_unvol(MESS2VENT_HNDL))&&(mess_data[0]==PARAM_VENT_CB))
002970  20f0              MOVS     r0,#0xf0
002972  f7fffffe          BL       mess_find_unvol
002976  b128              CBZ      r0,|L1.10628|
002978  48d2              LDR      r0,|L1.11460|
00297a  6801              LDR      r1,[r0,#0]  ; mess_data
00297c  29f1              CMP      r1,#0xf1
00297e  d101              BNE      |L1.10628|
;;;4551   	{
;;;4552   	main_vent_pos=mess_data[1];
002980  6840              LDR      r0,[r0,#4]  ; mess_data
002982  8038              STRH     r0,[r7,#0]
                  |L1.10628|
;;;4553   	}
;;;4554   
;;;4555   
;;;4556   if(main_vent_pos<=1)mixer_vent_stat=mvsON;
002984  f9b71000          LDRSH    r1,[r7,#0]  ; main_vent_pos
002988  48cf              LDR      r0,|L1.11464|
00298a  2901              CMP      r1,#1
00298c  dc01              BGT      |L1.10642|
00298e  7006              STRB     r6,[r0,#0]
002990  e000              B        |L1.10644|
                  |L1.10642|
;;;4557   else mixer_vent_stat=mvsOFF;
002992  7004              STRB     r4,[r0,#0]
                  |L1.10644|
;;;4558   #endif
;;;4559   
;;;4560   #ifdef UKU_KONTUR
;;;4561   
;;;4562   if(t_box>TBOXVENTON) t_box_vent_on_cnt++;
;;;4563   else if(t_box<TBOXVENTOFF) t_box_vent_on_cnt--;
;;;4564   gran(&t_box_vent_on_cnt,0,10);
;;;4565   
;;;4566   if(t_box_vent_on_cnt>9) vent_stat_k=vsON;
;;;4567   else if(t_box_vent_on_cnt<1) vent_stat_k=vsOFF;
;;;4568   
;;;4569   if(t_box<TBOXWARMON) t_box_warm_on_cnt++;
;;;4570   else if(t_box>TBOXWARMOFF) t_box_warm_on_cnt--;
;;;4571   gran(&t_box_warm_on_cnt,0,10);
;;;4572   
;;;4573   if(t_box_warm_on_cnt>9) warm_stat_k=wsON;
;;;4574   else if(t_box_warm_on_cnt<1) warm_stat_k=wsOFF;
;;;4575   
;;;4576   #endif
;;;4577   
;;;4578   if((TBATDISABLE>=50) && (TBATDISABLE<=90))
002994  48cd              LDR      r0,|L1.11468|
;;;4579   	{
;;;4580   	if(t_box>TBATDISABLE)
;;;4581   		{
;;;4582   		tbatdisable_cnt++;
;;;4583   		}
;;;4584   	if(t_box<TBATENABLE)
;;;4585   		{
;;;4586   		tbatdisable_cnt--;
;;;4587   		}
;;;4588   	gran(&tbatdisable_cnt,0,6);
;;;4589   
;;;4590   	if(tbatdisable_cnt>5)
;;;4591   		{
;;;4592   		tbatdisable_stat=tbdsOFF;
002996  f8df8338          LDR      r8,|L1.11472|
00299a  f9b00000          LDRSH    r0,[r0,#0]            ;4578  ; TBATDISABLE
00299e  f1a00132          SUB      r1,r0,#0x32           ;4578
0029a2  2928              CMP      r1,#0x28              ;4578
0029a4  d821              BHI      |L1.10730|
0029a6  f9b51000          LDRSH    r1,[r5,#0]            ;4580  ; t_box
0029aa  4fca              LDR      r7,|L1.11476|
0029ac  4281              CMP      r1,r0                 ;4580
0029ae  dd03              BLE      |L1.10680|
0029b0  8838              LDRH     r0,[r7,#0]            ;4582  ; tbatdisable_cnt
0029b2  f1000001          ADD      r0,r0,#1              ;4582
0029b6  8038              STRH     r0,[r7,#0]            ;4582
                  |L1.10680|
0029b8  48c7              LDR      r0,|L1.11480|
0029ba  f9b00000          LDRSH    r0,[r0,#0]            ;4584  ; TBATENABLE
0029be  4281              CMP      r1,r0                 ;4584
0029c0  da03              BGE      |L1.10698|
0029c2  8838              LDRH     r0,[r7,#0]            ;4586  ; tbatdisable_cnt
0029c4  f1a00001          SUB      r0,r0,#1              ;4586
0029c8  8038              STRH     r0,[r7,#0]            ;4586
                  |L1.10698|
0029ca  2206              MOVS     r2,#6                 ;4588
0029cc  2100              MOVS     r1,#0                 ;4588
0029ce  48c1              LDR      r0,|L1.11476|
0029d0  f7fffffe          BL       gran
0029d4  f9b70000          LDRSH    r0,[r7,#0]            ;4590  ; tbatdisable_cnt
0029d8  2805              CMP      r0,#5                 ;4590
0029da  dd01              BLE      |L1.10720|
0029dc  f8886000          STRB     r6,[r8,#0]
                  |L1.10720|
;;;4593   		}
;;;4594   	if(tbatdisable_cnt<1)
0029e0  2801              CMP      r0,#1
0029e2  da04              BGE      |L1.10734|
;;;4595   		{
;;;4596   		tbatdisable_stat=tbdsON;
0029e4  f8884000          STRB     r4,[r8,#0]
0029e8  e001              B        |L1.10734|
                  |L1.10730|
;;;4597   		}
;;;4598   	}
;;;4599   else 
;;;4600   	{
;;;4601   	tbatdisable_stat=tbdsON;
0029ea  f8884000          STRB     r4,[r8,#0]
                  |L1.10734|
;;;4602   	}
;;;4603   
;;;4604   if((TLOADDISABLE>=50) && (TLOADDISABLE<=80))
0029ee  48bb              LDR      r0,|L1.11484|
;;;4605   	{
;;;4606   	if(t_box>TLOADDISABLE)
;;;4607   		{
;;;4608   		tloaddisable_cnt++;
;;;4609   		}
;;;4610   	if(t_box<TLOADENABLE)
;;;4611   		{
;;;4612   		tloaddisable_cnt--;
;;;4613   		}
;;;4614   	gran(&tloaddisable_cnt,0,6);
;;;4615   
;;;4616   	if(tloaddisable_cnt>5)
;;;4617   		{
;;;4618   		tloaddisable_stat=tldsOFF;
0029f0  4fbb              LDR      r7,|L1.11488|
0029f2  f9b00000          LDRSH    r0,[r0,#0]            ;4604  ; TLOADDISABLE
0029f6  f1a00132          SUB      r1,r0,#0x32           ;4604
0029fa  291e              CMP      r1,#0x1e              ;4604
0029fc  d81f              BHI      |L1.10814|
0029fe  f9b51000          LDRSH    r1,[r5,#0]            ;4606  ; t_box
002a02  4db8              LDR      r5,|L1.11492|
002a04  4281              CMP      r1,r0                 ;4606
002a06  dd03              BLE      |L1.10768|
002a08  8828              LDRH     r0,[r5,#0]            ;4608  ; tloaddisable_cnt
002a0a  f1000001          ADD      r0,r0,#1              ;4608
002a0e  8028              STRH     r0,[r5,#0]            ;4608
                  |L1.10768|
002a10  48b5              LDR      r0,|L1.11496|
002a12  f9b00000          LDRSH    r0,[r0,#0]            ;4610  ; TLOADENABLE
002a16  4281              CMP      r1,r0                 ;4610
002a18  da03              BGE      |L1.10786|
002a1a  8828              LDRH     r0,[r5,#0]            ;4612  ; tloaddisable_cnt
002a1c  f1a00001          SUB      r0,r0,#1              ;4612
002a20  8028              STRH     r0,[r5,#0]            ;4612
                  |L1.10786|
002a22  2206              MOVS     r2,#6                 ;4614
002a24  2100              MOVS     r1,#0                 ;4614
002a26  48af              LDR      r0,|L1.11492|
002a28  f7fffffe          BL       gran
002a2c  f9b50000          LDRSH    r0,[r5,#0]            ;4616  ; tloaddisable_cnt
002a30  2805              CMP      r0,#5                 ;4616
002a32  dd00              BLE      |L1.10806|
002a34  703e              STRB     r6,[r7,#0]
                  |L1.10806|
;;;4619   		}
;;;4620   	if(tloaddisable_cnt<1)
002a36  2801              CMP      r0,#1
002a38  da00              BGE      |L1.10812|
;;;4621   		{
;;;4622   		tloaddisable_stat=tldsON;
002a3a  703c              STRB     r4,[r7,#0]
                  |L1.10812|
;;;4623   		}
;;;4624   	}
;;;4625   else 
;;;4626   	{
;;;4627   	tloaddisable_stat=tldsON;
;;;4628   	}
;;;4629   
;;;4630   }
002a3c  e4f7              B        |L1.9262|
                  |L1.10814|
002a3e  703c              STRB     r4,[r7,#0]            ;4627
002a40  e4f5              B        |L1.9262|
;;;4631   #endif
                          ENDP

                  bat_drv PROC
;;;4767   //-----------------------------------------------
;;;4768   void bat_drv(char in)
002a42  e92d5ffc          PUSH     {r2-r12,lr}
;;;4769   {
002a46  4605              MOV      r5,r0
;;;4770   unsigned short /*tempUS,*/tempUS_;
;;;4771   unsigned long tempUL,tempUL_;
;;;4772   unsigned short b_zar;
;;;4773   //static unsigned short time_cnt[2];
;;;4774   
;;;4775   
;;;4776   
;;;4777   if(cntrl_stat_blok_cnt_plus[in])cntrl_stat_blok_cnt_plus[in]--;
002a48  49a8              LDR      r1,|L1.11500|
002a4a  f9310015          LDRSH    r0,[r1,r5,LSL #1]
002a4e  b118              CBZ      r0,|L1.10840|
002a50  f1a00001          SUB      r0,r0,#1
002a54  f8210015          STRH     r0,[r1,r5,LSL #1]
                  |L1.10840|
;;;4778   if(cntrl_stat_blok_cnt_minus[in])cntrl_stat_blok_cnt_minus[in]--;
002a58  4aa4              LDR      r2,|L1.11500|
002a5a  1d12              ADDS     r2,r2,#4
002a5c  f9320015          LDRSH    r0,[r2,r5,LSL #1]
002a60  b118              CBZ      r0,|L1.10858|
002a62  f1a00001          SUB      r0,r0,#1
002a66  f8220015          STRH     r0,[r2,r5,LSL #1]
                  |L1.10858|
;;;4779   
;;;4780   
;;;4781   if(bat[in]._Ib>IZMAX) cntrl_stat_blok_cnt_plus[in]=100;
002a6a  eb050045          ADD      r0,r5,r5,LSL #1
002a6e  eb001305          ADD      r3,r0,r5,LSL #4
002a72  489f              LDR      r0,|L1.11504|
002a74  f04f0b64          MOV      r11,#0x64
002a78  eb000483          ADD      r4,r0,r3,LSL #2
002a7c  4b9d              LDR      r3,|L1.11508|
002a7e  f9b40008          LDRSH    r0,[r4,#8]
002a82  f9b33000          LDRSH    r3,[r3,#0]  ; IZMAX
002a86  4298              CMP      r0,r3
002a88  dd01              BLE      |L1.10894|
002a8a  f821b015          STRH     r11,[r1,r5,LSL #1]
                  |L1.10894|
;;;4782   if(bat[in]._Ib<0)     cntrl_stat_blok_cnt_minus[in]=100;
002a8e  2800              CMP      r0,#0
002a90  da01              BGE      |L1.10902|
002a92  f822b015          STRH     r11,[r2,r5,LSL #1]
                  |L1.10902|
;;;4783   
;;;4784   if(cntrl_stat_blok_cnt_plus[in] && cntrl_stat_blok_cnt_minus[in])
;;;4785        {
;;;4786        if(!cntrl_stat_blok_cnt_)
002a96  4895              LDR      r0,|L1.11500|
002a98  f8313015          LDRH     r3,[r1,r5,LSL #1]     ;4784
002a9c  3880              SUBS     r0,r0,#0x80
002a9e  2700              MOVS     r7,#0
002aa0  b14b              CBZ      r3,|L1.10934|
002aa2  f8323015          LDRH     r3,[r2,r5,LSL #1]     ;4784
002aa6  b133              CBZ      r3,|L1.10934|
002aa8  f8b03060          LDRH     r3,[r0,#0x60]  ; cntrl_stat_blok_cnt_
002aac  b1a3              CBZ      r3,|L1.10968|
;;;4787             {
;;;4788             cntrl_stat_blok_cnt_=600; 
;;;4789             cntrl_stat_blok_cnt_plus[in]=0;
;;;4790             cntrl_stat_blok_cnt_minus[in]=0;
;;;4791             }
;;;4792        else cntrl_stat_blok_cnt=3000;
002aae  f64031b8          MOV      r1,#0xbb8
002ab2  f8a0105e          STRH     r1,[r0,#0x5e]
                  |L1.10934|
;;;4793        }
;;;4794   cntrl_stat_blok_cnt=0;
002ab6  f8a0705e          STRH     r7,[r0,#0x5e]
;;;4795   
;;;4796   if(++(bat[in]._time_cnt)>=10)
002aba  f894003e          LDRB     r0,[r4,#0x3e]
002abe  1c40              ADDS     r0,r0,#1
002ac0  b2c0              UXTB     r0,r0
002ac2  f884003e          STRB     r0,[r4,#0x3e]
002ac6  280a              CMP      r0,#0xa
002ac8  d301              BCC      |L1.10958|
;;;4797   	{
;;;4798   	bat[in]._time_cnt=0;
002aca  f884703e          STRB     r7,[r4,#0x3e]
                  |L1.10958|
;;;4799   	//bat[in]._zar_cnt++;
;;;4800   	}
;;;4801   
;;;4802   if(main_10Hz_cnt==50)
002ace  4e8a              LDR      r6,|L1.11512|
002ad0  8830              LDRH     r0,[r6,#0]  ; main_10Hz_cnt
002ad2  2832              CMP      r0,#0x32
002ad4  d009              BEQ      |L1.10986|
002ad6  e017              B        |L1.11016|
                  |L1.10968|
002ad8  f44f7316          MOV      r3,#0x258             ;4788
002adc  f8a03060          STRH     r3,[r0,#0x60]         ;4788
002ae0  f8217015          STRH     r7,[r1,r5,LSL #1]     ;4789
002ae4  f8227015          STRH     r7,[r2,r5,LSL #1]     ;4790
002ae8  e7e5              B        |L1.10934|
                  |L1.10986|
;;;4803   	{
;;;4804   	if(!bat[in]._rel_stat)
002aea  f894003c          LDRB     r0,[r4,#0x3c]
002aee  b958              CBNZ     r0,|L1.11016|
;;;4805   		{
;;;4806   		
;;;4807   		if(bat[in]._Ub<80) 
002af0  f9b40002          LDRSH    r0,[r4,#2]
002af4  2850              CMP      r0,#0x50
002af6  da07              BGE      |L1.11016|
;;;4808   			{
;;;4809   			
;;;4810   			if(!(bat[in]._av&1))
002af8  f894003d          LDRB     r0,[r4,#0x3d]
002afc  07c0              LSLS     r0,r0,#31
002afe  d103              BNE      |L1.11016|
;;;4811   				{
;;;4812   				avar_bat_hndl(in,1);
002b00  2101              MOVS     r1,#1
002b02  4628              MOV      r0,r5
002b04  f7fffffe          BL       avar_bat_hndl
                  |L1.11016|
;;;4813   				//if(in==0)plazma_bat++;
;;;4814   				}
;;;4815   			}				
;;;4816   
;;;4817   		}
;;;4818   	}
;;;4819   
;;;4820   if(main_10Hz_cnt>200)
002b08  f9b60000          LDRSH    r0,[r6,#0]  ; main_10Hz_cnt
;;;4821   	{
;;;4822   	if(abs(bat[in]._Ib)>IKB) 
002b0c  4e7b              LDR      r6,|L1.11516|
002b0e  28c8              CMP      r0,#0xc8              ;4820
002b10  dd0f              BLE      |L1.11058|
002b12  f9b40008          LDRSH    r0,[r4,#8]
002b16  f7fffffe          BL       abs
002b1a  f9b61000          LDRSH    r1,[r6,#0]  ; IKB
002b1e  4288              CMP      r0,r1
002b20  dd07              BLE      |L1.11058|
;;;4823   		{
;;;4824   		if((bat[in]._av&1))avar_bat_hndl(in,0);
002b22  f894003d          LDRB     r0,[r4,#0x3d]
002b26  07c0              LSLS     r0,r0,#31
002b28  d003              BEQ      |L1.11058|
002b2a  2100              MOVS     r1,#0
002b2c  4628              MOV      r0,r5
002b2e  f7fffffe          BL       avar_bat_hndl
                  |L1.11058|
;;;4825   		}
;;;4826   	}
;;;4827   
;;;4828   
;;;4829   
;;;4830   if(bat[in]._Ib>(-IKB))
002b32  4872              LDR      r0,|L1.11516|
002b34  f9b41008          LDRSH    r1,[r4,#8]
002b38  f9b00000          LDRSH    r0,[r0,#0]  ; IKB
002b3c  4240              RSBS     r0,r0,#0
002b3e  4281              CMP      r1,r0
002b40  dd14              BLE      |L1.11116|
;;;4831   	{
;;;4832   	if(bat[in]._cnt_wrk<10)
002b42  7b60              LDRB     r0,[r4,#0xd]
002b44  280a              CMP      r0,#0xa
002b46  d20d              BCS      |L1.11108|
;;;4833   		{
;;;4834   		bat[in]._cnt_wrk++;
002b48  f1000001          ADD      r0,r0,#1
002b4c  b2c0              UXTB     r0,r0
002b4e  7360              STRB     r0,[r4,#0xd]
;;;4835   		if((bat[in]._cnt_wrk>=10)&&(bat[in]._wrk)) 
002b50  280a              CMP      r0,#0xa
002b52  d371              BCC      |L1.11320|
002b54  7ba0              LDRB     r0,[r4,#0xe]
002b56  2800              CMP      r0,#0
002b58  d06e              BEQ      |L1.11320|
;;;4836   			{
;;;4837   			bat[in]._wrk=0;
002b5a  73a7              STRB     r7,[r4,#0xe]
;;;4838   			//beep_init(0x7L,'O');
;;;4839   			//wrk_mem_hndl(0);
;;;4840   			wrk_mem_hndl(in);
002b5c  4628              MOV      r0,r5
002b5e  f7fffffe          BL       wrk_mem_hndl
002b62  e069              B        |L1.11320|
                  |L1.11108|
;;;4841   			//plazma++;
;;;4842   			}
;;;4843   		}
;;;4844   	else bat[in]._cnt_wrk=10;	
002b64  f04f000a          MOV      r0,#0xa
002b68  7360              STRB     r0,[r4,#0xd]
002b6a  e065              B        |L1.11320|
                  |L1.11116|
;;;4845   	}	
;;;4846   
;;;4847   else if(bat[in]._Ib<(-IKB))
002b6c  da64              BGE      |L1.11320|
;;;4848   	{
;;;4849   	if(bat[in]._cnt_wrk)
002b6e  7b60              LDRB     r0,[r4,#0xd]
002b70  b3f0              CBZ      r0,|L1.11248|
;;;4850   		{
;;;4851   		bat[in]._cnt_wrk--;
002b72  f1a00001          SUB      r0,r0,#1
002b76  b2c0              UXTB     r0,r0
002b78  7360              STRB     r0,[r4,#0xd]
;;;4852   		if((bat[in]._cnt_wrk==0)&&(bat[in]._wrk==0)) 
002b7a  bbc8              CBNZ     r0,|L1.11248|
002b7c  7ba0              LDRB     r0,[r4,#0xe]
002b7e  bbb8              CBNZ     r0,|L1.11248|
;;;4853   			{
;;;4854   			bat[in]._wrk=1;
002b80  f04f0001          MOV      r0,#1
002b84  73a0              STRB     r0,[r4,#0xe]
;;;4855   
;;;4856   				{
;;;4857   				char temp;
;;;4858   				signed short temp_temp;
;;;4859   				temp_temp=bat[in]._u_old[((bat_u_old_cnt+1)&0x07)];
002b86  485e              LDR      r0,|L1.11520|
002b88  8800              LDRH     r0,[r0,#0]  ; bat_u_old_cnt
002b8a  f1000001          ADD      r0,r0,#1
002b8e  f0000007          AND      r0,r0,#7
002b92  eb040040          ADD      r0,r4,r0,LSL #1
002b96  8c00              LDRH     r0,[r0,#0x20]
002b98  9000              STR      r0,[sp,#0]
;;;4860   			 
;;;4861   				temp=LPC_RTC->YEAR;
002b9a  4e5a              LDR      r6,|L1.11524|
002b9c  8bb0              LDRH     r0,[r6,#0x1c]
002b9e  9001              STR      r0,[sp,#4]
;;;4862   				gran_char((signed char*)&temp,1,99);
002ba0  f04f0263          MOV      r2,#0x63
002ba4  f04f0101          MOV      r1,#1
002ba8  a801              ADD      r0,sp,#4
002baa  f7fffffe          BL       gran_char
;;;4863   				*((char*)(&(bat[in]._wrk_date[0])))=temp;
002bae  f104041c          ADD      r4,r4,#0x1c
002bb2  f89d0004          LDRB     r0,[sp,#4]
002bb6  7620              STRB     r0,[r4,#0x18]
;;;4864   			
;;;4865   				temp=LPC_RTC->MONTH;
002bb8  7e30              LDRB     r0,[r6,#0x18]
002bba  9001              STR      r0,[sp,#4]
;;;4866   				gran_char((signed char*)&temp,1,12);
002bbc  f04f020c          MOV      r2,#0xc
002bc0  f04f0101          MOV      r1,#1
002bc4  a801              ADD      r0,sp,#4
002bc6  f7fffffe          BL       gran_char
;;;4867   				*(((char*)(&(bat[in]._wrk_date[0])))+1)=temp;
002bca  f89d0004          LDRB     r0,[sp,#4]
002bce  7660              STRB     r0,[r4,#0x19]
;;;4868   			
;;;4869   				temp=LPC_RTC->DOM;
002bd0  7b30              LDRB     r0,[r6,#0xc]
002bd2  9001              STR      r0,[sp,#4]
;;;4870   				gran_char((signed char*)&temp,1,31);
002bd4  221f              MOVS     r2,#0x1f
002bd6  2101              MOVS     r1,#1
002bd8  a801              ADD      r0,sp,#4
002bda  f7fffffe          BL       gran_char
;;;4871   				*(((char*)(&(bat[in]._wrk_date[0])))+2)=temp;			
002bde  f89d0004          LDRB     r0,[sp,#4]
002be2  76a0              STRB     r0,[r4,#0x1a]
;;;4872   				
;;;4873   				*(((char*)(&(bat[in]._wrk_date[0])))+3)=*((char*)&temp_temp);
002be4  f89d0000          LDRB     r0,[sp,#0]
002be8  76e0              STRB     r0,[r4,#0x1b]
;;;4874   
;;;4875   				temp=LPC_RTC->HOUR;
002bea  7a30              LDRB     r0,[r6,#8]
002bec  9001              STR      r0,[sp,#4]
;;;4876   				gran_char((signed char*)&temp,0,23);
002bee  e000              B        |L1.11250|
                  |L1.11248|
002bf0  e022              B        |L1.11320|
                  |L1.11250|
002bf2  2217              MOVS     r2,#0x17
002bf4  2100              MOVS     r1,#0
002bf6  a801              ADD      r0,sp,#4
002bf8  f7fffffe          BL       gran_char
;;;4877   				*((char*)(&(bat[in]._wrk_date[1])))=temp;
002bfc  f89d0004          LDRB     r0,[sp,#4]
002c00  7720              STRB     r0,[r4,#0x1c]
;;;4878                  	
;;;4879   				temp=LPC_RTC->MIN;
002c02  7930              LDRB     r0,[r6,#4]
002c04  9001              STR      r0,[sp,#4]
;;;4880   				gran_char((signed char*)&temp,0,59);
002c06  223b              MOVS     r2,#0x3b
002c08  2100              MOVS     r1,#0
002c0a  a801              ADD      r0,sp,#4
002c0c  f7fffffe          BL       gran_char
;;;4881   				*(((char*)(&(bat[in]._wrk_date[1])))+1)=temp;
002c10  f89d0004          LDRB     r0,[sp,#4]
002c14  7760              STRB     r0,[r4,#0x1d]
;;;4882   	          
;;;4883   				temp=LPC_RTC->SEC;
002c16  7830              LDRB     r0,[r6,#0]
002c18  9001              STR      r0,[sp,#4]
;;;4884   				gran_char((signed char*)&temp,0,59);
002c1a  223b              MOVS     r2,#0x3b
002c1c  2100              MOVS     r1,#0
002c1e  a801              ADD      r0,sp,#4
002c20  f7fffffe          BL       gran_char
;;;4885   				*(((char*)(&(bat[in]._wrk_date[1])))+2)=temp;
002c24  f89d0004          LDRB     r0,[sp,#4]
002c28  77a0              STRB     r0,[r4,#0x1e]
;;;4886   			
;;;4887   				*(((char*)(&(bat[in]._wrk_date[1])))+3)=*(((char*)&temp_temp)+1);
002c2a  f89d0001          LDRB     r0,[sp,#1]
002c2e  77e0              STRB     r0,[r4,#0x1f]
;;;4888   				bat[in]._Iintegr=0;		//  
002c30  8027              STRH     r7,[r4,#0]
;;;4889   				bat[in]._Iintegr_=0;	//  
002c32  8067              STRH     r7,[r4,#2]
002c34  f1a4041c          SUB      r4,r4,#0x1c
                  |L1.11320|
;;;4890   				}
;;;4891   	
;;;4892   			}
;;;4893   
;;;4894   		}
;;;4895   	else bat[in]._cnt_wrk=0;	 
;;;4896   	
;;;4897   	}					
;;;4898   
;;;4899   /*
;;;4900   if(Ibat>=(-IKB))
;;;4901   	{
;;;4902   	if(cnt_wrk<10)
;;;4903   		{
;;;4904   		cnt_wrk++;
;;;4905   		if((cnt_wrk>=10)&&(wrk!=wrkOFF)) 
;;;4906   			{
;;;4907   			wrk=wrkOFF;
;;;4908   			//beep_init(0x7L,'O');
;;;4909   			wrk_mem_hndl(ibat_integr);
;;;4910   			}
;;;4911   		}
;;;4912   	else cnt_wrk=10;	
;;;4913   	}	
;;;4914   
;;;4915   else if((Ibat<(-IKB))&&(spc_stat!=spc_KE))
;;;4916   	{
;;;4917   	if(cnt_wrk)
;;;4918   		{
;;;4919   		cnt_wrk--;
;;;4920   		if((cnt_wrk==0)&&(wrk!=wrkON)) 
;;;4921   			{
;;;4922   			char temp;
;;;4923   			signed short temp_temp;
;;;4924   			temp_temp=ubat_old[((ubat_old_cnt+1)&0x07)];
;;;4925   			 
;;;4926   			wrk=wrkON;
;;;4927   			
;;;4928   			temp=_year;
;;;4929   			gran_char(&temp,1,99);
;;;4930   			*((char*)(&(wrk_date[0])))=temp;
;;;4931   			
;;;4932   			temp=_month;
;;;4933   			gran_char(&temp,1,12);
;;;4934   			*(((char*)(&(wrk_date[0])))+1)=temp;
;;;4935   			
;;;4936   			temp=_date;
;;;4937   			gran_char(&temp,1,31);
;;;4938   			*(((char*)(&(wrk_date[0])))+2)=temp;			
;;;4939   				
;;;4940   			*(((char*)(&(wrk_date[0])))+3)=*((char*)&temp_temp);
;;;4941   
;;;4942   			temp=_hour;
;;;4943   			gran_char(&temp,0,23);
;;;4944   			*((char*)(&(wrk_date[1])))=temp;
;;;4945                  
;;;4946   			temp=_min;
;;;4947   			gran_char(&temp,0,59);
;;;4948   			*(((char*)(&(wrk_date[1])))+1)=temp;
;;;4949   	          
;;;4950   			temp=_sec;
;;;4951   			gran_char(&temp,0,59);
;;;4952   			*(((char*)(&(wrk_date[1])))+2)=temp;
;;;4953   			
;;;4954   			*(((char*)(&(wrk_date[1])))+3)=*(((char*)&temp_temp)+1);
;;;4955   
;;;4956   			
;;;4957   			//beep_init(0xFL,'O'); 
;;;4958   			ibat_integr=0;
;;;4959   			ibat_integr_=0;
;;;4960   			}
;;;4961   		}
;;;4962   	else cnt_wrk=0;	 
;;;4963   	
;;;4964   	}
;;;4965   if(wrk==wrkON)
;;;4966   	{
;;;4967   	ibat_integr_+=-Ibat;
;;;4968   	if(ibat_integr_>=SEC_IN_HOUR*10L)
;;;4969   		{
;;;4970   		ibat_integr_-=SEC_IN_HOUR*10L;
;;;4971   		ibat_integr++;
;;;4972   		}
;;;4973   	}
;;;4974   
;;;4975   */
;;;4976   
;;;4977   
;;;4978   /*if(bat[in]._cnt_to_block)
;;;4979   	{
;;;4980   	bat[in]._cnt_to_block--;
;;;4981   	if(!(bat[in]._cnt_to_block))
;;;4982   		{
;;;4983   		//bat[in]._rel_stat=1;
;;;4984   		}
;;;4985   	}
;;;4986   */
;;;4987   
;;;4988   
;;;4989   
;;;4990   
;;;4991   //unsigned int tempUI,tempUI_;
;;;4992   //unsigned int b_zar; 
;;;4993   //char i;
;;;4994   //Ibat[0]=5000;                     
;;;4995   
;;;4996   
;;;4997                               
;;;4998   if(bat[in]._time_cnt==0)
;;;4999   	{
;;;5000   	bat[in]._zar_cnt+=(signed long)bat[in]._Ib;
;;;5001   	
;;;5002   	if(bat[in]._zar_cnt>=AH_CONSTANT)
002c38  f64848a0          MOV      r8,#0x8ca0
002c3c  f894003e          LDRB     r0,[r4,#0x3e]         ;4998
002c40  2800              CMP      r0,#0                 ;4998
002c42  d12c              BNE      |L1.11422|
002c44  f9b41008          LDRSH    r1,[r4,#8]            ;5000
002c48  6960              LDR      r0,[r4,#0x14]         ;5000
002c4a  4408              ADD      r0,r0,r1              ;5000
002c4c  6160              STR      r0,[r4,#0x14]         ;5000
;;;5003   		{
;;;5004   		if(BAT_C_REAL[in]==0x5555) tempUS_=BAT_C_NOM[in];
;;;5005   		else tempUS_=BAT_C_REAL[in];
;;;5006   		
;;;5007   		b_zar=lc640_read_int(ADR_EE_BAT_ZAR_CNT[in]);
002c4e  f8df90b8          LDR      r9,|L1.11528|
002c52  f8dfa0b8          LDR      r10,|L1.11532|
002c56  4540              CMP      r0,r8                 ;5002
002c58  db65              BLT      |L1.11558|
002c5a  f93a1015          LDRSH    r1,[r10,r5,LSL #1]    ;5004
002c5e  f5a140aa          SUB      r0,r1,#0x5500         ;5004
002c62  3855              SUBS     r0,r0,#0x55           ;5004
002c64  d103              BNE      |L1.11374|
002c66  482a              LDR      r0,|L1.11536|
002c68  f8306015          LDRH     r6,[r0,r5,LSL #1]     ;5004
002c6c  e001              B        |L1.11378|
                  |L1.11374|
002c6e  f83a6015          LDRH     r6,[r10,r5,LSL #1]    ;5005
                  |L1.11378|
002c72  f8390015          LDRH     r0,[r9,r5,LSL #1]
002c76  f7fffffe          BL       lc640_read_int
002c7a  b280              UXTH     r0,r0
;;;5008   
;;;5009   		if(b_zar<(tempUS_/**10*/))
002c7c  42b0              CMP      r0,r6
002c7e  d249              BCS      |L1.11540|
;;;5010   			{
;;;5011   			bat[in]._zar_cnt-=AH_CONSTANT;
002c80  6961              LDR      r1,[r4,#0x14]
002c82  f5a14100          SUB      r1,r1,#0x8000
002c86  f5a1614a          SUB      r1,r1,#0xca0
002c8a  6161              STR      r1,[r4,#0x14]
;;;5012   
;;;5013   			lc640_write_int(ADR_EE_BAT_ZAR_CNT[in],b_zar+1);
002c8c  f9392015          LDRSH    r2,[r9,r5,LSL #1]
002c90  f1000001          ADD      r0,r0,#1
002c94  b201              SXTH     r1,r0
002c96  4610              MOV      r0,r2
002c98  f7fffffe          BL       lc640_write_int
002c9c  e06e              B        |L1.11644|
                  |L1.11422|
002c9e  e09a              B        |L1.11734|
                  |L1.11424|
                          DCD      t_box
                  |L1.11428|
                          DCD      TBOXMAX
                  |L1.11432|
                          DCD      av_tbox_cnt
                  |L1.11436|
                          DCD      av_tbox_stat
                  |L1.11440|
                          DCD      TBOXREG
                  |L1.11444|
                          DCD      t_box_cnt
                  |L1.11448|
                          DCD      main_vent_pos
                  |L1.11452|
                          DCD      TBOXVENTMAX
                  |L1.11456|
                          DCD      pos_vent
                  |L1.11460|
                          DCD      mess_data
                  |L1.11464|
                          DCD      mixer_vent_stat
                  |L1.11468|
                          DCD      TBATDISABLE
                  |L1.11472|
                          DCD      tbatdisable_stat
                  |L1.11476|
                          DCD      tbatdisable_cnt
                  |L1.11480|
                          DCD      TBATENABLE
                  |L1.11484|
                          DCD      TLOADDISABLE
                  |L1.11488|
                          DCD      tloaddisable_stat
                  |L1.11492|
                          DCD      tloaddisable_cnt
                  |L1.11496|
                          DCD      TLOADENABLE
                  |L1.11500|
                          DCD      ||area_number.21||+0x80
                  |L1.11504|
                          DCD      bat
                  |L1.11508|
                          DCD      IZMAX
                  |L1.11512|
                          DCD      main_10Hz_cnt
                  |L1.11516|
                          DCD      IKB
                  |L1.11520|
                          DCD      bat_u_old_cnt
                  |L1.11524|
                          DCD      0x40024020
                  |L1.11528|
                          DCD      ADR_EE_BAT_ZAR_CNT
                  |L1.11532|
                          DCD      BAT_C_REAL
                  |L1.11536|
                          DCD      BAT_C_NOM
                  |L1.11540|
;;;5014   			}
;;;5015   		else if(b_zar>(tempUS_/**10*/))  
002d14  d932              BLS      |L1.11644|
;;;5016   			{
;;;5017   			lc640_write_int(ADR_EE_BAT_ZAR_CNT[in],tempUS_);
002d16  f9390015          LDRSH    r0,[r9,r5,LSL #1]
002d1a  b231              SXTH     r1,r6
002d1c  f7fffffe          BL       lc640_write_int
;;;5018   			bat[in]._zar_cnt=AH_CONSTANT;
002d20  f8c48014          STR      r8,[r4,#0x14]
002d24  e02a              B        |L1.11644|
                  |L1.11558|
;;;5019   
;;;5020   			}
;;;5021   
;;;5022   		}
;;;5023   
;;;5024   	else if(bat[in]._zar_cnt<=-AH_CONSTANT)
002d26  49f9              LDR      r1,|L1.12556|
002d28  4288              CMP      r0,r1
002d2a  dc27              BGT      |L1.11644|
;;;5025   		{
;;;5026   		if(BAT_C_REAL[in]==0x5555) tempUS_=BAT_C_NOM[in];
002d2c  f93a1015          LDRSH    r1,[r10,r5,LSL #1]
002d30  f5a140aa          SUB      r0,r1,#0x5500
002d34  3855              SUBS     r0,r0,#0x55
002d36  d103              BNE      |L1.11584|
002d38  48f5              LDR      r0,|L1.12560|
002d3a  f8306015          LDRH     r6,[r0,r5,LSL #1]
002d3e  e001              B        |L1.11588|
                  |L1.11584|
;;;5027   		else tempUS_=BAT_C_REAL[in];
002d40  f83a6015          LDRH     r6,[r10,r5,LSL #1]
                  |L1.11588|
;;;5028   		
;;;5029   		b_zar=lc640_read_int(ADR_EE_BAT_ZAR_CNT[in]);
002d44  f8390015          LDRH     r0,[r9,r5,LSL #1]
002d48  f7fffffe          BL       lc640_read_int
002d4c  b280              UXTH     r0,r0
;;;5030   
;;;5031   		if(b_zar>tempUS_)
002d4e  42b0              CMP      r0,r6
002d50  d905              BLS      |L1.11614|
;;;5032   			{
;;;5033   			lc640_write_int(ADR_EE_BAT_ZAR_CNT[in],tempUS_);
002d52  f9390015          LDRSH    r0,[r9,r5,LSL #1]
002d56  b231              SXTH     r1,r6
002d58  f7fffffe          BL       lc640_write_int
;;;5034   			b_zar=tempUS_;
002d5c  4630              MOV      r0,r6
                  |L1.11614|
;;;5035   			}
;;;5036   		if(b_zar)
002d5e  b158              CBZ      r0,|L1.11640|
;;;5037   			{
;;;5038   			bat[in]._zar_cnt+=AH_CONSTANT;
002d60  6961              LDR      r1,[r4,#0x14]
002d62  4441              ADD      r1,r1,r8
002d64  6161              STR      r1,[r4,#0x14]
;;;5039   
;;;5040   			lc640_write_int(ADR_EE_BAT_ZAR_CNT[in],b_zar-1);
002d66  f9392015          LDRSH    r2,[r9,r5,LSL #1]
002d6a  f1a00001          SUB      r0,r0,#1
002d6e  b201              SXTH     r1,r0
002d70  4610              MOV      r0,r2
002d72  f7fffffe          BL       lc640_write_int
002d76  e001              B        |L1.11644|
                  |L1.11640|
;;;5041   			}
;;;5042   		else 
;;;5043   			{
;;;5044   			bat[in]._zar_cnt=-AH_CONSTANT;
002d78  48e4              LDR      r0,|L1.12556|
002d7a  6160              STR      r0,[r4,#0x14]
                  |L1.11644|
;;;5045   			}
;;;5046   
;;;5047   		}
;;;5048   
;;;5049   			
;;;5050   	tempUL=(unsigned long)lc640_read_int(ADR_EE_BAT_ZAR_CNT[in]);
002d7c  f8390015          LDRH     r0,[r9,r5,LSL #1]
002d80  f7fffffe          BL       lc640_read_int
002d84  4601              MOV      r1,r0
;;;5051   	
;;;5052   	if(BAT_C_REAL[in]==0x5555) tempUL_=(unsigned long)BAT_C_NOM[in];
002d86  f93a0015          LDRSH    r0,[r10,r5,LSL #1]
002d8a  f5a042aa          SUB      r2,r0,#0x5500
002d8e  3a55              SUBS     r2,r2,#0x55
002d90  d102              BNE      |L1.11672|
002d92  48df              LDR      r0,|L1.12560|
002d94  f9300015          LDRSH    r0,[r0,r5,LSL #1]
                  |L1.11672|
;;;5053   	else tempUL_=(unsigned long)BAT_C_REAL[in];
;;;5054   		           	
;;;5055   	tempUL*=1000L;
002d98  f44f727a          MOV      r2,#0x3e8
002d9c  fb01f102          MUL      r1,r1,r2
;;;5056   
;;;5057   
;;;5058   	if(tempUL_==0) tempUL=0;
002da0  b158              CBZ      r0,|L1.11706|
;;;5059   	else tempUL/=tempUL_;
002da2  fbb1f0f0          UDIV     r0,r1,r0
                  |L1.11686|
;;;5060   
;;;5061   	tempUL/=10L;
002da6  f04f010a          MOV      r1,#0xa
002daa  fbb0f0f1          UDIV     r0,r0,r1
;;;5062   
;;;5063   	bat[in]._zar=(unsigned short)tempUL;
002dae  8220              STRH     r0,[r4,#0x10]
;;;5064   
;;;5065   	if(BAT_TYPE==1)
002db0  48d8              LDR      r0,|L1.12564|
002db2  8800              LDRH     r0,[r0,#0]  ; BAT_TYPE
002db4  2801              CMP      r0,#1
002db6  d003              BEQ      |L1.11712|
002db8  e007              B        |L1.11722|
                  |L1.11706|
002dba  f04f0000          MOV      r0,#0                 ;5058
002dbe  e7f2              B        |L1.11686|
                  |L1.11712|
;;;5066   		{
;;;5067   		bat[in]._zar=lakb[in]._s_o_c;
002dc0  48d5              LDR      r0,|L1.12568|
002dc2  eb001085          ADD      r0,r0,r5,LSL #6
002dc6  8a40              LDRH     r0,[r0,#0x12]
002dc8  8220              STRH     r0,[r4,#0x10]
                  |L1.11722|
;;;5068   		}
;;;5069   	
;;;5070   	gran((signed short*)&bat[in]._zar,0,100);
002dca  f1040010          ADD      r0,r4,#0x10
002dce  2264              MOVS     r2,#0x64
002dd0  2100              MOVS     r1,#0
002dd2  f7fffffe          BL       gran
                  |L1.11734|
;;;5071        }
;;;5072   
;;;5073   
;;;5074   //         
;;;5075   if(bat[in]._wrk==1)
002dd6  7ba0              LDRB     r0,[r4,#0xe]
002dd8  2801              CMP      r0,#1
002dda  d113              BNE      |L1.11780|
;;;5076   	{
;;;5077   	if(bat[in]._Iintegr<36000)
002ddc  8ba0              LDRH     r0,[r4,#0x1c]
002dde  4540              CMP      r0,r8
002de0  d20f              BCS      |L1.11778|
;;;5078   		{          
;;;5079   		bat[in]._Iintegr+=abs(bat[in]._Ib);
002de2  f9b40008          LDRSH    r0,[r4,#8]
002de6  f7fffffe          BL       abs
002dea  8ba1              LDRH     r1,[r4,#0x1c]
002dec  4408              ADD      r0,r0,r1
002dee  b280              UXTH     r0,r0
002df0  83a0              STRH     r0,[r4,#0x1c]
;;;5080   		if(bat[in]._Iintegr>=36000)
002df2  4540              CMP      r0,r8
002df4  d306              BCC      |L1.11780|
;;;5081   			{
;;;5082   			bat[in]._Iintegr=0;		//  
002df6  83a7              STRH     r7,[r4,#0x1c]
;;;5083   			bat[in]._Iintegr_++;	//  
002df8  8be0              LDRH     r0,[r4,#0x1e]
002dfa  f1000001          ADD      r0,r0,#1
002dfe  83e0              STRH     r0,[r4,#0x1e]
002e00  e000              B        |L1.11780|
                  |L1.11778|
;;;5084   			}
;;;5085   		}
;;;5086   	else 
;;;5087   		{
;;;5088   		bat[in]._Iintegr=0;
002e02  83a7              STRH     r7,[r4,#0x1c]
                  |L1.11780|
;;;5089   		}	
;;;5090   	} 
;;;5091   	    
;;;5092   //
;;;5093   if((bat[in]._Tb>TBATSIGN)&&(!bat[in]._nd))	
002e04  49c5              LDR      r1,|L1.12572|
002e06  f9b4000a          LDRSH    r0,[r4,#0xa]
002e0a  f9b11000          LDRSH    r1,[r1,#0]  ; TBATSIGN
002e0e  4288              CMP      r0,r1
002e10  dd01              BLE      |L1.11798|
002e12  7b20              LDRB     r0,[r4,#0xc]
002e14  b3e8              CBZ      r0,|L1.11922|
                  |L1.11798|
;;;5094   	{
;;;5095   	bat[in]._sign_temper_cnt++;
;;;5096   	}
;;;5097   else 
;;;5098   	{
;;;5099   	bat[in]._sign_temper_cnt--;
002e16  f8b40040          LDRH     r0,[r4,#0x40]
002e1a  f1a00001          SUB      r0,r0,#1
002e1e  f8a40040          STRH     r0,[r4,#0x40]
                  |L1.11810|
;;;5100   	}
;;;5101   
;;;5102   gran(&bat[in]._sign_temper_cnt,0,600);
002e22  f44f7916          MOV      r9,#0x258
002e26  f1040040          ADD      r0,r4,#0x40
002e2a  464a              MOV      r2,r9
002e2c  2100              MOVS     r1,#0
002e2e  f7fffffe          BL       gran
;;;5103   if(bat[in]._sign_temper_cnt>=590)	bat[in]._temper_stat|=(1<<0);
002e32  f9b40040          LDRSH    r0,[r4,#0x40]
002e36  f240264e          MOV      r6,#0x24e
002e3a  42b0              CMP      r0,r6
002e3c  db05              BLT      |L1.11850|
002e3e  f894103f          LDRB     r1,[r4,#0x3f]
002e42  f0410101          ORR      r1,r1,#1
002e46  f884103f          STRB     r1,[r4,#0x3f]
                  |L1.11850|
;;;5104   if(bat[in]._sign_temper_cnt<=10)	bat[in]._temper_stat&=~(1<<0);
002e4a  280a              CMP      r0,#0xa
002e4c  dc05              BGT      |L1.11866|
002e4e  f894003f          LDRB     r0,[r4,#0x3f]
002e52  f0200001          BIC      r0,r0,#1
002e56  f884003f          STRB     r0,[r4,#0x3f]
                  |L1.11866|
;;;5105   
;;;5106   
;;;5107   if((bat[in]._Tb>TBATMAX)&&(!bat[in]._nd))	
002e5a  49b1              LDR      r1,|L1.12576|
002e5c  f9b4000a          LDRSH    r0,[r4,#0xa]
002e60  f9b11000          LDRSH    r1,[r1,#0]  ; TBATMAX
002e64  4288              CMP      r0,r1
002e66  dd01              BLE      |L1.11884|
002e68  7b20              LDRB     r0,[r4,#0xc]
002e6a  b3a0              CBZ      r0,|L1.11990|
                  |L1.11884|
;;;5108   	{
;;;5109   	bat[in]._max_temper_cnt++;
;;;5110   	}
;;;5111   else 
;;;5112   	{
;;;5113   	bat[in]._max_temper_cnt--;
002e6c  f8b40042          LDRH     r0,[r4,#0x42]
002e70  f1a00001          SUB      r0,r0,#1
002e74  f8a40042          STRH     r0,[r4,#0x42]
                  |L1.11896|
;;;5114   	}
;;;5115   
;;;5116   gran(&bat[in]._max_temper_cnt,0,600);
002e78  f1040042          ADD      r0,r4,#0x42
002e7c  464a              MOV      r2,r9
002e7e  2100              MOVS     r1,#0
002e80  f7fffffe          BL       gran
;;;5117   if(bat[in]._max_temper_cnt>=590)	bat[in]._temper_stat|=(1<<1);
002e84  f9b40042          LDRSH    r0,[r4,#0x42]
002e88  42b0              CMP      r0,r6
002e8a  db07              BLT      |L1.11932|
002e8c  f894103f          LDRB     r1,[r4,#0x3f]
002e90  e000              B        |L1.11924|
                  |L1.11922|
002e92  e021              B        |L1.11992|
                  |L1.11924|
002e94  f0410102          ORR      r1,r1,#2
002e98  f884103f          STRB     r1,[r4,#0x3f]
                  |L1.11932|
;;;5118   if(bat[in]._max_temper_cnt<=10)	bat[in]._temper_stat&=~(1<<1);
002e9c  280a              CMP      r0,#0xa
002e9e  dc05              BGT      |L1.11948|
002ea0  f894003f          LDRB     r0,[r4,#0x3f]
002ea4  f0200002          BIC      r0,r0,#2
002ea8  f884003f          STRB     r0,[r4,#0x3f]
                  |L1.11948|
;;;5119   
;;;5120   
;;;5121   
;;;5122   //  
;;;5123   if(bat[in]._resurs_cnt<36000)
002eac  6c60              LDR      r0,[r4,#0x44]
002eae  4540              CMP      r0,r8
002eb0  da20              BGE      |L1.12020|
;;;5124   	{               
;;;5125   	bat[in]._resurs_cnt++;
002eb2  f1000001          ADD      r0,r0,#1
002eb6  6460              STR      r0,[r4,#0x44]
;;;5126   	if(bat[in]._resurs_cnt>=36000)
002eb8  4540              CMP      r0,r8
002eba  db1c              BLT      |L1.12022|
;;;5127   		{
;;;5128   		bat[in]._resurs_cnt=0;
002ebc  6467              STR      r7,[r4,#0x44]
;;;5129   		lc640_write_int(ADR_EE_BAT_RESURS[in],lc640_read_int(ADR_EE_BAT_RESURS[in])+1);
002ebe  4e99              LDR      r6,|L1.12580|
002ec0  f8360015          LDRH     r0,[r6,r5,LSL #1]
002ec4  f7fffffe          BL       lc640_read_int
002ec8  1c40              ADDS     r0,r0,#1
002eca  b201              SXTH     r1,r0
002ecc  f9360015          LDRSH    r0,[r6,r5,LSL #1]
002ed0  f7fffffe          BL       lc640_write_int
002ed4  e00f              B        |L1.12022|
                  |L1.11990|
002ed6  e006              B        |L1.12006|
                  |L1.11992|
002ed8  f8b40040          LDRH     r0,[r4,#0x40]         ;5095
002edc  f1000001          ADD      r0,r0,#1              ;5095
002ee0  f8a40040          STRH     r0,[r4,#0x40]         ;5095
002ee4  e79d              B        |L1.11810|
                  |L1.12006|
002ee6  f8b40042          LDRH     r0,[r4,#0x42]         ;5109
002eea  f1000001          ADD      r0,r0,#1              ;5109
002eee  f8a40042          STRH     r0,[r4,#0x42]         ;5109
002ef2  e7c1              B        |L1.11896|
                  |L1.12020|
;;;5130   		}
;;;5131   	}
;;;5132   else bat[in]._resurs_cnt=0;
002ef4  6467              STR      r7,[r4,#0x44]
                  |L1.12022|
;;;5133   
;;;5134   
;;;5135   #ifndef UKU_220_V2
;;;5136   #ifndef UKU_GLONASS
;;;5137   #ifndef UKU_6U
;;;5138   //#ifndef UKU_220
;;;5139   if(UBM_AV)
002ef6  4e8c              LDR      r6,|L1.12584|
002ef8  8830              LDRH     r0,[r6,#0]  ; UBM_AV
002efa  2800              CMP      r0,#0
002efc  d05e              BEQ      |L1.12220|
;;;5140        {
;;;5141        signed short temp_SS;
;;;5142   #ifdef UKU_220
;;;5143   temp_SS=bat[in]._Ub/2;
;;;5144   #else
;;;5145        if(U0B<600)
002efe  488b              LDR      r0,|L1.12588|
002f00  f9b00000          LDRSH    r0,[r0,#0]  ; U0B
002f04  4548              CMP      r0,r9
002f06  da08              BGE      |L1.12058|
;;;5146             {
;;;5147             temp_SS=bat[in]._Ub/4;
002f08  f9b40002          LDRSH    r0,[r4,#2]
002f0c  ea4f71e0          ASR      r1,r0,#31
002f10  eb007091          ADD      r0,r0,r1,LSR #30
002f14  ea4f00a0          ASR      r0,r0,#2
002f18  e006              B        |L1.12072|
                  |L1.12058|
;;;5148             }
;;;5149        else temp_SS=bat[in]._Ub/5;
002f1a  f9b40002          LDRSH    r0,[r4,#2]
002f1e  f04f0105          MOV      r1,#5
002f22  fb90f0f1          SDIV     r0,r0,r1
002f26  b200              SXTH     r0,r0
                  |L1.12072|
;;;5150   	
;;;5151   	temp_SS+=temp_SS;     
002f28  ea4f0040          LSL      r0,r0,#1
;;;5152   #endif
;;;5153        temp_SS-=(bat[in]._Ubm);
002f2c  88a1              LDRH     r1,[r4,#4]
002f2e  eba00001          SUB      r0,r0,r1
002f32  b200              SXTH     r0,r0
;;;5154   
;;;5155        temp_SS=abs(temp_SS);
002f34  f7fffffe          BL       abs
;;;5156   
;;;5157        temp_SS*=10;
002f38  eb000080          ADD      r0,r0,r0,LSL #2
002f3c  ea4f0040          LSL      r0,r0,#1
002f40  b200              SXTH     r0,r0
;;;5158   
;;;5159        temp_SS/=12;
002f42  f04f010c          MOV      r1,#0xc
002f46  fb90f0f1          SDIV     r0,r0,r1
002f4a  b200              SXTH     r0,r0
;;;5160   
;;;5161        bat[in]._dUbm=temp_SS;
002f4c  80e0              STRH     r0,[r4,#6]
;;;5162   
;;;5163   
;;;5164        if(	(bat[in]._dUbm>UBM_AV) &&
002f4e  f9b61000          LDRSH    r1,[r6,#0]  ; UBM_AV
002f52  4288              CMP      r0,r1
002f54  dd34              BLE      |L1.12224|
;;;5165   		(abs(bat[in]._Ib)<(5*IKB)) &&
002f56  f9b40008          LDRSH    r0,[r4,#8]
002f5a  f7fffffe          BL       abs
002f5e  4601              MOV      r1,r0
002f60  4873              LDR      r0,|L1.12592|
002f62  f9b00000          LDRSH    r0,[r0,#0]  ; IKB
002f66  eb000080          ADD      r0,r0,r0,LSL #2
002f6a  4281              CMP      r1,r0
002f6c  da28              BGE      |L1.12224|
;;;5166   		(bat[in]._Ub>((short)(((long)USIGN*115)/100))) &&
002f6e  4871              LDR      r0,|L1.12596|
002f70  2173              MOVS     r1,#0x73
002f72  f9b00000          LDRSH    r0,[r0,#0]  ; USIGN
002f76  4348              MULS     r0,r1,r0
002f78  fb90f0fb          SDIV     r0,r0,r11
002f7c  f9b41002          LDRSH    r1,[r4,#2]
002f80  b200              SXTH     r0,r0
002f82  4288              CMP      r0,r1
002f84  da1c              BGE      |L1.12224|
;;;5167   		(!(bat[in]._av & 2))  )
002f86  f894003d          LDRB     r0,[r4,#0x3d]
002f8a  0780              LSLS     r0,r0,#30
002f8c  d418              BMI      |L1.12224|
;;;5168   		{
;;;5169   		bat[in]._cnt_as++;
002f8e  f8b40048          LDRH     r0,[r4,#0x48]
002f92  f1000001          ADD      r0,r0,#1
002f96  b200              SXTH     r0,r0
002f98  f8a40048          STRH     r0,[r4,#0x48]
;;;5170   		if(bat[in]._cnt_as==3000)
002f9c  f5a06130          SUB      r1,r0,#0xb00
002fa0  39b8              SUBS     r1,r1,#0xb8
002fa2  d103              BNE      |L1.12204|
;;;5171   			{
;;;5172   			avar_bat_as_hndl(in,1);
002fa4  2101              MOVS     r1,#1
002fa6  4628              MOV      r0,r5
002fa8  f7fffffe          BL       avar_bat_as_hndl
                  |L1.12204|
;;;5173   			}
;;;5174   		if(bat[in]._cnt_as>=3005) bat[in]._cnt_as=3005;
002fac  f9b41048          LDRSH    r1,[r4,#0x48]
002fb0  f64030bd          MOV      r0,#0xbbd
002fb4  4281              CMP      r1,r0
002fb6  db01              BLT      |L1.12220|
002fb8  f8a40048          STRH     r0,[r4,#0x48]
                  |L1.12220|
;;;5175   		}
;;;5176   	else 
;;;5177   		{
;;;5178   		bat[in]._cnt_as=0;
;;;5179   		}
;;;5180        
;;;5181        }
;;;5182   #endif 
;;;5183   #endif 
;;;5184   #endif
;;;5185   
;;;5186   }
002fbc  e8bd9ffc          POP      {r2-r12,pc}
                  |L1.12224|
002fc0  f8a47048          STRH     r7,[r4,#0x48]         ;5178
002fc4  e7fa              B        |L1.12220|
;;;5187   
                          ENDP

                  u_necc_hndl PROC
;;;5194   //-----------------------------------------------
;;;5195   void u_necc_hndl(void)
002fc6  b538              PUSH     {r3-r5,lr}
;;;5196   {
;;;5197   signed long temp_L;
;;;5198   signed long temp_SL;
;;;5199   //signed short temp_SS;
;;;5200   signed short t[2];
;;;5201   char i;
;;;5202   
;;;5203   //temp_SS=0;
;;;5204   
;;;5205   #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;5206   
;;;5207   if(!TERMOKOMPENS)
002fc8  485b              LDR      r0,|L1.12600|
;;;5208   	{
;;;5209   	//u_necc=U0B;
;;;5210   	u_necc=UB20;
002fca  4c5d              LDR      r4,|L1.12608|
002fcc  8801              LDRH     r1,[r0,#0]            ;5207  ; TERMOKOMPENS
002fce  485b              LDR      r0,|L1.12604|
002fd0  f9b02000          LDRSH    r2,[r0,#0]
002fd4  b139              CBZ      r1,|L1.12262|
;;;5211   	}
;;;5212   else
;;;5213   	{
;;;5214   	if(ND_EXT[0])t[0]=20;
002fd6  485b              LDR      r0,|L1.12612|
002fd8  6800              LDR      r0,[r0,#0]  ; ND_EXT
002fda  b130              CBZ      r0,|L1.12266|
002fdc  f04f0014          MOV      r0,#0x14
002fe0  f8ad0000          STRH     r0,[sp,#0]
002fe4  e005              B        |L1.12274|
                  |L1.12262|
002fe6  8022              STRH     r2,[r4,#0]            ;5210
002fe8  e027              B        |L1.12346|
                  |L1.12266|
;;;5215   	else t[0]=t_ext[0];
002fea  4857              LDR      r0,|L1.12616|
002fec  8800              LDRH     r0,[r0,#0]  ; t_ext
002fee  f8ad0000          STRH     r0,[sp,#0]
                  |L1.12274|
;;;5216   
;;;5217   	mat_temper=t[0];
002ff2  4b56              LDR      r3,|L1.12620|
002ff4  f9bd1000          LDRSH    r1,[sp,#0]
002ff8  6019              STR      r1,[r3,#0]  ; mat_temper
;;;5218   			
;;;5219   	if(mat_temper<0)temp_SL=UB0; 
002ffa  4855              LDR      r0,|L1.12624|
002ffc  2900              CMP      r1,#0
002ffe  f9b00000          LDRSH    r0,[r0,#0]
003002  db12              BLT      |L1.12330|
;;;5220   	else 
;;;5221   		{
;;;5222   		if(mat_temper>40)mat_temper=40; 
003004  2928              CMP      r1,#0x28
003006  dd02              BLE      |L1.12302|
003008  f04f0128          MOV      r1,#0x28
00300c  6019              STR      r1,[r3,#0]  ; mat_temper
                  |L1.12302|
;;;5223   		temp_SL=(UB20-UB0)*10;
00300e  eba20100          SUB      r1,r2,r0
003012  eb010181          ADD      r1,r1,r1,LSL #2
003016  ea4f0141          LSL      r1,r1,#1
;;;5224   		temp_SL*=mat_temper;
00301a  681a              LDR      r2,[r3,#0]  ; mat_temper
00301c  fb01f102          MUL      r1,r1,r2
;;;5225   		temp_SL/=200;
003020  f04f02c8          MOV      r2,#0xc8
003024  fb91f1f2          SDIV     r1,r1,r2
;;;5226   		temp_SL+=UB0;
003028  4408              ADD      r0,r0,r1
                  |L1.12330|
;;;5227   		}
;;;5228   	if(spc_stat==spcVZ)
00302a  494a              LDR      r1,|L1.12628|
00302c  7cc9              LDRB     r1,[r1,#0x13]  ; spc_stat
00302e  2902              CMP      r1,#2
003030  d102              BNE      |L1.12344|
;;;5229   		{
;;;5230   		temp_SL=UVZ;
003032  4849              LDR      r0,|L1.12632|
003034  f9b00000          LDRSH    r0,[r0,#0]  ; UVZ
                  |L1.12344|
;;;5231   		}
;;;5232   	u_necc=(unsigned int)temp_SL;
003038  8020              STRH     r0,[r4,#0]
                  |L1.12346|
;;;5233   	///u_necc=3456;
;;;5234   	}  
;;;5235   
;;;5236   //u_necc=2355;
;;;5237   
;;;5238   if(speedChIsOn)
00303a  4848              LDR      r0,|L1.12636|
00303c  8800              LDRH     r0,[r0,#0]  ; speedChIsOn
00303e  b110              CBZ      r0,|L1.12358|
;;;5239   	{
;;;5240   	u_necc=speedChrgVolt;
003040  4847              LDR      r0,|L1.12640|
003042  8800              LDRH     r0,[r0,#0]  ; speedChrgVolt
003044  8020              STRH     r0,[r4,#0]
                  |L1.12358|
;;;5241   	}
;;;5242   
;;;5243   if(mess_find_unvol(MESS2UNECC_HNDL))
003046  20be              MOVS     r0,#0xbe
003048  f7fffffe          BL       mess_find_unvol
00304c  b128              CBZ      r0,|L1.12378|
;;;5244   	{		
;;;5245   	if(mess_data[0]==PARAM_UNECC_SET)
00304e  4845              LDR      r0,|L1.12644|
003050  6801              LDR      r1,[r0,#0]  ; mess_data
003052  29bf              CMP      r1,#0xbf
003054  d101              BNE      |L1.12378|
;;;5246   		{
;;;5247   		u_necc=mess_data[1];
003056  6840              LDR      r0,[r0,#4]  ; mess_data
003058  8020              STRH     r0,[r4,#0]
                  |L1.12378|
;;;5248   		}		
;;;5249   	}
;;;5250   #endif
;;;5251   
;;;5252   
;;;5253   #ifndef UKU_220_IPS_TERMOKOMPENSAT
;;;5254   
;;;5255   #ifndef UKU_TELECORE2015
;;;5256   if(unh_cnt0<10)
;;;5257   	{
;;;5258   	unh_cnt0++;
;;;5259   	if(unh_cnt0>=10)
;;;5260   		{
;;;5261   		unh_cnt0=0;
;;;5262   		b1Hz_unh=1;
;;;5263   		}
;;;5264   	}
;;;5265   
;;;5266   if(unh_cnt1<5)
;;;5267   	{
;;;5268   	unh_cnt1++;
;;;5269   	if(unh_cnt1==5)
;;;5270   		{
;;;5271   		unh_cnt1=0;
;;;5272   //		b2Hz_unh=1;
;;;5273   		}
;;;5274   	} 
;;;5275   
;;;5276   
;;;5277   
;;;5278   if(mess_find_unvol(MESS2UNECC_HNDL))
;;;5279   	{		
;;;5280   	if(mess_data[0]==PARAM_UNECC_SET)
;;;5281   		{
;;;5282   		u_necc=mess_data[1];
;;;5283   		}		
;;;5284   	}
;;;5285   
;;;5286   
;;;5287   else if(b1Hz_unh)
;;;5288   	{
;;;5289   	
;;;5290   	if((BAT_IS_ON[0]!=bisON) && (BAT_IS_ON[1]!=bisON))
;;;5291   		{
;;;5292   		
;;;5293   		u_necc=U0B;
;;;5294   		}
;;;5295   	else 
;;;5296   		{
;;;5297   		if(BAT_TYPE==0) //  
;;;5298   			{
;;;5299   			for(i=0;i<2;i++)
;;;5300   				{
;;;5301   				if(BAT_IS_ON[i]==bisON)
;;;5302   					{
;;;5303   					if(bat[i]._nd)t[i]=20;
;;;5304   					else t[i]=bat[i]._Tb;
;;;5305   					}
;;;5306   				else
;;;5307   					{
;;;5308   					t[i]=-20;
;;;5309   					}
;;;5310   				}
;;;5311   			if(t[0]>t[1])mat_temper=t[0];
;;;5312   			else mat_temper=t[1];
;;;5313   			
;;;5314   		
;;;5315   			if(mat_temper<0)temp_SL=UB0; 
;;;5316   			else 
;;;5317   				{
;;;5318   				if(mat_temper>40)mat_temper=40; 
;;;5319   				temp_SL=(UB20-UB0)*10;
;;;5320   				temp_SL*=mat_temper;
;;;5321   				temp_SL/=200;
;;;5322   				temp_SL+=UB0;
;;;5323   				}
;;;5324   			if(spc_stat==spcVZ)
;;;5325   				{
;;;5326   				temp_SL=UVZ;
;;;5327   				}
;;;5328   			u_necc=(unsigned int)temp_SL;
;;;5329   			}
;;;5330   		else if(BAT_TYPE==1) //  
;;;5331   			{
;;;5332   			u_necc=U0B;
;;;5333   					
;;;5334   			u_necc=bat[0]._Ub+10;
;;;5335   
;;;5336   			
;;;5337   			if(spc_stat==spcVZ)
;;;5338   				{
;;;5339   				u_necc=UVZ;
;;;5340   				}
;;;5341   			if(u_necc>=UB0) u_necc=UB0;
;;;5342   			if(u_necc>=UB20) u_necc=UB20;
;;;5343   			}
;;;5344   		}  
;;;5345   	}
;;;5346   #endif
;;;5347   #ifdef UKU_TELECORE2015
;;;5348   
;;;5349   if(unh_cnt0<10)
;;;5350   	{
;;;5351   	unh_cnt0++;
;;;5352   	if(unh_cnt0>=10)
;;;5353   		{
;;;5354   		unh_cnt0=0;
;;;5355   		b1Hz_unh=1;
;;;5356   		}
;;;5357   	}
;;;5358   
;;;5359   if(unh_cnt1<5)
;;;5360   	{
;;;5361   	unh_cnt1++;
;;;5362   	if(unh_cnt1==5)
;;;5363   		{
;;;5364   		unh_cnt1=0;
;;;5365   //		b2Hz_unh=1;
;;;5366   		}
;;;5367   	} 
;;;5368   
;;;5369   
;;;5370   
;;;5371   if(mess_find_unvol(MESS2UNECC_HNDL))
;;;5372   	{		
;;;5373   	if(mess_data[0]==PARAM_UNECC_SET)
;;;5374   		{
;;;5375   		u_necc=mess_data[1];
;;;5376   		}		
;;;5377   	}
;;;5378   
;;;5379   
;;;5380   else if(b1Hz_unh)
;;;5381   	{
;;;5382   	b1Hz_unh=0;
;;;5383   
;;;5384   	if(BAT_TYPE==0)
;;;5385   		{
;;;5386   		if(bat[0]._nd)mat_temper=20;
;;;5387   		else mat_temper=bat[0]._Tb;
;;;5388   
;;;5389   			
;;;5390   		if(mat_temper<0)temp_SL=UB0; 
;;;5391   		else 
;;;5392   			{
;;;5393   			if(mat_temper>40)mat_temper=40; 
;;;5394   			temp_SL=(UB20-UB0)*10;
;;;5395   			temp_SL*=mat_temper;
;;;5396   			temp_SL/=200;
;;;5397   			temp_SL+=UB0;
;;;5398   			}
;;;5399   		if(spc_stat==spcVZ)
;;;5400   			{
;;;5401   			temp_SL=UVZ;
;;;5402   			}
;;;5403   		u_necc=(unsigned int)temp_SL;
;;;5404   	///u_necc=3456;
;;;5405   		}
;;;5406   	else if(BAT_TYPE==1)
;;;5407   		{
;;;5408   		
;;;5409   		gran(&DU_LI_BAT,1,30);
;;;5410   		u_necc=li_bat._Ub+DU_LI_BAT;
;;;5411   		gran(&u_necc,0,UB0);
;;;5412   		gran(&u_necc,0,UB20);
;;;5413   		gran(&u_necc,0,540);		
;;;5414   
;;;5415   
;;;5416   		if(li_bat._batStat!=bsOK)
;;;5417   			{
;;;5418   			u_necc=U0B;
;;;5419   			}
;;;5420   		if(spc_stat==spcVZ)
;;;5421   			{
;;;5422   			u_necc=UVZ;
;;;5423   			}
;;;5424   		/* 
;;;5425   		u_necc=U0B;
;;;5426   		
;;;5427   
;;;5428   	
;;;5429   		u_necc=UB0;
;;;5430   		u_necc=li_bat._Ub+10;
;;;5431   		if((li_bat._Ub<450)||(li_bat._Ub>550))
;;;5432   			{
;;;5433   			lakb_error_cnt++;
;;;5434   			if(lakb_error_cnt>=30)
;;;5435   				{
;;;5436   				lakb_error_cnt=30;
;;;5437   				u_necc=U0B;
;;;5438   				}
;;;5439   			}
;;;5440   		else lakb_error_cnt=0;*/
;;;5441   		}
;;;5442   	else if(BAT_TYPE==2)
;;;5443   		{
;;;5444   		u_necc=U0B;
;;;5445   		
;;;5446   		if(spc_stat==spcVZ)
;;;5447   			{
;;;5448   			u_necc=UVZ;
;;;5449   			}
;;;5450   	
;;;5451   		u_necc=UB0;
;;;5452   		}
;;;5453   
;;;5454   	else if(BAT_TYPE==3)
;;;5455   		{
;;;5456   		u_necc=U0B;
;;;5457   		
;;;5458   		if(spc_stat==spcVZ)
;;;5459   			{
;;;5460   			u_necc=UVZ;
;;;5461   			}
;;;5462   
;;;5463   		gran(&DU_LI_BAT,1,30);
;;;5464   
;;;5465   
;;;5466   		if(lakbNotErrorNum==0)
;;;5467   			{
;;;5468   			u_necc=U0B;
;;;5469   			}
;;;5470   		else 
;;;5471   			{
;;;5472   			signed short i;
;;;5473   			//signed short u_necc_max;
;;;5474   			//u_necc_max=0;
;;;5475   			char soc_flag=0;
;;;5476   
;;;5477   			for(i=(NUMBAT_TELECORE-1);i>=0;i--)
;;;5478   				{
;;;5479   				if(lakb[i]._communicationFullErrorStat==0)u_necc=lakb[i]._tot_bat_volt+DU_LI_BAT;
;;;5480   				if(lakb[i]._s_o_c_percent<QSODERG_LI_BAT)soc_flag=1;
;;;5481   				}
;;;5482   
;;;5483   			if(soc_flag==0)u_necc=USODERG_LI_BAT;
;;;5484   			}
;;;5485   		gran(&u_necc,0,UB0);
;;;5486   		//gran(&u_necc,0,UB20);
;;;5487   		gran(&u_necc,0,540);
;;;5488   		}
;;;5489   	}
;;;5490   
;;;5491   #endif 
;;;5492   
;;;5493   //u_necc=2356;
;;;5494   #endif//gran(&u_necc,400,UMAX);
;;;5495   
;;;5496   temp_L=(signed long) u_necc;
00305a  f9b40000          LDRSH    r0,[r4,#0]  ; u_necc
;;;5497   temp_L*=98L;
00305e  f04f0162          MOV      r1,#0x62
003062  fb00f101          MUL      r1,r0,r1
;;;5498   temp_L/=100L;
003066  f04f0264          MOV      r2,#0x64
00306a  fb91f1f2          SDIV     r1,r1,r2
;;;5499   u_necc_dn=(signed short)temp_L;
00306e  4b3e              LDR      r3,|L1.12648|
003070  8019              STRH     r1,[r3,#0]
;;;5500   
;;;5501   temp_L=(signed long) u_necc;
;;;5502   temp_L*=102L;
003072  f04f0166          MOV      r1,#0x66
003076  fb00f001          MUL      r0,r0,r1
;;;5503   temp_L/=100L;
00307a  fb90f0f2          SDIV     r0,r0,r2
;;;5504   u_necc_up=(signed short)temp_L;
00307e  493b              LDR      r1,|L1.12652|
003080  8008              STRH     r0,[r1,#0]
;;;5505   
;;;5506   
;;;5507   }
003082  bd38              POP      {r3-r5,pc}
;;;5508   
                          ENDP

                  num_necc_hndl PROC
;;;5510   //-----------------------------------------------
;;;5511   void num_necc_hndl(void)
003084  e92d41f0          PUSH     {r4-r8,lr}
;;;5512   {
;;;5513   
;;;5514   static short num_necc_block_cnt;
;;;5515   if(num_necc_block_cnt) num_necc_block_cnt--;
003088  4c32              LDR      r4,|L1.12628|
00308a  f9b40026          LDRSH    r0,[r4,#0x26]  ; num_necc_block_cnt
00308e  b110              CBZ      r0,|L1.12438|
003090  f1a00001          SUB      r0,r0,#1
003094  84e0              STRH     r0,[r4,#0x26]
                  |L1.12438|
;;;5516   
;;;5517   Isumm_=Isumm;
003096  4836              LDR      r0,|L1.12656|
003098  4d36              LDR      r5,|L1.12660|
00309a  8800              LDRH     r0,[r0,#0]  ; Isumm
00309c  8028              STRH     r0,[r5,#0]
;;;5518   
;;;5519   if(bat[0]._Ib<0) Isumm_+=(abs(bat[0]._Ib))/10;
00309e  4f36              LDR      r7,|L1.12664|
0030a0  260a              MOVS     r6,#0xa
0030a2  f9b70008          LDRSH    r0,[r7,#8]  ; bat
0030a6  2800              CMP      r0,#0
0030a8  da06              BGE      |L1.12472|
0030aa  f7fffffe          BL       abs
0030ae  fb90f0f6          SDIV     r0,r0,r6
0030b2  8829              LDRH     r1,[r5,#0]  ; Isumm_
0030b4  4408              ADD      r0,r0,r1
0030b6  8028              STRH     r0,[r5,#0]
                  |L1.12472|
;;;5520   if(bat[1]._Ib<0) Isumm_+=(abs(bat[1]._Ib))/10;
0030b8  f9b70054          LDRSH    r0,[r7,#0x54]  ; bat
0030bc  2800              CMP      r0,#0
0030be  da06              BGE      |L1.12494|
0030c0  f7fffffe          BL       abs
0030c4  fb90f0f6          SDIV     r0,r0,r6
0030c8  8829              LDRH     r1,[r5,#0]  ; Isumm_
0030ca  4408              ADD      r0,r0,r1
0030cc  8028              STRH     r0,[r5,#0]
                  |L1.12494|
;;;5521   
;;;5522   num_necc_up=(Isumm_/((signed short)IMAX))+1;
0030ce  482b              LDR      r0,|L1.12668|
0030d0  f9b51000          LDRSH    r1,[r5,#0]  ; Isumm_
0030d4  f9b00000          LDRSH    r0,[r0,#0]  ; IMAX
0030d8  fb91f0f0          SDIV     r0,r1,r0
0030dc  f1000001          ADD      r0,r0,#1
0030e0  b2c0              UXTB     r0,r0
0030e2  73e0              STRB     r0,[r4,#0xf]
;;;5523   ////Isumm_+=(signed short)((IMAX*(10-KIMAX))/10);
;;;5524   ////Isumm_+=(signed short)(IMAX-IMIN);
;;;5525   
;;;5526   num_necc_down=(Isumm_/((signed short)IMIN))+1;
0030e4  4a26              LDR      r2,|L1.12672|
0030e6  f9b22000          LDRSH    r2,[r2,#0]  ; IMIN
0030ea  fb91f1f2          SDIV     r1,r1,r2
0030ee  f1010101          ADD      r1,r1,#1
0030f2  b2c9              UXTB     r1,r1
0030f4  7421              STRB     r1,[r4,#0x10]
;;;5527   
;;;5528   if(num_necc_up>num_necc)
0030f6  4b23              LDR      r3,|L1.12676|
;;;5529   	{
;;;5530   	num_necc=num_necc_up;
;;;5531   	num_necc_block_cnt=60;
0030f8  f04f053c          MOV      r5,#0x3c
0030fc  f9b32000          LDRSH    r2,[r3,#0]            ;5528  ; num_necc
003100  4290              CMP      r0,r2                 ;5528
003102  dd41              BLE      |L1.12680|
003104  8018              STRH     r0,[r3,#0]            ;5530
003106  84e5              STRH     r5,[r4,#0x26]
003108  e044              B        |L1.12692|
00310a  0000              DCW      0x0000
                  |L1.12556|
                          DCD      0xffff7360
                  |L1.12560|
                          DCD      BAT_C_NOM
                  |L1.12564|
                          DCD      BAT_TYPE
                  |L1.12568|
                          DCD      lakb
                  |L1.12572|
                          DCD      TBATSIGN
                  |L1.12576|
                          DCD      TBATMAX
                  |L1.12580|
                          DCD      ADR_EE_BAT_RESURS
                  |L1.12584|
                          DCD      UBM_AV
                  |L1.12588|
                          DCD      U0B
                  |L1.12592|
                          DCD      IKB
                  |L1.12596|
                          DCD      USIGN
                  |L1.12600|
                          DCD      TERMOKOMPENS
                  |L1.12604|
                          DCD      UB20
                  |L1.12608|
                          DCD      u_necc
                  |L1.12612|
                          DCD      ND_EXT
                  |L1.12616|
                          DCD      t_ext
                  |L1.12620|
                          DCD      mat_temper
                  |L1.12624|
                          DCD      UB0
                  |L1.12628|
                          DCD      ||area_number.21||
                  |L1.12632|
                          DCD      UVZ
                  |L1.12636|
                          DCD      speedChIsOn
                  |L1.12640|
                          DCD      speedChrgVolt
                  |L1.12644|
                          DCD      mess_data
                  |L1.12648|
                          DCD      u_necc_dn
                  |L1.12652|
                          DCD      u_necc_up
                  |L1.12656|
                          DCD      Isumm
                  |L1.12660|
                          DCD      Isumm_
                  |L1.12664|
                          DCD      bat
                  |L1.12668|
                          DCD      IMAX
                  |L1.12672|
                          DCD      IMIN
                  |L1.12676|
                          DCD      num_necc
                  |L1.12680|
;;;5532   	}
;;;5533   else if(num_necc_down<num_necc)
003188  4291              CMP      r1,r2
00318a  da03              BGE      |L1.12692|
;;;5534   	{
;;;5535   	if(!num_necc_block_cnt)
00318c  8ce0              LDRH     r0,[r4,#0x26]  ; num_necc_block_cnt
00318e  b908              CBNZ     r0,|L1.12692|
;;;5536   		{
;;;5537   		num_necc=num_necc_down;
003190  8019              STRH     r1,[r3,#0]
;;;5538   		num_necc_block_cnt=60;
003192  84e5              STRH     r5,[r4,#0x26]
                  |L1.12692|
;;;5539   		}
;;;5540   	}
;;;5541   
;;;5542   if(PAR) num_necc=NUMIST;
003194  48f8              LDR      r0,|L1.13688|
003196  8801              LDRH     r1,[r0,#0]  ; PAR
003198  48f8              LDR      r0,|L1.13692|
00319a  b109              CBZ      r1,|L1.12704|
00319c  8801              LDRH     r1,[r0,#0]  ; NUMIST
00319e  8019              STRH     r1,[r3,#0]
                  |L1.12704|
;;;5543   
;;;5544   gran(&num_necc,1,NUMIST);
0031a0  f9b02000          LDRSH    r2,[r0,#0]  ; NUMIST
0031a4  e8bd41f0          POP      {r4-r8,lr}
0031a8  2101              MOVS     r1,#1
0031aa  48f5              LDR      r0,|L1.13696|
0031ac  f7ffbffe          B.W      gran
;;;5545   
;;;5546   }
;;;5547   
                          ENDP

                  cntrl_hndl PROC
;;;5550   //-----------------------------------------------
;;;5551   void cntrl_hndl(void)
0031b0  e92d5ff0          PUSH     {r4-r12,lr}
;;;5552   {
;;;5553   
;;;5554   IZMAX_=IZMAX;
0031b4  48f3              LDR      r0,|L1.13700|
0031b6  4cf4              LDR      r4,|L1.13704|
0031b8  f9b01000          LDRSH    r1,[r0,#0]  ; IZMAX
0031bc  8761              STRH     r1,[r4,#0x3a]
;;;5555   
;;;5556   if(speedChIsOn)IZMAX_=speedChrgCurr;
0031be  48f3              LDR      r0,|L1.13708|
0031c0  8800              LDRH     r0,[r0,#0]  ; speedChIsOn
0031c2  b110              CBZ      r0,|L1.12746|
0031c4  48f2              LDR      r0,|L1.13712|
0031c6  8800              LDRH     r0,[r0,#0]  ; speedChrgCurr
0031c8  8760              STRH     r0,[r4,#0x3a]
                  |L1.12746|
;;;5557   
;;;5558   if(cntrl_stat_blok_cnt)cntrl_stat_blok_cnt--;
0031ca  f9b4005e          LDRSH    r0,[r4,#0x5e]  ; cntrl_stat_blok_cnt
0031ce  b118              CBZ      r0,|L1.12760|
0031d0  f1a00001          SUB      r0,r0,#1
0031d4  f8a4005e          STRH     r0,[r4,#0x5e]
                  |L1.12760|
;;;5559   if(cntrl_stat_blok_cnt_)cntrl_stat_blok_cnt_--;
0031d8  f9b40060          LDRSH    r0,[r4,#0x60]  ; cntrl_stat_blok_cnt_
0031dc  b118              CBZ      r0,|L1.12774|
0031de  f1a00001          SUB      r0,r0,#1
0031e2  f8a40060          STRH     r0,[r4,#0x60]
                  |L1.12774|
;;;5560   
;;;5561   if((bat[0]._temper_stat&0x03)||(bat[1]._temper_stat&0x03))IZMAX_=IZMAX/10;
0031e6  48eb              LDR      r0,|L1.13716|
0031e8  f04f050a          MOV      r5,#0xa
0031ec  f890203f          LDRB     r2,[r0,#0x3f]  ; bat
0031f0  0792              LSLS     r2,r2,#30
0031f2  d103              BNE      |L1.12796|
0031f4  f890008b          LDRB     r0,[r0,#0x8b]  ; bat
0031f8  0780              LSLS     r0,r0,#30
0031fa  d002              BEQ      |L1.12802|
                  |L1.12796|
0031fc  fb91f0f5          SDIV     r0,r1,r5
003200  8760              STRH     r0,[r4,#0x3a]
                  |L1.12802|
;;;5562   
;;;5563   
;;;5564   if(ch_cnt0<10)
003202  79a0              LDRB     r0,[r4,#6]  ; ch_cnt0
003204  2600              MOVS     r6,#0                 ;5556
;;;5565   	{
;;;5566   	ch_cnt0++;
;;;5567   	if(ch_cnt0>=10)
;;;5568   		{
;;;5569   		ch_cnt0=0;
;;;5570   		b1Hz_ch=1;
003206  2701              MOVS     r7,#1
003208  280a              CMP      r0,#0xa               ;5564
00320a  d207              BCS      |L1.12828|
00320c  f1000001          ADD      r0,r0,#1              ;5566
003210  b2c0              UXTB     r0,r0                 ;5566
003212  71a0              STRB     r0,[r4,#6]            ;5566
003214  280a              CMP      r0,#0xa               ;5567
003216  d301              BCC      |L1.12828|
003218  71a6              STRB     r6,[r4,#6]            ;5569
00321a  71e7              STRB     r7,[r4,#7]
                  |L1.12828|
;;;5571   		}
;;;5572   	}
;;;5573   
;;;5574   
;;;5575   
;;;5576   
;;;5577   if(mess_find_unvol(MESS2CNTRL_HNDL))
00321c  20e1              MOVS     r0,#0xe1
00321e  f7fffffe          BL       mess_find_unvol
;;;5578   	{
;;;5579   	if(mess_data[0]==PARAM_CNTRL_STAT_PLUS)
;;;5580   		{
;;;5581   		cntrl_stat=cntrl_stat_old+mess_data[1];
;;;5582   		}
;;;5583   	else if(mess_data[0]==PARAM_CNTRL_STAT_MINUS)
;;;5584   		{
;;;5585   		cntrl_stat=cntrl_stat_old-mess_data[1];
;;;5586   		}
;;;5587   	else if(mess_data[0]==PARAM_CNTRL_STAT_STEP_DOWN)
;;;5588   		{
;;;5589   		cntrl_stat--;
;;;5590   
;;;5591   		if((cntrl_stat<=30)||(load_U<USIGN)) mess_send(MESS2KB_HNDL,PARAM_CNTRL_IS_DOWN,0,10);
;;;5592   
;;;5593   		}
;;;5594   	else if(mess_data[0]==PARAM_CNTRL_STAT_SET)
;;;5595   		{
;;;5596   		cntrl_stat=mess_data[1];
;;;5597   		}
;;;5598   
;;;5599   	else if(mess_data[0]==PARAM_CNTRL_STAT_FAST_REG)
;;;5600   		{
;;;5601   		#ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;5602   		if(load_U>u_necc)
003222  4bdd              LDR      r3,|L1.13720|
;;;5603   			{
;;;5604   			if(((bps_U-u_necc)>40)&&(cntrl_stat>0))cntrl_stat-=5;
003224  f8dfc374          LDR      r12,|L1.13724|
;;;5605   			else if((cntrl_stat)&&b1Hz_ch)cntrl_stat--;
;;;5606   			}
;;;5607   		else if(bps_U<u_necc)
;;;5608   			{	
;;;5609   			if(((u_necc-bps_U)>40)&&(cntrl_stat<1015))cntrl_stat+=5;
;;;5610   			else	if((cntrl_stat<1020)&&b1Hz_ch)cntrl_stat++;
;;;5611   			}
;;;5612   		#elif defined(UKU_220)
;;;5613   		if(load_U>u_necc)
;;;5614   			{
;;;5615   			if(((load_U-u_necc)>40)&&(cntrl_stat>0))cntrl_stat-=5;
;;;5616   			else if((cntrl_stat)&&b1Hz_ch)cntrl_stat--;
;;;5617   			}
;;;5618   		else if(load_U<u_necc)
;;;5619   			{	
;;;5620   			if(((u_necc-load_U)>40)&&(cntrl_stat<1015))cntrl_stat+=5;
;;;5621   			else	if((cntrl_stat<1020)&&b1Hz_ch)cntrl_stat++;
;;;5622   			}
;;;5623   		#elif defined(UKU_220_V2)
;;;5624   		if(load_U>u_necc)
;;;5625   			{
;;;5626   			if(((load_U-u_necc)>40)&&(cntrl_stat>0))cntrl_stat-=5;
;;;5627   			else if((cntrl_stat)&&b1Hz_ch)cntrl_stat--;
;;;5628   			}
;;;5629   		else if(load_U<u_necc)
;;;5630   			{	
;;;5631   			if(((u_necc-load_U)>40)&&(cntrl_stat<1015))cntrl_stat+=5;
;;;5632   			else	if((cntrl_stat<1020)&&b1Hz_ch)cntrl_stat++;
;;;5633   			}
;;;5634   		#else
;;;5635   
;;;5636   		if(load_U>u_necc)
;;;5637   			{
;;;5638   			if(((load_U-u_necc)>10)&&(cntrl_stat>0))cntrl_stat-=5;
;;;5639   			else if((cntrl_stat)&&b1Hz_ch)cntrl_stat--;
;;;5640   			}
;;;5641   		else if(load_U<u_necc)
;;;5642   			{	
;;;5643   			if(((u_necc-load_U)>10)&&(cntrl_stat<1015))cntrl_stat+=5;
;;;5644   			else	if((cntrl_stat<1020)&&b1Hz_ch)cntrl_stat++;
;;;5645   			}
;;;5646   		#endif	
;;;5647   	 	}
;;;5648   	}
;;;5649   
;;;5650   #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;5651   else if((b1Hz_ch)&&((!bIBAT_SMKLBR)||(bps[8]._cnt>40)))
003228  f8df8374          LDR      r8,|L1.13728|
;;;5652   	{
;;;5653   	cntrl_stat_new=cntrl_stat_old;
;;;5654   	
;;;5655   	if((Ibmax/10)>(2*IZMAX_))
;;;5656   		{
;;;5657             if(cntrl_stat_blok_cnt)cntrl_stat_new--;
;;;5658   		else	cntrl_stat_new-=10;
;;;5659   		}		
;;;5660   	else if(((Ibmax/10)<(IZMAX_*2))&&(Ibmax>(IZMAX_*15)))
;;;5661   		{
;;;5662             if(cntrl_stat_blok_cnt)cntrl_stat_new--;
;;;5663             else	cntrl_stat_new-=3;
;;;5664   		}   
;;;5665   	else if((Ibmax<(IZMAX_*15))&&((Ibmax/10)>IZMAX_))
;;;5666   		{
;;;5667   		cntrl_stat_new--;
;;;5668   		}
;;;5669   		
;;;5670   	else if(bps_U<u_necc)
;;;5671   		{
;;;5672   		if(bps_U<(u_necc-(UB0-UB20)))
;;;5673   			{
;;;5674   			if(Ibmax<0)
;;;5675   				{
;;;5676                       if(cntrl_stat_blok_cnt)cntrl_stat_new++;
;;;5677   				else cntrl_stat_new+=10;
;;;5678   				}
;;;5679   			else if(Ibmax<(IZMAX_*5))
;;;5680   				{
;;;5681                       if(cntrl_stat_blok_cnt)cntrl_stat_new++;
;;;5682   				else	cntrl_stat_new+=2;
;;;5683   				}
;;;5684   			else if(Ibmax<((IZMAX_*95)/10))
;;;5685   				{
;;;5686   				cntrl_stat_new++;
;;;5687   				}					
;;;5688   			}
;;;5689   		else if(bps_U<(u_necc-((UB0-UB20)/4)))
;;;5690   			{
;;;5691   			if(Ibmax<(IZMAX_*5))
;;;5692   				{
;;;5693                       if(cntrl_stat_blok_cnt)cntrl_stat_new++;
;;;5694   				else	cntrl_stat_new+=2;
;;;5695   				}
;;;5696   			else if(Ibmax<((IZMAX_*95)/10))
;;;5697   				{
;;;5698   				cntrl_stat_new++;
;;;5699   				}					
;;;5700   			}	
;;;5701   		else if(bps_U<(u_necc-1))
;;;5702   			{
;;;5703   			if(Ibmax<((IZMAX_*95)/10))
;;;5704   				{
;;;5705   				cntrl_stat_new++;
;;;5706   				}					
;;;5707   			}					
;;;5708   		}	
;;;5709   	else if((bps_U>u_necc)/*&&(!cntrl_blok)*/)
;;;5710   		{
;;;5711   		if(bps_U>(u_necc+(UB0-UB20)))
;;;5712   			{
;;;5713                  if(cntrl_stat_blok_cnt)cntrl_stat_new--;
;;;5714   			else	cntrl_stat_new-=10;
;;;5715   			}
;;;5716   		else if(bps_U>(u_necc+((UB0-UB20)/4)))
;;;5717   			{
;;;5718                  if(cntrl_stat_blok_cnt)cntrl_stat_new--;
;;;5719   			else cntrl_stat_new-=2;
;;;5720   			}	
;;;5721   		else if(bps_U>(u_necc+1))
;;;5722   			{
;;;5723   			cntrl_stat_new--;
;;;5724   			}					
;;;5725   		}
;;;5726   
;;;5727   	gran(&cntrl_stat_new,10,1010);			
00322c  f2403bf2          MOV      r11,#0x3f2
003230  b380              CBZ      r0,|L1.12948|
003232  49dc              LDR      r1,|L1.13732|
003234  6808              LDR      r0,[r1,#0]            ;5579  ; mess_data
003236  2864              CMP      r0,#0x64              ;5579
003238  d009              BEQ      |L1.12878|
00323a  2869              CMP      r0,#0x69              ;5583
00323c  d00c              BEQ      |L1.12888|
00323e  4ada              LDR      r2,|L1.13736|
003240  286e              CMP      r0,#0x6e              ;5587
003242  d00f              BEQ      |L1.12900|
003244  28e5              CMP      r0,#0xe5              ;5594
003246  d022              BEQ      |L1.12942|
003248  28e6              CMP      r0,#0xe6              ;5599
00324a  d024              BEQ      |L1.12950|
                  |L1.12876|
00324c  e13c              B        |L1.13512|
                  |L1.12878|
00324e  6848              LDR      r0,[r1,#4]            ;5581  ; mess_data
003250  8be1              LDRH     r1,[r4,#0x1e]         ;5581  ; cntrl_stat_old
003252  4408              ADD      r0,r0,r1              ;5581
003254  83a0              STRH     r0,[r4,#0x1c]         ;5581
003256  e137              B        |L1.13512|
                  |L1.12888|
003258  6849              LDR      r1,[r1,#4]            ;5585  ; mess_data
00325a  8be0              LDRH     r0,[r4,#0x1e]         ;5585  ; cntrl_stat_old
00325c  eba00001          SUB      r0,r0,r1              ;5585
003260  83a0              STRH     r0,[r4,#0x1c]         ;5585
003262  e131              B        |L1.13512|
                  |L1.12900|
003264  8ba0              LDRH     r0,[r4,#0x1c]         ;5589  ; cntrl_stat
003266  f1a00001          SUB      r0,r0,#1              ;5589
00326a  b200              SXTH     r0,r0                 ;5589
00326c  83a0              STRH     r0,[r4,#0x1c]         ;5589
00326e  281e              CMP      r0,#0x1e              ;5591
003270  dd06              BLE      |L1.12928|
003272  49ce              LDR      r1,|L1.13740|
003274  f9b20000          LDRSH    r0,[r2,#0]            ;5591  ; load_U
003278  f9b11000          LDRSH    r1,[r1,#0]            ;5591  ; USIGN
00327c  4288              CMP      r0,r1                 ;5591
00327e  dae5              BGE      |L1.12876|
                  |L1.12928|
003280  230a              MOVS     r3,#0xa               ;5591
003282  2200              MOVS     r2,#0                 ;5591
003284  21e7              MOVS     r1,#0xe7              ;5591
003286  20e6              MOVS     r0,#0xe6              ;5591
003288  f7fffffe          BL       mess_send
00328c  e11c              B        |L1.13512|
                  |L1.12942|
00328e  6848              LDR      r0,[r1,#4]            ;5596  ; mess_data
003290  83a0              STRH     r0,[r4,#0x1c]         ;5596
003292  e119              B        |L1.13512|
                  |L1.12948|
003294  e03a              B        |L1.13068|
                  |L1.12950|
003296  f9b21000          LDRSH    r1,[r2,#0]            ;5602  ; load_U
00329a  f9b30000          LDRSH    r0,[r3,#0]            ;5602  ; u_necc
00329e  4281              CMP      r1,r0                 ;5602
0032a0  dd17              BLE      |L1.13010|
0032a2  f9bc1000          LDRSH    r1,[r12,#0]           ;5604  ; bps_U
0032a6  1a08              SUBS     r0,r1,r0              ;5604
0032a8  2828              CMP      r0,#0x28              ;5604
0032aa  dd07              BLE      |L1.12988|
0032ac  f9b4001c          LDRSH    r0,[r4,#0x1c]         ;5604  ; cntrl_stat
0032b0  2800              CMP      r0,#0                 ;5604
0032b2  dd03              BLE      |L1.12988|
0032b4  f1a00005          SUB      r0,r0,#5              ;5604
0032b8  83a0              STRH     r0,[r4,#0x1c]         ;5604
0032ba  e105              B        |L1.13512|
                  |L1.12988|
0032bc  f9b4001c          LDRSH    r0,[r4,#0x1c]         ;5605  ; cntrl_stat
0032c0  2800              CMP      r0,#0                 ;5605
0032c2  d005              BEQ      |L1.13008|
0032c4  79e1              LDRB     r1,[r4,#7]            ;5605  ; b1Hz_ch
0032c6  2900              CMP      r1,#0                 ;5605
0032c8  d002              BEQ      |L1.13008|
0032ca  f1a00001          SUB      r0,r0,#1              ;5605
0032ce  83a0              STRH     r0,[r4,#0x1c]         ;5605
                  |L1.13008|
0032d0  e0fa              B        |L1.13512|
                  |L1.13010|
0032d2  f9bc1000          LDRSH    r1,[r12,#0]           ;5607  ; bps_U
0032d6  4281              CMP      r1,r0                 ;5607
0032d8  da0b              BGE      |L1.13042|
0032da  1a40              SUBS     r0,r0,r1              ;5609
0032dc  2828              CMP      r0,#0x28              ;5609
0032de  dd09              BLE      |L1.13044|
0032e0  f9b4001c          LDRSH    r0,[r4,#0x1c]         ;5609  ; cntrl_stat
0032e4  f24031f7          MOV      r1,#0x3f7             ;5609
0032e8  4288              CMP      r0,r1                 ;5609
0032ea  da03              BGE      |L1.13044|
0032ec  f1000005          ADD      r0,r0,#5              ;5609
0032f0  83a0              STRH     r0,[r4,#0x1c]         ;5609
                  |L1.13042|
0032f2  e0e9              B        |L1.13512|
                  |L1.13044|
0032f4  f9b4001c          LDRSH    r0,[r4,#0x1c]         ;5610  ; cntrl_stat
0032f8  f5b07f7f          CMP      r0,#0x3fc             ;5610
0032fc  da05              BGE      |L1.13066|
0032fe  79e1              LDRB     r1,[r4,#7]            ;5610  ; b1Hz_ch
003300  2900              CMP      r1,#0                 ;5610
003302  d002              BEQ      |L1.13066|
003304  f1000001          ADD      r0,r0,#1              ;5610
003308  83a0              STRH     r0,[r4,#0x1c]         ;5610
                  |L1.13066|
00330a  e0dd              B        |L1.13512|
                  |L1.13068|
00330c  79e0              LDRB     r0,[r4,#7]            ;5651  ; b1Hz_ch
00330e  2800              CMP      r0,#0                 ;5651
003310  d072              BEQ      |L1.13304|
003312  48a7              LDR      r0,|L1.13744|
003314  8800              LDRH     r0,[r0,#0]            ;5651  ; bIBAT_SMKLBR
003316  b118              CBZ      r0,|L1.13088|
003318  f89802e3          LDRB     r0,[r8,#0x2e3]        ;5651  ; bps
00331c  2828              CMP      r0,#0x28              ;5651
00331e  d96b              BLS      |L1.13304|
                  |L1.13088|
003320  f9b4001e          LDRSH    r0,[r4,#0x1e]         ;5653  ; cntrl_stat_old
003324  86e0              STRH     r0,[r4,#0x36]         ;5653
003326  f9b41038          LDRSH    r1,[r4,#0x38]         ;5655  ; Ibmax
00332a  8f62              LDRH     r2,[r4,#0x3a]         ;5655  ; IZMAX_
00332c  fb91f9f5          SDIV     r9,r1,r5              ;5655
003330  ebb90f42          CMP      r9,r2,LSL #1          ;5655
003334  dd0a              BLE      |L1.13132|
003336  f8b4105e          LDRH     r1,[r4,#0x5e]         ;5657  ; cntrl_stat_blok_cnt
00333a  b119              CBZ      r1,|L1.13124|
00333c  f1a00001          SUB      r0,r0,#1              ;5657
003340  86e0              STRH     r0,[r4,#0x36]         ;5657
003342  e0b8              B        |L1.13494|
                  |L1.13124|
003344  f1a0000a          SUB      r0,r0,#0xa            ;5658
003348  86e0              STRH     r0,[r4,#0x36]         ;5658
00334a  e0b4              B        |L1.13494|
                  |L1.13132|
00334c  da0e              BGE      |L1.13164|
00334e  ebc21a02          RSB      r10,r2,r2,LSL #4      ;5660
003352  458a              CMP      r10,r1                ;5660
003354  da0a              BGE      |L1.13164|
003356  f8b4105e          LDRH     r1,[r4,#0x5e]         ;5662  ; cntrl_stat_blok_cnt
00335a  b119              CBZ      r1,|L1.13156|
00335c  f1a00001          SUB      r0,r0,#1              ;5662
003360  86e0              STRH     r0,[r4,#0x36]         ;5662
003362  e0a8              B        |L1.13494|
                  |L1.13156|
003364  f1a00003          SUB      r0,r0,#3              ;5663
003368  86e0              STRH     r0,[r4,#0x36]         ;5663
00336a  e0a4              B        |L1.13494|
                  |L1.13164|
00336c  ebc21a02          RSB      r10,r2,r2,LSL #4      ;5665
003370  458a              CMP      r10,r1                ;5665
003372  dd05              BLE      |L1.13184|
003374  4591              CMP      r9,r2                 ;5665
003376  dd03              BLE      |L1.13184|
003378  f1a00001          SUB      r0,r0,#1              ;5667
00337c  86e0              STRH     r0,[r4,#0x36]         ;5667
00337e  e09a              B        |L1.13494|
                  |L1.13184|
003380  f9bcc000          LDRSH    r12,[r12,#0]          ;5670  ; bps_U
003384  f9b33000          LDRSH    r3,[r3,#0]            ;5670  ; u_necc
003388  f8df9228          LDR      r9,|L1.13748|
00338c  f8dfa228          LDR      r10,|L1.13752|
003390  459c              CMP      r12,r3                ;5670
003392  da64              BGE      |L1.13406|
003394  f9b99000          LDRSH    r9,[r9,#0]            ;5672  ; UB0
003398  f9baa000          LDRSH    r10,[r10,#0]          ;5672  ; UB20
00339c  eba9090a          SUB      r9,r9,r10             ;5672
0033a0  eba30a09          SUB      r10,r3,r9             ;5672
0033a4  45e2              CMP      r10,r12               ;5672
0033a6  dd28              BLE      |L1.13306|
0033a8  2900              CMP      r1,#0                 ;5674
0033aa  da0a              BGE      |L1.13250|
0033ac  f8b4105e          LDRH     r1,[r4,#0x5e]         ;5676  ; cntrl_stat_blok_cnt
0033b0  b119              CBZ      r1,|L1.13242|
0033b2  f1000001          ADD      r0,r0,#1              ;5676
0033b6  86e0              STRH     r0,[r4,#0x36]         ;5676
0033b8  e07d              B        |L1.13494|
                  |L1.13242|
0033ba  f100000a          ADD      r0,r0,#0xa            ;5677
0033be  86e0              STRH     r0,[r4,#0x36]         ;5677
0033c0  e079              B        |L1.13494|
                  |L1.13250|
0033c2  eb020382          ADD      r3,r2,r2,LSL #2       ;5679
0033c6  428b              CMP      r3,r1                 ;5679
0033c8  dd0a              BLE      |L1.13280|
0033ca  f8b4105e          LDRH     r1,[r4,#0x5e]         ;5681  ; cntrl_stat_blok_cnt
0033ce  b119              CBZ      r1,|L1.13272|
0033d0  f1000001          ADD      r0,r0,#1              ;5681
0033d4  86e0              STRH     r0,[r4,#0x36]         ;5681
0033d6  e06e              B        |L1.13494|
                  |L1.13272|
0033d8  f1000002          ADD      r0,r0,#2              ;5682
0033dc  86e0              STRH     r0,[r4,#0x36]         ;5682
0033de  e06a              B        |L1.13494|
                  |L1.13280|
0033e0  ebc21342          RSB      r3,r2,r2,LSL #5       ;5684
0033e4  eb031282          ADD      r2,r3,r2,LSL #6       ;5684
0033e8  fbb2f2f5          UDIV     r2,r2,r5              ;5684
0033ec  428a              CMP      r2,r1                 ;5684
0033ee  dd62              BLE      |L1.13494|
0033f0  f1000001          ADD      r0,r0,#1              ;5686
0033f4  86e0              STRH     r0,[r4,#0x36]         ;5686
0033f6  e05e              B        |L1.13494|
                  |L1.13304|
0033f8  e066              B        |L1.13512|
                  |L1.13306|
0033fa  ea4f7ae9          ASR      r10,r9,#31            ;5689
0033fe  eb09799a          ADD      r9,r9,r10,LSR #30     ;5689
003402  eba309a9          SUB      r9,r3,r9,ASR #2       ;5689
003406  45e1              CMP      r9,r12                ;5689
003408  dd1a              BLE      |L1.13376|
00340a  eb020382          ADD      r3,r2,r2,LSL #2       ;5691
00340e  428b              CMP      r3,r1                 ;5691
003410  dd0a              BLE      |L1.13352|
003412  f8b4105e          LDRH     r1,[r4,#0x5e]         ;5693  ; cntrl_stat_blok_cnt
003416  b119              CBZ      r1,|L1.13344|
003418  f1000001          ADD      r0,r0,#1              ;5693
00341c  86e0              STRH     r0,[r4,#0x36]         ;5693
00341e  e04a              B        |L1.13494|
                  |L1.13344|
003420  f1000002          ADD      r0,r0,#2              ;5694
003424  86e0              STRH     r0,[r4,#0x36]         ;5694
003426  e046              B        |L1.13494|
                  |L1.13352|
003428  ebc21342          RSB      r3,r2,r2,LSL #5       ;5696
00342c  eb031282          ADD      r2,r3,r2,LSL #6       ;5696
003430  fbb2f2f5          UDIV     r2,r2,r5              ;5696
003434  428a              CMP      r2,r1                 ;5696
003436  dd3e              BLE      |L1.13494|
003438  f1000001          ADD      r0,r0,#1              ;5698
00343c  86e0              STRH     r0,[r4,#0x36]         ;5698
00343e  e03a              B        |L1.13494|
                  |L1.13376|
003440  1e5b              SUBS     r3,r3,#1              ;5701
003442  459c              CMP      r12,r3                ;5701
003444  da37              BGE      |L1.13494|
003446  ebc21342          RSB      r3,r2,r2,LSL #5       ;5703
00344a  eb031282          ADD      r2,r3,r2,LSL #6       ;5703
00344e  fbb2f2f5          UDIV     r2,r2,r5              ;5703
003452  428a              CMP      r2,r1                 ;5703
003454  dd2f              BLE      |L1.13494|
003456  f1000001          ADD      r0,r0,#1              ;5705
00345a  86e0              STRH     r0,[r4,#0x36]         ;5705
00345c  e02b              B        |L1.13494|
                  |L1.13406|
00345e  dd2a              BLE      |L1.13494|
003460  f9b91000          LDRSH    r1,[r9,#0]            ;5711  ; UB0
003464  f9ba2000          LDRSH    r2,[r10,#0]           ;5711  ; UB20
003468  1a89              SUBS     r1,r1,r2              ;5711
00346a  18ca              ADDS     r2,r1,r3              ;5711
00346c  4562              CMP      r2,r12                ;5711
00346e  da0a              BGE      |L1.13446|
003470  f8b4105e          LDRH     r1,[r4,#0x5e]         ;5713  ; cntrl_stat_blok_cnt
003474  b119              CBZ      r1,|L1.13438|
003476  f1a00001          SUB      r0,r0,#1              ;5713
00347a  86e0              STRH     r0,[r4,#0x36]         ;5713
00347c  e01b              B        |L1.13494|
                  |L1.13438|
00347e  f1a0000a          SUB      r0,r0,#0xa            ;5714
003482  86e0              STRH     r0,[r4,#0x36]         ;5714
003484  e017              B        |L1.13494|
                  |L1.13446|
003486  17ca              ASRS     r2,r1,#31             ;5716
003488  eb017192          ADD      r1,r1,r2,LSR #30      ;5716
00348c  eb0301a1          ADD      r1,r3,r1,ASR #2       ;5716
003490  4561              CMP      r1,r12                ;5716
003492  da0a              BGE      |L1.13482|
003494  f8b4105e          LDRH     r1,[r4,#0x5e]         ;5718  ; cntrl_stat_blok_cnt
003498  b119              CBZ      r1,|L1.13474|
00349a  f1a00001          SUB      r0,r0,#1              ;5718
00349e  86e0              STRH     r0,[r4,#0x36]         ;5718
0034a0  e009              B        |L1.13494|
                  |L1.13474|
0034a2  f1a00002          SUB      r0,r0,#2              ;5719
0034a6  86e0              STRH     r0,[r4,#0x36]         ;5719
0034a8  e005              B        |L1.13494|
                  |L1.13482|
0034aa  1c5b              ADDS     r3,r3,#1              ;5721
0034ac  459c              CMP      r12,r3                ;5721
0034ae  dd02              BLE      |L1.13494|
0034b0  f1a00001          SUB      r0,r0,#1              ;5723
0034b4  86e0              STRH     r0,[r4,#0x36]         ;5723
                  |L1.13494|
0034b6  4834              LDR      r0,|L1.13704|
0034b8  465a              MOV      r2,r11
0034ba  210a              MOVS     r1,#0xa
0034bc  3036              ADDS     r0,r0,#0x36
0034be  f7fffffe          BL       gran
;;;5728   	cntrl_stat_old=cntrl_stat_new;
0034c2  8ee0              LDRH     r0,[r4,#0x36]  ; cntrl_stat_new
0034c4  83e0              STRH     r0,[r4,#0x1e]
;;;5729   	cntrl_stat=cntrl_stat_new;	
0034c6  83a0              STRH     r0,[r4,#0x1c]
                  |L1.13512|
;;;5730   	}
;;;5731   #else
;;;5732   else if((b1Hz_ch)&&((!bIBAT_SMKLBR)||(bps[8]._cnt>40)))
;;;5733   	{
;;;5734   	cntrl_stat_new=cntrl_stat_old;
;;;5735   	
;;;5736   	if((Ibmax/10)>(2*IZMAX_))
;;;5737   		{
;;;5738             if(cntrl_stat_blok_cnt)cntrl_stat_new--;
;;;5739   		else	cntrl_stat_new-=10;
;;;5740   		}		
;;;5741   	else if(((Ibmax/10)<(IZMAX_*2))&&(Ibmax>(IZMAX_*15)))
;;;5742   		{
;;;5743             if(cntrl_stat_blok_cnt)cntrl_stat_new--;
;;;5744             else	cntrl_stat_new-=3;
;;;5745   		}   
;;;5746   	else if((Ibmax<(IZMAX_*15))&&((Ibmax/10)>IZMAX_))
;;;5747   		{
;;;5748   		cntrl_stat_new--;
;;;5749   		}
;;;5750   		
;;;5751   	else if(load_U<u_necc)
;;;5752   		{
;;;5753   		if(load_U<(u_necc-(UB0-UB20)))
;;;5754   			{
;;;5755   			if(Ibmax<0)
;;;5756   				{
;;;5757                       if(cntrl_stat_blok_cnt)cntrl_stat_new++;
;;;5758   				else cntrl_stat_new+=10;
;;;5759   				}
;;;5760   			else if(Ibmax<(IZMAX_*5))
;;;5761   				{
;;;5762                       if(cntrl_stat_blok_cnt)cntrl_stat_new++;
;;;5763   				else	cntrl_stat_new+=2;
;;;5764   				}
;;;5765   			else if(Ibmax<((IZMAX_*95)/10))
;;;5766   				{
;;;5767   				cntrl_stat_new++;
;;;5768   				}					
;;;5769   			}
;;;5770   		else if(load_U<(u_necc-((UB0-UB20)/4)))
;;;5771   			{
;;;5772   			if(Ibmax<(IZMAX_*5))
;;;5773   				{
;;;5774                       if(cntrl_stat_blok_cnt)cntrl_stat_new++;
;;;5775   				else	cntrl_stat_new+=2;
;;;5776   				}
;;;5777   			else if(Ibmax<((IZMAX_*95)/10))
;;;5778   				{
;;;5779   				cntrl_stat_new++;
;;;5780   				}					
;;;5781   			}	
;;;5782   		else if(load_U<(u_necc-1))
;;;5783   			{
;;;5784   			if(Ibmax<((IZMAX_*95)/10))
;;;5785   				{
;;;5786   				cntrl_stat_new++;
;;;5787   				}					
;;;5788   			}					
;;;5789   		}	
;;;5790   	else if((load_U>u_necc)/*&&(!cntrl_blok)*/)
;;;5791   		{
;;;5792   		if(load_U>(u_necc+(UB0-UB20)))
;;;5793   			{
;;;5794                  if(cntrl_stat_blok_cnt)cntrl_stat_new--;
;;;5795   			else	cntrl_stat_new-=10;
;;;5796   			}
;;;5797   		else if(load_U>(u_necc+((UB0-UB20)/4)))
;;;5798   			{
;;;5799                  if(cntrl_stat_blok_cnt)cntrl_stat_new--;
;;;5800   			else cntrl_stat_new-=2;
;;;5801   			}	
;;;5802   		else if(load_U>(u_necc+1))
;;;5803   			{
;;;5804   			cntrl_stat_new--;
;;;5805   			}					
;;;5806   		}
;;;5807   
;;;5808   	gran(&cntrl_stat_new,10,1010);			
;;;5809   	cntrl_stat_old=cntrl_stat_new;
;;;5810   	cntrl_stat=cntrl_stat_new;	
;;;5811   	}
;;;5812   #endif
;;;5813   
;;;5814   iiii=0;
0034c8  7266              STRB     r6,[r4,#9]
;;;5815   for(i=0;i<NUMIST;i++)
0034ca  7226              STRB     r6,[r4,#8]
0034cc  482b              LDR      r0,|L1.13692|
0034ce  f9b01000          LDRSH    r1,[r0,#0]
0034d2  e00c              B        |L1.13550|
                  |L1.13524|
;;;5816        {
;;;5817        if(bps[i]._cnt<30)iiii=1;
0034d4  ebc002c0          RSB      r2,r0,r0,LSL #3
0034d8  eb021200          ADD      r2,r2,r0,LSL #4
0034dc  eb080282          ADD      r2,r8,r2,LSL #2
0034e0  78d2              LDRB     r2,[r2,#3]
0034e2  2a1e              CMP      r2,#0x1e
0034e4  d200              BCS      |L1.13544|
0034e6  7267              STRB     r7,[r4,#9]
                  |L1.13544|
0034e8  f1000001          ADD      r0,r0,#1              ;5815
0034ec  7220              STRB     r0,[r4,#8]            ;5815
                  |L1.13550|
0034ee  7a20              LDRB     r0,[r4,#8]            ;5815  ; i
0034f0  4288              CMP      r0,r1                 ;5815
0034f2  dbef              BLT      |L1.13524|
;;;5818        }
;;;5819   
;;;5820   if(iiii==0)
0034f4  7a60              LDRB     r0,[r4,#9]  ; iiii
0034f6  b920              CBNZ     r0,|L1.13570|
;;;5821        {
;;;5822        cntrl_stat=600;	
0034f8  f44f7016          MOV      r0,#0x258
0034fc  83a0              STRH     r0,[r4,#0x1c]
;;;5823        cntrl_stat_old=600;
0034fe  83e0              STRH     r0,[r4,#0x1e]
;;;5824        cntrl_stat_new=600;
003500  86e0              STRH     r0,[r4,#0x36]
                  |L1.13570|
;;;5825   	#ifdef UKU_TELECORE2015
;;;5826   	//cntrl_stat=0;
;;;5827   	//cntrl_stat_old=0;
;;;5828   	//cntrl_stat_new=0;
;;;5829   	#endif
;;;5830        }
;;;5831   gran(&cntrl_stat,10,1010); 
003502  4821              LDR      r0,|L1.13704|
003504  465a              MOV      r2,r11
003506  210a              MOVS     r1,#0xa
003508  301c              ADDS     r0,r0,#0x1c
00350a  f7fffffe          BL       gran
;;;5832   b1Hz_ch=0;
00350e  71e6              STRB     r6,[r4,#7]
                  |L1.13584|
;;;5833   }
003510  e8bd9ff0          POP      {r4-r12,pc}
;;;5834   #endif
                          ENDP

                  ext_drv PROC
;;;6079   //-----------------------------------------------
;;;6080   void ext_drv(void)
003514  e92d5ff0          PUSH     {r4-r12,lr}
;;;6081   {
;;;6082   char i;
;;;6083   
;;;6084   
;;;6085   for(i=0;i<NUMSK;i++)
003518  f04f0000          MOV      r0,#0
00351c  4a29              LDR      r2,|L1.13764|
;;;6086   	{
;;;6087   	#ifdef UKU_MGTS
;;;6088   	if(adc_buff_[sk_buff_RSTKM[i]]<2000)
;;;6089   	#endif
;;;6090   	#ifdef UKU_RSTKM
;;;6091   	if(adc_buff_[sk_buff_RSTKM[i]]<2000)
;;;6092   	#endif
;;;6093   	#ifdef UKU_3U
;;;6094   	if(adc_buff_[sk_buff_3U[i]]<2000)
;;;6095   	#endif
;;;6096   	#ifdef UKU_GLONASS
;;;6097   	if(adc_buff_[sk_buff_GLONASS[i]]<2000)
;;;6098   	#endif
;;;6099   	#ifdef UKU_KONTUR
;;;6100   	if(adc_buff_[sk_buff_KONTUR[i]]<2000)
;;;6101   	#endif
;;;6102   	#ifdef UKU_6U
;;;6103   	if(adc_buff_[sk_buff_6U[i]]<2000)
;;;6104   	#endif
;;;6105   	#ifdef UKU_220
;;;6106   	if(adc_buff_[sk_buff_220[i]]<2000)
;;;6107   	#endif
;;;6108   	#ifdef UKU_220_V2
;;;6109   	if(adc_buff_[sk_buff_220[i]]<2000)
;;;6110   	#endif
;;;6111   	#ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;6112   	if(adc_buff_[sk_buff_220[i]]<2000)
;;;6113   	#endif
;;;6114   	#ifdef UKU_TELECORE2015
;;;6115   	if(adc_buff_[sk_buff_TELECORE2015[i]]<2000)	 //TODO
;;;6116   	#endif
;;;6117   
;;;6118   		{
;;;6119   		if(sk_cnt[i]<10)
00351e  4b27              LDR      r3,|L1.13756|
;;;6120   			{
;;;6121   			sk_cnt[i]++;
;;;6122   			if(sk_cnt[i]>=10)
;;;6123   				{
;;;6124   				sk_stat[i]=ssON;
003520  4d27              LDR      r5,|L1.13760|
003522  f04f0a01          MOV      r10,#1
;;;6125   				}
;;;6126   			}
;;;6127   		else 
;;;6128   			{
;;;6129   			sk_cnt[i]=10;
003526  f04f0b0a          MOV      r11,#0xa
00352a  4606              MOV      r6,r0                 ;6085
00352c  f9b24000          LDRSH    r4,[r2,#0]            ;6085
003530  e052              B        |L1.13784|
                  |L1.13618|
003532  4925              LDR      r1,|L1.13768|
003534  4f25              LDR      r7,|L1.13772|
003536  5c09              LDRB     r1,[r1,r0]            ;6112
003538  f9371011          LDRSH    r1,[r7,r1,LSL #1]     ;6112
00353c  f5b16ffa          CMP      r1,#0x7d0             ;6112
003540  da0e              BGE      |L1.13664|
003542  5619              LDRSB    r1,[r3,r0]            ;6119
003544  290a              CMP      r1,#0xa               ;6119
003546  da08              BGE      |L1.13658|
003548  f1010101          ADD      r1,r1,#1              ;6121
00354c  b249              SXTB     r1,r1                 ;6121
00354e  5419              STRB     r1,[r3,r0]            ;6121
003550  290a              CMP      r1,#0xa               ;6122
003552  db3e              BLT      |L1.13778|
003554  f805a000          STRB     r10,[r5,r0]           ;6124
003558  e03b              B        |L1.13778|
                  |L1.13658|
00355a  f803b000          STRB     r11,[r3,r0]
00355e  e038              B        |L1.13778|
                  |L1.13664|
;;;6130   			}
;;;6131                  
;;;6132   		}
;;;6133   	else
;;;6134   		{
;;;6135   		if(sk_cnt[i]>0)
003560  5619              LDRSB    r1,[r3,r0]
003562  2900              CMP      r1,#0
003564  dd34              BLE      |L1.13776|
;;;6136   			{
;;;6137   			sk_cnt[i]--;
003566  f1a10101          SUB      r1,r1,#1
00356a  b249              SXTB     r1,r1
00356c  5419              STRB     r1,[r3,r0]
;;;6138   			if(sk_cnt[i]<=0)
00356e  2900              CMP      r1,#0
003570  dc2f              BGT      |L1.13778|
;;;6139   				{
;;;6140   				sk_stat[i]=ssOFF;
003572  542e              STRB     r6,[r5,r0]
003574  e02d              B        |L1.13778|
003576  0000              DCW      0x0000
                  |L1.13688|
                          DCD      PAR
                  |L1.13692|
                          DCD      NUMIST
                  |L1.13696|
                          DCD      num_necc
                  |L1.13700|
                          DCD      IZMAX
                  |L1.13704|
                          DCD      ||area_number.21||
                  |L1.13708|
                          DCD      speedChIsOn
                  |L1.13712|
                          DCD      speedChrgCurr
                  |L1.13716|
                          DCD      bat
                  |L1.13720|
                          DCD      u_necc
                  |L1.13724|
                          DCD      bps_U
                  |L1.13728|
                          DCD      bps
                  |L1.13732|
                          DCD      mess_data
                  |L1.13736|
                          DCD      load_U
                  |L1.13740|
                          DCD      USIGN
                  |L1.13744|
                          DCD      bIBAT_SMKLBR
                  |L1.13748|
                          DCD      UB0
                  |L1.13752|
                          DCD      UB20
                  |L1.13756|
                          DCD      sk_cnt
                  |L1.13760|
                          DCD      sk_stat
                  |L1.13764|
                          DCD      NUMSK
                  |L1.13768|
                          DCD      ||area_number.15||
                  |L1.13772|
                          DCD      ||.bss||+0x400
                  |L1.13776|
;;;6141   				}
;;;6142   			}
;;;6143   		else 
;;;6144   			{
;;;6145   			sk_cnt[i]=0;
0035d0  541e              STRB     r6,[r3,r0]
                  |L1.13778|
0035d2  f1000001          ADD      r0,r0,#1              ;6085
0035d6  b2c0              UXTB     r0,r0                 ;6085
                  |L1.13784|
0035d8  42a0              CMP      r0,r4                 ;6085
0035da  dbaa              BLT      |L1.13618|
;;;6146   			}
;;;6147   		}
;;;6148   	}
;;;6149   
;;;6150   for(i=0;i<NUMSK;i++)
0035dc  f04f0400          MOV      r4,#0
;;;6151   	{
;;;6152   	if(((SK_SIGN[i]==0)&&(sk_stat[i]==ssON))||((SK_SIGN[i])&&(sk_stat[i]==ssOFF)) )
;;;6153   		{
;;;6154   		if(sk_av_cnt[i]<10)
0035e0  f8df93fc          LDR      r9,|L1.14816|
;;;6155   			{
;;;6156   			sk_av_cnt[i]++;
;;;6157   			if(sk_av_cnt[i]>=10)
;;;6158   				{
;;;6159   				sk_av_stat[i]=sasON;
0035e4  4fff              LDR      r7,|L1.14820|
;;;6160   				}
;;;6161   			}
;;;6162   		else 
;;;6163   			{
;;;6164   			sk_av_cnt[i]=10;
;;;6165   			}
;;;6166   		}
;;;6167   	else
;;;6168   		{
;;;6169   		if(sk_av_cnt[i]>=0)
;;;6170   			{
;;;6171   			sk_av_cnt[i]--;
;;;6172   			if(sk_av_cnt[i]<=0)
;;;6173   				{
;;;6174   				sk_av_stat[i]=sasOFF;
;;;6175   				}
;;;6176   			}
;;;6177   		else 
;;;6178   			{
;;;6179   			sk_av_cnt[i]=0;
;;;6180   			}
;;;6181   		}
;;;6182   
;;;6183   #ifndef UKU_KONTUR
;;;6184   	if(sk_av_stat_old[i]!=sk_av_stat[i])
0035e6  f8df8400          LDR      r8,|L1.14824|
0035ea  e082              B        |L1.14066|
                  |L1.13804|
0035ec  48ff              LDR      r0,|L1.14828|
0035ee  f9300014          LDRSH    r0,[r0,r4,LSL #1]     ;6152
0035f2  b910              CBNZ     r0,|L1.13818|
0035f4  5d29              LDRB     r1,[r5,r4]            ;6152
0035f6  2901              CMP      r1,#1                 ;6152
0035f8  d00f              BEQ      |L1.13850|
                  |L1.13818|
0035fa  b108              CBZ      r0,|L1.13824|
0035fc  5d28              LDRB     r0,[r5,r4]            ;6152
0035fe  b160              CBZ      r0,|L1.13850|
                  |L1.13824|
003600  f9190004          LDRSB    r0,[r9,r4]            ;6169
003604  2800              CMP      r0,#0                 ;6169
003606  db19              BLT      |L1.13884|
003608  f1a00001          SUB      r0,r0,#1              ;6171
00360c  b240              SXTB     r0,r0                 ;6171
00360e  f8090004          STRB     r0,[r9,r4]            ;6171
003612  2800              CMP      r0,#0                 ;6172
003614  dc14              BGT      |L1.13888|
003616  553e              STRB     r6,[r7,r4]            ;6174
003618  e012              B        |L1.13888|
                  |L1.13850|
00361a  f9190004          LDRSB    r0,[r9,r4]            ;6154
00361e  280a              CMP      r0,#0xa               ;6154
003620  da09              BGE      |L1.13878|
003622  f1000001          ADD      r0,r0,#1              ;6156
003626  b240              SXTB     r0,r0                 ;6156
003628  f8090004          STRB     r0,[r9,r4]            ;6156
00362c  280a              CMP      r0,#0xa               ;6157
00362e  db07              BLT      |L1.13888|
003630  f807a004          STRB     r10,[r7,r4]           ;6159
003634  e004              B        |L1.13888|
                  |L1.13878|
003636  f809b004          STRB     r11,[r9,r4]           ;6164
00363a  e001              B        |L1.13888|
                  |L1.13884|
00363c  f8096004          STRB     r6,[r9,r4]            ;6179
                  |L1.13888|
003640  f8181004          LDRB     r1,[r8,r4]
003644  5d38              LDRB     r0,[r7,r4]
003646  4281              CMP      r1,r0
003648  d04d              BEQ      |L1.14054|
;;;6185   		{
;;;6186   		plazma_sk++;
00364a  4ae9              LDR      r2,|L1.14832|
00364c  8e91              LDRH     r1,[r2,#0x34]  ; plazma_sk
00364e  f1010101          ADD      r1,r1,#1
003652  8691              STRH     r1,[r2,#0x34]
;;;6187   		if(sk_av_stat[i]==sasON)
003654  2801              CMP      r0,#1
003656  d007              BEQ      |L1.13928|
;;;6188   			{
;;;6189   			if(i==0)snmp_trap_send("SK #1 Alarm",15,1,1);
;;;6190   			else if(i==1)snmp_trap_send("SK #2 Alarm",15,2,1);
;;;6191   			else if(i==2)snmp_trap_send("SK #3 Alarm",15,3,1);
;;;6192   			else if(i==3)snmp_trap_send("SK #4 Alarm",15,4,1);
;;;6193   			}
;;;6194   		else 
;;;6195   			{
;;;6196   			if(i==0)snmp_trap_send("SK #1 Alarm is off",15,1,0);
003658  b354              CBZ      r4,|L1.14000|
;;;6197   			else if(i==1)snmp_trap_send("SK #2 Alarm is off",15,2,0);
00365a  2c01              CMP      r4,#1
00365c  d02f              BEQ      |L1.14014|
;;;6198   			else if(i==2)snmp_trap_send("SK #3 Alarm is off",15,3,0);
00365e  2c02              CMP      r4,#2
003660  d034              BEQ      |L1.14028|
;;;6199   			else if(i==3)snmp_trap_send("SK #4 Alarm is off",15,4,0);
003662  2c03              CMP      r4,#3
003664  d039              BEQ      |L1.14042|
003666  e03e              B        |L1.14054|
                  |L1.13928|
003668  b134              CBZ      r4,|L1.13944|
00366a  2c01              CMP      r4,#1                 ;6190
00366c  d00b              BEQ      |L1.13958|
00366e  2c02              CMP      r4,#2                 ;6191
003670  d010              BEQ      |L1.13972|
003672  2c03              CMP      r4,#3                 ;6192
003674  d015              BEQ      |L1.13986|
003676  e036              B        |L1.14054|
                  |L1.13944|
003678  2301              MOVS     r3,#1                 ;6189
00367a  461a              MOV      r2,r3                 ;6189
00367c  210f              MOVS     r1,#0xf               ;6189
00367e  a0dd              ADR      r0,|L1.14836|
003680  f7fffffe          BL       snmp_trap_send
003684  e02f              B        |L1.14054|
                  |L1.13958|
003686  2301              MOVS     r3,#1                 ;6190
003688  2202              MOVS     r2,#2                 ;6190
00368a  210f              MOVS     r1,#0xf               ;6190
00368c  a0dc              ADR      r0,|L1.14848|
00368e  f7fffffe          BL       snmp_trap_send
003692  e028              B        |L1.14054|
                  |L1.13972|
003694  2301              MOVS     r3,#1                 ;6191
003696  2203              MOVS     r2,#3                 ;6191
003698  210f              MOVS     r1,#0xf               ;6191
00369a  a0dc              ADR      r0,|L1.14860|
00369c  f7fffffe          BL       snmp_trap_send
0036a0  e021              B        |L1.14054|
                  |L1.13986|
0036a2  2301              MOVS     r3,#1                 ;6192
0036a4  2204              MOVS     r2,#4                 ;6192
0036a6  210f              MOVS     r1,#0xf               ;6192
0036a8  a0db              ADR      r0,|L1.14872|
0036aa  f7fffffe          BL       snmp_trap_send
0036ae  e01a              B        |L1.14054|
                  |L1.14000|
0036b0  2300              MOVS     r3,#0                 ;6196
0036b2  2201              MOVS     r2,#1                 ;6196
0036b4  210f              MOVS     r1,#0xf               ;6196
0036b6  a0db              ADR      r0,|L1.14884|
0036b8  f7fffffe          BL       snmp_trap_send
0036bc  e013              B        |L1.14054|
                  |L1.14014|
0036be  2300              MOVS     r3,#0                 ;6197
0036c0  2202              MOVS     r2,#2                 ;6197
0036c2  210f              MOVS     r1,#0xf               ;6197
0036c4  a0dc              ADR      r0,|L1.14904|
0036c6  f7fffffe          BL       snmp_trap_send
0036ca  e00c              B        |L1.14054|
                  |L1.14028|
0036cc  2300              MOVS     r3,#0                 ;6198
0036ce  2203              MOVS     r2,#3                 ;6198
0036d0  210f              MOVS     r1,#0xf               ;6198
0036d2  a0de              ADR      r0,|L1.14924|
0036d4  f7fffffe          BL       snmp_trap_send
0036d8  e005              B        |L1.14054|
                  |L1.14042|
0036da  2300              MOVS     r3,#0
0036dc  2204              MOVS     r2,#4
0036de  210f              MOVS     r1,#0xf
0036e0  a0df              ADR      r0,|L1.14944|
0036e2  f7fffffe          BL       snmp_trap_send
                  |L1.14054|
;;;6200   			}
;;;6201   	 	}
;;;6202   #endif
;;;6203   
;;;6204   #ifdef UKU_KONTUR
;;;6205   	if(sk_av_stat_old[i]!=sk_av_stat[i])
;;;6206   		{
;;;6207   		plazma_sk++;
;;;6208   		if(sk_av_stat[i]==sasON)
;;;6209   			{
;;;6210   			if(i==0)snmp_trap_send("Door is opened",15,1,1);
;;;6211   			else if(i==1)snmp_trap_send("Smoke Alarm",15,2,1);
;;;6212   			else if(i==2)snmp_trap_send("Shock Sensor Alarm",15,3,1);
;;;6213   			else if(i==3)snmp_trap_send("SK #4 Alarm",15,4,1);
;;;6214   			}
;;;6215   		else 
;;;6216   			{
;;;6217   			if(i==0)snmp_trap_send("Door is closed",15,1,0);
;;;6218   			else if(i==1)snmp_trap_send("Smoke Alarm is off",15,2,0);
;;;6219   			else if(i==2)snmp_trap_send("Shock Sensor Alarm is off",15,3,0);
;;;6220   			else if(i==3)snmp_trap_send("SK #4 Alarm is off",15,4,0);
;;;6221   			}
;;;6222   	 	}
;;;6223   #endif
;;;6224   	sk_av_stat_old[i]=sk_av_stat[i];
0036e6  5d38              LDRB     r0,[r7,r4]
0036e8  f8080004          STRB     r0,[r8,r4]
0036ec  f1040401          ADD      r4,r4,#1              ;6150
0036f0  b2e4              UXTB     r4,r4                 ;6150
                  |L1.14066|
0036f2  48e0              LDR      r0,|L1.14964|
0036f4  f9b00000          LDRSH    r0,[r0,#0]            ;6150  ; NUMSK
0036f8  4284              CMP      r4,r0                 ;6150
0036fa  f6ffaf77          BLT      |L1.13804|
;;;6225   	}
;;;6226   }
0036fe  e707              B        |L1.13584|
;;;6227   
                          ENDP

                  zar_superviser_start PROC
;;;6264   //-----------------------------------------------
;;;6265   void zar_superviser_start(void)
003700  4add              LDR      r2,|L1.14968|
;;;6266   {
;;;6267   sign_U[0]=1;
003702  f04f0001          MOV      r0,#1
003706  7010              STRB     r0,[r2,#0]
;;;6268   sign_I[0]=1;
003708  49dc              LDR      r1,|L1.14972|
00370a  7008              STRB     r0,[r1,#0]
;;;6269   sign_U[1]=1;
00370c  7050              STRB     r0,[r2,#1]
;;;6270   sign_I[1]=1;
00370e  7048              STRB     r0,[r1,#1]
;;;6271   
;;;6272   }
003710  4770              BX       lr
;;;6273   
                          ENDP

                  zar_superviser_drv PROC
;;;6229   //-----------------------------------------------
;;;6230   void zar_superviser_drv(void)
003712  e92d5ff0          PUSH     {r4-r12,lr}
;;;6231   {
;;;6232   
;;;6233   if(((bat[0]._Ub>u_necc_up) || (bat[0]._Ub<u_necc_dn))&&(main_kb_cnt<((TBAT*60)-30))&&(main_kb_cnt>((TBAT*60)-150))) sign_U[0]=0;
003716  48db              LDR      r0,|L1.14980|
003718  f8df936c          LDR      r9,|L1.14984|
00371c  f8df8360          LDR      r8,|L1.14976|
003720  f9b0c000          LDRSH    r12,[r0,#0]  ; u_necc_up
003724  f9b90000          LDRSH    r0,[r9,#0]
003728  4cb1              LDR      r4,|L1.14832|
00372a  ebc01100          RSB      r1,r0,r0,LSL #4
00372e  f9b87002          LDRSH    r7,[r8,#2]  ; bat
003732  f06f0a1d          MVN      r10,#0x1d
003736  f06f0b95          MVN      r11,#0x95
00373a  2500              MOVS     r5,#0
00373c  4ece              LDR      r6,|L1.14968|
00373e  f9b40040          LDRSH    r0,[r4,#0x40]
003742  eb0a0281          ADD      r2,r10,r1,LSL #2
003746  eb0b0381          ADD      r3,r11,r1,LSL #2
00374a  4567              CMP      r7,r12
00374c  dc05              BGT      |L1.14170|
00374e  f8dfc33c          LDR      r12,|L1.14988|
003752  f9bcc000          LDRSH    r12,[r12,#0]  ; u_necc_dn
003756  4567              CMP      r7,r12
003758  da04              BGE      |L1.14180|
                  |L1.14170|
00375a  4282              CMP      r2,r0
00375c  dd02              BLE      |L1.14180|
00375e  4283              CMP      r3,r0
003760  da00              BGE      |L1.14180|
003762  7035              STRB     r5,[r6,#0]
                  |L1.14180|
;;;6234   
;;;6235   if(((bat[0]._Ib>(2*IKB)) || (bat[0]._Ib<(-IKB*2))) &&(main_kb_cnt<((TBAT*60)-30))&&(main_kb_cnt>((TBAT*60)-150))) sign_I[0]=0;
003764  4fca              LDR      r7,|L1.14992|
003766  f9b8c008          LDRSH    r12,[r8,#8]  ; bat
00376a  f9b7e000          LDRSH    lr,[r7,#0]  ; IKB
00376e  4fc3              LDR      r7,|L1.14972|
003770  ebbc0f4e          CMP      r12,lr,LSL #1
003774  dc04              BGT      |L1.14208|
003776  f1ce0e00          RSB      lr,lr,#0
00377a  ebbc0f4e          CMP      r12,lr,LSL #1
00377e  da04              BGE      |L1.14218|
                  |L1.14208|
003780  4282              CMP      r2,r0
003782  dd02              BLE      |L1.14218|
003784  4283              CMP      r3,r0
003786  da00              BGE      |L1.14218|
003788  703d              STRB     r5,[r7,#0]
                  |L1.14218|
;;;6236   																 
;;;6237   if((main_kb_cnt==((TBAT*60)-10)) &&(spc_stat==spcOFF))
00378a  f06f0209          MVN      r2,#9
00378e  eb020181          ADD      r1,r2,r1,LSL #2
003792  4281              CMP      r1,r0
003794  d120              BNE      |L1.14296|
003796  7ce0              LDRB     r0,[r4,#0x13]  ; spc_stat
003798  b9f0              CBNZ     r0,|L1.14296|
;;;6238   	{
;;;6239   	if((sign_U[0]==1) && (sign_I[0]==1) && (lc640_read_int(EE_BAT1_ZAR_CNT)!=BAT_C_REAL[0]) && (NUMBAT) && (!(bat[0]._av&1)))
00379a  7830              LDRB     r0,[r6,#0]  ; sign_U
00379c  2801              CMP      r0,#1
00379e  d11b              BNE      |L1.14296|
0037a0  7838              LDRB     r0,[r7,#0]  ; sign_I
0037a2  2801              CMP      r0,#1
0037a4  d118              BNE      |L1.14296|
0037a6  f44f70d6          MOV      r0,#0x1ac
0037aa  f7fffffe          BL       lc640_read_int
0037ae  49b9              LDR      r1,|L1.14996|
0037b0  f9b11000          LDRSH    r1,[r1,#0]  ; BAT_C_REAL
0037b4  4288              CMP      r0,r1
0037b6  d00f              BEQ      |L1.14296|
0037b8  48b7              LDR      r0,|L1.15000|
0037ba  8800              LDRH     r0,[r0,#0]  ; NUMBAT
0037bc  b160              CBZ      r0,|L1.14296|
0037be  f898003d          LDRB     r0,[r8,#0x3d]  ; bat
0037c2  07c0              LSLS     r0,r0,#31
0037c4  d108              BNE      |L1.14296|
;;;6240   		{
;;;6241   		lc640_write_int(EE_BAT1_ZAR_CNT,BAT_C_REAL[0]);
0037c6  f44f70d6          MOV      r0,#0x1ac
0037ca  f7fffffe          BL       lc640_write_int
;;;6242   		superviser_cnt++;
0037ce  48b3              LDR      r0,|L1.15004|
0037d0  7801              LDRB     r1,[r0,#0]  ; superviser_cnt
0037d2  f1010101          ADD      r1,r1,#1
0037d6  7001              STRB     r1,[r0,#0]
                  |L1.14296|
;;;6243   		}
;;;6244   	
;;;6245   	}
;;;6246   
;;;6247   if(((bat[0]._Ub>u_necc_up) || (bat[1]._Ub<u_necc_dn))&&(main_kb_cnt<((TBAT*60)-30))&&(main_kb_cnt>((TBAT*60)-150))) sign_U[1]=0;
0037d8  48aa              LDR      r0,|L1.14980|
0037da  f9b81002          LDRSH    r1,[r8,#2]  ; bat
0037de  f9b00000          LDRSH    r0,[r0,#0]  ; u_necc_up
0037e2  4281              CMP      r1,r0
0037e4  dc06              BGT      |L1.14324|
0037e6  48a9              LDR      r0,|L1.14988|
0037e8  f9b8104e          LDRSH    r1,[r8,#0x4e]  ; bat
0037ec  f9b00000          LDRSH    r0,[r0,#0]  ; u_necc_dn
0037f0  4281              CMP      r1,r0
0037f2  da0e              BGE      |L1.14354|
                  |L1.14324|
0037f4  f9b90000          LDRSH    r0,[r9,#0]  ; TBAT
0037f8  f9b41040          LDRSH    r1,[r4,#0x40]  ; main_kb_cnt
0037fc  ebc01000          RSB      r0,r0,r0,LSL #4
003800  eb0a0280          ADD      r2,r10,r0,LSL #2
003804  428a              CMP      r2,r1
003806  dd04              BLE      |L1.14354|
003808  eb0b0080          ADD      r0,r11,r0,LSL #2
00380c  4288              CMP      r0,r1
00380e  da00              BGE      |L1.14354|
003810  7075              STRB     r5,[r6,#1]
                  |L1.14354|
;;;6248   
;;;6249   if(((bat[1]._Ib>(2*IKB)) || (bat[1]._Ib<(-IKB*2))) &&(main_kb_cnt<((TBAT*60)-30))&&(main_kb_cnt>((TBAT*60)-150))) sign_I[1]=0;
003812  499f              LDR      r1,|L1.14992|
003814  f9b80054          LDRSH    r0,[r8,#0x54]  ; bat
003818  f9b11000          LDRSH    r1,[r1,#0]  ; IKB
00381c  ebb00f41          CMP      r0,r1,LSL #1
003820  dc03              BGT      |L1.14378|
003822  4249              RSBS     r1,r1,#0
003824  ebb00f41          CMP      r0,r1,LSL #1
003828  da0e              BGE      |L1.14408|
                  |L1.14378|
00382a  f9b90000          LDRSH    r0,[r9,#0]  ; TBAT
00382e  f9b41040          LDRSH    r1,[r4,#0x40]  ; main_kb_cnt
003832  ebc01000          RSB      r0,r0,r0,LSL #4
003836  eb0a0280          ADD      r2,r10,r0,LSL #2
00383a  428a              CMP      r2,r1
00383c  dd04              BLE      |L1.14408|
00383e  eb0b0080          ADD      r0,r11,r0,LSL #2
003842  4288              CMP      r0,r1
003844  da00              BGE      |L1.14408|
003846  707d              STRB     r5,[r7,#1]
                  |L1.14408|
;;;6250   																 
;;;6251   if((main_kb_cnt==((TBAT*60)-10)) &&(spc_stat==spcOFF))
003848  f9b90000          LDRSH    r0,[r9,#0]  ; TBAT
00384c  ebc01100          RSB      r1,r0,r0,LSL #4
003850  f06f0009          MVN      r0,#9
003854  eb000081          ADD      r0,r0,r1,LSL #2
003858  f9b41040          LDRSH    r1,[r4,#0x40]  ; main_kb_cnt
00385c  4288              CMP      r0,r1
00385e  d121              BNE      |L1.14500|
003860  7ce0              LDRB     r0,[r4,#0x13]  ; spc_stat
003862  b9f8              CBNZ     r0,|L1.14500|
;;;6252   	{
;;;6253   	if((sign_U[1]==1) && (sign_I[1]==1) && (lc640_read_int(EE_BAT2_ZAR_CNT)!=BAT_C_REAL[1]) && (NUMBAT==2) && (!(bat[1]._av&1)))
003864  7870              LDRB     r0,[r6,#1]  ; sign_U
003866  2801              CMP      r0,#1
003868  d11c              BNE      |L1.14500|
00386a  7878              LDRB     r0,[r7,#1]  ; sign_I
00386c  2801              CMP      r0,#1
00386e  d119              BNE      |L1.14500|
003870  f44f75e5          MOV      r5,#0x1ca
003874  4628              MOV      r0,r5
003876  f7fffffe          BL       lc640_read_int
00387a  4986              LDR      r1,|L1.14996|
00387c  f9b11002          LDRSH    r1,[r1,#2]  ; BAT_C_REAL
003880  4288              CMP      r0,r1
003882  d00f              BEQ      |L1.14500|
003884  4884              LDR      r0,|L1.15000|
003886  8800              LDRH     r0,[r0,#0]  ; NUMBAT
003888  2802              CMP      r0,#2
00388a  d10b              BNE      |L1.14500|
00388c  f8980089          LDRB     r0,[r8,#0x89]  ; bat
003890  07c0              LSLS     r0,r0,#31
003892  d107              BNE      |L1.14500|
;;;6254   		{
;;;6255   		lc640_write_int(EE_BAT2_ZAR_CNT,BAT_C_REAL[1]);
003894  4628              MOV      r0,r5
003896  f7fffffe          BL       lc640_write_int
;;;6256   		superviser_cnt++;
00389a  4880              LDR      r0,|L1.15004|
00389c  7801              LDRB     r1,[r0,#0]  ; superviser_cnt
00389e  f1010101          ADD      r1,r1,#1
0038a2  7001              STRB     r1,[r0,#0]
                  |L1.14500|
;;;6257   		}
;;;6258   	
;;;6259   	}
;;;6260   
;;;6261   if(main_kb_cnt==((TBAT*60)-2)) zar_superviser_start();
0038a4  f9b90000          LDRSH    r0,[r9,#0]  ; TBAT
0038a8  f06f0101          MVN      r1,#1
0038ac  ebc01000          RSB      r0,r0,r0,LSL #4
0038b0  eb010080          ADD      r0,r1,r0,LSL #2
0038b4  f9b41040          LDRSH    r1,[r4,#0x40]  ; main_kb_cnt
0038b8  4288              CMP      r0,r1
0038ba  d102              BNE      |L1.14530|
0038bc  e8bd5ff0          POP      {r4-r12,lr}
0038c0  e7fe              B        zar_superviser_start
                  |L1.14530|
;;;6262   }
0038c2  e625              B        |L1.13584|
;;;6263   
                          ENDP

                  npn_hndl PROC
;;;6274   //-----------------------------------------------
;;;6275   void npn_hndl(void)
0038c4  e92d03f0          PUSH     {r4-r9}
;;;6276   {
;;;6277   if(NPN_OUT!=npnoOFF)
0038c8  4875              LDR      r0,|L1.15008|
;;;6278   	{
;;;6279   /*	if(NPN_SIGN==npnsAVNET)
;;;6280   		{
;;;6281   		if(net_av==1)
;;;6282   			{
;;;6283   			if(npn_tz_cnt<TZNPN)
;;;6284   				{
;;;6285   				npn_tz_cnt++;
;;;6286   				if(npn_tz_cnt==TZNPN)
;;;6287   					{
;;;6288   					npn_stat=npnsOFF;
;;;6289   					}
;;;6290   				}
;;;6291   			}
;;;6292   		else
;;;6293   			{
;;;6294   			if(npn_tz_cnt)
;;;6295   				{
;;;6296   				npn_tz_cnt--;
;;;6297   				if(npn_tz_cnt==0)
;;;6298   					{
;;;6299   					npn_stat=npnsON;
;;;6300   					}
;;;6301   				}
;;;6302   			}
;;;6303   		}*/
;;;6304   /*	if(NPN_SIGN==npnsULOAD)
;;;6305   		{
;;;6306   		if(load_U<UONPN)
;;;6307   			{
;;;6308   			if(npn_tz_cnt<TZNPN)
;;;6309   				{
;;;6310   				npn_tz_cnt++;
;;;6311   				if(npn_tz_cnt==TZNPN)
;;;6312   					{
;;;6313   					npn_stat=npnsOFF;
;;;6314   					}
;;;6315   				}
;;;6316   			}
;;;6317   		else if(load_U>UVNPN)
;;;6318   			{
;;;6319   			if(npn_tz_cnt)
;;;6320   				{
;;;6321   				npn_tz_cnt--;
;;;6322   				if(npn_tz_cnt==0)
;;;6323   					{
;;;6324   					npn_stat=npnsON;
;;;6325   					}
;;;6326   				}
;;;6327   			}
;;;6328   		}*/
;;;6329   
;;;6330   	if((load_U<UONPN)&&((net_Ua<UMN)||(net_Ub<UMN)||(net_Uc<UMN)))
;;;6331   		{
;;;6332   		if(npn_tz_cnt<TZNPN)
0038ca  4f76              LDR      r7,|L1.15012|
;;;6333   			{
;;;6334   			npn_tz_cnt++;
;;;6335   			if(npn_tz_cnt==TZNPN)
;;;6336   				{
;;;6337   				npn_stat=npnsOFF;
0038cc  4e76              LDR      r6,|L1.15016|
0038ce  7800              LDRB     r0,[r0,#0]            ;6277  ; NPN_OUT
0038d0  f04f0c00          MOV      r12,#0                ;6277
;;;6338   				}
;;;6339   			}
;;;6340   		}
;;;6341   	else if((load_U>UVNPN)&&(net_Ua>UMN)&&(net_Ub>UMN)&&(net_Uc>UMN))
;;;6342   		{
;;;6343   		if(npn_tz_cnt)
;;;6344   			{
;;;6345   			npn_tz_cnt--;
;;;6346   			if(npn_tz_cnt==0)
;;;6347   				{
;;;6348   				npn_stat=npnsON;
0038d4  f04f0801          MOV      r8,#1
0038d8  b3e8              CBZ      r0,|L1.14678|
0038da  4874              LDR      r0,|L1.15020|
0038dc  4639              MOV      r1,r7                 ;6332
0038de  f9b05000          LDRSH    r5,[r0,#0]            ;6330  ; load_U
0038e2  4873              LDR      r0,|L1.15024|
0038e4  f9b11000          LDRSH    r1,[r1,#0]            ;6332
0038e8  f9b09000          LDRSH    r9,[r0,#0]            ;6330  ; UONPN
0038ec  4871              LDR      r0,|L1.15028|
0038ee  454d              CMP      r5,r9                 ;6330
0038f0  f9b02000          LDRSH    r2,[r0,#0]            ;6330
0038f4  4870              LDR      r0,|L1.15032|
0038f6  f9b03000          LDRSH    r3,[r0,#0]            ;6330
0038fa  4870              LDR      r0,|L1.15036|
0038fc  f9b04000          LDRSH    r4,[r0,#0]            ;6330
003900  486f              LDR      r0,|L1.15040|
003902  f9b00000          LDRSH    r0,[r0,#0]            ;6330
003906  da13              BGE      |L1.14640|
003908  4282              CMP      r2,r0                 ;6330
00390a  db03              BLT      |L1.14612|
00390c  4283              CMP      r3,r0                 ;6330
00390e  db01              BLT      |L1.14612|
003910  4284              CMP      r4,r0                 ;6330
003912  da0d              BGE      |L1.14640|
                  |L1.14612|
003914  486b              LDR      r0,|L1.15044|
003916  f9b02000          LDRSH    r2,[r0,#0]            ;6332  ; TZNPN
00391a  4291              CMP      r1,r2                 ;6332
00391c  da23              BGE      |L1.14694|
00391e  f1010101          ADD      r1,r1,#1              ;6334
003922  b208              SXTH     r0,r1                 ;6334
003924  8038              STRH     r0,[r7,#0]            ;6334
003926  4290              CMP      r0,r2                 ;6335
003928  d11d              BNE      |L1.14694|
00392a  f886c000          STRB     r12,[r6,#0]           ;6337
00392e  e01a              B        |L1.14694|
                  |L1.14640|
003930  f8dfc194          LDR      r12,|L1.15048|
003934  f9bcc000          LDRSH    r12,[r12,#0]          ;6341  ; UVNPN
003938  4565              CMP      r5,r12                ;6341
00393a  dd14              BLE      |L1.14694|
00393c  4282              CMP      r2,r0                 ;6341
00393e  dd12              BLE      |L1.14694|
003940  4283              CMP      r3,r0                 ;6341
003942  dd10              BLE      |L1.14694|
003944  4284              CMP      r4,r0                 ;6341
003946  dd0e              BLE      |L1.14694|
003948  b169              CBZ      r1,|L1.14694|
00394a  f1a10101          SUB      r1,r1,#1              ;6345
00394e  b208              SXTH     r0,r1                 ;6345
003950  8038              STRH     r0,[r7,#0]            ;6345
003952  b940              CBNZ     r0,|L1.14694|
003954  e000              B        |L1.14680|
                  |L1.14678|
003956  e002              B        |L1.14686|
                  |L1.14680|
003958  f8868000          STRB     r8,[r6,#0]
00395c  e003              B        |L1.14694|
                  |L1.14686|
;;;6349   				}
;;;6350   			}
;;;6351   		}
;;;6352   	}
;;;6353   else
;;;6354   	{
;;;6355   	npn_tz_cnt=0;
00395e  f8a7c000          STRH     r12,[r7,#0]
;;;6356   	npn_stat=npnsON;
003962  f8868000          STRB     r8,[r6,#0]
                  |L1.14694|
;;;6357   	}
;;;6358   
;;;6359   if(npn_stat==npnsOFF) mess_send(MESS2RELE_HNDL,PARAM_RELE_NPN,1,15);
003966  7830              LDRB     r0,[r6,#0]  ; npn_stat
003968  2800              CMP      r0,#0
00396a  d107              BNE      |L1.14716|
00396c  e8bd03f0          POP      {r4-r9}
003970  230f              MOVS     r3,#0xf
003972  2201              MOVS     r2,#1
003974  216e              MOVS     r1,#0x6e
003976  20d2              MOVS     r0,#0xd2
003978  f7ffbffe          B.W      mess_send
                  |L1.14716|
;;;6360   
;;;6361   
;;;6362   }
00397c  e8bd03f0          POP      {r4-r9}
003980  4770              BX       lr
;;;6363   
                          ENDP

                  speedChargeHndl PROC
;;;6364   //-----------------------------------------------
;;;6365   void speedChargeHndl(void)
003982  b5f8              PUSH     {r3-r7,lr}
;;;6366   {
;;;6367   if(speedChIsOn)
003984  4f51              LDR      r7,|L1.15052|
;;;6368   	{
;;;6369   	speedChTimeCnt++;
;;;6370   	if(speedChTimeCnt>=((signed long)speedChrgTimeInHour*3600L))
;;;6371   		{
;;;6372   		speedChIsOn=0;
;;;6373   		}
;;;6374   	if(speedChrgBlckStat)
003986  4d52              LDR      r5,|L1.15056|
003988  2400              MOVS     r4,#0                 ;6367
00398a  8838              LDRH     r0,[r7,#0]            ;6367  ; speedChIsOn
00398c  b198              CBZ      r0,|L1.14774|
00398e  4a51              LDR      r2,|L1.15060|
003990  6811              LDR      r1,[r2,#0]            ;6369  ; speedChTimeCnt
003992  f1010101          ADD      r1,r1,#1              ;6369
003996  6011              STR      r1,[r2,#0]            ;6369  ; speedChTimeCnt
003998  484f              LDR      r0,|L1.15064|
00399a  f9b00000          LDRSH    r0,[r0,#0]            ;6370  ; speedChrgTimeInHour
00399e  ebc01340          RSB      r3,r0,r0,LSL #5       ;6370
0039a2  ebc32000          RSB      r0,r3,r0,LSL #8       ;6370
0039a6  ebb11f00          CMP      r1,r0,LSL #4          ;6370
0039aa  db00              BLT      |L1.14766|
0039ac  803c              STRH     r4,[r7,#0]            ;6372
                  |L1.14766|
0039ae  8828              LDRH     r0,[r5,#0]  ; speedChrgBlckStat
0039b0  b108              CBZ      r0,|L1.14774|
;;;6375   		{
;;;6376   		speedChIsOn=0;
0039b2  803c              STRH     r4,[r7,#0]
;;;6377   		speedChTimeCnt=0;
0039b4  6014              STR      r4,[r2,#0]  ; speedChTimeCnt
                  |L1.14774|
;;;6378   		}
;;;6379   	}
;;;6380   
;;;6381   
;;;6382   
;;;6383   if(speedChrgAvtEn)
0039b6  4849              LDR      r0,|L1.15068|
;;;6384   	{
;;;6385   	if(!speedChIsOn)
;;;6386   		{
;;;6387   		if((load_U<u_necc)&&((u_necc-load_U)>speedChrgDU)&&(abs(Ib_ips_termokompensat/10-IZMAX)<5)&&(!speedChrgBlckStat))
;;;6388   			{
;;;6389   			speedChIsOn=1;
0039b8  2601              MOVS     r6,#1
0039ba  8800              LDRH     r0,[r0,#0]            ;6383  ; speedChrgAvtEn
0039bc  b178              CBZ      r0,|L1.14814|
0039be  8838              LDRH     r0,[r7,#0]            ;6385  ; speedChIsOn
0039c0  b968              CBNZ     r0,|L1.14814|
0039c2  483a              LDR      r0,|L1.15020|
0039c4  4946              LDR      r1,|L1.15072|
0039c6  f9b00000          LDRSH    r0,[r0,#0]            ;6387  ; load_U
0039ca  f9b11000          LDRSH    r1,[r1,#0]            ;6387  ; u_necc
0039ce  4288              CMP      r0,r1                 ;6387
0039d0  da05              BGE      |L1.14814|
0039d2  1a08              SUBS     r0,r1,r0              ;6387
0039d4  4943              LDR      r1,|L1.15076|
0039d6  f9b11000          LDRSH    r1,[r1,#0]            ;6387  ; speedChrgDU
0039da  4288              CMP      r0,r1                 ;6387
0039dc  e084              B        |L1.15080|
                  |L1.14814|
0039de  e095              B        |L1.15116|
                  |L1.14816|
                          DCD      sk_av_cnt
                  |L1.14820|
                          DCD      sk_av_stat
                  |L1.14824|
                          DCD      sk_av_stat_old
                  |L1.14828|
                          DCD      SK_SIGN
                  |L1.14832|
                          DCD      ||area_number.21||
                  |L1.14836|
0039f4  534b2023          DCB      "SK #1 Alarm",0
0039f8  3120416c
0039fc  61726d00
                  |L1.14848|
003a00  534b2023          DCB      "SK #2 Alarm",0
003a04  3220416c
003a08  61726d00
                  |L1.14860|
003a0c  534b2023          DCB      "SK #3 Alarm",0
003a10  3320416c
003a14  61726d00
                  |L1.14872|
003a18  534b2023          DCB      "SK #4 Alarm",0
003a1c  3420416c
003a20  61726d00
                  |L1.14884|
003a24  534b2023          DCB      "SK #1 Alarm is off",0
003a28  3120416c
003a2c  61726d20
003a30  6973206f
003a34  666600  
003a37  00                DCB      0
                  |L1.14904|
003a38  534b2023          DCB      "SK #2 Alarm is off",0
003a3c  3220416c
003a40  61726d20
003a44  6973206f
003a48  666600  
003a4b  00                DCB      0
                  |L1.14924|
003a4c  534b2023          DCB      "SK #3 Alarm is off",0
003a50  3320416c
003a54  61726d20
003a58  6973206f
003a5c  666600  
003a5f  00                DCB      0
                  |L1.14944|
003a60  534b2023          DCB      "SK #4 Alarm is off",0
003a64  3420416c
003a68  61726d20
003a6c  6973206f
003a70  666600  
003a73  00                DCB      0
                  |L1.14964|
                          DCD      NUMSK
                  |L1.14968|
                          DCD      sign_U
                  |L1.14972|
                          DCD      sign_I
                  |L1.14976|
                          DCD      bat
                  |L1.14980|
                          DCD      u_necc_up
                  |L1.14984|
                          DCD      TBAT
                  |L1.14988|
                          DCD      u_necc_dn
                  |L1.14992|
                          DCD      IKB
                  |L1.14996|
                          DCD      BAT_C_REAL
                  |L1.15000|
                          DCD      NUMBAT
                  |L1.15004|
                          DCD      superviser_cnt
                  |L1.15008|
                          DCD      NPN_OUT
                  |L1.15012|
                          DCD      npn_tz_cnt
                  |L1.15016|
                          DCD      npn_stat
                  |L1.15020|
                          DCD      load_U
                  |L1.15024|
                          DCD      UONPN
                  |L1.15028|
                          DCD      net_Ua
                  |L1.15032|
                          DCD      net_Ub
                  |L1.15036|
                          DCD      net_Uc
                  |L1.15040|
                          DCD      UMN
                  |L1.15044|
                          DCD      TZNPN
                  |L1.15048|
                          DCD      UVNPN
                  |L1.15052|
                          DCD      speedChIsOn
                  |L1.15056|
                          DCD      speedChrgBlckStat
                  |L1.15060|
                          DCD      speedChTimeCnt
                  |L1.15064|
                          DCD      speedChrgTimeInHour
                  |L1.15068|
                          DCD      speedChrgAvtEn
                  |L1.15072|
                          DCD      u_necc
                  |L1.15076|
                          DCD      speedChrgDU
                  |L1.15080|
003ae8  dd10              BLE      |L1.15116|
003aea  48ff              LDR      r0,|L1.16104|
003aec  210a              MOVS     r1,#0xa               ;6387
003aee  f9b00000          LDRSH    r0,[r0,#0]            ;6387  ; Ib_ips_termokompensat
003af2  fb90f0f1          SDIV     r0,r0,r1              ;6387
003af6  49fd              LDR      r1,|L1.16108|
003af8  8809              LDRH     r1,[r1,#0]            ;6387  ; IZMAX
003afa  1a40              SUBS     r0,r0,r1              ;6387
003afc  b200              SXTH     r0,r0                 ;6387
003afe  f7fffffe          BL       abs
003b02  2805              CMP      r0,#5                 ;6387
003b04  da02              BGE      |L1.15116|
003b06  8828              LDRH     r0,[r5,#0]            ;6387  ; speedChrgBlckStat
003b08  b900              CBNZ     r0,|L1.15116|
003b0a  803e              STRH     r6,[r7,#0]
                  |L1.15116|
;;;6390   			}
;;;6391   		}
;;;6392   	}
;;;6393   
;;;6394   
;;;6395   
;;;6396   if((speedChrgBlckSrc!=1)&&(speedChrgBlckSrc!=2)) speedChrgBlckStat=0;
003b0c  48f8              LDR      r0,|L1.16112|
003b0e  f9b00000          LDRSH    r0,[r0,#0]  ; speedChrgBlckSrc
003b12  2801              CMP      r0,#1
003b14  d003              BEQ      |L1.15134|
003b16  2802              CMP      r0,#2
003b18  d001              BEQ      |L1.15134|
003b1a  802c              STRH     r4,[r5,#0]
003b1c  e026              B        |L1.15212|
                  |L1.15134|
;;;6397   else
;;;6398   	{
;;;6399   	speedChrgBlckStat=0;
003b1e  802c              STRH     r4,[r5,#0]
;;;6400   	if(speedChrgBlckSrc==1)
;;;6401   		{
;;;6402   		if(((speedChrgBlckLog==0)&&(adc_buff_[11]>2000)) || ((speedChrgBlckLog==1)&&(adc_buff_[11]<2000))) speedChrgBlckStat=1;
003b20  4bf4              LDR      r3,|L1.16116|
003b22  49f5              LDR      r1,|L1.16120|
003b24  f44f62fa          MOV      r2,#0x7d0
003b28  2801              CMP      r0,#1                 ;6400
003b2a  d002              BEQ      |L1.15154|
;;;6403   		}
;;;6404   	else if(speedChrgBlckSrc==2)
003b2c  2802              CMP      r0,#2
003b2e  d00f              BEQ      |L1.15184|
003b30  e01c              B        |L1.15212|
                  |L1.15154|
003b32  f9b30000          LDRSH    r0,[r3,#0]            ;6402  ; speedChrgBlckLog
003b36  b918              CBNZ     r0,|L1.15168|
003b38  f9b13016          LDRSH    r3,[r1,#0x16]         ;6402  ; adc_buff_
003b3c  4293              CMP      r3,r2                 ;6402
003b3e  dc05              BGT      |L1.15180|
                  |L1.15168|
003b40  2801              CMP      r0,#1                 ;6402
003b42  d113              BNE      |L1.15212|
003b44  f9b10016          LDRSH    r0,[r1,#0x16]         ;6402  ; adc_buff_
003b48  4290              CMP      r0,r2                 ;6402
003b4a  da0f              BGE      |L1.15212|
                  |L1.15180|
003b4c  802e              STRH     r6,[r5,#0]            ;6402
003b4e  e00d              B        |L1.15212|
                  |L1.15184|
;;;6405   		{
;;;6406   		if(((speedChrgBlckLog==0)&&(adc_buff_[13]>2000)) || ((speedChrgBlckLog==1)&&(adc_buff_[13]<2000))) speedChrgBlckStat=1;
003b50  f9b30000          LDRSH    r0,[r3,#0]  ; speedChrgBlckLog
003b54  b918              CBNZ     r0,|L1.15198|
003b56  f9b1301a          LDRSH    r3,[r1,#0x1a]  ; adc_buff_
003b5a  4293              CMP      r3,r2
003b5c  dc05              BGT      |L1.15210|
                  |L1.15198|
003b5e  2801              CMP      r0,#1
003b60  d104              BNE      |L1.15212|
003b62  f9b1001a          LDRSH    r0,[r1,#0x1a]  ; adc_buff_
003b66  4290              CMP      r0,r2
003b68  da00              BGE      |L1.15212|
                  |L1.15210|
003b6a  802e              STRH     r6,[r5,#0]
                  |L1.15212|
;;;6407   		}
;;;6408   	}
;;;6409   
;;;6410   
;;;6411   if(speedChrgBlckStat==1)
003b6c  8828              LDRH     r0,[r5,#0]  ; speedChrgBlckStat
;;;6412   	{
;;;6413   
;;;6414   	//speedChargeStartStop();
;;;6415   
;;;6416   	speedChrgShowCnt++;
003b6e  49e3              LDR      r1,|L1.16124|
003b70  2801              CMP      r0,#1                 ;6411
003b72  d001              BEQ      |L1.15224|
;;;6417   	if(speedChrgShowCnt>=30)	
;;;6418   		{
;;;6419   		speedChrgShowCnt=0;
;;;6420   		show_mess(	"          ",
;;;6421   					"               ",
;;;6422   					"     !!!    ",
;;;6423   					"                    ",
;;;6424   					5000);
;;;6425   		}
;;;6426   	}
;;;6427   else speedChrgShowCnt=0;
003b74  700c              STRB     r4,[r1,#0]
                  |L1.15222|
;;;6428   
;;;6429   
;;;6430   }
003b76  bdf8              POP      {r3-r7,pc}
                  |L1.15224|
003b78  7808              LDRB     r0,[r1,#0]            ;6416  ; speedChrgShowCnt
003b7a  f1000001          ADD      r0,r0,#1              ;6416
003b7e  b2c0              UXTB     r0,r0                 ;6416
003b80  7008              STRB     r0,[r1,#0]            ;6416
003b82  281e              CMP      r0,#0x1e              ;6417
003b84  d3f7              BCC      |L1.15222|
003b86  700c              STRB     r4,[r1,#0]            ;6419
003b88  f2413088          MOV      r0,#0x1388            ;6420
003b8c  9000              STR      r0,[sp,#0]            ;6420
003b8e  a3dc              ADR      r3,|L1.16128|
003b90  a2e1              ADR      r2,|L1.16152|
003b92  a1e7              ADR      r1,|L1.16176|
003b94  a0ec              ADR      r0,|L1.16200|
003b96  f7fffffe          BL       show_mess
003b9a  bdf8              POP      {r3-r7,pc}
;;;6431   
                          ENDP

                  speedChargeStartStop PROC
;;;6432   //-----------------------------------------------
;;;6433   void speedChargeStartStop(void)
003b9c  b508              PUSH     {r3,lr}
;;;6434   {
;;;6435   if(speedChIsOn)
003b9e  48f0              LDR      r0,|L1.16224|
003ba0  2100              MOVS     r1,#0
003ba2  8802              LDRH     r2,[r0,#0]  ; speedChIsOn
003ba4  b10a              CBZ      r2,|L1.15274|
;;;6436   	{
;;;6437   	speedChIsOn=0;
003ba6  8001              STRH     r1,[r0,#0]
;;;6438   	}
;;;6439   
;;;6440   else
;;;6441   	{
;;;6442   	if(speedChrgBlckStat==0)
;;;6443   		{
;;;6444   		speedChIsOn=1;
;;;6445   		speedChTimeCnt=0;
;;;6446   		}
;;;6447   	else
;;;6448   		{
;;;6449   		show_mess(	"          ",
;;;6450   	          		"               ",
;;;6451   	          		"    !   ",
;;;6452   	          		"                    ",2000);	 
;;;6453   		}
;;;6454   	}
;;;6455   }
003ba8  bd08              POP      {r3,pc}
                  |L1.15274|
003baa  4aee              LDR      r2,|L1.16228|
003bac  8812              LDRH     r2,[r2,#0]            ;6442  ; speedChrgBlckStat
003bae  b14a              CBZ      r2,|L1.15300|
003bb0  f44f60fa          MOV      r0,#0x7d0             ;6449
003bb4  9000              STR      r0,[sp,#0]            ;6449
003bb6  a3d2              ADR      r3,|L1.16128|
003bb8  a2eb              ADR      r2,|L1.16232|
003bba  a1f1              ADR      r1,|L1.16256|
003bbc  a0f6              ADR      r0,|L1.16280|
003bbe  f7fffffe          BL       show_mess
003bc2  bd08              POP      {r3,pc}
                  |L1.15300|
003bc4  f04f0201          MOV      r2,#1                 ;6444
003bc8  8002              STRH     r2,[r0,#0]            ;6444
003bca  48f9              LDR      r0,|L1.16304|
003bcc  6001              STR      r1,[r0,#0]            ;6445  ; speedChTimeCnt
003bce  bd08              POP      {r3,pc}
;;;6456   
                          ENDP

                  numOfForvardBps_hndl PROC
;;;6457   //-----------------------------------------------
;;;6458   void	numOfForvardBps_hndl(void)			//       
003bd0  e92d41f0          PUSH     {r4-r8,lr}
;;;6459   {
;;;6460   
;;;6461   numOfForvardBps_old=numOfForvardBps;
003bd4  4cf7              LDR      r4,|L1.16308|
003bd6  7e20              LDRB     r0,[r4,#0x18]  ; numOfForvardBps
003bd8  7660              STRB     r0,[r4,#0x19]
;;;6462   
;;;6463   numOfForvardBps=0;
003bda  f04f0500          MOV      r5,#0
003bde  7625              STRB     r5,[r4,#0x18]
;;;6464   
;;;6465   //FORVARDBPSCHHOUR=10;
;;;6466   
;;;6467   if((FORVARDBPSCHHOUR<=0)||(FORVARDBPSCHHOUR>500))
003be0  4ef5              LDR      r6,|L1.16312|
003be2  f9b60000          LDRSH    r0,[r6,#0]  ; FORVARDBPSCHHOUR
003be6  2800              CMP      r0,#0
003be8  dd02              BLE      |L1.15344|
003bea  f5b07ffa          CMP      r0,#0x1f4
003bee  dd02              BLE      |L1.15350|
                  |L1.15344|
;;;6468   	{
;;;6469   	FORVARDBPSCHHOUR=0;
003bf0  8035              STRH     r5,[r6,#0]
                  |L1.15346|
;;;6470   	return;
;;;6471   	}
;;;6472   
;;;6473   numOfForvardBps_minCnt++;
;;;6474   
;;;6475   
;;;6476   if(numOfForvardBps_minCnt>=60)
;;;6477   	{
;;;6478   	numOfForvardBps_minCnt=0;
;;;6479   	numOfForvardBps_hourCnt=lc640_read_int(EE_FORVBPSHOURCNT);
;;;6480   	numOfForvardBps_hourCnt++;
;;;6481   	if(numOfForvardBps_hourCnt>=(FORVARDBPSCHHOUR*NUMIST))
;;;6482   		{
;;;6483   		numOfForvardBps_hourCnt=0;
;;;6484   		}
;;;6485   	lc640_write_int(EE_FORVBPSHOURCNT,numOfForvardBps_hourCnt);
;;;6486   	}
;;;6487   
;;;6488   numOfForvardBps=numOfForvardBps_hourCnt/FORVARDBPSCHHOUR;
;;;6489   
;;;6490   //if(numOfForvardBps)
;;;6491   //numOfForvardBps_old=numOfForvardBps; 
;;;6492   }
003bf2  e8bd81f0          POP      {r4-r8,pc}
                  |L1.15350|
003bf6  7ea0              LDRB     r0,[r4,#0x1a]         ;6473  ; numOfForvardBps_minCnt
003bf8  f1000001          ADD      r0,r0,#1              ;6473
003bfc  b2c0              UXTB     r0,r0                 ;6473
003bfe  76a0              STRB     r0,[r4,#0x1a]         ;6473
003c00  283c              CMP      r0,#0x3c              ;6476
003c02  d31a              BCC      |L1.15418|
003c04  76a5              STRB     r5,[r4,#0x1a]         ;6478
003c06  f44f7794          MOV      r7,#0x128             ;6479
003c0a  4638              MOV      r0,r7                 ;6479
003c0c  f7fffffe          BL       lc640_read_int
003c10  f1000001          ADD      r0,r0,#1              ;6480
003c14  b200              SXTH     r0,r0                 ;6480
003c16  f8a40062          STRH     r0,[r4,#0x62]         ;6480
003c1a  4ae8              LDR      r2,|L1.16316|
003c1c  f9b61000          LDRSH    r1,[r6,#0]            ;6481  ; FORVARDBPSCHHOUR
003c20  f9b22000          LDRSH    r2,[r2,#0]            ;6481  ; NUMIST
003c24  fb01f102          MUL      r1,r1,r2              ;6481
003c28  4281              CMP      r1,r0                 ;6481
003c2a  dc01              BGT      |L1.15408|
003c2c  f8a45062          STRH     r5,[r4,#0x62]         ;6483
                  |L1.15408|
003c30  f9b41062          LDRSH    r1,[r4,#0x62]         ;6485  ; numOfForvardBps_hourCnt
003c34  4638              MOV      r0,r7                 ;6485
003c36  f7fffffe          BL       lc640_write_int
                  |L1.15418|
003c3a  f9b40062          LDRSH    r0,[r4,#0x62]         ;6488  ; numOfForvardBps_hourCnt
003c3e  f9b61000          LDRSH    r1,[r6,#0]            ;6488  ; FORVARDBPSCHHOUR
003c42  fb90f0f1          SDIV     r0,r0,r1              ;6488
003c46  7620              STRB     r0,[r4,#0x18]         ;6488
003c48  e7d3              B        |L1.15346|
;;;6493   
                          ENDP

                  numOfForvardBps_init PROC
;;;6494   //-----------------------------------------------
;;;6495   void	numOfForvardBps_init(void)			//         
003c4a  b510              PUSH     {r4,lr}
;;;6496   {									//    -   
;;;6497   lc640_write_int(EE_FORVBPSHOURCNT,0);
003c4c  2100              MOVS     r1,#0
003c4e  f44f7094          MOV      r0,#0x128
003c52  f7fffffe          BL       lc640_write_int
;;;6498   numOfForvardBps_minCnt=58;
003c56  49d7              LDR      r1,|L1.16308|
003c58  f04f003a          MOV      r0,#0x3a
003c5c  7688              STRB     r0,[r1,#0x1a]
;;;6499   }
003c5e  bd10              POP      {r4,pc}
;;;6500   
                          ENDP

                  outVoltContrHndl PROC
;;;6501   //-----------------------------------------------
;;;6502   void outVoltContrHndl(void)
003c60  b570              PUSH     {r4-r6,lr}
;;;6503   { 
;;;6504   if((load_U>U_OUT_KONTR_MAX)||(load_U<U_OUT_KONTR_MIN))
003c62  4cd7              LDR      r4,|L1.16320|
003c64  48d7              LDR      r0,|L1.16324|
;;;6505   	{
;;;6506   	outVoltContrHndlCnt_=0;
;;;6507   	if(outVoltContrHndlCnt<U_OUT_KONTR_DELAY)
003c66  4ad8              LDR      r2,|L1.16328|
003c68  f9b41000          LDRSH    r1,[r4,#0]            ;6504  ; load_U
003c6c  f9b06000          LDRSH    r6,[r0,#0]            ;6504  ; U_OUT_KONTR_MAX
003c70  2500              MOVS     r5,#0                 ;6506
003c72  f9b20000          LDRSH    r0,[r2,#0]
003c76  4bd5              LDR      r3,|L1.16332|
003c78  42b1              CMP      r1,r6                 ;6504
003c7a  dc04              BGT      |L1.15494|
003c7c  4ed4              LDR      r6,|L1.16336|
003c7e  f9b66000          LDRSH    r6,[r6,#0]            ;6504  ; U_OUT_KONTR_MIN
003c82  42b1              CMP      r1,r6                 ;6504
003c84  da0f              BGE      |L1.15526|
                  |L1.15494|
003c86  801d              STRH     r5,[r3,#0]            ;6506
003c88  49d2              LDR      r1,|L1.16340|
003c8a  f9b11000          LDRSH    r1,[r1,#0]  ; U_OUT_KONTR_DELAY
003c8e  4288              CMP      r0,r1
003c90  da1b              BGE      |L1.15562|
;;;6508   		{
;;;6509   		outVoltContrHndlCnt++;
003c92  f1000001          ADD      r0,r0,#1
003c96  b200              SXTH     r0,r0
003c98  8010              STRH     r0,[r2,#0]
;;;6510   		if(outVoltContrHndlCnt==U_OUT_KONTR_DELAY)
003c9a  4288              CMP      r0,r1
003c9c  d115              BNE      |L1.15562|
;;;6511   			{
;;;6512   			avar_uout_hndl(1);
003c9e  2001              MOVS     r0,#1
003ca0  f7fffffe          BL       avar_uout_hndl
003ca4  e011              B        |L1.15562|
                  |L1.15526|
;;;6513   			}
;;;6514   		}
;;;6515   	}
;;;6516   else
;;;6517   	{
;;;6518   	if(outVoltContrHndlCnt)
003ca6  b180              CBZ      r0,|L1.15562|
;;;6519   		{
;;;6520   		if(outVoltContrHndlCnt_<5)
003ca8  f9b30000          LDRSH    r0,[r3,#0]  ; outVoltContrHndlCnt_
003cac  2805              CMP      r0,#5
003cae  da0c              BGE      |L1.15562|
;;;6521   			{
;;;6522   			outVoltContrHndlCnt_++;
003cb0  f1000001          ADD      r0,r0,#1
003cb4  b200              SXTH     r0,r0
003cb6  8018              STRH     r0,[r3,#0]
;;;6523   			if(outVoltContrHndlCnt_>=5)
003cb8  2805              CMP      r0,#5
003cba  db06              BLT      |L1.15562|
;;;6524   				{
;;;6525   				outVoltContrHndlCnt=0;
003cbc  8015              STRH     r5,[r2,#0]
;;;6526   				if(uout_av)avar_uout_hndl(0);
003cbe  48c6              LDR      r0,|L1.16344|
003cc0  7800              LDRB     r0,[r0,#0]  ; uout_av
003cc2  b110              CBZ      r0,|L1.15562|
003cc4  2000              MOVS     r0,#0
003cc6  f7fffffe          BL       avar_uout_hndl
                  |L1.15562|
;;;6527   				}
;;;6528   			}
;;;6529   		}
;;;6530   	}
;;;6531   
;;;6532   if (load_U<(USIGN*10)) 
003cca  48c4              LDR      r0,|L1.16348|
003ccc  f9b41000          LDRSH    r1,[r4,#0]  ; load_U
003cd0  f9b00000          LDRSH    r0,[r0,#0]  ; USIGN
003cd4  eb000080          ADD      r0,r0,r0,LSL #2
003cd8  ebb10f40          CMP      r1,r0,LSL #1
003cdc  da0b              BGE      |L1.15606|
;;;6533   	{
;;;6534   	if(!bSILENT)
003cde  48c0              LDR      r0,|L1.16352|
003ce0  6800              LDR      r0,[r0,#0]  ; bSILENT
003ce2  2800              CMP      r0,#0
003ce4  d107              BNE      |L1.15606|
;;;6535   		{
;;;6536   		mess_send(MESS2RELE_HNDL,PARAM_RELE_BAT_IS_DISCHARGED,1,20);
003ce6  e8bd4070          POP      {r4-r6,lr}
003cea  2314              MOVS     r3,#0x14
003cec  2201              MOVS     r2,#1
003cee  2172              MOVS     r1,#0x72
003cf0  20d2              MOVS     r0,#0xd2
003cf2  f7ffbffe          B.W      mess_send
                  |L1.15606|
;;;6537   		}
;;;6538   
;;;6539   	//bU_BAT2REL_AV_BAT=1;
;;;6540   	}
;;;6541   
;;;6542   
;;;6543   }
003cf6  bd70              POP      {r4-r6,pc}
;;;6544   
                          ENDP

                  vent_resurs_hndl PROC
;;;6545   //-----------------------------------------------
;;;6546   void vent_resurs_hndl(void)
003cf8  e92d41f0          PUSH     {r4-r8,lr}
;;;6547   {
;;;6548   char i;
;;;6549   char crc_in,crc_eval;
;;;6550   
;;;6551   for(i=0;i<NUMIST;i++)
003cfc  f04f0200          MOV      r2,#0
003d00  48ae              LDR      r0,|L1.16316|
;;;6552   	{
;;;6553   	if((bps[i]._buff[7]&0xc0)==0x00)
003d02  4fb8              LDR      r7,|L1.16356|
003d04  f9b06000          LDRSH    r6,[r0,#0]            ;6551
003d08  e06b              B        |L1.15842|
                  |L1.15626|
003d0a  ebc200c2          RSB      r0,r2,r2,LSL #3
003d0e  eb001002          ADD      r0,r0,r2,LSL #4
003d12  eb070080          ADD      r0,r7,r0,LSL #2
003d16  7b41              LDRB     r1,[r0,#0xd]
003d18  098b              LSRS     r3,r1,#6
003d1a  d006              BEQ      |L1.15658|
;;;6554   		{
;;;6555   		bps[i]._vent_resurs_temp[0]=bps[i]._buff[7];
;;;6556   		}
;;;6557   	else if((bps[i]._buff[7]&0xc0)==0x40)
003d1c  2301              MOVS     r3,#1
003d1e  ebb31f91          CMP      r3,r1,LSR #6
003d22  d105              BNE      |L1.15664|
;;;6558   		{
;;;6559   		bps[i]._vent_resurs_temp[1]=bps[i]._buff[7];
003d24  f8801055          STRB     r1,[r0,#0x55]
003d28  e00f              B        |L1.15690|
                  |L1.15658|
003d2a  f8801054          STRB     r1,[r0,#0x54]         ;6555
003d2e  e00c              B        |L1.15690|
                  |L1.15664|
;;;6560   		}
;;;6561   	else if((bps[i]._buff[7]&0xc0)==0x80)
003d30  2302              MOVS     r3,#2
003d32  ebb31f91          CMP      r3,r1,LSR #6
003d36  d102              BNE      |L1.15678|
;;;6562   		{
;;;6563   		bps[i]._vent_resurs_temp[2]=bps[i]._buff[7];
003d38  f8801056          STRB     r1,[r0,#0x56]
003d3c  e005              B        |L1.15690|
                  |L1.15678|
;;;6564   		}
;;;6565   	else if((bps[i]._buff[7]&0xc0)==0xc0)
003d3e  2303              MOVS     r3,#3
003d40  ebb31f91          CMP      r3,r1,LSR #6
003d44  d101              BNE      |L1.15690|
;;;6566   		{
;;;6567   		bps[i]._vent_resurs_temp[3]=bps[i]._buff[7];
003d46  f8801057          STRB     r1,[r0,#0x57]
                  |L1.15690|
;;;6568   		}
;;;6569   	crc_in=0;
;;;6570   	crc_in|=(bps[i]._vent_resurs_temp[0]&0x30)>>4;
003d4a  f8101f54          LDRB     r1,[r0,#0x54]!
003d4e  f3c11401          UBFX     r4,r1,#4,#2
;;;6571   	crc_in|=(bps[i]._vent_resurs_temp[1]&0x30)>>2;
003d52  7843              LDRB     r3,[r0,#1]
003d54  f0030530          AND      r5,r3,#0x30
003d58  ea440595          ORR      r5,r4,r5,LSR #2
;;;6572   	crc_in|=(bps[i]._vent_resurs_temp[2]&0x30);
003d5c  7884              LDRB     r4,[r0,#2]
003d5e  f0040c30          AND      r12,r4,#0x30
003d62  ea4c0c05          ORR      r12,r12,r5
;;;6573   	crc_in|=(bps[i]._vent_resurs_temp[3]&0x30)<<2;
003d66  78c5              LDRB     r5,[r0,#3]
003d68  f1a00054          SUB      r0,r0,#0x54
003d6c  f0050830          AND      r8,r5,#0x30
003d70  ea4c0c88          ORR      r12,r12,r8,LSL #2
;;;6574   
;;;6575   	crc_eval =bps[i]._vent_resurs_temp[0]&0x0f;
003d74  f001010f          AND      r1,r1,#0xf
;;;6576   	crc_eval^=bps[i]._vent_resurs_temp[1]&0x0f;
003d78  f003030f          AND      r3,r3,#0xf
003d7c  ea830801          EOR      r8,r3,r1
;;;6577   	crc_eval^=bps[i]._vent_resurs_temp[2]&0x0f;
003d80  f004040f          AND      r4,r4,#0xf
003d84  ea840808          EOR      r8,r4,r8
;;;6578   	crc_eval^=bps[i]._vent_resurs_temp[3]&0x0f;
003d88  f005050f          AND      r5,r5,#0xf
003d8c  ea850808          EOR      r8,r5,r8
;;;6579   
;;;6580   	if(crc_eval==crc_in)
003d90  45e0              CMP      r8,r12
003d92  d113              BNE      |L1.15804|
;;;6581   		{
;;;6582   		unsigned short temp_US;
;;;6583   		temp_US=0;
;;;6584   
;;;6585   		temp_US|=(bps[i]._vent_resurs_temp[3]&0x0f);
;;;6586   		temp_US<<=4;
003d94  ea4f1505          LSL      r5,r5,#4
;;;6587   		temp_US|=(bps[i]._vent_resurs_temp[2]&0x0f);
003d98  ea440405          ORR      r4,r4,r5
;;;6588   		temp_US<<=4;
003d9c  ea4f1404          LSL      r4,r4,#4
;;;6589   		temp_US|=(bps[i]._vent_resurs_temp[1]&0x0f);
003da0  ea430304          ORR      r3,r3,r4
;;;6590   		temp_US<<=4;
003da4  ea4f5303          LSL      r3,r3,#20
003da8  ea4f4313          LSR      r3,r3,#16
;;;6591   		temp_US|=(bps[i]._vent_resurs_temp[0]&0x0f);
003dac  ea410103          ORR      r1,r1,r3
;;;6592   
;;;6593   		if(bps[i]._vent_resurs!=temp_US)bps[i]._vent_resurs=temp_US;
003db0  f8b03058          LDRH     r3,[r0,#0x58]
003db4  428b              CMP      r3,r1
003db6  d001              BEQ      |L1.15804|
003db8  f8a01058          STRH     r1,[r0,#0x58]
                  |L1.15804|
;;;6594   		}
;;;6595   
;;;6596   	if(bps[i]._vent_resurs>TVENTMAX)
003dbc  4b8a              LDR      r3,|L1.16360|
003dbe  f8b01058          LDRH     r1,[r0,#0x58]
003dc2  f9b33000          LDRSH    r3,[r3,#0]  ; TVENTMAX
003dc6  4299              CMP      r1,r3
003dc8  dd04              BLE      |L1.15828|
;;;6597   		{
;;;6598   		bps[i]._av|=(1<<4);
003dca  7841              LDRB     r1,[r0,#1]
003dcc  f0410110          ORR      r1,r1,#0x10
003dd0  7041              STRB     r1,[r0,#1]
003dd2  e003              B        |L1.15836|
                  |L1.15828|
;;;6599   		}
;;;6600   	else bps[i]._av&=~(1<<4);
003dd4  7841              LDRB     r1,[r0,#1]
003dd6  f0210110          BIC      r1,r1,#0x10
003dda  7041              STRB     r1,[r0,#1]
                  |L1.15836|
003ddc  f1020201          ADD      r2,r2,#1              ;6551
003de0  b2d2              UXTB     r2,r2                 ;6551
                  |L1.15842|
003de2  42b2              CMP      r2,r6                 ;6551
003de4  db91              BLT      |L1.15626|
;;;6601   	}
;;;6602   }
003de6  e704              B        |L1.15346|
;;;6603   
                          ENDP

                  vent_hndl PROC
;;;6604   //-----------------------------------------------
;;;6605   void vent_hndl(void)
003de8  e92d4ff0          PUSH     {r4-r11,lr}
;;;6606   {
003dec  b087              SUB      sp,sp,#0x1c
;;;6607   if(RELEVENTSIGN==rvsAKB)
003dee  487f              LDR      r0,|L1.16364|
;;;6608   	{
;;;6609   	if(vent_stat==0)
003df0  4c70              LDR      r4,|L1.16308|
;;;6610   		{
;;;6611   		if	(
;;;6612   			(BAT_IS_ON[0]==bisON)&&((bat[0]._Tb>TVENTON)||(bat[0]._nd))
003df2  497f              LDR      r1,|L1.16368|
;;;6613   			||
;;;6614   			(BAT_IS_ON[1]==bisON)&&((bat[1]._Tb>TVENTON)||(bat[1]._nd))
;;;6615   			)
;;;6616   			{
;;;6617   			vent_stat=1;
;;;6618   			}
;;;6619   		}
;;;6620   	else if(vent_stat==1)
;;;6621   		{
;;;6622   		if	(
;;;6623   			((BAT_IS_ON[0]!=bisON)||((BAT_IS_ON[0]==bisON)&&(bat[0]._Tb<TVENTOFF)&&(!bat[0]._nd)))
003df4  4a7f              LDR      r2,|L1.16372|
003df6  7800              LDRB     r0,[r0,#0]            ;6607  ; RELEVENTSIGN
003df8  f9943000          LDRSB    r3,[r4,#0]            ;6609
003dfc  f9b11000          LDRSH    r1,[r1,#0]            ;6612
003e00  f9b22000          LDRSH    r2,[r2,#0]
003e04  b148              CBZ      r0,|L1.15898|
;;;6624   			&&
;;;6625   			((BAT_IS_ON[1]!=bisON)||((BAT_IS_ON[1]==bisON)&&(bat[1]._Tb<TVENTOFF)&&(!bat[1]._nd)))
;;;6626   			)
;;;6627   			{
;;;6628   			vent_stat=0;
;;;6629   			}
;;;6630   		}
;;;6631   	}
;;;6632   else if(RELEVENTSIGN==rvsBPS)
003e06  2802              CMP      r0,#2
003e08  d03c              BEQ      |L1.16004|
;;;6633   	{
;;;6634   /*	if	(
;;;6635   		(((bps[0]._flags_tm&0x06)||(bps[0]._cnt>=30)))||
;;;6636   		(((bps[1]._flags_tm&0x06)||(bps[1]._cnt>=30))&&(NUMIST>1))||
;;;6637   		(((bps[2]._flags_tm&0x06)||(bps[2]._cnt>=30))&&(NUMIST>2))||
;;;6638   		(((bps[3]._flags_tm&0x06)||(bps[3]._cnt>=30))&&(NUMIST>3))||
;;;6639   		(((bps[4]._flags_tm&0x06)||(bps[4]._cnt>=30))&&(NUMIST>4))||
;;;6640   		(((bps[5]._flags_tm&0x06)||(bps[5]._cnt>=30))&&(NUMIST>5))||
;;;6641   		(((bps[6]._flags_tm&0x06)||(bps[6]._cnt>=30))&&(NUMIST>6))
;;;6642   		)
;;;6643   		{
;;;6644   		vent_stat=1;
;;;6645   		}
;;;6646   	else vent_stat=0;
;;;6647   	*/
;;;6648   
;;;6649   	if	(
;;;6650   		((NUMIST)&&((bps[0]._Ti>TVENTON)||(bps[0]._cnt>=30)))
;;;6651   		||
;;;6652   		((NUMIST>1)&&((bps[1]._Ti>TVENTON)||(bps[1]._cnt>=30)))
;;;6653   		||
;;;6654   		((NUMIST>2)&&((bps[2]._Ti>TVENTON)||(bps[2]._cnt>=30)))
;;;6655   		||
;;;6656   		((NUMIST>3)&&((bps[3]._Ti>TVENTON)||(bps[3]._cnt>=30)))
;;;6657   		||
;;;6658   		((NUMIST>4)&&((bps[4]._Ti>TVENTON)||(bps[4]._cnt>=30)))
;;;6659   		||
;;;6660   		((NUMIST>5)&&((bps[5]._Ti>TVENTON)||(bps[5]._cnt>=30)))
;;;6661   		||
;;;6662   		((NUMIST>6)&&((bps[6]._Ti>TVENTON)||(bps[6]._cnt>=30)))
;;;6663   		||
;;;6664   		((NUMIST>7)&&((bps[7]._Ti>TVENTON)||(bps[7]._cnt>=30)))
;;;6665   		)
;;;6666   		{
;;;6667   		vent_stat=1;
;;;6668   		}
;;;6669   	else if(vent_stat==1)
;;;6670   		{
;;;6671   		if	(
;;;6672   			((!NUMIST)||((NUMIST)&&(bps[0]._Ti<TVENTOFF)&&(bps[0]._cnt<10)))
;;;6673   			&&
;;;6674   			((NUMIST<2)||((NUMIST>=2)&&(bps[1]._Ti<TVENTOFF)&&(bps[1]._cnt<10)))
;;;6675   			&&
;;;6676   			((NUMIST<3)||((NUMIST>=3)&&(bps[2]._Ti<TVENTOFF)&&(bps[2]._cnt<10)))
;;;6677   			&&
;;;6678   			((NUMIST<4)||((NUMIST>=4)&&(bps[3]._Ti<TVENTOFF)&&(bps[3]._cnt<10)))
;;;6679   			&&
;;;6680   			((NUMIST<5)||((NUMIST>=5)&&(bps[4]._Ti<TVENTOFF)&&(bps[4]._cnt<10)))
;;;6681   			&&
;;;6682   			((NUMIST<6)||((NUMIST>=6)&&(bps[5]._Ti<TVENTOFF)&&(bps[5]._cnt<10)))
;;;6683   			&&
;;;6684   			((NUMIST<7)||((NUMIST>=7)&&(bps[6]._Ti<TVENTOFF)&&(bps[6]._cnt<10)))
;;;6685   			&&
;;;6686   			((NUMIST<8)||((NUMIST>=8)&&(bps[7]._Ti<TVENTOFF)&&(bps[7]._cnt<10)))
;;;6687   			)
;;;6688   			{
;;;6689   			vent_stat=0;
;;;6690   			}
;;;6691   		}
;;;6692   	}
;;;6693   else if(RELEVENTSIGN==rvsEXT)
003e0a  2801              CMP      r0,#1
003e0c  d069              BEQ      |L1.16098|
;;;6694   	{
;;;6695   	if	(
;;;6696   		((NUMDT)&&((t_ext[0]>TVENTON)||(ND_EXT[0])))
;;;6697   		||
;;;6698   		((NUMDT>1)&&((t_ext[1]>TVENTON)||(ND_EXT[1])))
;;;6699   		||
;;;6700   		((NUMDT>2)&&((t_ext[2]>TVENTON)||(ND_EXT[2])))
;;;6701   		)
;;;6702   		{
;;;6703   		vent_stat=1;
;;;6704   		}
;;;6705   	else if(vent_stat==1)
;;;6706   		{
;;;6707   		if	(
;;;6708   			((!NUMDT)||((NUMDT)&&(t_ext[0]<TVENTOFF)&&(!ND_EXT[0])))
;;;6709   			&&
;;;6710   			((NUMDT<2)||((NUMDT>=2)&&(t_ext[1]<TVENTOFF)&&(!ND_EXT[1])))
;;;6711   			&&
;;;6712   			((NUMDT<3)||((NUMDT>=3)&&(t_ext[2]<TVENTOFF)&&(!ND_EXT[2])))
;;;6713   			)
;;;6714   			{
;;;6715   			vent_stat=0;
;;;6716   			}
;;;6717   		}
;;;6718   	}
;;;6719   else vent_stat=1;
003e0e  f04f0001          MOV      r0,#1
003e12  7020              STRB     r0,[r4,#0]
                  |L1.15892|
;;;6720   }
003e14  b007              ADD      sp,sp,#0x1c
003e16  e8bd8ff0          POP      {r4-r11,pc}
                  |L1.15898|
003e1a  4f77              LDR      r7,|L1.16376|
003e1c  f8df81dc          LDR      r8,|L1.16380|
003e20  f9b7000a          LDRSH    r0,[r7,#0xa]          ;6612
003e24  7b3d              LDRB     r5,[r7,#0xc]          ;6612
003e26  f9b76056          LDRSH    r6,[r7,#0x56]         ;6614
003e2a  f898c000          LDRB     r12,[r8,#0]           ;6611
003e2e  f8977058          LDRB     r7,[r7,#0x58]         ;6614
003e32  f8988001          LDRB     r8,[r8,#1]            ;6614
003e36  b12b              CBZ      r3,|L1.15940|
003e38  2b01              CMP      r3,#1                 ;6620
003e3a  d1eb              BNE      |L1.15892|
003e3c  f1bc0f55          CMP      r12,#0x55             ;6622
003e40  d115              BNE      |L1.15982|
003e42  e010              B        |L1.15974|
                  |L1.15940|
003e44  f1bc0f55          CMP      r12,#0x55             ;6611
003e48  d102              BNE      |L1.15952|
003e4a  4288              CMP      r0,r1                 ;6612
003e4c  dc07              BGT      |L1.15966|
003e4e  b935              CBNZ     r5,|L1.15966|
                  |L1.15952|
003e50  f1b80f55          CMP      r8,#0x55              ;6614
003e54  d1de              BNE      |L1.15892|
003e56  428e              CMP      r6,r1                 ;6614
003e58  dc01              BGT      |L1.15966|
003e5a  2f00              CMP      r7,#0                 ;6614
003e5c  d0da              BEQ      |L1.15892|
                  |L1.15966|
003e5e  f04f0001          MOV      r0,#1                 ;6617
003e62  7020              STRB     r0,[r4,#0]            ;6617
003e64  e7d6              B        |L1.15892|
                  |L1.15974|
003e66  4290              CMP      r0,r2                 ;6623
003e68  dad4              BGE      |L1.15892|
003e6a  2d00              CMP      r5,#0                 ;6623
003e6c  d1d2              BNE      |L1.15892|
                  |L1.15982|
003e6e  f1b80f55          CMP      r8,#0x55              ;6625
003e72  d103              BNE      |L1.15996|
003e74  4296              CMP      r6,r2                 ;6625
003e76  dacd              BGE      |L1.15892|
003e78  2f00              CMP      r7,#0                 ;6625
003e7a  d1cb              BNE      |L1.15892|
                  |L1.15996|
003e7c  f04f0000          MOV      r0,#0                 ;6628
003e80  7020              STRB     r0,[r4,#0]            ;6628
003e82  e7c7              B        |L1.15892|
                  |L1.16004|
003e84  4e57              LDR      r6,|L1.16356|
003e86  484d              LDR      r0,|L1.16316|
003e88  6ab5              LDR      r5,[r6,#0x28]         ;6650
003e8a  f9b00000          LDRSH    r0,[r0,#0]            ;6649  ; NUMIST
003e8e  78f6              LDRB     r6,[r6,#3]            ;6650
003e90  b118              CBZ      r0,|L1.16026|
003e92  428d              CMP      r5,r1                 ;6650
003e94  dc26              BGT      |L1.16100|
003e96  2e1e              CMP      r6,#0x1e              ;6650
003e98  d224              BCS      |L1.16100|
                  |L1.16026|
003e9a  f8dfc148          LDR      r12,|L1.16356|
003e9e  2801              CMP      r0,#1                 ;6652
003ea0  f8dc7084          LDR      r7,[r12,#0x84]        ;6652
003ea4  f89cc05f          LDRB     r12,[r12,#0x5f]       ;6652
003ea8  f8cdc018          STR      r12,[sp,#0x18]        ;6652
003eac  dd06              BLE      |L1.16060|
003eae  428f              CMP      r7,r1                 ;6652
003eb0  dc18              BGT      |L1.16100|
003eb2  f8ddc018          LDR      r12,[sp,#0x18]        ;6652
003eb6  f1bc0f1e          CMP      r12,#0x1e             ;6652
003eba  d213              BCS      |L1.16100|
                  |L1.16060|
003ebc  f8dfc124          LDR      r12,|L1.16356|
003ec0  2802              CMP      r0,#2                 ;6654
003ec2  f8dc80e0          LDR      r8,[r12,#0xe0]        ;6654
003ec6  f8cd8014          STR      r8,[sp,#0x14]         ;6654
003eca  f89cc0bb          LDRB     r12,[r12,#0xbb]       ;6654
003ece  f8cdc010          STR      r12,[sp,#0x10]        ;6654
003ed2  dd08              BLE      |L1.16102|
003ed4  f8ddc014          LDR      r12,[sp,#0x14]        ;6654
003ed8  458c              CMP      r12,r1                ;6654
003eda  dc03              BGT      |L1.16100|
003edc  f8ddc010          LDR      r12,[sp,#0x10]        ;6654
003ee0  e08e              B        |L1.16384|
                  |L1.16098|
003ee2  e123              B        |L1.16684|
                  |L1.16100|
003ee4  e0e0              B        |L1.16552|
                  |L1.16102|
003ee6  e08e              B        |L1.16390|
                  |L1.16104|
                          DCD      Ib_ips_termokompensat
                  |L1.16108|
                          DCD      IZMAX
                  |L1.16112|
                          DCD      speedChrgBlckSrc
                  |L1.16116|
                          DCD      speedChrgBlckLog
                  |L1.16120|
                          DCD      ||.bss||+0x400
                  |L1.16124|
                          DCD      speedChrgShowCnt
                  |L1.16128|
003f00  20202020          DCB      "                    ",0
003f04  20202020
003f08  20202020
003f0c  20202020
003f10  20202020
003f14  00      
003f15  00                DCB      0
003f16  00                DCB      0
003f17  00                DCB      0
                  |L1.16152|
003f18  20202020          DCB      "     ",199,192,207,208,197,217,197,205,"!!!    ",0
003f1c  20c7c0cf
003f20  d0c5d9c5
003f24  cd212121
003f28  20202020
003f2c  00      
003f2d  00                DCB      0
003f2e  00                DCB      0
003f2f  00                DCB      0
                  |L1.16176|
003f30  20202020          DCB      "       ",199,192,208,223,196,"        ",0
003f34  202020c7
003f38  c0d0dfc4
003f3c  20202020
003f40  20202020
003f44  00      
003f45  00                DCB      0
003f46  00                DCB      0
003f47  00                DCB      0
                  |L1.16200|
003f48  20202020          DCB      "     ",211,209,202,206,208,197,205,205,219,201,"     ",0
003f4c  20d3d1ca
003f50  ced0c5cd
003f54  cddbc920
003f58  20202020
003f5c  00      
003f5d  00                DCB      0
003f5e  00                DCB      0
003f5f  00                DCB      0
                  |L1.16224|
                          DCD      speedChIsOn
                  |L1.16228|
                          DCD      speedChrgBlckStat
                  |L1.16232|
003f68  20202020          DCB      "    ",231,224,225,235,238,234,232,240,238,226,224,237,"!"
003f6c  e7e0e1eb
003f70  eeeae8f0
003f74  eee2e0ed
003f78  21      
003f79  20202000          DCB      "   ",0
003f7d  00                DCB      0
003f7e  00                DCB      0
003f7f  00                DCB      0
                  |L1.16256|
003f80  20202020          DCB      "       ",231,224,240,255,228,"        ",0
003f84  202020e7
003f88  e0f0ffe4
003f8c  20202020
003f90  20202020
003f94  00      
003f95  00                DCB      0
003f96  00                DCB      0
003f97  00                DCB      0
                  |L1.16280|
003f98  20202020          DCB      "     ",211,241,234,238,240,229,237,237,251,233,"     ",0
003f9c  20d3f1ea
003fa0  eef0e5ed
003fa4  edfbe920
003fa8  20202020
003fac  00      
003fad  00                DCB      0
003fae  00                DCB      0
003faf  00                DCB      0
                  |L1.16304|
                          DCD      speedChTimeCnt
                  |L1.16308|
                          DCD      ||area_number.21||
                  |L1.16312|
                          DCD      FORVARDBPSCHHOUR
                  |L1.16316|
                          DCD      NUMIST
                  |L1.16320|
                          DCD      load_U
                  |L1.16324|
                          DCD      U_OUT_KONTR_MAX
                  |L1.16328|
                          DCD      outVoltContrHndlCnt
                  |L1.16332|
                          DCD      outVoltContrHndlCnt_
                  |L1.16336|
                          DCD      U_OUT_KONTR_MIN
                  |L1.16340|
                          DCD      U_OUT_KONTR_DELAY
                  |L1.16344|
                          DCD      uout_av
                  |L1.16348|
                          DCD      USIGN
                  |L1.16352|
                          DCD      bSILENT
                  |L1.16356|
                          DCD      bps
                  |L1.16360|
                          DCD      TVENTMAX
                  |L1.16364|
                          DCD      RELEVENTSIGN
                  |L1.16368|
                          DCD      TVENTON
                  |L1.16372|
                          DCD      TVENTOFF
                  |L1.16376|
                          DCD      bat
                  |L1.16380|
                          DCD      BAT_IS_ON
                  |L1.16384|
004000  f1bc0f1e          CMP      r12,#0x1e             ;6654
004004  d250              BCS      |L1.16552|
                  |L1.16390|
004006  f8dfc1b0          LDR      r12,|L1.16824|
00400a  2803              CMP      r0,#3                 ;6656
00400c  f8dc813c          LDR      r8,[r12,#0x13c]       ;6656
004010  f8cd800c          STR      r8,[sp,#0xc]          ;6656
004014  f89cc117          LDRB     r12,[r12,#0x117]      ;6656
004018  f8cdc008          STR      r12,[sp,#8]           ;6656
00401c  dd08              BLE      |L1.16432|
00401e  f8ddc00c          LDR      r12,[sp,#0xc]         ;6656
004022  458c              CMP      r12,r1                ;6656
004024  dc40              BGT      |L1.16552|
004026  f8ddc008          LDR      r12,[sp,#8]           ;6656
00402a  f1bc0f1e          CMP      r12,#0x1e             ;6656
00402e  d23b              BCS      |L1.16552|
                  |L1.16432|
004030  f8df8184          LDR      r8,|L1.16824|
004034  2804              CMP      r0,#4                 ;6658
004036  f8d8c198          LDR      r12,[r8,#0x198]       ;6658
00403a  f8988173          LDRB     r8,[r8,#0x173]        ;6658
00403e  f8cd8004          STR      r8,[sp,#4]            ;6658
004042  dd06              BLE      |L1.16466|
004044  458c              CMP      r12,r1                ;6658
004046  dc2f              BGT      |L1.16552|
004048  f8dd8004          LDR      r8,[sp,#4]            ;6658
00404c  f1b80f1e          CMP      r8,#0x1e              ;6658
004050  d22a              BCS      |L1.16552|
                  |L1.16466|
004052  f8df9164          LDR      r9,|L1.16824|
004056  2805              CMP      r0,#5                 ;6660
004058  f8d981f4          LDR      r8,[r9,#0x1f4]        ;6660
00405c  f89991cf          LDRB     r9,[r9,#0x1cf]        ;6660
004060  f8cd9000          STR      r9,[sp,#0]            ;6660
004064  dd06              BLE      |L1.16500|
004066  4588              CMP      r8,r1                 ;6660
004068  dc1e              BGT      |L1.16552|
00406a  f8dd9000          LDR      r9,[sp,#0]            ;6660
00406e  f1b90f1e          CMP      r9,#0x1e              ;6660
004072  d219              BCS      |L1.16552|
                  |L1.16500|
004074  f8dfa140          LDR      r10,|L1.16824|
004078  2806              CMP      r0,#6                 ;6662
00407a  f89ae22b          LDRB     lr,[r10,#0x22b]       ;6662
00407e  f8da9250          LDR      r9,[r10,#0x250]       ;6662
004082  dd04              BLE      |L1.16526|
004084  4589              CMP      r9,r1                 ;6662
004086  dc0f              BGT      |L1.16552|
004088  f1be0f1e          CMP      lr,#0x1e              ;6662
00408c  d20c              BCS      |L1.16552|
                  |L1.16526|
00408e  f8dfb128          LDR      r11,|L1.16824|
004092  2807              CMP      r0,#7                 ;6664
004094  f8dba2ac          LDR      r10,[r11,#0x2ac]      ;6664
004098  f89bb287          LDRB     r11,[r11,#0x287]      ;6664
00409c  dd08              BLE      |L1.16560|
00409e  458a              CMP      r10,r1                ;6664
0040a0  dc02              BGT      |L1.16552|
0040a2  f1bb0f1e          CMP      r11,#0x1e             ;6664
0040a6  d303              BCC      |L1.16560|
                  |L1.16552|
0040a8  f04f0001          MOV      r0,#1                 ;6667
0040ac  7020              STRB     r0,[r4,#0]            ;6667
                  |L1.16558|
0040ae  e6b1              B        |L1.15892|
                  |L1.16560|
0040b0  2b01              CMP      r3,#1                 ;6669
0040b2  d1fc              BNE      |L1.16558|
0040b4  b118              CBZ      r0,|L1.16574|
0040b6  4295              CMP      r5,r2                 ;6672
0040b8  daf9              BGE      |L1.16558|
0040ba  2e0a              CMP      r6,#0xa               ;6672
0040bc  d2f7              BCS      |L1.16558|
                  |L1.16574|
0040be  2802              CMP      r0,#2                 ;6674
0040c0  db04              BLT      |L1.16588|
0040c2  4297              CMP      r7,r2                 ;6674
0040c4  daf3              BGE      |L1.16558|
0040c6  9906              LDR      r1,[sp,#0x18]         ;6674
0040c8  290a              CMP      r1,#0xa               ;6674
0040ca  d2f0              BCS      |L1.16558|
                  |L1.16588|
0040cc  2803              CMP      r0,#3                 ;6676
0040ce  db05              BLT      |L1.16604|
0040d0  9905              LDR      r1,[sp,#0x14]         ;6676
0040d2  4291              CMP      r1,r2                 ;6676
0040d4  daeb              BGE      |L1.16558|
0040d6  9904              LDR      r1,[sp,#0x10]         ;6676
0040d8  290a              CMP      r1,#0xa               ;6676
0040da  d2e8              BCS      |L1.16558|
                  |L1.16604|
0040dc  2804              CMP      r0,#4                 ;6678
0040de  db05              BLT      |L1.16620|
0040e0  9903              LDR      r1,[sp,#0xc]          ;6678
0040e2  4291              CMP      r1,r2                 ;6678
0040e4  dae3              BGE      |L1.16558|
0040e6  9902              LDR      r1,[sp,#8]            ;6678
0040e8  290a              CMP      r1,#0xa               ;6678
0040ea  d2e0              BCS      |L1.16558|
                  |L1.16620|
0040ec  2805              CMP      r0,#5                 ;6680
0040ee  db04              BLT      |L1.16634|
0040f0  4594              CMP      r12,r2                ;6680
0040f2  dadc              BGE      |L1.16558|
0040f4  9901              LDR      r1,[sp,#4]            ;6680
0040f6  290a              CMP      r1,#0xa               ;6680
0040f8  d2d9              BCS      |L1.16558|
                  |L1.16634|
0040fa  2806              CMP      r0,#6                 ;6682
0040fc  db04              BLT      |L1.16648|
0040fe  4590              CMP      r8,r2                 ;6682
004100  dad5              BGE      |L1.16558|
004102  9900              LDR      r1,[sp,#0]            ;6682
004104  290a              CMP      r1,#0xa               ;6682
004106  d2d2              BCS      |L1.16558|
                  |L1.16648|
004108  2807              CMP      r0,#7                 ;6684
00410a  db04              BLT      |L1.16662|
00410c  4591              CMP      r9,r2                 ;6684
00410e  dace              BGE      |L1.16558|
004110  f1be0f0a          CMP      lr,#0xa               ;6684
004114  d2cb              BCS      |L1.16558|
                  |L1.16662|
004116  2808              CMP      r0,#8                 ;6686
004118  db04              BLT      |L1.16676|
00411a  4592              CMP      r10,r2                ;6686
00411c  dac7              BGE      |L1.16558|
00411e  f1bb0f0a          CMP      r11,#0xa              ;6686
004122  d2c4              BCS      |L1.16558|
                  |L1.16676|
004124  f04f0000          MOV      r0,#0                 ;6689
004128  7020              STRB     r0,[r4,#0]            ;6689
                  |L1.16682|
00412a  e673              B        |L1.15892|
                  |L1.16684|
00412c  4823              LDR      r0,|L1.16828|
00412e  4d24              LDR      r5,|L1.16832|
004130  4e24              LDR      r6,|L1.16836|
004132  f9b00000          LDRSH    r0,[r0,#0]            ;6695  ; NUMDT
004136  f9b55000          LDRSH    r5,[r5,#0]            ;6696
00413a  6836              LDR      r6,[r6,#0]            ;6696
00413c  b110              CBZ      r0,|L1.16708|
00413e  428d              CMP      r5,r1                 ;6696
004140  dc1d              BGT      |L1.16766|
004142  b9e6              CBNZ     r6,|L1.16766|
                  |L1.16708|
004144  4f1e              LDR      r7,|L1.16832|
004146  f8dfc07c          LDR      r12,|L1.16836|
00414a  2801              CMP      r0,#1                 ;6698
00414c  f9b77002          LDRSH    r7,[r7,#2]            ;6698
004150  f8dcc004          LDR      r12,[r12,#4]          ;6698
004154  dd04              BLE      |L1.16736|
004156  428f              CMP      r7,r1                 ;6698
004158  dc11              BGT      |L1.16766|
00415a  f1bc0f00          CMP      r12,#0                ;6698
00415e  d10e              BNE      |L1.16766|
                  |L1.16736|
004160  f8df805c          LDR      r8,|L1.16832|
004164  f8df905c          LDR      r9,|L1.16836|
004168  2802              CMP      r0,#2                 ;6700
00416a  f9b88004          LDRSH    r8,[r8,#4]            ;6700
00416e  f8d99008          LDR      r9,[r9,#8]            ;6700
004172  dd08              BLE      |L1.16774|
004174  4588              CMP      r8,r1                 ;6700
004176  dc02              BGT      |L1.16766|
004178  f1b90f00          CMP      r9,#0                 ;6700
00417c  d003              BEQ      |L1.16774|
                  |L1.16766|
00417e  f04f0001          MOV      r0,#1                 ;6703
004182  7020              STRB     r0,[r4,#0]            ;6703
004184  e646              B        |L1.15892|
                  |L1.16774|
004186  2b01              CMP      r3,#1                 ;6705
004188  d191              BNE      |L1.16558|
00418a  b118              CBZ      r0,|L1.16788|
00418c  4295              CMP      r5,r2                 ;6708
00418e  da8e              BGE      |L1.16558|
004190  2e00              CMP      r6,#0                 ;6708
004192  d18c              BNE      |L1.16558|
                  |L1.16788|
004194  2802              CMP      r0,#2                 ;6710
004196  db04              BLT      |L1.16802|
004198  4297              CMP      r7,r2                 ;6710
00419a  da88              BGE      |L1.16558|
00419c  f1bc0f00          CMP      r12,#0                ;6710
0041a0  d185              BNE      |L1.16558|
                  |L1.16802|
0041a2  2803              CMP      r0,#3                 ;6712
0041a4  db04              BLT      |L1.16816|
0041a6  4590              CMP      r8,r2                 ;6712
0041a8  dabf              BGE      |L1.16682|
0041aa  f1b90f00          CMP      r9,#0                 ;6712
0041ae  d1bc              BNE      |L1.16682|
                  |L1.16816|
0041b0  f04f0000          MOV      r0,#0                 ;6715
0041b4  7020              STRB     r0,[r4,#0]            ;6715
0041b6  e62d              B        |L1.15892|
;;;6721   
                          ENDP

                  |L1.16824|
                          DCD      bps
                  |L1.16828|
                          DCD      NUMDT
                  |L1.16832|
                          DCD      t_ext
                  |L1.16836|
                          DCD      ND_EXT

                          AREA ||area_number.2||, CODE, READONLY, ALIGN=2

                          EXPORTAS ||area_number.2||, ||.text||
                  samokalibr_init PROC
;;;218    //-----------------------------------------------
;;;219    void ke_start(char in)
000000  4902              LDR      r1,|L2.12|
;;;220    {          
000002  f24060f9          MOV      r0,#0x6f9
;;;221    ke_start_stat=(enum_ke_start_stat)0;		 
000006  87c8              STRH     r0,[r1,#0x3e]
000008  4770              BX       lr
;;;222    
;;;223    if(spc_stat==spcVZ)ke_start_stat=kssNOT_VZ;
;;;224    else if(BAT_IS_ON[in]!=bisON)ke_start_stat=kssNOT_BAT;
;;;225    else if(bat[in]._av&(1<<0))ke_start_stat=kssNOT_BAT_AV;
;;;226    else if(bat[in]._temper_stat&(1<<1))ke_start_stat=kssNOT_BAT_AV_T;
;;;227    else if(bat[in]._av&(1<<1))ke_start_stat=kssNOT_BAT_AV_ASS;
;;;228    else if(bat[in]._Ib>IKB)ke_start_stat=kssNOT_BAT_ZAR;
;;;229    else if(bat[in]._Ib<-IKB)ke_start_stat=kssNOT_BAT_RAZR;
;;;230    else if((spc_stat==spcKE)&&(spc_bat==0))ke_start_stat=kssNOT_KE1;
;;;231    else if((spc_stat==spcKE)&&(spc_bat==1))ke_start_stat=kssNOT_KE2;
;;;232    else 
;;;233    	{
;;;234    
;;;235    	ke_start_stat=kssYES;
;;;236    
;;;237    	spc_stat=spcKE;
;;;238    	__ee_spc_stat=spcKE;
;;;239    	lc640_write_int(EE_SPC_STAT,__ee_spc_stat);
;;;240    	
;;;241    	spc_bat=in;
;;;242    	__ee_spc_bat=in;
;;;243    	lc640_write_int(EE_SPC_BAT,__ee_spc_bat);
;;;244    
;;;245    	bat[in]._zar_cnt_ke=0;
;;;246    	lc640_write_int(ADR_EE_BAT_ZAR_CNT_KE[in],0);
;;;247    	
;;;248    	spc_phase=0;
;;;249    	__ee_spc_phase=0;
;;;250    	lc640_write_int(EE_SPC_PHASE,__ee_spc_phase);
;;;251    
;;;252    	//ke_mem_hndl(in,lc640_read_int(ADR_EE_BAT_ZAR_CNT_KE[spc_bat]));
;;;253    
;;;254    		{					
;;;255    		signed short temp_temp;
;;;256    		signed char temp;
;;;257    		temp_temp=bat[in]._u_old[((bat_u_old_cnt+1)&0x07)]; 
;;;258    		    
;;;259    		temp=LPC_RTC->YEAR;
;;;260    		gran_char(&temp,1,99);
;;;261    		*((char*)(&(ke_date[0])))=temp;
;;;262    			
;;;263    		temp=LPC_RTC->MONTH;
;;;264    		gran_char(&temp,1,12);
;;;265    		*(((char*)(&(ke_date[0])))+1)=temp;
;;;266    		
;;;267    		temp=LPC_RTC->DOM;
;;;268    		gran_char(&temp,1,31);
;;;269    		*(((char*)(&(ke_date[0])))+2)=temp;			
;;;270    				
;;;271    		*(((char*)(&(ke_date[0])))+3)=*((char*)&temp_temp);
;;;272    		lc640_write_long(EE_SPC_KE_DATE0,ke_date[0]);
;;;273    
;;;274    		temp=LPC_RTC->HOUR;
;;;275    		gran_char(&temp,0,23);
;;;276    		*((char*)(&(ke_date[1])))=temp;
;;;277                   
;;;278    		temp=LPC_RTC->MIN;
;;;279    		gran_char(&temp,0,59);
;;;280    		*(((char*)(&(ke_date[1])))+1)=temp;
;;;281    	          
;;;282    		temp=LPC_RTC->SEC;
;;;283    		gran_char(&temp,0,59);
;;;284    		*(((char*)(&(ke_date[1])))+2)=temp;
;;;285    			
;;;286    		*(((char*)(&(ke_date[1])))+3)=*(((char*)&temp_temp)+1);
;;;287    		lc640_write_long(EE_SPC_KE_DATE1,ke_date[1]);
;;;288    		}
;;;289    
;;;290    	}
;;;291    }
;;;292    
                          ENDP

00000a  0000              DCW      0x0000
                  |L2.12|
                          DCD      ||area_number.21||

                          AREA ||area_number.3||, CODE, READONLY, ALIGN=2

                          EXPORTAS ||area_number.3||, ||.text||
                  adc_drv6 PROC
;;;218    //-----------------------------------------------
;;;219    void ke_start(char in)
000000  e92d41f0          PUSH     {r4-r8,lr}
;;;220    {          
000004  4c80              LDR      r4,|L3.520|
;;;221    ke_start_stat=(enum_ke_start_stat)0;		 
000006  8860              LDRH     r0,[r4,#2]  ; adc_self_ch_buff
000008  8821              LDRH     r1,[r4,#0]  ; adc_self_ch_buff
00000a  1a40              SUBS     r0,r0,r1
00000c  b200              SXTH     r0,r0
;;;222    
;;;223    if(spc_stat==spcVZ)ke_start_stat=kssNOT_VZ;
00000e  f7fffffe          BL       abs_pal
000012  1da5              ADDS     r5,r4,#6
000014  8028              STRH     r0,[r5,#0]
000016  88a0              LDRH     r0,[r4,#4]  ; adc_self_ch_buff
;;;224    else if(BAT_IS_ON[in]!=bisON)ke_start_stat=kssNOT_BAT;
000018  8861              LDRH     r1,[r4,#2]  ; adc_self_ch_buff
00001a  1a40              SUBS     r0,r0,r1
00001c  b200              SXTH     r0,r0
00001e  f7fffffe          BL       abs_pal
000022  8068              STRH     r0,[r5,#2]
000024  88a0              LDRH     r0,[r4,#4]  ; adc_self_ch_buff
;;;225    else if(bat[in]._av&(1<<0))ke_start_stat=kssNOT_BAT_AV;
;;;226    else if(bat[in]._temper_stat&(1<<1))ke_start_stat=kssNOT_BAT_AV_T;
;;;227    else if(bat[in]._av&(1<<1))ke_start_stat=kssNOT_BAT_AV_ASS;
;;;228    else if(bat[in]._Ib>IKB)ke_start_stat=kssNOT_BAT_ZAR;
;;;229    else if(bat[in]._Ib<-IKB)ke_start_stat=kssNOT_BAT_RAZR;
;;;230    else if((spc_stat==spcKE)&&(spc_bat==0))ke_start_stat=kssNOT_KE1;
;;;231    else if((spc_stat==spcKE)&&(spc_bat==1))ke_start_stat=kssNOT_KE2;
;;;232    else 
;;;233    	{
;;;234    
;;;235    	ke_start_stat=kssYES;
;;;236    
;;;237    	spc_stat=spcKE;
;;;238    	__ee_spc_stat=spcKE;
;;;239    	lc640_write_int(EE_SPC_STAT,__ee_spc_stat);
;;;240    	
;;;241    	spc_bat=in;
;;;242    	__ee_spc_bat=in;
;;;243    	lc640_write_int(EE_SPC_BAT,__ee_spc_bat);
;;;244    
;;;245    	bat[in]._zar_cnt_ke=0;
;;;246    	lc640_write_int(ADR_EE_BAT_ZAR_CNT_KE[in],0);
;;;247    	
;;;248    	spc_phase=0;
;;;249    	__ee_spc_phase=0;
;;;250    	lc640_write_int(EE_SPC_PHASE,__ee_spc_phase);
;;;251    
;;;252    	//ke_mem_hndl(in,lc640_read_int(ADR_EE_BAT_ZAR_CNT_KE[spc_bat]));
;;;253    
;;;254    		{					
;;;255    		signed short temp_temp;
;;;256    		signed char temp;
;;;257    		temp_temp=bat[in]._u_old[((bat_u_old_cnt+1)&0x07)]; 
;;;258    		    
;;;259    		temp=LPC_RTC->YEAR;
;;;260    		gran_char(&temp,1,99);
;;;261    		*((char*)(&(ke_date[0])))=temp;
;;;262    			
;;;263    		temp=LPC_RTC->MONTH;
;;;264    		gran_char(&temp,1,12);
;;;265    		*(((char*)(&(ke_date[0])))+1)=temp;
;;;266    		
;;;267    		temp=LPC_RTC->DOM;
;;;268    		gran_char(&temp,1,31);
;;;269    		*(((char*)(&(ke_date[0])))+2)=temp;			
;;;270    				
;;;271    		*(((char*)(&(ke_date[0])))+3)=*((char*)&temp_temp);
;;;272    		lc640_write_long(EE_SPC_KE_DATE0,ke_date[0]);
;;;273    
;;;274    		temp=LPC_RTC->HOUR;
;;;275    		gran_char(&temp,0,23);
;;;276    		*((char*)(&(ke_date[1])))=temp;
;;;277                   
;;;278    		temp=LPC_RTC->MIN;
;;;279    		gran_char(&temp,0,59);
;;;280    		*(((char*)(&(ke_date[1])))+1)=temp;
;;;281    	          
;;;282    		temp=LPC_RTC->SEC;
;;;283    		gran_char(&temp,0,59);
;;;284    		*(((char*)(&(ke_date[1])))+2)=temp;
;;;285    			
;;;286    		*(((char*)(&(ke_date[1])))+3)=*(((char*)&temp_temp)+1);
;;;287    		lc640_write_long(EE_SPC_KE_DATE1,ke_date[1]);
;;;288    		}
;;;289    
;;;290    	}
;;;291    }
000026  8821              LDRH     r1,[r4,#0]  ; adc_self_ch_buff
000028  1a40              SUBS     r0,r0,r1
00002a  b200              SXTH     r0,r0                 ;223
00002c  f7fffffe          BL       abs_pal
000030  80a8              STRH     r0,[r5,#4]            ;225
000032  f44f7196          MOV      r1,#0x12c             ;225
000036  f1a40692          SUB      r6,r4,#0x92           ;225
00003a  4288              CMP      r0,r1                 ;225
00003c  da02              BGE      |L3.68|
00003e  88a0              LDRH     r0,[r4,#4]            ;225  ; adc_self_ch_buff
000040  8570              STRH     r0,[r6,#0x2a]         ;225
000042  e00c              B        |L3.94|
                  |L3.68|
000044  f9b50002          LDRSH    r0,[r5,#2]            ;225  ; adc_self_ch_disp
000048  4288              CMP      r0,r1                 ;225
00004a  da02              BGE      |L3.82|
00004c  8860              LDRH     r0,[r4,#2]            ;226  ; adc_self_ch_buff
00004e  8570              STRH     r0,[r6,#0x2a]         ;226
000050  e005              B        |L3.94|
                  |L3.82|
000052  f9b50000          LDRSH    r0,[r5,#0]            ;226  ; adc_self_ch_disp
000056  4288              CMP      r0,r1                 ;226
000058  da01              BGE      |L3.94|
00005a  8820              LDRH     r0,[r4,#0]  ; adc_self_ch_buff
00005c  8570              STRH     r0,[r6,#0x2a]         ;227
                  |L3.94|
00005e  78b7              LDRB     r7,[r6,#2]            ;227  ; adc_ch_net
000060  2200              MOVS     r2,#0                 ;227
000062  b3f7              CBZ      r7,|L3.226|
000064  7973              LDRB     r3,[r6,#5]            ;227  ; adc_window_flag
000066  4869              LDR      r0,|L3.524|
000068  b18b              CBZ      r3,|L3.142|
00006a  f9b6102a          LDRSH    r1,[r6,#0x2a]         ;228  ; adc_result
00006e  6804              LDR      r4,[r0,#0]            ;228  ; main_power_buffer
000070  eb0404a1          ADD      r4,r4,r1,ASR #2       ;228
000074  6004              STR      r4,[r0,#0]            ;228  ; main_power_buffer
000076  6844              LDR      r4,[r0,#4]            ;228  ; main_power_buffer
000078  eb0404a1          ADD      r4,r4,r1,ASR #2       ;228
00007c  6044              STR      r4,[r0,#4]  ; main_power_buffer
00007e  6884              LDR      r4,[r0,#8]            ;229  ; main_power_buffer
000080  eb0404a1          ADD      r4,r4,r1,ASR #2       ;229
000084  6084              STR      r4,[r0,#8]            ;229  ; main_power_buffer
000086  68c4              LDR      r4,[r0,#0xc]          ;229  ; main_power_buffer
000088  eb0401a1          ADD      r1,r4,r1,ASR #2       ;229
00008c  60c1              STR      r1,[r0,#0xc]          ;221  ; main_power_buffer
                  |L3.142|
00008e  f9b6102a          LDRSH    r1,[r6,#0x2a]         ;230  ; adc_result
000092  2964              CMP      r1,#0x64              ;230
000094  da04              BGE      |L3.160|
000096  8df1              LDRH     r1,[r6,#0x2e]         ;231  ; adc_zero_cnt
000098  f1010101          ADD      r1,r1,#1              ;231
00009c  85f1              STRH     r1,[r6,#0x2e]         ;230
00009e  e000              B        |L3.162|
                  |L3.160|
0000a0  85f2              STRH     r2,[r6,#0x2e]         ;230
                  |L3.162|
0000a2  f9b6402e          LDRSH    r4,[r6,#0x2e]  ; adc_zero_cnt
0000a6  f44f61fa          MOV      r1,#0x7d0             ;231
0000aa  428c              CMP      r4,r1                 ;235
0000ac  db05              BLT      |L3.186|
0000ae  85f1              STRH     r1,[r6,#0x2e]         ;237
0000b0  6002              STR      r2,[r0,#0]            ;238  ; main_power_buffer
0000b2  6042              STR      r2,[r0,#4]            ;238  ; main_power_buffer
0000b4  6082              STR      r2,[r0,#8]            ;239  ; main_power_buffer
0000b6  60c2              STR      r2,[r0,#0xc]          ;239  ; main_power_buffer
0000b8  8532              STRH     r2,[r6,#0x28]         ;239
                  |L3.186|
0000ba  8df1              LDRH     r1,[r6,#0x2e]         ;239  ; adc_zero_cnt
0000bc  2905              CMP      r1,#5                 ;239
0000be  d14f              BNE      |L3.352|
0000c0  b1bb              CBZ      r3,|L3.242|
0000c2  8db1              LDRH     r1,[r6,#0x2c]         ;242  ; adc_gorb_cnt
0000c4  f1010101          ADD      r1,r1,#1              ;243
0000c8  b209              SXTH     r1,r1                 ;243
0000ca  85b1              STRH     r1,[r6,#0x2c]         ;243
0000cc  f5b17f00          CMP      r1,#0x200             ;243
0000d0  db00              BLT      |L3.212|
0000d2  85b2              STRH     r2,[r6,#0x2c]         ;246
                  |L3.212|
0000d4  f9b6102c          LDRSH    r1,[r6,#0x2c]         ;246  ; adc_gorb_cnt
0000d8  064c              LSLS     r4,r1,#25             ;246
0000da  d10a              BNE      |L3.242|
0000dc  ea4f11e1          ASR      r1,r1,#7              ;248
0000e0  e000              B        |L3.228|
                  |L3.226|
0000e2  e015              B        |L3.272|
                  |L3.228|
0000e4  f8504021          LDR      r4,[r0,r1,LSL #2]     ;250
0000e8  ea4f2424          ASR      r4,r4,#8              ;250
0000ec  8534              STRH     r4,[r6,#0x28]         ;257
0000ee  f8402021          STR      r2,[r0,r1,LSL #2]     ;257
                  |L3.242|
0000f2  f9b60030          LDRSH    r0,[r6,#0x30]         ;257  ; adc_window_cnt
0000f6  2896              CMP      r0,#0x96              ;257
0000f8  dd01              BLE      |L3.254|
0000fa  b103              CBZ      r3,|L3.254|
0000fc  7172              STRB     r2,[r6,#5]            ;257
                  |L3.254|
0000fe  381f              SUBS     r0,r0,#0x1f           ;257
000100  2827              CMP      r0,#0x27              ;259
000102  d22d              BCS      |L3.352|
000104  7970              LDRB     r0,[r6,#5]            ;259  ; adc_window_flag
000106  bb58              CBNZ     r0,|L3.352|
000108  f04f0001          MOV      r0,#1                 ;260
00010c  7170              STRB     r0,[r6,#5]            ;260
00010e  e027              B        |L3.352|
                  |L3.272|
000110  483f              LDR      r0,|L3.528|
000112  78f5              LDRB     r5,[r6,#3]            ;260  ; adc_ch
000114  7933              LDRB     r3,[r6,#4]            ;261  ; adc_ch_cnt
000116  eb001485          ADD      r4,r0,r5,LSL #6       ;261
00011a  f9b6102a          LDRSH    r1,[r6,#0x2a]         ;261  ; adc_result
00011e  f8441023          STR      r1,[r4,r3,LSL #2]     ;263
000122  0798              LSLS     r0,r3,#30             ;264
000124  d10f              BNE      |L3.326|
000126  4601              MOV      r1,r0                 ;264
                  |L3.296|
000128  f854c020          LDR      r12,[r4,r0,LSL #2]    ;264
00012c  4461              ADD      r1,r1,r12             ;265
00012e  f1000001          ADD      r0,r0,#1              ;265
000132  b2c0              UXTB     r0,r0                 ;267
000134  2810              CMP      r0,#0x10              ;267
000136  d3f7              BCC      |L3.296|
000138  ea4f1021          ASR      r0,r1,#4              ;268
00013c  4933              LDR      r1,|L3.524|
00013e  f1a10120          SUB      r1,r1,#0x20           ;268
000142  f8210015          STRH     r0,[r1,r5,LSL #1]     ;269
                  |L3.326|
000146  1c6d              ADDS     r5,r5,#1              ;271
000148  b2e8              UXTB     r0,r5                 ;271
00014a  70f0              STRB     r0,[r6,#3]            ;271
00014c  2810              CMP      r0,#0x10              ;272
00014e  d307              BCC      |L3.352|
000150  70f2              STRB     r2,[r6,#3]            ;272
000152  f1030301          ADD      r3,r3,#1              ;272
000156  b2d8              UXTB     r0,r3                 ;274
000158  7130              STRB     r0,[r6,#4]            ;274
00015a  2810              CMP      r0,#0x10              ;275
00015c  d300              BCC      |L3.352|
00015e  7132              STRB     r2,[r6,#4]            ;275
                  |L3.352|
000160  7072              STRB     r2,[r6,#1]            ;275
000162  f1070701          ADD      r7,r7,#1              ;275
000166  f0070001          AND      r0,r7,#1              ;276
00016a  70b0              STRB     r0,[r6,#2]            ;278
00016c  4a29              LDR      r2,|L3.532|
00016e  b130              CBZ      r0,|L3.382|
000170  6810              LDR      r0,[r2,#0]            ;279
000172  f02000ff          BIC      r0,r0,#0xff           ;279
000176  f1000004          ADD      r0,r0,#4              ;279
00017a  6010              STR      r0,[r2,#0]            ;280
00017c  e03d              B        |L3.506|
                  |L3.382|
00017e  78f1              LDRB     r1,[r6,#3]            ;282  ; adc_ch
000180  0708              LSLS     r0,r1,#28             ;282
000182  d406              BMI      |L3.402|
000184  6810              LDR      r0,[r2,#0]            ;283
000186  f02000ff          BIC      r0,r0,#0xff           ;283
00018a  f1000001          ADD      r0,r0,#1              ;283
00018e  6010              STR      r0,[r2,#0]            ;284
000190  e005              B        |L3.414|
                  |L3.402|
000192  6810              LDR      r0,[r2,#0]            ;286
000194  f02000ff          BIC      r0,r0,#0xff           ;286
000198  f1000002          ADD      r0,r0,#2              ;287
00019c  6010              STR      r0,[r2,#0]            ;287
                  |L3.414|
00019e  481e              LDR      r0,|L3.536|
0001a0  6803              LDR      r3,[r0,#0]            ;287
0001a2  f0435380          ORR      r3,r3,#0x10000000
0001a6  6003              STR      r3,[r0,#0]            ;231
0001a8  6a03              LDR      r3,[r0,#0x20]         ;231
0001aa  f0434380          ORR      r3,r3,#0x40000000     ;231
0001ae  6203              STR      r3,[r0,#0x20]
0001b0  6e03              LDR      r3,[r0,#0x60]
0001b2  f0436380          ORR      r3,r3,#0x4000000
0001b6  6603              STR      r3,[r0,#0x60]
0001b8  07cb              LSLS     r3,r1,#31
0001ba  d00a              BEQ      |L3.466|
0001bc  6943              LDR      r3,[r0,#0x14]
0001be  f0435380          ORR      r3,r3,#0x10000000
0001c2  6143              STR      r3,[r0,#0x14]
                  |L3.452|
0001c4  078b              LSLS     r3,r1,#30
0001c6  d409              BMI      |L3.476|
0001c8  6b43              LDR      r3,[r0,#0x34]
0001ca  f0234380          BIC      r3,r3,#0x40000000
0001ce  6343              STR      r3,[r0,#0x34]
0001d0  e008              B        |L3.484|
                  |L3.466|
0001d2  6943              LDR      r3,[r0,#0x14]
0001d4  f0235380          BIC      r3,r3,#0x10000000
0001d8  6143              STR      r3,[r0,#0x14]
0001da  e7f3              B        |L3.452|
                  |L3.476|
0001dc  6b43              LDR      r3,[r0,#0x34]
0001de  f0434380          ORR      r3,r3,#0x40000000
0001e2  6343              STR      r3,[r0,#0x34]
                  |L3.484|
0001e4  0749              LSLS     r1,r1,#29
0001e6  d404              BMI      |L3.498|
0001e8  6f41              LDR      r1,[r0,#0x74]
0001ea  f0216180          BIC      r1,r1,#0x4000000
0001ee  6741              STR      r1,[r0,#0x74]
0001f0  e003              B        |L3.506|
                  |L3.498|
0001f2  6f41              LDR      r1,[r0,#0x74]
0001f4  f0416180          ORR      r1,r1,#0x4000000
0001f8  6741              STR      r1,[r0,#0x74]
                  |L3.506|
0001fa  6810              LDR      r0,[r2,#0]
0001fc  f0407080          ORR      r0,r0,#0x1000000
000200  6010              STR      r0,[r2,#0]
000202  e8bd81f0          POP      {r4-r8,pc}
;;;292    
                          ENDP

000206  0000              DCW      0x0000
                  |L3.520|
                          DCD      ||area_number.21||+0x92
                  |L3.524|
                          DCD      ||.bss||+0x420
                  |L3.528|
                          DCD      ||.bss||
                  |L3.532|
                          DCD      0x40034000
                  |L3.536|
                          DCD      0x2009c000

                          AREA ||area_number.4||, CODE, READONLY, ALIGN=2

                          EXPORTAS ||area_number.4||, ||.text||
                  inv_drv PROC
;;;218    //-----------------------------------------------
;;;219    void ke_start(char in)
000000  b570              PUSH     {r4-r6,lr}
;;;220    {          
000002  4604              MOV      r4,r0
000004  f04f0207          MOV      r2,#7
;;;221    ke_start_stat=(enum_ke_start_stat)0;		 
000008  f04f0101          MOV      r1,#1
00000c  48a4              LDR      r0,|L4.672|
;;;222    
;;;223    if(spc_stat==spcVZ)ke_start_stat=kssNOT_VZ;
00000e  f7fffffe          BL       gran_char
000012  48a4              LDR      r0,|L4.676|
000014  eb040144          ADD      r1,r4,r4,LSL #1
;;;224    else if(BAT_IS_ON[in]!=bisON)ke_start_stat=kssNOT_BAT;
000018  eb001541          ADD      r5,r0,r1,LSL #5
00001c  f8950047          LDRB     r0,[r5,#0x47]
000020  f8951046          LDRB     r1,[r5,#0x46]
000024  ea800001          EOR      r0,r0,r1
;;;225    else if(bat[in]._av&(1<<0))ke_start_stat=kssNOT_BAT_AV;
;;;226    else if(bat[in]._temper_stat&(1<<1))ke_start_stat=kssNOT_BAT_AV_T;
;;;227    else if(bat[in]._av&(1<<1))ke_start_stat=kssNOT_BAT_AV_ASS;
;;;228    else if(bat[in]._Ib>IKB)ke_start_stat=kssNOT_BAT_ZAR;
;;;229    else if(bat[in]._Ib<-IKB)ke_start_stat=kssNOT_BAT_RAZR;
;;;230    else if((spc_stat==spcKE)&&(spc_bat==0))ke_start_stat=kssNOT_KE1;
;;;231    else if((spc_stat==spcKE)&&(spc_bat==1))ke_start_stat=kssNOT_KE2;
;;;232    else 
;;;233    	{
;;;234    
;;;235    	ke_start_stat=kssYES;
;;;236    
;;;237    	spc_stat=spcKE;
;;;238    	__ee_spc_stat=spcKE;
;;;239    	lc640_write_int(EE_SPC_STAT,__ee_spc_stat);
;;;240    	
;;;241    	spc_bat=in;
;;;242    	__ee_spc_bat=in;
;;;243    	lc640_write_int(EE_SPC_BAT,__ee_spc_bat);
;;;244    
;;;245    	bat[in]._zar_cnt_ke=0;
;;;246    	lc640_write_int(ADR_EE_BAT_ZAR_CNT_KE[in],0);
;;;247    	
;;;248    	spc_phase=0;
;;;249    	__ee_spc_phase=0;
;;;250    	lc640_write_int(EE_SPC_PHASE,__ee_spc_phase);
;;;251    
;;;252    	//ke_mem_hndl(in,lc640_read_int(ADR_EE_BAT_ZAR_CNT_KE[spc_bat]));
;;;253    
;;;254    		{					
;;;255    		signed short temp_temp;
;;;256    		signed char temp;
;;;257    		temp_temp=bat[in]._u_old[((bat_u_old_cnt+1)&0x07)]; 
;;;258    		    
;;;259    		temp=LPC_RTC->YEAR;
;;;260    		gran_char(&temp,1,99);
;;;261    		*((char*)(&(ke_date[0])))=temp;
;;;262    			
;;;263    		temp=LPC_RTC->MONTH;
;;;264    		gran_char(&temp,1,12);
;;;265    		*(((char*)(&(ke_date[0])))+1)=temp;
;;;266    		
;;;267    		temp=LPC_RTC->DOM;
;;;268    		gran_char(&temp,1,31);
;;;269    		*(((char*)(&(ke_date[0])))+2)=temp;			
;;;270    				
;;;271    		*(((char*)(&(ke_date[0])))+3)=*((char*)&temp_temp);
;;;272    		lc640_write_long(EE_SPC_KE_DATE0,ke_date[0]);
;;;273    
;;;274    		temp=LPC_RTC->HOUR;
;;;275    		gran_char(&temp,0,23);
;;;276    		*((char*)(&(ke_date[1])))=temp;
;;;277                   
;;;278    		temp=LPC_RTC->MIN;
;;;279    		gran_char(&temp,0,59);
;;;280    		*(((char*)(&(ke_date[1])))+1)=temp;
;;;281    	          
;;;282    		temp=LPC_RTC->SEC;
;;;283    		gran_char(&temp,0,59);
;;;284    		*(((char*)(&(ke_date[1])))+2)=temp;
;;;285    			
;;;286    		*(((char*)(&(ke_date[1])))+3)=*(((char*)&temp_temp)+1);
;;;287    		lc640_write_long(EE_SPC_KE_DATE1,ke_date[1]);
;;;288    		}
;;;289    
;;;290    	}
;;;291    }
000028  4a9f              LDR      r2,|L4.680|
00002a  b100              CBZ      r0,|L4.46|
00002c  7050              STRB     r0,[r2,#1]
                  |L4.46|
00002e  ea010100          AND      r1,r1,r0              ;225
000032  b101              CBZ      r1,|L4.54|
000034  7091              STRB     r1,[r2,#2]            ;225
                  |L4.54|
000036  ea000301          AND      r3,r0,r1              ;225
00003a  07db              LSLS     r3,r3,#31             ;225
00003c  d027              BEQ      |L4.142|
00003e  78d0              LDRB     r0,[r2,#3]            ;225  ; plazma_inv
000040  f1000001          ADD      r0,r0,#1              ;225
000044  70d0              STRB     r0,[r2,#3]            ;225
000046  b134              CBZ      r4,|L4.86|
000048  2c01              CMP      r4,#1                 ;225
00004a  d00b              BEQ      |L4.100|
00004c  2c02              CMP      r4,#2                 ;226
00004e  d010              BEQ      |L4.114|
000050  2c03              CMP      r4,#3                 ;226
000052  d015              BEQ      |L4.128|
000054  e120              B        |L4.664|
                  |L4.86|
000056  2301              MOVS     r3,#1                 ;226
000058  461a              MOV      r2,r3                 ;226
00005a  210e              MOVS     r1,#0xe
00005c  a093              ADR      r0,|L4.684|
00005e  f7fffffe          BL       snmp_trap_send
000062  e119              B        |L4.664|
                  |L4.100|
000064  2301              MOVS     r3,#1                 ;227
000066  2202              MOVS     r2,#2
000068  210e              MOVS     r1,#0xe               ;228
00006a  a097              ADR      r0,|L4.712|
00006c  f7fffffe          BL       snmp_trap_send
000070  e112              B        |L4.664|
                  |L4.114|
000072  2301              MOVS     r3,#1                 ;228
000074  2203              MOVS     r2,#3                 ;228
000076  210e              MOVS     r1,#0xe               ;228
000078  a09a              ADR      r0,|L4.740|
00007a  f7fffffe          BL       snmp_trap_send
00007e  e10b              B        |L4.664|
                  |L4.128|
000080  2301              MOVS     r3,#1                 ;229
000082  2204              MOVS     r2,#4                 ;229
000084  210e              MOVS     r1,#0xe               ;229
000086  a09e              ADR      r0,|L4.768|
000088  f7fffffe          BL       snmp_trap_send
00008c  e104              B        |L4.664|
                  |L4.142|
00008e  0783              LSLS     r3,r0,#30             ;230
000090  d529              BPL      |L4.230|
000092  078b              LSLS     r3,r1,#30             ;230
000094  d527              BPL      |L4.230|
000096  78d0              LDRB     r0,[r2,#3]            ;231  ; plazma_inv
000098  f1000001          ADD      r0,r0,#1              ;231
00009c  70d0              STRB     r0,[r2,#3]            ;230
00009e  b134              CBZ      r4,|L4.174|
0000a0  2c01              CMP      r4,#1                 ;230
0000a2  d00b              BEQ      |L4.188|
0000a4  2c02              CMP      r4,#2                 ;231
0000a6  d010              BEQ      |L4.202|
0000a8  2c03              CMP      r4,#3                 ;235
0000aa  d015              BEQ      |L4.216|
0000ac  e0f4              B        |L4.664|
                  |L4.174|
0000ae  2302              MOVS     r3,#2                 ;237
0000b0  2201              MOVS     r2,#1                 ;238
0000b2  210e              MOVS     r1,#0xe               ;238
0000b4  a099              ADR      r0,|L4.796|
0000b6  f7fffffe          BL       snmp_trap_send
0000ba  e0ed              B        |L4.664|
                  |L4.188|
0000bc  2302              MOVS     r3,#2                 ;239
0000be  461a              MOV      r2,r3                 ;241
0000c0  210e              MOVS     r1,#0xe               ;242
0000c2  a09d              ADR      r0,|L4.824|
0000c4  f7fffffe          BL       snmp_trap_send
0000c8  e0e6              B        |L4.664|
                  |L4.202|
0000ca  2302              MOVS     r3,#2                 ;243
0000cc  2203              MOVS     r2,#3                 ;243
0000ce  210e              MOVS     r1,#0xe               ;245
0000d0  a0a0              ADR      r0,|L4.852|
0000d2  f7fffffe          BL       snmp_trap_send
0000d6  e0df              B        |L4.664|
                  |L4.216|
0000d8  2302              MOVS     r3,#2                 ;246
0000da  2204              MOVS     r2,#4                 ;246
0000dc  210e              MOVS     r1,#0xe               ;248
0000de  a0a4              ADR      r0,|L4.880|
0000e0  f7fffffe          BL       snmp_trap_send
0000e4  e0d8              B        |L4.664|
                  |L4.230|
0000e6  0743              LSLS     r3,r0,#29             ;250
0000e8  d529              BPL      |L4.318|
0000ea  074b              LSLS     r3,r1,#29             ;250
0000ec  d527              BPL      |L4.318|
0000ee  78d0              LDRB     r0,[r2,#3]            ;257  ; plazma_inv
0000f0  f1000001          ADD      r0,r0,#1              ;257
0000f4  70d0              STRB     r0,[r2,#3]            ;257
0000f6  b134              CBZ      r4,|L4.262|
0000f8  2c01              CMP      r4,#1                 ;257
0000fa  d00b              BEQ      |L4.276|
0000fc  2c02              CMP      r4,#2                 ;257
0000fe  d010              BEQ      |L4.290|
000100  2c03              CMP      r4,#3                 ;259
000102  d015              BEQ      |L4.304|
000104  e0c8              B        |L4.664|
                  |L4.262|
000106  2303              MOVS     r3,#3                 ;260
000108  2201              MOVS     r2,#1                 ;260
00010a  210e              MOVS     r1,#0xe               ;260
00010c  a09f              ADR      r0,|L4.908|
00010e  f7fffffe          BL       snmp_trap_send
000112  e0c1              B        |L4.664|
                  |L4.276|
000114  2303              MOVS     r3,#3                 ;261
000116  2202              MOVS     r2,#2                 ;261
000118  210e              MOVS     r1,#0xe               ;261
00011a  a0a3              ADR      r0,|L4.936|
00011c  f7fffffe          BL       snmp_trap_send
000120  e0ba              B        |L4.664|
                  |L4.290|
000122  2303              MOVS     r3,#3                 ;264
000124  461a              MOV      r2,r3                 ;264
000126  210e              MOVS     r1,#0xe               ;264
000128  a0a6              ADR      r0,|L4.964|
00012a  f7fffffe          BL       snmp_trap_send
00012e  e0b3              B        |L4.664|
                  |L4.304|
000130  2303              MOVS     r3,#3                 ;265
000132  2204              MOVS     r2,#4                 ;267
000134  210e              MOVS     r1,#0xe               ;267
000136  a0aa              ADR      r0,|L4.992|
000138  f7fffffe          BL       snmp_trap_send
00013c  e0ac              B        |L4.664|
                  |L4.318|
00013e  0703              LSLS     r3,r0,#28             ;268
000140  d529              BPL      |L4.406|
000142  070b              LSLS     r3,r1,#28             ;269
000144  d527              BPL      |L4.406|
000146  78d0              LDRB     r0,[r2,#3]            ;271  ; plazma_inv
000148  f1000001          ADD      r0,r0,#1              ;271
00014c  70d0              STRB     r0,[r2,#3]            ;272
00014e  b134              CBZ      r4,|L4.350|
000150  2c01              CMP      r4,#1                 ;272
000152  d00b              BEQ      |L4.364|
000154  2c02              CMP      r4,#2                 ;272
000156  d010              BEQ      |L4.378|
000158  2c03              CMP      r4,#3                 ;274
00015a  d015              BEQ      |L4.392|
00015c  e09c              B        |L4.664|
                  |L4.350|
00015e  2304              MOVS     r3,#4                 ;275
000160  2201              MOVS     r2,#1                 ;275
000162  210e              MOVS     r1,#0xe               ;275
000164  a0a5              ADR      r0,|L4.1020|
000166  f7fffffe          BL       snmp_trap_send
00016a  e095              B        |L4.664|
                  |L4.364|
00016c  2304              MOVS     r3,#4                 ;278
00016e  2202              MOVS     r2,#2                 ;279
000170  210e              MOVS     r1,#0xe               ;279
000172  a0ab              ADR      r0,|L4.1056|
000174  f7fffffe          BL       snmp_trap_send
000178  e08e              B        |L4.664|
                  |L4.378|
00017a  2304              MOVS     r3,#4                 ;280
00017c  2203              MOVS     r2,#3                 ;280
00017e  210e              MOVS     r1,#0xe               ;282
000180  a0b0              ADR      r0,|L4.1092|
000182  f7fffffe          BL       snmp_trap_send
000186  e087              B        |L4.664|
                  |L4.392|
000188  2304              MOVS     r3,#4                 ;283
00018a  461a              MOV      r2,r3                 ;283
00018c  210e              MOVS     r1,#0xe               ;284
00018e  a0b6              ADR      r0,|L4.1128|
000190  f7fffffe          BL       snmp_trap_send
000194  e080              B        |L4.664|
                  |L4.406|
000196  06c3              LSLS     r3,r0,#27             ;286
000198  d529              BPL      |L4.494|
00019a  06cb              LSLS     r3,r1,#27             ;287
00019c  d527              BPL      |L4.494|
00019e  78d0              LDRB     r0,[r2,#3]            ;287  ; plazma_inv
0001a0  f1000001          ADD      r0,r0,#1              ;287
0001a4  70d0              STRB     r0,[r2,#3]
0001a6  b134              CBZ      r4,|L4.438|
0001a8  2c01              CMP      r4,#1                 ;231
0001aa  d00b              BEQ      |L4.452|
0001ac  2c02              CMP      r4,#2
0001ae  d010              BEQ      |L4.466|
0001b0  2c03              CMP      r4,#3
0001b2  d015              BEQ      |L4.480|
0001b4  e070              B        |L4.664|
                  |L4.438|
0001b6  2305              MOVS     r3,#5
0001b8  2201              MOVS     r2,#1
0001ba  210e              MOVS     r1,#0xe
0001bc  a0b3              ADR      r0,|L4.1164|
0001be  f7fffffe          BL       snmp_trap_send
0001c2  e069              B        |L4.664|
                  |L4.452|
0001c4  2305              MOVS     r3,#5
0001c6  2202              MOVS     r2,#2
0001c8  210e              MOVS     r1,#0xe
0001ca  a0b9              ADR      r0,|L4.1200|
0001cc  f7fffffe          BL       snmp_trap_send
0001d0  e062              B        |L4.664|
                  |L4.466|
0001d2  2305              MOVS     r3,#5
0001d4  2203              MOVS     r2,#3
0001d6  210e              MOVS     r1,#0xe
0001d8  a0be              ADR      r0,|L4.1236|
0001da  f7fffffe          BL       snmp_trap_send
0001de  e05b              B        |L4.664|
                  |L4.480|
0001e0  2305              MOVS     r3,#5
0001e2  2204              MOVS     r2,#4
0001e4  210e              MOVS     r1,#0xe
0001e6  a0c4              ADR      r0,|L4.1272|
0001e8  f7fffffe          BL       snmp_trap_send
0001ec  e054              B        |L4.664|
                  |L4.494|
0001ee  0683              LSLS     r3,r0,#26
0001f0  d529              BPL      |L4.582|
0001f2  068b              LSLS     r3,r1,#26
0001f4  d527              BPL      |L4.582|
0001f6  78d0              LDRB     r0,[r2,#3]  ; plazma_inv
0001f8  f1000001          ADD      r0,r0,#1
0001fc  70d0              STRB     r0,[r2,#3]
0001fe  b134              CBZ      r4,|L4.526|
000200  2c01              CMP      r4,#1
000202  d00b              BEQ      |L4.540|
000204  2c02              CMP      r4,#2
000206  d010              BEQ      |L4.554|
000208  2c03              CMP      r4,#3
00020a  d015              BEQ      |L4.568|
00020c  e044              B        |L4.664|
                  |L4.526|
00020e  2306              MOVS     r3,#6
000210  2201              MOVS     r2,#1
000212  210e              MOVS     r1,#0xe
000214  a0c1              ADR      r0,|L4.1308|
000216  f7fffffe          BL       snmp_trap_send
00021a  e03d              B        |L4.664|
                  |L4.540|
00021c  2306              MOVS     r3,#6
00021e  2202              MOVS     r2,#2
000220  210e              MOVS     r1,#0xe
000222  a0c7              ADR      r0,|L4.1344|
000224  f7fffffe          BL       snmp_trap_send
000228  e036              B        |L4.664|
                  |L4.554|
00022a  2306              MOVS     r3,#6
00022c  2203              MOVS     r2,#3
00022e  210e              MOVS     r1,#0xe
000230  a0cc              ADR      r0,|L4.1380|
000232  f7fffffe          BL       snmp_trap_send
000236  e02f              B        |L4.664|
                  |L4.568|
000238  2306              MOVS     r3,#6
00023a  2204              MOVS     r2,#4
00023c  210e              MOVS     r1,#0xe
00023e  a0d2              ADR      r0,|L4.1416|
000240  f7fffffe          BL       snmp_trap_send
000244  e028              B        |L4.664|
                  |L4.582|
000246  b300              CBZ      r0,|L4.650|
000248  b9f9              CBNZ     r1,|L4.650|
00024a  78d0              LDRB     r0,[r2,#3]  ; plazma_inv
00024c  f1000001          ADD      r0,r0,#1
000250  70d0              STRB     r0,[r2,#3]
000252  b134              CBZ      r4,|L4.610|
000254  2c01              CMP      r4,#1
000256  d00b              BEQ      |L4.624|
000258  2c02              CMP      r4,#2
00025a  d010              BEQ      |L4.638|
00025c  2c03              CMP      r4,#3
00025e  d015              BEQ      |L4.652|
000260  e01a              B        |L4.664|
                  |L4.610|
000262  2300              MOVS     r3,#0
000264  2201              MOVS     r2,#1
000266  210e              MOVS     r1,#0xe
000268  a0d0              ADR      r0,|L4.1452|
00026a  f7fffffe          BL       snmp_trap_send
00026e  e013              B        |L4.664|
                  |L4.624|
000270  2300              MOVS     r3,#0
000272  2202              MOVS     r2,#2
000274  210e              MOVS     r1,#0xe
000276  a0d2              ADR      r0,|L4.1472|
000278  f7fffffe          BL       snmp_trap_send
00027c  e00c              B        |L4.664|
                  |L4.638|
00027e  2300              MOVS     r3,#0
000280  2203              MOVS     r2,#3
000282  210e              MOVS     r1,#0xe
000284  a0d3              ADR      r0,|L4.1492|
000286  f7fffffe          BL       snmp_trap_send
                  |L4.650|
00028a  e005              B        |L4.664|
                  |L4.652|
00028c  2300              MOVS     r3,#0
00028e  2204              MOVS     r2,#4
000290  210e              MOVS     r1,#0xe
000292  a0d5              ADR      r0,|L4.1512|
000294  f7fffffe          BL       snmp_trap_send
                  |L4.664|
000298  f8150f46          LDRB     r0,[r5,#0x46]!
00029c  7068              STRB     r0,[r5,#1]
00029e  bd70              POP      {r4-r6,pc}
;;;292    
                          ENDP

                  |L4.672|
                          DCD      first_inv_slot
                  |L4.676|
                          DCD      inv
                  |L4.680|
                          DCD      ||area_number.21||+0x88
                  |L4.684|
0002ac  496e7665          DCB      "Invertor #1 Alarm, overload",0
0002b0  72746f72
0002b4  20233120
0002b8  416c6172
0002bc  6d2c206f
0002c0  7665726c
0002c4  6f616400
                  |L4.712|
0002c8  496e7665          DCB      "Invertor #2 Alarm, overload",0
0002cc  72746f72
0002d0  20233220
0002d4  416c6172
0002d8  6d2c206f
0002dc  7665726c
0002e0  6f616400
                  |L4.740|
0002e4  496e7665          DCB      "Invertor #3 Alarm, overload",0
0002e8  72746f72
0002ec  20233320
0002f0  416c6172
0002f4  6d2c206f
0002f8  7665726c
0002fc  6f616400
                  |L4.768|
000300  496e7665          DCB      "Invertor #4 Alarm, overload",0
000304  72746f72
000308  20233420
00030c  416c6172
000310  6d2c206f
000314  7665726c
000318  6f616400
                  |L4.796|
00031c  496e7665          DCB      "Invertor #1 Alarm, overheat",0
000320  72746f72
000324  20233120
000328  416c6172
00032c  6d2c206f
000330  76657268
000334  65617400
                  |L4.824|
000338  496e7665          DCB      "Invertor #2 Alarm, overheat",0
00033c  72746f72
000340  20233220
000344  416c6172
000348  6d2c206f
00034c  76657268
000350  65617400
                  |L4.852|
000354  496e7665          DCB      "Invertor #3 Alarm, overheat",0
000358  72746f72
00035c  20233320
000360  416c6172
000364  6d2c206f
000368  76657268
00036c  65617400
                  |L4.880|
000370  496e7665          DCB      "Invertor #4 Alarm, overheat",0
000374  72746f72
000378  20233420
00037c  416c6172
000380  6d2c206f
000384  76657268
000388  65617400
                  |L4.908|
00038c  496e7665          DCB      "Invertor #1 Alarm, is warm",0
000390  72746f72
000394  20233120
000398  416c6172
00039c  6d2c2069
0003a0  73207761
0003a4  726d00  
0003a7  00                DCB      0
                  |L4.936|
0003a8  496e7665          DCB      "Invertor #2 Alarm, is warm",0
0003ac  72746f72
0003b0  20233220
0003b4  416c6172
0003b8  6d2c2069
0003bc  73207761
0003c0  726d00  
0003c3  00                DCB      0
                  |L4.964|
0003c4  496e7665          DCB      "Invertor #3 Alarm, is warm",0
0003c8  72746f72
0003cc  20233320
0003d0  416c6172
0003d4  6d2c2069
0003d8  73207761
0003dc  726d00  
0003df  00                DCB      0
                  |L4.992|
0003e0  496e7665          DCB      "Invertor #4 Alarm, is warm",0
0003e4  72746f72
0003e8  20233420
0003ec  416c6172
0003f0  6d2c2069
0003f4  73207761
0003f8  726d00  
0003fb  00                DCB      0
                  |L4.1020|
0003fc  496e7665          DCB      "Invertor #1 Alarm, voltage is up",0
000400  72746f72
000404  20233120
000408  416c6172
00040c  6d2c2076
000410  6f6c7461
000414  67652069
000418  73207570
00041c  00      
00041d  00                DCB      0
00041e  00                DCB      0
00041f  00                DCB      0
                  |L4.1056|
000420  496e7665          DCB      "Invertor #2 Alarm, voltage is up",0
000424  72746f72
000428  20233220
00042c  416c6172
000430  6d2c2076
000434  6f6c7461
000438  67652069
00043c  73207570
000440  00      
000441  00                DCB      0
000442  00                DCB      0
000443  00                DCB      0
                  |L4.1092|
000444  496e7665          DCB      "Invertor #3 Alarm, voltage is up",0
000448  72746f72
00044c  20233320
000450  416c6172
000454  6d2c2076
000458  6f6c7461
00045c  67652069
000460  73207570
000464  00      
000465  00                DCB      0
000466  00                DCB      0
000467  00                DCB      0
                  |L4.1128|
000468  496e7665          DCB      "Invertor #4 Alarm, voltage is up",0
00046c  72746f72
000470  20233420
000474  416c6172
000478  6d2c2076
00047c  6f6c7461
000480  67652069
000484  73207570
000488  00      
000489  00                DCB      0
00048a  00                DCB      0
00048b  00                DCB      0
                  |L4.1164|
00048c  496e7665          DCB      "Invertor #1 Alarm, voltage is down",0
000490  72746f72
000494  20233120
000498  416c6172
00049c  6d2c2076
0004a0  6f6c7461
0004a4  67652069
0004a8  7320646f
0004ac  776e00  
0004af  00                DCB      0
                  |L4.1200|
0004b0  496e7665          DCB      "Invertor #2 Alarm, voltage is down",0
0004b4  72746f72
0004b8  20233220
0004bc  416c6172
0004c0  6d2c2076
0004c4  6f6c7461
0004c8  67652069
0004cc  7320646f
0004d0  776e00  
0004d3  00                DCB      0
                  |L4.1236|
0004d4  496e7665          DCB      "Invertor #3 Alarm, voltage is down",0
0004d8  72746f72
0004dc  20233320
0004e0  416c6172
0004e4  6d2c2076
0004e8  6f6c7461
0004ec  67652069
0004f0  7320646f
0004f4  776e00  
0004f7  00                DCB      0
                  |L4.1272|
0004f8  496e7665          DCB      "Invertor #4 Alarm, voltage is down",0
0004fc  72746f72
000500  20233420
000504  416c6172
000508  6d2c2076
00050c  6f6c7461
000510  67652069
000514  7320646f
000518  776e00  
00051b  00                DCB      0
                  |L4.1308|
00051c  496e7665          DCB      "Invertor #1 Alarm, output is offed",0
000520  72746f72
000524  20233120
000528  416c6172
00052c  6d2c206f
000530  75747075
000534  74206973
000538  206f6666
00053c  656400  
00053f  00                DCB      0
                  |L4.1344|
000540  496e7665          DCB      "Invertor #2 Alarm, output is offed",0
000544  72746f72
000548  20233220
00054c  416c6172
000550  6d2c206f
000554  75747075
000558  74206973
00055c  206f6666
000560  656400  
000563  00                DCB      0
                  |L4.1380|
000564  496e7665          DCB      "Invertor #3 Alarm, output is offed",0
000568  72746f72
00056c  20233320
000570  416c6172
000574  6d2c206f
000578  75747075
00057c  74206973
000580  206f6666
000584  656400  
000587  00                DCB      0
                  |L4.1416|
000588  496e7665          DCB      "Invertor #4 Alarm, output is offed",0
00058c  72746f72
000590  20233420
000594  416c6172
000598  6d2c206f
00059c  75747075
0005a0  74206973
0005a4  206f6666
0005a8  656400  
0005ab  00                DCB      0
                  |L4.1452|
0005ac  496e7665          DCB      "Invertor #1 is norm",0
0005b0  72746f72
0005b4  20233120
0005b8  6973206e
0005bc  6f726d00
                  |L4.1472|
0005c0  496e7665          DCB      "Invertor #2 is norm",0
0005c4  72746f72
0005c8  20233220
0005cc  6973206e
0005d0  6f726d00
                  |L4.1492|
0005d4  496e7665          DCB      "Invertor #3 is norm",0
0005d8  72746f72
0005dc  20233320
0005e0  6973206e
0005e4  6f726d00
                  |L4.1512|
0005e8  496e7665          DCB      "Invertor #4 is norm",0
0005ec  72746f72
0005f0  20233420
0005f4  6973206e
0005f8  6f726d00

                          AREA ||.bss||, DATA, NOINIT, ALIGN=2

                  adc_buff
                          %        1024
                  adc_buff_
                          %        32
                  main_power_buffer
                          %        32

                          AREA ||area_number.7||, DATA, NOINIT, ALIGN=1

                          EXPORTAS ||area_number.7||, ||.bss||
                  adc_buff_max
                          %        24

                          AREA ||area_number.8||, DATA, NOINIT, ALIGN=1

                          EXPORTAS ||area_number.8||, ||.bss||
                  net_buff
                          %        64

                          AREA ||.constdata||, DATA, READONLY, ALIGN=0

                  sk_buff_KONTUR
000000  0d0b0f0e          DCB      0x0d,0x0b,0x0f,0x0e

                          AREA ||area_number.11||, DATA, READONLY, ALIGN=0

                          EXPORTAS ||area_number.11||, ||.constdata||
                  sk_buff_RSTKM
000000  0d0b0f0e          DCB      0x0d,0x0b,0x0f,0x0e

                          AREA ||area_number.12||, DATA, READONLY, ALIGN=0

                          EXPORTAS ||area_number.12||, ||.constdata||
                  sk_buff_GLONASS
000000  0b0d0f0e          DCB      0x0b,0x0d,0x0f,0x0e

                          AREA ||area_number.13||, DATA, READONLY, ALIGN=0

                          EXPORTAS ||area_number.13||, ||.constdata||
                  sk_buff_3U
000000  0b0d0f0e          DCB      0x0b,0x0d,0x0f,0x0e

                          AREA ||area_number.14||, DATA, READONLY, ALIGN=0

                          EXPORTAS ||area_number.14||, ||.constdata||
                  sk_buff_6U
000000  0b0d0f0e          DCB      0x0b,0x0d,0x0f,0x0e

                          AREA ||area_number.15||, DATA, READONLY, ALIGN=0

                          EXPORTAS ||area_number.15||, ||.constdata||
                  sk_buff_220
000000  0b0d0f0e          DCB      0x0b,0x0d,0x0f,0x0e

                          AREA ||area_number.16||, DATA, READONLY, ALIGN=0

                          EXPORTAS ||area_number.16||, ||.constdata||
                  sk_buff_TELECORE2015
000000  0b0d0f0e          DCB      0x0b,0x0d,0x0f,0x0e

                          AREA ||.data||, DATA, ALIGN=1

                  adc_buff_min
000000  13881388          DCW      0x1388,0x1388
000004  13881388          DCW      0x1388,0x1388
000008  13881388          DCW      0x1388,0x1388
00000c  13881388          DCW      0x1388,0x1388
000010  13881388          DCW      0x1388,0x1388
                          DCDU     0x00000000

                          AREA ||area_number.18||, DATA, ALIGN=1

                          EXPORTAS ||area_number.18||, ||.data||
                  unet_buff_min
000000  1388              DCW      0x1388

                          AREA ||area_number.19||, DATA, ALIGN=0

                          EXPORTAS ||area_number.19||, ||.data||
                  adc_stat
000000  01                DCB      0x01

                          AREA ||area_number.20||, DATA, ALIGN=1

                          EXPORTAS ||area_number.20||, ||.data||
                  bat_ver_cnt
000000  0096              DCW      0x0096

                          AREA ||area_number.21||, DATA, ALIGN=2

                          EXPORTAS ||area_number.21||, ||.data||
                  vent_stat
000000  00                DCB      0x00
                  adc_self_ch_cnt
000001  00                DCB      0x00
                  adc_ch_net
000002  00                DCB      0x00
                  adc_ch
000003  00                DCB      0x00
                  adc_ch_cnt
000004  00                DCB      0x00
                  adc_window_flag
000005  00                DCB      0x00
                  ch_cnt0
000006  00                DCB      0x00
                  b1Hz_ch
000007  00                DCB      0x00
                  i
000008  00                DCB      0x00
                  iiii
000009  00                DCB      0x00
                  bAVG
00000a  00                DCB      0x00
                  avg_num
00000b  00                DCB      0x00
                  kb_full_ver
00000c  00                DCB      0x00
                  kb_start_ips
00000d  00                DCB      0x00
                  num_of_wrks_bps
00000e  00                DCB      0x00
                  num_necc_up
00000f  00                DCB      0x00
                  num_necc_down
000010  00                DCB      0x00
                  sh_cnt0
000011  00                DCB      0x00
                  b1Hz_sh
000012  00                DCB      0x00
                  spc_stat
000013  00                DCB      0x00
                  spc_bat
000014  00                DCB      0x00
                  spc_phase
000015  00                DCB      0x00
                  bAVZ
000016  00                DCB      0x00
                  ke_start_stat
000017  00                DCB      0x00
                  numOfForvardBps
000018  00                DCB      0x00
                  numOfForvardBps_old
000019  00                DCB      0x00
                  numOfForvardBps_minCnt
00001a  0000              DCB      0x00,0x00
                  cntrl_stat
00001c  0258              DCW      0x0258
                  cntrl_stat_old
00001e  0258              DCW      0x0258
                  avg_main_cnt
000020  0014              DCW      0x0014
                  ibat_ips
000022  0000              DCB      0x00,0x00
                  ibat_ips_
000024  0000              DCB      0x00,0x00
                  num_necc_block_cnt
000026  0000              DCB      0x00,0x00
                  net_buff_
000028  0000              DCB      0x00,0x00
                  adc_result
00002a  0000              DCB      0x00,0x00
                  adc_gorb_cnt
00002c  0000              DCB      0x00,0x00
                  adc_zero_cnt
00002e  0000              DCB      0x00,0x00
                  adc_window_cnt
000030  0000              DCB      0x00,0x00
                  adc_net_buff_cnt
000032  0000              DCB      0x00,0x00
                  plazma_sk
000034  0000              DCB      0x00,0x00
                  cntrl_stat_new
000036  0000              DCB      0x00,0x00
                  Ibmax
000038  0000              DCB      0x00,0x00
                  IZMAX_
00003a  0000              DCB      0x00,0x00
                  Ubpsmax
00003c  0000              DCB      0x00,0x00
                  samokalibr_cnt
00003e  0000              DCB      0x00,0x00
                  main_kb_cnt
000040  0000              DCB      0x00,0x00
                  kb_cnt_1lev
000042  0000              DCB      0x00,0x00
                  kb_cnt_2lev
000044  0000              DCB      0x00,0x00
                  kb_start
000046  0000              DCB      0x00,0x00
                  bps_on_mask
000048  0000              DCB      0x00,0x00
                  bps_off_mask
00004a  0000              DCB      0x00,0x00
                  vz_cnt_s
00004c  0000              DCB      0x00,0x00
                  vz_cnt_s_
00004e  0000              DCB      0x00,0x00
                  vz_cnt_h
000050  0000              DCB      0x00,0x00
                  vz_cnt_h_
000052  0000              DCB      0x00,0x00
                  cnt_end_ke
000054  0000              DCB      0x00,0x00
                  __ee_vz_cnt
000056  0000              DCB      0x00,0x00
                  __ee_spc_stat
000058  0000              DCB      0x00,0x00
                  __ee_spc_bat
00005a  0000              DCB      0x00,0x00
                  __ee_spc_phase
00005c  0000              DCB      0x00,0x00
                  cntrl_stat_blok_cnt
00005e  0000              DCB      0x00,0x00
                  cntrl_stat_blok_cnt_
000060  0000              DCB      0x00,0x00
                  numOfForvardBps_hourCnt
000062  0000              DCB      0x00,0x00
                  ibat
                          DCD      0x00000000
                  ibat_
                          DCD      0x00000000
                  i_avg_max
                          DCD      0x00000000
                  i_avg_min
                          DCD      0x00000000
                  i_avg_summ
                          DCD      0x00000000
                  i_avg
                          DCD      0x00000000
                  avg
                          DCD      0x00000000
                  cntrl_stat_blok_cnt_plus
                          DCD      0x00000000
                  cntrl_stat_blok_cnt_minus
                          DCD      0x00000000
                  plazma_inv
                          DCD      0x00000000
                  net_metr_buff_
                          DCD      0x00000000
000090  0000              DCB      0x00,0x00
                  adc_self_ch_buff
000092  0000              DCB      0x00,0x00
                          DCD      0x00000000
                  adc_self_ch_disp
                          DCD      0x00000000
00009c  00000000          DCB      0x00,0x00,0x00,0x00
                  ke_date
                          %        8

                          AREA ||area_number.22||, DATA, ALIGN=1

                          EXPORTAS ||area_number.22||, ||.data||
                  unet_buff_max
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.23||, DATA, ALIGN=0

                          EXPORTAS ||area_number.23||, ||.data||
                  adc_cnt
000000  00                DCB      0x00

                          AREA ||area_number.24||, DATA, ALIGN=0

                          EXPORTAS ||area_number.24||, ||.data||
                  adc_cnt1
000000  00                DCB      0x00

                          AREA ||area_number.25||, DATA, ALIGN=1

                          EXPORTAS ||area_number.25||, ||.data||
                  zero_cnt
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.26||, DATA, ALIGN=0

                          EXPORTAS ||area_number.26||, ||.data||
                  net_buff_cnt
000000  00                DCB      0x00

                          AREA ||area_number.27||, DATA, ALIGN=1

                          EXPORTAS ||area_number.27||, ||.data||
                  ADWR
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.28||, DATA, ALIGN=1

                          EXPORTAS ||area_number.28||, ||.data||
                  period_cnt
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.29||, DATA, ALIGN=1

                          EXPORTAS ||area_number.29||, ||.data||
                  non_zero_cnt
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.30||, DATA, ALIGN=0

                          EXPORTAS ||area_number.30||, ||.data||
                  rele_stat
000000  00                DCB      0x00

                          AREA ||area_number.31||, DATA, ALIGN=0

                          EXPORTAS ||area_number.31||, ||.data||
                  bRELE_OUT
000000  00                DCB      0x00

                          AREA ||area_number.32||, DATA, ALIGN=2

                          EXPORTAS ||area_number.32||, ||.data||
                  main_power_buffer_
                          DCD      0x00000000

                          AREA ||area_number.33||, DATA, ALIGN=1

                          EXPORTAS ||area_number.33||, ||.data||
                  main_power_buffer_cnt
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.34||, DATA, ALIGN=1

                          EXPORTAS ||area_number.34||, ||.data||
                  adc_buff_out_
                          DCDU     0x00000000
000004  0000              DCB      0x00,0x00

                          AREA ||area_number.35||, DATA, ALIGN=1

                          EXPORTAS ||area_number.35||, ||.data||
                  plazma_adc_cnt
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.36||, DATA, ALIGN=0

                          EXPORTAS ||area_number.36||, ||.data||
                  unh_cnt0
000000  00                DCB      0x00

                          AREA ||area_number.37||, DATA, ALIGN=0

                          EXPORTAS ||area_number.37||, ||.data||
                  unh_cnt1
000000  00                DCB      0x00

                          AREA ||area_number.38||, DATA, ALIGN=0

                          EXPORTAS ||area_number.38||, ||.data||
                  b1Hz_unh
000000  00                DCB      0x00

                          AREA ||area_number.39||, DATA, ALIGN=0

                          EXPORTAS ||area_number.39||, ||.data||
                  ch_cnt1
000000  00                DCB      0x00

                          AREA ||area_number.40||, DATA, ALIGN=0

                          EXPORTAS ||area_number.40||, ||.data||
                  b1_30Hz_ch
000000  00                DCB      0x00

                          AREA ||area_number.41||, DATA, ALIGN=1

                          EXPORTAS ||area_number.41||, ||.data||
                  cntrl_stat_blck_cnt
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.42||, DATA, ALIGN=0

                          EXPORTAS ||area_number.42||, ||.data||
                  avg_cnt
000000  00                DCB      0x00

                          AREA ||area_number.43||, DATA, ALIGN=0

                          EXPORTAS ||area_number.43||, ||.data||
                  bps_all_off_cnt
000000  00                DCB      0x00

                          AREA ||area_number.44||, DATA, ALIGN=0

                          EXPORTAS ||area_number.44||, ||.data||
                  bps_mask_off_cnt
000000  00                DCB      0x00

                          AREA ||area_number.45||, DATA, ALIGN=0

                          EXPORTAS ||area_number.45||, ||.data||
                  bps_mask_on_off_cnt
000000  00                DCB      0x00

                          AREA ||area_number.46||, DATA, ALIGN=0

                          EXPORTAS ||area_number.46||, ||.data||
                  bps_hndl_2sec_cnt
000000  00                DCB      0x00

                          AREA ||area_number.47||, DATA, ALIGN=0

                          EXPORTAS ||area_number.47||, ||.data||
                  plazma_bat
000000  00                DCB      0x00

                          AREA ||area_number.48||, DATA, ALIGN=0

                          EXPORTAS ||area_number.48||, ||.data||
                  plazma_cntrl_stat
000000  00                DCB      0x00
