; generated by ARM C/C++ Compiler, 4.1 [Build 644]
; commandline ArmCC [--list --debug -c --asm --interleave -o.\EXE\control.o --asm_dir=.\ --list_dir=.\ --depend=.\EXE\control.d --feedback=.\EXE\UKU_220_IPS_TERMOKOMPENSAT.fed --cpu=Cortex-M3 --apcs=interwork -O1 -IC:\Keil\ARM\CMSIS\Include -IC:\Keil\ARM\INC\NXP\LPC17xx -D__MICROLIB -DUKU_220_IPS_TERMOKOMPENSAT -DUKU2071x -DUKU_ZVU --omf_browse=.\EXE\control.crf control.c]
                          THUMB

                          AREA ||.text||, CODE, READONLY, ALIGN=2

                  ke_start PROC
;;;283    //-----------------------------------------------
;;;284    void ke_start(char in)
000000  e92d41fc          PUSH     {r2-r8,lr}
;;;285    {          
000004  4606              MOV      r6,r0
;;;286    ke_start_stat=(enum_ke_start_stat)0;		 
000006  4df9              LDR      r5,|L1.1004|
000008  f04f0700          MOV      r7,#0
00000c  766f              STRB     r7,[r5,#0x19]
;;;287    
;;;288    if(spc_stat==spcVZ)ke_start_stat=kssNOT_VZ;
00000e  7d68              LDRB     r0,[r5,#0x15]  ; spc_stat
000010  f04f0301          MOV      r3,#1
000014  2802              CMP      r0,#2
000016  d00f              BEQ      |L1.56|
;;;289    #ifndef UKU_220_IPS_TERMOKOMPENSAT
;;;290    else if(BAT_IS_ON[in]!=bisON)ke_start_stat=kssNOT_BAT;
;;;291    #endif
;;;292    else if(bat[in]._av&(1<<0))ke_start_stat=kssNOT_BAT_AV;
000018  eb060146          ADD      r1,r6,r6,LSL #1
00001c  eb011206          ADD      r2,r1,r6,LSL #4
000020  49f3              LDR      r1,|L1.1008|
000022  eb010482          ADD      r4,r1,r2,LSL #2
000026  f894103d          LDRB     r1,[r4,#0x3d]
00002a  07ca              LSLS     r2,r1,#31
00002c  d006              BEQ      |L1.60|
00002e  f04f0066          MOV      r0,#0x66
000032  7668              STRB     r0,[r5,#0x19]
                  |L1.52|
;;;293    else if(bat[in]._temper_stat&(1<<1))ke_start_stat=kssNOT_BAT_AV_T;
;;;294    else if(bat[in]._av&(1<<1))ke_start_stat=kssNOT_BAT_AV_ASS;
;;;295    else if(bat[in]._Ib>IKB)ke_start_stat=kssNOT_BAT_ZAR;
;;;296    else if(bat[in]._Ib<-IKB)ke_start_stat=kssNOT_BAT_RAZR;
;;;297    else if((spc_stat==spcKE)&&(spc_bat==0))ke_start_stat=kssNOT_KE1;
;;;298    else if((spc_stat==spcKE)&&(spc_bat==1))ke_start_stat=kssNOT_KE2;
;;;299    else 
;;;300    	{
;;;301    
;;;302    	ke_start_stat=kssYES;
;;;303    
;;;304    	spc_stat=spcKE;
;;;305    	__ee_spc_stat=spcKE;
;;;306    	lc640_write_int(EE_SPC_STAT,__ee_spc_stat);
;;;307    	
;;;308    	spc_bat=in;
;;;309    	__ee_spc_bat=in;
;;;310    	lc640_write_int(EE_SPC_BAT,__ee_spc_bat);
;;;311    
;;;312    	bat[in]._zar_cnt_ke=0;
;;;313    	lc640_write_int(ADR_EE_BAT_ZAR_CNT_KE[in],0);
;;;314    	
;;;315    	spc_phase=0;
;;;316    	__ee_spc_phase=0;
;;;317    	lc640_write_int(EE_SPC_PHASE,__ee_spc_phase);
;;;318    
;;;319    	//ke_mem_hndl(in,lc640_read_int(ADR_EE_BAT_ZAR_CNT_KE[spc_bat]));
;;;320    
;;;321    		{					
;;;322    		signed short temp_temp;
;;;323    		signed char temp;
;;;324    		temp_temp=bat[in]._u_old[((bat_u_old_cnt+1)&0x07)]; 
;;;325    		    
;;;326    		temp=LPC_RTC->YEAR;
;;;327    		gran_char(&temp,1,99);
;;;328    		*((char*)(&(ke_date[0])))=temp;
;;;329    			
;;;330    		temp=LPC_RTC->MONTH;
;;;331    		gran_char(&temp,1,12);
;;;332    		*(((char*)(&(ke_date[0])))+1)=temp;
;;;333    		
;;;334    		temp=LPC_RTC->DOM;
;;;335    		gran_char(&temp,1,31);
;;;336    		*(((char*)(&(ke_date[0])))+2)=temp;			
;;;337    				
;;;338    		*(((char*)(&(ke_date[0])))+3)=*((char*)&temp_temp);
;;;339    		lc640_write_long(EE_SPC_KE_DATE0,ke_date[0]);
;;;340    
;;;341    		temp=LPC_RTC->HOUR;
;;;342    		gran_char(&temp,0,23);
;;;343    		*((char*)(&(ke_date[1])))=temp;
;;;344                   
;;;345    		temp=LPC_RTC->MIN;
;;;346    		gran_char(&temp,0,59);
;;;347    		*(((char*)(&(ke_date[1])))+1)=temp;
;;;348    	          
;;;349    		temp=LPC_RTC->SEC;
;;;350    		gran_char(&temp,0,59);
;;;351    		*(((char*)(&(ke_date[1])))+2)=temp;
;;;352    			
;;;353    		*(((char*)(&(ke_date[1])))+3)=*(((char*)&temp_temp)+1);
;;;354    		lc640_write_long(EE_SPC_KE_DATE1,ke_date[1]);
;;;355    		}
;;;356    
;;;357    	}
;;;358    }
000034  e8bd81fc          POP      {r2-r8,pc}
                  |L1.56|
000038  766b              STRB     r3,[r5,#0x19]         ;288
00003a  e7fb              B        |L1.52|
                  |L1.60|
00003c  f894203f          LDRB     r2,[r4,#0x3f]         ;293
000040  0792              LSLS     r2,r2,#30             ;293
000042  d503              BPL      |L1.76|
000044  f04f0067          MOV      r0,#0x67              ;293
000048  7668              STRB     r0,[r5,#0x19]         ;293
00004a  e7f3              B        |L1.52|
                  |L1.76|
00004c  0789              LSLS     r1,r1,#30             ;294
00004e  d503              BPL      |L1.88|
000050  f04f0068          MOV      r0,#0x68              ;294
000054  7668              STRB     r0,[r5,#0x19]         ;294
000056  e7ed              B        |L1.52|
                  |L1.88|
000058  4ae6              LDR      r2,|L1.1012|
00005a  f9b41008          LDRSH    r1,[r4,#8]            ;295
00005e  f9b22000          LDRSH    r2,[r2,#0]            ;295  ; IKB
000062  4291              CMP      r1,r2                 ;295
000064  dd03              BLE      |L1.110|
000066  f04f0069          MOV      r0,#0x69              ;295
00006a  7668              STRB     r0,[r5,#0x19]         ;295
00006c  e7e2              B        |L1.52|
                  |L1.110|
00006e  4252              RSBS     r2,r2,#0              ;296
000070  4291              CMP      r1,r2                 ;296
000072  da03              BGE      |L1.124|
000074  f04f006a          MOV      r0,#0x6a              ;296
000078  7668              STRB     r0,[r5,#0x19]         ;296
00007a  e7db              B        |L1.52|
                  |L1.124|
00007c  49db              LDR      r1,|L1.1004|
00007e  2801              CMP      r0,#1                 ;297
000080  7d89              LDRB     r1,[r1,#0x16]         ;297
000082  d100              BNE      |L1.134|
000084  b111              CBZ      r1,|L1.140|
                  |L1.134|
000086  2801              CMP      r0,#1                 ;298
000088  d004              BEQ      |L1.148|
00008a  e005              B        |L1.152|
                  |L1.140|
00008c  f04f006b          MOV      r0,#0x6b              ;297
000090  7668              STRB     r0,[r5,#0x19]         ;297
000092  e7cf              B        |L1.52|
                  |L1.148|
000094  2901              CMP      r1,#1                 ;298
000096  d07e              BEQ      |L1.406|
                  |L1.152|
000098  f04f0064          MOV      r0,#0x64              ;302
00009c  7668              STRB     r0,[r5,#0x19]         ;302
00009e  756b              STRB     r3,[r5,#0x15]         ;304
0000a0  f8a53062          STRH     r3,[r5,#0x62]         ;305
0000a4  4619              MOV      r1,r3                 ;306
0000a6  f240209a          MOV      r0,#0x29a             ;306
0000aa  f7fffffe          BL       lc640_write_int
0000ae  75ae              STRB     r6,[r5,#0x16]         ;308
0000b0  f8a56064          STRH     r6,[r5,#0x64]         ;309
0000b4  4631              MOV      r1,r6                 ;310
0000b6  f240209e          MOV      r0,#0x29e             ;310
0000ba  f7fffffe          BL       lc640_write_int
0000be  61a7              STR      r7,[r4,#0x18]         ;312
0000c0  48cd              LDR      r0,|L1.1016|
0000c2  2100              MOVS     r1,#0                 ;313
0000c4  f9300016          LDRSH    r0,[r0,r6,LSL #1]     ;313
0000c8  f7fffffe          BL       lc640_write_int
0000cc  75ef              STRB     r7,[r5,#0x17]         ;315
0000ce  f8a57066          STRH     r7,[r5,#0x66]         ;316
0000d2  4639              MOV      r1,r7                 ;317
0000d4  f44f7028          MOV      r0,#0x2a0             ;317
0000d8  f7fffffe          BL       lc640_write_int
0000dc  48c7              LDR      r0,|L1.1020|
0000de  8800              LDRH     r0,[r0,#0]            ;324  ; bat_u_old_cnt
0000e0  f1000001          ADD      r0,r0,#1              ;324
0000e4  f0000007          AND      r0,r0,#7              ;324
0000e8  eb040040          ADD      r0,r4,r0,LSL #1       ;324
0000ec  8c00              LDRH     r0,[r0,#0x20]         ;324
0000ee  9001              STR      r0,[sp,#4]            ;324
0000f0  4dc3              LDR      r5,|L1.1024|
0000f2  8ba8              LDRH     r0,[r5,#0x1c]         ;326
0000f4  9000              STR      r0,[sp,#0]            ;326
0000f6  f04f0263          MOV      r2,#0x63              ;327
0000fa  f04f0101          MOV      r1,#1                 ;327
0000fe  4668              MOV      r0,sp                 ;327
000100  f7fffffe          BL       gran_char
000104  4cb9              LDR      r4,|L1.1004|
000106  f89d0000          LDRB     r0,[sp,#0]            ;328
00010a  34dc              ADDS     r4,r4,#0xdc           ;328
00010c  7020              STRB     r0,[r4,#0]            ;328
00010e  7e28              LDRB     r0,[r5,#0x18]         ;330
000110  9000              STR      r0,[sp,#0]            ;330
000112  220c              MOVS     r2,#0xc               ;331
000114  2101              MOVS     r1,#1                 ;331
000116  4668              MOV      r0,sp                 ;331
000118  f7fffffe          BL       gran_char
00011c  f89d0000          LDRB     r0,[sp,#0]            ;332
000120  7060              STRB     r0,[r4,#1]            ;332
000122  7b28              LDRB     r0,[r5,#0xc]          ;334
000124  9000              STR      r0,[sp,#0]            ;334
000126  221f              MOVS     r2,#0x1f              ;335
000128  2101              MOVS     r1,#1                 ;335
00012a  4668              MOV      r0,sp                 ;335
00012c  f7fffffe          BL       gran_char
000130  f89d0000          LDRB     r0,[sp,#0]            ;336
000134  70a0              STRB     r0,[r4,#2]            ;336
000136  f89d0004          LDRB     r0,[sp,#4]            ;338
00013a  70e0              STRB     r0,[r4,#3]            ;338
00013c  f24020a2          MOV      r0,#0x2a2             ;339
000140  6821              LDR      r1,[r4,#0]            ;339  ; ke_date
000142  f7fffffe          BL       lc640_write_long
000146  7a28              LDRB     r0,[r5,#8]            ;341
000148  9000              STR      r0,[sp,#0]            ;341
00014a  2217              MOVS     r2,#0x17              ;342
00014c  2100              MOVS     r1,#0                 ;342
00014e  4668              MOV      r0,sp                 ;342
000150  f7fffffe          BL       gran_char
000154  f89d0000          LDRB     r0,[sp,#0]            ;343
000158  7120              STRB     r0,[r4,#4]            ;343
00015a  7928              LDRB     r0,[r5,#4]            ;345
00015c  9000              STR      r0,[sp,#0]            ;345
00015e  223b              MOVS     r2,#0x3b              ;346
000160  2100              MOVS     r1,#0                 ;346
000162  4668              MOV      r0,sp                 ;346
000164  f7fffffe          BL       gran_char
000168  f89d0000          LDRB     r0,[sp,#0]            ;347
00016c  7160              STRB     r0,[r4,#5]            ;347
00016e  7828              LDRB     r0,[r5,#0]            ;349
000170  9000              STR      r0,[sp,#0]            ;349
000172  223b              MOVS     r2,#0x3b              ;350
000174  2100              MOVS     r1,#0                 ;350
000176  4668              MOV      r0,sp                 ;350
000178  f7fffffe          BL       gran_char
00017c  f89d0000          LDRB     r0,[sp,#0]            ;351
000180  71a0              STRB     r0,[r4,#6]            ;351
000182  f89d0005          LDRB     r0,[sp,#5]            ;353
000186  71e0              STRB     r0,[r4,#7]            ;353
000188  f24020a6          MOV      r0,#0x2a6             ;354
00018c  6861              LDR      r1,[r4,#4]            ;354  ; ke_date
00018e  f7fffffe          BL       lc640_write_long
000192  e74f              B        |L1.52|
000194  e7ff              B        |L1.406|
                  |L1.406|
000196  f04f006c          MOV      r0,#0x6c              ;298
00019a  7668              STRB     r0,[r5,#0x19]         ;298
00019c  e74a              B        |L1.52|
;;;359    
                          ENDP

                  ke_drv PROC
;;;360    //-----------------------------------------------
;;;361    void ke_drv(void)
00019e  e92d47f0          PUSH     {r4-r10,lr}
;;;362    {
;;;363    
;;;364    if(spc_stat==spcKE)
0001a2  4c92              LDR      r4,|L1.1004|
0001a4  7d60              LDRB     r0,[r4,#0x15]  ; spc_stat
0001a6  2801              CMP      r0,#1
0001a8  d17d              BNE      |L1.678|
0001aa  4621              MOV      r1,r4
0001ac  2601              MOVS     r6,#1
;;;365    	{
;;;366    	if(spc_phase==0)
;;;367    		{
;;;368    		mess_send(MESS2BAT_HNDL,PARAM_BAT_MASK_OFF_AFTER_2SEC,(1<<(1-spc_bat)),20);
0001ae  7d89              LDRB     r1,[r1,#0x16]
0001b0  7de0              LDRB     r0,[r4,#0x17]         ;366  ; spc_phase
0001b2  f1c10201          RSB      r2,r1,#1
0001b6  fa06f102          LSL      r1,r6,r2
;;;369    		mess_send(MESS2BPS_HNDL,PARAM_BPS_ALL_OFF_AFTER_2SEC,0xffff,20);
;;;370    
;;;371    		bat[spc_bat]._zar_cnt_ke+=abs(bat[spc_bat]._Ib);
;;;372    	    	
;;;373    		if(bat[spc_bat]._zar_cnt_ke>=AH_CONSTANT)
;;;374    			{
;;;375    			bat[spc_bat]._zar_cnt_ke-=AH_CONSTANT;
;;;376    			lc640_write_int(ADR_EE_BAT_ZAR_CNT_KE[spc_bat],lc640_read_int(ADR_EE_BAT_ZAR_CNT_KE[spc_bat])+1);
0001ba  4f8f              LDR      r7,|L1.1016|
0001bc  4d8c              LDR      r5,|L1.1008|
0001be  b20a              SXTH     r2,r1                 ;368
0001c0  b110              CBZ      r0,|L1.456|
;;;377    			}
;;;378    		}
;;;379    
;;;380    	else if(spc_phase==1)
0001c2  2801              CMP      r0,#1
0001c4  d034              BEQ      |L1.560|
0001c6  e038              B        |L1.570|
                  |L1.456|
0001c8  2314              MOVS     r3,#0x14              ;368
0001ca  21ca              MOVS     r1,#0xca              ;368
0001cc  20c8              MOVS     r0,#0xc8              ;368
0001ce  f7fffffe          BL       mess_send
0001d2  2314              MOVS     r3,#0x14              ;369
0001d4  f04f32ff          MOV      r2,#0xffffffff        ;369
0001d8  21ce              MOVS     r1,#0xce              ;369
0001da  20cd              MOVS     r0,#0xcd              ;369
0001dc  f7fffffe          BL       mess_send
0001e0  7da0              LDRB     r0,[r4,#0x16]         ;371  ; spc_bat
0001e2  eb000140          ADD      r1,r0,r0,LSL #1       ;371
0001e6  eb011000          ADD      r0,r1,r0,LSL #4       ;371
0001ea  eb050080          ADD      r0,r5,r0,LSL #2       ;371
0001ee  f9b00008          LDRSH    r0,[r0,#8]            ;371
0001f2  f7fffffe          BL       abs
0001f6  7da1              LDRB     r1,[r4,#0x16]         ;371  ; spc_bat
0001f8  eb010241          ADD      r2,r1,r1,LSL #1       ;371
0001fc  eb021201          ADD      r2,r2,r1,LSL #4       ;371
000200  eb050282          ADD      r2,r5,r2,LSL #2       ;371
000204  6993              LDR      r3,[r2,#0x18]         ;371
000206  4418              ADD      r0,r0,r3              ;371
000208  6190              STR      r0,[r2,#0x18]         ;371
00020a  f64843a0          MOV      r3,#0x8ca0            ;373
00020e  4298              CMP      r0,r3                 ;373
000210  db13              BLT      |L1.570|
000212  eba00003          SUB      r0,r0,r3              ;375
000216  6190              STR      r0,[r2,#0x18]         ;375
000218  f8370011          LDRH     r0,[r7,r1,LSL #1]     ;376
00021c  f7fffffe          BL       lc640_read_int
000220  1c40              ADDS     r0,r0,#1              ;376
000222  b201              SXTH     r1,r0                 ;376
000224  7da0              LDRB     r0,[r4,#0x16]         ;376  ; spc_bat
000226  f9370010          LDRSH    r0,[r7,r0,LSL #1]     ;376
00022a  f7fffffe          BL       lc640_write_int
00022e  e004              B        |L1.570|
                  |L1.560|
;;;381    		{
;;;382    		mess_send(MESS2BAT_HNDL,PARAM_BAT_MASK_OFF_AFTER_2SEC,(1<<(1-spc_bat)),20);
000230  2314              MOVS     r3,#0x14
000232  21ca              MOVS     r1,#0xca
000234  20c8              MOVS     r0,#0xc8
000236  f7fffffe          BL       mess_send
                  |L1.570|
;;;383    		}
;;;384    
;;;385    	if(bat[spc_bat]._Ub<(USIGN*10))
00023a  7da1              LDRB     r1,[r4,#0x16]  ; spc_bat
;;;386    		{
;;;387    		cnt_end_ke++;
;;;388    		if(cnt_end_ke>=30)
;;;389    			{
;;;390    			
;;;391    			if((spc_stat==spcKE)&&(spc_phase==0))
;;;392    				{
;;;393    				lc640_write_int(ADR_EE_BAT_C_REAL[spc_bat],lc640_read_int(ADR_EE_BAT_ZAR_CNT_KE[spc_bat]));
;;;394    				ke_mem_hndl(spc_bat,lc640_read_int(ADR_EE_BAT_ZAR_CNT_KE[spc_bat]));
;;;395    				lc640_write_int(ADR_EE_BAT_ZAR_CNT[spc_bat],0);
;;;396    				cntrl_stat=50;
;;;397    				cntrl_stat_old=50;
;;;398    				}
;;;399    
;;;400    			if((BAT_IS_ON[1-spc_bat]) == bisON)
;;;401    				{
;;;402    				spc_phase=1;
;;;403    				__ee_spc_phase=1;
;;;404    				lc640_write_int(EE_SPC_PHASE,1);
;;;405    				}			
;;;406    			else
;;;407    				{
;;;408    				spc_stat=spcOFF;
;;;409    				__ee_spc_stat=spcOFF;
;;;410    				lc640_write_int(EE_SPC_STAT,spcOFF);
00023c  f240299a          MOV      r9,#0x29a
000240  eb010041          ADD      r0,r1,r1,LSL #1       ;385
000244  eb001001          ADD      r0,r0,r1,LSL #4       ;385
000248  eb050080          ADD      r0,r5,r0,LSL #2       ;385
00024c  f04f0800          MOV      r8,#0                 ;366
000250  f9b02002          LDRSH    r2,[r0,#2]            ;385
000254  486b              LDR      r0,|L1.1028|
000256  f9b00000          LDRSH    r0,[r0,#0]            ;385  ; USIGN
00025a  eb000080          ADD      r0,r0,r0,LSL #2       ;385
00025e  ebb20f40          CMP      r2,r0,LSL #1          ;385
000262  da47              BGE      |L1.756|
000264  f8b4005e          LDRH     r0,[r4,#0x5e]         ;387  ; cnt_end_ke
000268  f1000001          ADD      r0,r0,#1              ;387
00026c  b200              SXTH     r0,r0                 ;387
00026e  f8a4005e          STRH     r0,[r4,#0x5e]         ;387
000272  281e              CMP      r0,#0x1e              ;388
000274  db40              BLT      |L1.760|
000276  7d60              LDRB     r0,[r4,#0x15]         ;391  ; spc_stat
000278  2801              CMP      r0,#1                 ;391
00027a  d122              BNE      |L1.706|
00027c  7de0              LDRB     r0,[r4,#0x17]         ;391  ; spc_phase
00027e  bb00              CBNZ     r0,|L1.706|
000280  f8370011          LDRH     r0,[r7,r1,LSL #1]     ;393
000284  f7fffffe          BL       lc640_read_int
000288  b201              SXTH     r1,r0                 ;393
00028a  485f              LDR      r0,|L1.1032|
00028c  7da2              LDRB     r2,[r4,#0x16]         ;393  ; spc_bat
00028e  f9300012          LDRSH    r0,[r0,r2,LSL #1]     ;393
000292  f7fffffe          BL       lc640_write_int
000296  7da0              LDRB     r0,[r4,#0x16]         ;394  ; spc_bat
000298  f8370010          LDRH     r0,[r7,r0,LSL #1]     ;394
00029c  f7fffffe          BL       lc640_read_int
0002a0  b281              UXTH     r1,r0                 ;394
0002a2  7da0              LDRB     r0,[r4,#0x16]         ;394  ; spc_bat
0002a4  e000              B        |L1.680|
                  |L1.678|
0002a6  e049              B        |L1.828|
                  |L1.680|
0002a8  f7fffffe          BL       ke_mem_hndl
0002ac  4857              LDR      r0,|L1.1036|
0002ae  7da1              LDRB     r1,[r4,#0x16]         ;395  ; spc_bat
0002b0  f9300011          LDRSH    r0,[r0,r1,LSL #1]     ;395
0002b4  2100              MOVS     r1,#0                 ;395
0002b6  f7fffffe          BL       lc640_write_int
0002ba  f04f0032          MOV      r0,#0x32              ;396
0002be  84e0              STRH     r0,[r4,#0x26]         ;396
0002c0  8520              STRH     r0,[r4,#0x28]         ;397
                  |L1.706|
0002c2  7da0              LDRB     r0,[r4,#0x16]         ;400  ; spc_bat
0002c4  4952              LDR      r1,|L1.1040|
0002c6  f1c00001          RSB      r0,r0,#1              ;400
0002ca  5c08              LDRB     r0,[r1,r0]            ;400
0002cc  2855              CMP      r0,#0x55              ;400
0002ce  d008              BEQ      |L1.738|
0002d0  f8848015          STRB     r8,[r4,#0x15]         ;408
0002d4  f8a48062          STRH     r8,[r4,#0x62]         ;409
0002d8  2100              MOVS     r1,#0
0002da  4648              MOV      r0,r9
0002dc  f7fffffe          BL       lc640_write_int
0002e0  e00a              B        |L1.760|
                  |L1.738|
0002e2  75e6              STRB     r6,[r4,#0x17]         ;402
0002e4  f8a46066          STRH     r6,[r4,#0x66]         ;403
0002e8  2101              MOVS     r1,#1                 ;404
0002ea  f44f7028          MOV      r0,#0x2a0             ;404
0002ee  f7fffffe          BL       lc640_write_int
0002f2  e001              B        |L1.760|
                  |L1.756|
;;;411    				}
;;;412    			}
;;;413    		}
;;;414    	else cnt_end_ke=0;
0002f4  f8a4805e          STRH     r8,[r4,#0x5e]
                  |L1.760|
;;;415    
;;;416    	if((bat[spc_bat]._Ub>=bat[1-spc_bat]._Ub)&&(spc_phase==1))
0002f8  7da1              LDRB     r1,[r4,#0x16]  ; spc_bat
0002fa  eb010041          ADD      r0,r1,r1,LSL #1
0002fe  eb001001          ADD      r0,r0,r1,LSL #4
000302  eb050080          ADD      r0,r5,r0,LSL #2
000306  f9b02002          LDRSH    r2,[r0,#2]
00030a  f1c10001          RSB      r0,r1,#1
00030e  eb000140          ADD      r1,r0,r0,LSL #1
000312  eb011000          ADD      r0,r1,r0,LSL #4
000316  eb050080          ADD      r0,r5,r0,LSL #2
00031a  f9b00002          LDRSH    r0,[r0,#2]
00031e  4282              CMP      r2,r0
000320  db0c              BLT      |L1.828|
000322  7de0              LDRB     r0,[r4,#0x17]  ; spc_phase
000324  2801              CMP      r0,#1
000326  d109              BNE      |L1.828|
;;;417    		{
;;;418    		spc_stat=spcOFF;
000328  f8848015          STRB     r8,[r4,#0x15]
;;;419    		__ee_spc_stat=spcOFF;
00032c  f8a48062          STRH     r8,[r4,#0x62]
;;;420    		lc640_write_int(EE_SPC_STAT,spcOFF);
000330  4648              MOV      r0,r9
000332  e8bd47f0          POP      {r4-r10,lr}
000336  2100              MOVS     r1,#0
000338  f7ffbffe          B.W      lc640_write_int
                  |L1.828|
;;;421    		}
;;;422    	}
;;;423    			
;;;424    }
00033c  e8bd87f0          POP      {r4-r10,pc}
;;;425    
                          ENDP

                  vz_start PROC
;;;426    //-----------------------------------------------
;;;427    char vz_start(char hour)
000340  b570              PUSH     {r4-r6,lr}
;;;428    {          
000342  4605              MOV      r5,r0
;;;429    char out;
;;;430    out=0;
000344  f04f0600          MOV      r6,#0
;;;431    if((spc_stat==spcOFF)&&(speedChrgBlckStat!=1))
000348  4c28              LDR      r4,|L1.1004|
00034a  7d60              LDRB     r0,[r4,#0x15]  ; spc_stat
00034c  bb90              CBNZ     r0,|L1.948|
00034e  4831              LDR      r0,|L1.1044|
000350  8800              LDRH     r0,[r0,#0]  ; speedChrgBlckStat
000352  2801              CMP      r0,#1
000354  d02e              BEQ      |L1.948|
;;;432    	{
;;;433    	spc_stat=spcVZ;
000356  f04f0102          MOV      r1,#2
00035a  7561              STRB     r1,[r4,#0x15]
;;;434    	__ee_spc_stat=spcVZ; 
00035c  f8a41062          STRH     r1,[r4,#0x62]
;;;435    	lc640_write_int(EE_SPC_STAT,__ee_spc_stat);   
000360  f240209a          MOV      r0,#0x29a
000364  f7fffffe          BL       lc640_write_int
;;;436    	vz_cnt_h=hour;
000368  f8a4505a          STRH     r5,[r4,#0x5a]
;;;437    	__ee_vz_cnt=hour*60;
00036c  ebc51005          RSB      r0,r5,r5,LSL #4
000370  ea4f0080          LSL      r0,r0,#2
000374  f8a40060          STRH     r0,[r4,#0x60]
;;;438    	if(hour==0)__ee_vz_cnt=30;
000378  b91d              CBNZ     r5,|L1.898|
00037a  f04f001e          MOV      r0,#0x1e
00037e  f8a40060          STRH     r0,[r4,#0x60]
                  |L1.898|
;;;439    	lc640_write_int(EE_VZ_CNT,__ee_vz_cnt);
000382  f1040456          ADD      r4,r4,#0x56
000386  f44f7027          MOV      r0,#0x29c
00038a  f9b4100a          LDRSH    r1,[r4,#0xa]  ; __ee_vz_cnt
00038e  f7fffffe          BL       lc640_write_int
;;;440    	lc640_write_int(EE_SPC_VZ_LENGT,__ee_vz_cnt);	
000392  f9b4100a          LDRSH    r1,[r4,#0xa]  ; __ee_vz_cnt
000396  f44f702a          MOV      r0,#0x2a8
00039a  f7fffffe          BL       lc640_write_int
;;;441    	vz_cnt_h_=0;
00039e  f04f0000          MOV      r0,#0
0003a2  80e0              STRH     r0,[r4,#6]
;;;442    	vz_cnt_s=0;
0003a4  8020              STRH     r0,[r4,#0]
;;;443    	vz_cnt_s_=0;
0003a6  8060              STRH     r0,[r4,#2]
;;;444    	out=1;
0003a8  f04f0601          MOV      r6,#1
;;;445    	vz_mem_hndl(1);
0003ac  f04f0001          MOV      r0,#1
0003b0  f7fffffe          BL       vz_mem_hndl
                  |L1.948|
;;;446    	}
;;;447    //else if((spc_stat==spc_KE1p1)||(spc_stat==spc_KE1p2)) out=22; 
;;;448    //else if((spc_stat==spc_KE2p1)||(spc_stat==spc_KE2p2)) out=33;
;;;449    //plazma=out;	
;;;450    return out;
0003b4  4630              MOV      r0,r6
;;;451    }
0003b6  bd70              POP      {r4-r6,pc}
;;;452    
                          ENDP

                  vz_stop PROC
;;;453    //-----------------------------------------------
;;;454    void vz_stop(void)
0003b8  b510              PUSH     {r4,lr}
;;;455    {
;;;456    if(spc_stat==spcVZ)
0003ba  4c0c              LDR      r4,|L1.1004|
0003bc  7d60              LDRB     r0,[r4,#0x15]  ; spc_stat
0003be  2802              CMP      r0,#2
0003c0  d113              BNE      |L1.1002|
;;;457         {
;;;458    vz_mem_hndl(vz_cnt_h);          
0003c2  f1040424          ADD      r4,r4,#0x24
0003c6  8ee0              LDRH     r0,[r4,#0x36]  ; vz_cnt_h
0003c8  f7fffffe          BL       vz_mem_hndl
;;;459    vz_cnt_s=0;
0003cc  f04f0000          MOV      r0,#0
0003d0  8660              STRH     r0,[r4,#0x32]
;;;460    vz_cnt_h=0;
0003d2  86e0              STRH     r0,[r4,#0x36]
;;;461    vz_cnt_h_=0;
0003d4  8720              STRH     r0,[r4,#0x38]
;;;462    spc_stat=spcOFF;
0003d6  f8040c0f          STRB     r0,[r4,#-0xf]
;;;463    
;;;464    		__ee_spc_stat=spcOFF;
0003da  87e0              STRH     r0,[r4,#0x3e]
;;;465    		lc640_write_int(EE_SPC_STAT,spcOFF);
0003dc  4601              MOV      r1,r0
0003de  e8bd4010          POP      {r4,lr}
0003e2  f240209a          MOV      r0,#0x29a
0003e6  f7ffbffe          B.W      lc640_write_int
                  |L1.1002|
;;;466         }
;;;467    
;;;468    }
0003ea  bd10              POP      {r4,pc}
                  |L1.1004|
                          DCD      ||area_number.25||
                  |L1.1008|
                          DCD      bat
                  |L1.1012|
                          DCD      IKB
                  |L1.1016|
                          DCD      ADR_EE_BAT_ZAR_CNT_KE
                  |L1.1020|
                          DCD      bat_u_old_cnt
                  |L1.1024|
                          DCD      0x40024020
                  |L1.1028|
                          DCD      USIGN
                  |L1.1032|
                          DCD      ADR_EE_BAT_C_REAL
                  |L1.1036|
                          DCD      ADR_EE_BAT_ZAR_CNT
                  |L1.1040|
                          DCD      BAT_IS_ON
                  |L1.1044|
                          DCD      speedChrgBlckStat
                          ENDP

                  avz_next_date_hndl PROC
;;;470    //-----------------------------------------------
;;;471    void avz_next_date_hndl(void)
000418  b570              PUSH     {r4-r6,lr}
;;;472    {
;;;473    if((LPC_RTC->MONTH+AVZ)>12)lc640_write_int(EE_YEAR_AVZ,LPC_RTC->YEAR+1);
00041a  4cff              LDR      r4,|L1.2072|
00041c  f8940038          LDRB     r0,[r4,#0x38]
000420  4dfe              LDR      r5,|L1.2076|
000422  7829              LDRB     r1,[r5,#0]  ; AVZ
000424  4408              ADD      r0,r0,r1
000426  280c              CMP      r0,#0xc
000428  d906              BLS      |L1.1080|
00042a  8fa0              LDRH     r0,[r4,#0x3c]
00042c  1c40              ADDS     r0,r0,#1
00042e  b201              SXTH     r1,r0
000430  20b8              MOVS     r0,#0xb8
000432  f7fffffe          BL       lc640_write_int
000436  e004              B        |L1.1090|
                  |L1.1080|
;;;474    else lc640_write_int(EE_YEAR_AVZ,LPC_RTC->YEAR);
000438  f9b4103c          LDRSH    r1,[r4,#0x3c]
00043c  20b8              MOVS     r0,#0xb8
00043e  f7fffffe          BL       lc640_write_int
                  |L1.1090|
;;;475    
;;;476    //lc640_write_int(EE_YEAR_AVZ,6);
;;;477    
;;;478    if((LPC_RTC->MONTH+AVZ)>12)lc640_write_int(EE_MONTH_AVZ,(LPC_RTC->MONTH+AVZ)-12);
000442  f8941038          LDRB     r1,[r4,#0x38]
000446  7828              LDRB     r0,[r5,#0]  ; AVZ
000448  4401              ADD      r1,r1,r0
00044a  290c              CMP      r1,#0xc
00044c  d907              BLS      |L1.1118|
00044e  f8941038          LDRB     r1,[r4,#0x38]
000452  380c              SUBS     r0,r0,#0xc
000454  4401              ADD      r1,r1,r0
000456  20b6              MOVS     r0,#0xb6
000458  f7fffffe          BL       lc640_write_int
00045c  e005              B        |L1.1130|
                  |L1.1118|
;;;479    else lc640_write_int(EE_MONTH_AVZ,LPC_RTC->MONTH+AVZ);                                                 
00045e  f8941038          LDRB     r1,[r4,#0x38]
000462  4401              ADD      r1,r1,r0
000464  20b6              MOVS     r0,#0xb6
000466  f7fffffe          BL       lc640_write_int
                  |L1.1130|
;;;480    
;;;481    //lc640_write_int(EE_MONTH_AVZ,5);
;;;482    
;;;483    if(LPC_RTC->DOM>28) lc640_write_int(EE_DATE_AVZ,28);
00046a  f894002c          LDRB     r0,[r4,#0x2c]
00046e  281c              CMP      r0,#0x1c
000470  d904              BLS      |L1.1148|
000472  211c              MOVS     r1,#0x1c
000474  20b4              MOVS     r0,#0xb4
000476  f7fffffe          BL       lc640_write_int
00047a  e004              B        |L1.1158|
                  |L1.1148|
;;;484    else lc640_write_int(EE_DATE_AVZ,LPC_RTC->DOM);
00047c  f894102c          LDRB     r1,[r4,#0x2c]
000480  20b4              MOVS     r0,#0xb4
000482  f7fffffe          BL       lc640_write_int
                  |L1.1158|
;;;485    
;;;486    //lc640_write_int(EE_DATE_AVZ,4);
;;;487    
;;;488    lc640_write_int(EE_HOUR_AVZ,LPC_RTC->HOUR);
000486  f1040420          ADD      r4,r4,#0x20
00048a  7a21              LDRB     r1,[r4,#8]
00048c  f04f00ae          MOV      r0,#0xae
000490  f7fffffe          BL       lc640_write_int
;;;489    lc640_write_int(EE_MIN_AVZ,LPC_RTC->MIN);
000494  7921              LDRB     r1,[r4,#4]
000496  20b0              MOVS     r0,#0xb0
000498  f7fffffe          BL       lc640_write_int
;;;490    lc640_write_int(EE_SEC_AVZ,LPC_RTC->SEC);
00049c  7821              LDRB     r1,[r4,#0]
00049e  e8bd4070          POP      {r4-r6,lr}
0004a2  20b2              MOVS     r0,#0xb2
0004a4  f7ffbffe          B.W      lc640_write_int
;;;491    
;;;492    }
;;;493    
                          ENDP

                  avz_drv PROC
;;;494    //-----------------------------------------------
;;;495    void avz_drv(void)                               
0004a8  b510              PUSH     {r4,lr}
;;;496    {                
;;;497    if(AVZ!=AVZ_OFF)
0004aa  48dc              LDR      r0,|L1.2076|
;;;498    	{
;;;499    	if((LPC_RTC->YEAR==YEAR_AVZ)&&(LPC_RTC->MONTH==MONTH_AVZ)&&(LPC_RTC->DOM==DATE_AVZ)&&(LPC_RTC->HOUR==HOUR_AVZ)&&(LPC_RTC->MIN==MIN_AVZ)&&(LPC_RTC->SEC==SEC_AVZ))
;;;500    		{
;;;501    		bAVZ=1;
0004ac  4cdc              LDR      r4,|L1.2080|
0004ae  7800              LDRB     r0,[r0,#0]            ;497  ; AVZ
0004b0  b330              CBZ      r0,|L1.1280|
0004b2  48d9              LDR      r0,|L1.2072|
0004b4  8f82              LDRH     r2,[r0,#0x3c]         ;499
0004b6  49db              LDR      r1,|L1.2084|
0004b8  8809              LDRH     r1,[r1,#0]            ;499  ; YEAR_AVZ
0004ba  428a              CMP      r2,r1                 ;499
0004bc  d120              BNE      |L1.1280|
0004be  f8902038          LDRB     r2,[r0,#0x38]         ;499
0004c2  49d9              LDR      r1,|L1.2088|
0004c4  8809              LDRH     r1,[r1,#0]            ;499  ; MONTH_AVZ
0004c6  428a              CMP      r2,r1                 ;499
0004c8  d11a              BNE      |L1.1280|
0004ca  f890102c          LDRB     r1,[r0,#0x2c]         ;499
0004ce  4ad7              LDR      r2,|L1.2092|
0004d0  8812              LDRH     r2,[r2,#0]            ;499  ; DATE_AVZ
0004d2  4291              CMP      r1,r2                 ;499
0004d4  d114              BNE      |L1.1280|
0004d6  f8901028          LDRB     r1,[r0,#0x28]         ;499
0004da  4ad5              LDR      r2,|L1.2096|
0004dc  8812              LDRH     r2,[r2,#0]            ;499  ; HOUR_AVZ
0004de  4291              CMP      r1,r2                 ;499
0004e0  d10e              BNE      |L1.1280|
0004e2  f8901024          LDRB     r1,[r0,#0x24]         ;499
0004e6  4ad3              LDR      r2,|L1.2100|
0004e8  8812              LDRH     r2,[r2,#0]            ;499  ; MIN_AVZ
0004ea  4291              CMP      r1,r2                 ;499
0004ec  d108              BNE      |L1.1280|
0004ee  f8900020          LDRB     r0,[r0,#0x20]         ;499
0004f2  49d1              LDR      r1,|L1.2104|
0004f4  8809              LDRH     r1,[r1,#0]            ;499  ; SEC_AVZ
0004f6  4288              CMP      r0,r1                 ;499
0004f8  d102              BNE      |L1.1280|
0004fa  f04f0001          MOV      r0,#1
0004fe  7620              STRB     r0,[r4,#0x18]
                  |L1.1280|
;;;502    		}
;;;503    	}
;;;504    if(bAVZ)
000500  7e20              LDRB     r0,[r4,#0x18]  ; bAVZ
000502  2800              CMP      r0,#0
000504  d00c              BEQ      |L1.1312|
;;;505    	{
;;;506    	if(vz_start(AVZ_TIME))
000506  48cd              LDR      r0,|L1.2108|
000508  8800              LDRH     r0,[r0,#0]  ; AVZ_TIME
00050a  b2c0              UXTB     r0,r0
00050c  f7fffffe          BL       vz_start
000510  2800              CMP      r0,#0
000512  d005              BEQ      |L1.1312|
;;;507    		{
;;;508    		bAVZ=0;
000514  f04f0000          MOV      r0,#0
000518  7620              STRB     r0,[r4,#0x18]
;;;509    		avz_next_date_hndl();
00051a  e8bd4010          POP      {r4,lr}
00051e  e7fe              B        avz_next_date_hndl
                  |L1.1312|
;;;510    		}
;;;511    	}	
;;;512    
;;;513    }
000520  e763              B        |L1.1002|
;;;514    
                          ENDP

                  vz_drv PROC
;;;515    //-----------------------------------------------
;;;516    void vz_drv(void)
000522  b538              PUSH     {r3-r5,lr}
;;;517    { 
;;;518    if(spc_stat==spcVZ)
000524  4cbe              LDR      r4,|L1.2080|
000526  7d60              LDRB     r0,[r4,#0x15]  ; spc_stat
000528  2802              CMP      r0,#2
00052a  d116              BNE      |L1.1370|
;;;519    	{
;;;520    	if(sk_stat[0]==1)
00052c  48c4              LDR      r0,|L1.2112|
00052e  7800              LDRB     r0,[r0,#0]  ; sk_stat
000530  2801              CMP      r0,#1
000532  d013              BEQ      |L1.1372|
;;;521    		{
;;;522    
;;;523    	if(vz_cnt_s_<3600)
;;;524    		{
;;;525    		vz_cnt_s_++;
;;;526    		if(vz_cnt_s_>=3600)
;;;527    			{
;;;528    			vz_cnt_s_=0;
;;;529    			if(vz_cnt_h)
;;;530    				{
;;;531    				vz_cnt_h--;
;;;532    				vz_cnt_h_++;
;;;533    				}
;;;534    			}
;;;535    		}
;;;536    
;;;537    
;;;538    	if(vz_cnt_s<60)
;;;539    		{
;;;540    		vz_cnt_s++;
;;;541    		if(vz_cnt_s>=60)
;;;542    			{
;;;543    			vz_cnt_s=0;
;;;544    			
;;;545    			__ee_vz_cnt--;
;;;546    			lc640_write_int(EE_VZ_CNT,__ee_vz_cnt);
;;;547    			if((!__ee_vz_cnt)||(speedChrgBlckStat==1))
;;;548    				{
;;;549    				spc_stat=spcOFF;
;;;550    						__ee_spc_stat=spcOFF;
;;;551    		lc640_write_int(EE_SPC_STAT,spcOFF);
;;;552    
;;;553    //				hv_vz_stat=hvsOFF;
;;;554    //		lc640_write(EE_HV_VZ_STAT,hvsOFF);
;;;555    				vz_mem_hndl(0);
;;;556    				}
;;;557    			}
;;;558    		}
;;;559    
;;;560    		}
;;;561    	else 
;;;562    		{
;;;563    		if(((LPC_RTC->SEC)%10)==0)
000534  48c3              LDR      r0,|L1.2116|
000536  7800              LDRB     r0,[r0,#0]
000538  f04f010a          MOV      r1,#0xa
00053c  fbb0f2f1          UDIV     r2,r0,r1
000540  fb010012          MLS      r0,r1,r2,r0
000544  2800              CMP      r0,#0
000546  d108              BNE      |L1.1370|
;;;564    			{
;;;565    			show_mess(	"¬€–¿¬Õ»¬¿ﬁŸ»… «¿–ﬂƒ ",
000548  f2413088          MOV      r0,#0x1388
00054c  9000              STR      r0,[sp,#0]
00054e  a3be              ADR      r3,|L1.2120|
000550  a2c3              ADR      r2,|L1.2144|
000552  a1c9              ADR      r1,|L1.2168|
000554  a0ce              ADR      r0,|L1.2192|
000556  f7fffffe          BL       show_mess
                  |L1.1370|
;;;566    						"    «¿¡ÀŒ »–Œ¬¿Õ    ",
;;;567    						"     Õ≈»—œ–¿¬Õ¿     ",
;;;568    						"    ¬≈Õ“»Àﬂ÷»ﬂ!!!   ",
;;;569    						5000);			
;;;570    			}
;;;571    		}
;;;572    /*	if(vz_cnt_s_>=3)
;;;573    		{
;;;574    		if(sk_stat[0]==0)
;;;575    		} */
;;;576    
;;;577    	}
;;;578    
;;;579    
;;;580    } 
00055a  bd38              POP      {r3-r5,pc}
                  |L1.1372|
00055c  f8b40058          LDRH     r0,[r4,#0x58]         ;523  ; vz_cnt_s_
000560  f44f6161          MOV      r1,#0xe10             ;523
000564  2500              MOVS     r5,#0                 ;528
000566  4288              CMP      r0,r1                 ;523
000568  d215              BCS      |L1.1430|
00056a  f1000001          ADD      r0,r0,#1              ;525
00056e  b280              UXTH     r0,r0                 ;525
000570  f8a40058          STRH     r0,[r4,#0x58]         ;525
000574  4288              CMP      r0,r1                 ;526
000576  d30e              BCC      |L1.1430|
000578  f8a45058          STRH     r5,[r4,#0x58]         ;528
00057c  f8b4005a          LDRH     r0,[r4,#0x5a]         ;529  ; vz_cnt_h
000580  b148              CBZ      r0,|L1.1430|
000582  f1a00001          SUB      r0,r0,#1              ;531
000586  f8240f5a          STRH     r0,[r4,#0x5a]!        ;531
00058a  8860              LDRH     r0,[r4,#2]            ;532  ; vz_cnt_h_
00058c  f1000001          ADD      r0,r0,#1              ;532
000590  8060              STRH     r0,[r4,#2]            ;532
000592  f1a4045a          SUB      r4,r4,#0x5a           ;532
                  |L1.1430|
000596  f8b40056          LDRH     r0,[r4,#0x56]         ;538  ; vz_cnt_s
00059a  283c              CMP      r0,#0x3c              ;538
00059c  d2dd              BCS      |L1.1370|
00059e  f1000001          ADD      r0,r0,#1              ;540
0005a2  b280              UXTH     r0,r0                 ;540
0005a4  f8a40056          STRH     r0,[r4,#0x56]         ;540
0005a8  283c              CMP      r0,#0x3c              ;541
0005aa  d3d6              BCC      |L1.1370|
0005ac  f8245f56          STRH     r5,[r4,#0x56]!        ;543
0005b0  8960              LDRH     r0,[r4,#0xa]          ;545  ; __ee_vz_cnt
0005b2  f1a00001          SUB      r0,r0,#1              ;545
0005b6  b201              SXTH     r1,r0                 ;545
0005b8  8161              STRH     r1,[r4,#0xa]          ;545
0005ba  f44f7027          MOV      r0,#0x29c             ;546
0005be  f7fffffe          BL       lc640_write_int
0005c2  8960              LDRH     r0,[r4,#0xa]          ;547  ; __ee_vz_cnt
0005c4  f1a40456          SUB      r4,r4,#0x56           ;547
0005c8  b118              CBZ      r0,|L1.1490|
0005ca  48b7              LDR      r0,|L1.2216|
0005cc  8800              LDRH     r0,[r0,#0]            ;547  ; speedChrgBlckStat
0005ce  2801              CMP      r0,#1                 ;547
0005d0  d1c3              BNE      |L1.1370|
                  |L1.1490|
0005d2  7565              STRB     r5,[r4,#0x15]         ;549
0005d4  f8a45062          STRH     r5,[r4,#0x62]         ;550
0005d8  2100              MOVS     r1,#0                 ;551
0005da  f240209a          MOV      r0,#0x29a             ;551
0005de  f7fffffe          BL       lc640_write_int
0005e2  e8bd4038          POP      {r3-r5,lr}            ;555
0005e6  2000              MOVS     r0,#0                 ;555
0005e8  f7ffbffe          B.W      vz_mem_hndl
;;;581    
                          ENDP

                  vz1_drv PROC
;;;583    //‰‡È‚Â Û‡‚ÌËÚÂÎ¸ÌÓ„Ó Á‡ˇ‰‡
;;;584    void vz1_drv(void)
0005ec  e92d4ff8          PUSH     {r3-r11,lr}
;;;585    {
;;;586    if(volt_region_cnt)volt_region_cnt--;
0005f0  f8df822c          LDR      r8,|L1.2080|
0005f4  f9b80070          LDRSH    r0,[r8,#0x70]  ; volt_region_cnt
0005f8  b118              CBZ      r0,|L1.1538|
0005fa  f1a00001          SUB      r0,r0,#1
0005fe  f8a80070          STRH     r0,[r8,#0x70]
                  |L1.1538|
;;;587    if(vz1_stat==vz1sOFF)
000602  f8980021          LDRB     r0,[r8,#0x21]  ; vz1_stat
000606  b928              CBNZ     r0,|L1.1556|
;;;588    	{
;;;589    	mess_send(MESS2RELE_HNDL,PARAM_RELE_SAMOKALIBR,0,20);
000608  2314              MOVS     r3,#0x14
00060a  2200              MOVS     r2,#0
00060c  2164              MOVS     r1,#0x64
00060e  20d2              MOVS     r0,#0xd2
000610  f7fffffe          BL       mess_send
                  |L1.1556|
;;;590    	}
;;;591    if(vz1_stat==vz1sSTEP1)
000614  f8980021          LDRB     r0,[r8,#0x21]  ; vz1_stat
;;;592    	{
;;;593    	if(vz1_stat_old!=vz1_stat)
;;;594    		{
;;;595    		vz1_stat_cnt=5;
;;;596    		}
;;;597    	if(vz1_stat_cnt)
;;;598    		{
;;;599    		vz1_stat_cnt--;
;;;600    		if(vz1_stat_cnt==0)
;;;601    			{
;;;602    			vz1_stat=vz1sERR1; 	//ÕÂ ‚ÍÎ˛˜ËÎ‡Ò¸ ‚ÂÌÚËÎˇˆËˇ;
;;;603    			lc640_write(EE_VZ1_STAT,vz1sERR1);
;;;604    			}
;;;605    		}
;;;606    	if(sk_stat[0]==1)
000618  4d89              LDR      r5,|L1.2112|
00061a  f44f7bc9          MOV      r11,#0x192            ;603
00061e  2801              CMP      r0,#1                 ;591
000620  d139              BNE      |L1.1686|
000622  f8980022          LDRB     r0,[r8,#0x22]         ;593  ; vz1_stat_old
000626  2801              CMP      r0,#1                 ;593
000628  d003              BEQ      |L1.1586|
00062a  f04f0005          MOV      r0,#5                 ;595
00062e  f8a8006e          STRH     r0,[r8,#0x6e]         ;595
                  |L1.1586|
000632  f9b8006e          LDRSH    r0,[r8,#0x6e]         ;597  ; vz1_stat_cnt
000636  b168              CBZ      r0,|L1.1620|
000638  f1a00001          SUB      r0,r0,#1              ;599
00063c  b200              SXTH     r0,r0                 ;599
00063e  f8a8006e          STRH     r0,[r8,#0x6e]         ;599
000642  b938              CBNZ     r0,|L1.1620|
000644  f04f000b          MOV      r0,#0xb               ;602
000648  f8880021          STRB     r0,[r8,#0x21]         ;602
00064c  4601              MOV      r1,r0                 ;603
00064e  4658              MOV      r0,r11                ;603
000650  f7fffffe          BL       lc640_write
                  |L1.1620|
000654  7828              LDRB     r0,[r5,#0]  ; sk_stat
000656  2801              CMP      r0,#1
000658  d117              BNE      |L1.1674|
;;;607    		{
;;;608    		vz1_stat=vz1sSTEP2;
00065a  f04f0002          MOV      r0,#2
00065e  f8880021          STRB     r0,[r8,#0x21]
;;;609    		lc640_write(EE_VZ1_STAT,vz1sSTEP2);
000662  4601              MOV      r1,r0
000664  4658              MOV      r0,r11
000666  f7fffffe          BL       lc640_write
;;;610    		tree_up(iVZ1_STEP2_2,1,0,0);
00066a  2300              MOVS     r3,#0
00066c  461a              MOV      r2,r3
00066e  2101              MOVS     r1,#1
000670  20de              MOVS     r0,#0xde
000672  f7fffffe          BL       tree_up
;;;611    		tree_up(iVZ1_STEP2_1,0,0,0);
000676  2300              MOVS     r3,#0
000678  461a              MOV      r2,r3
00067a  4619              MOV      r1,r3
00067c  20dd              MOVS     r0,#0xdd
00067e  f7fffffe          BL       tree_up
;;;612    		ret(1200);
000682  f44f6096          MOV      r0,#0x4b0
000686  f7fffffe          BL       ||ret||
                  |L1.1674|
;;;613    		}
;;;614    	mess_send(MESS2RELE_HNDL,PARAM_RELE_SAMOKALIBR,0,20);
00068a  2314              MOVS     r3,#0x14
00068c  2200              MOVS     r2,#0
00068e  2164              MOVS     r1,#0x64
000690  20d2              MOVS     r0,#0xd2
000692  f7fffffe          BL       mess_send
                  |L1.1686|
;;;615    	}
;;;616    
;;;617    if(vz1_stat==vz1sSTEP2)
000696  f8980021          LDRB     r0,[r8,#0x21]  ; vz1_stat
;;;618    	{
;;;619    	if((vz1_stat_old!=vz1_stat)||(vz1_stat_cnt==0))
;;;620    		{
;;;621    		vz1_stat_cnt=15;
00069a  f04f090f          MOV      r9,#0xf
00069e  2802              CMP      r0,#2                 ;617
0006a0  d118              BNE      |L1.1748|
0006a2  f8980022          LDRB     r0,[r8,#0x22]         ;619  ; vz1_stat_old
0006a6  2802              CMP      r0,#2                 ;619
0006a8  d102              BNE      |L1.1712|
0006aa  f8b8006e          LDRH     r0,[r8,#0x6e]         ;619  ; vz1_stat_cnt
0006ae  b908              CBNZ     r0,|L1.1716|
                  |L1.1712|
0006b0  f8a8906e          STRH     r9,[r8,#0x6e]
                  |L1.1716|
;;;622    		}
;;;623    	vz1_stat_cnt--;
0006b4  f8b8006e          LDRH     r0,[r8,#0x6e]  ; vz1_stat_cnt
0006b8  f1a00001          SUB      r0,r0,#1
0006bc  f8a8006e          STRH     r0,[r8,#0x6e]
;;;624    	mess_send(MESS2RELE_HNDL,PARAM_RELE_SAMOKALIBR,0,20);
0006c0  f04f0314          MOV      r3,#0x14
0006c4  f04f0200          MOV      r2,#0
0006c8  f04f0164          MOV      r1,#0x64
0006cc  f04f00d2          MOV      r0,#0xd2
0006d0  f7fffffe          BL       mess_send
                  |L1.1748|
;;;625    	}
;;;626    
;;;627    if(vz1_stat==vz1sSTEP3)
0006d4  f8980021          LDRB     r0,[r8,#0x21]  ; vz1_stat
;;;628    	{
;;;629    	if((vz1_stat_old!=vz1_stat)||(vz1_stat_cnt==0))
;;;630    		{
;;;631    		vz1_stat_cnt=10;
0006d8  240a              MOVS     r4,#0xa
0006da  2600              MOVS     r6,#0                 ;586
0006dc  f04f0a01          MOV      r10,#1                ;587
;;;632    
;;;633    		}
;;;634    	vz1_stat_cnt--;
;;;635    	if((vz1_stat_cnt==10)||(vz1_stat_cnt==9))
;;;636    		{
;;;637    		show_mess(	"     ¬ Àﬁ◊»“≈       ",
0006e0  f2413788          MOV      r7,#0x1388
0006e4  2803              CMP      r0,#3                 ;627
0006e6  d131              BNE      |L1.1868|
0006e8  f8980022          LDRB     r0,[r8,#0x22]         ;629  ; vz1_stat_old
0006ec  2803              CMP      r0,#3                 ;629
0006ee  d102              BNE      |L1.1782|
0006f0  f8b8006e          LDRH     r0,[r8,#0x6e]         ;629  ; vz1_stat_cnt
0006f4  b908              CBNZ     r0,|L1.1786|
                  |L1.1782|
0006f6  f8a8406e          STRH     r4,[r8,#0x6e]         ;631
                  |L1.1786|
0006fa  f8b8006e          LDRH     r0,[r8,#0x6e]         ;634  ; vz1_stat_cnt
0006fe  f1a00001          SUB      r0,r0,#1              ;634
000702  b200              SXTH     r0,r0                 ;634
000704  f8a8006e          STRH     r0,[r8,#0x6e]         ;634
000708  280a              CMP      r0,#0xa               ;635
00070a  d001              BEQ      |L1.1808|
00070c  2809              CMP      r0,#9                 ;635
00070e  d106              BNE      |L1.1822|
                  |L1.1808|
000710  a366              ADR      r3,|L1.2220|
000712  a26c              ADR      r2,|L1.2244|
000714  a171              ADR      r1,|L1.2268|
000716  a077              ADR      r0,|L1.2292|
000718  9700              STR      r7,[sp,#0]
00071a  f7fffffe          BL       show_mess
                  |L1.1822|
;;;638    					"      “”Ã¡À≈–       ",
;;;639    					"     ¬€—Œ Œ√Œ       ",
;;;640    					"    Õ¿œ–ﬂ∆≈Õ»ﬂ      ",
;;;641    					5000);
;;;642    		}
;;;643    	if(sk_stat[1]==1)
00071e  7868              LDRB     r0,[r5,#1]  ; sk_stat
000720  2801              CMP      r0,#1
000722  d10d              BNE      |L1.1856|
;;;644    		{
;;;645    		vz1_stat=vz1sWRK;
000724  f8884021          STRB     r4,[r8,#0x21]
;;;646    		lc640_write(EE_VZ1_STAT,vz1sWRK);
000728  210a              MOVS     r1,#0xa
00072a  4658              MOV      r0,r11
00072c  f7fffffe          BL       lc640_write
;;;647    		volt_region=1;
000730  f888a023          STRB     r10,[r8,#0x23]
;;;648    		cntrl_stat=0;
000734  f8a86026          STRH     r6,[r8,#0x26]
;;;649    		cntrl_stat_new=0;
000738  f8a8603c          STRH     r6,[r8,#0x3c]
;;;650    		cntrl_stat_old=0;
00073c  f8a86028          STRH     r6,[r8,#0x28]
                  |L1.1856|
;;;651    		}
;;;652    	mess_send(MESS2RELE_HNDL,PARAM_RELE_SAMOKALIBR,0,20);
000740  2314              MOVS     r3,#0x14
000742  2200              MOVS     r2,#0
000744  2164              MOVS     r1,#0x64
000746  20d2              MOVS     r0,#0xd2
000748  f7fffffe          BL       mess_send
                  |L1.1868|
;;;653    	}
;;;654    
;;;655    if(vz1_stat==vz1sWRK)
00074c  f8980021          LDRB     r0,[r8,#0x21]  ; vz1_stat
000750  280a              CMP      r0,#0xa
000752  d15e              BNE      |L1.2066|
;;;656    	{
;;;657    	if(vz1_stat_old!=vz1_stat)
;;;658    		{
;;;659    		vz1_wrk_cnt=3600L/*100L*/*((long)UZ_T);
000754  4932              LDR      r1,|L1.2080|
000756  f8980022          LDRB     r0,[r8,#0x22]         ;657  ; vz1_stat_old
00075a  3180              ADDS     r1,r1,#0x80
00075c  280a              CMP      r0,#0xa               ;657
00075e  d008              BEQ      |L1.1906|
000760  486a              LDR      r0,|L1.2316|
000762  f44f6261          MOV      r2,#0xe10
000766  f9b00000          LDRSH    r0,[r0,#0]  ; UZ_T
00076a  fb00f002          MUL      r0,r0,r2
00076e  6288              STR      r0,[r1,#0x28]  ; vz1_wrk_cnt
;;;660    		//if(VZ_HR==0)  	hv_vz_wrk_cnt=1800L;
;;;661    		vz1_up_cnt=0L;
000770  62ce              STR      r6,[r1,#0x2c]  ; vz1_up_cnt
                  |L1.1906|
;;;662    
;;;663    		}
;;;664    	vz1_wrk_cnt--;
000772  6a88              LDR      r0,[r1,#0x28]  ; vz1_wrk_cnt
000774  f1a00001          SUB      r0,r0,#1
000778  6288              STR      r0,[r1,#0x28]  ; vz1_wrk_cnt
;;;665    	vz1_up_cnt++;
00077a  6aca              LDR      r2,[r1,#0x2c]  ; vz1_up_cnt
00077c  f1020201          ADD      r2,r2,#1
000780  62ca              STR      r2,[r1,#0x2c]  ; vz1_up_cnt
;;;666    
;;;667    	if(vz1_wrk_cnt==0)
000782  b940              CBNZ     r0,|L1.1942|
;;;668    		{
;;;669    		vz1_stat=vz1sFINE;
000784  f8889021          STRB     r9,[r8,#0x21]
;;;670    		lc640_write(EE_VZ1_STAT,vz1sFINE);
000788  210f              MOVS     r1,#0xf
00078a  4658              MOV      r0,r11
00078c  f7fffffe          BL       lc640_write
;;;671    		uz_mem_hndl(0);
000790  2000              MOVS     r0,#0
000792  f7fffffe          BL       uz_mem_hndl
                  |L1.1942|
;;;672    		}
;;;673    	if(sk_stat[0]==0)
000796  7828              LDRB     r0,[r5,#0]  ; sk_stat
000798  b938              CBNZ     r0,|L1.1962|
;;;674    		{
;;;675    		vz1_stat=vz1sERR2;
00079a  f04f000c          MOV      r0,#0xc
00079e  f8880021          STRB     r0,[r8,#0x21]
;;;676    		lc640_write(EE_VZ1_STAT,vz1sERR2);
0007a2  4601              MOV      r1,r0
0007a4  4658              MOV      r0,r11
0007a6  f7fffffe          BL       lc640_write
                  |L1.1962|
;;;677    		}
;;;678    	if(sk_stat[1]==0)
0007aa  7868              LDRB     r0,[r5,#1]  ; sk_stat
0007ac  b938              CBNZ     r0,|L1.1982|
;;;679    		{
;;;680    		vz1_stat=vz1sERR3;
0007ae  f04f000d          MOV      r0,#0xd
0007b2  f8880021          STRB     r0,[r8,#0x21]
;;;681    		lc640_write(EE_VZ1_STAT,vz1sERR3);
0007b6  4601              MOV      r1,r0
0007b8  4658              MOV      r0,r11
0007ba  f7fffffe          BL       lc640_write
                  |L1.1982|
;;;682    		}
;;;683    	if(((Ibmax/10)>IZMAX_)&&(cntrl_stat<=20)&&(volt_region==1)&&(volt_region_cnt==0))
0007be  f9b8003e          LDRSH    r0,[r8,#0x3e]  ; Ibmax
0007c2  f8b81040          LDRH     r1,[r8,#0x40]  ; IZMAX_
0007c6  fb90f0f4          SDIV     r0,r0,r4
;;;684    		{
;;;685    		volt_region=0;
;;;686    		cntrl_stat=1000;
0007ca  f44f727a          MOV      r2,#0x3e8
0007ce  4288              CMP      r0,r1                 ;683
0007d0  dd16              BLE      |L1.2048|
0007d2  f9b83026          LDRSH    r3,[r8,#0x26]         ;683  ; cntrl_stat
0007d6  2b14              CMP      r3,#0x14              ;683
0007d8  dc12              BGT      |L1.2048|
0007da  f8983023          LDRB     r3,[r8,#0x23]         ;683  ; volt_region
0007de  2b01              CMP      r3,#1                 ;683
0007e0  d10e              BNE      |L1.2048|
0007e2  f8b83070          LDRH     r3,[r8,#0x70]         ;683  ; volt_region_cnt
0007e6  b95b              CBNZ     r3,|L1.2048|
0007e8  f8886023          STRB     r6,[r8,#0x23]         ;685
0007ec  f8a82026          STRH     r2,[r8,#0x26]
;;;687    		cntrl_stat_new=1000;
0007f0  f8a8203c          STRH     r2,[r8,#0x3c]
;;;688    		cntrl_stat_old=1000;
0007f4  f8a82028          STRH     r2,[r8,#0x28]
;;;689    		volt_region_cnt=110;
0007f8  f04f036e          MOV      r3,#0x6e
0007fc  f8a83070          STRH     r3,[r8,#0x70]
                  |L1.2048|
;;;690    		}
;;;691    	if(((Ibmax/10)<IZMAX_)&&(cntrl_stat>=1000)&&(volt_region==0)&&(volt_region_cnt==0))
000800  4288              CMP      r0,r1
000802  da07              BGE      |L1.2068|
000804  f9b80026          LDRSH    r0,[r8,#0x26]  ; cntrl_stat
000808  4290              CMP      r0,r2
00080a  db03              BLT      |L1.2068|
00080c  f8980023          LDRB     r0,[r8,#0x23]  ; volt_region
000810  e07e              B        |L1.2320|
                  |L1.2066|
000812  e09e              B        |L1.2386|
                  |L1.2068|
000814  e08a              B        |L1.2348|
000816  0000              DCW      0x0000
                  |L1.2072|
                          DCD      0x40024000
                  |L1.2076|
                          DCD      AVZ
                  |L1.2080|
                          DCD      ||area_number.25||
                  |L1.2084|
                          DCD      YEAR_AVZ
                  |L1.2088|
                          DCD      MONTH_AVZ
                  |L1.2092|
                          DCD      DATE_AVZ
                  |L1.2096|
                          DCD      HOUR_AVZ
                  |L1.2100|
                          DCD      MIN_AVZ
                  |L1.2104|
                          DCD      SEC_AVZ
                  |L1.2108|
                          DCD      AVZ_TIME
                  |L1.2112|
                          DCD      sk_stat
                  |L1.2116|
                          DCD      0x40024020
                  |L1.2120|
000848  20202020          DCB      "    ",194,197,205,210,200,203,223,214,200,223,"!!!   ",0
00084c  c2c5cdd2
000850  c8cbdfd6
000854  c8df2121
000858  21202020
00085c  00      
00085d  00                DCB      0
00085e  00                DCB      0
00085f  00                DCB      0
                  |L1.2144|
000860  20202020          DCB      "     ",205,197,200,209,207,208,192,194,205,192,"     ",0
000864  20cdc5c8
000868  d1cfd0c0
00086c  c2cdc020
000870  20202020
000874  00      
000875  00                DCB      0
000876  00                DCB      0
000877  00                DCB      0
                  |L1.2168|
000878  20202020          DCB      "    ",199,192,193,203,206,202,200,208,206,194,192,205," "
00087c  c7c0c1cb
000880  cecac8d0
000884  cec2c0cd
000888  20      
000889  20202000          DCB      "   ",0
00088d  00                DCB      0
00088e  00                DCB      0
00088f  00                DCB      0
                  |L1.2192|
000890  c2dbd0c0          DCB      194,219,208,192,194,205,200,194,192,222,217,200,201," ",199
000894  c2cdc8c2
000898  c0ded9c8
00089c  c920c7  
00089f  c0d0dfc4          DCB      192,208,223,196," ",0
0008a3  2000    
0008a5  00                DCB      0
0008a6  00                DCB      0
0008a7  00                DCB      0
                  |L1.2216|
                          DCD      speedChrgBlckStat
                  |L1.2220|
0008ac  20202020          DCB      "    ",205,192,207,208,223,198,197,205,200,223,"      ",0
0008b0  cdc0cfd0
0008b4  dfc6c5cd
0008b8  c8df2020
0008bc  20202020
0008c0  00      
0008c1  00                DCB      0
0008c2  00                DCB      0
0008c3  00                DCB      0
                  |L1.2244|
0008c4  20202020          DCB      "     ",194,219,209,206,202,206,195,206,"       ",0
0008c8  20c2dbd1
0008cc  cecacec3
0008d0  ce202020
0008d4  20202020
0008d8  00      
0008d9  00                DCB      0
0008da  00                DCB      0
0008db  00                DCB      0
                  |L1.2268|
0008dc  20202020          DCB      "      ",210,211,204,193,203,197,208,"       ",0
0008e0  2020d2d3
0008e4  ccc1cbc5
0008e8  d0202020
0008ec  20202020
0008f0  00      
0008f1  00                DCB      0
0008f2  00                DCB      0
0008f3  00                DCB      0
                  |L1.2292|
0008f4  20202020          DCB      "     ",194,202,203,222,215,200,210,197,"       ",0
0008f8  20c2cacb
0008fc  ded7c8d2
000900  c5202020
000904  20202020
000908  00      
000909  00                DCB      0
00090a  00                DCB      0
00090b  00                DCB      0
                  |L1.2316|
                          DCD      UZ_T
                  |L1.2320|
000910  b960              CBNZ     r0,|L1.2348|
000912  f8b80070          LDRH     r0,[r8,#0x70]  ; volt_region_cnt
000916  b948              CBNZ     r0,|L1.2348|
;;;692    		{
;;;693    		volt_region=1;
000918  f888a023          STRB     r10,[r8,#0x23]
;;;694    		cntrl_stat=10;
00091c  f8a84026          STRH     r4,[r8,#0x26]
;;;695    		cntrl_stat_new=10;
000920  f8a8403c          STRH     r4,[r8,#0x3c]
;;;696    		cntrl_stat_old=10;
000924  f8a84028          STRH     r4,[r8,#0x28]
;;;697    		volt_region_cnt=10;
000928  f8a84070          STRH     r4,[r8,#0x70]
                  |L1.2348|
;;;698    		}
;;;699    	if(volt_region==0) 		mess_send(MESS2RELE_HNDL,PARAM_RELE_SAMOKALIBR,0,20);
00092c  f8980023          LDRB     r0,[r8,#0x23]  ; volt_region
000930  b110              CBZ      r0,|L1.2360|
;;;700    	else if(volt_region==1) mess_send(MESS2RELE_HNDL,PARAM_RELE_SAMOKALIBR,1,20);
000932  2801              CMP      r0,#1
000934  d007              BEQ      |L1.2374|
000936  e00c              B        |L1.2386|
                  |L1.2360|
000938  2314              MOVS     r3,#0x14              ;699
00093a  2200              MOVS     r2,#0                 ;699
00093c  2164              MOVS     r1,#0x64              ;699
00093e  20d2              MOVS     r0,#0xd2              ;699
000940  f7fffffe          BL       mess_send
000944  e005              B        |L1.2386|
                  |L1.2374|
000946  2314              MOVS     r3,#0x14
000948  2201              MOVS     r2,#1
00094a  2164              MOVS     r1,#0x64
00094c  20d2              MOVS     r0,#0xd2
00094e  f7fffffe          BL       mess_send
                  |L1.2386|
;;;701    	}
;;;702    
;;;703    if(vz1_stat==vz1sERR1)		//ŒÚÒÛÚÒÚ‚ÛÂÚ ‚ÂÌÚËÎˇˆËˇ ÔË ‚ÍÎ˛˜ÂÌËË
000952  f8980021          LDRB     r0,[r8,#0x21]  ; vz1_stat
000956  280b              CMP      r0,#0xb
000958  d120              BNE      |L1.2460|
;;;704    	{
;;;705    	if((vz1_stat_old!=vz1_stat)||(vz1_stat_cnt==0))
00095a  f8980022          LDRB     r0,[r8,#0x22]  ; vz1_stat_old
00095e  280b              CMP      r0,#0xb
000960  d102              BNE      |L1.2408|
000962  f8b8006e          LDRH     r0,[r8,#0x6e]  ; vz1_stat_cnt
000966  b908              CBNZ     r0,|L1.2412|
                  |L1.2408|
;;;706    		{
;;;707    		vz1_stat_cnt=10;
000968  f8a8406e          STRH     r4,[r8,#0x6e]
                  |L1.2412|
;;;708    		}
;;;709    	vz1_stat_cnt--;
00096c  f8b8006e          LDRH     r0,[r8,#0x6e]  ; vz1_stat_cnt
000970  f1a00001          SUB      r0,r0,#1
000974  b200              SXTH     r0,r0
000976  f8a8006e          STRH     r0,[r8,#0x6e]
;;;710    	if((vz1_stat_cnt==10)||(vz1_stat_cnt==9))
00097a  280a              CMP      r0,#0xa
00097c  d001              BEQ      |L1.2434|
00097e  2809              CMP      r0,#9
000980  d106              BNE      |L1.2448|
                  |L1.2434|
;;;711    		{
;;;712    		show_mess(	"”–¿¬Õ»“≈À‹Õ€… «¿–ﬂƒ ",
000982  a3ef              ADR      r3,|L1.3392|
000984  a2f4              ADR      r2,|L1.3416|
000986  a1fa              ADR      r1,|L1.3440|
000988  a0ff              ADR      r0,|L1.3464|
00098a  9700              STR      r7,[sp,#0]
00098c  f7fffffe          BL       show_mess
                  |L1.2448|
;;;713    					"   Õ≈ ÃŒ∆≈“ ¡€“‹    ",
;;;714    					"      ¬ Àﬁ◊≈Õ       ",
;;;715    					"  ¡≈« ¬≈Õ“»Àﬂ÷»»!!  ",
;;;716    					5000);
;;;717    		}
;;;718    	mess_send(MESS2RELE_HNDL,PARAM_RELE_SAMOKALIBR,0,20);
000990  2314              MOVS     r3,#0x14
000992  2200              MOVS     r2,#0
000994  2164              MOVS     r1,#0x64
000996  20d2              MOVS     r0,#0xd2
000998  f7fffffe          BL       mess_send
                  |L1.2460|
;;;719    	}
;;;720    if(vz1_stat==vz1sERR2)		//œÓÔ‡Î‡ ‚ÂÌÚËÎˇˆËˇ ÔË ‡·ÓÚÂ
00099c  f8980021          LDRB     r0,[r8,#0x21]  ; vz1_stat
0009a0  280c              CMP      r0,#0xc
0009a2  d12c              BNE      |L1.2558|
;;;721    	{
;;;722    	if((vz1_stat_old!=vz1_stat)||(vz1_stat_cnt==0))
0009a4  f8980022          LDRB     r0,[r8,#0x22]  ; vz1_stat_old
0009a8  280c              CMP      r0,#0xc
0009aa  d102              BNE      |L1.2482|
0009ac  f8b8006e          LDRH     r0,[r8,#0x6e]  ; vz1_stat_cnt
0009b0  b908              CBNZ     r0,|L1.2486|
                  |L1.2482|
;;;723    		{
;;;724    		vz1_stat_cnt=10;
0009b2  f8a8406e          STRH     r4,[r8,#0x6e]
                  |L1.2486|
;;;725    		}
;;;726    	vz1_stat_cnt--;
0009b6  f8b8006e          LDRH     r0,[r8,#0x6e]  ; vz1_stat_cnt
0009ba  f1a00001          SUB      r0,r0,#1
0009be  b200              SXTH     r0,r0
0009c0  f8a8006e          STRH     r0,[r8,#0x6e]
;;;727    	if((vz1_stat_cnt==10)||(vz1_stat_cnt==9))
0009c4  280a              CMP      r0,#0xa
0009c6  d001              BEQ      |L1.2508|
0009c8  2809              CMP      r0,#9
0009ca  d109              BNE      |L1.2528|
                  |L1.2508|
;;;728    		{
;;;729    		show_mess(	"”–¿¬Õ»“≈À‹Õ€… «¿–ﬂƒ ",
0009cc  f2af1388          ADR      r3,|L1.2120|
0009d0  f2af1274          ADR      r2,|L1.2144|
0009d4  f2af1160          ADR      r1,|L1.2168|
0009d8  a0eb              ADR      r0,|L1.3464|
0009da  9700              STR      r7,[sp,#0]
0009dc  f7fffffe          BL       show_mess
                  |L1.2528|
;;;730    					"    «¿¡ÀŒ »–Œ¬¿Õ    ",
;;;731    					"     Õ≈»—œ–¿¬Õ¿     ",
;;;732    					"    ¬≈Õ“»Àﬂ÷»ﬂ!!!   ",
;;;733    					5000);
;;;734    		}
;;;735    	if(sk_stat[0]==1)
0009e0  7828              LDRB     r0,[r5,#0]  ; sk_stat
0009e2  2801              CMP      r0,#1
0009e4  d105              BNE      |L1.2546|
;;;736    		{
;;;737    		vz1_stat=vz1sWRK;
0009e6  f8884021          STRB     r4,[r8,#0x21]
;;;738    		lc640_write(EE_VZ1_STAT,vz1sWRK);
0009ea  210a              MOVS     r1,#0xa
0009ec  4658              MOV      r0,r11
0009ee  f7fffffe          BL       lc640_write
                  |L1.2546|
;;;739    		}
;;;740    	mess_send(MESS2RELE_HNDL,PARAM_RELE_SAMOKALIBR,0,20);
0009f2  2314              MOVS     r3,#0x14
0009f4  2200              MOVS     r2,#0
0009f6  2164              MOVS     r1,#0x64
0009f8  20d2              MOVS     r0,#0xd2
0009fa  f7fffffe          BL       mess_send
                  |L1.2558|
;;;741    	}
;;;742    
;;;743    if(vz1_stat==vz1sERR3)		//ŒÚÍÎ˛˜ÂÌ ÚÛÏ·ÎÂ "¬˚ÒÓÍÓÂ Ì‡ÔˇÊÂÌËÂ"
0009fe  f8980021          LDRB     r0,[r8,#0x21]  ; vz1_stat
000a02  280d              CMP      r0,#0xd
000a04  d129              BNE      |L1.2650|
;;;744    	{
;;;745    	if((vz1_stat_old!=vz1_stat)||(vz1_stat_cnt==0))
000a06  f8980022          LDRB     r0,[r8,#0x22]  ; vz1_stat_old
000a0a  280d              CMP      r0,#0xd
000a0c  d102              BNE      |L1.2580|
000a0e  f8b8006e          LDRH     r0,[r8,#0x6e]  ; vz1_stat_cnt
000a12  b908              CBNZ     r0,|L1.2584|
                  |L1.2580|
;;;746    		{
;;;747    		vz1_stat_cnt=10;
000a14  f8a8406e          STRH     r4,[r8,#0x6e]
                  |L1.2584|
;;;748    		}
;;;749    	vz1_stat_cnt--;
000a18  f8b8006e          LDRH     r0,[r8,#0x6e]  ; vz1_stat_cnt
000a1c  f1a00001          SUB      r0,r0,#1
000a20  b200              SXTH     r0,r0
000a22  f8a8006e          STRH     r0,[r8,#0x6e]
;;;750    	if((vz1_stat_cnt==10)||(vz1_stat_cnt==9))
000a26  280a              CMP      r0,#0xa
000a28  d001              BEQ      |L1.2606|
000a2a  2809              CMP      r0,#9
000a2c  d106              BNE      |L1.2620|
                  |L1.2606|
;;;751    		{
;;;752    		show_mess(	"”–¿¬Õ»“≈À‹Õ€… «¿–ﬂƒ ",
000a2e  a3dc              ADR      r3,|L1.3488|
000a30  a2e1              ADR      r2,|L1.3512|
000a32  a1e7              ADR      r1,|L1.3536|
000a34  a0d4              ADR      r0,|L1.3464|
000a36  9700              STR      r7,[sp,#0]
000a38  f7fffffe          BL       show_mess
                  |L1.2620|
;;;753    					"  ¡”ƒ≈“ œ–ŒƒŒÀ∆≈Õ   ",
;;;754    					"  œŒ—À≈ ¬ Àﬁ◊≈Õ»ﬂ   ",
;;;755    					"*   “”Ã¡À≈–¿!!!     ",
;;;756    					5000);
;;;757    		}
;;;758    	if(sk_stat[1]==1)
000a3c  7868              LDRB     r0,[r5,#1]  ; sk_stat
000a3e  2801              CMP      r0,#1
000a40  d105              BNE      |L1.2638|
;;;759    		{
;;;760    		vz1_stat=vz1sWRK;
000a42  f8884021          STRB     r4,[r8,#0x21]
;;;761    		lc640_write(EE_VZ1_STAT,vz1sWRK);
000a46  210a              MOVS     r1,#0xa
000a48  4658              MOV      r0,r11
000a4a  f7fffffe          BL       lc640_write
                  |L1.2638|
;;;762    		}
;;;763    	mess_send(MESS2RELE_HNDL,PARAM_RELE_SAMOKALIBR,0,20);
000a4e  2314              MOVS     r3,#0x14
000a50  2200              MOVS     r2,#0
000a52  2164              MOVS     r1,#0x64
000a54  20d2              MOVS     r0,#0xd2
000a56  f7fffffe          BL       mess_send
                  |L1.2650|
;;;764    	}
;;;765    if(vz1_stat==vz1sERR4)		//¬« Á‡ÍÓÌ˜ËÎÒˇ ‡ ÚÛÏ·ÎÂ ‚ÍÎ˛˜ÂÌ
000a5a  f8980021          LDRB     r0,[r8,#0x21]  ; vz1_stat
000a5e  280e              CMP      r0,#0xe
000a60  d12d              BNE      |L1.2750|
;;;766    	{
;;;767    	if((vz1_stat_old!=vz1_stat)||(vz1_stat_cnt==0))
000a62  f8980022          LDRB     r0,[r8,#0x22]  ; vz1_stat_old
000a66  280e              CMP      r0,#0xe
000a68  d102              BNE      |L1.2672|
000a6a  f8b8006e          LDRH     r0,[r8,#0x6e]  ; vz1_stat_cnt
000a6e  b908              CBNZ     r0,|L1.2676|
                  |L1.2672|
;;;768    		{
;;;769    		vz1_stat_cnt=10;
000a70  f8a8406e          STRH     r4,[r8,#0x6e]
                  |L1.2676|
;;;770    		}
;;;771    	vz1_stat_cnt--;
000a74  f8b8006e          LDRH     r0,[r8,#0x6e]  ; vz1_stat_cnt
000a78  f1a00001          SUB      r0,r0,#1
000a7c  b200              SXTH     r0,r0
000a7e  f8a8006e          STRH     r0,[r8,#0x6e]
;;;772    	if((vz1_stat_cnt==10)||(vz1_stat_cnt==9))
000a82  280a              CMP      r0,#0xa
000a84  d001              BEQ      |L1.2698|
000a86  2809              CMP      r0,#9
000a88  d109              BNE      |L1.2718|
                  |L1.2698|
;;;773    		{
;;;774    		show_mess(	"*    ¬€ Àﬁ◊»“≈      ",
000a8a  f2af13e0          ADR      r3,|L1.2220|
000a8e  f2af12cc          ADR      r2,|L1.2244|
000a92  f2af11b8          ADR      r1,|L1.2268|
000a96  a0d4              ADR      r0,|L1.3560|
000a98  9700              STR      r7,[sp,#0]
000a9a  f7fffffe          BL       show_mess
                  |L1.2718|
;;;775    					"      “”Ã¡À≈–       ",
;;;776    					"     ¬€—Œ Œ√Œ       ",
;;;777    					"    Õ¿œ–ﬂ∆≈Õ»ﬂ      ",
;;;778    					5000);
;;;779    		}
;;;780    	if(sk_stat[1]==0)
000a9e  7868              LDRB     r0,[r5,#1]  ; sk_stat
000aa0  b938              CBNZ     r0,|L1.2738|
;;;781    		{
;;;782    		vz1_stat=vz1sOFF;
000aa2  f8886021          STRB     r6,[r8,#0x21]
;;;783    		lc640_write(EE_VZ1_STAT,vz1sOFF);
000aa6  2100              MOVS     r1,#0
000aa8  4658              MOV      r0,r11
000aaa  f7fffffe          BL       lc640_write
;;;784    		vz_stop();
000aae  f7fffffe          BL       vz_stop
                  |L1.2738|
;;;785    
;;;786    		}
;;;787    	mess_send(MESS2RELE_HNDL,PARAM_RELE_SAMOKALIBR,1,20);
000ab2  2314              MOVS     r3,#0x14
000ab4  2201              MOVS     r2,#1
000ab6  2164              MOVS     r1,#0x64
000ab8  20d2              MOVS     r0,#0xd2
000aba  f7fffffe          BL       mess_send
                  |L1.2750|
;;;788    	}
;;;789    if(vz1_stat==vz1sFINE)		//”« Á‡ÍÓÌ˜ËÎÒˇ, Ì‡ÔÓÏËÌ‡ÌËÂ
000abe  f8980021          LDRB     r0,[r8,#0x21]  ; vz1_stat
;;;790    	{
;;;791    	if((vz1_stat_old!=vz1_stat)||(vz1_stat_cnt==0))
;;;792    		{
;;;793    		vz1_stat_cnt=10;
;;;794    		}
;;;795    	vz1_stat_cnt--;
;;;796    	if((vz1_stat_cnt==10)||(vz1_stat_cnt==9))
;;;797    		{
;;;798    		show_mess(	"   ”–¿¬Õ»“≈À‹Õ€…    ",
000ac2  f64037b8          MOV      r7,#0xbb8
000ac6  280f              CMP      r0,#0xf               ;789
000ac8  d138              BNE      |L1.2876|
000aca  f8980022          LDRB     r0,[r8,#0x22]         ;791  ; vz1_stat_old
000ace  280f              CMP      r0,#0xf               ;791
000ad0  d102              BNE      |L1.2776|
000ad2  f8b8006e          LDRH     r0,[r8,#0x6e]         ;791  ; vz1_stat_cnt
000ad6  b908              CBNZ     r0,|L1.2780|
                  |L1.2776|
000ad8  f8a8406e          STRH     r4,[r8,#0x6e]         ;793
                  |L1.2780|
000adc  f8b8006e          LDRH     r0,[r8,#0x6e]         ;795  ; vz1_stat_cnt
000ae0  f1a00001          SUB      r0,r0,#1              ;795
000ae4  b200              SXTH     r0,r0                 ;795
000ae6  f8a8006e          STRH     r0,[r8,#0x6e]         ;795
000aea  280a              CMP      r0,#0xa               ;796
000aec  d001              BEQ      |L1.2802|
000aee  2809              CMP      r0,#9                 ;796
000af0  d106              BNE      |L1.2816|
                  |L1.2802|
000af2  a3c3              ADR      r3,|L1.3584|
000af4  a2c8              ADR      r2,|L1.3608|
000af6  a1ce              ADR      r1,|L1.3632|
000af8  a0d3              ADR      r0,|L1.3656|
000afa  9700              STR      r7,[sp,#0]
000afc  f7fffffe          BL       show_mess
                  |L1.2816|
;;;799    					"       «¿–ﬂƒ        ",
;;;800    					"      ”—œ≈ÿÕŒ       ",
;;;801    					"     «¿¬≈–ÿ≈Õ       ",
;;;802    					3000);
;;;803    		}
;;;804    	if((vz1_stat_cnt==6)||(vz1_stat_cnt==5))
000b00  f9b8006e          LDRSH    r0,[r8,#0x6e]  ; vz1_stat_cnt
000b04  2806              CMP      r0,#6
000b06  d001              BEQ      |L1.2828|
000b08  2805              CMP      r0,#5
000b0a  d109              BNE      |L1.2848|
                  |L1.2828|
;;;805    		{
;;;806    		show_mess(	"     ¬€ Àﬁ◊»“≈      ",
000b0c  f2af2364          ADR      r3,|L1.2220|
000b10  f2af2250          ADR      r2,|L1.2244|
000b14  f2af213c          ADR      r1,|L1.2268|
000b18  a0d1              ADR      r0,|L1.3680|
000b1a  9700              STR      r7,[sp,#0]
000b1c  f7fffffe          BL       show_mess
                  |L1.2848|
;;;807    					"      “”Ã¡À≈–       ",
;;;808    					"     ¬€—Œ Œ√Œ       ",
;;;809    					"    Õ¿œ–ﬂ∆≈Õ»ﬂ      ",
;;;810    					3000);
;;;811    		}
;;;812    	if(sk_stat[1]==0)
000b20  7868              LDRB     r0,[r5,#1]  ; sk_stat
000b22  b928              CBNZ     r0,|L1.2864|
;;;813    		{
;;;814    		vz1_stat=vz1sOFF;
000b24  f8886021          STRB     r6,[r8,#0x21]
;;;815    		lc640_write(EE_VZ1_STAT,vz1sOFF);
000b28  2100              MOVS     r1,#0
000b2a  4658              MOV      r0,r11
000b2c  f7fffffe          BL       lc640_write
                  |L1.2864|
;;;816    		}
;;;817    	mess_send(MESS2RELE_HNDL,PARAM_RELE_SAMOKALIBR,0,20);
000b30  2314              MOVS     r3,#0x14
000b32  2200              MOVS     r2,#0
000b34  2164              MOVS     r1,#0x64
000b36  20d2              MOVS     r0,#0xd2
000b38  f7fffffe          BL       mess_send
                  |L1.2876|
;;;818    	}
;;;819    
;;;820    if(vz1_stat==vz1sSTOP)		//”« ÔÂÍ‡˘ÂÌ, Ì‡ÔÓÏËÌ‡ÌËÂ
000b3c  f8980021          LDRB     r0,[r8,#0x21]  ; vz1_stat
000b40  2810              CMP      r0,#0x10
000b42  d138              BNE      |L1.2998|
;;;821    	{
;;;822    	if((vz1_stat_old!=vz1_stat)||(vz1_stat_cnt==0))
000b44  f8980022          LDRB     r0,[r8,#0x22]  ; vz1_stat_old
000b48  2810              CMP      r0,#0x10
000b4a  d102              BNE      |L1.2898|
000b4c  f8b8006e          LDRH     r0,[r8,#0x6e]  ; vz1_stat_cnt
000b50  b908              CBNZ     r0,|L1.2902|
                  |L1.2898|
;;;823    		{
;;;824    		vz1_stat_cnt=10;
000b52  f8a8406e          STRH     r4,[r8,#0x6e]
                  |L1.2902|
;;;825    		}
;;;826    	vz1_stat_cnt--;
000b56  f8b8006e          LDRH     r0,[r8,#0x6e]  ; vz1_stat_cnt
000b5a  f1a00001          SUB      r0,r0,#1
000b5e  b200              SXTH     r0,r0
000b60  f8a8006e          STRH     r0,[r8,#0x6e]
;;;827    	if((vz1_stat_cnt==10)||(vz1_stat_cnt==9))
000b64  280a              CMP      r0,#0xa
000b66  d001              BEQ      |L1.2924|
000b68  2809              CMP      r0,#9
000b6a  d106              BNE      |L1.2938|
                  |L1.2924|
;;;828    		{
;;;829    		show_mess(	"   ”–¿¬Õ»“≈À‹Õ€…    ",
000b6c  a3c2              ADR      r3,|L1.3704|
000b6e  a2c8              ADR      r2,|L1.3728|
000b70  a1af              ADR      r1,|L1.3632|
000b72  a0b5              ADR      r0,|L1.3656|
000b74  9700              STR      r7,[sp,#0]
000b76  f7fffffe          BL       show_mess
                  |L1.2938|
;;;830    					"       «¿–ﬂƒ        ",
;;;831    					"     œ–≈ –¿Ÿ≈Õ      ",
;;;832    					"                    ",
;;;833    					3000);
;;;834    		}
;;;835    	if((vz1_stat_cnt==6)||(vz1_stat_cnt==5))
000b7a  f9b8006e          LDRSH    r0,[r8,#0x6e]  ; vz1_stat_cnt
000b7e  2806              CMP      r0,#6
000b80  d001              BEQ      |L1.2950|
000b82  2805              CMP      r0,#5
000b84  d109              BNE      |L1.2970|
                  |L1.2950|
;;;836    		{
;;;837    		show_mess(	"     ¬€ Àﬁ◊»“≈      ",
000b86  f2af23dc          ADR      r3,|L1.2220|
000b8a  f2af22c8          ADR      r2,|L1.2244|
000b8e  f2af21b4          ADR      r1,|L1.2268|
000b92  a0b3              ADR      r0,|L1.3680|
000b94  9700              STR      r7,[sp,#0]
000b96  f7fffffe          BL       show_mess
                  |L1.2970|
;;;838    					"      “”Ã¡À≈–       ",
;;;839    					"     ¬€—Œ Œ√Œ       ",
;;;840    					"    Õ¿œ–ﬂ∆≈Õ»ﬂ      ",
;;;841    					3000);
;;;842    		}
;;;843    	if(sk_stat[1]==0)
000b9a  7868              LDRB     r0,[r5,#1]  ; sk_stat
000b9c  b928              CBNZ     r0,|L1.2986|
;;;844    		{
;;;845    		vz1_stat=vz1sOFF;
000b9e  f8886021          STRB     r6,[r8,#0x21]
;;;846    		lc640_write(EE_VZ1_STAT,vz1sOFF);
000ba2  2100              MOVS     r1,#0
000ba4  4658              MOV      r0,r11
000ba6  f7fffffe          BL       lc640_write
                  |L1.2986|
;;;847    		}
;;;848    	mess_send(MESS2RELE_HNDL,PARAM_RELE_SAMOKALIBR,0,20);
000baa  2314              MOVS     r3,#0x14
000bac  2200              MOVS     r2,#0
000bae  2164              MOVS     r1,#0x64
000bb0  20d2              MOVS     r0,#0xd2
000bb2  f7fffffe          BL       mess_send
                  |L1.2998|
;;;849    	}
;;;850    
;;;851    vz1_stat_old=vz1_stat;
000bb6  f8980021          LDRB     r0,[r8,#0x21]  ; vz1_stat
000bba  f8880022          STRB     r0,[r8,#0x22]
;;;852    
;;;853    
;;;854    
;;;855    }
000bbe  e8bd8ff8          POP      {r3-r11,pc}
;;;856    
                          ENDP

                  vz1_start PROC
;;;858    //ÒÚ‡Ú Û‡‚ÌËÚÂÎ¸ÌÓ„ Á‡ˇ‰‡
;;;859    char vz1_start(char hour)
000bc2  b510              PUSH     {r4,lr}
;;;860    {          
;;;861    char out;
;;;862    out=0;
000bc4  f04f0000          MOV      r0,#0
;;;863    if((spc_stat==spcOFF)&&(speedChrgBlckStat!=1)&&(vz1_stat==vz1sOFF))
000bc8  49b7              LDR      r1,|L1.3752|
000bca  7d4a              LDRB     r2,[r1,#0x15]  ; spc_stat
000bcc  2a00              CMP      r2,#0
000bce  d112              BNE      |L1.3062|
000bd0  4ab6              LDR      r2,|L1.3756|
000bd2  8812              LDRH     r2,[r2,#0]  ; speedChrgBlckStat
000bd4  2a01              CMP      r2,#1
000bd6  d00e              BEQ      |L1.3062|
000bd8  f8912021          LDRB     r2,[r1,#0x21]  ; vz1_stat
000bdc  2a00              CMP      r2,#0
000bde  d10a              BNE      |L1.3062|
;;;864    	{
;;;865    	if(vz1_stat==vz1sOFF)
;;;866    		{
;;;867    		vz1_stat=vz1sSTEP1;
000be0  f04f0001          MOV      r0,#1
000be4  f8810021          STRB     r0,[r1,#0x21]
;;;868    		lc640_write(EE_VZ1_STAT,vz1sSTEP1);
000be8  4601              MOV      r1,r0
000bea  f44f70c9          MOV      r0,#0x192
000bee  f7fffffe          BL       lc640_write
;;;869    		out=1;
000bf2  f04f0001          MOV      r0,#1
                  |L1.3062|
;;;870    		
;;;871    		}
;;;872    /*	spc_stat=spcVZ;
;;;873    	__ee_spc_stat=spcVZ; 
;;;874    	lc640_write_int(EE_SPC_STAT,__ee_spc_stat);   
;;;875    	vz_cnt_h=hour;
;;;876    	__ee_vz_cnt=hour*60;
;;;877    	if(hour==0)__ee_vz_cnt=30;
;;;878    	lc640_write_int(EE_VZ_CNT,__ee_vz_cnt);
;;;879    	lc640_write_int(EE_SPC_VZ_LENGT,__ee_vz_cnt);	
;;;880    	vz_cnt_h_=0;
;;;881    	vz_cnt_s=0;
;;;882    	vz_cnt_s_=0;
;;;883    	
;;;884    		*/
;;;885    	}
;;;886    //else if((spc_stat==spc_KE1p1)||(spc_stat==spc_KE1p2)) out=22; 
;;;887    //else if((spc_stat==spc_KE2p1)||(spc_stat==spc_KE2p2)) out=33;
;;;888    //plazma=out;	
;;;889    return out;
;;;890    }
000bf6  e493              B        |L1.1312|
;;;891    
                          ENDP

                  vz1_stop PROC
;;;893    //ÒÚÓÔ Û‡‚ÌËÚÂÎ¸ÌÓ„ Á‡ˇ‰‡
;;;894    void vz1_stop(void)
000bf8  48ab              LDR      r0,|L1.3752|
;;;895    {
;;;896    if(vz1_stat!=vz1sOFF)
000bfa  f8901021          LDRB     r1,[r0,#0x21]  ; vz1_stat
000bfe  2900              CMP      r1,#0
000c00  d007              BEQ      |L1.3090|
;;;897    	{
;;;898    	vz1_stat=vz1sSTOP;
000c02  f04f0110          MOV      r1,#0x10
000c06  f8801021          STRB     r1,[r0,#0x21]
;;;899    	lc640_write(EE_VZ1_STAT,vz1sSTOP);
000c0a  f44f70c9          MOV      r0,#0x192
000c0e  f7ffbffe          B.W      lc640_write
                  |L1.3090|
;;;900    	}
;;;901    }
000c12  4770              BX       lr
;;;902    
                          ENDP

                  vz2_drv PROC
;;;904    //‰‡È‚Â ÙÓÏÓ‚Ó˜ÌÓ„Ó Á‡ˇ‰‡
;;;905    void vz2_drv(void)
000c14  e92d4ff8          PUSH     {r3-r11,lr}
;;;906    {
;;;907    
;;;908    if(vz2_stat==vz2sSTEP1)
000c18  4ea3              LDR      r6,|L1.3752|
;;;909    	{
;;;910    	if(vz2_stat_old!=vz2_stat)
;;;911    		{
;;;912    		vz2_stat_cnt=5;
;;;913    		}
;;;914    	if(vz2_stat_cnt)
;;;915    		{
;;;916    		vz2_stat_cnt--;
;;;917    		if(vz2_stat_cnt==0)
;;;918    			{
;;;919    			vz2_stat=vz2sERR1; 	//ÕÂ ‚ÍÎ˛˜ËÎ‡Ò¸ ‚ÂÌÚËÎˇˆËˇ;
;;;920    			lc640_write(EE_VZ2_STAT,vz2sERR1);
;;;921    			}
;;;922    		}
;;;923    	if(sk_stat[0]==1)
000c1a  4da5              LDR      r5,|L1.3760|
000c1c  f8960024          LDRB     r0,[r6,#0x24]         ;908  ; vz2_stat
000c20  2801              CMP      r0,#1                 ;908
000c22  d13b              BNE      |L1.3228|
000c24  f8960025          LDRB     r0,[r6,#0x25]         ;910  ; vz2_stat_old
000c28  2801              CMP      r0,#1                 ;910
000c2a  d003              BEQ      |L1.3124|
000c2c  f04f0005          MOV      r0,#5                 ;912
000c30  f8a60072          STRH     r0,[r6,#0x72]         ;912
                  |L1.3124|
000c34  f9b60072          LDRSH    r0,[r6,#0x72]         ;914  ; vz2_stat_cnt
000c38  b170              CBZ      r0,|L1.3160|
000c3a  f1a00001          SUB      r0,r0,#1              ;916
000c3e  b200              SXTH     r0,r0                 ;916
000c40  f8a60072          STRH     r0,[r6,#0x72]         ;916
000c44  b940              CBNZ     r0,|L1.3160|
000c46  f04f000c          MOV      r0,#0xc               ;919
000c4a  f8860024          STRB     r0,[r6,#0x24]         ;919
000c4e  4601              MOV      r1,r0                 ;920
000c50  f44f70ca          MOV      r0,#0x194             ;920
000c54  f7fffffe          BL       lc640_write
                  |L1.3160|
000c58  7828              LDRB     r0,[r5,#0]  ; sk_stat
000c5a  2801              CMP      r0,#1
000c5c  d118              BNE      |L1.3216|
;;;924    		{
;;;925    		vz2_stat=vz2sSTEP2;
000c5e  f04f0002          MOV      r0,#2
000c62  f8860024          STRB     r0,[r6,#0x24]
;;;926    		lc640_write(EE_VZ2_STAT,vz2sSTEP2);
000c66  4601              MOV      r1,r0
000c68  f44f70ca          MOV      r0,#0x194
000c6c  f7fffffe          BL       lc640_write
;;;927    		tree_up(iVZ2_STEP2_2,1,0,0);
000c70  2300              MOVS     r3,#0
000c72  461a              MOV      r2,r3
000c74  2101              MOVS     r1,#1
000c76  20e0              MOVS     r0,#0xe0
000c78  f7fffffe          BL       tree_up
;;;928    		tree_up(iVZ2_STEP2_1,0,0,0);
000c7c  2300              MOVS     r3,#0
000c7e  461a              MOV      r2,r3
000c80  4619              MOV      r1,r3
000c82  20df              MOVS     r0,#0xdf
000c84  f7fffffe          BL       tree_up
;;;929    		ret(1200);
000c88  f44f6096          MOV      r0,#0x4b0
000c8c  f7fffffe          BL       ||ret||
                  |L1.3216|
;;;930    		}
;;;931    	mess_send(MESS2RELE_HNDL,PARAM_RELE_SAMOKALIBR,0,20);
000c90  2314              MOVS     r3,#0x14
000c92  2200              MOVS     r2,#0
000c94  2164              MOVS     r1,#0x64
000c96  20d2              MOVS     r0,#0xd2
000c98  f7fffffe          BL       mess_send
                  |L1.3228|
;;;932    	}
;;;933    
;;;934    if(vz2_stat==vz2sSTEP2)
000c9c  f8960024          LDRB     r0,[r6,#0x24]  ; vz2_stat
000ca0  2802              CMP      r0,#2
000ca2  d11a              BNE      |L1.3290|
;;;935    	{
;;;936    	if((vz2_stat_old!=vz2_stat)||(vz2_stat_cnt==0))
000ca4  f8960025          LDRB     r0,[r6,#0x25]  ; vz2_stat_old
000ca8  2802              CMP      r0,#2
000caa  d102              BNE      |L1.3250|
000cac  f8b60072          LDRH     r0,[r6,#0x72]  ; vz2_stat_cnt
000cb0  b918              CBNZ     r0,|L1.3258|
                  |L1.3250|
;;;937    		{
;;;938    		vz2_stat_cnt=15;
000cb2  f04f000f          MOV      r0,#0xf
000cb6  f8a60072          STRH     r0,[r6,#0x72]
                  |L1.3258|
;;;939    		}
;;;940    	vz2_stat_cnt--;
000cba  f8b60072          LDRH     r0,[r6,#0x72]  ; vz2_stat_cnt
000cbe  f1a00001          SUB      r0,r0,#1
000cc2  f8a60072          STRH     r0,[r6,#0x72]
;;;941    	mess_send(MESS2RELE_HNDL,PARAM_RELE_SAMOKALIBR,0,20);
000cc6  f04f0314          MOV      r3,#0x14
000cca  f04f0200          MOV      r2,#0
000cce  f04f0164          MOV      r1,#0x64
000cd2  f04f00d2          MOV      r0,#0xd2
000cd6  f7fffffe          BL       mess_send
                  |L1.3290|
;;;942    	}
;;;943    
;;;944    if(vz2_stat==vz2sSTEP3)
000cda  f8960024          LDRB     r0,[r6,#0x24]  ; vz2_stat
;;;945    	{
;;;946    	if((vz2_stat_old!=vz2_stat)||(vz2_stat_cnt==0))
;;;947    		{
;;;948    		vz2_stat_cnt=10;
000cde  240a              MOVS     r4,#0xa
000ce0  2700              MOVS     r7,#0
;;;949    		cntrl_stat=0;
;;;950    		cntrl_stat_new=0;
;;;951    		cntrl_stat_old=0;
;;;952    		}
;;;953    	vz2_stat_cnt--;
;;;954    	if((vz2_stat_cnt==10)||(vz2_stat_cnt==9))
;;;955    		{
;;;956    		show_mess(	"     ¬ Àﬁ◊»“≈       ",
000ce2  f2413888          MOV      r8,#0x1388
000ce6  2803              CMP      r0,#3                 ;944
000ce8  d128              BNE      |L1.3388|
000cea  f8960025          LDRB     r0,[r6,#0x25]         ;946  ; vz2_stat_old
000cee  2803              CMP      r0,#3                 ;946
000cf0  d102              BNE      |L1.3320|
000cf2  f8b60072          LDRH     r0,[r6,#0x72]         ;946  ; vz2_stat_cnt
000cf6  b920              CBNZ     r0,|L1.3330|
                  |L1.3320|
000cf8  f8a64072          STRH     r4,[r6,#0x72]         ;948
000cfc  84f7              STRH     r7,[r6,#0x26]         ;949
000cfe  87b7              STRH     r7,[r6,#0x3c]         ;950
000d00  8537              STRH     r7,[r6,#0x28]         ;951
                  |L1.3330|
000d02  f8b60072          LDRH     r0,[r6,#0x72]         ;953  ; vz2_stat_cnt
000d06  f1a00001          SUB      r0,r0,#1              ;953
000d0a  b200              SXTH     r0,r0                 ;953
000d0c  f8a60072          STRH     r0,[r6,#0x72]         ;953
000d10  280a              CMP      r0,#0xa               ;954
000d12  d001              BEQ      |L1.3352|
000d14  2809              CMP      r0,#9                 ;954
000d16  d10b              BNE      |L1.3376|
                  |L1.3352|
000d18  f2af4370          ADR      r3,|L1.2220|
000d1c  f2af425c          ADR      r2,|L1.2244|
000d20  f2af4148          ADR      r1,|L1.2268|
000d24  f2af4034          ADR      r0,|L1.2292|
000d28  f8cd8000          STR      r8,[sp,#0]
000d2c  f7fffffe          BL       show_mess
                  |L1.3376|
;;;957    					"      “”Ã¡À≈–       ",
;;;958    					"     ¬€—Œ Œ√Œ       ",
;;;959    					"    Õ¿œ–ﬂ∆≈Õ»ﬂ      ",
;;;960    					5000);
;;;961    		}
;;;962    	if(sk_stat[1]==1)
000d30  7868              LDRB     r0,[r5,#1]  ; sk_stat
000d32  2801              CMP      r0,#1
000d34  d103              BNE      |L1.3390|
;;;963    		{
;;;964    		vz2_stat=vz2sWRK1;
000d36  f8864024          STRB     r4,[r6,#0x24]
;;;965    		lc640_write(EE_VZ2_STAT,vz2sWRK1);
000d3a  e0bb              B        |L1.3764|
                  |L1.3388|
000d3c  e0cc              B        |L1.3800|
                  |L1.3390|
000d3e  e0c5              B        |L1.3788|
                  |L1.3392|
000d40  2020c1c5          DCB      "  ",193,197,199," ",194,197,205,210,200,203,223,214,200
000d44  c720c2c5
000d48  cdd2c8cb
000d4c  dfd6c8  
000d4f  c8212120          DCB      200,"!!  ",0
000d53  2000    
000d55  00                DCB      0
000d56  00                DCB      0
000d57  00                DCB      0
                  |L1.3416|
000d58  20202020          DCB      "      ",194,202,203,222,215,197,205,"       ",0
000d5c  2020c2ca
000d60  cbded7c5
000d64  cd202020
000d68  20202020
000d6c  00      
000d6d  00                DCB      0
000d6e  00                DCB      0
000d6f  00                DCB      0
                  |L1.3440|
000d70  202020cd          DCB      "   ",205,197," ",204,206,198,197,210," ",193,219,210,220
000d74  c520ccce
000d78  c6c5d220
000d7c  c1dbd2dc
000d80  20202020          DCB      "    ",0
000d84  00      
000d85  00                DCB      0
000d86  00                DCB      0
000d87  00                DCB      0
                  |L1.3464|
000d88  d3d0c0c2          DCB      211,208,192,194,205,200,210,197,203,220,205,219,201," ",199
000d8c  cdc8d2c5
000d90  cbdccddb
000d94  c920c7  
000d97  c0d0dfc4          DCB      192,208,223,196," ",0
000d9b  2000    
000d9d  00                DCB      0
000d9e  00                DCB      0
000d9f  00                DCB      0
                  |L1.3488|
000da0  2a202020          DCB      "*   ",210,211,204,193,203,197,208,192,"!!!     ",0
000da4  d2d3ccc1
000da8  cbc5d0c0
000dac  21212120
000db0  20202020
000db4  00      
000db5  00                DCB      0
000db6  00                DCB      0
000db7  00                DCB      0
                  |L1.3512|
000db8  2020cfce          DCB      "  ",207,206,209,203,197," ",194,202,203,222,215,197,205
000dbc  d1cbc520
000dc0  c2cacbde
000dc4  d7c5cd  
000dc7  c8df2020          DCB      200,223,"   ",0
000dcb  2000    
000dcd  00                DCB      0
000dce  00                DCB      0
000dcf  00                DCB      0
                  |L1.3536|
000dd0  2020c1d3          DCB      "  ",193,211,196,197,210," ",207,208,206,196,206,203,198
000dd4  c4c5d220
000dd8  cfd0cec4
000ddc  cecbc6  
000ddf  c5cd2020          DCB      197,205,"   ",0
000de3  2000    
000de5  00                DCB      0
000de6  00                DCB      0
000de7  00                DCB      0
                  |L1.3560|
000de8  2a202020          DCB      "*    ",194,219,202,203,222,215,200,210,197,"      ",0
000dec  20c2dbca
000df0  cbded7c8
000df4  d2c52020
000df8  20202020
000dfc  00      
000dfd  00                DCB      0
000dfe  00                DCB      0
000dff  00                DCB      0
                  |L1.3584|
000e00  20202020          DCB      "     ",199,192,194,197,208,216,197,205,"       ",0
000e04  20c7c0c2
000e08  c5d0d8c5
000e0c  cd202020
000e10  20202020
000e14  00      
000e15  00                DCB      0
000e16  00                DCB      0
000e17  00                DCB      0
                  |L1.3608|
000e18  20202020          DCB      "      ",211,209,207,197,216,205,206,"       ",0
000e1c  2020d3d1
000e20  cfc5d8cd
000e24  ce202020
000e28  20202020
000e2c  00      
000e2d  00                DCB      0
000e2e  00                DCB      0
000e2f  00                DCB      0
                  |L1.3632|
000e30  20202020          DCB      "       ",199,192,208,223,196,"        ",0
000e34  202020c7
000e38  c0d0dfc4
000e3c  20202020
000e40  20202020
000e44  00      
000e45  00                DCB      0
000e46  00                DCB      0
000e47  00                DCB      0
                  |L1.3656|
000e48  202020d3          DCB      "   ",211,208,192,194,205,200,210,197,203,220,205,219,201
000e4c  d0c0c2cd
000e50  c8d2c5cb
000e54  dccddbc9
000e58  20202020          DCB      "    ",0
000e5c  00      
000e5d  00                DCB      0
000e5e  00                DCB      0
000e5f  00                DCB      0
                  |L1.3680|
000e60  20202020          DCB      "     ",194,219,202,203,222,215,200,210,197,"      ",0
000e64  20c2dbca
000e68  cbded7c8
000e6c  d2c52020
000e70  20202020
000e74  00      
000e75  00                DCB      0
000e76  00                DCB      0
000e77  00                DCB      0
                  |L1.3704|
000e78  20202020          DCB      "                    ",0
000e7c  20202020
000e80  20202020
000e84  20202020
000e88  20202020
000e8c  00      
000e8d  00                DCB      0
000e8e  00                DCB      0
000e8f  00                DCB      0
                  |L1.3728|
000e90  20202020          DCB      "     ",207,208,197,202,208,192,217,197,205,"      ",0
000e94  20cfd0c5
000e98  cad0c0d9
000e9c  c5cd2020
000ea0  20202020
000ea4  00      
000ea5  00                DCB      0
000ea6  00                DCB      0
000ea7  00                DCB      0
                  |L1.3752|
                          DCD      ||area_number.25||
                  |L1.3756|
                          DCD      speedChrgBlckStat
                  |L1.3760|
                          DCD      sk_stat
                  |L1.3764|
000eb4  210a              MOVS     r1,#0xa
000eb6  f44f70ca          MOV      r0,#0x194
000eba  f7fffffe          BL       lc640_write
;;;966    		volt_region=1;
000ebe  f04f0001          MOV      r0,#1
000ec2  f8860023          STRB     r0,[r6,#0x23]
;;;967    		cntrl_stat=0;
000ec6  84f7              STRH     r7,[r6,#0x26]
;;;968    		cntrl_stat_new=0;
000ec8  87b7              STRH     r7,[r6,#0x3c]
;;;969    		cntrl_stat_old=0;
000eca  8537              STRH     r7,[r6,#0x28]
                  |L1.3788|
;;;970    		}
;;;971    	mess_send(MESS2RELE_HNDL,PARAM_RELE_SAMOKALIBR,0,20);
000ecc  2314              MOVS     r3,#0x14
000ece  2200              MOVS     r2,#0
000ed0  2164              MOVS     r1,#0x64
000ed2  20d2              MOVS     r0,#0xd2
000ed4  f7fffffe          BL       mess_send
                  |L1.3800|
;;;972    	}
;;;973    
;;;974    if(vz2_stat==vz2sWRK1)
000ed8  f8960024          LDRB     r0,[r6,#0x24]  ; vz2_stat
;;;975    	{
;;;976    
;;;977    	if(vz2_stat_old!=vz2_stat)
;;;978    		{
;;;979    		vz2_wrk_cnt=3600L/*100L*/*((long)FZ_T1);
000edc  f8df9410          LDR      r9,|L1.4848|
;;;980    		//if(VZ_HR==0)  	hv_vz_wrk_cnt=1800L;
;;;981    		vz2_up_cnt=0L;
;;;982    
;;;983    		}
;;;984    	vz2_wrk_cnt--;
;;;985    	vz2_up_cnt++;
;;;986    
;;;987    	if(vz2_wrk_cnt==0)
;;;988    		{
;;;989    		vz2_stat=vz2sWRK2;
;;;990    		lc640_write(EE_VZ2_STAT,vz2sWRK2);
;;;991    		}
;;;992    	if(sk_stat[0]==0)
;;;993    		{
;;;994    		vz2_stat=vz2sERR2;
;;;995    		lc640_write(EE_VZ2_STAT,vz2sERR2);
;;;996    		}
;;;997    	if(sk_stat[1]==0)
;;;998    		{
;;;999    		vz2_stat=vz2sERR3;
;;;1000   		lc640_write(EE_VZ2_STAT,vz2sERR3);
;;;1001   		}
;;;1002   	//if(abs(out_U-FZ_U1)<10)
;;;1003   	if((out_U<(FZ_U1+30))&&(out_U>(FZ_U1-10)))
;;;1004   		{
;;;1005   		if((Ib_ips_termokompensat/10)<FZ_ISW12)
;;;1006   			{
;;;1007   			if(vz2_stat_ph2_cnt)
;;;1008   				{
;;;1009   				vz2_stat_ph2_cnt--;
;;;1010   				if(vz2_stat_ph2_cnt==0)
;;;1011   					{
;;;1012   					vz2_stat=vz2sWRK2;
;;;1013   					lc640_write(EE_VZ2_STAT,vz2sWRK2);
;;;1014   					}
;;;1015   				}
;;;1016   			}
;;;1017   		else
;;;1018   			{
;;;1019   			vz2_stat_ph2_cnt=60;
;;;1020   			}
;;;1021   		}
;;;1022   	else
;;;1023   		{
;;;1024   		vz2_stat_ph2_cnt=60;
;;;1025   		}
;;;1026   	if(((Ibmax/10)>IZMAX_)&&(cntrl_stat<=20)&&(volt_region==1)&&(volt_region_cnt==0))
;;;1027   		{
;;;1028   		volt_region=0;
;;;1029   		cntrl_stat=1000;
000ee0  f44f7b7a          MOV      r11,#0x3e8
000ee4  f04f0a0b          MOV      r10,#0xb              ;989
000ee8  280a              CMP      r0,#0xa               ;974
000eea  d17e              BNE      |L1.4074|
000eec  f8960025          LDRB     r0,[r6,#0x25]         ;977  ; vz2_stat_old
000ef0  280a              CMP      r0,#0xa               ;977
000ef2  d00a              BEQ      |L1.3850|
000ef4  48ff              LDR      r0,|L1.4852|
000ef6  f44f6161          MOV      r1,#0xe10             ;979
000efa  f9b00000          LDRSH    r0,[r0,#0]            ;979  ; FZ_T1
000efe  fb00f001          MUL      r0,r0,r1              ;979
000f02  f8c90030          STR      r0,[r9,#0x30]         ;979  ; vz2_wrk_cnt
000f06  f8c97034          STR      r7,[r9,#0x34]         ;981  ; vz2_up_cnt
                  |L1.3850|
000f0a  f8d90030          LDR      r0,[r9,#0x30]         ;984  ; vz2_wrk_cnt
000f0e  f1a00001          SUB      r0,r0,#1              ;984
000f12  f8c90030          STR      r0,[r9,#0x30]         ;984  ; vz2_wrk_cnt
000f16  f8d91034          LDR      r1,[r9,#0x34]         ;985  ; vz2_up_cnt
000f1a  f1010101          ADD      r1,r1,#1              ;985
000f1e  f8c91034          STR      r1,[r9,#0x34]         ;985  ; vz2_up_cnt
000f22  b930              CBNZ     r0,|L1.3890|
000f24  f886a024          STRB     r10,[r6,#0x24]        ;989
000f28  210b              MOVS     r1,#0xb               ;990
000f2a  f44f70ca          MOV      r0,#0x194             ;990
000f2e  f7fffffe          BL       lc640_write
                  |L1.3890|
000f32  7828              LDRB     r0,[r5,#0]            ;992  ; sk_stat
000f34  b940              CBNZ     r0,|L1.3912|
000f36  f04f000d          MOV      r0,#0xd               ;994
000f3a  f8860024          STRB     r0,[r6,#0x24]         ;994
000f3e  4601              MOV      r1,r0                 ;995
000f40  f44f70ca          MOV      r0,#0x194             ;995
000f44  f7fffffe          BL       lc640_write
                  |L1.3912|
000f48  7868              LDRB     r0,[r5,#1]            ;997  ; sk_stat
000f4a  b940              CBNZ     r0,|L1.3934|
000f4c  f04f000e          MOV      r0,#0xe               ;999
000f50  f8860024          STRB     r0,[r6,#0x24]         ;999
000f54  4601              MOV      r1,r0                 ;1000
000f56  f44f70ca          MOV      r0,#0x194             ;1000
000f5a  f7fffffe          BL       lc640_write
                  |L1.3934|
000f5e  48e6              LDR      r0,|L1.4856|
000f60  223c              MOVS     r2,#0x3c              ;1019
000f62  f9b01000          LDRSH    r1,[r0,#0]            ;1003  ; out_U
000f66  48e5              LDR      r0,|L1.4860|
000f68  f9b00000          LDRSH    r0,[r0,#0]            ;1003  ; FZ_U1
000f6c  f100031e          ADD      r3,r0,#0x1e           ;1003
000f70  4299              CMP      r1,r3                 ;1003
000f72  da20              BGE      |L1.4022|
000f74  380a              SUBS     r0,r0,#0xa            ;1003
000f76  4281              CMP      r1,r0                 ;1003
000f78  dd1d              BLE      |L1.4022|
000f7a  48e1              LDR      r0,|L1.4864|
000f7c  49e1              LDR      r1,|L1.4868|
000f7e  f9b00000          LDRSH    r0,[r0,#0]            ;1005  ; Ib_ips_termokompensat
000f82  f9b11000          LDRSH    r1,[r1,#0]            ;1005  ; FZ_ISW12
000f86  fb90f0f4          SDIV     r0,r0,r4              ;1005
000f8a  4288              CMP      r0,r1                 ;1005
000f8c  da10              BGE      |L1.4016|
000f8e  f9b60074          LDRSH    r0,[r6,#0x74]         ;1007  ; vz2_stat_ph2_cnt
000f92  b190              CBZ      r0,|L1.4026|
000f94  f1a00001          SUB      r0,r0,#1              ;1009
000f98  b200              SXTH     r0,r0                 ;1009
000f9a  f8a60074          STRH     r0,[r6,#0x74]         ;1009
000f9e  b960              CBNZ     r0,|L1.4026|
000fa0  f886a024          STRB     r10,[r6,#0x24]        ;1012
000fa4  210b              MOVS     r1,#0xb               ;1013
000fa6  f44f70ca          MOV      r0,#0x194             ;1013
000faa  f7fffffe          BL       lc640_write
000fae  e004              B        |L1.4026|
                  |L1.4016|
000fb0  f8a62074          STRH     r2,[r6,#0x74]         ;1019
000fb4  e001              B        |L1.4026|
                  |L1.4022|
000fb6  f8a62074          STRH     r2,[r6,#0x74]         ;1024
                  |L1.4026|
000fba  f9b6003e          LDRSH    r0,[r6,#0x3e]         ;1026  ; Ibmax
000fbe  f8b61040          LDRH     r1,[r6,#0x40]         ;1026  ; IZMAX_
000fc2  fb90f0f4          SDIV     r0,r0,r4              ;1026
000fc6  4288              CMP      r0,r1                 ;1026
000fc8  dd18              BLE      |L1.4092|
000fca  f9b62026          LDRSH    r2,[r6,#0x26]         ;1026  ; cntrl_stat
000fce  2a14              CMP      r2,#0x14              ;1026
000fd0  dc14              BGT      |L1.4092|
000fd2  f8962023          LDRB     r2,[r6,#0x23]         ;1026  ; volt_region
000fd6  2a01              CMP      r2,#1                 ;1026
000fd8  d110              BNE      |L1.4092|
000fda  f8b62070          LDRH     r2,[r6,#0x70]         ;1026  ; volt_region_cnt
000fde  b96a              CBNZ     r2,|L1.4092|
000fe0  f8867023          STRB     r7,[r6,#0x23]         ;1028
000fe4  f8a6b026          STRH     r11,[r6,#0x26]
;;;1030   		cntrl_stat_new=1000;
000fe8  e000              B        |L1.4076|
                  |L1.4074|
000fea  e02f              B        |L1.4172|
                  |L1.4076|
000fec  f8a6b03c          STRH     r11,[r6,#0x3c]
;;;1031   		cntrl_stat_old=1000;
000ff0  f8a6b028          STRH     r11,[r6,#0x28]
;;;1032   		volt_region_cnt=110;
000ff4  f04f026e          MOV      r2,#0x6e
000ff8  f8a62070          STRH     r2,[r6,#0x70]
                  |L1.4092|
;;;1033   		}
;;;1034   	if(((Ibmax/10)<IZMAX_)&&(cntrl_stat>=1000)&&(volt_region==0)&&(volt_region_cnt==0))
000ffc  4288              CMP      r0,r1
000ffe  da12              BGE      |L1.4134|
001000  f9b60026          LDRSH    r0,[r6,#0x26]  ; cntrl_stat
001004  4558              CMP      r0,r11
001006  db0e              BLT      |L1.4134|
001008  f8960023          LDRB     r0,[r6,#0x23]  ; volt_region
00100c  b958              CBNZ     r0,|L1.4134|
00100e  f8b60070          LDRH     r0,[r6,#0x70]  ; volt_region_cnt
001012  b940              CBNZ     r0,|L1.4134|
;;;1035   		{
;;;1036   		volt_region=1;
001014  f04f0001          MOV      r0,#1
001018  f8860023          STRB     r0,[r6,#0x23]
;;;1037   		cntrl_stat=10;
00101c  84f4              STRH     r4,[r6,#0x26]
;;;1038   		cntrl_stat_new=10;
00101e  87b4              STRH     r4,[r6,#0x3c]
;;;1039   		cntrl_stat_old=10;
001020  8534              STRH     r4,[r6,#0x28]
;;;1040   		volt_region_cnt=10;
001022  f8a64070          STRH     r4,[r6,#0x70]
                  |L1.4134|
;;;1041   		}
;;;1042   	if(volt_region==0) 		mess_send(MESS2RELE_HNDL,PARAM_RELE_SAMOKALIBR,0,20);
001026  f8960023          LDRB     r0,[r6,#0x23]  ; volt_region
00102a  b110              CBZ      r0,|L1.4146|
;;;1043   	else if(volt_region==1) mess_send(MESS2RELE_HNDL,PARAM_RELE_SAMOKALIBR,1,20);
00102c  2801              CMP      r0,#1
00102e  d007              BEQ      |L1.4160|
001030  e00c              B        |L1.4172|
                  |L1.4146|
001032  2314              MOVS     r3,#0x14              ;1042
001034  2200              MOVS     r2,#0                 ;1042
001036  2164              MOVS     r1,#0x64              ;1042
001038  20d2              MOVS     r0,#0xd2              ;1042
00103a  f7fffffe          BL       mess_send
00103e  e005              B        |L1.4172|
                  |L1.4160|
001040  2314              MOVS     r3,#0x14
001042  2201              MOVS     r2,#1
001044  2164              MOVS     r1,#0x64
001046  20d2              MOVS     r0,#0xd2
001048  f7fffffe          BL       mess_send
                  |L1.4172|
;;;1044   	}
;;;1045   
;;;1046   if(vz2_stat==vz2sWRK2)
00104c  f8960024          LDRB     r0,[r6,#0x24]  ; vz2_stat
001050  280b              CMP      r0,#0xb
001052  d174              BNE      |L1.4414|
;;;1047   	{
;;;1048   	if(vz2_stat_old!=vz2_stat)
001054  f8960025          LDRB     r0,[r6,#0x25]  ; vz2_stat_old
001058  280b              CMP      r0,#0xb
00105a  d008              BEQ      |L1.4206|
;;;1049   		{
;;;1050   		vz2_wrk_cnt=3600L/*100L*/*((long)FZ_T2);
00105c  48aa              LDR      r0,|L1.4872|
00105e  f44f6161          MOV      r1,#0xe10
001062  f9b00000          LDRSH    r0,[r0,#0]  ; FZ_T2
001066  fb00f001          MUL      r0,r0,r1
00106a  f8c90030          STR      r0,[r9,#0x30]  ; vz2_wrk_cnt
                  |L1.4206|
;;;1051   		//if(VZ_HR==0)  	hv_vz_wrk_cnt=1800L;
;;;1052   		//vz2_up_cnt=0L;
;;;1053   		}
;;;1054   	vz2_wrk_cnt--;
00106e  f8d90030          LDR      r0,[r9,#0x30]  ; vz2_wrk_cnt
001072  f1a00001          SUB      r0,r0,#1
001076  f8c90030          STR      r0,[r9,#0x30]  ; vz2_wrk_cnt
;;;1055   	vz2_up_cnt++;
00107a  f8d91034          LDR      r1,[r9,#0x34]  ; vz2_up_cnt
00107e  f1010101          ADD      r1,r1,#1
001082  f8c91034          STR      r1,[r9,#0x34]  ; vz2_up_cnt
;;;1056   
;;;1057   	if(vz2_wrk_cnt==0)
001086  b958              CBNZ     r0,|L1.4256|
;;;1058   		{
;;;1059   		vz2_stat=vz2sFINE;
001088  f04f0012          MOV      r0,#0x12
00108c  f8860024          STRB     r0,[r6,#0x24]
;;;1060   		lc640_write(EE_VZ2_STAT,vz2sFINE);
001090  4601              MOV      r1,r0
001092  f44f70ca          MOV      r0,#0x194
001096  f7fffffe          BL       lc640_write
;;;1061   		fz_mem_hndl(0);
00109a  2000              MOVS     r0,#0
00109c  f7fffffe          BL       fz_mem_hndl
                  |L1.4256|
;;;1062   		}
;;;1063   	if(sk_stat[0]==0)
0010a0  7828              LDRB     r0,[r5,#0]  ; sk_stat
0010a2  b940              CBNZ     r0,|L1.4278|
;;;1064   		{
;;;1065   		vz2_stat=vz2sERR5;
0010a4  f04f0010          MOV      r0,#0x10
0010a8  f8860024          STRB     r0,[r6,#0x24]
;;;1066   		lc640_write(EE_VZ2_STAT,vz2sERR5);
0010ac  4601              MOV      r1,r0
0010ae  f44f70ca          MOV      r0,#0x194
0010b2  f7fffffe          BL       lc640_write
                  |L1.4278|
;;;1067   		}
;;;1068   	if(sk_stat[1]==0)
0010b6  7868              LDRB     r0,[r5,#1]  ; sk_stat
0010b8  b940              CBNZ     r0,|L1.4300|
;;;1069   		{
;;;1070   		vz2_stat=vz2sERR6;
0010ba  f04f0011          MOV      r0,#0x11
0010be  f8860024          STRB     r0,[r6,#0x24]
;;;1071   		lc640_write(EE_VZ2_STAT,vz2sERR6);
0010c2  4601              MOV      r1,r0
0010c4  f44f70ca          MOV      r0,#0x194
0010c8  f7fffffe          BL       lc640_write
                  |L1.4300|
;;;1072   		}
;;;1073   	if(((Ibmax/10)>IZMAX_)&&(cntrl_stat<=20)&&(volt_region==1)&&(volt_region_cnt==0))
0010cc  f9b6003e          LDRSH    r0,[r6,#0x3e]  ; Ibmax
0010d0  f8b61040          LDRH     r1,[r6,#0x40]  ; IZMAX_
0010d4  fb90f0f4          SDIV     r0,r0,r4
0010d8  4288              CMP      r0,r1
0010da  dd16              BLE      |L1.4362|
0010dc  f9b62026          LDRSH    r2,[r6,#0x26]  ; cntrl_stat
0010e0  2a14              CMP      r2,#0x14
0010e2  dc12              BGT      |L1.4362|
0010e4  f8962023          LDRB     r2,[r6,#0x23]  ; volt_region
0010e8  2a01              CMP      r2,#1
0010ea  d10e              BNE      |L1.4362|
0010ec  f8b62070          LDRH     r2,[r6,#0x70]  ; volt_region_cnt
0010f0  b95a              CBNZ     r2,|L1.4362|
;;;1074   		{
;;;1075   		volt_region=0;
0010f2  f8867023          STRB     r7,[r6,#0x23]
;;;1076   		cntrl_stat=1000;
0010f6  f8a6b026          STRH     r11,[r6,#0x26]
;;;1077   		cntrl_stat_new=1000;
0010fa  f8a6b03c          STRH     r11,[r6,#0x3c]
;;;1078   		cntrl_stat_old=1000;
0010fe  f8a6b028          STRH     r11,[r6,#0x28]
;;;1079   		volt_region_cnt=110;
001102  f04f026e          MOV      r2,#0x6e
001106  f8a62070          STRH     r2,[r6,#0x70]
                  |L1.4362|
;;;1080   		}
;;;1081   	if(((Ibmax/10)<IZMAX_)&&(cntrl_stat>=1000)&&(volt_region==0)&&(volt_region_cnt==0))
00110a  4288              CMP      r0,r1
00110c  da12              BGE      |L1.4404|
00110e  f9b60026          LDRSH    r0,[r6,#0x26]  ; cntrl_stat
001112  4558              CMP      r0,r11
001114  db0e              BLT      |L1.4404|
001116  f8960023          LDRB     r0,[r6,#0x23]  ; volt_region
00111a  b958              CBNZ     r0,|L1.4404|
00111c  f8b60070          LDRH     r0,[r6,#0x70]  ; volt_region_cnt
001120  b940              CBNZ     r0,|L1.4404|
;;;1082   		{
;;;1083   		volt_region=1;
001122  f04f0001          MOV      r0,#1
001126  f8860023          STRB     r0,[r6,#0x23]
;;;1084   		cntrl_stat=10;
00112a  84f4              STRH     r4,[r6,#0x26]
;;;1085   		cntrl_stat_new=10;
00112c  87b4              STRH     r4,[r6,#0x3c]
;;;1086   		cntrl_stat_old=10;
00112e  8534              STRH     r4,[r6,#0x28]
;;;1087   		volt_region_cnt=10;
001130  f8a64070          STRH     r4,[r6,#0x70]
                  |L1.4404|
;;;1088   		}
;;;1089   	if(volt_region==0) 		mess_send(MESS2RELE_HNDL,PARAM_RELE_SAMOKALIBR,0,20);
001134  f8960023          LDRB     r0,[r6,#0x23]  ; volt_region
001138  b110              CBZ      r0,|L1.4416|
;;;1090   	else if(volt_region==1) mess_send(MESS2RELE_HNDL,PARAM_RELE_SAMOKALIBR,1,20);
00113a  2801              CMP      r0,#1
00113c  d007              BEQ      |L1.4430|
                  |L1.4414|
00113e  e00c              B        |L1.4442|
                  |L1.4416|
001140  2314              MOVS     r3,#0x14              ;1089
001142  2200              MOVS     r2,#0                 ;1089
001144  2164              MOVS     r1,#0x64              ;1089
001146  20d2              MOVS     r0,#0xd2              ;1089
001148  f7fffffe          BL       mess_send
00114c  e005              B        |L1.4442|
                  |L1.4430|
00114e  2314              MOVS     r3,#0x14
001150  2201              MOVS     r2,#1
001152  2164              MOVS     r1,#0x64
001154  20d2              MOVS     r0,#0xd2
001156  f7fffffe          BL       mess_send
                  |L1.4442|
;;;1091   	}
;;;1092   
;;;1093   if(vz2_stat==vz2sERR1)		//ŒÚÒÛÚÒÚ‚ÛÂÚ ‚ÂÌÚËÎˇˆËˇ ÔË ‚ÍÎ˛˜ÂÌËË
00115a  f8960024          LDRB     r0,[r6,#0x24]  ; vz2_stat
00115e  280c              CMP      r0,#0xc
001160  d124              BNE      |L1.4524|
;;;1094   	{
;;;1095   	if((vz2_stat_old!=vz2_stat)||(vz2_stat_cnt==0))
001162  f8960025          LDRB     r0,[r6,#0x25]  ; vz2_stat_old
001166  280c              CMP      r0,#0xc
001168  d102              BNE      |L1.4464|
00116a  f8b60072          LDRH     r0,[r6,#0x72]  ; vz2_stat_cnt
00116e  b908              CBNZ     r0,|L1.4468|
                  |L1.4464|
;;;1096   		{
;;;1097   		vz2_stat_cnt=10;
001170  f8a64072          STRH     r4,[r6,#0x72]
                  |L1.4468|
;;;1098   		}
;;;1099   	vz2_stat_cnt--;
001174  f8b60072          LDRH     r0,[r6,#0x72]  ; vz2_stat_cnt
001178  f1a00001          SUB      r0,r0,#1
00117c  b200              SXTH     r0,r0
00117e  f8a60072          STRH     r0,[r6,#0x72]
;;;1100   	if((vz2_stat_cnt==10)||(vz2_stat_cnt==9))
001182  280a              CMP      r0,#0xa
001184  d001              BEQ      |L1.4490|
001186  2809              CMP      r0,#9
001188  d10a              BNE      |L1.4512|
                  |L1.4490|
;;;1101   		{
;;;1102   		show_mess(	" ‘Œ–ÃŒ¬Œ◊Õ€… «¿–ﬂƒ  ",
00118a  f2af434c          ADR      r3,|L1.3392|
00118e  f2af4238          ADR      r2,|L1.3416|
001192  f2af4124          ADR      r1,|L1.3440|
001196  a05d              ADR      r0,|L1.4876|
001198  f8cd8000          STR      r8,[sp,#0]
00119c  f7fffffe          BL       show_mess
                  |L1.4512|
;;;1103   					"   Õ≈ ÃŒ∆≈“ ¡€“‹    ",
;;;1104   					"      ¬ Àﬁ◊≈Õ       ",
;;;1105   					"  ¡≈« ¬≈Õ“»Àﬂ÷»»!!  ",
;;;1106   					5000);
;;;1107   		}
;;;1108   	mess_send(MESS2RELE_HNDL,PARAM_RELE_SAMOKALIBR,0,20);
0011a0  2314              MOVS     r3,#0x14
0011a2  2200              MOVS     r2,#0
0011a4  2164              MOVS     r1,#0x64
0011a6  20d2              MOVS     r0,#0xd2
0011a8  f7fffffe          BL       mess_send
                  |L1.4524|
;;;1109   	}
;;;1110   if(vz2_stat==vz2sERR2)		//œÓÔ‡Î‡ ‚ÂÌÚËÎˇˆËˇ ÔË ‡·ÓÚÂ ‚ ÔÂ‚ÓÈ Ù‡ÁÂ ‘«
0011ac  f8960024          LDRB     r0,[r6,#0x24]  ; vz2_stat
0011b0  280d              CMP      r0,#0xd
0011b2  d12e              BNE      |L1.4626|
;;;1111   	{
;;;1112   	if((vz2_stat_old!=vz2_stat)||(vz2_stat_cnt==0))
0011b4  f8960025          LDRB     r0,[r6,#0x25]  ; vz2_stat_old
0011b8  280d              CMP      r0,#0xd
0011ba  d102              BNE      |L1.4546|
0011bc  f8b60072          LDRH     r0,[r6,#0x72]  ; vz2_stat_cnt
0011c0  b908              CBNZ     r0,|L1.4550|
                  |L1.4546|
;;;1113   		{
;;;1114   		vz2_stat_cnt=10;
0011c2  f8a64072          STRH     r4,[r6,#0x72]
                  |L1.4550|
;;;1115   		}
;;;1116   	vz2_stat_cnt--;
0011c6  f8b60072          LDRH     r0,[r6,#0x72]  ; vz2_stat_cnt
0011ca  f1a00001          SUB      r0,r0,#1
0011ce  b200              SXTH     r0,r0
0011d0  f8a60072          STRH     r0,[r6,#0x72]
;;;1117   	if((vz2_stat_cnt==10)||(vz2_stat_cnt==9))
0011d4  280a              CMP      r0,#0xa
0011d6  d001              BEQ      |L1.4572|
0011d8  2809              CMP      r0,#9
0011da  d10a              BNE      |L1.4594|
                  |L1.4572|
;;;1118   		{
;;;1119   		show_mess(	" ‘Œ–ÃŒ¬Œ◊Õ€… «¿–ﬂƒ  ",
0011dc  f6af1398          ADR      r3,|L1.2120|
0011e0  f6af1284          ADR      r2,|L1.2144|
0011e4  f6af1170          ADR      r1,|L1.2168|
0011e8  a048              ADR      r0,|L1.4876|
0011ea  f8cd8000          STR      r8,[sp,#0]
0011ee  f7fffffe          BL       show_mess
                  |L1.4594|
;;;1120   					"    «¿¡ÀŒ »–Œ¬¿Õ    ",
;;;1121   					"     Õ≈»—œ–¿¬Õ¿     ",
;;;1122   					"    ¬≈Õ“»Àﬂ÷»ﬂ!!!   ",
;;;1123   					5000);
;;;1124   		}
;;;1125   	if(sk_stat[0]==1)
0011f2  7828              LDRB     r0,[r5,#0]  ; sk_stat
0011f4  2801              CMP      r0,#1
0011f6  d106              BNE      |L1.4614|
;;;1126   		{
;;;1127   		vz2_stat=vz2sWRK1;
0011f8  f8864024          STRB     r4,[r6,#0x24]
;;;1128   		lc640_write(EE_VZ2_STAT,vz2sWRK1);
0011fc  210a              MOVS     r1,#0xa
0011fe  f44f70ca          MOV      r0,#0x194
001202  f7fffffe          BL       lc640_write
                  |L1.4614|
;;;1129   		}
;;;1130   	mess_send(MESS2RELE_HNDL,PARAM_RELE_SAMOKALIBR,0,20);
001206  2314              MOVS     r3,#0x14
001208  2200              MOVS     r2,#0
00120a  2164              MOVS     r1,#0x64
00120c  20d2              MOVS     r0,#0xd2
00120e  f7fffffe          BL       mess_send
                  |L1.4626|
;;;1131   	}
;;;1132   
;;;1133   if(vz2_stat==vz2sERR3)		//ŒÚÍÎ˛˜ÂÌ ÚÛÏ·ÎÂ "¬˚‡‚ÌË‚‡˛˘ËÈ Á‡ˇ‰" ÔË ‡·ÓÚÂ ‚ ÔÂ‚ÓÈ Ù‡ÁÂ ‘«
001212  f8960024          LDRB     r0,[r6,#0x24]  ; vz2_stat
001216  280e              CMP      r0,#0xe
001218  d12d              BNE      |L1.4726|
;;;1134   	{
;;;1135   	if((vz2_stat_old!=vz2_stat)||(vz2_stat_cnt==0))
00121a  f8960025          LDRB     r0,[r6,#0x25]  ; vz2_stat_old
00121e  280e              CMP      r0,#0xe
001220  d102              BNE      |L1.4648|
001222  f8b60072          LDRH     r0,[r6,#0x72]  ; vz2_stat_cnt
001226  b908              CBNZ     r0,|L1.4652|
                  |L1.4648|
;;;1136   		{
;;;1137   		vz2_stat_cnt=10;
001228  f8a64072          STRH     r4,[r6,#0x72]
                  |L1.4652|
;;;1138   		}
;;;1139   	vz2_stat_cnt--;
00122c  f8b60072          LDRH     r0,[r6,#0x72]  ; vz2_stat_cnt
001230  f1a00001          SUB      r0,r0,#1
001234  b200              SXTH     r0,r0
001236  f8a60072          STRH     r0,[r6,#0x72]
;;;1140   	if((vz2_stat_cnt==10)||(vz2_stat_cnt==9))
00123a  280a              CMP      r0,#0xa
00123c  d001              BEQ      |L1.4674|
00123e  2809              CMP      r0,#9
001240  d109              BNE      |L1.4694|
                  |L1.4674|
;;;1141   		{
;;;1142   		show_mess(	" ‘Œ–ÃŒ¬Œ◊Õ€… «¿–ﬂƒ  ",
001242  a338              ADR      r3,|L1.4900|
001244  f2af4290          ADR      r2,|L1.3512|
001248  f2af417c          ADR      r1,|L1.3536|
00124c  a02f              ADR      r0,|L1.4876|
00124e  f8cd8000          STR      r8,[sp,#0]
001252  f7fffffe          BL       show_mess
                  |L1.4694|
;;;1143   					"  ¡”ƒ≈“ œ–ŒƒŒÀ∆≈Õ   ",
;;;1144   					"  œŒ—À≈ ¬ Àﬁ◊≈Õ»ﬂ   ",
;;;1145   					"    “”Ã¡À≈–¿!!!     ",
;;;1146   					5000);
;;;1147   		}
;;;1148   	if(sk_stat[1]==1)
001256  7868              LDRB     r0,[r5,#1]  ; sk_stat
001258  2801              CMP      r0,#1
00125a  d106              BNE      |L1.4714|
;;;1149   		{
;;;1150   		vz2_stat=vz2sWRK1;
00125c  f8864024          STRB     r4,[r6,#0x24]
;;;1151   		lc640_write(EE_VZ2_STAT,vz2sWRK1);
001260  210a              MOVS     r1,#0xa
001262  f44f70ca          MOV      r0,#0x194
001266  f7fffffe          BL       lc640_write
                  |L1.4714|
;;;1152   		}
;;;1153   	mess_send(MESS2RELE_HNDL,PARAM_RELE_SAMOKALIBR,0,20);
00126a  2314              MOVS     r3,#0x14
00126c  2200              MOVS     r2,#0
00126e  2164              MOVS     r1,#0x64
001270  20d2              MOVS     r0,#0xd2
001272  f7fffffe          BL       mess_send
                  |L1.4726|
;;;1154   	}
;;;1155   if(vz2_stat==vz2sERR5)		//œÓÔ‡Î‡ ‚ÂÌÚËÎˇˆËˇ ÔË ‡·ÓÚÂ
001276  f8960024          LDRB     r0,[r6,#0x24]  ; vz2_stat
00127a  2810              CMP      r0,#0x10
00127c  d12e              BNE      |L1.4828|
;;;1156   	{
;;;1157   	if((vz2_stat_old!=vz2_stat)||(vz2_stat_cnt==0))
00127e  f8960025          LDRB     r0,[r6,#0x25]  ; vz2_stat_old
001282  2810              CMP      r0,#0x10
001284  d102              BNE      |L1.4748|
001286  f8b60072          LDRH     r0,[r6,#0x72]  ; vz2_stat_cnt
00128a  b908              CBNZ     r0,|L1.4752|
                  |L1.4748|
;;;1158   		{
;;;1159   		vz2_stat_cnt=10;
00128c  f8a64072          STRH     r4,[r6,#0x72]
                  |L1.4752|
;;;1160   		}
;;;1161   	vz2_stat_cnt--;
001290  f8b60072          LDRH     r0,[r6,#0x72]  ; vz2_stat_cnt
001294  f1a00001          SUB      r0,r0,#1
001298  b200              SXTH     r0,r0
00129a  f8a60072          STRH     r0,[r6,#0x72]
;;;1162   	if((vz2_stat_cnt==10)||(vz2_stat_cnt==9))
00129e  280a              CMP      r0,#0xa
0012a0  d001              BEQ      |L1.4774|
0012a2  2809              CMP      r0,#9
0012a4  d10a              BNE      |L1.4796|
                  |L1.4774|
;;;1163   		{
;;;1164   		show_mess(	" ‘Œ–ÃŒ¬Œ◊Õ€… «¿–ﬂƒ  ",
0012a6  f6af2360          ADR      r3,|L1.2120|
0012aa  f6af224c          ADR      r2,|L1.2144|
0012ae  f6af2138          ADR      r1,|L1.2168|
0012b2  a016              ADR      r0,|L1.4876|
0012b4  f8cd8000          STR      r8,[sp,#0]
0012b8  f7fffffe          BL       show_mess
                  |L1.4796|
;;;1165   					"    «¿¡ÀŒ »–Œ¬¿Õ    ",
;;;1166   					"     Õ≈»—œ–¿¬Õ¿     ",
;;;1167   					"    ¬≈Õ“»Àﬂ÷»ﬂ!!!   ",
;;;1168   					5000);
;;;1169   		}
;;;1170   	if(sk_stat[0]==1)
0012bc  7828              LDRB     r0,[r5,#0]  ; sk_stat
0012be  2801              CMP      r0,#1
0012c0  d106              BNE      |L1.4816|
;;;1171   		{
;;;1172   		vz2_stat=vz2sWRK2;
0012c2  f886a024          STRB     r10,[r6,#0x24]
;;;1173   		lc640_write(EE_VZ2_STAT,vz2sWRK2);
0012c6  210b              MOVS     r1,#0xb
0012c8  f44f70ca          MOV      r0,#0x194
0012cc  f7fffffe          BL       lc640_write
                  |L1.4816|
;;;1174   		}
;;;1175   	mess_send(MESS2RELE_HNDL,PARAM_RELE_SAMOKALIBR,0,20);
0012d0  2314              MOVS     r3,#0x14
0012d2  2200              MOVS     r2,#0
0012d4  2164              MOVS     r1,#0x64
0012d6  20d2              MOVS     r0,#0xd2
0012d8  f7fffffe          BL       mess_send
                  |L1.4828|
;;;1176   	}
;;;1177   
;;;1178   if(vz2_stat==vz2sERR6)		//ŒÚÍÎ˛˜ÂÌ ÚÛÏ·ÎÂ "¬˚‡‚ÌË‚‡˛˘ËÈ Á‡ˇ‰"
0012dc  f8960024          LDRB     r0,[r6,#0x24]  ; vz2_stat
0012e0  2811              CMP      r0,#0x11
0012e2  d157              BNE      |L1.5012|
;;;1179   	{
;;;1180   	if((vz2_stat_old!=vz2_stat)||(vz2_stat_cnt==0))
0012e4  f8960025          LDRB     r0,[r6,#0x25]  ; vz2_stat_old
0012e8  2811              CMP      r0,#0x11
0012ea  d12a              BNE      |L1.4930|
0012ec  e026              B        |L1.4924|
0012ee  0000              DCW      0x0000
                  |L1.4848|
                          DCD      ||area_number.25||+0x80
                  |L1.4852|
                          DCD      FZ_T1
                  |L1.4856|
                          DCD      out_U
                  |L1.4860|
                          DCD      FZ_U1
                  |L1.4864|
                          DCD      Ib_ips_termokompensat
                  |L1.4868|
                          DCD      FZ_ISW12
                  |L1.4872|
                          DCD      FZ_T2
                  |L1.4876|
00130c  20d4ced0          DCB      " ",212,206,208,204,206,194,206,215,205,219,201," ",199,192
001310  cccec2ce
001314  d7cddbc9
001318  20c7c0  
00131b  d0dfc420          DCB      208,223,196,"  ",0
00131f  2000    
001321  00                DCB      0
001322  00                DCB      0
001323  00                DCB      0
                  |L1.4900|
001324  20202020          DCB      "    ",210,211,204,193,203,197,208,192,"!!!     ",0
001328  d2d3ccc1
00132c  cbc5d0c0
001330  21212120
001334  20202020
001338  00      
001339  00                DCB      0
00133a  00                DCB      0
00133b  00                DCB      0
                  |L1.4924|
00133c  f8b60072          LDRH     r0,[r6,#0x72]  ; vz2_stat_cnt
001340  b908              CBNZ     r0,|L1.4934|
                  |L1.4930|
;;;1181   		{
;;;1182   		vz2_stat_cnt=10;
001342  f8a64072          STRH     r4,[r6,#0x72]
                  |L1.4934|
;;;1183   		}
;;;1184   	vz2_stat_cnt--;
001346  f8b60072          LDRH     r0,[r6,#0x72]  ; vz2_stat_cnt
00134a  f1a00001          SUB      r0,r0,#1
00134e  b200              SXTH     r0,r0
001350  f8a60072          STRH     r0,[r6,#0x72]
;;;1185   	if((vz2_stat_cnt==10)||(vz2_stat_cnt==9))
001354  280a              CMP      r0,#0xa
001356  d001              BEQ      |L1.4956|
001358  2809              CMP      r0,#9
00135a  d10b              BNE      |L1.4980|
                  |L1.4956|
;;;1186   		{
;;;1187   		show_mess(	" ‘Œ–ÃŒ¬Œ◊Õ€… «¿–ﬂƒ  ",
00135c  f2af033c          ADR      r3,|L1.4900|
001360  f2af52ac          ADR      r2,|L1.3512|
001364  f2af5198          ADR      r1,|L1.3536|
001368  f2af0060          ADR      r0,|L1.4876|
00136c  f8cd8000          STR      r8,[sp,#0]
001370  f7fffffe          BL       show_mess
                  |L1.4980|
;;;1188   					"  ¡”ƒ≈“ œ–ŒƒŒÀ∆≈Õ   ",
;;;1189   					"  œŒ—À≈ ¬ Àﬁ◊≈Õ»ﬂ   ",
;;;1190   					"    “”Ã¡À≈–¿!!!     ",
;;;1191   					5000);
;;;1192   		}
;;;1193   	if(sk_stat[1]==1)
001374  7868              LDRB     r0,[r5,#1]  ; sk_stat
001376  2801              CMP      r0,#1
001378  d106              BNE      |L1.5000|
;;;1194   		{
;;;1195   		vz2_stat=vz2sWRK2;
00137a  f886a024          STRB     r10,[r6,#0x24]
;;;1196   		lc640_write(EE_VZ2_STAT,vz2sWRK2);
00137e  210b              MOVS     r1,#0xb
001380  f44f70ca          MOV      r0,#0x194
001384  f7fffffe          BL       lc640_write
                  |L1.5000|
;;;1197   		}
;;;1198   	mess_send(MESS2RELE_HNDL,PARAM_RELE_SAMOKALIBR,0,20);
001388  2314              MOVS     r3,#0x14
00138a  2200              MOVS     r2,#0
00138c  2164              MOVS     r1,#0x64
00138e  20d2              MOVS     r0,#0xd2
001390  f7fffffe          BL       mess_send
                  |L1.5012|
;;;1199   	}
;;;1200   if(vz2_stat==vz2sERR4)		//¬« Á‡ÍÓÌ˜ËÎÒˇ ‡ ÚÛÏ·ÎÂ ‚ÍÎ˛˜ÂÌ
001394  f8960024          LDRB     r0,[r6,#0x24]  ; vz2_stat
001398  280f              CMP      r0,#0xf
00139a  d130              BNE      |L1.5118|
;;;1201   	{
;;;1202   	if((vz2_stat_old!=vz2_stat)||(vz2_stat_cnt==0))
00139c  f8960025          LDRB     r0,[r6,#0x25]  ; vz2_stat_old
0013a0  280f              CMP      r0,#0xf
0013a2  d102              BNE      |L1.5034|
0013a4  f8b60072          LDRH     r0,[r6,#0x72]  ; vz2_stat_cnt
0013a8  b908              CBNZ     r0,|L1.5038|
                  |L1.5034|
;;;1203   		{
;;;1204   		vz2_stat_cnt=10;
0013aa  f8a64072          STRH     r4,[r6,#0x72]
                  |L1.5038|
;;;1205   		}
;;;1206   	vz2_stat_cnt--;
0013ae  f8b60072          LDRH     r0,[r6,#0x72]  ; vz2_stat_cnt
0013b2  f1a00001          SUB      r0,r0,#1
0013b6  b200              SXTH     r0,r0
0013b8  f8a60072          STRH     r0,[r6,#0x72]
;;;1207   	if((vz2_stat_cnt==10)||(vz2_stat_cnt==9))
0013bc  280a              CMP      r0,#0xa
0013be  d001              BEQ      |L1.5060|
0013c0  2809              CMP      r0,#9
0013c2  d10b              BNE      |L1.5084|
                  |L1.5060|
;;;1208   		{
;;;1209   		show_mess(	"     ¬€ Àﬁ◊»“≈      ",
0013c4  f6af331c          ADR      r3,|L1.2220|
0013c8  f6af3208          ADR      r2,|L1.2244|
0013cc  f6af21f4          ADR      r1,|L1.2268|
0013d0  f2af5074          ADR      r0,|L1.3680|
0013d4  f8cd8000          STR      r8,[sp,#0]
0013d8  f7fffffe          BL       show_mess
                  |L1.5084|
;;;1210   					"      “”Ã¡À≈–       ",
;;;1211   					"     ¬€—Œ Œ√Œ       ",
;;;1212   					"    Õ¿œ–ﬂ∆≈Õ»ﬂ      ",
;;;1213   					5000);
;;;1214   		}
;;;1215   	if(sk_stat[1]==0)
0013dc  7868              LDRB     r0,[r5,#1]  ; sk_stat
0013de  b940              CBNZ     r0,|L1.5106|
;;;1216   		{
;;;1217   		vz2_stat=vz2sOFF;
0013e0  f8867024          STRB     r7,[r6,#0x24]
;;;1218   		lc640_write(EE_VZ2_STAT,vz2sOFF);
0013e4  2100              MOVS     r1,#0
0013e6  f44f70ca          MOV      r0,#0x194
0013ea  f7fffffe          BL       lc640_write
;;;1219   		vz_stop();
0013ee  f7fffffe          BL       vz_stop
                  |L1.5106|
;;;1220   
;;;1221   		}
;;;1222   	mess_send(MESS2RELE_HNDL,PARAM_RELE_SAMOKALIBR,0,20);
0013f2  2314              MOVS     r3,#0x14
0013f4  2200              MOVS     r2,#0
0013f6  2164              MOVS     r1,#0x64
0013f8  20d2              MOVS     r0,#0xd2
0013fa  f7fffffe          BL       mess_send
                  |L1.5118|
;;;1223   	}
;;;1224   if(vz2_stat==vz2sFINE)		//‘« Á‡ÍÓÌ˜ËÎÒˇ, Ì‡ÔÓÏËÌ‡ÌËÂ
0013fe  f8960024          LDRB     r0,[r6,#0x24]  ; vz2_stat
;;;1225   	{
;;;1226   	if((vz2_stat_old!=vz2_stat)||(vz2_stat_cnt==0))
;;;1227   		{
;;;1228   		vz2_stat_cnt=10;
;;;1229   		}
;;;1230   	vz2_stat_cnt--;
;;;1231   	if((vz2_stat_cnt==10)||(vz2_stat_cnt==9))
;;;1232   		{
;;;1233   		show_mess(	"    ‘Œ–ÃŒ¬Œ◊Õ€…     ",
001402  f64038b8          MOV      r8,#0xbb8
001406  2812              CMP      r0,#0x12              ;1224
001408  d13f              BNE      |L1.5258|
00140a  f8960025          LDRB     r0,[r6,#0x25]         ;1226  ; vz2_stat_old
00140e  2812              CMP      r0,#0x12              ;1226
001410  d102              BNE      |L1.5144|
001412  f8b60072          LDRH     r0,[r6,#0x72]         ;1226  ; vz2_stat_cnt
001416  b908              CBNZ     r0,|L1.5148|
                  |L1.5144|
001418  f8a64072          STRH     r4,[r6,#0x72]         ;1228
                  |L1.5148|
00141c  f8b60072          LDRH     r0,[r6,#0x72]         ;1230  ; vz2_stat_cnt
001420  f1a00001          SUB      r0,r0,#1              ;1230
001424  b200              SXTH     r0,r0                 ;1230
001426  f8a60072          STRH     r0,[r6,#0x72]         ;1230
00142a  280a              CMP      r0,#0xa               ;1231
00142c  d001              BEQ      |L1.5170|
00142e  2809              CMP      r0,#9                 ;1231
001430  d10a              BNE      |L1.5192|
                  |L1.5170|
001432  f2af6334          ADR      r3,|L1.3584|
001436  f2af6220          ADR      r2,|L1.3608|
00143a  f2af610c          ADR      r1,|L1.3632|
00143e  a0ff              ADR      r0,|L1.6204|
001440  f8cd8000          STR      r8,[sp,#0]
001444  f7fffffe          BL       show_mess
                  |L1.5192|
;;;1234   					"       «¿–ﬂƒ        ",
;;;1235   					"      ”—œ≈ÿÕŒ       ",
;;;1236   					"     «¿¬≈–ÿ≈Õ       ",
;;;1237   					3000);
;;;1238   		}
;;;1239   	if((vz2_stat_cnt==6)||(vz2_stat_cnt==5))
001448  f9b60072          LDRSH    r0,[r6,#0x72]  ; vz2_stat_cnt
00144c  2806              CMP      r0,#6
00144e  d001              BEQ      |L1.5204|
001450  2805              CMP      r0,#5
001452  d10b              BNE      |L1.5228|
                  |L1.5204|
;;;1240   		{
;;;1241   		show_mess(	"     ¬€ Àﬁ◊»“≈      ",
001454  f6af33ac          ADR      r3,|L1.2220|
001458  f6af3298          ADR      r2,|L1.2244|
00145c  f6af3184          ADR      r1,|L1.2268|
001460  f2af6004          ADR      r0,|L1.3680|
001464  f8cd8000          STR      r8,[sp,#0]
001468  f7fffffe          BL       show_mess
                  |L1.5228|
;;;1242   					"      “”Ã¡À≈–       ",
;;;1243   					"     ¬€—Œ Œ√Œ       ",
;;;1244   					"    Õ¿œ–ﬂ∆≈Õ»ﬂ      ",
;;;1245   					3000);
;;;1246   		}
;;;1247   	if(sk_stat[1]==0)
00146c  7868              LDRB     r0,[r5,#1]  ; sk_stat
00146e  b930              CBNZ     r0,|L1.5246|
;;;1248   		{
;;;1249   		vz2_stat=vz2sOFF;
001470  f8867024          STRB     r7,[r6,#0x24]
;;;1250   		lc640_write(EE_VZ2_STAT,vz2sOFF);
001474  2100              MOVS     r1,#0
001476  f44f70ca          MOV      r0,#0x194
00147a  f7fffffe          BL       lc640_write
                  |L1.5246|
;;;1251   		}
;;;1252   	mess_send(MESS2RELE_HNDL,PARAM_RELE_SAMOKALIBR,0,20);
00147e  2314              MOVS     r3,#0x14
001480  2200              MOVS     r2,#0
001482  2164              MOVS     r1,#0x64
001484  20d2              MOVS     r0,#0xd2
001486  f7fffffe          BL       mess_send
                  |L1.5258|
;;;1253   	}
;;;1254   if(vz2_stat==vz2sSTOP)		//‘« ÔÂÍ‡˘ÂÌ, Ì‡ÔÓÏËÌ‡ÌËÂ
00148a  f8960024          LDRB     r0,[r6,#0x24]  ; vz2_stat
00148e  2813              CMP      r0,#0x13
001490  d13f              BNE      |L1.5394|
;;;1255   	{
;;;1256   	if((vz2_stat_old!=vz2_stat)||(vz2_stat_cnt==0))
001492  f8960025          LDRB     r0,[r6,#0x25]  ; vz2_stat_old
001496  2813              CMP      r0,#0x13
001498  d102              BNE      |L1.5280|
00149a  f8b60072          LDRH     r0,[r6,#0x72]  ; vz2_stat_cnt
00149e  b908              CBNZ     r0,|L1.5284|
                  |L1.5280|
;;;1257   		{
;;;1258   		vz2_stat_cnt=10;
0014a0  f8a64072          STRH     r4,[r6,#0x72]
                  |L1.5284|
;;;1259   		}
;;;1260   	vz2_stat_cnt--;
0014a4  f8b60072          LDRH     r0,[r6,#0x72]  ; vz2_stat_cnt
0014a8  f1a00001          SUB      r0,r0,#1
0014ac  b200              SXTH     r0,r0
0014ae  f8a60072          STRH     r0,[r6,#0x72]
;;;1261   	if((vz2_stat_cnt==10)||(vz2_stat_cnt==9))
0014b2  280a              CMP      r0,#0xa
0014b4  d001              BEQ      |L1.5306|
0014b6  2809              CMP      r0,#9
0014b8  d10a              BNE      |L1.5328|
                  |L1.5306|
;;;1262   		{
;;;1263   		show_mess(	"    ‘Œ–ÃŒ¬Œ◊Õ€…     ",
0014ba  f2af6344          ADR      r3,|L1.3704|
0014be  f2af6230          ADR      r2,|L1.3728|
0014c2  f2af6194          ADR      r1,|L1.3632|
0014c6  a0dd              ADR      r0,|L1.6204|
0014c8  f8cd8000          STR      r8,[sp,#0]
0014cc  f7fffffe          BL       show_mess
                  |L1.5328|
;;;1264   					"       «¿–ﬂƒ        ",
;;;1265   					"     œ–≈ –¿Ÿ≈Õ      ",
;;;1266   					"                    ",
;;;1267   					3000);
;;;1268   		}
;;;1269   	if((vz2_stat_cnt==6)||(vz2_stat_cnt==5))
0014d0  f9b60072          LDRSH    r0,[r6,#0x72]  ; vz2_stat_cnt
0014d4  2806              CMP      r0,#6
0014d6  d001              BEQ      |L1.5340|
0014d8  2805              CMP      r0,#5
0014da  d10b              BNE      |L1.5364|
                  |L1.5340|
;;;1270   		{
;;;1271   		show_mess(	"     ¬€ Àﬁ◊»“≈      ",
0014dc  f6af4334          ADR      r3,|L1.2220|
0014e0  f6af4220          ADR      r2,|L1.2244|
0014e4  f6af410c          ADR      r1,|L1.2268|
0014e8  f2af608c          ADR      r0,|L1.3680|
0014ec  f8cd8000          STR      r8,[sp,#0]
0014f0  f7fffffe          BL       show_mess
                  |L1.5364|
;;;1272   					"      “”Ã¡À≈–       ",
;;;1273   					"     ¬€—Œ Œ√Œ       ",
;;;1274   					"    Õ¿œ–ﬂ∆≈Õ»ﬂ      ",
;;;1275   					3000);
;;;1276   		}
;;;1277   	if(sk_stat[1]==0)
0014f4  7868              LDRB     r0,[r5,#1]  ; sk_stat
0014f6  b930              CBNZ     r0,|L1.5382|
;;;1278   		{
;;;1279   		vz2_stat=vz2sOFF;
0014f8  f8867024          STRB     r7,[r6,#0x24]
;;;1280   		lc640_write(EE_VZ2_STAT,vz2sOFF);
0014fc  2100              MOVS     r1,#0
0014fe  f44f70ca          MOV      r0,#0x194
001502  f7fffffe          BL       lc640_write
                  |L1.5382|
;;;1281   		}
;;;1282   	mess_send(MESS2RELE_HNDL,PARAM_RELE_SAMOKALIBR,0,20);
001506  2314              MOVS     r3,#0x14
001508  2200              MOVS     r2,#0
00150a  2164              MOVS     r1,#0x64
00150c  20d2              MOVS     r0,#0xd2
00150e  f7fffffe          BL       mess_send
                  |L1.5394|
;;;1283   	}
;;;1284   vz2_stat_old=vz2_stat;
001512  f8160f24          LDRB     r0,[r6,#0x24]!  ; vz2_stat
001516  7070              STRB     r0,[r6,#1]
;;;1285   
;;;1286   }
001518  e8bd8ff8          POP      {r3-r11,pc}
;;;1287   
                          ENDP

                  vz2_start PROC
;;;1289   //ÒÚ‡Ú Û‡‚ÌËÚÂÎ¸ÌÓ„ Á‡ˇ‰‡
;;;1290   char vz2_start(char hour)
00151c  b510              PUSH     {r4,lr}
;;;1291   {          
;;;1292   char out;
;;;1293   out=0;
00151e  f04f0000          MOV      r0,#0
;;;1294   if((spc_stat==spcOFF)&&(speedChrgBlckStat!=1)&&(vz1_stat==vz1sOFF))
001522  49cc              LDR      r1,|L1.6228|
001524  7d4a              LDRB     r2,[r1,#0x15]  ; spc_stat
001526  2a00              CMP      r2,#0
001528  d112              BNE      |L1.5456|
00152a  4acb              LDR      r2,|L1.6232|
00152c  8812              LDRH     r2,[r2,#0]  ; speedChrgBlckStat
00152e  2a01              CMP      r2,#1
001530  d00e              BEQ      |L1.5456|
001532  f8912021          LDRB     r2,[r1,#0x21]  ; vz1_stat
001536  2a00              CMP      r2,#0
001538  d10a              BNE      |L1.5456|
;;;1295   	{
;;;1296   	if(vz1_stat==vz1sOFF)
;;;1297   		{
;;;1298   		vz2_stat=vz2sSTEP1;
00153a  f04f0001          MOV      r0,#1
00153e  f8810024          STRB     r0,[r1,#0x24]
;;;1299   		lc640_write(EE_VZ2_STAT,vz2sSTEP1);
001542  4601              MOV      r1,r0
001544  f44f70ca          MOV      r0,#0x194
001548  f7fffffe          BL       lc640_write
;;;1300   		out=1;
00154c  f04f0001          MOV      r0,#1
                  |L1.5456|
;;;1301   		
;;;1302   		}
;;;1303   /*	spc_stat=spcVZ;
;;;1304   	__ee_spc_stat=spcVZ; 
;;;1305   	lc640_write_int(EE_SPC_STAT,__ee_spc_stat);   
;;;1306   	vz_cnt_h=hour;
;;;1307   	__ee_vz_cnt=hour*60;
;;;1308   	if(hour==0)__ee_vz_cnt=30;
;;;1309   	lc640_write_int(EE_VZ_CNT,__ee_vz_cnt);
;;;1310   	lc640_write_int(EE_SPC_VZ_LENGT,__ee_vz_cnt);	
;;;1311   	vz_cnt_h_=0;
;;;1312   	vz_cnt_s=0;
;;;1313   	vz_cnt_s_=0;
;;;1314   	
;;;1315   		*/
;;;1316   	}
;;;1317   //else if((spc_stat==spc_KE1p1)||(spc_stat==spc_KE1p2)) out=22; 
;;;1318   //else if((spc_stat==spc_KE2p1)||(spc_stat==spc_KE2p2)) out=33;
;;;1319   //plazma=out;	
;;;1320   return out;
;;;1321   }
001550  bd10              POP      {r4,pc}
;;;1322   //-----------------------------------------------
                          ENDP

                  vz2_stop PROC
;;;1323   //ÒÚÓÔ ÙÓÏÓ‚Ó˜ÌÓ„Ó Á‡ˇ‰‡
;;;1324   void vz2_stop(void)
001552  48c0              LDR      r0,|L1.6228|
;;;1325   {
;;;1326   if(vz2_stat!=vz2sOFF)
001554  f8901024          LDRB     r1,[r0,#0x24]  ; vz2_stat
001558  2900              CMP      r1,#0
00155a  d007              BEQ      |L1.5484|
;;;1327   	{
;;;1328   	vz2_stat=vz2sSTOP;
00155c  f04f0113          MOV      r1,#0x13
001560  f8801024          STRB     r1,[r0,#0x24]
;;;1329   	lc640_write(EE_VZ2_STAT,vz2sSTOP);
001564  f44f70ca          MOV      r0,#0x194
001568  f7ffbffe          B.W      lc640_write
                  |L1.5484|
;;;1330   	}
;;;1331   }
00156c  4770              BX       lr
;;;1332   
                          ENDP

                  kb_init PROC
;;;1333   //-----------------------------------------------
;;;1334   void kb_init(void)
00156e  48bb              LDR      r0,|L1.6236|
;;;1335   {
;;;1336   main_kb_cnt=(TBAT*60)-60/*120*/;
001570  f06f013b          MVN      r1,#0x3b
001574  8800              LDRH     r0,[r0,#0]  ; TBAT
001576  ebc01000          RSB      r0,r0,r0,LSL #4
00157a  eb010080          ADD      r0,r1,r0,LSL #2
00157e  49b5              LDR      r1,|L1.6228|
001580  f8a10046          STRH     r0,[r1,#0x46]
;;;1337   }
001584  4770              BX       lr
;;;1338   
                          ENDP

                  kb_hndl PROC
;;;1339   //-----------------------------------------------
;;;1340   void kb_hndl(void)
001586  e92d5ff0          PUSH     {r4-r12,lr}
;;;1341   {
;;;1342   
;;;1343   static signed short ibat[2],ibat_[2];
;;;1344   #ifdef UKU_TELECORE2015
;;;1345   if(((++main_kb_cnt>=TBAT*60)&&(TBAT))&&(BAT_TYPE==0))
;;;1346   #else 
;;;1347   if(((++main_kb_cnt>=TBAT*60)&&(TBAT)))
00158a  f8df82c8          LDR      r8,|L1.6228|
;;;1348   #endif
;;;1349   	{
;;;1350   	main_kb_cnt=0;
;;;1351   	
;;;1352   	kb_start[0]=0;
;;;1353   	kb_start[1]=0;
;;;1354   	kb_start_ips=0;
;;;1355   
;;;1356   	if( (BAT_IS_ON[0]==bisON) && (bat[0]._Ub>80) && ( (abs(bat[0]._Ib)<IKB) || (bat[0]._av&1) ) ) kb_start[0]=1;
;;;1357   	if( (BAT_IS_ON[1]==bisON) && (bat[1]._Ub>80) && ( (abs(bat[1]._Ib)<IKB) || (bat[1]._av&1) ) ) kb_start[1]=1;
;;;1358   #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;1359   	if( (!ips_bat_av_vzvod)                      && ((abs(Ib_ips_termokompensat)<IKB) || (bat_ips._av&1) ) ) kb_start_ips=1;
00158e  f8dfa2d0          LDR      r10,|L1.6240|
001592  2500              MOVS     r5,#0                 ;1347
001594  f8b80046          LDRH     r0,[r8,#0x46]         ;1347  ; main_kb_cnt
001598  4eb2              LDR      r6,|L1.6244|
00159a  1c40              ADDS     r0,r0,#1              ;1347
00159c  b201              SXTH     r1,r0                 ;1347
00159e  48af              LDR      r0,|L1.6236|
0015a0  f8a81046          STRH     r1,[r8,#0x46]         ;1347
0015a4  f8df92c0          LDR      r9,|L1.6248|
0015a8  f9b00000          LDRSH    r0,[r0,#0]            ;1347  ; TBAT
;;;1360   #endif	
;;;1361   	if( (net_av) || (num_of_wrks_bps==0) || ( (spc_stat!=spcOFF) && (spc_stat!=spcVZ) ) 
;;;1362   	  ||(vz1_stat!=vz1sOFF)||(vz2_stat!=vz2sOFF)||(sp_ch_stat!=scsOFF) 	)
;;;1363    
;;;1364   		{
;;;1365   		kb_start[0]=0;
;;;1366   		kb_start[1]=0;
;;;1367   		kb_start_ips=0;
;;;1368   		}
;;;1369   
;;;1370   	if((kb_start[0]==1)||(kb_start[1]==1)||(kb_start_ips==1))
;;;1371   		{
;;;1372   		kb_cnt_1lev=10;
0015ac  270a              MOVS     r7,#0xa
0015ae  ebc01200          RSB      r2,r0,r0,LSL #4       ;1347
0015b2  f04f0b01          MOV      r11,#1                ;1356
0015b6  f108044c          ADD      r4,r8,#0x4c           ;1352
0015ba  ebb10f82          CMP      r1,r2,LSL #2          ;1347
0015be  db69              BLT      |L1.5780|
0015c0  2800              CMP      r0,#0                 ;1347
0015c2  d067              BEQ      |L1.5780|
0015c4  f8a85046          STRH     r5,[r8,#0x46]         ;1350
0015c8  7025              STRB     r5,[r4,#0]            ;1352
0015ca  7065              STRB     r5,[r4,#1]            ;1353
0015cc  f888500f          STRB     r5,[r8,#0xf]          ;1354
0015d0  48a6              LDR      r0,|L1.6252|
0015d2  7800              LDRB     r0,[r0,#0]            ;1356  ; BAT_IS_ON
0015d4  2855              CMP      r0,#0x55              ;1356
0015d6  d111              BNE      |L1.5628|
0015d8  f9b60002          LDRSH    r0,[r6,#2]            ;1356  ; bat
0015dc  2850              CMP      r0,#0x50              ;1356
0015de  dd0d              BLE      |L1.5628|
0015e0  f9b60008          LDRSH    r0,[r6,#8]            ;1356  ; bat
0015e4  f7fffffe          BL       abs
0015e8  f9b91000          LDRSH    r1,[r9,#0]            ;1356  ; IKB
0015ec  4288              CMP      r0,r1                 ;1356
0015ee  db03              BLT      |L1.5624|
0015f0  f896003d          LDRB     r0,[r6,#0x3d]         ;1356  ; bat
0015f4  07c0              LSLS     r0,r0,#31             ;1356
0015f6  d001              BEQ      |L1.5628|
                  |L1.5624|
0015f8  f884b000          STRB     r11,[r4,#0]           ;1356
                  |L1.5628|
0015fc  489b              LDR      r0,|L1.6252|
0015fe  7840              LDRB     r0,[r0,#1]            ;1357  ; BAT_IS_ON
001600  2855              CMP      r0,#0x55              ;1357
001602  d111              BNE      |L1.5672|
001604  f9b6004e          LDRSH    r0,[r6,#0x4e]         ;1357  ; bat
001608  2850              CMP      r0,#0x50              ;1357
00160a  dd0d              BLE      |L1.5672|
00160c  f9b60054          LDRSH    r0,[r6,#0x54]         ;1357  ; bat
001610  f7fffffe          BL       abs
001614  f9b91000          LDRSH    r1,[r9,#0]            ;1357  ; IKB
001618  4288              CMP      r0,r1                 ;1357
00161a  db03              BLT      |L1.5668|
00161c  f8960089          LDRB     r0,[r6,#0x89]         ;1357  ; bat
001620  07c0              LSLS     r0,r0,#31             ;1357
001622  d001              BEQ      |L1.5672|
                  |L1.5668|
001624  f884b001          STRB     r11,[r4,#1]           ;1357
                  |L1.5672|
001628  4891              LDR      r0,|L1.6256|
00162a  7800              LDRB     r0,[r0,#0]            ;1359  ; ips_bat_av_vzvod
00162c  b970              CBNZ     r0,|L1.5708|
00162e  f9ba0000          LDRSH    r0,[r10,#0]           ;1359  ; Ib_ips_termokompensat
001632  f7fffffe          BL       abs
001636  f9b91000          LDRSH    r1,[r9,#0]            ;1359  ; IKB
00163a  4288              CMP      r0,r1                 ;1359
00163c  db04              BLT      |L1.5704|
00163e  488d              LDR      r0,|L1.6260|
001640  f890003d          LDRB     r0,[r0,#0x3d]         ;1359  ; bat_ips
001644  07c0              LSLS     r0,r0,#31             ;1359
001646  d001              BEQ      |L1.5708|
                  |L1.5704|
001648  f888b00f          STRB     r11,[r8,#0xf]         ;1359
                  |L1.5708|
00164c  488a              LDR      r0,|L1.6264|
00164e  7800              LDRB     r0,[r0,#0]            ;1361  ; net_av
001650  b980              CBNZ     r0,|L1.5748|
001652  f8980010          LDRB     r0,[r8,#0x10]         ;1361  ; num_of_wrks_bps
001656  b168              CBZ      r0,|L1.5748|
001658  f8980015          LDRB     r0,[r8,#0x15]         ;1361  ; spc_stat
00165c  b108              CBZ      r0,|L1.5730|
00165e  2802              CMP      r0,#2                 ;1361
001660  d108              BNE      |L1.5748|
                  |L1.5730|
001662  f8980021          LDRB     r0,[r8,#0x21]         ;1362  ; vz1_stat
001666  b928              CBNZ     r0,|L1.5748|
001668  f8980024          LDRB     r0,[r8,#0x24]         ;1362  ; vz2_stat
00166c  b910              CBNZ     r0,|L1.5748|
00166e  4883              LDR      r0,|L1.6268|
001670  7800              LDRB     r0,[r0,#0]            ;1362  ; sp_ch_stat
001672  b118              CBZ      r0,|L1.5756|
                  |L1.5748|
001674  7025              STRB     r5,[r4,#0]            ;1365
001676  7065              STRB     r5,[r4,#1]            ;1366
001678  f888500f          STRB     r5,[r8,#0xf]          ;1367
                  |L1.5756|
00167c  7820              LDRB     r0,[r4,#0]            ;1370  ; kb_start
00167e  2801              CMP      r0,#1                 ;1370
001680  d020              BEQ      |L1.5828|
001682  7860              LDRB     r0,[r4,#1]            ;1370  ; kb_start
001684  2801              CMP      r0,#1                 ;1370
001686  d01d              BEQ      |L1.5828|
001688  f898000f          LDRB     r0,[r8,#0xf]          ;1370  ; kb_start_ips
00168c  2801              CMP      r0,#1                 ;1370
00168e  d019              BEQ      |L1.5828|
;;;1373   		}
;;;1374   	else kb_cnt_1lev=0;
001690  f8a85048          STRH     r5,[r8,#0x48]
                  |L1.5780|
;;;1375   	}
;;;1376   
;;;1377   if(kb_cnt_1lev)
001694  4641              MOV      r1,r8
001696  f9b80048          LDRSH    r0,[r8,#0x48]  ; kb_cnt_1lev
;;;1378   	{
;;;1379   	kb_cnt_1lev--;
;;;1380   
;;;1381   	if(kb_cnt_1lev>5)mess_send(MESS2CNTRL_HNDL,PARAM_CNTRL_STAT_PLUS,30,15);
;;;1382   	else if(kb_cnt_1lev>0) mess_send(MESS2CNTRL_HNDL,PARAM_CNTRL_STAT_MINUS,30,15);
;;;1383   
;;;1384   
;;;1385   	if(kb_cnt_1lev==5)
;;;1386   		{
;;;1387   		ibat[0]=abs(bat[0]._Ib);
00169a  f8df81b8          LDR      r8,|L1.6228|
00169e  2800              CMP      r0,#0                 ;1377
0016a0  f1080880          ADD      r8,r8,#0x80
0016a4  d07e              BEQ      |L1.6052|
0016a6  f1a00001          SUB      r0,r0,#1              ;1379
0016aa  b200              SXTH     r0,r0                 ;1379
0016ac  468b              MOV      r11,r1                ;1379
0016ae  f8a10048          STRH     r0,[r1,#0x48]         ;1379
0016b2  2805              CMP      r0,#5                 ;1381
0016b4  dd09              BLE      |L1.5834|
0016b6  230f              MOVS     r3,#0xf               ;1381
0016b8  221e              MOVS     r2,#0x1e              ;1381
0016ba  2164              MOVS     r1,#0x64              ;1381
0016bc  20e1              MOVS     r0,#0xe1              ;1381
0016be  f7fffffe          BL       mess_send
0016c2  e00a              B        |L1.5850|
                  |L1.5828|
0016c4  f8a87048          STRH     r7,[r8,#0x48]         ;1372
0016c8  e7e4              B        |L1.5780|
                  |L1.5834|
0016ca  2800              CMP      r0,#0                 ;1382
0016cc  dd05              BLE      |L1.5850|
0016ce  230f              MOVS     r3,#0xf               ;1382
0016d0  221e              MOVS     r2,#0x1e              ;1382
0016d2  2169              MOVS     r1,#0x69              ;1382
0016d4  20e1              MOVS     r0,#0xe1              ;1382
0016d6  f7fffffe          BL       mess_send
                  |L1.5850|
0016da  f8bb0048          LDRH     r0,[r11,#0x48]        ;1385  ; kb_cnt_1lev
0016de  2805              CMP      r0,#5                 ;1385
0016e0  d111              BNE      |L1.5894|
0016e2  f9b60008          LDRSH    r0,[r6,#8]  ; bat
0016e6  f7fffffe          BL       abs
0016ea  f8a80000          STRH     r0,[r8,#0]
;;;1388   		ibat[1]=abs(bat[1]._Ib);
0016ee  f9b60054          LDRSH    r0,[r6,#0x54]  ; bat
0016f2  f7fffffe          BL       abs
0016f6  f8a80002          STRH     r0,[r8,#2]
;;;1389   		ibat_ips=abs(Ib_ips_termokompensat);
0016fa  f9ba0000          LDRSH    r0,[r10,#0]  ; Ib_ips_termokompensat
0016fe  f7fffffe          BL       abs
001702  f8ab004e          STRH     r0,[r11,#0x4e]
                  |L1.5894|
;;;1390   		}
;;;1391   	
;;;1392   	if(kb_cnt_1lev==0)
001706  4853              LDR      r0,|L1.6228|
001708  f8b00048          LDRH     r0,[r0,#0x48]  ; kb_cnt_1lev
00170c  2800              CMP      r0,#0
00170e  d158              BNE      |L1.6082|
;;;1393   		{
;;;1394   		ibat_[0]=abs(bat[0]._Ib);
001710  f9b60008          LDRSH    r0,[r6,#8]  ; bat
001714  f7fffffe          BL       abs
001718  f8dfb138          LDR      r11,|L1.6228|
00171c  f10b0b84          ADD      r11,r11,#0x84
001720  f8ab0000          STRH     r0,[r11,#0]
;;;1395   		ibat_[1]=abs(bat[1]._Ib);
001724  f9b60054          LDRSH    r0,[r6,#0x54]  ; bat
001728  f7fffffe          BL       abs
00172c  f8ab0002          STRH     r0,[r11,#2]
;;;1396   		ibat_ips_=abs(Ib_ips_termokompensat);
001730  f9ba0000          LDRSH    r0,[r10,#0]  ; Ib_ips_termokompensat
001734  f7fffffe          BL       abs
001738  f8dfa118          LDR      r10,|L1.6228|
00173c  f8aa0050          STRH     r0,[r10,#0x50]
;;;1397   
;;;1398   		kb_cnt_2lev=0;
001740  f8aa504a          STRH     r5,[r10,#0x4a]
;;;1399   
;;;1400   
;;;1401   		if(( (ibat[0]+ibat_[0]) < IKB )&& (kb_start[0]==1))
001744  f9b80000          LDRSH    r0,[r8,#0]  ; ibat
001748  f9bb1000          LDRSH    r1,[r11,#0]  ; ibat_
00174c  4408              ADD      r0,r0,r1
00174e  f9b91000          LDRSH    r1,[r9,#0]  ; IKB
001752  4288              CMP      r0,r1
001754  da02              BGE      |L1.5980|
001756  7820              LDRB     r0,[r4,#0]  ; kb_start
001758  2801              CMP      r0,#1
00175a  d034              BEQ      |L1.6086|
                  |L1.5980|
;;;1402   			{
;;;1403   			kb_cnt_2lev=10;  
;;;1404   			}
;;;1405   		else if(bat[0]._Ub>200)
00175c  f9b60002          LDRSH    r0,[r6,#2]  ; bat
001760  28c8              CMP      r0,#0xc8
001762  dd04              BLE      |L1.5998|
;;;1406   			{
;;;1407   			kb_start[0]=0;
001764  7025              STRB     r5,[r4,#0]
;;;1408   			avar_bat_hndl(0,0);
001766  2100              MOVS     r1,#0
001768  4608              MOV      r0,r1
00176a  f7fffffe          BL       avar_bat_hndl
                  |L1.5998|
;;;1409   			}
;;;1410   		
;;;1411   		if(( (ibat[1]+ibat_[1]) < IKB ) && (kb_start[1]==1))
00176e  f9b80002          LDRSH    r0,[r8,#2]  ; ibat
001772  f9bb1002          LDRSH    r1,[r11,#2]  ; ibat_
001776  4408              ADD      r0,r0,r1
001778  f9b91000          LDRSH    r1,[r9,#0]  ; IKB
00177c  4288              CMP      r0,r1
00177e  da02              BGE      |L1.6022|
001780  7860              LDRB     r0,[r4,#1]  ; kb_start
001782  2801              CMP      r0,#1
001784  d022              BEQ      |L1.6092|
                  |L1.6022|
;;;1412   			{
;;;1413   			kb_cnt_2lev=10;     
;;;1414   			}
;;;1415   		else  if(bat[1]._Ub>200)
001786  f9b6004e          LDRSH    r0,[r6,#0x4e]  ; bat
00178a  28c8              CMP      r0,#0xc8
00178c  dd04              BLE      |L1.6040|
;;;1416   			{
;;;1417   			kb_start[1]=0;
00178e  7065              STRB     r5,[r4,#1]
;;;1418   			avar_bat_hndl(1,0);
001790  2100              MOVS     r1,#0
001792  2001              MOVS     r0,#1
001794  f7fffffe          BL       avar_bat_hndl
                  |L1.6040|
;;;1419   			}
;;;1420   #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;1421   		if(( (ibat_ips+ibat_ips_) < IKB ) && (kb_start_ips==1))
001798  f9ba004e          LDRSH    r0,[r10,#0x4e]  ; ibat_ips
00179c  f9ba1050          LDRSH    r1,[r10,#0x50]  ; ibat_ips_
0017a0  4408              ADD      r0,r0,r1
0017a2  e000              B        |L1.6054|
                  |L1.6052|
0017a4  e01b              B        |L1.6110|
                  |L1.6054|
0017a6  f9b91000          LDRSH    r1,[r9,#0]  ; IKB
0017aa  4288              CMP      r0,r1
0017ac  da09              BGE      |L1.6082|
0017ae  f89a000f          LDRB     r0,[r10,#0xf]  ; kb_start_ips
0017b2  2801              CMP      r0,#1
0017b4  d105              BNE      |L1.6082|
;;;1422   			{
;;;1423   			if(KB_ALGORITM==1)
0017b6  4832              LDR      r0,|L1.6272|
0017b8  8800              LDRH     r0,[r0,#0]  ; KB_ALGORITM
0017ba  2801              CMP      r0,#1
0017bc  d009              BEQ      |L1.6098|
;;;1424   				{
;;;1425   				avar_bat_ips_hndl(1);
;;;1426   				kb_start_ips=0;
;;;1427   				}
;;;1428   			else
;;;1429   				{
;;;1430   				kb_cnt_2lev=10;     
0017be  f8aa704a          STRH     r7,[r10,#0x4a]
                  |L1.6082|
;;;1431   				}
;;;1432   			}
;;;1433   #endif
;;;1434   		}	
;;;1435   
;;;1436   
;;;1437   	}
;;;1438   else if(kb_cnt_2lev)
;;;1439   	{
;;;1440   	kb_cnt_2lev--;
;;;1441   
;;;1442   	if(kb_cnt_2lev>5)mess_send(MESS2CNTRL_HNDL,PARAM_CNTRL_STAT_PLUS,200,15);
;;;1443   	else if(kb_cnt_2lev>0) mess_send(MESS2CNTRL_HNDL,PARAM_CNTRL_STAT_MINUS,200,15);
;;;1444   
;;;1445   
;;;1446   	if(kb_cnt_2lev==5)
;;;1447   		{
;;;1448   		ibat[0]=abs(bat[0]._Ib);
;;;1449   		ibat[1]=abs(bat[1]._Ib);
;;;1450   		ibat_ips=abs(Ib_ips_termokompensat);
;;;1451   		}
;;;1452   	
;;;1453   	if(kb_cnt_2lev==0)
;;;1454   		{
;;;1455   		ibat_[0]=abs(bat[0]._Ib);
;;;1456   		ibat_[1]=abs(bat[1]._Ib);
;;;1457   		ibat_ips_=abs(Ib_ips_termokompensat);
;;;1458   
;;;1459   		kb_full_ver=0;
;;;1460   
;;;1461   		if(( (ibat[0]+ibat_[0]) < IKB ) && (kb_start[0]==1))
;;;1462   			{
;;;1463   			kb_full_ver=1;  
;;;1464   			}
;;;1465   		else if(bat[0]._Ub>200)			
;;;1466   			{
;;;1467   			kb_start[0]=0;
;;;1468   			avar_bat_hndl(0,0);
;;;1469   			}
;;;1470   
;;;1471   		if(( (ibat[1]+ibat_[1]) < IKB ) && (kb_start[1]==1))
;;;1472   			{
;;;1473   			kb_full_ver=1;     
;;;1474   			}
;;;1475   		else	if(bat[1]._Ub>200)		
;;;1476   			{
;;;1477   			kb_start[1]=0;
;;;1478   			avar_bat_hndl(1,0);
;;;1479   			}
;;;1480   #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;1481   		if(( (ibat_ips+ibat_ips_) < IKB )  && (kb_start_ips==1))
;;;1482   			{
;;;1483   			if(KB_ALGORITM==2)
;;;1484   				{
;;;1485   				avar_bat_ips_hndl(1);
;;;1486   				kb_start_ips=0;
;;;1487   				}
;;;1488   			else
;;;1489   				{
;;;1490   				kb_full_ver=1;     
;;;1491   				}
;;;1492   			}
;;;1493   #endif
;;;1494   		}	
;;;1495   	}
;;;1496   
;;;1497   else if(kb_full_ver)
;;;1498   	{
;;;1499   	
;;;1500   	mess_send(MESS2CNTRL_HNDL,PARAM_CNTRL_STAT_STEP_DOWN,0,15);
;;;1501   
;;;1502   	if( abs(bat[0]._Ib) > IKB ) 
;;;1503   		{
;;;1504   		if(kb_start[0]==1)
;;;1505   			{
;;;1506   			kb_start[0]=0;
;;;1507   			avar_bat_hndl(0,0);
;;;1508   			}
;;;1509   		}
;;;1510   
;;;1511   	if( abs(bat[1]._Ib) > IKB ) 
;;;1512   		{
;;;1513   		if(kb_start[1]==1)
;;;1514   			{
;;;1515   			kb_start[1]=0;
;;;1516   			avar_bat_hndl(1,0);
;;;1517   			}
;;;1518   		}
;;;1519   #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;1520   	if( abs(Ib_ips_termokompensat) > IKB ) 
;;;1521   		{
;;;1522   		if(kb_start_ips==1)
;;;1523   			{
;;;1524   			kb_start_ips=0;
;;;1525   			avar_bat_ips_hndl(0);
;;;1526   			}
;;;1527   		}
;;;1528   #endif
;;;1529   
;;;1530   	if ((kb_start[0]==0) && (kb_start[1]==0) && (kb_start_ips==0)) 
;;;1531   		{
;;;1532   		kb_full_ver=0;
;;;1533   		}
;;;1534   
;;;1535   	if(( (mess_find(MESS2KB_HNDL))	&& (mess_data[0]==PARAM_CNTRL_IS_DOWN) ) || (load_U<(USIGN*10)) )
;;;1536   		{
;;;1537   		kb_full_ver=0;
;;;1538   		if((kb_start[0]==1)&&((load_I>(2*IKB)/10))&&(!(bat[0]._av&0x01))) avar_bat_hndl(0,1);
;;;1539   		if((kb_start[1]==1)&&((load_I>(2*IKB)/10))&&(!(bat[1]._av&0x01))) avar_bat_hndl(1,1);
;;;1540   #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;1541   		if((kb_start_ips==1)&&((load_I>(2*IKB)/10))&&(!(bat_ips._av&0x01))) avar_bat_ips_hndl(1);
;;;1542   #endif
;;;1543   		}
;;;1544   	}
;;;1545   
;;;1546   }
0017c2  e8bd9ff0          POP      {r4-r12,pc}
                  |L1.6086|
0017c6  f8aa704a          STRH     r7,[r10,#0x4a]        ;1403
0017ca  e7d0              B        |L1.5998|
                  |L1.6092|
0017cc  f8aa704a          STRH     r7,[r10,#0x4a]        ;1413
0017d0  e7e2              B        |L1.6040|
                  |L1.6098|
0017d2  2001              MOVS     r0,#1                 ;1425
0017d4  f7fffffe          BL       avar_bat_ips_hndl
0017d8  f88a500f          STRB     r5,[r10,#0xf]         ;1426
                  |L1.6108|
0017dc  e7f1              B        |L1.6082|
                  |L1.6110|
0017de  f9b1004a          LDRSH    r0,[r1,#0x4a]         ;1438  ; kb_cnt_2lev
0017e2  b348              CBZ      r0,|L1.6200|
0017e4  f1a00001          SUB      r0,r0,#1              ;1440
0017e8  b200              SXTH     r0,r0                 ;1440
0017ea  460f              MOV      r7,r1                 ;1440
0017ec  f8a1004a          STRH     r0,[r1,#0x4a]         ;1440
0017f0  2805              CMP      r0,#5                 ;1442
0017f2  dd06              BLE      |L1.6146|
0017f4  230f              MOVS     r3,#0xf               ;1442
0017f6  22c8              MOVS     r2,#0xc8              ;1442
0017f8  2164              MOVS     r1,#0x64              ;1442
0017fa  20e1              MOVS     r0,#0xe1              ;1442
0017fc  f7fffffe          BL       mess_send
001800  e007              B        |L1.6162|
                  |L1.6146|
001802  2800              CMP      r0,#0                 ;1443
001804  dd05              BLE      |L1.6162|
001806  230f              MOVS     r3,#0xf               ;1443
001808  22c8              MOVS     r2,#0xc8              ;1443
00180a  2169              MOVS     r1,#0x69              ;1443
00180c  20e1              MOVS     r0,#0xe1              ;1443
00180e  f7fffffe          BL       mess_send
                  |L1.6162|
001812  f8b7004a          LDRH     r0,[r7,#0x4a]         ;1446  ; kb_cnt_2lev
001816  2805              CMP      r0,#5                 ;1446
001818  d138              BNE      |L1.6284|
00181a  f9b60008          LDRSH    r0,[r6,#8]            ;1448  ; bat
00181e  f7fffffe          BL       abs
001822  f8a80000          STRH     r0,[r8,#0]            ;1448
001826  f9b60054          LDRSH    r0,[r6,#0x54]         ;1449  ; bat
00182a  f7fffffe          BL       abs
00182e  f8a80002          STRH     r0,[r8,#2]            ;1449
001832  f9ba0000          LDRSH    r0,[r10,#0]           ;1450  ; Ib_ips_termokompensat
001836  e025              B        |L1.6276|
                  |L1.6200|
001838  e08e              B        |L1.6488|
00183a  0000              DCW      0x0000
                  |L1.6204|
00183c  20202020          DCB      "    ",212,206,208,204,206,194,206,215,205,219,201,"    "
001840  d4ced0cc
001844  cec2ced7
001848  cddbc920
00184c  202020  
00184f  2000              DCB      " ",0
001851  00                DCB      0
001852  00                DCB      0
001853  00                DCB      0
                  |L1.6228|
                          DCD      ||area_number.25||
                  |L1.6232|
                          DCD      speedChrgBlckStat
                  |L1.6236|
                          DCD      TBAT
                  |L1.6240|
                          DCD      Ib_ips_termokompensat
                  |L1.6244|
                          DCD      bat
                  |L1.6248|
                          DCD      IKB
                  |L1.6252|
                          DCD      BAT_IS_ON
                  |L1.6256|
                          DCD      ips_bat_av_vzvod
                  |L1.6260|
                          DCD      bat_ips
                  |L1.6264|
                          DCD      net_av
                  |L1.6268|
                          DCD      sp_ch_stat
                  |L1.6272|
                          DCD      KB_ALGORITM
                  |L1.6276|
001884  f7fffffe          BL       abs
001888  f8a7004e          STRH     r0,[r7,#0x4e]         ;1450
                  |L1.6284|
00188c  48ff              LDR      r0,|L1.7308|
00188e  f8b0004a          LDRH     r0,[r0,#0x4a]         ;1453  ; kb_cnt_2lev
001892  2800              CMP      r0,#0                 ;1453
                  |L1.6292|
001894  d195              BNE      |L1.6082|
001896  f9b60008          LDRSH    r0,[r6,#8]            ;1455  ; bat
00189a  f7fffffe          BL       abs
00189e  4ffb              LDR      r7,|L1.7308|
0018a0  3784              ADDS     r7,r7,#0x84           ;1455
0018a2  8038              STRH     r0,[r7,#0]            ;1455
0018a4  f9b60054          LDRSH    r0,[r6,#0x54]         ;1456  ; bat
0018a8  f7fffffe          BL       abs
0018ac  8078              STRH     r0,[r7,#2]            ;1456
0018ae  f9ba0000          LDRSH    r0,[r10,#0]           ;1457  ; Ib_ips_termokompensat
0018b2  f7fffffe          BL       abs
0018b6  f8dfa3d4          LDR      r10,|L1.7308|
0018ba  f8aa0050          STRH     r0,[r10,#0x50]        ;1457
0018be  f88a500e          STRB     r5,[r10,#0xe]         ;1459
0018c2  f9b80000          LDRSH    r0,[r8,#0]            ;1461  ; ibat
0018c6  f9b71000          LDRSH    r1,[r7,#0]            ;1461  ; ibat_
0018ca  4408              ADD      r0,r0,r1              ;1461
0018cc  f9b91000          LDRSH    r1,[r9,#0]            ;1461  ; IKB
0018d0  4288              CMP      r0,r1                 ;1461
0018d2  da02              BGE      |L1.6362|
0018d4  7820              LDRB     r0,[r4,#0]            ;1461  ; kb_start
0018d6  2801              CMP      r0,#1                 ;1461
0018d8  d032              BEQ      |L1.6464|
                  |L1.6362|
0018da  f9b60002          LDRSH    r0,[r6,#2]            ;1465  ; bat
0018de  28c8              CMP      r0,#0xc8              ;1465
0018e0  dd04              BLE      |L1.6380|
0018e2  7025              STRB     r5,[r4,#0]            ;1467
0018e4  2100              MOVS     r1,#0                 ;1468
0018e6  4608              MOV      r0,r1                 ;1468
0018e8  f7fffffe          BL       avar_bat_hndl
                  |L1.6380|
0018ec  f9b80002          LDRSH    r0,[r8,#2]            ;1471  ; ibat
0018f0  f9b71002          LDRSH    r1,[r7,#2]            ;1471  ; ibat_
0018f4  4408              ADD      r0,r0,r1              ;1471
0018f6  f9b91000          LDRSH    r1,[r9,#0]            ;1471  ; IKB
0018fa  4288              CMP      r0,r1                 ;1471
0018fc  da02              BGE      |L1.6404|
0018fe  7860              LDRB     r0,[r4,#1]            ;1471  ; kb_start
001900  2801              CMP      r0,#1                 ;1471
001902  d020              BEQ      |L1.6470|
                  |L1.6404|
001904  f9b6004e          LDRSH    r0,[r6,#0x4e]         ;1475  ; bat
001908  28c8              CMP      r0,#0xc8              ;1475
00190a  dd04              BLE      |L1.6422|
00190c  7065              STRB     r5,[r4,#1]            ;1477
00190e  2100              MOVS     r1,#0                 ;1478
001910  2001              MOVS     r0,#1                 ;1478
001912  f7fffffe          BL       avar_bat_hndl
                  |L1.6422|
001916  f9ba004e          LDRSH    r0,[r10,#0x4e]        ;1481  ; ibat_ips
00191a  f9ba1050          LDRSH    r1,[r10,#0x50]        ;1481  ; ibat_ips_
00191e  4408              ADD      r0,r0,r1              ;1481
001920  f9b91000          LDRSH    r1,[r9,#0]            ;1481  ; IKB
001924  4288              CMP      r0,r1                 ;1481
001926  f6bfaf59          BGE      |L1.6108|
00192a  f89a000f          LDRB     r0,[r10,#0xf]         ;1481  ; kb_start_ips
00192e  2801              CMP      r0,#1                 ;1481
001930  d1b0              BNE      |L1.6292|
001932  48d7              LDR      r0,|L1.7312|
001934  8800              LDRH     r0,[r0,#0]            ;1483  ; KB_ALGORITM
001936  2802              CMP      r0,#2                 ;1483
001938  d008              BEQ      |L1.6476|
00193a  f88ab00e          STRB     r11,[r10,#0xe]        ;1490
                  |L1.6462|
00193e  e740              B        |L1.6082|
                  |L1.6464|
001940  f88ab00e          STRB     r11,[r10,#0xe]        ;1463
001944  e7d2              B        |L1.6380|
                  |L1.6470|
001946  f88ab00e          STRB     r11,[r10,#0xe]        ;1473
00194a  e7e4              B        |L1.6422|
                  |L1.6476|
00194c  2001              MOVS     r0,#1                 ;1485
00194e  f7fffffe          BL       avar_bat_ips_hndl
001952  f88a500f          STRB     r5,[r10,#0xf]         ;1486
001956  e734              B        |L1.6082|
                  |L1.6488|
001958  7b88              LDRB     r0,[r1,#0xe]          ;1497  ; kb_full_ver
00195a  4688              MOV      r8,r1                 ;1497
00195c  2800              CMP      r0,#0                 ;1497
00195e  d0ee              BEQ      |L1.6462|
001960  230f              MOVS     r3,#0xf               ;1500
001962  2200              MOVS     r2,#0                 ;1500
001964  216e              MOVS     r1,#0x6e              ;1500
001966  20e1              MOVS     r0,#0xe1              ;1500
001968  f7fffffe          BL       mess_send
00196c  f9b60008          LDRSH    r0,[r6,#8]            ;1502  ; bat
001970  f7fffffe          BL       abs
001974  f9b91000          LDRSH    r1,[r9,#0]            ;1502  ; IKB
001978  4288              CMP      r0,r1                 ;1502
00197a  dd07              BLE      |L1.6540|
00197c  7820              LDRB     r0,[r4,#0]            ;1504  ; kb_start
00197e  2801              CMP      r0,#1                 ;1504
001980  d104              BNE      |L1.6540|
001982  7025              STRB     r5,[r4,#0]            ;1506
001984  2100              MOVS     r1,#0                 ;1507
001986  4608              MOV      r0,r1                 ;1507
001988  f7fffffe          BL       avar_bat_hndl
                  |L1.6540|
00198c  f9b60054          LDRSH    r0,[r6,#0x54]         ;1511  ; bat
001990  f7fffffe          BL       abs
001994  f9b91000          LDRSH    r1,[r9,#0]            ;1511  ; IKB
001998  4288              CMP      r0,r1                 ;1511
00199a  dd06              BLE      |L1.6570|
00199c  7860              LDRB     r0,[r4,#1]            ;1513  ; kb_start
00199e  2801              CMP      r0,#1                 ;1513
0019a0  d103              BNE      |L1.6570|
0019a2  7065              STRB     r5,[r4,#1]            ;1515
0019a4  2100              MOVS     r1,#0                 ;1516
0019a6  f7fffffe          BL       avar_bat_hndl
                  |L1.6570|
0019aa  f9ba0000          LDRSH    r0,[r10,#0]           ;1520  ; Ib_ips_termokompensat
0019ae  f7fffffe          BL       abs
0019b2  f9b91000          LDRSH    r1,[r9,#0]            ;1520  ; IKB
0019b6  4288              CMP      r0,r1                 ;1520
0019b8  dd08              BLE      |L1.6604|
0019ba  f898000f          LDRB     r0,[r8,#0xf]          ;1522  ; kb_start_ips
0019be  2801              CMP      r0,#1                 ;1522
0019c0  d104              BNE      |L1.6604|
0019c2  f888500f          STRB     r5,[r8,#0xf]          ;1524
0019c6  2000              MOVS     r0,#0                 ;1525
0019c8  f7fffffe          BL       avar_bat_ips_hndl
                  |L1.6604|
0019cc  7820              LDRB     r0,[r4,#0]            ;1530  ; kb_start
0019ce  b930              CBNZ     r0,|L1.6622|
0019d0  7860              LDRB     r0,[r4,#1]            ;1530  ; kb_start
0019d2  b920              CBNZ     r0,|L1.6622|
0019d4  f898000f          LDRB     r0,[r8,#0xf]          ;1530  ; kb_start_ips
0019d8  b908              CBNZ     r0,|L1.6622|
0019da  f888500e          STRB     r5,[r8,#0xe]          ;1532
                  |L1.6622|
0019de  20e6              MOVS     r0,#0xe6              ;1535
0019e0  f7fffffe          BL       mess_find
0019e4  b118              CBZ      r0,|L1.6638|
0019e6  48ab              LDR      r0,|L1.7316|
0019e8  6800              LDR      r0,[r0,#0]            ;1535  ; mess_data
0019ea  28e7              CMP      r0,#0xe7              ;1535
0019ec  d00a              BEQ      |L1.6660|
                  |L1.6638|
0019ee  48aa              LDR      r0,|L1.7320|
0019f0  49aa              LDR      r1,|L1.7324|
0019f2  f9b00000          LDRSH    r0,[r0,#0]            ;1535  ; USIGN
0019f6  f9b11000          LDRSH    r1,[r1,#0]            ;1535  ; load_U
0019fa  eb000080          ADD      r0,r0,r0,LSL #2       ;1535
0019fe  ebb10f40          CMP      r1,r0,LSL #1          ;1535
                  |L1.6658|
001a02  da9c              BGE      |L1.6462|
                  |L1.6660|
001a04  f888500e          STRB     r5,[r8,#0xe]          ;1537
001a08  7820              LDRB     r0,[r4,#0]            ;1538  ; kb_start
001a0a  4da5              LDR      r5,|L1.7328|
001a0c  2801              CMP      r0,#1                 ;1538
001a0e  d10f              BNE      |L1.6704|
001a10  f9b90000          LDRSH    r0,[r9,#0]            ;1538  ; IKB
001a14  0040              LSLS     r0,r0,#1              ;1538
001a16  fb90f1f7          SDIV     r1,r0,r7              ;1538
001a1a  f9b50000          LDRSH    r0,[r5,#0]            ;1538  ; load_I
001a1e  4281              CMP      r1,r0                 ;1538
001a20  da06              BGE      |L1.6704|
001a22  f896003d          LDRB     r0,[r6,#0x3d]         ;1538  ; bat
001a26  07c0              LSLS     r0,r0,#31             ;1538
001a28  d102              BNE      |L1.6704|
001a2a  2101              MOVS     r1,#1                 ;1538
001a2c  f7fffffe          BL       avar_bat_hndl
                  |L1.6704|
001a30  7860              LDRB     r0,[r4,#1]            ;1539  ; kb_start
001a32  2801              CMP      r0,#1                 ;1539
001a34  d110              BNE      |L1.6744|
001a36  f9b90000          LDRSH    r0,[r9,#0]            ;1539  ; IKB
001a3a  f9b51000          LDRSH    r1,[r5,#0]            ;1539  ; load_I
001a3e  0040              LSLS     r0,r0,#1              ;1539
001a40  fb90f0f7          SDIV     r0,r0,r7              ;1539
001a44  4288              CMP      r0,r1                 ;1539
001a46  da07              BGE      |L1.6744|
001a48  f8960089          LDRB     r0,[r6,#0x89]         ;1539  ; bat
001a4c  07c0              LSLS     r0,r0,#31             ;1539
001a4e  d103              BNE      |L1.6744|
001a50  2101              MOVS     r1,#1                 ;1539
001a52  4608              MOV      r0,r1                 ;1539
001a54  f7fffffe          BL       avar_bat_hndl
                  |L1.6744|
001a58  f898000f          LDRB     r0,[r8,#0xf]          ;1541  ; kb_start_ips
001a5c  2801              CMP      r0,#1                 ;1541
                  |L1.6750|
001a5e  f47faebd          BNE      |L1.6108|
001a62  f9b90000          LDRSH    r0,[r9,#0]            ;1541  ; IKB
001a66  f9b51000          LDRSH    r1,[r5,#0]            ;1541  ; load_I
001a6a  0040              LSLS     r0,r0,#1              ;1541
001a6c  fb90f0f7          SDIV     r0,r0,r7              ;1541
001a70  4288              CMP      r0,r1                 ;1541
001a72  dac6              BGE      |L1.6658|
001a74  488b              LDR      r0,|L1.7332|
001a76  f890003d          LDRB     r0,[r0,#0x3d]         ;1541  ; bat_ips
001a7a  07c0              LSLS     r0,r0,#31             ;1541
001a7c  d1ef              BNE      |L1.6750|
001a7e  e8bd5ff0          POP      {r4-r12,lr}           ;1541
001a82  2001              MOVS     r0,#1                 ;1541
001a84  f7ffbffe          B.W      avar_bat_ips_hndl
;;;1547   
                          ENDP

                  samokalibr_hndl PROC
;;;1556   //-----------------------------------------------
;;;1557   void samokalibr_hndl(void)
001a88  4770              BX       lr
;;;1558   {
;;;1559   #ifndef UKU_220_IPS_TERMOKOMPENSAT
;;;1560   if(++samokalibr_cnt>=1800)samokalibr_cnt=0;
;;;1561   
;;;1562   if((samokalibr_cnt>=1785U)&&(vz2_stat==vz2sOFF))
;;;1563   	{
;;;1564   	mess_send(MESS2RELE_HNDL,PARAM_RELE_SAMOKALIBR,1,15);
;;;1565   	mess_send(MESS2IND_HNDL,PARAM_SAMOKALIBR,0,15);
;;;1566   	mess_send(MESS2MATEMAT,PARAM_SAMOKALIBR,0,15);
;;;1567   	} 
;;;1568   
;;;1569   if((samokalibr_cnt==1799U)&&(vz2_stat==vz2sOFF))
;;;1570   	{
;;;1571   	if((Kibat0[0]!=ad7705_buff_[0])&&(abs(bat[0]._Ib/10)<IZMAX)) lc640_write_int(ADR_KI0BAT[0],ad7705_buff_[0]);
;;;1572   	if((Kibat0[1]!=ad7705_buff_[1])&&(abs(bat[0]._Ib/10)<IZMAX)) lc640_write_int(ADR_KI0BAT[1],ad7705_buff_[1]);
;;;1573   	
;;;1574   	}
;;;1575   #endif	 	
;;;1576   }
;;;1577   
                          ENDP

                  ubat_old_drv PROC
;;;1580   //-----------------------------------------------
;;;1581   void ubat_old_drv(void)
001a8a  b510              PUSH     {r4,lr}
;;;1582   {        
;;;1583   bat_u_old_cnt++;
001a8c  4c86              LDR      r4,|L1.7336|
001a8e  8820              LDRH     r0,[r4,#0]  ; bat_u_old_cnt
001a90  f1000001          ADD      r0,r0,#1
001a94  8020              STRH     r0,[r4,#0]
;;;1584   gran_ring(&bat_u_old_cnt,0,8);
001a96  f04f0208          MOV      r2,#8
001a9a  f04f0100          MOV      r1,#0
001a9e  4620              MOV      r0,r4
001aa0  f7fffffe          BL       gran_ring
;;;1585   
;;;1586   bat[0]._u_old[bat_u_old_cnt]=bat[0]._Ub;
001aa4  4981              LDR      r1,|L1.7340|
001aa6  f9b40000          LDRSH    r0,[r4,#0]  ; bat_u_old_cnt
001aaa  eb010040          ADD      r0,r1,r0,LSL #1
001aae  884a              LDRH     r2,[r1,#2]  ; bat
001ab0  8402              STRH     r2,[r0,#0x20]
;;;1587   bat[1]._u_old[bat_u_old_cnt]=bat[1]._Ub;
001ab2  f8b1104e          LDRH     r1,[r1,#0x4e]  ; bat
001ab6  f8a0106c          STRH     r1,[r0,#0x6c]
;;;1588   }
001aba  bd10              POP      {r4,pc}
;;;1589   
                          ENDP

                  unet_drv PROC
;;;1590   //-----------------------------------------------
;;;1591   void unet_drv(void)
001abc  b570              PUSH     {r4-r6,lr}
;;;1592   {
;;;1593   if(net_U<UMN)
001abe  4d7c              LDR      r5,|L1.7344|
001ac0  487c              LDR      r0,|L1.7348|
;;;1594   	{
;;;1595   	if((unet_drv_cnt<10)&&(main_1Hz_cnt>15))
001ac2  4a7d              LDR      r2,|L1.7352|
001ac4  f9b51000          LDRSH    r1,[r5,#0]            ;1593  ; net_U
001ac8  f9b03000          LDRSH    r3,[r0,#0]            ;1593  ; UMN
001acc  f9920000          LDRSB    r0,[r2,#0]
001ad0  4299              CMP      r1,r3                 ;1593
001ad2  da1f              BGE      |L1.6932|
;;;1596   		{
;;;1597   		unet_drv_cnt++;
;;;1598   		if(unet_drv_cnt>=10)
;;;1599   			{
;;;1600   			net_Ustore=net_U;
001ad4  4c79              LDR      r4,|L1.7356|
001ad6  280a              CMP      r0,#0xa               ;1595
001ad8  da0f              BGE      |L1.6906|
001ada  4b79              LDR      r3,|L1.7360|
001adc  f9b33000          LDRSH    r3,[r3,#0]            ;1595  ; main_1Hz_cnt
001ae0  2b0f              CMP      r3,#0xf               ;1595
001ae2  dd0a              BLE      |L1.6906|
001ae4  f1000001          ADD      r0,r0,#1              ;1597
001ae8  b240              SXTB     r0,r0                 ;1597
001aea  7010              STRB     r0,[r2,#0]            ;1597
001aec  280a              CMP      r0,#0xa               ;1598
001aee  db09              BLT      |L1.6916|
001af0  8021              STRH     r1,[r4,#0]
;;;1601   		 	avar_unet_hndl(1);
001af2  2001              MOVS     r0,#1
001af4  f7fffffe          BL       avar_unet_hndl
001af8  e004              B        |L1.6916|
                  |L1.6906|
;;;1602   			
;;;1603   			}
;;;1604   		}
;;;1605   	else if(unet_drv_cnt>=10)unet_drv_cnt=10;
001afa  280a              CMP      r0,#0xa
001afc  db02              BLT      |L1.6916|
001afe  f04f000a          MOV      r0,#0xa
001b02  7010              STRB     r0,[r2,#0]
                  |L1.6916|
;;;1606   
;;;1607   	if(net_U<net_Ustore) net_Ustore=net_U;	
001b04  f9b50000          LDRSH    r0,[r5,#0]  ; net_U
001b08  f9b41000          LDRSH    r1,[r4,#0]  ; net_Ustore
001b0c  4288              CMP      r0,r1
001b0e  da00              BGE      |L1.6930|
001b10  8020              STRH     r0,[r4,#0]
                  |L1.6930|
;;;1608   	}
;;;1609   
;;;1610   else if(net_U>UMN)
;;;1611   	{                 
;;;1612   	if(unet_drv_cnt)
;;;1613   		{
;;;1614   		unet_drv_cnt--;
;;;1615   		if(unet_drv_cnt<=0)
;;;1616   			{
;;;1617   			avar_unet_hndl(0);
;;;1618   			}
;;;1619   		}
;;;1620   	else if(unet_drv_cnt<0)unet_drv_cnt=0;
;;;1621   	
;;;1622   	}
;;;1623   
;;;1624   }
001b12  bd70              POP      {r4-r6,pc}
                  |L1.6932|
001b14  ddfd              BLE      |L1.6930|
001b16  2800              CMP      r0,#0                 ;1612
001b18  d0fb              BEQ      |L1.6930|
001b1a  f1a00001          SUB      r0,r0,#1              ;1614
001b1e  b240              SXTB     r0,r0                 ;1614
001b20  7010              STRB     r0,[r2,#0]            ;1614
001b22  2800              CMP      r0,#0                 ;1615
001b24  dcf5              BGT      |L1.6930|
001b26  e8bd4070          POP      {r4-r6,lr}            ;1617
001b2a  2000              MOVS     r0,#0                 ;1617
001b2c  f7ffbffe          B.W      avar_unet_hndl
;;;1625   
                          ENDP

                  matemat PROC
;;;1626   //-----------------------------------------------
;;;1627   void matemat(void)
001b30  e92d5ffc          PUSH     {r2-r12,lr}
;;;1628   {
;;;1629   //signed short temp_SS;
;;;1630   signed long temp_SL/*,temp_SL_*/;
;;;1631   char /*temp,*/i;
;;;1632   //signed short temp_SS;
;;;1633   
;;;1634   #ifdef UKU_MGTS
;;;1635   //Ì‡ÔˇÊÂÌËÂ ÒÂÚË
;;;1636   temp_SL=(signed long)net_buff_;
;;;1637   temp_SL*=Kunet;
;;;1638   temp_SL/=110000L;
;;;1639   net_U=(signed short)temp_SL;
;;;1640   #endif
;;;1641   
;;;1642   #ifdef UKU_RSTKM
;;;1643   //Ì‡ÔˇÊÂÌËÂ ÒÂÚË
;;;1644   temp_SL=(signed long)net_buff_;
;;;1645   temp_SL*=Kunet;
;;;1646   temp_SL/=110000L;
;;;1647   net_U=(signed short)temp_SL;
;;;1648   #endif
;;;1649   
;;;1650   #ifdef UKU_3U
;;;1651   //Ì‡ÔˇÊÂÌËÂ ÒÂÚË
;;;1652   temp_SL=(signed long)net_buff_;
;;;1653   temp_SL*=Kunet;
;;;1654   temp_SL/=36000L;
;;;1655   net_U=(signed short)temp_SL;
;;;1656   #endif
;;;1657   
;;;1658   #ifdef UKU_6U
;;;1659   //Ì‡ÔˇÊÂÌËÂ ÒÂÚË
;;;1660   
;;;1661   if((AUSW_MAIN%10)||(AUSW_MAIN==2400)||(AUSW_MAIN==4800)||(AUSW_MAIN==6000))
;;;1662   	{
;;;1663   
;;;1664   	if(bps[11]._device==dNET_METR)
;;;1665   		{
;;;1666   		net_metr_buff_[0]=((signed short)bps[11]._buff[0])+(((signed short)bps[11]._buff[1])<<8);
;;;1667   		net_metr_buff_[1]=((signed short)bps[11]._buff[2])+(((signed short)bps[11]._buff[3])<<8);
;;;1668   		net_metr_buff_[2]=((signed short)bps[11]._buff[4])+(((signed short)bps[11]._buff[5])<<8);
;;;1669   
;;;1670   		temp_SL=(signed long)net_metr_buff_[0];
;;;1671   		temp_SL*=KunetA;
;;;1672   		temp_SL/=6000L;
;;;1673   		net_Ua=(signed short)temp_SL;
;;;1674   	
;;;1675   		temp_SL=(signed long)net_metr_buff_[1];
;;;1676   		temp_SL*=KunetB;
;;;1677   		temp_SL/=6000L;
;;;1678   		net_Ub=(signed short)temp_SL;
;;;1679   	
;;;1680   		temp_SL=(signed long)net_metr_buff_[2];
;;;1681   		temp_SL*=KunetC;
;;;1682   		temp_SL/=6000L;
;;;1683   		net_Uc=(signed short)temp_SL;
;;;1684   		}
;;;1685   	else
;;;1686   		{
;;;1687   		temp_SL=(signed long)net_buff_;
;;;1688   		temp_SL*=KunetA;
;;;1689   		temp_SL/=110000L;
;;;1690   		net_Ua=(signed short)temp_SL;
;;;1691   	
;;;1692   		temp_SL=(signed long)adc_buff_[3];
;;;1693   		temp_SL*=KunetB;
;;;1694   		temp_SL/=6000L;
;;;1695   		net_Ub=(signed short)temp_SL;
;;;1696   	
;;;1697   		temp_SL=(signed long)adc_buff_[10];
;;;1698   		temp_SL*=KunetC;
;;;1699   		temp_SL/=6000L;
;;;1700   		net_Uc=(signed short)temp_SL;
;;;1701   		}
;;;1702   
;;;1703   	net_U=net_Ua;
;;;1704   	if(net_Ub<net_U)net_U=net_Ub;
;;;1705   	if(net_Uc<net_U)net_U=net_Uc;
;;;1706   	}
;;;1707   else 
;;;1708   	{
;;;1709   	temp_SL=(signed long)net_buff_;
;;;1710   	temp_SL*=Kunet;
;;;1711   	temp_SL/=110000L;
;;;1712   	net_U=(signed short)temp_SL;
;;;1713   	}
;;;1714   
;;;1715   
;;;1716   
;;;1717   
;;;1718   #endif
;;;1719   
;;;1720   #ifdef UKU_GLONASS
;;;1721   //Ì‡ÔˇÊÂÌËÂ ÒÂÚË
;;;1722   temp_SL=(signed long)net_buff_;
;;;1723   temp_SL*=Kunet;
;;;1724   temp_SL/=110000L;
;;;1725   net_U=(signed short)temp_SL;
;;;1726   #endif
;;;1727   
;;;1728   #ifdef UKU_KONTUR
;;;1729   //Ì‡ÔˇÊÂÌËÂ ÒÂÚË
;;;1730   temp_SL=(signed long)net_buff_;
;;;1731   temp_SL*=Kunet;
;;;1732   temp_SL/=110000L;
;;;1733   net_U=(signed short)temp_SL;
;;;1734   #endif
;;;1735   
;;;1736   #ifdef IPS_SGEP_GAZPROM
;;;1737   //Ì‡ÔˇÊÂÌËÂ ÒÂÚË
;;;1738   temp_SL=(signed long)net_buff_;
;;;1739   temp_SL*=Kunet;
;;;1740   temp_SL/=110000L;
;;;1741   net_U=(signed short)temp_SL;
;;;1742   #endif
;;;1743   
;;;1744   #ifdef UKU_220_V2
;;;1745   //Ì‡ÔˇÊÂÌËÂ ÒÂÚË
;;;1746   
;;;1747   if(AUSW_MAIN==22033)
;;;1748   	{
;;;1749   	temp_SL=(signed long)net_buff_;
;;;1750   	temp_SL*=KunetA;
;;;1751   	temp_SL/=6000L;
;;;1752   	net_Ua=(signed short)temp_SL;
;;;1753   
;;;1754   	temp_SL=(signed long)adc_buff_[3];
;;;1755   	temp_SL*=KunetB;
;;;1756   	temp_SL/=6000L;
;;;1757   	net_Ub=(signed short)temp_SL;
;;;1758   
;;;1759   	temp_SL=(signed long)adc_buff_[10];
;;;1760   	temp_SL*=KunetC;
;;;1761   	temp_SL/=6000L;
;;;1762   	net_Uc=(signed short)temp_SL;
;;;1763   
;;;1764   	net_U=net_Ua;
;;;1765   	if(net_Ub<net_U)net_U=net_Ub;
;;;1766   	if(net_Uc<net_U)net_U=net_Uc;
;;;1767   	}
;;;1768   else
;;;1769   	{
;;;1770   	temp_SL=(signed long)net_buff_;
;;;1771   	temp_SL*=Kunet;
;;;1772   	temp_SL/=5000L;
;;;1773   	net_U=(signed short)temp_SL;
;;;1774   	}
;;;1775   #endif
;;;1776   
;;;1777   
;;;1778   #ifdef UKU_220
;;;1779   //Ì‡ÔˇÊÂÌËÂ ÒÂÚË
;;;1780   
;;;1781   if(AUSW_MAIN==22035)
;;;1782   	{
;;;1783   	temp_SL=(signed long)net_buff_;
;;;1784   	temp_SL*=KunetA;
;;;1785   	temp_SL/=6000L;
;;;1786   	net_Ua=(signed short)temp_SL;
;;;1787   
;;;1788   	temp_SL=(signed long)adc_buff_[3];
;;;1789   	temp_SL*=KunetB;
;;;1790   	temp_SL/=6000L;
;;;1791   	net_Ub=(signed short)temp_SL;
;;;1792   
;;;1793   	temp_SL=(signed long)adc_buff_[10];
;;;1794   	temp_SL*=KunetC;
;;;1795   	temp_SL/=6000L;
;;;1796   	net_Uc=(signed short)temp_SL;
;;;1797   
;;;1798   	net_U=net_Ua;
;;;1799   	if(net_Ub<net_U)net_U=net_Ub;
;;;1800   	if(net_Uc<net_U)net_U=net_Uc;
;;;1801   	}
;;;1802   else
;;;1803   	{
;;;1804   	temp_SL=(signed long)net_buff_;
;;;1805   	temp_SL*=Kunet;
;;;1806   	#ifdef _ACDC_
;;;1807   	temp_SL/=500L;
;;;1808   	#else
;;;1809   	temp_SL/=5000L;
;;;1810   	#endif
;;;1811   	net_U=(signed short)temp_SL;
;;;1812   	
;;;1813   	}
;;;1814   #endif
;;;1815   
;;;1816   #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;1817   //Ì‡ÔˇÊÂÌËÂ ÒÂÚË
;;;1818   
;;;1819   
;;;1820   	if(bps[11]._device==dNET_METR)
001b34  4863              LDR      r0,|L1.7364|
;;;1821   		{
;;;1822   		net_metr_buff_[0]=((signed short)bps[11]._buff[0])+(((signed short)bps[11]._buff[1])<<8);
;;;1823   		net_metr_buff_[1]=((signed short)bps[11]._buff[2])+(((signed short)bps[11]._buff[3])<<8);
;;;1824   		net_metr_buff_[2]=((signed short)bps[11]._buff[4])+(((signed short)bps[11]._buff[5])<<8);
;;;1825   
;;;1826   		temp_SL=(signed long)net_metr_buff_[2];
;;;1827   		temp_SL*=KunetA;
001b36  4a64              LDR      r2,|L1.7368|
;;;1828   		temp_SL/=6000L;
;;;1829   		net_Ua=(signed short)temp_SL;
;;;1830   	
;;;1831   		temp_SL=(signed long)net_metr_buff_[1];
;;;1832   		temp_SL*=KunetB;
001b38  4965              LDR      r1,|L1.7376|
001b3a  f89003f4          LDRB     r0,[r0,#0x3f4]        ;1820  ; bps
;;;1833   		temp_SL/=6000L;
;;;1834   		net_Ub=(signed short)temp_SL;
;;;1835   	
;;;1836   		temp_SL=(signed long)net_metr_buff_[0];
;;;1837   		temp_SL*=KunetC;
001b3e  4b65              LDR      r3,|L1.7380|
001b40  9001              STR      r0,[sp,#4]            ;1827
001b42  f8dfc188          LDR      r12,|L1.7372|
001b46  f9b29000          LDRSH    r9,[r2,#0]            ;1827
001b4a  f9b1b000          LDRSH    r11,[r1,#0]           ;1832
001b4e  f9b3a000          LDRSH    r10,[r3,#0]
001b52  4d61              LDR      r5,|L1.7384|
;;;1838   		temp_SL/=6000L;
;;;1839   		net_Uc=(signed short)temp_SL;
001b54  4c61              LDR      r4,|L1.7388|
;;;1840   
;;;1841   		net_F3=((signed short)bps[11]._buff[6])+(((signed short)bps[11]._buff[7])<<8);
;;;1842   
;;;1843   		net_U=net_Ua;
;;;1844   		if(net_Ub<net_U)net_U=net_Ub;
;;;1845   		if(net_Uc<net_U)net_U=net_Uc;
;;;1846   		}
;;;1847   	  else if(AUSW_MAIN==22033)
;;;1848   	{
;;;1849   	temp_SL=(signed long)net_buff_;
001b56  4f4d              LDR      r7,|L1.7308|
001b58  f2456611          MOV      r6,#0x5611            ;1847
001b5c  2807              CMP      r0,#7                 ;1820
001b5e  d036              BEQ      |L1.7118|
001b60  4639              MOV      r1,r7
;;;1850   	temp_SL*=KunetA;
;;;1851   	temp_SL/=4000L;
;;;1852   	net_Ua=(signed short)temp_SL;
;;;1853   
;;;1854   	temp_SL=(signed long)adc_buff_[3];
001b62  4b60              LDR      r3,|L1.7396|
001b64  8dca              LDRH     r2,[r1,#0x2e]         ;1849
001b66  4958              LDR      r1,|L1.7368|
001b68  f8df8164          LDR      r8,|L1.7376|
001b6c  f8df9164          LDR      r9,|L1.7380|
001b70  f9b11000          LDRSH    r1,[r1,#0]            ;1827
001b74  f9b88000          LDRSH    r8,[r8,#0]            ;1832
001b78  434a              MULS     r2,r1,r2              ;1850
001b7a  f9b31006          LDRSH    r1,[r3,#6]
;;;1855   	temp_SL*=KunetB;
;;;1856   	temp_SL/=6000L;
;;;1857   	net_Ub=(signed short)temp_SL;
;;;1858   
;;;1859   	temp_SL=(signed long)adc_buff_[10];
001b7e  f9b33014          LDRSH    r3,[r3,#0x14]
001b82  fb01f108          MUL      r1,r1,r8              ;1855
001b86  f2417870          MOV      r8,#0x1770            ;1828
001b8a  f9b99000          LDRSH    r9,[r9,#0]            ;1837
001b8e  fb91f1f8          SDIV     r1,r1,r8              ;1856
;;;1860   	temp_SL*=KunetC;
001b92  fb03f309          MUL      r3,r3,r9
;;;1861   	temp_SL/=6000L;
001b96  fb93f3f8          SDIV     r3,r3,r8
001b9a  4851              LDR      r0,|L1.7392|
001b9c  b209              SXTH     r1,r1                 ;1857
;;;1862   	net_Uc=(signed short)temp_SL;
001b9e  b21b              SXTH     r3,r3
001ba0  8800              LDRH     r0,[r0,#0]            ;1847  ; AUSW_MAIN
001ba2  42b0              CMP      r0,r6                 ;1847
001ba4  d154              BNE      |L1.7248|
001ba6  f44f607a          MOV      r0,#0xfa0             ;1851
001baa  fb92f0f0          SDIV     r0,r2,r0              ;1851
001bae  b200              SXTH     r0,r0                 ;1852
001bb0  f8ac0000          STRH     r0,[r12,#0]           ;1852
001bb4  8029              STRH     r1,[r5,#0]            ;1857
001bb6  8023              STRH     r3,[r4,#0]
;;;1863   
;;;1864   	net_U=net_Ua;
001bb8  4a3d              LDR      r2,|L1.7344|
001bba  8010              STRH     r0,[r2,#0]
;;;1865   	if(net_Ub<net_U)net_U=net_Ub;
001bbc  4281              CMP      r1,r0
001bbe  da00              BGE      |L1.7106|
001bc0  8011              STRH     r1,[r2,#0]
                  |L1.7106|
;;;1866   	if(net_Uc<net_U)net_U=net_Uc;
001bc2  f9b20000          LDRSH    r0,[r2,#0]  ; net_U
001bc6  4283              CMP      r3,r0
001bc8  da00              BGE      |L1.7116|
001bca  8013              STRH     r3,[r2,#0]
                  |L1.7116|
001bcc  e0b1              B        |L1.7474|
                  |L1.7118|
001bce  4846              LDR      r0,|L1.7400|
001bd0  4b2e              LDR      r3,|L1.7308|
001bd2  7801              LDRB     r1,[r0,#0]            ;1822  ; bps
001bd4  7842              LDRB     r2,[r0,#1]            ;1822  ; bps
001bd6  f10303c8          ADD      r3,r3,#0xc8           ;1822
001bda  eb012102          ADD      r1,r1,r2,LSL #8       ;1822
001bde  fa1ff881          UXTH     r8,r1                 ;1822
001be2  f8a38000          STRH     r8,[r3,#0]            ;1822
001be6  7881              LDRB     r1,[r0,#2]            ;1823  ; bps
001be8  78c2              LDRB     r2,[r0,#3]            ;1823  ; bps
001bea  eb012102          ADD      r1,r1,r2,LSL #8       ;1823
001bee  b28a              UXTH     r2,r1                 ;1823
001bf0  805a              STRH     r2,[r3,#2]            ;1823
001bf2  7901              LDRB     r1,[r0,#4]            ;1824  ; bps
001bf4  f890e005          LDRB     lr,[r0,#5]            ;1824  ; bps
001bf8  eb01210e          ADD      r1,r1,lr,LSL #8       ;1824
001bfc  b289              UXTH     r1,r1                 ;1824
001bfe  8099              STRH     r1,[r3,#4]            ;1824
001c00  fb01f109          MUL      r1,r1,r9              ;1827
001c04  f2417370          MOV      r3,#0x1770            ;1828
001c08  fb91f1f3          SDIV     r1,r1,r3              ;1828
001c0c  fa0ff981          SXTH     r9,r1                 ;1829
001c10  f8ac9000          STRH     r9,[r12,#0]           ;1829
001c14  fb02f20b          MUL      r2,r2,r11             ;1832
001c18  fb92f1f3          SDIV     r1,r2,r3              ;1833
001c1c  b209              SXTH     r1,r1                 ;1834
001c1e  8029              STRH     r1,[r5,#0]            ;1834
001c20  fb08f80a          MUL      r8,r8,r10             ;1837
001c24  fb98f2f3          SDIV     r2,r8,r3              ;1838
001c28  b212              SXTH     r2,r2                 ;1839
001c2a  8022              STRH     r2,[r4,#0]            ;1839
001c2c  7983              LDRB     r3,[r0,#6]            ;1841  ; bps
001c2e  79c0              LDRB     r0,[r0,#7]            ;1841  ; bps
001c30  eb032000          ADD      r0,r3,r0,LSL #8       ;1841
001c34  4b2d              LDR      r3,|L1.7404|
001c36  8018              STRH     r0,[r3,#0]            ;1841
001c38  481d              LDR      r0,|L1.7344|
001c3a  f8a09000          STRH     r9,[r0,#0]            ;1843
001c3e  4549              CMP      r1,r9                 ;1844
001c40  da00              BGE      |L1.7236|
001c42  8001              STRH     r1,[r0,#0]            ;1844
                  |L1.7236|
001c44  f9b01000          LDRSH    r1,[r0,#0]            ;1845  ; net_U
001c48  428a              CMP      r2,r1                 ;1845
001c4a  da72              BGE      |L1.7474|
001c4c  8002              STRH     r2,[r0,#0]            ;1845
001c4e  e070              B        |L1.7474|
                  |L1.7248|
;;;1867   	}
;;;1868   else if((AUSW_MAIN==22063)||(AUSW_MAIN==22023)||(AUSW_MAIN==22043)||(AUSW_MAIN==22044)||(AUSW_MAIN==22018))
001c50  f5a048ac          SUB      r8,r0,#0x5600
001c54  f1b8082f          SUBS     r8,r8,#0x2f
001c58  d00b              BEQ      |L1.7282|
001c5a  f1180828          ADDS     r8,r8,#0x28
001c5e  d008              BEQ      |L1.7282|
001c60  f1b80814          SUBS     r8,r8,#0x14
001c64  d005              BEQ      |L1.7282|
001c66  f1b80801          SUBS     r8,r8,#1
001c6a  d002              BEQ      |L1.7282|
001c6c  f118081a          ADDS     r8,r8,#0x1a
001c70  d146              BNE      |L1.7424|
                  |L1.7282|
;;;1869   	{
;;;1870   	temp_SL=(signed long)net_buff_;
;;;1871   	temp_SL*=KunetA;
;;;1872   	temp_SL/=40000L;
001c72  f6494040          MOV      r0,#0x9c40
001c76  fb92f0f0          SDIV     r0,r2,r0
;;;1873   	net_Ua=(signed short)temp_SL;
001c7a  b200              SXTH     r0,r0
001c7c  f8ac0000          STRH     r0,[r12,#0]
;;;1874   
;;;1875   	temp_SL=(signed long)adc_buff_[3];
;;;1876   	temp_SL*=KunetB;
;;;1877   	temp_SL/=6000L;
;;;1878   	net_Ub=(signed short)temp_SL;
001c80  8029              STRH     r1,[r5,#0]
;;;1879   
;;;1880   	temp_SL=(signed long)adc_buff_[10];
;;;1881   	temp_SL*=KunetC;
;;;1882   	temp_SL/=6000L;
;;;1883   	net_Uc=(signed short)temp_SL;
001c82  8023              STRH     r3,[r4,#0]
;;;1884   
;;;1885   	net_U=net_Ua;
001c84  4a0a              LDR      r2,|L1.7344|
001c86  8010              STRH     r0,[r2,#0]
;;;1886   	if(net_Ub<net_U)net_U=net_Ub;
001c88  4281              CMP      r1,r0
001c8a  e031              B        |L1.7408|
                  |L1.7308|
                          DCD      ||area_number.25||
                  |L1.7312|
                          DCD      KB_ALGORITM
                  |L1.7316|
                          DCD      mess_data
                  |L1.7320|
                          DCD      USIGN
                  |L1.7324|
                          DCD      load_U
                  |L1.7328|
                          DCD      load_I
                  |L1.7332|
                          DCD      bat_ips
                  |L1.7336|
                          DCD      bat_u_old_cnt
                  |L1.7340|
                          DCD      bat
                  |L1.7344|
                          DCD      net_U
                  |L1.7348|
                          DCD      UMN
                  |L1.7352|
                          DCD      unet_drv_cnt
                  |L1.7356|
                          DCD      net_Ustore
                  |L1.7360|
                          DCD      main_1Hz_cnt
                  |L1.7364|
                          DCD      bps
                  |L1.7368|
                          DCD      KunetA
                  |L1.7372|
                          DCD      net_Ua
                  |L1.7376|
                          DCD      KunetB
                  |L1.7380|
                          DCD      KunetC
                  |L1.7384|
                          DCD      net_Ub
                  |L1.7388|
                          DCD      net_Uc
                  |L1.7392|
                          DCD      AUSW_MAIN
                  |L1.7396|
                          DCD      ||.bss||+0x400
                  |L1.7400|
                          DCD      bps+0x3fa
                  |L1.7404|
                          DCD      net_F3
                  |L1.7408|
001cf0  da00              BGE      |L1.7412|
001cf2  8011              STRH     r1,[r2,#0]
                  |L1.7412|
;;;1887   	if(net_Uc<net_U)net_U=net_Uc;
001cf4  f9b20000          LDRSH    r0,[r2,#0]  ; net_U
001cf8  4283              CMP      r3,r0
001cfa  da1a              BGE      |L1.7474|
001cfc  8013              STRH     r3,[r2,#0]
001cfe  e018              B        |L1.7474|
                  |L1.7424|
;;;1888   	}
;;;1889   else	if((AUSW_MAIN==22010)||(AUSW_MAIN==22011) )
;;;1890   	{
;;;1891   	temp_SL=(signed long)net_buff_;
;;;1892   	temp_SL*=Kunet;
001d00  49ff              LDR      r1,|L1.8448|
001d02  f5a043aa          SUB      r3,r0,#0x5500         ;1889
001d06  f9b12000          LDRSH    r2,[r1,#0]
001d0a  49fe              LDR      r1,|L1.8452|
001d0c  8dc9              LDRH     r1,[r1,#0x2e]         ;1849
001d0e  4351              MULS     r1,r2,r1
001d10  3bfa              SUBS     r3,r3,#0xfa           ;1889
001d12  d001              BEQ      |L1.7448|
001d14  1e5a              SUBS     r2,r3,#1              ;1889
001d16  d106              BNE      |L1.7462|
                  |L1.7448|
;;;1893   	temp_SL/=35000L;
001d18  f64800b8          MOV      r0,#0x88b8
001d1c  fb91f0f0          SDIV     r0,r1,r0
;;;1894   	net_U=(signed short)temp_SL;
001d20  49f9              LDR      r1,|L1.8456|
001d22  8008              STRH     r0,[r1,#0]
001d24  e005              B        |L1.7474|
                  |L1.7462|
;;;1895   	
;;;1896   	}
;;;1897   else
;;;1898   	{
;;;1899   	temp_SL=(signed long)net_buff_;
;;;1900   	temp_SL*=Kunet;
;;;1901   	#ifdef _ACDC_
;;;1902   	temp_SL/=500L;
001d26  f44f70fa          MOV      r0,#0x1f4
001d2a  fb91f0f0          SDIV     r0,r1,r0
;;;1903   	#else
;;;1904   	temp_SL/=5000L;
;;;1905   	#endif
;;;1906   	net_U=(signed short)temp_SL;
001d2e  49f6              LDR      r1,|L1.8456|
001d30  8008              STRH     r0,[r1,#0]
                  |L1.7474|
;;;1907   	
;;;1908   	}
;;;1909   if(bps[11]._device!=dNET_METR) net_F3=net_F;
001d32  9801              LDR      r0,[sp,#4]
001d34  2807              CMP      r0,#7
001d36  d003              BEQ      |L1.7488|
001d38  48f4              LDR      r0,|L1.8460|
001d3a  8801              LDRH     r1,[r0,#0]  ; net_F
001d3c  48f4              LDR      r0,|L1.8464|
001d3e  8001              STRH     r1,[r0,#0]
                  |L1.7488|
;;;1910   #endif
;;;1911   
;;;1912   #ifdef UKU_TELECORE2015
;;;1913   //Ì‡ÔˇÊÂÌËÂ ÒÂÚË
;;;1914   temp_SL=(signed long)net_buff_;
;;;1915   temp_SL*=Kunet;
;;;1916   temp_SL/=110000L;
;;;1917   net_U=(signed short)temp_SL;
;;;1918   #endif
;;;1919   
;;;1920   #ifdef UKU_TELECORE2017
;;;1921   //Ì‡ÔˇÊÂÌËÂ ÒÂÚË
;;;1922   temp_SL=(signed long)net_buff_;
;;;1923   temp_SL*=Kunet;
;;;1924   temp_SL/=110000L;
;;;1925   net_U=(signed short)temp_SL;
;;;1926   #endif
;;;1927   
;;;1928   //Õ‡ÔˇÊÂÌËˇ ·‡Ú‡ÂÈ
;;;1929   temp_SL=(signed long)adc_buff_[0];
001d40  f8df83d0          LDR      r8,|L1.8468|
001d44  f9b82000          LDRSH    r2,[r8,#0]  ; adc_buff_
;;;1930   temp_SL*=Kubat[0];
001d48  49f3              LDR      r1,|L1.8472|
001d4a  f9b10000          LDRSH    r0,[r1,#0]  ; Kubat
001d4e  4350              MULS     r0,r2,r0
;;;1931   temp_SL/=2000L;
001d50  f44f65fa          MOV      r5,#0x7d0
001d54  fb90f0f5          SDIV     r0,r0,r5
;;;1932   bat[0]._Ub=(signed short)temp_SL;
001d58  4cf0              LDR      r4,|L1.8476|
001d5a  8060              STRH     r0,[r4,#2]
;;;1933   
;;;1934   #ifdef UKU_220
;;;1935   //Õ‡ÔˇÊÂÌËˇ ·‡Ú‡ÂÈ
;;;1936   temp_SL=(signed long)adc_buff_[0];
;;;1937   temp_SL*=Kubat[0];
;;;1938   temp_SL/=400L;
;;;1939   bat[0]._Ub=(signed short)temp_SL;
;;;1940   #endif
;;;1941   
;;;1942   #ifdef UKU_220_V2
;;;1943   //Õ‡ÔˇÊÂÌËˇ ·‡Ú‡ÂÈ
;;;1944   temp_SL=(signed long)adc_buff_[0];
;;;1945   temp_SL*=Kubat[0];
;;;1946   temp_SL/=400L;
;;;1947   bat[0]._Ub=(signed short)temp_SL;
;;;1948   #endif
;;;1949   
;;;1950   temp_SL=(signed long)adc_buff_[4];
001d5c  f9b83008          LDRSH    r3,[r8,#8]  ; adc_buff_
;;;1951   temp_SL*=Kubatm[0];
001d60  4aef              LDR      r2,|L1.8480|
001d62  f9b20000          LDRSH    r0,[r2,#0]  ; Kubatm
001d66  fb00f003          MUL      r0,r0,r3
;;;1952   temp_SL/=700L;
001d6a  f44f732f          MOV      r3,#0x2bc
001d6e  fb90f0f3          SDIV     r0,r0,r3
;;;1953   bat[0]._Ubm=(signed short)temp_SL;
001d72  80a0              STRH     r0,[r4,#4]
;;;1954   
;;;1955   #ifdef UKU_KONTUR
;;;1956   temp_SL=(signed long)adc_buff_[4];
;;;1957   temp_SL*=Kubatm[0];
;;;1958   temp_SL/=2000L;
;;;1959   bat[0]._Ubm=(signed short)temp_SL;
;;;1960   #endif
;;;1961   
;;;1962   temp_SL=(signed long)adc_buff_[12];
001d74  f9b80018          LDRSH    r0,[r8,#0x18]  ; adc_buff_
;;;1963   temp_SL*=Kubat[1];
001d78  f9b11002          LDRSH    r1,[r1,#2]  ; Kubat
001d7c  fb01f100          MUL      r1,r1,r0
;;;1964   temp_SL/=2000L;
001d80  fb91f0f5          SDIV     r0,r1,r5
;;;1965   bat[1]._Ub=(signed short)temp_SL;
001d84  f8a4004e          STRH     r0,[r4,#0x4e]
;;;1966   
;;;1967   #ifdef UKU_220
;;;1968   temp_SL=(signed long)adc_buff_[12];
;;;1969   temp_SL*=Kubat[1];
;;;1970   temp_SL/=400L;
;;;1971   bat[1]._Ub=(signed short)temp_SL;
;;;1972   #endif
;;;1973   
;;;1974   #ifdef UKU_220_V2
;;;1975   temp_SL=(signed long)adc_buff_[12];
;;;1976   temp_SL*=Kubat[1];
;;;1977   temp_SL/=400L;
;;;1978   bat[1]._Ub=(signed short)temp_SL;
;;;1979   #endif
;;;1980   
;;;1981   temp_SL=(signed long)adc_buff_[1];
001d88  f9b81002          LDRSH    r1,[r8,#2]  ; adc_buff_
;;;1982   temp_SL*=Kubatm[1];
001d8c  f9b20002          LDRSH    r0,[r2,#2]  ; Kubatm
001d90  fb00f001          MUL      r0,r0,r1
;;;1983   temp_SL/=700L;
001d94  fb90f0f3          SDIV     r0,r0,r3
;;;1984   bat[1]._Ubm=(signed short)temp_SL;
001d98  f8a40050          STRH     r0,[r4,#0x50]
;;;1985   #ifdef UKU_KONTUR
;;;1986   temp_SL=(signed long)adc_buff_[1];
;;;1987   temp_SL*=Kubatm[1];
;;;1988   temp_SL/=2000L;
;;;1989   bat[1]._Ubm=(signed short)temp_SL;
;;;1990   #endif
;;;1991   
;;;1992   #ifdef UKU_TELECORE2015
;;;1993   temp_SL=(signed long)adc_buff_[2];
;;;1994   temp_SL*=Kubat[0];
;;;1995   temp_SL/=2000L;
;;;1996   bat[0]._Ub=(signed short)temp_SL;
;;;1997   #endif
;;;1998   
;;;1999   /*
;;;2000   //“ÓÍË ·‡Ú‡ÂÈ
;;;2001   if(!mess_find_unvol(MESS2MATEMAT))
;;;2002   	{
;;;2003   	temp_SL=(signed long)ad7705_buff_[0];
;;;2004   	temp_SL-=(signed long)Kibat0[0];
;;;2005   	temp_SL*=(signed long)Kibat1[0];
;;;2006   	if((AUSW_MAIN==24120)||(AUSW_MAIN==24210))temp_SL/=300L;
;;;2007   	else temp_SL/=1000L;
;;;2008   	bat[0]._Ib=(signed short)temp_SL;
;;;2009   
;;;2010   	temp_SL=(signed long)ad7705_buff_[1];
;;;2011   	temp_SL-=(signed long)Kibat0[1];
;;;2012   	temp_SL*=(signed long)Kibat1[1];
;;;2013   	if((AUSW_MAIN==24120)||(AUSW_MAIN==24210))temp_SL/=300L;
;;;2014   	else temp_SL/=1000L;
;;;2015   	bat[1]._Ib=(signed short)temp_SL;
;;;2016   	}
;;;2017   */
;;;2018   
;;;2019   
;;;2020   //“ÓÍË ·‡Ú‡ÂÈ
;;;2021   if(!mess_find_unvol(MESS2MATEMAT))
001d9c  f04f00dc          MOV      r0,#0xdc
001da0  f7fffffe          BL       mess_find_unvol
;;;2022   	{
;;;2023   	temp_SL=(signed long)ad7705_buff_[0];
;;;2024   	temp_SL-=(signed long)Kibat0[0];
;;;2025   	temp_SL*=(signed long)Kibat1[0];
;;;2026   	if((AUSW_MAIN==24120)||(AUSW_MAIN==24210))temp_SL/=300L;
;;;2027   	else if((AUSW_MAIN==22010)||(AUSW_MAIN==22035)||(AUSW_MAIN==22033))temp_SL/=2000L;
001da4  f2456a13          MOV      r10,#0x5613
001da8  bbe8              CBNZ     r0,|L1.7718|
001daa  f8df9378          LDR      r9,|L1.8484|
001dae  f8b90000          LDRH     r0,[r9,#0]            ;2023  ; ad7705_buff_
001db2  f8dfb374          LDR      r11,|L1.8488|
001db6  f8bb1000          LDRH     r1,[r11,#0]           ;2024  ; Kibat0
001dba  eba00001          SUB      r0,r0,r1              ;2024
001dbe  4adb              LDR      r2,|L1.8492|
001dc0  f9b21000          LDRSH    r1,[r2,#0]            ;2025  ; Kibat1
001dc4  fb01f100          MUL      r1,r1,r0              ;2025
001dc8  48d9              LDR      r0,|L1.8496|
001dca  f6456338          MOV      r3,#0x5e38            ;2026
001dce  f6456c92          MOV      r12,#0x5e92           ;2026
001dd2  8800              LDRH     r0,[r0,#0]            ;2026  ; AUSW_MAIN
001dd4  4298              CMP      r0,r3                 ;2026
001dd6  d001              BEQ      |L1.7644|
001dd8  4560              CMP      r0,r12                ;2026
001dda  d104              BNE      |L1.7654|
                  |L1.7644|
001ddc  f44f7e96          MOV      lr,#0x12c             ;2026
001de0  fb91f1fe          SDIV     r1,r1,lr              ;2026
001de4  e00f              B        |L1.7686|
                  |L1.7654|
001de6  f5a04ea8          SUB      lr,r0,#0x5400
001dea  f5be7efd          SUBS     lr,lr,#0x1fa
001dee  d003              BEQ      |L1.7672|
001df0  4550              CMP      r0,r10
001df2  d001              BEQ      |L1.7672|
001df4  42b0              CMP      r0,r6
001df6  d102              BNE      |L1.7678|
                  |L1.7672|
001df8  fb91f1f5          SDIV     r1,r1,r5
001dfc  e003              B        |L1.7686|
                  |L1.7678|
;;;2028   	else temp_SL/=1000L;
001dfe  f44f7e7a          MOV      lr,#0x3e8
001e02  fb91f1fe          SDIV     r1,r1,lr
                  |L1.7686|
;;;2029   	#ifdef UKU_TELECORE2015
;;;2030   	temp_SL/=2L;
;;;2031   	//temp_SL=-temp_SL;
;;;2032   	#endif
;;;2033   	//#ifdef UKU_TELECORE2017
;;;2034   	//temp_SL/=-2L;
;;;2035   	//temp_SL=-temp_SL;
;;;2036   	//#endif
;;;2037   	bat[0]._Ib=(signed short)temp_SL;
001e06  8121              STRH     r1,[r4,#8]
;;;2038   
;;;2039   	temp_SL=(signed long)ad7705_buff_[1];
001e08  f8b91002          LDRH     r1,[r9,#2]  ; ad7705_buff_
;;;2040   	temp_SL-=(signed long)Kibat0[1];
001e0c  f8bb9002          LDRH     r9,[r11,#2]  ; Kibat0
001e10  eba10909          SUB      r9,r1,r9
;;;2041   	temp_SL*=(signed long)Kibat1[1];
001e14  f9b21002          LDRSH    r1,[r2,#2]  ; Kibat1
001e18  fb01f109          MUL      r1,r1,r9
;;;2042   	if((AUSW_MAIN==24120)||(AUSW_MAIN==24210))temp_SL/=300L;
001e1c  4298              CMP      r0,r3
001e1e  d001              BEQ      |L1.7716|
001e20  4560              CMP      r0,r12
001e22  d106              BNE      |L1.7730|
                  |L1.7716|
001e24  e000              B        |L1.7720|
                  |L1.7718|
001e26  e015              B        |L1.7764|
                  |L1.7720|
001e28  f44f7096          MOV      r0,#0x12c
001e2c  fb91f0f0          SDIV     r0,r1,r0
001e30  e00e              B        |L1.7760|
                  |L1.7730|
;;;2043   	else if((AUSW_MAIN==22010)||(AUSW_MAIN==22035)||(AUSW_MAIN==22033))temp_SL/=2000L;
001e32  f5a042aa          SUB      r2,r0,#0x5500
001e36  3afa              SUBS     r2,r2,#0xfa
001e38  d003              BEQ      |L1.7746|
001e3a  4550              CMP      r0,r10
001e3c  d001              BEQ      |L1.7746|
001e3e  42b0              CMP      r0,r6
001e40  d102              BNE      |L1.7752|
                  |L1.7746|
001e42  fb91f0f5          SDIV     r0,r1,r5
001e46  e003              B        |L1.7760|
                  |L1.7752|
;;;2044   	else temp_SL/=1000L;
001e48  f44f707a          MOV      r0,#0x3e8
001e4c  fb91f0f0          SDIV     r0,r1,r0
                  |L1.7760|
;;;2045   	bat[1]._Ib=(signed short)temp_SL;
001e50  f8a40054          STRH     r0,[r4,#0x54]
                  |L1.7764|
;;;2046   	}
;;;2047   
;;;2048   
;;;2049   
;;;2050   
;;;2051   
;;;2052   //“ÂÏÔÂ‡ÚÛ˚ ·‡Ú‡ÂÈ
;;;2053   
;;;2054   #ifdef UKU_KONTUR
;;;2055   if((adc_buff_[6]>800)&&(adc_buff_[6]<3800))bat[0]._nd=0;
;;;2056   else bat[0]._nd=1;
;;;2057   temp_SL=(signed long)adc_buff_[6];
;;;2058   temp_SL*=Ktbat[0];
;;;2059   temp_SL/=20000L;
;;;2060   temp_SL-=273L;
;;;2061   bat[0]._Tb=(signed short)temp_SL;
;;;2062   #else
;;;2063   if((adc_buff_[6]>800)&&(adc_buff_[6]<3800))bat[0]._nd=0;
001e54  f9b8000c          LDRSH    r0,[r8,#0xc]  ; adc_buff_
001e58  f64031b7          MOV      r1,#0xbb7
001e5c  4684              MOV      r12,r0
001e5e  f2a03021          SUB      r0,r0,#0x321
001e62  2300              MOVS     r3,#0
;;;2064   else bat[0]._nd=1;
001e64  f04f0901          MOV      r9,#1
001e68  9000              STR      r0,[sp,#0]            ;2063
001e6a  4288              CMP      r0,r1                 ;2063
001e6c  d201              BCS      |L1.7794|
001e6e  7323              STRB     r3,[r4,#0xc]          ;2063
001e70  e001              B        |L1.7798|
                  |L1.7794|
001e72  f884900c          STRB     r9,[r4,#0xc]
                  |L1.7798|
;;;2065   temp_SL=(signed long)adc_buff_[6];
;;;2066   temp_SL*=Ktbat[0];
001e76  4aaf              LDR      r2,|L1.8500|
001e78  f9b20000          LDRSH    r0,[r2,#0]  ; Ktbat
001e7c  fb00f00c          MUL      r0,r0,r12
;;;2067   temp_SL/=20000L;
001e80  f6446e20          MOV      lr,#0x4e20
001e84  fb90f0fe          SDIV     r0,r0,lr
;;;2068   temp_SL-=273L;
001e88  f2a01011          SUB      r0,r0,#0x111
;;;2069   bat[0]._Tb=(signed short)temp_SL;
001e8c  8160              STRH     r0,[r4,#0xa]
;;;2070   #endif
;;;2071   
;;;2072   #ifdef UKU_KONTUR
;;;2073   if((adc_buff_[7]>800)&&(adc_buff_[7]<3800))bat[1]._nd=0;
;;;2074   else bat[1]._nd=1;
;;;2075   temp_SL=(signed long)adc_buff_[7];
;;;2076   temp_SL*=Ktbat[1];
;;;2077   temp_SL/=20000L;
;;;2078   temp_SL-=273L;
;;;2079   bat[1]._Tb=(signed short)temp_SL;
;;;2080   #else
;;;2081   if((adc_buff_[7]>800)&&(adc_buff_[7]<3800))bat[1]._nd=0;
001e8e  f9b8000e          LDRSH    r0,[r8,#0xe]  ; adc_buff_
001e92  f64031b7          MOV      r1,#0xbb7
001e96  f2a03b21          SUB      r11,r0,#0x321
001e9a  458b              CMP      r11,r1
001e9c  d202              BCS      |L1.7844|
001e9e  f8843058          STRB     r3,[r4,#0x58]
001ea2  e001              B        |L1.7848|
                  |L1.7844|
;;;2082   else bat[1]._nd=1;
001ea4  f8849058          STRB     r9,[r4,#0x58]
                  |L1.7848|
;;;2083   temp_SL=(signed long)adc_buff_[7];
;;;2084   temp_SL*=Ktbat[1];
001ea8  f9b21002          LDRSH    r1,[r2,#2]  ; Ktbat
001eac  4341              MULS     r1,r0,r1
;;;2085   temp_SL/=20000L;
001eae  f6446020          MOV      r0,#0x4e20
001eb2  fb91f0f0          SDIV     r0,r1,r0
;;;2086   temp_SL-=273L;
001eb6  f2a01011          SUB      r0,r0,#0x111
;;;2087   bat[1]._Tb=(signed short)temp_SL;
001eba  4998              LDR      r1,|L1.8476|
001ebc  f8a10056          STRH     r0,[r1,#0x56]
;;;2088   #endif
;;;2089   
;;;2090   #ifdef UKU_6U
;;;2091   
;;;2092   if(NUMMAKB==2)
;;;2093   	{
;;;2094   	if(makb[0]._cnt<5)
;;;2095   		{
;;;2096   		if(makb[0]._T_nd[0]==0)
;;;2097   			{
;;;2098   			bat[0]._Tb=makb[0]._T[0];
;;;2099   			bat[0]._nd=0;
;;;2100   			}
;;;2101   		}
;;;2102   
;;;2103   	if(makb[1]._cnt<5)
;;;2104   		{
;;;2105   		if(makb[1]._T_nd[0]==0)
;;;2106   			{
;;;2107   			bat[1]._Tb=makb[1]._T[0];
;;;2108   			bat[1]._nd=0;
;;;2109   			}
;;;2110   		}
;;;2111   
;;;2112   	}
;;;2113   else if(NUMMAKB==4)
;;;2114   	{
;;;2115   	signed short temp_t;
;;;2116   	temp_t=-20;
;;;2117   	if(makb[0]._cnt<5)
;;;2118   		{
;;;2119   		if(makb[0]._T_nd[0]==0)
;;;2120   			{
;;;2121   			temp_t=makb[0]._T[0];
;;;2122   			bat[0]._nd=0;
;;;2123   			}
;;;2124   		}
;;;2125   	if(makb[1]._cnt<5)
;;;2126   		{
;;;2127   		if(makb[1]._T_nd[0]==0)
;;;2128   			{
;;;2129   			if(temp_t<makb[1]._T[0])
;;;2130   				{
;;;2131   				bat[0]._nd=0;
;;;2132   				temp_t=makb[1]._T[0];
;;;2133   				}
;;;2134   			}
;;;2135   		}
;;;2136   	if(temp_t!=-20)bat[0]._Tb = temp_t;
;;;2137   
;;;2138    	temp_t=-20;
;;;2139   	if(makb[2]._cnt<5)
;;;2140   		{
;;;2141   		if(makb[2]._T_nd[0]==0)
;;;2142   			{
;;;2143   			temp_t=makb[2]._T[0];
;;;2144   			bat[1]._nd=0;
;;;2145   			}
;;;2146   		}
;;;2147   	if(makb[3]._cnt<5)
;;;2148   		{
;;;2149   		if(makb[3]._T_nd[0]==0)
;;;2150   			{
;;;2151   			if(temp_t<makb[3]._T[0])
;;;2152   				{
;;;2153   				bat[1]._nd=0;
;;;2154   				temp_t=makb[3]._T[0];
;;;2155   				}
;;;2156   			}
;;;2157   		}
;;;2158   	if(temp_t!=-20)bat[1]._Tb = temp_t;
;;;2159   	}
;;;2160   
;;;2161   #endif
;;;2162   
;;;2163   
;;;2164   //Õ‡ÔˇÊÂÌËÂ Ì‡„ÛÁÍË
;;;2165   temp_SL=(signed long)adc_buff_[2];
001ec0  f9b81004          LDRSH    r1,[r8,#4]  ; adc_buff_
;;;2166   temp_SL*=Kuload;
001ec4  489c              LDR      r0,|L1.8504|
001ec6  f9b00000          LDRSH    r0,[r0,#0]  ; Kuload
001eca  fb01f000          MUL      r0,r1,r0
;;;2167   temp_SL/=2000L;
001ece  f44f62fa          MOV      r2,#0x7d0
001ed2  fb90f0f2          SDIV     r0,r0,r2
;;;2168   load_U=(signed short)temp_SL;
001ed6  f8dfe264          LDR      lr,|L1.8508|
001eda  f8ae0000          STRH     r0,[lr,#0]
;;;2169   
;;;2170   #ifdef UKU_220 
;;;2171   //Õ‡ÔˇÊÂÌËÂ Ì‡„ÛÁÍË
;;;2172   temp_SL=(signed long)adc_buff_[2];
;;;2173   temp_SL*=Kuload;
;;;2174   temp_SL/=350L;
;;;2175   load_U=(signed short)temp_SL;
;;;2176   #endif
;;;2177   
;;;2178   #ifdef UKU_220_V2 
;;;2179   //Õ‡ÔˇÊÂÌËÂ Ì‡„ÛÁÍË
;;;2180   temp_SL=(signed long)adc_buff_[2];
;;;2181   temp_SL*=Kuload;
;;;2182   temp_SL/=350L;
;;;2183   load_U=(signed short)temp_SL;
;;;2184   #endif
;;;2185   
;;;2186   #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;2187   //Õ‡ÔˇÊÂÌËÂ ¯ËÌ˚
;;;2188   temp_SL=(signed long)adc_buff_[1];
001ede  f9b82002          LDRSH    r2,[r8,#2]  ; adc_buff_
;;;2189   temp_SL*=Kuout;
001ee2  4897              LDR      r0,|L1.8512|
001ee4  f9b00000          LDRSH    r0,[r0,#0]  ; Kuout
001ee8  fb02f200          MUL      r2,r2,r0
;;;2190   if(AUSW_MAIN==22010)temp_SL/=400L;
001eec  4890              LDR      r0,|L1.8496|
001eee  f24554fa          MOV      r4,#0x55fa
001ef2  f44f75c8          MOV      r5,#0x190
001ef6  8800              LDRH     r0,[r0,#0]  ; AUSW_MAIN
001ef8  42a0              CMP      r0,r4
001efa  d102              BNE      |L1.7938|
001efc  fb92f2f5          SDIV     r2,r2,r5
001f00  e003              B        |L1.7946|
                  |L1.7938|
;;;2191   else temp_SL/=500L;
001f02  f44f7bfa          MOV      r11,#0x1f4
001f06  fb92f2fb          SDIV     r2,r2,r11
                  |L1.7946|
;;;2192   out_U=(signed short)temp_SL;
001f0a  fa0ffb82          SXTH     r11,r2
001f0e  4a8d              LDR      r2,|L1.8516|
001f10  f8a2b000          STRH     r11,[r2,#0]
;;;2193   load_U=out_U;
001f14  f8aeb000          STRH     r11,[lr,#0]
;;;2194   
;;;2195   //Õ‡ÔˇÊÂÌËÂ ‚˚ÔˇÏËÚÂÎÂÈ
;;;2196   temp_SL=(signed long)adc_buff_[2];
;;;2197   temp_SL*=Kubps;
001f18  4a8b              LDR      r2,|L1.8520|
001f1a  f9b22000          LDRSH    r2,[r2,#0]  ; Kubps
001f1e  fb01f102          MUL      r1,r1,r2
;;;2198   if(AUSW_MAIN==22010)temp_SL/=400L;
001f22  d102              BNE      |L1.7978|
001f24  fb91f1f5          SDIV     r1,r1,r5
001f28  e003              B        |L1.7986|
                  |L1.7978|
;;;2199   else temp_SL/=500L;
001f2a  f44f72fa          MOV      r2,#0x1f4
001f2e  fb91f1f2          SDIV     r1,r1,r2
                  |L1.7986|
;;;2200   bps_U=(signed short)temp_SL;
001f32  4d86              LDR      r5,|L1.8524|
001f34  b209              SXTH     r1,r1
001f36  8029              STRH     r1,[r5,#0]
;;;2201   
;;;2202   if(bps_U<100)
001f38  2964              CMP      r1,#0x64
001f3a  da18              BGE      |L1.8046|
;;;2203   	{
;;;2204   	char i;
;;;2205   	for(i=0;i<NUMIST;i++)
001f3c  f04f0100          MOV      r1,#0
001f40  4a83              LDR      r2,|L1.8528|
001f42  f8dfe210          LDR      lr,|L1.8532|
001f46  f9b28000          LDRSH    r8,[r2,#0]
001f4a  e00e              B        |L1.8042|
                  |L1.8012|
;;;2206   		{
;;;2207   		if(bps[i]._Uin>bps_U)bps_U=bps[i]._Uin;
001f4c  ebc102c1          RSB      r2,r1,r1,LSL #3
001f50  eb021201          ADD      r2,r2,r1,LSL #4
001f54  eb0e0282          ADD      r2,lr,r2,LSL #2
001f58  f9b54000          LDRSH    r4,[r5,#0]  ; bps_U
001f5c  6a12              LDR      r2,[r2,#0x20]
001f5e  42a2              CMP      r2,r4
001f60  dd00              BLE      |L1.8036|
001f62  802a              STRH     r2,[r5,#0]
                  |L1.8036|
001f64  f1010101          ADD      r1,r1,#1              ;2205
001f68  b2c9              UXTB     r1,r1                 ;2205
                  |L1.8042|
001f6a  4541              CMP      r1,r8                 ;2205
001f6c  dbee              BLT      |L1.8012|
                  |L1.8046|
;;;2208   		}
;;;2209   	}
;;;2210   
;;;2211   //—ÛÏÏ‡Ì˚È ÚÓÍ ‚˚ÔˇÏËÚÂÎÂÈ
;;;2212   temp_SL=0;
001f6e  f04f0500          MOV      r5,#0
;;;2213   for (i=0;i<NUMIST;i++)
001f72  4629              MOV      r1,r5
001f74  4a76              LDR      r2,|L1.8528|
001f76  4c77              LDR      r4,|L1.8532|
001f78  f9b22000          LDRSH    r2,[r2,#0]            ;2205
001f7c  e00b              B        |L1.8086|
                  |L1.8062|
;;;2214   	{
;;;2215   	temp_SL+=((signed long)bps[i]._Ii);
001f7e  ebc108c1          RSB      r8,r1,r1,LSL #3
001f82  eb081801          ADD      r8,r8,r1,LSL #4
001f86  eb040888          ADD      r8,r4,r8,LSL #2
001f8a  f8d88024          LDR      r8,[r8,#0x24]
001f8e  4445              ADD      r5,r5,r8
001f90  f1010101          ADD      r1,r1,#1              ;2213
001f94  b2c9              UXTB     r1,r1                 ;2213
                  |L1.8086|
001f96  4291              CMP      r1,r2                 ;2213
001f98  dbf1              BLT      |L1.8062|
;;;2216   	}
;;;2217   bps_I=(signed short)temp_SL;
001f9a  496f              LDR      r1,|L1.8536|
001f9c  800d              STRH     r5,[r1,#0]
;;;2218   
;;;2219   
;;;2220   #endif
;;;2221   
;;;2222   
;;;2223   #ifdef UKU_KONTUR
;;;2224   //¬ÌÂ¯ÌËÈ ‰‡Ú˜ËÍ ÚÂÏÔÂ‡ÚÛ˚ π1(ÚÂÏÔÂ‡ÚÛ‡ ‚ÌÂ¯ÌÂ„Ó ‚ÓÁ‰Ûı‡)
;;;2225   if((adc_buff_[5]>800)&&(adc_buff_[5]<3800))ND_EXT[0]=0;
;;;2226   else ND_EXT[0]=1;
;;;2227   temp_SL=(signed long)adc_buff_[5];
;;;2228   temp_SL*=Ktext[0];
;;;2229   temp_SL/=20000L;
;;;2230   temp_SL-=273L;
;;;2231   t_ext[0]=(signed short)temp_SL;
;;;2232   #else 
;;;2233   //¬ÌÂ¯ÌËÈ ‰‡Ú˜ËÍ ÚÂÏÔÂ‡ÚÛ˚ π1(ÚÂÏÔÂ‡ÚÛ‡ ‚ÌÂ¯ÌÂ„Ó ‚ÓÁ‰Ûı‡)
;;;2234   if((adc_buff_[5]>800)&&(adc_buff_[5]<3800))ND_EXT[0]=0;
001f9e  495d              LDR      r1,|L1.8468|
001fa0  f8df81b8          LDR      r8,|L1.8540|
001fa4  f9b1500a          LDRSH    r5,[r1,#0xa]  ; adc_buff_
001fa8  f64031b7          MOV      r1,#0xbb7
001fac  f2a53e21          SUB      lr,r5,#0x321
001fb0  458e              CMP      lr,r1
001fb2  d202              BCS      |L1.8122|
001fb4  f8883000          STRB     r3,[r8,#0]
001fb8  e001              B        |L1.8126|
                  |L1.8122|
;;;2235   else ND_EXT[0]=1;
001fba  f8889000          STRB     r9,[r8,#0]
                  |L1.8126|
;;;2236   temp_SL=(signed long)adc_buff_[5];
;;;2237   temp_SL*=Ktext[0];
001fbe  4968              LDR      r1,|L1.8544|
001fc0  f9b11000          LDRSH    r1,[r1,#0]  ; Ktext
001fc4  434d              MULS     r5,r1,r5
;;;2238   temp_SL/=20000L;
001fc6  f6446e20          MOV      lr,#0x4e20
001fca  fb95f5fe          SDIV     r5,r5,lr
;;;2239   temp_SL-=273L;
001fce  f2a51511          SUB      r5,r5,#0x111
;;;2240   t_ext[0]=(signed short)temp_SL;
001fd2  f8dfe190          LDR      lr,|L1.8548|
001fd6  f8ae5000          STRH     r5,[lr,#0]
;;;2241   /*
;;;2242   if((adc_buff_[6]>800)&&(adc_buff_[6]<3800))ND_EXT[1]=0;
;;;2243   else ND_EXT[1]=1;
;;;2244   temp_SL=(signed long)adc_buff_[6];
;;;2245   temp_SL*=Ktext[1];
;;;2246   temp_SL/=20000L;
;;;2247   temp_SL-=273L;
;;;2248   t_ext[1]=(signed short)temp_SL;	*/
;;;2249   #endif
;;;2250   
;;;2251   #ifdef UKU_220
;;;2252   
;;;2253   //¬ÌÂ¯ÌËÈ ‰‡Ú˜ËÍ ÚÂÏÔÂ‡ÚÛ˚ π2(ÚÂÏÔÂ‡ÚÛ‡ ÓÚÒÂÍ‡ ›œ”)
;;;2254   if((adc_buff_[3]>800)&&(adc_buff_[3]<3800))ND_EXT[1]=0;
;;;2255   else ND_EXT[1]=1;
;;;2256   temp_SL=(signed long)adc_buff_[3];
;;;2257   temp_SL*=Ktext[1];
;;;2258   temp_SL/=20000L;
;;;2259   temp_SL-=273L;
;;;2260   t_ext[1]=(signed short)temp_SL;
;;;2261   
;;;2262   //¬ÌÂ¯ÌËÈ ‰‡Ú˜ËÍ ÚÂÏÔÂ‡ÚÛ˚ π3(ÚÂÏÔÂ‡ÚÛ‡ ÓÚÒÂÍ‡ MSAN)
;;;2263   if((adc_buff_[10]>800)&&(adc_buff_[10]<3800))ND_EXT[2]=0;
;;;2264   else ND_EXT[2]=1;
;;;2265   temp_SL=(signed long)adc_buff_[10];
;;;2266   temp_SL*=Ktext[2];
;;;2267   temp_SL/=20000L;
;;;2268   temp_SL-=273L;
;;;2269   t_ext[2]=(signed short)temp_SL;
;;;2270   
;;;2271   #else
;;;2272   
;;;2273   
;;;2274   #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;2275   
;;;2276   //¬ÌÂ¯ÌËÈ ‰‡Ú˜ËÍ ÚÂÏÔÂ‡ÚÛ˚ 
;;;2277   if((adc_buff_[6]>800)&&(adc_buff_[6]<3800))ND_EXT[0]=0;
001fda  9d00              LDR      r5,[sp,#0]
001fdc  f6403eb7          MOV      lr,#0xbb7
001fe0  4575              CMP      r5,lr
001fe2  d202              BCS      |L1.8170|
001fe4  f8883000          STRB     r3,[r8,#0]
001fe8  e001              B        |L1.8174|
                  |L1.8170|
;;;2278   else ND_EXT[0]=1;
001fea  f8889000          STRB     r9,[r8,#0]
                  |L1.8174|
;;;2279   temp_SL=(signed long)adc_buff_[6];
;;;2280   temp_SL*=Ktext[0];
001fee  fb01f10c          MUL      r1,r1,r12
;;;2281   temp_SL/=20000L;
001ff2  f6446520          MOV      r5,#0x4e20
001ff6  fb91f1f5          SDIV     r1,r1,r5
;;;2282   temp_SL-=273L;
001ffa  f2a11111          SUB      r1,r1,#0x111
;;;2283   t_ext[0]=(signed short)temp_SL;
001ffe  4d59              LDR      r5,|L1.8548|
002000  8029              STRH     r1,[r5,#0]
;;;2284   
;;;2285   #else
;;;2286   
;;;2287   
;;;2288   
;;;2289   //¬ÌÂ¯ÌËÈ ‰‡Ú˜ËÍ ÚÂÏÔÂ‡ÚÛ˚ π2(ÚÂÏÔÂ‡ÚÛ‡ ÓÚÒÂÍ‡ ›œ”)
;;;2290   if((adc_buff_[6]>800)&&(adc_buff_[6]<3800))ND_EXT[1]=0;
;;;2291   else ND_EXT[1]=1;
;;;2292   temp_SL=(signed long)adc_buff_[6];
;;;2293   temp_SL*=Ktext[1];
;;;2294   temp_SL/=20000L;
;;;2295   temp_SL-=273L;
;;;2296   t_ext[1]=(signed short)temp_SL;
;;;2297   
;;;2298   //¬ÌÂ¯ÌËÈ ‰‡Ú˜ËÍ ÚÂÏÔÂ‡ÚÛ˚ π3(ÚÂÏÔÂ‡ÚÛ‡ ÓÚÒÂÍ‡ MSAN)
;;;2299   if((adc_buff_[3]>800)&&(adc_buff_[3]<3800))ND_EXT[2]=0;
;;;2300   else ND_EXT[2]=1;
;;;2301   temp_SL=(signed long)adc_buff_[3];
;;;2302   temp_SL*=Ktext[2];
;;;2303   temp_SL/=20000L;
;;;2304   temp_SL-=273L;
;;;2305   t_ext[2]=(signed short)temp_SL;
;;;2306   
;;;2307   #endif
;;;2308   #endif
;;;2309   
;;;2310   #ifdef UKU_220_V2
;;;2311   
;;;2312   //¬ÌÂ¯ÌËÈ ‰‡Ú˜ËÍ ÚÂÏÔÂ‡ÚÛ˚ π2(ÚÂÏÔÂ‡ÚÛ‡ ÓÚÒÂÍ‡ ›œ”)
;;;2313   if((adc_buff_[3]>800)&&(adc_buff_[3]<3800))ND_EXT[1]=0;
;;;2314   else ND_EXT[1]=1;
;;;2315   temp_SL=(signed long)adc_buff_[3];
;;;2316   temp_SL*=Ktext[1];
;;;2317   temp_SL/=20000L;
;;;2318   temp_SL-=273L;
;;;2319   t_ext[1]=(signed short)temp_SL;
;;;2320   
;;;2321   //¬ÌÂ¯ÌËÈ ‰‡Ú˜ËÍ ÚÂÏÔÂ‡ÚÛ˚ π3(ÚÂÏÔÂ‡ÚÛ‡ ÓÚÒÂÍ‡ MSAN)
;;;2322   if((adc_buff_[10]>800)&&(adc_buff_[10]<3800))ND_EXT[2]=0;
;;;2323   else ND_EXT[2]=1;
;;;2324   temp_SL=(signed long)adc_buff_[10];
;;;2325   temp_SL*=Ktext[2];
;;;2326   temp_SL/=20000L;
;;;2327   temp_SL-=273L;
;;;2328   t_ext[2]=(signed short)temp_SL;
;;;2329   
;;;2330   #else
;;;2331   
;;;2332   #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;2333   //“ÓÍ ·‡Ú‡ÂË
;;;2334   if(bps[8]._device==dIBAT_METR)
002002  f89412e0          LDRB     r1,[r4,#0x2e0]  ; bps
;;;2335   	{
;;;2336   	ibat_metr_buff_[0]=((signed long)bps[8]._buff[0])+(((signed long)bps[8]._buff[1])<<8);
;;;2337   	ibat_metr_buff_[1]=((signed long)bps[8]._buff[2])+(((signed long)bps[8]._buff[3])<<8);
;;;2338   	bIBAT_SMKLBR=((signed short)bps[8]._buff[4])+(((signed short)bps[8]._buff[5])<<8);
;;;2339   
;;;2340   	if(!bIBAT_SMKLBR)
;;;2341   		{
;;;2342   		signed long temp_SL;
;;;2343   		temp_SL=(signed long)ibat_metr_buff_[0];
;;;2344   		temp_SL-=(signed long)ibat_metr_buff_[1];
;;;2345   		temp_SL*=(signed long)Kibat1[0];
;;;2346   		if((AUSW_MAIN==22010)||(AUSW_MAIN==22011)||(AUSW_MAIN==22035)||(AUSW_MAIN==22033)||(AUSW_MAIN==22063)||(AUSW_MAIN==22023)||(AUSW_MAIN==22043)||(AUSW_MAIN==22044))temp_SL/=2000L;
;;;2347   	
;;;2348   		Ib_ips_termokompensat =(signed short)temp_SL;
002006  f8dfc160          LDR      r12,|L1.8552|
00200a  2909              CMP      r1,#9                 ;2334
00200c  d13f              BNE      |L1.8334|
00200e  f89412e6          LDRB     r1,[r4,#0x2e6]        ;2336  ; bps
002012  f89452e7          LDRB     r5,[r4,#0x2e7]        ;2336  ; bps
002016  f8dfe154          LDR      lr,|L1.8556|
00201a  eb012105          ADD      r1,r1,r5,LSL #8       ;2336
00201e  f8ce1000          STR      r1,[lr,#0]            ;2336  ; ibat_metr_buff_
002022  f89452e8          LDRB     r5,[r4,#0x2e8]        ;2337  ; bps
002026  f89492e9          LDRB     r9,[r4,#0x2e9]        ;2337  ; bps
00202a  eb052509          ADD      r5,r5,r9,LSL #8       ;2337
00202e  f8ce5004          STR      r5,[lr,#4]            ;2337  ; ibat_metr_buff_
002032  f89492ea          LDRB     r9,[r4,#0x2ea]        ;2338  ; bps
002036  f894e2eb          LDRB     lr,[r4,#0x2eb]        ;2338  ; bps
00203a  eb09290e          ADD      r9,r9,lr,LSL #8       ;2338
00203e  f8dfe130          LDR      lr,|L1.8560|
002042  fa0ff989          SXTH     r9,r9                 ;2338
002046  f8ae9000          STRH     r9,[lr,#0]            ;2338
00204a  f1b90f00          CMP      r9,#0                 ;2340
00204e  d11e              BNE      |L1.8334|
002050  eba10505          SUB      r5,r1,r5              ;2344
002054  4935              LDR      r1,|L1.8492|
002056  f9b11000          LDRSH    r1,[r1,#0]            ;2345  ; Kibat1
00205a  fb01f105          MUL      r1,r1,r5              ;2345
00205e  f5a045aa          SUB      r5,r0,#0x5500         ;2346
002062  3dfa              SUBS     r5,r5,#0xfa           ;2346
002064  d00d              BEQ      |L1.8322|
002066  1e6d              SUBS     r5,r5,#1              ;2346
002068  d00b              BEQ      |L1.8322|
00206a  4550              CMP      r0,r10                ;2346
00206c  d009              BEQ      |L1.8322|
00206e  42b0              CMP      r0,r6                 ;2346
002070  d007              BEQ      |L1.8322|
002072  3d34              SUBS     r5,r5,#0x34           ;2346
002074  d005              BEQ      |L1.8322|
002076  3528              ADDS     r5,r5,#0x28           ;2346
002078  d003              BEQ      |L1.8322|
00207a  3d14              SUBS     r5,r5,#0x14           ;2346
00207c  d001              BEQ      |L1.8322|
00207e  1e6d              SUBS     r5,r5,#1              ;2346
002080  d103              BNE      |L1.8330|
                  |L1.8322|
002082  f44f65fa          MOV      r5,#0x7d0             ;2346
002086  fb91f1f5          SDIV     r1,r1,r5              ;2346
                  |L1.8330|
00208a  f8ac1000          STRH     r1,[r12,#0]
                  |L1.8334|
;;;2349   		}
;;;2350   	}
;;;2351   
;;;2352   bat[0]._Ub=load_U;
00208e  4d23              LDR      r5,|L1.8476|
002090  f8a5b002          STRH     r11,[r5,#2]
;;;2353   if(AUSW_MAIN==22018) Ib_ips_termokompensat=bat[0]._Ib;
002094  f5a041ac          SUB      r1,r0,#0x5600
002098  3902              SUBS     r1,#2
00209a  d103              BNE      |L1.8356|
00209c  8928              LDRH     r0,[r5,#8]  ; bat
00209e  f8ac0000          STRH     r0,[r12,#0]
0020a2  e002              B        |L1.8362|
                  |L1.8356|
;;;2354   else bat[0]._Ib=Ib_ips_termokompensat;
0020a4  f8bc0000          LDRH     r0,[r12,#0]  ; Ib_ips_termokompensat
0020a8  8128              STRH     r0,[r5,#8]
                  |L1.8362|
;;;2355   
;;;2356   #endif
;;;2357   #endif
;;;2358   
;;;2359   
;;;2360   #ifdef UKU_TELECORE2015
;;;2361   
;;;2362   //¬ÌÂ¯ÌËÈ ‰‡Ú˜ËÍ ÚÂÏÔÂ‡ÚÛ˚ π1
;;;2363   if((adc_buff_[7]>800)&&(adc_buff_[7]<3800))ND_EXT[0]=0;
;;;2364   else ND_EXT[0]=1;
;;;2365   temp_SL=(signed long)adc_buff_[7];
;;;2366   temp_SL*=Ktext[0];
;;;2367   temp_SL/=20000L;
;;;2368   temp_SL-=273L;
;;;2369   t_ext[0]=(signed short)temp_SL;
;;;2370   
;;;2371   
;;;2372   //¬ÌÂ¯ÌËÈ ‰‡Ú˜ËÍ ÚÂÏÔÂ‡ÚÛ˚ π2
;;;2373   if((adc_buff_[6]>800)&&(adc_buff_[6]<3800))ND_EXT[1]=0;
;;;2374   else ND_EXT[1]=1;
;;;2375   temp_SL=(signed long)adc_buff_[6];
;;;2376   temp_SL*=Ktext[1];
;;;2377   temp_SL/=20000L;
;;;2378   temp_SL-=273L;
;;;2379   t_ext[1]=(signed short)temp_SL;
;;;2380   
;;;2381   #endif
;;;2382   
;;;2383   #ifdef UKU_TELECORE2017
;;;2384   
;;;2385   //¬ÌÂ¯ÌËÈ ‰‡Ú˜ËÍ ÚÂÏÔÂ‡ÚÛ˚ π1
;;;2386   if((adc_buff_[7]>800)&&(adc_buff_[7]<3800))ND_EXT[0]=0;
;;;2387   else ND_EXT[0]=1;
;;;2388   temp_SL=(signed long)adc_buff_[7];
;;;2389   temp_SL*=Ktext[0];
;;;2390   temp_SL/=20000L;
;;;2391   temp_SL-=273L;
;;;2392   t_ext[0]=(signed short)temp_SL;
;;;2393   
;;;2394   
;;;2395   //¬ÌÂ¯ÌËÈ ‰‡Ú˜ËÍ ÚÂÏÔÂ‡ÚÛ˚ π2
;;;2396   if((adc_buff_[6]>800)&&(adc_buff_[6]<3800))ND_EXT[1]=0;
;;;2397   else ND_EXT[1]=1;
;;;2398   temp_SL=(signed long)adc_buff_[6];
;;;2399   temp_SL*=Ktext[1];
;;;2400   temp_SL/=20000L;
;;;2401   temp_SL-=273L;
;;;2402   t_ext[1]=(signed short)temp_SL;
;;;2403   
;;;2404   #endif
;;;2405   
;;;2406   //Ì‡ÔˇÊÂÌËÂ ‚‚Ó‰‡
;;;2407   temp_SL=(signed long)adc_buff_ext_[0];
0020aa  f8df90c8          LDR      r9,|L1.8564|
0020ae  f8b91000          LDRH     r1,[r9,#0]  ; adc_buff_ext_
;;;2408   temp_SL*=Kunet_ext[0];
0020b2  f8dfa0c4          LDR      r10,|L1.8568|
0020b6  f9ba0000          LDRSH    r0,[r10,#0]  ; Kunet_ext
0020ba  4348              MULS     r0,r1,r0
;;;2409   temp_SL/=4000L;
0020bc  f44f667a          MOV      r6,#0xfa0
0020c0  fb90f0f6          SDIV     r0,r0,r6
;;;2410   Uvv[0]=(signed short)temp_SL;
0020c4  492d              LDR      r1,|L1.8572|
0020c6  b280              UXTH     r0,r0
0020c8  8008              STRH     r0,[r1,#0]
;;;2411   if(Uvv[0]<100) Uvv0=Uvv[0];
0020ca  f8dfe0b4          LDR      lr,|L1.8576|
0020ce  2864              CMP      r0,#0x64
0020d0  d202              BCS      |L1.8408|
0020d2  f8ae0000          STRH     r0,[lr,#0]
0020d6  e003              B        |L1.8416|
                  |L1.8408|
;;;2412   else Uvv0=net_U;
0020d8  480b              LDR      r0,|L1.8456|
0020da  8800              LDRH     r0,[r0,#0]  ; net_U
0020dc  f8ae0000          STRH     r0,[lr,#0]
                  |L1.8416|
;;;2413   
;;;2414   //Ì‡ÔˇÊÂÌËÂ Ô˝Ò
;;;2415   temp_SL=(signed long)adc_buff_ext_[1];
0020e0  f8b99002          LDRH     r9,[r9,#2]  ; adc_buff_ext_
;;;2416   temp_SL*=Kunet_ext[1];
0020e4  f9ba0002          LDRSH    r0,[r10,#2]  ; Kunet_ext
0020e8  fb00f009          MUL      r0,r0,r9
;;;2417   temp_SL/=4000L;
0020ec  fb90f0f6          SDIV     r0,r0,r6
;;;2418   Uvv[1]=(signed short)temp_SL;
0020f0  8048              STRH     r0,[r1,#2]
;;;2419   
;;;2420   
;;;2421   //Ì‡ÔˇÊÂÌËÂ ‚‚Ó‰‡ ÚÂıÙ‡ÁÌÓÂ
;;;2422   temp_SL=(signed long)eb2_data_short[0];
0020f2  4924              LDR      r1,|L1.8580|
0020f4  f9b10000          LDRSH    r0,[r1,#0]  ; eb2_data_short
;;;2423   temp_SL*=Kvv_eb2[0];
0020f8  4e23              LDR      r6,|L1.8584|
0020fa  f9b69000          LDRSH    r9,[r6,#0]  ; Kvv_eb2
0020fe  e045              B        |L1.8588|
                  |L1.8448|
                          DCD      Kunet
                  |L1.8452|
                          DCD      ||area_number.25||
                  |L1.8456|
                          DCD      net_U
                  |L1.8460|
                          DCD      net_F
                  |L1.8464|
                          DCD      net_F3
                  |L1.8468|
                          DCD      ||.bss||+0x400
                  |L1.8472|
                          DCD      Kubat
                  |L1.8476|
                          DCD      bat
                  |L1.8480|
                          DCD      Kubatm
                  |L1.8484|
                          DCD      ad7705_buff_
                  |L1.8488|
                          DCD      Kibat0
                  |L1.8492|
                          DCD      Kibat1
                  |L1.8496|
                          DCD      AUSW_MAIN
                  |L1.8500|
                          DCD      Ktbat
                  |L1.8504|
                          DCD      Kuload
                  |L1.8508|
                          DCD      load_U
                  |L1.8512|
                          DCD      Kuout
                  |L1.8516|
                          DCD      out_U
                  |L1.8520|
                          DCD      Kubps
                  |L1.8524|
                          DCD      bps_U
                  |L1.8528|
                          DCD      NUMIST
                  |L1.8532|
                          DCD      bps
                  |L1.8536|
                          DCD      bps_I
                  |L1.8540|
                          DCD      ND_EXT
                  |L1.8544|
                          DCD      Ktext
                  |L1.8548|
                          DCD      t_ext
                  |L1.8552|
                          DCD      Ib_ips_termokompensat
                  |L1.8556|
                          DCD      ibat_metr_buff_
                  |L1.8560|
                          DCD      bIBAT_SMKLBR
                  |L1.8564|
                          DCD      adc_buff_ext_
                  |L1.8568|
                          DCD      Kunet_ext
                  |L1.8572|
                          DCD      Uvv
                  |L1.8576|
                          DCD      Uvv0
                  |L1.8580|
                          DCD      eb2_data_short
                  |L1.8584|
                          DCD      Kvv_eb2
                  |L1.8588|
00218c  fb09f900          MUL      r9,r9,r0
;;;2424   temp_SL/=6000L;
002190  f2417070          MOV      r0,#0x1770
002194  fb99faf0          SDIV     r10,r9,r0
;;;2425   Uvv_eb2[0]=(signed short)temp_SL;
002198  f8df9438          LDR      r9,|L1.9684|
00219c  f8a9a000          STRH     r10,[r9,#0]
;;;2426   
;;;2427   temp_SL=(signed long)eb2_data_short[1];
0021a0  f9b1e002          LDRSH    lr,[r1,#2]  ; eb2_data_short
;;;2428   temp_SL*=Kvv_eb2[1];
0021a4  f9b6a002          LDRSH    r10,[r6,#2]  ; Kvv_eb2
0021a8  fb0afa0e          MUL      r10,r10,lr
;;;2429   temp_SL/=6000L;
0021ac  fb9afaf0          SDIV     r10,r10,r0
;;;2430   Uvv_eb2[1]=(signed short)temp_SL;
0021b0  f8a9a002          STRH     r10,[r9,#2]
;;;2431   
;;;2432   temp_SL=(signed long)eb2_data_short[2];
0021b4  f9b1a004          LDRSH    r10,[r1,#4]  ; eb2_data_short
;;;2433   temp_SL*=Kvv_eb2[2];
0021b8  f9b66004          LDRSH    r6,[r6,#4]  ; Kvv_eb2
0021bc  fb06f60a          MUL      r6,r6,r10
;;;2434   temp_SL/=6000L;
0021c0  fb96f6f0          SDIV     r6,r6,r0
;;;2435   Uvv_eb2[2]=(signed short)temp_SL;
0021c4  f8a96004          STRH     r6,[r9,#4]
;;;2436   
;;;2437   //Ì‡ÔˇÊÂÌËÂ Ô˝Ò ÚÂıÙ‡ÁÌÓÂ
;;;2438   temp_SL=(signed long)eb2_data_short[3];
0021c8  f9b1a006          LDRSH    r10,[r1,#6]  ; eb2_data_short
;;;2439   temp_SL*=Kpes_eb2[0];
0021cc  f8df9408          LDR      r9,|L1.9688|
0021d0  f9b96000          LDRSH    r6,[r9,#0]  ; Kpes_eb2
0021d4  fb06f60a          MUL      r6,r6,r10
;;;2440   temp_SL/=6000L;
0021d8  fb96faf0          SDIV     r10,r6,r0
;;;2441   Upes_eb2[0]=(signed short)temp_SL;
0021dc  4eff              LDR      r6,|L1.9692|
0021de  f8a6a000          STRH     r10,[r6,#0]
;;;2442   
;;;2443   temp_SL=(signed long)eb2_data_short[4];
0021e2  f9b1e008          LDRSH    lr,[r1,#8]  ; eb2_data_short
;;;2444   temp_SL*=Kpes_eb2[1];
0021e6  f9b9a002          LDRSH    r10,[r9,#2]  ; Kpes_eb2
0021ea  fb0afa0e          MUL      r10,r10,lr
;;;2445   temp_SL/=6000L;
0021ee  fb9afaf0          SDIV     r10,r10,r0
;;;2446   Upes_eb2[1]=(signed short)temp_SL;
0021f2  f8a6a002          STRH     r10,[r6,#2]
;;;2447   
;;;2448   temp_SL=(signed long)eb2_data_short[5];
0021f6  f9b1100a          LDRSH    r1,[r1,#0xa]  ; eb2_data_short
;;;2449   temp_SL*=Kpes_eb2[2];
0021fa  f9b99004          LDRSH    r9,[r9,#4]  ; Kpes_eb2
0021fe  fb09f901          MUL      r9,r9,r1
;;;2450   temp_SL/=6000L;
002202  fb99f0f0          SDIV     r0,r9,r0
;;;2451   Upes_eb2[2]=(signed short)temp_SL;
002206  80b0              STRH     r0,[r6,#4]
;;;2452   
;;;2453   //¬˚˜ËÒÎÂÌËÂ ÚÂÏÔÂ‡ÚÛ˚ ¯Í‡Ù‡
;;;2454   
;;;2455   ibt._T[0]=t_ext[1]+273;
002208  48f5              LDR      r0,|L1.9696|
00220a  4ef6              LDR      r6,|L1.9700|
00220c  8841              LDRH     r1,[r0,#2]  ; t_ext
00220e  f2011111          ADD      r1,r1,#0x111
002212  fa0ff981          SXTH     r9,r1
002216  f8a69000          STRH     r9,[r6,#0]
;;;2456   ibt._T[1]=t_ext[2]+273;
00221a  8880              LDRH     r0,[r0,#4]  ; t_ext
00221c  f2001011          ADD      r0,r0,#0x111
002220  fa0ffa80          SXTH     r10,r0
002224  f8a6a002          STRH     r10,[r6,#2]
;;;2457   
;;;2458   ibt._nd[0]=ND_EXT[1];
002228  f8981001          LDRB     r1,[r8,#1]  ; ND_EXT
00222c  7231              STRB     r1,[r6,#8]
;;;2459   ibt._nd[1]=ND_EXT[2];
00222e  f8980002          LDRB     r0,[r8,#2]  ; ND_EXT
002232  7270              STRB     r0,[r6,#9]
;;;2460   
;;;2461   #ifndef UKU_TELECORE2015
;;;2462   if((ibt._nd[0]==0) &&  (ibt._nd[1]==0))
;;;2463   	{
;;;2464   	t_box=((ibt._T[0]+ibt._T[1])/2)-273;
002234  4eec              LDR      r6,|L1.9704|
002236  b901              CBNZ     r1,|L1.8762|
002238  b110              CBZ      r0,|L1.8768|
                  |L1.8762|
;;;2465   	}
;;;2466   else if((ibt._nd[0]==1) &&  (ibt._nd[1]==0))
00223a  2901              CMP      r1,#1
00223c  d00a              BEQ      |L1.8788|
00223e  e00a              B        |L1.8790|
                  |L1.8768|
002240  eb09000a          ADD      r0,r9,r10             ;2464
002244  eb0070d0          ADD      r0,r0,r0,LSR #31      ;2464
002248  f46f7188          MVN      r1,#0x110             ;2464
00224c  eb010060          ADD      r0,r1,r0,ASR #1       ;2464
002250  8030              STRH     r0,[r6,#0]            ;2464
002252  e01e              B        |L1.8850|
                  |L1.8788|
002254  b108              CBZ      r0,|L1.8794|
                  |L1.8790|
;;;2467   	{
;;;2468   	t_box=ibt._T[1]-273;
;;;2469   	}
;;;2470   else if((ibt._nd[0]==0) &&  (ibt._nd[1]==1))
002256  b129              CBZ      r1,|L1.8804|
002258  e006              B        |L1.8808|
                  |L1.8794|
00225a  f2aa1a11          SUB      r10,r10,#0x111        ;2468
00225e  f8a6a000          STRH     r10,[r6,#0]           ;2468
002262  e016              B        |L1.8850|
                  |L1.8804|
002264  2801              CMP      r0,#1
002266  d002              BEQ      |L1.8814|
                  |L1.8808|
;;;2471   	{
;;;2472   	t_box=ibt._T[0]-273;
;;;2473   	}
;;;2474   else if((ibt._nd[0]==1) &&  (ibt._nd[1]==1))
002268  2901              CMP      r1,#1
00226a  d005              BEQ      |L1.8824|
00226c  e011              B        |L1.8850|
                  |L1.8814|
00226e  f2a91911          SUB      r9,r9,#0x111          ;2472
002272  f8a69000          STRH     r9,[r6,#0]            ;2472
002276  e00c              B        |L1.8850|
                  |L1.8824|
002278  2801              CMP      r0,#1
00227a  d10a              BNE      |L1.8850|
;;;2475   	{
;;;2476   	if(t_ext_can_nd<5)t_box= t_ext_can;
00227c  48db              LDR      r0,|L1.9708|
00227e  7800              LDRB     r0,[r0,#0]  ; t_ext_can_nd
002280  2805              CMP      r0,#5
002282  d203              BCS      |L1.8844|
002284  48da              LDR      r0,|L1.9712|
002286  8800              LDRH     r0,[r0,#0]  ; t_ext_can
002288  8030              STRH     r0,[r6,#0]
00228a  e002              B        |L1.8850|
                  |L1.8844|
;;;2477   	else t_box=20;
00228c  f04f0014          MOV      r0,#0x14
002290  8030              STRH     r0,[r6,#0]
                  |L1.8850|
;;;2478   	}
;;;2479   #endif
;;;2480   /*
;;;2481   //¬˚˜ËÒÎÂÌËÂ ÚÂÏÔÂ‡ÚÛ˚ ¯Í‡Ù‡
;;;2482   
;;;2483   ibt._T[0]=bat[0]._Tb+273;
;;;2484   ibt._T[1]=bat[1]._Tb+273;
;;;2485   ibt._T[2]=t_ext[1]+273;
;;;2486   ibt._T[3]=t_ext[2]+273;
;;;2487   
;;;2488   ibt._nd[0]=bat[0]._nd;
;;;2489   ibt._nd[1]=bat[1]._nd;
;;;2490   ibt._nd[2]=ND_EXT[1];
;;;2491   ibt._nd[3]=ND_EXT[2];
;;;2492   
;;;2493   ibt._avg1=0;
;;;2494   ibt._avg_cnt=4;
;;;2495   
;;;2496   if(ibt._nd[0]==0)
;;;2497   	{
;;;2498   	ibt._avg1+=ibt._T[0];
;;;2499   	}
;;;2500   else 
;;;2501   	{
;;;2502   	ibt._avg_cnt--;
;;;2503   	}
;;;2504   
;;;2505   if(ibt._nd[1]==0)
;;;2506   	{
;;;2507   	ibt._avg1+=ibt._T[1];
;;;2508   	}
;;;2509   else 
;;;2510   	{
;;;2511   	ibt._avg_cnt--;
;;;2512   	}
;;;2513   
;;;2514   if(ibt._nd[2]==0)
;;;2515   	{
;;;2516   	ibt._avg1+=ibt._T[2];
;;;2517   	}
;;;2518   else 
;;;2519   	{
;;;2520   	ibt._avg_cnt--;
;;;2521   	}
;;;2522   
;;;2523   if(ibt._nd[3]==0)
;;;2524   	{
;;;2525   	ibt._avg1+=ibt._T[3];
;;;2526   	}
;;;2527   else 
;;;2528   	{
;;;2529   	ibt._avg_cnt--;
;;;2530   	}
;;;2531   
;;;2532   if(ibt._avg_cnt==0)
;;;2533   	{
;;;2534   	}
;;;2535   else
;;;2536   	{
;;;2537   	ibt._avg1/=ibt._avg_cnt;
;;;2538   	}
;;;2539   
;;;2540   
;;;2541   if(ibt._nd[0]!=0)
;;;2542   	{
;;;2543   	ibt._T_dispers[0]=0;
;;;2544   	}
;;;2545   else 
;;;2546   	{
;;;2547   	ibt._T_dispers[0]=abs(ibt._T[0]-ibt._avg1);
;;;2548   	}
;;;2549   
;;;2550   if(ibt._nd[1]!=0)
;;;2551   	{
;;;2552   	ibt._T_dispers[1]=0;
;;;2553   	}
;;;2554   else 
;;;2555   	{
;;;2556   	ibt._T_dispers[1]=abs(ibt._T[1]-ibt._avg1);
;;;2557   	}
;;;2558   
;;;2559   if(ibt._nd[2]!=0)
;;;2560   	{
;;;2561   	ibt._T_dispers[2]=0;
;;;2562   	}
;;;2563   else 
;;;2564   	{
;;;2565   	ibt._T_dispers[2]=abs(ibt._T[2]-ibt._avg1);
;;;2566   	}
;;;2567   
;;;2568   if(ibt._nd[3]!=0)
;;;2569   	{
;;;2570   	ibt._T_dispers[3]=0;
;;;2571   	}
;;;2572   else 
;;;2573   	{
;;;2574   	ibt._T_dispers[3]=abs(ibt._T[3]-ibt._avg1);
;;;2575   	}
;;;2576   
;;;2577   if(	ibt._nd[0]&&
;;;2578   	ibt._nd[1]&&
;;;2579   	ibt._nd[2]&&
;;;2580   	ibt._nd[3]
;;;2581   	)
;;;2582   	{
;;;2583   	t_box=(bps[0]._Ti);
;;;2584   	}
;;;2585   
;;;2586   else if(	ibt._nd[0]||
;;;2587   	ibt._nd[1]||
;;;2588   	ibt._nd[2]||
;;;2589   	ibt._nd[3]
;;;2590   	)
;;;2591   	{
;;;2592   	t_box=(ibt._avg1-273);
;;;2593   	}
;;;2594   else 
;;;2595   	{
;;;2596   	ibt._max_dispers_num=0;
;;;2597   	ibt._max_dispers=ibt._T_dispers[0];
;;;2598   
;;;2599   	if(ibt._T_dispers[1]>ibt._max_dispers)
;;;2600   		{
;;;2601   		ibt._max_dispers_num=1;
;;;2602   		ibt._max_dispers=ibt._T_dispers[1];
;;;2603   		}
;;;2604   	if(ibt._T_dispers[2]>ibt._max_dispers)
;;;2605   		{
;;;2606   		ibt._max_dispers_num=2;
;;;2607   		ibt._max_dispers=ibt._T_dispers[2];
;;;2608   		}
;;;2609   	if(ibt._T_dispers[3]>ibt._max_dispers)
;;;2610   		{
;;;2611   		ibt._max_dispers_num=3;
;;;2612   		ibt._max_dispers=ibt._T_dispers[3];
;;;2613   		}
;;;2614   
;;;2615   	ibt._avg2=0;
;;;2616   
;;;2617   	if(ibt._max_dispers_num!=0)
;;;2618   		{
;;;2619   		ibt._avg2+=ibt._T[0];
;;;2620   		}
;;;2621   	if(ibt._max_dispers_num!=1)
;;;2622   		{
;;;2623   		ibt._avg2+=ibt._T[1];
;;;2624   		}
;;;2625   	if(ibt._max_dispers_num!=2)
;;;2626   		{
;;;2627   		ibt._avg2+=ibt._T[2];
;;;2628   		}
;;;2629   	if(ibt._max_dispers_num!=3)
;;;2630   		{
;;;2631   		ibt._avg2+=ibt._T[3];
;;;2632   		}
;;;2633   
;;;2634   	t_box=(ibt._avg2/3)-273;
;;;2635   
;;;2636   	}*/
;;;2637   
;;;2638   
;;;2639   //*********************************************
;;;2640   
;;;2641   #ifndef TELECORE
;;;2642   if((BAT_IS_ON[0]==bisON)&&(bat[0]._Ub>200)) Ibmax=bat[0]._Ib;
002292  48d8              LDR      r0,|L1.9716|
002294  7801              LDRB     r1,[r0,#0]  ; BAT_IS_ON
002296  2955              CMP      r1,#0x55
002298  d104              BNE      |L1.8868|
00229a  f1bb0fc8          CMP      r11,#0xc8
00229e  dd01              BLE      |L1.8868|
0022a0  8929              LDRH     r1,[r5,#8]  ; bat
0022a2  87f9              STRH     r1,[r7,#0x3e]
                  |L1.8868|
;;;2643   if((BAT_IS_ON[1]==bisON)&&(bat[1]._Ub>200)&&(bat[1]._Ib>bat[0]._Ib)) Ibmax=bat[1]._Ib;
0022a4  7840              LDRB     r0,[r0,#1]  ; BAT_IS_ON
0022a6  2855              CMP      r0,#0x55
0022a8  d10a              BNE      |L1.8896|
0022aa  f9b5004e          LDRSH    r0,[r5,#0x4e]  ; bat
0022ae  28c8              CMP      r0,#0xc8
0022b0  dd06              BLE      |L1.8896|
0022b2  f9b50054          LDRSH    r0,[r5,#0x54]  ; bat
0022b6  f9b51008          LDRSH    r1,[r5,#8]  ; bat
0022ba  4288              CMP      r0,r1
0022bc  dd00              BLE      |L1.8896|
0022be  87f8              STRH     r0,[r7,#0x3e]
                  |L1.8896|
;;;2644   #endif
;;;2645   
;;;2646   #ifdef TELECORE
;;;2647   Ibmax=0;
;;;2648   /*
;;;2649   if((NUMBAT_TELECORE>0)&&(lakb[0]._communicationFullErrorStat==0)&&(lakb[0]._ch_curr/10>Ibmax))Ibmax=lakb[0]._ch_curr/10;
;;;2650   if((NUMBAT_TELECORE>1)&&(lakb[1]._communicationFullErrorStat==0)&&(lakb[1]._ch_curr/10>Ibmax))Ibmax=lakb[1]._ch_curr/10;
;;;2651   if((NUMBAT_TELECORE>2)&&(lakb[2]._communicationFullErrorStat==0)&&(lakb[2]._ch_curr/10>Ibmax))Ibmax=lakb[2]._ch_curr/10;
;;;2652   */
;;;2653   if((NUMBAT_TELECORE>0)&&(bat[0]._Ib/10>Ibmax))Ibmax=bat[0]._Ib/10;
;;;2654   if((NUMBAT_TELECORE>1)&&(bat[1]._Ib/10>Ibmax))Ibmax=bat[1]._Ib/10;
;;;2655   //if((BAT_IS_ON[0]==bisON)&&(bat[0]._Ub>200)) Ibmax=bat[0]._Ib/1;
;;;2656   //if((BAT_IS_ON[1]==bisON)&&(bat[1]._Ub>200)&&(bat[1]._Ib>bat[0]._Ib)) Ibmax=bat[1]._Ib;
;;;2657   #endif
;;;2658   //Ibmax=bat[0]._Ib;
;;;2659   //if((AUSW_MAIN==22063)||(AUSW_MAIN==22023)||(AUSW_MAIN==22043))Ibmax=Ib_ips_termokompensat;
;;;2660   
;;;2661   #ifdef UKU_TELECORE2017
;;;2662   Ibmax=0;
;;;2663   if((NUMBAT_TELECORE>0)&&(bat[0]._Ib/10>Ibmax))Ibmax=bat[0]._Ib/10;
;;;2664   if((NUMBAT_TELECORE>1)&&(bat[1]._Ib/10>Ibmax))Ibmax=bat[1]._Ib/10;
;;;2665   #endif
;;;2666   
;;;2667   #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;2668   Ibmax=Ib_ips_termokompensat;
0022c0  f8bc0000          LDRH     r0,[r12,#0]  ; Ib_ips_termokompensat
0022c4  87f8              STRH     r0,[r7,#0x3e]
;;;2669   #endif
;;;2670   for(i=0;i<NUMIST;i++)
0022c6  f04f0100          MOV      r1,#0
0022ca  e02f              B        |L1.9004|
                  |L1.8908|
;;;2671   	{
;;;2672   	if(bps[i]._cnt<25)
0022cc  ebc100c1          RSB      r0,r1,r1,LSL #3
0022d0  eb001001          ADD      r0,r0,r1,LSL #4
0022d4  eb040080          ADD      r0,r4,r0,LSL #2
0022d8  78c6              LDRB     r6,[r0,#3]
0022da  2e19              CMP      r6,#0x19
0022dc  d21c              BCS      |L1.8984|
;;;2673        	{
;;;2674        	bps[i]._Ii=bps[i]._buff[0]+(bps[i]._buff[1]*256);
0022de  7986              LDRB     r6,[r0,#6]
0022e0  79c7              LDRB     r7,[r0,#7]
0022e2  eb062607          ADD      r6,r6,r7,LSL #8
0022e6  6246              STR      r6,[r0,#0x24]
;;;2675        	bps[i]._Uin=bps[i]._buff[2]+(bps[i]._buff[3]*256);
0022e8  7a06              LDRB     r6,[r0,#8]
0022ea  7a47              LDRB     r7,[r0,#9]
0022ec  eb062607          ADD      r6,r6,r7,LSL #8
0022f0  6206              STR      r6,[r0,#0x20]
;;;2676        	bps[i]._Uii=bps[i]._buff[4]+(bps[i]._buff[5]*256);
0022f2  7a86              LDRB     r6,[r0,#0xa]
0022f4  7ac7              LDRB     r7,[r0,#0xb]
0022f6  eb062607          ADD      r6,r6,r7,LSL #8
0022fa  61c6              STR      r6,[r0,#0x1c]
;;;2677        	bps[i]._Ti=(signed)(bps[i]._buff[6]);
0022fc  7b06              LDRB     r6,[r0,#0xc]
0022fe  6286              STR      r6,[r0,#0x28]
;;;2678        	bps[i]._adr_ee=bps[i]._buff[7];
002300  7b46              LDRB     r6,[r0,#0xd]
002302  f8806052          STRB     r6,[r0,#0x52]
;;;2679        	bps[i]._flags_tm=bps[i]._buff[8];
002306  7b86              LDRB     r6,[r0,#0xe]
002308  f8806042          STRB     r6,[r0,#0x42]
;;;2680   	     bps[i]._rotor=bps[i]._buff[10]+(bps[i]._buff[11]*256);    
00230c  7c06              LDRB     r6,[r0,#0x10]
00230e  7c47              LDRB     r7,[r0,#0x11]
002310  eb062607          ADD      r6,r6,r7,LSL #8
002314  64c6              STR      r6,[r0,#0x4c]
002316  e006              B        |L1.8998|
                  |L1.8984|
;;;2681        	} 
;;;2682   	else 
;;;2683        	{
;;;2684        	bps[i]._Uii=0; 
002318  61c3              STR      r3,[r0,#0x1c]
;;;2685        	bps[i]._Ii=0;
00231a  6243              STR      r3,[r0,#0x24]
;;;2686        	bps[i]._Uin=0;
00231c  6203              STR      r3,[r0,#0x20]
;;;2687        	bps[i]._Ti=0;
00231e  6283              STR      r3,[r0,#0x28]
;;;2688        	bps[i]._flags_tm=0; 
002320  f8803042          STRB     r3,[r0,#0x42]
;;;2689   	     bps[i]._rotor=0;    
002324  64c3              STR      r3,[r0,#0x4c]
                  |L1.8998|
002326  f1010101          ADD      r1,r1,#1              ;2670
00232a  b2c9              UXTB     r1,r1                 ;2670
                  |L1.9004|
00232c  4291              CMP      r1,r2                 ;2670
00232e  dbcd              BLT      |L1.8908|
;;;2690        	}
;;;2691        
;;;2692        }
;;;2693   
;;;2694   load_I=0;
002330  4eb1              LDR      r6,|L1.9720|
;;;2695   #ifdef TELECORE
;;;2696   
;;;2697   /*for(i=0;i<NUMBAT_TELECORE;i++)
;;;2698   	{
;;;2699   	load_I-=lakb[i]._ch_curr/10;
;;;2700   	}*/
;;;2701   load_I=-(bat[0]._Ib/10)-(bat[1]._Ib/10);
;;;2702   #elif UKU_TELECORE2017
;;;2703   load_I=-(bat[0]._Ib/10)-(bat[1]._Ib/10);
;;;2704   #else
;;;2705   load_I=-(bat[0]._Ib/10)-(bat[1]._Ib/10);
002332  f9b51008          LDRSH    r1,[r5,#8]  ; bat
002336  f04f000a          MOV      r0,#0xa
00233a  fb91f1f0          SDIV     r1,r1,r0
00233e  f9b55054          LDRSH    r5,[r5,#0x54]  ; bat
002342  fb95f0f0          SDIV     r0,r5,r0
002346  4408              ADD      r0,r0,r1
002348  f1c00000          RSB      r0,r0,#0
00234c  b207              SXTH     r7,r0
00234e  8037              STRH     r7,[r6,#0]
;;;2706   #endif
;;;2707   Isumm=0;
002350  4daa              LDR      r5,|L1.9724|
002352  802b              STRH     r3,[r5,#0]
;;;2708   
;;;2709   for(i=0;i<NUMIST;i++)
002354  f04f0000          MOV      r0,#0
002358  e012              B        |L1.9088|
                  |L1.9050|
;;;2710        {
;;;2711        if(bps[i]._cnt<5)Isumm+=bps[i]._Ii;
00235a  ebc001c0          RSB      r1,r0,r0,LSL #3
00235e  eb011100          ADD      r1,r1,r0,LSL #4
002362  eb040181          ADD      r1,r4,r1,LSL #2
002366  f891c003          LDRB     r12,[r1,#3]
00236a  f1bc0f05          CMP      r12,#5
00236e  d204              BCS      |L1.9082|
002370  6a49              LDR      r1,[r1,#0x24]
002372  f8b5c000          LDRH     r12,[r5,#0]  ; Isumm
002376  4461              ADD      r1,r1,r12
002378  8029              STRH     r1,[r5,#0]
                  |L1.9082|
00237a  f1000001          ADD      r0,r0,#1              ;2709
00237e  b2c0              UXTB     r0,r0                 ;2709
                  |L1.9088|
002380  4290              CMP      r0,r2                 ;2709
002382  dbea              BLT      |L1.9050|
;;;2712        }  
;;;2713        
;;;2714   load_I=load_I+Isumm;
002384  8828              LDRH     r0,[r5,#0]  ; Isumm
002386  4438              ADD      r0,r0,r7
002388  b200              SXTH     r0,r0
00238a  8030              STRH     r0,[r6,#0]
;;;2715   if(load_I<0)load_I=0;
00238c  2800              CMP      r0,#0
00238e  da00              BGE      |L1.9106|
002390  8033              STRH     r3,[r6,#0]
                  |L1.9106|
;;;2716   
;;;2717   #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;2718   load_I=0;
002392  8033              STRH     r3,[r6,#0]
;;;2719   
;;;2720   Isumm=0;
002394  802b              STRH     r3,[r5,#0]
;;;2721   
;;;2722   for(i=0;i<NUMIST;i++)
002396  f04f0000          MOV      r0,#0
00239a  e00f              B        |L1.9148|
                  |L1.9116|
;;;2723        {
;;;2724        if(bps[i]._cnt<5)Isumm+=bps[i]._Ii;
00239c  ebc001c0          RSB      r1,r0,r0,LSL #3
0023a0  eb011100          ADD      r1,r1,r0,LSL #4
0023a4  eb040181          ADD      r1,r4,r1,LSL #2
0023a8  78cf              LDRB     r7,[r1,#3]
0023aa  2f05              CMP      r7,#5
0023ac  d203              BCS      |L1.9142|
0023ae  6a49              LDR      r1,[r1,#0x24]
0023b0  882f              LDRH     r7,[r5,#0]  ; Isumm
0023b2  4439              ADD      r1,r1,r7
0023b4  8029              STRH     r1,[r5,#0]
                  |L1.9142|
0023b6  f1000001          ADD      r0,r0,#1              ;2722
0023ba  b2c0              UXTB     r0,r0                 ;2722
                  |L1.9148|
0023bc  4290              CMP      r0,r2                 ;2722
0023be  dbed              BLT      |L1.9116|
;;;2725        }  
;;;2726        
;;;2727   load_I=load_I+Isumm;
0023c0  8829              LDRH     r1,[r5,#0]  ; Isumm
0023c2  eb030001          ADD      r0,r3,r1
0023c6  b200              SXTH     r0,r0
0023c8  8030              STRH     r0,[r6,#0]
;;;2728   if(load_I<0)load_I=0;
0023ca  2800              CMP      r0,#0
0023cc  da00              BGE      |L1.9168|
0023ce  8033              STRH     r3,[r6,#0]
                  |L1.9168|
;;;2729   
;;;2730   #endif
;;;2731   #ifdef IPS_SGEP_GAZPROM
;;;2732   load_I=Isumm;
;;;2733   #endif
;;;2734   
;;;2735   
;;;2736   #ifdef UKU_GLONASS
;;;2737   inv[0]._Uio=6;
;;;2738   if (NUMINV)
;;;2739   	{
;;;2740   	for(i=0;i<NUMINV;i++)
;;;2741   		{
;;;2742   		if(bps[i+first_inv_slot]._cnt<25)
;;;2743        		{
;;;2744        		inv[i]._Ii=bps[i+first_inv_slot]._buff[0]+(bps[i+first_inv_slot]._buff[1]*256);
;;;2745        		inv[i]._Uin=bps[i+first_inv_slot]._buff[2]+(bps[i+first_inv_slot]._buff[3]*256);
;;;2746        		inv[i]._Uio=bps[i+first_inv_slot]._buff[4]+(bps[i+first_inv_slot]._buff[5]*256);
;;;2747        		inv[i]._Ti=(signed)(bps[i+first_inv_slot]._buff[6]);
;;;2748        		inv[i]._flags_tm=bps[i+first_inv_slot]._buff[8];
;;;2749   	    	//	inv[i]._rotor=bps[i+first_inv_slot]._buff[10]+(bps[i+first_inv_slot]._buff[11]*256);
;;;2750   			inv[i]._cnt=0;    
;;;2751        		} 
;;;2752   		else 
;;;2753        		{
;;;2754        		inv[i]._Uio=0; 
;;;2755        		inv[i]._Ii=0;
;;;2756        		inv[i]._Uin=0;
;;;2757        		inv[i]._Ti=0;
;;;2758        		inv[i]._flags_tm=0; 
;;;2759   //	     	inv[i]._rotor0;
;;;2760   			inv[i]._cnt=25;    
;;;2761        		}
;;;2762        	}
;;;2763      	}
;;;2764   #endif
;;;2765   
;;;2766   #ifndef UKU_GLONASS
;;;2767   if (NUMINV)
0023d0  488b              LDR      r0,|L1.9728|
0023d2  f9b05000          LDRSH    r5,[r0,#0]  ; NUMINV
0023d6  2d00              CMP      r5,#0
0023d8  d066              BEQ      |L1.9384|
;;;2768   	{
;;;2769   	for(i=0;i<NUMINV;i++)
0023da  f04f0200          MOV      r2,#0
;;;2770   		{
;;;2771   		if(bps[i+20]._cnt<25)
;;;2772        		{
;;;2773        		inv[i]._Ii=bps[i+20]._buff[0]+(bps[i+20]._buff[1]*256);
0023de  4e89              LDR      r6,|L1.9732|
0023e0  e060              B        |L1.9380|
                  |L1.9186|
0023e2  f1020014          ADD      r0,r2,#0x14           ;2771
0023e6  ebc001c0          RSB      r1,r0,r0,LSL #3       ;2771
0023ea  eb011000          ADD      r0,r1,r0,LSL #4       ;2771
0023ee  eb040080          ADD      r0,r4,r0,LSL #2       ;2771
0023f2  78c1              LDRB     r1,[r0,#3]            ;2771
0023f4  2919              CMP      r1,#0x19              ;2771
0023f6  d239              BCS      |L1.9324|
0023f8  7981              LDRB     r1,[r0,#6]
0023fa  79c7              LDRB     r7,[r0,#7]
0023fc  eb012707          ADD      r7,r1,r7,LSL #8
002400  eb020142          ADD      r1,r2,r2,LSL #1
002404  eb061141          ADD      r1,r6,r1,LSL #5
002408  61cf              STR      r7,[r1,#0x1c]
;;;2774        		inv[i]._Pio=bps[i+20]._buff[2]+(bps[i+20]._buff[3]*256);
00240a  7a07              LDRB     r7,[r0,#8]
00240c  f890c009          LDRB     r12,[r0,#9]
002410  eb07270c          ADD      r7,r7,r12,LSL #8
002414  62cf              STR      r7,[r1,#0x2c]
;;;2775        		inv[i]._Uio=bps[i+20]._buff[4]+(bps[i+20]._buff[5]*256);
002416  7a87              LDRB     r7,[r0,#0xa]
002418  f890c00b          LDRB     r12,[r0,#0xb]
00241c  eb07270c          ADD      r7,r7,r12,LSL #8
002420  618f              STR      r7,[r1,#0x18]
;;;2776        		inv[i]._Ti=(signed)(bps[i+20]._buff[6]);
002422  7b07              LDRB     r7,[r0,#0xc]
002424  620f              STR      r7,[r1,#0x20]
;;;2777        		inv[i]._flags_tm=bps[i+20]._buff[7];
002426  7b47              LDRB     r7,[r0,#0xd]
002428  f8817046          STRB     r7,[r1,#0x46]
;;;2778        		inv[i]._Uin=bps[i+20]._buff[8]+(bps[i+20]._buff[9]*256);
00242c  7b87              LDRB     r7,[r0,#0xe]
00242e  f890c00f          LDRB     r12,[r0,#0xf]
002432  eb07270c          ADD      r7,r7,r12,LSL #8
002436  628f              STR      r7,[r1,#0x28]
;;;2779        		inv[i]._Uil=bps[i+20]._buff[10]+(bps[i+20]._buff[11]*256);
002438  7c07              LDRB     r7,[r0,#0x10]
00243a  f890c011          LDRB     r12,[r0,#0x11]
00243e  eb07270c          ADD      r7,r7,r12,LSL #8
002442  624f              STR      r7,[r1,#0x24]
;;;2780   			inv[i]._cnt=0;
002444  708b              STRB     r3,[r1,#2]
;;;2781   			inv[i]._Uoutmin=bps[i+20]._buff[12]; 
002446  7c87              LDRB     r7,[r0,#0x12]
002448  f8817059          STRB     r7,[r1,#0x59]
;;;2782   			inv[i]._Uoutmax=bps[i+20]._buff[13]; 
00244c  7cc7              LDRB     r7,[r0,#0x13]
00244e  f881705a          STRB     r7,[r1,#0x5a]
;;;2783   			inv[i]._Pnom=bps[i+20]._buff[14]; 
002452  7d07              LDRB     r7,[r0,#0x14]
002454  f8817058          STRB     r7,[r1,#0x58]
;;;2784   			inv[i]._net_contr_en=bps[i+20]._buff[15];
002458  7d47              LDRB     r7,[r0,#0x15]
00245a  f881705b          STRB     r7,[r1,#0x5b]
;;;2785   			inv[i]._pwm_en=bps[i+20]._buff[16];  
00245e  7d87              LDRB     r7,[r0,#0x16]
002460  f881705c          STRB     r7,[r1,#0x5c]
;;;2786   			inv[i]._phase_mode=bps[i+20]._buff[17];  
002464  7dc0              LDRB     r0,[r0,#0x17]
002466  f881005d          STRB     r0,[r1,#0x5d]
00246a  e018              B        |L1.9374|
                  |L1.9324|
;;;2787        		} 
;;;2788   		else 
;;;2789        		{
;;;2790         		inv[i]._Ii=0;
00246c  eb020042          ADD      r0,r2,r2,LSL #1
002470  eb061040          ADD      r0,r6,r0,LSL #5
002474  61c3              STR      r3,[r0,#0x1c]
;;;2791   			inv[i]._Pio=0;
002476  62c3              STR      r3,[r0,#0x2c]
;;;2792   			inv[i]._Uio=0;
002478  6183              STR      r3,[r0,#0x18]
;;;2793        		inv[i]._Ti=0;
00247a  6203              STR      r3,[r0,#0x20]
;;;2794        		inv[i]._flags_tm=0; 
00247c  f8803046          STRB     r3,[r0,#0x46]
;;;2795        		inv[i]._Uil=0;
002480  6243              STR      r3,[r0,#0x24]
;;;2796        		inv[i]._Uin=0;
002482  6283              STR      r3,[r0,#0x28]
;;;2797   			inv[i]._cnt=25; 
002484  f04f0119          MOV      r1,#0x19
002488  7081              STRB     r1,[r0,#2]
;;;2798   			inv[i]._Uoutmin=0; 
00248a  f8803059          STRB     r3,[r0,#0x59]
;;;2799   			inv[i]._Uoutmax=0; 
00248e  f880305a          STRB     r3,[r0,#0x5a]
;;;2800   			inv[i]._Pnom=0; 
002492  f8803058          STRB     r3,[r0,#0x58]
;;;2801   			inv[i]._net_contr_en=0;
002496  f880305b          STRB     r3,[r0,#0x5b]
;;;2802   			inv[i]._pwm_en=0;   
00249a  f880305c          STRB     r3,[r0,#0x5c]
                  |L1.9374|
00249e  f1020201          ADD      r2,r2,#1              ;2769
0024a2  b2d2              UXTB     r2,r2                 ;2769
                  |L1.9380|
0024a4  42aa              CMP      r2,r5                 ;2769
0024a6  db9c              BLT      |L1.9186|
                  |L1.9384|
;;;2803   			   
;;;2804        		}
;;;2805        	}
;;;2806      	}
;;;2807   #endif
;;;2808   
;;;2809   #ifdef GLADKOV
;;;2810   inv[0]._Ii=bps[4]._buff[0]+(bps[4]._buff[1]*256);
;;;2811   inv[0]._Pio=bps[4]._buff[2]+(bps[4]._buff[3]*256);
;;;2812   inv[0]._Uio=bps[4]._buff[4]+(bps[4]._buff[5]*256);
;;;2813   inv[0]._Ti=(signed)(bps[4]._buff[6]);
;;;2814   inv[0]._flags_tm=bps[4]._buff[7];
;;;2815   inv[0]._Uin=bps[4]._buff[8]+(bps[4]._buff[9]*256);
;;;2816   inv[0]._Uil=bps[4]._buff[10]+(bps[4]._buff[11]*256);
;;;2817   inv[0]._cnt=0;    
;;;2818   
;;;2819   inv[1]._Ii=bps[21]._buff[0]+(bps[21]._buff[1]*256);
;;;2820   inv[1]._Pio=bps[21]._buff[2]+(bps[21]._buff[3]*256);
;;;2821   inv[1]._Uio=bps[21]._buff[4]+(bps[21]._buff[5]*256);
;;;2822   inv[1]._Ti=(signed)(bps[21]._buff[6]);
;;;2823   inv[1]._flags_tm=bps[21]._buff[7];
;;;2824   inv[1]._Uin=bps[21]._buff[8]+(bps[21]._buff[9]*256);
;;;2825   inv[1]._Uil=bps[21]._buff[10]+(bps[21]._buff[11]*256);
;;;2826   inv[1]._cnt=0;    
;;;2827   #endif
;;;2828   
;;;2829   /*
;;;2830   if((BAT_IS_ON[0]==bisON)&&(BAT_TYPE==1))
;;;2831   	{
;;;2832   	lakb[0]._battCommState=0;
;;;2833   	if(lakb[0]._cnt>10)lakb[0]._battCommState=2;
;;;2834   	else if(lakb[0]._bRS485ERR==1)lakb[0]._battCommState=1;
;;;2835   	
;;;2836   	if(lakb[0]._battCommState==0)
;;;2837   		{	
;;;2838   		bat[0]._Ub=(signed short)((lakb[0]._tot_bat_volt+5)/10);
;;;2839   		bat[0]._Ib=(signed short)lakb[0]._ch_curr;
;;;2840   		if(lakb[0]._dsch_curr) bat[0]._Ib=(signed short) (-lakb[0]._dsch_curr);
;;;2841   		bat[0]._Tb=(signed short)lakb[0]._max_cell_temp;
;;;2842   		}
;;;2843   	}
;;;2844   */
;;;2845   
;;;2846   #ifdef UKU_TELECORE2015
;;;2847   
;;;2848   	if(BAT_TYPE==2)
;;;2849   		{
;;;2850   		lakb[0]._ch_curr/*temp_SS*/=((ascii2halFhex(liBatteryInBuff[113]))<<12)+
;;;2851   					 		((ascii2halFhex(liBatteryInBuff[114]))<<8)+
;;;2852   							((ascii2halFhex(liBatteryInBuff[115]))<<4)+
;;;2853   							((ascii2halFhex(liBatteryInBuff[116])));
;;;2854   		
;;;2855   		/*if(temp_SS&0x8000)		lakb[0]._ch_curr=~temp_SS;
;;;2856   		else 				lakb[0]._ch_curr=temp_SS;*/
;;;2857   	
;;;2858   		lakb[0]._tot_bat_volt=	(unsigned short)(((ascii2halFhex(liBatteryInBuff[117]))<<12)+
;;;2859   							((ascii2halFhex(liBatteryInBuff[118]))<<8)+
;;;2860   							((ascii2halFhex(liBatteryInBuff[119]))<<4)+
;;;2861   							((ascii2halFhex(liBatteryInBuff[120]))))/100;
;;;2862   	
;;;2863   		lakb[0]._max_cell_temp= 	(((ascii2halFhex(liBatteryInBuff[93]))<<12)+
;;;2864   							((ascii2halFhex(liBatteryInBuff[94]))<<8)+
;;;2865   							((ascii2halFhex(liBatteryInBuff[95]))<<4)+
;;;2866   							((ascii2halFhex(liBatteryInBuff[96]))))/10-273;
;;;2867   	
;;;2868   		lakb[0]._s_o_c_abs=		(unsigned short)((ascii2halFhex(liBatteryInBuff[121]))<<12)+
;;;2869   							((ascii2halFhex(liBatteryInBuff[122]))<<8)+
;;;2870   							((ascii2halFhex(liBatteryInBuff[123]))<<4)+
;;;2871   							((ascii2halFhex(liBatteryInBuff[124])));
;;;2872   	
;;;2873   		lakb[0]._rat_cap=		(unsigned short)((ascii2halFhex(liBatteryInBuff[127]))<<12)+
;;;2874   							((ascii2halFhex(liBatteryInBuff[128]))<<8)+
;;;2875   							((ascii2halFhex(liBatteryInBuff[129]))<<4)+
;;;2876   							((ascii2halFhex(liBatteryInBuff[130])));
;;;2877   	
;;;2878   		lakb[0]._s_o_c=		lakb[0]._s_o_c_abs/(lakb[0]._rat_cap/100);
;;;2879   	
;;;2880   	
;;;2881   	/*	lakb[0]._rat_cap= (lakb_damp[i][13]*256)+ lakb_damp[i][14];
;;;2882   		lakb[0]._max_cell_volt= (lakb_damp[i][0]*256)+ lakb_damp[i][1];
;;;2883   		lakb[0]._min_cell_volt= (lakb_damp[i][2]*256)+ lakb_damp[i][3];
;;;2884   		lakb[0]._max_cell_temp= lakb_damp[i][4];
;;;2885   		lakb[0]._min_cell_temp= lakb_damp[i][5];
;;;2886   		lakb[0]._tot_bat_volt= (lakb_damp[i][6]*256)+ lakb_damp[i][7];
;;;2887   		lakb[0]._ch_curr= (lakb_damp[i][8]*256)+ lakb_damp[i][8];
;;;2888   		lakb[0]._dsch_curr= (lakb_damp[i][10]*256)+ lakb_damp[i][11];
;;;2889   		lakb[0]._s_o_c= lakb_damp[i][12];
;;;2890   		lakb[0]._r_b_t= lakb_damp[i][15];
;;;2891   		lakb[0]._c_c_l_v= (lakb_damp[i][16]*256)+ lakb_damp[i][17];
;;;2892   		lakb[0]._s_o_h= lakb_damp[i][18];
;;;2893   	
;;;2894   		if(lakb[i]._rat_cap==0)
;;;2895   			{
;;;2896   			if(lakb[i]._isOnCnt)
;;;2897   				{
;;;2898   				lakb[i]._isOnCnt--;
;;;2899   				if(lakb[i]._isOnCnt==0)
;;;2900   					{
;;;2901   					if(lakb[i]._battIsOn!=0) bLAKB_KONF_CH=1;
;;;2902   					}
;;;2903   				}
;;;2904   			}
;;;2905   		else 
;;;2906   			{
;;;2907   			if(lakb[i]._isOnCnt<50)
;;;2908   				{
;;;2909   				lakb[i]._isOnCnt++;
;;;2910   				if(lakb[i]._isOnCnt==50)
;;;2911   					{
;;;2912   					if(lakb[i]._battIsOn!=1) bLAKB_KONF_CH=1;
;;;2913   					}
;;;2914   				}
;;;2915   			}
;;;2916   		gran(&lakb[i]._isOnCnt,0,50);*/
;;;2917   		}
;;;2918   	else if(BAT_TYPE==3)
;;;2919   		{
;;;2920   		//short numOfPacks;
;;;2921   		//short numOfCells, numOfTemperCells, baseOfData;
;;;2922   		
;;;2923   		#ifndef UKU_TELECORE2016
;;;2924   		numOfCells=((ascii2halFhex(liBatteryInBuff[17]))<<4)+((ascii2halFhex(liBatteryInBuff[18])));
;;;2925   		numOfTemperCells=((ascii2halFhex(liBatteryInBuff[17+(numOfCells*4)+2]))<<4)+((ascii2halFhex(liBatteryInBuff[18+(numOfCells*4)+2])));
;;;2926   		numOfPacks=((ascii2halFhex(liBatteryInBuff[15]))<<4)+((ascii2halFhex(liBatteryInBuff[16])));
;;;2927   		if(numOfPacks)numOfPacks-=1;
;;;2928   		if((numOfPacks<0)||(numOfPacks>NUMBAT_TELECORE))numOfPacks=0;
;;;2929   		plazma_numOfCells=numOfCells;
;;;2930   		plazma_numOfTemperCells=numOfTemperCells;
;;;2931   		plazma_numOfPacks=numOfPacks;
;;;2932   
;;;2933   
;;;2934   		baseOfData=16+(numOfCells*4)+2+(numOfTemperCells*4)+2;
;;;2935   
;;;2936   		lakb[numOfPacks]._ch_curr=(signed short)(
;;;2937   							((ascii2halFhex(liBatteryInBuff[1+baseOfData]))<<12)+
;;;2938   							((ascii2halFhex(liBatteryInBuff[2+baseOfData]))<<8)+
;;;2939   							((ascii2halFhex(liBatteryInBuff[3+baseOfData]))<<4)+
;;;2940   							((ascii2halFhex(liBatteryInBuff[4+baseOfData])))
;;;2941   							);	  
;;;2942   
;;;2943   		lakb[numOfPacks]._tot_bat_volt=(signed short)(
;;;2944   							((ascii2halFhex(liBatteryInBuff[1+baseOfData+4]))<<12)+
;;;2945   							((ascii2halFhex(liBatteryInBuff[2+baseOfData+4]))<<8)+
;;;2946   							((ascii2halFhex(liBatteryInBuff[3+baseOfData+4]))<<4)+
;;;2947   							((ascii2halFhex(liBatteryInBuff[4+baseOfData+4])))
;;;2948   							)/10;
;;;2949   
;;;2950   		lakb[numOfPacks]._max_cell_temp=(signed short)(
;;;2951   							((ascii2halFhex(liBatteryInBuff[1+baseOfData-4]))<<12)+
;;;2952   							((ascii2halFhex(liBatteryInBuff[2+baseOfData-4]))<<8)+
;;;2953   							((ascii2halFhex(liBatteryInBuff[3+baseOfData-4]))<<4)+
;;;2954   							((ascii2halFhex(liBatteryInBuff[4+baseOfData-4])))
;;;2955   							)-2730;
;;;2956   
;;;2957   		lakb[numOfPacks]._s_o_c=(signed short)(
;;;2958   							((ascii2halFhex(liBatteryInBuff[1+baseOfData+8]))<<12)+
;;;2959   							((ascii2halFhex(liBatteryInBuff[2+baseOfData+8]))<<8)+
;;;2960   							((ascii2halFhex(liBatteryInBuff[3+baseOfData+8]))<<4)+
;;;2961   							((ascii2halFhex(liBatteryInBuff[4+baseOfData+8])))
;;;2962   							)/10;
;;;2963   
;;;2964   		lakb[numOfPacks]._s_o_h=(signed short)(
;;;2965   							((ascii2halFhex(liBatteryInBuff[1+baseOfData+14]))<<12)+
;;;2966   							((ascii2halFhex(liBatteryInBuff[2+baseOfData+14]))<<8)+
;;;2967   							((ascii2halFhex(liBatteryInBuff[3+baseOfData+14]))<<4)+
;;;2968   							((ascii2halFhex(liBatteryInBuff[4+baseOfData+14])))
;;;2969   							)/10;
;;;2970   		#endif
;;;2971   		
;;;2972   		#ifdef UKU_TELECORE2016
;;;2973   		{
;;;2974   		char i;
;;;2975   		
;;;2976   		for(i=0;i<NUMBAT_TELECORE;i++)
;;;2977   			{
;;;2978   			lakb[i]._s_o_c_percent= (signed short)(((unsigned long)lakb[i]._s_o_c*100UL)/(unsigned long)lakb[i]._s_o_h);
;;;2979   			}
;;;2980   		}
;;;2981   		#endif
;;;2982   		
;;;2983   										  
;;;2984   		}
;;;2985   	
;;;2986   if(sacredSunSilentCnt<3) 
;;;2987   	{
;;;2988       	bat[0]._Ub=lakb[0]._tot_bat_volt;
;;;2989       	bat[0]._Tb=lakb[0]._max_cell_temp;
;;;2990      	//bat[0]._Ib=lakb[0]._ch_curr/10;
;;;2991   	}
;;;2992   else 
;;;2993   	{
;;;2994       	//bat[0]._Ub=0;
;;;2995       	//bat[0]._Tb=0;
;;;2996      	//bat[0]._Ib=0;
;;;2997   	}
;;;2998   
;;;2999   if(BAT_TYPE==1)
;;;3000   	{
;;;3001   	char i;
;;;3002   	for(i=0;i<1;i++)
;;;3003   		{
;;;3004   		lakb[i]._rat_cap= (lakb_damp[i][13]*256)+ lakb_damp[i][14];
;;;3005   		lakb[i]._max_cell_volt= (lakb_damp[i][0]*256)+ lakb_damp[i][1];
;;;3006   		lakb[i]._min_cell_volt= (lakb_damp[i][2]*256)+ lakb_damp[i][3];
;;;3007   		lakb[i]._max_cell_temp= lakb_damp[i][4];
;;;3008   		lakb[i]._min_cell_temp= lakb_damp[i][5];
;;;3009   		lakb[i]._tot_bat_volt= (lakb_damp[i][6]*256)+ lakb_damp[i][7];
;;;3010   		lakb[i]._ch_curr= (lakb_damp[i][8]*256)+ lakb_damp[i][9];
;;;3011   		lakb[i]._dsch_curr= (lakb_damp[i][10]*256)+ lakb_damp[i][11];
;;;3012   		lakb[i]._s_o_c= lakb_damp[i][12];
;;;3013   		lakb[i]._r_b_t= lakb_damp[i][15];
;;;3014   		lakb[i]._c_c_l_v= (lakb_damp[i][16]*256)+ lakb_damp[i][17];
;;;3015   		lakb[i]._s_o_h= lakb_damp[i][18];
;;;3016   		lakb[i]._flags1= lakb_damp[i][34];
;;;3017   		lakb[i]._flags2= lakb_damp[i][35];
;;;3018   		lakb[i]._b_p_ser_num= lakb_damp[i][36];
;;;3019   
;;;3020   /*		if(lakb[i]._rat_cap==0)
;;;3021   			{
;;;3022   			if(lakb[i]._isOnCnt)
;;;3023   				{
;;;3024   				lakb[i]._isOnCnt--;
;;;3025   				if(lakb[i]._isOnCnt==0)
;;;3026   					{
;;;3027   					if(lakb[i]._battIsOn!=0) bLAKB_KONF_CH=1;
;;;3028   					}
;;;3029   				}
;;;3030   			}
;;;3031   		else 
;;;3032   			{
;;;3033   			if(lakb[i]._isOnCnt<50)
;;;3034   				{
;;;3035   				lakb[i]._isOnCnt++;
;;;3036   				if(lakb[i]._isOnCnt==50)
;;;3037   					{
;;;3038   					if(lakb[i]._battIsOn!=1) bLAKB_KONF_CH=1;
;;;3039   					}
;;;3040   				}
;;;3041   			} */
;;;3042   		gran(&lakb[i]._isOnCnt,0,50);
;;;3043   	 	}
;;;3044   
;;;3045   	if(lakb_damp[0][41]==100)
;;;3046   		{
;;;3047   		li_bat._485Error=1;
;;;3048   		}
;;;3049   	if(lakb_damp[0][41]==0)
;;;3050   		{
;;;3051   		//if(bRS485ERR)bLAKB_KONF_CH=1;
;;;3052   		li_bat._485Error=0;
;;;3053   		}
;;;3054   	li_bat._485ErrorCnt=lakb_damp[0][41];
;;;3055   
;;;3056   
;;;3057   	}
;;;3058   
;;;3059   
;;;3060   #endif
;;;3061   
;;;3062   		#ifdef UKU_TELECORE2017
;;;3063   		{
;;;3064   		char i;
;;;3065   		
;;;3066   		for(i=0;i<NUMBAT_TELECORE;i++)
;;;3067   			{
;;;3068   			lakb[i]._s_o_c_percent= (signed short)(((unsigned long)lakb[i]._s_o_c*100UL)/(unsigned long)lakb[i]._s_o_h);
;;;3069   			}
;;;3070   		}
;;;3071   		#endif
;;;3072   #ifdef UKU_TELECORE2015
;;;3073   //‚˚˜ËÒÎÂÌËÂ Ô‡‡ÏÂÚÓ‚ ‡·ÓÚ˚ ·‡Ú‡ÂË
;;;3074   //TODO ‰ÓÔËÒ‡Ú¸ ‰Îˇ ‚ÒÂı ·‡Ú‡ÂÈ ‚ÒÂ Ô‡‡ÏÂÚ˚ Ë ÔË ÓÚˆÂÔÍÂ ·‡Ú‡ÂÈ
;;;3075   li_bat._batStat=bsOK;
;;;3076   if(BAT_TYPE==1) //COSLIGHT
;;;3077   	{
;;;3078   	if(li_bat._batStat==bsOK)
;;;3079   		{
;;;3080   		li_bat._Ub=lakb[0]._tot_bat_volt/10;
;;;3081   
;;;3082   		if(lakb[0]._ch_curr)li_bat._Ib=lakb[0]._ch_curr/10;
;;;3083   		else if(lakb[0]._dsch_curr) li_bat._Ib=bat[0]._Ib/10;//lakb[0]._dsch_curr/10;
;;;3084   	
;;;3085   		li_bat._ratCap=lakb[0]._rat_cap/100;
;;;3086   		li_bat._soc=lakb[0]._s_o_c;
;;;3087   		li_bat._soh=lakb[0]._s_o_h;
;;;3088   		li_bat._cclv=lakb[0]._c_c_l_v/10;
;;;3089   		li_bat._Tb=lakb[0]._max_cell_temp;
;;;3090   		li_bat._rbt=lakb[0]._r_b_t;
;;;3091   		}
;;;3092   	else 
;;;3093   		{
;;;3094   		li_bat._Ub=bat[0]._Ub;
;;;3095   		li_bat._Ib=bat[0]._Ib/10;
;;;3096   		li_bat._Tb=bat[0]._Tb;
;;;3097   		}
;;;3098   
;;;3099   	if((li_bat._485Error)||(li_bat._canError))
;;;3100   		{
;;;3101   		li_bat._batStat=bsOFF;
;;;3102   		}
;;;3103   	else li_bat._batStat=bsOK;
;;;3104   	}
;;;3105   else if(BAT_TYPE==2) //SACRED SUN
;;;3106   	{
;;;3107   	}
;;;3108   else if(BAT_TYPE==3) //ZTT
;;;3109   	{
;;;3110   	if(li_bat._batStat==bsOK)
;;;3111   		{
;;;3112   
;;;3113   		}
;;;3114   	}
;;;3115   #endif
;;;3116   
;;;3117   
;;;3118   /*
;;;3119   if((BAT_IS_ON[0]==bisON)&&(BAT_TYPE[0]==1)&&(BAT_LINK==0))
;;;3120   	{
;;;3121   
;;;3122   
;;;3123   	if(bat_drv_rx_buff[13]<=0x39)bbb[0]=bat_drv_rx_buff[13]-0x30;
;;;3124   	else bbb[0]=bat_drv_rx_buff[13]-55;
;;;3125   	if(bat_drv_rx_buff[14]<=0x39)bbb[1]=bat_drv_rx_buff[14]-0x30;
;;;3126   	else bbb[1]=bat_drv_rx_buff[14]-55;
;;;3127   	if(bat_drv_rx_buff[15]<=0x39)bbb[2]=bat_drv_rx_buff[15]-0x30;
;;;3128   	else bbb[2]=bat_drv_rx_buff[15]-55;
;;;3129   	if(bat_drv_rx_buff[16]<=0x39)bbb[3]=bat_drv_rx_buff[16]-0x30;
;;;3130   	else bbb[3]=bat_drv_rx_buff[16]-55;
;;;3131   
;;;3132   	tempSS=0;
;;;3133   	tempSS=((bbb[0]*4096)+(bbb[1]*256)+(bbb[2]*16)+bbb[3]);
;;;3134   
;;;3135   	bat[0]._max_cell_volt=(tempSS+5)/10;
;;;3136   
;;;3137   	if(bat_drv_rx_buff[17]<=0x39)bbb[0]=bat_drv_rx_buff[17]-0x30;
;;;3138   	else bbb[0]=bat_drv_rx_buff[17]-55;
;;;3139   	if(bat_drv_rx_buff[18]<=0x39)bbb[1]=bat_drv_rx_buff[18]-0x30;
;;;3140   	else bbb[1]=bat_drv_rx_buff[18]-55;
;;;3141   	if(bat_drv_rx_buff[19]<=0x39)bbb[2]=bat_drv_rx_buff[19]-0x30;
;;;3142   	else bbb[2]=bat_drv_rx_buff[19]-55;
;;;3143   	if(bat_drv_rx_buff[20]<=0x39)bbb[3]=bat_drv_rx_buff[20]-0x30;
;;;3144   	else bbb[3]=bat_drv_rx_buff[20]-55;
;;;3145   
;;;3146   	tempSS=0;
;;;3147   	tempSS=((bbb[0]*4096)+(bbb[1]*256)+(bbb[2]*16)+bbb[3]);
;;;3148   
;;;3149   	bat[0]._min_cell_volt=(tempSS+5)/10;
;;;3150   
;;;3151   
;;;3152   	}*/
;;;3153   
;;;3154   
;;;3155   
;;;3156   }
0024a8  e8bd9ffc          POP      {r2-r12,pc}
;;;3157   
                          ENDP

                  mnemo_hndl PROC
;;;3158   //-----------------------------------------------
;;;3159   void mnemo_hndl(void)
0024ac  4a56              LDR      r2,|L1.9736|
;;;3160   {
;;;3161   if(((ind==iMn_220)||(ind==iMn))&&(sub_ind==0)&&(MNEMO_ON==mnON))
;;;3162   	{
;;;3163   	if(mnemo_cnt)mnemo_cnt--;
0024ae  4957              LDR      r1,|L1.9740|
0024b0  7810              LDRB     r0,[r2,#0]            ;3161  ; a_ind
0024b2  2804              CMP      r0,#4                 ;3161
0024b4  d001              BEQ      |L1.9402|
0024b6  2801              CMP      r0,#1                 ;3161
0024b8  d105              BNE      |L1.9414|
                  |L1.9402|
0024ba  7850              LDRB     r0,[r2,#1]            ;3161  ; a_ind
0024bc  b918              CBNZ     r0,|L1.9414|
0024be  4854              LDR      r0,|L1.9744|
0024c0  7800              LDRB     r0,[r0,#0]            ;3161  ; MNEMO_ON
0024c2  2855              CMP      r0,#0x55              ;3161
0024c4  d003              BEQ      |L1.9422|
                  |L1.9414|
;;;3164   	}
;;;3165   else mnemo_cnt=MNEMO_TIME;
0024c6  4853              LDR      r0,|L1.9748|
0024c8  8800              LDRH     r0,[r0,#0]  ; MNEMO_TIME
0024ca  7008              STRB     r0,[r1,#0]
                  |L1.9420|
;;;3166   }
0024cc  4770              BX       lr
                  |L1.9422|
0024ce  7808              LDRB     r0,[r1,#0]            ;3163  ; mnemo_cnt
0024d0  2800              CMP      r0,#0                 ;3163
0024d2  d0fb              BEQ      |L1.9420|
0024d4  f1a00001          SUB      r0,r0,#1              ;3163
0024d8  7008              STRB     r0,[r1,#0]            ;3163
0024da  4770              BX       lr
;;;3167   
                          ENDP

                  adc_init PROC
;;;3168   //-----------------------------------------------
;;;3169   void adc_init(void)
0024dc  484e              LDR      r0,|L1.9752|
;;;3170   {
;;;3171   
;;;3172   SET_REG(LPC_PINCON->PINSEL1,1,(25-16)*2,2);
0024de  6841              LDR      r1,[r0,#4]
0024e0  f4212140          BIC      r1,r1,#0xc0000
0024e4  f4412180          ORR      r1,r1,#0x40000
0024e8  6041              STR      r1,[r0,#4]
;;;3173   SET_REG(LPC_PINCON->PINSEL1,1,(24-16)*2,2);
0024ea  6841              LDR      r1,[r0,#4]
0024ec  f4213140          BIC      r1,r1,#0x30000
0024f0  f4413180          ORR      r1,r1,#0x10000
0024f4  6041              STR      r1,[r0,#4]
;;;3174   SET_REG(LPC_PINCON->PINSEL1,1,(23-16)*2,2);
0024f6  6841              LDR      r1,[r0,#4]
0024f8  f4214140          BIC      r1,r1,#0xc000
0024fc  f4414180          ORR      r1,r1,#0x4000
002500  6041              STR      r1,[r0,#4]
;;;3175   
;;;3176   
;;;3177   SET_REG(LPC_PINCON->PINMODE1,2,(25-16)*2,2);
002502  6c41              LDR      r1,[r0,#0x44]
002504  f4212140          BIC      r1,r1,#0xc0000
002508  f4412100          ORR      r1,r1,#0x80000
00250c  6441              STR      r1,[r0,#0x44]
;;;3178   SET_REG(LPC_PINCON->PINMODE1,2,(24-16)*2,2);
00250e  6c41              LDR      r1,[r0,#0x44]
002510  f4213140          BIC      r1,r1,#0x30000
002514  f4413100          ORR      r1,r1,#0x20000
002518  6441              STR      r1,[r0,#0x44]
;;;3179   SET_REG(LPC_PINCON->PINMODE1,2,(23-16)*2,2);
00251a  6c41              LDR      r1,[r0,#0x44]
00251c  f4214140          BIC      r1,r1,#0xc000
002520  f4414100          ORR      r1,r1,#0x8000
002524  6441              STR      r1,[r0,#0x44]
;;;3180   
;;;3181   SET_REG(LPC_ADC->ADCR,0,24,3);
002526  483d              LDR      r0,|L1.9756|
002528  6801              LDR      r1,[r0,#0]
00252a  f02161e0          BIC      r1,r1,#0x7000000
00252e  6001              STR      r1,[r0,#0]
;;;3182   
;;;3183   SET_REG(LPC_ADC->ADCR,1,21,1);
002530  6801              LDR      r1,[r0,#0]
002532  f4411100          ORR      r1,r1,#0x200000
002536  6001              STR      r1,[r0,#0]
;;;3184   SET_REG(LPC_ADC->ADCR,0,16,1);
002538  6801              LDR      r1,[r0,#0]
00253a  f4213180          BIC      r1,r1,#0x10000
00253e  6001              STR      r1,[r0,#0]
;;;3185   SET_REG(LPC_ADC->ADCR,1,8,8);
002540  6801              LDR      r1,[r0,#0]
002542  f421417f          BIC      r1,r1,#0xff00
002546  f4417180          ORR      r1,r1,#0x100
00254a  6001              STR      r1,[r0,#0]
;;;3186   
;;;3187   //SET_REG(LPC_GPIO0->FIODIR,7,5,3);
;;;3188   //SET_REG(LPC_GPIO0->FIOPIN,4,5,3);
;;;3189   	
;;;3190   	/*if(adc_ch<=7)*///SET_REG(LPC_ADC->ADCR,1<<5,0,8);
;;;3191        /*else if(adc_ch==8) SET_REG(LPC_ADC->ADCR,1<<2,0,8);
;;;3192        else SET_REG(LPC_ADC->ADCR,1<<4,0,8);*/
;;;3193   
;;;3194   LPC_ADC->ADINTEN     =  (1<< 8);      /* global enable interrupt            */
00254c  f44f7180          MOV      r1,#0x100
002550  60c1              STR      r1,[r0,#0xc]
002552  4833              LDR      r0,|L1.9760|
002554  f44f0180          MOV      r1,#0x400000
002558  6001              STR      r1,[r0,#0]
;;;3195   
;;;3196   NVIC_EnableIRQ(ADC_IRQn);             /* enable ADC Interrupt               */
;;;3197   
;;;3198   
;;;3199   }
00255a  4770              BX       lr
;;;3200   
                          ENDP

                  adc_drv7 PROC
;;;3201   //-----------------------------------------------
;;;3202   void adc_drv7(void) //(UÒÂÚË - ÔÓÒÚÓˇÌÍ‡)
00255c  e92d41f0          PUSH     {r4-r8,lr}
;;;3203   {
;;;3204   //int temp_S;
;;;3205   //char i;
;;;3206   //signed short temp_SS;
;;;3207   
;;;3208   adc_self_ch_disp[0]=abs_pal(adc_self_ch_buff[1]-adc_self_ch_buff[0]);//adc_self_ch_buff[0]&0x0f80;
002560  4c30              LDR      r4,|L1.9764|
002562  8860              LDRH     r0,[r4,#2]  ; adc_self_ch_buff
002564  8821              LDRH     r1,[r4,#0]  ; adc_self_ch_buff
002566  1a40              SUBS     r0,r0,r1
002568  b200              SXTH     r0,r0
00256a  f7fffffe          BL       abs_pal
00256e  1da6              ADDS     r6,r4,#6
002570  8030              STRH     r0,[r6,#0]
;;;3209   adc_self_ch_disp[1]=abs_pal(adc_self_ch_buff[2]-adc_self_ch_buff[1]);//adc_self_ch_buff[1]&0x0f80;
002572  88a0              LDRH     r0,[r4,#4]  ; adc_self_ch_buff
002574  8861              LDRH     r1,[r4,#2]  ; adc_self_ch_buff
002576  1a40              SUBS     r0,r0,r1
002578  b200              SXTH     r0,r0
00257a  f7fffffe          BL       abs_pal
00257e  8070              STRH     r0,[r6,#2]
;;;3210   adc_self_ch_disp[2]=abs_pal(adc_self_ch_buff[2]-adc_self_ch_buff[0]);//adc_self_ch_buff[2]&0x0f80;
002580  88a0              LDRH     r0,[r4,#4]  ; adc_self_ch_buff
002582  8821              LDRH     r1,[r4,#0]  ; adc_self_ch_buff
002584  1a40              SUBS     r0,r0,r1
002586  b200              SXTH     r0,r0
002588  f7fffffe          BL       abs_pal
00258c  80b0              STRH     r0,[r6,#4]
;;;3211   
;;;3212   //adc_self_ch_disp[0]=adc_self_ch_buff[0]&0x0ff0;
;;;3213   //adc_self_ch_disp[1]=adc_self_ch_buff[1]&0x0ff0;
;;;3214   //adc_self_ch_disp[2]=adc_self_ch_buff[2]&0x0ff0;
;;;3215   
;;;3216   
;;;3217   if(adc_self_ch_disp[2]<300)//==adc_self_ch_disp[2])
00258e  f44f7196          MOV      r1,#0x12c
;;;3218   	{
;;;3219   	adc_result=adc_self_ch_buff[2];
002592  f1a405ce          SUB      r5,r4,#0xce
002596  4288              CMP      r0,r1                 ;3217
002598  da02              BGE      |L1.9632|
00259a  88a0              LDRH     r0,[r4,#4]  ; adc_self_ch_buff
00259c  8628              STRH     r0,[r5,#0x30]
00259e  e00c              B        |L1.9658|
                  |L1.9632|
;;;3220   	} 
;;;3221   else if(adc_self_ch_disp[1]<300)//==adc_self_ch_disp[2])
0025a0  f9b60002          LDRSH    r0,[r6,#2]  ; adc_self_ch_disp
0025a4  4288              CMP      r0,r1
0025a6  da02              BGE      |L1.9646|
;;;3222   	{
;;;3223   	adc_result=adc_self_ch_buff[1];
0025a8  8860              LDRH     r0,[r4,#2]  ; adc_self_ch_buff
0025aa  8628              STRH     r0,[r5,#0x30]
0025ac  e005              B        |L1.9658|
                  |L1.9646|
;;;3224   	}
;;;3225   else if(adc_self_ch_disp[0]<300)//==adc_self_ch_disp[1])
0025ae  f9b60000          LDRSH    r0,[r6,#0]  ; adc_self_ch_disp
0025b2  4288              CMP      r0,r1
0025b4  da01              BGE      |L1.9658|
;;;3226   	{
;;;3227   	adc_result=adc_self_ch_buff[0];
0025b6  8820              LDRH     r0,[r4,#0]  ; adc_self_ch_buff
0025b8  8628              STRH     r0,[r5,#0x30]
                  |L1.9658|
;;;3228   	}
;;;3229       //adc_result=92;
;;;3230   
;;;3231   if(adc_ch_net)
0025ba  792f              LDRB     r7,[r5,#4]  ; adc_ch_net
0025bc  2600              MOVS     r6,#0
0025be  b3af              CBZ      r7,|L1.9772|
;;;3232   	{
;;;3233   
;;;3234   	main_power_buffer[0]+=(long)(adc_result);
0025c0  4819              LDR      r0,|L1.9768|
0025c2  f9b51030          LDRSH    r1,[r5,#0x30]  ; adc_result
0025c6  6802              LDR      r2,[r0,#0]  ; main_power_buffer
0025c8  440a              ADD      r2,r2,r1
0025ca  6002              STR      r2,[r0,#0]  ; main_power_buffer
;;;3235   	main_power_buffer[1]+=(long)(adc_result);
0025cc  6842              LDR      r2,[r0,#4]  ; main_power_buffer
0025ce  440a              ADD      r2,r2,r1
0025d0  6042              STR      r2,[r0,#4]  ; main_power_buffer
;;;3236   	main_power_buffer[2]+=(long)(adc_result);
0025d2  e02c              B        |L1.9774|
                  |L1.9684|
                          DCD      Uvv_eb2
                  |L1.9688|
                          DCD      Kpes_eb2
                  |L1.9692|
                          DCD      Upes_eb2
                  |L1.9696|
                          DCD      t_ext
                  |L1.9700|
                          DCD      ibt
                  |L1.9704|
                          DCD      t_box
                  |L1.9708|
                          DCD      t_ext_can_nd
                  |L1.9712|
                          DCD      t_ext_can
                  |L1.9716|
                          DCD      BAT_IS_ON
                  |L1.9720|
                          DCD      load_I
                  |L1.9724|
                          DCD      Isumm
                  |L1.9728|
                          DCD      NUMINV
                  |L1.9732|
                          DCD      inv
                  |L1.9736|
                          DCD      a_ind
                  |L1.9740|
                          DCD      mnemo_cnt
                  |L1.9744|
                          DCD      MNEMO_ON
                  |L1.9748|
                          DCD      MNEMO_TIME
                  |L1.9752|
                          DCD      0x4002c000
                  |L1.9756|
                          DCD      0x40034000
                  |L1.9760|
                          DCD      0xe000e100
                  |L1.9764|
                          DCD      ||area_number.25||+0xce
                  |L1.9768|
                          DCD      ||.bss||+0x420
                  |L1.9772|
00262c  e01c              B        |L1.9832|
                  |L1.9774|
00262e  6882              LDR      r2,[r0,#8]  ; main_power_buffer
002630  440a              ADD      r2,r2,r1
002632  6082              STR      r2,[r0,#8]  ; main_power_buffer
;;;3237   	main_power_buffer[3]+=(long)(adc_result);
002634  68c2              LDR      r2,[r0,#0xc]  ; main_power_buffer
002636  4411              ADD      r1,r1,r2
002638  60c1              STR      r1,[r0,#0xc]  ; main_power_buffer
;;;3238   
;;;3239   	adc_net_buff_cnt++;
00263a  8f29              LDRH     r1,[r5,#0x38]  ; adc_net_buff_cnt
00263c  f1010101          ADD      r1,r1,#1
002640  b209              SXTH     r1,r1
002642  8729              STRH     r1,[r5,#0x38]
;;;3240   	if(adc_net_buff_cnt>=0x1000)
002644  f5b15f80          CMP      r1,#0x1000
002648  db00              BLT      |L1.9804|
;;;3241   		{
;;;3242   		adc_net_buff_cnt=0;
00264a  872e              STRH     r6,[r5,#0x38]
                  |L1.9804|
;;;3243   		}
;;;3244   	if((adc_net_buff_cnt&0x03ff)==0)
00264c  f9b51038          LDRSH    r1,[r5,#0x38]  ; adc_net_buff_cnt
002650  058a              LSLS     r2,r1,#22
002652  d12f              BNE      |L1.9908|
;;;3245   		{
;;;3246   		#ifdef UKU_220
;;;3247   		net_buff_=(short)((main_power_buffer[adc_net_buff_cnt>>10])>>11);
;;;3248   		#else
;;;3249   		#ifdef UKU_220_V2
;;;3250   		net_buff_=(short)((main_power_buffer[adc_net_buff_cnt>>10])>>11);
;;;3251   		#else
;;;3252   		net_buff_=(short)((main_power_buffer[adc_net_buff_cnt>>10])>>8);
002654  ea4f21a1          ASR      r1,r1,#10
002658  f8502021          LDR      r2,[r0,r1,LSL #2]
00265c  ea4f2222          ASR      r2,r2,#8
002660  85ea              STRH     r2,[r5,#0x2e]
;;;3253   		#endif
;;;3254   		#endif
;;;3255   		main_power_buffer[adc_net_buff_cnt>>10]=0;
002662  f8406021          STR      r6,[r0,r1,LSL #2]
002666  e025              B        |L1.9908|
                  |L1.9832|
;;;3256   		}
;;;3257   
;;;3258   
;;;3259   	} 
;;;3260   else if(!adc_ch_net)
;;;3261   	{
;;;3262   	adc_buff[adc_ch][adc_ch_cnt]=(long)adc_result;
002668  48f8              LDR      r0,|L1.10828|
00266a  796c              LDRB     r4,[r5,#5]  ; adc_ch
00266c  79aa              LDRB     r2,[r5,#6]  ; adc_ch_cnt
00266e  eb001384          ADD      r3,r0,r4,LSL #6
002672  f9b51030          LDRSH    r1,[r5,#0x30]  ; adc_result
002676  f8431022          STR      r1,[r3,r2,LSL #2]
;;;3263   	
;;;3264   	if((adc_ch_cnt&0x03)==0)
00267a  0790              LSLS     r0,r2,#30
00267c  d10d              BNE      |L1.9882|
;;;3265   		{
;;;3266   		long temp_L;
;;;3267   		char i;
;;;3268   		temp_L=0;
00267e  4601              MOV      r1,r0
                  |L1.9856|
;;;3269   		for(i=0;i<16;i++)
;;;3270   			{
;;;3271   			temp_L+=adc_buff[adc_ch][i];
002680  f853c020          LDR      r12,[r3,r0,LSL #2]
002684  4461              ADD      r1,r1,r12
002686  f1000001          ADD      r0,r0,#1              ;3269
00268a  b2c0              UXTB     r0,r0                 ;3269
00268c  2810              CMP      r0,#0x10              ;3269
00268e  d3f7              BCC      |L1.9856|
;;;3272   			}
;;;3273   		adc_buff_[adc_ch]= (short)(temp_L>>4);
002690  ea4f1021          ASR      r0,r1,#4
002694  49ee              LDR      r1,|L1.10832|
002696  f8210014          STRH     r0,[r1,r4,LSL #1]
                  |L1.9882|
;;;3274   
;;;3275   		//adc_buff_[3]=346;
;;;3276   		}
;;;3277   	if(++adc_ch>=16) 
00269a  1c64              ADDS     r4,r4,#1
00269c  b2e0              UXTB     r0,r4
00269e  7168              STRB     r0,[r5,#5]
0026a0  2810              CMP      r0,#0x10
0026a2  d307              BCC      |L1.9908|
;;;3278   		{
;;;3279   		adc_ch=0;
0026a4  716e              STRB     r6,[r5,#5]
;;;3280   		adc_ch_cnt++;
0026a6  f1020201          ADD      r2,r2,#1
0026aa  b2d0              UXTB     r0,r2
0026ac  71a8              STRB     r0,[r5,#6]
;;;3281   		if(adc_ch_cnt>=16)adc_ch_cnt=0;
0026ae  2810              CMP      r0,#0x10
0026b0  d300              BCC      |L1.9908|
0026b2  71ae              STRB     r6,[r5,#6]
                  |L1.9908|
;;;3282   		}
;;;3283   	}
;;;3284   
;;;3285   //adc_buff[adc_ch][adc_cnt1]=(adc_self_ch_buff[2]+adc_self_ch_buff[1])/2;
;;;3286   
;;;3287   //if(adc_buff[adc_ch][adc_cnt1]<adc_buff_min[adc_ch])adc_buff_min[adc_ch]=adc_buff[adc_ch][adc_cnt1];
;;;3288   //if(adc_buff[adc_ch][adc_cnt1]>adc_buff_max[adc_ch])adc_buff_max[adc_ch]=adc_buff[adc_ch][adc_cnt1];
;;;3289   /*
;;;3290   	{
;;;3291   	if((adc_cnt1&0x03)==0)
;;;3292   		{
;;;3293   		temp_S=0;
;;;3294   		for(i=0;i<16;i++)
;;;3295   			{
;;;3296   			temp_S+=adc_buff[adc_ch][i];
;;;3297   			} 
;;;3298            	adc_buff_[adc_ch]=temp_S>>4;
;;;3299             }
;;;3300   	}*/
;;;3301   
;;;3302   
;;;3303   		  
;;;3304   
;;;3305   adc_self_ch_cnt=0;
0026b4  70ee              STRB     r6,[r5,#3]
;;;3306   
;;;3307   adc_ch_net++;
0026b6  f1070701          ADD      r7,r7,#1
;;;3308   adc_ch_net&=1;
0026ba  f0070001          AND      r0,r7,#1
0026be  7128              STRB     r0,[r5,#4]
;;;3309   
;;;3310   //SET_REG(LPC_GPIO0->FIODIR,7,5,3);
;;;3311   //SET_REG(LPC_GPIO0->FIOPIN,adc_ch,5,3);
;;;3312   
;;;3313   if(adc_ch_net)
;;;3314   	{
;;;3315   	//LPC_GPIO2->FIODIR|=(1<<7);
;;;3316   	//LPC_GPIO2->FIOPIN|=(1<<7);
;;;3317   	SET_REG(LPC_ADC->ADCR,1<<2,0,8);
0026c0  4ae4              LDR      r2,|L1.10836|
0026c2  b130              CBZ      r0,|L1.9938|
0026c4  6810              LDR      r0,[r2,#0]
0026c6  f02000ff          BIC      r0,r0,#0xff
0026ca  f1000004          ADD      r0,r0,#4
0026ce  6010              STR      r0,[r2,#0]
0026d0  e03d              B        |L1.10062|
                  |L1.9938|
;;;3318   	}
;;;3319   else
;;;3320   	{
;;;3321   	//LPC_GPIO2->FIODIR|=(1<<7);
;;;3322   	//LPC_GPIO2->FIOPIN&=~(1<<7);
;;;3323   	if(!(adc_ch&(1<<3)))SET_REG(LPC_ADC->ADCR,1<<0,0,8);
0026d2  7969              LDRB     r1,[r5,#5]  ; adc_ch
0026d4  0708              LSLS     r0,r1,#28
0026d6  d406              BMI      |L1.9958|
0026d8  6810              LDR      r0,[r2,#0]
0026da  f02000ff          BIC      r0,r0,#0xff
0026de  f1000001          ADD      r0,r0,#1
0026e2  6010              STR      r0,[r2,#0]
0026e4  e005              B        |L1.9970|
                  |L1.9958|
;;;3324   	else 			SET_REG(LPC_ADC->ADCR,1<<1,0,8);
0026e6  6810              LDR      r0,[r2,#0]
0026e8  f02000ff          BIC      r0,r0,#0xff
0026ec  f1000002          ADD      r0,r0,#2
0026f0  6010              STR      r0,[r2,#0]
                  |L1.9970|
;;;3325   
;;;3326   
;;;3327   	SET_REG(LPC_GPIO0->FIODIR,1,28,1);
0026f2  48d9              LDR      r0,|L1.10840|
0026f4  6803              LDR      r3,[r0,#0]
0026f6  f0435380          ORR      r3,r3,#0x10000000
0026fa  6003              STR      r3,[r0,#0]
;;;3328   	SET_REG(LPC_GPIO1->FIODIR,1,30,1);
0026fc  6a03              LDR      r3,[r0,#0x20]
0026fe  f0434380          ORR      r3,r3,#0x40000000
002702  6203              STR      r3,[r0,#0x20]
;;;3329   	SET_REG(LPC_GPIO3->FIODIR,1,26,1);
002704  6e03              LDR      r3,[r0,#0x60]
002706  f0436380          ORR      r3,r3,#0x4000000
00270a  6603              STR      r3,[r0,#0x60]
;;;3330   
;;;3331   	if(!(adc_ch&(1<<0)))SET_REG(LPC_GPIO0->FIOPIN,0,28,1);
00270c  07cb              LSLS     r3,r1,#31
00270e  d00a              BEQ      |L1.10022|
;;;3332   	else 			SET_REG(LPC_GPIO0->FIOPIN,1,28,1);
002710  6943              LDR      r3,[r0,#0x14]
002712  f0435380          ORR      r3,r3,#0x10000000
002716  6143              STR      r3,[r0,#0x14]
                  |L1.10008|
;;;3333   
;;;3334   	if(!(adc_ch&(1<<1)))SET_REG(LPC_GPIO1->FIOPIN,0,30,1);
002718  078b              LSLS     r3,r1,#30
00271a  d409              BMI      |L1.10032|
00271c  6b43              LDR      r3,[r0,#0x34]
00271e  f0234380          BIC      r3,r3,#0x40000000
002722  6343              STR      r3,[r0,#0x34]
002724  e008              B        |L1.10040|
                  |L1.10022|
002726  6943              LDR      r3,[r0,#0x14]         ;3331
002728  f0235380          BIC      r3,r3,#0x10000000     ;3331
00272c  6143              STR      r3,[r0,#0x14]         ;3331
00272e  e7f3              B        |L1.10008|
                  |L1.10032|
;;;3335   	else 			SET_REG(LPC_GPIO1->FIOPIN,1,30,1);
002730  6b43              LDR      r3,[r0,#0x34]
002732  f0434380          ORR      r3,r3,#0x40000000
002736  6343              STR      r3,[r0,#0x34]
                  |L1.10040|
;;;3336   
;;;3337   	if(!(adc_ch&(1<<2)))SET_REG(LPC_GPIO3->FIOPIN,0,26,1);
002738  0749              LSLS     r1,r1,#29
00273a  d404              BMI      |L1.10054|
00273c  6f41              LDR      r1,[r0,#0x74]
00273e  f0216180          BIC      r1,r1,#0x4000000
002742  6741              STR      r1,[r0,#0x74]
002744  e003              B        |L1.10062|
                  |L1.10054|
;;;3338   	else 			SET_REG(LPC_GPIO3->FIOPIN,1,26,1);
002746  6f41              LDR      r1,[r0,#0x74]
002748  f0416180          ORR      r1,r1,#0x4000000
00274c  6741              STR      r1,[r0,#0x74]
                  |L1.10062|
;;;3339   	}
;;;3340   	
;;;3341   
;;;3342   
;;;3343   
;;;3344   LPC_ADC->ADCR |=  (1<<24);
00274e  6810              LDR      r0,[r2,#0]
002750  f0407080          ORR      r0,r0,#0x1000000
002754  6010              STR      r0,[r2,#0]
;;;3345   
;;;3346   }
002756  e8bd81f0          POP      {r4-r8,pc}
;;;3347   
                          ENDP

                  avg_hndl PROC
;;;3604   //-----------------------------------------------
;;;3605   void avg_hndl(void)
00275a  b5f0              PUSH     {r4-r7,lr}
;;;3606   { 
;;;3607   char i;
;;;3608   
;;;3609   //#define AVGCNTMAX	5
;;;3610   if(avg_main_cnt)
00275c  4dbf              LDR      r5,|L1.10844|
00275e  f9b5002a          LDRSH    r0,[r5,#0x2a]  ; avg_main_cnt
002762  b118              CBZ      r0,|L1.10092|
;;;3611   	{
;;;3612   	avg_main_cnt--;
002764  f1a00001          SUB      r0,r0,#1
002768  8568              STRH     r0,[r5,#0x2a]
;;;3613   	goto avg_hndl_end;
00276a  e096              B        |L1.10394|
                  |L1.10092|
;;;3614   	}                 
;;;3615   
;;;3616   avg_num=0;
00276c  f04f0600          MOV      r6,#0
002770  736e              STRB     r6,[r5,#0xd]
;;;3617   
;;;3618   for(i=0;i<NUMIST;i++)
002772  4630              MOV      r0,r6
002774  49bb              LDR      r1,|L1.10852|
;;;3619   	{
;;;3620   	if((bps[i]._state==bsWRK)&&(bps[i]._cnt<20))avg_num++;
002776  4bba              LDR      r3,|L1.10848|
002778  f9b12000          LDRSH    r2,[r1,#0]            ;3618
00277c  e012              B        |L1.10148|
                  |L1.10110|
00277e  ebc001c0          RSB      r1,r0,r0,LSL #3
002782  eb011100          ADD      r1,r1,r0,LSL #4
002786  eb030181          ADD      r1,r3,r1,LSL #2
00278a  788c              LDRB     r4,[r1,#2]
00278c  2c01              CMP      r4,#1
00278e  d106              BNE      |L1.10142|
002790  78c9              LDRB     r1,[r1,#3]
002792  2914              CMP      r1,#0x14
002794  d203              BCS      |L1.10142|
002796  7b69              LDRB     r1,[r5,#0xd]  ; avg_num
002798  f1010101          ADD      r1,r1,#1
00279c  7369              STRB     r1,[r5,#0xd]
                  |L1.10142|
00279e  f1000001          ADD      r0,r0,#1              ;3618
0027a2  b2c0              UXTB     r0,r0                 ;3618
                  |L1.10148|
0027a4  4290              CMP      r0,r2                 ;3618
0027a6  dbea              BLT      |L1.10110|
;;;3621   	}
;;;3622   
;;;3623   /*if((K[NUMI]>=1)&&(bps_state[0]==ssWRK))	avg_num++;
;;;3624   if((K[NUMI]>=2)&&(bps_state[1]==ssWRK))	avg_num++;
;;;3625   if((K[NUMI]>=3)&&(bps_state[2]==ssWRK))	avg_num++;*/
;;;3626   
;;;3627   	
;;;3628   if(avg_num<2)
0027a8  7b6f              LDRB     r7,[r5,#0xd]  ; avg_num
0027aa  2f02              CMP      r7,#2
0027ac  d375              BCC      |L1.10394|
;;;3629   	{
;;;3630   	goto avg_hndl_end;
;;;3631   	}
;;;3632   	
;;;3633   else
;;;3634   	{
;;;3635   	i_avg_min=5000;
0027ae  4cab              LDR      r4,|L1.10844|
0027b0  f2413088          MOV      r0,#0x1388
0027b4  f1040480          ADD      r4,r4,#0x80
0027b8  60e0              STR      r0,[r4,#0xc]  ; i_avg_min
;;;3636   	i_avg_max=0;
0027ba  60a6              STR      r6,[r4,#8]  ; i_avg_max
;;;3637   	i_avg_summ=0;
0027bc  6126              STR      r6,[r4,#0x10]  ; i_avg_summ
;;;3638   	for(i=0;i<NUMIST;i++)
0027be  f04f0100          MOV      r1,#0
0027c2  e01c              B        |L1.10238|
                  |L1.10180|
;;;3639   		{
;;;3640   		if(bps[i]._state==bsWRK)
0027c4  ebc100c1          RSB      r0,r1,r1,LSL #3
0027c8  eb001001          ADD      r0,r0,r1,LSL #4
0027cc  eb030080          ADD      r0,r3,r0,LSL #2
0027d0  f890c002          LDRB     r12,[r0,#2]
0027d4  f1bc0f01          CMP      r12,#1
0027d8  d10e              BNE      |L1.10232|
;;;3641   			{
;;;3642   			if(bps[i]._Ii>i_avg_max)i_avg_max=bps[i]._Ii;
0027da  6a40              LDR      r0,[r0,#0x24]
0027dc  f8d4c008          LDR      r12,[r4,#8]  ; i_avg_max
0027e0  4560              CMP      r0,r12
0027e2  dd00              BLE      |L1.10214|
0027e4  60a0              STR      r0,[r4,#8]  ; i_avg_max
                  |L1.10214|
;;;3643   			if(bps[i]._Ii<i_avg_min)i_avg_min=bps[i]._Ii;
0027e6  f8d4c00c          LDR      r12,[r4,#0xc]  ; i_avg_min
0027ea  4560              CMP      r0,r12
0027ec  da00              BGE      |L1.10224|
0027ee  60e0              STR      r0,[r4,#0xc]  ; i_avg_min
                  |L1.10224|
;;;3644   			
;;;3645   			i_avg_summ+=bps[i]._Ii;
0027f0  f8d4c010          LDR      r12,[r4,#0x10]  ; i_avg_summ
0027f4  4460              ADD      r0,r0,r12
0027f6  6120              STR      r0,[r4,#0x10]  ; i_avg_summ
                  |L1.10232|
0027f8  f1010101          ADD      r1,r1,#1              ;3638
0027fc  b2c9              UXTB     r1,r1                 ;3638
                  |L1.10238|
0027fe  4291              CMP      r1,r2                 ;3638
002800  dbe0              BLT      |L1.10180|
;;;3646   			}
;;;3647   		}
;;;3648   	i_avg=i_avg_summ/avg_num;	
002802  6920              LDR      r0,[r4,#0x10]  ; i_avg_summ
002804  fb90f7f7          SDIV     r7,r0,r7
002808  6167              STR      r7,[r4,#0x14]  ; i_avg
;;;3649   	
;;;3650   	if(i_avg_min==0)i_avg_min=1;
00280a  68e0              LDR      r0,[r4,#0xc]  ; i_avg_min
00280c  2101              MOVS     r1,#1                 ;3620
00280e  b900              CBNZ     r0,|L1.10258|
002810  60e1              STR      r1,[r4,#0xc]  ; i_avg_min
                  |L1.10258|
;;;3651   
;;;3652   	avg=i_avg_max;
002812  68a0              LDR      r0,[r4,#8]  ; i_avg_max
;;;3653   	avg*=100;
002814  f04f0c64          MOV      r12,#0x64
002818  fb00f00c          MUL      r0,r0,r12
;;;3654   	avg/=i_avg_min;
00281c  f8d4c00c          LDR      r12,[r4,#0xc]  ; i_avg_min
002820  fb90f0fc          SDIV     r0,r0,r12
002824  61a0              STR      r0,[r4,#0x18]  ; avg
;;;3655   
;;;3656   	if(avg>160) bAVG=1;
002826  28a0              CMP      r0,#0xa0
002828  dd00              BLE      |L1.10284|
00282a  7329              STRB     r1,[r5,#0xc]
                  |L1.10284|
;;;3657   	if(avg<120) bAVG=0;
00282c  2878              CMP      r0,#0x78
00282e  da00              BGE      |L1.10290|
002830  732e              STRB     r6,[r5,#0xc]
                  |L1.10290|
;;;3658   
;;;3659   	if(bAVG==1)
002832  7b28              LDRB     r0,[r5,#0xc]  ; bAVG
002834  2801              CMP      r0,#1
002836  d130              BNE      |L1.10394|
;;;3660   		{
;;;3661   		for(i=0;i<NUMIST;i++)
002838  f04f0100          MOV      r1,#0
;;;3662   			{
;;;3663   			if(bps[i]._state==bsWRK)
;;;3664   				{
;;;3665   				if(bps[i]._Ii>i_avg)bps[i]._x_--;
;;;3666   				if(bps[i]._Ii<i_avg)bps[i]._x_++;
;;;3667   			
;;;3668   				if(bps[i]._x_<-50)bps[i]._x_=-50;
00283c  f06f0431          MVN      r4,#0x31
002840  e029              B        |L1.10390|
                  |L1.10306|
002842  ebc100c1          RSB      r0,r1,r1,LSL #3       ;3663
002846  eb001001          ADD      r0,r0,r1,LSL #4       ;3663
00284a  eb030080          ADD      r0,r3,r0,LSL #2       ;3663
00284e  7885              LDRB     r5,[r0,#2]            ;3663
002850  2d01              CMP      r5,#1                 ;3663
002852  d11d              BNE      |L1.10384|
002854  6a45              LDR      r5,[r0,#0x24]         ;3665
002856  42bd              CMP      r5,r7                 ;3665
002858  dd05              BLE      |L1.10342|
00285a  f8b05050          LDRH     r5,[r0,#0x50]         ;3665
00285e  f1a50501          SUB      r5,r5,#1              ;3665
002862  f8a05050          STRH     r5,[r0,#0x50]         ;3665
                  |L1.10342|
002866  da05              BGE      |L1.10356|
002868  f8b05050          LDRH     r5,[r0,#0x50]         ;3666
00286c  f1050501          ADD      r5,r5,#1              ;3666
002870  f8a05050          STRH     r5,[r0,#0x50]         ;3666
                  |L1.10356|
002874  f9b05050          LDRSH    r5,[r0,#0x50]
002878  42a5              CMP      r5,r4
00287a  da01              BGE      |L1.10368|
00287c  f8a04050          STRH     r4,[r0,#0x50]
                  |L1.10368|
;;;3669   				if(bps[i]._x_>50)bps[i]._x_=50;	
002880  f9b05050          LDRSH    r5,[r0,#0x50]
002884  2d32              CMP      r5,#0x32
002886  dd03              BLE      |L1.10384|
002888  f04f0532          MOV      r5,#0x32
00288c  f8a05050          STRH     r5,[r0,#0x50]
                  |L1.10384|
002890  f1010101          ADD      r1,r1,#1              ;3661
002894  b2c9              UXTB     r1,r1                 ;3661
                  |L1.10390|
002896  4291              CMP      r1,r2                 ;3661
002898  dbd3              BLT      |L1.10306|
                  |L1.10394|
;;;3670   				}
;;;3671   			}		
;;;3672   		}			
;;;3673   	}   	 
;;;3674   
;;;3675   
;;;3676   avg_hndl_end:
;;;3677   __nop();  
00289a  bf00              NOP      
;;;3678   }
00289c  bdf0              POP      {r4-r7,pc}
;;;3679   
                          ENDP

                  rele_hndl PROC
;;;3692   //*************-----------------------------------------------
;;;3693   void rele_hndl(void)
00289e  e92d5ff0          PUSH     {r4-r12,lr}
;;;3694   {
;;;3695   //static char cnt_rel_sam;
;;;3696   //char temp;
;;;3697   
;;;3698   //temp=0;
;;;3699   
;;;3700   
;;;3701   SET_REG(LPC_PINCON->PINSEL0,0,4*2,6*2);
0028a2  4871              LDR      r0,|L1.10856|
0028a4  6801              LDR      r1,[r0,#0]
0028a6  4a71              LDR      r2,|L1.10860|
0028a8  ea010102          AND      r1,r1,r2
0028ac  6001              STR      r1,[r0,#0]
;;;3702   SET_REG(LPC_GPIO0->FIODIR,63,4,6);
0028ae  4c6a              LDR      r4,|L1.10840|
0028b0  6821              LDR      r1,[r4,#0]
0028b2  f441717c          ORR      r1,r1,#0x3f0
0028b6  6021              STR      r1,[r4,#0]
;;;3703   SET_REG(LPC_PINCON->PINSEL7,0,(25-16)*2,2);
0028b8  69c1              LDR      r1,[r0,#0x1c]
0028ba  f4212140          BIC      r1,r1,#0xc0000
0028be  61c1              STR      r1,[r0,#0x1c]
;;;3704   SET_REG(LPC_GPIO3->FIODIR,1,25,1);
0028c0  6e21              LDR      r1,[r4,#0x60]
0028c2  f0417100          ORR      r1,r1,#0x2000000
0028c6  6621              STR      r1,[r4,#0x60]
;;;3705   SET_REG(LPC_PINCON->PINSEL1,0,(29-16)*2,2);
0028c8  6841              LDR      r1,[r0,#4]
0028ca  f0216140          BIC      r1,r1,#0xc000000
0028ce  6041              STR      r1,[r0,#4]
;;;3706   SET_REG(LPC_GPIO0->FIODIR,1,29,1);
0028d0  6820              LDR      r0,[r4,#0]
0028d2  f0405000          ORR      r0,r0,#0x20000000
0028d6  6020              STR      r0,[r4,#0]
;;;3707   
;;;3708   
;;;3709   
;;;3710   
;;;3711   
;;;3712   
;;;3713   if((((bat[0]._rel_stat)  || (tbatdisable_stat!=tbdsON))&&(tbatdisable_cmnd))	&& (main_1Hz_cnt>5))
0028d8  4866              LDR      r0,|L1.10868|
0028da  4d65              LDR      r5,|L1.10864|
0028dc  4967              LDR      r1,|L1.10876|
0028de  7802              LDRB     r2,[r0,#0]  ; tbatdisable_stat
0028e0  4865              LDR      r0,|L1.10872|
0028e2  f895303c          LDRB     r3,[r5,#0x3c]  ; bat
0028e6  f9b11000          LDRSH    r1,[r1,#0]
0028ea  7800              LDRB     r0,[r0,#0]
0028ec  4313              ORRS     r3,r3,r2
0028ee  d007              BEQ      |L1.10496|
0028f0  b130              CBZ      r0,|L1.10496|
0028f2  2905              CMP      r1,#5
0028f4  dd04              BLE      |L1.10496|
;;;3714   	{
;;;3715   	SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_BAT1,1);
0028f6  69a3              LDR      r3,[r4,#0x18]
0028f8  f4437380          ORR      r3,r3,#0x100
0028fc  61a3              STR      r3,[r4,#0x18]
0028fe  e003              B        |L1.10504|
                  |L1.10496|
;;;3716   	}
;;;3717   else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_BAT1,1);	  	
002900  69e3              LDR      r3,[r4,#0x1c]
002902  f4437380          ORR      r3,r3,#0x100
002906  61e3              STR      r3,[r4,#0x1c]
                  |L1.10504|
;;;3718   
;;;3719   if((((bat[1]._rel_stat) || (tbatdisable_stat!=tbdsON))&&(tbatdisable_cmnd))	&& (main_1Hz_cnt>5))
002908  f8953088          LDRB     r3,[r5,#0x88]  ; bat
00290c  4313              ORRS     r3,r3,r2
00290e  d007              BEQ      |L1.10528|
002910  b130              CBZ      r0,|L1.10528|
002912  2905              CMP      r1,#5
002914  dd04              BLE      |L1.10528|
;;;3720   	{
;;;3721   	SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_BAT2,1);
002916  69a0              LDR      r0,[r4,#0x18]
002918  f0400040          ORR      r0,r0,#0x40
00291c  61a0              STR      r0,[r4,#0x18]
00291e  e003              B        |L1.10536|
                  |L1.10528|
;;;3722   	}
;;;3723   else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_BAT2,1);
002920  69e0              LDR      r0,[r4,#0x1c]
002922  f0400040          ORR      r0,r0,#0x40
002926  61e0              STR      r0,[r4,#0x1c]
                  |L1.10536|
;;;3724   
;;;3725   
;;;3726   if(mess_find_unvol((MESS2RELE_HNDL))&&(mess_data[0]==PARAM_RELE_SAMOKALIBR)) 
002928  20d2              MOVS     r0,#0xd2
00292a  f7fffffe          BL       mess_find_unvol
00292e  4d54              LDR      r5,|L1.10880|
002930  b110              CBZ      r0,|L1.10552|
002932  6828              LDR      r0,[r5,#0]  ; mess_data
002934  2864              CMP      r0,#0x64
002936  d048              BEQ      |L1.10698|
                  |L1.10552|
;;;3727   	{
;;;3728   	if(mess_data[1]==1)SET_REG(LPC_GPIO0->FIOSET,1,29,1);
;;;3729   	else if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,29,1);
;;;3730   	}
;;;3731   else SET_REG(LPC_GPIO0->FIOCLR,1,29,1);
002938  69e0              LDR      r0,[r4,#0x1c]
00293a  f0405000          ORR      r0,r0,#0x20000000
00293e  61e0              STR      r0,[r4,#0x1c]
                  |L1.10560|
;;;3732   
;;;3733   
;;;3734   #ifndef UKU2071x
;;;3735   //–ÂÎÂ ‡‚‡ËË ÒÂÚË
;;;3736   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_NET))
;;;3737   	{
;;;3738   	if(mess_data[1]==0) 			SET_REG(LPC_GPIO3->FIOSET,1,SHIFT_REL_AV_NET,1);
;;;3739   	else 						SET_REG(LPC_GPIO3->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;3740   	}
;;;3741   else	if(!(avar_ind_stat&0x00000001)) 	SET_REG(LPC_GPIO3->FIOSET,1,SHIFT_REL_AV_NET,1);
;;;3742   else 							SET_REG(LPC_GPIO3->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;3743   #endif
;;;3744   #ifdef UKU2071x
;;;3745   //–ÂÎÂ ‡‚‡ËË ÒÂÚË
;;;3746   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_NET))
002940  20d2              MOVS     r0,#0xd2
002942  f7fffffe          BL       mess_find_unvol
;;;3747   	{
;;;3748   	if(mess_data[1]==0)				SET_REG(LPC_GPIO3->FIOCLR,1,SHIFT_REL_AV_NET,1); 
;;;3749   	else 						SET_REG(LPC_GPIO3->FIOSET,1,SHIFT_REL_AV_NET,1);
;;;3750   	}
;;;3751   else	if(!(avar_ind_stat&0x00000001))	SET_REG(LPC_GPIO3->FIOCLR,1,SHIFT_REL_AV_NET,1);
002946  4e4f              LDR      r6,|L1.10884|
002948  b110              CBZ      r0,|L1.10576|
00294a  6828              LDR      r0,[r5,#0]            ;3746  ; mess_data
00294c  2866              CMP      r0,#0x66              ;3746
00294e  d04b              BEQ      |L1.10728|
                  |L1.10576|
002950  6830              LDR      r0,[r6,#0]  ; avar_ind_stat
002952  07c0              LSLS     r0,r0,#31
002954  d054              BEQ      |L1.10752|
;;;3752   else 					  		SET_REG(LPC_GPIO3->FIOSET,1,SHIFT_REL_AV_NET,1);
002956  6fa0              LDR      r0,[r4,#0x78]
002958  f0407000          ORR      r0,r0,#0x2000000
00295c  67a0              STR      r0,[r4,#0x78]
                  |L1.10590|
;;;3753   #endif
;;;3754   
;;;3755   #ifdef UKU_3U
;;;3756   //–ÂÎÂ ‡‚‡ËÈ ·‡Ú‡ÂÈ
;;;3757   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BAT1))
;;;3758   	{
;;;3759   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT1,1);
;;;3760   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT1,1);
;;;3761        }
;;;3762   else 
;;;3763   	{
;;;3764   	if(!(avar_ind_stat&0x00000002)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT1,1);
;;;3765        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT1,1);
;;;3766   	} 
;;;3767   
;;;3768   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BAT2))
;;;3769   	{
;;;3770   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT2,1);
;;;3771   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT2,1);
;;;3772        }
;;;3773   else 
;;;3774   	{
;;;3775   	if(!(avar_ind_stat&0x00000004)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT2,1);
;;;3776        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT2,1);
;;;3777   	} 
;;;3778   
;;;3779   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BPS))
;;;3780   	{
;;;3781   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
;;;3782   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
;;;3783        }
;;;3784   else 
;;;3785   	{
;;;3786   	if(!(avar_ind_stat&0x000007f8)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
;;;3787        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
;;;3788   	} 
;;;3789   
;;;3790   #endif
;;;3791   
;;;3792   
;;;3793   #ifdef UKU_GLONASS
;;;3794   //–ÂÎÂ ‡‚‡ËÈ ·‡Ú‡ÂÈ
;;;3795   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BAT1))
;;;3796   	{
;;;3797   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT1,1);
;;;3798   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT1,1);
;;;3799        }
;;;3800   else 
;;;3801   	{
;;;3802   	if(!(avar_ind_stat&0x00000002)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT1,1);
;;;3803        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT1,1);
;;;3804   	} 
;;;3805   
;;;3806   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BAT2))
;;;3807   	{
;;;3808   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT2,1);
;;;3809   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT2,1);
;;;3810        }
;;;3811   else 
;;;3812   	{
;;;3813   	if(!(avar_ind_stat&0x00000004)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT2,1);
;;;3814        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT2,1);
;;;3815   	} 
;;;3816   
;;;3817   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BPS))
;;;3818   	{
;;;3819   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
;;;3820   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
;;;3821        }
;;;3822   else 
;;;3823   	{
;;;3824   	if(!(avar_ind_stat&0x000007f8)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
;;;3825        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
;;;3826   	} 
;;;3827   
;;;3828   #endif
;;;3829   
;;;3830   #ifdef U 
;;;3831   
;;;3832   #endif
;;;3833   
;;;3834   #ifdef UKU_RSTKM
;;;3835   
;;;3836   //–ÂÎÂ Ó·˘ÂÈ ‡‚‡ËË
;;;3837   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_COMM))
;;;3838   	{
;;;3839   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_COMM,1);
;;;3840   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_COMM,1);
;;;3841   	}
;;;3842   else 
;;;3843   	{
;;;3844        if(  (!(avar_ind_stat&0x00007fff))/* &&
;;;3845             ((!SK_REL_EN[0]) || (sk_av_stat[0]!=sasON))  &&
;;;3846             ((!SK_REL_EN[1]) || (sk_av_stat[1]!=sasON))  &&
;;;3847             ((!SK_REL_EN[2]) || (sk_av_stat[2]!=sasON))  &&
;;;3848             ((!SK_REL_EN[3]) || (sk_av_stat[3]!=sasON))*/  )SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_COMM,1);
;;;3849        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_COMM,1);
;;;3850   	}
;;;3851   	
;;;3852   
;;;3853   //–ÂÎÂ ÓÒ‚Â˘ÂÌËˇ
;;;3854   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_LIGHT))
;;;3855   	{
;;;3856   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LIGHT,1);
;;;3857   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LIGHT,1);
;;;3858        }
;;;3859   else 
;;;3860   	{
;;;3861   	if(sk_av_stat[0]!=sasON) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LIGHT,1);
;;;3862        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LIGHT,1);
;;;3863   	}
;;;3864   
;;;3865   
;;;3866   //–ÂÎÂ ‚˚ÍÎ˛˜ÂÌËˇ Ì‡„ÛÁÍË
;;;3867   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_LOAD_OFF))
;;;3868   	{
;;;3869   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LOAD_OFF,1);
;;;3870   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LOAD_OFF,1);
;;;3871        }
;;;3872   else if(tloaddisable_cmnd==0)
;;;3873   	{
;;;3874   	SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LOAD_OFF,1);
;;;3875   	}
;;;3876   else if((tloaddisable_cmnd)&&(tloaddisable_cmnd<=11))
;;;3877   	{
;;;3878   	SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LOAD_OFF,1);
;;;3879   	}
;;;3880   
;;;3881   else 
;;;3882   	{
;;;3883   	if(!(tloaddisable_stat==tldsON)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LOAD_OFF,1);
;;;3884        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LOAD_OFF,1);
;;;3885   	} 
;;;3886   
;;;3887   //–ÂÎÂ ÓÒÂ‚Ó„Ó ‚ÂÌÚËÎˇÚÓ‡
;;;3888   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_VENT))
;;;3889   	{
;;;3890   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;3891   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT,1);
;;;3892   	}
;;;3893   else 
;;;3894   	{
;;;3895   	if(mixer_vent_stat==mvsOFF) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;3896        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT,1);
;;;3897   	} 
;;;3898   
;;;3899   #endif
;;;3900   
;;;3901   #ifdef UKU_KONTUR
;;;3902   
;;;3903   //–ÂÎÂ Ó·˘ÂÈ ‡‚‡ËË
;;;3904   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_COMM))
;;;3905   	{
;;;3906   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_COMM,1);
;;;3907   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_COMM,1);
;;;3908   	}
;;;3909   else 
;;;3910   	{
;;;3911        if(  (!(avar_ind_stat&0x00007fff)) &&
;;;3912             ((!SK_REL_EN[0]) || (sk_av_stat[0]!=sasON))  &&
;;;3913             ((!SK_REL_EN[1]) || (sk_av_stat[1]!=sasON))  &&
;;;3914             ((!SK_REL_EN[2]) || (sk_av_stat[2]!=sasON))  /*&&
;;;3915             ((!SK_REL_EN[3]) || (sk_av_stat[3]!=sasON))*/  )SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_COMM,1);
;;;3916        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_COMM,1);
;;;3917   	}
;;;3918   
;;;3919   	
;;;3920   //rel_warm_plazma=0;
;;;3921   //–ÂÎÂ ÓÒ‚Â˘ÂÌËˇ   
;;;3922   /*
;;;3923   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_WARM))
;;;3924   	{
;;;3925   	if(mess_data[1]==0)
;;;3926   		{
;;;3927   		SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_WARM,1);
;;;3928   		rel_warm_plazma=1;
;;;3929   		}
;;;3930   	else if(mess_data[1]==1) 
;;;3931   		{
;;;3932   		SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_WARM,1);
;;;3933   		rel_warm_plazma=2;
;;;3934   		}
;;;3935        }
;;;3936   else 
;;;3937   	{
;;;3938   	if(warm_stat_k==wsOFF) 
;;;3939   		{
;;;3940   		SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_WARM,1);
;;;3941   		rel_warm_plazma=3;
;;;3942   		}
;;;3943        else 
;;;3944   		{
;;;3945   		SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_WARM,1);
;;;3946   		rel_warm_plazma=4;
;;;3947   		}
;;;3948   	}
;;;3949   */
;;;3950   //–ÂÎÂ ÓÒ‚Â˘ÂÌËˇ
;;;3951   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_LIGHT))
;;;3952   	{
;;;3953   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LIGHT,1);
;;;3954   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LIGHT,1);
;;;3955        }
;;;3956   else 
;;;3957   	{
;;;3958   	if(sk_av_stat[0]!=sasON) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LIGHT,1);
;;;3959        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LIGHT,1);
;;;3960   	}
;;;3961   
;;;3962   
;;;3963   
;;;3964   //–ÂÎÂ ‚˚ÍÎ˛˜ÂÌËˇ Ì‡„ÛÁÍË
;;;3965   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_LOAD_OFF))
;;;3966   	{
;;;3967   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LOAD_OFF,1);
;;;3968   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LOAD_OFF,1);
;;;3969        }
;;;3970   else if(tloaddisable_cmnd==0)
;;;3971   	{
;;;3972   	SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LOAD_OFF,1);
;;;3973   	}
;;;3974   else if((tloaddisable_cmnd)&&(tloaddisable_cmnd<=11))
;;;3975   	{
;;;3976   	SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LOAD_OFF,1);
;;;3977   	}
;;;3978   
;;;3979   else 
;;;3980   	{
;;;3981   	if(!(tloaddisable_stat==tldsON)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LOAD_OFF,1);
;;;3982        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LOAD_OFF,1);
;;;3983   	} 
;;;3984   
;;;3985   //–ÂÎÂ ÓÒÂ‚Ó„Ó ‚ÂÌÚËÎˇÚÓ‡ ËÎË ÓÚÓÔËÚÂÎˇ
;;;3986   if(RELE_LOG)
;;;3987   	{
;;;3988   	if((mess_find_unvol(MESS2RELE_HNDL))&&(mess_data[0]==PARAM_RELE_VENT_WARM))
;;;3989   		{
;;;3990   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT_WARM,1);
;;;3991   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT_WARM,1);
;;;3992   		}
;;;3993   	else 
;;;3994   		{
;;;3995   		if(warm_stat_k==wsOFF) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT_WARM,1);
;;;3996   	     else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT_WARM,1);
;;;3997   		} 
;;;3998   
;;;3999   	}
;;;4000   else 
;;;4001   	{
;;;4002   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_VENT_WARM))
;;;4003   		{
;;;4004   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT_WARM,1);
;;;4005   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT_WARM,1);
;;;4006   		}
;;;4007   	else 
;;;4008   		{
;;;4009   		if(vent_stat_k==vsOFF) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT_WARM,1);
;;;4010   	     else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT_WARM,1);
;;;4011   		} 
;;;4012   	}
;;;4013   #endif
;;;4014   
;;;4015   #ifdef UKU_6U
;;;4016   //–ÂÎÂ ‡‚‡ËÈ ·‡Ú‡ÂÈ
;;;4017   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BAT1))
;;;4018   	{
;;;4019   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT1,1);
;;;4020   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT1,1);
;;;4021        }
;;;4022   else 
;;;4023   	{
;;;4024   	if(!(avar_ind_stat&0x00000002)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT1,1);
;;;4025        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT1,1);
;;;4026   	} 
;;;4027   
;;;4028   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BAT2))
;;;4029   	{
;;;4030   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT2,1);
;;;4031   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT2,1);
;;;4032       }
;;;4033   else if(NPN_OUT==npnoRELEAVBAT2)
;;;4034   	{
;;;4035   	if(npn_stat==npnsOFF)//&&(mess_find_unvol(MESS2RELE_HNDL))&&(mess_data[0]==PARAM_RELE_NPN))
;;;4036   		{
;;;4037   		/*if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT2,1);
;;;4038   		else if(mess_data[1]==1)*/ SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT2,1);
;;;4039        	}
;;;4040   	else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT2,1);
;;;4041   	}
;;;4042   else 
;;;4043   	{
;;;4044   	if(!(avar_ind_stat&0x00000004)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT2,1);
;;;4045       else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT2,1);
;;;4046   	} 
;;;4047   
;;;4048   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BPS))
;;;4049   	{
;;;4050   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
;;;4051   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
;;;4052        }
;;;4053   else 
;;;4054   	{
;;;4055   	if(!(avar_ind_stat&0x000007f8)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
;;;4056        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
;;;4057   	} 
;;;4058   
;;;4059   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_VENT))
;;;4060   	{
;;;4061   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT,1);
;;;4062   	else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;4063   	}
;;;4064   else if((NPN_OUT==npnoRELEVENT))
;;;4065   	{
;;;4066   	if(npn_stat==npnsOFF)//&&(mess_find_unvol(MESS2RELE_HNDL))&&(mess_data[0]==PARAM_RELE_NPN))
;;;4067   		{
;;;4068   		/*if(mess_data[1]==0)*/ SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;4069   		//else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;4070       	}
;;;4071   	else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT,1);
;;;4072   	}
;;;4073   else 
;;;4074   	{
;;;4075   	if(!vent_stat) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT,1);
;;;4076   	else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;4077   	}
;;;4078   
;;;4079   #endif
;;;4080   
;;;4081   #ifdef UKU_220
;;;4082   //–ÂÎÂ ‡‚‡ËÈ ·‡Ú‡ÂÈ
;;;4083   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BAT))
;;;4084   	{
;;;4085   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT,1);
;;;4086   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT,1);
;;;4087        }
;;;4088   else 
;;;4089   	{
;;;4090   	if(!(avar_ind_stat&0x00000002)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT,1);
;;;4091        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT,1);
;;;4092   	} 
;;;4093   
;;;4094   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BPS))
;;;4095   	{
;;;4096   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
;;;4097   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
;;;4098        }
;;;4099   else 
;;;4100   	{
;;;4101   	if(!(avar_ind_stat&0x000007f8)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
;;;4102        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
;;;4103   	} 
;;;4104   
;;;4105   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_VENT))
;;;4106   	{
;;;4107   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT,1);
;;;4108   	else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;4109   	}
;;;4110   else 
;;;4111   	{
;;;4112   	if((RELE_VENT_LOGIC==0)||(RELE_VENT_LOGIC==1))
;;;4113   		{
;;;4114   		if(vent_stat) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT,1);
;;;4115   		else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;4116   		}
;;;4117   	else 
;;;4118   		{
;;;4119   		if((avar_ind_stat&0x00000004)) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT,1);
;;;4120        	else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;4121   		}
;;;4122   	}
;;;4123   
;;;4124   #endif
;;;4125   
;;;4126   #ifdef UKU_220_V2
;;;4127   //–ÂÎÂ ‡‚‡ËÈ ·‡Ú‡ÂÈ
;;;4128   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BAT))
;;;4129   	{
;;;4130   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT,1);
;;;4131   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT,1);
;;;4132        }
;;;4133   else 
;;;4134   	{
;;;4135   	if(!(avar_ind_stat&0x00000002)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT,1);
;;;4136        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT,1);
;;;4137   	} 
;;;4138   
;;;4139   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BPS))
;;;4140   	{
;;;4141   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
;;;4142   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
;;;4143        }
;;;4144   else 
;;;4145   	{
;;;4146   	if(!(avar_ind_stat&0x000007f8)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
;;;4147        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
;;;4148   	} 
;;;4149   
;;;4150   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_VENT))
;;;4151   	{
;;;4152   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT,1);
;;;4153   	else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;4154   	}
;;;4155   else 
;;;4156   	{
;;;4157   	if((RELE_VENT_LOGIC==0)||(RELE_VENT_LOGIC==1))
;;;4158   		{
;;;4159   		if(vent_stat) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT,1);
;;;4160   		else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;4161   		}
;;;4162   	else 
;;;4163   		{
;;;4164   		if((avar_ind_stat&0x00000004)) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT,1);
;;;4165        	else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;4166   		}
;;;4167   	}
;;;4168   
;;;4169   #endif
;;;4170   
;;;4171   #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;4172   
;;;4173   if((AUSW_MAIN==22010)||(AUSW_MAIN==22011))
00295e  484a              LDR      r0,|L1.10888|
;;;4174   	{
;;;4175   	#ifndef UKU2071x
;;;4176   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_NET))
;;;4177   		{
;;;4178   		if(mess_data[1]==0) SET_REG(LPC_GPIO3->FIOSET,1,25,1);
;;;4179   		else SET_REG(LPC_GPIO3->FIOCLR,1,25,1);
;;;4180   		}
;;;4181   	else	if(!(avar_ind_stat&0x00000001)) SET_REG(LPC_GPIO3->FIOSET,1,25,1);
;;;4182   	else SET_REG(LPC_GPIO3->FIOCLR,1,25,1);
;;;4183   	#endif
;;;4184   
;;;4185   	#ifdef UKU2071x
;;;4186   		#ifndef APSENERGIA
;;;4187   		if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_NET))
;;;4188   			{
;;;4189   			if(mess_data[1]==0) SET_REG(LPC_GPIO3->FIOCLR,1,25,1);
;;;4190   			else SET_REG(LPC_GPIO3->FIOSET,1,25,1);
;;;4191   			}
;;;4192   		else	if(!(avar_ind_stat&0x00000001)) SET_REG(LPC_GPIO3->FIOCLR,1,25,1);
;;;4193   		else SET_REG(LPC_GPIO3->FIOSET,1,25,1);
;;;4194   		#endif
;;;4195   
;;;4196   		#ifdef APSENERGIA
;;;4197   		if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_NET))
;;;4198   			{
;;;4199   			if(mess_data[1]==0) SET_REG(LPC_GPIO3->FIOCLR,1,25,1);
;;;4200   			else SET_REG(LPC_GPIO3->FIOSET,1,25,1);
;;;4201   			}
;;;4202   		else if((mess_find_unvol(MESS2RELE_HNDL))&& (mess_data[0]==PARAM_RELE_BAT_IS_DISCHARGED))  SET_REG(LPC_GPIO3->FIOCLR,1,25,1);
;;;4203   		else SET_REG(LPC_GPIO3->FIOSET,1,25,1);
;;;4204   		#endif
;;;4205   
;;;4206   	#endif
;;;4207   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BPS))
;;;4208   		{
;;;4209   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,7,1);
;;;4210   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,7,1);
;;;4211   	     }
;;;4212   	else 
;;;4213   		{
;;;4214   		if(!(avar_ind_stat&0x100007f8)) SET_REG(LPC_GPIO0->FIOCLR,1,7,1);
;;;4215   	     else SET_REG(LPC_GPIO0->FIOSET,1,7,1);
;;;4216   		} 
;;;4217   
;;;4218   	//–ÂÎÂ ‡‚‡ËÈ ·‡Ú‡ÂÈ
;;;4219   	#ifndef APSENERGIA
;;;4220   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BAT))
;;;4221   		{
;;;4222   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,4,1);
;;;4223   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,4,1);
;;;4224        	}
;;;4225   	else 
;;;4226   		{
;;;4227   		if(!(ips_bat_av_stat)) SET_REG(LPC_GPIO0->FIOCLR,1,4,1);
002960  f8df8128          LDR      r8,|L1.10892|
002964  4f4a              LDR      r7,|L1.10896|
002966  8800              LDRH     r0,[r0,#0]            ;4173  ; AUSW_MAIN
002968  f5a041aa          SUB      r1,r0,#0x5500         ;4173
00296c  39fa              SUBS     r1,r1,#0xfa           ;4173
00296e  d001              BEQ      |L1.10612|
002970  1e49              SUBS     r1,r1,#1              ;4173
002972  d16a              BNE      |L1.10826|
                  |L1.10612|
002974  20d2              MOVS     r0,#0xd2              ;4187
002976  f7fffffe          BL       mess_find_unvol
00297a  b110              CBZ      r0,|L1.10626|
00297c  6828              LDR      r0,[r5,#0]            ;4187  ; mess_data
00297e  2866              CMP      r0,#0x66              ;4187
002980  d043              BEQ      |L1.10762|
                  |L1.10626|
002982  6830              LDR      r0,[r6,#0]            ;4192  ; avar_ind_stat
002984  07c0              LSLS     r0,r0,#31             ;4192
002986  d04d              BEQ      |L1.10788|
002988  6fa0              LDR      r0,[r4,#0x78]         ;4193
00298a  f0407000          ORR      r0,r0,#0x2000000      ;4193
00298e  67a0              STR      r0,[r4,#0x78]         ;4193
                  |L1.10640|
002990  20d2              MOVS     r0,#0xd2              ;4207
002992  f7fffffe          BL       mess_find_unvol
002996  b110              CBZ      r0,|L1.10654|
002998  6828              LDR      r0,[r5,#0]            ;4207  ; mess_data
00299a  286a              CMP      r0,#0x6a              ;4207
00299c  d047              BEQ      |L1.10798|
                  |L1.10654|
00299e  6830              LDR      r0,[r6,#0]            ;4214  ; avar_ind_stat
0029a0  4238              TST      r0,r7                 ;4214
0029a2  d079              BEQ      |L1.10904|
0029a4  69a0              LDR      r0,[r4,#0x18]         ;4215
0029a6  f0400080          ORR      r0,r0,#0x80           ;4215
0029aa  61a0              STR      r0,[r4,#0x18]         ;4215
                  |L1.10668|
0029ac  20d2              MOVS     r0,#0xd2              ;4220
0029ae  f7fffffe          BL       mess_find_unvol
0029b2  b110              CBZ      r0,|L1.10682|
0029b4  6828              LDR      r0,[r5,#0]            ;4220  ; mess_data
0029b6  2867              CMP      r0,#0x67              ;4220
0029b8  d073              BEQ      |L1.10914|
                  |L1.10682|
0029ba  f8980000          LDRB     r0,[r8,#0]  ; ips_bat_av_stat
0029be  b380              CBZ      r0,|L1.10786|
;;;4228        	else SET_REG(LPC_GPIO0->FIOSET,1,4,1);
0029c0  69a0              LDR      r0,[r4,#0x18]
0029c2  f0400010          ORR      r0,r0,#0x10
0029c6  61a0              STR      r0,[r4,#0x18]
0029c8  e1f8              B        |L1.11708|
                  |L1.10698|
0029ca  6868              LDR      r0,[r5,#4]            ;3728  ; mess_data
0029cc  2801              CMP      r0,#1                 ;3728
0029ce  d006              BEQ      |L1.10718|
0029d0  2800              CMP      r0,#0                 ;3729
0029d2  d1b5              BNE      |L1.10560|
0029d4  69e0              LDR      r0,[r4,#0x1c]         ;3729
0029d6  f0405000          ORR      r0,r0,#0x20000000     ;3729
0029da  61e0              STR      r0,[r4,#0x1c]         ;3729
0029dc  e7b0              B        |L1.10560|
                  |L1.10718|
0029de  69a0              LDR      r0,[r4,#0x18]         ;3728
0029e0  f0405000          ORR      r0,r0,#0x20000000     ;3728
0029e4  61a0              STR      r0,[r4,#0x18]         ;3728
0029e6  e7ab              B        |L1.10560|
                  |L1.10728|
0029e8  6868              LDR      r0,[r5,#4]            ;3748  ; mess_data
0029ea  b120              CBZ      r0,|L1.10742|
0029ec  6fa0              LDR      r0,[r4,#0x78]         ;3749
0029ee  f0407000          ORR      r0,r0,#0x2000000      ;3749
0029f2  67a0              STR      r0,[r4,#0x78]         ;3749
0029f4  e7b3              B        |L1.10590|
                  |L1.10742|
0029f6  6fe0              LDR      r0,[r4,#0x7c]         ;3748
0029f8  f0407000          ORR      r0,r0,#0x2000000      ;3748
0029fc  67e0              STR      r0,[r4,#0x7c]         ;3748
0029fe  e7ae              B        |L1.10590|
                  |L1.10752|
002a00  6fe0              LDR      r0,[r4,#0x7c]         ;3751
002a02  f0407000          ORR      r0,r0,#0x2000000      ;3751
002a06  67e0              STR      r0,[r4,#0x7c]         ;3751
002a08  e7a9              B        |L1.10590|
                  |L1.10762|
002a0a  6868              LDR      r0,[r5,#4]            ;4189  ; mess_data
002a0c  b120              CBZ      r0,|L1.10776|
002a0e  6fa0              LDR      r0,[r4,#0x78]         ;4190
002a10  f0407000          ORR      r0,r0,#0x2000000      ;4190
002a14  67a0              STR      r0,[r4,#0x78]         ;4190
002a16  e7bb              B        |L1.10640|
                  |L1.10776|
002a18  6fe0              LDR      r0,[r4,#0x7c]         ;4189
002a1a  f0407000          ORR      r0,r0,#0x2000000      ;4189
002a1e  67e0              STR      r0,[r4,#0x7c]         ;4189
002a20  e7b6              B        |L1.10640|
                  |L1.10786|
002a22  e04d              B        |L1.10944|
                  |L1.10788|
002a24  6fe0              LDR      r0,[r4,#0x7c]         ;4192
002a26  f0407000          ORR      r0,r0,#0x2000000      ;4192
002a2a  67e0              STR      r0,[r4,#0x7c]         ;4192
002a2c  e7b0              B        |L1.10640|
                  |L1.10798|
002a2e  6868              LDR      r0,[r5,#4]            ;4209  ; mess_data
002a30  b130              CBZ      r0,|L1.10816|
002a32  2801              CMP      r0,#1                 ;4210
002a34  d1ba              BNE      |L1.10668|
002a36  69a0              LDR      r0,[r4,#0x18]         ;4210
002a38  f0400080          ORR      r0,r0,#0x80           ;4210
002a3c  61a0              STR      r0,[r4,#0x18]         ;4210
002a3e  e7b5              B        |L1.10668|
                  |L1.10816|
002a40  69e0              LDR      r0,[r4,#0x1c]         ;4209
002a42  f0400080          ORR      r0,r0,#0x80           ;4209
002a46  61e0              STR      r0,[r4,#0x1c]         ;4209
002a48  e7b0              B        |L1.10668|
                  |L1.10826|
002a4a  e03e              B        |L1.10954|
                  |L1.10828|
                          DCD      ||.bss||
                  |L1.10832|
                          DCD      ||.bss||+0x400
                  |L1.10836|
                          DCD      0x40034000
                  |L1.10840|
                          DCD      0x2009c000
                  |L1.10844|
                          DCD      ||area_number.25||
                  |L1.10848|
                          DCD      bps
                  |L1.10852|
                          DCD      NUMIST
                  |L1.10856|
                          DCD      0x4002c000
                  |L1.10860|
                          DCD      0xfff000ff
                  |L1.10864|
                          DCD      bat
                  |L1.10868|
                          DCD      tbatdisable_stat
                  |L1.10872|
                          DCD      tbatdisable_cmnd
                  |L1.10876|
                          DCD      main_1Hz_cnt
                  |L1.10880|
                          DCD      mess_data
                  |L1.10884|
                          DCD      avar_ind_stat
                  |L1.10888|
                          DCD      AUSW_MAIN
                  |L1.10892|
                          DCD      ips_bat_av_stat
                  |L1.10896|
                          DCD      0x100007f8
002a94  e000              B        |L1.10904|
002a96  e004              B        |L1.10914|
                  |L1.10904|
002a98  69e0              LDR      r0,[r4,#0x1c]         ;4214
002a9a  f0400080          ORR      r0,r0,#0x80           ;4214
002a9e  61e0              STR      r0,[r4,#0x1c]         ;4214
002aa0  e784              B        |L1.10668|
                  |L1.10914|
002aa2  6868              LDR      r0,[r5,#4]            ;4222  ; mess_data
002aa4  b110              CBZ      r0,|L1.10924|
002aa6  2801              CMP      r0,#1                 ;4223
002aa8  d005              BEQ      |L1.10934|
002aaa  e187              B        |L1.11708|
                  |L1.10924|
002aac  69e0              LDR      r0,[r4,#0x1c]         ;4222
002aae  f0400010          ORR      r0,r0,#0x10           ;4222
002ab2  61e0              STR      r0,[r4,#0x1c]         ;4222
002ab4  e182              B        |L1.11708|
                  |L1.10934|
002ab6  69a0              LDR      r0,[r4,#0x18]         ;4223
002ab8  f0400010          ORR      r0,r0,#0x10           ;4223
002abc  61a0              STR      r0,[r4,#0x18]         ;4223
002abe  e17d              B        |L1.11708|
                  |L1.10944|
002ac0  69e0              LDR      r0,[r4,#0x1c]         ;4227
002ac2  f0400010          ORR      r0,r0,#0x10           ;4227
002ac6  61e0              STR      r0,[r4,#0x1c]         ;4227
002ac8  e178              B        |L1.11708|
                  |L1.10954|
;;;4229   		}
;;;4230   	#endif
;;;4231   	#ifdef APSENERGIA
;;;4232   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BAT))
;;;4233   		{
;;;4234   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,4,1);
;;;4235   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,4,1);
;;;4236        	}
;;;4237   	else 
;;;4238   		{
;;;4239   		if(!apsEnergiaStat)SET_REG(LPC_GPIO0->FIOSET,1,4,1);
;;;4240   		else SET_REG(LPC_GPIO0->FIOCLR,1,4,1);
;;;4241   		}
;;;4242   	#endif
;;;4243   	}
;;;4244   
;;;4245   else	if(AUSW_MAIN==22023)
002aca  f5a041ac          SUB      r1,r0,#0x5600
002ace  3907              SUBS     r1,#7
002ad0  d162              BNE      |L1.11160|
;;;4246   	{
;;;4247   
;;;4248   	//–ÂÎÂ ‡‚‡ËÈ ·‡Ú‡ÂÈ
;;;4249   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BAT))
002ad2  20d2              MOVS     r0,#0xd2
002ad4  f7fffffe          BL       mess_find_unvol
002ad8  b110              CBZ      r0,|L1.10976|
002ada  6828              LDR      r0,[r5,#0]  ; mess_data
002adc  2867              CMP      r0,#0x67
002ade  d023              BEQ      |L1.11048|
                  |L1.10976|
;;;4250   		{
;;;4251   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,4,1);
;;;4252   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,4,1);
;;;4253        	}
;;;4254   	else 
;;;4255   		{
;;;4256   		if(!(ips_bat_av_stat)) SET_REG(LPC_GPIO0->FIOCLR,1,4,1);
002ae0  f8980000          LDRB     r0,[r8,#0]  ; ips_bat_av_stat
002ae4  b370              CBZ      r0,|L1.11076|
;;;4257        	else SET_REG(LPC_GPIO0->FIOSET,1,4,1);
002ae6  69a0              LDR      r0,[r4,#0x18]
002ae8  f0400010          ORR      r0,r0,#0x10
002aec  61a0              STR      r0,[r4,#0x18]
                  |L1.10990|
;;;4258   		} 
;;;4259   
;;;4260   
;;;4261   	//–ÂÎÂ ‡‚‡ËË ÒÂÚË “”“  ¿ ¿ﬂ ÚÓ À¿∆¿ Ò ‡‚‡ËÂÈ ÒÂÚË. Œ·‡˘ÂÌËÂ Í ‡ÁÌ˚Ï ÔÓÚ‡Ï
;;;4262   	#ifndef UKU2071x
;;;4263   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_NET))
;;;4264   		{
;;;4265   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;4266   		else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_NET,1);
;;;4267   		}
;;;4268   	else	if(!(avar_ind_stat&0x00000001)) SET_REG(LPC_GPIO1->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;4269   	else SET_REG(LPC_GPIO3->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;4270   	#endif
;;;4271   	#ifdef UKU2071x
;;;4272   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_NET))
002aee  20d2              MOVS     r0,#0xd2
002af0  f7fffffe          BL       mess_find_unvol
002af4  b110              CBZ      r0,|L1.11004|
002af6  6828              LDR      r0,[r5,#0]  ; mess_data
002af8  2866              CMP      r0,#0x66
002afa  d028              BEQ      |L1.11086|
                  |L1.11004|
;;;4273   		{
;;;4274   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_NET,1);
;;;4275   		else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;4276   		}
;;;4277   	else	if(!(avar_ind_stat&0x00000001)) SET_REG(LPC_GPIO1->FIOSET,1,SHIFT_REL_AV_NET,1);
002afc  6830              LDR      r0,[r6,#0]  ; avar_ind_stat
002afe  07c0              LSLS     r0,r0,#31
002b00  d031              BEQ      |L1.11110|
;;;4278   	else SET_REG(LPC_GPIO3->FIOSET,1,SHIFT_REL_AV_NET,1);
002b02  6fa0              LDR      r0,[r4,#0x78]
002b04  f0407000          ORR      r0,r0,#0x2000000
002b08  67a0              STR      r0,[r4,#0x78]
                  |L1.11018|
;;;4279   	#endif
;;;4280   
;;;4281   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BPS))
002b0a  20d2              MOVS     r0,#0xd2
002b0c  f7fffffe          BL       mess_find_unvol
002b10  b110              CBZ      r0,|L1.11032|
002b12  6828              LDR      r0,[r5,#0]  ; mess_data
002b14  286a              CMP      r0,#0x6a
002b16  d02b              BEQ      |L1.11120|
                  |L1.11032|
;;;4282   		{
;;;4283   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,7,1);
;;;4284   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,7,1);
;;;4285   	     }
;;;4286   	else 
;;;4287   		{
;;;4288   		if(!(avar_ind_stat&0x100007f8)) SET_REG(LPC_GPIO0->FIOCLR,1,7,1);
002b18  6830              LDR      r0,[r6,#0]  ; avar_ind_stat
002b1a  4238              TST      r0,r7
002b1c  d037              BEQ      |L1.11150|
;;;4289   	     else SET_REG(LPC_GPIO0->FIOSET,1,7,1);
002b1e  69a0              LDR      r0,[r4,#0x18]
002b20  f0400080          ORR      r0,r0,#0x80
002b24  61a0              STR      r0,[r4,#0x18]
002b26  e149              B        |L1.11708|
                  |L1.11048|
002b28  6868              LDR      r0,[r5,#4]            ;4251  ; mess_data
002b2a  b130              CBZ      r0,|L1.11066|
002b2c  2801              CMP      r0,#1                 ;4252
002b2e  d1de              BNE      |L1.10990|
002b30  69a0              LDR      r0,[r4,#0x18]         ;4252
002b32  f0400010          ORR      r0,r0,#0x10           ;4252
002b36  61a0              STR      r0,[r4,#0x18]         ;4252
002b38  e7d9              B        |L1.10990|
                  |L1.11066|
002b3a  69e0              LDR      r0,[r4,#0x1c]         ;4251
002b3c  f0400010          ORR      r0,r0,#0x10           ;4251
002b40  61e0              STR      r0,[r4,#0x1c]         ;4251
002b42  e7d4              B        |L1.10990|
                  |L1.11076|
002b44  69e0              LDR      r0,[r4,#0x1c]         ;4256
002b46  f0400010          ORR      r0,r0,#0x10           ;4256
002b4a  61e0              STR      r0,[r4,#0x1c]         ;4256
002b4c  e7cf              B        |L1.10990|
                  |L1.11086|
002b4e  6868              LDR      r0,[r5,#4]            ;4274  ; mess_data
002b50  b120              CBZ      r0,|L1.11100|
002b52  69e0              LDR      r0,[r4,#0x1c]         ;4275
002b54  f0407000          ORR      r0,r0,#0x2000000      ;4275
002b58  61e0              STR      r0,[r4,#0x1c]         ;4275
002b5a  e7d6              B        |L1.11018|
                  |L1.11100|
002b5c  69a0              LDR      r0,[r4,#0x18]         ;4274
002b5e  f0407000          ORR      r0,r0,#0x2000000      ;4274
002b62  61a0              STR      r0,[r4,#0x18]         ;4274
002b64  e7d1              B        |L1.11018|
                  |L1.11110|
002b66  6ba0              LDR      r0,[r4,#0x38]         ;4277
002b68  f0407000          ORR      r0,r0,#0x2000000      ;4277
002b6c  63a0              STR      r0,[r4,#0x38]         ;4277
002b6e  e7cc              B        |L1.11018|
                  |L1.11120|
002b70  6868              LDR      r0,[r5,#4]            ;4283  ; mess_data
002b72  b110              CBZ      r0,|L1.11130|
002b74  2801              CMP      r0,#1                 ;4284
002b76  d005              BEQ      |L1.11140|
002b78  e120              B        |L1.11708|
                  |L1.11130|
002b7a  69e0              LDR      r0,[r4,#0x1c]         ;4283
002b7c  f0400080          ORR      r0,r0,#0x80           ;4283
002b80  61e0              STR      r0,[r4,#0x1c]         ;4283
002b82  e11b              B        |L1.11708|
                  |L1.11140|
002b84  69a0              LDR      r0,[r4,#0x18]         ;4284
002b86  f0400080          ORR      r0,r0,#0x80           ;4284
002b8a  61a0              STR      r0,[r4,#0x18]         ;4284
002b8c  e116              B        |L1.11708|
                  |L1.11150|
002b8e  69e0              LDR      r0,[r4,#0x1c]         ;4288
002b90  f0400080          ORR      r0,r0,#0x80           ;4288
002b94  61e0              STR      r0,[r4,#0x1c]         ;4288
002b96  e111              B        |L1.11708|
                  |L1.11160|
;;;4290   		} 
;;;4291   	}
;;;4292   else	if((AUSW_MAIN==22043)||(AUSW_MAIN==22044))
002b98  f5a041ac          SUB      r1,r0,#0x5600
002b9c  391b              SUBS     r1,r1,#0x1b
002b9e  d001              BEQ      |L1.11172|
002ba0  1e49              SUBS     r1,r1,#1
002ba2  d170              BNE      |L1.11398|
                  |L1.11172|
;;;4293   	{
;;;4294   	//–ÂÎÂ ‡‚‡ËÈ ·‡Ú‡ÂÈ
;;;4295   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BAT))
002ba4  20d2              MOVS     r0,#0xd2
002ba6  f7fffffe          BL       mess_find_unvol
002baa  b110              CBZ      r0,|L1.11186|
002bac  6828              LDR      r0,[r5,#0]  ; mess_data
002bae  2867              CMP      r0,#0x67
002bb0  d031              BEQ      |L1.11286|
                  |L1.11186|
;;;4296   		{
;;;4297   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,4,1);
;;;4298   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,4,1);
;;;4299        	}
;;;4300   	else 
;;;4301   		{
;;;4302   		if(!(ips_bat_av_stat)) SET_REG(LPC_GPIO0->FIOCLR,1,4,1);
002bb2  f8980000          LDRB     r0,[r8,#0]  ; ips_bat_av_stat
002bb6  b3b8              CBZ      r0,|L1.11304|
;;;4303        	else SET_REG(LPC_GPIO0->FIOSET,1,4,1);
002bb8  69a0              LDR      r0,[r4,#0x18]
002bba  f0400010          ORR      r0,r0,#0x10
002bbe  61a0              STR      r0,[r4,#0x18]
                  |L1.11200|
;;;4304   		} 
;;;4305   	//–ÂÎÂ ‡‚‡ËË ÒÂÚË “”“  ¿ ¿ﬂ ÚÓ À¿∆¿ Ò ‡‚‡ËÂÈ ÒÂÚË. Œ·‡˘ÂÌËÂ Í ‡ÁÌ˚Ï ÔÓÚ‡Ï
;;;4306   	#ifndef UKU2071x 
;;;4307   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_NET))
;;;4308   		{
;;;4309   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;4310   		else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_NET,1);
;;;4311   		}
;;;4312   	else	if(!(avar_ind_stat&0x00000001)) SET_REG(LPC_GPIO1->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;4313   	else SET_REG(LPC_GPIO3->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;4314   	#endif
;;;4315   	#ifdef UKU2071x 
;;;4316   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_NET))
002bc0  20d2              MOVS     r0,#0xd2
002bc2  f7fffffe          BL       mess_find_unvol
002bc6  b110              CBZ      r0,|L1.11214|
002bc8  6828              LDR      r0,[r5,#0]  ; mess_data
002bca  2866              CMP      r0,#0x66
002bcc  d037              BEQ      |L1.11326|
                  |L1.11214|
;;;4317   		{
;;;4318   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_NET,1);
;;;4319   		else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;4320   		}
;;;4321   	else	if(!(avar_ind_stat&0x00000001)) SET_REG(LPC_GPIO1->FIOSET,1,SHIFT_REL_AV_NET,1);
002bce  6830              LDR      r0,[r6,#0]  ; avar_ind_stat
002bd0  07c0              LSLS     r0,r0,#31
002bd2  d040              BEQ      |L1.11350|
;;;4322   	else SET_REG(LPC_GPIO3->FIOSET,1,SHIFT_REL_AV_NET,1);
002bd4  6fa0              LDR      r0,[r4,#0x78]
002bd6  f0407000          ORR      r0,r0,#0x2000000
002bda  67a0              STR      r0,[r4,#0x78]
                  |L1.11228|
;;;4323   	#endif
;;;4324   
;;;4325   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BPS))
002bdc  20d2              MOVS     r0,#0xd2
002bde  f7fffffe          BL       mess_find_unvol
002be2  b110              CBZ      r0,|L1.11242|
002be4  6828              LDR      r0,[r5,#0]  ; mess_data
002be6  286a              CMP      r0,#0x6a
002be8  d03a              BEQ      |L1.11360|
                  |L1.11242|
;;;4326   		{
;;;4327   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,7,1);
;;;4328   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,7,1);
;;;4329   	     }
;;;4330   	else 
;;;4331   		{
;;;4332   		if(!(avar_ind_stat&0x100007f8)) SET_REG(LPC_GPIO0->FIOCLR,1,7,1);
002bea  6830              LDR      r0,[r6,#0]  ; avar_ind_stat
002bec  4238              TST      r0,r7
002bee  d045              BEQ      |L1.11388|
;;;4333   	     else SET_REG(LPC_GPIO0->FIOSET,1,7,1);
002bf0  69a0              LDR      r0,[r4,#0x18]
002bf2  f0400080          ORR      r0,r0,#0x80
002bf6  61a0              STR      r0,[r4,#0x18]
                  |L1.11256|
;;;4334   		}
;;;4335   	//–ÂÎÂ ‡‚‡ËË ¡œ—
;;;4336   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BPS))
002bf8  20d2              MOVS     r0,#0xd2
002bfa  f7fffffe          BL       mess_find_unvol
002bfe  b110              CBZ      r0,|L1.11270|
002c00  6828              LDR      r0,[r5,#0]  ; mess_data
002c02  286a              CMP      r0,#0x6a
002c04  d040              BEQ      |L1.11400|
                  |L1.11270|
;;;4337   		{
;;;4338   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
;;;4339   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
;;;4340        	}
;;;4341   	else 
;;;4342   		{
;;;4343   		if(!(avar_ind_stat&0x100007f8)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
002c06  6830              LDR      r0,[r6,#0]  ; avar_ind_stat
002c08  4238              TST      r0,r7
002c0a  d04c              BEQ      |L1.11430|
;;;4344        	else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
002c0c  69a0              LDR      r0,[r4,#0x18]
002c0e  f0400020          ORR      r0,r0,#0x20
002c12  61a0              STR      r0,[r4,#0x18]
002c14  e0d2              B        |L1.11708|
                  |L1.11286|
002c16  6868              LDR      r0,[r5,#4]            ;4297  ; mess_data
002c18  b138              CBZ      r0,|L1.11306|
002c1a  2801              CMP      r0,#1                 ;4298
002c1c  d1d0              BNE      |L1.11200|
002c1e  69a0              LDR      r0,[r4,#0x18]         ;4298
002c20  f0400010          ORR      r0,r0,#0x10           ;4298
002c24  61a0              STR      r0,[r4,#0x18]         ;4298
002c26  e7cb              B        |L1.11200|
                  |L1.11304|
002c28  e004              B        |L1.11316|
                  |L1.11306|
002c2a  69e0              LDR      r0,[r4,#0x1c]         ;4297
002c2c  f0400010          ORR      r0,r0,#0x10           ;4297
002c30  61e0              STR      r0,[r4,#0x1c]         ;4297
002c32  e7c5              B        |L1.11200|
                  |L1.11316|
002c34  69e0              LDR      r0,[r4,#0x1c]         ;4302
002c36  f0400010          ORR      r0,r0,#0x10           ;4302
002c3a  61e0              STR      r0,[r4,#0x1c]         ;4302
002c3c  e7c0              B        |L1.11200|
                  |L1.11326|
002c3e  6868              LDR      r0,[r5,#4]            ;4318  ; mess_data
002c40  b120              CBZ      r0,|L1.11340|
002c42  69e0              LDR      r0,[r4,#0x1c]         ;4319
002c44  f0407000          ORR      r0,r0,#0x2000000      ;4319
002c48  61e0              STR      r0,[r4,#0x1c]         ;4319
002c4a  e7c7              B        |L1.11228|
                  |L1.11340|
002c4c  69a0              LDR      r0,[r4,#0x18]         ;4318
002c4e  f0407000          ORR      r0,r0,#0x2000000      ;4318
002c52  61a0              STR      r0,[r4,#0x18]         ;4318
002c54  e7c2              B        |L1.11228|
                  |L1.11350|
002c56  6ba0              LDR      r0,[r4,#0x38]         ;4321
002c58  f0407000          ORR      r0,r0,#0x2000000      ;4321
002c5c  63a0              STR      r0,[r4,#0x38]         ;4321
002c5e  e7bd              B        |L1.11228|
                  |L1.11360|
002c60  6868              LDR      r0,[r5,#4]            ;4327  ; mess_data
002c62  b130              CBZ      r0,|L1.11378|
002c64  2801              CMP      r0,#1                 ;4328
002c66  d1c7              BNE      |L1.11256|
002c68  69a0              LDR      r0,[r4,#0x18]         ;4328
002c6a  f0400080          ORR      r0,r0,#0x80           ;4328
002c6e  61a0              STR      r0,[r4,#0x18]         ;4328
002c70  e7c2              B        |L1.11256|
                  |L1.11378|
002c72  69e0              LDR      r0,[r4,#0x1c]         ;4327
002c74  f0400080          ORR      r0,r0,#0x80           ;4327
002c78  61e0              STR      r0,[r4,#0x1c]         ;4327
002c7a  e7bd              B        |L1.11256|
                  |L1.11388|
002c7c  69e0              LDR      r0,[r4,#0x1c]         ;4332
002c7e  f0400080          ORR      r0,r0,#0x80           ;4332
002c82  61e0              STR      r0,[r4,#0x1c]         ;4332
002c84  e7b8              B        |L1.11256|
                  |L1.11398|
002c86  e013              B        |L1.11440|
                  |L1.11400|
002c88  6868              LDR      r0,[r5,#4]            ;4338  ; mess_data
002c8a  b110              CBZ      r0,|L1.11410|
002c8c  2801              CMP      r0,#1                 ;4339
002c8e  d005              BEQ      |L1.11420|
002c90  e094              B        |L1.11708|
                  |L1.11410|
002c92  69e0              LDR      r0,[r4,#0x1c]         ;4338
002c94  f0400020          ORR      r0,r0,#0x20           ;4338
002c98  61e0              STR      r0,[r4,#0x1c]         ;4338
002c9a  e08f              B        |L1.11708|
                  |L1.11420|
002c9c  69a0              LDR      r0,[r4,#0x18]         ;4339
002c9e  f0400020          ORR      r0,r0,#0x20           ;4339
002ca2  61a0              STR      r0,[r4,#0x18]         ;4339
002ca4  e08a              B        |L1.11708|
                  |L1.11430|
002ca6  69e0              LDR      r0,[r4,#0x1c]         ;4343
002ca8  f0400020          ORR      r0,r0,#0x20           ;4343
002cac  61e0              STR      r0,[r4,#0x1c]         ;4343
002cae  e085              B        |L1.11708|
                  |L1.11440|
;;;4345   		} 
;;;4346   	}
;;;4347   else	if((AUSW_MAIN==22033)||(AUSW_MAIN==22018))
002cb0  f5a041ac          SUB      r1,r0,#0x5600
002cb4  3911              SUBS     r1,r1,#0x11
002cb6  d001              BEQ      |L1.11452|
002cb8  310f              ADDS     r1,r1,#0xf
002cba  d163              BNE      |L1.11652|
                  |L1.11452|
;;;4348   	{
;;;4349   	#ifndef UKU2071x 
;;;4350   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_NET))
;;;4351   		{
;;;4352   		if(mess_data[1]==0) SET_REG(LPC_GPIO3->FIOSET,1,25,1);
;;;4353   		else SET_REG(LPC_GPIO3->FIOCLR,1,25,1);
;;;4354   		}
;;;4355   	else	if(!(avar_ind_stat&0x00000001)) SET_REG(LPC_GPIO3->FIOSET,1,25,1);
;;;4356   	else SET_REG(LPC_GPIO3->FIOCLR,1,25,1);
;;;4357   	#endif
;;;4358   	#ifdef UKU2071x 
;;;4359   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_NET))
002cbc  20d2              MOVS     r0,#0xd2
002cbe  f7fffffe          BL       mess_find_unvol
002cc2  b110              CBZ      r0,|L1.11466|
002cc4  6828              LDR      r0,[r5,#0]  ; mess_data
002cc6  2866              CMP      r0,#0x66
002cc8  d023              BEQ      |L1.11538|
                  |L1.11466|
;;;4360   		{
;;;4361   		if(mess_data[1]==0) SET_REG(LPC_GPIO3->FIOCLR,1,25,1);
;;;4362   		else SET_REG(LPC_GPIO3->FIOSET,1,25,1);
;;;4363   		}
;;;4364   	else	if(!(avar_ind_stat&0x00000001)) SET_REG(LPC_GPIO3->FIOCLR,1,25,1);
002cca  6830              LDR      r0,[r6,#0]  ; avar_ind_stat
002ccc  07c0              LSLS     r0,r0,#31
002cce  d02c              BEQ      |L1.11562|
;;;4365   	else SET_REG(LPC_GPIO3->FIOSET,1,25,1);
002cd0  6fa0              LDR      r0,[r4,#0x78]
002cd2  f0407000          ORR      r0,r0,#0x2000000
002cd6  67a0              STR      r0,[r4,#0x78]
                  |L1.11480|
;;;4366   	#endif
;;;4367   	
;;;4368   	
;;;4369   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BPS))
002cd8  20d2              MOVS     r0,#0xd2
002cda  f7fffffe          BL       mess_find_unvol
002cde  b110              CBZ      r0,|L1.11494|
002ce0  6828              LDR      r0,[r5,#0]  ; mess_data
002ce2  286a              CMP      r0,#0x6a
002ce4  d026              BEQ      |L1.11572|
                  |L1.11494|
;;;4370   		{
;;;4371   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,7,1);
;;;4372   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,7,1);
;;;4373   	     }
;;;4374   	else 
;;;4375   		{
;;;4376   		if(!(avar_ind_stat&0x100007f8)) SET_REG(LPC_GPIO0->FIOCLR,1,7,1);
002ce6  6830              LDR      r0,[r6,#0]  ; avar_ind_stat
002ce8  4238              TST      r0,r7
002cea  d031              BEQ      |L1.11600|
;;;4377   	     else SET_REG(LPC_GPIO0->FIOSET,1,7,1);
002cec  69a0              LDR      r0,[r4,#0x18]
002cee  f0400080          ORR      r0,r0,#0x80
002cf2  61a0              STR      r0,[r4,#0x18]
                  |L1.11508|
;;;4378   		} 
;;;4379   
;;;4380   	//–ÂÎÂ ‡‚‡ËÈ ·‡Ú‡ÂÈ
;;;4381   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BAT))
002cf4  20d2              MOVS     r0,#0xd2
002cf6  f7fffffe          BL       mess_find_unvol
002cfa  b110              CBZ      r0,|L1.11522|
002cfc  6828              LDR      r0,[r5,#0]  ; mess_data
002cfe  2867              CMP      r0,#0x67
002d00  d02b              BEQ      |L1.11610|
                  |L1.11522|
;;;4382   		{
;;;4383   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,4,1);
;;;4384   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,4,1);
;;;4385        	}
;;;4386   	else 
;;;4387   		{
;;;4388   		if(!(ips_bat_av_stat)) SET_REG(LPC_GPIO0->FIOCLR,1,4,1);
002d02  f8980000          LDRB     r0,[r8,#0]  ; ips_bat_av_stat
002d06  b390              CBZ      r0,|L1.11630|
;;;4389        	else SET_REG(LPC_GPIO0->FIOSET,1,4,1);
002d08  69a0              LDR      r0,[r4,#0x18]
002d0a  f0400010          ORR      r0,r0,#0x10
002d0e  61a0              STR      r0,[r4,#0x18]
002d10  e054              B        |L1.11708|
                  |L1.11538|
002d12  6868              LDR      r0,[r5,#4]            ;4361  ; mess_data
002d14  b120              CBZ      r0,|L1.11552|
002d16  6fa0              LDR      r0,[r4,#0x78]         ;4362
002d18  f0407000          ORR      r0,r0,#0x2000000      ;4362
002d1c  67a0              STR      r0,[r4,#0x78]         ;4362
002d1e  e7db              B        |L1.11480|
                  |L1.11552|
002d20  6fe0              LDR      r0,[r4,#0x7c]         ;4361
002d22  f0407000          ORR      r0,r0,#0x2000000      ;4361
002d26  67e0              STR      r0,[r4,#0x7c]         ;4361
002d28  e7d6              B        |L1.11480|
                  |L1.11562|
002d2a  6fe0              LDR      r0,[r4,#0x7c]         ;4364
002d2c  f0407000          ORR      r0,r0,#0x2000000      ;4364
002d30  67e0              STR      r0,[r4,#0x7c]         ;4364
002d32  e7d1              B        |L1.11480|
                  |L1.11572|
002d34  6868              LDR      r0,[r5,#4]            ;4371  ; mess_data
002d36  b130              CBZ      r0,|L1.11590|
002d38  2801              CMP      r0,#1                 ;4372
002d3a  d1db              BNE      |L1.11508|
002d3c  69a0              LDR      r0,[r4,#0x18]         ;4372
002d3e  f0400080          ORR      r0,r0,#0x80           ;4372
002d42  61a0              STR      r0,[r4,#0x18]         ;4372
002d44  e7d6              B        |L1.11508|
                  |L1.11590|
002d46  69e0              LDR      r0,[r4,#0x1c]         ;4371
002d48  f0400080          ORR      r0,r0,#0x80           ;4371
002d4c  61e0              STR      r0,[r4,#0x1c]         ;4371
002d4e  e7d1              B        |L1.11508|
                  |L1.11600|
002d50  69e0              LDR      r0,[r4,#0x1c]         ;4376
002d52  f0400080          ORR      r0,r0,#0x80           ;4376
002d56  61e0              STR      r0,[r4,#0x1c]         ;4376
002d58  e7cc              B        |L1.11508|
                  |L1.11610|
002d5a  6868              LDR      r0,[r5,#4]            ;4383  ; mess_data
002d5c  b110              CBZ      r0,|L1.11620|
002d5e  2801              CMP      r0,#1                 ;4384
002d60  d006              BEQ      |L1.11632|
002d62  e02b              B        |L1.11708|
                  |L1.11620|
002d64  69e0              LDR      r0,[r4,#0x1c]         ;4383
002d66  f0400010          ORR      r0,r0,#0x10           ;4383
002d6a  61e0              STR      r0,[r4,#0x1c]         ;4383
002d6c  e026              B        |L1.11708|
                  |L1.11630|
002d6e  e004              B        |L1.11642|
                  |L1.11632|
002d70  69a0              LDR      r0,[r4,#0x18]         ;4384
002d72  f0400010          ORR      r0,r0,#0x10           ;4384
002d76  61a0              STR      r0,[r4,#0x18]         ;4384
002d78  e020              B        |L1.11708|
                  |L1.11642|
002d7a  69e0              LDR      r0,[r4,#0x1c]         ;4388
002d7c  f0400010          ORR      r0,r0,#0x10           ;4388
002d80  61e0              STR      r0,[r4,#0x1c]         ;4388
002d82  e01b              B        |L1.11708|
                  |L1.11652|
;;;4390   		} 
;;;4391   	} 	 
;;;4392   else	
;;;4393   	{
;;;4394   	//–ÂÎÂ ‡‚‡ËË ÒÂÚË “”“  ¿ ¿ﬂ ÚÓ À¿∆¿ Ò ‡‚‡ËÂÈ ÒÂÚË. Œ·‡˘ÂÌËÂ Í ‡ÁÌ˚Ï ÔÓÚ‡Ï
;;;4395   	#ifndef UKU2071x 
;;;4396   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_NET))
;;;4397   		{
;;;4398   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;4399   		else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_NET,1);
;;;4400   		}
;;;4401   	else	if(!(avar_ind_stat&0x00000001)) SET_REG(LPC_GPIO1->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;4402   	else SET_REG(LPC_GPIO3->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;4403   	#endif
;;;4404   	#ifdef UKU2071x 
;;;4405   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_NET))
002d84  20d2              MOVS     r0,#0xd2
002d86  f7fffffe          BL       mess_find_unvol
002d8a  b110              CBZ      r0,|L1.11666|
002d8c  6828              LDR      r0,[r5,#0]  ; mess_data
002d8e  2866              CMP      r0,#0x66
002d90  d026              BEQ      |L1.11744|
                  |L1.11666|
;;;4406   		{
;;;4407   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_NET,1);
;;;4408   		else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;4409   		}
;;;4410   	else	if(!(avar_ind_stat&0x00000001)) SET_REG(LPC_GPIO1->FIOSET,1,SHIFT_REL_AV_NET,1);
002d92  6830              LDR      r0,[r6,#0]  ; avar_ind_stat
002d94  07c0              LSLS     r0,r0,#31
002d96  d02f              BEQ      |L1.11768|
;;;4411   	else SET_REG(LPC_GPIO3->FIOSET,1,SHIFT_REL_AV_NET,1);
002d98  6fa0              LDR      r0,[r4,#0x78]
002d9a  f0407000          ORR      r0,r0,#0x2000000
002d9e  67a0              STR      r0,[r4,#0x78]
                  |L1.11680|
;;;4412   	#endif
;;;4413   
;;;4414   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BPS))
002da0  20d2              MOVS     r0,#0xd2
002da2  f7fffffe          BL       mess_find_unvol
002da6  b110              CBZ      r0,|L1.11694|
002da8  6828              LDR      r0,[r5,#0]  ; mess_data
002daa  286a              CMP      r0,#0x6a
002dac  d029              BEQ      |L1.11778|
                  |L1.11694|
;;;4415   		{
;;;4416   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
;;;4417   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
;;;4418        	}
;;;4419   	else 
;;;4420   		{
;;;4421   		if(!(avar_ind_stat&0x100007f8)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
002dae  6830              LDR      r0,[r6,#0]  ; avar_ind_stat
002db0  4238              TST      r0,r7
002db2  d034              BEQ      |L1.11806|
;;;4422        	else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
002db4  69a0              LDR      r0,[r4,#0x18]
002db6  f0400020          ORR      r0,r0,#0x20
002dba  61a0              STR      r0,[r4,#0x18]
                  |L1.11708|
;;;4423   		}
;;;4424   	}
;;;4425   //ƒÓÔÓÎÌËÚÂÎ¸ÌÓÂ ÂÎÂ ” ” 
;;;4426   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_EXT))	 
002dbc  20d2              MOVS     r0,#0xd2
002dbe  f7fffffe          BL       mess_find_unvol
;;;4427   	{
;;;4428   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,9,1);
;;;4429   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,9,1);
;;;4430   	}
;;;4431   else if(DOP_RELE_FUNC==0)	//ÂÒÎË ‰ÓÔÂÎÂ ÔÓ‰ÍÎ˛˜ÂÌÓ Í ÛÒÍÓÂÌÌÓÏÛ Á‡ˇ‰Û
;;;4432   	{
;;;4433   	if((!speedChIsOn)&&(spc_stat!=spcVZ)&&(hv_vz_stat==hvsOFF)&&(sp_ch_stat==scsOFF)&&(vz1_stat==vz1sOFF)&&(vz2_stat==vz2sOFF)&&(load_U/10<UVENTOFF))   SET_REG(LPC_GPIO0->FIOCLR,1,9,1);
002dc2  f8df83fc          LDR      r8,|L1.12736|
002dc6  4fff              LDR      r7,|L1.12740|
002dc8  4eff              LDR      r6,|L1.12744|
002dca  b110              CBZ      r0,|L1.11730|
002dcc  6828              LDR      r0,[r5,#0]            ;4426  ; mess_data
002dce  2871              CMP      r0,#0x71              ;4426
002dd0  d02a              BEQ      |L1.11816|
                  |L1.11730|
002dd2  48fe              LDR      r0,|L1.12748|
002dd4  f9b00000          LDRSH    r0,[r0,#0]            ;4431  ; DOP_RELE_FUNC
002dd8  b380              CBZ      r0,|L1.11836|
;;;4434   	else if((speedChIsOn)||(spc_stat==spcVZ)||(hv_vz_stat!=hvsOFF)||(sp_ch_stat!=scsOFF)||(vz1_stat!=vz1sOFF)||(vz2_stat!=vz2sOFF)) SET_REG(LPC_GPIO0->FIOSET,1,9,1);
;;;4435   	}
;;;4436   else if(DOP_RELE_FUNC==1)  //ÂÒÎË ‰ÓÔÂÎÂ ÔÓ‰ÍÎ˛˜ÂÌÓ Í ËÌ‰ËÍ‡ˆËË ‡ÁˇÊÂÌÌÓÈ ·‡Ú‡ÂË
002dda  2801              CMP      r0,#1
002ddc  d068              BEQ      |L1.11952|
002dde  e072              B        |L1.11974|
                  |L1.11744|
002de0  6868              LDR      r0,[r5,#4]            ;4407  ; mess_data
002de2  b120              CBZ      r0,|L1.11758|
002de4  69e0              LDR      r0,[r4,#0x1c]         ;4408
002de6  f0407000          ORR      r0,r0,#0x2000000      ;4408
002dea  61e0              STR      r0,[r4,#0x1c]         ;4408
002dec  e7d8              B        |L1.11680|
                  |L1.11758|
002dee  69a0              LDR      r0,[r4,#0x18]         ;4407
002df0  f0407000          ORR      r0,r0,#0x2000000      ;4407
002df4  61a0              STR      r0,[r4,#0x18]         ;4407
002df6  e7d3              B        |L1.11680|
                  |L1.11768|
002df8  6ba0              LDR      r0,[r4,#0x38]         ;4410
002dfa  f0407000          ORR      r0,r0,#0x2000000      ;4410
002dfe  63a0              STR      r0,[r4,#0x38]         ;4410
002e00  e7ce              B        |L1.11680|
                  |L1.11778|
002e02  6868              LDR      r0,[r5,#4]            ;4416  ; mess_data
002e04  b130              CBZ      r0,|L1.11796|
002e06  2801              CMP      r0,#1                 ;4417
002e08  d1d8              BNE      |L1.11708|
002e0a  69a0              LDR      r0,[r4,#0x18]         ;4417
002e0c  f0400020          ORR      r0,r0,#0x20           ;4417
002e10  61a0              STR      r0,[r4,#0x18]         ;4417
002e12  e7d3              B        |L1.11708|
                  |L1.11796|
002e14  69e0              LDR      r0,[r4,#0x1c]         ;4416
002e16  f0400020          ORR      r0,r0,#0x20           ;4416
002e1a  61e0              STR      r0,[r4,#0x1c]         ;4416
002e1c  e7ce              B        |L1.11708|
                  |L1.11806|
002e1e  69e0              LDR      r0,[r4,#0x1c]         ;4421
002e20  f0400020          ORR      r0,r0,#0x20           ;4421
002e24  61e0              STR      r0,[r4,#0x1c]         ;4421
002e26  e7c9              B        |L1.11708|
                  |L1.11816|
002e28  6868              LDR      r0,[r5,#4]            ;4428  ; mess_data
002e2a  b110              CBZ      r0,|L1.11826|
002e2c  2801              CMP      r0,#1                 ;4429
002e2e  d006              BEQ      |L1.11838|
002e30  e049              B        |L1.11974|
                  |L1.11826|
002e32  69e0              LDR      r0,[r4,#0x1c]         ;4428
002e34  f4407000          ORR      r0,r0,#0x200          ;4428
002e38  61e0              STR      r0,[r4,#0x1c]         ;4428
002e3a  e044              B        |L1.11974|
                  |L1.11836|
002e3c  e004              B        |L1.11848|
                  |L1.11838|
002e3e  69a0              LDR      r0,[r4,#0x18]         ;4429
002e40  f4407000          ORR      r0,r0,#0x200          ;4429
002e44  61a0              STR      r0,[r4,#0x18]         ;4429
002e46  e03e              B        |L1.11974|
                  |L1.11848|
002e48  48e1              LDR      r0,|L1.12752|
002e4a  49e2              LDR      r1,|L1.12756|
002e4c  f9b00000          LDRSH    r0,[r0,#0]            ;4433  ; speedChIsOn
002e50  b9d8              CBNZ     r0,|L1.11914|
002e52  7d72              LDRB     r2,[r6,#0x15]         ;4433  ; spc_stat
002e54  2a02              CMP      r2,#2                 ;4433
002e56  d018              BEQ      |L1.11914|
002e58  780a              LDRB     r2,[r1,#0]            ;4433  ; hv_vz_stat
002e5a  b9b2              CBNZ     r2,|L1.11914|
002e5c  783a              LDRB     r2,[r7,#0]            ;4433  ; sp_ch_stat
002e5e  b9a2              CBNZ     r2,|L1.11914|
002e60  f8962021          LDRB     r2,[r6,#0x21]         ;4433  ; vz1_stat
002e64  b98a              CBNZ     r2,|L1.11914|
002e66  f8962024          LDRB     r2,[r6,#0x24]         ;4433  ; vz2_stat
002e6a  b972              CBNZ     r2,|L1.11914|
002e6c  f9b82000          LDRSH    r2,[r8,#0]            ;4433  ; load_U
002e70  230a              MOVS     r3,#0xa               ;4433
002e72  fb92f2f3          SDIV     r2,r2,r3              ;4433
002e76  4bd8              LDR      r3,|L1.12760|
002e78  f9b33000          LDRSH    r3,[r3,#0]            ;4433  ; UVENTOFF
002e7c  429a              CMP      r2,r3                 ;4433
002e7e  da04              BGE      |L1.11914|
002e80  69e0              LDR      r0,[r4,#0x1c]         ;4433
002e82  f4407000          ORR      r0,r0,#0x200          ;4433
002e86  61e0              STR      r0,[r4,#0x1c]         ;4433
002e88  e01d              B        |L1.11974|
                  |L1.11914|
002e8a  b960              CBNZ     r0,|L1.11942|
002e8c  7d70              LDRB     r0,[r6,#0x15]         ;4434  ; spc_stat
002e8e  2802              CMP      r0,#2                 ;4434
002e90  d009              BEQ      |L1.11942|
002e92  7808              LDRB     r0,[r1,#0]            ;4434  ; hv_vz_stat
002e94  b938              CBNZ     r0,|L1.11942|
002e96  7838              LDRB     r0,[r7,#0]            ;4434  ; sp_ch_stat
002e98  b928              CBNZ     r0,|L1.11942|
002e9a  f8960021          LDRB     r0,[r6,#0x21]         ;4434  ; vz1_stat
002e9e  b910              CBNZ     r0,|L1.11942|
002ea0  f8960024          LDRB     r0,[r6,#0x24]         ;4434  ; vz2_stat
002ea4  b178              CBZ      r0,|L1.11974|
                  |L1.11942|
002ea6  69a0              LDR      r0,[r4,#0x18]         ;4434
002ea8  f4407000          ORR      r0,r0,#0x200          ;4434
002eac  61a0              STR      r0,[r4,#0x18]         ;4434
002eae  e00a              B        |L1.11974|
                  |L1.11952|
;;;4437   	{
;;;4438   	if((mess_find_unvol(MESS2RELE_HNDL))&& (mess_data[0]==PARAM_RELE_BAT_IS_DISCHARGED)) SET_REG(LPC_GPIO0->FIOCLR,1,9,1);
002eb0  20d2              MOVS     r0,#0xd2
002eb2  f7fffffe          BL       mess_find_unvol
002eb6  b110              CBZ      r0,|L1.11966|
002eb8  6828              LDR      r0,[r5,#0]  ; mess_data
002eba  2872              CMP      r0,#0x72
002ebc  d017              BEQ      |L1.12014|
                  |L1.11966|
;;;4439   	else SET_REG(LPC_GPIO0->FIOSET,1,9,1);
002ebe  69a0              LDR      r0,[r4,#0x18]
002ec0  f4407000          ORR      r0,r0,#0x200
002ec4  61a0              STR      r0,[r4,#0x18]
                  |L1.11974|
;;;4440   	}
;;;4441   	
;;;4442   //¡ÎÓÍ ‚˚ÌÓÒÌÓÈ ÂÎÂ
;;;4443   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_BDR1))
002ec6  20d2              MOVS     r0,#0xd2
002ec8  f7fffffe          BL       mess_find_unvol
;;;4444   	{
;;;4445   	if(mess_data[1]==0) 		bdr_transmit_stat&=0xfe;
002ecc  f8df930c          LDR      r9,|L1.12764|
;;;4446   	else if(mess_data[1]==1) 	bdr_transmit_stat|=0x01;
;;;4447   	}
;;;4448   else 
;;;4449   	{
;;;4450   	if(bdr_avar_stat&0x01)  	bdr_transmit_stat|=0x01;
002ed0  4cc3              LDR      r4,|L1.12768|
002ed2  b110              CBZ      r0,|L1.11994|
002ed4  6828              LDR      r0,[r5,#0]            ;4443  ; mess_data
002ed6  2875              CMP      r0,#0x75              ;4443
002ed8  d00e              BEQ      |L1.12024|
                  |L1.11994|
002eda  7820              LDRB     r0,[r4,#0]  ; bdr_avar_stat
002edc  07c0              LSLS     r0,r0,#31
002ede  d01e              BEQ      |L1.12062|
002ee0  f8990000          LDRB     r0,[r9,#0]  ; bdr_transmit_stat
002ee4  f0400001          ORR      r0,r0,#1
002ee8  f8890000          STRB     r0,[r9,#0]
002eec  e01d              B        |L1.12074|
                  |L1.12014|
002eee  69e0              LDR      r0,[r4,#0x1c]         ;4438
002ef0  f4407000          ORR      r0,r0,#0x200          ;4438
002ef4  61e0              STR      r0,[r4,#0x1c]         ;4438
002ef6  e7e6              B        |L1.11974|
                  |L1.12024|
002ef8  6868              LDR      r0,[r5,#4]            ;4445  ; mess_data
002efa  b110              CBZ      r0,|L1.12034|
002efc  2801              CMP      r0,#1                 ;4446
002efe  d007              BEQ      |L1.12048|
002f00  e013              B        |L1.12074|
                  |L1.12034|
002f02  f8990000          LDRB     r0,[r9,#0]            ;4445  ; bdr_transmit_stat
002f06  f00000fe          AND      r0,r0,#0xfe           ;4445
002f0a  f8890000          STRB     r0,[r9,#0]            ;4445
002f0e  e00c              B        |L1.12074|
                  |L1.12048|
002f10  f8990000          LDRB     r0,[r9,#0]            ;4446  ; bdr_transmit_stat
002f14  f0400001          ORR      r0,r0,#1              ;4446
002f18  f8890000          STRB     r0,[r9,#0]            ;4446
002f1c  e005              B        |L1.12074|
                  |L1.12062|
;;;4451   	else 						bdr_transmit_stat&=0xfe;
002f1e  f8990000          LDRB     r0,[r9,#0]  ; bdr_transmit_stat
002f22  f00000fe          AND      r0,r0,#0xfe
002f26  f8890000          STRB     r0,[r9,#0]
                  |L1.12074|
;;;4452   	}	
;;;4453   
;;;4454   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_BDR2))
002f2a  20d2              MOVS     r0,#0xd2
002f2c  f7fffffe          BL       mess_find_unvol
002f30  b110              CBZ      r0,|L1.12088|
002f32  6828              LDR      r0,[r5,#0]  ; mess_data
002f34  2876              CMP      r0,#0x76
002f36  d009              BEQ      |L1.12108|
                  |L1.12088|
;;;4455   	{
;;;4456   	if(mess_data[1]==0) 		bdr_transmit_stat&=0xfd;
;;;4457   	else if(mess_data[1]==1) 	bdr_transmit_stat|=0x02;
;;;4458   	}
;;;4459   else 
;;;4460   	{
;;;4461   	if(bdr_avar_stat&0x01)  	bdr_transmit_stat|=0x02;
002f38  7820              LDRB     r0,[r4,#0]  ; bdr_avar_stat
002f3a  07c0              LSLS     r0,r0,#31
002f3c  d019              BEQ      |L1.12146|
002f3e  f8990000          LDRB     r0,[r9,#0]  ; bdr_transmit_stat
002f42  f0400002          ORR      r0,r0,#2
002f46  f8890000          STRB     r0,[r9,#0]
002f4a  e018              B        |L1.12158|
                  |L1.12108|
002f4c  6868              LDR      r0,[r5,#4]            ;4456  ; mess_data
002f4e  b110              CBZ      r0,|L1.12118|
002f50  2801              CMP      r0,#1                 ;4457
002f52  d007              BEQ      |L1.12132|
002f54  e013              B        |L1.12158|
                  |L1.12118|
002f56  f8990000          LDRB     r0,[r9,#0]            ;4456  ; bdr_transmit_stat
002f5a  f00000fd          AND      r0,r0,#0xfd           ;4456
002f5e  f8890000          STRB     r0,[r9,#0]            ;4456
002f62  e00c              B        |L1.12158|
                  |L1.12132|
002f64  f8990000          LDRB     r0,[r9,#0]            ;4457  ; bdr_transmit_stat
002f68  f0400002          ORR      r0,r0,#2              ;4457
002f6c  f8890000          STRB     r0,[r9,#0]            ;4457
002f70  e005              B        |L1.12158|
                  |L1.12146|
;;;4462   	else 						bdr_transmit_stat&=0xfd;
002f72  f8990000          LDRB     r0,[r9,#0]  ; bdr_transmit_stat
002f76  f00000fd          AND      r0,r0,#0xfd
002f7a  f8890000          STRB     r0,[r9,#0]
                  |L1.12158|
;;;4463   	}	
;;;4464   	
;;;4465   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_BDR3))
002f7e  20d2              MOVS     r0,#0xd2
002f80  f7fffffe          BL       mess_find_unvol
002f84  b110              CBZ      r0,|L1.12172|
002f86  6828              LDR      r0,[r5,#0]  ; mess_data
002f88  2877              CMP      r0,#0x77
002f8a  d009              BEQ      |L1.12192|
                  |L1.12172|
;;;4466   	{
;;;4467   	if(mess_data[1]==0) 		bdr_transmit_stat&=0xfb;
;;;4468   	else if(mess_data[1]==1) 	bdr_transmit_stat|=0x04;
;;;4469   	}
;;;4470   else 
;;;4471   	{
;;;4472   	if(bdr_avar_stat&0x01)  	bdr_transmit_stat|=0x04;
002f8c  7820              LDRB     r0,[r4,#0]  ; bdr_avar_stat
002f8e  07c0              LSLS     r0,r0,#31
002f90  d019              BEQ      |L1.12230|
002f92  f8990000          LDRB     r0,[r9,#0]  ; bdr_transmit_stat
002f96  f0400004          ORR      r0,r0,#4
002f9a  f8890000          STRB     r0,[r9,#0]
002f9e  e018              B        |L1.12242|
                  |L1.12192|
002fa0  6868              LDR      r0,[r5,#4]            ;4467  ; mess_data
002fa2  b110              CBZ      r0,|L1.12202|
002fa4  2801              CMP      r0,#1                 ;4468
002fa6  d007              BEQ      |L1.12216|
002fa8  e013              B        |L1.12242|
                  |L1.12202|
002faa  f8990000          LDRB     r0,[r9,#0]            ;4467  ; bdr_transmit_stat
002fae  f00000fb          AND      r0,r0,#0xfb           ;4467
002fb2  f8890000          STRB     r0,[r9,#0]            ;4467
002fb6  e00c              B        |L1.12242|
                  |L1.12216|
002fb8  f8990000          LDRB     r0,[r9,#0]            ;4468  ; bdr_transmit_stat
002fbc  f0400004          ORR      r0,r0,#4              ;4468
002fc0  f8890000          STRB     r0,[r9,#0]            ;4468
002fc4  e005              B        |L1.12242|
                  |L1.12230|
;;;4473   	else 						bdr_transmit_stat&=0xfb;
002fc6  f8990000          LDRB     r0,[r9,#0]  ; bdr_transmit_stat
002fca  f00000fb          AND      r0,r0,#0xfb
002fce  f8890000          STRB     r0,[r9,#0]
                  |L1.12242|
;;;4474   	}	
;;;4475   	
;;;4476   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_BDR4))
002fd2  20d2              MOVS     r0,#0xd2
002fd4  f7fffffe          BL       mess_find_unvol
002fd8  b110              CBZ      r0,|L1.12256|
002fda  6828              LDR      r0,[r5,#0]  ; mess_data
002fdc  2878              CMP      r0,#0x78
002fde  d009              BEQ      |L1.12276|
                  |L1.12256|
;;;4477   	{
;;;4478   	if(mess_data[1]==0) 		bdr_transmit_stat&=0xf7;
;;;4479   	else if(mess_data[1]==1) 	bdr_transmit_stat|=0x08;
;;;4480   	}
;;;4481   else 
;;;4482   	{
;;;4483   	if(bdr_avar_stat&0x01)  	bdr_transmit_stat|=0x08;
002fe0  7820              LDRB     r0,[r4,#0]  ; bdr_avar_stat
002fe2  07c0              LSLS     r0,r0,#31
002fe4  d019              BEQ      |L1.12314|
002fe6  f8990000          LDRB     r0,[r9,#0]  ; bdr_transmit_stat
002fea  f0400008          ORR      r0,r0,#8
002fee  f8890000          STRB     r0,[r9,#0]
002ff2  e018              B        |L1.12326|
                  |L1.12276|
002ff4  6868              LDR      r0,[r5,#4]            ;4478  ; mess_data
002ff6  b110              CBZ      r0,|L1.12286|
002ff8  2801              CMP      r0,#1                 ;4479
002ffa  d007              BEQ      |L1.12300|
002ffc  e013              B        |L1.12326|
                  |L1.12286|
002ffe  f8990000          LDRB     r0,[r9,#0]            ;4478  ; bdr_transmit_stat
003002  f00000f7          AND      r0,r0,#0xf7           ;4478
003006  f8890000          STRB     r0,[r9,#0]            ;4478
00300a  e00c              B        |L1.12326|
                  |L1.12300|
00300c  f8990000          LDRB     r0,[r9,#0]            ;4479  ; bdr_transmit_stat
003010  f0400008          ORR      r0,r0,#8              ;4479
003014  f8890000          STRB     r0,[r9,#0]            ;4479
003018  e005              B        |L1.12326|
                  |L1.12314|
;;;4484   	else 						bdr_transmit_stat&=0xf7;
00301a  f8990000          LDRB     r0,[r9,#0]  ; bdr_transmit_stat
00301e  f00000f7          AND      r0,r0,#0xf7
003022  f8890000          STRB     r0,[r9,#0]
                  |L1.12326|
;;;4485   	}	
;;;4486   					 	
;;;4487   #endif
;;;4488   
;;;4489   #ifdef UKU_KONTUR
;;;4490   
;;;4491   //–ÂÎÂ Ó·˘ÂÈ ‡‚‡ËË
;;;4492   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_COMM))
;;;4493   	{
;;;4494   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_COMM,1);
;;;4495   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_COMM,1);
;;;4496   	}
;;;4497   else 
;;;4498   	{
;;;4499        if(  (!(avar_ind_stat&0x00007fff)) &&
;;;4500             ((!SK_REL_EN[0]) || (sk_av_stat[0]!=sasON))  &&
;;;4501             ((!SK_REL_EN[1]) || (sk_av_stat[1]!=sasON))  &&
;;;4502             ((!SK_REL_EN[2]) || (sk_av_stat[2]!=sasON))  /*&&
;;;4503             ((!SK_REL_EN[3]) || (sk_av_stat[3]!=sasON))*/  )SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_COMM,1);
;;;4504        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_COMM,1);
;;;4505   	}
;;;4506   
;;;4507   	
;;;4508   //rel_warm_plazma=0;
;;;4509   //–ÂÎÂ ÓÒ‚Â˘ÂÌËˇ   
;;;4510   /*
;;;4511   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_WARM))
;;;4512   	{
;;;4513   	if(mess_data[1]==0)
;;;4514   		{
;;;4515   		SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_WARM,1);
;;;4516   		rel_warm_plazma=1;
;;;4517   		}
;;;4518   	else if(mess_data[1]==1) 
;;;4519   		{
;;;4520   		SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_WARM,1);
;;;4521   		rel_warm_plazma=2;
;;;4522   		}
;;;4523        }
;;;4524   else 
;;;4525   	{
;;;4526   	if(warm_stat_k==wsOFF) 
;;;4527   		{
;;;4528   		SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_WARM,1);
;;;4529   		rel_warm_plazma=3;
;;;4530   		}
;;;4531        else 
;;;4532   		{
;;;4533   		SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_WARM,1);
;;;4534   		rel_warm_plazma=4;
;;;4535   		}
;;;4536   	}
;;;4537   */
;;;4538   //–ÂÎÂ ÓÒ‚Â˘ÂÌËˇ
;;;4539   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_LIGHT))
;;;4540   	{
;;;4541   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LIGHT,1);
;;;4542   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LIGHT,1);
;;;4543        }
;;;4544   else 
;;;4545   	{
;;;4546   	if(sk_av_stat[0]!=sasON) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LIGHT,1);
;;;4547        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LIGHT,1);
;;;4548   	}
;;;4549   
;;;4550   
;;;4551   
;;;4552   //–ÂÎÂ ‚˚ÍÎ˛˜ÂÌËˇ Ì‡„ÛÁÍË
;;;4553   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_LOAD_OFF))
;;;4554   	{
;;;4555   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LOAD_OFF,1);
;;;4556   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LOAD_OFF,1);
;;;4557        }
;;;4558   else if(tloaddisable_cmnd==0)
;;;4559   	{
;;;4560   	SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LOAD_OFF,1);
;;;4561   	}
;;;4562   else if((tloaddisable_cmnd)&&(tloaddisable_cmnd<=11))
;;;4563   	{
;;;4564   	SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LOAD_OFF,1);
;;;4565   	}
;;;4566   
;;;4567   else 
;;;4568   	{
;;;4569   	if(!(tloaddisable_stat==tldsON)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LOAD_OFF,1);
;;;4570        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LOAD_OFF,1);
;;;4571   	} 
;;;4572   
;;;4573   //–ÂÎÂ ÓÒÂ‚Ó„Ó ‚ÂÌÚËÎˇÚÓ‡ ËÎË ÓÚÓÔËÚÂÎˇ
;;;4574   if(RELE_LOG)
;;;4575   	{
;;;4576   	if((mess_find_unvol(MESS2RELE_HNDL))&&(mess_data[0]==PARAM_RELE_VENT_WARM))
;;;4577   		{
;;;4578   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT_WARM,1);
;;;4579   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT_WARM,1);
;;;4580   		}
;;;4581   	else 
;;;4582   		{
;;;4583   		if(warm_stat_k==wsOFF) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT_WARM,1);
;;;4584   	     else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT_WARM,1);
;;;4585   		} 
;;;4586   
;;;4587   	}
;;;4588   else 
;;;4589   	{
;;;4590   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_VENT_WARM))
;;;4591   		{
;;;4592   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT_WARM,1);
;;;4593   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT_WARM,1);
;;;4594   		}
;;;4595   	else 
;;;4596   		{
;;;4597   		if(vent_stat_k==vsOFF) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT_WARM,1);
;;;4598   	     else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT_WARM,1);
;;;4599   		} 
;;;4600   	}
;;;4601   #endif
;;;4602   
;;;4603   
;;;4604   #ifdef UKU_TELECORE2015
;;;4605   //–ÂÎÂ ‡‚‡ËË ÒÂÚË
;;;4606   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_NET))
;;;4607   	{
;;;4608   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;4609   	else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_NET,1);
;;;4610   	}
;;;4611   else	if(!(avar_ind_stat&0x00000001)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;4612   else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_NET,1);
;;;4613   
;;;4614   
;;;4615   //–ÂÎÂ ÓÒ‚Â˘ÂÌËˇ
;;;4616   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_LIGHT))
;;;4617   	{
;;;4618   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LIGHT,1);
;;;4619   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LIGHT,1);
;;;4620        }
;;;4621   else 
;;;4622   	{
;;;4623   	if(sk_av_stat[0]!=sasON) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LIGHT,1);
;;;4624        else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LIGHT,1);
;;;4625   	}
;;;4626   
;;;4627   //–ÂÎÂ ÓÚÓÔËÚÂÎˇ
;;;4628   if((mess_find_unvol(MESS2RELE_HNDL))&&(mess_data[0]==PARAM_RELE_WARM))
;;;4629   	{
;;;4630   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_WARM,1);
;;;4631   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_WARM,1);
;;;4632   	}
;;;4633   else 
;;;4634   	{
;;;4635   	if(warm_stat_k==wsOFF) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_WARM,1);
;;;4636        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_WARM,1);
;;;4637   	} 
;;;4638   //–ÂÎÂ ‚ÂÌÚËÎˇÚÓ‡
;;;4639   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_VENT))
;;;4640   	{
;;;4641   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT,1);
;;;4642   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;4643   	}
;;;4644   else 
;;;4645   	{
;;;4646   	if(vent_stat_k==vsOFF) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT,1);
;;;4647        else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;4648   	} 
;;;4649   
;;;4650   //–ÂÎÂ ‚ÌÛÚÂÌÌÂ„Ó ‚ÂÌÚËÎˇÚÓ‡
;;;4651   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_VVENT))
;;;4652   	{
;;;4653   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VVENT,1);
;;;4654   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VVENT,1);
;;;4655   	}
;;;4656   else 
;;;4657   	{
;;;4658   	if(vvent_stat_k==vsOFF) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VVENT,1);
;;;4659        else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VVENT,1);
;;;4660   	} 
;;;4661   
;;;4662   #endif
;;;4663   
;;;4664   #ifdef UKU_TELECORE2017
;;;4665   //–ÂÎÂ ‡‚‡ËË ÒÂÚË
;;;4666   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_NET))
;;;4667   	{
;;;4668   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;4669   	else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_NET,1);
;;;4670   	}
;;;4671   else	if(!(avar_ind_stat&0x00000001)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;4672   else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_NET,1);
;;;4673   
;;;4674   
;;;4675   //–ÂÎÂ ÓÒ‚Â˘ÂÌËˇ
;;;4676   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_LIGHT))
;;;4677   	{
;;;4678   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LIGHT,1);
;;;4679   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LIGHT,1);
;;;4680        }
;;;4681   else 
;;;4682   	{
;;;4683   	if(sk_av_stat[0]!=sasON) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LIGHT,1);
;;;4684        else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LIGHT,1);
;;;4685   	}
;;;4686   
;;;4687   //–ÂÎÂ ÓÚÓÔËÚÂÎˇ
;;;4688   if((mess_find_unvol(MESS2RELE_HNDL))&&(mess_data[0]==PARAM_RELE_WARM))
;;;4689   	{
;;;4690   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_WARM,1);
;;;4691   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_WARM,1);
;;;4692   	}
;;;4693   else 
;;;4694   	{
;;;4695   	if(warm_stat_k==wsOFF) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_WARM,1);
;;;4696        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_WARM,1);
;;;4697   	} 
;;;4698   //–ÂÎÂ ‚ÂÌÚËÎˇÚÓ‡
;;;4699   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_VENT))
;;;4700   	{
;;;4701   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT,1);
;;;4702   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;4703   	}
;;;4704   else 
;;;4705   	{
;;;4706   	if(vent_stat_k==vsOFF) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT,1);
;;;4707        else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;4708   	} 
;;;4709   
;;;4710   //–ÂÎÂ ‚ÌÛÚÂÌÌÂ„Ó ‚ÂÌÚËÎˇÚÓ‡
;;;4711   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_VVENT))
;;;4712   	{
;;;4713   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VVENT,1);
;;;4714   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VVENT,1);
;;;4715   	}
;;;4716   else 
;;;4717   	{
;;;4718   	if(vvent_stat_k==vsOFF) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VVENT,1);
;;;4719        else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VVENT,1);
;;;4720   	} 
;;;4721   
;;;4722   //–ÂÎÂ ‚˚ÍÎ˛˜ÂÌËˇ Ì‡„ÛÁÍË
;;;4723   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_LOAD_OFF))
;;;4724   	{
;;;4725   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LOAD_OFF,1);
;;;4726   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LOAD_OFF,1);
;;;4727        }
;;;4728   else if(tloaddisable_cmnd==0)
;;;4729   	{
;;;4730   	SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LOAD_OFF,1);
;;;4731   	}
;;;4732   else if((tloaddisable_cmnd)&&(tloaddisable_cmnd<=11))
;;;4733   	{
;;;4734   	SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LOAD_OFF,1);
;;;4735   	}
;;;4736   
;;;4737   else 
;;;4738   	{
;;;4739   	if(!(tloaddisable_stat==tldsON)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LOAD_OFF,1);
;;;4740        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LOAD_OFF,1);
;;;4741   	} 
;;;4742   
;;;4743   
;;;4744   #endif
;;;4745   
;;;4746   #ifdef IPS_SGEP_GAZPROM
;;;4747   rele_hndl_plazma[0]++;
;;;4748   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BPS))
;;;4749   	{
;;;4750   	rele_hndl_plazma[1]++;
;;;4751   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
;;;4752   	else/* if(mess_data[1]==1)*/ SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
;;;4753        }
;;;4754   else 
;;;4755   	{
;;;4756   	if(!(avar_ind_stat&0x000007f8)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
;;;4757        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
;;;4758   	} 
;;;4759   
;;;4760   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_NET))
;;;4761   	{
;;;4762   	rele_hndl_plazma[2]++;
;;;4763   	if(mess_data[1]==0) SET_REG(LPC_GPIO3->FIOSET,1,25,1);
;;;4764   	else SET_REG(LPC_GPIO3->FIOCLR,1,25,1);
;;;4765   	}
;;;4766   else	if(!(avar_ind_stat&0x00000001)) SET_REG(LPC_GPIO3->FIOCLR,1,25,1);
;;;4767   else SET_REG(LPC_GPIO3->FIOSET,1,25,1);
;;;4768   #endif
;;;4769   
;;;4770   if(NUMBDR==1)
003026  486f              LDR      r0,|L1.12772|
003028  8800              LDRH     r0,[r0,#0]  ; NUMBDR
00302a  2801              CMP      r0,#1
00302c  d17e              BNE      |L1.12588|
;;;4771   	{
;;;4772   	char ii_;
;;;4773   	char bdr_avar_stat_temp=0;
00302e  f04f0000          MOV      r0,#0
;;;4774   	for	(ii_=0;ii_<4;ii_++)
003032  4601              MOV      r1,r0
;;;4775   		{
;;;4776   		//¿¡ ‡ÁˇÊÂÌ‡
;;;4777   		if((RELE_SET_MASK[ii_]&0x01)&&
;;;4778   			(load_U<(USIGN*10)))			bdr_avar_stat_temp|=(1<<ii_);
;;;4779   		//”ÒÍÓÂÌÌ˚È Á‡ˇ‰
;;;4780   		if((RELE_SET_MASK[ii_]&0x02)&&
;;;4781   			(sp_ch_stat==scsWRK))			bdr_avar_stat_temp|=(1<<ii_);
;;;4782   		//¬˚‡‚ÌË‚‡˛˘ËÈ Á‡ˇ‰
;;;4783   		if((RELE_SET_MASK[ii_]&0x04)&&
;;;4784   			(spc_stat==spcVZ))			bdr_avar_stat_temp|=(1<<ii_);
;;;4785   		//Œ·˘‡ˇ ‡‚‡Ëˇ «¬”
;;;4786   		if((RELE_SET_MASK[ii_]&0x08)&&
;;;4787   			(avar_stat))					bdr_avar_stat_temp|=(1<<ii_);
;;;4788   		//U‚˚ı Á‡‚˚¯ÂÌÓ
;;;4789   		if((RELE_SET_MASK[ii_]&0x10)&&
;;;4790   			(uout_av==1))					bdr_avar_stat_temp|=(1<<ii_);
003034  f8dfa1b0          LDR      r10,|L1.12776|
;;;4791   		//U‚˚ı Á‡ÌËÊÂÌÓ
;;;4792   		if((RELE_SET_MASK[ii_]&0x20)&&
;;;4793   			(uout_av==2))					bdr_avar_stat_temp|=(1<<ii_);
;;;4794   		if((RELE_SET_MASK[ii_]&0x40)&&
;;;4795   			(
;;;4796   			((bps[0]._av&(1<<4))&&(NUMIST>=1))||
003038  f8df91b0          LDR      r9,|L1.12780|
00303c  4d6c              LDR      r5,|L1.12784|
00303e  f8dfb1b4          LDR      r11,|L1.12788|
003042  f04f0301          MOV      r3,#1                 ;3728
                  |L1.12358|
003046  f93b2011          LDRSH    r2,[r11,r1,LSL #1]    ;4777
00304a  ea5f7cc2          LSLS     r12,r2,#31            ;4777
00304e  d010              BEQ      |L1.12402|
003050  f8dfc1a4          LDR      r12,|L1.12792|
003054  f9b8e000          LDRSH    lr,[r8,#0]            ;4778  ; load_U
003058  f9bcc000          LDRSH    r12,[r12,#0]          ;4778  ; USIGN
00305c  eb0c0c8c          ADD      r12,r12,r12,LSL #2    ;4778
003060  ebbe0f4c          CMP      lr,r12,LSL #1         ;4778
003064  da05              BGE      |L1.12402|
003066  fa03fc01          LSL      r12,r3,r1             ;4778
00306a  ea4c0c00          ORR      r12,r12,r0            ;4778
00306e  f00c00ff          AND      r0,r12,#0xff          ;4778
                  |L1.12402|
003072  ea5f7c82          LSLS     r12,r2,#30            ;4780
003076  d50a              BPL      |L1.12430|
003078  f897c000          LDRB     r12,[r7,#0]           ;4781  ; sp_ch_stat
00307c  f1bc0f02          CMP      r12,#2                ;4781
003080  d105              BNE      |L1.12430|
003082  fa03fc01          LSL      r12,r3,r1             ;4781
003086  ea4c0c00          ORR      r12,r12,r0            ;4781
00308a  f00c00ff          AND      r0,r12,#0xff          ;4781
                  |L1.12430|
00308e  ea5f7c42          LSLS     r12,r2,#29            ;4783
003092  d50a              BPL      |L1.12458|
003094  f896c015          LDRB     r12,[r6,#0x15]        ;4784  ; spc_stat
003098  f1bc0f02          CMP      r12,#2                ;4784
00309c  d105              BNE      |L1.12458|
00309e  fa03fc01          LSL      r12,r3,r1             ;4784
0030a2  ea4c0c00          ORR      r12,r12,r0            ;4784
0030a6  f00c00ff          AND      r0,r12,#0xff          ;4784
                  |L1.12458|
0030aa  ea5f7c02          LSLS     r12,r2,#28            ;4786
0030ae  d50c              BPL      |L1.12490|
0030b0  f8dfc148          LDR      r12,|L1.12796|
0030b4  f8dcc000          LDR      r12,[r12,#0]          ;4787  ; avar_stat
0030b8  f1bc0f00          CMP      r12,#0                ;4787
0030bc  d005              BEQ      |L1.12490|
0030be  fa03fc01          LSL      r12,r3,r1             ;4787
0030c2  ea4c0c00          ORR      r12,r12,r0            ;4787
0030c6  f00c00ff          AND      r0,r12,#0xff          ;4787
                  |L1.12490|
0030ca  ea5f6cc2          LSLS     r12,r2,#27            ;4789
0030ce  d50a              BPL      |L1.12518|
0030d0  f89ac000          LDRB     r12,[r10,#0]          ;4790  ; uout_av
0030d4  f1bc0f01          CMP      r12,#1                ;4790
0030d8  d105              BNE      |L1.12518|
0030da  fa03fc01          LSL      r12,r3,r1             ;4790
0030de  ea4c0c00          ORR      r12,r12,r0            ;4790
0030e2  f00c00ff          AND      r0,r12,#0xff          ;4790
                  |L1.12518|
0030e6  ea5f6c82          LSLS     r12,r2,#26            ;4792
0030ea  d50a              BPL      |L1.12546|
0030ec  f89ac000          LDRB     r12,[r10,#0]          ;4793  ; uout_av
0030f0  f1bc0f02          CMP      r12,#2                ;4793
0030f4  d105              BNE      |L1.12546|
0030f6  fa03fc01          LSL      r12,r3,r1             ;4793
0030fa  ea4c0c00          ORR      r12,r12,r0            ;4793
0030fe  f00c00ff          AND      r0,r12,#0xff          ;4793
                  |L1.12546|
003102  ea5f6c42          LSLS     r12,r2,#25            ;4794
003106  d525              BPL      |L1.12628|
003108  f899c001          LDRB     r12,[r9,#1]  ; bps
00310c  ea5f6ccc          LSLS     r12,r12,#27
003110  d504              BPL      |L1.12572|
003112  f9b5c000          LDRSH    r12,[r5,#0]  ; NUMIST
003116  f1bc0f01          CMP      r12,#1
00311a  da15              BGE      |L1.12616|
                  |L1.12572|
;;;4797   			((bps[1]._av&(1<<4))&&(NUMIST>=2))||
00311c  f899c05d          LDRB     r12,[r9,#0x5d]  ; bps
003120  ea5f6ccc          LSLS     r12,r12,#27
003124  d506              BPL      |L1.12596|
003126  f9b5c000          LDRSH    r12,[r5,#0]  ; NUMIST
00312a  e000              B        |L1.12590|
                  |L1.12588|
00312c  e047              B        |L1.12734|
                  |L1.12590|
00312e  f1bc0f02          CMP      r12,#2
003132  da09              BGE      |L1.12616|
                  |L1.12596|
;;;4798   			((bps[2]._av&(1<<4))&&(NUMIST>=3))
003134  f899c0b9          LDRB     r12,[r9,#0xb9]  ; bps
003138  ea5f6ccc          LSLS     r12,r12,#27
00313c  d50a              BPL      |L1.12628|
00313e  f9b5c000          LDRSH    r12,[r5,#0]  ; NUMIST
003142  f1bc0f03          CMP      r12,#3
003146  db05              BLT      |L1.12628|
                  |L1.12616|
;;;4799   			))bdr_avar_stat_temp|=(1<<ii_);
003148  fa03fc01          LSL      r12,r3,r1
00314c  ea4c0c00          ORR      r12,r12,r0
003150  f00c00ff          AND      r0,r12,#0xff
                  |L1.12628|
;;;4800   		if((RELE_SET_MASK[ii_]&0x80)&&
003154  ea5f6c02          LSLS     r12,r2,#24
003158  d523              BPL      |L1.12706|
;;;4801   			(
;;;4802   			((bps[0]._av&(0x0f))&&(NUMIST>=1))||
00315a  f899c001          LDRB     r12,[r9,#1]  ; bps
00315e  ea5f7c0c          LSLS     r12,r12,#28
003162  d004              BEQ      |L1.12654|
003164  f9b5c000          LDRSH    r12,[r5,#0]  ; NUMIST
003168  f1bc0f01          CMP      r12,#1
00316c  da13              BGE      |L1.12694|
                  |L1.12654|
;;;4803   			((bps[1]._av&(0x0f))&&(NUMIST>=2))||
00316e  f899c05d          LDRB     r12,[r9,#0x5d]  ; bps
003172  ea5f7c0c          LSLS     r12,r12,#28
003176  d004              BEQ      |L1.12674|
003178  f9b5c000          LDRSH    r12,[r5,#0]  ; NUMIST
00317c  f1bc0f02          CMP      r12,#2
003180  da09              BGE      |L1.12694|
                  |L1.12674|
;;;4804   			((bps[2]._av&(0x0f))&&(NUMIST>=3))
003182  f899c0b9          LDRB     r12,[r9,#0xb9]  ; bps
003186  ea5f7c0c          LSLS     r12,r12,#28
00318a  d00a              BEQ      |L1.12706|
00318c  f9b5c000          LDRSH    r12,[r5,#0]  ; NUMIST
003190  f1bc0f03          CMP      r12,#3
003194  db05              BLT      |L1.12706|
                  |L1.12694|
;;;4805   			))bdr_avar_stat_temp|=(1<<ii_);
003196  fa03fc01          LSL      r12,r3,r1
00319a  ea4c0c00          ORR      r12,r12,r0
00319e  f00c00ff          AND      r0,r12,#0xff
                  |L1.12706|
;;;4806   
;;;4807   		if(!(RELE_SET_MASK[ii_]&(1<<15))) bdr_avar_stat_temp^=(1<<ii_); 
0031a2  0412              LSLS     r2,r2,#16
0031a4  d404              BMI      |L1.12720|
0031a6  fa03f201          LSL      r2,r3,r1
0031aa  ea820200          EOR      r2,r2,r0
0031ae  b2d0              UXTB     r0,r2
                  |L1.12720|
0031b0  f1010101          ADD      r1,r1,#1              ;4774
0031b4  b2c9              UXTB     r1,r1                 ;4774
0031b6  2904              CMP      r1,#4                 ;4774
0031b8  f4ffaf45          BCC      |L1.12358|
;;;4808   		}
;;;4809   	bdr_avar_stat=bdr_avar_stat_temp;
0031bc  7020              STRB     r0,[r4,#0]
                  |L1.12734|
;;;4810   	}
;;;4811   }
0031be  e01f              B        |L1.12800|
                  |L1.12736|
                          DCD      load_U
                  |L1.12740|
                          DCD      sp_ch_stat
                  |L1.12744|
                          DCD      ||area_number.25||
                  |L1.12748|
                          DCD      DOP_RELE_FUNC
                  |L1.12752|
                          DCD      speedChIsOn
                  |L1.12756|
                          DCD      hv_vz_stat
                  |L1.12760|
                          DCD      UVENTOFF
                  |L1.12764|
                          DCD      bdr_transmit_stat
                  |L1.12768|
                          DCD      bdr_avar_stat
                  |L1.12772|
                          DCD      NUMBDR
                  |L1.12776|
                          DCD      uout_av
                  |L1.12780|
                          DCD      bps
                  |L1.12784|
                          DCD      NUMIST
                  |L1.12788|
                          DCD      RELE_SET_MASK
                  |L1.12792|
                          DCD      USIGN
                  |L1.12796|
                          DCD      avar_stat
                  |L1.12800|
003200  e8bd9ff0          POP      {r4-r12,pc}
;;;4812   
                          ENDP

                  bps_hndl PROC
;;;4814   //-----------------------------------------------
;;;4815   void bps_hndl(void)
003204  e92d5ff0          PUSH     {r4-r12,lr}
;;;4816   {
;;;4817   char ptr__,i;
;;;4818   unsigned short tempUS;
;;;4819   
;;;4820   if(sh_cnt0<10)
003208  4ef9              LDR      r6,|L1.13808|
;;;4821   	{
;;;4822   	sh_cnt0++;
;;;4823   	if(sh_cnt0>=10)
;;;4824   		{
;;;4825   		sh_cnt0=0;
00320a  2700              MOVS     r7,#0
;;;4826   		b1Hz_sh=1;
00320c  f04f0a01          MOV      r10,#1
003210  7cf0              LDRB     r0,[r6,#0x13]         ;4820  ; sh_cnt0
003212  280a              CMP      r0,#0xa               ;4820
003214  d208              BCS      |L1.12840|
003216  f1000001          ADD      r0,r0,#1              ;4822
00321a  b2c0              UXTB     r0,r0                 ;4822
00321c  74f0              STRB     r0,[r6,#0x13]         ;4822
00321e  280a              CMP      r0,#0xa               ;4823
003220  d302              BCC      |L1.12840|
003222  74f7              STRB     r7,[r6,#0x13]         ;4825
003224  f886a014          STRB     r10,[r6,#0x14]
                  |L1.12840|
;;;4827   		}
;;;4828   	}
;;;4829   
;;;4830   /*if(sh_cnt1<5)
;;;4831   	{
;;;4832   	sh_cnt1++;
;;;4833   	if(sh_cnt1==5)
;;;4834   		{
;;;4835   		sh_cnt1=0;
;;;4836   		b2Hz_sh=1;
;;;4837   		}
;;;4838   	} */
;;;4839   
;;;4840   
;;;4841   /*
;;;4842   if(mess_find(MESS_SRC_ON_OFF))
;;;4843   	{
;;;4844   	if(mess_data[0]==_MESS_SRC_MASK_BLOK_2SEC)
;;;4845   		{
;;;4846   		char i;
;;;4847   		for(i=0;i<NUMIST;i++)
;;;4848   			{
;;;4849   			if(mess_data[1]&(1<<i))src[i]._ist_blok_cnt=20;
;;;4850   			}
;;;4851   		
;;;4852   		}
;;;4853   	else if(mess_data[0]==_MESS_SRC_MASK_UNBLOK)
;;;4854   		{
;;;4855   		char i;
;;;4856   		for(i=0;i<NUMIST;i++)
;;;4857   			{
;;;4858   			if(mess_data[1]&(1<<i))src[i]._ist_blok_cnt=0;
;;;4859   			}
;;;4860   		
;;;4861   		}
;;;4862   	}
;;;4863   	
;;;4864   else if(mess_find(_MESS_SRC_MASK_ON))
;;;4865   	{				
;;;4866   	if(mess_data[0]==_MESS_SRC_MASK_ON)
;;;4867   		{
;;;4868   		char i;
;;;4869   		for(i=0;i<NUMIST;i++)
;;;4870   			{
;;;4871   			if(mess_data[1]&(1<<i))
;;;4872   				{
;;;4873   				src[i]._ist_blok_cnt=0;
;;;4874   				src[i]._flags_tu=2;
;;;4875   				}
;;;4876   			}
;;;4877   		
;;;4878   		}				
;;;4879   	}*/
;;;4880   
;;;4881   
;;;4882   
;;;4883   /*else*/ 
;;;4884   bps_on_mask=0;
003228  f8a67052          STRH     r7,[r6,#0x52]
;;;4885   bps_off_mask=0;
00322c  f8a67054          STRH     r7,[r6,#0x54]
;;;4886   
;;;4887   if(mess_find_unvol(MESS2BPS_HNDL))
003230  20cd              MOVS     r0,#0xcd
003232  f7fffffe          BL       mess_find_unvol
;;;4888   	{
;;;4889   	if(mess_data[0]==PARAM_BPS_ALL_OFF_AFTER_2SEC)
;;;4890   		{
;;;4891   		bps_off_mask=0xffff;
;;;4892   		}
;;;4893   
;;;4894   	if(mess_data[0]==PARAM_BPS_MASK_OFF_AFTER_2SEC)
;;;4895   		{
;;;4896   		bps_off_mask=mess_data[1];
;;;4897   		}
;;;4898   
;;;4899   	if(mess_data[0]==PARAM_BPS_MASK_ON)
;;;4900   		{
;;;4901   		bps_on_mask=mess_data[1];
;;;4902   		}
;;;4903   
;;;4904   	if(mess_data[0]==PARAM_BPS_ALL_ON)
;;;4905   		{
;;;4906   		bps_on_mask=0xffff;
;;;4907   		}
;;;4908   
;;;4909   	if(mess_data[0]==PARAM_BPS_MASK_ON_OFF_AFTER_2SEC)
;;;4910   		{
;;;4911   		bps_on_mask=mess_data[1];
;;;4912   		bps_off_mask=~(mess_data[1]);
;;;4913   		}
;;;4914   
;;;4915   
;;;4916   	for(i=0;i<=NUMIST;i++)
;;;4917   		{
;;;4918   		if(bps_off_mask&(1<<i)) bps[i]._blok_cnt++;
003236  f8df83bc          LDR      r8,|L1.13812|
00323a  f8dfb3bc          LDR      r11,|L1.13816|
00323e  b3a0              CBZ      r0,|L1.12970|
003240  4aee              LDR      r2,|L1.13820|
003242  f64f73ff          MOV      r3,#0xffff            ;4891
003246  6810              LDR      r0,[r2,#0]            ;4889  ; mess_data
003248  28ce              CMP      r0,#0xce              ;4889
00324a  d101              BNE      |L1.12880|
00324c  f8a63054          STRH     r3,[r6,#0x54]         ;4891
                  |L1.12880|
003250  28cf              CMP      r0,#0xcf              ;4894
003252  d102              BNE      |L1.12890|
003254  6851              LDR      r1,[r2,#4]            ;4896  ; mess_data
003256  f8a61054          STRH     r1,[r6,#0x54]         ;4896
                  |L1.12890|
00325a  28d1              CMP      r0,#0xd1              ;4899
00325c  d102              BNE      |L1.12900|
00325e  6851              LDR      r1,[r2,#4]            ;4901  ; mess_data
003260  f8a61052          STRH     r1,[r6,#0x52]         ;4901
                  |L1.12900|
003264  28d2              CMP      r0,#0xd2              ;4904
003266  d101              BNE      |L1.12908|
003268  f8a63052          STRH     r3,[r6,#0x52]         ;4906
                  |L1.12908|
00326c  28d0              CMP      r0,#0xd0              ;4909
00326e  d106              BNE      |L1.12926|
003270  6850              LDR      r0,[r2,#4]            ;4911  ; mess_data
003272  f8a60052          STRH     r0,[r6,#0x52]         ;4911
003276  ea6f0000          MVN      r0,r0                 ;4912
00327a  f8a60054          STRH     r0,[r6,#0x54]         ;4912
                  |L1.12926|
00327e  f04f0400          MOV      r4,#0                 ;4916
003282  e037              B        |L1.13044|
                  |L1.12932|
003284  f8b60054          LDRH     r0,[r6,#0x54]  ; bps_off_mask
003288  fa0af904          LSL      r9,r10,r4
00328c  ea190f00          TST      r9,r0
003290  d00c              BEQ      |L1.12972|
003292  ebc400c4          RSB      r0,r4,r4,LSL #3
003296  eb001004          ADD      r0,r0,r4,LSL #4
00329a  eb080080          ADD      r0,r8,r0,LSL #2
00329e  f8301f40          LDRH     r1,[r0,#0x40]!
0032a2  f1010101          ADD      r1,r1,#1
0032a6  8001              STRH     r1,[r0,#0]
0032a8  e008              B        |L1.12988|
                  |L1.12970|
0032aa  e028              B        |L1.13054|
                  |L1.12972|
;;;4919   		else bps[i]._blok_cnt=0;
0032ac  ebc400c4          RSB      r0,r4,r4,LSL #3
0032b0  eb001004          ADD      r0,r0,r4,LSL #4
0032b4  eb080080          ADD      r0,r8,r0,LSL #2
0032b8  f8a07040          STRH     r7,[r0,#0x40]
                  |L1.12988|
;;;4920   		gran(&bps[i]._blok_cnt,0,50);
0032bc  ebc400c4          RSB      r0,r4,r4,LSL #3
0032c0  eb001004          ADD      r0,r0,r4,LSL #4
0032c4  eb080580          ADD      r5,r8,r0,LSL #2
0032c8  f1050040          ADD      r0,r5,#0x40
0032cc  2232              MOVS     r2,#0x32
0032ce  2100              MOVS     r1,#0
0032d0  f7fffffe          BL       gran
;;;4921   		if(bps[i]._blok_cnt>20) bps[i]._flags_tu=1;
0032d4  f9b50040          LDRSH    r0,[r5,#0x40]
0032d8  2814              CMP      r0,#0x14
0032da  dd01              BLE      |L1.13024|
0032dc  f885a02c          STRB     r10,[r5,#0x2c]
                  |L1.13024|
;;;4922   		if(bps_on_mask&(1<<i)) bps[i]._flags_tu=0;
0032e0  f8b60052          LDRH     r0,[r6,#0x52]  ; bps_on_mask
0032e4  ea190f00          TST      r9,r0
0032e8  d001              BEQ      |L1.13038|
0032ea  f885702c          STRB     r7,[r5,#0x2c]
                  |L1.13038|
0032ee  f1040401          ADD      r4,r4,#1              ;4916
0032f2  b2e4              UXTB     r4,r4                 ;4916
                  |L1.13044|
0032f4  f9bb0000          LDRSH    r0,[r11,#0]           ;4916  ; NUMIST
0032f8  4284              CMP      r4,r0                 ;4916
0032fa  ddc3              BLE      |L1.12932|
0032fc  e08a              B        |L1.13332|
                  |L1.13054|
;;;4923   	     }
;;;4924   
;;;4925   	
;;;4926   /*
;;;4927   
;;;4928   	if(bps_all_off_cnt>20)
;;;4929   		{
;;;4930   		for(i=0;i<=NUMIST;i++)
;;;4931   			{
;;;4932   	     	bps[i]._flags_tu=1;
;;;4933   	     	}
;;;4934   		}
;;;4935   	else if(bps_mask_off_cnt>20)
;;;4936   		{
;;;4937   		for(i=0;i<=NUMIST;i++)
;;;4938   			{
;;;4939   			if(mess_data[1]&(1<<i)) bps[i]._flags_tu=1;
;;;4940   	     	}
;;;4941   		}	
;;;4942   		
;;;4943   	else if(bps_mask_on_off_cnt>20)
;;;4944   		{
;;;4945   		for(i=0;i<=NUMIST;i++)
;;;4946   			{
;;;4947   			if(mess_data[1]&(1<<i)) bps[i]._flags_tu=1;
;;;4948   			else bps[i]._flags_tu=0;
;;;4949   	     	}
;;;4950   		}
;;;4951   		
;;;4952   	if(mess_data[0]==PARAM_BPS_MASK_ON)
;;;4953   		{
;;;4954   		for(i=0;i<=NUMIST;i++)
;;;4955   			{
;;;4956   			if(mess_data[1]&(1<<i)) bps[i]._flags_tu=0;
;;;4957   	     	}
;;;4958   		}
;;;4959   */										
;;;4960   	}
;;;4961   
;;;4962   
;;;4963   else if(b1Hz_sh)
0032fe  7d30              LDRB     r0,[r6,#0x14]  ; b1Hz_sh
003300  b3f0              CBZ      r0,|L1.13184|
;;;4964   	{
;;;4965   	ptr__=0;
003302  f04f0400          MOV      r4,#0
;;;4966        for(i=0;i<=NUMIST;i++)
003306  4621              MOV      r1,r4
003308  f9bb0000          LDRSH    r0,[r11,#0]           ;4916
00330c  e00a              B        |L1.13092|
                  |L1.13070|
;;;4967   		{
;;;4968   	     bps[i]._flags_tu=1;
00330e  ebc102c1          RSB      r2,r1,r1,LSL #3
003312  eb021201          ADD      r2,r2,r1,LSL #4
003316  eb080282          ADD      r2,r8,r2,LSL #2
00331a  f882a02c          STRB     r10,[r2,#0x2c]
00331e  f1010101          ADD      r1,r1,#1              ;4966
003322  b2c9              UXTB     r1,r1                 ;4966
                  |L1.13092|
003324  4281              CMP      r1,r0                 ;4966
003326  ddf2              BLE      |L1.13070|
;;;4969   	     }	
;;;4970     	     
;;;4971     	for(i=0;(i<NUMIST)&&(ptr__<num_necc);i++)
003328  f04f0100          MOV      r1,#0
00332c  e022              B        |L1.13172|
                  |L1.13102|
;;;4972     		{
;;;4973   		char ii,iii;
;;;4974   
;;;4975   		ii=(char)NUMIST;
00332e  b2c2              UXTB     r2,r0
;;;4976   		//if(ii<0)ii=0;
;;;4977   		if(ii>32)ii=32;
003330  2a20              CMP      r2,#0x20
003332  d901              BLS      |L1.13112|
003334  f04f0220          MOV      r2,#0x20
                  |L1.13112|
;;;4978   		iii=numOfForvardBps;
003338  7eb3              LDRB     r3,[r6,#0x1a]  ; numOfForvardBps
;;;4979   		//if(iii<0)iii=0;
;;;4980   		if(iii>=NUMIST)iii=0;
00333a  4283              CMP      r3,r0
00333c  db01              BLT      |L1.13122|
00333e  f04f0300          MOV      r3,#0
                  |L1.13122|
;;;4981   		iii+=i;
003342  440b              ADD      r3,r3,r1
003344  b2db              UXTB     r3,r3
;;;4982   		iii=iii%ii;
003346  fbb3f5f2          UDIV     r5,r3,r2
00334a  fb023215          MLS      r2,r2,r5,r3
;;;4983   		
;;;4984     	     if((bps[iii]._state==bsRDY)||(bps[iii]._state==bsWRK))
00334e  ebc203c2          RSB      r3,r2,r2,LSL #3
003352  eb031202          ADD      r2,r3,r2,LSL #4
003356  eb080282          ADD      r2,r8,r2,LSL #2
00335a  7893              LDRB     r3,[r2,#2]
00335c  2b02              CMP      r3,#2
00335e  d001              BEQ      |L1.13156|
003360  2b01              CMP      r3,#1
003362  d104              BNE      |L1.13166|
                  |L1.13156|
;;;4985     	         	{
;;;4986     	         	bps[iii]._flags_tu=0;
003364  f882702c          STRB     r7,[r2,#0x2c]
;;;4987     	         	ptr__++;
003368  f1040401          ADD      r4,r4,#1
00336c  b2e4              UXTB     r4,r4
                  |L1.13166|
00336e  f1010101          ADD      r1,r1,#1              ;4971
003372  b2c9              UXTB     r1,r1                 ;4971
                  |L1.13172|
003374  4281              CMP      r1,r0                 ;4971
003376  da06              BGE      |L1.13190|
003378  4aa1              LDR      r2,|L1.13824|
00337a  f9b22000          LDRSH    r2,[r2,#0]            ;4971  ; num_necc
00337e  e000              B        |L1.13186|
                  |L1.13184|
003380  e048              B        |L1.13332|
                  |L1.13186|
003382  4294              CMP      r4,r2                 ;4971
003384  dbd3              BLT      |L1.13102|
                  |L1.13190|
;;;4988     	         	}
;;;4989   			
;;;4990     	     }
;;;4991   	bps[numOfForvardBps_old]._flags_tu=0;
003386  7ef1              LDRB     r1,[r6,#0x1b]  ; numOfForvardBps_old
003388  ebc102c1          RSB      r2,r1,r1,LSL #3
00338c  eb021101          ADD      r1,r2,r1,LSL #4
003390  eb080181          ADD      r1,r8,r1,LSL #2
003394  f881702c          STRB     r7,[r1,#0x2c]
;;;4992   
;;;4993   	if(main_1Hz_cnt<60)
003398  499a              LDR      r1,|L1.13828|
00339a  f9b11000          LDRSH    r1,[r1,#0]  ; main_1Hz_cnt
00339e  293c              CMP      r1,#0x3c
0033a0  da0f              BGE      |L1.13250|
;;;4994   		{
;;;4995        	for(i=0;i<=NUMIST;i++)
0033a2  f04f0100          MOV      r1,#0
0033a6  e00a              B        |L1.13246|
                  |L1.13224|
;;;4996   			{
;;;4997   	     	bps[i]._flags_tu=0;
0033a8  ebc102c1          RSB      r2,r1,r1,LSL #3
0033ac  eb021201          ADD      r2,r2,r1,LSL #4
0033b0  eb080282          ADD      r2,r8,r2,LSL #2
0033b4  f882702c          STRB     r7,[r2,#0x2c]
0033b8  f1010101          ADD      r1,r1,#1              ;4995
0033bc  b2c9              UXTB     r1,r1                 ;4995
                  |L1.13246|
0033be  4281              CMP      r1,r0                 ;4995
0033c0  ddf2              BLE      |L1.13224|
                  |L1.13250|
;;;4998   	     	}	
;;;4999   		}
;;;5000   	if(ipsBlckStat)
0033c2  4991              LDR      r1,|L1.13832|
0033c4  8809              LDRH     r1,[r1,#0]  ; ipsBlckStat
0033c6  b179              CBZ      r1,|L1.13288|
;;;5001   		{
;;;5002        	for(i=0;i<=NUMIST;i++)
0033c8  f04f0100          MOV      r1,#0
0033cc  e00a              B        |L1.13284|
                  |L1.13262|
;;;5003   			{
;;;5004   	     	bps[i]._flags_tu=1;
0033ce  ebc102c1          RSB      r2,r1,r1,LSL #3
0033d2  eb021201          ADD      r2,r2,r1,LSL #4
0033d6  eb080282          ADD      r2,r8,r2,LSL #2
0033da  f882a02c          STRB     r10,[r2,#0x2c]
0033de  f1010101          ADD      r1,r1,#1              ;5002
0033e2  b2c9              UXTB     r1,r1                 ;5002
                  |L1.13284|
0033e4  4281              CMP      r1,r0                 ;5002
0033e6  ddf2              BLE      |L1.13262|
                  |L1.13288|
;;;5005   	     	}
;;;5006   		}
;;;5007   
;;;5008        for(i=0;i<=NUMIST;i++)
0033e8  f04f0100          MOV      r1,#0
;;;5009   		{
;;;5010   	    if(bps[i]._flags_tu==1) 	bps[i]._x_=-50;
0033ec  f06f0331          MVN      r3,#0x31
0033f0  e00e              B        |L1.13328|
                  |L1.13298|
0033f2  ebc102c1          RSB      r2,r1,r1,LSL #3
0033f6  eb021201          ADD      r2,r2,r1,LSL #4
0033fa  eb080282          ADD      r2,r8,r2,LSL #2
0033fe  f892402c          LDRB     r4,[r2,#0x2c]
003402  2c01              CMP      r4,#1
003404  d101              BNE      |L1.13322|
003406  f8a23050          STRH     r3,[r2,#0x50]
                  |L1.13322|
00340a  f1010101          ADD      r1,r1,#1              ;5008
00340e  b2c9              UXTB     r1,r1                 ;5008
                  |L1.13328|
003410  4281              CMP      r1,r0                 ;5008
003412  ddee              BLE      |L1.13298|
                  |L1.13332|
;;;5011   	   	}	
;;;5012   		 
;;;5013     	}
;;;5014   
;;;5015   
;;;5016   for(i=0;i<NUMIST;i++)
003414  f04f0000          MOV      r0,#0
;;;5017        {
;;;5018        if(bps[i]._ist_blok_host_cnt!=0)
;;;5019             {
;;;5020             bps[i]._flags_tu=99;
003418  f04f0463          MOV      r4,#0x63
00341c  f9bb1000          LDRSH    r1,[r11,#0]           ;4916
003420  e00f              B        |L1.13378|
                  |L1.13346|
003422  ebc002c0          RSB      r2,r0,r0,LSL #3       ;5018
003426  eb021200          ADD      r2,r2,r0,LSL #4       ;5018
00342a  eb080282          ADD      r2,r8,r2,LSL #2       ;5018
00342e  6bd3              LDR      r3,[r2,#0x3c]         ;5018
003430  b123              CBZ      r3,|L1.13372|
003432  f882402c          STRB     r4,[r2,#0x2c]
;;;5021   	     bps[i]._ist_blok_host_cnt--;
003436  f1a30301          SUB      r3,r3,#1
00343a  63d3              STR      r3,[r2,#0x3c]
                  |L1.13372|
00343c  f1000001          ADD      r0,r0,#1              ;5016
003440  b2c0              UXTB     r0,r0                 ;5016
                  |L1.13378|
003442  4288              CMP      r0,r1                 ;5016
003444  dbed              BLT      |L1.13346|
;;;5022             }
;;;5023        }
;;;5024   
;;;5025   
;;;5026   
;;;5027   
;;;5028   b1Hz_sh=0;
003446  7537              STRB     r7,[r6,#0x14]
;;;5029   
;;;5030   
;;;5031   num_of_wrks_bps=0;
003448  7437              STRB     r7,[r6,#0x10]
;;;5032   tempUS=0;
00344a  f04f0200          MOV      r2,#0
;;;5033   for(i=0;i<NUMIST;i++)
00344e  4610              MOV      r0,r2
003450  e013              B        |L1.13434|
                  |L1.13394|
;;;5034   	{
;;;5035   	if(bps[i]._state==bsWRK)
003452  ebc003c0          RSB      r3,r0,r0,LSL #3
003456  eb031300          ADD      r3,r3,r0,LSL #4
00345a  eb080383          ADD      r3,r8,r3,LSL #2
00345e  789c              LDRB     r4,[r3,#2]
003460  2c01              CMP      r4,#1
003462  d107              BNE      |L1.13428|
;;;5036   		{
;;;5037   		num_of_wrks_bps++;
003464  7c34              LDRB     r4,[r6,#0x10]  ; num_of_wrks_bps
003466  f1040401          ADD      r4,r4,#1
00346a  7434              STRB     r4,[r6,#0x10]
;;;5038   		if(bps[i]._Uii>tempUS)tempUS=bps[i]._Uii;
00346c  69db              LDR      r3,[r3,#0x1c]
00346e  4293              CMP      r3,r2
003470  dd00              BLE      |L1.13428|
003472  b29a              UXTH     r2,r3
                  |L1.13428|
003474  f1000001          ADD      r0,r0,#1              ;5033
003478  b2c0              UXTB     r0,r0                 ;5033
                  |L1.13434|
00347a  4288              CMP      r0,r1                 ;5033
00347c  dbe9              BLT      |L1.13394|
;;;5039   		}
;;;5040   	}
;;;5041   Ubpsmax=tempUS;
00347e  f8a62042          STRH     r2,[r6,#0x42]
;;;5042   
;;;5043   bPARALLEL_ENOUG=0;
003482  77b7              STRB     r7,[r6,#0x1e]
;;;5044   bPARALLEL_NOT_ENOUG=1;
003484  f886a01d          STRB     r10,[r6,#0x1d]
;;;5045   
;;;5046   for(i=0;i<NUMIST;i++)
003488  f04f0000          MOV      r0,#0
;;;5047   	{
;;;5048   	if(bps[i]._Ti>=TSIGN)
00348c  4a5f              LDR      r2,|L1.13836|
00348e  f9b23000          LDRSH    r3,[r2,#0]
;;;5049   		{
;;;5050   		bPARALLEL_ENOUG=1;
;;;5051   		}
;;;5052   	if(bps[i]._Ti>=(TSIGN-5))
003492  f1a30405          SUB      r4,r3,#5
003496  e010              B        |L1.13498|
                  |L1.13464|
003498  ebc002c0          RSB      r2,r0,r0,LSL #3       ;5048
00349c  eb021200          ADD      r2,r2,r0,LSL #4       ;5048
0034a0  eb080282          ADD      r2,r8,r2,LSL #2       ;5048
0034a4  6a92              LDR      r2,[r2,#0x28]         ;5048
0034a6  429a              CMP      r2,r3                 ;5048
0034a8  db01              BLT      |L1.13486|
0034aa  f886a01e          STRB     r10,[r6,#0x1e]        ;5050
                  |L1.13486|
0034ae  42a2              CMP      r2,r4
0034b0  db00              BLT      |L1.13492|
;;;5053   		{
;;;5054   		bPARALLEL_NOT_ENOUG=0;
0034b2  7777              STRB     r7,[r6,#0x1d]
                  |L1.13492|
0034b4  f1000001          ADD      r0,r0,#1              ;5046
0034b8  b2c0              UXTB     r0,r0                 ;5046
                  |L1.13498|
0034ba  4288              CMP      r0,r1                 ;5046
0034bc  dbec              BLT      |L1.13464|
;;;5055   		}
;;;5056   	}
;;;5057   
;;;5058   if(bPARALLEL_ENOUG==1)
0034be  7fb0              LDRB     r0,[r6,#0x1e]  ; bPARALLEL_ENOUG
0034c0  2801              CMP      r0,#1
0034c2  d007              BEQ      |L1.13524|
;;;5059   	{
;;;5060   	bPARALLEL=1;
;;;5061   	}
;;;5062   else if(bPARALLEL && bPARALLEL_NOT_ENOUG)
0034c4  7ff0              LDRB     r0,[r6,#0x1f]  ; bPARALLEL
0034c6  2800              CMP      r0,#0
0034c8  d003              BEQ      |L1.13522|
0034ca  7f70              LDRB     r0,[r6,#0x1d]  ; bPARALLEL_NOT_ENOUG
0034cc  2800              CMP      r0,#0
0034ce  d000              BEQ      |L1.13522|
;;;5063   	{
;;;5064   	bPARALLEL=0;
0034d0  77f7              STRB     r7,[r6,#0x1f]
                  |L1.13522|
;;;5065   	}
;;;5066   }
0034d2  e674              B        |L1.12734|
                  |L1.13524|
0034d4  f886a01f          STRB     r10,[r6,#0x1f]        ;5060
0034d8  e671              B        |L1.12734|
;;;5067   
                          ENDP

                  powerAntiAliasingHndl PROC
;;;5074   //-----------------------------------------------
;;;5075   void powerAntiAliasingHndl(void)
0034da  b570              PUSH     {r4-r6,lr}
;;;5076   {
;;;5077   if((power_summary_tempo/10UL)==(power_summary_tempo_old/10UL))
0034dc  230a              MOVS     r3,#0xa
0034de  4c4d              LDR      r4,|L1.13844|
0034e0  484b              LDR      r0,|L1.13840|
;;;5078   	{
;;;5079   	if(powerSummaryCnt<15)powerSummaryCnt++;
;;;5080   	if(powerSummaryCnt>=10)
;;;5081   		{
;;;5082   		power_summary=power_summary_tempo;
;;;5083   		}
;;;5084   	}
;;;5085   else powerSummaryCnt=0;
0034e2  2500              MOVS     r5,#0
0034e4  6822              LDR      r2,[r4,#0]            ;5077  ; power_summary_tempo_old
0034e6  6800              LDR      r0,[r0,#0]            ;5077  ; power_summary_tempo
0034e8  fbb2f6f3          UDIV     r6,r2,r3              ;5077
0034ec  fbb0f1f3          UDIV     r1,r0,r3              ;5077
0034f0  4a49              LDR      r2,|L1.13848|
0034f2  42b1              CMP      r1,r6                 ;5077
0034f4  d10b              BNE      |L1.13582|
0034f6  7811              LDRB     r1,[r2,#0]            ;5079  ; powerSummaryCnt
0034f8  290f              CMP      r1,#0xf               ;5079
0034fa  d202              BCS      |L1.13570|
0034fc  f1010101          ADD      r1,r1,#1              ;5079
003500  7011              STRB     r1,[r2,#0]            ;5079
                  |L1.13570|
003502  7811              LDRB     r1,[r2,#0]            ;5080  ; powerSummaryCnt
003504  290a              CMP      r1,#0xa               ;5080
003506  d303              BCC      |L1.13584|
003508  4944              LDR      r1,|L1.13852|
00350a  6008              STR      r0,[r1,#0]            ;5082  ; power_summary
00350c  e000              B        |L1.13584|
                  |L1.13582|
00350e  7015              STRB     r5,[r2,#0]
                  |L1.13584|
;;;5086   power_summary_tempo_old=power_summary_tempo;
003510  6020              STR      r0,[r4,#0]  ; power_summary_tempo_old
;;;5087   
;;;5088   if((power_current_tempo/10UL)==(power_current_tempo_old/10UL))
003512  4843              LDR      r0,|L1.13856|
003514  4c43              LDR      r4,|L1.13860|
003516  f9b00000          LDRSH    r0,[r0,#0]  ; power_current_tempo
00351a  f9b42000          LDRSH    r2,[r4,#0]  ; power_current_tempo_old
00351e  fbb0f1f3          UDIV     r1,r0,r3
003522  fbb2f3f3          UDIV     r3,r2,r3
;;;5089   	{
;;;5090   	if(powerCurrentCnt<15)powerCurrentCnt++;
003526  4a40              LDR      r2,|L1.13864|
003528  4299              CMP      r1,r3                 ;5088
00352a  d10b              BNE      |L1.13636|
00352c  7811              LDRB     r1,[r2,#0]  ; powerCurrentCnt
00352e  290f              CMP      r1,#0xf
003530  d202              BCS      |L1.13624|
003532  f1010101          ADD      r1,r1,#1
003536  7011              STRB     r1,[r2,#0]
                  |L1.13624|
;;;5091   	if(powerCurrentCnt>=10)
003538  7811              LDRB     r1,[r2,#0]  ; powerCurrentCnt
00353a  290a              CMP      r1,#0xa
00353c  d303              BCC      |L1.13638|
;;;5092   		{
;;;5093   		power_current=power_current_tempo;
00353e  493b              LDR      r1,|L1.13868|
003540  8008              STRH     r0,[r1,#0]
003542  e000              B        |L1.13638|
                  |L1.13636|
;;;5094   		}
;;;5095   	}
;;;5096   else powerCurrentCnt=0;
003544  7015              STRB     r5,[r2,#0]
                  |L1.13638|
;;;5097   power_current_tempo_old=power_current_tempo;
003546  8020              STRH     r0,[r4,#0]
;;;5098   }
003548  bd70              POP      {r4-r6,pc}
;;;5099   
                          ENDP

                  energometr_hndl PROC
;;;5209   //-----------------------------------------------
;;;5210   void energometr_hndl(void)
00354a  4770              BX       lr
;;;5211   {
;;;5212   //2F 3F 21 0D 0A 
;;;5213   //05 33 0A 2F 45 4B 54 35 43 45 31 30 32 4D 76 30 31 0D 0A 
;;;5214   //2F 3F 21 0D 0A 
;;;5215   //05 33 0A 2F 45 4B 54 35 43 45 31 30 32 4D 76 30 31 0D 0A 
;;;5216   //06 30 35 31 0D 0A 
;;;5217   //06 33 0A 01 50 30 02 28 31 31 38 36 35 32 39 32 32 29 03 2A 
;;;5218   
;;;5219   #ifdef CE102M_ENABLED
;;;5220   /*if
;;;5221   uart_out1 (5,0xaf,0x3f,0x21,0x8d,0x0a,0);*/
;;;5222   
;;;5223   if(read_power_cnt_main_cnt)
;;;5224   	{
;;;5225   	read_power_cnt_main_cnt--;
;;;5226   	if(read_power_cnt_main_cnt==0)
;;;5227   		{
;;;5228   		rx_read_power_cnt_phase=0;
;;;5229   		if(bENERGOMETR_UIP==0)bENERGOMETR_UIP=1;
;;;5230   		else if(bENERGOMETR_UIP==1)bENERGOMETR_UIP=2;
;;;5231   		else bENERGOMETR_UIP=0;
;;;5232   		//bENERGOMETR_UIP=2;
;;;5233   		}
;;;5234   	}
;;;5235   
;;;5236   if (rx_read_power_cnt_phase==0)
;;;5237   	{
;;;5238   	char command_with_crc[20];
;;;5239   	
;;;5240      	command_with_crc[0]=0xaf;  // /
;;;5241   	command_with_crc[1]=0x3f;  // ?
;;;5242   	command_with_crc[2]=0x21;  // !
;;;5243   	command_with_crc[3]=0x8d;  // CR
;;;5244   	command_with_crc[4]=0x0a;  // LF
;;;5245   
;;;5246   	uart_out__adr1(command_with_crc,5);
;;;5247   
;;;5248   	rx_wr_index1=0;
;;;5249   	rx_read_power_cnt_phase=1;
;;;5250   
;;;5251   	read_power_cnt_main_cnt=50;
;;;5252   	}
;;;5253   if ((rx_read_power_cnt_phase==2)&&(!ce102m_delayCnt))
;;;5254   	{
;;;5255   	char command_with_crc[20];
;;;5256   	
;;;5257   	command_with_crc[0]=0x06;  //  
;;;5258   	command_with_crc[1]=0x30;  // 0
;;;5259   	command_with_crc[2]=0x35;  // 5
;;;5260   	command_with_crc[3]=0xb1;  // 1
;;;5261   	command_with_crc[4]=0x8d;  // CR
;;;5262   	command_with_crc[5]=0x0a;  // LF
;;;5263   	
;;;5264   	uart_out__adr1(command_with_crc,6);
;;;5265   	
;;;5266   	rx_wr_index1=0;
;;;5267   	rx_read_power_cnt_phase=3;
;;;5268   
;;;5269   	read_power_cnt_main_cnt=50;
;;;5270   	}  
;;;5271   
;;;5272   if ((rx_read_power_cnt_phase==4)&&(!ce102m_delayCnt))
;;;5273   	{
;;;5274   	char command_with_crc[20];
;;;5275   	
;;;5276   	command_with_crc[0]=0x81;  //  
;;;5277   	command_with_crc[1]=0xd2;  // 0
;;;5278   	command_with_crc[2]=0xb1;  // 5
;;;5279   	command_with_crc[3]=0x82;  // 1
;;;5280   	command_with_crc[4]=0x56;  // CR
;;;5281   	command_with_crc[5]=0xcf;  // LF
;;;5282   	command_with_crc[6]=0xcc;  // 1
;;;5283   	command_with_crc[7]=0xd4;  // CR
;;;5284   	command_with_crc[8]=0x41;  // LF
;;;5285   	command_with_crc[9]=0x28;  // 1
;;;5286   	command_with_crc[10]=0xa9;  // CR
;;;5287   	command_with_crc[11]=0x03;  // LF
;;;5288   	command_with_crc[12]=0x5f;  // LF
;;;5289   		
;;;5290   	uart_out__adr1(command_with_crc,13);
;;;5291   	
;;;5292   	rx_wr_index1=0;
;;;5293   	rx_read_power_cnt_phase=5;
;;;5294   
;;;5295   	read_power_cnt_main_cnt=50;
;;;5296   	}  
;;;5297   
;;;5298   if ((rx_read_power_cnt_phase==8)&&(!ce102m_delayCnt))
;;;5299   	{
;;;5300   	char command_with_crc[20];
;;;5301   	
;;;5302   	command_with_crc[0]=0x81;  //  
;;;5303   	command_with_crc[1]=0xd2;  // 0
;;;5304   	command_with_crc[2]=0xb1;  // 5
;;;5305   	command_with_crc[3]=0x82;  // 1
;;;5306   	command_with_crc[4]=0xc3;  // CR
;;;5307   	command_with_crc[5]=0x55;  // LF
;;;5308   	command_with_crc[6]=0xd2;  // 1
;;;5309   	command_with_crc[7]=0xd2;  // CR
;;;5310   	command_with_crc[8]=0xc5;  // LF
;;;5311   	command_with_crc[9]=0x28;  // 1
;;;5312   	command_with_crc[10]=0xa9;  // CR
;;;5313   	command_with_crc[11]=0x03;  // LF
;;;5314   	command_with_crc[12]=0x5a;  // LF
;;;5315   		
;;;5316   	uart_out__adr1(command_with_crc,13);
;;;5317   	
;;;5318   	rx_wr_index1=0;
;;;5319   	rx_read_power_cnt_phase=9;
;;;5320   
;;;5321   	read_power_cnt_main_cnt=50;
;;;5322   	}  
;;;5323   
;;;5324   if ((rx_read_power_cnt_phase==20)&&(!ce102m_delayCnt))
;;;5325   	{
;;;5326   	char command_with_crc[20];
;;;5327   	
;;;5328   	command_with_crc[0]=0x81;  //  		01
;;;5329   	command_with_crc[1]=0xd2;  // R		52
;;;5330   	command_with_crc[2]=0xb1;  // 1		31
;;;5331   	command_with_crc[3]=0x82;  // 		02
;;;5332   	command_with_crc[4]=0x50;  // P		50
;;;5333   	command_with_crc[5]=0xcf;  // O	  	4f
;;;5334   	command_with_crc[6]=0xd7;  // W		57
;;;5335   	command_with_crc[7]=0xc5;  // E		45
;;;5336   	command_with_crc[8]=0x50;  // P		50
;;;5337   	command_with_crc[9]=0x28;  // (		28
;;;5338   	command_with_crc[10]=0xa9;  // )	29
;;;5339   	command_with_crc[11]=0x03;  // 		03
;;;5340   	command_with_crc[12]=0xe4;  // d	64
;;;5341   		
;;;5342   	uart_out__adr1(command_with_crc,13);
;;;5343   	
;;;5344   	rx_wr_index1=0;
;;;5345   	rx_read_power_cnt_phase=21;
;;;5346   
;;;5347   	read_power_cnt_main_cnt=50;
;;;5348   	}  
;;;5349   
;;;5350   
;;;5351   #endif
;;;5352   }
;;;5353   
                          ENDP

                  ips_current_average_hndl PROC
;;;5354   //-----------------------------------------------
;;;5355   void ips_current_average_hndl(void)
00354c  e92d4ff0          PUSH     {r4-r11,lr}
;;;5356   {
003550  b089              SUB      sp,sp,#0x24
;;;5357   
;;;5358   if(++ica_timer_cnt>=10) 
003552  4e37              LDR      r6,|L1.13872|
;;;5359   	{
;;;5360   	ica_timer_cnt=0;
003554  2400              MOVS     r4,#0
003556  7830              LDRB     r0,[r6,#0]            ;5358  ; ica_timer_cnt
003558  1c40              ADDS     r0,r0,#1              ;5358
00355a  b2c0              UXTB     r0,r0                 ;5358
00355c  7030              STRB     r0,[r6,#0]            ;5358
00355e  280a              CMP      r0,#0xa               ;5358
003560  d300              BCC      |L1.13668|
003562  7034              STRB     r4,[r6,#0]
                  |L1.13668|
;;;5361   	}
;;;5362   
;;;5363   if((ica_timer_cnt==0) && (num_of_wrks_bps)&&((spc_stat==spcOFF)&&(vz1_stat==vz1sOFF)&&(vz2_stat==vz2sOFF)&&(sp_ch_stat==scsOFF)))
003564  7830              LDRB     r0,[r6,#0]  ; ica_timer_cnt
003566  4f33              LDR      r7,|L1.13876|
;;;5364   	{
;;;5365   	
;;;5366   	ica_plazma[0]++;
;;;5367   
;;;5368   	ica_my_current=bps_I;
;;;5369   
;;;5370   	if((ica_my_current>ica_your_current)&&((ica_my_current-ica_your_current)>=5)&&((ICA_EN==1)||((ICA_EN==2)&&(ica_cntrl_hndl_cnt>5))))
003568  f8dfb0cc          LDR      r11,|L1.13880|
00356c  4d20              LDR      r5,|L1.13808|
00356e  bbf0              CBNZ     r0,|L1.13806|
003570  7c28              LDRB     r0,[r5,#0x10]         ;5363  ; num_of_wrks_bps
003572  b3e0              CBZ      r0,|L1.13806|
003574  7d68              LDRB     r0,[r5,#0x15]         ;5363  ; spc_stat
003576  f8951021          LDRB     r1,[r5,#0x21]         ;5363  ; vz1_stat
00357a  4308              ORRS     r0,r0,r1              ;5363
00357c  f8951024          LDRB     r1,[r5,#0x24]         ;5363  ; vz2_stat
003580  4308              ORRS     r0,r0,r1              ;5363
003582  7839              LDRB     r1,[r7,#0]            ;5363  ; sp_ch_stat
003584  4308              ORRS     r0,r0,r1              ;5363
003586  d17e              BNE      |L1.13958|
003588  f8df90b0          LDR      r9,|L1.13884|
00358c  f8990000          LDRB     r0,[r9,#0]            ;5366  ; ica_plazma
003590  f1000001          ADD      r0,r0,#1              ;5366
003594  f8890000          STRB     r0,[r9,#0]            ;5366
003598  4829              LDR      r0,|L1.13888|
00359a  f9b01000          LDRSH    r1,[r0,#0]            ;5368  ; bps_I
00359e  4829              LDR      r0,|L1.13892|
0035a0  8001              STRH     r1,[r0,#0]            ;5368
0035a2  4829              LDR      r0,|L1.13896|
;;;5371   		{
;;;5372   		ica_plazma[1]++;
;;;5373   		ica_u_necc--;
0035a4  f8dfa0a4          LDR      r10,|L1.13900|
0035a8  f9b02000          LDRSH    r2,[r0,#0]            ;5370  ; ica_your_current
0035ac  4648              MOV      r0,r9                 ;5366
0035ae  f9bac000          LDRSH    r12,[r10,#0]
0035b2  7843              LDRB     r3,[r0,#1]            ;5372
0035b4  4826              LDR      r0,|L1.13904|
0035b6  4291              CMP      r1,r2                 ;5370
0035b8  f9b08000          LDRSH    r8,[r0,#0]            ;5370
0035bc  4658              MOV      r0,r11                ;5370
0035be  f9b00000          LDRSH    r0,[r0,#0]            ;5370
0035c2  dd47              BLE      |L1.13908|
0035c4  eba10e02          SUB      lr,r1,r2              ;5370
0035c8  f1be0f05          CMP      lr,#5                 ;5370
0035cc  db42              BLT      |L1.13908|
0035ce  2801              CMP      r0,#1                 ;5370
0035d0  d004              BEQ      |L1.13788|
0035d2  2802              CMP      r0,#2                 ;5370
0035d4  d13e              BNE      |L1.13908|
0035d6  f1b80f05          CMP      r8,#5                 ;5370
0035da  dd3b              BLE      |L1.13908|
                  |L1.13788|
0035dc  f1030301          ADD      r3,r3,#1              ;5372
0035e0  f8893001          STRB     r3,[r9,#1]            ;5372
0035e4  f1ac0c01          SUB      r12,r12,#1
0035e8  f8aac000          STRH     r12,[r10,#0]
0035ec  e046              B        |L1.13948|
                  |L1.13806|
0035ee  e04a              B        |L1.13958|
                  |L1.13808|
                          DCD      ||area_number.25||
                  |L1.13812|
                          DCD      bps
                  |L1.13816|
                          DCD      NUMIST
                  |L1.13820|
                          DCD      mess_data
                  |L1.13824|
                          DCD      num_necc
                  |L1.13828|
                          DCD      main_1Hz_cnt
                  |L1.13832|
                          DCD      ipsBlckStat
                  |L1.13836|
                          DCD      TSIGN
                  |L1.13840|
                          DCD      power_summary_tempo
                  |L1.13844|
                          DCD      power_summary_tempo_old
                  |L1.13848|
                          DCD      powerSummaryCnt
                  |L1.13852|
                          DCD      power_summary
                  |L1.13856|
                          DCD      power_current_tempo
                  |L1.13860|
                          DCD      power_current_tempo_old
                  |L1.13864|
                          DCD      powerCurrentCnt
                  |L1.13868|
                          DCD      power_current
                  |L1.13872|
                          DCD      ica_timer_cnt
                  |L1.13876|
                          DCD      sp_ch_stat
                  |L1.13880|
                          DCD      ICA_EN
                  |L1.13884|
                          DCD      ica_plazma
                  |L1.13888|
                          DCD      bps_I
                  |L1.13892|
                          DCD      ica_my_current
                  |L1.13896|
                          DCD      ica_your_current
                  |L1.13900|
                          DCD      ica_u_necc
                  |L1.13904|
                          DCD      ica_cntrl_hndl_cnt
                  |L1.13908|
;;;5374   		}
;;;5375   	else if((ica_my_current<ica_your_current)&&((ica_your_current-ica_my_current)>=5)&&((ICA_EN==1)||((ICA_EN==2)&&(ica_cntrl_hndl_cnt>5))))
003654  4291              CMP      r1,r2
003656  da11              BGE      |L1.13948|
003658  1a51              SUBS     r1,r2,r1
00365a  2905              CMP      r1,#5
00365c  db0e              BLT      |L1.13948|
00365e  2801              CMP      r0,#1
003660  d004              BEQ      |L1.13932|
003662  2802              CMP      r0,#2
003664  d10a              BNE      |L1.13948|
003666  f1b80f05          CMP      r8,#5
00366a  dd07              BLE      |L1.13948|
                  |L1.13932|
;;;5376   		{
;;;5377   		ica_plazma[1]--;
00366c  f1a30301          SUB      r3,r3,#1
003670  f8893001          STRB     r3,[r9,#1]
;;;5378   		ica_u_necc++;
003674  f10c0c01          ADD      r12,r12,#1
003678  f8aac000          STRH     r12,[r10,#0]
                  |L1.13948|
;;;5379   		}
;;;5380   	gran(&ica_u_necc,-100,100);
00367c  2264              MOVS     r2,#0x64
00367e  4251              RSBS     r1,r2,#0
003680  48ff              LDR      r0,|L1.14976|
003682  f7fffffe          BL       gran
                  |L1.13958|
;;;5381   	}
;;;5382   
;;;5383   
;;;5384   if((ICA_EN==1)&&((spc_stat==spcOFF)&&(vz1_stat==vz1sOFF)&&(vz2_stat==vz2sOFF)&&(sp_ch_stat==scsOFF)) /*&& (num_of_wrks_bps)*/)
003686  f8bb0000          LDRH     r0,[r11,#0]  ; ICA_EN
00368a  2801              CMP      r0,#1
00368c  d167              BNE      |L1.14174|
00368e  7d68              LDRB     r0,[r5,#0x15]  ; spc_stat
003690  f8951021          LDRB     r1,[r5,#0x21]  ; vz1_stat
003694  4308              ORRS     r0,r0,r1
003696  f8951024          LDRB     r1,[r5,#0x24]  ; vz2_stat
00369a  4308              ORRS     r0,r0,r1
00369c  7839              LDRB     r1,[r7,#0]  ; sp_ch_stat
00369e  4308              ORRS     r0,r0,r1
0036a0  d15d              BNE      |L1.14174|
;;;5385   	{
;;;5386   	
;;;5387   	if(ica_timer_cnt==8)
0036a2  7830              LDRB     r0,[r6,#0]  ; ica_timer_cnt
;;;5388   		{
;;;5389   		char modbus_buff[20],i;
;;;5390   		short crc_temp;
;;;5391   	
;;;5392   		modbus_buff[0] = ICA_MODBUS_ADDRESS;
0036a4  4bf7              LDR      r3,|L1.14980|
;;;5393   		modbus_buff[1] = 4;
;;;5394   		modbus_buff[2] = 0;
;;;5395   		modbus_buff[3] = 2;
;;;5396   		modbus_buff[4] = 0;	
;;;5397   		modbus_buff[5] = 1;
;;;5398   	
;;;5399   		crc_temp= CRC16_2(modbus_buff,6);
;;;5400   	
;;;5401   		modbus_buff[6]= (char)crc_temp;
;;;5402   		modbus_buff[7]= (char)(crc_temp>>8);
;;;5403   	
;;;5404   		if(ICA_CH==0)
0036a6  4ff8              LDR      r7,|L1.14984|
0036a8  2808              CMP      r0,#8                 ;5387
0036aa  d05b              BEQ      |L1.14180|
;;;5405   			{
;;;5406   			for (i=0;i<8;i++)
;;;5407   				{
;;;5408   				putchar_sc16is700(modbus_buff[i]);
;;;5409   				}
;;;5410   			}
;;;5411   		else if(ICA_CH==2)
;;;5412   			{
;;;5413   			uart_out1 (5,4,0,2,0,1,0);
;;;5414   			}
;;;5415   		}
;;;5416   	else
;;;5417   		{
;;;5418   		char modbus_buff[20],i;
;;;5419   		short crc_temp, tempSSSS;
;;;5420   
;;;5421   		tempSSSS=cntrl_stat_old;
0036ac  f9b56028          LDRSH    r6,[r5,#0x28]  ; cntrl_stat_old
;;;5422   		if(	(main_kb_cnt==(TBAT*60)-21) || (main_kb_cnt==(TBAT*60)-20) || (main_kb_cnt==(TBAT*60)-19)) tempSSSS=((short)TBAT)|0x4000;
0036b0  48f6              LDR      r0,|L1.14988|
0036b2  f06f0214          MVN      r2,#0x14
0036b6  f9b00000          LDRSH    r0,[r0,#0]  ; TBAT
0036ba  ebc01100          RSB      r1,r0,r0,LSL #4
0036be  eb020c81          ADD      r12,r2,r1,LSL #2
0036c2  f9b52046          LDRSH    r2,[r5,#0x46]  ; main_kb_cnt
0036c6  4594              CMP      r12,r2
0036c8  d00b              BEQ      |L1.14050|
0036ca  f06f0c13          MVN      r12,#0x13
0036ce  eb0c0c81          ADD      r12,r12,r1,LSL #2
0036d2  4594              CMP      r12,r2
0036d4  d005              BEQ      |L1.14050|
0036d6  f06f0c12          MVN      r12,#0x12
0036da  eb0c0181          ADD      r1,r12,r1,LSL #2
0036de  4291              CMP      r1,r2
0036e0  d101              BNE      |L1.14054|
                  |L1.14050|
0036e2  f4404680          ORR      r6,r0,#0x4000
                  |L1.14054|
;;;5423   
;;;5424   
;;;5425   		modbus_buff[0] = ICA_MODBUS_ADDRESS;
0036e6  8818              LDRH     r0,[r3,#0]  ; ICA_MODBUS_ADDRESS
0036e8  f88d0010          STRB     r0,[sp,#0x10]
;;;5426   		modbus_buff[1] = 6;
0036ec  f04f0006          MOV      r0,#6
0036f0  f88d0011          STRB     r0,[sp,#0x11]
;;;5427   		modbus_buff[2] = 0;
0036f4  f88d4012          STRB     r4,[sp,#0x12]
;;;5428   		modbus_buff[3] = 100;
0036f8  f04f0064          MOV      r0,#0x64
0036fc  f88d0013          STRB     r0,[sp,#0x13]
;;;5429   		modbus_buff[4] = (char)(tempSSSS/256);	
003700  ea4f70e6          ASR      r0,r6,#31
003704  eb066010          ADD      r0,r6,r0,LSR #24
003708  ea4f2120          ASR      r1,r0,#8
00370c  f88d1014          STRB     r1,[sp,#0x14]
;;;5430   		modbus_buff[5] = (char)(tempSSSS%256);
003710  4630              MOV      r0,r6
003712  f88d0015          STRB     r0,[sp,#0x15]
;;;5431   	
;;;5432   		crc_temp= CRC16_2(modbus_buff,6);
003716  f04f0106          MOV      r1,#6
00371a  a804              ADD      r0,sp,#0x10
00371c  f7fffffe          BL       CRC16_2
;;;5433   	
;;;5434   		modbus_buff[6]= (char)crc_temp;
003720  f88d0016          STRB     r0,[sp,#0x16]
;;;5435   		modbus_buff[7]= (char)(crc_temp>>8);
003724  ea4f2020          ASR      r0,r0,#8
003728  f88d0017          STRB     r0,[sp,#0x17]
;;;5436   	
;;;5437   		crc_temp= CRC16_2(modbus_buff,6);
00372c  f04f0106          MOV      r1,#6
003730  a804              ADD      r0,sp,#0x10
003732  f7fffffe          BL       CRC16_2
;;;5438   	
;;;5439   		plazma_ica1=tempSSSS;
003736  f8a56076          STRH     r6,[r5,#0x76]
;;;5440   		if(ICA_CH==0)
00373a  f9b70000          LDRSH    r0,[r7,#0]  ; ICA_CH
00373e  b3f0              CBZ      r0,|L1.14270|
;;;5441   			{
;;;5442   			for (i=0;i<8;i++)
;;;5443   				{
;;;5444   				putchar_sc16is700(modbus_buff[i]);
;;;5445   				}
;;;5446   			}
;;;5447   		else if(ICA_CH==2)
003740  2802              CMP      r0,#2
003742  d10c              BNE      |L1.14174|
;;;5448   			{
;;;5449   			uart_out1 (5,6,0,100,modbus_buff[4],modbus_buff[5],0);
003744  f89d0015          LDRB     r0,[sp,#0x15]
003748  f89d1014          LDRB     r1,[sp,#0x14]
00374c  e9cd0401          STRD     r0,r4,[sp,#4]
003750  9100              STR      r1,[sp,#0]
003752  2364              MOVS     r3,#0x64
003754  2200              MOVS     r2,#0
003756  2106              MOVS     r1,#6
003758  2005              MOVS     r0,#5
00375a  f7fffffe          BL       uart_out1
                  |L1.14174|
;;;5450   			}
;;;5451   		}
;;;5452   	}
;;;5453   }
00375e  b009              ADD      sp,sp,#0x24
003760  e8bd8ff0          POP      {r4-r11,pc}
                  |L1.14180|
003764  8818              LDRH     r0,[r3,#0]            ;5392  ; ICA_MODBUS_ADDRESS
003766  f88d0010          STRB     r0,[sp,#0x10]         ;5392
00376a  f04f0004          MOV      r0,#4                 ;5393
00376e  f88d0011          STRB     r0,[sp,#0x11]         ;5393
003772  f88d4012          STRB     r4,[sp,#0x12]         ;5394
003776  f04f0002          MOV      r0,#2                 ;5395
00377a  f88d0013          STRB     r0,[sp,#0x13]         ;5395
00377e  f88d4014          STRB     r4,[sp,#0x14]         ;5396
003782  f04f0501          MOV      r5,#1                 ;5397
003786  f88d5015          STRB     r5,[sp,#0x15]         ;5397
00378a  f04f0106          MOV      r1,#6                 ;5399
00378e  a804              ADD      r0,sp,#0x10           ;5399
003790  f7fffffe          BL       CRC16_2
003794  f88d0016          STRB     r0,[sp,#0x16]         ;5401
003798  ea4f2020          ASR      r0,r0,#8              ;5402
00379c  f88d0017          STRB     r0,[sp,#0x17]         ;5402
0037a0  f9b70000          LDRSH    r0,[r7,#0]            ;5404  ; ICA_CH
0037a4  b160              CBZ      r0,|L1.14272|
0037a6  2802              CMP      r0,#2                 ;5411
0037a8  d1d9              BNE      |L1.14174|
0037aa  e9cd4500          STRD     r4,r5,[sp,#0]         ;5413
0037ae  2302              MOVS     r3,#2                 ;5413
0037b0  2200              MOVS     r2,#0                 ;5413
0037b2  2104              MOVS     r1,#4                 ;5413
0037b4  2005              MOVS     r0,#5                 ;5413
0037b6  9402              STR      r4,[sp,#8]            ;5413
0037b8  f7fffffe          BL       uart_out1
0037bc  e7cf              B        |L1.14174|
                  |L1.14270|
0037be  e00b              B        |L1.14296|
                  |L1.14272|
0037c0  f04f0400          MOV      r4,#0                 ;5406
0037c4  ad04              ADD      r5,sp,#0x10           ;5389
                  |L1.14278|
0037c6  5d28              LDRB     r0,[r5,r4]            ;5408
0037c8  f7fffffe          BL       putchar_sc16is700
0037cc  f1040401          ADD      r4,r4,#1              ;5406
0037d0  b2e4              UXTB     r4,r4                 ;5406
0037d2  2c08              CMP      r4,#8                 ;5406
0037d4  d3f7              BCC      |L1.14278|
0037d6  e7c2              B        |L1.14174|
                  |L1.14296|
0037d8  f04f0400          MOV      r4,#0                 ;5442
0037dc  ad04              ADD      r5,sp,#0x10           ;5418
                  |L1.14302|
0037de  5d28              LDRB     r0,[r5,r4]            ;5444
0037e0  f7fffffe          BL       putchar_sc16is700
0037e4  f1040401          ADD      r4,r4,#1              ;5442
0037e8  b2e4              UXTB     r4,r4                 ;5442
0037ea  2c08              CMP      r4,#8                 ;5442
0037ec  d3f7              BCC      |L1.14302|
0037ee  e7b6              B        |L1.14174|
;;;5454   
                          ENDP

                  ipsBlckHndl PROC
;;;5537   //-----------------------------------------------
;;;5538   void ipsBlckHndl(char in)
0037f0  b510              PUSH     {r4,lr}
;;;5539   {
;;;5540   
;;;5541   ipsBlckStat=0;
0037f2  4ba7              LDR      r3,|L1.14992|
0037f4  f04f0000          MOV      r0,#0
0037f8  8018              STRH     r0,[r3,#0]
;;;5542   if(ipsBlckSrc==1)
0037fa  48a6              LDR      r0,|L1.14996|
0037fc  f04f0401          MOV      r4,#1
;;;5543   	{
;;;5544   	if(((ipsBlckLog==0)&&(adc_buff_[11]>2000)) || ((ipsBlckLog==1)&&(adc_buff_[11]<2000))) ipsBlckStat=1;
003800  f44f62fa          MOV      r2,#0x7d0
003804  f9b01000          LDRSH    r1,[r0,#0]            ;5542  ; ipsBlckSrc
003808  48a3              LDR      r0,|L1.15000|
00380a  2901              CMP      r1,#1                 ;5542
00380c  f9b00000          LDRSH    r0,[r0,#0]
003810  d006              BEQ      |L1.14368|
;;;5545   	}
;;;5546   else if(ipsBlckSrc==2)
003812  2902              CMP      r1,#2
003814  d10f              BNE      |L1.14390|
003816  49a1              LDR      r1,|L1.15004|
;;;5547   	{
;;;5548   	if(((ipsBlckLog==0)&&(adc_buff_[13]>2000)) || ((ipsBlckLog==1)&&(adc_buff_[13]<2000))) ipsBlckStat=1;
003818  f9b1101a          LDRSH    r1,[r1,#0x1a]
00381c  b160              CBZ      r0,|L1.14392|
00381e  e00d              B        |L1.14396|
                  |L1.14368|
003820  499e              LDR      r1,|L1.15004|
003822  f9b11016          LDRSH    r1,[r1,#0x16]         ;5544
003826  b908              CBNZ     r0,|L1.14380|
003828  4291              CMP      r1,r2                 ;5544
00382a  dc03              BGT      |L1.14388|
                  |L1.14380|
00382c  2801              CMP      r0,#1                 ;5544
00382e  d102              BNE      |L1.14390|
003830  4291              CMP      r1,r2                 ;5544
003832  da00              BGE      |L1.14390|
                  |L1.14388|
003834  801c              STRH     r4,[r3,#0]            ;5544
                  |L1.14390|
;;;5549   	}
;;;5550   }
003836  bd10              POP      {r4,pc}
                  |L1.14392|
003838  4291              CMP      r1,r2                 ;5548
00383a  dc03              BGT      |L1.14404|
                  |L1.14396|
00383c  2801              CMP      r0,#1                 ;5548
00383e  d1fa              BNE      |L1.14390|
003840  4291              CMP      r1,r2                 ;5548
003842  daf8              BGE      |L1.14390|
                  |L1.14404|
003844  801c              STRH     r4,[r3,#0]            ;5548
003846  bd10              POP      {r4,pc}
;;;5551   
                          ENDP

                  bps_drv PROC
;;;5552   //-----------------------------------------------
;;;5553   void bps_drv(char in)
003848  e92d41f0          PUSH     {r4-r8,lr}
;;;5554   {
00384c  4606              MOV      r6,r0
;;;5555   char temp;
;;;5556   
;;;5557   if (bps[in]._device!=dSRC) return;
00384e  ebc600c6          RSB      r0,r6,r6,LSL #3
003852  4993              LDR      r1,|L1.15008|
003854  eb001006          ADD      r0,r0,r6,LSL #4
003858  f8112020          LDRB     r2,[r1,r0,LSL #2]
00385c  2a03              CMP      r2,#3
00385e  d177              BNE      |L1.14672|
;;;5558   temp=bps[in]._flags_tm;
003860  eb010480          ADD      r4,r1,r0,LSL #2
003864  f8945042          LDRB     r5,[r4,#0x42]
;;;5559   if(temp&(1<<AV_T))
003868  07a8              LSLS     r0,r5,#30
00386a  d517              BPL      |L1.14492|
;;;5560   	{
;;;5561   	if(bps[in]._temp_av_cnt<1200) 
00386c  f9b41046          LDRSH    r1,[r4,#0x46]
003870  f44f6096          MOV      r0,#0x4b0
003874  4281              CMP      r1,r0
003876  da22              BGE      |L1.14526|
;;;5562   		{
;;;5563   		bps[in]._temp_av_cnt++;
003878  f1010101          ADD      r1,r1,#1
00387c  b209              SXTH     r1,r1
00387e  f8a41046          STRH     r1,[r4,#0x46]
;;;5564   		if(bps[in]._temp_av_cnt>=1200)
003882  4281              CMP      r1,r0
003884  db1b              BLT      |L1.14526|
;;;5565   			{
;;;5566   			bps[in]._temp_av_cnt=1200;
003886  f8a40046          STRH     r0,[r4,#0x46]
;;;5567   		   	if(!(bps[in]._av&(1<<0)))avar_bps_hndl(in,0,1);
00388a  7860              LDRB     r0,[r4,#1]
00388c  07c0              LSLS     r0,r0,#31
00388e  d116              BNE      |L1.14526|
003890  2201              MOVS     r2,#1
003892  2100              MOVS     r1,#0
003894  4630              MOV      r0,r6
003896  f7fffffe          BL       avar_bps_hndl
00389a  e010              B        |L1.14526|
                  |L1.14492|
;;;5568   			}
;;;5569   		}
;;;5570   	}
;;;5571   
;;;5572   else if(!(temp&(1<<AV_T)))
;;;5573   	{
;;;5574   	if(bps[in]._temp_av_cnt) 
00389c  f9b41046          LDRSH    r1,[r4,#0x46]
0038a0  b169              CBZ      r1,|L1.14526|
;;;5575   		{
;;;5576   		bps[in]._temp_av_cnt--;
0038a2  f1a10101          SUB      r1,r1,#1
0038a6  b208              SXTH     r0,r1
0038a8  f8a40046          STRH     r0,[r4,#0x46]
;;;5577   		if(!bps[in]._temp_av_cnt)
0038ac  b938              CBNZ     r0,|L1.14526|
;;;5578   			{
;;;5579   			if(bps[in]._av&(1<<0))avar_bps_hndl(in,0,0);
0038ae  7860              LDRB     r0,[r4,#1]
0038b0  07c0              LSLS     r0,r0,#31
0038b2  d004              BEQ      |L1.14526|
0038b4  2200              MOVS     r2,#0
0038b6  4611              MOV      r1,r2
0038b8  4630              MOV      r0,r6
0038ba  f7fffffe          BL       avar_bps_hndl
                  |L1.14526|
;;;5580   			}
;;;5581   		} 	
;;;5582   
;;;5583   	}
;;;5584   
;;;5585   if((temp&(1<<AVUMAX)))
0038be  0729              LSLS     r1,r5,#28
;;;5586   	{
;;;5587   	if(bps[in]._umax_av_cnt<10) 
;;;5588   		{
;;;5589   		bps[in]._umax_av_cnt++;
;;;5590   		if(bps[in]._umax_av_cnt>=10)
;;;5591   			{ 
;;;5592   			bps[in]._umax_av_cnt=10;
0038c0  f04f070a          MOV      r7,#0xa
0038c4  f04f0000          MOV      r0,#0                 ;5567
0038c8  d515              BPL      |L1.14582|
0038ca  f9b40048          LDRSH    r0,[r4,#0x48]         ;5587
0038ce  280a              CMP      r0,#0xa               ;5587
0038d0  da26              BGE      |L1.14624|
0038d2  f1000001          ADD      r0,r0,#1              ;5589
0038d6  b200              SXTH     r0,r0                 ;5589
0038d8  f8a40048          STRH     r0,[r4,#0x48]         ;5589
0038dc  280a              CMP      r0,#0xa               ;5590
0038de  db1f              BLT      |L1.14624|
0038e0  f8a47048          STRH     r7,[r4,#0x48]
;;;5593   			if(!(bps[in]._av&(1<<1)))avar_bps_hndl(in,1,1);
0038e4  7860              LDRB     r0,[r4,#1]
0038e6  0780              LSLS     r0,r0,#30
0038e8  d41a              BMI      |L1.14624|
0038ea  2201              MOVS     r2,#1
0038ec  4611              MOV      r1,r2
0038ee  4630              MOV      r0,r6
0038f0  f7fffffe          BL       avar_bps_hndl
0038f4  e014              B        |L1.14624|
                  |L1.14582|
;;;5594   		  	/*if((K[APV]!=ON)||((apv_cnt[in,0]==0)&&(apv_cnt[in,1]==0)&&(apv_cnt[in,2]==0)&&(apv_flags[in]==afOFF)))avar_s_hndl(in,1,1);
;;;5595   			if((apv_cnt[in,0]==0)&&(apv_cnt[in,1]==0)&&(apv_cnt[in,2]==0)&&(apv_flags[in]==afON))
;;;5596   				{
;;;5597   				apv_cnt[in,0]=APV_INIT;
;;;5598   				apv_cnt[in,1]=APV_INIT;
;;;5599   				apv_cnt[in,2]=APV_INIT;
;;;5600   				apv_flags[in]=afOFF;
;;;5601   				}				*/
;;;5602   						
;;;5603   			}
;;;5604   		} 
;;;5605   	}		
;;;5606   else if(!(temp&(1<<AVUMAX)))
;;;5607   	{
;;;5608   	if(bps[in]._umax_av_cnt>0) 
0038f6  f9b41048          LDRSH    r1,[r4,#0x48]
0038fa  2900              CMP      r1,#0
0038fc  dd0d              BLE      |L1.14618|
;;;5609   		{
;;;5610   		bps[in]._umax_av_cnt--;
0038fe  f1a10101          SUB      r1,r1,#1
003902  b208              SXTH     r0,r1
003904  f8a40048          STRH     r0,[r4,#0x48]
;;;5611   		if(bps[in]._umax_av_cnt==0)
003908  b950              CBNZ     r0,|L1.14624|
;;;5612   			{
;;;5613   			bps[in]._umax_av_cnt=0;
;;;5614   			avar_bps_hndl(in,1,0);
00390a  f04f0200          MOV      r2,#0
00390e  f04f0101          MOV      r1,#1
003912  4630              MOV      r0,r6
003914  f7fffffe          BL       avar_bps_hndl
003918  e002              B        |L1.14624|
                  |L1.14618|
;;;5615   	 //		apv_cnt[in,0]=0;
;;;5616   	//		apv_cnt[in,1]=0;
;;;5617   	 //		apv_cnt[in,2]=0;			
;;;5618   			}
;;;5619   		}
;;;5620   	else if(bps[in]._umax_av_cnt<0) bps[in]._umax_av_cnt=0;		 
00391a  da01              BGE      |L1.14624|
00391c  f8a40048          STRH     r0,[r4,#0x48]
                  |L1.14624|
;;;5621   	}
;;;5622   
;;;5623   if(temp&(1<<AVUMIN))
003920  06e8              LSLS     r0,r5,#27
003922  d516              BPL      |L1.14674|
;;;5624   	{
;;;5625   	if(bps[in]._umin_av_cnt<10) 
003924  f9b4004a          LDRSH    r0,[r4,#0x4a]
003928  280a              CMP      r0,#0xa
00392a  da20              BGE      |L1.14702|
;;;5626   		{
;;;5627   		bps[in]._umin_av_cnt++;
00392c  f1000001          ADD      r0,r0,#1
003930  b200              SXTH     r0,r0
003932  f8a4004a          STRH     r0,[r4,#0x4a]
;;;5628   		if(bps[in]._umin_av_cnt>=10)
003936  280a              CMP      r0,#0xa
003938  db19              BLT      |L1.14702|
;;;5629   			{ 
;;;5630   			bps[in]._umin_av_cnt=10;
00393a  f8a4704a          STRH     r7,[r4,#0x4a]
;;;5631   			if(!(bps[in]._av&(1<<2)))avar_bps_hndl(in,2,1);
00393e  7860              LDRB     r0,[r4,#1]
003940  0740              LSLS     r0,r0,#29
003942  d414              BMI      |L1.14702|
003944  2201              MOVS     r2,#1
003946  2102              MOVS     r1,#2
003948  4630              MOV      r0,r6
00394a  f7fffffe          BL       avar_bps_hndl
00394e  e00e              B        |L1.14702|
                  |L1.14672|
003950  e046              B        |L1.14816|
                  |L1.14674|
;;;5632   		  	/*	if((K[APV]!=ON)||((apv_cnt[in,0]==0)&&(apv_cnt[in,1]==0)&&(apv_cnt[in,2]==0)&&(apv_flags[in]==afOFF)))avar_s_hndl(in,2,1);
;;;5633   			if((apv_cnt[in,0]==0)&&(apv_cnt[in,1]==0)&&(apv_cnt[in,2]==0)&&(apv_flags[in]==afON))
;;;5634   				{
;;;5635   				apv_cnt[in,0]=APV_INIT;
;;;5636   				apv_cnt[in,1]=APV_INIT;
;;;5637   				apv_cnt[in,2]=APV_INIT;
;;;5638   				apv_flags[in]=afOFF;
;;;5639   				}*/				
;;;5640   			}
;;;5641   		} 
;;;5642   	}	
;;;5643   	
;;;5644   else if(!(temp&(1<<AVUMIN)))
;;;5645   	{
;;;5646   	if(bps[in]._umin_av_cnt) 
003952  f9b4004a          LDRSH    r0,[r4,#0x4a]
003956  b150              CBZ      r0,|L1.14702|
;;;5647   		{
;;;5648   		bps[in]._umin_av_cnt--;
003958  f1a00001          SUB      r0,r0,#1
00395c  b201              SXTH     r1,r0
00395e  f8a4104a          STRH     r1,[r4,#0x4a]
;;;5649   		if(bps[in]._umin_av_cnt==0)
003962  b921              CBNZ     r1,|L1.14702|
;;;5650   			{
;;;5651   			bps[in]._umin_av_cnt=0;
;;;5652   			avar_bps_hndl(in,2,0);
003964  2200              MOVS     r2,#0
003966  2102              MOVS     r1,#2
003968  4630              MOV      r0,r6
00396a  f7fffffe          BL       avar_bps_hndl
                  |L1.14702|
;;;5653   		//	apv_cnt[in,0]=0;
;;;5654   		//	apv_cnt[in,1]=0;
;;;5655   		//	apv_cnt[in,2]=0;
;;;5656   			}
;;;5657   		}
;;;5658   	else if(bps[in]._umin_av_cnt>10)bps[in]._umin_av_cnt--;	 
;;;5659   	}
;;;5660   
;;;5661   //bps[in]._state=bsOFF;
;;;5662   
;;;5663   if (bps[in]._av&0x0f)					bps[in]._state=bsAV;
00396e  7860              LDRB     r0,[r4,#1]
003970  0700              LSLS     r0,r0,#28
003972  d003              BEQ      |L1.14716|
003974  f04f0004          MOV      r0,#4
003978  70a0              STRB     r0,[r4,#2]
00397a  e017              B        |L1.14764|
                  |L1.14716|
;;;5664   else if ( (net_av) && (bps[in]._cnt>20)/*&& 
00397c  4849              LDR      r0,|L1.15012|
00397e  7800              LDRB     r0,[r0,#0]  ; net_av
003980  b130              CBZ      r0,|L1.14736|
003982  78e0              LDRB     r0,[r4,#3]
003984  2814              CMP      r0,#0x14
003986  d903              BLS      |L1.14736|
;;;5665   		(bps[in]._Uii<200)*/)				bps[in]._state=bsOFF_AV_NET;
003988  f04f0005          MOV      r0,#5
00398c  70a0              STRB     r0,[r4,#2]
00398e  e00d              B        |L1.14764|
                  |L1.14736|
;;;5666   else if (bps[in]._flags_tm&BIN8(100000))	bps[in]._state=bsRDY;
003990  f8940042          LDRB     r0,[r4,#0x42]
003994  0680              LSLS     r0,r0,#26
003996  d503              BPL      |L1.14752|
003998  f04f0002          MOV      r0,#2
00399c  70a0              STRB     r0,[r4,#2]
00399e  e005              B        |L1.14764|
                  |L1.14752|
;;;5667   else if (bps[in]._cnt<20)				bps[in]._state=bsWRK;
0039a0  78e0              LDRB     r0,[r4,#3]
0039a2  2814              CMP      r0,#0x14
0039a4  d202              BCS      |L1.14764|
0039a6  f04f0001          MOV      r0,#1
0039aa  70a0              STRB     r0,[r4,#2]
                  |L1.14764|
;;;5668   
;;;5669   
;;;5670   
;;;5671   //else if(bps[in]._flags_tm&BIN8(100000)) bps[in]._state=ssBL;
;;;5672   //else if((!(bps[in]._flags_tm&BIN8(100000)))&&(net_U>100))bps[in]._state=ssWRK;
;;;5673   //else bps[0]._state=ssNOT;
;;;5674   
;;;5675   //bps[in]._is_ready=0;
;;;5676   //bps[in]._is_wrk=0;
;;;5677   //if(bps[in]._av_net) bps[in]._flags_bp='N';// ÌÂ ÔÓ‰ÍÎ˛˜ÂÌ
;;;5678   //else if(bps[in]._av_u_max) bps[in]._flags_bp='P';// Á‡‚˚¯ÂÌÓ Ì‡ÔˇÊÂÌËÂ(u_.av_.bAS1T)) bps_state[0]=ssAV;
;;;5679   //else if(bps[in]._av_u_min) bps[in]._flags_bp='M';// Á‡ÌËÊÂÌÓ Ì‡ÔˇÊÂÌËÂ
;;;5680   //else if(bps[in]._av_temper) bps[in]._flags_bp='T';// ÚÂÏÔÂ‡ÚÛ‡
;;;5681   //else if(bps[in]._flags_tm&BIN8(100000)) 
;;;5682   //	{
;;;5683   //	bps[in]._flags_bp='B';// Á‡·ÎÓÍËÓ‚‡Ì
;;;5684   //	bps[in]._is_ready=1;
;;;5685   //	}
;;;5686   //else if((!(bps[in]._flags_tm&BIN8(100000)))&&(net_U>100))
;;;5687   //     {
;;;5688   //     bps[in]._flags_bp='W';// ‡·ÓÚ‡ÂÚ
;;;5689   //     bps[in]._is_ready=1;
;;;5690   //     bps[in]._is_wrk=1;
;;;5691        
;;;5692   //     }
;;;5693   //else bps[in]._is_ready=1;     
;;;5694   
;;;5695   
;;;5696   
;;;5697   
;;;5698   
;;;5699   /*
;;;5700   bps[in]._flags_tu&=BIN8(11111110);
;;;5701   if(bps[in]._ist_blok_cnt)
;;;5702   	{
;;;5703   	bps[in]._ist_blok_cnt--;
;;;5704   	bps[in]._flags_tu|=BIN8(1);
;;;5705   	}
;;;5706   
;;;5707   	   */ 
;;;5708   
;;;5709   //œÂÂÒ·ÓÒ ¡œ—‡ ÔË ÔÓÚÂÂ Ò‚ˇÁË
;;;5710   if(bps[in]._cnt>=10) bps[in]._flags_tu|=BIN8(10000000);
0039ac  78e0              LDRB     r0,[r4,#3]
0039ae  280a              CMP      r0,#0xa
0039b0  d306              BCC      |L1.14784|
0039b2  f894002c          LDRB     r0,[r4,#0x2c]
0039b6  f0400080          ORR      r0,r0,#0x80
0039ba  f884002c          STRB     r0,[r4,#0x2c]
0039be  e005              B        |L1.14796|
                  |L1.14784|
;;;5711   else bps[in]._flags_tu&=BIN8(1111111);
0039c0  f894002c          LDRB     r0,[r4,#0x2c]
0039c4  f000007f          AND      r0,r0,#0x7f
0039c8  f884002c          STRB     r0,[r4,#0x2c]
                  |L1.14796|
;;;5712   	
;;;5713   bps[in]._vol_u=cntrl_stat+bps[in]._x_;	
0039cc  4936              LDR      r1,|L1.15016|
0039ce  f9b40050          LDRSH    r0,[r4,#0x50]
0039d2  f9b11026          LDRSH    r1,[r1,#0x26]  ; cntrl_stat
0039d6  4408              ADD      r0,r0,r1
0039d8  6320              STR      r0,[r4,#0x30]
;;;5714   bps[in]._vol_i=1000; 
0039da  f44f707a          MOV      r0,#0x3e8
0039de  6360              STR      r0,[r4,#0x34]
                  |L1.14816|
;;;5715   }
0039e0  e8bd81f0          POP      {r4-r8,pc}
;;;5716   
                          ENDP

                  avt_hndl PROC
;;;5717   //-----------------------------------------------
;;;5718   void avt_hndl(void)
0039e4  b570              PUSH     {r4-r6,lr}
;;;5719   {
;;;5720   char i;
;;;5721   for(i=0;i<12;i++)
0039e6  f04f0000          MOV      r0,#0
;;;5722   	{
;;;5723   	if(eb2_data_short[6]&(1<<i))
0039ea  4930              LDR      r1,|L1.15020|
;;;5724   		{
;;;5725   		avt_stat[i]=avtON;
0039ec  4d30              LDR      r5,|L1.15024|
0039ee  f04f0401          MOV      r4,#1                 ;5723
0039f2  f9b1200c          LDRSH    r2,[r1,#0xc]          ;5723
0039f6  4603              MOV      r3,r0                 ;5721
                  |L1.14840|
0039f8  fa04f100          LSL      r1,r4,r0              ;5723
0039fc  420a              TST      r2,r1                 ;5723
0039fe  d001              BEQ      |L1.14852|
003a00  542c              STRB     r4,[r5,r0]
003a02  e000              B        |L1.14854|
                  |L1.14852|
;;;5726   		}
;;;5727   	else avt_stat[i]=avtOFF;
003a04  542b              STRB     r3,[r5,r0]
                  |L1.14854|
003a06  f1000001          ADD      r0,r0,#1              ;5721
003a0a  b2c0              UXTB     r0,r0                 ;5721
003a0c  280c              CMP      r0,#0xc               ;5721
003a0e  d3f3              BCC      |L1.14840|
;;;5728   	}
;;;5729   
;;;5730   if((avt_stat_old[0]!=avt_stat[0])&&(NUMAVT>=1))
003a10  4e28              LDR      r6,|L1.15028|
003a12  7828              LDRB     r0,[r5,#0]  ; avt_stat
003a14  4c28              LDR      r4,|L1.15032|
003a16  7831              LDRB     r1,[r6,#0]  ; avt_stat_old
003a18  4281              CMP      r1,r0
003a1a  d00b              BEQ      |L1.14900|
003a1c  f9b41000          LDRSH    r1,[r4,#0]  ; NUMAVT
003a20  2901              CMP      r1,#1
003a22  db07              BLT      |L1.14900|
;;;5731   	{
;;;5732   	if(avt_stat[0]==avtON) 	snmp_trap_send("Avtomat #1 is ON ",11,1,1);
003a24  2801              CMP      r0,#1
003a26  d02a              BEQ      |L1.14974|
;;;5733   	else 				snmp_trap_send("Avtomat #1 is OFF",11,1,0);
003a28  2300              MOVS     r3,#0
003a2a  2201              MOVS     r2,#1
003a2c  210b              MOVS     r1,#0xb
003a2e  a023              ADR      r0,|L1.15036|
003a30  f7fffffe          BL       snmp_trap_send
                  |L1.14900|
;;;5734   	}
;;;5735   if((avt_stat_old[1]!=avt_stat[1])&&(NUMAVT>=2))
003a34  7871              LDRB     r1,[r6,#1]  ; avt_stat_old
003a36  7868              LDRB     r0,[r5,#1]  ; avt_stat
003a38  4281              CMP      r1,r0
003a3a  d00b              BEQ      |L1.14932|
003a3c  f9b41000          LDRSH    r1,[r4,#0]  ; NUMAVT
003a40  2902              CMP      r1,#2
003a42  db07              BLT      |L1.14932|
;;;5736   	{
;;;5737   	if(avt_stat[1]==avtON) 	snmp_trap_send("Avtomat #2 is ON ",11,2,1);
003a44  2801              CMP      r0,#1
003a46  d07e              BEQ      |L1.15174|
;;;5738   	else 				snmp_trap_send("Avtomat #2 is OFF",11,2,0);
003a48  2300              MOVS     r3,#0
003a4a  2202              MOVS     r2,#2
003a4c  210b              MOVS     r1,#0xb
003a4e  a020              ADR      r0,|L1.15056|
003a50  f7fffffe          BL       snmp_trap_send
                  |L1.14932|
;;;5739   	}
;;;5740   if((avt_stat_old[2]!=avt_stat[2])&&(NUMAVT>=3))
003a54  78b1              LDRB     r1,[r6,#2]  ; avt_stat_old
003a56  78a8              LDRB     r0,[r5,#2]  ; avt_stat
003a58  4281              CMP      r1,r0
003a5a  d00b              BEQ      |L1.14964|
003a5c  f9b41000          LDRSH    r1,[r4,#0]  ; NUMAVT
003a60  2903              CMP      r1,#3
003a62  db07              BLT      |L1.14964|
;;;5741   	{
;;;5742   	if(avt_stat[2]==avtON) 	snmp_trap_send("Avtomat #3 is ON ",11,3,1);
003a64  2801              CMP      r0,#1
003a66  d06f              BEQ      |L1.15176|
;;;5743   	else 				snmp_trap_send("Avtomat #3 is OFF",11,3,0);
003a68  2300              MOVS     r3,#0
003a6a  2203              MOVS     r2,#3
003a6c  210b              MOVS     r1,#0xb
003a6e  a01d              ADR      r0,|L1.15076|
003a70  f7fffffe          BL       snmp_trap_send
                  |L1.14964|
;;;5744   	}
;;;5745   if((avt_stat_old[3]!=avt_stat[3])&&(NUMAVT>=4))
003a74  78f1              LDRB     r1,[r6,#3]  ; avt_stat_old
003a76  78e8              LDRB     r0,[r5,#3]  ; avt_stat
003a78  4281              CMP      r1,r0
003a7a  d049              BEQ      |L1.15120|
003a7c  e03c              B        |L1.15096|
                  |L1.14974|
003a7e  e0a4              B        |L1.15306|
                  |L1.14976|
                          DCD      ica_u_necc
                  |L1.14980|
                          DCD      ICA_MODBUS_ADDRESS
                  |L1.14984|
                          DCD      ICA_CH
                  |L1.14988|
                          DCD      TBAT
                  |L1.14992|
                          DCD      ipsBlckStat
                  |L1.14996|
                          DCD      ipsBlckSrc
                  |L1.15000|
                          DCD      ipsBlckLog
                  |L1.15004|
                          DCD      ||.bss||+0x400
                  |L1.15008|
                          DCD      bps
                  |L1.15012|
                          DCD      net_av
                  |L1.15016|
                          DCD      ||area_number.25||
                  |L1.15020|
                          DCD      eb2_data_short
                  |L1.15024|
                          DCD      avt_stat
                  |L1.15028|
                          DCD      avt_stat_old
                  |L1.15032|
                          DCD      NUMAVT
                  |L1.15036|
003abc  4176746f          DCB      "Avtomat #1 is OFF",0
003ac0  6d617420
003ac4  23312069
003ac8  73204f46
003acc  4600    
003ace  00                DCB      0
003acf  00                DCB      0
                  |L1.15056|
003ad0  4176746f          DCB      "Avtomat #2 is OFF",0
003ad4  6d617420
003ad8  23322069
003adc  73204f46
003ae0  4600    
003ae2  00                DCB      0
003ae3  00                DCB      0
                  |L1.15076|
003ae4  4176746f          DCB      "Avtomat #3 is OFF",0
003ae8  6d617420
003aec  23332069
003af0  73204f46
003af4  4600    
003af6  00                DCB      0
003af7  00                DCB      0
                  |L1.15096|
003af8  f9b41000          LDRSH    r1,[r4,#0]  ; NUMAVT
003afc  2904              CMP      r1,#4
003afe  db07              BLT      |L1.15120|
;;;5746   	{
;;;5747   	if(avt_stat[3]==avtON) 	snmp_trap_send("Avtomat #4 is ON ",11,4,1);
003b00  2801              CMP      r0,#1
003b02  d078              BEQ      |L1.15350|
;;;5748   	else 				snmp_trap_send("Avtomat #4 is OFF",11,4,0);
003b04  2300              MOVS     r3,#0
003b06  2204              MOVS     r2,#4
003b08  210b              MOVS     r1,#0xb
003b0a  a0ff              ADR      r0,|L1.16136|
003b0c  f7fffffe          BL       snmp_trap_send
                  |L1.15120|
;;;5749   	}
;;;5750   if((avt_stat_old[4]!=avt_stat[4])&&(NUMAVT>=5))
003b10  7931              LDRB     r1,[r6,#4]  ; avt_stat_old
003b12  7928              LDRB     r0,[r5,#4]  ; avt_stat
003b14  4281              CMP      r1,r0
003b16  d00b              BEQ      |L1.15152|
003b18  f9b41000          LDRSH    r1,[r4,#0]  ; NUMAVT
003b1c  2905              CMP      r1,#5
003b1e  db07              BLT      |L1.15152|
;;;5751   	{
;;;5752   	if(avt_stat[4]==avtON) 	snmp_trap_send("Avtomat #5 is ON ",11,5,1);
003b20  2801              CMP      r0,#1
003b22  d070              BEQ      |L1.15366|
;;;5753   	else 				snmp_trap_send("Avtomat #5 is OFF",11,5,0);
003b24  2300              MOVS     r3,#0
003b26  2205              MOVS     r2,#5
003b28  210b              MOVS     r1,#0xb
003b2a  a0fc              ADR      r0,|L1.16156|
003b2c  f7fffffe          BL       snmp_trap_send
                  |L1.15152|
;;;5754   	}
;;;5755   if((avt_stat_old[5]!=avt_stat[5])&&(NUMAVT>=6))
003b30  7971              LDRB     r1,[r6,#5]  ; avt_stat_old
003b32  7968              LDRB     r0,[r5,#5]  ; avt_stat
003b34  4281              CMP      r1,r0
003b36  d00e              BEQ      |L1.15190|
003b38  f9b41000          LDRSH    r1,[r4,#0]  ; NUMAVT
003b3c  2906              CMP      r1,#6
003b3e  db0a              BLT      |L1.15190|
;;;5756   	{
;;;5757   	if(avt_stat[5]==avtON) 	snmp_trap_send("Avtomat #6 is ON ",11,6,1);
003b40  2801              CMP      r0,#1
003b42  d067              BEQ      |L1.15380|
;;;5758   	else 				snmp_trap_send("Avtomat #6 is OFF",11,6,0);
003b44  e001              B        |L1.15178|
                  |L1.15174|
003b46  e047              B        |L1.15320|
                  |L1.15176|
003b48  e04e              B        |L1.15336|
                  |L1.15178|
003b4a  2300              MOVS     r3,#0
003b4c  2206              MOVS     r2,#6
003b4e  210b              MOVS     r1,#0xb
003b50  a0f7              ADR      r0,|L1.16176|
003b52  f7fffffe          BL       snmp_trap_send
                  |L1.15190|
;;;5759   	}
;;;5760   if((avt_stat_old[6]!=avt_stat[6])&&(NUMAVT>=7))
003b56  79b1              LDRB     r1,[r6,#6]  ; avt_stat_old
003b58  79a8              LDRB     r0,[r5,#6]  ; avt_stat
003b5a  4281              CMP      r1,r0
003b5c  d00b              BEQ      |L1.15222|
003b5e  f9b41000          LDRSH    r1,[r4,#0]  ; NUMAVT
003b62  2907              CMP      r1,#7
003b64  db07              BLT      |L1.15222|
;;;5761   	{
;;;5762   	if(avt_stat[6]==avtON) 	snmp_trap_send("Avtomat #7 is ON ",11,7,1);
003b66  2801              CMP      r0,#1
003b68  d05b              BEQ      |L1.15394|
;;;5763   	else 				snmp_trap_send("Avtomat #7 is OFF",11,7,0);
003b6a  2300              MOVS     r3,#0
003b6c  2207              MOVS     r2,#7
003b6e  210b              MOVS     r1,#0xb
003b70  a0f4              ADR      r0,|L1.16196|
003b72  f7fffffe          BL       snmp_trap_send
                  |L1.15222|
;;;5764   	}
;;;5765   if((avt_stat_old[7]!=avt_stat[7])&&(NUMAVT>=8))
003b76  79f1              LDRB     r1,[r6,#7]  ; avt_stat_old
003b78  79e8              LDRB     r0,[r5,#7]  ; avt_stat
003b7a  4281              CMP      r1,r0
003b7c  d00b              BEQ      |L1.15254|
003b7e  f9b41000          LDRSH    r1,[r4,#0]  ; NUMAVT
003b82  2908              CMP      r1,#8
003b84  db07              BLT      |L1.15254|
;;;5766   	{
;;;5767   	if(avt_stat[7]==avtON) 	snmp_trap_send("Avtomat #8 is ON ",11,8,1);
003b86  2801              CMP      r0,#1
003b88  d052              BEQ      |L1.15408|
;;;5768   	else 				snmp_trap_send("Avtomat #8 is OFF",11,8,0);
003b8a  2300              MOVS     r3,#0
003b8c  2208              MOVS     r2,#8
003b8e  210b              MOVS     r1,#0xb
003b90  a0f1              ADR      r0,|L1.16216|
003b92  f7fffffe          BL       snmp_trap_send
                  |L1.15254|
;;;5769   	}
;;;5770   if((avt_stat_old[8]!=avt_stat[8])&&(NUMAVT>=9))
003b96  7a31              LDRB     r1,[r6,#8]  ; avt_stat_old
003b98  7a28              LDRB     r0,[r5,#8]  ; avt_stat
003b9a  4281              CMP      r1,r0
003b9c  d00b              BEQ      |L1.15286|
003b9e  f9b41000          LDRSH    r1,[r4,#0]  ; NUMAVT
003ba2  2909              CMP      r1,#9
003ba4  db07              BLT      |L1.15286|
;;;5771   	{
;;;5772   	if(avt_stat[8]==avtON) 	snmp_trap_send("Avtomat #9 is ON ",11,9,1);
003ba6  2801              CMP      r0,#1
003ba8  d049              BEQ      |L1.15422|
;;;5773   	else 				snmp_trap_send("Avtomat #9 is OFF",11,9,0);
003baa  2300              MOVS     r3,#0
003bac  2209              MOVS     r2,#9
003bae  210b              MOVS     r1,#0xb
003bb0  a0ee              ADR      r0,|L1.16236|
003bb2  f7fffffe          BL       snmp_trap_send
                  |L1.15286|
;;;5774   	}
;;;5775   
;;;5776   for(i=0;i<12;i++)
003bb6  f04f0000          MOV      r0,#0
                  |L1.15290|
;;;5777   	{
;;;5778   	avt_stat_old[i]=avt_stat[i];
003bba  5c29              LDRB     r1,[r5,r0]
003bbc  5431              STRB     r1,[r6,r0]
003bbe  f1000001          ADD      r0,r0,#1              ;5776
003bc2  b2c0              UXTB     r0,r0                 ;5776
003bc4  280c              CMP      r0,#0xc               ;5776
003bc6  d3f8              BCC      |L1.15290|
;;;5779   	}
;;;5780   }
003bc8  bd70              POP      {r4-r6,pc}
                  |L1.15306|
003bca  2301              MOVS     r3,#1                 ;5732
003bcc  461a              MOV      r2,r3                 ;5732
003bce  210b              MOVS     r1,#0xb               ;5732
003bd0  a0eb              ADR      r0,|L1.16256|
003bd2  f7fffffe          BL       snmp_trap_send
003bd6  e72d              B        |L1.14900|
                  |L1.15320|
003bd8  2301              MOVS     r3,#1                 ;5737
003bda  2202              MOVS     r2,#2                 ;5737
003bdc  210b              MOVS     r1,#0xb               ;5737
003bde  a0ed              ADR      r0,|L1.16276|
003be0  f7fffffe          BL       snmp_trap_send
003be4  e736              B        |L1.14932|
003be6  e006              B        |L1.15350|
                  |L1.15336|
003be8  2301              MOVS     r3,#1                 ;5742
003bea  2203              MOVS     r2,#3                 ;5742
003bec  210b              MOVS     r1,#0xb               ;5742
003bee  a0ee              ADR      r0,|L1.16296|
003bf0  f7fffffe          BL       snmp_trap_send
003bf4  e73e              B        |L1.14964|
                  |L1.15350|
003bf6  2301              MOVS     r3,#1                 ;5747
003bf8  2204              MOVS     r2,#4                 ;5747
003bfa  210b              MOVS     r1,#0xb               ;5747
003bfc  a0ef              ADR      r0,|L1.16316|
003bfe  f7fffffe          BL       snmp_trap_send
003c02  e785              B        |L1.15120|
003c04  e7ff              B        |L1.15366|
                  |L1.15366|
003c06  2301              MOVS     r3,#1                 ;5752
003c08  2205              MOVS     r2,#5                 ;5752
003c0a  210b              MOVS     r1,#0xb               ;5752
003c0c  a0f0              ADR      r0,|L1.16336|
003c0e  f7fffffe          BL       snmp_trap_send
003c12  e78d              B        |L1.15152|
                  |L1.15380|
003c14  2301              MOVS     r3,#1                 ;5757
003c16  2206              MOVS     r2,#6                 ;5757
003c18  210b              MOVS     r1,#0xb               ;5757
003c1a  a0f2              ADR      r0,|L1.16356|
003c1c  f7fffffe          BL       snmp_trap_send
003c20  e799              B        |L1.15190|
                  |L1.15394|
003c22  2301              MOVS     r3,#1                 ;5762
003c24  2207              MOVS     r2,#7                 ;5762
003c26  210b              MOVS     r1,#0xb               ;5762
003c28  a0f3              ADR      r0,|L1.16376|
003c2a  f7fffffe          BL       snmp_trap_send
003c2e  e7a2              B        |L1.15222|
                  |L1.15408|
003c30  2301              MOVS     r3,#1                 ;5767
003c32  2208              MOVS     r2,#8                 ;5767
003c34  210b              MOVS     r1,#0xb               ;5767
003c36  a0f5              ADR      r0,|L1.16396|
003c38  f7fffffe          BL       snmp_trap_send
003c3c  e7ab              B        |L1.15254|
                  |L1.15422|
003c3e  2301              MOVS     r3,#1                 ;5772
003c40  2209              MOVS     r2,#9                 ;5772
003c42  210b              MOVS     r1,#0xb               ;5772
003c44  a0f6              ADR      r0,|L1.16416|
003c46  f7fffffe          BL       snmp_trap_send
003c4a  e7b4              B        |L1.15286|
;;;5781   
                          ENDP

                  bat_hndl PROC
;;;5782   //-----------------------------------------------
;;;5783   void bat_hndl(void)
003c4c  b570              PUSH     {r4-r6,lr}
;;;5784   {
;;;5785   /*if(mess_find(_MESS_BAT_MASK_ON))
;;;5786   	{
;;;5787   	if(mess_data[0]==_MESS_BAT_MASK_ON)
;;;5788   		{
;;;5789   		char i;
;;;5790   		for(i=0;i<2;i++)
;;;5791   			{
;;;5792   			if(mess_data[1]&(1<<i))
;;;5793   				{
;;;5794   				bat[i]._cnt_to_block=0;
;;;5795        			bat[i]._rel_stat=0;
;;;5796        			}
;;;5797   			}
;;;5798   		}
;;;5799   	}
;;;5800   if(mess_find(_MESS_BAT_MASK_OFF))
;;;5801   	{		
;;;5802   	if(mess_data[0]==_MESS_BAT_MASK_OFF)
;;;5803   		{
;;;5804   		char i;
;;;5805   		for(i=0;i<2;i++)
;;;5806   			{
;;;5807   			if((mess_data[1]&(1<<i)) && (bat[i]._cnt_to_block==0) && (bat[i]._rel_stat==0))
;;;5808   				{
;;;5809   				bat[i]._cnt_to_block=20;
;;;5810   				bat[i]._rel_stat=1;
;;;5811        			}
;;;5812   			}
;;;5813   		
;;;5814   		}		
;;;5815   	}*/
;;;5816   
;;;5817   if(mess_find_unvol(MESS2BAT_HNDL))
003c4e  20c8              MOVS     r0,#0xc8
003c50  f7fffffe          BL       mess_find_unvol
;;;5818   	{ 
;;;5819   	char i;
;;;5820   	
;;;5821   	if(mess_data[0]==PARAM_BAT_ALL_OFF_AFTER_2SEC)
;;;5822   		{
;;;5823   		for(i=0;i<MAX_NUM_OF_BAT;i++)
;;;5824   			{
;;;5825   			if(bat[i]._cnt_to_block<50)bat[i]._cnt_to_block++;
003c54  49f7              LDR      r1,|L1.16436|
003c56  2200              MOVS     r2,#0                 ;5823
003c58  b3a8              CBZ      r0,|L1.15558|
003c5a  4bf7              LDR      r3,|L1.16440|
;;;5826   			}
;;;5827   		}
;;;5828   
;;;5829   	else if(mess_data[0]==PARAM_BAT_MASK_OFF_AFTER_2SEC)
;;;5830   		{
;;;5831   		for(i=0;i<MAX_NUM_OF_BAT;i++)
;;;5832   			{
;;;5833   			if(mess_data[1]&(1<<i))
003c5c  2401              MOVS     r4,#1
003c5e  6818              LDR      r0,[r3,#0]            ;5821  ; mess_data
003c60  28c9              CMP      r0,#0xc9              ;5821
003c62  d01c              BEQ      |L1.15518|
003c64  28ca              CMP      r0,#0xca              ;5829
003c66  d02f              BEQ      |L1.15560|
;;;5834   				{
;;;5835   				if(bat[i]._cnt_to_block<50) bat[i]._cnt_to_block++;
;;;5836   				}
;;;5837   			else bat[i]._cnt_to_block=0;
;;;5838   			}
;;;5839   		}
;;;5840   	else 
;;;5841   	 	{
;;;5842   		for(i=0;i<MAX_NUM_OF_BAT;i++)
003c68  4610              MOV      r0,r2
                  |L1.15466|
;;;5843   			{
;;;5844   			bat[i]._cnt_to_block=0;
003c6a  eb000340          ADD      r3,r0,r0,LSL #1
003c6e  eb031300          ADD      r3,r3,r0,LSL #4
003c72  f8012023          STRB     r2,[r1,r3,LSL #2]
003c76  f1000001          ADD      r0,r0,#1              ;5842
003c7a  b2c0              UXTB     r0,r0                 ;5842
003c7c  2802              CMP      r0,#2                 ;5842
003c7e  d3f4              BCC      |L1.15466|
                  |L1.15488|
;;;5845   			}
;;;5846   
;;;5847   		}
;;;5848   	for(i=0;i<MAX_NUM_OF_BAT;i++)
003c80  f04f0000          MOV      r0,#0
                  |L1.15492|
;;;5849   		{
;;;5850   		if(bat[i]._cnt_to_block>20)bat[i]._rel_stat=1;
003c84  eb000340          ADD      r3,r0,r0,LSL #1
003c88  eb031300          ADD      r3,r3,r0,LSL #4
003c8c  f8115023          LDRB     r5,[r1,r3,LSL #2]
003c90  2d14              CMP      r5,#0x14
003c92  d939              BLS      |L1.15624|
003c94  eb010383          ADD      r3,r1,r3,LSL #2
003c98  f883403c          STRB     r4,[r3,#0x3c]
003c9c  e038              B        |L1.15632|
                  |L1.15518|
003c9e  f04f0000          MOV      r0,#0                 ;5823
                  |L1.15522|
003ca2  eb000340          ADD      r3,r0,r0,LSL #1       ;5825
003ca6  eb031500          ADD      r5,r3,r0,LSL #4       ;5825
003caa  f8113025          LDRB     r3,[r1,r5,LSL #2]     ;5825
003cae  2b32              CMP      r3,#0x32              ;5825
003cb0  d203              BCS      |L1.15546|
003cb2  f1030301          ADD      r3,r3,#1              ;5825
003cb6  f8013025          STRB     r3,[r1,r5,LSL #2]     ;5825
                  |L1.15546|
003cba  f1000001          ADD      r0,r0,#1              ;5823
003cbe  b2c0              UXTB     r0,r0                 ;5823
003cc0  2802              CMP      r0,#2                 ;5823
003cc2  d3ee              BCC      |L1.15522|
003cc4  e7dc              B        |L1.15488|
                  |L1.15558|
003cc6  e029              B        |L1.15644|
                  |L1.15560|
003cc8  f04f0000          MOV      r0,#0                 ;5831
003ccc  685e              LDR      r6,[r3,#4]            ;5833
                  |L1.15566|
003cce  fa04f300          LSL      r3,r4,r0              ;5833
003cd2  421e              TST      r6,r3                 ;5833
003cd4  d00c              BEQ      |L1.15600|
003cd6  eb000340          ADD      r3,r0,r0,LSL #1       ;5835
003cda  eb031500          ADD      r5,r3,r0,LSL #4       ;5835
003cde  f8113025          LDRB     r3,[r1,r5,LSL #2]     ;5835
003ce2  2b32              CMP      r3,#0x32              ;5835
003ce4  d20a              BCS      |L1.15612|
003ce6  f1030301          ADD      r3,r3,#1              ;5835
003cea  f8013025          STRB     r3,[r1,r5,LSL #2]     ;5835
003cee  e005              B        |L1.15612|
                  |L1.15600|
003cf0  eb000340          ADD      r3,r0,r0,LSL #1       ;5837
003cf4  eb031300          ADD      r3,r3,r0,LSL #4       ;5837
003cf8  f8012023          STRB     r2,[r1,r3,LSL #2]     ;5837
                  |L1.15612|
003cfc  f1000001          ADD      r0,r0,#1              ;5831
003d00  b2c0              UXTB     r0,r0                 ;5831
003d02  2802              CMP      r0,#2                 ;5831
003d04  d3e3              BCC      |L1.15566|
003d06  e7bb              B        |L1.15488|
                  |L1.15624|
;;;5851   		else bat[i]._rel_stat=0;
003d08  eb010383          ADD      r3,r1,r3,LSL #2
003d0c  f883203c          STRB     r2,[r3,#0x3c]
                  |L1.15632|
003d10  f1000001          ADD      r0,r0,#1              ;5848
003d14  b2c0              UXTB     r0,r0                 ;5848
003d16  2802              CMP      r0,#2                 ;5848
003d18  d3b4              BCC      |L1.15492|
;;;5852   		}
;;;5853   
;;;5854   	}
;;;5855   
;;;5856   else 
;;;5857   	{
;;;5858   	char i;
;;;5859   	for(i=0;i<MAX_NUM_OF_BAT;i++)
;;;5860   		{
;;;5861   		bat[i]._cnt_to_block=0;
;;;5862   		bat[i]._rel_stat=0;
;;;5863   		}
;;;5864   
;;;5865   	}
;;;5866   
;;;5867   /*if(mess_find_unvol(MESS2BAT_HNDL1))
;;;5868   	{
;;;5869   	if(PARAM_BAT_ON)
;;;5870   		{
;;;5871   		char i;
;;;5872   		for(i=0;i<MAX_NUM_OF_BAT;i++)
;;;5873   			{
;;;5874   			if(mess_data[1]&(1<<i))
;;;5875   				{
;;;5876   				bat[i]._cnt_to_block=0;
;;;5877   				bat[i]._rel_stat=0;
;;;5878   				}
;;;5879   			}
;;;5880   		}
;;;5881   	} */
;;;5882   }
003d1a  bd70              POP      {r4-r6,pc}
                  |L1.15644|
003d1c  f04f0000          MOV      r0,#0                 ;5859
                  |L1.15648|
003d20  eb000340          ADD      r3,r0,r0,LSL #1       ;5861
003d24  eb031300          ADD      r3,r3,r0,LSL #4       ;5861
003d28  f8012023          STRB     r2,[r1,r3,LSL #2]     ;5861
003d2c  eb010383          ADD      r3,r1,r3,LSL #2       ;5862
003d30  f883203c          STRB     r2,[r3,#0x3c]         ;5862
003d34  f1000001          ADD      r0,r0,#1              ;5859
003d38  b2c0              UXTB     r0,r0                 ;5859
003d3a  2802              CMP      r0,#2                 ;5859
003d3c  d3f0              BCC      |L1.15648|
003d3e  bd70              POP      {r4-r6,pc}
;;;5883   
                          ENDP

                  bat_drv PROC
;;;6521   //-----------------------------------------------
;;;6522   void bat_drv(char in)
003d40  e92d4ffe          PUSH     {r1-r11,lr}
;;;6523   {
003d44  4605              MOV      r5,r0
;;;6524   unsigned short /*tempUS,*/tempUS_;
;;;6525   unsigned long tempUL,tempUL_;
;;;6526   unsigned short b_zar;
;;;6527   //static unsigned short time_cnt[2];
;;;6528   
;;;6529   
;;;6530   
;;;6531   if(cntrl_stat_blok_cnt_plus[in])cntrl_stat_blok_cnt_plus[in]--;
003d46  49bd              LDR      r1,|L1.16444|
003d48  f9310015          LDRSH    r0,[r1,r5,LSL #1]
003d4c  b118              CBZ      r0,|L1.15702|
003d4e  f1a00001          SUB      r0,r0,#1
003d52  f8210015          STRH     r0,[r1,r5,LSL #1]
                  |L1.15702|
;;;6532   if(cntrl_stat_blok_cnt_minus[in])cntrl_stat_blok_cnt_minus[in]--;
003d56  4ab9              LDR      r2,|L1.16444|
003d58  1d12              ADDS     r2,r2,#4
003d5a  f9320015          LDRSH    r0,[r2,r5,LSL #1]
003d5e  b118              CBZ      r0,|L1.15720|
003d60  f1a00001          SUB      r0,r0,#1
003d64  f8220015          STRH     r0,[r2,r5,LSL #1]
                  |L1.15720|
;;;6533   
;;;6534   
;;;6535   if(bat[in]._Ib>IZMAX) cntrl_stat_blok_cnt_plus[in]=100;
003d68  eb050045          ADD      r0,r5,r5,LSL #1
003d6c  4bb1              LDR      r3,|L1.16436|
003d6e  eb001005          ADD      r0,r0,r5,LSL #4
003d72  eb030480          ADD      r4,r3,r0,LSL #2
003d76  4bb2              LDR      r3,|L1.16448|
003d78  9002              STR      r0,[sp,#8]
003d7a  f9b40008          LDRSH    r0,[r4,#8]
003d7e  f9b33000          LDRSH    r3,[r3,#0]  ; IZMAX
003d82  f04f0b64          MOV      r11,#0x64
003d86  4298              CMP      r0,r3
003d88  dd01              BLE      |L1.15758|
003d8a  f821b015          STRH     r11,[r1,r5,LSL #1]
                  |L1.15758|
;;;6536   if(bat[in]._Ib<0)     cntrl_stat_blok_cnt_minus[in]=100;
003d8e  2800              CMP      r0,#0
003d90  da01              BGE      |L1.15766|
003d92  f822b015          STRH     r11,[r2,r5,LSL #1]
                  |L1.15766|
;;;6537   
;;;6538   if(cntrl_stat_blok_cnt_plus[in] && cntrl_stat_blok_cnt_minus[in])
;;;6539        {
;;;6540        if(!cntrl_stat_blok_cnt_)
003d96  48a9              LDR      r0,|L1.16444|
003d98  f8313015          LDRH     r3,[r1,r5,LSL #1]     ;6538
003d9c  389c              SUBS     r0,r0,#0x9c
003d9e  2700              MOVS     r7,#0
003da0  b14b              CBZ      r3,|L1.15798|
003da2  f8323015          LDRH     r3,[r2,r5,LSL #1]     ;6538
003da6  b133              CBZ      r3,|L1.15798|
003da8  f8b0306a          LDRH     r3,[r0,#0x6a]  ; cntrl_stat_blok_cnt_
003dac  b1a3              CBZ      r3,|L1.15832|
;;;6541             {
;;;6542             cntrl_stat_blok_cnt_=600; 
;;;6543             cntrl_stat_blok_cnt_plus[in]=0;
;;;6544             cntrl_stat_blok_cnt_minus[in]=0;
;;;6545             }
;;;6546        else cntrl_stat_blok_cnt=3000;
003dae  f64031b8          MOV      r1,#0xbb8
003db2  f8a01068          STRH     r1,[r0,#0x68]
                  |L1.15798|
;;;6547        }
;;;6548   cntrl_stat_blok_cnt=0;
003db6  f8a07068          STRH     r7,[r0,#0x68]
;;;6549   
;;;6550   if(++(bat[in]._time_cnt)>=10)
003dba  f894003e          LDRB     r0,[r4,#0x3e]
003dbe  1c40              ADDS     r0,r0,#1
003dc0  b2c0              UXTB     r0,r0
003dc2  f884003e          STRB     r0,[r4,#0x3e]
003dc6  280a              CMP      r0,#0xa
003dc8  d301              BCC      |L1.15822|
;;;6551   	{
;;;6552   	bat[in]._time_cnt=0;
003dca  f884703e          STRB     r7,[r4,#0x3e]
                  |L1.15822|
;;;6553   	//bat[in]._zar_cnt++;
;;;6554   	}
;;;6555   
;;;6556   if(main_10Hz_cnt==50)
003dce  4e9d              LDR      r6,|L1.16452|
003dd0  8830              LDRH     r0,[r6,#0]  ; main_10Hz_cnt
003dd2  2832              CMP      r0,#0x32
003dd4  d009              BEQ      |L1.15850|
003dd6  e017              B        |L1.15880|
                  |L1.15832|
003dd8  f44f7316          MOV      r3,#0x258             ;6542
003ddc  f8a0306a          STRH     r3,[r0,#0x6a]         ;6542
003de0  f8217015          STRH     r7,[r1,r5,LSL #1]     ;6543
003de4  f8227015          STRH     r7,[r2,r5,LSL #1]     ;6544
003de8  e7e5              B        |L1.15798|
                  |L1.15850|
;;;6557   	{
;;;6558   	if(!bat[in]._rel_stat)
003dea  f894003c          LDRB     r0,[r4,#0x3c]
003dee  b958              CBNZ     r0,|L1.15880|
;;;6559   		{
;;;6560   		
;;;6561   		if(bat[in]._Ub<80) 
003df0  f9b40002          LDRSH    r0,[r4,#2]
003df4  2850              CMP      r0,#0x50
003df6  da07              BGE      |L1.15880|
;;;6562   			{
;;;6563   			
;;;6564   			if(!(bat[in]._av&1))
003df8  f894003d          LDRB     r0,[r4,#0x3d]
003dfc  07c0              LSLS     r0,r0,#31
003dfe  d103              BNE      |L1.15880|
;;;6565   				{
;;;6566   				avar_bat_hndl(in,1);
003e00  2101              MOVS     r1,#1
003e02  4628              MOV      r0,r5
003e04  f7fffffe          BL       avar_bat_hndl
                  |L1.15880|
;;;6567   				//if(in==0)plazma_bat++;
;;;6568   				}
;;;6569   			}				
;;;6570   
;;;6571   		}
;;;6572   	}
;;;6573   
;;;6574   if(main_10Hz_cnt>200)
003e08  f9b60000          LDRSH    r0,[r6,#0]  ; main_10Hz_cnt
;;;6575   	{
;;;6576   	if(abs(bat[in]._Ib)>IKB) 
003e0c  4e8e              LDR      r6,|L1.16456|
003e0e  28c8              CMP      r0,#0xc8              ;6574
003e10  dd0f              BLE      |L1.15922|
003e12  f9b40008          LDRSH    r0,[r4,#8]
003e16  f7fffffe          BL       abs
003e1a  f9b61000          LDRSH    r1,[r6,#0]  ; IKB
003e1e  4288              CMP      r0,r1
003e20  dd07              BLE      |L1.15922|
;;;6577   		{
;;;6578   		if((bat[in]._av&1))avar_bat_hndl(in,0);
003e22  f894003d          LDRB     r0,[r4,#0x3d]
003e26  07c0              LSLS     r0,r0,#31
003e28  d003              BEQ      |L1.15922|
003e2a  2100              MOVS     r1,#0
003e2c  4628              MOV      r0,r5
003e2e  f7fffffe          BL       avar_bat_hndl
                  |L1.15922|
;;;6579   		}
;;;6580   	}
;;;6581   
;;;6582   #ifdef APSENERGIA
;;;6583   //if(bat[in]._Ib>(-IKB))
;;;6584   
;;;6585   
;;;6586   #endif
;;;6587   
;;;6588   if(bat[in]._Ib>(-IKB))
003e32  4885              LDR      r0,|L1.16456|
003e34  f9b41008          LDRSH    r1,[r4,#8]
003e38  f9b00000          LDRSH    r0,[r0,#0]  ; IKB
003e3c  4240              RSBS     r0,r0,#0
003e3e  4281              CMP      r1,r0
003e40  dd14              BLE      |L1.15980|
;;;6589   	{
;;;6590   	if(bat[in]._cnt_wrk<10)
003e42  7b60              LDRB     r0,[r4,#0xd]
003e44  280a              CMP      r0,#0xa
003e46  d20d              BCS      |L1.15972|
;;;6591   		{
;;;6592   		bat[in]._cnt_wrk++;
003e48  f1000001          ADD      r0,r0,#1
003e4c  b2c0              UXTB     r0,r0
003e4e  7360              STRB     r0,[r4,#0xd]
;;;6593   		if((bat[in]._cnt_wrk>=10)&&(bat[in]._wrk)) 
003e50  280a              CMP      r0,#0xa
003e52  d306              BCC      |L1.15970|
003e54  7ba0              LDRB     r0,[r4,#0xe]
003e56  2800              CMP      r0,#0
003e58  d003              BEQ      |L1.15970|
;;;6594   			{
;;;6595   			bat[in]._wrk=0;
003e5a  73a7              STRB     r7,[r4,#0xe]
;;;6596   			//beep_init(0x7L,'O');
;;;6597   			//wrk_mem_hndl(0);
;;;6598   			wrk_mem_hndl(in);
003e5c  4628              MOV      r0,r5
003e5e  f7fffffe          BL       wrk_mem_hndl
                  |L1.15970|
003e62  e110              B        |L1.16518|
                  |L1.15972|
;;;6599   			//plazma++;
;;;6600   			}
;;;6601   		}
;;;6602   	else bat[in]._cnt_wrk=10;	
003e64  f04f000a          MOV      r0,#0xa
003e68  7360              STRB     r0,[r4,#0xd]
003e6a  e10c              B        |L1.16518|
                  |L1.15980|
;;;6603   	}	
;;;6604   
;;;6605   else if(bat[in]._Ib<(-IKB))
003e6c  da40              BGE      |L1.16112|
;;;6606   	{
;;;6607   	if(bat[in]._cnt_wrk)
003e6e  7b60              LDRB     r0,[r4,#0xd]
003e70  b3f0              CBZ      r0,|L1.16112|
;;;6608   		{
;;;6609   		bat[in]._cnt_wrk--;
003e72  f1a00001          SUB      r0,r0,#1
003e76  b2c0              UXTB     r0,r0
003e78  7360              STRB     r0,[r4,#0xd]
;;;6610   		if((bat[in]._cnt_wrk==0)&&(bat[in]._wrk==0)) 
003e7a  bbc8              CBNZ     r0,|L1.16112|
003e7c  7ba0              LDRB     r0,[r4,#0xe]
003e7e  bbb8              CBNZ     r0,|L1.16112|
;;;6611   			{
;;;6612   			bat[in]._wrk=1;
003e80  f04f0001          MOV      r0,#1
003e84  73a0              STRB     r0,[r4,#0xe]
;;;6613   
;;;6614   				{
;;;6615   				char temp;
;;;6616   				signed short temp_temp;
;;;6617   				temp_temp=bat[in]._u_old[((bat_u_old_cnt+1)&0x07)];
003e86  4871              LDR      r0,|L1.16460|
003e88  8800              LDRH     r0,[r0,#0]  ; bat_u_old_cnt
003e8a  f1000001          ADD      r0,r0,#1
003e8e  f0000007          AND      r0,r0,#7
003e92  eb040040          ADD      r0,r4,r0,LSL #1
003e96  8c00              LDRH     r0,[r0,#0x20]
003e98  9000              STR      r0,[sp,#0]
;;;6618   			 
;;;6619   				temp=LPC_RTC->YEAR;
003e9a  4e6d              LDR      r6,|L1.16464|
003e9c  8bb0              LDRH     r0,[r6,#0x1c]
003e9e  9001              STR      r0,[sp,#4]
;;;6620   				gran_char((signed char*)&temp,1,99);
003ea0  f04f0263          MOV      r2,#0x63
003ea4  f04f0101          MOV      r1,#1
003ea8  a801              ADD      r0,sp,#4
003eaa  f7fffffe          BL       gran_char
;;;6621   				*((char*)(&(bat[in]._wrk_date[0])))=temp;
003eae  f104041c          ADD      r4,r4,#0x1c
003eb2  f89d0004          LDRB     r0,[sp,#4]
003eb6  7620              STRB     r0,[r4,#0x18]
;;;6622   			
;;;6623   				temp=LPC_RTC->MONTH;
003eb8  7e30              LDRB     r0,[r6,#0x18]
003eba  9001              STR      r0,[sp,#4]
;;;6624   				gran_char((signed char*)&temp,1,12);
003ebc  f04f020c          MOV      r2,#0xc
003ec0  f04f0101          MOV      r1,#1
003ec4  a801              ADD      r0,sp,#4
003ec6  f7fffffe          BL       gran_char
;;;6625   				*(((char*)(&(bat[in]._wrk_date[0])))+1)=temp;
003eca  f89d0004          LDRB     r0,[sp,#4]
003ece  7660              STRB     r0,[r4,#0x19]
;;;6626   			
;;;6627   				temp=LPC_RTC->DOM;
003ed0  7b30              LDRB     r0,[r6,#0xc]
003ed2  9001              STR      r0,[sp,#4]
;;;6628   				gran_char((signed char*)&temp,1,31);
003ed4  221f              MOVS     r2,#0x1f
003ed6  2101              MOVS     r1,#1
003ed8  a801              ADD      r0,sp,#4
003eda  f7fffffe          BL       gran_char
;;;6629   				*(((char*)(&(bat[in]._wrk_date[0])))+2)=temp;			
003ede  f89d0004          LDRB     r0,[sp,#4]
003ee2  76a0              STRB     r0,[r4,#0x1a]
;;;6630   				
;;;6631   				*(((char*)(&(bat[in]._wrk_date[0])))+3)=*((char*)&temp_temp);
003ee4  f89d0000          LDRB     r0,[sp,#0]
003ee8  76e0              STRB     r0,[r4,#0x1b]
;;;6632   
;;;6633   				temp=LPC_RTC->HOUR;
003eea  7a30              LDRB     r0,[r6,#8]
003eec  9001              STR      r0,[sp,#4]
;;;6634   				gran_char((signed char*)&temp,0,23);
003eee  e000              B        |L1.16114|
                  |L1.16112|
003ef0  e0c9              B        |L1.16518|
                  |L1.16114|
003ef2  2217              MOVS     r2,#0x17
003ef4  2100              MOVS     r1,#0
003ef6  a801              ADD      r0,sp,#4
003ef8  f7fffffe          BL       gran_char
;;;6635   				*((char*)(&(bat[in]._wrk_date[1])))=temp;
003efc  f89d0004          LDRB     r0,[sp,#4]
003f00  7720              STRB     r0,[r4,#0x1c]
;;;6636                  	
;;;6637   				temp=LPC_RTC->MIN;
003f02  7930              LDRB     r0,[r6,#4]
003f04  9001              STR      r0,[sp,#4]
;;;6638   				gran_char((signed char*)&temp,0,59);
003f06  e0a5              B        |L1.16468|
                  |L1.16136|
003f08  4176746f          DCB      "Avtomat #4 is OFF",0
003f0c  6d617420
003f10  23342069
003f14  73204f46
003f18  4600    
003f1a  00                DCB      0
003f1b  00                DCB      0
                  |L1.16156|
003f1c  4176746f          DCB      "Avtomat #5 is OFF",0
003f20  6d617420
003f24  23352069
003f28  73204f46
003f2c  4600    
003f2e  00                DCB      0
003f2f  00                DCB      0
                  |L1.16176|
003f30  4176746f          DCB      "Avtomat #6 is OFF",0
003f34  6d617420
003f38  23362069
003f3c  73204f46
003f40  4600    
003f42  00                DCB      0
003f43  00                DCB      0
                  |L1.16196|
003f44  4176746f          DCB      "Avtomat #7 is OFF",0
003f48  6d617420
003f4c  23372069
003f50  73204f46
003f54  4600    
003f56  00                DCB      0
003f57  00                DCB      0
                  |L1.16216|
003f58  4176746f          DCB      "Avtomat #8 is OFF",0
003f5c  6d617420
003f60  23382069
003f64  73204f46
003f68  4600    
003f6a  00                DCB      0
003f6b  00                DCB      0
                  |L1.16236|
003f6c  4176746f          DCB      "Avtomat #9 is OFF",0
003f70  6d617420
003f74  23392069
003f78  73204f46
003f7c  4600    
003f7e  00                DCB      0
003f7f  00                DCB      0
                  |L1.16256|
003f80  4176746f          DCB      "Avtomat #1 is ON ",0
003f84  6d617420
003f88  23312069
003f8c  73204f4e
003f90  2000    
003f92  00                DCB      0
003f93  00                DCB      0
                  |L1.16276|
003f94  4176746f          DCB      "Avtomat #2 is ON ",0
003f98  6d617420
003f9c  23322069
003fa0  73204f4e
003fa4  2000    
003fa6  00                DCB      0
003fa7  00                DCB      0
                  |L1.16296|
003fa8  4176746f          DCB      "Avtomat #3 is ON ",0
003fac  6d617420
003fb0  23332069
003fb4  73204f4e
003fb8  2000    
003fba  00                DCB      0
003fbb  00                DCB      0
                  |L1.16316|
003fbc  4176746f          DCB      "Avtomat #4 is ON ",0
003fc0  6d617420
003fc4  23342069
003fc8  73204f4e
003fcc  2000    
003fce  00                DCB      0
003fcf  00                DCB      0
                  |L1.16336|
003fd0  4176746f          DCB      "Avtomat #5 is ON ",0
003fd4  6d617420
003fd8  23352069
003fdc  73204f4e
003fe0  2000    
003fe2  00                DCB      0
003fe3  00                DCB      0
                  |L1.16356|
003fe4  4176746f          DCB      "Avtomat #6 is ON ",0
003fe8  6d617420
003fec  23362069
003ff0  73204f4e
003ff4  2000    
003ff6  00                DCB      0
003ff7  00                DCB      0
                  |L1.16376|
003ff8  4176746f          DCB      "Avtomat #7 is ON ",0
003ffc  6d617420
004000  23372069
004004  73204f4e
004008  2000    
00400a  00                DCB      0
00400b  00                DCB      0
                  |L1.16396|
00400c  4176746f          DCB      "Avtomat #8 is ON ",0
004010  6d617420
004014  23382069
004018  73204f4e
00401c  2000    
00401e  00                DCB      0
00401f  00                DCB      0
                  |L1.16416|
004020  4176746f          DCB      "Avtomat #9 is ON ",0
004024  6d617420
004028  23392069
00402c  73204f4e
004030  2000    
004032  00                DCB      0
004033  00                DCB      0
                  |L1.16436|
                          DCD      bat
                  |L1.16440|
                          DCD      mess_data
                  |L1.16444|
                          DCD      ||area_number.25||+0x9c
                  |L1.16448|
                          DCD      IZMAX
                  |L1.16452|
                          DCD      main_10Hz_cnt
                  |L1.16456|
                          DCD      IKB
                  |L1.16460|
                          DCD      bat_u_old_cnt
                  |L1.16464|
                          DCD      0x40024020
                  |L1.16468|
004054  223b              MOVS     r2,#0x3b
004056  2100              MOVS     r1,#0
004058  a801              ADD      r0,sp,#4
00405a  f7fffffe          BL       gran_char
;;;6639   				*(((char*)(&(bat[in]._wrk_date[1])))+1)=temp;
00405e  f89d0004          LDRB     r0,[sp,#4]
004062  7760              STRB     r0,[r4,#0x1d]
;;;6640   	          
;;;6641   				temp=LPC_RTC->SEC;
004064  7830              LDRB     r0,[r6,#0]
004066  9001              STR      r0,[sp,#4]
;;;6642   				gran_char((signed char*)&temp,0,59);
004068  223b              MOVS     r2,#0x3b
00406a  2100              MOVS     r1,#0
00406c  a801              ADD      r0,sp,#4
00406e  f7fffffe          BL       gran_char
;;;6643   				*(((char*)(&(bat[in]._wrk_date[1])))+2)=temp;
004072  f89d0004          LDRB     r0,[sp,#4]
004076  77a0              STRB     r0,[r4,#0x1e]
;;;6644   			
;;;6645   				*(((char*)(&(bat[in]._wrk_date[1])))+3)=*(((char*)&temp_temp)+1);
004078  f89d0001          LDRB     r0,[sp,#1]
00407c  77e0              STRB     r0,[r4,#0x1f]
;;;6646   				bat[in]._Iintegr=0;		//—˜ÂÚ˜ËÍ ‰ÂÒˇÚÍÓ‚ ÏËÎË‡ÏÔÂÒÂÍÛÌ‰
00407e  8027              STRH     r7,[r4,#0]
;;;6647   				bat[in]._Iintegr_=0;	//—˜ÂÚ˜ËÍ ÒÓÚÂÌ ÏËÎË‡ÏÔÂ˜‡ÒÓ‚
004080  8067              STRH     r7,[r4,#2]
004082  f1a4041c          SUB      r4,r4,#0x1c
                  |L1.16518|
;;;6648   				}
;;;6649   	
;;;6650   			}
;;;6651   
;;;6652   		}
;;;6653   	else bat[in]._cnt_wrk=0;	 
;;;6654   	
;;;6655   	}					
;;;6656   
;;;6657   /*
;;;6658   if(Ibat>=(-IKB))
;;;6659   	{
;;;6660   	if(cnt_wrk<10)
;;;6661   		{
;;;6662   		cnt_wrk++;
;;;6663   		if((cnt_wrk>=10)&&(wrk!=wrkOFF)) 
;;;6664   			{
;;;6665   			wrk=wrkOFF;
;;;6666   			//beep_init(0x7L,'O');
;;;6667   			wrk_mem_hndl(ibat_integr);
;;;6668   			}
;;;6669   		}
;;;6670   	else cnt_wrk=10;	
;;;6671   	}	
;;;6672   
;;;6673   else if((Ibat<(-IKB))&&(spc_stat!=spc_KE))
;;;6674   	{
;;;6675   	if(cnt_wrk)
;;;6676   		{
;;;6677   		cnt_wrk--;
;;;6678   		if((cnt_wrk==0)&&(wrk!=wrkON)) 
;;;6679   			{
;;;6680   			char temp;
;;;6681   			signed short temp_temp;
;;;6682   			temp_temp=ubat_old[((ubat_old_cnt+1)&0x07)];
;;;6683   			 
;;;6684   			wrk=wrkON;
;;;6685   			
;;;6686   			temp=_year;
;;;6687   			gran_char(&temp,1,99);
;;;6688   			*((char*)(&(wrk_date[0])))=temp;
;;;6689   			
;;;6690   			temp=_month;
;;;6691   			gran_char(&temp,1,12);
;;;6692   			*(((char*)(&(wrk_date[0])))+1)=temp;
;;;6693   			
;;;6694   			temp=_date;
;;;6695   			gran_char(&temp,1,31);
;;;6696   			*(((char*)(&(wrk_date[0])))+2)=temp;			
;;;6697   				
;;;6698   			*(((char*)(&(wrk_date[0])))+3)=*((char*)&temp_temp);
;;;6699   
;;;6700   			temp=_hour;
;;;6701   			gran_char(&temp,0,23);
;;;6702   			*((char*)(&(wrk_date[1])))=temp;
;;;6703                  
;;;6704   			temp=_min;
;;;6705   			gran_char(&temp,0,59);
;;;6706   			*(((char*)(&(wrk_date[1])))+1)=temp;
;;;6707   	          
;;;6708   			temp=_sec;
;;;6709   			gran_char(&temp,0,59);
;;;6710   			*(((char*)(&(wrk_date[1])))+2)=temp;
;;;6711   			
;;;6712   			*(((char*)(&(wrk_date[1])))+3)=*(((char*)&temp_temp)+1);
;;;6713   
;;;6714   			
;;;6715   			//beep_init(0xFL,'O'); 
;;;6716   			ibat_integr=0;
;;;6717   			ibat_integr_=0;
;;;6718   			}
;;;6719   		}
;;;6720   	else cnt_wrk=0;	 
;;;6721   	
;;;6722   	}
;;;6723   if(wrk==wrkON)
;;;6724   	{
;;;6725   	ibat_integr_+=-Ibat;
;;;6726   	if(ibat_integr_>=SEC_IN_HOUR*10L)
;;;6727   		{
;;;6728   		ibat_integr_-=SEC_IN_HOUR*10L;
;;;6729   		ibat_integr++;
;;;6730   		}
;;;6731   	}
;;;6732   
;;;6733   */
;;;6734   
;;;6735   
;;;6736   /*if(bat[in]._cnt_to_block)
;;;6737   	{
;;;6738   	bat[in]._cnt_to_block--;
;;;6739   	if(!(bat[in]._cnt_to_block))
;;;6740   		{
;;;6741   		//bat[in]._rel_stat=1;
;;;6742   		}
;;;6743   	}
;;;6744   */
;;;6745   
;;;6746   
;;;6747   
;;;6748   
;;;6749   //unsigned int tempUI,tempUI_;
;;;6750   //unsigned int b_zar; 
;;;6751   //char i;
;;;6752   //Ibat[0]=5000;                     
;;;6753   
;;;6754   
;;;6755                               
;;;6756   if(bat[in]._time_cnt==0)
;;;6757   	{
;;;6758   	bat[in]._zar_cnt+=(signed long)bat[in]._Ib;
;;;6759   	
;;;6760   	if(bat[in]._zar_cnt>=AH_CONSTANT)
004086  f64848a0          MOV      r8,#0x8ca0
00408a  f894003e          LDRB     r0,[r4,#0x3e]         ;6756
00408e  2800              CMP      r0,#0                 ;6756
004090  d17e              BNE      |L1.16784|
004092  f9b41008          LDRSH    r1,[r4,#8]            ;6758
004096  6960              LDR      r0,[r4,#0x14]         ;6758
004098  4408              ADD      r0,r0,r1              ;6758
00409a  6160              STR      r0,[r4,#0x14]         ;6758
;;;6761   		{
;;;6762   		if(BAT_C_REAL[in]==0x5555) tempUS_=BAT_C_NOM[in];
;;;6763   		else tempUS_=BAT_C_REAL[in];
;;;6764   		
;;;6765   		b_zar=lc640_read_int(ADR_EE_BAT_ZAR_CNT[in]);
00409c  f8df940c          LDR      r9,|L1.17580|
0040a0  f8dfa40c          LDR      r10,|L1.17584|
0040a4  4540              CMP      r0,r8                 ;6760
0040a6  db2a              BLT      |L1.16638|
0040a8  f93a1015          LDRSH    r1,[r10,r5,LSL #1]    ;6762
0040ac  f5a140aa          SUB      r0,r1,#0x5500         ;6762
0040b0  3855              SUBS     r0,r0,#0x55           ;6762
0040b2  d103              BNE      |L1.16572|
0040b4  48ff              LDR      r0,|L1.17588|
0040b6  f8306015          LDRH     r6,[r0,r5,LSL #1]     ;6762
0040ba  e001              B        |L1.16576|
                  |L1.16572|
0040bc  f83a6015          LDRH     r6,[r10,r5,LSL #1]    ;6763
                  |L1.16576|
0040c0  f8390015          LDRH     r0,[r9,r5,LSL #1]
0040c4  f7fffffe          BL       lc640_read_int
0040c8  b280              UXTH     r0,r0
;;;6766   
;;;6767   		if(b_zar<(tempUS_/**10*/))
0040ca  42b0              CMP      r0,r6
0040cc  d20e              BCS      |L1.16620|
;;;6768   			{
;;;6769   			bat[in]._zar_cnt-=AH_CONSTANT;
0040ce  6961              LDR      r1,[r4,#0x14]
0040d0  f5a14100          SUB      r1,r1,#0x8000
0040d4  f5a1614a          SUB      r1,r1,#0xca0
0040d8  6161              STR      r1,[r4,#0x14]
;;;6770   
;;;6771   			lc640_write_int(ADR_EE_BAT_ZAR_CNT[in],b_zar+1);
0040da  f9392015          LDRSH    r2,[r9,r5,LSL #1]
0040de  f1000001          ADD      r0,r0,#1
0040e2  b201              SXTH     r1,r0
0040e4  4610              MOV      r0,r2
0040e6  f7fffffe          BL       lc640_write_int
0040ea  e033              B        |L1.16724|
                  |L1.16620|
;;;6772   			}
;;;6773   		else if(b_zar>(tempUS_/**10*/))  
0040ec  d932              BLS      |L1.16724|
;;;6774   			{
;;;6775   			lc640_write_int(ADR_EE_BAT_ZAR_CNT[in],tempUS_);
0040ee  f9390015          LDRSH    r0,[r9,r5,LSL #1]
0040f2  b231              SXTH     r1,r6
0040f4  f7fffffe          BL       lc640_write_int
;;;6776   			bat[in]._zar_cnt=AH_CONSTANT;
0040f8  f8c48014          STR      r8,[r4,#0x14]
0040fc  e02a              B        |L1.16724|
                  |L1.16638|
;;;6777   
;;;6778   			}
;;;6779   
;;;6780   		}
;;;6781   
;;;6782   	else if(bat[in]._zar_cnt<=-AH_CONSTANT)
0040fe  49ee              LDR      r1,|L1.17592|
004100  4288              CMP      r0,r1
004102  dc27              BGT      |L1.16724|
;;;6783   		{
;;;6784   		if(BAT_C_REAL[in]==0x5555) tempUS_=BAT_C_NOM[in];
004104  f93a1015          LDRSH    r1,[r10,r5,LSL #1]
004108  f5a140aa          SUB      r0,r1,#0x5500
00410c  3855              SUBS     r0,r0,#0x55
00410e  d103              BNE      |L1.16664|
004110  48e8              LDR      r0,|L1.17588|
004112  f8306015          LDRH     r6,[r0,r5,LSL #1]
004116  e001              B        |L1.16668|
                  |L1.16664|
;;;6785   		else tempUS_=BAT_C_REAL[in];
004118  f83a6015          LDRH     r6,[r10,r5,LSL #1]
                  |L1.16668|
;;;6786   		
;;;6787   		b_zar=lc640_read_int(ADR_EE_BAT_ZAR_CNT[in]);
00411c  f8390015          LDRH     r0,[r9,r5,LSL #1]
004120  f7fffffe          BL       lc640_read_int
004124  b280              UXTH     r0,r0
;;;6788   
;;;6789   		if(b_zar>tempUS_)
004126  42b0              CMP      r0,r6
004128  d905              BLS      |L1.16694|
;;;6790   			{
;;;6791   			lc640_write_int(ADR_EE_BAT_ZAR_CNT[in],tempUS_);
00412a  f9390015          LDRSH    r0,[r9,r5,LSL #1]
00412e  b231              SXTH     r1,r6
004130  f7fffffe          BL       lc640_write_int
;;;6792   			b_zar=tempUS_;
004134  4630              MOV      r0,r6
                  |L1.16694|
;;;6793   			}
;;;6794   		if(b_zar)
004136  b158              CBZ      r0,|L1.16720|
;;;6795   			{
;;;6796   			bat[in]._zar_cnt+=AH_CONSTANT;
004138  6961              LDR      r1,[r4,#0x14]
00413a  4441              ADD      r1,r1,r8
00413c  6161              STR      r1,[r4,#0x14]
;;;6797   
;;;6798   			lc640_write_int(ADR_EE_BAT_ZAR_CNT[in],b_zar-1);
00413e  f9392015          LDRSH    r2,[r9,r5,LSL #1]
004142  f1a00001          SUB      r0,r0,#1
004146  b201              SXTH     r1,r0
004148  4610              MOV      r0,r2
00414a  f7fffffe          BL       lc640_write_int
00414e  e001              B        |L1.16724|
                  |L1.16720|
;;;6799   			}
;;;6800   		else 
;;;6801   			{
;;;6802   			bat[in]._zar_cnt=-AH_CONSTANT;
004150  48d9              LDR      r0,|L1.17592|
004152  6160              STR      r0,[r4,#0x14]
                  |L1.16724|
;;;6803   			}
;;;6804   
;;;6805   		}
;;;6806   
;;;6807   			
;;;6808   	tempUL=(unsigned long)lc640_read_int(ADR_EE_BAT_ZAR_CNT[in]);
004154  f8390015          LDRH     r0,[r9,r5,LSL #1]
004158  f7fffffe          BL       lc640_read_int
00415c  4601              MOV      r1,r0
;;;6809   	
;;;6810   	if(BAT_C_REAL[in]==0x5555) tempUL_=(unsigned long)BAT_C_NOM[in];
00415e  f93a0015          LDRSH    r0,[r10,r5,LSL #1]
004162  f5a042aa          SUB      r2,r0,#0x5500
004166  3a55              SUBS     r2,r2,#0x55
004168  d102              BNE      |L1.16752|
00416a  48d2              LDR      r0,|L1.17588|
00416c  f9300015          LDRSH    r0,[r0,r5,LSL #1]
                  |L1.16752|
;;;6811   	else tempUL_=(unsigned long)BAT_C_REAL[in];
;;;6812   		           	
;;;6813   	tempUL*=1000L;
004170  f44f727a          MOV      r2,#0x3e8
004174  fb01f102          MUL      r1,r1,r2
;;;6814   
;;;6815   
;;;6816   	if(tempUL_==0) tempUL=0;
004178  b168              CBZ      r0,|L1.16790|
;;;6817   	else tempUL/=tempUL_;
00417a  fbb1f0f0          UDIV     r0,r1,r0
                  |L1.16766|
;;;6818   
;;;6819   	tempUL/=10L;
00417e  f04f010a          MOV      r1,#0xa
004182  fbb0f0f1          UDIV     r0,r0,r1
;;;6820   
;;;6821   	bat[in]._zar=(unsigned short)tempUL;
004186  8220              STRH     r0,[r4,#0x10]
;;;6822   
;;;6823   	if(BAT_TYPE==1)
004188  48cc              LDR      r0,|L1.17596|
00418a  8800              LDRH     r0,[r0,#0]  ; BAT_TYPE
00418c  2801              CMP      r0,#1
00418e  e000              B        |L1.16786|
                  |L1.16784|
004190  e010              B        |L1.16820|
                  |L1.16786|
004192  d003              BEQ      |L1.16796|
004194  e008              B        |L1.16808|
                  |L1.16790|
004196  f04f0000          MOV      r0,#0                 ;6816
00419a  e7f0              B        |L1.16766|
                  |L1.16796|
;;;6824   		{
;;;6825   		bat[in]._zar=lakb[in]._s_o_c;
00419c  49c8              LDR      r1,|L1.17600|
00419e  9802              LDR      r0,[sp,#8]
0041a0  eb010080          ADD      r0,r1,r0,LSL #2
0041a4  8a40              LDRH     r0,[r0,#0x12]
0041a6  8220              STRH     r0,[r4,#0x10]
                  |L1.16808|
;;;6826   		}
;;;6827   	
;;;6828   	gran((signed short*)&bat[in]._zar,0,100);
0041a8  f1040010          ADD      r0,r4,#0x10
0041ac  2264              MOVS     r2,#0x64
0041ae  2100              MOVS     r1,#0
0041b0  f7fffffe          BL       gran
                  |L1.16820|
;;;6829        }
;;;6830   
;;;6831   
;;;6832   //œÓ‰Ò˜ÂÚ ÚÓÍ‡ ‡Áˇ‰‡ ·‡Ú‡ÂË      
;;;6833   if(bat[in]._wrk==1)
0041b4  7ba0              LDRB     r0,[r4,#0xe]
0041b6  2801              CMP      r0,#1
0041b8  d113              BNE      |L1.16866|
;;;6834   	{
;;;6835   	if(bat[in]._Iintegr<36000)
0041ba  8ba0              LDRH     r0,[r4,#0x1c]
0041bc  4540              CMP      r0,r8
0041be  d20f              BCS      |L1.16864|
;;;6836   		{          
;;;6837   		bat[in]._Iintegr+=abs(bat[in]._Ib);
0041c0  f9b40008          LDRSH    r0,[r4,#8]
0041c4  f7fffffe          BL       abs
0041c8  8ba1              LDRH     r1,[r4,#0x1c]
0041ca  4408              ADD      r0,r0,r1
0041cc  b280              UXTH     r0,r0
0041ce  83a0              STRH     r0,[r4,#0x1c]
;;;6838   		if(bat[in]._Iintegr>=36000)
0041d0  4540              CMP      r0,r8
0041d2  d306              BCC      |L1.16866|
;;;6839   			{
;;;6840   			bat[in]._Iintegr=0;		//—˜ÂÚ˜ËÍ ‰ÂÒˇÚÍÓ‚ ÏËÎË‡ÏÔÂÒÂÍÛÌ‰
0041d4  83a7              STRH     r7,[r4,#0x1c]
;;;6841   			bat[in]._Iintegr_++;	//—˜ÂÚ˜ËÍ ÒÓÚÂÌ ÏËÎË‡ÏÔÂ˜‡ÒÓ‚
0041d6  8be0              LDRH     r0,[r4,#0x1e]
0041d8  f1000001          ADD      r0,r0,#1
0041dc  83e0              STRH     r0,[r4,#0x1e]
0041de  e000              B        |L1.16866|
                  |L1.16864|
;;;6842   			}
;;;6843   		}
;;;6844   	else 
;;;6845   		{
;;;6846   		bat[in]._Iintegr=0;
0041e0  83a7              STRH     r7,[r4,#0x1c]
                  |L1.16866|
;;;6847   		}	
;;;6848   	} 
;;;6849   	    
;;;6850   #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;6851   if((t_ext[0]>TBATSIGN)&&(!ND_EXT[0]))	
0041e2  f8df92e0          LDR      r9,|L1.17604|
0041e6  49b8              LDR      r1,|L1.17608|
0041e8  f8dfa2e0          LDR      r10,|L1.17612|
0041ec  f9b90000          LDRSH    r0,[r9,#0]  ; t_ext
0041f0  f9b11000          LDRSH    r1,[r1,#0]  ; TBATSIGN
0041f4  4288              CMP      r0,r1
0041f6  dd02              BLE      |L1.16894|
0041f8  f89a0000          LDRB     r0,[r10,#0]  ; ND_EXT
0041fc  b3e8              CBZ      r0,|L1.17018|
                  |L1.16894|
;;;6852   	{
;;;6853   	bat[in]._sign_temper_cnt++;
;;;6854   	}
;;;6855   else 
;;;6856   	{
;;;6857   	bat[in]._sign_temper_cnt--;
0041fe  f8b40040          LDRH     r0,[r4,#0x40]
004202  f1a00001          SUB      r0,r0,#1
004206  f8a40040          STRH     r0,[r4,#0x40]
                  |L1.16906|
;;;6858   	}
;;;6859   #else
;;;6860   if((bat[in]._Tb>TBATSIGN)&&(!bat[in]._nd))	
;;;6861   	{
;;;6862   	bat[in]._sign_temper_cnt++;
;;;6863   	}
;;;6864   else 
;;;6865   	{
;;;6866   	bat[in]._sign_temper_cnt--;
;;;6867   	}
;;;6868   #endif
;;;6869   gran(&bat[in]._sign_temper_cnt,0,600);
00420a  f1040040          ADD      r0,r4,#0x40
00420e  f44f7216          MOV      r2,#0x258
004212  2100              MOVS     r1,#0
004214  f7fffffe          BL       gran
;;;6870   if(bat[in]._sign_temper_cnt>=590)	bat[in]._temper_stat|=(1<<0);
004218  f9b40040          LDRSH    r0,[r4,#0x40]
00421c  f240264e          MOV      r6,#0x24e
004220  42b0              CMP      r0,r6
004222  db05              BLT      |L1.16944|
004224  f894103f          LDRB     r1,[r4,#0x3f]
004228  f0410101          ORR      r1,r1,#1
00422c  f884103f          STRB     r1,[r4,#0x3f]
                  |L1.16944|
;;;6871   if(bat[in]._sign_temper_cnt<=10)	bat[in]._temper_stat&=~(1<<0);
004230  280a              CMP      r0,#0xa
004232  dc05              BGT      |L1.16960|
004234  f894003f          LDRB     r0,[r4,#0x3f]
004238  f0200001          BIC      r0,r0,#1
00423c  f884003f          STRB     r0,[r4,#0x3f]
                  |L1.16960|
;;;6872   
;;;6873   #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;6874   if((t_ext[0]>TBATMAX)&&(!ND_EXT[0]))	
004240  49a3              LDR      r1,|L1.17616|
004242  f9b90000          LDRSH    r0,[r9,#0]  ; t_ext
004246  f9b11000          LDRSH    r1,[r1,#0]  ; TBATMAX
00424a  4288              CMP      r0,r1
00424c  dd02              BLE      |L1.16980|
00424e  f89a0000          LDRB     r0,[r10,#0]  ; ND_EXT
004252  b3b0              CBZ      r0,|L1.17090|
                  |L1.16980|
;;;6875   	{
;;;6876   	bat[in]._max_temper_cnt++;
;;;6877   	}
;;;6878   else 
;;;6879   	{
;;;6880   	bat[in]._max_temper_cnt--;
004254  f8b40042          LDRH     r0,[r4,#0x42]
004258  f1a00001          SUB      r0,r0,#1
00425c  f8a40042          STRH     r0,[r4,#0x42]
                  |L1.16992|
;;;6881   	}
;;;6882   #else
;;;6883   if((bat[in]._Tb>TBATMAX)&&(!bat[in]._nd))	
;;;6884   	{
;;;6885   	bat[in]._max_temper_cnt++;
;;;6886   	}
;;;6887   else 
;;;6888   	{
;;;6889   	bat[in]._max_temper_cnt--;
;;;6890   	}
;;;6891   #endif
;;;6892   
;;;6893   gran(&bat[in]._max_temper_cnt,0,600);
004260  f44f7916          MOV      r9,#0x258
004264  f1040042          ADD      r0,r4,#0x42
004268  464a              MOV      r2,r9
00426a  2100              MOVS     r1,#0
00426c  f7fffffe          BL       gran
;;;6894   if(bat[in]._max_temper_cnt>=590)	bat[in]._temper_stat|=(1<<1);
004270  f9b40042          LDRSH    r0,[r4,#0x42]
004274  42b0              CMP      r0,r6
004276  db07              BLT      |L1.17032|
004278  e000              B        |L1.17020|
                  |L1.17018|
00427a  e023              B        |L1.17092|
                  |L1.17020|
00427c  f894103f          LDRB     r1,[r4,#0x3f]
004280  f0410102          ORR      r1,r1,#2
004284  f884103f          STRB     r1,[r4,#0x3f]
                  |L1.17032|
;;;6895   if(bat[in]._max_temper_cnt<=10)	bat[in]._temper_stat&=~(1<<1);
004288  280a              CMP      r0,#0xa
00428a  dc05              BGT      |L1.17048|
00428c  f894003f          LDRB     r0,[r4,#0x3f]
004290  f0200002          BIC      r0,r0,#2
004294  f884003f          STRB     r0,[r4,#0x3f]
                  |L1.17048|
;;;6896   
;;;6897   
;;;6898   
;;;6899   //œÓ‰Ò˜ÂÚ Ì‡‡·ÓÚÍË ·‡Ú‡ÂË
;;;6900   if(bat[in]._resurs_cnt<36000)
004298  6c60              LDR      r0,[r4,#0x44]
00429a  4540              CMP      r0,r8
00429c  da20              BGE      |L1.17120|
;;;6901   	{               
;;;6902   	bat[in]._resurs_cnt++;
00429e  f1000001          ADD      r0,r0,#1
0042a2  6460              STR      r0,[r4,#0x44]
;;;6903   	if(bat[in]._resurs_cnt>=36000)
0042a4  4540              CMP      r0,r8
0042a6  db1c              BLT      |L1.17122|
;;;6904   		{
;;;6905   		bat[in]._resurs_cnt=0;
0042a8  6467              STR      r7,[r4,#0x44]
;;;6906   		lc640_write_int(ADR_EE_BAT_RESURS[in],lc640_read_int(ADR_EE_BAT_RESURS[in])+1);
0042aa  4e8a              LDR      r6,|L1.17620|
0042ac  f8360015          LDRH     r0,[r6,r5,LSL #1]
0042b0  f7fffffe          BL       lc640_read_int
0042b4  1c40              ADDS     r0,r0,#1
0042b6  b201              SXTH     r1,r0
0042b8  f9360015          LDRSH    r0,[r6,r5,LSL #1]
0042bc  f7fffffe          BL       lc640_write_int
0042c0  e00f              B        |L1.17122|
                  |L1.17090|
0042c2  e006              B        |L1.17106|
                  |L1.17092|
0042c4  f8b40040          LDRH     r0,[r4,#0x40]         ;6853
0042c8  f1000001          ADD      r0,r0,#1              ;6853
0042cc  f8a40040          STRH     r0,[r4,#0x40]         ;6853
0042d0  e79b              B        |L1.16906|
                  |L1.17106|
0042d2  f8b40042          LDRH     r0,[r4,#0x42]         ;6876
0042d6  f1000001          ADD      r0,r0,#1              ;6876
0042da  f8a40042          STRH     r0,[r4,#0x42]         ;6876
0042de  e7bf              B        |L1.16992|
                  |L1.17120|
;;;6907   		}
;;;6908   	}
;;;6909   else bat[in]._resurs_cnt=0;
0042e0  6467              STR      r7,[r4,#0x44]
                  |L1.17122|
;;;6910   
;;;6911   
;;;6912   #ifndef UKU_220_V2
;;;6913   #ifndef UKU_GLONASS
;;;6914   #ifndef UKU_6U
;;;6915   //#ifndef UKU_220
;;;6916   if(UBM_AV)
0042e2  4e7d              LDR      r6,|L1.17624|
0042e4  8830              LDRH     r0,[r6,#0]  ; UBM_AV
0042e6  2800              CMP      r0,#0
0042e8  d05e              BEQ      |L1.17320|
;;;6917        {
;;;6918        signed short temp_SS;
;;;6919   #ifdef UKU_220
;;;6920   temp_SS=bat[in]._Ub/2;
;;;6921   #else
;;;6922        if(U0B<600)
0042ea  487c              LDR      r0,|L1.17628|
0042ec  f9b00000          LDRSH    r0,[r0,#0]  ; U0B
0042f0  4548              CMP      r0,r9
0042f2  da08              BGE      |L1.17158|
;;;6923             {
;;;6924             temp_SS=bat[in]._Ub/4;
0042f4  f9b40002          LDRSH    r0,[r4,#2]
0042f8  ea4f71e0          ASR      r1,r0,#31
0042fc  eb007091          ADD      r0,r0,r1,LSR #30
004300  ea4f00a0          ASR      r0,r0,#2
004304  e006              B        |L1.17172|
                  |L1.17158|
;;;6925             }
;;;6926        else temp_SS=bat[in]._Ub/5;
004306  f9b40002          LDRSH    r0,[r4,#2]
00430a  f04f0105          MOV      r1,#5
00430e  fb90f0f1          SDIV     r0,r0,r1
004312  b200              SXTH     r0,r0
                  |L1.17172|
;;;6927   	
;;;6928   	temp_SS+=temp_SS;     
004314  ea4f0040          LSL      r0,r0,#1
;;;6929   #endif
;;;6930        temp_SS-=(bat[in]._Ubm);
004318  88a1              LDRH     r1,[r4,#4]
00431a  eba00001          SUB      r0,r0,r1
00431e  b200              SXTH     r0,r0
;;;6931   
;;;6932        temp_SS=abs(temp_SS);
004320  f7fffffe          BL       abs
;;;6933   
;;;6934        temp_SS*=10;
004324  eb000080          ADD      r0,r0,r0,LSL #2
004328  ea4f0040          LSL      r0,r0,#1
00432c  b200              SXTH     r0,r0
;;;6935   
;;;6936        temp_SS/=12;
00432e  f04f010c          MOV      r1,#0xc
004332  fb90f0f1          SDIV     r0,r0,r1
004336  b200              SXTH     r0,r0
;;;6937   
;;;6938        bat[in]._dUbm=temp_SS;
004338  80e0              STRH     r0,[r4,#6]
;;;6939   
;;;6940   
;;;6941        if(	(bat[in]._dUbm>UBM_AV) &&
00433a  f9b61000          LDRSH    r1,[r6,#0]  ; UBM_AV
00433e  4288              CMP      r0,r1
004340  dd34              BLE      |L1.17324|
;;;6942   		(abs(bat[in]._Ib)<(5*IKB)) &&
004342  f9b40008          LDRSH    r0,[r4,#8]
004346  f7fffffe          BL       abs
00434a  4601              MOV      r1,r0
00434c  4864              LDR      r0,|L1.17632|
00434e  f9b00000          LDRSH    r0,[r0,#0]  ; IKB
004352  eb000080          ADD      r0,r0,r0,LSL #2
004356  4281              CMP      r1,r0
004358  da28              BGE      |L1.17324|
;;;6943   		(bat[in]._Ub>((short)(((long)USIGN*115)/100))) &&
00435a  4862              LDR      r0,|L1.17636|
00435c  2173              MOVS     r1,#0x73
00435e  f9b00000          LDRSH    r0,[r0,#0]  ; USIGN
004362  4348              MULS     r0,r1,r0
004364  fb90f0fb          SDIV     r0,r0,r11
004368  f9b41002          LDRSH    r1,[r4,#2]
00436c  b200              SXTH     r0,r0
00436e  4288              CMP      r0,r1
004370  da1c              BGE      |L1.17324|
;;;6944   		(!(bat[in]._av & 2))  )
004372  f894003d          LDRB     r0,[r4,#0x3d]
004376  0780              LSLS     r0,r0,#30
004378  d418              BMI      |L1.17324|
;;;6945   		{
;;;6946   		bat[in]._cnt_as++;
00437a  f8b40048          LDRH     r0,[r4,#0x48]
00437e  f1000001          ADD      r0,r0,#1
004382  b200              SXTH     r0,r0
004384  f8a40048          STRH     r0,[r4,#0x48]
;;;6947   		if(bat[in]._cnt_as==3000)
004388  f5a06130          SUB      r1,r0,#0xb00
00438c  39b8              SUBS     r1,r1,#0xb8
00438e  d103              BNE      |L1.17304|
;;;6948   			{
;;;6949   			avar_bat_as_hndl(in,1);
004390  2101              MOVS     r1,#1
004392  4628              MOV      r0,r5
004394  f7fffffe          BL       avar_bat_as_hndl
                  |L1.17304|
;;;6950   			}
;;;6951   		if(bat[in]._cnt_as>=3005) bat[in]._cnt_as=3005;
004398  f9b41048          LDRSH    r1,[r4,#0x48]
00439c  f64030bd          MOV      r0,#0xbbd
0043a0  4281              CMP      r1,r0
0043a2  db01              BLT      |L1.17320|
0043a4  f8a40048          STRH     r0,[r4,#0x48]
                  |L1.17320|
;;;6952   		}
;;;6953   	else 
;;;6954   		{
;;;6955   		bat[in]._cnt_as=0;
;;;6956   		}
;;;6957        
;;;6958        }
;;;6959   #endif 
;;;6960   #endif 
;;;6961   #endif
;;;6962   
;;;6963   }
0043a8  e8bd8ffe          POP      {r1-r11,pc}
                  |L1.17324|
0043ac  f8a47048          STRH     r7,[r4,#0x48]         ;6955
0043b0  e7fa              B        |L1.17320|
;;;6964   
                          ENDP

                  bat_hndl_zvu PROC
;;;6966   //-----------------------------------------------
;;;6967   void bat_hndl_zvu(void)
0043b2  e92d43f0          PUSH     {r4-r9,lr}
;;;6968   {
0043b6  b087              SUB      sp,sp,#0x1c
;;;6969   char i;
;;;6970   short bat_hndl_i_temp;
;;;6971   const long bat_hndl_t_razr_const[7]={600L,1800L,3600L,10800L,18000L,36000L,72000L};
0043b8  f04f021c          MOV      r2,#0x1c
0043bc  494a              LDR      r1,|L1.17640|
0043be  4668              MOV      r0,sp
0043c0  f7fffffe          BL       __aeabi_memcpy4
;;;6972   
;;;6973   //Ib_ips_termokompensat=-1051;
;;;6974    
;;;6975   if(bat_hndl_zvu_init==0)
0043c4  4e49              LDR      r6,|L1.17644|
;;;6976   	{
;;;6977   	//»ÌËˆË‡ÎËÁ‡ˆËˇ ÔË ‚ÍÎ˛˜ÂÌËË ÒËÒÚÂÏ˚
;;;6978   	bat_hndl_zvu_Q=(long)lc640_read_int(EE_BAT1_ZAR_CNT);
0043c6  f44f70ef          MOV      r0,#0x1de
0043ca  f1060480          ADD      r4,r6,#0x80
0043ce  7871              LDRB     r1,[r6,#1]            ;6975  ; bat_hndl_zvu_init
0043d0  2900              CMP      r1,#0                 ;6975
0043d2  d068              BEQ      |L1.17574|
;;;6979   	if((bat_hndl_zvu_Q>100L)||(bat_hndl_zvu_Q<0L)) bat_hndl_zvu_Q=100L;
;;;6980   	bat_hndl_zvu_Q*=10000L;
;;;6981   
;;;6982   	bat_hndl_zvu_init=1;
;;;6983   	}
;;;6984   else 
;;;6985   	{
;;;6986   	if(Ib_ips_termokompensat<-IKB)
0043d4  4a42              LDR      r2,|L1.17632|
0043d6  4946              LDR      r1,|L1.17648|
;;;6987   		{	
;;;6988   		bat_hndl_i=-Ib_ips_termokompensat;
;;;6989   		I_from_t_table[0]=BAT_C_POINT_1_6*6; //“ÓÍ ÔË ÍÓÚÓÓÏ ·‡Ú‡Âˇ ‡Áˇ‰ËÚÒˇ Á‡ 1/6 ˜‡Ò‡ (0.1¿)
;;;6990   		I_from_t_table[1]=BAT_C_POINT_1_2*2; //“ÓÍ ÔË ÍÓÚÓÓÏ ·‡Ú‡Âˇ ‡Áˇ‰ËÚÒˇ Á‡ 1/2 ˜‡Ò‡ (0.1¿)
;;;6991   		I_from_t_table[2]=BAT_C_POINT_1; //“ÓÍ ÔË ÍÓÚÓÓÏ ·‡Ú‡Âˇ ‡Áˇ‰ËÚÒˇ Á‡ 1 ˜‡Ò (0.1¿)
;;;6992   		I_from_t_table[3]=BAT_C_POINT_3/3; //“ÓÍ ÔË ÍÓÚÓÓÏ ·‡Ú‡Âˇ ‡Áˇ‰ËÚÒˇ Á‡ 3 ˜‡Ò‡ (0.1¿)
;;;6993   		I_from_t_table[4]=BAT_C_POINT_5/5; //“ÓÍ ÔË ÍÓÚÓÓÏ ·‡Ú‡Âˇ ‡Áˇ‰ËÚÒˇ Á‡ 5 ˜‡ÒÓ‚ (0.1¿)
;;;6994   		I_from_t_table[5]=BAT_C_POINT_10/10; //“ÓÍ ÔË ÍÓÚÓÓÏ ·‡Ú‡Âˇ ‡Áˇ‰ËÚÒˇ Á‡ 10 ˜‡ÒÓ‚ (0.1¿)
;;;6995   		I_from_t_table[6]=BAT_C_POINT_20/20; //“ÓÍ ÔË ÍÓÚÓÓÏ ·‡Ú‡Âˇ ‡Áˇ‰ËÚÒˇ Á‡ 20 ˜‡ÒÓ‚ (0.1¿)
;;;6996   		
;;;6997   		bat_hndl_i_temp=bat_hndl_i/10;
;;;6998   		for(i=0;i<7;i++)
;;;6999   			{
;;;7000   			if(bat_hndl_i_temp>=I_from_t_table[i])
;;;7001   				{
;;;7002   				break;
;;;7003   				}
;;;7004   			}
;;;7005   		 if(i==0) bat_hndl_t_razr=bat_hndl_t_razr_const[0];
;;;7006   		 else if((i>=1)&&(i<7))
;;;7007   		 	{
;;;7008   			short i1,i2;
;;;7009   			i1=I_from_t_table[i-1]-bat_hndl_i_temp;
;;;7010   			i2=I_from_t_table[i-1]-I_from_t_table[i];
;;;7011   			bat_hndl_t_razr=bat_hndl_t_razr_const[i]-bat_hndl_t_razr_const[i-1];
;;;7012   			bat_hndl_t_razr*=(long)i1;
;;;7013   			bat_hndl_t_razr/=(long)i2;
;;;7014   			bat_hndl_t_razr+=bat_hndl_t_razr_const[i-1];
;;;7015   			}
;;;7016   		else if(i>=7)
;;;7017   			{
;;;7018   			bat_hndl_t_razr=bat_hndl_t_razr_const[6];
;;;7019   			}
;;;7020   		bat_hndl_proc_razr=1000000L/bat_hndl_t_razr;
0043d8  4f47              LDR      r7,|L1.17656|
0043da  f9b23000          LDRSH    r3,[r2,#0]            ;6986  ; IKB
0043de  4a45              LDR      r2,|L1.17652|
0043e0  f9b11000          LDRSH    r1,[r1,#0]            ;6986  ; Ib_ips_termokompensat
0043e4  f1c30c00          RSB      r12,r3,#0             ;6986
0043e8  f9b25000          LDRSH    r5,[r2,#0]            ;6995
0043ec  4622              MOV      r2,r4                 ;6978
0043ee  4561              CMP      r1,r12                ;6986
0043f0  6bd2              LDR      r2,[r2,#0x3c]         ;6978
0043f2  da59              BGE      |L1.17576|
0043f4  f1c10100          RSB      r1,r1,#0              ;6988
0043f8  b209              SXTH     r1,r1                 ;6988
0043fa  f8a61078          STRH     r1,[r6,#0x78]         ;6988
0043fe  4b3f              LDR      r3,|L1.17660|
004400  881b              LDRH     r3,[r3,#0]            ;6989  ; BAT_C_POINT_1_6
004402  eb030343          ADD      r3,r3,r3,LSL #1       ;6989
004406  ea4f0c43          LSL      r12,r3,#1             ;6989
00440a  4b3d              LDR      r3,|L1.17664|
00440c  f8a3c000          STRH     r12,[r3,#0]           ;6989
004410  f8dfc0f0          LDR      r12,|L1.17668|
004414  f8bcc000          LDRH     r12,[r12,#0]          ;6990  ; BAT_C_POINT_1_2
004418  ea4f0c4c          LSL      r12,r12,#1            ;6990
00441c  f8a3c002          STRH     r12,[r3,#2]           ;6990
004420  f8dfc0e4          LDR      r12,|L1.17672|
004424  f8bcc000          LDRH     r12,[r12,#0]          ;6991  ; BAT_C_POINT_1
004428  f8a3c004          STRH     r12,[r3,#4]           ;6991
00442c  f8dfc0dc          LDR      r12,|L1.17676|
004430  f04f0803          MOV      r8,#3                 ;6992
004434  f9bcc000          LDRSH    r12,[r12,#0]          ;6992  ; BAT_C_POINT_3
004438  fb9cfcf8          SDIV     r12,r12,r8            ;6992
00443c  f8a3c006          STRH     r12,[r3,#6]           ;6992
004440  f8dfc0cc          LDR      r12,|L1.17680|
004444  f04f0805          MOV      r8,#5                 ;6993
004448  f9bcc000          LDRSH    r12,[r12,#0]          ;6993  ; BAT_C_POINT_5
00444c  fb9cfcf8          SDIV     r12,r12,r8            ;6993
004450  f8a3c008          STRH     r12,[r3,#8]           ;6993
004454  f8dfc0bc          LDR      r12,|L1.17684|
004458  f04f080a          MOV      r8,#0xa               ;6994
00445c  f9bcc000          LDRSH    r12,[r12,#0]          ;6994  ; BAT_C_POINT_10
004460  fb9cfcf8          SDIV     r12,r12,r8            ;6994
004464  f8a3c00a          STRH     r12,[r3,#0xa]         ;6994
004468  f04f0c14          MOV      r12,#0x14             ;6995
00446c  fb95f5fc          SDIV     r5,r5,r12             ;6995
004470  819d              STRH     r5,[r3,#0xc]          ;6995
004472  fb91f1f8          SDIV     r1,r1,r8              ;6997
004476  b20d              SXTH     r5,r1                 ;6997
004478  f04f0100          MOV      r1,#0                 ;6998
                  |L1.17532|
00447c  f933c011          LDRSH    r12,[r3,r1,LSL #1]    ;7000
004480  45ac              CMP      r12,r5                ;7000
004482  dd04              BLE      |L1.17550|
004484  f1010101          ADD      r1,r1,#1              ;6998
004488  b2c9              UXTB     r1,r1                 ;6998
00448a  2907              CMP      r1,#7                 ;6998
00448c  d3f6              BCC      |L1.17532|
                  |L1.17550|
00448e  b161              CBZ      r1,|L1.17578|
004490  f1a10c01          SUB      r12,r1,#1             ;7006
004494  f1bc0f06          CMP      r12,#6                ;7006
004498  d268              BCS      |L1.17772|
00449a  f833801c          LDRH     r8,[r3,r12,LSL #1]    ;7009
00449e  eba80505          SUB      r5,r8,r5              ;7009
0044a2  b22d              SXTH     r5,r5                 ;7009
0044a4  e038              B        |L1.17688|
                  |L1.17574|
0044a6  e04a              B        |L1.17726|
                  |L1.17576|
0044a8  e07f              B        |L1.17834|
                  |L1.17578|
0044aa  e05c              B        |L1.17766|
                  |L1.17580|
                          DCD      ADR_EE_BAT_ZAR_CNT
                  |L1.17584|
                          DCD      BAT_C_REAL
                  |L1.17588|
                          DCD      BAT_C_NOM
                  |L1.17592|
                          DCD      0xffff7360
                  |L1.17596|
                          DCD      BAT_TYPE
                  |L1.17600|
                          DCD      lakb
                  |L1.17604|
                          DCD      t_ext
                  |L1.17608|
                          DCD      TBATSIGN
                  |L1.17612|
                          DCD      ND_EXT
                  |L1.17616|
                          DCD      TBATMAX
                  |L1.17620|
                          DCD      ADR_EE_BAT_RESURS
                  |L1.17624|
                          DCD      UBM_AV
                  |L1.17628|
                          DCD      U0B
                  |L1.17632|
                          DCD      IKB
                  |L1.17636|
                          DCD      USIGN
                  |L1.17640|
                          DCD      ||area_number.19||+0x4
                  |L1.17644|
                          DCD      ||area_number.25||
                  |L1.17648|
                          DCD      Ib_ips_termokompensat
                  |L1.17652|
                          DCD      BAT_C_POINT_20
                  |L1.17656|
                          DCD      0x000f4240
                  |L1.17660|
                          DCD      BAT_C_POINT_1_6
                  |L1.17664|
                          DCD      ||.bss||+0x440
                  |L1.17668|
                          DCD      BAT_C_POINT_1_2
                  |L1.17672|
                          DCD      BAT_C_POINT_1
                  |L1.17676|
                          DCD      BAT_C_POINT_3
                  |L1.17680|
                          DCD      BAT_C_POINT_5
                  |L1.17684|
                          DCD      BAT_C_POINT_10
                  |L1.17688|
004518  f8333011          LDRH     r3,[r3,r1,LSL #1]     ;7010
00451c  eba80303          SUB      r3,r8,r3              ;7010
004520  fa0ff883          SXTH     r8,r3                 ;7010
004524  f85d9021          LDR      r9,[sp,r1,LSL #2]     ;7011
004528  f85d102c          LDR      r1,[sp,r12,LSL #2]    ;7011
00452c  eba90301          SUB      r3,r9,r1              ;7011
004530  fb03f305          MUL      r3,r3,r5              ;7012
004534  fb93f3f8          SDIV     r3,r3,r8              ;7013
004538  4419              ADD      r1,r1,r3              ;7014
00453a  63a1              STR      r1,[r4,#0x38]         ;7014  ; bat_hndl_t_razr
00453c  e01a              B        |L1.17780|
                  |L1.17726|
00453e  f7fffffe          BL       lc640_read_int
004542  63e0              STR      r0,[r4,#0x3c]         ;6978  ; bat_hndl_zvu_Q
004544  2865              CMP      r0,#0x65              ;6979
004546  d302              BCC      |L1.17742|
004548  f04f0064          MOV      r0,#0x64              ;6979
00454c  63e0              STR      r0,[r4,#0x3c]         ;6979  ; bat_hndl_zvu_Q
                  |L1.17742|
00454e  6be0              LDR      r0,[r4,#0x3c]         ;6980  ; bat_hndl_zvu_Q
004550  f2427110          MOV      r1,#0x2710            ;6980
004554  fb00f001          MUL      r0,r0,r1              ;6980
004558  63e0              STR      r0,[r4,#0x3c]         ;6980  ; bat_hndl_zvu_Q
00455a  f04f0001          MOV      r0,#1                 ;6982
00455e  7070              STRB     r0,[r6,#1]            ;6982
                  |L1.17760|
;;;7021   
;;;7022   		if(bat_hndl_zvu_Q)bat_hndl_zvu_Q-=bat_hndl_proc_razr;
;;;7023   		else bat_hndl_zvu_Q=0L;
;;;7024   
;;;7025   		bat_hndl_t_razr_hour=(short)(bat_hndl_remain_time/3600L);
;;;7026   		bat_hndl_t_razr_min=(short)(bat_hndl_remain_time/60L);
;;;7027   		bat_hndl_t_razr_mininhour=bat_hndl_t_razr_min%60L;
;;;7028   
;;;7029   		}
;;;7030   	else if(Ib_ips_termokompensat>IKB)
;;;7031   		{
;;;7032   		bat_hndl_i=Ib_ips_termokompensat;
;;;7033   		bat_hndl_t_razr=BAT_C_POINT_20*36000L/bat_hndl_i;
;;;7034   		bat_hndl_proc_razr=1000000L/bat_hndl_t_razr;
;;;7035   		if(bat_hndl_zvu_Q<1000000L)bat_hndl_zvu_Q+=bat_hndl_proc_razr;
;;;7036   		else bat_hndl_zvu_Q=1000000L; 
;;;7037   		}
;;;7038   	if((bat_hndl_zvu_Q/10000L)!=lc640_read_int(EE_BAT1_ZAR_CNT)) lc640_write_int(EE_BAT1_ZAR_CNT,bat_hndl_zvu_Q/10000L);
;;;7039   	bat_hndl_remain_time=bat_hndl_zvu_Q/bat_hndl_proc_razr;
;;;7040   	}
;;;7041   };
004560  b007              ADD      sp,sp,#0x1c
004562  e8bd83f0          POP      {r4-r9,pc}
                  |L1.17766|
004566  9900              LDR      r1,[sp,#0]            ;7005
004568  63a1              STR      r1,[r4,#0x38]         ;7005  ; bat_hndl_t_razr
00456a  e003              B        |L1.17780|
                  |L1.17772|
00456c  2907              CMP      r1,#7                 ;7016
00456e  d301              BCC      |L1.17780|
004570  9906              LDR      r1,[sp,#0x18]         ;7018
004572  63a1              STR      r1,[r4,#0x38]         ;7018  ; bat_hndl_t_razr
                  |L1.17780|
004574  6ba1              LDR      r1,[r4,#0x38]         ;7020  ; bat_hndl_t_razr
004576  fb97f1f1          SDIV     r1,r7,r1              ;7020
00457a  6421              STR      r1,[r4,#0x40]         ;7020  ; bat_hndl_proc_razr
00457c  b112              CBZ      r2,|L1.17796|
00457e  eba20101          SUB      r1,r2,r1              ;7022
004582  63e1              STR      r1,[r4,#0x3c]         ;7022  ; bat_hndl_zvu_Q
                  |L1.17796|
004584  6c62              LDR      r2,[r4,#0x44]         ;7025  ; bat_hndl_remain_time
004586  f44f6161          MOV      r1,#0xe10             ;7025
00458a  fb92f1f1          SDIV     r1,r2,r1              ;7025
00458e  f8261f7a          STRH     r1,[r6,#0x7a]!        ;7025
004592  f04f013c          MOV      r1,#0x3c              ;7026
004596  fb92f2f1          SDIV     r2,r2,r1              ;7026
00459a  b212              SXTH     r2,r2                 ;7026
00459c  8072              STRH     r2,[r6,#2]            ;7026
00459e  fb92f3f1          SDIV     r3,r2,r1              ;7027
0045a2  fb012113          MLS      r1,r1,r3,r2           ;7027
0045a6  80b1              STRH     r1,[r6,#4]            ;7027
0045a8  e013              B        |L1.17874|
                  |L1.17834|
0045aa  4299              CMP      r1,r3                 ;7030
0045ac  dd11              BLE      |L1.17874|
0045ae  f8a61078          STRH     r1,[r6,#0x78]         ;7032
0045b2  f64843a0          MOV      r3,#0x8ca0            ;7033
0045b6  fb05f503          MUL      r5,r5,r3              ;7033
0045ba  fb95f1f1          SDIV     r1,r5,r1              ;7033
0045be  63a1              STR      r1,[r4,#0x38]         ;7033  ; bat_hndl_t_razr
0045c0  fb97f1f1          SDIV     r1,r7,r1              ;7034
0045c4  6421              STR      r1,[r4,#0x40]         ;7034  ; bat_hndl_proc_razr
0045c6  42ba              CMP      r2,r7                 ;7035
0045c8  da02              BGE      |L1.17872|
0045ca  4411              ADD      r1,r1,r2              ;7035
0045cc  63e1              STR      r1,[r4,#0x3c]         ;7035  ; bat_hndl_zvu_Q
0045ce  e000              B        |L1.17874|
                  |L1.17872|
0045d0  63e7              STR      r7,[r4,#0x3c]         ;7036  ; bat_hndl_zvu_Q
                  |L1.17874|
0045d2  6be1              LDR      r1,[r4,#0x3c]         ;7038  ; bat_hndl_zvu_Q
0045d4  f2427510          MOV      r5,#0x2710            ;7038
0045d8  fb91f7f5          SDIV     r7,r1,r5              ;7038
0045dc  4606              MOV      r6,r0                 ;7038
0045de  f7fffffe          BL       lc640_read_int
0045e2  4287              CMP      r7,r0                 ;7038
0045e4  d006              BEQ      |L1.17908|
0045e6  6be0              LDR      r0,[r4,#0x3c]         ;7038  ; bat_hndl_zvu_Q
0045e8  fb90f0f5          SDIV     r0,r0,r5              ;7038
0045ec  b201              SXTH     r1,r0                 ;7038
0045ee  4630              MOV      r0,r6                 ;7038
0045f0  f7fffffe          BL       lc640_write_int
                  |L1.17908|
0045f4  e9d4010f          LDRD     r0,r1,[r4,#0x3c]      ;7039
0045f8  fb90f0f1          SDIV     r0,r0,r1              ;7039
0045fc  6460              STR      r0,[r4,#0x44]         ;7039  ; bat_hndl_remain_time
0045fe  e7af              B        |L1.17760|
;;;7042   #endif
                          ENDP

                  u_avt_set_hndl PROC
;;;7046   //”ÒÚ‡ÌÓ‚Í‡ Ì‡ÔˇÊÂÌËˇ ‡‚ÚÓÌÓÏÌÓÈ ‡·ÓÚ˚ ‚ ÔÓÎÛ‡‚ÚÓÏ‡ÚË˜ÂÒÍÓÏ ÂÊËÏÂ
;;;7047   void u_avt_set_hndl(void)
004600  e92d5fff          PUSH     {r0-r12,lr}
;;;7048   {
;;;7049   if(uavt_set_stat==uassSTEP1)
004604  4dff              LDR      r5,|L1.18948|
;;;7050   	{
;;;7051   	char i,find_succes;
;;;7052   
;;;7053   	//u_max_temp=U_AVT+10;//(short)((((long)U_AVT)*101U)/100U);
;;;7054   	//u_min_temp=U_AVT-10;//(short)((((long)U_AVT)*99U)/100U);
;;;7055   	if(uavt_set_stat_old!=uavt_set_stat)
;;;7056   		{
;;;7057   		uavt_set_error_cnt=60;
;;;7058   		}
;;;7059   	//mess_send(MESS2UNECC_HNDL,PARAM_UNECC_SET,U_AVT,10);
;;;7060   	mess_send(MESS2CNTRL_HNDL,PARAM_CNTRL_STAT_FAST_REG,0,10);
;;;7061   	find_succes=0;
;;;7062   /*	for(i=0;i<NUMIST;i++)
;;;7063   		{
;;;7064   		if((bps[i]._Uii<u_max_temp)&&(bps[i]._Uii>u_min_temp))continue;
;;;7065   		else
;;;7066   			{
;;;7067   			find_succes=0;
;;;7068   			break;
;;;7069   			}
;;;7070   		}*/
;;;7071   	if((bps_U>=U_AVT-1)&&(bps_U<=U_AVT+1))find_succes=1;
;;;7072   
;;;7073   	if(find_succes==1)
;;;7074   		{
;;;7075   		uavt_set_stat=uassSTEP2;
004606  f04f0902          MOV      r9,#2
;;;7076   		}
;;;7077   	if(uavt_set_error_cnt)
;;;7078   		{
;;;7079   		uavt_set_error_cnt--;
;;;7080   		if(!uavt_set_error_cnt)
;;;7081   			{
;;;7082   			uavt_set_stat=uassOFF;
;;;7083   			uavt_set_result_stat=uasrsERR;
;;;7084   			avt_error_bps=100;
00460a  f04f0b64          MOV      r11,#0x64
00460e  7828              LDRB     r0,[r5,#0]            ;7049  ; uavt_set_stat
004610  4efd              LDR      r6,|L1.18952|
004612  f8df83f8          LDR      r8,|L1.18956|
004616  f8dfa3f8          LDR      r10,|L1.18960|
00461a  2400              MOVS     r4,#0                 ;7060
00461c  2801              CMP      r0,#1                 ;7049
00461e  d12e              BNE      |L1.18046|
004620  f8980000          LDRB     r0,[r8,#0]            ;7055  ; uavt_set_stat_old
004624  2801              CMP      r0,#1                 ;7055
004626  d002              BEQ      |L1.17966|
004628  f04f003c          MOV      r0,#0x3c              ;7057
00462c  7030              STRB     r0,[r6,#0]            ;7057
                  |L1.17966|
00462e  230a              MOVS     r3,#0xa               ;7060
004630  2200              MOVS     r2,#0                 ;7060
004632  21e6              MOVS     r1,#0xe6              ;7060
004634  20e1              MOVS     r0,#0xe1              ;7060
004636  f7fffffe          BL       mess_send
00463a  f04f0000          MOV      r0,#0                 ;7061
00463e  49f5              LDR      r1,|L1.18964|
004640  f9b12000          LDRSH    r2,[r1,#0]            ;7071  ; bps_U
004644  f9ba1000          LDRSH    r1,[r10,#0]           ;7071  ; U_AVT
004648  f1a10301          SUB      r3,r1,#1              ;7071
00464c  429a              CMP      r2,r3                 ;7071
00464e  db04              BLT      |L1.18010|
004650  1c49              ADDS     r1,r1,#1              ;7071
004652  428a              CMP      r2,r1                 ;7071
004654  dc01              BGT      |L1.18010|
004656  f04f0001          MOV      r0,#1                 ;7071
                  |L1.18010|
00465a  2801              CMP      r0,#1                 ;7073
00465c  d101              BNE      |L1.18018|
00465e  f8859000          STRB     r9,[r5,#0]            ;7075
                  |L1.18018|
004662  7830              LDRB     r0,[r6,#0]            ;7077  ; uavt_set_error_cnt
004664  b158              CBZ      r0,|L1.18046|
004666  f1a00001          SUB      r0,r0,#1              ;7079
00466a  b2c0              UXTB     r0,r0                 ;7079
00466c  7030              STRB     r0,[r6,#0]            ;7079
00466e  b930              CBNZ     r0,|L1.18046|
004670  702c              STRB     r4,[r5,#0]            ;7082
004672  48e9              LDR      r0,|L1.18968|
004674  f8809000          STRB     r9,[r0,#0]            ;7083
004678  48e8              LDR      r0,|L1.18972|
00467a  f880b000          STRB     r11,[r0,#0]
                  |L1.18046|
;;;7085   			}
;;;7086   		}
;;;7087   	}
;;;7088   if(uavt_set_stat==uassSTEP2)
00467e  782a              LDRB     r2,[r5,#0]  ; uavt_set_stat
;;;7089   	{
;;;7090   	char i,find_succes;
;;;7091   
;;;7092   	u_max_temp=(short)((((long)U_AVT)*101U)/100U);
004680  49e7              LDR      r1,|L1.18976|
;;;7093   	u_min_temp=(short)((((long)U_AVT)*99U)/100U);
004682  48e8              LDR      r0,|L1.18980|
;;;7094   
;;;7095   	if(uavt_set_stat_old!=uavt_set_stat)
;;;7096   		{
;;;7097   		uavt_set_error_cnt=60;
;;;7098   		}
;;;7099   
;;;7100   	mess_send(MESS2UNECC_HNDL,PARAM_UNECC_SET,U_AVT,10);
;;;7101   	mess_send(MESS2CNTRL_HNDL,PARAM_CNTRL_STAT_FAST_REG,0,10);
;;;7102   	find_succes=1;
;;;7103   
;;;7104   	for(i=0;i<NUMIST;i++)
;;;7105   		{
;;;7106   		if((bps[i]._Uii<u_max_temp)&&(bps[i]._Uii>u_min_temp))continue;
;;;7107   		else
;;;7108   			{
;;;7109   			find_succes=0;
;;;7110   			avt_error_bps=i+1;
;;;7111   			break;
;;;7112   			}
;;;7113   		}
;;;7114   
;;;7115   	if(find_succes==1)
;;;7116   		{
;;;7117   		uavt_set_stat=uassSTEP3;
;;;7118   		uavt_bps_pntr=0;
004684  4fe8              LDR      r7,|L1.18984|
004686  2a02              CMP      r2,#2                 ;7088
004688  d002              BEQ      |L1.18064|
;;;7119   		avt_plazma=0;
;;;7120   		}
;;;7121   
;;;7122   	if(uavt_set_error_cnt)
;;;7123   		{
;;;7124   		uavt_set_error_cnt--;
;;;7125   		if(!uavt_set_error_cnt)
;;;7126   			{
;;;7127   			uavt_set_stat=uassOFF;
;;;7128   			uavt_set_result_stat=uasrsERR;
;;;7129   			}
;;;7130   		}
;;;7131   	}
;;;7132   else if(uavt_set_stat==uassSTEP3)
00468a  2a03              CMP      r2,#3
00468c  d05e              BEQ      |L1.18252|
00468e  e0ca              B        |L1.18470|
                  |L1.18064|
004690  f9ba2000          LDRSH    r2,[r10,#0]           ;7092  ; U_AVT
004694  f04f0365          MOV      r3,#0x65              ;7092
004698  fb02f303          MUL      r3,r2,r3              ;7092
00469c  fbb3f3fb          UDIV     r3,r3,r11             ;7092
0046a0  468a              MOV      r10,r1                ;7092
0046a2  800b              STRH     r3,[r1,#0]            ;7092
0046a4  eb021142          ADD      r1,r2,r2,LSL #5       ;7093
0046a8  eb010141          ADD      r1,r1,r1,LSL #1       ;7093
0046ac  fbb1f1fb          UDIV     r1,r1,r11             ;7093
0046b0  4683              MOV      r11,r0                ;7093
0046b2  8001              STRH     r1,[r0,#0]            ;7093
0046b4  f8980000          LDRB     r0,[r8,#0]            ;7095  ; uavt_set_stat_old
0046b8  2802              CMP      r0,#2                 ;7095
0046ba  d002              BEQ      |L1.18114|
0046bc  f04f003c          MOV      r0,#0x3c              ;7097
0046c0  7030              STRB     r0,[r6,#0]            ;7097
                  |L1.18114|
0046c2  230a              MOVS     r3,#0xa               ;7100
0046c4  21bf              MOVS     r1,#0xbf              ;7100
0046c6  20be              MOVS     r0,#0xbe              ;7100
0046c8  f7fffffe          BL       mess_send
0046cc  230a              MOVS     r3,#0xa               ;7101
0046ce  2200              MOVS     r2,#0                 ;7101
0046d0  21e6              MOVS     r1,#0xe6              ;7101
0046d2  20e1              MOVS     r0,#0xe1              ;7101
0046d4  f7fffffe          BL       mess_send
0046d8  f04f0201          MOV      r2,#1                 ;7102
0046dc  f04f0000          MOV      r0,#0                 ;7104
0046e0  49d3              LDR      r1,|L1.18992|
0046e2  f9ba3000          LDRSH    r3,[r10,#0]           ;7104
0046e6  f8dfe344          LDR      lr,|L1.18988|
0046ea  f9bbc000          LDRSH    r12,[r11,#0]          ;7106
0046ee  f9b1a000          LDRSH    r10,[r1,#0]           ;7104
0046f2  e00d              B        |L1.18192|
                  |L1.18164|
0046f4  ebc001c0          RSB      r1,r0,r0,LSL #3       ;7106
0046f8  eb011100          ADD      r1,r1,r0,LSL #4       ;7106
0046fc  eb0e0181          ADD      r1,lr,r1,LSL #2       ;7106
004700  69c9              LDR      r1,[r1,#0x1c]         ;7106
004702  4299              CMP      r1,r3                 ;7106
004704  da09              BGE      |L1.18202|
004706  4561              CMP      r1,r12                ;7106
004708  dd07              BLE      |L1.18202|
00470a  f1000001          ADD      r0,r0,#1              ;7104
00470e  b2c0              UXTB     r0,r0                 ;7104
                  |L1.18192|
004710  4550              CMP      r0,r10                ;7104
004712  dbef              BLT      |L1.18164|
                  |L1.18196|
004714  2a01              CMP      r2,#1                 ;7115
004716  d007              BEQ      |L1.18216|
004718  e00c              B        |L1.18228|
                  |L1.18202|
00471a  f04f0200          MOV      r2,#0                 ;7109
00471e  49bf              LDR      r1,|L1.18972|
004720  f1000001          ADD      r0,r0,#1              ;7110
004724  7008              STRB     r0,[r1,#0]            ;7110
004726  e7f5              B        |L1.18196|
                  |L1.18216|
004728  f04f0003          MOV      r0,#3                 ;7117
00472c  7028              STRB     r0,[r5,#0]            ;7117
00472e  703c              STRB     r4,[r7,#0]            ;7118
004730  48c0              LDR      r0,|L1.18996|
004732  7004              STRB     r4,[r0,#0]            ;7119
                  |L1.18228|
004734  7830              LDRB     r0,[r6,#0]            ;7122  ; uavt_set_error_cnt
004736  b3d0              CBZ      r0,|L1.18350|
004738  f1a00001          SUB      r0,r0,#1              ;7124
00473c  b2c0              UXTB     r0,r0                 ;7124
00473e  7030              STRB     r0,[r6,#0]            ;7124
004740  bba8              CBNZ     r0,|L1.18350|
004742  702c              STRB     r4,[r5,#0]            ;7127
004744  48b4              LDR      r0,|L1.18968|
004746  f8809000          STRB     r9,[r0,#0]            ;7128
00474a  e06c              B        |L1.18470|
                  |L1.18252|
;;;7133   	{
;;;7134   	char i,find_succes;
;;;7135   
;;;7136   	u_max_temp=(short)((((long)U_AVT)*101U)/100U);
00474c  f9ba2000          LDRSH    r2,[r10,#0]  ; U_AVT
004750  f04f0365          MOV      r3,#0x65
004754  fb02f303          MUL      r3,r2,r3
004758  fbb3f3fb          UDIV     r3,r3,r11
00475c  468a              MOV      r10,r1
00475e  800b              STRH     r3,[r1,#0]
;;;7137   	u_min_temp=(short)((((long)U_AVT)*99U)/100U);
004760  eb021142          ADD      r1,r2,r2,LSL #5
004764  eb010141          ADD      r1,r1,r1,LSL #1
004768  fbb1f1fb          UDIV     r1,r1,r11
00476c  4683              MOV      r11,r0
00476e  8001              STRH     r1,[r0,#0]
;;;7138   	
;;;7139   	if(uavt_set_stat_old!=uavt_set_stat)
004770  f8980000          LDRB     r0,[r8,#0]  ; uavt_set_stat_old
004774  2803              CMP      r0,#3
004776  d000              BEQ      |L1.18298|
;;;7140   		{
;;;7141   		uavt_bps_pntr=0;
004778  703c              STRB     r4,[r7,#0]
                  |L1.18298|
;;;7142   		}
;;;7143   
;;;7144   	mess_send(MESS2UNECC_HNDL,PARAM_UNECC_SET,U_AVT,10);
00477a  230a              MOVS     r3,#0xa
00477c  21bf              MOVS     r1,#0xbf
00477e  20be              MOVS     r0,#0xbe
004780  f7fffffe          BL       mess_send
;;;7145   	mess_send(MESS2CNTRL_HNDL,PARAM_CNTRL_STAT_FAST_REG,0,10);
004784  230a              MOVS     r3,#0xa
004786  2200              MOVS     r2,#0
004788  21e6              MOVS     r1,#0xe6
00478a  20e1              MOVS     r0,#0xe1
00478c  f7fffffe          BL       mess_send
;;;7146   
;;;7147   	find_succes=1;
004790  f04f0601          MOV      r6,#1
;;;7148   	for(i=0;i<NUMIST;i++)
004794  f04f0000          MOV      r0,#0
004798  f8df9294          LDR      r9,|L1.18992|
00479c  f9ba2000          LDRSH    r2,[r10,#0]
0047a0  f8dfc288          LDR      r12,|L1.18988|
0047a4  f9bb3000          LDRSH    r3,[r11,#0]           ;7106
0047a8  f9b9a000          LDRSH    r10,[r9,#0]           ;7104
0047ac  e00e              B        |L1.18380|
                  |L1.18350|
0047ae  e03a              B        |L1.18470|
                  |L1.18352|
;;;7149   		{
;;;7150   		if((bps[i]._Uii<u_max_temp)&&(bps[i]._Uii>u_min_temp))continue;
0047b0  ebc001c0          RSB      r1,r0,r0,LSL #3
0047b4  eb011100          ADD      r1,r1,r0,LSL #4
0047b8  eb0c0181          ADD      r1,r12,r1,LSL #2
0047bc  69c9              LDR      r1,[r1,#0x1c]
0047be  4291              CMP      r1,r2
0047c0  da0f              BGE      |L1.18402|
0047c2  4299              CMP      r1,r3
0047c4  dd0d              BLE      |L1.18402|
0047c6  f1000001          ADD      r0,r0,#1              ;7148
0047ca  b2c0              UXTB     r0,r0                 ;7148
                  |L1.18380|
0047cc  4550              CMP      r0,r10                ;7148
0047ce  dbef              BLT      |L1.18352|
                  |L1.18384|
;;;7151   		else
;;;7152   			{
;;;7153   			find_succes=0;
;;;7154   			break;
;;;7155   			}
;;;7156   		}
;;;7157   
;;;7158   	if(mess_find( (MESS2IND_HNDL)) && (mess_data[0]==PARAM_U_AVT_GOOD) )
0047d0  20d7              MOVS     r0,#0xd7
0047d2  f7fffffe          BL       mess_find
0047d6  b1a0              CBZ      r0,|L1.18434|
0047d8  4897              LDR      r0,|L1.19000|
0047da  6800              LDR      r0,[r0,#0]  ; mess_data
0047dc  28d9              CMP      r0,#0xd9
0047de  d003              BEQ      |L1.18408|
0047e0  e00f              B        |L1.18434|
                  |L1.18402|
0047e2  f04f0600          MOV      r6,#0                 ;7153
0047e6  e7f3              B        |L1.18384|
                  |L1.18408|
;;;7159   		{
;;;7160   		if(++uavt_bps_pntr>=NUMIST)
0047e8  7838              LDRB     r0,[r7,#0]  ; uavt_bps_pntr
0047ea  1c40              ADDS     r0,r0,#1
0047ec  b2c0              UXTB     r0,r0
0047ee  7038              STRB     r0,[r7,#0]
0047f0  f9b91000          LDRSH    r1,[r9,#0]  ; NUMIST
0047f4  4288              CMP      r0,r1
0047f6  db04              BLT      |L1.18434|
;;;7161   			{
;;;7162   			uavt_set_stat=uassOFF;
0047f8  702c              STRB     r4,[r5,#0]
;;;7163   			uavt_set_result_stat=uasrsSUCCESS;
0047fa  4987              LDR      r1,|L1.18968|
0047fc  f04f0003          MOV      r0,#3
004800  7008              STRB     r0,[r1,#0]
                  |L1.18434|
;;;7164   			}
;;;7165   		//uavt_bps_pntr++;
;;;7166   		//if()
;;;7167   		}
;;;7168   	if(find_succes==1)
004802  2e01              CMP      r6,#1
004804  d10f              BNE      |L1.18470|
;;;7169   		{
;;;7170   		mcp2515_transmit(uavt_bps_pntr,uavt_bps_pntr,CMND,0xee,0xee,0,0,0);
004806  20ee              MOVS     r0,#0xee
004808  e9cd0400          STRD     r0,r4,[sp,#0]
00480c  9402              STR      r4,[sp,#8]
00480e  9403              STR      r4,[sp,#0xc]
004810  7839              LDRB     r1,[r7,#0]  ; uavt_bps_pntr
004812  4603              MOV      r3,r0
004814  2216              MOVS     r2,#0x16
004816  4608              MOV      r0,r1
004818  f7fffffe          BL       mcp2515_transmit
;;;7171   		avt_plazma++;
00481c  4885              LDR      r0,|L1.18996|
00481e  7801              LDRB     r1,[r0,#0]  ; avt_plazma
004820  f1010101          ADD      r1,r1,#1
004824  7001              STRB     r1,[r0,#0]
                  |L1.18470|
;;;7172   		}
;;;7173   	}
;;;7174   
;;;7175   
;;;7176   
;;;7177   uavt_set_stat_old=uavt_set_stat;
004826  7828              LDRB     r0,[r5,#0]  ; uavt_set_stat
004828  f8880000          STRB     r0,[r8,#0]
;;;7178   
;;;7179   }
00482c  e8bd9fff          POP      {r0-r12,pc}
;;;7180   
                          ENDP

                  u_necc_hndl PROC
;;;7255   //-----------------------------------------------
;;;7256   void u_necc_hndl(void)
004830  b5f8              PUSH     {r3-r7,lr}
;;;7257   {
;;;7258   signed long temp_L;
;;;7259   signed long temp_SL;
;;;7260   //signed short temp_SS;
;;;7261   
;;;7262   //char i;
;;;7263   
;;;7264   //temp_SS=0;
;;;7265   signed short t[2];
;;;7266   
;;;7267   
;;;7268   
;;;7269   
;;;7270   #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;7271   
;;;7272   if(!TERMOKOMPENS)
004832  4882              LDR      r0,|L1.19004|
;;;7273   	{
;;;7274   	//u_necc=U0B;
;;;7275   	u_necc=UB20;
;;;7276   	}
;;;7277   else
;;;7278   	{
;;;7279   	if(ND_EXT[0])t[0]=20;
;;;7280   	else t[0]=t_ext[0];
;;;7281   
;;;7282   	mat_temper=t[0];
;;;7283   			
;;;7284   	if(mat_temper<0)temp_SL=UB0; 
;;;7285   	else 
;;;7286   		{
;;;7287   		if(mat_temper>40)mat_temper=40; 
;;;7288   		temp_SL=(UB20-UB0)*10;
;;;7289   		temp_SL*=mat_temper;
;;;7290   		temp_SL/=200;
;;;7291   		temp_SL+=UB0;
;;;7292   		}
;;;7293   	if((spc_stat==spcVZ)&&(sk_stat[0]==1))
004834  4d84              LDR      r5,|L1.19016|
004836  4c85              LDR      r4,|L1.19020|
004838  8801              LDRH     r1,[r0,#0]            ;7272  ; TERMOKOMPENS
00483a  4881              LDR      r0,|L1.19008|
00483c  f9b03000          LDRSH    r3,[r0,#0]            ;7275
;;;7294   		{
;;;7295   		temp_SL=UVZ;
004840  4880              LDR      r0,|L1.19012|
004842  f9b02000          LDRSH    r2,[r0,#0]
004846  b139              CBZ      r1,|L1.18520|
004848  4881              LDR      r0,|L1.19024|
00484a  7800              LDRB     r0,[r0,#0]            ;7279  ; ND_EXT
00484c  b130              CBZ      r0,|L1.18524|
00484e  f04f0014          MOV      r0,#0x14              ;7279
004852  f8ad0000          STRH     r0,[sp,#0]            ;7279
004856  e005              B        |L1.18532|
                  |L1.18520|
004858  8023              STRH     r3,[r4,#0]            ;7275
00485a  e028              B        |L1.18606|
                  |L1.18524|
00485c  487d              LDR      r0,|L1.19028|
00485e  8800              LDRH     r0,[r0,#0]            ;7280  ; t_ext
004860  f8ad0000          STRH     r0,[sp,#0]            ;7280
                  |L1.18532|
004864  4e7c              LDR      r6,|L1.19032|
004866  f9bd1000          LDRSH    r1,[sp,#0]            ;7282
00486a  6031              STR      r1,[r6,#0]            ;7282  ; mat_temper
00486c  487b              LDR      r0,|L1.19036|
00486e  2900              CMP      r1,#0                 ;7284
004870  f9b00000          LDRSH    r0,[r0,#0]            ;7284
004874  db12              BLT      |L1.18588|
004876  2928              CMP      r1,#0x28              ;7287
004878  dd02              BLE      |L1.18560|
00487a  f04f0128          MOV      r1,#0x28              ;7287
00487e  6031              STR      r1,[r6,#0]            ;7287  ; mat_temper
                  |L1.18560|
004880  eba30100          SUB      r1,r3,r0              ;7288
004884  eb010181          ADD      r1,r1,r1,LSL #2       ;7288
004888  ea4f0141          LSL      r1,r1,#1              ;7288
00488c  6833              LDR      r3,[r6,#0]            ;7289  ; mat_temper
00488e  fb01f103          MUL      r1,r1,r3              ;7289
004892  f04f03c8          MOV      r3,#0xc8              ;7290
004896  fb91f1f3          SDIV     r1,r1,r3              ;7290
00489a  4408              ADD      r0,r0,r1              ;7291
                  |L1.18588|
00489c  7d69              LDRB     r1,[r5,#0x15]         ;7293  ; spc_stat
00489e  2902              CMP      r1,#2                 ;7293
0048a0  d104              BNE      |L1.18604|
0048a2  496f              LDR      r1,|L1.19040|
0048a4  7809              LDRB     r1,[r1,#0]            ;7293  ; sk_stat
0048a6  2901              CMP      r1,#1                 ;7293
0048a8  d100              BNE      |L1.18604|
0048aa  4610              MOV      r0,r2
                  |L1.18604|
;;;7296   		}
;;;7297   	u_necc=(unsigned int)temp_SL;
0048ac  8020              STRH     r0,[r4,#0]
                  |L1.18606|
;;;7298   	///u_necc=3456;
;;;7299   	}  
;;;7300   
;;;7301   //u_necc=2355;
;;;7302   
;;;7303   if((speedChIsOn)||(sp_ch_stat==scsWRK))
0048ae  486d              LDR      r0,|L1.19044|
0048b0  8800              LDRH     r0,[r0,#0]  ; speedChIsOn
0048b2  b918              CBNZ     r0,|L1.18620|
0048b4  486c              LDR      r0,|L1.19048|
0048b6  7800              LDRB     r0,[r0,#0]  ; sp_ch_stat
0048b8  2802              CMP      r0,#2
0048ba  d102              BNE      |L1.18626|
                  |L1.18620|
;;;7304   	{
;;;7305   	u_necc=speedChrgVolt;
0048bc  486b              LDR      r0,|L1.19052|
0048be  8800              LDRH     r0,[r0,#0]  ; speedChrgVolt
0048c0  8020              STRH     r0,[r4,#0]
                  |L1.18626|
;;;7306   	}
;;;7307   if(hv_vz_stat==hvsWRK)
0048c2  486b              LDR      r0,|L1.19056|
0048c4  7800              LDRB     r0,[r0,#0]  ; hv_vz_stat
0048c6  2805              CMP      r0,#5
0048c8  d100              BNE      |L1.18636|
;;;7308   	{
;;;7309   	u_necc=UVZ;
0048ca  8022              STRH     r2,[r4,#0]
                  |L1.18636|
;;;7310   	}
;;;7311   if(vz1_stat==vz1sWRK)
0048cc  f8950021          LDRB     r0,[r5,#0x21]  ; vz1_stat
0048d0  280a              CMP      r0,#0xa
0048d2  d102              BNE      |L1.18650|
;;;7312   	{
;;;7313   	u_necc=UZ_U;
0048d4  4867              LDR      r0,|L1.19060|
0048d6  8800              LDRH     r0,[r0,#0]  ; UZ_U
0048d8  8020              STRH     r0,[r4,#0]
                  |L1.18650|
;;;7314   	}
;;;7315   if(vz2_stat==vz2sWRK1)
0048da  f8950024          LDRB     r0,[r5,#0x24]  ; vz2_stat
0048de  280a              CMP      r0,#0xa
0048e0  d102              BNE      |L1.18664|
;;;7316   	{
;;;7317   	u_necc=FZ_U1;
0048e2  4965              LDR      r1,|L1.19064|
0048e4  8809              LDRH     r1,[r1,#0]  ; FZ_U1
0048e6  8021              STRH     r1,[r4,#0]
                  |L1.18664|
;;;7318   	}
;;;7319   if(vz2_stat==vz2sWRK2)
0048e8  280b              CMP      r0,#0xb
0048ea  d102              BNE      |L1.18674|
;;;7320   	{
;;;7321   	u_necc=FZ_U2;
0048ec  4863              LDR      r0,|L1.19068|
0048ee  8800              LDRH     r0,[r0,#0]  ; FZ_U2
0048f0  8020              STRH     r0,[r4,#0]
                  |L1.18674|
;;;7322   	}
;;;7323   
;;;7324   if((uavt_set_stat==uassSTEP1)||(uavt_set_stat==uassSTEP2))
0048f2  4844              LDR      r0,|L1.18948|
0048f4  7800              LDRB     r0,[r0,#0]  ; uavt_set_stat
0048f6  2801              CMP      r0,#1
0048f8  d001              BEQ      |L1.18686|
0048fa  2802              CMP      r0,#2
0048fc  d102              BNE      |L1.18692|
                  |L1.18686|
;;;7325   	{
;;;7326   	u_necc=U_AVT;
0048fe  4844              LDR      r0,|L1.18960|
004900  8800              LDRH     r0,[r0,#0]  ; U_AVT
004902  8020              STRH     r0,[r4,#0]
                  |L1.18692|
;;;7327   	}
;;;7328   
;;;7329   if(mess_find_unvol(MESS2UNECC_HNDL))
004904  20be              MOVS     r0,#0xbe
004906  f7fffffe          BL       mess_find_unvol
00490a  b128              CBZ      r0,|L1.18712|
;;;7330   	{		
;;;7331   	if(mess_data[0]==PARAM_UNECC_SET)
00490c  484a              LDR      r0,|L1.19000|
00490e  6801              LDR      r1,[r0,#0]  ; mess_data
004910  29bf              CMP      r1,#0xbf
004912  d101              BNE      |L1.18712|
;;;7332   		{
;;;7333   		u_necc=mess_data[1];
004914  6840              LDR      r0,[r0,#4]  ; mess_data
004916  8020              STRH     r0,[r4,#0]
                  |L1.18712|
;;;7334   		}		
;;;7335   	} 
;;;7336   
;;;7337   //if(ICA_EN)u_necc+=ica_u_necc;
;;;7338   #endif
;;;7339   
;;;7340   
;;;7341   #ifndef UKU_220_IPS_TERMOKOMPENSAT
;;;7342   
;;;7343   #ifndef UKU_TELECORE2015
;;;7344   #ifndef UKU_TELECORE2017
;;;7345   if(unh_cnt0<10)
;;;7346   	{
;;;7347   	unh_cnt0++;
;;;7348   	if(unh_cnt0>=10)
;;;7349   		{
;;;7350   		unh_cnt0=0;
;;;7351   		b1Hz_unh=1;
;;;7352   		}
;;;7353   	}
;;;7354   
;;;7355   if(unh_cnt1<5)
;;;7356   	{
;;;7357   	unh_cnt1++;
;;;7358   	if(unh_cnt1==5)
;;;7359   		{
;;;7360   		unh_cnt1=0;
;;;7361   //		b2Hz_unh=1;
;;;7362   		}
;;;7363   	} 
;;;7364   
;;;7365   
;;;7366   
;;;7367   if(mess_find_unvol(MESS2UNECC_HNDL))
;;;7368   	{		
;;;7369   	if(mess_data[0]==PARAM_UNECC_SET)
;;;7370   		{
;;;7371   		u_necc=mess_data[1];
;;;7372   		}		
;;;7373   	}
;;;7374   
;;;7375   
;;;7376   else if(b1Hz_unh)
;;;7377   	{
;;;7378   	
;;;7379   	if((BAT_IS_ON[0]!=bisON) && (BAT_IS_ON[1]!=bisON))
;;;7380   		{
;;;7381   		
;;;7382   		u_necc=U0B;
;;;7383   		#ifdef IPS_SGEP_GAZPROM
;;;7384   		u_necc=UB0;
;;;7385   		#endif
;;;7386   		}
;;;7387   	else 
;;;7388   		{
;;;7389   		if(BAT_TYPE==0) //ÂÒÎË ·‡Ú‡Âˇ Ó·˚˜Ì‡ˇ
;;;7390   			{
;;;7391   			for(i=0;i<2;i++)
;;;7392   				{
;;;7393   				if(BAT_IS_ON[i]==bisON)
;;;7394   					{
;;;7395   					if(bat[i]._nd)t[i]=20;
;;;7396   					else t[i]=bat[i]._Tb;
;;;7397   					}
;;;7398   				else
;;;7399   					{
;;;7400   					t[i]=-20;
;;;7401   					}
;;;7402   				}
;;;7403   			if(t[0]>t[1])mat_temper=t[0];
;;;7404   			else mat_temper=t[1];
;;;7405   			
;;;7406   		
;;;7407   			if(mat_temper<0)temp_SL=UB0; 
;;;7408   			else 
;;;7409   				{
;;;7410   				if(mat_temper>40)mat_temper=40; 
;;;7411   				temp_SL=(UB20-UB0)*10;
;;;7412   				temp_SL*=mat_temper;
;;;7413   				temp_SL/=200;
;;;7414   				temp_SL+=UB0;
;;;7415   				}
;;;7416   			if((spc_stat==spcVZ)&&(sk_stat[0]==1))
;;;7417   				{
;;;7418   				temp_SL=UVZ;
;;;7419   				}
;;;7420   			u_necc=(unsigned int)temp_SL;
;;;7421   			}
;;;7422   		else if(BAT_TYPE==1) //ÂÒÎË ·‡Ú‡Âˇ ÍËÚ‡ÈÒÍ‡ˇ
;;;7423   			{
;;;7424   			u_necc=U0B;
;;;7425   					
;;;7426   			u_necc=bat[0]._Ub+10;
;;;7427   
;;;7428   			
;;;7429   			if((spc_stat==spcVZ)&&(sk_stat[0]==1))
;;;7430   				{
;;;7431   				u_necc=UVZ;
;;;7432   				}
;;;7433   			if(u_necc>=UB0) u_necc=UB0;
;;;7434   			if(u_necc>=UB20) u_necc=UB20;
;;;7435   			}
;;;7436   		}  
;;;7437   	}
;;;7438   #endif
;;;7439   #endif
;;;7440   
;;;7441   #ifdef UKU_TELECORE2015
;;;7442   
;;;7443   if(unh_cnt0<10)
;;;7444   	{
;;;7445   	unh_cnt0++;
;;;7446   	if(unh_cnt0>=10)
;;;7447   		{
;;;7448   		unh_cnt0=0;
;;;7449   		b1Hz_unh=1;
;;;7450   		}
;;;7451   	}
;;;7452   
;;;7453   if(unh_cnt1<5)
;;;7454   	{
;;;7455   	unh_cnt1++;
;;;7456   	if(unh_cnt1==5)
;;;7457   		{
;;;7458   		unh_cnt1=0;
;;;7459   //		b2Hz_unh=1;
;;;7460   		}
;;;7461   	} 
;;;7462   
;;;7463   
;;;7464   
;;;7465   if(mess_find_unvol(MESS2UNECC_HNDL))
;;;7466   	{		
;;;7467   	if(mess_data[0]==PARAM_UNECC_SET)
;;;7468   		{
;;;7469   		u_necc=mess_data[1];
;;;7470   		}		
;;;7471   	}
;;;7472   
;;;7473   
;;;7474   else if(b1Hz_unh)
;;;7475   	{
;;;7476   	b1Hz_unh=0;
;;;7477   
;;;7478   	if(BAT_TYPE==0)
;;;7479   		{
;;;7480   		if(bat[0]._nd)mat_temper=20;
;;;7481   		else mat_temper=bat[0]._Tb;
;;;7482   
;;;7483   			
;;;7484   		if(mat_temper<0)temp_SL=UB0; 
;;;7485   		else 
;;;7486   			{
;;;7487   			if(mat_temper>40)mat_temper=40; 
;;;7488   			temp_SL=(UB20-UB0)*10;
;;;7489   			temp_SL*=mat_temper;
;;;7490   			temp_SL/=200;
;;;7491   			temp_SL+=UB0;
;;;7492   			}
;;;7493   		if((spc_stat==spcVZ)&&(sk_stat[0]==1))
;;;7494   			{
;;;7495   			temp_SL=UVZ;
;;;7496   			}
;;;7497   		u_necc=(unsigned int)temp_SL;
;;;7498   	///u_necc=3456;
;;;7499   		}
;;;7500   	else if(BAT_TYPE==1)
;;;7501   		{
;;;7502   		
;;;7503   		gran(&DU_LI_BAT,1,30);
;;;7504   		u_necc=li_bat._Ub+DU_LI_BAT;
;;;7505   		gran(&u_necc,0,UB0);
;;;7506   		gran(&u_necc,0,UB20);
;;;7507   		gran(&u_necc,0,540);		
;;;7508   
;;;7509   
;;;7510   		if(li_bat._batStat!=bsOK)
;;;7511   			{
;;;7512   			u_necc=U0B;
;;;7513   			}
;;;7514   		if((spc_stat==spcVZ)&&(sk_stat[0]==1))
;;;7515   			{
;;;7516   			u_necc=UVZ;
;;;7517   			}
;;;7518   		/* 
;;;7519   		u_necc=U0B;
;;;7520   		
;;;7521   
;;;7522   	
;;;7523   		u_necc=UB0;
;;;7524   		u_necc=li_bat._Ub+10;
;;;7525   		if((li_bat._Ub<450)||(li_bat._Ub>550))
;;;7526   			{
;;;7527   			lakb_error_cnt++;
;;;7528   			if(lakb_error_cnt>=30)
;;;7529   				{
;;;7530   				lakb_error_cnt=30;
;;;7531   				u_necc=U0B;
;;;7532   				}
;;;7533   			}
;;;7534   		else lakb_error_cnt=0;*/
;;;7535   		}
;;;7536   	else if(BAT_TYPE==2)
;;;7537   		{
;;;7538   		u_necc=U0B;
;;;7539   		
;;;7540   		if((spc_stat==spcVZ)&&(sk_stat[0]==1))
;;;7541   			{
;;;7542   			u_necc=UVZ;
;;;7543   			}
;;;7544   	
;;;7545   		u_necc=UB0;
;;;7546   		}
;;;7547   
;;;7548   	else if(BAT_TYPE==3)
;;;7549   		{
;;;7550   		u_necc=U0B;
;;;7551   		
;;;7552   		if((spc_stat==spcVZ)&&(sk_stat[0]==1))
;;;7553   			{
;;;7554   			u_necc=UVZ;
;;;7555   			}
;;;7556   
;;;7557   		gran(&DU_LI_BAT,1,30);
;;;7558   
;;;7559   
;;;7560   		if(lakbNotErrorNum==0)
;;;7561   			{
;;;7562   			u_necc=U0B;
;;;7563   			}
;;;7564   		else 
;;;7565   			{
;;;7566   			signed short i;
;;;7567   			//signed short u_necc_max;
;;;7568   			//u_necc_max=0;
;;;7569   			char soc_flag=0;
;;;7570   
;;;7571   			for(i=(NUMBAT_TELECORE-1);i>=0;i--)
;;;7572   				{
;;;7573   				if(lakb[i]._communicationFullErrorStat==0)u_necc=lakb[i]._tot_bat_volt+DU_LI_BAT;
;;;7574   				if(lakb[i]._s_o_c_percent<QSODERG_LI_BAT)soc_flag=1;
;;;7575   				}
;;;7576   
;;;7577   			if(soc_flag==0)u_necc=USODERG_LI_BAT;
;;;7578   			}
;;;7579   		gran(&u_necc,0,UB0);
;;;7580   		//gran(&u_necc,0,UB20);
;;;7581   		gran(&u_necc,0,540);
;;;7582   		}
;;;7583   	}
;;;7584   
;;;7585   #endif 
;;;7586   
;;;7587   #ifdef UKU_TELECORE2017
;;;7588   
;;;7589   if(unh_cnt0<10)
;;;7590   	{
;;;7591   	unh_cnt0++;
;;;7592   	if(unh_cnt0>=10)
;;;7593   		{
;;;7594   		unh_cnt0=0;
;;;7595   		b1Hz_unh=1;
;;;7596   		}
;;;7597   	}
;;;7598   
;;;7599   if(unh_cnt1<5)
;;;7600   	{
;;;7601   	unh_cnt1++;
;;;7602   	if(unh_cnt1==5)
;;;7603   		{
;;;7604   		unh_cnt1=0;
;;;7605   //		b2Hz_unh=1;
;;;7606   		}
;;;7607   	} 
;;;7608   
;;;7609   
;;;7610   
;;;7611   if(mess_find_unvol(MESS2UNECC_HNDL))
;;;7612   	{		
;;;7613   	if(mess_data[0]==PARAM_UNECC_SET)
;;;7614   		{
;;;7615   		u_necc=mess_data[1];
;;;7616   		}		
;;;7617   	}
;;;7618   
;;;7619   
;;;7620   else if(b1Hz_unh)
;;;7621   	{
;;;7622   	b1Hz_unh=0;
;;;7623   
;;;7624   	if(BAT_TYPE==0)
;;;7625   		{
;;;7626   		if(bat[0]._nd)mat_temper=20;
;;;7627   		else mat_temper=bat[0]._Tb;
;;;7628   
;;;7629   			
;;;7630   		if(mat_temper<0)temp_SL=UB0; 
;;;7631   		else 
;;;7632   			{
;;;7633   			if(mat_temper>40)mat_temper=40; 
;;;7634   			temp_SL=(UB20-UB0)*10;
;;;7635   			temp_SL*=mat_temper;
;;;7636   			temp_SL/=200;
;;;7637   			temp_SL+=UB0;
;;;7638   			}
;;;7639   		if((spc_stat==spcVZ)&&(sk_stat[0]==1))
;;;7640   			{
;;;7641   			temp_SL=UVZ;
;;;7642   			}
;;;7643   		u_necc=(unsigned int)temp_SL;
;;;7644   	///u_necc=3456;
;;;7645   		}
;;;7646   	else if(BAT_TYPE==1)
;;;7647   		{
;;;7648   		
;;;7649   		gran(&DU_LI_BAT,1,30);
;;;7650   		u_necc=li_bat._Ub+DU_LI_BAT;
;;;7651   		gran(&u_necc,0,UB0);
;;;7652   		gran(&u_necc,0,UB20);
;;;7653   		gran(&u_necc,0,540);		
;;;7654   
;;;7655   
;;;7656   		if(li_bat._batStat!=bsOK)
;;;7657   			{
;;;7658   			u_necc=U0B;
;;;7659   			}
;;;7660   		if((spc_stat==spcVZ)&&(sk_stat[0]==1))
;;;7661   			{
;;;7662   			u_necc=UVZ;
;;;7663   			}
;;;7664   		}
;;;7665   	else if(BAT_TYPE==2)
;;;7666   		{
;;;7667   		u_necc=U0B;
;;;7668   		
;;;7669   		if((spc_stat==spcVZ)&&(sk_stat[0]==1))
;;;7670   			{
;;;7671   			u_necc=UVZ;
;;;7672   			}
;;;7673   	
;;;7674   		u_necc=UB0;
;;;7675   		}
;;;7676   
;;;7677   	else if(BAT_TYPE==3)
;;;7678   		{
;;;7679   		u_necc=U0B;
;;;7680   		
;;;7681   		if((spc_stat==spcVZ)&&(sk_stat[0]==1))
;;;7682   			{
;;;7683   			u_necc=UVZ;
;;;7684   			}
;;;7685   
;;;7686   		gran(&DU_LI_BAT,1,30);
;;;7687   
;;;7688   
;;;7689   		if(lakbNotErrorNum==0)
;;;7690   			{
;;;7691   			u_necc=U0B;
;;;7692   			}
;;;7693   		else 
;;;7694   			{
;;;7695   			signed short i;
;;;7696   			//signed short u_necc_max;
;;;7697   			//u_necc_max=0;
;;;7698   			char soc_flag=0;
;;;7699   
;;;7700   			for(i=(NUMBAT_TELECORE-1);i>=0;i--)
;;;7701   				{
;;;7702   				if(lakb[i]._communicationFullErrorStat==0)u_necc=lakb[i]._tot_bat_volt+DU_LI_BAT;
;;;7703   				if(lakb[i]._s_o_c_percent<QSODERG_LI_BAT)soc_flag=1;
;;;7704   				}
;;;7705   
;;;7706   			if(soc_flag==0)u_necc=USODERG_LI_BAT;
;;;7707   			}
;;;7708   		gran(&u_necc,0,UB0);
;;;7709   		//gran(&u_necc,0,UB20);
;;;7710   		gran(&u_necc,0,540);
;;;7711   		}
;;;7712   	}
;;;7713   
;;;7714   #endif 
;;;7715   //u_necc=2356;
;;;7716   
;;;7717   if((speedChIsOn)||(sp_ch_stat==scsWRK))
;;;7718   	{
;;;7719   	u_necc=speedChrgVolt;
;;;7720   	}
;;;7721   #endif//gran(&u_necc,400,UMAX);
;;;7722   
;;;7723   
;;;7724   
;;;7725   temp_L=(signed long) u_necc;
004918  f9b40000          LDRSH    r0,[r4,#0]  ; u_necc
;;;7726   temp_L*=98L;
00491c  f04f0162          MOV      r1,#0x62
004920  fb00f101          MUL      r1,r0,r1
;;;7727   temp_L/=100L;
004924  f04f0264          MOV      r2,#0x64
004928  fb91f1f2          SDIV     r1,r1,r2
;;;7728   u_necc_dn=(signed short)temp_L;
00492c  4b54              LDR      r3,|L1.19072|
00492e  8019              STRH     r1,[r3,#0]
;;;7729   
;;;7730   temp_L=(signed long) u_necc;
;;;7731   temp_L*=102L;
004930  f04f0166          MOV      r1,#0x66
004934  fb00f001          MUL      r0,r0,r1
;;;7732   temp_L/=100L;
004938  fb90f0f2          SDIV     r0,r0,r2
;;;7733   u_necc_up=(signed short)temp_L;
00493c  4951              LDR      r1,|L1.19076|
00493e  8008              STRH     r0,[r1,#0]
;;;7734   /*
;;;7735   #ifdef IPS_SGEP_GAZPROM
;;;7736   u_necc=248;
;;;7737   #endif */
;;;7738   }
004940  bdf8              POP      {r3-r7,pc}
;;;7739   
                          ENDP

                  num_necc_hndl PROC
;;;7741   //-----------------------------------------------
;;;7742   void num_necc_hndl(void)
004942  e92d41f0          PUSH     {r4-r8,lr}
;;;7743   {
;;;7744   
;;;7745   static short num_necc_block_cnt;
;;;7746   if(num_necc_block_cnt) num_necc_block_cnt--;
004946  4c40              LDR      r4,|L1.19016|
004948  f9b4002c          LDRSH    r0,[r4,#0x2c]  ; num_necc_block_cnt
00494c  b110              CBZ      r0,|L1.18772|
00494e  f1a00001          SUB      r0,r0,#1
004952  85a0              STRH     r0,[r4,#0x2c]
                  |L1.18772|
;;;7747   
;;;7748   Isumm_=Isumm;
004954  484c              LDR      r0,|L1.19080|
004956  4d4d              LDR      r5,|L1.19084|
004958  8800              LDRH     r0,[r0,#0]  ; Isumm
00495a  8028              STRH     r0,[r5,#0]
;;;7749   
;;;7750   if(bat[0]._Ib<0) Isumm_+=(abs(bat[0]._Ib))/10;
00495c  4e4c              LDR      r6,|L1.19088|
00495e  270a              MOVS     r7,#0xa
004960  f9b60008          LDRSH    r0,[r6,#8]  ; bat
004964  2800              CMP      r0,#0
004966  da06              BGE      |L1.18806|
004968  f7fffffe          BL       abs
00496c  fb90f0f7          SDIV     r0,r0,r7
004970  8829              LDRH     r1,[r5,#0]  ; Isumm_
004972  4408              ADD      r0,r0,r1
004974  8028              STRH     r0,[r5,#0]
                  |L1.18806|
;;;7751   if(bat[1]._Ib<0) Isumm_+=(abs(bat[1]._Ib))/10;
004976  f9b60054          LDRSH    r0,[r6,#0x54]  ; bat
00497a  2800              CMP      r0,#0
00497c  da06              BGE      |L1.18828|
00497e  f7fffffe          BL       abs
004982  fb90f0f7          SDIV     r0,r0,r7
004986  8829              LDRH     r1,[r5,#0]  ; Isumm_
004988  4408              ADD      r0,r0,r1
00498a  8028              STRH     r0,[r5,#0]
                  |L1.18828|
;;;7752   
;;;7753   num_necc_up=(Isumm_/((signed short)IMAX))+1;
00498c  4941              LDR      r1,|L1.19092|
00498e  f9b50000          LDRSH    r0,[r5,#0]  ; Isumm_
004992  f9b11000          LDRSH    r1,[r1,#0]  ; IMAX
004996  fb90f1f1          SDIV     r1,r0,r1
00499a  f1010101          ADD      r1,r1,#1
00499e  b2c9              UXTB     r1,r1
0049a0  7461              STRB     r1,[r4,#0x11]
;;;7754   ////Isumm_+=(signed short)((IMAX*(10-KIMAX))/10);
;;;7755   ////Isumm_+=(signed short)(IMAX-IMIN);
;;;7756   
;;;7757   num_necc_down=(Isumm_/((signed short)IMIN))+1;
0049a2  4a3d              LDR      r2,|L1.19096|
0049a4  f9b22000          LDRSH    r2,[r2,#0]  ; IMIN
0049a8  fb90f0f2          SDIV     r0,r0,r2
0049ac  f1000001          ADD      r0,r0,#1
0049b0  b2c2              UXTB     r2,r0
0049b2  74a2              STRB     r2,[r4,#0x12]
;;;7758   
;;;7759   if(num_necc_up>num_necc)
0049b4  4839              LDR      r0,|L1.19100|
;;;7760   	{
;;;7761   	num_necc=num_necc_up;
;;;7762   	num_necc_block_cnt=60;
0049b6  f04f053c          MOV      r5,#0x3c
0049ba  f9b03000          LDRSH    r3,[r0,#0]            ;7759  ; num_necc
0049be  4299              CMP      r1,r3                 ;7759
0049c0  dd02              BLE      |L1.18888|
0049c2  8001              STRH     r1,[r0,#0]            ;7761
0049c4  85a5              STRH     r5,[r4,#0x2c]
0049c6  e005              B        |L1.18900|
                  |L1.18888|
;;;7763   	}
;;;7764   else if(num_necc_down<num_necc)
0049c8  429a              CMP      r2,r3
0049ca  da03              BGE      |L1.18900|
;;;7765   	{
;;;7766   	if(!num_necc_block_cnt)
0049cc  8da1              LDRH     r1,[r4,#0x2c]  ; num_necc_block_cnt
0049ce  b909              CBNZ     r1,|L1.18900|
;;;7767   		{
;;;7768   		num_necc=num_necc_down;
0049d0  8002              STRH     r2,[r0,#0]
;;;7769   		num_necc_block_cnt=60;
0049d2  85a5              STRH     r5,[r4,#0x2c]
                  |L1.18900|
;;;7770   		}
;;;7771   	}
;;;7772   
;;;7773   if(PAR) num_necc=NUMIST;
0049d4  4932              LDR      r1,|L1.19104|
0049d6  880a              LDRH     r2,[r1,#0]  ; PAR
0049d8  4915              LDR      r1,|L1.18992|
0049da  b10a              CBZ      r2,|L1.18912|
0049dc  880a              LDRH     r2,[r1,#0]  ; NUMIST
0049de  8002              STRH     r2,[r0,#0]
                  |L1.18912|
;;;7774   #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;7775   if(bPARALLEL) num_necc=NUMIST;
0049e0  7fe2              LDRB     r2,[r4,#0x1f]  ; bPARALLEL
0049e2  b10a              CBZ      r2,|L1.18920|
0049e4  880a              LDRH     r2,[r1,#0]  ; NUMIST
0049e6  8002              STRH     r2,[r0,#0]
                  |L1.18920|
;;;7776   if(vz1_stat==vz1sWRK)num_necc=NUMIST; //¬ÍÎ˛˜‡ÂÏ ‚ÒÂ ËÒÚÓ˜ÌËÍË ÂÒÎË Û‡‚ÌËÚÂÎ¸Ì˚È Á‡ˇ‰
0049e8  f8942021          LDRB     r2,[r4,#0x21]  ; vz1_stat
0049ec  2a0a              CMP      r2,#0xa
0049ee  d101              BNE      |L1.18932|
0049f0  880a              LDRH     r2,[r1,#0]  ; NUMIST
0049f2  8002              STRH     r2,[r0,#0]
                  |L1.18932|
;;;7777   if((vz2_stat==vz2sWRK1)||(vz2_stat==vz2sWRK2))num_necc=NUMIST; //¬ÍÎ˛˜‡ÂÏ ‚ÒÂ ËÒÚÓ˜ÌËÍË ÂÒÎË Û‡‚ÌËÚÂÎ¸Ì˚È Á‡ˇ‰
0049f4  f8942024          LDRB     r2,[r4,#0x24]  ; vz2_stat
0049f8  2a0a              CMP      r2,#0xa
0049fa  d001              BEQ      |L1.18944|
0049fc  2a0b              CMP      r2,#0xb
0049fe  d152              BNE      |L1.19110|
                  |L1.18944|
004a00  880a              LDRH     r2,[r1,#0]  ; NUMIST
004a02  e04f              B        |L1.19108|
                  |L1.18948|
                          DCD      uavt_set_stat
                  |L1.18952|
                          DCD      uavt_set_error_cnt
                  |L1.18956|
                          DCD      uavt_set_stat_old
                  |L1.18960|
                          DCD      U_AVT
                  |L1.18964|
                          DCD      bps_U
                  |L1.18968|
                          DCD      uavt_set_result_stat
                  |L1.18972|
                          DCD      avt_error_bps
                  |L1.18976|
                          DCD      u_max_temp
                  |L1.18980|
                          DCD      u_min_temp
                  |L1.18984|
                          DCD      uavt_bps_pntr
                  |L1.18988|
                          DCD      bps
                  |L1.18992|
                          DCD      NUMIST
                  |L1.18996|
                          DCD      avt_plazma
                  |L1.19000|
                          DCD      mess_data
                  |L1.19004|
                          DCD      TERMOKOMPENS
                  |L1.19008|
                          DCD      UB20
                  |L1.19012|
                          DCD      UVZ
                  |L1.19016|
                          DCD      ||area_number.25||
                  |L1.19020|
                          DCD      u_necc
                  |L1.19024|
                          DCD      ND_EXT
                  |L1.19028|
                          DCD      t_ext
                  |L1.19032|
                          DCD      mat_temper
                  |L1.19036|
                          DCD      UB0
                  |L1.19040|
                          DCD      sk_stat
                  |L1.19044|
                          DCD      speedChIsOn
                  |L1.19048|
                          DCD      sp_ch_stat
                  |L1.19052|
                          DCD      speedChrgVolt
                  |L1.19056|
                          DCD      hv_vz_stat
                  |L1.19060|
                          DCD      UZ_U
                  |L1.19064|
                          DCD      FZ_U1
                  |L1.19068|
                          DCD      FZ_U2
                  |L1.19072|
                          DCD      u_necc_dn
                  |L1.19076|
                          DCD      u_necc_up
                  |L1.19080|
                          DCD      Isumm
                  |L1.19084|
                          DCD      Isumm_
                  |L1.19088|
                          DCD      bat
                  |L1.19092|
                          DCD      IMAX
                  |L1.19096|
                          DCD      IMIN
                  |L1.19100|
                          DCD      num_necc
                  |L1.19104|
                          DCD      PAR
                  |L1.19108|
004aa4  8002              STRH     r2,[r0,#0]
                  |L1.19110|
;;;7778   #endif
;;;7779   
;;;7780   gran(&num_necc,1,NUMIST);
004aa6  f9b12000          LDRSH    r2,[r1,#0]  ; NUMIST
004aaa  e8bd41f0          POP      {r4-r8,lr}
004aae  2101              MOVS     r1,#1
004ab0  48fa              LDR      r0,|L1.20124|
004ab2  f7ffbffe          B.W      gran
;;;7781   
;;;7782   }
;;;7783   
                          ENDP

                  cntrl_hndl PROC
;;;7786   //-----------------------------------------------
;;;7787   void cntrl_hndl(void)
004ab6  e92d5ff0          PUSH     {r4-r12,lr}
;;;7788   {
;;;7789   
;;;7790   
;;;7791   
;;;7792   IZMAX_=IZMAX;
004aba  48f9              LDR      r0,|L1.20128|
004abc  4cf9              LDR      r4,|L1.20132|
004abe  8800              LDRH     r0,[r0,#0]  ; IZMAX
004ac0  f8a40040          STRH     r0,[r4,#0x40]
;;;7793   
;;;7794   //cntrl_hndl_plazma=10;
;;;7795   
;;;7796   if((speedChIsOn)||(sp_ch_stat==scsWRK))IZMAX_=speedChrgCurr;
004ac4  48f8              LDR      r0,|L1.20136|
004ac6  8800              LDRH     r0,[r0,#0]  ; speedChIsOn
004ac8  b918              CBNZ     r0,|L1.19154|
004aca  48f8              LDR      r0,|L1.20140|
004acc  7800              LDRB     r0,[r0,#0]  ; sp_ch_stat
004ace  2802              CMP      r0,#2
004ad0  d103              BNE      |L1.19162|
                  |L1.19154|
004ad2  48f7              LDR      r0,|L1.20144|
004ad4  8800              LDRH     r0,[r0,#0]  ; speedChrgCurr
004ad6  f8a40040          STRH     r0,[r4,#0x40]
                  |L1.19162|
;;;7797   if(vz1_stat==vz1sWRK) IZMAX_=UZ_IMAX;
004ada  f8940021          LDRB     r0,[r4,#0x21]  ; vz1_stat
004ade  280a              CMP      r0,#0xa
004ae0  d103              BNE      |L1.19178|
004ae2  48f4              LDR      r0,|L1.20148|
004ae4  8800              LDRH     r0,[r0,#0]  ; UZ_IMAX
004ae6  f8a40040          STRH     r0,[r4,#0x40]
                  |L1.19178|
;;;7798   if(vz2_stat==vz2sWRK1) IZMAX_=FZ_IMAX1;
004aea  f8940024          LDRB     r0,[r4,#0x24]  ; vz2_stat
004aee  280a              CMP      r0,#0xa
004af0  d103              BNE      |L1.19194|
004af2  49f1              LDR      r1,|L1.20152|
004af4  8809              LDRH     r1,[r1,#0]  ; FZ_IMAX1
004af6  f8a41040          STRH     r1,[r4,#0x40]
                  |L1.19194|
;;;7799   if(vz2_stat==vz2sWRK2) IZMAX_=FZ_IMAX2;
004afa  280b              CMP      r0,#0xb
004afc  d103              BNE      |L1.19206|
004afe  48ef              LDR      r0,|L1.20156|
004b00  8800              LDRH     r0,[r0,#0]  ; FZ_IMAX2
004b02  f8a40040          STRH     r0,[r4,#0x40]
                  |L1.19206|
;;;7800   //if(spc_stat==spcVZ) IZMAX_=IMAX_VZ;
;;;7801   
;;;7802   if(cntrl_stat_blok_cnt)cntrl_stat_blok_cnt--;
004b06  f9b40068          LDRSH    r0,[r4,#0x68]  ; cntrl_stat_blok_cnt
004b0a  b118              CBZ      r0,|L1.19220|
004b0c  f1a00001          SUB      r0,r0,#1
004b10  f8a40068          STRH     r0,[r4,#0x68]
                  |L1.19220|
;;;7803   if(cntrl_stat_blok_cnt_)cntrl_stat_blok_cnt_--;
004b14  f9b4006a          LDRSH    r0,[r4,#0x6a]  ; cntrl_stat_blok_cnt_
004b18  b118              CBZ      r0,|L1.19234|
004b1a  f1a00001          SUB      r0,r0,#1
004b1e  f8a4006a          STRH     r0,[r4,#0x6a]
                  |L1.19234|
;;;7804   
;;;7805   if((bat[0]._temper_stat&0x03)||(bat[1]._temper_stat&0x03))IZMAX_=IZMAX_/10;
004b22  48e7              LDR      r0,|L1.20160|
004b24  f04f080a          MOV      r8,#0xa               ;7797
004b28  f890103f          LDRB     r1,[r0,#0x3f]  ; bat
004b2c  0789              LSLS     r1,r1,#30
004b2e  d103              BNE      |L1.19256|
004b30  f890008b          LDRB     r0,[r0,#0x8b]  ; bat
004b34  0780              LSLS     r0,r0,#30
004b36  d005              BEQ      |L1.19268|
                  |L1.19256|
004b38  f8b40040          LDRH     r0,[r4,#0x40]  ; IZMAX_
004b3c  fbb0f0f8          UDIV     r0,r0,r8
004b40  f8a40040          STRH     r0,[r4,#0x40]
                  |L1.19268|
;;;7806   
;;;7807   
;;;7808   #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;7809   if((REG_SPEED<1)||(REG_SPEED>5)) REG_SPEED=1;
004b44  48df              LDR      r0,|L1.20164|
004b46  2601              MOVS     r6,#1
004b48  f9b01000          LDRSH    r1,[r0,#0]  ; REG_SPEED
004b4c  1e49              SUBS     r1,r1,#1
004b4e  2905              CMP      r1,#5
004b50  d300              BCC      |L1.19284|
004b52  8006              STRH     r6,[r0,#0]
                  |L1.19284|
;;;7810   if(ch_cnt0<(10*REG_SPEED))
004b54  f9b00000          LDRSH    r0,[r0,#0]  ; REG_SPEED
004b58  2500              MOVS     r5,#0                 ;7796
004b5a  eb000180          ADD      r1,r0,r0,LSL #2
004b5e  7a20              LDRB     r0,[r4,#8]  ; ch_cnt0
004b60  ebb00f41          CMP      r0,r1,LSL #1
004b64  da08              BGE      |L1.19320|
;;;7811   	{
;;;7812   	ch_cnt0++;
004b66  f1000001          ADD      r0,r0,#1
004b6a  b2c0              UXTB     r0,r0
004b6c  7220              STRB     r0,[r4,#8]
;;;7813   	if(ch_cnt0>=10*REG_SPEED)
004b6e  ebb00f41          CMP      r0,r1,LSL #1
004b72  db01              BLT      |L1.19320|
;;;7814   		{
;;;7815   		ch_cnt0=0;
004b74  7225              STRB     r5,[r4,#8]
;;;7816   		b1Hz_ch=1;
004b76  7266              STRB     r6,[r4,#9]
                  |L1.19320|
;;;7817   		}
;;;7818   	}
;;;7819   #endif
;;;7820   #ifndef UKU_220_IPS_TERMOKOMPENSAT
;;;7821   if(ch_cnt0<10)
;;;7822   	{
;;;7823   	ch_cnt0++;
;;;7824   	if(ch_cnt0>=10)
;;;7825   		{
;;;7826   		ch_cnt0=0;
;;;7827   		b1Hz_ch=1;
;;;7828   		}
;;;7829   	}
;;;7830   #endif
;;;7831   
;;;7832   
;;;7833   if(mess_find_unvol(MESS2CNTRL_HNDL))
004b78  20e1              MOVS     r0,#0xe1
004b7a  f7fffffe          BL       mess_find_unvol
;;;7834   	{
;;;7835   	if(mess_data[0]==PARAM_CNTRL_STAT_PLUS)
;;;7836   		{
;;;7837   		cntrl_stat_new=cntrl_stat_old+mess_data[1];
;;;7838   		}
;;;7839   	else if(mess_data[0]==PARAM_CNTRL_STAT_MINUS)
;;;7840   		{
;;;7841   		cntrl_stat_new=cntrl_stat_old-mess_data[1];
;;;7842   		}
;;;7843   	else if(mess_data[0]==PARAM_CNTRL_STAT_STEP_DOWN)
;;;7844   		{
;;;7845   		static char cntrlStatIsDownCnt;
;;;7846   		cntrl_stat--;
;;;7847   
;;;7848   		if((cntrl_stat<=30)||(load_U<USIGN))
;;;7849   			{
;;;7850   			if(++cntrlStatIsDownCnt==250)mess_send(MESS2KB_HNDL,PARAM_CNTRL_IS_DOWN,0,10);
;;;7851   			}
;;;7852   		else 
;;;7853   			{
;;;7854   			cntrlStatIsDownCnt=0;
;;;7855   			}
;;;7856   
;;;7857   		}
;;;7858   	else if(mess_data[0]==PARAM_CNTRL_STAT_SET)
;;;7859   		{
;;;7860   		cntrl_stat_new=mess_data[1];
;;;7861   		}
;;;7862   
;;;7863   	else if(mess_data[0]==PARAM_CNTRL_STAT_FAST_REG)
;;;7864   		{
;;;7865   		#ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;7866   		if(bps_U>u_necc)
004b7e  f8dfc348          LDR      r12,|L1.20168|
004b82  4ad2              LDR      r2,|L1.20172|
;;;7867   			{
;;;7868   			cntrl_hndl_plazma=11;
;;;7869   			if(((bps_U-u_necc)>40)&&(cntrl_stat_new>0))cntrl_stat_new-=5;
;;;7870   			else if((cntrl_stat_new)&&b1Hz_ch)cntrl_stat_new--;
;;;7871   			}
;;;7872   		else if(bps_U<u_necc)
;;;7873   			{
;;;7874   			cntrl_hndl_plazma=12;	
;;;7875   			if(((u_necc-bps_U)>40)&&(cntrl_stat_new<1015))cntrl_stat_new+=5;
;;;7876   			else	if((cntrl_stat_new<1020)&&b1Hz_ch)cntrl_stat_new++;
;;;7877   			}
;;;7878   		#elif defined(UKU_220)
;;;7879   		if(load_U>u_necc)
;;;7880   			{
;;;7881   			cntrl_hndl_plazma=13;
;;;7882   			if(((load_U-u_necc)>40)&&(cntrl_stat_new>0))cntrl_stat_new-=5;
;;;7883   			else if((cntrl_stat_new)&&b1Hz_ch)cntrl_stat_new--;
;;;7884   			}
;;;7885   		else if(load_U<u_necc)
;;;7886   			{
;;;7887   			cntrl_hndl_plazma=14;	
;;;7888   			if(((u_necc-load_U)>40)&&(cntrl_stat_new<1015))cntrl_stat_new+=5;
;;;7889   			else	if((cntrl_stat_new<1020)&&b1Hz_ch)cntrl_stat_new++;
;;;7890   			}
;;;7891   		#elif defined(UKU_220_V2)
;;;7892   		if(load_U>u_necc)
;;;7893   			{
;;;7894   			cntrl_hndl_plazma=15;
;;;7895   			if(((load_U-u_necc)>40)&&(cntrl_stat_new>0))cntrl_stat_new-=5;
;;;7896   			else if((cntrl_stat_new)&&b1Hz_ch)cntrl_stat_new--;
;;;7897   			}
;;;7898   		else if(load_U<u_necc)
;;;7899   			{
;;;7900   			cntrl_hndl_plazma=16;	
;;;7901   			if(((u_necc-load_U)>40)&&(cntrl_stat_new<1015))cntrl_stat_new+=5;
;;;7902   			else	if((cntrl_stat_new<1020)&&b1Hz_ch)cntrl_stat_new++;
;;;7903   			}
;;;7904   		#else
;;;7905   
;;;7906   		if(load_U>u_necc)
;;;7907   			{
;;;7908   			cntrl_hndl_plazma=17;
;;;7909   			if(((load_U-u_necc)>10)&&(cntrl_stat_new>0))cntrl_stat_new-=5;
;;;7910   			else if((cntrl_stat_new)&&b1Hz_ch)cntrl_stat_new--;
;;;7911   			}
;;;7912   		else if(load_U<u_necc)
;;;7913   			{
;;;7914   			cntrl_hndl_plazma=18;	
;;;7915   			if(((u_necc-load_U)>10)&&(cntrl_stat_new<1015))cntrl_stat_new+=5;
;;;7916   			else	if((cntrl_stat_new<1020)&&b1Hz_ch)cntrl_stat_new++;
;;;7917   			}
;;;7918   		#endif	
;;;7919   	 	}
;;;7920   
;;;7921   	gran(&cntrl_stat_new,10,1010);			
;;;7922   	cntrl_stat_old=cntrl_stat_new;
;;;7923   	cntrl_stat=cntrl_stat_new;
;;;7924   	}
;;;7925   
;;;7926   #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;7927   else if((b1Hz_ch)&&((!bIBAT_SMKLBR)||(bps[8]._cnt>40)))
004b84  f8df9348          LDR      r9,|L1.20176|
;;;7928   	{
;;;7929   	cntrl_stat_new=cntrl_stat_old;
;;;7930   	cntrl_hndl_plazma=19;
;;;7931   	if((Ibmax/10)>(2*IZMAX_))
;;;7932   		{
;;;7933   		cntrl_hndl_plazma=20;
;;;7934             if(cntrl_stat_blok_cnt)cntrl_stat_new--;
;;;7935   		else	cntrl_stat_new-=10;
;;;7936   		}		
;;;7937   	else if(((Ibmax/10)<(IZMAX_*2))&&(Ibmax>(IZMAX_*15)))
;;;7938   		{
;;;7939   		cntrl_hndl_plazma=21;
;;;7940             if(cntrl_stat_blok_cnt)cntrl_stat_new--;
;;;7941             else	cntrl_stat_new-=3;
;;;7942   		}   
;;;7943   	else if((Ibmax<(IZMAX_*15))&&((Ibmax/10)>IZMAX_))
;;;7944   		{
;;;7945   		cntrl_hndl_plazma=22;
;;;7946   		cntrl_stat_new--;
;;;7947   		}
;;;7948   		
;;;7949   	else if(bps_U<u_necc)
;;;7950   		{
;;;7951   		cntrl_hndl_plazma=23;
;;;7952   		if(bps_U<(u_necc-(UB0-UB20)))
;;;7953   			{
;;;7954   			cntrl_hndl_plazma=24;
;;;7955   			if(Ibmax<0)
;;;7956   				{
;;;7957   				cntrl_hndl_plazma=25;
;;;7958                       if(cntrl_stat_blok_cnt)cntrl_stat_new++;
;;;7959   				else cntrl_stat_new+=10;
;;;7960   				}
;;;7961   			else if(Ibmax<(IZMAX_*5))
;;;7962   				{
;;;7963   				cntrl_hndl_plazma=26;
;;;7964                       if(cntrl_stat_blok_cnt)cntrl_stat_new++;
;;;7965   				else	cntrl_stat_new+=2;
;;;7966   				}
;;;7967   			else if(Ibmax<((IZMAX_*10)/*-10*/))//(Ibmax<((IZMAX_*95)/10))
;;;7968   				{
;;;7969   				cntrl_hndl_plazma=27;
;;;7970   				cntrl_stat_new++;
;;;7971   				}					
;;;7972   			}
;;;7973   		else if(bps_U<(u_necc-((UB0-UB20)/4)))
;;;7974   			{
;;;7975   			cntrl_hndl_plazma=28;
;;;7976   			if(Ibmax<(IZMAX_*5))
;;;7977   				{
;;;7978   				cntrl_hndl_plazma=29;
;;;7979                       if(cntrl_stat_blok_cnt)cntrl_stat_new++;
;;;7980   				else	cntrl_stat_new+=2;
;;;7981   				}
;;;7982   			else if(Ibmax<((IZMAX_*10)/*-10*/))//(Ibmax<((IZMAX_*95)/10))
;;;7983   				{
;;;7984   				cntrl_hndl_plazma=30;
;;;7985   				cntrl_stat_new++;
;;;7986   				}					
;;;7987   			}	
;;;7988   		else if(bps_U<(u_necc-1))
;;;7989   			{
;;;7990   			cntrl_hndl_plazma=31;
;;;7991   			if(Ibmax<((IZMAX_*10)/*-10*/))//(Ibmax<((IZMAX_*95)/10))
;;;7992   				{
;;;7993   				cntrl_hndl_plazma=32;
;;;7994   				cntrl_stat_new++;
;;;7995   				}					
;;;7996   			}					
;;;7997   		}	
;;;7998   	else if((bps_U>u_necc)/*&&(!cntrl_blok)*/)
;;;7999   		{ 	
;;;8000   		cntrl_hndl_plazma=33;
;;;8001   		if(bps_U>(u_necc+(UB0-UB20)))
;;;8002   			{
;;;8003   			cntrl_hndl_plazma=34;
;;;8004                  if(cntrl_stat_blok_cnt)cntrl_stat_new--;
;;;8005   			else	cntrl_stat_new-=10;
;;;8006   			}
;;;8007   		else if(bps_U>(u_necc+((UB0-UB20)/4)))
;;;8008   			{
;;;8009   			cntrl_hndl_plazma=35;
;;;8010                  if(cntrl_stat_blok_cnt)cntrl_stat_new--;
;;;8011   			else cntrl_stat_new-=2;
;;;8012   			}	
;;;8013   		else if(bps_U>(u_necc+1))
;;;8014   			{
;;;8015   			cntrl_hndl_plazma=36;
;;;8016   			cntrl_stat_new--;
;;;8017   			}					
;;;8018   		}
;;;8019   
;;;8020   	if((hv_vz_stat==hvsOFF)&&(vz1_stat==vz1sOFF)&&(vz2_stat==vz2sOFF))
;;;8021   		{
;;;8022   		if(((sk_stat[1]==1)&&(sk_stat_old[1]==0))&&(VZ_KIND==1))cntrl_stat_new=50;
;;;8023   		}
;;;8024   
;;;8025   	gran(&cntrl_stat_new,10,1010);			
;;;8026   	cntrl_stat_old=cntrl_stat_new;
;;;8027   	cntrl_stat=cntrl_stat_new;
;;;8028   	
;;;8029   	if(ICA_EN==0)
;;;8030   		{
;;;8031   		if(ica_cntrl_hndl_cnt)
004b88  4fd2              LDR      r7,|L1.20180|
004b8a  2800              CMP      r0,#0                 ;7833
004b8c  d07e              BEQ      |L1.19596|
004b8e  49d2              LDR      r1,|L1.20184|
004b90  6808              LDR      r0,[r1,#0]            ;7835  ; mess_data
004b92  2864              CMP      r0,#0x64              ;7835
004b94  d008              BEQ      |L1.19368|
004b96  2869              CMP      r0,#0x69              ;7839
004b98  d00b              BEQ      |L1.19378|
004b9a  286e              CMP      r0,#0x6e              ;7843
004b9c  d00f              BEQ      |L1.19390|
004b9e  28e5              CMP      r0,#0xe5              ;7858
004ba0  d02b              BEQ      |L1.19450|
004ba2  28e6              CMP      r0,#0xe6              ;7863
004ba4  d02c              BEQ      |L1.19456|
004ba6  e067              B        |L1.19576|
                  |L1.19368|
004ba8  6848              LDR      r0,[r1,#4]            ;7837  ; mess_data
004baa  8d21              LDRH     r1,[r4,#0x28]         ;7837  ; cntrl_stat_old
004bac  4408              ADD      r0,r0,r1              ;7837
004bae  87a0              STRH     r0,[r4,#0x3c]         ;7837
004bb0  e062              B        |L1.19576|
                  |L1.19378|
004bb2  6848              LDR      r0,[r1,#4]            ;7841  ; mess_data
004bb4  8d21              LDRH     r1,[r4,#0x28]         ;7841  ; cntrl_stat_old
004bb6  eba10000          SUB      r0,r1,r0              ;7841
004bba  87a0              STRH     r0,[r4,#0x3c]         ;7841
004bbc  e05c              B        |L1.19576|
                  |L1.19390|
004bbe  8ce0              LDRH     r0,[r4,#0x26]         ;7846  ; cntrl_stat
004bc0  f1a00001          SUB      r0,r0,#1              ;7846
004bc4  b200              SXTH     r0,r0                 ;7846
004bc6  84e0              STRH     r0,[r4,#0x26]         ;7846
004bc8  281e              CMP      r0,#0x1e              ;7848
004bca  dd07              BLE      |L1.19420|
004bcc  48c3              LDR      r0,|L1.20188|
004bce  49c4              LDR      r1,|L1.20192|
004bd0  f9b00000          LDRSH    r0,[r0,#0]            ;7848  ; load_U
004bd4  f9b11000          LDRSH    r1,[r1,#0]            ;7848  ; USIGN
004bd8  4288              CMP      r0,r1                 ;7848
004bda  da0c              BGE      |L1.19446|
                  |L1.19420|
004bdc  78a0              LDRB     r0,[r4,#2]            ;7850  ; cntrlStatIsDownCnt
004bde  1c40              ADDS     r0,r0,#1              ;7850
004be0  b2c0              UXTB     r0,r0                 ;7850
004be2  70a0              STRB     r0,[r4,#2]            ;7850
004be4  28fa              CMP      r0,#0xfa              ;7850
004be6  d147              BNE      |L1.19576|
004be8  230a              MOVS     r3,#0xa               ;7850
004bea  2200              MOVS     r2,#0                 ;7850
004bec  21e7              MOVS     r1,#0xe7              ;7850
004bee  20e6              MOVS     r0,#0xe6              ;7850
004bf0  f7fffffe          BL       mess_send
004bf4  e040              B        |L1.19576|
                  |L1.19446|
004bf6  70a5              STRB     r5,[r4,#2]            ;7854
004bf8  e03e              B        |L1.19576|
                  |L1.19450|
004bfa  6848              LDR      r0,[r1,#4]            ;7860  ; mess_data
004bfc  87a0              STRH     r0,[r4,#0x3c]         ;7860
004bfe  e03b              B        |L1.19576|
                  |L1.19456|
004c00  f9bc0000          LDRSH    r0,[r12,#0]           ;7866  ; bps_U
004c04  f9b21000          LDRSH    r1,[r2,#0]            ;7866  ; u_necc
004c08  4288              CMP      r0,r1                 ;7866
004c0a  dd18              BLE      |L1.19518|
004c0c  f04f020b          MOV      r2,#0xb               ;7868
004c10  f8842020          STRB     r2,[r4,#0x20]         ;7868
004c14  eba00001          SUB      r0,r0,r1              ;7869
004c18  2828              CMP      r0,#0x28              ;7869
004c1a  dd07              BLE      |L1.19500|
004c1c  f9b4003c          LDRSH    r0,[r4,#0x3c]         ;7869  ; cntrl_stat_new
004c20  2800              CMP      r0,#0                 ;7869
004c22  dd03              BLE      |L1.19500|
004c24  f1a00005          SUB      r0,r0,#5              ;7869
004c28  87a0              STRH     r0,[r4,#0x3c]         ;7869
004c2a  e025              B        |L1.19576|
                  |L1.19500|
004c2c  f9b4003c          LDRSH    r0,[r4,#0x3c]         ;7870  ; cntrl_stat_new
004c30  b310              CBZ      r0,|L1.19576|
004c32  7a61              LDRB     r1,[r4,#9]            ;7870  ; b1Hz_ch
004c34  b301              CBZ      r1,|L1.19576|
004c36  f1a00001          SUB      r0,r0,#1              ;7870
004c3a  87a0              STRH     r0,[r4,#0x3c]         ;7870
004c3c  e01c              B        |L1.19576|
                  |L1.19518|
004c3e  da1b              BGE      |L1.19576|
004c40  f04f020c          MOV      r2,#0xc               ;7874
004c44  f8842020          STRB     r2,[r4,#0x20]         ;7874
004c48  eba10000          SUB      r0,r1,r0              ;7875
004c4c  2828              CMP      r0,#0x28              ;7875
004c4e  dd09              BLE      |L1.19556|
004c50  f9b4003c          LDRSH    r0,[r4,#0x3c]         ;7875  ; cntrl_stat_new
004c54  f24031f7          MOV      r1,#0x3f7             ;7875
004c58  4288              CMP      r0,r1                 ;7875
004c5a  da03              BGE      |L1.19556|
004c5c  f1000005          ADD      r0,r0,#5              ;7875
004c60  87a0              STRH     r0,[r4,#0x3c]         ;7875
004c62  e009              B        |L1.19576|
                  |L1.19556|
004c64  f9b4003c          LDRSH    r0,[r4,#0x3c]         ;7876  ; cntrl_stat_new
004c68  f5b07f7f          CMP      r0,#0x3fc             ;7876
004c6c  da04              BGE      |L1.19576|
004c6e  7a61              LDRB     r1,[r4,#9]            ;7876  ; b1Hz_ch
004c70  b111              CBZ      r1,|L1.19576|
004c72  f1000001          ADD      r0,r0,#1              ;7876
004c76  87a0              STRH     r0,[r4,#0x3c]         ;7876
                  |L1.19576|
004c78  488a              LDR      r0,|L1.20132|
004c7a  f24032f2          MOV      r2,#0x3f2             ;7921
004c7e  210a              MOVS     r1,#0xa               ;7921
004c80  303c              ADDS     r0,r0,#0x3c           ;7921
004c82  f7fffffe          BL       gran
004c86  8fa0              LDRH     r0,[r4,#0x3c]         ;7922  ; cntrl_stat_new
004c88  8520              STRH     r0,[r4,#0x28]         ;7922
004c8a  e000              B        |L1.19598|
                  |L1.19596|
004c8c  e001              B        |L1.19602|
                  |L1.19598|
004c8e  84e0              STRH     r0,[r4,#0x26]         ;7923
                  |L1.19600|
004c90  e171              B        |L1.20342|
                  |L1.19602|
004c92  7a60              LDRB     r0,[r4,#9]            ;7927  ; b1Hz_ch
004c94  2800              CMP      r0,#0                 ;7927
004c96  d0fb              BEQ      |L1.19600|
004c98  4892              LDR      r0,|L1.20196|
004c9a  8800              LDRH     r0,[r0,#0]            ;7927  ; bIBAT_SMKLBR
004c9c  b118              CBZ      r0,|L1.19622|
004c9e  f89902e3          LDRB     r0,[r9,#0x2e3]        ;7927  ; bps
004ca2  2828              CMP      r0,#0x28              ;7927
004ca4  d9f4              BLS      |L1.19600|
                  |L1.19622|
004ca6  f9b40028          LDRSH    r0,[r4,#0x28]         ;7929  ; cntrl_stat_old
004caa  87a0              STRH     r0,[r4,#0x3c]         ;7929
004cac  f04f0113          MOV      r1,#0x13              ;7930
004cb0  f8841020          STRB     r1,[r4,#0x20]         ;7930
004cb4  f9b4103e          LDRSH    r1,[r4,#0x3e]         ;7931  ; Ibmax
004cb8  f8b43040          LDRH     r3,[r4,#0x40]         ;7931  ; IZMAX_
004cbc  fb91f8f8          SDIV     r8,r1,r8              ;7931
004cc0  ebb80f43          CMP      r8,r3,LSL #1          ;7931
004cc4  dd0e              BLE      |L1.19684|
004cc6  f04f0114          MOV      r1,#0x14              ;7933
004cca  f8841020          STRB     r1,[r4,#0x20]         ;7933
004cce  f8b41068          LDRH     r1,[r4,#0x68]         ;7934  ; cntrl_stat_blok_cnt
004cd2  b119              CBZ      r1,|L1.19676|
004cd4  f1a00001          SUB      r0,r0,#1              ;7934
004cd8  87a0              STRH     r0,[r4,#0x3c]         ;7934
004cda  e118              B        |L1.20238|
                  |L1.19676|
004cdc  f1a0000a          SUB      r0,r0,#0xa            ;7935
004ce0  87a0              STRH     r0,[r4,#0x3c]         ;7935
004ce2  e114              B        |L1.20238|
                  |L1.19684|
004ce4  da12              BGE      |L1.19724|
004ce6  ebc31a03          RSB      r10,r3,r3,LSL #4      ;7937
004cea  458a              CMP      r10,r1                ;7937
004cec  da0e              BGE      |L1.19724|
004cee  f04f0115          MOV      r1,#0x15              ;7939
004cf2  f8841020          STRB     r1,[r4,#0x20]         ;7939
004cf6  f8b41068          LDRH     r1,[r4,#0x68]         ;7940  ; cntrl_stat_blok_cnt
004cfa  b119              CBZ      r1,|L1.19716|
004cfc  f1a00001          SUB      r0,r0,#1              ;7940
004d00  87a0              STRH     r0,[r4,#0x3c]         ;7940
004d02  e104              B        |L1.20238|
                  |L1.19716|
004d04  f1a00003          SUB      r0,r0,#3              ;7941
004d08  87a0              STRH     r0,[r4,#0x3c]         ;7941
004d0a  e100              B        |L1.20238|
                  |L1.19724|
004d0c  ebc31a03          RSB      r10,r3,r3,LSL #4      ;7943
004d10  458a              CMP      r10,r1                ;7943
004d12  dd09              BLE      |L1.19752|
004d14  4598              CMP      r8,r3                 ;7943
004d16  dd07              BLE      |L1.19752|
004d18  f04f0116          MOV      r1,#0x16              ;7945
004d1c  f8841020          STRB     r1,[r4,#0x20]         ;7945
004d20  f1a00001          SUB      r0,r0,#1              ;7946
004d24  87a0              STRH     r0,[r4,#0x3c]         ;7946
004d26  e0f2              B        |L1.20238|
                  |L1.19752|
004d28  f9bcc000          LDRSH    r12,[r12,#0]          ;7949  ; bps_U
004d2c  f9b22000          LDRSH    r2,[r2,#0]            ;7949  ; u_necc
004d30  f8df81b4          LDR      r8,|L1.20200|
004d34  f8dfb1b4          LDR      r11,|L1.20204|
004d38  4594              CMP      r12,r2                ;7949
004d3a  da7f              BGE      |L1.20028|
004d3c  f04f0a17          MOV      r10,#0x17             ;7951
004d40  f884a020          STRB     r10,[r4,#0x20]        ;7951
004d44  f9b88000          LDRSH    r8,[r8,#0]            ;7952  ; UB0
004d48  f9bba000          LDRSH    r10,[r11,#0]          ;7952  ; UB20
004d4c  eba8080a          SUB      r8,r8,r10             ;7952
004d50  eba20a08          SUB      r10,r2,r8             ;7952
004d54  45e2              CMP      r10,r12               ;7952
004d56  dd32              BLE      |L1.19902|
004d58  f04f0218          MOV      r2,#0x18              ;7954
004d5c  f8842020          STRB     r2,[r4,#0x20]         ;7954
004d60  2900              CMP      r1,#0                 ;7955
004d62  da0e              BGE      |L1.19842|
004d64  f04f0119          MOV      r1,#0x19              ;7957
004d68  f8841020          STRB     r1,[r4,#0x20]         ;7957
004d6c  f8b41068          LDRH     r1,[r4,#0x68]         ;7958  ; cntrl_stat_blok_cnt
004d70  b119              CBZ      r1,|L1.19834|
004d72  f1000001          ADD      r0,r0,#1              ;7958
004d76  87a0              STRH     r0,[r4,#0x3c]         ;7958
004d78  e0c9              B        |L1.20238|
                  |L1.19834|
004d7a  f100000a          ADD      r0,r0,#0xa            ;7959
004d7e  87a0              STRH     r0,[r4,#0x3c]         ;7959
004d80  e0c5              B        |L1.20238|
                  |L1.19842|
004d82  eb030283          ADD      r2,r3,r3,LSL #2       ;7961
004d86  428a              CMP      r2,r1                 ;7961
004d88  dd0e              BLE      |L1.19880|
004d8a  f04f011a          MOV      r1,#0x1a              ;7963
004d8e  f8841020          STRB     r1,[r4,#0x20]         ;7963
004d92  f8b41068          LDRH     r1,[r4,#0x68]         ;7964  ; cntrl_stat_blok_cnt
004d96  b119              CBZ      r1,|L1.19872|
004d98  f1000001          ADD      r0,r0,#1              ;7964
004d9c  87a0              STRH     r0,[r4,#0x3c]         ;7964
004d9e  e0b6              B        |L1.20238|
                  |L1.19872|
004da0  f1000002          ADD      r0,r0,#2              ;7965
004da4  87a0              STRH     r0,[r4,#0x3c]         ;7965
004da6  e0b2              B        |L1.20238|
                  |L1.19880|
004da8  ebb10f42          CMP      r1,r2,LSL #1          ;7967
004dac  da06              BGE      |L1.19900|
004dae  f04f011b          MOV      r1,#0x1b              ;7969
004db2  f8841020          STRB     r1,[r4,#0x20]         ;7969
004db6  f1000001          ADD      r0,r0,#1              ;7970
004dba  87a0              STRH     r0,[r4,#0x3c]         ;7970
                  |L1.19900|
004dbc  e0a7              B        |L1.20238|
                  |L1.19902|
004dbe  ea4f7ae8          ASR      r10,r8,#31            ;7973
004dc2  eb08789a          ADD      r8,r8,r10,LSR #30     ;7973
004dc6  eba208a8          SUB      r8,r2,r8,ASR #2       ;7973
004dca  45e0              CMP      r8,r12                ;7973
004dcc  dd21              BLE      |L1.19986|
004dce  f04f021c          MOV      r2,#0x1c              ;7975
004dd2  f8842020          STRB     r2,[r4,#0x20]         ;7975
004dd6  eb030283          ADD      r2,r3,r3,LSL #2       ;7976
004dda  428a              CMP      r2,r1                 ;7976
004ddc  dd0e              BLE      |L1.19964|
004dde  f04f011d          MOV      r1,#0x1d              ;7978
004de2  f8841020          STRB     r1,[r4,#0x20]         ;7978
004de6  f8b41068          LDRH     r1,[r4,#0x68]         ;7979  ; cntrl_stat_blok_cnt
004dea  b119              CBZ      r1,|L1.19956|
004dec  f1000001          ADD      r0,r0,#1              ;7979
004df0  87a0              STRH     r0,[r4,#0x3c]         ;7979
004df2  e08c              B        |L1.20238|
                  |L1.19956|
004df4  f1000002          ADD      r0,r0,#2              ;7980
004df8  87a0              STRH     r0,[r4,#0x3c]         ;7980
004dfa  e088              B        |L1.20238|
                  |L1.19964|
004dfc  ebb10f42          CMP      r1,r2,LSL #1          ;7982
004e00  da06              BGE      |L1.19984|
004e02  f04f011e          MOV      r1,#0x1e              ;7984
004e06  f8841020          STRB     r1,[r4,#0x20]         ;7984
004e0a  f1000001          ADD      r0,r0,#1              ;7985
004e0e  87a0              STRH     r0,[r4,#0x3c]         ;7985
                  |L1.19984|
004e10  e07d              B        |L1.20238|
                  |L1.19986|
004e12  1e52              SUBS     r2,r2,#1              ;7988
004e14  4594              CMP      r12,r2                ;7988
004e16  da7a              BGE      |L1.20238|
004e18  f04f021f          MOV      r2,#0x1f              ;7990
004e1c  f8842020          STRB     r2,[r4,#0x20]         ;7990
004e20  eb030283          ADD      r2,r3,r3,LSL #2       ;7991
004e24  ebb10f42          CMP      r1,r2,LSL #1          ;7991
004e28  da71              BGE      |L1.20238|
004e2a  f04f0120          MOV      r1,#0x20              ;7993
004e2e  f8841020          STRB     r1,[r4,#0x20]         ;7993
004e32  f1000001          ADD      r0,r0,#1              ;7994
004e36  87a0              STRH     r0,[r4,#0x3c]         ;7994
004e38  e069              B        |L1.20238|
004e3a  e7ff              B        |L1.20028|
                  |L1.20028|
004e3c  dd67              BLE      |L1.20238|
004e3e  f04f0121          MOV      r1,#0x21              ;8000
004e42  f8841020          STRB     r1,[r4,#0x20]         ;8000
004e46  f9b81000          LDRSH    r1,[r8,#0]            ;8001  ; UB0
004e4a  f9bb3000          LDRSH    r3,[r11,#0]           ;8001  ; UB20
004e4e  eba10103          SUB      r1,r1,r3              ;8001
004e52  eb010302          ADD      r3,r1,r2              ;8001
004e56  4563              CMP      r3,r12                ;8001
004e58  da0e              BGE      |L1.20088|
004e5a  f04f0122          MOV      r1,#0x22              ;8003
004e5e  f8841020          STRB     r1,[r4,#0x20]         ;8003
004e62  f8b41068          LDRH     r1,[r4,#0x68]         ;8004  ; cntrl_stat_blok_cnt
004e66  b119              CBZ      r1,|L1.20080|
004e68  f1a00001          SUB      r0,r0,#1              ;8004
004e6c  87a0              STRH     r0,[r4,#0x3c]         ;8004
004e6e  e04e              B        |L1.20238|
                  |L1.20080|
004e70  f1a0000a          SUB      r0,r0,#0xa            ;8005
004e74  87a0              STRH     r0,[r4,#0x3c]         ;8005
004e76  e04a              B        |L1.20238|
                  |L1.20088|
004e78  17cb              ASRS     r3,r1,#31             ;8007
004e7a  eb017193          ADD      r1,r1,r3,LSR #30      ;8007
004e7e  eb0201a1          ADD      r1,r2,r1,ASR #2       ;8007
004e82  4561              CMP      r1,r12                ;8007
004e84  da39              BGE      |L1.20218|
004e86  f04f0123          MOV      r1,#0x23              ;8009
004e8a  f8841020          STRB     r1,[r4,#0x20]         ;8009
004e8e  f8b41068          LDRH     r1,[r4,#0x68]         ;8010  ; cntrl_stat_blok_cnt
004e92  b369              CBZ      r1,|L1.20208|
004e94  f1a00001          SUB      r0,r0,#1              ;8010
004e98  87a0              STRH     r0,[r4,#0x3c]         ;8010
004e9a  e038              B        |L1.20238|
                  |L1.20124|
                          DCD      num_necc
                  |L1.20128|
                          DCD      IZMAX
                  |L1.20132|
                          DCD      ||area_number.25||
                  |L1.20136|
                          DCD      speedChIsOn
                  |L1.20140|
                          DCD      sp_ch_stat
                  |L1.20144|
                          DCD      speedChrgCurr
                  |L1.20148|
                          DCD      UZ_IMAX
                  |L1.20152|
                          DCD      FZ_IMAX1
                  |L1.20156|
                          DCD      FZ_IMAX2
                  |L1.20160|
                          DCD      bat
                  |L1.20164|
                          DCD      REG_SPEED
                  |L1.20168|
                          DCD      bps_U
                  |L1.20172|
                          DCD      u_necc
                  |L1.20176|
                          DCD      bps
                  |L1.20180|
                          DCD      ica_cntrl_hndl_cnt
                  |L1.20184|
                          DCD      mess_data
                  |L1.20188|
                          DCD      load_U
                  |L1.20192|
                          DCD      USIGN
                  |L1.20196|
                          DCD      bIBAT_SMKLBR
                  |L1.20200|
                          DCD      UB0
                  |L1.20204|
                          DCD      UB20
                  |L1.20208|
004ef0  e7ff              B        |L1.20210|
                  |L1.20210|
004ef2  f1a00002          SUB      r0,r0,#2              ;8011
004ef6  87a0              STRH     r0,[r4,#0x3c]         ;8011
004ef8  e009              B        |L1.20238|
                  |L1.20218|
004efa  1c52              ADDS     r2,r2,#1              ;8013
004efc  4594              CMP      r12,r2                ;8013
004efe  dd06              BLE      |L1.20238|
004f00  f04f0124          MOV      r1,#0x24              ;8015
004f04  f8841020          STRB     r1,[r4,#0x20]         ;8015
004f08  f1a00001          SUB      r0,r0,#1              ;8016
004f0c  87a0              STRH     r0,[r4,#0x3c]         ;8016
                  |L1.20238|
004f0e  48ff              LDR      r0,|L1.21260|
004f10  f8941021          LDRB     r1,[r4,#0x21]         ;8020  ; vz1_stat
004f14  7800              LDRB     r0,[r0,#0]            ;8020  ; hv_vz_stat
004f16  4308              ORRS     r0,r0,r1              ;8020
004f18  f8941024          LDRB     r1,[r4,#0x24]         ;8020  ; vz2_stat
004f1c  4308              ORRS     r0,r0,r1              ;8020
004f1e  d10d              BNE      |L1.20284|
004f20  48fb              LDR      r0,|L1.21264|
004f22  7840              LDRB     r0,[r0,#1]            ;8022  ; sk_stat
004f24  2801              CMP      r0,#1                 ;8022
004f26  d109              BNE      |L1.20284|
004f28  48fa              LDR      r0,|L1.21268|
004f2a  7840              LDRB     r0,[r0,#1]            ;8022  ; sk_stat_old
004f2c  b930              CBNZ     r0,|L1.20284|
004f2e  48fa              LDR      r0,|L1.21272|
004f30  8800              LDRH     r0,[r0,#0]            ;8022  ; VZ_KIND
004f32  2801              CMP      r0,#1                 ;8022
004f34  d102              BNE      |L1.20284|
004f36  f04f0032          MOV      r0,#0x32              ;8022
004f3a  87a0              STRH     r0,[r4,#0x3c]         ;8022
                  |L1.20284|
004f3c  f24032f2          MOV      r2,#0x3f2             ;8025
004f40  210a              MOVS     r1,#0xa               ;8025
004f42  48f6              LDR      r0,|L1.21276|
004f44  f7fffffe          BL       gran
004f48  8fa0              LDRH     r0,[r4,#0x3c]         ;8026  ; cntrl_stat_new
004f4a  8520              STRH     r0,[r4,#0x28]         ;8026
004f4c  84e0              STRH     r0,[r4,#0x26]         ;8027
004f4e  48f4              LDR      r0,|L1.21280|
004f50  f9b00000          LDRSH    r0,[r0,#0]            ;8029  ; ICA_EN
004f54  b930              CBNZ     r0,|L1.20324|
004f56  8839              LDRH     r1,[r7,#0]  ; ica_cntrl_hndl_cnt
004f58  b121              CBZ      r1,|L1.20324|
;;;8032   			{
;;;8033   			cntrl_stat = ica_cntrl_hndl;
004f5a  49f2              LDR      r1,|L1.21284|
004f5c  8809              LDRH     r1,[r1,#0]  ; ica_cntrl_hndl
004f5e  84e1              STRH     r1,[r4,#0x26]
;;;8034   			cntrl_stat_new = ica_cntrl_hndl;//=10*PWM_START;
004f60  87a1              STRH     r1,[r4,#0x3c]
;;;8035   			cntrl_stat_old = ica_cntrl_hndl;//=10*PWM_START;
004f62  8521              STRH     r1,[r4,#0x28]
                  |L1.20324|
;;;8036   			}
;;;8037   		}
;;;8038   	
;;;8039   	if((ICA_EN==1)||(ICA_EN==2))
004f64  2801              CMP      r0,#1
004f66  d001              BEQ      |L1.20332|
004f68  2802              CMP      r0,#2
004f6a  d104              BNE      |L1.20342|
                  |L1.20332|
;;;8040   		{
;;;8041   		cntrl_stat=cntrl_stat_new+ica_u_necc;
004f6c  49ee              LDR      r1,|L1.21288|
004f6e  8fa0              LDRH     r0,[r4,#0x3c]  ; cntrl_stat_new
004f70  8809              LDRH     r1,[r1,#0]  ; ica_u_necc
004f72  4408              ADD      r0,r0,r1
004f74  84e0              STRH     r0,[r4,#0x26]
                  |L1.20342|
;;;8042   		}			
;;;8043   	}
;;;8044   #else
;;;8045   else if((b1Hz_ch)&&((!bIBAT_SMKLBR)||(bps[8]._cnt>40)))
;;;8046   	{
;;;8047   	cntrl_hndl_plazma=37;
;;;8048   	cntrl_stat_new=cntrl_stat_old;
;;;8049   	
;;;8050   	if((Ibmax/10)>(2*IZMAX_))
;;;8051   		{
;;;8052   		cntrl_hndl_plazma=38;
;;;8053             if(cntrl_stat_blok_cnt)cntrl_stat_new--;
;;;8054   		else	cntrl_stat_new-=10;
;;;8055   		}		
;;;8056   	else if(((Ibmax/10)<(IZMAX_*2))&&(Ibmax>(IZMAX_*15)))
;;;8057   		{
;;;8058   		cntrl_hndl_plazma=39;
;;;8059             if(cntrl_stat_blok_cnt)cntrl_stat_new--;
;;;8060             else	cntrl_stat_new-=3;
;;;8061   		}   
;;;8062   	else if((Ibmax<(IZMAX_*15))&&((Ibmax/10)>IZMAX_))
;;;8063   		{
;;;8064   		cntrl_hndl_plazma=40;
;;;8065   		cntrl_stat_new--;
;;;8066   		}
;;;8067   		
;;;8068   	else if(load_U<u_necc)
;;;8069   		{
;;;8070   		cntrl_hndl_plazma=41;
;;;8071   		if(load_U<(u_necc-(UB0-UB20)))
;;;8072   			{
;;;8073   			cntrl_hndl_plazma=42;
;;;8074   			if(Ibmax<0)
;;;8075   				{
;;;8076   				cntrl_hndl_plazma=43;
;;;8077                       if(cntrl_stat_blok_cnt)cntrl_stat_new++;
;;;8078   				else cntrl_stat_new+=10;
;;;8079   				}
;;;8080   			else if(Ibmax<(IZMAX_*5))
;;;8081   				{
;;;8082   				cntrl_hndl_plazma=44;
;;;8083                       if(cntrl_stat_blok_cnt)cntrl_stat_new++;
;;;8084   				else	cntrl_stat_new+=2;
;;;8085   				}
;;;8086   			else if(Ibmax<((IZMAX_*95)/10))
;;;8087   				{
;;;8088   				cntrl_hndl_plazma=45;
;;;8089   				cntrl_stat_new++;
;;;8090   				}					
;;;8091   			}
;;;8092   		else if(load_U<(u_necc-((UB0-UB20)/4)))
;;;8093   			{
;;;8094   			cntrl_hndl_plazma=46;
;;;8095   			if(Ibmax<(IZMAX_*5))
;;;8096   				{
;;;8097   				cntrl_hndl_plazma=47;
;;;8098                       if(cntrl_stat_blok_cnt)cntrl_stat_new++;
;;;8099   				else	cntrl_stat_new+=2;
;;;8100   				}
;;;8101   			else if(Ibmax<((IZMAX_*95)/10))
;;;8102   				{
;;;8103   				cntrl_hndl_plazma=48;
;;;8104   				cntrl_stat_new++;
;;;8105   				}					
;;;8106   			}	
;;;8107   		else if(load_U<(u_necc-1))
;;;8108   			{
;;;8109   			cntrl_hndl_plazma=49;
;;;8110   			if(Ibmax<((IZMAX_*95)/10))
;;;8111   				{
;;;8112   				cntrl_hndl_plazma=50;
;;;8113   				cntrl_stat_new++;
;;;8114   				}					
;;;8115   			}					
;;;8116   		}	
;;;8117   	else if((load_U>u_necc)/*&&(!cntrl_blok)*/)
;;;8118   		{
;;;8119   		cntrl_hndl_plazma=51;
;;;8120   		if(load_U>(u_necc+(UB0-UB20)))
;;;8121   			{
;;;8122   			cntrl_hndl_plazma=52;
;;;8123                  if(cntrl_stat_blok_cnt)cntrl_stat_new--;
;;;8124   			else	cntrl_stat_new-=10;
;;;8125   			}
;;;8126   		else if(load_U>(u_necc+((UB0-UB20)/4)))
;;;8127   			{
;;;8128   			cntrl_hndl_plazma=53;
;;;8129                  if(cntrl_stat_blok_cnt)cntrl_stat_new--;
;;;8130   			else cntrl_stat_new-=2;
;;;8131   			}	
;;;8132   		else if(load_U>(u_necc+1))
;;;8133   			{
;;;8134   			cntrl_hndl_plazma=54;
;;;8135   			cntrl_stat_new--;
;;;8136   			}					
;;;8137   		}
;;;8138   
;;;8139   	gran(&cntrl_stat_new,10,1010);			
;;;8140   	cntrl_stat_old=cntrl_stat_new;
;;;8141   	cntrl_stat=cntrl_stat_new;	
;;;8142   	}
;;;8143   #endif
;;;8144   
;;;8145   iiii=0;
004f76  72e5              STRB     r5,[r4,#0xb]
;;;8146   for(i=0;i<NUMIST;i++)
004f78  72a5              STRB     r5,[r4,#0xa]
004f7a  48ec              LDR      r0,|L1.21292|
004f7c  f9b01000          LDRSH    r1,[r0,#0]
004f80  e00c              B        |L1.20380|
                  |L1.20354|
;;;8147        {
;;;8148        if(bps[i]._cnt<30)iiii=1;
004f82  ebc002c0          RSB      r2,r0,r0,LSL #3
004f86  eb021200          ADD      r2,r2,r0,LSL #4
004f8a  eb090282          ADD      r2,r9,r2,LSL #2
004f8e  78d2              LDRB     r2,[r2,#3]
004f90  2a1e              CMP      r2,#0x1e
004f92  d200              BCS      |L1.20374|
004f94  72e6              STRB     r6,[r4,#0xb]
                  |L1.20374|
004f96  f1000001          ADD      r0,r0,#1              ;8146
004f9a  72a0              STRB     r0,[r4,#0xa]          ;8146
                  |L1.20380|
004f9c  7aa0              LDRB     r0,[r4,#0xa]          ;8146  ; i
004f9e  4288              CMP      r0,r1                 ;8146
004fa0  dbef              BLT      |L1.20354|
;;;8149        }
;;;8150   
;;;8151   if(iiii==0)
004fa2  7ae0              LDRB     r0,[r4,#0xb]  ; iiii
004fa4  b920              CBNZ     r0,|L1.20400|
;;;8152        {
;;;8153        cntrl_stat=600;	
004fa6  f44f7016          MOV      r0,#0x258
004faa  84e0              STRH     r0,[r4,#0x26]
;;;8154        cntrl_stat_old=600;
004fac  8520              STRH     r0,[r4,#0x28]
;;;8155        cntrl_stat_new=600;
004fae  87a0              STRH     r0,[r4,#0x3c]
                  |L1.20400|
;;;8156   	#ifdef UKU_TELECORE2015
;;;8157   	//cntrl_stat=0;
;;;8158   	//cntrl_stat_old=0;
;;;8159   	//cntrl_stat_new=0;
;;;8160   	#endif
;;;8161        }
;;;8162   
;;;8163   #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;8164   if(ica_cntrl_hndl_cnt)	ica_cntrl_hndl_cnt--;
004fb0  f9b70000          LDRSH    r0,[r7,#0]  ; ica_cntrl_hndl_cnt
004fb4  b110              CBZ      r0,|L1.20412|
004fb6  f1a00001          SUB      r0,r0,#1
004fba  8038              STRH     r0,[r7,#0]
                  |L1.20412|
;;;8165   
;;;8166   
;;;8167   
;;;8168   #endif
;;;8169   
;;;8170   
;;;8171   gran(&cntrl_stat,10,1010); 
004fbc  48d7              LDR      r0,|L1.21276|
004fbe  f24032f2          MOV      r2,#0x3f2
004fc2  210a              MOVS     r1,#0xa
004fc4  3816              SUBS     r0,r0,#0x16
004fc6  f7fffffe          BL       gran
;;;8172   b1Hz_ch=0;
004fca  7265              STRB     r5,[r4,#9]
                  |L1.20428|
;;;8173   }
004fcc  e8bd9ff0          POP      {r4-r12,pc}
;;;8174   #endif
                          ENDP

                  ext_drv PROC
;;;8663   //-----------------------------------------------
;;;8664   void ext_drv(void)
004fd0  e92d5ff0          PUSH     {r4-r12,lr}
;;;8665   {
;;;8666   char i;
;;;8667   
;;;8668   
;;;8669   for(i=0;i<NUMSK;i++)
004fd4  f04f0000          MOV      r0,#0
004fd8  4ad6              LDR      r2,|L1.21300|
;;;8670   	{
;;;8671   	#ifdef UKU_MGTS
;;;8672   	if(adc_buff_[sk_buff_RSTKM[i]]<2000)
;;;8673   	#endif
;;;8674   	#ifdef UKU_RSTKM
;;;8675   	if(adc_buff_[sk_buff_RSTKM[i]]<2000)
;;;8676   	#endif
;;;8677   	#ifdef UKU_3U
;;;8678   	if(adc_buff_[sk_buff_3U[i]]<2000)
;;;8679   	#endif
;;;8680   	#ifdef UKU_GLONASS
;;;8681   	if(adc_buff_[sk_buff_GLONASS[i]]<2000)
;;;8682   	#endif
;;;8683   	#ifdef UKU_KONTUR
;;;8684   	if(adc_buff_[sk_buff_KONTUR[i]]<2000)
;;;8685   	#endif
;;;8686   	#ifdef UKU_6U
;;;8687   	if(adc_buff_[sk_buff_6U[i]]<2000)
;;;8688   	#endif
;;;8689   	#ifdef UKU_220
;;;8690   	if(adc_buff_[sk_buff_220[i]]<2000)
;;;8691   	#endif
;;;8692   	#ifdef UKU_220_V2
;;;8693   	if(adc_buff_[sk_buff_220[i]]<2000)
;;;8694   	#endif
;;;8695   	#ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;8696   	if(adc_buff_[sk_buff_220[i]]<2000)
;;;8697   	#endif
;;;8698   	#ifdef UKU_TELECORE2015	
;;;8699   	if(adc_buff_[sk_buff_TELECORE2015[i]]<2000)	 //TODO
;;;8700   	#endif
;;;8701   	#ifdef UKU_TELECORE2017
;;;8702   	if(adc_buff_[sk_buff_TELECORE2015[i]]<2000)	 //TODO
;;;8703   	#endif
;;;8704   	#ifdef IPS_SGEP_GAZPROM
;;;8705   	if(adc_buff_[sk_buff_6U[i]]<2000)
;;;8706   	#endif		
;;;8707   		{
;;;8708   		if(sk_cnt[i]<10)
004fda  4bd5              LDR      r3,|L1.21296|
;;;8709   			{
;;;8710   			sk_cnt[i]++;
;;;8711   			if(sk_cnt[i]>=10)
;;;8712   				{
;;;8713   				sk_stat[i]=ssON;
004fdc  4dcc              LDR      r5,|L1.21264|
004fde  f04f0a01          MOV      r10,#1
;;;8714   				}
;;;8715   			}
;;;8716   		else 
;;;8717   			{
;;;8718   			sk_cnt[i]=10;
004fe2  f04f0b0a          MOV      r11,#0xa
004fe6  4606              MOV      r6,r0                 ;8669
004fe8  f9b24000          LDRSH    r4,[r2,#0]            ;8669
004fec  e025              B        |L1.20538|
                  |L1.20462|
004fee  49d2              LDR      r1,|L1.21304|
004ff0  4fd2              LDR      r7,|L1.21308|
004ff2  5c09              LDRB     r1,[r1,r0]            ;8696
004ff4  f9371011          LDRSH    r1,[r7,r1,LSL #1]     ;8696
004ff8  f5b16ffa          CMP      r1,#0x7d0             ;8696
004ffc  da0e              BGE      |L1.20508|
004ffe  5619              LDRSB    r1,[r3,r0]            ;8708
005000  290a              CMP      r1,#0xa               ;8708
005002  da08              BGE      |L1.20502|
005004  f1010101          ADD      r1,r1,#1              ;8710
005008  b249              SXTB     r1,r1                 ;8710
00500a  5419              STRB     r1,[r3,r0]            ;8710
00500c  290a              CMP      r1,#0xa               ;8711
00500e  db11              BLT      |L1.20532|
005010  f805a000          STRB     r10,[r5,r0]           ;8713
005014  e00e              B        |L1.20532|
                  |L1.20502|
005016  f803b000          STRB     r11,[r3,r0]
00501a  e00b              B        |L1.20532|
                  |L1.20508|
;;;8719   			}
;;;8720                  
;;;8721   		}
;;;8722   	else
;;;8723   		{
;;;8724   		if(sk_cnt[i]>0)
00501c  5619              LDRSB    r1,[r3,r0]
00501e  2900              CMP      r1,#0
005020  dd07              BLE      |L1.20530|
;;;8725   			{
;;;8726   			sk_cnt[i]--;
005022  f1a10101          SUB      r1,r1,#1
005026  b249              SXTB     r1,r1
005028  5419              STRB     r1,[r3,r0]
;;;8727   			if(sk_cnt[i]<=0)
00502a  2900              CMP      r1,#0
00502c  dc02              BGT      |L1.20532|
;;;8728   				{
;;;8729   				sk_stat[i]=ssOFF;
00502e  542e              STRB     r6,[r5,r0]
005030  e000              B        |L1.20532|
                  |L1.20530|
;;;8730   				}
;;;8731   			}
;;;8732   		else 
;;;8733   			{
;;;8734   			sk_cnt[i]=0;
005032  541e              STRB     r6,[r3,r0]
                  |L1.20532|
005034  f1000001          ADD      r0,r0,#1              ;8669
005038  b2c0              UXTB     r0,r0                 ;8669
                  |L1.20538|
00503a  42a0              CMP      r0,r4                 ;8669
00503c  dbd7              BLT      |L1.20462|
;;;8735   			}
;;;8736   		}
;;;8737   	}
;;;8738   
;;;8739   for(i=0;i<NUMSK;i++)
00503e  f04f0400          MOV      r4,#0
;;;8740   	{
;;;8741   	if(((SK_SIGN[i]==0)&&(sk_stat[i]==ssON))||((SK_SIGN[i])&&(sk_stat[i]==ssOFF)) )
;;;8742   		{
;;;8743   		if(sk_av_cnt[i]<10)
005042  f8df92fc          LDR      r9,|L1.21312|
;;;8744   			{
;;;8745   			sk_av_cnt[i]++;
;;;8746   			if(sk_av_cnt[i]>=10)
;;;8747   				{
;;;8748   				sk_av_stat[i]=sasON;
005046  4fbf              LDR      r7,|L1.21316|
;;;8749   				}
;;;8750   			}
;;;8751   		else 
;;;8752   			{
;;;8753   			sk_av_cnt[i]=10;
;;;8754   			}
;;;8755   		}
;;;8756   	else
;;;8757   		{
;;;8758   		if(sk_av_cnt[i]>=0)
;;;8759   			{
;;;8760   			sk_av_cnt[i]--;
;;;8761   			if(sk_av_cnt[i]<=0)
;;;8762   				{
;;;8763   				sk_av_stat[i]=sasOFF;
;;;8764   				}
;;;8765   			}
;;;8766   		else 
;;;8767   			{
;;;8768   			sk_av_cnt[i]=0;
;;;8769   			}
;;;8770   		}
;;;8771   
;;;8772   #ifndef UKU_KONTUR
;;;8773   	if(sk_av_stat_old[i]!=sk_av_stat[i])
005048  f8df82fc          LDR      r8,|L1.21320|
00504c  e083              B        |L1.20822|
                  |L1.20558|
00504e  48bf              LDR      r0,|L1.21324|
005050  f9300014          LDRSH    r0,[r0,r4,LSL #1]     ;8741
005054  b910              CBNZ     r0,|L1.20572|
005056  5d29              LDRB     r1,[r5,r4]            ;8741
005058  2901              CMP      r1,#1                 ;8741
00505a  d00f              BEQ      |L1.20604|
                  |L1.20572|
00505c  b108              CBZ      r0,|L1.20578|
00505e  5d28              LDRB     r0,[r5,r4]            ;8741
005060  b160              CBZ      r0,|L1.20604|
                  |L1.20578|
005062  f9190004          LDRSB    r0,[r9,r4]            ;8758
005066  2800              CMP      r0,#0                 ;8758
005068  db19              BLT      |L1.20638|
00506a  f1a00001          SUB      r0,r0,#1              ;8760
00506e  b240              SXTB     r0,r0                 ;8760
005070  f8090004          STRB     r0,[r9,r4]            ;8760
005074  2800              CMP      r0,#0                 ;8761
005076  dc14              BGT      |L1.20642|
005078  553e              STRB     r6,[r7,r4]            ;8763
00507a  e012              B        |L1.20642|
                  |L1.20604|
00507c  f9190004          LDRSB    r0,[r9,r4]            ;8743
005080  280a              CMP      r0,#0xa               ;8743
005082  da09              BGE      |L1.20632|
005084  f1000001          ADD      r0,r0,#1              ;8745
005088  b240              SXTB     r0,r0                 ;8745
00508a  f8090004          STRB     r0,[r9,r4]            ;8745
00508e  280a              CMP      r0,#0xa               ;8746
005090  db07              BLT      |L1.20642|
005092  f807a004          STRB     r10,[r7,r4]           ;8748
005096  e004              B        |L1.20642|
                  |L1.20632|
005098  f809b004          STRB     r11,[r9,r4]           ;8753
00509c  e001              B        |L1.20642|
                  |L1.20638|
00509e  f8096004          STRB     r6,[r9,r4]            ;8768
                  |L1.20642|
0050a2  f8181004          LDRB     r1,[r8,r4]
0050a6  5d38              LDRB     r0,[r7,r4]
0050a8  4281              CMP      r1,r0
0050aa  d04e              BEQ      |L1.20810|
;;;8774   		{
;;;8775   		plazma_sk++;
0050ac  4a9b              LDR      r2,|L1.21276|
0050ae  3a3c              SUBS     r2,r2,#0x3c
0050b0  8f51              LDRH     r1,[r2,#0x3a]  ; plazma_sk
0050b2  f1010101          ADD      r1,r1,#1
0050b6  8751              STRH     r1,[r2,#0x3a]
;;;8776   		if(sk_av_stat[i]==sasON)
0050b8  2801              CMP      r0,#1
0050ba  d007              BEQ      |L1.20684|
;;;8777   			{
;;;8778   			if(i==0)snmp_trap_send("SK #1 Alarm",15,1,1);
;;;8779   			else if(i==1)
;;;8780   				{
;;;8781   				#ifndef UKU_TELEKORE2017
;;;8782   				snmp_trap_send("SK #2 Alarm",15,2,1);
;;;8783   				#endif
;;;8784   				#ifdef UKU_TELEKORE2017
;;;8785   				snmp_trap_send("Door open",15,2,1);
;;;8786   				#endif
;;;8787   				}
;;;8788   			else if(i==2)snmp_trap_send("SK #3 Alarm",15,3,1);
;;;8789   			else if(i==3)snmp_trap_send("SK #4 Alarm",15,4,1);
;;;8790   			}
;;;8791   		else 
;;;8792   			{
;;;8793   			if(i==0)snmp_trap_send("SK #1 Alarm is off",15,1,0);
0050bc  b354              CBZ      r4,|L1.20756|
;;;8794   			else if(i==1)
0050be  2c01              CMP      r4,#1
0050c0  d02f              BEQ      |L1.20770|
;;;8795   				{
;;;8796   				#ifndef UKU_TELEKORE2017
;;;8797   				snmp_trap_send("SK #2 Alarm is off",15,2,0);
;;;8798   				#endif
;;;8799   				#ifdef UKU_TELEKORE2017
;;;8800   				snmp_trap_send("Door open clear",15,2,0);
;;;8801   				#endif
;;;8802   				}
;;;8803   			else if(i==2)snmp_trap_send("SK #3 Alarm is off",15,3,0);
0050c2  2c02              CMP      r4,#2
0050c4  d034              BEQ      |L1.20784|
;;;8804   			else if(i==3)snmp_trap_send("SK #4 Alarm is off",15,4,0);
0050c6  2c03              CMP      r4,#3
0050c8  d039              BEQ      |L1.20798|
0050ca  e03e              B        |L1.20810|
                  |L1.20684|
0050cc  b134              CBZ      r4,|L1.20700|
0050ce  2c01              CMP      r4,#1                 ;8779
0050d0  d00b              BEQ      |L1.20714|
0050d2  2c02              CMP      r4,#2                 ;8788
0050d4  d010              BEQ      |L1.20728|
0050d6  2c03              CMP      r4,#3                 ;8789
0050d8  d015              BEQ      |L1.20742|
0050da  e036              B        |L1.20810|
                  |L1.20700|
0050dc  2301              MOVS     r3,#1                 ;8778
0050de  461a              MOV      r2,r3                 ;8778
0050e0  210f              MOVS     r1,#0xf               ;8778
0050e2  a09b              ADR      r0,|L1.21328|
0050e4  f7fffffe          BL       snmp_trap_send
0050e8  e02f              B        |L1.20810|
                  |L1.20714|
0050ea  2301              MOVS     r3,#1                 ;8782
0050ec  2202              MOVS     r2,#2                 ;8782
0050ee  210f              MOVS     r1,#0xf               ;8782
0050f0  a09a              ADR      r0,|L1.21340|
0050f2  f7fffffe          BL       snmp_trap_send
0050f6  e028              B        |L1.20810|
                  |L1.20728|
0050f8  2301              MOVS     r3,#1                 ;8788
0050fa  2203              MOVS     r2,#3                 ;8788
0050fc  210f              MOVS     r1,#0xf               ;8788
0050fe  a09a              ADR      r0,|L1.21352|
005100  f7fffffe          BL       snmp_trap_send
005104  e021              B        |L1.20810|
                  |L1.20742|
005106  2301              MOVS     r3,#1                 ;8789
005108  2204              MOVS     r2,#4                 ;8789
00510a  210f              MOVS     r1,#0xf               ;8789
00510c  a099              ADR      r0,|L1.21364|
00510e  f7fffffe          BL       snmp_trap_send
005112  e01a              B        |L1.20810|
                  |L1.20756|
005114  2300              MOVS     r3,#0                 ;8793
005116  2201              MOVS     r2,#1                 ;8793
005118  210f              MOVS     r1,#0xf               ;8793
00511a  a099              ADR      r0,|L1.21376|
00511c  f7fffffe          BL       snmp_trap_send
005120  e013              B        |L1.20810|
                  |L1.20770|
005122  2300              MOVS     r3,#0                 ;8797
005124  2202              MOVS     r2,#2                 ;8797
005126  210f              MOVS     r1,#0xf               ;8797
005128  a09a              ADR      r0,|L1.21396|
00512a  f7fffffe          BL       snmp_trap_send
00512e  e00c              B        |L1.20810|
                  |L1.20784|
005130  2300              MOVS     r3,#0                 ;8803
005132  2203              MOVS     r2,#3                 ;8803
005134  210f              MOVS     r1,#0xf               ;8803
005136  a09c              ADR      r0,|L1.21416|
005138  f7fffffe          BL       snmp_trap_send
00513c  e005              B        |L1.20810|
                  |L1.20798|
00513e  2300              MOVS     r3,#0
005140  2204              MOVS     r2,#4
005142  210f              MOVS     r1,#0xf
005144  a09d              ADR      r0,|L1.21436|
005146  f7fffffe          BL       snmp_trap_send
                  |L1.20810|
;;;8805   			}
;;;8806   	 	}
;;;8807   #endif
;;;8808   
;;;8809   #ifdef UKU_KONTUR
;;;8810   	if(sk_av_stat_old[i]!=sk_av_stat[i])
;;;8811   		{
;;;8812   		plazma_sk++;
;;;8813   		if(sk_av_stat[i]==sasON)
;;;8814   			{
;;;8815   			if(i==0)snmp_trap_send("Door is opened",15,1,1);
;;;8816   			else if(i==1)snmp_trap_send("Smoke Alarm",15,2,1);
;;;8817   			else if(i==2)snmp_trap_send("Shock Sensor Alarm",15,3,1);
;;;8818   			else if(i==3)snmp_trap_send("SK #4 Alarm",15,4,1);
;;;8819   			}
;;;8820   		else 
;;;8821   			{
;;;8822   			if(i==0)snmp_trap_send("Door is closed",15,1,0);
;;;8823   			else if(i==1)snmp_trap_send("Smoke Alarm is off",15,2,0);
;;;8824   			else if(i==2)snmp_trap_send("Shock Sensor Alarm is off",15,3,0);
;;;8825   			else if(i==3)snmp_trap_send("SK #4 Alarm is off",15,4,0);
;;;8826   			}
;;;8827   	 	}
;;;8828   #endif
;;;8829   	sk_av_stat_old[i]=sk_av_stat[i];
00514a  5d38              LDRB     r0,[r7,r4]
00514c  f8080004          STRB     r0,[r8,r4]
005150  f1040401          ADD      r4,r4,#1              ;8739
005154  b2e4              UXTB     r4,r4                 ;8739
                  |L1.20822|
005156  4877              LDR      r0,|L1.21300|
005158  f9b00000          LDRSH    r0,[r0,#0]            ;8739  ; NUMSK
00515c  4284              CMP      r4,r0                 ;8739
00515e  f6ffaf76          BLT      |L1.20558|
;;;8830   	}
;;;8831   }
005162  e733              B        |L1.20428|
;;;8832   
                          ENDP

                  zar_superviser_start PROC
;;;8869   //-----------------------------------------------
;;;8870   void zar_superviser_start(void)
005164  4a9a              LDR      r2,|L1.21456|
;;;8871   {
;;;8872   sign_U[0]=1;
005166  f04f0001          MOV      r0,#1
00516a  7010              STRB     r0,[r2,#0]
;;;8873   sign_I[0]=1;
00516c  4999              LDR      r1,|L1.21460|
00516e  7008              STRB     r0,[r1,#0]
;;;8874   sign_U[1]=1;
005170  7050              STRB     r0,[r2,#1]
;;;8875   sign_I[1]=1;
005172  7048              STRB     r0,[r1,#1]
;;;8876   
;;;8877   }
005174  4770              BX       lr
;;;8878   
                          ENDP

                  zar_superviser_drv PROC
;;;8834   //-----------------------------------------------
;;;8835   void zar_superviser_drv(void)
005176  e92d5ff0          PUSH     {r4-r12,lr}
;;;8836   {
;;;8837   
;;;8838   if(((bat[0]._Ub>u_necc_up) || (bat[0]._Ub<u_necc_dn))&&(main_kb_cnt<((TBAT*60)-30))&&(main_kb_cnt>((TBAT*60)-150))) sign_U[0]=0;
00517a  4898              LDR      r0,|L1.21468|
00517c  f8df9260          LDR      r9,|L1.21472|
005180  f8df8254          LDR      r8,|L1.21464|
005184  f9b0c000          LDRSH    r12,[r0,#0]  ; u_necc_up
005188  f9b90000          LDRSH    r0,[r9,#0]
00518c  4c63              LDR      r4,|L1.21276|
00518e  ebc01100          RSB      r1,r0,r0,LSL #4
005192  3c3c              SUBS     r4,r4,#0x3c
005194  f9b87002          LDRSH    r7,[r8,#2]  ; bat
005198  f06f0a1d          MVN      r10,#0x1d
00519c  f06f0b95          MVN      r11,#0x95
0051a0  2500              MOVS     r5,#0
0051a2  4e8b              LDR      r6,|L1.21456|
0051a4  f9b40046          LDRSH    r0,[r4,#0x46]
0051a8  eb0a0281          ADD      r2,r10,r1,LSL #2
0051ac  eb0b0381          ADD      r3,r11,r1,LSL #2
0051b0  4567              CMP      r7,r12
0051b2  dc05              BGT      |L1.20928|
0051b4  f8dfc22c          LDR      r12,|L1.21476|
0051b8  f9bcc000          LDRSH    r12,[r12,#0]  ; u_necc_dn
0051bc  4567              CMP      r7,r12
0051be  da04              BGE      |L1.20938|
                  |L1.20928|
0051c0  4282              CMP      r2,r0
0051c2  dd02              BLE      |L1.20938|
0051c4  4283              CMP      r3,r0
0051c6  da00              BGE      |L1.20938|
0051c8  7035              STRB     r5,[r6,#0]
                  |L1.20938|
;;;8839   
;;;8840   if(((bat[0]._Ib>(2*IKB)) || (bat[0]._Ib<(-IKB*2))) &&(main_kb_cnt<((TBAT*60)-30))&&(main_kb_cnt>((TBAT*60)-150))) sign_I[0]=0;
0051ca  4f87              LDR      r7,|L1.21480|
0051cc  f9b8c008          LDRSH    r12,[r8,#8]  ; bat
0051d0  f9b7e000          LDRSH    lr,[r7,#0]  ; IKB
0051d4  4f7f              LDR      r7,|L1.21460|
0051d6  ebbc0f4e          CMP      r12,lr,LSL #1
0051da  dc04              BGT      |L1.20966|
0051dc  f1ce0e00          RSB      lr,lr,#0
0051e0  ebbc0f4e          CMP      r12,lr,LSL #1
0051e4  da04              BGE      |L1.20976|
                  |L1.20966|
0051e6  4282              CMP      r2,r0
0051e8  dd02              BLE      |L1.20976|
0051ea  4283              CMP      r3,r0
0051ec  da00              BGE      |L1.20976|
0051ee  703d              STRB     r5,[r7,#0]
                  |L1.20976|
;;;8841   																 
;;;8842   if((main_kb_cnt==((TBAT*60)-10)) &&(spc_stat==spcOFF))
0051f0  f06f0209          MVN      r2,#9
0051f4  eb020181          ADD      r1,r2,r1,LSL #2
0051f8  4281              CMP      r1,r0
0051fa  d120              BNE      |L1.21054|
0051fc  7d60              LDRB     r0,[r4,#0x15]  ; spc_stat
0051fe  b9f0              CBNZ     r0,|L1.21054|
;;;8843   	{
;;;8844   	if((sign_U[0]==1) && (sign_I[0]==1) && (lc640_read_int(EE_BAT1_ZAR_CNT)!=BAT_C_REAL[0]) && (NUMBAT) && (!(bat[0]._av&1)))
005200  7830              LDRB     r0,[r6,#0]  ; sign_U
005202  2801              CMP      r0,#1
005204  d11b              BNE      |L1.21054|
005206  7838              LDRB     r0,[r7,#0]  ; sign_I
005208  2801              CMP      r0,#1
00520a  d118              BNE      |L1.21054|
00520c  f44f70ef          MOV      r0,#0x1de
005210  f7fffffe          BL       lc640_read_int
005214  4975              LDR      r1,|L1.21484|
005216  f9b11000          LDRSH    r1,[r1,#0]  ; BAT_C_REAL
00521a  4288              CMP      r0,r1
00521c  d00f              BEQ      |L1.21054|
00521e  4874              LDR      r0,|L1.21488|
005220  8800              LDRH     r0,[r0,#0]  ; NUMBAT
005222  b160              CBZ      r0,|L1.21054|
005224  f898003d          LDRB     r0,[r8,#0x3d]  ; bat
005228  07c0              LSLS     r0,r0,#31
00522a  d108              BNE      |L1.21054|
;;;8845   		{
;;;8846   		lc640_write_int(EE_BAT1_ZAR_CNT,BAT_C_REAL[0]);
00522c  f44f70ef          MOV      r0,#0x1de
005230  f7fffffe          BL       lc640_write_int
;;;8847   		superviser_cnt++;
005234  486f              LDR      r0,|L1.21492|
005236  7801              LDRB     r1,[r0,#0]  ; superviser_cnt
005238  f1010101          ADD      r1,r1,#1
00523c  7001              STRB     r1,[r0,#0]
                  |L1.21054|
;;;8848   		}
;;;8849   	
;;;8850   	}
;;;8851   
;;;8852   if(((bat[0]._Ub>u_necc_up) || (bat[1]._Ub<u_necc_dn))&&(main_kb_cnt<((TBAT*60)-30))&&(main_kb_cnt>((TBAT*60)-150))) sign_U[1]=0;
00523e  4867              LDR      r0,|L1.21468|
005240  f9b81002          LDRSH    r1,[r8,#2]  ; bat
005244  f9b00000          LDRSH    r0,[r0,#0]  ; u_necc_up
005248  4281              CMP      r1,r0
00524a  dc06              BGT      |L1.21082|
00524c  4865              LDR      r0,|L1.21476|
00524e  f9b8104e          LDRSH    r1,[r8,#0x4e]  ; bat
005252  f9b00000          LDRSH    r0,[r0,#0]  ; u_necc_dn
005256  4281              CMP      r1,r0
005258  da0e              BGE      |L1.21112|
                  |L1.21082|
00525a  f9b90000          LDRSH    r0,[r9,#0]  ; TBAT
00525e  f9b41046          LDRSH    r1,[r4,#0x46]  ; main_kb_cnt
005262  ebc01000          RSB      r0,r0,r0,LSL #4
005266  eb0a0280          ADD      r2,r10,r0,LSL #2
00526a  428a              CMP      r2,r1
00526c  dd04              BLE      |L1.21112|
00526e  eb0b0080          ADD      r0,r11,r0,LSL #2
005272  4288              CMP      r0,r1
005274  da00              BGE      |L1.21112|
005276  7075              STRB     r5,[r6,#1]
                  |L1.21112|
;;;8853   
;;;8854   if(((bat[1]._Ib>(2*IKB)) || (bat[1]._Ib<(-IKB*2))) &&(main_kb_cnt<((TBAT*60)-30))&&(main_kb_cnt>((TBAT*60)-150))) sign_I[1]=0;
005278  495b              LDR      r1,|L1.21480|
00527a  f9b80054          LDRSH    r0,[r8,#0x54]  ; bat
00527e  f9b11000          LDRSH    r1,[r1,#0]  ; IKB
005282  ebb00f41          CMP      r0,r1,LSL #1
005286  dc03              BGT      |L1.21136|
005288  4249              RSBS     r1,r1,#0
00528a  ebb00f41          CMP      r0,r1,LSL #1
00528e  da0e              BGE      |L1.21166|
                  |L1.21136|
005290  f9b90000          LDRSH    r0,[r9,#0]  ; TBAT
005294  f9b41046          LDRSH    r1,[r4,#0x46]  ; main_kb_cnt
005298  ebc01000          RSB      r0,r0,r0,LSL #4
00529c  eb0a0280          ADD      r2,r10,r0,LSL #2
0052a0  428a              CMP      r2,r1
0052a2  dd04              BLE      |L1.21166|
0052a4  eb0b0080          ADD      r0,r11,r0,LSL #2
0052a8  4288              CMP      r0,r1
0052aa  da00              BGE      |L1.21166|
0052ac  707d              STRB     r5,[r7,#1]
                  |L1.21166|
;;;8855   																 
;;;8856   if((main_kb_cnt==((TBAT*60)-10)) &&(spc_stat==spcOFF))
0052ae  f9b90000          LDRSH    r0,[r9,#0]  ; TBAT
0052b2  ebc01100          RSB      r1,r0,r0,LSL #4
0052b6  f06f0009          MVN      r0,#9
0052ba  eb000081          ADD      r0,r0,r1,LSL #2
0052be  f9b41046          LDRSH    r1,[r4,#0x46]  ; main_kb_cnt
0052c2  4288              CMP      r0,r1
0052c4  d121              BNE      |L1.21258|
0052c6  7d60              LDRB     r0,[r4,#0x15]  ; spc_stat
0052c8  b9f8              CBNZ     r0,|L1.21258|
;;;8857   	{
;;;8858   	if((sign_U[1]==1) && (sign_I[1]==1) && (lc640_read_int(EE_BAT2_ZAR_CNT)!=BAT_C_REAL[1]) && (NUMBAT==2) && (!(bat[1]._av&1)))
0052ca  7870              LDRB     r0,[r6,#1]  ; sign_U
0052cc  2801              CMP      r0,#1
0052ce  d11c              BNE      |L1.21258|
0052d0  7878              LDRB     r0,[r7,#1]  ; sign_I
0052d2  2801              CMP      r0,#1
0052d4  d119              BNE      |L1.21258|
0052d6  f44f75fe          MOV      r5,#0x1fc
0052da  4628              MOV      r0,r5
0052dc  f7fffffe          BL       lc640_read_int
0052e0  4942              LDR      r1,|L1.21484|
0052e2  f9b11002          LDRSH    r1,[r1,#2]  ; BAT_C_REAL
0052e6  4288              CMP      r0,r1
0052e8  d00f              BEQ      |L1.21258|
0052ea  4841              LDR      r0,|L1.21488|
0052ec  8800              LDRH     r0,[r0,#0]  ; NUMBAT
0052ee  2802              CMP      r0,#2
0052f0  d10b              BNE      |L1.21258|
0052f2  f8980089          LDRB     r0,[r8,#0x89]  ; bat
0052f6  07c0              LSLS     r0,r0,#31
0052f8  d17f              BNE      |L1.21498|
;;;8859   		{
;;;8860   		lc640_write_int(EE_BAT2_ZAR_CNT,BAT_C_REAL[1]);
0052fa  4628              MOV      r0,r5
0052fc  f7fffffe          BL       lc640_write_int
;;;8861   		superviser_cnt++;
005300  483c              LDR      r0,|L1.21492|
005302  7801              LDRB     r1,[r0,#0]  ; superviser_cnt
005304  f1010101          ADD      r1,r1,#1
005308  e076              B        |L1.21496|
                  |L1.21258|
00530a  e076              B        |L1.21498|
                  |L1.21260|
                          DCD      hv_vz_stat
                  |L1.21264|
                          DCD      sk_stat
                  |L1.21268|
                          DCD      sk_stat_old
                  |L1.21272|
                          DCD      VZ_KIND
                  |L1.21276|
                          DCD      ||area_number.25||+0x3c
                  |L1.21280|
                          DCD      ICA_EN
                  |L1.21284|
                          DCD      ica_cntrl_hndl
                  |L1.21288|
                          DCD      ica_u_necc
                  |L1.21292|
                          DCD      NUMIST
                  |L1.21296|
                          DCD      sk_cnt
                  |L1.21300|
                          DCD      NUMSK
                  |L1.21304|
                          DCD      ||area_number.19||
                  |L1.21308|
                          DCD      ||.bss||+0x400
                  |L1.21312|
                          DCD      sk_av_cnt
                  |L1.21316|
                          DCD      sk_av_stat
                  |L1.21320|
                          DCD      sk_av_stat_old
                  |L1.21324|
                          DCD      SK_SIGN
                  |L1.21328|
005350  534b2023          DCB      "SK #1 Alarm",0
005354  3120416c
005358  61726d00
                  |L1.21340|
00535c  534b2023          DCB      "SK #2 Alarm",0
005360  3220416c
005364  61726d00
                  |L1.21352|
005368  534b2023          DCB      "SK #3 Alarm",0
00536c  3320416c
005370  61726d00
                  |L1.21364|
005374  534b2023          DCB      "SK #4 Alarm",0
005378  3420416c
00537c  61726d00
                  |L1.21376|
005380  534b2023          DCB      "SK #1 Alarm is off",0
005384  3120416c
005388  61726d20
00538c  6973206f
005390  666600  
005393  00                DCB      0
                  |L1.21396|
005394  534b2023          DCB      "SK #2 Alarm is off",0
005398  3220416c
00539c  61726d20
0053a0  6973206f
0053a4  666600  
0053a7  00                DCB      0
                  |L1.21416|
0053a8  534b2023          DCB      "SK #3 Alarm is off",0
0053ac  3320416c
0053b0  61726d20
0053b4  6973206f
0053b8  666600  
0053bb  00                DCB      0
                  |L1.21436|
0053bc  534b2023          DCB      "SK #4 Alarm is off",0
0053c0  3420416c
0053c4  61726d20
0053c8  6973206f
0053cc  666600  
0053cf  00                DCB      0
                  |L1.21456|
                          DCD      sign_U
                  |L1.21460|
                          DCD      sign_I
                  |L1.21464|
                          DCD      bat
                  |L1.21468|
                          DCD      u_necc_up
                  |L1.21472|
                          DCD      TBAT
                  |L1.21476|
                          DCD      u_necc_dn
                  |L1.21480|
                          DCD      IKB
                  |L1.21484|
                          DCD      BAT_C_REAL
                  |L1.21488|
                          DCD      NUMBAT
                  |L1.21492|
                          DCD      superviser_cnt
                  |L1.21496|
0053f8  7001              STRB     r1,[r0,#0]
                  |L1.21498|
;;;8862   		}
;;;8863   	
;;;8864   	}
;;;8865   
;;;8866   if(main_kb_cnt==((TBAT*60)-2)) zar_superviser_start();
0053fa  f9b90000          LDRSH    r0,[r9,#0]  ; TBAT
0053fe  f06f0101          MVN      r1,#1
005402  ebc01000          RSB      r0,r0,r0,LSL #4
005406  eb010080          ADD      r0,r1,r0,LSL #2
00540a  f9b41046          LDRSH    r1,[r4,#0x46]  ; main_kb_cnt
00540e  4288              CMP      r0,r1
005410  d102              BNE      |L1.21528|
005412  e8bd5ff0          POP      {r4-r12,lr}
005416  e7fe              B        zar_superviser_start
                  |L1.21528|
;;;8867   }
005418  e5d8              B        |L1.20428|
;;;8868   
                          ENDP

                  npn_hndl PROC
;;;8879   //-----------------------------------------------
;;;8880   void npn_hndl(void)
00541a  e92d03f0          PUSH     {r4-r9}
;;;8881   {
;;;8882   if(NPN_OUT!=npnoOFF)
00541e  48ff              LDR      r0,|L1.22556|
;;;8883   	{
;;;8884   /*	if(NPN_SIGN==npnsAVNET)
;;;8885   		{
;;;8886   		if(net_av==1)
;;;8887   			{
;;;8888   			if(npn_tz_cnt<TZNPN)
;;;8889   				{
;;;8890   				npn_tz_cnt++;
;;;8891   				if(npn_tz_cnt==TZNPN)
;;;8892   					{
;;;8893   					npn_stat=npnsOFF;
;;;8894   					}
;;;8895   				}
;;;8896   			}
;;;8897   		else
;;;8898   			{
;;;8899   			if(npn_tz_cnt)
;;;8900   				{
;;;8901   				npn_tz_cnt--;
;;;8902   				if(npn_tz_cnt==0)
;;;8903   					{
;;;8904   					npn_stat=npnsON;
;;;8905   					}
;;;8906   				}
;;;8907   			}
;;;8908   		}*/
;;;8909   /*	if(NPN_SIGN==npnsULOAD)
;;;8910   		{
;;;8911   		if(load_U<UONPN)
;;;8912   			{
;;;8913   			if(npn_tz_cnt<TZNPN)
;;;8914   				{
;;;8915   				npn_tz_cnt++;
;;;8916   				if(npn_tz_cnt==TZNPN)
;;;8917   					{
;;;8918   					npn_stat=npnsOFF;
;;;8919   					}
;;;8920   				}
;;;8921   			}
;;;8922   		else if(load_U>UVNPN)
;;;8923   			{
;;;8924   			if(npn_tz_cnt)
;;;8925   				{
;;;8926   				npn_tz_cnt--;
;;;8927   				if(npn_tz_cnt==0)
;;;8928   					{
;;;8929   					npn_stat=npnsON;
;;;8930   					}
;;;8931   				}
;;;8932   			}
;;;8933   		}*/
;;;8934   
;;;8935   	if((load_U<UONPN)&&((net_Ua<UMN)||(net_Ub<UMN)||(net_Uc<UMN)))
;;;8936   		{
;;;8937   		if(npn_tz_cnt<TZNPN)
005420  4fff              LDR      r7,|L1.22560|
005422  f04f0c00          MOV      r12,#0                ;8882
005426  7800              LDRB     r0,[r0,#0]            ;8882  ; NPN_OUT
;;;8938   			{
;;;8939   			npn_tz_cnt++;
;;;8940   			if(npn_tz_cnt==TZNPN)
;;;8941   				{
;;;8942   				npn_stat=npnsOFF;
;;;8943   				}
;;;8944   			}
;;;8945   		}
;;;8946   	else if((load_U>UVNPN)&&(net_Ua>UMN)&&(net_Ub>UMN)&&(net_Uc>UMN))
;;;8947   		{
;;;8948   		if(npn_tz_cnt)
;;;8949   			{
;;;8950   			npn_tz_cnt--;
;;;8951   			if(npn_tz_cnt==0)
;;;8952   				{
;;;8953   				npn_stat=npnsON;
005428  f04f0801          MOV      r8,#1
00542c  4efd              LDR      r6,|L1.22564|
00542e  b3e8              CBZ      r0,|L1.21676|
005430  48fd              LDR      r0,|L1.22568|
005432  4639              MOV      r1,r7                 ;8937
005434  f9b05000          LDRSH    r5,[r0,#0]            ;8935  ; load_U
005438  48fc              LDR      r0,|L1.22572|
00543a  f9b11000          LDRSH    r1,[r1,#0]            ;8937
00543e  f9b09000          LDRSH    r9,[r0,#0]            ;8935  ; UONPN
005442  48fb              LDR      r0,|L1.22576|
005444  454d              CMP      r5,r9                 ;8935
005446  f9b02000          LDRSH    r2,[r0,#0]            ;8935
00544a  48fa              LDR      r0,|L1.22580|
00544c  f9b03000          LDRSH    r3,[r0,#0]            ;8935
005450  48f9              LDR      r0,|L1.22584|
005452  f9b04000          LDRSH    r4,[r0,#0]            ;8935
005456  48f9              LDR      r0,|L1.22588|
005458  f9b00000          LDRSH    r0,[r0,#0]            ;8935
00545c  da13              BGE      |L1.21638|
00545e  4282              CMP      r2,r0                 ;8935
005460  db03              BLT      |L1.21610|
005462  4283              CMP      r3,r0                 ;8935
005464  db01              BLT      |L1.21610|
005466  4284              CMP      r4,r0                 ;8935
005468  da0d              BGE      |L1.21638|
                  |L1.21610|
00546a  48f5              LDR      r0,|L1.22592|
00546c  f9b02000          LDRSH    r2,[r0,#0]            ;8937  ; TZNPN
005470  4291              CMP      r1,r2                 ;8937
005472  da23              BGE      |L1.21692|
005474  f1010101          ADD      r1,r1,#1              ;8939
005478  b208              SXTH     r0,r1                 ;8939
00547a  8038              STRH     r0,[r7,#0]            ;8939
00547c  4290              CMP      r0,r2                 ;8940
00547e  d11d              BNE      |L1.21692|
005480  f886c000          STRB     r12,[r6,#0]           ;8942
005484  e01a              B        |L1.21692|
                  |L1.21638|
005486  f8dfc3bc          LDR      r12,|L1.22596|
00548a  f9bcc000          LDRSH    r12,[r12,#0]          ;8946  ; UVNPN
00548e  4565              CMP      r5,r12                ;8946
005490  dd14              BLE      |L1.21692|
005492  4282              CMP      r2,r0                 ;8946
005494  dd12              BLE      |L1.21692|
005496  4283              CMP      r3,r0                 ;8946
005498  dd10              BLE      |L1.21692|
00549a  4284              CMP      r4,r0                 ;8946
00549c  dd0e              BLE      |L1.21692|
00549e  b169              CBZ      r1,|L1.21692|
0054a0  f1a10101          SUB      r1,r1,#1              ;8950
0054a4  b208              SXTH     r0,r1                 ;8950
0054a6  8038              STRH     r0,[r7,#0]            ;8950
0054a8  b940              CBNZ     r0,|L1.21692|
0054aa  e000              B        |L1.21678|
                  |L1.21676|
0054ac  e002              B        |L1.21684|
                  |L1.21678|
0054ae  f8868000          STRB     r8,[r6,#0]
0054b2  e003              B        |L1.21692|
                  |L1.21684|
;;;8954   				}
;;;8955   			}
;;;8956   		}
;;;8957   	}
;;;8958   else
;;;8959   	{
;;;8960   	npn_tz_cnt=0;
0054b4  f8a7c000          STRH     r12,[r7,#0]
;;;8961   	npn_stat=npnsON;
0054b8  f8868000          STRB     r8,[r6,#0]
                  |L1.21692|
;;;8962   	}
;;;8963   
;;;8964   if(npn_stat==npnsOFF) mess_send(MESS2RELE_HNDL,PARAM_RELE_NPN,1,15);
0054bc  7830              LDRB     r0,[r6,#0]  ; npn_stat
0054be  2800              CMP      r0,#0
0054c0  d107              BNE      |L1.21714|
0054c2  e8bd03f0          POP      {r4-r9}
0054c6  230f              MOVS     r3,#0xf
0054c8  2201              MOVS     r2,#1
0054ca  216e              MOVS     r1,#0x6e
0054cc  20d2              MOVS     r0,#0xd2
0054ce  f7ffbffe          B.W      mess_send
                  |L1.21714|
;;;8965   
;;;8966   
;;;8967   }
0054d2  e8bd03f0          POP      {r4-r9}
0054d6  4770              BX       lr
;;;8968   
                          ENDP

                  loadoff_hndl PROC
;;;8970   //-----------------------------------------------
;;;8971   void loadoff_hndl(void)
0054d8  b5f0              PUSH     {r4-r7,lr}
;;;8972   {
;;;8973   if((load_U>UONPN)||(load_U<UVNPN))
0054da  48d3              LDR      r0,|L1.22568|
;;;8974   	{
;;;8975   	if(load_off_cnt<TZNPN)
0054dc  4dda              LDR      r5,|L1.22600|
;;;8976   		{
;;;8977   		load_off_cnt++;
;;;8978   		if(load_off_cnt>=TZNPN)
;;;8979   			{
;;;8980   			load_off_stat=npnsOFF;
0054de  2700              MOVS     r7,#0
0054e0  f9b01000          LDRSH    r1,[r0,#0]            ;8973  ; load_U
0054e4  48d1              LDR      r0,|L1.22572|
0054e6  4ed9              LDR      r6,|L1.22604|
0054e8  f9b02000          LDRSH    r2,[r0,#0]            ;8973  ; UONPN
0054ec  f9b50000          LDRSH    r0,[r5,#0]            ;8975
0054f0  4291              CMP      r1,r2                 ;8973
0054f2  dc04              BGT      |L1.21758|
0054f4  4bd3              LDR      r3,|L1.22596|
0054f6  f9b33000          LDRSH    r3,[r3,#0]            ;8973  ; UVNPN
0054fa  4299              CMP      r1,r3                 ;8973
0054fc  da0d              BGE      |L1.21786|
                  |L1.21758|
0054fe  49d0              LDR      r1,|L1.22592|
005500  f9b11000          LDRSH    r1,[r1,#0]            ;8975  ; TZNPN
005504  4288              CMP      r0,r1                 ;8975
005506  da1c              BGE      |L1.21826|
005508  f1000001          ADD      r0,r0,#1              ;8977
00550c  b200              SXTH     r0,r0                 ;8977
00550e  8028              STRH     r0,[r5,#0]            ;8977
005510  4288              CMP      r0,r1                 ;8978
005512  db16              BLT      |L1.21826|
005514  7037              STRB     r7,[r6,#0]
;;;8981   			load_off_cnt=TZNPN;
005516  8029              STRH     r1,[r5,#0]
005518  e013              B        |L1.21826|
                  |L1.21786|
;;;8982   			}
;;;8983   		}
;;;8984   	}
;;;8985   else if((load_U>(UVNPN+dUNPN))&&(load_U<(UONPN-dUNPN)))
00551a  4ccd              LDR      r4,|L1.22608|
00551c  f9b44000          LDRSH    r4,[r4,#0]  ; dUNPN
005520  4423              ADD      r3,r3,r4
005522  428b              CMP      r3,r1
005524  da0d              BGE      |L1.21826|
005526  1b12              SUBS     r2,r2,r4
005528  428a              CMP      r2,r1
00552a  dd0a              BLE      |L1.21826|
;;;8986   	{
;;;8987   	if(load_off_cnt)
00552c  b148              CBZ      r0,|L1.21826|
;;;8988   		{
;;;8989   		load_off_cnt--;
00552e  f1a00001          SUB      r0,r0,#1
005532  b200              SXTH     r0,r0
005534  8028              STRH     r0,[r5,#0]
;;;8990   		if(load_off_cnt<=0)
005536  2800              CMP      r0,#0
005538  dc03              BGT      |L1.21826|
;;;8991   			{
;;;8992   			load_off_stat=npnsON;
00553a  f04f0001          MOV      r0,#1
00553e  7030              STRB     r0,[r6,#0]
;;;8993   			load_off_cnt=0;
005540  802f              STRH     r7,[r5,#0]
                  |L1.21826|
;;;8994   			}
;;;8995   		}
;;;8996   	}
;;;8997   
;;;8998   
;;;8999   if(load_off_stat==npnsOFF) tloaddisable_cmnd=10;
005542  7830              LDRB     r0,[r6,#0]  ; load_off_stat
005544  2800              CMP      r0,#0
005546  d103              BNE      |L1.21840|
005548  49c2              LDR      r1,|L1.22612|
00554a  f04f000a          MOV      r0,#0xa
00554e  7008              STRB     r0,[r1,#0]
                  |L1.21840|
;;;9000   
;;;9001   
;;;9002   }
005550  bdf0              POP      {r4-r7,pc}
;;;9003   
                          ENDP

                  speedChargeStartStop PROC
;;;9180   //-----------------------------------------------
;;;9181   void speedChargeStartStop(void)
005552  b508              PUSH     {r3,lr}
;;;9182   {
;;;9183   /*if(speedChIsOn)
;;;9184   	{
;;;9185   	speedChIsOn=0;
;;;9186   	}
;;;9187   
;;;9188   else
;;;9189   	{
;;;9190   	if(speedChrgBlckStat==0)
;;;9191   		{
;;;9192   		speedChIsOn=1;
;;;9193   		speedChTimeCnt=0;
;;;9194   		}
;;;9195   	else
;;;9196   		{
;;;9197   		show_mess(	"     ”ÒÍÓÂÌÌ˚È     ",
;;;9198   	          		"       Á‡ˇ‰        ",
;;;9199   	          		"    Á‡·ÎÓÍËÓ‚‡Ì!   ",
;;;9200   	          		"                    ",2000);	 
;;;9201   		}
;;;9202   	}*/
;;;9203   
;;;9204   if(sp_ch_stat!=scsOFF)
005554  48c0              LDR      r0,|L1.22616|
005556  7801              LDRB     r1,[r0,#0]  ; sp_ch_stat
005558  b141              CBZ      r1,|L1.21868|
;;;9205   	{
;;;9206   	sp_ch_stat=scsOFF;
00555a  f04f0100          MOV      r1,#0
00555e  7001              STRB     r1,[r0,#0]
;;;9207   	speedz_mem_hndl(10);
005560  e8bd4008          POP      {r3,lr}
005564  f04f000a          MOV      r0,#0xa
005568  f7ffbffe          B.W      speedz_mem_hndl
                  |L1.21868|
;;;9208   	}
;;;9209   
;;;9210   else
;;;9211   	{
;;;9212   	if((speedChrgBlckStat==0)&&(spc_stat==spcOFF)
00556c  49bb              LDR      r1,|L1.22620|
00556e  f9b12000          LDRSH    r2,[r1,#0]  ; speedChrgBlckStat
005572  49bb              LDR      r1,|L1.22624|
005574  780b              LDRB     r3,[r1,#0]  ; spc_stat
005576  431a              ORRS     r2,r2,r3
005578  7b0b              LDRB     r3,[r1,#0xc]  ; vz1_stat
00557a  7bc9              LDRB     r1,[r1,#0xf]  ; vz2_stat
00557c  431a              ORRS     r2,r2,r3
00557e  430a              ORRS     r2,r2,r1
005580  d009              BEQ      |L1.21910|
;;;9213   		#ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;9214   		&&(vz1_stat==vz1sOFF)&&(vz2_stat==vz2sOFF)
;;;9215   		#endif
;;;9216   		)
;;;9217   		{
;;;9218   		#ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;9219   		sp_ch_stat=scsSTEP1;
;;;9220   		#else
;;;9221   		sp_ch_stat=scsWRK;
;;;9222   		#endif
;;;9223   		speedz_mem_hndl(1);
;;;9224   		}
;;;9225   	else 
;;;9226   		{
;;;9227   		show_mess(	"     ”ÒÍÓÂÌÌ˚È     ",
005582  f44f60fa          MOV      r0,#0x7d0
005586  9000              STR      r0,[sp,#0]
005588  4bb6              LDR      r3,|L1.22628|
00558a  a2b7              ADR      r2,|L1.22632|
00558c  a1bc              ADR      r1,|L1.22656|
00558e  a0c2              ADR      r0,|L1.22680|
005590  f7fffffe          BL       show_mess
;;;9228   	          		"       Á‡ˇ‰        ",
;;;9229   	          		"    Á‡·ÎÓÍËÓ‚‡Ì!   ",
;;;9230   	          		"                    ",2000);
;;;9231   		}
;;;9232   	}
;;;9233   }
005594  bd08              POP      {r3,pc}
                  |L1.21910|
005596  f04f0101          MOV      r1,#1                 ;9219
00559a  7001              STRB     r1,[r0,#0]            ;9219
00559c  e8bd4008          POP      {r3,lr}               ;9223
0055a0  4608              MOV      r0,r1                 ;9223
0055a2  f7ffbffe          B.W      speedz_mem_hndl
;;;9234   
                          ENDP

                  speedChargeHndl PROC
;;;9004   //-----------------------------------------------
;;;9005   void speedChargeHndl(void)
0055a6  e92d4ff8          PUSH     {r3-r11,lr}
;;;9006   {
;;;9007   /*
;;;9008   if(sp_ch_stat==scsOFF)
;;;9009   	{
;;;9010   	if((sk_stat[1]==1)&&(sk_stat_old[1]=0))
;;;9011   	}*/
;;;9012   	 
;;;9013   if(sp_ch_stat==scsSTEP1)
0055aa  4fab              LDR      r7,|L1.22616|
;;;9014   	{
;;;9015   	if(sp_ch_stat_old!=sp_ch_stat)
0055ac  4dc1              LDR      r5,|L1.22708|
;;;9016   		{
;;;9017   		sp_ch_stat_cnt=5;
;;;9018   		}
;;;9019   	if(sp_ch_stat_cnt)
;;;9020   		{
;;;9021   		sp_ch_stat_cnt--;
;;;9022   		if(sp_ch_stat_cnt==0)
;;;9023   			{
;;;9024   			sp_ch_stat=scsERR1; 	//ÕÂ ‚ÍÎ˛˜ËÎ‡Ò¸ ‚ÂÌÚËÎˇˆËˇ;
;;;9025   
;;;9026   			}
;;;9027   		}
;;;9028   	if(sk_stat[0]==1)sp_ch_stat=scsWRK;
0055ae  f8df8300          LDR      r8,|L1.22704|
0055b2  7839              LDRB     r1,[r7,#0]            ;9013  ; sp_ch_stat
0055b4  7828              LDRB     r0,[r5,#0]            ;9015
0055b6  4cc0              LDR      r4,|L1.22712|
0055b8  f04f0a02          MOV      r10,#2
0055bc  2901              CMP      r1,#1                 ;9013
0055be  d115              BNE      |L1.21996|
0055c0  2801              CMP      r0,#1                 ;9015
0055c2  d002              BEQ      |L1.21962|
0055c4  f04f0105          MOV      r1,#5                 ;9017
0055c8  8021              STRH     r1,[r4,#0]            ;9017
                  |L1.21962|
0055ca  f9b41000          LDRSH    r1,[r4,#0]            ;9019  ; sp_ch_stat_cnt
0055ce  b139              CBZ      r1,|L1.21984|
0055d0  f1a10101          SUB      r1,r1,#1              ;9021
0055d4  b209              SXTH     r1,r1                 ;9021
0055d6  8021              STRH     r1,[r4,#0]            ;9021
0055d8  b911              CBNZ     r1,|L1.21984|
0055da  f04f0103          MOV      r1,#3                 ;9024
0055de  7039              STRB     r1,[r7,#0]            ;9024
                  |L1.21984|
0055e0  f8981000          LDRB     r1,[r8,#0]  ; sk_stat
0055e4  2901              CMP      r1,#1
0055e6  d101              BNE      |L1.21996|
0055e8  f887a000          STRB     r10,[r7,#0]
                  |L1.21996|
;;;9029   	}
;;;9030   
;;;9031   if(sp_ch_stat==scsWRK)
0055ec  7839              LDRB     r1,[r7,#0]  ; sp_ch_stat
0055ee  2600              MOVS     r6,#0
0055f0  2902              CMP      r1,#2
0055f2  d11f              BNE      |L1.22068|
;;;9032   	{
;;;9033   	if(sp_ch_stat_old!=sp_ch_stat)
;;;9034   		{
;;;9035   		sp_ch_wrk_cnt=(signed long)speedChrgTimeInHour*3600L;
0055f4  4ab1              LDR      r2,|L1.22716|
;;;9036   		hv_vz_up_cnt=0;
0055f6  49b2              LDR      r1,|L1.22720|
0055f8  2802              CMP      r0,#2                 ;9033
0055fa  d008              BEQ      |L1.22030|
0055fc  48b1              LDR      r0,|L1.22724|
0055fe  f44f6361          MOV      r3,#0xe10             ;9035
005602  f9b00000          LDRSH    r0,[r0,#0]            ;9035  ; speedChrgTimeInHour
005606  fb00f003          MUL      r0,r0,r3              ;9035
00560a  6010              STR      r0,[r2,#0]            ;9035  ; sp_ch_wrk_cnt
00560c  600e              STR      r6,[r1,#0]  ; hv_vz_up_cnt
                  |L1.22030|
;;;9037   		}
;;;9038   	sp_ch_wrk_cnt--;
00560e  6810              LDR      r0,[r2,#0]  ; sp_ch_wrk_cnt
005610  f1a00001          SUB      r0,r0,#1
005614  6010              STR      r0,[r2,#0]  ; sp_ch_wrk_cnt
;;;9039   	hv_vz_up_cnt++;
005616  680a              LDR      r2,[r1,#0]  ; hv_vz_up_cnt
005618  f1020201          ADD      r2,r2,#1
00561c  600a              STR      r2,[r1,#0]  ; hv_vz_up_cnt
;;;9040   	if(sp_ch_wrk_cnt==0)
00561e  b918              CBNZ     r0,|L1.22056|
;;;9041   		{
;;;9042   		sp_ch_stat=scsOFF;
005620  703e              STRB     r6,[r7,#0]
;;;9043   		speedz_mem_hndl(0);
005622  2000              MOVS     r0,#0
005624  f7fffffe          BL       speedz_mem_hndl
                  |L1.22056|
;;;9044   		}
;;;9045   	#ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;9046   	if(sk_stat[0]==0)sp_ch_stat=scsERR2;
005628  f8980000          LDRB     r0,[r8,#0]  ; sk_stat
00562c  b910              CBNZ     r0,|L1.22068|
00562e  f04f0004          MOV      r0,#4
005632  7038              STRB     r0,[r7,#0]
                  |L1.22068|
;;;9047   	#endif
;;;9048   	}
;;;9049   
;;;9050   if(sp_ch_stat==scsERR1)		//ŒÚÒÛÚÒÚ‚ÛÂÚ ‚ÂÌÚËÎˇˆËˇ ÔË ‚ÍÎ˛˜ÂÌËË
005634  7838              LDRB     r0,[r7,#0]  ; sp_ch_stat
;;;9051   	{
;;;9052   	if((sp_ch_stat_old!=sp_ch_stat)||(sp_ch_stat_cnt==0))
;;;9053   		{
;;;9054   		sp_ch_stat_cnt=10;
;;;9055   		}
;;;9056   	sp_ch_stat_cnt--;
;;;9057   	if((sp_ch_stat_cnt==10)||(sp_ch_stat_cnt==9))
;;;9058   		{
;;;9059   		show_mess(	"  ”— Œ–≈ÕÕ€… «¿–ﬂƒ  ",
005636  f2413b88          MOV      r11,#0x1388
00563a  f04f090a          MOV      r9,#0xa               ;9054
00563e  2803              CMP      r0,#3                 ;9050
005640  d119              BNE      |L1.22134|
005642  7828              LDRB     r0,[r5,#0]            ;9052  ; sp_ch_stat_old
005644  2803              CMP      r0,#3                 ;9052
005646  d101              BNE      |L1.22092|
005648  8820              LDRH     r0,[r4,#0]            ;9052  ; sp_ch_stat_cnt
00564a  b908              CBNZ     r0,|L1.22096|
                  |L1.22092|
00564c  f8a49000          STRH     r9,[r4,#0]            ;9054
                  |L1.22096|
005650  8820              LDRH     r0,[r4,#0]            ;9056  ; sp_ch_stat_cnt
005652  f1a00001          SUB      r0,r0,#1              ;9056
005656  b200              SXTH     r0,r0                 ;9056
005658  8020              STRH     r0,[r4,#0]            ;9056
00565a  280a              CMP      r0,#0xa               ;9057
00565c  d001              BEQ      |L1.22114|
00565e  2809              CMP      r0,#9                 ;9057
005660  d109              BNE      |L1.22134|
                  |L1.22114|
005662  4b99              LDR      r3,|L1.22728|
005664  a099              ADR      r0,|L1.22732|
005666  f1030218          ADD      r2,r3,#0x18
00566a  f1020118          ADD      r1,r2,#0x18
00566e  f8cdb000          STR      r11,[sp,#0]
005672  f7fffffe          BL       show_mess
                  |L1.22134|
;;;9060   					"   Õ≈ ÃŒ∆≈“ ¡€“‹    ",
;;;9061   					"      ¬ Àﬁ◊≈Õ       ",
;;;9062   					"  ¡≈« ¬≈Õ“»Àﬂ÷»»!!  ",
;;;9063   					5000);
;;;9064   		}
;;;9065   	}
;;;9066   if(sp_ch_stat==scsERR2)		//œÓÔ‡Î‡ ‚ÂÌÚËÎˇˆËˇ ÔË ‡·ÓÚÂ
005676  7838              LDRB     r0,[r7,#0]  ; sp_ch_stat
005678  2804              CMP      r0,#4
00567a  d11f              BNE      |L1.22204|
;;;9067   	{
;;;9068   	if((sp_ch_stat_old!=sp_ch_stat)||(sp_ch_stat_cnt==0))
00567c  7828              LDRB     r0,[r5,#0]  ; sp_ch_stat_old
00567e  2804              CMP      r0,#4
005680  d101              BNE      |L1.22150|
005682  8820              LDRH     r0,[r4,#0]  ; sp_ch_stat_cnt
005684  b908              CBNZ     r0,|L1.22154|
                  |L1.22150|
;;;9069   		{
;;;9070   		sp_ch_stat_cnt=10;
005686  f8a49000          STRH     r9,[r4,#0]
                  |L1.22154|
;;;9071   		}
;;;9072   	sp_ch_stat_cnt--;
00568a  8820              LDRH     r0,[r4,#0]  ; sp_ch_stat_cnt
00568c  f1a00001          SUB      r0,r0,#1
005690  b200              SXTH     r0,r0
005692  8020              STRH     r0,[r4,#0]
;;;9073   	if((sp_ch_stat_cnt==10)||(sp_ch_stat_cnt==9))
005694  280a              CMP      r0,#0xa
005696  d001              BEQ      |L1.22172|
005698  2809              CMP      r0,#9
00569a  d109              BNE      |L1.22192|
                  |L1.22172|
;;;9074   		{
;;;9075   		show_mess(	"  ”— Œ–≈ÕÕ€… «¿–ﬂƒ  ",
00569c  4b91              LDR      r3,|L1.22756|
00569e  a08b              ADR      r0,|L1.22732|
0056a0  f1030218          ADD      r2,r3,#0x18
0056a4  f1020118          ADD      r1,r2,#0x18
0056a8  f8cdb000          STR      r11,[sp,#0]
0056ac  f7fffffe          BL       show_mess
                  |L1.22192|
;;;9076   					"    «¿¡ÀŒ »–Œ¬¿Õ    ",
;;;9077   					"     Õ≈»—œ–¿¬Õ¿     ",
;;;9078   					"    ¬≈Õ“»Àﬂ÷»ﬂ!!!   ",
;;;9079   					5000);
;;;9080   		}
;;;9081   	if(sk_stat[0]==1)sp_ch_stat=scsWRK;
0056b0  f8980000          LDRB     r0,[r8,#0]  ; sk_stat
0056b4  2801              CMP      r0,#1
0056b6  d101              BNE      |L1.22204|
0056b8  f887a000          STRB     r10,[r7,#0]
                  |L1.22204|
;;;9082   	}
;;;9083   
;;;9084   
;;;9085   sp_ch_stat_old=sp_ch_stat;
0056bc  7838              LDRB     r0,[r7,#0]  ; sp_ch_stat
0056be  7028              STRB     r0,[r5,#0]
;;;9086   
;;;9087   
;;;9088   
;;;9089   if(speedChrgAvtEn==1)
0056c0  4989              LDR      r1,|L1.22760|
;;;9090   	{
;;;9091   	if((sp_ch_stat==scsOFF)&&(spc_stat==spcOFF)
;;;9092   		#ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;9093   		&&(vz1_stat==vz1sOFF)&&(vz2_stat==vz2sOFF)
;;;9094   		#endif
;;;9095   		)
;;;9096   		{
;;;9097   		if((load_U<u_necc)&&((u_necc-load_U)>speedChrgDU)
;;;9098   		#ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;9099   		&&(abs(Ib_ips_termokompensat/10-IZMAX)<5)
;;;9100   		#endif
;;;9101   		#ifdef UKU_220_V2
;;;9102   		&&(abs(bat[0]._Ib/10-IZMAX)<5)
;;;9103   		#endif
;;;9104   		&&(!speedChrgBlckStat))
0056c2  4c66              LDR      r4,|L1.22620|
0056c4  8809              LDRH     r1,[r1,#0]            ;9089  ; speedChrgAvtEn
0056c6  2901              CMP      r1,#1                 ;9089
0056c8  d129              BNE      |L1.22302|
0056ca  4965              LDR      r1,|L1.22624|
0056cc  780a              LDRB     r2,[r1,#0]            ;9091  ; spc_stat
0056ce  4310              ORRS     r0,r0,r2              ;9091
0056d0  7b0a              LDRB     r2,[r1,#0xc]          ;9091  ; vz1_stat
0056d2  7bc9              LDRB     r1,[r1,#0xf]          ;9091  ; vz2_stat
0056d4  4310              ORRS     r0,r0,r2              ;9091
0056d6  4308              ORRS     r0,r0,r1              ;9091
0056d8  d121              BNE      |L1.22302|
0056da  4853              LDR      r0,|L1.22568|
0056dc  4983              LDR      r1,|L1.22764|
0056de  f9b00000          LDRSH    r0,[r0,#0]            ;9097  ; load_U
0056e2  f9b11000          LDRSH    r1,[r1,#0]            ;9097  ; u_necc
0056e6  4288              CMP      r0,r1                 ;9097
0056e8  da19              BGE      |L1.22302|
0056ea  1a08              SUBS     r0,r1,r0              ;9097
0056ec  4980              LDR      r1,|L1.22768|
0056ee  f9b11000          LDRSH    r1,[r1,#0]            ;9097  ; speedChrgDU
0056f2  4288              CMP      r0,r1                 ;9097
0056f4  dd13              BLE      |L1.22302|
0056f6  487f              LDR      r0,|L1.22772|
0056f8  497f              LDR      r1,|L1.22776|
0056fa  f9b00000          LDRSH    r0,[r0,#0]            ;9099  ; Ib_ips_termokompensat
0056fe  8809              LDRH     r1,[r1,#0]            ;9099  ; IZMAX
005700  fb90f0f9          SDIV     r0,r0,r9              ;9099
005704  1a40              SUBS     r0,r0,r1              ;9099
005706  b200              SXTH     r0,r0                 ;9099
005708  f7fffffe          BL       abs
00570c  2805              CMP      r0,#5                 ;9099
00570e  da06              BGE      |L1.22302|
005710  8820              LDRH     r0,[r4,#0]  ; speedChrgBlckStat
005712  b920              CBNZ     r0,|L1.22302|
;;;9105   			{
;;;9106   			speedChargeStartStop();
005714  f7fffffe          BL       speedChargeStartStop
;;;9107   			speedz_mem_hndl(5);
005718  2005              MOVS     r0,#5
00571a  f7fffffe          BL       speedz_mem_hndl
                  |L1.22302|
;;;9108   			}
;;;9109   		}
;;;9110   	}
;;;9111   
;;;9112   
;;;9113   
;;;9114   /*
;;;9115   if(speedChIsOn)
;;;9116   	{
;;;9117   	speedChTimeCnt++;
;;;9118   	if(speedChTimeCnt>=((signed long)speedChrgTimeInHour*3600L))
;;;9119   		{
;;;9120   		speedChIsOn=0;
;;;9121   		}
;;;9122   	if(speedChrgBlckStat)
;;;9123   		{
;;;9124   		speedChIsOn=0;
;;;9125   		speedChTimeCnt=0;
;;;9126   		}
;;;9127   	}
;;;9128   
;;;9129   
;;;9130   
;;;9131   if(speedChrgAvtEn)
;;;9132   	{
;;;9133   	if(!speedChIsOn)
;;;9134   		{
;;;9135   		if((load_U<u_necc)&&((u_necc-load_U)>speedChrgDU)&&(abs(Ib_ips_termokompensat/10-IZMAX)<5)&&(!speedChrgBlckStat))
;;;9136   			{
;;;9137   			speedChIsOn=1;
;;;9138   			}
;;;9139   		}
;;;9140   	}
;;;9141   
;;;9142   
;;;9143   */
;;;9144   if(/*(speedChrgBlckSrc!=1)&&*/(speedChrgBlckSrc!=2)) speedChrgBlckStat=0;
00571e  4877              LDR      r0,|L1.22780|
005720  8800              LDRH     r0,[r0,#0]  ; speedChrgBlckSrc
005722  2802              CMP      r0,#2
005724  d002              BEQ      |L1.22316|
005726  8026              STRH     r6,[r4,#0]
                  |L1.22312|
;;;9145   else
;;;9146   	{
;;;9147   	speedChrgBlckStat=0;
;;;9148   	if(speedChrgBlckSrc==1)
;;;9149   		{
;;;9150   		if(((speedChrgBlckLog==0)&&(adc_buff_[11]>2000)) || ((speedChrgBlckLog==1)&&(adc_buff_[11]<2000))) speedChrgBlckStat=1;
;;;9151   		}
;;;9152   	else if(speedChrgBlckSrc==2)
;;;9153   		{
;;;9154   		if(((speedChrgBlckLog==0)&&(adc_buff_[13]>2000)) || ((speedChrgBlckLog==1)&&(adc_buff_[13]<2000))) speedChrgBlckStat=1;
;;;9155   		}
;;;9156   	}
;;;9157   
;;;9158   /*
;;;9159   if(speedChrgBlckStat==1)
;;;9160   	{
;;;9161   
;;;9162   	//speedChargeStartStop();
;;;9163   
;;;9164   	speedChrgShowCnt++;
;;;9165   	if(speedChrgShowCnt>=30)	
;;;9166   		{
;;;9167   		speedChrgShowCnt=0;
;;;9168   		show_mess(	"     ”— Œ–≈ÕÕ€…     ",
;;;9169   					"       «¿–ﬂƒ        ",
;;;9170   					"     «¿œ–≈Ÿ≈Õ!!!    ",
;;;9171   					"                    ",
;;;9172   					5000);
;;;9173   		}
;;;9174   	} 
;;;9175   else speedChrgShowCnt=0;  */
;;;9176   
;;;9177   
;;;9178   }
005728  e8bd8ff8          POP      {r3-r11,pc}
                  |L1.22316|
00572c  8026              STRH     r6,[r4,#0]            ;9147
00572e  4874              LDR      r0,|L1.22784|
005730  4974              LDR      r1,|L1.22788|
005732  f44f63fa          MOV      r3,#0x7d0             ;9150
005736  f9b00000          LDRSH    r0,[r0,#0]            ;9154  ; speedChrgBlckLog
00573a  b918              CBNZ     r0,|L1.22340|
00573c  f9b1201a          LDRSH    r2,[r1,#0x1a]         ;9154  ; adc_buff_
005740  429a              CMP      r2,r3                 ;9154
005742  dc05              BGT      |L1.22352|
                  |L1.22340|
005744  2801              CMP      r0,#1                 ;9154
005746  d1ef              BNE      |L1.22312|
005748  f9b1001a          LDRSH    r0,[r1,#0x1a]         ;9154  ; adc_buff_
00574c  4298              CMP      r0,r3                 ;9154
00574e  daeb              BGE      |L1.22312|
                  |L1.22352|
005750  f04f0001          MOV      r0,#1                 ;9154
005754  8020              STRH     r0,[r4,#0]            ;9154
005756  e7e7              B        |L1.22312|
;;;9179   
                          ENDP

                  averageChargeHndl PROC
;;;9235   //-----------------------------------------------
;;;9236   void averageChargeHndl(void)
005758  e92d4ff8          PUSH     {r3-r11,lr}
;;;9237   {
;;;9238   /*
;;;9239   if(hv_vz_stat==hvsOFF)
;;;9240   	{
;;;9241   	if((sk_stat[1]==1)&&(sk_stat_old[1]=0))
;;;9242   	} */
;;;9243   if(hv_vz_stat!=hvsOFF)
00575c  f8dfa1a8          LDR      r10,|L1.22792|
005760  f04f0b00          MOV      r11,#0
005764  f89a0000          LDRB     r0,[r10,#0]  ; hv_vz_stat
005768  b130              CBZ      r0,|L1.22392|
;;;9244   	{
;;;9245   	hv_vz_stat=hvsOFF; 	
00576a  f88ab000          STRB     r11,[r10,#0]
;;;9246   	lc640_write(EE_HV_VZ_STAT,hvsOFF);
00576e  2100              MOVS     r1,#0
005770  f44f70b4          MOV      r0,#0x168
005774  f7fffffe          BL       lc640_write
                  |L1.22392|
;;;9247   	}
;;;9248   
;;;9249   if(hv_vz_stat==hvsSTEP1)
005778  f89a0000          LDRB     r0,[r10,#0]  ; hv_vz_stat
;;;9250   	{
;;;9251   	if(hv_vz_stat_old!=hv_vz_stat)
;;;9252   		{
;;;9253   		hv_vz_stat_cnt=5;
;;;9254   		}
;;;9255   	if(hv_vz_stat_cnt)
;;;9256   		{
;;;9257   		hv_vz_stat_cnt--;
;;;9258   		if(hv_vz_stat_cnt==0)
;;;9259   			{
;;;9260   			hv_vz_stat=hvsERR1; 	//ÕÂ ‚ÍÎ˛˜ËÎ‡Ò¸ ‚ÂÌÚËÎˇˆËˇ;
;;;9261   			lc640_write(EE_HV_VZ_STAT,hvsERR1);
;;;9262   			}
;;;9263   		}
;;;9264   	if(sk_stat[0]==1)
00577c  4e4c              LDR      r6,|L1.22704|
00577e  4d63              LDR      r5,|L1.22796|
005780  4c63              LDR      r4,|L1.22800|
005782  f04f0905          MOV      r9,#5                 ;9253
005786  2801              CMP      r0,#1                 ;9249
005788  d131              BNE      |L1.22510|
00578a  7828              LDRB     r0,[r5,#0]            ;9251  ; hv_vz_stat_old
00578c  2801              CMP      r0,#1                 ;9251
00578e  d001              BEQ      |L1.22420|
005790  f8a49000          STRH     r9,[r4,#0]            ;9253
                  |L1.22420|
005794  f9b40000          LDRSH    r0,[r4,#0]            ;9255  ; hv_vz_stat_cnt
005798  b168              CBZ      r0,|L1.22454|
00579a  f1a00001          SUB      r0,r0,#1              ;9257
00579e  b200              SXTH     r0,r0                 ;9257
0057a0  8020              STRH     r0,[r4,#0]            ;9257
0057a2  b940              CBNZ     r0,|L1.22454|
0057a4  f04f0006          MOV      r0,#6                 ;9260
0057a8  f88a0000          STRB     r0,[r10,#0]           ;9260
0057ac  4601              MOV      r1,r0                 ;9261
0057ae  f44f70b4          MOV      r0,#0x168             ;9261
0057b2  f7fffffe          BL       lc640_write
                  |L1.22454|
0057b6  7830              LDRB     r0,[r6,#0]  ; sk_stat
0057b8  2801              CMP      r0,#1
0057ba  d118              BNE      |L1.22510|
;;;9265   		{
;;;9266   		hv_vz_stat=hvsSTEP2;
0057bc  f04f0002          MOV      r0,#2
0057c0  f88a0000          STRB     r0,[r10,#0]
;;;9267   		lc640_write(EE_HV_VZ_STAT,hvsSTEP2);
0057c4  4601              MOV      r1,r0
0057c6  f44f70b4          MOV      r0,#0x168
0057ca  f7fffffe          BL       lc640_write
;;;9268   		tree_up(iHV_STEP2_2,1,0,0);
0057ce  2300              MOVS     r3,#0
0057d0  461a              MOV      r2,r3
0057d2  2101              MOVS     r1,#1
0057d4  20dc              MOVS     r0,#0xdc
0057d6  f7fffffe          BL       tree_up
;;;9269   		tree_up(iHV_STEP2_1,0,0,0);
0057da  2300              MOVS     r3,#0
0057dc  461a              MOV      r2,r3
0057de  4619              MOV      r1,r3
0057e0  20db              MOVS     r0,#0xdb
0057e2  f7fffffe          BL       tree_up
;;;9270   		ret(1200);
0057e6  f44f6096          MOV      r0,#0x4b0
0057ea  f7fffffe          BL       ||ret||
                  |L1.22510|
;;;9271   		}
;;;9272   	}
;;;9273   
;;;9274   if(hv_vz_stat==hvsSTEP2)
0057ee  f89a0000          LDRB     r0,[r10,#0]  ; hv_vz_stat
0057f2  2802              CMP      r0,#2
0057f4  d10b              BNE      |L1.22542|
;;;9275   	{
;;;9276   	if((hv_vz_stat_old!=hv_vz_stat)||(hv_vz_stat_cnt==0))
0057f6  7829              LDRB     r1,[r5,#0]  ; hv_vz_stat_old
0057f8  2902              CMP      r1,#2
0057fa  d101              BNE      |L1.22528|
0057fc  8821              LDRH     r1,[r4,#0]  ; hv_vz_stat_cnt
0057fe  b911              CBNZ     r1,|L1.22534|
                  |L1.22528|
;;;9277   		{
;;;9278   		hv_vz_stat_cnt=15;
005800  f04f010f          MOV      r1,#0xf
005804  8021              STRH     r1,[r4,#0]
                  |L1.22534|
;;;9279   		}
;;;9280   	hv_vz_stat_cnt--;
005806  8821              LDRH     r1,[r4,#0]  ; hv_vz_stat_cnt
005808  f1a10101          SUB      r1,r1,#1
00580c  8021              STRH     r1,[r4,#0]
                  |L1.22542|
;;;9281   	//if((hv_vz_stat_cnt==14)/*||(hv_vz_stat_cnt==13)||(hv_vz_stat_cnt==12)*/)
;;;9282   	//	{
;;;9283   //		show_mess_number(	"     ¬Õ»Ã¿Õ»≈!!!    ",
;;;9284   	//				"  Õ‡ÔˇÊÂÌËÂ ·Û‰ÂÚ  ",
;;;9285   	//				" Û‚ÂÎË˜ÂÌÓ ‰Ó     @¬",
;;;9286   	//				"Œ“ Àﬁ◊»“≈ Õ¿√–”« ”!!",
;;;9287   	//				4800,UVZ,1);
;;;9288   	//	}
;;;9289   	//if((hv_vz_stat_cnt==8)/*||(hv_vz_stat_cnt==7)||(hv_vz_stat_cnt==6)*/)
;;;9290   	//	{
;;;9291   	//	show_mess(	"    œŒƒ“¬≈–ƒ»“≈     ",
;;;9292   	//				"     Õ¿∆¿“»≈Ã       ",
;;;9293   	//				"    ÷≈Õ“–¿À‹ÕŒ…     ",
;;;9294   	//				"       ÕŒœ »        ",
;;;9295   	//				4800);
;;;9296   	//	} 
;;;9297   /*	if(sk_stat[1]==1)
;;;9298   		{
;;;9299   		hv_vz_stat=hvsWRK;
;;;9300   		lc640_write(EE_HV_VZ_STAT,hvsWRK);
;;;9301   		}*/
;;;9302   	}
;;;9303   
;;;9304   if(hv_vz_stat==hvsSTEP3)
;;;9305   	{
;;;9306   	if((hv_vz_stat_old!=hv_vz_stat)||(hv_vz_stat_cnt==0))
;;;9307   		{
;;;9308   		hv_vz_stat_cnt=10;
00580e  270a              MOVS     r7,#0xa
;;;9309   		}
;;;9310   	hv_vz_stat_cnt--;
;;;9311   	if((hv_vz_stat_cnt==10)||(hv_vz_stat_cnt==9))
;;;9312   		{
;;;9313   		show_mess(	"     ¬ Àﬁ◊»“≈       ",
005810  f2413888          MOV      r8,#0x1388
005814  2803              CMP      r0,#3                 ;9304
005816  d17d              BNE      |L1.22804|
005818  7828              LDRB     r0,[r5,#0]            ;9306  ; hv_vz_stat_old
00581a  e07c              B        |L1.22806|
                  |L1.22556|
                          DCD      NPN_OUT
                  |L1.22560|
                          DCD      npn_tz_cnt
                  |L1.22564|
                          DCD      npn_stat
                  |L1.22568|
                          DCD      load_U
                  |L1.22572|
                          DCD      UONPN
                  |L1.22576|
                          DCD      net_Ua
                  |L1.22580|
                          DCD      net_Ub
                  |L1.22584|
                          DCD      net_Uc
                  |L1.22588|
                          DCD      UMN
                  |L1.22592|
                          DCD      TZNPN
                  |L1.22596|
                          DCD      UVNPN
                  |L1.22600|
                          DCD      load_off_cnt
                  |L1.22604|
                          DCD      load_off_stat
                  |L1.22608|
                          DCD      dUNPN
                  |L1.22612|
                          DCD      tloaddisable_cmnd
                  |L1.22616|
                          DCD      sp_ch_stat
                  |L1.22620|
                          DCD      speedChrgBlckStat
                  |L1.22624|
                          DCD      ||area_number.25||+0x15
                  |L1.22628|
                          DCD      ||.text||+0xe78
                  |L1.22632|
005868  20202020          DCB      "    ",231,224,225,235,238,234,232,240,238,226,224,237,"!"
00586c  e7e0e1eb
005870  eeeae8f0
005874  eee2e0ed
005878  21      
005879  20202000          DCB      "   ",0
00587d  00                DCB      0
00587e  00                DCB      0
00587f  00                DCB      0
                  |L1.22656|
005880  20202020          DCB      "       ",231,224,240,255,228,"        ",0
005884  202020e7
005888  e0f0ffe4
00588c  20202020
005890  20202020
005894  00      
005895  00                DCB      0
005896  00                DCB      0
005897  00                DCB      0
                  |L1.22680|
005898  20202020          DCB      "     ",211,241,234,238,240,229,237,237,251,233,"     ",0
00589c  20d3f1ea
0058a0  eef0e5ed
0058a4  edfbe920
0058a8  20202020
0058ac  00      
0058ad  00                DCB      0
0058ae  00                DCB      0
0058af  00                DCB      0
                  |L1.22704|
                          DCD      sk_stat
                  |L1.22708|
                          DCD      sp_ch_stat_old
                  |L1.22712|
                          DCD      sp_ch_stat_cnt
                  |L1.22716|
                          DCD      sp_ch_wrk_cnt
                  |L1.22720|
                          DCD      hv_vz_up_cnt
                  |L1.22724|
                          DCD      speedChrgTimeInHour
                  |L1.22728|
                          DCD      ||.text||+0xd40
                  |L1.22732|
0058cc  2020d3d1          DCB      "  ",211,209,202,206,208,197,205,205,219,201," ",199,192
0058d0  caced0c5
0058d4  cdcddbc9
0058d8  20c7c0  
0058db  d0dfc420          DCB      208,223,196,"  ",0
0058df  2000    
0058e1  00                DCB      0
0058e2  00                DCB      0
0058e3  00                DCB      0
                  |L1.22756|
                          DCD      ||.text||+0x848
                  |L1.22760|
                          DCD      speedChrgAvtEn
                  |L1.22764|
                          DCD      u_necc
                  |L1.22768|
                          DCD      speedChrgDU
                  |L1.22772|
                          DCD      Ib_ips_termokompensat
                  |L1.22776|
                          DCD      IZMAX
                  |L1.22780|
                          DCD      speedChrgBlckSrc
                  |L1.22784|
                          DCD      speedChrgBlckLog
                  |L1.22788|
                          DCD      ||.bss||+0x400
                  |L1.22792|
                          DCD      hv_vz_stat
                  |L1.22796|
                          DCD      hv_vz_stat_old
                  |L1.22800|
                          DCD      hv_vz_stat_cnt
                  |L1.22804|
005914  e021              B        |L1.22874|
                  |L1.22806|
005916  2803              CMP      r0,#3                 ;9306
005918  d101              BNE      |L1.22814|
00591a  8820              LDRH     r0,[r4,#0]            ;9306  ; hv_vz_stat_cnt
00591c  b900              CBNZ     r0,|L1.22816|
                  |L1.22814|
00591e  8027              STRH     r7,[r4,#0]            ;9308
                  |L1.22816|
005920  8820              LDRH     r0,[r4,#0]            ;9310  ; hv_vz_stat_cnt
005922  f1a00001          SUB      r0,r0,#1              ;9310
005926  b200              SXTH     r0,r0                 ;9310
005928  8020              STRH     r0,[r4,#0]            ;9310
00592a  280a              CMP      r0,#0xa               ;9311
00592c  d001              BEQ      |L1.22834|
00592e  2809              CMP      r0,#9                 ;9311
005930  d109              BNE      |L1.22854|
                  |L1.22834|
005932  4bfb              LDR      r3,|L1.23840|
005934  a2fb              ADR      r2,|L1.23844|
005936  f2a35154          SUB      r1,r3,#0x554
00593a  f1010018          ADD      r0,r1,#0x18
00593e  f8cd8000          STR      r8,[sp,#0]
005942  f7fffffe          BL       show_mess
                  |L1.22854|
;;;9314   					"      “”Ã¡À≈–       ",
;;;9315   					"   ¬€–¿¬Õ»¬¿ﬁŸ»…    ",
;;;9316   					"       «¿–ﬂƒ        ",
;;;9317   					5000);
;;;9318   		}
;;;9319   	if(sk_stat[1]==1)
005946  7870              LDRB     r0,[r6,#1]  ; sk_stat
005948  2801              CMP      r0,#1
00594a  d106              BNE      |L1.22874|
;;;9320   		{
;;;9321   		hv_vz_stat=hvsWRK;
00594c  f88a9000          STRB     r9,[r10,#0]
;;;9322   		lc640_write(EE_HV_VZ_STAT,hvsWRK);
005950  2105              MOVS     r1,#5
005952  f44f70b4          MOV      r0,#0x168
005956  f7fffffe          BL       lc640_write
                  |L1.22874|
;;;9323   		}
;;;9324   	}
;;;9325   
;;;9326   if(hv_vz_stat==hvsWRK)
00595a  f89a0000          LDRB     r0,[r10,#0]  ; hv_vz_stat
00595e  2805              CMP      r0,#5
005960  d13a              BNE      |L1.23000|
;;;9327   	{
;;;9328   	if(hv_vz_stat_old!=hv_vz_stat)
005962  7828              LDRB     r0,[r5,#0]  ; hv_vz_stat_old
;;;9329   		{
;;;9330   		hv_vz_wrk_cnt=3600L/*100L*/*((long)VZ_HR);
005964  4af5              LDR      r2,|L1.23868|
;;;9331   		if(VZ_HR==0)  	hv_vz_wrk_cnt=1800L;
;;;9332   		hv_vz_up_cnt=0L;
005966  49f6              LDR      r1,|L1.23872|
005968  2805              CMP      r0,#5                 ;9328
00596a  d00d              BEQ      |L1.22920|
00596c  48f5              LDR      r0,|L1.23876|
00596e  f44f6361          MOV      r3,#0xe10             ;9330
005972  f9b00000          LDRSH    r0,[r0,#0]            ;9330  ; VZ_HR
005976  fb00f303          MUL      r3,r0,r3              ;9330
00597a  6013              STR      r3,[r2,#0]            ;9330  ; hv_vz_wrk_cnt
00597c  b910              CBNZ     r0,|L1.22916|
00597e  f44f60e1          MOV      r0,#0x708             ;9331
005982  6010              STR      r0,[r2,#0]            ;9331  ; hv_vz_wrk_cnt
                  |L1.22916|
005984  f8c1b000          STR      r11,[r1,#0]  ; hv_vz_up_cnt
                  |L1.22920|
;;;9333   		}
;;;9334   	hv_vz_wrk_cnt--;
005988  6810              LDR      r0,[r2,#0]  ; hv_vz_wrk_cnt
00598a  f1a00001          SUB      r0,r0,#1
00598e  6010              STR      r0,[r2,#0]  ; hv_vz_wrk_cnt
;;;9335   	hv_vz_up_cnt++;
005990  680a              LDR      r2,[r1,#0]  ; hv_vz_up_cnt
005992  f1020201          ADD      r2,r2,#1
005996  600a              STR      r2,[r1,#0]  ; hv_vz_up_cnt
;;;9336   
;;;9337   	if(hv_vz_wrk_cnt==0)
005998  b940              CBNZ     r0,|L1.22956|
;;;9338   		{
;;;9339   		hv_vz_stat=hvsERR4;
00599a  f04f0009          MOV      r0,#9
00599e  f88a0000          STRB     r0,[r10,#0]
;;;9340   		lc640_write(EE_HV_VZ_STAT,hvsERR4);
0059a2  4601              MOV      r1,r0
0059a4  f44f70b4          MOV      r0,#0x168
0059a8  f7fffffe          BL       lc640_write
                  |L1.22956|
;;;9341   		}
;;;9342   	if(sk_stat[0]==0)
0059ac  7830              LDRB     r0,[r6,#0]  ; sk_stat
0059ae  b940              CBNZ     r0,|L1.22978|
;;;9343   		{
;;;9344   		hv_vz_stat=hvsERR2;
0059b0  f04f0007          MOV      r0,#7
0059b4  f88a0000          STRB     r0,[r10,#0]
;;;9345   		lc640_write(EE_HV_VZ_STAT,hvsERR2);
0059b8  4601              MOV      r1,r0
0059ba  f44f70b4          MOV      r0,#0x168
0059be  f7fffffe          BL       lc640_write
                  |L1.22978|
;;;9346   		}
;;;9347   	if(sk_stat[1]==0)
0059c2  7870              LDRB     r0,[r6,#1]  ; sk_stat
0059c4  b940              CBNZ     r0,|L1.23000|
;;;9348   		{
;;;9349   		hv_vz_stat=hvsERR3;
0059c6  f04f0008          MOV      r0,#8
0059ca  f88a0000          STRB     r0,[r10,#0]
;;;9350   		lc640_write(EE_HV_VZ_STAT,hvsERR3);
0059ce  4601              MOV      r1,r0
0059d0  f44f70b4          MOV      r0,#0x168
0059d4  f7fffffe          BL       lc640_write
                  |L1.23000|
;;;9351   		}
;;;9352   	}
;;;9353   
;;;9354   if(hv_vz_stat==hvsERR1)		//ŒÚÒÛÚÒÚ‚ÛÂÚ ‚ÂÌÚËÎˇˆËˇ ÔË ‚ÍÎ˛˜ÂÌËË
0059d8  f89a0000          LDRB     r0,[r10,#0]  ; hv_vz_stat
0059dc  2806              CMP      r0,#6
0059de  d11a              BNE      |L1.23062|
;;;9355   	{
;;;9356   	if((hv_vz_stat_old!=hv_vz_stat)||(hv_vz_stat_cnt==0))
0059e0  7828              LDRB     r0,[r5,#0]  ; hv_vz_stat_old
0059e2  2806              CMP      r0,#6
0059e4  d101              BNE      |L1.23018|
0059e6  8820              LDRH     r0,[r4,#0]  ; hv_vz_stat_cnt
0059e8  b900              CBNZ     r0,|L1.23020|
                  |L1.23018|
;;;9357   		{
;;;9358   		hv_vz_stat_cnt=10;
0059ea  8027              STRH     r7,[r4,#0]
                  |L1.23020|
;;;9359   		}
;;;9360   	hv_vz_stat_cnt--;
0059ec  8820              LDRH     r0,[r4,#0]  ; hv_vz_stat_cnt
0059ee  f1a00001          SUB      r0,r0,#1
0059f2  b200              SXTH     r0,r0
0059f4  8020              STRH     r0,[r4,#0]
;;;9361   	if((hv_vz_stat_cnt==10)||(hv_vz_stat_cnt==9))
0059f6  280a              CMP      r0,#0xa
0059f8  d001              BEQ      |L1.23038|
0059fa  2809              CMP      r0,#9
0059fc  d10b              BNE      |L1.23062|
                  |L1.23038|
;;;9362   		{
;;;9363   		show_mess(	"¬€–¿¬Õ»¬¿ﬁŸ»… «¿–ﬂƒ ",
0059fe  4bc8              LDR      r3,|L1.23840|
005a00  f8cd8000          STR      r8,[sp,#0]
005a04  3bf0              SUBS     r3,r3,#0xf0
005a06  f1030218          ADD      r2,r3,#0x18
005a0a  f1020118          ADD      r1,r2,#0x18
005a0e  f5a1609c          SUB      r0,r1,#0x4e0
005a12  f7fffffe          BL       show_mess
                  |L1.23062|
;;;9364   					"   Õ≈ ÃŒ∆≈“ ¡€“‹    ",
;;;9365   					"      ¬ Àﬁ◊≈Õ       ",
;;;9366   					"  ¡≈« ¬≈Õ“»Àﬂ÷»»!!  ",
;;;9367   					5000);
;;;9368   		}
;;;9369   	}
;;;9370   if(hv_vz_stat==hvsERR2)		//œÓÔ‡Î‡ ‚ÂÌÚËÎˇˆËˇ ÔË ‡·ÓÚÂ
005a16  f89a0000          LDRB     r0,[r10,#0]  ; hv_vz_stat
005a1a  2807              CMP      r0,#7
005a1c  d123              BNE      |L1.23142|
;;;9371   	{
;;;9372   	if((hv_vz_stat_old!=hv_vz_stat)||(hv_vz_stat_cnt==0))
005a1e  7828              LDRB     r0,[r5,#0]  ; hv_vz_stat_old
005a20  2807              CMP      r0,#7
005a22  d101              BNE      |L1.23080|
005a24  8820              LDRH     r0,[r4,#0]  ; hv_vz_stat_cnt
005a26  b900              CBNZ     r0,|L1.23082|
                  |L1.23080|
;;;9373   		{
;;;9374   		hv_vz_stat_cnt=10;
005a28  8027              STRH     r7,[r4,#0]
                  |L1.23082|
;;;9375   		}
;;;9376   	hv_vz_stat_cnt--;
005a2a  8820              LDRH     r0,[r4,#0]  ; hv_vz_stat_cnt
005a2c  f1a00001          SUB      r0,r0,#1
005a30  b200              SXTH     r0,r0
005a32  8020              STRH     r0,[r4,#0]
;;;9377   	if((hv_vz_stat_cnt==10)||(hv_vz_stat_cnt==9))
005a34  280a              CMP      r0,#0xa
005a36  d001              BEQ      |L1.23100|
005a38  2809              CMP      r0,#9
005a3a  d10a              BNE      |L1.23122|
                  |L1.23100|
;;;9378   		{
;;;9379   		show_mess(	"¬€–¿¬Õ»¬¿ﬁŸ»… «¿–ﬂƒ ",
005a3c  4bc2              LDR      r3,|L1.23880|
005a3e  f8cd8000          STR      r8,[sp,#0]
005a42  f1030218          ADD      r2,r3,#0x18
005a46  f1020118          ADD      r1,r2,#0x18
005a4a  f1010018          ADD      r0,r1,#0x18
005a4e  f7fffffe          BL       show_mess
                  |L1.23122|
;;;9380   					"    «¿¡ÀŒ »–Œ¬¿Õ    ",
;;;9381   					"     Õ≈»—œ–¿¬Õ¿     ",
;;;9382   					"    ¬≈Õ“»Àﬂ÷»ﬂ!!!   ",
;;;9383   					5000);
;;;9384   		}
;;;9385   	if(sk_stat[0]==1)
005a52  7830              LDRB     r0,[r6,#0]  ; sk_stat
005a54  2801              CMP      r0,#1
005a56  d106              BNE      |L1.23142|
;;;9386   		{
;;;9387   		hv_vz_stat=hvsWRK;
005a58  f88a9000          STRB     r9,[r10,#0]
;;;9388   		lc640_write(EE_HV_VZ_STAT,hvsWRK);
005a5c  2105              MOVS     r1,#5
005a5e  f44f70b4          MOV      r0,#0x168
005a62  f7fffffe          BL       lc640_write
                  |L1.23142|
;;;9389   		}
;;;9390   	}
;;;9391   
;;;9392   if(hv_vz_stat==hvsERR3)		//ŒÚÍÎ˛˜ÂÌ ÚÛÏ·ÎÂ "¬˚‡‚ÌË‚‡˛˘ËÈ Á‡ˇ‰"
005a66  f89a0000          LDRB     r0,[r10,#0]  ; hv_vz_stat
005a6a  2808              CMP      r0,#8
005a6c  d123              BNE      |L1.23222|
;;;9393   	{
;;;9394   	if((hv_vz_stat_old!=hv_vz_stat)||(hv_vz_stat_cnt==0))
005a6e  7828              LDRB     r0,[r5,#0]  ; hv_vz_stat_old
005a70  2808              CMP      r0,#8
005a72  d101              BNE      |L1.23160|
005a74  8820              LDRH     r0,[r4,#0]  ; hv_vz_stat_cnt
005a76  b900              CBNZ     r0,|L1.23162|
                  |L1.23160|
;;;9395   		{
;;;9396   		hv_vz_stat_cnt=10;
005a78  8027              STRH     r7,[r4,#0]
                  |L1.23162|
;;;9397   		}
;;;9398   	hv_vz_stat_cnt--;
005a7a  8820              LDRH     r0,[r4,#0]  ; hv_vz_stat_cnt
005a7c  f1a00001          SUB      r0,r0,#1
005a80  b200              SXTH     r0,r0
005a82  8020              STRH     r0,[r4,#0]
;;;9399   	if((hv_vz_stat_cnt==10)||(hv_vz_stat_cnt==9))
005a84  280a              CMP      r0,#0xa
005a86  d001              BEQ      |L1.23180|
005a88  2809              CMP      r0,#9
005a8a  d10a              BNE      |L1.23202|
                  |L1.23180|
;;;9400   		{
;;;9401   		show_mess(	"¬€–¿¬Õ»¬¿ﬁŸ»… «¿–ﬂƒ ",
005a8c  4baf              LDR      r3,|L1.23884|
005a8e  f8cd8000          STR      r8,[sp,#0]
005a92  f2a3526c          SUB      r2,r3,#0x56c
005a96  f1020118          ADD      r1,r2,#0x18
005a9a  f5a160a8          SUB      r0,r1,#0x540
005a9e  f7fffffe          BL       show_mess
                  |L1.23202|
;;;9402   					"  ¡”ƒ≈“ œ–ŒƒŒÀ∆≈Õ   ",
;;;9403   					"  œŒ—À≈ ¬ Àﬁ◊≈Õ»ﬂ   ",
;;;9404   					"    “”Ã¡À≈–¿!!!     ",
;;;9405   					5000);
;;;9406   		}
;;;9407   	if(sk_stat[1]==1)
005aa2  7870              LDRB     r0,[r6,#1]  ; sk_stat
005aa4  2801              CMP      r0,#1
005aa6  d106              BNE      |L1.23222|
;;;9408   		{
;;;9409   		hv_vz_stat=hvsWRK;
005aa8  f88a9000          STRB     r9,[r10,#0]
;;;9410   		lc640_write(EE_HV_VZ_STAT,hvsWRK);
005aac  2105              MOVS     r1,#5
005aae  f44f70b4          MOV      r0,#0x168
005ab2  f7fffffe          BL       lc640_write
                  |L1.23222|
;;;9411   		}
;;;9412   	}
;;;9413   if(hv_vz_stat==hvsERR4)		//¬« Á‡ÍÓÌ˜ËÎÒˇ ‡ ÚÛÏ·ÎÂ ‚ÍÎ˛˜ÂÌ
005ab6  f89a0000          LDRB     r0,[r10,#0]  ; hv_vz_stat
005aba  2809              CMP      r0,#9
005abc  d123              BNE      |L1.23302|
;;;9414   	{
;;;9415   	if((hv_vz_stat_old!=hv_vz_stat)||(hv_vz_stat_cnt==0))
005abe  7828              LDRB     r0,[r5,#0]  ; hv_vz_stat_old
005ac0  2809              CMP      r0,#9
005ac2  d101              BNE      |L1.23240|
005ac4  8820              LDRH     r0,[r4,#0]  ; hv_vz_stat_cnt
005ac6  b900              CBNZ     r0,|L1.23242|
                  |L1.23240|
;;;9416   		{
;;;9417   		hv_vz_stat_cnt=10;
005ac8  8027              STRH     r7,[r4,#0]
                  |L1.23242|
;;;9418   		}
;;;9419   	hv_vz_stat_cnt--;
005aca  8820              LDRH     r0,[r4,#0]  ; hv_vz_stat_cnt
005acc  f1a00001          SUB      r0,r0,#1
005ad0  b200              SXTH     r0,r0
005ad2  8020              STRH     r0,[r4,#0]
;;;9420   	if((hv_vz_stat_cnt==10)||(hv_vz_stat_cnt==9))
005ad4  280a              CMP      r0,#0xa
005ad6  d001              BEQ      |L1.23260|
005ad8  2809              CMP      r0,#9
005ada  d109              BNE      |L1.23280|
                  |L1.23260|
;;;9421   		{
;;;9422   		show_mess(	"     ¬€ Àﬁ◊»“≈      ",
005adc  4b90              LDR      r3,|L1.23840|
005ade  a291              ADR      r2,|L1.23844|
005ae0  f2a35154          SUB      r1,r3,#0x554
005ae4  f2015084          ADD      r0,r1,#0x584
005ae8  f8cd8000          STR      r8,[sp,#0]
005aec  f7fffffe          BL       show_mess
                  |L1.23280|
;;;9423   					"      “”Ã¡À≈–       ",
;;;9424   					"   ¬€–¿¬Õ»¬¿ﬁŸ»…    ",
;;;9425   					"       «¿–ﬂƒ        ",
;;;9426   					5000);
;;;9427   		}
;;;9428   	if(sk_stat[1]==0)
005af0  7870              LDRB     r0,[r6,#1]  ; sk_stat
005af2  b940              CBNZ     r0,|L1.23302|
;;;9429   		{
;;;9430   		hv_vz_stat=hvsOFF;
005af4  f88ab000          STRB     r11,[r10,#0]
;;;9431   		lc640_write(EE_HV_VZ_STAT,hvsOFF);
005af8  2100              MOVS     r1,#0
005afa  f44f70b4          MOV      r0,#0x168
005afe  f7fffffe          BL       lc640_write
;;;9432   		vz_stop();
005b02  f7fffffe          BL       vz_stop
                  |L1.23302|
;;;9433   
;;;9434   		}
;;;9435   	}
;;;9436   hv_vz_stat_old=hv_vz_stat;
005b06  f89a0000          LDRB     r0,[r10,#0]  ; hv_vz_stat
005b0a  7028              STRB     r0,[r5,#0]
;;;9437   /*
;;;9438   if(speedChIsOn)
;;;9439   	{
;;;9440   	speedChTimeCnt++;
;;;9441   	if(speedChTimeCnt>=((signed long)speedChrgTimeInHour*3600L))
;;;9442   		{
;;;9443   		speedChIsOn=0;
;;;9444   		}
;;;9445   	if(speedChrgBlckStat)
;;;9446   		{
;;;9447   		speedChIsOn=0;
;;;9448   		speedChTimeCnt=0;
;;;9449   		}
;;;9450   	}
;;;9451   
;;;9452   
;;;9453   
;;;9454   if(speedChrgAvtEn)
;;;9455   	{
;;;9456   	if(!speedChIsOn)
;;;9457   		{
;;;9458   		if((load_U<u_necc)&&((u_necc-load_U)>speedChrgDU)&&(abs(Ib_ips_termokompensat/10-IZMAX)<5)&&(!speedChrgBlckStat))
;;;9459   			{
;;;9460   			speedChIsOn=1;
;;;9461   			}
;;;9462   		}
;;;9463   	}
;;;9464   
;;;9465   
;;;9466   
;;;9467   if((speedChrgBlckSrc!=1)&&(speedChrgBlckSrc!=2)) speedChrgBlckStat=0;
;;;9468   else
;;;9469   	{
;;;9470   	speedChrgBlckStat=0;
;;;9471   	if(speedChrgBlckSrc==1)
;;;9472   		{
;;;9473   		if(((speedChrgBlckLog==0)&&(adc_buff_[11]>2000)) || ((speedChrgBlckLog==1)&&(adc_buff_[11]<2000))) speedChrgBlckStat=1;
;;;9474   		}
;;;9475   	else if(speedChrgBlckSrc==2)
;;;9476   		{
;;;9477   		if(((speedChrgBlckLog==0)&&(adc_buff_[13]>2000)) || ((speedChrgBlckLog==1)&&(adc_buff_[13]<2000))) speedChrgBlckStat=1;
;;;9478   		}
;;;9479   	}
;;;9480   
;;;9481   
;;;9482   if(speedChrgBlckStat==1)
;;;9483   	{
;;;9484   
;;;9485   	//speedChargeStartStop();
;;;9486   
;;;9487   	speedChrgShowCnt++;
;;;9488   	if(speedChrgShowCnt>=30)	
;;;9489   		{
;;;9490   		speedChrgShowCnt=0;
;;;9491   		show_mess(	"     ”— Œ–≈ÕÕ€…     ",
;;;9492   					"       «¿–ﬂƒ        ",
;;;9493   					"     «¿œ–≈Ÿ≈Õ!!!    ",
;;;9494   					"                    ",
;;;9495   					5000);
;;;9496   		}
;;;9497   	}
;;;9498   else speedChrgShowCnt=0;
;;;9499   
;;;9500   */
;;;9501   }
005b0c  e60c              B        |L1.22312|
;;;9502   
                          ENDP

                  numOfForvardBps_hndl PROC
;;;9519   //-----------------------------------------------
;;;9520   void	numOfForvardBps_hndl(void)			//œÓ„‡ÏÏ‡ ÒÏÂÌ˚ ÔÂ‚Ó„Ó ËÒÚÓ˜ÌËÍ‡ ‰Îˇ ‡‚ÌÓÏÂÌÓ„Ó ËÁÌÓÒ‡ ¡œ—Ó‚
005b0e  e92d41f0          PUSH     {r4-r8,lr}
;;;9521   {
;;;9522   
;;;9523   numOfForvardBps_old=numOfForvardBps;
005b12  4c8f              LDR      r4,|L1.23888|
005b14  7ea0              LDRB     r0,[r4,#0x1a]  ; numOfForvardBps
005b16  76e0              STRB     r0,[r4,#0x1b]
;;;9524   
;;;9525   numOfForvardBps=0;
005b18  f04f0500          MOV      r5,#0
005b1c  76a5              STRB     r5,[r4,#0x1a]
;;;9526   
;;;9527   //FORVARDBPSCHHOUR=10;
;;;9528   
;;;9529   if((FORVARDBPSCHHOUR<=0)||(FORVARDBPSCHHOUR>500))
005b1e  4e8d              LDR      r6,|L1.23892|
005b20  f9b60000          LDRSH    r0,[r6,#0]  ; FORVARDBPSCHHOUR
005b24  2800              CMP      r0,#0
005b26  dd02              BLE      |L1.23342|
005b28  f5b07ffa          CMP      r0,#0x1f4
005b2c  dd02              BLE      |L1.23348|
                  |L1.23342|
;;;9530   	{
;;;9531   	FORVARDBPSCHHOUR=0;
005b2e  8035              STRH     r5,[r6,#0]
                  |L1.23344|
;;;9532   	return;
;;;9533   	}
;;;9534   
;;;9535   numOfForvardBps_minCnt++;
;;;9536   
;;;9537   
;;;9538   if(numOfForvardBps_minCnt>=60)
;;;9539   	{
;;;9540   	numOfForvardBps_minCnt=0;
;;;9541   	numOfForvardBps_hourCnt=lc640_read_int(EE_FORVBPSHOURCNT);
;;;9542   	numOfForvardBps_hourCnt++;
;;;9543   	if(numOfForvardBps_hourCnt>=(FORVARDBPSCHHOUR*NUMIST))
;;;9544   		{
;;;9545   		numOfForvardBps_hourCnt=0;
;;;9546   		}
;;;9547   	lc640_write_int(EE_FORVBPSHOURCNT,numOfForvardBps_hourCnt);
;;;9548   	}
;;;9549   
;;;9550   numOfForvardBps=numOfForvardBps_hourCnt/FORVARDBPSCHHOUR;
;;;9551   
;;;9552   //if(numOfForvardBps)
;;;9553   //numOfForvardBps_old=numOfForvardBps; 
;;;9554   }
005b30  e8bd81f0          POP      {r4-r8,pc}
                  |L1.23348|
005b34  7f20              LDRB     r0,[r4,#0x1c]         ;9535  ; numOfForvardBps_minCnt
005b36  f1000001          ADD      r0,r0,#1              ;9535
005b3a  b2c0              UXTB     r0,r0                 ;9535
005b3c  7720              STRB     r0,[r4,#0x1c]         ;9535
005b3e  283c              CMP      r0,#0x3c              ;9538
005b40  d31a              BCC      |L1.23416|
005b42  7725              STRB     r5,[r4,#0x1c]         ;9540
005b44  f44f7794          MOV      r7,#0x128             ;9541
005b48  4638              MOV      r0,r7                 ;9541
005b4a  f7fffffe          BL       lc640_read_int
005b4e  f1000001          ADD      r0,r0,#1              ;9542
005b52  b200              SXTH     r0,r0                 ;9542
005b54  f8a4006c          STRH     r0,[r4,#0x6c]         ;9542
005b58  4a7f              LDR      r2,|L1.23896|
005b5a  f9b61000          LDRSH    r1,[r6,#0]            ;9543  ; FORVARDBPSCHHOUR
005b5e  f9b22000          LDRSH    r2,[r2,#0]            ;9543  ; NUMIST
005b62  fb01f102          MUL      r1,r1,r2              ;9543
005b66  4281              CMP      r1,r0                 ;9543
005b68  dc01              BGT      |L1.23406|
005b6a  f8a4506c          STRH     r5,[r4,#0x6c]         ;9545
                  |L1.23406|
005b6e  f9b4106c          LDRSH    r1,[r4,#0x6c]         ;9547  ; numOfForvardBps_hourCnt
005b72  4638              MOV      r0,r7                 ;9547
005b74  f7fffffe          BL       lc640_write_int
                  |L1.23416|
005b78  f9b4006c          LDRSH    r0,[r4,#0x6c]         ;9550  ; numOfForvardBps_hourCnt
005b7c  f9b61000          LDRSH    r1,[r6,#0]            ;9550  ; FORVARDBPSCHHOUR
005b80  fb90f0f1          SDIV     r0,r0,r1              ;9550
005b84  76a0              STRB     r0,[r4,#0x1a]         ;9550
005b86  e7d3              B        |L1.23344|
;;;9555   
                          ENDP

                  numOfForvardBps_init PROC
;;;9556   //-----------------------------------------------
;;;9557   void	numOfForvardBps_init(void)			//œÓ„‡ÏÏ‡ Ò·ÓÒ‡ ÒËÒÚÂÏ˚ ÒÏÂÌ˚ ÔÂ‚Ó„Ó ËÒÚÓ˜ÌËÍ‡ ‰Îˇ ‡‚ÌÓÏÂÌÓ„Ó ËÁÌÓÒ‡ ¡œ—Ó‚
005b88  b510              PUSH     {r4,lr}
;;;9558   {									//ƒÓÎÊÌ‡ ‚˚Á˚‚‡Ú¸Òˇ ÔË ËÁÏÂÌÂÌËË ÍÓÎ-‚‡ ËÒÚÓ˜ÌËÍÓ‚ ‚ ÒÚÛÍÚÛÂ
;;;9559   lc640_write_int(EE_FORVBPSHOURCNT,0);
005b8a  2100              MOVS     r1,#0
005b8c  f44f7094          MOV      r0,#0x128
005b90  f7fffffe          BL       lc640_write_int
;;;9560   numOfForvardBps_minCnt=58;
005b94  496e              LDR      r1,|L1.23888|
005b96  f04f003a          MOV      r0,#0x3a
005b9a  7708              STRB     r0,[r1,#0x1c]
;;;9561   }
005b9c  bd10              POP      {r4,pc}
;;;9562   
                          ENDP

                  outVoltContrHndl PROC
;;;9563   //-----------------------------------------------
;;;9564   void outVoltContrHndl(void)
005b9e  b570              PUSH     {r4-r6,lr}
;;;9565   { 
;;;9566   if((load_U>U_OUT_KONTR_MAX)||(load_U<U_OUT_KONTR_MIN))
005ba0  4c6e              LDR      r4,|L1.23900|
005ba2  486f              LDR      r0,|L1.23904|
;;;9567   	{
;;;9568   	outVoltContrHndlCnt_=0;
;;;9569   	if(outVoltContrHndlCnt<U_OUT_KONTR_DELAY)
005ba4  4a6f              LDR      r2,|L1.23908|
005ba6  f9b41000          LDRSH    r1,[r4,#0]            ;9566  ; load_U
005baa  f9b06000          LDRSH    r6,[r0,#0]            ;9566  ; U_OUT_KONTR_MAX
005bae  2500              MOVS     r5,#0                 ;9568
005bb0  f9b20000          LDRSH    r0,[r2,#0]
005bb4  4b6c              LDR      r3,|L1.23912|
005bb6  42b1              CMP      r1,r6                 ;9566
005bb8  dc04              BGT      |L1.23492|
005bba  4e6c              LDR      r6,|L1.23916|
005bbc  f9b66000          LDRSH    r6,[r6,#0]            ;9566  ; U_OUT_KONTR_MIN
005bc0  42b1              CMP      r1,r6                 ;9566
005bc2  da0f              BGE      |L1.23524|
                  |L1.23492|
005bc4  801d              STRH     r5,[r3,#0]            ;9568
005bc6  496a              LDR      r1,|L1.23920|
005bc8  f9b11000          LDRSH    r1,[r1,#0]  ; U_OUT_KONTR_DELAY
005bcc  4288              CMP      r0,r1
005bce  da1b              BGE      |L1.23560|
;;;9570   		{
;;;9571   		outVoltContrHndlCnt++;
005bd0  f1000001          ADD      r0,r0,#1
005bd4  b200              SXTH     r0,r0
005bd6  8010              STRH     r0,[r2,#0]
;;;9572   		if(outVoltContrHndlCnt==U_OUT_KONTR_DELAY)
005bd8  4288              CMP      r0,r1
005bda  d115              BNE      |L1.23560|
;;;9573   			{
;;;9574   			avar_uout_hndl(1);
005bdc  2001              MOVS     r0,#1
005bde  f7fffffe          BL       avar_uout_hndl
005be2  e011              B        |L1.23560|
                  |L1.23524|
;;;9575   			}
;;;9576   		}
;;;9577   	}
;;;9578   else
;;;9579   	{
;;;9580   	if(outVoltContrHndlCnt)
005be4  b180              CBZ      r0,|L1.23560|
;;;9581   		{
;;;9582   		if(outVoltContrHndlCnt_<5)
005be6  f9b30000          LDRSH    r0,[r3,#0]  ; outVoltContrHndlCnt_
005bea  2805              CMP      r0,#5
005bec  da0c              BGE      |L1.23560|
;;;9583   			{
;;;9584   			outVoltContrHndlCnt_++;
005bee  f1000001          ADD      r0,r0,#1
005bf2  b200              SXTH     r0,r0
005bf4  8018              STRH     r0,[r3,#0]
;;;9585   			if(outVoltContrHndlCnt_>=5)
005bf6  2805              CMP      r0,#5
005bf8  db06              BLT      |L1.23560|
;;;9586   				{
;;;9587   				outVoltContrHndlCnt=0;
005bfa  8015              STRH     r5,[r2,#0]
;;;9588   				if(uout_av)avar_uout_hndl(0);
005bfc  485d              LDR      r0,|L1.23924|
005bfe  7800              LDRB     r0,[r0,#0]  ; uout_av
005c00  b110              CBZ      r0,|L1.23560|
005c02  2000              MOVS     r0,#0
005c04  f7fffffe          BL       avar_uout_hndl
                  |L1.23560|
;;;9589   				}
;;;9590   			}
;;;9591   		}
;;;9592   	}
;;;9593   
;;;9594   if (load_U<(USIGN*10)) 
005c08  485b              LDR      r0,|L1.23928|
005c0a  f9b41000          LDRSH    r1,[r4,#0]  ; load_U
005c0e  f9b00000          LDRSH    r0,[r0,#0]  ; USIGN
005c12  eb000080          ADD      r0,r0,r0,LSL #2
005c16  ebb10f40          CMP      r1,r0,LSL #1
005c1a  da0b              BGE      |L1.23604|
;;;9595   	{
;;;9596   	if(!bSILENT)
005c1c  4857              LDR      r0,|L1.23932|
005c1e  6800              LDR      r0,[r0,#0]  ; bSILENT
005c20  2800              CMP      r0,#0
005c22  d107              BNE      |L1.23604|
;;;9597   		{
;;;9598   		mess_send(MESS2RELE_HNDL,PARAM_RELE_BAT_IS_DISCHARGED,1,20);
005c24  e8bd4070          POP      {r4-r6,lr}
005c28  2314              MOVS     r3,#0x14
005c2a  2201              MOVS     r2,#1
005c2c  2172              MOVS     r1,#0x72
005c2e  20d2              MOVS     r0,#0xd2
005c30  f7ffbffe          B.W      mess_send
                  |L1.23604|
;;;9599   		}
;;;9600   
;;;9601   	//bU_BAT2REL_AV_BAT=1;
;;;9602   	}
;;;9603   
;;;9604   
;;;9605   }
005c34  bd70              POP      {r4-r6,pc}
;;;9606   
                          ENDP

                  vent_resurs_hndl PROC
;;;9607   //-----------------------------------------------
;;;9608   void vent_resurs_hndl(void)
005c36  e92d47f0          PUSH     {r4-r10,lr}
;;;9609   {
;;;9610   char i;
;;;9611   char crc_in,crc_eval;
;;;9612   
;;;9613   for(i=0;i<NUMIST;i++)
005c3a  f04f0200          MOV      r2,#0
;;;9614   	{
;;;9615   	if((bps[i]._buff[7]&0xc0)==0x00)
;;;9616   		{
;;;9617   		bps[i]._vent_resurs_temp[0]=bps[i]._buff[7];
;;;9618   		}
;;;9619   	else if((bps[i]._buff[7]&0xc0)==0x40)
;;;9620   		{
;;;9621   		bps[i]._vent_resurs_temp[1]=bps[i]._buff[7];
;;;9622   		}
;;;9623   	else if((bps[i]._buff[7]&0xc0)==0x80)
;;;9624   		{
;;;9625   		bps[i]._vent_resurs_temp[2]=bps[i]._buff[7];
;;;9626   		}
;;;9627   	else if((bps[i]._buff[7]&0xc0)==0xc0)
;;;9628   		{
;;;9629   		bps[i]._vent_resurs_temp[3]=bps[i]._buff[7];
;;;9630   		}
;;;9631   	crc_in=0;
;;;9632   	crc_in|=(bps[i]._vent_resurs_temp[0]&0x30)>>4;
;;;9633   	crc_in|=(bps[i]._vent_resurs_temp[1]&0x30)>>2;
;;;9634   	crc_in|=(bps[i]._vent_resurs_temp[2]&0x30);
;;;9635   	crc_in|=(bps[i]._vent_resurs_temp[3]&0x30)<<2;
;;;9636   
;;;9637   	crc_eval =bps[i]._vent_resurs_temp[0]&0x0f;
;;;9638   	crc_eval^=bps[i]._vent_resurs_temp[1]&0x0f;
;;;9639   	crc_eval^=bps[i]._vent_resurs_temp[2]&0x0f;
;;;9640   	crc_eval^=bps[i]._vent_resurs_temp[3]&0x0f;
;;;9641   
;;;9642   	if(crc_eval==crc_in)
;;;9643   		{
;;;9644   		unsigned short temp_US;
;;;9645   		temp_US=0;
;;;9646   
;;;9647   		temp_US|=(bps[i]._vent_resurs_temp[3]&0x0f);
;;;9648   		temp_US<<=4;
;;;9649   		temp_US|=(bps[i]._vent_resurs_temp[2]&0x0f);
;;;9650   		temp_US<<=4;
;;;9651   		temp_US|=(bps[i]._vent_resurs_temp[1]&0x0f);
;;;9652   		temp_US<<=4;
;;;9653   		temp_US|=(bps[i]._vent_resurs_temp[0]&0x0f);
;;;9654   
;;;9655   		if(bps[i]._vent_resurs!=temp_US)bps[i]._vent_resurs=temp_US;
;;;9656   		}
;;;9657   
;;;9658   	if((bps[i]._vent_resurs>TVENTMAX*10)&&(TVENTMAX>0))
005c3e  4850              LDR      r0,|L1.23936|
005c40  f8dfc140          LDR      r12,|L1.23940|
005c44  f9b06000          LDRSH    r6,[r0,#0]
005c48  4843              LDR      r0,|L1.23896|
005c4a  f9b07000          LDRSH    r7,[r0,#0]            ;9613
005c4e  e0a2              B        |L1.23958|
                  |L1.23632|
005c50  ebc200c2          RSB      r0,r2,r2,LSL #3       ;9615
005c54  eb001002          ADD      r0,r0,r2,LSL #4       ;9615
005c58  eb0c0080          ADD      r0,r12,r0,LSL #2      ;9615
005c5c  7b41              LDRB     r1,[r0,#0xd]          ;9615
005c5e  098b              LSRS     r3,r1,#6              ;9615
005c60  d006              BEQ      |L1.23664|
005c62  2301              MOVS     r3,#1                 ;9619
005c64  ebb31f91          CMP      r3,r1,LSR #6          ;9619
005c68  d105              BNE      |L1.23670|
005c6a  f8801055          STRB     r1,[r0,#0x55]         ;9621
005c6e  e00f              B        |L1.23696|
                  |L1.23664|
005c70  f8801054          STRB     r1,[r0,#0x54]         ;9617
005c74  e00c              B        |L1.23696|
                  |L1.23670|
005c76  2302              MOVS     r3,#2                 ;9623
005c78  ebb31f91          CMP      r3,r1,LSR #6          ;9623
005c7c  d102              BNE      |L1.23684|
005c7e  f8801056          STRB     r1,[r0,#0x56]         ;9625
005c82  e005              B        |L1.23696|
                  |L1.23684|
005c84  2303              MOVS     r3,#3                 ;9627
005c86  ebb31f91          CMP      r3,r1,LSR #6          ;9627
005c8a  d101              BNE      |L1.23696|
005c8c  f8801057          STRB     r1,[r0,#0x57]         ;9629
                  |L1.23696|
005c90  f8101f54          LDRB     r1,[r0,#0x54]!        ;9632
005c94  f3c11401          UBFX     r4,r1,#4,#2           ;9632
005c98  7843              LDRB     r3,[r0,#1]            ;9633
005c9a  f0030530          AND      r5,r3,#0x30           ;9633
005c9e  ea440495          ORR      r4,r4,r5,LSR #2       ;9633
005ca2  f8909002          LDRB     r9,[r0,#2]            ;9634
005ca6  f0090830          AND      r8,r9,#0x30           ;9634
005caa  ea480804          ORR      r8,r8,r4              ;9634
005cae  78c5              LDRB     r5,[r0,#3]            ;9635
005cb0  f1a00054          SUB      r0,r0,#0x54           ;9635
005cb4  f0050430          AND      r4,r5,#0x30           ;9635
005cb8  ea480884          ORR      r8,r8,r4,LSL #2       ;9635
005cbc  f001010f          AND      r1,r1,#0xf            ;9637
005cc0  f003040f          AND      r4,r3,#0xf            ;9638
005cc4  ea840a01          EOR      r10,r4,r1             ;9638
005cc8  f009030f          AND      r3,r9,#0xf            ;9639
005ccc  ea83090a          EOR      r9,r3,r10             ;9639
005cd0  f005050f          AND      r5,r5,#0xf            ;9640
005cd4  ea850909          EOR      r9,r5,r9              ;9640
005cd8  45c1              CMP      r9,r8                 ;9642
005cda  d113              BNE      |L1.23812|
005cdc  ea4f1505          LSL      r5,r5,#4              ;9648
005ce0  ea430305          ORR      r3,r3,r5              ;9649
005ce4  ea4f1303          LSL      r3,r3,#4              ;9650
005ce8  ea440403          ORR      r4,r4,r3              ;9651
005cec  ea4f5304          LSL      r3,r4,#20             ;9652
005cf0  ea4f4313          LSR      r3,r3,#16             ;9652
005cf4  ea410103          ORR      r1,r1,r3              ;9653
005cf8  f8b03058          LDRH     r3,[r0,#0x58]         ;9655
005cfc  428b              CMP      r3,r1                 ;9655
005cfe  d001              BEQ      |L1.23812|
005d00  f8a01058          STRH     r1,[r0,#0x58]         ;9655
                  |L1.23812|
005d04  f8b01058          LDRH     r1,[r0,#0x58]
005d08  eb060386          ADD      r3,r6,r6,LSL #2
005d0c  ebb10f43          CMP      r1,r3,LSL #1
005d10  dd3a              BLE      |L1.23944|
005d12  2e00              CMP      r6,#0
005d14  dd38              BLE      |L1.23944|
;;;9659   		{
;;;9660   		bps[i]._av|=(1<<4);
005d16  7841              LDRB     r1,[r0,#1]
005d18  f0410110          ORR      r1,r1,#0x10
005d1c  7041              STRB     r1,[r0,#1]
005d1e  e037              B        |L1.23952|
                  |L1.23840|
                          DCD      ||.text||+0xe30
                  |L1.23844|
005d24  202020c2          DCB      "   ",194,219,208,192,194,205,200,194,192,222,217,200,201
005d28  dbd0c0c2
005d2c  cdc8c2c0
005d30  ded9c8c9
005d34  20202020          DCB      "    ",0
005d38  00      
005d39  00                DCB      0
005d3a  00                DCB      0
005d3b  00                DCB      0
                  |L1.23868|
                          DCD      hv_vz_wrk_cnt
                  |L1.23872|
                          DCD      hv_vz_up_cnt
                  |L1.23876|
                          DCD      VZ_HR
                  |L1.23880|
                          DCD      ||.text||+0x848
                  |L1.23884|
                          DCD      ||.text||+0x1324
                  |L1.23888|
                          DCD      ||area_number.25||
                  |L1.23892|
                          DCD      FORVARDBPSCHHOUR
                  |L1.23896|
                          DCD      NUMIST
                  |L1.23900|
                          DCD      load_U
                  |L1.23904|
                          DCD      U_OUT_KONTR_MAX
                  |L1.23908|
                          DCD      outVoltContrHndlCnt
                  |L1.23912|
                          DCD      outVoltContrHndlCnt_
                  |L1.23916|
                          DCD      U_OUT_KONTR_MIN
                  |L1.23920|
                          DCD      U_OUT_KONTR_DELAY
                  |L1.23924|
                          DCD      uout_av
                  |L1.23928|
                          DCD      USIGN
                  |L1.23932|
                          DCD      bSILENT
                  |L1.23936|
                          DCD      TVENTMAX
                  |L1.23940|
                          DCD      bps
                  |L1.23944|
;;;9661   		}
;;;9662   	else bps[i]._av&=~(1<<4);
005d88  7841              LDRB     r1,[r0,#1]
005d8a  f0210110          BIC      r1,r1,#0x10
005d8e  7041              STRB     r1,[r0,#1]
                  |L1.23952|
005d90  f1020201          ADD      r2,r2,#1              ;9613
005d94  b2d2              UXTB     r2,r2                 ;9613
                  |L1.23958|
005d96  42ba              CMP      r2,r7                 ;9613
005d98  f6ffaf5a          BLT      |L1.23632|
;;;9663   	}
;;;9664   }
005d9c  e8bd87f0          POP      {r4-r10,pc}
;;;9665   
                          ENDP

                  vent_hndl PROC
;;;9666   //-----------------------------------------------
;;;9667   void vent_hndl(void)
005da0  e92d4ff0          PUSH     {r4-r11,lr}
;;;9668   {
005da4  b087              SUB      sp,sp,#0x1c
;;;9669   if(RELEVENTSIGN==rvsAKB)
005da6  48ab              LDR      r0,|L1.24660|
;;;9670   	{
;;;9671   	if(vent_stat==0)
005da8  4cab              LDR      r4,|L1.24664|
;;;9672   		{
;;;9673   		if	(
;;;9674   			(BAT_IS_ON[0]==bisON)&&((bat[0]._Tb>TVENTON)||(bat[0]._nd))
005daa  49ac              LDR      r1,|L1.24668|
;;;9675   			||
;;;9676   			(BAT_IS_ON[1]==bisON)&&((bat[1]._Tb>TVENTON)||(bat[1]._nd))
;;;9677   			)
;;;9678   			{
;;;9679   			vent_stat=1;
;;;9680   			}
;;;9681   		}
;;;9682   	else if(vent_stat==1)
;;;9683   		{
;;;9684   		if	(
;;;9685   			((BAT_IS_ON[0]!=bisON)||((BAT_IS_ON[0]==bisON)&&(bat[0]._Tb<TVENTOFF)&&(!bat[0]._nd)))
005dac  4aac              LDR      r2,|L1.24672|
005dae  7800              LDRB     r0,[r0,#0]            ;9669  ; RELEVENTSIGN
005db0  f9943000          LDRSB    r3,[r4,#0]            ;9671
005db4  f9b11000          LDRSH    r1,[r1,#0]            ;9674
005db8  f9b22000          LDRSH    r2,[r2,#0]
005dbc  b148              CBZ      r0,|L1.24018|
;;;9686   			&&
;;;9687   			((BAT_IS_ON[1]!=bisON)||((BAT_IS_ON[1]==bisON)&&(bat[1]._Tb<TVENTOFF)&&(!bat[1]._nd)))
;;;9688   			)
;;;9689   			{
;;;9690   			vent_stat=0;
;;;9691   			}
;;;9692   		}
;;;9693   	}
;;;9694   else if(RELEVENTSIGN==rvsBPS)
005dbe  2802              CMP      r0,#2
005dc0  d03c              BEQ      |L1.24124|
;;;9695   	{
;;;9696   /*	if	(
;;;9697   		(((bps[0]._flags_tm&0x06)||(bps[0]._cnt>=30)))||
;;;9698   		(((bps[1]._flags_tm&0x06)||(bps[1]._cnt>=30))&&(NUMIST>1))||
;;;9699   		(((bps[2]._flags_tm&0x06)||(bps[2]._cnt>=30))&&(NUMIST>2))||
;;;9700   		(((bps[3]._flags_tm&0x06)||(bps[3]._cnt>=30))&&(NUMIST>3))||
;;;9701   		(((bps[4]._flags_tm&0x06)||(bps[4]._cnt>=30))&&(NUMIST>4))||
;;;9702   		(((bps[5]._flags_tm&0x06)||(bps[5]._cnt>=30))&&(NUMIST>5))||
;;;9703   		(((bps[6]._flags_tm&0x06)||(bps[6]._cnt>=30))&&(NUMIST>6))
;;;9704   		)
;;;9705   		{
;;;9706   		vent_stat=1;
;;;9707   		}
;;;9708   	else vent_stat=0;
;;;9709   	*/
;;;9710   
;;;9711   	if	(
;;;9712   		((NUMIST)&&((bps[0]._Ti>TVENTON)||(bps[0]._cnt>=30)))
;;;9713   		||
;;;9714   		((NUMIST>1)&&((bps[1]._Ti>TVENTON)||(bps[1]._cnt>=30)))
;;;9715   		||
;;;9716   		((NUMIST>2)&&((bps[2]._Ti>TVENTON)||(bps[2]._cnt>=30)))
;;;9717   		||
;;;9718   		((NUMIST>3)&&((bps[3]._Ti>TVENTON)||(bps[3]._cnt>=30)))
;;;9719   		||
;;;9720   		((NUMIST>4)&&((bps[4]._Ti>TVENTON)||(bps[4]._cnt>=30)))
;;;9721   		||
;;;9722   		((NUMIST>5)&&((bps[5]._Ti>TVENTON)||(bps[5]._cnt>=30)))
;;;9723   		||
;;;9724   		((NUMIST>6)&&((bps[6]._Ti>TVENTON)||(bps[6]._cnt>=30)))
;;;9725   		||
;;;9726   		((NUMIST>7)&&((bps[7]._Ti>TVENTON)||(bps[7]._cnt>=30)))
;;;9727   		)
;;;9728   		{
;;;9729   		vent_stat=1;
;;;9730   		}
;;;9731   	else if(vent_stat==1)
;;;9732   		{
;;;9733   		if	(
;;;9734   			((!NUMIST)||((NUMIST)&&(bps[0]._Ti<TVENTOFF)&&(bps[0]._cnt<10)))
;;;9735   			&&
;;;9736   			((NUMIST<2)||((NUMIST>=2)&&(bps[1]._Ti<TVENTOFF)&&(bps[1]._cnt<10)))
;;;9737   			&&
;;;9738   			((NUMIST<3)||((NUMIST>=3)&&(bps[2]._Ti<TVENTOFF)&&(bps[2]._cnt<10)))
;;;9739   			&&
;;;9740   			((NUMIST<4)||((NUMIST>=4)&&(bps[3]._Ti<TVENTOFF)&&(bps[3]._cnt<10)))
;;;9741   			&&
;;;9742   			((NUMIST<5)||((NUMIST>=5)&&(bps[4]._Ti<TVENTOFF)&&(bps[4]._cnt<10)))
;;;9743   			&&
;;;9744   			((NUMIST<6)||((NUMIST>=6)&&(bps[5]._Ti<TVENTOFF)&&(bps[5]._cnt<10)))
;;;9745   			&&
;;;9746   			((NUMIST<7)||((NUMIST>=7)&&(bps[6]._Ti<TVENTOFF)&&(bps[6]._cnt<10)))
;;;9747   			&&
;;;9748   			((NUMIST<8)||((NUMIST>=8)&&(bps[7]._Ti<TVENTOFF)&&(bps[7]._cnt<10)))
;;;9749   			)
;;;9750   			{
;;;9751   			vent_stat=0;
;;;9752   			}
;;;9753   		}
;;;9754   	}
;;;9755   else if(RELEVENTSIGN==rvsEXT)
005dc2  2801              CMP      r0,#1
005dc4  d07e              BEQ      |L1.24260|
;;;9756   	{
;;;9757   	if	(
;;;9758   		((NUMDT)&&((t_ext[0]>TVENTON)||(ND_EXT[0])))
;;;9759   		||
;;;9760   		((NUMDT>1)&&((t_ext[1]>TVENTON)||(ND_EXT[1])))
;;;9761   		||
;;;9762   		((NUMDT>2)&&((t_ext[2]>TVENTON)||(ND_EXT[2])))
;;;9763   		)
;;;9764   		{
;;;9765   		vent_stat=1;
;;;9766   		}
;;;9767   	else if(vent_stat==1)
;;;9768   		{
;;;9769   		if	(
;;;9770   			((!NUMDT)||((NUMDT)&&(t_ext[0]<TVENTOFF)&&(!ND_EXT[0])))
;;;9771   			&&
;;;9772   			((NUMDT<2)||((NUMDT>=2)&&(t_ext[1]<TVENTOFF)&&(!ND_EXT[1])))
;;;9773   			&&
;;;9774   			((NUMDT<3)||((NUMDT>=3)&&(t_ext[2]<TVENTOFF)&&(!ND_EXT[2])))
;;;9775   			)
;;;9776   			{
;;;9777   			vent_stat=0;
;;;9778   			}
;;;9779   		}
;;;9780   	}
;;;9781   else vent_stat=1;
005dc6  f04f0001          MOV      r0,#1
005dca  7020              STRB     r0,[r4,#0]
                  |L1.24012|
;;;9782   }
005dcc  b007              ADD      sp,sp,#0x1c
005dce  e8bd8ff0          POP      {r4-r11,pc}
                  |L1.24018|
005dd2  4fa4              LDR      r7,|L1.24676|
005dd4  f8df8290          LDR      r8,|L1.24680|
005dd8  f9b7000a          LDRSH    r0,[r7,#0xa]          ;9674
005ddc  7b3d              LDRB     r5,[r7,#0xc]          ;9674
005dde  f9b76056          LDRSH    r6,[r7,#0x56]         ;9676
005de2  f898c000          LDRB     r12,[r8,#0]           ;9673
005de6  f8977058          LDRB     r7,[r7,#0x58]         ;9676
005dea  f8988001          LDRB     r8,[r8,#1]            ;9676
005dee  b12b              CBZ      r3,|L1.24060|
005df0  2b01              CMP      r3,#1                 ;9682
005df2  d1eb              BNE      |L1.24012|
005df4  f1bc0f55          CMP      r12,#0x55             ;9684
005df8  d115              BNE      |L1.24102|
005dfa  e010              B        |L1.24094|
                  |L1.24060|
005dfc  f1bc0f55          CMP      r12,#0x55             ;9673
005e00  d102              BNE      |L1.24072|
005e02  4288              CMP      r0,r1                 ;9674
005e04  dc07              BGT      |L1.24086|
005e06  b935              CBNZ     r5,|L1.24086|
                  |L1.24072|
005e08  f1b80f55          CMP      r8,#0x55              ;9676
005e0c  d1de              BNE      |L1.24012|
005e0e  428e              CMP      r6,r1                 ;9676
005e10  dc01              BGT      |L1.24086|
005e12  2f00              CMP      r7,#0                 ;9676
005e14  d0da              BEQ      |L1.24012|
                  |L1.24086|
005e16  f04f0001          MOV      r0,#1                 ;9679
005e1a  7020              STRB     r0,[r4,#0]            ;9679
005e1c  e7d6              B        |L1.24012|
                  |L1.24094|
005e1e  4290              CMP      r0,r2                 ;9685
005e20  dad4              BGE      |L1.24012|
005e22  2d00              CMP      r5,#0                 ;9685
005e24  d1d2              BNE      |L1.24012|
                  |L1.24102|
005e26  f1b80f55          CMP      r8,#0x55              ;9687
005e2a  d103              BNE      |L1.24116|
005e2c  4296              CMP      r6,r2                 ;9687
005e2e  dacd              BGE      |L1.24012|
005e30  2f00              CMP      r7,#0                 ;9687
005e32  d1cb              BNE      |L1.24012|
                  |L1.24116|
005e34  f04f0000          MOV      r0,#0                 ;9690
005e38  7020              STRB     r0,[r4,#0]            ;9690
005e3a  e7c7              B        |L1.24012|
                  |L1.24124|
005e3c  4e8c              LDR      r6,|L1.24688|
005e3e  488b              LDR      r0,|L1.24684|
005e40  6ab5              LDR      r5,[r6,#0x28]         ;9712
005e42  f9b00000          LDRSH    r0,[r0,#0]            ;9711  ; NUMIST
005e46  78f6              LDRB     r6,[r6,#3]            ;9712
005e48  b118              CBZ      r0,|L1.24146|
005e4a  428d              CMP      r5,r1                 ;9712
005e4c  dc7a              BGT      |L1.24388|
005e4e  2e1e              CMP      r6,#0x1e              ;9712
005e50  d278              BCS      |L1.24388|
                  |L1.24146|
005e52  f8dfc21c          LDR      r12,|L1.24688|
005e56  2801              CMP      r0,#1                 ;9714
005e58  f8dc7084          LDR      r7,[r12,#0x84]        ;9714
005e5c  f89cc05f          LDRB     r12,[r12,#0x5f]       ;9714
005e60  f8cdc018          STR      r12,[sp,#0x18]        ;9714
005e64  dd06              BLE      |L1.24180|
005e66  428f              CMP      r7,r1                 ;9714
005e68  dc6c              BGT      |L1.24388|
005e6a  f8ddc018          LDR      r12,[sp,#0x18]        ;9714
005e6e  f1bc0f1e          CMP      r12,#0x1e             ;9714
005e72  d267              BCS      |L1.24388|
                  |L1.24180|
005e74  f8dfc1f8          LDR      r12,|L1.24688|
005e78  2802              CMP      r0,#2                 ;9716
005e7a  f8dc80e0          LDR      r8,[r12,#0xe0]        ;9716
005e7e  f8cd8014          STR      r8,[sp,#0x14]         ;9716
005e82  f89cc0bb          LDRB     r12,[r12,#0xbb]       ;9716
005e86  f8cdc010          STR      r12,[sp,#0x10]        ;9716
005e8a  dd08              BLE      |L1.24222|
005e8c  f8ddc014          LDR      r12,[sp,#0x14]        ;9716
005e90  458c              CMP      r12,r1                ;9716
005e92  dc57              BGT      |L1.24388|
005e94  f8ddc010          LDR      r12,[sp,#0x10]        ;9716
005e98  f1bc0f1e          CMP      r12,#0x1e             ;9716
005e9c  d252              BCS      |L1.24388|
                  |L1.24222|
005e9e  f8dfc1d0          LDR      r12,|L1.24688|
005ea2  2803              CMP      r0,#3                 ;9718
005ea4  f8dc813c          LDR      r8,[r12,#0x13c]       ;9718
005ea8  f8cd800c          STR      r8,[sp,#0xc]          ;9718
005eac  f89cc117          LDRB     r12,[r12,#0x117]      ;9718
005eb0  f8cdc008          STR      r12,[sp,#8]           ;9718
005eb4  dd0a              BLE      |L1.24268|
005eb6  f8ddc00c          LDR      r12,[sp,#0xc]         ;9718
005eba  458c              CMP      r12,r1                ;9718
005ebc  dc42              BGT      |L1.24388|
005ebe  f8ddc008          LDR      r12,[sp,#8]           ;9718
005ec2  e000              B        |L1.24262|
                  |L1.24260|
005ec4  e080              B        |L1.24520|
                  |L1.24262|
005ec6  f1bc0f1e          CMP      r12,#0x1e             ;9718
005eca  d23b              BCS      |L1.24388|
                  |L1.24268|
005ecc  f8df81a0          LDR      r8,|L1.24688|
005ed0  2804              CMP      r0,#4                 ;9720
005ed2  f8d8c198          LDR      r12,[r8,#0x198]       ;9720
005ed6  f8988173          LDRB     r8,[r8,#0x173]        ;9720
005eda  f8cd8004          STR      r8,[sp,#4]            ;9720
005ede  dd06              BLE      |L1.24302|
005ee0  458c              CMP      r12,r1                ;9720
005ee2  dc2f              BGT      |L1.24388|
005ee4  f8dd8004          LDR      r8,[sp,#4]            ;9720
005ee8  f1b80f1e          CMP      r8,#0x1e              ;9720
005eec  d22a              BCS      |L1.24388|
                  |L1.24302|
005eee  f8df9180          LDR      r9,|L1.24688|
005ef2  2805              CMP      r0,#5                 ;9722
005ef4  f8d981f4          LDR      r8,[r9,#0x1f4]        ;9722
005ef8  f89991cf          LDRB     r9,[r9,#0x1cf]        ;9722
005efc  f8cd9000          STR      r9,[sp,#0]            ;9722
005f00  dd06              BLE      |L1.24336|
005f02  4588              CMP      r8,r1                 ;9722
005f04  dc1e              BGT      |L1.24388|
005f06  f8dd9000          LDR      r9,[sp,#0]            ;9722
005f0a  f1b90f1e          CMP      r9,#0x1e              ;9722
005f0e  d219              BCS      |L1.24388|
                  |L1.24336|
005f10  f8dfa15c          LDR      r10,|L1.24688|
005f14  2806              CMP      r0,#6                 ;9724
005f16  f89ae22b          LDRB     lr,[r10,#0x22b]       ;9724
005f1a  f8da9250          LDR      r9,[r10,#0x250]       ;9724
005f1e  dd04              BLE      |L1.24362|
005f20  4589              CMP      r9,r1                 ;9724
005f22  dc0f              BGT      |L1.24388|
005f24  f1be0f1e          CMP      lr,#0x1e              ;9724
005f28  d20c              BCS      |L1.24388|
                  |L1.24362|
005f2a  f8dfb144          LDR      r11,|L1.24688|
005f2e  2807              CMP      r0,#7                 ;9726
005f30  f8dba2ac          LDR      r10,[r11,#0x2ac]      ;9726
005f34  f89bb287          LDRB     r11,[r11,#0x287]      ;9726
005f38  dd08              BLE      |L1.24396|
005f3a  458a              CMP      r10,r1                ;9726
005f3c  dc02              BGT      |L1.24388|
005f3e  f1bb0f1e          CMP      r11,#0x1e             ;9726
005f42  d303              BCC      |L1.24396|
                  |L1.24388|
005f44  f04f0001          MOV      r0,#1                 ;9729
005f48  7020              STRB     r0,[r4,#0]            ;9729
                  |L1.24394|
005f4a  e73f              B        |L1.24012|
                  |L1.24396|
005f4c  2b01              CMP      r3,#1                 ;9731
005f4e  d1fc              BNE      |L1.24394|
005f50  b118              CBZ      r0,|L1.24410|
005f52  4295              CMP      r5,r2                 ;9734
005f54  daf9              BGE      |L1.24394|
005f56  2e0a              CMP      r6,#0xa               ;9734
005f58  d2f7              BCS      |L1.24394|
                  |L1.24410|
005f5a  2802              CMP      r0,#2                 ;9736
005f5c  db04              BLT      |L1.24424|
005f5e  4297              CMP      r7,r2                 ;9736
005f60  daf3              BGE      |L1.24394|
005f62  9906              LDR      r1,[sp,#0x18]         ;9736
005f64  290a              CMP      r1,#0xa               ;9736
005f66  d2f0              BCS      |L1.24394|
                  |L1.24424|
005f68  2803              CMP      r0,#3                 ;9738
005f6a  db05              BLT      |L1.24440|
005f6c  9905              LDR      r1,[sp,#0x14]         ;9738
005f6e  4291              CMP      r1,r2                 ;9738
005f70  daeb              BGE      |L1.24394|
005f72  9904              LDR      r1,[sp,#0x10]         ;9738
005f74  290a              CMP      r1,#0xa               ;9738
005f76  d2e8              BCS      |L1.24394|
                  |L1.24440|
005f78  2804              CMP      r0,#4                 ;9740
005f7a  db05              BLT      |L1.24456|
005f7c  9903              LDR      r1,[sp,#0xc]          ;9740
005f7e  4291              CMP      r1,r2                 ;9740
005f80  dae3              BGE      |L1.24394|
005f82  9902              LDR      r1,[sp,#8]            ;9740
005f84  290a              CMP      r1,#0xa               ;9740
005f86  d2e0              BCS      |L1.24394|
                  |L1.24456|
005f88  2805              CMP      r0,#5                 ;9742
005f8a  db04              BLT      |L1.24470|
005f8c  4594              CMP      r12,r2                ;9742
005f8e  dadc              BGE      |L1.24394|
005f90  9901              LDR      r1,[sp,#4]            ;9742
005f92  290a              CMP      r1,#0xa               ;9742
005f94  d2d9              BCS      |L1.24394|
                  |L1.24470|
005f96  2806              CMP      r0,#6                 ;9744
005f98  db04              BLT      |L1.24484|
005f9a  4590              CMP      r8,r2                 ;9744
005f9c  dad5              BGE      |L1.24394|
005f9e  9900              LDR      r1,[sp,#0]            ;9744
005fa0  290a              CMP      r1,#0xa               ;9744
005fa2  d2d2              BCS      |L1.24394|
                  |L1.24484|
005fa4  2807              CMP      r0,#7                 ;9746
005fa6  db04              BLT      |L1.24498|
005fa8  4591              CMP      r9,r2                 ;9746
005faa  dace              BGE      |L1.24394|
005fac  f1be0f0a          CMP      lr,#0xa               ;9746
005fb0  d2cb              BCS      |L1.24394|
                  |L1.24498|
005fb2  2808              CMP      r0,#8                 ;9748
005fb4  db04              BLT      |L1.24512|
005fb6  4592              CMP      r10,r2                ;9748
005fb8  dac7              BGE      |L1.24394|
005fba  f1bb0f0a          CMP      r11,#0xa              ;9748
005fbe  d2c4              BCS      |L1.24394|
                  |L1.24512|
005fc0  f04f0000          MOV      r0,#0                 ;9751
005fc4  7020              STRB     r0,[r4,#0]            ;9751
                  |L1.24518|
005fc6  e701              B        |L1.24012|
                  |L1.24520|
005fc8  482a              LDR      r0,|L1.24692|
005fca  4d2b              LDR      r5,|L1.24696|
005fcc  4e2b              LDR      r6,|L1.24700|
005fce  f9b00000          LDRSH    r0,[r0,#0]            ;9757  ; NUMDT
005fd2  f9b55000          LDRSH    r5,[r5,#0]            ;9758
005fd6  7836              LDRB     r6,[r6,#0]            ;9758
005fd8  b110              CBZ      r0,|L1.24544|
005fda  428d              CMP      r5,r1                 ;9758
005fdc  dc1d              BGT      |L1.24602|
005fde  b9e6              CBNZ     r6,|L1.24602|
                  |L1.24544|
005fe0  4f25              LDR      r7,|L1.24696|
005fe2  f8dfc098          LDR      r12,|L1.24700|
005fe6  2801              CMP      r0,#1                 ;9760
005fe8  f9b77002          LDRSH    r7,[r7,#2]            ;9760
005fec  f89cc001          LDRB     r12,[r12,#1]          ;9760
005ff0  dd04              BLE      |L1.24572|
005ff2  428f              CMP      r7,r1                 ;9760
005ff4  dc11              BGT      |L1.24602|
005ff6  f1bc0f00          CMP      r12,#0                ;9760
005ffa  d10e              BNE      |L1.24602|
                  |L1.24572|
005ffc  f8df8078          LDR      r8,|L1.24696|
006000  f8df9078          LDR      r9,|L1.24700|
006004  2802              CMP      r0,#2                 ;9762
006006  f9b88004          LDRSH    r8,[r8,#4]            ;9762
00600a  f8999002          LDRB     r9,[r9,#2]            ;9762
00600e  dd08              BLE      |L1.24610|
006010  4588              CMP      r8,r1                 ;9762
006012  dc02              BGT      |L1.24602|
006014  f1b90f00          CMP      r9,#0                 ;9762
006018  d003              BEQ      |L1.24610|
                  |L1.24602|
00601a  f04f0001          MOV      r0,#1                 ;9765
00601e  7020              STRB     r0,[r4,#0]            ;9765
006020  e6d4              B        |L1.24012|
                  |L1.24610|
006022  2b01              CMP      r3,#1                 ;9767
006024  d191              BNE      |L1.24394|
006026  b118              CBZ      r0,|L1.24624|
006028  4295              CMP      r5,r2                 ;9770
00602a  da8e              BGE      |L1.24394|
00602c  2e00              CMP      r6,#0                 ;9770
00602e  d18c              BNE      |L1.24394|
                  |L1.24624|
006030  2802              CMP      r0,#2                 ;9772
006032  db04              BLT      |L1.24638|
006034  4297              CMP      r7,r2                 ;9772
006036  da88              BGE      |L1.24394|
006038  f1bc0f00          CMP      r12,#0                ;9772
00603c  d185              BNE      |L1.24394|
                  |L1.24638|
00603e  2803              CMP      r0,#3                 ;9774
006040  db04              BLT      |L1.24652|
006042  4590              CMP      r8,r2                 ;9774
006044  dabf              BGE      |L1.24518|
006046  f1b90f00          CMP      r9,#0                 ;9774
00604a  d1bc              BNE      |L1.24518|
                  |L1.24652|
00604c  f04f0000          MOV      r0,#0                 ;9777
006050  7020              STRB     r0,[r4,#0]            ;9777
006052  e6bb              B        |L1.24012|
;;;9783   
                          ENDP

                  |L1.24660|
                          DCD      RELEVENTSIGN
                  |L1.24664|
                          DCD      ||area_number.25||
                  |L1.24668|
                          DCD      TVENTON
                  |L1.24672|
                          DCD      TVENTOFF
                  |L1.24676|
                          DCD      bat
                  |L1.24680|
                          DCD      BAT_IS_ON
                  |L1.24684|
                          DCD      NUMIST
                  |L1.24688|
                          DCD      bps
                  |L1.24692|
                          DCD      NUMDT
                  |L1.24696|
                          DCD      t_ext
                  |L1.24700|
                          DCD      ND_EXT

                          AREA ||area_number.2||, CODE, READONLY, ALIGN=2

                          EXPORTAS ||area_number.2||, ||.text||
                  samokalibr_init PROC
;;;283    //-----------------------------------------------
;;;284    void ke_start(char in)
000000  4902              LDR      r1,|L2.12|
;;;285    {          
000002  f24060f9          MOV      r0,#0x6f9
;;;286    ke_start_stat=(enum_ke_start_stat)0;		 
000006  f8a10044          STRH     r0,[r1,#0x44]
00000a  4770              BX       lr
;;;287    
;;;288    if(spc_stat==spcVZ)ke_start_stat=kssNOT_VZ;
;;;289    #ifndef UKU_220_IPS_TERMOKOMPENSAT
;;;290    else if(BAT_IS_ON[in]!=bisON)ke_start_stat=kssNOT_BAT;
;;;291    #endif
;;;292    else if(bat[in]._av&(1<<0))ke_start_stat=kssNOT_BAT_AV;
;;;293    else if(bat[in]._temper_stat&(1<<1))ke_start_stat=kssNOT_BAT_AV_T;
;;;294    else if(bat[in]._av&(1<<1))ke_start_stat=kssNOT_BAT_AV_ASS;
;;;295    else if(bat[in]._Ib>IKB)ke_start_stat=kssNOT_BAT_ZAR;
;;;296    else if(bat[in]._Ib<-IKB)ke_start_stat=kssNOT_BAT_RAZR;
;;;297    else if((spc_stat==spcKE)&&(spc_bat==0))ke_start_stat=kssNOT_KE1;
;;;298    else if((spc_stat==spcKE)&&(spc_bat==1))ke_start_stat=kssNOT_KE2;
;;;299    else 
;;;300    	{
;;;301    
;;;302    	ke_start_stat=kssYES;
;;;303    
;;;304    	spc_stat=spcKE;
;;;305    	__ee_spc_stat=spcKE;
;;;306    	lc640_write_int(EE_SPC_STAT,__ee_spc_stat);
;;;307    	
;;;308    	spc_bat=in;
;;;309    	__ee_spc_bat=in;
;;;310    	lc640_write_int(EE_SPC_BAT,__ee_spc_bat);
;;;311    
;;;312    	bat[in]._zar_cnt_ke=0;
;;;313    	lc640_write_int(ADR_EE_BAT_ZAR_CNT_KE[in],0);
;;;314    	
;;;315    	spc_phase=0;
;;;316    	__ee_spc_phase=0;
;;;317    	lc640_write_int(EE_SPC_PHASE,__ee_spc_phase);
;;;318    
;;;319    	//ke_mem_hndl(in,lc640_read_int(ADR_EE_BAT_ZAR_CNT_KE[spc_bat]));
;;;320    
;;;321    		{					
;;;322    		signed short temp_temp;
;;;323    		signed char temp;
;;;324    		temp_temp=bat[in]._u_old[((bat_u_old_cnt+1)&0x07)]; 
;;;325    		    
;;;326    		temp=LPC_RTC->YEAR;
;;;327    		gran_char(&temp,1,99);
;;;328    		*((char*)(&(ke_date[0])))=temp;
;;;329    			
;;;330    		temp=LPC_RTC->MONTH;
;;;331    		gran_char(&temp,1,12);
;;;332    		*(((char*)(&(ke_date[0])))+1)=temp;
;;;333    		
;;;334    		temp=LPC_RTC->DOM;
;;;335    		gran_char(&temp,1,31);
;;;336    		*(((char*)(&(ke_date[0])))+2)=temp;			
;;;337    				
;;;338    		*(((char*)(&(ke_date[0])))+3)=*((char*)&temp_temp);
;;;339    		lc640_write_long(EE_SPC_KE_DATE0,ke_date[0]);
;;;340    
;;;341    		temp=LPC_RTC->HOUR;
;;;342    		gran_char(&temp,0,23);
;;;343    		*((char*)(&(ke_date[1])))=temp;
;;;344                   
;;;345    		temp=LPC_RTC->MIN;
;;;346    		gran_char(&temp,0,59);
;;;347    		*(((char*)(&(ke_date[1])))+1)=temp;
;;;348    	          
;;;349    		temp=LPC_RTC->SEC;
;;;350    		gran_char(&temp,0,59);
;;;351    		*(((char*)(&(ke_date[1])))+2)=temp;
;;;352    			
;;;353    		*(((char*)(&(ke_date[1])))+3)=*(((char*)&temp_temp)+1);
;;;354    		lc640_write_long(EE_SPC_KE_DATE1,ke_date[1]);
;;;355    		}
;;;356    
;;;357    	}
;;;358    }
;;;359    
                          ENDP

                  |L2.12|
                          DCD      ||area_number.25||

                          AREA ||area_number.3||, CODE, READONLY, ALIGN=2

                          EXPORTAS ||area_number.3||, ||.text||
                  adc_drv6 PROC
;;;283    //-----------------------------------------------
;;;284    void ke_start(char in)
000000  e92d41f0          PUSH     {r4-r8,lr}
;;;285    {          
000004  4c80              LDR      r4,|L3.520|
;;;286    ke_start_stat=(enum_ke_start_stat)0;		 
000006  8860              LDRH     r0,[r4,#2]  ; adc_self_ch_buff
000008  8821              LDRH     r1,[r4,#0]  ; adc_self_ch_buff
00000a  1a40              SUBS     r0,r0,r1
00000c  b200              SXTH     r0,r0
;;;287    
;;;288    if(spc_stat==spcVZ)ke_start_stat=kssNOT_VZ;
00000e  f7fffffe          BL       abs_pal
000012  1da5              ADDS     r5,r4,#6
000014  8028              STRH     r0,[r5,#0]
000016  88a0              LDRH     r0,[r4,#4]  ; adc_self_ch_buff
;;;289    #ifndef UKU_220_IPS_TERMOKOMPENSAT
;;;290    else if(BAT_IS_ON[in]!=bisON)ke_start_stat=kssNOT_BAT;
;;;291    #endif
;;;292    else if(bat[in]._av&(1<<0))ke_start_stat=kssNOT_BAT_AV;
000018  8861              LDRH     r1,[r4,#2]  ; adc_self_ch_buff
00001a  1a40              SUBS     r0,r0,r1
00001c  b200              SXTH     r0,r0
00001e  f7fffffe          BL       abs_pal
000022  8068              STRH     r0,[r5,#2]
000024  88a0              LDRH     r0,[r4,#4]  ; adc_self_ch_buff
000026  8821              LDRH     r1,[r4,#0]  ; adc_self_ch_buff
000028  1a40              SUBS     r0,r0,r1
00002a  b200              SXTH     r0,r0
00002c  f7fffffe          BL       abs_pal
000030  80a8              STRH     r0,[r5,#4]
000032  f44f7196          MOV      r1,#0x12c
;;;293    else if(bat[in]._temper_stat&(1<<1))ke_start_stat=kssNOT_BAT_AV_T;
;;;294    else if(bat[in]._av&(1<<1))ke_start_stat=kssNOT_BAT_AV_ASS;
;;;295    else if(bat[in]._Ib>IKB)ke_start_stat=kssNOT_BAT_ZAR;
;;;296    else if(bat[in]._Ib<-IKB)ke_start_stat=kssNOT_BAT_RAZR;
;;;297    else if((spc_stat==spcKE)&&(spc_bat==0))ke_start_stat=kssNOT_KE1;
;;;298    else if((spc_stat==spcKE)&&(spc_bat==1))ke_start_stat=kssNOT_KE2;
;;;299    else 
;;;300    	{
;;;301    
;;;302    	ke_start_stat=kssYES;
;;;303    
;;;304    	spc_stat=spcKE;
;;;305    	__ee_spc_stat=spcKE;
;;;306    	lc640_write_int(EE_SPC_STAT,__ee_spc_stat);
;;;307    	
;;;308    	spc_bat=in;
;;;309    	__ee_spc_bat=in;
;;;310    	lc640_write_int(EE_SPC_BAT,__ee_spc_bat);
;;;311    
;;;312    	bat[in]._zar_cnt_ke=0;
;;;313    	lc640_write_int(ADR_EE_BAT_ZAR_CNT_KE[in],0);
;;;314    	
;;;315    	spc_phase=0;
;;;316    	__ee_spc_phase=0;
;;;317    	lc640_write_int(EE_SPC_PHASE,__ee_spc_phase);
;;;318    
;;;319    	//ke_mem_hndl(in,lc640_read_int(ADR_EE_BAT_ZAR_CNT_KE[spc_bat]));
;;;320    
;;;321    		{					
;;;322    		signed short temp_temp;
;;;323    		signed char temp;
;;;324    		temp_temp=bat[in]._u_old[((bat_u_old_cnt+1)&0x07)]; 
;;;325    		    
;;;326    		temp=LPC_RTC->YEAR;
;;;327    		gran_char(&temp,1,99);
;;;328    		*((char*)(&(ke_date[0])))=temp;
;;;329    			
;;;330    		temp=LPC_RTC->MONTH;
;;;331    		gran_char(&temp,1,12);
;;;332    		*(((char*)(&(ke_date[0])))+1)=temp;
;;;333    		
;;;334    		temp=LPC_RTC->DOM;
;;;335    		gran_char(&temp,1,31);
;;;336    		*(((char*)(&(ke_date[0])))+2)=temp;			
;;;337    				
;;;338    		*(((char*)(&(ke_date[0])))+3)=*((char*)&temp_temp);
;;;339    		lc640_write_long(EE_SPC_KE_DATE0,ke_date[0]);
;;;340    
;;;341    		temp=LPC_RTC->HOUR;
;;;342    		gran_char(&temp,0,23);
;;;343    		*((char*)(&(ke_date[1])))=temp;
;;;344                   
;;;345    		temp=LPC_RTC->MIN;
;;;346    		gran_char(&temp,0,59);
;;;347    		*(((char*)(&(ke_date[1])))+1)=temp;
;;;348    	          
;;;349    		temp=LPC_RTC->SEC;
;;;350    		gran_char(&temp,0,59);
;;;351    		*(((char*)(&(ke_date[1])))+2)=temp;
;;;352    			
;;;353    		*(((char*)(&(ke_date[1])))+3)=*(((char*)&temp_temp)+1);
;;;354    		lc640_write_long(EE_SPC_KE_DATE1,ke_date[1]);
;;;355    		}
;;;356    
;;;357    	}
;;;358    }
000036  f1a406ce          SUB      r6,r4,#0xce
00003a  4288              CMP      r0,r1
00003c  da02              BGE      |L3.68|
00003e  88a0              LDRH     r0,[r4,#4]            ;293  ; adc_self_ch_buff
000040  8630              STRH     r0,[r6,#0x30]         ;293
000042  e00c              B        |L3.94|
                  |L3.68|
000044  f9b50002          LDRSH    r0,[r5,#2]            ;293  ; adc_self_ch_disp
000048  4288              CMP      r0,r1                 ;293
00004a  da02              BGE      |L3.82|
00004c  8860              LDRH     r0,[r4,#2]            ;294  ; adc_self_ch_buff
00004e  8630              STRH     r0,[r6,#0x30]         ;294
000050  e005              B        |L3.94|
                  |L3.82|
000052  f9b50000          LDRSH    r0,[r5,#0]            ;294  ; adc_self_ch_disp
000056  4288              CMP      r0,r1
000058  da01              BGE      |L3.94|
00005a  8820              LDRH     r0,[r4,#0]            ;295  ; adc_self_ch_buff
00005c  8630              STRH     r0,[r6,#0x30]         ;295
                  |L3.94|
00005e  7937              LDRB     r7,[r6,#4]            ;295  ; adc_ch_net
000060  2200              MOVS     r2,#0                 ;295
000062  b3f7              CBZ      r7,|L3.226|
000064  79f3              LDRB     r3,[r6,#7]            ;295  ; adc_window_flag
000066  4869              LDR      r0,|L3.524|
000068  b18b              CBZ      r3,|L3.142|
00006a  f9b61030          LDRSH    r1,[r6,#0x30]         ;295  ; adc_result
00006e  6804              LDR      r4,[r0,#0]            ;296  ; main_power_buffer
000070  eb0404a1          ADD      r4,r4,r1,ASR #2       ;296
000074  6004              STR      r4,[r0,#0]            ;296  ; main_power_buffer
000076  6844              LDR      r4,[r0,#4]            ;296  ; main_power_buffer
000078  eb0404a1          ADD      r4,r4,r1,ASR #2       ;296
00007c  6044              STR      r4,[r0,#4]            ;286  ; main_power_buffer
00007e  6884              LDR      r4,[r0,#8]            ;297  ; main_power_buffer
000080  eb0404a1          ADD      r4,r4,r1,ASR #2       ;297
000084  6084              STR      r4,[r0,#8]            ;297  ; main_power_buffer
000086  68c4              LDR      r4,[r0,#0xc]          ;298  ; main_power_buffer
000088  eb0401a1          ADD      r1,r4,r1,ASR #2       ;298
00008c  60c1              STR      r1,[r0,#0xc]          ;297  ; main_power_buffer
                  |L3.142|
00008e  f9b61030          LDRSH    r1,[r6,#0x30]         ;297  ; adc_result
000092  2964              CMP      r1,#0x64
000094  da04              BGE      |L3.160|
000096  8eb1              LDRH     r1,[r6,#0x34]         ;298  ; adc_zero_cnt
000098  f1010101          ADD      r1,r1,#1              ;302
00009c  86b1              STRH     r1,[r6,#0x34]         ;302
00009e  e000              B        |L3.162|
                  |L3.160|
0000a0  86b2              STRH     r2,[r6,#0x34]         ;305
                  |L3.162|
0000a2  f9b64034          LDRSH    r4,[r6,#0x34]         ;305  ; adc_zero_cnt
0000a6  f44f61fa          MOV      r1,#0x7d0             ;306
0000aa  428c              CMP      r4,r1                 ;306
0000ac  db05              BLT      |L3.186|
0000ae  86b1              STRH     r1,[r6,#0x34]         ;308
0000b0  6002              STR      r2,[r0,#0]            ;309  ; main_power_buffer
0000b2  6042              STR      r2,[r0,#4]            ;309  ; main_power_buffer
0000b4  6082              STR      r2,[r0,#8]            ;310  ; main_power_buffer
0000b6  60c2              STR      r2,[r0,#0xc]          ;310  ; main_power_buffer
0000b8  85f2              STRH     r2,[r6,#0x2e]         ;310
                  |L3.186|
0000ba  8eb1              LDRH     r1,[r6,#0x34]         ;310  ; adc_zero_cnt
0000bc  2905              CMP      r1,#5                 ;310
0000be  d14f              BNE      |L3.352|
0000c0  b1bb              CBZ      r3,|L3.242|
0000c2  8e71              LDRH     r1,[r6,#0x32]         ;313  ; adc_gorb_cnt
0000c4  f1010101          ADD      r1,r1,#1              ;313
0000c8  b209              SXTH     r1,r1                 ;313
0000ca  8671              STRH     r1,[r6,#0x32]         ;313
0000cc  f5b17f00          CMP      r1,#0x200             ;315
0000d0  db00              BLT      |L3.212|
0000d2  8672              STRH     r2,[r6,#0x32]         ;317
                  |L3.212|
0000d4  f9b61032          LDRSH    r1,[r6,#0x32]         ;317  ; adc_gorb_cnt
0000d8  064c              LSLS     r4,r1,#25             ;317
0000da  d10a              BNE      |L3.242|
0000dc  ea4f11e1          ASR      r1,r1,#7              ;324
0000e0  e000              B        |L3.228|
                  |L3.226|
0000e2  e015              B        |L3.272|
                  |L3.228|
0000e4  f8504021          LDR      r4,[r0,r1,LSL #2]     ;324
0000e8  ea4f2424          ASR      r4,r4,#8              ;324
0000ec  85f4              STRH     r4,[r6,#0x2e]         ;324
0000ee  f8402021          STR      r2,[r0,r1,LSL #2]     ;324
                  |L3.242|
0000f2  f9b60036          LDRSH    r0,[r6,#0x36]         ;326  ; adc_window_cnt
0000f6  2896              CMP      r0,#0x96              ;327
0000f8  dd01              BLE      |L3.254|
0000fa  b103              CBZ      r3,|L3.254|
0000fc  71f2              STRB     r2,[r6,#7]            ;327
                  |L3.254|
0000fe  381f              SUBS     r0,r0,#0x1f           ;327
000100  2827              CMP      r0,#0x27              ;327
000102  d22d              BCS      |L3.352|
000104  79f0              LDRB     r0,[r6,#7]            ;328  ; adc_window_flag
000106  bb58              CBNZ     r0,|L3.352|
000108  f04f0001          MOV      r0,#1                 ;328
00010c  71f0              STRB     r0,[r6,#7]            ;328
00010e  e027              B        |L3.352|
                  |L3.272|
000110  483f              LDR      r0,|L3.528|
000112  7975              LDRB     r5,[r6,#5]            ;331  ; adc_ch
000114  79b3              LDRB     r3,[r6,#6]            ;331  ; adc_ch_cnt
000116  eb001485          ADD      r4,r0,r5,LSL #6       ;331
00011a  f9b61030          LDRSH    r1,[r6,#0x30]         ;331  ; adc_result
00011e  f8441023          STR      r1,[r4,r3,LSL #2]     ;332
000122  0798              LSLS     r0,r3,#30             ;334
000124  d10f              BNE      |L3.326|
000126  4601              MOV      r1,r0                 ;335
                  |L3.296|
000128  f854c020          LDR      r12,[r4,r0,LSL #2]    ;335
00012c  4461              ADD      r1,r1,r12             ;335
00012e  f1000001          ADD      r0,r0,#1              ;335
000132  b2c0              UXTB     r0,r0                 ;336
000134  2810              CMP      r0,#0x10              ;336
000136  d3f7              BCC      |L3.296|
000138  ea4f1021          ASR      r0,r1,#4              ;338
00013c  4933              LDR      r1,|L3.524|
00013e  f1a10120          SUB      r1,r1,#0x20           ;339
000142  f8210015          STRH     r0,[r1,r5,LSL #1]     ;339
                  |L3.326|
000146  1c6d              ADDS     r5,r5,#1              ;341
000148  b2e8              UXTB     r0,r5                 ;341
00014a  7170              STRB     r0,[r6,#5]            ;342
00014c  2810              CMP      r0,#0x10              ;342
00014e  d307              BCC      |L3.352|
000150  7172              STRB     r2,[r6,#5]            ;342
000152  f1030301          ADD      r3,r3,#1              ;342
000156  b2d8              UXTB     r0,r3                 ;343
000158  71b0              STRB     r0,[r6,#6]            ;343
00015a  2810              CMP      r0,#0x10              ;345
00015c  d300              BCC      |L3.352|
00015e  71b2              STRB     r2,[r6,#6]            ;346
                  |L3.352|
000160  70f2              STRB     r2,[r6,#3]            ;346
000162  f1070701          ADD      r7,r7,#1              ;346
000166  f0070001          AND      r0,r7,#1              ;346
00016a  7130              STRB     r0,[r6,#4]            ;347
00016c  4a29              LDR      r2,|L3.532|
00016e  b130              CBZ      r0,|L3.382|
000170  6810              LDR      r0,[r2,#0]            ;349
000172  f02000ff          BIC      r0,r0,#0xff           ;350
000176  f1000004          ADD      r0,r0,#4              ;350
00017a  6010              STR      r0,[r2,#0]            ;350
00017c  e03d              B        |L3.506|
                  |L3.382|
00017e  7971              LDRB     r1,[r6,#5]            ;351  ; adc_ch
000180  0708              LSLS     r0,r1,#28             ;351
000182  d406              BMI      |L3.402|
000184  6810              LDR      r0,[r2,#0]            ;353
000186  f02000ff          BIC      r0,r0,#0xff           ;353
00018a  f1000001          ADD      r0,r0,#1              ;354
00018e  6010              STR      r0,[r2,#0]            ;354
000190  e005              B        |L3.414|
                  |L3.402|
000192  6810              LDR      r0,[r2,#0]
000194  f02000ff          BIC      r0,r0,#0xff
000198  f1000002          ADD      r0,r0,#2              ;298
00019c  6010              STR      r0,[r2,#0]
                  |L3.414|
00019e  481e              LDR      r0,|L3.536|
0001a0  6803              LDR      r3,[r0,#0]
0001a2  f0435380          ORR      r3,r3,#0x10000000
0001a6  6003              STR      r3,[r0,#0]
0001a8  6a03              LDR      r3,[r0,#0x20]
0001aa  f0434380          ORR      r3,r3,#0x40000000
0001ae  6203              STR      r3,[r0,#0x20]
0001b0  6e03              LDR      r3,[r0,#0x60]
0001b2  f0436380          ORR      r3,r3,#0x4000000
0001b6  6603              STR      r3,[r0,#0x60]
0001b8  07cb              LSLS     r3,r1,#31
0001ba  d00a              BEQ      |L3.466|
0001bc  6943              LDR      r3,[r0,#0x14]
0001be  f0435380          ORR      r3,r3,#0x10000000
0001c2  6143              STR      r3,[r0,#0x14]
                  |L3.452|
0001c4  078b              LSLS     r3,r1,#30
0001c6  d409              BMI      |L3.476|
0001c8  6b43              LDR      r3,[r0,#0x34]
0001ca  f0234380          BIC      r3,r3,#0x40000000
0001ce  6343              STR      r3,[r0,#0x34]
0001d0  e008              B        |L3.484|
                  |L3.466|
0001d2  6943              LDR      r3,[r0,#0x14]
0001d4  f0235380          BIC      r3,r3,#0x10000000
0001d8  6143              STR      r3,[r0,#0x14]
0001da  e7f3              B        |L3.452|
                  |L3.476|
0001dc  6b43              LDR      r3,[r0,#0x34]
0001de  f0434380          ORR      r3,r3,#0x40000000
0001e2  6343              STR      r3,[r0,#0x34]
                  |L3.484|
0001e4  0749              LSLS     r1,r1,#29
0001e6  d404              BMI      |L3.498|
0001e8  6f41              LDR      r1,[r0,#0x74]
0001ea  f0216180          BIC      r1,r1,#0x4000000
0001ee  6741              STR      r1,[r0,#0x74]
0001f0  e003              B        |L3.506|
                  |L3.498|
0001f2  6f41              LDR      r1,[r0,#0x74]
0001f4  f0416180          ORR      r1,r1,#0x4000000
0001f8  6741              STR      r1,[r0,#0x74]
                  |L3.506|
0001fa  6810              LDR      r0,[r2,#0]
0001fc  f0407080          ORR      r0,r0,#0x1000000
000200  6010              STR      r0,[r2,#0]
000202  e8bd81f0          POP      {r4-r8,pc}
;;;359    
                          ENDP

000206  0000              DCW      0x0000
                  |L3.520|
                          DCD      ||area_number.25||+0xce
                  |L3.524|
                          DCD      ||.bss||+0x420
                  |L3.528|
                          DCD      ||.bss||
                  |L3.532|
                          DCD      0x40034000
                  |L3.536|
                          DCD      0x2009c000

                          AREA ||area_number.4||, CODE, READONLY, ALIGN=2

                          EXPORTAS ||area_number.4||, ||.text||
                  ips_current_average_hndl_ PROC
;;;283    //-----------------------------------------------
;;;284    void ke_start(char in)
000000  e92d43f0          PUSH     {r4-r9,lr}
;;;285    {          
000004  b085              SUB      sp,sp,#0x14
;;;286    ke_start_stat=(enum_ke_start_stat)0;		 
000006  4c64              LDR      r4,|L4.408|
000008  4e64              LDR      r6,|L4.412|
00000a  2500              MOVS     r5,#0
00000c  7820              LDRB     r0,[r4,#0]  ; ica_timer_cnt
;;;287    
;;;288    if(spc_stat==spcVZ)ke_start_stat=kssNOT_VZ;
00000e  1c40              ADDS     r0,r0,#1
000010  b2c0              UXTB     r0,r0
000012  7020              STRB     r0,[r4,#0]
000014  280a              CMP      r0,#0xa
000016  d340              BCC      |L4.154|
;;;289    #ifndef UKU_220_IPS_TERMOKOMPENSAT
;;;290    else if(BAT_IS_ON[in]!=bisON)ke_start_stat=kssNOT_BAT;
;;;291    #endif
;;;292    else if(bat[in]._av&(1<<0))ke_start_stat=kssNOT_BAT_AV;
000018  7025              STRB     r5,[r4,#0]
00001a  f8dfc184          LDR      r12,|L4.416|
00001e  f89c0000          LDRB     r0,[r12,#0]  ; ica_plazma
000022  f1000001          ADD      r0,r0,#1
000026  f88c0000          STRB     r0,[r12,#0]
00002a  485e              LDR      r0,|L4.420|
00002c  495e              LDR      r1,|L4.424|
00002e  f9b00000          LDRSH    r0,[r0,#0]  ; bps_I
000032  8008              STRH     r0,[r1,#0]
;;;293    else if(bat[in]._temper_stat&(1<<1))ke_start_stat=kssNOT_BAT_AV_T;
;;;294    else if(bat[in]._av&(1<<1))ke_start_stat=kssNOT_BAT_AV_ASS;
;;;295    else if(bat[in]._Ib>IKB)ke_start_stat=kssNOT_BAT_ZAR;
;;;296    else if(bat[in]._Ib<-IKB)ke_start_stat=kssNOT_BAT_RAZR;
;;;297    else if((spc_stat==spcKE)&&(spc_bat==0))ke_start_stat=kssNOT_KE1;
;;;298    else if((spc_stat==spcKE)&&(spc_bat==1))ke_start_stat=kssNOT_KE2;
;;;299    else 
;;;300    	{
;;;301    
;;;302    	ke_start_stat=kssYES;
;;;303    
;;;304    	spc_stat=spcKE;
;;;305    	__ee_spc_stat=spcKE;
;;;306    	lc640_write_int(EE_SPC_STAT,__ee_spc_stat);
;;;307    	
;;;308    	spc_bat=in;
;;;309    	__ee_spc_bat=in;
;;;310    	lc640_write_int(EE_SPC_BAT,__ee_spc_bat);
;;;311    
;;;312    	bat[in]._zar_cnt_ke=0;
;;;313    	lc640_write_int(ADR_EE_BAT_ZAR_CNT_KE[in],0);
;;;314    	
;;;315    	spc_phase=0;
;;;316    	__ee_spc_phase=0;
;;;317    	lc640_write_int(EE_SPC_PHASE,__ee_spc_phase);
;;;318    
;;;319    	//ke_mem_hndl(in,lc640_read_int(ADR_EE_BAT_ZAR_CNT_KE[spc_bat]));
;;;320    
;;;321    		{					
;;;322    		signed short temp_temp;
;;;323    		signed char temp;
;;;324    		temp_temp=bat[in]._u_old[((bat_u_old_cnt+1)&0x07)]; 
;;;325    		    
;;;326    		temp=LPC_RTC->YEAR;
;;;327    		gran_char(&temp,1,99);
;;;328    		*((char*)(&(ke_date[0])))=temp;
;;;329    			
;;;330    		temp=LPC_RTC->MONTH;
;;;331    		gran_char(&temp,1,12);
;;;332    		*(((char*)(&(ke_date[0])))+1)=temp;
;;;333    		
;;;334    		temp=LPC_RTC->DOM;
;;;335    		gran_char(&temp,1,31);
;;;336    		*(((char*)(&(ke_date[0])))+2)=temp;			
;;;337    				
;;;338    		*(((char*)(&(ke_date[0])))+3)=*((char*)&temp_temp);
;;;339    		lc640_write_long(EE_SPC_KE_DATE0,ke_date[0]);
;;;340    
;;;341    		temp=LPC_RTC->HOUR;
;;;342    		gran_char(&temp,0,23);
;;;343    		*((char*)(&(ke_date[1])))=temp;
;;;344                   
;;;345    		temp=LPC_RTC->MIN;
;;;346    		gran_char(&temp,0,59);
;;;347    		*(((char*)(&(ke_date[1])))+1)=temp;
;;;348    	          
;;;349    		temp=LPC_RTC->SEC;
;;;350    		gran_char(&temp,0,59);
;;;351    		*(((char*)(&(ke_date[1])))+2)=temp;
;;;352    			
;;;353    		*(((char*)(&(ke_date[1])))+3)=*(((char*)&temp_temp)+1);
;;;354    		lc640_write_long(EE_SPC_KE_DATE1,ke_date[1]);
;;;355    		}
;;;356    
;;;357    	}
;;;358    }
000034  495d              LDR      r1,|L4.428|
000036  f8df8178          LDR      r8,|L4.432|
00003a  4662              MOV      r2,r12
00003c  4637              MOV      r7,r6                 ;293
00003e  f9b11000          LDRSH    r1,[r1,#0]            ;293  ; ica_your_current
000042  7852              LDRB     r2,[r2,#1]            ;293
000044  f9b83000          LDRSH    r3,[r8,#0]            ;293
000048  f9b77000          LDRSH    r7,[r7,#0]            ;293
00004c  4288              CMP      r0,r1                 ;294
00004e  dd06              BLE      |L4.94|
000050  eba00901          SUB      r9,r0,r1              ;294
000054  f1b90f0a          CMP      r9,#0xa               ;294
000058  db01              BLT      |L4.94|
00005a  2f01              CMP      r7,#1                 ;295
00005c  d007              BEQ      |L4.110|
                  |L4.94|
00005e  4288              CMP      r0,r1                 ;295
000060  da16              BGE      |L4.144|
000062  1a08              SUBS     r0,r1,r0              ;295
000064  280a              CMP      r0,#0xa               ;295
000066  db13              BLT      |L4.144|
000068  2f01              CMP      r7,#1                 ;295
00006a  d009              BEQ      |L4.128|
00006c  e010              B        |L4.144|
                  |L4.110|
00006e  f1020201          ADD      r2,r2,#1              ;296
000072  f88c2001          STRB     r2,[r12,#1]           ;296
000076  f1a30301          SUB      r3,r3,#1              ;296
00007a  f8a83000          STRH     r3,[r8,#0]
00007e  e007              B        |L4.144|
                  |L4.128|
000080  f1a20201          SUB      r2,r2,#1              ;297
000084  f88c2001          STRB     r2,[r12,#1]           ;297
000088  f1030301          ADD      r3,r3,#1              ;298
00008c  f8a83000          STRH     r3,[r8,#0]            ;297
                  |L4.144|
000090  2214              MOVS     r2,#0x14              ;297
000092  4251              RSBS     r1,r2,#0
000094  4846              LDR      r0,|L4.432|
000096  f7fffffe          BL       gran
                  |L4.154|
00009a  7820              LDRB     r0,[r4,#0]            ;302  ; ica_timer_cnt
00009c  f8df8114          LDR      r8,|L4.436|
0000a0  4f45              LDR      r7,|L4.440|
0000a2  2808              CMP      r0,#8                 ;305
0000a4  d125              BNE      |L4.242|
0000a6  8830              LDRH     r0,[r6,#0]            ;306  ; ICA_EN
0000a8  2801              CMP      r0,#1                 ;306
0000aa  d122              BNE      |L4.242|
0000ac  f8b80000          LDRH     r0,[r8,#0]            ;306  ; ICA_MODBUS_ADDRESS
0000b0  f88d0000          STRB     r0,[sp,#0]            ;309
0000b4  f04f0004          MOV      r0,#4                 ;310
0000b8  f88d0001          STRB     r0,[sp,#1]            ;310
0000bc  f88d5002          STRB     r5,[sp,#2]            ;310
0000c0  f04f0002          MOV      r0,#2                 ;313
0000c4  f88d0003          STRB     r0,[sp,#3]            ;313
0000c8  f88d5004          STRB     r5,[sp,#4]            ;313
0000cc  f04f0001          MOV      r0,#1                 ;315
0000d0  f88d0005          STRB     r0,[sp,#5]            ;316
0000d4  f04f0106          MOV      r1,#6                 ;317
0000d8  4668              MOV      r0,sp                 ;317
0000da  f7fffffe          BL       CRC16_2
0000de  f88d0006          STRB     r0,[sp,#6]            ;324
0000e2  ea4f2020          ASR      r0,r0,#8              ;324
0000e6  f88d0007          STRB     r0,[sp,#7]            ;324
0000ea  f9b70000          LDRSH    r0,[r7,#0]            ;324  ; ICA_CH
0000ee  b3e8              CBZ      r0,|L4.364|
0000f0  2801              CMP      r0,#1                 ;326
                  |L4.242|
0000f2  4832              LDR      r0,|L4.444|
0000f4  f06f0214          MVN      r2,#0x14              ;326
0000f8  f9b00000          LDRSH    r0,[r0,#0]            ;327  ; TBAT
0000fc  ebc01100          RSB      r1,r0,r0,LSL #4       ;327
000100  eb020181          ADD      r1,r2,r1,LSL #2       ;327
000104  4a2e              LDR      r2,|L4.448|
000106  f9b22046          LDRSH    r2,[r2,#0x46]         ;328  ; main_kb_cnt
00010a  4291              CMP      r1,r2                 ;328
00010c  d134              BNE      |L4.376|
00010e  8831              LDRH     r1,[r6,#0]            ;330  ; ICA_EN
000110  2901              CMP      r1,#1                 ;330
000112  d131              BNE      |L4.376|
000114  f8b81000          LDRH     r1,[r8,#0]            ;331  ; ICA_MODBUS_ADDRESS
000118  f88d1000          STRB     r1,[sp,#0]            ;331
00011c  f04f0106          MOV      r1,#6                 ;332
000120  f88d1001          STRB     r1,[sp,#1]            ;332
000124  f88d5002          STRB     r5,[sp,#2]            ;334
000128  f04f011e          MOV      r1,#0x1e              ;335
00012c  f88d1003          STRB     r1,[sp,#3]            ;335
000130  ea4f71e0          ASR      r1,r0,#31             ;336
000134  eb006111          ADD      r1,r0,r1,LSR #24      ;336
000138  ea4f2221          ASR      r2,r1,#8              ;338
00013c  f88d2004          STRB     r2,[sp,#4]            ;339
000140  f88d0005          STRB     r0,[sp,#5]            ;339
000144  f04f0106          MOV      r1,#6                 ;339
000148  4668              MOV      r0,sp                 ;341
00014a  f7fffffe          BL       CRC16_2
00014e  f88d0006          STRB     r0,[sp,#6]            ;342
000152  ea4f2020          ASR      r0,r0,#8              ;342
000156  f88d0007          STRB     r0,[sp,#7]            ;343
00015a  8838              LDRH     r0,[r7,#0]            ;345  ; ICA_CH
00015c  2800              CMP      r0,#0                 ;345
00015e  d10b              BNE      |L4.376|
000160  4604              MOV      r4,r0                 ;346
000162  466d              MOV      r5,sp                 ;346
                  |L4.356|
000164  5d28              LDRB     r0,[r5,r4]            ;346
000166  f7fffffe          BL       putchar_sc16is700
00016a  e000              B        |L4.366|
                  |L4.364|
00016c  e007              B        |L4.382|
                  |L4.366|
00016e  f1040401          ADD      r4,r4,#1              ;349
000172  b2e4              UXTB     r4,r4                 ;350
000174  2c08              CMP      r4,#8                 ;350
000176  d3f5              BCC      |L4.356|
                  |L4.376|
000178  b005              ADD      sp,sp,#0x14           ;350
00017a  e8bd83f0          POP      {r4-r9,pc}            ;350
                  |L4.382|
00017e  f04f0400          MOV      r4,#0                 ;351
000182  46e9              MOV      r9,sp                 ;353
                  |L4.388|
000184  f8190004          LDRB     r0,[r9,r4]            ;353
000188  f7fffffe          BL       putchar_sc16is700
00018c  f1040401          ADD      r4,r4,#1              ;354
000190  b2e4              UXTB     r4,r4                 ;354
000192  2c08              CMP      r4,#8
000194  d3f6              BCC      |L4.388|
000196  e7ac              B        |L4.242|
;;;359    
                          ENDP

                  |L4.408|
                          DCD      ica_timer_cnt
                  |L4.412|
                          DCD      ICA_EN
                  |L4.416|
                          DCD      ica_plazma
                  |L4.420|
                          DCD      bps_I
                  |L4.424|
                          DCD      ica_my_current
                  |L4.428|
                          DCD      ica_your_current
                  |L4.432|
                          DCD      ica_u_necc
                  |L4.436|
                          DCD      ICA_MODBUS_ADDRESS
                  |L4.440|
                          DCD      ICA_CH
                  |L4.444|
                          DCD      TBAT
                  |L4.448|
                          DCD      ||area_number.25||

                          AREA ||area_number.5||, CODE, READONLY, ALIGN=2

                          EXPORTAS ||area_number.5||, ||.text||
                  inv_drv PROC
;;;283    //-----------------------------------------------
;;;284    void ke_start(char in)
000000  b570              PUSH     {r4-r6,lr}
;;;285    {          
000002  4604              MOV      r4,r0
000004  f04f0207          MOV      r2,#7
;;;286    ke_start_stat=(enum_ke_start_stat)0;		 
000008  f04f0101          MOV      r1,#1
00000c  48a4              LDR      r0,|L5.672|
;;;287    
;;;288    if(spc_stat==spcVZ)ke_start_stat=kssNOT_VZ;
00000e  f7fffffe          BL       gran_char
000012  48a4              LDR      r0,|L5.676|
000014  eb040144          ADD      r1,r4,r4,LSL #1
;;;289    #ifndef UKU_220_IPS_TERMOKOMPENSAT
;;;290    else if(BAT_IS_ON[in]!=bisON)ke_start_stat=kssNOT_BAT;
;;;291    #endif
;;;292    else if(bat[in]._av&(1<<0))ke_start_stat=kssNOT_BAT_AV;
000018  eb001541          ADD      r5,r0,r1,LSL #5
00001c  f8950047          LDRB     r0,[r5,#0x47]
000020  f8951046          LDRB     r1,[r5,#0x46]
000024  ea800001          EOR      r0,r0,r1
000028  4a9f              LDR      r2,|L5.680|
00002a  b100              CBZ      r0,|L5.46|
00002c  7050              STRB     r0,[r2,#1]
                  |L5.46|
00002e  ea010100          AND      r1,r1,r0
000032  b101              CBZ      r1,|L5.54|
;;;293    else if(bat[in]._temper_stat&(1<<1))ke_start_stat=kssNOT_BAT_AV_T;
;;;294    else if(bat[in]._av&(1<<1))ke_start_stat=kssNOT_BAT_AV_ASS;
;;;295    else if(bat[in]._Ib>IKB)ke_start_stat=kssNOT_BAT_ZAR;
;;;296    else if(bat[in]._Ib<-IKB)ke_start_stat=kssNOT_BAT_RAZR;
;;;297    else if((spc_stat==spcKE)&&(spc_bat==0))ke_start_stat=kssNOT_KE1;
;;;298    else if((spc_stat==spcKE)&&(spc_bat==1))ke_start_stat=kssNOT_KE2;
;;;299    else 
;;;300    	{
;;;301    
;;;302    	ke_start_stat=kssYES;
;;;303    
;;;304    	spc_stat=spcKE;
;;;305    	__ee_spc_stat=spcKE;
;;;306    	lc640_write_int(EE_SPC_STAT,__ee_spc_stat);
;;;307    	
;;;308    	spc_bat=in;
;;;309    	__ee_spc_bat=in;
;;;310    	lc640_write_int(EE_SPC_BAT,__ee_spc_bat);
;;;311    
;;;312    	bat[in]._zar_cnt_ke=0;
;;;313    	lc640_write_int(ADR_EE_BAT_ZAR_CNT_KE[in],0);
;;;314    	
;;;315    	spc_phase=0;
;;;316    	__ee_spc_phase=0;
;;;317    	lc640_write_int(EE_SPC_PHASE,__ee_spc_phase);
;;;318    
;;;319    	//ke_mem_hndl(in,lc640_read_int(ADR_EE_BAT_ZAR_CNT_KE[spc_bat]));
;;;320    
;;;321    		{					
;;;322    		signed short temp_temp;
;;;323    		signed char temp;
;;;324    		temp_temp=bat[in]._u_old[((bat_u_old_cnt+1)&0x07)]; 
;;;325    		    
;;;326    		temp=LPC_RTC->YEAR;
;;;327    		gran_char(&temp,1,99);
;;;328    		*((char*)(&(ke_date[0])))=temp;
;;;329    			
;;;330    		temp=LPC_RTC->MONTH;
;;;331    		gran_char(&temp,1,12);
;;;332    		*(((char*)(&(ke_date[0])))+1)=temp;
;;;333    		
;;;334    		temp=LPC_RTC->DOM;
;;;335    		gran_char(&temp,1,31);
;;;336    		*(((char*)(&(ke_date[0])))+2)=temp;			
;;;337    				
;;;338    		*(((char*)(&(ke_date[0])))+3)=*((char*)&temp_temp);
;;;339    		lc640_write_long(EE_SPC_KE_DATE0,ke_date[0]);
;;;340    
;;;341    		temp=LPC_RTC->HOUR;
;;;342    		gran_char(&temp,0,23);
;;;343    		*((char*)(&(ke_date[1])))=temp;
;;;344                   
;;;345    		temp=LPC_RTC->MIN;
;;;346    		gran_char(&temp,0,59);
;;;347    		*(((char*)(&(ke_date[1])))+1)=temp;
;;;348    	          
;;;349    		temp=LPC_RTC->SEC;
;;;350    		gran_char(&temp,0,59);
;;;351    		*(((char*)(&(ke_date[1])))+2)=temp;
;;;352    			
;;;353    		*(((char*)(&(ke_date[1])))+3)=*(((char*)&temp_temp)+1);
;;;354    		lc640_write_long(EE_SPC_KE_DATE1,ke_date[1]);
;;;355    		}
;;;356    
;;;357    	}
;;;358    }
000034  7091              STRB     r1,[r2,#2]
                  |L5.54|
000036  ea000301          AND      r3,r0,r1
00003a  07db              LSLS     r3,r3,#31
00003c  d027              BEQ      |L5.142|
00003e  78d0              LDRB     r0,[r2,#3]            ;293  ; plazma_inv
000040  f1000001          ADD      r0,r0,#1              ;293
000044  70d0              STRB     r0,[r2,#3]            ;293
000046  b134              CBZ      r4,|L5.86|
000048  2c01              CMP      r4,#1                 ;293
00004a  d00b              BEQ      |L5.100|
00004c  2c02              CMP      r4,#2                 ;294
00004e  d010              BEQ      |L5.114|
000050  2c03              CMP      r4,#3                 ;294
000052  d015              BEQ      |L5.128|
000054  e120              B        |L5.664|
                  |L5.86|
000056  2301              MOVS     r3,#1
000058  461a              MOV      r2,r3                 ;295
00005a  210e              MOVS     r1,#0xe               ;295
00005c  a093              ADR      r0,|L5.684|
00005e  f7fffffe          BL       snmp_trap_send
000062  e119              B        |L5.664|
                  |L5.100|
000064  2301              MOVS     r3,#1                 ;295
000066  2202              MOVS     r2,#2                 ;295
000068  210e              MOVS     r1,#0xe               ;295
00006a  a097              ADR      r0,|L5.712|
00006c  f7fffffe          BL       snmp_trap_send
000070  e112              B        |L5.664|
                  |L5.114|
000072  2301              MOVS     r3,#1                 ;296
000074  2203              MOVS     r2,#3                 ;296
000076  210e              MOVS     r1,#0xe               ;296
000078  a09a              ADR      r0,|L5.740|
00007a  f7fffffe          BL       snmp_trap_send
00007e  e10b              B        |L5.664|
                  |L5.128|
000080  2301              MOVS     r3,#1                 ;297
000082  2204              MOVS     r2,#4                 ;297
000084  210e              MOVS     r1,#0xe               ;297
000086  a09e              ADR      r0,|L5.768|
000088  f7fffffe          BL       snmp_trap_send
00008c  e104              B        |L5.664|
                  |L5.142|
00008e  0783              LSLS     r3,r0,#30             ;297
000090  d529              BPL      |L5.230|
000092  078b              LSLS     r3,r1,#30
000094  d527              BPL      |L5.230|
000096  78d0              LDRB     r0,[r2,#3]            ;298  ; plazma_inv
000098  f1000001          ADD      r0,r0,#1              ;302
00009c  70d0              STRB     r0,[r2,#3]            ;302
00009e  b134              CBZ      r4,|L5.174|
0000a0  2c01              CMP      r4,#1                 ;305
0000a2  d00b              BEQ      |L5.188|
0000a4  2c02              CMP      r4,#2                 ;306
0000a6  d010              BEQ      |L5.202|
0000a8  2c03              CMP      r4,#3                 ;306
0000aa  d015              BEQ      |L5.216|
0000ac  e0f4              B        |L5.664|
                  |L5.174|
0000ae  2302              MOVS     r3,#2                 ;308
0000b0  2201              MOVS     r2,#1                 ;309
0000b2  210e              MOVS     r1,#0xe               ;309
0000b4  a099              ADR      r0,|L5.796|
0000b6  f7fffffe          BL       snmp_trap_send
0000ba  e0ed              B        |L5.664|
                  |L5.188|
0000bc  2302              MOVS     r3,#2                 ;310
0000be  461a              MOV      r2,r3                 ;312
0000c0  210e              MOVS     r1,#0xe               ;313
0000c2  a09d              ADR      r0,|L5.824|
0000c4  f7fffffe          BL       snmp_trap_send
0000c8  e0e6              B        |L5.664|
                  |L5.202|
0000ca  2302              MOVS     r3,#2                 ;313
0000cc  2203              MOVS     r2,#3                 ;315
0000ce  210e              MOVS     r1,#0xe               ;316
0000d0  a0a0              ADR      r0,|L5.852|
0000d2  f7fffffe          BL       snmp_trap_send
0000d6  e0df              B        |L5.664|
                  |L5.216|
0000d8  2302              MOVS     r3,#2                 ;317
0000da  2204              MOVS     r2,#4                 ;317
0000dc  210e              MOVS     r1,#0xe               ;324
0000de  a0a4              ADR      r0,|L5.880|
0000e0  f7fffffe          BL       snmp_trap_send
0000e4  e0d8              B        |L5.664|
                  |L5.230|
0000e6  0743              LSLS     r3,r0,#29             ;324
0000e8  d529              BPL      |L5.318|
0000ea  074b              LSLS     r3,r1,#29             ;324
0000ec  d527              BPL      |L5.318|
0000ee  78d0              LDRB     r0,[r2,#3]            ;324  ; plazma_inv
0000f0  f1000001          ADD      r0,r0,#1              ;326
0000f4  70d0              STRB     r0,[r2,#3]            ;326
0000f6  b134              CBZ      r4,|L5.262|
0000f8  2c01              CMP      r4,#1                 ;327
0000fa  d00b              BEQ      |L5.276|
0000fc  2c02              CMP      r4,#2                 ;327
0000fe  d010              BEQ      |L5.290|
000100  2c03              CMP      r4,#3                 ;327
000102  d015              BEQ      |L5.304|
000104  e0c8              B        |L5.664|
                  |L5.262|
000106  2303              MOVS     r3,#3                 ;328
000108  2201              MOVS     r2,#1                 ;328
00010a  210e              MOVS     r1,#0xe               ;328
00010c  a09f              ADR      r0,|L5.908|
00010e  f7fffffe          BL       snmp_trap_send
000112  e0c1              B        |L5.664|
                  |L5.276|
000114  2303              MOVS     r3,#3                 ;331
000116  2202              MOVS     r2,#2                 ;331
000118  210e              MOVS     r1,#0xe               ;331
00011a  a0a3              ADR      r0,|L5.936|
00011c  f7fffffe          BL       snmp_trap_send
000120  e0ba              B        |L5.664|
                  |L5.290|
000122  2303              MOVS     r3,#3                 ;334
000124  461a              MOV      r2,r3                 ;334
000126  210e              MOVS     r1,#0xe               ;335
000128  a0a6              ADR      r0,|L5.964|
00012a  f7fffffe          BL       snmp_trap_send
00012e  e0b3              B        |L5.664|
                  |L5.304|
000130  2303              MOVS     r3,#3                 ;336
000132  2204              MOVS     r2,#4                 ;336
000134  210e              MOVS     r1,#0xe               ;336
000136  a0aa              ADR      r0,|L5.992|
000138  f7fffffe          BL       snmp_trap_send
00013c  e0ac              B        |L5.664|
                  |L5.318|
00013e  0703              LSLS     r3,r0,#28             ;339
000140  d529              BPL      |L5.406|
000142  070b              LSLS     r3,r1,#28             ;339
000144  d527              BPL      |L5.406|
000146  78d0              LDRB     r0,[r2,#3]            ;341  ; plazma_inv
000148  f1000001          ADD      r0,r0,#1              ;341
00014c  70d0              STRB     r0,[r2,#3]            ;342
00014e  b134              CBZ      r4,|L5.350|
000150  2c01              CMP      r4,#1                 ;342
000152  d00b              BEQ      |L5.364|
000154  2c02              CMP      r4,#2                 ;343
000156  d010              BEQ      |L5.378|
000158  2c03              CMP      r4,#3                 ;343
00015a  d015              BEQ      |L5.392|
00015c  e09c              B        |L5.664|
                  |L5.350|
00015e  2304              MOVS     r3,#4                 ;346
000160  2201              MOVS     r2,#1                 ;346
000162  210e              MOVS     r1,#0xe               ;346
000164  a0a5              ADR      r0,|L5.1020|
000166  f7fffffe          BL       snmp_trap_send
00016a  e095              B        |L5.664|
                  |L5.364|
00016c  2304              MOVS     r3,#4                 ;347
00016e  2202              MOVS     r2,#2                 ;349
000170  210e              MOVS     r1,#0xe               ;349
000172  a0ab              ADR      r0,|L5.1056|
000174  f7fffffe          BL       snmp_trap_send
000178  e08e              B        |L5.664|
                  |L5.378|
00017a  2304              MOVS     r3,#4                 ;350
00017c  2203              MOVS     r2,#3                 ;351
00017e  210e              MOVS     r1,#0xe               ;351
000180  a0b0              ADR      r0,|L5.1092|
000182  f7fffffe          BL       snmp_trap_send
000186  e087              B        |L5.664|
                  |L5.392|
000188  2304              MOVS     r3,#4                 ;354
00018a  461a              MOV      r2,r3                 ;354
00018c  210e              MOVS     r1,#0xe               ;354
00018e  a0b6              ADR      r0,|L5.1128|
000190  f7fffffe          BL       snmp_trap_send
000194  e080              B        |L5.664|
                  |L5.406|
000196  06c3              LSLS     r3,r0,#27             ;298
000198  d529              BPL      |L5.494|
00019a  06cb              LSLS     r3,r1,#27             ;298
00019c  d527              BPL      |L5.494|
00019e  78d0              LDRB     r0,[r2,#3]  ; plazma_inv
0001a0  f1000001          ADD      r0,r0,#1
0001a4  70d0              STRB     r0,[r2,#3]
0001a6  b134              CBZ      r4,|L5.438|
0001a8  2c01              CMP      r4,#1
0001aa  d00b              BEQ      |L5.452|
0001ac  2c02              CMP      r4,#2
0001ae  d010              BEQ      |L5.466|
0001b0  2c03              CMP      r4,#3
0001b2  d015              BEQ      |L5.480|
0001b4  e070              B        |L5.664|
                  |L5.438|
0001b6  2305              MOVS     r3,#5
0001b8  2201              MOVS     r2,#1
0001ba  210e              MOVS     r1,#0xe
0001bc  a0b3              ADR      r0,|L5.1164|
0001be  f7fffffe          BL       snmp_trap_send
0001c2  e069              B        |L5.664|
                  |L5.452|
0001c4  2305              MOVS     r3,#5
0001c6  2202              MOVS     r2,#2
0001c8  210e              MOVS     r1,#0xe
0001ca  a0b9              ADR      r0,|L5.1200|
0001cc  f7fffffe          BL       snmp_trap_send
0001d0  e062              B        |L5.664|
                  |L5.466|
0001d2  2305              MOVS     r3,#5
0001d4  2203              MOVS     r2,#3
0001d6  210e              MOVS     r1,#0xe
0001d8  a0be              ADR      r0,|L5.1236|
0001da  f7fffffe          BL       snmp_trap_send
0001de  e05b              B        |L5.664|
                  |L5.480|
0001e0  2305              MOVS     r3,#5
0001e2  2204              MOVS     r2,#4
0001e4  210e              MOVS     r1,#0xe
0001e6  a0c4              ADR      r0,|L5.1272|
0001e8  f7fffffe          BL       snmp_trap_send
0001ec  e054              B        |L5.664|
                  |L5.494|
0001ee  0683              LSLS     r3,r0,#26
0001f0  d529              BPL      |L5.582|
0001f2  068b              LSLS     r3,r1,#26
0001f4  d527              BPL      |L5.582|
0001f6  78d0              LDRB     r0,[r2,#3]  ; plazma_inv
0001f8  f1000001          ADD      r0,r0,#1
0001fc  70d0              STRB     r0,[r2,#3]
0001fe  b134              CBZ      r4,|L5.526|
000200  2c01              CMP      r4,#1
000202  d00b              BEQ      |L5.540|
000204  2c02              CMP      r4,#2
000206  d010              BEQ      |L5.554|
000208  2c03              CMP      r4,#3
00020a  d015              BEQ      |L5.568|
00020c  e044              B        |L5.664|
                  |L5.526|
00020e  2306              MOVS     r3,#6
000210  2201              MOVS     r2,#1
000212  210e              MOVS     r1,#0xe
000214  a0c1              ADR      r0,|L5.1308|
000216  f7fffffe          BL       snmp_trap_send
00021a  e03d              B        |L5.664|
                  |L5.540|
00021c  2306              MOVS     r3,#6
00021e  2202              MOVS     r2,#2
000220  210e              MOVS     r1,#0xe
000222  a0c7              ADR      r0,|L5.1344|
000224  f7fffffe          BL       snmp_trap_send
000228  e036              B        |L5.664|
                  |L5.554|
00022a  2306              MOVS     r3,#6
00022c  2203              MOVS     r2,#3
00022e  210e              MOVS     r1,#0xe
000230  a0cc              ADR      r0,|L5.1380|
000232  f7fffffe          BL       snmp_trap_send
000236  e02f              B        |L5.664|
                  |L5.568|
000238  2306              MOVS     r3,#6
00023a  2204              MOVS     r2,#4
00023c  210e              MOVS     r1,#0xe
00023e  a0d2              ADR      r0,|L5.1416|
000240  f7fffffe          BL       snmp_trap_send
000244  e028              B        |L5.664|
                  |L5.582|
000246  b300              CBZ      r0,|L5.650|
000248  b9f9              CBNZ     r1,|L5.650|
00024a  78d0              LDRB     r0,[r2,#3]  ; plazma_inv
00024c  f1000001          ADD      r0,r0,#1
000250  70d0              STRB     r0,[r2,#3]
000252  b134              CBZ      r4,|L5.610|
000254  2c01              CMP      r4,#1
000256  d00b              BEQ      |L5.624|
000258  2c02              CMP      r4,#2
00025a  d010              BEQ      |L5.638|
00025c  2c03              CMP      r4,#3
00025e  d015              BEQ      |L5.652|
000260  e01a              B        |L5.664|
                  |L5.610|
000262  2300              MOVS     r3,#0
000264  2201              MOVS     r2,#1
000266  210e              MOVS     r1,#0xe
000268  a0d0              ADR      r0,|L5.1452|
00026a  f7fffffe          BL       snmp_trap_send
00026e  e013              B        |L5.664|
                  |L5.624|
000270  2300              MOVS     r3,#0
000272  2202              MOVS     r2,#2
000274  210e              MOVS     r1,#0xe
000276  a0d2              ADR      r0,|L5.1472|
000278  f7fffffe          BL       snmp_trap_send
00027c  e00c              B        |L5.664|
                  |L5.638|
00027e  2300              MOVS     r3,#0
000280  2203              MOVS     r2,#3
000282  210e              MOVS     r1,#0xe
000284  a0d3              ADR      r0,|L5.1492|
000286  f7fffffe          BL       snmp_trap_send
                  |L5.650|
00028a  e005              B        |L5.664|
                  |L5.652|
00028c  2300              MOVS     r3,#0
00028e  2204              MOVS     r2,#4
000290  210e              MOVS     r1,#0xe
000292  a0d5              ADR      r0,|L5.1512|
000294  f7fffffe          BL       snmp_trap_send
                  |L5.664|
000298  f8150f46          LDRB     r0,[r5,#0x46]!
00029c  7068              STRB     r0,[r5,#1]
00029e  bd70              POP      {r4-r6,pc}
;;;359    
                          ENDP

                  |L5.672|
                          DCD      first_inv_slot
                  |L5.676|
                          DCD      inv
                  |L5.680|
                          DCD      ||area_number.25||+0xa4
                  |L5.684|
0002ac  496e7665          DCB      "Invertor #1 Alarm, overload",0
0002b0  72746f72
0002b4  20233120
0002b8  416c6172
0002bc  6d2c206f
0002c0  7665726c
0002c4  6f616400
                  |L5.712|
0002c8  496e7665          DCB      "Invertor #2 Alarm, overload",0
0002cc  72746f72
0002d0  20233220
0002d4  416c6172
0002d8  6d2c206f
0002dc  7665726c
0002e0  6f616400
                  |L5.740|
0002e4  496e7665          DCB      "Invertor #3 Alarm, overload",0
0002e8  72746f72
0002ec  20233320
0002f0  416c6172
0002f4  6d2c206f
0002f8  7665726c
0002fc  6f616400
                  |L5.768|
000300  496e7665          DCB      "Invertor #4 Alarm, overload",0
000304  72746f72
000308  20233420
00030c  416c6172
000310  6d2c206f
000314  7665726c
000318  6f616400
                  |L5.796|
00031c  496e7665          DCB      "Invertor #1 Alarm, overheat",0
000320  72746f72
000324  20233120
000328  416c6172
00032c  6d2c206f
000330  76657268
000334  65617400
                  |L5.824|
000338  496e7665          DCB      "Invertor #2 Alarm, overheat",0
00033c  72746f72
000340  20233220
000344  416c6172
000348  6d2c206f
00034c  76657268
000350  65617400
                  |L5.852|
000354  496e7665          DCB      "Invertor #3 Alarm, overheat",0
000358  72746f72
00035c  20233320
000360  416c6172
000364  6d2c206f
000368  76657268
00036c  65617400
                  |L5.880|
000370  496e7665          DCB      "Invertor #4 Alarm, overheat",0
000374  72746f72
000378  20233420
00037c  416c6172
000380  6d2c206f
000384  76657268
000388  65617400
                  |L5.908|
00038c  496e7665          DCB      "Invertor #1 Alarm, is warm",0
000390  72746f72
000394  20233120
000398  416c6172
00039c  6d2c2069
0003a0  73207761
0003a4  726d00  
0003a7  00                DCB      0
                  |L5.936|
0003a8  496e7665          DCB      "Invertor #2 Alarm, is warm",0
0003ac  72746f72
0003b0  20233220
0003b4  416c6172
0003b8  6d2c2069
0003bc  73207761
0003c0  726d00  
0003c3  00                DCB      0
                  |L5.964|
0003c4  496e7665          DCB      "Invertor #3 Alarm, is warm",0
0003c8  72746f72
0003cc  20233320
0003d0  416c6172
0003d4  6d2c2069
0003d8  73207761
0003dc  726d00  
0003df  00                DCB      0
                  |L5.992|
0003e0  496e7665          DCB      "Invertor #4 Alarm, is warm",0
0003e4  72746f72
0003e8  20233420
0003ec  416c6172
0003f0  6d2c2069
0003f4  73207761
0003f8  726d00  
0003fb  00                DCB      0
                  |L5.1020|
0003fc  496e7665          DCB      "Invertor #1 Alarm, voltage is up",0
000400  72746f72
000404  20233120
000408  416c6172
00040c  6d2c2076
000410  6f6c7461
000414  67652069
000418  73207570
00041c  00      
00041d  00                DCB      0
00041e  00                DCB      0
00041f  00                DCB      0
                  |L5.1056|
000420  496e7665          DCB      "Invertor #2 Alarm, voltage is up",0
000424  72746f72
000428  20233220
00042c  416c6172
000430  6d2c2076
000434  6f6c7461
000438  67652069
00043c  73207570
000440  00      
000441  00                DCB      0
000442  00                DCB      0
000443  00                DCB      0
                  |L5.1092|
000444  496e7665          DCB      "Invertor #3 Alarm, voltage is up",0
000448  72746f72
00044c  20233320
000450  416c6172
000454  6d2c2076
000458  6f6c7461
00045c  67652069
000460  73207570
000464  00      
000465  00                DCB      0
000466  00                DCB      0
000467  00                DCB      0
                  |L5.1128|
000468  496e7665          DCB      "Invertor #4 Alarm, voltage is up",0
00046c  72746f72
000470  20233420
000474  416c6172
000478  6d2c2076
00047c  6f6c7461
000480  67652069
000484  73207570
000488  00      
000489  00                DCB      0
00048a  00                DCB      0
00048b  00                DCB      0
                  |L5.1164|
00048c  496e7665          DCB      "Invertor #1 Alarm, voltage is down",0
000490  72746f72
000494  20233120
000498  416c6172
00049c  6d2c2076
0004a0  6f6c7461
0004a4  67652069
0004a8  7320646f
0004ac  776e00  
0004af  00                DCB      0
                  |L5.1200|
0004b0  496e7665          DCB      "Invertor #2 Alarm, voltage is down",0
0004b4  72746f72
0004b8  20233220
0004bc  416c6172
0004c0  6d2c2076
0004c4  6f6c7461
0004c8  67652069
0004cc  7320646f
0004d0  776e00  
0004d3  00                DCB      0
                  |L5.1236|
0004d4  496e7665          DCB      "Invertor #3 Alarm, voltage is down",0
0004d8  72746f72
0004dc  20233320
0004e0  416c6172
0004e4  6d2c2076
0004e8  6f6c7461
0004ec  67652069
0004f0  7320646f
0004f4  776e00  
0004f7  00                DCB      0
                  |L5.1272|
0004f8  496e7665          DCB      "Invertor #4 Alarm, voltage is down",0
0004fc  72746f72
000500  20233420
000504  416c6172
000508  6d2c2076
00050c  6f6c7461
000510  67652069
000514  7320646f
000518  776e00  
00051b  00                DCB      0
                  |L5.1308|
00051c  496e7665          DCB      "Invertor #1 Alarm, output is offed",0
000520  72746f72
000524  20233120
000528  416c6172
00052c  6d2c206f
000530  75747075
000534  74206973
000538  206f6666
00053c  656400  
00053f  00                DCB      0
                  |L5.1344|
000540  496e7665          DCB      "Invertor #2 Alarm, output is offed",0
000544  72746f72
000548  20233220
00054c  416c6172
000550  6d2c206f
000554  75747075
000558  74206973
00055c  206f6666
000560  656400  
000563  00                DCB      0
                  |L5.1380|
000564  496e7665          DCB      "Invertor #3 Alarm, output is offed",0
000568  72746f72
00056c  20233320
000570  416c6172
000574  6d2c206f
000578  75747075
00057c  74206973
000580  206f6666
000584  656400  
000587  00                DCB      0
                  |L5.1416|
000588  496e7665          DCB      "Invertor #4 Alarm, output is offed",0
00058c  72746f72
000590  20233420
000594  416c6172
000598  6d2c206f
00059c  75747075
0005a0  74206973
0005a4  206f6666
0005a8  656400  
0005ab  00                DCB      0
                  |L5.1452|
0005ac  496e7665          DCB      "Invertor #1 is norm",0
0005b0  72746f72
0005b4  20233120
0005b8  6973206e
0005bc  6f726d00
                  |L5.1472|
0005c0  496e7665          DCB      "Invertor #2 is norm",0
0005c4  72746f72
0005c8  20233220
0005cc  6973206e
0005d0  6f726d00
                  |L5.1492|
0005d4  496e7665          DCB      "Invertor #3 is norm",0
0005d8  72746f72
0005dc  20233320
0005e0  6973206e
0005e4  6f726d00
                  |L5.1512|
0005e8  496e7665          DCB      "Invertor #4 is norm",0
0005ec  72746f72
0005f0  20233420
0005f4  6973206e
0005f8  6f726d00

                          AREA ||area_number.6||, CODE, READONLY, ALIGN=2

                          EXPORTAS ||area_number.6||, ||.text||
                  klimat_hndl PROC
;;;283    //-----------------------------------------------
;;;284    void ke_start(char in)
000000  e92d41f0          PUSH     {r4-r8,lr}
;;;285    {          
000004  4d66              LDR      r5,|L6.416|
;;;286    ke_start_stat=(enum_ke_start_stat)0;		 
000006  4867              LDR      r0,|L6.420|
000008  4c67              LDR      r4,|L6.424|
00000a  f9b51000          LDRSH    r1,[r5,#0]  ; t_box
;;;287    
;;;288    if(spc_stat==spcVZ)ke_start_stat=kssNOT_VZ;
00000e  f9b02000          LDRSH    r2,[r0,#0]  ; TBOXMAX
000012  f9b40000          LDRSH    r0,[r4,#0]
000016  4291              CMP      r1,r2
;;;289    #ifndef UKU_220_IPS_TERMOKOMPENSAT
;;;290    else if(BAT_IS_ON[in]!=bisON)ke_start_stat=kssNOT_BAT;
;;;291    #endif
;;;292    else if(bat[in]._av&(1<<0))ke_start_stat=kssNOT_BAT_AV;
000018  dd03              BLE      |L6.34|
00001a  f1000001          ADD      r0,r0,#1
00001e  8020              STRH     r0,[r4,#0]
000020  e003              B        |L6.42|
                  |L6.34|
000022  da02              BGE      |L6.42|
000024  f1a00001          SUB      r0,r0,#1
000028  8020              STRH     r0,[r4,#0]
                  |L6.42|
00002a  2206              MOVS     r2,#6
00002c  2100              MOVS     r1,#0
00002e  485e              LDR      r0,|L6.424|
000030  f7fffffe          BL       gran
;;;293    else if(bat[in]._temper_stat&(1<<1))ke_start_stat=kssNOT_BAT_AV_T;
;;;294    else if(bat[in]._av&(1<<1))ke_start_stat=kssNOT_BAT_AV_ASS;
;;;295    else if(bat[in]._Ib>IKB)ke_start_stat=kssNOT_BAT_ZAR;
;;;296    else if(bat[in]._Ib<-IKB)ke_start_stat=kssNOT_BAT_RAZR;
;;;297    else if((spc_stat==spcKE)&&(spc_bat==0))ke_start_stat=kssNOT_KE1;
;;;298    else if((spc_stat==spcKE)&&(spc_bat==1))ke_start_stat=kssNOT_KE2;
;;;299    else 
;;;300    	{
;;;301    
;;;302    	ke_start_stat=kssYES;
;;;303    
;;;304    	spc_stat=spcKE;
;;;305    	__ee_spc_stat=spcKE;
;;;306    	lc640_write_int(EE_SPC_STAT,__ee_spc_stat);
;;;307    	
;;;308    	spc_bat=in;
;;;309    	__ee_spc_bat=in;
;;;310    	lc640_write_int(EE_SPC_BAT,__ee_spc_bat);
;;;311    
;;;312    	bat[in]._zar_cnt_ke=0;
;;;313    	lc640_write_int(ADR_EE_BAT_ZAR_CNT_KE[in],0);
;;;314    	
;;;315    	spc_phase=0;
;;;316    	__ee_spc_phase=0;
;;;317    	lc640_write_int(EE_SPC_PHASE,__ee_spc_phase);
;;;318    
;;;319    	//ke_mem_hndl(in,lc640_read_int(ADR_EE_BAT_ZAR_CNT_KE[spc_bat]));
;;;320    
;;;321    		{					
;;;322    		signed short temp_temp;
;;;323    		signed char temp;
;;;324    		temp_temp=bat[in]._u_old[((bat_u_old_cnt+1)&0x07)]; 
;;;325    		    
;;;326    		temp=LPC_RTC->YEAR;
;;;327    		gran_char(&temp,1,99);
;;;328    		*((char*)(&(ke_date[0])))=temp;
;;;329    			
;;;330    		temp=LPC_RTC->MONTH;
;;;331    		gran_char(&temp,1,12);
;;;332    		*(((char*)(&(ke_date[0])))+1)=temp;
;;;333    		
;;;334    		temp=LPC_RTC->DOM;
;;;335    		gran_char(&temp,1,31);
;;;336    		*(((char*)(&(ke_date[0])))+2)=temp;			
;;;337    				
;;;338    		*(((char*)(&(ke_date[0])))+3)=*((char*)&temp_temp);
;;;339    		lc640_write_long(EE_SPC_KE_DATE0,ke_date[0]);
;;;340    
;;;341    		temp=LPC_RTC->HOUR;
;;;342    		gran_char(&temp,0,23);
;;;343    		*((char*)(&(ke_date[1])))=temp;
;;;344                   
;;;345    		temp=LPC_RTC->MIN;
;;;346    		gran_char(&temp,0,59);
;;;347    		*(((char*)(&(ke_date[1])))+1)=temp;
;;;348    	          
;;;349    		temp=LPC_RTC->SEC;
;;;350    		gran_char(&temp,0,59);
;;;351    		*(((char*)(&(ke_date[1])))+2)=temp;
;;;352    			
;;;353    		*(((char*)(&(ke_date[1])))+3)=*(((char*)&temp_temp)+1);
;;;354    		lc640_write_long(EE_SPC_KE_DATE1,ke_date[1]);
;;;355    		}
;;;356    
;;;357    	}
;;;358    }
000034  f9b40000          LDRSH    r0,[r4,#0]  ; av_tbox_cnt
000038  495c              LDR      r1,|L6.428|
00003a  2601              MOVS     r6,#1
00003c  2805              CMP      r0,#5                 ;293
00003e  dd00              BLE      |L6.66|
000040  700e              STRB     r6,[r1,#0]            ;293
                  |L6.66|
000042  2400              MOVS     r4,#0                 ;293
000044  2801              CMP      r0,#1                 ;293
000046  da00              BGE      |L6.74|
000048  700c              STRB     r4,[r1,#0]            ;293
                  |L6.74|
00004a  4959              LDR      r1,|L6.432|
00004c  f9b50000          LDRSH    r0,[r5,#0]            ;294  ; t_box
000050  4a58              LDR      r2,|L6.436|
000052  f9b11000          LDRSH    r1,[r1,#0]            ;294  ; TBOXREG
000056  4f58              LDR      r7,|L6.440|
000058  1e8b              SUBS     r3,r1,#2              ;295
00005a  4298              CMP      r0,r3                 ;295
00005c  da0f              BGE      |L6.126|
00005e  f9921000          LDRSB    r1,[r2,#0]            ;295  ; t_box_cnt
000062  291e              CMP      r1,#0x1e              ;295
000064  da1e              BGE      |L6.164|
000066  f1010101          ADD      r1,r1,#1              ;295
00006a  b249              SXTB     r1,r1                 ;295
00006c  7011              STRB     r1,[r2,#0]
00006e  291e              CMP      r1,#0x1e              ;296
000070  db18              BLT      |L6.164|
000072  8839              LDRH     r1,[r7,#0]            ;296  ; main_vent_pos
000074  f1a10101          SUB      r1,r1,#1              ;296
000078  8039              STRH     r1,[r7,#0]            ;296
00007a  7014              STRB     r4,[r2,#0]
00007c  e012              B        |L6.164|
                  |L6.126|
00007e  4288              CMP      r0,r1                 ;297
000080  dd0f              BLE      |L6.162|
000082  f9921000          LDRSB    r1,[r2,#0]            ;297  ; t_box_cnt
000086  291e              CMP      r1,#0x1e              ;298
000088  da0c              BGE      |L6.164|
00008a  f1010101          ADD      r1,r1,#1              ;298
00008e  b249              SXTB     r1,r1                 ;297
000090  7011              STRB     r1,[r2,#0]            ;297
000092  291e              CMP      r1,#0x1e
000094  db06              BLT      |L6.164|
000096  8839              LDRH     r1,[r7,#0]            ;298  ; main_vent_pos
000098  f1010101          ADD      r1,r1,#1              ;302
00009c  8039              STRH     r1,[r7,#0]            ;302
00009e  7014              STRB     r4,[r2,#0]            ;304
0000a0  e000              B        |L6.164|
                  |L6.162|
0000a2  7014              STRB     r4,[r2,#0]            ;305
                  |L6.164|
0000a4  4945              LDR      r1,|L6.444|
0000a6  f9b11000          LDRSH    r1,[r1,#0]            ;306  ; TBOXVENTMAX
0000aa  4288              CMP      r0,r1                 ;306
0000ac  dd05              BLE      |L6.186|
0000ae  2214              MOVS     r2,#0x14              ;308
0000b0  2100              MOVS     r1,#0                 ;309
0000b2  4841              LDR      r0,|L6.440|
0000b4  f7fffffe          BL       gran
0000b8  e007              B        |L6.202|
                  |L6.186|
0000ba  4841              LDR      r0,|L6.448|
0000bc  2100              MOVS     r1,#0                 ;310
0000be  8800              LDRH     r0,[r0,#0]            ;312  ; pos_vent
0000c0  3009              ADDS     r0,r0,#9              ;313
0000c2  b202              SXTH     r2,r0                 ;313
0000c4  483c              LDR      r0,|L6.440|
0000c6  f7fffffe          BL       gran
                  |L6.202|
0000ca  20f0              MOVS     r0,#0xf0              ;313
0000cc  f7fffffe          BL       mess_find_unvol
0000d0  b128              CBZ      r0,|L6.222|
0000d2  483c              LDR      r0,|L6.452|
0000d4  6801              LDR      r1,[r0,#0]            ;317  ; mess_data
0000d6  29f1              CMP      r1,#0xf1              ;317
0000d8  d101              BNE      |L6.222|
0000da  6840              LDR      r0,[r0,#4]            ;317  ; mess_data
0000dc  8038              STRH     r0,[r7,#0]            ;324
                  |L6.222|
0000de  f9b71000          LDRSH    r1,[r7,#0]            ;324  ; main_vent_pos
0000e2  4839              LDR      r0,|L6.456|
0000e4  2901              CMP      r1,#1                 ;324
0000e6  dc01              BGT      |L6.236|
0000e8  7006              STRB     r6,[r0,#0]            ;324
0000ea  e000              B        |L6.238|
                  |L6.236|
0000ec  7004              STRB     r4,[r0,#0]            ;324
                  |L6.238|
0000ee  4837              LDR      r0,|L6.460|
0000f0  f8df80dc          LDR      r8,|L6.464|
0000f4  f9b00000          LDRSH    r0,[r0,#0]            ;326  ; TBATDISABLE
0000f8  f1a00132          SUB      r1,r0,#0x32           ;327
0000fc  2928              CMP      r1,#0x28              ;327
0000fe  d821              BHI      |L6.324|
000100  f9b51000          LDRSH    r1,[r5,#0]            ;327  ; t_box
000104  4f33              LDR      r7,|L6.468|
000106  4281              CMP      r1,r0                 ;328
000108  dd03              BLE      |L6.274|
00010a  8838              LDRH     r0,[r7,#0]            ;328  ; tbatdisable_cnt
00010c  f1000001          ADD      r0,r0,#1              ;328
000110  8038              STRH     r0,[r7,#0]            ;330
                  |L6.274|
000112  4831              LDR      r0,|L6.472|
000114  f9b00000          LDRSH    r0,[r0,#0]            ;331  ; TBATENABLE
000118  4281              CMP      r1,r0                 ;331
00011a  da03              BGE      |L6.292|
00011c  8838              LDRH     r0,[r7,#0]            ;332  ; tbatdisable_cnt
00011e  f1a00001          SUB      r0,r0,#1              ;332
000122  8038              STRH     r0,[r7,#0]            ;334
                  |L6.292|
000124  2206              MOVS     r2,#6                 ;334
000126  2100              MOVS     r1,#0                 ;335
000128  482a              LDR      r0,|L6.468|
00012a  f7fffffe          BL       gran
00012e  f9b70000          LDRSH    r0,[r7,#0]            ;335  ; tbatdisable_cnt
000132  2805              CMP      r0,#5                 ;336
000134  dd01              BLE      |L6.314|
000136  f8886000          STRB     r6,[r8,#0]            ;338
                  |L6.314|
00013a  2801              CMP      r0,#1                 ;338
00013c  da04              BGE      |L6.328|
00013e  f8884000          STRB     r4,[r8,#0]            ;339
000142  e001              B        |L6.328|
                  |L6.324|
000144  f8884000          STRB     r4,[r8,#0]            ;339
                  |L6.328|
000148  4824              LDR      r0,|L6.476|
00014a  4f25              LDR      r7,|L6.480|
00014c  f9b00000          LDRSH    r0,[r0,#0]            ;342  ; TLOADDISABLE
000150  f1a00132          SUB      r1,r0,#0x32           ;342
000154  291e              CMP      r1,#0x1e              ;343
000156  d820              BHI      |L6.410|
000158  f9b51000          LDRSH    r1,[r5,#0]            ;343  ; t_box
00015c  4d21              LDR      r5,|L6.484|
00015e  4281              CMP      r1,r0                 ;346
000160  dd03              BLE      |L6.362|
000162  8828              LDRH     r0,[r5,#0]            ;346  ; tloaddisable_cnt
000164  f1000001          ADD      r0,r0,#1              ;346
000168  8028              STRH     r0,[r5,#0]            ;347
                  |L6.362|
00016a  481f              LDR      r0,|L6.488|
00016c  f9b00000          LDRSH    r0,[r0,#0]            ;347  ; TLOADENABLE
000170  4281              CMP      r1,r0                 ;349
000172  da03              BGE      |L6.380|
000174  8828              LDRH     r0,[r5,#0]            ;350  ; tloaddisable_cnt
000176  f1a00001          SUB      r0,r0,#1              ;350
00017a  8028              STRH     r0,[r5,#0]            ;350
                  |L6.380|
00017c  2206              MOVS     r2,#6                 ;351
00017e  2100              MOVS     r1,#0                 ;351
000180  4818              LDR      r0,|L6.484|
000182  f7fffffe          BL       gran
000186  f9b50000          LDRSH    r0,[r5,#0]            ;353  ; tloaddisable_cnt
00018a  2805              CMP      r0,#5                 ;354
00018c  dd00              BLE      |L6.400|
00018e  703e              STRB     r6,[r7,#0]            ;354
                  |L6.400|
000190  2801              CMP      r0,#1                 ;354
000192  da00              BGE      |L6.406|
000194  703c              STRB     r4,[r7,#0]
                  |L6.406|
000196  e8bd81f0          POP      {r4-r8,pc}            ;298
                  |L6.410|
00019a  703c              STRB     r4,[r7,#0]            ;298
00019c  e7fb              B        |L6.406|
;;;359    
                          ENDP

00019e  0000              DCW      0x0000
                  |L6.416|
                          DCD      t_box
                  |L6.420|
                          DCD      TBOXMAX
                  |L6.424|
                          DCD      av_tbox_cnt
                  |L6.428|
                          DCD      av_tbox_stat
                  |L6.432|
                          DCD      TBOXREG
                  |L6.436|
                          DCD      t_box_cnt
                  |L6.440|
                          DCD      main_vent_pos
                  |L6.444|
                          DCD      TBOXVENTMAX
                  |L6.448|
                          DCD      pos_vent
                  |L6.452|
                          DCD      mess_data
                  |L6.456|
                          DCD      mixer_vent_stat
                  |L6.460|
                          DCD      TBATDISABLE
                  |L6.464|
                          DCD      tbatdisable_stat
                  |L6.468|
                          DCD      tbatdisable_cnt
                  |L6.472|
                          DCD      TBATENABLE
                  |L6.476|
                          DCD      TLOADDISABLE
                  |L6.480|
                          DCD      tloaddisable_stat
                  |L6.484|
                          DCD      tloaddisable_cnt
                  |L6.488|
                          DCD      TLOADENABLE

                          AREA ||area_number.7||, CODE, READONLY, ALIGN=2

                          EXPORTAS ||area_number.7||, ||.text||
                  u_avt_set_hndl1 PROC
;;;283    //-----------------------------------------------
;;;284    void ke_start(char in)
000000  e92d5fff          PUSH     {r0-r12,lr}
;;;285    {          
000004  484e              LDR      r0,|L7.320|
;;;286    ke_start_stat=(enum_ke_start_stat)0;		 
000006  2165              MOVS     r1,#0x65
000008  2564              MOVS     r5,#0x64
00000a  f9b00000          LDRSH    r0,[r0,#0]
;;;287    
;;;288    if(spc_stat==spcVZ)ke_start_stat=kssNOT_VZ;
00000e  4c4b              LDR      r4,|L7.316|
000010  4341              MULS     r1,r0,r1
000012  eb001040          ADD      r0,r0,r0,LSL #5
000016  fbb1f1f5          UDIV     r1,r1,r5
;;;289    #ifndef UKU_220_IPS_TERMOKOMPENSAT
;;;290    else if(BAT_IS_ON[in]!=bisON)ke_start_stat=kssNOT_BAT;
;;;291    #endif
;;;292    else if(bat[in]._av&(1<<0))ke_start_stat=kssNOT_BAT_AV;
00001a  eb000040          ADD      r0,r0,r0,LSL #1
00001e  fbb0f0f5          UDIV     r0,r0,r5
000022  f8dfb120          LDR      r11,|L7.324|
000026  b20a              SXTH     r2,r1
000028  7823              LDRB     r3,[r4,#0]  ; uavt_set_stat
00002a  b201              SXTH     r1,r0
00002c  f89b0000          LDRB     r0,[r11,#0]
000030  4e45              LDR      r6,|L7.328|
000032  4f46              LDR      r7,|L7.332|
;;;293    else if(bat[in]._temper_stat&(1<<1))ke_start_stat=kssNOT_BAT_AV_T;
;;;294    else if(bat[in]._av&(1<<1))ke_start_stat=kssNOT_BAT_AV_ASS;
;;;295    else if(bat[in]._Ib>IKB)ke_start_stat=kssNOT_BAT_ZAR;
;;;296    else if(bat[in]._Ib<-IKB)ke_start_stat=kssNOT_BAT_RAZR;
;;;297    else if((spc_stat==spcKE)&&(spc_bat==0))ke_start_stat=kssNOT_KE1;
;;;298    else if((spc_stat==spcKE)&&(spc_bat==1))ke_start_stat=kssNOT_KE2;
;;;299    else 
;;;300    	{
;;;301    
;;;302    	ke_start_stat=kssYES;
;;;303    
;;;304    	spc_stat=spcKE;
;;;305    	__ee_spc_stat=spcKE;
;;;306    	lc640_write_int(EE_SPC_STAT,__ee_spc_stat);
;;;307    	
;;;308    	spc_bat=in;
;;;309    	__ee_spc_bat=in;
;;;310    	lc640_write_int(EE_SPC_BAT,__ee_spc_bat);
;;;311    
;;;312    	bat[in]._zar_cnt_ke=0;
;;;313    	lc640_write_int(ADR_EE_BAT_ZAR_CNT_KE[in],0);
;;;314    	
;;;315    	spc_phase=0;
;;;316    	__ee_spc_phase=0;
;;;317    	lc640_write_int(EE_SPC_PHASE,__ee_spc_phase);
;;;318    
;;;319    	//ke_mem_hndl(in,lc640_read_int(ADR_EE_BAT_ZAR_CNT_KE[spc_bat]));
;;;320    
;;;321    		{					
;;;322    		signed short temp_temp;
;;;323    		signed char temp;
;;;324    		temp_temp=bat[in]._u_old[((bat_u_old_cnt+1)&0x07)]; 
;;;325    		    
;;;326    		temp=LPC_RTC->YEAR;
;;;327    		gran_char(&temp,1,99);
;;;328    		*((char*)(&(ke_date[0])))=temp;
;;;329    			
;;;330    		temp=LPC_RTC->MONTH;
;;;331    		gran_char(&temp,1,12);
;;;332    		*(((char*)(&(ke_date[0])))+1)=temp;
;;;333    		
;;;334    		temp=LPC_RTC->DOM;
;;;335    		gran_char(&temp,1,31);
;;;336    		*(((char*)(&(ke_date[0])))+2)=temp;			
;;;337    				
;;;338    		*(((char*)(&(ke_date[0])))+3)=*((char*)&temp_temp);
;;;339    		lc640_write_long(EE_SPC_KE_DATE0,ke_date[0]);
;;;340    
;;;341    		temp=LPC_RTC->HOUR;
;;;342    		gran_char(&temp,0,23);
;;;343    		*((char*)(&(ke_date[1])))=temp;
;;;344                   
;;;345    		temp=LPC_RTC->MIN;
;;;346    		gran_char(&temp,0,59);
;;;347    		*(((char*)(&(ke_date[1])))+1)=temp;
;;;348    	          
;;;349    		temp=LPC_RTC->SEC;
;;;350    		gran_char(&temp,0,59);
;;;351    		*(((char*)(&(ke_date[1])))+2)=temp;
;;;352    			
;;;353    		*(((char*)(&(ke_date[1])))+3)=*(((char*)&temp_temp)+1);
;;;354    		lc640_write_long(EE_SPC_KE_DATE1,ke_date[1]);
;;;355    		}
;;;356    
;;;357    	}
;;;358    }
000034  f8df8118          LDR      r8,|L7.336|
000038  f8df9118          LDR      r9,|L7.340|
00003c  f8dfa118          LDR      r10,|L7.344|
000040  2500              MOVS     r5,#0                 ;293
000042  2b01              CMP      r3,#1                 ;293
000044  d002              BEQ      |L7.76|
000046  2b02              CMP      r3,#2                 ;293
000048  d031              BEQ      |L7.174|
00004a  e071              B        |L7.304|
                  |L7.76|
00004c  803a              STRH     r2,[r7,#0]            ;294
00004e  f8a81000          STRH     r1,[r8,#0]            ;294
000052  2801              CMP      r0,#1                 ;294
000054  d000              BEQ      |L7.88|
000056  7035              STRB     r5,[r6,#0]
                  |L7.88|
000058  230a              MOVS     r3,#0xa               ;295
00005a  2200              MOVS     r2,#0                 ;295
00005c  21e6              MOVS     r1,#0xe6              ;295
00005e  20e1              MOVS     r0,#0xe1              ;295
000060  f7fffffe          BL       mess_send
000064  f04f0201          MOV      r2,#1                 ;295
000068  f04f0000          MOV      r0,#0                 ;295
00006c  f9b73000          LDRSH    r3,[r7,#0]
000070  f9b85000          LDRSH    r5,[r8,#0]            ;296
000074  f9ba6000          LDRSH    r6,[r10,#0]           ;296
000078  e00d              B        |L7.150|
                  |L7.122|
00007a  ebc001c0          RSB      r1,r0,r0,LSL #3
00007e  eb011100          ADD      r1,r1,r0,LSL #4       ;297
000082  eb090181          ADD      r1,r9,r1,LSL #2       ;297
000086  69c9              LDR      r1,[r1,#0x1c]         ;298
000088  4299              CMP      r1,r3                 ;298
00008a  da09              BGE      |L7.160|
00008c  42a9              CMP      r1,r5                 ;297
00008e  dd07              BLE      |L7.160|
000090  f1000001          ADD      r0,r0,#1              ;297
000094  b2c0              UXTB     r0,r0                 ;298
                  |L7.150|
000096  42b0              CMP      r0,r6                 ;298
000098  dbef              BLT      |L7.122|
                  |L7.154|
00009a  2a01              CMP      r2,#1                 ;302
00009c  d003              BEQ      |L7.166|
00009e  e047              B        |L7.304|
                  |L7.160|
0000a0  f04f0200          MOV      r2,#0                 ;305
0000a4  e7f9              B        |L7.154|
                  |L7.166|
0000a6  f04f0002          MOV      r0,#2                 ;306
0000aa  7020              STRB     r0,[r4,#0]            ;306
0000ac  e040              B        |L7.304|
                  |L7.174|
0000ae  803a              STRH     r2,[r7,#0]            ;308
0000b0  f8a81000          STRH     r1,[r8,#0]            ;309
0000b4  2802              CMP      r0,#2                 ;310
0000b6  d000              BEQ      |L7.186|
0000b8  7035              STRB     r5,[r6,#0]            ;310
                  |L7.186|
0000ba  230a              MOVS     r3,#0xa               ;310
0000bc  2200              MOVS     r2,#0                 ;310
0000be  21e6              MOVS     r1,#0xe6              ;312
0000c0  20e1              MOVS     r0,#0xe1              ;313
0000c2  f7fffffe          BL       mess_send
0000c6  f04f0201          MOV      r2,#1                 ;313
0000ca  f04f0000          MOV      r0,#0                 ;313
0000ce  f9b73000          LDRSH    r3,[r7,#0]            ;316
0000d2  f9b87000          LDRSH    r7,[r8,#0]            ;317
0000d6  f9bac000          LDRSH    r12,[r10,#0]          ;317
0000da  e00d              B        |L7.248|
                  |L7.220|
0000dc  ebc001c0          RSB      r1,r0,r0,LSL #3       ;324
0000e0  eb011100          ADD      r1,r1,r0,LSL #4       ;324
0000e4  eb090181          ADD      r1,r9,r1,LSL #2       ;324
0000e8  69c9              LDR      r1,[r1,#0x1c]         ;324
0000ea  4299              CMP      r1,r3                 ;324
0000ec  da09              BGE      |L7.258|
0000ee  42b9              CMP      r1,r7                 ;324
0000f0  dd07              BLE      |L7.258|
0000f2  f1000001          ADD      r0,r0,#1              ;326
0000f6  b2c0              UXTB     r0,r0                 ;327
                  |L7.248|
0000f8  4560              CMP      r0,r12                ;327
0000fa  dbef              BLT      |L7.220|
                  |L7.252|
0000fc  2a01              CMP      r2,#1                 ;327
0000fe  d003              BEQ      |L7.264|
000100  e016              B        |L7.304|
                  |L7.258|
000102  f04f0200          MOV      r2,#0                 ;327
000106  e7f9              B        |L7.252|
                  |L7.264|
000108  20ee              MOVS     r0,#0xee              ;328
00010a  e9cd0500          STRD     r0,r5,[sp,#0]         ;328
00010e  9502              STR      r5,[sp,#8]            ;330
000110  9503              STR      r5,[sp,#0xc]          ;330
000112  7831              LDRB     r1,[r6,#0]            ;331  ; uavt_bps_pntr
000114  4603              MOV      r3,r0                 ;331
000116  2216              MOVS     r2,#0x16              ;331
000118  4608              MOV      r0,r1                 ;331
00011a  f7fffffe          BL       mcp2515_transmit
00011e  7830              LDRB     r0,[r6,#0]            ;332  ; uavt_bps_pntr
000120  1c40              ADDS     r0,r0,#1              ;332
000122  b2c0              UXTB     r0,r0                 ;334
000124  7030              STRB     r0,[r6,#0]            ;334
000126  f9ba1000          LDRSH    r1,[r10,#0]           ;335  ; NUMIST
00012a  4288              CMP      r0,r1                 ;335
00012c  db00              BLT      |L7.304|
00012e  7025              STRB     r5,[r4,#0]            ;335
                  |L7.304|
000130  7820              LDRB     r0,[r4,#0]            ;336  ; uavt_set_stat
000132  f88b0000          STRB     r0,[r11,#0]           ;336
000136  e8bd9fff          POP      {r0-r12,pc}           ;338
;;;359    
                          ENDP

00013a  0000              DCW      0x0000
                  |L7.316|
                          DCD      uavt_set_stat
                  |L7.320|
                          DCD      U_AVT
                  |L7.324|
                          DCD      uavt_set_stat_old
                  |L7.328|
                          DCD      uavt_bps_pntr
                  |L7.332|
                          DCD      u_max_temp
                  |L7.336|
                          DCD      u_min_temp
                  |L7.340|
                          DCD      bps
                  |L7.344|
                          DCD      NUMIST

                          AREA ||area_number.8||, CODE, READONLY, ALIGN=2

                          EXPORTAS ||area_number.8||, ||.text||
                  averageChargeStartStop PROC
;;;283    //-----------------------------------------------
;;;284    void ke_start(char in)
000000  4908              LDR      r1,|L8.36|
;;;285    {          
000002  f44f70b4          MOV      r0,#0x168
;;;286    ke_start_stat=(enum_ke_start_stat)0;		 
000006  780a              LDRB     r2,[r1,#0]  ; hv_vz_stat
000008  b132              CBZ      r2,|L8.24|
00000a  f04f0200          MOV      r2,#0
;;;287    
;;;288    if(spc_stat==spcVZ)ke_start_stat=kssNOT_VZ;
00000e  700a              STRB     r2,[r1,#0]
000010  f04f0100          MOV      r1,#0
000014  f7ffbffe          B.W      lc640_write
                  |L8.24|
;;;289    #ifndef UKU_220_IPS_TERMOKOMPENSAT
;;;290    else if(BAT_IS_ON[in]!=bisON)ke_start_stat=kssNOT_BAT;
;;;291    #endif
;;;292    else if(bat[in]._av&(1<<0))ke_start_stat=kssNOT_BAT_AV;
000018  f04f0201          MOV      r2,#1
00001c  700a              STRB     r2,[r1,#0]
00001e  4611              MOV      r1,r2
000020  f7ffbffe          B.W      lc640_write
;;;293    else if(bat[in]._temper_stat&(1<<1))ke_start_stat=kssNOT_BAT_AV_T;
;;;294    else if(bat[in]._av&(1<<1))ke_start_stat=kssNOT_BAT_AV_ASS;
;;;295    else if(bat[in]._Ib>IKB)ke_start_stat=kssNOT_BAT_ZAR;
;;;296    else if(bat[in]._Ib<-IKB)ke_start_stat=kssNOT_BAT_RAZR;
;;;297    else if((spc_stat==spcKE)&&(spc_bat==0))ke_start_stat=kssNOT_KE1;
;;;298    else if((spc_stat==spcKE)&&(spc_bat==1))ke_start_stat=kssNOT_KE2;
;;;299    else 
;;;300    	{
;;;301    
;;;302    	ke_start_stat=kssYES;
;;;303    
;;;304    	spc_stat=spcKE;
;;;305    	__ee_spc_stat=spcKE;
;;;306    	lc640_write_int(EE_SPC_STAT,__ee_spc_stat);
;;;307    	
;;;308    	spc_bat=in;
;;;309    	__ee_spc_bat=in;
;;;310    	lc640_write_int(EE_SPC_BAT,__ee_spc_bat);
;;;311    
;;;312    	bat[in]._zar_cnt_ke=0;
;;;313    	lc640_write_int(ADR_EE_BAT_ZAR_CNT_KE[in],0);
;;;314    	
;;;315    	spc_phase=0;
;;;316    	__ee_spc_phase=0;
;;;317    	lc640_write_int(EE_SPC_PHASE,__ee_spc_phase);
;;;318    
;;;319    	//ke_mem_hndl(in,lc640_read_int(ADR_EE_BAT_ZAR_CNT_KE[spc_bat]));
;;;320    
;;;321    		{					
;;;322    		signed short temp_temp;
;;;323    		signed char temp;
;;;324    		temp_temp=bat[in]._u_old[((bat_u_old_cnt+1)&0x07)]; 
;;;325    		    
;;;326    		temp=LPC_RTC->YEAR;
;;;327    		gran_char(&temp,1,99);
;;;328    		*((char*)(&(ke_date[0])))=temp;
;;;329    			
;;;330    		temp=LPC_RTC->MONTH;
;;;331    		gran_char(&temp,1,12);
;;;332    		*(((char*)(&(ke_date[0])))+1)=temp;
;;;333    		
;;;334    		temp=LPC_RTC->DOM;
;;;335    		gran_char(&temp,1,31);
;;;336    		*(((char*)(&(ke_date[0])))+2)=temp;			
;;;337    				
;;;338    		*(((char*)(&(ke_date[0])))+3)=*((char*)&temp_temp);
;;;339    		lc640_write_long(EE_SPC_KE_DATE0,ke_date[0]);
;;;340    
;;;341    		temp=LPC_RTC->HOUR;
;;;342    		gran_char(&temp,0,23);
;;;343    		*((char*)(&(ke_date[1])))=temp;
;;;344                   
;;;345    		temp=LPC_RTC->MIN;
;;;346    		gran_char(&temp,0,59);
;;;347    		*(((char*)(&(ke_date[1])))+1)=temp;
;;;348    	          
;;;349    		temp=LPC_RTC->SEC;
;;;350    		gran_char(&temp,0,59);
;;;351    		*(((char*)(&(ke_date[1])))+2)=temp;
;;;352    			
;;;353    		*(((char*)(&(ke_date[1])))+3)=*(((char*)&temp_temp)+1);
;;;354    		lc640_write_long(EE_SPC_KE_DATE1,ke_date[1]);
;;;355    		}
;;;356    
;;;357    	}
;;;358    }
;;;359    
                          ENDP

                  |L8.36|
                          DCD      hv_vz_stat

                          AREA ||.bss||, DATA, NOINIT, ALIGN=2

                  adc_buff
                          %        1024
                  adc_buff_
                          %        32
                  main_power_buffer
                          %        32
                  I_from_t_table
                          %        14

                          AREA ||area_number.11||, DATA, NOINIT, ALIGN=1

                          EXPORTAS ||area_number.11||, ||.bss||
                  adc_buff_max
                          %        24

                          AREA ||area_number.12||, DATA, NOINIT, ALIGN=1

                          EXPORTAS ||area_number.12||, ||.bss||
                  net_buff
                          %        64

                          AREA ||.constdata||, DATA, READONLY, ALIGN=0

                  sk_buff_KONTUR
000000  0d0b0f0e          DCB      0x0d,0x0b,0x0f,0x0e

                          AREA ||area_number.15||, DATA, READONLY, ALIGN=0

                          EXPORTAS ||area_number.15||, ||.constdata||
                  sk_buff_RSTKM
000000  0d0b0f0e          DCB      0x0d,0x0b,0x0f,0x0e

                          AREA ||area_number.16||, DATA, READONLY, ALIGN=0

                          EXPORTAS ||area_number.16||, ||.constdata||
                  sk_buff_GLONASS
000000  0b0d0f0e          DCB      0x0b,0x0d,0x0f,0x0e

                          AREA ||area_number.17||, DATA, READONLY, ALIGN=0

                          EXPORTAS ||area_number.17||, ||.constdata||
                  sk_buff_3U
000000  0b0d0f0e          DCB      0x0b,0x0d,0x0f,0x0e

                          AREA ||area_number.18||, DATA, READONLY, ALIGN=0

                          EXPORTAS ||area_number.18||, ||.constdata||
                  sk_buff_6U
000000  0b0d0f0e          DCB      0x0b,0x0d,0x0f,0x0e

                          AREA ||area_number.19||, DATA, READONLY, ALIGN=2

                          EXPORTAS ||area_number.19||, ||.constdata||
                  sk_buff_220
000000  0b0d0f0e          DCB      0x0b,0x0d,0x0f,0x0e
                          DCD      0x00000258
                          DCD      0x00000708
                          DCD      0x00000e10
                          DCD      0x00002a30
                          DCD      0x00004650
                          DCD      0x00008ca0
                          DCD      0x00011940

                          AREA ||area_number.20||, DATA, READONLY, ALIGN=0

                          EXPORTAS ||area_number.20||, ||.constdata||
                  sk_buff_TELECORE2015
000000  0b0d0f0e          DCB      0x0b,0x0d,0x0f,0x0e

                          AREA ||.data||, DATA, ALIGN=1

                  adc_buff_min
000000  13881388          DCW      0x1388,0x1388
000004  13881388          DCW      0x1388,0x1388
000008  13881388          DCW      0x1388,0x1388
00000c  13881388          DCW      0x1388,0x1388
000010  13881388          DCW      0x1388,0x1388
                          DCDU     0x00000000

                          AREA ||area_number.22||, DATA, ALIGN=1

                          EXPORTAS ||area_number.22||, ||.data||
                  unet_buff_min
000000  1388              DCW      0x1388

                          AREA ||area_number.23||, DATA, ALIGN=0

                          EXPORTAS ||area_number.23||, ||.data||
                  adc_stat
000000  01                DCB      0x01

                          AREA ||area_number.24||, DATA, ALIGN=1

                          EXPORTAS ||area_number.24||, ||.data||
                  bat_ver_cnt
000000  0096              DCW      0x0096

                          AREA ||area_number.25||, DATA, ALIGN=2

                          EXPORTAS ||area_number.25||, ||.data||
                  vent_stat
000000  00                DCB      0x00
                  bat_hndl_zvu_init
000001  00                DCB      0x00
                  cntrlStatIsDownCnt
000002  00                DCB      0x00
                  adc_self_ch_cnt
000003  00                DCB      0x00
                  adc_ch_net
000004  00                DCB      0x00
                  adc_ch
000005  00                DCB      0x00
                  adc_ch_cnt
000006  00                DCB      0x00
                  adc_window_flag
000007  00                DCB      0x00
                  ch_cnt0
000008  00                DCB      0x00
                  b1Hz_ch
000009  00                DCB      0x00
                  i
00000a  00                DCB      0x00
                  iiii
00000b  00                DCB      0x00
                  bAVG
00000c  00                DCB      0x00
                  avg_num
00000d  00                DCB      0x00
                  kb_full_ver
00000e  00                DCB      0x00
                  kb_start_ips
00000f  00                DCB      0x00
                  num_of_wrks_bps
000010  00                DCB      0x00
                  num_necc_up
000011  00                DCB      0x00
                  num_necc_down
000012  00                DCB      0x00
                  sh_cnt0
000013  00                DCB      0x00
                  b1Hz_sh
000014  00                DCB      0x00
                  spc_stat
000015  00                DCB      0x00
                  spc_bat
000016  00                DCB      0x00
                  spc_phase
000017  00                DCB      0x00
                  bAVZ
000018  00                DCB      0x00
                  ke_start_stat
000019  00                DCB      0x00
                  numOfForvardBps
00001a  00                DCB      0x00
                  numOfForvardBps_old
00001b  00                DCB      0x00
                  numOfForvardBps_minCnt
00001c  00                DCB      0x00
                  bPARALLEL_NOT_ENOUG
00001d  00                DCB      0x00
                  bPARALLEL_ENOUG
00001e  00                DCB      0x00
                  bPARALLEL
00001f  00                DCB      0x00
                  cntrl_hndl_plazma
000020  00                DCB      0x00
                  vz1_stat
000021  00                DCB      0x00
                  vz1_stat_old
000022  00                DCB      0x00
                  volt_region
000023  00                DCB      0x00
                  vz2_stat
000024  00                DCB      0x00
                  vz2_stat_old
000025  00                DCB      0x00
                  cntrl_stat
000026  0258              DCW      0x0258
                  cntrl_stat_old
000028  0258              DCW      0x0258
                  avg_main_cnt
00002a  0014              DCW      0x0014
                  num_necc_block_cnt
00002c  0000              DCB      0x00,0x00
                  net_buff_
00002e  0000              DCB      0x00,0x00
                  adc_result
000030  0000              DCB      0x00,0x00
                  adc_gorb_cnt
000032  0000              DCB      0x00,0x00
                  adc_zero_cnt
000034  0000              DCB      0x00,0x00
                  adc_window_cnt
000036  0000              DCB      0x00,0x00
                  adc_net_buff_cnt
000038  0000              DCB      0x00,0x00
                  plazma_sk
00003a  0000              DCB      0x00,0x00
                  cntrl_stat_new
00003c  0000              DCB      0x00,0x00
                  Ibmax
00003e  0000              DCB      0x00,0x00
                  IZMAX_
000040  0000              DCB      0x00,0x00
                  Ubpsmax
000042  0000              DCB      0x00,0x00
                  samokalibr_cnt
000044  0000              DCB      0x00,0x00
                  main_kb_cnt
000046  0000              DCB      0x00,0x00
                  kb_cnt_1lev
000048  0000              DCB      0x00,0x00
                  kb_cnt_2lev
00004a  0000              DCB      0x00,0x00
                  kb_start
00004c  0000              DCB      0x00,0x00
                  ibat_ips
00004e  0000              DCB      0x00,0x00
                  ibat_ips_
000050  0000              DCB      0x00,0x00
                  bps_on_mask
000052  0000              DCB      0x00,0x00
                  bps_off_mask
000054  0000              DCB      0x00,0x00
                  vz_cnt_s
000056  0000              DCB      0x00,0x00
                  vz_cnt_s_
000058  0000              DCB      0x00,0x00
                  vz_cnt_h
00005a  0000              DCB      0x00,0x00
                  vz_cnt_h_
00005c  0000              DCB      0x00,0x00
                  cnt_end_ke
00005e  0000              DCB      0x00,0x00
                  __ee_vz_cnt
000060  0000              DCB      0x00,0x00
                  __ee_spc_stat
000062  0000              DCB      0x00,0x00
                  __ee_spc_bat
000064  0000              DCB      0x00,0x00
                  __ee_spc_phase
000066  0000              DCB      0x00,0x00
                  cntrl_stat_blok_cnt
000068  0000              DCB      0x00,0x00
                  cntrl_stat_blok_cnt_
00006a  0000              DCB      0x00,0x00
                  numOfForvardBps_hourCnt
00006c  0000              DCB      0x00,0x00
                  vz1_stat_cnt
00006e  0000              DCB      0x00,0x00
                  volt_region_cnt
000070  0000              DCB      0x00,0x00
                  vz2_stat_cnt
000072  0000              DCB      0x00,0x00
                  vz2_stat_ph2_cnt
000074  0000              DCB      0x00,0x00
                  plazma_ica1
000076  0000              DCB      0x00,0x00
                  bat_hndl_i
000078  0000              DCB      0x00,0x00
                  bat_hndl_t_razr_hour
00007a  0000              DCB      0x00,0x00
                  bat_hndl_t_razr_min
00007c  0000              DCB      0x00,0x00
                  bat_hndl_t_razr_mininhour
00007e  0000              DCB      0x00,0x00
                  ibat
                          DCD      0x00000000
                  ibat_
                          DCD      0x00000000
                  i_avg_max
                          DCD      0x00000000
                  i_avg_min
                          DCD      0x00000000
                  i_avg_summ
                          DCD      0x00000000
                  i_avg
                          DCD      0x00000000
                  avg
                          DCD      0x00000000
                  cntrl_stat_blok_cnt_plus
                          DCD      0x00000000
                  cntrl_stat_blok_cnt_minus
                          DCD      0x00000000
                  plazma_inv
                          DCD      0x00000000
                  vz1_wrk_cnt
                          DCD      0x00000000
                  vz1_up_cnt
                          DCD      0x00000000
                  vz2_wrk_cnt
                          DCD      0x00000000
                  vz2_up_cnt
                          DCD      0x00000000
                  bat_hndl_t_razr
                          DCD      0x00000000
                  bat_hndl_zvu_Q
                          DCD      0x00000000
                  bat_hndl_proc_razr
                          DCD      0x00000000
                  bat_hndl_remain_time
                          DCD      0x00000000
                  net_metr_buff_
                          DCD      0x00000000
0000cc  0000              DCB      0x00,0x00
                  adc_self_ch_buff
0000ce  0000              DCB      0x00,0x00
                          DCD      0x00000000
                  adc_self_ch_disp
                          DCD      0x00000000
0000d8  00000000          DCB      0x00,0x00,0x00,0x00
                  ke_date
                          %        8

                          AREA ||area_number.26||, DATA, ALIGN=0

                          EXPORTAS ||area_number.26||, ||.data||
                  rx_read_power_cnt_phase
000000  0f                DCB      0x0f

                          AREA ||area_number.27||, DATA, ALIGN=1

                          EXPORTAS ||area_number.27||, ||.data||
                  read_power_cnt_main_cnt
000000  0064              DCW      0x0064

                          AREA ||area_number.28||, DATA, ALIGN=0

                          EXPORTAS ||area_number.28||, ||.data||
                  rx_read_power_cnt_plazma
000000  00                DCB      0x00

                          AREA ||area_number.29||, DATA, ALIGN=0

                          EXPORTAS ||area_number.29||, ||.data||
                  rx_read_power_cnt_flag
000000  00                DCB      0x00

                          AREA ||area_number.30||, DATA, ALIGN=0

                          EXPORTAS ||area_number.30||, ||.data||
                  bENERGOMETR_UIP
000000  00                DCB      0x00

                          AREA ||area_number.31||, DATA, ALIGN=1

                          EXPORTAS ||area_number.31||, ||.data||
                  unet_buff_max
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.32||, DATA, ALIGN=0

                          EXPORTAS ||area_number.32||, ||.data||
                  adc_cnt
000000  00                DCB      0x00

                          AREA ||area_number.33||, DATA, ALIGN=0

                          EXPORTAS ||area_number.33||, ||.data||
                  adc_cnt1
000000  00                DCB      0x00

                          AREA ||area_number.34||, DATA, ALIGN=1

                          EXPORTAS ||area_number.34||, ||.data||
                  zero_cnt
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.35||, DATA, ALIGN=0

                          EXPORTAS ||area_number.35||, ||.data||
                  net_buff_cnt
000000  00                DCB      0x00

                          AREA ||area_number.36||, DATA, ALIGN=1

                          EXPORTAS ||area_number.36||, ||.data||
                  ADWR
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.37||, DATA, ALIGN=1

                          EXPORTAS ||area_number.37||, ||.data||
                  period_cnt
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.38||, DATA, ALIGN=1

                          EXPORTAS ||area_number.38||, ||.data||
                  non_zero_cnt
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.39||, DATA, ALIGN=0

                          EXPORTAS ||area_number.39||, ||.data||
                  rele_stat
000000  00                DCB      0x00

                          AREA ||area_number.40||, DATA, ALIGN=0

                          EXPORTAS ||area_number.40||, ||.data||
                  bRELE_OUT
000000  00                DCB      0x00

                          AREA ||area_number.41||, DATA, ALIGN=2

                          EXPORTAS ||area_number.41||, ||.data||
                  main_power_buffer_
                          DCD      0x00000000

                          AREA ||area_number.42||, DATA, ALIGN=1

                          EXPORTAS ||area_number.42||, ||.data||
                  main_power_buffer_cnt
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.43||, DATA, ALIGN=1

                          EXPORTAS ||area_number.43||, ||.data||
                  adc_buff_out_
                          DCDU     0x00000000
000004  0000              DCB      0x00,0x00

                          AREA ||area_number.44||, DATA, ALIGN=1

                          EXPORTAS ||area_number.44||, ||.data||
                  plazma_adc_cnt
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.45||, DATA, ALIGN=0

                          EXPORTAS ||area_number.45||, ||.data||
                  unh_cnt0
000000  00                DCB      0x00

                          AREA ||area_number.46||, DATA, ALIGN=0

                          EXPORTAS ||area_number.46||, ||.data||
                  unh_cnt1
000000  00                DCB      0x00

                          AREA ||area_number.47||, DATA, ALIGN=0

                          EXPORTAS ||area_number.47||, ||.data||
                  b1Hz_unh
000000  00                DCB      0x00

                          AREA ||area_number.48||, DATA, ALIGN=0

                          EXPORTAS ||area_number.48||, ||.data||
                  ch_cnt1
000000  00                DCB      0x00

                          AREA ||area_number.49||, DATA, ALIGN=0

                          EXPORTAS ||area_number.49||, ||.data||
                  b1_30Hz_ch
000000  00                DCB      0x00

                          AREA ||area_number.50||, DATA, ALIGN=0

                          EXPORTAS ||area_number.50||, ||.data||
                  ch_cnt2
000000  00                DCB      0x00

                          AREA ||area_number.51||, DATA, ALIGN=0

                          EXPORTAS ||area_number.51||, ||.data||
                  b1_10Hz_ch
000000  00                DCB      0x00

                          AREA ||area_number.52||, DATA, ALIGN=1

                          EXPORTAS ||area_number.52||, ||.data||
                  IZMAX_70
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.53||, DATA, ALIGN=1

                          EXPORTAS ||area_number.53||, ||.data||
                  IZMAX_130
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.54||, DATA, ALIGN=1

                          EXPORTAS ||area_number.54||, ||.data||
                  cntrl_stat_blck_cnt
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.55||, DATA, ALIGN=0

                          EXPORTAS ||area_number.55||, ||.data||
                  avg_cnt
000000  00                DCB      0x00

                          AREA ||area_number.56||, DATA, ALIGN=0

                          EXPORTAS ||area_number.56||, ||.data||
                  bps_all_off_cnt
000000  00                DCB      0x00

                          AREA ||area_number.57||, DATA, ALIGN=0

                          EXPORTAS ||area_number.57||, ||.data||
                  bps_mask_off_cnt
000000  00                DCB      0x00

                          AREA ||area_number.58||, DATA, ALIGN=0

                          EXPORTAS ||area_number.58||, ||.data||
                  bps_mask_on_off_cnt
000000  00                DCB      0x00

                          AREA ||area_number.59||, DATA, ALIGN=0

                          EXPORTAS ||area_number.59||, ||.data||
                  bps_hndl_2sec_cnt
000000  00                DCB      0x00

                          AREA ||area_number.60||, DATA, ALIGN=0

                          EXPORTAS ||area_number.60||, ||.data||
                  plazma_bat
000000  00                DCB      0x00

                          AREA ||area_number.61||, DATA, ALIGN=0

                          EXPORTAS ||area_number.61||, ||.data||
                  plazma_cntrl_stat
000000  00                DCB      0x00

                          AREA ||area_number.62||, DATA, ALIGN=1

                          EXPORTAS ||area_number.62||, ||.data||
                  ce102m_delayCnt
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.63||, DATA, ALIGN=1

                          EXPORTAS ||area_number.63||, ||.data||
                  volta_short
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.64||, DATA, ALIGN=1

                          EXPORTAS ||area_number.64||, ||.data||
                  curr_short
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.65||, DATA, ALIGN=2

                          EXPORTAS ||area_number.65||, ||.data||
                  power_int
                          DCD      0x00000000

                          AREA ||area_number.66||, DATA, ALIGN=1

                          EXPORTAS ||area_number.66||, ||.data||
                  plazma_ica2
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.67||, DATA, ALIGN=0

                          EXPORTAS ||area_number.67||, ||.data||
                  rele_hndl_plazma
000000  000000            DCB      0x00,0x00,0x00
