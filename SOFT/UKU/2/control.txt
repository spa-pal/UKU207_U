; generated by ARM C/C++ Compiler, 4.1 [Build 644]
; commandline ArmCC [--list --debug -c --asm --interleave -o.\EXE\control.o --asm_dir=.\ --list_dir=.\ --depend=.\EXE\control.d --feedback=.\EXE\UKU_220_IPS_TERMOKOMPENSAT.fed --cpu=Cortex-M3 --apcs=interwork -O1 -IC:\Keil\ARM\CMSIS\Include -IC:\Keil\ARM\INC\NXP\LPC17xx -D__MICROLIB -DUKU_220_IPS_TERMOKOMPENSAT -DUKU2071x -DAPSENERGIA --omf_browse=.\EXE\control.crf control.c]
                          THUMB

                          AREA ||.text||, CODE, READONLY, ALIGN=2

                  ke_start PROC
;;;232    //-----------------------------------------------
;;;233    void ke_start(char in)
000000  e92d41fc          PUSH     {r2-r8,lr}
;;;234    {          
000004  4606              MOV      r6,r0
;;;235    ke_start_stat=(enum_ke_start_stat)0;		 
000006  4df9              LDR      r5,|L1.1004|
000008  f04f0700          MOV      r7,#0
00000c  762f              STRB     r7,[r5,#0x18]
;;;236    
;;;237    if(spc_stat==spcVZ)ke_start_stat=kssNOT_VZ;
00000e  7d28              LDRB     r0,[r5,#0x14]  ; spc_stat
000010  f04f0301          MOV      r3,#1
000014  2802              CMP      r0,#2
000016  d00f              BEQ      |L1.56|
;;;238    #ifndef UKU_220_IPS_TERMOKOMPENSAT
;;;239    else if(BAT_IS_ON[in]!=bisON)ke_start_stat=kssNOT_BAT;
;;;240    #endif
;;;241    else if(bat[in]._av&(1<<0))ke_start_stat=kssNOT_BAT_AV;
000018  eb060146          ADD      r1,r6,r6,LSL #1
00001c  eb011206          ADD      r2,r1,r6,LSL #4
000020  49f3              LDR      r1,|L1.1008|
000022  eb010482          ADD      r4,r1,r2,LSL #2
000026  f894103d          LDRB     r1,[r4,#0x3d]
00002a  07ca              LSLS     r2,r1,#31
00002c  d006              BEQ      |L1.60|
00002e  f04f0066          MOV      r0,#0x66
000032  7628              STRB     r0,[r5,#0x18]
                  |L1.52|
;;;242    else if(bat[in]._temper_stat&(1<<1))ke_start_stat=kssNOT_BAT_AV_T;
;;;243    else if(bat[in]._av&(1<<1))ke_start_stat=kssNOT_BAT_AV_ASS;
;;;244    else if(bat[in]._Ib>IKB)ke_start_stat=kssNOT_BAT_ZAR;
;;;245    else if(bat[in]._Ib<-IKB)ke_start_stat=kssNOT_BAT_RAZR;
;;;246    else if((spc_stat==spcKE)&&(spc_bat==0))ke_start_stat=kssNOT_KE1;
;;;247    else if((spc_stat==spcKE)&&(spc_bat==1))ke_start_stat=kssNOT_KE2;
;;;248    else 
;;;249    	{
;;;250    
;;;251    	ke_start_stat=kssYES;
;;;252    
;;;253    	spc_stat=spcKE;
;;;254    	__ee_spc_stat=spcKE;
;;;255    	lc640_write_int(EE_SPC_STAT,__ee_spc_stat);
;;;256    	
;;;257    	spc_bat=in;
;;;258    	__ee_spc_bat=in;
;;;259    	lc640_write_int(EE_SPC_BAT,__ee_spc_bat);
;;;260    
;;;261    	bat[in]._zar_cnt_ke=0;
;;;262    	lc640_write_int(ADR_EE_BAT_ZAR_CNT_KE[in],0);
;;;263    	
;;;264    	spc_phase=0;
;;;265    	__ee_spc_phase=0;
;;;266    	lc640_write_int(EE_SPC_PHASE,__ee_spc_phase);
;;;267    
;;;268    	//ke_mem_hndl(in,lc640_read_int(ADR_EE_BAT_ZAR_CNT_KE[spc_bat]));
;;;269    
;;;270    		{					
;;;271    		signed short temp_temp;
;;;272    		signed char temp;
;;;273    		temp_temp=bat[in]._u_old[((bat_u_old_cnt+1)&0x07)]; 
;;;274    		    
;;;275    		temp=LPC_RTC->YEAR;
;;;276    		gran_char(&temp,1,99);
;;;277    		*((char*)(&(ke_date[0])))=temp;
;;;278    			
;;;279    		temp=LPC_RTC->MONTH;
;;;280    		gran_char(&temp,1,12);
;;;281    		*(((char*)(&(ke_date[0])))+1)=temp;
;;;282    		
;;;283    		temp=LPC_RTC->DOM;
;;;284    		gran_char(&temp,1,31);
;;;285    		*(((char*)(&(ke_date[0])))+2)=temp;			
;;;286    				
;;;287    		*(((char*)(&(ke_date[0])))+3)=*((char*)&temp_temp);
;;;288    		lc640_write_long(EE_SPC_KE_DATE0,ke_date[0]);
;;;289    
;;;290    		temp=LPC_RTC->HOUR;
;;;291    		gran_char(&temp,0,23);
;;;292    		*((char*)(&(ke_date[1])))=temp;
;;;293                   
;;;294    		temp=LPC_RTC->MIN;
;;;295    		gran_char(&temp,0,59);
;;;296    		*(((char*)(&(ke_date[1])))+1)=temp;
;;;297    	          
;;;298    		temp=LPC_RTC->SEC;
;;;299    		gran_char(&temp,0,59);
;;;300    		*(((char*)(&(ke_date[1])))+2)=temp;
;;;301    			
;;;302    		*(((char*)(&(ke_date[1])))+3)=*(((char*)&temp_temp)+1);
;;;303    		lc640_write_long(EE_SPC_KE_DATE1,ke_date[1]);
;;;304    		}
;;;305    
;;;306    	}
;;;307    }
000034  e8bd81fc          POP      {r2-r8,pc}
                  |L1.56|
000038  762b              STRB     r3,[r5,#0x18]         ;237
00003a  e7fb              B        |L1.52|
                  |L1.60|
00003c  f894203f          LDRB     r2,[r4,#0x3f]         ;242
000040  0792              LSLS     r2,r2,#30             ;242
000042  d503              BPL      |L1.76|
000044  f04f0067          MOV      r0,#0x67              ;242
000048  7628              STRB     r0,[r5,#0x18]         ;242
00004a  e7f3              B        |L1.52|
                  |L1.76|
00004c  0789              LSLS     r1,r1,#30             ;243
00004e  d503              BPL      |L1.88|
000050  f04f0068          MOV      r0,#0x68              ;243
000054  7628              STRB     r0,[r5,#0x18]         ;243
000056  e7ed              B        |L1.52|
                  |L1.88|
000058  4ae6              LDR      r2,|L1.1012|
00005a  f9b41008          LDRSH    r1,[r4,#8]            ;244
00005e  f9b22000          LDRSH    r2,[r2,#0]            ;244  ; IKB
000062  4291              CMP      r1,r2                 ;244
000064  dd03              BLE      |L1.110|
000066  f04f0069          MOV      r0,#0x69              ;244
00006a  7628              STRB     r0,[r5,#0x18]         ;244
00006c  e7e2              B        |L1.52|
                  |L1.110|
00006e  4252              RSBS     r2,r2,#0              ;245
000070  4291              CMP      r1,r2                 ;245
000072  da03              BGE      |L1.124|
000074  f04f006a          MOV      r0,#0x6a              ;245
000078  7628              STRB     r0,[r5,#0x18]         ;245
00007a  e7db              B        |L1.52|
                  |L1.124|
00007c  49db              LDR      r1,|L1.1004|
00007e  2801              CMP      r0,#1                 ;246
000080  7d49              LDRB     r1,[r1,#0x15]         ;246
000082  d100              BNE      |L1.134|
000084  b111              CBZ      r1,|L1.140|
                  |L1.134|
000086  2801              CMP      r0,#1                 ;247
000088  d004              BEQ      |L1.148|
00008a  e005              B        |L1.152|
                  |L1.140|
00008c  f04f006b          MOV      r0,#0x6b              ;246
000090  7628              STRB     r0,[r5,#0x18]         ;246
000092  e7cf              B        |L1.52|
                  |L1.148|
000094  2901              CMP      r1,#1                 ;247
000096  d07e              BEQ      |L1.406|
                  |L1.152|
000098  f04f0064          MOV      r0,#0x64              ;251
00009c  7628              STRB     r0,[r5,#0x18]         ;251
00009e  752b              STRB     r3,[r5,#0x14]         ;253
0000a0  f8a5305c          STRH     r3,[r5,#0x5c]         ;254
0000a4  4619              MOV      r1,r3                 ;255
0000a6  f44f70f8          MOV      r0,#0x1f0             ;255
0000aa  f7fffffe          BL       lc640_write_int
0000ae  756e              STRB     r6,[r5,#0x15]         ;257
0000b0  f8a5605e          STRH     r6,[r5,#0x5e]         ;258
0000b4  4631              MOV      r1,r6                 ;259
0000b6  f44f70fa          MOV      r0,#0x1f4             ;259
0000ba  f7fffffe          BL       lc640_write_int
0000be  61a7              STR      r7,[r4,#0x18]         ;261
0000c0  48cd              LDR      r0,|L1.1016|
0000c2  2100              MOVS     r1,#0                 ;262
0000c4  f9300016          LDRSH    r0,[r0,r6,LSL #1]     ;262
0000c8  f7fffffe          BL       lc640_write_int
0000cc  75af              STRB     r7,[r5,#0x16]         ;264
0000ce  f8a57060          STRH     r7,[r5,#0x60]         ;265
0000d2  4639              MOV      r1,r7                 ;266
0000d4  f44f70fb          MOV      r0,#0x1f6             ;266
0000d8  f7fffffe          BL       lc640_write_int
0000dc  48c7              LDR      r0,|L1.1020|
0000de  8800              LDRH     r0,[r0,#0]            ;273  ; bat_u_old_cnt
0000e0  f1000001          ADD      r0,r0,#1              ;273
0000e4  f0000007          AND      r0,r0,#7              ;273
0000e8  eb040040          ADD      r0,r4,r0,LSL #1       ;273
0000ec  8c00              LDRH     r0,[r0,#0x20]         ;273
0000ee  9001              STR      r0,[sp,#4]            ;273
0000f0  4dc3              LDR      r5,|L1.1024|
0000f2  8ba8              LDRH     r0,[r5,#0x1c]         ;275
0000f4  9000              STR      r0,[sp,#0]            ;275
0000f6  f04f0263          MOV      r2,#0x63              ;276
0000fa  f04f0101          MOV      r1,#1                 ;276
0000fe  4668              MOV      r0,sp                 ;276
000100  f7fffffe          BL       gran_char
000104  4cb9              LDR      r4,|L1.1004|
000106  f89d0000          LDRB     r0,[sp,#0]            ;277
00010a  34a4              ADDS     r4,r4,#0xa4           ;277
00010c  7020              STRB     r0,[r4,#0]            ;277
00010e  7e28              LDRB     r0,[r5,#0x18]         ;279
000110  9000              STR      r0,[sp,#0]            ;279
000112  220c              MOVS     r2,#0xc               ;280
000114  2101              MOVS     r1,#1                 ;280
000116  4668              MOV      r0,sp                 ;280
000118  f7fffffe          BL       gran_char
00011c  f89d0000          LDRB     r0,[sp,#0]            ;281
000120  7060              STRB     r0,[r4,#1]            ;281
000122  7b28              LDRB     r0,[r5,#0xc]          ;283
000124  9000              STR      r0,[sp,#0]            ;283
000126  221f              MOVS     r2,#0x1f              ;284
000128  2101              MOVS     r1,#1                 ;284
00012a  4668              MOV      r0,sp                 ;284
00012c  f7fffffe          BL       gran_char
000130  f89d0000          LDRB     r0,[sp,#0]            ;285
000134  70a0              STRB     r0,[r4,#2]            ;285
000136  f89d0004          LDRB     r0,[sp,#4]            ;287
00013a  70e0              STRB     r0,[r4,#3]            ;287
00013c  f44f70fc          MOV      r0,#0x1f8             ;288
000140  6821              LDR      r1,[r4,#0]            ;288  ; ke_date
000142  f7fffffe          BL       lc640_write_long
000146  7a28              LDRB     r0,[r5,#8]            ;290
000148  9000              STR      r0,[sp,#0]            ;290
00014a  2217              MOVS     r2,#0x17              ;291
00014c  2100              MOVS     r1,#0                 ;291
00014e  4668              MOV      r0,sp                 ;291
000150  f7fffffe          BL       gran_char
000154  f89d0000          LDRB     r0,[sp,#0]            ;292
000158  7120              STRB     r0,[r4,#4]            ;292
00015a  7928              LDRB     r0,[r5,#4]            ;294
00015c  9000              STR      r0,[sp,#0]            ;294
00015e  223b              MOVS     r2,#0x3b              ;295
000160  2100              MOVS     r1,#0                 ;295
000162  4668              MOV      r0,sp                 ;295
000164  f7fffffe          BL       gran_char
000168  f89d0000          LDRB     r0,[sp,#0]            ;296
00016c  7160              STRB     r0,[r4,#5]            ;296
00016e  7828              LDRB     r0,[r5,#0]            ;298
000170  9000              STR      r0,[sp,#0]            ;298
000172  223b              MOVS     r2,#0x3b              ;299
000174  2100              MOVS     r1,#0                 ;299
000176  4668              MOV      r0,sp                 ;299
000178  f7fffffe          BL       gran_char
00017c  f89d0000          LDRB     r0,[sp,#0]            ;300
000180  71a0              STRB     r0,[r4,#6]            ;300
000182  f89d0005          LDRB     r0,[sp,#5]            ;302
000186  71e0              STRB     r0,[r4,#7]            ;302
000188  f44f70fe          MOV      r0,#0x1fc             ;303
00018c  6861              LDR      r1,[r4,#4]            ;303  ; ke_date
00018e  f7fffffe          BL       lc640_write_long
000192  e74f              B        |L1.52|
000194  e7ff              B        |L1.406|
                  |L1.406|
000196  f04f006c          MOV      r0,#0x6c              ;247
00019a  7628              STRB     r0,[r5,#0x18]         ;247
00019c  e74a              B        |L1.52|
;;;308    
                          ENDP

                  ke_drv PROC
;;;309    //-----------------------------------------------
;;;310    void ke_drv(void)
00019e  e92d47f0          PUSH     {r4-r10,lr}
;;;311    {
;;;312    
;;;313    if(spc_stat==spcKE)
0001a2  4c92              LDR      r4,|L1.1004|
0001a4  7d20              LDRB     r0,[r4,#0x14]  ; spc_stat
0001a6  2801              CMP      r0,#1
0001a8  d17d              BNE      |L1.678|
0001aa  4621              MOV      r1,r4
0001ac  2601              MOVS     r6,#1
;;;314    	{
;;;315    	if(spc_phase==0)
;;;316    		{
;;;317    		mess_send(MESS2BAT_HNDL,PARAM_BAT_MASK_OFF_AFTER_2SEC,(1<<(1-spc_bat)),20);
0001ae  7d49              LDRB     r1,[r1,#0x15]
0001b0  7da0              LDRB     r0,[r4,#0x16]         ;315  ; spc_phase
0001b2  f1c10201          RSB      r2,r1,#1
0001b6  fa06f102          LSL      r1,r6,r2
;;;318    		mess_send(MESS2BPS_HNDL,PARAM_BPS_ALL_OFF_AFTER_2SEC,0xffff,20);
;;;319    
;;;320    		bat[spc_bat]._zar_cnt_ke+=abs(bat[spc_bat]._Ib);
;;;321    	    	
;;;322    		if(bat[spc_bat]._zar_cnt_ke>=AH_CONSTANT)
;;;323    			{
;;;324    			bat[spc_bat]._zar_cnt_ke-=AH_CONSTANT;
;;;325    			lc640_write_int(ADR_EE_BAT_ZAR_CNT_KE[spc_bat],lc640_read_int(ADR_EE_BAT_ZAR_CNT_KE[spc_bat])+1);
0001ba  4f8f              LDR      r7,|L1.1016|
0001bc  4d8c              LDR      r5,|L1.1008|
0001be  b20a              SXTH     r2,r1                 ;317
0001c0  b110              CBZ      r0,|L1.456|
;;;326    			}
;;;327    		}
;;;328    
;;;329    	else if(spc_phase==1)
0001c2  2801              CMP      r0,#1
0001c4  d034              BEQ      |L1.560|
0001c6  e038              B        |L1.570|
                  |L1.456|
0001c8  2314              MOVS     r3,#0x14              ;317
0001ca  21ca              MOVS     r1,#0xca              ;317
0001cc  20c8              MOVS     r0,#0xc8              ;317
0001ce  f7fffffe          BL       mess_send
0001d2  2314              MOVS     r3,#0x14              ;318
0001d4  f04f32ff          MOV      r2,#0xffffffff        ;318
0001d8  21ce              MOVS     r1,#0xce              ;318
0001da  20cd              MOVS     r0,#0xcd              ;318
0001dc  f7fffffe          BL       mess_send
0001e0  7d60              LDRB     r0,[r4,#0x15]         ;320  ; spc_bat
0001e2  eb000140          ADD      r1,r0,r0,LSL #1       ;320
0001e6  eb011000          ADD      r0,r1,r0,LSL #4       ;320
0001ea  eb050080          ADD      r0,r5,r0,LSL #2       ;320
0001ee  f9b00008          LDRSH    r0,[r0,#8]            ;320
0001f2  f7fffffe          BL       abs
0001f6  7d61              LDRB     r1,[r4,#0x15]         ;320  ; spc_bat
0001f8  eb010241          ADD      r2,r1,r1,LSL #1       ;320
0001fc  eb021201          ADD      r2,r2,r1,LSL #4       ;320
000200  eb050282          ADD      r2,r5,r2,LSL #2       ;320
000204  6993              LDR      r3,[r2,#0x18]         ;320
000206  4418              ADD      r0,r0,r3              ;320
000208  6190              STR      r0,[r2,#0x18]         ;320
00020a  f64843a0          MOV      r3,#0x8ca0            ;322
00020e  4298              CMP      r0,r3                 ;322
000210  db13              BLT      |L1.570|
000212  eba00003          SUB      r0,r0,r3              ;324
000216  6190              STR      r0,[r2,#0x18]         ;324
000218  f8370011          LDRH     r0,[r7,r1,LSL #1]     ;325
00021c  f7fffffe          BL       lc640_read_int
000220  1c40              ADDS     r0,r0,#1              ;325
000222  b201              SXTH     r1,r0                 ;325
000224  7d60              LDRB     r0,[r4,#0x15]         ;325  ; spc_bat
000226  f9370010          LDRSH    r0,[r7,r0,LSL #1]     ;325
00022a  f7fffffe          BL       lc640_write_int
00022e  e004              B        |L1.570|
                  |L1.560|
;;;330    		{
;;;331    		mess_send(MESS2BAT_HNDL,PARAM_BAT_MASK_OFF_AFTER_2SEC,(1<<(1-spc_bat)),20);
000230  2314              MOVS     r3,#0x14
000232  21ca              MOVS     r1,#0xca
000234  20c8              MOVS     r0,#0xc8
000236  f7fffffe          BL       mess_send
                  |L1.570|
;;;332    		}
;;;333    
;;;334    	if(bat[spc_bat]._Ub<(USIGN*10))
00023a  7d61              LDRB     r1,[r4,#0x15]  ; spc_bat
;;;335    		{
;;;336    		cnt_end_ke++;
;;;337    		if(cnt_end_ke>=30)
;;;338    			{
;;;339    			
;;;340    			if((spc_stat==spcKE)&&(spc_phase==0))
;;;341    				{
;;;342    				lc640_write_int(ADR_EE_BAT_C_REAL[spc_bat],lc640_read_int(ADR_EE_BAT_ZAR_CNT_KE[spc_bat]));
;;;343    				ke_mem_hndl(spc_bat,lc640_read_int(ADR_EE_BAT_ZAR_CNT_KE[spc_bat]));
;;;344    				lc640_write_int(ADR_EE_BAT_ZAR_CNT[spc_bat],0);
;;;345    				cntrl_stat=50;
;;;346    				cntrl_stat_old=50;
;;;347    				}
;;;348    
;;;349    			if((BAT_IS_ON[1-spc_bat]) == bisON)
;;;350    				{
;;;351    				spc_phase=1;
;;;352    				__ee_spc_phase=1;
;;;353    				lc640_write_int(EE_SPC_PHASE,1);
;;;354    				}			
;;;355    			else
;;;356    				{
;;;357    				spc_stat=spcOFF;
;;;358    				__ee_spc_stat=spcOFF;
;;;359    				lc640_write_int(EE_SPC_STAT,spcOFF);
00023c  f44f79f8          MOV      r9,#0x1f0
000240  eb010041          ADD      r0,r1,r1,LSL #1       ;334
000244  eb001001          ADD      r0,r0,r1,LSL #4       ;334
000248  eb050080          ADD      r0,r5,r0,LSL #2       ;334
00024c  f04f0800          MOV      r8,#0                 ;315
000250  f9b02002          LDRSH    r2,[r0,#2]            ;334
000254  486b              LDR      r0,|L1.1028|
000256  f9b00000          LDRSH    r0,[r0,#0]            ;334  ; USIGN
00025a  eb000080          ADD      r0,r0,r0,LSL #2       ;334
00025e  ebb20f40          CMP      r2,r0,LSL #1          ;334
000262  da47              BGE      |L1.756|
000264  f8b40058          LDRH     r0,[r4,#0x58]         ;336  ; cnt_end_ke
000268  f1000001          ADD      r0,r0,#1              ;336
00026c  b200              SXTH     r0,r0                 ;336
00026e  f8a40058          STRH     r0,[r4,#0x58]         ;336
000272  281e              CMP      r0,#0x1e              ;337
000274  db40              BLT      |L1.760|
000276  7d20              LDRB     r0,[r4,#0x14]         ;340  ; spc_stat
000278  2801              CMP      r0,#1                 ;340
00027a  d122              BNE      |L1.706|
00027c  7da0              LDRB     r0,[r4,#0x16]         ;340  ; spc_phase
00027e  bb00              CBNZ     r0,|L1.706|
000280  f8370011          LDRH     r0,[r7,r1,LSL #1]     ;342
000284  f7fffffe          BL       lc640_read_int
000288  b201              SXTH     r1,r0                 ;342
00028a  485f              LDR      r0,|L1.1032|
00028c  7d62              LDRB     r2,[r4,#0x15]         ;342  ; spc_bat
00028e  f9300012          LDRSH    r0,[r0,r2,LSL #1]     ;342
000292  f7fffffe          BL       lc640_write_int
000296  7d60              LDRB     r0,[r4,#0x15]         ;343  ; spc_bat
000298  f8370010          LDRH     r0,[r7,r0,LSL #1]     ;343
00029c  f7fffffe          BL       lc640_read_int
0002a0  b281              UXTH     r1,r0                 ;343
0002a2  7d60              LDRB     r0,[r4,#0x15]         ;343  ; spc_bat
0002a4  e000              B        |L1.680|
                  |L1.678|
0002a6  e049              B        |L1.828|
                  |L1.680|
0002a8  f7fffffe          BL       ke_mem_hndl
0002ac  4857              LDR      r0,|L1.1036|
0002ae  7d61              LDRB     r1,[r4,#0x15]         ;344  ; spc_bat
0002b0  f9300011          LDRSH    r0,[r0,r1,LSL #1]     ;344
0002b4  2100              MOVS     r1,#0                 ;344
0002b6  f7fffffe          BL       lc640_write_int
0002ba  f04f0032          MOV      r0,#0x32              ;345
0002be  8420              STRH     r0,[r4,#0x20]         ;345
0002c0  8460              STRH     r0,[r4,#0x22]         ;346
                  |L1.706|
0002c2  7d60              LDRB     r0,[r4,#0x15]         ;349  ; spc_bat
0002c4  4952              LDR      r1,|L1.1040|
0002c6  f1c00001          RSB      r0,r0,#1              ;349
0002ca  5c08              LDRB     r0,[r1,r0]            ;349
0002cc  2855              CMP      r0,#0x55              ;349
0002ce  d008              BEQ      |L1.738|
0002d0  f8848014          STRB     r8,[r4,#0x14]         ;357
0002d4  f8a4805c          STRH     r8,[r4,#0x5c]         ;358
0002d8  2100              MOVS     r1,#0
0002da  4648              MOV      r0,r9
0002dc  f7fffffe          BL       lc640_write_int
0002e0  e00a              B        |L1.760|
                  |L1.738|
0002e2  75a6              STRB     r6,[r4,#0x16]         ;351
0002e4  f8a46060          STRH     r6,[r4,#0x60]         ;352
0002e8  2101              MOVS     r1,#1                 ;353
0002ea  f44f70fb          MOV      r0,#0x1f6             ;353
0002ee  f7fffffe          BL       lc640_write_int
0002f2  e001              B        |L1.760|
                  |L1.756|
;;;360    				}
;;;361    			}
;;;362    		}
;;;363    	else cnt_end_ke=0;
0002f4  f8a48058          STRH     r8,[r4,#0x58]
                  |L1.760|
;;;364    
;;;365    	if((bat[spc_bat]._Ub>=bat[1-spc_bat]._Ub)&&(spc_phase==1))
0002f8  7d61              LDRB     r1,[r4,#0x15]  ; spc_bat
0002fa  eb010041          ADD      r0,r1,r1,LSL #1
0002fe  eb001001          ADD      r0,r0,r1,LSL #4
000302  eb050080          ADD      r0,r5,r0,LSL #2
000306  f9b02002          LDRSH    r2,[r0,#2]
00030a  f1c10001          RSB      r0,r1,#1
00030e  eb000140          ADD      r1,r0,r0,LSL #1
000312  eb011000          ADD      r0,r1,r0,LSL #4
000316  eb050080          ADD      r0,r5,r0,LSL #2
00031a  f9b00002          LDRSH    r0,[r0,#2]
00031e  4282              CMP      r2,r0
000320  db0c              BLT      |L1.828|
000322  7da0              LDRB     r0,[r4,#0x16]  ; spc_phase
000324  2801              CMP      r0,#1
000326  d109              BNE      |L1.828|
;;;366    		{
;;;367    		spc_stat=spcOFF;
000328  f8848014          STRB     r8,[r4,#0x14]
;;;368    		__ee_spc_stat=spcOFF;
00032c  f8a4805c          STRH     r8,[r4,#0x5c]
;;;369    		lc640_write_int(EE_SPC_STAT,spcOFF);
000330  4648              MOV      r0,r9
000332  e8bd47f0          POP      {r4-r10,lr}
000336  2100              MOVS     r1,#0
000338  f7ffbffe          B.W      lc640_write_int
                  |L1.828|
;;;370    		}
;;;371    	}
;;;372    			
;;;373    }
00033c  e8bd87f0          POP      {r4-r10,pc}
;;;374    
                          ENDP

                  vz_start PROC
;;;375    //-----------------------------------------------
;;;376    char vz_start(char hour)
000340  b570              PUSH     {r4-r6,lr}
;;;377    {          
000342  4605              MOV      r5,r0
;;;378    char out;
;;;379    out=0;
000344  f04f0600          MOV      r6,#0
;;;380    if((spc_stat==spcOFF)&&(speedChrgBlckStat!=1))
000348  4c28              LDR      r4,|L1.1004|
00034a  7d20              LDRB     r0,[r4,#0x14]  ; spc_stat
00034c  bb90              CBNZ     r0,|L1.948|
00034e  4831              LDR      r0,|L1.1044|
000350  8800              LDRH     r0,[r0,#0]  ; speedChrgBlckStat
000352  2801              CMP      r0,#1
000354  d02e              BEQ      |L1.948|
;;;381    	{
;;;382    	spc_stat=spcVZ;
000356  f04f0102          MOV      r1,#2
00035a  7521              STRB     r1,[r4,#0x14]
;;;383    	__ee_spc_stat=spcVZ; 
00035c  f8a4105c          STRH     r1,[r4,#0x5c]
;;;384    	lc640_write_int(EE_SPC_STAT,__ee_spc_stat);   
000360  f44f70f8          MOV      r0,#0x1f0
000364  f7fffffe          BL       lc640_write_int
;;;385    	vz_cnt_h=hour;
000368  f8a45054          STRH     r5,[r4,#0x54]
;;;386    	__ee_vz_cnt=hour*60;
00036c  ebc51005          RSB      r0,r5,r5,LSL #4
000370  ea4f0080          LSL      r0,r0,#2
000374  f8a4005a          STRH     r0,[r4,#0x5a]
;;;387    	if(hour==0)__ee_vz_cnt=30;
000378  b91d              CBNZ     r5,|L1.898|
00037a  f04f001e          MOV      r0,#0x1e
00037e  f8a4005a          STRH     r0,[r4,#0x5a]
                  |L1.898|
;;;388    	lc640_write_int(EE_VZ_CNT,__ee_vz_cnt);
000382  f1040450          ADD      r4,r4,#0x50
000386  f44f70f9          MOV      r0,#0x1f2
00038a  f9b4100a          LDRSH    r1,[r4,#0xa]  ; __ee_vz_cnt
00038e  f7fffffe          BL       lc640_write_int
;;;389    	lc640_write_int(EE_SPC_VZ_LENGT,__ee_vz_cnt);	
000392  f9b4100a          LDRSH    r1,[r4,#0xa]  ; __ee_vz_cnt
000396  f44f70ff          MOV      r0,#0x1fe
00039a  f7fffffe          BL       lc640_write_int
;;;390    	vz_cnt_h_=0;
00039e  f04f0000          MOV      r0,#0
0003a2  80e0              STRH     r0,[r4,#6]
;;;391    	vz_cnt_s=0;
0003a4  8020              STRH     r0,[r4,#0]
;;;392    	vz_cnt_s_=0;
0003a6  8060              STRH     r0,[r4,#2]
;;;393    	out=1;
0003a8  f04f0601          MOV      r6,#1
;;;394    	vz_mem_hndl(1);
0003ac  f04f0001          MOV      r0,#1
0003b0  f7fffffe          BL       vz_mem_hndl
                  |L1.948|
;;;395    	}
;;;396    //else if((spc_stat==spc_KE1p1)||(spc_stat==spc_KE1p2)) out=22; 
;;;397    //else if((spc_stat==spc_KE2p1)||(spc_stat==spc_KE2p2)) out=33;
;;;398    //plazma=out;	
;;;399    return out;
0003b4  4630              MOV      r0,r6
;;;400    }
0003b6  bd70              POP      {r4-r6,pc}
;;;401    
                          ENDP

                  vz_stop PROC
;;;402    //-----------------------------------------------
;;;403    void vz_stop(void)
0003b8  b510              PUSH     {r4,lr}
;;;404    {
;;;405    if(spc_stat==spcVZ)
0003ba  4c0c              LDR      r4,|L1.1004|
0003bc  7d20              LDRB     r0,[r4,#0x14]  ; spc_stat
0003be  2802              CMP      r0,#2
0003c0  d113              BNE      |L1.1002|
;;;406         {
;;;407    vz_mem_hndl(vz_cnt_h);          
0003c2  f104041e          ADD      r4,r4,#0x1e
0003c6  8ee0              LDRH     r0,[r4,#0x36]  ; vz_cnt_h
0003c8  f7fffffe          BL       vz_mem_hndl
;;;408    vz_cnt_s=0;
0003cc  f04f0000          MOV      r0,#0
0003d0  8660              STRH     r0,[r4,#0x32]
;;;409    vz_cnt_h=0;
0003d2  86e0              STRH     r0,[r4,#0x36]
;;;410    vz_cnt_h_=0;
0003d4  8720              STRH     r0,[r4,#0x38]
;;;411    spc_stat=spcOFF;
0003d6  f8040c0a          STRB     r0,[r4,#-0xa]
;;;412    
;;;413    		__ee_spc_stat=spcOFF;
0003da  87e0              STRH     r0,[r4,#0x3e]
;;;414    		lc640_write_int(EE_SPC_STAT,spcOFF);
0003dc  4601              MOV      r1,r0
0003de  e8bd4010          POP      {r4,lr}
0003e2  f44f70f8          MOV      r0,#0x1f0
0003e6  f7ffbffe          B.W      lc640_write_int
                  |L1.1002|
;;;415         }
;;;416    
;;;417    }
0003ea  bd10              POP      {r4,pc}
                  |L1.1004|
                          DCD      ||area_number.23||
                  |L1.1008|
                          DCD      bat
                  |L1.1012|
                          DCD      IKB
                  |L1.1016|
                          DCD      ADR_EE_BAT_ZAR_CNT_KE
                  |L1.1020|
                          DCD      bat_u_old_cnt
                  |L1.1024|
                          DCD      0x40024020
                  |L1.1028|
                          DCD      USIGN
                  |L1.1032|
                          DCD      ADR_EE_BAT_C_REAL
                  |L1.1036|
                          DCD      ADR_EE_BAT_ZAR_CNT
                  |L1.1040|
                          DCD      BAT_IS_ON
                  |L1.1044|
                          DCD      speedChrgBlckStat
                          ENDP

                  avz_next_date_hndl PROC
;;;419    //-----------------------------------------------
;;;420    void avz_next_date_hndl(void)
000418  b570              PUSH     {r4-r6,lr}
;;;421    {
;;;422    if((LPC_RTC->MONTH+AVZ)>12)lc640_write_int(EE_YEAR_AVZ,LPC_RTC->YEAR+1);
00041a  4cff              LDR      r4,|L1.2072|
00041c  f8940038          LDRB     r0,[r4,#0x38]
000420  4dfe              LDR      r5,|L1.2076|
000422  7829              LDRB     r1,[r5,#0]  ; AVZ
000424  4408              ADD      r0,r0,r1
000426  280c              CMP      r0,#0xc
000428  d906              BLS      |L1.1080|
00042a  8fa0              LDRH     r0,[r4,#0x3c]
00042c  1c40              ADDS     r0,r0,#1
00042e  b201              SXTH     r1,r0
000430  20b8              MOVS     r0,#0xb8
000432  f7fffffe          BL       lc640_write_int
000436  e004              B        |L1.1090|
                  |L1.1080|
;;;423    else lc640_write_int(EE_YEAR_AVZ,LPC_RTC->YEAR);
000438  f9b4103c          LDRSH    r1,[r4,#0x3c]
00043c  20b8              MOVS     r0,#0xb8
00043e  f7fffffe          BL       lc640_write_int
                  |L1.1090|
;;;424    
;;;425    //lc640_write_int(EE_YEAR_AVZ,6);
;;;426    
;;;427    if((LPC_RTC->MONTH+AVZ)>12)lc640_write_int(EE_MONTH_AVZ,(LPC_RTC->MONTH+AVZ)-12);
000442  f8941038          LDRB     r1,[r4,#0x38]
000446  7828              LDRB     r0,[r5,#0]  ; AVZ
000448  4401              ADD      r1,r1,r0
00044a  290c              CMP      r1,#0xc
00044c  d907              BLS      |L1.1118|
00044e  f8941038          LDRB     r1,[r4,#0x38]
000452  380c              SUBS     r0,r0,#0xc
000454  4401              ADD      r1,r1,r0
000456  20b6              MOVS     r0,#0xb6
000458  f7fffffe          BL       lc640_write_int
00045c  e005              B        |L1.1130|
                  |L1.1118|
;;;428    else lc640_write_int(EE_MONTH_AVZ,LPC_RTC->MONTH+AVZ);                                                 
00045e  f8941038          LDRB     r1,[r4,#0x38]
000462  4401              ADD      r1,r1,r0
000464  20b6              MOVS     r0,#0xb6
000466  f7fffffe          BL       lc640_write_int
                  |L1.1130|
;;;429    
;;;430    //lc640_write_int(EE_MONTH_AVZ,5);
;;;431    
;;;432    if(LPC_RTC->DOM>28) lc640_write_int(EE_DATE_AVZ,28);
00046a  f894002c          LDRB     r0,[r4,#0x2c]
00046e  281c              CMP      r0,#0x1c
000470  d904              BLS      |L1.1148|
000472  211c              MOVS     r1,#0x1c
000474  20b4              MOVS     r0,#0xb4
000476  f7fffffe          BL       lc640_write_int
00047a  e004              B        |L1.1158|
                  |L1.1148|
;;;433    else lc640_write_int(EE_DATE_AVZ,LPC_RTC->DOM);
00047c  f894102c          LDRB     r1,[r4,#0x2c]
000480  20b4              MOVS     r0,#0xb4
000482  f7fffffe          BL       lc640_write_int
                  |L1.1158|
;;;434    
;;;435    //lc640_write_int(EE_DATE_AVZ,4);
;;;436    
;;;437    lc640_write_int(EE_HOUR_AVZ,LPC_RTC->HOUR);
000486  f1040420          ADD      r4,r4,#0x20
00048a  7a21              LDRB     r1,[r4,#8]
00048c  f04f00ae          MOV      r0,#0xae
000490  f7fffffe          BL       lc640_write_int
;;;438    lc640_write_int(EE_MIN_AVZ,LPC_RTC->MIN);
000494  7921              LDRB     r1,[r4,#4]
000496  20b0              MOVS     r0,#0xb0
000498  f7fffffe          BL       lc640_write_int
;;;439    lc640_write_int(EE_SEC_AVZ,LPC_RTC->SEC);
00049c  7821              LDRB     r1,[r4,#0]
00049e  e8bd4070          POP      {r4-r6,lr}
0004a2  20b2              MOVS     r0,#0xb2
0004a4  f7ffbffe          B.W      lc640_write_int
;;;440    
;;;441    }
;;;442    
                          ENDP

                  avz_drv PROC
;;;443    //-----------------------------------------------
;;;444    void avz_drv(void)                               
0004a8  b510              PUSH     {r4,lr}
;;;445    {                
;;;446    if(AVZ!=AVZ_OFF)
0004aa  48dc              LDR      r0,|L1.2076|
;;;447    	{
;;;448    	if((LPC_RTC->YEAR==YEAR_AVZ)&&(LPC_RTC->MONTH==MONTH_AVZ)&&(LPC_RTC->DOM==DATE_AVZ)&&(LPC_RTC->HOUR==HOUR_AVZ)&&(LPC_RTC->MIN==MIN_AVZ)&&(LPC_RTC->SEC==SEC_AVZ))
;;;449    		{
;;;450    		bAVZ=1;
0004ac  4cdc              LDR      r4,|L1.2080|
0004ae  7800              LDRB     r0,[r0,#0]            ;446  ; AVZ
0004b0  b330              CBZ      r0,|L1.1280|
0004b2  48d9              LDR      r0,|L1.2072|
0004b4  8f82              LDRH     r2,[r0,#0x3c]         ;448
0004b6  49db              LDR      r1,|L1.2084|
0004b8  8809              LDRH     r1,[r1,#0]            ;448  ; YEAR_AVZ
0004ba  428a              CMP      r2,r1                 ;448
0004bc  d120              BNE      |L1.1280|
0004be  f8902038          LDRB     r2,[r0,#0x38]         ;448
0004c2  49d9              LDR      r1,|L1.2088|
0004c4  8809              LDRH     r1,[r1,#0]            ;448  ; MONTH_AVZ
0004c6  428a              CMP      r2,r1                 ;448
0004c8  d11a              BNE      |L1.1280|
0004ca  f890102c          LDRB     r1,[r0,#0x2c]         ;448
0004ce  4ad7              LDR      r2,|L1.2092|
0004d0  8812              LDRH     r2,[r2,#0]            ;448  ; DATE_AVZ
0004d2  4291              CMP      r1,r2                 ;448
0004d4  d114              BNE      |L1.1280|
0004d6  f8901028          LDRB     r1,[r0,#0x28]         ;448
0004da  4ad5              LDR      r2,|L1.2096|
0004dc  8812              LDRH     r2,[r2,#0]            ;448  ; HOUR_AVZ
0004de  4291              CMP      r1,r2                 ;448
0004e0  d10e              BNE      |L1.1280|
0004e2  f8901024          LDRB     r1,[r0,#0x24]         ;448
0004e6  4ad3              LDR      r2,|L1.2100|
0004e8  8812              LDRH     r2,[r2,#0]            ;448  ; MIN_AVZ
0004ea  4291              CMP      r1,r2                 ;448
0004ec  d108              BNE      |L1.1280|
0004ee  f8900020          LDRB     r0,[r0,#0x20]         ;448
0004f2  49d1              LDR      r1,|L1.2104|
0004f4  8809              LDRH     r1,[r1,#0]            ;448  ; SEC_AVZ
0004f6  4288              CMP      r0,r1                 ;448
0004f8  d102              BNE      |L1.1280|
0004fa  f04f0001          MOV      r0,#1
0004fe  75e0              STRB     r0,[r4,#0x17]
                  |L1.1280|
;;;451    		}
;;;452    	}
;;;453    if(bAVZ)
000500  7de0              LDRB     r0,[r4,#0x17]  ; bAVZ
000502  2800              CMP      r0,#0
000504  d00c              BEQ      |L1.1312|
;;;454    	{
;;;455    	if(vz_start(AVZ_TIME))
000506  48cd              LDR      r0,|L1.2108|
000508  8800              LDRH     r0,[r0,#0]  ; AVZ_TIME
00050a  b2c0              UXTB     r0,r0
00050c  f7fffffe          BL       vz_start
000510  2800              CMP      r0,#0
000512  d005              BEQ      |L1.1312|
;;;456    		{
;;;457    		bAVZ=0;
000514  f04f0000          MOV      r0,#0
000518  75e0              STRB     r0,[r4,#0x17]
;;;458    		avz_next_date_hndl();
00051a  e8bd4010          POP      {r4,lr}
00051e  e7fe              B        avz_next_date_hndl
                  |L1.1312|
;;;459    		}
;;;460    	}	
;;;461    
;;;462    }
000520  e763              B        |L1.1002|
;;;463    
                          ENDP

                  vz_drv PROC
;;;464    //-----------------------------------------------
;;;465    void vz_drv(void)
000522  b538              PUSH     {r3-r5,lr}
;;;466    { 
;;;467    if(spc_stat==spcVZ)
000524  4cbe              LDR      r4,|L1.2080|
000526  7d20              LDRB     r0,[r4,#0x14]  ; spc_stat
000528  2802              CMP      r0,#2
00052a  d116              BNE      |L1.1370|
;;;468    	{
;;;469    	if(sk_stat[0]==1)
00052c  48c4              LDR      r0,|L1.2112|
00052e  7800              LDRB     r0,[r0,#0]  ; sk_stat
000530  2801              CMP      r0,#1
000532  d013              BEQ      |L1.1372|
;;;470    		{
;;;471    
;;;472    	if(vz_cnt_s_<3600)
;;;473    		{
;;;474    		vz_cnt_s_++;
;;;475    		if(vz_cnt_s_>=3600)
;;;476    			{
;;;477    			vz_cnt_s_=0;
;;;478    			if(vz_cnt_h)
;;;479    				{
;;;480    				vz_cnt_h--;
;;;481    				vz_cnt_h_++;
;;;482    				}
;;;483    			}
;;;484    		}
;;;485    
;;;486    
;;;487    	if(vz_cnt_s<60)
;;;488    		{
;;;489    		vz_cnt_s++;
;;;490    		if(vz_cnt_s>=60)
;;;491    			{
;;;492    			vz_cnt_s=0;
;;;493    			
;;;494    			__ee_vz_cnt--;
;;;495    			lc640_write_int(EE_VZ_CNT,__ee_vz_cnt);
;;;496    			if((!__ee_vz_cnt)||(speedChrgBlckStat==1))
;;;497    				{
;;;498    				spc_stat=spcOFF;
;;;499    						__ee_spc_stat=spcOFF;
;;;500    		lc640_write_int(EE_SPC_STAT,spcOFF);
;;;501    
;;;502    				hv_vz_stat=hvsOFF;
;;;503    		lc640_write(EE_HV_VZ_STAT,hvsOFF);
;;;504    				vz_mem_hndl(0);
;;;505    				}
;;;506    			}
;;;507    		}
;;;508    
;;;509    		}
;;;510    	else 
;;;511    		{
;;;512    		if(((LPC_RTC->SEC)%10)==0)
000534  48c3              LDR      r0,|L1.2116|
000536  7800              LDRB     r0,[r0,#0]
000538  f04f010a          MOV      r1,#0xa
00053c  fbb0f2f1          UDIV     r2,r0,r1
000540  fb010012          MLS      r0,r1,r2,r0
000544  2800              CMP      r0,#0
000546  d108              BNE      |L1.1370|
;;;513    			{
;;;514    			show_mess(	"ÂÛÐÀÂÍÈÂÀÞÙÈÉ ÇÀÐßÄ ",
000548  f2413088          MOV      r0,#0x1388
00054c  9000              STR      r0,[sp,#0]
00054e  a3be              ADR      r3,|L1.2120|
000550  a2c3              ADR      r2,|L1.2144|
000552  a1c9              ADR      r1,|L1.2168|
000554  a0ce              ADR      r0,|L1.2192|
000556  f7fffffe          BL       show_mess
                  |L1.1370|
;;;515    						"    ÇÀÁËÎÊÈÐÎÂÀÍ    ",
;;;516    						"     ÍÅÈÑÏÐÀÂÍÀ     ",
;;;517    						"    ÂÅÍÒÈËßÖÈß!!!   ",
;;;518    						5000);			
;;;519    			}
;;;520    		}
;;;521    /*	if(vz_cnt_s_>=3)
;;;522    		{
;;;523    		if(sk_stat[0]==0)
;;;524    		} */
;;;525    
;;;526    	}
;;;527    
;;;528    
;;;529    } 
00055a  bd38              POP      {r3-r5,pc}
                  |L1.1372|
00055c  f8b40052          LDRH     r0,[r4,#0x52]         ;472  ; vz_cnt_s_
000560  f44f6161          MOV      r1,#0xe10             ;472
000564  2500              MOVS     r5,#0                 ;477
000566  4288              CMP      r0,r1                 ;472
000568  d215              BCS      |L1.1430|
00056a  f1000001          ADD      r0,r0,#1              ;474
00056e  b280              UXTH     r0,r0                 ;474
000570  f8a40052          STRH     r0,[r4,#0x52]         ;474
000574  4288              CMP      r0,r1                 ;475
000576  d30e              BCC      |L1.1430|
000578  f8a45052          STRH     r5,[r4,#0x52]         ;477
00057c  f8b40054          LDRH     r0,[r4,#0x54]         ;478  ; vz_cnt_h
000580  b148              CBZ      r0,|L1.1430|
000582  f1a00001          SUB      r0,r0,#1              ;480
000586  f8240f54          STRH     r0,[r4,#0x54]!        ;480
00058a  8860              LDRH     r0,[r4,#2]            ;481  ; vz_cnt_h_
00058c  f1000001          ADD      r0,r0,#1              ;481
000590  8060              STRH     r0,[r4,#2]            ;481
000592  f1a40454          SUB      r4,r4,#0x54           ;481
                  |L1.1430|
000596  f8b40050          LDRH     r0,[r4,#0x50]         ;487  ; vz_cnt_s
00059a  283c              CMP      r0,#0x3c              ;487
00059c  d2dd              BCS      |L1.1370|
00059e  f1000001          ADD      r0,r0,#1              ;489
0005a2  b280              UXTH     r0,r0                 ;489
0005a4  f8a40050          STRH     r0,[r4,#0x50]         ;489
0005a8  283c              CMP      r0,#0x3c              ;490
0005aa  d3d6              BCC      |L1.1370|
0005ac  f8245f50          STRH     r5,[r4,#0x50]!        ;492
0005b0  8960              LDRH     r0,[r4,#0xa]          ;494  ; __ee_vz_cnt
0005b2  f1a00001          SUB      r0,r0,#1              ;494
0005b6  b201              SXTH     r1,r0                 ;494
0005b8  8161              STRH     r1,[r4,#0xa]          ;494
0005ba  f44f70f9          MOV      r0,#0x1f2             ;495
0005be  f7fffffe          BL       lc640_write_int
0005c2  8960              LDRH     r0,[r4,#0xa]          ;496  ; __ee_vz_cnt
0005c4  f1a40450          SUB      r4,r4,#0x50           ;496
0005c8  b118              CBZ      r0,|L1.1490|
0005ca  48b7              LDR      r0,|L1.2216|
0005cc  8800              LDRH     r0,[r0,#0]            ;496  ; speedChrgBlckStat
0005ce  2801              CMP      r0,#1                 ;496
0005d0  d1c3              BNE      |L1.1370|
                  |L1.1490|
0005d2  7525              STRB     r5,[r4,#0x14]         ;498
0005d4  f8a4505c          STRH     r5,[r4,#0x5c]         ;499
0005d8  2100              MOVS     r1,#0                 ;500
0005da  f44f70f8          MOV      r0,#0x1f0             ;500
0005de  f7fffffe          BL       lc640_write_int
0005e2  48b2              LDR      r0,|L1.2220|
0005e4  7005              STRB     r5,[r0,#0]            ;502
0005e6  2100              MOVS     r1,#0                 ;503
0005e8  f44f70b4          MOV      r0,#0x168             ;503
0005ec  f7fffffe          BL       lc640_write
0005f0  e8bd4038          POP      {r3-r5,lr}            ;504
0005f4  2000              MOVS     r0,#0                 ;504
0005f6  f7ffbffe          B.W      vz_mem_hndl
;;;530    
                          ENDP

                  kb_init PROC
;;;534    //-----------------------------------------------
;;;535    void kb_init(void)
0005fa  48ad              LDR      r0,|L1.2224|
;;;536    {
;;;537    main_kb_cnt=(TBAT*60)-60/*120*/;
0005fc  f06f013b          MVN      r1,#0x3b
000600  8800              LDRH     r0,[r0,#0]  ; TBAT
000602  ebc01000          RSB      r0,r0,r0,LSL #4
000606  eb010080          ADD      r0,r1,r0,LSL #2
00060a  4985              LDR      r1,|L1.2080|
00060c  f8a10040          STRH     r0,[r1,#0x40]
;;;538    }
000610  4770              BX       lr
;;;539    
                          ENDP

                  kb_hndl PROC
;;;540    //-----------------------------------------------
;;;541    void kb_hndl(void)
000612  e92d5ff0          PUSH     {r4-r12,lr}
;;;542    {
;;;543    
;;;544    static signed short ibat[2],ibat_[2];
;;;545    #ifdef UKU_TELECORE2015
;;;546    if(((++main_kb_cnt>=TBAT*60)&&(TBAT))&&(BAT_TYPE==0))
;;;547    #else 
;;;548    if(((++main_kb_cnt>=TBAT*60)&&(TBAT)))
000616  f8df8208          LDR      r8,|L1.2080|
;;;549    #endif
;;;550    	{
;;;551    	main_kb_cnt=0;
;;;552    	
;;;553    	kb_start[0]=0;
;;;554    	kb_start[1]=0;
;;;555    	kb_start_ips=0;
;;;556    
;;;557    	if( (BAT_IS_ON[0]==bisON) && (bat[0]._Ub>80) && ( (abs(bat[0]._Ib)<IKB) || (bat[0]._av&1) ) ) kb_start[0]=1;
;;;558    	if( (BAT_IS_ON[1]==bisON) && (bat[1]._Ub>80) && ( (abs(bat[1]._Ib)<IKB) || (bat[1]._av&1) ) ) kb_start[1]=1;
;;;559    #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;560    	if( (!ips_bat_av_vzvod)                      && ((abs(Ib_ips_termokompensat)<IKB) || (bat_ips._av&1) ) ) kb_start_ips=1;
00061a  f8dfa298          LDR      r10,|L1.2228|
00061e  2500              MOVS     r5,#0                 ;548
000620  f8b80040          LDRH     r0,[r8,#0x40]         ;548  ; main_kb_cnt
000624  4ea4              LDR      r6,|L1.2232|
000626  1c40              ADDS     r0,r0,#1              ;548
000628  b201              SXTH     r1,r0                 ;548
00062a  48a1              LDR      r0,|L1.2224|
00062c  f8a81040          STRH     r1,[r8,#0x40]         ;548
000630  f8df9288          LDR      r9,|L1.2236|
000634  f9b00000          LDRSH    r0,[r0,#0]            ;548  ; TBAT
;;;561    #endif	
;;;562    	if( (net_av) || (num_of_wrks_bps==0) || ( (spc_stat!=spcOFF) && (spc_stat!=spcVZ) ) ) 
;;;563    		{
;;;564    		kb_start[0]=0;
;;;565    		kb_start[1]=0;
;;;566    		kb_start_ips=0;
;;;567    		}
;;;568    
;;;569    	if((kb_start[0]==1)||(kb_start[1]==1)||(kb_start_ips==1))
;;;570    		{
;;;571    		kb_cnt_1lev=10;
000638  270a              MOVS     r7,#0xa
00063a  ebc01200          RSB      r2,r0,r0,LSL #4       ;548
00063e  f04f0b01          MOV      r11,#1                ;557
000642  f1080446          ADD      r4,r8,#0x46           ;553
000646  ebb10f82          CMP      r1,r2,LSL #2          ;548
00064a  db61              BLT      |L1.1808|
00064c  b3f0              CBZ      r0,|L1.1740|
00064e  f8a85040          STRH     r5,[r8,#0x40]         ;551
000652  7025              STRB     r5,[r4,#0]            ;553
000654  7065              STRB     r5,[r4,#1]            ;554
000656  f888500e          STRB     r5,[r8,#0xe]          ;555
00065a  4899              LDR      r0,|L1.2240|
00065c  7800              LDRB     r0,[r0,#0]            ;557  ; BAT_IS_ON
00065e  2855              CMP      r0,#0x55              ;557
000660  d111              BNE      |L1.1670|
000662  f9b60002          LDRSH    r0,[r6,#2]            ;557  ; bat
000666  2850              CMP      r0,#0x50              ;557
000668  dd0d              BLE      |L1.1670|
00066a  f9b60008          LDRSH    r0,[r6,#8]            ;557  ; bat
00066e  f7fffffe          BL       abs
000672  f9b91000          LDRSH    r1,[r9,#0]            ;557  ; IKB
000676  4288              CMP      r0,r1                 ;557
000678  db03              BLT      |L1.1666|
00067a  f896003d          LDRB     r0,[r6,#0x3d]         ;557  ; bat
00067e  07c0              LSLS     r0,r0,#31             ;557
000680  d001              BEQ      |L1.1670|
                  |L1.1666|
000682  f884b000          STRB     r11,[r4,#0]           ;557
                  |L1.1670|
000686  488e              LDR      r0,|L1.2240|
000688  7840              LDRB     r0,[r0,#1]            ;558  ; BAT_IS_ON
00068a  2855              CMP      r0,#0x55              ;558
00068c  d111              BNE      |L1.1714|
00068e  f9b6004e          LDRSH    r0,[r6,#0x4e]         ;558  ; bat
000692  2850              CMP      r0,#0x50              ;558
000694  dd0d              BLE      |L1.1714|
000696  f9b60054          LDRSH    r0,[r6,#0x54]         ;558  ; bat
00069a  f7fffffe          BL       abs
00069e  f9b91000          LDRSH    r1,[r9,#0]            ;558  ; IKB
0006a2  4288              CMP      r0,r1                 ;558
0006a4  db03              BLT      |L1.1710|
0006a6  f8960089          LDRB     r0,[r6,#0x89]         ;558  ; bat
0006aa  07c0              LSLS     r0,r0,#31             ;558
0006ac  d001              BEQ      |L1.1714|
                  |L1.1710|
0006ae  f884b001          STRB     r11,[r4,#1]           ;558
                  |L1.1714|
0006b2  4884              LDR      r0,|L1.2244|
0006b4  7800              LDRB     r0,[r0,#0]            ;560  ; ips_bat_av_vzvod
0006b6  b980              CBNZ     r0,|L1.1754|
0006b8  f9ba0000          LDRSH    r0,[r10,#0]           ;560  ; Ib_ips_termokompensat
0006bc  f7fffffe          BL       abs
0006c0  f9b91000          LDRSH    r1,[r9,#0]            ;560  ; IKB
0006c4  4288              CMP      r0,r1                 ;560
0006c6  db06              BLT      |L1.1750|
0006c8  487f              LDR      r0,|L1.2248|
0006ca  e000              B        |L1.1742|
                  |L1.1740|
0006cc  e020              B        |L1.1808|
                  |L1.1742|
0006ce  f890003d          LDRB     r0,[r0,#0x3d]         ;560  ; bat_ips
0006d2  07c0              LSLS     r0,r0,#31             ;560
0006d4  d001              BEQ      |L1.1754|
                  |L1.1750|
0006d6  f888b00e          STRB     r11,[r8,#0xe]         ;560
                  |L1.1754|
0006da  487c              LDR      r0,|L1.2252|
0006dc  7800              LDRB     r0,[r0,#0]            ;562  ; net_av
0006de  b938              CBNZ     r0,|L1.1776|
0006e0  f898000f          LDRB     r0,[r8,#0xf]          ;562  ; num_of_wrks_bps
0006e4  b120              CBZ      r0,|L1.1776|
0006e6  f8980014          LDRB     r0,[r8,#0x14]         ;562  ; spc_stat
0006ea  b128              CBZ      r0,|L1.1784|
0006ec  2802              CMP      r0,#2                 ;562
0006ee  d003              BEQ      |L1.1784|
                  |L1.1776|
0006f0  7025              STRB     r5,[r4,#0]            ;564
0006f2  7065              STRB     r5,[r4,#1]            ;565
0006f4  f888500e          STRB     r5,[r8,#0xe]          ;566
                  |L1.1784|
0006f8  7820              LDRB     r0,[r4,#0]            ;569  ; kb_start
0006fa  2801              CMP      r0,#1                 ;569
0006fc  d020              BEQ      |L1.1856|
0006fe  7860              LDRB     r0,[r4,#1]            ;569  ; kb_start
000700  2801              CMP      r0,#1                 ;569
000702  d01d              BEQ      |L1.1856|
000704  f898000e          LDRB     r0,[r8,#0xe]          ;569  ; kb_start_ips
000708  2801              CMP      r0,#1                 ;569
00070a  d019              BEQ      |L1.1856|
;;;572    		}
;;;573    	else kb_cnt_1lev=0;
00070c  f8a85042          STRH     r5,[r8,#0x42]
                  |L1.1808|
;;;574    	}
;;;575    
;;;576    if(kb_cnt_1lev)
000710  4641              MOV      r1,r8
000712  f9b80042          LDRSH    r0,[r8,#0x42]  ; kb_cnt_1lev
;;;577    	{
;;;578    	kb_cnt_1lev--;
;;;579    
;;;580    	if(kb_cnt_1lev>5)mess_send(MESS2CNTRL_HNDL,PARAM_CNTRL_STAT_PLUS,30,15);
;;;581    	else if(kb_cnt_1lev>0) mess_send(MESS2CNTRL_HNDL,PARAM_CNTRL_STAT_MINUS,30,15);
;;;582    
;;;583    
;;;584    	if(kb_cnt_1lev==5)
;;;585    		{
;;;586    		ibat[0]=abs(bat[0]._Ib);
000716  f8df8108          LDR      r8,|L1.2080|
00071a  2800              CMP      r0,#0                 ;576
00071c  f1080868          ADD      r8,r8,#0x68
000720  d077              BEQ      |L1.2066|
000722  f1a00001          SUB      r0,r0,#1              ;578
000726  b200              SXTH     r0,r0                 ;578
000728  468b              MOV      r11,r1                ;578
00072a  f8a10042          STRH     r0,[r1,#0x42]         ;578
00072e  2805              CMP      r0,#5                 ;580
000730  dd09              BLE      |L1.1862|
000732  230f              MOVS     r3,#0xf               ;580
000734  221e              MOVS     r2,#0x1e              ;580
000736  2164              MOVS     r1,#0x64              ;580
000738  20e1              MOVS     r0,#0xe1              ;580
00073a  f7fffffe          BL       mess_send
00073e  e00a              B        |L1.1878|
                  |L1.1856|
000740  f8a87042          STRH     r7,[r8,#0x42]         ;571
000744  e7e4              B        |L1.1808|
                  |L1.1862|
000746  2800              CMP      r0,#0                 ;581
000748  dd05              BLE      |L1.1878|
00074a  230f              MOVS     r3,#0xf               ;581
00074c  221e              MOVS     r2,#0x1e              ;581
00074e  2169              MOVS     r1,#0x69              ;581
000750  20e1              MOVS     r0,#0xe1              ;581
000752  f7fffffe          BL       mess_send
                  |L1.1878|
000756  f8bb0042          LDRH     r0,[r11,#0x42]        ;584  ; kb_cnt_1lev
00075a  2805              CMP      r0,#5                 ;584
00075c  d111              BNE      |L1.1922|
00075e  f9b60008          LDRSH    r0,[r6,#8]  ; bat
000762  f7fffffe          BL       abs
000766  f8a80000          STRH     r0,[r8,#0]
;;;587    		ibat[1]=abs(bat[1]._Ib);
00076a  f9b60054          LDRSH    r0,[r6,#0x54]  ; bat
00076e  f7fffffe          BL       abs
000772  f8a80002          STRH     r0,[r8,#2]
;;;588    		ibat_ips=abs(Ib_ips_termokompensat);
000776  f9ba0000          LDRSH    r0,[r10,#0]  ; Ib_ips_termokompensat
00077a  f7fffffe          BL       abs
00077e  f8ab0048          STRH     r0,[r11,#0x48]
                  |L1.1922|
;;;589    		}
;;;590    	
;;;591    	if(kb_cnt_1lev==0)
000782  4827              LDR      r0,|L1.2080|
000784  f8b00042          LDRH     r0,[r0,#0x42]  ; kb_cnt_1lev
000788  2800              CMP      r0,#0
00078a  d143              BNE      |L1.2068|
;;;592    		{
;;;593    		ibat_[0]=abs(bat[0]._Ib);
00078c  f9b60008          LDRSH    r0,[r6,#8]  ; bat
000790  f7fffffe          BL       abs
000794  f8dfb088          LDR      r11,|L1.2080|
000798  f10b0b6c          ADD      r11,r11,#0x6c
00079c  f8ab0000          STRH     r0,[r11,#0]
;;;594    		ibat_[1]=abs(bat[1]._Ib);
0007a0  f9b60054          LDRSH    r0,[r6,#0x54]  ; bat
0007a4  f7fffffe          BL       abs
0007a8  f8ab0002          STRH     r0,[r11,#2]
;;;595    		ibat_ips_=abs(Ib_ips_termokompensat);
0007ac  f9ba0000          LDRSH    r0,[r10,#0]  ; Ib_ips_termokompensat
0007b0  f7fffffe          BL       abs
0007b4  f8dfa068          LDR      r10,|L1.2080|
0007b8  f8aa004a          STRH     r0,[r10,#0x4a]
;;;596    
;;;597    		kb_cnt_2lev=0;
0007bc  f8aa5044          STRH     r5,[r10,#0x44]
;;;598    
;;;599    
;;;600    		if(( (ibat[0]+ibat_[0]) < IKB )&& (kb_start[0]==1))
0007c0  f9b80000          LDRSH    r0,[r8,#0]  ; ibat
0007c4  f9bb1000          LDRSH    r1,[r11,#0]  ; ibat_
0007c8  4408              ADD      r0,r0,r1
0007ca  f9b91000          LDRSH    r1,[r9,#0]  ; IKB
0007ce  4288              CMP      r0,r1
0007d0  da02              BGE      |L1.2008|
0007d2  7820              LDRB     r0,[r4,#0]  ; kb_start
0007d4  2801              CMP      r0,#1
0007d6  d01e              BEQ      |L1.2070|
                  |L1.2008|
;;;601    			{
;;;602    			kb_cnt_2lev=10;  
;;;603    			}
;;;604    		else if(bat[0]._Ub>200)
0007d8  f9b60002          LDRSH    r0,[r6,#2]  ; bat
0007dc  28c8              CMP      r0,#0xc8
0007de  dd04              BLE      |L1.2026|
;;;605    			{
;;;606    			kb_start[0]=0;
0007e0  7025              STRB     r5,[r4,#0]
;;;607    			avar_bat_hndl(0,0);
0007e2  2100              MOVS     r1,#0
0007e4  4608              MOV      r0,r1
0007e6  f7fffffe          BL       avar_bat_hndl
                  |L1.2026|
;;;608    			}
;;;609    		
;;;610    		if(( (ibat[1]+ibat_[1]) < IKB ) && (kb_start[1]==1))
0007ea  f9b80002          LDRSH    r0,[r8,#2]  ; ibat
0007ee  f9bb1002          LDRSH    r1,[r11,#2]  ; ibat_
0007f2  4408              ADD      r0,r0,r1
0007f4  f9b91000          LDRSH    r1,[r9,#0]  ; IKB
0007f8  4288              CMP      r0,r1
0007fa  da02              BGE      |L1.2050|
0007fc  7860              LDRB     r0,[r4,#1]  ; kb_start
0007fe  2801              CMP      r0,#1
000800  d066              BEQ      |L1.2256|
                  |L1.2050|
;;;611    			{
;;;612    			kb_cnt_2lev=10;     
;;;613    			}
;;;614    		else  if(bat[1]._Ub>200)
000802  f9b6004e          LDRSH    r0,[r6,#0x4e]  ; bat
000806  28c8              CMP      r0,#0xc8
000808  dd65              BLE      |L1.2262|
;;;615    			{
;;;616    			kb_start[1]=0;
00080a  7065              STRB     r5,[r4,#1]
;;;617    			avar_bat_hndl(1,0);
00080c  2100              MOVS     r1,#0
00080e  2001              MOVS     r0,#1
000810  e05f              B        |L1.2258|
                  |L1.2066|
000812  e081              B        |L1.2328|
                  |L1.2068|
000814  e072              B        |L1.2300|
                  |L1.2070|
000816  e073              B        |L1.2304|
                  |L1.2072|
                          DCD      0x40024000
                  |L1.2076|
                          DCD      AVZ
                  |L1.2080|
                          DCD      ||area_number.23||
                  |L1.2084|
                          DCD      YEAR_AVZ
                  |L1.2088|
                          DCD      MONTH_AVZ
                  |L1.2092|
                          DCD      DATE_AVZ
                  |L1.2096|
                          DCD      HOUR_AVZ
                  |L1.2100|
                          DCD      MIN_AVZ
                  |L1.2104|
                          DCD      SEC_AVZ
                  |L1.2108|
                          DCD      AVZ_TIME
                  |L1.2112|
                          DCD      sk_stat
                  |L1.2116|
                          DCD      0x40024020
                  |L1.2120|
000848  20202020          DCB      "    ",194,197,205,210,200,203,223,214,200,223,"!!!   ",0
00084c  c2c5cdd2
000850  c8cbdfd6
000854  c8df2121
000858  21202020
00085c  00      
00085d  00                DCB      0
00085e  00                DCB      0
00085f  00                DCB      0
                  |L1.2144|
000860  20202020          DCB      "     ",205,197,200,209,207,208,192,194,205,192,"     ",0
000864  20cdc5c8
000868  d1cfd0c0
00086c  c2cdc020
000870  20202020
000874  00      
000875  00                DCB      0
000876  00                DCB      0
000877  00                DCB      0
                  |L1.2168|
000878  20202020          DCB      "    ",199,192,193,203,206,202,200,208,206,194,192,205," "
00087c  c7c0c1cb
000880  cecac8d0
000884  cec2c0cd
000888  20      
000889  20202000          DCB      "   ",0
00088d  00                DCB      0
00088e  00                DCB      0
00088f  00                DCB      0
                  |L1.2192|
000890  c2dbd0c0          DCB      194,219,208,192,194,205,200,194,192,222,217,200,201," ",199
000894  c2cdc8c2
000898  c0ded9c8
00089c  c920c7  
00089f  c0d0dfc4          DCB      192,208,223,196," ",0
0008a3  2000    
0008a5  00                DCB      0
0008a6  00                DCB      0
0008a7  00                DCB      0
                  |L1.2216|
                          DCD      speedChrgBlckStat
                  |L1.2220|
                          DCD      hv_vz_stat
                  |L1.2224|
                          DCD      TBAT
                  |L1.2228|
                          DCD      Ib_ips_termokompensat
                  |L1.2232|
                          DCD      bat
                  |L1.2236|
                          DCD      IKB
                  |L1.2240|
                          DCD      BAT_IS_ON
                  |L1.2244|
                          DCD      ips_bat_av_vzvod
                  |L1.2248|
                          DCD      bat_ips
                  |L1.2252|
                          DCD      net_av
                  |L1.2256|
0008d0  e019              B        |L1.2310|
                  |L1.2258|
0008d2  f7fffffe          BL       avar_bat_hndl
                  |L1.2262|
;;;618    			}
;;;619    #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;620    		if(( (ibat_ips+ibat_ips_) < IKB ) && (kb_start_ips==1))
0008d6  f9ba0048          LDRSH    r0,[r10,#0x48]  ; ibat_ips
0008da  f9ba104a          LDRSH    r1,[r10,#0x4a]  ; ibat_ips_
0008de  4408              ADD      r0,r0,r1
0008e0  f9b91000          LDRSH    r1,[r9,#0]  ; IKB
0008e4  4288              CMP      r0,r1
0008e6  da09              BGE      |L1.2300|
0008e8  f89a000e          LDRB     r0,[r10,#0xe]  ; kb_start_ips
0008ec  2801              CMP      r0,#1
0008ee  d105              BNE      |L1.2300|
;;;621    			{
;;;622    			if(KB_ALGORITM==1)
0008f0  48fb              LDR      r0,|L1.3296|
0008f2  8800              LDRH     r0,[r0,#0]  ; KB_ALGORITM
0008f4  2801              CMP      r0,#1
0008f6  d009              BEQ      |L1.2316|
;;;623    				{
;;;624    				avar_bat_ips_hndl(1);
;;;625    				kb_start_ips=0;
;;;626    				}
;;;627    			else
;;;628    				{
;;;629    				kb_cnt_2lev=10;     
0008f8  f8aa7044          STRH     r7,[r10,#0x44]
                  |L1.2300|
;;;630    				}
;;;631    			}
;;;632    #endif
;;;633    		}	
;;;634    
;;;635    
;;;636    	}
;;;637    else if(kb_cnt_2lev)
;;;638    	{
;;;639    	kb_cnt_2lev--;
;;;640    
;;;641    	if(kb_cnt_2lev>5)mess_send(MESS2CNTRL_HNDL,PARAM_CNTRL_STAT_PLUS,200,15);
;;;642    	else if(kb_cnt_2lev>0) mess_send(MESS2CNTRL_HNDL,PARAM_CNTRL_STAT_MINUS,200,15);
;;;643    
;;;644    
;;;645    	if(kb_cnt_2lev==5)
;;;646    		{
;;;647    		ibat[0]=abs(bat[0]._Ib);
;;;648    		ibat[1]=abs(bat[1]._Ib);
;;;649    		ibat_ips=abs(Ib_ips_termokompensat);
;;;650    		}
;;;651    	
;;;652    	if(kb_cnt_2lev==0)
;;;653    		{
;;;654    		ibat_[0]=abs(bat[0]._Ib);
;;;655    		ibat_[1]=abs(bat[1]._Ib);
;;;656    		ibat_ips_=abs(Ib_ips_termokompensat);
;;;657    
;;;658    		kb_full_ver=0;
;;;659    
;;;660    		if(( (ibat[0]+ibat_[0]) < IKB ) && (kb_start[0]==1))
;;;661    			{
;;;662    			kb_full_ver=1;  
;;;663    			}
;;;664    		else if(bat[0]._Ub>200)			
;;;665    			{
;;;666    			kb_start[0]=0;
;;;667    			avar_bat_hndl(0,0);
;;;668    			}
;;;669    
;;;670    		if(( (ibat[1]+ibat_[1]) < IKB ) && (kb_start[1]==1))
;;;671    			{
;;;672    			kb_full_ver=1;     
;;;673    			}
;;;674    		else	if(bat[1]._Ub>200)		
;;;675    			{
;;;676    			kb_start[1]=0;
;;;677    			avar_bat_hndl(1,0);
;;;678    			}
;;;679    #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;680    		if(( (ibat_ips+ibat_ips_) < IKB )  && (kb_start_ips==1))
;;;681    			{
;;;682    			if(KB_ALGORITM==2)
;;;683    				{
;;;684    				avar_bat_ips_hndl(1);
;;;685    				kb_start_ips=0;
;;;686    				}
;;;687    			else
;;;688    				{
;;;689    				kb_full_ver=1;     
;;;690    				}
;;;691    			}
;;;692    #endif
;;;693    		}	
;;;694    	}
;;;695    
;;;696    else if(kb_full_ver)
;;;697    	{
;;;698    	
;;;699    	mess_send(MESS2CNTRL_HNDL,PARAM_CNTRL_STAT_STEP_DOWN,0,15);
;;;700    
;;;701    	if( abs(bat[0]._Ib) > IKB ) 
;;;702    		{
;;;703    		if(kb_start[0]==1)
;;;704    			{
;;;705    			kb_start[0]=0;
;;;706    			avar_bat_hndl(0,0);
;;;707    			}
;;;708    		}
;;;709    
;;;710    	if( abs(bat[1]._Ib) > IKB ) 
;;;711    		{
;;;712    		if(kb_start[1]==1)
;;;713    			{
;;;714    			kb_start[1]=0;
;;;715    			avar_bat_hndl(1,0);
;;;716    			}
;;;717    		}
;;;718    #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;719    	if( abs(Ib_ips_termokompensat) > IKB ) 
;;;720    		{
;;;721    		if(kb_start_ips==1)
;;;722    			{
;;;723    			kb_start_ips=0;
;;;724    			avar_bat_ips_hndl(0);
;;;725    			}
;;;726    		}
;;;727    #endif
;;;728    
;;;729    	if ((kb_start[0]==0) && (kb_start[1]==0) && (kb_start_ips==0)) 
;;;730    		{
;;;731    		kb_full_ver=0;
;;;732    		}
;;;733    
;;;734    	if(( (mess_find(MESS2KB_HNDL))	&& (mess_data[0]==PARAM_CNTRL_IS_DOWN) ) || (load_U<(USIGN*10)) )
;;;735    		{
;;;736    		kb_full_ver=0;
;;;737    		if((kb_start[0]==1)&&((load_I>(2*IKB)/10))&&(!(bat[0]._av&0x01))) avar_bat_hndl(0,1);
;;;738    		if((kb_start[1]==1)&&((load_I>(2*IKB)/10))&&(!(bat[1]._av&0x01))) avar_bat_hndl(1,1);
;;;739    #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;740    		if((kb_start_ips==1)&&((load_I>(2*IKB)/10))&&(!(bat_ips._av&0x01))) avar_bat_ips_hndl(1);
;;;741    #endif
;;;742    		}
;;;743    	}
;;;744    
;;;745    }
0008fc  e8bd9ff0          POP      {r4-r12,pc}
                  |L1.2304|
000900  f8aa7044          STRH     r7,[r10,#0x44]        ;602
000904  e771              B        |L1.2026|
                  |L1.2310|
000906  f8aa7044          STRH     r7,[r10,#0x44]        ;612
00090a  e7e4              B        |L1.2262|
                  |L1.2316|
00090c  2001              MOVS     r0,#1                 ;624
00090e  f7fffffe          BL       avar_bat_ips_hndl
000912  f88a500e          STRB     r5,[r10,#0xe]         ;625
                  |L1.2326|
000916  e7f1              B        |L1.2300|
                  |L1.2328|
000918  f9b10044          LDRSH    r0,[r1,#0x44]         ;637  ; kb_cnt_2lev
00091c  b3f0              CBZ      r0,|L1.2460|
00091e  f1a00001          SUB      r0,r0,#1              ;639
000922  b200              SXTH     r0,r0                 ;639
000924  460f              MOV      r7,r1                 ;639
000926  f8a10044          STRH     r0,[r1,#0x44]         ;639
00092a  2805              CMP      r0,#5                 ;641
00092c  dd06              BLE      |L1.2364|
00092e  230f              MOVS     r3,#0xf               ;641
000930  22c8              MOVS     r2,#0xc8              ;641
000932  2164              MOVS     r1,#0x64              ;641
000934  20e1              MOVS     r0,#0xe1              ;641
000936  f7fffffe          BL       mess_send
00093a  e007              B        |L1.2380|
                  |L1.2364|
00093c  2800              CMP      r0,#0                 ;642
00093e  dd05              BLE      |L1.2380|
000940  230f              MOVS     r3,#0xf               ;642
000942  22c8              MOVS     r2,#0xc8              ;642
000944  2169              MOVS     r1,#0x69              ;642
000946  20e1              MOVS     r0,#0xe1              ;642
000948  f7fffffe          BL       mess_send
                  |L1.2380|
00094c  f8b70044          LDRH     r0,[r7,#0x44]         ;645  ; kb_cnt_2lev
000950  2805              CMP      r0,#5                 ;645
000952  d111              BNE      |L1.2424|
000954  f9b60008          LDRSH    r0,[r6,#8]            ;647  ; bat
000958  f7fffffe          BL       abs
00095c  f8a80000          STRH     r0,[r8,#0]            ;647
000960  f9b60054          LDRSH    r0,[r6,#0x54]         ;648  ; bat
000964  f7fffffe          BL       abs
000968  f8a80002          STRH     r0,[r8,#2]            ;648
00096c  f9ba0000          LDRSH    r0,[r10,#0]           ;649  ; Ib_ips_termokompensat
000970  f7fffffe          BL       abs
000974  f8a70048          STRH     r0,[r7,#0x48]         ;649
                  |L1.2424|
000978  48da              LDR      r0,|L1.3300|
00097a  f8b00044          LDRH     r0,[r0,#0x44]         ;652  ; kb_cnt_2lev
00097e  2800              CMP      r0,#0                 ;652
                  |L1.2432|
000980  d1bc              BNE      |L1.2300|
000982  f9b60008          LDRSH    r0,[r6,#8]            ;654  ; bat
000986  f7fffffe          BL       abs
00098a  4fd6              LDR      r7,|L1.3300|
00098c  376c              ADDS     r7,r7,#0x6c           ;654
00098e  8038              STRH     r0,[r7,#0]            ;654
000990  f9b60054          LDRSH    r0,[r6,#0x54]         ;655  ; bat
000994  f7fffffe          BL       abs
000998  8078              STRH     r0,[r7,#2]            ;655
00099a  e000              B        |L1.2462|
                  |L1.2460|
00099c  e054              B        |L1.2632|
                  |L1.2462|
00099e  f9ba0000          LDRSH    r0,[r10,#0]           ;656  ; Ib_ips_termokompensat
0009a2  f7fffffe          BL       abs
0009a6  f8dfa33c          LDR      r10,|L1.3300|
0009aa  f8aa004a          STRH     r0,[r10,#0x4a]        ;656
0009ae  f88a500d          STRB     r5,[r10,#0xd]         ;658
0009b2  f9b80000          LDRSH    r0,[r8,#0]            ;660  ; ibat
0009b6  f9b71000          LDRSH    r1,[r7,#0]            ;660  ; ibat_
0009ba  4408              ADD      r0,r0,r1              ;660
0009bc  f9b91000          LDRSH    r1,[r9,#0]            ;660  ; IKB
0009c0  4288              CMP      r0,r1                 ;660
0009c2  da02              BGE      |L1.2506|
0009c4  7820              LDRB     r0,[r4,#0]            ;660  ; kb_start
0009c6  2801              CMP      r0,#1                 ;660
0009c8  d032              BEQ      |L1.2608|
                  |L1.2506|
0009ca  f9b60002          LDRSH    r0,[r6,#2]            ;664  ; bat
0009ce  28c8              CMP      r0,#0xc8              ;664
0009d0  dd04              BLE      |L1.2524|
0009d2  7025              STRB     r5,[r4,#0]            ;666
0009d4  2100              MOVS     r1,#0                 ;667
0009d6  4608              MOV      r0,r1                 ;667
0009d8  f7fffffe          BL       avar_bat_hndl
                  |L1.2524|
0009dc  f9b80002          LDRSH    r0,[r8,#2]            ;670  ; ibat
0009e0  f9b71002          LDRSH    r1,[r7,#2]            ;670  ; ibat_
0009e4  4408              ADD      r0,r0,r1              ;670
0009e6  f9b91000          LDRSH    r1,[r9,#0]            ;670  ; IKB
0009ea  4288              CMP      r0,r1                 ;670
0009ec  da02              BGE      |L1.2548|
0009ee  7860              LDRB     r0,[r4,#1]            ;670  ; kb_start
0009f0  2801              CMP      r0,#1                 ;670
0009f2  d020              BEQ      |L1.2614|
                  |L1.2548|
0009f4  f9b6004e          LDRSH    r0,[r6,#0x4e]         ;674  ; bat
0009f8  28c8              CMP      r0,#0xc8              ;674
0009fa  dd04              BLE      |L1.2566|
0009fc  7065              STRB     r5,[r4,#1]            ;676
0009fe  2100              MOVS     r1,#0                 ;677
000a00  2001              MOVS     r0,#1                 ;677
000a02  f7fffffe          BL       avar_bat_hndl
                  |L1.2566|
000a06  f9ba0048          LDRSH    r0,[r10,#0x48]        ;680  ; ibat_ips
000a0a  f9ba104a          LDRSH    r1,[r10,#0x4a]        ;680  ; ibat_ips_
000a0e  4408              ADD      r0,r0,r1              ;680
000a10  f9b91000          LDRSH    r1,[r9,#0]            ;680  ; IKB
000a14  4288              CMP      r0,r1                 ;680
000a16  f6bfaf7e          BGE      |L1.2326|
000a1a  f89a000e          LDRB     r0,[r10,#0xe]         ;680  ; kb_start_ips
000a1e  2801              CMP      r0,#1                 ;680
000a20  d1ae              BNE      |L1.2432|
000a22  48af              LDR      r0,|L1.3296|
000a24  8800              LDRH     r0,[r0,#0]            ;682  ; KB_ALGORITM
000a26  2802              CMP      r0,#2                 ;682
000a28  d008              BEQ      |L1.2620|
000a2a  f88ab00d          STRB     r11,[r10,#0xd]        ;689
                  |L1.2606|
000a2e  e765              B        |L1.2300|
                  |L1.2608|
000a30  f88ab00d          STRB     r11,[r10,#0xd]        ;662
000a34  e7d2              B        |L1.2524|
                  |L1.2614|
000a36  f88ab00d          STRB     r11,[r10,#0xd]        ;672
000a3a  e7e4              B        |L1.2566|
                  |L1.2620|
000a3c  2001              MOVS     r0,#1                 ;684
000a3e  f7fffffe          BL       avar_bat_ips_hndl
000a42  f88a500e          STRB     r5,[r10,#0xe]         ;685
000a46  e759              B        |L1.2300|
                  |L1.2632|
000a48  7b48              LDRB     r0,[r1,#0xd]          ;696  ; kb_full_ver
000a4a  4688              MOV      r8,r1                 ;696
000a4c  2800              CMP      r0,#0                 ;696
000a4e  d0ee              BEQ      |L1.2606|
000a50  230f              MOVS     r3,#0xf               ;699
000a52  2200              MOVS     r2,#0                 ;699
000a54  216e              MOVS     r1,#0x6e              ;699
000a56  20e1              MOVS     r0,#0xe1              ;699
000a58  f7fffffe          BL       mess_send
000a5c  f9b60008          LDRSH    r0,[r6,#8]            ;701  ; bat
000a60  f7fffffe          BL       abs
000a64  f9b91000          LDRSH    r1,[r9,#0]            ;701  ; IKB
000a68  4288              CMP      r0,r1                 ;701
000a6a  dd07              BLE      |L1.2684|
000a6c  7820              LDRB     r0,[r4,#0]            ;703  ; kb_start
000a6e  2801              CMP      r0,#1                 ;703
000a70  d104              BNE      |L1.2684|
000a72  7025              STRB     r5,[r4,#0]            ;705
000a74  2100              MOVS     r1,#0                 ;706
000a76  4608              MOV      r0,r1                 ;706
000a78  f7fffffe          BL       avar_bat_hndl
                  |L1.2684|
000a7c  f9b60054          LDRSH    r0,[r6,#0x54]         ;710  ; bat
000a80  f7fffffe          BL       abs
000a84  f9b91000          LDRSH    r1,[r9,#0]            ;710  ; IKB
000a88  4288              CMP      r0,r1                 ;710
000a8a  dd06              BLE      |L1.2714|
000a8c  7860              LDRB     r0,[r4,#1]            ;712  ; kb_start
000a8e  2801              CMP      r0,#1                 ;712
000a90  d103              BNE      |L1.2714|
000a92  7065              STRB     r5,[r4,#1]            ;714
000a94  2100              MOVS     r1,#0                 ;715
000a96  f7fffffe          BL       avar_bat_hndl
                  |L1.2714|
000a9a  f9ba0000          LDRSH    r0,[r10,#0]           ;719  ; Ib_ips_termokompensat
000a9e  f7fffffe          BL       abs
000aa2  f9b91000          LDRSH    r1,[r9,#0]            ;719  ; IKB
000aa6  4288              CMP      r0,r1                 ;719
000aa8  dd08              BLE      |L1.2748|
000aaa  f898000e          LDRB     r0,[r8,#0xe]          ;721  ; kb_start_ips
000aae  2801              CMP      r0,#1                 ;721
000ab0  d104              BNE      |L1.2748|
000ab2  f888500e          STRB     r5,[r8,#0xe]          ;723
000ab6  2000              MOVS     r0,#0                 ;724
000ab8  f7fffffe          BL       avar_bat_ips_hndl
                  |L1.2748|
000abc  7820              LDRB     r0,[r4,#0]            ;729  ; kb_start
000abe  b930              CBNZ     r0,|L1.2766|
000ac0  7860              LDRB     r0,[r4,#1]            ;729  ; kb_start
000ac2  b920              CBNZ     r0,|L1.2766|
000ac4  f898000e          LDRB     r0,[r8,#0xe]          ;729  ; kb_start_ips
000ac8  b908              CBNZ     r0,|L1.2766|
000aca  f888500d          STRB     r5,[r8,#0xd]          ;731
                  |L1.2766|
000ace  20e6              MOVS     r0,#0xe6              ;734
000ad0  f7fffffe          BL       mess_find
000ad4  b118              CBZ      r0,|L1.2782|
000ad6  4884              LDR      r0,|L1.3304|
000ad8  6800              LDR      r0,[r0,#0]            ;734  ; mess_data
000ada  28e7              CMP      r0,#0xe7              ;734
000adc  d00a              BEQ      |L1.2804|
                  |L1.2782|
000ade  4883              LDR      r0,|L1.3308|
000ae0  4983              LDR      r1,|L1.3312|
000ae2  f9b00000          LDRSH    r0,[r0,#0]            ;734  ; USIGN
000ae6  f9b11000          LDRSH    r1,[r1,#0]            ;734  ; load_U
000aea  eb000080          ADD      r0,r0,r0,LSL #2       ;734
000aee  ebb10f40          CMP      r1,r0,LSL #1          ;734
                  |L1.2802|
000af2  da9c              BGE      |L1.2606|
                  |L1.2804|
000af4  f888500d          STRB     r5,[r8,#0xd]          ;736
000af8  7820              LDRB     r0,[r4,#0]            ;737  ; kb_start
000afa  4d7e              LDR      r5,|L1.3316|
000afc  2801              CMP      r0,#1                 ;737
000afe  d10f              BNE      |L1.2848|
000b00  f9b90000          LDRSH    r0,[r9,#0]            ;737  ; IKB
000b04  f9b51000          LDRSH    r1,[r5,#0]            ;737  ; load_I
000b08  0040              LSLS     r0,r0,#1              ;737
000b0a  fb90f0f7          SDIV     r0,r0,r7              ;737
000b0e  4288              CMP      r0,r1                 ;737
000b10  da06              BGE      |L1.2848|
000b12  f896003d          LDRB     r0,[r6,#0x3d]         ;737  ; bat
000b16  07c0              LSLS     r0,r0,#31             ;737
000b18  d102              BNE      |L1.2848|
000b1a  2101              MOVS     r1,#1                 ;737
000b1c  f7fffffe          BL       avar_bat_hndl
                  |L1.2848|
000b20  7860              LDRB     r0,[r4,#1]            ;738  ; kb_start
000b22  2801              CMP      r0,#1                 ;738
000b24  d110              BNE      |L1.2888|
000b26  f9b90000          LDRSH    r0,[r9,#0]            ;738  ; IKB
000b2a  f9b51000          LDRSH    r1,[r5,#0]            ;738  ; load_I
000b2e  0040              LSLS     r0,r0,#1              ;738
000b30  fb90f0f7          SDIV     r0,r0,r7              ;738
000b34  4288              CMP      r0,r1                 ;738
000b36  da07              BGE      |L1.2888|
000b38  f8960089          LDRB     r0,[r6,#0x89]         ;738  ; bat
000b3c  07c0              LSLS     r0,r0,#31             ;738
000b3e  d103              BNE      |L1.2888|
000b40  2101              MOVS     r1,#1                 ;738
000b42  4608              MOV      r0,r1                 ;738
000b44  f7fffffe          BL       avar_bat_hndl
                  |L1.2888|
000b48  f898000e          LDRB     r0,[r8,#0xe]          ;740  ; kb_start_ips
000b4c  2801              CMP      r0,#1                 ;740
                  |L1.2894|
000b4e  f47faee2          BNE      |L1.2326|
000b52  f9b90000          LDRSH    r0,[r9,#0]            ;740  ; IKB
000b56  f9b51000          LDRSH    r1,[r5,#0]            ;740  ; load_I
000b5a  0040              LSLS     r0,r0,#1              ;740
000b5c  fb90f0f7          SDIV     r0,r0,r7              ;740
000b60  4288              CMP      r0,r1                 ;740
000b62  dac6              BGE      |L1.2802|
000b64  4864              LDR      r0,|L1.3320|
000b66  f890003d          LDRB     r0,[r0,#0x3d]         ;740  ; bat_ips
000b6a  07c0              LSLS     r0,r0,#31             ;740
000b6c  d1ef              BNE      |L1.2894|
000b6e  e8bd5ff0          POP      {r4-r12,lr}           ;740
000b72  2001              MOVS     r0,#1                 ;740
000b74  f7ffbffe          B.W      avar_bat_ips_hndl
;;;746    
                          ENDP

                  samokalibr_hndl PROC
;;;755    //-----------------------------------------------
;;;756    void samokalibr_hndl(void)
000b78  e92d47f0          PUSH     {r4-r10,lr}
;;;757    {
;;;758    if(++samokalibr_cnt>=1800)samokalibr_cnt=0;
000b7c  4c59              LDR      r4,|L1.3300|
000b7e  8fe0              LDRH     r0,[r4,#0x3e]  ; samokalibr_cnt
000b80  1c40              ADDS     r0,r0,#1
000b82  b200              SXTH     r0,r0
000b84  87e0              STRH     r0,[r4,#0x3e]
000b86  f5b06fe1          CMP      r0,#0x708
000b8a  db02              BLT      |L1.2962|
000b8c  f04f0000          MOV      r0,#0
000b90  87e0              STRH     r0,[r4,#0x3e]
                  |L1.2962|
;;;759    
;;;760    if(samokalibr_cnt>=1785U)
000b92  f9b4003e          LDRSH    r0,[r4,#0x3e]  ; samokalibr_cnt
000b96  f5b06fdf          CMP      r0,#0x6f8
000b9a  d911              BLS      |L1.3008|
;;;761    	{
;;;762    	mess_send(MESS2RELE_HNDL,PARAM_RELE_SAMOKALIBR,1,15);
000b9c  230f              MOVS     r3,#0xf
000b9e  2201              MOVS     r2,#1
000ba0  2164              MOVS     r1,#0x64
000ba2  20d2              MOVS     r0,#0xd2
000ba4  f7fffffe          BL       mess_send
;;;763    	mess_send(MESS2IND_HNDL,PARAM_SAMOKALIBR,0,15);
000ba8  230f              MOVS     r3,#0xf
000baa  2200              MOVS     r2,#0
000bac  21d8              MOVS     r1,#0xd8
000bae  20d7              MOVS     r0,#0xd7
000bb0  f7fffffe          BL       mess_send
;;;764    	mess_send(MESS2MATEMAT,PARAM_SAMOKALIBR,0,15);
000bb4  230f              MOVS     r3,#0xf
000bb6  2200              MOVS     r2,#0
000bb8  21d8              MOVS     r1,#0xd8
000bba  20dc              MOVS     r0,#0xdc
000bbc  f7fffffe          BL       mess_send
                  |L1.3008|
;;;765    	} 
;;;766    
;;;767    if(samokalibr_cnt==1799U)
000bc0  f9b4003e          LDRSH    r0,[r4,#0x3e]  ; samokalibr_cnt
000bc4  f5a061e0          SUB      r1,r0,#0x700
000bc8  3907              SUBS     r1,#7
000bca  d133              BNE      |L1.3124|
;;;768    	{
;;;769    	if((Kibat0[0]!=ad7705_buff_[0])&&(abs(bat[0]._Ib/10)<IZMAX)) lc640_write_int(ADR_KI0BAT[0],ad7705_buff_[0]);
000bcc  4d4b              LDR      r5,|L1.3324|
000bce  4c4c              LDR      r4,|L1.3328|
000bd0  4e4c              LDR      r6,|L1.3332|
000bd2  8828              LDRH     r0,[r5,#0]  ; Kibat0
000bd4  8821              LDRH     r1,[r4,#0]  ; ad7705_buff_
000bd6  270a              MOVS     r7,#0xa
000bd8  f8df812c          LDR      r8,|L1.3336|
000bdc  f8df912c          LDR      r9,|L1.3340|
000be0  4288              CMP      r0,r1
000be2  d010              BEQ      |L1.3078|
000be4  f9b60008          LDRSH    r0,[r6,#8]  ; bat
000be8  fb90f0f7          SDIV     r0,r0,r7
000bec  b200              SXTH     r0,r0
000bee  f7fffffe          BL       abs
000bf2  f9b81000          LDRSH    r1,[r8,#0]  ; IZMAX
000bf6  4288              CMP      r0,r1
000bf8  da05              BGE      |L1.3078|
000bfa  f9b41000          LDRSH    r1,[r4,#0]  ; ad7705_buff_
000bfe  f9b90000          LDRSH    r0,[r9,#0]  ; ADR_KI0BAT
000c02  f7fffffe          BL       lc640_write_int
                  |L1.3078|
;;;770    	if((Kibat0[1]!=ad7705_buff_[1])&&(abs(bat[0]._Ib/10)<IZMAX)) lc640_write_int(ADR_KI0BAT[1],ad7705_buff_[1]);
000c06  8868              LDRH     r0,[r5,#2]  ; Kibat0
000c08  8861              LDRH     r1,[r4,#2]  ; ad7705_buff_
000c0a  4288              CMP      r0,r1
000c0c  d012              BEQ      |L1.3124|
000c0e  f9b60008          LDRSH    r0,[r6,#8]  ; bat
000c12  fb90f0f7          SDIV     r0,r0,r7
000c16  b200              SXTH     r0,r0
000c18  f7fffffe          BL       abs
000c1c  f9b81000          LDRSH    r1,[r8,#0]  ; IZMAX
000c20  4288              CMP      r0,r1
000c22  da07              BGE      |L1.3124|
000c24  f9b41002          LDRSH    r1,[r4,#2]  ; ad7705_buff_
000c28  f9b90002          LDRSH    r0,[r9,#2]  ; ADR_KI0BAT
000c2c  e8bd47f0          POP      {r4-r10,lr}
000c30  f7ffbffe          B.W      lc640_write_int
                  |L1.3124|
;;;771    	
;;;772    	}	 	
;;;773    }
000c34  e8bd87f0          POP      {r4-r10,pc}
;;;774    
                          ENDP

                  ubat_old_drv PROC
;;;777    //-----------------------------------------------
;;;778    void ubat_old_drv(void)
000c38  b510              PUSH     {r4,lr}
;;;779    {        
;;;780    bat_u_old_cnt++;
000c3a  4c35              LDR      r4,|L1.3344|
000c3c  8820              LDRH     r0,[r4,#0]  ; bat_u_old_cnt
000c3e  f1000001          ADD      r0,r0,#1
000c42  8020              STRH     r0,[r4,#0]
;;;781    gran_ring(&bat_u_old_cnt,0,8);
000c44  f04f0208          MOV      r2,#8
000c48  f04f0100          MOV      r1,#0
000c4c  4620              MOV      r0,r4
000c4e  f7fffffe          BL       gran_ring
;;;782    
;;;783    bat[0]._u_old[bat_u_old_cnt]=bat[0]._Ub;
000c52  492c              LDR      r1,|L1.3332|
000c54  f9b40000          LDRSH    r0,[r4,#0]  ; bat_u_old_cnt
000c58  eb010040          ADD      r0,r1,r0,LSL #1
000c5c  884a              LDRH     r2,[r1,#2]  ; bat
000c5e  8402              STRH     r2,[r0,#0x20]
;;;784    bat[1]._u_old[bat_u_old_cnt]=bat[1]._Ub;
000c60  f8b1104e          LDRH     r1,[r1,#0x4e]  ; bat
000c64  f8a0106c          STRH     r1,[r0,#0x6c]
;;;785    }
000c68  e45a              B        |L1.1312|
;;;786    
                          ENDP

                  unet_drv PROC
;;;787    //-----------------------------------------------
;;;788    void unet_drv(void)
000c6a  b570              PUSH     {r4-r6,lr}
;;;789    {
;;;790    if(net_U<UMN)
000c6c  4d29              LDR      r5,|L1.3348|
000c6e  482a              LDR      r0,|L1.3352|
;;;791    	{
;;;792    	if((unet_drv_cnt<10)&&(main_1Hz_cnt>15))
000c70  4a2a              LDR      r2,|L1.3356|
000c72  f9b51000          LDRSH    r1,[r5,#0]            ;790  ; net_U
000c76  f9b03000          LDRSH    r3,[r0,#0]            ;790  ; UMN
000c7a  f9920000          LDRSB    r0,[r2,#0]
000c7e  4299              CMP      r1,r3                 ;790
000c80  da1f              BGE      |L1.3266|
;;;793    		{
;;;794    		unet_drv_cnt++;
;;;795    		if(unet_drv_cnt>=10)
;;;796    			{
;;;797    			net_Ustore=net_U;
000c82  4c27              LDR      r4,|L1.3360|
000c84  280a              CMP      r0,#0xa               ;792
000c86  da0f              BGE      |L1.3240|
000c88  4b26              LDR      r3,|L1.3364|
000c8a  f9b33000          LDRSH    r3,[r3,#0]            ;792  ; main_1Hz_cnt
000c8e  2b0f              CMP      r3,#0xf               ;792
000c90  dd0a              BLE      |L1.3240|
000c92  f1000001          ADD      r0,r0,#1              ;794
000c96  b240              SXTB     r0,r0                 ;794
000c98  7010              STRB     r0,[r2,#0]            ;794
000c9a  280a              CMP      r0,#0xa               ;795
000c9c  db09              BLT      |L1.3250|
000c9e  8021              STRH     r1,[r4,#0]
;;;798    		 	avar_unet_hndl(1);
000ca0  2001              MOVS     r0,#1
000ca2  f7fffffe          BL       avar_unet_hndl
000ca6  e004              B        |L1.3250|
                  |L1.3240|
;;;799    			
;;;800    			}
;;;801    		}
;;;802    	else if(unet_drv_cnt>=10)unet_drv_cnt=10;
000ca8  280a              CMP      r0,#0xa
000caa  db02              BLT      |L1.3250|
000cac  f04f000a          MOV      r0,#0xa
000cb0  7010              STRB     r0,[r2,#0]
                  |L1.3250|
;;;803    
;;;804    	if(net_U<net_Ustore) net_Ustore=net_U;	
000cb2  f9b50000          LDRSH    r0,[r5,#0]  ; net_U
000cb6  f9b41000          LDRSH    r1,[r4,#0]  ; net_Ustore
000cba  4288              CMP      r0,r1
000cbc  da00              BGE      |L1.3264|
000cbe  8020              STRH     r0,[r4,#0]
                  |L1.3264|
;;;805    	}
;;;806    
;;;807    else if(net_U>UMN)
;;;808    	{                 
;;;809    	if(unet_drv_cnt)
;;;810    		{
;;;811    		unet_drv_cnt--;
;;;812    		if(unet_drv_cnt<=0)
;;;813    			{
;;;814    			avar_unet_hndl(0);
;;;815    			}
;;;816    		}
;;;817    	else if(unet_drv_cnt<0)unet_drv_cnt=0;
;;;818    	
;;;819    	}
;;;820    
;;;821    }
000cc0  bd70              POP      {r4-r6,pc}
                  |L1.3266|
000cc2  ddfd              BLE      |L1.3264|
000cc4  2800              CMP      r0,#0                 ;809
000cc6  d0fb              BEQ      |L1.3264|
000cc8  f1a00001          SUB      r0,r0,#1              ;811
000ccc  b240              SXTB     r0,r0                 ;811
000cce  7010              STRB     r0,[r2,#0]            ;811
000cd0  2800              CMP      r0,#0                 ;812
000cd2  dcf5              BGT      |L1.3264|
000cd4  e8bd4070          POP      {r4-r6,lr}            ;814
000cd8  2000              MOVS     r0,#0                 ;814
000cda  f7ffbffe          B.W      avar_unet_hndl
000cde  0000              DCW      0x0000
                  |L1.3296|
                          DCD      KB_ALGORITM
                  |L1.3300|
                          DCD      ||area_number.23||
                  |L1.3304|
                          DCD      mess_data
                  |L1.3308|
                          DCD      USIGN
                  |L1.3312|
                          DCD      load_U
                  |L1.3316|
                          DCD      load_I
                  |L1.3320|
                          DCD      bat_ips
                  |L1.3324|
                          DCD      Kibat0
                  |L1.3328|
                          DCD      ad7705_buff_
                  |L1.3332|
                          DCD      bat
                  |L1.3336|
                          DCD      IZMAX
                  |L1.3340|
                          DCD      ADR_KI0BAT
                  |L1.3344|
                          DCD      bat_u_old_cnt
                  |L1.3348|
                          DCD      net_U
                  |L1.3352|
                          DCD      UMN
                  |L1.3356|
                          DCD      unet_drv_cnt
                  |L1.3360|
                          DCD      net_Ustore
                  |L1.3364|
                          DCD      main_1Hz_cnt
                          ENDP

                  matemat PROC
;;;823    //-----------------------------------------------
;;;824    void matemat(void)
000d28  e92d4ffe          PUSH     {r1-r11,lr}
;;;825    {
;;;826    //signed short temp_SS;
;;;827    signed long temp_SL/*,temp_SL_*/;
;;;828    char /*temp,*/i;
;;;829    //signed short temp_SS;
;;;830    
;;;831    #ifdef UKU_MGTS
;;;832    //íàïðÿæåíèå ñåòè
;;;833    temp_SL=(signed long)net_buff_;
;;;834    temp_SL*=Kunet;
;;;835    temp_SL/=110000L;
;;;836    net_U=(signed short)temp_SL;
;;;837    #endif
;;;838    
;;;839    #ifdef UKU_RSTKM
;;;840    //íàïðÿæåíèå ñåòè
;;;841    temp_SL=(signed long)net_buff_;
;;;842    temp_SL*=Kunet;
;;;843    temp_SL/=110000L;
;;;844    net_U=(signed short)temp_SL;
;;;845    #endif
;;;846    
;;;847    #ifdef UKU_3U
;;;848    //íàïðÿæåíèå ñåòè
;;;849    temp_SL=(signed long)net_buff_;
;;;850    temp_SL*=Kunet;
;;;851    temp_SL/=36000L;
;;;852    net_U=(signed short)temp_SL;
;;;853    #endif
;;;854    
;;;855    #ifdef UKU_6U
;;;856    //íàïðÿæåíèå ñåòè
;;;857    
;;;858    if((AUSW_MAIN%10)||(AUSW_MAIN==2400)||(AUSW_MAIN==4800)||(AUSW_MAIN==6000))
;;;859    	{
;;;860    
;;;861    	if(bps[11]._device==dNET_METR)
;;;862    		{
;;;863    		net_metr_buff_[0]=((signed short)bps[11]._buff[0])+(((signed short)bps[11]._buff[1])<<8);
;;;864    		net_metr_buff_[1]=((signed short)bps[11]._buff[2])+(((signed short)bps[11]._buff[3])<<8);
;;;865    		net_metr_buff_[2]=((signed short)bps[11]._buff[4])+(((signed short)bps[11]._buff[5])<<8);
;;;866    
;;;867    		temp_SL=(signed long)net_metr_buff_[0];
;;;868    		temp_SL*=KunetA;
;;;869    		temp_SL/=6000L;
;;;870    		net_Ua=(signed short)temp_SL;
;;;871    	
;;;872    		temp_SL=(signed long)net_metr_buff_[1];
;;;873    		temp_SL*=KunetB;
;;;874    		temp_SL/=6000L;
;;;875    		net_Ub=(signed short)temp_SL;
;;;876    	
;;;877    		temp_SL=(signed long)net_metr_buff_[2];
;;;878    		temp_SL*=KunetC;
;;;879    		temp_SL/=6000L;
;;;880    		net_Uc=(signed short)temp_SL;
;;;881    		}
;;;882    	else
;;;883    		{
;;;884    		temp_SL=(signed long)net_buff_;
;;;885    		temp_SL*=KunetA;
;;;886    		temp_SL/=110000L;
;;;887    		net_Ua=(signed short)temp_SL;
;;;888    	
;;;889    		temp_SL=(signed long)adc_buff_[3];
;;;890    		temp_SL*=KunetB;
;;;891    		temp_SL/=6000L;
;;;892    		net_Ub=(signed short)temp_SL;
;;;893    	
;;;894    		temp_SL=(signed long)adc_buff_[10];
;;;895    		temp_SL*=KunetC;
;;;896    		temp_SL/=6000L;
;;;897    		net_Uc=(signed short)temp_SL;
;;;898    		}
;;;899    
;;;900    	net_U=net_Ua;
;;;901    	if(net_Ub<net_U)net_U=net_Ub;
;;;902    	if(net_Uc<net_U)net_U=net_Uc;
;;;903    	}
;;;904    else 
;;;905    	{
;;;906    	temp_SL=(signed long)net_buff_;
;;;907    	temp_SL*=Kunet;
;;;908    	temp_SL/=110000L;
;;;909    	net_U=(signed short)temp_SL;
;;;910    	}
;;;911    
;;;912    
;;;913    
;;;914    
;;;915    #endif
;;;916    
;;;917    #ifdef UKU_GLONASS
;;;918    //íàïðÿæåíèå ñåòè
;;;919    temp_SL=(signed long)net_buff_;
;;;920    temp_SL*=Kunet;
;;;921    temp_SL/=110000L;
;;;922    net_U=(signed short)temp_SL;
;;;923    #endif
;;;924    
;;;925    #ifdef UKU_KONTUR
;;;926    //íàïðÿæåíèå ñåòè
;;;927    temp_SL=(signed long)net_buff_;
;;;928    temp_SL*=Kunet;
;;;929    temp_SL/=110000L;
;;;930    net_U=(signed short)temp_SL;
;;;931    #endif
;;;932    
;;;933    
;;;934    #ifdef UKU_220_V2
;;;935    //íàïðÿæåíèå ñåòè
;;;936    
;;;937    if(AUSW_MAIN==22033)
;;;938    	{
;;;939    	temp_SL=(signed long)net_buff_;
;;;940    	temp_SL*=KunetA;
;;;941    	temp_SL/=6000L;
;;;942    	net_Ua=(signed short)temp_SL;
;;;943    
;;;944    	temp_SL=(signed long)adc_buff_[3];
;;;945    	temp_SL*=KunetB;
;;;946    	temp_SL/=6000L;
;;;947    	net_Ub=(signed short)temp_SL;
;;;948    
;;;949    	temp_SL=(signed long)adc_buff_[10];
;;;950    	temp_SL*=KunetC;
;;;951    	temp_SL/=6000L;
;;;952    	net_Uc=(signed short)temp_SL;
;;;953    
;;;954    	net_U=net_Ua;
;;;955    	if(net_Ub<net_U)net_U=net_Ub;
;;;956    	if(net_Uc<net_U)net_U=net_Uc;
;;;957    	}
;;;958    else
;;;959    	{
;;;960    	temp_SL=(signed long)net_buff_;
;;;961    	temp_SL*=Kunet;
;;;962    	temp_SL/=5000L;
;;;963    	net_U=(signed short)temp_SL;
;;;964    	}
;;;965    #endif
;;;966    
;;;967    
;;;968    #ifdef UKU_220
;;;969    //íàïðÿæåíèå ñåòè
;;;970    
;;;971    if(AUSW_MAIN==22035)
;;;972    	{
;;;973    	temp_SL=(signed long)net_buff_;
;;;974    	temp_SL*=KunetA;
;;;975    	temp_SL/=6000L;
;;;976    	net_Ua=(signed short)temp_SL;
;;;977    
;;;978    	temp_SL=(signed long)adc_buff_[3];
;;;979    	temp_SL*=KunetB;
;;;980    	temp_SL/=6000L;
;;;981    	net_Ub=(signed short)temp_SL;
;;;982    
;;;983    	temp_SL=(signed long)adc_buff_[10];
;;;984    	temp_SL*=KunetC;
;;;985    	temp_SL/=6000L;
;;;986    	net_Uc=(signed short)temp_SL;
;;;987    
;;;988    	net_U=net_Ua;
;;;989    	if(net_Ub<net_U)net_U=net_Ub;
;;;990    	if(net_Uc<net_U)net_U=net_Uc;
;;;991    	}
;;;992    else
;;;993    	{
;;;994    	temp_SL=(signed long)net_buff_;
;;;995    	temp_SL*=Kunet;
;;;996    	#ifdef _ACDC_
;;;997    	temp_SL/=500L;
;;;998    	#else
;;;999    	temp_SL/=5000L;
;;;1000   	#endif
;;;1001   	net_U=(signed short)temp_SL;
;;;1002   	
;;;1003   	}
;;;1004   #endif
;;;1005   
;;;1006   #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;1007   //íàïðÿæåíèå ñåòè
;;;1008   
;;;1009   
;;;1010   	if(bps[11]._device==dNET_METR)
000d2c  48f8              LDR      r0,|L1.4368|
;;;1011   		{
;;;1012   		net_metr_buff_[0]=((signed short)bps[11]._buff[0])+(((signed short)bps[11]._buff[1])<<8);
;;;1013   		net_metr_buff_[1]=((signed short)bps[11]._buff[2])+(((signed short)bps[11]._buff[3])<<8);
;;;1014   		net_metr_buff_[2]=((signed short)bps[11]._buff[4])+(((signed short)bps[11]._buff[5])<<8);
;;;1015   
;;;1016   		temp_SL=(signed long)net_metr_buff_[2];
;;;1017   		temp_SL*=KunetA;
;;;1018   		temp_SL/=6000L;
;;;1019   		net_Ua=(signed short)temp_SL;
;;;1020   	
;;;1021   		temp_SL=(signed long)net_metr_buff_[1];
;;;1022   		temp_SL*=KunetB;
000d2e  49fb              LDR      r1,|L1.4380|
000d30  4af8              LDR      r2,|L1.4372|
000d32  f89003f4          LDRB     r0,[r0,#0x3f4]        ;1010  ; bps
;;;1023   		temp_SL/=6000L;
;;;1024   		net_Ub=(signed short)temp_SL;
;;;1025   	
;;;1026   		temp_SL=(signed long)net_metr_buff_[0];
;;;1027   		temp_SL*=KunetC;
000d36  4bfa              LDR      r3,|L1.4384|
000d38  9002              STR      r0,[sp,#8]            ;1017
000d3a  f9b1b000          LDRSH    r11,[r1,#0]           ;1022
000d3e  f8dfc3d8          LDR      r12,|L1.4376|
000d42  f9b2a000          LDRSH    r10,[r2,#0]           ;1017
000d46  f9b31000          LDRSH    r1,[r3,#0]
000d4a  4df6              LDR      r5,|L1.4388|
;;;1028   		temp_SL/=6000L;
;;;1029   		net_Uc=(signed short)temp_SL;
000d4c  4cf6              LDR      r4,|L1.4392|
;;;1030   
;;;1031   		net_F3=((signed short)bps[11]._buff[6])+(((signed short)bps[11]._buff[7])<<8);
;;;1032   
;;;1033   		net_U=net_Ua;
;;;1034   		if(net_Ub<net_U)net_U=net_Ub;
;;;1035   		if(net_Uc<net_U)net_U=net_Uc;
;;;1036   		}
;;;1037   	  else if(AUSW_MAIN==22033)
;;;1038   	{
;;;1039   	temp_SL=(signed long)net_buff_;
000d4e  4ff7              LDR      r7,|L1.4396|
000d50  f2456611          MOV      r6,#0x5611            ;1037
;;;1040   	temp_SL*=KunetA;
;;;1041   	temp_SL/=4000L;
;;;1042   	net_Ua=(signed short)temp_SL;
;;;1043   
;;;1044   	temp_SL=(signed long)adc_buff_[3];
;;;1045   	temp_SL*=KunetB;
;;;1046   	temp_SL/=6000L;
;;;1047   	net_Ub=(signed short)temp_SL;
;;;1048   
;;;1049   	temp_SL=(signed long)adc_buff_[10];
;;;1050   	temp_SL*=KunetC;
;;;1051   	temp_SL/=6000L;
;;;1052   	net_Uc=(signed short)temp_SL;
;;;1053   
;;;1054   	net_U=net_Ua;
;;;1055   	if(net_Ub<net_U)net_U=net_Ub;
;;;1056   	if(net_Uc<net_U)net_U=net_Uc;
;;;1057   	}
;;;1058   else if((AUSW_MAIN==22063)||(AUSW_MAIN==22023)||(AUSW_MAIN==22043)||(AUSW_MAIN==22018))
;;;1059   	{
;;;1060   	temp_SL=(signed long)net_buff_;
;;;1061   	temp_SL*=KunetA;
;;;1062   	temp_SL/=40000L;
;;;1063   	net_Ua=(signed short)temp_SL;
;;;1064   
;;;1065   	temp_SL=(signed long)adc_buff_[3];
;;;1066   	temp_SL*=KunetB;
;;;1067   	temp_SL/=6000L;
;;;1068   	net_Ub=(signed short)temp_SL;
;;;1069   
;;;1070   	temp_SL=(signed long)adc_buff_[10];
;;;1071   	temp_SL*=KunetC;
;;;1072   	temp_SL/=6000L;
;;;1073   	net_Uc=(signed short)temp_SL;
;;;1074   
;;;1075   	net_U=net_Ua;
;;;1076   	if(net_Ub<net_U)net_U=net_Ub;
;;;1077   	if(net_Uc<net_U)net_U=net_Uc;
;;;1078   	}
;;;1079   else	if((AUSW_MAIN==22010)||(AUSW_MAIN==22011) )
;;;1080   	{
;;;1081   	temp_SL=(signed long)net_buff_;
;;;1082   	temp_SL*=Kunet;
;;;1083   	temp_SL/=35000L;
;;;1084   	net_U=(signed short)temp_SL;
;;;1085   	
;;;1086   	}
;;;1087   else
;;;1088   	{
;;;1089   	temp_SL=(signed long)net_buff_;
;;;1090   	temp_SL*=Kunet;
;;;1091   	#ifdef _ACDC_
;;;1092   	temp_SL/=500L;
000d54  f44f78fa          MOV      r8,#0x1f4
000d58  9101              STR      r1,[sp,#4]            ;1010
000d5a  2807              CMP      r0,#7                 ;1010
000d5c  d036              BEQ      |L1.3532|
000d5e  4639              MOV      r1,r7                 ;1039
000d60  4bf4              LDR      r3,|L1.4404|
000d62  8d0a              LDRH     r2,[r1,#0x28]         ;1039
000d64  49eb              LDR      r1,|L1.4372|
000d66  f8df93b4          LDR      r9,|L1.4380|
000d6a  f2417a70          MOV      r10,#0x1770           ;1018
000d6e  f9b11000          LDRSH    r1,[r1,#0]            ;1017
000d72  f9b99000          LDRSH    r9,[r9,#0]            ;1022
000d76  434a              MULS     r2,r1,r2              ;1040
000d78  f9b31006          LDRSH    r1,[r3,#6]            ;1044
000d7c  f9b33014          LDRSH    r3,[r3,#0x14]         ;1049
000d80  fb01f109          MUL      r1,r1,r9              ;1045
000d84  f8df9398          LDR      r9,|L1.4384|
000d88  fb91f1fa          SDIV     r1,r1,r10             ;1046
000d8c  f9b99000          LDRSH    r9,[r9,#0]            ;1027
000d90  48e7              LDR      r0,|L1.4400|
000d92  fb03f309          MUL      r3,r3,r9              ;1050
000d96  fb93f3fa          SDIV     r3,r3,r10             ;1051
000d9a  8800              LDRH     r0,[r0,#0]            ;1037  ; AUSW_MAIN
000d9c  b209              SXTH     r1,r1                 ;1047
000d9e  b21b              SXTH     r3,r3                 ;1052
000da0  42b0              CMP      r0,r6                 ;1037
000da2  d155              BNE      |L1.3664|
000da4  f44f607a          MOV      r0,#0xfa0             ;1041
000da8  fb92f0f0          SDIV     r0,r2,r0              ;1041
000dac  b200              SXTH     r0,r0                 ;1042
000dae  f8ac0000          STRH     r0,[r12,#0]           ;1042
000db2  8029              STRH     r1,[r5,#0]            ;1047
000db4  8023              STRH     r3,[r4,#0]            ;1052
000db6  4ae0              LDR      r2,|L1.4408|
000db8  8010              STRH     r0,[r2,#0]            ;1054
000dba  4281              CMP      r1,r0                 ;1055
000dbc  da00              BGE      |L1.3520|
000dbe  8011              STRH     r1,[r2,#0]            ;1055
                  |L1.3520|
000dc0  f9b20000          LDRSH    r0,[r2,#0]            ;1056  ; net_U
000dc4  4283              CMP      r3,r0                 ;1056
000dc6  da7c              BGE      |L1.3778|
000dc8  8013              STRH     r3,[r2,#0]            ;1056
000dca  e07a              B        |L1.3778|
                  |L1.3532|
000dcc  48db              LDR      r0,|L1.4412|
000dce  4bd7              LDR      r3,|L1.4396|
000dd0  7801              LDRB     r1,[r0,#0]            ;1012  ; bps
000dd2  7842              LDRB     r2,[r0,#1]            ;1012  ; bps
000dd4  f1030390          ADD      r3,r3,#0x90           ;1012
000dd8  eb012102          ADD      r1,r1,r2,LSL #8       ;1012
000ddc  fa1ff981          UXTH     r9,r1                 ;1012
000de0  f8a39000          STRH     r9,[r3,#0]            ;1012
000de4  7881              LDRB     r1,[r0,#2]            ;1013  ; bps
000de6  78c2              LDRB     r2,[r0,#3]            ;1013  ; bps
000de8  eb012102          ADD      r1,r1,r2,LSL #8       ;1013
000dec  b28a              UXTH     r2,r1                 ;1013
000dee  805a              STRH     r2,[r3,#2]            ;1013
000df0  7901              LDRB     r1,[r0,#4]            ;1014  ; bps
000df2  f890e005          LDRB     lr,[r0,#5]            ;1014  ; bps
000df6  eb01210e          ADD      r1,r1,lr,LSL #8       ;1014
000dfa  b289              UXTH     r1,r1                 ;1014
000dfc  8099              STRH     r1,[r3,#4]            ;1014
000dfe  fb01f10a          MUL      r1,r1,r10             ;1017
000e02  f2417370          MOV      r3,#0x1770            ;1018
000e06  fb91f1f3          SDIV     r1,r1,r3              ;1018
000e0a  fa0ffa81          SXTH     r10,r1                ;1019
000e0e  f8aca000          STRH     r10,[r12,#0]          ;1019
000e12  fb02f20b          MUL      r2,r2,r11             ;1022
000e16  fb92f1f3          SDIV     r1,r2,r3              ;1023
000e1a  b209              SXTH     r1,r1                 ;1024
000e1c  8029              STRH     r1,[r5,#0]            ;1024
000e1e  9a01              LDR      r2,[sp,#4]            ;1027
000e20  fb09f902          MUL      r9,r9,r2              ;1027
000e24  fb99f2f3          SDIV     r2,r9,r3              ;1028
000e28  b212              SXTH     r2,r2                 ;1029
000e2a  8022              STRH     r2,[r4,#0]            ;1029
000e2c  7983              LDRB     r3,[r0,#6]            ;1031  ; bps
000e2e  79c0              LDRB     r0,[r0,#7]            ;1031  ; bps
000e30  eb032000          ADD      r0,r3,r0,LSL #8       ;1031
000e34  4bc2              LDR      r3,|L1.4416|
000e36  8018              STRH     r0,[r3,#0]            ;1031
000e38  48bf              LDR      r0,|L1.4408|
000e3a  f8a0a000          STRH     r10,[r0,#0]           ;1033
000e3e  4551              CMP      r1,r10                ;1034
000e40  da00              BGE      |L1.3652|
000e42  8001              STRH     r1,[r0,#0]            ;1034
                  |L1.3652|
000e44  f9b01000          LDRSH    r1,[r0,#0]            ;1035  ; net_U
000e48  428a              CMP      r2,r1                 ;1035
000e4a  da3a              BGE      |L1.3778|
000e4c  8002              STRH     r2,[r0,#0]            ;1035
000e4e  e038              B        |L1.3778|
                  |L1.3664|
000e50  f5a049ac          SUB      r9,r0,#0x5600         ;1058
000e54  f1b9092f          SUBS     r9,r9,#0x2f           ;1058
000e58  d008              BEQ      |L1.3692|
000e5a  f1190928          ADDS     r9,r9,#0x28           ;1058
000e5e  d005              BEQ      |L1.3692|
000e60  f1b90914          SUBS     r9,r9,#0x14           ;1058
000e64  d002              BEQ      |L1.3692|
000e66  f1190919          ADDS     r9,r9,#0x19           ;1058
000e6a  d113              BNE      |L1.3732|
                  |L1.3692|
000e6c  f6494040          MOV      r0,#0x9c40            ;1062
000e70  fb92f0f0          SDIV     r0,r2,r0              ;1062
000e74  b200              SXTH     r0,r0                 ;1063
000e76  f8ac0000          STRH     r0,[r12,#0]           ;1063
000e7a  8029              STRH     r1,[r5,#0]            ;1068
000e7c  8023              STRH     r3,[r4,#0]            ;1073
000e7e  4aae              LDR      r2,|L1.4408|
000e80  8010              STRH     r0,[r2,#0]            ;1075
000e82  4281              CMP      r1,r0                 ;1076
000e84  da00              BGE      |L1.3720|
000e86  8011              STRH     r1,[r2,#0]            ;1076
                  |L1.3720|
000e88  f9b20000          LDRSH    r0,[r2,#0]            ;1077  ; net_U
000e8c  4283              CMP      r3,r0                 ;1077
000e8e  da18              BGE      |L1.3778|
000e90  8013              STRH     r3,[r2,#0]            ;1077
000e92  e016              B        |L1.3778|
                  |L1.3732|
000e94  49ab              LDR      r1,|L1.4420|
000e96  f5a043aa          SUB      r3,r0,#0x5500         ;1079
000e9a  f9b12000          LDRSH    r2,[r1,#0]            ;1082
000e9e  49a3              LDR      r1,|L1.4396|
000ea0  8d09              LDRH     r1,[r1,#0x28]         ;1039
000ea2  4351              MULS     r1,r2,r1              ;1082
000ea4  3bfa              SUBS     r3,r3,#0xfa           ;1079
000ea6  d001              BEQ      |L1.3756|
000ea8  1e5a              SUBS     r2,r3,#1              ;1079
000eaa  d106              BNE      |L1.3770|
                  |L1.3756|
000eac  f64800b8          MOV      r0,#0x88b8            ;1083
000eb0  fb91f0f0          SDIV     r0,r1,r0              ;1083
000eb4  49a0              LDR      r1,|L1.4408|
000eb6  8008              STRH     r0,[r1,#0]            ;1084
000eb8  e003              B        |L1.3778|
                  |L1.3770|
000eba  fb91f0f8          SDIV     r0,r1,r8
;;;1093   	#else
;;;1094   	temp_SL/=5000L;
;;;1095   	#endif
;;;1096   	net_U=(signed short)temp_SL;
000ebe  499e              LDR      r1,|L1.4408|
000ec0  8008              STRH     r0,[r1,#0]
                  |L1.3778|
;;;1097   	
;;;1098   	}
;;;1099   if(bps[11]._device!=dNET_METR) net_F3=net_F;
000ec2  9802              LDR      r0,[sp,#8]
000ec4  2807              CMP      r0,#7
000ec6  d003              BEQ      |L1.3792|
000ec8  489f              LDR      r0,|L1.4424|
000eca  8801              LDRH     r1,[r0,#0]  ; net_F
000ecc  489c              LDR      r0,|L1.4416|
000ece  8001              STRH     r1,[r0,#0]
                  |L1.3792|
;;;1100   #endif
;;;1101   
;;;1102   #ifdef UKU_TELECORE2015
;;;1103   //íàïðÿæåíèå ñåòè
;;;1104   temp_SL=(signed long)net_buff_;
;;;1105   temp_SL*=Kunet;
;;;1106   temp_SL/=110000L;
;;;1107   net_U=(signed short)temp_SL;
;;;1108   #endif
;;;1109   
;;;1110   #ifdef UKU_TELECORE2017
;;;1111   //íàïðÿæåíèå ñåòè
;;;1112   temp_SL=(signed long)net_buff_;
;;;1113   temp_SL*=Kunet;
;;;1114   temp_SL/=110000L;
;;;1115   net_U=(signed short)temp_SL;
;;;1116   #endif
;;;1117   
;;;1118   //Íàïðÿæåíèÿ áàòàðåé
;;;1119   temp_SL=(signed long)adc_buff_[0];
000ed0  f8dfa260          LDR      r10,|L1.4404|
000ed4  f9ba1000          LDRSH    r1,[r10,#0]  ; adc_buff_
;;;1120   temp_SL*=Kubat[0];
000ed8  4b9c              LDR      r3,|L1.4428|
000eda  f9b30000          LDRSH    r0,[r3,#0]  ; Kubat
000ede  4348              MULS     r0,r1,r0
;;;1121   temp_SL/=2000L;
000ee0  f44f65fa          MOV      r5,#0x7d0
000ee4  fb90f0f5          SDIV     r0,r0,r5
;;;1122   bat[0]._Ub=(signed short)temp_SL;
000ee8  4c99              LDR      r4,|L1.4432|
000eea  8060              STRH     r0,[r4,#2]
;;;1123   
;;;1124   #ifdef UKU_220
;;;1125   //Íàïðÿæåíèÿ áàòàðåé
;;;1126   temp_SL=(signed long)adc_buff_[0];
;;;1127   temp_SL*=Kubat[0];
;;;1128   temp_SL/=400L;
;;;1129   bat[0]._Ub=(signed short)temp_SL;
;;;1130   #endif
;;;1131   
;;;1132   #ifdef UKU_220_V2
;;;1133   //Íàïðÿæåíèÿ áàòàðåé
;;;1134   temp_SL=(signed long)adc_buff_[0];
;;;1135   temp_SL*=Kubat[0];
;;;1136   temp_SL/=400L;
;;;1137   bat[0]._Ub=(signed short)temp_SL;
;;;1138   #endif
;;;1139   
;;;1140   temp_SL=(signed long)adc_buff_[4];
000eec  f9ba1008          LDRSH    r1,[r10,#8]  ; adc_buff_
;;;1141   temp_SL*=Kubatm[0];
000ef0  4a98              LDR      r2,|L1.4436|
000ef2  f9b20000          LDRSH    r0,[r2,#0]  ; Kubatm
000ef6  fb00f001          MUL      r0,r0,r1
;;;1142   temp_SL/=700L;
000efa  f44f712f          MOV      r1,#0x2bc
000efe  fb90f0f1          SDIV     r0,r0,r1
;;;1143   bat[0]._Ubm=(signed short)temp_SL;
000f02  80a0              STRH     r0,[r4,#4]
;;;1144   
;;;1145   #ifdef UKU_KONTUR
;;;1146   temp_SL=(signed long)adc_buff_[4];
;;;1147   temp_SL*=Kubatm[0];
;;;1148   temp_SL/=2000L;
;;;1149   bat[0]._Ubm=(signed short)temp_SL;
;;;1150   #endif
;;;1151   
;;;1152   temp_SL=(signed long)adc_buff_[12];
000f04  f9bac018          LDRSH    r12,[r10,#0x18]  ; adc_buff_
;;;1153   temp_SL*=Kubat[1];
000f08  f9b30002          LDRSH    r0,[r3,#2]  ; Kubat
000f0c  fb00f00c          MUL      r0,r0,r12
;;;1154   temp_SL/=2000L;
000f10  fb90f0f5          SDIV     r0,r0,r5
;;;1155   bat[1]._Ub=(signed short)temp_SL;
000f14  f8a4004e          STRH     r0,[r4,#0x4e]
;;;1156   
;;;1157   #ifdef UKU_220
;;;1158   temp_SL=(signed long)adc_buff_[12];
;;;1159   temp_SL*=Kubat[1];
;;;1160   temp_SL/=400L;
;;;1161   bat[1]._Ub=(signed short)temp_SL;
;;;1162   #endif
;;;1163   
;;;1164   #ifdef UKU_220_V2
;;;1165   temp_SL=(signed long)adc_buff_[12];
;;;1166   temp_SL*=Kubat[1];
;;;1167   temp_SL/=400L;
;;;1168   bat[1]._Ub=(signed short)temp_SL;
;;;1169   #endif
;;;1170   
;;;1171   temp_SL=(signed long)adc_buff_[1];
000f18  f9ba3002          LDRSH    r3,[r10,#2]  ; adc_buff_
;;;1172   temp_SL*=Kubatm[1];
000f1c  f9b20002          LDRSH    r0,[r2,#2]  ; Kubatm
000f20  fb00f003          MUL      r0,r0,r3
;;;1173   temp_SL/=700L;
000f24  fb90f0f1          SDIV     r0,r0,r1
;;;1174   bat[1]._Ubm=(signed short)temp_SL;
000f28  f8a40050          STRH     r0,[r4,#0x50]
;;;1175   #ifdef UKU_KONTUR
;;;1176   temp_SL=(signed long)adc_buff_[1];
;;;1177   temp_SL*=Kubatm[1];
;;;1178   temp_SL/=2000L;
;;;1179   bat[1]._Ubm=(signed short)temp_SL;
;;;1180   #endif
;;;1181   
;;;1182   #ifdef UKU_TELECORE2015
;;;1183   temp_SL=(signed long)adc_buff_[2];
;;;1184   temp_SL*=Kubat[0];
;;;1185   temp_SL/=2000L;
;;;1186   bat[0]._Ub=(signed short)temp_SL;
;;;1187   #endif
;;;1188   
;;;1189   /*
;;;1190   //Òîêè áàòàðåé
;;;1191   if(!mess_find_unvol(MESS2MATEMAT))
;;;1192   	{
;;;1193   	temp_SL=(signed long)ad7705_buff_[0];
;;;1194   	temp_SL-=(signed long)Kibat0[0];
;;;1195   	temp_SL*=(signed long)Kibat1[0];
;;;1196   	if((AUSW_MAIN==24120)||(AUSW_MAIN==24210))temp_SL/=300L;
;;;1197   	else temp_SL/=1000L;
;;;1198   	bat[0]._Ib=(signed short)temp_SL;
;;;1199   
;;;1200   	temp_SL=(signed long)ad7705_buff_[1];
;;;1201   	temp_SL-=(signed long)Kibat0[1];
;;;1202   	temp_SL*=(signed long)Kibat1[1];
;;;1203   	if((AUSW_MAIN==24120)||(AUSW_MAIN==24210))temp_SL/=300L;
;;;1204   	else temp_SL/=1000L;
;;;1205   	bat[1]._Ib=(signed short)temp_SL;
;;;1206   	}
;;;1207   */
;;;1208   
;;;1209   
;;;1210   //Òîêè áàòàðåé
;;;1211   if(!mess_find_unvol(MESS2MATEMAT))
000f2c  f04f00dc          MOV      r0,#0xdc
000f30  f7fffffe          BL       mess_find_unvol
;;;1212   	{
;;;1213   	temp_SL=(signed long)ad7705_buff_[0];
;;;1214   	temp_SL-=(signed long)Kibat0[0];
;;;1215   	temp_SL*=(signed long)Kibat1[0];
;;;1216   	if((AUSW_MAIN==24120)||(AUSW_MAIN==24210))temp_SL/=300L;
;;;1217   	else if((AUSW_MAIN==22010)||(AUSW_MAIN==22035)||(AUSW_MAIN==22033))temp_SL/=2000L;
000f34  f2456913          MOV      r9,#0x5613
000f38  bbf0              CBNZ     r0,|L1.4024|
000f3a  f8dfc21c          LDR      r12,|L1.4440|
000f3e  f8bc0000          LDRH     r0,[r12,#0]           ;1213  ; ad7705_buff_
000f42  f8dfb218          LDR      r11,|L1.4444|
000f46  f8bb1000          LDRH     r1,[r11,#0]           ;1214  ; Kibat0
000f4a  eba00001          SUB      r0,r0,r1              ;1214
000f4e  4a84              LDR      r2,|L1.4448|
000f50  f9b21000          LDRSH    r1,[r2,#0]            ;1215  ; Kibat1
000f54  fb01f100          MUL      r1,r1,r0              ;1215
000f58  4875              LDR      r0,|L1.4400|
000f5a  f6456338          MOV      r3,#0x5e38            ;1216
000f5e  8800              LDRH     r0,[r0,#0]            ;1216  ; AUSW_MAIN
000f60  4298              CMP      r0,r3                 ;1216
000f62  d004              BEQ      |L1.3950|
000f64  f5a04ebc          SUB      lr,r0,#0x5e00         ;1216
000f68  f1be0e92          SUBS     lr,lr,#0x92           ;1216
000f6c  d104              BNE      |L1.3960|
                  |L1.3950|
000f6e  f44f7e96          MOV      lr,#0x12c             ;1216
000f72  fb91f1fe          SDIV     r1,r1,lr              ;1216
000f76  e00f              B        |L1.3992|
                  |L1.3960|
000f78  f5a04ea8          SUB      lr,r0,#0x5400
000f7c  f5be7efd          SUBS     lr,lr,#0x1fa
000f80  d003              BEQ      |L1.3978|
000f82  4548              CMP      r0,r9
000f84  d001              BEQ      |L1.3978|
000f86  42b0              CMP      r0,r6
000f88  d102              BNE      |L1.3984|
                  |L1.3978|
000f8a  fb91f1f5          SDIV     r1,r1,r5
000f8e  e003              B        |L1.3992|
                  |L1.3984|
;;;1218   	else temp_SL/=1000L;
000f90  f44f7e7a          MOV      lr,#0x3e8
000f94  fb91f1fe          SDIV     r1,r1,lr
                  |L1.3992|
;;;1219   	#ifdef UKU_TELECORE2015
;;;1220   	temp_SL/=2L;
;;;1221   	//temp_SL=-temp_SL;
;;;1222   	#endif
;;;1223   	//#ifdef UKU_TELECORE2017
;;;1224   	//temp_SL/=-2L;
;;;1225   	//temp_SL=-temp_SL;
;;;1226   	//#endif
;;;1227   	bat[0]._Ib=(signed short)temp_SL;
000f98  8121              STRH     r1,[r4,#8]
;;;1228   
;;;1229   	temp_SL=(signed long)ad7705_buff_[1];
000f9a  f8bc1002          LDRH     r1,[r12,#2]  ; ad7705_buff_
;;;1230   	temp_SL-=(signed long)Kibat0[1];
000f9e  f8bbc002          LDRH     r12,[r11,#2]  ; Kibat0
000fa2  eba10c0c          SUB      r12,r1,r12
;;;1231   	temp_SL*=(signed long)Kibat1[1];
000fa6  f9b21002          LDRSH    r1,[r2,#2]  ; Kibat1
000faa  fb01f10c          MUL      r1,r1,r12
;;;1232   	if((AUSW_MAIN==24120)||(AUSW_MAIN==24210))temp_SL/=300L;
000fae  4298              CMP      r0,r3
000fb0  d005              BEQ      |L1.4030|
000fb2  f5a042bc          SUB      r2,r0,#0x5e00
000fb6  e000              B        |L1.4026|
                  |L1.4024|
000fb8  e017              B        |L1.4074|
                  |L1.4026|
000fba  3a92              SUBS     r2,r2,#0x92
000fbc  d104              BNE      |L1.4040|
                  |L1.4030|
000fbe  f44f7096          MOV      r0,#0x12c
000fc2  fb91f0f0          SDIV     r0,r1,r0
000fc6  e00e              B        |L1.4070|
                  |L1.4040|
;;;1233   	else if((AUSW_MAIN==22010)||(AUSW_MAIN==22035)||(AUSW_MAIN==22033))temp_SL/=2000L;
000fc8  f5a042aa          SUB      r2,r0,#0x5500
000fcc  3afa              SUBS     r2,r2,#0xfa
000fce  d003              BEQ      |L1.4056|
000fd0  4548              CMP      r0,r9
000fd2  d001              BEQ      |L1.4056|
000fd4  42b0              CMP      r0,r6
000fd6  d102              BNE      |L1.4062|
                  |L1.4056|
000fd8  fb91f0f5          SDIV     r0,r1,r5
000fdc  e003              B        |L1.4070|
                  |L1.4062|
;;;1234   	else temp_SL/=1000L;
000fde  f44f707a          MOV      r0,#0x3e8
000fe2  fb91f0f0          SDIV     r0,r1,r0
                  |L1.4070|
;;;1235   	bat[1]._Ib=(signed short)temp_SL;
000fe6  f8a40054          STRH     r0,[r4,#0x54]
                  |L1.4074|
;;;1236   	}
;;;1237   
;;;1238   
;;;1239   
;;;1240   
;;;1241   
;;;1242   //Òåìïåðàòóðû áàòàðåé
;;;1243   
;;;1244   #ifdef UKU_KONTUR
;;;1245   if((adc_buff_[6]>800)&&(adc_buff_[6]<3800))bat[0]._nd=0;
;;;1246   else bat[0]._nd=1;
;;;1247   temp_SL=(signed long)adc_buff_[6];
;;;1248   temp_SL*=Ktbat[0];
;;;1249   temp_SL/=20000L;
;;;1250   temp_SL-=273L;
;;;1251   bat[0]._Tb=(signed short)temp_SL;
;;;1252   #else
;;;1253   if((adc_buff_[6]>800)&&(adc_buff_[6]<3800))bat[0]._nd=0;
000fea  f9ba000c          LDRSH    r0,[r10,#0xc]  ; adc_buff_
000fee  46d6              MOV      lr,r10
000ff0  4684              MOV      r12,r0
000ff2  f2a03021          SUB      r0,r0,#0x321
000ff6  f64031b7          MOV      r1,#0xbb7
000ffa  2300              MOVS     r3,#0
;;;1254   else bat[0]._nd=1;
000ffc  f04f0a01          MOV      r10,#1
001000  9000              STR      r0,[sp,#0]            ;1253
001002  4288              CMP      r0,r1                 ;1253
001004  d201              BCS      |L1.4106|
001006  7323              STRB     r3,[r4,#0xc]          ;1253
001008  e001              B        |L1.4110|
                  |L1.4106|
00100a  f884a00c          STRB     r10,[r4,#0xc]
                  |L1.4110|
;;;1255   temp_SL=(signed long)adc_buff_[6];
;;;1256   temp_SL*=Ktbat[0];
00100e  4855              LDR      r0,|L1.4452|
001010  f9b02000          LDRSH    r2,[r0,#0]  ; Ktbat
001014  fb02f20c          MUL      r2,r2,r12
;;;1257   temp_SL/=20000L;
001018  f6446020          MOV      r0,#0x4e20
00101c  fb92f2f0          SDIV     r2,r2,r0
;;;1258   temp_SL-=273L;
001020  f2a21211          SUB      r2,r2,#0x111
;;;1259   bat[0]._Tb=(signed short)temp_SL;
001024  8162              STRH     r2,[r4,#0xa]
;;;1260   #endif
;;;1261   
;;;1262   #ifdef UKU_KONTUR
;;;1263   if((adc_buff_[7]>800)&&(adc_buff_[7]<3800))bat[1]._nd=0;
;;;1264   else bat[1]._nd=1;
;;;1265   temp_SL=(signed long)adc_buff_[7];
;;;1266   temp_SL*=Ktbat[1];
;;;1267   temp_SL/=20000L;
;;;1268   temp_SL-=273L;
;;;1269   bat[1]._Tb=(signed short)temp_SL;
;;;1270   #else
;;;1271   if((adc_buff_[7]>800)&&(adc_buff_[7]<3800))bat[1]._nd=0;
001026  f9be200e          LDRSH    r2,[lr,#0xe]  ; adc_buff_
00102a  f64031b7          MOV      r1,#0xbb7
00102e  f2a23b21          SUB      r11,r2,#0x321
001032  458b              CMP      r11,r1
001034  d202              BCS      |L1.4156|
001036  f8843058          STRB     r3,[r4,#0x58]
00103a  e001              B        |L1.4160|
                  |L1.4156|
;;;1272   else bat[1]._nd=1;
00103c  f884a058          STRB     r10,[r4,#0x58]
                  |L1.4160|
;;;1273   temp_SL=(signed long)adc_buff_[7];
;;;1274   temp_SL*=Ktbat[1];
001040  4948              LDR      r1,|L1.4452|
001042  f9b11002          LDRSH    r1,[r1,#2]  ; Ktbat
001046  4351              MULS     r1,r2,r1
;;;1275   temp_SL/=20000L;
001048  f6446020          MOV      r0,#0x4e20
00104c  fb91f0f0          SDIV     r0,r1,r0
;;;1276   temp_SL-=273L;
001050  f2a01011          SUB      r0,r0,#0x111
;;;1277   bat[1]._Tb=(signed short)temp_SL;
001054  493e              LDR      r1,|L1.4432|
001056  f8a10056          STRH     r0,[r1,#0x56]
;;;1278   #endif
;;;1279   
;;;1280   #ifdef UKU_6U
;;;1281   
;;;1282   if(NUMMAKB==2)
;;;1283   	{
;;;1284   	if(makb[0]._cnt<5)
;;;1285   		{
;;;1286   		if(makb[0]._T_nd[0]==0)
;;;1287   			{
;;;1288   			bat[0]._Tb=makb[0]._T[0];
;;;1289   			bat[0]._nd=0;
;;;1290   			}
;;;1291   		}
;;;1292   
;;;1293   	if(makb[1]._cnt<5)
;;;1294   		{
;;;1295   		if(makb[1]._T_nd[0]==0)
;;;1296   			{
;;;1297   			bat[1]._Tb=makb[1]._T[0];
;;;1298   			bat[1]._nd=0;
;;;1299   			}
;;;1300   		}
;;;1301   
;;;1302   	}
;;;1303   else if(NUMMAKB==4)
;;;1304   	{
;;;1305   	signed short temp_t;
;;;1306   	temp_t=-20;
;;;1307   	if(makb[0]._cnt<5)
;;;1308   		{
;;;1309   		if(makb[0]._T_nd[0]==0)
;;;1310   			{
;;;1311   			temp_t=makb[0]._T[0];
;;;1312   			bat[0]._nd=0;
;;;1313   			}
;;;1314   		}
;;;1315   	if(makb[1]._cnt<5)
;;;1316   		{
;;;1317   		if(makb[1]._T_nd[0]==0)
;;;1318   			{
;;;1319   			if(temp_t<makb[1]._T[0])
;;;1320   				{
;;;1321   				bat[0]._nd=0;
;;;1322   				temp_t=makb[1]._T[0];
;;;1323   				}
;;;1324   			}
;;;1325   		}
;;;1326   	if(temp_t!=-20)bat[0]._Tb = temp_t;
;;;1327   
;;;1328    	temp_t=-20;
;;;1329   	if(makb[2]._cnt<5)
;;;1330   		{
;;;1331   		if(makb[2]._T_nd[0]==0)
;;;1332   			{
;;;1333   			temp_t=makb[2]._T[0];
;;;1334   			bat[1]._nd=0;
;;;1335   			}
;;;1336   		}
;;;1337   	if(makb[3]._cnt<5)
;;;1338   		{
;;;1339   		if(makb[3]._T_nd[0]==0)
;;;1340   			{
;;;1341   			if(temp_t<makb[3]._T[0])
;;;1342   				{
;;;1343   				bat[1]._nd=0;
;;;1344   				temp_t=makb[3]._T[0];
;;;1345   				}
;;;1346   			}
;;;1347   		}
;;;1348   	if(temp_t!=-20)bat[1]._Tb = temp_t;
;;;1349   	}
;;;1350   
;;;1351   #endif
;;;1352   
;;;1353   
;;;1354   //Íàïðÿæåíèå íàãðóçêè
;;;1355   temp_SL=(signed long)adc_buff_[2];
00105a  f9be1004          LDRSH    r1,[lr,#4]  ; adc_buff_
;;;1356   temp_SL*=Kuload;
00105e  4842              LDR      r0,|L1.4456|
001060  f9b00000          LDRSH    r0,[r0,#0]  ; Kuload
001064  fb01f000          MUL      r0,r1,r0
;;;1357   temp_SL/=2000L;
001068  f44f62fa          MOV      r2,#0x7d0
00106c  fb90f0f2          SDIV     r0,r0,r2
;;;1358   load_U=(signed short)temp_SL;
001070  4c3e              LDR      r4,|L1.4460|
001072  8020              STRH     r0,[r4,#0]
;;;1359   
;;;1360   #ifdef UKU_220 
;;;1361   //Íàïðÿæåíèå íàãðóçêè
;;;1362   temp_SL=(signed long)adc_buff_[2];
;;;1363   temp_SL*=Kuload;
;;;1364   temp_SL/=350L;
;;;1365   load_U=(signed short)temp_SL;
;;;1366   #endif
;;;1367   
;;;1368   #ifdef UKU_220_V2 
;;;1369   //Íàïðÿæåíèå íàãðóçêè
;;;1370   temp_SL=(signed long)adc_buff_[2];
;;;1371   temp_SL*=Kuload;
;;;1372   temp_SL/=350L;
;;;1373   load_U=(signed short)temp_SL;
;;;1374   #endif
;;;1375   
;;;1376   #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;1377   //Íàïðÿæåíèå øèíû
;;;1378   temp_SL=(signed long)adc_buff_[1];
001074  f9be2002          LDRSH    r2,[lr,#2]  ; adc_buff_
;;;1379   temp_SL*=Kuout;
001078  483d              LDR      r0,|L1.4464|
00107a  f9b00000          LDRSH    r0,[r0,#0]  ; Kuout
00107e  fb02f200          MUL      r2,r2,r0
;;;1380   if(AUSW_MAIN==22010)temp_SL/=400L;
001082  482b              LDR      r0,|L1.4400|
001084  f24555fa          MOV      r5,#0x55fa
001088  8800              LDRH     r0,[r0,#0]  ; AUSW_MAIN
00108a  42a8              CMP      r0,r5
00108c  d104              BNE      |L1.4248|
00108e  f44f75c8          MOV      r5,#0x190
001092  fb92f2f5          SDIV     r2,r2,r5
001096  e001              B        |L1.4252|
                  |L1.4248|
;;;1381   else temp_SL/=500L;
001098  fb92f2f8          SDIV     r2,r2,r8
                  |L1.4252|
;;;1382   out_U=(signed short)temp_SL;
00109c  fa0ffb82          SXTH     r11,r2
0010a0  4a34              LDR      r2,|L1.4468|
0010a2  f8a2b000          STRH     r11,[r2,#0]
;;;1383   load_U=out_U;
0010a6  f8a4b000          STRH     r11,[r4,#0]
;;;1384   
;;;1385   //Íàïðÿæåíèå âûïðÿìèòåëåé
;;;1386   temp_SL=(signed long)adc_buff_[2];
;;;1387   temp_SL*=Kubps;
0010aa  4a33              LDR      r2,|L1.4472|
0010ac  f9b22000          LDRSH    r2,[r2,#0]  ; Kubps
0010b0  fb01f102          MUL      r1,r1,r2
;;;1388   if(AUSW_MAIN==22010)temp_SL/=400L;
0010b4  d104              BNE      |L1.4288|
0010b6  f44f72c8          MOV      r2,#0x190
0010ba  fb91f1f2          SDIV     r1,r1,r2
0010be  e001              B        |L1.4292|
                  |L1.4288|
;;;1389   else temp_SL/=500L;
0010c0  fb91f1f8          SDIV     r1,r1,r8
                  |L1.4292|
;;;1390   bps_U=(signed short)temp_SL;
0010c4  4d2d              LDR      r5,|L1.4476|
0010c6  b209              SXTH     r1,r1
0010c8  8029              STRH     r1,[r5,#0]
;;;1391   
;;;1392   if(bps_U<100)
0010ca  2964              CMP      r1,#0x64
0010cc  da18              BGE      |L1.4352|
;;;1393   	{
;;;1394   	char i;
;;;1395   	for(i=0;i<NUMIST;i++)
0010ce  f04f0100          MOV      r1,#0
0010d2  4a2b              LDR      r2,|L1.4480|
0010d4  f8dfe038          LDR      lr,|L1.4368|
0010d8  f9b28000          LDRSH    r8,[r2,#0]
0010dc  e00e              B        |L1.4348|
                  |L1.4318|
;;;1396   		{
;;;1397   		if(bps[i]._Uin>bps_U)bps_U=bps[i]._Uin;
0010de  ebc102c1          RSB      r2,r1,r1,LSL #3
0010e2  eb021201          ADD      r2,r2,r1,LSL #4
0010e6  eb0e0282          ADD      r2,lr,r2,LSL #2
0010ea  f9b54000          LDRSH    r4,[r5,#0]  ; bps_U
0010ee  6a12              LDR      r2,[r2,#0x20]
0010f0  42a2              CMP      r2,r4
0010f2  dd00              BLE      |L1.4342|
0010f4  802a              STRH     r2,[r5,#0]
                  |L1.4342|
0010f6  f1010101          ADD      r1,r1,#1              ;1395
0010fa  b2c9              UXTB     r1,r1                 ;1395
                  |L1.4348|
0010fc  4541              CMP      r1,r8                 ;1395
0010fe  dbee              BLT      |L1.4318|
                  |L1.4352|
;;;1398   		}
;;;1399   	}
;;;1400   
;;;1401   //Ñóììàðíûé òîê âûïðÿìèòåëåé
;;;1402   temp_SL=0;
001100  f04f0500          MOV      r5,#0
;;;1403   for (i=0;i<NUMIST;i++)
001104  4629              MOV      r1,r5
001106  4a1e              LDR      r2,|L1.4480|
001108  4c01              LDR      r4,|L1.4368|
00110a  f9b22000          LDRSH    r2,[r2,#0]            ;1395
00110e  e045              B        |L1.4508|
                  |L1.4368|
                          DCD      bps
                  |L1.4372|
                          DCD      KunetA
                  |L1.4376|
                          DCD      net_Ua
                  |L1.4380|
                          DCD      KunetB
                  |L1.4384|
                          DCD      KunetC
                  |L1.4388|
                          DCD      net_Ub
                  |L1.4392|
                          DCD      net_Uc
                  |L1.4396|
                          DCD      ||area_number.23||
                  |L1.4400|
                          DCD      AUSW_MAIN
                  |L1.4404|
                          DCD      ||.bss||+0x400
                  |L1.4408|
                          DCD      net_U
                  |L1.4412|
                          DCD      bps+0x3fa
                  |L1.4416|
                          DCD      net_F3
                  |L1.4420|
                          DCD      Kunet
                  |L1.4424|
                          DCD      net_F
                  |L1.4428|
                          DCD      Kubat
                  |L1.4432|
                          DCD      bat
                  |L1.4436|
                          DCD      Kubatm
                  |L1.4440|
                          DCD      ad7705_buff_
                  |L1.4444|
                          DCD      Kibat0
                  |L1.4448|
                          DCD      Kibat1
                  |L1.4452|
                          DCD      Ktbat
                  |L1.4456|
                          DCD      Kuload
                  |L1.4460|
                          DCD      load_U
                  |L1.4464|
                          DCD      Kuout
                  |L1.4468|
                          DCD      out_U
                  |L1.4472|
                          DCD      Kubps
                  |L1.4476|
                          DCD      bps_U
                  |L1.4480|
                          DCD      NUMIST
                  |L1.4484|
;;;1404   	{
;;;1405   	temp_SL+=((signed long)bps[i]._Ii);
001184  ebc108c1          RSB      r8,r1,r1,LSL #3
001188  eb081801          ADD      r8,r8,r1,LSL #4
00118c  eb040888          ADD      r8,r4,r8,LSL #2
001190  f8d88024          LDR      r8,[r8,#0x24]
001194  4445              ADD      r5,r5,r8
001196  f1010101          ADD      r1,r1,#1              ;1403
00119a  b2c9              UXTB     r1,r1                 ;1403
                  |L1.4508|
00119c  4291              CMP      r1,r2                 ;1403
00119e  dbf1              BLT      |L1.4484|
;;;1406   	}
;;;1407   bps_I=(signed short)temp_SL;
0011a0  49ff              LDR      r1,|L1.5536|
0011a2  800d              STRH     r5,[r1,#0]
;;;1408   
;;;1409   
;;;1410   #endif
;;;1411   
;;;1412   
;;;1413   #ifdef UKU_KONTUR
;;;1414   //Âíåøíèé äàò÷èê òåìïåðàòóðû ¹1(òåìïåðàòóðà âíåøíåãî âîçäóõà)
;;;1415   if((adc_buff_[5]>800)&&(adc_buff_[5]<3800))ND_EXT[0]=0;
;;;1416   else ND_EXT[0]=1;
;;;1417   temp_SL=(signed long)adc_buff_[5];
;;;1418   temp_SL*=Ktext[0];
;;;1419   temp_SL/=20000L;
;;;1420   temp_SL-=273L;
;;;1421   t_ext[0]=(signed short)temp_SL;
;;;1422   #else 
;;;1423   //Âíåøíèé äàò÷èê òåìïåðàòóðû ¹1(òåìïåðàòóðà âíåøíåãî âîçäóõà)
;;;1424   if((adc_buff_[5]>800)&&(adc_buff_[5]<3800))ND_EXT[0]=0;
0011a4  49ff              LDR      r1,|L1.5540|
0011a6  f8df8400          LDR      r8,|L1.5544|
0011aa  f9b1500a          LDRSH    r5,[r1,#0xa]  ; adc_buff_
0011ae  f64031b7          MOV      r1,#0xbb7
0011b2  f2a53e21          SUB      lr,r5,#0x321
0011b6  458e              CMP      lr,r1
0011b8  d202              BCS      |L1.4544|
0011ba  f8883000          STRB     r3,[r8,#0]
0011be  e001              B        |L1.4548|
                  |L1.4544|
;;;1425   else ND_EXT[0]=1;
0011c0  f888a000          STRB     r10,[r8,#0]
                  |L1.4548|
;;;1426   temp_SL=(signed long)adc_buff_[5];
;;;1427   temp_SL*=Ktext[0];
0011c4  49f9              LDR      r1,|L1.5548|
0011c6  f9b11000          LDRSH    r1,[r1,#0]  ; Ktext
0011ca  434d              MULS     r5,r1,r5
;;;1428   temp_SL/=20000L;
0011cc  f6446e20          MOV      lr,#0x4e20
0011d0  fb95f5fe          SDIV     r5,r5,lr
;;;1429   temp_SL-=273L;
0011d4  f2a51511          SUB      r5,r5,#0x111
;;;1430   t_ext[0]=(signed short)temp_SL;
0011d8  f8dfe3d4          LDR      lr,|L1.5552|
0011dc  f8ae5000          STRH     r5,[lr,#0]
;;;1431   /*
;;;1432   if((adc_buff_[6]>800)&&(adc_buff_[6]<3800))ND_EXT[1]=0;
;;;1433   else ND_EXT[1]=1;
;;;1434   temp_SL=(signed long)adc_buff_[6];
;;;1435   temp_SL*=Ktext[1];
;;;1436   temp_SL/=20000L;
;;;1437   temp_SL-=273L;
;;;1438   t_ext[1]=(signed short)temp_SL;	*/
;;;1439   #endif
;;;1440   
;;;1441   #ifdef UKU_220
;;;1442   
;;;1443   //Âíåøíèé äàò÷èê òåìïåðàòóðû ¹2(òåìïåðàòóðà îòñåêà ÝÏÓ)
;;;1444   if((adc_buff_[3]>800)&&(adc_buff_[3]<3800))ND_EXT[1]=0;
;;;1445   else ND_EXT[1]=1;
;;;1446   temp_SL=(signed long)adc_buff_[3];
;;;1447   temp_SL*=Ktext[1];
;;;1448   temp_SL/=20000L;
;;;1449   temp_SL-=273L;
;;;1450   t_ext[1]=(signed short)temp_SL;
;;;1451   
;;;1452   //Âíåøíèé äàò÷èê òåìïåðàòóðû ¹3(òåìïåðàòóðà îòñåêà MSAN)
;;;1453   if((adc_buff_[10]>800)&&(adc_buff_[10]<3800))ND_EXT[2]=0;
;;;1454   else ND_EXT[2]=1;
;;;1455   temp_SL=(signed long)adc_buff_[10];
;;;1456   temp_SL*=Ktext[2];
;;;1457   temp_SL/=20000L;
;;;1458   temp_SL-=273L;
;;;1459   t_ext[2]=(signed short)temp_SL;
;;;1460   
;;;1461   #else
;;;1462   
;;;1463   
;;;1464   #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;1465   
;;;1466   //Âíåøíèé äàò÷èê òåìïåðàòóðû 
;;;1467   if((adc_buff_[6]>800)&&(adc_buff_[6]<3800))ND_EXT[0]=0;
0011e0  9d00              LDR      r5,[sp,#0]
0011e2  f6403eb7          MOV      lr,#0xbb7
0011e6  4575              CMP      r5,lr
0011e8  d202              BCS      |L1.4592|
0011ea  f8883000          STRB     r3,[r8,#0]
0011ee  e001              B        |L1.4596|
                  |L1.4592|
;;;1468   else ND_EXT[0]=1;
0011f0  f888a000          STRB     r10,[r8,#0]
                  |L1.4596|
;;;1469   temp_SL=(signed long)adc_buff_[6];
;;;1470   temp_SL*=Ktext[0];
0011f4  fb01f10c          MUL      r1,r1,r12
;;;1471   temp_SL/=20000L;
0011f8  f6446520          MOV      r5,#0x4e20
0011fc  fb91f1f5          SDIV     r1,r1,r5
;;;1472   temp_SL-=273L;
001200  f2a11111          SUB      r1,r1,#0x111
;;;1473   t_ext[0]=(signed short)temp_SL;
001204  4dea              LDR      r5,|L1.5552|
001206  8029              STRH     r1,[r5,#0]
;;;1474   
;;;1475   #else
;;;1476   
;;;1477   
;;;1478   
;;;1479   //Âíåøíèé äàò÷èê òåìïåðàòóðû ¹2(òåìïåðàòóðà îòñåêà ÝÏÓ)
;;;1480   if((adc_buff_[6]>800)&&(adc_buff_[6]<3800))ND_EXT[1]=0;
;;;1481   else ND_EXT[1]=1;
;;;1482   temp_SL=(signed long)adc_buff_[6];
;;;1483   temp_SL*=Ktext[1];
;;;1484   temp_SL/=20000L;
;;;1485   temp_SL-=273L;
;;;1486   t_ext[1]=(signed short)temp_SL;
;;;1487   
;;;1488   //Âíåøíèé äàò÷èê òåìïåðàòóðû ¹3(òåìïåðàòóðà îòñåêà MSAN)
;;;1489   if((adc_buff_[3]>800)&&(adc_buff_[3]<3800))ND_EXT[2]=0;
;;;1490   else ND_EXT[2]=1;
;;;1491   temp_SL=(signed long)adc_buff_[3];
;;;1492   temp_SL*=Ktext[2];
;;;1493   temp_SL/=20000L;
;;;1494   temp_SL-=273L;
;;;1495   t_ext[2]=(signed short)temp_SL;
;;;1496   
;;;1497   #endif
;;;1498   #endif
;;;1499   
;;;1500   #ifdef UKU_220_V2
;;;1501   
;;;1502   //Âíåøíèé äàò÷èê òåìïåðàòóðû ¹2(òåìïåðàòóðà îòñåêà ÝÏÓ)
;;;1503   if((adc_buff_[3]>800)&&(adc_buff_[3]<3800))ND_EXT[1]=0;
;;;1504   else ND_EXT[1]=1;
;;;1505   temp_SL=(signed long)adc_buff_[3];
;;;1506   temp_SL*=Ktext[1];
;;;1507   temp_SL/=20000L;
;;;1508   temp_SL-=273L;
;;;1509   t_ext[1]=(signed short)temp_SL;
;;;1510   
;;;1511   //Âíåøíèé äàò÷èê òåìïåðàòóðû ¹3(òåìïåðàòóðà îòñåêà MSAN)
;;;1512   if((adc_buff_[10]>800)&&(adc_buff_[10]<3800))ND_EXT[2]=0;
;;;1513   else ND_EXT[2]=1;
;;;1514   temp_SL=(signed long)adc_buff_[10];
;;;1515   temp_SL*=Ktext[2];
;;;1516   temp_SL/=20000L;
;;;1517   temp_SL-=273L;
;;;1518   t_ext[2]=(signed short)temp_SL;
;;;1519   
;;;1520   #else
;;;1521   
;;;1522   #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;1523   //Òîê áàòàðåè
;;;1524   if(bps[8]._device==dIBAT_METR)
001208  f89412e0          LDRB     r1,[r4,#0x2e0]  ; bps
;;;1525   	{
;;;1526   	ibat_metr_buff_[0]=((signed long)bps[8]._buff[0])+(((signed long)bps[8]._buff[1])<<8);
;;;1527   	ibat_metr_buff_[1]=((signed long)bps[8]._buff[2])+(((signed long)bps[8]._buff[3])<<8);
;;;1528   	bIBAT_SMKLBR=((signed short)bps[8]._buff[4])+(((signed short)bps[8]._buff[5])<<8);
;;;1529   
;;;1530   	if(!bIBAT_SMKLBR)
;;;1531   		{
;;;1532   		signed long temp_SL;
;;;1533   		temp_SL=(signed long)ibat_metr_buff_[0];
;;;1534   		temp_SL-=(signed long)ibat_metr_buff_[1];
;;;1535   		temp_SL*=(signed long)Kibat1[0];
;;;1536   		if((AUSW_MAIN==22010)||(AUSW_MAIN==22011)||(AUSW_MAIN==22035)||(AUSW_MAIN==22033)||(AUSW_MAIN==22063)||(AUSW_MAIN==22023)||(AUSW_MAIN==22043))temp_SL/=2000L;
;;;1537   	
;;;1538   		Ib_ips_termokompensat =(signed short)temp_SL;
00120c  f8dfc3a4          LDR      r12,|L1.5556|
001210  2909              CMP      r1,#9                 ;1524
001212  d13d              BNE      |L1.4752|
001214  f89412e6          LDRB     r1,[r4,#0x2e6]        ;1526  ; bps
001218  f89452e7          LDRB     r5,[r4,#0x2e7]        ;1526  ; bps
00121c  f8dfe398          LDR      lr,|L1.5560|
001220  eb012105          ADD      r1,r1,r5,LSL #8       ;1526
001224  f8ce1000          STR      r1,[lr,#0]            ;1526  ; ibat_metr_buff_
001228  f89452e8          LDRB     r5,[r4,#0x2e8]        ;1527  ; bps
00122c  f894a2e9          LDRB     r10,[r4,#0x2e9]       ;1527  ; bps
001230  eb05250a          ADD      r5,r5,r10,LSL #8      ;1527
001234  f8ce5004          STR      r5,[lr,#4]            ;1527  ; ibat_metr_buff_
001238  f894a2ea          LDRB     r10,[r4,#0x2ea]       ;1528  ; bps
00123c  f894e2eb          LDRB     lr,[r4,#0x2eb]        ;1528  ; bps
001240  eb0a2a0e          ADD      r10,r10,lr,LSL #8     ;1528
001244  f8dfe374          LDR      lr,|L1.5564|
001248  fa0ffa8a          SXTH     r10,r10               ;1528
00124c  f8aea000          STRH     r10,[lr,#0]           ;1528
001250  f1ba0f00          CMP      r10,#0                ;1530
001254  d11c              BNE      |L1.4752|
001256  eba10505          SUB      r5,r1,r5              ;1534
00125a  49d9              LDR      r1,|L1.5568|
00125c  f9b11000          LDRSH    r1,[r1,#0]            ;1535  ; Kibat1
001260  fb01f105          MUL      r1,r1,r5              ;1535
001264  f5a045aa          SUB      r5,r0,#0x5500         ;1536
001268  3dfa              SUBS     r5,r5,#0xfa           ;1536
00126a  d00b              BEQ      |L1.4740|
00126c  1e6d              SUBS     r5,r5,#1              ;1536
00126e  d009              BEQ      |L1.4740|
001270  4548              CMP      r0,r9                 ;1536
001272  d007              BEQ      |L1.4740|
001274  42b0              CMP      r0,r6                 ;1536
001276  d005              BEQ      |L1.4740|
001278  3d34              SUBS     r5,r5,#0x34           ;1536
00127a  d003              BEQ      |L1.4740|
00127c  3528              ADDS     r5,r5,#0x28           ;1536
00127e  d001              BEQ      |L1.4740|
001280  3d14              SUBS     r5,r5,#0x14           ;1536
001282  d103              BNE      |L1.4748|
                  |L1.4740|
001284  f44f65fa          MOV      r5,#0x7d0             ;1536
001288  fb91f1f5          SDIV     r1,r1,r5              ;1536
                  |L1.4748|
00128c  f8ac1000          STRH     r1,[r12,#0]
                  |L1.4752|
;;;1539   		}
;;;1540   	}
;;;1541   
;;;1542   bat[0]._Ub=load_U;
001290  4dcc              LDR      r5,|L1.5572|
001292  f8a5b002          STRH     r11,[r5,#2]
;;;1543   if(AUSW_MAIN==22018) Ib_ips_termokompensat=bat[0]._Ib;
001296  f5a041ac          SUB      r1,r0,#0x5600
00129a  3902              SUBS     r1,#2
00129c  d103              BNE      |L1.4774|
00129e  8928              LDRH     r0,[r5,#8]  ; bat
0012a0  f8ac0000          STRH     r0,[r12,#0]
0012a4  e002              B        |L1.4780|
                  |L1.4774|
;;;1544   else bat[0]._Ib=Ib_ips_termokompensat;
0012a6  f8bc0000          LDRH     r0,[r12,#0]  ; Ib_ips_termokompensat
0012aa  8128              STRH     r0,[r5,#8]
                  |L1.4780|
;;;1545   
;;;1546   #endif
;;;1547   #endif
;;;1548   
;;;1549   
;;;1550   #ifdef UKU_TELECORE2015
;;;1551   
;;;1552   //Âíåøíèé äàò÷èê òåìïåðàòóðû ¹1
;;;1553   if((adc_buff_[7]>800)&&(adc_buff_[7]<3800))ND_EXT[0]=0;
;;;1554   else ND_EXT[0]=1;
;;;1555   temp_SL=(signed long)adc_buff_[7];
;;;1556   temp_SL*=Ktext[0];
;;;1557   temp_SL/=20000L;
;;;1558   temp_SL-=273L;
;;;1559   t_ext[0]=(signed short)temp_SL;
;;;1560   
;;;1561   
;;;1562   //Âíåøíèé äàò÷èê òåìïåðàòóðû ¹2
;;;1563   if((adc_buff_[6]>800)&&(adc_buff_[6]<3800))ND_EXT[1]=0;
;;;1564   else ND_EXT[1]=1;
;;;1565   temp_SL=(signed long)adc_buff_[6];
;;;1566   temp_SL*=Ktext[1];
;;;1567   temp_SL/=20000L;
;;;1568   temp_SL-=273L;
;;;1569   t_ext[1]=(signed short)temp_SL;
;;;1570   
;;;1571   #endif
;;;1572   
;;;1573   #ifdef UKU_TELECORE2017
;;;1574   
;;;1575   //Âíåøíèé äàò÷èê òåìïåðàòóðû ¹1
;;;1576   if((adc_buff_[7]>800)&&(adc_buff_[7]<3800))ND_EXT[0]=0;
;;;1577   else ND_EXT[0]=1;
;;;1578   temp_SL=(signed long)adc_buff_[7];
;;;1579   temp_SL*=Ktext[0];
;;;1580   temp_SL/=20000L;
;;;1581   temp_SL-=273L;
;;;1582   t_ext[0]=(signed short)temp_SL;
;;;1583   
;;;1584   
;;;1585   //Âíåøíèé äàò÷èê òåìïåðàòóðû ¹2
;;;1586   if((adc_buff_[6]>800)&&(adc_buff_[6]<3800))ND_EXT[1]=0;
;;;1587   else ND_EXT[1]=1;
;;;1588   temp_SL=(signed long)adc_buff_[6];
;;;1589   temp_SL*=Ktext[1];
;;;1590   temp_SL/=20000L;
;;;1591   temp_SL-=273L;
;;;1592   t_ext[1]=(signed short)temp_SL;
;;;1593   
;;;1594   #endif
;;;1595   
;;;1596   //íàïðÿæåíèå ââîäà
;;;1597   temp_SL=(signed long)adc_buff_ext_[0];
0012ac  4ec6              LDR      r6,|L1.5576|
0012ae  8831              LDRH     r1,[r6,#0]  ; adc_buff_ext_
;;;1598   temp_SL*=Kunet_ext[0];
0012b0  f8df9318          LDR      r9,|L1.5580|
0012b4  f9b90000          LDRSH    r0,[r9,#0]  ; Kunet_ext
0012b8  4348              MULS     r0,r1,r0
;;;1599   temp_SL/=4000L;
0012ba  f44f6a7a          MOV      r10,#0xfa0
0012be  fb90f0fa          SDIV     r0,r0,r10
;;;1600   Uvv[0]=(signed short)temp_SL;
0012c2  49c3              LDR      r1,|L1.5584|
0012c4  b280              UXTH     r0,r0
0012c6  8008              STRH     r0,[r1,#0]
;;;1601   if(Uvv[0]<100) Uvv0=Uvv[0];
0012c8  f8dfe308          LDR      lr,|L1.5588|
0012cc  2864              CMP      r0,#0x64
0012ce  d202              BCS      |L1.4822|
0012d0  f8ae0000          STRH     r0,[lr,#0]
0012d4  e003              B        |L1.4830|
                  |L1.4822|
;;;1602   else Uvv0=net_U;
0012d6  48c0              LDR      r0,|L1.5592|
0012d8  8800              LDRH     r0,[r0,#0]  ; net_U
0012da  f8ae0000          STRH     r0,[lr,#0]
                  |L1.4830|
;;;1603   
;;;1604   //íàïðÿæåíèå ïýñ
;;;1605   temp_SL=(signed long)adc_buff_ext_[1];
0012de  8876              LDRH     r6,[r6,#2]  ; adc_buff_ext_
;;;1606   temp_SL*=Kunet_ext[1];
0012e0  f9b90002          LDRSH    r0,[r9,#2]  ; Kunet_ext
0012e4  4370              MULS     r0,r6,r0
;;;1607   temp_SL/=4000L;
0012e6  fb90f0fa          SDIV     r0,r0,r10
;;;1608   Uvv[1]=(signed short)temp_SL;
0012ea  8048              STRH     r0,[r1,#2]
;;;1609   
;;;1610   
;;;1611   //íàïðÿæåíèå ââîäà òðåõôàçíîå
;;;1612   temp_SL=(signed long)eb2_data_short[0];
0012ec  49bb              LDR      r1,|L1.5596|
0012ee  f9b10000          LDRSH    r0,[r1,#0]  ; eb2_data_short
;;;1613   temp_SL*=Kvv_eb2[0];
0012f2  4ebb              LDR      r6,|L1.5600|
0012f4  f9b69000          LDRSH    r9,[r6,#0]  ; Kvv_eb2
0012f8  fb09f900          MUL      r9,r9,r0
;;;1614   temp_SL/=6000L;
0012fc  f2417070          MOV      r0,#0x1770
001300  fb99faf0          SDIV     r10,r9,r0
;;;1615   Uvv_eb2[0]=(signed short)temp_SL;
001304  f8df92dc          LDR      r9,|L1.5604|
001308  f8a9a000          STRH     r10,[r9,#0]
;;;1616   
;;;1617   temp_SL=(signed long)eb2_data_short[1];
00130c  f9b1e002          LDRSH    lr,[r1,#2]  ; eb2_data_short
;;;1618   temp_SL*=Kvv_eb2[1];
001310  f9b6a002          LDRSH    r10,[r6,#2]  ; Kvv_eb2
001314  fb0afa0e          MUL      r10,r10,lr
;;;1619   temp_SL/=6000L;
001318  fb9afaf0          SDIV     r10,r10,r0
;;;1620   Uvv_eb2[1]=(signed short)temp_SL;
00131c  f8a9a002          STRH     r10,[r9,#2]
;;;1621   
;;;1622   temp_SL=(signed long)eb2_data_short[2];
001320  f9b1a004          LDRSH    r10,[r1,#4]  ; eb2_data_short
;;;1623   temp_SL*=Kvv_eb2[2];
001324  f9b66004          LDRSH    r6,[r6,#4]  ; Kvv_eb2
001328  fb06f60a          MUL      r6,r6,r10
;;;1624   temp_SL/=6000L;
00132c  fb96f6f0          SDIV     r6,r6,r0
;;;1625   Uvv_eb2[2]=(signed short)temp_SL;
001330  f8a96004          STRH     r6,[r9,#4]
;;;1626   
;;;1627   //íàïðÿæåíèå ïýñ òðåõôàçíîå
;;;1628   temp_SL=(signed long)eb2_data_short[3];
001334  f9b1a006          LDRSH    r10,[r1,#6]  ; eb2_data_short
;;;1629   temp_SL*=Kpes_eb2[0];
001338  f8df92ac          LDR      r9,|L1.5608|
00133c  f9b96000          LDRSH    r6,[r9,#0]  ; Kpes_eb2
001340  fb06f60a          MUL      r6,r6,r10
;;;1630   temp_SL/=6000L;
001344  fb96faf0          SDIV     r10,r6,r0
;;;1631   Upes_eb2[0]=(signed short)temp_SL;
001348  4ea8              LDR      r6,|L1.5612|
00134a  f8a6a000          STRH     r10,[r6,#0]
;;;1632   
;;;1633   temp_SL=(signed long)eb2_data_short[4];
00134e  f9b1e008          LDRSH    lr,[r1,#8]  ; eb2_data_short
;;;1634   temp_SL*=Kpes_eb2[1];
001352  f9b9a002          LDRSH    r10,[r9,#2]  ; Kpes_eb2
001356  fb0afa0e          MUL      r10,r10,lr
;;;1635   temp_SL/=6000L;
00135a  fb9afaf0          SDIV     r10,r10,r0
;;;1636   Upes_eb2[1]=(signed short)temp_SL;
00135e  f8a6a002          STRH     r10,[r6,#2]
;;;1637   
;;;1638   temp_SL=(signed long)eb2_data_short[5];
001362  f9b1a00a          LDRSH    r10,[r1,#0xa]  ; eb2_data_short
;;;1639   temp_SL*=Kpes_eb2[2];
001366  f9b91004          LDRSH    r1,[r9,#4]  ; Kpes_eb2
00136a  fb01f10a          MUL      r1,r1,r10
;;;1640   temp_SL/=6000L;
00136e  fb91f0f0          SDIV     r0,r1,r0
;;;1641   Upes_eb2[2]=(signed short)temp_SL;
001372  80b0              STRH     r0,[r6,#4]
;;;1642   
;;;1643   //Âû÷èñëåíèå òåìïåðàòóðû øêàôà
;;;1644   
;;;1645   ibt._T[0]=t_ext[1]+273;
001374  488e              LDR      r0,|L1.5552|
001376  4e9e              LDR      r6,|L1.5616|
001378  8841              LDRH     r1,[r0,#2]  ; t_ext
00137a  f2011111          ADD      r1,r1,#0x111
00137e  fa0ff981          SXTH     r9,r1
001382  f8a69000          STRH     r9,[r6,#0]
;;;1646   ibt._T[1]=t_ext[2]+273;
001386  8880              LDRH     r0,[r0,#4]  ; t_ext
001388  f2001011          ADD      r0,r0,#0x111
00138c  fa0ffa80          SXTH     r10,r0
001390  f8a6a002          STRH     r10,[r6,#2]
;;;1647   
;;;1648   ibt._nd[0]=ND_EXT[1];
001394  f8981001          LDRB     r1,[r8,#1]  ; ND_EXT
001398  7231              STRB     r1,[r6,#8]
;;;1649   ibt._nd[1]=ND_EXT[2];
00139a  f8980002          LDRB     r0,[r8,#2]  ; ND_EXT
00139e  7270              STRB     r0,[r6,#9]
;;;1650   
;;;1651   #ifndef UKU_TELECORE2015
;;;1652   if((ibt._nd[0]==0) &&  (ibt._nd[1]==0))
;;;1653   	{
;;;1654   	t_box=((ibt._T[0]+ibt._T[1])/2)-273;
0013a0  4e94              LDR      r6,|L1.5620|
0013a2  b901              CBNZ     r1,|L1.5030|
0013a4  b110              CBZ      r0,|L1.5036|
                  |L1.5030|
;;;1655   	}
;;;1656   else if((ibt._nd[0]==1) &&  (ibt._nd[1]==0))
0013a6  2901              CMP      r1,#1
0013a8  d00a              BEQ      |L1.5056|
0013aa  e00a              B        |L1.5058|
                  |L1.5036|
0013ac  eb09000a          ADD      r0,r9,r10             ;1654
0013b0  eb0070d0          ADD      r0,r0,r0,LSR #31      ;1654
0013b4  f46f7188          MVN      r1,#0x110             ;1654
0013b8  eb010060          ADD      r0,r1,r0,ASR #1       ;1654
0013bc  8030              STRH     r0,[r6,#0]            ;1654
0013be  e01e              B        |L1.5118|
                  |L1.5056|
0013c0  b108              CBZ      r0,|L1.5062|
                  |L1.5058|
;;;1657   	{
;;;1658   	t_box=ibt._T[1]-273;
;;;1659   	}
;;;1660   else if((ibt._nd[0]==0) &&  (ibt._nd[1]==1))
0013c2  b129              CBZ      r1,|L1.5072|
0013c4  e006              B        |L1.5076|
                  |L1.5062|
0013c6  f2aa1a11          SUB      r10,r10,#0x111        ;1658
0013ca  f8a6a000          STRH     r10,[r6,#0]           ;1658
0013ce  e016              B        |L1.5118|
                  |L1.5072|
0013d0  2801              CMP      r0,#1
0013d2  d002              BEQ      |L1.5082|
                  |L1.5076|
;;;1661   	{
;;;1662   	t_box=ibt._T[0]-273;
;;;1663   	}
;;;1664   else if((ibt._nd[0]==1) &&  (ibt._nd[1]==1))
0013d4  2901              CMP      r1,#1
0013d6  d005              BEQ      |L1.5092|
0013d8  e011              B        |L1.5118|
                  |L1.5082|
0013da  f2a91911          SUB      r9,r9,#0x111          ;1662
0013de  f8a69000          STRH     r9,[r6,#0]            ;1662
0013e2  e00c              B        |L1.5118|
                  |L1.5092|
0013e4  2801              CMP      r0,#1
0013e6  d10a              BNE      |L1.5118|
;;;1665   	{
;;;1666   	if(t_ext_can_nd<5)t_box= t_ext_can;
0013e8  4883              LDR      r0,|L1.5624|
0013ea  7800              LDRB     r0,[r0,#0]  ; t_ext_can_nd
0013ec  2805              CMP      r0,#5
0013ee  d203              BCS      |L1.5112|
0013f0  4882              LDR      r0,|L1.5628|
0013f2  8800              LDRH     r0,[r0,#0]  ; t_ext_can
0013f4  8030              STRH     r0,[r6,#0]
0013f6  e002              B        |L1.5118|
                  |L1.5112|
;;;1667   	else t_box=20;
0013f8  f04f0014          MOV      r0,#0x14
0013fc  8030              STRH     r0,[r6,#0]
                  |L1.5118|
;;;1668   	}
;;;1669   #endif
;;;1670   /*
;;;1671   //Âû÷èñëåíèå òåìïåðàòóðû øêàôà
;;;1672   
;;;1673   ibt._T[0]=bat[0]._Tb+273;
;;;1674   ibt._T[1]=bat[1]._Tb+273;
;;;1675   ibt._T[2]=t_ext[1]+273;
;;;1676   ibt._T[3]=t_ext[2]+273;
;;;1677   
;;;1678   ibt._nd[0]=bat[0]._nd;
;;;1679   ibt._nd[1]=bat[1]._nd;
;;;1680   ibt._nd[2]=ND_EXT[1];
;;;1681   ibt._nd[3]=ND_EXT[2];
;;;1682   
;;;1683   ibt._avg1=0;
;;;1684   ibt._avg_cnt=4;
;;;1685   
;;;1686   if(ibt._nd[0]==0)
;;;1687   	{
;;;1688   	ibt._avg1+=ibt._T[0];
;;;1689   	}
;;;1690   else 
;;;1691   	{
;;;1692   	ibt._avg_cnt--;
;;;1693   	}
;;;1694   
;;;1695   if(ibt._nd[1]==0)
;;;1696   	{
;;;1697   	ibt._avg1+=ibt._T[1];
;;;1698   	}
;;;1699   else 
;;;1700   	{
;;;1701   	ibt._avg_cnt--;
;;;1702   	}
;;;1703   
;;;1704   if(ibt._nd[2]==0)
;;;1705   	{
;;;1706   	ibt._avg1+=ibt._T[2];
;;;1707   	}
;;;1708   else 
;;;1709   	{
;;;1710   	ibt._avg_cnt--;
;;;1711   	}
;;;1712   
;;;1713   if(ibt._nd[3]==0)
;;;1714   	{
;;;1715   	ibt._avg1+=ibt._T[3];
;;;1716   	}
;;;1717   else 
;;;1718   	{
;;;1719   	ibt._avg_cnt--;
;;;1720   	}
;;;1721   
;;;1722   if(ibt._avg_cnt==0)
;;;1723   	{
;;;1724   	}
;;;1725   else
;;;1726   	{
;;;1727   	ibt._avg1/=ibt._avg_cnt;
;;;1728   	}
;;;1729   
;;;1730   
;;;1731   if(ibt._nd[0]!=0)
;;;1732   	{
;;;1733   	ibt._T_dispers[0]=0;
;;;1734   	}
;;;1735   else 
;;;1736   	{
;;;1737   	ibt._T_dispers[0]=abs(ibt._T[0]-ibt._avg1);
;;;1738   	}
;;;1739   
;;;1740   if(ibt._nd[1]!=0)
;;;1741   	{
;;;1742   	ibt._T_dispers[1]=0;
;;;1743   	}
;;;1744   else 
;;;1745   	{
;;;1746   	ibt._T_dispers[1]=abs(ibt._T[1]-ibt._avg1);
;;;1747   	}
;;;1748   
;;;1749   if(ibt._nd[2]!=0)
;;;1750   	{
;;;1751   	ibt._T_dispers[2]=0;
;;;1752   	}
;;;1753   else 
;;;1754   	{
;;;1755   	ibt._T_dispers[2]=abs(ibt._T[2]-ibt._avg1);
;;;1756   	}
;;;1757   
;;;1758   if(ibt._nd[3]!=0)
;;;1759   	{
;;;1760   	ibt._T_dispers[3]=0;
;;;1761   	}
;;;1762   else 
;;;1763   	{
;;;1764   	ibt._T_dispers[3]=abs(ibt._T[3]-ibt._avg1);
;;;1765   	}
;;;1766   
;;;1767   if(	ibt._nd[0]&&
;;;1768   	ibt._nd[1]&&
;;;1769   	ibt._nd[2]&&
;;;1770   	ibt._nd[3]
;;;1771   	)
;;;1772   	{
;;;1773   	t_box=(bps[0]._Ti);
;;;1774   	}
;;;1775   
;;;1776   else if(	ibt._nd[0]||
;;;1777   	ibt._nd[1]||
;;;1778   	ibt._nd[2]||
;;;1779   	ibt._nd[3]
;;;1780   	)
;;;1781   	{
;;;1782   	t_box=(ibt._avg1-273);
;;;1783   	}
;;;1784   else 
;;;1785   	{
;;;1786   	ibt._max_dispers_num=0;
;;;1787   	ibt._max_dispers=ibt._T_dispers[0];
;;;1788   
;;;1789   	if(ibt._T_dispers[1]>ibt._max_dispers)
;;;1790   		{
;;;1791   		ibt._max_dispers_num=1;
;;;1792   		ibt._max_dispers=ibt._T_dispers[1];
;;;1793   		}
;;;1794   	if(ibt._T_dispers[2]>ibt._max_dispers)
;;;1795   		{
;;;1796   		ibt._max_dispers_num=2;
;;;1797   		ibt._max_dispers=ibt._T_dispers[2];
;;;1798   		}
;;;1799   	if(ibt._T_dispers[3]>ibt._max_dispers)
;;;1800   		{
;;;1801   		ibt._max_dispers_num=3;
;;;1802   		ibt._max_dispers=ibt._T_dispers[3];
;;;1803   		}
;;;1804   
;;;1805   	ibt._avg2=0;
;;;1806   
;;;1807   	if(ibt._max_dispers_num!=0)
;;;1808   		{
;;;1809   		ibt._avg2+=ibt._T[0];
;;;1810   		}
;;;1811   	if(ibt._max_dispers_num!=1)
;;;1812   		{
;;;1813   		ibt._avg2+=ibt._T[1];
;;;1814   		}
;;;1815   	if(ibt._max_dispers_num!=2)
;;;1816   		{
;;;1817   		ibt._avg2+=ibt._T[2];
;;;1818   		}
;;;1819   	if(ibt._max_dispers_num!=3)
;;;1820   		{
;;;1821   		ibt._avg2+=ibt._T[3];
;;;1822   		}
;;;1823   
;;;1824   	t_box=(ibt._avg2/3)-273;
;;;1825   
;;;1826   	}*/
;;;1827   
;;;1828   
;;;1829   //*********************************************
;;;1830   
;;;1831   #ifndef TELECORE
;;;1832   if((BAT_IS_ON[0]==bisON)&&(bat[0]._Ub>200)) Ibmax=bat[0]._Ib;
0013fe  4880              LDR      r0,|L1.5632|
001400  7801              LDRB     r1,[r0,#0]  ; BAT_IS_ON
001402  2955              CMP      r1,#0x55
001404  d104              BNE      |L1.5136|
001406  f1bb0fc8          CMP      r11,#0xc8
00140a  dd01              BLE      |L1.5136|
00140c  8929              LDRH     r1,[r5,#8]  ; bat
00140e  8739              STRH     r1,[r7,#0x38]
                  |L1.5136|
;;;1833   if((BAT_IS_ON[1]==bisON)&&(bat[1]._Ub>200)&&(bat[1]._Ib>bat[0]._Ib)) Ibmax=bat[1]._Ib;
001410  7840              LDRB     r0,[r0,#1]  ; BAT_IS_ON
001412  2855              CMP      r0,#0x55
001414  d10a              BNE      |L1.5164|
001416  f9b5004e          LDRSH    r0,[r5,#0x4e]  ; bat
00141a  28c8              CMP      r0,#0xc8
00141c  dd06              BLE      |L1.5164|
00141e  f9b50054          LDRSH    r0,[r5,#0x54]  ; bat
001422  f9b51008          LDRSH    r1,[r5,#8]  ; bat
001426  4288              CMP      r0,r1
001428  dd00              BLE      |L1.5164|
00142a  8738              STRH     r0,[r7,#0x38]
                  |L1.5164|
;;;1834   #endif
;;;1835   
;;;1836   #ifdef TELECORE
;;;1837   Ibmax=0;
;;;1838   /*
;;;1839   if((NUMBAT_TELECORE>0)&&(lakb[0]._communicationFullErrorStat==0)&&(lakb[0]._ch_curr/10>Ibmax))Ibmax=lakb[0]._ch_curr/10;
;;;1840   if((NUMBAT_TELECORE>1)&&(lakb[1]._communicationFullErrorStat==0)&&(lakb[1]._ch_curr/10>Ibmax))Ibmax=lakb[1]._ch_curr/10;
;;;1841   if((NUMBAT_TELECORE>2)&&(lakb[2]._communicationFullErrorStat==0)&&(lakb[2]._ch_curr/10>Ibmax))Ibmax=lakb[2]._ch_curr/10;
;;;1842   */
;;;1843   if((NUMBAT_TELECORE>0)&&(bat[0]._Ib/10>Ibmax))Ibmax=bat[0]._Ib/10;
;;;1844   if((NUMBAT_TELECORE>1)&&(bat[1]._Ib/10>Ibmax))Ibmax=bat[1]._Ib/10;
;;;1845   //if((BAT_IS_ON[0]==bisON)&&(bat[0]._Ub>200)) Ibmax=bat[0]._Ib/1;
;;;1846   //if((BAT_IS_ON[1]==bisON)&&(bat[1]._Ub>200)&&(bat[1]._Ib>bat[0]._Ib)) Ibmax=bat[1]._Ib;
;;;1847   #endif
;;;1848   //Ibmax=bat[0]._Ib;
;;;1849   //if((AUSW_MAIN==22063)||(AUSW_MAIN==22023)||(AUSW_MAIN==22043))Ibmax=Ib_ips_termokompensat;
;;;1850   
;;;1851   #ifdef UKU_TELECORE2017
;;;1852   Ibmax=0;
;;;1853   if((NUMBAT_TELECORE>0)&&(bat[0]._Ib/10>Ibmax))Ibmax=bat[0]._Ib/10;
;;;1854   if((NUMBAT_TELECORE>1)&&(bat[1]._Ib/10>Ibmax))Ibmax=bat[1]._Ib/10;
;;;1855   #endif
;;;1856   
;;;1857   #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;1858   Ibmax=Ib_ips_termokompensat;
00142c  f8bc0000          LDRH     r0,[r12,#0]  ; Ib_ips_termokompensat
001430  8738              STRH     r0,[r7,#0x38]
;;;1859   #endif
;;;1860   for(i=0;i<NUMIST;i++)
001432  f04f0100          MOV      r1,#0
001436  e02f              B        |L1.5272|
                  |L1.5176|
;;;1861   	{
;;;1862   	if(bps[i]._cnt<25)
001438  ebc100c1          RSB      r0,r1,r1,LSL #3
00143c  eb001001          ADD      r0,r0,r1,LSL #4
001440  eb040080          ADD      r0,r4,r0,LSL #2
001444  78c6              LDRB     r6,[r0,#3]
001446  2e19              CMP      r6,#0x19
001448  d21c              BCS      |L1.5252|
;;;1863        	{
;;;1864        	bps[i]._Ii=bps[i]._buff[0]+(bps[i]._buff[1]*256);
00144a  7986              LDRB     r6,[r0,#6]
00144c  79c7              LDRB     r7,[r0,#7]
00144e  eb062607          ADD      r6,r6,r7,LSL #8
001452  6246              STR      r6,[r0,#0x24]
;;;1865        	bps[i]._Uin=bps[i]._buff[2]+(bps[i]._buff[3]*256);
001454  7a06              LDRB     r6,[r0,#8]
001456  7a47              LDRB     r7,[r0,#9]
001458  eb062607          ADD      r6,r6,r7,LSL #8
00145c  6206              STR      r6,[r0,#0x20]
;;;1866        	bps[i]._Uii=bps[i]._buff[4]+(bps[i]._buff[5]*256);
00145e  7a86              LDRB     r6,[r0,#0xa]
001460  7ac7              LDRB     r7,[r0,#0xb]
001462  eb062607          ADD      r6,r6,r7,LSL #8
001466  61c6              STR      r6,[r0,#0x1c]
;;;1867        	bps[i]._Ti=(signed)(bps[i]._buff[6]);
001468  7b06              LDRB     r6,[r0,#0xc]
00146a  6286              STR      r6,[r0,#0x28]
;;;1868        	bps[i]._adr_ee=bps[i]._buff[7];
00146c  7b46              LDRB     r6,[r0,#0xd]
00146e  f8806052          STRB     r6,[r0,#0x52]
;;;1869        	bps[i]._flags_tm=bps[i]._buff[8];
001472  7b86              LDRB     r6,[r0,#0xe]
001474  f8806042          STRB     r6,[r0,#0x42]
;;;1870   	     bps[i]._rotor=bps[i]._buff[10]+(bps[i]._buff[11]*256);    
001478  7c06              LDRB     r6,[r0,#0x10]
00147a  7c47              LDRB     r7,[r0,#0x11]
00147c  eb062607          ADD      r6,r6,r7,LSL #8
001480  64c6              STR      r6,[r0,#0x4c]
001482  e006              B        |L1.5266|
                  |L1.5252|
;;;1871        	} 
;;;1872   	else 
;;;1873        	{
;;;1874        	bps[i]._Uii=0; 
001484  61c3              STR      r3,[r0,#0x1c]
;;;1875        	bps[i]._Ii=0;
001486  6243              STR      r3,[r0,#0x24]
;;;1876        	bps[i]._Uin=0;
001488  6203              STR      r3,[r0,#0x20]
;;;1877        	bps[i]._Ti=0;
00148a  6283              STR      r3,[r0,#0x28]
;;;1878        	bps[i]._flags_tm=0; 
00148c  f8803042          STRB     r3,[r0,#0x42]
;;;1879   	     bps[i]._rotor=0;    
001490  64c3              STR      r3,[r0,#0x4c]
                  |L1.5266|
001492  f1010101          ADD      r1,r1,#1              ;1860
001496  b2c9              UXTB     r1,r1                 ;1860
                  |L1.5272|
001498  4291              CMP      r1,r2                 ;1860
00149a  dbcd              BLT      |L1.5176|
;;;1880        	}
;;;1881        
;;;1882        }
;;;1883   
;;;1884   load_I=0;
00149c  4e59              LDR      r6,|L1.5636|
;;;1885   #ifdef TELECORE
;;;1886   
;;;1887   /*for(i=0;i<NUMBAT_TELECORE;i++)
;;;1888   	{
;;;1889   	load_I-=lakb[i]._ch_curr/10;
;;;1890   	}*/
;;;1891   load_I=-(bat[0]._Ib/10)-(bat[1]._Ib/10);
;;;1892   #elif UKU_TELECORE2017
;;;1893   load_I=-(bat[0]._Ib/10)-(bat[1]._Ib/10);
;;;1894   #else
;;;1895   load_I=-(bat[0]._Ib/10)-(bat[1]._Ib/10);
00149e  f9b51008          LDRSH    r1,[r5,#8]  ; bat
0014a2  f04f000a          MOV      r0,#0xa
0014a6  fb91f1f0          SDIV     r1,r1,r0
0014aa  f9b55054          LDRSH    r5,[r5,#0x54]  ; bat
0014ae  fb95f0f0          SDIV     r0,r5,r0
0014b2  4408              ADD      r0,r0,r1
0014b4  f1c00000          RSB      r0,r0,#0
0014b8  b207              SXTH     r7,r0
0014ba  8037              STRH     r7,[r6,#0]
;;;1896   #endif
;;;1897   Isumm=0;
0014bc  4d52              LDR      r5,|L1.5640|
0014be  802b              STRH     r3,[r5,#0]
;;;1898   
;;;1899   for(i=0;i<NUMIST;i++)
0014c0  f04f0000          MOV      r0,#0
0014c4  e012              B        |L1.5356|
                  |L1.5318|
;;;1900        {
;;;1901        if(bps[i]._cnt<5)Isumm+=bps[i]._Ii;
0014c6  ebc001c0          RSB      r1,r0,r0,LSL #3
0014ca  eb011100          ADD      r1,r1,r0,LSL #4
0014ce  eb040181          ADD      r1,r4,r1,LSL #2
0014d2  f891c003          LDRB     r12,[r1,#3]
0014d6  f1bc0f05          CMP      r12,#5
0014da  d204              BCS      |L1.5350|
0014dc  6a49              LDR      r1,[r1,#0x24]
0014de  f8b5c000          LDRH     r12,[r5,#0]  ; Isumm
0014e2  4461              ADD      r1,r1,r12
0014e4  8029              STRH     r1,[r5,#0]
                  |L1.5350|
0014e6  f1000001          ADD      r0,r0,#1              ;1899
0014ea  b2c0              UXTB     r0,r0                 ;1899
                  |L1.5356|
0014ec  4290              CMP      r0,r2                 ;1899
0014ee  dbea              BLT      |L1.5318|
;;;1902        }  
;;;1903        
;;;1904   load_I=load_I+Isumm;
0014f0  8828              LDRH     r0,[r5,#0]  ; Isumm
0014f2  4438              ADD      r0,r0,r7
0014f4  b200              SXTH     r0,r0
0014f6  8030              STRH     r0,[r6,#0]
;;;1905   if(load_I<0)load_I=0;
0014f8  2800              CMP      r0,#0
0014fa  da00              BGE      |L1.5374|
0014fc  8033              STRH     r3,[r6,#0]
                  |L1.5374|
;;;1906   
;;;1907   #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;1908   load_I=0;
0014fe  8033              STRH     r3,[r6,#0]
;;;1909   
;;;1910   Isumm=0;
001500  802b              STRH     r3,[r5,#0]
;;;1911   
;;;1912   for(i=0;i<NUMIST;i++)
001502  f04f0000          MOV      r0,#0
001506  e00f              B        |L1.5416|
                  |L1.5384|
;;;1913        {
;;;1914        if(bps[i]._cnt<5)Isumm+=bps[i]._Ii;
001508  ebc001c0          RSB      r1,r0,r0,LSL #3
00150c  eb011100          ADD      r1,r1,r0,LSL #4
001510  eb040181          ADD      r1,r4,r1,LSL #2
001514  78cf              LDRB     r7,[r1,#3]
001516  2f05              CMP      r7,#5
001518  d203              BCS      |L1.5410|
00151a  6a49              LDR      r1,[r1,#0x24]
00151c  882f              LDRH     r7,[r5,#0]  ; Isumm
00151e  4439              ADD      r1,r1,r7
001520  8029              STRH     r1,[r5,#0]
                  |L1.5410|
001522  f1000001          ADD      r0,r0,#1              ;1912
001526  b2c0              UXTB     r0,r0                 ;1912
                  |L1.5416|
001528  4290              CMP      r0,r2                 ;1912
00152a  dbed              BLT      |L1.5384|
;;;1915        }  
;;;1916        
;;;1917   load_I=load_I+Isumm;
00152c  8829              LDRH     r1,[r5,#0]  ; Isumm
00152e  eb030001          ADD      r0,r3,r1
001532  b200              SXTH     r0,r0
001534  8030              STRH     r0,[r6,#0]
;;;1918   if(load_I<0)load_I=0;
001536  2800              CMP      r0,#0
001538  da00              BGE      |L1.5436|
00153a  8033              STRH     r3,[r6,#0]
                  |L1.5436|
;;;1919   
;;;1920   #endif
;;;1921   
;;;1922   
;;;1923   
;;;1924   #ifdef UKU_GLONASS
;;;1925   inv[0]._Uio=6;
;;;1926   if (NUMINV)
;;;1927   	{
;;;1928   	for(i=0;i<NUMINV;i++)
;;;1929   		{
;;;1930   		if(bps[i+first_inv_slot]._cnt<25)
;;;1931        		{
;;;1932        		inv[i]._Ii=bps[i+first_inv_slot]._buff[0]+(bps[i+first_inv_slot]._buff[1]*256);
;;;1933        		inv[i]._Uin=bps[i+first_inv_slot]._buff[2]+(bps[i+first_inv_slot]._buff[3]*256);
;;;1934        		inv[i]._Uio=bps[i+first_inv_slot]._buff[4]+(bps[i+first_inv_slot]._buff[5]*256);
;;;1935        		inv[i]._Ti=(signed)(bps[i+first_inv_slot]._buff[6]);
;;;1936        		inv[i]._flags_tm=bps[i+first_inv_slot]._buff[8];
;;;1937   	    	//	inv[i]._rotor=bps[i+first_inv_slot]._buff[10]+(bps[i+first_inv_slot]._buff[11]*256);
;;;1938   			inv[i]._cnt=0;    
;;;1939        		} 
;;;1940   		else 
;;;1941        		{
;;;1942        		inv[i]._Uio=0; 
;;;1943        		inv[i]._Ii=0;
;;;1944        		inv[i]._Uin=0;
;;;1945        		inv[i]._Ti=0;
;;;1946        		inv[i]._flags_tm=0; 
;;;1947   //	     	inv[i]._rotor0;
;;;1948   			inv[i]._cnt=25;    
;;;1949        		}
;;;1950        	}
;;;1951      	}
;;;1952   #endif
;;;1953   
;;;1954   #ifndef UKU_GLONASS
;;;1955   if (NUMINV)
00153c  4833              LDR      r0,|L1.5644|
00153e  f9b05000          LDRSH    r5,[r0,#0]  ; NUMINV
001542  2d00              CMP      r5,#0
001544  d066              BEQ      |L1.5652|
;;;1956   	{
;;;1957   	for(i=0;i<NUMINV;i++)
001546  f04f0200          MOV      r2,#0
;;;1958   		{
;;;1959   		if(bps[i+20]._cnt<25)
;;;1960        		{
;;;1961        		inv[i]._Ii=bps[i+20]._buff[0]+(bps[i+20]._buff[1]*256);
00154a  4e31              LDR      r6,|L1.5648|
00154c  e09d              B        |L1.5770|
                  |L1.5454|
00154e  f1020014          ADD      r0,r2,#0x14           ;1959
001552  ebc001c0          RSB      r1,r0,r0,LSL #3       ;1959
001556  eb011000          ADD      r0,r1,r0,LSL #4       ;1959
00155a  eb040080          ADD      r0,r4,r0,LSL #2       ;1959
00155e  78c1              LDRB     r1,[r0,#3]            ;1959
001560  2919              CMP      r1,#0x19              ;1959
001562  d276              BCS      |L1.5714|
001564  7981              LDRB     r1,[r0,#6]
001566  79c7              LDRB     r7,[r0,#7]
001568  eb012707          ADD      r7,r1,r7,LSL #8
00156c  eb020142          ADD      r1,r2,r2,LSL #1
001570  eb061141          ADD      r1,r6,r1,LSL #5
001574  61cf              STR      r7,[r1,#0x1c]
;;;1962        		inv[i]._Pio=bps[i+20]._buff[2]+(bps[i+20]._buff[3]*256);
001576  7a07              LDRB     r7,[r0,#8]
001578  f890c009          LDRB     r12,[r0,#9]
00157c  eb07270c          ADD      r7,r7,r12,LSL #8
001580  62cf              STR      r7,[r1,#0x2c]
;;;1963        		inv[i]._Uio=bps[i+20]._buff[4]+(bps[i+20]._buff[5]*256);
001582  7a87              LDRB     r7,[r0,#0xa]
001584  f890c00b          LDRB     r12,[r0,#0xb]
001588  eb07270c          ADD      r7,r7,r12,LSL #8
00158c  618f              STR      r7,[r1,#0x18]
;;;1964        		inv[i]._Ti=(signed)(bps[i+20]._buff[6]);
00158e  7b07              LDRB     r7,[r0,#0xc]
001590  620f              STR      r7,[r1,#0x20]
;;;1965        		inv[i]._flags_tm=bps[i+20]._buff[7];
001592  7b47              LDRB     r7,[r0,#0xd]
001594  f8817046          STRB     r7,[r1,#0x46]
;;;1966        		inv[i]._Uin=bps[i+20]._buff[8]+(bps[i+20]._buff[9]*256);
001598  7b87              LDRB     r7,[r0,#0xe]
00159a  f890c00f          LDRB     r12,[r0,#0xf]
00159e  e03a              B        |L1.5654|
                  |L1.5536|
                          DCD      bps_I
                  |L1.5540|
                          DCD      ||.bss||+0x400
                  |L1.5544|
                          DCD      ND_EXT
                  |L1.5548|
                          DCD      Ktext
                  |L1.5552|
                          DCD      t_ext
                  |L1.5556|
                          DCD      Ib_ips_termokompensat
                  |L1.5560|
                          DCD      ibat_metr_buff_
                  |L1.5564|
                          DCD      bIBAT_SMKLBR
                  |L1.5568|
                          DCD      Kibat1
                  |L1.5572|
                          DCD      bat
                  |L1.5576|
                          DCD      adc_buff_ext_
                  |L1.5580|
                          DCD      Kunet_ext
                  |L1.5584|
                          DCD      Uvv
                  |L1.5588|
                          DCD      Uvv0
                  |L1.5592|
                          DCD      net_U
                  |L1.5596|
                          DCD      eb2_data_short
                  |L1.5600|
                          DCD      Kvv_eb2
                  |L1.5604|
                          DCD      Uvv_eb2
                  |L1.5608|
                          DCD      Kpes_eb2
                  |L1.5612|
                          DCD      Upes_eb2
                  |L1.5616|
                          DCD      ibt
                  |L1.5620|
                          DCD      t_box
                  |L1.5624|
                          DCD      t_ext_can_nd
                  |L1.5628|
                          DCD      t_ext_can
                  |L1.5632|
                          DCD      BAT_IS_ON
                  |L1.5636|
                          DCD      load_I
                  |L1.5640|
                          DCD      Isumm
                  |L1.5644|
                          DCD      NUMINV
                  |L1.5648|
                          DCD      inv
                  |L1.5652|
001614  e03c              B        |L1.5776|
                  |L1.5654|
001616  eb07270c          ADD      r7,r7,r12,LSL #8
00161a  628f              STR      r7,[r1,#0x28]
;;;1967        		inv[i]._Uil=bps[i+20]._buff[10]+(bps[i+20]._buff[11]*256);
00161c  7c07              LDRB     r7,[r0,#0x10]
00161e  f890c011          LDRB     r12,[r0,#0x11]
001622  eb07270c          ADD      r7,r7,r12,LSL #8
001626  624f              STR      r7,[r1,#0x24]
;;;1968   			inv[i]._cnt=0;
001628  708b              STRB     r3,[r1,#2]
;;;1969   			inv[i]._Uoutmin=bps[i+20]._buff[12]; 
00162a  7c87              LDRB     r7,[r0,#0x12]
00162c  f8817059          STRB     r7,[r1,#0x59]
;;;1970   			inv[i]._Uoutmax=bps[i+20]._buff[13]; 
001630  7cc7              LDRB     r7,[r0,#0x13]
001632  f881705a          STRB     r7,[r1,#0x5a]
;;;1971   			inv[i]._Pnom=bps[i+20]._buff[14]; 
001636  7d07              LDRB     r7,[r0,#0x14]
001638  f8817058          STRB     r7,[r1,#0x58]
;;;1972   			inv[i]._net_contr_en=bps[i+20]._buff[15];
00163c  7d47              LDRB     r7,[r0,#0x15]
00163e  f881705b          STRB     r7,[r1,#0x5b]
;;;1973   			inv[i]._pwm_en=bps[i+20]._buff[16];  
001642  7d87              LDRB     r7,[r0,#0x16]
001644  f881705c          STRB     r7,[r1,#0x5c]
;;;1974   			inv[i]._phase_mode=bps[i+20]._buff[17];  
001648  7dc0              LDRB     r0,[r0,#0x17]
00164a  f881005d          STRB     r0,[r1,#0x5d]
00164e  e019              B        |L1.5764|
001650  e7ff              B        |L1.5714|
                  |L1.5714|
;;;1975        		} 
;;;1976   		else 
;;;1977        		{
;;;1978         		inv[i]._Ii=0;
001652  eb020042          ADD      r0,r2,r2,LSL #1
001656  eb061040          ADD      r0,r6,r0,LSL #5
00165a  61c3              STR      r3,[r0,#0x1c]
;;;1979   			inv[i]._Pio=0;
00165c  62c3              STR      r3,[r0,#0x2c]
;;;1980   			inv[i]._Uio=0;
00165e  6183              STR      r3,[r0,#0x18]
;;;1981        		inv[i]._Ti=0;
001660  6203              STR      r3,[r0,#0x20]
;;;1982        		inv[i]._flags_tm=0; 
001662  f8803046          STRB     r3,[r0,#0x46]
;;;1983        		inv[i]._Uil=0;
001666  6243              STR      r3,[r0,#0x24]
;;;1984        		inv[i]._Uin=0;
001668  6283              STR      r3,[r0,#0x28]
;;;1985   			inv[i]._cnt=25; 
00166a  f04f0119          MOV      r1,#0x19
00166e  7081              STRB     r1,[r0,#2]
;;;1986   			inv[i]._Uoutmin=0; 
001670  f8803059          STRB     r3,[r0,#0x59]
;;;1987   			inv[i]._Uoutmax=0; 
001674  f880305a          STRB     r3,[r0,#0x5a]
;;;1988   			inv[i]._Pnom=0; 
001678  f8803058          STRB     r3,[r0,#0x58]
;;;1989   			inv[i]._net_contr_en=0;
00167c  f880305b          STRB     r3,[r0,#0x5b]
;;;1990   			inv[i]._pwm_en=0;   
001680  f880305c          STRB     r3,[r0,#0x5c]
                  |L1.5764|
001684  f1020201          ADD      r2,r2,#1              ;1957
001688  b2d2              UXTB     r2,r2                 ;1957
                  |L1.5770|
00168a  42aa              CMP      r2,r5                 ;1957
00168c  f6ffaf5f          BLT      |L1.5454|
                  |L1.5776|
;;;1991   			   
;;;1992        		}
;;;1993        	}
;;;1994      	}
;;;1995   #endif
;;;1996   
;;;1997   #ifdef GLADKOV
;;;1998   inv[0]._Ii=bps[4]._buff[0]+(bps[4]._buff[1]*256);
;;;1999   inv[0]._Pio=bps[4]._buff[2]+(bps[4]._buff[3]*256);
;;;2000   inv[0]._Uio=bps[4]._buff[4]+(bps[4]._buff[5]*256);
;;;2001   inv[0]._Ti=(signed)(bps[4]._buff[6]);
;;;2002   inv[0]._flags_tm=bps[4]._buff[7];
;;;2003   inv[0]._Uin=bps[4]._buff[8]+(bps[4]._buff[9]*256);
;;;2004   inv[0]._Uil=bps[4]._buff[10]+(bps[4]._buff[11]*256);
;;;2005   inv[0]._cnt=0;    
;;;2006   
;;;2007   inv[1]._Ii=bps[21]._buff[0]+(bps[21]._buff[1]*256);
;;;2008   inv[1]._Pio=bps[21]._buff[2]+(bps[21]._buff[3]*256);
;;;2009   inv[1]._Uio=bps[21]._buff[4]+(bps[21]._buff[5]*256);
;;;2010   inv[1]._Ti=(signed)(bps[21]._buff[6]);
;;;2011   inv[1]._flags_tm=bps[21]._buff[7];
;;;2012   inv[1]._Uin=bps[21]._buff[8]+(bps[21]._buff[9]*256);
;;;2013   inv[1]._Uil=bps[21]._buff[10]+(bps[21]._buff[11]*256);
;;;2014   inv[1]._cnt=0;    
;;;2015   #endif
;;;2016   
;;;2017   /*
;;;2018   if((BAT_IS_ON[0]==bisON)&&(BAT_TYPE==1))
;;;2019   	{
;;;2020   	lakb[0]._battCommState=0;
;;;2021   	if(lakb[0]._cnt>10)lakb[0]._battCommState=2;
;;;2022   	else if(lakb[0]._bRS485ERR==1)lakb[0]._battCommState=1;
;;;2023   	
;;;2024   	if(lakb[0]._battCommState==0)
;;;2025   		{	
;;;2026   		bat[0]._Ub=(signed short)((lakb[0]._tot_bat_volt+5)/10);
;;;2027   		bat[0]._Ib=(signed short)lakb[0]._ch_curr;
;;;2028   		if(lakb[0]._dsch_curr) bat[0]._Ib=(signed short) (-lakb[0]._dsch_curr);
;;;2029   		bat[0]._Tb=(signed short)lakb[0]._max_cell_temp;
;;;2030   		}
;;;2031   	}
;;;2032   */
;;;2033   
;;;2034   #ifdef UKU_TELECORE2015
;;;2035   
;;;2036   	if(BAT_TYPE==2)
;;;2037   		{
;;;2038   		lakb[0]._ch_curr/*temp_SS*/=((ascii2halFhex(liBatteryInBuff[113]))<<12)+
;;;2039   					 		((ascii2halFhex(liBatteryInBuff[114]))<<8)+
;;;2040   							((ascii2halFhex(liBatteryInBuff[115]))<<4)+
;;;2041   							((ascii2halFhex(liBatteryInBuff[116])));
;;;2042   		
;;;2043   		/*if(temp_SS&0x8000)		lakb[0]._ch_curr=~temp_SS;
;;;2044   		else 				lakb[0]._ch_curr=temp_SS;*/
;;;2045   	
;;;2046   		lakb[0]._tot_bat_volt=	(unsigned short)(((ascii2halFhex(liBatteryInBuff[117]))<<12)+
;;;2047   							((ascii2halFhex(liBatteryInBuff[118]))<<8)+
;;;2048   							((ascii2halFhex(liBatteryInBuff[119]))<<4)+
;;;2049   							((ascii2halFhex(liBatteryInBuff[120]))))/100;
;;;2050   	
;;;2051   		lakb[0]._max_cell_temp= 	(((ascii2halFhex(liBatteryInBuff[93]))<<12)+
;;;2052   							((ascii2halFhex(liBatteryInBuff[94]))<<8)+
;;;2053   							((ascii2halFhex(liBatteryInBuff[95]))<<4)+
;;;2054   							((ascii2halFhex(liBatteryInBuff[96]))))/10-273;
;;;2055   	
;;;2056   		lakb[0]._s_o_c_abs=		(unsigned short)((ascii2halFhex(liBatteryInBuff[121]))<<12)+
;;;2057   							((ascii2halFhex(liBatteryInBuff[122]))<<8)+
;;;2058   							((ascii2halFhex(liBatteryInBuff[123]))<<4)+
;;;2059   							((ascii2halFhex(liBatteryInBuff[124])));
;;;2060   	
;;;2061   		lakb[0]._rat_cap=		(unsigned short)((ascii2halFhex(liBatteryInBuff[127]))<<12)+
;;;2062   							((ascii2halFhex(liBatteryInBuff[128]))<<8)+
;;;2063   							((ascii2halFhex(liBatteryInBuff[129]))<<4)+
;;;2064   							((ascii2halFhex(liBatteryInBuff[130])));
;;;2065   	
;;;2066   		lakb[0]._s_o_c=		lakb[0]._s_o_c_abs/(lakb[0]._rat_cap/100);
;;;2067   	
;;;2068   	
;;;2069   	/*	lakb[0]._rat_cap= (lakb_damp[i][13]*256)+ lakb_damp[i][14];
;;;2070   		lakb[0]._max_cell_volt= (lakb_damp[i][0]*256)+ lakb_damp[i][1];
;;;2071   		lakb[0]._min_cell_volt= (lakb_damp[i][2]*256)+ lakb_damp[i][3];
;;;2072   		lakb[0]._max_cell_temp= lakb_damp[i][4];
;;;2073   		lakb[0]._min_cell_temp= lakb_damp[i][5];
;;;2074   		lakb[0]._tot_bat_volt= (lakb_damp[i][6]*256)+ lakb_damp[i][7];
;;;2075   		lakb[0]._ch_curr= (lakb_damp[i][8]*256)+ lakb_damp[i][8];
;;;2076   		lakb[0]._dsch_curr= (lakb_damp[i][10]*256)+ lakb_damp[i][11];
;;;2077   		lakb[0]._s_o_c= lakb_damp[i][12];
;;;2078   		lakb[0]._r_b_t= lakb_damp[i][15];
;;;2079   		lakb[0]._c_c_l_v= (lakb_damp[i][16]*256)+ lakb_damp[i][17];
;;;2080   		lakb[0]._s_o_h= lakb_damp[i][18];
;;;2081   	
;;;2082   		if(lakb[i]._rat_cap==0)
;;;2083   			{
;;;2084   			if(lakb[i]._isOnCnt)
;;;2085   				{
;;;2086   				lakb[i]._isOnCnt--;
;;;2087   				if(lakb[i]._isOnCnt==0)
;;;2088   					{
;;;2089   					if(lakb[i]._battIsOn!=0) bLAKB_KONF_CH=1;
;;;2090   					}
;;;2091   				}
;;;2092   			}
;;;2093   		else 
;;;2094   			{
;;;2095   			if(lakb[i]._isOnCnt<50)
;;;2096   				{
;;;2097   				lakb[i]._isOnCnt++;
;;;2098   				if(lakb[i]._isOnCnt==50)
;;;2099   					{
;;;2100   					if(lakb[i]._battIsOn!=1) bLAKB_KONF_CH=1;
;;;2101   					}
;;;2102   				}
;;;2103   			}
;;;2104   		gran(&lakb[i]._isOnCnt,0,50);*/
;;;2105   		}
;;;2106   	else if(BAT_TYPE==3)
;;;2107   		{
;;;2108   		//short numOfPacks;
;;;2109   		//short numOfCells, numOfTemperCells, baseOfData;
;;;2110   		
;;;2111   		#ifndef UKU_TELECORE2016
;;;2112   		numOfCells=((ascii2halFhex(liBatteryInBuff[17]))<<4)+((ascii2halFhex(liBatteryInBuff[18])));
;;;2113   		numOfTemperCells=((ascii2halFhex(liBatteryInBuff[17+(numOfCells*4)+2]))<<4)+((ascii2halFhex(liBatteryInBuff[18+(numOfCells*4)+2])));
;;;2114   		numOfPacks=((ascii2halFhex(liBatteryInBuff[15]))<<4)+((ascii2halFhex(liBatteryInBuff[16])));
;;;2115   		if(numOfPacks)numOfPacks-=1;
;;;2116   		if((numOfPacks<0)||(numOfPacks>NUMBAT_TELECORE))numOfPacks=0;
;;;2117   		plazma_numOfCells=numOfCells;
;;;2118   		plazma_numOfTemperCells=numOfTemperCells;
;;;2119   		plazma_numOfPacks=numOfPacks;
;;;2120   
;;;2121   
;;;2122   		baseOfData=16+(numOfCells*4)+2+(numOfTemperCells*4)+2;
;;;2123   
;;;2124   		lakb[numOfPacks]._ch_curr=(signed short)(
;;;2125   							((ascii2halFhex(liBatteryInBuff[1+baseOfData]))<<12)+
;;;2126   							((ascii2halFhex(liBatteryInBuff[2+baseOfData]))<<8)+
;;;2127   							((ascii2halFhex(liBatteryInBuff[3+baseOfData]))<<4)+
;;;2128   							((ascii2halFhex(liBatteryInBuff[4+baseOfData])))
;;;2129   							);	  
;;;2130   
;;;2131   		lakb[numOfPacks]._tot_bat_volt=(signed short)(
;;;2132   							((ascii2halFhex(liBatteryInBuff[1+baseOfData+4]))<<12)+
;;;2133   							((ascii2halFhex(liBatteryInBuff[2+baseOfData+4]))<<8)+
;;;2134   							((ascii2halFhex(liBatteryInBuff[3+baseOfData+4]))<<4)+
;;;2135   							((ascii2halFhex(liBatteryInBuff[4+baseOfData+4])))
;;;2136   							)/10;
;;;2137   
;;;2138   		lakb[numOfPacks]._max_cell_temp=(signed short)(
;;;2139   							((ascii2halFhex(liBatteryInBuff[1+baseOfData-4]))<<12)+
;;;2140   							((ascii2halFhex(liBatteryInBuff[2+baseOfData-4]))<<8)+
;;;2141   							((ascii2halFhex(liBatteryInBuff[3+baseOfData-4]))<<4)+
;;;2142   							((ascii2halFhex(liBatteryInBuff[4+baseOfData-4])))
;;;2143   							)-2730;
;;;2144   
;;;2145   		lakb[numOfPacks]._s_o_c=(signed short)(
;;;2146   							((ascii2halFhex(liBatteryInBuff[1+baseOfData+8]))<<12)+
;;;2147   							((ascii2halFhex(liBatteryInBuff[2+baseOfData+8]))<<8)+
;;;2148   							((ascii2halFhex(liBatteryInBuff[3+baseOfData+8]))<<4)+
;;;2149   							((ascii2halFhex(liBatteryInBuff[4+baseOfData+8])))
;;;2150   							)/10;
;;;2151   
;;;2152   		lakb[numOfPacks]._s_o_h=(signed short)(
;;;2153   							((ascii2halFhex(liBatteryInBuff[1+baseOfData+14]))<<12)+
;;;2154   							((ascii2halFhex(liBatteryInBuff[2+baseOfData+14]))<<8)+
;;;2155   							((ascii2halFhex(liBatteryInBuff[3+baseOfData+14]))<<4)+
;;;2156   							((ascii2halFhex(liBatteryInBuff[4+baseOfData+14])))
;;;2157   							)/10;
;;;2158   		#endif
;;;2159   		
;;;2160   		#ifdef UKU_TELECORE2016
;;;2161   		{
;;;2162   		char i;
;;;2163   		
;;;2164   		for(i=0;i<NUMBAT_TELECORE;i++)
;;;2165   			{
;;;2166   			lakb[i]._s_o_c_percent= (signed short)(((unsigned long)lakb[i]._s_o_c*100UL)/(unsigned long)lakb[i]._s_o_h);
;;;2167   			}
;;;2168   		}
;;;2169   		#endif
;;;2170   		
;;;2171   										  
;;;2172   		}
;;;2173   	
;;;2174   if(sacredSunSilentCnt<3) 
;;;2175   	{
;;;2176       	bat[0]._Ub=lakb[0]._tot_bat_volt;
;;;2177       	bat[0]._Tb=lakb[0]._max_cell_temp;
;;;2178      	//bat[0]._Ib=lakb[0]._ch_curr/10;
;;;2179   	}
;;;2180   else 
;;;2181   	{
;;;2182       	//bat[0]._Ub=0;
;;;2183       	//bat[0]._Tb=0;
;;;2184      	//bat[0]._Ib=0;
;;;2185   	}
;;;2186   
;;;2187   if(BAT_TYPE==1)
;;;2188   	{
;;;2189   	char i;
;;;2190   	for(i=0;i<1;i++)
;;;2191   		{
;;;2192   		lakb[i]._rat_cap= (lakb_damp[i][13]*256)+ lakb_damp[i][14];
;;;2193   		lakb[i]._max_cell_volt= (lakb_damp[i][0]*256)+ lakb_damp[i][1];
;;;2194   		lakb[i]._min_cell_volt= (lakb_damp[i][2]*256)+ lakb_damp[i][3];
;;;2195   		lakb[i]._max_cell_temp= lakb_damp[i][4];
;;;2196   		lakb[i]._min_cell_temp= lakb_damp[i][5];
;;;2197   		lakb[i]._tot_bat_volt= (lakb_damp[i][6]*256)+ lakb_damp[i][7];
;;;2198   		lakb[i]._ch_curr= (lakb_damp[i][8]*256)+ lakb_damp[i][9];
;;;2199   		lakb[i]._dsch_curr= (lakb_damp[i][10]*256)+ lakb_damp[i][11];
;;;2200   		lakb[i]._s_o_c= lakb_damp[i][12];
;;;2201   		lakb[i]._r_b_t= lakb_damp[i][15];
;;;2202   		lakb[i]._c_c_l_v= (lakb_damp[i][16]*256)+ lakb_damp[i][17];
;;;2203   		lakb[i]._s_o_h= lakb_damp[i][18];
;;;2204   		lakb[i]._flags1= lakb_damp[i][34];
;;;2205   		lakb[i]._flags2= lakb_damp[i][35];
;;;2206   		lakb[i]._b_p_ser_num= lakb_damp[i][36];
;;;2207   
;;;2208   /*		if(lakb[i]._rat_cap==0)
;;;2209   			{
;;;2210   			if(lakb[i]._isOnCnt)
;;;2211   				{
;;;2212   				lakb[i]._isOnCnt--;
;;;2213   				if(lakb[i]._isOnCnt==0)
;;;2214   					{
;;;2215   					if(lakb[i]._battIsOn!=0) bLAKB_KONF_CH=1;
;;;2216   					}
;;;2217   				}
;;;2218   			}
;;;2219   		else 
;;;2220   			{
;;;2221   			if(lakb[i]._isOnCnt<50)
;;;2222   				{
;;;2223   				lakb[i]._isOnCnt++;
;;;2224   				if(lakb[i]._isOnCnt==50)
;;;2225   					{
;;;2226   					if(lakb[i]._battIsOn!=1) bLAKB_KONF_CH=1;
;;;2227   					}
;;;2228   				}
;;;2229   			} */
;;;2230   		gran(&lakb[i]._isOnCnt,0,50);
;;;2231   	 	}
;;;2232   
;;;2233   	if(lakb_damp[0][41]==100)
;;;2234   		{
;;;2235   		li_bat._485Error=1;
;;;2236   		}
;;;2237   	if(lakb_damp[0][41]==0)
;;;2238   		{
;;;2239   		//if(bRS485ERR)bLAKB_KONF_CH=1;
;;;2240   		li_bat._485Error=0;
;;;2241   		}
;;;2242   	li_bat._485ErrorCnt=lakb_damp[0][41];
;;;2243   
;;;2244   
;;;2245   	}
;;;2246   
;;;2247   
;;;2248   #endif
;;;2249   
;;;2250   		#ifdef UKU_TELECORE2017
;;;2251   		{
;;;2252   		char i;
;;;2253   		
;;;2254   		for(i=0;i<NUMBAT_TELECORE;i++)
;;;2255   			{
;;;2256   			lakb[i]._s_o_c_percent= (signed short)(((unsigned long)lakb[i]._s_o_c*100UL)/(unsigned long)lakb[i]._s_o_h);
;;;2257   			}
;;;2258   		}
;;;2259   		#endif
;;;2260   #ifdef UKU_TELECORE2015
;;;2261   //âû÷èñëåíèå ïàðàìåòðîâ ðàáîòû áàòàðåè
;;;2262   //TODO äîïèñàòü äëÿ âñåõ áàòàðåé âñå ïàðàìåòðû è ïðè îòöåïêå áàòàðåé
;;;2263   li_bat._batStat=bsOK;
;;;2264   if(BAT_TYPE==1) //COSLIGHT
;;;2265   	{
;;;2266   	if(li_bat._batStat==bsOK)
;;;2267   		{
;;;2268   		li_bat._Ub=lakb[0]._tot_bat_volt/10;
;;;2269   
;;;2270   		if(lakb[0]._ch_curr)li_bat._Ib=lakb[0]._ch_curr/10;
;;;2271   		else if(lakb[0]._dsch_curr) li_bat._Ib=bat[0]._Ib/10;//lakb[0]._dsch_curr/10;
;;;2272   	
;;;2273   		li_bat._ratCap=lakb[0]._rat_cap/100;
;;;2274   		li_bat._soc=lakb[0]._s_o_c;
;;;2275   		li_bat._soh=lakb[0]._s_o_h;
;;;2276   		li_bat._cclv=lakb[0]._c_c_l_v/10;
;;;2277   		li_bat._Tb=lakb[0]._max_cell_temp;
;;;2278   		li_bat._rbt=lakb[0]._r_b_t;
;;;2279   		}
;;;2280   	else 
;;;2281   		{
;;;2282   		li_bat._Ub=bat[0]._Ub;
;;;2283   		li_bat._Ib=bat[0]._Ib/10;
;;;2284   		li_bat._Tb=bat[0]._Tb;
;;;2285   		}
;;;2286   
;;;2287   	if((li_bat._485Error)||(li_bat._canError))
;;;2288   		{
;;;2289   		li_bat._batStat=bsOFF;
;;;2290   		}
;;;2291   	else li_bat._batStat=bsOK;
;;;2292   	}
;;;2293   else if(BAT_TYPE==2) //SACRED SUN
;;;2294   	{
;;;2295   	}
;;;2296   else if(BAT_TYPE==3) //ZTT
;;;2297   	{
;;;2298   	if(li_bat._batStat==bsOK)
;;;2299   		{
;;;2300   
;;;2301   		}
;;;2302   	}
;;;2303   #endif
;;;2304   
;;;2305   
;;;2306   /*
;;;2307   if((BAT_IS_ON[0]==bisON)&&(BAT_TYPE[0]==1)&&(BAT_LINK==0))
;;;2308   	{
;;;2309   
;;;2310   
;;;2311   	if(bat_drv_rx_buff[13]<=0x39)bbb[0]=bat_drv_rx_buff[13]-0x30;
;;;2312   	else bbb[0]=bat_drv_rx_buff[13]-55;
;;;2313   	if(bat_drv_rx_buff[14]<=0x39)bbb[1]=bat_drv_rx_buff[14]-0x30;
;;;2314   	else bbb[1]=bat_drv_rx_buff[14]-55;
;;;2315   	if(bat_drv_rx_buff[15]<=0x39)bbb[2]=bat_drv_rx_buff[15]-0x30;
;;;2316   	else bbb[2]=bat_drv_rx_buff[15]-55;
;;;2317   	if(bat_drv_rx_buff[16]<=0x39)bbb[3]=bat_drv_rx_buff[16]-0x30;
;;;2318   	else bbb[3]=bat_drv_rx_buff[16]-55;
;;;2319   
;;;2320   	tempSS=0;
;;;2321   	tempSS=((bbb[0]*4096)+(bbb[1]*256)+(bbb[2]*16)+bbb[3]);
;;;2322   
;;;2323   	bat[0]._max_cell_volt=(tempSS+5)/10;
;;;2324   
;;;2325   	if(bat_drv_rx_buff[17]<=0x39)bbb[0]=bat_drv_rx_buff[17]-0x30;
;;;2326   	else bbb[0]=bat_drv_rx_buff[17]-55;
;;;2327   	if(bat_drv_rx_buff[18]<=0x39)bbb[1]=bat_drv_rx_buff[18]-0x30;
;;;2328   	else bbb[1]=bat_drv_rx_buff[18]-55;
;;;2329   	if(bat_drv_rx_buff[19]<=0x39)bbb[2]=bat_drv_rx_buff[19]-0x30;
;;;2330   	else bbb[2]=bat_drv_rx_buff[19]-55;
;;;2331   	if(bat_drv_rx_buff[20]<=0x39)bbb[3]=bat_drv_rx_buff[20]-0x30;
;;;2332   	else bbb[3]=bat_drv_rx_buff[20]-55;
;;;2333   
;;;2334   	tempSS=0;
;;;2335   	tempSS=((bbb[0]*4096)+(bbb[1]*256)+(bbb[2]*16)+bbb[3]);
;;;2336   
;;;2337   	bat[0]._min_cell_volt=(tempSS+5)/10;
;;;2338   
;;;2339   
;;;2340   	}*/
;;;2341   
;;;2342   
;;;2343   
;;;2344   }
001690  e8bd8ffe          POP      {r1-r11,pc}
;;;2345   
                          ENDP

                  mnemo_hndl PROC
;;;2346   //-----------------------------------------------
;;;2347   void mnemo_hndl(void)
001694  4afc              LDR      r2,|L1.6792|
;;;2348   {
;;;2349   if(((ind==iMn_220)||(ind==iMn))&&(sub_ind==0)&&(MNEMO_ON==mnON))
;;;2350   	{
;;;2351   	if(mnemo_cnt)mnemo_cnt--;
001696  49fd              LDR      r1,|L1.6796|
001698  7810              LDRB     r0,[r2,#0]            ;2349  ; a_ind
00169a  2804              CMP      r0,#4                 ;2349
00169c  d001              BEQ      |L1.5794|
00169e  2801              CMP      r0,#1                 ;2349
0016a0  d105              BNE      |L1.5806|
                  |L1.5794|
0016a2  7850              LDRB     r0,[r2,#1]            ;2349  ; a_ind
0016a4  b918              CBNZ     r0,|L1.5806|
0016a6  48fa              LDR      r0,|L1.6800|
0016a8  7800              LDRB     r0,[r0,#0]            ;2349  ; MNEMO_ON
0016aa  2855              CMP      r0,#0x55              ;2349
0016ac  d003              BEQ      |L1.5814|
                  |L1.5806|
;;;2352   	}
;;;2353   else mnemo_cnt=MNEMO_TIME;
0016ae  48f9              LDR      r0,|L1.6804|
0016b0  8800              LDRH     r0,[r0,#0]  ; MNEMO_TIME
0016b2  7008              STRB     r0,[r1,#0]
                  |L1.5812|
;;;2354   }
0016b4  4770              BX       lr
                  |L1.5814|
0016b6  7808              LDRB     r0,[r1,#0]            ;2351  ; mnemo_cnt
0016b8  2800              CMP      r0,#0                 ;2351
0016ba  d0fb              BEQ      |L1.5812|
0016bc  f1a00001          SUB      r0,r0,#1              ;2351
0016c0  7008              STRB     r0,[r1,#0]            ;2351
0016c2  4770              BX       lr
;;;2355   
                          ENDP

                  adc_init PROC
;;;2356   //-----------------------------------------------
;;;2357   void adc_init(void)
0016c4  48f4              LDR      r0,|L1.6808|
;;;2358   {
;;;2359   
;;;2360   SET_REG(LPC_PINCON->PINSEL1,1,(25-16)*2,2);
0016c6  6841              LDR      r1,[r0,#4]
0016c8  f4212140          BIC      r1,r1,#0xc0000
0016cc  f4412180          ORR      r1,r1,#0x40000
0016d0  6041              STR      r1,[r0,#4]
;;;2361   SET_REG(LPC_PINCON->PINSEL1,1,(24-16)*2,2);
0016d2  6841              LDR      r1,[r0,#4]
0016d4  f4213140          BIC      r1,r1,#0x30000
0016d8  f4413180          ORR      r1,r1,#0x10000
0016dc  6041              STR      r1,[r0,#4]
;;;2362   SET_REG(LPC_PINCON->PINSEL1,1,(23-16)*2,2);
0016de  6841              LDR      r1,[r0,#4]
0016e0  f4214140          BIC      r1,r1,#0xc000
0016e4  f4414180          ORR      r1,r1,#0x4000
0016e8  6041              STR      r1,[r0,#4]
;;;2363   
;;;2364   
;;;2365   SET_REG(LPC_PINCON->PINMODE1,2,(25-16)*2,2);
0016ea  6c41              LDR      r1,[r0,#0x44]
0016ec  f4212140          BIC      r1,r1,#0xc0000
0016f0  f4412100          ORR      r1,r1,#0x80000
0016f4  6441              STR      r1,[r0,#0x44]
;;;2366   SET_REG(LPC_PINCON->PINMODE1,2,(24-16)*2,2);
0016f6  6c41              LDR      r1,[r0,#0x44]
0016f8  f4213140          BIC      r1,r1,#0x30000
0016fc  f4413100          ORR      r1,r1,#0x20000
001700  6441              STR      r1,[r0,#0x44]
;;;2367   SET_REG(LPC_PINCON->PINMODE1,2,(23-16)*2,2);
001702  6c41              LDR      r1,[r0,#0x44]
001704  f4214140          BIC      r1,r1,#0xc000
001708  f4414100          ORR      r1,r1,#0x8000
00170c  6441              STR      r1,[r0,#0x44]
;;;2368   
;;;2369   SET_REG(LPC_ADC->ADCR,0,24,3);
00170e  48e3              LDR      r0,|L1.6812|
001710  6801              LDR      r1,[r0,#0]
001712  f02161e0          BIC      r1,r1,#0x7000000
001716  6001              STR      r1,[r0,#0]
;;;2370   
;;;2371   SET_REG(LPC_ADC->ADCR,1,21,1);
001718  6801              LDR      r1,[r0,#0]
00171a  f4411100          ORR      r1,r1,#0x200000
00171e  6001              STR      r1,[r0,#0]
;;;2372   SET_REG(LPC_ADC->ADCR,0,16,1);
001720  6801              LDR      r1,[r0,#0]
001722  f4213180          BIC      r1,r1,#0x10000
001726  6001              STR      r1,[r0,#0]
;;;2373   SET_REG(LPC_ADC->ADCR,1,8,8);
001728  6801              LDR      r1,[r0,#0]
00172a  f421417f          BIC      r1,r1,#0xff00
00172e  f4417180          ORR      r1,r1,#0x100
001732  6001              STR      r1,[r0,#0]
;;;2374   
;;;2375   //SET_REG(LPC_GPIO0->FIODIR,7,5,3);
;;;2376   //SET_REG(LPC_GPIO0->FIOPIN,4,5,3);
;;;2377   	
;;;2378   	/*if(adc_ch<=7)*///SET_REG(LPC_ADC->ADCR,1<<5,0,8);
;;;2379        /*else if(adc_ch==8) SET_REG(LPC_ADC->ADCR,1<<2,0,8);
;;;2380        else SET_REG(LPC_ADC->ADCR,1<<4,0,8);*/
;;;2381   
;;;2382   LPC_ADC->ADINTEN     =  (1<< 8);      /* global enable interrupt            */
001734  f44f7180          MOV      r1,#0x100
001738  60c1              STR      r1,[r0,#0xc]
00173a  48d9              LDR      r0,|L1.6816|
00173c  f44f0180          MOV      r1,#0x400000
001740  6001              STR      r1,[r0,#0]
;;;2383   
;;;2384   NVIC_EnableIRQ(ADC_IRQn);             /* enable ADC Interrupt               */
;;;2385   
;;;2386   
;;;2387   }
001742  4770              BX       lr
;;;2388   
                          ENDP

                  adc_drv7 PROC
;;;2389   //-----------------------------------------------
;;;2390   void adc_drv7(void) //(Uñåòè - ïîñòîÿíêà)
001744  e92d41f0          PUSH     {r4-r8,lr}
;;;2391   {
;;;2392   //int temp_S;
;;;2393   //char i;
;;;2394   //signed short temp_SS;
;;;2395   
;;;2396   adc_self_ch_disp[0]=abs_pal(adc_self_ch_buff[1]-adc_self_ch_buff[0]);//adc_self_ch_buff[0]&0x0f80;
001748  4cd6              LDR      r4,|L1.6820|
00174a  8860              LDRH     r0,[r4,#2]  ; adc_self_ch_buff
00174c  8821              LDRH     r1,[r4,#0]  ; adc_self_ch_buff
00174e  1a40              SUBS     r0,r0,r1
001750  b200              SXTH     r0,r0
001752  f7fffffe          BL       abs_pal
001756  1da6              ADDS     r6,r4,#6
001758  8030              STRH     r0,[r6,#0]
;;;2397   adc_self_ch_disp[1]=abs_pal(adc_self_ch_buff[2]-adc_self_ch_buff[1]);//adc_self_ch_buff[1]&0x0f80;
00175a  88a0              LDRH     r0,[r4,#4]  ; adc_self_ch_buff
00175c  8861              LDRH     r1,[r4,#2]  ; adc_self_ch_buff
00175e  1a40              SUBS     r0,r0,r1
001760  b200              SXTH     r0,r0
001762  f7fffffe          BL       abs_pal
001766  8070              STRH     r0,[r6,#2]
;;;2398   adc_self_ch_disp[2]=abs_pal(adc_self_ch_buff[2]-adc_self_ch_buff[0]);//adc_self_ch_buff[2]&0x0f80;
001768  88a0              LDRH     r0,[r4,#4]  ; adc_self_ch_buff
00176a  8821              LDRH     r1,[r4,#0]  ; adc_self_ch_buff
00176c  1a40              SUBS     r0,r0,r1
00176e  b200              SXTH     r0,r0
001770  f7fffffe          BL       abs_pal
001774  80b0              STRH     r0,[r6,#4]
;;;2399   
;;;2400   //adc_self_ch_disp[0]=adc_self_ch_buff[0]&0x0ff0;
;;;2401   //adc_self_ch_disp[1]=adc_self_ch_buff[1]&0x0ff0;
;;;2402   //adc_self_ch_disp[2]=adc_self_ch_buff[2]&0x0ff0;
;;;2403   
;;;2404   
;;;2405   if(adc_self_ch_disp[2]<300)//==adc_self_ch_disp[2])
001776  f44f7196          MOV      r1,#0x12c
;;;2406   	{
;;;2407   	adc_result=adc_self_ch_buff[2];
00177a  f1a40596          SUB      r5,r4,#0x96
00177e  4288              CMP      r0,r1                 ;2405
001780  da02              BGE      |L1.6024|
001782  88a0              LDRH     r0,[r4,#4]  ; adc_self_ch_buff
001784  8568              STRH     r0,[r5,#0x2a]
001786  e00c              B        |L1.6050|
                  |L1.6024|
;;;2408   	} 
;;;2409   else if(adc_self_ch_disp[1]<300)//==adc_self_ch_disp[2])
001788  f9b60002          LDRSH    r0,[r6,#2]  ; adc_self_ch_disp
00178c  4288              CMP      r0,r1
00178e  da02              BGE      |L1.6038|
;;;2410   	{
;;;2411   	adc_result=adc_self_ch_buff[1];
001790  8860              LDRH     r0,[r4,#2]  ; adc_self_ch_buff
001792  8568              STRH     r0,[r5,#0x2a]
001794  e005              B        |L1.6050|
                  |L1.6038|
;;;2412   	}
;;;2413   else if(adc_self_ch_disp[0]<300)//==adc_self_ch_disp[1])
001796  f9b60000          LDRSH    r0,[r6,#0]  ; adc_self_ch_disp
00179a  4288              CMP      r0,r1
00179c  da01              BGE      |L1.6050|
;;;2414   	{
;;;2415   	adc_result=adc_self_ch_buff[0];
00179e  8820              LDRH     r0,[r4,#0]  ; adc_self_ch_buff
0017a0  8568              STRH     r0,[r5,#0x2a]
                  |L1.6050|
;;;2416   	}
;;;2417       //adc_result=92;
;;;2418   
;;;2419   if(adc_ch_net)
0017a2  78ef              LDRB     r7,[r5,#3]  ; adc_ch_net
0017a4  2600              MOVS     r6,#0
0017a6  b32f              CBZ      r7,|L1.6132|
;;;2420   	{
;;;2421   
;;;2422   	main_power_buffer[0]+=(long)(adc_result);
0017a8  48bf              LDR      r0,|L1.6824|
0017aa  f9b5102a          LDRSH    r1,[r5,#0x2a]  ; adc_result
0017ae  6802              LDR      r2,[r0,#0]  ; main_power_buffer
0017b0  440a              ADD      r2,r2,r1
0017b2  6002              STR      r2,[r0,#0]  ; main_power_buffer
;;;2423   	main_power_buffer[1]+=(long)(adc_result);
0017b4  6842              LDR      r2,[r0,#4]  ; main_power_buffer
0017b6  440a              ADD      r2,r2,r1
0017b8  6042              STR      r2,[r0,#4]  ; main_power_buffer
;;;2424   	main_power_buffer[2]+=(long)(adc_result);
0017ba  6882              LDR      r2,[r0,#8]  ; main_power_buffer
0017bc  440a              ADD      r2,r2,r1
0017be  6082              STR      r2,[r0,#8]  ; main_power_buffer
;;;2425   	main_power_buffer[3]+=(long)(adc_result);
0017c0  68c2              LDR      r2,[r0,#0xc]  ; main_power_buffer
0017c2  4411              ADD      r1,r1,r2
0017c4  60c1              STR      r1,[r0,#0xc]  ; main_power_buffer
;;;2426   
;;;2427   	adc_net_buff_cnt++;
0017c6  8e69              LDRH     r1,[r5,#0x32]  ; adc_net_buff_cnt
0017c8  f1010101          ADD      r1,r1,#1
0017cc  b209              SXTH     r1,r1
0017ce  8669              STRH     r1,[r5,#0x32]
;;;2428   	if(adc_net_buff_cnt>=0x1000)
0017d0  f5b15f80          CMP      r1,#0x1000
0017d4  db00              BLT      |L1.6104|
;;;2429   		{
;;;2430   		adc_net_buff_cnt=0;
0017d6  866e              STRH     r6,[r5,#0x32]
                  |L1.6104|
;;;2431   		}
;;;2432   	if((adc_net_buff_cnt&0x03ff)==0)
0017d8  f9b51032          LDRSH    r1,[r5,#0x32]  ; adc_net_buff_cnt
0017dc  058a              LSLS     r2,r1,#22
0017de  d131              BNE      |L1.6212|
;;;2433   		{
;;;2434   		#ifdef UKU_220
;;;2435   		net_buff_=(short)((main_power_buffer[adc_net_buff_cnt>>10])>>11);
;;;2436   		#else
;;;2437   		#ifdef UKU_220_V2
;;;2438   		net_buff_=(short)((main_power_buffer[adc_net_buff_cnt>>10])>>11);
;;;2439   		#else
;;;2440   		net_buff_=(short)((main_power_buffer[adc_net_buff_cnt>>10])>>8);
0017e0  ea4f21a1          ASR      r1,r1,#10
0017e4  f8502021          LDR      r2,[r0,r1,LSL #2]
0017e8  ea4f2222          ASR      r2,r2,#8
0017ec  852a              STRH     r2,[r5,#0x28]
;;;2441   		#endif
;;;2442   		#endif
;;;2443   		main_power_buffer[adc_net_buff_cnt>>10]=0;
0017ee  f8406021          STR      r6,[r0,r1,LSL #2]
0017f2  e027              B        |L1.6212|
                  |L1.6132|
;;;2444   		}
;;;2445   
;;;2446   
;;;2447   	} 
;;;2448   else if(!adc_ch_net)
;;;2449   	{
;;;2450   	adc_buff[adc_ch][adc_ch_cnt]=(long)adc_result;
0017f4  48ad              LDR      r0,|L1.6828|
0017f6  792c              LDRB     r4,[r5,#4]  ; adc_ch
0017f8  796a              LDRB     r2,[r5,#5]  ; adc_ch_cnt
0017fa  eb001384          ADD      r3,r0,r4,LSL #6
0017fe  f9b5102a          LDRSH    r1,[r5,#0x2a]  ; adc_result
001802  f8431022          STR      r1,[r3,r2,LSL #2]
;;;2451   	
;;;2452   	if((adc_ch_cnt&0x03)==0)
001806  0790              LSLS     r0,r2,#30
001808  d10f              BNE      |L1.6186|
;;;2453   		{
;;;2454   		long temp_L;
;;;2455   		char i;
;;;2456   		temp_L=0;
00180a  4601              MOV      r1,r0
                  |L1.6156|
;;;2457   		for(i=0;i<16;i++)
;;;2458   			{
;;;2459   			temp_L+=adc_buff[adc_ch][i];
00180c  f853c020          LDR      r12,[r3,r0,LSL #2]
001810  4461              ADD      r1,r1,r12
001812  f1000001          ADD      r0,r0,#1              ;2457
001816  b2c0              UXTB     r0,r0                 ;2457
001818  2810              CMP      r0,#0x10              ;2457
00181a  d3f7              BCC      |L1.6156|
;;;2460   			}
;;;2461   		adc_buff_[adc_ch]= (short)(temp_L>>4);
00181c  ea4f1021          ASR      r0,r1,#4
001820  49a1              LDR      r1,|L1.6824|
001822  f1a10120          SUB      r1,r1,#0x20
001826  f8210014          STRH     r0,[r1,r4,LSL #1]
                  |L1.6186|
;;;2462   
;;;2463   		//adc_buff_[3]=346;
;;;2464   		}
;;;2465   	if(++adc_ch>=16) 
00182a  1c64              ADDS     r4,r4,#1
00182c  b2e0              UXTB     r0,r4
00182e  7128              STRB     r0,[r5,#4]
001830  2810              CMP      r0,#0x10
001832  d307              BCC      |L1.6212|
;;;2466   		{
;;;2467   		adc_ch=0;
001834  712e              STRB     r6,[r5,#4]
;;;2468   		adc_ch_cnt++;
001836  f1020201          ADD      r2,r2,#1
00183a  b2d0              UXTB     r0,r2
00183c  7168              STRB     r0,[r5,#5]
;;;2469   		if(adc_ch_cnt>=16)adc_ch_cnt=0;
00183e  2810              CMP      r0,#0x10
001840  d300              BCC      |L1.6212|
001842  716e              STRB     r6,[r5,#5]
                  |L1.6212|
;;;2470   		}
;;;2471   	}
;;;2472   
;;;2473   //adc_buff[adc_ch][adc_cnt1]=(adc_self_ch_buff[2]+adc_self_ch_buff[1])/2;
;;;2474   
;;;2475   //if(adc_buff[adc_ch][adc_cnt1]<adc_buff_min[adc_ch])adc_buff_min[adc_ch]=adc_buff[adc_ch][adc_cnt1];
;;;2476   //if(adc_buff[adc_ch][adc_cnt1]>adc_buff_max[adc_ch])adc_buff_max[adc_ch]=adc_buff[adc_ch][adc_cnt1];
;;;2477   /*
;;;2478   	{
;;;2479   	if((adc_cnt1&0x03)==0)
;;;2480   		{
;;;2481   		temp_S=0;
;;;2482   		for(i=0;i<16;i++)
;;;2483   			{
;;;2484   			temp_S+=adc_buff[adc_ch][i];
;;;2485   			} 
;;;2486            	adc_buff_[adc_ch]=temp_S>>4;
;;;2487             }
;;;2488   	}*/
;;;2489   
;;;2490   
;;;2491   		  
;;;2492   
;;;2493   adc_self_ch_cnt=0;
001844  70ae              STRB     r6,[r5,#2]
;;;2494   
;;;2495   adc_ch_net++;
001846  f1070701          ADD      r7,r7,#1
;;;2496   adc_ch_net&=1;
00184a  f0070001          AND      r0,r7,#1
00184e  70e8              STRB     r0,[r5,#3]
;;;2497   
;;;2498   //SET_REG(LPC_GPIO0->FIODIR,7,5,3);
;;;2499   //SET_REG(LPC_GPIO0->FIOPIN,adc_ch,5,3);
;;;2500   
;;;2501   if(adc_ch_net)
;;;2502   	{
;;;2503   	//LPC_GPIO2->FIODIR|=(1<<7);
;;;2504   	//LPC_GPIO2->FIOPIN|=(1<<7);
;;;2505   	SET_REG(LPC_ADC->ADCR,1<<2,0,8);
001850  4a92              LDR      r2,|L1.6812|
001852  b130              CBZ      r0,|L1.6242|
001854  6810              LDR      r0,[r2,#0]
001856  f02000ff          BIC      r0,r0,#0xff
00185a  f1000004          ADD      r0,r0,#4
00185e  6010              STR      r0,[r2,#0]
001860  e03d              B        |L1.6366|
                  |L1.6242|
;;;2506   	}
;;;2507   else
;;;2508   	{
;;;2509   	//LPC_GPIO2->FIODIR|=(1<<7);
;;;2510   	//LPC_GPIO2->FIOPIN&=~(1<<7);
;;;2511   	if(!(adc_ch&(1<<3)))SET_REG(LPC_ADC->ADCR,1<<0,0,8);
001862  7929              LDRB     r1,[r5,#4]  ; adc_ch
001864  0708              LSLS     r0,r1,#28
001866  d406              BMI      |L1.6262|
001868  6810              LDR      r0,[r2,#0]
00186a  f02000ff          BIC      r0,r0,#0xff
00186e  f1000001          ADD      r0,r0,#1
001872  6010              STR      r0,[r2,#0]
001874  e005              B        |L1.6274|
                  |L1.6262|
;;;2512   	else 			SET_REG(LPC_ADC->ADCR,1<<1,0,8);
001876  6810              LDR      r0,[r2,#0]
001878  f02000ff          BIC      r0,r0,#0xff
00187c  f1000002          ADD      r0,r0,#2
001880  6010              STR      r0,[r2,#0]
                  |L1.6274|
;;;2513   
;;;2514   
;;;2515   	SET_REG(LPC_GPIO0->FIODIR,1,28,1);
001882  488b              LDR      r0,|L1.6832|
001884  6803              LDR      r3,[r0,#0]
001886  f0435380          ORR      r3,r3,#0x10000000
00188a  6003              STR      r3,[r0,#0]
;;;2516   	SET_REG(LPC_GPIO1->FIODIR,1,30,1);
00188c  6a03              LDR      r3,[r0,#0x20]
00188e  f0434380          ORR      r3,r3,#0x40000000
001892  6203              STR      r3,[r0,#0x20]
;;;2517   	SET_REG(LPC_GPIO3->FIODIR,1,26,1);
001894  6e03              LDR      r3,[r0,#0x60]
001896  f0436380          ORR      r3,r3,#0x4000000
00189a  6603              STR      r3,[r0,#0x60]
;;;2518   
;;;2519   	if(!(adc_ch&(1<<0)))SET_REG(LPC_GPIO0->FIOPIN,0,28,1);
00189c  07cb              LSLS     r3,r1,#31
00189e  d00a              BEQ      |L1.6326|
;;;2520   	else 			SET_REG(LPC_GPIO0->FIOPIN,1,28,1);
0018a0  6943              LDR      r3,[r0,#0x14]
0018a2  f0435380          ORR      r3,r3,#0x10000000
0018a6  6143              STR      r3,[r0,#0x14]
                  |L1.6312|
;;;2521   
;;;2522   	if(!(adc_ch&(1<<1)))SET_REG(LPC_GPIO1->FIOPIN,0,30,1);
0018a8  078b              LSLS     r3,r1,#30
0018aa  d409              BMI      |L1.6336|
0018ac  6b43              LDR      r3,[r0,#0x34]
0018ae  f0234380          BIC      r3,r3,#0x40000000
0018b2  6343              STR      r3,[r0,#0x34]
0018b4  e008              B        |L1.6344|
                  |L1.6326|
0018b6  6943              LDR      r3,[r0,#0x14]         ;2519
0018b8  f0235380          BIC      r3,r3,#0x10000000     ;2519
0018bc  6143              STR      r3,[r0,#0x14]         ;2519
0018be  e7f3              B        |L1.6312|
                  |L1.6336|
;;;2523   	else 			SET_REG(LPC_GPIO1->FIOPIN,1,30,1);
0018c0  6b43              LDR      r3,[r0,#0x34]
0018c2  f0434380          ORR      r3,r3,#0x40000000
0018c6  6343              STR      r3,[r0,#0x34]
                  |L1.6344|
;;;2524   
;;;2525   	if(!(adc_ch&(1<<2)))SET_REG(LPC_GPIO3->FIOPIN,0,26,1);
0018c8  0749              LSLS     r1,r1,#29
0018ca  d404              BMI      |L1.6358|
0018cc  6f41              LDR      r1,[r0,#0x74]
0018ce  f0216180          BIC      r1,r1,#0x4000000
0018d2  6741              STR      r1,[r0,#0x74]
0018d4  e003              B        |L1.6366|
                  |L1.6358|
;;;2526   	else 			SET_REG(LPC_GPIO3->FIOPIN,1,26,1);
0018d6  6f41              LDR      r1,[r0,#0x74]
0018d8  f0416180          ORR      r1,r1,#0x4000000
0018dc  6741              STR      r1,[r0,#0x74]
                  |L1.6366|
;;;2527   	}
;;;2528   	
;;;2529   
;;;2530   
;;;2531   
;;;2532   LPC_ADC->ADCR |=  (1<<24);
0018de  6810              LDR      r0,[r2,#0]
0018e0  f0407080          ORR      r0,r0,#0x1000000
0018e4  6010              STR      r0,[r2,#0]
;;;2533   
;;;2534   }
0018e6  e8bd81f0          POP      {r4-r8,pc}
;;;2535   
                          ENDP

                  avg_hndl PROC
;;;2792   //-----------------------------------------------
;;;2793   void avg_hndl(void)
0018ea  b5f0              PUSH     {r4-r7,lr}
;;;2794   { 
;;;2795   char i;
;;;2796   
;;;2797   //#define AVGCNTMAX	5
;;;2798   if(avg_main_cnt)
0018ec  4c6d              LDR      r4,|L1.6820|
0018ee  3c96              SUBS     r4,r4,#0x96
0018f0  f9b40024          LDRSH    r0,[r4,#0x24]  ; avg_main_cnt
0018f4  b118              CBZ      r0,|L1.6398|
;;;2799   	{
;;;2800   	avg_main_cnt--;
0018f6  f1a00001          SUB      r0,r0,#1
0018fa  84a0              STRH     r0,[r4,#0x24]
;;;2801   	goto avg_hndl_end;
0018fc  e090              B        |L1.6688|
                  |L1.6398|
;;;2802   	}                 
;;;2803   
;;;2804   avg_num=0;
0018fe  f04f0500          MOV      r5,#0
001902  7325              STRB     r5,[r4,#0xc]
;;;2805   
;;;2806   for(i=0;i<NUMIST;i++)
001904  4628              MOV      r0,r5
001906  496c              LDR      r1,|L1.6840|
;;;2807   	{
;;;2808   	if((bps[i]._state==bsWRK)&&(bps[i]._cnt<20))avg_num++;
001908  4b6a              LDR      r3,|L1.6836|
00190a  f9b12000          LDRSH    r2,[r1,#0]            ;2806
00190e  e012              B        |L1.6454|
                  |L1.6416|
001910  ebc001c0          RSB      r1,r0,r0,LSL #3
001914  eb011100          ADD      r1,r1,r0,LSL #4
001918  eb030181          ADD      r1,r3,r1,LSL #2
00191c  788e              LDRB     r6,[r1,#2]
00191e  2e01              CMP      r6,#1
001920  d106              BNE      |L1.6448|
001922  78c9              LDRB     r1,[r1,#3]
001924  2914              CMP      r1,#0x14
001926  d203              BCS      |L1.6448|
001928  7b21              LDRB     r1,[r4,#0xc]  ; avg_num
00192a  f1010101          ADD      r1,r1,#1
00192e  7321              STRB     r1,[r4,#0xc]
                  |L1.6448|
001930  f1000001          ADD      r0,r0,#1              ;2806
001934  b2c0              UXTB     r0,r0                 ;2806
                  |L1.6454|
001936  4290              CMP      r0,r2                 ;2806
001938  dbea              BLT      |L1.6416|
;;;2809   	}
;;;2810   
;;;2811   /*if((K[NUMI]>=1)&&(bps_state[0]==ssWRK))	avg_num++;
;;;2812   if((K[NUMI]>=2)&&(bps_state[1]==ssWRK))	avg_num++;
;;;2813   if((K[NUMI]>=3)&&(bps_state[2]==ssWRK))	avg_num++;*/
;;;2814   
;;;2815   	
;;;2816   if(avg_num<2)
00193a  7b26              LDRB     r6,[r4,#0xc]  ; avg_num
00193c  2e02              CMP      r6,#2
00193e  d36f              BCC      |L1.6688|
;;;2817   	{
;;;2818   	goto avg_hndl_end;
;;;2819   	}
;;;2820   	
;;;2821   else
;;;2822   	{
;;;2823   	i_avg_min=5000;
001940  f2413088          MOV      r0,#0x1388
001944  6760              STR      r0,[r4,#0x74]  ; i_avg_min
;;;2824   	i_avg_max=0;
001946  6725              STR      r5,[r4,#0x70]  ; i_avg_max
;;;2825   	i_avg_summ=0;
001948  67a5              STR      r5,[r4,#0x78]  ; i_avg_summ
;;;2826   	for(i=0;i<NUMIST;i++)
00194a  f04f0100          MOV      r1,#0
00194e  e017              B        |L1.6528|
                  |L1.6480|
;;;2827   		{
;;;2828   		if(bps[i]._state==bsWRK)
001950  ebc100c1          RSB      r0,r1,r1,LSL #3
001954  eb001001          ADD      r0,r0,r1,LSL #4
001958  eb030080          ADD      r0,r3,r0,LSL #2
00195c  7887              LDRB     r7,[r0,#2]
00195e  2f01              CMP      r7,#1
001960  d10b              BNE      |L1.6522|
;;;2829   			{
;;;2830   			if(bps[i]._Ii>i_avg_max)i_avg_max=bps[i]._Ii;
001962  6a40              LDR      r0,[r0,#0x24]
001964  6f27              LDR      r7,[r4,#0x70]  ; i_avg_max
001966  42b8              CMP      r0,r7
001968  dd00              BLE      |L1.6508|
00196a  6720              STR      r0,[r4,#0x70]  ; i_avg_max
                  |L1.6508|
;;;2831   			if(bps[i]._Ii<i_avg_min)i_avg_min=bps[i]._Ii;
00196c  6f67              LDR      r7,[r4,#0x74]  ; i_avg_min
00196e  42b8              CMP      r0,r7
001970  da00              BGE      |L1.6516|
001972  6760              STR      r0,[r4,#0x74]  ; i_avg_min
                  |L1.6516|
;;;2832   			
;;;2833   			i_avg_summ+=bps[i]._Ii;
001974  6fa7              LDR      r7,[r4,#0x78]  ; i_avg_summ
001976  4438              ADD      r0,r0,r7
001978  67a0              STR      r0,[r4,#0x78]  ; i_avg_summ
                  |L1.6522|
00197a  f1010101          ADD      r1,r1,#1              ;2826
00197e  b2c9              UXTB     r1,r1                 ;2826
                  |L1.6528|
001980  4291              CMP      r1,r2                 ;2826
001982  dbe5              BLT      |L1.6480|
;;;2834   			}
;;;2835   		}
;;;2836   	i_avg=i_avg_summ/avg_num;	
001984  6fa0              LDR      r0,[r4,#0x78]  ; i_avg_summ
001986  fb90f6f6          SDIV     r6,r0,r6
00198a  67e6              STR      r6,[r4,#0x7c]  ; i_avg
;;;2837   	
;;;2838   	if(i_avg_min==0)i_avg_min=1;
00198c  6f60              LDR      r0,[r4,#0x74]  ; i_avg_min
00198e  2101              MOVS     r1,#1                 ;2808
001990  b900              CBNZ     r0,|L1.6548|
001992  6761              STR      r1,[r4,#0x74]  ; i_avg_min
                  |L1.6548|
;;;2839   
;;;2840   	avg=i_avg_max;
001994  4f43              LDR      r7,|L1.6820|
001996  6f20              LDR      r0,[r4,#0x70]  ; i_avg_max
001998  3f16              SUBS     r7,r7,#0x16
;;;2841   	avg*=100;
00199a  f04f0c64          MOV      r12,#0x64
00199e  fb00f00c          MUL      r0,r0,r12
;;;2842   	avg/=i_avg_min;
0019a2  f8d4c074          LDR      r12,[r4,#0x74]  ; i_avg_min
0019a6  fb90f0fc          SDIV     r0,r0,r12
0019aa  6038              STR      r0,[r7,#0]  ; avg
;;;2843   
;;;2844   	if(avg>160) bAVG=1;
0019ac  28a0              CMP      r0,#0xa0
0019ae  dd00              BLE      |L1.6578|
0019b0  72e1              STRB     r1,[r4,#0xb]
                  |L1.6578|
;;;2845   	if(avg<120) bAVG=0;
0019b2  2878              CMP      r0,#0x78
0019b4  da00              BGE      |L1.6584|
0019b6  72e5              STRB     r5,[r4,#0xb]
                  |L1.6584|
;;;2846   
;;;2847   	if(bAVG==1)
0019b8  7ae0              LDRB     r0,[r4,#0xb]  ; bAVG
0019ba  2801              CMP      r0,#1
0019bc  d130              BNE      |L1.6688|
;;;2848   		{
;;;2849   		for(i=0;i<NUMIST;i++)
0019be  f04f0100          MOV      r1,#0
;;;2850   			{
;;;2851   			if(bps[i]._state==bsWRK)
;;;2852   				{
;;;2853   				if(bps[i]._Ii>i_avg)bps[i]._x_--;
;;;2854   				if(bps[i]._Ii<i_avg)bps[i]._x_++;
;;;2855   			
;;;2856   				if(bps[i]._x_<-50)bps[i]._x_=-50;
0019c2  f06f0431          MVN      r4,#0x31
0019c6  e029              B        |L1.6684|
                  |L1.6600|
0019c8  ebc100c1          RSB      r0,r1,r1,LSL #3       ;2851
0019cc  eb001001          ADD      r0,r0,r1,LSL #4       ;2851
0019d0  eb030080          ADD      r0,r3,r0,LSL #2       ;2851
0019d4  7885              LDRB     r5,[r0,#2]            ;2851
0019d6  2d01              CMP      r5,#1                 ;2851
0019d8  d11d              BNE      |L1.6678|
0019da  6a45              LDR      r5,[r0,#0x24]         ;2853
0019dc  42b5              CMP      r5,r6                 ;2853
0019de  dd05              BLE      |L1.6636|
0019e0  f8b05050          LDRH     r5,[r0,#0x50]         ;2853
0019e4  f1a50501          SUB      r5,r5,#1              ;2853
0019e8  f8a05050          STRH     r5,[r0,#0x50]         ;2853
                  |L1.6636|
0019ec  da05              BGE      |L1.6650|
0019ee  f8b05050          LDRH     r5,[r0,#0x50]         ;2854
0019f2  f1050501          ADD      r5,r5,#1              ;2854
0019f6  f8a05050          STRH     r5,[r0,#0x50]         ;2854
                  |L1.6650|
0019fa  f9b05050          LDRSH    r5,[r0,#0x50]
0019fe  42a5              CMP      r5,r4
001a00  da01              BGE      |L1.6662|
001a02  f8a04050          STRH     r4,[r0,#0x50]
                  |L1.6662|
;;;2857   				if(bps[i]._x_>50)bps[i]._x_=50;	
001a06  f9b05050          LDRSH    r5,[r0,#0x50]
001a0a  2d32              CMP      r5,#0x32
001a0c  dd03              BLE      |L1.6678|
001a0e  f04f0532          MOV      r5,#0x32
001a12  f8a05050          STRH     r5,[r0,#0x50]
                  |L1.6678|
001a16  f1010101          ADD      r1,r1,#1              ;2849
001a1a  b2c9              UXTB     r1,r1                 ;2849
                  |L1.6684|
001a1c  4291              CMP      r1,r2                 ;2849
001a1e  dbd3              BLT      |L1.6600|
                  |L1.6688|
;;;2858   				}
;;;2859   			}		
;;;2860   		}			
;;;2861   	}   	 
;;;2862   
;;;2863   
;;;2864   avg_hndl_end:
;;;2865   __nop();  
001a20  bf00              NOP      
;;;2866   }
001a22  bdf0              POP      {r4-r7,pc}
;;;2867   
                          ENDP

                  rele_hndl PROC
;;;2880   //*************-----------------------------------------------
;;;2881   void rele_hndl(void)
001a24  e92d5ff0          PUSH     {r4-r12,lr}
;;;2882   {
;;;2883   //static char cnt_rel_sam;
;;;2884   //char temp;
;;;2885   
;;;2886   //temp=0;
;;;2887   
;;;2888   
;;;2889   SET_REG(LPC_PINCON->PINSEL0,0,4*2,6*2);
001a28  481b              LDR      r0,|L1.6808|
001a2a  6801              LDR      r1,[r0,#0]
001a2c  4a23              LDR      r2,|L1.6844|
001a2e  ea010102          AND      r1,r1,r2
001a32  6001              STR      r1,[r0,#0]
;;;2890   SET_REG(LPC_GPIO0->FIODIR,63,4,6);
001a34  4c1e              LDR      r4,|L1.6832|
001a36  6821              LDR      r1,[r4,#0]
001a38  f441717c          ORR      r1,r1,#0x3f0
001a3c  6021              STR      r1,[r4,#0]
;;;2891   SET_REG(LPC_PINCON->PINSEL7,0,(25-16)*2,2);
001a3e  69c1              LDR      r1,[r0,#0x1c]
001a40  f4212140          BIC      r1,r1,#0xc0000
001a44  61c1              STR      r1,[r0,#0x1c]
;;;2892   SET_REG(LPC_GPIO3->FIODIR,1,25,1);
001a46  6e21              LDR      r1,[r4,#0x60]
001a48  f0417100          ORR      r1,r1,#0x2000000
001a4c  6621              STR      r1,[r4,#0x60]
;;;2893   SET_REG(LPC_PINCON->PINSEL1,0,(29-16)*2,2);
001a4e  6841              LDR      r1,[r0,#4]
001a50  f0216140          BIC      r1,r1,#0xc000000
001a54  6041              STR      r1,[r0,#4]
;;;2894   SET_REG(LPC_GPIO0->FIODIR,1,29,1);
001a56  6820              LDR      r0,[r4,#0]
001a58  f0405000          ORR      r0,r0,#0x20000000
001a5c  6020              STR      r0,[r4,#0]
;;;2895   
;;;2896   
;;;2897   
;;;2898   
;;;2899   
;;;2900   
;;;2901   if((((bat[0]._rel_stat)  || (tbatdisable_stat!=tbdsON))&&(tbatdisable_cmnd))	&& (main_1Hz_cnt>5))
001a5e  4819              LDR      r0,|L1.6852|
001a60  4b17              LDR      r3,|L1.6848|
001a62  491a              LDR      r1,|L1.6860|
001a64  7802              LDRB     r2,[r0,#0]  ; tbatdisable_stat
001a66  4818              LDR      r0,|L1.6856|
001a68  f893503c          LDRB     r5,[r3,#0x3c]  ; bat
001a6c  f9b11000          LDRSH    r1,[r1,#0]
001a70  7800              LDRB     r0,[r0,#0]
001a72  4315              ORRS     r5,r5,r2
001a74  d02c              BEQ      |L1.6864|
001a76  b130              CBZ      r0,|L1.6790|
001a78  2905              CMP      r1,#5
001a7a  dd29              BLE      |L1.6864|
;;;2902   	{
;;;2903   	SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_BAT1,1);
001a7c  69a5              LDR      r5,[r4,#0x18]
001a7e  f4457580          ORR      r5,r5,#0x100
001a82  61a5              STR      r5,[r4,#0x18]
001a84  e028              B        |L1.6872|
                  |L1.6790|
001a86  e023              B        |L1.6864|
                  |L1.6792|
                          DCD      a_ind
                  |L1.6796|
                          DCD      mnemo_cnt
                  |L1.6800|
                          DCD      MNEMO_ON
                  |L1.6804|
                          DCD      MNEMO_TIME
                  |L1.6808|
                          DCD      0x4002c000
                  |L1.6812|
                          DCD      0x40034000
                  |L1.6816|
                          DCD      0xe000e100
                  |L1.6820|
                          DCD      ||area_number.23||+0x96
                  |L1.6824|
                          DCD      ||.bss||+0x420
                  |L1.6828|
                          DCD      ||.bss||
                  |L1.6832|
                          DCD      0x2009c000
                  |L1.6836|
                          DCD      bps
                  |L1.6840|
                          DCD      NUMIST
                  |L1.6844|
                          DCD      0xfff000ff
                  |L1.6848|
                          DCD      bat
                  |L1.6852|
                          DCD      tbatdisable_stat
                  |L1.6856|
                          DCD      tbatdisable_cmnd
                  |L1.6860|
                          DCD      main_1Hz_cnt
                  |L1.6864|
;;;2904   	}
;;;2905   else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_BAT1,1);	  	
001ad0  69e5              LDR      r5,[r4,#0x1c]
001ad2  f4457580          ORR      r5,r5,#0x100
001ad6  61e5              STR      r5,[r4,#0x1c]
                  |L1.6872|
;;;2906   
;;;2907   if((((bat[1]._rel_stat) || (tbatdisable_stat!=tbdsON))&&(tbatdisable_cmnd))	&& (main_1Hz_cnt>5))
001ad8  f8933088          LDRB     r3,[r3,#0x88]  ; bat
001adc  4313              ORRS     r3,r3,r2
001ade  d007              BEQ      |L1.6896|
001ae0  b130              CBZ      r0,|L1.6896|
001ae2  2905              CMP      r1,#5
001ae4  dd04              BLE      |L1.6896|
;;;2908   	{
;;;2909   	SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_BAT2,1);
001ae6  69a0              LDR      r0,[r4,#0x18]
001ae8  f0400040          ORR      r0,r0,#0x40
001aec  61a0              STR      r0,[r4,#0x18]
001aee  e003              B        |L1.6904|
                  |L1.6896|
;;;2910   	}
;;;2911   else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_BAT2,1);
001af0  69e0              LDR      r0,[r4,#0x1c]
001af2  f0400040          ORR      r0,r0,#0x40
001af6  61e0              STR      r0,[r4,#0x1c]
                  |L1.6904|
;;;2912   
;;;2913   
;;;2914   if(mess_find_unvol((MESS2RELE_HNDL))&&(mess_data[0]==PARAM_RELE_SAMOKALIBR)) 
001af8  20d2              MOVS     r0,#0xd2
001afa  f7fffffe          BL       mess_find_unvol
001afe  4df9              LDR      r5,|L1.7908|
001b00  b110              CBZ      r0,|L1.6920|
001b02  6828              LDR      r0,[r5,#0]  ; mess_data
001b04  2864              CMP      r0,#0x64
001b06  d04a              BEQ      |L1.7070|
                  |L1.6920|
;;;2915   	{
;;;2916   	if(mess_data[1]==1)SET_REG(LPC_GPIO0->FIOSET,1,29,1);
;;;2917   	else if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,29,1);
;;;2918   	}
;;;2919   else SET_REG(LPC_GPIO0->FIOCLR,1,29,1);
001b08  69e0              LDR      r0,[r4,#0x1c]
001b0a  f0405000          ORR      r0,r0,#0x20000000
001b0e  61e0              STR      r0,[r4,#0x1c]
                  |L1.6928|
;;;2920   
;;;2921   
;;;2922   #ifndef UKU2071x
;;;2923   //Ðåëå àâàðèè ñåòè
;;;2924   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_NET))
;;;2925   	{
;;;2926   	if(mess_data[1]==0) 			SET_REG(LPC_GPIO3->FIOSET,1,SHIFT_REL_AV_NET,1);
;;;2927   	else 						SET_REG(LPC_GPIO3->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;2928   	}
;;;2929   else	if(!(avar_ind_stat&0x00000001)) 	SET_REG(LPC_GPIO3->FIOSET,1,SHIFT_REL_AV_NET,1);
;;;2930   else 							SET_REG(LPC_GPIO3->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;2931   #endif
;;;2932   #ifdef UKU2071x
;;;2933   //Ðåëå àâàðèè ñåòè
;;;2934   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_NET))
001b10  20d2              MOVS     r0,#0xd2
001b12  f7fffffe          BL       mess_find_unvol
;;;2935   	{
;;;2936   	if(mess_data[1]==0)				SET_REG(LPC_GPIO3->FIOCLR,1,SHIFT_REL_AV_NET,1); 
;;;2937   	else 						SET_REG(LPC_GPIO3->FIOSET,1,SHIFT_REL_AV_NET,1);
;;;2938   	}
;;;2939   else	if(!(avar_ind_stat&0x00000001))	SET_REG(LPC_GPIO3->FIOCLR,1,SHIFT_REL_AV_NET,1);
001b16  4ef4              LDR      r6,|L1.7912|
001b18  b110              CBZ      r0,|L1.6944|
001b1a  6828              LDR      r0,[r5,#0]            ;2934  ; mess_data
001b1c  2866              CMP      r0,#0x66              ;2934
001b1e  d04d              BEQ      |L1.7100|
                  |L1.6944|
001b20  6830              LDR      r0,[r6,#0]  ; avar_ind_stat
001b22  07c0              LSLS     r0,r0,#31
001b24  d056              BEQ      |L1.7124|
;;;2940   else 					  		SET_REG(LPC_GPIO3->FIOSET,1,SHIFT_REL_AV_NET,1);
001b26  6fa0              LDR      r0,[r4,#0x78]
001b28  f0407000          ORR      r0,r0,#0x2000000
001b2c  67a0              STR      r0,[r4,#0x78]
                  |L1.6958|
;;;2941   #endif
;;;2942   
;;;2943   #ifdef UKU_3U
;;;2944   //Ðåëå àâàðèé áàòàðåé
;;;2945   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BAT1))
;;;2946   	{
;;;2947   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT1,1);
;;;2948   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT1,1);
;;;2949        }
;;;2950   else 
;;;2951   	{
;;;2952   	if(!(avar_ind_stat&0x00000002)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT1,1);
;;;2953        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT1,1);
;;;2954   	} 
;;;2955   
;;;2956   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BAT2))
;;;2957   	{
;;;2958   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT2,1);
;;;2959   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT2,1);
;;;2960        }
;;;2961   else 
;;;2962   	{
;;;2963   	if(!(avar_ind_stat&0x00000004)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT2,1);
;;;2964        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT2,1);
;;;2965   	} 
;;;2966   
;;;2967   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BPS))
;;;2968   	{
;;;2969   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
;;;2970   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
;;;2971        }
;;;2972   else 
;;;2973   	{
;;;2974   	if(!(avar_ind_stat&0x000007f8)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
;;;2975        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
;;;2976   	} 
;;;2977   
;;;2978   #endif
;;;2979   
;;;2980   
;;;2981   #ifdef UKU_GLONASS
;;;2982   //Ðåëå àâàðèé áàòàðåé
;;;2983   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BAT1))
;;;2984   	{
;;;2985   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT1,1);
;;;2986   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT1,1);
;;;2987        }
;;;2988   else 
;;;2989   	{
;;;2990   	if(!(avar_ind_stat&0x00000002)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT1,1);
;;;2991        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT1,1);
;;;2992   	} 
;;;2993   
;;;2994   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BAT2))
;;;2995   	{
;;;2996   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT2,1);
;;;2997   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT2,1);
;;;2998        }
;;;2999   else 
;;;3000   	{
;;;3001   	if(!(avar_ind_stat&0x00000004)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT2,1);
;;;3002        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT2,1);
;;;3003   	} 
;;;3004   
;;;3005   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BPS))
;;;3006   	{
;;;3007   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
;;;3008   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
;;;3009        }
;;;3010   else 
;;;3011   	{
;;;3012   	if(!(avar_ind_stat&0x000007f8)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
;;;3013        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
;;;3014   	} 
;;;3015   
;;;3016   #endif
;;;3017   
;;;3018   #ifdef U 
;;;3019   
;;;3020   #endif
;;;3021   
;;;3022   #ifdef UKU_RSTKM
;;;3023   
;;;3024   //Ðåëå îáùåé àâàðèè
;;;3025   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_COMM))
;;;3026   	{
;;;3027   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_COMM,1);
;;;3028   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_COMM,1);
;;;3029   	}
;;;3030   else 
;;;3031   	{
;;;3032        if(  (!(avar_ind_stat&0x00007fff))/* &&
;;;3033             ((!SK_REL_EN[0]) || (sk_av_stat[0]!=sasON))  &&
;;;3034             ((!SK_REL_EN[1]) || (sk_av_stat[1]!=sasON))  &&
;;;3035             ((!SK_REL_EN[2]) || (sk_av_stat[2]!=sasON))  &&
;;;3036             ((!SK_REL_EN[3]) || (sk_av_stat[3]!=sasON))*/  )SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_COMM,1);
;;;3037        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_COMM,1);
;;;3038   	}
;;;3039   	
;;;3040   
;;;3041   //Ðåëå îñâåùåíèÿ
;;;3042   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_LIGHT))
;;;3043   	{
;;;3044   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LIGHT,1);
;;;3045   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LIGHT,1);
;;;3046        }
;;;3047   else 
;;;3048   	{
;;;3049   	if(sk_av_stat[0]!=sasON) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LIGHT,1);
;;;3050        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LIGHT,1);
;;;3051   	}
;;;3052   
;;;3053   
;;;3054   //Ðåëå âûêëþ÷åíèÿ íàãðóçêè
;;;3055   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_LOAD_OFF))
;;;3056   	{
;;;3057   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LOAD_OFF,1);
;;;3058   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LOAD_OFF,1);
;;;3059        }
;;;3060   else if(tloaddisable_cmnd==0)
;;;3061   	{
;;;3062   	SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LOAD_OFF,1);
;;;3063   	}
;;;3064   else if((tloaddisable_cmnd)&&(tloaddisable_cmnd<=11))
;;;3065   	{
;;;3066   	SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LOAD_OFF,1);
;;;3067   	}
;;;3068   
;;;3069   else 
;;;3070   	{
;;;3071   	if(!(tloaddisable_stat==tldsON)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LOAD_OFF,1);
;;;3072        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LOAD_OFF,1);
;;;3073   	} 
;;;3074   
;;;3075   //Ðåëå îñåâîãî âåíòèëÿòîðà
;;;3076   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_VENT))
;;;3077   	{
;;;3078   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;3079   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT,1);
;;;3080   	}
;;;3081   else 
;;;3082   	{
;;;3083   	if(mixer_vent_stat==mvsOFF) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;3084        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT,1);
;;;3085   	} 
;;;3086   
;;;3087   #endif
;;;3088   
;;;3089   #ifdef UKU_KONTUR
;;;3090   
;;;3091   //Ðåëå îáùåé àâàðèè
;;;3092   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_COMM))
;;;3093   	{
;;;3094   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_COMM,1);
;;;3095   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_COMM,1);
;;;3096   	}
;;;3097   else 
;;;3098   	{
;;;3099        if(  (!(avar_ind_stat&0x00007fff)) &&
;;;3100             ((!SK_REL_EN[0]) || (sk_av_stat[0]!=sasON))  &&
;;;3101             ((!SK_REL_EN[1]) || (sk_av_stat[1]!=sasON))  &&
;;;3102             ((!SK_REL_EN[2]) || (sk_av_stat[2]!=sasON))  /*&&
;;;3103             ((!SK_REL_EN[3]) || (sk_av_stat[3]!=sasON))*/  )SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_COMM,1);
;;;3104        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_COMM,1);
;;;3105   	}
;;;3106   
;;;3107   	
;;;3108   //rel_warm_plazma=0;
;;;3109   //Ðåëå îñâåùåíèÿ   
;;;3110   /*
;;;3111   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_WARM))
;;;3112   	{
;;;3113   	if(mess_data[1]==0)
;;;3114   		{
;;;3115   		SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_WARM,1);
;;;3116   		rel_warm_plazma=1;
;;;3117   		}
;;;3118   	else if(mess_data[1]==1) 
;;;3119   		{
;;;3120   		SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_WARM,1);
;;;3121   		rel_warm_plazma=2;
;;;3122   		}
;;;3123        }
;;;3124   else 
;;;3125   	{
;;;3126   	if(warm_stat_k==wsOFF) 
;;;3127   		{
;;;3128   		SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_WARM,1);
;;;3129   		rel_warm_plazma=3;
;;;3130   		}
;;;3131        else 
;;;3132   		{
;;;3133   		SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_WARM,1);
;;;3134   		rel_warm_plazma=4;
;;;3135   		}
;;;3136   	}
;;;3137   */
;;;3138   //Ðåëå îñâåùåíèÿ
;;;3139   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_LIGHT))
;;;3140   	{
;;;3141   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LIGHT,1);
;;;3142   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LIGHT,1);
;;;3143        }
;;;3144   else 
;;;3145   	{
;;;3146   	if(sk_av_stat[0]!=sasON) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LIGHT,1);
;;;3147        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LIGHT,1);
;;;3148   	}
;;;3149   
;;;3150   
;;;3151   
;;;3152   //Ðåëå âûêëþ÷åíèÿ íàãðóçêè
;;;3153   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_LOAD_OFF))
;;;3154   	{
;;;3155   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LOAD_OFF,1);
;;;3156   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LOAD_OFF,1);
;;;3157        }
;;;3158   else if(tloaddisable_cmnd==0)
;;;3159   	{
;;;3160   	SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LOAD_OFF,1);
;;;3161   	}
;;;3162   else if((tloaddisable_cmnd)&&(tloaddisable_cmnd<=11))
;;;3163   	{
;;;3164   	SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LOAD_OFF,1);
;;;3165   	}
;;;3166   
;;;3167   else 
;;;3168   	{
;;;3169   	if(!(tloaddisable_stat==tldsON)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LOAD_OFF,1);
;;;3170        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LOAD_OFF,1);
;;;3171   	} 
;;;3172   
;;;3173   //Ðåëå îñåâîãî âåíòèëÿòîðà èëè îòîïèòåëÿ
;;;3174   if(RELE_LOG)
;;;3175   	{
;;;3176   	if((mess_find_unvol(MESS2RELE_HNDL))&&(mess_data[0]==PARAM_RELE_VENT_WARM))
;;;3177   		{
;;;3178   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT_WARM,1);
;;;3179   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT_WARM,1);
;;;3180   		}
;;;3181   	else 
;;;3182   		{
;;;3183   		if(warm_stat_k==wsOFF) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT_WARM,1);
;;;3184   	     else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT_WARM,1);
;;;3185   		} 
;;;3186   
;;;3187   	}
;;;3188   else 
;;;3189   	{
;;;3190   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_VENT_WARM))
;;;3191   		{
;;;3192   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT_WARM,1);
;;;3193   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT_WARM,1);
;;;3194   		}
;;;3195   	else 
;;;3196   		{
;;;3197   		if(vent_stat_k==vsOFF) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT_WARM,1);
;;;3198   	     else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT_WARM,1);
;;;3199   		} 
;;;3200   	}
;;;3201   #endif
;;;3202   
;;;3203   #ifdef UKU_6U
;;;3204   //Ðåëå àâàðèé áàòàðåé
;;;3205   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BAT1))
;;;3206   	{
;;;3207   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT1,1);
;;;3208   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT1,1);
;;;3209        }
;;;3210   else 
;;;3211   	{
;;;3212   	if(!(avar_ind_stat&0x00000002)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT1,1);
;;;3213        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT1,1);
;;;3214   	} 
;;;3215   
;;;3216   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BAT2))
;;;3217   	{
;;;3218   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT2,1);
;;;3219   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT2,1);
;;;3220       }
;;;3221   else if(NPN_OUT==npnoRELEAVBAT2)
;;;3222   	{
;;;3223   	if(npn_stat==npnsOFF)//&&(mess_find_unvol(MESS2RELE_HNDL))&&(mess_data[0]==PARAM_RELE_NPN))
;;;3224   		{
;;;3225   		/*if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT2,1);
;;;3226   		else if(mess_data[1]==1)*/ SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT2,1);
;;;3227        	}
;;;3228   	else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT2,1);
;;;3229   	}
;;;3230   else 
;;;3231   	{
;;;3232   	if(!(avar_ind_stat&0x00000004)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT2,1);
;;;3233       else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT2,1);
;;;3234   	} 
;;;3235   
;;;3236   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BPS))
;;;3237   	{
;;;3238   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
;;;3239   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
;;;3240        }
;;;3241   else 
;;;3242   	{
;;;3243   	if(!(avar_ind_stat&0x000007f8)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
;;;3244        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
;;;3245   	} 
;;;3246   
;;;3247   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_VENT))
;;;3248   	{
;;;3249   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT,1);
;;;3250   	else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;3251   	}
;;;3252   else if((NPN_OUT==npnoRELEVENT))
;;;3253   	{
;;;3254   	if(npn_stat==npnsOFF)//&&(mess_find_unvol(MESS2RELE_HNDL))&&(mess_data[0]==PARAM_RELE_NPN))
;;;3255   		{
;;;3256   		/*if(mess_data[1]==0)*/ SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;3257   		//else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;3258       	}
;;;3259   	else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT,1);
;;;3260   	}
;;;3261   else 
;;;3262   	{
;;;3263   	if(!vent_stat) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT,1);
;;;3264   	else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;3265   	}
;;;3266   
;;;3267   #endif
;;;3268   
;;;3269   #ifdef UKU_220
;;;3270   //Ðåëå àâàðèé áàòàðåé
;;;3271   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BAT))
;;;3272   	{
;;;3273   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT,1);
;;;3274   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT,1);
;;;3275        }
;;;3276   else 
;;;3277   	{
;;;3278   	if(!(avar_ind_stat&0x00000002)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT,1);
;;;3279        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT,1);
;;;3280   	} 
;;;3281   
;;;3282   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BPS))
;;;3283   	{
;;;3284   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
;;;3285   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
;;;3286        }
;;;3287   else 
;;;3288   	{
;;;3289   	if(!(avar_ind_stat&0x000007f8)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
;;;3290        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
;;;3291   	} 
;;;3292   
;;;3293   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_VENT))
;;;3294   	{
;;;3295   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT,1);
;;;3296   	else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;3297   	}
;;;3298   else 
;;;3299   	{
;;;3300   	if((RELE_VENT_LOGIC==0)||(RELE_VENT_LOGIC==1))
;;;3301   		{
;;;3302   		if(vent_stat) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT,1);
;;;3303   		else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;3304   		}
;;;3305   	else 
;;;3306   		{
;;;3307   		if((avar_ind_stat&0x00000004)) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT,1);
;;;3308        	else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;3309   		}
;;;3310   	}
;;;3311   
;;;3312   #endif
;;;3313   
;;;3314   #ifdef UKU_220_V2
;;;3315   //Ðåëå àâàðèé áàòàðåé
;;;3316   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BAT))
;;;3317   	{
;;;3318   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT,1);
;;;3319   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT,1);
;;;3320        }
;;;3321   else 
;;;3322   	{
;;;3323   	if(!(avar_ind_stat&0x00000002)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT,1);
;;;3324        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT,1);
;;;3325   	} 
;;;3326   
;;;3327   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BPS))
;;;3328   	{
;;;3329   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
;;;3330   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
;;;3331        }
;;;3332   else 
;;;3333   	{
;;;3334   	if(!(avar_ind_stat&0x000007f8)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
;;;3335        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
;;;3336   	} 
;;;3337   
;;;3338   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_VENT))
;;;3339   	{
;;;3340   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT,1);
;;;3341   	else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;3342   	}
;;;3343   else 
;;;3344   	{
;;;3345   	if((RELE_VENT_LOGIC==0)||(RELE_VENT_LOGIC==1))
;;;3346   		{
;;;3347   		if(vent_stat) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT,1);
;;;3348   		else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;3349   		}
;;;3350   	else 
;;;3351   		{
;;;3352   		if((avar_ind_stat&0x00000004)) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT,1);
;;;3353        	else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;3354   		}
;;;3355   	}
;;;3356   
;;;3357   #endif
;;;3358   
;;;3359   #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;3360   
;;;3361   if((AUSW_MAIN==22010)||(AUSW_MAIN==22011))
001b2e  48ef              LDR      r0,|L1.7916|
;;;3362   	{
;;;3363   	#ifndef UKU2071x
;;;3364   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_NET))
;;;3365   		{
;;;3366   		if(mess_data[1]==0) SET_REG(LPC_GPIO3->FIOSET,1,25,1);
;;;3367   		else SET_REG(LPC_GPIO3->FIOCLR,1,25,1);
;;;3368   		}
;;;3369   	else	if(!(avar_ind_stat&0x00000001)) SET_REG(LPC_GPIO3->FIOSET,1,25,1);
;;;3370   	else SET_REG(LPC_GPIO3->FIOCLR,1,25,1);
;;;3371   	#endif
;;;3372   
;;;3373   	#ifdef UKU2071x
;;;3374   		#ifndef APSENERGIA
;;;3375   		if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_NET))
;;;3376   			{
;;;3377   			if(mess_data[1]==0) SET_REG(LPC_GPIO3->FIOCLR,1,25,1);
;;;3378   			else SET_REG(LPC_GPIO3->FIOSET,1,25,1);
;;;3379   			}
;;;3380   		else	if(!(avar_ind_stat&0x00000001)) SET_REG(LPC_GPIO3->FIOCLR,1,25,1);
;;;3381   		else SET_REG(LPC_GPIO3->FIOSET,1,25,1);
;;;3382   		#endif
;;;3383   
;;;3384   		#ifdef APSENERGIA
;;;3385   		if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_NET))
;;;3386   			{
;;;3387   			if(mess_data[1]==0) SET_REG(LPC_GPIO3->FIOCLR,1,25,1);
;;;3388   			else SET_REG(LPC_GPIO3->FIOSET,1,25,1);
;;;3389   			}
;;;3390   		else if((mess_find_unvol(MESS2RELE_HNDL))&& (mess_data[0]==PARAM_RELE_BAT_IS_DISCHARGED))  SET_REG(LPC_GPIO3->FIOCLR,1,25,1);
;;;3391   		else SET_REG(LPC_GPIO3->FIOSET,1,25,1);
;;;3392   		#endif
;;;3393   
;;;3394   	#endif
;;;3395   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BPS))
;;;3396   		{
;;;3397   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,7,1);
;;;3398   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,7,1);
;;;3399   	     }
;;;3400   	else 
;;;3401   		{
;;;3402   		if(!(avar_ind_stat&0x100007f8)) SET_REG(LPC_GPIO0->FIOCLR,1,7,1);
001b30  4fef              LDR      r7,|L1.7920|
001b32  8800              LDRH     r0,[r0,#0]            ;3361  ; AUSW_MAIN
001b34  f5a041aa          SUB      r1,r0,#0x5500         ;3361
001b38  39fa              SUBS     r1,r1,#0xfa           ;3361
001b3a  d001              BEQ      |L1.6976|
001b3c  1e49              SUBS     r1,r1,#1              ;3361
001b3e  d173              BNE      |L1.7208|
                  |L1.6976|
001b40  20d2              MOVS     r0,#0xd2              ;3385
001b42  f7fffffe          BL       mess_find_unvol
001b46  b110              CBZ      r0,|L1.6990|
001b48  6828              LDR      r0,[r5,#0]            ;3385  ; mess_data
001b4a  2866              CMP      r0,#0x66              ;3385
001b4c  d047              BEQ      |L1.7134|
                  |L1.6990|
001b4e  20d2              MOVS     r0,#0xd2              ;3390
001b50  f7fffffe          BL       mess_find_unvol
001b54  b110              CBZ      r0,|L1.7004|
001b56  6828              LDR      r0,[r5,#0]            ;3390  ; mess_data
001b58  2872              CMP      r0,#0x72              ;3390
001b5a  d04d              BEQ      |L1.7160|
                  |L1.7004|
001b5c  6fa0              LDR      r0,[r4,#0x78]         ;3391
001b5e  f0407000          ORR      r0,r0,#0x2000000      ;3391
001b62  67a0              STR      r0,[r4,#0x78]         ;3391
                  |L1.7012|
001b64  20d2              MOVS     r0,#0xd2              ;3395
001b66  f7fffffe          BL       mess_find_unvol
001b6a  b110              CBZ      r0,|L1.7026|
001b6c  6828              LDR      r0,[r5,#0]            ;3395  ; mess_data
001b6e  286a              CMP      r0,#0x6a              ;3395
001b70  d047              BEQ      |L1.7170|
                  |L1.7026|
001b72  6830              LDR      r0,[r6,#0]  ; avar_ind_stat
001b74  4238              TST      r0,r7
001b76  d052              BEQ      |L1.7198|
;;;3403   	     else SET_REG(LPC_GPIO0->FIOSET,1,7,1);
001b78  69a0              LDR      r0,[r4,#0x18]
001b7a  f0400080          ORR      r0,r0,#0x80
001b7e  61a0              STR      r0,[r4,#0x18]
                  |L1.7040|
;;;3404   		} 
;;;3405   
;;;3406   	//Ðåëå àâàðèé áàòàðåé
;;;3407   	#ifndef APSENERGIA
;;;3408   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BAT))
;;;3409   		{
;;;3410   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,4,1);
;;;3411   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,4,1);
;;;3412        	}
;;;3413   	else 
;;;3414   		{
;;;3415   		if(!(ips_bat_av_stat)) SET_REG(LPC_GPIO0->FIOCLR,1,4,1);
;;;3416        	else SET_REG(LPC_GPIO0->FIOSET,1,4,1);
;;;3417   		}
;;;3418   	#endif
;;;3419   	#ifdef APSENERGIA
;;;3420   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BAT))
001b80  20d2              MOVS     r0,#0xd2
001b82  f7fffffe          BL       mess_find_unvol
001b86  b110              CBZ      r0,|L1.7054|
001b88  6828              LDR      r0,[r5,#0]  ; mess_data
001b8a  2867              CMP      r0,#0x67
001b8c  d04d              BEQ      |L1.7210|
                  |L1.7054|
;;;3421   		{
;;;3422   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,4,1);
;;;3423   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,4,1);
;;;3424        	}
;;;3425   	else 
;;;3426   		{
;;;3427   		if(!apsEnergiaStat)SET_REG(LPC_GPIO0->FIOSET,1,4,1);
001b8e  48d9              LDR      r0,|L1.7924|
001b90  7800              LDRB     r0,[r0,#0]  ; apsEnergiaStat
001b92  b380              CBZ      r0,|L1.7158|
;;;3428   		else SET_REG(LPC_GPIO0->FIOCLR,1,4,1);
001b94  69e0              LDR      r0,[r4,#0x1c]
001b96  f0400010          ORR      r0,r0,#0x10
001b9a  61e0              STR      r0,[r4,#0x1c]
001b9c  e1df              B        |L1.8030|
                  |L1.7070|
001b9e  6868              LDR      r0,[r5,#4]            ;2916  ; mess_data
001ba0  2801              CMP      r0,#1                 ;2916
001ba2  d006              BEQ      |L1.7090|
001ba4  2800              CMP      r0,#0                 ;2917
001ba6  d1b3              BNE      |L1.6928|
001ba8  69e0              LDR      r0,[r4,#0x1c]         ;2917
001baa  f0405000          ORR      r0,r0,#0x20000000     ;2917
001bae  61e0              STR      r0,[r4,#0x1c]         ;2917
001bb0  e7ae              B        |L1.6928|
                  |L1.7090|
001bb2  69a0              LDR      r0,[r4,#0x18]         ;2916
001bb4  f0405000          ORR      r0,r0,#0x20000000     ;2916
001bb8  61a0              STR      r0,[r4,#0x18]         ;2916
001bba  e7a9              B        |L1.6928|
                  |L1.7100|
001bbc  6868              LDR      r0,[r5,#4]            ;2936  ; mess_data
001bbe  b120              CBZ      r0,|L1.7114|
001bc0  6fa0              LDR      r0,[r4,#0x78]         ;2937
001bc2  f0407000          ORR      r0,r0,#0x2000000      ;2937
001bc6  67a0              STR      r0,[r4,#0x78]         ;2937
001bc8  e7b1              B        |L1.6958|
                  |L1.7114|
001bca  6fe0              LDR      r0,[r4,#0x7c]         ;2936
001bcc  f0407000          ORR      r0,r0,#0x2000000      ;2936
001bd0  67e0              STR      r0,[r4,#0x7c]         ;2936
001bd2  e7ac              B        |L1.6958|
                  |L1.7124|
001bd4  6fe0              LDR      r0,[r4,#0x7c]         ;2939
001bd6  f0407000          ORR      r0,r0,#0x2000000      ;2939
001bda  67e0              STR      r0,[r4,#0x7c]         ;2939
001bdc  e7a7              B        |L1.6958|
                  |L1.7134|
001bde  6868              LDR      r0,[r5,#4]            ;3387  ; mess_data
001be0  b120              CBZ      r0,|L1.7148|
001be2  6fa0              LDR      r0,[r4,#0x78]         ;3388
001be4  f0407000          ORR      r0,r0,#0x2000000      ;3388
001be8  67a0              STR      r0,[r4,#0x78]         ;3388
001bea  e7bb              B        |L1.7012|
                  |L1.7148|
001bec  6fe0              LDR      r0,[r4,#0x7c]         ;3387
001bee  f0407000          ORR      r0,r0,#0x2000000      ;3387
001bf2  67e0              STR      r0,[r4,#0x7c]         ;3387
001bf4  e7b6              B        |L1.7012|
                  |L1.7158|
001bf6  e027              B        |L1.7240|
                  |L1.7160|
001bf8  6fe0              LDR      r0,[r4,#0x7c]         ;3390
001bfa  f0407000          ORR      r0,r0,#0x2000000      ;3390
001bfe  67e0              STR      r0,[r4,#0x7c]         ;3390
001c00  e7b0              B        |L1.7012|
                  |L1.7170|
001c02  6868              LDR      r0,[r5,#4]            ;3397  ; mess_data
001c04  b130              CBZ      r0,|L1.7188|
001c06  2801              CMP      r0,#1                 ;3398
001c08  d1ba              BNE      |L1.7040|
001c0a  69a0              LDR      r0,[r4,#0x18]         ;3398
001c0c  f0400080          ORR      r0,r0,#0x80           ;3398
001c10  61a0              STR      r0,[r4,#0x18]         ;3398
001c12  e7b5              B        |L1.7040|
                  |L1.7188|
001c14  69e0              LDR      r0,[r4,#0x1c]         ;3397
001c16  f0400080          ORR      r0,r0,#0x80           ;3397
001c1a  61e0              STR      r0,[r4,#0x1c]         ;3397
001c1c  e7b0              B        |L1.7040|
                  |L1.7198|
001c1e  69e0              LDR      r0,[r4,#0x1c]         ;3402
001c20  f0400080          ORR      r0,r0,#0x80           ;3402
001c24  61e0              STR      r0,[r4,#0x1c]         ;3402
001c26  e7ab              B        |L1.7040|
                  |L1.7208|
001c28  e013              B        |L1.7250|
                  |L1.7210|
001c2a  6868              LDR      r0,[r5,#4]            ;3422  ; mess_data
001c2c  b110              CBZ      r0,|L1.7220|
001c2e  2801              CMP      r0,#1                 ;3423
001c30  d005              BEQ      |L1.7230|
001c32  e194              B        |L1.8030|
                  |L1.7220|
001c34  69e0              LDR      r0,[r4,#0x1c]         ;3422
001c36  f0400010          ORR      r0,r0,#0x10           ;3422
001c3a  61e0              STR      r0,[r4,#0x1c]         ;3422
001c3c  e18f              B        |L1.8030|
                  |L1.7230|
001c3e  69a0              LDR      r0,[r4,#0x18]         ;3423
001c40  f0400010          ORR      r0,r0,#0x10           ;3423
001c44  61a0              STR      r0,[r4,#0x18]         ;3423
001c46  e18a              B        |L1.8030|
                  |L1.7240|
001c48  69a0              LDR      r0,[r4,#0x18]         ;3427
001c4a  f0400010          ORR      r0,r0,#0x10           ;3427
001c4e  61a0              STR      r0,[r4,#0x18]         ;3427
001c50  e185              B        |L1.8030|
                  |L1.7250|
;;;3429   		}
;;;3430   	#endif
;;;3431   	}
;;;3432   
;;;3433   else	if(AUSW_MAIN==22023)
;;;3434   	{
;;;3435   
;;;3436   	//Ðåëå àâàðèé áàòàðåé
;;;3437   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BAT))
;;;3438   		{
;;;3439   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,4,1);
;;;3440   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,4,1);
;;;3441        	}
;;;3442   	else 
;;;3443   		{
;;;3444   		if(!(ips_bat_av_stat)) SET_REG(LPC_GPIO0->FIOCLR,1,4,1);
001c52  f8df82a4          LDR      r8,|L1.7928|
001c56  f5a041ac          SUB      r1,r0,#0x5600         ;3433
001c5a  3907              SUBS     r1,#7                 ;3433
001c5c  d162              BNE      |L1.7460|
001c5e  20d2              MOVS     r0,#0xd2              ;3437
001c60  f7fffffe          BL       mess_find_unvol
001c64  b110              CBZ      r0,|L1.7276|
001c66  6828              LDR      r0,[r5,#0]            ;3437  ; mess_data
001c68  2867              CMP      r0,#0x67              ;3437
001c6a  d023              BEQ      |L1.7348|
                  |L1.7276|
001c6c  f8980000          LDRB     r0,[r8,#0]  ; ips_bat_av_stat
001c70  b370              CBZ      r0,|L1.7376|
;;;3445        	else SET_REG(LPC_GPIO0->FIOSET,1,4,1);
001c72  69a0              LDR      r0,[r4,#0x18]
001c74  f0400010          ORR      r0,r0,#0x10
001c78  61a0              STR      r0,[r4,#0x18]
                  |L1.7290|
;;;3446   		} 
;;;3447   
;;;3448   
;;;3449   	//Ðåëå àâàðèè ñåòè ÒÓÒ ÊÀÊÀß òî ËÀÆÀ ñ àâàðèåé ñåòè. Îáðàùåíèå ê ðàçíûì ïîðòàì
;;;3450   	#ifndef UKU2071x
;;;3451   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_NET))
;;;3452   		{
;;;3453   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;3454   		else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_NET,1);
;;;3455   		}
;;;3456   	else	if(!(avar_ind_stat&0x00000001)) SET_REG(LPC_GPIO1->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;3457   	else SET_REG(LPC_GPIO3->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;3458   	#endif
;;;3459   	#ifdef UKU2071x
;;;3460   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_NET))
001c7a  20d2              MOVS     r0,#0xd2
001c7c  f7fffffe          BL       mess_find_unvol
001c80  b110              CBZ      r0,|L1.7304|
001c82  6828              LDR      r0,[r5,#0]  ; mess_data
001c84  2866              CMP      r0,#0x66
001c86  d028              BEQ      |L1.7386|
                  |L1.7304|
;;;3461   		{
;;;3462   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_NET,1);
;;;3463   		else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;3464   		}
;;;3465   	else	if(!(avar_ind_stat&0x00000001)) SET_REG(LPC_GPIO1->FIOSET,1,SHIFT_REL_AV_NET,1);
001c88  6830              LDR      r0,[r6,#0]  ; avar_ind_stat
001c8a  07c0              LSLS     r0,r0,#31
001c8c  d031              BEQ      |L1.7410|
;;;3466   	else SET_REG(LPC_GPIO3->FIOSET,1,SHIFT_REL_AV_NET,1);
001c8e  6fa0              LDR      r0,[r4,#0x78]
001c90  f0407000          ORR      r0,r0,#0x2000000
001c94  67a0              STR      r0,[r4,#0x78]
                  |L1.7318|
;;;3467   	#endif
;;;3468   
;;;3469   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BPS))
001c96  20d2              MOVS     r0,#0xd2
001c98  f7fffffe          BL       mess_find_unvol
001c9c  b110              CBZ      r0,|L1.7332|
001c9e  6828              LDR      r0,[r5,#0]  ; mess_data
001ca0  286a              CMP      r0,#0x6a
001ca2  d02b              BEQ      |L1.7420|
                  |L1.7332|
;;;3470   		{
;;;3471   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,7,1);
;;;3472   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,7,1);
;;;3473   	     }
;;;3474   	else 
;;;3475   		{
;;;3476   		if(!(avar_ind_stat&0x100007f8)) SET_REG(LPC_GPIO0->FIOCLR,1,7,1);
001ca4  6830              LDR      r0,[r6,#0]  ; avar_ind_stat
001ca6  4238              TST      r0,r7
001ca8  d037              BEQ      |L1.7450|
;;;3477   	     else SET_REG(LPC_GPIO0->FIOSET,1,7,1);
001caa  69a0              LDR      r0,[r4,#0x18]
001cac  f0400080          ORR      r0,r0,#0x80
001cb0  61a0              STR      r0,[r4,#0x18]
001cb2  e154              B        |L1.8030|
                  |L1.7348|
001cb4  6868              LDR      r0,[r5,#4]            ;3439  ; mess_data
001cb6  b130              CBZ      r0,|L1.7366|
001cb8  2801              CMP      r0,#1                 ;3440
001cba  d1de              BNE      |L1.7290|
001cbc  69a0              LDR      r0,[r4,#0x18]         ;3440
001cbe  f0400010          ORR      r0,r0,#0x10           ;3440
001cc2  61a0              STR      r0,[r4,#0x18]         ;3440
001cc4  e7d9              B        |L1.7290|
                  |L1.7366|
001cc6  69e0              LDR      r0,[r4,#0x1c]         ;3439
001cc8  f0400010          ORR      r0,r0,#0x10           ;3439
001ccc  61e0              STR      r0,[r4,#0x1c]         ;3439
001cce  e7d4              B        |L1.7290|
                  |L1.7376|
001cd0  69e0              LDR      r0,[r4,#0x1c]         ;3444
001cd2  f0400010          ORR      r0,r0,#0x10           ;3444
001cd6  61e0              STR      r0,[r4,#0x1c]         ;3444
001cd8  e7cf              B        |L1.7290|
                  |L1.7386|
001cda  6868              LDR      r0,[r5,#4]            ;3462  ; mess_data
001cdc  b120              CBZ      r0,|L1.7400|
001cde  69e0              LDR      r0,[r4,#0x1c]         ;3463
001ce0  f0407000          ORR      r0,r0,#0x2000000      ;3463
001ce4  61e0              STR      r0,[r4,#0x1c]         ;3463
001ce6  e7d6              B        |L1.7318|
                  |L1.7400|
001ce8  69a0              LDR      r0,[r4,#0x18]         ;3462
001cea  f0407000          ORR      r0,r0,#0x2000000      ;3462
001cee  61a0              STR      r0,[r4,#0x18]         ;3462
001cf0  e7d1              B        |L1.7318|
                  |L1.7410|
001cf2  6ba0              LDR      r0,[r4,#0x38]         ;3465
001cf4  f0407000          ORR      r0,r0,#0x2000000      ;3465
001cf8  63a0              STR      r0,[r4,#0x38]         ;3465
001cfa  e7cc              B        |L1.7318|
                  |L1.7420|
001cfc  6868              LDR      r0,[r5,#4]            ;3471  ; mess_data
001cfe  b110              CBZ      r0,|L1.7430|
001d00  2801              CMP      r0,#1                 ;3472
001d02  d005              BEQ      |L1.7440|
001d04  e12b              B        |L1.8030|
                  |L1.7430|
001d06  69e0              LDR      r0,[r4,#0x1c]         ;3471
001d08  f0400080          ORR      r0,r0,#0x80           ;3471
001d0c  61e0              STR      r0,[r4,#0x1c]         ;3471
001d0e  e126              B        |L1.8030|
                  |L1.7440|
001d10  69a0              LDR      r0,[r4,#0x18]         ;3472
001d12  f0400080          ORR      r0,r0,#0x80           ;3472
001d16  61a0              STR      r0,[r4,#0x18]         ;3472
001d18  e121              B        |L1.8030|
                  |L1.7450|
001d1a  69e0              LDR      r0,[r4,#0x1c]         ;3476
001d1c  f0400080          ORR      r0,r0,#0x80           ;3476
001d20  61e0              STR      r0,[r4,#0x1c]         ;3476
001d22  e11c              B        |L1.8030|
                  |L1.7460|
;;;3478   		} 
;;;3479   	}
;;;3480   else	if(AUSW_MAIN==22043)
001d24  f5a041ac          SUB      r1,r0,#0x5600
001d28  391b              SUBS     r1,r1,#0x1b
001d2a  d170              BNE      |L1.7694|
;;;3481   	{
;;;3482   	//Ðåëå àâàðèé áàòàðåé
;;;3483   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BAT))
001d2c  20d2              MOVS     r0,#0xd2
001d2e  f7fffffe          BL       mess_find_unvol
001d32  b110              CBZ      r0,|L1.7482|
001d34  6828              LDR      r0,[r5,#0]  ; mess_data
001d36  2867              CMP      r0,#0x67
001d38  d031              BEQ      |L1.7582|
                  |L1.7482|
;;;3484   		{
;;;3485   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,4,1);
;;;3486   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,4,1);
;;;3487        	}
;;;3488   	else 
;;;3489   		{
;;;3490   		if(!(ips_bat_av_stat)) SET_REG(LPC_GPIO0->FIOCLR,1,4,1);
001d3a  f8980000          LDRB     r0,[r8,#0]  ; ips_bat_av_stat
001d3e  b3b8              CBZ      r0,|L1.7600|
;;;3491        	else SET_REG(LPC_GPIO0->FIOSET,1,4,1);
001d40  69a0              LDR      r0,[r4,#0x18]
001d42  f0400010          ORR      r0,r0,#0x10
001d46  61a0              STR      r0,[r4,#0x18]
                  |L1.7496|
;;;3492   		} 
;;;3493   	//Ðåëå àâàðèè ñåòè ÒÓÒ ÊÀÊÀß òî ËÀÆÀ ñ àâàðèåé ñåòè. Îáðàùåíèå ê ðàçíûì ïîðòàì
;;;3494   	#ifndef UKU2071x 
;;;3495   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_NET))
;;;3496   		{
;;;3497   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;3498   		else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_NET,1);
;;;3499   		}
;;;3500   	else	if(!(avar_ind_stat&0x00000001)) SET_REG(LPC_GPIO1->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;3501   	else SET_REG(LPC_GPIO3->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;3502   	#endif
;;;3503   	#ifdef UKU2071x 
;;;3504   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_NET))
001d48  20d2              MOVS     r0,#0xd2
001d4a  f7fffffe          BL       mess_find_unvol
001d4e  b110              CBZ      r0,|L1.7510|
001d50  6828              LDR      r0,[r5,#0]  ; mess_data
001d52  2866              CMP      r0,#0x66
001d54  d037              BEQ      |L1.7622|
                  |L1.7510|
;;;3505   		{
;;;3506   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_NET,1);
;;;3507   		else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;3508   		}
;;;3509   	else	if(!(avar_ind_stat&0x00000001)) SET_REG(LPC_GPIO1->FIOSET,1,SHIFT_REL_AV_NET,1);
001d56  6830              LDR      r0,[r6,#0]  ; avar_ind_stat
001d58  07c0              LSLS     r0,r0,#31
001d5a  d040              BEQ      |L1.7646|
;;;3510   	else SET_REG(LPC_GPIO3->FIOSET,1,SHIFT_REL_AV_NET,1);
001d5c  6fa0              LDR      r0,[r4,#0x78]
001d5e  f0407000          ORR      r0,r0,#0x2000000
001d62  67a0              STR      r0,[r4,#0x78]
                  |L1.7524|
;;;3511   	#endif
;;;3512   
;;;3513   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BPS))
001d64  20d2              MOVS     r0,#0xd2
001d66  f7fffffe          BL       mess_find_unvol
001d6a  b110              CBZ      r0,|L1.7538|
001d6c  6828              LDR      r0,[r5,#0]  ; mess_data
001d6e  286a              CMP      r0,#0x6a
001d70  d03a              BEQ      |L1.7656|
                  |L1.7538|
;;;3514   		{
;;;3515   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,7,1);
;;;3516   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,7,1);
;;;3517   	     }
;;;3518   	else 
;;;3519   		{
;;;3520   		if(!(avar_ind_stat&0x100007f8)) SET_REG(LPC_GPIO0->FIOCLR,1,7,1);
001d72  6830              LDR      r0,[r6,#0]  ; avar_ind_stat
001d74  4238              TST      r0,r7
001d76  d045              BEQ      |L1.7684|
;;;3521   	     else SET_REG(LPC_GPIO0->FIOSET,1,7,1);
001d78  69a0              LDR      r0,[r4,#0x18]
001d7a  f0400080          ORR      r0,r0,#0x80
001d7e  61a0              STR      r0,[r4,#0x18]
                  |L1.7552|
;;;3522   		}
;;;3523   	//Ðåëå àâàðèè ÁÏÑ
;;;3524   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BPS))
001d80  20d2              MOVS     r0,#0xd2
001d82  f7fffffe          BL       mess_find_unvol
001d86  b110              CBZ      r0,|L1.7566|
001d88  6828              LDR      r0,[r5,#0]  ; mess_data
001d8a  286a              CMP      r0,#0x6a
001d8c  d040              BEQ      |L1.7696|
                  |L1.7566|
;;;3525   		{
;;;3526   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
;;;3527   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
;;;3528        	}
;;;3529   	else 
;;;3530   		{
;;;3531   		if(!(avar_ind_stat&0x100007f8)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
001d8e  6830              LDR      r0,[r6,#0]  ; avar_ind_stat
001d90  4238              TST      r0,r7
001d92  d04c              BEQ      |L1.7726|
;;;3532        	else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
001d94  69a0              LDR      r0,[r4,#0x18]
001d96  f0400020          ORR      r0,r0,#0x20
001d9a  61a0              STR      r0,[r4,#0x18]
001d9c  e0df              B        |L1.8030|
                  |L1.7582|
001d9e  6868              LDR      r0,[r5,#4]            ;3485  ; mess_data
001da0  b138              CBZ      r0,|L1.7602|
001da2  2801              CMP      r0,#1                 ;3486
001da4  d1d0              BNE      |L1.7496|
001da6  69a0              LDR      r0,[r4,#0x18]         ;3486
001da8  f0400010          ORR      r0,r0,#0x10           ;3486
001dac  61a0              STR      r0,[r4,#0x18]         ;3486
001dae  e7cb              B        |L1.7496|
                  |L1.7600|
001db0  e004              B        |L1.7612|
                  |L1.7602|
001db2  69e0              LDR      r0,[r4,#0x1c]         ;3485
001db4  f0400010          ORR      r0,r0,#0x10           ;3485
001db8  61e0              STR      r0,[r4,#0x1c]         ;3485
001dba  e7c5              B        |L1.7496|
                  |L1.7612|
001dbc  69e0              LDR      r0,[r4,#0x1c]         ;3490
001dbe  f0400010          ORR      r0,r0,#0x10           ;3490
001dc2  61e0              STR      r0,[r4,#0x1c]         ;3490
001dc4  e7c0              B        |L1.7496|
                  |L1.7622|
001dc6  6868              LDR      r0,[r5,#4]            ;3506  ; mess_data
001dc8  b120              CBZ      r0,|L1.7636|
001dca  69e0              LDR      r0,[r4,#0x1c]         ;3507
001dcc  f0407000          ORR      r0,r0,#0x2000000      ;3507
001dd0  61e0              STR      r0,[r4,#0x1c]         ;3507
001dd2  e7c7              B        |L1.7524|
                  |L1.7636|
001dd4  69a0              LDR      r0,[r4,#0x18]         ;3506
001dd6  f0407000          ORR      r0,r0,#0x2000000      ;3506
001dda  61a0              STR      r0,[r4,#0x18]         ;3506
001ddc  e7c2              B        |L1.7524|
                  |L1.7646|
001dde  6ba0              LDR      r0,[r4,#0x38]         ;3509
001de0  f0407000          ORR      r0,r0,#0x2000000      ;3509
001de4  63a0              STR      r0,[r4,#0x38]         ;3509
001de6  e7bd              B        |L1.7524|
                  |L1.7656|
001de8  6868              LDR      r0,[r5,#4]            ;3515  ; mess_data
001dea  b130              CBZ      r0,|L1.7674|
001dec  2801              CMP      r0,#1                 ;3516
001dee  d1c7              BNE      |L1.7552|
001df0  69a0              LDR      r0,[r4,#0x18]         ;3516
001df2  f0400080          ORR      r0,r0,#0x80           ;3516
001df6  61a0              STR      r0,[r4,#0x18]         ;3516
001df8  e7c2              B        |L1.7552|
                  |L1.7674|
001dfa  69e0              LDR      r0,[r4,#0x1c]         ;3515
001dfc  f0400080          ORR      r0,r0,#0x80           ;3515
001e00  61e0              STR      r0,[r4,#0x1c]         ;3515
001e02  e7bd              B        |L1.7552|
                  |L1.7684|
001e04  69e0              LDR      r0,[r4,#0x1c]         ;3520
001e06  f0400080          ORR      r0,r0,#0x80           ;3520
001e0a  61e0              STR      r0,[r4,#0x1c]         ;3520
001e0c  e7b8              B        |L1.7552|
                  |L1.7694|
001e0e  e013              B        |L1.7736|
                  |L1.7696|
001e10  6868              LDR      r0,[r5,#4]            ;3526  ; mess_data
001e12  b110              CBZ      r0,|L1.7706|
001e14  2801              CMP      r0,#1                 ;3527
001e16  d005              BEQ      |L1.7716|
001e18  e0a1              B        |L1.8030|
                  |L1.7706|
001e1a  69e0              LDR      r0,[r4,#0x1c]         ;3526
001e1c  f0400020          ORR      r0,r0,#0x20           ;3526
001e20  61e0              STR      r0,[r4,#0x1c]         ;3526
001e22  e09c              B        |L1.8030|
                  |L1.7716|
001e24  69a0              LDR      r0,[r4,#0x18]         ;3527
001e26  f0400020          ORR      r0,r0,#0x20           ;3527
001e2a  61a0              STR      r0,[r4,#0x18]         ;3527
001e2c  e097              B        |L1.8030|
                  |L1.7726|
001e2e  69e0              LDR      r0,[r4,#0x1c]         ;3531
001e30  f0400020          ORR      r0,r0,#0x20           ;3531
001e34  61e0              STR      r0,[r4,#0x1c]         ;3531
001e36  e092              B        |L1.8030|
                  |L1.7736|
;;;3533   		} 
;;;3534   	}
;;;3535   else	if((AUSW_MAIN==22033)||(AUSW_MAIN==22018))
001e38  f5a041ac          SUB      r1,r0,#0x5600
001e3c  3911              SUBS     r1,r1,#0x11
001e3e  d001              BEQ      |L1.7748|
001e40  310f              ADDS     r1,r1,#0xf
001e42  d170              BNE      |L1.7974|
                  |L1.7748|
;;;3536   	{
;;;3537   	#ifndef UKU2071x 
;;;3538   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_NET))
;;;3539   		{
;;;3540   		if(mess_data[1]==0) SET_REG(LPC_GPIO3->FIOSET,1,25,1);
;;;3541   		else SET_REG(LPC_GPIO3->FIOCLR,1,25,1);
;;;3542   		}
;;;3543   	else	if(!(avar_ind_stat&0x00000001)) SET_REG(LPC_GPIO3->FIOSET,1,25,1);
;;;3544   	else SET_REG(LPC_GPIO3->FIOCLR,1,25,1);
;;;3545   	#endif
;;;3546   	#ifdef UKU2071x 
;;;3547   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_NET))
001e44  20d2              MOVS     r0,#0xd2
001e46  f7fffffe          BL       mess_find_unvol
001e4a  b110              CBZ      r0,|L1.7762|
001e4c  6828              LDR      r0,[r5,#0]  ; mess_data
001e4e  2866              CMP      r0,#0x66
001e50  d023              BEQ      |L1.7834|
                  |L1.7762|
;;;3548   		{
;;;3549   		if(mess_data[1]==0) SET_REG(LPC_GPIO3->FIOCLR,1,25,1);
;;;3550   		else SET_REG(LPC_GPIO3->FIOSET,1,25,1);
;;;3551   		}
;;;3552   	else	if(!(avar_ind_stat&0x00000001)) SET_REG(LPC_GPIO3->FIOCLR,1,25,1);
001e52  6830              LDR      r0,[r6,#0]  ; avar_ind_stat
001e54  07c0              LSLS     r0,r0,#31
001e56  d02c              BEQ      |L1.7858|
;;;3553   	else SET_REG(LPC_GPIO3->FIOSET,1,25,1);
001e58  6fa0              LDR      r0,[r4,#0x78]
001e5a  f0407000          ORR      r0,r0,#0x2000000
001e5e  67a0              STR      r0,[r4,#0x78]
                  |L1.7776|
;;;3554   	#endif
;;;3555   	
;;;3556   	
;;;3557   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BPS))
001e60  20d2              MOVS     r0,#0xd2
001e62  f7fffffe          BL       mess_find_unvol
001e66  b110              CBZ      r0,|L1.7790|
001e68  6828              LDR      r0,[r5,#0]  ; mess_data
001e6a  286a              CMP      r0,#0x6a
001e6c  d026              BEQ      |L1.7868|
                  |L1.7790|
;;;3558   		{
;;;3559   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,7,1);
;;;3560   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,7,1);
;;;3561   	     }
;;;3562   	else 
;;;3563   		{
;;;3564   		if(!(avar_ind_stat&0x100007f8)) SET_REG(LPC_GPIO0->FIOCLR,1,7,1);
001e6e  6830              LDR      r0,[r6,#0]  ; avar_ind_stat
001e70  4238              TST      r0,r7
001e72  d031              BEQ      |L1.7896|
;;;3565   	     else SET_REG(LPC_GPIO0->FIOSET,1,7,1);
001e74  69a0              LDR      r0,[r4,#0x18]
001e76  f0400080          ORR      r0,r0,#0x80
001e7a  61a0              STR      r0,[r4,#0x18]
                  |L1.7804|
;;;3566   		} 
;;;3567   
;;;3568   	//Ðåëå àâàðèé áàòàðåé
;;;3569   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BAT))
001e7c  20d2              MOVS     r0,#0xd2
001e7e  f7fffffe          BL       mess_find_unvol
001e82  b110              CBZ      r0,|L1.7818|
001e84  6828              LDR      r0,[r5,#0]  ; mess_data
001e86  2867              CMP      r0,#0x67
001e88  d038              BEQ      |L1.7932|
                  |L1.7818|
;;;3570   		{
;;;3571   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,4,1);
;;;3572   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,4,1);
;;;3573        	}
;;;3574   	else 
;;;3575   		{
;;;3576   		if(!(ips_bat_av_stat)) SET_REG(LPC_GPIO0->FIOCLR,1,4,1);
001e8a  f8980000          LDRB     r0,[r8,#0]  ; ips_bat_av_stat
001e8e  b340              CBZ      r0,|L1.7906|
;;;3577        	else SET_REG(LPC_GPIO0->FIOSET,1,4,1);
001e90  69a0              LDR      r0,[r4,#0x18]
001e92  f0400010          ORR      r0,r0,#0x10
001e96  61a0              STR      r0,[r4,#0x18]
001e98  e061              B        |L1.8030|
                  |L1.7834|
001e9a  6868              LDR      r0,[r5,#4]            ;3549  ; mess_data
001e9c  b120              CBZ      r0,|L1.7848|
001e9e  6fa0              LDR      r0,[r4,#0x78]         ;3550
001ea0  f0407000          ORR      r0,r0,#0x2000000      ;3550
001ea4  67a0              STR      r0,[r4,#0x78]         ;3550
001ea6  e7db              B        |L1.7776|
                  |L1.7848|
001ea8  6fe0              LDR      r0,[r4,#0x7c]         ;3549
001eaa  f0407000          ORR      r0,r0,#0x2000000      ;3549
001eae  67e0              STR      r0,[r4,#0x7c]         ;3549
001eb0  e7d6              B        |L1.7776|
                  |L1.7858|
001eb2  6fe0              LDR      r0,[r4,#0x7c]         ;3552
001eb4  f0407000          ORR      r0,r0,#0x2000000      ;3552
001eb8  67e0              STR      r0,[r4,#0x7c]         ;3552
001eba  e7d1              B        |L1.7776|
                  |L1.7868|
001ebc  6868              LDR      r0,[r5,#4]            ;3559  ; mess_data
001ebe  b130              CBZ      r0,|L1.7886|
001ec0  2801              CMP      r0,#1                 ;3560
001ec2  d1db              BNE      |L1.7804|
001ec4  69a0              LDR      r0,[r4,#0x18]         ;3560
001ec6  f0400080          ORR      r0,r0,#0x80           ;3560
001eca  61a0              STR      r0,[r4,#0x18]         ;3560
001ecc  e7d6              B        |L1.7804|
                  |L1.7886|
001ece  69e0              LDR      r0,[r4,#0x1c]         ;3559
001ed0  f0400080          ORR      r0,r0,#0x80           ;3559
001ed4  61e0              STR      r0,[r4,#0x1c]         ;3559
001ed6  e7d1              B        |L1.7804|
                  |L1.7896|
001ed8  69e0              LDR      r0,[r4,#0x1c]         ;3564
001eda  f0400080          ORR      r0,r0,#0x80           ;3564
001ede  61e0              STR      r0,[r4,#0x1c]         ;3564
001ee0  e7cc              B        |L1.7804|
                  |L1.7906|
001ee2  e01a              B        |L1.7962|
                  |L1.7908|
                          DCD      mess_data
                  |L1.7912|
                          DCD      avar_ind_stat
                  |L1.7916|
                          DCD      AUSW_MAIN
                  |L1.7920|
                          DCD      0x100007f8
                  |L1.7924|
                          DCD      apsEnergiaStat
                  |L1.7928|
                          DCD      ips_bat_av_stat
                  |L1.7932|
001efc  6868              LDR      r0,[r5,#4]            ;3571  ; mess_data
001efe  b110              CBZ      r0,|L1.7942|
001f00  2801              CMP      r0,#1                 ;3572
001f02  d005              BEQ      |L1.7952|
001f04  e02b              B        |L1.8030|
                  |L1.7942|
001f06  69e0              LDR      r0,[r4,#0x1c]         ;3571
001f08  f0400010          ORR      r0,r0,#0x10           ;3571
001f0c  61e0              STR      r0,[r4,#0x1c]         ;3571
001f0e  e026              B        |L1.8030|
                  |L1.7952|
001f10  69a0              LDR      r0,[r4,#0x18]         ;3572
001f12  f0400010          ORR      r0,r0,#0x10           ;3572
001f16  61a0              STR      r0,[r4,#0x18]         ;3572
001f18  e021              B        |L1.8030|
                  |L1.7962|
001f1a  69e0              LDR      r0,[r4,#0x1c]         ;3576
001f1c  f0400010          ORR      r0,r0,#0x10           ;3576
001f20  61e0              STR      r0,[r4,#0x1c]         ;3576
001f22  e01c              B        |L1.8030|
001f24  e7ff              B        |L1.7974|
                  |L1.7974|
;;;3578   		} 
;;;3579   	} 	 
;;;3580   else	
;;;3581   	{
;;;3582   	//Ðåëå àâàðèè ñåòè ÒÓÒ ÊÀÊÀß òî ËÀÆÀ ñ àâàðèåé ñåòè. Îáðàùåíèå ê ðàçíûì ïîðòàì
;;;3583   	#ifndef UKU2071x 
;;;3584   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_NET))
;;;3585   		{
;;;3586   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;3587   		else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_NET,1);
;;;3588   		}
;;;3589   	else	if(!(avar_ind_stat&0x00000001)) SET_REG(LPC_GPIO1->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;3590   	else SET_REG(LPC_GPIO3->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;3591   	#endif
;;;3592   	#ifdef UKU2071x 
;;;3593   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_NET))
001f26  20d2              MOVS     r0,#0xd2
001f28  f7fffffe          BL       mess_find_unvol
001f2c  b110              CBZ      r0,|L1.7988|
001f2e  6828              LDR      r0,[r5,#0]  ; mess_data
001f30  2866              CMP      r0,#0x66
001f32  d026              BEQ      |L1.8066|
                  |L1.7988|
;;;3594   		{
;;;3595   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_NET,1);
;;;3596   		else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;3597   		}
;;;3598   	else	if(!(avar_ind_stat&0x00000001)) SET_REG(LPC_GPIO1->FIOSET,1,SHIFT_REL_AV_NET,1);
001f34  6830              LDR      r0,[r6,#0]  ; avar_ind_stat
001f36  07c0              LSLS     r0,r0,#31
001f38  d02f              BEQ      |L1.8090|
;;;3599   	else SET_REG(LPC_GPIO3->FIOSET,1,SHIFT_REL_AV_NET,1);
001f3a  6fa0              LDR      r0,[r4,#0x78]
001f3c  f0407000          ORR      r0,r0,#0x2000000
001f40  67a0              STR      r0,[r4,#0x78]
                  |L1.8002|
;;;3600   	#endif
;;;3601   
;;;3602   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BPS))
001f42  20d2              MOVS     r0,#0xd2
001f44  f7fffffe          BL       mess_find_unvol
001f48  b110              CBZ      r0,|L1.8016|
001f4a  6828              LDR      r0,[r5,#0]  ; mess_data
001f4c  286a              CMP      r0,#0x6a
001f4e  d029              BEQ      |L1.8100|
                  |L1.8016|
;;;3603   		{
;;;3604   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
;;;3605   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
;;;3606        	}
;;;3607   	else 
;;;3608   		{
;;;3609   		if(!(avar_ind_stat&0x100007f8)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
001f50  6830              LDR      r0,[r6,#0]  ; avar_ind_stat
001f52  4238              TST      r0,r7
001f54  d034              BEQ      |L1.8128|
;;;3610        	else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
001f56  69a0              LDR      r0,[r4,#0x18]
001f58  f0400020          ORR      r0,r0,#0x20
001f5c  61a0              STR      r0,[r4,#0x18]
                  |L1.8030|
;;;3611   		}
;;;3612   	}
;;;3613   //Äîïîëíèòåëüíîå ðåëå ÓÊÓ 
;;;3614   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_EXT))	 
001f5e  20d2              MOVS     r0,#0xd2
001f60  f7fffffe          BL       mess_find_unvol
;;;3615   	{
;;;3616   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,9,1);
;;;3617   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,9,1);
;;;3618   	}
;;;3619   else if(DOP_RELE_FUNC==0)	//åñëè äîïðåëå ïîäêëþ÷åíî ê óñêîðåííîìó çàðÿäó
;;;3620   	{
;;;3621   	if((!speedChIsOn)&&(spc_stat!=spcVZ)&&(hv_vz_stat==hvsOFF)&&(sp_ch_stat==scsOFF)&&(load_U/10<UVENTOFF))   SET_REG(LPC_GPIO0->FIOCLR,1,9,1);
001f64  f8df83e4          LDR      r8,|L1.9036|
001f68  4ef9              LDR      r6,|L1.9040|
001f6a  4ffa              LDR      r7,|L1.9044|
001f6c  b110              CBZ      r0,|L1.8052|
001f6e  6828              LDR      r0,[r5,#0]            ;3614  ; mess_data
001f70  2871              CMP      r0,#0x71              ;3614
001f72  d02a              BEQ      |L1.8138|
                  |L1.8052|
001f74  48f8              LDR      r0,|L1.9048|
001f76  f9b00000          LDRSH    r0,[r0,#0]            ;3619  ; DOP_RELE_FUNC
001f7a  b380              CBZ      r0,|L1.8158|
;;;3622   	else if((speedChIsOn)||(spc_stat==spcVZ)||(hv_vz_stat!=hvsOFF)||(sp_ch_stat!=scsOFF)) SET_REG(LPC_GPIO0->FIOSET,1,9,1);
;;;3623   	}
;;;3624   else if(DOP_RELE_FUNC==1)  //åñëè äîïðåëå ïîäêëþ÷åíî ê èíäèêàöèè ðàçðÿæåííîé áàòàðåè
001f7c  2801              CMP      r0,#1
001f7e  d05c              BEQ      |L1.8250|
001f80  e066              B        |L1.8272|
                  |L1.8066|
001f82  6868              LDR      r0,[r5,#4]            ;3595  ; mess_data
001f84  b120              CBZ      r0,|L1.8080|
001f86  69e0              LDR      r0,[r4,#0x1c]         ;3596
001f88  f0407000          ORR      r0,r0,#0x2000000      ;3596
001f8c  61e0              STR      r0,[r4,#0x1c]         ;3596
001f8e  e7d8              B        |L1.8002|
                  |L1.8080|
001f90  69a0              LDR      r0,[r4,#0x18]         ;3595
001f92  f0407000          ORR      r0,r0,#0x2000000      ;3595
001f96  61a0              STR      r0,[r4,#0x18]         ;3595
001f98  e7d3              B        |L1.8002|
                  |L1.8090|
001f9a  6ba0              LDR      r0,[r4,#0x38]         ;3598
001f9c  f0407000          ORR      r0,r0,#0x2000000      ;3598
001fa0  63a0              STR      r0,[r4,#0x38]         ;3598
001fa2  e7ce              B        |L1.8002|
                  |L1.8100|
001fa4  6868              LDR      r0,[r5,#4]            ;3604  ; mess_data
001fa6  b130              CBZ      r0,|L1.8118|
001fa8  2801              CMP      r0,#1                 ;3605
001faa  d1d8              BNE      |L1.8030|
001fac  69a0              LDR      r0,[r4,#0x18]         ;3605
001fae  f0400020          ORR      r0,r0,#0x20           ;3605
001fb2  61a0              STR      r0,[r4,#0x18]         ;3605
001fb4  e7d3              B        |L1.8030|
                  |L1.8118|
001fb6  69e0              LDR      r0,[r4,#0x1c]         ;3604
001fb8  f0400020          ORR      r0,r0,#0x20           ;3604
001fbc  61e0              STR      r0,[r4,#0x1c]         ;3604
001fbe  e7ce              B        |L1.8030|
                  |L1.8128|
001fc0  69e0              LDR      r0,[r4,#0x1c]         ;3609
001fc2  f0400020          ORR      r0,r0,#0x20           ;3609
001fc6  61e0              STR      r0,[r4,#0x1c]         ;3609
001fc8  e7c9              B        |L1.8030|
                  |L1.8138|
001fca  6868              LDR      r0,[r5,#4]            ;3616  ; mess_data
001fcc  b110              CBZ      r0,|L1.8148|
001fce  2801              CMP      r0,#1                 ;3617
001fd0  d006              BEQ      |L1.8160|
001fd2  e03d              B        |L1.8272|
                  |L1.8148|
001fd4  69e0              LDR      r0,[r4,#0x1c]         ;3616
001fd6  f4407000          ORR      r0,r0,#0x200          ;3616
001fda  61e0              STR      r0,[r4,#0x1c]         ;3616
001fdc  e038              B        |L1.8272|
                  |L1.8158|
001fde  e004              B        |L1.8170|
                  |L1.8160|
001fe0  69a0              LDR      r0,[r4,#0x18]         ;3617
001fe2  f4407000          ORR      r0,r0,#0x200          ;3617
001fe6  61a0              STR      r0,[r4,#0x18]         ;3617
001fe8  e032              B        |L1.8272|
                  |L1.8170|
001fea  48dc              LDR      r0,|L1.9052|
001fec  49dc              LDR      r1,|L1.9056|
001fee  f9b00000          LDRSH    r0,[r0,#0]            ;3621  ; speedChIsOn
001ff2  b9a8              CBNZ     r0,|L1.8224|
001ff4  7d0a              LDRB     r2,[r1,#0x14]         ;3621  ; spc_stat
001ff6  2a02              CMP      r2,#2                 ;3621
001ff8  d012              BEQ      |L1.8224|
001ffa  783a              LDRB     r2,[r7,#0]            ;3621  ; hv_vz_stat
001ffc  b982              CBNZ     r2,|L1.8224|
001ffe  7832              LDRB     r2,[r6,#0]            ;3621  ; sp_ch_stat
002000  b972              CBNZ     r2,|L1.8224|
002002  f9b82000          LDRSH    r2,[r8,#0]            ;3621  ; load_U
002006  230a              MOVS     r3,#0xa               ;3621
002008  fb92f2f3          SDIV     r2,r2,r3              ;3621
00200c  4bd5              LDR      r3,|L1.9060|
00200e  f9b33000          LDRSH    r3,[r3,#0]            ;3621  ; UVENTOFF
002012  429a              CMP      r2,r3                 ;3621
002014  da04              BGE      |L1.8224|
002016  69e0              LDR      r0,[r4,#0x1c]         ;3621
002018  f4407000          ORR      r0,r0,#0x200          ;3621
00201c  61e0              STR      r0,[r4,#0x1c]         ;3621
00201e  e017              B        |L1.8272|
                  |L1.8224|
002020  b930              CBNZ     r0,|L1.8240|
002022  7d08              LDRB     r0,[r1,#0x14]         ;3622  ; spc_stat
002024  2802              CMP      r0,#2                 ;3622
002026  d003              BEQ      |L1.8240|
002028  7838              LDRB     r0,[r7,#0]            ;3622  ; hv_vz_stat
00202a  b908              CBNZ     r0,|L1.8240|
00202c  7830              LDRB     r0,[r6,#0]            ;3622  ; sp_ch_stat
00202e  b178              CBZ      r0,|L1.8272|
                  |L1.8240|
002030  69a0              LDR      r0,[r4,#0x18]         ;3622
002032  f4407000          ORR      r0,r0,#0x200          ;3622
002036  61a0              STR      r0,[r4,#0x18]         ;3622
002038  e00a              B        |L1.8272|
                  |L1.8250|
;;;3625   	{
;;;3626   	if((mess_find_unvol(MESS2RELE_HNDL))&& (mess_data[0]==PARAM_RELE_BAT_IS_DISCHARGED)) SET_REG(LPC_GPIO0->FIOCLR,1,9,1);
00203a  20d2              MOVS     r0,#0xd2
00203c  f7fffffe          BL       mess_find_unvol
002040  b110              CBZ      r0,|L1.8264|
002042  6828              LDR      r0,[r5,#0]  ; mess_data
002044  2872              CMP      r0,#0x72
002046  d017              BEQ      |L1.8312|
                  |L1.8264|
;;;3627   	else SET_REG(LPC_GPIO0->FIOSET,1,9,1);
002048  69a0              LDR      r0,[r4,#0x18]
00204a  f4407000          ORR      r0,r0,#0x200
00204e  61a0              STR      r0,[r4,#0x18]
                  |L1.8272|
;;;3628   	}
;;;3629   	
;;;3630   //Áëîê âûíîñíîé ðåëå
;;;3631   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_BDR1))
002050  20d2              MOVS     r0,#0xd2
002052  f7fffffe          BL       mess_find_unvol
;;;3632   	{
;;;3633   	if(mess_data[1]==0) 		bdr_transmit_stat&=0xfe;
002056  f8df9310          LDR      r9,|L1.9064|
;;;3634   	else if(mess_data[1]==1) 	bdr_transmit_stat|=0x01;
;;;3635   	}
;;;3636   else 
;;;3637   	{
;;;3638   	if(bdr_avar_stat&0x01)  	bdr_transmit_stat|=0x01;
00205a  4cc4              LDR      r4,|L1.9068|
00205c  b110              CBZ      r0,|L1.8292|
00205e  6828              LDR      r0,[r5,#0]            ;3631  ; mess_data
002060  2875              CMP      r0,#0x75              ;3631
002062  d00e              BEQ      |L1.8322|
                  |L1.8292|
002064  7820              LDRB     r0,[r4,#0]  ; bdr_avar_stat
002066  07c0              LSLS     r0,r0,#31
002068  d01e              BEQ      |L1.8360|
00206a  f8990000          LDRB     r0,[r9,#0]  ; bdr_transmit_stat
00206e  f0400001          ORR      r0,r0,#1
002072  f8890000          STRB     r0,[r9,#0]
002076  e01d              B        |L1.8372|
                  |L1.8312|
002078  69e0              LDR      r0,[r4,#0x1c]         ;3626
00207a  f4407000          ORR      r0,r0,#0x200          ;3626
00207e  61e0              STR      r0,[r4,#0x1c]         ;3626
002080  e7e6              B        |L1.8272|
                  |L1.8322|
002082  6868              LDR      r0,[r5,#4]            ;3633  ; mess_data
002084  b110              CBZ      r0,|L1.8332|
002086  2801              CMP      r0,#1                 ;3634
002088  d007              BEQ      |L1.8346|
00208a  e013              B        |L1.8372|
                  |L1.8332|
00208c  f8990000          LDRB     r0,[r9,#0]            ;3633  ; bdr_transmit_stat
002090  f00000fe          AND      r0,r0,#0xfe           ;3633
002094  f8890000          STRB     r0,[r9,#0]            ;3633
002098  e00c              B        |L1.8372|
                  |L1.8346|
00209a  f8990000          LDRB     r0,[r9,#0]            ;3634  ; bdr_transmit_stat
00209e  f0400001          ORR      r0,r0,#1              ;3634
0020a2  f8890000          STRB     r0,[r9,#0]            ;3634
0020a6  e005              B        |L1.8372|
                  |L1.8360|
;;;3639   	else 						bdr_transmit_stat&=0xfe;
0020a8  f8990000          LDRB     r0,[r9,#0]  ; bdr_transmit_stat
0020ac  f00000fe          AND      r0,r0,#0xfe
0020b0  f8890000          STRB     r0,[r9,#0]
                  |L1.8372|
;;;3640   	}	
;;;3641   
;;;3642   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_BDR2))
0020b4  20d2              MOVS     r0,#0xd2
0020b6  f7fffffe          BL       mess_find_unvol
0020ba  b110              CBZ      r0,|L1.8386|
0020bc  6828              LDR      r0,[r5,#0]  ; mess_data
0020be  2876              CMP      r0,#0x76
0020c0  d009              BEQ      |L1.8406|
                  |L1.8386|
;;;3643   	{
;;;3644   	if(mess_data[1]==0) 		bdr_transmit_stat&=0xfd;
;;;3645   	else if(mess_data[1]==1) 	bdr_transmit_stat|=0x02;
;;;3646   	}
;;;3647   else 
;;;3648   	{
;;;3649   	if(bdr_avar_stat&0x01)  	bdr_transmit_stat|=0x02;
0020c2  7820              LDRB     r0,[r4,#0]  ; bdr_avar_stat
0020c4  07c0              LSLS     r0,r0,#31
0020c6  d019              BEQ      |L1.8444|
0020c8  f8990000          LDRB     r0,[r9,#0]  ; bdr_transmit_stat
0020cc  f0400002          ORR      r0,r0,#2
0020d0  f8890000          STRB     r0,[r9,#0]
0020d4  e018              B        |L1.8456|
                  |L1.8406|
0020d6  6868              LDR      r0,[r5,#4]            ;3644  ; mess_data
0020d8  b110              CBZ      r0,|L1.8416|
0020da  2801              CMP      r0,#1                 ;3645
0020dc  d007              BEQ      |L1.8430|
0020de  e013              B        |L1.8456|
                  |L1.8416|
0020e0  f8990000          LDRB     r0,[r9,#0]            ;3644  ; bdr_transmit_stat
0020e4  f00000fd          AND      r0,r0,#0xfd           ;3644
0020e8  f8890000          STRB     r0,[r9,#0]            ;3644
0020ec  e00c              B        |L1.8456|
                  |L1.8430|
0020ee  f8990000          LDRB     r0,[r9,#0]            ;3645  ; bdr_transmit_stat
0020f2  f0400002          ORR      r0,r0,#2              ;3645
0020f6  f8890000          STRB     r0,[r9,#0]            ;3645
0020fa  e005              B        |L1.8456|
                  |L1.8444|
;;;3650   	else 						bdr_transmit_stat&=0xfd;
0020fc  f8990000          LDRB     r0,[r9,#0]  ; bdr_transmit_stat
002100  f00000fd          AND      r0,r0,#0xfd
002104  f8890000          STRB     r0,[r9,#0]
                  |L1.8456|
;;;3651   	}	
;;;3652   	
;;;3653   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_BDR3))
002108  20d2              MOVS     r0,#0xd2
00210a  f7fffffe          BL       mess_find_unvol
00210e  b110              CBZ      r0,|L1.8470|
002110  6828              LDR      r0,[r5,#0]  ; mess_data
002112  2877              CMP      r0,#0x77
002114  d009              BEQ      |L1.8490|
                  |L1.8470|
;;;3654   	{
;;;3655   	if(mess_data[1]==0) 		bdr_transmit_stat&=0xfb;
;;;3656   	else if(mess_data[1]==1) 	bdr_transmit_stat|=0x04;
;;;3657   	}
;;;3658   else 
;;;3659   	{
;;;3660   	if(bdr_avar_stat&0x01)  	bdr_transmit_stat|=0x04;
002116  7820              LDRB     r0,[r4,#0]  ; bdr_avar_stat
002118  07c0              LSLS     r0,r0,#31
00211a  d019              BEQ      |L1.8528|
00211c  f8990000          LDRB     r0,[r9,#0]  ; bdr_transmit_stat
002120  f0400004          ORR      r0,r0,#4
002124  f8890000          STRB     r0,[r9,#0]
002128  e018              B        |L1.8540|
                  |L1.8490|
00212a  6868              LDR      r0,[r5,#4]            ;3655  ; mess_data
00212c  b110              CBZ      r0,|L1.8500|
00212e  2801              CMP      r0,#1                 ;3656
002130  d007              BEQ      |L1.8514|
002132  e013              B        |L1.8540|
                  |L1.8500|
002134  f8990000          LDRB     r0,[r9,#0]            ;3655  ; bdr_transmit_stat
002138  f00000fb          AND      r0,r0,#0xfb           ;3655
00213c  f8890000          STRB     r0,[r9,#0]            ;3655
002140  e00c              B        |L1.8540|
                  |L1.8514|
002142  f8990000          LDRB     r0,[r9,#0]            ;3656  ; bdr_transmit_stat
002146  f0400004          ORR      r0,r0,#4              ;3656
00214a  f8890000          STRB     r0,[r9,#0]            ;3656
00214e  e005              B        |L1.8540|
                  |L1.8528|
;;;3661   	else 						bdr_transmit_stat&=0xfb;
002150  f8990000          LDRB     r0,[r9,#0]  ; bdr_transmit_stat
002154  f00000fb          AND      r0,r0,#0xfb
002158  f8890000          STRB     r0,[r9,#0]
                  |L1.8540|
;;;3662   	}	
;;;3663   	
;;;3664   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_BDR4))
00215c  20d2              MOVS     r0,#0xd2
00215e  f7fffffe          BL       mess_find_unvol
002162  b110              CBZ      r0,|L1.8554|
002164  6828              LDR      r0,[r5,#0]  ; mess_data
002166  2878              CMP      r0,#0x78
002168  d009              BEQ      |L1.8574|
                  |L1.8554|
;;;3665   	{
;;;3666   	if(mess_data[1]==0) 		bdr_transmit_stat&=0xf7;
;;;3667   	else if(mess_data[1]==1) 	bdr_transmit_stat|=0x08;
;;;3668   	}
;;;3669   else 
;;;3670   	{
;;;3671   	if(bdr_avar_stat&0x01)  	bdr_transmit_stat|=0x08;
00216a  7820              LDRB     r0,[r4,#0]  ; bdr_avar_stat
00216c  07c0              LSLS     r0,r0,#31
00216e  d019              BEQ      |L1.8612|
002170  f8990000          LDRB     r0,[r9,#0]  ; bdr_transmit_stat
002174  f0400008          ORR      r0,r0,#8
002178  f8890000          STRB     r0,[r9,#0]
00217c  e018              B        |L1.8624|
                  |L1.8574|
00217e  6868              LDR      r0,[r5,#4]            ;3666  ; mess_data
002180  b110              CBZ      r0,|L1.8584|
002182  2801              CMP      r0,#1                 ;3667
002184  d007              BEQ      |L1.8598|
002186  e013              B        |L1.8624|
                  |L1.8584|
002188  f8990000          LDRB     r0,[r9,#0]            ;3666  ; bdr_transmit_stat
00218c  f00000f7          AND      r0,r0,#0xf7           ;3666
002190  f8890000          STRB     r0,[r9,#0]            ;3666
002194  e00c              B        |L1.8624|
                  |L1.8598|
002196  f8990000          LDRB     r0,[r9,#0]            ;3667  ; bdr_transmit_stat
00219a  f0400008          ORR      r0,r0,#8              ;3667
00219e  f8890000          STRB     r0,[r9,#0]            ;3667
0021a2  e005              B        |L1.8624|
                  |L1.8612|
;;;3672   	else 						bdr_transmit_stat&=0xf7;
0021a4  f8990000          LDRB     r0,[r9,#0]  ; bdr_transmit_stat
0021a8  f00000f7          AND      r0,r0,#0xf7
0021ac  f8890000          STRB     r0,[r9,#0]
                  |L1.8624|
;;;3673   	}	
;;;3674   					 	
;;;3675   #endif
;;;3676   
;;;3677   #ifdef UKU_KONTUR
;;;3678   
;;;3679   //Ðåëå îáùåé àâàðèè
;;;3680   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_COMM))
;;;3681   	{
;;;3682   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_COMM,1);
;;;3683   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_COMM,1);
;;;3684   	}
;;;3685   else 
;;;3686   	{
;;;3687        if(  (!(avar_ind_stat&0x00007fff)) &&
;;;3688             ((!SK_REL_EN[0]) || (sk_av_stat[0]!=sasON))  &&
;;;3689             ((!SK_REL_EN[1]) || (sk_av_stat[1]!=sasON))  &&
;;;3690             ((!SK_REL_EN[2]) || (sk_av_stat[2]!=sasON))  /*&&
;;;3691             ((!SK_REL_EN[3]) || (sk_av_stat[3]!=sasON))*/  )SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_COMM,1);
;;;3692        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_COMM,1);
;;;3693   	}
;;;3694   
;;;3695   	
;;;3696   //rel_warm_plazma=0;
;;;3697   //Ðåëå îñâåùåíèÿ   
;;;3698   /*
;;;3699   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_WARM))
;;;3700   	{
;;;3701   	if(mess_data[1]==0)
;;;3702   		{
;;;3703   		SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_WARM,1);
;;;3704   		rel_warm_plazma=1;
;;;3705   		}
;;;3706   	else if(mess_data[1]==1) 
;;;3707   		{
;;;3708   		SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_WARM,1);
;;;3709   		rel_warm_plazma=2;
;;;3710   		}
;;;3711        }
;;;3712   else 
;;;3713   	{
;;;3714   	if(warm_stat_k==wsOFF) 
;;;3715   		{
;;;3716   		SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_WARM,1);
;;;3717   		rel_warm_plazma=3;
;;;3718   		}
;;;3719        else 
;;;3720   		{
;;;3721   		SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_WARM,1);
;;;3722   		rel_warm_plazma=4;
;;;3723   		}
;;;3724   	}
;;;3725   */
;;;3726   //Ðåëå îñâåùåíèÿ
;;;3727   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_LIGHT))
;;;3728   	{
;;;3729   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LIGHT,1);
;;;3730   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LIGHT,1);
;;;3731        }
;;;3732   else 
;;;3733   	{
;;;3734   	if(sk_av_stat[0]!=sasON) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LIGHT,1);
;;;3735        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LIGHT,1);
;;;3736   	}
;;;3737   
;;;3738   
;;;3739   
;;;3740   //Ðåëå âûêëþ÷åíèÿ íàãðóçêè
;;;3741   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_LOAD_OFF))
;;;3742   	{
;;;3743   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LOAD_OFF,1);
;;;3744   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LOAD_OFF,1);
;;;3745        }
;;;3746   else if(tloaddisable_cmnd==0)
;;;3747   	{
;;;3748   	SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LOAD_OFF,1);
;;;3749   	}
;;;3750   else if((tloaddisable_cmnd)&&(tloaddisable_cmnd<=11))
;;;3751   	{
;;;3752   	SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LOAD_OFF,1);
;;;3753   	}
;;;3754   
;;;3755   else 
;;;3756   	{
;;;3757   	if(!(tloaddisable_stat==tldsON)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LOAD_OFF,1);
;;;3758        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LOAD_OFF,1);
;;;3759   	} 
;;;3760   
;;;3761   //Ðåëå îñåâîãî âåíòèëÿòîðà èëè îòîïèòåëÿ
;;;3762   if(RELE_LOG)
;;;3763   	{
;;;3764   	if((mess_find_unvol(MESS2RELE_HNDL))&&(mess_data[0]==PARAM_RELE_VENT_WARM))
;;;3765   		{
;;;3766   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT_WARM,1);
;;;3767   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT_WARM,1);
;;;3768   		}
;;;3769   	else 
;;;3770   		{
;;;3771   		if(warm_stat_k==wsOFF) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT_WARM,1);
;;;3772   	     else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT_WARM,1);
;;;3773   		} 
;;;3774   
;;;3775   	}
;;;3776   else 
;;;3777   	{
;;;3778   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_VENT_WARM))
;;;3779   		{
;;;3780   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT_WARM,1);
;;;3781   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT_WARM,1);
;;;3782   		}
;;;3783   	else 
;;;3784   		{
;;;3785   		if(vent_stat_k==vsOFF) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT_WARM,1);
;;;3786   	     else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT_WARM,1);
;;;3787   		} 
;;;3788   	}
;;;3789   #endif
;;;3790   
;;;3791   
;;;3792   #ifdef UKU_TELECORE2015
;;;3793   //Ðåëå àâàðèè ñåòè
;;;3794   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_NET))
;;;3795   	{
;;;3796   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;3797   	else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_NET,1);
;;;3798   	}
;;;3799   else	if(!(avar_ind_stat&0x00000001)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;3800   else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_NET,1);
;;;3801   
;;;3802   
;;;3803   //Ðåëå îñâåùåíèÿ
;;;3804   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_LIGHT))
;;;3805   	{
;;;3806   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LIGHT,1);
;;;3807   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LIGHT,1);
;;;3808        }
;;;3809   else 
;;;3810   	{
;;;3811   	if(sk_av_stat[0]!=sasON) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LIGHT,1);
;;;3812        else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LIGHT,1);
;;;3813   	}
;;;3814   
;;;3815   //Ðåëå îòîïèòåëÿ
;;;3816   if((mess_find_unvol(MESS2RELE_HNDL))&&(mess_data[0]==PARAM_RELE_WARM))
;;;3817   	{
;;;3818   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_WARM,1);
;;;3819   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_WARM,1);
;;;3820   	}
;;;3821   else 
;;;3822   	{
;;;3823   	if(warm_stat_k==wsOFF) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_WARM,1);
;;;3824        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_WARM,1);
;;;3825   	} 
;;;3826   //Ðåëå âåíòèëÿòîðà
;;;3827   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_VENT))
;;;3828   	{
;;;3829   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT,1);
;;;3830   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;3831   	}
;;;3832   else 
;;;3833   	{
;;;3834   	if(vent_stat_k==vsOFF) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT,1);
;;;3835        else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;3836   	} 
;;;3837   
;;;3838   //Ðåëå âíóòðåííåãî âåíòèëÿòîðà
;;;3839   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_VVENT))
;;;3840   	{
;;;3841   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VVENT,1);
;;;3842   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VVENT,1);
;;;3843   	}
;;;3844   else 
;;;3845   	{
;;;3846   	if(vvent_stat_k==vsOFF) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VVENT,1);
;;;3847        else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VVENT,1);
;;;3848   	} 
;;;3849   
;;;3850   #endif
;;;3851   
;;;3852   #ifdef UKU_TELECORE2017
;;;3853   //Ðåëå àâàðèè ñåòè
;;;3854   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_NET))
;;;3855   	{
;;;3856   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;3857   	else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_NET,1);
;;;3858   	}
;;;3859   else	if(!(avar_ind_stat&0x00000001)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;3860   else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_NET,1);
;;;3861   
;;;3862   
;;;3863   //Ðåëå îñâåùåíèÿ
;;;3864   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_LIGHT))
;;;3865   	{
;;;3866   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LIGHT,1);
;;;3867   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LIGHT,1);
;;;3868        }
;;;3869   else 
;;;3870   	{
;;;3871   	if(sk_av_stat[0]!=sasON) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LIGHT,1);
;;;3872        else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LIGHT,1);
;;;3873   	}
;;;3874   
;;;3875   //Ðåëå îòîïèòåëÿ
;;;3876   if((mess_find_unvol(MESS2RELE_HNDL))&&(mess_data[0]==PARAM_RELE_WARM))
;;;3877   	{
;;;3878   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_WARM,1);
;;;3879   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_WARM,1);
;;;3880   	}
;;;3881   else 
;;;3882   	{
;;;3883   	if(warm_stat_k==wsOFF) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_WARM,1);
;;;3884        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_WARM,1);
;;;3885   	} 
;;;3886   //Ðåëå âåíòèëÿòîðà
;;;3887   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_VENT))
;;;3888   	{
;;;3889   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT,1);
;;;3890   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;3891   	}
;;;3892   else 
;;;3893   	{
;;;3894   	if(vent_stat_k==vsOFF) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT,1);
;;;3895        else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;3896   	} 
;;;3897   
;;;3898   //Ðåëå âíóòðåííåãî âåíòèëÿòîðà
;;;3899   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_VVENT))
;;;3900   	{
;;;3901   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VVENT,1);
;;;3902   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VVENT,1);
;;;3903   	}
;;;3904   else 
;;;3905   	{
;;;3906   	if(vvent_stat_k==vsOFF) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VVENT,1);
;;;3907        else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VVENT,1);
;;;3908   	} 
;;;3909   
;;;3910   #endif
;;;3911   
;;;3912   if(NUMBDR==1)
0021b0  486f              LDR      r0,|L1.9072|
0021b2  8800              LDRH     r0,[r0,#0]  ; NUMBDR
0021b4  2801              CMP      r0,#1
0021b6  d17e              BNE      |L1.8886|
;;;3913   	{
;;;3914   	char ii_;
;;;3915   	char bdr_avar_stat_temp=0;
0021b8  f04f0000          MOV      r0,#0
;;;3916   	for	(ii_=0;ii_<4;ii_++)
0021bc  4601              MOV      r1,r0
;;;3917   		{
;;;3918   		//ÀÁ ðàçðÿæåíà
;;;3919   		if((RELE_SET_MASK[ii_]&0x01)&&
;;;3920   			(load_U<(USIGN*10)))			bdr_avar_stat_temp|=(1<<ii_);
;;;3921   		//Óñêîðåííûé çàðÿä
;;;3922   		if((RELE_SET_MASK[ii_]&0x02)&&
;;;3923   			(sp_ch_stat==scsWRK))			bdr_avar_stat_temp|=(1<<ii_);
;;;3924   		//Âûðàâíèâàþùèé çàðÿä
;;;3925   		if((RELE_SET_MASK[ii_]&0x04)&&
;;;3926   			(hv_vz_stat==scsWRK))			bdr_avar_stat_temp|=(1<<ii_);
;;;3927   		//Îáùàÿ àâàðèÿ ÇÂÓ
;;;3928   		if((RELE_SET_MASK[ii_]&0x08)&&
;;;3929   			(avar_stat))					bdr_avar_stat_temp|=(1<<ii_);
;;;3930   		//Uâûõ çàâûøåíî
;;;3931   		if((RELE_SET_MASK[ii_]&0x10)&&
;;;3932   			(uout_av==1))					bdr_avar_stat_temp|=(1<<ii_);
0021be  f8dfa1b4          LDR      r10,|L1.9076|
;;;3933   		//Uâûõ çàíèæåíî
;;;3934   		if((RELE_SET_MASK[ii_]&0x20)&&
;;;3935   			(uout_av==2))					bdr_avar_stat_temp|=(1<<ii_);
;;;3936   		if((RELE_SET_MASK[ii_]&0x40)&&
;;;3937   			(
;;;3938   			((bps[0]._av&(1<<4))&&(NUMIST>=1))||
0021c2  f8df91b4          LDR      r9,|L1.9080|
0021c6  4d6d              LDR      r5,|L1.9084|
0021c8  f8dfb1b4          LDR      r11,|L1.9088|
0021cc  f04f0301          MOV      r3,#1                 ;2916
                  |L1.8656|
0021d0  f93b2011          LDRSH    r2,[r11,r1,LSL #1]    ;3919
0021d4  ea5f7cc2          LSLS     r12,r2,#31            ;3919
0021d8  d010              BEQ      |L1.8700|
0021da  f8dfc1a8          LDR      r12,|L1.9092|
0021de  f9b8e000          LDRSH    lr,[r8,#0]            ;3920  ; load_U
0021e2  f9bcc000          LDRSH    r12,[r12,#0]          ;3920  ; USIGN
0021e6  eb0c0c8c          ADD      r12,r12,r12,LSL #2    ;3920
0021ea  ebbe0f4c          CMP      lr,r12,LSL #1         ;3920
0021ee  da05              BGE      |L1.8700|
0021f0  fa03fc01          LSL      r12,r3,r1             ;3920
0021f4  ea4c0c00          ORR      r12,r12,r0            ;3920
0021f8  f00c00ff          AND      r0,r12,#0xff          ;3920
                  |L1.8700|
0021fc  ea5f7c82          LSLS     r12,r2,#30            ;3922
002200  d50a              BPL      |L1.8728|
002202  f896c000          LDRB     r12,[r6,#0]           ;3923  ; sp_ch_stat
002206  f1bc0f02          CMP      r12,#2                ;3923
00220a  d105              BNE      |L1.8728|
00220c  fa03fc01          LSL      r12,r3,r1             ;3923
002210  ea4c0c00          ORR      r12,r12,r0            ;3923
002214  f00c00ff          AND      r0,r12,#0xff          ;3923
                  |L1.8728|
002218  ea5f7c42          LSLS     r12,r2,#29            ;3925
00221c  d50a              BPL      |L1.8756|
00221e  f897c000          LDRB     r12,[r7,#0]           ;3926  ; hv_vz_stat
002222  f1bc0f02          CMP      r12,#2                ;3926
002226  d105              BNE      |L1.8756|
002228  fa03fc01          LSL      r12,r3,r1             ;3926
00222c  ea4c0c00          ORR      r12,r12,r0            ;3926
002230  f00c00ff          AND      r0,r12,#0xff          ;3926
                  |L1.8756|
002234  ea5f7c02          LSLS     r12,r2,#28            ;3928
002238  d50c              BPL      |L1.8788|
00223a  f8dfc14c          LDR      r12,|L1.9096|
00223e  f8dcc000          LDR      r12,[r12,#0]          ;3929  ; avar_stat
002242  f1bc0f00          CMP      r12,#0                ;3929
002246  d005              BEQ      |L1.8788|
002248  fa03fc01          LSL      r12,r3,r1             ;3929
00224c  ea4c0c00          ORR      r12,r12,r0            ;3929
002250  f00c00ff          AND      r0,r12,#0xff          ;3929
                  |L1.8788|
002254  ea5f6cc2          LSLS     r12,r2,#27            ;3931
002258  d50a              BPL      |L1.8816|
00225a  f89ac000          LDRB     r12,[r10,#0]          ;3932  ; uout_av
00225e  f1bc0f01          CMP      r12,#1                ;3932
002262  d105              BNE      |L1.8816|
002264  fa03fc01          LSL      r12,r3,r1             ;3932
002268  ea4c0c00          ORR      r12,r12,r0            ;3932
00226c  f00c00ff          AND      r0,r12,#0xff          ;3932
                  |L1.8816|
002270  ea5f6c82          LSLS     r12,r2,#26            ;3934
002274  d50a              BPL      |L1.8844|
002276  f89ac000          LDRB     r12,[r10,#0]          ;3935  ; uout_av
00227a  f1bc0f02          CMP      r12,#2                ;3935
00227e  d105              BNE      |L1.8844|
002280  fa03fc01          LSL      r12,r3,r1             ;3935
002284  ea4c0c00          ORR      r12,r12,r0            ;3935
002288  f00c00ff          AND      r0,r12,#0xff          ;3935
                  |L1.8844|
00228c  ea5f6c42          LSLS     r12,r2,#25            ;3936
002290  d525              BPL      |L1.8926|
002292  f899c001          LDRB     r12,[r9,#1]  ; bps
002296  ea5f6ccc          LSLS     r12,r12,#27
00229a  d504              BPL      |L1.8870|
00229c  f9b5c000          LDRSH    r12,[r5,#0]  ; NUMIST
0022a0  f1bc0f01          CMP      r12,#1
0022a4  da15              BGE      |L1.8914|
                  |L1.8870|
;;;3939   			((bps[1]._av&(1<<4))&&(NUMIST>=2))||
0022a6  f899c05d          LDRB     r12,[r9,#0x5d]  ; bps
0022aa  ea5f6ccc          LSLS     r12,r12,#27
0022ae  d506              BPL      |L1.8894|
0022b0  f9b5c000          LDRSH    r12,[r5,#0]  ; NUMIST
0022b4  e000              B        |L1.8888|
                  |L1.8886|
0022b6  e047              B        |L1.9032|
                  |L1.8888|
0022b8  f1bc0f02          CMP      r12,#2
0022bc  da09              BGE      |L1.8914|
                  |L1.8894|
;;;3940   			((bps[2]._av&(1<<4))&&(NUMIST>=3))
0022be  f899c0b9          LDRB     r12,[r9,#0xb9]  ; bps
0022c2  ea5f6ccc          LSLS     r12,r12,#27
0022c6  d50a              BPL      |L1.8926|
0022c8  f9b5c000          LDRSH    r12,[r5,#0]  ; NUMIST
0022cc  f1bc0f03          CMP      r12,#3
0022d0  db05              BLT      |L1.8926|
                  |L1.8914|
;;;3941   			))bdr_avar_stat_temp|=(1<<ii_);
0022d2  fa03fc01          LSL      r12,r3,r1
0022d6  ea4c0c00          ORR      r12,r12,r0
0022da  f00c00ff          AND      r0,r12,#0xff
                  |L1.8926|
;;;3942   		if((RELE_SET_MASK[ii_]&0x80)&&
0022de  ea5f6c02          LSLS     r12,r2,#24
0022e2  d523              BPL      |L1.9004|
;;;3943   			(
;;;3944   			((bps[0]._av&(0x0f))&&(NUMIST>=1))||
0022e4  f899c001          LDRB     r12,[r9,#1]  ; bps
0022e8  ea5f7c0c          LSLS     r12,r12,#28
0022ec  d004              BEQ      |L1.8952|
0022ee  f9b5c000          LDRSH    r12,[r5,#0]  ; NUMIST
0022f2  f1bc0f01          CMP      r12,#1
0022f6  da13              BGE      |L1.8992|
                  |L1.8952|
;;;3945   			((bps[1]._av&(0x0f))&&(NUMIST>=2))||
0022f8  f899c05d          LDRB     r12,[r9,#0x5d]  ; bps
0022fc  ea5f7c0c          LSLS     r12,r12,#28
002300  d004              BEQ      |L1.8972|
002302  f9b5c000          LDRSH    r12,[r5,#0]  ; NUMIST
002306  f1bc0f02          CMP      r12,#2
00230a  da09              BGE      |L1.8992|
                  |L1.8972|
;;;3946   			((bps[2]._av&(0x0f))&&(NUMIST>=3))
00230c  f899c0b9          LDRB     r12,[r9,#0xb9]  ; bps
002310  ea5f7c0c          LSLS     r12,r12,#28
002314  d00a              BEQ      |L1.9004|
002316  f9b5c000          LDRSH    r12,[r5,#0]  ; NUMIST
00231a  f1bc0f03          CMP      r12,#3
00231e  db05              BLT      |L1.9004|
                  |L1.8992|
;;;3947   			))bdr_avar_stat_temp|=(1<<ii_);
002320  fa03fc01          LSL      r12,r3,r1
002324  ea4c0c00          ORR      r12,r12,r0
002328  f00c00ff          AND      r0,r12,#0xff
                  |L1.9004|
;;;3948   
;;;3949   		if(!(RELE_SET_MASK[ii_]&(1<<15))) bdr_avar_stat_temp^=(1<<ii_); 
00232c  0412              LSLS     r2,r2,#16
00232e  d404              BMI      |L1.9018|
002330  fa03f201          LSL      r2,r3,r1
002334  ea820200          EOR      r2,r2,r0
002338  b2d0              UXTB     r0,r2
                  |L1.9018|
00233a  f1010101          ADD      r1,r1,#1              ;3916
00233e  b2c9              UXTB     r1,r1                 ;3916
002340  2904              CMP      r1,#4                 ;3916
002342  f4ffaf45          BCC      |L1.8656|
;;;3950   		}
;;;3951   	bdr_avar_stat=bdr_avar_stat_temp;
002346  7020              STRB     r0,[r4,#0]
                  |L1.9032|
;;;3952   	}
;;;3953   }
002348  e8bd9ff0          POP      {r4-r12,pc}
                  |L1.9036|
                          DCD      load_U
                  |L1.9040|
                          DCD      sp_ch_stat
                  |L1.9044|
                          DCD      hv_vz_stat
                  |L1.9048|
                          DCD      DOP_RELE_FUNC
                  |L1.9052|
                          DCD      speedChIsOn
                  |L1.9056|
                          DCD      ||area_number.23||
                  |L1.9060|
                          DCD      UVENTOFF
                  |L1.9064|
                          DCD      bdr_transmit_stat
                  |L1.9068|
                          DCD      bdr_avar_stat
                  |L1.9072|
                          DCD      NUMBDR
                  |L1.9076|
                          DCD      uout_av
                  |L1.9080|
                          DCD      bps
                  |L1.9084|
                          DCD      NUMIST
                  |L1.9088|
                          DCD      RELE_SET_MASK
                  |L1.9092|
                          DCD      USIGN
                  |L1.9096|
                          DCD      avar_stat
                          ENDP

                  bps_hndl PROC
;;;3956   //-----------------------------------------------
;;;3957   void bps_hndl(void)
00238c  e92d5ff0          PUSH     {r4-r12,lr}
;;;3958   {
;;;3959   char ptr__,i;
;;;3960   unsigned short tempUS;
;;;3961   
;;;3962   if(sh_cnt0<10)
002390  4eff              LDR      r6,|L1.10128|
;;;3963   	{
;;;3964   	sh_cnt0++;
;;;3965   	if(sh_cnt0>=10)
;;;3966   		{
;;;3967   		sh_cnt0=0;
002392  2700              MOVS     r7,#0
;;;3968   		b1Hz_sh=1;
002394  f04f0a01          MOV      r10,#1
002398  7cb0              LDRB     r0,[r6,#0x12]         ;3962  ; sh_cnt0
00239a  280a              CMP      r0,#0xa               ;3962
00239c  d208              BCS      |L1.9136|
00239e  f1000001          ADD      r0,r0,#1              ;3964
0023a2  b2c0              UXTB     r0,r0                 ;3964
0023a4  74b0              STRB     r0,[r6,#0x12]         ;3964
0023a6  280a              CMP      r0,#0xa               ;3965
0023a8  d302              BCC      |L1.9136|
0023aa  74b7              STRB     r7,[r6,#0x12]         ;3967
0023ac  f886a013          STRB     r10,[r6,#0x13]
                  |L1.9136|
;;;3969   		}
;;;3970   	}
;;;3971   
;;;3972   /*if(sh_cnt1<5)
;;;3973   	{
;;;3974   	sh_cnt1++;
;;;3975   	if(sh_cnt1==5)
;;;3976   		{
;;;3977   		sh_cnt1=0;
;;;3978   		b2Hz_sh=1;
;;;3979   		}
;;;3980   	} */
;;;3981   
;;;3982   
;;;3983   /*
;;;3984   if(mess_find(MESS_SRC_ON_OFF))
;;;3985   	{
;;;3986   	if(mess_data[0]==_MESS_SRC_MASK_BLOK_2SEC)
;;;3987   		{
;;;3988   		char i;
;;;3989   		for(i=0;i<NUMIST;i++)
;;;3990   			{
;;;3991   			if(mess_data[1]&(1<<i))src[i]._ist_blok_cnt=20;
;;;3992   			}
;;;3993   		
;;;3994   		}
;;;3995   	else if(mess_data[0]==_MESS_SRC_MASK_UNBLOK)
;;;3996   		{
;;;3997   		char i;
;;;3998   		for(i=0;i<NUMIST;i++)
;;;3999   			{
;;;4000   			if(mess_data[1]&(1<<i))src[i]._ist_blok_cnt=0;
;;;4001   			}
;;;4002   		
;;;4003   		}
;;;4004   	}
;;;4005   	
;;;4006   else if(mess_find(_MESS_SRC_MASK_ON))
;;;4007   	{				
;;;4008   	if(mess_data[0]==_MESS_SRC_MASK_ON)
;;;4009   		{
;;;4010   		char i;
;;;4011   		for(i=0;i<NUMIST;i++)
;;;4012   			{
;;;4013   			if(mess_data[1]&(1<<i))
;;;4014   				{
;;;4015   				src[i]._ist_blok_cnt=0;
;;;4016   				src[i]._flags_tu=2;
;;;4017   				}
;;;4018   			}
;;;4019   		
;;;4020   		}				
;;;4021   	}*/
;;;4022   
;;;4023   
;;;4024   
;;;4025   /*else*/ 
;;;4026   bps_on_mask=0;
0023b0  f8a6704c          STRH     r7,[r6,#0x4c]
;;;4027   bps_off_mask=0;
0023b4  f8a6704e          STRH     r7,[r6,#0x4e]
;;;4028   
;;;4029   if(mess_find_unvol(MESS2BPS_HNDL))
0023b8  20cd              MOVS     r0,#0xcd
0023ba  f7fffffe          BL       mess_find_unvol
;;;4030   	{
;;;4031   	if(mess_data[0]==PARAM_BPS_ALL_OFF_AFTER_2SEC)
;;;4032   		{
;;;4033   		bps_off_mask=0xffff;
;;;4034   		}
;;;4035   
;;;4036   	if(mess_data[0]==PARAM_BPS_MASK_OFF_AFTER_2SEC)
;;;4037   		{
;;;4038   		bps_off_mask=mess_data[1];
;;;4039   		}
;;;4040   
;;;4041   	if(mess_data[0]==PARAM_BPS_MASK_ON)
;;;4042   		{
;;;4043   		bps_on_mask=mess_data[1];
;;;4044   		}
;;;4045   
;;;4046   	if(mess_data[0]==PARAM_BPS_ALL_ON)
;;;4047   		{
;;;4048   		bps_on_mask=0xffff;
;;;4049   		}
;;;4050   
;;;4051   	if(mess_data[0]==PARAM_BPS_MASK_ON_OFF_AFTER_2SEC)
;;;4052   		{
;;;4053   		bps_on_mask=mess_data[1];
;;;4054   		bps_off_mask=~(mess_data[1]);
;;;4055   		}
;;;4056   
;;;4057   
;;;4058   	for(i=0;i<=NUMIST;i++)
;;;4059   		{
;;;4060   		if(bps_off_mask&(1<<i)) bps[i]._blok_cnt++;
0023be  f8df83d4          LDR      r8,|L1.10132|
0023c2  f8dfb3d4          LDR      r11,|L1.10136|
0023c6  b3a0              CBZ      r0,|L1.9266|
0023c8  4af4              LDR      r2,|L1.10140|
0023ca  f64f73ff          MOV      r3,#0xffff            ;4033
0023ce  6810              LDR      r0,[r2,#0]            ;4031  ; mess_data
0023d0  28ce              CMP      r0,#0xce              ;4031
0023d2  d101              BNE      |L1.9176|
0023d4  f8a6304e          STRH     r3,[r6,#0x4e]         ;4033
                  |L1.9176|
0023d8  28cf              CMP      r0,#0xcf              ;4036
0023da  d102              BNE      |L1.9186|
0023dc  6851              LDR      r1,[r2,#4]            ;4038  ; mess_data
0023de  f8a6104e          STRH     r1,[r6,#0x4e]         ;4038
                  |L1.9186|
0023e2  28d1              CMP      r0,#0xd1              ;4041
0023e4  d102              BNE      |L1.9196|
0023e6  6851              LDR      r1,[r2,#4]            ;4043  ; mess_data
0023e8  f8a6104c          STRH     r1,[r6,#0x4c]         ;4043
                  |L1.9196|
0023ec  28d2              CMP      r0,#0xd2              ;4046
0023ee  d101              BNE      |L1.9204|
0023f0  f8a6304c          STRH     r3,[r6,#0x4c]         ;4048
                  |L1.9204|
0023f4  28d0              CMP      r0,#0xd0              ;4051
0023f6  d106              BNE      |L1.9222|
0023f8  6850              LDR      r0,[r2,#4]            ;4053  ; mess_data
0023fa  f8a6004c          STRH     r0,[r6,#0x4c]         ;4053
0023fe  ea6f0000          MVN      r0,r0                 ;4054
002402  f8a6004e          STRH     r0,[r6,#0x4e]         ;4054
                  |L1.9222|
002406  f04f0400          MOV      r4,#0                 ;4058
00240a  e037              B        |L1.9340|
                  |L1.9228|
00240c  f8b6004e          LDRH     r0,[r6,#0x4e]  ; bps_off_mask
002410  fa0af904          LSL      r9,r10,r4
002414  ea190f00          TST      r9,r0
002418  d00c              BEQ      |L1.9268|
00241a  ebc400c4          RSB      r0,r4,r4,LSL #3
00241e  eb001004          ADD      r0,r0,r4,LSL #4
002422  eb080080          ADD      r0,r8,r0,LSL #2
002426  f8301f40          LDRH     r1,[r0,#0x40]!
00242a  f1010101          ADD      r1,r1,#1
00242e  8001              STRH     r1,[r0,#0]
002430  e008              B        |L1.9284|
                  |L1.9266|
002432  e028              B        |L1.9350|
                  |L1.9268|
;;;4061   		else bps[i]._blok_cnt=0;
002434  ebc400c4          RSB      r0,r4,r4,LSL #3
002438  eb001004          ADD      r0,r0,r4,LSL #4
00243c  eb080080          ADD      r0,r8,r0,LSL #2
002440  f8a07040          STRH     r7,[r0,#0x40]
                  |L1.9284|
;;;4062   		gran(&bps[i]._blok_cnt,0,50);
002444  ebc400c4          RSB      r0,r4,r4,LSL #3
002448  eb001004          ADD      r0,r0,r4,LSL #4
00244c  eb080580          ADD      r5,r8,r0,LSL #2
002450  f1050040          ADD      r0,r5,#0x40
002454  2232              MOVS     r2,#0x32
002456  2100              MOVS     r1,#0
002458  f7fffffe          BL       gran
;;;4063   		if(bps[i]._blok_cnt>20) bps[i]._flags_tu=1;
00245c  f9b50040          LDRSH    r0,[r5,#0x40]
002460  2814              CMP      r0,#0x14
002462  dd01              BLE      |L1.9320|
002464  f885a02c          STRB     r10,[r5,#0x2c]
                  |L1.9320|
;;;4064   		if(bps_on_mask&(1<<i)) bps[i]._flags_tu=0;
002468  f8b6004c          LDRH     r0,[r6,#0x4c]  ; bps_on_mask
00246c  ea190f00          TST      r9,r0
002470  d001              BEQ      |L1.9334|
002472  f885702c          STRB     r7,[r5,#0x2c]
                  |L1.9334|
002476  f1040401          ADD      r4,r4,#1              ;4058
00247a  b2e4              UXTB     r4,r4                 ;4058
                  |L1.9340|
00247c  f9bb0000          LDRSH    r0,[r11,#0]           ;4058  ; NUMIST
002480  4284              CMP      r4,r0                 ;4058
002482  ddc3              BLE      |L1.9228|
002484  e08a              B        |L1.9628|
                  |L1.9350|
;;;4065   	     }
;;;4066   
;;;4067   	
;;;4068   /*
;;;4069   
;;;4070   	if(bps_all_off_cnt>20)
;;;4071   		{
;;;4072   		for(i=0;i<=NUMIST;i++)
;;;4073   			{
;;;4074   	     	bps[i]._flags_tu=1;
;;;4075   	     	}
;;;4076   		}
;;;4077   	else if(bps_mask_off_cnt>20)
;;;4078   		{
;;;4079   		for(i=0;i<=NUMIST;i++)
;;;4080   			{
;;;4081   			if(mess_data[1]&(1<<i)) bps[i]._flags_tu=1;
;;;4082   	     	}
;;;4083   		}	
;;;4084   		
;;;4085   	else if(bps_mask_on_off_cnt>20)
;;;4086   		{
;;;4087   		for(i=0;i<=NUMIST;i++)
;;;4088   			{
;;;4089   			if(mess_data[1]&(1<<i)) bps[i]._flags_tu=1;
;;;4090   			else bps[i]._flags_tu=0;
;;;4091   	     	}
;;;4092   		}
;;;4093   		
;;;4094   	if(mess_data[0]==PARAM_BPS_MASK_ON)
;;;4095   		{
;;;4096   		for(i=0;i<=NUMIST;i++)
;;;4097   			{
;;;4098   			if(mess_data[1]&(1<<i)) bps[i]._flags_tu=0;
;;;4099   	     	}
;;;4100   		}
;;;4101   */										
;;;4102   	}
;;;4103   
;;;4104   
;;;4105   else if(b1Hz_sh)
002486  7cf0              LDRB     r0,[r6,#0x13]  ; b1Hz_sh
002488  b3f0              CBZ      r0,|L1.9480|
;;;4106   	{
;;;4107   	ptr__=0;
00248a  f04f0400          MOV      r4,#0
;;;4108        for(i=0;i<=NUMIST;i++)
00248e  4621              MOV      r1,r4
002490  f9bb0000          LDRSH    r0,[r11,#0]           ;4058
002494  e00a              B        |L1.9388|
                  |L1.9366|
;;;4109   		{
;;;4110   	     bps[i]._flags_tu=1;
002496  ebc102c1          RSB      r2,r1,r1,LSL #3
00249a  eb021201          ADD      r2,r2,r1,LSL #4
00249e  eb080282          ADD      r2,r8,r2,LSL #2
0024a2  f882a02c          STRB     r10,[r2,#0x2c]
0024a6  f1010101          ADD      r1,r1,#1              ;4108
0024aa  b2c9              UXTB     r1,r1                 ;4108
                  |L1.9388|
0024ac  4281              CMP      r1,r0                 ;4108
0024ae  ddf2              BLE      |L1.9366|
;;;4111   	     }	
;;;4112     	     
;;;4113     	for(i=0;(i<NUMIST)&&(ptr__<num_necc);i++)
0024b0  f04f0100          MOV      r1,#0
0024b4  e022              B        |L1.9468|
                  |L1.9398|
;;;4114     		{
;;;4115   		char ii,iii;
;;;4116   
;;;4117   		ii=(char)NUMIST;
0024b6  b2c2              UXTB     r2,r0
;;;4118   		//if(ii<0)ii=0;
;;;4119   		if(ii>32)ii=32;
0024b8  2a20              CMP      r2,#0x20
0024ba  d901              BLS      |L1.9408|
0024bc  f04f0220          MOV      r2,#0x20
                  |L1.9408|
;;;4120   		iii=numOfForvardBps;
0024c0  7e73              LDRB     r3,[r6,#0x19]  ; numOfForvardBps
;;;4121   		//if(iii<0)iii=0;
;;;4122   		if(iii>=NUMIST)iii=0;
0024c2  4283              CMP      r3,r0
0024c4  db01              BLT      |L1.9418|
0024c6  f04f0300          MOV      r3,#0
                  |L1.9418|
;;;4123   		iii+=i;
0024ca  440b              ADD      r3,r3,r1
0024cc  b2db              UXTB     r3,r3
;;;4124   		iii=iii%ii;
0024ce  fbb3f5f2          UDIV     r5,r3,r2
0024d2  fb023215          MLS      r2,r2,r5,r3
;;;4125   		
;;;4126     	     if((bps[iii]._state==bsRDY)||(bps[iii]._state==bsWRK))
0024d6  ebc203c2          RSB      r3,r2,r2,LSL #3
0024da  eb031202          ADD      r2,r3,r2,LSL #4
0024de  eb080282          ADD      r2,r8,r2,LSL #2
0024e2  7893              LDRB     r3,[r2,#2]
0024e4  2b02              CMP      r3,#2
0024e6  d001              BEQ      |L1.9452|
0024e8  2b01              CMP      r3,#1
0024ea  d104              BNE      |L1.9462|
                  |L1.9452|
;;;4127     	         	{
;;;4128     	         	bps[iii]._flags_tu=0;
0024ec  f882702c          STRB     r7,[r2,#0x2c]
;;;4129     	         	ptr__++;
0024f0  f1040401          ADD      r4,r4,#1
0024f4  b2e4              UXTB     r4,r4
                  |L1.9462|
0024f6  f1010101          ADD      r1,r1,#1              ;4113
0024fa  b2c9              UXTB     r1,r1                 ;4113
                  |L1.9468|
0024fc  4281              CMP      r1,r0                 ;4113
0024fe  da06              BGE      |L1.9486|
002500  4aa7              LDR      r2,|L1.10144|
002502  f9b22000          LDRSH    r2,[r2,#0]            ;4113  ; num_necc
002506  e000              B        |L1.9482|
                  |L1.9480|
002508  e048              B        |L1.9628|
                  |L1.9482|
00250a  4294              CMP      r4,r2                 ;4113
00250c  dbd3              BLT      |L1.9398|
                  |L1.9486|
;;;4130     	         	}
;;;4131   			
;;;4132     	     }
;;;4133   	bps[numOfForvardBps_old]._flags_tu=0;
00250e  7eb1              LDRB     r1,[r6,#0x1a]  ; numOfForvardBps_old
002510  ebc102c1          RSB      r2,r1,r1,LSL #3
002514  eb021101          ADD      r1,r2,r1,LSL #4
002518  eb080181          ADD      r1,r8,r1,LSL #2
00251c  f881702c          STRB     r7,[r1,#0x2c]
;;;4134   
;;;4135   	if(main_1Hz_cnt<60)
002520  49a0              LDR      r1,|L1.10148|
002522  f9b11000          LDRSH    r1,[r1,#0]  ; main_1Hz_cnt
002526  293c              CMP      r1,#0x3c
002528  da0f              BGE      |L1.9546|
;;;4136   		{
;;;4137        	for(i=0;i<=NUMIST;i++)
00252a  f04f0100          MOV      r1,#0
00252e  e00a              B        |L1.9542|
                  |L1.9520|
;;;4138   			{
;;;4139   	     	bps[i]._flags_tu=0;
002530  ebc102c1          RSB      r2,r1,r1,LSL #3
002534  eb021201          ADD      r2,r2,r1,LSL #4
002538  eb080282          ADD      r2,r8,r2,LSL #2
00253c  f882702c          STRB     r7,[r2,#0x2c]
002540  f1010101          ADD      r1,r1,#1              ;4137
002544  b2c9              UXTB     r1,r1                 ;4137
                  |L1.9542|
002546  4281              CMP      r1,r0                 ;4137
002548  ddf2              BLE      |L1.9520|
                  |L1.9546|
;;;4140   	     	}	
;;;4141   		}
;;;4142   	if(ipsBlckStat)
00254a  4997              LDR      r1,|L1.10152|
00254c  8809              LDRH     r1,[r1,#0]  ; ipsBlckStat
00254e  b179              CBZ      r1,|L1.9584|
;;;4143   		{
;;;4144        	for(i=0;i<=NUMIST;i++)
002550  f04f0100          MOV      r1,#0
002554  e00a              B        |L1.9580|
                  |L1.9558|
;;;4145   			{
;;;4146   	     	bps[i]._flags_tu=1;
002556  ebc102c1          RSB      r2,r1,r1,LSL #3
00255a  eb021201          ADD      r2,r2,r1,LSL #4
00255e  eb080282          ADD      r2,r8,r2,LSL #2
002562  f882a02c          STRB     r10,[r2,#0x2c]
002566  f1010101          ADD      r1,r1,#1              ;4144
00256a  b2c9              UXTB     r1,r1                 ;4144
                  |L1.9580|
00256c  4281              CMP      r1,r0                 ;4144
00256e  ddf2              BLE      |L1.9558|
                  |L1.9584|
;;;4147   	     	}
;;;4148   		}
;;;4149   
;;;4150        for(i=0;i<=NUMIST;i++)
002570  f04f0100          MOV      r1,#0
;;;4151   		{
;;;4152   	    if(bps[i]._flags_tu==1) 	bps[i]._x_=-50;
002574  f06f0331          MVN      r3,#0x31
002578  e00e              B        |L1.9624|
                  |L1.9594|
00257a  ebc102c1          RSB      r2,r1,r1,LSL #3
00257e  eb021201          ADD      r2,r2,r1,LSL #4
002582  eb080282          ADD      r2,r8,r2,LSL #2
002586  f892402c          LDRB     r4,[r2,#0x2c]
00258a  2c01              CMP      r4,#1
00258c  d101              BNE      |L1.9618|
00258e  f8a23050          STRH     r3,[r2,#0x50]
                  |L1.9618|
002592  f1010101          ADD      r1,r1,#1              ;4150
002596  b2c9              UXTB     r1,r1                 ;4150
                  |L1.9624|
002598  4281              CMP      r1,r0                 ;4150
00259a  ddee              BLE      |L1.9594|
                  |L1.9628|
;;;4153   	   	}	
;;;4154   		 
;;;4155     	}
;;;4156   
;;;4157   
;;;4158   for(i=0;i<NUMIST;i++)
00259c  f04f0000          MOV      r0,#0
;;;4159        {
;;;4160        if(bps[i]._ist_blok_host_cnt!=0)
;;;4161             {
;;;4162             bps[i]._flags_tu=99;
0025a0  f04f0463          MOV      r4,#0x63
0025a4  f9bb1000          LDRSH    r1,[r11,#0]           ;4058
0025a8  e00f              B        |L1.9674|
                  |L1.9642|
0025aa  ebc002c0          RSB      r2,r0,r0,LSL #3       ;4160
0025ae  eb021200          ADD      r2,r2,r0,LSL #4       ;4160
0025b2  eb080282          ADD      r2,r8,r2,LSL #2       ;4160
0025b6  6bd3              LDR      r3,[r2,#0x3c]         ;4160
0025b8  b123              CBZ      r3,|L1.9668|
0025ba  f882402c          STRB     r4,[r2,#0x2c]
;;;4163   	     bps[i]._ist_blok_host_cnt--;
0025be  f1a30301          SUB      r3,r3,#1
0025c2  63d3              STR      r3,[r2,#0x3c]
                  |L1.9668|
0025c4  f1000001          ADD      r0,r0,#1              ;4158
0025c8  b2c0              UXTB     r0,r0                 ;4158
                  |L1.9674|
0025ca  4288              CMP      r0,r1                 ;4158
0025cc  dbed              BLT      |L1.9642|
;;;4164             }
;;;4165        }
;;;4166   
;;;4167   
;;;4168   
;;;4169   
;;;4170   b1Hz_sh=0;
0025ce  74f7              STRB     r7,[r6,#0x13]
;;;4171   
;;;4172   
;;;4173   num_of_wrks_bps=0;
0025d0  73f7              STRB     r7,[r6,#0xf]
;;;4174   tempUS=0;
0025d2  f04f0200          MOV      r2,#0
;;;4175   for(i=0;i<NUMIST;i++)
0025d6  4610              MOV      r0,r2
0025d8  e013              B        |L1.9730|
                  |L1.9690|
;;;4176   	{
;;;4177   	if(bps[i]._state==bsWRK)
0025da  ebc003c0          RSB      r3,r0,r0,LSL #3
0025de  eb031300          ADD      r3,r3,r0,LSL #4
0025e2  eb080383          ADD      r3,r8,r3,LSL #2
0025e6  789c              LDRB     r4,[r3,#2]
0025e8  2c01              CMP      r4,#1
0025ea  d107              BNE      |L1.9724|
;;;4178   		{
;;;4179   		num_of_wrks_bps++;
0025ec  7bf4              LDRB     r4,[r6,#0xf]  ; num_of_wrks_bps
0025ee  f1040401          ADD      r4,r4,#1
0025f2  73f4              STRB     r4,[r6,#0xf]
;;;4180   		if(bps[i]._Uii>tempUS)tempUS=bps[i]._Uii;
0025f4  69db              LDR      r3,[r3,#0x1c]
0025f6  4293              CMP      r3,r2
0025f8  dd00              BLE      |L1.9724|
0025fa  b29a              UXTH     r2,r3
                  |L1.9724|
0025fc  f1000001          ADD      r0,r0,#1              ;4175
002600  b2c0              UXTB     r0,r0                 ;4175
                  |L1.9730|
002602  4288              CMP      r0,r1                 ;4175
002604  dbe9              BLT      |L1.9690|
;;;4181   		}
;;;4182   	}
;;;4183   Ubpsmax=tempUS;
002606  87b2              STRH     r2,[r6,#0x3c]
;;;4184   
;;;4185   bPARALLEL_ENOUG=0;
002608  7777              STRB     r7,[r6,#0x1d]
;;;4186   bPARALLEL_NOT_ENOUG=1;
00260a  f886a01c          STRB     r10,[r6,#0x1c]
;;;4187   
;;;4188   for(i=0;i<NUMIST;i++)
00260e  f04f0000          MOV      r0,#0
;;;4189   	{
;;;4190   	if(bps[i]._Ti>=TSIGN)
002612  4a66              LDR      r2,|L1.10156|
002614  f9b23000          LDRSH    r3,[r2,#0]
;;;4191   		{
;;;4192   		bPARALLEL_ENOUG=1;
;;;4193   		}
;;;4194   	if(bps[i]._Ti>=(TSIGN-5))
002618  f1a30405          SUB      r4,r3,#5
00261c  e010              B        |L1.9792|
                  |L1.9758|
00261e  ebc002c0          RSB      r2,r0,r0,LSL #3       ;4190
002622  eb021200          ADD      r2,r2,r0,LSL #4       ;4190
002626  eb080282          ADD      r2,r8,r2,LSL #2       ;4190
00262a  6a92              LDR      r2,[r2,#0x28]         ;4190
00262c  429a              CMP      r2,r3                 ;4190
00262e  db01              BLT      |L1.9780|
002630  f886a01d          STRB     r10,[r6,#0x1d]        ;4192
                  |L1.9780|
002634  42a2              CMP      r2,r4
002636  db00              BLT      |L1.9786|
;;;4195   		{
;;;4196   		bPARALLEL_NOT_ENOUG=0;
002638  7737              STRB     r7,[r6,#0x1c]
                  |L1.9786|
00263a  f1000001          ADD      r0,r0,#1              ;4188
00263e  b2c0              UXTB     r0,r0                 ;4188
                  |L1.9792|
002640  4288              CMP      r0,r1                 ;4188
002642  dbec              BLT      |L1.9758|
;;;4197   		}
;;;4198   	}
;;;4199   
;;;4200   if(bPARALLEL_ENOUG==1)
002644  7f70              LDRB     r0,[r6,#0x1d]  ; bPARALLEL_ENOUG
002646  2801              CMP      r0,#1
002648  d007              BEQ      |L1.9818|
;;;4201   	{
;;;4202   	bPARALLEL=1;
;;;4203   	}
;;;4204   else if(bPARALLEL && bPARALLEL_NOT_ENOUG)
00264a  7fb0              LDRB     r0,[r6,#0x1e]  ; bPARALLEL
00264c  2800              CMP      r0,#0
00264e  d003              BEQ      |L1.9816|
002650  7f30              LDRB     r0,[r6,#0x1c]  ; bPARALLEL_NOT_ENOUG
002652  2800              CMP      r0,#0
002654  d000              BEQ      |L1.9816|
;;;4205   	{
;;;4206   	bPARALLEL=0;
002656  77b7              STRB     r7,[r6,#0x1e]
                  |L1.9816|
;;;4207   	}
;;;4208   }
002658  e676              B        |L1.9032|
                  |L1.9818|
00265a  f886a01e          STRB     r10,[r6,#0x1e]        ;4202
00265e  e673              B        |L1.9032|
;;;4209   
                          ENDP

                  powerAntiAliasingHndl PROC
;;;4216   //-----------------------------------------------
;;;4217   void powerAntiAliasingHndl(void)
002660  b570              PUSH     {r4-r6,lr}
;;;4218   {
;;;4219   if((power_summary_tempo/10UL)==(power_summary_tempo_old/10UL))
002662  230a              MOVS     r3,#0xa
002664  4c53              LDR      r4,|L1.10164|
002666  4852              LDR      r0,|L1.10160|
;;;4220   	{
;;;4221   	if(powerSummaryCnt<15)powerSummaryCnt++;
;;;4222   	if(powerSummaryCnt>=10)
;;;4223   		{
;;;4224   		power_summary=power_summary_tempo;
;;;4225   		}
;;;4226   	}
;;;4227   else powerSummaryCnt=0;
002668  2500              MOVS     r5,#0
00266a  6822              LDR      r2,[r4,#0]            ;4219  ; power_summary_tempo_old
00266c  6800              LDR      r0,[r0,#0]            ;4219  ; power_summary_tempo
00266e  fbb2f6f3          UDIV     r6,r2,r3              ;4219
002672  fbb0f1f3          UDIV     r1,r0,r3              ;4219
002676  4a50              LDR      r2,|L1.10168|
002678  42b1              CMP      r1,r6                 ;4219
00267a  d10b              BNE      |L1.9876|
00267c  7811              LDRB     r1,[r2,#0]            ;4221  ; powerSummaryCnt
00267e  290f              CMP      r1,#0xf               ;4221
002680  d202              BCS      |L1.9864|
002682  f1010101          ADD      r1,r1,#1              ;4221
002686  7011              STRB     r1,[r2,#0]            ;4221
                  |L1.9864|
002688  7811              LDRB     r1,[r2,#0]            ;4222  ; powerSummaryCnt
00268a  290a              CMP      r1,#0xa               ;4222
00268c  d303              BCC      |L1.9878|
00268e  494b              LDR      r1,|L1.10172|
002690  6008              STR      r0,[r1,#0]            ;4224  ; power_summary
002692  e000              B        |L1.9878|
                  |L1.9876|
002694  7015              STRB     r5,[r2,#0]
                  |L1.9878|
;;;4228   power_summary_tempo_old=power_summary_tempo;
002696  6020              STR      r0,[r4,#0]  ; power_summary_tempo_old
;;;4229   
;;;4230   if((power_current_tempo/10UL)==(power_current_tempo_old/10UL))
002698  4849              LDR      r0,|L1.10176|
00269a  4c4a              LDR      r4,|L1.10180|
00269c  f9b00000          LDRSH    r0,[r0,#0]  ; power_current_tempo
0026a0  f9b42000          LDRSH    r2,[r4,#0]  ; power_current_tempo_old
0026a4  fbb0f1f3          UDIV     r1,r0,r3
0026a8  fbb2f3f3          UDIV     r3,r2,r3
;;;4231   	{
;;;4232   	if(powerCurrentCnt<15)powerCurrentCnt++;
0026ac  4a46              LDR      r2,|L1.10184|
0026ae  4299              CMP      r1,r3                 ;4230
0026b0  d10b              BNE      |L1.9930|
0026b2  7811              LDRB     r1,[r2,#0]  ; powerCurrentCnt
0026b4  290f              CMP      r1,#0xf
0026b6  d202              BCS      |L1.9918|
0026b8  f1010101          ADD      r1,r1,#1
0026bc  7011              STRB     r1,[r2,#0]
                  |L1.9918|
;;;4233   	if(powerCurrentCnt>=10)
0026be  7811              LDRB     r1,[r2,#0]  ; powerCurrentCnt
0026c0  290a              CMP      r1,#0xa
0026c2  d303              BCC      |L1.9932|
;;;4234   		{
;;;4235   		power_current=power_current_tempo;
0026c4  4941              LDR      r1,|L1.10188|
0026c6  8008              STRH     r0,[r1,#0]
0026c8  e000              B        |L1.9932|
                  |L1.9930|
;;;4236   		}
;;;4237   	}
;;;4238   else powerCurrentCnt=0;
0026ca  7015              STRB     r5,[r2,#0]
                  |L1.9932|
;;;4239   power_current_tempo_old=power_current_tempo;
0026cc  8020              STRH     r0,[r4,#0]
;;;4240   }
0026ce  bd70              POP      {r4-r6,pc}
;;;4241   
                          ENDP

                  ips_current_average_hndl PROC
;;;4349   //-----------------------------------------------
;;;4350   void ips_current_average_hndl(void)
0026d0  e92d4ff0          PUSH     {r4-r11,lr}
;;;4351   {
0026d4  b085              SUB      sp,sp,#0x14
;;;4352   if((++ica_timer_cnt>=10)	&& (num_of_wrks_bps))
0026d6  4e3e              LDR      r6,|L1.10192|
0026d8  2400              MOVS     r4,#0
;;;4353   	{
;;;4354   	ica_timer_cnt=0;
;;;4355   	ica_plazma[0]++;
;;;4356   
;;;4357   	ica_my_current=bps_I;
;;;4358   
;;;4359   	if((ica_my_current>ica_your_current)&&((ica_my_current-ica_your_current)>=5)&&((ICA_EN==1)||((ICA_EN==2)&&(ica_cntrl_hndl_cnt>5))))
0026da  4f3e              LDR      r7,|L1.10196|
0026dc  7830              LDRB     r0,[r6,#0]            ;4352  ; ica_timer_cnt
0026de  4d2c              LDR      r5,|L1.10128|
0026e0  1c40              ADDS     r0,r0,#1              ;4352
0026e2  b2c0              UXTB     r0,r0                 ;4352
0026e4  7030              STRB     r0,[r6,#0]            ;4352
0026e6  280a              CMP      r0,#0xa               ;4352
0026e8  d34f              BCC      |L1.10122|
0026ea  7be8              LDRB     r0,[r5,#0xf]          ;4352  ; num_of_wrks_bps
0026ec  b398              CBZ      r0,|L1.10070|
0026ee  7034              STRB     r4,[r6,#0]            ;4354
0026f0  f8df90e4          LDR      r9,|L1.10200|
0026f4  f8990000          LDRB     r0,[r9,#0]            ;4355  ; ica_plazma
0026f8  f1000001          ADD      r0,r0,#1              ;4355
0026fc  f8890000          STRB     r0,[r9,#0]            ;4355
002700  4836              LDR      r0,|L1.10204|
002702  f9b01000          LDRSH    r1,[r0,#0]            ;4357  ; bps_I
002706  4836              LDR      r0,|L1.10208|
002708  8001              STRH     r1,[r0,#0]            ;4357
00270a  4836              LDR      r0,|L1.10212|
;;;4360   		{
;;;4361   		ica_plazma[1]++;
;;;4362   		ica_u_necc--;
00270c  f8dfa0d8          LDR      r10,|L1.10216|
002710  f9b02000          LDRSH    r2,[r0,#0]            ;4359  ; ica_your_current
002714  4648              MOV      r0,r9                 ;4355
002716  f9bac000          LDRSH    r12,[r10,#0]
00271a  7843              LDRB     r3,[r0,#1]            ;4361
00271c  4833              LDR      r0,|L1.10220|
00271e  4291              CMP      r1,r2                 ;4359
002720  f9b08000          LDRSH    r8,[r0,#0]            ;4359
002724  4638              MOV      r0,r7                 ;4359
002726  f9b00000          LDRSH    r0,[r0,#0]            ;4359
00272a  dd15              BLE      |L1.10072|
00272c  eba10b02          SUB      r11,r1,r2             ;4359
002730  f1bb0f05          CMP      r11,#5                ;4359
002734  db10              BLT      |L1.10072|
002736  2801              CMP      r0,#1                 ;4359
002738  d004              BEQ      |L1.10052|
00273a  2802              CMP      r0,#2                 ;4359
00273c  d10c              BNE      |L1.10072|
00273e  f1b80f05          CMP      r8,#5                 ;4359
002742  dd09              BLE      |L1.10072|
                  |L1.10052|
002744  f1030301          ADD      r3,r3,#1              ;4361
002748  f8893001          STRB     r3,[r9,#1]            ;4361
00274c  f1ac0c01          SUB      r12,r12,#1
002750  f8aac000          STRH     r12,[r10,#0]
002754  e014              B        |L1.10112|
                  |L1.10070|
002756  e018              B        |L1.10122|
                  |L1.10072|
;;;4363   		}
;;;4364   	else if((ica_my_current<ica_your_current)&&((ica_your_current-ica_my_current)>=5)&&((ICA_EN==1)||((ICA_EN==2)&&(ica_cntrl_hndl_cnt>5))))
002758  4291              CMP      r1,r2
00275a  da11              BGE      |L1.10112|
00275c  1a51              SUBS     r1,r2,r1
00275e  2905              CMP      r1,#5
002760  db0e              BLT      |L1.10112|
002762  2801              CMP      r0,#1
002764  d004              BEQ      |L1.10096|
002766  2802              CMP      r0,#2
002768  d10a              BNE      |L1.10112|
00276a  f1b80f05          CMP      r8,#5
00276e  dd07              BLE      |L1.10112|
                  |L1.10096|
;;;4365   		{
;;;4366   		ica_plazma[1]--;
002770  f1a30301          SUB      r3,r3,#1
002774  f8893001          STRB     r3,[r9,#1]
;;;4367   		ica_u_necc++;
002778  f10c0c01          ADD      r12,r12,#1
00277c  f8aac000          STRH     r12,[r10,#0]
                  |L1.10112|
;;;4368   		}
;;;4369   	gran(&ica_u_necc,-100,100);
002780  2264              MOVS     r2,#0x64
002782  4251              RSBS     r1,r2,#0
002784  4818              LDR      r0,|L1.10216|
002786  f7fffffe          BL       gran
                  |L1.10122|
;;;4370   	}
;;;4371   
;;;4372   
;;;4373   if((ICA_EN==1)&& (num_of_wrks_bps))
00278a  8838              LDRH     r0,[r7,#0]  ; ICA_EN
00278c  2801              CMP      r0,#1
00278e  e02f              B        |L1.10224|
                  |L1.10128|
                          DCD      ||area_number.23||
                  |L1.10132|
                          DCD      bps
                  |L1.10136|
                          DCD      NUMIST
                  |L1.10140|
                          DCD      mess_data
                  |L1.10144|
                          DCD      num_necc
                  |L1.10148|
                          DCD      main_1Hz_cnt
                  |L1.10152|
                          DCD      ipsBlckStat
                  |L1.10156|
                          DCD      TSIGN
                  |L1.10160|
                          DCD      power_summary_tempo
                  |L1.10164|
                          DCD      power_summary_tempo_old
                  |L1.10168|
                          DCD      powerSummaryCnt
                  |L1.10172|
                          DCD      power_summary
                  |L1.10176|
                          DCD      power_current_tempo
                  |L1.10180|
                          DCD      power_current_tempo_old
                  |L1.10184|
                          DCD      powerCurrentCnt
                  |L1.10188|
                          DCD      power_current
                  |L1.10192|
                          DCD      ica_timer_cnt
                  |L1.10196|
                          DCD      ICA_EN
                  |L1.10200|
                          DCD      ica_plazma
                  |L1.10204|
                          DCD      bps_I
                  |L1.10208|
                          DCD      ica_my_current
                  |L1.10212|
                          DCD      ica_your_current
                  |L1.10216|
                          DCD      ica_u_necc
                  |L1.10220|
                          DCD      ica_cntrl_hndl_cnt
                  |L1.10224|
0027f0  d158              BNE      |L1.10404|
0027f2  7be8              LDRB     r0,[r5,#0xf]  ; num_of_wrks_bps
0027f4  2800              CMP      r0,#0
0027f6  d055              BEQ      |L1.10404|
;;;4374   	{
;;;4375   /*	if(main_kb_cnt==(TBAT*60)-21)
;;;4376   		{
;;;4377   		char modbus_buff[20],i;
;;;4378   		short crc_temp;
;;;4379   	
;;;4380   		modbus_buff[0] = ICA_MODBUS_ADDRESS;
;;;4381   		modbus_buff[1] = 6;
;;;4382   		modbus_buff[2] = 0;
;;;4383   		modbus_buff[3] = 30;
;;;4384   		modbus_buff[4] = (char)(TBAT/256);	
;;;4385   		modbus_buff[5] = (char)(TBAT%256);
;;;4386   	
;;;4387   		crc_temp= CRC16_2(modbus_buff,6);
;;;4388   	
;;;4389   		modbus_buff[6]= (char)crc_temp;
;;;4390   		modbus_buff[7]= (char)(crc_temp>>8);
;;;4391   	
;;;4392   		if(ICA_CH==0)
;;;4393   			{
;;;4394   			for (i=0;i<8;i++)
;;;4395   				{
;;;4396   				putchar_sc16is700(modbus_buff[i]);
;;;4397   				}
;;;4398   			}
;;;4399   		}
;;;4400   	else*/ if(ica_timer_cnt==8)
0027f8  7830              LDRB     r0,[r6,#0]  ; ica_timer_cnt
;;;4401   		{
;;;4402   		char modbus_buff[20],i;
;;;4403   		short crc_temp;
;;;4404   	
;;;4405   		modbus_buff[0] = ICA_MODBUS_ADDRESS;
0027fa  4fff              LDR      r7,|L1.11256|
;;;4406   		modbus_buff[1] = 4;
;;;4407   		modbus_buff[2] = 0;
;;;4408   		modbus_buff[3] = 2;
;;;4409   		modbus_buff[4] = 0;	
;;;4410   		modbus_buff[5] = 1;
;;;4411   	
;;;4412   		crc_temp= CRC16_2(modbus_buff,6);
;;;4413   	
;;;4414   		modbus_buff[6]= (char)crc_temp;
;;;4415   		modbus_buff[7]= (char)(crc_temp>>8);
;;;4416   	
;;;4417   		if(ICA_CH==0)
0027fc  4eff              LDR      r6,|L1.11260|
0027fe  2808              CMP      r0,#8                 ;4400
002800  d053              BEQ      |L1.10410|
;;;4418   			{
;;;4419   			for (i=0;i<8;i++)
;;;4420   				{
;;;4421   				putchar_sc16is700(modbus_buff[i]);
;;;4422   				}
;;;4423   			}
;;;4424   		}
;;;4425   	else
;;;4426   		{
;;;4427   		char modbus_buff[20],i;
;;;4428   		short crc_temp, tempSSSS;
;;;4429   
;;;4430   		tempSSSS=cntrl_stat_old;
002802  f9b50022          LDRSH    r0,[r5,#0x22]  ; cntrl_stat_old
;;;4431   		if(	(main_kb_cnt==(TBAT*60)-21) || (main_kb_cnt==(TBAT*60)-20) || (main_kb_cnt==(TBAT*60)-19)) tempSSSS=((short)TBAT)|0x4000;
002806  49fe              LDR      r1,|L1.11264|
002808  f06f0314          MVN      r3,#0x14
00280c  f9b11000          LDRSH    r1,[r1,#0]  ; TBAT
002810  ebc11201          RSB      r2,r1,r1,LSL #4
002814  eb030c82          ADD      r12,r3,r2,LSL #2
002818  f9b53040          LDRSH    r3,[r5,#0x40]  ; main_kb_cnt
00281c  459c              CMP      r12,r3
00281e  d00b              BEQ      |L1.10296|
002820  f06f0513          MVN      r5,#0x13
002824  eb050582          ADD      r5,r5,r2,LSL #2
002828  429d              CMP      r5,r3
00282a  d005              BEQ      |L1.10296|
00282c  f06f0512          MVN      r5,#0x12
002830  eb050282          ADD      r2,r5,r2,LSL #2
002834  429a              CMP      r2,r3
002836  d101              BNE      |L1.10300|
                  |L1.10296|
002838  f4414080          ORR      r0,r1,#0x4000
                  |L1.10300|
;;;4432   
;;;4433   
;;;4434   		modbus_buff[0] = ICA_MODBUS_ADDRESS;
00283c  8839              LDRH     r1,[r7,#0]  ; ICA_MODBUS_ADDRESS
00283e  f88d1000          STRB     r1,[sp,#0]
;;;4435   		modbus_buff[1] = 6;
002842  f04f0106          MOV      r1,#6
002846  f88d1001          STRB     r1,[sp,#1]
;;;4436   		modbus_buff[2] = 0;
00284a  f88d4002          STRB     r4,[sp,#2]
;;;4437   		modbus_buff[3] = 100;
00284e  f04f0164          MOV      r1,#0x64
002852  f88d1003          STRB     r1,[sp,#3]
;;;4438   		modbus_buff[4] = (char)(tempSSSS/256);	
002856  ea4f71e0          ASR      r1,r0,#31
00285a  eb006111          ADD      r1,r0,r1,LSR #24
00285e  ea4f2221          ASR      r2,r1,#8
002862  f88d2004          STRB     r2,[sp,#4]
;;;4439   		modbus_buff[5] = (char)(tempSSSS%256);
002866  f88d0005          STRB     r0,[sp,#5]
;;;4440   	
;;;4441   		crc_temp= CRC16_2(modbus_buff,6);
00286a  f04f0106          MOV      r1,#6
00286e  4668              MOV      r0,sp
002870  f7fffffe          BL       CRC16_2
;;;4442   	
;;;4443   		modbus_buff[6]= (char)crc_temp;
002874  f88d0006          STRB     r0,[sp,#6]
;;;4444   		modbus_buff[7]= (char)(crc_temp>>8);
002878  ea4f2020          ASR      r0,r0,#8
00287c  f88d0007          STRB     r0,[sp,#7]
;;;4445   	
;;;4446   		crc_temp= CRC16_2(modbus_buff,6);
002880  f04f0106          MOV      r1,#6
002884  4668              MOV      r0,sp
002886  f7fffffe          BL       CRC16_2
;;;4447   	
;;;4448   		if(ICA_CH==0)
00288a  8830              LDRH     r0,[r6,#0]  ; ICA_CH
00288c  2800              CMP      r0,#0
00288e  d109              BNE      |L1.10404|
;;;4449   			{
;;;4450   			for (i=0;i<8;i++)
002890  4604              MOV      r4,r0
002892  466d              MOV      r5,sp                 ;4427
                  |L1.10388|
;;;4451   				{
;;;4452   				putchar_sc16is700(modbus_buff[i]);
002894  5d28              LDRB     r0,[r5,r4]
002896  f7fffffe          BL       putchar_sc16is700
00289a  f1040401          ADD      r4,r4,#1              ;4450
00289e  b2e4              UXTB     r4,r4                 ;4450
0028a0  2c08              CMP      r4,#8                 ;4450
0028a2  d3f7              BCC      |L1.10388|
                  |L1.10404|
;;;4453   				}
;;;4454   			}
;;;4455   		}
;;;4456   	}
;;;4457   }
0028a4  b005              ADD      sp,sp,#0x14
0028a6  e8bd8ff0          POP      {r4-r11,pc}
                  |L1.10410|
0028aa  8838              LDRH     r0,[r7,#0]            ;4405  ; ICA_MODBUS_ADDRESS
0028ac  f88d0000          STRB     r0,[sp,#0]            ;4405
0028b0  f04f0004          MOV      r0,#4                 ;4406
0028b4  f88d0001          STRB     r0,[sp,#1]            ;4406
0028b8  f88d4002          STRB     r4,[sp,#2]            ;4407
0028bc  f04f0002          MOV      r0,#2                 ;4408
0028c0  f88d0003          STRB     r0,[sp,#3]            ;4408
0028c4  f88d4004          STRB     r4,[sp,#4]            ;4409
0028c8  f04f0001          MOV      r0,#1                 ;4410
0028cc  f88d0005          STRB     r0,[sp,#5]            ;4410
0028d0  f04f0106          MOV      r1,#6                 ;4412
0028d4  4668              MOV      r0,sp                 ;4412
0028d6  f7fffffe          BL       CRC16_2
0028da  f88d0006          STRB     r0,[sp,#6]            ;4414
0028de  ea4f2020          ASR      r0,r0,#8              ;4415
0028e2  f88d0007          STRB     r0,[sp,#7]            ;4415
0028e6  8830              LDRH     r0,[r6,#0]            ;4417  ; ICA_CH
0028e8  2800              CMP      r0,#0                 ;4417
0028ea  d1db              BNE      |L1.10404|
0028ec  4604              MOV      r4,r0                 ;4419
0028ee  466d              MOV      r5,sp                 ;4402
                  |L1.10480|
0028f0  5d28              LDRB     r0,[r5,r4]            ;4421
0028f2  f7fffffe          BL       putchar_sc16is700
0028f6  f1040401          ADD      r4,r4,#1              ;4419
0028fa  b2e4              UXTB     r4,r4                 ;4419
0028fc  2c08              CMP      r4,#8                 ;4419
0028fe  d3f7              BCC      |L1.10480|
002900  e7d0              B        |L1.10404|
;;;4458   
                          ENDP

                  ipsBlckHndl PROC
;;;4541   //-----------------------------------------------
;;;4542   void ipsBlckHndl(char in)
002902  b510              PUSH     {r4,lr}
;;;4543   {
;;;4544   
;;;4545   ipsBlckStat=0;
002904  4bbf              LDR      r3,|L1.11268|
002906  f04f0000          MOV      r0,#0
00290a  8018              STRH     r0,[r3,#0]
;;;4546   if(ipsBlckSrc==1)
00290c  48be              LDR      r0,|L1.11272|
00290e  f04f0401          MOV      r4,#1
;;;4547   	{
;;;4548   	if(((ipsBlckLog==0)&&(adc_buff_[11]>2000)) || ((ipsBlckLog==1)&&(adc_buff_[11]<2000))) ipsBlckStat=1;
002912  f44f62fa          MOV      r2,#0x7d0
002916  f9b01000          LDRSH    r1,[r0,#0]            ;4546  ; ipsBlckSrc
00291a  48bc              LDR      r0,|L1.11276|
00291c  2901              CMP      r1,#1                 ;4546
00291e  f9b00000          LDRSH    r0,[r0,#0]
002922  d006              BEQ      |L1.10546|
;;;4549   	}
;;;4550   else if(ipsBlckSrc==2)
002924  2902              CMP      r1,#2
002926  d10f              BNE      |L1.10568|
002928  49b9              LDR      r1,|L1.11280|
;;;4551   	{
;;;4552   	if(((ipsBlckLog==0)&&(adc_buff_[13]>2000)) || ((ipsBlckLog==1)&&(adc_buff_[13]<2000))) ipsBlckStat=1;
00292a  f9b1101a          LDRSH    r1,[r1,#0x1a]
00292e  b160              CBZ      r0,|L1.10570|
002930  e00d              B        |L1.10574|
                  |L1.10546|
002932  49b7              LDR      r1,|L1.11280|
002934  f9b11016          LDRSH    r1,[r1,#0x16]         ;4548
002938  b908              CBNZ     r0,|L1.10558|
00293a  4291              CMP      r1,r2                 ;4548
00293c  dc03              BGT      |L1.10566|
                  |L1.10558|
00293e  2801              CMP      r0,#1                 ;4548
002940  d102              BNE      |L1.10568|
002942  4291              CMP      r1,r2                 ;4548
002944  da00              BGE      |L1.10568|
                  |L1.10566|
002946  801c              STRH     r4,[r3,#0]            ;4548
                  |L1.10568|
;;;4553   	}
;;;4554   }
002948  bd10              POP      {r4,pc}
                  |L1.10570|
00294a  4291              CMP      r1,r2                 ;4552
00294c  dc03              BGT      |L1.10582|
                  |L1.10574|
00294e  2801              CMP      r0,#1                 ;4552
002950  d1fa              BNE      |L1.10568|
002952  4291              CMP      r1,r2                 ;4552
002954  daf8              BGE      |L1.10568|
                  |L1.10582|
002956  801c              STRH     r4,[r3,#0]            ;4552
002958  bd10              POP      {r4,pc}
;;;4555   
                          ENDP

                  bps_drv PROC
;;;4556   //-----------------------------------------------
;;;4557   void bps_drv(char in)
00295a  e92d41f0          PUSH     {r4-r8,lr}
;;;4558   {
00295e  4606              MOV      r6,r0
;;;4559   char temp;
;;;4560   
;;;4561   if (bps[in]._device!=dSRC) return;
002960  ebc600c6          RSB      r0,r6,r6,LSL #3
002964  49ab              LDR      r1,|L1.11284|
002966  eb001006          ADD      r0,r0,r6,LSL #4
00296a  f8112020          LDRB     r2,[r1,r0,LSL #2]
00296e  2a03              CMP      r2,#3
002970  d177              BNE      |L1.10850|
;;;4562   temp=bps[in]._flags_tm;
002972  eb010480          ADD      r4,r1,r0,LSL #2
002976  f8945042          LDRB     r5,[r4,#0x42]
;;;4563   if(temp&(1<<AV_T))
00297a  07a8              LSLS     r0,r5,#30
00297c  d517              BPL      |L1.10670|
;;;4564   	{
;;;4565   	if(bps[in]._temp_av_cnt<1200) 
00297e  f9b41046          LDRSH    r1,[r4,#0x46]
002982  f44f6096          MOV      r0,#0x4b0
002986  4281              CMP      r1,r0
002988  da22              BGE      |L1.10704|
;;;4566   		{
;;;4567   		bps[in]._temp_av_cnt++;
00298a  f1010101          ADD      r1,r1,#1
00298e  b209              SXTH     r1,r1
002990  f8a41046          STRH     r1,[r4,#0x46]
;;;4568   		if(bps[in]._temp_av_cnt>=1200)
002994  4281              CMP      r1,r0
002996  db1b              BLT      |L1.10704|
;;;4569   			{
;;;4570   			bps[in]._temp_av_cnt=1200;
002998  f8a40046          STRH     r0,[r4,#0x46]
;;;4571   		   	if(!(bps[in]._av&(1<<0)))avar_bps_hndl(in,0,1);
00299c  7860              LDRB     r0,[r4,#1]
00299e  07c0              LSLS     r0,r0,#31
0029a0  d116              BNE      |L1.10704|
0029a2  2201              MOVS     r2,#1
0029a4  2100              MOVS     r1,#0
0029a6  4630              MOV      r0,r6
0029a8  f7fffffe          BL       avar_bps_hndl
0029ac  e010              B        |L1.10704|
                  |L1.10670|
;;;4572   			}
;;;4573   		}
;;;4574   	}
;;;4575   
;;;4576   else if(!(temp&(1<<AV_T)))
;;;4577   	{
;;;4578   	if(bps[in]._temp_av_cnt) 
0029ae  f9b41046          LDRSH    r1,[r4,#0x46]
0029b2  b169              CBZ      r1,|L1.10704|
;;;4579   		{
;;;4580   		bps[in]._temp_av_cnt--;
0029b4  f1a10101          SUB      r1,r1,#1
0029b8  b208              SXTH     r0,r1
0029ba  f8a40046          STRH     r0,[r4,#0x46]
;;;4581   		if(!bps[in]._temp_av_cnt)
0029be  b938              CBNZ     r0,|L1.10704|
;;;4582   			{
;;;4583   			if(bps[in]._av&(1<<0))avar_bps_hndl(in,0,0);
0029c0  7860              LDRB     r0,[r4,#1]
0029c2  07c0              LSLS     r0,r0,#31
0029c4  d004              BEQ      |L1.10704|
0029c6  2200              MOVS     r2,#0
0029c8  4611              MOV      r1,r2
0029ca  4630              MOV      r0,r6
0029cc  f7fffffe          BL       avar_bps_hndl
                  |L1.10704|
;;;4584   			}
;;;4585   		} 	
;;;4586   
;;;4587   	}
;;;4588   
;;;4589   if((temp&(1<<AVUMAX)))
0029d0  0729              LSLS     r1,r5,#28
;;;4590   	{
;;;4591   	if(bps[in]._umax_av_cnt<10) 
;;;4592   		{
;;;4593   		bps[in]._umax_av_cnt++;
;;;4594   		if(bps[in]._umax_av_cnt>=10)
;;;4595   			{ 
;;;4596   			bps[in]._umax_av_cnt=10;
0029d2  f04f070a          MOV      r7,#0xa
0029d6  f04f0000          MOV      r0,#0                 ;4571
0029da  d515              BPL      |L1.10760|
0029dc  f9b40048          LDRSH    r0,[r4,#0x48]         ;4591
0029e0  280a              CMP      r0,#0xa               ;4591
0029e2  da26              BGE      |L1.10802|
0029e4  f1000001          ADD      r0,r0,#1              ;4593
0029e8  b200              SXTH     r0,r0                 ;4593
0029ea  f8a40048          STRH     r0,[r4,#0x48]         ;4593
0029ee  280a              CMP      r0,#0xa               ;4594
0029f0  db1f              BLT      |L1.10802|
0029f2  f8a47048          STRH     r7,[r4,#0x48]
;;;4597   			if(!(bps[in]._av&(1<<1)))avar_bps_hndl(in,1,1);
0029f6  7860              LDRB     r0,[r4,#1]
0029f8  0780              LSLS     r0,r0,#30
0029fa  d41a              BMI      |L1.10802|
0029fc  2201              MOVS     r2,#1
0029fe  4611              MOV      r1,r2
002a00  4630              MOV      r0,r6
002a02  f7fffffe          BL       avar_bps_hndl
002a06  e014              B        |L1.10802|
                  |L1.10760|
;;;4598   		  	/*if((K[APV]!=ON)||((apv_cnt[in,0]==0)&&(apv_cnt[in,1]==0)&&(apv_cnt[in,2]==0)&&(apv_flags[in]==afOFF)))avar_s_hndl(in,1,1);
;;;4599   			if((apv_cnt[in,0]==0)&&(apv_cnt[in,1]==0)&&(apv_cnt[in,2]==0)&&(apv_flags[in]==afON))
;;;4600   				{
;;;4601   				apv_cnt[in,0]=APV_INIT;
;;;4602   				apv_cnt[in,1]=APV_INIT;
;;;4603   				apv_cnt[in,2]=APV_INIT;
;;;4604   				apv_flags[in]=afOFF;
;;;4605   				}				*/
;;;4606   						
;;;4607   			}
;;;4608   		} 
;;;4609   	}		
;;;4610   else if(!(temp&(1<<AVUMAX)))
;;;4611   	{
;;;4612   	if(bps[in]._umax_av_cnt>0) 
002a08  f9b41048          LDRSH    r1,[r4,#0x48]
002a0c  2900              CMP      r1,#0
002a0e  dd0d              BLE      |L1.10796|
;;;4613   		{
;;;4614   		bps[in]._umax_av_cnt--;
002a10  f1a10101          SUB      r1,r1,#1
002a14  b208              SXTH     r0,r1
002a16  f8a40048          STRH     r0,[r4,#0x48]
;;;4615   		if(bps[in]._umax_av_cnt==0)
002a1a  b950              CBNZ     r0,|L1.10802|
;;;4616   			{
;;;4617   			bps[in]._umax_av_cnt=0;
;;;4618   			avar_bps_hndl(in,1,0);
002a1c  f04f0200          MOV      r2,#0
002a20  f04f0101          MOV      r1,#1
002a24  4630              MOV      r0,r6
002a26  f7fffffe          BL       avar_bps_hndl
002a2a  e002              B        |L1.10802|
                  |L1.10796|
;;;4619   	 //		apv_cnt[in,0]=0;
;;;4620   	//		apv_cnt[in,1]=0;
;;;4621   	 //		apv_cnt[in,2]=0;			
;;;4622   			}
;;;4623   		}
;;;4624   	else if(bps[in]._umax_av_cnt<0) bps[in]._umax_av_cnt=0;		 
002a2c  da01              BGE      |L1.10802|
002a2e  f8a40048          STRH     r0,[r4,#0x48]
                  |L1.10802|
;;;4625   	}
;;;4626   
;;;4627   if(temp&(1<<AVUMIN))
002a32  06e8              LSLS     r0,r5,#27
002a34  d516              BPL      |L1.10852|
;;;4628   	{
;;;4629   	if(bps[in]._umin_av_cnt<10) 
002a36  f9b4004a          LDRSH    r0,[r4,#0x4a]
002a3a  280a              CMP      r0,#0xa
002a3c  da20              BGE      |L1.10880|
;;;4630   		{
;;;4631   		bps[in]._umin_av_cnt++;
002a3e  f1000001          ADD      r0,r0,#1
002a42  b200              SXTH     r0,r0
002a44  f8a4004a          STRH     r0,[r4,#0x4a]
;;;4632   		if(bps[in]._umin_av_cnt>=10)
002a48  280a              CMP      r0,#0xa
002a4a  db19              BLT      |L1.10880|
;;;4633   			{ 
;;;4634   			bps[in]._umin_av_cnt=10;
002a4c  f8a4704a          STRH     r7,[r4,#0x4a]
;;;4635   			if(!(bps[in]._av&(1<<2)))avar_bps_hndl(in,2,1);
002a50  7860              LDRB     r0,[r4,#1]
002a52  0740              LSLS     r0,r0,#29
002a54  d414              BMI      |L1.10880|
002a56  2201              MOVS     r2,#1
002a58  2102              MOVS     r1,#2
002a5a  4630              MOV      r0,r6
002a5c  f7fffffe          BL       avar_bps_hndl
002a60  e00e              B        |L1.10880|
                  |L1.10850|
002a62  e046              B        |L1.10994|
                  |L1.10852|
;;;4636   		  	/*	if((K[APV]!=ON)||((apv_cnt[in,0]==0)&&(apv_cnt[in,1]==0)&&(apv_cnt[in,2]==0)&&(apv_flags[in]==afOFF)))avar_s_hndl(in,2,1);
;;;4637   			if((apv_cnt[in,0]==0)&&(apv_cnt[in,1]==0)&&(apv_cnt[in,2]==0)&&(apv_flags[in]==afON))
;;;4638   				{
;;;4639   				apv_cnt[in,0]=APV_INIT;
;;;4640   				apv_cnt[in,1]=APV_INIT;
;;;4641   				apv_cnt[in,2]=APV_INIT;
;;;4642   				apv_flags[in]=afOFF;
;;;4643   				}*/				
;;;4644   			}
;;;4645   		} 
;;;4646   	}	
;;;4647   	
;;;4648   else if(!(temp&(1<<AVUMIN)))
;;;4649   	{
;;;4650   	if(bps[in]._umin_av_cnt) 
002a64  f9b4004a          LDRSH    r0,[r4,#0x4a]
002a68  b150              CBZ      r0,|L1.10880|
;;;4651   		{
;;;4652   		bps[in]._umin_av_cnt--;
002a6a  f1a00001          SUB      r0,r0,#1
002a6e  b201              SXTH     r1,r0
002a70  f8a4104a          STRH     r1,[r4,#0x4a]
;;;4653   		if(bps[in]._umin_av_cnt==0)
002a74  b921              CBNZ     r1,|L1.10880|
;;;4654   			{
;;;4655   			bps[in]._umin_av_cnt=0;
;;;4656   			avar_bps_hndl(in,2,0);
002a76  2200              MOVS     r2,#0
002a78  2102              MOVS     r1,#2
002a7a  4630              MOV      r0,r6
002a7c  f7fffffe          BL       avar_bps_hndl
                  |L1.10880|
;;;4657   		//	apv_cnt[in,0]=0;
;;;4658   		//	apv_cnt[in,1]=0;
;;;4659   		//	apv_cnt[in,2]=0;
;;;4660   			}
;;;4661   		}
;;;4662   	else if(bps[in]._umin_av_cnt>10)bps[in]._umin_av_cnt--;	 
;;;4663   	}
;;;4664   
;;;4665   //bps[in]._state=bsOFF;
;;;4666   
;;;4667   if (bps[in]._av&0x0f)					bps[in]._state=bsAV;
002a80  7860              LDRB     r0,[r4,#1]
002a82  0700              LSLS     r0,r0,#28
002a84  d003              BEQ      |L1.10894|
002a86  f04f0004          MOV      r0,#4
002a8a  70a0              STRB     r0,[r4,#2]
002a8c  e017              B        |L1.10942|
                  |L1.10894|
;;;4668   else if ( (net_av) && (bps[in]._cnt>20)/*&& 
002a8e  4862              LDR      r0,|L1.11288|
002a90  7800              LDRB     r0,[r0,#0]  ; net_av
002a92  b130              CBZ      r0,|L1.10914|
002a94  78e0              LDRB     r0,[r4,#3]
002a96  2814              CMP      r0,#0x14
002a98  d903              BLS      |L1.10914|
;;;4669   		(bps[in]._Uii<200)*/)				bps[in]._state=bsOFF_AV_NET;
002a9a  f04f0005          MOV      r0,#5
002a9e  70a0              STRB     r0,[r4,#2]
002aa0  e00d              B        |L1.10942|
                  |L1.10914|
;;;4670   else if (bps[in]._flags_tm&BIN8(100000))	bps[in]._state=bsRDY;
002aa2  f8940042          LDRB     r0,[r4,#0x42]
002aa6  0680              LSLS     r0,r0,#26
002aa8  d503              BPL      |L1.10930|
002aaa  f04f0002          MOV      r0,#2
002aae  70a0              STRB     r0,[r4,#2]
002ab0  e005              B        |L1.10942|
                  |L1.10930|
;;;4671   else if (bps[in]._cnt<20)				bps[in]._state=bsWRK;
002ab2  78e0              LDRB     r0,[r4,#3]
002ab4  2814              CMP      r0,#0x14
002ab6  d202              BCS      |L1.10942|
002ab8  f04f0001          MOV      r0,#1
002abc  70a0              STRB     r0,[r4,#2]
                  |L1.10942|
;;;4672   
;;;4673   
;;;4674   
;;;4675   //else if(bps[in]._flags_tm&BIN8(100000)) bps[in]._state=ssBL;
;;;4676   //else if((!(bps[in]._flags_tm&BIN8(100000)))&&(net_U>100))bps[in]._state=ssWRK;
;;;4677   //else bps[0]._state=ssNOT;
;;;4678   
;;;4679   //bps[in]._is_ready=0;
;;;4680   //bps[in]._is_wrk=0;
;;;4681   //if(bps[in]._av_net) bps[in]._flags_bp='N';// íå ïîäêëþ÷åí
;;;4682   //else if(bps[in]._av_u_max) bps[in]._flags_bp='P';// çàâûøåíî íàïðÿæåíèå(u_.av_.bAS1T)) bps_state[0]=ssAV;
;;;4683   //else if(bps[in]._av_u_min) bps[in]._flags_bp='M';// çàíèæåíî íàïðÿæåíèå
;;;4684   //else if(bps[in]._av_temper) bps[in]._flags_bp='T';// òåìïåðàòóðà
;;;4685   //else if(bps[in]._flags_tm&BIN8(100000)) 
;;;4686   //	{
;;;4687   //	bps[in]._flags_bp='B';// çàáëîêèðîâàí
;;;4688   //	bps[in]._is_ready=1;
;;;4689   //	}
;;;4690   //else if((!(bps[in]._flags_tm&BIN8(100000)))&&(net_U>100))
;;;4691   //     {
;;;4692   //     bps[in]._flags_bp='W';// ðàáîòàåò
;;;4693   //     bps[in]._is_ready=1;
;;;4694   //     bps[in]._is_wrk=1;
;;;4695        
;;;4696   //     }
;;;4697   //else bps[in]._is_ready=1;     
;;;4698   
;;;4699   
;;;4700   
;;;4701   
;;;4702   
;;;4703   /*
;;;4704   bps[in]._flags_tu&=BIN8(11111110);
;;;4705   if(bps[in]._ist_blok_cnt)
;;;4706   	{
;;;4707   	bps[in]._ist_blok_cnt--;
;;;4708   	bps[in]._flags_tu|=BIN8(1);
;;;4709   	}
;;;4710   
;;;4711   	   */ 
;;;4712   
;;;4713   //Ïåðåñáðîñ ÁÏÑà ïðè ïîòåðå ñâÿçè
;;;4714   if(bps[in]._cnt>=10) bps[in]._flags_tu|=BIN8(10000000);
002abe  78e0              LDRB     r0,[r4,#3]
002ac0  280a              CMP      r0,#0xa
002ac2  d306              BCC      |L1.10962|
002ac4  f894002c          LDRB     r0,[r4,#0x2c]
002ac8  f0400080          ORR      r0,r0,#0x80
002acc  f884002c          STRB     r0,[r4,#0x2c]
002ad0  e005              B        |L1.10974|
                  |L1.10962|
;;;4715   else bps[in]._flags_tu&=BIN8(1111111);
002ad2  f894002c          LDRB     r0,[r4,#0x2c]
002ad6  f000007f          AND      r0,r0,#0x7f
002ada  f884002c          STRB     r0,[r4,#0x2c]
                  |L1.10974|
;;;4716   	
;;;4717   bps[in]._vol_u=cntrl_stat+bps[in]._x_;	
002ade  494f              LDR      r1,|L1.11292|
002ae0  f9b40050          LDRSH    r0,[r4,#0x50]
002ae4  f9b11020          LDRSH    r1,[r1,#0x20]  ; cntrl_stat
002ae8  4408              ADD      r0,r0,r1
002aea  6320              STR      r0,[r4,#0x30]
;;;4718   bps[in]._vol_i=1000; 
002aec  f44f707a          MOV      r0,#0x3e8
002af0  6360              STR      r0,[r4,#0x34]
                  |L1.10994|
;;;4719   }
002af2  e8bd81f0          POP      {r4-r8,pc}
;;;4720   
                          ENDP

                  avt_hndl PROC
;;;4721   //-----------------------------------------------
;;;4722   void avt_hndl(void)
002af6  b570              PUSH     {r4-r6,lr}
;;;4723   {
;;;4724   char i;
;;;4725   for(i=0;i<12;i++)
002af8  f04f0000          MOV      r0,#0
;;;4726   	{
;;;4727   	if(eb2_data_short[6]&(1<<i))
002afc  4948              LDR      r1,|L1.11296|
;;;4728   		{
;;;4729   		avt_stat[i]=avtON;
002afe  4d49              LDR      r5,|L1.11300|
002b00  f04f0401          MOV      r4,#1                 ;4727
002b04  f9b1200c          LDRSH    r2,[r1,#0xc]          ;4727
002b08  4603              MOV      r3,r0                 ;4725
                  |L1.11018|
002b0a  fa04f100          LSL      r1,r4,r0              ;4727
002b0e  420a              TST      r2,r1                 ;4727
002b10  d001              BEQ      |L1.11030|
002b12  542c              STRB     r4,[r5,r0]
002b14  e000              B        |L1.11032|
                  |L1.11030|
;;;4730   		}
;;;4731   	else avt_stat[i]=avtOFF;
002b16  542b              STRB     r3,[r5,r0]
                  |L1.11032|
002b18  f1000001          ADD      r0,r0,#1              ;4725
002b1c  b2c0              UXTB     r0,r0                 ;4725
002b1e  280c              CMP      r0,#0xc               ;4725
002b20  d3f3              BCC      |L1.11018|
;;;4732   	}
;;;4733   
;;;4734   if((avt_stat_old[0]!=avt_stat[0])&&(NUMAVT>=1))
002b22  4e41              LDR      r6,|L1.11304|
002b24  7828              LDRB     r0,[r5,#0]  ; avt_stat
002b26  4c41              LDR      r4,|L1.11308|
002b28  7831              LDRB     r1,[r6,#0]  ; avt_stat_old
002b2a  4281              CMP      r1,r0
002b2c  d00b              BEQ      |L1.11078|
002b2e  f9b41000          LDRSH    r1,[r4,#0]  ; NUMAVT
002b32  2901              CMP      r1,#1
002b34  db07              BLT      |L1.11078|
;;;4735   	{
;;;4736   	if(avt_stat[0]==avtON) 	snmp_trap_send("Avtomat #1 is ON ",11,1,1);
002b36  2801              CMP      r0,#1
002b38  d05a              BEQ      |L1.11248|
;;;4737   	else 				snmp_trap_send("Avtomat #1 is OFF",11,1,0);
002b3a  2300              MOVS     r3,#0
002b3c  2201              MOVS     r2,#1
002b3e  210b              MOVS     r1,#0xb
002b40  a03b              ADR      r0,|L1.11312|
002b42  f7fffffe          BL       snmp_trap_send
                  |L1.11078|
;;;4738   	}
;;;4739   if((avt_stat_old[1]!=avt_stat[1])&&(NUMAVT>=2))
002b46  7871              LDRB     r1,[r6,#1]  ; avt_stat_old
002b48  7868              LDRB     r0,[r5,#1]  ; avt_stat
002b4a  4281              CMP      r1,r0
002b4c  d00b              BEQ      |L1.11110|
002b4e  f9b41000          LDRSH    r1,[r4,#0]  ; NUMAVT
002b52  2902              CMP      r1,#2
002b54  db07              BLT      |L1.11110|
;;;4740   	{
;;;4741   	if(avt_stat[1]==avtON) 	snmp_trap_send("Avtomat #2 is ON ",11,2,1);
002b56  2801              CMP      r0,#1
002b58  d04b              BEQ      |L1.11250|
;;;4742   	else 				snmp_trap_send("Avtomat #2 is OFF",11,2,0);
002b5a  2300              MOVS     r3,#0
002b5c  2202              MOVS     r2,#2
002b5e  210b              MOVS     r1,#0xb
002b60  a038              ADR      r0,|L1.11332|
002b62  f7fffffe          BL       snmp_trap_send
                  |L1.11110|
;;;4743   	}
;;;4744   if((avt_stat_old[2]!=avt_stat[2])&&(NUMAVT>=3))
002b66  78b1              LDRB     r1,[r6,#2]  ; avt_stat_old
002b68  78a8              LDRB     r0,[r5,#2]  ; avt_stat
002b6a  4281              CMP      r1,r0
002b6c  d00b              BEQ      |L1.11142|
002b6e  f9b41000          LDRSH    r1,[r4,#0]  ; NUMAVT
002b72  2903              CMP      r1,#3
002b74  db07              BLT      |L1.11142|
;;;4745   	{
;;;4746   	if(avt_stat[2]==avtON) 	snmp_trap_send("Avtomat #3 is ON ",11,3,1);
002b76  2801              CMP      r0,#1
002b78  d03c              BEQ      |L1.11252|
;;;4747   	else 				snmp_trap_send("Avtomat #3 is OFF",11,3,0);
002b7a  2300              MOVS     r3,#0
002b7c  2203              MOVS     r2,#3
002b7e  210b              MOVS     r1,#0xb
002b80  a035              ADR      r0,|L1.11352|
002b82  f7fffffe          BL       snmp_trap_send
                  |L1.11142|
;;;4748   	}
;;;4749   if((avt_stat_old[3]!=avt_stat[3])&&(NUMAVT>=4))
002b86  78f1              LDRB     r1,[r6,#3]  ; avt_stat_old
002b88  78e8              LDRB     r0,[r5,#3]  ; avt_stat
002b8a  4281              CMP      r1,r0
002b8c  d00b              BEQ      |L1.11174|
002b8e  f9b41000          LDRSH    r1,[r4,#0]  ; NUMAVT
002b92  2904              CMP      r1,#4
002b94  db07              BLT      |L1.11174|
;;;4750   	{
;;;4751   	if(avt_stat[3]==avtON) 	snmp_trap_send("Avtomat #4 is ON ",11,4,1);
002b96  2801              CMP      r0,#1
002b98  d02d              BEQ      |L1.11254|
;;;4752   	else 				snmp_trap_send("Avtomat #4 is OFF",11,4,0);
002b9a  2300              MOVS     r3,#0
002b9c  2204              MOVS     r2,#4
002b9e  210b              MOVS     r1,#0xb
002ba0  a032              ADR      r0,|L1.11372|
002ba2  f7fffffe          BL       snmp_trap_send
                  |L1.11174|
;;;4753   	}
;;;4754   if((avt_stat_old[4]!=avt_stat[4])&&(NUMAVT>=5))
002ba6  7931              LDRB     r1,[r6,#4]  ; avt_stat_old
002ba8  7928              LDRB     r0,[r5,#4]  ; avt_stat
002baa  4281              CMP      r1,r0
002bac  d00b              BEQ      |L1.11206|
002bae  f9b41000          LDRSH    r1,[r4,#0]  ; NUMAVT
002bb2  2905              CMP      r1,#5
002bb4  db07              BLT      |L1.11206|
;;;4755   	{
;;;4756   	if(avt_stat[4]==avtON) 	snmp_trap_send("Avtomat #5 is ON ",11,5,1);
002bb6  2801              CMP      r0,#1
002bb8  d076              BEQ      |L1.11432|
;;;4757   	else 				snmp_trap_send("Avtomat #5 is OFF",11,5,0);
002bba  2300              MOVS     r3,#0
002bbc  2205              MOVS     r2,#5
002bbe  210b              MOVS     r1,#0xb
002bc0  a02f              ADR      r0,|L1.11392|
002bc2  f7fffffe          BL       snmp_trap_send
                  |L1.11206|
;;;4758   	}
;;;4759   if((avt_stat_old[5]!=avt_stat[5])&&(NUMAVT>=6))
002bc6  7971              LDRB     r1,[r6,#5]  ; avt_stat_old
002bc8  7968              LDRB     r0,[r5,#5]  ; avt_stat
002bca  4281              CMP      r1,r0
002bcc  d00b              BEQ      |L1.11238|
002bce  f9b41000          LDRSH    r1,[r4,#0]  ; NUMAVT
002bd2  2906              CMP      r1,#6
002bd4  db07              BLT      |L1.11238|
;;;4760   	{
;;;4761   	if(avt_stat[5]==avtON) 	snmp_trap_send("Avtomat #6 is ON ",11,6,1);
002bd6  2801              CMP      r0,#1
002bd8  d067              BEQ      |L1.11434|
;;;4762   	else 				snmp_trap_send("Avtomat #6 is OFF",11,6,0);
002bda  2300              MOVS     r3,#0
002bdc  2206              MOVS     r2,#6
002bde  210b              MOVS     r1,#0xb
002be0  a02c              ADR      r0,|L1.11412|
002be2  f7fffffe          BL       snmp_trap_send
                  |L1.11238|
;;;4763   	}
;;;4764   if((avt_stat_old[6]!=avt_stat[6])&&(NUMAVT>=7))
002be6  79b1              LDRB     r1,[r6,#6]  ; avt_stat_old
002be8  79a8              LDRB     r0,[r5,#6]  ; avt_stat
002bea  4281              CMP      r1,r0
002bec  d06a              BEQ      |L1.11460|
002bee  e05d              B        |L1.11436|
                  |L1.11248|
002bf0  e092              B        |L1.11544|
                  |L1.11250|
002bf2  e098              B        |L1.11558|
                  |L1.11252|
002bf4  e09e              B        |L1.11572|
                  |L1.11254|
002bf6  e0a4              B        |L1.11586|
                  |L1.11256|
                          DCD      ICA_MODBUS_ADDRESS
                  |L1.11260|
                          DCD      ICA_CH
                  |L1.11264|
                          DCD      TBAT
                  |L1.11268|
                          DCD      ipsBlckStat
                  |L1.11272|
                          DCD      ipsBlckSrc
                  |L1.11276|
                          DCD      ipsBlckLog
                  |L1.11280|
                          DCD      ||.bss||+0x400
                  |L1.11284|
                          DCD      bps
                  |L1.11288|
                          DCD      net_av
                  |L1.11292|
                          DCD      ||area_number.23||
                  |L1.11296|
                          DCD      eb2_data_short
                  |L1.11300|
                          DCD      avt_stat
                  |L1.11304|
                          DCD      avt_stat_old
                  |L1.11308|
                          DCD      NUMAVT
                  |L1.11312|
002c30  4176746f          DCB      "Avtomat #1 is OFF",0
002c34  6d617420
002c38  23312069
002c3c  73204f46
002c40  4600    
002c42  00                DCB      0
002c43  00                DCB      0
                  |L1.11332|
002c44  4176746f          DCB      "Avtomat #2 is OFF",0
002c48  6d617420
002c4c  23322069
002c50  73204f46
002c54  4600    
002c56  00                DCB      0
002c57  00                DCB      0
                  |L1.11352|
002c58  4176746f          DCB      "Avtomat #3 is OFF",0
002c5c  6d617420
002c60  23332069
002c64  73204f46
002c68  4600    
002c6a  00                DCB      0
002c6b  00                DCB      0
                  |L1.11372|
002c6c  4176746f          DCB      "Avtomat #4 is OFF",0
002c70  6d617420
002c74  23342069
002c78  73204f46
002c7c  4600    
002c7e  00                DCB      0
002c7f  00                DCB      0
                  |L1.11392|
002c80  4176746f          DCB      "Avtomat #5 is OFF",0
002c84  6d617420
002c88  23352069
002c8c  73204f46
002c90  4600    
002c92  00                DCB      0
002c93  00                DCB      0
                  |L1.11412|
002c94  4176746f          DCB      "Avtomat #6 is OFF",0
002c98  6d617420
002c9c  23362069
002ca0  73204f46
002ca4  4600    
002ca6  00                DCB      0
002ca7  00                DCB      0
                  |L1.11432|
002ca8  e052              B        |L1.11600|
                  |L1.11434|
002caa  e058              B        |L1.11614|
                  |L1.11436|
002cac  f9b41000          LDRSH    r1,[r4,#0]  ; NUMAVT
002cb0  2907              CMP      r1,#7
002cb2  db07              BLT      |L1.11460|
;;;4765   	{
;;;4766   	if(avt_stat[6]==avtON) 	snmp_trap_send("Avtomat #7 is ON ",11,7,1);
002cb4  2801              CMP      r0,#1
002cb6  d059              BEQ      |L1.11628|
;;;4767   	else 				snmp_trap_send("Avtomat #7 is OFF",11,7,0);
002cb8  2300              MOVS     r3,#0
002cba  2207              MOVS     r2,#7
002cbc  210b              MOVS     r1,#0xb
002cbe  a0fc              ADR      r0,|L1.12464|
002cc0  f7fffffe          BL       snmp_trap_send
                  |L1.11460|
;;;4768   	}
;;;4769   if((avt_stat_old[7]!=avt_stat[7])&&(NUMAVT>=8))
002cc4  79f1              LDRB     r1,[r6,#7]  ; avt_stat_old
002cc6  79e8              LDRB     r0,[r5,#7]  ; avt_stat
002cc8  4281              CMP      r1,r0
002cca  d00b              BEQ      |L1.11492|
002ccc  f9b41000          LDRSH    r1,[r4,#0]  ; NUMAVT
002cd0  2908              CMP      r1,#8
002cd2  db07              BLT      |L1.11492|
;;;4770   	{
;;;4771   	if(avt_stat[7]==avtON) 	snmp_trap_send("Avtomat #8 is ON ",11,8,1);
002cd4  2801              CMP      r0,#1
002cd6  d050              BEQ      |L1.11642|
;;;4772   	else 				snmp_trap_send("Avtomat #8 is OFF",11,8,0);
002cd8  2300              MOVS     r3,#0
002cda  2208              MOVS     r2,#8
002cdc  210b              MOVS     r1,#0xb
002cde  a0f9              ADR      r0,|L1.12484|
002ce0  f7fffffe          BL       snmp_trap_send
                  |L1.11492|
;;;4773   	}
;;;4774   if((avt_stat_old[8]!=avt_stat[8])&&(NUMAVT>=9))
002ce4  7a31              LDRB     r1,[r6,#8]  ; avt_stat_old
002ce6  7a28              LDRB     r0,[r5,#8]  ; avt_stat
002ce8  4281              CMP      r1,r0
002cea  d00b              BEQ      |L1.11524|
002cec  f9b41000          LDRSH    r1,[r4,#0]  ; NUMAVT
002cf0  2909              CMP      r1,#9
002cf2  db07              BLT      |L1.11524|
;;;4775   	{
;;;4776   	if(avt_stat[8]==avtON) 	snmp_trap_send("Avtomat #9 is ON ",11,9,1);
002cf4  2801              CMP      r0,#1
002cf6  d047              BEQ      |L1.11656|
;;;4777   	else 				snmp_trap_send("Avtomat #9 is OFF",11,9,0);
002cf8  2300              MOVS     r3,#0
002cfa  2209              MOVS     r2,#9
002cfc  210b              MOVS     r1,#0xb
002cfe  a0f6              ADR      r0,|L1.12504|
002d00  f7fffffe          BL       snmp_trap_send
                  |L1.11524|
;;;4778   	}
;;;4779   
;;;4780   for(i=0;i<12;i++)
002d04  f04f0000          MOV      r0,#0
                  |L1.11528|
;;;4781   	{
;;;4782   	avt_stat_old[i]=avt_stat[i];
002d08  5c29              LDRB     r1,[r5,r0]
002d0a  5431              STRB     r1,[r6,r0]
002d0c  f1000001          ADD      r0,r0,#1              ;4780
002d10  b2c0              UXTB     r0,r0                 ;4780
002d12  280c              CMP      r0,#0xc               ;4780
002d14  d3f8              BCC      |L1.11528|
;;;4783   	}
;;;4784   }
002d16  bd70              POP      {r4-r6,pc}
                  |L1.11544|
002d18  2301              MOVS     r3,#1                 ;4736
002d1a  461a              MOV      r2,r3                 ;4736
002d1c  210b              MOVS     r1,#0xb               ;4736
002d1e  a0f3              ADR      r0,|L1.12524|
002d20  f7fffffe          BL       snmp_trap_send
002d24  e70f              B        |L1.11078|
                  |L1.11558|
002d26  2301              MOVS     r3,#1                 ;4741
002d28  2202              MOVS     r2,#2                 ;4741
002d2a  210b              MOVS     r1,#0xb               ;4741
002d2c  a0f4              ADR      r0,|L1.12544|
002d2e  f7fffffe          BL       snmp_trap_send
002d32  e718              B        |L1.11110|
                  |L1.11572|
002d34  2301              MOVS     r3,#1                 ;4746
002d36  2203              MOVS     r2,#3                 ;4746
002d38  210b              MOVS     r1,#0xb               ;4746
002d3a  a0f6              ADR      r0,|L1.12564|
002d3c  f7fffffe          BL       snmp_trap_send
002d40  e721              B        |L1.11142|
                  |L1.11586|
002d42  2301              MOVS     r3,#1                 ;4751
002d44  2204              MOVS     r2,#4                 ;4751
002d46  210b              MOVS     r1,#0xb               ;4751
002d48  a0f7              ADR      r0,|L1.12584|
002d4a  f7fffffe          BL       snmp_trap_send
002d4e  e72a              B        |L1.11174|
                  |L1.11600|
002d50  2301              MOVS     r3,#1                 ;4756
002d52  2205              MOVS     r2,#5                 ;4756
002d54  210b              MOVS     r1,#0xb               ;4756
002d56  a0f9              ADR      r0,|L1.12604|
002d58  f7fffffe          BL       snmp_trap_send
002d5c  e733              B        |L1.11206|
                  |L1.11614|
002d5e  2301              MOVS     r3,#1                 ;4761
002d60  2206              MOVS     r2,#6                 ;4761
002d62  210b              MOVS     r1,#0xb               ;4761
002d64  a0fa              ADR      r0,|L1.12624|
002d66  f7fffffe          BL       snmp_trap_send
002d6a  e73c              B        |L1.11238|
                  |L1.11628|
002d6c  2301              MOVS     r3,#1                 ;4766
002d6e  2207              MOVS     r2,#7                 ;4766
002d70  210b              MOVS     r1,#0xb               ;4766
002d72  a0fc              ADR      r0,|L1.12644|
002d74  f7fffffe          BL       snmp_trap_send
002d78  e7a4              B        |L1.11460|
                  |L1.11642|
002d7a  2301              MOVS     r3,#1                 ;4771
002d7c  2208              MOVS     r2,#8                 ;4771
002d7e  210b              MOVS     r1,#0xb               ;4771
002d80  a0fd              ADR      r0,|L1.12664|
002d82  f7fffffe          BL       snmp_trap_send
002d86  e7ad              B        |L1.11492|
                  |L1.11656|
002d88  2301              MOVS     r3,#1                 ;4776
002d8a  2209              MOVS     r2,#9                 ;4776
002d8c  210b              MOVS     r1,#0xb               ;4776
002d8e  a0ff              ADR      r0,|L1.12684|
002d90  f7fffffe          BL       snmp_trap_send
002d94  e7b6              B        |L1.11524|
;;;4785   
                          ENDP

                  bat_hndl PROC
;;;4786   //-----------------------------------------------
;;;4787   void bat_hndl(void)
002d96  b570              PUSH     {r4-r6,lr}
;;;4788   {
;;;4789   /*if(mess_find(_MESS_BAT_MASK_ON))
;;;4790   	{
;;;4791   	if(mess_data[0]==_MESS_BAT_MASK_ON)
;;;4792   		{
;;;4793   		char i;
;;;4794   		for(i=0;i<2;i++)
;;;4795   			{
;;;4796   			if(mess_data[1]&(1<<i))
;;;4797   				{
;;;4798   				bat[i]._cnt_to_block=0;
;;;4799        			bat[i]._rel_stat=0;
;;;4800        			}
;;;4801   			}
;;;4802   		}
;;;4803   	}
;;;4804   if(mess_find(_MESS_BAT_MASK_OFF))
;;;4805   	{		
;;;4806   	if(mess_data[0]==_MESS_BAT_MASK_OFF)
;;;4807   		{
;;;4808   		char i;
;;;4809   		for(i=0;i<2;i++)
;;;4810   			{
;;;4811   			if((mess_data[1]&(1<<i)) && (bat[i]._cnt_to_block==0) && (bat[i]._rel_stat==0))
;;;4812   				{
;;;4813   				bat[i]._cnt_to_block=20;
;;;4814   				bat[i]._rel_stat=1;
;;;4815        			}
;;;4816   			}
;;;4817   		
;;;4818   		}		
;;;4819   	}*/
;;;4820   
;;;4821   if(mess_find_unvol(MESS2BAT_HNDL))
002d98  20c8              MOVS     r0,#0xc8
002d9a  f7fffffe          BL       mess_find_unvol
;;;4822   	{ 
;;;4823   	char i;
;;;4824   	
;;;4825   	if(mess_data[0]==PARAM_BAT_ALL_OFF_AFTER_2SEC)
;;;4826   		{
;;;4827   		for(i=0;i<MAX_NUM_OF_BAT;i++)
002d9e  2200              MOVS     r2,#0
;;;4828   			{
;;;4829   			if(bat[i]._cnt_to_block<50)bat[i]._cnt_to_block++;
002da0  49ff              LDR      r1,|L1.12704|
002da2  b3a8              CBZ      r0,|L1.11792|
002da4  4bff              LDR      r3,|L1.12708|
;;;4830   			}
;;;4831   		}
;;;4832   
;;;4833   	else if(mess_data[0]==PARAM_BAT_MASK_OFF_AFTER_2SEC)
;;;4834   		{
;;;4835   		for(i=0;i<MAX_NUM_OF_BAT;i++)
;;;4836   			{
;;;4837   			if(mess_data[1]&(1<<i))
002da6  2401              MOVS     r4,#1
002da8  6818              LDR      r0,[r3,#0]            ;4825  ; mess_data
002daa  28c9              CMP      r0,#0xc9              ;4825
002dac  d01c              BEQ      |L1.11752|
002dae  28ca              CMP      r0,#0xca              ;4833
002db0  d02f              BEQ      |L1.11794|
;;;4838   				{
;;;4839   				if(bat[i]._cnt_to_block<50) bat[i]._cnt_to_block++;
;;;4840   				}
;;;4841   			else bat[i]._cnt_to_block=0;
;;;4842   			}
;;;4843   		}
;;;4844   	else 
;;;4845   	 	{
;;;4846   		for(i=0;i<MAX_NUM_OF_BAT;i++)
002db2  4610              MOV      r0,r2
                  |L1.11700|
;;;4847   			{
;;;4848   			bat[i]._cnt_to_block=0;
002db4  eb000340          ADD      r3,r0,r0,LSL #1
002db8  eb031300          ADD      r3,r3,r0,LSL #4
002dbc  f8012023          STRB     r2,[r1,r3,LSL #2]
002dc0  f1000001          ADD      r0,r0,#1              ;4846
002dc4  b2c0              UXTB     r0,r0                 ;4846
002dc6  2802              CMP      r0,#2                 ;4846
002dc8  d3f4              BCC      |L1.11700|
                  |L1.11722|
;;;4849   			}
;;;4850   
;;;4851   		}
;;;4852   	for(i=0;i<MAX_NUM_OF_BAT;i++)
002dca  f04f0000          MOV      r0,#0
                  |L1.11726|
;;;4853   		{
;;;4854   		if(bat[i]._cnt_to_block>20)bat[i]._rel_stat=1;
002dce  eb000340          ADD      r3,r0,r0,LSL #1
002dd2  eb031300          ADD      r3,r3,r0,LSL #4
002dd6  f8115023          LDRB     r5,[r1,r3,LSL #2]
002dda  2d14              CMP      r5,#0x14
002ddc  d939              BLS      |L1.11858|
002dde  eb010383          ADD      r3,r1,r3,LSL #2
002de2  f883403c          STRB     r4,[r3,#0x3c]
002de6  e038              B        |L1.11866|
                  |L1.11752|
002de8  f04f0000          MOV      r0,#0                 ;4827
                  |L1.11756|
002dec  eb000340          ADD      r3,r0,r0,LSL #1       ;4829
002df0  eb031500          ADD      r5,r3,r0,LSL #4       ;4829
002df4  f8113025          LDRB     r3,[r1,r5,LSL #2]     ;4829
002df8  2b32              CMP      r3,#0x32              ;4829
002dfa  d203              BCS      |L1.11780|
002dfc  f1030301          ADD      r3,r3,#1              ;4829
002e00  f8013025          STRB     r3,[r1,r5,LSL #2]     ;4829
                  |L1.11780|
002e04  f1000001          ADD      r0,r0,#1              ;4827
002e08  b2c0              UXTB     r0,r0                 ;4827
002e0a  2802              CMP      r0,#2                 ;4827
002e0c  d3ee              BCC      |L1.11756|
002e0e  e7dc              B        |L1.11722|
                  |L1.11792|
002e10  e029              B        |L1.11878|
                  |L1.11794|
002e12  f04f0000          MOV      r0,#0                 ;4835
002e16  685e              LDR      r6,[r3,#4]            ;4837
                  |L1.11800|
002e18  fa04f300          LSL      r3,r4,r0              ;4837
002e1c  421e              TST      r6,r3                 ;4837
002e1e  d00c              BEQ      |L1.11834|
002e20  eb000340          ADD      r3,r0,r0,LSL #1       ;4839
002e24  eb031500          ADD      r5,r3,r0,LSL #4       ;4839
002e28  f8113025          LDRB     r3,[r1,r5,LSL #2]     ;4839
002e2c  2b32              CMP      r3,#0x32              ;4839
002e2e  d20a              BCS      |L1.11846|
002e30  f1030301          ADD      r3,r3,#1              ;4839
002e34  f8013025          STRB     r3,[r1,r5,LSL #2]     ;4839
002e38  e005              B        |L1.11846|
                  |L1.11834|
002e3a  eb000340          ADD      r3,r0,r0,LSL #1       ;4841
002e3e  eb031300          ADD      r3,r3,r0,LSL #4       ;4841
002e42  f8012023          STRB     r2,[r1,r3,LSL #2]     ;4841
                  |L1.11846|
002e46  f1000001          ADD      r0,r0,#1              ;4835
002e4a  b2c0              UXTB     r0,r0                 ;4835
002e4c  2802              CMP      r0,#2                 ;4835
002e4e  d3e3              BCC      |L1.11800|
002e50  e7bb              B        |L1.11722|
                  |L1.11858|
;;;4855   		else bat[i]._rel_stat=0;
002e52  eb010383          ADD      r3,r1,r3,LSL #2
002e56  f883203c          STRB     r2,[r3,#0x3c]
                  |L1.11866|
002e5a  f1000001          ADD      r0,r0,#1              ;4852
002e5e  b2c0              UXTB     r0,r0                 ;4852
002e60  2802              CMP      r0,#2                 ;4852
002e62  d3b4              BCC      |L1.11726|
;;;4856   		}
;;;4857   
;;;4858   	}
;;;4859   
;;;4860   else 
;;;4861   	{
;;;4862   	char i;
;;;4863   	for(i=0;i<MAX_NUM_OF_BAT;i++)
;;;4864   		{
;;;4865   		bat[i]._cnt_to_block=0;
;;;4866   		bat[i]._rel_stat=0;
;;;4867   		}
;;;4868   
;;;4869   	}
;;;4870   
;;;4871   /*if(mess_find_unvol(MESS2BAT_HNDL1))
;;;4872   	{
;;;4873   	if(PARAM_BAT_ON)
;;;4874   		{
;;;4875   		char i;
;;;4876   		for(i=0;i<MAX_NUM_OF_BAT;i++)
;;;4877   			{
;;;4878   			if(mess_data[1]&(1<<i))
;;;4879   				{
;;;4880   				bat[i]._cnt_to_block=0;
;;;4881   				bat[i]._rel_stat=0;
;;;4882   				}
;;;4883   			}
;;;4884   		}
;;;4885   	} */
;;;4886   }
002e64  bd70              POP      {r4-r6,pc}
                  |L1.11878|
002e66  f04f0000          MOV      r0,#0                 ;4863
                  |L1.11882|
002e6a  eb000340          ADD      r3,r0,r0,LSL #1       ;4865
002e6e  eb031300          ADD      r3,r3,r0,LSL #4       ;4865
002e72  f8012023          STRB     r2,[r1,r3,LSL #2]     ;4865
002e76  eb010383          ADD      r3,r1,r3,LSL #2       ;4866
002e7a  f883203c          STRB     r2,[r3,#0x3c]         ;4866
002e7e  f1000001          ADD      r0,r0,#1              ;4863
002e82  b2c0              UXTB     r0,r0                 ;4863
002e84  2802              CMP      r0,#2                 ;4863
002e86  d3f0              BCC      |L1.11882|
002e88  bd70              POP      {r4-r6,pc}
;;;4887   
                          ENDP

                  bat_drv PROC
;;;5524   //-----------------------------------------------
;;;5525   void bat_drv(char in)
002e8a  e92d4ffe          PUSH     {r1-r11,lr}
;;;5526   {
002e8e  4605              MOV      r5,r0
;;;5527   unsigned short /*tempUS,*/tempUS_;
;;;5528   unsigned long tempUL,tempUL_;
;;;5529   unsigned short b_zar;
;;;5530   //static unsigned short time_cnt[2];
;;;5531   
;;;5532   
;;;5533   
;;;5534   if(cntrl_stat_blok_cnt_plus[in])cntrl_stat_blok_cnt_plus[in]--;
002e90  49c5              LDR      r1,|L1.12712|
002e92  f9310015          LDRSH    r0,[r1,r5,LSL #1]
002e96  b118              CBZ      r0,|L1.11936|
002e98  f1a00001          SUB      r0,r0,#1
002e9c  f8210015          STRH     r0,[r1,r5,LSL #1]
                  |L1.11936|
;;;5535   if(cntrl_stat_blok_cnt_minus[in])cntrl_stat_blok_cnt_minus[in]--;
002ea0  4ac1              LDR      r2,|L1.12712|
002ea2  1d12              ADDS     r2,r2,#4
002ea4  f9320015          LDRSH    r0,[r2,r5,LSL #1]
002ea8  b118              CBZ      r0,|L1.11954|
002eaa  f1a00001          SUB      r0,r0,#1
002eae  f8220015          STRH     r0,[r2,r5,LSL #1]
                  |L1.11954|
;;;5536   
;;;5537   
;;;5538   if(bat[in]._Ib>IZMAX) cntrl_stat_blok_cnt_plus[in]=100;
002eb2  eb050045          ADD      r0,r5,r5,LSL #1
002eb6  4bba              LDR      r3,|L1.12704|
002eb8  eb001005          ADD      r0,r0,r5,LSL #4
002ebc  eb030480          ADD      r4,r3,r0,LSL #2
002ec0  4bba              LDR      r3,|L1.12716|
002ec2  9002              STR      r0,[sp,#8]
002ec4  f9b40008          LDRSH    r0,[r4,#8]
002ec8  f9b33000          LDRSH    r3,[r3,#0]  ; IZMAX
002ecc  f04f0b64          MOV      r11,#0x64
002ed0  4298              CMP      r0,r3
002ed2  dd01              BLE      |L1.11992|
002ed4  f821b015          STRH     r11,[r1,r5,LSL #1]
                  |L1.11992|
;;;5539   if(bat[in]._Ib<0)     cntrl_stat_blok_cnt_minus[in]=100;
002ed8  2800              CMP      r0,#0
002eda  da01              BGE      |L1.12000|
002edc  f822b015          STRH     r11,[r2,r5,LSL #1]
                  |L1.12000|
;;;5540   
;;;5541   if(cntrl_stat_blok_cnt_plus[in] && cntrl_stat_blok_cnt_minus[in])
;;;5542        {
;;;5543        if(!cntrl_stat_blok_cnt_)
002ee0  48b1              LDR      r0,|L1.12712|
002ee2  f8313015          LDRH     r3,[r1,r5,LSL #1]     ;5541
002ee6  3884              SUBS     r0,r0,#0x84
002ee8  2700              MOVS     r7,#0
002eea  b14b              CBZ      r3,|L1.12032|
002eec  f8323015          LDRH     r3,[r2,r5,LSL #1]     ;5541
002ef0  b133              CBZ      r3,|L1.12032|
002ef2  f8b03064          LDRH     r3,[r0,#0x64]  ; cntrl_stat_blok_cnt_
002ef6  b1a3              CBZ      r3,|L1.12066|
;;;5544             {
;;;5545             cntrl_stat_blok_cnt_=600; 
;;;5546             cntrl_stat_blok_cnt_plus[in]=0;
;;;5547             cntrl_stat_blok_cnt_minus[in]=0;
;;;5548             }
;;;5549        else cntrl_stat_blok_cnt=3000;
002ef8  f64031b8          MOV      r1,#0xbb8
002efc  f8a01062          STRH     r1,[r0,#0x62]
                  |L1.12032|
;;;5550        }
;;;5551   cntrl_stat_blok_cnt=0;
002f00  f8a07062          STRH     r7,[r0,#0x62]
;;;5552   
;;;5553   if(++(bat[in]._time_cnt)>=10)
002f04  f894003e          LDRB     r0,[r4,#0x3e]
002f08  1c40              ADDS     r0,r0,#1
002f0a  b2c0              UXTB     r0,r0
002f0c  f884003e          STRB     r0,[r4,#0x3e]
002f10  280a              CMP      r0,#0xa
002f12  d301              BCC      |L1.12056|
;;;5554   	{
;;;5555   	bat[in]._time_cnt=0;
002f14  f884703e          STRB     r7,[r4,#0x3e]
                  |L1.12056|
;;;5556   	//bat[in]._zar_cnt++;
;;;5557   	}
;;;5558   
;;;5559   if(main_10Hz_cnt==50)
002f18  4ea5              LDR      r6,|L1.12720|
002f1a  8830              LDRH     r0,[r6,#0]  ; main_10Hz_cnt
002f1c  2832              CMP      r0,#0x32
002f1e  d009              BEQ      |L1.12084|
002f20  e017              B        |L1.12114|
                  |L1.12066|
002f22  f44f7316          MOV      r3,#0x258             ;5545
002f26  f8a03064          STRH     r3,[r0,#0x64]         ;5545
002f2a  f8217015          STRH     r7,[r1,r5,LSL #1]     ;5546
002f2e  f8227015          STRH     r7,[r2,r5,LSL #1]     ;5547
002f32  e7e5              B        |L1.12032|
                  |L1.12084|
;;;5560   	{
;;;5561   	if(!bat[in]._rel_stat)
002f34  f894003c          LDRB     r0,[r4,#0x3c]
002f38  b958              CBNZ     r0,|L1.12114|
;;;5562   		{
;;;5563   		
;;;5564   		if(bat[in]._Ub<80) 
002f3a  f9b40002          LDRSH    r0,[r4,#2]
002f3e  2850              CMP      r0,#0x50
002f40  da07              BGE      |L1.12114|
;;;5565   			{
;;;5566   			
;;;5567   			if(!(bat[in]._av&1))
002f42  f894003d          LDRB     r0,[r4,#0x3d]
002f46  07c0              LSLS     r0,r0,#31
002f48  d103              BNE      |L1.12114|
;;;5568   				{
;;;5569   				avar_bat_hndl(in,1);
002f4a  2101              MOVS     r1,#1
002f4c  4628              MOV      r0,r5
002f4e  f7fffffe          BL       avar_bat_hndl
                  |L1.12114|
;;;5570   				//if(in==0)plazma_bat++;
;;;5571   				}
;;;5572   			}				
;;;5573   
;;;5574   		}
;;;5575   	}
;;;5576   
;;;5577   if(main_10Hz_cnt>200)
002f52  f9b60000          LDRSH    r0,[r6,#0]  ; main_10Hz_cnt
;;;5578   	{
;;;5579   	if(abs(bat[in]._Ib)>IKB) 
002f56  4e97              LDR      r6,|L1.12724|
002f58  28c8              CMP      r0,#0xc8              ;5577
002f5a  dd0f              BLE      |L1.12156|
002f5c  f9b40008          LDRSH    r0,[r4,#8]
002f60  f7fffffe          BL       abs
002f64  f9b61000          LDRSH    r1,[r6,#0]  ; IKB
002f68  4288              CMP      r0,r1
002f6a  dd07              BLE      |L1.12156|
;;;5580   		{
;;;5581   		if((bat[in]._av&1))avar_bat_hndl(in,0);
002f6c  f894003d          LDRB     r0,[r4,#0x3d]
002f70  07c0              LSLS     r0,r0,#31
002f72  d003              BEQ      |L1.12156|
002f74  2100              MOVS     r1,#0
002f76  4628              MOV      r0,r5
002f78  f7fffffe          BL       avar_bat_hndl
                  |L1.12156|
;;;5582   		}
;;;5583   	}
;;;5584   
;;;5585   #ifdef APSENERGIA
;;;5586   //if(bat[in]._Ib>(-IKB))
;;;5587   
;;;5588   
;;;5589   #endif
;;;5590   
;;;5591   if(bat[in]._Ib>(-IKB))
002f7c  488d              LDR      r0,|L1.12724|
002f7e  f9b41008          LDRSH    r1,[r4,#8]
002f82  f9b00000          LDRSH    r0,[r0,#0]  ; IKB
002f86  4240              RSBS     r0,r0,#0
002f88  4281              CMP      r1,r0
002f8a  dd14              BLE      |L1.12214|
;;;5592   	{
;;;5593   	if(bat[in]._cnt_wrk<10)
002f8c  7b60              LDRB     r0,[r4,#0xd]
002f8e  280a              CMP      r0,#0xa
002f90  d20d              BCS      |L1.12206|
;;;5594   		{
;;;5595   		bat[in]._cnt_wrk++;
002f92  f1000001          ADD      r0,r0,#1
002f96  b2c0              UXTB     r0,r0
002f98  7360              STRB     r0,[r4,#0xd]
;;;5596   		if((bat[in]._cnt_wrk>=10)&&(bat[in]._wrk)) 
002f9a  280a              CMP      r0,#0xa
002f9c  d371              BCC      |L1.12418|
002f9e  7ba0              LDRB     r0,[r4,#0xe]
002fa0  2800              CMP      r0,#0
002fa2  d06e              BEQ      |L1.12418|
;;;5597   			{
;;;5598   			bat[in]._wrk=0;
002fa4  73a7              STRB     r7,[r4,#0xe]
;;;5599   			//beep_init(0x7L,'O');
;;;5600   			//wrk_mem_hndl(0);
;;;5601   			wrk_mem_hndl(in);
002fa6  4628              MOV      r0,r5
002fa8  f7fffffe          BL       wrk_mem_hndl
002fac  e069              B        |L1.12418|
                  |L1.12206|
;;;5602   			//plazma++;
;;;5603   			}
;;;5604   		}
;;;5605   	else bat[in]._cnt_wrk=10;	
002fae  f04f000a          MOV      r0,#0xa
002fb2  7360              STRB     r0,[r4,#0xd]
002fb4  e065              B        |L1.12418|
                  |L1.12214|
;;;5606   	}	
;;;5607   
;;;5608   else if(bat[in]._Ib<(-IKB))
002fb6  da64              BGE      |L1.12418|
;;;5609   	{
;;;5610   	if(bat[in]._cnt_wrk)
002fb8  7b60              LDRB     r0,[r4,#0xd]
002fba  b3f0              CBZ      r0,|L1.12346|
;;;5611   		{
;;;5612   		bat[in]._cnt_wrk--;
002fbc  f1a00001          SUB      r0,r0,#1
002fc0  b2c0              UXTB     r0,r0
002fc2  7360              STRB     r0,[r4,#0xd]
;;;5613   		if((bat[in]._cnt_wrk==0)&&(bat[in]._wrk==0)) 
002fc4  bbc8              CBNZ     r0,|L1.12346|
002fc6  7ba0              LDRB     r0,[r4,#0xe]
002fc8  bbb8              CBNZ     r0,|L1.12346|
;;;5614   			{
;;;5615   			bat[in]._wrk=1;
002fca  f04f0001          MOV      r0,#1
002fce  73a0              STRB     r0,[r4,#0xe]
;;;5616   
;;;5617   				{
;;;5618   				char temp;
;;;5619   				signed short temp_temp;
;;;5620   				temp_temp=bat[in]._u_old[((bat_u_old_cnt+1)&0x07)];
002fd0  4879              LDR      r0,|L1.12728|
002fd2  8800              LDRH     r0,[r0,#0]  ; bat_u_old_cnt
002fd4  f1000001          ADD      r0,r0,#1
002fd8  f0000007          AND      r0,r0,#7
002fdc  eb040040          ADD      r0,r4,r0,LSL #1
002fe0  8c00              LDRH     r0,[r0,#0x20]
002fe2  9000              STR      r0,[sp,#0]
;;;5621   			 
;;;5622   				temp=LPC_RTC->YEAR;
002fe4  4e75              LDR      r6,|L1.12732|
002fe6  8bb0              LDRH     r0,[r6,#0x1c]
002fe8  9001              STR      r0,[sp,#4]
;;;5623   				gran_char((signed char*)&temp,1,99);
002fea  f04f0263          MOV      r2,#0x63
002fee  f04f0101          MOV      r1,#1
002ff2  a801              ADD      r0,sp,#4
002ff4  f7fffffe          BL       gran_char
;;;5624   				*((char*)(&(bat[in]._wrk_date[0])))=temp;
002ff8  f104041c          ADD      r4,r4,#0x1c
002ffc  f89d0004          LDRB     r0,[sp,#4]
003000  7620              STRB     r0,[r4,#0x18]
;;;5625   			
;;;5626   				temp=LPC_RTC->MONTH;
003002  7e30              LDRB     r0,[r6,#0x18]
003004  9001              STR      r0,[sp,#4]
;;;5627   				gran_char((signed char*)&temp,1,12);
003006  f04f020c          MOV      r2,#0xc
00300a  f04f0101          MOV      r1,#1
00300e  a801              ADD      r0,sp,#4
003010  f7fffffe          BL       gran_char
;;;5628   				*(((char*)(&(bat[in]._wrk_date[0])))+1)=temp;
003014  f89d0004          LDRB     r0,[sp,#4]
003018  7660              STRB     r0,[r4,#0x19]
;;;5629   			
;;;5630   				temp=LPC_RTC->DOM;
00301a  7b30              LDRB     r0,[r6,#0xc]
00301c  9001              STR      r0,[sp,#4]
;;;5631   				gran_char((signed char*)&temp,1,31);
00301e  221f              MOVS     r2,#0x1f
003020  2101              MOVS     r1,#1
003022  a801              ADD      r0,sp,#4
003024  f7fffffe          BL       gran_char
;;;5632   				*(((char*)(&(bat[in]._wrk_date[0])))+2)=temp;			
003028  f89d0004          LDRB     r0,[sp,#4]
00302c  76a0              STRB     r0,[r4,#0x1a]
;;;5633   				
;;;5634   				*(((char*)(&(bat[in]._wrk_date[0])))+3)=*((char*)&temp_temp);
00302e  f89d0000          LDRB     r0,[sp,#0]
003032  76e0              STRB     r0,[r4,#0x1b]
;;;5635   
;;;5636   				temp=LPC_RTC->HOUR;
003034  7a30              LDRB     r0,[r6,#8]
003036  9001              STR      r0,[sp,#4]
;;;5637   				gran_char((signed char*)&temp,0,23);
003038  e000              B        |L1.12348|
                  |L1.12346|
00303a  e022              B        |L1.12418|
                  |L1.12348|
00303c  2217              MOVS     r2,#0x17
00303e  2100              MOVS     r1,#0
003040  a801              ADD      r0,sp,#4
003042  f7fffffe          BL       gran_char
;;;5638   				*((char*)(&(bat[in]._wrk_date[1])))=temp;
003046  f89d0004          LDRB     r0,[sp,#4]
00304a  7720              STRB     r0,[r4,#0x1c]
;;;5639                  	
;;;5640   				temp=LPC_RTC->MIN;
00304c  7930              LDRB     r0,[r6,#4]
00304e  9001              STR      r0,[sp,#4]
;;;5641   				gran_char((signed char*)&temp,0,59);
003050  223b              MOVS     r2,#0x3b
003052  2100              MOVS     r1,#0
003054  a801              ADD      r0,sp,#4
003056  f7fffffe          BL       gran_char
;;;5642   				*(((char*)(&(bat[in]._wrk_date[1])))+1)=temp;
00305a  f89d0004          LDRB     r0,[sp,#4]
00305e  7760              STRB     r0,[r4,#0x1d]
;;;5643   	          
;;;5644   				temp=LPC_RTC->SEC;
003060  7830              LDRB     r0,[r6,#0]
003062  9001              STR      r0,[sp,#4]
;;;5645   				gran_char((signed char*)&temp,0,59);
003064  223b              MOVS     r2,#0x3b
003066  2100              MOVS     r1,#0
003068  a801              ADD      r0,sp,#4
00306a  f7fffffe          BL       gran_char
;;;5646   				*(((char*)(&(bat[in]._wrk_date[1])))+2)=temp;
00306e  f89d0004          LDRB     r0,[sp,#4]
003072  77a0              STRB     r0,[r4,#0x1e]
;;;5647   			
;;;5648   				*(((char*)(&(bat[in]._wrk_date[1])))+3)=*(((char*)&temp_temp)+1);
003074  f89d0001          LDRB     r0,[sp,#1]
003078  77e0              STRB     r0,[r4,#0x1f]
;;;5649   				bat[in]._Iintegr=0;		//Ñ÷åò÷èê äåñÿòêîâ ìèëèàìïåðñåêóíä
00307a  8027              STRH     r7,[r4,#0]
;;;5650   				bat[in]._Iintegr_=0;	//Ñ÷åò÷èê ñîòåí ìèëèàìïåð÷àñîâ
00307c  8067              STRH     r7,[r4,#2]
00307e  f1a4041c          SUB      r4,r4,#0x1c
                  |L1.12418|
;;;5651   				}
;;;5652   	
;;;5653   			}
;;;5654   
;;;5655   		}
;;;5656   	else bat[in]._cnt_wrk=0;	 
;;;5657   	
;;;5658   	}					
;;;5659   
;;;5660   /*
;;;5661   if(Ibat>=(-IKB))
;;;5662   	{
;;;5663   	if(cnt_wrk<10)
;;;5664   		{
;;;5665   		cnt_wrk++;
;;;5666   		if((cnt_wrk>=10)&&(wrk!=wrkOFF)) 
;;;5667   			{
;;;5668   			wrk=wrkOFF;
;;;5669   			//beep_init(0x7L,'O');
;;;5670   			wrk_mem_hndl(ibat_integr);
;;;5671   			}
;;;5672   		}
;;;5673   	else cnt_wrk=10;	
;;;5674   	}	
;;;5675   
;;;5676   else if((Ibat<(-IKB))&&(spc_stat!=spc_KE))
;;;5677   	{
;;;5678   	if(cnt_wrk)
;;;5679   		{
;;;5680   		cnt_wrk--;
;;;5681   		if((cnt_wrk==0)&&(wrk!=wrkON)) 
;;;5682   			{
;;;5683   			char temp;
;;;5684   			signed short temp_temp;
;;;5685   			temp_temp=ubat_old[((ubat_old_cnt+1)&0x07)];
;;;5686   			 
;;;5687   			wrk=wrkON;
;;;5688   			
;;;5689   			temp=_year;
;;;5690   			gran_char(&temp,1,99);
;;;5691   			*((char*)(&(wrk_date[0])))=temp;
;;;5692   			
;;;5693   			temp=_month;
;;;5694   			gran_char(&temp,1,12);
;;;5695   			*(((char*)(&(wrk_date[0])))+1)=temp;
;;;5696   			
;;;5697   			temp=_date;
;;;5698   			gran_char(&temp,1,31);
;;;5699   			*(((char*)(&(wrk_date[0])))+2)=temp;			
;;;5700   				
;;;5701   			*(((char*)(&(wrk_date[0])))+3)=*((char*)&temp_temp);
;;;5702   
;;;5703   			temp=_hour;
;;;5704   			gran_char(&temp,0,23);
;;;5705   			*((char*)(&(wrk_date[1])))=temp;
;;;5706                  
;;;5707   			temp=_min;
;;;5708   			gran_char(&temp,0,59);
;;;5709   			*(((char*)(&(wrk_date[1])))+1)=temp;
;;;5710   	          
;;;5711   			temp=_sec;
;;;5712   			gran_char(&temp,0,59);
;;;5713   			*(((char*)(&(wrk_date[1])))+2)=temp;
;;;5714   			
;;;5715   			*(((char*)(&(wrk_date[1])))+3)=*(((char*)&temp_temp)+1);
;;;5716   
;;;5717   			
;;;5718   			//beep_init(0xFL,'O'); 
;;;5719   			ibat_integr=0;
;;;5720   			ibat_integr_=0;
;;;5721   			}
;;;5722   		}
;;;5723   	else cnt_wrk=0;	 
;;;5724   	
;;;5725   	}
;;;5726   if(wrk==wrkON)
;;;5727   	{
;;;5728   	ibat_integr_+=-Ibat;
;;;5729   	if(ibat_integr_>=SEC_IN_HOUR*10L)
;;;5730   		{
;;;5731   		ibat_integr_-=SEC_IN_HOUR*10L;
;;;5732   		ibat_integr++;
;;;5733   		}
;;;5734   	}
;;;5735   
;;;5736   */
;;;5737   
;;;5738   
;;;5739   /*if(bat[in]._cnt_to_block)
;;;5740   	{
;;;5741   	bat[in]._cnt_to_block--;
;;;5742   	if(!(bat[in]._cnt_to_block))
;;;5743   		{
;;;5744   		//bat[in]._rel_stat=1;
;;;5745   		}
;;;5746   	}
;;;5747   */
;;;5748   
;;;5749   
;;;5750   
;;;5751   
;;;5752   //unsigned int tempUI,tempUI_;
;;;5753   //unsigned int b_zar; 
;;;5754   //char i;
;;;5755   //Ibat[0]=5000;                     
;;;5756   
;;;5757   
;;;5758                               
;;;5759   if(bat[in]._time_cnt==0)
;;;5760   	{
;;;5761   	bat[in]._zar_cnt+=(signed long)bat[in]._Ib;
;;;5762   	
;;;5763   	if(bat[in]._zar_cnt>=AH_CONSTANT)
003082  f64848a0          MOV      r8,#0x8ca0
003086  f894003e          LDRB     r0,[r4,#0x3e]         ;5759
00308a  2800              CMP      r0,#0                 ;5759
00308c  d10d              BNE      |L1.12458|
00308e  f9b41008          LDRSH    r1,[r4,#8]            ;5761
003092  6960              LDR      r0,[r4,#0x14]         ;5761
003094  4408              ADD      r0,r0,r1              ;5761
003096  6160              STR      r0,[r4,#0x14]         ;5761
;;;5764   		{
;;;5765   		if(BAT_C_REAL[in]==0x5555) tempUS_=BAT_C_NOM[in];
;;;5766   		else tempUS_=BAT_C_REAL[in];
;;;5767   		
;;;5768   		b_zar=lc640_read_int(ADR_EE_BAT_ZAR_CNT[in]);
003098  f8df9124          LDR      r9,|L1.12736|
00309c  f8dfa124          LDR      r10,|L1.12740|
0030a0  4540              CMP      r0,r8                 ;5763
0030a2  db03              BLT      |L1.12460|
0030a4  f93a1015          LDRSH    r1,[r10,r5,LSL #1]    ;5765
0030a8  e08e              B        |L1.12744|
                  |L1.12458|
0030aa  e10f              B        |L1.13004|
                  |L1.12460|
0030ac  e0b5              B        |L1.12826|
0030ae  0000              DCW      0x0000
                  |L1.12464|
0030b0  4176746f          DCB      "Avtomat #7 is OFF",0
0030b4  6d617420
0030b8  23372069
0030bc  73204f46
0030c0  4600    
0030c2  00                DCB      0
0030c3  00                DCB      0
                  |L1.12484|
0030c4  4176746f          DCB      "Avtomat #8 is OFF",0
0030c8  6d617420
0030cc  23382069
0030d0  73204f46
0030d4  4600    
0030d6  00                DCB      0
0030d7  00                DCB      0
                  |L1.12504|
0030d8  4176746f          DCB      "Avtomat #9 is OFF",0
0030dc  6d617420
0030e0  23392069
0030e4  73204f46
0030e8  4600    
0030ea  00                DCB      0
0030eb  00                DCB      0
                  |L1.12524|
0030ec  4176746f          DCB      "Avtomat #1 is ON ",0
0030f0  6d617420
0030f4  23312069
0030f8  73204f4e
0030fc  2000    
0030fe  00                DCB      0
0030ff  00                DCB      0
                  |L1.12544|
003100  4176746f          DCB      "Avtomat #2 is ON ",0
003104  6d617420
003108  23322069
00310c  73204f4e
003110  2000    
003112  00                DCB      0
003113  00                DCB      0
                  |L1.12564|
003114  4176746f          DCB      "Avtomat #3 is ON ",0
003118  6d617420
00311c  23332069
003120  73204f4e
003124  2000    
003126  00                DCB      0
003127  00                DCB      0
                  |L1.12584|
003128  4176746f          DCB      "Avtomat #4 is ON ",0
00312c  6d617420
003130  23342069
003134  73204f4e
003138  2000    
00313a  00                DCB      0
00313b  00                DCB      0
                  |L1.12604|
00313c  4176746f          DCB      "Avtomat #5 is ON ",0
003140  6d617420
003144  23352069
003148  73204f4e
00314c  2000    
00314e  00                DCB      0
00314f  00                DCB      0
                  |L1.12624|
003150  4176746f          DCB      "Avtomat #6 is ON ",0
003154  6d617420
003158  23362069
00315c  73204f4e
003160  2000    
003162  00                DCB      0
003163  00                DCB      0
                  |L1.12644|
003164  4176746f          DCB      "Avtomat #7 is ON ",0
003168  6d617420
00316c  23372069
003170  73204f4e
003174  2000    
003176  00                DCB      0
003177  00                DCB      0
                  |L1.12664|
003178  4176746f          DCB      "Avtomat #8 is ON ",0
00317c  6d617420
003180  23382069
003184  73204f4e
003188  2000    
00318a  00                DCB      0
00318b  00                DCB      0
                  |L1.12684|
00318c  4176746f          DCB      "Avtomat #9 is ON ",0
003190  6d617420
003194  23392069
003198  73204f4e
00319c  2000    
00319e  00                DCB      0
00319f  00                DCB      0
                  |L1.12704|
                          DCD      bat
                  |L1.12708|
                          DCD      mess_data
                  |L1.12712|
                          DCD      ||area_number.23||+0x84
                  |L1.12716|
                          DCD      IZMAX
                  |L1.12720|
                          DCD      main_10Hz_cnt
                  |L1.12724|
                          DCD      IKB
                  |L1.12728|
                          DCD      bat_u_old_cnt
                  |L1.12732|
                          DCD      0x40024020
                  |L1.12736|
                          DCD      ADR_EE_BAT_ZAR_CNT
                  |L1.12740|
                          DCD      BAT_C_REAL
                  |L1.12744|
0031c8  f5a140aa          SUB      r0,r1,#0x5500         ;5765
0031cc  3855              SUBS     r0,r0,#0x55           ;5765
0031ce  d103              BNE      |L1.12760|
0031d0  48ff              LDR      r0,|L1.13776|
0031d2  f8306015          LDRH     r6,[r0,r5,LSL #1]     ;5765
0031d6  e001              B        |L1.12764|
                  |L1.12760|
0031d8  f83a6015          LDRH     r6,[r10,r5,LSL #1]    ;5766
                  |L1.12764|
0031dc  f8390015          LDRH     r0,[r9,r5,LSL #1]
0031e0  f7fffffe          BL       lc640_read_int
0031e4  b280              UXTH     r0,r0
;;;5769   
;;;5770   		if(b_zar<(tempUS_/**10*/))
0031e6  42b0              CMP      r0,r6
0031e8  d20e              BCS      |L1.12808|
;;;5771   			{
;;;5772   			bat[in]._zar_cnt-=AH_CONSTANT;
0031ea  6961              LDR      r1,[r4,#0x14]
0031ec  f5a14100          SUB      r1,r1,#0x8000
0031f0  f5a1614a          SUB      r1,r1,#0xca0
0031f4  6161              STR      r1,[r4,#0x14]
;;;5773   
;;;5774   			lc640_write_int(ADR_EE_BAT_ZAR_CNT[in],b_zar+1);
0031f6  f9392015          LDRSH    r2,[r9,r5,LSL #1]
0031fa  f1000001          ADD      r0,r0,#1
0031fe  b201              SXTH     r1,r0
003200  4610              MOV      r0,r2
003202  f7fffffe          BL       lc640_write_int
003206  e033              B        |L1.12912|
                  |L1.12808|
;;;5775   			}
;;;5776   		else if(b_zar>(tempUS_/**10*/))  
003208  d932              BLS      |L1.12912|
;;;5777   			{
;;;5778   			lc640_write_int(ADR_EE_BAT_ZAR_CNT[in],tempUS_);
00320a  f9390015          LDRSH    r0,[r9,r5,LSL #1]
00320e  b231              SXTH     r1,r6
003210  f7fffffe          BL       lc640_write_int
;;;5779   			bat[in]._zar_cnt=AH_CONSTANT;
003214  f8c48014          STR      r8,[r4,#0x14]
003218  e02a              B        |L1.12912|
                  |L1.12826|
;;;5780   
;;;5781   			}
;;;5782   
;;;5783   		}
;;;5784   
;;;5785   	else if(bat[in]._zar_cnt<=-AH_CONSTANT)
00321a  49ee              LDR      r1,|L1.13780|
00321c  4288              CMP      r0,r1
00321e  dc27              BGT      |L1.12912|
;;;5786   		{
;;;5787   		if(BAT_C_REAL[in]==0x5555) tempUS_=BAT_C_NOM[in];
003220  f93a1015          LDRSH    r1,[r10,r5,LSL #1]
003224  f5a140aa          SUB      r0,r1,#0x5500
003228  3855              SUBS     r0,r0,#0x55
00322a  d103              BNE      |L1.12852|
00322c  48e8              LDR      r0,|L1.13776|
00322e  f8306015          LDRH     r6,[r0,r5,LSL #1]
003232  e001              B        |L1.12856|
                  |L1.12852|
;;;5788   		else tempUS_=BAT_C_REAL[in];
003234  f83a6015          LDRH     r6,[r10,r5,LSL #1]
                  |L1.12856|
;;;5789   		
;;;5790   		b_zar=lc640_read_int(ADR_EE_BAT_ZAR_CNT[in]);
003238  f8390015          LDRH     r0,[r9,r5,LSL #1]
00323c  f7fffffe          BL       lc640_read_int
003240  b280              UXTH     r0,r0
;;;5791   
;;;5792   		if(b_zar>tempUS_)
003242  42b0              CMP      r0,r6
003244  d905              BLS      |L1.12882|
;;;5793   			{
;;;5794   			lc640_write_int(ADR_EE_BAT_ZAR_CNT[in],tempUS_);
003246  f9390015          LDRSH    r0,[r9,r5,LSL #1]
00324a  b231              SXTH     r1,r6
00324c  f7fffffe          BL       lc640_write_int
;;;5795   			b_zar=tempUS_;
003250  4630              MOV      r0,r6
                  |L1.12882|
;;;5796   			}
;;;5797   		if(b_zar)
003252  b158              CBZ      r0,|L1.12908|
;;;5798   			{
;;;5799   			bat[in]._zar_cnt+=AH_CONSTANT;
003254  6961              LDR      r1,[r4,#0x14]
003256  4441              ADD      r1,r1,r8
003258  6161              STR      r1,[r4,#0x14]
;;;5800   
;;;5801   			lc640_write_int(ADR_EE_BAT_ZAR_CNT[in],b_zar-1);
00325a  f9392015          LDRSH    r2,[r9,r5,LSL #1]
00325e  f1a00001          SUB      r0,r0,#1
003262  b201              SXTH     r1,r0
003264  4610              MOV      r0,r2
003266  f7fffffe          BL       lc640_write_int
00326a  e001              B        |L1.12912|
                  |L1.12908|
;;;5802   			}
;;;5803   		else 
;;;5804   			{
;;;5805   			bat[in]._zar_cnt=-AH_CONSTANT;
00326c  48d9              LDR      r0,|L1.13780|
00326e  6160              STR      r0,[r4,#0x14]
                  |L1.12912|
;;;5806   			}
;;;5807   
;;;5808   		}
;;;5809   
;;;5810   			
;;;5811   	tempUL=(unsigned long)lc640_read_int(ADR_EE_BAT_ZAR_CNT[in]);
003270  f8390015          LDRH     r0,[r9,r5,LSL #1]
003274  f7fffffe          BL       lc640_read_int
003278  4601              MOV      r1,r0
;;;5812   	
;;;5813   	if(BAT_C_REAL[in]==0x5555) tempUL_=(unsigned long)BAT_C_NOM[in];
00327a  f93a0015          LDRSH    r0,[r10,r5,LSL #1]
00327e  f5a042aa          SUB      r2,r0,#0x5500
003282  3a55              SUBS     r2,r2,#0x55
003284  d102              BNE      |L1.12940|
003286  48d2              LDR      r0,|L1.13776|
003288  f9300015          LDRSH    r0,[r0,r5,LSL #1]
                  |L1.12940|
;;;5814   	else tempUL_=(unsigned long)BAT_C_REAL[in];
;;;5815   		           	
;;;5816   	tempUL*=1000L;
00328c  f44f727a          MOV      r2,#0x3e8
003290  fb01f102          MUL      r1,r1,r2
;;;5817   
;;;5818   
;;;5819   	if(tempUL_==0) tempUL=0;
003294  b158              CBZ      r0,|L1.12974|
;;;5820   	else tempUL/=tempUL_;
003296  fbb1f0f0          UDIV     r0,r1,r0
                  |L1.12954|
;;;5821   
;;;5822   	tempUL/=10L;
00329a  f04f010a          MOV      r1,#0xa
00329e  fbb0f0f1          UDIV     r0,r0,r1
;;;5823   
;;;5824   	bat[in]._zar=(unsigned short)tempUL;
0032a2  8220              STRH     r0,[r4,#0x10]
;;;5825   
;;;5826   	if(BAT_TYPE==1)
0032a4  48cc              LDR      r0,|L1.13784|
0032a6  8800              LDRH     r0,[r0,#0]  ; BAT_TYPE
0032a8  2801              CMP      r0,#1
0032aa  d003              BEQ      |L1.12980|
0032ac  e008              B        |L1.12992|
                  |L1.12974|
0032ae  f04f0000          MOV      r0,#0                 ;5819
0032b2  e7f2              B        |L1.12954|
                  |L1.12980|
;;;5827   		{
;;;5828   		bat[in]._zar=lakb[in]._s_o_c;
0032b4  49c9              LDR      r1,|L1.13788|
0032b6  9802              LDR      r0,[sp,#8]
0032b8  eb010080          ADD      r0,r1,r0,LSL #2
0032bc  8a40              LDRH     r0,[r0,#0x12]
0032be  8220              STRH     r0,[r4,#0x10]
                  |L1.12992|
;;;5829   		}
;;;5830   	
;;;5831   	gran((signed short*)&bat[in]._zar,0,100);
0032c0  f1040010          ADD      r0,r4,#0x10
0032c4  2264              MOVS     r2,#0x64
0032c6  2100              MOVS     r1,#0
0032c8  f7fffffe          BL       gran
                  |L1.13004|
;;;5832        }
;;;5833   
;;;5834   
;;;5835   //Ïîäñ÷åò òîêà ðàçðÿäà áàòàðåè      
;;;5836   if(bat[in]._wrk==1)
0032cc  7ba0              LDRB     r0,[r4,#0xe]
0032ce  2801              CMP      r0,#1
0032d0  d113              BNE      |L1.13050|
;;;5837   	{
;;;5838   	if(bat[in]._Iintegr<36000)
0032d2  8ba0              LDRH     r0,[r4,#0x1c]
0032d4  4540              CMP      r0,r8
0032d6  d20f              BCS      |L1.13048|
;;;5839   		{          
;;;5840   		bat[in]._Iintegr+=abs(bat[in]._Ib);
0032d8  f9b40008          LDRSH    r0,[r4,#8]
0032dc  f7fffffe          BL       abs
0032e0  8ba1              LDRH     r1,[r4,#0x1c]
0032e2  4408              ADD      r0,r0,r1
0032e4  b280              UXTH     r0,r0
0032e6  83a0              STRH     r0,[r4,#0x1c]
;;;5841   		if(bat[in]._Iintegr>=36000)
0032e8  4540              CMP      r0,r8
0032ea  d306              BCC      |L1.13050|
;;;5842   			{
;;;5843   			bat[in]._Iintegr=0;		//Ñ÷åò÷èê äåñÿòêîâ ìèëèàìïåðñåêóíä
0032ec  83a7              STRH     r7,[r4,#0x1c]
;;;5844   			bat[in]._Iintegr_++;	//Ñ÷åò÷èê ñîòåí ìèëèàìïåð÷àñîâ
0032ee  8be0              LDRH     r0,[r4,#0x1e]
0032f0  f1000001          ADD      r0,r0,#1
0032f4  83e0              STRH     r0,[r4,#0x1e]
0032f6  e000              B        |L1.13050|
                  |L1.13048|
;;;5845   			}
;;;5846   		}
;;;5847   	else 
;;;5848   		{
;;;5849   		bat[in]._Iintegr=0;
0032f8  83a7              STRH     r7,[r4,#0x1c]
                  |L1.13050|
;;;5850   		}	
;;;5851   	} 
;;;5852   	    
;;;5853   #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;5854   if((t_ext[0]>TBATSIGN)&&(!ND_EXT[0]))	
0032fa  f8df92e4          LDR      r9,|L1.13792|
0032fe  49b9              LDR      r1,|L1.13796|
003300  f8dfa2e4          LDR      r10,|L1.13800|
003304  f9b90000          LDRSH    r0,[r9,#0]  ; t_ext
003308  f9b11000          LDRSH    r1,[r1,#0]  ; TBATSIGN
00330c  4288              CMP      r0,r1
00330e  dd02              BLE      |L1.13078|
003310  f89a0000          LDRB     r0,[r10,#0]  ; ND_EXT
003314  b3e8              CBZ      r0,|L1.13202|
                  |L1.13078|
;;;5855   	{
;;;5856   	bat[in]._sign_temper_cnt++;
;;;5857   	}
;;;5858   else 
;;;5859   	{
;;;5860   	bat[in]._sign_temper_cnt--;
003316  f8b40040          LDRH     r0,[r4,#0x40]
00331a  f1a00001          SUB      r0,r0,#1
00331e  f8a40040          STRH     r0,[r4,#0x40]
                  |L1.13090|
;;;5861   	}
;;;5862   #else
;;;5863   if((bat[in]._Tb>TBATSIGN)&&(!bat[in]._nd))	
;;;5864   	{
;;;5865   	bat[in]._sign_temper_cnt++;
;;;5866   	}
;;;5867   else 
;;;5868   	{
;;;5869   	bat[in]._sign_temper_cnt--;
;;;5870   	}
;;;5871   #endif
;;;5872   gran(&bat[in]._sign_temper_cnt,0,600);
003322  f1040040          ADD      r0,r4,#0x40
003326  f44f7216          MOV      r2,#0x258
00332a  2100              MOVS     r1,#0
00332c  f7fffffe          BL       gran
;;;5873   if(bat[in]._sign_temper_cnt>=590)	bat[in]._temper_stat|=(1<<0);
003330  f9b40040          LDRSH    r0,[r4,#0x40]
003334  f240264e          MOV      r6,#0x24e
003338  42b0              CMP      r0,r6
00333a  db05              BLT      |L1.13128|
00333c  f894103f          LDRB     r1,[r4,#0x3f]
003340  f0410101          ORR      r1,r1,#1
003344  f884103f          STRB     r1,[r4,#0x3f]
                  |L1.13128|
;;;5874   if(bat[in]._sign_temper_cnt<=10)	bat[in]._temper_stat&=~(1<<0);
003348  280a              CMP      r0,#0xa
00334a  dc05              BGT      |L1.13144|
00334c  f894003f          LDRB     r0,[r4,#0x3f]
003350  f0200001          BIC      r0,r0,#1
003354  f884003f          STRB     r0,[r4,#0x3f]
                  |L1.13144|
;;;5875   
;;;5876   #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;5877   if((t_ext[0]>TBATMAX)&&(!ND_EXT[0]))	
003358  49a4              LDR      r1,|L1.13804|
00335a  f9b90000          LDRSH    r0,[r9,#0]  ; t_ext
00335e  f9b11000          LDRSH    r1,[r1,#0]  ; TBATMAX
003362  4288              CMP      r0,r1
003364  dd02              BLE      |L1.13164|
003366  f89a0000          LDRB     r0,[r10,#0]  ; ND_EXT
00336a  b3b0              CBZ      r0,|L1.13274|
                  |L1.13164|
;;;5878   	{
;;;5879   	bat[in]._max_temper_cnt++;
;;;5880   	}
;;;5881   else 
;;;5882   	{
;;;5883   	bat[in]._max_temper_cnt--;
00336c  f8b40042          LDRH     r0,[r4,#0x42]
003370  f1a00001          SUB      r0,r0,#1
003374  f8a40042          STRH     r0,[r4,#0x42]
                  |L1.13176|
;;;5884   	}
;;;5885   #else
;;;5886   if((bat[in]._Tb>TBATMAX)&&(!bat[in]._nd))	
;;;5887   	{
;;;5888   	bat[in]._max_temper_cnt++;
;;;5889   	}
;;;5890   else 
;;;5891   	{
;;;5892   	bat[in]._max_temper_cnt--;
;;;5893   	}
;;;5894   #endif
;;;5895   
;;;5896   gran(&bat[in]._max_temper_cnt,0,600);
003378  f44f7916          MOV      r9,#0x258
00337c  f1040042          ADD      r0,r4,#0x42
003380  464a              MOV      r2,r9
003382  2100              MOVS     r1,#0
003384  f7fffffe          BL       gran
;;;5897   if(bat[in]._max_temper_cnt>=590)	bat[in]._temper_stat|=(1<<1);
003388  f9b40042          LDRSH    r0,[r4,#0x42]
00338c  42b0              CMP      r0,r6
00338e  db07              BLT      |L1.13216|
003390  e000              B        |L1.13204|
                  |L1.13202|
003392  e023              B        |L1.13276|
                  |L1.13204|
003394  f894103f          LDRB     r1,[r4,#0x3f]
003398  f0410102          ORR      r1,r1,#2
00339c  f884103f          STRB     r1,[r4,#0x3f]
                  |L1.13216|
;;;5898   if(bat[in]._max_temper_cnt<=10)	bat[in]._temper_stat&=~(1<<1);
0033a0  280a              CMP      r0,#0xa
0033a2  dc05              BGT      |L1.13232|
0033a4  f894003f          LDRB     r0,[r4,#0x3f]
0033a8  f0200002          BIC      r0,r0,#2
0033ac  f884003f          STRB     r0,[r4,#0x3f]
                  |L1.13232|
;;;5899   
;;;5900   
;;;5901   
;;;5902   //Ïîäñ÷åò íàðàáîòêè áàòàðåè
;;;5903   if(bat[in]._resurs_cnt<36000)
0033b0  6c60              LDR      r0,[r4,#0x44]
0033b2  4540              CMP      r0,r8
0033b4  da20              BGE      |L1.13304|
;;;5904   	{               
;;;5905   	bat[in]._resurs_cnt++;
0033b6  f1000001          ADD      r0,r0,#1
0033ba  6460              STR      r0,[r4,#0x44]
;;;5906   	if(bat[in]._resurs_cnt>=36000)
0033bc  4540              CMP      r0,r8
0033be  db1c              BLT      |L1.13306|
;;;5907   		{
;;;5908   		bat[in]._resurs_cnt=0;
0033c0  6467              STR      r7,[r4,#0x44]
;;;5909   		lc640_write_int(ADR_EE_BAT_RESURS[in],lc640_read_int(ADR_EE_BAT_RESURS[in])+1);
0033c2  4e8b              LDR      r6,|L1.13808|
0033c4  f8360015          LDRH     r0,[r6,r5,LSL #1]
0033c8  f7fffffe          BL       lc640_read_int
0033cc  1c40              ADDS     r0,r0,#1
0033ce  b201              SXTH     r1,r0
0033d0  f9360015          LDRSH    r0,[r6,r5,LSL #1]
0033d4  f7fffffe          BL       lc640_write_int
0033d8  e00f              B        |L1.13306|
                  |L1.13274|
0033da  e006              B        |L1.13290|
                  |L1.13276|
0033dc  f8b40040          LDRH     r0,[r4,#0x40]         ;5856
0033e0  f1000001          ADD      r0,r0,#1              ;5856
0033e4  f8a40040          STRH     r0,[r4,#0x40]         ;5856
0033e8  e79b              B        |L1.13090|
                  |L1.13290|
0033ea  f8b40042          LDRH     r0,[r4,#0x42]         ;5879
0033ee  f1000001          ADD      r0,r0,#1              ;5879
0033f2  f8a40042          STRH     r0,[r4,#0x42]         ;5879
0033f6  e7bf              B        |L1.13176|
                  |L1.13304|
;;;5910   		}
;;;5911   	}
;;;5912   else bat[in]._resurs_cnt=0;
0033f8  6467              STR      r7,[r4,#0x44]
                  |L1.13306|
;;;5913   
;;;5914   
;;;5915   #ifndef UKU_220_V2
;;;5916   #ifndef UKU_GLONASS
;;;5917   #ifndef UKU_6U
;;;5918   //#ifndef UKU_220
;;;5919   if(UBM_AV)
0033fa  4e7e              LDR      r6,|L1.13812|
0033fc  8830              LDRH     r0,[r6,#0]  ; UBM_AV
0033fe  2800              CMP      r0,#0
003400  d05e              BEQ      |L1.13504|
;;;5920        {
;;;5921        signed short temp_SS;
;;;5922   #ifdef UKU_220
;;;5923   temp_SS=bat[in]._Ub/2;
;;;5924   #else
;;;5925        if(U0B<600)
003402  487d              LDR      r0,|L1.13816|
003404  f9b00000          LDRSH    r0,[r0,#0]  ; U0B
003408  4548              CMP      r0,r9
00340a  da08              BGE      |L1.13342|
;;;5926             {
;;;5927             temp_SS=bat[in]._Ub/4;
00340c  f9b40002          LDRSH    r0,[r4,#2]
003410  ea4f71e0          ASR      r1,r0,#31
003414  eb007091          ADD      r0,r0,r1,LSR #30
003418  ea4f00a0          ASR      r0,r0,#2
00341c  e006              B        |L1.13356|
                  |L1.13342|
;;;5928             }
;;;5929        else temp_SS=bat[in]._Ub/5;
00341e  f9b40002          LDRSH    r0,[r4,#2]
003422  f04f0105          MOV      r1,#5
003426  fb90f0f1          SDIV     r0,r0,r1
00342a  b200              SXTH     r0,r0
                  |L1.13356|
;;;5930   	
;;;5931   	temp_SS+=temp_SS;     
00342c  ea4f0040          LSL      r0,r0,#1
;;;5932   #endif
;;;5933        temp_SS-=(bat[in]._Ubm);
003430  88a1              LDRH     r1,[r4,#4]
003432  eba00001          SUB      r0,r0,r1
003436  b200              SXTH     r0,r0
;;;5934   
;;;5935        temp_SS=abs(temp_SS);
003438  f7fffffe          BL       abs
;;;5936   
;;;5937        temp_SS*=10;
00343c  eb000080          ADD      r0,r0,r0,LSL #2
003440  ea4f0040          LSL      r0,r0,#1
003444  b200              SXTH     r0,r0
;;;5938   
;;;5939        temp_SS/=12;
003446  f04f010c          MOV      r1,#0xc
00344a  fb90f0f1          SDIV     r0,r0,r1
00344e  b200              SXTH     r0,r0
;;;5940   
;;;5941        bat[in]._dUbm=temp_SS;
003450  80e0              STRH     r0,[r4,#6]
;;;5942   
;;;5943   
;;;5944        if(	(bat[in]._dUbm>UBM_AV) &&
003452  f9b61000          LDRSH    r1,[r6,#0]  ; UBM_AV
003456  4288              CMP      r0,r1
003458  dd34              BLE      |L1.13508|
;;;5945   		(abs(bat[in]._Ib)<(5*IKB)) &&
00345a  f9b40008          LDRSH    r0,[r4,#8]
00345e  f7fffffe          BL       abs
003462  4601              MOV      r1,r0
003464  4865              LDR      r0,|L1.13820|
003466  f9b00000          LDRSH    r0,[r0,#0]  ; IKB
00346a  eb000080          ADD      r0,r0,r0,LSL #2
00346e  4281              CMP      r1,r0
003470  da28              BGE      |L1.13508|
;;;5946   		(bat[in]._Ub>((short)(((long)USIGN*115)/100))) &&
003472  4863              LDR      r0,|L1.13824|
003474  2173              MOVS     r1,#0x73
003476  f9b00000          LDRSH    r0,[r0,#0]  ; USIGN
00347a  4348              MULS     r0,r1,r0
00347c  fb90f0fb          SDIV     r0,r0,r11
003480  f9b41002          LDRSH    r1,[r4,#2]
003484  b200              SXTH     r0,r0
003486  4288              CMP      r0,r1
003488  da1c              BGE      |L1.13508|
;;;5947   		(!(bat[in]._av & 2))  )
00348a  f894003d          LDRB     r0,[r4,#0x3d]
00348e  0780              LSLS     r0,r0,#30
003490  d418              BMI      |L1.13508|
;;;5948   		{
;;;5949   		bat[in]._cnt_as++;
003492  f8b40048          LDRH     r0,[r4,#0x48]
003496  f1000001          ADD      r0,r0,#1
00349a  b200              SXTH     r0,r0
00349c  f8a40048          STRH     r0,[r4,#0x48]
;;;5950   		if(bat[in]._cnt_as==3000)
0034a0  f5a06130          SUB      r1,r0,#0xb00
0034a4  39b8              SUBS     r1,r1,#0xb8
0034a6  d103              BNE      |L1.13488|
;;;5951   			{
;;;5952   			avar_bat_as_hndl(in,1);
0034a8  2101              MOVS     r1,#1
0034aa  4628              MOV      r0,r5
0034ac  f7fffffe          BL       avar_bat_as_hndl
                  |L1.13488|
;;;5953   			}
;;;5954   		if(bat[in]._cnt_as>=3005) bat[in]._cnt_as=3005;
0034b0  f9b41048          LDRSH    r1,[r4,#0x48]
0034b4  f64030bd          MOV      r0,#0xbbd
0034b8  4281              CMP      r1,r0
0034ba  db01              BLT      |L1.13504|
0034bc  f8a40048          STRH     r0,[r4,#0x48]
                  |L1.13504|
;;;5955   		}
;;;5956   	else 
;;;5957   		{
;;;5958   		bat[in]._cnt_as=0;
;;;5959   		}
;;;5960        
;;;5961        }
;;;5962   #endif 
;;;5963   #endif 
;;;5964   #endif
;;;5965   
;;;5966   }
0034c0  e8bd8ffe          POP      {r1-r11,pc}
                  |L1.13508|
0034c4  f8a47048          STRH     r7,[r4,#0x48]         ;5958
0034c8  e7fa              B        |L1.13504|
;;;5967   
                          ENDP

                  u_necc_hndl PROC
;;;5971   //-----------------------------------------------
;;;5972   void u_necc_hndl(void)
0034ca  b538              PUSH     {r3-r5,lr}
;;;5973   {
;;;5974   signed long temp_L;
;;;5975   signed long temp_SL;
;;;5976   //signed short temp_SS;
;;;5977   
;;;5978   //char i;
;;;5979   
;;;5980   //temp_SS=0;
;;;5981   signed short t[2];
;;;5982   #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;5983   
;;;5984   if(!TERMOKOMPENS)
0034cc  484d              LDR      r0,|L1.13828|
;;;5985   	{
;;;5986   	//u_necc=U0B;
;;;5987   	u_necc=UB20;
0034ce  4c50              LDR      r4,|L1.13840|
0034d0  8801              LDRH     r1,[r0,#0]            ;5984  ; TERMOKOMPENS
0034d2  484d              LDR      r0,|L1.13832|
0034d4  f9b03000          LDRSH    r3,[r0,#0]
;;;5988   	}
;;;5989   else
;;;5990   	{
;;;5991   	if(ND_EXT[0])t[0]=20;
;;;5992   	else t[0]=t_ext[0];
;;;5993   
;;;5994   	mat_temper=t[0];
;;;5995   			
;;;5996   	if(mat_temper<0)temp_SL=UB0; 
;;;5997   	else 
;;;5998   		{
;;;5999   		if(mat_temper>40)mat_temper=40; 
;;;6000   		temp_SL=(UB20-UB0)*10;
;;;6001   		temp_SL*=mat_temper;
;;;6002   		temp_SL/=200;
;;;6003   		temp_SL+=UB0;
;;;6004   		}
;;;6005   	if((spc_stat==spcVZ)&&(sk_stat[0]==1))
;;;6006   		{
;;;6007   		temp_SL=UVZ;
0034d8  484c              LDR      r0,|L1.13836|
0034da  f9b02000          LDRSH    r2,[r0,#0]
0034de  b139              CBZ      r1,|L1.13552|
0034e0  4841              LDR      r0,|L1.13800|
0034e2  7800              LDRB     r0,[r0,#0]            ;5991  ; ND_EXT
0034e4  b130              CBZ      r0,|L1.13556|
0034e6  f04f0014          MOV      r0,#0x14              ;5991
0034ea  f8ad0000          STRH     r0,[sp,#0]            ;5991
0034ee  e005              B        |L1.13564|
                  |L1.13552|
0034f0  8023              STRH     r3,[r4,#0]            ;5987
0034f2  e029              B        |L1.13640|
                  |L1.13556|
0034f4  483a              LDR      r0,|L1.13792|
0034f6  8800              LDRH     r0,[r0,#0]            ;5992  ; t_ext
0034f8  f8ad0000          STRH     r0,[sp,#0]            ;5992
                  |L1.13564|
0034fc  4d45              LDR      r5,|L1.13844|
0034fe  f9bd1000          LDRSH    r1,[sp,#0]            ;5994
003502  6029              STR      r1,[r5,#0]            ;5994  ; mat_temper
003504  4844              LDR      r0,|L1.13848|
003506  2900              CMP      r1,#0                 ;5996
003508  f9b00000          LDRSH    r0,[r0,#0]            ;5996
00350c  db12              BLT      |L1.13620|
00350e  2928              CMP      r1,#0x28              ;5999
003510  dd02              BLE      |L1.13592|
003512  f04f0128          MOV      r1,#0x28              ;5999
003516  6029              STR      r1,[r5,#0]            ;5999  ; mat_temper
                  |L1.13592|
003518  eba30100          SUB      r1,r3,r0              ;6000
00351c  eb010181          ADD      r1,r1,r1,LSL #2       ;6000
003520  ea4f0141          LSL      r1,r1,#1              ;6000
003524  682b              LDR      r3,[r5,#0]            ;6001  ; mat_temper
003526  fb01f103          MUL      r1,r1,r3              ;6001
00352a  f04f03c8          MOV      r3,#0xc8              ;6002
00352e  fb91f1f3          SDIV     r1,r1,r3              ;6002
003532  4408              ADD      r0,r0,r1              ;6003
                  |L1.13620|
003534  4939              LDR      r1,|L1.13852|
003536  7d09              LDRB     r1,[r1,#0x14]         ;6005  ; spc_stat
003538  2902              CMP      r1,#2                 ;6005
00353a  d104              BNE      |L1.13638|
00353c  4938              LDR      r1,|L1.13856|
00353e  7809              LDRB     r1,[r1,#0]            ;6005  ; sk_stat
003540  2901              CMP      r1,#1                 ;6005
003542  d100              BNE      |L1.13638|
003544  4610              MOV      r0,r2
                  |L1.13638|
;;;6008   		}
;;;6009   	u_necc=(unsigned int)temp_SL;
003546  8020              STRH     r0,[r4,#0]
                  |L1.13640|
;;;6010   	///u_necc=3456;
;;;6011   	}  
;;;6012   
;;;6013   //u_necc=2355;
;;;6014   
;;;6015   if((speedChIsOn)||(sp_ch_stat==scsWRK))
003548  4836              LDR      r0,|L1.13860|
00354a  8800              LDRH     r0,[r0,#0]  ; speedChIsOn
00354c  b918              CBNZ     r0,|L1.13654|
00354e  4836              LDR      r0,|L1.13864|
003550  7800              LDRB     r0,[r0,#0]  ; sp_ch_stat
003552  2802              CMP      r0,#2
003554  d102              BNE      |L1.13660|
                  |L1.13654|
;;;6016   	{
;;;6017   	u_necc=speedChrgVolt;
003556  4835              LDR      r0,|L1.13868|
003558  8800              LDRH     r0,[r0,#0]  ; speedChrgVolt
00355a  8020              STRH     r0,[r4,#0]
                  |L1.13660|
;;;6018   	}
;;;6019   if(hv_vz_stat==hvsWRK)
00355c  4834              LDR      r0,|L1.13872|
00355e  7800              LDRB     r0,[r0,#0]  ; hv_vz_stat
003560  2805              CMP      r0,#5
003562  d100              BNE      |L1.13670|
;;;6020   	{
;;;6021   	u_necc=UVZ;
003564  8022              STRH     r2,[r4,#0]
                  |L1.13670|
;;;6022   	}
;;;6023   if(mess_find_unvol(MESS2UNECC_HNDL))
003566  20be              MOVS     r0,#0xbe
003568  f7fffffe          BL       mess_find_unvol
00356c  b128              CBZ      r0,|L1.13690|
;;;6024   	{		
;;;6025   	if(mess_data[0]==PARAM_UNECC_SET)
00356e  4831              LDR      r0,|L1.13876|
003570  6801              LDR      r1,[r0,#0]  ; mess_data
003572  29bf              CMP      r1,#0xbf
003574  d101              BNE      |L1.13690|
;;;6026   		{
;;;6027   		u_necc=mess_data[1];
003576  6840              LDR      r0,[r0,#4]  ; mess_data
003578  8020              STRH     r0,[r4,#0]
                  |L1.13690|
;;;6028   		}		
;;;6029   	}
;;;6030   //if(ICA_EN)u_necc+=ica_u_necc;
;;;6031   #endif
;;;6032   
;;;6033   
;;;6034   #ifndef UKU_220_IPS_TERMOKOMPENSAT
;;;6035   
;;;6036   #ifndef UKU_TELECORE2015
;;;6037   #ifndef UKU_TELECORE2017
;;;6038   if(unh_cnt0<10)
;;;6039   	{
;;;6040   	unh_cnt0++;
;;;6041   	if(unh_cnt0>=10)
;;;6042   		{
;;;6043   		unh_cnt0=0;
;;;6044   		b1Hz_unh=1;
;;;6045   		}
;;;6046   	}
;;;6047   
;;;6048   if(unh_cnt1<5)
;;;6049   	{
;;;6050   	unh_cnt1++;
;;;6051   	if(unh_cnt1==5)
;;;6052   		{
;;;6053   		unh_cnt1=0;
;;;6054   //		b2Hz_unh=1;
;;;6055   		}
;;;6056   	} 
;;;6057   
;;;6058   
;;;6059   
;;;6060   if(mess_find_unvol(MESS2UNECC_HNDL))
;;;6061   	{		
;;;6062   	if(mess_data[0]==PARAM_UNECC_SET)
;;;6063   		{
;;;6064   		u_necc=mess_data[1];
;;;6065   		}		
;;;6066   	}
;;;6067   
;;;6068   
;;;6069   else if(b1Hz_unh)
;;;6070   	{
;;;6071   	
;;;6072   	if((BAT_IS_ON[0]!=bisON) && (BAT_IS_ON[1]!=bisON))
;;;6073   		{
;;;6074   		
;;;6075   		u_necc=U0B;
;;;6076   		}
;;;6077   	else 
;;;6078   		{
;;;6079   		if(BAT_TYPE==0) //åñëè áàòàðåÿ îáû÷íàÿ
;;;6080   			{
;;;6081   			for(i=0;i<2;i++)
;;;6082   				{
;;;6083   				if(BAT_IS_ON[i]==bisON)
;;;6084   					{
;;;6085   					if(bat[i]._nd)t[i]=20;
;;;6086   					else t[i]=bat[i]._Tb;
;;;6087   					}
;;;6088   				else
;;;6089   					{
;;;6090   					t[i]=-20;
;;;6091   					}
;;;6092   				}
;;;6093   			if(t[0]>t[1])mat_temper=t[0];
;;;6094   			else mat_temper=t[1];
;;;6095   			
;;;6096   		
;;;6097   			if(mat_temper<0)temp_SL=UB0; 
;;;6098   			else 
;;;6099   				{
;;;6100   				if(mat_temper>40)mat_temper=40; 
;;;6101   				temp_SL=(UB20-UB0)*10;
;;;6102   				temp_SL*=mat_temper;
;;;6103   				temp_SL/=200;
;;;6104   				temp_SL+=UB0;
;;;6105   				}
;;;6106   			if((spc_stat==spcVZ)&&(sk_stat[0]==1))
;;;6107   				{
;;;6108   				temp_SL=UVZ;
;;;6109   				}
;;;6110   			u_necc=(unsigned int)temp_SL;
;;;6111   			}
;;;6112   		else if(BAT_TYPE==1) //åñëè áàòàðåÿ êèòàéñêàÿ
;;;6113   			{
;;;6114   			u_necc=U0B;
;;;6115   					
;;;6116   			u_necc=bat[0]._Ub+10;
;;;6117   
;;;6118   			
;;;6119   			if((spc_stat==spcVZ)&&(sk_stat[0]==1))
;;;6120   				{
;;;6121   				u_necc=UVZ;
;;;6122   				}
;;;6123   			if(u_necc>=UB0) u_necc=UB0;
;;;6124   			if(u_necc>=UB20) u_necc=UB20;
;;;6125   			}
;;;6126   		}  
;;;6127   	}
;;;6128   #endif
;;;6129   #endif
;;;6130   
;;;6131   #ifdef UKU_TELECORE2015
;;;6132   
;;;6133   if(unh_cnt0<10)
;;;6134   	{
;;;6135   	unh_cnt0++;
;;;6136   	if(unh_cnt0>=10)
;;;6137   		{
;;;6138   		unh_cnt0=0;
;;;6139   		b1Hz_unh=1;
;;;6140   		}
;;;6141   	}
;;;6142   
;;;6143   if(unh_cnt1<5)
;;;6144   	{
;;;6145   	unh_cnt1++;
;;;6146   	if(unh_cnt1==5)
;;;6147   		{
;;;6148   		unh_cnt1=0;
;;;6149   //		b2Hz_unh=1;
;;;6150   		}
;;;6151   	} 
;;;6152   
;;;6153   
;;;6154   
;;;6155   if(mess_find_unvol(MESS2UNECC_HNDL))
;;;6156   	{		
;;;6157   	if(mess_data[0]==PARAM_UNECC_SET)
;;;6158   		{
;;;6159   		u_necc=mess_data[1];
;;;6160   		}		
;;;6161   	}
;;;6162   
;;;6163   
;;;6164   else if(b1Hz_unh)
;;;6165   	{
;;;6166   	b1Hz_unh=0;
;;;6167   
;;;6168   	if(BAT_TYPE==0)
;;;6169   		{
;;;6170   		if(bat[0]._nd)mat_temper=20;
;;;6171   		else mat_temper=bat[0]._Tb;
;;;6172   
;;;6173   			
;;;6174   		if(mat_temper<0)temp_SL=UB0; 
;;;6175   		else 
;;;6176   			{
;;;6177   			if(mat_temper>40)mat_temper=40; 
;;;6178   			temp_SL=(UB20-UB0)*10;
;;;6179   			temp_SL*=mat_temper;
;;;6180   			temp_SL/=200;
;;;6181   			temp_SL+=UB0;
;;;6182   			}
;;;6183   		if((spc_stat==spcVZ)&&(sk_stat[0]==1))
;;;6184   			{
;;;6185   			temp_SL=UVZ;
;;;6186   			}
;;;6187   		u_necc=(unsigned int)temp_SL;
;;;6188   	///u_necc=3456;
;;;6189   		}
;;;6190   	else if(BAT_TYPE==1)
;;;6191   		{
;;;6192   		
;;;6193   		gran(&DU_LI_BAT,1,30);
;;;6194   		u_necc=li_bat._Ub+DU_LI_BAT;
;;;6195   		gran(&u_necc,0,UB0);
;;;6196   		gran(&u_necc,0,UB20);
;;;6197   		gran(&u_necc,0,540);		
;;;6198   
;;;6199   
;;;6200   		if(li_bat._batStat!=bsOK)
;;;6201   			{
;;;6202   			u_necc=U0B;
;;;6203   			}
;;;6204   		if((spc_stat==spcVZ)&&(sk_stat[0]==1))
;;;6205   			{
;;;6206   			u_necc=UVZ;
;;;6207   			}
;;;6208   		/* 
;;;6209   		u_necc=U0B;
;;;6210   		
;;;6211   
;;;6212   	
;;;6213   		u_necc=UB0;
;;;6214   		u_necc=li_bat._Ub+10;
;;;6215   		if((li_bat._Ub<450)||(li_bat._Ub>550))
;;;6216   			{
;;;6217   			lakb_error_cnt++;
;;;6218   			if(lakb_error_cnt>=30)
;;;6219   				{
;;;6220   				lakb_error_cnt=30;
;;;6221   				u_necc=U0B;
;;;6222   				}
;;;6223   			}
;;;6224   		else lakb_error_cnt=0;*/
;;;6225   		}
;;;6226   	else if(BAT_TYPE==2)
;;;6227   		{
;;;6228   		u_necc=U0B;
;;;6229   		
;;;6230   		if((spc_stat==spcVZ)&&(sk_stat[0]==1))
;;;6231   			{
;;;6232   			u_necc=UVZ;
;;;6233   			}
;;;6234   	
;;;6235   		u_necc=UB0;
;;;6236   		}
;;;6237   
;;;6238   	else if(BAT_TYPE==3)
;;;6239   		{
;;;6240   		u_necc=U0B;
;;;6241   		
;;;6242   		if((spc_stat==spcVZ)&&(sk_stat[0]==1))
;;;6243   			{
;;;6244   			u_necc=UVZ;
;;;6245   			}
;;;6246   
;;;6247   		gran(&DU_LI_BAT,1,30);
;;;6248   
;;;6249   
;;;6250   		if(lakbNotErrorNum==0)
;;;6251   			{
;;;6252   			u_necc=U0B;
;;;6253   			}
;;;6254   		else 
;;;6255   			{
;;;6256   			signed short i;
;;;6257   			//signed short u_necc_max;
;;;6258   			//u_necc_max=0;
;;;6259   			char soc_flag=0;
;;;6260   
;;;6261   			for(i=(NUMBAT_TELECORE-1);i>=0;i--)
;;;6262   				{
;;;6263   				if(lakb[i]._communicationFullErrorStat==0)u_necc=lakb[i]._tot_bat_volt+DU_LI_BAT;
;;;6264   				if(lakb[i]._s_o_c_percent<QSODERG_LI_BAT)soc_flag=1;
;;;6265   				}
;;;6266   
;;;6267   			if(soc_flag==0)u_necc=USODERG_LI_BAT;
;;;6268   			}
;;;6269   		gran(&u_necc,0,UB0);
;;;6270   		//gran(&u_necc,0,UB20);
;;;6271   		gran(&u_necc,0,540);
;;;6272   		}
;;;6273   	}
;;;6274   
;;;6275   #endif 
;;;6276   
;;;6277   #ifdef UKU_TELECORE2017
;;;6278   
;;;6279   if(unh_cnt0<10)
;;;6280   	{
;;;6281   	unh_cnt0++;
;;;6282   	if(unh_cnt0>=10)
;;;6283   		{
;;;6284   		unh_cnt0=0;
;;;6285   		b1Hz_unh=1;
;;;6286   		}
;;;6287   	}
;;;6288   
;;;6289   if(unh_cnt1<5)
;;;6290   	{
;;;6291   	unh_cnt1++;
;;;6292   	if(unh_cnt1==5)
;;;6293   		{
;;;6294   		unh_cnt1=0;
;;;6295   //		b2Hz_unh=1;
;;;6296   		}
;;;6297   	} 
;;;6298   
;;;6299   
;;;6300   
;;;6301   if(mess_find_unvol(MESS2UNECC_HNDL))
;;;6302   	{		
;;;6303   	if(mess_data[0]==PARAM_UNECC_SET)
;;;6304   		{
;;;6305   		u_necc=mess_data[1];
;;;6306   		}		
;;;6307   	}
;;;6308   
;;;6309   
;;;6310   else if(b1Hz_unh)
;;;6311   	{
;;;6312   	b1Hz_unh=0;
;;;6313   
;;;6314   	if(BAT_TYPE==0)
;;;6315   		{
;;;6316   		if(bat[0]._nd)mat_temper=20;
;;;6317   		else mat_temper=bat[0]._Tb;
;;;6318   
;;;6319   			
;;;6320   		if(mat_temper<0)temp_SL=UB0; 
;;;6321   		else 
;;;6322   			{
;;;6323   			if(mat_temper>40)mat_temper=40; 
;;;6324   			temp_SL=(UB20-UB0)*10;
;;;6325   			temp_SL*=mat_temper;
;;;6326   			temp_SL/=200;
;;;6327   			temp_SL+=UB0;
;;;6328   			}
;;;6329   		if((spc_stat==spcVZ)&&(sk_stat[0]==1)
;;;6330   			{
;;;6331   			temp_SL=UVZ;
;;;6332   			}
;;;6333   		u_necc=(unsigned int)temp_SL;
;;;6334   	///u_necc=3456;
;;;6335   		}
;;;6336   	else if(BAT_TYPE==1)
;;;6337   		{
;;;6338   		
;;;6339   		gran(&DU_LI_BAT,1,30);
;;;6340   		u_necc=li_bat._Ub+DU_LI_BAT;
;;;6341   		gran(&u_necc,0,UB0);
;;;6342   		gran(&u_necc,0,UB20);
;;;6343   		gran(&u_necc,0,540);		
;;;6344   
;;;6345   
;;;6346   		if(li_bat._batStat!=bsOK)
;;;6347   			{
;;;6348   			u_necc=U0B;
;;;6349   			}
;;;6350   		if((spc_stat==spcVZ)&&(sk_stat[0]==1))
;;;6351   			{
;;;6352   			u_necc=UVZ;
;;;6353   			}
;;;6354   		}
;;;6355   	else if(BAT_TYPE==2)
;;;6356   		{
;;;6357   		u_necc=U0B;
;;;6358   		
;;;6359   		if((spc_stat==spcVZ)&&(sk_stat[0]==1))
;;;6360   			{
;;;6361   			u_necc=UVZ;
;;;6362   			}
;;;6363   	
;;;6364   		u_necc=UB0;
;;;6365   		}
;;;6366   
;;;6367   	else if(BAT_TYPE==3)
;;;6368   		{
;;;6369   		u_necc=U0B;
;;;6370   		
;;;6371   		if((spc_stat==spcVZ)&&(sk_stat[0]==1))
;;;6372   			{
;;;6373   			u_necc=UVZ;
;;;6374   			}
;;;6375   
;;;6376   		gran(&DU_LI_BAT,1,30);
;;;6377   
;;;6378   
;;;6379   		if(lakbNotErrorNum==0)
;;;6380   			{
;;;6381   			u_necc=U0B;
;;;6382   			}
;;;6383   		else 
;;;6384   			{
;;;6385   			signed short i;
;;;6386   			//signed short u_necc_max;
;;;6387   			//u_necc_max=0;
;;;6388   			char soc_flag=0;
;;;6389   
;;;6390   			for(i=(NUMBAT_TELECORE-1);i>=0;i--)
;;;6391   				{
;;;6392   				if(lakb[i]._communicationFullErrorStat==0)u_necc=lakb[i]._tot_bat_volt+DU_LI_BAT;
;;;6393   				if(lakb[i]._s_o_c_percent<QSODERG_LI_BAT)soc_flag=1;
;;;6394   				}
;;;6395   
;;;6396   			if(soc_flag==0)u_necc=USODERG_LI_BAT;
;;;6397   			}
;;;6398   		gran(&u_necc,0,UB0);
;;;6399   		//gran(&u_necc,0,UB20);
;;;6400   		gran(&u_necc,0,540);
;;;6401   		}
;;;6402   	}
;;;6403   
;;;6404   #endif 
;;;6405   //u_necc=2356;
;;;6406   #endif//gran(&u_necc,400,UMAX);
;;;6407   
;;;6408   temp_L=(signed long) u_necc;
00357a  f9b40000          LDRSH    r0,[r4,#0]  ; u_necc
;;;6409   temp_L*=98L;
00357e  f04f0162          MOV      r1,#0x62
003582  fb00f101          MUL      r1,r0,r1
;;;6410   temp_L/=100L;
003586  f04f0264          MOV      r2,#0x64
00358a  fb91f1f2          SDIV     r1,r1,r2
;;;6411   u_necc_dn=(signed short)temp_L;
00358e  4b2a              LDR      r3,|L1.13880|
003590  8019              STRH     r1,[r3,#0]
;;;6412   
;;;6413   temp_L=(signed long) u_necc;
;;;6414   temp_L*=102L;
003592  f04f0166          MOV      r1,#0x66
003596  fb00f001          MUL      r0,r0,r1
;;;6415   temp_L/=100L;
00359a  fb90f0f2          SDIV     r0,r0,r2
;;;6416   u_necc_up=(signed short)temp_L;
00359e  4927              LDR      r1,|L1.13884|
0035a0  8008              STRH     r0,[r1,#0]
;;;6417   
;;;6418   
;;;6419   }
0035a2  bd38              POP      {r3-r5,pc}
;;;6420   
                          ENDP

                  num_necc_hndl PROC
;;;6422   //-----------------------------------------------
;;;6423   void num_necc_hndl(void)
0035a4  e92d41f0          PUSH     {r4-r8,lr}
;;;6424   {
;;;6425   
;;;6426   static short num_necc_block_cnt;
;;;6427   if(num_necc_block_cnt) num_necc_block_cnt--;
0035a8  4c1c              LDR      r4,|L1.13852|
0035aa  f9b40026          LDRSH    r0,[r4,#0x26]  ; num_necc_block_cnt
0035ae  b110              CBZ      r0,|L1.13750|
0035b0  f1a00001          SUB      r0,r0,#1
0035b4  84e0              STRH     r0,[r4,#0x26]
                  |L1.13750|
;;;6428   
;;;6429   Isumm_=Isumm;
0035b6  4822              LDR      r0,|L1.13888|
0035b8  4d22              LDR      r5,|L1.13892|
0035ba  8800              LDRH     r0,[r0,#0]  ; Isumm
0035bc  8028              STRH     r0,[r5,#0]
;;;6430   
;;;6431   if(bat[0]._Ib<0) Isumm_+=(abs(bat[0]._Ib))/10;
0035be  4e22              LDR      r6,|L1.13896|
0035c0  270a              MOVS     r7,#0xa
0035c2  f9b60008          LDRSH    r0,[r6,#8]  ; bat
0035c6  2800              CMP      r0,#0
0035c8  da45              BGE      |L1.13910|
0035ca  f7fffffe          BL       abs
0035ce  e03d              B        |L1.13900|
                  |L1.13776|
                          DCD      BAT_C_NOM
                  |L1.13780|
                          DCD      0xffff7360
                  |L1.13784|
                          DCD      BAT_TYPE
                  |L1.13788|
                          DCD      lakb
                  |L1.13792|
                          DCD      t_ext
                  |L1.13796|
                          DCD      TBATSIGN
                  |L1.13800|
                          DCD      ND_EXT
                  |L1.13804|
                          DCD      TBATMAX
                  |L1.13808|
                          DCD      ADR_EE_BAT_RESURS
                  |L1.13812|
                          DCD      UBM_AV
                  |L1.13816|
                          DCD      U0B
                  |L1.13820|
                          DCD      IKB
                  |L1.13824|
                          DCD      USIGN
                  |L1.13828|
                          DCD      TERMOKOMPENS
                  |L1.13832|
                          DCD      UB20
                  |L1.13836|
                          DCD      UVZ
                  |L1.13840|
                          DCD      u_necc
                  |L1.13844|
                          DCD      mat_temper
                  |L1.13848|
                          DCD      UB0
                  |L1.13852|
                          DCD      ||area_number.23||
                  |L1.13856|
                          DCD      sk_stat
                  |L1.13860|
                          DCD      speedChIsOn
                  |L1.13864|
                          DCD      sp_ch_stat
                  |L1.13868|
                          DCD      speedChrgVolt
                  |L1.13872|
                          DCD      hv_vz_stat
                  |L1.13876|
                          DCD      mess_data
                  |L1.13880|
                          DCD      u_necc_dn
                  |L1.13884|
                          DCD      u_necc_up
                  |L1.13888|
                          DCD      Isumm
                  |L1.13892|
                          DCD      Isumm_
                  |L1.13896|
                          DCD      bat
                  |L1.13900|
00364c  fb90f0f7          SDIV     r0,r0,r7
003650  8829              LDRH     r1,[r5,#0]  ; Isumm_
003652  4408              ADD      r0,r0,r1
003654  8028              STRH     r0,[r5,#0]
                  |L1.13910|
;;;6432   if(bat[1]._Ib<0) Isumm_+=(abs(bat[1]._Ib))/10;
003656  f9b60054          LDRSH    r0,[r6,#0x54]  ; bat
00365a  2800              CMP      r0,#0
00365c  da06              BGE      |L1.13932|
00365e  f7fffffe          BL       abs
003662  fb90f0f7          SDIV     r0,r0,r7
003666  8829              LDRH     r1,[r5,#0]  ; Isumm_
003668  4408              ADD      r0,r0,r1
00366a  8028              STRH     r0,[r5,#0]
                  |L1.13932|
;;;6433   
;;;6434   num_necc_up=(Isumm_/((signed short)IMAX))+1;
00366c  48fc              LDR      r0,|L1.14944|
00366e  f9b51000          LDRSH    r1,[r5,#0]  ; Isumm_
003672  f9b00000          LDRSH    r0,[r0,#0]  ; IMAX
003676  fb91f0f0          SDIV     r0,r1,r0
00367a  f1000001          ADD      r0,r0,#1
00367e  b2c0              UXTB     r0,r0
003680  7420              STRB     r0,[r4,#0x10]
;;;6435   ////Isumm_+=(signed short)((IMAX*(10-KIMAX))/10);
;;;6436   ////Isumm_+=(signed short)(IMAX-IMIN);
;;;6437   
;;;6438   num_necc_down=(Isumm_/((signed short)IMIN))+1;
003682  4af8              LDR      r2,|L1.14948|
003684  f9b22000          LDRSH    r2,[r2,#0]  ; IMIN
003688  fb91f1f2          SDIV     r1,r1,r2
00368c  f1010101          ADD      r1,r1,#1
003690  b2ca              UXTB     r2,r1
003692  7462              STRB     r2,[r4,#0x11]
;;;6439   
;;;6440   if(num_necc_up>num_necc)
003694  49f4              LDR      r1,|L1.14952|
;;;6441   	{
;;;6442   	num_necc=num_necc_up;
;;;6443   	num_necc_block_cnt=60;
003696  f04f053c          MOV      r5,#0x3c
00369a  f9b13000          LDRSH    r3,[r1,#0]            ;6440  ; num_necc
00369e  4298              CMP      r0,r3                 ;6440
0036a0  dd02              BLE      |L1.13992|
0036a2  8008              STRH     r0,[r1,#0]            ;6442
0036a4  84e5              STRH     r5,[r4,#0x26]
0036a6  e005              B        |L1.14004|
                  |L1.13992|
;;;6444   	}
;;;6445   else if(num_necc_down<num_necc)
0036a8  429a              CMP      r2,r3
0036aa  da03              BGE      |L1.14004|
;;;6446   	{
;;;6447   	if(!num_necc_block_cnt)
0036ac  8ce0              LDRH     r0,[r4,#0x26]  ; num_necc_block_cnt
0036ae  b908              CBNZ     r0,|L1.14004|
;;;6448   		{
;;;6449   		num_necc=num_necc_down;
0036b0  800a              STRH     r2,[r1,#0]
;;;6450   		num_necc_block_cnt=60;
0036b2  84e5              STRH     r5,[r4,#0x26]
                  |L1.14004|
;;;6451   		}
;;;6452   	}
;;;6453   
;;;6454   if(PAR) num_necc=NUMIST;
0036b4  48ed              LDR      r0,|L1.14956|
0036b6  8802              LDRH     r2,[r0,#0]  ; PAR
0036b8  48ed              LDR      r0,|L1.14960|
0036ba  b10a              CBZ      r2,|L1.14016|
0036bc  8802              LDRH     r2,[r0,#0]  ; NUMIST
0036be  800a              STRH     r2,[r1,#0]
                  |L1.14016|
;;;6455   
;;;6456   #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;6457   if(bPARALLEL) num_necc=NUMIST;
0036c0  7fa2              LDRB     r2,[r4,#0x1e]  ; bPARALLEL
0036c2  b10a              CBZ      r2,|L1.14024|
0036c4  8802              LDRH     r2,[r0,#0]  ; NUMIST
0036c6  800a              STRH     r2,[r1,#0]
                  |L1.14024|
;;;6458   #endif
;;;6459   
;;;6460   gran(&num_necc,1,NUMIST);
0036c8  f9b02000          LDRSH    r2,[r0,#0]  ; NUMIST
0036cc  e8bd41f0          POP      {r4-r8,lr}
0036d0  2101              MOVS     r1,#1
0036d2  48e5              LDR      r0,|L1.14952|
0036d4  f7ffbffe          B.W      gran
;;;6461   
;;;6462   }
;;;6463   
                          ENDP

                  cntrl_hndl PROC
;;;6466   //-----------------------------------------------
;;;6467   void cntrl_hndl(void)
0036d8  e92d5ff0          PUSH     {r4-r12,lr}
;;;6468   {
;;;6469   
;;;6470   IZMAX_=IZMAX;
0036dc  48e5              LDR      r0,|L1.14964|
0036de  4ce6              LDR      r4,|L1.14968|
0036e0  f9b01000          LDRSH    r1,[r0,#0]  ; IZMAX
0036e4  8761              STRH     r1,[r4,#0x3a]
;;;6471   
;;;6472   //cntrl_hndl_plazma=10;
;;;6473   
;;;6474   if((speedChIsOn)||(sp_ch_stat==scsWRK))IZMAX_=speedChrgCurr;
0036e6  48e5              LDR      r0,|L1.14972|
0036e8  8800              LDRH     r0,[r0,#0]  ; speedChIsOn
0036ea  b918              CBNZ     r0,|L1.14068|
0036ec  48e4              LDR      r0,|L1.14976|
0036ee  7800              LDRB     r0,[r0,#0]  ; sp_ch_stat
0036f0  2802              CMP      r0,#2
0036f2  d102              BNE      |L1.14074|
                  |L1.14068|
0036f4  48e3              LDR      r0,|L1.14980|
0036f6  8800              LDRH     r0,[r0,#0]  ; speedChrgCurr
0036f8  8760              STRH     r0,[r4,#0x3a]
                  |L1.14074|
;;;6475   
;;;6476   if(cntrl_stat_blok_cnt)cntrl_stat_blok_cnt--;
0036fa  f9b40062          LDRSH    r0,[r4,#0x62]  ; cntrl_stat_blok_cnt
0036fe  b118              CBZ      r0,|L1.14088|
003700  f1a00001          SUB      r0,r0,#1
003704  f8a40062          STRH     r0,[r4,#0x62]
                  |L1.14088|
;;;6477   if(cntrl_stat_blok_cnt_)cntrl_stat_blok_cnt_--;
003708  f9b40064          LDRSH    r0,[r4,#0x64]  ; cntrl_stat_blok_cnt_
00370c  b118              CBZ      r0,|L1.14102|
00370e  f1a00001          SUB      r0,r0,#1
003712  f8a40064          STRH     r0,[r4,#0x64]
                  |L1.14102|
;;;6478   
;;;6479   if((bat[0]._temper_stat&0x03)||(bat[1]._temper_stat&0x03))IZMAX_=IZMAX/10;
003716  48dc              LDR      r0,|L1.14984|
003718  f04f080a          MOV      r8,#0xa
00371c  f890203f          LDRB     r2,[r0,#0x3f]  ; bat
003720  0792              LSLS     r2,r2,#30
003722  d103              BNE      |L1.14124|
003724  f890008b          LDRB     r0,[r0,#0x8b]  ; bat
003728  0780              LSLS     r0,r0,#30
00372a  d002              BEQ      |L1.14130|
                  |L1.14124|
00372c  fb91f0f8          SDIV     r0,r1,r8
003730  8760              STRH     r0,[r4,#0x3a]
                  |L1.14130|
;;;6480   
;;;6481   
;;;6482   #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;6483   if((REG_SPEED<1)||(REG_SPEED>5)) REG_SPEED=1;
003732  48d6              LDR      r0,|L1.14988|
003734  2601              MOVS     r6,#1
003736  f9b01000          LDRSH    r1,[r0,#0]  ; REG_SPEED
00373a  1e49              SUBS     r1,r1,#1
00373c  2905              CMP      r1,#5
00373e  d300              BCC      |L1.14146|
003740  8006              STRH     r6,[r0,#0]
                  |L1.14146|
;;;6484   if(ch_cnt0<(10*REG_SPEED))
003742  f9b00000          LDRSH    r0,[r0,#0]  ; REG_SPEED
003746  79e1              LDRB     r1,[r4,#7]  ; ch_cnt0
003748  eb000080          ADD      r0,r0,r0,LSL #2
00374c  2500              MOVS     r5,#0                 ;6474
00374e  ebb10f40          CMP      r1,r0,LSL #1
003752  da08              BGE      |L1.14182|
;;;6485   	{
;;;6486   	ch_cnt0++;
003754  f1010101          ADD      r1,r1,#1
003758  b2c9              UXTB     r1,r1
00375a  71e1              STRB     r1,[r4,#7]
;;;6487   	if(ch_cnt0>=10*REG_SPEED)
00375c  ebb10f40          CMP      r1,r0,LSL #1
003760  db01              BLT      |L1.14182|
;;;6488   		{
;;;6489   		ch_cnt0=0;
003762  71e5              STRB     r5,[r4,#7]
;;;6490   		b1Hz_ch=1;
003764  7226              STRB     r6,[r4,#8]
                  |L1.14182|
;;;6491   		}
;;;6492   	}
;;;6493   #endif
;;;6494   #ifndef UKU_220_IPS_TERMOKOMPENSAT
;;;6495   if(ch_cnt0<10)
;;;6496   	{
;;;6497   	ch_cnt0++;
;;;6498   	if(ch_cnt0>=10)
;;;6499   		{
;;;6500   		ch_cnt0=0;
;;;6501   		b1Hz_ch=1;
;;;6502   		}
;;;6503   	}
;;;6504   #endif
;;;6505   
;;;6506   
;;;6507   if(mess_find_unvol(MESS2CNTRL_HNDL))
003766  20e1              MOVS     r0,#0xe1
003768  f7fffffe          BL       mess_find_unvol
;;;6508   	{
;;;6509   	if(mess_data[0]==PARAM_CNTRL_STAT_PLUS)
;;;6510   		{
;;;6511   		cntrl_stat=cntrl_stat_old+mess_data[1];
;;;6512   		}
;;;6513   	else if(mess_data[0]==PARAM_CNTRL_STAT_MINUS)
;;;6514   		{
;;;6515   		cntrl_stat=cntrl_stat_old-mess_data[1];
;;;6516   		}
;;;6517   	else if(mess_data[0]==PARAM_CNTRL_STAT_STEP_DOWN)
;;;6518   		{
;;;6519   		static char cntrlStatIsDownCnt;
;;;6520   		cntrl_stat--;
;;;6521   
;;;6522   		if((cntrl_stat<=30)||(load_U<USIGN))
;;;6523   			{
;;;6524   			if(++cntrlStatIsDownCnt==250)mess_send(MESS2KB_HNDL,PARAM_CNTRL_IS_DOWN,0,10);
;;;6525   			}
;;;6526   		else 
;;;6527   			{
;;;6528   			cntrlStatIsDownCnt=0;
;;;6529   			}
;;;6530   
;;;6531   		}
;;;6532   	else if(mess_data[0]==PARAM_CNTRL_STAT_SET)
;;;6533   		{
;;;6534   		cntrl_stat=mess_data[1];
;;;6535   		}
;;;6536   
;;;6537   	else if(mess_data[0]==PARAM_CNTRL_STAT_FAST_REG)
;;;6538   		{
;;;6539   		#ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;6540   		if(load_U>u_necc)
00376c  f8df9320          LDR      r9,|L1.14992|
;;;6541   			{
;;;6542   			cntrl_hndl_plazma=11;
;;;6543   			if(((bps_U-u_necc)>40)&&(cntrl_stat>0))cntrl_stat-=5;
003770  4ac8              LDR      r2,|L1.14996|
;;;6544   			else if((cntrl_stat)&&b1Hz_ch)cntrl_stat--;
;;;6545   			}
;;;6546   		else if(bps_U<u_necc)
;;;6547   			{
;;;6548   			cntrl_hndl_plazma=12;	
;;;6549   			if(((u_necc-bps_U)>40)&&(cntrl_stat<1015))cntrl_stat+=5;
;;;6550   			else	if((cntrl_stat<1020)&&b1Hz_ch)cntrl_stat++;
;;;6551   			}
;;;6552   		#elif defined(UKU_220)
;;;6553   		if(load_U>u_necc)
;;;6554   			{
;;;6555   			cntrl_hndl_plazma=13;
;;;6556   			if(((load_U-u_necc)>40)&&(cntrl_stat>0))cntrl_stat-=5;
;;;6557   			else if((cntrl_stat)&&b1Hz_ch)cntrl_stat--;
;;;6558   			}
;;;6559   		else if(load_U<u_necc)
;;;6560   			{
;;;6561   			cntrl_hndl_plazma=14;	
;;;6562   			if(((u_necc-load_U)>40)&&(cntrl_stat<1015))cntrl_stat+=5;
;;;6563   			else	if((cntrl_stat<1020)&&b1Hz_ch)cntrl_stat++;
;;;6564   			}
;;;6565   		#elif defined(UKU_220_V2)
;;;6566   		if(load_U>u_necc)
;;;6567   			{
;;;6568   			cntrl_hndl_plazma=15;
;;;6569   			if(((load_U-u_necc)>40)&&(cntrl_stat>0))cntrl_stat-=5;
;;;6570   			else if((cntrl_stat)&&b1Hz_ch)cntrl_stat--;
;;;6571   			}
;;;6572   		else if(load_U<u_necc)
;;;6573   			{
;;;6574   			cntrl_hndl_plazma=16;	
;;;6575   			if(((u_necc-load_U)>40)&&(cntrl_stat<1015))cntrl_stat+=5;
;;;6576   			else	if((cntrl_stat<1020)&&b1Hz_ch)cntrl_stat++;
;;;6577   			}
;;;6578   		#else
;;;6579   
;;;6580   		if(load_U>u_necc)
;;;6581   			{
;;;6582   			cntrl_hndl_plazma=17;
;;;6583   			if(((load_U-u_necc)>10)&&(cntrl_stat>0))cntrl_stat-=5;
;;;6584   			else if((cntrl_stat)&&b1Hz_ch)cntrl_stat--;
;;;6585   			}
;;;6586   		else if(load_U<u_necc)
;;;6587   			{
;;;6588   			cntrl_hndl_plazma=18;	
;;;6589   			if(((u_necc-load_U)>10)&&(cntrl_stat<1015))cntrl_stat+=5;
;;;6590   			else	if((cntrl_stat<1020)&&b1Hz_ch)cntrl_stat++;
;;;6591   			}
;;;6592   		#endif	
;;;6593   	 	}
;;;6594   	}
;;;6595   
;;;6596   #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;6597   else if((b1Hz_ch)&&((!bIBAT_SMKLBR)||(bps[8]._cnt>40)))
003772  f8dfb324          LDR      r11,|L1.15000|
;;;6598   	{
;;;6599   	cntrl_stat_new=cntrl_stat_old;
;;;6600   	cntrl_hndl_plazma=19;
;;;6601   	if((Ibmax/10)>(2*IZMAX_))
;;;6602   		{
;;;6603   		cntrl_hndl_plazma=20;
;;;6604             if(cntrl_stat_blok_cnt)cntrl_stat_new--;
;;;6605   		else	cntrl_stat_new-=10;
;;;6606   		}		
;;;6607   	else if(((Ibmax/10)<(IZMAX_*2))&&(Ibmax>(IZMAX_*15)))
;;;6608   		{
;;;6609   		cntrl_hndl_plazma=21;
;;;6610             if(cntrl_stat_blok_cnt)cntrl_stat_new--;
;;;6611             else	cntrl_stat_new-=3;
;;;6612   		}   
;;;6613   	else if((Ibmax<(IZMAX_*15))&&((Ibmax/10)>IZMAX_))
;;;6614   		{
;;;6615   		cntrl_hndl_plazma=22;
;;;6616   		cntrl_stat_new--;
;;;6617   		}
;;;6618   		
;;;6619   	else if(bps_U<u_necc)
;;;6620   		{
;;;6621   		cntrl_hndl_plazma=23;
;;;6622   		if(bps_U<(u_necc-(UB0-UB20)))
;;;6623   			{
;;;6624   			cntrl_hndl_plazma=24;
;;;6625   			if(Ibmax<0)
;;;6626   				{
;;;6627   				cntrl_hndl_plazma=25;
;;;6628                       if(cntrl_stat_blok_cnt)cntrl_stat_new++;
;;;6629   				else cntrl_stat_new+=10;
;;;6630   				}
;;;6631   			else if(Ibmax<(IZMAX_*5))
;;;6632   				{
;;;6633   				cntrl_hndl_plazma=26;
;;;6634                       if(cntrl_stat_blok_cnt)cntrl_stat_new++;
;;;6635   				else	cntrl_stat_new+=2;
;;;6636   				}
;;;6637   			else if(Ibmax<((IZMAX_*10)/*-10*/))//(Ibmax<((IZMAX_*95)/10))
;;;6638   				{
;;;6639   				cntrl_hndl_plazma=27;
;;;6640   				cntrl_stat_new++;
;;;6641   				}					
;;;6642   			}
;;;6643   		else if(bps_U<(u_necc-((UB0-UB20)/4)))
;;;6644   			{
;;;6645   			cntrl_hndl_plazma=28;
;;;6646   			if(Ibmax<(IZMAX_*5))
;;;6647   				{
;;;6648   				cntrl_hndl_plazma=29;
;;;6649                       if(cntrl_stat_blok_cnt)cntrl_stat_new++;
;;;6650   				else	cntrl_stat_new+=2;
;;;6651   				}
;;;6652   			else if(Ibmax<((IZMAX_*10)/*-10*/))//(Ibmax<((IZMAX_*95)/10))
;;;6653   				{
;;;6654   				cntrl_hndl_plazma=30;
;;;6655   				cntrl_stat_new++;
;;;6656   				}					
;;;6657   			}	
;;;6658   		else if(bps_U<(u_necc-1))
;;;6659   			{
;;;6660   			cntrl_hndl_plazma=31;
;;;6661   			if(Ibmax<((IZMAX_*10)/*-10*/))//(Ibmax<((IZMAX_*95)/10))
;;;6662   				{
;;;6663   				cntrl_hndl_plazma=32;
;;;6664   				cntrl_stat_new++;
;;;6665   				}					
;;;6666   			}					
;;;6667   		}	
;;;6668   	else if((bps_U>u_necc)/*&&(!cntrl_blok)*/)
;;;6669   		{ 	
;;;6670   		cntrl_hndl_plazma=33;
;;;6671   		if(bps_U>(u_necc+(UB0-UB20)))
;;;6672   			{
;;;6673   			cntrl_hndl_plazma=34;
;;;6674                  if(cntrl_stat_blok_cnt)cntrl_stat_new--;
;;;6675   			else	cntrl_stat_new-=10;
;;;6676   			}
;;;6677   		else if(bps_U>(u_necc+((UB0-UB20)/4)))
;;;6678   			{
;;;6679   			cntrl_hndl_plazma=35;
;;;6680                  if(cntrl_stat_blok_cnt)cntrl_stat_new--;
;;;6681   			else cntrl_stat_new-=2;
;;;6682   			}	
;;;6683   		else if(bps_U>(u_necc+1))
;;;6684   			{
;;;6685   			cntrl_hndl_plazma=36;
;;;6686   			cntrl_stat_new--;
;;;6687   			}					
;;;6688   		}
;;;6689   
;;;6690   	if(hv_vz_stat==hvsOFF)
;;;6691   		{
;;;6692   		if(((sk_stat[1]==1)&&(sk_stat_old[1]==0))&&(VZ_KIND==1))cntrl_stat_new=50;
;;;6693   		}
;;;6694   
;;;6695   	gran(&cntrl_stat_new,10,1010);			
;;;6696   	cntrl_stat_old=cntrl_stat_new;
;;;6697   	cntrl_stat=cntrl_stat_new;
;;;6698   	
;;;6699   	if(ICA_EN==0)
;;;6700   		{
;;;6701   		if(ica_cntrl_hndl_cnt)
003776  4fc9              LDR      r7,|L1.15004|
003778  2800              CMP      r0,#0                 ;6507
00377a  d07c              BEQ      |L1.14454|
00377c  49c8              LDR      r1,|L1.15008|
00377e  6808              LDR      r0,[r1,#0]            ;6509  ; mess_data
003780  2864              CMP      r0,#0x64              ;6509
003782  d009              BEQ      |L1.14232|
003784  2869              CMP      r0,#0x69              ;6513
003786  d00c              BEQ      |L1.14242|
003788  4bc6              LDR      r3,|L1.15012|
00378a  286e              CMP      r0,#0x6e              ;6517
00378c  d00f              BEQ      |L1.14254|
00378e  28e5              CMP      r0,#0xe5              ;6532
003790  d02a              BEQ      |L1.14312|
003792  28e6              CMP      r0,#0xe6              ;6537
003794  d02b              BEQ      |L1.14318|
                  |L1.14230|
003796  e1ca              B        |L1.15150|
                  |L1.14232|
003798  6848              LDR      r0,[r1,#4]            ;6511  ; mess_data
00379a  8c61              LDRH     r1,[r4,#0x22]         ;6511  ; cntrl_stat_old
00379c  4408              ADD      r0,r0,r1              ;6511
00379e  8420              STRH     r0,[r4,#0x20]         ;6511
0037a0  e1c5              B        |L1.15150|
                  |L1.14242|
0037a2  6848              LDR      r0,[r1,#4]            ;6515  ; mess_data
0037a4  8c61              LDRH     r1,[r4,#0x22]         ;6515  ; cntrl_stat_old
0037a6  eba10000          SUB      r0,r1,r0              ;6515
0037aa  8420              STRH     r0,[r4,#0x20]         ;6515
0037ac  e1bf              B        |L1.15150|
                  |L1.14254|
0037ae  8c20              LDRH     r0,[r4,#0x20]         ;6520  ; cntrl_stat
0037b0  f1a00001          SUB      r0,r0,#1              ;6520
0037b4  b200              SXTH     r0,r0                 ;6520
0037b6  8420              STRH     r0,[r4,#0x20]         ;6520
0037b8  281e              CMP      r0,#0x1e              ;6522
0037ba  dd06              BLE      |L1.14282|
0037bc  49ba              LDR      r1,|L1.15016|
0037be  f9b30000          LDRSH    r0,[r3,#0]            ;6522  ; load_U
0037c2  f9b11000          LDRSH    r1,[r1,#0]            ;6522  ; USIGN
0037c6  4288              CMP      r0,r1                 ;6522
0037c8  da0c              BGE      |L1.14308|
                  |L1.14282|
0037ca  7860              LDRB     r0,[r4,#1]            ;6524  ; cntrlStatIsDownCnt
0037cc  1c40              ADDS     r0,r0,#1              ;6524
0037ce  b2c0              UXTB     r0,r0                 ;6524
0037d0  7060              STRB     r0,[r4,#1]            ;6524
0037d2  28fa              CMP      r0,#0xfa              ;6524
0037d4  d1df              BNE      |L1.14230|
0037d6  230a              MOVS     r3,#0xa               ;6524
0037d8  2200              MOVS     r2,#0                 ;6524
0037da  21e7              MOVS     r1,#0xe7              ;6524
0037dc  20e6              MOVS     r0,#0xe6              ;6524
0037de  f7fffffe          BL       mess_send
0037e2  e1a4              B        |L1.15150|
                  |L1.14308|
0037e4  7065              STRB     r5,[r4,#1]            ;6528
0037e6  e1a2              B        |L1.15150|
                  |L1.14312|
0037e8  6848              LDR      r0,[r1,#4]            ;6534  ; mess_data
0037ea  8420              STRH     r0,[r4,#0x20]         ;6534
0037ec  e19f              B        |L1.15150|
                  |L1.14318|
0037ee  f9b31000          LDRSH    r1,[r3,#0]            ;6540  ; load_U
0037f2  f9b90000          LDRSH    r0,[r9,#0]            ;6540  ; u_necc
0037f6  4281              CMP      r1,r0                 ;6540
0037f8  dd1b              BLE      |L1.14386|
0037fa  f04f010b          MOV      r1,#0xb               ;6542
0037fe  77e1              STRB     r1,[r4,#0x1f]         ;6542
003800  f9b21000          LDRSH    r1,[r2,#0]            ;6543  ; bps_U
003804  eba10000          SUB      r0,r1,r0              ;6543
003808  2828              CMP      r0,#0x28              ;6543
00380a  dd07              BLE      |L1.14364|
00380c  f9b40020          LDRSH    r0,[r4,#0x20]         ;6543  ; cntrl_stat
003810  2800              CMP      r0,#0                 ;6543
003812  dd03              BLE      |L1.14364|
003814  f1a00005          SUB      r0,r0,#5              ;6543
003818  8420              STRH     r0,[r4,#0x20]         ;6543
00381a  e188              B        |L1.15150|
                  |L1.14364|
00381c  f9b40020          LDRSH    r0,[r4,#0x20]         ;6544  ; cntrl_stat
003820  2800              CMP      r0,#0                 ;6544
003822  d0b8              BEQ      |L1.14230|
003824  7a21              LDRB     r1,[r4,#8]            ;6544  ; b1Hz_ch
003826  2900              CMP      r1,#0                 ;6544
003828  d0b5              BEQ      |L1.14230|
00382a  f1a00001          SUB      r0,r0,#1              ;6544
00382e  8420              STRH     r0,[r4,#0x20]         ;6544
003830  e17d              B        |L1.15150|
                  |L1.14386|
003832  f9b21000          LDRSH    r1,[r2,#0]            ;6546  ; bps_U
003836  4281              CMP      r1,r0                 ;6546
003838  daad              BGE      |L1.14230|
00383a  f04f020c          MOV      r2,#0xc               ;6548
00383e  77e2              STRB     r2,[r4,#0x1f]         ;6548
003840  eba00001          SUB      r0,r0,r1              ;6549
003844  2828              CMP      r0,#0x28              ;6549
003846  dd0a              BLE      |L1.14430|
003848  f9b40020          LDRSH    r0,[r4,#0x20]         ;6549  ; cntrl_stat
00384c  f24031f7          MOV      r1,#0x3f7             ;6549
003850  4288              CMP      r0,r1                 ;6549
003852  da04              BGE      |L1.14430|
003854  f1000005          ADD      r0,r0,#5              ;6549
003858  8420              STRH     r0,[r4,#0x20]         ;6549
00385a  e168              B        |L1.15150|
00385c  e00b              B        |L1.14454|
                  |L1.14430|
00385e  f9b40020          LDRSH    r0,[r4,#0x20]         ;6550  ; cntrl_stat
003862  f5b07f7f          CMP      r0,#0x3fc             ;6550
003866  da96              BGE      |L1.14230|
003868  7a21              LDRB     r1,[r4,#8]            ;6550  ; b1Hz_ch
00386a  2900              CMP      r1,#0                 ;6550
00386c  d093              BEQ      |L1.14230|
00386e  f1000001          ADD      r0,r0,#1              ;6550
003872  8420              STRH     r0,[r4,#0x20]         ;6550
003874  e15b              B        |L1.15150|
                  |L1.14454|
003876  7a20              LDRB     r0,[r4,#8]            ;6597  ; b1Hz_ch
003878  2800              CMP      r0,#0                 ;6597
00387a  d08c              BEQ      |L1.14230|
00387c  488b              LDR      r0,|L1.15020|
00387e  8800              LDRH     r0,[r0,#0]            ;6597  ; bIBAT_SMKLBR
003880  b118              CBZ      r0,|L1.14474|
003882  f89b02e3          LDRB     r0,[r11,#0x2e3]       ;6597  ; bps
003886  2828              CMP      r0,#0x28              ;6597
003888  d985              BLS      |L1.14230|
                  |L1.14474|
00388a  f9b40022          LDRSH    r0,[r4,#0x22]         ;6599  ; cntrl_stat_old
00388e  86e0              STRH     r0,[r4,#0x36]         ;6599
003890  f04f0113          MOV      r1,#0x13              ;6600
003894  77e1              STRB     r1,[r4,#0x1f]         ;6600
003896  f9b41038          LDRSH    r1,[r4,#0x38]         ;6601  ; Ibmax
00389a  8f63              LDRH     r3,[r4,#0x3a]         ;6601  ; IZMAX_
00389c  fb91fcf8          SDIV     r12,r1,r8             ;6601
0038a0  ebbc0f43          CMP      r12,r3,LSL #1         ;6601
0038a4  dd0d              BLE      |L1.14530|
0038a6  f04f0114          MOV      r1,#0x14              ;6603
0038aa  77e1              STRB     r1,[r4,#0x1f]         ;6603
0038ac  f8b41062          LDRH     r1,[r4,#0x62]         ;6604  ; cntrl_stat_blok_cnt
0038b0  b119              CBZ      r1,|L1.14522|
0038b2  f1a00001          SUB      r0,r0,#1              ;6604
0038b6  86e0              STRH     r0,[r4,#0x36]         ;6604
0038b8  e10b              B        |L1.15058|
                  |L1.14522|
0038ba  f1a0000a          SUB      r0,r0,#0xa            ;6605
0038be  86e0              STRH     r0,[r4,#0x36]         ;6605
0038c0  e107              B        |L1.15058|
                  |L1.14530|
0038c2  da11              BGE      |L1.14568|
0038c4  ebc31803          RSB      r8,r3,r3,LSL #4       ;6607
0038c8  4588              CMP      r8,r1                 ;6607
0038ca  da0d              BGE      |L1.14568|
0038cc  f04f0115          MOV      r1,#0x15              ;6609
0038d0  77e1              STRB     r1,[r4,#0x1f]         ;6609
0038d2  f8b41062          LDRH     r1,[r4,#0x62]         ;6610  ; cntrl_stat_blok_cnt
0038d6  b119              CBZ      r1,|L1.14560|
0038d8  f1a00001          SUB      r0,r0,#1              ;6610
0038dc  86e0              STRH     r0,[r4,#0x36]         ;6610
0038de  e0f8              B        |L1.15058|
                  |L1.14560|
0038e0  f1a00003          SUB      r0,r0,#3              ;6611
0038e4  86e0              STRH     r0,[r4,#0x36]         ;6611
0038e6  e0f4              B        |L1.15058|
                  |L1.14568|
0038e8  ebc31803          RSB      r8,r3,r3,LSL #4       ;6613
0038ec  4588              CMP      r8,r1                 ;6613
0038ee  dd08              BLE      |L1.14594|
0038f0  459c              CMP      r12,r3                ;6613
0038f2  dd06              BLE      |L1.14594|
0038f4  f04f0116          MOV      r1,#0x16              ;6615
0038f8  77e1              STRB     r1,[r4,#0x1f]         ;6615
0038fa  f1a00001          SUB      r0,r0,#1              ;6616
0038fe  86e0              STRH     r0,[r4,#0x36]         ;6616
003900  e0e7              B        |L1.15058|
                  |L1.14594|
003902  f9b2c000          LDRSH    r12,[r2,#0]           ;6619  ; bps_U
003906  f9b92000          LDRSH    r2,[r9,#0]            ;6619  ; u_necc
00390a  f8df81a4          LDR      r8,|L1.15024|
00390e  f8df91a4          LDR      r9,|L1.15028|
003912  4594              CMP      r12,r2                ;6619
003914  da76              BGE      |L1.14852|
003916  f04f0a17          MOV      r10,#0x17             ;6621
00391a  f884a01f          STRB     r10,[r4,#0x1f]        ;6621
00391e  f9b88000          LDRSH    r8,[r8,#0]            ;6622  ; UB0
003922  f9b99000          LDRSH    r9,[r9,#0]            ;6622  ; UB20
003926  eba80809          SUB      r8,r8,r9              ;6622
00392a  eba20908          SUB      r9,r2,r8              ;6622
00392e  45e1              CMP      r9,r12                ;6622
003930  dd2e              BLE      |L1.14736|
003932  f04f0218          MOV      r2,#0x18              ;6624
003936  77e2              STRB     r2,[r4,#0x1f]         ;6624
003938  2900              CMP      r1,#0                 ;6625
00393a  da0d              BGE      |L1.14680|
00393c  f04f0119          MOV      r1,#0x19              ;6627
003940  77e1              STRB     r1,[r4,#0x1f]         ;6627
003942  f8b41062          LDRH     r1,[r4,#0x62]         ;6628  ; cntrl_stat_blok_cnt
003946  b119              CBZ      r1,|L1.14672|
003948  f1000001          ADD      r0,r0,#1              ;6628
00394c  86e0              STRH     r0,[r4,#0x36]         ;6628
00394e  e0c0              B        |L1.15058|
                  |L1.14672|
003950  f100000a          ADD      r0,r0,#0xa            ;6629
003954  86e0              STRH     r0,[r4,#0x36]         ;6629
003956  e0bc              B        |L1.15058|
                  |L1.14680|
003958  eb030283          ADD      r2,r3,r3,LSL #2       ;6631
00395c  428a              CMP      r2,r1                 ;6631
00395e  dd0d              BLE      |L1.14716|
003960  f04f011a          MOV      r1,#0x1a              ;6633
003964  77e1              STRB     r1,[r4,#0x1f]         ;6633
003966  f8b41062          LDRH     r1,[r4,#0x62]         ;6634  ; cntrl_stat_blok_cnt
00396a  b119              CBZ      r1,|L1.14708|
00396c  f1000001          ADD      r0,r0,#1              ;6634
003970  86e0              STRH     r0,[r4,#0x36]         ;6634
003972  e0ae              B        |L1.15058|
                  |L1.14708|
003974  f1000002          ADD      r0,r0,#2              ;6635
003978  86e0              STRH     r0,[r4,#0x36]         ;6635
00397a  e0aa              B        |L1.15058|
                  |L1.14716|
00397c  ebb10f42          CMP      r1,r2,LSL #1          ;6637
003980  da05              BGE      |L1.14734|
003982  f04f011b          MOV      r1,#0x1b              ;6639
003986  77e1              STRB     r1,[r4,#0x1f]         ;6639
003988  f1000001          ADD      r0,r0,#1              ;6640
00398c  86e0              STRH     r0,[r4,#0x36]         ;6640
                  |L1.14734|
00398e  e0a0              B        |L1.15058|
                  |L1.14736|
003990  ea4f79e8          ASR      r9,r8,#31             ;6643
003994  eb087899          ADD      r8,r8,r9,LSR #30      ;6643
003998  eba208a8          SUB      r8,r2,r8,ASR #2       ;6643
00399c  45e0              CMP      r8,r12                ;6643
00399e  dd1e              BLE      |L1.14814|
0039a0  f04f021c          MOV      r2,#0x1c              ;6645
0039a4  77e2              STRB     r2,[r4,#0x1f]         ;6645
0039a6  eb030283          ADD      r2,r3,r3,LSL #2       ;6646
0039aa  428a              CMP      r2,r1                 ;6646
0039ac  dd0d              BLE      |L1.14794|
0039ae  f04f011d          MOV      r1,#0x1d              ;6648
0039b2  77e1              STRB     r1,[r4,#0x1f]         ;6648
0039b4  f8b41062          LDRH     r1,[r4,#0x62]         ;6649  ; cntrl_stat_blok_cnt
0039b8  b119              CBZ      r1,|L1.14786|
0039ba  f1000001          ADD      r0,r0,#1              ;6649
0039be  86e0              STRH     r0,[r4,#0x36]         ;6649
0039c0  e087              B        |L1.15058|
                  |L1.14786|
0039c2  f1000002          ADD      r0,r0,#2              ;6650
0039c6  86e0              STRH     r0,[r4,#0x36]         ;6650
0039c8  e083              B        |L1.15058|
                  |L1.14794|
0039ca  ebb10f42          CMP      r1,r2,LSL #1          ;6652
0039ce  da05              BGE      |L1.14812|
0039d0  f04f011e          MOV      r1,#0x1e              ;6654
0039d4  77e1              STRB     r1,[r4,#0x1f]         ;6654
0039d6  f1000001          ADD      r0,r0,#1              ;6655
0039da  86e0              STRH     r0,[r4,#0x36]         ;6655
                  |L1.14812|
0039dc  e079              B        |L1.15058|
                  |L1.14814|
0039de  1e52              SUBS     r2,r2,#1              ;6658
0039e0  4594              CMP      r12,r2                ;6658
0039e2  da76              BGE      |L1.15058|
0039e4  f04f021f          MOV      r2,#0x1f              ;6660
0039e8  77e2              STRB     r2,[r4,#0x1f]         ;6660
0039ea  eb030283          ADD      r2,r3,r3,LSL #2       ;6661
0039ee  ebb10f42          CMP      r1,r2,LSL #1          ;6661
0039f2  da6e              BGE      |L1.15058|
0039f4  f04f0120          MOV      r1,#0x20              ;6663
0039f8  77e1              STRB     r1,[r4,#0x1f]         ;6663
0039fa  f1000001          ADD      r0,r0,#1              ;6664
0039fe  86e0              STRH     r0,[r4,#0x36]         ;6664
003a00  e067              B        |L1.15058|
003a02  e7ff              B        |L1.14852|
                  |L1.14852|
003a04  dd65              BLE      |L1.15058|
003a06  f04f0121          MOV      r1,#0x21              ;6670
003a0a  77e1              STRB     r1,[r4,#0x1f]         ;6670
003a0c  f9b81000          LDRSH    r1,[r8,#0]            ;6671  ; UB0
003a10  f9b93000          LDRSH    r3,[r9,#0]            ;6671  ; UB20
003a14  eba10103          SUB      r1,r1,r3              ;6671
003a18  eb010302          ADD      r3,r1,r2              ;6671
003a1c  4563              CMP      r3,r12                ;6671
003a1e  da0d              BGE      |L1.14908|
003a20  f04f0122          MOV      r1,#0x22              ;6673
003a24  77e1              STRB     r1,[r4,#0x1f]         ;6673
003a26  f8b41062          LDRH     r1,[r4,#0x62]         ;6674  ; cntrl_stat_blok_cnt
003a2a  b119              CBZ      r1,|L1.14900|
003a2c  f1a00001          SUB      r0,r0,#1              ;6674
003a30  86e0              STRH     r0,[r4,#0x36]         ;6674
003a32  e04e              B        |L1.15058|
                  |L1.14900|
003a34  f1a0000a          SUB      r0,r0,#0xa            ;6675
003a38  86e0              STRH     r0,[r4,#0x36]         ;6675
003a3a  e04a              B        |L1.15058|
                  |L1.14908|
003a3c  17cb              ASRS     r3,r1,#31             ;6677
003a3e  eb017193          ADD      r1,r1,r3,LSR #30      ;6677
003a42  eb0201a1          ADD      r1,r2,r1,ASR #2       ;6677
003a46  4561              CMP      r1,r12                ;6677
003a48  da3a              BGE      |L1.15040|
003a4a  f04f0123          MOV      r1,#0x23              ;6679
003a4e  77e1              STRB     r1,[r4,#0x1f]         ;6679
003a50  f8b41062          LDRH     r1,[r4,#0x62]         ;6680  ; cntrl_stat_blok_cnt
003a54  b119              CBZ      r1,|L1.14942|
003a56  f1a00001          SUB      r0,r0,#1              ;6680
003a5a  86e0              STRH     r0,[r4,#0x36]         ;6680
003a5c  e039              B        |L1.15058|
                  |L1.14942|
003a5e  e02b              B        |L1.15032|
                  |L1.14944|
                          DCD      IMAX
                  |L1.14948|
                          DCD      IMIN
                  |L1.14952|
                          DCD      num_necc
                  |L1.14956|
                          DCD      PAR
                  |L1.14960|
                          DCD      NUMIST
                  |L1.14964|
                          DCD      IZMAX
                  |L1.14968|
                          DCD      ||area_number.23||
                  |L1.14972|
                          DCD      speedChIsOn
                  |L1.14976|
                          DCD      sp_ch_stat
                  |L1.14980|
                          DCD      speedChrgCurr
                  |L1.14984|
                          DCD      bat
                  |L1.14988|
                          DCD      REG_SPEED
                  |L1.14992|
                          DCD      u_necc
                  |L1.14996|
                          DCD      bps_U
                  |L1.15000|
                          DCD      bps
                  |L1.15004|
                          DCD      ica_cntrl_hndl_cnt
                  |L1.15008|
                          DCD      mess_data
                  |L1.15012|
                          DCD      load_U
                  |L1.15016|
                          DCD      USIGN
                  |L1.15020|
                          DCD      bIBAT_SMKLBR
                  |L1.15024|
                          DCD      UB0
                  |L1.15028|
                          DCD      UB20
                  |L1.15032|
003ab8  f1a00002          SUB      r0,r0,#2              ;6681
003abc  86e0              STRH     r0,[r4,#0x36]         ;6681
003abe  e008              B        |L1.15058|
                  |L1.15040|
003ac0  1c52              ADDS     r2,r2,#1              ;6683
003ac2  4594              CMP      r12,r2                ;6683
003ac4  dd05              BLE      |L1.15058|
003ac6  f04f0124          MOV      r1,#0x24              ;6685
003aca  77e1              STRB     r1,[r4,#0x1f]         ;6685
003acc  f1a00001          SUB      r0,r0,#1              ;6686
003ad0  86e0              STRH     r0,[r4,#0x36]         ;6686
                  |L1.15058|
003ad2  48ff              LDR      r0,|L1.16080|
003ad4  7800              LDRB     r0,[r0,#0]            ;6690  ; hv_vz_stat
003ad6  b968              CBNZ     r0,|L1.15092|
003ad8  48fe              LDR      r0,|L1.16084|
003ada  7840              LDRB     r0,[r0,#1]            ;6692  ; sk_stat
003adc  2801              CMP      r0,#1                 ;6692
003ade  d109              BNE      |L1.15092|
003ae0  48fd              LDR      r0,|L1.16088|
003ae2  7840              LDRB     r0,[r0,#1]            ;6692  ; sk_stat_old
003ae4  b930              CBNZ     r0,|L1.15092|
003ae6  48fd              LDR      r0,|L1.16092|
003ae8  8800              LDRH     r0,[r0,#0]            ;6692  ; VZ_KIND
003aea  2801              CMP      r0,#1                 ;6692
003aec  d102              BNE      |L1.15092|
003aee  f04f0032          MOV      r0,#0x32              ;6692
003af2  86e0              STRH     r0,[r4,#0x36]         ;6692
                  |L1.15092|
003af4  f24032f2          MOV      r2,#0x3f2             ;6695
003af8  210a              MOVS     r1,#0xa               ;6695
003afa  48f9              LDR      r0,|L1.16096|
003afc  f7fffffe          BL       gran
003b00  8ee0              LDRH     r0,[r4,#0x36]         ;6696  ; cntrl_stat_new
003b02  8460              STRH     r0,[r4,#0x22]         ;6696
003b04  8420              STRH     r0,[r4,#0x20]         ;6697
003b06  48f7              LDR      r0,|L1.16100|
003b08  f9b00000          LDRSH    r0,[r0,#0]            ;6699  ; ICA_EN
003b0c  b930              CBNZ     r0,|L1.15132|
003b0e  8839              LDRH     r1,[r7,#0]  ; ica_cntrl_hndl_cnt
003b10  b121              CBZ      r1,|L1.15132|
;;;6702   			{
;;;6703   			cntrl_stat = ica_cntrl_hndl;
003b12  49f5              LDR      r1,|L1.16104|
003b14  8809              LDRH     r1,[r1,#0]  ; ica_cntrl_hndl
003b16  8421              STRH     r1,[r4,#0x20]
;;;6704   			cntrl_stat_new = ica_cntrl_hndl;//=10*PWM_START;
003b18  86e1              STRH     r1,[r4,#0x36]
;;;6705   			cntrl_stat_old = ica_cntrl_hndl;//=10*PWM_START;
003b1a  8461              STRH     r1,[r4,#0x22]
                  |L1.15132|
;;;6706   			}
;;;6707   		}
;;;6708   	
;;;6709   	if((ICA_EN==1)||(ICA_EN==2))
003b1c  2801              CMP      r0,#1
003b1e  d001              BEQ      |L1.15140|
003b20  2802              CMP      r0,#2
003b22  d104              BNE      |L1.15150|
                  |L1.15140|
;;;6710   		{
;;;6711   		cntrl_stat=cntrl_stat_new+ica_u_necc;
003b24  49f1              LDR      r1,|L1.16108|
003b26  8ee0              LDRH     r0,[r4,#0x36]  ; cntrl_stat_new
003b28  8809              LDRH     r1,[r1,#0]  ; ica_u_necc
003b2a  4408              ADD      r0,r0,r1
003b2c  8420              STRH     r0,[r4,#0x20]
                  |L1.15150|
;;;6712   		}			
;;;6713   	}
;;;6714   #else
;;;6715   else if((b1Hz_ch)&&((!bIBAT_SMKLBR)||(bps[8]._cnt>40)))
;;;6716   	{
;;;6717   	cntrl_hndl_plazma=37;
;;;6718   	cntrl_stat_new=cntrl_stat_old;
;;;6719   	
;;;6720   	if((Ibmax/10)>(2*IZMAX_))
;;;6721   		{
;;;6722   		cntrl_hndl_plazma=38;
;;;6723             if(cntrl_stat_blok_cnt)cntrl_stat_new--;
;;;6724   		else	cntrl_stat_new-=10;
;;;6725   		}		
;;;6726   	else if(((Ibmax/10)<(IZMAX_*2))&&(Ibmax>(IZMAX_*15)))
;;;6727   		{
;;;6728   		cntrl_hndl_plazma=39;
;;;6729             if(cntrl_stat_blok_cnt)cntrl_stat_new--;
;;;6730             else	cntrl_stat_new-=3;
;;;6731   		}   
;;;6732   	else if((Ibmax<(IZMAX_*15))&&((Ibmax/10)>IZMAX_))
;;;6733   		{
;;;6734   		cntrl_hndl_plazma=40;
;;;6735   		cntrl_stat_new--;
;;;6736   		}
;;;6737   		
;;;6738   	else if(load_U<u_necc)
;;;6739   		{
;;;6740   		cntrl_hndl_plazma=41;
;;;6741   		if(load_U<(u_necc-(UB0-UB20)))
;;;6742   			{
;;;6743   			cntrl_hndl_plazma=42;
;;;6744   			if(Ibmax<0)
;;;6745   				{
;;;6746   				cntrl_hndl_plazma=43;
;;;6747                       if(cntrl_stat_blok_cnt)cntrl_stat_new++;
;;;6748   				else cntrl_stat_new+=10;
;;;6749   				}
;;;6750   			else if(Ibmax<(IZMAX_*5))
;;;6751   				{
;;;6752   				cntrl_hndl_plazma=44;
;;;6753                       if(cntrl_stat_blok_cnt)cntrl_stat_new++;
;;;6754   				else	cntrl_stat_new+=2;
;;;6755   				}
;;;6756   			else if(Ibmax<((IZMAX_*95)/10))
;;;6757   				{
;;;6758   				cntrl_hndl_plazma=45;
;;;6759   				cntrl_stat_new++;
;;;6760   				}					
;;;6761   			}
;;;6762   		else if(load_U<(u_necc-((UB0-UB20)/4)))
;;;6763   			{
;;;6764   			cntrl_hndl_plazma=46;
;;;6765   			if(Ibmax<(IZMAX_*5))
;;;6766   				{
;;;6767   				cntrl_hndl_plazma=47;
;;;6768                       if(cntrl_stat_blok_cnt)cntrl_stat_new++;
;;;6769   				else	cntrl_stat_new+=2;
;;;6770   				}
;;;6771   			else if(Ibmax<((IZMAX_*95)/10))
;;;6772   				{
;;;6773   				cntrl_hndl_plazma=48;
;;;6774   				cntrl_stat_new++;
;;;6775   				}					
;;;6776   			}	
;;;6777   		else if(load_U<(u_necc-1))
;;;6778   			{
;;;6779   			cntrl_hndl_plazma=49;
;;;6780   			if(Ibmax<((IZMAX_*95)/10))
;;;6781   				{
;;;6782   				cntrl_hndl_plazma=50;
;;;6783   				cntrl_stat_new++;
;;;6784   				}					
;;;6785   			}					
;;;6786   		}	
;;;6787   	else if((load_U>u_necc)/*&&(!cntrl_blok)*/)
;;;6788   		{
;;;6789   		cntrl_hndl_plazma=51;
;;;6790   		if(load_U>(u_necc+(UB0-UB20)))
;;;6791   			{
;;;6792   			cntrl_hndl_plazma=52;
;;;6793                  if(cntrl_stat_blok_cnt)cntrl_stat_new--;
;;;6794   			else	cntrl_stat_new-=10;
;;;6795   			}
;;;6796   		else if(load_U>(u_necc+((UB0-UB20)/4)))
;;;6797   			{
;;;6798   			cntrl_hndl_plazma=53;
;;;6799                  if(cntrl_stat_blok_cnt)cntrl_stat_new--;
;;;6800   			else cntrl_stat_new-=2;
;;;6801   			}	
;;;6802   		else if(load_U>(u_necc+1))
;;;6803   			{
;;;6804   			cntrl_hndl_plazma=54;
;;;6805   			cntrl_stat_new--;
;;;6806   			}					
;;;6807   		}
;;;6808   
;;;6809   	gran(&cntrl_stat_new,10,1010);			
;;;6810   	cntrl_stat_old=cntrl_stat_new;
;;;6811   	cntrl_stat=cntrl_stat_new;	
;;;6812   	}
;;;6813   #endif
;;;6814   
;;;6815   iiii=0;
003b2e  72a5              STRB     r5,[r4,#0xa]
;;;6816   for(i=0;i<NUMIST;i++)
003b30  7265              STRB     r5,[r4,#9]
003b32  48ef              LDR      r0,|L1.16112|
003b34  465a              MOV      r2,r11                ;6597
003b36  f9b01000          LDRSH    r1,[r0,#0]
003b3a  e00c              B        |L1.15190|
                  |L1.15164|
;;;6817        {
;;;6818        if(bps[i]._cnt<30)iiii=1;
003b3c  ebc003c0          RSB      r3,r0,r0,LSL #3
003b40  eb031300          ADD      r3,r3,r0,LSL #4
003b44  eb020383          ADD      r3,r2,r3,LSL #2
003b48  78db              LDRB     r3,[r3,#3]
003b4a  2b1e              CMP      r3,#0x1e
003b4c  d200              BCS      |L1.15184|
003b4e  72a6              STRB     r6,[r4,#0xa]
                  |L1.15184|
003b50  f1000001          ADD      r0,r0,#1              ;6816
003b54  7260              STRB     r0,[r4,#9]            ;6816
                  |L1.15190|
003b56  7a60              LDRB     r0,[r4,#9]            ;6816  ; i
003b58  4288              CMP      r0,r1                 ;6816
003b5a  dbef              BLT      |L1.15164|
;;;6819        }
;;;6820   
;;;6821   if(iiii==0)
003b5c  7aa0              LDRB     r0,[r4,#0xa]  ; iiii
003b5e  b920              CBNZ     r0,|L1.15210|
;;;6822        {
;;;6823        cntrl_stat=600;	
003b60  f44f7016          MOV      r0,#0x258
003b64  8420              STRH     r0,[r4,#0x20]
;;;6824        cntrl_stat_old=600;
003b66  8460              STRH     r0,[r4,#0x22]
;;;6825        cntrl_stat_new=600;
003b68  86e0              STRH     r0,[r4,#0x36]
                  |L1.15210|
;;;6826   	#ifdef UKU_TELECORE2015
;;;6827   	//cntrl_stat=0;
;;;6828   	//cntrl_stat_old=0;
;;;6829   	//cntrl_stat_new=0;
;;;6830   	#endif
;;;6831        }
;;;6832   
;;;6833   #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;6834   if(ica_cntrl_hndl_cnt)	ica_cntrl_hndl_cnt--;
003b6a  f9b70000          LDRSH    r0,[r7,#0]  ; ica_cntrl_hndl_cnt
003b6e  b110              CBZ      r0,|L1.15222|
003b70  f1a00001          SUB      r0,r0,#1
003b74  8038              STRH     r0,[r7,#0]
                  |L1.15222|
;;;6835   
;;;6836   
;;;6837   
;;;6838   #endif
;;;6839   
;;;6840   
;;;6841   gran(&cntrl_stat,10,1010); 
003b76  48da              LDR      r0,|L1.16096|
003b78  f24032f2          MOV      r2,#0x3f2
003b7c  210a              MOVS     r1,#0xa
003b7e  3816              SUBS     r0,r0,#0x16
003b80  f7fffffe          BL       gran
;;;6842   b1Hz_ch=0;
003b84  7225              STRB     r5,[r4,#8]
                  |L1.15238|
;;;6843   }
003b86  e8bd9ff0          POP      {r4-r12,pc}
;;;6844   #endif
                          ENDP

                  ext_drv PROC
;;;7333   //-----------------------------------------------
;;;7334   void ext_drv(void)
003b8a  e92d5ff0          PUSH     {r4-r12,lr}
;;;7335   {
;;;7336   char i;
;;;7337   
;;;7338   
;;;7339   for(i=0;i<NUMSK;i++)
003b8e  f04f0000          MOV      r0,#0
003b92  4ad9              LDR      r2,|L1.16120|
;;;7340   	{
;;;7341   	#ifdef UKU_MGTS
;;;7342   	if(adc_buff_[sk_buff_RSTKM[i]]<2000)
;;;7343   	#endif
;;;7344   	#ifdef UKU_RSTKM
;;;7345   	if(adc_buff_[sk_buff_RSTKM[i]]<2000)
;;;7346   	#endif
;;;7347   	#ifdef UKU_3U
;;;7348   	if(adc_buff_[sk_buff_3U[i]]<2000)
;;;7349   	#endif
;;;7350   	#ifdef UKU_GLONASS
;;;7351   	if(adc_buff_[sk_buff_GLONASS[i]]<2000)
;;;7352   	#endif
;;;7353   	#ifdef UKU_KONTUR
;;;7354   	if(adc_buff_[sk_buff_KONTUR[i]]<2000)
;;;7355   	#endif
;;;7356   	#ifdef UKU_6U
;;;7357   	if(adc_buff_[sk_buff_6U[i]]<2000)
;;;7358   	#endif
;;;7359   	#ifdef UKU_220
;;;7360   	if(adc_buff_[sk_buff_220[i]]<2000)
;;;7361   	#endif
;;;7362   	#ifdef UKU_220_V2
;;;7363   	if(adc_buff_[sk_buff_220[i]]<2000)
;;;7364   	#endif
;;;7365   	#ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;7366   	if(adc_buff_[sk_buff_220[i]]<2000)
;;;7367   	#endif
;;;7368   	#ifdef UKU_TELECORE2015	
;;;7369   	if(adc_buff_[sk_buff_TELECORE2015[i]]<2000)	 //TODO
;;;7370   	#endif
;;;7371   	#ifdef UKU_TELECORE2017
;;;7372   	if(adc_buff_[sk_buff_TELECORE2015[i]]<2000)	 //TODO
;;;7373   	#endif		
;;;7374   		{
;;;7375   		if(sk_cnt[i]<10)
003b94  4bd7              LDR      r3,|L1.16116|
;;;7376   			{
;;;7377   			sk_cnt[i]++;
;;;7378   			if(sk_cnt[i]>=10)
;;;7379   				{
;;;7380   				sk_stat[i]=ssON;
003b96  4dcf              LDR      r5,|L1.16084|
003b98  f04f0a01          MOV      r10,#1
;;;7381   				}
;;;7382   			}
;;;7383   		else 
;;;7384   			{
;;;7385   			sk_cnt[i]=10;
003b9c  f04f0b0a          MOV      r11,#0xa
003ba0  4606              MOV      r6,r0                 ;7339
003ba2  f9b24000          LDRSH    r4,[r2,#0]            ;7339
003ba6  e025              B        |L1.15348|
                  |L1.15272|
003ba8  49d4              LDR      r1,|L1.16124|
003baa  4fd5              LDR      r7,|L1.16128|
003bac  5c09              LDRB     r1,[r1,r0]            ;7366
003bae  f9371011          LDRSH    r1,[r7,r1,LSL #1]     ;7366
003bb2  f5b16ffa          CMP      r1,#0x7d0             ;7366
003bb6  da0e              BGE      |L1.15318|
003bb8  5619              LDRSB    r1,[r3,r0]            ;7375
003bba  290a              CMP      r1,#0xa               ;7375
003bbc  da08              BGE      |L1.15312|
003bbe  f1010101          ADD      r1,r1,#1              ;7377
003bc2  b249              SXTB     r1,r1                 ;7377
003bc4  5419              STRB     r1,[r3,r0]            ;7377
003bc6  290a              CMP      r1,#0xa               ;7378
003bc8  db11              BLT      |L1.15342|
003bca  f805a000          STRB     r10,[r5,r0]           ;7380
003bce  e00e              B        |L1.15342|
                  |L1.15312|
003bd0  f803b000          STRB     r11,[r3,r0]
003bd4  e00b              B        |L1.15342|
                  |L1.15318|
;;;7386   			}
;;;7387                  
;;;7388   		}
;;;7389   	else
;;;7390   		{
;;;7391   		if(sk_cnt[i]>0)
003bd6  5619              LDRSB    r1,[r3,r0]
003bd8  2900              CMP      r1,#0
003bda  dd07              BLE      |L1.15340|
;;;7392   			{
;;;7393   			sk_cnt[i]--;
003bdc  f1a10101          SUB      r1,r1,#1
003be0  b249              SXTB     r1,r1
003be2  5419              STRB     r1,[r3,r0]
;;;7394   			if(sk_cnt[i]<=0)
003be4  2900              CMP      r1,#0
003be6  dc02              BGT      |L1.15342|
;;;7395   				{
;;;7396   				sk_stat[i]=ssOFF;
003be8  542e              STRB     r6,[r5,r0]
003bea  e000              B        |L1.15342|
                  |L1.15340|
;;;7397   				}
;;;7398   			}
;;;7399   		else 
;;;7400   			{
;;;7401   			sk_cnt[i]=0;
003bec  541e              STRB     r6,[r3,r0]
                  |L1.15342|
003bee  f1000001          ADD      r0,r0,#1              ;7339
003bf2  b2c0              UXTB     r0,r0                 ;7339
                  |L1.15348|
003bf4  42a0              CMP      r0,r4                 ;7339
003bf6  dbd7              BLT      |L1.15272|
;;;7402   			}
;;;7403   		}
;;;7404   	}
;;;7405   
;;;7406   for(i=0;i<NUMSK;i++)
003bf8  f04f0400          MOV      r4,#0
;;;7407   	{
;;;7408   	if(((SK_SIGN[i]==0)&&(sk_stat[i]==ssON))||((SK_SIGN[i])&&(sk_stat[i]==ssOFF)) )
;;;7409   		{
;;;7410   		if(sk_av_cnt[i]<10)
003bfc  f8df9304          LDR      r9,|L1.16132|
;;;7411   			{
;;;7412   			sk_av_cnt[i]++;
;;;7413   			if(sk_av_cnt[i]>=10)
;;;7414   				{
;;;7415   				sk_av_stat[i]=sasON;
003c00  4fc1              LDR      r7,|L1.16136|
;;;7416   				}
;;;7417   			}
;;;7418   		else 
;;;7419   			{
;;;7420   			sk_av_cnt[i]=10;
;;;7421   			}
;;;7422   		}
;;;7423   	else
;;;7424   		{
;;;7425   		if(sk_av_cnt[i]>=0)
;;;7426   			{
;;;7427   			sk_av_cnt[i]--;
;;;7428   			if(sk_av_cnt[i]<=0)
;;;7429   				{
;;;7430   				sk_av_stat[i]=sasOFF;
;;;7431   				}
;;;7432   			}
;;;7433   		else 
;;;7434   			{
;;;7435   			sk_av_cnt[i]=0;
;;;7436   			}
;;;7437   		}
;;;7438   
;;;7439   #ifndef UKU_KONTUR
;;;7440   	if(sk_av_stat_old[i]!=sk_av_stat[i])
003c02  f8df8308          LDR      r8,|L1.16140|
003c06  e083              B        |L1.15632|
                  |L1.15368|
003c08  48c1              LDR      r0,|L1.16144|
003c0a  f9300014          LDRSH    r0,[r0,r4,LSL #1]     ;7408
003c0e  b910              CBNZ     r0,|L1.15382|
003c10  5d29              LDRB     r1,[r5,r4]            ;7408
003c12  2901              CMP      r1,#1                 ;7408
003c14  d00f              BEQ      |L1.15414|
                  |L1.15382|
003c16  b108              CBZ      r0,|L1.15388|
003c18  5d28              LDRB     r0,[r5,r4]            ;7408
003c1a  b160              CBZ      r0,|L1.15414|
                  |L1.15388|
003c1c  f9190004          LDRSB    r0,[r9,r4]            ;7425
003c20  2800              CMP      r0,#0                 ;7425
003c22  db19              BLT      |L1.15448|
003c24  f1a00001          SUB      r0,r0,#1              ;7427
003c28  b240              SXTB     r0,r0                 ;7427
003c2a  f8090004          STRB     r0,[r9,r4]            ;7427
003c2e  2800              CMP      r0,#0                 ;7428
003c30  dc14              BGT      |L1.15452|
003c32  553e              STRB     r6,[r7,r4]            ;7430
003c34  e012              B        |L1.15452|
                  |L1.15414|
003c36  f9190004          LDRSB    r0,[r9,r4]            ;7410
003c3a  280a              CMP      r0,#0xa               ;7410
003c3c  da09              BGE      |L1.15442|
003c3e  f1000001          ADD      r0,r0,#1              ;7412
003c42  b240              SXTB     r0,r0                 ;7412
003c44  f8090004          STRB     r0,[r9,r4]            ;7412
003c48  280a              CMP      r0,#0xa               ;7413
003c4a  db07              BLT      |L1.15452|
003c4c  f807a004          STRB     r10,[r7,r4]           ;7415
003c50  e004              B        |L1.15452|
                  |L1.15442|
003c52  f809b004          STRB     r11,[r9,r4]           ;7420
003c56  e001              B        |L1.15452|
                  |L1.15448|
003c58  f8096004          STRB     r6,[r9,r4]            ;7435
                  |L1.15452|
003c5c  f8181004          LDRB     r1,[r8,r4]
003c60  5d38              LDRB     r0,[r7,r4]
003c62  4281              CMP      r1,r0
003c64  d04e              BEQ      |L1.15620|
;;;7441   		{
;;;7442   		plazma_sk++;
003c66  4a9e              LDR      r2,|L1.16096|
003c68  3a36              SUBS     r2,r2,#0x36
003c6a  8e91              LDRH     r1,[r2,#0x34]  ; plazma_sk
003c6c  f1010101          ADD      r1,r1,#1
003c70  8691              STRH     r1,[r2,#0x34]
;;;7443   		if(sk_av_stat[i]==sasON)
003c72  2801              CMP      r0,#1
003c74  d007              BEQ      |L1.15494|
;;;7444   			{
;;;7445   			if(i==0)snmp_trap_send("SK #1 Alarm",15,1,1);
;;;7446   			else if(i==1)
;;;7447   				{
;;;7448   				#ifndef UKU_TELEKORE2017
;;;7449   				snmp_trap_send("SK #2 Alarm",15,2,1);
;;;7450   				#endif
;;;7451   				#ifdef UKU_TELEKORE2017
;;;7452   				snmp_trap_send("Door open",15,2,1);
;;;7453   				#endif
;;;7454   				}
;;;7455   			else if(i==2)snmp_trap_send("SK #3 Alarm",15,3,1);
;;;7456   			else if(i==3)snmp_trap_send("SK #4 Alarm",15,4,1);
;;;7457   			}
;;;7458   		else 
;;;7459   			{
;;;7460   			if(i==0)snmp_trap_send("SK #1 Alarm is off",15,1,0);
003c76  b354              CBZ      r4,|L1.15566|
;;;7461   			else if(i==1)
003c78  2c01              CMP      r4,#1
003c7a  d02f              BEQ      |L1.15580|
;;;7462   				{
;;;7463   				#ifndef UKU_TELEKORE2017
;;;7464   				snmp_trap_send("SK #2 Alarm is off",15,2,0);
;;;7465   				#endif
;;;7466   				#ifdef UKU_TELEKORE2017
;;;7467   				snmp_trap_send("Door open clear",15,2,0);
;;;7468   				#endif
;;;7469   				}
;;;7470   			else if(i==2)snmp_trap_send("SK #3 Alarm is off",15,3,0);
003c7c  2c02              CMP      r4,#2
003c7e  d034              BEQ      |L1.15594|
;;;7471   			else if(i==3)snmp_trap_send("SK #4 Alarm is off",15,4,0);
003c80  2c03              CMP      r4,#3
003c82  d039              BEQ      |L1.15608|
003c84  e03e              B        |L1.15620|
                  |L1.15494|
003c86  b134              CBZ      r4,|L1.15510|
003c88  2c01              CMP      r4,#1                 ;7446
003c8a  d00b              BEQ      |L1.15524|
003c8c  2c02              CMP      r4,#2                 ;7455
003c8e  d010              BEQ      |L1.15538|
003c90  2c03              CMP      r4,#3                 ;7456
003c92  d015              BEQ      |L1.15552|
003c94  e036              B        |L1.15620|
                  |L1.15510|
003c96  2301              MOVS     r3,#1                 ;7445
003c98  461a              MOV      r2,r3                 ;7445
003c9a  210f              MOVS     r1,#0xf               ;7445
003c9c  a09d              ADR      r0,|L1.16148|
003c9e  f7fffffe          BL       snmp_trap_send
003ca2  e02f              B        |L1.15620|
                  |L1.15524|
003ca4  2301              MOVS     r3,#1                 ;7449
003ca6  2202              MOVS     r2,#2                 ;7449
003ca8  210f              MOVS     r1,#0xf               ;7449
003caa  a09d              ADR      r0,|L1.16160|
003cac  f7fffffe          BL       snmp_trap_send
003cb0  e028              B        |L1.15620|
                  |L1.15538|
003cb2  2301              MOVS     r3,#1                 ;7455
003cb4  2203              MOVS     r2,#3                 ;7455
003cb6  210f              MOVS     r1,#0xf               ;7455
003cb8  a09c              ADR      r0,|L1.16172|
003cba  f7fffffe          BL       snmp_trap_send
003cbe  e021              B        |L1.15620|
                  |L1.15552|
003cc0  2301              MOVS     r3,#1                 ;7456
003cc2  2204              MOVS     r2,#4                 ;7456
003cc4  210f              MOVS     r1,#0xf               ;7456
003cc6  a09c              ADR      r0,|L1.16184|
003cc8  f7fffffe          BL       snmp_trap_send
003ccc  e01a              B        |L1.15620|
                  |L1.15566|
003cce  2300              MOVS     r3,#0                 ;7460
003cd0  2201              MOVS     r2,#1                 ;7460
003cd2  210f              MOVS     r1,#0xf               ;7460
003cd4  a09b              ADR      r0,|L1.16196|
003cd6  f7fffffe          BL       snmp_trap_send
003cda  e013              B        |L1.15620|
                  |L1.15580|
003cdc  2300              MOVS     r3,#0                 ;7464
003cde  2202              MOVS     r2,#2                 ;7464
003ce0  210f              MOVS     r1,#0xf               ;7464
003ce2  a09d              ADR      r0,|L1.16216|
003ce4  f7fffffe          BL       snmp_trap_send
003ce8  e00c              B        |L1.15620|
                  |L1.15594|
003cea  2300              MOVS     r3,#0                 ;7470
003cec  2203              MOVS     r2,#3                 ;7470
003cee  210f              MOVS     r1,#0xf               ;7470
003cf0  a09e              ADR      r0,|L1.16236|
003cf2  f7fffffe          BL       snmp_trap_send
003cf6  e005              B        |L1.15620|
                  |L1.15608|
003cf8  2300              MOVS     r3,#0
003cfa  2204              MOVS     r2,#4
003cfc  210f              MOVS     r1,#0xf
003cfe  a0a0              ADR      r0,|L1.16256|
003d00  f7fffffe          BL       snmp_trap_send
                  |L1.15620|
;;;7472   			}
;;;7473   	 	}
;;;7474   #endif
;;;7475   
;;;7476   #ifdef UKU_KONTUR
;;;7477   	if(sk_av_stat_old[i]!=sk_av_stat[i])
;;;7478   		{
;;;7479   		plazma_sk++;
;;;7480   		if(sk_av_stat[i]==sasON)
;;;7481   			{
;;;7482   			if(i==0)snmp_trap_send("Door is opened",15,1,1);
;;;7483   			else if(i==1)snmp_trap_send("Smoke Alarm",15,2,1);
;;;7484   			else if(i==2)snmp_trap_send("Shock Sensor Alarm",15,3,1);
;;;7485   			else if(i==3)snmp_trap_send("SK #4 Alarm",15,4,1);
;;;7486   			}
;;;7487   		else 
;;;7488   			{
;;;7489   			if(i==0)snmp_trap_send("Door is closed",15,1,0);
;;;7490   			else if(i==1)snmp_trap_send("Smoke Alarm is off",15,2,0);
;;;7491   			else if(i==2)snmp_trap_send("Shock Sensor Alarm is off",15,3,0);
;;;7492   			else if(i==3)snmp_trap_send("SK #4 Alarm is off",15,4,0);
;;;7493   			}
;;;7494   	 	}
;;;7495   #endif
;;;7496   	sk_av_stat_old[i]=sk_av_stat[i];
003d04  5d38              LDRB     r0,[r7,r4]
003d06  f8080004          STRB     r0,[r8,r4]
003d0a  f1040401          ADD      r4,r4,#1              ;7406
003d0e  b2e4              UXTB     r4,r4                 ;7406
                  |L1.15632|
003d10  4879              LDR      r0,|L1.16120|
003d12  f9b00000          LDRSH    r0,[r0,#0]            ;7406  ; NUMSK
003d16  4284              CMP      r4,r0                 ;7406
003d18  f6ffaf76          BLT      |L1.15368|
;;;7497   	}
;;;7498   }
003d1c  e733              B        |L1.15238|
;;;7499   
                          ENDP

                  zar_superviser_start PROC
;;;7536   //-----------------------------------------------
;;;7537   void zar_superviser_start(void)
003d1e  4a9d              LDR      r2,|L1.16276|
;;;7538   {
;;;7539   sign_U[0]=1;
003d20  f04f0001          MOV      r0,#1
003d24  7010              STRB     r0,[r2,#0]
;;;7540   sign_I[0]=1;
003d26  499c              LDR      r1,|L1.16280|
003d28  7008              STRB     r0,[r1,#0]
;;;7541   sign_U[1]=1;
003d2a  7050              STRB     r0,[r2,#1]
;;;7542   sign_I[1]=1;
003d2c  7048              STRB     r0,[r1,#1]
;;;7543   
;;;7544   }
003d2e  4770              BX       lr
;;;7545   
                          ENDP

                  zar_superviser_drv PROC
;;;7501   //-----------------------------------------------
;;;7502   void zar_superviser_drv(void)
003d30  e92d5ff0          PUSH     {r4-r12,lr}
;;;7503   {
;;;7504   
;;;7505   if(((bat[0]._Ub>u_necc_up) || (bat[0]._Ub<u_necc_dn))&&(main_kb_cnt<((TBAT*60)-30))&&(main_kb_cnt>((TBAT*60)-150))) sign_U[0]=0;
003d34  489a              LDR      r0,|L1.16288|
003d36  f8df926c          LDR      r9,|L1.16292|
003d3a  f8df8260          LDR      r8,|L1.16284|
003d3e  f9b0c000          LDRSH    r12,[r0,#0]  ; u_necc_up
003d42  f9b90000          LDRSH    r0,[r9,#0]
003d46  4c66              LDR      r4,|L1.16096|
003d48  ebc01100          RSB      r1,r0,r0,LSL #4
003d4c  3c36              SUBS     r4,r4,#0x36
003d4e  f9b87002          LDRSH    r7,[r8,#2]  ; bat
003d52  f06f0a1d          MVN      r10,#0x1d
003d56  f06f0b95          MVN      r11,#0x95
003d5a  2500              MOVS     r5,#0
003d5c  4e8d              LDR      r6,|L1.16276|
003d5e  f9b40040          LDRSH    r0,[r4,#0x40]
003d62  eb0a0281          ADD      r2,r10,r1,LSL #2
003d66  eb0b0381          ADD      r3,r11,r1,LSL #2
003d6a  4567              CMP      r7,r12
003d6c  dc05              BGT      |L1.15738|
003d6e  f8dfc238          LDR      r12,|L1.16296|
003d72  f9bcc000          LDRSH    r12,[r12,#0]  ; u_necc_dn
003d76  4567              CMP      r7,r12
003d78  da04              BGE      |L1.15748|
                  |L1.15738|
003d7a  4282              CMP      r2,r0
003d7c  dd02              BLE      |L1.15748|
003d7e  4283              CMP      r3,r0
003d80  da00              BGE      |L1.15748|
003d82  7035              STRB     r5,[r6,#0]
                  |L1.15748|
;;;7506   
;;;7507   if(((bat[0]._Ib>(2*IKB)) || (bat[0]._Ib<(-IKB*2))) &&(main_kb_cnt<((TBAT*60)-30))&&(main_kb_cnt>((TBAT*60)-150))) sign_I[0]=0;
003d84  4f89              LDR      r7,|L1.16300|
003d86  f9b8c008          LDRSH    r12,[r8,#8]  ; bat
003d8a  f9b7e000          LDRSH    lr,[r7,#0]  ; IKB
003d8e  4f82              LDR      r7,|L1.16280|
003d90  ebbc0f4e          CMP      r12,lr,LSL #1
003d94  dc04              BGT      |L1.15776|
003d96  f1ce0e00          RSB      lr,lr,#0
003d9a  ebbc0f4e          CMP      r12,lr,LSL #1
003d9e  da04              BGE      |L1.15786|
                  |L1.15776|
003da0  4282              CMP      r2,r0
003da2  dd02              BLE      |L1.15786|
003da4  4283              CMP      r3,r0
003da6  da00              BGE      |L1.15786|
003da8  703d              STRB     r5,[r7,#0]
                  |L1.15786|
;;;7508   																 
;;;7509   if((main_kb_cnt==((TBAT*60)-10)) &&(spc_stat==spcOFF))
003daa  f06f0209          MVN      r2,#9
003dae  eb020181          ADD      r1,r2,r1,LSL #2
003db2  4281              CMP      r1,r0
003db4  d120              BNE      |L1.15864|
003db6  7d20              LDRB     r0,[r4,#0x14]  ; spc_stat
003db8  b9f0              CBNZ     r0,|L1.15864|
;;;7510   	{
;;;7511   	if((sign_U[0]==1) && (sign_I[0]==1) && (lc640_read_int(EE_BAT1_ZAR_CNT)!=BAT_C_REAL[0]) && (NUMBAT) && (!(bat[0]._av&1)))
003dba  7830              LDRB     r0,[r6,#0]  ; sign_U
003dbc  2801              CMP      r0,#1
003dbe  d11b              BNE      |L1.15864|
003dc0  7838              LDRB     r0,[r7,#0]  ; sign_I
003dc2  2801              CMP      r0,#1
003dc4  d118              BNE      |L1.15864|
003dc6  f44f70d6          MOV      r0,#0x1ac
003dca  f7fffffe          BL       lc640_read_int
003dce  4978              LDR      r1,|L1.16304|
003dd0  f9b11000          LDRSH    r1,[r1,#0]  ; BAT_C_REAL
003dd4  4288              CMP      r0,r1
003dd6  d00f              BEQ      |L1.15864|
003dd8  4876              LDR      r0,|L1.16308|
003dda  8800              LDRH     r0,[r0,#0]  ; NUMBAT
003ddc  b160              CBZ      r0,|L1.15864|
003dde  f898003d          LDRB     r0,[r8,#0x3d]  ; bat
003de2  07c0              LSLS     r0,r0,#31
003de4  d108              BNE      |L1.15864|
;;;7512   		{
;;;7513   		lc640_write_int(EE_BAT1_ZAR_CNT,BAT_C_REAL[0]);
003de6  f44f70d6          MOV      r0,#0x1ac
003dea  f7fffffe          BL       lc640_write_int
;;;7514   		superviser_cnt++;
003dee  4872              LDR      r0,|L1.16312|
003df0  7801              LDRB     r1,[r0,#0]  ; superviser_cnt
003df2  f1010101          ADD      r1,r1,#1
003df6  7001              STRB     r1,[r0,#0]
                  |L1.15864|
;;;7515   		}
;;;7516   	
;;;7517   	}
;;;7518   
;;;7519   if(((bat[0]._Ub>u_necc_up) || (bat[1]._Ub<u_necc_dn))&&(main_kb_cnt<((TBAT*60)-30))&&(main_kb_cnt>((TBAT*60)-150))) sign_U[1]=0;
003df8  4869              LDR      r0,|L1.16288|
003dfa  f9b81002          LDRSH    r1,[r8,#2]  ; bat
003dfe  f9b00000          LDRSH    r0,[r0,#0]  ; u_necc_up
003e02  4281              CMP      r1,r0
003e04  dc06              BGT      |L1.15892|
003e06  4868              LDR      r0,|L1.16296|
003e08  f9b8104e          LDRSH    r1,[r8,#0x4e]  ; bat
003e0c  f9b00000          LDRSH    r0,[r0,#0]  ; u_necc_dn
003e10  4281              CMP      r1,r0
003e12  da0e              BGE      |L1.15922|
                  |L1.15892|
003e14  f9b90000          LDRSH    r0,[r9,#0]  ; TBAT
003e18  f9b41040          LDRSH    r1,[r4,#0x40]  ; main_kb_cnt
003e1c  ebc01000          RSB      r0,r0,r0,LSL #4
003e20  eb0a0280          ADD      r2,r10,r0,LSL #2
003e24  428a              CMP      r2,r1
003e26  dd04              BLE      |L1.15922|
003e28  eb0b0080          ADD      r0,r11,r0,LSL #2
003e2c  4288              CMP      r0,r1
003e2e  da00              BGE      |L1.15922|
003e30  7075              STRB     r5,[r6,#1]
                  |L1.15922|
;;;7520   
;;;7521   if(((bat[1]._Ib>(2*IKB)) || (bat[1]._Ib<(-IKB*2))) &&(main_kb_cnt<((TBAT*60)-30))&&(main_kb_cnt>((TBAT*60)-150))) sign_I[1]=0;
003e32  495e              LDR      r1,|L1.16300|
003e34  f9b80054          LDRSH    r0,[r8,#0x54]  ; bat
003e38  f9b11000          LDRSH    r1,[r1,#0]  ; IKB
003e3c  ebb00f41          CMP      r0,r1,LSL #1
003e40  dc03              BGT      |L1.15946|
003e42  4249              RSBS     r1,r1,#0
003e44  ebb00f41          CMP      r0,r1,LSL #1
003e48  da0e              BGE      |L1.15976|
                  |L1.15946|
003e4a  f9b90000          LDRSH    r0,[r9,#0]  ; TBAT
003e4e  f9b41040          LDRSH    r1,[r4,#0x40]  ; main_kb_cnt
003e52  ebc01000          RSB      r0,r0,r0,LSL #4
003e56  eb0a0280          ADD      r2,r10,r0,LSL #2
003e5a  428a              CMP      r2,r1
003e5c  dd04              BLE      |L1.15976|
003e5e  eb0b0080          ADD      r0,r11,r0,LSL #2
003e62  4288              CMP      r0,r1
003e64  da00              BGE      |L1.15976|
003e66  707d              STRB     r5,[r7,#1]
                  |L1.15976|
;;;7522   																 
;;;7523   if((main_kb_cnt==((TBAT*60)-10)) &&(spc_stat==spcOFF))
003e68  f9b90000          LDRSH    r0,[r9,#0]  ; TBAT
003e6c  ebc01100          RSB      r1,r0,r0,LSL #4
003e70  f06f0009          MVN      r0,#9
003e74  eb000081          ADD      r0,r0,r1,LSL #2
003e78  f9b41040          LDRSH    r1,[r4,#0x40]  ; main_kb_cnt
003e7c  4288              CMP      r0,r1
003e7e  d121              BNE      |L1.16068|
003e80  7d20              LDRB     r0,[r4,#0x14]  ; spc_stat
003e82  b9f8              CBNZ     r0,|L1.16068|
;;;7524   	{
;;;7525   	if((sign_U[1]==1) && (sign_I[1]==1) && (lc640_read_int(EE_BAT2_ZAR_CNT)!=BAT_C_REAL[1]) && (NUMBAT==2) && (!(bat[1]._av&1)))
003e84  7870              LDRB     r0,[r6,#1]  ; sign_U
003e86  2801              CMP      r0,#1
003e88  d11c              BNE      |L1.16068|
003e8a  7878              LDRB     r0,[r7,#1]  ; sign_I
003e8c  2801              CMP      r0,#1
003e8e  d119              BNE      |L1.16068|
003e90  f44f75e5          MOV      r5,#0x1ca
003e94  4628              MOV      r0,r5
003e96  f7fffffe          BL       lc640_read_int
003e9a  4945              LDR      r1,|L1.16304|
003e9c  f9b11002          LDRSH    r1,[r1,#2]  ; BAT_C_REAL
003ea0  4288              CMP      r0,r1
003ea2  d00f              BEQ      |L1.16068|
003ea4  4843              LDR      r0,|L1.16308|
003ea6  8800              LDRH     r0,[r0,#0]  ; NUMBAT
003ea8  2802              CMP      r0,#2
003eaa  d10b              BNE      |L1.16068|
003eac  f8980089          LDRB     r0,[r8,#0x89]  ; bat
003eb0  07c0              LSLS     r0,r0,#31
003eb2  d107              BNE      |L1.16068|
;;;7526   		{
;;;7527   		lc640_write_int(EE_BAT2_ZAR_CNT,BAT_C_REAL[1]);
003eb4  4628              MOV      r0,r5
003eb6  f7fffffe          BL       lc640_write_int
;;;7528   		superviser_cnt++;
003eba  483f              LDR      r0,|L1.16312|
003ebc  7801              LDRB     r1,[r0,#0]  ; superviser_cnt
003ebe  f1010101          ADD      r1,r1,#1
003ec2  7001              STRB     r1,[r0,#0]
                  |L1.16068|
;;;7529   		}
;;;7530   	
;;;7531   	}
;;;7532   
;;;7533   if(main_kb_cnt==((TBAT*60)-2)) zar_superviser_start();
003ec4  f9b90000          LDRSH    r0,[r9,#0]  ; TBAT
003ec8  ebc01000          RSB      r0,r0,r0,LSL #4
003ecc  e076              B        |L1.16316|
003ece  0000              DCW      0x0000
                  |L1.16080|
                          DCD      hv_vz_stat
                  |L1.16084|
                          DCD      sk_stat
                  |L1.16088|
                          DCD      sk_stat_old
                  |L1.16092|
                          DCD      VZ_KIND
                  |L1.16096|
                          DCD      ||area_number.23||+0x36
                  |L1.16100|
                          DCD      ICA_EN
                  |L1.16104|
                          DCD      ica_cntrl_hndl
                  |L1.16108|
                          DCD      ica_u_necc
                  |L1.16112|
                          DCD      NUMIST
                  |L1.16116|
                          DCD      sk_cnt
                  |L1.16120|
                          DCD      NUMSK
                  |L1.16124|
                          DCD      ||area_number.17||
                  |L1.16128|
                          DCD      ||.bss||+0x400
                  |L1.16132|
                          DCD      sk_av_cnt
                  |L1.16136|
                          DCD      sk_av_stat
                  |L1.16140|
                          DCD      sk_av_stat_old
                  |L1.16144|
                          DCD      SK_SIGN
                  |L1.16148|
003f14  534b2023          DCB      "SK #1 Alarm",0
003f18  3120416c
003f1c  61726d00
                  |L1.16160|
003f20  534b2023          DCB      "SK #2 Alarm",0
003f24  3220416c
003f28  61726d00
                  |L1.16172|
003f2c  534b2023          DCB      "SK #3 Alarm",0
003f30  3320416c
003f34  61726d00
                  |L1.16184|
003f38  534b2023          DCB      "SK #4 Alarm",0
003f3c  3420416c
003f40  61726d00
                  |L1.16196|
003f44  534b2023          DCB      "SK #1 Alarm is off",0
003f48  3120416c
003f4c  61726d20
003f50  6973206f
003f54  666600  
003f57  00                DCB      0
                  |L1.16216|
003f58  534b2023          DCB      "SK #2 Alarm is off",0
003f5c  3220416c
003f60  61726d20
003f64  6973206f
003f68  666600  
003f6b  00                DCB      0
                  |L1.16236|
003f6c  534b2023          DCB      "SK #3 Alarm is off",0
003f70  3320416c
003f74  61726d20
003f78  6973206f
003f7c  666600  
003f7f  00                DCB      0
                  |L1.16256|
003f80  534b2023          DCB      "SK #4 Alarm is off",0
003f84  3420416c
003f88  61726d20
003f8c  6973206f
003f90  666600  
003f93  00                DCB      0
                  |L1.16276|
                          DCD      sign_U
                  |L1.16280|
                          DCD      sign_I
                  |L1.16284|
                          DCD      bat
                  |L1.16288|
                          DCD      u_necc_up
                  |L1.16292|
                          DCD      TBAT
                  |L1.16296|
                          DCD      u_necc_dn
                  |L1.16300|
                          DCD      IKB
                  |L1.16304|
                          DCD      BAT_C_REAL
                  |L1.16308|
                          DCD      NUMBAT
                  |L1.16312|
                          DCD      superviser_cnt
                  |L1.16316|
003fbc  f06f0101          MVN      r1,#1
003fc0  eb010080          ADD      r0,r1,r0,LSL #2
003fc4  f9b41040          LDRSH    r1,[r4,#0x40]  ; main_kb_cnt
003fc8  4288              CMP      r0,r1
003fca  d102              BNE      |L1.16338|
003fcc  e8bd5ff0          POP      {r4-r12,lr}
003fd0  e7fe              B        zar_superviser_start
                  |L1.16338|
;;;7534   }
003fd2  e5d8              B        |L1.15238|
;;;7535   
                          ENDP

                  npn_hndl PROC
;;;7546   //-----------------------------------------------
;;;7547   void npn_hndl(void)
003fd4  e92d03f0          PUSH     {r4-r9}
;;;7548   {
;;;7549   if(NPN_OUT!=npnoOFF)
003fd8  48ff              LDR      r0,|L1.17368|
003fda  f04f0c00          MOV      r12,#0
;;;7550   	{
;;;7551   /*	if(NPN_SIGN==npnsAVNET)
;;;7552   		{
;;;7553   		if(net_av==1)
;;;7554   			{
;;;7555   			if(npn_tz_cnt<TZNPN)
;;;7556   				{
;;;7557   				npn_tz_cnt++;
;;;7558   				if(npn_tz_cnt==TZNPN)
;;;7559   					{
;;;7560   					npn_stat=npnsOFF;
;;;7561   					}
;;;7562   				}
;;;7563   			}
;;;7564   		else
;;;7565   			{
;;;7566   			if(npn_tz_cnt)
;;;7567   				{
;;;7568   				npn_tz_cnt--;
;;;7569   				if(npn_tz_cnt==0)
;;;7570   					{
;;;7571   					npn_stat=npnsON;
;;;7572   					}
;;;7573   				}
;;;7574   			}
;;;7575   		}*/
;;;7576   /*	if(NPN_SIGN==npnsULOAD)
;;;7577   		{
;;;7578   		if(load_U<UONPN)
;;;7579   			{
;;;7580   			if(npn_tz_cnt<TZNPN)
;;;7581   				{
;;;7582   				npn_tz_cnt++;
;;;7583   				if(npn_tz_cnt==TZNPN)
;;;7584   					{
;;;7585   					npn_stat=npnsOFF;
;;;7586   					}
;;;7587   				}
;;;7588   			}
;;;7589   		else if(load_U>UVNPN)
;;;7590   			{
;;;7591   			if(npn_tz_cnt)
;;;7592   				{
;;;7593   				npn_tz_cnt--;
;;;7594   				if(npn_tz_cnt==0)
;;;7595   					{
;;;7596   					npn_stat=npnsON;
;;;7597   					}
;;;7598   				}
;;;7599   			}
;;;7600   		}*/
;;;7601   
;;;7602   	if((load_U<UONPN)&&((net_Ua<UMN)||(net_Ub<UMN)||(net_Uc<UMN)))
;;;7603   		{
;;;7604   		if(npn_tz_cnt<TZNPN)
;;;7605   			{
;;;7606   			npn_tz_cnt++;
;;;7607   			if(npn_tz_cnt==TZNPN)
;;;7608   				{
;;;7609   				npn_stat=npnsOFF;
;;;7610   				}
;;;7611   			}
;;;7612   		}
;;;7613   	else if((load_U>UVNPN)&&(net_Ua>UMN)&&(net_Ub>UMN)&&(net_Uc>UMN))
;;;7614   		{
;;;7615   		if(npn_tz_cnt)
;;;7616   			{
;;;7617   			npn_tz_cnt--;
;;;7618   			if(npn_tz_cnt==0)
;;;7619   				{
;;;7620   				npn_stat=npnsON;
003fde  f04f0801          MOV      r8,#1
003fe2  7800              LDRB     r0,[r0,#0]            ;7549  ; NPN_OUT
003fe4  4ffd              LDR      r7,|L1.17372|
003fe6  4efe              LDR      r6,|L1.17376|
003fe8  b3e8              CBZ      r0,|L1.16486|
003fea  48fe              LDR      r0,|L1.17380|
003fec  4639              MOV      r1,r7                 ;7604
003fee  f9b05000          LDRSH    r5,[r0,#0]            ;7602  ; load_U
003ff2  48fd              LDR      r0,|L1.17384|
003ff4  f9b11000          LDRSH    r1,[r1,#0]            ;7604
003ff8  f9b09000          LDRSH    r9,[r0,#0]            ;7602  ; UONPN
003ffc  48fb              LDR      r0,|L1.17388|
003ffe  454d              CMP      r5,r9                 ;7602
004000  f9b02000          LDRSH    r2,[r0,#0]            ;7602
004004  48fa              LDR      r0,|L1.17392|
004006  f9b03000          LDRSH    r3,[r0,#0]            ;7602
00400a  48fa              LDR      r0,|L1.17396|
00400c  f9b04000          LDRSH    r4,[r0,#0]            ;7602
004010  48f9              LDR      r0,|L1.17400|
004012  f9b00000          LDRSH    r0,[r0,#0]            ;7602
004016  da13              BGE      |L1.16448|
004018  4282              CMP      r2,r0                 ;7602
00401a  db03              BLT      |L1.16420|
00401c  4283              CMP      r3,r0                 ;7602
00401e  db01              BLT      |L1.16420|
004020  4284              CMP      r4,r0                 ;7602
004022  da0d              BGE      |L1.16448|
                  |L1.16420|
004024  48f5              LDR      r0,|L1.17404|
004026  f9b02000          LDRSH    r2,[r0,#0]            ;7604  ; TZNPN
00402a  4291              CMP      r1,r2                 ;7604
00402c  da23              BGE      |L1.16502|
00402e  f1010101          ADD      r1,r1,#1              ;7606
004032  b208              SXTH     r0,r1                 ;7606
004034  8038              STRH     r0,[r7,#0]            ;7606
004036  4290              CMP      r0,r2                 ;7607
004038  d11d              BNE      |L1.16502|
00403a  f886c000          STRB     r12,[r6,#0]           ;7609
00403e  e01a              B        |L1.16502|
                  |L1.16448|
004040  f8dfc3bc          LDR      r12,|L1.17408|
004044  f9bcc000          LDRSH    r12,[r12,#0]          ;7613  ; UVNPN
004048  4565              CMP      r5,r12                ;7613
00404a  dd14              BLE      |L1.16502|
00404c  4282              CMP      r2,r0                 ;7613
00404e  dd12              BLE      |L1.16502|
004050  4283              CMP      r3,r0                 ;7613
004052  dd10              BLE      |L1.16502|
004054  4284              CMP      r4,r0                 ;7613
004056  dd0e              BLE      |L1.16502|
004058  b169              CBZ      r1,|L1.16502|
00405a  f1a10101          SUB      r1,r1,#1              ;7617
00405e  b208              SXTH     r0,r1                 ;7617
004060  8038              STRH     r0,[r7,#0]            ;7617
004062  b940              CBNZ     r0,|L1.16502|
004064  e000              B        |L1.16488|
                  |L1.16486|
004066  e002              B        |L1.16494|
                  |L1.16488|
004068  f8868000          STRB     r8,[r6,#0]
00406c  e003              B        |L1.16502|
                  |L1.16494|
;;;7621   				}
;;;7622   			}
;;;7623   		}
;;;7624   	}
;;;7625   else
;;;7626   	{
;;;7627   	npn_tz_cnt=0;
00406e  f8a7c000          STRH     r12,[r7,#0]
;;;7628   	npn_stat=npnsON;
004072  f8868000          STRB     r8,[r6,#0]
                  |L1.16502|
;;;7629   	}
;;;7630   
;;;7631   if(npn_stat==npnsOFF) mess_send(MESS2RELE_HNDL,PARAM_RELE_NPN,1,15);
004076  7830              LDRB     r0,[r6,#0]  ; npn_stat
004078  2800              CMP      r0,#0
00407a  d107              BNE      |L1.16524|
00407c  e8bd03f0          POP      {r4-r9}
004080  230f              MOVS     r3,#0xf
004082  2201              MOVS     r2,#1
004084  216e              MOVS     r1,#0x6e
004086  20d2              MOVS     r0,#0xd2
004088  f7ffbffe          B.W      mess_send
                  |L1.16524|
;;;7632   
;;;7633   
;;;7634   }
00408c  e8bd03f0          POP      {r4-r9}
004090  4770              BX       lr
;;;7635   
                          ENDP

                  speedChargeStartStop PROC
;;;7799   //-----------------------------------------------
;;;7800   void speedChargeStartStop(void)
004092  b508              PUSH     {r3,lr}
;;;7801   {
;;;7802   /*if(speedChIsOn)
;;;7803   	{
;;;7804   	speedChIsOn=0;
;;;7805   	}
;;;7806   
;;;7807   else
;;;7808   	{
;;;7809   	if(speedChrgBlckStat==0)
;;;7810   		{
;;;7811   		speedChIsOn=1;
;;;7812   		speedChTimeCnt=0;
;;;7813   		}
;;;7814   	else
;;;7815   		{
;;;7816   		show_mess(	"     Óñêîðåííûé     ",
;;;7817   	          		"       çàðÿä        ",
;;;7818   	          		"    çàáëîêèðîâàí!   ",
;;;7819   	          		"                    ",2000);	 
;;;7820   		}
;;;7821   	}*/
;;;7822   
;;;7823   if(sp_ch_stat!=scsOFF)
004094  48db              LDR      r0,|L1.17412|
004096  7801              LDRB     r1,[r0,#0]  ; sp_ch_stat
004098  b119              CBZ      r1,|L1.16546|
;;;7824   	{
;;;7825   	sp_ch_stat=scsOFF;
00409a  f04f0100          MOV      r1,#0
00409e  7001              STRB     r1,[r0,#0]
;;;7826   	}
;;;7827   
;;;7828   else
;;;7829   	{
;;;7830   	if(speedChrgBlckStat==0)
;;;7831   		{
;;;7832   		sp_ch_stat=scsSTEP1;
;;;7833   		}
;;;7834   	else 
;;;7835   		{
;;;7836   		show_mess(	"     Óñêîðåííûé     ",
;;;7837   	          		"       çàðÿä        ",
;;;7838   	          		"    çàáëîêèðîâàí!   ",
;;;7839   	          		"                    ",2000);
;;;7840   		}
;;;7841   	}
;;;7842   }
0040a0  bd08              POP      {r3,pc}
                  |L1.16546|
0040a2  49d9              LDR      r1,|L1.17416|
0040a4  8809              LDRH     r1,[r1,#0]            ;7830  ; speedChrgBlckStat
0040a6  b149              CBZ      r1,|L1.16572|
0040a8  f44f60fa          MOV      r0,#0x7d0             ;7836
0040ac  9000              STR      r0,[sp,#0]            ;7836
0040ae  a3d7              ADR      r3,|L1.17420|
0040b0  a2dc              ADR      r2,|L1.17444|
0040b2  a1e2              ADR      r1,|L1.17468|
0040b4  a0e7              ADR      r0,|L1.17492|
0040b6  f7fffffe          BL       show_mess
0040ba  bd08              POP      {r3,pc}
                  |L1.16572|
0040bc  f04f0101          MOV      r1,#1                 ;7832
0040c0  7001              STRB     r1,[r0,#0]            ;7832
0040c2  bd08              POP      {r3,pc}
;;;7843   
                          ENDP

                  speedChargeHndl PROC
;;;7637   //-----------------------------------------------
;;;7638   void speedChargeHndl(void)
0040c4  e92d4ff8          PUSH     {r3-r11,lr}
;;;7639   {
;;;7640   /*
;;;7641   if(sp_ch_stat==scsOFF)
;;;7642   	{
;;;7643   	if((sk_stat[1]==1)&&(sk_stat_old[1]=0))
;;;7644   	}*/
;;;7645   	 
;;;7646   if(sp_ch_stat==scsSTEP1)
0040c8  f8df8338          LDR      r8,|L1.17412|
;;;7647   	{
;;;7648   	if(sp_ch_stat_old!=sp_ch_stat)
;;;7649   		{
;;;7650   		sp_ch_stat_cnt=5;
;;;7651   		}
;;;7652   	if(sp_ch_stat_cnt)
;;;7653   		{
;;;7654   		sp_ch_stat_cnt--;
;;;7655   		if(sp_ch_stat_cnt==0)
;;;7656   			{
;;;7657   			sp_ch_stat=scsERR1; 	//Íå âêëþ÷èëàñü âåíòèëÿöèÿ;
;;;7658   
;;;7659   			}
;;;7660   		}
;;;7661   	if(sk_stat[0]==1)sp_ch_stat=scsWRK;
0040cc  f8dfa39c          LDR      r10,|L1.17516|
0040d0  4ee7              LDR      r6,|L1.17520|
0040d2  f8982000          LDRB     r2,[r8,#0]            ;7646  ; sp_ch_stat
0040d6  f89a1000          LDRB     r1,[r10,#0]
0040da  7830              LDRB     r0,[r6,#0]            ;7648
0040dc  4ce5              LDR      r4,|L1.17524|
0040de  f04f0902          MOV      r9,#2
0040e2  2a01              CMP      r2,#1                 ;7646
0040e4  d114              BNE      |L1.16656|
0040e6  2801              CMP      r0,#1                 ;7648
0040e8  d002              BEQ      |L1.16624|
0040ea  f04f0205          MOV      r2,#5                 ;7650
0040ee  8022              STRH     r2,[r4,#0]            ;7650
                  |L1.16624|
0040f0  f9b42000          LDRSH    r2,[r4,#0]            ;7652  ; sp_ch_stat_cnt
0040f4  b142              CBZ      r2,|L1.16648|
0040f6  f1a20201          SUB      r2,r2,#1              ;7654
0040fa  b212              SXTH     r2,r2                 ;7654
0040fc  8022              STRH     r2,[r4,#0]            ;7654
0040fe  b91a              CBNZ     r2,|L1.16648|
004100  f04f0203          MOV      r2,#3                 ;7657
004104  f8882000          STRB     r2,[r8,#0]            ;7657
                  |L1.16648|
004108  2901              CMP      r1,#1
00410a  d101              BNE      |L1.16656|
00410c  f8889000          STRB     r9,[r8,#0]
                  |L1.16656|
;;;7662   	}
;;;7663   
;;;7664   if(sp_ch_stat==scsWRK)
004110  f8982000          LDRB     r2,[r8,#0]  ; sp_ch_stat
004114  2500              MOVS     r5,#0
004116  2a02              CMP      r2,#2
004118  d11c              BNE      |L1.16724|
;;;7665   	{
;;;7666   	if(sp_ch_stat_old!=sp_ch_stat)
;;;7667   		{
;;;7668   		sp_ch_wrk_cnt=(signed long)speedChrgTimeInHour*3600L;
00411a  4bd7              LDR      r3,|L1.17528|
;;;7669   		hv_vz_up_cnt=0;
00411c  4fd7              LDR      r7,|L1.17532|
00411e  2802              CMP      r0,#2                 ;7666
004120  d008              BEQ      |L1.16692|
004122  4ad7              LDR      r2,|L1.17536|
004124  f44f6c61          MOV      r12,#0xe10            ;7668
004128  f9b22000          LDRSH    r2,[r2,#0]            ;7668  ; speedChrgTimeInHour
00412c  fb02f20c          MUL      r2,r2,r12             ;7668
004130  601a              STR      r2,[r3,#0]            ;7668  ; sp_ch_wrk_cnt
004132  603d              STR      r5,[r7,#0]  ; hv_vz_up_cnt
                  |L1.16692|
;;;7670   		}
;;;7671   	sp_ch_wrk_cnt--;
004134  681a              LDR      r2,[r3,#0]  ; sp_ch_wrk_cnt
004136  f1a20201          SUB      r2,r2,#1
00413a  601a              STR      r2,[r3,#0]  ; sp_ch_wrk_cnt
;;;7672   	hv_vz_up_cnt++;
00413c  683b              LDR      r3,[r7,#0]  ; hv_vz_up_cnt
00413e  f1030301          ADD      r3,r3,#1
004142  603b              STR      r3,[r7,#0]  ; hv_vz_up_cnt
;;;7673   	if(sp_ch_wrk_cnt==0)
004144  b90a              CBNZ     r2,|L1.16714|
;;;7674   		{
;;;7675   		sp_ch_stat=scsOFF;
004146  f8885000          STRB     r5,[r8,#0]
                  |L1.16714|
;;;7676   		}
;;;7677   	if(sk_stat[0]==0)sp_ch_stat=scsERR2;
00414a  b919              CBNZ     r1,|L1.16724|
00414c  f04f0104          MOV      r1,#4
004150  f8881000          STRB     r1,[r8,#0]
                  |L1.16724|
;;;7678   	
;;;7679   	}
;;;7680   
;;;7681   if(sp_ch_stat==scsERR1)		//Îòñóòñòâóåò âåíòèëÿöèÿ ïðè âêëþ÷åíèè
004154  f8981000          LDRB     r1,[r8,#0]  ; sp_ch_stat
;;;7682   	{
;;;7683   	if((sp_ch_stat_old!=sp_ch_stat)||(sp_ch_stat_cnt==0))
;;;7684   		{
;;;7685   		sp_ch_stat_cnt=10;
004158  270a              MOVS     r7,#0xa
;;;7686   		}
;;;7687   	sp_ch_stat_cnt--;
;;;7688   	if((sp_ch_stat_cnt==10)||(sp_ch_stat_cnt==9))
;;;7689   		{
;;;7690   		show_mess(	"  ÓÑÊÎÐÅÍÍÛÉ ÇÀÐßÄ  ",
00415a  f2413b88          MOV      r11,#0x1388
00415e  2903              CMP      r1,#3                 ;7681
004160  d115              BNE      |L1.16782|
004162  2803              CMP      r0,#3                 ;7683
004164  d101              BNE      |L1.16746|
004166  8820              LDRH     r0,[r4,#0]            ;7683  ; sp_ch_stat_cnt
004168  b900              CBNZ     r0,|L1.16748|
                  |L1.16746|
00416a  8027              STRH     r7,[r4,#0]            ;7685
                  |L1.16748|
00416c  8820              LDRH     r0,[r4,#0]            ;7687  ; sp_ch_stat_cnt
00416e  f1a00001          SUB      r0,r0,#1              ;7687
004172  b200              SXTH     r0,r0                 ;7687
004174  8020              STRH     r0,[r4,#0]            ;7687
004176  280a              CMP      r0,#0xa               ;7688
004178  d001              BEQ      |L1.16766|
00417a  2809              CMP      r0,#9                 ;7688
00417c  d107              BNE      |L1.16782|
                  |L1.16766|
00417e  a3c1              ADR      r3,|L1.17540|
004180  a2c6              ADR      r2,|L1.17564|
004182  a1cc              ADR      r1,|L1.17588|
004184  a0d1              ADR      r0,|L1.17612|
004186  f8cdb000          STR      r11,[sp,#0]
00418a  f7fffffe          BL       show_mess
                  |L1.16782|
;;;7691   					"   ÍÅ ÌÎÆÅÒ ÁÛÒÜ    ",
;;;7692   					"      ÂÊËÞ×ÅÍ       ",
;;;7693   					"  ÁÅÇ ÂÅÍÒÈËßÖÈÈ!!  ",
;;;7694   					5000);
;;;7695   		}
;;;7696   	}
;;;7697   if(sp_ch_stat==scsERR2)		//Ïðîïàëà âåíòèëÿöèÿ ïðè ðàáîòå
00418e  f8980000          LDRB     r0,[r8,#0]  ; sp_ch_stat
004192  2804              CMP      r0,#4
004194  d11e              BNE      |L1.16852|
;;;7698   	{
;;;7699   	if((sp_ch_stat_old!=sp_ch_stat)||(sp_ch_stat_cnt==0))
004196  7830              LDRB     r0,[r6,#0]  ; sp_ch_stat_old
004198  2804              CMP      r0,#4
00419a  d101              BNE      |L1.16800|
00419c  8820              LDRH     r0,[r4,#0]  ; sp_ch_stat_cnt
00419e  b900              CBNZ     r0,|L1.16802|
                  |L1.16800|
;;;7700   		{
;;;7701   		sp_ch_stat_cnt=10;
0041a0  8027              STRH     r7,[r4,#0]
                  |L1.16802|
;;;7702   		}
;;;7703   	sp_ch_stat_cnt--;
0041a2  8820              LDRH     r0,[r4,#0]  ; sp_ch_stat_cnt
0041a4  f1a00001          SUB      r0,r0,#1
0041a8  b200              SXTH     r0,r0
0041aa  8020              STRH     r0,[r4,#0]
;;;7704   	if((sp_ch_stat_cnt==10)||(sp_ch_stat_cnt==9))
0041ac  280a              CMP      r0,#0xa
0041ae  d001              BEQ      |L1.16820|
0041b0  2809              CMP      r0,#9
0041b2  d109              BNE      |L1.16840|
                  |L1.16820|
;;;7705   		{
;;;7706   		show_mess(	"  ÓÑÊÎÐÅÍÍÛÉ ÇÀÐßÄ  ",
0041b4  4bcb              LDR      r3,|L1.17636|
0041b6  a0c5              ADR      r0,|L1.17612|
0041b8  f1030218          ADD      r2,r3,#0x18
0041bc  f1020118          ADD      r1,r2,#0x18
0041c0  f8cdb000          STR      r11,[sp,#0]
0041c4  f7fffffe          BL       show_mess
                  |L1.16840|
;;;7707   					"    ÇÀÁËÎÊÈÐÎÂÀÍ    ",
;;;7708   					"     ÍÅÈÑÏÐÀÂÍÀ     ",
;;;7709   					"    ÂÅÍÒÈËßÖÈß!!!   ",
;;;7710   					5000);
;;;7711   		}
;;;7712   	if(sk_stat[0]==1)sp_ch_stat=scsWRK;
0041c8  f89a0000          LDRB     r0,[r10,#0]  ; sk_stat
0041cc  2801              CMP      r0,#1
0041ce  d101              BNE      |L1.16852|
0041d0  f8889000          STRB     r9,[r8,#0]
                  |L1.16852|
;;;7713   	}
;;;7714   
;;;7715   
;;;7716   sp_ch_stat_old=sp_ch_stat;
0041d4  f8980000          LDRB     r0,[r8,#0]  ; sp_ch_stat
0041d8  7030              STRB     r0,[r6,#0]
;;;7717   
;;;7718   
;;;7719   
;;;7720   if(speedChrgAvtEn==1)
0041da  49c3              LDR      r1,|L1.17640|
;;;7721   	{
;;;7722   	if(sp_ch_stat==scsOFF)
;;;7723   		{
;;;7724   		if((load_U<u_necc)&&((u_necc-load_U)>speedChrgDU)&&(abs(Ib_ips_termokompensat/10-IZMAX)<5)&&(!speedChrgBlckStat))
0041dc  4c8a              LDR      r4,|L1.17416|
0041de  8809              LDRH     r1,[r1,#0]            ;7720  ; speedChrgAvtEn
0041e0  2901              CMP      r1,#1                 ;7720
0041e2  d11f              BNE      |L1.16932|
0041e4  b9f0              CBNZ     r0,|L1.16932|
0041e6  487f              LDR      r0,|L1.17380|
0041e8  49c0              LDR      r1,|L1.17644|
0041ea  f9b00000          LDRSH    r0,[r0,#0]  ; load_U
0041ee  f9b11000          LDRSH    r1,[r1,#0]  ; u_necc
0041f2  4288              CMP      r0,r1
0041f4  da16              BGE      |L1.16932|
0041f6  1a08              SUBS     r0,r1,r0
0041f8  49bd              LDR      r1,|L1.17648|
0041fa  f9b11000          LDRSH    r1,[r1,#0]  ; speedChrgDU
0041fe  4288              CMP      r0,r1
004200  dd10              BLE      |L1.16932|
004202  48bc              LDR      r0,|L1.17652|
004204  49bc              LDR      r1,|L1.17656|
004206  f9b00000          LDRSH    r0,[r0,#0]  ; Ib_ips_termokompensat
00420a  8809              LDRH     r1,[r1,#0]  ; IZMAX
00420c  fb90f0f7          SDIV     r0,r0,r7
004210  1a40              SUBS     r0,r0,r1
004212  b200              SXTH     r0,r0
004214  f7fffffe          BL       abs
004218  2805              CMP      r0,#5
00421a  da03              BGE      |L1.16932|
00421c  8820              LDRH     r0,[r4,#0]  ; speedChrgBlckStat
00421e  b908              CBNZ     r0,|L1.16932|
;;;7725   			{
;;;7726   			speedChargeStartStop();
004220  f7fffffe          BL       speedChargeStartStop
                  |L1.16932|
;;;7727   			}
;;;7728   		}
;;;7729   	}
;;;7730   
;;;7731   
;;;7732   
;;;7733   /*
;;;7734   if(speedChIsOn)
;;;7735   	{
;;;7736   	speedChTimeCnt++;
;;;7737   	if(speedChTimeCnt>=((signed long)speedChrgTimeInHour*3600L))
;;;7738   		{
;;;7739   		speedChIsOn=0;
;;;7740   		}
;;;7741   	if(speedChrgBlckStat)
;;;7742   		{
;;;7743   		speedChIsOn=0;
;;;7744   		speedChTimeCnt=0;
;;;7745   		}
;;;7746   	}
;;;7747   
;;;7748   
;;;7749   
;;;7750   if(speedChrgAvtEn)
;;;7751   	{
;;;7752   	if(!speedChIsOn)
;;;7753   		{
;;;7754   		if((load_U<u_necc)&&((u_necc-load_U)>speedChrgDU)&&(abs(Ib_ips_termokompensat/10-IZMAX)<5)&&(!speedChrgBlckStat))
;;;7755   			{
;;;7756   			speedChIsOn=1;
;;;7757   			}
;;;7758   		}
;;;7759   	}
;;;7760   
;;;7761   
;;;7762   */
;;;7763   if(/*(speedChrgBlckSrc!=1)&&*/(speedChrgBlckSrc!=2)) speedChrgBlckStat=0;
004224  48b5              LDR      r0,|L1.17660|
004226  8800              LDRH     r0,[r0,#0]  ; speedChrgBlckSrc
004228  2802              CMP      r0,#2
00422a  d002              BEQ      |L1.16946|
00422c  8025              STRH     r5,[r4,#0]
                  |L1.16942|
;;;7764   else
;;;7765   	{
;;;7766   	speedChrgBlckStat=0;
;;;7767   	if(speedChrgBlckSrc==1)
;;;7768   		{
;;;7769   		if(((speedChrgBlckLog==0)&&(adc_buff_[11]>2000)) || ((speedChrgBlckLog==1)&&(adc_buff_[11]<2000))) speedChrgBlckStat=1;
;;;7770   		}
;;;7771   	else if(speedChrgBlckSrc==2)
;;;7772   		{
;;;7773   		if(((speedChrgBlckLog==0)&&(adc_buff_[13]>2000)) || ((speedChrgBlckLog==1)&&(adc_buff_[13]<2000))) speedChrgBlckStat=1;
;;;7774   		}
;;;7775   	}
;;;7776   
;;;7777   /*
;;;7778   if(speedChrgBlckStat==1)
;;;7779   	{
;;;7780   
;;;7781   	//speedChargeStartStop();
;;;7782   
;;;7783   	speedChrgShowCnt++;
;;;7784   	if(speedChrgShowCnt>=30)	
;;;7785   		{
;;;7786   		speedChrgShowCnt=0;
;;;7787   		show_mess(	"     ÓÑÊÎÐÅÍÍÛÉ     ",
;;;7788   					"       ÇÀÐßÄ        ",
;;;7789   					"     ÇÀÏÐÅÙÅÍ!!!    ",
;;;7790   					"                    ",
;;;7791   					5000);
;;;7792   		}
;;;7793   	} 
;;;7794   else speedChrgShowCnt=0;  */
;;;7795   
;;;7796   
;;;7797   }
00422e  e8bd8ff8          POP      {r3-r11,pc}
                  |L1.16946|
004232  8025              STRH     r5,[r4,#0]            ;7766
004234  48b2              LDR      r0,|L1.17664|
004236  49b3              LDR      r1,|L1.17668|
004238  f44f63fa          MOV      r3,#0x7d0             ;7769
00423c  f9b00000          LDRSH    r0,[r0,#0]            ;7773  ; speedChrgBlckLog
004240  b918              CBNZ     r0,|L1.16970|
004242  f9b1201a          LDRSH    r2,[r1,#0x1a]         ;7773  ; adc_buff_
004246  429a              CMP      r2,r3                 ;7773
004248  dc05              BGT      |L1.16982|
                  |L1.16970|
00424a  2801              CMP      r0,#1                 ;7773
00424c  d1ef              BNE      |L1.16942|
00424e  f9b1001a          LDRSH    r0,[r1,#0x1a]         ;7773  ; adc_buff_
004252  4298              CMP      r0,r3                 ;7773
004254  daeb              BGE      |L1.16942|
                  |L1.16982|
004256  f04f0001          MOV      r0,#1                 ;7773
00425a  8020              STRH     r0,[r4,#0]            ;7773
00425c  e7e7              B        |L1.16942|
;;;7798   
                          ENDP

                  averageChargeHndl PROC
;;;7844   //-----------------------------------------------
;;;7845   void averageChargeHndl(void)
00425e  e92d4ff8          PUSH     {r3-r11,lr}
;;;7846   {
;;;7847   /*
;;;7848   if(hv_vz_stat==hvsOFF)
;;;7849   	{
;;;7850   	if((sk_stat[1]==1)&&(sk_stat_old[1]=0))
;;;7851   	} */
;;;7852   if(hv_vz_stat==hvsSTEP1)
004262  f8dfa2a4          LDR      r10,|L1.17672|
;;;7853   	{
;;;7854   	if(hv_vz_stat_old!=hv_vz_stat)
;;;7855   		{
;;;7856   		hv_vz_stat_cnt=5;
;;;7857   		}
;;;7858   	if(hv_vz_stat_cnt)
;;;7859   		{
;;;7860   		hv_vz_stat_cnt--;
;;;7861   		if(hv_vz_stat_cnt==0)
;;;7862   			{
;;;7863   			hv_vz_stat=hvsERR1; 	//Íå âêëþ÷èëàñü âåíòèëÿöèÿ;
;;;7864   			lc640_write(EE_HV_VZ_STAT,hvsERR1);
;;;7865   			}
;;;7866   		}
;;;7867   	if(sk_stat[0]==1)
004266  4e81              LDR      r6,|L1.17516|
004268  4da8              LDR      r5,|L1.17676|
00426a  f89a0000          LDRB     r0,[r10,#0]           ;7852  ; hv_vz_stat
00426e  4ca8              LDR      r4,|L1.17680|
004270  f04f0905          MOV      r9,#5                 ;7856
004274  2801              CMP      r0,#1                 ;7852
004276  d131              BNE      |L1.17116|
004278  7828              LDRB     r0,[r5,#0]            ;7854  ; hv_vz_stat_old
00427a  2801              CMP      r0,#1                 ;7854
00427c  d001              BEQ      |L1.17026|
00427e  f8a49000          STRH     r9,[r4,#0]            ;7856
                  |L1.17026|
004282  f9b40000          LDRSH    r0,[r4,#0]            ;7858  ; hv_vz_stat_cnt
004286  b168              CBZ      r0,|L1.17060|
004288  f1a00001          SUB      r0,r0,#1              ;7860
00428c  b200              SXTH     r0,r0                 ;7860
00428e  8020              STRH     r0,[r4,#0]            ;7860
004290  b940              CBNZ     r0,|L1.17060|
004292  f04f0006          MOV      r0,#6                 ;7863
004296  f88a0000          STRB     r0,[r10,#0]           ;7863
00429a  4601              MOV      r1,r0                 ;7864
00429c  f44f70b4          MOV      r0,#0x168             ;7864
0042a0  f7fffffe          BL       lc640_write
                  |L1.17060|
0042a4  7830              LDRB     r0,[r6,#0]  ; sk_stat
0042a6  2801              CMP      r0,#1
0042a8  d118              BNE      |L1.17116|
;;;7868   		{
;;;7869   		hv_vz_stat=hvsSTEP2;
0042aa  f04f0002          MOV      r0,#2
0042ae  f88a0000          STRB     r0,[r10,#0]
;;;7870   		lc640_write(EE_HV_VZ_STAT,hvsSTEP2);
0042b2  4601              MOV      r1,r0
0042b4  f44f70b4          MOV      r0,#0x168
0042b8  f7fffffe          BL       lc640_write
;;;7871   		tree_up(iHV_STEP2_2,1,0,0);
0042bc  2300              MOVS     r3,#0
0042be  461a              MOV      r2,r3
0042c0  2101              MOVS     r1,#1
0042c2  20cc              MOVS     r0,#0xcc
0042c4  f7fffffe          BL       tree_up
;;;7872   		tree_up(iHV_STEP2_1,0,0,0);
0042c8  2300              MOVS     r3,#0
0042ca  461a              MOV      r2,r3
0042cc  4619              MOV      r1,r3
0042ce  20cb              MOVS     r0,#0xcb
0042d0  f7fffffe          BL       tree_up
;;;7873   		ret(1200);
0042d4  f44f6096          MOV      r0,#0x4b0
0042d8  f7fffffe          BL       ||ret||
                  |L1.17116|
;;;7874   		}
;;;7875   	}
;;;7876   
;;;7877   if(hv_vz_stat==hvsSTEP2)
0042dc  f89a0000          LDRB     r0,[r10,#0]  ; hv_vz_stat
0042e0  2802              CMP      r0,#2
0042e2  d10b              BNE      |L1.17148|
;;;7878   	{
;;;7879   	if((hv_vz_stat_old!=hv_vz_stat)||(hv_vz_stat_cnt==0))
0042e4  7829              LDRB     r1,[r5,#0]  ; hv_vz_stat_old
0042e6  2902              CMP      r1,#2
0042e8  d101              BNE      |L1.17134|
0042ea  8821              LDRH     r1,[r4,#0]  ; hv_vz_stat_cnt
0042ec  b911              CBNZ     r1,|L1.17140|
                  |L1.17134|
;;;7880   		{
;;;7881   		hv_vz_stat_cnt=15;
0042ee  f04f010f          MOV      r1,#0xf
0042f2  8021              STRH     r1,[r4,#0]
                  |L1.17140|
;;;7882   		}
;;;7883   	hv_vz_stat_cnt--;
0042f4  8821              LDRH     r1,[r4,#0]  ; hv_vz_stat_cnt
0042f6  f1a10101          SUB      r1,r1,#1
0042fa  8021              STRH     r1,[r4,#0]
                  |L1.17148|
;;;7884   	//if((hv_vz_stat_cnt==14)/*||(hv_vz_stat_cnt==13)||(hv_vz_stat_cnt==12)*/)
;;;7885   	//	{
;;;7886   //		show_mess_number(	"     ÂÍÈÌÀÍÈÅ!!!    ",
;;;7887   	//				"  Íàïðÿæåíèå áóäåò  ",
;;;7888   	//				" óâåëè÷åíî äî     @Â",
;;;7889   	//				"ÎÒÊËÞ×ÈÒÅ ÍÀÃÐÓÇÊÓ!!",
;;;7890   	//				4800,UVZ,1);
;;;7891   	//	}
;;;7892   	//if((hv_vz_stat_cnt==8)/*||(hv_vz_stat_cnt==7)||(hv_vz_stat_cnt==6)*/)
;;;7893   	//	{
;;;7894   	//	show_mess(	"    ÏÎÄÒÂÅÐÄÈÒÅ     ",
;;;7895   	//				"     ÍÀÆÀÒÈÅÌ       ",
;;;7896   	//				"    ÖÅÍÒÐÀËÜÍÎÉ     ",
;;;7897   	//				"      ÊÍÎÏÊÈ        ",
;;;7898   	//				4800);
;;;7899   	//	} 
;;;7900   /*	if(sk_stat[1]==1)
;;;7901   		{
;;;7902   		hv_vz_stat=hvsWRK;
;;;7903   		lc640_write(EE_HV_VZ_STAT,hvsWRK);
;;;7904   		}*/
;;;7905   	}
;;;7906   
;;;7907   if(hv_vz_stat==hvsSTEP3)
;;;7908   	{
;;;7909   	if((hv_vz_stat_old!=hv_vz_stat)||(hv_vz_stat_cnt==0))
;;;7910   		{
;;;7911   		hv_vz_stat_cnt=10;
0042fc  270a              MOVS     r7,#0xa
;;;7912   		}
;;;7913   	hv_vz_stat_cnt--;
;;;7914   	if((hv_vz_stat_cnt==10)||(hv_vz_stat_cnt==9))
;;;7915   		{
;;;7916   		show_mess(	"     ÂÊËÞ×ÈÒÅ       ",
0042fe  f2413888          MOV      r8,#0x1388
004302  2803              CMP      r0,#3                 ;7907
004304  d120              BNE      |L1.17224|
004306  7828              LDRB     r0,[r5,#0]            ;7909  ; hv_vz_stat_old
004308  2803              CMP      r0,#3                 ;7909
00430a  d101              BNE      |L1.17168|
00430c  8820              LDRH     r0,[r4,#0]            ;7909  ; hv_vz_stat_cnt
00430e  b900              CBNZ     r0,|L1.17170|
                  |L1.17168|
004310  8027              STRH     r7,[r4,#0]            ;7911
                  |L1.17170|
004312  8820              LDRH     r0,[r4,#0]            ;7913  ; hv_vz_stat_cnt
004314  f1a00001          SUB      r0,r0,#1              ;7913
004318  b200              SXTH     r0,r0                 ;7913
00431a  8020              STRH     r0,[r4,#0]            ;7913
00431c  280a              CMP      r0,#0xa               ;7914
00431e  d001              BEQ      |L1.17188|
004320  2809              CMP      r0,#9                 ;7914
004322  d107              BNE      |L1.17204|
                  |L1.17188|
004324  a37b              ADR      r3,|L1.17684|
004326  a281              ADR      r2,|L1.17708|
004328  a186              ADR      r1,|L1.17732|
00432a  a08c              ADR      r0,|L1.17756|
00432c  f8cd8000          STR      r8,[sp,#0]
004330  f7fffffe          BL       show_mess
                  |L1.17204|
;;;7917   					"      ÒÓÌÁËÅÐ       ",
;;;7918   					"   ÂÛÐÀÂÍÈÂÀÞÙÈÉ    ",
;;;7919   					"       ÇÀÐßÄ        ",
;;;7920   					5000);
;;;7921   		}
;;;7922   	if(sk_stat[1]==1)
004334  7870              LDRB     r0,[r6,#1]  ; sk_stat
004336  2801              CMP      r0,#1
004338  d106              BNE      |L1.17224|
;;;7923   		{
;;;7924   		hv_vz_stat=hvsWRK;
00433a  f88a9000          STRB     r9,[r10,#0]
;;;7925   		lc640_write(EE_HV_VZ_STAT,hvsWRK);
00433e  2105              MOVS     r1,#5
004340  f44f70b4          MOV      r0,#0x168
004344  f7fffffe          BL       lc640_write
                  |L1.17224|
;;;7926   		}
;;;7927   	}
;;;7928   
;;;7929   if(hv_vz_stat==hvsWRK)
004348  f89a0000          LDRB     r0,[r10,#0]  ; hv_vz_stat
00434c  f04f0b00          MOV      r11,#0
004350  2805              CMP      r0,#5
004352  d13a              BNE      |L1.17354|
;;;7930   	{
;;;7931   	if(hv_vz_stat_old!=hv_vz_stat)
004354  7828              LDRB     r0,[r5,#0]  ; hv_vz_stat_old
;;;7932   		{
;;;7933   		hv_vz_wrk_cnt=3600L/*100L*/*((long)VZ_HR);
004356  4a87              LDR      r2,|L1.17780|
;;;7934   		if(VZ_HR==0)  	hv_vz_wrk_cnt=1800L;
;;;7935   		hv_vz_up_cnt=0L;
004358  4948              LDR      r1,|L1.17532|
00435a  2805              CMP      r0,#5                 ;7931
00435c  d00d              BEQ      |L1.17274|
00435e  4886              LDR      r0,|L1.17784|
004360  f44f6361          MOV      r3,#0xe10             ;7933
004364  f9b00000          LDRSH    r0,[r0,#0]            ;7933  ; VZ_HR
004368  fb00f303          MUL      r3,r0,r3              ;7933
00436c  6013              STR      r3,[r2,#0]            ;7933  ; hv_vz_wrk_cnt
00436e  b910              CBNZ     r0,|L1.17270|
004370  f44f60e1          MOV      r0,#0x708             ;7934
004374  6010              STR      r0,[r2,#0]            ;7934  ; hv_vz_wrk_cnt
                  |L1.17270|
004376  f8c1b000          STR      r11,[r1,#0]  ; hv_vz_up_cnt
                  |L1.17274|
;;;7936   		}
;;;7937   	hv_vz_wrk_cnt--;
00437a  6810              LDR      r0,[r2,#0]  ; hv_vz_wrk_cnt
00437c  f1a00001          SUB      r0,r0,#1
004380  6010              STR      r0,[r2,#0]  ; hv_vz_wrk_cnt
;;;7938   	hv_vz_up_cnt++;
004382  680a              LDR      r2,[r1,#0]  ; hv_vz_up_cnt
004384  f1020201          ADD      r2,r2,#1
004388  600a              STR      r2,[r1,#0]  ; hv_vz_up_cnt
;;;7939   
;;;7940   	if(hv_vz_wrk_cnt==0)
00438a  b940              CBNZ     r0,|L1.17310|
;;;7941   		{
;;;7942   		hv_vz_stat=hvsERR4;
00438c  f04f0009          MOV      r0,#9
004390  f88a0000          STRB     r0,[r10,#0]
;;;7943   		lc640_write(EE_HV_VZ_STAT,hvsERR4);
004394  4601              MOV      r1,r0
004396  f44f70b4          MOV      r0,#0x168
00439a  f7fffffe          BL       lc640_write
                  |L1.17310|
;;;7944   		}
;;;7945   	if(sk_stat[0]==0)
00439e  7830              LDRB     r0,[r6,#0]  ; sk_stat
0043a0  b940              CBNZ     r0,|L1.17332|
;;;7946   		{
;;;7947   		hv_vz_stat=hvsERR2;
0043a2  f04f0007          MOV      r0,#7
0043a6  f88a0000          STRB     r0,[r10,#0]
;;;7948   		lc640_write(EE_HV_VZ_STAT,hvsERR2);
0043aa  4601              MOV      r1,r0
0043ac  f44f70b4          MOV      r0,#0x168
0043b0  f7fffffe          BL       lc640_write
                  |L1.17332|
;;;7949   		}
;;;7950   	if(sk_stat[1]==0)
0043b4  7870              LDRB     r0,[r6,#1]  ; sk_stat
0043b6  b940              CBNZ     r0,|L1.17354|
;;;7951   		{
;;;7952   		hv_vz_stat=hvsERR3;
0043b8  f04f0008          MOV      r0,#8
0043bc  f88a0000          STRB     r0,[r10,#0]
;;;7953   		lc640_write(EE_HV_VZ_STAT,hvsERR3);
0043c0  4601              MOV      r1,r0
0043c2  f44f70b4          MOV      r0,#0x168
0043c6  f7fffffe          BL       lc640_write
                  |L1.17354|
;;;7954   		}
;;;7955   	}
;;;7956   
;;;7957   if(hv_vz_stat==hvsERR1)		//Îòñóòñòâóåò âåíòèëÿöèÿ ïðè âêëþ÷åíèè
0043ca  f89a0000          LDRB     r0,[r10,#0]  ; hv_vz_stat
0043ce  2806              CMP      r0,#6
0043d0  d101              BNE      |L1.17366|
;;;7958   	{
;;;7959   	if((hv_vz_stat_old!=hv_vz_stat)||(hv_vz_stat_cnt==0))
0043d2  7828              LDRB     r0,[r5,#0]  ; hv_vz_stat_old
0043d4  e0d2              B        |L1.17788|
                  |L1.17366|
0043d6  e0ea              B        |L1.17838|
                  |L1.17368|
                          DCD      NPN_OUT
                  |L1.17372|
                          DCD      npn_tz_cnt
                  |L1.17376|
                          DCD      npn_stat
                  |L1.17380|
                          DCD      load_U
                  |L1.17384|
                          DCD      UONPN
                  |L1.17388|
                          DCD      net_Ua
                  |L1.17392|
                          DCD      net_Ub
                  |L1.17396|
                          DCD      net_Uc
                  |L1.17400|
                          DCD      UMN
                  |L1.17404|
                          DCD      TZNPN
                  |L1.17408|
                          DCD      UVNPN
                  |L1.17412|
                          DCD      sp_ch_stat
                  |L1.17416|
                          DCD      speedChrgBlckStat
                  |L1.17420|
00440c  20202020          DCB      "                    ",0
004410  20202020
004414  20202020
004418  20202020
00441c  20202020
004420  00      
004421  00                DCB      0
004422  00                DCB      0
004423  00                DCB      0
                  |L1.17444|
004424  20202020          DCB      "    ",231,224,225,235,238,234,232,240,238,226,224,237,"!"
004428  e7e0e1eb
00442c  eeeae8f0
004430  eee2e0ed
004434  21      
004435  20202000          DCB      "   ",0
004439  00                DCB      0
00443a  00                DCB      0
00443b  00                DCB      0
                  |L1.17468|
00443c  20202020          DCB      "       ",231,224,240,255,228,"        ",0
004440  202020e7
004444  e0f0ffe4
004448  20202020
00444c  20202020
004450  00      
004451  00                DCB      0
004452  00                DCB      0
004453  00                DCB      0
                  |L1.17492|
004454  20202020          DCB      "     ",211,241,234,238,240,229,237,237,251,233,"     ",0
004458  20d3f1ea
00445c  eef0e5ed
004460  edfbe920
004464  20202020
004468  00      
004469  00                DCB      0
00446a  00                DCB      0
00446b  00                DCB      0
                  |L1.17516|
                          DCD      sk_stat
                  |L1.17520|
                          DCD      sp_ch_stat_old
                  |L1.17524|
                          DCD      sp_ch_stat_cnt
                  |L1.17528|
                          DCD      sp_ch_wrk_cnt
                  |L1.17532|
                          DCD      hv_vz_up_cnt
                  |L1.17536|
                          DCD      speedChrgTimeInHour
                  |L1.17540|
004484  2020c1c5          DCB      "  ",193,197,199," ",194,197,205,210,200,203,223,214,200
004488  c720c2c5
00448c  cdd2c8cb
004490  dfd6c8  
004493  c8212120          DCB      200,"!!  ",0
004497  2000    
004499  00                DCB      0
00449a  00                DCB      0
00449b  00                DCB      0
                  |L1.17564|
00449c  20202020          DCB      "      ",194,202,203,222,215,197,205,"       ",0
0044a0  2020c2ca
0044a4  cbded7c5
0044a8  cd202020
0044ac  20202020
0044b0  00      
0044b1  00                DCB      0
0044b2  00                DCB      0
0044b3  00                DCB      0
                  |L1.17588|
0044b4  202020cd          DCB      "   ",205,197," ",204,206,198,197,210," ",193,219,210,220
0044b8  c520ccce
0044bc  c6c5d220
0044c0  c1dbd2dc
0044c4  20202020          DCB      "    ",0
0044c8  00      
0044c9  00                DCB      0
0044ca  00                DCB      0
0044cb  00                DCB      0
                  |L1.17612|
0044cc  2020d3d1          DCB      "  ",211,209,202,206,208,197,205,205,219,201," ",199,192
0044d0  caced0c5
0044d4  cdcddbc9
0044d8  20c7c0  
0044db  d0dfc420          DCB      208,223,196,"  ",0
0044df  2000    
0044e1  00                DCB      0
0044e2  00                DCB      0
0044e3  00                DCB      0
                  |L1.17636|
                          DCD      ||.text||+0x848
                  |L1.17640|
                          DCD      speedChrgAvtEn
                  |L1.17644|
                          DCD      u_necc
                  |L1.17648|
                          DCD      speedChrgDU
                  |L1.17652|
                          DCD      Ib_ips_termokompensat
                  |L1.17656|
                          DCD      IZMAX
                  |L1.17660|
                          DCD      speedChrgBlckSrc
                  |L1.17664|
                          DCD      speedChrgBlckLog
                  |L1.17668|
                          DCD      ||.bss||+0x400
                  |L1.17672|
                          DCD      hv_vz_stat
                  |L1.17676|
                          DCD      hv_vz_stat_old
                  |L1.17680|
                          DCD      hv_vz_stat_cnt
                  |L1.17684|
004514  20202020          DCB      "       ",199,192,208,223,196,"        ",0
004518  202020c7
00451c  c0d0dfc4
004520  20202020
004524  20202020
004528  00      
004529  00                DCB      0
00452a  00                DCB      0
00452b  00                DCB      0
                  |L1.17708|
00452c  202020c2          DCB      "   ",194,219,208,192,194,205,200,194,192,222,217,200,201
004530  dbd0c0c2
004534  cdc8c2c0
004538  ded9c8c9
00453c  20202020          DCB      "    ",0
004540  00      
004541  00                DCB      0
004542  00                DCB      0
004543  00                DCB      0
                  |L1.17732|
004544  20202020          DCB      "      ",210,211,204,193,203,197,208,"       ",0
004548  2020d2d3
00454c  ccc1cbc5
004550  d0202020
004554  20202020
004558  00      
004559  00                DCB      0
00455a  00                DCB      0
00455b  00                DCB      0
                  |L1.17756|
00455c  20202020          DCB      "     ",194,202,203,222,215,200,210,197,"       ",0
004560  20c2cacb
004564  ded7c8d2
004568  c5202020
00456c  20202020
004570  00      
004571  00                DCB      0
004572  00                DCB      0
004573  00                DCB      0
                  |L1.17780|
                          DCD      hv_vz_wrk_cnt
                  |L1.17784|
                          DCD      VZ_HR
                  |L1.17788|
00457c  2806              CMP      r0,#6
00457e  d101              BNE      |L1.17796|
004580  8820              LDRH     r0,[r4,#0]  ; hv_vz_stat_cnt
004582  b900              CBNZ     r0,|L1.17798|
                  |L1.17796|
;;;7960   		{
;;;7961   		hv_vz_stat_cnt=10;
004584  8027              STRH     r7,[r4,#0]
                  |L1.17798|
;;;7962   		}
;;;7963   	hv_vz_stat_cnt--;
004586  8820              LDRH     r0,[r4,#0]  ; hv_vz_stat_cnt
004588  f1a00001          SUB      r0,r0,#1
00458c  b200              SXTH     r0,r0
00458e  8020              STRH     r0,[r4,#0]
;;;7964   	if((hv_vz_stat_cnt==10)||(hv_vz_stat_cnt==9))
004590  280a              CMP      r0,#0xa
004592  d001              BEQ      |L1.17816|
004594  2809              CMP      r0,#9
004596  d10a              BNE      |L1.17838|
                  |L1.17816|
;;;7965   		{
;;;7966   		show_mess(	"ÂÛÐÀÂÍÈÂÀÞÙÈÉ ÇÀÐßÄ ",
004598  f2af1318          ADR      r3,|L1.17540|
00459c  f2af1204          ADR      r2,|L1.17564|
0045a0  f2af01f0          ADR      r1,|L1.17588|
0045a4  48fa              LDR      r0,|L1.18832|
0045a6  f8cd8000          STR      r8,[sp,#0]
0045aa  f7fffffe          BL       show_mess
                  |L1.17838|
;;;7967   					"   ÍÅ ÌÎÆÅÒ ÁÛÒÜ    ",
;;;7968   					"      ÂÊËÞ×ÅÍ       ",
;;;7969   					"  ÁÅÇ ÂÅÍÒÈËßÖÈÈ!!  ",
;;;7970   					5000);
;;;7971   		}
;;;7972   	}
;;;7973   if(hv_vz_stat==hvsERR2)		//Ïðîïàëà âåíòèëÿöèÿ ïðè ðàáîòå
0045ae  f89a0000          LDRB     r0,[r10,#0]  ; hv_vz_stat
0045b2  2807              CMP      r0,#7
0045b4  d123              BNE      |L1.17918|
;;;7974   	{
;;;7975   	if((hv_vz_stat_old!=hv_vz_stat)||(hv_vz_stat_cnt==0))
0045b6  7828              LDRB     r0,[r5,#0]  ; hv_vz_stat_old
0045b8  2807              CMP      r0,#7
0045ba  d101              BNE      |L1.17856|
0045bc  8820              LDRH     r0,[r4,#0]  ; hv_vz_stat_cnt
0045be  b900              CBNZ     r0,|L1.17858|
                  |L1.17856|
;;;7976   		{
;;;7977   		hv_vz_stat_cnt=10;
0045c0  8027              STRH     r7,[r4,#0]
                  |L1.17858|
;;;7978   		}
;;;7979   	hv_vz_stat_cnt--;
0045c2  8820              LDRH     r0,[r4,#0]  ; hv_vz_stat_cnt
0045c4  f1a00001          SUB      r0,r0,#1
0045c8  b200              SXTH     r0,r0
0045ca  8020              STRH     r0,[r4,#0]
;;;7980   	if((hv_vz_stat_cnt==10)||(hv_vz_stat_cnt==9))
0045cc  280a              CMP      r0,#0xa
0045ce  d001              BEQ      |L1.17876|
0045d0  2809              CMP      r0,#9
0045d2  d10a              BNE      |L1.17898|
                  |L1.17876|
;;;7981   		{
;;;7982   		show_mess(	"ÂÛÐÀÂÍÈÂÀÞÙÈÉ ÇÀÐßÄ ",
0045d4  4bee              LDR      r3,|L1.18832|
0045d6  48ee              LDR      r0,|L1.18832|
0045d8  3b48              SUBS     r3,r3,#0x48
0045da  f1030218          ADD      r2,r3,#0x18
0045de  f1020118          ADD      r1,r2,#0x18
0045e2  f8cd8000          STR      r8,[sp,#0]
0045e6  f7fffffe          BL       show_mess
                  |L1.17898|
;;;7983   					"    ÇÀÁËÎÊÈÐÎÂÀÍ    ",
;;;7984   					"     ÍÅÈÑÏÐÀÂÍÀ     ",
;;;7985   					"    ÂÅÍÒÈËßÖÈß!!!   ",
;;;7986   					5000);
;;;7987   		}
;;;7988   	if(sk_stat[0]==1)
0045ea  7830              LDRB     r0,[r6,#0]  ; sk_stat
0045ec  2801              CMP      r0,#1
0045ee  d106              BNE      |L1.17918|
;;;7989   		{
;;;7990   		hv_vz_stat=hvsWRK;
0045f0  f88a9000          STRB     r9,[r10,#0]
;;;7991   		lc640_write(EE_HV_VZ_STAT,hvsWRK);
0045f4  2105              MOVS     r1,#5
0045f6  f44f70b4          MOV      r0,#0x168
0045fa  f7fffffe          BL       lc640_write
                  |L1.17918|
;;;7992   		}
;;;7993   	}
;;;7994   
;;;7995   if(hv_vz_stat==hvsERR3)		//Îòêëþ÷åí òóìáëåð "Âûðàâíèâàþùèé çàðÿä"
0045fe  f89a0000          LDRB     r0,[r10,#0]  ; hv_vz_stat
004602  2808              CMP      r0,#8
004604  d120              BNE      |L1.17992|
;;;7996   	{
;;;7997   	if((hv_vz_stat_old!=hv_vz_stat)||(hv_vz_stat_cnt==0))
004606  7828              LDRB     r0,[r5,#0]  ; hv_vz_stat_old
004608  2808              CMP      r0,#8
00460a  d101              BNE      |L1.17936|
00460c  8820              LDRH     r0,[r4,#0]  ; hv_vz_stat_cnt
00460e  b900              CBNZ     r0,|L1.17938|
                  |L1.17936|
;;;7998   		{
;;;7999   		hv_vz_stat_cnt=10;
004610  8027              STRH     r7,[r4,#0]
                  |L1.17938|
;;;8000   		}
;;;8001   	hv_vz_stat_cnt--;
004612  8820              LDRH     r0,[r4,#0]  ; hv_vz_stat_cnt
004614  f1a00001          SUB      r0,r0,#1
004618  b200              SXTH     r0,r0
00461a  8020              STRH     r0,[r4,#0]
;;;8002   	if((hv_vz_stat_cnt==10)||(hv_vz_stat_cnt==9))
00461c  280a              CMP      r0,#0xa
00461e  d001              BEQ      |L1.17956|
004620  2809              CMP      r0,#9
004622  d107              BNE      |L1.17972|
                  |L1.17956|
;;;8003   		{
;;;8004   		show_mess(	"ÂÛÐÀÂÍÈÂÀÞÙÈÉ ÇÀÐßÄ ",
004624  a3db              ADR      r3,|L1.18836|
004626  a2e1              ADR      r2,|L1.18860|
004628  a1e6              ADR      r1,|L1.18884|
00462a  48d9              LDR      r0,|L1.18832|
00462c  f8cd8000          STR      r8,[sp,#0]
004630  f7fffffe          BL       show_mess
                  |L1.17972|
;;;8005   					"  ÁÓÄÅÒ ÏÐÎÄÎËÆÅÍ   ",
;;;8006   					"  ÏÎÑËÅ ÂÊËÞ×ÅÍÈß   ",
;;;8007   					"    ÒÓÌÁËÅÐÀ!!!     ",
;;;8008   					5000);
;;;8009   		}
;;;8010   	if(sk_stat[1]==1)
004634  7870              LDRB     r0,[r6,#1]  ; sk_stat
004636  2801              CMP      r0,#1
004638  d106              BNE      |L1.17992|
;;;8011   		{
;;;8012   		hv_vz_stat=hvsWRK;
00463a  f88a9000          STRB     r9,[r10,#0]
;;;8013   		lc640_write(EE_HV_VZ_STAT,hvsWRK);
00463e  2105              MOVS     r1,#5
004640  f44f70b4          MOV      r0,#0x168
004644  f7fffffe          BL       lc640_write
                  |L1.17992|
;;;8014   		}
;;;8015   	}
;;;8016   if(hv_vz_stat==hvsERR4)		//ÂÇ çàêîí÷èëñÿ à òóìáëåð âêëþ÷åí
004648  f89a0000          LDRB     r0,[r10,#0]  ; hv_vz_stat
00464c  2809              CMP      r0,#9
00464e  d124              BNE      |L1.18074|
;;;8017   	{
;;;8018   	if((hv_vz_stat_old!=hv_vz_stat)||(hv_vz_stat_cnt==0))
004650  7828              LDRB     r0,[r5,#0]  ; hv_vz_stat_old
004652  2809              CMP      r0,#9
004654  d101              BNE      |L1.18010|
004656  8820              LDRH     r0,[r4,#0]  ; hv_vz_stat_cnt
004658  b900              CBNZ     r0,|L1.18012|
                  |L1.18010|
;;;8019   		{
;;;8020   		hv_vz_stat_cnt=10;
00465a  8027              STRH     r7,[r4,#0]
                  |L1.18012|
;;;8021   		}
;;;8022   	hv_vz_stat_cnt--;
00465c  8820              LDRH     r0,[r4,#0]  ; hv_vz_stat_cnt
00465e  f1a00001          SUB      r0,r0,#1
004662  b200              SXTH     r0,r0
004664  8020              STRH     r0,[r4,#0]
;;;8023   	if((hv_vz_stat_cnt==10)||(hv_vz_stat_cnt==9))
004666  280a              CMP      r0,#0xa
004668  d001              BEQ      |L1.18030|
00466a  2809              CMP      r0,#9
00466c  d10a              BNE      |L1.18052|
                  |L1.18030|
;;;8024   		{
;;;8025   		show_mess(	"     ÂÛÊËÞ×ÈÒÅ      ",
00466e  f2af135c          ADR      r3,|L1.17684|
004672  f2af1248          ADR      r2,|L1.17708|
004676  f2af1134          ADR      r1,|L1.17732|
00467a  a0d8              ADR      r0,|L1.18908|
00467c  f8cd8000          STR      r8,[sp,#0]
004680  f7fffffe          BL       show_mess
                  |L1.18052|
;;;8026   					"      ÒÓÌÁËÅÐ       ",
;;;8027   					"   ÂÛÐÀÂÍÈÂÀÞÙÈÉ    ",
;;;8028   					"       ÇÀÐßÄ        ",
;;;8029   					5000);
;;;8030   		}
;;;8031   	if(sk_stat[1]==0)
004684  7870              LDRB     r0,[r6,#1]  ; sk_stat
004686  b940              CBNZ     r0,|L1.18074|
;;;8032   		{
;;;8033   		hv_vz_stat=hvsOFF;
004688  f88ab000          STRB     r11,[r10,#0]
;;;8034   		lc640_write(EE_HV_VZ_STAT,hvsOFF);
00468c  2100              MOVS     r1,#0
00468e  f44f70b4          MOV      r0,#0x168
004692  f7fffffe          BL       lc640_write
;;;8035   		vz_stop();
004696  f7fffffe          BL       vz_stop
                  |L1.18074|
;;;8036   
;;;8037   		}
;;;8038   	}
;;;8039   hv_vz_stat_old=hv_vz_stat;
00469a  f89a0000          LDRB     r0,[r10,#0]  ; hv_vz_stat
00469e  7028              STRB     r0,[r5,#0]
;;;8040   /*
;;;8041   if(speedChIsOn)
;;;8042   	{
;;;8043   	speedChTimeCnt++;
;;;8044   	if(speedChTimeCnt>=((signed long)speedChrgTimeInHour*3600L))
;;;8045   		{
;;;8046   		speedChIsOn=0;
;;;8047   		}
;;;8048   	if(speedChrgBlckStat)
;;;8049   		{
;;;8050   		speedChIsOn=0;
;;;8051   		speedChTimeCnt=0;
;;;8052   		}
;;;8053   	}
;;;8054   
;;;8055   
;;;8056   
;;;8057   if(speedChrgAvtEn)
;;;8058   	{
;;;8059   	if(!speedChIsOn)
;;;8060   		{
;;;8061   		if((load_U<u_necc)&&((u_necc-load_U)>speedChrgDU)&&(abs(Ib_ips_termokompensat/10-IZMAX)<5)&&(!speedChrgBlckStat))
;;;8062   			{
;;;8063   			speedChIsOn=1;
;;;8064   			}
;;;8065   		}
;;;8066   	}
;;;8067   
;;;8068   
;;;8069   
;;;8070   if((speedChrgBlckSrc!=1)&&(speedChrgBlckSrc!=2)) speedChrgBlckStat=0;
;;;8071   else
;;;8072   	{
;;;8073   	speedChrgBlckStat=0;
;;;8074   	if(speedChrgBlckSrc==1)
;;;8075   		{
;;;8076   		if(((speedChrgBlckLog==0)&&(adc_buff_[11]>2000)) || ((speedChrgBlckLog==1)&&(adc_buff_[11]<2000))) speedChrgBlckStat=1;
;;;8077   		}
;;;8078   	else if(speedChrgBlckSrc==2)
;;;8079   		{
;;;8080   		if(((speedChrgBlckLog==0)&&(adc_buff_[13]>2000)) || ((speedChrgBlckLog==1)&&(adc_buff_[13]<2000))) speedChrgBlckStat=1;
;;;8081   		}
;;;8082   	}
;;;8083   
;;;8084   
;;;8085   if(speedChrgBlckStat==1)
;;;8086   	{
;;;8087   
;;;8088   	//speedChargeStartStop();
;;;8089   
;;;8090   	speedChrgShowCnt++;
;;;8091   	if(speedChrgShowCnt>=30)	
;;;8092   		{
;;;8093   		speedChrgShowCnt=0;
;;;8094   		show_mess(	"     ÓÑÊÎÐÅÍÍÛÉ     ",
;;;8095   					"       ÇÀÐßÄ        ",
;;;8096   					"     ÇÀÏÐÅÙÅÍ!!!    ",
;;;8097   					"                    ",
;;;8098   					5000);
;;;8099   		}
;;;8100   	}
;;;8101   else speedChrgShowCnt=0;
;;;8102   
;;;8103   */
;;;8104   }
0046a0  e5c5              B        |L1.16942|
;;;8105   
                          ENDP

                  averageChargeStartStop PROC
;;;8106   //-----------------------------------------------
;;;8107   void averageChargeStartStop(void)
0046a2  49d4              LDR      r1,|L1.18932|
;;;8108   {
;;;8109   if(hv_vz_stat!=hvsOFF)
;;;8110   	{
;;;8111   	hv_vz_stat=hvsOFF;
;;;8112   	lc640_write(EE_HV_VZ_STAT,hvsOFF);
0046a4  f44f70b4          MOV      r0,#0x168
0046a8  780a              LDRB     r2,[r1,#0]            ;8109  ; hv_vz_stat
0046aa  b132              CBZ      r2,|L1.18106|
0046ac  f04f0200          MOV      r2,#0                 ;8111
0046b0  700a              STRB     r2,[r1,#0]            ;8111
0046b2  f04f0100          MOV      r1,#0
0046b6  f7ffbffe          B.W      lc640_write
                  |L1.18106|
;;;8113   	}
;;;8114   
;;;8115   else
;;;8116   	{
;;;8117   	hv_vz_stat=hvsSTEP1;
0046ba  f04f0201          MOV      r2,#1
0046be  700a              STRB     r2,[r1,#0]
;;;8118   	lc640_write(EE_HV_VZ_STAT,hvsSTEP1);
0046c0  4611              MOV      r1,r2
0046c2  f7ffbffe          B.W      lc640_write
;;;8119   	}
;;;8120   }
;;;8121   
                          ENDP

                  numOfForvardBps_hndl PROC
;;;8122   //-----------------------------------------------
;;;8123   void	numOfForvardBps_hndl(void)			//Ïðîãðàììà ñìåíû ïåðâîãî èñòî÷íèêà äëÿ ðàâíîìåðíîãî èçíîñà ÁÏÑîâ
0046c6  e92d41f0          PUSH     {r4-r8,lr}
;;;8124   {
;;;8125   
;;;8126   numOfForvardBps_old=numOfForvardBps;
0046ca  4ccb              LDR      r4,|L1.18936|
0046cc  7e60              LDRB     r0,[r4,#0x19]  ; numOfForvardBps
0046ce  76a0              STRB     r0,[r4,#0x1a]
;;;8127   
;;;8128   numOfForvardBps=0;
0046d0  f04f0500          MOV      r5,#0
0046d4  7665              STRB     r5,[r4,#0x19]
;;;8129   
;;;8130   //FORVARDBPSCHHOUR=10;
;;;8131   
;;;8132   if((FORVARDBPSCHHOUR<=0)||(FORVARDBPSCHHOUR>500))
0046d6  4ec9              LDR      r6,|L1.18940|
0046d8  f9b60000          LDRSH    r0,[r6,#0]  ; FORVARDBPSCHHOUR
0046dc  2800              CMP      r0,#0
0046de  dd02              BLE      |L1.18150|
0046e0  f5b07ffa          CMP      r0,#0x1f4
0046e4  dd02              BLE      |L1.18156|
                  |L1.18150|
;;;8133   	{
;;;8134   	FORVARDBPSCHHOUR=0;
0046e6  8035              STRH     r5,[r6,#0]
                  |L1.18152|
;;;8135   	return;
;;;8136   	}
;;;8137   
;;;8138   numOfForvardBps_minCnt++;
;;;8139   
;;;8140   
;;;8141   if(numOfForvardBps_minCnt>=60)
;;;8142   	{
;;;8143   	numOfForvardBps_minCnt=0;
;;;8144   	numOfForvardBps_hourCnt=lc640_read_int(EE_FORVBPSHOURCNT);
;;;8145   	numOfForvardBps_hourCnt++;
;;;8146   	if(numOfForvardBps_hourCnt>=(FORVARDBPSCHHOUR*NUMIST))
;;;8147   		{
;;;8148   		numOfForvardBps_hourCnt=0;
;;;8149   		}
;;;8150   	lc640_write_int(EE_FORVBPSHOURCNT,numOfForvardBps_hourCnt);
;;;8151   	}
;;;8152   
;;;8153   numOfForvardBps=numOfForvardBps_hourCnt/FORVARDBPSCHHOUR;
;;;8154   
;;;8155   //if(numOfForvardBps)
;;;8156   //numOfForvardBps_old=numOfForvardBps; 
;;;8157   }
0046e8  e8bd81f0          POP      {r4-r8,pc}
                  |L1.18156|
0046ec  7ee0              LDRB     r0,[r4,#0x1b]         ;8138  ; numOfForvardBps_minCnt
0046ee  f1000001          ADD      r0,r0,#1              ;8138
0046f2  b2c0              UXTB     r0,r0                 ;8138
0046f4  76e0              STRB     r0,[r4,#0x1b]         ;8138
0046f6  283c              CMP      r0,#0x3c              ;8141
0046f8  d31a              BCC      |L1.18224|
0046fa  76e5              STRB     r5,[r4,#0x1b]         ;8143
0046fc  f44f7794          MOV      r7,#0x128             ;8144
004700  4638              MOV      r0,r7                 ;8144
004702  f7fffffe          BL       lc640_read_int
004706  f1000001          ADD      r0,r0,#1              ;8145
00470a  b200              SXTH     r0,r0                 ;8145
00470c  f8a40066          STRH     r0,[r4,#0x66]         ;8145
004710  4abb              LDR      r2,|L1.18944|
004712  f9b61000          LDRSH    r1,[r6,#0]            ;8146  ; FORVARDBPSCHHOUR
004716  f9b22000          LDRSH    r2,[r2,#0]            ;8146  ; NUMIST
00471a  fb01f102          MUL      r1,r1,r2              ;8146
00471e  4281              CMP      r1,r0                 ;8146
004720  dc01              BGT      |L1.18214|
004722  f8a45066          STRH     r5,[r4,#0x66]         ;8148
                  |L1.18214|
004726  f9b41066          LDRSH    r1,[r4,#0x66]         ;8150  ; numOfForvardBps_hourCnt
00472a  4638              MOV      r0,r7                 ;8150
00472c  f7fffffe          BL       lc640_write_int
                  |L1.18224|
004730  f9b40066          LDRSH    r0,[r4,#0x66]         ;8153  ; numOfForvardBps_hourCnt
004734  f9b61000          LDRSH    r1,[r6,#0]            ;8153  ; FORVARDBPSCHHOUR
004738  fb90f0f1          SDIV     r0,r0,r1              ;8153
00473c  7660              STRB     r0,[r4,#0x19]         ;8153
00473e  e7d3              B        |L1.18152|
;;;8158   
                          ENDP

                  numOfForvardBps_init PROC
;;;8159   //-----------------------------------------------
;;;8160   void	numOfForvardBps_init(void)			//Ïðîãðàììà ñáðîñà ñèñòåìû ñìåíû ïåðâîãî èñòî÷íèêà äëÿ ðàâíîìåðíîãî èçíîñà ÁÏÑîâ
004740  b510              PUSH     {r4,lr}
;;;8161   {									//Äîëæíà âûçûâàòüñÿ ïðè èçìåíåíèè êîë-âà èñòî÷íèêîâ â ñòðóêòóðå
;;;8162   lc640_write_int(EE_FORVBPSHOURCNT,0);
004742  2100              MOVS     r1,#0
004744  f44f7094          MOV      r0,#0x128
004748  f7fffffe          BL       lc640_write_int
;;;8163   numOfForvardBps_minCnt=58;
00474c  49aa              LDR      r1,|L1.18936|
00474e  f04f003a          MOV      r0,#0x3a
004752  76c8              STRB     r0,[r1,#0x1b]
;;;8164   }
004754  bd10              POP      {r4,pc}
;;;8165   
                          ENDP

                  outVoltContrHndl PROC
;;;8166   //-----------------------------------------------
;;;8167   void outVoltContrHndl(void)
004756  b570              PUSH     {r4-r6,lr}
;;;8168   { 
;;;8169   if((load_U>U_OUT_KONTR_MAX)||(load_U<U_OUT_KONTR_MIN))
004758  4caa              LDR      r4,|L1.18948|
00475a  48ab              LDR      r0,|L1.18952|
;;;8170   	{
;;;8171   	outVoltContrHndlCnt_=0;
;;;8172   	if(outVoltContrHndlCnt<U_OUT_KONTR_DELAY)
00475c  4aab              LDR      r2,|L1.18956|
00475e  f9b41000          LDRSH    r1,[r4,#0]            ;8169  ; load_U
004762  f9b06000          LDRSH    r6,[r0,#0]            ;8169  ; U_OUT_KONTR_MAX
004766  2500              MOVS     r5,#0                 ;8171
004768  f9b20000          LDRSH    r0,[r2,#0]
00476c  4ba8              LDR      r3,|L1.18960|
00476e  42b1              CMP      r1,r6                 ;8169
004770  dc04              BGT      |L1.18300|
004772  4ea8              LDR      r6,|L1.18964|
004774  f9b66000          LDRSH    r6,[r6,#0]            ;8169  ; U_OUT_KONTR_MIN
004778  42b1              CMP      r1,r6                 ;8169
00477a  da0f              BGE      |L1.18332|
                  |L1.18300|
00477c  801d              STRH     r5,[r3,#0]            ;8171
00477e  49a6              LDR      r1,|L1.18968|
004780  f9b11000          LDRSH    r1,[r1,#0]  ; U_OUT_KONTR_DELAY
004784  4288              CMP      r0,r1
004786  da1b              BGE      |L1.18368|
;;;8173   		{
;;;8174   		outVoltContrHndlCnt++;
004788  f1000001          ADD      r0,r0,#1
00478c  b200              SXTH     r0,r0
00478e  8010              STRH     r0,[r2,#0]
;;;8175   		if(outVoltContrHndlCnt==U_OUT_KONTR_DELAY)
004790  4288              CMP      r0,r1
004792  d115              BNE      |L1.18368|
;;;8176   			{
;;;8177   			avar_uout_hndl(1);
004794  2001              MOVS     r0,#1
004796  f7fffffe          BL       avar_uout_hndl
00479a  e011              B        |L1.18368|
                  |L1.18332|
;;;8178   			}
;;;8179   		}
;;;8180   	}
;;;8181   else
;;;8182   	{
;;;8183   	if(outVoltContrHndlCnt)
00479c  b180              CBZ      r0,|L1.18368|
;;;8184   		{
;;;8185   		if(outVoltContrHndlCnt_<5)
00479e  f9b30000          LDRSH    r0,[r3,#0]  ; outVoltContrHndlCnt_
0047a2  2805              CMP      r0,#5
0047a4  da0c              BGE      |L1.18368|
;;;8186   			{
;;;8187   			outVoltContrHndlCnt_++;
0047a6  f1000001          ADD      r0,r0,#1
0047aa  b200              SXTH     r0,r0
0047ac  8018              STRH     r0,[r3,#0]
;;;8188   			if(outVoltContrHndlCnt_>=5)
0047ae  2805              CMP      r0,#5
0047b0  db06              BLT      |L1.18368|
;;;8189   				{
;;;8190   				outVoltContrHndlCnt=0;
0047b2  8015              STRH     r5,[r2,#0]
;;;8191   				if(uout_av)avar_uout_hndl(0);
0047b4  4899              LDR      r0,|L1.18972|
0047b6  7800              LDRB     r0,[r0,#0]  ; uout_av
0047b8  b110              CBZ      r0,|L1.18368|
0047ba  2000              MOVS     r0,#0
0047bc  f7fffffe          BL       avar_uout_hndl
                  |L1.18368|
;;;8192   				}
;;;8193   			}
;;;8194   		}
;;;8195   	}
;;;8196   
;;;8197   if (load_U<(USIGN*10)) 
0047c0  4897              LDR      r0,|L1.18976|
0047c2  f9b41000          LDRSH    r1,[r4,#0]  ; load_U
0047c6  f9b00000          LDRSH    r0,[r0,#0]  ; USIGN
0047ca  eb000080          ADD      r0,r0,r0,LSL #2
0047ce  ebb10f40          CMP      r1,r0,LSL #1
0047d2  da0b              BGE      |L1.18412|
;;;8198   	{
;;;8199   	if(!bSILENT)
0047d4  4893              LDR      r0,|L1.18980|
0047d6  6800              LDR      r0,[r0,#0]  ; bSILENT
0047d8  2800              CMP      r0,#0
0047da  d107              BNE      |L1.18412|
;;;8200   		{
;;;8201   		mess_send(MESS2RELE_HNDL,PARAM_RELE_BAT_IS_DISCHARGED,1,20);
0047dc  e8bd4070          POP      {r4-r6,lr}
0047e0  2314              MOVS     r3,#0x14
0047e2  2201              MOVS     r2,#1
0047e4  2172              MOVS     r1,#0x72
0047e6  20d2              MOVS     r0,#0xd2
0047e8  f7ffbffe          B.W      mess_send
                  |L1.18412|
;;;8202   		}
;;;8203   
;;;8204   	//bU_BAT2REL_AV_BAT=1;
;;;8205   	}
;;;8206   
;;;8207   
;;;8208   }
0047ec  bd70              POP      {r4-r6,pc}
;;;8209   
                          ENDP

                  vent_resurs_hndl PROC
;;;8210   //-----------------------------------------------
;;;8211   void vent_resurs_hndl(void)
0047ee  e92d47f0          PUSH     {r4-r10,lr}
;;;8212   {
;;;8213   char i;
;;;8214   char crc_in,crc_eval;
;;;8215   
;;;8216   for(i=0;i<NUMIST;i++)
0047f2  f04f0200          MOV      r2,#0
;;;8217   	{
;;;8218   	if((bps[i]._buff[7]&0xc0)==0x00)
;;;8219   		{
;;;8220   		bps[i]._vent_resurs_temp[0]=bps[i]._buff[7];
;;;8221   		}
;;;8222   	else if((bps[i]._buff[7]&0xc0)==0x40)
;;;8223   		{
;;;8224   		bps[i]._vent_resurs_temp[1]=bps[i]._buff[7];
;;;8225   		}
;;;8226   	else if((bps[i]._buff[7]&0xc0)==0x80)
;;;8227   		{
;;;8228   		bps[i]._vent_resurs_temp[2]=bps[i]._buff[7];
;;;8229   		}
;;;8230   	else if((bps[i]._buff[7]&0xc0)==0xc0)
;;;8231   		{
;;;8232   		bps[i]._vent_resurs_temp[3]=bps[i]._buff[7];
;;;8233   		}
;;;8234   	crc_in=0;
;;;8235   	crc_in|=(bps[i]._vent_resurs_temp[0]&0x30)>>4;
;;;8236   	crc_in|=(bps[i]._vent_resurs_temp[1]&0x30)>>2;
;;;8237   	crc_in|=(bps[i]._vent_resurs_temp[2]&0x30);
;;;8238   	crc_in|=(bps[i]._vent_resurs_temp[3]&0x30)<<2;
;;;8239   
;;;8240   	crc_eval =bps[i]._vent_resurs_temp[0]&0x0f;
;;;8241   	crc_eval^=bps[i]._vent_resurs_temp[1]&0x0f;
;;;8242   	crc_eval^=bps[i]._vent_resurs_temp[2]&0x0f;
;;;8243   	crc_eval^=bps[i]._vent_resurs_temp[3]&0x0f;
;;;8244   
;;;8245   	if(crc_eval==crc_in)
;;;8246   		{
;;;8247   		unsigned short temp_US;
;;;8248   		temp_US=0;
;;;8249   
;;;8250   		temp_US|=(bps[i]._vent_resurs_temp[3]&0x0f);
;;;8251   		temp_US<<=4;
;;;8252   		temp_US|=(bps[i]._vent_resurs_temp[2]&0x0f);
;;;8253   		temp_US<<=4;
;;;8254   		temp_US|=(bps[i]._vent_resurs_temp[1]&0x0f);
;;;8255   		temp_US<<=4;
;;;8256   		temp_US|=(bps[i]._vent_resurs_temp[0]&0x0f);
;;;8257   
;;;8258   		if(bps[i]._vent_resurs!=temp_US)bps[i]._vent_resurs=temp_US;
;;;8259   		}
;;;8260   
;;;8261   	if((bps[i]._vent_resurs>TVENTMAX*10)&&(TVENTMAX>0))
0047f6  488c              LDR      r0,|L1.18984|
0047f8  f8dfc230          LDR      r12,|L1.18988|
0047fc  f9b06000          LDRSH    r6,[r0,#0]
004800  487f              LDR      r0,|L1.18944|
004802  f9b07000          LDRSH    r7,[r0,#0]            ;8216
004806  e06e              B        |L1.18662|
                  |L1.18440|
004808  ebc200c2          RSB      r0,r2,r2,LSL #3       ;8218
00480c  eb001002          ADD      r0,r0,r2,LSL #4       ;8218
004810  eb0c0080          ADD      r0,r12,r0,LSL #2      ;8218
004814  7b41              LDRB     r1,[r0,#0xd]          ;8218
004816  098b              LSRS     r3,r1,#6              ;8218
004818  d006              BEQ      |L1.18472|
00481a  2301              MOVS     r3,#1                 ;8222
00481c  ebb31f91          CMP      r3,r1,LSR #6          ;8222
004820  d105              BNE      |L1.18478|
004822  f8801055          STRB     r1,[r0,#0x55]         ;8224
004826  e00f              B        |L1.18504|
                  |L1.18472|
004828  f8801054          STRB     r1,[r0,#0x54]         ;8220
00482c  e00c              B        |L1.18504|
                  |L1.18478|
00482e  2302              MOVS     r3,#2                 ;8226
004830  ebb31f91          CMP      r3,r1,LSR #6          ;8226
004834  d102              BNE      |L1.18492|
004836  f8801056          STRB     r1,[r0,#0x56]         ;8228
00483a  e005              B        |L1.18504|
                  |L1.18492|
00483c  2303              MOVS     r3,#3                 ;8230
00483e  ebb31f91          CMP      r3,r1,LSR #6          ;8230
004842  d101              BNE      |L1.18504|
004844  f8801057          STRB     r1,[r0,#0x57]         ;8232
                  |L1.18504|
004848  f8101f54          LDRB     r1,[r0,#0x54]!        ;8235
00484c  f3c11401          UBFX     r4,r1,#4,#2           ;8235
004850  7843              LDRB     r3,[r0,#1]            ;8236
004852  f0030530          AND      r5,r3,#0x30           ;8236
004856  ea440495          ORR      r4,r4,r5,LSR #2       ;8236
00485a  f8909002          LDRB     r9,[r0,#2]            ;8237
00485e  f0090830          AND      r8,r9,#0x30           ;8237
004862  ea480804          ORR      r8,r8,r4              ;8237
004866  78c5              LDRB     r5,[r0,#3]            ;8238
004868  f1a00054          SUB      r0,r0,#0x54           ;8238
00486c  f0050430          AND      r4,r5,#0x30           ;8238
004870  ea480884          ORR      r8,r8,r4,LSL #2       ;8238
004874  f001010f          AND      r1,r1,#0xf            ;8240
004878  f003040f          AND      r4,r3,#0xf            ;8241
00487c  ea840a01          EOR      r10,r4,r1             ;8241
004880  f009030f          AND      r3,r9,#0xf            ;8242
004884  ea83090a          EOR      r9,r3,r10             ;8242
004888  f005050f          AND      r5,r5,#0xf            ;8243
00488c  ea850909          EOR      r9,r5,r9              ;8243
004890  45c1              CMP      r9,r8                 ;8245
004892  d113              BNE      |L1.18620|
004894  ea4f1505          LSL      r5,r5,#4              ;8251
004898  ea430305          ORR      r3,r3,r5              ;8252
00489c  ea4f1303          LSL      r3,r3,#4              ;8253
0048a0  ea440403          ORR      r4,r4,r3              ;8254
0048a4  ea4f5304          LSL      r3,r4,#20             ;8255
0048a8  ea4f4313          LSR      r3,r3,#16             ;8255
0048ac  ea410103          ORR      r1,r1,r3              ;8256
0048b0  f8b03058          LDRH     r3,[r0,#0x58]         ;8258
0048b4  428b              CMP      r3,r1                 ;8258
0048b6  d001              BEQ      |L1.18620|
0048b8  f8a01058          STRH     r1,[r0,#0x58]         ;8258
                  |L1.18620|
0048bc  f8b01058          LDRH     r1,[r0,#0x58]
0048c0  eb060386          ADD      r3,r6,r6,LSL #2
0048c4  ebb10f43          CMP      r1,r3,LSL #1
0048c8  dd06              BLE      |L1.18648|
0048ca  2e00              CMP      r6,#0
0048cc  dd04              BLE      |L1.18648|
;;;8262   		{
;;;8263   		bps[i]._av|=(1<<4);
0048ce  7841              LDRB     r1,[r0,#1]
0048d0  f0410110          ORR      r1,r1,#0x10
0048d4  7041              STRB     r1,[r0,#1]
0048d6  e003              B        |L1.18656|
                  |L1.18648|
;;;8264   		}
;;;8265   	else bps[i]._av&=~(1<<4);
0048d8  7841              LDRB     r1,[r0,#1]
0048da  f0210110          BIC      r1,r1,#0x10
0048de  7041              STRB     r1,[r0,#1]
                  |L1.18656|
0048e0  f1020201          ADD      r2,r2,#1              ;8216
0048e4  b2d2              UXTB     r2,r2                 ;8216
                  |L1.18662|
0048e6  42ba              CMP      r2,r7                 ;8216
0048e8  db8e              BLT      |L1.18440|
;;;8266   	}
;;;8267   }
0048ea  e8bd87f0          POP      {r4-r10,pc}
;;;8268   
                          ENDP

                  vent_hndl PROC
;;;8269   //-----------------------------------------------
;;;8270   void vent_hndl(void)
0048ee  e92d4ff0          PUSH     {r4-r11,lr}
;;;8271   {
0048f2  b087              SUB      sp,sp,#0x1c
;;;8272   if(RELEVENTSIGN==rvsAKB)
0048f4  484e              LDR      r0,|L1.18992|
;;;8273   	{
;;;8274   	if(vent_stat==0)
0048f6  4c40              LDR      r4,|L1.18936|
;;;8275   		{
;;;8276   		if	(
;;;8277   			(BAT_IS_ON[0]==bisON)&&((bat[0]._Tb>TVENTON)||(bat[0]._nd))
0048f8  494e              LDR      r1,|L1.18996|
;;;8278   			||
;;;8279   			(BAT_IS_ON[1]==bisON)&&((bat[1]._Tb>TVENTON)||(bat[1]._nd))
;;;8280   			)
;;;8281   			{
;;;8282   			vent_stat=1;
;;;8283   			}
;;;8284   		}
;;;8285   	else if(vent_stat==1)
;;;8286   		{
;;;8287   		if	(
;;;8288   			((BAT_IS_ON[0]!=bisON)||((BAT_IS_ON[0]==bisON)&&(bat[0]._Tb<TVENTOFF)&&(!bat[0]._nd)))
0048fa  4a4f              LDR      r2,|L1.19000|
0048fc  7800              LDRB     r0,[r0,#0]            ;8272  ; RELEVENTSIGN
0048fe  f9943000          LDRSB    r3,[r4,#0]            ;8274
004902  f9b11000          LDRSH    r1,[r1,#0]            ;8277
004906  f9b22000          LDRSH    r2,[r2,#0]
00490a  b148              CBZ      r0,|L1.18720|
;;;8289   			&&
;;;8290   			((BAT_IS_ON[1]!=bisON)||((BAT_IS_ON[1]==bisON)&&(bat[1]._Tb<TVENTOFF)&&(!bat[1]._nd)))
;;;8291   			)
;;;8292   			{
;;;8293   			vent_stat=0;
;;;8294   			}
;;;8295   		}
;;;8296   	}
;;;8297   else if(RELEVENTSIGN==rvsBPS)
00490c  2802              CMP      r0,#2
00490e  d03c              BEQ      |L1.18826|
;;;8298   	{
;;;8299   /*	if	(
;;;8300   		(((bps[0]._flags_tm&0x06)||(bps[0]._cnt>=30)))||
;;;8301   		(((bps[1]._flags_tm&0x06)||(bps[1]._cnt>=30))&&(NUMIST>1))||
;;;8302   		(((bps[2]._flags_tm&0x06)||(bps[2]._cnt>=30))&&(NUMIST>2))||
;;;8303   		(((bps[3]._flags_tm&0x06)||(bps[3]._cnt>=30))&&(NUMIST>3))||
;;;8304   		(((bps[4]._flags_tm&0x06)||(bps[4]._cnt>=30))&&(NUMIST>4))||
;;;8305   		(((bps[5]._flags_tm&0x06)||(bps[5]._cnt>=30))&&(NUMIST>5))||
;;;8306   		(((bps[6]._flags_tm&0x06)||(bps[6]._cnt>=30))&&(NUMIST>6))
;;;8307   		)
;;;8308   		{
;;;8309   		vent_stat=1;
;;;8310   		}
;;;8311   	else vent_stat=0;
;;;8312   	*/
;;;8313   
;;;8314   	if	(
;;;8315   		((NUMIST)&&((bps[0]._Ti>TVENTON)||(bps[0]._cnt>=30)))
;;;8316   		||
;;;8317   		((NUMIST>1)&&((bps[1]._Ti>TVENTON)||(bps[1]._cnt>=30)))
;;;8318   		||
;;;8319   		((NUMIST>2)&&((bps[2]._Ti>TVENTON)||(bps[2]._cnt>=30)))
;;;8320   		||
;;;8321   		((NUMIST>3)&&((bps[3]._Ti>TVENTON)||(bps[3]._cnt>=30)))
;;;8322   		||
;;;8323   		((NUMIST>4)&&((bps[4]._Ti>TVENTON)||(bps[4]._cnt>=30)))
;;;8324   		||
;;;8325   		((NUMIST>5)&&((bps[5]._Ti>TVENTON)||(bps[5]._cnt>=30)))
;;;8326   		||
;;;8327   		((NUMIST>6)&&((bps[6]._Ti>TVENTON)||(bps[6]._cnt>=30)))
;;;8328   		||
;;;8329   		((NUMIST>7)&&((bps[7]._Ti>TVENTON)||(bps[7]._cnt>=30)))
;;;8330   		)
;;;8331   		{
;;;8332   		vent_stat=1;
;;;8333   		}
;;;8334   	else if(vent_stat==1)
;;;8335   		{
;;;8336   		if	(
;;;8337   			((!NUMIST)||((NUMIST)&&(bps[0]._Ti<TVENTOFF)&&(bps[0]._cnt<10)))
;;;8338   			&&
;;;8339   			((NUMIST<2)||((NUMIST>=2)&&(bps[1]._Ti<TVENTOFF)&&(bps[1]._cnt<10)))
;;;8340   			&&
;;;8341   			((NUMIST<3)||((NUMIST>=3)&&(bps[2]._Ti<TVENTOFF)&&(bps[2]._cnt<10)))
;;;8342   			&&
;;;8343   			((NUMIST<4)||((NUMIST>=4)&&(bps[3]._Ti<TVENTOFF)&&(bps[3]._cnt<10)))
;;;8344   			&&
;;;8345   			((NUMIST<5)||((NUMIST>=5)&&(bps[4]._Ti<TVENTOFF)&&(bps[4]._cnt<10)))
;;;8346   			&&
;;;8347   			((NUMIST<6)||((NUMIST>=6)&&(bps[5]._Ti<TVENTOFF)&&(bps[5]._cnt<10)))
;;;8348   			&&
;;;8349   			((NUMIST<7)||((NUMIST>=7)&&(bps[6]._Ti<TVENTOFF)&&(bps[6]._cnt<10)))
;;;8350   			&&
;;;8351   			((NUMIST<8)||((NUMIST>=8)&&(bps[7]._Ti<TVENTOFF)&&(bps[7]._cnt<10)))
;;;8352   			)
;;;8353   			{
;;;8354   			vent_stat=0;
;;;8355   			}
;;;8356   		}
;;;8357   	}
;;;8358   else if(RELEVENTSIGN==rvsEXT)
004910  2801              CMP      r0,#1
004912  d03b              BEQ      |L1.18828|
;;;8359   	{
;;;8360   	if	(
;;;8361   		((NUMDT)&&((t_ext[0]>TVENTON)||(ND_EXT[0])))
;;;8362   		||
;;;8363   		((NUMDT>1)&&((t_ext[1]>TVENTON)||(ND_EXT[1])))
;;;8364   		||
;;;8365   		((NUMDT>2)&&((t_ext[2]>TVENTON)||(ND_EXT[2])))
;;;8366   		)
;;;8367   		{
;;;8368   		vent_stat=1;
;;;8369   		}
;;;8370   	else if(vent_stat==1)
;;;8371   		{
;;;8372   		if	(
;;;8373   			((!NUMDT)||((NUMDT)&&(t_ext[0]<TVENTOFF)&&(!ND_EXT[0])))
;;;8374   			&&
;;;8375   			((NUMDT<2)||((NUMDT>=2)&&(t_ext[1]<TVENTOFF)&&(!ND_EXT[1])))
;;;8376   			&&
;;;8377   			((NUMDT<3)||((NUMDT>=3)&&(t_ext[2]<TVENTOFF)&&(!ND_EXT[2])))
;;;8378   			)
;;;8379   			{
;;;8380   			vent_stat=0;
;;;8381   			}
;;;8382   		}
;;;8383   	}
;;;8384   else vent_stat=1;
004914  f04f0001          MOV      r0,#1
004918  7020              STRB     r0,[r4,#0]
                  |L1.18714|
;;;8385   }
00491a  b007              ADD      sp,sp,#0x1c
00491c  e8bd8ff0          POP      {r4-r11,pc}
                  |L1.18720|
004920  4f46              LDR      r7,|L1.19004|
004922  f8df811c          LDR      r8,|L1.19008|
004926  f9b7000a          LDRSH    r0,[r7,#0xa]          ;8277
00492a  7b3d              LDRB     r5,[r7,#0xc]          ;8277
00492c  f9b76056          LDRSH    r6,[r7,#0x56]         ;8279
004930  f898c000          LDRB     r12,[r8,#0]           ;8276
004934  f8977058          LDRB     r7,[r7,#0x58]         ;8279
004938  f8988001          LDRB     r8,[r8,#1]            ;8279
00493c  b12b              CBZ      r3,|L1.18762|
00493e  2b01              CMP      r3,#1                 ;8285
004940  d1eb              BNE      |L1.18714|
004942  f1bc0f55          CMP      r12,#0x55             ;8287
004946  d115              BNE      |L1.18804|
004948  e010              B        |L1.18796|
                  |L1.18762|
00494a  f1bc0f55          CMP      r12,#0x55             ;8276
00494e  d102              BNE      |L1.18774|
004950  4288              CMP      r0,r1                 ;8277
004952  dc07              BGT      |L1.18788|
004954  b935              CBNZ     r5,|L1.18788|
                  |L1.18774|
004956  f1b80f55          CMP      r8,#0x55              ;8279
00495a  d1de              BNE      |L1.18714|
00495c  428e              CMP      r6,r1                 ;8279
00495e  dc01              BGT      |L1.18788|
004960  2f00              CMP      r7,#0                 ;8279
004962  d0da              BEQ      |L1.18714|
                  |L1.18788|
004964  f04f0001          MOV      r0,#1                 ;8282
004968  7020              STRB     r0,[r4,#0]            ;8282
00496a  e7d6              B        |L1.18714|
                  |L1.18796|
00496c  4290              CMP      r0,r2                 ;8288
00496e  dad4              BGE      |L1.18714|
004970  2d00              CMP      r5,#0                 ;8288
004972  d1d2              BNE      |L1.18714|
                  |L1.18804|
004974  f1b80f55          CMP      r8,#0x55              ;8290
004978  d103              BNE      |L1.18818|
00497a  4296              CMP      r6,r2                 ;8290
00497c  dacd              BGE      |L1.18714|
00497e  2f00              CMP      r7,#0                 ;8290
004980  d1cb              BNE      |L1.18714|
                  |L1.18818|
004982  f04f0000          MOV      r0,#0                 ;8293
004986  7020              STRB     r0,[r4,#0]            ;8293
004988  e7c7              B        |L1.18714|
                  |L1.18826|
00498a  e05b              B        |L1.19012|
                  |L1.18828|
00498c  e11e              B        |L1.19404|
00498e  0000              DCW      0x0000
                  |L1.18832|
                          DCD      ||.text||+0x890
                  |L1.18836|
004994  20202020          DCB      "    ",210,211,204,193,203,197,208,192,"!!!     ",0
004998  d2d3ccc1
00499c  cbc5d0c0
0049a0  21212120
0049a4  20202020
0049a8  00      
0049a9  00                DCB      0
0049aa  00                DCB      0
0049ab  00                DCB      0
                  |L1.18860|
0049ac  2020cfce          DCB      "  ",207,206,209,203,197," ",194,202,203,222,215,197,205
0049b0  d1cbc520
0049b4  c2cacbde
0049b8  d7c5cd  
0049bb  c8df2020          DCB      200,223,"   ",0
0049bf  2000    
0049c1  00                DCB      0
0049c2  00                DCB      0
0049c3  00                DCB      0
                  |L1.18884|
0049c4  2020c1d3          DCB      "  ",193,211,196,197,210," ",207,208,206,196,206,203,198
0049c8  c4c5d220
0049cc  cfd0cec4
0049d0  cecbc6  
0049d3  c5cd2020          DCB      197,205,"   ",0
0049d7  2000    
0049d9  00                DCB      0
0049da  00                DCB      0
0049db  00                DCB      0
                  |L1.18908|
0049dc  20202020          DCB      "     ",194,219,202,203,222,215,200,210,197,"      ",0
0049e0  20c2dbca
0049e4  cbded7c8
0049e8  d2c52020
0049ec  20202020
0049f0  00      
0049f1  00                DCB      0
0049f2  00                DCB      0
0049f3  00                DCB      0
                  |L1.18932|
                          DCD      hv_vz_stat
                  |L1.18936|
                          DCD      ||area_number.23||
                  |L1.18940|
                          DCD      FORVARDBPSCHHOUR
                  |L1.18944|
                          DCD      NUMIST
                  |L1.18948|
                          DCD      load_U
                  |L1.18952|
                          DCD      U_OUT_KONTR_MAX
                  |L1.18956|
                          DCD      outVoltContrHndlCnt
                  |L1.18960|
                          DCD      outVoltContrHndlCnt_
                  |L1.18964|
                          DCD      U_OUT_KONTR_MIN
                  |L1.18968|
                          DCD      U_OUT_KONTR_DELAY
                  |L1.18972|
                          DCD      uout_av
                  |L1.18976|
                          DCD      USIGN
                  |L1.18980|
                          DCD      bSILENT
                  |L1.18984|
                          DCD      TVENTMAX
                  |L1.18988|
                          DCD      bps
                  |L1.18992|
                          DCD      RELEVENTSIGN
                  |L1.18996|
                          DCD      TVENTON
                  |L1.19000|
                          DCD      TVENTOFF
                  |L1.19004|
                          DCD      bat
                  |L1.19008|
                          DCD      BAT_IS_ON
                  |L1.19012|
004a44  4e85              LDR      r6,|L1.19548|
004a46  4884              LDR      r0,|L1.19544|
004a48  6ab5              LDR      r5,[r6,#0x28]         ;8315
004a4a  f9b00000          LDRSH    r0,[r0,#0]            ;8314  ; NUMIST
004a4e  78f6              LDRB     r6,[r6,#3]            ;8315
004a50  b118              CBZ      r0,|L1.19034|
004a52  428d              CMP      r5,r1                 ;8315
004a54  dc78              BGT      |L1.19272|
004a56  2e1e              CMP      r6,#0x1e              ;8315
004a58  d276              BCS      |L1.19272|
                  |L1.19034|
004a5a  f8dfc200          LDR      r12,|L1.19548|
004a5e  2801              CMP      r0,#1                 ;8317
004a60  f8dc7084          LDR      r7,[r12,#0x84]        ;8317
004a64  f89cc05f          LDRB     r12,[r12,#0x5f]       ;8317
004a68  f8cdc018          STR      r12,[sp,#0x18]        ;8317
004a6c  dd06              BLE      |L1.19068|
004a6e  428f              CMP      r7,r1                 ;8317
004a70  dc6a              BGT      |L1.19272|
004a72  f8ddc018          LDR      r12,[sp,#0x18]        ;8317
004a76  f1bc0f1e          CMP      r12,#0x1e             ;8317
004a7a  d265              BCS      |L1.19272|
                  |L1.19068|
004a7c  f8dfc1dc          LDR      r12,|L1.19548|
004a80  2802              CMP      r0,#2                 ;8319
004a82  f8dc80e0          LDR      r8,[r12,#0xe0]        ;8319
004a86  f8cd8014          STR      r8,[sp,#0x14]         ;8319
004a8a  f89cc0bb          LDRB     r12,[r12,#0xbb]       ;8319
004a8e  f8cdc010          STR      r12,[sp,#0x10]        ;8319
004a92  dd08              BLE      |L1.19110|
004a94  f8ddc014          LDR      r12,[sp,#0x14]        ;8319
004a98  458c              CMP      r12,r1                ;8319
004a9a  dc55              BGT      |L1.19272|
004a9c  f8ddc010          LDR      r12,[sp,#0x10]        ;8319
004aa0  f1bc0f1e          CMP      r12,#0x1e             ;8319
004aa4  d250              BCS      |L1.19272|
                  |L1.19110|
004aa6  f8dfc1b4          LDR      r12,|L1.19548|
004aaa  2803              CMP      r0,#3                 ;8321
004aac  f8dc813c          LDR      r8,[r12,#0x13c]       ;8321
004ab0  f8cd800c          STR      r8,[sp,#0xc]          ;8321
004ab4  f89cc117          LDRB     r12,[r12,#0x117]      ;8321
004ab8  f8cdc008          STR      r12,[sp,#8]           ;8321
004abc  dd08              BLE      |L1.19152|
004abe  f8ddc00c          LDR      r12,[sp,#0xc]         ;8321
004ac2  458c              CMP      r12,r1                ;8321
004ac4  dc40              BGT      |L1.19272|
004ac6  f8ddc008          LDR      r12,[sp,#8]           ;8321
004aca  f1bc0f1e          CMP      r12,#0x1e             ;8321
004ace  d23b              BCS      |L1.19272|
                  |L1.19152|
004ad0  f8df8188          LDR      r8,|L1.19548|
004ad4  2804              CMP      r0,#4                 ;8323
004ad6  f8d8c198          LDR      r12,[r8,#0x198]       ;8323
004ada  f8988173          LDRB     r8,[r8,#0x173]        ;8323
004ade  f8cd8004          STR      r8,[sp,#4]            ;8323
004ae2  dd06              BLE      |L1.19186|
004ae4  458c              CMP      r12,r1                ;8323
004ae6  dc2f              BGT      |L1.19272|
004ae8  f8dd8004          LDR      r8,[sp,#4]            ;8323
004aec  f1b80f1e          CMP      r8,#0x1e              ;8323
004af0  d22a              BCS      |L1.19272|
                  |L1.19186|
004af2  f8df9168          LDR      r9,|L1.19548|
004af6  2805              CMP      r0,#5                 ;8325
004af8  f8d981f4          LDR      r8,[r9,#0x1f4]        ;8325
004afc  f89991cf          LDRB     r9,[r9,#0x1cf]        ;8325
004b00  f8cd9000          STR      r9,[sp,#0]            ;8325
004b04  dd06              BLE      |L1.19220|
004b06  4588              CMP      r8,r1                 ;8325
004b08  dc1e              BGT      |L1.19272|
004b0a  f8dd9000          LDR      r9,[sp,#0]            ;8325
004b0e  f1b90f1e          CMP      r9,#0x1e              ;8325
004b12  d219              BCS      |L1.19272|
                  |L1.19220|
004b14  f8dfa144          LDR      r10,|L1.19548|
004b18  2806              CMP      r0,#6                 ;8327
004b1a  f89ae22b          LDRB     lr,[r10,#0x22b]       ;8327
004b1e  f8da9250          LDR      r9,[r10,#0x250]       ;8327
004b22  dd04              BLE      |L1.19246|
004b24  4589              CMP      r9,r1                 ;8327
004b26  dc0f              BGT      |L1.19272|
004b28  f1be0f1e          CMP      lr,#0x1e              ;8327
004b2c  d20c              BCS      |L1.19272|
                  |L1.19246|
004b2e  f8dfb12c          LDR      r11,|L1.19548|
004b32  2807              CMP      r0,#7                 ;8329
004b34  f8dba2ac          LDR      r10,[r11,#0x2ac]      ;8329
004b38  f89bb287          LDRB     r11,[r11,#0x287]      ;8329
004b3c  dd08              BLE      |L1.19280|
004b3e  458a              CMP      r10,r1                ;8329
004b40  dc02              BGT      |L1.19272|
004b42  f1bb0f1e          CMP      r11,#0x1e             ;8329
004b46  d303              BCC      |L1.19280|
                  |L1.19272|
004b48  f04f0001          MOV      r0,#1                 ;8332
004b4c  7020              STRB     r0,[r4,#0]            ;8332
                  |L1.19278|
004b4e  e6e4              B        |L1.18714|
                  |L1.19280|
004b50  2b01              CMP      r3,#1                 ;8334
004b52  d1fc              BNE      |L1.19278|
004b54  b118              CBZ      r0,|L1.19294|
004b56  4295              CMP      r5,r2                 ;8337
004b58  daf9              BGE      |L1.19278|
004b5a  2e0a              CMP      r6,#0xa               ;8337
004b5c  d2f7              BCS      |L1.19278|
                  |L1.19294|
004b5e  2802              CMP      r0,#2                 ;8339
004b60  db04              BLT      |L1.19308|
004b62  4297              CMP      r7,r2                 ;8339
004b64  daf3              BGE      |L1.19278|
004b66  9906              LDR      r1,[sp,#0x18]         ;8339
004b68  290a              CMP      r1,#0xa               ;8339
004b6a  d2f0              BCS      |L1.19278|
                  |L1.19308|
004b6c  2803              CMP      r0,#3                 ;8341
004b6e  db05              BLT      |L1.19324|
004b70  9905              LDR      r1,[sp,#0x14]         ;8341
004b72  4291              CMP      r1,r2                 ;8341
004b74  daeb              BGE      |L1.19278|
004b76  9904              LDR      r1,[sp,#0x10]         ;8341
004b78  290a              CMP      r1,#0xa               ;8341
004b7a  d2e8              BCS      |L1.19278|
                  |L1.19324|
004b7c  2804              CMP      r0,#4                 ;8343
004b7e  db05              BLT      |L1.19340|
004b80  9903              LDR      r1,[sp,#0xc]          ;8343
004b82  4291              CMP      r1,r2                 ;8343
004b84  dae3              BGE      |L1.19278|
004b86  9902              LDR      r1,[sp,#8]            ;8343
004b88  290a              CMP      r1,#0xa               ;8343
004b8a  d2e0              BCS      |L1.19278|
                  |L1.19340|
004b8c  2805              CMP      r0,#5                 ;8345
004b8e  db04              BLT      |L1.19354|
004b90  4594              CMP      r12,r2                ;8345
004b92  dadc              BGE      |L1.19278|
004b94  9901              LDR      r1,[sp,#4]            ;8345
004b96  290a              CMP      r1,#0xa               ;8345
004b98  d2d9              BCS      |L1.19278|
                  |L1.19354|
004b9a  2806              CMP      r0,#6                 ;8347
004b9c  db04              BLT      |L1.19368|
004b9e  4590              CMP      r8,r2                 ;8347
004ba0  dad5              BGE      |L1.19278|
004ba2  9900              LDR      r1,[sp,#0]            ;8347
004ba4  290a              CMP      r1,#0xa               ;8347
004ba6  d2d2              BCS      |L1.19278|
                  |L1.19368|
004ba8  2807              CMP      r0,#7                 ;8349
004baa  db04              BLT      |L1.19382|
004bac  4591              CMP      r9,r2                 ;8349
004bae  dace              BGE      |L1.19278|
004bb0  f1be0f0a          CMP      lr,#0xa               ;8349
004bb4  d2cb              BCS      |L1.19278|
                  |L1.19382|
004bb6  2808              CMP      r0,#8                 ;8351
004bb8  db04              BLT      |L1.19396|
004bba  4592              CMP      r10,r2                ;8351
004bbc  dac7              BGE      |L1.19278|
004bbe  f1bb0f0a          CMP      r11,#0xa              ;8351
004bc2  d2c4              BCS      |L1.19278|
                  |L1.19396|
004bc4  f04f0000          MOV      r0,#0                 ;8354
004bc8  7020              STRB     r0,[r4,#0]            ;8354
                  |L1.19402|
004bca  e6a6              B        |L1.18714|
                  |L1.19404|
004bcc  4824              LDR      r0,|L1.19552|
004bce  4d25              LDR      r5,|L1.19556|
004bd0  4e25              LDR      r6,|L1.19560|
004bd2  f9b00000          LDRSH    r0,[r0,#0]            ;8360  ; NUMDT
004bd6  f9b55000          LDRSH    r5,[r5,#0]            ;8361
004bda  7836              LDRB     r6,[r6,#0]            ;8361
004bdc  b110              CBZ      r0,|L1.19428|
004bde  428d              CMP      r5,r1                 ;8361
004be0  dc1d              BGT      |L1.19486|
004be2  b9e6              CBNZ     r6,|L1.19486|
                  |L1.19428|
004be4  4f1f              LDR      r7,|L1.19556|
004be6  f8dfc080          LDR      r12,|L1.19560|
004bea  2801              CMP      r0,#1                 ;8363
004bec  f9b77002          LDRSH    r7,[r7,#2]            ;8363
004bf0  f89cc001          LDRB     r12,[r12,#1]          ;8363
004bf4  dd04              BLE      |L1.19456|
004bf6  428f              CMP      r7,r1                 ;8363
004bf8  dc11              BGT      |L1.19486|
004bfa  f1bc0f00          CMP      r12,#0                ;8363
004bfe  d10e              BNE      |L1.19486|
                  |L1.19456|
004c00  f8df8060          LDR      r8,|L1.19556|
004c04  f8df9060          LDR      r9,|L1.19560|
004c08  2802              CMP      r0,#2                 ;8365
004c0a  f9b88004          LDRSH    r8,[r8,#4]            ;8365
004c0e  f8999002          LDRB     r9,[r9,#2]            ;8365
004c12  dd08              BLE      |L1.19494|
004c14  4588              CMP      r8,r1                 ;8365
004c16  dc02              BGT      |L1.19486|
004c18  f1b90f00          CMP      r9,#0                 ;8365
004c1c  d003              BEQ      |L1.19494|
                  |L1.19486|
004c1e  f04f0001          MOV      r0,#1                 ;8368
004c22  7020              STRB     r0,[r4,#0]            ;8368
004c24  e679              B        |L1.18714|
                  |L1.19494|
004c26  2b01              CMP      r3,#1                 ;8370
004c28  d191              BNE      |L1.19278|
004c2a  b118              CBZ      r0,|L1.19508|
004c2c  4295              CMP      r5,r2                 ;8373
004c2e  da8e              BGE      |L1.19278|
004c30  2e00              CMP      r6,#0                 ;8373
004c32  d18c              BNE      |L1.19278|
                  |L1.19508|
004c34  2802              CMP      r0,#2                 ;8375
004c36  db04              BLT      |L1.19522|
004c38  4297              CMP      r7,r2                 ;8375
004c3a  da88              BGE      |L1.19278|
004c3c  f1bc0f00          CMP      r12,#0                ;8375
004c40  d185              BNE      |L1.19278|
                  |L1.19522|
004c42  2803              CMP      r0,#3                 ;8377
004c44  db04              BLT      |L1.19536|
004c46  4590              CMP      r8,r2                 ;8377
004c48  dabf              BGE      |L1.19402|
004c4a  f1b90f00          CMP      r9,#0                 ;8377
004c4e  d1bc              BNE      |L1.19402|
                  |L1.19536|
004c50  f04f0000          MOV      r0,#0                 ;8380
004c54  7020              STRB     r0,[r4,#0]            ;8380
004c56  e660              B        |L1.18714|
;;;8386   
                          ENDP

                  |L1.19544|
                          DCD      NUMIST
                  |L1.19548|
                          DCD      bps
                  |L1.19552|
                          DCD      NUMDT
                  |L1.19556|
                          DCD      t_ext
                  |L1.19560|
                          DCD      ND_EXT

                          AREA ||area_number.2||, CODE, READONLY, ALIGN=2

                          EXPORTAS ||area_number.2||, ||.text||
                  samokalibr_init PROC
;;;232    //-----------------------------------------------
;;;233    void ke_start(char in)
000000  4902              LDR      r1,|L2.12|
;;;234    {          
000002  f24060f9          MOV      r0,#0x6f9
;;;235    ke_start_stat=(enum_ke_start_stat)0;		 
000006  87c8              STRH     r0,[r1,#0x3e]
000008  4770              BX       lr
;;;236    
;;;237    if(spc_stat==spcVZ)ke_start_stat=kssNOT_VZ;
;;;238    #ifndef UKU_220_IPS_TERMOKOMPENSAT
;;;239    else if(BAT_IS_ON[in]!=bisON)ke_start_stat=kssNOT_BAT;
;;;240    #endif
;;;241    else if(bat[in]._av&(1<<0))ke_start_stat=kssNOT_BAT_AV;
;;;242    else if(bat[in]._temper_stat&(1<<1))ke_start_stat=kssNOT_BAT_AV_T;
;;;243    else if(bat[in]._av&(1<<1))ke_start_stat=kssNOT_BAT_AV_ASS;
;;;244    else if(bat[in]._Ib>IKB)ke_start_stat=kssNOT_BAT_ZAR;
;;;245    else if(bat[in]._Ib<-IKB)ke_start_stat=kssNOT_BAT_RAZR;
;;;246    else if((spc_stat==spcKE)&&(spc_bat==0))ke_start_stat=kssNOT_KE1;
;;;247    else if((spc_stat==spcKE)&&(spc_bat==1))ke_start_stat=kssNOT_KE2;
;;;248    else 
;;;249    	{
;;;250    
;;;251    	ke_start_stat=kssYES;
;;;252    
;;;253    	spc_stat=spcKE;
;;;254    	__ee_spc_stat=spcKE;
;;;255    	lc640_write_int(EE_SPC_STAT,__ee_spc_stat);
;;;256    	
;;;257    	spc_bat=in;
;;;258    	__ee_spc_bat=in;
;;;259    	lc640_write_int(EE_SPC_BAT,__ee_spc_bat);
;;;260    
;;;261    	bat[in]._zar_cnt_ke=0;
;;;262    	lc640_write_int(ADR_EE_BAT_ZAR_CNT_KE[in],0);
;;;263    	
;;;264    	spc_phase=0;
;;;265    	__ee_spc_phase=0;
;;;266    	lc640_write_int(EE_SPC_PHASE,__ee_spc_phase);
;;;267    
;;;268    	//ke_mem_hndl(in,lc640_read_int(ADR_EE_BAT_ZAR_CNT_KE[spc_bat]));
;;;269    
;;;270    		{					
;;;271    		signed short temp_temp;
;;;272    		signed char temp;
;;;273    		temp_temp=bat[in]._u_old[((bat_u_old_cnt+1)&0x07)]; 
;;;274    		    
;;;275    		temp=LPC_RTC->YEAR;
;;;276    		gran_char(&temp,1,99);
;;;277    		*((char*)(&(ke_date[0])))=temp;
;;;278    			
;;;279    		temp=LPC_RTC->MONTH;
;;;280    		gran_char(&temp,1,12);
;;;281    		*(((char*)(&(ke_date[0])))+1)=temp;
;;;282    		
;;;283    		temp=LPC_RTC->DOM;
;;;284    		gran_char(&temp,1,31);
;;;285    		*(((char*)(&(ke_date[0])))+2)=temp;			
;;;286    				
;;;287    		*(((char*)(&(ke_date[0])))+3)=*((char*)&temp_temp);
;;;288    		lc640_write_long(EE_SPC_KE_DATE0,ke_date[0]);
;;;289    
;;;290    		temp=LPC_RTC->HOUR;
;;;291    		gran_char(&temp,0,23);
;;;292    		*((char*)(&(ke_date[1])))=temp;
;;;293                   
;;;294    		temp=LPC_RTC->MIN;
;;;295    		gran_char(&temp,0,59);
;;;296    		*(((char*)(&(ke_date[1])))+1)=temp;
;;;297    	          
;;;298    		temp=LPC_RTC->SEC;
;;;299    		gran_char(&temp,0,59);
;;;300    		*(((char*)(&(ke_date[1])))+2)=temp;
;;;301    			
;;;302    		*(((char*)(&(ke_date[1])))+3)=*(((char*)&temp_temp)+1);
;;;303    		lc640_write_long(EE_SPC_KE_DATE1,ke_date[1]);
;;;304    		}
;;;305    
;;;306    	}
;;;307    }
;;;308    
                          ENDP

00000a  0000              DCW      0x0000
                  |L2.12|
                          DCD      ||area_number.23||

                          AREA ||area_number.3||, CODE, READONLY, ALIGN=2

                          EXPORTAS ||area_number.3||, ||.text||
                  adc_drv6 PROC
;;;232    //-----------------------------------------------
;;;233    void ke_start(char in)
000000  e92d41f0          PUSH     {r4-r8,lr}
;;;234    {          
000004  4c80              LDR      r4,|L3.520|
;;;235    ke_start_stat=(enum_ke_start_stat)0;		 
000006  8860              LDRH     r0,[r4,#2]  ; adc_self_ch_buff
000008  8821              LDRH     r1,[r4,#0]  ; adc_self_ch_buff
00000a  1a40              SUBS     r0,r0,r1
00000c  b200              SXTH     r0,r0
;;;236    
;;;237    if(spc_stat==spcVZ)ke_start_stat=kssNOT_VZ;
00000e  f7fffffe          BL       abs_pal
000012  1da5              ADDS     r5,r4,#6
000014  8028              STRH     r0,[r5,#0]
000016  88a0              LDRH     r0,[r4,#4]  ; adc_self_ch_buff
;;;238    #ifndef UKU_220_IPS_TERMOKOMPENSAT
;;;239    else if(BAT_IS_ON[in]!=bisON)ke_start_stat=kssNOT_BAT;
;;;240    #endif
;;;241    else if(bat[in]._av&(1<<0))ke_start_stat=kssNOT_BAT_AV;
000018  8861              LDRH     r1,[r4,#2]  ; adc_self_ch_buff
00001a  1a40              SUBS     r0,r0,r1
00001c  b200              SXTH     r0,r0
00001e  f7fffffe          BL       abs_pal
000022  8068              STRH     r0,[r5,#2]
000024  88a0              LDRH     r0,[r4,#4]  ; adc_self_ch_buff
000026  8821              LDRH     r1,[r4,#0]  ; adc_self_ch_buff
000028  1a40              SUBS     r0,r0,r1
00002a  b200              SXTH     r0,r0
00002c  f7fffffe          BL       abs_pal
000030  80a8              STRH     r0,[r5,#4]
000032  f44f7196          MOV      r1,#0x12c
;;;242    else if(bat[in]._temper_stat&(1<<1))ke_start_stat=kssNOT_BAT_AV_T;
;;;243    else if(bat[in]._av&(1<<1))ke_start_stat=kssNOT_BAT_AV_ASS;
;;;244    else if(bat[in]._Ib>IKB)ke_start_stat=kssNOT_BAT_ZAR;
;;;245    else if(bat[in]._Ib<-IKB)ke_start_stat=kssNOT_BAT_RAZR;
;;;246    else if((spc_stat==spcKE)&&(spc_bat==0))ke_start_stat=kssNOT_KE1;
;;;247    else if((spc_stat==spcKE)&&(spc_bat==1))ke_start_stat=kssNOT_KE2;
;;;248    else 
;;;249    	{
;;;250    
;;;251    	ke_start_stat=kssYES;
;;;252    
;;;253    	spc_stat=spcKE;
;;;254    	__ee_spc_stat=spcKE;
;;;255    	lc640_write_int(EE_SPC_STAT,__ee_spc_stat);
;;;256    	
;;;257    	spc_bat=in;
;;;258    	__ee_spc_bat=in;
;;;259    	lc640_write_int(EE_SPC_BAT,__ee_spc_bat);
;;;260    
;;;261    	bat[in]._zar_cnt_ke=0;
;;;262    	lc640_write_int(ADR_EE_BAT_ZAR_CNT_KE[in],0);
;;;263    	
;;;264    	spc_phase=0;
;;;265    	__ee_spc_phase=0;
;;;266    	lc640_write_int(EE_SPC_PHASE,__ee_spc_phase);
;;;267    
;;;268    	//ke_mem_hndl(in,lc640_read_int(ADR_EE_BAT_ZAR_CNT_KE[spc_bat]));
;;;269    
;;;270    		{					
;;;271    		signed short temp_temp;
;;;272    		signed char temp;
;;;273    		temp_temp=bat[in]._u_old[((bat_u_old_cnt+1)&0x07)]; 
;;;274    		    
;;;275    		temp=LPC_RTC->YEAR;
;;;276    		gran_char(&temp,1,99);
;;;277    		*((char*)(&(ke_date[0])))=temp;
;;;278    			
;;;279    		temp=LPC_RTC->MONTH;
;;;280    		gran_char(&temp,1,12);
;;;281    		*(((char*)(&(ke_date[0])))+1)=temp;
;;;282    		
;;;283    		temp=LPC_RTC->DOM;
;;;284    		gran_char(&temp,1,31);
;;;285    		*(((char*)(&(ke_date[0])))+2)=temp;			
;;;286    				
;;;287    		*(((char*)(&(ke_date[0])))+3)=*((char*)&temp_temp);
;;;288    		lc640_write_long(EE_SPC_KE_DATE0,ke_date[0]);
;;;289    
;;;290    		temp=LPC_RTC->HOUR;
;;;291    		gran_char(&temp,0,23);
;;;292    		*((char*)(&(ke_date[1])))=temp;
;;;293                   
;;;294    		temp=LPC_RTC->MIN;
;;;295    		gran_char(&temp,0,59);
;;;296    		*(((char*)(&(ke_date[1])))+1)=temp;
;;;297    	          
;;;298    		temp=LPC_RTC->SEC;
;;;299    		gran_char(&temp,0,59);
;;;300    		*(((char*)(&(ke_date[1])))+2)=temp;
;;;301    			
;;;302    		*(((char*)(&(ke_date[1])))+3)=*(((char*)&temp_temp)+1);
;;;303    		lc640_write_long(EE_SPC_KE_DATE1,ke_date[1]);
;;;304    		}
;;;305    
;;;306    	}
;;;307    }
000036  f1a40696          SUB      r6,r4,#0x96
00003a  4288              CMP      r0,r1
00003c  da02              BGE      |L3.68|
00003e  88a0              LDRH     r0,[r4,#4]            ;242  ; adc_self_ch_buff
000040  8570              STRH     r0,[r6,#0x2a]         ;242
000042  e00c              B        |L3.94|
                  |L3.68|
000044  f9b50002          LDRSH    r0,[r5,#2]            ;242  ; adc_self_ch_disp
000048  4288              CMP      r0,r1                 ;242
00004a  da02              BGE      |L3.82|
00004c  8860              LDRH     r0,[r4,#2]            ;243  ; adc_self_ch_buff
00004e  8570              STRH     r0,[r6,#0x2a]         ;243
000050  e005              B        |L3.94|
                  |L3.82|
000052  f9b50000          LDRSH    r0,[r5,#0]            ;243  ; adc_self_ch_disp
000056  4288              CMP      r0,r1
000058  da01              BGE      |L3.94|
00005a  8820              LDRH     r0,[r4,#0]            ;244  ; adc_self_ch_buff
00005c  8570              STRH     r0,[r6,#0x2a]         ;244
                  |L3.94|
00005e  78f7              LDRB     r7,[r6,#3]            ;244  ; adc_ch_net
000060  2200              MOVS     r2,#0                 ;244
000062  b3f7              CBZ      r7,|L3.226|
000064  79b3              LDRB     r3,[r6,#6]            ;244  ; adc_window_flag
000066  4869              LDR      r0,|L3.524|
000068  b18b              CBZ      r3,|L3.142|
00006a  f9b6102a          LDRSH    r1,[r6,#0x2a]         ;244  ; adc_result
00006e  6804              LDR      r4,[r0,#0]            ;245  ; main_power_buffer
000070  eb0404a1          ADD      r4,r4,r1,ASR #2       ;245
000074  6004              STR      r4,[r0,#0]            ;245  ; main_power_buffer
000076  6844              LDR      r4,[r0,#4]            ;245  ; main_power_buffer
000078  eb0404a1          ADD      r4,r4,r1,ASR #2       ;245
00007c  6044              STR      r4,[r0,#4]            ;235  ; main_power_buffer
00007e  6884              LDR      r4,[r0,#8]            ;246  ; main_power_buffer
000080  eb0404a1          ADD      r4,r4,r1,ASR #2       ;246
000084  6084              STR      r4,[r0,#8]            ;246  ; main_power_buffer
000086  68c4              LDR      r4,[r0,#0xc]          ;247  ; main_power_buffer
000088  eb0401a1          ADD      r1,r4,r1,ASR #2       ;247
00008c  60c1              STR      r1,[r0,#0xc]          ;246  ; main_power_buffer
                  |L3.142|
00008e  f9b6102a          LDRSH    r1,[r6,#0x2a]         ;246  ; adc_result
000092  2964              CMP      r1,#0x64
000094  da04              BGE      |L3.160|
000096  8df1              LDRH     r1,[r6,#0x2e]         ;247  ; adc_zero_cnt
000098  f1010101          ADD      r1,r1,#1              ;251
00009c  85f1              STRH     r1,[r6,#0x2e]         ;251
00009e  e000              B        |L3.162|
                  |L3.160|
0000a0  85f2              STRH     r2,[r6,#0x2e]         ;254
                  |L3.162|
0000a2  f9b6402e          LDRSH    r4,[r6,#0x2e]         ;254  ; adc_zero_cnt
0000a6  f44f61fa          MOV      r1,#0x7d0             ;255
0000aa  428c              CMP      r4,r1                 ;255
0000ac  db05              BLT      |L3.186|
0000ae  85f1              STRH     r1,[r6,#0x2e]         ;257
0000b0  6002              STR      r2,[r0,#0]            ;258  ; main_power_buffer
0000b2  6042              STR      r2,[r0,#4]            ;258  ; main_power_buffer
0000b4  6082              STR      r2,[r0,#8]            ;259  ; main_power_buffer
0000b6  60c2              STR      r2,[r0,#0xc]          ;259  ; main_power_buffer
0000b8  8532              STRH     r2,[r6,#0x28]         ;259
                  |L3.186|
0000ba  8df1              LDRH     r1,[r6,#0x2e]         ;259  ; adc_zero_cnt
0000bc  2905              CMP      r1,#5                 ;259
0000be  d14f              BNE      |L3.352|
0000c0  b1bb              CBZ      r3,|L3.242|
0000c2  8db1              LDRH     r1,[r6,#0x2c]         ;262  ; adc_gorb_cnt
0000c4  f1010101          ADD      r1,r1,#1              ;262
0000c8  b209              SXTH     r1,r1                 ;262
0000ca  85b1              STRH     r1,[r6,#0x2c]         ;262
0000cc  f5b17f00          CMP      r1,#0x200             ;264
0000d0  db00              BLT      |L3.212|
0000d2  85b2              STRH     r2,[r6,#0x2c]         ;266
                  |L3.212|
0000d4  f9b6102c          LDRSH    r1,[r6,#0x2c]         ;266  ; adc_gorb_cnt
0000d8  064c              LSLS     r4,r1,#25             ;266
0000da  d10a              BNE      |L3.242|
0000dc  ea4f11e1          ASR      r1,r1,#7              ;273
0000e0  e000              B        |L3.228|
                  |L3.226|
0000e2  e015              B        |L3.272|
                  |L3.228|
0000e4  f8504021          LDR      r4,[r0,r1,LSL #2]     ;273
0000e8  ea4f2424          ASR      r4,r4,#8              ;273
0000ec  8534              STRH     r4,[r6,#0x28]         ;273
0000ee  f8402021          STR      r2,[r0,r1,LSL #2]     ;273
                  |L3.242|
0000f2  f9b60030          LDRSH    r0,[r6,#0x30]         ;275  ; adc_window_cnt
0000f6  2896              CMP      r0,#0x96              ;276
0000f8  dd01              BLE      |L3.254|
0000fa  b103              CBZ      r3,|L3.254|
0000fc  71b2              STRB     r2,[r6,#6]            ;276
                  |L3.254|
0000fe  381f              SUBS     r0,r0,#0x1f           ;276
000100  2827              CMP      r0,#0x27              ;276
000102  d22d              BCS      |L3.352|
000104  79b0              LDRB     r0,[r6,#6]            ;277  ; adc_window_flag
000106  bb58              CBNZ     r0,|L3.352|
000108  f04f0001          MOV      r0,#1                 ;277
00010c  71b0              STRB     r0,[r6,#6]            ;277
00010e  e027              B        |L3.352|
                  |L3.272|
000110  483f              LDR      r0,|L3.528|
000112  7935              LDRB     r5,[r6,#4]            ;280  ; adc_ch
000114  7973              LDRB     r3,[r6,#5]            ;280  ; adc_ch_cnt
000116  eb001485          ADD      r4,r0,r5,LSL #6       ;280
00011a  f9b6102a          LDRSH    r1,[r6,#0x2a]         ;280  ; adc_result
00011e  f8441023          STR      r1,[r4,r3,LSL #2]     ;281
000122  0798              LSLS     r0,r3,#30             ;283
000124  d10f              BNE      |L3.326|
000126  4601              MOV      r1,r0                 ;284
                  |L3.296|
000128  f854c020          LDR      r12,[r4,r0,LSL #2]    ;284
00012c  4461              ADD      r1,r1,r12             ;284
00012e  f1000001          ADD      r0,r0,#1              ;284
000132  b2c0              UXTB     r0,r0                 ;285
000134  2810              CMP      r0,#0x10              ;285
000136  d3f7              BCC      |L3.296|
000138  ea4f1021          ASR      r0,r1,#4              ;287
00013c  4933              LDR      r1,|L3.524|
00013e  f1a10120          SUB      r1,r1,#0x20           ;288
000142  f8210015          STRH     r0,[r1,r5,LSL #1]     ;288
                  |L3.326|
000146  1c6d              ADDS     r5,r5,#1              ;290
000148  b2e8              UXTB     r0,r5                 ;290
00014a  7130              STRB     r0,[r6,#4]            ;291
00014c  2810              CMP      r0,#0x10              ;291
00014e  d307              BCC      |L3.352|
000150  7132              STRB     r2,[r6,#4]            ;291
000152  f1030301          ADD      r3,r3,#1              ;291
000156  b2d8              UXTB     r0,r3                 ;292
000158  7170              STRB     r0,[r6,#5]            ;292
00015a  2810              CMP      r0,#0x10              ;294
00015c  d300              BCC      |L3.352|
00015e  7172              STRB     r2,[r6,#5]            ;295
                  |L3.352|
000160  70b2              STRB     r2,[r6,#2]            ;295
000162  f1070701          ADD      r7,r7,#1              ;295
000166  f0070001          AND      r0,r7,#1              ;295
00016a  70f0              STRB     r0,[r6,#3]            ;296
00016c  4a29              LDR      r2,|L3.532|
00016e  b130              CBZ      r0,|L3.382|
000170  6810              LDR      r0,[r2,#0]            ;298
000172  f02000ff          BIC      r0,r0,#0xff           ;299
000176  f1000004          ADD      r0,r0,#4              ;299
00017a  6010              STR      r0,[r2,#0]            ;299
00017c  e03d              B        |L3.506|
                  |L3.382|
00017e  7931              LDRB     r1,[r6,#4]            ;300  ; adc_ch
000180  0708              LSLS     r0,r1,#28             ;300
000182  d406              BMI      |L3.402|
000184  6810              LDR      r0,[r2,#0]            ;302
000186  f02000ff          BIC      r0,r0,#0xff           ;302
00018a  f1000001          ADD      r0,r0,#1              ;303
00018e  6010              STR      r0,[r2,#0]            ;303
000190  e005              B        |L3.414|
                  |L3.402|
000192  6810              LDR      r0,[r2,#0]
000194  f02000ff          BIC      r0,r0,#0xff
000198  f1000002          ADD      r0,r0,#2              ;247
00019c  6010              STR      r0,[r2,#0]
                  |L3.414|
00019e  481e              LDR      r0,|L3.536|
0001a0  6803              LDR      r3,[r0,#0]
0001a2  f0435380          ORR      r3,r3,#0x10000000
0001a6  6003              STR      r3,[r0,#0]
0001a8  6a03              LDR      r3,[r0,#0x20]
0001aa  f0434380          ORR      r3,r3,#0x40000000
0001ae  6203              STR      r3,[r0,#0x20]
0001b0  6e03              LDR      r3,[r0,#0x60]
0001b2  f0436380          ORR      r3,r3,#0x4000000
0001b6  6603              STR      r3,[r0,#0x60]
0001b8  07cb              LSLS     r3,r1,#31
0001ba  d00a              BEQ      |L3.466|
0001bc  6943              LDR      r3,[r0,#0x14]
0001be  f0435380          ORR      r3,r3,#0x10000000
0001c2  6143              STR      r3,[r0,#0x14]
                  |L3.452|
0001c4  078b              LSLS     r3,r1,#30
0001c6  d409              BMI      |L3.476|
0001c8  6b43              LDR      r3,[r0,#0x34]
0001ca  f0234380          BIC      r3,r3,#0x40000000
0001ce  6343              STR      r3,[r0,#0x34]
0001d0  e008              B        |L3.484|
                  |L3.466|
0001d2  6943              LDR      r3,[r0,#0x14]
0001d4  f0235380          BIC      r3,r3,#0x10000000
0001d8  6143              STR      r3,[r0,#0x14]
0001da  e7f3              B        |L3.452|
                  |L3.476|
0001dc  6b43              LDR      r3,[r0,#0x34]
0001de  f0434380          ORR      r3,r3,#0x40000000
0001e2  6343              STR      r3,[r0,#0x34]
                  |L3.484|
0001e4  0749              LSLS     r1,r1,#29
0001e6  d404              BMI      |L3.498|
0001e8  6f41              LDR      r1,[r0,#0x74]
0001ea  f0216180          BIC      r1,r1,#0x4000000
0001ee  6741              STR      r1,[r0,#0x74]
0001f0  e003              B        |L3.506|
                  |L3.498|
0001f2  6f41              LDR      r1,[r0,#0x74]
0001f4  f0416180          ORR      r1,r1,#0x4000000
0001f8  6741              STR      r1,[r0,#0x74]
                  |L3.506|
0001fa  6810              LDR      r0,[r2,#0]
0001fc  f0407080          ORR      r0,r0,#0x1000000
000200  6010              STR      r0,[r2,#0]
000202  e8bd81f0          POP      {r4-r8,pc}
;;;308    
                          ENDP

000206  0000              DCW      0x0000
                  |L3.520|
                          DCD      ||area_number.23||+0x96
                  |L3.524|
                          DCD      ||.bss||+0x420
                  |L3.528|
                          DCD      ||.bss||
                  |L3.532|
                          DCD      0x40034000
                  |L3.536|
                          DCD      0x2009c000

                          AREA ||area_number.4||, CODE, READONLY, ALIGN=2

                          EXPORTAS ||area_number.4||, ||.text||
                  ips_current_average_hndl_ PROC
;;;232    //-----------------------------------------------
;;;233    void ke_start(char in)
000000  e92d43f0          PUSH     {r4-r9,lr}
;;;234    {          
000004  b085              SUB      sp,sp,#0x14
;;;235    ke_start_stat=(enum_ke_start_stat)0;		 
000006  4c64              LDR      r4,|L4.408|
000008  4e64              LDR      r6,|L4.412|
00000a  2500              MOVS     r5,#0
00000c  7820              LDRB     r0,[r4,#0]  ; ica_timer_cnt
;;;236    
;;;237    if(spc_stat==spcVZ)ke_start_stat=kssNOT_VZ;
00000e  1c40              ADDS     r0,r0,#1
000010  b2c0              UXTB     r0,r0
000012  7020              STRB     r0,[r4,#0]
000014  280a              CMP      r0,#0xa
000016  d340              BCC      |L4.154|
;;;238    #ifndef UKU_220_IPS_TERMOKOMPENSAT
;;;239    else if(BAT_IS_ON[in]!=bisON)ke_start_stat=kssNOT_BAT;
;;;240    #endif
;;;241    else if(bat[in]._av&(1<<0))ke_start_stat=kssNOT_BAT_AV;
000018  7025              STRB     r5,[r4,#0]
00001a  f8dfc184          LDR      r12,|L4.416|
00001e  f89c0000          LDRB     r0,[r12,#0]  ; ica_plazma
000022  f1000001          ADD      r0,r0,#1
000026  f88c0000          STRB     r0,[r12,#0]
00002a  485e              LDR      r0,|L4.420|
00002c  495e              LDR      r1,|L4.424|
00002e  f9b00000          LDRSH    r0,[r0,#0]  ; bps_I
000032  8008              STRH     r0,[r1,#0]
;;;242    else if(bat[in]._temper_stat&(1<<1))ke_start_stat=kssNOT_BAT_AV_T;
;;;243    else if(bat[in]._av&(1<<1))ke_start_stat=kssNOT_BAT_AV_ASS;
;;;244    else if(bat[in]._Ib>IKB)ke_start_stat=kssNOT_BAT_ZAR;
;;;245    else if(bat[in]._Ib<-IKB)ke_start_stat=kssNOT_BAT_RAZR;
;;;246    else if((spc_stat==spcKE)&&(spc_bat==0))ke_start_stat=kssNOT_KE1;
;;;247    else if((spc_stat==spcKE)&&(spc_bat==1))ke_start_stat=kssNOT_KE2;
;;;248    else 
;;;249    	{
;;;250    
;;;251    	ke_start_stat=kssYES;
;;;252    
;;;253    	spc_stat=spcKE;
;;;254    	__ee_spc_stat=spcKE;
;;;255    	lc640_write_int(EE_SPC_STAT,__ee_spc_stat);
;;;256    	
;;;257    	spc_bat=in;
;;;258    	__ee_spc_bat=in;
;;;259    	lc640_write_int(EE_SPC_BAT,__ee_spc_bat);
;;;260    
;;;261    	bat[in]._zar_cnt_ke=0;
;;;262    	lc640_write_int(ADR_EE_BAT_ZAR_CNT_KE[in],0);
;;;263    	
;;;264    	spc_phase=0;
;;;265    	__ee_spc_phase=0;
;;;266    	lc640_write_int(EE_SPC_PHASE,__ee_spc_phase);
;;;267    
;;;268    	//ke_mem_hndl(in,lc640_read_int(ADR_EE_BAT_ZAR_CNT_KE[spc_bat]));
;;;269    
;;;270    		{					
;;;271    		signed short temp_temp;
;;;272    		signed char temp;
;;;273    		temp_temp=bat[in]._u_old[((bat_u_old_cnt+1)&0x07)]; 
;;;274    		    
;;;275    		temp=LPC_RTC->YEAR;
;;;276    		gran_char(&temp,1,99);
;;;277    		*((char*)(&(ke_date[0])))=temp;
;;;278    			
;;;279    		temp=LPC_RTC->MONTH;
;;;280    		gran_char(&temp,1,12);
;;;281    		*(((char*)(&(ke_date[0])))+1)=temp;
;;;282    		
;;;283    		temp=LPC_RTC->DOM;
;;;284    		gran_char(&temp,1,31);
;;;285    		*(((char*)(&(ke_date[0])))+2)=temp;			
;;;286    				
;;;287    		*(((char*)(&(ke_date[0])))+3)=*((char*)&temp_temp);
;;;288    		lc640_write_long(EE_SPC_KE_DATE0,ke_date[0]);
;;;289    
;;;290    		temp=LPC_RTC->HOUR;
;;;291    		gran_char(&temp,0,23);
;;;292    		*((char*)(&(ke_date[1])))=temp;
;;;293                   
;;;294    		temp=LPC_RTC->MIN;
;;;295    		gran_char(&temp,0,59);
;;;296    		*(((char*)(&(ke_date[1])))+1)=temp;
;;;297    	          
;;;298    		temp=LPC_RTC->SEC;
;;;299    		gran_char(&temp,0,59);
;;;300    		*(((char*)(&(ke_date[1])))+2)=temp;
;;;301    			
;;;302    		*(((char*)(&(ke_date[1])))+3)=*(((char*)&temp_temp)+1);
;;;303    		lc640_write_long(EE_SPC_KE_DATE1,ke_date[1]);
;;;304    		}
;;;305    
;;;306    	}
;;;307    }
000034  495d              LDR      r1,|L4.428|
000036  f8df8178          LDR      r8,|L4.432|
00003a  4662              MOV      r2,r12
00003c  4637              MOV      r7,r6                 ;242
00003e  f9b11000          LDRSH    r1,[r1,#0]            ;242  ; ica_your_current
000042  7852              LDRB     r2,[r2,#1]            ;242
000044  f9b83000          LDRSH    r3,[r8,#0]            ;242
000048  f9b77000          LDRSH    r7,[r7,#0]            ;242
00004c  4288              CMP      r0,r1                 ;243
00004e  dd06              BLE      |L4.94|
000050  eba00901          SUB      r9,r0,r1              ;243
000054  f1b90f0a          CMP      r9,#0xa               ;243
000058  db01              BLT      |L4.94|
00005a  2f01              CMP      r7,#1                 ;244
00005c  d007              BEQ      |L4.110|
                  |L4.94|
00005e  4288              CMP      r0,r1                 ;244
000060  da16              BGE      |L4.144|
000062  1a08              SUBS     r0,r1,r0              ;244
000064  280a              CMP      r0,#0xa               ;244
000066  db13              BLT      |L4.144|
000068  2f01              CMP      r7,#1                 ;244
00006a  d009              BEQ      |L4.128|
00006c  e010              B        |L4.144|
                  |L4.110|
00006e  f1020201          ADD      r2,r2,#1              ;245
000072  f88c2001          STRB     r2,[r12,#1]           ;245
000076  f1a30301          SUB      r3,r3,#1              ;245
00007a  f8a83000          STRH     r3,[r8,#0]
00007e  e007              B        |L4.144|
                  |L4.128|
000080  f1a20201          SUB      r2,r2,#1              ;246
000084  f88c2001          STRB     r2,[r12,#1]           ;246
000088  f1030301          ADD      r3,r3,#1              ;247
00008c  f8a83000          STRH     r3,[r8,#0]            ;246
                  |L4.144|
000090  2214              MOVS     r2,#0x14              ;246
000092  4251              RSBS     r1,r2,#0
000094  4846              LDR      r0,|L4.432|
000096  f7fffffe          BL       gran
                  |L4.154|
00009a  7820              LDRB     r0,[r4,#0]            ;251  ; ica_timer_cnt
00009c  f8df8114          LDR      r8,|L4.436|
0000a0  4f45              LDR      r7,|L4.440|
0000a2  2808              CMP      r0,#8                 ;254
0000a4  d125              BNE      |L4.242|
0000a6  8830              LDRH     r0,[r6,#0]            ;255  ; ICA_EN
0000a8  2801              CMP      r0,#1                 ;255
0000aa  d122              BNE      |L4.242|
0000ac  f8b80000          LDRH     r0,[r8,#0]            ;255  ; ICA_MODBUS_ADDRESS
0000b0  f88d0000          STRB     r0,[sp,#0]            ;258
0000b4  f04f0004          MOV      r0,#4                 ;259
0000b8  f88d0001          STRB     r0,[sp,#1]            ;259
0000bc  f88d5002          STRB     r5,[sp,#2]            ;259
0000c0  f04f0002          MOV      r0,#2                 ;262
0000c4  f88d0003          STRB     r0,[sp,#3]            ;262
0000c8  f88d5004          STRB     r5,[sp,#4]            ;262
0000cc  f04f0001          MOV      r0,#1                 ;264
0000d0  f88d0005          STRB     r0,[sp,#5]            ;265
0000d4  f04f0106          MOV      r1,#6                 ;266
0000d8  4668              MOV      r0,sp                 ;266
0000da  f7fffffe          BL       CRC16_2
0000de  f88d0006          STRB     r0,[sp,#6]            ;273
0000e2  ea4f2020          ASR      r0,r0,#8              ;273
0000e6  f88d0007          STRB     r0,[sp,#7]            ;273
0000ea  f9b70000          LDRSH    r0,[r7,#0]            ;273  ; ICA_CH
0000ee  b3e8              CBZ      r0,|L4.364|
0000f0  2801              CMP      r0,#1                 ;275
                  |L4.242|
0000f2  4832              LDR      r0,|L4.444|
0000f4  f06f0214          MVN      r2,#0x14              ;275
0000f8  f9b00000          LDRSH    r0,[r0,#0]            ;276  ; TBAT
0000fc  ebc01100          RSB      r1,r0,r0,LSL #4       ;276
000100  eb020181          ADD      r1,r2,r1,LSL #2       ;276
000104  4a2e              LDR      r2,|L4.448|
000106  f9b22040          LDRSH    r2,[r2,#0x40]         ;277  ; main_kb_cnt
00010a  4291              CMP      r1,r2                 ;277
00010c  d134              BNE      |L4.376|
00010e  8831              LDRH     r1,[r6,#0]            ;279  ; ICA_EN
000110  2901              CMP      r1,#1                 ;279
000112  d131              BNE      |L4.376|
000114  f8b81000          LDRH     r1,[r8,#0]            ;280  ; ICA_MODBUS_ADDRESS
000118  f88d1000          STRB     r1,[sp,#0]            ;280
00011c  f04f0106          MOV      r1,#6                 ;281
000120  f88d1001          STRB     r1,[sp,#1]            ;281
000124  f88d5002          STRB     r5,[sp,#2]            ;283
000128  f04f011e          MOV      r1,#0x1e              ;284
00012c  f88d1003          STRB     r1,[sp,#3]            ;284
000130  ea4f71e0          ASR      r1,r0,#31             ;285
000134  eb006111          ADD      r1,r0,r1,LSR #24      ;285
000138  ea4f2221          ASR      r2,r1,#8              ;287
00013c  f88d2004          STRB     r2,[sp,#4]            ;288
000140  f88d0005          STRB     r0,[sp,#5]            ;288
000144  f04f0106          MOV      r1,#6                 ;288
000148  4668              MOV      r0,sp                 ;290
00014a  f7fffffe          BL       CRC16_2
00014e  f88d0006          STRB     r0,[sp,#6]            ;291
000152  ea4f2020          ASR      r0,r0,#8              ;291
000156  f88d0007          STRB     r0,[sp,#7]            ;292
00015a  8838              LDRH     r0,[r7,#0]            ;294  ; ICA_CH
00015c  2800              CMP      r0,#0                 ;294
00015e  d10b              BNE      |L4.376|
000160  4604              MOV      r4,r0                 ;295
000162  466d              MOV      r5,sp                 ;295
                  |L4.356|
000164  5d28              LDRB     r0,[r5,r4]            ;295
000166  f7fffffe          BL       putchar_sc16is700
00016a  e000              B        |L4.366|
                  |L4.364|
00016c  e007              B        |L4.382|
                  |L4.366|
00016e  f1040401          ADD      r4,r4,#1              ;298
000172  b2e4              UXTB     r4,r4                 ;299
000174  2c08              CMP      r4,#8                 ;299
000176  d3f5              BCC      |L4.356|
                  |L4.376|
000178  b005              ADD      sp,sp,#0x14           ;299
00017a  e8bd83f0          POP      {r4-r9,pc}            ;299
                  |L4.382|
00017e  f04f0400          MOV      r4,#0                 ;300
000182  46e9              MOV      r9,sp                 ;302
                  |L4.388|
000184  f8190004          LDRB     r0,[r9,r4]            ;302
000188  f7fffffe          BL       putchar_sc16is700
00018c  f1040401          ADD      r4,r4,#1              ;303
000190  b2e4              UXTB     r4,r4                 ;303
000192  2c08              CMP      r4,#8
000194  d3f6              BCC      |L4.388|
000196  e7ac              B        |L4.242|
;;;308    
                          ENDP

                  |L4.408|
                          DCD      ica_timer_cnt
                  |L4.412|
                          DCD      ICA_EN
                  |L4.416|
                          DCD      ica_plazma
                  |L4.420|
                          DCD      bps_I
                  |L4.424|
                          DCD      ica_my_current
                  |L4.428|
                          DCD      ica_your_current
                  |L4.432|
                          DCD      ica_u_necc
                  |L4.436|
                          DCD      ICA_MODBUS_ADDRESS
                  |L4.440|
                          DCD      ICA_CH
                  |L4.444|
                          DCD      TBAT
                  |L4.448|
                          DCD      ||area_number.23||

                          AREA ||area_number.5||, CODE, READONLY, ALIGN=2

                          EXPORTAS ||area_number.5||, ||.text||
                  inv_drv PROC
;;;232    //-----------------------------------------------
;;;233    void ke_start(char in)
000000  b570              PUSH     {r4-r6,lr}
;;;234    {          
000002  4604              MOV      r4,r0
000004  f04f0207          MOV      r2,#7
;;;235    ke_start_stat=(enum_ke_start_stat)0;		 
000008  f04f0101          MOV      r1,#1
00000c  48a4              LDR      r0,|L5.672|
;;;236    
;;;237    if(spc_stat==spcVZ)ke_start_stat=kssNOT_VZ;
00000e  f7fffffe          BL       gran_char
000012  48a4              LDR      r0,|L5.676|
000014  eb040144          ADD      r1,r4,r4,LSL #1
;;;238    #ifndef UKU_220_IPS_TERMOKOMPENSAT
;;;239    else if(BAT_IS_ON[in]!=bisON)ke_start_stat=kssNOT_BAT;
;;;240    #endif
;;;241    else if(bat[in]._av&(1<<0))ke_start_stat=kssNOT_BAT_AV;
000018  eb001541          ADD      r5,r0,r1,LSL #5
00001c  f8950047          LDRB     r0,[r5,#0x47]
000020  f8951046          LDRB     r1,[r5,#0x46]
000024  ea800001          EOR      r0,r0,r1
000028  4a9f              LDR      r2,|L5.680|
00002a  b100              CBZ      r0,|L5.46|
00002c  7050              STRB     r0,[r2,#1]
                  |L5.46|
00002e  ea010100          AND      r1,r1,r0
000032  b101              CBZ      r1,|L5.54|
;;;242    else if(bat[in]._temper_stat&(1<<1))ke_start_stat=kssNOT_BAT_AV_T;
;;;243    else if(bat[in]._av&(1<<1))ke_start_stat=kssNOT_BAT_AV_ASS;
;;;244    else if(bat[in]._Ib>IKB)ke_start_stat=kssNOT_BAT_ZAR;
;;;245    else if(bat[in]._Ib<-IKB)ke_start_stat=kssNOT_BAT_RAZR;
;;;246    else if((spc_stat==spcKE)&&(spc_bat==0))ke_start_stat=kssNOT_KE1;
;;;247    else if((spc_stat==spcKE)&&(spc_bat==1))ke_start_stat=kssNOT_KE2;
;;;248    else 
;;;249    	{
;;;250    
;;;251    	ke_start_stat=kssYES;
;;;252    
;;;253    	spc_stat=spcKE;
;;;254    	__ee_spc_stat=spcKE;
;;;255    	lc640_write_int(EE_SPC_STAT,__ee_spc_stat);
;;;256    	
;;;257    	spc_bat=in;
;;;258    	__ee_spc_bat=in;
;;;259    	lc640_write_int(EE_SPC_BAT,__ee_spc_bat);
;;;260    
;;;261    	bat[in]._zar_cnt_ke=0;
;;;262    	lc640_write_int(ADR_EE_BAT_ZAR_CNT_KE[in],0);
;;;263    	
;;;264    	spc_phase=0;
;;;265    	__ee_spc_phase=0;
;;;266    	lc640_write_int(EE_SPC_PHASE,__ee_spc_phase);
;;;267    
;;;268    	//ke_mem_hndl(in,lc640_read_int(ADR_EE_BAT_ZAR_CNT_KE[spc_bat]));
;;;269    
;;;270    		{					
;;;271    		signed short temp_temp;
;;;272    		signed char temp;
;;;273    		temp_temp=bat[in]._u_old[((bat_u_old_cnt+1)&0x07)]; 
;;;274    		    
;;;275    		temp=LPC_RTC->YEAR;
;;;276    		gran_char(&temp,1,99);
;;;277    		*((char*)(&(ke_date[0])))=temp;
;;;278    			
;;;279    		temp=LPC_RTC->MONTH;
;;;280    		gran_char(&temp,1,12);
;;;281    		*(((char*)(&(ke_date[0])))+1)=temp;
;;;282    		
;;;283    		temp=LPC_RTC->DOM;
;;;284    		gran_char(&temp,1,31);
;;;285    		*(((char*)(&(ke_date[0])))+2)=temp;			
;;;286    				
;;;287    		*(((char*)(&(ke_date[0])))+3)=*((char*)&temp_temp);
;;;288    		lc640_write_long(EE_SPC_KE_DATE0,ke_date[0]);
;;;289    
;;;290    		temp=LPC_RTC->HOUR;
;;;291    		gran_char(&temp,0,23);
;;;292    		*((char*)(&(ke_date[1])))=temp;
;;;293                   
;;;294    		temp=LPC_RTC->MIN;
;;;295    		gran_char(&temp,0,59);
;;;296    		*(((char*)(&(ke_date[1])))+1)=temp;
;;;297    	          
;;;298    		temp=LPC_RTC->SEC;
;;;299    		gran_char(&temp,0,59);
;;;300    		*(((char*)(&(ke_date[1])))+2)=temp;
;;;301    			
;;;302    		*(((char*)(&(ke_date[1])))+3)=*(((char*)&temp_temp)+1);
;;;303    		lc640_write_long(EE_SPC_KE_DATE1,ke_date[1]);
;;;304    		}
;;;305    
;;;306    	}
;;;307    }
000034  7091              STRB     r1,[r2,#2]
                  |L5.54|
000036  ea000301          AND      r3,r0,r1
00003a  07db              LSLS     r3,r3,#31
00003c  d027              BEQ      |L5.142|
00003e  78d0              LDRB     r0,[r2,#3]            ;242  ; plazma_inv
000040  f1000001          ADD      r0,r0,#1              ;242
000044  70d0              STRB     r0,[r2,#3]            ;242
000046  b134              CBZ      r4,|L5.86|
000048  2c01              CMP      r4,#1                 ;242
00004a  d00b              BEQ      |L5.100|
00004c  2c02              CMP      r4,#2                 ;243
00004e  d010              BEQ      |L5.114|
000050  2c03              CMP      r4,#3                 ;243
000052  d015              BEQ      |L5.128|
000054  e120              B        |L5.664|
                  |L5.86|
000056  2301              MOVS     r3,#1
000058  461a              MOV      r2,r3                 ;244
00005a  210e              MOVS     r1,#0xe               ;244
00005c  a093              ADR      r0,|L5.684|
00005e  f7fffffe          BL       snmp_trap_send
000062  e119              B        |L5.664|
                  |L5.100|
000064  2301              MOVS     r3,#1                 ;244
000066  2202              MOVS     r2,#2                 ;244
000068  210e              MOVS     r1,#0xe               ;244
00006a  a097              ADR      r0,|L5.712|
00006c  f7fffffe          BL       snmp_trap_send
000070  e112              B        |L5.664|
                  |L5.114|
000072  2301              MOVS     r3,#1                 ;245
000074  2203              MOVS     r2,#3                 ;245
000076  210e              MOVS     r1,#0xe               ;245
000078  a09a              ADR      r0,|L5.740|
00007a  f7fffffe          BL       snmp_trap_send
00007e  e10b              B        |L5.664|
                  |L5.128|
000080  2301              MOVS     r3,#1                 ;246
000082  2204              MOVS     r2,#4                 ;246
000084  210e              MOVS     r1,#0xe               ;246
000086  a09e              ADR      r0,|L5.768|
000088  f7fffffe          BL       snmp_trap_send
00008c  e104              B        |L5.664|
                  |L5.142|
00008e  0783              LSLS     r3,r0,#30             ;246
000090  d529              BPL      |L5.230|
000092  078b              LSLS     r3,r1,#30
000094  d527              BPL      |L5.230|
000096  78d0              LDRB     r0,[r2,#3]            ;247  ; plazma_inv
000098  f1000001          ADD      r0,r0,#1              ;251
00009c  70d0              STRB     r0,[r2,#3]            ;251
00009e  b134              CBZ      r4,|L5.174|
0000a0  2c01              CMP      r4,#1                 ;254
0000a2  d00b              BEQ      |L5.188|
0000a4  2c02              CMP      r4,#2                 ;255
0000a6  d010              BEQ      |L5.202|
0000a8  2c03              CMP      r4,#3                 ;255
0000aa  d015              BEQ      |L5.216|
0000ac  e0f4              B        |L5.664|
                  |L5.174|
0000ae  2302              MOVS     r3,#2                 ;257
0000b0  2201              MOVS     r2,#1                 ;258
0000b2  210e              MOVS     r1,#0xe               ;258
0000b4  a099              ADR      r0,|L5.796|
0000b6  f7fffffe          BL       snmp_trap_send
0000ba  e0ed              B        |L5.664|
                  |L5.188|
0000bc  2302              MOVS     r3,#2                 ;259
0000be  461a              MOV      r2,r3                 ;261
0000c0  210e              MOVS     r1,#0xe               ;262
0000c2  a09d              ADR      r0,|L5.824|
0000c4  f7fffffe          BL       snmp_trap_send
0000c8  e0e6              B        |L5.664|
                  |L5.202|
0000ca  2302              MOVS     r3,#2                 ;262
0000cc  2203              MOVS     r2,#3                 ;264
0000ce  210e              MOVS     r1,#0xe               ;265
0000d0  a0a0              ADR      r0,|L5.852|
0000d2  f7fffffe          BL       snmp_trap_send
0000d6  e0df              B        |L5.664|
                  |L5.216|
0000d8  2302              MOVS     r3,#2                 ;266
0000da  2204              MOVS     r2,#4                 ;266
0000dc  210e              MOVS     r1,#0xe               ;273
0000de  a0a4              ADR      r0,|L5.880|
0000e0  f7fffffe          BL       snmp_trap_send
0000e4  e0d8              B        |L5.664|
                  |L5.230|
0000e6  0743              LSLS     r3,r0,#29             ;273
0000e8  d529              BPL      |L5.318|
0000ea  074b              LSLS     r3,r1,#29             ;273
0000ec  d527              BPL      |L5.318|
0000ee  78d0              LDRB     r0,[r2,#3]            ;273  ; plazma_inv
0000f0  f1000001          ADD      r0,r0,#1              ;275
0000f4  70d0              STRB     r0,[r2,#3]            ;275
0000f6  b134              CBZ      r4,|L5.262|
0000f8  2c01              CMP      r4,#1                 ;276
0000fa  d00b              BEQ      |L5.276|
0000fc  2c02              CMP      r4,#2                 ;276
0000fe  d010              BEQ      |L5.290|
000100  2c03              CMP      r4,#3                 ;276
000102  d015              BEQ      |L5.304|
000104  e0c8              B        |L5.664|
                  |L5.262|
000106  2303              MOVS     r3,#3                 ;277
000108  2201              MOVS     r2,#1                 ;277
00010a  210e              MOVS     r1,#0xe               ;277
00010c  a09f              ADR      r0,|L5.908|
00010e  f7fffffe          BL       snmp_trap_send
000112  e0c1              B        |L5.664|
                  |L5.276|
000114  2303              MOVS     r3,#3                 ;280
000116  2202              MOVS     r2,#2                 ;280
000118  210e              MOVS     r1,#0xe               ;280
00011a  a0a3              ADR      r0,|L5.936|
00011c  f7fffffe          BL       snmp_trap_send
000120  e0ba              B        |L5.664|
                  |L5.290|
000122  2303              MOVS     r3,#3                 ;283
000124  461a              MOV      r2,r3                 ;283
000126  210e              MOVS     r1,#0xe               ;284
000128  a0a6              ADR      r0,|L5.964|
00012a  f7fffffe          BL       snmp_trap_send
00012e  e0b3              B        |L5.664|
                  |L5.304|
000130  2303              MOVS     r3,#3                 ;285
000132  2204              MOVS     r2,#4                 ;285
000134  210e              MOVS     r1,#0xe               ;285
000136  a0aa              ADR      r0,|L5.992|
000138  f7fffffe          BL       snmp_trap_send
00013c  e0ac              B        |L5.664|
                  |L5.318|
00013e  0703              LSLS     r3,r0,#28             ;288
000140  d529              BPL      |L5.406|
000142  070b              LSLS     r3,r1,#28             ;288
000144  d527              BPL      |L5.406|
000146  78d0              LDRB     r0,[r2,#3]            ;290  ; plazma_inv
000148  f1000001          ADD      r0,r0,#1              ;290
00014c  70d0              STRB     r0,[r2,#3]            ;291
00014e  b134              CBZ      r4,|L5.350|
000150  2c01              CMP      r4,#1                 ;291
000152  d00b              BEQ      |L5.364|
000154  2c02              CMP      r4,#2                 ;292
000156  d010              BEQ      |L5.378|
000158  2c03              CMP      r4,#3                 ;292
00015a  d015              BEQ      |L5.392|
00015c  e09c              B        |L5.664|
                  |L5.350|
00015e  2304              MOVS     r3,#4                 ;295
000160  2201              MOVS     r2,#1                 ;295
000162  210e              MOVS     r1,#0xe               ;295
000164  a0a5              ADR      r0,|L5.1020|
000166  f7fffffe          BL       snmp_trap_send
00016a  e095              B        |L5.664|
                  |L5.364|
00016c  2304              MOVS     r3,#4                 ;296
00016e  2202              MOVS     r2,#2                 ;298
000170  210e              MOVS     r1,#0xe               ;298
000172  a0ab              ADR      r0,|L5.1056|
000174  f7fffffe          BL       snmp_trap_send
000178  e08e              B        |L5.664|
                  |L5.378|
00017a  2304              MOVS     r3,#4                 ;299
00017c  2203              MOVS     r2,#3                 ;300
00017e  210e              MOVS     r1,#0xe               ;300
000180  a0b0              ADR      r0,|L5.1092|
000182  f7fffffe          BL       snmp_trap_send
000186  e087              B        |L5.664|
                  |L5.392|
000188  2304              MOVS     r3,#4                 ;303
00018a  461a              MOV      r2,r3                 ;303
00018c  210e              MOVS     r1,#0xe               ;303
00018e  a0b6              ADR      r0,|L5.1128|
000190  f7fffffe          BL       snmp_trap_send
000194  e080              B        |L5.664|
                  |L5.406|
000196  06c3              LSLS     r3,r0,#27             ;247
000198  d529              BPL      |L5.494|
00019a  06cb              LSLS     r3,r1,#27             ;247
00019c  d527              BPL      |L5.494|
00019e  78d0              LDRB     r0,[r2,#3]  ; plazma_inv
0001a0  f1000001          ADD      r0,r0,#1
0001a4  70d0              STRB     r0,[r2,#3]
0001a6  b134              CBZ      r4,|L5.438|
0001a8  2c01              CMP      r4,#1
0001aa  d00b              BEQ      |L5.452|
0001ac  2c02              CMP      r4,#2
0001ae  d010              BEQ      |L5.466|
0001b0  2c03              CMP      r4,#3
0001b2  d015              BEQ      |L5.480|
0001b4  e070              B        |L5.664|
                  |L5.438|
0001b6  2305              MOVS     r3,#5
0001b8  2201              MOVS     r2,#1
0001ba  210e              MOVS     r1,#0xe
0001bc  a0b3              ADR      r0,|L5.1164|
0001be  f7fffffe          BL       snmp_trap_send
0001c2  e069              B        |L5.664|
                  |L5.452|
0001c4  2305              MOVS     r3,#5
0001c6  2202              MOVS     r2,#2
0001c8  210e              MOVS     r1,#0xe
0001ca  a0b9              ADR      r0,|L5.1200|
0001cc  f7fffffe          BL       snmp_trap_send
0001d0  e062              B        |L5.664|
                  |L5.466|
0001d2  2305              MOVS     r3,#5
0001d4  2203              MOVS     r2,#3
0001d6  210e              MOVS     r1,#0xe
0001d8  a0be              ADR      r0,|L5.1236|
0001da  f7fffffe          BL       snmp_trap_send
0001de  e05b              B        |L5.664|
                  |L5.480|
0001e0  2305              MOVS     r3,#5
0001e2  2204              MOVS     r2,#4
0001e4  210e              MOVS     r1,#0xe
0001e6  a0c4              ADR      r0,|L5.1272|
0001e8  f7fffffe          BL       snmp_trap_send
0001ec  e054              B        |L5.664|
                  |L5.494|
0001ee  0683              LSLS     r3,r0,#26
0001f0  d529              BPL      |L5.582|
0001f2  068b              LSLS     r3,r1,#26
0001f4  d527              BPL      |L5.582|
0001f6  78d0              LDRB     r0,[r2,#3]  ; plazma_inv
0001f8  f1000001          ADD      r0,r0,#1
0001fc  70d0              STRB     r0,[r2,#3]
0001fe  b134              CBZ      r4,|L5.526|
000200  2c01              CMP      r4,#1
000202  d00b              BEQ      |L5.540|
000204  2c02              CMP      r4,#2
000206  d010              BEQ      |L5.554|
000208  2c03              CMP      r4,#3
00020a  d015              BEQ      |L5.568|
00020c  e044              B        |L5.664|
                  |L5.526|
00020e  2306              MOVS     r3,#6
000210  2201              MOVS     r2,#1
000212  210e              MOVS     r1,#0xe
000214  a0c1              ADR      r0,|L5.1308|
000216  f7fffffe          BL       snmp_trap_send
00021a  e03d              B        |L5.664|
                  |L5.540|
00021c  2306              MOVS     r3,#6
00021e  2202              MOVS     r2,#2
000220  210e              MOVS     r1,#0xe
000222  a0c7              ADR      r0,|L5.1344|
000224  f7fffffe          BL       snmp_trap_send
000228  e036              B        |L5.664|
                  |L5.554|
00022a  2306              MOVS     r3,#6
00022c  2203              MOVS     r2,#3
00022e  210e              MOVS     r1,#0xe
000230  a0cc              ADR      r0,|L5.1380|
000232  f7fffffe          BL       snmp_trap_send
000236  e02f              B        |L5.664|
                  |L5.568|
000238  2306              MOVS     r3,#6
00023a  2204              MOVS     r2,#4
00023c  210e              MOVS     r1,#0xe
00023e  a0d2              ADR      r0,|L5.1416|
000240  f7fffffe          BL       snmp_trap_send
000244  e028              B        |L5.664|
                  |L5.582|
000246  b300              CBZ      r0,|L5.650|
000248  b9f9              CBNZ     r1,|L5.650|
00024a  78d0              LDRB     r0,[r2,#3]  ; plazma_inv
00024c  f1000001          ADD      r0,r0,#1
000250  70d0              STRB     r0,[r2,#3]
000252  b134              CBZ      r4,|L5.610|
000254  2c01              CMP      r4,#1
000256  d00b              BEQ      |L5.624|
000258  2c02              CMP      r4,#2
00025a  d010              BEQ      |L5.638|
00025c  2c03              CMP      r4,#3
00025e  d015              BEQ      |L5.652|
000260  e01a              B        |L5.664|
                  |L5.610|
000262  2300              MOVS     r3,#0
000264  2201              MOVS     r2,#1
000266  210e              MOVS     r1,#0xe
000268  a0d0              ADR      r0,|L5.1452|
00026a  f7fffffe          BL       snmp_trap_send
00026e  e013              B        |L5.664|
                  |L5.624|
000270  2300              MOVS     r3,#0
000272  2202              MOVS     r2,#2
000274  210e              MOVS     r1,#0xe
000276  a0d2              ADR      r0,|L5.1472|
000278  f7fffffe          BL       snmp_trap_send
00027c  e00c              B        |L5.664|
                  |L5.638|
00027e  2300              MOVS     r3,#0
000280  2203              MOVS     r2,#3
000282  210e              MOVS     r1,#0xe
000284  a0d3              ADR      r0,|L5.1492|
000286  f7fffffe          BL       snmp_trap_send
                  |L5.650|
00028a  e005              B        |L5.664|
                  |L5.652|
00028c  2300              MOVS     r3,#0
00028e  2204              MOVS     r2,#4
000290  210e              MOVS     r1,#0xe
000292  a0d5              ADR      r0,|L5.1512|
000294  f7fffffe          BL       snmp_trap_send
                  |L5.664|
000298  f8150f46          LDRB     r0,[r5,#0x46]!
00029c  7068              STRB     r0,[r5,#1]
00029e  bd70              POP      {r4-r6,pc}
;;;308    
                          ENDP

                  |L5.672|
                          DCD      first_inv_slot
                  |L5.676|
                          DCD      inv
                  |L5.680|
                          DCD      ||area_number.23||+0x8c
                  |L5.684|
0002ac  496e7665          DCB      "Invertor #1 Alarm, overload",0
0002b0  72746f72
0002b4  20233120
0002b8  416c6172
0002bc  6d2c206f
0002c0  7665726c
0002c4  6f616400
                  |L5.712|
0002c8  496e7665          DCB      "Invertor #2 Alarm, overload",0
0002cc  72746f72
0002d0  20233220
0002d4  416c6172
0002d8  6d2c206f
0002dc  7665726c
0002e0  6f616400
                  |L5.740|
0002e4  496e7665          DCB      "Invertor #3 Alarm, overload",0
0002e8  72746f72
0002ec  20233320
0002f0  416c6172
0002f4  6d2c206f
0002f8  7665726c
0002fc  6f616400
                  |L5.768|
000300  496e7665          DCB      "Invertor #4 Alarm, overload",0
000304  72746f72
000308  20233420
00030c  416c6172
000310  6d2c206f
000314  7665726c
000318  6f616400
                  |L5.796|
00031c  496e7665          DCB      "Invertor #1 Alarm, overheat",0
000320  72746f72
000324  20233120
000328  416c6172
00032c  6d2c206f
000330  76657268
000334  65617400
                  |L5.824|
000338  496e7665          DCB      "Invertor #2 Alarm, overheat",0
00033c  72746f72
000340  20233220
000344  416c6172
000348  6d2c206f
00034c  76657268
000350  65617400
                  |L5.852|
000354  496e7665          DCB      "Invertor #3 Alarm, overheat",0
000358  72746f72
00035c  20233320
000360  416c6172
000364  6d2c206f
000368  76657268
00036c  65617400
                  |L5.880|
000370  496e7665          DCB      "Invertor #4 Alarm, overheat",0
000374  72746f72
000378  20233420
00037c  416c6172
000380  6d2c206f
000384  76657268
000388  65617400
                  |L5.908|
00038c  496e7665          DCB      "Invertor #1 Alarm, is warm",0
000390  72746f72
000394  20233120
000398  416c6172
00039c  6d2c2069
0003a0  73207761
0003a4  726d00  
0003a7  00                DCB      0
                  |L5.936|
0003a8  496e7665          DCB      "Invertor #2 Alarm, is warm",0
0003ac  72746f72
0003b0  20233220
0003b4  416c6172
0003b8  6d2c2069
0003bc  73207761
0003c0  726d00  
0003c3  00                DCB      0
                  |L5.964|
0003c4  496e7665          DCB      "Invertor #3 Alarm, is warm",0
0003c8  72746f72
0003cc  20233320
0003d0  416c6172
0003d4  6d2c2069
0003d8  73207761
0003dc  726d00  
0003df  00                DCB      0
                  |L5.992|
0003e0  496e7665          DCB      "Invertor #4 Alarm, is warm",0
0003e4  72746f72
0003e8  20233420
0003ec  416c6172
0003f0  6d2c2069
0003f4  73207761
0003f8  726d00  
0003fb  00                DCB      0
                  |L5.1020|
0003fc  496e7665          DCB      "Invertor #1 Alarm, voltage is up",0
000400  72746f72
000404  20233120
000408  416c6172
00040c  6d2c2076
000410  6f6c7461
000414  67652069
000418  73207570
00041c  00      
00041d  00                DCB      0
00041e  00                DCB      0
00041f  00                DCB      0
                  |L5.1056|
000420  496e7665          DCB      "Invertor #2 Alarm, voltage is up",0
000424  72746f72
000428  20233220
00042c  416c6172
000430  6d2c2076
000434  6f6c7461
000438  67652069
00043c  73207570
000440  00      
000441  00                DCB      0
000442  00                DCB      0
000443  00                DCB      0
                  |L5.1092|
000444  496e7665          DCB      "Invertor #3 Alarm, voltage is up",0
000448  72746f72
00044c  20233320
000450  416c6172
000454  6d2c2076
000458  6f6c7461
00045c  67652069
000460  73207570
000464  00      
000465  00                DCB      0
000466  00                DCB      0
000467  00                DCB      0
                  |L5.1128|
000468  496e7665          DCB      "Invertor #4 Alarm, voltage is up",0
00046c  72746f72
000470  20233420
000474  416c6172
000478  6d2c2076
00047c  6f6c7461
000480  67652069
000484  73207570
000488  00      
000489  00                DCB      0
00048a  00                DCB      0
00048b  00                DCB      0
                  |L5.1164|
00048c  496e7665          DCB      "Invertor #1 Alarm, voltage is down",0
000490  72746f72
000494  20233120
000498  416c6172
00049c  6d2c2076
0004a0  6f6c7461
0004a4  67652069
0004a8  7320646f
0004ac  776e00  
0004af  00                DCB      0
                  |L5.1200|
0004b0  496e7665          DCB      "Invertor #2 Alarm, voltage is down",0
0004b4  72746f72
0004b8  20233220
0004bc  416c6172
0004c0  6d2c2076
0004c4  6f6c7461
0004c8  67652069
0004cc  7320646f
0004d0  776e00  
0004d3  00                DCB      0
                  |L5.1236|
0004d4  496e7665          DCB      "Invertor #3 Alarm, voltage is down",0
0004d8  72746f72
0004dc  20233320
0004e0  416c6172
0004e4  6d2c2076
0004e8  6f6c7461
0004ec  67652069
0004f0  7320646f
0004f4  776e00  
0004f7  00                DCB      0
                  |L5.1272|
0004f8  496e7665          DCB      "Invertor #4 Alarm, voltage is down",0
0004fc  72746f72
000500  20233420
000504  416c6172
000508  6d2c2076
00050c  6f6c7461
000510  67652069
000514  7320646f
000518  776e00  
00051b  00                DCB      0
                  |L5.1308|
00051c  496e7665          DCB      "Invertor #1 Alarm, output is offed",0
000520  72746f72
000524  20233120
000528  416c6172
00052c  6d2c206f
000530  75747075
000534  74206973
000538  206f6666
00053c  656400  
00053f  00                DCB      0
                  |L5.1344|
000540  496e7665          DCB      "Invertor #2 Alarm, output is offed",0
000544  72746f72
000548  20233220
00054c  416c6172
000550  6d2c206f
000554  75747075
000558  74206973
00055c  206f6666
000560  656400  
000563  00                DCB      0
                  |L5.1380|
000564  496e7665          DCB      "Invertor #3 Alarm, output is offed",0
000568  72746f72
00056c  20233320
000570  416c6172
000574  6d2c206f
000578  75747075
00057c  74206973
000580  206f6666
000584  656400  
000587  00                DCB      0
                  |L5.1416|
000588  496e7665          DCB      "Invertor #4 Alarm, output is offed",0
00058c  72746f72
000590  20233420
000594  416c6172
000598  6d2c206f
00059c  75747075
0005a0  74206973
0005a4  206f6666
0005a8  656400  
0005ab  00                DCB      0
                  |L5.1452|
0005ac  496e7665          DCB      "Invertor #1 is norm",0
0005b0  72746f72
0005b4  20233120
0005b8  6973206e
0005bc  6f726d00
                  |L5.1472|
0005c0  496e7665          DCB      "Invertor #2 is norm",0
0005c4  72746f72
0005c8  20233220
0005cc  6973206e
0005d0  6f726d00
                  |L5.1492|
0005d4  496e7665          DCB      "Invertor #3 is norm",0
0005d8  72746f72
0005dc  20233320
0005e0  6973206e
0005e4  6f726d00
                  |L5.1512|
0005e8  496e7665          DCB      "Invertor #4 is norm",0
0005ec  72746f72
0005f0  20233420
0005f4  6973206e
0005f8  6f726d00

                          AREA ||area_number.6||, CODE, READONLY, ALIGN=2

                          EXPORTAS ||area_number.6||, ||.text||
                  klimat_hndl PROC
;;;232    //-----------------------------------------------
;;;233    void ke_start(char in)
000000  e92d41f0          PUSH     {r4-r8,lr}
;;;234    {          
000004  4d66              LDR      r5,|L6.416|
;;;235    ke_start_stat=(enum_ke_start_stat)0;		 
000006  4867              LDR      r0,|L6.420|
000008  4c67              LDR      r4,|L6.424|
00000a  f9b51000          LDRSH    r1,[r5,#0]  ; t_box
;;;236    
;;;237    if(spc_stat==spcVZ)ke_start_stat=kssNOT_VZ;
00000e  f9b02000          LDRSH    r2,[r0,#0]  ; TBOXMAX
000012  f9b40000          LDRSH    r0,[r4,#0]
000016  4291              CMP      r1,r2
;;;238    #ifndef UKU_220_IPS_TERMOKOMPENSAT
;;;239    else if(BAT_IS_ON[in]!=bisON)ke_start_stat=kssNOT_BAT;
;;;240    #endif
;;;241    else if(bat[in]._av&(1<<0))ke_start_stat=kssNOT_BAT_AV;
000018  dd03              BLE      |L6.34|
00001a  f1000001          ADD      r0,r0,#1
00001e  8020              STRH     r0,[r4,#0]
000020  e003              B        |L6.42|
                  |L6.34|
000022  da02              BGE      |L6.42|
000024  f1a00001          SUB      r0,r0,#1
000028  8020              STRH     r0,[r4,#0]
                  |L6.42|
00002a  2206              MOVS     r2,#6
00002c  2100              MOVS     r1,#0
00002e  485e              LDR      r0,|L6.424|
000030  f7fffffe          BL       gran
;;;242    else if(bat[in]._temper_stat&(1<<1))ke_start_stat=kssNOT_BAT_AV_T;
;;;243    else if(bat[in]._av&(1<<1))ke_start_stat=kssNOT_BAT_AV_ASS;
;;;244    else if(bat[in]._Ib>IKB)ke_start_stat=kssNOT_BAT_ZAR;
;;;245    else if(bat[in]._Ib<-IKB)ke_start_stat=kssNOT_BAT_RAZR;
;;;246    else if((spc_stat==spcKE)&&(spc_bat==0))ke_start_stat=kssNOT_KE1;
;;;247    else if((spc_stat==spcKE)&&(spc_bat==1))ke_start_stat=kssNOT_KE2;
;;;248    else 
;;;249    	{
;;;250    
;;;251    	ke_start_stat=kssYES;
;;;252    
;;;253    	spc_stat=spcKE;
;;;254    	__ee_spc_stat=spcKE;
;;;255    	lc640_write_int(EE_SPC_STAT,__ee_spc_stat);
;;;256    	
;;;257    	spc_bat=in;
;;;258    	__ee_spc_bat=in;
;;;259    	lc640_write_int(EE_SPC_BAT,__ee_spc_bat);
;;;260    
;;;261    	bat[in]._zar_cnt_ke=0;
;;;262    	lc640_write_int(ADR_EE_BAT_ZAR_CNT_KE[in],0);
;;;263    	
;;;264    	spc_phase=0;
;;;265    	__ee_spc_phase=0;
;;;266    	lc640_write_int(EE_SPC_PHASE,__ee_spc_phase);
;;;267    
;;;268    	//ke_mem_hndl(in,lc640_read_int(ADR_EE_BAT_ZAR_CNT_KE[spc_bat]));
;;;269    
;;;270    		{					
;;;271    		signed short temp_temp;
;;;272    		signed char temp;
;;;273    		temp_temp=bat[in]._u_old[((bat_u_old_cnt+1)&0x07)]; 
;;;274    		    
;;;275    		temp=LPC_RTC->YEAR;
;;;276    		gran_char(&temp,1,99);
;;;277    		*((char*)(&(ke_date[0])))=temp;
;;;278    			
;;;279    		temp=LPC_RTC->MONTH;
;;;280    		gran_char(&temp,1,12);
;;;281    		*(((char*)(&(ke_date[0])))+1)=temp;
;;;282    		
;;;283    		temp=LPC_RTC->DOM;
;;;284    		gran_char(&temp,1,31);
;;;285    		*(((char*)(&(ke_date[0])))+2)=temp;			
;;;286    				
;;;287    		*(((char*)(&(ke_date[0])))+3)=*((char*)&temp_temp);
;;;288    		lc640_write_long(EE_SPC_KE_DATE0,ke_date[0]);
;;;289    
;;;290    		temp=LPC_RTC->HOUR;
;;;291    		gran_char(&temp,0,23);
;;;292    		*((char*)(&(ke_date[1])))=temp;
;;;293                   
;;;294    		temp=LPC_RTC->MIN;
;;;295    		gran_char(&temp,0,59);
;;;296    		*(((char*)(&(ke_date[1])))+1)=temp;
;;;297    	          
;;;298    		temp=LPC_RTC->SEC;
;;;299    		gran_char(&temp,0,59);
;;;300    		*(((char*)(&(ke_date[1])))+2)=temp;
;;;301    			
;;;302    		*(((char*)(&(ke_date[1])))+3)=*(((char*)&temp_temp)+1);
;;;303    		lc640_write_long(EE_SPC_KE_DATE1,ke_date[1]);
;;;304    		}
;;;305    
;;;306    	}
;;;307    }
000034  f9b40000          LDRSH    r0,[r4,#0]  ; av_tbox_cnt
000038  495c              LDR      r1,|L6.428|
00003a  2601              MOVS     r6,#1
00003c  2805              CMP      r0,#5                 ;242
00003e  dd00              BLE      |L6.66|
000040  700e              STRB     r6,[r1,#0]            ;242
                  |L6.66|
000042  2400              MOVS     r4,#0                 ;242
000044  2801              CMP      r0,#1                 ;242
000046  da00              BGE      |L6.74|
000048  700c              STRB     r4,[r1,#0]            ;242
                  |L6.74|
00004a  4959              LDR      r1,|L6.432|
00004c  f9b50000          LDRSH    r0,[r5,#0]            ;243  ; t_box
000050  4a58              LDR      r2,|L6.436|
000052  f9b11000          LDRSH    r1,[r1,#0]            ;243  ; TBOXREG
000056  4f58              LDR      r7,|L6.440|
000058  1e8b              SUBS     r3,r1,#2              ;244
00005a  4298              CMP      r0,r3                 ;244
00005c  da0f              BGE      |L6.126|
00005e  f9921000          LDRSB    r1,[r2,#0]            ;244  ; t_box_cnt
000062  291e              CMP      r1,#0x1e              ;244
000064  da1e              BGE      |L6.164|
000066  f1010101          ADD      r1,r1,#1              ;244
00006a  b249              SXTB     r1,r1                 ;244
00006c  7011              STRB     r1,[r2,#0]
00006e  291e              CMP      r1,#0x1e              ;245
000070  db18              BLT      |L6.164|
000072  8839              LDRH     r1,[r7,#0]            ;245  ; main_vent_pos
000074  f1a10101          SUB      r1,r1,#1              ;245
000078  8039              STRH     r1,[r7,#0]            ;245
00007a  7014              STRB     r4,[r2,#0]
00007c  e012              B        |L6.164|
                  |L6.126|
00007e  4288              CMP      r0,r1                 ;246
000080  dd0f              BLE      |L6.162|
000082  f9921000          LDRSB    r1,[r2,#0]            ;246  ; t_box_cnt
000086  291e              CMP      r1,#0x1e              ;247
000088  da0c              BGE      |L6.164|
00008a  f1010101          ADD      r1,r1,#1              ;247
00008e  b249              SXTB     r1,r1                 ;246
000090  7011              STRB     r1,[r2,#0]            ;246
000092  291e              CMP      r1,#0x1e
000094  db06              BLT      |L6.164|
000096  8839              LDRH     r1,[r7,#0]            ;247  ; main_vent_pos
000098  f1010101          ADD      r1,r1,#1              ;251
00009c  8039              STRH     r1,[r7,#0]            ;251
00009e  7014              STRB     r4,[r2,#0]            ;253
0000a0  e000              B        |L6.164|
                  |L6.162|
0000a2  7014              STRB     r4,[r2,#0]            ;254
                  |L6.164|
0000a4  4945              LDR      r1,|L6.444|
0000a6  f9b11000          LDRSH    r1,[r1,#0]            ;255  ; TBOXVENTMAX
0000aa  4288              CMP      r0,r1                 ;255
0000ac  dd05              BLE      |L6.186|
0000ae  2214              MOVS     r2,#0x14              ;257
0000b0  2100              MOVS     r1,#0                 ;258
0000b2  4841              LDR      r0,|L6.440|
0000b4  f7fffffe          BL       gran
0000b8  e007              B        |L6.202|
                  |L6.186|
0000ba  4841              LDR      r0,|L6.448|
0000bc  2100              MOVS     r1,#0                 ;259
0000be  8800              LDRH     r0,[r0,#0]            ;261  ; pos_vent
0000c0  3009              ADDS     r0,r0,#9              ;262
0000c2  b202              SXTH     r2,r0                 ;262
0000c4  483c              LDR      r0,|L6.440|
0000c6  f7fffffe          BL       gran
                  |L6.202|
0000ca  20f0              MOVS     r0,#0xf0              ;262
0000cc  f7fffffe          BL       mess_find_unvol
0000d0  b128              CBZ      r0,|L6.222|
0000d2  483c              LDR      r0,|L6.452|
0000d4  6801              LDR      r1,[r0,#0]            ;266  ; mess_data
0000d6  29f1              CMP      r1,#0xf1              ;266
0000d8  d101              BNE      |L6.222|
0000da  6840              LDR      r0,[r0,#4]            ;266  ; mess_data
0000dc  8038              STRH     r0,[r7,#0]            ;273
                  |L6.222|
0000de  f9b71000          LDRSH    r1,[r7,#0]            ;273  ; main_vent_pos
0000e2  4839              LDR      r0,|L6.456|
0000e4  2901              CMP      r1,#1                 ;273
0000e6  dc01              BGT      |L6.236|
0000e8  7006              STRB     r6,[r0,#0]            ;273
0000ea  e000              B        |L6.238|
                  |L6.236|
0000ec  7004              STRB     r4,[r0,#0]            ;273
                  |L6.238|
0000ee  4837              LDR      r0,|L6.460|
0000f0  f8df80dc          LDR      r8,|L6.464|
0000f4  f9b00000          LDRSH    r0,[r0,#0]            ;275  ; TBATDISABLE
0000f8  f1a00132          SUB      r1,r0,#0x32           ;276
0000fc  2928              CMP      r1,#0x28              ;276
0000fe  d821              BHI      |L6.324|
000100  f9b51000          LDRSH    r1,[r5,#0]            ;276  ; t_box
000104  4f33              LDR      r7,|L6.468|
000106  4281              CMP      r1,r0                 ;277
000108  dd03              BLE      |L6.274|
00010a  8838              LDRH     r0,[r7,#0]            ;277  ; tbatdisable_cnt
00010c  f1000001          ADD      r0,r0,#1              ;277
000110  8038              STRH     r0,[r7,#0]            ;279
                  |L6.274|
000112  4831              LDR      r0,|L6.472|
000114  f9b00000          LDRSH    r0,[r0,#0]            ;280  ; TBATENABLE
000118  4281              CMP      r1,r0                 ;280
00011a  da03              BGE      |L6.292|
00011c  8838              LDRH     r0,[r7,#0]            ;281  ; tbatdisable_cnt
00011e  f1a00001          SUB      r0,r0,#1              ;281
000122  8038              STRH     r0,[r7,#0]            ;283
                  |L6.292|
000124  2206              MOVS     r2,#6                 ;283
000126  2100              MOVS     r1,#0                 ;284
000128  482a              LDR      r0,|L6.468|
00012a  f7fffffe          BL       gran
00012e  f9b70000          LDRSH    r0,[r7,#0]            ;284  ; tbatdisable_cnt
000132  2805              CMP      r0,#5                 ;285
000134  dd01              BLE      |L6.314|
000136  f8886000          STRB     r6,[r8,#0]            ;287
                  |L6.314|
00013a  2801              CMP      r0,#1                 ;287
00013c  da04              BGE      |L6.328|
00013e  f8884000          STRB     r4,[r8,#0]            ;288
000142  e001              B        |L6.328|
                  |L6.324|
000144  f8884000          STRB     r4,[r8,#0]            ;288
                  |L6.328|
000148  4824              LDR      r0,|L6.476|
00014a  4f25              LDR      r7,|L6.480|
00014c  f9b00000          LDRSH    r0,[r0,#0]            ;291  ; TLOADDISABLE
000150  f1a00132          SUB      r1,r0,#0x32           ;291
000154  291e              CMP      r1,#0x1e              ;292
000156  d820              BHI      |L6.410|
000158  f9b51000          LDRSH    r1,[r5,#0]            ;292  ; t_box
00015c  4d21              LDR      r5,|L6.484|
00015e  4281              CMP      r1,r0                 ;295
000160  dd03              BLE      |L6.362|
000162  8828              LDRH     r0,[r5,#0]            ;295  ; tloaddisable_cnt
000164  f1000001          ADD      r0,r0,#1              ;295
000168  8028              STRH     r0,[r5,#0]            ;296
                  |L6.362|
00016a  481f              LDR      r0,|L6.488|
00016c  f9b00000          LDRSH    r0,[r0,#0]            ;296  ; TLOADENABLE
000170  4281              CMP      r1,r0                 ;298
000172  da03              BGE      |L6.380|
000174  8828              LDRH     r0,[r5,#0]            ;299  ; tloaddisable_cnt
000176  f1a00001          SUB      r0,r0,#1              ;299
00017a  8028              STRH     r0,[r5,#0]            ;299
                  |L6.380|
00017c  2206              MOVS     r2,#6                 ;300
00017e  2100              MOVS     r1,#0                 ;300
000180  4818              LDR      r0,|L6.484|
000182  f7fffffe          BL       gran
000186  f9b50000          LDRSH    r0,[r5,#0]            ;302  ; tloaddisable_cnt
00018a  2805              CMP      r0,#5                 ;303
00018c  dd00              BLE      |L6.400|
00018e  703e              STRB     r6,[r7,#0]            ;303
                  |L6.400|
000190  2801              CMP      r0,#1                 ;303
000192  da00              BGE      |L6.406|
000194  703c              STRB     r4,[r7,#0]
                  |L6.406|
000196  e8bd81f0          POP      {r4-r8,pc}            ;247
                  |L6.410|
00019a  703c              STRB     r4,[r7,#0]            ;247
00019c  e7fb              B        |L6.406|
;;;308    
                          ENDP

00019e  0000              DCW      0x0000
                  |L6.416|
                          DCD      t_box
                  |L6.420|
                          DCD      TBOXMAX
                  |L6.424|
                          DCD      av_tbox_cnt
                  |L6.428|
                          DCD      av_tbox_stat
                  |L6.432|
                          DCD      TBOXREG
                  |L6.436|
                          DCD      t_box_cnt
                  |L6.440|
                          DCD      main_vent_pos
                  |L6.444|
                          DCD      TBOXVENTMAX
                  |L6.448|
                          DCD      pos_vent
                  |L6.452|
                          DCD      mess_data
                  |L6.456|
                          DCD      mixer_vent_stat
                  |L6.460|
                          DCD      TBATDISABLE
                  |L6.464|
                          DCD      tbatdisable_stat
                  |L6.468|
                          DCD      tbatdisable_cnt
                  |L6.472|
                          DCD      TBATENABLE
                  |L6.476|
                          DCD      TLOADDISABLE
                  |L6.480|
                          DCD      tloaddisable_stat
                  |L6.484|
                          DCD      tloaddisable_cnt
                  |L6.488|
                          DCD      TLOADENABLE

                          AREA ||.bss||, DATA, NOINIT, ALIGN=2

                  adc_buff
                          %        1024
                  adc_buff_
                          %        32
                  main_power_buffer
                          %        32

                          AREA ||area_number.9||, DATA, NOINIT, ALIGN=1

                          EXPORTAS ||area_number.9||, ||.bss||
                  adc_buff_max
                          %        24

                          AREA ||area_number.10||, DATA, NOINIT, ALIGN=1

                          EXPORTAS ||area_number.10||, ||.bss||
                  net_buff
                          %        64

                          AREA ||.constdata||, DATA, READONLY, ALIGN=0

                  sk_buff_KONTUR
000000  0d0b0f0e          DCB      0x0d,0x0b,0x0f,0x0e

                          AREA ||area_number.13||, DATA, READONLY, ALIGN=0

                          EXPORTAS ||area_number.13||, ||.constdata||
                  sk_buff_RSTKM
000000  0d0b0f0e          DCB      0x0d,0x0b,0x0f,0x0e

                          AREA ||area_number.14||, DATA, READONLY, ALIGN=0

                          EXPORTAS ||area_number.14||, ||.constdata||
                  sk_buff_GLONASS
000000  0b0d0f0e          DCB      0x0b,0x0d,0x0f,0x0e

                          AREA ||area_number.15||, DATA, READONLY, ALIGN=0

                          EXPORTAS ||area_number.15||, ||.constdata||
                  sk_buff_3U
000000  0b0d0f0e          DCB      0x0b,0x0d,0x0f,0x0e

                          AREA ||area_number.16||, DATA, READONLY, ALIGN=0

                          EXPORTAS ||area_number.16||, ||.constdata||
                  sk_buff_6U
000000  0b0d0f0e          DCB      0x0b,0x0d,0x0f,0x0e

                          AREA ||area_number.17||, DATA, READONLY, ALIGN=0

                          EXPORTAS ||area_number.17||, ||.constdata||
                  sk_buff_220
000000  0b0d0f0e          DCB      0x0b,0x0d,0x0f,0x0e

                          AREA ||area_number.18||, DATA, READONLY, ALIGN=0

                          EXPORTAS ||area_number.18||, ||.constdata||
                  sk_buff_TELECORE2015
000000  0b0d0f0e          DCB      0x0b,0x0d,0x0f,0x0e

                          AREA ||.data||, DATA, ALIGN=1

                  adc_buff_min
000000  13881388          DCW      0x1388,0x1388
000004  13881388          DCW      0x1388,0x1388
000008  13881388          DCW      0x1388,0x1388
00000c  13881388          DCW      0x1388,0x1388
000010  13881388          DCW      0x1388,0x1388
                          DCDU     0x00000000

                          AREA ||area_number.20||, DATA, ALIGN=1

                          EXPORTAS ||area_number.20||, ||.data||
                  unet_buff_min
000000  1388              DCW      0x1388

                          AREA ||area_number.21||, DATA, ALIGN=0

                          EXPORTAS ||area_number.21||, ||.data||
                  adc_stat
000000  01                DCB      0x01

                          AREA ||area_number.22||, DATA, ALIGN=1

                          EXPORTAS ||area_number.22||, ||.data||
                  bat_ver_cnt
000000  0096              DCW      0x0096

                          AREA ||area_number.23||, DATA, ALIGN=2

                          EXPORTAS ||area_number.23||, ||.data||
                  vent_stat
000000  00                DCB      0x00
                  cntrlStatIsDownCnt
000001  00                DCB      0x00
                  adc_self_ch_cnt
000002  00                DCB      0x00
                  adc_ch_net
000003  00                DCB      0x00
                  adc_ch
000004  00                DCB      0x00
                  adc_ch_cnt
000005  00                DCB      0x00
                  adc_window_flag
000006  00                DCB      0x00
                  ch_cnt0
000007  00                DCB      0x00
                  b1Hz_ch
000008  00                DCB      0x00
                  i
000009  00                DCB      0x00
                  iiii
00000a  00                DCB      0x00
                  bAVG
00000b  00                DCB      0x00
                  avg_num
00000c  00                DCB      0x00
                  kb_full_ver
00000d  00                DCB      0x00
                  kb_start_ips
00000e  00                DCB      0x00
                  num_of_wrks_bps
00000f  00                DCB      0x00
                  num_necc_up
000010  00                DCB      0x00
                  num_necc_down
000011  00                DCB      0x00
                  sh_cnt0
000012  00                DCB      0x00
                  b1Hz_sh
000013  00                DCB      0x00
                  spc_stat
000014  00                DCB      0x00
                  spc_bat
000015  00                DCB      0x00
                  spc_phase
000016  00                DCB      0x00
                  bAVZ
000017  00                DCB      0x00
                  ke_start_stat
000018  00                DCB      0x00
                  numOfForvardBps
000019  00                DCB      0x00
                  numOfForvardBps_old
00001a  00                DCB      0x00
                  numOfForvardBps_minCnt
00001b  00                DCB      0x00
                  bPARALLEL_NOT_ENOUG
00001c  00                DCB      0x00
                  bPARALLEL_ENOUG
00001d  00                DCB      0x00
                  bPARALLEL
00001e  00                DCB      0x00
                  cntrl_hndl_plazma
00001f  00                DCB      0x00
                  cntrl_stat
000020  0258              DCW      0x0258
                  cntrl_stat_old
000022  0258              DCW      0x0258
                  avg_main_cnt
000024  0014              DCW      0x0014
                  num_necc_block_cnt
000026  0000              DCB      0x00,0x00
                  net_buff_
000028  0000              DCB      0x00,0x00
                  adc_result
00002a  0000              DCB      0x00,0x00
                  adc_gorb_cnt
00002c  0000              DCB      0x00,0x00
                  adc_zero_cnt
00002e  0000              DCB      0x00,0x00
                  adc_window_cnt
000030  0000              DCB      0x00,0x00
                  adc_net_buff_cnt
000032  0000              DCB      0x00,0x00
                  plazma_sk
000034  0000              DCB      0x00,0x00
                  cntrl_stat_new
000036  0000              DCB      0x00,0x00
                  Ibmax
000038  0000              DCB      0x00,0x00
                  IZMAX_
00003a  0000              DCB      0x00,0x00
                  Ubpsmax
00003c  0000              DCB      0x00,0x00
                  samokalibr_cnt
00003e  0000              DCB      0x00,0x00
                  main_kb_cnt
000040  0000              DCB      0x00,0x00
                  kb_cnt_1lev
000042  0000              DCB      0x00,0x00
                  kb_cnt_2lev
000044  0000              DCB      0x00,0x00
                  kb_start
000046  0000              DCB      0x00,0x00
                  ibat_ips
000048  0000              DCB      0x00,0x00
                  ibat_ips_
00004a  0000              DCB      0x00,0x00
                  bps_on_mask
00004c  0000              DCB      0x00,0x00
                  bps_off_mask
00004e  0000              DCB      0x00,0x00
                  vz_cnt_s
000050  0000              DCB      0x00,0x00
                  vz_cnt_s_
000052  0000              DCB      0x00,0x00
                  vz_cnt_h
000054  0000              DCB      0x00,0x00
                  vz_cnt_h_
000056  0000              DCB      0x00,0x00
                  cnt_end_ke
000058  0000              DCB      0x00,0x00
                  __ee_vz_cnt
00005a  0000              DCB      0x00,0x00
                  __ee_spc_stat
00005c  0000              DCB      0x00,0x00
                  __ee_spc_bat
00005e  0000              DCB      0x00,0x00
                  __ee_spc_phase
000060  0000              DCB      0x00,0x00
                  cntrl_stat_blok_cnt
000062  0000              DCB      0x00,0x00
                  cntrl_stat_blok_cnt_
000064  0000              DCB      0x00,0x00
                  numOfForvardBps_hourCnt
000066  0000              DCB      0x00,0x00
                  ibat
                          DCD      0x00000000
                  ibat_
                          DCD      0x00000000
                  i_avg_max
                          DCD      0x00000000
                  i_avg_min
                          DCD      0x00000000
                  i_avg_summ
                          DCD      0x00000000
                  i_avg
                          DCD      0x00000000
                  avg
                          DCD      0x00000000
                  cntrl_stat_blok_cnt_plus
                          DCD      0x00000000
                  cntrl_stat_blok_cnt_minus
                          DCD      0x00000000
                  plazma_inv
                          DCD      0x00000000
                  net_metr_buff_
                          DCD      0x00000000
000094  0000              DCB      0x00,0x00
                  adc_self_ch_buff
000096  0000              DCB      0x00,0x00
                          DCD      0x00000000
                  adc_self_ch_disp
                          DCD      0x00000000
0000a0  00000000          DCB      0x00,0x00,0x00,0x00
                  ke_date
                          %        8

                          AREA ||area_number.24||, DATA, ALIGN=1

                          EXPORTAS ||area_number.24||, ||.data||
                  unet_buff_max
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.25||, DATA, ALIGN=0

                          EXPORTAS ||area_number.25||, ||.data||
                  adc_cnt
000000  00                DCB      0x00

                          AREA ||area_number.26||, DATA, ALIGN=0

                          EXPORTAS ||area_number.26||, ||.data||
                  adc_cnt1
000000  00                DCB      0x00

                          AREA ||area_number.27||, DATA, ALIGN=1

                          EXPORTAS ||area_number.27||, ||.data||
                  zero_cnt
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.28||, DATA, ALIGN=0

                          EXPORTAS ||area_number.28||, ||.data||
                  net_buff_cnt
000000  00                DCB      0x00

                          AREA ||area_number.29||, DATA, ALIGN=1

                          EXPORTAS ||area_number.29||, ||.data||
                  ADWR
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.30||, DATA, ALIGN=1

                          EXPORTAS ||area_number.30||, ||.data||
                  period_cnt
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.31||, DATA, ALIGN=1

                          EXPORTAS ||area_number.31||, ||.data||
                  non_zero_cnt
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.32||, DATA, ALIGN=0

                          EXPORTAS ||area_number.32||, ||.data||
                  rele_stat
000000  00                DCB      0x00

                          AREA ||area_number.33||, DATA, ALIGN=0

                          EXPORTAS ||area_number.33||, ||.data||
                  bRELE_OUT
000000  00                DCB      0x00

                          AREA ||area_number.34||, DATA, ALIGN=2

                          EXPORTAS ||area_number.34||, ||.data||
                  main_power_buffer_
                          DCD      0x00000000

                          AREA ||area_number.35||, DATA, ALIGN=1

                          EXPORTAS ||area_number.35||, ||.data||
                  main_power_buffer_cnt
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.36||, DATA, ALIGN=1

                          EXPORTAS ||area_number.36||, ||.data||
                  adc_buff_out_
                          DCDU     0x00000000
000004  0000              DCB      0x00,0x00

                          AREA ||area_number.37||, DATA, ALIGN=1

                          EXPORTAS ||area_number.37||, ||.data||
                  plazma_adc_cnt
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.38||, DATA, ALIGN=0

                          EXPORTAS ||area_number.38||, ||.data||
                  unh_cnt0
000000  00                DCB      0x00

                          AREA ||area_number.39||, DATA, ALIGN=0

                          EXPORTAS ||area_number.39||, ||.data||
                  unh_cnt1
000000  00                DCB      0x00

                          AREA ||area_number.40||, DATA, ALIGN=0

                          EXPORTAS ||area_number.40||, ||.data||
                  b1Hz_unh
000000  00                DCB      0x00

                          AREA ||area_number.41||, DATA, ALIGN=0

                          EXPORTAS ||area_number.41||, ||.data||
                  ch_cnt1
000000  00                DCB      0x00

                          AREA ||area_number.42||, DATA, ALIGN=0

                          EXPORTAS ||area_number.42||, ||.data||
                  b1_30Hz_ch
000000  00                DCB      0x00

                          AREA ||area_number.43||, DATA, ALIGN=0

                          EXPORTAS ||area_number.43||, ||.data||
                  ch_cnt2
000000  00                DCB      0x00

                          AREA ||area_number.44||, DATA, ALIGN=0

                          EXPORTAS ||area_number.44||, ||.data||
                  b1_10Hz_ch
000000  00                DCB      0x00

                          AREA ||area_number.45||, DATA, ALIGN=1

                          EXPORTAS ||area_number.45||, ||.data||
                  IZMAX_70
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.46||, DATA, ALIGN=1

                          EXPORTAS ||area_number.46||, ||.data||
                  IZMAX_130
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.47||, DATA, ALIGN=1

                          EXPORTAS ||area_number.47||, ||.data||
                  cntrl_stat_blck_cnt
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.48||, DATA, ALIGN=0

                          EXPORTAS ||area_number.48||, ||.data||
                  avg_cnt
000000  00                DCB      0x00

                          AREA ||area_number.49||, DATA, ALIGN=0

                          EXPORTAS ||area_number.49||, ||.data||
                  bps_all_off_cnt
000000  00                DCB      0x00

                          AREA ||area_number.50||, DATA, ALIGN=0

                          EXPORTAS ||area_number.50||, ||.data||
                  bps_mask_off_cnt
000000  00                DCB      0x00

                          AREA ||area_number.51||, DATA, ALIGN=0

                          EXPORTAS ||area_number.51||, ||.data||
                  bps_mask_on_off_cnt
000000  00                DCB      0x00

                          AREA ||area_number.52||, DATA, ALIGN=0

                          EXPORTAS ||area_number.52||, ||.data||
                  bps_hndl_2sec_cnt
000000  00                DCB      0x00

                          AREA ||area_number.53||, DATA, ALIGN=0

                          EXPORTAS ||area_number.53||, ||.data||
                  plazma_bat
000000  00                DCB      0x00

                          AREA ||area_number.54||, DATA, ALIGN=0

                          EXPORTAS ||area_number.54||, ||.data||
                  plazma_cntrl_stat
000000  00                DCB      0x00
