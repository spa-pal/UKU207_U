; generated by ARM C/C++ Compiler, 4.1 [Build 644]
; commandline ArmCC [--list --debug -c --asm --interleave -o.\EXE\control.o --asm_dir=.\ --list_dir=.\ --depend=.\EXE\control.d --feedback=.\EXE\UKU_220_IPS_TERMOKOMPENSAT.fed --cpu=Cortex-M3 --apcs=interwork -O1 -IC:\Keil\ARM\CMSIS\Include -IC:\Keil\ARM\INC\NXP\LPC17xx -D__MICROLIB -DUKU_220_IPS_TERMOKOMPENSAT -DUKU2071x -DAPSENERGIA --omf_browse=.\EXE\control.crf control.c]
                          THUMB

                          AREA ||.text||, CODE, READONLY, ALIGN=2

                  ke_start PROC
;;;232    //-----------------------------------------------
;;;233    void ke_start(char in)
000000  e92d41fc          PUSH     {r2-r8,lr}
;;;234    {          
000004  4606              MOV      r6,r0
;;;235    ke_start_stat=(enum_ke_start_stat)0;		 
000006  4dfc              LDR      r5,|L1.1016|
000008  f04f0700          MOV      r7,#0
00000c  762f              STRB     r7,[r5,#0x18]
;;;236    
;;;237    if(spc_stat==spcVZ)ke_start_stat=kssNOT_VZ;
00000e  7d28              LDRB     r0,[r5,#0x14]  ; spc_stat
000010  f04f0301          MOV      r3,#1
000014  2802              CMP      r0,#2
000016  d00f              BEQ      |L1.56|
;;;238    #ifndef UKU_220_IPS_TERMOKOMPENSAT
;;;239    else if(BAT_IS_ON[in]!=bisON)ke_start_stat=kssNOT_BAT;
;;;240    #endif
;;;241    else if(bat[in]._av&(1<<0))ke_start_stat=kssNOT_BAT_AV;
000018  eb060146          ADD      r1,r6,r6,LSL #1
00001c  eb011206          ADD      r2,r1,r6,LSL #4
000020  49f6              LDR      r1,|L1.1020|
000022  eb010482          ADD      r4,r1,r2,LSL #2
000026  f894103d          LDRB     r1,[r4,#0x3d]
00002a  07ca              LSLS     r2,r1,#31
00002c  d006              BEQ      |L1.60|
00002e  f04f0066          MOV      r0,#0x66
000032  7628              STRB     r0,[r5,#0x18]
                  |L1.52|
;;;242    else if(bat[in]._temper_stat&(1<<1))ke_start_stat=kssNOT_BAT_AV_T;
;;;243    else if(bat[in]._av&(1<<1))ke_start_stat=kssNOT_BAT_AV_ASS;
;;;244    else if(bat[in]._Ib>IKB)ke_start_stat=kssNOT_BAT_ZAR;
;;;245    else if(bat[in]._Ib<-IKB)ke_start_stat=kssNOT_BAT_RAZR;
;;;246    else if((spc_stat==spcKE)&&(spc_bat==0))ke_start_stat=kssNOT_KE1;
;;;247    else if((spc_stat==spcKE)&&(spc_bat==1))ke_start_stat=kssNOT_KE2;
;;;248    else 
;;;249    	{
;;;250    
;;;251    	ke_start_stat=kssYES;
;;;252    
;;;253    	spc_stat=spcKE;
;;;254    	__ee_spc_stat=spcKE;
;;;255    	lc640_write_int(EE_SPC_STAT,__ee_spc_stat);
;;;256    	
;;;257    	spc_bat=in;
;;;258    	__ee_spc_bat=in;
;;;259    	lc640_write_int(EE_SPC_BAT,__ee_spc_bat);
;;;260    
;;;261    	bat[in]._zar_cnt_ke=0;
;;;262    	lc640_write_int(ADR_EE_BAT_ZAR_CNT_KE[in],0);
;;;263    	
;;;264    	spc_phase=0;
;;;265    	__ee_spc_phase=0;
;;;266    	lc640_write_int(EE_SPC_PHASE,__ee_spc_phase);
;;;267    
;;;268    	//ke_mem_hndl(in,lc640_read_int(ADR_EE_BAT_ZAR_CNT_KE[spc_bat]));
;;;269    
;;;270    		{					
;;;271    		signed short temp_temp;
;;;272    		signed char temp;
;;;273    		temp_temp=bat[in]._u_old[((bat_u_old_cnt+1)&0x07)]; 
;;;274    		    
;;;275    		temp=LPC_RTC->YEAR;
;;;276    		gran_char(&temp,1,99);
;;;277    		*((char*)(&(ke_date[0])))=temp;
;;;278    			
;;;279    		temp=LPC_RTC->MONTH;
;;;280    		gran_char(&temp,1,12);
;;;281    		*(((char*)(&(ke_date[0])))+1)=temp;
;;;282    		
;;;283    		temp=LPC_RTC->DOM;
;;;284    		gran_char(&temp,1,31);
;;;285    		*(((char*)(&(ke_date[0])))+2)=temp;			
;;;286    				
;;;287    		*(((char*)(&(ke_date[0])))+3)=*((char*)&temp_temp);
;;;288    		lc640_write_long(EE_SPC_KE_DATE0,ke_date[0]);
;;;289    
;;;290    		temp=LPC_RTC->HOUR;
;;;291    		gran_char(&temp,0,23);
;;;292    		*((char*)(&(ke_date[1])))=temp;
;;;293                   
;;;294    		temp=LPC_RTC->MIN;
;;;295    		gran_char(&temp,0,59);
;;;296    		*(((char*)(&(ke_date[1])))+1)=temp;
;;;297    	          
;;;298    		temp=LPC_RTC->SEC;
;;;299    		gran_char(&temp,0,59);
;;;300    		*(((char*)(&(ke_date[1])))+2)=temp;
;;;301    			
;;;302    		*(((char*)(&(ke_date[1])))+3)=*(((char*)&temp_temp)+1);
;;;303    		lc640_write_long(EE_SPC_KE_DATE1,ke_date[1]);
;;;304    		}
;;;305    
;;;306    	}
;;;307    }
000034  e8bd81fc          POP      {r2-r8,pc}
                  |L1.56|
000038  762b              STRB     r3,[r5,#0x18]         ;237
00003a  e7fb              B        |L1.52|
                  |L1.60|
00003c  f894203f          LDRB     r2,[r4,#0x3f]         ;242
000040  0792              LSLS     r2,r2,#30             ;242
000042  d503              BPL      |L1.76|
000044  f04f0067          MOV      r0,#0x67              ;242
000048  7628              STRB     r0,[r5,#0x18]         ;242
00004a  e7f3              B        |L1.52|
                  |L1.76|
00004c  0789              LSLS     r1,r1,#30             ;243
00004e  d503              BPL      |L1.88|
000050  f04f0068          MOV      r0,#0x68              ;243
000054  7628              STRB     r0,[r5,#0x18]         ;243
000056  e7ed              B        |L1.52|
                  |L1.88|
000058  4ae9              LDR      r2,|L1.1024|
00005a  f9b41008          LDRSH    r1,[r4,#8]            ;244
00005e  f9b22000          LDRSH    r2,[r2,#0]            ;244  ; IKB
000062  4291              CMP      r1,r2                 ;244
000064  dd03              BLE      |L1.110|
000066  f04f0069          MOV      r0,#0x69              ;244
00006a  7628              STRB     r0,[r5,#0x18]         ;244
00006c  e7e2              B        |L1.52|
                  |L1.110|
00006e  4252              RSBS     r2,r2,#0              ;245
000070  4291              CMP      r1,r2                 ;245
000072  da03              BGE      |L1.124|
000074  f04f006a          MOV      r0,#0x6a              ;245
000078  7628              STRB     r0,[r5,#0x18]         ;245
00007a  e7db              B        |L1.52|
                  |L1.124|
00007c  49de              LDR      r1,|L1.1016|
00007e  2801              CMP      r0,#1                 ;246
000080  7d49              LDRB     r1,[r1,#0x15]         ;246
000082  d100              BNE      |L1.134|
000084  b111              CBZ      r1,|L1.140|
                  |L1.134|
000086  2801              CMP      r0,#1                 ;247
000088  d004              BEQ      |L1.148|
00008a  e005              B        |L1.152|
                  |L1.140|
00008c  f04f006b          MOV      r0,#0x6b              ;246
000090  7628              STRB     r0,[r5,#0x18]         ;246
000092  e7cf              B        |L1.52|
                  |L1.148|
000094  2901              CMP      r1,#1                 ;247
000096  d07e              BEQ      |L1.406|
                  |L1.152|
000098  f04f0064          MOV      r0,#0x64              ;251
00009c  7628              STRB     r0,[r5,#0x18]         ;251
00009e  752b              STRB     r3,[r5,#0x14]         ;253
0000a0  f8a5305c          STRH     r3,[r5,#0x5c]         ;254
0000a4  4619              MOV      r1,r3                 ;255
0000a6  f44f70f8          MOV      r0,#0x1f0             ;255
0000aa  f7fffffe          BL       lc640_write_int
0000ae  756e              STRB     r6,[r5,#0x15]         ;257
0000b0  f8a5605e          STRH     r6,[r5,#0x5e]         ;258
0000b4  4631              MOV      r1,r6                 ;259
0000b6  f44f70fa          MOV      r0,#0x1f4             ;259
0000ba  f7fffffe          BL       lc640_write_int
0000be  61a7              STR      r7,[r4,#0x18]         ;261
0000c0  48d0              LDR      r0,|L1.1028|
0000c2  2100              MOVS     r1,#0                 ;262
0000c4  f9300016          LDRSH    r0,[r0,r6,LSL #1]     ;262
0000c8  f7fffffe          BL       lc640_write_int
0000cc  75af              STRB     r7,[r5,#0x16]         ;264
0000ce  f8a57060          STRH     r7,[r5,#0x60]         ;265
0000d2  4639              MOV      r1,r7                 ;266
0000d4  f44f70fb          MOV      r0,#0x1f6             ;266
0000d8  f7fffffe          BL       lc640_write_int
0000dc  48ca              LDR      r0,|L1.1032|
0000de  8800              LDRH     r0,[r0,#0]            ;273  ; bat_u_old_cnt
0000e0  f1000001          ADD      r0,r0,#1              ;273
0000e4  f0000007          AND      r0,r0,#7              ;273
0000e8  eb040040          ADD      r0,r4,r0,LSL #1       ;273
0000ec  8c00              LDRH     r0,[r0,#0x20]         ;273
0000ee  9001              STR      r0,[sp,#4]            ;273
0000f0  4dc6              LDR      r5,|L1.1036|
0000f2  8ba8              LDRH     r0,[r5,#0x1c]         ;275
0000f4  9000              STR      r0,[sp,#0]            ;275
0000f6  f04f0263          MOV      r2,#0x63              ;276
0000fa  f04f0101          MOV      r1,#1                 ;276
0000fe  4668              MOV      r0,sp                 ;276
000100  f7fffffe          BL       gran_char
000104  4cbc              LDR      r4,|L1.1016|
000106  f89d0000          LDRB     r0,[sp,#0]            ;277
00010a  34a4              ADDS     r4,r4,#0xa4           ;277
00010c  7020              STRB     r0,[r4,#0]            ;277
00010e  7e28              LDRB     r0,[r5,#0x18]         ;279
000110  9000              STR      r0,[sp,#0]            ;279
000112  220c              MOVS     r2,#0xc               ;280
000114  2101              MOVS     r1,#1                 ;280
000116  4668              MOV      r0,sp                 ;280
000118  f7fffffe          BL       gran_char
00011c  f89d0000          LDRB     r0,[sp,#0]            ;281
000120  7060              STRB     r0,[r4,#1]            ;281
000122  7b28              LDRB     r0,[r5,#0xc]          ;283
000124  9000              STR      r0,[sp,#0]            ;283
000126  221f              MOVS     r2,#0x1f              ;284
000128  2101              MOVS     r1,#1                 ;284
00012a  4668              MOV      r0,sp                 ;284
00012c  f7fffffe          BL       gran_char
000130  f89d0000          LDRB     r0,[sp,#0]            ;285
000134  70a0              STRB     r0,[r4,#2]            ;285
000136  f89d0004          LDRB     r0,[sp,#4]            ;287
00013a  70e0              STRB     r0,[r4,#3]            ;287
00013c  f44f70fc          MOV      r0,#0x1f8             ;288
000140  6821              LDR      r1,[r4,#0]            ;288  ; ke_date
000142  f7fffffe          BL       lc640_write_long
000146  7a28              LDRB     r0,[r5,#8]            ;290
000148  9000              STR      r0,[sp,#0]            ;290
00014a  2217              MOVS     r2,#0x17              ;291
00014c  2100              MOVS     r1,#0                 ;291
00014e  4668              MOV      r0,sp                 ;291
000150  f7fffffe          BL       gran_char
000154  f89d0000          LDRB     r0,[sp,#0]            ;292
000158  7120              STRB     r0,[r4,#4]            ;292
00015a  7928              LDRB     r0,[r5,#4]            ;294
00015c  9000              STR      r0,[sp,#0]            ;294
00015e  223b              MOVS     r2,#0x3b              ;295
000160  2100              MOVS     r1,#0                 ;295
000162  4668              MOV      r0,sp                 ;295
000164  f7fffffe          BL       gran_char
000168  f89d0000          LDRB     r0,[sp,#0]            ;296
00016c  7160              STRB     r0,[r4,#5]            ;296
00016e  7828              LDRB     r0,[r5,#0]            ;298
000170  9000              STR      r0,[sp,#0]            ;298
000172  223b              MOVS     r2,#0x3b              ;299
000174  2100              MOVS     r1,#0                 ;299
000176  4668              MOV      r0,sp                 ;299
000178  f7fffffe          BL       gran_char
00017c  f89d0000          LDRB     r0,[sp,#0]            ;300
000180  71a0              STRB     r0,[r4,#6]            ;300
000182  f89d0005          LDRB     r0,[sp,#5]            ;302
000186  71e0              STRB     r0,[r4,#7]            ;302
000188  f44f70fe          MOV      r0,#0x1fc             ;303
00018c  6861              LDR      r1,[r4,#4]            ;303  ; ke_date
00018e  f7fffffe          BL       lc640_write_long
000192  e74f              B        |L1.52|
000194  e7ff              B        |L1.406|
                  |L1.406|
000196  f04f006c          MOV      r0,#0x6c              ;247
00019a  7628              STRB     r0,[r5,#0x18]         ;247
00019c  e74a              B        |L1.52|
;;;308    
                          ENDP

                  ke_drv PROC
;;;309    //-----------------------------------------------
;;;310    void ke_drv(void)
00019e  e92d47f0          PUSH     {r4-r10,lr}
;;;311    {
;;;312    
;;;313    if(spc_stat==spcKE)
0001a2  4c95              LDR      r4,|L1.1016|
0001a4  7d20              LDRB     r0,[r4,#0x14]  ; spc_stat
0001a6  2801              CMP      r0,#1
0001a8  d17d              BNE      |L1.678|
0001aa  4621              MOV      r1,r4
0001ac  2601              MOVS     r6,#1
;;;314    	{
;;;315    	if(spc_phase==0)
;;;316    		{
;;;317    		mess_send(MESS2BAT_HNDL,PARAM_BAT_MASK_OFF_AFTER_2SEC,(1<<(1-spc_bat)),20);
0001ae  7d49              LDRB     r1,[r1,#0x15]
0001b0  7da0              LDRB     r0,[r4,#0x16]         ;315  ; spc_phase
0001b2  f1c10201          RSB      r2,r1,#1
0001b6  fa06f102          LSL      r1,r6,r2
;;;318    		mess_send(MESS2BPS_HNDL,PARAM_BPS_ALL_OFF_AFTER_2SEC,0xffff,20);
;;;319    
;;;320    		bat[spc_bat]._zar_cnt_ke+=abs(bat[spc_bat]._Ib);
;;;321    	    	
;;;322    		if(bat[spc_bat]._zar_cnt_ke>=AH_CONSTANT)
;;;323    			{
;;;324    			bat[spc_bat]._zar_cnt_ke-=AH_CONSTANT;
;;;325    			lc640_write_int(ADR_EE_BAT_ZAR_CNT_KE[spc_bat],lc640_read_int(ADR_EE_BAT_ZAR_CNT_KE[spc_bat])+1);
0001ba  4f92              LDR      r7,|L1.1028|
0001bc  4d8f              LDR      r5,|L1.1020|
0001be  b20a              SXTH     r2,r1                 ;317
0001c0  b110              CBZ      r0,|L1.456|
;;;326    			}
;;;327    		}
;;;328    
;;;329    	else if(spc_phase==1)
0001c2  2801              CMP      r0,#1
0001c4  d034              BEQ      |L1.560|
0001c6  e038              B        |L1.570|
                  |L1.456|
0001c8  2314              MOVS     r3,#0x14              ;317
0001ca  21ca              MOVS     r1,#0xca              ;317
0001cc  20c8              MOVS     r0,#0xc8              ;317
0001ce  f7fffffe          BL       mess_send
0001d2  2314              MOVS     r3,#0x14              ;318
0001d4  f04f32ff          MOV      r2,#0xffffffff        ;318
0001d8  21ce              MOVS     r1,#0xce              ;318
0001da  20cd              MOVS     r0,#0xcd              ;318
0001dc  f7fffffe          BL       mess_send
0001e0  7d60              LDRB     r0,[r4,#0x15]         ;320  ; spc_bat
0001e2  eb000140          ADD      r1,r0,r0,LSL #1       ;320
0001e6  eb011000          ADD      r0,r1,r0,LSL #4       ;320
0001ea  eb050080          ADD      r0,r5,r0,LSL #2       ;320
0001ee  f9b00008          LDRSH    r0,[r0,#8]            ;320
0001f2  f7fffffe          BL       abs
0001f6  7d61              LDRB     r1,[r4,#0x15]         ;320  ; spc_bat
0001f8  eb010241          ADD      r2,r1,r1,LSL #1       ;320
0001fc  eb021201          ADD      r2,r2,r1,LSL #4       ;320
000200  eb050282          ADD      r2,r5,r2,LSL #2       ;320
000204  6993              LDR      r3,[r2,#0x18]         ;320
000206  4418              ADD      r0,r0,r3              ;320
000208  6190              STR      r0,[r2,#0x18]         ;320
00020a  f64843a0          MOV      r3,#0x8ca0            ;322
00020e  4298              CMP      r0,r3                 ;322
000210  db13              BLT      |L1.570|
000212  eba00003          SUB      r0,r0,r3              ;324
000216  6190              STR      r0,[r2,#0x18]         ;324
000218  f8370011          LDRH     r0,[r7,r1,LSL #1]     ;325
00021c  f7fffffe          BL       lc640_read_int
000220  1c40              ADDS     r0,r0,#1              ;325
000222  b201              SXTH     r1,r0                 ;325
000224  7d60              LDRB     r0,[r4,#0x15]         ;325  ; spc_bat
000226  f9370010          LDRSH    r0,[r7,r0,LSL #1]     ;325
00022a  f7fffffe          BL       lc640_write_int
00022e  e004              B        |L1.570|
                  |L1.560|
;;;330    		{
;;;331    		mess_send(MESS2BAT_HNDL,PARAM_BAT_MASK_OFF_AFTER_2SEC,(1<<(1-spc_bat)),20);
000230  2314              MOVS     r3,#0x14
000232  21ca              MOVS     r1,#0xca
000234  20c8              MOVS     r0,#0xc8
000236  f7fffffe          BL       mess_send
                  |L1.570|
;;;332    		}
;;;333    
;;;334    	if(bat[spc_bat]._Ub<(USIGN*10))
00023a  7d61              LDRB     r1,[r4,#0x15]  ; spc_bat
;;;335    		{
;;;336    		cnt_end_ke++;
;;;337    		if(cnt_end_ke>=30)
;;;338    			{
;;;339    			
;;;340    			if((spc_stat==spcKE)&&(spc_phase==0))
;;;341    				{
;;;342    				lc640_write_int(ADR_EE_BAT_C_REAL[spc_bat],lc640_read_int(ADR_EE_BAT_ZAR_CNT_KE[spc_bat]));
;;;343    				ke_mem_hndl(spc_bat,lc640_read_int(ADR_EE_BAT_ZAR_CNT_KE[spc_bat]));
;;;344    				lc640_write_int(ADR_EE_BAT_ZAR_CNT[spc_bat],0);
;;;345    				cntrl_stat=50;
;;;346    				cntrl_stat_old=50;
;;;347    				}
;;;348    
;;;349    			if((BAT_IS_ON[1-spc_bat]) == bisON)
;;;350    				{
;;;351    				spc_phase=1;
;;;352    				__ee_spc_phase=1;
;;;353    				lc640_write_int(EE_SPC_PHASE,1);
;;;354    				}			
;;;355    			else
;;;356    				{
;;;357    				spc_stat=spcOFF;
;;;358    				__ee_spc_stat=spcOFF;
;;;359    				lc640_write_int(EE_SPC_STAT,spcOFF);
00023c  f44f79f8          MOV      r9,#0x1f0
000240  eb010041          ADD      r0,r1,r1,LSL #1       ;334
000244  eb001001          ADD      r0,r0,r1,LSL #4       ;334
000248  eb050080          ADD      r0,r5,r0,LSL #2       ;334
00024c  f04f0800          MOV      r8,#0                 ;315
000250  f9b02002          LDRSH    r2,[r0,#2]            ;334
000254  486e              LDR      r0,|L1.1040|
000256  f9b00000          LDRSH    r0,[r0,#0]            ;334  ; USIGN
00025a  eb000080          ADD      r0,r0,r0,LSL #2       ;334
00025e  ebb20f40          CMP      r2,r0,LSL #1          ;334
000262  da47              BGE      |L1.756|
000264  f8b40058          LDRH     r0,[r4,#0x58]         ;336  ; cnt_end_ke
000268  f1000001          ADD      r0,r0,#1              ;336
00026c  b200              SXTH     r0,r0                 ;336
00026e  f8a40058          STRH     r0,[r4,#0x58]         ;336
000272  281e              CMP      r0,#0x1e              ;337
000274  db40              BLT      |L1.760|
000276  7d20              LDRB     r0,[r4,#0x14]         ;340  ; spc_stat
000278  2801              CMP      r0,#1                 ;340
00027a  d122              BNE      |L1.706|
00027c  7da0              LDRB     r0,[r4,#0x16]         ;340  ; spc_phase
00027e  bb00              CBNZ     r0,|L1.706|
000280  f8370011          LDRH     r0,[r7,r1,LSL #1]     ;342
000284  f7fffffe          BL       lc640_read_int
000288  b201              SXTH     r1,r0                 ;342
00028a  4862              LDR      r0,|L1.1044|
00028c  7d62              LDRB     r2,[r4,#0x15]         ;342  ; spc_bat
00028e  f9300012          LDRSH    r0,[r0,r2,LSL #1]     ;342
000292  f7fffffe          BL       lc640_write_int
000296  7d60              LDRB     r0,[r4,#0x15]         ;343  ; spc_bat
000298  f8370010          LDRH     r0,[r7,r0,LSL #1]     ;343
00029c  f7fffffe          BL       lc640_read_int
0002a0  b281              UXTH     r1,r0                 ;343
0002a2  7d60              LDRB     r0,[r4,#0x15]         ;343  ; spc_bat
0002a4  e000              B        |L1.680|
                  |L1.678|
0002a6  e049              B        |L1.828|
                  |L1.680|
0002a8  f7fffffe          BL       ke_mem_hndl
0002ac  485a              LDR      r0,|L1.1048|
0002ae  7d61              LDRB     r1,[r4,#0x15]         ;344  ; spc_bat
0002b0  f9300011          LDRSH    r0,[r0,r1,LSL #1]     ;344
0002b4  2100              MOVS     r1,#0                 ;344
0002b6  f7fffffe          BL       lc640_write_int
0002ba  f04f0032          MOV      r0,#0x32              ;345
0002be  8420              STRH     r0,[r4,#0x20]         ;345
0002c0  8460              STRH     r0,[r4,#0x22]         ;346
                  |L1.706|
0002c2  7d60              LDRB     r0,[r4,#0x15]         ;349  ; spc_bat
0002c4  4955              LDR      r1,|L1.1052|
0002c6  f1c00001          RSB      r0,r0,#1              ;349
0002ca  5c08              LDRB     r0,[r1,r0]            ;349
0002cc  2855              CMP      r0,#0x55              ;349
0002ce  d008              BEQ      |L1.738|
0002d0  f8848014          STRB     r8,[r4,#0x14]         ;357
0002d4  f8a4805c          STRH     r8,[r4,#0x5c]         ;358
0002d8  2100              MOVS     r1,#0
0002da  4648              MOV      r0,r9
0002dc  f7fffffe          BL       lc640_write_int
0002e0  e00a              B        |L1.760|
                  |L1.738|
0002e2  75a6              STRB     r6,[r4,#0x16]         ;351
0002e4  f8a46060          STRH     r6,[r4,#0x60]         ;352
0002e8  2101              MOVS     r1,#1                 ;353
0002ea  f44f70fb          MOV      r0,#0x1f6             ;353
0002ee  f7fffffe          BL       lc640_write_int
0002f2  e001              B        |L1.760|
                  |L1.756|
;;;360    				}
;;;361    			}
;;;362    		}
;;;363    	else cnt_end_ke=0;
0002f4  f8a48058          STRH     r8,[r4,#0x58]
                  |L1.760|
;;;364    
;;;365    	if((bat[spc_bat]._Ub>=bat[1-spc_bat]._Ub)&&(spc_phase==1))
0002f8  7d61              LDRB     r1,[r4,#0x15]  ; spc_bat
0002fa  eb010041          ADD      r0,r1,r1,LSL #1
0002fe  eb001001          ADD      r0,r0,r1,LSL #4
000302  eb050080          ADD      r0,r5,r0,LSL #2
000306  f9b02002          LDRSH    r2,[r0,#2]
00030a  f1c10001          RSB      r0,r1,#1
00030e  eb000140          ADD      r1,r0,r0,LSL #1
000312  eb011000          ADD      r0,r1,r0,LSL #4
000316  eb050080          ADD      r0,r5,r0,LSL #2
00031a  f9b00002          LDRSH    r0,[r0,#2]
00031e  4282              CMP      r2,r0
000320  db0c              BLT      |L1.828|
000322  7da0              LDRB     r0,[r4,#0x16]  ; spc_phase
000324  2801              CMP      r0,#1
000326  d109              BNE      |L1.828|
;;;366    		{
;;;367    		spc_stat=spcOFF;
000328  f8848014          STRB     r8,[r4,#0x14]
;;;368    		__ee_spc_stat=spcOFF;
00032c  f8a4805c          STRH     r8,[r4,#0x5c]
;;;369    		lc640_write_int(EE_SPC_STAT,spcOFF);
000330  4648              MOV      r0,r9
000332  e8bd47f0          POP      {r4-r10,lr}
000336  2100              MOVS     r1,#0
000338  f7ffbffe          B.W      lc640_write_int
                  |L1.828|
;;;370    		}
;;;371    	}
;;;372    			
;;;373    }
00033c  e8bd87f0          POP      {r4-r10,pc}
;;;374    
                          ENDP

                  vz_start PROC
;;;375    //-----------------------------------------------
;;;376    char vz_start(char hour)
000340  b570              PUSH     {r4-r6,lr}
;;;377    {          
000342  4605              MOV      r5,r0
;;;378    char out;
;;;379    out=0;
000344  f04f0600          MOV      r6,#0
;;;380    if((spc_stat==spcOFF)&&(speedChrgBlckStat!=1))
000348  4c2b              LDR      r4,|L1.1016|
00034a  7d20              LDRB     r0,[r4,#0x14]  ; spc_stat
00034c  bb38              CBNZ     r0,|L1.926|
00034e  4834              LDR      r0,|L1.1056|
000350  8800              LDRH     r0,[r0,#0]  ; speedChrgBlckStat
000352  2801              CMP      r0,#1
000354  d023              BEQ      |L1.926|
;;;381    	{
;;;382    	spc_stat=spcVZ;
000356  f104041e          ADD      r4,r4,#0x1e
00035a  f04f0102          MOV      r1,#2
00035e  f8041c0a          STRB     r1,[r4,#-0xa]
;;;383    	__ee_spc_stat=spcVZ; 
000362  87e1              STRH     r1,[r4,#0x3e]
;;;384    	lc640_write_int(EE_SPC_STAT,__ee_spc_stat);   
000364  f44f70f8          MOV      r0,#0x1f0
000368  f7fffffe          BL       lc640_write_int
;;;385    	vz_cnt_h=hour;
00036c  86e5              STRH     r5,[r4,#0x36]
;;;386    	__ee_vz_cnt=hour*60;
00036e  ebc51005          RSB      r0,r5,r5,LSL #4
000372  ea4f0180          LSL      r1,r0,#2
000376  460d              MOV      r5,r1
000378  87a1              STRH     r1,[r4,#0x3c]
;;;387    	lc640_write_int(EE_VZ_CNT,__ee_vz_cnt);
00037a  f44f70f9          MOV      r0,#0x1f2
00037e  f7fffffe          BL       lc640_write_int
;;;388    	lc640_write_int(EE_SPC_VZ_LENGT,hour*60);	
000382  4629              MOV      r1,r5
000384  f44f70ff          MOV      r0,#0x1fe
000388  f7fffffe          BL       lc640_write_int
;;;389    	vz_cnt_h_=0;
00038c  4630              MOV      r0,r6
00038e  8720              STRH     r0,[r4,#0x38]
;;;390    	vz_cnt_s=0;
000390  8660              STRH     r0,[r4,#0x32]
;;;391    	out=1;
000392  f04f0601          MOV      r6,#1
;;;392    	vz_mem_hndl(1);
000396  f04f0001          MOV      r0,#1
00039a  f7fffffe          BL       vz_mem_hndl
                  |L1.926|
;;;393    	}
;;;394    //else if((spc_stat==spc_KE1p1)||(spc_stat==spc_KE1p2)) out=22; 
;;;395    //else if((spc_stat==spc_KE2p1)||(spc_stat==spc_KE2p2)) out=33;
;;;396    //plazma=out;	
;;;397    return out;
00039e  4630              MOV      r0,r6
;;;398    }
0003a0  bd70              POP      {r4-r6,pc}
;;;399    
                          ENDP

                  vz_stop PROC
;;;400    //-----------------------------------------------
;;;401    void vz_stop(void)
0003a2  b510              PUSH     {r4,lr}
;;;402    {
;;;403    if(spc_stat==spcVZ)
0003a4  4c14              LDR      r4,|L1.1016|
0003a6  7d20              LDRB     r0,[r4,#0x14]  ; spc_stat
0003a8  2802              CMP      r0,#2
0003aa  d113              BNE      |L1.980|
;;;404         {
;;;405    vz_mem_hndl(vz_cnt_h);          
0003ac  f104041e          ADD      r4,r4,#0x1e
0003b0  8ee0              LDRH     r0,[r4,#0x36]  ; vz_cnt_h
0003b2  f7fffffe          BL       vz_mem_hndl
;;;406    vz_cnt_s=0;
0003b6  f04f0000          MOV      r0,#0
0003ba  8660              STRH     r0,[r4,#0x32]
;;;407    vz_cnt_h=0;
0003bc  86e0              STRH     r0,[r4,#0x36]
;;;408    vz_cnt_h_=0;
0003be  8720              STRH     r0,[r4,#0x38]
;;;409    spc_stat=spcOFF;
0003c0  f8040c0a          STRB     r0,[r4,#-0xa]
;;;410    
;;;411    		__ee_spc_stat=spcOFF;
0003c4  87e0              STRH     r0,[r4,#0x3e]
;;;412    		lc640_write_int(EE_SPC_STAT,spcOFF);
0003c6  4601              MOV      r1,r0
0003c8  e8bd4010          POP      {r4,lr}
0003cc  f44f70f8          MOV      r0,#0x1f0
0003d0  f7ffbffe          B.W      lc640_write_int
                  |L1.980|
;;;413         }
;;;414    
;;;415    }
0003d4  bd10              POP      {r4,pc}
;;;416    
                          ENDP

                  avz_next_date_hndl PROC
;;;417    //-----------------------------------------------
;;;418    void avz_next_date_hndl(void)
0003d6  b570              PUSH     {r4-r6,lr}
;;;419    {
;;;420    if((LPC_RTC->MONTH+AVZ)>12)lc640_write_int(EE_YEAR_AVZ,LPC_RTC->YEAR+1);
0003d8  4c0c              LDR      r4,|L1.1036|
0003da  3c20              SUBS     r4,r4,#0x20
0003dc  f8940038          LDRB     r0,[r4,#0x38]
0003e0  4d10              LDR      r5,|L1.1060|
0003e2  7829              LDRB     r1,[r5,#0]  ; AVZ
0003e4  4408              ADD      r0,r0,r1
0003e6  280c              CMP      r0,#0xc
0003e8  d91e              BLS      |L1.1064|
0003ea  8fa0              LDRH     r0,[r4,#0x3c]
0003ec  1c40              ADDS     r0,r0,#1
0003ee  b201              SXTH     r1,r0
0003f0  20b8              MOVS     r0,#0xb8
0003f2  f7fffffe          BL       lc640_write_int
0003f6  e01c              B        |L1.1074|
                  |L1.1016|
                          DCD      ||area_number.22||
                  |L1.1020|
                          DCD      bat
                  |L1.1024|
                          DCD      IKB
                  |L1.1028|
                          DCD      ADR_EE_BAT_ZAR_CNT_KE
                  |L1.1032|
                          DCD      bat_u_old_cnt
                  |L1.1036|
                          DCD      0x40024020
                  |L1.1040|
                          DCD      USIGN
                  |L1.1044|
                          DCD      ADR_EE_BAT_C_REAL
                  |L1.1048|
                          DCD      ADR_EE_BAT_ZAR_CNT
                  |L1.1052|
                          DCD      BAT_IS_ON
                  |L1.1056|
                          DCD      speedChrgBlckStat
                  |L1.1060|
                          DCD      AVZ
                  |L1.1064|
;;;421    else lc640_write_int(EE_YEAR_AVZ,LPC_RTC->YEAR);
000428  f9b4103c          LDRSH    r1,[r4,#0x3c]
00042c  20b8              MOVS     r0,#0xb8
00042e  f7fffffe          BL       lc640_write_int
                  |L1.1074|
;;;422    
;;;423    //lc640_write_int(EE_YEAR_AVZ,6);
;;;424    
;;;425    if((LPC_RTC->MONTH+AVZ)>12)lc640_write_int(EE_MONTH_AVZ,(LPC_RTC->MONTH+AVZ)-12);
000432  f8941038          LDRB     r1,[r4,#0x38]
000436  7828              LDRB     r0,[r5,#0]  ; AVZ
000438  4401              ADD      r1,r1,r0
00043a  290c              CMP      r1,#0xc
00043c  d907              BLS      |L1.1102|
00043e  f8941038          LDRB     r1,[r4,#0x38]
000442  380c              SUBS     r0,r0,#0xc
000444  4401              ADD      r1,r1,r0
000446  20b6              MOVS     r0,#0xb6
000448  f7fffffe          BL       lc640_write_int
00044c  e005              B        |L1.1114|
                  |L1.1102|
;;;426    else lc640_write_int(EE_MONTH_AVZ,LPC_RTC->MONTH+AVZ);                                                 
00044e  f8941038          LDRB     r1,[r4,#0x38]
000452  4401              ADD      r1,r1,r0
000454  20b6              MOVS     r0,#0xb6
000456  f7fffffe          BL       lc640_write_int
                  |L1.1114|
;;;427    
;;;428    //lc640_write_int(EE_MONTH_AVZ,5);
;;;429    
;;;430    if(LPC_RTC->DOM>28) lc640_write_int(EE_DATE_AVZ,28);
00045a  f894002c          LDRB     r0,[r4,#0x2c]
00045e  281c              CMP      r0,#0x1c
000460  d904              BLS      |L1.1132|
000462  211c              MOVS     r1,#0x1c
000464  20b4              MOVS     r0,#0xb4
000466  f7fffffe          BL       lc640_write_int
00046a  e004              B        |L1.1142|
                  |L1.1132|
;;;431    else lc640_write_int(EE_DATE_AVZ,LPC_RTC->DOM);
00046c  f894102c          LDRB     r1,[r4,#0x2c]
000470  20b4              MOVS     r0,#0xb4
000472  f7fffffe          BL       lc640_write_int
                  |L1.1142|
;;;432    
;;;433    //lc640_write_int(EE_DATE_AVZ,4);
;;;434    
;;;435    lc640_write_int(EE_HOUR_AVZ,LPC_RTC->HOUR);
000476  f1040420          ADD      r4,r4,#0x20
00047a  7a21              LDRB     r1,[r4,#8]
00047c  f04f00ae          MOV      r0,#0xae
000480  f7fffffe          BL       lc640_write_int
;;;436    lc640_write_int(EE_MIN_AVZ,LPC_RTC->MIN);
000484  7921              LDRB     r1,[r4,#4]
000486  20b0              MOVS     r0,#0xb0
000488  f7fffffe          BL       lc640_write_int
;;;437    lc640_write_int(EE_SEC_AVZ,LPC_RTC->SEC);
00048c  7821              LDRB     r1,[r4,#0]
00048e  e8bd4070          POP      {r4-r6,lr}
000492  20b2              MOVS     r0,#0xb2
000494  f7ffbffe          B.W      lc640_write_int
;;;438    
;;;439    }
;;;440    
                          ENDP

                  avz_drv PROC
;;;441    //-----------------------------------------------
;;;442    void avz_drv(void)                               
000498  b510              PUSH     {r4,lr}
;;;443    {                
;;;444    if(AVZ!=AVZ_OFF)
00049a  48fe              LDR      r0,|L1.2196|
;;;445    	{
;;;446    	if((LPC_RTC->YEAR==YEAR_AVZ)&&(LPC_RTC->MONTH==MONTH_AVZ)&&(LPC_RTC->DOM==DATE_AVZ)&&(LPC_RTC->HOUR==HOUR_AVZ)&&(LPC_RTC->MIN==MIN_AVZ)&&(LPC_RTC->SEC==SEC_AVZ))
;;;447    		{
;;;448    		bAVZ=1;
00049c  4cfe              LDR      r4,|L1.2200|
00049e  7800              LDRB     r0,[r0,#0]            ;444  ; AVZ
0004a0  b330              CBZ      r0,|L1.1264|
0004a2  48fe              LDR      r0,|L1.2204|
0004a4  8f82              LDRH     r2,[r0,#0x3c]         ;446
0004a6  49fe              LDR      r1,|L1.2208|
0004a8  8809              LDRH     r1,[r1,#0]            ;446  ; YEAR_AVZ
0004aa  428a              CMP      r2,r1                 ;446
0004ac  d120              BNE      |L1.1264|
0004ae  f8902038          LDRB     r2,[r0,#0x38]         ;446
0004b2  49fc              LDR      r1,|L1.2212|
0004b4  8809              LDRH     r1,[r1,#0]            ;446  ; MONTH_AVZ
0004b6  428a              CMP      r2,r1                 ;446
0004b8  d11a              BNE      |L1.1264|
0004ba  f890102c          LDRB     r1,[r0,#0x2c]         ;446
0004be  4afa              LDR      r2,|L1.2216|
0004c0  8812              LDRH     r2,[r2,#0]            ;446  ; DATE_AVZ
0004c2  4291              CMP      r1,r2                 ;446
0004c4  d114              BNE      |L1.1264|
0004c6  f8901028          LDRB     r1,[r0,#0x28]         ;446
0004ca  4af8              LDR      r2,|L1.2220|
0004cc  8812              LDRH     r2,[r2,#0]            ;446  ; HOUR_AVZ
0004ce  4291              CMP      r1,r2                 ;446
0004d0  d10e              BNE      |L1.1264|
0004d2  f8901024          LDRB     r1,[r0,#0x24]         ;446
0004d6  4af6              LDR      r2,|L1.2224|
0004d8  8812              LDRH     r2,[r2,#0]            ;446  ; MIN_AVZ
0004da  4291              CMP      r1,r2                 ;446
0004dc  d108              BNE      |L1.1264|
0004de  f8900020          LDRB     r0,[r0,#0x20]         ;446
0004e2  49f4              LDR      r1,|L1.2228|
0004e4  8809              LDRH     r1,[r1,#0]            ;446  ; SEC_AVZ
0004e6  4288              CMP      r0,r1                 ;446
0004e8  d102              BNE      |L1.1264|
0004ea  f04f0001          MOV      r0,#1
0004ee  75e0              STRB     r0,[r4,#0x17]
                  |L1.1264|
;;;449    		}
;;;450    	}
;;;451    if(bAVZ)
0004f0  7de0              LDRB     r0,[r4,#0x17]  ; bAVZ
0004f2  2800              CMP      r0,#0
0004f4  d00c              BEQ      |L1.1296|
;;;452    	{
;;;453    	if(vz_start(AVZ_TIME))
0004f6  48f0              LDR      r0,|L1.2232|
0004f8  8800              LDRH     r0,[r0,#0]  ; AVZ_TIME
0004fa  b2c0              UXTB     r0,r0
0004fc  f7fffffe          BL       vz_start
000500  2800              CMP      r0,#0
000502  d005              BEQ      |L1.1296|
;;;454    		{
;;;455    		bAVZ=0;
000504  f04f0000          MOV      r0,#0
000508  75e0              STRB     r0,[r4,#0x17]
;;;456    		avz_next_date_hndl();
00050a  e8bd4010          POP      {r4,lr}
00050e  e7fe              B        avz_next_date_hndl
                  |L1.1296|
;;;457    		}
;;;458    	}	
;;;459    
;;;460    }
000510  bd10              POP      {r4,pc}
;;;461    
                          ENDP

                  vz_drv PROC
;;;462    //-----------------------------------------------
;;;463    void vz_drv(void)
000512  b570              PUSH     {r4-r6,lr}
;;;464    { 
;;;465    if(spc_stat==spcVZ)
000514  4ce0              LDR      r4,|L1.2200|
000516  7d20              LDRB     r0,[r4,#0x14]  ; spc_stat
000518  2802              CMP      r0,#2
00051a  d147              BNE      |L1.1452|
;;;466    	{
;;;467    	if(vz_cnt_s_<3600)
00051c  f8b40052          LDRH     r0,[r4,#0x52]  ; vz_cnt_s_
000520  f44f6161          MOV      r1,#0xe10
;;;468    		{
;;;469    		vz_cnt_s_++;
;;;470    		if(vz_cnt_s_>=3600)
;;;471    			{
;;;472    			vz_cnt_s_=0;
000524  2500              MOVS     r5,#0
000526  4288              CMP      r0,r1                 ;467
000528  d215              BCS      |L1.1366|
00052a  f1000001          ADD      r0,r0,#1              ;469
00052e  b280              UXTH     r0,r0                 ;469
000530  f8a40052          STRH     r0,[r4,#0x52]         ;469
000534  4288              CMP      r0,r1                 ;470
000536  d30e              BCC      |L1.1366|
000538  f8a45052          STRH     r5,[r4,#0x52]
;;;473    			if(vz_cnt_h)
00053c  f8b40054          LDRH     r0,[r4,#0x54]  ; vz_cnt_h
000540  b148              CBZ      r0,|L1.1366|
;;;474    				{
;;;475    				vz_cnt_h--;
000542  f1a00001          SUB      r0,r0,#1
000546  f8240f54          STRH     r0,[r4,#0x54]!
;;;476    				vz_cnt_h_++;
00054a  8860              LDRH     r0,[r4,#2]  ; vz_cnt_h_
00054c  f1000001          ADD      r0,r0,#1
000550  8060              STRH     r0,[r4,#2]
000552  f1a40454          SUB      r4,r4,#0x54
                  |L1.1366|
;;;477    				}
;;;478    			}
;;;479    		}
;;;480    
;;;481    
;;;482    	if(vz_cnt_s<60)
000556  f8b40050          LDRH     r0,[r4,#0x50]  ; vz_cnt_s
00055a  283c              CMP      r0,#0x3c
00055c  d226              BCS      |L1.1452|
;;;483    		{
;;;484    		vz_cnt_s++;
00055e  f1000001          ADD      r0,r0,#1
000562  b280              UXTH     r0,r0
000564  f8a40050          STRH     r0,[r4,#0x50]
;;;485    		if(vz_cnt_s>=60)
000568  283c              CMP      r0,#0x3c
00056a  d31f              BCC      |L1.1452|
;;;486    			{
;;;487    			vz_cnt_s=0;
00056c  f8245f50          STRH     r5,[r4,#0x50]!
;;;488    			
;;;489    			__ee_vz_cnt--;
000570  8960              LDRH     r0,[r4,#0xa]  ; __ee_vz_cnt
000572  f1a00001          SUB      r0,r0,#1
000576  b201              SXTH     r1,r0
000578  8161              STRH     r1,[r4,#0xa]
;;;490    			lc640_write_int(EE_VZ_CNT,__ee_vz_cnt);
00057a  f44f70f9          MOV      r0,#0x1f2
00057e  f7fffffe          BL       lc640_write_int
;;;491    			if((!__ee_vz_cnt)||(speedChrgBlckStat==1))
000582  8960              LDRH     r0,[r4,#0xa]  ; __ee_vz_cnt
000584  f1a40450          SUB      r4,r4,#0x50
000588  b118              CBZ      r0,|L1.1426|
00058a  48cc              LDR      r0,|L1.2236|
00058c  8800              LDRH     r0,[r0,#0]  ; speedChrgBlckStat
00058e  2801              CMP      r0,#1
000590  d10c              BNE      |L1.1452|
                  |L1.1426|
;;;492    				{
;;;493    				spc_stat=spcOFF;
000592  7525              STRB     r5,[r4,#0x14]
;;;494    						__ee_spc_stat=spcOFF;
000594  f8a4505c          STRH     r5,[r4,#0x5c]
;;;495    		lc640_write_int(EE_SPC_STAT,spcOFF);
000598  2100              MOVS     r1,#0
00059a  f44f70f8          MOV      r0,#0x1f0
00059e  f7fffffe          BL       lc640_write_int
;;;496    				vz_mem_hndl(0);
0005a2  e8bd4070          POP      {r4-r6,lr}
0005a6  2000              MOVS     r0,#0
0005a8  f7ffbffe          B.W      vz_mem_hndl
                  |L1.1452|
;;;497    				}
;;;498    			}
;;;499    		}
;;;500    
;;;501    	}
;;;502    
;;;503    
;;;504    } 
0005ac  bd70              POP      {r4-r6,pc}
;;;505    
                          ENDP

                  kb_init PROC
;;;509    //-----------------------------------------------
;;;510    void kb_init(void)
0005ae  48c4              LDR      r0,|L1.2240|
;;;511    {
;;;512    main_kb_cnt=(TBAT*60)-60/*120*/;
0005b0  f06f013b          MVN      r1,#0x3b
0005b4  8800              LDRH     r0,[r0,#0]  ; TBAT
0005b6  ebc01000          RSB      r0,r0,r0,LSL #4
0005ba  eb010080          ADD      r0,r1,r0,LSL #2
0005be  49b6              LDR      r1,|L1.2200|
0005c0  f8a10040          STRH     r0,[r1,#0x40]
;;;513    }
0005c4  4770              BX       lr
;;;514    
                          ENDP

                  kb_hndl PROC
;;;515    //-----------------------------------------------
;;;516    void kb_hndl(void)
0005c6  e92d5ff0          PUSH     {r4-r12,lr}
;;;517    {
;;;518    
;;;519    static signed short ibat[2],ibat_[2];
;;;520    #ifdef UKU_TELECORE2015
;;;521    if(((++main_kb_cnt>=TBAT*60)&&(TBAT))&&(BAT_TYPE==0))
;;;522    #else 
;;;523    if(((++main_kb_cnt>=TBAT*60)&&(TBAT)))
0005ca  f8df82cc          LDR      r8,|L1.2200|
;;;524    #endif
;;;525    	{
;;;526    	main_kb_cnt=0;
;;;527    	
;;;528    	kb_start[0]=0;
;;;529    	kb_start[1]=0;
;;;530    	kb_start_ips=0;
;;;531    
;;;532    	if( (BAT_IS_ON[0]==bisON) && (bat[0]._Ub>80) && ( (abs(bat[0]._Ib)<IKB) || (bat[0]._av&1) ) ) kb_start[0]=1;
;;;533    	if( (BAT_IS_ON[1]==bisON) && (bat[1]._Ub>80) && ( (abs(bat[1]._Ib)<IKB) || (bat[1]._av&1) ) ) kb_start[1]=1;
;;;534    #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;535    	if( (!ips_bat_av_vzvod)                      && ((abs(Ib_ips_termokompensat)<IKB) || (bat_ips._av&1) ) ) kb_start_ips=1;
0005ce  f8dfa2f4          LDR      r10,|L1.2244|
0005d2  2500              MOVS     r5,#0                 ;523
0005d4  f8b80040          LDRH     r0,[r8,#0x40]         ;523  ; main_kb_cnt
0005d8  4ebb              LDR      r6,|L1.2248|
0005da  1c40              ADDS     r0,r0,#1              ;523
0005dc  b201              SXTH     r1,r0                 ;523
0005de  48b8              LDR      r0,|L1.2240|
0005e0  f8a81040          STRH     r1,[r8,#0x40]         ;523
0005e4  f8df92e4          LDR      r9,|L1.2252|
0005e8  f9b00000          LDRSH    r0,[r0,#0]            ;523  ; TBAT
;;;536    #endif	
;;;537    	if( (net_av) || (num_of_wrks_bps==0) || ( (spc_stat!=spcOFF) && (spc_stat!=spcVZ) ) ) 
;;;538    		{
;;;539    		kb_start[0]=0;
;;;540    		kb_start[1]=0;
;;;541    		kb_start_ips=0;
;;;542    		}
;;;543    
;;;544    	if((kb_start[0]==1)||(kb_start[1]==1)||(kb_start_ips==1))
;;;545    		{
;;;546    		kb_cnt_1lev=10;
0005ec  270a              MOVS     r7,#0xa
0005ee  ebc01200          RSB      r2,r0,r0,LSL #4       ;523
0005f2  f04f0b01          MOV      r11,#1                ;532
0005f6  f1080446          ADD      r4,r8,#0x46           ;528
0005fa  ebb10f82          CMP      r1,r2,LSL #2          ;523
0005fe  db61              BLT      |L1.1732|
000600  b3f0              CBZ      r0,|L1.1664|
000602  f8a85040          STRH     r5,[r8,#0x40]         ;526
000606  7025              STRB     r5,[r4,#0]            ;528
000608  7065              STRB     r5,[r4,#1]            ;529
00060a  f888500e          STRB     r5,[r8,#0xe]          ;530
00060e  48b0              LDR      r0,|L1.2256|
000610  7800              LDRB     r0,[r0,#0]            ;532  ; BAT_IS_ON
000612  2855              CMP      r0,#0x55              ;532
000614  d111              BNE      |L1.1594|
000616  f9b60002          LDRSH    r0,[r6,#2]            ;532  ; bat
00061a  2850              CMP      r0,#0x50              ;532
00061c  dd0d              BLE      |L1.1594|
00061e  f9b60008          LDRSH    r0,[r6,#8]            ;532  ; bat
000622  f7fffffe          BL       abs
000626  f9b91000          LDRSH    r1,[r9,#0]            ;532  ; IKB
00062a  4288              CMP      r0,r1                 ;532
00062c  db03              BLT      |L1.1590|
00062e  f896003d          LDRB     r0,[r6,#0x3d]         ;532  ; bat
000632  07c0              LSLS     r0,r0,#31             ;532
000634  d001              BEQ      |L1.1594|
                  |L1.1590|
000636  f884b000          STRB     r11,[r4,#0]           ;532
                  |L1.1594|
00063a  48a5              LDR      r0,|L1.2256|
00063c  7840              LDRB     r0,[r0,#1]            ;533  ; BAT_IS_ON
00063e  2855              CMP      r0,#0x55              ;533
000640  d111              BNE      |L1.1638|
000642  f9b6004e          LDRSH    r0,[r6,#0x4e]         ;533  ; bat
000646  2850              CMP      r0,#0x50              ;533
000648  dd0d              BLE      |L1.1638|
00064a  f9b60054          LDRSH    r0,[r6,#0x54]         ;533  ; bat
00064e  f7fffffe          BL       abs
000652  f9b91000          LDRSH    r1,[r9,#0]            ;533  ; IKB
000656  4288              CMP      r0,r1                 ;533
000658  db03              BLT      |L1.1634|
00065a  f8960089          LDRB     r0,[r6,#0x89]         ;533  ; bat
00065e  07c0              LSLS     r0,r0,#31             ;533
000660  d001              BEQ      |L1.1638|
                  |L1.1634|
000662  f884b001          STRB     r11,[r4,#1]           ;533
                  |L1.1638|
000666  489b              LDR      r0,|L1.2260|
000668  7800              LDRB     r0,[r0,#0]            ;535  ; ips_bat_av_vzvod
00066a  b980              CBNZ     r0,|L1.1678|
00066c  f9ba0000          LDRSH    r0,[r10,#0]           ;535  ; Ib_ips_termokompensat
000670  f7fffffe          BL       abs
000674  f9b91000          LDRSH    r1,[r9,#0]            ;535  ; IKB
000678  4288              CMP      r0,r1                 ;535
00067a  db06              BLT      |L1.1674|
00067c  4896              LDR      r0,|L1.2264|
00067e  e000              B        |L1.1666|
                  |L1.1664|
000680  e020              B        |L1.1732|
                  |L1.1666|
000682  f890003d          LDRB     r0,[r0,#0x3d]         ;535  ; bat_ips
000686  07c0              LSLS     r0,r0,#31             ;535
000688  d001              BEQ      |L1.1678|
                  |L1.1674|
00068a  f888b00e          STRB     r11,[r8,#0xe]         ;535
                  |L1.1678|
00068e  4893              LDR      r0,|L1.2268|
000690  7800              LDRB     r0,[r0,#0]            ;537  ; net_av
000692  b938              CBNZ     r0,|L1.1700|
000694  f898000f          LDRB     r0,[r8,#0xf]          ;537  ; num_of_wrks_bps
000698  b120              CBZ      r0,|L1.1700|
00069a  f8980014          LDRB     r0,[r8,#0x14]         ;537  ; spc_stat
00069e  b128              CBZ      r0,|L1.1708|
0006a0  2802              CMP      r0,#2                 ;537
0006a2  d003              BEQ      |L1.1708|
                  |L1.1700|
0006a4  7025              STRB     r5,[r4,#0]            ;539
0006a6  7065              STRB     r5,[r4,#1]            ;540
0006a8  f888500e          STRB     r5,[r8,#0xe]          ;541
                  |L1.1708|
0006ac  7820              LDRB     r0,[r4,#0]            ;544  ; kb_start
0006ae  2801              CMP      r0,#1                 ;544
0006b0  d020              BEQ      |L1.1780|
0006b2  7860              LDRB     r0,[r4,#1]            ;544  ; kb_start
0006b4  2801              CMP      r0,#1                 ;544
0006b6  d01d              BEQ      |L1.1780|
0006b8  f898000e          LDRB     r0,[r8,#0xe]          ;544  ; kb_start_ips
0006bc  2801              CMP      r0,#1                 ;544
0006be  d019              BEQ      |L1.1780|
;;;547    		}
;;;548    	else kb_cnt_1lev=0;
0006c0  f8a85042          STRH     r5,[r8,#0x42]
                  |L1.1732|
;;;549    	}
;;;550    
;;;551    if(kb_cnt_1lev)
0006c4  4641              MOV      r1,r8
0006c6  f9b80042          LDRSH    r0,[r8,#0x42]  ; kb_cnt_1lev
;;;552    	{
;;;553    	kb_cnt_1lev--;
;;;554    
;;;555    	if(kb_cnt_1lev>5)mess_send(MESS2CNTRL_HNDL,PARAM_CNTRL_STAT_PLUS,30,15);
;;;556    	else if(kb_cnt_1lev>0) mess_send(MESS2CNTRL_HNDL,PARAM_CNTRL_STAT_MINUS,30,15);
;;;557    
;;;558    
;;;559    	if(kb_cnt_1lev==5)
;;;560    		{
;;;561    		ibat[0]=abs(bat[0]._Ib);
0006ca  f8df81cc          LDR      r8,|L1.2200|
0006ce  2800              CMP      r0,#0                 ;551
0006d0  f1080868          ADD      r8,r8,#0x68
0006d4  d07e              BEQ      |L1.2004|
0006d6  f1a00001          SUB      r0,r0,#1              ;553
0006da  b200              SXTH     r0,r0                 ;553
0006dc  468b              MOV      r11,r1                ;553
0006de  f8a10042          STRH     r0,[r1,#0x42]         ;553
0006e2  2805              CMP      r0,#5                 ;555
0006e4  dd09              BLE      |L1.1786|
0006e6  230f              MOVS     r3,#0xf               ;555
0006e8  221e              MOVS     r2,#0x1e              ;555
0006ea  2164              MOVS     r1,#0x64              ;555
0006ec  20e1              MOVS     r0,#0xe1              ;555
0006ee  f7fffffe          BL       mess_send
0006f2  e00a              B        |L1.1802|
                  |L1.1780|
0006f4  f8a87042          STRH     r7,[r8,#0x42]         ;546
0006f8  e7e4              B        |L1.1732|
                  |L1.1786|
0006fa  2800              CMP      r0,#0                 ;556
0006fc  dd05              BLE      |L1.1802|
0006fe  230f              MOVS     r3,#0xf               ;556
000700  221e              MOVS     r2,#0x1e              ;556
000702  2169              MOVS     r1,#0x69              ;556
000704  20e1              MOVS     r0,#0xe1              ;556
000706  f7fffffe          BL       mess_send
                  |L1.1802|
00070a  f8bb0042          LDRH     r0,[r11,#0x42]        ;559  ; kb_cnt_1lev
00070e  2805              CMP      r0,#5                 ;559
000710  d111              BNE      |L1.1846|
000712  f9b60008          LDRSH    r0,[r6,#8]  ; bat
000716  f7fffffe          BL       abs
00071a  f8a80000          STRH     r0,[r8,#0]
;;;562    		ibat[1]=abs(bat[1]._Ib);
00071e  f9b60054          LDRSH    r0,[r6,#0x54]  ; bat
000722  f7fffffe          BL       abs
000726  f8a80002          STRH     r0,[r8,#2]
;;;563    		ibat_ips=abs(Ib_ips_termokompensat);
00072a  f9ba0000          LDRSH    r0,[r10,#0]  ; Ib_ips_termokompensat
00072e  f7fffffe          BL       abs
000732  f8ab0048          STRH     r0,[r11,#0x48]
                  |L1.1846|
;;;564    		}
;;;565    	
;;;566    	if(kb_cnt_1lev==0)
000736  4858              LDR      r0,|L1.2200|
000738  f8b00042          LDRH     r0,[r0,#0x42]  ; kb_cnt_1lev
00073c  2800              CMP      r0,#0
00073e  d158              BNE      |L1.2034|
;;;567    		{
;;;568    		ibat_[0]=abs(bat[0]._Ib);
000740  f9b60008          LDRSH    r0,[r6,#8]  ; bat
000744  f7fffffe          BL       abs
000748  f8dfb14c          LDR      r11,|L1.2200|
00074c  f10b0b6c          ADD      r11,r11,#0x6c
000750  f8ab0000          STRH     r0,[r11,#0]
;;;569    		ibat_[1]=abs(bat[1]._Ib);
000754  f9b60054          LDRSH    r0,[r6,#0x54]  ; bat
000758  f7fffffe          BL       abs
00075c  f8ab0002          STRH     r0,[r11,#2]
;;;570    		ibat_ips_=abs(Ib_ips_termokompensat);
000760  f9ba0000          LDRSH    r0,[r10,#0]  ; Ib_ips_termokompensat
000764  f7fffffe          BL       abs
000768  f8dfa12c          LDR      r10,|L1.2200|
00076c  f8aa004a          STRH     r0,[r10,#0x4a]
;;;571    
;;;572    		kb_cnt_2lev=0;
000770  f8aa5044          STRH     r5,[r10,#0x44]
;;;573    
;;;574    
;;;575    		if(( (ibat[0]+ibat_[0]) < IKB )&& (kb_start[0]==1))
000774  f9b80000          LDRSH    r0,[r8,#0]  ; ibat
000778  f9bb1000          LDRSH    r1,[r11,#0]  ; ibat_
00077c  4408              ADD      r0,r0,r1
00077e  f9b91000          LDRSH    r1,[r9,#0]  ; IKB
000782  4288              CMP      r0,r1
000784  da02              BGE      |L1.1932|
000786  7820              LDRB     r0,[r4,#0]  ; kb_start
000788  2801              CMP      r0,#1
00078a  d034              BEQ      |L1.2038|
                  |L1.1932|
;;;576    			{
;;;577    			kb_cnt_2lev=10;  
;;;578    			}
;;;579    		else if(bat[0]._Ub>200)
00078c  f9b60002          LDRSH    r0,[r6,#2]  ; bat
000790  28c8              CMP      r0,#0xc8
000792  dd04              BLE      |L1.1950|
;;;580    			{
;;;581    			kb_start[0]=0;
000794  7025              STRB     r5,[r4,#0]
;;;582    			avar_bat_hndl(0,0);
000796  2100              MOVS     r1,#0
000798  4608              MOV      r0,r1
00079a  f7fffffe          BL       avar_bat_hndl
                  |L1.1950|
;;;583    			}
;;;584    		
;;;585    		if(( (ibat[1]+ibat_[1]) < IKB ) && (kb_start[1]==1))
00079e  f9b80002          LDRSH    r0,[r8,#2]  ; ibat
0007a2  f9bb1002          LDRSH    r1,[r11,#2]  ; ibat_
0007a6  4408              ADD      r0,r0,r1
0007a8  f9b91000          LDRSH    r1,[r9,#0]  ; IKB
0007ac  4288              CMP      r0,r1
0007ae  da02              BGE      |L1.1974|
0007b0  7860              LDRB     r0,[r4,#1]  ; kb_start
0007b2  2801              CMP      r0,#1
0007b4  d022              BEQ      |L1.2044|
                  |L1.1974|
;;;586    			{
;;;587    			kb_cnt_2lev=10;     
;;;588    			}
;;;589    		else  if(bat[1]._Ub>200)
0007b6  f9b6004e          LDRSH    r0,[r6,#0x4e]  ; bat
0007ba  28c8              CMP      r0,#0xc8
0007bc  dd04              BLE      |L1.1992|
;;;590    			{
;;;591    			kb_start[1]=0;
0007be  7065              STRB     r5,[r4,#1]
;;;592    			avar_bat_hndl(1,0);
0007c0  2100              MOVS     r1,#0
0007c2  2001              MOVS     r0,#1
0007c4  f7fffffe          BL       avar_bat_hndl
                  |L1.1992|
;;;593    			}
;;;594    #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;595    		if(( (ibat_ips+ibat_ips_) < IKB ) && (kb_start_ips==1))
0007c8  f9ba0048          LDRSH    r0,[r10,#0x48]  ; ibat_ips
0007cc  f9ba104a          LDRSH    r1,[r10,#0x4a]  ; ibat_ips_
0007d0  4408              ADD      r0,r0,r1
0007d2  e000              B        |L1.2006|
                  |L1.2004|
0007d4  e01b              B        |L1.2062|
                  |L1.2006|
0007d6  f9b91000          LDRSH    r1,[r9,#0]  ; IKB
0007da  4288              CMP      r0,r1
0007dc  da09              BGE      |L1.2034|
0007de  f89a000e          LDRB     r0,[r10,#0xe]  ; kb_start_ips
0007e2  2801              CMP      r0,#1
0007e4  d105              BNE      |L1.2034|
;;;596    			{
;;;597    			if(KB_ALGORITM==1)
0007e6  483e              LDR      r0,|L1.2272|
0007e8  8800              LDRH     r0,[r0,#0]  ; KB_ALGORITM
0007ea  2801              CMP      r0,#1
0007ec  d009              BEQ      |L1.2050|
;;;598    				{
;;;599    				avar_bat_ips_hndl(1);
;;;600    				kb_start_ips=0;
;;;601    				}
;;;602    			else
;;;603    				{
;;;604    				kb_cnt_2lev=10;     
0007ee  f8aa7044          STRH     r7,[r10,#0x44]
                  |L1.2034|
;;;605    				}
;;;606    			}
;;;607    #endif
;;;608    		}	
;;;609    
;;;610    
;;;611    	}
;;;612    else if(kb_cnt_2lev)
;;;613    	{
;;;614    	kb_cnt_2lev--;
;;;615    
;;;616    	if(kb_cnt_2lev>5)mess_send(MESS2CNTRL_HNDL,PARAM_CNTRL_STAT_PLUS,200,15);
;;;617    	else if(kb_cnt_2lev>0) mess_send(MESS2CNTRL_HNDL,PARAM_CNTRL_STAT_MINUS,200,15);
;;;618    
;;;619    
;;;620    	if(kb_cnt_2lev==5)
;;;621    		{
;;;622    		ibat[0]=abs(bat[0]._Ib);
;;;623    		ibat[1]=abs(bat[1]._Ib);
;;;624    		ibat_ips=abs(Ib_ips_termokompensat);
;;;625    		}
;;;626    	
;;;627    	if(kb_cnt_2lev==0)
;;;628    		{
;;;629    		ibat_[0]=abs(bat[0]._Ib);
;;;630    		ibat_[1]=abs(bat[1]._Ib);
;;;631    		ibat_ips_=abs(Ib_ips_termokompensat);
;;;632    
;;;633    		kb_full_ver=0;
;;;634    
;;;635    		if(( (ibat[0]+ibat_[0]) < IKB ) && (kb_start[0]==1))
;;;636    			{
;;;637    			kb_full_ver=1;  
;;;638    			}
;;;639    		else if(bat[0]._Ub>200)			
;;;640    			{
;;;641    			kb_start[0]=0;
;;;642    			avar_bat_hndl(0,0);
;;;643    			}
;;;644    
;;;645    		if(( (ibat[1]+ibat_[1]) < IKB ) && (kb_start[1]==1))
;;;646    			{
;;;647    			kb_full_ver=1;     
;;;648    			}
;;;649    		else	if(bat[1]._Ub>200)		
;;;650    			{
;;;651    			kb_start[1]=0;
;;;652    			avar_bat_hndl(1,0);
;;;653    			}
;;;654    #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;655    		if(( (ibat_ips+ibat_ips_) < IKB )  && (kb_start_ips==1))
;;;656    			{
;;;657    			if(KB_ALGORITM==2)
;;;658    				{
;;;659    				avar_bat_ips_hndl(1);
;;;660    				kb_start_ips=0;
;;;661    				}
;;;662    			else
;;;663    				{
;;;664    				kb_full_ver=1;     
;;;665    				}
;;;666    			}
;;;667    #endif
;;;668    		}	
;;;669    	}
;;;670    
;;;671    else if(kb_full_ver)
;;;672    	{
;;;673    	
;;;674    	mess_send(MESS2CNTRL_HNDL,PARAM_CNTRL_STAT_STEP_DOWN,0,15);
;;;675    
;;;676    	if( abs(bat[0]._Ib) > IKB ) 
;;;677    		{
;;;678    		if(kb_start[0]==1)
;;;679    			{
;;;680    			kb_start[0]=0;
;;;681    			avar_bat_hndl(0,0);
;;;682    			}
;;;683    		}
;;;684    
;;;685    	if( abs(bat[1]._Ib) > IKB ) 
;;;686    		{
;;;687    		if(kb_start[1]==1)
;;;688    			{
;;;689    			kb_start[1]=0;
;;;690    			avar_bat_hndl(1,0);
;;;691    			}
;;;692    		}
;;;693    #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;694    	if( abs(Ib_ips_termokompensat) > IKB ) 
;;;695    		{
;;;696    		if(kb_start_ips==1)
;;;697    			{
;;;698    			kb_start_ips=0;
;;;699    			avar_bat_ips_hndl(0);
;;;700    			}
;;;701    		}
;;;702    #endif
;;;703    
;;;704    	if ((kb_start[0]==0) && (kb_start[1]==0) && (kb_start_ips==0)) 
;;;705    		{
;;;706    		kb_full_ver=0;
;;;707    		}
;;;708    
;;;709    	if(( (mess_find(MESS2KB_HNDL))	&& (mess_data[0]==PARAM_CNTRL_IS_DOWN) ) || (load_U<(USIGN*10)) )
;;;710    		{
;;;711    		kb_full_ver=0;
;;;712    		if((kb_start[0]==1)&&((load_I>(2*IKB)/10))&&(!(bat[0]._av&0x01))) avar_bat_hndl(0,1);
;;;713    		if((kb_start[1]==1)&&((load_I>(2*IKB)/10))&&(!(bat[1]._av&0x01))) avar_bat_hndl(1,1);
;;;714    #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;715    		if((kb_start_ips==1)&&((load_I>(2*IKB)/10))&&(!(bat_ips._av&0x01))) avar_bat_ips_hndl(1);
;;;716    #endif
;;;717    		}
;;;718    	}
;;;719    
;;;720    }
0007f2  e8bd9ff0          POP      {r4-r12,pc}
                  |L1.2038|
0007f6  f8aa7044          STRH     r7,[r10,#0x44]        ;577
0007fa  e7d0              B        |L1.1950|
                  |L1.2044|
0007fc  f8aa7044          STRH     r7,[r10,#0x44]        ;587
000800  e7e2              B        |L1.1992|
                  |L1.2050|
000802  2001              MOVS     r0,#1                 ;599
000804  f7fffffe          BL       avar_bat_ips_hndl
000808  f88a500e          STRB     r5,[r10,#0xe]         ;600
                  |L1.2060|
00080c  e7f1              B        |L1.2034|
                  |L1.2062|
00080e  f9b10044          LDRSH    r0,[r1,#0x44]         ;612  ; kb_cnt_2lev
000812  b3f0              CBZ      r0,|L1.2194|
000814  f1a00001          SUB      r0,r0,#1              ;614
000818  b200              SXTH     r0,r0                 ;614
00081a  460f              MOV      r7,r1                 ;614
00081c  f8a10044          STRH     r0,[r1,#0x44]         ;614
000820  2805              CMP      r0,#5                 ;616
000822  dd06              BLE      |L1.2098|
000824  230f              MOVS     r3,#0xf               ;616
000826  22c8              MOVS     r2,#0xc8              ;616
000828  2164              MOVS     r1,#0x64              ;616
00082a  20e1              MOVS     r0,#0xe1              ;616
00082c  f7fffffe          BL       mess_send
000830  e007              B        |L1.2114|
                  |L1.2098|
000832  2800              CMP      r0,#0                 ;617
000834  dd05              BLE      |L1.2114|
000836  230f              MOVS     r3,#0xf               ;617
000838  22c8              MOVS     r2,#0xc8              ;617
00083a  2169              MOVS     r1,#0x69              ;617
00083c  20e1              MOVS     r0,#0xe1              ;617
00083e  f7fffffe          BL       mess_send
                  |L1.2114|
000842  f8b70044          LDRH     r0,[r7,#0x44]         ;620  ; kb_cnt_2lev
000846  2805              CMP      r0,#5                 ;620
000848  d111              BNE      |L1.2158|
00084a  f9b60008          LDRSH    r0,[r6,#8]            ;622  ; bat
00084e  f7fffffe          BL       abs
000852  f8a80000          STRH     r0,[r8,#0]            ;622
000856  f9b60054          LDRSH    r0,[r6,#0x54]         ;623  ; bat
00085a  f7fffffe          BL       abs
00085e  f8a80002          STRH     r0,[r8,#2]            ;623
000862  f9ba0000          LDRSH    r0,[r10,#0]           ;624  ; Ib_ips_termokompensat
000866  f7fffffe          BL       abs
00086a  f8a70048          STRH     r0,[r7,#0x48]         ;624
                  |L1.2158|
00086e  480a              LDR      r0,|L1.2200|
000870  f8b00044          LDRH     r0,[r0,#0x44]         ;627  ; kb_cnt_2lev
000874  2800              CMP      r0,#0                 ;627
                  |L1.2166|
000876  d1bc              BNE      |L1.2034|
000878  f9b60008          LDRSH    r0,[r6,#8]            ;629  ; bat
00087c  f7fffffe          BL       abs
000880  4f05              LDR      r7,|L1.2200|
000882  376c              ADDS     r7,r7,#0x6c           ;629
000884  8038              STRH     r0,[r7,#0]            ;629
000886  f9b60054          LDRSH    r0,[r6,#0x54]         ;630  ; bat
00088a  f7fffffe          BL       abs
00088e  8078              STRH     r0,[r7,#2]            ;630
000890  e028              B        |L1.2276|
                  |L1.2194|
000892  e07c              B        |L1.2446|
                  |L1.2196|
                          DCD      AVZ
                  |L1.2200|
                          DCD      ||area_number.22||
                  |L1.2204|
                          DCD      0x40024000
                  |L1.2208|
                          DCD      YEAR_AVZ
                  |L1.2212|
                          DCD      MONTH_AVZ
                  |L1.2216|
                          DCD      DATE_AVZ
                  |L1.2220|
                          DCD      HOUR_AVZ
                  |L1.2224|
                          DCD      MIN_AVZ
                  |L1.2228|
                          DCD      SEC_AVZ
                  |L1.2232|
                          DCD      AVZ_TIME
                  |L1.2236|
                          DCD      speedChrgBlckStat
                  |L1.2240|
                          DCD      TBAT
                  |L1.2244|
                          DCD      Ib_ips_termokompensat
                  |L1.2248|
                          DCD      bat
                  |L1.2252|
                          DCD      IKB
                  |L1.2256|
                          DCD      BAT_IS_ON
                  |L1.2260|
                          DCD      ips_bat_av_vzvod
                  |L1.2264|
                          DCD      bat_ips
                  |L1.2268|
                          DCD      net_av
                  |L1.2272|
                          DCD      KB_ALGORITM
                  |L1.2276|
0008e4  f9ba0000          LDRSH    r0,[r10,#0]           ;631  ; Ib_ips_termokompensat
0008e8  f7fffffe          BL       abs
0008ec  f1a70a6c          SUB      r10,r7,#0x6c          ;631
0008f0  f8aa004a          STRH     r0,[r10,#0x4a]        ;631
0008f4  f88a500d          STRB     r5,[r10,#0xd]         ;633
0008f8  f9b80000          LDRSH    r0,[r8,#0]            ;635  ; ibat
0008fc  f9b71000          LDRSH    r1,[r7,#0]            ;635  ; ibat_
000900  4408              ADD      r0,r0,r1              ;635
000902  f9b91000          LDRSH    r1,[r9,#0]            ;635  ; IKB
000906  4288              CMP      r0,r1                 ;635
000908  da02              BGE      |L1.2320|
00090a  7820              LDRB     r0,[r4,#0]            ;635  ; kb_start
00090c  2801              CMP      r0,#1                 ;635
00090e  d032              BEQ      |L1.2422|
                  |L1.2320|
000910  f9b60002          LDRSH    r0,[r6,#2]            ;639  ; bat
000914  28c8              CMP      r0,#0xc8              ;639
000916  dd04              BLE      |L1.2338|
000918  7025              STRB     r5,[r4,#0]            ;641
00091a  2100              MOVS     r1,#0                 ;642
00091c  4608              MOV      r0,r1                 ;642
00091e  f7fffffe          BL       avar_bat_hndl
                  |L1.2338|
000922  f9b80002          LDRSH    r0,[r8,#2]            ;645  ; ibat
000926  f9b71002          LDRSH    r1,[r7,#2]            ;645  ; ibat_
00092a  4408              ADD      r0,r0,r1              ;645
00092c  f9b91000          LDRSH    r1,[r9,#0]            ;645  ; IKB
000930  4288              CMP      r0,r1                 ;645
000932  da02              BGE      |L1.2362|
000934  7860              LDRB     r0,[r4,#1]            ;645  ; kb_start
000936  2801              CMP      r0,#1                 ;645
000938  d020              BEQ      |L1.2428|
                  |L1.2362|
00093a  f9b6004e          LDRSH    r0,[r6,#0x4e]         ;649  ; bat
00093e  28c8              CMP      r0,#0xc8              ;649
000940  dd04              BLE      |L1.2380|
000942  7065              STRB     r5,[r4,#1]            ;651
000944  2100              MOVS     r1,#0                 ;652
000946  2001              MOVS     r0,#1                 ;652
000948  f7fffffe          BL       avar_bat_hndl
                  |L1.2380|
00094c  f9ba0048          LDRSH    r0,[r10,#0x48]        ;655  ; ibat_ips
000950  f9ba104a          LDRSH    r1,[r10,#0x4a]        ;655  ; ibat_ips_
000954  4408              ADD      r0,r0,r1              ;655
000956  f9b91000          LDRSH    r1,[r9,#0]            ;655  ; IKB
00095a  4288              CMP      r0,r1                 ;655
00095c  f6bfaf56          BGE      |L1.2060|
000960  f89a000e          LDRB     r0,[r10,#0xe]         ;655  ; kb_start_ips
000964  2801              CMP      r0,#1                 ;655
000966  d186              BNE      |L1.2166|
000968  48f9              LDR      r0,|L1.3408|
00096a  8800              LDRH     r0,[r0,#0]            ;657  ; KB_ALGORITM
00096c  2802              CMP      r0,#2                 ;657
00096e  d008              BEQ      |L1.2434|
000970  f88ab00d          STRB     r11,[r10,#0xd]        ;664
                  |L1.2420|
000974  e73d              B        |L1.2034|
                  |L1.2422|
000976  f88ab00d          STRB     r11,[r10,#0xd]        ;637
00097a  e7d2              B        |L1.2338|
                  |L1.2428|
00097c  f88ab00d          STRB     r11,[r10,#0xd]        ;647
000980  e7e4              B        |L1.2380|
                  |L1.2434|
000982  2001              MOVS     r0,#1                 ;659
000984  f7fffffe          BL       avar_bat_ips_hndl
000988  f88a500e          STRB     r5,[r10,#0xe]         ;660
00098c  e731              B        |L1.2034|
                  |L1.2446|
00098e  7b48              LDRB     r0,[r1,#0xd]          ;671  ; kb_full_ver
000990  4688              MOV      r8,r1                 ;671
000992  2800              CMP      r0,#0                 ;671
000994  d0ee              BEQ      |L1.2420|
000996  230f              MOVS     r3,#0xf               ;674
000998  2200              MOVS     r2,#0                 ;674
00099a  216e              MOVS     r1,#0x6e              ;674
00099c  20e1              MOVS     r0,#0xe1              ;674
00099e  f7fffffe          BL       mess_send
0009a2  f9b60008          LDRSH    r0,[r6,#8]            ;676  ; bat
0009a6  f7fffffe          BL       abs
0009aa  f9b91000          LDRSH    r1,[r9,#0]            ;676  ; IKB
0009ae  4288              CMP      r0,r1                 ;676
0009b0  dd07              BLE      |L1.2498|
0009b2  7820              LDRB     r0,[r4,#0]            ;678  ; kb_start
0009b4  2801              CMP      r0,#1                 ;678
0009b6  d104              BNE      |L1.2498|
0009b8  7025              STRB     r5,[r4,#0]            ;680
0009ba  2100              MOVS     r1,#0                 ;681
0009bc  4608              MOV      r0,r1                 ;681
0009be  f7fffffe          BL       avar_bat_hndl
                  |L1.2498|
0009c2  f9b60054          LDRSH    r0,[r6,#0x54]         ;685  ; bat
0009c6  f7fffffe          BL       abs
0009ca  f9b91000          LDRSH    r1,[r9,#0]            ;685  ; IKB
0009ce  4288              CMP      r0,r1                 ;685
0009d0  dd06              BLE      |L1.2528|
0009d2  7860              LDRB     r0,[r4,#1]            ;687  ; kb_start
0009d4  2801              CMP      r0,#1                 ;687
0009d6  d103              BNE      |L1.2528|
0009d8  7065              STRB     r5,[r4,#1]            ;689
0009da  2100              MOVS     r1,#0                 ;690
0009dc  f7fffffe          BL       avar_bat_hndl
                  |L1.2528|
0009e0  f9ba0000          LDRSH    r0,[r10,#0]           ;694  ; Ib_ips_termokompensat
0009e4  f7fffffe          BL       abs
0009e8  f9b91000          LDRSH    r1,[r9,#0]            ;694  ; IKB
0009ec  4288              CMP      r0,r1                 ;694
0009ee  dd08              BLE      |L1.2562|
0009f0  f898000e          LDRB     r0,[r8,#0xe]          ;696  ; kb_start_ips
0009f4  2801              CMP      r0,#1                 ;696
0009f6  d104              BNE      |L1.2562|
0009f8  f888500e          STRB     r5,[r8,#0xe]          ;698
0009fc  2000              MOVS     r0,#0                 ;699
0009fe  f7fffffe          BL       avar_bat_ips_hndl
                  |L1.2562|
000a02  7820              LDRB     r0,[r4,#0]            ;704  ; kb_start
000a04  b930              CBNZ     r0,|L1.2580|
000a06  7860              LDRB     r0,[r4,#1]            ;704  ; kb_start
000a08  b920              CBNZ     r0,|L1.2580|
000a0a  f898000e          LDRB     r0,[r8,#0xe]          ;704  ; kb_start_ips
000a0e  b908              CBNZ     r0,|L1.2580|
000a10  f888500d          STRB     r5,[r8,#0xd]          ;706
                  |L1.2580|
000a14  20e6              MOVS     r0,#0xe6              ;709
000a16  f7fffffe          BL       mess_find
000a1a  b118              CBZ      r0,|L1.2596|
000a1c  48cd              LDR      r0,|L1.3412|
000a1e  6800              LDR      r0,[r0,#0]            ;709  ; mess_data
000a20  28e7              CMP      r0,#0xe7              ;709
000a22  d00a              BEQ      |L1.2618|
                  |L1.2596|
000a24  48cc              LDR      r0,|L1.3416|
000a26  49cd              LDR      r1,|L1.3420|
000a28  f9b00000          LDRSH    r0,[r0,#0]            ;709  ; USIGN
000a2c  f9b11000          LDRSH    r1,[r1,#0]            ;709  ; load_U
000a30  eb000080          ADD      r0,r0,r0,LSL #2       ;709
000a34  ebb10f40          CMP      r1,r0,LSL #1          ;709
                  |L1.2616|
000a38  da9c              BGE      |L1.2420|
                  |L1.2618|
000a3a  f888500d          STRB     r5,[r8,#0xd]          ;711
000a3e  7820              LDRB     r0,[r4,#0]            ;712  ; kb_start
000a40  4dc7              LDR      r5,|L1.3424|
000a42  2801              CMP      r0,#1                 ;712
000a44  d10f              BNE      |L1.2662|
000a46  f9b90000          LDRSH    r0,[r9,#0]            ;712  ; IKB
000a4a  f9b51000          LDRSH    r1,[r5,#0]            ;712  ; load_I
000a4e  0040              LSLS     r0,r0,#1              ;712
000a50  fb90f0f7          SDIV     r0,r0,r7              ;712
000a54  4288              CMP      r0,r1                 ;712
000a56  da06              BGE      |L1.2662|
000a58  f896003d          LDRB     r0,[r6,#0x3d]         ;712  ; bat
000a5c  07c0              LSLS     r0,r0,#31             ;712
000a5e  d102              BNE      |L1.2662|
000a60  2101              MOVS     r1,#1                 ;712
000a62  f7fffffe          BL       avar_bat_hndl
                  |L1.2662|
000a66  7860              LDRB     r0,[r4,#1]            ;713  ; kb_start
000a68  2801              CMP      r0,#1                 ;713
000a6a  d110              BNE      |L1.2702|
000a6c  f9b90000          LDRSH    r0,[r9,#0]            ;713  ; IKB
000a70  f9b51000          LDRSH    r1,[r5,#0]            ;713  ; load_I
000a74  0040              LSLS     r0,r0,#1              ;713
000a76  fb90f0f7          SDIV     r0,r0,r7              ;713
000a7a  4288              CMP      r0,r1                 ;713
000a7c  da07              BGE      |L1.2702|
000a7e  f8960089          LDRB     r0,[r6,#0x89]         ;713  ; bat
000a82  07c0              LSLS     r0,r0,#31             ;713
000a84  d103              BNE      |L1.2702|
000a86  2101              MOVS     r1,#1                 ;713
000a88  4608              MOV      r0,r1                 ;713
000a8a  f7fffffe          BL       avar_bat_hndl
                  |L1.2702|
000a8e  f898000e          LDRB     r0,[r8,#0xe]          ;715  ; kb_start_ips
000a92  2801              CMP      r0,#1                 ;715
                  |L1.2708|
000a94  f47faeba          BNE      |L1.2060|
000a98  f9b90000          LDRSH    r0,[r9,#0]            ;715  ; IKB
000a9c  f9b51000          LDRSH    r1,[r5,#0]            ;715  ; load_I
000aa0  0040              LSLS     r0,r0,#1              ;715
000aa2  fb90f0f7          SDIV     r0,r0,r7              ;715
000aa6  4288              CMP      r0,r1                 ;715
000aa8  dac6              BGE      |L1.2616|
000aaa  48ae              LDR      r0,|L1.3428|
000aac  f890003d          LDRB     r0,[r0,#0x3d]         ;715  ; bat_ips
000ab0  07c0              LSLS     r0,r0,#31             ;715
000ab2  d1ef              BNE      |L1.2708|
000ab4  e8bd5ff0          POP      {r4-r12,lr}           ;715
000ab8  2001              MOVS     r0,#1                 ;715
000aba  f7ffbffe          B.W      avar_bat_ips_hndl
;;;721    
                          ENDP

                  samokalibr_hndl PROC
;;;730    //-----------------------------------------------
;;;731    void samokalibr_hndl(void)
000abe  e92d47f0          PUSH     {r4-r10,lr}
;;;732    {
;;;733    if(++samokalibr_cnt>=1800)samokalibr_cnt=0;
000ac2  4ca9              LDR      r4,|L1.3432|
000ac4  8fe0              LDRH     r0,[r4,#0x3e]  ; samokalibr_cnt
000ac6  1c40              ADDS     r0,r0,#1
000ac8  b200              SXTH     r0,r0
000aca  87e0              STRH     r0,[r4,#0x3e]
000acc  f5b06fe1          CMP      r0,#0x708
000ad0  db02              BLT      |L1.2776|
000ad2  f04f0000          MOV      r0,#0
000ad6  87e0              STRH     r0,[r4,#0x3e]
                  |L1.2776|
;;;734    
;;;735    if(samokalibr_cnt>=1785U)
000ad8  f9b4003e          LDRSH    r0,[r4,#0x3e]  ; samokalibr_cnt
000adc  f5b06fdf          CMP      r0,#0x6f8
000ae0  d911              BLS      |L1.2822|
;;;736    	{
;;;737    	mess_send(MESS2RELE_HNDL,PARAM_RELE_SAMOKALIBR,1,15);
000ae2  230f              MOVS     r3,#0xf
000ae4  2201              MOVS     r2,#1
000ae6  2164              MOVS     r1,#0x64
000ae8  20d2              MOVS     r0,#0xd2
000aea  f7fffffe          BL       mess_send
;;;738    	mess_send(MESS2IND_HNDL,PARAM_SAMOKALIBR,0,15);
000aee  230f              MOVS     r3,#0xf
000af0  2200              MOVS     r2,#0
000af2  21d8              MOVS     r1,#0xd8
000af4  20d7              MOVS     r0,#0xd7
000af6  f7fffffe          BL       mess_send
;;;739    	mess_send(MESS2MATEMAT,PARAM_SAMOKALIBR,0,15);
000afa  230f              MOVS     r3,#0xf
000afc  2200              MOVS     r2,#0
000afe  21d8              MOVS     r1,#0xd8
000b00  20dc              MOVS     r0,#0xdc
000b02  f7fffffe          BL       mess_send
                  |L1.2822|
;;;740    	} 
;;;741    
;;;742    if(samokalibr_cnt==1799U)
000b06  f9b4003e          LDRSH    r0,[r4,#0x3e]  ; samokalibr_cnt
000b0a  f5a061e0          SUB      r1,r0,#0x700
000b0e  3907              SUBS     r1,#7
000b10  d133              BNE      |L1.2938|
;;;743    	{
;;;744    	if((Kibat0[0]!=ad7705_buff_[0])&&(abs(bat[0]._Ib/10)<IZMAX)) lc640_write_int(ADR_KI0BAT[0],ad7705_buff_[0]);
000b12  4d96              LDR      r5,|L1.3436|
000b14  4c96              LDR      r4,|L1.3440|
000b16  4e97              LDR      r6,|L1.3444|
000b18  8828              LDRH     r0,[r5,#0]  ; Kibat0
000b1a  8821              LDRH     r1,[r4,#0]  ; ad7705_buff_
000b1c  270a              MOVS     r7,#0xa
000b1e  f8df8258          LDR      r8,|L1.3448|
000b22  f8df9258          LDR      r9,|L1.3452|
000b26  4288              CMP      r0,r1
000b28  d010              BEQ      |L1.2892|
000b2a  f9b60008          LDRSH    r0,[r6,#8]  ; bat
000b2e  fb90f0f7          SDIV     r0,r0,r7
000b32  b200              SXTH     r0,r0
000b34  f7fffffe          BL       abs
000b38  f9b81000          LDRSH    r1,[r8,#0]  ; IZMAX
000b3c  4288              CMP      r0,r1
000b3e  da05              BGE      |L1.2892|
000b40  f9b41000          LDRSH    r1,[r4,#0]  ; ad7705_buff_
000b44  f9b90000          LDRSH    r0,[r9,#0]  ; ADR_KI0BAT
000b48  f7fffffe          BL       lc640_write_int
                  |L1.2892|
;;;745    	if((Kibat0[1]!=ad7705_buff_[1])&&(abs(bat[0]._Ib/10)<IZMAX)) lc640_write_int(ADR_KI0BAT[1],ad7705_buff_[1]);
000b4c  8868              LDRH     r0,[r5,#2]  ; Kibat0
000b4e  8861              LDRH     r1,[r4,#2]  ; ad7705_buff_
000b50  4288              CMP      r0,r1
000b52  d012              BEQ      |L1.2938|
000b54  f9b60008          LDRSH    r0,[r6,#8]  ; bat
000b58  fb90f0f7          SDIV     r0,r0,r7
000b5c  b200              SXTH     r0,r0
000b5e  f7fffffe          BL       abs
000b62  f9b81000          LDRSH    r1,[r8,#0]  ; IZMAX
000b66  4288              CMP      r0,r1
000b68  da07              BGE      |L1.2938|
000b6a  f9b41002          LDRSH    r1,[r4,#2]  ; ad7705_buff_
000b6e  f9b90002          LDRSH    r0,[r9,#2]  ; ADR_KI0BAT
000b72  e8bd47f0          POP      {r4-r10,lr}
000b76  f7ffbffe          B.W      lc640_write_int
                  |L1.2938|
;;;746    	
;;;747    	}	 	
;;;748    }
000b7a  e8bd87f0          POP      {r4-r10,pc}
;;;749    
                          ENDP

                  ubat_old_drv PROC
;;;752    //-----------------------------------------------
;;;753    void ubat_old_drv(void)
000b7e  b510              PUSH     {r4,lr}
;;;754    {        
;;;755    bat_u_old_cnt++;
000b80  4c7f              LDR      r4,|L1.3456|
000b82  8820              LDRH     r0,[r4,#0]  ; bat_u_old_cnt
000b84  f1000001          ADD      r0,r0,#1
000b88  8020              STRH     r0,[r4,#0]
;;;756    gran_ring(&bat_u_old_cnt,0,8);
000b8a  f04f0208          MOV      r2,#8
000b8e  f04f0100          MOV      r1,#0
000b92  4620              MOV      r0,r4
000b94  f7fffffe          BL       gran_ring
;;;757    
;;;758    bat[0]._u_old[bat_u_old_cnt]=bat[0]._Ub;
000b98  4976              LDR      r1,|L1.3444|
000b9a  f9b40000          LDRSH    r0,[r4,#0]  ; bat_u_old_cnt
000b9e  eb010040          ADD      r0,r1,r0,LSL #1
000ba2  884a              LDRH     r2,[r1,#2]  ; bat
000ba4  8402              STRH     r2,[r0,#0x20]
;;;759    bat[1]._u_old[bat_u_old_cnt]=bat[1]._Ub;
000ba6  f8b1104e          LDRH     r1,[r1,#0x4e]  ; bat
000baa  f8a0106c          STRH     r1,[r0,#0x6c]
;;;760    }
000bae  bd10              POP      {r4,pc}
;;;761    
                          ENDP

                  unet_drv PROC
;;;762    //-----------------------------------------------
;;;763    void unet_drv(void)
000bb0  b570              PUSH     {r4-r6,lr}
;;;764    {
;;;765    if(net_U<UMN)
000bb2  4d74              LDR      r5,|L1.3460|
000bb4  4874              LDR      r0,|L1.3464|
;;;766    	{
;;;767    	if((unet_drv_cnt<10)&&(main_1Hz_cnt>15))
000bb6  4a75              LDR      r2,|L1.3468|
000bb8  f9b51000          LDRSH    r1,[r5,#0]            ;765  ; net_U
000bbc  f9b03000          LDRSH    r3,[r0,#0]            ;765  ; UMN
000bc0  f9920000          LDRSB    r0,[r2,#0]
000bc4  4299              CMP      r1,r3                 ;765
000bc6  da1f              BGE      |L1.3080|
;;;768    		{
;;;769    		unet_drv_cnt++;
;;;770    		if(unet_drv_cnt>=10)
;;;771    			{
;;;772    			net_Ustore=net_U;
000bc8  4c71              LDR      r4,|L1.3472|
000bca  280a              CMP      r0,#0xa               ;767
000bcc  da0f              BGE      |L1.3054|
000bce  4b71              LDR      r3,|L1.3476|
000bd0  f9b33000          LDRSH    r3,[r3,#0]            ;767  ; main_1Hz_cnt
000bd4  2b0f              CMP      r3,#0xf               ;767
000bd6  dd0a              BLE      |L1.3054|
000bd8  f1000001          ADD      r0,r0,#1              ;769
000bdc  b240              SXTB     r0,r0                 ;769
000bde  7010              STRB     r0,[r2,#0]            ;769
000be0  280a              CMP      r0,#0xa               ;770
000be2  db09              BLT      |L1.3064|
000be4  8021              STRH     r1,[r4,#0]
;;;773    		 	avar_unet_hndl(1);
000be6  2001              MOVS     r0,#1
000be8  f7fffffe          BL       avar_unet_hndl
000bec  e004              B        |L1.3064|
                  |L1.3054|
;;;774    			
;;;775    			}
;;;776    		}
;;;777    	else if(unet_drv_cnt>=10)unet_drv_cnt=10;
000bee  280a              CMP      r0,#0xa
000bf0  db02              BLT      |L1.3064|
000bf2  f04f000a          MOV      r0,#0xa
000bf6  7010              STRB     r0,[r2,#0]
                  |L1.3064|
;;;778    
;;;779    	if(net_U<net_Ustore) net_Ustore=net_U;	
000bf8  f9b50000          LDRSH    r0,[r5,#0]  ; net_U
000bfc  f9b41000          LDRSH    r1,[r4,#0]  ; net_Ustore
000c00  4288              CMP      r0,r1
000c02  da00              BGE      |L1.3078|
000c04  8020              STRH     r0,[r4,#0]
                  |L1.3078|
;;;780    	}
;;;781    
;;;782    else if(net_U>UMN)
;;;783    	{                 
;;;784    	if(unet_drv_cnt)
;;;785    		{
;;;786    		unet_drv_cnt--;
;;;787    		if(unet_drv_cnt<=0)
;;;788    			{
;;;789    			avar_unet_hndl(0);
;;;790    			}
;;;791    		}
;;;792    	else if(unet_drv_cnt<0)unet_drv_cnt=0;
;;;793    	
;;;794    	}
;;;795    
;;;796    }
000c06  bd70              POP      {r4-r6,pc}
                  |L1.3080|
000c08  ddfd              BLE      |L1.3078|
000c0a  2800              CMP      r0,#0                 ;784
000c0c  d0fb              BEQ      |L1.3078|
000c0e  f1a00001          SUB      r0,r0,#1              ;786
000c12  b240              SXTB     r0,r0                 ;786
000c14  7010              STRB     r0,[r2,#0]            ;786
000c16  2800              CMP      r0,#0                 ;787
000c18  dcf5              BGT      |L1.3078|
000c1a  e8bd4070          POP      {r4-r6,lr}            ;789
000c1e  2000              MOVS     r0,#0                 ;789
000c20  f7ffbffe          B.W      avar_unet_hndl
;;;797    
                          ENDP

                  matemat PROC
;;;798    //-----------------------------------------------
;;;799    void matemat(void)
000c24  e92d4ffe          PUSH     {r1-r11,lr}
;;;800    {
;;;801    //signed short temp_SS;
;;;802    signed long temp_SL/*,temp_SL_*/;
;;;803    char /*temp,*/i;
;;;804    //signed short temp_SS;
;;;805    
;;;806    #ifdef UKU_MGTS
;;;807    // 
;;;808    temp_SL=(signed long)net_buff_;
;;;809    temp_SL*=Kunet;
;;;810    temp_SL/=110000L;
;;;811    net_U=(signed short)temp_SL;
;;;812    #endif
;;;813    
;;;814    #ifdef UKU_RSTKM
;;;815    // 
;;;816    temp_SL=(signed long)net_buff_;
;;;817    temp_SL*=Kunet;
;;;818    temp_SL/=110000L;
;;;819    net_U=(signed short)temp_SL;
;;;820    #endif
;;;821    
;;;822    #ifdef UKU_3U
;;;823    // 
;;;824    temp_SL=(signed long)net_buff_;
;;;825    temp_SL*=Kunet;
;;;826    temp_SL/=36000L;
;;;827    net_U=(signed short)temp_SL;
;;;828    #endif
;;;829    
;;;830    #ifdef UKU_6U
;;;831    // 
;;;832    
;;;833    if((AUSW_MAIN%10)||(AUSW_MAIN==2400)||(AUSW_MAIN==4800)||(AUSW_MAIN==6000))
;;;834    	{
;;;835    
;;;836    	if(bps[11]._device==dNET_METR)
;;;837    		{
;;;838    		net_metr_buff_[0]=((signed short)bps[11]._buff[0])+(((signed short)bps[11]._buff[1])<<8);
;;;839    		net_metr_buff_[1]=((signed short)bps[11]._buff[2])+(((signed short)bps[11]._buff[3])<<8);
;;;840    		net_metr_buff_[2]=((signed short)bps[11]._buff[4])+(((signed short)bps[11]._buff[5])<<8);
;;;841    
;;;842    		temp_SL=(signed long)net_metr_buff_[0];
;;;843    		temp_SL*=KunetA;
;;;844    		temp_SL/=6000L;
;;;845    		net_Ua=(signed short)temp_SL;
;;;846    	
;;;847    		temp_SL=(signed long)net_metr_buff_[1];
;;;848    		temp_SL*=KunetB;
;;;849    		temp_SL/=6000L;
;;;850    		net_Ub=(signed short)temp_SL;
;;;851    	
;;;852    		temp_SL=(signed long)net_metr_buff_[2];
;;;853    		temp_SL*=KunetC;
;;;854    		temp_SL/=6000L;
;;;855    		net_Uc=(signed short)temp_SL;
;;;856    		}
;;;857    	else
;;;858    		{
;;;859    		temp_SL=(signed long)net_buff_;
;;;860    		temp_SL*=KunetA;
;;;861    		temp_SL/=110000L;
;;;862    		net_Ua=(signed short)temp_SL;
;;;863    	
;;;864    		temp_SL=(signed long)adc_buff_[3];
;;;865    		temp_SL*=KunetB;
;;;866    		temp_SL/=6000L;
;;;867    		net_Ub=(signed short)temp_SL;
;;;868    	
;;;869    		temp_SL=(signed long)adc_buff_[10];
;;;870    		temp_SL*=KunetC;
;;;871    		temp_SL/=6000L;
;;;872    		net_Uc=(signed short)temp_SL;
;;;873    		}
;;;874    
;;;875    	net_U=net_Ua;
;;;876    	if(net_Ub<net_U)net_U=net_Ub;
;;;877    	if(net_Uc<net_U)net_U=net_Uc;
;;;878    	}
;;;879    else 
;;;880    	{
;;;881    	temp_SL=(signed long)net_buff_;
;;;882    	temp_SL*=Kunet;
;;;883    	temp_SL/=110000L;
;;;884    	net_U=(signed short)temp_SL;
;;;885    	}
;;;886    
;;;887    
;;;888    
;;;889    
;;;890    #endif
;;;891    
;;;892    #ifdef UKU_GLONASS
;;;893    // 
;;;894    temp_SL=(signed long)net_buff_;
;;;895    temp_SL*=Kunet;
;;;896    temp_SL/=110000L;
;;;897    net_U=(signed short)temp_SL;
;;;898    #endif
;;;899    
;;;900    #ifdef UKU_KONTUR
;;;901    // 
;;;902    temp_SL=(signed long)net_buff_;
;;;903    temp_SL*=Kunet;
;;;904    temp_SL/=110000L;
;;;905    net_U=(signed short)temp_SL;
;;;906    #endif
;;;907    
;;;908    
;;;909    #ifdef UKU_220_V2
;;;910    // 
;;;911    
;;;912    if(AUSW_MAIN==22033)
;;;913    	{
;;;914    	temp_SL=(signed long)net_buff_;
;;;915    	temp_SL*=KunetA;
;;;916    	temp_SL/=6000L;
;;;917    	net_Ua=(signed short)temp_SL;
;;;918    
;;;919    	temp_SL=(signed long)adc_buff_[3];
;;;920    	temp_SL*=KunetB;
;;;921    	temp_SL/=6000L;
;;;922    	net_Ub=(signed short)temp_SL;
;;;923    
;;;924    	temp_SL=(signed long)adc_buff_[10];
;;;925    	temp_SL*=KunetC;
;;;926    	temp_SL/=6000L;
;;;927    	net_Uc=(signed short)temp_SL;
;;;928    
;;;929    	net_U=net_Ua;
;;;930    	if(net_Ub<net_U)net_U=net_Ub;
;;;931    	if(net_Uc<net_U)net_U=net_Uc;
;;;932    	}
;;;933    else
;;;934    	{
;;;935    	temp_SL=(signed long)net_buff_;
;;;936    	temp_SL*=Kunet;
;;;937    	temp_SL/=5000L;
;;;938    	net_U=(signed short)temp_SL;
;;;939    	}
;;;940    #endif
;;;941    
;;;942    
;;;943    #ifdef UKU_220
;;;944    // 
;;;945    
;;;946    if(AUSW_MAIN==22035)
;;;947    	{
;;;948    	temp_SL=(signed long)net_buff_;
;;;949    	temp_SL*=KunetA;
;;;950    	temp_SL/=6000L;
;;;951    	net_Ua=(signed short)temp_SL;
;;;952    
;;;953    	temp_SL=(signed long)adc_buff_[3];
;;;954    	temp_SL*=KunetB;
;;;955    	temp_SL/=6000L;
;;;956    	net_Ub=(signed short)temp_SL;
;;;957    
;;;958    	temp_SL=(signed long)adc_buff_[10];
;;;959    	temp_SL*=KunetC;
;;;960    	temp_SL/=6000L;
;;;961    	net_Uc=(signed short)temp_SL;
;;;962    
;;;963    	net_U=net_Ua;
;;;964    	if(net_Ub<net_U)net_U=net_Ub;
;;;965    	if(net_Uc<net_U)net_U=net_Uc;
;;;966    	}
;;;967    else
;;;968    	{
;;;969    	temp_SL=(signed long)net_buff_;
;;;970    	temp_SL*=Kunet;
;;;971    	#ifdef _ACDC_
;;;972    	temp_SL/=500L;
;;;973    	#else
;;;974    	temp_SL/=5000L;
;;;975    	#endif
;;;976    	net_U=(signed short)temp_SL;
;;;977    	
;;;978    	}
;;;979    #endif
;;;980    
;;;981    #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;982    // 
;;;983    
;;;984    
;;;985    	if(bps[11]._device==dNET_METR)
000c28  485b              LDR      r0,|L1.3480|
;;;986    		{
;;;987    		net_metr_buff_[0]=((signed short)bps[11]._buff[0])+(((signed short)bps[11]._buff[1])<<8);
;;;988    		net_metr_buff_[1]=((signed short)bps[11]._buff[2])+(((signed short)bps[11]._buff[3])<<8);
;;;989    		net_metr_buff_[2]=((signed short)bps[11]._buff[4])+(((signed short)bps[11]._buff[5])<<8);
;;;990    
;;;991    		temp_SL=(signed long)net_metr_buff_[2];
;;;992    		temp_SL*=KunetA;
;;;993    		temp_SL/=6000L;
;;;994    		net_Ua=(signed short)temp_SL;
;;;995    	
;;;996    		temp_SL=(signed long)net_metr_buff_[1];
;;;997    		temp_SL*=KunetB;
000c2a  495e              LDR      r1,|L1.3492|
000c2c  4a5b              LDR      r2,|L1.3484|
000c2e  f89003f4          LDRB     r0,[r0,#0x3f4]        ;985  ; bps
;;;998    		temp_SL/=6000L;
;;;999    		net_Ub=(signed short)temp_SL;
;;;1000   	
;;;1001   		temp_SL=(signed long)net_metr_buff_[0];
;;;1002   		temp_SL*=KunetC;
000c32  4b5d              LDR      r3,|L1.3496|
000c34  9002              STR      r0,[sp,#8]            ;992
000c36  f9b1b000          LDRSH    r11,[r1,#0]           ;997
000c3a  f8dfc164          LDR      r12,|L1.3488|
000c3e  f9b2a000          LDRSH    r10,[r2,#0]           ;992
000c42  f9b31000          LDRSH    r1,[r3,#0]
000c46  4d59              LDR      r5,|L1.3500|
;;;1003   		temp_SL/=6000L;
;;;1004   		net_Uc=(signed short)temp_SL;
000c48  4c59              LDR      r4,|L1.3504|
;;;1005   
;;;1006   		net_F3=((signed short)bps[11]._buff[6])+(((signed short)bps[11]._buff[7])<<8);
;;;1007   
;;;1008   		net_U=net_Ua;
;;;1009   		if(net_Ub<net_U)net_U=net_Ub;
;;;1010   		if(net_Uc<net_U)net_U=net_Uc;
;;;1011   		}
;;;1012   	  else if(AUSW_MAIN==22033)
;;;1013   	{
;;;1014   	temp_SL=(signed long)net_buff_;
000c4a  4f47              LDR      r7,|L1.3432|
000c4c  f2456611          MOV      r6,#0x5611            ;1012
;;;1015   	temp_SL*=KunetA;
;;;1016   	temp_SL/=4000L;
;;;1017   	net_Ua=(signed short)temp_SL;
;;;1018   
;;;1019   	temp_SL=(signed long)adc_buff_[3];
;;;1020   	temp_SL*=KunetB;
;;;1021   	temp_SL/=6000L;
;;;1022   	net_Ub=(signed short)temp_SL;
;;;1023   
;;;1024   	temp_SL=(signed long)adc_buff_[10];
;;;1025   	temp_SL*=KunetC;
;;;1026   	temp_SL/=6000L;
;;;1027   	net_Uc=(signed short)temp_SL;
;;;1028   
;;;1029   	net_U=net_Ua;
;;;1030   	if(net_Ub<net_U)net_U=net_Ub;
;;;1031   	if(net_Uc<net_U)net_U=net_Uc;
;;;1032   	}
;;;1033   else if((AUSW_MAIN==22063)||(AUSW_MAIN==22023)||(AUSW_MAIN==22043)||(AUSW_MAIN==22018))
;;;1034   	{
;;;1035   	temp_SL=(signed long)net_buff_;
;;;1036   	temp_SL*=KunetA;
;;;1037   	temp_SL/=40000L;
;;;1038   	net_Ua=(signed short)temp_SL;
;;;1039   
;;;1040   	temp_SL=(signed long)adc_buff_[3];
;;;1041   	temp_SL*=KunetB;
;;;1042   	temp_SL/=6000L;
;;;1043   	net_Ub=(signed short)temp_SL;
;;;1044   
;;;1045   	temp_SL=(signed long)adc_buff_[10];
;;;1046   	temp_SL*=KunetC;
;;;1047   	temp_SL/=6000L;
;;;1048   	net_Uc=(signed short)temp_SL;
;;;1049   
;;;1050   	net_U=net_Ua;
;;;1051   	if(net_Ub<net_U)net_U=net_Ub;
;;;1052   	if(net_Uc<net_U)net_U=net_Uc;
;;;1053   	}
;;;1054   else	if((AUSW_MAIN==22010)||(AUSW_MAIN==22011) )
;;;1055   	{
;;;1056   	temp_SL=(signed long)net_buff_;
;;;1057   	temp_SL*=Kunet;
;;;1058   	temp_SL/=35000L;
;;;1059   	net_U=(signed short)temp_SL;
;;;1060   	
;;;1061   	}
;;;1062   else
;;;1063   	{
;;;1064   	temp_SL=(signed long)net_buff_;
;;;1065   	temp_SL*=Kunet;
;;;1066   	#ifdef _ACDC_
;;;1067   	temp_SL/=500L;
000c50  f44f78fa          MOV      r8,#0x1f4
000c54  9101              STR      r1,[sp,#4]            ;985
000c56  2807              CMP      r0,#7                 ;985
000c58  d036              BEQ      |L1.3272|
000c5a  4639              MOV      r1,r7                 ;1014
000c5c  4b56              LDR      r3,|L1.3512|
000c5e  8d0a              LDRH     r2,[r1,#0x28]         ;1014
000c60  494e              LDR      r1,|L1.3484|
000c62  f8df9140          LDR      r9,|L1.3492|
000c66  f2417a70          MOV      r10,#0x1770           ;993
000c6a  f9b11000          LDRSH    r1,[r1,#0]            ;992
000c6e  f9b99000          LDRSH    r9,[r9,#0]            ;997
000c72  434a              MULS     r2,r1,r2              ;1015
000c74  f9b31006          LDRSH    r1,[r3,#6]            ;1019
000c78  f9b33014          LDRSH    r3,[r3,#0x14]         ;1024
000c7c  fb01f109          MUL      r1,r1,r9              ;1020
000c80  f8df9124          LDR      r9,|L1.3496|
000c84  fb91f1fa          SDIV     r1,r1,r10             ;1021
000c88  f9b99000          LDRSH    r9,[r9,#0]            ;1002
000c8c  4849              LDR      r0,|L1.3508|
000c8e  fb03f309          MUL      r3,r3,r9              ;1025
000c92  fb93f3fa          SDIV     r3,r3,r10             ;1026
000c96  8800              LDRH     r0,[r0,#0]            ;1012  ; AUSW_MAIN
000c98  b209              SXTH     r1,r1                 ;1022
000c9a  b21b              SXTH     r3,r3                 ;1027
000c9c  42b0              CMP      r0,r6                 ;1012
000c9e  d155              BNE      |L1.3404|
000ca0  f44f607a          MOV      r0,#0xfa0             ;1016
000ca4  fb92f0f0          SDIV     r0,r2,r0              ;1016
000ca8  b200              SXTH     r0,r0                 ;1017
000caa  f8ac0000          STRH     r0,[r12,#0]           ;1017
000cae  8029              STRH     r1,[r5,#0]            ;1022
000cb0  8023              STRH     r3,[r4,#0]            ;1027
000cb2  4a34              LDR      r2,|L1.3460|
000cb4  8010              STRH     r0,[r2,#0]            ;1029
000cb6  4281              CMP      r1,r0                 ;1030
000cb8  da00              BGE      |L1.3260|
000cba  8011              STRH     r1,[r2,#0]            ;1030
                  |L1.3260|
000cbc  f9b20000          LDRSH    r0,[r2,#0]            ;1031  ; net_U
000cc0  4283              CMP      r3,r0                 ;1031
000cc2  da00              BGE      |L1.3270|
000cc4  8013              STRH     r3,[r2,#0]            ;1031
                  |L1.3270|
000cc6  e0b6              B        |L1.3638|
                  |L1.3272|
000cc8  483c              LDR      r0,|L1.3516|
000cca  4b27              LDR      r3,|L1.3432|
000ccc  7801              LDRB     r1,[r0,#0]            ;987  ; bps
000cce  7842              LDRB     r2,[r0,#1]            ;987  ; bps
000cd0  f1030390          ADD      r3,r3,#0x90           ;987
000cd4  eb012102          ADD      r1,r1,r2,LSL #8       ;987
000cd8  fa1ff981          UXTH     r9,r1                 ;987
000cdc  f8a39000          STRH     r9,[r3,#0]            ;987
000ce0  7881              LDRB     r1,[r0,#2]            ;988  ; bps
000ce2  78c2              LDRB     r2,[r0,#3]            ;988  ; bps
000ce4  eb012102          ADD      r1,r1,r2,LSL #8       ;988
000ce8  b28a              UXTH     r2,r1                 ;988
000cea  805a              STRH     r2,[r3,#2]            ;988
000cec  7901              LDRB     r1,[r0,#4]            ;989  ; bps
000cee  f890e005          LDRB     lr,[r0,#5]            ;989  ; bps
000cf2  eb01210e          ADD      r1,r1,lr,LSL #8       ;989
000cf6  b289              UXTH     r1,r1                 ;989
000cf8  8099              STRH     r1,[r3,#4]            ;989
000cfa  fb01f10a          MUL      r1,r1,r10             ;992
000cfe  f2417370          MOV      r3,#0x1770            ;993
000d02  fb91f1f3          SDIV     r1,r1,r3              ;993
000d06  fa0ffa81          SXTH     r10,r1                ;994
000d0a  f8aca000          STRH     r10,[r12,#0]          ;994
000d0e  fb02f20b          MUL      r2,r2,r11             ;997
000d12  fb92f1f3          SDIV     r1,r2,r3              ;998
000d16  b209              SXTH     r1,r1                 ;999
000d18  8029              STRH     r1,[r5,#0]            ;999
000d1a  9a01              LDR      r2,[sp,#4]            ;1002
000d1c  fb09f902          MUL      r9,r9,r2              ;1002
000d20  fb99f2f3          SDIV     r2,r9,r3              ;1003
000d24  b212              SXTH     r2,r2                 ;1004
000d26  8022              STRH     r2,[r4,#0]            ;1004
000d28  7983              LDRB     r3,[r0,#6]            ;1006  ; bps
000d2a  79c0              LDRB     r0,[r0,#7]            ;1006  ; bps
000d2c  eb032000          ADD      r0,r3,r0,LSL #8       ;1006
000d30  4b23              LDR      r3,|L1.3520|
000d32  8018              STRH     r0,[r3,#0]            ;1006
000d34  4813              LDR      r0,|L1.3460|
000d36  f8a0a000          STRH     r10,[r0,#0]           ;1008
000d3a  4551              CMP      r1,r10                ;1009
000d3c  da00              BGE      |L1.3392|
000d3e  8001              STRH     r1,[r0,#0]            ;1009
                  |L1.3392|
000d40  f9b01000          LDRSH    r1,[r0,#0]            ;1010  ; net_U
000d44  428a              CMP      r2,r1                 ;1010
000d46  da76              BGE      |L1.3638|
000d48  8002              STRH     r2,[r0,#0]            ;1010
000d4a  e074              B        |L1.3638|
                  |L1.3404|
000d4c  e03a              B        |L1.3524|
000d4e  0000              DCW      0x0000
                  |L1.3408|
                          DCD      KB_ALGORITM
                  |L1.3412|
                          DCD      mess_data
                  |L1.3416|
                          DCD      USIGN
                  |L1.3420|
                          DCD      load_U
                  |L1.3424|
                          DCD      load_I
                  |L1.3428|
                          DCD      bat_ips
                  |L1.3432|
                          DCD      ||area_number.22||
                  |L1.3436|
                          DCD      Kibat0
                  |L1.3440|
                          DCD      ad7705_buff_
                  |L1.3444|
                          DCD      bat
                  |L1.3448|
                          DCD      IZMAX
                  |L1.3452|
                          DCD      ADR_KI0BAT
                  |L1.3456|
                          DCD      bat_u_old_cnt
                  |L1.3460|
                          DCD      net_U
                  |L1.3464|
                          DCD      UMN
                  |L1.3468|
                          DCD      unet_drv_cnt
                  |L1.3472|
                          DCD      net_Ustore
                  |L1.3476|
                          DCD      main_1Hz_cnt
                  |L1.3480|
                          DCD      bps
                  |L1.3484|
                          DCD      KunetA
                  |L1.3488|
                          DCD      net_Ua
                  |L1.3492|
                          DCD      KunetB
                  |L1.3496|
                          DCD      KunetC
                  |L1.3500|
                          DCD      net_Ub
                  |L1.3504|
                          DCD      net_Uc
                  |L1.3508|
                          DCD      AUSW_MAIN
                  |L1.3512|
                          DCD      ||.bss||+0x400
                  |L1.3516|
                          DCD      bps+0x3fa
                  |L1.3520|
                          DCD      net_F3
                  |L1.3524|
000dc4  f5a049ac          SUB      r9,r0,#0x5600         ;1033
000dc8  f1b9092f          SUBS     r9,r9,#0x2f           ;1033
000dcc  d008              BEQ      |L1.3552|
000dce  f1190928          ADDS     r9,r9,#0x28           ;1033
000dd2  d005              BEQ      |L1.3552|
000dd4  f1b90914          SUBS     r9,r9,#0x14           ;1033
000dd8  d002              BEQ      |L1.3552|
000dda  f1190919          ADDS     r9,r9,#0x19           ;1033
000dde  d113              BNE      |L1.3592|
                  |L1.3552|
000de0  f6494040          MOV      r0,#0x9c40            ;1037
000de4  fb92f0f0          SDIV     r0,r2,r0              ;1037
000de8  b200              SXTH     r0,r0                 ;1038
000dea  f8ac0000          STRH     r0,[r12,#0]           ;1038
000dee  8029              STRH     r1,[r5,#0]            ;1043
000df0  8023              STRH     r3,[r4,#0]            ;1048
000df2  4af9              LDR      r2,|L1.4568|
000df4  8010              STRH     r0,[r2,#0]            ;1050
000df6  4281              CMP      r1,r0                 ;1051
000df8  da00              BGE      |L1.3580|
000dfa  8011              STRH     r1,[r2,#0]            ;1051
                  |L1.3580|
000dfc  f9b20000          LDRSH    r0,[r2,#0]            ;1052  ; net_U
000e00  4283              CMP      r3,r0                 ;1052
000e02  da18              BGE      |L1.3638|
000e04  8013              STRH     r3,[r2,#0]            ;1052
000e06  e016              B        |L1.3638|
                  |L1.3592|
000e08  49f4              LDR      r1,|L1.4572|
000e0a  f5a043aa          SUB      r3,r0,#0x5500         ;1054
000e0e  f9b12000          LDRSH    r2,[r1,#0]            ;1057
000e12  49f3              LDR      r1,|L1.4576|
000e14  8d09              LDRH     r1,[r1,#0x28]         ;1014
000e16  4351              MULS     r1,r2,r1              ;1057
000e18  3bfa              SUBS     r3,r3,#0xfa           ;1054
000e1a  d001              BEQ      |L1.3616|
000e1c  1e5a              SUBS     r2,r3,#1              ;1054
000e1e  d106              BNE      |L1.3630|
                  |L1.3616|
000e20  f64800b8          MOV      r0,#0x88b8            ;1058
000e24  fb91f0f0          SDIV     r0,r1,r0              ;1058
000e28  49eb              LDR      r1,|L1.4568|
000e2a  8008              STRH     r0,[r1,#0]            ;1059
000e2c  e003              B        |L1.3638|
                  |L1.3630|
000e2e  fb91f0f8          SDIV     r0,r1,r8
;;;1068   	#else
;;;1069   	temp_SL/=5000L;
;;;1070   	#endif
;;;1071   	net_U=(signed short)temp_SL;
000e32  49e9              LDR      r1,|L1.4568|
000e34  8008              STRH     r0,[r1,#0]
                  |L1.3638|
;;;1072   	
;;;1073   	}
;;;1074   if(bps[11]._device!=dNET_METR) net_F3=net_F;
000e36  9802              LDR      r0,[sp,#8]
000e38  2807              CMP      r0,#7
000e3a  d003              BEQ      |L1.3652|
000e3c  48e9              LDR      r0,|L1.4580|
000e3e  8801              LDRH     r1,[r0,#0]  ; net_F
000e40  48e9              LDR      r0,|L1.4584|
000e42  8001              STRH     r1,[r0,#0]
                  |L1.3652|
;;;1075   #endif
;;;1076   
;;;1077   #ifdef UKU_TELECORE2015
;;;1078   // 
;;;1079   temp_SL=(signed long)net_buff_;
;;;1080   temp_SL*=Kunet;
;;;1081   temp_SL/=110000L;
;;;1082   net_U=(signed short)temp_SL;
;;;1083   #endif
;;;1084   
;;;1085   #ifdef UKU_TELECORE2017
;;;1086   // 
;;;1087   temp_SL=(signed long)net_buff_;
;;;1088   temp_SL*=Kunet;
;;;1089   temp_SL/=110000L;
;;;1090   net_U=(signed short)temp_SL;
;;;1091   #endif
;;;1092   
;;;1093   // 
;;;1094   temp_SL=(signed long)adc_buff_[0];
000e44  f8dfa3a4          LDR      r10,|L1.4588|
000e48  f9ba1000          LDRSH    r1,[r10,#0]  ; adc_buff_
;;;1095   temp_SL*=Kubat[0];
000e4c  4be8              LDR      r3,|L1.4592|
000e4e  f9b30000          LDRSH    r0,[r3,#0]  ; Kubat
000e52  4348              MULS     r0,r1,r0
;;;1096   temp_SL/=2000L;
000e54  f44f65fa          MOV      r5,#0x7d0
000e58  fb90f0f5          SDIV     r0,r0,r5
;;;1097   bat[0]._Ub=(signed short)temp_SL;
000e5c  4ce5              LDR      r4,|L1.4596|
000e5e  8060              STRH     r0,[r4,#2]
;;;1098   
;;;1099   #ifdef UKU_220
;;;1100   // 
;;;1101   temp_SL=(signed long)adc_buff_[0];
;;;1102   temp_SL*=Kubat[0];
;;;1103   temp_SL/=400L;
;;;1104   bat[0]._Ub=(signed short)temp_SL;
;;;1105   #endif
;;;1106   
;;;1107   #ifdef UKU_220_V2
;;;1108   // 
;;;1109   temp_SL=(signed long)adc_buff_[0];
;;;1110   temp_SL*=Kubat[0];
;;;1111   temp_SL/=400L;
;;;1112   bat[0]._Ub=(signed short)temp_SL;
;;;1113   #endif
;;;1114   
;;;1115   temp_SL=(signed long)adc_buff_[4];
000e60  f9ba1008          LDRSH    r1,[r10,#8]  ; adc_buff_
;;;1116   temp_SL*=Kubatm[0];
000e64  4ae4              LDR      r2,|L1.4600|
000e66  f9b20000          LDRSH    r0,[r2,#0]  ; Kubatm
000e6a  fb00f001          MUL      r0,r0,r1
;;;1117   temp_SL/=700L;
000e6e  f44f712f          MOV      r1,#0x2bc
000e72  fb90f0f1          SDIV     r0,r0,r1
;;;1118   bat[0]._Ubm=(signed short)temp_SL;
000e76  80a0              STRH     r0,[r4,#4]
;;;1119   
;;;1120   #ifdef UKU_KONTUR
;;;1121   temp_SL=(signed long)adc_buff_[4];
;;;1122   temp_SL*=Kubatm[0];
;;;1123   temp_SL/=2000L;
;;;1124   bat[0]._Ubm=(signed short)temp_SL;
;;;1125   #endif
;;;1126   
;;;1127   temp_SL=(signed long)adc_buff_[12];
000e78  f9bac018          LDRSH    r12,[r10,#0x18]  ; adc_buff_
;;;1128   temp_SL*=Kubat[1];
000e7c  f9b30002          LDRSH    r0,[r3,#2]  ; Kubat
000e80  fb00f00c          MUL      r0,r0,r12
;;;1129   temp_SL/=2000L;
000e84  fb90f0f5          SDIV     r0,r0,r5
;;;1130   bat[1]._Ub=(signed short)temp_SL;
000e88  f8a4004e          STRH     r0,[r4,#0x4e]
;;;1131   
;;;1132   #ifdef UKU_220
;;;1133   temp_SL=(signed long)adc_buff_[12];
;;;1134   temp_SL*=Kubat[1];
;;;1135   temp_SL/=400L;
;;;1136   bat[1]._Ub=(signed short)temp_SL;
;;;1137   #endif
;;;1138   
;;;1139   #ifdef UKU_220_V2
;;;1140   temp_SL=(signed long)adc_buff_[12];
;;;1141   temp_SL*=Kubat[1];
;;;1142   temp_SL/=400L;
;;;1143   bat[1]._Ub=(signed short)temp_SL;
;;;1144   #endif
;;;1145   
;;;1146   temp_SL=(signed long)adc_buff_[1];
000e8c  f9ba3002          LDRSH    r3,[r10,#2]  ; adc_buff_
;;;1147   temp_SL*=Kubatm[1];
000e90  f9b20002          LDRSH    r0,[r2,#2]  ; Kubatm
000e94  fb00f003          MUL      r0,r0,r3
;;;1148   temp_SL/=700L;
000e98  fb90f0f1          SDIV     r0,r0,r1
;;;1149   bat[1]._Ubm=(signed short)temp_SL;
000e9c  f8a40050          STRH     r0,[r4,#0x50]
;;;1150   #ifdef UKU_KONTUR
;;;1151   temp_SL=(signed long)adc_buff_[1];
;;;1152   temp_SL*=Kubatm[1];
;;;1153   temp_SL/=2000L;
;;;1154   bat[1]._Ubm=(signed short)temp_SL;
;;;1155   #endif
;;;1156   
;;;1157   #ifdef UKU_TELECORE2015
;;;1158   temp_SL=(signed long)adc_buff_[2];
;;;1159   temp_SL*=Kubat[0];
;;;1160   temp_SL/=2000L;
;;;1161   bat[0]._Ub=(signed short)temp_SL;
;;;1162   #endif
;;;1163   
;;;1164   /*
;;;1165   // 
;;;1166   if(!mess_find_unvol(MESS2MATEMAT))
;;;1167   	{
;;;1168   	temp_SL=(signed long)ad7705_buff_[0];
;;;1169   	temp_SL-=(signed long)Kibat0[0];
;;;1170   	temp_SL*=(signed long)Kibat1[0];
;;;1171   	if((AUSW_MAIN==24120)||(AUSW_MAIN==24210))temp_SL/=300L;
;;;1172   	else temp_SL/=1000L;
;;;1173   	bat[0]._Ib=(signed short)temp_SL;
;;;1174   
;;;1175   	temp_SL=(signed long)ad7705_buff_[1];
;;;1176   	temp_SL-=(signed long)Kibat0[1];
;;;1177   	temp_SL*=(signed long)Kibat1[1];
;;;1178   	if((AUSW_MAIN==24120)||(AUSW_MAIN==24210))temp_SL/=300L;
;;;1179   	else temp_SL/=1000L;
;;;1180   	bat[1]._Ib=(signed short)temp_SL;
;;;1181   	}
;;;1182   */
;;;1183   
;;;1184   
;;;1185   // 
;;;1186   if(!mess_find_unvol(MESS2MATEMAT))
000ea0  f04f00dc          MOV      r0,#0xdc
000ea4  f7fffffe          BL       mess_find_unvol
;;;1187   	{
;;;1188   	temp_SL=(signed long)ad7705_buff_[0];
;;;1189   	temp_SL-=(signed long)Kibat0[0];
;;;1190   	temp_SL*=(signed long)Kibat1[0];
;;;1191   	if((AUSW_MAIN==24120)||(AUSW_MAIN==24210))temp_SL/=300L;
;;;1192   	else if((AUSW_MAIN==22010)||(AUSW_MAIN==22035)||(AUSW_MAIN==22033))temp_SL/=2000L;
000ea8  f2456913          MOV      r9,#0x5613
000eac  bbf0              CBNZ     r0,|L1.3884|
000eae  f8dfc34c          LDR      r12,|L1.4604|
000eb2  f8bc0000          LDRH     r0,[r12,#0]           ;1188  ; ad7705_buff_
000eb6  f8dfb348          LDR      r11,|L1.4608|
000eba  f8bb1000          LDRH     r1,[r11,#0]           ;1189  ; Kibat0
000ebe  eba00001          SUB      r0,r0,r1              ;1189
000ec2  4ad0              LDR      r2,|L1.4612|
000ec4  f9b21000          LDRSH    r1,[r2,#0]            ;1190  ; Kibat1
000ec8  fb01f100          MUL      r1,r1,r0              ;1190
000ecc  48ce              LDR      r0,|L1.4616|
000ece  f6456338          MOV      r3,#0x5e38            ;1191
000ed2  8800              LDRH     r0,[r0,#0]            ;1191  ; AUSW_MAIN
000ed4  4298              CMP      r0,r3                 ;1191
000ed6  d004              BEQ      |L1.3810|
000ed8  f5a04ebc          SUB      lr,r0,#0x5e00         ;1191
000edc  f1be0e92          SUBS     lr,lr,#0x92           ;1191
000ee0  d104              BNE      |L1.3820|
                  |L1.3810|
000ee2  f44f7e96          MOV      lr,#0x12c             ;1191
000ee6  fb91f1fe          SDIV     r1,r1,lr              ;1191
000eea  e00f              B        |L1.3852|
                  |L1.3820|
000eec  f5a04ea8          SUB      lr,r0,#0x5400
000ef0  f5be7efd          SUBS     lr,lr,#0x1fa
000ef4  d003              BEQ      |L1.3838|
000ef6  4548              CMP      r0,r9
000ef8  d001              BEQ      |L1.3838|
000efa  42b0              CMP      r0,r6
000efc  d102              BNE      |L1.3844|
                  |L1.3838|
000efe  fb91f1f5          SDIV     r1,r1,r5
000f02  e003              B        |L1.3852|
                  |L1.3844|
;;;1193   	else temp_SL/=1000L;
000f04  f44f7e7a          MOV      lr,#0x3e8
000f08  fb91f1fe          SDIV     r1,r1,lr
                  |L1.3852|
;;;1194   	#ifdef UKU_TELECORE2015
;;;1195   	temp_SL/=2L;
;;;1196   	//temp_SL=-temp_SL;
;;;1197   	#endif
;;;1198   	//#ifdef UKU_TELECORE2017
;;;1199   	//temp_SL/=-2L;
;;;1200   	//temp_SL=-temp_SL;
;;;1201   	//#endif
;;;1202   	bat[0]._Ib=(signed short)temp_SL;
000f0c  8121              STRH     r1,[r4,#8]
;;;1203   
;;;1204   	temp_SL=(signed long)ad7705_buff_[1];
000f0e  f8bc1002          LDRH     r1,[r12,#2]  ; ad7705_buff_
;;;1205   	temp_SL-=(signed long)Kibat0[1];
000f12  f8bbc002          LDRH     r12,[r11,#2]  ; Kibat0
000f16  eba10c0c          SUB      r12,r1,r12
;;;1206   	temp_SL*=(signed long)Kibat1[1];
000f1a  f9b21002          LDRSH    r1,[r2,#2]  ; Kibat1
000f1e  fb01f10c          MUL      r1,r1,r12
;;;1207   	if((AUSW_MAIN==24120)||(AUSW_MAIN==24210))temp_SL/=300L;
000f22  4298              CMP      r0,r3
000f24  d005              BEQ      |L1.3890|
000f26  f5a042bc          SUB      r2,r0,#0x5e00
000f2a  e000              B        |L1.3886|
                  |L1.3884|
000f2c  e017              B        |L1.3934|
                  |L1.3886|
000f2e  3a92              SUBS     r2,r2,#0x92
000f30  d104              BNE      |L1.3900|
                  |L1.3890|
000f32  f44f7096          MOV      r0,#0x12c
000f36  fb91f0f0          SDIV     r0,r1,r0
000f3a  e00e              B        |L1.3930|
                  |L1.3900|
;;;1208   	else if((AUSW_MAIN==22010)||(AUSW_MAIN==22035)||(AUSW_MAIN==22033))temp_SL/=2000L;
000f3c  f5a042aa          SUB      r2,r0,#0x5500
000f40  3afa              SUBS     r2,r2,#0xfa
000f42  d003              BEQ      |L1.3916|
000f44  4548              CMP      r0,r9
000f46  d001              BEQ      |L1.3916|
000f48  42b0              CMP      r0,r6
000f4a  d102              BNE      |L1.3922|
                  |L1.3916|
000f4c  fb91f0f5          SDIV     r0,r1,r5
000f50  e003              B        |L1.3930|
                  |L1.3922|
;;;1209   	else temp_SL/=1000L;
000f52  f44f707a          MOV      r0,#0x3e8
000f56  fb91f0f0          SDIV     r0,r1,r0
                  |L1.3930|
;;;1210   	bat[1]._Ib=(signed short)temp_SL;
000f5a  f8a40054          STRH     r0,[r4,#0x54]
                  |L1.3934|
;;;1211   	}
;;;1212   
;;;1213   
;;;1214   
;;;1215   
;;;1216   
;;;1217   // 
;;;1218   
;;;1219   #ifdef UKU_KONTUR
;;;1220   if((adc_buff_[6]>800)&&(adc_buff_[6]<3800))bat[0]._nd=0;
;;;1221   else bat[0]._nd=1;
;;;1222   temp_SL=(signed long)adc_buff_[6];
;;;1223   temp_SL*=Ktbat[0];
;;;1224   temp_SL/=20000L;
;;;1225   temp_SL-=273L;
;;;1226   bat[0]._Tb=(signed short)temp_SL;
;;;1227   #else
;;;1228   if((adc_buff_[6]>800)&&(adc_buff_[6]<3800))bat[0]._nd=0;
000f5e  f9ba000c          LDRSH    r0,[r10,#0xc]  ; adc_buff_
000f62  46d6              MOV      lr,r10
000f64  4684              MOV      r12,r0
000f66  f2a03021          SUB      r0,r0,#0x321
000f6a  f64031b7          MOV      r1,#0xbb7
000f6e  2300              MOVS     r3,#0
;;;1229   else bat[0]._nd=1;
000f70  f04f0a01          MOV      r10,#1
000f74  9000              STR      r0,[sp,#0]            ;1228
000f76  4288              CMP      r0,r1                 ;1228
000f78  d201              BCS      |L1.3966|
000f7a  7323              STRB     r3,[r4,#0xc]          ;1228
000f7c  e001              B        |L1.3970|
                  |L1.3966|
000f7e  f884a00c          STRB     r10,[r4,#0xc]
                  |L1.3970|
;;;1230   temp_SL=(signed long)adc_buff_[6];
;;;1231   temp_SL*=Ktbat[0];
000f82  48a2              LDR      r0,|L1.4620|
000f84  f9b02000          LDRSH    r2,[r0,#0]  ; Ktbat
000f88  fb02f20c          MUL      r2,r2,r12
;;;1232   temp_SL/=20000L;
000f8c  f6446020          MOV      r0,#0x4e20
000f90  fb92f2f0          SDIV     r2,r2,r0
;;;1233   temp_SL-=273L;
000f94  f2a21211          SUB      r2,r2,#0x111
;;;1234   bat[0]._Tb=(signed short)temp_SL;
000f98  8162              STRH     r2,[r4,#0xa]
;;;1235   #endif
;;;1236   
;;;1237   #ifdef UKU_KONTUR
;;;1238   if((adc_buff_[7]>800)&&(adc_buff_[7]<3800))bat[1]._nd=0;
;;;1239   else bat[1]._nd=1;
;;;1240   temp_SL=(signed long)adc_buff_[7];
;;;1241   temp_SL*=Ktbat[1];
;;;1242   temp_SL/=20000L;
;;;1243   temp_SL-=273L;
;;;1244   bat[1]._Tb=(signed short)temp_SL;
;;;1245   #else
;;;1246   if((adc_buff_[7]>800)&&(adc_buff_[7]<3800))bat[1]._nd=0;
000f9a  f9be200e          LDRSH    r2,[lr,#0xe]  ; adc_buff_
000f9e  f64031b7          MOV      r1,#0xbb7
000fa2  f2a23b21          SUB      r11,r2,#0x321
000fa6  458b              CMP      r11,r1
000fa8  d202              BCS      |L1.4016|
000faa  f8843058          STRB     r3,[r4,#0x58]
000fae  e001              B        |L1.4020|
                  |L1.4016|
;;;1247   else bat[1]._nd=1;
000fb0  f884a058          STRB     r10,[r4,#0x58]
                  |L1.4020|
;;;1248   temp_SL=(signed long)adc_buff_[7];
;;;1249   temp_SL*=Ktbat[1];
000fb4  4995              LDR      r1,|L1.4620|
000fb6  f9b11002          LDRSH    r1,[r1,#2]  ; Ktbat
000fba  4351              MULS     r1,r2,r1
;;;1250   temp_SL/=20000L;
000fbc  f6446020          MOV      r0,#0x4e20
000fc0  fb91f0f0          SDIV     r0,r1,r0
;;;1251   temp_SL-=273L;
000fc4  f2a01011          SUB      r0,r0,#0x111
;;;1252   bat[1]._Tb=(signed short)temp_SL;
000fc8  498a              LDR      r1,|L1.4596|
000fca  f8a10056          STRH     r0,[r1,#0x56]
;;;1253   #endif
;;;1254   
;;;1255   #ifdef UKU_6U
;;;1256   
;;;1257   if(NUMMAKB==2)
;;;1258   	{
;;;1259   	if(makb[0]._cnt<5)
;;;1260   		{
;;;1261   		if(makb[0]._T_nd[0]==0)
;;;1262   			{
;;;1263   			bat[0]._Tb=makb[0]._T[0];
;;;1264   			bat[0]._nd=0;
;;;1265   			}
;;;1266   		}
;;;1267   
;;;1268   	if(makb[1]._cnt<5)
;;;1269   		{
;;;1270   		if(makb[1]._T_nd[0]==0)
;;;1271   			{
;;;1272   			bat[1]._Tb=makb[1]._T[0];
;;;1273   			bat[1]._nd=0;
;;;1274   			}
;;;1275   		}
;;;1276   
;;;1277   	}
;;;1278   else if(NUMMAKB==4)
;;;1279   	{
;;;1280   	signed short temp_t;
;;;1281   	temp_t=-20;
;;;1282   	if(makb[0]._cnt<5)
;;;1283   		{
;;;1284   		if(makb[0]._T_nd[0]==0)
;;;1285   			{
;;;1286   			temp_t=makb[0]._T[0];
;;;1287   			bat[0]._nd=0;
;;;1288   			}
;;;1289   		}
;;;1290   	if(makb[1]._cnt<5)
;;;1291   		{
;;;1292   		if(makb[1]._T_nd[0]==0)
;;;1293   			{
;;;1294   			if(temp_t<makb[1]._T[0])
;;;1295   				{
;;;1296   				bat[0]._nd=0;
;;;1297   				temp_t=makb[1]._T[0];
;;;1298   				}
;;;1299   			}
;;;1300   		}
;;;1301   	if(temp_t!=-20)bat[0]._Tb = temp_t;
;;;1302   
;;;1303    	temp_t=-20;
;;;1304   	if(makb[2]._cnt<5)
;;;1305   		{
;;;1306   		if(makb[2]._T_nd[0]==0)
;;;1307   			{
;;;1308   			temp_t=makb[2]._T[0];
;;;1309   			bat[1]._nd=0;
;;;1310   			}
;;;1311   		}
;;;1312   	if(makb[3]._cnt<5)
;;;1313   		{
;;;1314   		if(makb[3]._T_nd[0]==0)
;;;1315   			{
;;;1316   			if(temp_t<makb[3]._T[0])
;;;1317   				{
;;;1318   				bat[1]._nd=0;
;;;1319   				temp_t=makb[3]._T[0];
;;;1320   				}
;;;1321   			}
;;;1322   		}
;;;1323   	if(temp_t!=-20)bat[1]._Tb = temp_t;
;;;1324   	}
;;;1325   
;;;1326   #endif
;;;1327   
;;;1328   
;;;1329   // 
;;;1330   temp_SL=(signed long)adc_buff_[2];
000fce  f9be1004          LDRSH    r1,[lr,#4]  ; adc_buff_
;;;1331   temp_SL*=Kuload;
000fd2  488f              LDR      r0,|L1.4624|
000fd4  f9b00000          LDRSH    r0,[r0,#0]  ; Kuload
000fd8  fb01f000          MUL      r0,r1,r0
;;;1332   temp_SL/=2000L;
000fdc  f44f62fa          MOV      r2,#0x7d0
000fe0  fb90f0f2          SDIV     r0,r0,r2
;;;1333   load_U=(signed short)temp_SL;
000fe4  4c8b              LDR      r4,|L1.4628|
000fe6  8020              STRH     r0,[r4,#0]
;;;1334   
;;;1335   #ifdef UKU_220 
;;;1336   // 
;;;1337   temp_SL=(signed long)adc_buff_[2];
;;;1338   temp_SL*=Kuload;
;;;1339   temp_SL/=350L;
;;;1340   load_U=(signed short)temp_SL;
;;;1341   #endif
;;;1342   
;;;1343   #ifdef UKU_220_V2 
;;;1344   // 
;;;1345   temp_SL=(signed long)adc_buff_[2];
;;;1346   temp_SL*=Kuload;
;;;1347   temp_SL/=350L;
;;;1348   load_U=(signed short)temp_SL;
;;;1349   #endif
;;;1350   
;;;1351   #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;1352   // 
;;;1353   temp_SL=(signed long)adc_buff_[1];
000fe8  f9be2002          LDRSH    r2,[lr,#2]  ; adc_buff_
;;;1354   temp_SL*=Kuout;
000fec  488a              LDR      r0,|L1.4632|
000fee  f9b00000          LDRSH    r0,[r0,#0]  ; Kuout
000ff2  fb02f200          MUL      r2,r2,r0
;;;1355   if(AUSW_MAIN==22010)temp_SL/=400L;
000ff6  4884              LDR      r0,|L1.4616|
000ff8  f24555fa          MOV      r5,#0x55fa
000ffc  8800              LDRH     r0,[r0,#0]  ; AUSW_MAIN
000ffe  42a8              CMP      r0,r5
001000  d104              BNE      |L1.4108|
001002  f44f75c8          MOV      r5,#0x190
001006  fb92f2f5          SDIV     r2,r2,r5
00100a  e001              B        |L1.4112|
                  |L1.4108|
;;;1356   else temp_SL/=500L;
00100c  fb92f2f8          SDIV     r2,r2,r8
                  |L1.4112|
;;;1357   out_U=(signed short)temp_SL;
001010  fa0ffb82          SXTH     r11,r2
001014  4a81              LDR      r2,|L1.4636|
001016  f8a2b000          STRH     r11,[r2,#0]
;;;1358   load_U=out_U;
00101a  f8a4b000          STRH     r11,[r4,#0]
;;;1359   
;;;1360   // 
;;;1361   temp_SL=(signed long)adc_buff_[2];
;;;1362   temp_SL*=Kubps;
00101e  4a80              LDR      r2,|L1.4640|
001020  f9b22000          LDRSH    r2,[r2,#0]  ; Kubps
001024  fb01f102          MUL      r1,r1,r2
;;;1363   if(AUSW_MAIN==22010)temp_SL/=400L;
001028  d104              BNE      |L1.4148|
00102a  f44f72c8          MOV      r2,#0x190
00102e  fb91f1f2          SDIV     r1,r1,r2
001032  e001              B        |L1.4152|
                  |L1.4148|
;;;1364   else temp_SL/=500L;
001034  fb91f1f8          SDIV     r1,r1,r8
                  |L1.4152|
;;;1365   bps_U=(signed short)temp_SL;
001038  4d7a              LDR      r5,|L1.4644|
00103a  b209              SXTH     r1,r1
00103c  8029              STRH     r1,[r5,#0]
;;;1366   
;;;1367   if(bps_U<100)
00103e  2964              CMP      r1,#0x64
001040  da18              BGE      |L1.4212|
;;;1368   	{
;;;1369   	char i;
;;;1370   	for(i=0;i<NUMIST;i++)
001042  f04f0100          MOV      r1,#0
001046  4a78              LDR      r2,|L1.4648|
001048  f8dfe1e0          LDR      lr,|L1.4652|
00104c  f9b28000          LDRSH    r8,[r2,#0]
001050  e00e              B        |L1.4208|
                  |L1.4178|
;;;1371   		{
;;;1372   		if(bps[i]._Uin>bps_U)bps_U=bps[i]._Uin;
001052  ebc102c1          RSB      r2,r1,r1,LSL #3
001056  eb021201          ADD      r2,r2,r1,LSL #4
00105a  eb0e0282          ADD      r2,lr,r2,LSL #2
00105e  f9b54000          LDRSH    r4,[r5,#0]  ; bps_U
001062  6a12              LDR      r2,[r2,#0x20]
001064  42a2              CMP      r2,r4
001066  dd00              BLE      |L1.4202|
001068  802a              STRH     r2,[r5,#0]
                  |L1.4202|
00106a  f1010101          ADD      r1,r1,#1              ;1370
00106e  b2c9              UXTB     r1,r1                 ;1370
                  |L1.4208|
001070  4541              CMP      r1,r8                 ;1370
001072  dbee              BLT      |L1.4178|
                  |L1.4212|
;;;1373   		}
;;;1374   	}
;;;1375   
;;;1376   //  
;;;1377   temp_SL=0;
001074  f04f0500          MOV      r5,#0
;;;1378   for (i=0;i<NUMIST;i++)
001078  4629              MOV      r1,r5
00107a  4a6b              LDR      r2,|L1.4648|
00107c  4c6b              LDR      r4,|L1.4652|
00107e  f9b22000          LDRSH    r2,[r2,#0]            ;1370
001082  e00b              B        |L1.4252|
                  |L1.4228|
;;;1379   	{
;;;1380   	temp_SL+=((signed long)bps[i]._Ii);
001084  ebc108c1          RSB      r8,r1,r1,LSL #3
001088  eb081801          ADD      r8,r8,r1,LSL #4
00108c  eb040888          ADD      r8,r4,r8,LSL #2
001090  f8d88024          LDR      r8,[r8,#0x24]
001094  4445              ADD      r5,r5,r8
001096  f1010101          ADD      r1,r1,#1              ;1378
00109a  b2c9              UXTB     r1,r1                 ;1378
                  |L1.4252|
00109c  4291              CMP      r1,r2                 ;1378
00109e  dbf1              BLT      |L1.4228|
;;;1381   	}
;;;1382   bps_I=(signed short)temp_SL;
0010a0  4963              LDR      r1,|L1.4656|
0010a2  800d              STRH     r5,[r1,#0]
;;;1383   
;;;1384   
;;;1385   #endif
;;;1386   
;;;1387   
;;;1388   #ifdef UKU_KONTUR
;;;1389   //   1(  )
;;;1390   if((adc_buff_[5]>800)&&(adc_buff_[5]<3800))ND_EXT[0]=0;
;;;1391   else ND_EXT[0]=1;
;;;1392   temp_SL=(signed long)adc_buff_[5];
;;;1393   temp_SL*=Ktext[0];
;;;1394   temp_SL/=20000L;
;;;1395   temp_SL-=273L;
;;;1396   t_ext[0]=(signed short)temp_SL;
;;;1397   #else 
;;;1398   //   1(  )
;;;1399   if((adc_buff_[5]>800)&&(adc_buff_[5]<3800))ND_EXT[0]=0;
0010a4  4951              LDR      r1,|L1.4588|
0010a6  f8df818c          LDR      r8,|L1.4660|
0010aa  f9b1500a          LDRSH    r5,[r1,#0xa]  ; adc_buff_
0010ae  f64031b7          MOV      r1,#0xbb7
0010b2  f2a53e21          SUB      lr,r5,#0x321
0010b6  458e              CMP      lr,r1
0010b8  d202              BCS      |L1.4288|
0010ba  f8883000          STRB     r3,[r8,#0]
0010be  e001              B        |L1.4292|
                  |L1.4288|
;;;1400   else ND_EXT[0]=1;
0010c0  f888a000          STRB     r10,[r8,#0]
                  |L1.4292|
;;;1401   temp_SL=(signed long)adc_buff_[5];
;;;1402   temp_SL*=Ktext[0];
0010c4  495c              LDR      r1,|L1.4664|
0010c6  f9b11000          LDRSH    r1,[r1,#0]  ; Ktext
0010ca  434d              MULS     r5,r1,r5
;;;1403   temp_SL/=20000L;
0010cc  f6446e20          MOV      lr,#0x4e20
0010d0  fb95f5fe          SDIV     r5,r5,lr
;;;1404   temp_SL-=273L;
0010d4  f2a51511          SUB      r5,r5,#0x111
;;;1405   t_ext[0]=(signed short)temp_SL;
0010d8  f8dfe160          LDR      lr,|L1.4668|
0010dc  f8ae5000          STRH     r5,[lr,#0]
;;;1406   /*
;;;1407   if((adc_buff_[6]>800)&&(adc_buff_[6]<3800))ND_EXT[1]=0;
;;;1408   else ND_EXT[1]=1;
;;;1409   temp_SL=(signed long)adc_buff_[6];
;;;1410   temp_SL*=Ktext[1];
;;;1411   temp_SL/=20000L;
;;;1412   temp_SL-=273L;
;;;1413   t_ext[1]=(signed short)temp_SL;	*/
;;;1414   #endif
;;;1415   
;;;1416   #ifdef UKU_220
;;;1417   
;;;1418   //   2(  )
;;;1419   if((adc_buff_[3]>800)&&(adc_buff_[3]<3800))ND_EXT[1]=0;
;;;1420   else ND_EXT[1]=1;
;;;1421   temp_SL=(signed long)adc_buff_[3];
;;;1422   temp_SL*=Ktext[1];
;;;1423   temp_SL/=20000L;
;;;1424   temp_SL-=273L;
;;;1425   t_ext[1]=(signed short)temp_SL;
;;;1426   
;;;1427   //   3(  MSAN)
;;;1428   if((adc_buff_[10]>800)&&(adc_buff_[10]<3800))ND_EXT[2]=0;
;;;1429   else ND_EXT[2]=1;
;;;1430   temp_SL=(signed long)adc_buff_[10];
;;;1431   temp_SL*=Ktext[2];
;;;1432   temp_SL/=20000L;
;;;1433   temp_SL-=273L;
;;;1434   t_ext[2]=(signed short)temp_SL;
;;;1435   
;;;1436   #else
;;;1437   
;;;1438   
;;;1439   #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;1440   
;;;1441   //   
;;;1442   if((adc_buff_[6]>800)&&(adc_buff_[6]<3800))ND_EXT[0]=0;
0010e0  9d00              LDR      r5,[sp,#0]
0010e2  f6403eb7          MOV      lr,#0xbb7
0010e6  4575              CMP      r5,lr
0010e8  d202              BCS      |L1.4336|
0010ea  f8883000          STRB     r3,[r8,#0]
0010ee  e001              B        |L1.4340|
                  |L1.4336|
;;;1443   else ND_EXT[0]=1;
0010f0  f888a000          STRB     r10,[r8,#0]
                  |L1.4340|
;;;1444   temp_SL=(signed long)adc_buff_[6];
;;;1445   temp_SL*=Ktext[0];
0010f4  fb01f10c          MUL      r1,r1,r12
;;;1446   temp_SL/=20000L;
0010f8  f6446520          MOV      r5,#0x4e20
0010fc  fb91f1f5          SDIV     r1,r1,r5
;;;1447   temp_SL-=273L;
001100  f2a11111          SUB      r1,r1,#0x111
;;;1448   t_ext[0]=(signed short)temp_SL;
001104  4d4d              LDR      r5,|L1.4668|
001106  8029              STRH     r1,[r5,#0]
;;;1449   
;;;1450   #else
;;;1451   
;;;1452   
;;;1453   
;;;1454   //   2(  )
;;;1455   if((adc_buff_[6]>800)&&(adc_buff_[6]<3800))ND_EXT[1]=0;
;;;1456   else ND_EXT[1]=1;
;;;1457   temp_SL=(signed long)adc_buff_[6];
;;;1458   temp_SL*=Ktext[1];
;;;1459   temp_SL/=20000L;
;;;1460   temp_SL-=273L;
;;;1461   t_ext[1]=(signed short)temp_SL;
;;;1462   
;;;1463   //   3(  MSAN)
;;;1464   if((adc_buff_[3]>800)&&(adc_buff_[3]<3800))ND_EXT[2]=0;
;;;1465   else ND_EXT[2]=1;
;;;1466   temp_SL=(signed long)adc_buff_[3];
;;;1467   temp_SL*=Ktext[2];
;;;1468   temp_SL/=20000L;
;;;1469   temp_SL-=273L;
;;;1470   t_ext[2]=(signed short)temp_SL;
;;;1471   
;;;1472   #endif
;;;1473   #endif
;;;1474   
;;;1475   #ifdef UKU_220_V2
;;;1476   
;;;1477   //   2(  )
;;;1478   if((adc_buff_[3]>800)&&(adc_buff_[3]<3800))ND_EXT[1]=0;
;;;1479   else ND_EXT[1]=1;
;;;1480   temp_SL=(signed long)adc_buff_[3];
;;;1481   temp_SL*=Ktext[1];
;;;1482   temp_SL/=20000L;
;;;1483   temp_SL-=273L;
;;;1484   t_ext[1]=(signed short)temp_SL;
;;;1485   
;;;1486   //   3(  MSAN)
;;;1487   if((adc_buff_[10]>800)&&(adc_buff_[10]<3800))ND_EXT[2]=0;
;;;1488   else ND_EXT[2]=1;
;;;1489   temp_SL=(signed long)adc_buff_[10];
;;;1490   temp_SL*=Ktext[2];
;;;1491   temp_SL/=20000L;
;;;1492   temp_SL-=273L;
;;;1493   t_ext[2]=(signed short)temp_SL;
;;;1494   
;;;1495   #else
;;;1496   
;;;1497   #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;1498   // 
;;;1499   if(bps[8]._device==dIBAT_METR)
001108  f89412e0          LDRB     r1,[r4,#0x2e0]  ; bps
;;;1500   	{
;;;1501   	ibat_metr_buff_[0]=((signed long)bps[8]._buff[0])+(((signed long)bps[8]._buff[1])<<8);
;;;1502   	ibat_metr_buff_[1]=((signed long)bps[8]._buff[2])+(((signed long)bps[8]._buff[3])<<8);
;;;1503   	bIBAT_SMKLBR=((signed short)bps[8]._buff[4])+(((signed short)bps[8]._buff[5])<<8);
;;;1504   
;;;1505   	if(!bIBAT_SMKLBR)
;;;1506   		{
;;;1507   		signed long temp_SL;
;;;1508   		temp_SL=(signed long)ibat_metr_buff_[0];
;;;1509   		temp_SL-=(signed long)ibat_metr_buff_[1];
;;;1510   		temp_SL*=(signed long)Kibat1[0];
;;;1511   		if((AUSW_MAIN==22010)||(AUSW_MAIN==22011)||(AUSW_MAIN==22035)||(AUSW_MAIN==22033)||(AUSW_MAIN==22063)||(AUSW_MAIN==22023)||(AUSW_MAIN==22043))temp_SL/=2000L;
;;;1512   	
;;;1513   		Ib_ips_termokompensat =(signed short)temp_SL;
00110c  f8dfc130          LDR      r12,|L1.4672|
001110  2909              CMP      r1,#9                 ;1499
001112  d13d              BNE      |L1.4496|
001114  f89412e6          LDRB     r1,[r4,#0x2e6]        ;1501  ; bps
001118  f89452e7          LDRB     r5,[r4,#0x2e7]        ;1501  ; bps
00111c  f8dfe124          LDR      lr,|L1.4676|
001120  eb012105          ADD      r1,r1,r5,LSL #8       ;1501
001124  f8ce1000          STR      r1,[lr,#0]            ;1501  ; ibat_metr_buff_
001128  f89452e8          LDRB     r5,[r4,#0x2e8]        ;1502  ; bps
00112c  f894a2e9          LDRB     r10,[r4,#0x2e9]       ;1502  ; bps
001130  eb05250a          ADD      r5,r5,r10,LSL #8      ;1502
001134  f8ce5004          STR      r5,[lr,#4]            ;1502  ; ibat_metr_buff_
001138  f894a2ea          LDRB     r10,[r4,#0x2ea]       ;1503  ; bps
00113c  f894e2eb          LDRB     lr,[r4,#0x2eb]        ;1503  ; bps
001140  eb0a2a0e          ADD      r10,r10,lr,LSL #8     ;1503
001144  f8dfe100          LDR      lr,|L1.4680|
001148  fa0ffa8a          SXTH     r10,r10               ;1503
00114c  f8aea000          STRH     r10,[lr,#0]           ;1503
001150  f1ba0f00          CMP      r10,#0                ;1505
001154  d11c              BNE      |L1.4496|
001156  eba10505          SUB      r5,r1,r5              ;1509
00115a  492a              LDR      r1,|L1.4612|
00115c  f9b11000          LDRSH    r1,[r1,#0]            ;1510  ; Kibat1
001160  fb01f105          MUL      r1,r1,r5              ;1510
001164  f5a045aa          SUB      r5,r0,#0x5500         ;1511
001168  3dfa              SUBS     r5,r5,#0xfa           ;1511
00116a  d00b              BEQ      |L1.4484|
00116c  1e6d              SUBS     r5,r5,#1              ;1511
00116e  d009              BEQ      |L1.4484|
001170  4548              CMP      r0,r9                 ;1511
001172  d007              BEQ      |L1.4484|
001174  42b0              CMP      r0,r6                 ;1511
001176  d005              BEQ      |L1.4484|
001178  3d34              SUBS     r5,r5,#0x34           ;1511
00117a  d003              BEQ      |L1.4484|
00117c  3528              ADDS     r5,r5,#0x28           ;1511
00117e  d001              BEQ      |L1.4484|
001180  3d14              SUBS     r5,r5,#0x14           ;1511
001182  d103              BNE      |L1.4492|
                  |L1.4484|
001184  f44f65fa          MOV      r5,#0x7d0             ;1511
001188  fb91f1f5          SDIV     r1,r1,r5              ;1511
                  |L1.4492|
00118c  f8ac1000          STRH     r1,[r12,#0]
                  |L1.4496|
;;;1514   		}
;;;1515   	}
;;;1516   
;;;1517   bat[0]._Ub=load_U;
001190  4d18              LDR      r5,|L1.4596|
001192  f8a5b002          STRH     r11,[r5,#2]
;;;1518   if(AUSW_MAIN==22018) Ib_ips_termokompensat=bat[0]._Ib;
001196  f5a041ac          SUB      r1,r0,#0x5600
00119a  3902              SUBS     r1,#2
00119c  d103              BNE      |L1.4518|
00119e  8928              LDRH     r0,[r5,#8]  ; bat
0011a0  f8ac0000          STRH     r0,[r12,#0]
0011a4  e002              B        |L1.4524|
                  |L1.4518|
;;;1519   else bat[0]._Ib=Ib_ips_termokompensat;
0011a6  f8bc0000          LDRH     r0,[r12,#0]  ; Ib_ips_termokompensat
0011aa  8128              STRH     r0,[r5,#8]
                  |L1.4524|
;;;1520   
;;;1521   #endif
;;;1522   #endif
;;;1523   
;;;1524   
;;;1525   #ifdef UKU_TELECORE2015
;;;1526   
;;;1527   //   1
;;;1528   if((adc_buff_[7]>800)&&(adc_buff_[7]<3800))ND_EXT[0]=0;
;;;1529   else ND_EXT[0]=1;
;;;1530   temp_SL=(signed long)adc_buff_[7];
;;;1531   temp_SL*=Ktext[0];
;;;1532   temp_SL/=20000L;
;;;1533   temp_SL-=273L;
;;;1534   t_ext[0]=(signed short)temp_SL;
;;;1535   
;;;1536   
;;;1537   //   2
;;;1538   if((adc_buff_[6]>800)&&(adc_buff_[6]<3800))ND_EXT[1]=0;
;;;1539   else ND_EXT[1]=1;
;;;1540   temp_SL=(signed long)adc_buff_[6];
;;;1541   temp_SL*=Ktext[1];
;;;1542   temp_SL/=20000L;
;;;1543   temp_SL-=273L;
;;;1544   t_ext[1]=(signed short)temp_SL;
;;;1545   
;;;1546   #endif
;;;1547   
;;;1548   #ifdef UKU_TELECORE2017
;;;1549   
;;;1550   //   1
;;;1551   if((adc_buff_[7]>800)&&(adc_buff_[7]<3800))ND_EXT[0]=0;
;;;1552   else ND_EXT[0]=1;
;;;1553   temp_SL=(signed long)adc_buff_[7];
;;;1554   temp_SL*=Ktext[0];
;;;1555   temp_SL/=20000L;
;;;1556   temp_SL-=273L;
;;;1557   t_ext[0]=(signed short)temp_SL;
;;;1558   
;;;1559   
;;;1560   //   2
;;;1561   if((adc_buff_[6]>800)&&(adc_buff_[6]<3800))ND_EXT[1]=0;
;;;1562   else ND_EXT[1]=1;
;;;1563   temp_SL=(signed long)adc_buff_[6];
;;;1564   temp_SL*=Ktext[1];
;;;1565   temp_SL/=20000L;
;;;1566   temp_SL-=273L;
;;;1567   t_ext[1]=(signed short)temp_SL;
;;;1568   
;;;1569   #endif
;;;1570   
;;;1571   // 
;;;1572   temp_SL=(signed long)adc_buff_ext_[0];
0011ac  4e27              LDR      r6,|L1.4684|
0011ae  8831              LDRH     r1,[r6,#0]  ; adc_buff_ext_
;;;1573   temp_SL*=Kunet_ext[0];
0011b0  f8df909c          LDR      r9,|L1.4688|
0011b4  f9b90000          LDRSH    r0,[r9,#0]  ; Kunet_ext
0011b8  4348              MULS     r0,r1,r0
;;;1574   temp_SL/=4000L;
0011ba  f44f6a7a          MOV      r10,#0xfa0
0011be  fb90f0fa          SDIV     r0,r0,r10
;;;1575   Uvv[0]=(signed short)temp_SL;
0011c2  4924              LDR      r1,|L1.4692|
0011c4  b280              UXTH     r0,r0
0011c6  8008              STRH     r0,[r1,#0]
;;;1576   if(Uvv[0]<100) Uvv0=Uvv[0];
0011c8  f8dfe08c          LDR      lr,|L1.4696|
0011cc  2864              CMP      r0,#0x64
0011ce  d245              BCS      |L1.4700|
0011d0  f8ae0000          STRH     r0,[lr,#0]
0011d4  e046              B        |L1.4708|
0011d6  0000              DCW      0x0000
                  |L1.4568|
                          DCD      net_U
                  |L1.4572|
                          DCD      Kunet
                  |L1.4576|
                          DCD      ||area_number.22||
                  |L1.4580|
                          DCD      net_F
                  |L1.4584|
                          DCD      net_F3
                  |L1.4588|
                          DCD      ||.bss||+0x400
                  |L1.4592|
                          DCD      Kubat
                  |L1.4596|
                          DCD      bat
                  |L1.4600|
                          DCD      Kubatm
                  |L1.4604|
                          DCD      ad7705_buff_
                  |L1.4608|
                          DCD      Kibat0
                  |L1.4612|
                          DCD      Kibat1
                  |L1.4616|
                          DCD      AUSW_MAIN
                  |L1.4620|
                          DCD      Ktbat
                  |L1.4624|
                          DCD      Kuload
                  |L1.4628|
                          DCD      load_U
                  |L1.4632|
                          DCD      Kuout
                  |L1.4636|
                          DCD      out_U
                  |L1.4640|
                          DCD      Kubps
                  |L1.4644|
                          DCD      bps_U
                  |L1.4648|
                          DCD      NUMIST
                  |L1.4652|
                          DCD      bps
                  |L1.4656|
                          DCD      bps_I
                  |L1.4660|
                          DCD      ND_EXT
                  |L1.4664|
                          DCD      Ktext
                  |L1.4668|
                          DCD      t_ext
                  |L1.4672|
                          DCD      Ib_ips_termokompensat
                  |L1.4676|
                          DCD      ibat_metr_buff_
                  |L1.4680|
                          DCD      bIBAT_SMKLBR
                  |L1.4684|
                          DCD      adc_buff_ext_
                  |L1.4688|
                          DCD      Kunet_ext
                  |L1.4692|
                          DCD      Uvv
                  |L1.4696|
                          DCD      Uvv0
                  |L1.4700|
;;;1577   else Uvv0=net_U;
00125c  48fc              LDR      r0,|L1.5712|
00125e  8800              LDRH     r0,[r0,#0]  ; net_U
001260  f8ae0000          STRH     r0,[lr,#0]
                  |L1.4708|
;;;1578   
;;;1579   // 
;;;1580   temp_SL=(signed long)adc_buff_ext_[1];
001264  8876              LDRH     r6,[r6,#2]  ; adc_buff_ext_
;;;1581   temp_SL*=Kunet_ext[1];
001266  f9b90002          LDRSH    r0,[r9,#2]  ; Kunet_ext
00126a  4370              MULS     r0,r6,r0
;;;1582   temp_SL/=4000L;
00126c  fb90f0fa          SDIV     r0,r0,r10
;;;1583   Uvv[1]=(signed short)temp_SL;
001270  8048              STRH     r0,[r1,#2]
;;;1584   
;;;1585   
;;;1586   //  
;;;1587   temp_SL=(signed long)eb2_data_short[0];
001272  49f8              LDR      r1,|L1.5716|
001274  f9b10000          LDRSH    r0,[r1,#0]  ; eb2_data_short
;;;1588   temp_SL*=Kvv_eb2[0];
001278  4ef7              LDR      r6,|L1.5720|
00127a  f9b69000          LDRSH    r9,[r6,#0]  ; Kvv_eb2
00127e  fb09f900          MUL      r9,r9,r0
;;;1589   temp_SL/=6000L;
001282  f2417070          MOV      r0,#0x1770
001286  fb99faf0          SDIV     r10,r9,r0
;;;1590   Uvv_eb2[0]=(signed short)temp_SL;
00128a  f8df93d0          LDR      r9,|L1.5724|
00128e  f8a9a000          STRH     r10,[r9,#0]
;;;1591   
;;;1592   temp_SL=(signed long)eb2_data_short[1];
001292  f9b1e002          LDRSH    lr,[r1,#2]  ; eb2_data_short
;;;1593   temp_SL*=Kvv_eb2[1];
001296  f9b6a002          LDRSH    r10,[r6,#2]  ; Kvv_eb2
00129a  fb0afa0e          MUL      r10,r10,lr
;;;1594   temp_SL/=6000L;
00129e  fb9afaf0          SDIV     r10,r10,r0
;;;1595   Uvv_eb2[1]=(signed short)temp_SL;
0012a2  f8a9a002          STRH     r10,[r9,#2]
;;;1596   
;;;1597   temp_SL=(signed long)eb2_data_short[2];
0012a6  f9b1a004          LDRSH    r10,[r1,#4]  ; eb2_data_short
;;;1598   temp_SL*=Kvv_eb2[2];
0012aa  f9b66004          LDRSH    r6,[r6,#4]  ; Kvv_eb2
0012ae  fb06f60a          MUL      r6,r6,r10
;;;1599   temp_SL/=6000L;
0012b2  fb96f6f0          SDIV     r6,r6,r0
;;;1600   Uvv_eb2[2]=(signed short)temp_SL;
0012b6  f8a96004          STRH     r6,[r9,#4]
;;;1601   
;;;1602   //  
;;;1603   temp_SL=(signed long)eb2_data_short[3];
0012ba  f9b1a006          LDRSH    r10,[r1,#6]  ; eb2_data_short
;;;1604   temp_SL*=Kpes_eb2[0];
0012be  f8df93a0          LDR      r9,|L1.5728|
0012c2  f9b96000          LDRSH    r6,[r9,#0]  ; Kpes_eb2
0012c6  fb06f60a          MUL      r6,r6,r10
;;;1605   temp_SL/=6000L;
0012ca  fb96faf0          SDIV     r10,r6,r0
;;;1606   Upes_eb2[0]=(signed short)temp_SL;
0012ce  4ee5              LDR      r6,|L1.5732|
0012d0  f8a6a000          STRH     r10,[r6,#0]
;;;1607   
;;;1608   temp_SL=(signed long)eb2_data_short[4];
0012d4  f9b1e008          LDRSH    lr,[r1,#8]  ; eb2_data_short
;;;1609   temp_SL*=Kpes_eb2[1];
0012d8  f9b9a002          LDRSH    r10,[r9,#2]  ; Kpes_eb2
0012dc  fb0afa0e          MUL      r10,r10,lr
;;;1610   temp_SL/=6000L;
0012e0  fb9afaf0          SDIV     r10,r10,r0
;;;1611   Upes_eb2[1]=(signed short)temp_SL;
0012e4  f8a6a002          STRH     r10,[r6,#2]
;;;1612   
;;;1613   temp_SL=(signed long)eb2_data_short[5];
0012e8  f9b1a00a          LDRSH    r10,[r1,#0xa]  ; eb2_data_short
;;;1614   temp_SL*=Kpes_eb2[2];
0012ec  f9b91004          LDRSH    r1,[r9,#4]  ; Kpes_eb2
0012f0  fb01f10a          MUL      r1,r1,r10
;;;1615   temp_SL/=6000L;
0012f4  fb91f0f0          SDIV     r0,r1,r0
;;;1616   Upes_eb2[2]=(signed short)temp_SL;
0012f8  80b0              STRH     r0,[r6,#4]
;;;1617   
;;;1618   //  
;;;1619   
;;;1620   ibt._T[0]=t_ext[1]+273;
0012fa  48db              LDR      r0,|L1.5736|
0012fc  4edb              LDR      r6,|L1.5740|
0012fe  8841              LDRH     r1,[r0,#2]  ; t_ext
001300  f2011111          ADD      r1,r1,#0x111
001304  fa0ff981          SXTH     r9,r1
001308  f8a69000          STRH     r9,[r6,#0]
;;;1621   ibt._T[1]=t_ext[2]+273;
00130c  8880              LDRH     r0,[r0,#4]  ; t_ext
00130e  f2001011          ADD      r0,r0,#0x111
001312  fa0ffa80          SXTH     r10,r0
001316  f8a6a002          STRH     r10,[r6,#2]
;;;1622   
;;;1623   ibt._nd[0]=ND_EXT[1];
00131a  f8981001          LDRB     r1,[r8,#1]  ; ND_EXT
00131e  7231              STRB     r1,[r6,#8]
;;;1624   ibt._nd[1]=ND_EXT[2];
001320  f8980002          LDRB     r0,[r8,#2]  ; ND_EXT
001324  7270              STRB     r0,[r6,#9]
;;;1625   
;;;1626   #ifndef UKU_TELECORE2015
;;;1627   if((ibt._nd[0]==0) &&  (ibt._nd[1]==0))
;;;1628   	{
;;;1629   	t_box=((ibt._T[0]+ibt._T[1])/2)-273;
001326  4ed2              LDR      r6,|L1.5744|
001328  b901              CBNZ     r1,|L1.4908|
00132a  b110              CBZ      r0,|L1.4914|
                  |L1.4908|
;;;1630   	}
;;;1631   else if((ibt._nd[0]==1) &&  (ibt._nd[1]==0))
00132c  2901              CMP      r1,#1
00132e  d00a              BEQ      |L1.4934|
001330  e00a              B        |L1.4936|
                  |L1.4914|
001332  eb09000a          ADD      r0,r9,r10             ;1629
001336  eb0070d0          ADD      r0,r0,r0,LSR #31      ;1629
00133a  f46f7188          MVN      r1,#0x110             ;1629
00133e  eb010060          ADD      r0,r1,r0,ASR #1       ;1629
001342  8030              STRH     r0,[r6,#0]            ;1629
001344  e01e              B        |L1.4996|
                  |L1.4934|
001346  b108              CBZ      r0,|L1.4940|
                  |L1.4936|
;;;1632   	{
;;;1633   	t_box=ibt._T[1]-273;
;;;1634   	}
;;;1635   else if((ibt._nd[0]==0) &&  (ibt._nd[1]==1))
001348  b129              CBZ      r1,|L1.4950|
00134a  e006              B        |L1.4954|
                  |L1.4940|
00134c  f2aa1a11          SUB      r10,r10,#0x111        ;1633
001350  f8a6a000          STRH     r10,[r6,#0]           ;1633
001354  e016              B        |L1.4996|
                  |L1.4950|
001356  2801              CMP      r0,#1
001358  d002              BEQ      |L1.4960|
                  |L1.4954|
;;;1636   	{
;;;1637   	t_box=ibt._T[0]-273;
;;;1638   	}
;;;1639   else if((ibt._nd[0]==1) &&  (ibt._nd[1]==1))
00135a  2901              CMP      r1,#1
00135c  d005              BEQ      |L1.4970|
00135e  e011              B        |L1.4996|
                  |L1.4960|
001360  f2a91911          SUB      r9,r9,#0x111          ;1637
001364  f8a69000          STRH     r9,[r6,#0]            ;1637
001368  e00c              B        |L1.4996|
                  |L1.4970|
00136a  2801              CMP      r0,#1
00136c  d10a              BNE      |L1.4996|
;;;1640   	{
;;;1641   	if(t_ext_can_nd<5)t_box= t_ext_can;
00136e  48c1              LDR      r0,|L1.5748|
001370  7800              LDRB     r0,[r0,#0]  ; t_ext_can_nd
001372  2805              CMP      r0,#5
001374  d203              BCS      |L1.4990|
001376  48c0              LDR      r0,|L1.5752|
001378  8800              LDRH     r0,[r0,#0]  ; t_ext_can
00137a  8030              STRH     r0,[r6,#0]
00137c  e002              B        |L1.4996|
                  |L1.4990|
;;;1642   	else t_box=20;
00137e  f04f0014          MOV      r0,#0x14
001382  8030              STRH     r0,[r6,#0]
                  |L1.4996|
;;;1643   	}
;;;1644   #endif
;;;1645   /*
;;;1646   //  
;;;1647   
;;;1648   ibt._T[0]=bat[0]._Tb+273;
;;;1649   ibt._T[1]=bat[1]._Tb+273;
;;;1650   ibt._T[2]=t_ext[1]+273;
;;;1651   ibt._T[3]=t_ext[2]+273;
;;;1652   
;;;1653   ibt._nd[0]=bat[0]._nd;
;;;1654   ibt._nd[1]=bat[1]._nd;
;;;1655   ibt._nd[2]=ND_EXT[1];
;;;1656   ibt._nd[3]=ND_EXT[2];
;;;1657   
;;;1658   ibt._avg1=0;
;;;1659   ibt._avg_cnt=4;
;;;1660   
;;;1661   if(ibt._nd[0]==0)
;;;1662   	{
;;;1663   	ibt._avg1+=ibt._T[0];
;;;1664   	}
;;;1665   else 
;;;1666   	{
;;;1667   	ibt._avg_cnt--;
;;;1668   	}
;;;1669   
;;;1670   if(ibt._nd[1]==0)
;;;1671   	{
;;;1672   	ibt._avg1+=ibt._T[1];
;;;1673   	}
;;;1674   else 
;;;1675   	{
;;;1676   	ibt._avg_cnt--;
;;;1677   	}
;;;1678   
;;;1679   if(ibt._nd[2]==0)
;;;1680   	{
;;;1681   	ibt._avg1+=ibt._T[2];
;;;1682   	}
;;;1683   else 
;;;1684   	{
;;;1685   	ibt._avg_cnt--;
;;;1686   	}
;;;1687   
;;;1688   if(ibt._nd[3]==0)
;;;1689   	{
;;;1690   	ibt._avg1+=ibt._T[3];
;;;1691   	}
;;;1692   else 
;;;1693   	{
;;;1694   	ibt._avg_cnt--;
;;;1695   	}
;;;1696   
;;;1697   if(ibt._avg_cnt==0)
;;;1698   	{
;;;1699   	}
;;;1700   else
;;;1701   	{
;;;1702   	ibt._avg1/=ibt._avg_cnt;
;;;1703   	}
;;;1704   
;;;1705   
;;;1706   if(ibt._nd[0]!=0)
;;;1707   	{
;;;1708   	ibt._T_dispers[0]=0;
;;;1709   	}
;;;1710   else 
;;;1711   	{
;;;1712   	ibt._T_dispers[0]=abs(ibt._T[0]-ibt._avg1);
;;;1713   	}
;;;1714   
;;;1715   if(ibt._nd[1]!=0)
;;;1716   	{
;;;1717   	ibt._T_dispers[1]=0;
;;;1718   	}
;;;1719   else 
;;;1720   	{
;;;1721   	ibt._T_dispers[1]=abs(ibt._T[1]-ibt._avg1);
;;;1722   	}
;;;1723   
;;;1724   if(ibt._nd[2]!=0)
;;;1725   	{
;;;1726   	ibt._T_dispers[2]=0;
;;;1727   	}
;;;1728   else 
;;;1729   	{
;;;1730   	ibt._T_dispers[2]=abs(ibt._T[2]-ibt._avg1);
;;;1731   	}
;;;1732   
;;;1733   if(ibt._nd[3]!=0)
;;;1734   	{
;;;1735   	ibt._T_dispers[3]=0;
;;;1736   	}
;;;1737   else 
;;;1738   	{
;;;1739   	ibt._T_dispers[3]=abs(ibt._T[3]-ibt._avg1);
;;;1740   	}
;;;1741   
;;;1742   if(	ibt._nd[0]&&
;;;1743   	ibt._nd[1]&&
;;;1744   	ibt._nd[2]&&
;;;1745   	ibt._nd[3]
;;;1746   	)
;;;1747   	{
;;;1748   	t_box=(bps[0]._Ti);
;;;1749   	}
;;;1750   
;;;1751   else if(	ibt._nd[0]||
;;;1752   	ibt._nd[1]||
;;;1753   	ibt._nd[2]||
;;;1754   	ibt._nd[3]
;;;1755   	)
;;;1756   	{
;;;1757   	t_box=(ibt._avg1-273);
;;;1758   	}
;;;1759   else 
;;;1760   	{
;;;1761   	ibt._max_dispers_num=0;
;;;1762   	ibt._max_dispers=ibt._T_dispers[0];
;;;1763   
;;;1764   	if(ibt._T_dispers[1]>ibt._max_dispers)
;;;1765   		{
;;;1766   		ibt._max_dispers_num=1;
;;;1767   		ibt._max_dispers=ibt._T_dispers[1];
;;;1768   		}
;;;1769   	if(ibt._T_dispers[2]>ibt._max_dispers)
;;;1770   		{
;;;1771   		ibt._max_dispers_num=2;
;;;1772   		ibt._max_dispers=ibt._T_dispers[2];
;;;1773   		}
;;;1774   	if(ibt._T_dispers[3]>ibt._max_dispers)
;;;1775   		{
;;;1776   		ibt._max_dispers_num=3;
;;;1777   		ibt._max_dispers=ibt._T_dispers[3];
;;;1778   		}
;;;1779   
;;;1780   	ibt._avg2=0;
;;;1781   
;;;1782   	if(ibt._max_dispers_num!=0)
;;;1783   		{
;;;1784   		ibt._avg2+=ibt._T[0];
;;;1785   		}
;;;1786   	if(ibt._max_dispers_num!=1)
;;;1787   		{
;;;1788   		ibt._avg2+=ibt._T[1];
;;;1789   		}
;;;1790   	if(ibt._max_dispers_num!=2)
;;;1791   		{
;;;1792   		ibt._avg2+=ibt._T[2];
;;;1793   		}
;;;1794   	if(ibt._max_dispers_num!=3)
;;;1795   		{
;;;1796   		ibt._avg2+=ibt._T[3];
;;;1797   		}
;;;1798   
;;;1799   	t_box=(ibt._avg2/3)-273;
;;;1800   
;;;1801   	}*/
;;;1802   
;;;1803   
;;;1804   //*********************************************
;;;1805   
;;;1806   #ifndef TELECORE
;;;1807   if((BAT_IS_ON[0]==bisON)&&(bat[0]._Ub>200)) Ibmax=bat[0]._Ib;
001384  48bd              LDR      r0,|L1.5756|
001386  7801              LDRB     r1,[r0,#0]  ; BAT_IS_ON
001388  2955              CMP      r1,#0x55
00138a  d104              BNE      |L1.5014|
00138c  f1bb0fc8          CMP      r11,#0xc8
001390  dd01              BLE      |L1.5014|
001392  8929              LDRH     r1,[r5,#8]  ; bat
001394  8739              STRH     r1,[r7,#0x38]
                  |L1.5014|
;;;1808   if((BAT_IS_ON[1]==bisON)&&(bat[1]._Ub>200)&&(bat[1]._Ib>bat[0]._Ib)) Ibmax=bat[1]._Ib;
001396  7840              LDRB     r0,[r0,#1]  ; BAT_IS_ON
001398  2855              CMP      r0,#0x55
00139a  d10a              BNE      |L1.5042|
00139c  f9b5004e          LDRSH    r0,[r5,#0x4e]  ; bat
0013a0  28c8              CMP      r0,#0xc8
0013a2  dd06              BLE      |L1.5042|
0013a4  f9b50054          LDRSH    r0,[r5,#0x54]  ; bat
0013a8  f9b51008          LDRSH    r1,[r5,#8]  ; bat
0013ac  4288              CMP      r0,r1
0013ae  dd00              BLE      |L1.5042|
0013b0  8738              STRH     r0,[r7,#0x38]
                  |L1.5042|
;;;1809   #endif
;;;1810   
;;;1811   #ifdef TELECORE
;;;1812   Ibmax=0;
;;;1813   /*
;;;1814   if((NUMBAT_TELECORE>0)&&(lakb[0]._communicationFullErrorStat==0)&&(lakb[0]._ch_curr/10>Ibmax))Ibmax=lakb[0]._ch_curr/10;
;;;1815   if((NUMBAT_TELECORE>1)&&(lakb[1]._communicationFullErrorStat==0)&&(lakb[1]._ch_curr/10>Ibmax))Ibmax=lakb[1]._ch_curr/10;
;;;1816   if((NUMBAT_TELECORE>2)&&(lakb[2]._communicationFullErrorStat==0)&&(lakb[2]._ch_curr/10>Ibmax))Ibmax=lakb[2]._ch_curr/10;
;;;1817   */
;;;1818   if((NUMBAT_TELECORE>0)&&(bat[0]._Ib/10>Ibmax))Ibmax=bat[0]._Ib/10;
;;;1819   if((NUMBAT_TELECORE>1)&&(bat[1]._Ib/10>Ibmax))Ibmax=bat[1]._Ib/10;
;;;1820   //if((BAT_IS_ON[0]==bisON)&&(bat[0]._Ub>200)) Ibmax=bat[0]._Ib/1;
;;;1821   //if((BAT_IS_ON[1]==bisON)&&(bat[1]._Ub>200)&&(bat[1]._Ib>bat[0]._Ib)) Ibmax=bat[1]._Ib;
;;;1822   #endif
;;;1823   //Ibmax=bat[0]._Ib;
;;;1824   //if((AUSW_MAIN==22063)||(AUSW_MAIN==22023)||(AUSW_MAIN==22043))Ibmax=Ib_ips_termokompensat;
;;;1825   
;;;1826   #ifdef UKU_TELECORE2017
;;;1827   Ibmax=0;
;;;1828   if((NUMBAT_TELECORE>0)&&(bat[0]._Ib/10>Ibmax))Ibmax=bat[0]._Ib/10;
;;;1829   if((NUMBAT_TELECORE>1)&&(bat[1]._Ib/10>Ibmax))Ibmax=bat[1]._Ib/10;
;;;1830   #endif
;;;1831   
;;;1832   #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;1833   Ibmax=Ib_ips_termokompensat;
0013b2  f8bc0000          LDRH     r0,[r12,#0]  ; Ib_ips_termokompensat
0013b6  8738              STRH     r0,[r7,#0x38]
;;;1834   #endif
;;;1835   for(i=0;i<NUMIST;i++)
0013b8  f04f0100          MOV      r1,#0
0013bc  e02f              B        |L1.5150|
                  |L1.5054|
;;;1836   	{
;;;1837   	if(bps[i]._cnt<25)
0013be  ebc100c1          RSB      r0,r1,r1,LSL #3
0013c2  eb001001          ADD      r0,r0,r1,LSL #4
0013c6  eb040080          ADD      r0,r4,r0,LSL #2
0013ca  78c6              LDRB     r6,[r0,#3]
0013cc  2e19              CMP      r6,#0x19
0013ce  d21c              BCS      |L1.5130|
;;;1838        	{
;;;1839        	bps[i]._Ii=bps[i]._buff[0]+(bps[i]._buff[1]*256);
0013d0  7986              LDRB     r6,[r0,#6]
0013d2  79c7              LDRB     r7,[r0,#7]
0013d4  eb062607          ADD      r6,r6,r7,LSL #8
0013d8  6246              STR      r6,[r0,#0x24]
;;;1840        	bps[i]._Uin=bps[i]._buff[2]+(bps[i]._buff[3]*256);
0013da  7a06              LDRB     r6,[r0,#8]
0013dc  7a47              LDRB     r7,[r0,#9]
0013de  eb062607          ADD      r6,r6,r7,LSL #8
0013e2  6206              STR      r6,[r0,#0x20]
;;;1841        	bps[i]._Uii=bps[i]._buff[4]+(bps[i]._buff[5]*256);
0013e4  7a86              LDRB     r6,[r0,#0xa]
0013e6  7ac7              LDRB     r7,[r0,#0xb]
0013e8  eb062607          ADD      r6,r6,r7,LSL #8
0013ec  61c6              STR      r6,[r0,#0x1c]
;;;1842        	bps[i]._Ti=(signed)(bps[i]._buff[6]);
0013ee  7b06              LDRB     r6,[r0,#0xc]
0013f0  6286              STR      r6,[r0,#0x28]
;;;1843        	bps[i]._adr_ee=bps[i]._buff[7];
0013f2  7b46              LDRB     r6,[r0,#0xd]
0013f4  f8806052          STRB     r6,[r0,#0x52]
;;;1844        	bps[i]._flags_tm=bps[i]._buff[8];
0013f8  7b86              LDRB     r6,[r0,#0xe]
0013fa  f8806042          STRB     r6,[r0,#0x42]
;;;1845   	     bps[i]._rotor=bps[i]._buff[10]+(bps[i]._buff[11]*256);    
0013fe  7c06              LDRB     r6,[r0,#0x10]
001400  7c47              LDRB     r7,[r0,#0x11]
001402  eb062607          ADD      r6,r6,r7,LSL #8
001406  64c6              STR      r6,[r0,#0x4c]
001408  e006              B        |L1.5144|
                  |L1.5130|
;;;1846        	} 
;;;1847   	else 
;;;1848        	{
;;;1849        	bps[i]._Uii=0; 
00140a  61c3              STR      r3,[r0,#0x1c]
;;;1850        	bps[i]._Ii=0;
00140c  6243              STR      r3,[r0,#0x24]
;;;1851        	bps[i]._Uin=0;
00140e  6203              STR      r3,[r0,#0x20]
;;;1852        	bps[i]._Ti=0;
001410  6283              STR      r3,[r0,#0x28]
;;;1853        	bps[i]._flags_tm=0; 
001412  f8803042          STRB     r3,[r0,#0x42]
;;;1854   	     bps[i]._rotor=0;    
001416  64c3              STR      r3,[r0,#0x4c]
                  |L1.5144|
001418  f1010101          ADD      r1,r1,#1              ;1835
00141c  b2c9              UXTB     r1,r1                 ;1835
                  |L1.5150|
00141e  4291              CMP      r1,r2                 ;1835
001420  dbcd              BLT      |L1.5054|
;;;1855        	}
;;;1856        
;;;1857        }
;;;1858   
;;;1859   load_I=0;
001422  4e97              LDR      r6,|L1.5760|
;;;1860   #ifdef TELECORE
;;;1861   
;;;1862   /*for(i=0;i<NUMBAT_TELECORE;i++)
;;;1863   	{
;;;1864   	load_I-=lakb[i]._ch_curr/10;
;;;1865   	}*/
;;;1866   load_I=-(bat[0]._Ib/10)-(bat[1]._Ib/10);
;;;1867   #elif UKU_TELECORE2017
;;;1868   load_I=-(bat[0]._Ib/10)-(bat[1]._Ib/10);
;;;1869   #else
;;;1870   load_I=-(bat[0]._Ib/10)-(bat[1]._Ib/10);
001424  f9b51008          LDRSH    r1,[r5,#8]  ; bat
001428  f04f000a          MOV      r0,#0xa
00142c  fb91f1f0          SDIV     r1,r1,r0
001430  f9b55054          LDRSH    r5,[r5,#0x54]  ; bat
001434  fb95f0f0          SDIV     r0,r5,r0
001438  4408              ADD      r0,r0,r1
00143a  f1c00000          RSB      r0,r0,#0
00143e  b207              SXTH     r7,r0
001440  8037              STRH     r7,[r6,#0]
;;;1871   #endif
;;;1872   Isumm=0;
001442  4d90              LDR      r5,|L1.5764|
001444  802b              STRH     r3,[r5,#0]
;;;1873   
;;;1874   for(i=0;i<NUMIST;i++)
001446  f04f0000          MOV      r0,#0
00144a  e012              B        |L1.5234|
                  |L1.5196|
;;;1875        {
;;;1876        if(bps[i]._cnt<5)Isumm+=bps[i]._Ii;
00144c  ebc001c0          RSB      r1,r0,r0,LSL #3
001450  eb011100          ADD      r1,r1,r0,LSL #4
001454  eb040181          ADD      r1,r4,r1,LSL #2
001458  f891c003          LDRB     r12,[r1,#3]
00145c  f1bc0f05          CMP      r12,#5
001460  d204              BCS      |L1.5228|
001462  6a49              LDR      r1,[r1,#0x24]
001464  f8b5c000          LDRH     r12,[r5,#0]  ; Isumm
001468  4461              ADD      r1,r1,r12
00146a  8029              STRH     r1,[r5,#0]
                  |L1.5228|
00146c  f1000001          ADD      r0,r0,#1              ;1874
001470  b2c0              UXTB     r0,r0                 ;1874
                  |L1.5234|
001472  4290              CMP      r0,r2                 ;1874
001474  dbea              BLT      |L1.5196|
;;;1877        }  
;;;1878        
;;;1879   load_I=load_I+Isumm;
001476  8828              LDRH     r0,[r5,#0]  ; Isumm
001478  4438              ADD      r0,r0,r7
00147a  b200              SXTH     r0,r0
00147c  8030              STRH     r0,[r6,#0]
;;;1880   if(load_I<0)load_I=0;
00147e  2800              CMP      r0,#0
001480  da00              BGE      |L1.5252|
001482  8033              STRH     r3,[r6,#0]
                  |L1.5252|
;;;1881   
;;;1882   #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;1883   load_I=0;
001484  8033              STRH     r3,[r6,#0]
;;;1884   
;;;1885   Isumm=0;
001486  802b              STRH     r3,[r5,#0]
;;;1886   
;;;1887   for(i=0;i<NUMIST;i++)
001488  f04f0000          MOV      r0,#0
00148c  e00f              B        |L1.5294|
                  |L1.5262|
;;;1888        {
;;;1889        if(bps[i]._cnt<5)Isumm+=bps[i]._Ii;
00148e  ebc001c0          RSB      r1,r0,r0,LSL #3
001492  eb011100          ADD      r1,r1,r0,LSL #4
001496  eb040181          ADD      r1,r4,r1,LSL #2
00149a  78cf              LDRB     r7,[r1,#3]
00149c  2f05              CMP      r7,#5
00149e  d203              BCS      |L1.5288|
0014a0  6a49              LDR      r1,[r1,#0x24]
0014a2  882f              LDRH     r7,[r5,#0]  ; Isumm
0014a4  4439              ADD      r1,r1,r7
0014a6  8029              STRH     r1,[r5,#0]
                  |L1.5288|
0014a8  f1000001          ADD      r0,r0,#1              ;1887
0014ac  b2c0              UXTB     r0,r0                 ;1887
                  |L1.5294|
0014ae  4290              CMP      r0,r2                 ;1887
0014b0  dbed              BLT      |L1.5262|
;;;1890        }  
;;;1891        
;;;1892   load_I=load_I+Isumm;
0014b2  8829              LDRH     r1,[r5,#0]  ; Isumm
0014b4  eb030001          ADD      r0,r3,r1
0014b8  b200              SXTH     r0,r0
0014ba  8030              STRH     r0,[r6,#0]
;;;1893   if(load_I<0)load_I=0;
0014bc  2800              CMP      r0,#0
0014be  da00              BGE      |L1.5314|
0014c0  8033              STRH     r3,[r6,#0]
                  |L1.5314|
;;;1894   
;;;1895   #endif
;;;1896   
;;;1897   
;;;1898   
;;;1899   #ifdef UKU_GLONASS
;;;1900   inv[0]._Uio=6;
;;;1901   if (NUMINV)
;;;1902   	{
;;;1903   	for(i=0;i<NUMINV;i++)
;;;1904   		{
;;;1905   		if(bps[i+first_inv_slot]._cnt<25)
;;;1906        		{
;;;1907        		inv[i]._Ii=bps[i+first_inv_slot]._buff[0]+(bps[i+first_inv_slot]._buff[1]*256);
;;;1908        		inv[i]._Uin=bps[i+first_inv_slot]._buff[2]+(bps[i+first_inv_slot]._buff[3]*256);
;;;1909        		inv[i]._Uio=bps[i+first_inv_slot]._buff[4]+(bps[i+first_inv_slot]._buff[5]*256);
;;;1910        		inv[i]._Ti=(signed)(bps[i+first_inv_slot]._buff[6]);
;;;1911        		inv[i]._flags_tm=bps[i+first_inv_slot]._buff[8];
;;;1912   	    	//	inv[i]._rotor=bps[i+first_inv_slot]._buff[10]+(bps[i+first_inv_slot]._buff[11]*256);
;;;1913   			inv[i]._cnt=0;    
;;;1914        		} 
;;;1915   		else 
;;;1916        		{
;;;1917        		inv[i]._Uio=0; 
;;;1918        		inv[i]._Ii=0;
;;;1919        		inv[i]._Uin=0;
;;;1920        		inv[i]._Ti=0;
;;;1921        		inv[i]._flags_tm=0; 
;;;1922   //	     	inv[i]._rotor0;
;;;1923   			inv[i]._cnt=25;    
;;;1924        		}
;;;1925        	}
;;;1926      	}
;;;1927   #endif
;;;1928   
;;;1929   #ifndef UKU_GLONASS
;;;1930   if (NUMINV)
0014c2  4871              LDR      r0,|L1.5768|
0014c4  f9b05000          LDRSH    r5,[r0,#0]  ; NUMINV
0014c8  2d00              CMP      r5,#0
0014ca  d066              BEQ      |L1.5530|
;;;1931   	{
;;;1932   	for(i=0;i<NUMINV;i++)
0014cc  f04f0200          MOV      r2,#0
;;;1933   		{
;;;1934   		if(bps[i+20]._cnt<25)
;;;1935        		{
;;;1936        		inv[i]._Ii=bps[i+20]._buff[0]+(bps[i+20]._buff[1]*256);
0014d0  4e6e              LDR      r6,|L1.5772|
0014d2  e060              B        |L1.5526|
                  |L1.5332|
0014d4  f1020014          ADD      r0,r2,#0x14           ;1934
0014d8  ebc001c0          RSB      r1,r0,r0,LSL #3       ;1934
0014dc  eb011000          ADD      r0,r1,r0,LSL #4       ;1934
0014e0  eb040080          ADD      r0,r4,r0,LSL #2       ;1934
0014e4  78c1              LDRB     r1,[r0,#3]            ;1934
0014e6  2919              CMP      r1,#0x19              ;1934
0014e8  d239              BCS      |L1.5470|
0014ea  7981              LDRB     r1,[r0,#6]
0014ec  79c7              LDRB     r7,[r0,#7]
0014ee  eb012707          ADD      r7,r1,r7,LSL #8
0014f2  eb020142          ADD      r1,r2,r2,LSL #1
0014f6  eb061141          ADD      r1,r6,r1,LSL #5
0014fa  61cf              STR      r7,[r1,#0x1c]
;;;1937        		inv[i]._Pio=bps[i+20]._buff[2]+(bps[i+20]._buff[3]*256);
0014fc  7a07              LDRB     r7,[r0,#8]
0014fe  f890c009          LDRB     r12,[r0,#9]
001502  eb07270c          ADD      r7,r7,r12,LSL #8
001506  62cf              STR      r7,[r1,#0x2c]
;;;1938        		inv[i]._Uio=bps[i+20]._buff[4]+(bps[i+20]._buff[5]*256);
001508  7a87              LDRB     r7,[r0,#0xa]
00150a  f890c00b          LDRB     r12,[r0,#0xb]
00150e  eb07270c          ADD      r7,r7,r12,LSL #8
001512  618f              STR      r7,[r1,#0x18]
;;;1939        		inv[i]._Ti=(signed)(bps[i+20]._buff[6]);
001514  7b07              LDRB     r7,[r0,#0xc]
001516  620f              STR      r7,[r1,#0x20]
;;;1940        		inv[i]._flags_tm=bps[i+20]._buff[7];
001518  7b47              LDRB     r7,[r0,#0xd]
00151a  f8817046          STRB     r7,[r1,#0x46]
;;;1941        		inv[i]._Uin=bps[i+20]._buff[8]+(bps[i+20]._buff[9]*256);
00151e  7b87              LDRB     r7,[r0,#0xe]
001520  f890c00f          LDRB     r12,[r0,#0xf]
001524  eb07270c          ADD      r7,r7,r12,LSL #8
001528  628f              STR      r7,[r1,#0x28]
;;;1942        		inv[i]._Uil=bps[i+20]._buff[10]+(bps[i+20]._buff[11]*256);
00152a  7c07              LDRB     r7,[r0,#0x10]
00152c  f890c011          LDRB     r12,[r0,#0x11]
001530  eb07270c          ADD      r7,r7,r12,LSL #8
001534  624f              STR      r7,[r1,#0x24]
;;;1943   			inv[i]._cnt=0;
001536  708b              STRB     r3,[r1,#2]
;;;1944   			inv[i]._Uoutmin=bps[i+20]._buff[12]; 
001538  7c87              LDRB     r7,[r0,#0x12]
00153a  f8817059          STRB     r7,[r1,#0x59]
;;;1945   			inv[i]._Uoutmax=bps[i+20]._buff[13]; 
00153e  7cc7              LDRB     r7,[r0,#0x13]
001540  f881705a          STRB     r7,[r1,#0x5a]
;;;1946   			inv[i]._Pnom=bps[i+20]._buff[14]; 
001544  7d07              LDRB     r7,[r0,#0x14]
001546  f8817058          STRB     r7,[r1,#0x58]
;;;1947   			inv[i]._net_contr_en=bps[i+20]._buff[15];
00154a  7d47              LDRB     r7,[r0,#0x15]
00154c  f881705b          STRB     r7,[r1,#0x5b]
;;;1948   			inv[i]._pwm_en=bps[i+20]._buff[16];  
001550  7d87              LDRB     r7,[r0,#0x16]
001552  f881705c          STRB     r7,[r1,#0x5c]
;;;1949   			inv[i]._phase_mode=bps[i+20]._buff[17];  
001556  7dc0              LDRB     r0,[r0,#0x17]
001558  f881005d          STRB     r0,[r1,#0x5d]
00155c  e018              B        |L1.5520|
                  |L1.5470|
;;;1950        		} 
;;;1951   		else 
;;;1952        		{
;;;1953         		inv[i]._Ii=0;
00155e  eb020042          ADD      r0,r2,r2,LSL #1
001562  eb061040          ADD      r0,r6,r0,LSL #5
001566  61c3              STR      r3,[r0,#0x1c]
;;;1954   			inv[i]._Pio=0;
001568  62c3              STR      r3,[r0,#0x2c]
;;;1955   			inv[i]._Uio=0;
00156a  6183              STR      r3,[r0,#0x18]
;;;1956        		inv[i]._Ti=0;
00156c  6203              STR      r3,[r0,#0x20]
;;;1957        		inv[i]._flags_tm=0; 
00156e  f8803046          STRB     r3,[r0,#0x46]
;;;1958        		inv[i]._Uil=0;
001572  6243              STR      r3,[r0,#0x24]
;;;1959        		inv[i]._Uin=0;
001574  6283              STR      r3,[r0,#0x28]
;;;1960   			inv[i]._cnt=25; 
001576  f04f0119          MOV      r1,#0x19
00157a  7081              STRB     r1,[r0,#2]
;;;1961   			inv[i]._Uoutmin=0; 
00157c  f8803059          STRB     r3,[r0,#0x59]
;;;1962   			inv[i]._Uoutmax=0; 
001580  f880305a          STRB     r3,[r0,#0x5a]
;;;1963   			inv[i]._Pnom=0; 
001584  f8803058          STRB     r3,[r0,#0x58]
;;;1964   			inv[i]._net_contr_en=0;
001588  f880305b          STRB     r3,[r0,#0x5b]
;;;1965   			inv[i]._pwm_en=0;   
00158c  f880305c          STRB     r3,[r0,#0x5c]
                  |L1.5520|
001590  f1020201          ADD      r2,r2,#1              ;1932
001594  b2d2              UXTB     r2,r2                 ;1932
                  |L1.5526|
001596  42aa              CMP      r2,r5                 ;1932
001598  db9c              BLT      |L1.5332|
                  |L1.5530|
;;;1966   			   
;;;1967        		}
;;;1968        	}
;;;1969      	}
;;;1970   #endif
;;;1971   
;;;1972   #ifdef GLADKOV
;;;1973   inv[0]._Ii=bps[4]._buff[0]+(bps[4]._buff[1]*256);
;;;1974   inv[0]._Pio=bps[4]._buff[2]+(bps[4]._buff[3]*256);
;;;1975   inv[0]._Uio=bps[4]._buff[4]+(bps[4]._buff[5]*256);
;;;1976   inv[0]._Ti=(signed)(bps[4]._buff[6]);
;;;1977   inv[0]._flags_tm=bps[4]._buff[7];
;;;1978   inv[0]._Uin=bps[4]._buff[8]+(bps[4]._buff[9]*256);
;;;1979   inv[0]._Uil=bps[4]._buff[10]+(bps[4]._buff[11]*256);
;;;1980   inv[0]._cnt=0;    
;;;1981   
;;;1982   inv[1]._Ii=bps[21]._buff[0]+(bps[21]._buff[1]*256);
;;;1983   inv[1]._Pio=bps[21]._buff[2]+(bps[21]._buff[3]*256);
;;;1984   inv[1]._Uio=bps[21]._buff[4]+(bps[21]._buff[5]*256);
;;;1985   inv[1]._Ti=(signed)(bps[21]._buff[6]);
;;;1986   inv[1]._flags_tm=bps[21]._buff[7];
;;;1987   inv[1]._Uin=bps[21]._buff[8]+(bps[21]._buff[9]*256);
;;;1988   inv[1]._Uil=bps[21]._buff[10]+(bps[21]._buff[11]*256);
;;;1989   inv[1]._cnt=0;    
;;;1990   #endif
;;;1991   
;;;1992   /*
;;;1993   if((BAT_IS_ON[0]==bisON)&&(BAT_TYPE==1))
;;;1994   	{
;;;1995   	lakb[0]._battCommState=0;
;;;1996   	if(lakb[0]._cnt>10)lakb[0]._battCommState=2;
;;;1997   	else if(lakb[0]._bRS485ERR==1)lakb[0]._battCommState=1;
;;;1998   	
;;;1999   	if(lakb[0]._battCommState==0)
;;;2000   		{	
;;;2001   		bat[0]._Ub=(signed short)((lakb[0]._tot_bat_volt+5)/10);
;;;2002   		bat[0]._Ib=(signed short)lakb[0]._ch_curr;
;;;2003   		if(lakb[0]._dsch_curr) bat[0]._Ib=(signed short) (-lakb[0]._dsch_curr);
;;;2004   		bat[0]._Tb=(signed short)lakb[0]._max_cell_temp;
;;;2005   		}
;;;2006   	}
;;;2007   */
;;;2008   
;;;2009   #ifdef UKU_TELECORE2015
;;;2010   
;;;2011   	if(BAT_TYPE==2)
;;;2012   		{
;;;2013   		lakb[0]._ch_curr/*temp_SS*/=((ascii2halFhex(liBatteryInBuff[113]))<<12)+
;;;2014   					 		((ascii2halFhex(liBatteryInBuff[114]))<<8)+
;;;2015   							((ascii2halFhex(liBatteryInBuff[115]))<<4)+
;;;2016   							((ascii2halFhex(liBatteryInBuff[116])));
;;;2017   		
;;;2018   		/*if(temp_SS&0x8000)		lakb[0]._ch_curr=~temp_SS;
;;;2019   		else 				lakb[0]._ch_curr=temp_SS;*/
;;;2020   	
;;;2021   		lakb[0]._tot_bat_volt=	(unsigned short)(((ascii2halFhex(liBatteryInBuff[117]))<<12)+
;;;2022   							((ascii2halFhex(liBatteryInBuff[118]))<<8)+
;;;2023   							((ascii2halFhex(liBatteryInBuff[119]))<<4)+
;;;2024   							((ascii2halFhex(liBatteryInBuff[120]))))/100;
;;;2025   	
;;;2026   		lakb[0]._max_cell_temp= 	(((ascii2halFhex(liBatteryInBuff[93]))<<12)+
;;;2027   							((ascii2halFhex(liBatteryInBuff[94]))<<8)+
;;;2028   							((ascii2halFhex(liBatteryInBuff[95]))<<4)+
;;;2029   							((ascii2halFhex(liBatteryInBuff[96]))))/10-273;
;;;2030   	
;;;2031   		lakb[0]._s_o_c_abs=		(unsigned short)((ascii2halFhex(liBatteryInBuff[121]))<<12)+
;;;2032   							((ascii2halFhex(liBatteryInBuff[122]))<<8)+
;;;2033   							((ascii2halFhex(liBatteryInBuff[123]))<<4)+
;;;2034   							((ascii2halFhex(liBatteryInBuff[124])));
;;;2035   	
;;;2036   		lakb[0]._rat_cap=		(unsigned short)((ascii2halFhex(liBatteryInBuff[127]))<<12)+
;;;2037   							((ascii2halFhex(liBatteryInBuff[128]))<<8)+
;;;2038   							((ascii2halFhex(liBatteryInBuff[129]))<<4)+
;;;2039   							((ascii2halFhex(liBatteryInBuff[130])));
;;;2040   	
;;;2041   		lakb[0]._s_o_c=		lakb[0]._s_o_c_abs/(lakb[0]._rat_cap/100);
;;;2042   	
;;;2043   	
;;;2044   	/*	lakb[0]._rat_cap= (lakb_damp[i][13]*256)+ lakb_damp[i][14];
;;;2045   		lakb[0]._max_cell_volt= (lakb_damp[i][0]*256)+ lakb_damp[i][1];
;;;2046   		lakb[0]._min_cell_volt= (lakb_damp[i][2]*256)+ lakb_damp[i][3];
;;;2047   		lakb[0]._max_cell_temp= lakb_damp[i][4];
;;;2048   		lakb[0]._min_cell_temp= lakb_damp[i][5];
;;;2049   		lakb[0]._tot_bat_volt= (lakb_damp[i][6]*256)+ lakb_damp[i][7];
;;;2050   		lakb[0]._ch_curr= (lakb_damp[i][8]*256)+ lakb_damp[i][8];
;;;2051   		lakb[0]._dsch_curr= (lakb_damp[i][10]*256)+ lakb_damp[i][11];
;;;2052   		lakb[0]._s_o_c= lakb_damp[i][12];
;;;2053   		lakb[0]._r_b_t= lakb_damp[i][15];
;;;2054   		lakb[0]._c_c_l_v= (lakb_damp[i][16]*256)+ lakb_damp[i][17];
;;;2055   		lakb[0]._s_o_h= lakb_damp[i][18];
;;;2056   	
;;;2057   		if(lakb[i]._rat_cap==0)
;;;2058   			{
;;;2059   			if(lakb[i]._isOnCnt)
;;;2060   				{
;;;2061   				lakb[i]._isOnCnt--;
;;;2062   				if(lakb[i]._isOnCnt==0)
;;;2063   					{
;;;2064   					if(lakb[i]._battIsOn!=0) bLAKB_KONF_CH=1;
;;;2065   					}
;;;2066   				}
;;;2067   			}
;;;2068   		else 
;;;2069   			{
;;;2070   			if(lakb[i]._isOnCnt<50)
;;;2071   				{
;;;2072   				lakb[i]._isOnCnt++;
;;;2073   				if(lakb[i]._isOnCnt==50)
;;;2074   					{
;;;2075   					if(lakb[i]._battIsOn!=1) bLAKB_KONF_CH=1;
;;;2076   					}
;;;2077   				}
;;;2078   			}
;;;2079   		gran(&lakb[i]._isOnCnt,0,50);*/
;;;2080   		}
;;;2081   	else if(BAT_TYPE==3)
;;;2082   		{
;;;2083   		//short numOfPacks;
;;;2084   		//short numOfCells, numOfTemperCells, baseOfData;
;;;2085   		
;;;2086   		#ifndef UKU_TELECORE2016
;;;2087   		numOfCells=((ascii2halFhex(liBatteryInBuff[17]))<<4)+((ascii2halFhex(liBatteryInBuff[18])));
;;;2088   		numOfTemperCells=((ascii2halFhex(liBatteryInBuff[17+(numOfCells*4)+2]))<<4)+((ascii2halFhex(liBatteryInBuff[18+(numOfCells*4)+2])));
;;;2089   		numOfPacks=((ascii2halFhex(liBatteryInBuff[15]))<<4)+((ascii2halFhex(liBatteryInBuff[16])));
;;;2090   		if(numOfPacks)numOfPacks-=1;
;;;2091   		if((numOfPacks<0)||(numOfPacks>NUMBAT_TELECORE))numOfPacks=0;
;;;2092   		plazma_numOfCells=numOfCells;
;;;2093   		plazma_numOfTemperCells=numOfTemperCells;
;;;2094   		plazma_numOfPacks=numOfPacks;
;;;2095   
;;;2096   
;;;2097   		baseOfData=16+(numOfCells*4)+2+(numOfTemperCells*4)+2;
;;;2098   
;;;2099   		lakb[numOfPacks]._ch_curr=(signed short)(
;;;2100   							((ascii2halFhex(liBatteryInBuff[1+baseOfData]))<<12)+
;;;2101   							((ascii2halFhex(liBatteryInBuff[2+baseOfData]))<<8)+
;;;2102   							((ascii2halFhex(liBatteryInBuff[3+baseOfData]))<<4)+
;;;2103   							((ascii2halFhex(liBatteryInBuff[4+baseOfData])))
;;;2104   							);	  
;;;2105   
;;;2106   		lakb[numOfPacks]._tot_bat_volt=(signed short)(
;;;2107   							((ascii2halFhex(liBatteryInBuff[1+baseOfData+4]))<<12)+
;;;2108   							((ascii2halFhex(liBatteryInBuff[2+baseOfData+4]))<<8)+
;;;2109   							((ascii2halFhex(liBatteryInBuff[3+baseOfData+4]))<<4)+
;;;2110   							((ascii2halFhex(liBatteryInBuff[4+baseOfData+4])))
;;;2111   							)/10;
;;;2112   
;;;2113   		lakb[numOfPacks]._max_cell_temp=(signed short)(
;;;2114   							((ascii2halFhex(liBatteryInBuff[1+baseOfData-4]))<<12)+
;;;2115   							((ascii2halFhex(liBatteryInBuff[2+baseOfData-4]))<<8)+
;;;2116   							((ascii2halFhex(liBatteryInBuff[3+baseOfData-4]))<<4)+
;;;2117   							((ascii2halFhex(liBatteryInBuff[4+baseOfData-4])))
;;;2118   							)-2730;
;;;2119   
;;;2120   		lakb[numOfPacks]._s_o_c=(signed short)(
;;;2121   							((ascii2halFhex(liBatteryInBuff[1+baseOfData+8]))<<12)+
;;;2122   							((ascii2halFhex(liBatteryInBuff[2+baseOfData+8]))<<8)+
;;;2123   							((ascii2halFhex(liBatteryInBuff[3+baseOfData+8]))<<4)+
;;;2124   							((ascii2halFhex(liBatteryInBuff[4+baseOfData+8])))
;;;2125   							)/10;
;;;2126   
;;;2127   		lakb[numOfPacks]._s_o_h=(signed short)(
;;;2128   							((ascii2halFhex(liBatteryInBuff[1+baseOfData+14]))<<12)+
;;;2129   							((ascii2halFhex(liBatteryInBuff[2+baseOfData+14]))<<8)+
;;;2130   							((ascii2halFhex(liBatteryInBuff[3+baseOfData+14]))<<4)+
;;;2131   							((ascii2halFhex(liBatteryInBuff[4+baseOfData+14])))
;;;2132   							)/10;
;;;2133   		#endif
;;;2134   		
;;;2135   		#ifdef UKU_TELECORE2016
;;;2136   		{
;;;2137   		char i;
;;;2138   		
;;;2139   		for(i=0;i<NUMBAT_TELECORE;i++)
;;;2140   			{
;;;2141   			lakb[i]._s_o_c_percent= (signed short)(((unsigned long)lakb[i]._s_o_c*100UL)/(unsigned long)lakb[i]._s_o_h);
;;;2142   			}
;;;2143   		}
;;;2144   		#endif
;;;2145   		
;;;2146   										  
;;;2147   		}
;;;2148   	
;;;2149   if(sacredSunSilentCnt<3) 
;;;2150   	{
;;;2151       	bat[0]._Ub=lakb[0]._tot_bat_volt;
;;;2152       	bat[0]._Tb=lakb[0]._max_cell_temp;
;;;2153      	//bat[0]._Ib=lakb[0]._ch_curr/10;
;;;2154   	}
;;;2155   else 
;;;2156   	{
;;;2157       	//bat[0]._Ub=0;
;;;2158       	//bat[0]._Tb=0;
;;;2159      	//bat[0]._Ib=0;
;;;2160   	}
;;;2161   
;;;2162   if(BAT_TYPE==1)
;;;2163   	{
;;;2164   	char i;
;;;2165   	for(i=0;i<1;i++)
;;;2166   		{
;;;2167   		lakb[i]._rat_cap= (lakb_damp[i][13]*256)+ lakb_damp[i][14];
;;;2168   		lakb[i]._max_cell_volt= (lakb_damp[i][0]*256)+ lakb_damp[i][1];
;;;2169   		lakb[i]._min_cell_volt= (lakb_damp[i][2]*256)+ lakb_damp[i][3];
;;;2170   		lakb[i]._max_cell_temp= lakb_damp[i][4];
;;;2171   		lakb[i]._min_cell_temp= lakb_damp[i][5];
;;;2172   		lakb[i]._tot_bat_volt= (lakb_damp[i][6]*256)+ lakb_damp[i][7];
;;;2173   		lakb[i]._ch_curr= (lakb_damp[i][8]*256)+ lakb_damp[i][9];
;;;2174   		lakb[i]._dsch_curr= (lakb_damp[i][10]*256)+ lakb_damp[i][11];
;;;2175   		lakb[i]._s_o_c= lakb_damp[i][12];
;;;2176   		lakb[i]._r_b_t= lakb_damp[i][15];
;;;2177   		lakb[i]._c_c_l_v= (lakb_damp[i][16]*256)+ lakb_damp[i][17];
;;;2178   		lakb[i]._s_o_h= lakb_damp[i][18];
;;;2179   		lakb[i]._flags1= lakb_damp[i][34];
;;;2180   		lakb[i]._flags2= lakb_damp[i][35];
;;;2181   		lakb[i]._b_p_ser_num= lakb_damp[i][36];
;;;2182   
;;;2183   /*		if(lakb[i]._rat_cap==0)
;;;2184   			{
;;;2185   			if(lakb[i]._isOnCnt)
;;;2186   				{
;;;2187   				lakb[i]._isOnCnt--;
;;;2188   				if(lakb[i]._isOnCnt==0)
;;;2189   					{
;;;2190   					if(lakb[i]._battIsOn!=0) bLAKB_KONF_CH=1;
;;;2191   					}
;;;2192   				}
;;;2193   			}
;;;2194   		else 
;;;2195   			{
;;;2196   			if(lakb[i]._isOnCnt<50)
;;;2197   				{
;;;2198   				lakb[i]._isOnCnt++;
;;;2199   				if(lakb[i]._isOnCnt==50)
;;;2200   					{
;;;2201   					if(lakb[i]._battIsOn!=1) bLAKB_KONF_CH=1;
;;;2202   					}
;;;2203   				}
;;;2204   			} */
;;;2205   		gran(&lakb[i]._isOnCnt,0,50);
;;;2206   	 	}
;;;2207   
;;;2208   	if(lakb_damp[0][41]==100)
;;;2209   		{
;;;2210   		li_bat._485Error=1;
;;;2211   		}
;;;2212   	if(lakb_damp[0][41]==0)
;;;2213   		{
;;;2214   		//if(bRS485ERR)bLAKB_KONF_CH=1;
;;;2215   		li_bat._485Error=0;
;;;2216   		}
;;;2217   	li_bat._485ErrorCnt=lakb_damp[0][41];
;;;2218   
;;;2219   
;;;2220   	}
;;;2221   
;;;2222   
;;;2223   #endif
;;;2224   
;;;2225   		#ifdef UKU_TELECORE2017
;;;2226   		{
;;;2227   		char i;
;;;2228   		
;;;2229   		for(i=0;i<NUMBAT_TELECORE;i++)
;;;2230   			{
;;;2231   			lakb[i]._s_o_c_percent= (signed short)(((unsigned long)lakb[i]._s_o_c*100UL)/(unsigned long)lakb[i]._s_o_h);
;;;2232   			}
;;;2233   		}
;;;2234   		#endif
;;;2235   #ifdef UKU_TELECORE2015
;;;2236   //   
;;;2237   //TODO          
;;;2238   li_bat._batStat=bsOK;
;;;2239   if(BAT_TYPE==1) //COSLIGHT
;;;2240   	{
;;;2241   	if(li_bat._batStat==bsOK)
;;;2242   		{
;;;2243   		li_bat._Ub=lakb[0]._tot_bat_volt/10;
;;;2244   
;;;2245   		if(lakb[0]._ch_curr)li_bat._Ib=lakb[0]._ch_curr/10;
;;;2246   		else if(lakb[0]._dsch_curr) li_bat._Ib=bat[0]._Ib/10;//lakb[0]._dsch_curr/10;
;;;2247   	
;;;2248   		li_bat._ratCap=lakb[0]._rat_cap/100;
;;;2249   		li_bat._soc=lakb[0]._s_o_c;
;;;2250   		li_bat._soh=lakb[0]._s_o_h;
;;;2251   		li_bat._cclv=lakb[0]._c_c_l_v/10;
;;;2252   		li_bat._Tb=lakb[0]._max_cell_temp;
;;;2253   		li_bat._rbt=lakb[0]._r_b_t;
;;;2254   		}
;;;2255   	else 
;;;2256   		{
;;;2257   		li_bat._Ub=bat[0]._Ub;
;;;2258   		li_bat._Ib=bat[0]._Ib/10;
;;;2259   		li_bat._Tb=bat[0]._Tb;
;;;2260   		}
;;;2261   
;;;2262   	if((li_bat._485Error)||(li_bat._canError))
;;;2263   		{
;;;2264   		li_bat._batStat=bsOFF;
;;;2265   		}
;;;2266   	else li_bat._batStat=bsOK;
;;;2267   	}
;;;2268   else if(BAT_TYPE==2) //SACRED SUN
;;;2269   	{
;;;2270   	}
;;;2271   else if(BAT_TYPE==3) //ZTT
;;;2272   	{
;;;2273   	if(li_bat._batStat==bsOK)
;;;2274   		{
;;;2275   
;;;2276   		}
;;;2277   	}
;;;2278   #endif
;;;2279   
;;;2280   
;;;2281   /*
;;;2282   if((BAT_IS_ON[0]==bisON)&&(BAT_TYPE[0]==1)&&(BAT_LINK==0))
;;;2283   	{
;;;2284   
;;;2285   
;;;2286   	if(bat_drv_rx_buff[13]<=0x39)bbb[0]=bat_drv_rx_buff[13]-0x30;
;;;2287   	else bbb[0]=bat_drv_rx_buff[13]-55;
;;;2288   	if(bat_drv_rx_buff[14]<=0x39)bbb[1]=bat_drv_rx_buff[14]-0x30;
;;;2289   	else bbb[1]=bat_drv_rx_buff[14]-55;
;;;2290   	if(bat_drv_rx_buff[15]<=0x39)bbb[2]=bat_drv_rx_buff[15]-0x30;
;;;2291   	else bbb[2]=bat_drv_rx_buff[15]-55;
;;;2292   	if(bat_drv_rx_buff[16]<=0x39)bbb[3]=bat_drv_rx_buff[16]-0x30;
;;;2293   	else bbb[3]=bat_drv_rx_buff[16]-55;
;;;2294   
;;;2295   	tempSS=0;
;;;2296   	tempSS=((bbb[0]*4096)+(bbb[1]*256)+(bbb[2]*16)+bbb[3]);
;;;2297   
;;;2298   	bat[0]._max_cell_volt=(tempSS+5)/10;
;;;2299   
;;;2300   	if(bat_drv_rx_buff[17]<=0x39)bbb[0]=bat_drv_rx_buff[17]-0x30;
;;;2301   	else bbb[0]=bat_drv_rx_buff[17]-55;
;;;2302   	if(bat_drv_rx_buff[18]<=0x39)bbb[1]=bat_drv_rx_buff[18]-0x30;
;;;2303   	else bbb[1]=bat_drv_rx_buff[18]-55;
;;;2304   	if(bat_drv_rx_buff[19]<=0x39)bbb[2]=bat_drv_rx_buff[19]-0x30;
;;;2305   	else bbb[2]=bat_drv_rx_buff[19]-55;
;;;2306   	if(bat_drv_rx_buff[20]<=0x39)bbb[3]=bat_drv_rx_buff[20]-0x30;
;;;2307   	else bbb[3]=bat_drv_rx_buff[20]-55;
;;;2308   
;;;2309   	tempSS=0;
;;;2310   	tempSS=((bbb[0]*4096)+(bbb[1]*256)+(bbb[2]*16)+bbb[3]);
;;;2311   
;;;2312   	bat[0]._min_cell_volt=(tempSS+5)/10;
;;;2313   
;;;2314   
;;;2315   	}*/
;;;2316   
;;;2317   
;;;2318   
;;;2319   }
00159a  e8bd8ffe          POP      {r1-r11,pc}
;;;2320   
                          ENDP

                  mnemo_hndl PROC
;;;2321   //-----------------------------------------------
;;;2322   void mnemo_hndl(void)
00159e  4a3c              LDR      r2,|L1.5776|
;;;2323   {
;;;2324   if(((ind==iMn_220)||(ind==iMn))&&(sub_ind==0)&&(MNEMO_ON==mnON))
;;;2325   	{
;;;2326   	if(mnemo_cnt)mnemo_cnt--;
0015a0  493c              LDR      r1,|L1.5780|
0015a2  7810              LDRB     r0,[r2,#0]            ;2324  ; a_ind
0015a4  2804              CMP      r0,#4                 ;2324
0015a6  d001              BEQ      |L1.5548|
0015a8  2801              CMP      r0,#1                 ;2324
0015aa  d105              BNE      |L1.5560|
                  |L1.5548|
0015ac  7850              LDRB     r0,[r2,#1]            ;2324  ; a_ind
0015ae  b918              CBNZ     r0,|L1.5560|
0015b0  4839              LDR      r0,|L1.5784|
0015b2  7800              LDRB     r0,[r0,#0]            ;2324  ; MNEMO_ON
0015b4  2855              CMP      r0,#0x55              ;2324
0015b6  d003              BEQ      |L1.5568|
                  |L1.5560|
;;;2327   	}
;;;2328   else mnemo_cnt=MNEMO_TIME;
0015b8  4838              LDR      r0,|L1.5788|
0015ba  8800              LDRH     r0,[r0,#0]  ; MNEMO_TIME
0015bc  7008              STRB     r0,[r1,#0]
                  |L1.5566|
;;;2329   }
0015be  4770              BX       lr
                  |L1.5568|
0015c0  7808              LDRB     r0,[r1,#0]            ;2326  ; mnemo_cnt
0015c2  2800              CMP      r0,#0                 ;2326
0015c4  d0fb              BEQ      |L1.5566|
0015c6  f1a00001          SUB      r0,r0,#1              ;2326
0015ca  7008              STRB     r0,[r1,#0]            ;2326
0015cc  4770              BX       lr
;;;2330   
                          ENDP

                  adc_init PROC
;;;2331   //-----------------------------------------------
;;;2332   void adc_init(void)
0015ce  4834              LDR      r0,|L1.5792|
;;;2333   {
;;;2334   
;;;2335   SET_REG(LPC_PINCON->PINSEL1,1,(25-16)*2,2);
0015d0  6841              LDR      r1,[r0,#4]
0015d2  f4212140          BIC      r1,r1,#0xc0000
0015d6  f4412180          ORR      r1,r1,#0x40000
0015da  6041              STR      r1,[r0,#4]
;;;2336   SET_REG(LPC_PINCON->PINSEL1,1,(24-16)*2,2);
0015dc  6841              LDR      r1,[r0,#4]
0015de  f4213140          BIC      r1,r1,#0x30000
0015e2  f4413180          ORR      r1,r1,#0x10000
0015e6  6041              STR      r1,[r0,#4]
;;;2337   SET_REG(LPC_PINCON->PINSEL1,1,(23-16)*2,2);
0015e8  6841              LDR      r1,[r0,#4]
0015ea  f4214140          BIC      r1,r1,#0xc000
0015ee  f4414180          ORR      r1,r1,#0x4000
0015f2  6041              STR      r1,[r0,#4]
;;;2338   
;;;2339   
;;;2340   SET_REG(LPC_PINCON->PINMODE1,2,(25-16)*2,2);
0015f4  6c41              LDR      r1,[r0,#0x44]
0015f6  f4212140          BIC      r1,r1,#0xc0000
0015fa  f4412100          ORR      r1,r1,#0x80000
0015fe  6441              STR      r1,[r0,#0x44]
;;;2341   SET_REG(LPC_PINCON->PINMODE1,2,(24-16)*2,2);
001600  6c41              LDR      r1,[r0,#0x44]
001602  f4213140          BIC      r1,r1,#0x30000
001606  f4413100          ORR      r1,r1,#0x20000
00160a  6441              STR      r1,[r0,#0x44]
;;;2342   SET_REG(LPC_PINCON->PINMODE1,2,(23-16)*2,2);
00160c  6c41              LDR      r1,[r0,#0x44]
00160e  f4214140          BIC      r1,r1,#0xc000
001612  f4414100          ORR      r1,r1,#0x8000
001616  6441              STR      r1,[r0,#0x44]
;;;2343   
;;;2344   SET_REG(LPC_ADC->ADCR,0,24,3);
001618  4822              LDR      r0,|L1.5796|
00161a  6801              LDR      r1,[r0,#0]
00161c  f02161e0          BIC      r1,r1,#0x7000000
001620  6001              STR      r1,[r0,#0]
;;;2345   
;;;2346   SET_REG(LPC_ADC->ADCR,1,21,1);
001622  6801              LDR      r1,[r0,#0]
001624  f4411100          ORR      r1,r1,#0x200000
001628  6001              STR      r1,[r0,#0]
;;;2347   SET_REG(LPC_ADC->ADCR,0,16,1);
00162a  6801              LDR      r1,[r0,#0]
00162c  f4213180          BIC      r1,r1,#0x10000
001630  6001              STR      r1,[r0,#0]
;;;2348   SET_REG(LPC_ADC->ADCR,1,8,8);
001632  6801              LDR      r1,[r0,#0]
001634  f421417f          BIC      r1,r1,#0xff00
001638  f4417180          ORR      r1,r1,#0x100
00163c  6001              STR      r1,[r0,#0]
;;;2349   
;;;2350   //SET_REG(LPC_GPIO0->FIODIR,7,5,3);
;;;2351   //SET_REG(LPC_GPIO0->FIOPIN,4,5,3);
;;;2352   	
;;;2353   	/*if(adc_ch<=7)*///SET_REG(LPC_ADC->ADCR,1<<5,0,8);
;;;2354        /*else if(adc_ch==8) SET_REG(LPC_ADC->ADCR,1<<2,0,8);
;;;2355        else SET_REG(LPC_ADC->ADCR,1<<4,0,8);*/
;;;2356   
;;;2357   LPC_ADC->ADINTEN     =  (1<< 8);      /* global enable interrupt            */
00163e  f44f7180          MOV      r1,#0x100
001642  60c1              STR      r1,[r0,#0xc]
001644  4818              LDR      r0,|L1.5800|
001646  f44f0180          MOV      r1,#0x400000
00164a  6001              STR      r1,[r0,#0]
;;;2358   
;;;2359   NVIC_EnableIRQ(ADC_IRQn);             /* enable ADC Interrupt               */
;;;2360   
;;;2361   
;;;2362   }
00164c  4770              BX       lr
00164e  0000              DCW      0x0000
                  |L1.5712|
                          DCD      net_U
                  |L1.5716|
                          DCD      eb2_data_short
                  |L1.5720|
                          DCD      Kvv_eb2
                  |L1.5724|
                          DCD      Uvv_eb2
                  |L1.5728|
                          DCD      Kpes_eb2
                  |L1.5732|
                          DCD      Upes_eb2
                  |L1.5736|
                          DCD      t_ext
                  |L1.5740|
                          DCD      ibt
                  |L1.5744|
                          DCD      t_box
                  |L1.5748|
                          DCD      t_ext_can_nd
                  |L1.5752|
                          DCD      t_ext_can
                  |L1.5756|
                          DCD      BAT_IS_ON
                  |L1.5760|
                          DCD      load_I
                  |L1.5764|
                          DCD      Isumm
                  |L1.5768|
                          DCD      NUMINV
                  |L1.5772|
                          DCD      inv
                  |L1.5776|
                          DCD      a_ind
                  |L1.5780|
                          DCD      mnemo_cnt
                  |L1.5784|
                          DCD      MNEMO_ON
                  |L1.5788|
                          DCD      MNEMO_TIME
                  |L1.5792|
                          DCD      0x4002c000
                  |L1.5796|
                          DCD      0x40034000
                  |L1.5800|
                          DCD      0xe000e100
                          ENDP

                  adc_drv7 PROC
;;;2364   //-----------------------------------------------
;;;2365   void adc_drv7(void) //(U - )
0016ac  e92d41f0          PUSH     {r4-r8,lr}
;;;2366   {
;;;2367   //int temp_S;
;;;2368   //char i;
;;;2369   //signed short temp_SS;
;;;2370   
;;;2371   adc_self_ch_disp[0]=abs_pal(adc_self_ch_buff[1]-adc_self_ch_buff[0]);//adc_self_ch_buff[0]&0x0f80;
0016b0  4cff              LDR      r4,|L1.6832|
0016b2  8860              LDRH     r0,[r4,#2]  ; adc_self_ch_buff
0016b4  8821              LDRH     r1,[r4,#0]  ; adc_self_ch_buff
0016b6  1a40              SUBS     r0,r0,r1
0016b8  b200              SXTH     r0,r0
0016ba  f7fffffe          BL       abs_pal
0016be  1da6              ADDS     r6,r4,#6
0016c0  8030              STRH     r0,[r6,#0]
;;;2372   adc_self_ch_disp[1]=abs_pal(adc_self_ch_buff[2]-adc_self_ch_buff[1]);//adc_self_ch_buff[1]&0x0f80;
0016c2  88a0              LDRH     r0,[r4,#4]  ; adc_self_ch_buff
0016c4  8861              LDRH     r1,[r4,#2]  ; adc_self_ch_buff
0016c6  1a40              SUBS     r0,r0,r1
0016c8  b200              SXTH     r0,r0
0016ca  f7fffffe          BL       abs_pal
0016ce  8070              STRH     r0,[r6,#2]
;;;2373   adc_self_ch_disp[2]=abs_pal(adc_self_ch_buff[2]-adc_self_ch_buff[0]);//adc_self_ch_buff[2]&0x0f80;
0016d0  88a0              LDRH     r0,[r4,#4]  ; adc_self_ch_buff
0016d2  8821              LDRH     r1,[r4,#0]  ; adc_self_ch_buff
0016d4  1a40              SUBS     r0,r0,r1
0016d6  b200              SXTH     r0,r0
0016d8  f7fffffe          BL       abs_pal
0016dc  80b0              STRH     r0,[r6,#4]
;;;2374   
;;;2375   //adc_self_ch_disp[0]=adc_self_ch_buff[0]&0x0ff0;
;;;2376   //adc_self_ch_disp[1]=adc_self_ch_buff[1]&0x0ff0;
;;;2377   //adc_self_ch_disp[2]=adc_self_ch_buff[2]&0x0ff0;
;;;2378   
;;;2379   
;;;2380   if(adc_self_ch_disp[2]<300)//==adc_self_ch_disp[2])
0016de  f44f7196          MOV      r1,#0x12c
;;;2381   	{
;;;2382   	adc_result=adc_self_ch_buff[2];
0016e2  f1a40596          SUB      r5,r4,#0x96
0016e6  4288              CMP      r0,r1                 ;2380
0016e8  da02              BGE      |L1.5872|
0016ea  88a0              LDRH     r0,[r4,#4]  ; adc_self_ch_buff
0016ec  8568              STRH     r0,[r5,#0x2a]
0016ee  e00c              B        |L1.5898|
                  |L1.5872|
;;;2383   	} 
;;;2384   else if(adc_self_ch_disp[1]<300)//==adc_self_ch_disp[2])
0016f0  f9b60002          LDRSH    r0,[r6,#2]  ; adc_self_ch_disp
0016f4  4288              CMP      r0,r1
0016f6  da02              BGE      |L1.5886|
;;;2385   	{
;;;2386   	adc_result=adc_self_ch_buff[1];
0016f8  8860              LDRH     r0,[r4,#2]  ; adc_self_ch_buff
0016fa  8568              STRH     r0,[r5,#0x2a]
0016fc  e005              B        |L1.5898|
                  |L1.5886|
;;;2387   	}
;;;2388   else if(adc_self_ch_disp[0]<300)//==adc_self_ch_disp[1])
0016fe  f9b60000          LDRSH    r0,[r6,#0]  ; adc_self_ch_disp
001702  4288              CMP      r0,r1
001704  da01              BGE      |L1.5898|
;;;2389   	{
;;;2390   	adc_result=adc_self_ch_buff[0];
001706  8820              LDRH     r0,[r4,#0]  ; adc_self_ch_buff
001708  8568              STRH     r0,[r5,#0x2a]
                  |L1.5898|
;;;2391   	}
;;;2392       //adc_result=92;
;;;2393   
;;;2394   if(adc_ch_net)
00170a  78ef              LDRB     r7,[r5,#3]  ; adc_ch_net
00170c  2600              MOVS     r6,#0
00170e  b32f              CBZ      r7,|L1.5980|
;;;2395   	{
;;;2396   
;;;2397   	main_power_buffer[0]+=(long)(adc_result);
001710  48e8              LDR      r0,|L1.6836|
001712  f9b5102a          LDRSH    r1,[r5,#0x2a]  ; adc_result
001716  6802              LDR      r2,[r0,#0]  ; main_power_buffer
001718  440a              ADD      r2,r2,r1
00171a  6002              STR      r2,[r0,#0]  ; main_power_buffer
;;;2398   	main_power_buffer[1]+=(long)(adc_result);
00171c  6842              LDR      r2,[r0,#4]  ; main_power_buffer
00171e  440a              ADD      r2,r2,r1
001720  6042              STR      r2,[r0,#4]  ; main_power_buffer
;;;2399   	main_power_buffer[2]+=(long)(adc_result);
001722  6882              LDR      r2,[r0,#8]  ; main_power_buffer
001724  440a              ADD      r2,r2,r1
001726  6082              STR      r2,[r0,#8]  ; main_power_buffer
;;;2400   	main_power_buffer[3]+=(long)(adc_result);
001728  68c2              LDR      r2,[r0,#0xc]  ; main_power_buffer
00172a  4411              ADD      r1,r1,r2
00172c  60c1              STR      r1,[r0,#0xc]  ; main_power_buffer
;;;2401   
;;;2402   	adc_net_buff_cnt++;
00172e  8e69              LDRH     r1,[r5,#0x32]  ; adc_net_buff_cnt
001730  f1010101          ADD      r1,r1,#1
001734  b209              SXTH     r1,r1
001736  8669              STRH     r1,[r5,#0x32]
;;;2403   	if(adc_net_buff_cnt>=0x1000)
001738  f5b15f80          CMP      r1,#0x1000
00173c  db00              BLT      |L1.5952|
;;;2404   		{
;;;2405   		adc_net_buff_cnt=0;
00173e  866e              STRH     r6,[r5,#0x32]
                  |L1.5952|
;;;2406   		}
;;;2407   	if((adc_net_buff_cnt&0x03ff)==0)
001740  f9b51032          LDRSH    r1,[r5,#0x32]  ; adc_net_buff_cnt
001744  058a              LSLS     r2,r1,#22
001746  d131              BNE      |L1.6060|
;;;2408   		{
;;;2409   		#ifdef UKU_220
;;;2410   		net_buff_=(short)((main_power_buffer[adc_net_buff_cnt>>10])>>11);
;;;2411   		#else
;;;2412   		#ifdef UKU_220_V2
;;;2413   		net_buff_=(short)((main_power_buffer[adc_net_buff_cnt>>10])>>11);
;;;2414   		#else
;;;2415   		net_buff_=(short)((main_power_buffer[adc_net_buff_cnt>>10])>>8);
001748  ea4f21a1          ASR      r1,r1,#10
00174c  f8502021          LDR      r2,[r0,r1,LSL #2]
001750  ea4f2222          ASR      r2,r2,#8
001754  852a              STRH     r2,[r5,#0x28]
;;;2416   		#endif
;;;2417   		#endif
;;;2418   		main_power_buffer[adc_net_buff_cnt>>10]=0;
001756  f8406021          STR      r6,[r0,r1,LSL #2]
00175a  e027              B        |L1.6060|
                  |L1.5980|
;;;2419   		}
;;;2420   
;;;2421   
;;;2422   	} 
;;;2423   else if(!adc_ch_net)
;;;2424   	{
;;;2425   	adc_buff[adc_ch][adc_ch_cnt]=(long)adc_result;
00175c  48d6              LDR      r0,|L1.6840|
00175e  792c              LDRB     r4,[r5,#4]  ; adc_ch
001760  796a              LDRB     r2,[r5,#5]  ; adc_ch_cnt
001762  eb001384          ADD      r3,r0,r4,LSL #6
001766  f9b5102a          LDRSH    r1,[r5,#0x2a]  ; adc_result
00176a  f8431022          STR      r1,[r3,r2,LSL #2]
;;;2426   	
;;;2427   	if((adc_ch_cnt&0x03)==0)
00176e  0790              LSLS     r0,r2,#30
001770  d10f              BNE      |L1.6034|
;;;2428   		{
;;;2429   		long temp_L;
;;;2430   		char i;
;;;2431   		temp_L=0;
001772  4601              MOV      r1,r0
                  |L1.6004|
;;;2432   		for(i=0;i<16;i++)
;;;2433   			{
;;;2434   			temp_L+=adc_buff[adc_ch][i];
001774  f853c020          LDR      r12,[r3,r0,LSL #2]
001778  4461              ADD      r1,r1,r12
00177a  f1000001          ADD      r0,r0,#1              ;2432
00177e  b2c0              UXTB     r0,r0                 ;2432
001780  2810              CMP      r0,#0x10              ;2432
001782  d3f7              BCC      |L1.6004|
;;;2435   			}
;;;2436   		adc_buff_[adc_ch]= (short)(temp_L>>4);
001784  ea4f1021          ASR      r0,r1,#4
001788  49ca              LDR      r1,|L1.6836|
00178a  f1a10120          SUB      r1,r1,#0x20
00178e  f8210014          STRH     r0,[r1,r4,LSL #1]
                  |L1.6034|
;;;2437   
;;;2438   		//adc_buff_[3]=346;
;;;2439   		}
;;;2440   	if(++adc_ch>=16) 
001792  1c64              ADDS     r4,r4,#1
001794  b2e0              UXTB     r0,r4
001796  7128              STRB     r0,[r5,#4]
001798  2810              CMP      r0,#0x10
00179a  d307              BCC      |L1.6060|
;;;2441   		{
;;;2442   		adc_ch=0;
00179c  712e              STRB     r6,[r5,#4]
;;;2443   		adc_ch_cnt++;
00179e  f1020201          ADD      r2,r2,#1
0017a2  b2d0              UXTB     r0,r2
0017a4  7168              STRB     r0,[r5,#5]
;;;2444   		if(adc_ch_cnt>=16)adc_ch_cnt=0;
0017a6  2810              CMP      r0,#0x10
0017a8  d300              BCC      |L1.6060|
0017aa  716e              STRB     r6,[r5,#5]
                  |L1.6060|
;;;2445   		}
;;;2446   	}
;;;2447   
;;;2448   //adc_buff[adc_ch][adc_cnt1]=(adc_self_ch_buff[2]+adc_self_ch_buff[1])/2;
;;;2449   
;;;2450   //if(adc_buff[adc_ch][adc_cnt1]<adc_buff_min[adc_ch])adc_buff_min[adc_ch]=adc_buff[adc_ch][adc_cnt1];
;;;2451   //if(adc_buff[adc_ch][adc_cnt1]>adc_buff_max[adc_ch])adc_buff_max[adc_ch]=adc_buff[adc_ch][adc_cnt1];
;;;2452   /*
;;;2453   	{
;;;2454   	if((adc_cnt1&0x03)==0)
;;;2455   		{
;;;2456   		temp_S=0;
;;;2457   		for(i=0;i<16;i++)
;;;2458   			{
;;;2459   			temp_S+=adc_buff[adc_ch][i];
;;;2460   			} 
;;;2461            	adc_buff_[adc_ch]=temp_S>>4;
;;;2462             }
;;;2463   	}*/
;;;2464   
;;;2465   
;;;2466   		  
;;;2467   
;;;2468   adc_self_ch_cnt=0;
0017ac  70ae              STRB     r6,[r5,#2]
;;;2469   
;;;2470   adc_ch_net++;
0017ae  f1070701          ADD      r7,r7,#1
;;;2471   adc_ch_net&=1;
0017b2  f0070001          AND      r0,r7,#1
0017b6  70e8              STRB     r0,[r5,#3]
;;;2472   
;;;2473   //SET_REG(LPC_GPIO0->FIODIR,7,5,3);
;;;2474   //SET_REG(LPC_GPIO0->FIOPIN,adc_ch,5,3);
;;;2475   
;;;2476   if(adc_ch_net)
;;;2477   	{
;;;2478   	//LPC_GPIO2->FIODIR|=(1<<7);
;;;2479   	//LPC_GPIO2->FIOPIN|=(1<<7);
;;;2480   	SET_REG(LPC_ADC->ADCR,1<<2,0,8);
0017b8  4ac0              LDR      r2,|L1.6844|
0017ba  b130              CBZ      r0,|L1.6090|
0017bc  6810              LDR      r0,[r2,#0]
0017be  f02000ff          BIC      r0,r0,#0xff
0017c2  f1000004          ADD      r0,r0,#4
0017c6  6010              STR      r0,[r2,#0]
0017c8  e03d              B        |L1.6214|
                  |L1.6090|
;;;2481   	}
;;;2482   else
;;;2483   	{
;;;2484   	//LPC_GPIO2->FIODIR|=(1<<7);
;;;2485   	//LPC_GPIO2->FIOPIN&=~(1<<7);
;;;2486   	if(!(adc_ch&(1<<3)))SET_REG(LPC_ADC->ADCR,1<<0,0,8);
0017ca  7929              LDRB     r1,[r5,#4]  ; adc_ch
0017cc  0708              LSLS     r0,r1,#28
0017ce  d406              BMI      |L1.6110|
0017d0  6810              LDR      r0,[r2,#0]
0017d2  f02000ff          BIC      r0,r0,#0xff
0017d6  f1000001          ADD      r0,r0,#1
0017da  6010              STR      r0,[r2,#0]
0017dc  e005              B        |L1.6122|
                  |L1.6110|
;;;2487   	else 			SET_REG(LPC_ADC->ADCR,1<<1,0,8);
0017de  6810              LDR      r0,[r2,#0]
0017e0  f02000ff          BIC      r0,r0,#0xff
0017e4  f1000002          ADD      r0,r0,#2
0017e8  6010              STR      r0,[r2,#0]
                  |L1.6122|
;;;2488   
;;;2489   
;;;2490   	SET_REG(LPC_GPIO0->FIODIR,1,28,1);
0017ea  48b5              LDR      r0,|L1.6848|
0017ec  6803              LDR      r3,[r0,#0]
0017ee  f0435380          ORR      r3,r3,#0x10000000
0017f2  6003              STR      r3,[r0,#0]
;;;2491   	SET_REG(LPC_GPIO1->FIODIR,1,30,1);
0017f4  6a03              LDR      r3,[r0,#0x20]
0017f6  f0434380          ORR      r3,r3,#0x40000000
0017fa  6203              STR      r3,[r0,#0x20]
;;;2492   	SET_REG(LPC_GPIO3->FIODIR,1,26,1);
0017fc  6e03              LDR      r3,[r0,#0x60]
0017fe  f0436380          ORR      r3,r3,#0x4000000
001802  6603              STR      r3,[r0,#0x60]
;;;2493   
;;;2494   	if(!(adc_ch&(1<<0)))SET_REG(LPC_GPIO0->FIOPIN,0,28,1);
001804  07cb              LSLS     r3,r1,#31
001806  d00a              BEQ      |L1.6174|
;;;2495   	else 			SET_REG(LPC_GPIO0->FIOPIN,1,28,1);
001808  6943              LDR      r3,[r0,#0x14]
00180a  f0435380          ORR      r3,r3,#0x10000000
00180e  6143              STR      r3,[r0,#0x14]
                  |L1.6160|
;;;2496   
;;;2497   	if(!(adc_ch&(1<<1)))SET_REG(LPC_GPIO1->FIOPIN,0,30,1);
001810  078b              LSLS     r3,r1,#30
001812  d409              BMI      |L1.6184|
001814  6b43              LDR      r3,[r0,#0x34]
001816  f0234380          BIC      r3,r3,#0x40000000
00181a  6343              STR      r3,[r0,#0x34]
00181c  e008              B        |L1.6192|
                  |L1.6174|
00181e  6943              LDR      r3,[r0,#0x14]         ;2494
001820  f0235380          BIC      r3,r3,#0x10000000     ;2494
001824  6143              STR      r3,[r0,#0x14]         ;2494
001826  e7f3              B        |L1.6160|
                  |L1.6184|
;;;2498   	else 			SET_REG(LPC_GPIO1->FIOPIN,1,30,1);
001828  6b43              LDR      r3,[r0,#0x34]
00182a  f0434380          ORR      r3,r3,#0x40000000
00182e  6343              STR      r3,[r0,#0x34]
                  |L1.6192|
;;;2499   
;;;2500   	if(!(adc_ch&(1<<2)))SET_REG(LPC_GPIO3->FIOPIN,0,26,1);
001830  0749              LSLS     r1,r1,#29
001832  d404              BMI      |L1.6206|
001834  6f41              LDR      r1,[r0,#0x74]
001836  f0216180          BIC      r1,r1,#0x4000000
00183a  6741              STR      r1,[r0,#0x74]
00183c  e003              B        |L1.6214|
                  |L1.6206|
;;;2501   	else 			SET_REG(LPC_GPIO3->FIOPIN,1,26,1);
00183e  6f41              LDR      r1,[r0,#0x74]
001840  f0416180          ORR      r1,r1,#0x4000000
001844  6741              STR      r1,[r0,#0x74]
                  |L1.6214|
;;;2502   	}
;;;2503   	
;;;2504   
;;;2505   
;;;2506   
;;;2507   LPC_ADC->ADCR |=  (1<<24);
001846  6810              LDR      r0,[r2,#0]
001848  f0407080          ORR      r0,r0,#0x1000000
00184c  6010              STR      r0,[r2,#0]
;;;2508   
;;;2509   }
00184e  e8bd81f0          POP      {r4-r8,pc}
;;;2510   
                          ENDP

                  avg_hndl PROC
;;;2767   //-----------------------------------------------
;;;2768   void avg_hndl(void)
001852  b5f0              PUSH     {r4-r7,lr}
;;;2769   { 
;;;2770   char i;
;;;2771   
;;;2772   //#define AVGCNTMAX	5
;;;2773   if(avg_main_cnt)
001854  4c96              LDR      r4,|L1.6832|
001856  3c96              SUBS     r4,r4,#0x96
001858  f9b40024          LDRSH    r0,[r4,#0x24]  ; avg_main_cnt
00185c  b118              CBZ      r0,|L1.6246|
;;;2774   	{
;;;2775   	avg_main_cnt--;
00185e  f1a00001          SUB      r0,r0,#1
001862  84a0              STRH     r0,[r4,#0x24]
;;;2776   	goto avg_hndl_end;
001864  e090              B        |L1.6536|
                  |L1.6246|
;;;2777   	}                 
;;;2778   
;;;2779   avg_num=0;
001866  f04f0500          MOV      r5,#0
00186a  7325              STRB     r5,[r4,#0xc]
;;;2780   
;;;2781   for(i=0;i<NUMIST;i++)
00186c  4628              MOV      r0,r5
00186e  4996              LDR      r1,|L1.6856|
;;;2782   	{
;;;2783   	if((bps[i]._state==bsWRK)&&(bps[i]._cnt<20))avg_num++;
001870  4b94              LDR      r3,|L1.6852|
001872  f9b12000          LDRSH    r2,[r1,#0]            ;2781
001876  e012              B        |L1.6302|
                  |L1.6264|
001878  ebc001c0          RSB      r1,r0,r0,LSL #3
00187c  eb011100          ADD      r1,r1,r0,LSL #4
001880  eb030181          ADD      r1,r3,r1,LSL #2
001884  788e              LDRB     r6,[r1,#2]
001886  2e01              CMP      r6,#1
001888  d106              BNE      |L1.6296|
00188a  78c9              LDRB     r1,[r1,#3]
00188c  2914              CMP      r1,#0x14
00188e  d203              BCS      |L1.6296|
001890  7b21              LDRB     r1,[r4,#0xc]  ; avg_num
001892  f1010101          ADD      r1,r1,#1
001896  7321              STRB     r1,[r4,#0xc]
                  |L1.6296|
001898  f1000001          ADD      r0,r0,#1              ;2781
00189c  b2c0              UXTB     r0,r0                 ;2781
                  |L1.6302|
00189e  4290              CMP      r0,r2                 ;2781
0018a0  dbea              BLT      |L1.6264|
;;;2784   	}
;;;2785   
;;;2786   /*if((K[NUMI]>=1)&&(bps_state[0]==ssWRK))	avg_num++;
;;;2787   if((K[NUMI]>=2)&&(bps_state[1]==ssWRK))	avg_num++;
;;;2788   if((K[NUMI]>=3)&&(bps_state[2]==ssWRK))	avg_num++;*/
;;;2789   
;;;2790   	
;;;2791   if(avg_num<2)
0018a2  7b26              LDRB     r6,[r4,#0xc]  ; avg_num
0018a4  2e02              CMP      r6,#2
0018a6  d36f              BCC      |L1.6536|
;;;2792   	{
;;;2793   	goto avg_hndl_end;
;;;2794   	}
;;;2795   	
;;;2796   else
;;;2797   	{
;;;2798   	i_avg_min=5000;
0018a8  f2413088          MOV      r0,#0x1388
0018ac  6760              STR      r0,[r4,#0x74]  ; i_avg_min
;;;2799   	i_avg_max=0;
0018ae  6725              STR      r5,[r4,#0x70]  ; i_avg_max
;;;2800   	i_avg_summ=0;
0018b0  67a5              STR      r5,[r4,#0x78]  ; i_avg_summ
;;;2801   	for(i=0;i<NUMIST;i++)
0018b2  f04f0100          MOV      r1,#0
0018b6  e017              B        |L1.6376|
                  |L1.6328|
;;;2802   		{
;;;2803   		if(bps[i]._state==bsWRK)
0018b8  ebc100c1          RSB      r0,r1,r1,LSL #3
0018bc  eb001001          ADD      r0,r0,r1,LSL #4
0018c0  eb030080          ADD      r0,r3,r0,LSL #2
0018c4  7887              LDRB     r7,[r0,#2]
0018c6  2f01              CMP      r7,#1
0018c8  d10b              BNE      |L1.6370|
;;;2804   			{
;;;2805   			if(bps[i]._Ii>i_avg_max)i_avg_max=bps[i]._Ii;
0018ca  6a40              LDR      r0,[r0,#0x24]
0018cc  6f27              LDR      r7,[r4,#0x70]  ; i_avg_max
0018ce  42b8              CMP      r0,r7
0018d0  dd00              BLE      |L1.6356|
0018d2  6720              STR      r0,[r4,#0x70]  ; i_avg_max
                  |L1.6356|
;;;2806   			if(bps[i]._Ii<i_avg_min)i_avg_min=bps[i]._Ii;
0018d4  6f67              LDR      r7,[r4,#0x74]  ; i_avg_min
0018d6  42b8              CMP      r0,r7
0018d8  da00              BGE      |L1.6364|
0018da  6760              STR      r0,[r4,#0x74]  ; i_avg_min
                  |L1.6364|
;;;2807   			
;;;2808   			i_avg_summ+=bps[i]._Ii;
0018dc  6fa7              LDR      r7,[r4,#0x78]  ; i_avg_summ
0018de  4438              ADD      r0,r0,r7
0018e0  67a0              STR      r0,[r4,#0x78]  ; i_avg_summ
                  |L1.6370|
0018e2  f1010101          ADD      r1,r1,#1              ;2801
0018e6  b2c9              UXTB     r1,r1                 ;2801
                  |L1.6376|
0018e8  4291              CMP      r1,r2                 ;2801
0018ea  dbe5              BLT      |L1.6328|
;;;2809   			}
;;;2810   		}
;;;2811   	i_avg=i_avg_summ/avg_num;	
0018ec  6fa0              LDR      r0,[r4,#0x78]  ; i_avg_summ
0018ee  fb90f6f6          SDIV     r6,r0,r6
0018f2  67e6              STR      r6,[r4,#0x7c]  ; i_avg
;;;2812   	
;;;2813   	if(i_avg_min==0)i_avg_min=1;
0018f4  6f60              LDR      r0,[r4,#0x74]  ; i_avg_min
0018f6  2101              MOVS     r1,#1                 ;2783
0018f8  b900              CBNZ     r0,|L1.6396|
0018fa  6761              STR      r1,[r4,#0x74]  ; i_avg_min
                  |L1.6396|
;;;2814   
;;;2815   	avg=i_avg_max;
0018fc  4f6c              LDR      r7,|L1.6832|
0018fe  6f20              LDR      r0,[r4,#0x70]  ; i_avg_max
001900  3f16              SUBS     r7,r7,#0x16
;;;2816   	avg*=100;
001902  f04f0c64          MOV      r12,#0x64
001906  fb00f00c          MUL      r0,r0,r12
;;;2817   	avg/=i_avg_min;
00190a  f8d4c074          LDR      r12,[r4,#0x74]  ; i_avg_min
00190e  fb90f0fc          SDIV     r0,r0,r12
001912  6038              STR      r0,[r7,#0]  ; avg
;;;2818   
;;;2819   	if(avg>160) bAVG=1;
001914  28a0              CMP      r0,#0xa0
001916  dd00              BLE      |L1.6426|
001918  72e1              STRB     r1,[r4,#0xb]
                  |L1.6426|
;;;2820   	if(avg<120) bAVG=0;
00191a  2878              CMP      r0,#0x78
00191c  da00              BGE      |L1.6432|
00191e  72e5              STRB     r5,[r4,#0xb]
                  |L1.6432|
;;;2821   
;;;2822   	if(bAVG==1)
001920  7ae0              LDRB     r0,[r4,#0xb]  ; bAVG
001922  2801              CMP      r0,#1
001924  d130              BNE      |L1.6536|
;;;2823   		{
;;;2824   		for(i=0;i<NUMIST;i++)
001926  f04f0100          MOV      r1,#0
;;;2825   			{
;;;2826   			if(bps[i]._state==bsWRK)
;;;2827   				{
;;;2828   				if(bps[i]._Ii>i_avg)bps[i]._x_--;
;;;2829   				if(bps[i]._Ii<i_avg)bps[i]._x_++;
;;;2830   			
;;;2831   				if(bps[i]._x_<-50)bps[i]._x_=-50;
00192a  f06f0431          MVN      r4,#0x31
00192e  e029              B        |L1.6532|
                  |L1.6448|
001930  ebc100c1          RSB      r0,r1,r1,LSL #3       ;2826
001934  eb001001          ADD      r0,r0,r1,LSL #4       ;2826
001938  eb030080          ADD      r0,r3,r0,LSL #2       ;2826
00193c  7885              LDRB     r5,[r0,#2]            ;2826
00193e  2d01              CMP      r5,#1                 ;2826
001940  d11d              BNE      |L1.6526|
001942  6a45              LDR      r5,[r0,#0x24]         ;2828
001944  42b5              CMP      r5,r6                 ;2828
001946  dd05              BLE      |L1.6484|
001948  f8b05050          LDRH     r5,[r0,#0x50]         ;2828
00194c  f1a50501          SUB      r5,r5,#1              ;2828
001950  f8a05050          STRH     r5,[r0,#0x50]         ;2828
                  |L1.6484|
001954  da05              BGE      |L1.6498|
001956  f8b05050          LDRH     r5,[r0,#0x50]         ;2829
00195a  f1050501          ADD      r5,r5,#1              ;2829
00195e  f8a05050          STRH     r5,[r0,#0x50]         ;2829
                  |L1.6498|
001962  f9b05050          LDRSH    r5,[r0,#0x50]
001966  42a5              CMP      r5,r4
001968  da01              BGE      |L1.6510|
00196a  f8a04050          STRH     r4,[r0,#0x50]
                  |L1.6510|
;;;2832   				if(bps[i]._x_>50)bps[i]._x_=50;	
00196e  f9b05050          LDRSH    r5,[r0,#0x50]
001972  2d32              CMP      r5,#0x32
001974  dd03              BLE      |L1.6526|
001976  f04f0532          MOV      r5,#0x32
00197a  f8a05050          STRH     r5,[r0,#0x50]
                  |L1.6526|
00197e  f1010101          ADD      r1,r1,#1              ;2824
001982  b2c9              UXTB     r1,r1                 ;2824
                  |L1.6532|
001984  4291              CMP      r1,r2                 ;2824
001986  dbd3              BLT      |L1.6448|
                  |L1.6536|
;;;2833   				}
;;;2834   			}		
;;;2835   		}			
;;;2836   	}   	 
;;;2837   
;;;2838   
;;;2839   avg_hndl_end:
;;;2840   __nop();  
001988  bf00              NOP      
;;;2841   }
00198a  bdf0              POP      {r4-r7,pc}
;;;2842   
                          ENDP

                  rele_hndl PROC
;;;2855   //*************-----------------------------------------------
;;;2856   void rele_hndl(void)
00198c  e92d5ff0          PUSH     {r4-r12,lr}
;;;2857   {
;;;2858   //static char cnt_rel_sam;
;;;2859   //char temp;
;;;2860   
;;;2861   //temp=0;
;;;2862   
;;;2863   
;;;2864   SET_REG(LPC_PINCON->PINSEL0,0,4*2,6*2);
001990  484e              LDR      r0,|L1.6860|
001992  6801              LDR      r1,[r0,#0]
001994  4a4e              LDR      r2,|L1.6864|
001996  ea010102          AND      r1,r1,r2
00199a  6001              STR      r1,[r0,#0]
;;;2865   SET_REG(LPC_GPIO0->FIODIR,63,4,6);
00199c  4c48              LDR      r4,|L1.6848|
00199e  6821              LDR      r1,[r4,#0]
0019a0  f441717c          ORR      r1,r1,#0x3f0
0019a4  6021              STR      r1,[r4,#0]
;;;2866   SET_REG(LPC_PINCON->PINSEL7,0,(25-16)*2,2);
0019a6  69c1              LDR      r1,[r0,#0x1c]
0019a8  f4212140          BIC      r1,r1,#0xc0000
0019ac  61c1              STR      r1,[r0,#0x1c]
;;;2867   SET_REG(LPC_GPIO3->FIODIR,1,25,1);
0019ae  6e21              LDR      r1,[r4,#0x60]
0019b0  f0417100          ORR      r1,r1,#0x2000000
0019b4  6621              STR      r1,[r4,#0x60]
;;;2868   SET_REG(LPC_PINCON->PINSEL1,0,(29-16)*2,2);
0019b6  6841              LDR      r1,[r0,#4]
0019b8  f0216140          BIC      r1,r1,#0xc000000
0019bc  6041              STR      r1,[r0,#4]
;;;2869   SET_REG(LPC_GPIO0->FIODIR,1,29,1);
0019be  6820              LDR      r0,[r4,#0]
0019c0  f0405000          ORR      r0,r0,#0x20000000
0019c4  6020              STR      r0,[r4,#0]
;;;2870   
;;;2871   
;;;2872   
;;;2873   
;;;2874   
;;;2875   
;;;2876   if((((bat[0]._rel_stat)  || (tbatdisable_stat!=tbdsON))&&(tbatdisable_cmnd))	&& (main_1Hz_cnt>5))
0019c6  4844              LDR      r0,|L1.6872|
0019c8  4b42              LDR      r3,|L1.6868|
0019ca  4945              LDR      r1,|L1.6880|
0019cc  7802              LDRB     r2,[r0,#0]  ; tbatdisable_stat
0019ce  4843              LDR      r0,|L1.6876|
0019d0  f893503c          LDRB     r5,[r3,#0x3c]  ; bat
0019d4  f9b11000          LDRSH    r1,[r1,#0]
0019d8  7800              LDRB     r0,[r0,#0]
0019da  4315              ORRS     r5,r5,r2
0019dc  d007              BEQ      |L1.6638|
0019de  b130              CBZ      r0,|L1.6638|
0019e0  2905              CMP      r1,#5
0019e2  dd04              BLE      |L1.6638|
;;;2877   	{
;;;2878   	SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_BAT1,1);
0019e4  69a5              LDR      r5,[r4,#0x18]
0019e6  f4457580          ORR      r5,r5,#0x100
0019ea  61a5              STR      r5,[r4,#0x18]
0019ec  e003              B        |L1.6646|
                  |L1.6638|
;;;2879   	}
;;;2880   else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_BAT1,1);	  	
0019ee  69e5              LDR      r5,[r4,#0x1c]
0019f0  f4457580          ORR      r5,r5,#0x100
0019f4  61e5              STR      r5,[r4,#0x1c]
                  |L1.6646|
;;;2881   
;;;2882   if((((bat[1]._rel_stat) || (tbatdisable_stat!=tbdsON))&&(tbatdisable_cmnd))	&& (main_1Hz_cnt>5))
0019f6  f8933088          LDRB     r3,[r3,#0x88]  ; bat
0019fa  4313              ORRS     r3,r3,r2
0019fc  d007              BEQ      |L1.6670|
0019fe  b130              CBZ      r0,|L1.6670|
001a00  2905              CMP      r1,#5
001a02  dd04              BLE      |L1.6670|
;;;2883   	{
;;;2884   	SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_BAT2,1);
001a04  69a0              LDR      r0,[r4,#0x18]
001a06  f0400040          ORR      r0,r0,#0x40
001a0a  61a0              STR      r0,[r4,#0x18]
001a0c  e003              B        |L1.6678|
                  |L1.6670|
;;;2885   	}
;;;2886   else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_BAT2,1);
001a0e  69e0              LDR      r0,[r4,#0x1c]
001a10  f0400040          ORR      r0,r0,#0x40
001a14  61e0              STR      r0,[r4,#0x1c]
                  |L1.6678|
;;;2887   
;;;2888   
;;;2889   if(mess_find_unvol((MESS2RELE_HNDL))&&(mess_data[0]==PARAM_RELE_SAMOKALIBR)) 
001a16  20d2              MOVS     r0,#0xd2
001a18  f7fffffe          BL       mess_find_unvol
001a1c  4d31              LDR      r5,|L1.6884|
001a1e  b110              CBZ      r0,|L1.6694|
001a20  6828              LDR      r0,[r5,#0]  ; mess_data
001a22  2864              CMP      r0,#0x64
001a24  d070              BEQ      |L1.6920|
                  |L1.6694|
;;;2890   	{
;;;2891   	if(mess_data[1]==1)SET_REG(LPC_GPIO0->FIOSET,1,29,1);
;;;2892   	else if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,29,1);
;;;2893   	}
;;;2894   else SET_REG(LPC_GPIO0->FIOCLR,1,29,1);
001a26  69e0              LDR      r0,[r4,#0x1c]
001a28  f0405000          ORR      r0,r0,#0x20000000
001a2c  61e0              STR      r0,[r4,#0x1c]
                  |L1.6702|
;;;2895   
;;;2896   
;;;2897   #ifndef UKU2071x
;;;2898   //  
;;;2899   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_NET))
;;;2900   	{
;;;2901   	if(mess_data[1]==0) 			SET_REG(LPC_GPIO3->FIOSET,1,SHIFT_REL_AV_NET,1);
;;;2902   	else 						SET_REG(LPC_GPIO3->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;2903   	}
;;;2904   else	if(!(avar_ind_stat&0x00000001)) 	SET_REG(LPC_GPIO3->FIOSET,1,SHIFT_REL_AV_NET,1);
;;;2905   else 							SET_REG(LPC_GPIO3->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;2906   #endif
;;;2907   #ifdef UKU2071x
;;;2908   //  
;;;2909   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_NET))
001a2e  20d2              MOVS     r0,#0xd2
001a30  f7fffffe          BL       mess_find_unvol
;;;2910   	{
;;;2911   	if(mess_data[1]==0)				SET_REG(LPC_GPIO3->FIOCLR,1,SHIFT_REL_AV_NET,1); 
;;;2912   	else 						SET_REG(LPC_GPIO3->FIOSET,1,SHIFT_REL_AV_NET,1);
;;;2913   	}
;;;2914   else	if(!(avar_ind_stat&0x00000001))	SET_REG(LPC_GPIO3->FIOCLR,1,SHIFT_REL_AV_NET,1);
001a34  4e2c              LDR      r6,|L1.6888|
001a36  b110              CBZ      r0,|L1.6718|
001a38  6828              LDR      r0,[r5,#0]            ;2909  ; mess_data
001a3a  2866              CMP      r0,#0x66              ;2909
001a3c  d075              BEQ      |L1.6954|
                  |L1.6718|
001a3e  6830              LDR      r0,[r6,#0]  ; avar_ind_stat
001a40  07c0              LSLS     r0,r0,#31
001a42  d071              BEQ      |L1.6952|
;;;2915   else 					  		SET_REG(LPC_GPIO3->FIOSET,1,SHIFT_REL_AV_NET,1);
001a44  6fa0              LDR      r0,[r4,#0x78]
001a46  f0407000          ORR      r0,r0,#0x2000000
001a4a  67a0              STR      r0,[r4,#0x78]
                  |L1.6732|
;;;2916   #endif
;;;2917   
;;;2918   #ifdef UKU_3U
;;;2919   //  
;;;2920   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BAT1))
;;;2921   	{
;;;2922   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT1,1);
;;;2923   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT1,1);
;;;2924        }
;;;2925   else 
;;;2926   	{
;;;2927   	if(!(avar_ind_stat&0x00000002)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT1,1);
;;;2928        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT1,1);
;;;2929   	} 
;;;2930   
;;;2931   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BAT2))
;;;2932   	{
;;;2933   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT2,1);
;;;2934   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT2,1);
;;;2935        }
;;;2936   else 
;;;2937   	{
;;;2938   	if(!(avar_ind_stat&0x00000004)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT2,1);
;;;2939        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT2,1);
;;;2940   	} 
;;;2941   
;;;2942   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BPS))
;;;2943   	{
;;;2944   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
;;;2945   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
;;;2946        }
;;;2947   else 
;;;2948   	{
;;;2949   	if(!(avar_ind_stat&0x000007f8)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
;;;2950        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
;;;2951   	} 
;;;2952   
;;;2953   #endif
;;;2954   
;;;2955   
;;;2956   #ifdef UKU_GLONASS
;;;2957   //  
;;;2958   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BAT1))
;;;2959   	{
;;;2960   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT1,1);
;;;2961   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT1,1);
;;;2962        }
;;;2963   else 
;;;2964   	{
;;;2965   	if(!(avar_ind_stat&0x00000002)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT1,1);
;;;2966        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT1,1);
;;;2967   	} 
;;;2968   
;;;2969   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BAT2))
;;;2970   	{
;;;2971   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT2,1);
;;;2972   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT2,1);
;;;2973        }
;;;2974   else 
;;;2975   	{
;;;2976   	if(!(avar_ind_stat&0x00000004)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT2,1);
;;;2977        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT2,1);
;;;2978   	} 
;;;2979   
;;;2980   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BPS))
;;;2981   	{
;;;2982   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
;;;2983   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
;;;2984        }
;;;2985   else 
;;;2986   	{
;;;2987   	if(!(avar_ind_stat&0x000007f8)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
;;;2988        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
;;;2989   	} 
;;;2990   
;;;2991   #endif
;;;2992   
;;;2993   #ifdef U 
;;;2994   
;;;2995   #endif
;;;2996   
;;;2997   #ifdef UKU_RSTKM
;;;2998   
;;;2999   //  
;;;3000   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_COMM))
;;;3001   	{
;;;3002   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_COMM,1);
;;;3003   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_COMM,1);
;;;3004   	}
;;;3005   else 
;;;3006   	{
;;;3007        if(  (!(avar_ind_stat&0x00007fff))/* &&
;;;3008             ((!SK_REL_EN[0]) || (sk_av_stat[0]!=sasON))  &&
;;;3009             ((!SK_REL_EN[1]) || (sk_av_stat[1]!=sasON))  &&
;;;3010             ((!SK_REL_EN[2]) || (sk_av_stat[2]!=sasON))  &&
;;;3011             ((!SK_REL_EN[3]) || (sk_av_stat[3]!=sasON))*/  )SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_COMM,1);
;;;3012        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_COMM,1);
;;;3013   	}
;;;3014   	
;;;3015   
;;;3016   // 
;;;3017   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_LIGHT))
;;;3018   	{
;;;3019   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LIGHT,1);
;;;3020   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LIGHT,1);
;;;3021        }
;;;3022   else 
;;;3023   	{
;;;3024   	if(sk_av_stat[0]!=sasON) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LIGHT,1);
;;;3025        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LIGHT,1);
;;;3026   	}
;;;3027   
;;;3028   
;;;3029   //  
;;;3030   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_LOAD_OFF))
;;;3031   	{
;;;3032   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LOAD_OFF,1);
;;;3033   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LOAD_OFF,1);
;;;3034        }
;;;3035   else if(tloaddisable_cmnd==0)
;;;3036   	{
;;;3037   	SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LOAD_OFF,1);
;;;3038   	}
;;;3039   else if((tloaddisable_cmnd)&&(tloaddisable_cmnd<=11))
;;;3040   	{
;;;3041   	SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LOAD_OFF,1);
;;;3042   	}
;;;3043   
;;;3044   else 
;;;3045   	{
;;;3046   	if(!(tloaddisable_stat==tldsON)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LOAD_OFF,1);
;;;3047        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LOAD_OFF,1);
;;;3048   	} 
;;;3049   
;;;3050   //  
;;;3051   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_VENT))
;;;3052   	{
;;;3053   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;3054   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT,1);
;;;3055   	}
;;;3056   else 
;;;3057   	{
;;;3058   	if(mixer_vent_stat==mvsOFF) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;3059        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT,1);
;;;3060   	} 
;;;3061   
;;;3062   #endif
;;;3063   
;;;3064   #ifdef UKU_KONTUR
;;;3065   
;;;3066   //  
;;;3067   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_COMM))
;;;3068   	{
;;;3069   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_COMM,1);
;;;3070   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_COMM,1);
;;;3071   	}
;;;3072   else 
;;;3073   	{
;;;3074        if(  (!(avar_ind_stat&0x00007fff)) &&
;;;3075             ((!SK_REL_EN[0]) || (sk_av_stat[0]!=sasON))  &&
;;;3076             ((!SK_REL_EN[1]) || (sk_av_stat[1]!=sasON))  &&
;;;3077             ((!SK_REL_EN[2]) || (sk_av_stat[2]!=sasON))  /*&&
;;;3078             ((!SK_REL_EN[3]) || (sk_av_stat[3]!=sasON))*/  )SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_COMM,1);
;;;3079        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_COMM,1);
;;;3080   	}
;;;3081   
;;;3082   	
;;;3083   //rel_warm_plazma=0;
;;;3084   //    
;;;3085   /*
;;;3086   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_WARM))
;;;3087   	{
;;;3088   	if(mess_data[1]==0)
;;;3089   		{
;;;3090   		SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_WARM,1);
;;;3091   		rel_warm_plazma=1;
;;;3092   		}
;;;3093   	else if(mess_data[1]==1) 
;;;3094   		{
;;;3095   		SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_WARM,1);
;;;3096   		rel_warm_plazma=2;
;;;3097   		}
;;;3098        }
;;;3099   else 
;;;3100   	{
;;;3101   	if(warm_stat_k==wsOFF) 
;;;3102   		{
;;;3103   		SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_WARM,1);
;;;3104   		rel_warm_plazma=3;
;;;3105   		}
;;;3106        else 
;;;3107   		{
;;;3108   		SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_WARM,1);
;;;3109   		rel_warm_plazma=4;
;;;3110   		}
;;;3111   	}
;;;3112   */
;;;3113   // 
;;;3114   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_LIGHT))
;;;3115   	{
;;;3116   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LIGHT,1);
;;;3117   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LIGHT,1);
;;;3118        }
;;;3119   else 
;;;3120   	{
;;;3121   	if(sk_av_stat[0]!=sasON) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LIGHT,1);
;;;3122        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LIGHT,1);
;;;3123   	}
;;;3124   
;;;3125   
;;;3126   
;;;3127   //  
;;;3128   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_LOAD_OFF))
;;;3129   	{
;;;3130   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LOAD_OFF,1);
;;;3131   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LOAD_OFF,1);
;;;3132        }
;;;3133   else if(tloaddisable_cmnd==0)
;;;3134   	{
;;;3135   	SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LOAD_OFF,1);
;;;3136   	}
;;;3137   else if((tloaddisable_cmnd)&&(tloaddisable_cmnd<=11))
;;;3138   	{
;;;3139   	SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LOAD_OFF,1);
;;;3140   	}
;;;3141   
;;;3142   else 
;;;3143   	{
;;;3144   	if(!(tloaddisable_stat==tldsON)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LOAD_OFF,1);
;;;3145        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LOAD_OFF,1);
;;;3146   	} 
;;;3147   
;;;3148   //    
;;;3149   if(RELE_LOG)
;;;3150   	{
;;;3151   	if((mess_find_unvol(MESS2RELE_HNDL))&&(mess_data[0]==PARAM_RELE_VENT_WARM))
;;;3152   		{
;;;3153   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT_WARM,1);
;;;3154   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT_WARM,1);
;;;3155   		}
;;;3156   	else 
;;;3157   		{
;;;3158   		if(warm_stat_k==wsOFF) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT_WARM,1);
;;;3159   	     else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT_WARM,1);
;;;3160   		} 
;;;3161   
;;;3162   	}
;;;3163   else 
;;;3164   	{
;;;3165   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_VENT_WARM))
;;;3166   		{
;;;3167   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT_WARM,1);
;;;3168   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT_WARM,1);
;;;3169   		}
;;;3170   	else 
;;;3171   		{
;;;3172   		if(vent_stat_k==vsOFF) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT_WARM,1);
;;;3173   	     else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT_WARM,1);
;;;3174   		} 
;;;3175   	}
;;;3176   #endif
;;;3177   
;;;3178   #ifdef UKU_6U
;;;3179   //  
;;;3180   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BAT1))
;;;3181   	{
;;;3182   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT1,1);
;;;3183   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT1,1);
;;;3184        }
;;;3185   else 
;;;3186   	{
;;;3187   	if(!(avar_ind_stat&0x00000002)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT1,1);
;;;3188        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT1,1);
;;;3189   	} 
;;;3190   
;;;3191   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BAT2))
;;;3192   	{
;;;3193   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT2,1);
;;;3194   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT2,1);
;;;3195       }
;;;3196   else if(NPN_OUT==npnoRELEAVBAT2)
;;;3197   	{
;;;3198   	if(npn_stat==npnsOFF)//&&(mess_find_unvol(MESS2RELE_HNDL))&&(mess_data[0]==PARAM_RELE_NPN))
;;;3199   		{
;;;3200   		/*if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT2,1);
;;;3201   		else if(mess_data[1]==1)*/ SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT2,1);
;;;3202        	}
;;;3203   	else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT2,1);
;;;3204   	}
;;;3205   else 
;;;3206   	{
;;;3207   	if(!(avar_ind_stat&0x00000004)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT2,1);
;;;3208       else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT2,1);
;;;3209   	} 
;;;3210   
;;;3211   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BPS))
;;;3212   	{
;;;3213   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
;;;3214   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
;;;3215        }
;;;3216   else 
;;;3217   	{
;;;3218   	if(!(avar_ind_stat&0x000007f8)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
;;;3219        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
;;;3220   	} 
;;;3221   
;;;3222   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_VENT))
;;;3223   	{
;;;3224   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT,1);
;;;3225   	else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;3226   	}
;;;3227   else if((NPN_OUT==npnoRELEVENT))
;;;3228   	{
;;;3229   	if(npn_stat==npnsOFF)//&&(mess_find_unvol(MESS2RELE_HNDL))&&(mess_data[0]==PARAM_RELE_NPN))
;;;3230   		{
;;;3231   		/*if(mess_data[1]==0)*/ SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;3232   		//else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;3233       	}
;;;3234   	else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT,1);
;;;3235   	}
;;;3236   else 
;;;3237   	{
;;;3238   	if(!vent_stat) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT,1);
;;;3239   	else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;3240   	}
;;;3241   
;;;3242   #endif
;;;3243   
;;;3244   #ifdef UKU_220
;;;3245   //  
;;;3246   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BAT))
;;;3247   	{
;;;3248   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT,1);
;;;3249   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT,1);
;;;3250        }
;;;3251   else 
;;;3252   	{
;;;3253   	if(!(avar_ind_stat&0x00000002)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT,1);
;;;3254        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT,1);
;;;3255   	} 
;;;3256   
;;;3257   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BPS))
;;;3258   	{
;;;3259   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
;;;3260   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
;;;3261        }
;;;3262   else 
;;;3263   	{
;;;3264   	if(!(avar_ind_stat&0x000007f8)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
;;;3265        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
;;;3266   	} 
;;;3267   
;;;3268   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_VENT))
;;;3269   	{
;;;3270   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT,1);
;;;3271   	else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;3272   	}
;;;3273   else 
;;;3274   	{
;;;3275   	if((RELE_VENT_LOGIC==0)||(RELE_VENT_LOGIC==1))
;;;3276   		{
;;;3277   		if(vent_stat) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT,1);
;;;3278   		else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;3279   		}
;;;3280   	else 
;;;3281   		{
;;;3282   		if((avar_ind_stat&0x00000004)) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT,1);
;;;3283        	else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;3284   		}
;;;3285   	}
;;;3286   
;;;3287   #endif
;;;3288   
;;;3289   #ifdef UKU_220_V2
;;;3290   //  
;;;3291   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BAT))
;;;3292   	{
;;;3293   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT,1);
;;;3294   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT,1);
;;;3295        }
;;;3296   else 
;;;3297   	{
;;;3298   	if(!(avar_ind_stat&0x00000002)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT,1);
;;;3299        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT,1);
;;;3300   	} 
;;;3301   
;;;3302   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BPS))
;;;3303   	{
;;;3304   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
;;;3305   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
;;;3306        }
;;;3307   else 
;;;3308   	{
;;;3309   	if(!(avar_ind_stat&0x000007f8)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
;;;3310        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
;;;3311   	} 
;;;3312   
;;;3313   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_VENT))
;;;3314   	{
;;;3315   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT,1);
;;;3316   	else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;3317   	}
;;;3318   else 
;;;3319   	{
;;;3320   	if((RELE_VENT_LOGIC==0)||(RELE_VENT_LOGIC==1))
;;;3321   		{
;;;3322   		if(vent_stat) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT,1);
;;;3323   		else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;3324   		}
;;;3325   	else 
;;;3326   		{
;;;3327   		if((avar_ind_stat&0x00000004)) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT,1);
;;;3328        	else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;3329   		}
;;;3330   	}
;;;3331   
;;;3332   #endif
;;;3333   
;;;3334   #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;3335   
;;;3336   if((AUSW_MAIN==22010)||(AUSW_MAIN==22011))
001a4c  4827              LDR      r0,|L1.6892|
;;;3337   	{
;;;3338   	#ifndef UKU2071x
;;;3339   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_NET))
;;;3340   		{
;;;3341   		if(mess_data[1]==0) SET_REG(LPC_GPIO3->FIOSET,1,25,1);
;;;3342   		else SET_REG(LPC_GPIO3->FIOCLR,1,25,1);
;;;3343   		}
;;;3344   	else	if(!(avar_ind_stat&0x00000001)) SET_REG(LPC_GPIO3->FIOSET,1,25,1);
;;;3345   	else SET_REG(LPC_GPIO3->FIOCLR,1,25,1);
;;;3346   	#endif
;;;3347   
;;;3348   	#ifdef UKU2071x
;;;3349   		#ifndef APSENERGIA
;;;3350   		if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_NET))
;;;3351   			{
;;;3352   			if(mess_data[1]==0) SET_REG(LPC_GPIO3->FIOCLR,1,25,1);
;;;3353   			else SET_REG(LPC_GPIO3->FIOSET,1,25,1);
;;;3354   			}
;;;3355   		else	if(!(avar_ind_stat&0x00000001)) SET_REG(LPC_GPIO3->FIOCLR,1,25,1);
;;;3356   		else SET_REG(LPC_GPIO3->FIOSET,1,25,1);
;;;3357   		#endif
;;;3358   
;;;3359   		#ifdef APSENERGIA
;;;3360   		if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_NET))
;;;3361   			{
;;;3362   			if(mess_data[1]==0) SET_REG(LPC_GPIO3->FIOCLR,1,25,1);
;;;3363   			else SET_REG(LPC_GPIO3->FIOSET,1,25,1);
;;;3364   			}
;;;3365   		else if((mess_find_unvol(MESS2RELE_HNDL))&& (mess_data[0]==PARAM_RELE_BAT_IS_DISCHARGED))  SET_REG(LPC_GPIO3->FIOCLR,1,25,1);
;;;3366   		else SET_REG(LPC_GPIO3->FIOSET,1,25,1);
;;;3367   		#endif
;;;3368   
;;;3369   	#endif
;;;3370   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BPS))
;;;3371   		{
;;;3372   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,7,1);
;;;3373   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,7,1);
;;;3374   	     }
;;;3375   	else 
;;;3376   		{
;;;3377   		if(!(avar_ind_stat&0x100007f8)) SET_REG(LPC_GPIO0->FIOCLR,1,7,1);
001a4e  4f28              LDR      r7,|L1.6896|
001a50  8800              LDRH     r0,[r0,#0]            ;3336  ; AUSW_MAIN
001a52  f5a041aa          SUB      r1,r0,#0x5500         ;3336
001a56  39fa              SUBS     r1,r1,#0xfa           ;3336
001a58  d001              BEQ      |L1.6750|
001a5a  1e49              SUBS     r1,r1,#1              ;3336
001a5c  d171              BNE      |L1.6978|
                  |L1.6750|
001a5e  20d2              MOVS     r0,#0xd2              ;3360
001a60  f7fffffe          BL       mess_find_unvol
001a64  b110              CBZ      r0,|L1.6764|
001a66  6828              LDR      r0,[r5,#0]            ;3360  ; mess_data
001a68  2866              CMP      r0,#0x66              ;3360
001a6a  d071              BEQ      |L1.6992|
                  |L1.6764|
001a6c  20d2              MOVS     r0,#0xd2              ;3365
001a6e  f7fffffe          BL       mess_find_unvol
001a72  b110              CBZ      r0,|L1.6778|
001a74  6828              LDR      r0,[r5,#0]            ;3365  ; mess_data
001a76  2872              CMP      r0,#0x72              ;3365
001a78  d079              BEQ      |L1.7022|
                  |L1.6778|
001a7a  6fa0              LDR      r0,[r4,#0x78]         ;3366
001a7c  f0407000          ORR      r0,r0,#0x2000000      ;3366
001a80  67a0              STR      r0,[r4,#0x78]         ;3366
                  |L1.6786|
001a82  20d2              MOVS     r0,#0xd2              ;3370
001a84  f7fffffe          BL       mess_find_unvol
001a88  b110              CBZ      r0,|L1.6800|
001a8a  6828              LDR      r0,[r5,#0]            ;3370  ; mess_data
001a8c  286a              CMP      r0,#0x6a              ;3370
001a8e  d074              BEQ      |L1.7034|
                  |L1.6800|
001a90  6830              LDR      r0,[r6,#0]  ; avar_ind_stat
001a92  4238              TST      r0,r7
001a94  d070              BEQ      |L1.7032|
;;;3378   	     else SET_REG(LPC_GPIO0->FIOSET,1,7,1);
001a96  69a0              LDR      r0,[r4,#0x18]
001a98  f0400080          ORR      r0,r0,#0x80
001a9c  61a0              STR      r0,[r4,#0x18]
                  |L1.6814|
;;;3379   		} 
;;;3380   
;;;3381   	//  
;;;3382   	#ifndef APSENERGIA
;;;3383   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BAT))
;;;3384   		{
;;;3385   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,4,1);
;;;3386   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,4,1);
;;;3387        	}
;;;3388   	else 
;;;3389   		{
;;;3390   		if(!(ips_bat_av_stat)) SET_REG(LPC_GPIO0->FIOCLR,1,4,1);
;;;3391        	else SET_REG(LPC_GPIO0->FIOSET,1,4,1);
;;;3392   		}
;;;3393   	#endif
;;;3394   	#ifdef APSENERGIA
;;;3395   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BAT))
001a9e  20d2              MOVS     r0,#0xd2
001aa0  f7fffffe          BL       mess_find_unvol
001aa4  b110              CBZ      r0,|L1.6828|
001aa6  6828              LDR      r0,[r5,#0]  ; mess_data
001aa8  2867              CMP      r0,#0x67
001aaa  d07a              BEQ      |L1.7074|
                  |L1.6828|
;;;3396   		{
;;;3397   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,4,1);
;;;3398   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,4,1);
;;;3399        	}
;;;3400   	else 
;;;3401   		{
;;;3402   		if(!apsEnergiaStat)SET_REG(LPC_GPIO0->FIOSET,1,4,1);
001aac  4811              LDR      r0,|L1.6900|
001aae  e024              B        |L1.6906|
                  |L1.6832|
                          DCD      ||area_number.22||+0x96
                  |L1.6836|
                          DCD      ||.bss||+0x420
                  |L1.6840|
                          DCD      ||.bss||
                  |L1.6844|
                          DCD      0x40034000
                  |L1.6848|
                          DCD      0x2009c000
                  |L1.6852|
                          DCD      bps
                  |L1.6856|
                          DCD      NUMIST
                  |L1.6860|
                          DCD      0x4002c000
                  |L1.6864|
                          DCD      0xfff000ff
                  |L1.6868|
                          DCD      bat
                  |L1.6872|
                          DCD      tbatdisable_stat
                  |L1.6876|
                          DCD      tbatdisable_cmnd
                  |L1.6880|
                          DCD      main_1Hz_cnt
                  |L1.6884|
                          DCD      mess_data
                  |L1.6888|
                          DCD      avar_ind_stat
                  |L1.6892|
                          DCD      AUSW_MAIN
                  |L1.6896|
                          DCD      0x100007f8
                  |L1.6900|
                          DCD      apsEnergiaStat
001af8  e006              B        |L1.6920|
                  |L1.6906|
001afa  7800              LDRB     r0,[r0,#0]  ; apsEnergiaStat
001afc  b380              CBZ      r0,|L1.7008|
;;;3403   		else SET_REG(LPC_GPIO0->FIOCLR,1,4,1);
001afe  69e0              LDR      r0,[r4,#0x1c]
001b00  f0400010          ORR      r0,r0,#0x10
001b04  61e0              STR      r0,[r4,#0x1c]
001b06  e1d9              B        |L1.7868|
                  |L1.6920|
001b08  6868              LDR      r0,[r5,#4]            ;2891  ; mess_data
001b0a  2801              CMP      r0,#1                 ;2891
001b0c  d006              BEQ      |L1.6940|
001b0e  2800              CMP      r0,#0                 ;2892
001b10  d18d              BNE      |L1.6702|
001b12  69e0              LDR      r0,[r4,#0x1c]         ;2892
001b14  f0405000          ORR      r0,r0,#0x20000000     ;2892
001b18  61e0              STR      r0,[r4,#0x1c]         ;2892
001b1a  e788              B        |L1.6702|
                  |L1.6940|
001b1c  69a0              LDR      r0,[r4,#0x18]         ;2891
001b1e  f0405000          ORR      r0,r0,#0x20000000     ;2891
001b22  61a0              STR      r0,[r4,#0x18]         ;2891
001b24  e783              B        |L1.6702|
001b26  e000              B        |L1.6954|
                  |L1.6952|
001b28  e00d              B        |L1.6982|
                  |L1.6954|
001b2a  6868              LDR      r0,[r5,#4]            ;2911  ; mess_data
001b2c  b120              CBZ      r0,|L1.6968|
001b2e  6fa0              LDR      r0,[r4,#0x78]         ;2912
001b30  f0407000          ORR      r0,r0,#0x2000000      ;2912
001b34  67a0              STR      r0,[r4,#0x78]         ;2912
001b36  e789              B        |L1.6732|
                  |L1.6968|
001b38  6fe0              LDR      r0,[r4,#0x7c]         ;2911
001b3a  f0407000          ORR      r0,r0,#0x2000000      ;2911
001b3e  67e0              STR      r0,[r4,#0x7c]         ;2911
001b40  e784              B        |L1.6732|
                  |L1.6978|
001b42  e042              B        |L1.7114|
001b44  e004              B        |L1.6992|
                  |L1.6982|
001b46  6fe0              LDR      r0,[r4,#0x7c]         ;2914
001b48  f0407000          ORR      r0,r0,#0x2000000      ;2914
001b4c  67e0              STR      r0,[r4,#0x7c]         ;2914
001b4e  e77d              B        |L1.6732|
                  |L1.6992|
001b50  6868              LDR      r0,[r5,#4]            ;3362  ; mess_data
001b52  b138              CBZ      r0,|L1.7012|
001b54  6fa0              LDR      r0,[r4,#0x78]         ;3363
001b56  f0407000          ORR      r0,r0,#0x2000000      ;3363
001b5a  67a0              STR      r0,[r4,#0x78]         ;3363
001b5c  e791              B        |L1.6786|
001b5e  e006              B        |L1.7022|
                  |L1.7008|
001b60  e02e              B        |L1.7104|
001b62  e00a              B        |L1.7034|
                  |L1.7012|
001b64  6fe0              LDR      r0,[r4,#0x7c]         ;3362
001b66  f0407000          ORR      r0,r0,#0x2000000      ;3362
001b6a  67e0              STR      r0,[r4,#0x7c]         ;3362
001b6c  e789              B        |L1.6786|
                  |L1.7022|
001b6e  6fe0              LDR      r0,[r4,#0x7c]         ;3365
001b70  f0407000          ORR      r0,r0,#0x2000000      ;3365
001b74  67e0              STR      r0,[r4,#0x7c]         ;3365
001b76  e784              B        |L1.6786|
                  |L1.7032|
001b78  e00e              B        |L1.7064|
                  |L1.7034|
001b7a  6868              LDR      r0,[r5,#4]            ;3372  ; mess_data
001b7c  b138              CBZ      r0,|L1.7054|
001b7e  2801              CMP      r0,#1                 ;3373
001b80  d18d              BNE      |L1.6814|
001b82  69a0              LDR      r0,[r4,#0x18]         ;3373
001b84  f0400080          ORR      r0,r0,#0x80           ;3373
001b88  61a0              STR      r0,[r4,#0x18]         ;3373
001b8a  e788              B        |L1.6814|
001b8c  e009              B        |L1.7074|
                  |L1.7054|
001b8e  69e0              LDR      r0,[r4,#0x1c]         ;3372
001b90  f0400080          ORR      r0,r0,#0x80           ;3372
001b94  61e0              STR      r0,[r4,#0x1c]         ;3372
001b96  e782              B        |L1.6814|
                  |L1.7064|
001b98  69e0              LDR      r0,[r4,#0x1c]         ;3377
001b9a  f0400080          ORR      r0,r0,#0x80           ;3377
001b9e  61e0              STR      r0,[r4,#0x1c]         ;3377
001ba0  e77d              B        |L1.6814|
                  |L1.7074|
001ba2  6868              LDR      r0,[r5,#4]            ;3397  ; mess_data
001ba4  b110              CBZ      r0,|L1.7084|
001ba6  2801              CMP      r0,#1                 ;3398
001ba8  d005              BEQ      |L1.7094|
001baa  e187              B        |L1.7868|
                  |L1.7084|
001bac  69e0              LDR      r0,[r4,#0x1c]         ;3397
001bae  f0400010          ORR      r0,r0,#0x10           ;3397
001bb2  61e0              STR      r0,[r4,#0x1c]         ;3397
001bb4  e182              B        |L1.7868|
                  |L1.7094|
001bb6  69a0              LDR      r0,[r4,#0x18]         ;3398
001bb8  f0400010          ORR      r0,r0,#0x10           ;3398
001bbc  61a0              STR      r0,[r4,#0x18]         ;3398
001bbe  e17d              B        |L1.7868|
                  |L1.7104|
001bc0  69a0              LDR      r0,[r4,#0x18]         ;3402
001bc2  f0400010          ORR      r0,r0,#0x10           ;3402
001bc6  61a0              STR      r0,[r4,#0x18]         ;3402
001bc8  e178              B        |L1.7868|
                  |L1.7114|
;;;3404   		}
;;;3405   	#endif
;;;3406   	}
;;;3407   
;;;3408   else	if(AUSW_MAIN==22023)
;;;3409   	{
;;;3410   
;;;3411   	//  
;;;3412   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BAT))
;;;3413   		{
;;;3414   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,4,1);
;;;3415   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,4,1);
;;;3416        	}
;;;3417   	else 
;;;3418   		{
;;;3419   		if(!(ips_bat_av_stat)) SET_REG(LPC_GPIO0->FIOCLR,1,4,1);
001bca  f8df86e0          LDR      r8,|L1.8876|
001bce  f5a041ac          SUB      r1,r0,#0x5600         ;3408
001bd2  3907              SUBS     r1,#7                 ;3408
001bd4  d162              BNE      |L1.7324|
001bd6  20d2              MOVS     r0,#0xd2              ;3412
001bd8  f7fffffe          BL       mess_find_unvol
001bdc  b110              CBZ      r0,|L1.7140|
001bde  6828              LDR      r0,[r5,#0]            ;3412  ; mess_data
001be0  2867              CMP      r0,#0x67              ;3412
001be2  d023              BEQ      |L1.7212|
                  |L1.7140|
001be4  f8980000          LDRB     r0,[r8,#0]  ; ips_bat_av_stat
001be8  b370              CBZ      r0,|L1.7240|
;;;3420        	else SET_REG(LPC_GPIO0->FIOSET,1,4,1);
001bea  69a0              LDR      r0,[r4,#0x18]
001bec  f0400010          ORR      r0,r0,#0x10
001bf0  61a0              STR      r0,[r4,#0x18]
                  |L1.7154|
;;;3421   		} 
;;;3422   
;;;3423   
;;;3424   	//         .    
;;;3425   	#ifndef UKU2071x
;;;3426   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_NET))
;;;3427   		{
;;;3428   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;3429   		else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_NET,1);
;;;3430   		}
;;;3431   	else	if(!(avar_ind_stat&0x00000001)) SET_REG(LPC_GPIO1->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;3432   	else SET_REG(LPC_GPIO3->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;3433   	#endif
;;;3434   	#ifdef UKU2071x
;;;3435   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_NET))
001bf2  20d2              MOVS     r0,#0xd2
001bf4  f7fffffe          BL       mess_find_unvol
001bf8  b110              CBZ      r0,|L1.7168|
001bfa  6828              LDR      r0,[r5,#0]  ; mess_data
001bfc  2866              CMP      r0,#0x66
001bfe  d028              BEQ      |L1.7250|
                  |L1.7168|
;;;3436   		{
;;;3437   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_NET,1);
;;;3438   		else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;3439   		}
;;;3440   	else	if(!(avar_ind_stat&0x00000001)) SET_REG(LPC_GPIO1->FIOSET,1,SHIFT_REL_AV_NET,1);
001c00  6830              LDR      r0,[r6,#0]  ; avar_ind_stat
001c02  07c0              LSLS     r0,r0,#31
001c04  d031              BEQ      |L1.7274|
;;;3441   	else SET_REG(LPC_GPIO3->FIOSET,1,SHIFT_REL_AV_NET,1);
001c06  6fa0              LDR      r0,[r4,#0x78]
001c08  f0407000          ORR      r0,r0,#0x2000000
001c0c  67a0              STR      r0,[r4,#0x78]
                  |L1.7182|
;;;3442   	#endif
;;;3443   
;;;3444   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BPS))
001c0e  20d2              MOVS     r0,#0xd2
001c10  f7fffffe          BL       mess_find_unvol
001c14  b110              CBZ      r0,|L1.7196|
001c16  6828              LDR      r0,[r5,#0]  ; mess_data
001c18  286a              CMP      r0,#0x6a
001c1a  d02b              BEQ      |L1.7284|
                  |L1.7196|
;;;3445   		{
;;;3446   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,7,1);
;;;3447   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,7,1);
;;;3448   	     }
;;;3449   	else 
;;;3450   		{
;;;3451   		if(!(avar_ind_stat&0x100007f8)) SET_REG(LPC_GPIO0->FIOCLR,1,7,1);
001c1c  6830              LDR      r0,[r6,#0]  ; avar_ind_stat
001c1e  4238              TST      r0,r7
001c20  d037              BEQ      |L1.7314|
;;;3452   	     else SET_REG(LPC_GPIO0->FIOSET,1,7,1);
001c22  69a0              LDR      r0,[r4,#0x18]
001c24  f0400080          ORR      r0,r0,#0x80
001c28  61a0              STR      r0,[r4,#0x18]
001c2a  e147              B        |L1.7868|
                  |L1.7212|
001c2c  6868              LDR      r0,[r5,#4]            ;3414  ; mess_data
001c2e  b130              CBZ      r0,|L1.7230|
001c30  2801              CMP      r0,#1                 ;3415
001c32  d1de              BNE      |L1.7154|
001c34  69a0              LDR      r0,[r4,#0x18]         ;3415
001c36  f0400010          ORR      r0,r0,#0x10           ;3415
001c3a  61a0              STR      r0,[r4,#0x18]         ;3415
001c3c  e7d9              B        |L1.7154|
                  |L1.7230|
001c3e  69e0              LDR      r0,[r4,#0x1c]         ;3414
001c40  f0400010          ORR      r0,r0,#0x10           ;3414
001c44  61e0              STR      r0,[r4,#0x1c]         ;3414
001c46  e7d4              B        |L1.7154|
                  |L1.7240|
001c48  69e0              LDR      r0,[r4,#0x1c]         ;3419
001c4a  f0400010          ORR      r0,r0,#0x10           ;3419
001c4e  61e0              STR      r0,[r4,#0x1c]         ;3419
001c50  e7cf              B        |L1.7154|
                  |L1.7250|
001c52  6868              LDR      r0,[r5,#4]            ;3437  ; mess_data
001c54  b120              CBZ      r0,|L1.7264|
001c56  69e0              LDR      r0,[r4,#0x1c]         ;3438
001c58  f0407000          ORR      r0,r0,#0x2000000      ;3438
001c5c  61e0              STR      r0,[r4,#0x1c]         ;3438
001c5e  e7d6              B        |L1.7182|
                  |L1.7264|
001c60  69a0              LDR      r0,[r4,#0x18]         ;3437
001c62  f0407000          ORR      r0,r0,#0x2000000      ;3437
001c66  61a0              STR      r0,[r4,#0x18]         ;3437
001c68  e7d1              B        |L1.7182|
                  |L1.7274|
001c6a  6ba0              LDR      r0,[r4,#0x38]         ;3440
001c6c  f0407000          ORR      r0,r0,#0x2000000      ;3440
001c70  63a0              STR      r0,[r4,#0x38]         ;3440
001c72  e7cc              B        |L1.7182|
                  |L1.7284|
001c74  6868              LDR      r0,[r5,#4]            ;3446  ; mess_data
001c76  b110              CBZ      r0,|L1.7294|
001c78  2801              CMP      r0,#1                 ;3447
001c7a  d005              BEQ      |L1.7304|
001c7c  e11e              B        |L1.7868|
                  |L1.7294|
001c7e  69e0              LDR      r0,[r4,#0x1c]         ;3446
001c80  f0400080          ORR      r0,r0,#0x80           ;3446
001c84  61e0              STR      r0,[r4,#0x1c]         ;3446
001c86  e119              B        |L1.7868|
                  |L1.7304|
001c88  69a0              LDR      r0,[r4,#0x18]         ;3447
001c8a  f0400080          ORR      r0,r0,#0x80           ;3447
001c8e  61a0              STR      r0,[r4,#0x18]         ;3447
001c90  e114              B        |L1.7868|
                  |L1.7314|
001c92  69e0              LDR      r0,[r4,#0x1c]         ;3451
001c94  f0400080          ORR      r0,r0,#0x80           ;3451
001c98  61e0              STR      r0,[r4,#0x1c]         ;3451
001c9a  e10f              B        |L1.7868|
                  |L1.7324|
;;;3453   		} 
;;;3454   	}
;;;3455   else	if(AUSW_MAIN==22043)
001c9c  f5a041ac          SUB      r1,r0,#0x5600
001ca0  391b              SUBS     r1,r1,#0x1b
001ca2  d170              BNE      |L1.7558|
;;;3456   	{
;;;3457   	//  
;;;3458   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BAT))
001ca4  20d2              MOVS     r0,#0xd2
001ca6  f7fffffe          BL       mess_find_unvol
001caa  b110              CBZ      r0,|L1.7346|
001cac  6828              LDR      r0,[r5,#0]  ; mess_data
001cae  2867              CMP      r0,#0x67
001cb0  d031              BEQ      |L1.7446|
                  |L1.7346|
;;;3459   		{
;;;3460   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,4,1);
;;;3461   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,4,1);
;;;3462        	}
;;;3463   	else 
;;;3464   		{
;;;3465   		if(!(ips_bat_av_stat)) SET_REG(LPC_GPIO0->FIOCLR,1,4,1);
001cb2  f8980000          LDRB     r0,[r8,#0]  ; ips_bat_av_stat
001cb6  b3b8              CBZ      r0,|L1.7464|
;;;3466        	else SET_REG(LPC_GPIO0->FIOSET,1,4,1);
001cb8  69a0              LDR      r0,[r4,#0x18]
001cba  f0400010          ORR      r0,r0,#0x10
001cbe  61a0              STR      r0,[r4,#0x18]
                  |L1.7360|
;;;3467   		} 
;;;3468   	//         .    
;;;3469   	#ifndef UKU2071x 
;;;3470   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_NET))
;;;3471   		{
;;;3472   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;3473   		else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_NET,1);
;;;3474   		}
;;;3475   	else	if(!(avar_ind_stat&0x00000001)) SET_REG(LPC_GPIO1->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;3476   	else SET_REG(LPC_GPIO3->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;3477   	#endif
;;;3478   	#ifdef UKU2071x 
;;;3479   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_NET))
001cc0  20d2              MOVS     r0,#0xd2
001cc2  f7fffffe          BL       mess_find_unvol
001cc6  b110              CBZ      r0,|L1.7374|
001cc8  6828              LDR      r0,[r5,#0]  ; mess_data
001cca  2866              CMP      r0,#0x66
001ccc  d037              BEQ      |L1.7486|
                  |L1.7374|
;;;3480   		{
;;;3481   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_NET,1);
;;;3482   		else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;3483   		}
;;;3484   	else	if(!(avar_ind_stat&0x00000001)) SET_REG(LPC_GPIO1->FIOSET,1,SHIFT_REL_AV_NET,1);
001cce  6830              LDR      r0,[r6,#0]  ; avar_ind_stat
001cd0  07c0              LSLS     r0,r0,#31
001cd2  d040              BEQ      |L1.7510|
;;;3485   	else SET_REG(LPC_GPIO3->FIOSET,1,SHIFT_REL_AV_NET,1);
001cd4  6fa0              LDR      r0,[r4,#0x78]
001cd6  f0407000          ORR      r0,r0,#0x2000000
001cda  67a0              STR      r0,[r4,#0x78]
                  |L1.7388|
;;;3486   	#endif
;;;3487   
;;;3488   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BPS))
001cdc  20d2              MOVS     r0,#0xd2
001cde  f7fffffe          BL       mess_find_unvol
001ce2  b110              CBZ      r0,|L1.7402|
001ce4  6828              LDR      r0,[r5,#0]  ; mess_data
001ce6  286a              CMP      r0,#0x6a
001ce8  d03a              BEQ      |L1.7520|
                  |L1.7402|
;;;3489   		{
;;;3490   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,7,1);
;;;3491   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,7,1);
;;;3492   	     }
;;;3493   	else 
;;;3494   		{
;;;3495   		if(!(avar_ind_stat&0x100007f8)) SET_REG(LPC_GPIO0->FIOCLR,1,7,1);
001cea  6830              LDR      r0,[r6,#0]  ; avar_ind_stat
001cec  4238              TST      r0,r7
001cee  d045              BEQ      |L1.7548|
;;;3496   	     else SET_REG(LPC_GPIO0->FIOSET,1,7,1);
001cf0  69a0              LDR      r0,[r4,#0x18]
001cf2  f0400080          ORR      r0,r0,#0x80
001cf6  61a0              STR      r0,[r4,#0x18]
                  |L1.7416|
;;;3497   		}
;;;3498   	//  
;;;3499   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BPS))
001cf8  20d2              MOVS     r0,#0xd2
001cfa  f7fffffe          BL       mess_find_unvol
001cfe  b110              CBZ      r0,|L1.7430|
001d00  6828              LDR      r0,[r5,#0]  ; mess_data
001d02  286a              CMP      r0,#0x6a
001d04  d040              BEQ      |L1.7560|
                  |L1.7430|
;;;3500   		{
;;;3501   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
;;;3502   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
;;;3503        	}
;;;3504   	else 
;;;3505   		{
;;;3506   		if(!(avar_ind_stat&0x100007f8)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
001d06  6830              LDR      r0,[r6,#0]  ; avar_ind_stat
001d08  4238              TST      r0,r7
001d0a  d04c              BEQ      |L1.7590|
;;;3507        	else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
001d0c  69a0              LDR      r0,[r4,#0x18]
001d0e  f0400020          ORR      r0,r0,#0x20
001d12  61a0              STR      r0,[r4,#0x18]
001d14  e0d2              B        |L1.7868|
                  |L1.7446|
001d16  6868              LDR      r0,[r5,#4]            ;3460  ; mess_data
001d18  b138              CBZ      r0,|L1.7466|
001d1a  2801              CMP      r0,#1                 ;3461
001d1c  d1d0              BNE      |L1.7360|
001d1e  69a0              LDR      r0,[r4,#0x18]         ;3461
001d20  f0400010          ORR      r0,r0,#0x10           ;3461
001d24  61a0              STR      r0,[r4,#0x18]         ;3461
001d26  e7cb              B        |L1.7360|
                  |L1.7464|
001d28  e004              B        |L1.7476|
                  |L1.7466|
001d2a  69e0              LDR      r0,[r4,#0x1c]         ;3460
001d2c  f0400010          ORR      r0,r0,#0x10           ;3460
001d30  61e0              STR      r0,[r4,#0x1c]         ;3460
001d32  e7c5              B        |L1.7360|
                  |L1.7476|
001d34  69e0              LDR      r0,[r4,#0x1c]         ;3465
001d36  f0400010          ORR      r0,r0,#0x10           ;3465
001d3a  61e0              STR      r0,[r4,#0x1c]         ;3465
001d3c  e7c0              B        |L1.7360|
                  |L1.7486|
001d3e  6868              LDR      r0,[r5,#4]            ;3481  ; mess_data
001d40  b120              CBZ      r0,|L1.7500|
001d42  69e0              LDR      r0,[r4,#0x1c]         ;3482
001d44  f0407000          ORR      r0,r0,#0x2000000      ;3482
001d48  61e0              STR      r0,[r4,#0x1c]         ;3482
001d4a  e7c7              B        |L1.7388|
                  |L1.7500|
001d4c  69a0              LDR      r0,[r4,#0x18]         ;3481
001d4e  f0407000          ORR      r0,r0,#0x2000000      ;3481
001d52  61a0              STR      r0,[r4,#0x18]         ;3481
001d54  e7c2              B        |L1.7388|
                  |L1.7510|
001d56  6ba0              LDR      r0,[r4,#0x38]         ;3484
001d58  f0407000          ORR      r0,r0,#0x2000000      ;3484
001d5c  63a0              STR      r0,[r4,#0x38]         ;3484
001d5e  e7bd              B        |L1.7388|
                  |L1.7520|
001d60  6868              LDR      r0,[r5,#4]            ;3490  ; mess_data
001d62  b130              CBZ      r0,|L1.7538|
001d64  2801              CMP      r0,#1                 ;3491
001d66  d1c7              BNE      |L1.7416|
001d68  69a0              LDR      r0,[r4,#0x18]         ;3491
001d6a  f0400080          ORR      r0,r0,#0x80           ;3491
001d6e  61a0              STR      r0,[r4,#0x18]         ;3491
001d70  e7c2              B        |L1.7416|
                  |L1.7538|
001d72  69e0              LDR      r0,[r4,#0x1c]         ;3490
001d74  f0400080          ORR      r0,r0,#0x80           ;3490
001d78  61e0              STR      r0,[r4,#0x1c]         ;3490
001d7a  e7bd              B        |L1.7416|
                  |L1.7548|
001d7c  69e0              LDR      r0,[r4,#0x1c]         ;3495
001d7e  f0400080          ORR      r0,r0,#0x80           ;3495
001d82  61e0              STR      r0,[r4,#0x1c]         ;3495
001d84  e7b8              B        |L1.7416|
                  |L1.7558|
001d86  e013              B        |L1.7600|
                  |L1.7560|
001d88  6868              LDR      r0,[r5,#4]            ;3501  ; mess_data
001d8a  b110              CBZ      r0,|L1.7570|
001d8c  2801              CMP      r0,#1                 ;3502
001d8e  d005              BEQ      |L1.7580|
001d90  e094              B        |L1.7868|
                  |L1.7570|
001d92  69e0              LDR      r0,[r4,#0x1c]         ;3501
001d94  f0400020          ORR      r0,r0,#0x20           ;3501
001d98  61e0              STR      r0,[r4,#0x1c]         ;3501
001d9a  e08f              B        |L1.7868|
                  |L1.7580|
001d9c  69a0              LDR      r0,[r4,#0x18]         ;3502
001d9e  f0400020          ORR      r0,r0,#0x20           ;3502
001da2  61a0              STR      r0,[r4,#0x18]         ;3502
001da4  e08a              B        |L1.7868|
                  |L1.7590|
001da6  69e0              LDR      r0,[r4,#0x1c]         ;3506
001da8  f0400020          ORR      r0,r0,#0x20           ;3506
001dac  61e0              STR      r0,[r4,#0x1c]         ;3506
001dae  e085              B        |L1.7868|
                  |L1.7600|
;;;3508   		} 
;;;3509   	}
;;;3510   else	if((AUSW_MAIN==22033)||(AUSW_MAIN==22018))
001db0  f5a041ac          SUB      r1,r0,#0x5600
001db4  3911              SUBS     r1,r1,#0x11
001db6  d001              BEQ      |L1.7612|
001db8  310f              ADDS     r1,r1,#0xf
001dba  d163              BNE      |L1.7812|
                  |L1.7612|
;;;3511   	{
;;;3512   	#ifndef UKU2071x 
;;;3513   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_NET))
;;;3514   		{
;;;3515   		if(mess_data[1]==0) SET_REG(LPC_GPIO3->FIOSET,1,25,1);
;;;3516   		else SET_REG(LPC_GPIO3->FIOCLR,1,25,1);
;;;3517   		}
;;;3518   	else	if(!(avar_ind_stat&0x00000001)) SET_REG(LPC_GPIO3->FIOSET,1,25,1);
;;;3519   	else SET_REG(LPC_GPIO3->FIOCLR,1,25,1);
;;;3520   	#endif
;;;3521   	#ifdef UKU2071x 
;;;3522   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_NET))
001dbc  20d2              MOVS     r0,#0xd2
001dbe  f7fffffe          BL       mess_find_unvol
001dc2  b110              CBZ      r0,|L1.7626|
001dc4  6828              LDR      r0,[r5,#0]  ; mess_data
001dc6  2866              CMP      r0,#0x66
001dc8  d023              BEQ      |L1.7698|
                  |L1.7626|
;;;3523   		{
;;;3524   		if(mess_data[1]==0) SET_REG(LPC_GPIO3->FIOCLR,1,25,1);
;;;3525   		else SET_REG(LPC_GPIO3->FIOSET,1,25,1);
;;;3526   		}
;;;3527   	else	if(!(avar_ind_stat&0x00000001)) SET_REG(LPC_GPIO3->FIOCLR,1,25,1);
001dca  6830              LDR      r0,[r6,#0]  ; avar_ind_stat
001dcc  07c0              LSLS     r0,r0,#31
001dce  d02c              BEQ      |L1.7722|
;;;3528   	else SET_REG(LPC_GPIO3->FIOSET,1,25,1);
001dd0  6fa0              LDR      r0,[r4,#0x78]
001dd2  f0407000          ORR      r0,r0,#0x2000000
001dd6  67a0              STR      r0,[r4,#0x78]
                  |L1.7640|
;;;3529   	#endif
;;;3530   	
;;;3531   	
;;;3532   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BPS))
001dd8  20d2              MOVS     r0,#0xd2
001dda  f7fffffe          BL       mess_find_unvol
001dde  b110              CBZ      r0,|L1.7654|
001de0  6828              LDR      r0,[r5,#0]  ; mess_data
001de2  286a              CMP      r0,#0x6a
001de4  d026              BEQ      |L1.7732|
                  |L1.7654|
;;;3533   		{
;;;3534   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,7,1);
;;;3535   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,7,1);
;;;3536   	     }
;;;3537   	else 
;;;3538   		{
;;;3539   		if(!(avar_ind_stat&0x100007f8)) SET_REG(LPC_GPIO0->FIOCLR,1,7,1);
001de6  6830              LDR      r0,[r6,#0]  ; avar_ind_stat
001de8  4238              TST      r0,r7
001dea  d031              BEQ      |L1.7760|
;;;3540   	     else SET_REG(LPC_GPIO0->FIOSET,1,7,1);
001dec  69a0              LDR      r0,[r4,#0x18]
001dee  f0400080          ORR      r0,r0,#0x80
001df2  61a0              STR      r0,[r4,#0x18]
                  |L1.7668|
;;;3541   		} 
;;;3542   
;;;3543   	//  
;;;3544   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BAT))
001df4  20d2              MOVS     r0,#0xd2
001df6  f7fffffe          BL       mess_find_unvol
001dfa  b110              CBZ      r0,|L1.7682|
001dfc  6828              LDR      r0,[r5,#0]  ; mess_data
001dfe  2867              CMP      r0,#0x67
001e00  d02b              BEQ      |L1.7770|
                  |L1.7682|
;;;3545   		{
;;;3546   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,4,1);
;;;3547   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,4,1);
;;;3548        	}
;;;3549   	else 
;;;3550   		{
;;;3551   		if(!(ips_bat_av_stat)) SET_REG(LPC_GPIO0->FIOCLR,1,4,1);
001e02  f8980000          LDRB     r0,[r8,#0]  ; ips_bat_av_stat
001e06  b390              CBZ      r0,|L1.7790|
;;;3552        	else SET_REG(LPC_GPIO0->FIOSET,1,4,1);
001e08  69a0              LDR      r0,[r4,#0x18]
001e0a  f0400010          ORR      r0,r0,#0x10
001e0e  61a0              STR      r0,[r4,#0x18]
001e10  e054              B        |L1.7868|
                  |L1.7698|
001e12  6868              LDR      r0,[r5,#4]            ;3524  ; mess_data
001e14  b120              CBZ      r0,|L1.7712|
001e16  6fa0              LDR      r0,[r4,#0x78]         ;3525
001e18  f0407000          ORR      r0,r0,#0x2000000      ;3525
001e1c  67a0              STR      r0,[r4,#0x78]         ;3525
001e1e  e7db              B        |L1.7640|
                  |L1.7712|
001e20  6fe0              LDR      r0,[r4,#0x7c]         ;3524
001e22  f0407000          ORR      r0,r0,#0x2000000      ;3524
001e26  67e0              STR      r0,[r4,#0x7c]         ;3524
001e28  e7d6              B        |L1.7640|
                  |L1.7722|
001e2a  6fe0              LDR      r0,[r4,#0x7c]         ;3527
001e2c  f0407000          ORR      r0,r0,#0x2000000      ;3527
001e30  67e0              STR      r0,[r4,#0x7c]         ;3527
001e32  e7d1              B        |L1.7640|
                  |L1.7732|
001e34  6868              LDR      r0,[r5,#4]            ;3534  ; mess_data
001e36  b130              CBZ      r0,|L1.7750|
001e38  2801              CMP      r0,#1                 ;3535
001e3a  d1db              BNE      |L1.7668|
001e3c  69a0              LDR      r0,[r4,#0x18]         ;3535
001e3e  f0400080          ORR      r0,r0,#0x80           ;3535
001e42  61a0              STR      r0,[r4,#0x18]         ;3535
001e44  e7d6              B        |L1.7668|
                  |L1.7750|
001e46  69e0              LDR      r0,[r4,#0x1c]         ;3534
001e48  f0400080          ORR      r0,r0,#0x80           ;3534
001e4c  61e0              STR      r0,[r4,#0x1c]         ;3534
001e4e  e7d1              B        |L1.7668|
                  |L1.7760|
001e50  69e0              LDR      r0,[r4,#0x1c]         ;3539
001e52  f0400080          ORR      r0,r0,#0x80           ;3539
001e56  61e0              STR      r0,[r4,#0x1c]         ;3539
001e58  e7cc              B        |L1.7668|
                  |L1.7770|
001e5a  6868              LDR      r0,[r5,#4]            ;3546  ; mess_data
001e5c  b110              CBZ      r0,|L1.7780|
001e5e  2801              CMP      r0,#1                 ;3547
001e60  d006              BEQ      |L1.7792|
001e62  e02b              B        |L1.7868|
                  |L1.7780|
001e64  69e0              LDR      r0,[r4,#0x1c]         ;3546
001e66  f0400010          ORR      r0,r0,#0x10           ;3546
001e6a  61e0              STR      r0,[r4,#0x1c]         ;3546
001e6c  e026              B        |L1.7868|
                  |L1.7790|
001e6e  e004              B        |L1.7802|
                  |L1.7792|
001e70  69a0              LDR      r0,[r4,#0x18]         ;3547
001e72  f0400010          ORR      r0,r0,#0x10           ;3547
001e76  61a0              STR      r0,[r4,#0x18]         ;3547
001e78  e020              B        |L1.7868|
                  |L1.7802|
001e7a  69e0              LDR      r0,[r4,#0x1c]         ;3551
001e7c  f0400010          ORR      r0,r0,#0x10           ;3551
001e80  61e0              STR      r0,[r4,#0x1c]         ;3551
001e82  e01b              B        |L1.7868|
                  |L1.7812|
;;;3553   		} 
;;;3554   	} 	 
;;;3555   else	
;;;3556   	{
;;;3557   	//         .    
;;;3558   	#ifndef UKU2071x 
;;;3559   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_NET))
;;;3560   		{
;;;3561   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;3562   		else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_NET,1);
;;;3563   		}
;;;3564   	else	if(!(avar_ind_stat&0x00000001)) SET_REG(LPC_GPIO1->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;3565   	else SET_REG(LPC_GPIO3->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;3566   	#endif
;;;3567   	#ifdef UKU2071x 
;;;3568   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_NET))
001e84  20d2              MOVS     r0,#0xd2
001e86  f7fffffe          BL       mess_find_unvol
001e8a  b110              CBZ      r0,|L1.7826|
001e8c  6828              LDR      r0,[r5,#0]  ; mess_data
001e8e  2866              CMP      r0,#0x66
001e90  d026              BEQ      |L1.7904|
                  |L1.7826|
;;;3569   		{
;;;3570   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_NET,1);
;;;3571   		else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;3572   		}
;;;3573   	else	if(!(avar_ind_stat&0x00000001)) SET_REG(LPC_GPIO1->FIOSET,1,SHIFT_REL_AV_NET,1);
001e92  6830              LDR      r0,[r6,#0]  ; avar_ind_stat
001e94  07c0              LSLS     r0,r0,#31
001e96  d02f              BEQ      |L1.7928|
;;;3574   	else SET_REG(LPC_GPIO3->FIOSET,1,SHIFT_REL_AV_NET,1);
001e98  6fa0              LDR      r0,[r4,#0x78]
001e9a  f0407000          ORR      r0,r0,#0x2000000
001e9e  67a0              STR      r0,[r4,#0x78]
                  |L1.7840|
;;;3575   	#endif
;;;3576   
;;;3577   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BPS))
001ea0  20d2              MOVS     r0,#0xd2
001ea2  f7fffffe          BL       mess_find_unvol
001ea6  b110              CBZ      r0,|L1.7854|
001ea8  6828              LDR      r0,[r5,#0]  ; mess_data
001eaa  286a              CMP      r0,#0x6a
001eac  d029              BEQ      |L1.7938|
                  |L1.7854|
;;;3578   		{
;;;3579   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
;;;3580   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
;;;3581        	}
;;;3582   	else 
;;;3583   		{
;;;3584   		if(!(avar_ind_stat&0x100007f8)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
001eae  6830              LDR      r0,[r6,#0]  ; avar_ind_stat
001eb0  4238              TST      r0,r7
001eb2  d034              BEQ      |L1.7966|
;;;3585        	else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
001eb4  69a0              LDR      r0,[r4,#0x18]
001eb6  f0400020          ORR      r0,r0,#0x20
001eba  61a0              STR      r0,[r4,#0x18]
                  |L1.7868|
;;;3586   		}
;;;3587   	}
;;;3588   //   
;;;3589   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_EXT))	 
001ebc  20d2              MOVS     r0,#0xd2
001ebe  f7fffffe          BL       mess_find_unvol
;;;3590   	{
;;;3591   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,9,1);
;;;3592   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,9,1);
;;;3593   	}
;;;3594   else if(DOP_RELE_FUNC==0)	//     
;;;3595   	{
;;;3596   	if((!speedChIsOn)&&(spc_stat!=spcVZ)&&(hv_vz_stat==hvsOFF)&&(sp_ch_stat==scsOFF)&&(load_U/10<UVENTOFF))   SET_REG(LPC_GPIO0->FIOCLR,1,9,1);
001ec2  f8df83ec          LDR      r8,|L1.8880|
001ec6  4efb              LDR      r6,|L1.8884|
001ec8  4ffb              LDR      r7,|L1.8888|
001eca  b110              CBZ      r0,|L1.7890|
001ecc  6828              LDR      r0,[r5,#0]            ;3589  ; mess_data
001ece  2871              CMP      r0,#0x71              ;3589
001ed0  d02a              BEQ      |L1.7976|
                  |L1.7890|
001ed2  48fa              LDR      r0,|L1.8892|
001ed4  f9b00000          LDRSH    r0,[r0,#0]            ;3594  ; DOP_RELE_FUNC
001ed8  b380              CBZ      r0,|L1.7996|
;;;3597   	else if((speedChIsOn)||(spc_stat==spcVZ)||(hv_vz_stat!=hvsOFF)||(sp_ch_stat!=scsOFF)) SET_REG(LPC_GPIO0->FIOSET,1,9,1);
;;;3598   	}
;;;3599   else if(DOP_RELE_FUNC==1)  //      
001eda  2801              CMP      r0,#1
001edc  d05c              BEQ      |L1.8088|
001ede  e066              B        |L1.8110|
                  |L1.7904|
001ee0  6868              LDR      r0,[r5,#4]            ;3570  ; mess_data
001ee2  b120              CBZ      r0,|L1.7918|
001ee4  69e0              LDR      r0,[r4,#0x1c]         ;3571
001ee6  f0407000          ORR      r0,r0,#0x2000000      ;3571
001eea  61e0              STR      r0,[r4,#0x1c]         ;3571
001eec  e7d8              B        |L1.7840|
                  |L1.7918|
001eee  69a0              LDR      r0,[r4,#0x18]         ;3570
001ef0  f0407000          ORR      r0,r0,#0x2000000      ;3570
001ef4  61a0              STR      r0,[r4,#0x18]         ;3570
001ef6  e7d3              B        |L1.7840|
                  |L1.7928|
001ef8  6ba0              LDR      r0,[r4,#0x38]         ;3573
001efa  f0407000          ORR      r0,r0,#0x2000000      ;3573
001efe  63a0              STR      r0,[r4,#0x38]         ;3573
001f00  e7ce              B        |L1.7840|
                  |L1.7938|
001f02  6868              LDR      r0,[r5,#4]            ;3579  ; mess_data
001f04  b130              CBZ      r0,|L1.7956|
001f06  2801              CMP      r0,#1                 ;3580
001f08  d1d8              BNE      |L1.7868|
001f0a  69a0              LDR      r0,[r4,#0x18]         ;3580
001f0c  f0400020          ORR      r0,r0,#0x20           ;3580
001f10  61a0              STR      r0,[r4,#0x18]         ;3580
001f12  e7d3              B        |L1.7868|
                  |L1.7956|
001f14  69e0              LDR      r0,[r4,#0x1c]         ;3579
001f16  f0400020          ORR      r0,r0,#0x20           ;3579
001f1a  61e0              STR      r0,[r4,#0x1c]         ;3579
001f1c  e7ce              B        |L1.7868|
                  |L1.7966|
001f1e  69e0              LDR      r0,[r4,#0x1c]         ;3584
001f20  f0400020          ORR      r0,r0,#0x20           ;3584
001f24  61e0              STR      r0,[r4,#0x1c]         ;3584
001f26  e7c9              B        |L1.7868|
                  |L1.7976|
001f28  6868              LDR      r0,[r5,#4]            ;3591  ; mess_data
001f2a  b110              CBZ      r0,|L1.7986|
001f2c  2801              CMP      r0,#1                 ;3592
001f2e  d006              BEQ      |L1.7998|
001f30  e03d              B        |L1.8110|
                  |L1.7986|
001f32  69e0              LDR      r0,[r4,#0x1c]         ;3591
001f34  f4407000          ORR      r0,r0,#0x200          ;3591
001f38  61e0              STR      r0,[r4,#0x1c]         ;3591
001f3a  e038              B        |L1.8110|
                  |L1.7996|
001f3c  e004              B        |L1.8008|
                  |L1.7998|
001f3e  69a0              LDR      r0,[r4,#0x18]         ;3592
001f40  f4407000          ORR      r0,r0,#0x200          ;3592
001f44  61a0              STR      r0,[r4,#0x18]         ;3592
001f46  e032              B        |L1.8110|
                  |L1.8008|
001f48  48dd              LDR      r0,|L1.8896|
001f4a  49de              LDR      r1,|L1.8900|
001f4c  f9b00000          LDRSH    r0,[r0,#0]            ;3596  ; speedChIsOn
001f50  b9a8              CBNZ     r0,|L1.8062|
001f52  7d0a              LDRB     r2,[r1,#0x14]         ;3596  ; spc_stat
001f54  2a02              CMP      r2,#2                 ;3596
001f56  d012              BEQ      |L1.8062|
001f58  783a              LDRB     r2,[r7,#0]            ;3596  ; hv_vz_stat
001f5a  b982              CBNZ     r2,|L1.8062|
001f5c  7832              LDRB     r2,[r6,#0]            ;3596  ; sp_ch_stat
001f5e  b972              CBNZ     r2,|L1.8062|
001f60  f9b82000          LDRSH    r2,[r8,#0]            ;3596  ; load_U
001f64  230a              MOVS     r3,#0xa               ;3596
001f66  fb92f2f3          SDIV     r2,r2,r3              ;3596
001f6a  4bd7              LDR      r3,|L1.8904|
001f6c  f9b33000          LDRSH    r3,[r3,#0]            ;3596  ; UVENTOFF
001f70  429a              CMP      r2,r3                 ;3596
001f72  da04              BGE      |L1.8062|
001f74  69e0              LDR      r0,[r4,#0x1c]         ;3596
001f76  f4407000          ORR      r0,r0,#0x200          ;3596
001f7a  61e0              STR      r0,[r4,#0x1c]         ;3596
001f7c  e017              B        |L1.8110|
                  |L1.8062|
001f7e  b930              CBNZ     r0,|L1.8078|
001f80  7d08              LDRB     r0,[r1,#0x14]         ;3597  ; spc_stat
001f82  2802              CMP      r0,#2                 ;3597
001f84  d003              BEQ      |L1.8078|
001f86  7838              LDRB     r0,[r7,#0]            ;3597  ; hv_vz_stat
001f88  b908              CBNZ     r0,|L1.8078|
001f8a  7830              LDRB     r0,[r6,#0]            ;3597  ; sp_ch_stat
001f8c  b178              CBZ      r0,|L1.8110|
                  |L1.8078|
001f8e  69a0              LDR      r0,[r4,#0x18]         ;3597
001f90  f4407000          ORR      r0,r0,#0x200          ;3597
001f94  61a0              STR      r0,[r4,#0x18]         ;3597
001f96  e00a              B        |L1.8110|
                  |L1.8088|
;;;3600   	{
;;;3601   	if((mess_find_unvol(MESS2RELE_HNDL))&& (mess_data[0]==PARAM_RELE_BAT_IS_DISCHARGED)) SET_REG(LPC_GPIO0->FIOCLR,1,9,1);
001f98  20d2              MOVS     r0,#0xd2
001f9a  f7fffffe          BL       mess_find_unvol
001f9e  b110              CBZ      r0,|L1.8102|
001fa0  6828              LDR      r0,[r5,#0]  ; mess_data
001fa2  2872              CMP      r0,#0x72
001fa4  d017              BEQ      |L1.8150|
                  |L1.8102|
;;;3602   	else SET_REG(LPC_GPIO0->FIOSET,1,9,1);
001fa6  69a0              LDR      r0,[r4,#0x18]
001fa8  f4407000          ORR      r0,r0,#0x200
001fac  61a0              STR      r0,[r4,#0x18]
                  |L1.8110|
;;;3603   	}
;;;3604   	
;;;3605   //  
;;;3606   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_BDR1))
001fae  20d2              MOVS     r0,#0xd2
001fb0  f7fffffe          BL       mess_find_unvol
;;;3607   	{
;;;3608   	if(mess_data[1]==0) 		bdr_transmit_stat&=0xfe;
001fb4  f8df9314          LDR      r9,|L1.8908|
;;;3609   	else if(mess_data[1]==1) 	bdr_transmit_stat|=0x01;
;;;3610   	}
;;;3611   else 
;;;3612   	{
;;;3613   	if(bdr_avar_stat&0x01)  	bdr_transmit_stat|=0x01;
001fb8  4cc5              LDR      r4,|L1.8912|
001fba  b110              CBZ      r0,|L1.8130|
001fbc  6828              LDR      r0,[r5,#0]            ;3606  ; mess_data
001fbe  2875              CMP      r0,#0x75              ;3606
001fc0  d00e              BEQ      |L1.8160|
                  |L1.8130|
001fc2  7820              LDRB     r0,[r4,#0]  ; bdr_avar_stat
001fc4  07c0              LSLS     r0,r0,#31
001fc6  d01e              BEQ      |L1.8198|
001fc8  f8990000          LDRB     r0,[r9,#0]  ; bdr_transmit_stat
001fcc  f0400001          ORR      r0,r0,#1
001fd0  f8890000          STRB     r0,[r9,#0]
001fd4  e01d              B        |L1.8210|
                  |L1.8150|
001fd6  69e0              LDR      r0,[r4,#0x1c]         ;3601
001fd8  f4407000          ORR      r0,r0,#0x200          ;3601
001fdc  61e0              STR      r0,[r4,#0x1c]         ;3601
001fde  e7e6              B        |L1.8110|
                  |L1.8160|
001fe0  6868              LDR      r0,[r5,#4]            ;3608  ; mess_data
001fe2  b110              CBZ      r0,|L1.8170|
001fe4  2801              CMP      r0,#1                 ;3609
001fe6  d007              BEQ      |L1.8184|
001fe8  e013              B        |L1.8210|
                  |L1.8170|
001fea  f8990000          LDRB     r0,[r9,#0]            ;3608  ; bdr_transmit_stat
001fee  f00000fe          AND      r0,r0,#0xfe           ;3608
001ff2  f8890000          STRB     r0,[r9,#0]            ;3608
001ff6  e00c              B        |L1.8210|
                  |L1.8184|
001ff8  f8990000          LDRB     r0,[r9,#0]            ;3609  ; bdr_transmit_stat
001ffc  f0400001          ORR      r0,r0,#1              ;3609
002000  f8890000          STRB     r0,[r9,#0]            ;3609
002004  e005              B        |L1.8210|
                  |L1.8198|
;;;3614   	else 						bdr_transmit_stat&=0xfe;
002006  f8990000          LDRB     r0,[r9,#0]  ; bdr_transmit_stat
00200a  f00000fe          AND      r0,r0,#0xfe
00200e  f8890000          STRB     r0,[r9,#0]
                  |L1.8210|
;;;3615   	}	
;;;3616   
;;;3617   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_BDR2))
002012  20d2              MOVS     r0,#0xd2
002014  f7fffffe          BL       mess_find_unvol
002018  b110              CBZ      r0,|L1.8224|
00201a  6828              LDR      r0,[r5,#0]  ; mess_data
00201c  2876              CMP      r0,#0x76
00201e  d009              BEQ      |L1.8244|
                  |L1.8224|
;;;3618   	{
;;;3619   	if(mess_data[1]==0) 		bdr_transmit_stat&=0xfd;
;;;3620   	else if(mess_data[1]==1) 	bdr_transmit_stat|=0x02;
;;;3621   	}
;;;3622   else 
;;;3623   	{
;;;3624   	if(bdr_avar_stat&0x01)  	bdr_transmit_stat|=0x02;
002020  7820              LDRB     r0,[r4,#0]  ; bdr_avar_stat
002022  07c0              LSLS     r0,r0,#31
002024  d019              BEQ      |L1.8282|
002026  f8990000          LDRB     r0,[r9,#0]  ; bdr_transmit_stat
00202a  f0400002          ORR      r0,r0,#2
00202e  f8890000          STRB     r0,[r9,#0]
002032  e018              B        |L1.8294|
                  |L1.8244|
002034  6868              LDR      r0,[r5,#4]            ;3619  ; mess_data
002036  b110              CBZ      r0,|L1.8254|
002038  2801              CMP      r0,#1                 ;3620
00203a  d007              BEQ      |L1.8268|
00203c  e013              B        |L1.8294|
                  |L1.8254|
00203e  f8990000          LDRB     r0,[r9,#0]            ;3619  ; bdr_transmit_stat
002042  f00000fd          AND      r0,r0,#0xfd           ;3619
002046  f8890000          STRB     r0,[r9,#0]            ;3619
00204a  e00c              B        |L1.8294|
                  |L1.8268|
00204c  f8990000          LDRB     r0,[r9,#0]            ;3620  ; bdr_transmit_stat
002050  f0400002          ORR      r0,r0,#2              ;3620
002054  f8890000          STRB     r0,[r9,#0]            ;3620
002058  e005              B        |L1.8294|
                  |L1.8282|
;;;3625   	else 						bdr_transmit_stat&=0xfd;
00205a  f8990000          LDRB     r0,[r9,#0]  ; bdr_transmit_stat
00205e  f00000fd          AND      r0,r0,#0xfd
002062  f8890000          STRB     r0,[r9,#0]
                  |L1.8294|
;;;3626   	}	
;;;3627   	
;;;3628   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_BDR3))
002066  20d2              MOVS     r0,#0xd2
002068  f7fffffe          BL       mess_find_unvol
00206c  b110              CBZ      r0,|L1.8308|
00206e  6828              LDR      r0,[r5,#0]  ; mess_data
002070  2877              CMP      r0,#0x77
002072  d009              BEQ      |L1.8328|
                  |L1.8308|
;;;3629   	{
;;;3630   	if(mess_data[1]==0) 		bdr_transmit_stat&=0xfb;
;;;3631   	else if(mess_data[1]==1) 	bdr_transmit_stat|=0x04;
;;;3632   	}
;;;3633   else 
;;;3634   	{
;;;3635   	if(bdr_avar_stat&0x01)  	bdr_transmit_stat|=0x04;
002074  7820              LDRB     r0,[r4,#0]  ; bdr_avar_stat
002076  07c0              LSLS     r0,r0,#31
002078  d019              BEQ      |L1.8366|
00207a  f8990000          LDRB     r0,[r9,#0]  ; bdr_transmit_stat
00207e  f0400004          ORR      r0,r0,#4
002082  f8890000          STRB     r0,[r9,#0]
002086  e018              B        |L1.8378|
                  |L1.8328|
002088  6868              LDR      r0,[r5,#4]            ;3630  ; mess_data
00208a  b110              CBZ      r0,|L1.8338|
00208c  2801              CMP      r0,#1                 ;3631
00208e  d007              BEQ      |L1.8352|
002090  e013              B        |L1.8378|
                  |L1.8338|
002092  f8990000          LDRB     r0,[r9,#0]            ;3630  ; bdr_transmit_stat
002096  f00000fb          AND      r0,r0,#0xfb           ;3630
00209a  f8890000          STRB     r0,[r9,#0]            ;3630
00209e  e00c              B        |L1.8378|
                  |L1.8352|
0020a0  f8990000          LDRB     r0,[r9,#0]            ;3631  ; bdr_transmit_stat
0020a4  f0400004          ORR      r0,r0,#4              ;3631
0020a8  f8890000          STRB     r0,[r9,#0]            ;3631
0020ac  e005              B        |L1.8378|
                  |L1.8366|
;;;3636   	else 						bdr_transmit_stat&=0xfb;
0020ae  f8990000          LDRB     r0,[r9,#0]  ; bdr_transmit_stat
0020b2  f00000fb          AND      r0,r0,#0xfb
0020b6  f8890000          STRB     r0,[r9,#0]
                  |L1.8378|
;;;3637   	}	
;;;3638   	
;;;3639   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_BDR4))
0020ba  20d2              MOVS     r0,#0xd2
0020bc  f7fffffe          BL       mess_find_unvol
0020c0  b110              CBZ      r0,|L1.8392|
0020c2  6828              LDR      r0,[r5,#0]  ; mess_data
0020c4  2878              CMP      r0,#0x78
0020c6  d009              BEQ      |L1.8412|
                  |L1.8392|
;;;3640   	{
;;;3641   	if(mess_data[1]==0) 		bdr_transmit_stat&=0xf7;
;;;3642   	else if(mess_data[1]==1) 	bdr_transmit_stat|=0x08;
;;;3643   	}
;;;3644   else 
;;;3645   	{
;;;3646   	if(bdr_avar_stat&0x01)  	bdr_transmit_stat|=0x08;
0020c8  7820              LDRB     r0,[r4,#0]  ; bdr_avar_stat
0020ca  07c0              LSLS     r0,r0,#31
0020cc  d019              BEQ      |L1.8450|
0020ce  f8990000          LDRB     r0,[r9,#0]  ; bdr_transmit_stat
0020d2  f0400008          ORR      r0,r0,#8
0020d6  f8890000          STRB     r0,[r9,#0]
0020da  e018              B        |L1.8462|
                  |L1.8412|
0020dc  6868              LDR      r0,[r5,#4]            ;3641  ; mess_data
0020de  b110              CBZ      r0,|L1.8422|
0020e0  2801              CMP      r0,#1                 ;3642
0020e2  d007              BEQ      |L1.8436|
0020e4  e013              B        |L1.8462|
                  |L1.8422|
0020e6  f8990000          LDRB     r0,[r9,#0]            ;3641  ; bdr_transmit_stat
0020ea  f00000f7          AND      r0,r0,#0xf7           ;3641
0020ee  f8890000          STRB     r0,[r9,#0]            ;3641
0020f2  e00c              B        |L1.8462|
                  |L1.8436|
0020f4  f8990000          LDRB     r0,[r9,#0]            ;3642  ; bdr_transmit_stat
0020f8  f0400008          ORR      r0,r0,#8              ;3642
0020fc  f8890000          STRB     r0,[r9,#0]            ;3642
002100  e005              B        |L1.8462|
                  |L1.8450|
;;;3647   	else 						bdr_transmit_stat&=0xf7;
002102  f8990000          LDRB     r0,[r9,#0]  ; bdr_transmit_stat
002106  f00000f7          AND      r0,r0,#0xf7
00210a  f8890000          STRB     r0,[r9,#0]
                  |L1.8462|
;;;3648   	}	
;;;3649   					 	
;;;3650   #endif
;;;3651   
;;;3652   #ifdef UKU_KONTUR
;;;3653   
;;;3654   //  
;;;3655   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_COMM))
;;;3656   	{
;;;3657   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_COMM,1);
;;;3658   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_COMM,1);
;;;3659   	}
;;;3660   else 
;;;3661   	{
;;;3662        if(  (!(avar_ind_stat&0x00007fff)) &&
;;;3663             ((!SK_REL_EN[0]) || (sk_av_stat[0]!=sasON))  &&
;;;3664             ((!SK_REL_EN[1]) || (sk_av_stat[1]!=sasON))  &&
;;;3665             ((!SK_REL_EN[2]) || (sk_av_stat[2]!=sasON))  /*&&
;;;3666             ((!SK_REL_EN[3]) || (sk_av_stat[3]!=sasON))*/  )SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_COMM,1);
;;;3667        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_COMM,1);
;;;3668   	}
;;;3669   
;;;3670   	
;;;3671   //rel_warm_plazma=0;
;;;3672   //    
;;;3673   /*
;;;3674   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_WARM))
;;;3675   	{
;;;3676   	if(mess_data[1]==0)
;;;3677   		{
;;;3678   		SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_WARM,1);
;;;3679   		rel_warm_plazma=1;
;;;3680   		}
;;;3681   	else if(mess_data[1]==1) 
;;;3682   		{
;;;3683   		SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_WARM,1);
;;;3684   		rel_warm_plazma=2;
;;;3685   		}
;;;3686        }
;;;3687   else 
;;;3688   	{
;;;3689   	if(warm_stat_k==wsOFF) 
;;;3690   		{
;;;3691   		SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_WARM,1);
;;;3692   		rel_warm_plazma=3;
;;;3693   		}
;;;3694        else 
;;;3695   		{
;;;3696   		SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_WARM,1);
;;;3697   		rel_warm_plazma=4;
;;;3698   		}
;;;3699   	}
;;;3700   */
;;;3701   // 
;;;3702   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_LIGHT))
;;;3703   	{
;;;3704   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LIGHT,1);
;;;3705   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LIGHT,1);
;;;3706        }
;;;3707   else 
;;;3708   	{
;;;3709   	if(sk_av_stat[0]!=sasON) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LIGHT,1);
;;;3710        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LIGHT,1);
;;;3711   	}
;;;3712   
;;;3713   
;;;3714   
;;;3715   //  
;;;3716   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_LOAD_OFF))
;;;3717   	{
;;;3718   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LOAD_OFF,1);
;;;3719   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LOAD_OFF,1);
;;;3720        }
;;;3721   else if(tloaddisable_cmnd==0)
;;;3722   	{
;;;3723   	SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LOAD_OFF,1);
;;;3724   	}
;;;3725   else if((tloaddisable_cmnd)&&(tloaddisable_cmnd<=11))
;;;3726   	{
;;;3727   	SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LOAD_OFF,1);
;;;3728   	}
;;;3729   
;;;3730   else 
;;;3731   	{
;;;3732   	if(!(tloaddisable_stat==tldsON)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LOAD_OFF,1);
;;;3733        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LOAD_OFF,1);
;;;3734   	} 
;;;3735   
;;;3736   //    
;;;3737   if(RELE_LOG)
;;;3738   	{
;;;3739   	if((mess_find_unvol(MESS2RELE_HNDL))&&(mess_data[0]==PARAM_RELE_VENT_WARM))
;;;3740   		{
;;;3741   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT_WARM,1);
;;;3742   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT_WARM,1);
;;;3743   		}
;;;3744   	else 
;;;3745   		{
;;;3746   		if(warm_stat_k==wsOFF) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT_WARM,1);
;;;3747   	     else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT_WARM,1);
;;;3748   		} 
;;;3749   
;;;3750   	}
;;;3751   else 
;;;3752   	{
;;;3753   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_VENT_WARM))
;;;3754   		{
;;;3755   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT_WARM,1);
;;;3756   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT_WARM,1);
;;;3757   		}
;;;3758   	else 
;;;3759   		{
;;;3760   		if(vent_stat_k==vsOFF) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT_WARM,1);
;;;3761   	     else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT_WARM,1);
;;;3762   		} 
;;;3763   	}
;;;3764   #endif
;;;3765   
;;;3766   
;;;3767   #ifdef UKU_TELECORE2015
;;;3768   //  
;;;3769   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_NET))
;;;3770   	{
;;;3771   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;3772   	else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_NET,1);
;;;3773   	}
;;;3774   else	if(!(avar_ind_stat&0x00000001)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;3775   else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_NET,1);
;;;3776   
;;;3777   
;;;3778   // 
;;;3779   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_LIGHT))
;;;3780   	{
;;;3781   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LIGHT,1);
;;;3782   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LIGHT,1);
;;;3783        }
;;;3784   else 
;;;3785   	{
;;;3786   	if(sk_av_stat[0]!=sasON) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LIGHT,1);
;;;3787        else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LIGHT,1);
;;;3788   	}
;;;3789   
;;;3790   // 
;;;3791   if((mess_find_unvol(MESS2RELE_HNDL))&&(mess_data[0]==PARAM_RELE_WARM))
;;;3792   	{
;;;3793   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_WARM,1);
;;;3794   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_WARM,1);
;;;3795   	}
;;;3796   else 
;;;3797   	{
;;;3798   	if(warm_stat_k==wsOFF) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_WARM,1);
;;;3799        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_WARM,1);
;;;3800   	} 
;;;3801   // 
;;;3802   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_VENT))
;;;3803   	{
;;;3804   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT,1);
;;;3805   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;3806   	}
;;;3807   else 
;;;3808   	{
;;;3809   	if(vent_stat_k==vsOFF) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT,1);
;;;3810        else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;3811   	} 
;;;3812   
;;;3813   //  
;;;3814   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_VVENT))
;;;3815   	{
;;;3816   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VVENT,1);
;;;3817   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VVENT,1);
;;;3818   	}
;;;3819   else 
;;;3820   	{
;;;3821   	if(vvent_stat_k==vsOFF) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VVENT,1);
;;;3822        else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VVENT,1);
;;;3823   	} 
;;;3824   
;;;3825   #endif
;;;3826   
;;;3827   #ifdef UKU_TELECORE2017
;;;3828   //  
;;;3829   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_NET))
;;;3830   	{
;;;3831   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;3832   	else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_NET,1);
;;;3833   	}
;;;3834   else	if(!(avar_ind_stat&0x00000001)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;3835   else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_NET,1);
;;;3836   
;;;3837   
;;;3838   // 
;;;3839   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_LIGHT))
;;;3840   	{
;;;3841   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LIGHT,1);
;;;3842   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LIGHT,1);
;;;3843        }
;;;3844   else 
;;;3845   	{
;;;3846   	if(sk_av_stat[0]!=sasON) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LIGHT,1);
;;;3847        else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LIGHT,1);
;;;3848   	}
;;;3849   
;;;3850   // 
;;;3851   if((mess_find_unvol(MESS2RELE_HNDL))&&(mess_data[0]==PARAM_RELE_WARM))
;;;3852   	{
;;;3853   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_WARM,1);
;;;3854   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_WARM,1);
;;;3855   	}
;;;3856   else 
;;;3857   	{
;;;3858   	if(warm_stat_k==wsOFF) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_WARM,1);
;;;3859        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_WARM,1);
;;;3860   	} 
;;;3861   // 
;;;3862   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_VENT))
;;;3863   	{
;;;3864   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT,1);
;;;3865   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;3866   	}
;;;3867   else 
;;;3868   	{
;;;3869   	if(vent_stat_k==vsOFF) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT,1);
;;;3870        else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;3871   	} 
;;;3872   
;;;3873   //  
;;;3874   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_VVENT))
;;;3875   	{
;;;3876   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VVENT,1);
;;;3877   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VVENT,1);
;;;3878   	}
;;;3879   else 
;;;3880   	{
;;;3881   	if(vvent_stat_k==vsOFF) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VVENT,1);
;;;3882        else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VVENT,1);
;;;3883   	} 
;;;3884   
;;;3885   #endif
;;;3886   
;;;3887   if(NUMBDR==1)
00210e  4871              LDR      r0,|L1.8916|
002110  8800              LDRH     r0,[r0,#0]  ; NUMBDR
002112  2801              CMP      r0,#1
002114  d17e              BNE      |L1.8724|
;;;3888   	{
;;;3889   	char ii_;
;;;3890   	char bdr_avar_stat_temp=0;
002116  f04f0000          MOV      r0,#0
;;;3891   	for	(ii_=0;ii_<4;ii_++)
00211a  4601              MOV      r1,r0
;;;3892   		{
;;;3893   		// 
;;;3894   		if((RELE_SET_MASK[ii_]&0x01)&&
;;;3895   			(load_U<(USIGN*10)))			bdr_avar_stat_temp|=(1<<ii_);
;;;3896   		// 
;;;3897   		if((RELE_SET_MASK[ii_]&0x02)&&
;;;3898   			(sp_ch_stat==scsWRK))			bdr_avar_stat_temp|=(1<<ii_);
;;;3899   		// 
;;;3900   		if((RELE_SET_MASK[ii_]&0x04)&&
;;;3901   			(hv_vz_stat==scsWRK))			bdr_avar_stat_temp|=(1<<ii_);
;;;3902   		//  
;;;3903   		if((RELE_SET_MASK[ii_]&0x08)&&
;;;3904   			(avar_stat))					bdr_avar_stat_temp|=(1<<ii_);
;;;3905   		//U 
;;;3906   		if((RELE_SET_MASK[ii_]&0x10)&&
;;;3907   			(uout_av==1))					bdr_avar_stat_temp|=(1<<ii_);
00211c  f8dfa1b8          LDR      r10,|L1.8920|
;;;3908   		//U 
;;;3909   		if((RELE_SET_MASK[ii_]&0x20)&&
;;;3910   			(uout_av==2))					bdr_avar_stat_temp|=(1<<ii_);
;;;3911   		if((RELE_SET_MASK[ii_]&0x40)&&
;;;3912   			(
;;;3913   			((bps[0]._av&(1<<4))&&(NUMIST>=1))||
002120  f8df91b8          LDR      r9,|L1.8924|
002124  4d6e              LDR      r5,|L1.8928|
002126  f8dfb1bc          LDR      r11,|L1.8932|
00212a  f04f0301          MOV      r3,#1                 ;2891
                  |L1.8494|
00212e  f93b2011          LDRSH    r2,[r11,r1,LSL #1]    ;3894
002132  ea5f7cc2          LSLS     r12,r2,#31            ;3894
002136  d010              BEQ      |L1.8538|
002138  f8dfc1ac          LDR      r12,|L1.8936|
00213c  f9b8e000          LDRSH    lr,[r8,#0]            ;3895  ; load_U
002140  f9bcc000          LDRSH    r12,[r12,#0]          ;3895  ; USIGN
002144  eb0c0c8c          ADD      r12,r12,r12,LSL #2    ;3895
002148  ebbe0f4c          CMP      lr,r12,LSL #1         ;3895
00214c  da05              BGE      |L1.8538|
00214e  fa03fc01          LSL      r12,r3,r1             ;3895
002152  ea4c0c00          ORR      r12,r12,r0            ;3895
002156  f00c00ff          AND      r0,r12,#0xff          ;3895
                  |L1.8538|
00215a  ea5f7c82          LSLS     r12,r2,#30            ;3897
00215e  d50a              BPL      |L1.8566|
002160  f896c000          LDRB     r12,[r6,#0]           ;3898  ; sp_ch_stat
002164  f1bc0f02          CMP      r12,#2                ;3898
002168  d105              BNE      |L1.8566|
00216a  fa03fc01          LSL      r12,r3,r1             ;3898
00216e  ea4c0c00          ORR      r12,r12,r0            ;3898
002172  f00c00ff          AND      r0,r12,#0xff          ;3898
                  |L1.8566|
002176  ea5f7c42          LSLS     r12,r2,#29            ;3900
00217a  d50a              BPL      |L1.8594|
00217c  f897c000          LDRB     r12,[r7,#0]           ;3901  ; hv_vz_stat
002180  f1bc0f02          CMP      r12,#2                ;3901
002184  d105              BNE      |L1.8594|
002186  fa03fc01          LSL      r12,r3,r1             ;3901
00218a  ea4c0c00          ORR      r12,r12,r0            ;3901
00218e  f00c00ff          AND      r0,r12,#0xff          ;3901
                  |L1.8594|
002192  ea5f7c02          LSLS     r12,r2,#28            ;3903
002196  d50c              BPL      |L1.8626|
002198  f8dfc150          LDR      r12,|L1.8940|
00219c  f8dcc000          LDR      r12,[r12,#0]          ;3904  ; avar_stat
0021a0  f1bc0f00          CMP      r12,#0                ;3904
0021a4  d005              BEQ      |L1.8626|
0021a6  fa03fc01          LSL      r12,r3,r1             ;3904
0021aa  ea4c0c00          ORR      r12,r12,r0            ;3904
0021ae  f00c00ff          AND      r0,r12,#0xff          ;3904
                  |L1.8626|
0021b2  ea5f6cc2          LSLS     r12,r2,#27            ;3906
0021b6  d50a              BPL      |L1.8654|
0021b8  f89ac000          LDRB     r12,[r10,#0]          ;3907  ; uout_av
0021bc  f1bc0f01          CMP      r12,#1                ;3907
0021c0  d105              BNE      |L1.8654|
0021c2  fa03fc01          LSL      r12,r3,r1             ;3907
0021c6  ea4c0c00          ORR      r12,r12,r0            ;3907
0021ca  f00c00ff          AND      r0,r12,#0xff          ;3907
                  |L1.8654|
0021ce  ea5f6c82          LSLS     r12,r2,#26            ;3909
0021d2  d50a              BPL      |L1.8682|
0021d4  f89ac000          LDRB     r12,[r10,#0]          ;3910  ; uout_av
0021d8  f1bc0f02          CMP      r12,#2                ;3910
0021dc  d105              BNE      |L1.8682|
0021de  fa03fc01          LSL      r12,r3,r1             ;3910
0021e2  ea4c0c00          ORR      r12,r12,r0            ;3910
0021e6  f00c00ff          AND      r0,r12,#0xff          ;3910
                  |L1.8682|
0021ea  ea5f6c42          LSLS     r12,r2,#25            ;3911
0021ee  d525              BPL      |L1.8764|
0021f0  f899c001          LDRB     r12,[r9,#1]  ; bps
0021f4  ea5f6ccc          LSLS     r12,r12,#27
0021f8  d504              BPL      |L1.8708|
0021fa  f9b5c000          LDRSH    r12,[r5,#0]  ; NUMIST
0021fe  f1bc0f01          CMP      r12,#1
002202  da15              BGE      |L1.8752|
                  |L1.8708|
;;;3914   			((bps[1]._av&(1<<4))&&(NUMIST>=2))||
002204  f899c05d          LDRB     r12,[r9,#0x5d]  ; bps
002208  ea5f6ccc          LSLS     r12,r12,#27
00220c  d506              BPL      |L1.8732|
00220e  f9b5c000          LDRSH    r12,[r5,#0]  ; NUMIST
002212  e000              B        |L1.8726|
                  |L1.8724|
002214  e047              B        |L1.8870|
                  |L1.8726|
002216  f1bc0f02          CMP      r12,#2
00221a  da09              BGE      |L1.8752|
                  |L1.8732|
;;;3915   			((bps[2]._av&(1<<4))&&(NUMIST>=3))
00221c  f899c0b9          LDRB     r12,[r9,#0xb9]  ; bps
002220  ea5f6ccc          LSLS     r12,r12,#27
002224  d50a              BPL      |L1.8764|
002226  f9b5c000          LDRSH    r12,[r5,#0]  ; NUMIST
00222a  f1bc0f03          CMP      r12,#3
00222e  db05              BLT      |L1.8764|
                  |L1.8752|
;;;3916   			))bdr_avar_stat_temp|=(1<<ii_);
002230  fa03fc01          LSL      r12,r3,r1
002234  ea4c0c00          ORR      r12,r12,r0
002238  f00c00ff          AND      r0,r12,#0xff
                  |L1.8764|
;;;3917   		if((RELE_SET_MASK[ii_]&0x80)&&
00223c  ea5f6c02          LSLS     r12,r2,#24
002240  d523              BPL      |L1.8842|
;;;3918   			(
;;;3919   			((bps[0]._av&(0x0f))&&(NUMIST>=1))||
002242  f899c001          LDRB     r12,[r9,#1]  ; bps
002246  ea5f7c0c          LSLS     r12,r12,#28
00224a  d004              BEQ      |L1.8790|
00224c  f9b5c000          LDRSH    r12,[r5,#0]  ; NUMIST
002250  f1bc0f01          CMP      r12,#1
002254  da13              BGE      |L1.8830|
                  |L1.8790|
;;;3920   			((bps[1]._av&(0x0f))&&(NUMIST>=2))||
002256  f899c05d          LDRB     r12,[r9,#0x5d]  ; bps
00225a  ea5f7c0c          LSLS     r12,r12,#28
00225e  d004              BEQ      |L1.8810|
002260  f9b5c000          LDRSH    r12,[r5,#0]  ; NUMIST
002264  f1bc0f02          CMP      r12,#2
002268  da09              BGE      |L1.8830|
                  |L1.8810|
;;;3921   			((bps[2]._av&(0x0f))&&(NUMIST>=3))
00226a  f899c0b9          LDRB     r12,[r9,#0xb9]  ; bps
00226e  ea5f7c0c          LSLS     r12,r12,#28
002272  d00a              BEQ      |L1.8842|
002274  f9b5c000          LDRSH    r12,[r5,#0]  ; NUMIST
002278  f1bc0f03          CMP      r12,#3
00227c  db05              BLT      |L1.8842|
                  |L1.8830|
;;;3922   			))bdr_avar_stat_temp|=(1<<ii_);
00227e  fa03fc01          LSL      r12,r3,r1
002282  ea4c0c00          ORR      r12,r12,r0
002286  f00c00ff          AND      r0,r12,#0xff
                  |L1.8842|
;;;3923   
;;;3924   		if(!(RELE_SET_MASK[ii_]&(1<<15))) bdr_avar_stat_temp^=(1<<ii_); 
00228a  0412              LSLS     r2,r2,#16
00228c  d404              BMI      |L1.8856|
00228e  fa03f201          LSL      r2,r3,r1
002292  ea820200          EOR      r2,r2,r0
002296  b2d0              UXTB     r0,r2
                  |L1.8856|
002298  f1010101          ADD      r1,r1,#1              ;3891
00229c  b2c9              UXTB     r1,r1                 ;3891
00229e  2904              CMP      r1,#4                 ;3891
0022a0  f4ffaf45          BCC      |L1.8494|
;;;3925   		}
;;;3926   	bdr_avar_stat=bdr_avar_stat_temp;
0022a4  7020              STRB     r0,[r4,#0]
                  |L1.8870|
;;;3927   	}
;;;3928   }
0022a6  e8bd9ff0          POP      {r4-r12,pc}
0022aa  0000              DCW      0x0000
                  |L1.8876|
                          DCD      ips_bat_av_stat
                  |L1.8880|
                          DCD      load_U
                  |L1.8884|
                          DCD      sp_ch_stat
                  |L1.8888|
                          DCD      hv_vz_stat
                  |L1.8892|
                          DCD      DOP_RELE_FUNC
                  |L1.8896|
                          DCD      speedChIsOn
                  |L1.8900|
                          DCD      ||area_number.22||
                  |L1.8904|
                          DCD      UVENTOFF
                  |L1.8908|
                          DCD      bdr_transmit_stat
                  |L1.8912|
                          DCD      bdr_avar_stat
                  |L1.8916|
                          DCD      NUMBDR
                  |L1.8920|
                          DCD      uout_av
                  |L1.8924|
                          DCD      bps
                  |L1.8928|
                          DCD      NUMIST
                  |L1.8932|
                          DCD      RELE_SET_MASK
                  |L1.8936|
                          DCD      USIGN
                  |L1.8940|
                          DCD      avar_stat
                          ENDP

                  bps_hndl PROC
;;;3931   //-----------------------------------------------
;;;3932   void bps_hndl(void)
0022f0  e92d5ff0          PUSH     {r4-r12,lr}
;;;3933   {
;;;3934   char ptr__,i;
;;;3935   unsigned short tempUS;
;;;3936   
;;;3937   if(sh_cnt0<10)
0022f4  4eff              LDR      r6,|L1.9972|
;;;3938   	{
;;;3939   	sh_cnt0++;
;;;3940   	if(sh_cnt0>=10)
;;;3941   		{
;;;3942   		sh_cnt0=0;
0022f6  2700              MOVS     r7,#0
;;;3943   		b1Hz_sh=1;
0022f8  f04f0a01          MOV      r10,#1
0022fc  7cb0              LDRB     r0,[r6,#0x12]         ;3937  ; sh_cnt0
0022fe  280a              CMP      r0,#0xa               ;3937
002300  d208              BCS      |L1.8980|
002302  f1000001          ADD      r0,r0,#1              ;3939
002306  b2c0              UXTB     r0,r0                 ;3939
002308  74b0              STRB     r0,[r6,#0x12]         ;3939
00230a  280a              CMP      r0,#0xa               ;3940
00230c  d302              BCC      |L1.8980|
00230e  74b7              STRB     r7,[r6,#0x12]         ;3942
002310  f886a013          STRB     r10,[r6,#0x13]
                  |L1.8980|
;;;3944   		}
;;;3945   	}
;;;3946   
;;;3947   /*if(sh_cnt1<5)
;;;3948   	{
;;;3949   	sh_cnt1++;
;;;3950   	if(sh_cnt1==5)
;;;3951   		{
;;;3952   		sh_cnt1=0;
;;;3953   		b2Hz_sh=1;
;;;3954   		}
;;;3955   	} */
;;;3956   
;;;3957   
;;;3958   /*
;;;3959   if(mess_find(MESS_SRC_ON_OFF))
;;;3960   	{
;;;3961   	if(mess_data[0]==_MESS_SRC_MASK_BLOK_2SEC)
;;;3962   		{
;;;3963   		char i;
;;;3964   		for(i=0;i<NUMIST;i++)
;;;3965   			{
;;;3966   			if(mess_data[1]&(1<<i))src[i]._ist_blok_cnt=20;
;;;3967   			}
;;;3968   		
;;;3969   		}
;;;3970   	else if(mess_data[0]==_MESS_SRC_MASK_UNBLOK)
;;;3971   		{
;;;3972   		char i;
;;;3973   		for(i=0;i<NUMIST;i++)
;;;3974   			{
;;;3975   			if(mess_data[1]&(1<<i))src[i]._ist_blok_cnt=0;
;;;3976   			}
;;;3977   		
;;;3978   		}
;;;3979   	}
;;;3980   	
;;;3981   else if(mess_find(_MESS_SRC_MASK_ON))
;;;3982   	{				
;;;3983   	if(mess_data[0]==_MESS_SRC_MASK_ON)
;;;3984   		{
;;;3985   		char i;
;;;3986   		for(i=0;i<NUMIST;i++)
;;;3987   			{
;;;3988   			if(mess_data[1]&(1<<i))
;;;3989   				{
;;;3990   				src[i]._ist_blok_cnt=0;
;;;3991   				src[i]._flags_tu=2;
;;;3992   				}
;;;3993   			}
;;;3994   		
;;;3995   		}				
;;;3996   	}*/
;;;3997   
;;;3998   
;;;3999   
;;;4000   /*else*/ 
;;;4001   bps_on_mask=0;
002314  f8a6704c          STRH     r7,[r6,#0x4c]
;;;4002   bps_off_mask=0;
002318  f8a6704e          STRH     r7,[r6,#0x4e]
;;;4003   
;;;4004   if(mess_find_unvol(MESS2BPS_HNDL))
00231c  20cd              MOVS     r0,#0xcd
00231e  f7fffffe          BL       mess_find_unvol
;;;4005   	{
;;;4006   	if(mess_data[0]==PARAM_BPS_ALL_OFF_AFTER_2SEC)
;;;4007   		{
;;;4008   		bps_off_mask=0xffff;
;;;4009   		}
;;;4010   
;;;4011   	if(mess_data[0]==PARAM_BPS_MASK_OFF_AFTER_2SEC)
;;;4012   		{
;;;4013   		bps_off_mask=mess_data[1];
;;;4014   		}
;;;4015   
;;;4016   	if(mess_data[0]==PARAM_BPS_MASK_ON)
;;;4017   		{
;;;4018   		bps_on_mask=mess_data[1];
;;;4019   		}
;;;4020   
;;;4021   	if(mess_data[0]==PARAM_BPS_ALL_ON)
;;;4022   		{
;;;4023   		bps_on_mask=0xffff;
;;;4024   		}
;;;4025   
;;;4026   	if(mess_data[0]==PARAM_BPS_MASK_ON_OFF_AFTER_2SEC)
;;;4027   		{
;;;4028   		bps_on_mask=mess_data[1];
;;;4029   		bps_off_mask=~(mess_data[1]);
;;;4030   		}
;;;4031   
;;;4032   
;;;4033   	for(i=0;i<=NUMIST;i++)
;;;4034   		{
;;;4035   		if(bps_off_mask&(1<<i)) bps[i]._blok_cnt++;
002322  f8df83d4          LDR      r8,|L1.9976|
002326  f8dfb3d4          LDR      r11,|L1.9980|
00232a  b3a0              CBZ      r0,|L1.9110|
00232c  4af4              LDR      r2,|L1.9984|
00232e  f64f73ff          MOV      r3,#0xffff            ;4008
002332  6810              LDR      r0,[r2,#0]            ;4006  ; mess_data
002334  28ce              CMP      r0,#0xce              ;4006
002336  d101              BNE      |L1.9020|
002338  f8a6304e          STRH     r3,[r6,#0x4e]         ;4008
                  |L1.9020|
00233c  28cf              CMP      r0,#0xcf              ;4011
00233e  d102              BNE      |L1.9030|
002340  6851              LDR      r1,[r2,#4]            ;4013  ; mess_data
002342  f8a6104e          STRH     r1,[r6,#0x4e]         ;4013
                  |L1.9030|
002346  28d1              CMP      r0,#0xd1              ;4016
002348  d102              BNE      |L1.9040|
00234a  6851              LDR      r1,[r2,#4]            ;4018  ; mess_data
00234c  f8a6104c          STRH     r1,[r6,#0x4c]         ;4018
                  |L1.9040|
002350  28d2              CMP      r0,#0xd2              ;4021
002352  d101              BNE      |L1.9048|
002354  f8a6304c          STRH     r3,[r6,#0x4c]         ;4023
                  |L1.9048|
002358  28d0              CMP      r0,#0xd0              ;4026
00235a  d106              BNE      |L1.9066|
00235c  6850              LDR      r0,[r2,#4]            ;4028  ; mess_data
00235e  f8a6004c          STRH     r0,[r6,#0x4c]         ;4028
002362  ea6f0000          MVN      r0,r0                 ;4029
002366  f8a6004e          STRH     r0,[r6,#0x4e]         ;4029
                  |L1.9066|
00236a  f04f0400          MOV      r4,#0                 ;4033
00236e  e037              B        |L1.9184|
                  |L1.9072|
002370  f8b6004e          LDRH     r0,[r6,#0x4e]  ; bps_off_mask
002374  fa0af904          LSL      r9,r10,r4
002378  ea190f00          TST      r9,r0
00237c  d00c              BEQ      |L1.9112|
00237e  ebc400c4          RSB      r0,r4,r4,LSL #3
002382  eb001004          ADD      r0,r0,r4,LSL #4
002386  eb080080          ADD      r0,r8,r0,LSL #2
00238a  f8301f40          LDRH     r1,[r0,#0x40]!
00238e  f1010101          ADD      r1,r1,#1
002392  8001              STRH     r1,[r0,#0]
002394  e008              B        |L1.9128|
                  |L1.9110|
002396  e028              B        |L1.9194|
                  |L1.9112|
;;;4036   		else bps[i]._blok_cnt=0;
002398  ebc400c4          RSB      r0,r4,r4,LSL #3
00239c  eb001004          ADD      r0,r0,r4,LSL #4
0023a0  eb080080          ADD      r0,r8,r0,LSL #2
0023a4  f8a07040          STRH     r7,[r0,#0x40]
                  |L1.9128|
;;;4037   		gran(&bps[i]._blok_cnt,0,50);
0023a8  ebc400c4          RSB      r0,r4,r4,LSL #3
0023ac  eb001004          ADD      r0,r0,r4,LSL #4
0023b0  eb080580          ADD      r5,r8,r0,LSL #2
0023b4  f1050040          ADD      r0,r5,#0x40
0023b8  2232              MOVS     r2,#0x32
0023ba  2100              MOVS     r1,#0
0023bc  f7fffffe          BL       gran
;;;4038   		if(bps[i]._blok_cnt>20) bps[i]._flags_tu=1;
0023c0  f9b50040          LDRSH    r0,[r5,#0x40]
0023c4  2814              CMP      r0,#0x14
0023c6  dd01              BLE      |L1.9164|
0023c8  f885a02c          STRB     r10,[r5,#0x2c]
                  |L1.9164|
;;;4039   		if(bps_on_mask&(1<<i)) bps[i]._flags_tu=0;
0023cc  f8b6004c          LDRH     r0,[r6,#0x4c]  ; bps_on_mask
0023d0  ea190f00          TST      r9,r0
0023d4  d001              BEQ      |L1.9178|
0023d6  f885702c          STRB     r7,[r5,#0x2c]
                  |L1.9178|
0023da  f1040401          ADD      r4,r4,#1              ;4033
0023de  b2e4              UXTB     r4,r4                 ;4033
                  |L1.9184|
0023e0  f9bb0000          LDRSH    r0,[r11,#0]           ;4033  ; NUMIST
0023e4  4284              CMP      r4,r0                 ;4033
0023e6  ddc3              BLE      |L1.9072|
0023e8  e08a              B        |L1.9472|
                  |L1.9194|
;;;4040   	     }
;;;4041   
;;;4042   	
;;;4043   /*
;;;4044   
;;;4045   	if(bps_all_off_cnt>20)
;;;4046   		{
;;;4047   		for(i=0;i<=NUMIST;i++)
;;;4048   			{
;;;4049   	     	bps[i]._flags_tu=1;
;;;4050   	     	}
;;;4051   		}
;;;4052   	else if(bps_mask_off_cnt>20)
;;;4053   		{
;;;4054   		for(i=0;i<=NUMIST;i++)
;;;4055   			{
;;;4056   			if(mess_data[1]&(1<<i)) bps[i]._flags_tu=1;
;;;4057   	     	}
;;;4058   		}	
;;;4059   		
;;;4060   	else if(bps_mask_on_off_cnt>20)
;;;4061   		{
;;;4062   		for(i=0;i<=NUMIST;i++)
;;;4063   			{
;;;4064   			if(mess_data[1]&(1<<i)) bps[i]._flags_tu=1;
;;;4065   			else bps[i]._flags_tu=0;
;;;4066   	     	}
;;;4067   		}
;;;4068   		
;;;4069   	if(mess_data[0]==PARAM_BPS_MASK_ON)
;;;4070   		{
;;;4071   		for(i=0;i<=NUMIST;i++)
;;;4072   			{
;;;4073   			if(mess_data[1]&(1<<i)) bps[i]._flags_tu=0;
;;;4074   	     	}
;;;4075   		}
;;;4076   */										
;;;4077   	}
;;;4078   
;;;4079   
;;;4080   else if(b1Hz_sh)
0023ea  7cf0              LDRB     r0,[r6,#0x13]  ; b1Hz_sh
0023ec  b3f0              CBZ      r0,|L1.9324|
;;;4081   	{
;;;4082   	ptr__=0;
0023ee  f04f0400          MOV      r4,#0
;;;4083        for(i=0;i<=NUMIST;i++)
0023f2  4621              MOV      r1,r4
0023f4  f9bb0000          LDRSH    r0,[r11,#0]           ;4033
0023f8  e00a              B        |L1.9232|
                  |L1.9210|
;;;4084   		{
;;;4085   	     bps[i]._flags_tu=1;
0023fa  ebc102c1          RSB      r2,r1,r1,LSL #3
0023fe  eb021201          ADD      r2,r2,r1,LSL #4
002402  eb080282          ADD      r2,r8,r2,LSL #2
002406  f882a02c          STRB     r10,[r2,#0x2c]
00240a  f1010101          ADD      r1,r1,#1              ;4083
00240e  b2c9              UXTB     r1,r1                 ;4083
                  |L1.9232|
002410  4281              CMP      r1,r0                 ;4083
002412  ddf2              BLE      |L1.9210|
;;;4086   	     }	
;;;4087     	     
;;;4088     	for(i=0;(i<NUMIST)&&(ptr__<num_necc);i++)
002414  f04f0100          MOV      r1,#0
002418  e022              B        |L1.9312|
                  |L1.9242|
;;;4089     		{
;;;4090   		char ii,iii;
;;;4091   
;;;4092   		ii=(char)NUMIST;
00241a  b2c2              UXTB     r2,r0
;;;4093   		//if(ii<0)ii=0;
;;;4094   		if(ii>32)ii=32;
00241c  2a20              CMP      r2,#0x20
00241e  d901              BLS      |L1.9252|
002420  f04f0220          MOV      r2,#0x20
                  |L1.9252|
;;;4095   		iii=numOfForvardBps;
002424  7e73              LDRB     r3,[r6,#0x19]  ; numOfForvardBps
;;;4096   		//if(iii<0)iii=0;
;;;4097   		if(iii>=NUMIST)iii=0;
002426  4283              CMP      r3,r0
002428  db01              BLT      |L1.9262|
00242a  f04f0300          MOV      r3,#0
                  |L1.9262|
;;;4098   		iii+=i;
00242e  440b              ADD      r3,r3,r1
002430  b2db              UXTB     r3,r3
;;;4099   		iii=iii%ii;
002432  fbb3f5f2          UDIV     r5,r3,r2
002436  fb023215          MLS      r2,r2,r5,r3
;;;4100   		
;;;4101     	     if((bps[iii]._state==bsRDY)||(bps[iii]._state==bsWRK))
00243a  ebc203c2          RSB      r3,r2,r2,LSL #3
00243e  eb031202          ADD      r2,r3,r2,LSL #4
002442  eb080282          ADD      r2,r8,r2,LSL #2
002446  7893              LDRB     r3,[r2,#2]
002448  2b02              CMP      r3,#2
00244a  d001              BEQ      |L1.9296|
00244c  2b01              CMP      r3,#1
00244e  d104              BNE      |L1.9306|
                  |L1.9296|
;;;4102     	         	{
;;;4103     	         	bps[iii]._flags_tu=0;
002450  f882702c          STRB     r7,[r2,#0x2c]
;;;4104     	         	ptr__++;
002454  f1040401          ADD      r4,r4,#1
002458  b2e4              UXTB     r4,r4
                  |L1.9306|
00245a  f1010101          ADD      r1,r1,#1              ;4088
00245e  b2c9              UXTB     r1,r1                 ;4088
                  |L1.9312|
002460  4281              CMP      r1,r0                 ;4088
002462  da06              BGE      |L1.9330|
002464  4aa7              LDR      r2,|L1.9988|
002466  f9b22000          LDRSH    r2,[r2,#0]            ;4088  ; num_necc
00246a  e000              B        |L1.9326|
                  |L1.9324|
00246c  e048              B        |L1.9472|
                  |L1.9326|
00246e  4294              CMP      r4,r2                 ;4088
002470  dbd3              BLT      |L1.9242|
                  |L1.9330|
;;;4105     	         	}
;;;4106   			
;;;4107     	     }
;;;4108   	bps[numOfForvardBps_old]._flags_tu=0;
002472  7eb1              LDRB     r1,[r6,#0x1a]  ; numOfForvardBps_old
002474  ebc102c1          RSB      r2,r1,r1,LSL #3
002478  eb021101          ADD      r1,r2,r1,LSL #4
00247c  eb080181          ADD      r1,r8,r1,LSL #2
002480  f881702c          STRB     r7,[r1,#0x2c]
;;;4109   
;;;4110   	if(main_1Hz_cnt<60)
002484  49a0              LDR      r1,|L1.9992|
002486  f9b11000          LDRSH    r1,[r1,#0]  ; main_1Hz_cnt
00248a  293c              CMP      r1,#0x3c
00248c  da0f              BGE      |L1.9390|
;;;4111   		{
;;;4112        	for(i=0;i<=NUMIST;i++)
00248e  f04f0100          MOV      r1,#0
002492  e00a              B        |L1.9386|
                  |L1.9364|
;;;4113   			{
;;;4114   	     	bps[i]._flags_tu=0;
002494  ebc102c1          RSB      r2,r1,r1,LSL #3
002498  eb021201          ADD      r2,r2,r1,LSL #4
00249c  eb080282          ADD      r2,r8,r2,LSL #2
0024a0  f882702c          STRB     r7,[r2,#0x2c]
0024a4  f1010101          ADD      r1,r1,#1              ;4112
0024a8  b2c9              UXTB     r1,r1                 ;4112
                  |L1.9386|
0024aa  4281              CMP      r1,r0                 ;4112
0024ac  ddf2              BLE      |L1.9364|
                  |L1.9390|
;;;4115   	     	}	
;;;4116   		}
;;;4117   	if(ipsBlckStat)
0024ae  4997              LDR      r1,|L1.9996|
0024b0  8809              LDRH     r1,[r1,#0]  ; ipsBlckStat
0024b2  b179              CBZ      r1,|L1.9428|
;;;4118   		{
;;;4119        	for(i=0;i<=NUMIST;i++)
0024b4  f04f0100          MOV      r1,#0
0024b8  e00a              B        |L1.9424|
                  |L1.9402|
;;;4120   			{
;;;4121   	     	bps[i]._flags_tu=1;
0024ba  ebc102c1          RSB      r2,r1,r1,LSL #3
0024be  eb021201          ADD      r2,r2,r1,LSL #4
0024c2  eb080282          ADD      r2,r8,r2,LSL #2
0024c6  f882a02c          STRB     r10,[r2,#0x2c]
0024ca  f1010101          ADD      r1,r1,#1              ;4119
0024ce  b2c9              UXTB     r1,r1                 ;4119
                  |L1.9424|
0024d0  4281              CMP      r1,r0                 ;4119
0024d2  ddf2              BLE      |L1.9402|
                  |L1.9428|
;;;4122   	     	}
;;;4123   		}
;;;4124   
;;;4125        for(i=0;i<=NUMIST;i++)
0024d4  f04f0100          MOV      r1,#0
;;;4126   		{
;;;4127   	    if(bps[i]._flags_tu==1) 	bps[i]._x_=-50;
0024d8  f06f0331          MVN      r3,#0x31
0024dc  e00e              B        |L1.9468|
                  |L1.9438|
0024de  ebc102c1          RSB      r2,r1,r1,LSL #3
0024e2  eb021201          ADD      r2,r2,r1,LSL #4
0024e6  eb080282          ADD      r2,r8,r2,LSL #2
0024ea  f892402c          LDRB     r4,[r2,#0x2c]
0024ee  2c01              CMP      r4,#1
0024f0  d101              BNE      |L1.9462|
0024f2  f8a23050          STRH     r3,[r2,#0x50]
                  |L1.9462|
0024f6  f1010101          ADD      r1,r1,#1              ;4125
0024fa  b2c9              UXTB     r1,r1                 ;4125
                  |L1.9468|
0024fc  4281              CMP      r1,r0                 ;4125
0024fe  ddee              BLE      |L1.9438|
                  |L1.9472|
;;;4128   	   	}	
;;;4129   		 
;;;4130     	}
;;;4131   
;;;4132   
;;;4133   for(i=0;i<NUMIST;i++)
002500  f04f0000          MOV      r0,#0
;;;4134        {
;;;4135        if(bps[i]._ist_blok_host_cnt!=0)
;;;4136             {
;;;4137             bps[i]._flags_tu=99;
002504  f04f0463          MOV      r4,#0x63
002508  f9bb1000          LDRSH    r1,[r11,#0]           ;4033
00250c  e00f              B        |L1.9518|
                  |L1.9486|
00250e  ebc002c0          RSB      r2,r0,r0,LSL #3       ;4135
002512  eb021200          ADD      r2,r2,r0,LSL #4       ;4135
002516  eb080282          ADD      r2,r8,r2,LSL #2       ;4135
00251a  6bd3              LDR      r3,[r2,#0x3c]         ;4135
00251c  b123              CBZ      r3,|L1.9512|
00251e  f882402c          STRB     r4,[r2,#0x2c]
;;;4138   	     bps[i]._ist_blok_host_cnt--;
002522  f1a30301          SUB      r3,r3,#1
002526  63d3              STR      r3,[r2,#0x3c]
                  |L1.9512|
002528  f1000001          ADD      r0,r0,#1              ;4133
00252c  b2c0              UXTB     r0,r0                 ;4133
                  |L1.9518|
00252e  4288              CMP      r0,r1                 ;4133
002530  dbed              BLT      |L1.9486|
;;;4139             }
;;;4140        }
;;;4141   
;;;4142   
;;;4143   
;;;4144   
;;;4145   b1Hz_sh=0;
002532  74f7              STRB     r7,[r6,#0x13]
;;;4146   
;;;4147   
;;;4148   num_of_wrks_bps=0;
002534  73f7              STRB     r7,[r6,#0xf]
;;;4149   tempUS=0;
002536  f04f0200          MOV      r2,#0
;;;4150   for(i=0;i<NUMIST;i++)
00253a  4610              MOV      r0,r2
00253c  e013              B        |L1.9574|
                  |L1.9534|
;;;4151   	{
;;;4152   	if(bps[i]._state==bsWRK)
00253e  ebc003c0          RSB      r3,r0,r0,LSL #3
002542  eb031300          ADD      r3,r3,r0,LSL #4
002546  eb080383          ADD      r3,r8,r3,LSL #2
00254a  789c              LDRB     r4,[r3,#2]
00254c  2c01              CMP      r4,#1
00254e  d107              BNE      |L1.9568|
;;;4153   		{
;;;4154   		num_of_wrks_bps++;
002550  7bf4              LDRB     r4,[r6,#0xf]  ; num_of_wrks_bps
002552  f1040401          ADD      r4,r4,#1
002556  73f4              STRB     r4,[r6,#0xf]
;;;4155   		if(bps[i]._Uii>tempUS)tempUS=bps[i]._Uii;
002558  69db              LDR      r3,[r3,#0x1c]
00255a  4293              CMP      r3,r2
00255c  dd00              BLE      |L1.9568|
00255e  b29a              UXTH     r2,r3
                  |L1.9568|
002560  f1000001          ADD      r0,r0,#1              ;4150
002564  b2c0              UXTB     r0,r0                 ;4150
                  |L1.9574|
002566  4288              CMP      r0,r1                 ;4150
002568  dbe9              BLT      |L1.9534|
;;;4156   		}
;;;4157   	}
;;;4158   Ubpsmax=tempUS;
00256a  87b2              STRH     r2,[r6,#0x3c]
;;;4159   
;;;4160   bPARALLEL_ENOUG=0;
00256c  7777              STRB     r7,[r6,#0x1d]
;;;4161   bPARALLEL_NOT_ENOUG=1;
00256e  f886a01c          STRB     r10,[r6,#0x1c]
;;;4162   
;;;4163   for(i=0;i<NUMIST;i++)
002572  f04f0000          MOV      r0,#0
;;;4164   	{
;;;4165   	if(bps[i]._Ti>=TSIGN)
002576  4a66              LDR      r2,|L1.10000|
002578  f9b23000          LDRSH    r3,[r2,#0]
;;;4166   		{
;;;4167   		bPARALLEL_ENOUG=1;
;;;4168   		}
;;;4169   	if(bps[i]._Ti>=(TSIGN-5))
00257c  f1a30405          SUB      r4,r3,#5
002580  e010              B        |L1.9636|
                  |L1.9602|
002582  ebc002c0          RSB      r2,r0,r0,LSL #3       ;4165
002586  eb021200          ADD      r2,r2,r0,LSL #4       ;4165
00258a  eb080282          ADD      r2,r8,r2,LSL #2       ;4165
00258e  6a92              LDR      r2,[r2,#0x28]         ;4165
002590  429a              CMP      r2,r3                 ;4165
002592  db01              BLT      |L1.9624|
002594  f886a01d          STRB     r10,[r6,#0x1d]        ;4167
                  |L1.9624|
002598  42a2              CMP      r2,r4
00259a  db00              BLT      |L1.9630|
;;;4170   		{
;;;4171   		bPARALLEL_NOT_ENOUG=0;
00259c  7737              STRB     r7,[r6,#0x1c]
                  |L1.9630|
00259e  f1000001          ADD      r0,r0,#1              ;4163
0025a2  b2c0              UXTB     r0,r0                 ;4163
                  |L1.9636|
0025a4  4288              CMP      r0,r1                 ;4163
0025a6  dbec              BLT      |L1.9602|
;;;4172   		}
;;;4173   	}
;;;4174   
;;;4175   if(bPARALLEL_ENOUG==1)
0025a8  7f70              LDRB     r0,[r6,#0x1d]  ; bPARALLEL_ENOUG
0025aa  2801              CMP      r0,#1
0025ac  d007              BEQ      |L1.9662|
;;;4176   	{
;;;4177   	bPARALLEL=1;
;;;4178   	}
;;;4179   else if(bPARALLEL && bPARALLEL_NOT_ENOUG)
0025ae  7fb0              LDRB     r0,[r6,#0x1e]  ; bPARALLEL
0025b0  2800              CMP      r0,#0
0025b2  d003              BEQ      |L1.9660|
0025b4  7f30              LDRB     r0,[r6,#0x1c]  ; bPARALLEL_NOT_ENOUG
0025b6  2800              CMP      r0,#0
0025b8  d000              BEQ      |L1.9660|
;;;4180   	{
;;;4181   	bPARALLEL=0;
0025ba  77b7              STRB     r7,[r6,#0x1e]
                  |L1.9660|
;;;4182   	}
;;;4183   }
0025bc  e673              B        |L1.8870|
                  |L1.9662|
0025be  f886a01e          STRB     r10,[r6,#0x1e]        ;4177
0025c2  e670              B        |L1.8870|
;;;4184   
                          ENDP

                  powerAntiAliasingHndl PROC
;;;4191   //-----------------------------------------------
;;;4192   void powerAntiAliasingHndl(void)
0025c4  b570              PUSH     {r4-r6,lr}
;;;4193   {
;;;4194   if((power_summary_tempo/10UL)==(power_summary_tempo_old/10UL))
0025c6  230a              MOVS     r3,#0xa
0025c8  4c53              LDR      r4,|L1.10008|
0025ca  4852              LDR      r0,|L1.10004|
;;;4195   	{
;;;4196   	if(powerSummaryCnt<15)powerSummaryCnt++;
;;;4197   	if(powerSummaryCnt>=10)
;;;4198   		{
;;;4199   		power_summary=power_summary_tempo;
;;;4200   		}
;;;4201   	}
;;;4202   else powerSummaryCnt=0;
0025cc  2500              MOVS     r5,#0
0025ce  6822              LDR      r2,[r4,#0]            ;4194  ; power_summary_tempo_old
0025d0  6800              LDR      r0,[r0,#0]            ;4194  ; power_summary_tempo
0025d2  fbb2f6f3          UDIV     r6,r2,r3              ;4194
0025d6  fbb0f1f3          UDIV     r1,r0,r3              ;4194
0025da  4a50              LDR      r2,|L1.10012|
0025dc  42b1              CMP      r1,r6                 ;4194
0025de  d10b              BNE      |L1.9720|
0025e0  7811              LDRB     r1,[r2,#0]            ;4196  ; powerSummaryCnt
0025e2  290f              CMP      r1,#0xf               ;4196
0025e4  d202              BCS      |L1.9708|
0025e6  f1010101          ADD      r1,r1,#1              ;4196
0025ea  7011              STRB     r1,[r2,#0]            ;4196
                  |L1.9708|
0025ec  7811              LDRB     r1,[r2,#0]            ;4197  ; powerSummaryCnt
0025ee  290a              CMP      r1,#0xa               ;4197
0025f0  d303              BCC      |L1.9722|
0025f2  494b              LDR      r1,|L1.10016|
0025f4  6008              STR      r0,[r1,#0]            ;4199  ; power_summary
0025f6  e000              B        |L1.9722|
                  |L1.9720|
0025f8  7015              STRB     r5,[r2,#0]
                  |L1.9722|
;;;4203   power_summary_tempo_old=power_summary_tempo;
0025fa  6020              STR      r0,[r4,#0]  ; power_summary_tempo_old
;;;4204   
;;;4205   if((power_current_tempo/10UL)==(power_current_tempo_old/10UL))
0025fc  4849              LDR      r0,|L1.10020|
0025fe  4c4a              LDR      r4,|L1.10024|
002600  f9b00000          LDRSH    r0,[r0,#0]  ; power_current_tempo
002604  f9b42000          LDRSH    r2,[r4,#0]  ; power_current_tempo_old
002608  fbb0f1f3          UDIV     r1,r0,r3
00260c  fbb2f3f3          UDIV     r3,r2,r3
;;;4206   	{
;;;4207   	if(powerCurrentCnt<15)powerCurrentCnt++;
002610  4a46              LDR      r2,|L1.10028|
002612  4299              CMP      r1,r3                 ;4205
002614  d10b              BNE      |L1.9774|
002616  7811              LDRB     r1,[r2,#0]  ; powerCurrentCnt
002618  290f              CMP      r1,#0xf
00261a  d202              BCS      |L1.9762|
00261c  f1010101          ADD      r1,r1,#1
002620  7011              STRB     r1,[r2,#0]
                  |L1.9762|
;;;4208   	if(powerCurrentCnt>=10)
002622  7811              LDRB     r1,[r2,#0]  ; powerCurrentCnt
002624  290a              CMP      r1,#0xa
002626  d303              BCC      |L1.9776|
;;;4209   		{
;;;4210   		power_current=power_current_tempo;
002628  4941              LDR      r1,|L1.10032|
00262a  8008              STRH     r0,[r1,#0]
00262c  e000              B        |L1.9776|
                  |L1.9774|
;;;4211   		}
;;;4212   	}
;;;4213   else powerCurrentCnt=0;
00262e  7015              STRB     r5,[r2,#0]
                  |L1.9776|
;;;4214   power_current_tempo_old=power_current_tempo;
002630  8020              STRH     r0,[r4,#0]
;;;4215   }
002632  bd70              POP      {r4-r6,pc}
;;;4216   
                          ENDP

                  ips_current_average_hndl PROC
;;;4217   //-----------------------------------------------
;;;4218   void ips_current_average_hndl(void)
002634  e92d43f0          PUSH     {r4-r9,lr}
;;;4219   {
002638  b085              SUB      sp,sp,#0x14
;;;4220   if(++ica_timer_cnt>=10)
00263a  4c3e              LDR      r4,|L1.10036|
;;;4221   	{
;;;4222   	ica_timer_cnt=0;
;;;4223   	ica_plazma[0]++;
;;;4224   
;;;4225   	ica_my_current=bps_I;
;;;4226   
;;;4227   	if((ica_my_current>ica_your_current)&&((ica_my_current-ica_your_current)>=10)&&(ICA_EN==1))
00263c  4e3e              LDR      r6,|L1.10040|
00263e  2500              MOVS     r5,#0                 ;4222
002640  7820              LDRB     r0,[r4,#0]            ;4220  ; ica_timer_cnt
002642  1c40              ADDS     r0,r0,#1              ;4220
002644  b2c0              UXTB     r0,r0                 ;4220
002646  7020              STRB     r0,[r4,#0]            ;4220
002648  280a              CMP      r0,#0xa               ;4220
00264a  d340              BCC      |L1.9934|
00264c  7025              STRB     r5,[r4,#0]            ;4222
00264e  f8dfc0ec          LDR      r12,|L1.10044|
002652  f89c0000          LDRB     r0,[r12,#0]           ;4223  ; ica_plazma
002656  f1000001          ADD      r0,r0,#1              ;4223
00265a  f88c0000          STRB     r0,[r12,#0]           ;4223
00265e  4838              LDR      r0,|L1.10048|
002660  4938              LDR      r1,|L1.10052|
002662  f9b00000          LDRSH    r0,[r0,#0]            ;4225  ; bps_I
002666  8008              STRH     r0,[r1,#0]            ;4225
002668  4937              LDR      r1,|L1.10056|
;;;4228   		{
;;;4229   		ica_plazma[1]++;
;;;4230   		ica_u_necc--;
00266a  f8df80e0          LDR      r8,|L1.10060|
00266e  4662              MOV      r2,r12                ;4223
002670  4637              MOV      r7,r6                 ;4227
002672  f9b11000          LDRSH    r1,[r1,#0]            ;4227  ; ica_your_current
002676  7852              LDRB     r2,[r2,#1]            ;4229
002678  f9b83000          LDRSH    r3,[r8,#0]
00267c  f9b77000          LDRSH    r7,[r7,#0]            ;4227
002680  4288              CMP      r0,r1                 ;4227
002682  dd06              BLE      |L1.9874|
002684  eba00901          SUB      r9,r0,r1              ;4227
002688  f1b90f0a          CMP      r9,#0xa               ;4227
00268c  db01              BLT      |L1.9874|
00268e  2f01              CMP      r7,#1                 ;4227
002690  d007              BEQ      |L1.9890|
                  |L1.9874|
;;;4231   		}
;;;4232   	else if((ica_my_current<ica_your_current)&&((ica_your_current-ica_my_current)>=10)&&(ICA_EN==1))
002692  4288              CMP      r0,r1
002694  da16              BGE      |L1.9924|
002696  1a08              SUBS     r0,r1,r0
002698  280a              CMP      r0,#0xa
00269a  db13              BLT      |L1.9924|
00269c  2f01              CMP      r7,#1
00269e  d009              BEQ      |L1.9908|
0026a0  e010              B        |L1.9924|
                  |L1.9890|
0026a2  f1020201          ADD      r2,r2,#1              ;4229
0026a6  f88c2001          STRB     r2,[r12,#1]           ;4229
0026aa  f1a30301          SUB      r3,r3,#1              ;4230
0026ae  f8a83000          STRH     r3,[r8,#0]            ;4230
0026b2  e007              B        |L1.9924|
                  |L1.9908|
;;;4233   		{
;;;4234   		ica_plazma[1]--;
0026b4  f1a20201          SUB      r2,r2,#1
0026b8  f88c2001          STRB     r2,[r12,#1]
;;;4235   		ica_u_necc++;
0026bc  f1030301          ADD      r3,r3,#1
0026c0  f8a83000          STRH     r3,[r8,#0]
                  |L1.9924|
;;;4236   		}
;;;4237   	gran(&ica_u_necc,-20,20);
0026c4  2214              MOVS     r2,#0x14
0026c6  4251              RSBS     r1,r2,#0
0026c8  4820              LDR      r0,|L1.10060|
0026ca  f7fffffe          BL       gran
                  |L1.9934|
;;;4238   	}
;;;4239   
;;;4240   if((ica_timer_cnt==8)&&(ICA_EN==1))
0026ce  7820              LDRB     r0,[r4,#0]  ; ica_timer_cnt
;;;4241   	{
;;;4242   	char modbus_buff[20],i;
;;;4243   	short crc_temp;
;;;4244   
;;;4245   	modbus_buff[0] = ICA_MODBUS_ADDRESS;
0026d0  f8df807c          LDR      r8,|L1.10064|
;;;4246   	modbus_buff[1] = 4;
;;;4247   	modbus_buff[2] = 0;
;;;4248   	modbus_buff[3] = 2;
;;;4249   	modbus_buff[4] = 0;	
;;;4250   	modbus_buff[5] = 1;
;;;4251   
;;;4252   	crc_temp= CRC16_2(modbus_buff,6);
;;;4253   
;;;4254   	modbus_buff[6]= (char)crc_temp;
;;;4255   	modbus_buff[7]= (char)(crc_temp>>8);
;;;4256   
;;;4257   	if(ICA_CH==0)
0026d4  4f1f              LDR      r7,|L1.10068|
0026d6  2808              CMP      r0,#8                 ;4240
0026d8  d159              BNE      |L1.10126|
0026da  8830              LDRH     r0,[r6,#0]            ;4240  ; ICA_EN
0026dc  2801              CMP      r0,#1                 ;4240
0026de  d156              BNE      |L1.10126|
0026e0  f8b80000          LDRH     r0,[r8,#0]            ;4245  ; ICA_MODBUS_ADDRESS
0026e4  f88d0000          STRB     r0,[sp,#0]            ;4245
0026e8  f04f0004          MOV      r0,#4                 ;4246
0026ec  f88d0001          STRB     r0,[sp,#1]            ;4246
0026f0  e032              B        |L1.10072|
0026f2  0000              DCW      0x0000
                  |L1.9972|
                          DCD      ||area_number.22||
                  |L1.9976|
                          DCD      bps
                  |L1.9980|
                          DCD      NUMIST
                  |L1.9984|
                          DCD      mess_data
                  |L1.9988|
                          DCD      num_necc
                  |L1.9992|
                          DCD      main_1Hz_cnt
                  |L1.9996|
                          DCD      ipsBlckStat
                  |L1.10000|
                          DCD      TSIGN
                  |L1.10004|
                          DCD      power_summary_tempo
                  |L1.10008|
                          DCD      power_summary_tempo_old
                  |L1.10012|
                          DCD      powerSummaryCnt
                  |L1.10016|
                          DCD      power_summary
                  |L1.10020|
                          DCD      power_current_tempo
                  |L1.10024|
                          DCD      power_current_tempo_old
                  |L1.10028|
                          DCD      powerCurrentCnt
                  |L1.10032|
                          DCD      power_current
                  |L1.10036|
                          DCD      ica_timer_cnt
                  |L1.10040|
                          DCD      ICA_EN
                  |L1.10044|
                          DCD      ica_plazma
                  |L1.10048|
                          DCD      bps_I
                  |L1.10052|
                          DCD      ica_my_current
                  |L1.10056|
                          DCD      ica_your_current
                  |L1.10060|
                          DCD      ica_u_necc
                  |L1.10064|
                          DCD      ICA_MODBUS_ADDRESS
                  |L1.10068|
                          DCD      ICA_CH
                  |L1.10072|
002758  f88d5002          STRB     r5,[sp,#2]            ;4247
00275c  f04f0002          MOV      r0,#2                 ;4248
002760  f88d0003          STRB     r0,[sp,#3]            ;4248
002764  f88d5004          STRB     r5,[sp,#4]            ;4249
002768  f04f0001          MOV      r0,#1                 ;4250
00276c  f88d0005          STRB     r0,[sp,#5]            ;4250
002770  f04f0106          MOV      r1,#6                 ;4252
002774  4668              MOV      r0,sp                 ;4252
002776  f7fffffe          BL       CRC16_2
00277a  f88d0006          STRB     r0,[sp,#6]            ;4254
00277e  ea4f2020          ASR      r0,r0,#8              ;4255
002782  f88d0007          STRB     r0,[sp,#7]            ;4255
002786  f9b70000          LDRSH    r0,[r7,#0]  ; ICA_CH
00278a  b3e8              CBZ      r0,|L1.10248|
;;;4258   		{
;;;4259   		for (i=0;i<8;i++)
;;;4260   			{
;;;4261   			putchar_sc16is700(modbus_buff[i]);
;;;4262   			}
;;;4263   		}
;;;4264   	else if(ICA_CH==1)
00278c  2801              CMP      r0,#1
                  |L1.10126|
;;;4265   		{
;;;4266   	/*	static U8 rem_IP[4];
;;;4267   		rem_IP[0]=ICA_MODBUS_TCP_IP1;
;;;4268   		rem_IP[1]=ICA_MODBUS_TCP_IP2;
;;;4269   		rem_IP[2]=ICA_MODBUS_TCP_IP3;
;;;4270   		rem_IP[3]=ICA_MODBUS_TCP_IP4;*/
;;;4271     		//tcp_soc_avg = tcp_get_socket (TCP_TYPE_CLIENT, 0, 30, tcp_callback);
;;;4272     		if (tcp_soc_avg != 0) 
;;;4273   			{
;;;4274       		
;;;4275   			//tcp_connect_stat=0;
;;;4276       		//tcp_connect (tcp_soc_avg, rem_IP, 502, 1000);
;;;4277   			/*while(!tcp_connect_stat)
;;;4278   				{
;;;4279   				}*/
;;;4280   			//delay_us(500);
;;;4281   			//tcp_close(tcp_soc_avg);
;;;4282   
;;;4283   			}
;;;4284   		}
;;;4285   	}
;;;4286   
;;;4287   if((ica_timer_cnt==3)&&(ICA_EN==1))
;;;4288   	{
;;;4289   	//if(tcp_connect_stat)
;;;4290   		{
;;;4291   		//tcp_close(tcp_soc_avg);
;;;4292   		//tcp_connect_stat=3;
;;;4293   		}
;;;4294   	}
;;;4295   
;;;4296   if((main_kb_cnt==(TBAT*60)-21)&&(ICA_EN==1))
00278e  48ff              LDR      r0,|L1.11148|
002790  f06f0214          MVN      r2,#0x14
002794  f9b00000          LDRSH    r0,[r0,#0]  ; TBAT
002798  ebc01100          RSB      r1,r0,r0,LSL #4
00279c  eb020181          ADD      r1,r2,r1,LSL #2
0027a0  4afb              LDR      r2,|L1.11152|
0027a2  f9b22040          LDRSH    r2,[r2,#0x40]  ; main_kb_cnt
0027a6  4291              CMP      r1,r2
0027a8  d134              BNE      |L1.10260|
0027aa  8831              LDRH     r1,[r6,#0]  ; ICA_EN
0027ac  2901              CMP      r1,#1
0027ae  d131              BNE      |L1.10260|
;;;4297   	{
;;;4298   	char modbus_buff[20],i;
;;;4299   	short crc_temp;
;;;4300   
;;;4301   	modbus_buff[0] = ICA_MODBUS_ADDRESS;
0027b0  f8b81000          LDRH     r1,[r8,#0]  ; ICA_MODBUS_ADDRESS
0027b4  f88d1000          STRB     r1,[sp,#0]
;;;4302   	modbus_buff[1] = 6;
0027b8  f04f0106          MOV      r1,#6
0027bc  f88d1001          STRB     r1,[sp,#1]
;;;4303   	modbus_buff[2] = 0;
0027c0  f88d5002          STRB     r5,[sp,#2]
;;;4304   	modbus_buff[3] = 30;
0027c4  f04f011e          MOV      r1,#0x1e
0027c8  f88d1003          STRB     r1,[sp,#3]
;;;4305   	modbus_buff[4] = (char)(TBAT/256);	
0027cc  ea4f71e0          ASR      r1,r0,#31
0027d0  eb006111          ADD      r1,r0,r1,LSR #24
0027d4  ea4f2221          ASR      r2,r1,#8
0027d8  f88d2004          STRB     r2,[sp,#4]
;;;4306   	modbus_buff[5] = (char)(TBAT%256);
0027dc  f88d0005          STRB     r0,[sp,#5]
;;;4307   
;;;4308   	crc_temp= CRC16_2(modbus_buff,6);
0027e0  f04f0106          MOV      r1,#6
0027e4  4668              MOV      r0,sp
0027e6  f7fffffe          BL       CRC16_2
;;;4309   
;;;4310   	modbus_buff[6]= (char)crc_temp;
0027ea  f88d0006          STRB     r0,[sp,#6]
;;;4311   	modbus_buff[7]= (char)(crc_temp>>8);
0027ee  ea4f2020          ASR      r0,r0,#8
0027f2  f88d0007          STRB     r0,[sp,#7]
;;;4312   
;;;4313   	if(ICA_CH==0)
0027f6  8838              LDRH     r0,[r7,#0]  ; ICA_CH
0027f8  2800              CMP      r0,#0
0027fa  d10b              BNE      |L1.10260|
;;;4314   		{
;;;4315   		for (i=0;i<8;i++)
0027fc  4604              MOV      r4,r0
0027fe  466d              MOV      r5,sp                 ;4298
                  |L1.10240|
;;;4316   			{
;;;4317   			putchar_sc16is700(modbus_buff[i]);
002800  5d28              LDRB     r0,[r5,r4]
002802  f7fffffe          BL       putchar_sc16is700
002806  e000              B        |L1.10250|
                  |L1.10248|
002808  e007              B        |L1.10266|
                  |L1.10250|
00280a  f1040401          ADD      r4,r4,#1              ;4315
00280e  b2e4              UXTB     r4,r4                 ;4315
002810  2c08              CMP      r4,#8                 ;4315
002812  d3f5              BCC      |L1.10240|
                  |L1.10260|
;;;4318   			}
;;;4319   		}
;;;4320   	}
;;;4321   
;;;4322   }
002814  b005              ADD      sp,sp,#0x14
002816  e8bd83f0          POP      {r4-r9,pc}
                  |L1.10266|
00281a  f04f0400          MOV      r4,#0                 ;4259
00281e  46e9              MOV      r9,sp                 ;4242
                  |L1.10272|
002820  f8190004          LDRB     r0,[r9,r4]            ;4261
002824  f7fffffe          BL       putchar_sc16is700
002828  f1040401          ADD      r4,r4,#1              ;4259
00282c  b2e4              UXTB     r4,r4                 ;4259
00282e  2c08              CMP      r4,#8                 ;4259
002830  d3f6              BCC      |L1.10272|
002832  e7ac              B        |L1.10126|
;;;4323   
                          ENDP

                  ipsBlckHndl PROC
;;;4406   //-----------------------------------------------
;;;4407   void ipsBlckHndl(char in)
002834  b510              PUSH     {r4,lr}
;;;4408   {
;;;4409   
;;;4410   ipsBlckStat=0;
002836  4bd7              LDR      r3,|L1.11156|
002838  f04f0000          MOV      r0,#0
00283c  8018              STRH     r0,[r3,#0]
;;;4411   if(ipsBlckSrc==1)
00283e  48d6              LDR      r0,|L1.11160|
002840  f04f0401          MOV      r4,#1
;;;4412   	{
;;;4413   	if(((ipsBlckLog==0)&&(adc_buff_[11]>2000)) || ((ipsBlckLog==1)&&(adc_buff_[11]<2000))) ipsBlckStat=1;
002844  f44f62fa          MOV      r2,#0x7d0
002848  f9b01000          LDRSH    r1,[r0,#0]            ;4411  ; ipsBlckSrc
00284c  48d3              LDR      r0,|L1.11164|
00284e  2901              CMP      r1,#1                 ;4411
002850  f9b00000          LDRSH    r0,[r0,#0]
002854  d006              BEQ      |L1.10340|
;;;4414   	}
;;;4415   else if(ipsBlckSrc==2)
002856  2902              CMP      r1,#2
002858  d10f              BNE      |L1.10362|
00285a  49d1              LDR      r1,|L1.11168|
;;;4416   	{
;;;4417   	if(((ipsBlckLog==0)&&(adc_buff_[13]>2000)) || ((ipsBlckLog==1)&&(adc_buff_[13]<2000))) ipsBlckStat=1;
00285c  f9b1101a          LDRSH    r1,[r1,#0x1a]
002860  b160              CBZ      r0,|L1.10364|
002862  e00d              B        |L1.10368|
                  |L1.10340|
002864  49ce              LDR      r1,|L1.11168|
002866  f9b11016          LDRSH    r1,[r1,#0x16]         ;4413
00286a  b908              CBNZ     r0,|L1.10352|
00286c  4291              CMP      r1,r2                 ;4413
00286e  dc03              BGT      |L1.10360|
                  |L1.10352|
002870  2801              CMP      r0,#1                 ;4413
002872  d102              BNE      |L1.10362|
002874  4291              CMP      r1,r2                 ;4413
002876  da00              BGE      |L1.10362|
                  |L1.10360|
002878  801c              STRH     r4,[r3,#0]            ;4413
                  |L1.10362|
;;;4418   	}
;;;4419   }
00287a  bd10              POP      {r4,pc}
                  |L1.10364|
00287c  4291              CMP      r1,r2                 ;4417
00287e  dc03              BGT      |L1.10376|
                  |L1.10368|
002880  2801              CMP      r0,#1                 ;4417
002882  d1fa              BNE      |L1.10362|
002884  4291              CMP      r1,r2                 ;4417
002886  daf8              BGE      |L1.10362|
                  |L1.10376|
002888  801c              STRH     r4,[r3,#0]            ;4417
00288a  bd10              POP      {r4,pc}
;;;4420   
                          ENDP

                  bps_drv PROC
;;;4421   //-----------------------------------------------
;;;4422   void bps_drv(char in)
00288c  e92d41f0          PUSH     {r4-r8,lr}
;;;4423   {
002890  4606              MOV      r6,r0
;;;4424   char temp;
;;;4425   
;;;4426   if (bps[in]._device!=dSRC) return;
002892  ebc600c6          RSB      r0,r6,r6,LSL #3
002896  49c3              LDR      r1,|L1.11172|
002898  eb001006          ADD      r0,r0,r6,LSL #4
00289c  f8112020          LDRB     r2,[r1,r0,LSL #2]
0028a0  2a03              CMP      r2,#3
0028a2  d177              BNE      |L1.10644|
;;;4427   temp=bps[in]._flags_tm;
0028a4  eb010480          ADD      r4,r1,r0,LSL #2
0028a8  f8945042          LDRB     r5,[r4,#0x42]
;;;4428   if(temp&(1<<AV_T))
0028ac  07a8              LSLS     r0,r5,#30
0028ae  d517              BPL      |L1.10464|
;;;4429   	{
;;;4430   	if(bps[in]._temp_av_cnt<1200) 
0028b0  f9b41046          LDRSH    r1,[r4,#0x46]
0028b4  f44f6096          MOV      r0,#0x4b0
0028b8  4281              CMP      r1,r0
0028ba  da22              BGE      |L1.10498|
;;;4431   		{
;;;4432   		bps[in]._temp_av_cnt++;
0028bc  f1010101          ADD      r1,r1,#1
0028c0  b209              SXTH     r1,r1
0028c2  f8a41046          STRH     r1,[r4,#0x46]
;;;4433   		if(bps[in]._temp_av_cnt>=1200)
0028c6  4281              CMP      r1,r0
0028c8  db1b              BLT      |L1.10498|
;;;4434   			{
;;;4435   			bps[in]._temp_av_cnt=1200;
0028ca  f8a40046          STRH     r0,[r4,#0x46]
;;;4436   		   	if(!(bps[in]._av&(1<<0)))avar_bps_hndl(in,0,1);
0028ce  7860              LDRB     r0,[r4,#1]
0028d0  07c0              LSLS     r0,r0,#31
0028d2  d116              BNE      |L1.10498|
0028d4  2201              MOVS     r2,#1
0028d6  2100              MOVS     r1,#0
0028d8  4630              MOV      r0,r6
0028da  f7fffffe          BL       avar_bps_hndl
0028de  e010              B        |L1.10498|
                  |L1.10464|
;;;4437   			}
;;;4438   		}
;;;4439   	}
;;;4440   
;;;4441   else if(!(temp&(1<<AV_T)))
;;;4442   	{
;;;4443   	if(bps[in]._temp_av_cnt) 
0028e0  f9b41046          LDRSH    r1,[r4,#0x46]
0028e4  b169              CBZ      r1,|L1.10498|
;;;4444   		{
;;;4445   		bps[in]._temp_av_cnt--;
0028e6  f1a10101          SUB      r1,r1,#1
0028ea  b208              SXTH     r0,r1
0028ec  f8a40046          STRH     r0,[r4,#0x46]
;;;4446   		if(!bps[in]._temp_av_cnt)
0028f0  b938              CBNZ     r0,|L1.10498|
;;;4447   			{
;;;4448   			if(bps[in]._av&(1<<0))avar_bps_hndl(in,0,0);
0028f2  7860              LDRB     r0,[r4,#1]
0028f4  07c0              LSLS     r0,r0,#31
0028f6  d004              BEQ      |L1.10498|
0028f8  2200              MOVS     r2,#0
0028fa  4611              MOV      r1,r2
0028fc  4630              MOV      r0,r6
0028fe  f7fffffe          BL       avar_bps_hndl
                  |L1.10498|
;;;4449   			}
;;;4450   		} 	
;;;4451   
;;;4452   	}
;;;4453   
;;;4454   if((temp&(1<<AVUMAX)))
002902  0729              LSLS     r1,r5,#28
;;;4455   	{
;;;4456   	if(bps[in]._umax_av_cnt<10) 
;;;4457   		{
;;;4458   		bps[in]._umax_av_cnt++;
;;;4459   		if(bps[in]._umax_av_cnt>=10)
;;;4460   			{ 
;;;4461   			bps[in]._umax_av_cnt=10;
002904  f04f070a          MOV      r7,#0xa
002908  f04f0000          MOV      r0,#0                 ;4436
00290c  d515              BPL      |L1.10554|
00290e  f9b40048          LDRSH    r0,[r4,#0x48]         ;4456
002912  280a              CMP      r0,#0xa               ;4456
002914  da26              BGE      |L1.10596|
002916  f1000001          ADD      r0,r0,#1              ;4458
00291a  b200              SXTH     r0,r0                 ;4458
00291c  f8a40048          STRH     r0,[r4,#0x48]         ;4458
002920  280a              CMP      r0,#0xa               ;4459
002922  db1f              BLT      |L1.10596|
002924  f8a47048          STRH     r7,[r4,#0x48]
;;;4462   			if(!(bps[in]._av&(1<<1)))avar_bps_hndl(in,1,1);
002928  7860              LDRB     r0,[r4,#1]
00292a  0780              LSLS     r0,r0,#30
00292c  d41a              BMI      |L1.10596|
00292e  2201              MOVS     r2,#1
002930  4611              MOV      r1,r2
002932  4630              MOV      r0,r6
002934  f7fffffe          BL       avar_bps_hndl
002938  e014              B        |L1.10596|
                  |L1.10554|
;;;4463   		  	/*if((K[APV]!=ON)||((apv_cnt[in,0]==0)&&(apv_cnt[in,1]==0)&&(apv_cnt[in,2]==0)&&(apv_flags[in]==afOFF)))avar_s_hndl(in,1,1);
;;;4464   			if((apv_cnt[in,0]==0)&&(apv_cnt[in,1]==0)&&(apv_cnt[in,2]==0)&&(apv_flags[in]==afON))
;;;4465   				{
;;;4466   				apv_cnt[in,0]=APV_INIT;
;;;4467   				apv_cnt[in,1]=APV_INIT;
;;;4468   				apv_cnt[in,2]=APV_INIT;
;;;4469   				apv_flags[in]=afOFF;
;;;4470   				}				*/
;;;4471   						
;;;4472   			}
;;;4473   		} 
;;;4474   	}		
;;;4475   else if(!(temp&(1<<AVUMAX)))
;;;4476   	{
;;;4477   	if(bps[in]._umax_av_cnt>0) 
00293a  f9b41048          LDRSH    r1,[r4,#0x48]
00293e  2900              CMP      r1,#0
002940  dd0d              BLE      |L1.10590|
;;;4478   		{
;;;4479   		bps[in]._umax_av_cnt--;
002942  f1a10101          SUB      r1,r1,#1
002946  b208              SXTH     r0,r1
002948  f8a40048          STRH     r0,[r4,#0x48]
;;;4480   		if(bps[in]._umax_av_cnt==0)
00294c  b950              CBNZ     r0,|L1.10596|
;;;4481   			{
;;;4482   			bps[in]._umax_av_cnt=0;
;;;4483   			avar_bps_hndl(in,1,0);
00294e  f04f0200          MOV      r2,#0
002952  f04f0101          MOV      r1,#1
002956  4630              MOV      r0,r6
002958  f7fffffe          BL       avar_bps_hndl
00295c  e002              B        |L1.10596|
                  |L1.10590|
;;;4484   	 //		apv_cnt[in,0]=0;
;;;4485   	//		apv_cnt[in,1]=0;
;;;4486   	 //		apv_cnt[in,2]=0;			
;;;4487   			}
;;;4488   		}
;;;4489   	else if(bps[in]._umax_av_cnt<0) bps[in]._umax_av_cnt=0;		 
00295e  da01              BGE      |L1.10596|
002960  f8a40048          STRH     r0,[r4,#0x48]
                  |L1.10596|
;;;4490   	}
;;;4491   
;;;4492   if(temp&(1<<AVUMIN))
002964  06e8              LSLS     r0,r5,#27
002966  d516              BPL      |L1.10646|
;;;4493   	{
;;;4494   	if(bps[in]._umin_av_cnt<10) 
002968  f9b4004a          LDRSH    r0,[r4,#0x4a]
00296c  280a              CMP      r0,#0xa
00296e  da20              BGE      |L1.10674|
;;;4495   		{
;;;4496   		bps[in]._umin_av_cnt++;
002970  f1000001          ADD      r0,r0,#1
002974  b200              SXTH     r0,r0
002976  f8a4004a          STRH     r0,[r4,#0x4a]
;;;4497   		if(bps[in]._umin_av_cnt>=10)
00297a  280a              CMP      r0,#0xa
00297c  db19              BLT      |L1.10674|
;;;4498   			{ 
;;;4499   			bps[in]._umin_av_cnt=10;
00297e  f8a4704a          STRH     r7,[r4,#0x4a]
;;;4500   			if(!(bps[in]._av&(1<<2)))avar_bps_hndl(in,2,1);
002982  7860              LDRB     r0,[r4,#1]
002984  0740              LSLS     r0,r0,#29
002986  d414              BMI      |L1.10674|
002988  2201              MOVS     r2,#1
00298a  2102              MOVS     r1,#2
00298c  4630              MOV      r0,r6
00298e  f7fffffe          BL       avar_bps_hndl
002992  e00e              B        |L1.10674|
                  |L1.10644|
002994  e046              B        |L1.10788|
                  |L1.10646|
;;;4501   		  	/*	if((K[APV]!=ON)||((apv_cnt[in,0]==0)&&(apv_cnt[in,1]==0)&&(apv_cnt[in,2]==0)&&(apv_flags[in]==afOFF)))avar_s_hndl(in,2,1);
;;;4502   			if((apv_cnt[in,0]==0)&&(apv_cnt[in,1]==0)&&(apv_cnt[in,2]==0)&&(apv_flags[in]==afON))
;;;4503   				{
;;;4504   				apv_cnt[in,0]=APV_INIT;
;;;4505   				apv_cnt[in,1]=APV_INIT;
;;;4506   				apv_cnt[in,2]=APV_INIT;
;;;4507   				apv_flags[in]=afOFF;
;;;4508   				}*/				
;;;4509   			}
;;;4510   		} 
;;;4511   	}	
;;;4512   	
;;;4513   else if(!(temp&(1<<AVUMIN)))
;;;4514   	{
;;;4515   	if(bps[in]._umin_av_cnt) 
002996  f9b4004a          LDRSH    r0,[r4,#0x4a]
00299a  b150              CBZ      r0,|L1.10674|
;;;4516   		{
;;;4517   		bps[in]._umin_av_cnt--;
00299c  f1a00001          SUB      r0,r0,#1
0029a0  b201              SXTH     r1,r0
0029a2  f8a4104a          STRH     r1,[r4,#0x4a]
;;;4518   		if(bps[in]._umin_av_cnt==0)
0029a6  b921              CBNZ     r1,|L1.10674|
;;;4519   			{
;;;4520   			bps[in]._umin_av_cnt=0;
;;;4521   			avar_bps_hndl(in,2,0);
0029a8  2200              MOVS     r2,#0
0029aa  2102              MOVS     r1,#2
0029ac  4630              MOV      r0,r6
0029ae  f7fffffe          BL       avar_bps_hndl
                  |L1.10674|
;;;4522   		//	apv_cnt[in,0]=0;
;;;4523   		//	apv_cnt[in,1]=0;
;;;4524   		//	apv_cnt[in,2]=0;
;;;4525   			}
;;;4526   		}
;;;4527   	else if(bps[in]._umin_av_cnt>10)bps[in]._umin_av_cnt--;	 
;;;4528   	}
;;;4529   
;;;4530   //bps[in]._state=bsOFF;
;;;4531   
;;;4532   if (bps[in]._av&0x0f)					bps[in]._state=bsAV;
0029b2  7860              LDRB     r0,[r4,#1]
0029b4  0700              LSLS     r0,r0,#28
0029b6  d003              BEQ      |L1.10688|
0029b8  f04f0004          MOV      r0,#4
0029bc  70a0              STRB     r0,[r4,#2]
0029be  e017              B        |L1.10736|
                  |L1.10688|
;;;4533   else if ( (net_av) && (bps[in]._cnt>20)/*&& 
0029c0  4879              LDR      r0,|L1.11176|
0029c2  7800              LDRB     r0,[r0,#0]  ; net_av
0029c4  b130              CBZ      r0,|L1.10708|
0029c6  78e0              LDRB     r0,[r4,#3]
0029c8  2814              CMP      r0,#0x14
0029ca  d903              BLS      |L1.10708|
;;;4534   		(bps[in]._Uii<200)*/)				bps[in]._state=bsOFF_AV_NET;
0029cc  f04f0005          MOV      r0,#5
0029d0  70a0              STRB     r0,[r4,#2]
0029d2  e00d              B        |L1.10736|
                  |L1.10708|
;;;4535   else if (bps[in]._flags_tm&BIN8(100000))	bps[in]._state=bsRDY;
0029d4  f8940042          LDRB     r0,[r4,#0x42]
0029d8  0680              LSLS     r0,r0,#26
0029da  d503              BPL      |L1.10724|
0029dc  f04f0002          MOV      r0,#2
0029e0  70a0              STRB     r0,[r4,#2]
0029e2  e005              B        |L1.10736|
                  |L1.10724|
;;;4536   else if (bps[in]._cnt<20)				bps[in]._state=bsWRK;
0029e4  78e0              LDRB     r0,[r4,#3]
0029e6  2814              CMP      r0,#0x14
0029e8  d202              BCS      |L1.10736|
0029ea  f04f0001          MOV      r0,#1
0029ee  70a0              STRB     r0,[r4,#2]
                  |L1.10736|
;;;4537   
;;;4538   
;;;4539   
;;;4540   //else if(bps[in]._flags_tm&BIN8(100000)) bps[in]._state=ssBL;
;;;4541   //else if((!(bps[in]._flags_tm&BIN8(100000)))&&(net_U>100))bps[in]._state=ssWRK;
;;;4542   //else bps[0]._state=ssNOT;
;;;4543   
;;;4544   //bps[in]._is_ready=0;
;;;4545   //bps[in]._is_wrk=0;
;;;4546   //if(bps[in]._av_net) bps[in]._flags_bp='N';//  
;;;4547   //else if(bps[in]._av_u_max) bps[in]._flags_bp='P';//  (u_.av_.bAS1T)) bps_state[0]=ssAV;
;;;4548   //else if(bps[in]._av_u_min) bps[in]._flags_bp='M';//  
;;;4549   //else if(bps[in]._av_temper) bps[in]._flags_bp='T';// 
;;;4550   //else if(bps[in]._flags_tm&BIN8(100000)) 
;;;4551   //	{
;;;4552   //	bps[in]._flags_bp='B';// 
;;;4553   //	bps[in]._is_ready=1;
;;;4554   //	}
;;;4555   //else if((!(bps[in]._flags_tm&BIN8(100000)))&&(net_U>100))
;;;4556   //     {
;;;4557   //     bps[in]._flags_bp='W';// 
;;;4558   //     bps[in]._is_ready=1;
;;;4559   //     bps[in]._is_wrk=1;
;;;4560        
;;;4561   //     }
;;;4562   //else bps[in]._is_ready=1;     
;;;4563   
;;;4564   
;;;4565   
;;;4566   
;;;4567   
;;;4568   /*
;;;4569   bps[in]._flags_tu&=BIN8(11111110);
;;;4570   if(bps[in]._ist_blok_cnt)
;;;4571   	{
;;;4572   	bps[in]._ist_blok_cnt--;
;;;4573   	bps[in]._flags_tu|=BIN8(1);
;;;4574   	}
;;;4575   
;;;4576   	   */ 
;;;4577   
;;;4578   //    
;;;4579   if(bps[in]._cnt>=10) bps[in]._flags_tu|=BIN8(10000000);
0029f0  78e0              LDRB     r0,[r4,#3]
0029f2  280a              CMP      r0,#0xa
0029f4  d306              BCC      |L1.10756|
0029f6  f894002c          LDRB     r0,[r4,#0x2c]
0029fa  f0400080          ORR      r0,r0,#0x80
0029fe  f884002c          STRB     r0,[r4,#0x2c]
002a02  e005              B        |L1.10768|
                  |L1.10756|
;;;4580   else bps[in]._flags_tu&=BIN8(1111111);
002a04  f894002c          LDRB     r0,[r4,#0x2c]
002a08  f000007f          AND      r0,r0,#0x7f
002a0c  f884002c          STRB     r0,[r4,#0x2c]
                  |L1.10768|
;;;4581   	
;;;4582   bps[in]._vol_u=cntrl_stat+bps[in]._x_;	
002a10  495f              LDR      r1,|L1.11152|
002a12  f9b40050          LDRSH    r0,[r4,#0x50]
002a16  f9b11020          LDRSH    r1,[r1,#0x20]  ; cntrl_stat
002a1a  4408              ADD      r0,r0,r1
002a1c  6320              STR      r0,[r4,#0x30]
;;;4583   bps[in]._vol_i=1000; 
002a1e  f44f707a          MOV      r0,#0x3e8
002a22  6360              STR      r0,[r4,#0x34]
                  |L1.10788|
;;;4584   }
002a24  e8bd81f0          POP      {r4-r8,pc}
;;;4585   
                          ENDP

                  avt_hndl PROC
;;;4586   //-----------------------------------------------
;;;4587   void avt_hndl(void)
002a28  b570              PUSH     {r4-r6,lr}
;;;4588   {
;;;4589   char i;
;;;4590   for(i=0;i<12;i++)
002a2a  f04f0000          MOV      r0,#0
;;;4591   	{
;;;4592   	if(eb2_data_short[6]&(1<<i))
002a2e  495f              LDR      r1,|L1.11180|
;;;4593   		{
;;;4594   		avt_stat[i]=avtON;
002a30  4d5f              LDR      r5,|L1.11184|
002a32  f04f0401          MOV      r4,#1                 ;4592
002a36  f9b1200c          LDRSH    r2,[r1,#0xc]          ;4592
002a3a  4603              MOV      r3,r0                 ;4590
                  |L1.10812|
002a3c  fa04f100          LSL      r1,r4,r0              ;4592
002a40  420a              TST      r2,r1                 ;4592
002a42  d001              BEQ      |L1.10824|
002a44  542c              STRB     r4,[r5,r0]
002a46  e000              B        |L1.10826|
                  |L1.10824|
;;;4595   		}
;;;4596   	else avt_stat[i]=avtOFF;
002a48  542b              STRB     r3,[r5,r0]
                  |L1.10826|
002a4a  f1000001          ADD      r0,r0,#1              ;4590
002a4e  b2c0              UXTB     r0,r0                 ;4590
002a50  280c              CMP      r0,#0xc               ;4590
002a52  d3f3              BCC      |L1.10812|
;;;4597   	}
;;;4598   
;;;4599   if((avt_stat_old[0]!=avt_stat[0])&&(NUMAVT>=1))
002a54  4e57              LDR      r6,|L1.11188|
002a56  7828              LDRB     r0,[r5,#0]  ; avt_stat
002a58  4c57              LDR      r4,|L1.11192|
002a5a  7831              LDRB     r1,[r6,#0]  ; avt_stat_old
002a5c  4281              CMP      r1,r0
002a5e  d00b              BEQ      |L1.10872|
002a60  f9b41000          LDRSH    r1,[r4,#0]  ; NUMAVT
002a64  2901              CMP      r1,#1
002a66  db07              BLT      |L1.10872|
;;;4600   	{
;;;4601   	if(avt_stat[0]==avtON) 	snmp_trap_send("Avtomat #1 is ON ",11,1,1);
002a68  2801              CMP      r0,#1
002a6a  d07e              BEQ      |L1.11114|
;;;4602   	else 				snmp_trap_send("Avtomat #1 is OFF",11,1,0);
002a6c  2300              MOVS     r3,#0
002a6e  2201              MOVS     r2,#1
002a70  210b              MOVS     r1,#0xb
002a72  a052              ADR      r0,|L1.11196|
002a74  f7fffffe          BL       snmp_trap_send
                  |L1.10872|
;;;4603   	}
;;;4604   if((avt_stat_old[1]!=avt_stat[1])&&(NUMAVT>=2))
002a78  7871              LDRB     r1,[r6,#1]  ; avt_stat_old
002a7a  7868              LDRB     r0,[r5,#1]  ; avt_stat
002a7c  4281              CMP      r1,r0
002a7e  d00b              BEQ      |L1.10904|
002a80  f9b41000          LDRSH    r1,[r4,#0]  ; NUMAVT
002a84  2902              CMP      r1,#2
002a86  db07              BLT      |L1.10904|
;;;4605   	{
;;;4606   	if(avt_stat[1]==avtON) 	snmp_trap_send("Avtomat #2 is ON ",11,2,1);
002a88  2801              CMP      r0,#1
002a8a  d06f              BEQ      |L1.11116|
;;;4607   	else 				snmp_trap_send("Avtomat #2 is OFF",11,2,0);
002a8c  2300              MOVS     r3,#0
002a8e  2202              MOVS     r2,#2
002a90  210b              MOVS     r1,#0xb
002a92  a04f              ADR      r0,|L1.11216|
002a94  f7fffffe          BL       snmp_trap_send
                  |L1.10904|
;;;4608   	}
;;;4609   if((avt_stat_old[2]!=avt_stat[2])&&(NUMAVT>=3))
002a98  78b1              LDRB     r1,[r6,#2]  ; avt_stat_old
002a9a  78a8              LDRB     r0,[r5,#2]  ; avt_stat
002a9c  4281              CMP      r1,r0
002a9e  d00b              BEQ      |L1.10936|
002aa0  f9b41000          LDRSH    r1,[r4,#0]  ; NUMAVT
002aa4  2903              CMP      r1,#3
002aa6  db07              BLT      |L1.10936|
;;;4610   	{
;;;4611   	if(avt_stat[2]==avtON) 	snmp_trap_send("Avtomat #3 is ON ",11,3,1);
002aa8  2801              CMP      r0,#1
002aaa  d067              BEQ      |L1.11132|
;;;4612   	else 				snmp_trap_send("Avtomat #3 is OFF",11,3,0);
002aac  2300              MOVS     r3,#0
002aae  2203              MOVS     r2,#3
002ab0  210b              MOVS     r1,#0xb
002ab2  a04c              ADR      r0,|L1.11236|
002ab4  f7fffffe          BL       snmp_trap_send
                  |L1.10936|
;;;4613   	}
;;;4614   if((avt_stat_old[3]!=avt_stat[3])&&(NUMAVT>=4))
002ab8  78f1              LDRB     r1,[r6,#3]  ; avt_stat_old
002aba  78e8              LDRB     r0,[r5,#3]  ; avt_stat
002abc  4281              CMP      r1,r0
002abe  d00b              BEQ      |L1.10968|
002ac0  f9b41000          LDRSH    r1,[r4,#0]  ; NUMAVT
002ac4  2904              CMP      r1,#4
002ac6  db07              BLT      |L1.10968|
;;;4615   	{
;;;4616   	if(avt_stat[3]==avtON) 	snmp_trap_send("Avtomat #4 is ON ",11,4,1);
002ac8  2801              CMP      r0,#1
002aca  d058              BEQ      |L1.11134|
;;;4617   	else 				snmp_trap_send("Avtomat #4 is OFF",11,4,0);
002acc  2300              MOVS     r3,#0
002ace  2204              MOVS     r2,#4
002ad0  210b              MOVS     r1,#0xb
002ad2  a049              ADR      r0,|L1.11256|
002ad4  f7fffffe          BL       snmp_trap_send
                  |L1.10968|
;;;4618   	}
;;;4619   if((avt_stat_old[4]!=avt_stat[4])&&(NUMAVT>=5))
002ad8  7931              LDRB     r1,[r6,#4]  ; avt_stat_old
002ada  7928              LDRB     r0,[r5,#4]  ; avt_stat
002adc  4281              CMP      r1,r0
002ade  d00b              BEQ      |L1.11000|
002ae0  f9b41000          LDRSH    r1,[r4,#0]  ; NUMAVT
002ae4  2905              CMP      r1,#5
002ae6  db07              BLT      |L1.11000|
;;;4620   	{
;;;4621   	if(avt_stat[4]==avtON) 	snmp_trap_send("Avtomat #5 is ON ",11,5,1);
002ae8  2801              CMP      r0,#1
002aea  d049              BEQ      |L1.11136|
;;;4622   	else 				snmp_trap_send("Avtomat #5 is OFF",11,5,0);
002aec  2300              MOVS     r3,#0
002aee  2205              MOVS     r2,#5
002af0  210b              MOVS     r1,#0xb
002af2  a046              ADR      r0,|L1.11276|
002af4  f7fffffe          BL       snmp_trap_send
                  |L1.11000|
;;;4623   	}
;;;4624   if((avt_stat_old[5]!=avt_stat[5])&&(NUMAVT>=6))
002af8  7971              LDRB     r1,[r6,#5]  ; avt_stat_old
002afa  7968              LDRB     r0,[r5,#5]  ; avt_stat
002afc  4281              CMP      r1,r0
002afe  d00b              BEQ      |L1.11032|
002b00  f9b41000          LDRSH    r1,[r4,#0]  ; NUMAVT
002b04  2906              CMP      r1,#6
002b06  db07              BLT      |L1.11032|
;;;4625   	{
;;;4626   	if(avt_stat[5]==avtON) 	snmp_trap_send("Avtomat #6 is ON ",11,6,1);
002b08  2801              CMP      r0,#1
002b0a  d03a              BEQ      |L1.11138|
;;;4627   	else 				snmp_trap_send("Avtomat #6 is OFF",11,6,0);
002b0c  2300              MOVS     r3,#0
002b0e  2206              MOVS     r2,#6
002b10  210b              MOVS     r1,#0xb
002b12  a043              ADR      r0,|L1.11296|
002b14  f7fffffe          BL       snmp_trap_send
                  |L1.11032|
;;;4628   	}
;;;4629   if((avt_stat_old[6]!=avt_stat[6])&&(NUMAVT>=7))
002b18  79b1              LDRB     r1,[r6,#6]  ; avt_stat_old
002b1a  79a8              LDRB     r0,[r5,#6]  ; avt_stat
002b1c  4281              CMP      r1,r0
002b1e  d00b              BEQ      |L1.11064|
002b20  f9b41000          LDRSH    r1,[r4,#0]  ; NUMAVT
002b24  2907              CMP      r1,#7
002b26  db07              BLT      |L1.11064|
;;;4630   	{
;;;4631   	if(avt_stat[6]==avtON) 	snmp_trap_send("Avtomat #7 is ON ",11,7,1);
002b28  2801              CMP      r0,#1
002b2a  d02b              BEQ      |L1.11140|
;;;4632   	else 				snmp_trap_send("Avtomat #7 is OFF",11,7,0);
002b2c  2300              MOVS     r3,#0
002b2e  2207              MOVS     r2,#7
002b30  210b              MOVS     r1,#0xb
002b32  a040              ADR      r0,|L1.11316|
002b34  f7fffffe          BL       snmp_trap_send
                  |L1.11064|
;;;4633   	}
;;;4634   if((avt_stat_old[7]!=avt_stat[7])&&(NUMAVT>=8))
002b38  79f1              LDRB     r1,[r6,#7]  ; avt_stat_old
002b3a  79e8              LDRB     r0,[r5,#7]  ; avt_stat
002b3c  4281              CMP      r1,r0
002b3e  d00b              BEQ      |L1.11096|
002b40  f9b41000          LDRSH    r1,[r4,#0]  ; NUMAVT
002b44  2908              CMP      r1,#8
002b46  db07              BLT      |L1.11096|
;;;4635   	{
;;;4636   	if(avt_stat[7]==avtON) 	snmp_trap_send("Avtomat #8 is ON ",11,8,1);
002b48  2801              CMP      r0,#1
002b4a  d01c              BEQ      |L1.11142|
;;;4637   	else 				snmp_trap_send("Avtomat #8 is OFF",11,8,0);
002b4c  2300              MOVS     r3,#0
002b4e  2208              MOVS     r2,#8
002b50  210b              MOVS     r1,#0xb
002b52  a03d              ADR      r0,|L1.11336|
002b54  f7fffffe          BL       snmp_trap_send
                  |L1.11096|
;;;4638   	}
;;;4639   if((avt_stat_old[8]!=avt_stat[8])&&(NUMAVT>=9))
002b58  7a31              LDRB     r1,[r6,#8]  ; avt_stat_old
002b5a  7a28              LDRB     r0,[r5,#8]  ; avt_stat
002b5c  4281              CMP      r1,r0
002b5e  d013              BEQ      |L1.11144|
002b60  f9b41000          LDRSH    r1,[r4,#0]  ; NUMAVT
002b64  2909              CMP      r1,#9
002b66  db0f              BLT      |L1.11144|
;;;4640   	{
;;;4641   	if(avt_stat[8]==avtON) 	snmp_trap_send("Avtomat #9 is ON ",11,9,1);
002b68  e001              B        |L1.11118|
                  |L1.11114|
002b6a  e08d              B        |L1.11400|
                  |L1.11116|
002b6c  e093              B        |L1.11414|
                  |L1.11118|
002b6e  2801              CMP      r0,#1
002b70  d00b              BEQ      |L1.11146|
;;;4642   	else 				snmp_trap_send("Avtomat #9 is OFF",11,9,0);
002b72  2300              MOVS     r3,#0
002b74  2209              MOVS     r2,#9
002b76  210b              MOVS     r1,#0xb
002b78  a038              ADR      r0,|L1.11356|
002b7a  e079              B        |L1.11376|
                  |L1.11132|
002b7c  e092              B        |L1.11428|
                  |L1.11134|
002b7e  e098              B        |L1.11442|
                  |L1.11136|
002b80  e09e              B        |L1.11456|
                  |L1.11138|
002b82  e0a4              B        |L1.11470|
                  |L1.11140|
002b84  e0aa              B        |L1.11484|
                  |L1.11142|
002b86  e0b0              B        |L1.11498|
                  |L1.11144|
002b88  e074              B        |L1.11380|
                  |L1.11146|
002b8a  e0b5              B        |L1.11512|
                  |L1.11148|
                          DCD      TBAT
                  |L1.11152|
                          DCD      ||area_number.22||
                  |L1.11156|
                          DCD      ipsBlckStat
                  |L1.11160|
                          DCD      ipsBlckSrc
                  |L1.11164|
                          DCD      ipsBlckLog
                  |L1.11168|
                          DCD      ||.bss||+0x400
                  |L1.11172|
                          DCD      bps
                  |L1.11176|
                          DCD      net_av
                  |L1.11180|
                          DCD      eb2_data_short
                  |L1.11184|
                          DCD      avt_stat
                  |L1.11188|
                          DCD      avt_stat_old
                  |L1.11192|
                          DCD      NUMAVT
                  |L1.11196|
002bbc  4176746f          DCB      "Avtomat #1 is OFF",0
002bc0  6d617420
002bc4  23312069
002bc8  73204f46
002bcc  4600    
002bce  00                DCB      0
002bcf  00                DCB      0
                  |L1.11216|
002bd0  4176746f          DCB      "Avtomat #2 is OFF",0
002bd4  6d617420
002bd8  23322069
002bdc  73204f46
002be0  4600    
002be2  00                DCB      0
002be3  00                DCB      0
                  |L1.11236|
002be4  4176746f          DCB      "Avtomat #3 is OFF",0
002be8  6d617420
002bec  23332069
002bf0  73204f46
002bf4  4600    
002bf6  00                DCB      0
002bf7  00                DCB      0
                  |L1.11256|
002bf8  4176746f          DCB      "Avtomat #4 is OFF",0
002bfc  6d617420
002c00  23342069
002c04  73204f46
002c08  4600    
002c0a  00                DCB      0
002c0b  00                DCB      0
                  |L1.11276|
002c0c  4176746f          DCB      "Avtomat #5 is OFF",0
002c10  6d617420
002c14  23352069
002c18  73204f46
002c1c  4600    
002c1e  00                DCB      0
002c1f  00                DCB      0
                  |L1.11296|
002c20  4176746f          DCB      "Avtomat #6 is OFF",0
002c24  6d617420
002c28  23362069
002c2c  73204f46
002c30  4600    
002c32  00                DCB      0
002c33  00                DCB      0
                  |L1.11316|
002c34  4176746f          DCB      "Avtomat #7 is OFF",0
002c38  6d617420
002c3c  23372069
002c40  73204f46
002c44  4600    
002c46  00                DCB      0
002c47  00                DCB      0
                  |L1.11336|
002c48  4176746f          DCB      "Avtomat #8 is OFF",0
002c4c  6d617420
002c50  23382069
002c54  73204f46
002c58  4600    
002c5a  00                DCB      0
002c5b  00                DCB      0
                  |L1.11356|
002c5c  4176746f          DCB      "Avtomat #9 is OFF",0
002c60  6d617420
002c64  23392069
002c68  73204f46
002c6c  4600    
002c6e  00                DCB      0
002c6f  00                DCB      0
                  |L1.11376|
002c70  f7fffffe          BL       snmp_trap_send
                  |L1.11380|
;;;4643   	}
;;;4644   
;;;4645   for(i=0;i<12;i++)
002c74  f04f0000          MOV      r0,#0
                  |L1.11384|
;;;4646   	{
;;;4647   	avt_stat_old[i]=avt_stat[i];
002c78  5c29              LDRB     r1,[r5,r0]
002c7a  5431              STRB     r1,[r6,r0]
002c7c  f1000001          ADD      r0,r0,#1              ;4645
002c80  b2c0              UXTB     r0,r0                 ;4645
002c82  280c              CMP      r0,#0xc               ;4645
002c84  d3f8              BCC      |L1.11384|
;;;4648   	}
;;;4649   }
002c86  bd70              POP      {r4-r6,pc}
                  |L1.11400|
002c88  2301              MOVS     r3,#1                 ;4601
002c8a  461a              MOV      r2,r3                 ;4601
002c8c  210b              MOVS     r1,#0xb               ;4601
002c8e  a0f2              ADR      r0,|L1.12376|
002c90  f7fffffe          BL       snmp_trap_send
002c94  e6f0              B        |L1.10872|
                  |L1.11414|
002c96  2301              MOVS     r3,#1                 ;4606
002c98  2202              MOVS     r2,#2                 ;4606
002c9a  210b              MOVS     r1,#0xb               ;4606
002c9c  a0f3              ADR      r0,|L1.12396|
002c9e  f7fffffe          BL       snmp_trap_send
002ca2  e6f9              B        |L1.10904|
                  |L1.11428|
002ca4  2301              MOVS     r3,#1                 ;4611
002ca6  2203              MOVS     r2,#3                 ;4611
002ca8  210b              MOVS     r1,#0xb               ;4611
002caa  a0f5              ADR      r0,|L1.12416|
002cac  f7fffffe          BL       snmp_trap_send
002cb0  e702              B        |L1.10936|
                  |L1.11442|
002cb2  2301              MOVS     r3,#1                 ;4616
002cb4  2204              MOVS     r2,#4                 ;4616
002cb6  210b              MOVS     r1,#0xb               ;4616
002cb8  a0f6              ADR      r0,|L1.12436|
002cba  f7fffffe          BL       snmp_trap_send
002cbe  e70b              B        |L1.10968|
                  |L1.11456|
002cc0  2301              MOVS     r3,#1                 ;4621
002cc2  2205              MOVS     r2,#5                 ;4621
002cc4  210b              MOVS     r1,#0xb               ;4621
002cc6  a0f8              ADR      r0,|L1.12456|
002cc8  f7fffffe          BL       snmp_trap_send
002ccc  e714              B        |L1.11000|
                  |L1.11470|
002cce  2301              MOVS     r3,#1                 ;4626
002cd0  2206              MOVS     r2,#6                 ;4626
002cd2  210b              MOVS     r1,#0xb               ;4626
002cd4  a0f9              ADR      r0,|L1.12476|
002cd6  f7fffffe          BL       snmp_trap_send
002cda  e71d              B        |L1.11032|
                  |L1.11484|
002cdc  2301              MOVS     r3,#1                 ;4631
002cde  2207              MOVS     r2,#7                 ;4631
002ce0  210b              MOVS     r1,#0xb               ;4631
002ce2  a0fb              ADR      r0,|L1.12496|
002ce4  f7fffffe          BL       snmp_trap_send
002ce8  e726              B        |L1.11064|
                  |L1.11498|
002cea  2301              MOVS     r3,#1                 ;4636
002cec  2208              MOVS     r2,#8                 ;4636
002cee  210b              MOVS     r1,#0xb               ;4636
002cf0  a0fc              ADR      r0,|L1.12516|
002cf2  f7fffffe          BL       snmp_trap_send
002cf6  e72f              B        |L1.11096|
                  |L1.11512|
002cf8  2301              MOVS     r3,#1                 ;4641
002cfa  2209              MOVS     r2,#9                 ;4641
002cfc  210b              MOVS     r1,#0xb               ;4641
002cfe  a0fe              ADR      r0,|L1.12536|
002d00  f7fffffe          BL       snmp_trap_send
002d04  e7b6              B        |L1.11380|
;;;4650   
                          ENDP

                  bat_hndl PROC
;;;4651   //-----------------------------------------------
;;;4652   void bat_hndl(void)
002d06  b570              PUSH     {r4-r6,lr}
;;;4653   {
;;;4654   /*if(mess_find(_MESS_BAT_MASK_ON))
;;;4655   	{
;;;4656   	if(mess_data[0]==_MESS_BAT_MASK_ON)
;;;4657   		{
;;;4658   		char i;
;;;4659   		for(i=0;i<2;i++)
;;;4660   			{
;;;4661   			if(mess_data[1]&(1<<i))
;;;4662   				{
;;;4663   				bat[i]._cnt_to_block=0;
;;;4664        			bat[i]._rel_stat=0;
;;;4665        			}
;;;4666   			}
;;;4667   		}
;;;4668   	}
;;;4669   if(mess_find(_MESS_BAT_MASK_OFF))
;;;4670   	{		
;;;4671   	if(mess_data[0]==_MESS_BAT_MASK_OFF)
;;;4672   		{
;;;4673   		char i;
;;;4674   		for(i=0;i<2;i++)
;;;4675   			{
;;;4676   			if((mess_data[1]&(1<<i)) && (bat[i]._cnt_to_block==0) && (bat[i]._rel_stat==0))
;;;4677   				{
;;;4678   				bat[i]._cnt_to_block=20;
;;;4679   				bat[i]._rel_stat=1;
;;;4680        			}
;;;4681   			}
;;;4682   		
;;;4683   		}		
;;;4684   	}*/
;;;4685   
;;;4686   if(mess_find_unvol(MESS2BAT_HNDL))
002d08  20c8              MOVS     r0,#0xc8
002d0a  f7fffffe          BL       mess_find_unvol
;;;4687   	{ 
;;;4688   	char i;
;;;4689   	
;;;4690   	if(mess_data[0]==PARAM_BAT_ALL_OFF_AFTER_2SEC)
;;;4691   		{
;;;4692   		for(i=0;i<MAX_NUM_OF_BAT;i++)
;;;4693   			{
;;;4694   			if(bat[i]._cnt_to_block<50)bat[i]._cnt_to_block++;
002d0e  49ff              LDR      r1,|L1.12556|
002d10  2200              MOVS     r2,#0                 ;4692
002d12  b3a8              CBZ      r0,|L1.11648|
002d14  4bfe              LDR      r3,|L1.12560|
;;;4695   			}
;;;4696   		}
;;;4697   
;;;4698   	else if(mess_data[0]==PARAM_BAT_MASK_OFF_AFTER_2SEC)
;;;4699   		{
;;;4700   		for(i=0;i<MAX_NUM_OF_BAT;i++)
;;;4701   			{
;;;4702   			if(mess_data[1]&(1<<i))
002d16  2401              MOVS     r4,#1
002d18  6818              LDR      r0,[r3,#0]            ;4690  ; mess_data
002d1a  28c9              CMP      r0,#0xc9              ;4690
002d1c  d01c              BEQ      |L1.11608|
002d1e  28ca              CMP      r0,#0xca              ;4698
002d20  d02f              BEQ      |L1.11650|
;;;4703   				{
;;;4704   				if(bat[i]._cnt_to_block<50) bat[i]._cnt_to_block++;
;;;4705   				}
;;;4706   			else bat[i]._cnt_to_block=0;
;;;4707   			}
;;;4708   		}
;;;4709   	else 
;;;4710   	 	{
;;;4711   		for(i=0;i<MAX_NUM_OF_BAT;i++)
002d22  4610              MOV      r0,r2
                  |L1.11556|
;;;4712   			{
;;;4713   			bat[i]._cnt_to_block=0;
002d24  eb000340          ADD      r3,r0,r0,LSL #1
002d28  eb031300          ADD      r3,r3,r0,LSL #4
002d2c  f8012023          STRB     r2,[r1,r3,LSL #2]
002d30  f1000001          ADD      r0,r0,#1              ;4711
002d34  b2c0              UXTB     r0,r0                 ;4711
002d36  2802              CMP      r0,#2                 ;4711
002d38  d3f4              BCC      |L1.11556|
                  |L1.11578|
;;;4714   			}
;;;4715   
;;;4716   		}
;;;4717   	for(i=0;i<MAX_NUM_OF_BAT;i++)
002d3a  f04f0000          MOV      r0,#0
                  |L1.11582|
;;;4718   		{
;;;4719   		if(bat[i]._cnt_to_block>20)bat[i]._rel_stat=1;
002d3e  eb000340          ADD      r3,r0,r0,LSL #1
002d42  eb031300          ADD      r3,r3,r0,LSL #4
002d46  f8115023          LDRB     r5,[r1,r3,LSL #2]
002d4a  2d14              CMP      r5,#0x14
002d4c  d939              BLS      |L1.11714|
002d4e  eb010383          ADD      r3,r1,r3,LSL #2
002d52  f883403c          STRB     r4,[r3,#0x3c]
002d56  e038              B        |L1.11722|
                  |L1.11608|
002d58  f04f0000          MOV      r0,#0                 ;4692
                  |L1.11612|
002d5c  eb000340          ADD      r3,r0,r0,LSL #1       ;4694
002d60  eb031500          ADD      r5,r3,r0,LSL #4       ;4694
002d64  f8113025          LDRB     r3,[r1,r5,LSL #2]     ;4694
002d68  2b32              CMP      r3,#0x32              ;4694
002d6a  d203              BCS      |L1.11636|
002d6c  f1030301          ADD      r3,r3,#1              ;4694
002d70  f8013025          STRB     r3,[r1,r5,LSL #2]     ;4694
                  |L1.11636|
002d74  f1000001          ADD      r0,r0,#1              ;4692
002d78  b2c0              UXTB     r0,r0                 ;4692
002d7a  2802              CMP      r0,#2                 ;4692
002d7c  d3ee              BCC      |L1.11612|
002d7e  e7dc              B        |L1.11578|
                  |L1.11648|
002d80  e029              B        |L1.11734|
                  |L1.11650|
002d82  f04f0000          MOV      r0,#0                 ;4700
002d86  685e              LDR      r6,[r3,#4]            ;4702
                  |L1.11656|
002d88  fa04f300          LSL      r3,r4,r0              ;4702
002d8c  421e              TST      r6,r3                 ;4702
002d8e  d00c              BEQ      |L1.11690|
002d90  eb000340          ADD      r3,r0,r0,LSL #1       ;4704
002d94  eb031500          ADD      r5,r3,r0,LSL #4       ;4704
002d98  f8113025          LDRB     r3,[r1,r5,LSL #2]     ;4704
002d9c  2b32              CMP      r3,#0x32              ;4704
002d9e  d20a              BCS      |L1.11702|
002da0  f1030301          ADD      r3,r3,#1              ;4704
002da4  f8013025          STRB     r3,[r1,r5,LSL #2]     ;4704
002da8  e005              B        |L1.11702|
                  |L1.11690|
002daa  eb000340          ADD      r3,r0,r0,LSL #1       ;4706
002dae  eb031300          ADD      r3,r3,r0,LSL #4       ;4706
002db2  f8012023          STRB     r2,[r1,r3,LSL #2]     ;4706
                  |L1.11702|
002db6  f1000001          ADD      r0,r0,#1              ;4700
002dba  b2c0              UXTB     r0,r0                 ;4700
002dbc  2802              CMP      r0,#2                 ;4700
002dbe  d3e3              BCC      |L1.11656|
002dc0  e7bb              B        |L1.11578|
                  |L1.11714|
;;;4720   		else bat[i]._rel_stat=0;
002dc2  eb010383          ADD      r3,r1,r3,LSL #2
002dc6  f883203c          STRB     r2,[r3,#0x3c]
                  |L1.11722|
002dca  f1000001          ADD      r0,r0,#1              ;4717
002dce  b2c0              UXTB     r0,r0                 ;4717
002dd0  2802              CMP      r0,#2                 ;4717
002dd2  d3b4              BCC      |L1.11582|
;;;4721   		}
;;;4722   
;;;4723   	}
;;;4724   
;;;4725   else 
;;;4726   	{
;;;4727   	char i;
;;;4728   	for(i=0;i<MAX_NUM_OF_BAT;i++)
;;;4729   		{
;;;4730   		bat[i]._cnt_to_block=0;
;;;4731   		bat[i]._rel_stat=0;
;;;4732   		}
;;;4733   
;;;4734   	}
;;;4735   
;;;4736   /*if(mess_find_unvol(MESS2BAT_HNDL1))
;;;4737   	{
;;;4738   	if(PARAM_BAT_ON)
;;;4739   		{
;;;4740   		char i;
;;;4741   		for(i=0;i<MAX_NUM_OF_BAT;i++)
;;;4742   			{
;;;4743   			if(mess_data[1]&(1<<i))
;;;4744   				{
;;;4745   				bat[i]._cnt_to_block=0;
;;;4746   				bat[i]._rel_stat=0;
;;;4747   				}
;;;4748   			}
;;;4749   		}
;;;4750   	} */
;;;4751   }
002dd4  bd70              POP      {r4-r6,pc}
                  |L1.11734|
002dd6  f04f0000          MOV      r0,#0                 ;4728
                  |L1.11738|
002dda  eb000340          ADD      r3,r0,r0,LSL #1       ;4730
002dde  eb031300          ADD      r3,r3,r0,LSL #4       ;4730
002de2  f8012023          STRB     r2,[r1,r3,LSL #2]     ;4730
002de6  eb010383          ADD      r3,r1,r3,LSL #2       ;4731
002dea  f883203c          STRB     r2,[r3,#0x3c]         ;4731
002dee  f1000001          ADD      r0,r0,#1              ;4728
002df2  b2c0              UXTB     r0,r0                 ;4728
002df4  2802              CMP      r0,#2                 ;4728
002df6  d3f0              BCC      |L1.11738|
002df8  bd70              POP      {r4-r6,pc}
;;;4752   
                          ENDP

                  bat_drv PROC
;;;5389   //-----------------------------------------------
;;;5390   void bat_drv(char in)
002dfa  e92d4ffe          PUSH     {r1-r11,lr}
;;;5391   {
002dfe  4605              MOV      r5,r0
;;;5392   unsigned short /*tempUS,*/tempUS_;
;;;5393   unsigned long tempUL,tempUL_;
;;;5394   unsigned short b_zar;
;;;5395   //static unsigned short time_cnt[2];
;;;5396   
;;;5397   
;;;5398   
;;;5399   if(cntrl_stat_blok_cnt_plus[in])cntrl_stat_blok_cnt_plus[in]--;
002e00  49c4              LDR      r1,|L1.12564|
002e02  f9310015          LDRSH    r0,[r1,r5,LSL #1]
002e06  b118              CBZ      r0,|L1.11792|
002e08  f1a00001          SUB      r0,r0,#1
002e0c  f8210015          STRH     r0,[r1,r5,LSL #1]
                  |L1.11792|
;;;5400   if(cntrl_stat_blok_cnt_minus[in])cntrl_stat_blok_cnt_minus[in]--;
002e10  4ac0              LDR      r2,|L1.12564|
002e12  1d12              ADDS     r2,r2,#4
002e14  f9320015          LDRSH    r0,[r2,r5,LSL #1]
002e18  b118              CBZ      r0,|L1.11810|
002e1a  f1a00001          SUB      r0,r0,#1
002e1e  f8220015          STRH     r0,[r2,r5,LSL #1]
                  |L1.11810|
;;;5401   
;;;5402   
;;;5403   if(bat[in]._Ib>IZMAX) cntrl_stat_blok_cnt_plus[in]=100;
002e22  eb050045          ADD      r0,r5,r5,LSL #1
002e26  4bb9              LDR      r3,|L1.12556|
002e28  eb001005          ADD      r0,r0,r5,LSL #4
002e2c  eb030480          ADD      r4,r3,r0,LSL #2
002e30  4bb9              LDR      r3,|L1.12568|
002e32  9002              STR      r0,[sp,#8]
002e34  f9b40008          LDRSH    r0,[r4,#8]
002e38  f9b33000          LDRSH    r3,[r3,#0]  ; IZMAX
002e3c  f04f0b64          MOV      r11,#0x64
002e40  4298              CMP      r0,r3
002e42  dd01              BLE      |L1.11848|
002e44  f821b015          STRH     r11,[r1,r5,LSL #1]
                  |L1.11848|
;;;5404   if(bat[in]._Ib<0)     cntrl_stat_blok_cnt_minus[in]=100;
002e48  2800              CMP      r0,#0
002e4a  da01              BGE      |L1.11856|
002e4c  f822b015          STRH     r11,[r2,r5,LSL #1]
                  |L1.11856|
;;;5405   
;;;5406   if(cntrl_stat_blok_cnt_plus[in] && cntrl_stat_blok_cnt_minus[in])
;;;5407        {
;;;5408        if(!cntrl_stat_blok_cnt_)
002e50  48b0              LDR      r0,|L1.12564|
002e52  f8313015          LDRH     r3,[r1,r5,LSL #1]     ;5406
002e56  3884              SUBS     r0,r0,#0x84
002e58  2700              MOVS     r7,#0
002e5a  b14b              CBZ      r3,|L1.11888|
002e5c  f8323015          LDRH     r3,[r2,r5,LSL #1]     ;5406
002e60  b133              CBZ      r3,|L1.11888|
002e62  f8b03064          LDRH     r3,[r0,#0x64]  ; cntrl_stat_blok_cnt_
002e66  b1a3              CBZ      r3,|L1.11922|
;;;5409             {
;;;5410             cntrl_stat_blok_cnt_=600; 
;;;5411             cntrl_stat_blok_cnt_plus[in]=0;
;;;5412             cntrl_stat_blok_cnt_minus[in]=0;
;;;5413             }
;;;5414        else cntrl_stat_blok_cnt=3000;
002e68  f64031b8          MOV      r1,#0xbb8
002e6c  f8a01062          STRH     r1,[r0,#0x62]
                  |L1.11888|
;;;5415        }
;;;5416   cntrl_stat_blok_cnt=0;
002e70  f8a07062          STRH     r7,[r0,#0x62]
;;;5417   
;;;5418   if(++(bat[in]._time_cnt)>=10)
002e74  f894003e          LDRB     r0,[r4,#0x3e]
002e78  1c40              ADDS     r0,r0,#1
002e7a  b2c0              UXTB     r0,r0
002e7c  f884003e          STRB     r0,[r4,#0x3e]
002e80  280a              CMP      r0,#0xa
002e82  d301              BCC      |L1.11912|
;;;5419   	{
;;;5420   	bat[in]._time_cnt=0;
002e84  f884703e          STRB     r7,[r4,#0x3e]
                  |L1.11912|
;;;5421   	//bat[in]._zar_cnt++;
;;;5422   	}
;;;5423   
;;;5424   if(main_10Hz_cnt==50)
002e88  4ea4              LDR      r6,|L1.12572|
002e8a  8830              LDRH     r0,[r6,#0]  ; main_10Hz_cnt
002e8c  2832              CMP      r0,#0x32
002e8e  d009              BEQ      |L1.11940|
002e90  e017              B        |L1.11970|
                  |L1.11922|
002e92  f44f7316          MOV      r3,#0x258             ;5410
002e96  f8a03064          STRH     r3,[r0,#0x64]         ;5410
002e9a  f8217015          STRH     r7,[r1,r5,LSL #1]     ;5411
002e9e  f8227015          STRH     r7,[r2,r5,LSL #1]     ;5412
002ea2  e7e5              B        |L1.11888|
                  |L1.11940|
;;;5425   	{
;;;5426   	if(!bat[in]._rel_stat)
002ea4  f894003c          LDRB     r0,[r4,#0x3c]
002ea8  b958              CBNZ     r0,|L1.11970|
;;;5427   		{
;;;5428   		
;;;5429   		if(bat[in]._Ub<80) 
002eaa  f9b40002          LDRSH    r0,[r4,#2]
002eae  2850              CMP      r0,#0x50
002eb0  da07              BGE      |L1.11970|
;;;5430   			{
;;;5431   			
;;;5432   			if(!(bat[in]._av&1))
002eb2  f894003d          LDRB     r0,[r4,#0x3d]
002eb6  07c0              LSLS     r0,r0,#31
002eb8  d103              BNE      |L1.11970|
;;;5433   				{
;;;5434   				avar_bat_hndl(in,1);
002eba  2101              MOVS     r1,#1
002ebc  4628              MOV      r0,r5
002ebe  f7fffffe          BL       avar_bat_hndl
                  |L1.11970|
;;;5435   				//if(in==0)plazma_bat++;
;;;5436   				}
;;;5437   			}				
;;;5438   
;;;5439   		}
;;;5440   	}
;;;5441   
;;;5442   if(main_10Hz_cnt>200)
002ec2  f9b60000          LDRSH    r0,[r6,#0]  ; main_10Hz_cnt
;;;5443   	{
;;;5444   	if(abs(bat[in]._Ib)>IKB) 
002ec6  4e96              LDR      r6,|L1.12576|
002ec8  28c8              CMP      r0,#0xc8              ;5442
002eca  dd0f              BLE      |L1.12012|
002ecc  f9b40008          LDRSH    r0,[r4,#8]
002ed0  f7fffffe          BL       abs
002ed4  f9b61000          LDRSH    r1,[r6,#0]  ; IKB
002ed8  4288              CMP      r0,r1
002eda  dd07              BLE      |L1.12012|
;;;5445   		{
;;;5446   		if((bat[in]._av&1))avar_bat_hndl(in,0);
002edc  f894003d          LDRB     r0,[r4,#0x3d]
002ee0  07c0              LSLS     r0,r0,#31
002ee2  d003              BEQ      |L1.12012|
002ee4  2100              MOVS     r1,#0
002ee6  4628              MOV      r0,r5
002ee8  f7fffffe          BL       avar_bat_hndl
                  |L1.12012|
;;;5447   		}
;;;5448   	}
;;;5449   
;;;5450   #ifdef APSENERGIA
;;;5451   //if(bat[in]._Ib>(-IKB))
;;;5452   
;;;5453   
;;;5454   #endif
;;;5455   
;;;5456   if(bat[in]._Ib>(-IKB))
002eec  488c              LDR      r0,|L1.12576|
002eee  f9b41008          LDRSH    r1,[r4,#8]
002ef2  f9b00000          LDRSH    r0,[r0,#0]  ; IKB
002ef6  4240              RSBS     r0,r0,#0
002ef8  4281              CMP      r1,r0
002efa  dd14              BLE      |L1.12070|
;;;5457   	{
;;;5458   	if(bat[in]._cnt_wrk<10)
002efc  7b60              LDRB     r0,[r4,#0xd]
002efe  280a              CMP      r0,#0xa
002f00  d20d              BCS      |L1.12062|
;;;5459   		{
;;;5460   		bat[in]._cnt_wrk++;
002f02  f1000001          ADD      r0,r0,#1
002f06  b2c0              UXTB     r0,r0
002f08  7360              STRB     r0,[r4,#0xd]
;;;5461   		if((bat[in]._cnt_wrk>=10)&&(bat[in]._wrk)) 
002f0a  280a              CMP      r0,#0xa
002f0c  d371              BCC      |L1.12274|
002f0e  7ba0              LDRB     r0,[r4,#0xe]
002f10  2800              CMP      r0,#0
002f12  d06e              BEQ      |L1.12274|
;;;5462   			{
;;;5463   			bat[in]._wrk=0;
002f14  73a7              STRB     r7,[r4,#0xe]
;;;5464   			//beep_init(0x7L,'O');
;;;5465   			//wrk_mem_hndl(0);
;;;5466   			wrk_mem_hndl(in);
002f16  4628              MOV      r0,r5
002f18  f7fffffe          BL       wrk_mem_hndl
002f1c  e069              B        |L1.12274|
                  |L1.12062|
;;;5467   			//plazma++;
;;;5468   			}
;;;5469   		}
;;;5470   	else bat[in]._cnt_wrk=10;	
002f1e  f04f000a          MOV      r0,#0xa
002f22  7360              STRB     r0,[r4,#0xd]
002f24  e065              B        |L1.12274|
                  |L1.12070|
;;;5471   	}	
;;;5472   
;;;5473   else if(bat[in]._Ib<(-IKB))
002f26  da64              BGE      |L1.12274|
;;;5474   	{
;;;5475   	if(bat[in]._cnt_wrk)
002f28  7b60              LDRB     r0,[r4,#0xd]
002f2a  b3f0              CBZ      r0,|L1.12202|
;;;5476   		{
;;;5477   		bat[in]._cnt_wrk--;
002f2c  f1a00001          SUB      r0,r0,#1
002f30  b2c0              UXTB     r0,r0
002f32  7360              STRB     r0,[r4,#0xd]
;;;5478   		if((bat[in]._cnt_wrk==0)&&(bat[in]._wrk==0)) 
002f34  bbc8              CBNZ     r0,|L1.12202|
002f36  7ba0              LDRB     r0,[r4,#0xe]
002f38  bbb8              CBNZ     r0,|L1.12202|
;;;5479   			{
;;;5480   			bat[in]._wrk=1;
002f3a  f04f0001          MOV      r0,#1
002f3e  73a0              STRB     r0,[r4,#0xe]
;;;5481   
;;;5482   				{
;;;5483   				char temp;
;;;5484   				signed short temp_temp;
;;;5485   				temp_temp=bat[in]._u_old[((bat_u_old_cnt+1)&0x07)];
002f40  4878              LDR      r0,|L1.12580|
002f42  8800              LDRH     r0,[r0,#0]  ; bat_u_old_cnt
002f44  f1000001          ADD      r0,r0,#1
002f48  f0000007          AND      r0,r0,#7
002f4c  eb040040          ADD      r0,r4,r0,LSL #1
002f50  8c00              LDRH     r0,[r0,#0x20]
002f52  9000              STR      r0,[sp,#0]
;;;5486   			 
;;;5487   				temp=LPC_RTC->YEAR;
002f54  4e74              LDR      r6,|L1.12584|
002f56  8bb0              LDRH     r0,[r6,#0x1c]
002f58  9001              STR      r0,[sp,#4]
;;;5488   				gran_char((signed char*)&temp,1,99);
002f5a  f04f0263          MOV      r2,#0x63
002f5e  f04f0101          MOV      r1,#1
002f62  a801              ADD      r0,sp,#4
002f64  f7fffffe          BL       gran_char
;;;5489   				*((char*)(&(bat[in]._wrk_date[0])))=temp;
002f68  f104041c          ADD      r4,r4,#0x1c
002f6c  f89d0004          LDRB     r0,[sp,#4]
002f70  7620              STRB     r0,[r4,#0x18]
;;;5490   			
;;;5491   				temp=LPC_RTC->MONTH;
002f72  7e30              LDRB     r0,[r6,#0x18]
002f74  9001              STR      r0,[sp,#4]
;;;5492   				gran_char((signed char*)&temp,1,12);
002f76  f04f020c          MOV      r2,#0xc
002f7a  f04f0101          MOV      r1,#1
002f7e  a801              ADD      r0,sp,#4
002f80  f7fffffe          BL       gran_char
;;;5493   				*(((char*)(&(bat[in]._wrk_date[0])))+1)=temp;
002f84  f89d0004          LDRB     r0,[sp,#4]
002f88  7660              STRB     r0,[r4,#0x19]
;;;5494   			
;;;5495   				temp=LPC_RTC->DOM;
002f8a  7b30              LDRB     r0,[r6,#0xc]
002f8c  9001              STR      r0,[sp,#4]
;;;5496   				gran_char((signed char*)&temp,1,31);
002f8e  221f              MOVS     r2,#0x1f
002f90  2101              MOVS     r1,#1
002f92  a801              ADD      r0,sp,#4
002f94  f7fffffe          BL       gran_char
;;;5497   				*(((char*)(&(bat[in]._wrk_date[0])))+2)=temp;			
002f98  f89d0004          LDRB     r0,[sp,#4]
002f9c  76a0              STRB     r0,[r4,#0x1a]
;;;5498   				
;;;5499   				*(((char*)(&(bat[in]._wrk_date[0])))+3)=*((char*)&temp_temp);
002f9e  f89d0000          LDRB     r0,[sp,#0]
002fa2  76e0              STRB     r0,[r4,#0x1b]
;;;5500   
;;;5501   				temp=LPC_RTC->HOUR;
002fa4  7a30              LDRB     r0,[r6,#8]
002fa6  9001              STR      r0,[sp,#4]
;;;5502   				gran_char((signed char*)&temp,0,23);
002fa8  e000              B        |L1.12204|
                  |L1.12202|
002faa  e022              B        |L1.12274|
                  |L1.12204|
002fac  2217              MOVS     r2,#0x17
002fae  2100              MOVS     r1,#0
002fb0  a801              ADD      r0,sp,#4
002fb2  f7fffffe          BL       gran_char
;;;5503   				*((char*)(&(bat[in]._wrk_date[1])))=temp;
002fb6  f89d0004          LDRB     r0,[sp,#4]
002fba  7720              STRB     r0,[r4,#0x1c]
;;;5504                  	
;;;5505   				temp=LPC_RTC->MIN;
002fbc  7930              LDRB     r0,[r6,#4]
002fbe  9001              STR      r0,[sp,#4]
;;;5506   				gran_char((signed char*)&temp,0,59);
002fc0  223b              MOVS     r2,#0x3b
002fc2  2100              MOVS     r1,#0
002fc4  a801              ADD      r0,sp,#4
002fc6  f7fffffe          BL       gran_char
;;;5507   				*(((char*)(&(bat[in]._wrk_date[1])))+1)=temp;
002fca  f89d0004          LDRB     r0,[sp,#4]
002fce  7760              STRB     r0,[r4,#0x1d]
;;;5508   	          
;;;5509   				temp=LPC_RTC->SEC;
002fd0  7830              LDRB     r0,[r6,#0]
002fd2  9001              STR      r0,[sp,#4]
;;;5510   				gran_char((signed char*)&temp,0,59);
002fd4  223b              MOVS     r2,#0x3b
002fd6  2100              MOVS     r1,#0
002fd8  a801              ADD      r0,sp,#4
002fda  f7fffffe          BL       gran_char
;;;5511   				*(((char*)(&(bat[in]._wrk_date[1])))+2)=temp;
002fde  f89d0004          LDRB     r0,[sp,#4]
002fe2  77a0              STRB     r0,[r4,#0x1e]
;;;5512   			
;;;5513   				*(((char*)(&(bat[in]._wrk_date[1])))+3)=*(((char*)&temp_temp)+1);
002fe4  f89d0001          LDRB     r0,[sp,#1]
002fe8  77e0              STRB     r0,[r4,#0x1f]
;;;5514   				bat[in]._Iintegr=0;		//  
002fea  8027              STRH     r7,[r4,#0]
;;;5515   				bat[in]._Iintegr_=0;	//  
002fec  8067              STRH     r7,[r4,#2]
002fee  f1a4041c          SUB      r4,r4,#0x1c
                  |L1.12274|
;;;5516   				}
;;;5517   	
;;;5518   			}
;;;5519   
;;;5520   		}
;;;5521   	else bat[in]._cnt_wrk=0;	 
;;;5522   	
;;;5523   	}					
;;;5524   
;;;5525   /*
;;;5526   if(Ibat>=(-IKB))
;;;5527   	{
;;;5528   	if(cnt_wrk<10)
;;;5529   		{
;;;5530   		cnt_wrk++;
;;;5531   		if((cnt_wrk>=10)&&(wrk!=wrkOFF)) 
;;;5532   			{
;;;5533   			wrk=wrkOFF;
;;;5534   			//beep_init(0x7L,'O');
;;;5535   			wrk_mem_hndl(ibat_integr);
;;;5536   			}
;;;5537   		}
;;;5538   	else cnt_wrk=10;	
;;;5539   	}	
;;;5540   
;;;5541   else if((Ibat<(-IKB))&&(spc_stat!=spc_KE))
;;;5542   	{
;;;5543   	if(cnt_wrk)
;;;5544   		{
;;;5545   		cnt_wrk--;
;;;5546   		if((cnt_wrk==0)&&(wrk!=wrkON)) 
;;;5547   			{
;;;5548   			char temp;
;;;5549   			signed short temp_temp;
;;;5550   			temp_temp=ubat_old[((ubat_old_cnt+1)&0x07)];
;;;5551   			 
;;;5552   			wrk=wrkON;
;;;5553   			
;;;5554   			temp=_year;
;;;5555   			gran_char(&temp,1,99);
;;;5556   			*((char*)(&(wrk_date[0])))=temp;
;;;5557   			
;;;5558   			temp=_month;
;;;5559   			gran_char(&temp,1,12);
;;;5560   			*(((char*)(&(wrk_date[0])))+1)=temp;
;;;5561   			
;;;5562   			temp=_date;
;;;5563   			gran_char(&temp,1,31);
;;;5564   			*(((char*)(&(wrk_date[0])))+2)=temp;			
;;;5565   				
;;;5566   			*(((char*)(&(wrk_date[0])))+3)=*((char*)&temp_temp);
;;;5567   
;;;5568   			temp=_hour;
;;;5569   			gran_char(&temp,0,23);
;;;5570   			*((char*)(&(wrk_date[1])))=temp;
;;;5571                  
;;;5572   			temp=_min;
;;;5573   			gran_char(&temp,0,59);
;;;5574   			*(((char*)(&(wrk_date[1])))+1)=temp;
;;;5575   	          
;;;5576   			temp=_sec;
;;;5577   			gran_char(&temp,0,59);
;;;5578   			*(((char*)(&(wrk_date[1])))+2)=temp;
;;;5579   			
;;;5580   			*(((char*)(&(wrk_date[1])))+3)=*(((char*)&temp_temp)+1);
;;;5581   
;;;5582   			
;;;5583   			//beep_init(0xFL,'O'); 
;;;5584   			ibat_integr=0;
;;;5585   			ibat_integr_=0;
;;;5586   			}
;;;5587   		}
;;;5588   	else cnt_wrk=0;	 
;;;5589   	
;;;5590   	}
;;;5591   if(wrk==wrkON)
;;;5592   	{
;;;5593   	ibat_integr_+=-Ibat;
;;;5594   	if(ibat_integr_>=SEC_IN_HOUR*10L)
;;;5595   		{
;;;5596   		ibat_integr_-=SEC_IN_HOUR*10L;
;;;5597   		ibat_integr++;
;;;5598   		}
;;;5599   	}
;;;5600   
;;;5601   */
;;;5602   
;;;5603   
;;;5604   /*if(bat[in]._cnt_to_block)
;;;5605   	{
;;;5606   	bat[in]._cnt_to_block--;
;;;5607   	if(!(bat[in]._cnt_to_block))
;;;5608   		{
;;;5609   		//bat[in]._rel_stat=1;
;;;5610   		}
;;;5611   	}
;;;5612   */
;;;5613   
;;;5614   
;;;5615   
;;;5616   
;;;5617   //unsigned int tempUI,tempUI_;
;;;5618   //unsigned int b_zar; 
;;;5619   //char i;
;;;5620   //Ibat[0]=5000;                     
;;;5621   
;;;5622   
;;;5623                               
;;;5624   if(bat[in]._time_cnt==0)
;;;5625   	{
;;;5626   	bat[in]._zar_cnt+=(signed long)bat[in]._Ib;
;;;5627   	
;;;5628   	if(bat[in]._zar_cnt>=AH_CONSTANT)
002ff2  f64848a0          MOV      r8,#0x8ca0
002ff6  f894003e          LDRB     r0,[r4,#0x3e]         ;5624
002ffa  2800              CMP      r0,#0                 ;5624
002ffc  d12a              BNE      |L1.12372|
002ffe  f9b41008          LDRSH    r1,[r4,#8]            ;5626
003002  6960              LDR      r0,[r4,#0x14]         ;5626
003004  4408              ADD      r0,r0,r1              ;5626
003006  6160              STR      r0,[r4,#0x14]         ;5626
;;;5629   		{
;;;5630   		if(BAT_C_REAL[in]==0x5555) tempUS_=BAT_C_NOM[in];
;;;5631   		else tempUS_=BAT_C_REAL[in];
;;;5632   		
;;;5633   		b_zar=lc640_read_int(ADR_EE_BAT_ZAR_CNT[in]);
003008  f8df9120          LDR      r9,|L1.12588|
00300c  f8dfa120          LDR      r10,|L1.12592|
003010  4540              CMP      r0,r8                 ;5628
003012  db20              BLT      |L1.12374|
003014  f93a1015          LDRSH    r1,[r10,r5,LSL #1]    ;5630
003018  f5a140aa          SUB      r0,r1,#0x5500         ;5630
00301c  3855              SUBS     r0,r0,#0x55           ;5630
00301e  d103              BNE      |L1.12328|
003020  4844              LDR      r0,|L1.12596|
003022  f8306015          LDRH     r6,[r0,r5,LSL #1]     ;5630
003026  e001              B        |L1.12332|
                  |L1.12328|
003028  f83a6015          LDRH     r6,[r10,r5,LSL #1]    ;5631
                  |L1.12332|
00302c  f8390015          LDRH     r0,[r9,r5,LSL #1]
003030  f7fffffe          BL       lc640_read_int
003034  b280              UXTH     r0,r0
;;;5634   
;;;5635   		if(b_zar<(tempUS_/**10*/))
003036  42b0              CMP      r0,r6
003038  d27e              BCS      |L1.12600|
;;;5636   			{
;;;5637   			bat[in]._zar_cnt-=AH_CONSTANT;
00303a  6961              LDR      r1,[r4,#0x14]
00303c  f5a14100          SUB      r1,r1,#0x8000
003040  f5a1614a          SUB      r1,r1,#0xca0
003044  6161              STR      r1,[r4,#0x14]
;;;5638   
;;;5639   			lc640_write_int(ADR_EE_BAT_ZAR_CNT[in],b_zar+1);
003046  f9392015          LDRSH    r2,[r9,r5,LSL #1]
00304a  f1000001          ADD      r0,r0,#1
00304e  b201              SXTH     r1,r0
003050  4610              MOV      r0,r2
003052  e072              B        |L1.12602|
                  |L1.12372|
003054  e0d6              B        |L1.12804|
                  |L1.12374|
003056  e07c              B        |L1.12626|
                  |L1.12376|
003058  4176746f          DCB      "Avtomat #1 is ON ",0
00305c  6d617420
003060  23312069
003064  73204f4e
003068  2000    
00306a  00                DCB      0
00306b  00                DCB      0
                  |L1.12396|
00306c  4176746f          DCB      "Avtomat #2 is ON ",0
003070  6d617420
003074  23322069
003078  73204f4e
00307c  2000    
00307e  00                DCB      0
00307f  00                DCB      0
                  |L1.12416|
003080  4176746f          DCB      "Avtomat #3 is ON ",0
003084  6d617420
003088  23332069
00308c  73204f4e
003090  2000    
003092  00                DCB      0
003093  00                DCB      0
                  |L1.12436|
003094  4176746f          DCB      "Avtomat #4 is ON ",0
003098  6d617420
00309c  23342069
0030a0  73204f4e
0030a4  2000    
0030a6  00                DCB      0
0030a7  00                DCB      0
                  |L1.12456|
0030a8  4176746f          DCB      "Avtomat #5 is ON ",0
0030ac  6d617420
0030b0  23352069
0030b4  73204f4e
0030b8  2000    
0030ba  00                DCB      0
0030bb  00                DCB      0
                  |L1.12476|
0030bc  4176746f          DCB      "Avtomat #6 is ON ",0
0030c0  6d617420
0030c4  23362069
0030c8  73204f4e
0030cc  2000    
0030ce  00                DCB      0
0030cf  00                DCB      0
                  |L1.12496|
0030d0  4176746f          DCB      "Avtomat #7 is ON ",0
0030d4  6d617420
0030d8  23372069
0030dc  73204f4e
0030e0  2000    
0030e2  00                DCB      0
0030e3  00                DCB      0
                  |L1.12516|
0030e4  4176746f          DCB      "Avtomat #8 is ON ",0
0030e8  6d617420
0030ec  23382069
0030f0  73204f4e
0030f4  2000    
0030f6  00                DCB      0
0030f7  00                DCB      0
                  |L1.12536|
0030f8  4176746f          DCB      "Avtomat #9 is ON ",0
0030fc  6d617420
003100  23392069
003104  73204f4e
003108  2000    
00310a  00                DCB      0
00310b  00                DCB      0
                  |L1.12556|
                          DCD      bat
                  |L1.12560|
                          DCD      mess_data
                  |L1.12564|
                          DCD      ||area_number.22||+0x84
                  |L1.12568|
                          DCD      IZMAX
                  |L1.12572|
                          DCD      main_10Hz_cnt
                  |L1.12576|
                          DCD      IKB
                  |L1.12580|
                          DCD      bat_u_old_cnt
                  |L1.12584|
                          DCD      0x40024020
                  |L1.12588|
                          DCD      ADR_EE_BAT_ZAR_CNT
                  |L1.12592|
                          DCD      BAT_C_REAL
                  |L1.12596|
                          DCD      BAT_C_NOM
                  |L1.12600|
003138  e002              B        |L1.12608|
                  |L1.12602|
00313a  f7fffffe          BL       lc640_write_int
00313e  e033              B        |L1.12712|
                  |L1.12608|
;;;5640   			}
;;;5641   		else if(b_zar>(tempUS_/**10*/))  
003140  d932              BLS      |L1.12712|
;;;5642   			{
;;;5643   			lc640_write_int(ADR_EE_BAT_ZAR_CNT[in],tempUS_);
003142  f9390015          LDRSH    r0,[r9,r5,LSL #1]
003146  b231              SXTH     r1,r6
003148  f7fffffe          BL       lc640_write_int
;;;5644   			bat[in]._zar_cnt=AH_CONSTANT;
00314c  f8c48014          STR      r8,[r4,#0x14]
003150  e02a              B        |L1.12712|
                  |L1.12626|
;;;5645   
;;;5646   			}
;;;5647   
;;;5648   		}
;;;5649   
;;;5650   	else if(bat[in]._zar_cnt<=-AH_CONSTANT)
003152  49ff              LDR      r1,|L1.13648|
003154  4288              CMP      r0,r1
003156  dc27              BGT      |L1.12712|
;;;5651   		{
;;;5652   		if(BAT_C_REAL[in]==0x5555) tempUS_=BAT_C_NOM[in];
003158  f93a1015          LDRSH    r1,[r10,r5,LSL #1]
00315c  f5a140aa          SUB      r0,r1,#0x5500
003160  3855              SUBS     r0,r0,#0x55
003162  d103              BNE      |L1.12652|
003164  48fb              LDR      r0,|L1.13652|
003166  f8306015          LDRH     r6,[r0,r5,LSL #1]
00316a  e001              B        |L1.12656|
                  |L1.12652|
;;;5653   		else tempUS_=BAT_C_REAL[in];
00316c  f83a6015          LDRH     r6,[r10,r5,LSL #1]
                  |L1.12656|
;;;5654   		
;;;5655   		b_zar=lc640_read_int(ADR_EE_BAT_ZAR_CNT[in]);
003170  f8390015          LDRH     r0,[r9,r5,LSL #1]
003174  f7fffffe          BL       lc640_read_int
003178  b280              UXTH     r0,r0
;;;5656   
;;;5657   		if(b_zar>tempUS_)
00317a  42b0              CMP      r0,r6
00317c  d905              BLS      |L1.12682|
;;;5658   			{
;;;5659   			lc640_write_int(ADR_EE_BAT_ZAR_CNT[in],tempUS_);
00317e  f9390015          LDRSH    r0,[r9,r5,LSL #1]
003182  b231              SXTH     r1,r6
003184  f7fffffe          BL       lc640_write_int
;;;5660   			b_zar=tempUS_;
003188  4630              MOV      r0,r6
                  |L1.12682|
;;;5661   			}
;;;5662   		if(b_zar)
00318a  b158              CBZ      r0,|L1.12708|
;;;5663   			{
;;;5664   			bat[in]._zar_cnt+=AH_CONSTANT;
00318c  6961              LDR      r1,[r4,#0x14]
00318e  4441              ADD      r1,r1,r8
003190  6161              STR      r1,[r4,#0x14]
;;;5665   
;;;5666   			lc640_write_int(ADR_EE_BAT_ZAR_CNT[in],b_zar-1);
003192  f9392015          LDRSH    r2,[r9,r5,LSL #1]
003196  f1a00001          SUB      r0,r0,#1
00319a  b201              SXTH     r1,r0
00319c  4610              MOV      r0,r2
00319e  f7fffffe          BL       lc640_write_int
0031a2  e001              B        |L1.12712|
                  |L1.12708|
;;;5667   			}
;;;5668   		else 
;;;5669   			{
;;;5670   			bat[in]._zar_cnt=-AH_CONSTANT;
0031a4  48ea              LDR      r0,|L1.13648|
0031a6  6160              STR      r0,[r4,#0x14]
                  |L1.12712|
;;;5671   			}
;;;5672   
;;;5673   		}
;;;5674   
;;;5675   			
;;;5676   	tempUL=(unsigned long)lc640_read_int(ADR_EE_BAT_ZAR_CNT[in]);
0031a8  f8390015          LDRH     r0,[r9,r5,LSL #1]
0031ac  f7fffffe          BL       lc640_read_int
0031b0  4601              MOV      r1,r0
;;;5677   	
;;;5678   	if(BAT_C_REAL[in]==0x5555) tempUL_=(unsigned long)BAT_C_NOM[in];
0031b2  f93a0015          LDRSH    r0,[r10,r5,LSL #1]
0031b6  f5a042aa          SUB      r2,r0,#0x5500
0031ba  3a55              SUBS     r2,r2,#0x55
0031bc  d102              BNE      |L1.12740|
0031be  48e5              LDR      r0,|L1.13652|
0031c0  f9300015          LDRSH    r0,[r0,r5,LSL #1]
                  |L1.12740|
;;;5679   	else tempUL_=(unsigned long)BAT_C_REAL[in];
;;;5680   		           	
;;;5681   	tempUL*=1000L;
0031c4  f44f727a          MOV      r2,#0x3e8
0031c8  fb01f102          MUL      r1,r1,r2
;;;5682   
;;;5683   
;;;5684   	if(tempUL_==0) tempUL=0;
0031cc  b158              CBZ      r0,|L1.12774|
;;;5685   	else tempUL/=tempUL_;
0031ce  fbb1f0f0          UDIV     r0,r1,r0
                  |L1.12754|
;;;5686   
;;;5687   	tempUL/=10L;
0031d2  f04f010a          MOV      r1,#0xa
0031d6  fbb0f0f1          UDIV     r0,r0,r1
;;;5688   
;;;5689   	bat[in]._zar=(unsigned short)tempUL;
0031da  8220              STRH     r0,[r4,#0x10]
;;;5690   
;;;5691   	if(BAT_TYPE==1)
0031dc  48de              LDR      r0,|L1.13656|
0031de  8800              LDRH     r0,[r0,#0]  ; BAT_TYPE
0031e0  2801              CMP      r0,#1
0031e2  d003              BEQ      |L1.12780|
0031e4  e008              B        |L1.12792|
                  |L1.12774|
0031e6  f04f0000          MOV      r0,#0                 ;5684
0031ea  e7f2              B        |L1.12754|
                  |L1.12780|
;;;5692   		{
;;;5693   		bat[in]._zar=lakb[in]._s_o_c;
0031ec  49db              LDR      r1,|L1.13660|
0031ee  9802              LDR      r0,[sp,#8]
0031f0  eb010080          ADD      r0,r1,r0,LSL #2
0031f4  8a40              LDRH     r0,[r0,#0x12]
0031f6  8220              STRH     r0,[r4,#0x10]
                  |L1.12792|
;;;5694   		}
;;;5695   	
;;;5696   	gran((signed short*)&bat[in]._zar,0,100);
0031f8  f1040010          ADD      r0,r4,#0x10
0031fc  2264              MOVS     r2,#0x64
0031fe  2100              MOVS     r1,#0
003200  f7fffffe          BL       gran
                  |L1.12804|
;;;5697        }
;;;5698   
;;;5699   
;;;5700   //         
;;;5701   if(bat[in]._wrk==1)
003204  7ba0              LDRB     r0,[r4,#0xe]
003206  2801              CMP      r0,#1
003208  d113              BNE      |L1.12850|
;;;5702   	{
;;;5703   	if(bat[in]._Iintegr<36000)
00320a  8ba0              LDRH     r0,[r4,#0x1c]
00320c  4540              CMP      r0,r8
00320e  d20f              BCS      |L1.12848|
;;;5704   		{          
;;;5705   		bat[in]._Iintegr+=abs(bat[in]._Ib);
003210  f9b40008          LDRSH    r0,[r4,#8]
003214  f7fffffe          BL       abs
003218  8ba1              LDRH     r1,[r4,#0x1c]
00321a  4408              ADD      r0,r0,r1
00321c  b280              UXTH     r0,r0
00321e  83a0              STRH     r0,[r4,#0x1c]
;;;5706   		if(bat[in]._Iintegr>=36000)
003220  4540              CMP      r0,r8
003222  d306              BCC      |L1.12850|
;;;5707   			{
;;;5708   			bat[in]._Iintegr=0;		//  
003224  83a7              STRH     r7,[r4,#0x1c]
;;;5709   			bat[in]._Iintegr_++;	//  
003226  8be0              LDRH     r0,[r4,#0x1e]
003228  f1000001          ADD      r0,r0,#1
00322c  83e0              STRH     r0,[r4,#0x1e]
00322e  e000              B        |L1.12850|
                  |L1.12848|
;;;5710   			}
;;;5711   		}
;;;5712   	else 
;;;5713   		{
;;;5714   		bat[in]._Iintegr=0;
003230  83a7              STRH     r7,[r4,#0x1c]
                  |L1.12850|
;;;5715   		}	
;;;5716   	} 
;;;5717   	    
;;;5718   #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;5719   if((t_ext[0]>TBATSIGN)&&(!ND_EXT[0]))	
003232  f8df932c          LDR      r9,|L1.13664|
003236  49cb              LDR      r1,|L1.13668|
003238  f8dfa32c          LDR      r10,|L1.13672|
00323c  f9b90000          LDRSH    r0,[r9,#0]  ; t_ext
003240  f9b11000          LDRSH    r1,[r1,#0]  ; TBATSIGN
003244  4288              CMP      r0,r1
003246  dd02              BLE      |L1.12878|
003248  f89a0000          LDRB     r0,[r10,#0]  ; ND_EXT
00324c  b3e8              CBZ      r0,|L1.13002|
                  |L1.12878|
;;;5720   	{
;;;5721   	bat[in]._sign_temper_cnt++;
;;;5722   	}
;;;5723   else 
;;;5724   	{
;;;5725   	bat[in]._sign_temper_cnt--;
00324e  f8b40040          LDRH     r0,[r4,#0x40]
003252  f1a00001          SUB      r0,r0,#1
003256  f8a40040          STRH     r0,[r4,#0x40]
                  |L1.12890|
;;;5726   	}
;;;5727   #else
;;;5728   if((bat[in]._Tb>TBATSIGN)&&(!bat[in]._nd))	
;;;5729   	{
;;;5730   	bat[in]._sign_temper_cnt++;
;;;5731   	}
;;;5732   else 
;;;5733   	{
;;;5734   	bat[in]._sign_temper_cnt--;
;;;5735   	}
;;;5736   #endif
;;;5737   gran(&bat[in]._sign_temper_cnt,0,600);
00325a  f1040040          ADD      r0,r4,#0x40
00325e  f44f7216          MOV      r2,#0x258
003262  2100              MOVS     r1,#0
003264  f7fffffe          BL       gran
;;;5738   if(bat[in]._sign_temper_cnt>=590)	bat[in]._temper_stat|=(1<<0);
003268  f9b40040          LDRSH    r0,[r4,#0x40]
00326c  f240264e          MOV      r6,#0x24e
003270  42b0              CMP      r0,r6
003272  db05              BLT      |L1.12928|
003274  f894103f          LDRB     r1,[r4,#0x3f]
003278  f0410101          ORR      r1,r1,#1
00327c  f884103f          STRB     r1,[r4,#0x3f]
                  |L1.12928|
;;;5739   if(bat[in]._sign_temper_cnt<=10)	bat[in]._temper_stat&=~(1<<0);
003280  280a              CMP      r0,#0xa
003282  dc05              BGT      |L1.12944|
003284  f894003f          LDRB     r0,[r4,#0x3f]
003288  f0200001          BIC      r0,r0,#1
00328c  f884003f          STRB     r0,[r4,#0x3f]
                  |L1.12944|
;;;5740   
;;;5741   #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;5742   if((t_ext[0]>TBATMAX)&&(!ND_EXT[0]))	
003290  49b6              LDR      r1,|L1.13676|
003292  f9b90000          LDRSH    r0,[r9,#0]  ; t_ext
003296  f9b11000          LDRSH    r1,[r1,#0]  ; TBATMAX
00329a  4288              CMP      r0,r1
00329c  dd02              BLE      |L1.12964|
00329e  f89a0000          LDRB     r0,[r10,#0]  ; ND_EXT
0032a2  b3b0              CBZ      r0,|L1.13074|
                  |L1.12964|
;;;5743   	{
;;;5744   	bat[in]._max_temper_cnt++;
;;;5745   	}
;;;5746   else 
;;;5747   	{
;;;5748   	bat[in]._max_temper_cnt--;
0032a4  f8b40042          LDRH     r0,[r4,#0x42]
0032a8  f1a00001          SUB      r0,r0,#1
0032ac  f8a40042          STRH     r0,[r4,#0x42]
                  |L1.12976|
;;;5749   	}
;;;5750   #else
;;;5751   if((bat[in]._Tb>TBATMAX)&&(!bat[in]._nd))	
;;;5752   	{
;;;5753   	bat[in]._max_temper_cnt++;
;;;5754   	}
;;;5755   else 
;;;5756   	{
;;;5757   	bat[in]._max_temper_cnt--;
;;;5758   	}
;;;5759   #endif
;;;5760   
;;;5761   gran(&bat[in]._max_temper_cnt,0,600);
0032b0  f44f7916          MOV      r9,#0x258
0032b4  f1040042          ADD      r0,r4,#0x42
0032b8  464a              MOV      r2,r9
0032ba  2100              MOVS     r1,#0
0032bc  f7fffffe          BL       gran
;;;5762   if(bat[in]._max_temper_cnt>=590)	bat[in]._temper_stat|=(1<<1);
0032c0  f9b40042          LDRSH    r0,[r4,#0x42]
0032c4  42b0              CMP      r0,r6
0032c6  db07              BLT      |L1.13016|
0032c8  e000              B        |L1.13004|
                  |L1.13002|
0032ca  e023              B        |L1.13076|
                  |L1.13004|
0032cc  f894103f          LDRB     r1,[r4,#0x3f]
0032d0  f0410102          ORR      r1,r1,#2
0032d4  f884103f          STRB     r1,[r4,#0x3f]
                  |L1.13016|
;;;5763   if(bat[in]._max_temper_cnt<=10)	bat[in]._temper_stat&=~(1<<1);
0032d8  280a              CMP      r0,#0xa
0032da  dc05              BGT      |L1.13032|
0032dc  f894003f          LDRB     r0,[r4,#0x3f]
0032e0  f0200002          BIC      r0,r0,#2
0032e4  f884003f          STRB     r0,[r4,#0x3f]
                  |L1.13032|
;;;5764   
;;;5765   
;;;5766   
;;;5767   //  
;;;5768   if(bat[in]._resurs_cnt<36000)
0032e8  6c60              LDR      r0,[r4,#0x44]
0032ea  4540              CMP      r0,r8
0032ec  da20              BGE      |L1.13104|
;;;5769   	{               
;;;5770   	bat[in]._resurs_cnt++;
0032ee  f1000001          ADD      r0,r0,#1
0032f2  6460              STR      r0,[r4,#0x44]
;;;5771   	if(bat[in]._resurs_cnt>=36000)
0032f4  4540              CMP      r0,r8
0032f6  db1c              BLT      |L1.13106|
;;;5772   		{
;;;5773   		bat[in]._resurs_cnt=0;
0032f8  6467              STR      r7,[r4,#0x44]
;;;5774   		lc640_write_int(ADR_EE_BAT_RESURS[in],lc640_read_int(ADR_EE_BAT_RESURS[in])+1);
0032fa  4e9d              LDR      r6,|L1.13680|
0032fc  f8360015          LDRH     r0,[r6,r5,LSL #1]
003300  f7fffffe          BL       lc640_read_int
003304  1c40              ADDS     r0,r0,#1
003306  b201              SXTH     r1,r0
003308  f9360015          LDRSH    r0,[r6,r5,LSL #1]
00330c  f7fffffe          BL       lc640_write_int
003310  e00f              B        |L1.13106|
                  |L1.13074|
003312  e006              B        |L1.13090|
                  |L1.13076|
003314  f8b40040          LDRH     r0,[r4,#0x40]         ;5721
003318  f1000001          ADD      r0,r0,#1              ;5721
00331c  f8a40040          STRH     r0,[r4,#0x40]         ;5721
003320  e79b              B        |L1.12890|
                  |L1.13090|
003322  f8b40042          LDRH     r0,[r4,#0x42]         ;5744
003326  f1000001          ADD      r0,r0,#1              ;5744
00332a  f8a40042          STRH     r0,[r4,#0x42]         ;5744
00332e  e7bf              B        |L1.12976|
                  |L1.13104|
;;;5775   		}
;;;5776   	}
;;;5777   else bat[in]._resurs_cnt=0;
003330  6467              STR      r7,[r4,#0x44]
                  |L1.13106|
;;;5778   
;;;5779   
;;;5780   #ifndef UKU_220_V2
;;;5781   #ifndef UKU_GLONASS
;;;5782   #ifndef UKU_6U
;;;5783   //#ifndef UKU_220
;;;5784   if(UBM_AV)
003332  4e90              LDR      r6,|L1.13684|
003334  8830              LDRH     r0,[r6,#0]  ; UBM_AV
003336  2800              CMP      r0,#0
003338  d05e              BEQ      |L1.13304|
;;;5785        {
;;;5786        signed short temp_SS;
;;;5787   #ifdef UKU_220
;;;5788   temp_SS=bat[in]._Ub/2;
;;;5789   #else
;;;5790        if(U0B<600)
00333a  488f              LDR      r0,|L1.13688|
00333c  f9b00000          LDRSH    r0,[r0,#0]  ; U0B
003340  4548              CMP      r0,r9
003342  da08              BGE      |L1.13142|
;;;5791             {
;;;5792             temp_SS=bat[in]._Ub/4;
003344  f9b40002          LDRSH    r0,[r4,#2]
003348  ea4f71e0          ASR      r1,r0,#31
00334c  eb007091          ADD      r0,r0,r1,LSR #30
003350  ea4f00a0          ASR      r0,r0,#2
003354  e006              B        |L1.13156|
                  |L1.13142|
;;;5793             }
;;;5794        else temp_SS=bat[in]._Ub/5;
003356  f9b40002          LDRSH    r0,[r4,#2]
00335a  f04f0105          MOV      r1,#5
00335e  fb90f0f1          SDIV     r0,r0,r1
003362  b200              SXTH     r0,r0
                  |L1.13156|
;;;5795   	
;;;5796   	temp_SS+=temp_SS;     
003364  ea4f0040          LSL      r0,r0,#1
;;;5797   #endif
;;;5798        temp_SS-=(bat[in]._Ubm);
003368  88a1              LDRH     r1,[r4,#4]
00336a  eba00001          SUB      r0,r0,r1
00336e  b200              SXTH     r0,r0
;;;5799   
;;;5800        temp_SS=abs(temp_SS);
003370  f7fffffe          BL       abs
;;;5801   
;;;5802        temp_SS*=10;
003374  eb000080          ADD      r0,r0,r0,LSL #2
003378  ea4f0040          LSL      r0,r0,#1
00337c  b200              SXTH     r0,r0
;;;5803   
;;;5804        temp_SS/=12;
00337e  f04f010c          MOV      r1,#0xc
003382  fb90f0f1          SDIV     r0,r0,r1
003386  b200              SXTH     r0,r0
;;;5805   
;;;5806        bat[in]._dUbm=temp_SS;
003388  80e0              STRH     r0,[r4,#6]
;;;5807   
;;;5808   
;;;5809        if(	(bat[in]._dUbm>UBM_AV) &&
00338a  f9b61000          LDRSH    r1,[r6,#0]  ; UBM_AV
00338e  4288              CMP      r0,r1
003390  dd34              BLE      |L1.13308|
;;;5810   		(abs(bat[in]._Ib)<(5*IKB)) &&
003392  f9b40008          LDRSH    r0,[r4,#8]
003396  f7fffffe          BL       abs
00339a  4601              MOV      r1,r0
00339c  4877              LDR      r0,|L1.13692|
00339e  f9b00000          LDRSH    r0,[r0,#0]  ; IKB
0033a2  eb000080          ADD      r0,r0,r0,LSL #2
0033a6  4281              CMP      r1,r0
0033a8  da28              BGE      |L1.13308|
;;;5811   		(bat[in]._Ub>((short)(((long)USIGN*115)/100))) &&
0033aa  4875              LDR      r0,|L1.13696|
0033ac  2173              MOVS     r1,#0x73
0033ae  f9b00000          LDRSH    r0,[r0,#0]  ; USIGN
0033b2  4348              MULS     r0,r1,r0
0033b4  fb90f0fb          SDIV     r0,r0,r11
0033b8  f9b41002          LDRSH    r1,[r4,#2]
0033bc  b200              SXTH     r0,r0
0033be  4288              CMP      r0,r1
0033c0  da1c              BGE      |L1.13308|
;;;5812   		(!(bat[in]._av & 2))  )
0033c2  f894003d          LDRB     r0,[r4,#0x3d]
0033c6  0780              LSLS     r0,r0,#30
0033c8  d418              BMI      |L1.13308|
;;;5813   		{
;;;5814   		bat[in]._cnt_as++;
0033ca  f8b40048          LDRH     r0,[r4,#0x48]
0033ce  f1000001          ADD      r0,r0,#1
0033d2  b200              SXTH     r0,r0
0033d4  f8a40048          STRH     r0,[r4,#0x48]
;;;5815   		if(bat[in]._cnt_as==3000)
0033d8  f5a06130          SUB      r1,r0,#0xb00
0033dc  39b8              SUBS     r1,r1,#0xb8
0033de  d103              BNE      |L1.13288|
;;;5816   			{
;;;5817   			avar_bat_as_hndl(in,1);
0033e0  2101              MOVS     r1,#1
0033e2  4628              MOV      r0,r5
0033e4  f7fffffe          BL       avar_bat_as_hndl
                  |L1.13288|
;;;5818   			}
;;;5819   		if(bat[in]._cnt_as>=3005) bat[in]._cnt_as=3005;
0033e8  f9b41048          LDRSH    r1,[r4,#0x48]
0033ec  f64030bd          MOV      r0,#0xbbd
0033f0  4281              CMP      r1,r0
0033f2  db01              BLT      |L1.13304|
0033f4  f8a40048          STRH     r0,[r4,#0x48]
                  |L1.13304|
;;;5820   		}
;;;5821   	else 
;;;5822   		{
;;;5823   		bat[in]._cnt_as=0;
;;;5824   		}
;;;5825        
;;;5826        }
;;;5827   #endif 
;;;5828   #endif 
;;;5829   #endif
;;;5830   
;;;5831   }
0033f8  e8bd8ffe          POP      {r1-r11,pc}
                  |L1.13308|
0033fc  f8a47048          STRH     r7,[r4,#0x48]         ;5823
003400  e7fa              B        |L1.13304|
;;;5832   
                          ENDP

                  u_necc_hndl PROC
;;;5836   //-----------------------------------------------
;;;5837   void u_necc_hndl(void)
003402  b538              PUSH     {r3-r5,lr}
;;;5838   {
;;;5839   signed long temp_L;
;;;5840   signed long temp_SL;
;;;5841   //signed short temp_SS;
;;;5842   
;;;5843   //char i;
;;;5844   
;;;5845   //temp_SS=0;
;;;5846   signed short t[2];
;;;5847   #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;5848   
;;;5849   if(!TERMOKOMPENS)
003404  485f              LDR      r0,|L1.13700|
;;;5850   	{
;;;5851   	//u_necc=U0B;
;;;5852   	u_necc=UB20;
003406  4c62              LDR      r4,|L1.13712|
003408  8801              LDRH     r1,[r0,#0]            ;5849  ; TERMOKOMPENS
00340a  485f              LDR      r0,|L1.13704|
00340c  f9b03000          LDRSH    r3,[r0,#0]
;;;5853   	}
;;;5854   else
;;;5855   	{
;;;5856   	if(ND_EXT[0])t[0]=20;
;;;5857   	else t[0]=t_ext[0];
;;;5858   
;;;5859   	mat_temper=t[0];
;;;5860   			
;;;5861   	if(mat_temper<0)temp_SL=UB0; 
;;;5862   	else 
;;;5863   		{
;;;5864   		if(mat_temper>40)mat_temper=40; 
;;;5865   		temp_SL=(UB20-UB0)*10;
;;;5866   		temp_SL*=mat_temper;
;;;5867   		temp_SL/=200;
;;;5868   		temp_SL+=UB0;
;;;5869   		}
;;;5870   	if(spc_stat==spcVZ)
;;;5871   		{
;;;5872   		temp_SL=UVZ;
003410  485e              LDR      r0,|L1.13708|
003412  f9b02000          LDRSH    r2,[r0,#0]
003416  b139              CBZ      r1,|L1.13352|
003418  4853              LDR      r0,|L1.13672|
00341a  7800              LDRB     r0,[r0,#0]            ;5856  ; ND_EXT
00341c  b130              CBZ      r0,|L1.13356|
00341e  f04f0014          MOV      r0,#0x14              ;5856
003422  f8ad0000          STRH     r0,[sp,#0]            ;5856
003426  e005              B        |L1.13364|
                  |L1.13352|
003428  8023              STRH     r3,[r4,#0]            ;5852
00342a  e025              B        |L1.13432|
                  |L1.13356|
00342c  484c              LDR      r0,|L1.13664|
00342e  8800              LDRH     r0,[r0,#0]            ;5857  ; t_ext
003430  f8ad0000          STRH     r0,[sp,#0]            ;5857
                  |L1.13364|
003434  4d57              LDR      r5,|L1.13716|
003436  f9bd1000          LDRSH    r1,[sp,#0]            ;5859
00343a  6029              STR      r1,[r5,#0]            ;5859  ; mat_temper
00343c  4856              LDR      r0,|L1.13720|
00343e  2900              CMP      r1,#0                 ;5861
003440  f9b00000          LDRSH    r0,[r0,#0]            ;5861
003444  db12              BLT      |L1.13420|
003446  2928              CMP      r1,#0x28              ;5864
003448  dd02              BLE      |L1.13392|
00344a  f04f0128          MOV      r1,#0x28              ;5864
00344e  6029              STR      r1,[r5,#0]            ;5864  ; mat_temper
                  |L1.13392|
003450  eba30100          SUB      r1,r3,r0              ;5865
003454  eb010181          ADD      r1,r1,r1,LSL #2       ;5865
003458  ea4f0141          LSL      r1,r1,#1              ;5865
00345c  682b              LDR      r3,[r5,#0]            ;5866  ; mat_temper
00345e  fb01f103          MUL      r1,r1,r3              ;5866
003462  f04f03c8          MOV      r3,#0xc8              ;5867
003466  fb91f1f3          SDIV     r1,r1,r3              ;5867
00346a  4408              ADD      r0,r0,r1              ;5868
                  |L1.13420|
00346c  494b              LDR      r1,|L1.13724|
00346e  7d09              LDRB     r1,[r1,#0x14]         ;5870  ; spc_stat
003470  2902              CMP      r1,#2                 ;5870
003472  d100              BNE      |L1.13430|
003474  4610              MOV      r0,r2
                  |L1.13430|
;;;5873   		}
;;;5874   	u_necc=(unsigned int)temp_SL;
003476  8020              STRH     r0,[r4,#0]
                  |L1.13432|
;;;5875   	///u_necc=3456;
;;;5876   	}  
;;;5877   
;;;5878   //u_necc=2355;
;;;5879   
;;;5880   if((speedChIsOn)||(sp_ch_stat==scsWRK))
003478  4849              LDR      r0,|L1.13728|
00347a  8800              LDRH     r0,[r0,#0]  ; speedChIsOn
00347c  b918              CBNZ     r0,|L1.13446|
00347e  4849              LDR      r0,|L1.13732|
003480  7800              LDRB     r0,[r0,#0]  ; sp_ch_stat
003482  2802              CMP      r0,#2
003484  d102              BNE      |L1.13452|
                  |L1.13446|
;;;5881   	{
;;;5882   	u_necc=speedChrgVolt;
003486  4848              LDR      r0,|L1.13736|
003488  8800              LDRH     r0,[r0,#0]  ; speedChrgVolt
00348a  8020              STRH     r0,[r4,#0]
                  |L1.13452|
;;;5883   	}
;;;5884   if(hv_vz_stat==hvsWRK)
00348c  4847              LDR      r0,|L1.13740|
00348e  7800              LDRB     r0,[r0,#0]  ; hv_vz_stat
003490  2805              CMP      r0,#5
003492  d100              BNE      |L1.13462|
;;;5885   	{
;;;5886   	u_necc=UVZ;
003494  8022              STRH     r2,[r4,#0]
                  |L1.13462|
;;;5887   	}
;;;5888   if(mess_find_unvol(MESS2UNECC_HNDL))
003496  20be              MOVS     r0,#0xbe
003498  f7fffffe          BL       mess_find_unvol
00349c  b128              CBZ      r0,|L1.13482|
;;;5889   	{		
;;;5890   	if(mess_data[0]==PARAM_UNECC_SET)
00349e  4844              LDR      r0,|L1.13744|
0034a0  6801              LDR      r1,[r0,#0]  ; mess_data
0034a2  29bf              CMP      r1,#0xbf
0034a4  d101              BNE      |L1.13482|
;;;5891   		{
;;;5892   		u_necc=mess_data[1];
0034a6  6840              LDR      r0,[r0,#4]  ; mess_data
0034a8  8020              STRH     r0,[r4,#0]
                  |L1.13482|
;;;5893   		}		
;;;5894   	}
;;;5895   //if(ICA_EN)u_necc+=ica_u_necc;
;;;5896   #endif
;;;5897   
;;;5898   
;;;5899   #ifndef UKU_220_IPS_TERMOKOMPENSAT
;;;5900   
;;;5901   #ifndef UKU_TELECORE2015
;;;5902   #ifndef UKU_TELECORE2017
;;;5903   if(unh_cnt0<10)
;;;5904   	{
;;;5905   	unh_cnt0++;
;;;5906   	if(unh_cnt0>=10)
;;;5907   		{
;;;5908   		unh_cnt0=0;
;;;5909   		b1Hz_unh=1;
;;;5910   		}
;;;5911   	}
;;;5912   
;;;5913   if(unh_cnt1<5)
;;;5914   	{
;;;5915   	unh_cnt1++;
;;;5916   	if(unh_cnt1==5)
;;;5917   		{
;;;5918   		unh_cnt1=0;
;;;5919   //		b2Hz_unh=1;
;;;5920   		}
;;;5921   	} 
;;;5922   
;;;5923   
;;;5924   
;;;5925   if(mess_find_unvol(MESS2UNECC_HNDL))
;;;5926   	{		
;;;5927   	if(mess_data[0]==PARAM_UNECC_SET)
;;;5928   		{
;;;5929   		u_necc=mess_data[1];
;;;5930   		}		
;;;5931   	}
;;;5932   
;;;5933   
;;;5934   else if(b1Hz_unh)
;;;5935   	{
;;;5936   	
;;;5937   	if((BAT_IS_ON[0]!=bisON) && (BAT_IS_ON[1]!=bisON))
;;;5938   		{
;;;5939   		
;;;5940   		u_necc=U0B;
;;;5941   		}
;;;5942   	else 
;;;5943   		{
;;;5944   		if(BAT_TYPE==0) //  
;;;5945   			{
;;;5946   			for(i=0;i<2;i++)
;;;5947   				{
;;;5948   				if(BAT_IS_ON[i]==bisON)
;;;5949   					{
;;;5950   					if(bat[i]._nd)t[i]=20;
;;;5951   					else t[i]=bat[i]._Tb;
;;;5952   					}
;;;5953   				else
;;;5954   					{
;;;5955   					t[i]=-20;
;;;5956   					}
;;;5957   				}
;;;5958   			if(t[0]>t[1])mat_temper=t[0];
;;;5959   			else mat_temper=t[1];
;;;5960   			
;;;5961   		
;;;5962   			if(mat_temper<0)temp_SL=UB0; 
;;;5963   			else 
;;;5964   				{
;;;5965   				if(mat_temper>40)mat_temper=40; 
;;;5966   				temp_SL=(UB20-UB0)*10;
;;;5967   				temp_SL*=mat_temper;
;;;5968   				temp_SL/=200;
;;;5969   				temp_SL+=UB0;
;;;5970   				}
;;;5971   			if(spc_stat==spcVZ)
;;;5972   				{
;;;5973   				temp_SL=UVZ;
;;;5974   				}
;;;5975   			u_necc=(unsigned int)temp_SL;
;;;5976   			}
;;;5977   		else if(BAT_TYPE==1) //  
;;;5978   			{
;;;5979   			u_necc=U0B;
;;;5980   					
;;;5981   			u_necc=bat[0]._Ub+10;
;;;5982   
;;;5983   			
;;;5984   			if(spc_stat==spcVZ)
;;;5985   				{
;;;5986   				u_necc=UVZ;
;;;5987   				}
;;;5988   			if(u_necc>=UB0) u_necc=UB0;
;;;5989   			if(u_necc>=UB20) u_necc=UB20;
;;;5990   			}
;;;5991   		}  
;;;5992   	}
;;;5993   #endif
;;;5994   #endif
;;;5995   
;;;5996   #ifdef UKU_TELECORE2015
;;;5997   
;;;5998   if(unh_cnt0<10)
;;;5999   	{
;;;6000   	unh_cnt0++;
;;;6001   	if(unh_cnt0>=10)
;;;6002   		{
;;;6003   		unh_cnt0=0;
;;;6004   		b1Hz_unh=1;
;;;6005   		}
;;;6006   	}
;;;6007   
;;;6008   if(unh_cnt1<5)
;;;6009   	{
;;;6010   	unh_cnt1++;
;;;6011   	if(unh_cnt1==5)
;;;6012   		{
;;;6013   		unh_cnt1=0;
;;;6014   //		b2Hz_unh=1;
;;;6015   		}
;;;6016   	} 
;;;6017   
;;;6018   
;;;6019   
;;;6020   if(mess_find_unvol(MESS2UNECC_HNDL))
;;;6021   	{		
;;;6022   	if(mess_data[0]==PARAM_UNECC_SET)
;;;6023   		{
;;;6024   		u_necc=mess_data[1];
;;;6025   		}		
;;;6026   	}
;;;6027   
;;;6028   
;;;6029   else if(b1Hz_unh)
;;;6030   	{
;;;6031   	b1Hz_unh=0;
;;;6032   
;;;6033   	if(BAT_TYPE==0)
;;;6034   		{
;;;6035   		if(bat[0]._nd)mat_temper=20;
;;;6036   		else mat_temper=bat[0]._Tb;
;;;6037   
;;;6038   			
;;;6039   		if(mat_temper<0)temp_SL=UB0; 
;;;6040   		else 
;;;6041   			{
;;;6042   			if(mat_temper>40)mat_temper=40; 
;;;6043   			temp_SL=(UB20-UB0)*10;
;;;6044   			temp_SL*=mat_temper;
;;;6045   			temp_SL/=200;
;;;6046   			temp_SL+=UB0;
;;;6047   			}
;;;6048   		if(spc_stat==spcVZ)
;;;6049   			{
;;;6050   			temp_SL=UVZ;
;;;6051   			}
;;;6052   		u_necc=(unsigned int)temp_SL;
;;;6053   	///u_necc=3456;
;;;6054   		}
;;;6055   	else if(BAT_TYPE==1)
;;;6056   		{
;;;6057   		
;;;6058   		gran(&DU_LI_BAT,1,30);
;;;6059   		u_necc=li_bat._Ub+DU_LI_BAT;
;;;6060   		gran(&u_necc,0,UB0);
;;;6061   		gran(&u_necc,0,UB20);
;;;6062   		gran(&u_necc,0,540);		
;;;6063   
;;;6064   
;;;6065   		if(li_bat._batStat!=bsOK)
;;;6066   			{
;;;6067   			u_necc=U0B;
;;;6068   			}
;;;6069   		if(spc_stat==spcVZ)
;;;6070   			{
;;;6071   			u_necc=UVZ;
;;;6072   			}
;;;6073   		/* 
;;;6074   		u_necc=U0B;
;;;6075   		
;;;6076   
;;;6077   	
;;;6078   		u_necc=UB0;
;;;6079   		u_necc=li_bat._Ub+10;
;;;6080   		if((li_bat._Ub<450)||(li_bat._Ub>550))
;;;6081   			{
;;;6082   			lakb_error_cnt++;
;;;6083   			if(lakb_error_cnt>=30)
;;;6084   				{
;;;6085   				lakb_error_cnt=30;
;;;6086   				u_necc=U0B;
;;;6087   				}
;;;6088   			}
;;;6089   		else lakb_error_cnt=0;*/
;;;6090   		}
;;;6091   	else if(BAT_TYPE==2)
;;;6092   		{
;;;6093   		u_necc=U0B;
;;;6094   		
;;;6095   		if(spc_stat==spcVZ)
;;;6096   			{
;;;6097   			u_necc=UVZ;
;;;6098   			}
;;;6099   	
;;;6100   		u_necc=UB0;
;;;6101   		}
;;;6102   
;;;6103   	else if(BAT_TYPE==3)
;;;6104   		{
;;;6105   		u_necc=U0B;
;;;6106   		
;;;6107   		if(spc_stat==spcVZ)
;;;6108   			{
;;;6109   			u_necc=UVZ;
;;;6110   			}
;;;6111   
;;;6112   		gran(&DU_LI_BAT,1,30);
;;;6113   
;;;6114   
;;;6115   		if(lakbNotErrorNum==0)
;;;6116   			{
;;;6117   			u_necc=U0B;
;;;6118   			}
;;;6119   		else 
;;;6120   			{
;;;6121   			signed short i;
;;;6122   			//signed short u_necc_max;
;;;6123   			//u_necc_max=0;
;;;6124   			char soc_flag=0;
;;;6125   
;;;6126   			for(i=(NUMBAT_TELECORE-1);i>=0;i--)
;;;6127   				{
;;;6128   				if(lakb[i]._communicationFullErrorStat==0)u_necc=lakb[i]._tot_bat_volt+DU_LI_BAT;
;;;6129   				if(lakb[i]._s_o_c_percent<QSODERG_LI_BAT)soc_flag=1;
;;;6130   				}
;;;6131   
;;;6132   			if(soc_flag==0)u_necc=USODERG_LI_BAT;
;;;6133   			}
;;;6134   		gran(&u_necc,0,UB0);
;;;6135   		//gran(&u_necc,0,UB20);
;;;6136   		gran(&u_necc,0,540);
;;;6137   		}
;;;6138   	}
;;;6139   
;;;6140   #endif 
;;;6141   
;;;6142   #ifdef UKU_TELECORE2017
;;;6143   
;;;6144   if(unh_cnt0<10)
;;;6145   	{
;;;6146   	unh_cnt0++;
;;;6147   	if(unh_cnt0>=10)
;;;6148   		{
;;;6149   		unh_cnt0=0;
;;;6150   		b1Hz_unh=1;
;;;6151   		}
;;;6152   	}
;;;6153   
;;;6154   if(unh_cnt1<5)
;;;6155   	{
;;;6156   	unh_cnt1++;
;;;6157   	if(unh_cnt1==5)
;;;6158   		{
;;;6159   		unh_cnt1=0;
;;;6160   //		b2Hz_unh=1;
;;;6161   		}
;;;6162   	} 
;;;6163   
;;;6164   
;;;6165   
;;;6166   if(mess_find_unvol(MESS2UNECC_HNDL))
;;;6167   	{		
;;;6168   	if(mess_data[0]==PARAM_UNECC_SET)
;;;6169   		{
;;;6170   		u_necc=mess_data[1];
;;;6171   		}		
;;;6172   	}
;;;6173   
;;;6174   
;;;6175   else if(b1Hz_unh)
;;;6176   	{
;;;6177   	b1Hz_unh=0;
;;;6178   
;;;6179   	if(BAT_TYPE==0)
;;;6180   		{
;;;6181   		if(bat[0]._nd)mat_temper=20;
;;;6182   		else mat_temper=bat[0]._Tb;
;;;6183   
;;;6184   			
;;;6185   		if(mat_temper<0)temp_SL=UB0; 
;;;6186   		else 
;;;6187   			{
;;;6188   			if(mat_temper>40)mat_temper=40; 
;;;6189   			temp_SL=(UB20-UB0)*10;
;;;6190   			temp_SL*=mat_temper;
;;;6191   			temp_SL/=200;
;;;6192   			temp_SL+=UB0;
;;;6193   			}
;;;6194   		if(spc_stat==spcVZ)
;;;6195   			{
;;;6196   			temp_SL=UVZ;
;;;6197   			}
;;;6198   		u_necc=(unsigned int)temp_SL;
;;;6199   	///u_necc=3456;
;;;6200   		}
;;;6201   	else if(BAT_TYPE==1)
;;;6202   		{
;;;6203   		
;;;6204   		gran(&DU_LI_BAT,1,30);
;;;6205   		u_necc=li_bat._Ub+DU_LI_BAT;
;;;6206   		gran(&u_necc,0,UB0);
;;;6207   		gran(&u_necc,0,UB20);
;;;6208   		gran(&u_necc,0,540);		
;;;6209   
;;;6210   
;;;6211   		if(li_bat._batStat!=bsOK)
;;;6212   			{
;;;6213   			u_necc=U0B;
;;;6214   			}
;;;6215   		if(spc_stat==spcVZ)
;;;6216   			{
;;;6217   			u_necc=UVZ;
;;;6218   			}
;;;6219   		}
;;;6220   	else if(BAT_TYPE==2)
;;;6221   		{
;;;6222   		u_necc=U0B;
;;;6223   		
;;;6224   		if(spc_stat==spcVZ)
;;;6225   			{
;;;6226   			u_necc=UVZ;
;;;6227   			}
;;;6228   	
;;;6229   		u_necc=UB0;
;;;6230   		}
;;;6231   
;;;6232   	else if(BAT_TYPE==3)
;;;6233   		{
;;;6234   		u_necc=U0B;
;;;6235   		
;;;6236   		if(spc_stat==spcVZ)
;;;6237   			{
;;;6238   			u_necc=UVZ;
;;;6239   			}
;;;6240   
;;;6241   		gran(&DU_LI_BAT,1,30);
;;;6242   
;;;6243   
;;;6244   		if(lakbNotErrorNum==0)
;;;6245   			{
;;;6246   			u_necc=U0B;
;;;6247   			}
;;;6248   		else 
;;;6249   			{
;;;6250   			signed short i;
;;;6251   			//signed short u_necc_max;
;;;6252   			//u_necc_max=0;
;;;6253   			char soc_flag=0;
;;;6254   
;;;6255   			for(i=(NUMBAT_TELECORE-1);i>=0;i--)
;;;6256   				{
;;;6257   				if(lakb[i]._communicationFullErrorStat==0)u_necc=lakb[i]._tot_bat_volt+DU_LI_BAT;
;;;6258   				if(lakb[i]._s_o_c_percent<QSODERG_LI_BAT)soc_flag=1;
;;;6259   				}
;;;6260   
;;;6261   			if(soc_flag==0)u_necc=USODERG_LI_BAT;
;;;6262   			}
;;;6263   		gran(&u_necc,0,UB0);
;;;6264   		//gran(&u_necc,0,UB20);
;;;6265   		gran(&u_necc,0,540);
;;;6266   		}
;;;6267   	}
;;;6268   
;;;6269   #endif 
;;;6270   //u_necc=2356;
;;;6271   #endif//gran(&u_necc,400,UMAX);
;;;6272   
;;;6273   temp_L=(signed long) u_necc;
0034aa  f9b40000          LDRSH    r0,[r4,#0]  ; u_necc
;;;6274   temp_L*=98L;
0034ae  f04f0162          MOV      r1,#0x62
0034b2  fb00f101          MUL      r1,r0,r1
;;;6275   temp_L/=100L;
0034b6  f04f0264          MOV      r2,#0x64
0034ba  fb91f1f2          SDIV     r1,r1,r2
;;;6276   u_necc_dn=(signed short)temp_L;
0034be  4b3d              LDR      r3,|L1.13748|
0034c0  8019              STRH     r1,[r3,#0]
;;;6277   
;;;6278   temp_L=(signed long) u_necc;
;;;6279   temp_L*=102L;
0034c2  f04f0166          MOV      r1,#0x66
0034c6  fb00f001          MUL      r0,r0,r1
;;;6280   temp_L/=100L;
0034ca  fb90f0f2          SDIV     r0,r0,r2
;;;6281   u_necc_up=(signed short)temp_L;
0034ce  493a              LDR      r1,|L1.13752|
0034d0  8008              STRH     r0,[r1,#0]
;;;6282   
;;;6283   
;;;6284   }
0034d2  bd38              POP      {r3-r5,pc}
;;;6285   
                          ENDP

                  num_necc_hndl PROC
;;;6287   //-----------------------------------------------
;;;6288   void num_necc_hndl(void)
0034d4  e92d41f0          PUSH     {r4-r8,lr}
;;;6289   {
;;;6290   
;;;6291   static short num_necc_block_cnt;
;;;6292   if(num_necc_block_cnt) num_necc_block_cnt--;
0034d8  4c30              LDR      r4,|L1.13724|
0034da  f9b40026          LDRSH    r0,[r4,#0x26]  ; num_necc_block_cnt
0034de  b110              CBZ      r0,|L1.13542|
0034e0  f1a00001          SUB      r0,r0,#1
0034e4  84e0              STRH     r0,[r4,#0x26]
                  |L1.13542|
;;;6293   
;;;6294   Isumm_=Isumm;
0034e6  4835              LDR      r0,|L1.13756|
0034e8  4d35              LDR      r5,|L1.13760|
0034ea  8800              LDRH     r0,[r0,#0]  ; Isumm
0034ec  8028              STRH     r0,[r5,#0]
;;;6295   
;;;6296   if(bat[0]._Ib<0) Isumm_+=(abs(bat[0]._Ib))/10;
0034ee  4e35              LDR      r6,|L1.13764|
0034f0  270a              MOVS     r7,#0xa
0034f2  f9b60008          LDRSH    r0,[r6,#8]  ; bat
0034f6  2800              CMP      r0,#0
0034f8  da06              BGE      |L1.13576|
0034fa  f7fffffe          BL       abs
0034fe  fb90f0f7          SDIV     r0,r0,r7
003502  8829              LDRH     r1,[r5,#0]  ; Isumm_
003504  4408              ADD      r0,r0,r1
003506  8028              STRH     r0,[r5,#0]
                  |L1.13576|
;;;6297   if(bat[1]._Ib<0) Isumm_+=(abs(bat[1]._Ib))/10;
003508  f9b60054          LDRSH    r0,[r6,#0x54]  ; bat
00350c  2800              CMP      r0,#0
00350e  da06              BGE      |L1.13598|
003510  f7fffffe          BL       abs
003514  fb90f0f7          SDIV     r0,r0,r7
003518  8829              LDRH     r1,[r5,#0]  ; Isumm_
00351a  4408              ADD      r0,r0,r1
00351c  8028              STRH     r0,[r5,#0]
                  |L1.13598|
;;;6298   
;;;6299   num_necc_up=(Isumm_/((signed short)IMAX))+1;
00351e  482a              LDR      r0,|L1.13768|
003520  f9b51000          LDRSH    r1,[r5,#0]  ; Isumm_
003524  f9b00000          LDRSH    r0,[r0,#0]  ; IMAX
003528  fb91f0f0          SDIV     r0,r1,r0
00352c  f1000001          ADD      r0,r0,#1
003530  b2c0              UXTB     r0,r0
003532  7420              STRB     r0,[r4,#0x10]
;;;6300   ////Isumm_+=(signed short)((IMAX*(10-KIMAX))/10);
;;;6301   ////Isumm_+=(signed short)(IMAX-IMIN);
;;;6302   
;;;6303   num_necc_down=(Isumm_/((signed short)IMIN))+1;
003534  4a25              LDR      r2,|L1.13772|
003536  f9b22000          LDRSH    r2,[r2,#0]  ; IMIN
00353a  fb91f1f2          SDIV     r1,r1,r2
00353e  f1010101          ADD      r1,r1,#1
003542  b2ca              UXTB     r2,r1
003544  7462              STRB     r2,[r4,#0x11]
;;;6304   
;;;6305   if(num_necc_up>num_necc)
003546  4922              LDR      r1,|L1.13776|
003548  f9b13000          LDRSH    r3,[r1,#0]  ; num_necc
;;;6306   	{
;;;6307   	num_necc=num_necc_up;
;;;6308   	num_necc_block_cnt=60;
00354c  e042              B        |L1.13780|
00354e  0000              DCW      0x0000
                  |L1.13648|
                          DCD      0xffff7360
                  |L1.13652|
                          DCD      BAT_C_NOM
                  |L1.13656|
                          DCD      BAT_TYPE
                  |L1.13660|
                          DCD      lakb
                  |L1.13664|
                          DCD      t_ext
                  |L1.13668|
                          DCD      TBATSIGN
                  |L1.13672|
                          DCD      ND_EXT
                  |L1.13676|
                          DCD      TBATMAX
                  |L1.13680|
                          DCD      ADR_EE_BAT_RESURS
                  |L1.13684|
                          DCD      UBM_AV
                  |L1.13688|
                          DCD      U0B
                  |L1.13692|
                          DCD      IKB
                  |L1.13696|
                          DCD      USIGN
                  |L1.13700|
                          DCD      TERMOKOMPENS
                  |L1.13704|
                          DCD      UB20
                  |L1.13708|
                          DCD      UVZ
                  |L1.13712|
                          DCD      u_necc
                  |L1.13716|
                          DCD      mat_temper
                  |L1.13720|
                          DCD      UB0
                  |L1.13724|
                          DCD      ||area_number.22||
                  |L1.13728|
                          DCD      speedChIsOn
                  |L1.13732|
                          DCD      sp_ch_stat
                  |L1.13736|
                          DCD      speedChrgVolt
                  |L1.13740|
                          DCD      hv_vz_stat
                  |L1.13744|
                          DCD      mess_data
                  |L1.13748|
                          DCD      u_necc_dn
                  |L1.13752|
                          DCD      u_necc_up
                  |L1.13756|
                          DCD      Isumm
                  |L1.13760|
                          DCD      Isumm_
                  |L1.13764|
                          DCD      bat
                  |L1.13768|
                          DCD      IMAX
                  |L1.13772|
                          DCD      IMIN
                  |L1.13776|
                          DCD      num_necc
                  |L1.13780|
0035d4  f04f053c          MOV      r5,#0x3c
0035d8  4298              CMP      r0,r3                 ;6305
0035da  dd02              BLE      |L1.13794|
0035dc  8008              STRH     r0,[r1,#0]            ;6307
0035de  84e5              STRH     r5,[r4,#0x26]
0035e0  e005              B        |L1.13806|
                  |L1.13794|
;;;6309   	}
;;;6310   else if(num_necc_down<num_necc)
0035e2  429a              CMP      r2,r3
0035e4  da03              BGE      |L1.13806|
;;;6311   	{
;;;6312   	if(!num_necc_block_cnt)
0035e6  8ce0              LDRH     r0,[r4,#0x26]  ; num_necc_block_cnt
0035e8  b908              CBNZ     r0,|L1.13806|
;;;6313   		{
;;;6314   		num_necc=num_necc_down;
0035ea  800a              STRH     r2,[r1,#0]
;;;6315   		num_necc_block_cnt=60;
0035ec  84e5              STRH     r5,[r4,#0x26]
                  |L1.13806|
;;;6316   		}
;;;6317   	}
;;;6318   
;;;6319   if(PAR) num_necc=NUMIST;
0035ee  48ff              LDR      r0,|L1.14828|
0035f0  8802              LDRH     r2,[r0,#0]  ; PAR
0035f2  48ff              LDR      r0,|L1.14832|
0035f4  b10a              CBZ      r2,|L1.13818|
0035f6  8802              LDRH     r2,[r0,#0]  ; NUMIST
0035f8  800a              STRH     r2,[r1,#0]
                  |L1.13818|
;;;6320   
;;;6321   #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;6322   if(bPARALLEL) num_necc=NUMIST;
0035fa  7fa2              LDRB     r2,[r4,#0x1e]  ; bPARALLEL
0035fc  b10a              CBZ      r2,|L1.13826|
0035fe  8802              LDRH     r2,[r0,#0]  ; NUMIST
003600  800a              STRH     r2,[r1,#0]
                  |L1.13826|
;;;6323   #endif
;;;6324   
;;;6325   gran(&num_necc,1,NUMIST);
003602  f9b02000          LDRSH    r2,[r0,#0]  ; NUMIST
003606  e8bd41f0          POP      {r4-r8,lr}
00360a  2101              MOVS     r1,#1
00360c  48f9              LDR      r0,|L1.14836|
00360e  f7ffbffe          B.W      gran
;;;6326   
;;;6327   }
;;;6328   
                          ENDP

                  cntrl_hndl PROC
;;;6331   //-----------------------------------------------
;;;6332   void cntrl_hndl(void)
003612  e92d5ff0          PUSH     {r4-r12,lr}
;;;6333   {
;;;6334   
;;;6335   IZMAX_=IZMAX;
003616  48f8              LDR      r0,|L1.14840|
003618  4cf8              LDR      r4,|L1.14844|
00361a  f9b01000          LDRSH    r1,[r0,#0]  ; IZMAX
00361e  8761              STRH     r1,[r4,#0x3a]
;;;6336   
;;;6337   //cntrl_hndl_plazma=10;
;;;6338   
;;;6339   if((speedChIsOn)||(sp_ch_stat==scsWRK))IZMAX_=speedChrgCurr;
003620  48f7              LDR      r0,|L1.14848|
003622  8800              LDRH     r0,[r0,#0]  ; speedChIsOn
003624  b918              CBNZ     r0,|L1.13870|
003626  48f7              LDR      r0,|L1.14852|
003628  7800              LDRB     r0,[r0,#0]  ; sp_ch_stat
00362a  2802              CMP      r0,#2
00362c  d102              BNE      |L1.13876|
                  |L1.13870|
00362e  48f6              LDR      r0,|L1.14856|
003630  8800              LDRH     r0,[r0,#0]  ; speedChrgCurr
003632  8760              STRH     r0,[r4,#0x3a]
                  |L1.13876|
;;;6340   
;;;6341   if(cntrl_stat_blok_cnt)cntrl_stat_blok_cnt--;
003634  f9b40062          LDRSH    r0,[r4,#0x62]  ; cntrl_stat_blok_cnt
003638  b118              CBZ      r0,|L1.13890|
00363a  f1a00001          SUB      r0,r0,#1
00363e  f8a40062          STRH     r0,[r4,#0x62]
                  |L1.13890|
;;;6342   if(cntrl_stat_blok_cnt_)cntrl_stat_blok_cnt_--;
003642  f9b40064          LDRSH    r0,[r4,#0x64]  ; cntrl_stat_blok_cnt_
003646  b118              CBZ      r0,|L1.13904|
003648  f1a00001          SUB      r0,r0,#1
00364c  f8a40064          STRH     r0,[r4,#0x64]
                  |L1.13904|
;;;6343   
;;;6344   if((bat[0]._temper_stat&0x03)||(bat[1]._temper_stat&0x03))IZMAX_=IZMAX/10;
003650  48ee              LDR      r0,|L1.14860|
003652  f04f080a          MOV      r8,#0xa
003656  f890203f          LDRB     r2,[r0,#0x3f]  ; bat
00365a  0792              LSLS     r2,r2,#30
00365c  d103              BNE      |L1.13926|
00365e  f890008b          LDRB     r0,[r0,#0x8b]  ; bat
003662  0780              LSLS     r0,r0,#30
003664  d002              BEQ      |L1.13932|
                  |L1.13926|
003666  fb91f0f8          SDIV     r0,r1,r8
00366a  8760              STRH     r0,[r4,#0x3a]
                  |L1.13932|
;;;6345   
;;;6346   
;;;6347   #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;6348   if((REG_SPEED<1)||(REG_SPEED>5)) REG_SPEED=1;
00366c  48e8              LDR      r0,|L1.14864|
00366e  2601              MOVS     r6,#1
003670  f9b01000          LDRSH    r1,[r0,#0]  ; REG_SPEED
003674  1e49              SUBS     r1,r1,#1
003676  2905              CMP      r1,#5
003678  d300              BCC      |L1.13948|
00367a  8006              STRH     r6,[r0,#0]
                  |L1.13948|
;;;6349   if(ch_cnt0<(10*REG_SPEED))
00367c  f9b00000          LDRSH    r0,[r0,#0]  ; REG_SPEED
003680  2500              MOVS     r5,#0                 ;6339
003682  eb000180          ADD      r1,r0,r0,LSL #2
003686  79e0              LDRB     r0,[r4,#7]  ; ch_cnt0
003688  ebb00f41          CMP      r0,r1,LSL #1
00368c  da08              BGE      |L1.13984|
;;;6350   	{
;;;6351   	ch_cnt0++;
00368e  f1000001          ADD      r0,r0,#1
003692  b2c0              UXTB     r0,r0
003694  71e0              STRB     r0,[r4,#7]
;;;6352   	if(ch_cnt0>=10*REG_SPEED)
003696  ebb00f41          CMP      r0,r1,LSL #1
00369a  db01              BLT      |L1.13984|
;;;6353   		{
;;;6354   		ch_cnt0=0;
00369c  71e5              STRB     r5,[r4,#7]
;;;6355   		b1Hz_ch=1;
00369e  7226              STRB     r6,[r4,#8]
                  |L1.13984|
;;;6356   		}
;;;6357   	}
;;;6358   #endif
;;;6359   #ifndef UKU_220_IPS_TERMOKOMPENSAT
;;;6360   if(ch_cnt0<10)
;;;6361   	{
;;;6362   	ch_cnt0++;
;;;6363   	if(ch_cnt0>=10)
;;;6364   		{
;;;6365   		ch_cnt0=0;
;;;6366   		b1Hz_ch=1;
;;;6367   		}
;;;6368   	}
;;;6369   #endif
;;;6370   
;;;6371   
;;;6372   if(mess_find_unvol(MESS2CNTRL_HNDL))
0036a0  20e1              MOVS     r0,#0xe1
0036a2  f7fffffe          BL       mess_find_unvol
;;;6373   	{
;;;6374   	if(mess_data[0]==PARAM_CNTRL_STAT_PLUS)
;;;6375   		{
;;;6376   		cntrl_stat=cntrl_stat_old+mess_data[1];
;;;6377   		}
;;;6378   	else if(mess_data[0]==PARAM_CNTRL_STAT_MINUS)
;;;6379   		{
;;;6380   		cntrl_stat=cntrl_stat_old-mess_data[1];
;;;6381   		}
;;;6382   	else if(mess_data[0]==PARAM_CNTRL_STAT_STEP_DOWN)
;;;6383   		{
;;;6384   		static char cntrlStatIsDownCnt;
;;;6385   		cntrl_stat--;
;;;6386   
;;;6387   		if((cntrl_stat<=30)||(load_U<USIGN))
;;;6388   			{
;;;6389   			if(++cntrlStatIsDownCnt==250)mess_send(MESS2KB_HNDL,PARAM_CNTRL_IS_DOWN,0,10);
;;;6390   			}
;;;6391   		else 
;;;6392   			{
;;;6393   			cntrlStatIsDownCnt=0;
;;;6394   			}
;;;6395   
;;;6396   		}
;;;6397   	else if(mess_data[0]==PARAM_CNTRL_STAT_SET)
;;;6398   		{
;;;6399   		cntrl_stat=mess_data[1];
;;;6400   		}
;;;6401   
;;;6402   	else if(mess_data[0]==PARAM_CNTRL_STAT_FAST_REG)
;;;6403   		{
;;;6404   		#ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;6405   		if(load_U>u_necc)
0036a6  f8df936c          LDR      r9,|L1.14868|
;;;6406   			{
;;;6407   			cntrl_hndl_plazma=11;
;;;6408   			if(((bps_U-u_necc)>40)&&(cntrl_stat>0))cntrl_stat-=5;
0036aa  4adb              LDR      r2,|L1.14872|
;;;6409   			else if((cntrl_stat)&&b1Hz_ch)cntrl_stat--;
;;;6410   			}
;;;6411   		else if(bps_U<u_necc)
;;;6412   			{
;;;6413   			cntrl_hndl_plazma=12;	
;;;6414   			if(((u_necc-bps_U)>40)&&(cntrl_stat<1015))cntrl_stat+=5;
;;;6415   			else	if((cntrl_stat<1020)&&b1Hz_ch)cntrl_stat++;
;;;6416   			}
;;;6417   		#elif defined(UKU_220)
;;;6418   		if(load_U>u_necc)
;;;6419   			{
;;;6420   			cntrl_hndl_plazma=13;
;;;6421   			if(((load_U-u_necc)>40)&&(cntrl_stat>0))cntrl_stat-=5;
;;;6422   			else if((cntrl_stat)&&b1Hz_ch)cntrl_stat--;
;;;6423   			}
;;;6424   		else if(load_U<u_necc)
;;;6425   			{
;;;6426   			cntrl_hndl_plazma=14;	
;;;6427   			if(((u_necc-load_U)>40)&&(cntrl_stat<1015))cntrl_stat+=5;
;;;6428   			else	if((cntrl_stat<1020)&&b1Hz_ch)cntrl_stat++;
;;;6429   			}
;;;6430   		#elif defined(UKU_220_V2)
;;;6431   		if(load_U>u_necc)
;;;6432   			{
;;;6433   			cntrl_hndl_plazma=15;
;;;6434   			if(((load_U-u_necc)>40)&&(cntrl_stat>0))cntrl_stat-=5;
;;;6435   			else if((cntrl_stat)&&b1Hz_ch)cntrl_stat--;
;;;6436   			}
;;;6437   		else if(load_U<u_necc)
;;;6438   			{
;;;6439   			cntrl_hndl_plazma=16;	
;;;6440   			if(((u_necc-load_U)>40)&&(cntrl_stat<1015))cntrl_stat+=5;
;;;6441   			else	if((cntrl_stat<1020)&&b1Hz_ch)cntrl_stat++;
;;;6442   			}
;;;6443   		#else
;;;6444   
;;;6445   		if(load_U>u_necc)
;;;6446   			{
;;;6447   			cntrl_hndl_plazma=17;
;;;6448   			if(((load_U-u_necc)>10)&&(cntrl_stat>0))cntrl_stat-=5;
;;;6449   			else if((cntrl_stat)&&b1Hz_ch)cntrl_stat--;
;;;6450   			}
;;;6451   		else if(load_U<u_necc)
;;;6452   			{
;;;6453   			cntrl_hndl_plazma=18;	
;;;6454   			if(((u_necc-load_U)>10)&&(cntrl_stat<1015))cntrl_stat+=5;
;;;6455   			else	if((cntrl_stat<1020)&&b1Hz_ch)cntrl_stat++;
;;;6456   			}
;;;6457   		#endif	
;;;6458   	 	}
;;;6459   	}
;;;6460   
;;;6461   #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;6462   else if((b1Hz_ch)&&((!bIBAT_SMKLBR)||(bps[8]._cnt>40)))
0036ac  f8dfb36c          LDR      r11,|L1.14876|
;;;6463   	{
;;;6464   	cntrl_stat_new=cntrl_stat_old;
;;;6465   	cntrl_hndl_plazma=19;
;;;6466   	if((Ibmax/10)>(2*IZMAX_))
;;;6467   		{
;;;6468   		cntrl_hndl_plazma=20;
;;;6469             if(cntrl_stat_blok_cnt)cntrl_stat_new--;
;;;6470   		else	cntrl_stat_new-=10;
;;;6471   		}		
;;;6472   	else if(((Ibmax/10)<(IZMAX_*2))&&(Ibmax>(IZMAX_*15)))
;;;6473   		{
;;;6474   		cntrl_hndl_plazma=21;
;;;6475             if(cntrl_stat_blok_cnt)cntrl_stat_new--;
;;;6476             else	cntrl_stat_new-=3;
;;;6477   		}   
;;;6478   	else if((Ibmax<(IZMAX_*15))&&((Ibmax/10)>IZMAX_))
;;;6479   		{
;;;6480   		cntrl_hndl_plazma=22;
;;;6481   		cntrl_stat_new--;
;;;6482   		}
;;;6483   		
;;;6484   	else if(bps_U<u_necc)
;;;6485   		{
;;;6486   		cntrl_hndl_plazma=23;
;;;6487   		if(bps_U<(u_necc-(UB0-UB20)))
;;;6488   			{
;;;6489   			cntrl_hndl_plazma=24;
;;;6490   			if(Ibmax<0)
;;;6491   				{
;;;6492   				cntrl_hndl_plazma=25;
;;;6493                       if(cntrl_stat_blok_cnt)cntrl_stat_new++;
;;;6494   				else cntrl_stat_new+=10;
;;;6495   				}
;;;6496   			else if(Ibmax<(IZMAX_*5))
;;;6497   				{
;;;6498   				cntrl_hndl_plazma=26;
;;;6499                       if(cntrl_stat_blok_cnt)cntrl_stat_new++;
;;;6500   				else	cntrl_stat_new+=2;
;;;6501   				}
;;;6502   			else if(Ibmax<((IZMAX_*10)/*-10*/))//(Ibmax<((IZMAX_*95)/10))
;;;6503   				{
;;;6504   				cntrl_hndl_plazma=27;
;;;6505   				cntrl_stat_new++;
;;;6506   				}					
;;;6507   			}
;;;6508   		else if(bps_U<(u_necc-((UB0-UB20)/4)))
;;;6509   			{
;;;6510   			cntrl_hndl_plazma=28;
;;;6511   			if(Ibmax<(IZMAX_*5))
;;;6512   				{
;;;6513   				cntrl_hndl_plazma=29;
;;;6514                       if(cntrl_stat_blok_cnt)cntrl_stat_new++;
;;;6515   				else	cntrl_stat_new+=2;
;;;6516   				}
;;;6517   			else if(Ibmax<((IZMAX_*10)/*-10*/))//(Ibmax<((IZMAX_*95)/10))
;;;6518   				{
;;;6519   				cntrl_hndl_plazma=30;
;;;6520   				cntrl_stat_new++;
;;;6521   				}					
;;;6522   			}	
;;;6523   		else if(bps_U<(u_necc-1))
;;;6524   			{
;;;6525   			cntrl_hndl_plazma=31;
;;;6526   			if(Ibmax<((IZMAX_*10)/*-10*/))//(Ibmax<((IZMAX_*95)/10))
;;;6527   				{
;;;6528   				cntrl_hndl_plazma=32;
;;;6529   				cntrl_stat_new++;
;;;6530   				}					
;;;6531   			}					
;;;6532   		}	
;;;6533   	else if((bps_U>u_necc)/*&&(!cntrl_blok)*/)
;;;6534   		{ 	
;;;6535   		cntrl_hndl_plazma=33;
;;;6536   		if(bps_U>(u_necc+(UB0-UB20)))
;;;6537   			{
;;;6538   			cntrl_hndl_plazma=34;
;;;6539                  if(cntrl_stat_blok_cnt)cntrl_stat_new--;
;;;6540   			else	cntrl_stat_new-=10;
;;;6541   			}
;;;6542   		else if(bps_U>(u_necc+((UB0-UB20)/4)))
;;;6543   			{
;;;6544   			cntrl_hndl_plazma=35;
;;;6545                  if(cntrl_stat_blok_cnt)cntrl_stat_new--;
;;;6546   			else cntrl_stat_new-=2;
;;;6547   			}	
;;;6548   		else if(bps_U>(u_necc+1))
;;;6549   			{
;;;6550   			cntrl_hndl_plazma=36;
;;;6551   			cntrl_stat_new--;
;;;6552   			}					
;;;6553   		}
;;;6554   
;;;6555   	if(hv_vz_stat==hvsOFF)
;;;6556   		{
;;;6557   		if((sk_stat[1]==1)&&(sk_stat_old[1]==0))cntrl_stat_new=50;
;;;6558   		}
;;;6559   
;;;6560   	gran(&cntrl_stat_new,10,1010);			
;;;6561   	cntrl_stat_old=cntrl_stat_new;
;;;6562   	cntrl_stat=cntrl_stat_new;
;;;6563   	
;;;6564   	if(ICA_EN==0)
;;;6565   		{
;;;6566   		if(ica_cntrl_hndl_cnt)
0036b0  4fdb              LDR      r7,|L1.14880|
0036b2  2800              CMP      r0,#0                 ;6372
0036b4  d07c              BEQ      |L1.14256|
0036b6  49db              LDR      r1,|L1.14884|
0036b8  6808              LDR      r0,[r1,#0]            ;6374  ; mess_data
0036ba  2864              CMP      r0,#0x64              ;6374
0036bc  d009              BEQ      |L1.14034|
0036be  2869              CMP      r0,#0x69              ;6378
0036c0  d00c              BEQ      |L1.14044|
0036c2  4bd9              LDR      r3,|L1.14888|
0036c4  286e              CMP      r0,#0x6e              ;6382
0036c6  d00f              BEQ      |L1.14056|
0036c8  28e5              CMP      r0,#0xe5              ;6397
0036ca  d02a              BEQ      |L1.14114|
0036cc  28e6              CMP      r0,#0xe6              ;6402
0036ce  d02b              BEQ      |L1.14120|
                  |L1.14032|
0036d0  e1d2              B        |L1.14968|
                  |L1.14034|
0036d2  6848              LDR      r0,[r1,#4]            ;6376  ; mess_data
0036d4  8c61              LDRH     r1,[r4,#0x22]         ;6376  ; cntrl_stat_old
0036d6  4408              ADD      r0,r0,r1              ;6376
0036d8  8420              STRH     r0,[r4,#0x20]         ;6376
0036da  e1cd              B        |L1.14968|
                  |L1.14044|
0036dc  6848              LDR      r0,[r1,#4]            ;6380  ; mess_data
0036de  8c61              LDRH     r1,[r4,#0x22]         ;6380  ; cntrl_stat_old
0036e0  eba10000          SUB      r0,r1,r0              ;6380
0036e4  8420              STRH     r0,[r4,#0x20]         ;6380
0036e6  e1c7              B        |L1.14968|
                  |L1.14056|
0036e8  8c20              LDRH     r0,[r4,#0x20]         ;6385  ; cntrl_stat
0036ea  f1a00001          SUB      r0,r0,#1              ;6385
0036ee  b200              SXTH     r0,r0                 ;6385
0036f0  8420              STRH     r0,[r4,#0x20]         ;6385
0036f2  281e              CMP      r0,#0x1e              ;6387
0036f4  dd06              BLE      |L1.14084|
0036f6  49cd              LDR      r1,|L1.14892|
0036f8  f9b30000          LDRSH    r0,[r3,#0]            ;6387  ; load_U
0036fc  f9b11000          LDRSH    r1,[r1,#0]            ;6387  ; USIGN
003700  4288              CMP      r0,r1                 ;6387
003702  da0c              BGE      |L1.14110|
                  |L1.14084|
003704  7860              LDRB     r0,[r4,#1]            ;6389  ; cntrlStatIsDownCnt
003706  1c40              ADDS     r0,r0,#1              ;6389
003708  b2c0              UXTB     r0,r0                 ;6389
00370a  7060              STRB     r0,[r4,#1]            ;6389
00370c  28fa              CMP      r0,#0xfa              ;6389
00370e  d1df              BNE      |L1.14032|
003710  230a              MOVS     r3,#0xa               ;6389
003712  2200              MOVS     r2,#0                 ;6389
003714  21e7              MOVS     r1,#0xe7              ;6389
003716  20e6              MOVS     r0,#0xe6              ;6389
003718  f7fffffe          BL       mess_send
00371c  e1ac              B        |L1.14968|
                  |L1.14110|
00371e  7065              STRB     r5,[r4,#1]            ;6393
003720  e1aa              B        |L1.14968|
                  |L1.14114|
003722  6848              LDR      r0,[r1,#4]            ;6399  ; mess_data
003724  8420              STRH     r0,[r4,#0x20]         ;6399
003726  e1a7              B        |L1.14968|
                  |L1.14120|
003728  f9b31000          LDRSH    r1,[r3,#0]            ;6405  ; load_U
00372c  f9b90000          LDRSH    r0,[r9,#0]            ;6405  ; u_necc
003730  4281              CMP      r1,r0                 ;6405
003732  dd1b              BLE      |L1.14188|
003734  f04f010b          MOV      r1,#0xb               ;6407
003738  77e1              STRB     r1,[r4,#0x1f]         ;6407
00373a  f9b21000          LDRSH    r1,[r2,#0]            ;6408  ; bps_U
00373e  eba10000          SUB      r0,r1,r0              ;6408
003742  2828              CMP      r0,#0x28              ;6408
003744  dd07              BLE      |L1.14166|
003746  f9b40020          LDRSH    r0,[r4,#0x20]         ;6408  ; cntrl_stat
00374a  2800              CMP      r0,#0                 ;6408
00374c  dd03              BLE      |L1.14166|
00374e  f1a00005          SUB      r0,r0,#5              ;6408
003752  8420              STRH     r0,[r4,#0x20]         ;6408
003754  e190              B        |L1.14968|
                  |L1.14166|
003756  f9b40020          LDRSH    r0,[r4,#0x20]         ;6409  ; cntrl_stat
00375a  2800              CMP      r0,#0                 ;6409
00375c  d0b8              BEQ      |L1.14032|
00375e  7a21              LDRB     r1,[r4,#8]            ;6409  ; b1Hz_ch
003760  2900              CMP      r1,#0                 ;6409
003762  d0b5              BEQ      |L1.14032|
003764  f1a00001          SUB      r0,r0,#1              ;6409
003768  8420              STRH     r0,[r4,#0x20]         ;6409
00376a  e185              B        |L1.14968|
                  |L1.14188|
00376c  f9b21000          LDRSH    r1,[r2,#0]            ;6411  ; bps_U
003770  4281              CMP      r1,r0                 ;6411
003772  daad              BGE      |L1.14032|
003774  f04f020c          MOV      r2,#0xc               ;6413
003778  77e2              STRB     r2,[r4,#0x1f]         ;6413
00377a  eba00001          SUB      r0,r0,r1              ;6414
00377e  2828              CMP      r0,#0x28              ;6414
003780  dd0a              BLE      |L1.14232|
003782  f9b40020          LDRSH    r0,[r4,#0x20]         ;6414  ; cntrl_stat
003786  f24031f7          MOV      r1,#0x3f7             ;6414
00378a  4288              CMP      r0,r1                 ;6414
00378c  da04              BGE      |L1.14232|
00378e  f1000005          ADD      r0,r0,#5              ;6414
003792  8420              STRH     r0,[r4,#0x20]         ;6414
003794  e170              B        |L1.14968|
003796  e00b              B        |L1.14256|
                  |L1.14232|
003798  f9b40020          LDRSH    r0,[r4,#0x20]         ;6415  ; cntrl_stat
00379c  f5b07f7f          CMP      r0,#0x3fc             ;6415
0037a0  da96              BGE      |L1.14032|
0037a2  7a21              LDRB     r1,[r4,#8]            ;6415  ; b1Hz_ch
0037a4  2900              CMP      r1,#0                 ;6415
0037a6  d093              BEQ      |L1.14032|
0037a8  f1000001          ADD      r0,r0,#1              ;6415
0037ac  8420              STRH     r0,[r4,#0x20]         ;6415
0037ae  e163              B        |L1.14968|
                  |L1.14256|
0037b0  7a20              LDRB     r0,[r4,#8]            ;6462  ; b1Hz_ch
0037b2  2800              CMP      r0,#0                 ;6462
0037b4  d08c              BEQ      |L1.14032|
0037b6  489e              LDR      r0,|L1.14896|
0037b8  8800              LDRH     r0,[r0,#0]            ;6462  ; bIBAT_SMKLBR
0037ba  b118              CBZ      r0,|L1.14276|
0037bc  f89b02e3          LDRB     r0,[r11,#0x2e3]       ;6462  ; bps
0037c0  2828              CMP      r0,#0x28              ;6462
0037c2  d985              BLS      |L1.14032|
                  |L1.14276|
0037c4  f9b40022          LDRSH    r0,[r4,#0x22]         ;6464  ; cntrl_stat_old
0037c8  86e0              STRH     r0,[r4,#0x36]         ;6464
0037ca  f04f0113          MOV      r1,#0x13              ;6465
0037ce  77e1              STRB     r1,[r4,#0x1f]         ;6465
0037d0  f9b41038          LDRSH    r1,[r4,#0x38]         ;6466  ; Ibmax
0037d4  8f63              LDRH     r3,[r4,#0x3a]         ;6466  ; IZMAX_
0037d6  fb91fcf8          SDIV     r12,r1,r8             ;6466
0037da  ebbc0f43          CMP      r12,r3,LSL #1         ;6466
0037de  dd0d              BLE      |L1.14332|
0037e0  f04f0114          MOV      r1,#0x14              ;6468
0037e4  77e1              STRB     r1,[r4,#0x1f]         ;6468
0037e6  f8b41062          LDRH     r1,[r4,#0x62]         ;6469  ; cntrl_stat_blok_cnt
0037ea  b119              CBZ      r1,|L1.14324|
0037ec  f1a00001          SUB      r0,r0,#1              ;6469
0037f0  86e0              STRH     r0,[r4,#0x36]         ;6469
0037f2  e0de              B        |L1.14770|
                  |L1.14324|
0037f4  f1a0000a          SUB      r0,r0,#0xa            ;6470
0037f8  86e0              STRH     r0,[r4,#0x36]         ;6470
0037fa  e0da              B        |L1.14770|
                  |L1.14332|
0037fc  da11              BGE      |L1.14370|
0037fe  ebc31803          RSB      r8,r3,r3,LSL #4       ;6472
003802  4588              CMP      r8,r1                 ;6472
003804  da0d              BGE      |L1.14370|
003806  f04f0115          MOV      r1,#0x15              ;6474
00380a  77e1              STRB     r1,[r4,#0x1f]         ;6474
00380c  f8b41062          LDRH     r1,[r4,#0x62]         ;6475  ; cntrl_stat_blok_cnt
003810  b119              CBZ      r1,|L1.14362|
003812  f1a00001          SUB      r0,r0,#1              ;6475
003816  86e0              STRH     r0,[r4,#0x36]         ;6475
003818  e0cb              B        |L1.14770|
                  |L1.14362|
00381a  f1a00003          SUB      r0,r0,#3              ;6476
00381e  86e0              STRH     r0,[r4,#0x36]         ;6476
003820  e0c7              B        |L1.14770|
                  |L1.14370|
003822  ebc31803          RSB      r8,r3,r3,LSL #4       ;6478
003826  4588              CMP      r8,r1                 ;6478
003828  dd08              BLE      |L1.14396|
00382a  459c              CMP      r12,r3                ;6478
00382c  dd06              BLE      |L1.14396|
00382e  f04f0116          MOV      r1,#0x16              ;6480
003832  77e1              STRB     r1,[r4,#0x1f]         ;6480
003834  f1a00001          SUB      r0,r0,#1              ;6481
003838  86e0              STRH     r0,[r4,#0x36]         ;6481
00383a  e0ba              B        |L1.14770|
                  |L1.14396|
00383c  f9b2c000          LDRSH    r12,[r2,#0]           ;6484  ; bps_U
003840  f9b92000          LDRSH    r2,[r9,#0]            ;6484  ; u_necc
003844  f8df91ec          LDR      r9,|L1.14900|
003848  f8dfa1ec          LDR      r10,|L1.14904|
00384c  4594              CMP      r12,r2                ;6484
00384e  da76              BGE      |L1.14654|
003850  f04f0817          MOV      r8,#0x17              ;6486
003854  f884801f          STRB     r8,[r4,#0x1f]         ;6486
003858  f9b98000          LDRSH    r8,[r9,#0]            ;6487  ; UB0
00385c  f9ba9000          LDRSH    r9,[r10,#0]           ;6487  ; UB20
003860  eba80809          SUB      r8,r8,r9              ;6487
003864  eba20908          SUB      r9,r2,r8              ;6487
003868  45e1              CMP      r9,r12                ;6487
00386a  dd2e              BLE      |L1.14538|
00386c  f04f0218          MOV      r2,#0x18              ;6489
003870  77e2              STRB     r2,[r4,#0x1f]         ;6489
003872  2900              CMP      r1,#0                 ;6490
003874  da0d              BGE      |L1.14482|
003876  f04f0119          MOV      r1,#0x19              ;6492
00387a  77e1              STRB     r1,[r4,#0x1f]         ;6492
00387c  f8b41062          LDRH     r1,[r4,#0x62]         ;6493  ; cntrl_stat_blok_cnt
003880  b119              CBZ      r1,|L1.14474|
003882  f1000001          ADD      r0,r0,#1              ;6493
003886  86e0              STRH     r0,[r4,#0x36]         ;6493
003888  e093              B        |L1.14770|
                  |L1.14474|
00388a  f100000a          ADD      r0,r0,#0xa            ;6494
00388e  86e0              STRH     r0,[r4,#0x36]         ;6494
003890  e08f              B        |L1.14770|
                  |L1.14482|
003892  eb030283          ADD      r2,r3,r3,LSL #2       ;6496
003896  428a              CMP      r2,r1                 ;6496
003898  dd0d              BLE      |L1.14518|
00389a  f04f011a          MOV      r1,#0x1a              ;6498
00389e  77e1              STRB     r1,[r4,#0x1f]         ;6498
0038a0  f8b41062          LDRH     r1,[r4,#0x62]         ;6499  ; cntrl_stat_blok_cnt
0038a4  b119              CBZ      r1,|L1.14510|
0038a6  f1000001          ADD      r0,r0,#1              ;6499
0038aa  86e0              STRH     r0,[r4,#0x36]         ;6499
0038ac  e081              B        |L1.14770|
                  |L1.14510|
0038ae  f1000002          ADD      r0,r0,#2              ;6500
0038b2  86e0              STRH     r0,[r4,#0x36]         ;6500
0038b4  e07d              B        |L1.14770|
                  |L1.14518|
0038b6  ebb10f42          CMP      r1,r2,LSL #1          ;6502
0038ba  da7a              BGE      |L1.14770|
0038bc  f04f011b          MOV      r1,#0x1b              ;6504
0038c0  77e1              STRB     r1,[r4,#0x1f]         ;6504
0038c2  f1000001          ADD      r0,r0,#1              ;6505
0038c6  86e0              STRH     r0,[r4,#0x36]         ;6505
0038c8  e073              B        |L1.14770|
                  |L1.14538|
0038ca  ea4f79e8          ASR      r9,r8,#31             ;6508
0038ce  eb087899          ADD      r8,r8,r9,LSR #30      ;6508
0038d2  eba208a8          SUB      r8,r2,r8,ASR #2       ;6508
0038d6  45e0              CMP      r8,r12                ;6508
0038d8  dd1e              BLE      |L1.14616|
0038da  f04f021c          MOV      r2,#0x1c              ;6510
0038de  77e2              STRB     r2,[r4,#0x1f]         ;6510
0038e0  eb030283          ADD      r2,r3,r3,LSL #2       ;6511
0038e4  428a              CMP      r2,r1                 ;6511
0038e6  dd0d              BLE      |L1.14596|
0038e8  f04f011d          MOV      r1,#0x1d              ;6513
0038ec  77e1              STRB     r1,[r4,#0x1f]         ;6513
0038ee  f8b41062          LDRH     r1,[r4,#0x62]         ;6514  ; cntrl_stat_blok_cnt
0038f2  b119              CBZ      r1,|L1.14588|
0038f4  f1000001          ADD      r0,r0,#1              ;6514
0038f8  86e0              STRH     r0,[r4,#0x36]         ;6514
0038fa  e05a              B        |L1.14770|
                  |L1.14588|
0038fc  f1000002          ADD      r0,r0,#2              ;6515
003900  86e0              STRH     r0,[r4,#0x36]         ;6515
003902  e056              B        |L1.14770|
                  |L1.14596|
003904  ebb10f42          CMP      r1,r2,LSL #1          ;6517
003908  da53              BGE      |L1.14770|
00390a  f04f011e          MOV      r1,#0x1e              ;6519
00390e  77e1              STRB     r1,[r4,#0x1f]         ;6519
003910  f1000001          ADD      r0,r0,#1              ;6520
003914  86e0              STRH     r0,[r4,#0x36]         ;6520
003916  e04c              B        |L1.14770|
                  |L1.14616|
003918  1e52              SUBS     r2,r2,#1              ;6523
00391a  4594              CMP      r12,r2                ;6523
00391c  da49              BGE      |L1.14770|
00391e  f04f021f          MOV      r2,#0x1f              ;6525
003922  77e2              STRB     r2,[r4,#0x1f]         ;6525
003924  eb030283          ADD      r2,r3,r3,LSL #2       ;6526
003928  ebb10f42          CMP      r1,r2,LSL #1          ;6526
00392c  da41              BGE      |L1.14770|
00392e  f04f0120          MOV      r1,#0x20              ;6528
003932  77e1              STRB     r1,[r4,#0x1f]         ;6528
003934  f1000001          ADD      r0,r0,#1              ;6529
003938  86e0              STRH     r0,[r4,#0x36]         ;6529
00393a  e03a              B        |L1.14770|
00393c  e7ff              B        |L1.14654|
                  |L1.14654|
00393e  dd38              BLE      |L1.14770|
003940  f04f0121          MOV      r1,#0x21              ;6535
003944  77e1              STRB     r1,[r4,#0x1f]         ;6535
003946  f9b91000          LDRSH    r1,[r9,#0]            ;6536  ; UB0
00394a  f9ba3000          LDRSH    r3,[r10,#0]           ;6536  ; UB20
00394e  eba10103          SUB      r1,r1,r3              ;6536
003952  eb010302          ADD      r3,r1,r2              ;6536
003956  4563              CMP      r3,r12                ;6536
003958  da0d              BGE      |L1.14710|
00395a  f04f0122          MOV      r1,#0x22              ;6538
00395e  77e1              STRB     r1,[r4,#0x1f]         ;6538
003960  f8b41062          LDRH     r1,[r4,#0x62]         ;6539  ; cntrl_stat_blok_cnt
003964  b119              CBZ      r1,|L1.14702|
003966  f1a00001          SUB      r0,r0,#1              ;6539
00396a  86e0              STRH     r0,[r4,#0x36]         ;6539
00396c  e021              B        |L1.14770|
                  |L1.14702|
00396e  f1a0000a          SUB      r0,r0,#0xa            ;6540
003972  86e0              STRH     r0,[r4,#0x36]         ;6540
003974  e01d              B        |L1.14770|
                  |L1.14710|
003976  17cb              ASRS     r3,r1,#31             ;6542
003978  eb017193          ADD      r1,r1,r3,LSR #30      ;6542
00397c  eb0201a1          ADD      r1,r2,r1,ASR #2       ;6542
003980  4561              CMP      r1,r12                ;6542
003982  da0d              BGE      |L1.14752|
003984  f04f0123          MOV      r1,#0x23              ;6544
003988  77e1              STRB     r1,[r4,#0x1f]         ;6544
00398a  f8b41062          LDRH     r1,[r4,#0x62]         ;6545  ; cntrl_stat_blok_cnt
00398e  b119              CBZ      r1,|L1.14744|
003990  f1a00001          SUB      r0,r0,#1              ;6545
003994  86e0              STRH     r0,[r4,#0x36]         ;6545
003996  e00c              B        |L1.14770|
                  |L1.14744|
003998  f1a00002          SUB      r0,r0,#2              ;6546
00399c  86e0              STRH     r0,[r4,#0x36]         ;6546
00399e  e008              B        |L1.14770|
                  |L1.14752|
0039a0  1c52              ADDS     r2,r2,#1              ;6548
0039a2  4594              CMP      r12,r2                ;6548
0039a4  dd05              BLE      |L1.14770|
0039a6  f04f0124          MOV      r1,#0x24              ;6550
0039aa  77e1              STRB     r1,[r4,#0x1f]         ;6550
0039ac  f1a00001          SUB      r0,r0,#1              ;6551
0039b0  86e0              STRH     r0,[r4,#0x36]         ;6551
                  |L1.14770|
0039b2  4822              LDR      r0,|L1.14908|
0039b4  7800              LDRB     r0,[r0,#0]            ;6555  ; hv_vz_stat
0039b6  b948              CBNZ     r0,|L1.14796|
0039b8  4821              LDR      r0,|L1.14912|
0039ba  7840              LDRB     r0,[r0,#1]            ;6557  ; sk_stat
0039bc  2801              CMP      r0,#1                 ;6557
0039be  d105              BNE      |L1.14796|
0039c0  4820              LDR      r0,|L1.14916|
0039c2  7840              LDRB     r0,[r0,#1]            ;6557  ; sk_stat_old
0039c4  b910              CBNZ     r0,|L1.14796|
0039c6  f04f0032          MOV      r0,#0x32              ;6557
0039ca  86e0              STRH     r0,[r4,#0x36]         ;6557
                  |L1.14796|
0039cc  480b              LDR      r0,|L1.14844|
0039ce  f24032f2          MOV      r2,#0x3f2             ;6560
0039d2  210a              MOVS     r1,#0xa               ;6560
0039d4  3036              ADDS     r0,r0,#0x36           ;6560
0039d6  f7fffffe          BL       gran
0039da  8ee0              LDRH     r0,[r4,#0x36]         ;6561  ; cntrl_stat_new
0039dc  8460              STRH     r0,[r4,#0x22]         ;6561
0039de  8420              STRH     r0,[r4,#0x20]         ;6562
0039e0  4819              LDR      r0,|L1.14920|
0039e2  f9b00000          LDRSH    r0,[r0,#0]            ;6564  ; ICA_EN
0039e6  bb88              CBNZ     r0,|L1.14924|
0039e8  8839              LDRH     r1,[r7,#0]  ; ica_cntrl_hndl_cnt
0039ea  e030              B        |L1.14926|
                  |L1.14828|
                          DCD      PAR
                  |L1.14832|
                          DCD      NUMIST
                  |L1.14836|
                          DCD      num_necc
                  |L1.14840|
                          DCD      IZMAX
                  |L1.14844|
                          DCD      ||area_number.22||
                  |L1.14848|
                          DCD      speedChIsOn
                  |L1.14852|
                          DCD      sp_ch_stat
                  |L1.14856|
                          DCD      speedChrgCurr
                  |L1.14860|
                          DCD      bat
                  |L1.14864|
                          DCD      REG_SPEED
                  |L1.14868|
                          DCD      u_necc
                  |L1.14872|
                          DCD      bps_U
                  |L1.14876|
                          DCD      bps
                  |L1.14880|
                          DCD      ica_cntrl_hndl_cnt
                  |L1.14884|
                          DCD      mess_data
                  |L1.14888|
                          DCD      load_U
                  |L1.14892|
                          DCD      USIGN
                  |L1.14896|
                          DCD      bIBAT_SMKLBR
                  |L1.14900|
                          DCD      UB0
                  |L1.14904|
                          DCD      UB20
                  |L1.14908|
                          DCD      hv_vz_stat
                  |L1.14912|
                          DCD      sk_stat
                  |L1.14916|
                          DCD      sk_stat_old
                  |L1.14920|
                          DCD      ICA_EN
                  |L1.14924|
003a4c  e00b              B        |L1.14950|
                  |L1.14926|
003a4e  b151              CBZ      r1,|L1.14950|
;;;6567   			{
;;;6568   			cntrl_stat = ica_cntrl_hndl;
003a50  49ff              LDR      r1,|L1.15952|
003a52  8809              LDRH     r1,[r1,#0]  ; ica_cntrl_hndl
003a54  8421              STRH     r1,[r4,#0x20]
;;;6569   			cntrl_stat_new=10*PWM_START;
003a56  49ff              LDR      r1,|L1.15956|
003a58  8809              LDRH     r1,[r1,#0]  ; PWM_START
003a5a  eb010181          ADD      r1,r1,r1,LSL #2
003a5e  ea4f0141          LSL      r1,r1,#1
003a62  86e1              STRH     r1,[r4,#0x36]
;;;6570   			cntrl_stat_old=10*PWM_START;
003a64  8461              STRH     r1,[r4,#0x22]
                  |L1.14950|
;;;6571   			}
;;;6572   		}
;;;6573   	
;;;6574   	if((ICA_EN==1)||(ICA_EN==2))
003a66  2801              CMP      r0,#1
003a68  d001              BEQ      |L1.14958|
003a6a  2802              CMP      r0,#2
003a6c  d104              BNE      |L1.14968|
                  |L1.14958|
;;;6575   		{
;;;6576   		cntrl_stat=cntrl_stat_new+ica_u_necc;
003a6e  49fa              LDR      r1,|L1.15960|
003a70  8ee0              LDRH     r0,[r4,#0x36]  ; cntrl_stat_new
003a72  8809              LDRH     r1,[r1,#0]  ; ica_u_necc
003a74  4408              ADD      r0,r0,r1
003a76  8420              STRH     r0,[r4,#0x20]
                  |L1.14968|
;;;6577   		}		
;;;6578   	}
;;;6579   #else
;;;6580   else if((b1Hz_ch)&&((!bIBAT_SMKLBR)||(bps[8]._cnt>40)))
;;;6581   	{
;;;6582   	cntrl_hndl_plazma=37;
;;;6583   	cntrl_stat_new=cntrl_stat_old;
;;;6584   	
;;;6585   	if((Ibmax/10)>(2*IZMAX_))
;;;6586   		{
;;;6587   		cntrl_hndl_plazma=38;
;;;6588             if(cntrl_stat_blok_cnt)cntrl_stat_new--;
;;;6589   		else	cntrl_stat_new-=10;
;;;6590   		}		
;;;6591   	else if(((Ibmax/10)<(IZMAX_*2))&&(Ibmax>(IZMAX_*15)))
;;;6592   		{
;;;6593   		cntrl_hndl_plazma=39;
;;;6594             if(cntrl_stat_blok_cnt)cntrl_stat_new--;
;;;6595             else	cntrl_stat_new-=3;
;;;6596   		}   
;;;6597   	else if((Ibmax<(IZMAX_*15))&&((Ibmax/10)>IZMAX_))
;;;6598   		{
;;;6599   		cntrl_hndl_plazma=40;
;;;6600   		cntrl_stat_new--;
;;;6601   		}
;;;6602   		
;;;6603   	else if(load_U<u_necc)
;;;6604   		{
;;;6605   		cntrl_hndl_plazma=41;
;;;6606   		if(load_U<(u_necc-(UB0-UB20)))
;;;6607   			{
;;;6608   			cntrl_hndl_plazma=42;
;;;6609   			if(Ibmax<0)
;;;6610   				{
;;;6611   				cntrl_hndl_plazma=43;
;;;6612                       if(cntrl_stat_blok_cnt)cntrl_stat_new++;
;;;6613   				else cntrl_stat_new+=10;
;;;6614   				}
;;;6615   			else if(Ibmax<(IZMAX_*5))
;;;6616   				{
;;;6617   				cntrl_hndl_plazma=44;
;;;6618                       if(cntrl_stat_blok_cnt)cntrl_stat_new++;
;;;6619   				else	cntrl_stat_new+=2;
;;;6620   				}
;;;6621   			else if(Ibmax<((IZMAX_*95)/10))
;;;6622   				{
;;;6623   				cntrl_hndl_plazma=45;
;;;6624   				cntrl_stat_new++;
;;;6625   				}					
;;;6626   			}
;;;6627   		else if(load_U<(u_necc-((UB0-UB20)/4)))
;;;6628   			{
;;;6629   			cntrl_hndl_plazma=46;
;;;6630   			if(Ibmax<(IZMAX_*5))
;;;6631   				{
;;;6632   				cntrl_hndl_plazma=47;
;;;6633                       if(cntrl_stat_blok_cnt)cntrl_stat_new++;
;;;6634   				else	cntrl_stat_new+=2;
;;;6635   				}
;;;6636   			else if(Ibmax<((IZMAX_*95)/10))
;;;6637   				{
;;;6638   				cntrl_hndl_plazma=48;
;;;6639   				cntrl_stat_new++;
;;;6640   				}					
;;;6641   			}	
;;;6642   		else if(load_U<(u_necc-1))
;;;6643   			{
;;;6644   			cntrl_hndl_plazma=49;
;;;6645   			if(Ibmax<((IZMAX_*95)/10))
;;;6646   				{
;;;6647   				cntrl_hndl_plazma=50;
;;;6648   				cntrl_stat_new++;
;;;6649   				}					
;;;6650   			}					
;;;6651   		}	
;;;6652   	else if((load_U>u_necc)/*&&(!cntrl_blok)*/)
;;;6653   		{
;;;6654   		cntrl_hndl_plazma=51;
;;;6655   		if(load_U>(u_necc+(UB0-UB20)))
;;;6656   			{
;;;6657   			cntrl_hndl_plazma=52;
;;;6658                  if(cntrl_stat_blok_cnt)cntrl_stat_new--;
;;;6659   			else	cntrl_stat_new-=10;
;;;6660   			}
;;;6661   		else if(load_U>(u_necc+((UB0-UB20)/4)))
;;;6662   			{
;;;6663   			cntrl_hndl_plazma=53;
;;;6664                  if(cntrl_stat_blok_cnt)cntrl_stat_new--;
;;;6665   			else cntrl_stat_new-=2;
;;;6666   			}	
;;;6667   		else if(load_U>(u_necc+1))
;;;6668   			{
;;;6669   			cntrl_hndl_plazma=54;
;;;6670   			cntrl_stat_new--;
;;;6671   			}					
;;;6672   		}
;;;6673   
;;;6674   	gran(&cntrl_stat_new,10,1010);			
;;;6675   	cntrl_stat_old=cntrl_stat_new;
;;;6676   	cntrl_stat=cntrl_stat_new;	
;;;6677   	}
;;;6678   #endif
;;;6679   
;;;6680   iiii=0;
003a78  72a5              STRB     r5,[r4,#0xa]
;;;6681   for(i=0;i<NUMIST;i++)
003a7a  7265              STRB     r5,[r4,#9]
003a7c  48f7              LDR      r0,|L1.15964|
003a7e  465a              MOV      r2,r11                ;6462
003a80  f9b01000          LDRSH    r1,[r0,#0]
003a84  e00c              B        |L1.15008|
                  |L1.14982|
;;;6682        {
;;;6683        if(bps[i]._cnt<30)iiii=1;
003a86  ebc003c0          RSB      r3,r0,r0,LSL #3
003a8a  eb031300          ADD      r3,r3,r0,LSL #4
003a8e  eb020383          ADD      r3,r2,r3,LSL #2
003a92  78db              LDRB     r3,[r3,#3]
003a94  2b1e              CMP      r3,#0x1e
003a96  d200              BCS      |L1.15002|
003a98  72a6              STRB     r6,[r4,#0xa]
                  |L1.15002|
003a9a  f1000001          ADD      r0,r0,#1              ;6681
003a9e  7260              STRB     r0,[r4,#9]            ;6681
                  |L1.15008|
003aa0  7a60              LDRB     r0,[r4,#9]            ;6681  ; i
003aa2  4288              CMP      r0,r1                 ;6681
003aa4  dbef              BLT      |L1.14982|
;;;6684        }
;;;6685   
;;;6686   if(iiii==0)
003aa6  7aa0              LDRB     r0,[r4,#0xa]  ; iiii
003aa8  b920              CBNZ     r0,|L1.15028|
;;;6687        {
;;;6688        cntrl_stat=600;	
003aaa  f44f7016          MOV      r0,#0x258
003aae  8420              STRH     r0,[r4,#0x20]
;;;6689        cntrl_stat_old=600;
003ab0  8460              STRH     r0,[r4,#0x22]
;;;6690        cntrl_stat_new=600;
003ab2  86e0              STRH     r0,[r4,#0x36]
                  |L1.15028|
;;;6691   	#ifdef UKU_TELECORE2015
;;;6692   	//cntrl_stat=0;
;;;6693   	//cntrl_stat_old=0;
;;;6694   	//cntrl_stat_new=0;
;;;6695   	#endif
;;;6696        }
;;;6697   
;;;6698   #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;6699   if(ica_cntrl_hndl_cnt)	ica_cntrl_hndl_cnt--;
003ab4  f9b70000          LDRSH    r0,[r7,#0]  ; ica_cntrl_hndl_cnt
003ab8  b110              CBZ      r0,|L1.15040|
003aba  f1a00001          SUB      r0,r0,#1
003abe  8038              STRH     r0,[r7,#0]
                  |L1.15040|
;;;6700   
;;;6701   
;;;6702   
;;;6703   #endif
;;;6704   
;;;6705   
;;;6706   gran(&cntrl_stat,10,1010); 
003ac0  f24032f2          MOV      r2,#0x3f2
003ac4  210a              MOVS     r1,#0xa
003ac6  48e6              LDR      r0,|L1.15968|
003ac8  f7fffffe          BL       gran
;;;6707   b1Hz_ch=0;
003acc  7225              STRB     r5,[r4,#8]
                  |L1.15054|
;;;6708   }
003ace  e8bd9ff0          POP      {r4-r12,pc}
;;;6709   #endif
                          ENDP

                  ext_drv PROC
;;;7198   //-----------------------------------------------
;;;7199   void ext_drv(void)
003ad2  e92d5ff0          PUSH     {r4-r12,lr}
;;;7200   {
;;;7201   char i;
;;;7202   
;;;7203   
;;;7204   for(i=0;i<NUMSK;i++)
003ad6  f04f0000          MOV      r0,#0
003ada  4ae4              LDR      r2,|L1.15980|
;;;7205   	{
;;;7206   	#ifdef UKU_MGTS
;;;7207   	if(adc_buff_[sk_buff_RSTKM[i]]<2000)
;;;7208   	#endif
;;;7209   	#ifdef UKU_RSTKM
;;;7210   	if(adc_buff_[sk_buff_RSTKM[i]]<2000)
;;;7211   	#endif
;;;7212   	#ifdef UKU_3U
;;;7213   	if(adc_buff_[sk_buff_3U[i]]<2000)
;;;7214   	#endif
;;;7215   	#ifdef UKU_GLONASS
;;;7216   	if(adc_buff_[sk_buff_GLONASS[i]]<2000)
;;;7217   	#endif
;;;7218   	#ifdef UKU_KONTUR
;;;7219   	if(adc_buff_[sk_buff_KONTUR[i]]<2000)
;;;7220   	#endif
;;;7221   	#ifdef UKU_6U
;;;7222   	if(adc_buff_[sk_buff_6U[i]]<2000)
;;;7223   	#endif
;;;7224   	#ifdef UKU_220
;;;7225   	if(adc_buff_[sk_buff_220[i]]<2000)
;;;7226   	#endif
;;;7227   	#ifdef UKU_220_V2
;;;7228   	if(adc_buff_[sk_buff_220[i]]<2000)
;;;7229   	#endif
;;;7230   	#ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;7231   	if(adc_buff_[sk_buff_220[i]]<2000)
;;;7232   	#endif
;;;7233   	#ifdef UKU_TELECORE2015	
;;;7234   	if(adc_buff_[sk_buff_TELECORE2015[i]]<2000)	 //TODO
;;;7235   	#endif
;;;7236   	#ifdef UKU_TELECORE2017
;;;7237   	if(adc_buff_[sk_buff_TELECORE2015[i]]<2000)	 //TODO
;;;7238   	#endif		
;;;7239   		{
;;;7240   		if(sk_cnt[i]<10)
003adc  4be1              LDR      r3,|L1.15972|
;;;7241   			{
;;;7242   			sk_cnt[i]++;
;;;7243   			if(sk_cnt[i]>=10)
;;;7244   				{
;;;7245   				sk_stat[i]=ssON;
003ade  4de2              LDR      r5,|L1.15976|
003ae0  f04f0a01          MOV      r10,#1
;;;7246   				}
;;;7247   			}
;;;7248   		else 
;;;7249   			{
;;;7250   			sk_cnt[i]=10;
003ae4  f04f0b0a          MOV      r11,#0xa
003ae8  4606              MOV      r6,r0                 ;7204
003aea  f9b24000          LDRSH    r4,[r2,#0]            ;7204
003aee  e025              B        |L1.15164|
                  |L1.15088|
003af0  49df              LDR      r1,|L1.15984|
003af2  4fe0              LDR      r7,|L1.15988|
003af4  5c09              LDRB     r1,[r1,r0]            ;7231
003af6  f9371011          LDRSH    r1,[r7,r1,LSL #1]     ;7231
003afa  f5b16ffa          CMP      r1,#0x7d0             ;7231
003afe  da0e              BGE      |L1.15134|
003b00  5619              LDRSB    r1,[r3,r0]            ;7240
003b02  290a              CMP      r1,#0xa               ;7240
003b04  da08              BGE      |L1.15128|
003b06  f1010101          ADD      r1,r1,#1              ;7242
003b0a  b249              SXTB     r1,r1                 ;7242
003b0c  5419              STRB     r1,[r3,r0]            ;7242
003b0e  290a              CMP      r1,#0xa               ;7243
003b10  db11              BLT      |L1.15158|
003b12  f805a000          STRB     r10,[r5,r0]           ;7245
003b16  e00e              B        |L1.15158|
                  |L1.15128|
003b18  f803b000          STRB     r11,[r3,r0]
003b1c  e00b              B        |L1.15158|
                  |L1.15134|
;;;7251   			}
;;;7252                  
;;;7253   		}
;;;7254   	else
;;;7255   		{
;;;7256   		if(sk_cnt[i]>0)
003b1e  5619              LDRSB    r1,[r3,r0]
003b20  2900              CMP      r1,#0
003b22  dd07              BLE      |L1.15156|
;;;7257   			{
;;;7258   			sk_cnt[i]--;
003b24  f1a10101          SUB      r1,r1,#1
003b28  b249              SXTB     r1,r1
003b2a  5419              STRB     r1,[r3,r0]
;;;7259   			if(sk_cnt[i]<=0)
003b2c  2900              CMP      r1,#0
003b2e  dc02              BGT      |L1.15158|
;;;7260   				{
;;;7261   				sk_stat[i]=ssOFF;
003b30  542e              STRB     r6,[r5,r0]
003b32  e000              B        |L1.15158|
                  |L1.15156|
;;;7262   				}
;;;7263   			}
;;;7264   		else 
;;;7265   			{
;;;7266   			sk_cnt[i]=0;
003b34  541e              STRB     r6,[r3,r0]
                  |L1.15158|
003b36  f1000001          ADD      r0,r0,#1              ;7204
003b3a  b2c0              UXTB     r0,r0                 ;7204
                  |L1.15164|
003b3c  42a0              CMP      r0,r4                 ;7204
003b3e  dbd7              BLT      |L1.15088|
;;;7267   			}
;;;7268   		}
;;;7269   	}
;;;7270   
;;;7271   for(i=0;i<NUMSK;i++)
003b40  f04f0400          MOV      r4,#0
;;;7272   	{
;;;7273   	if(((SK_SIGN[i]==0)&&(sk_stat[i]==ssON))||((SK_SIGN[i])&&(sk_stat[i]==ssOFF)) )
;;;7274   		{
;;;7275   		if(sk_av_cnt[i]<10)
003b44  f8df9330          LDR      r9,|L1.15992|
;;;7276   			{
;;;7277   			sk_av_cnt[i]++;
;;;7278   			if(sk_av_cnt[i]>=10)
;;;7279   				{
;;;7280   				sk_av_stat[i]=sasON;
003b48  4fcc              LDR      r7,|L1.15996|
;;;7281   				}
;;;7282   			}
;;;7283   		else 
;;;7284   			{
;;;7285   			sk_av_cnt[i]=10;
;;;7286   			}
;;;7287   		}
;;;7288   	else
;;;7289   		{
;;;7290   		if(sk_av_cnt[i]>=0)
;;;7291   			{
;;;7292   			sk_av_cnt[i]--;
;;;7293   			if(sk_av_cnt[i]<=0)
;;;7294   				{
;;;7295   				sk_av_stat[i]=sasOFF;
;;;7296   				}
;;;7297   			}
;;;7298   		else 
;;;7299   			{
;;;7300   			sk_av_cnt[i]=0;
;;;7301   			}
;;;7302   		}
;;;7303   
;;;7304   #ifndef UKU_KONTUR
;;;7305   	if(sk_av_stat_old[i]!=sk_av_stat[i])
003b4a  f8df8334          LDR      r8,|L1.16000|
003b4e  e083              B        |L1.15448|
                  |L1.15184|
003b50  48cc              LDR      r0,|L1.16004|
003b52  f9300014          LDRSH    r0,[r0,r4,LSL #1]     ;7273
003b56  b910              CBNZ     r0,|L1.15198|
003b58  5d29              LDRB     r1,[r5,r4]            ;7273
003b5a  2901              CMP      r1,#1                 ;7273
003b5c  d00f              BEQ      |L1.15230|
                  |L1.15198|
003b5e  b108              CBZ      r0,|L1.15204|
003b60  5d28              LDRB     r0,[r5,r4]            ;7273
003b62  b160              CBZ      r0,|L1.15230|
                  |L1.15204|
003b64  f9190004          LDRSB    r0,[r9,r4]            ;7290
003b68  2800              CMP      r0,#0                 ;7290
003b6a  db19              BLT      |L1.15264|
003b6c  f1a00001          SUB      r0,r0,#1              ;7292
003b70  b240              SXTB     r0,r0                 ;7292
003b72  f8090004          STRB     r0,[r9,r4]            ;7292
003b76  2800              CMP      r0,#0                 ;7293
003b78  dc14              BGT      |L1.15268|
003b7a  553e              STRB     r6,[r7,r4]            ;7295
003b7c  e012              B        |L1.15268|
                  |L1.15230|
003b7e  f9190004          LDRSB    r0,[r9,r4]            ;7275
003b82  280a              CMP      r0,#0xa               ;7275
003b84  da09              BGE      |L1.15258|
003b86  f1000001          ADD      r0,r0,#1              ;7277
003b8a  b240              SXTB     r0,r0                 ;7277
003b8c  f8090004          STRB     r0,[r9,r4]            ;7277
003b90  280a              CMP      r0,#0xa               ;7278
003b92  db07              BLT      |L1.15268|
003b94  f807a004          STRB     r10,[r7,r4]           ;7280
003b98  e004              B        |L1.15268|
                  |L1.15258|
003b9a  f809b004          STRB     r11,[r9,r4]           ;7285
003b9e  e001              B        |L1.15268|
                  |L1.15264|
003ba0  f8096004          STRB     r6,[r9,r4]            ;7300
                  |L1.15268|
003ba4  f8181004          LDRB     r1,[r8,r4]
003ba8  5d38              LDRB     r0,[r7,r4]
003baa  4281              CMP      r1,r0
003bac  d04e              BEQ      |L1.15436|
;;;7306   		{
;;;7307   		plazma_sk++;
003bae  4aac              LDR      r2,|L1.15968|
003bb0  3a20              SUBS     r2,r2,#0x20
003bb2  8e91              LDRH     r1,[r2,#0x34]  ; plazma_sk
003bb4  f1010101          ADD      r1,r1,#1
003bb8  8691              STRH     r1,[r2,#0x34]
;;;7308   		if(sk_av_stat[i]==sasON)
003bba  2801              CMP      r0,#1
003bbc  d007              BEQ      |L1.15310|
;;;7309   			{
;;;7310   			if(i==0)snmp_trap_send("SK #1 Alarm",15,1,1);
;;;7311   			else if(i==1)
;;;7312   				{
;;;7313   				#ifndef UKU_TELEKORE2017
;;;7314   				snmp_trap_send("SK #2 Alarm",15,2,1);
;;;7315   				#endif
;;;7316   				#ifdef UKU_TELEKORE2017
;;;7317   				snmp_trap_send("Door open",15,2,1);
;;;7318   				#endif
;;;7319   				}
;;;7320   			else if(i==2)snmp_trap_send("SK #3 Alarm",15,3,1);
;;;7321   			else if(i==3)snmp_trap_send("SK #4 Alarm",15,4,1);
;;;7322   			}
;;;7323   		else 
;;;7324   			{
;;;7325   			if(i==0)snmp_trap_send("SK #1 Alarm is off",15,1,0);
003bbe  b354              CBZ      r4,|L1.15382|
;;;7326   			else if(i==1)
003bc0  2c01              CMP      r4,#1
003bc2  d02f              BEQ      |L1.15396|
;;;7327   				{
;;;7328   				#ifndef UKU_TELEKORE2017
;;;7329   				snmp_trap_send("SK #2 Alarm is off",15,2,0);
;;;7330   				#endif
;;;7331   				#ifdef UKU_TELEKORE2017
;;;7332   				snmp_trap_send("Door open clear",15,2,0);
;;;7333   				#endif
;;;7334   				}
;;;7335   			else if(i==2)snmp_trap_send("SK #3 Alarm is off",15,3,0);
003bc4  2c02              CMP      r4,#2
003bc6  d034              BEQ      |L1.15410|
;;;7336   			else if(i==3)snmp_trap_send("SK #4 Alarm is off",15,4,0);
003bc8  2c03              CMP      r4,#3
003bca  d039              BEQ      |L1.15424|
003bcc  e03e              B        |L1.15436|
                  |L1.15310|
003bce  b134              CBZ      r4,|L1.15326|
003bd0  2c01              CMP      r4,#1                 ;7311
003bd2  d00b              BEQ      |L1.15340|
003bd4  2c02              CMP      r4,#2                 ;7320
003bd6  d010              BEQ      |L1.15354|
003bd8  2c03              CMP      r4,#3                 ;7321
003bda  d015              BEQ      |L1.15368|
003bdc  e036              B        |L1.15436|
                  |L1.15326|
003bde  2301              MOVS     r3,#1                 ;7310
003be0  461a              MOV      r2,r3                 ;7310
003be2  210f              MOVS     r1,#0xf               ;7310
003be4  a0a8              ADR      r0,|L1.16008|
003be6  f7fffffe          BL       snmp_trap_send
003bea  e02f              B        |L1.15436|
                  |L1.15340|
003bec  2301              MOVS     r3,#1                 ;7314
003bee  2202              MOVS     r2,#2                 ;7314
003bf0  210f              MOVS     r1,#0xf               ;7314
003bf2  a0a8              ADR      r0,|L1.16020|
003bf4  f7fffffe          BL       snmp_trap_send
003bf8  e028              B        |L1.15436|
                  |L1.15354|
003bfa  2301              MOVS     r3,#1                 ;7320
003bfc  2203              MOVS     r2,#3                 ;7320
003bfe  210f              MOVS     r1,#0xf               ;7320
003c00  a0a7              ADR      r0,|L1.16032|
003c02  f7fffffe          BL       snmp_trap_send
003c06  e021              B        |L1.15436|
                  |L1.15368|
003c08  2301              MOVS     r3,#1                 ;7321
003c0a  2204              MOVS     r2,#4                 ;7321
003c0c  210f              MOVS     r1,#0xf               ;7321
003c0e  a0a7              ADR      r0,|L1.16044|
003c10  f7fffffe          BL       snmp_trap_send
003c14  e01a              B        |L1.15436|
                  |L1.15382|
003c16  2300              MOVS     r3,#0                 ;7325
003c18  2201              MOVS     r2,#1                 ;7325
003c1a  210f              MOVS     r1,#0xf               ;7325
003c1c  a0a6              ADR      r0,|L1.16056|
003c1e  f7fffffe          BL       snmp_trap_send
003c22  e013              B        |L1.15436|
                  |L1.15396|
003c24  2300              MOVS     r3,#0                 ;7329
003c26  2202              MOVS     r2,#2                 ;7329
003c28  210f              MOVS     r1,#0xf               ;7329
003c2a  a0a8              ADR      r0,|L1.16076|
003c2c  f7fffffe          BL       snmp_trap_send
003c30  e00c              B        |L1.15436|
                  |L1.15410|
003c32  2300              MOVS     r3,#0                 ;7335
003c34  2203              MOVS     r2,#3                 ;7335
003c36  210f              MOVS     r1,#0xf               ;7335
003c38  a0a9              ADR      r0,|L1.16096|
003c3a  f7fffffe          BL       snmp_trap_send
003c3e  e005              B        |L1.15436|
                  |L1.15424|
003c40  2300              MOVS     r3,#0
003c42  2204              MOVS     r2,#4
003c44  210f              MOVS     r1,#0xf
003c46  a0ab              ADR      r0,|L1.16116|
003c48  f7fffffe          BL       snmp_trap_send
                  |L1.15436|
;;;7337   			}
;;;7338   	 	}
;;;7339   #endif
;;;7340   
;;;7341   #ifdef UKU_KONTUR
;;;7342   	if(sk_av_stat_old[i]!=sk_av_stat[i])
;;;7343   		{
;;;7344   		plazma_sk++;
;;;7345   		if(sk_av_stat[i]==sasON)
;;;7346   			{
;;;7347   			if(i==0)snmp_trap_send("Door is opened",15,1,1);
;;;7348   			else if(i==1)snmp_trap_send("Smoke Alarm",15,2,1);
;;;7349   			else if(i==2)snmp_trap_send("Shock Sensor Alarm",15,3,1);
;;;7350   			else if(i==3)snmp_trap_send("SK #4 Alarm",15,4,1);
;;;7351   			}
;;;7352   		else 
;;;7353   			{
;;;7354   			if(i==0)snmp_trap_send("Door is closed",15,1,0);
;;;7355   			else if(i==1)snmp_trap_send("Smoke Alarm is off",15,2,0);
;;;7356   			else if(i==2)snmp_trap_send("Shock Sensor Alarm is off",15,3,0);
;;;7357   			else if(i==3)snmp_trap_send("SK #4 Alarm is off",15,4,0);
;;;7358   			}
;;;7359   	 	}
;;;7360   #endif
;;;7361   	sk_av_stat_old[i]=sk_av_stat[i];
003c4c  5d38              LDRB     r0,[r7,r4]
003c4e  f8080004          STRB     r0,[r8,r4]
003c52  f1040401          ADD      r4,r4,#1              ;7271
003c56  b2e4              UXTB     r4,r4                 ;7271
                  |L1.15448|
003c58  4884              LDR      r0,|L1.15980|
003c5a  f9b00000          LDRSH    r0,[r0,#0]            ;7271  ; NUMSK
003c5e  4284              CMP      r4,r0                 ;7271
003c60  f6ffaf76          BLT      |L1.15184|
;;;7362   	}
;;;7363   }
003c64  e733              B        |L1.15054|
;;;7364   
                          ENDP

                  zar_superviser_start PROC
;;;7401   //-----------------------------------------------
;;;7402   void zar_superviser_start(void)
003c66  4aa8              LDR      r2,|L1.16136|
;;;7403   {
;;;7404   sign_U[0]=1;
003c68  f04f0001          MOV      r0,#1
003c6c  7010              STRB     r0,[r2,#0]
;;;7405   sign_I[0]=1;
003c6e  49a7              LDR      r1,|L1.16140|
003c70  7008              STRB     r0,[r1,#0]
;;;7406   sign_U[1]=1;
003c72  7050              STRB     r0,[r2,#1]
;;;7407   sign_I[1]=1;
003c74  7048              STRB     r0,[r1,#1]
;;;7408   
;;;7409   }
003c76  4770              BX       lr
;;;7410   
                          ENDP

                  zar_superviser_drv PROC
;;;7366   //-----------------------------------------------
;;;7367   void zar_superviser_drv(void)
003c78  e92d5ff0          PUSH     {r4-r12,lr}
;;;7368   {
;;;7369   
;;;7370   if(((bat[0]._Ub>u_necc_up) || (bat[0]._Ub<u_necc_dn))&&(main_kb_cnt<((TBAT*60)-30))&&(main_kb_cnt>((TBAT*60)-150))) sign_U[0]=0;
003c7c  48a5              LDR      r0,|L1.16148|
003c7e  f8df9298          LDR      r9,|L1.16152|
003c82  f8df828c          LDR      r8,|L1.16144|
003c86  f9b0c000          LDRSH    r12,[r0,#0]  ; u_necc_up
003c8a  f9b90000          LDRSH    r0,[r9,#0]
003c8e  4c74              LDR      r4,|L1.15968|
003c90  ebc01100          RSB      r1,r0,r0,LSL #4
003c94  3c20              SUBS     r4,r4,#0x20
003c96  f9b87002          LDRSH    r7,[r8,#2]  ; bat
003c9a  f06f0a1d          MVN      r10,#0x1d
003c9e  f06f0b95          MVN      r11,#0x95
003ca2  2500              MOVS     r5,#0
003ca4  4e98              LDR      r6,|L1.16136|
003ca6  f9b40040          LDRSH    r0,[r4,#0x40]
003caa  eb0a0281          ADD      r2,r10,r1,LSL #2
003cae  eb0b0381          ADD      r3,r11,r1,LSL #2
003cb2  4567              CMP      r7,r12
003cb4  dc05              BGT      |L1.15554|
003cb6  f8dfc264          LDR      r12,|L1.16156|
003cba  f9bcc000          LDRSH    r12,[r12,#0]  ; u_necc_dn
003cbe  4567              CMP      r7,r12
003cc0  da04              BGE      |L1.15564|
                  |L1.15554|
003cc2  4282              CMP      r2,r0
003cc4  dd02              BLE      |L1.15564|
003cc6  4283              CMP      r3,r0
003cc8  da00              BGE      |L1.15564|
003cca  7035              STRB     r5,[r6,#0]
                  |L1.15564|
;;;7371   
;;;7372   if(((bat[0]._Ib>(2*IKB)) || (bat[0]._Ib<(-IKB*2))) &&(main_kb_cnt<((TBAT*60)-30))&&(main_kb_cnt>((TBAT*60)-150))) sign_I[0]=0;
003ccc  4f94              LDR      r7,|L1.16160|
003cce  f9b8c008          LDRSH    r12,[r8,#8]  ; bat
003cd2  f9b7e000          LDRSH    lr,[r7,#0]  ; IKB
003cd6  4f8d              LDR      r7,|L1.16140|
003cd8  ebbc0f4e          CMP      r12,lr,LSL #1
003cdc  dc04              BGT      |L1.15592|
003cde  f1ce0e00          RSB      lr,lr,#0
003ce2  ebbc0f4e          CMP      r12,lr,LSL #1
003ce6  da04              BGE      |L1.15602|
                  |L1.15592|
003ce8  4282              CMP      r2,r0
003cea  dd02              BLE      |L1.15602|
003cec  4283              CMP      r3,r0
003cee  da00              BGE      |L1.15602|
003cf0  703d              STRB     r5,[r7,#0]
                  |L1.15602|
;;;7373   																 
;;;7374   if((main_kb_cnt==((TBAT*60)-10)) &&(spc_stat==spcOFF))
003cf2  f06f0209          MVN      r2,#9
003cf6  eb020181          ADD      r1,r2,r1,LSL #2
003cfa  4281              CMP      r1,r0
003cfc  d120              BNE      |L1.15680|
003cfe  7d20              LDRB     r0,[r4,#0x14]  ; spc_stat
003d00  b9f0              CBNZ     r0,|L1.15680|
;;;7375   	{
;;;7376   	if((sign_U[0]==1) && (sign_I[0]==1) && (lc640_read_int(EE_BAT1_ZAR_CNT)!=BAT_C_REAL[0]) && (NUMBAT) && (!(bat[0]._av&1)))
003d02  7830              LDRB     r0,[r6,#0]  ; sign_U
003d04  2801              CMP      r0,#1
003d06  d11b              BNE      |L1.15680|
003d08  7838              LDRB     r0,[r7,#0]  ; sign_I
003d0a  2801              CMP      r0,#1
003d0c  d118              BNE      |L1.15680|
003d0e  f44f70d6          MOV      r0,#0x1ac
003d12  f7fffffe          BL       lc640_read_int
003d16  4983              LDR      r1,|L1.16164|
003d18  f9b11000          LDRSH    r1,[r1,#0]  ; BAT_C_REAL
003d1c  4288              CMP      r0,r1
003d1e  d00f              BEQ      |L1.15680|
003d20  4881              LDR      r0,|L1.16168|
003d22  8800              LDRH     r0,[r0,#0]  ; NUMBAT
003d24  b160              CBZ      r0,|L1.15680|
003d26  f898003d          LDRB     r0,[r8,#0x3d]  ; bat
003d2a  07c0              LSLS     r0,r0,#31
003d2c  d108              BNE      |L1.15680|
;;;7377   		{
;;;7378   		lc640_write_int(EE_BAT1_ZAR_CNT,BAT_C_REAL[0]);
003d2e  f44f70d6          MOV      r0,#0x1ac
003d32  f7fffffe          BL       lc640_write_int
;;;7379   		superviser_cnt++;
003d36  487d              LDR      r0,|L1.16172|
003d38  7801              LDRB     r1,[r0,#0]  ; superviser_cnt
003d3a  f1010101          ADD      r1,r1,#1
003d3e  7001              STRB     r1,[r0,#0]
                  |L1.15680|
;;;7380   		}
;;;7381   	
;;;7382   	}
;;;7383   
;;;7384   if(((bat[0]._Ub>u_necc_up) || (bat[1]._Ub<u_necc_dn))&&(main_kb_cnt<((TBAT*60)-30))&&(main_kb_cnt>((TBAT*60)-150))) sign_U[1]=0;
003d40  4874              LDR      r0,|L1.16148|
003d42  f9b81002          LDRSH    r1,[r8,#2]  ; bat
003d46  f9b00000          LDRSH    r0,[r0,#0]  ; u_necc_up
003d4a  4281              CMP      r1,r0
003d4c  dc06              BGT      |L1.15708|
003d4e  4873              LDR      r0,|L1.16156|
003d50  f9b8104e          LDRSH    r1,[r8,#0x4e]  ; bat
003d54  f9b00000          LDRSH    r0,[r0,#0]  ; u_necc_dn
003d58  4281              CMP      r1,r0
003d5a  da0e              BGE      |L1.15738|
                  |L1.15708|
003d5c  f9b90000          LDRSH    r0,[r9,#0]  ; TBAT
003d60  f9b41040          LDRSH    r1,[r4,#0x40]  ; main_kb_cnt
003d64  ebc01000          RSB      r0,r0,r0,LSL #4
003d68  eb0a0280          ADD      r2,r10,r0,LSL #2
003d6c  428a              CMP      r2,r1
003d6e  dd04              BLE      |L1.15738|
003d70  eb0b0080          ADD      r0,r11,r0,LSL #2
003d74  4288              CMP      r0,r1
003d76  da00              BGE      |L1.15738|
003d78  7075              STRB     r5,[r6,#1]
                  |L1.15738|
;;;7385   
;;;7386   if(((bat[1]._Ib>(2*IKB)) || (bat[1]._Ib<(-IKB*2))) &&(main_kb_cnt<((TBAT*60)-30))&&(main_kb_cnt>((TBAT*60)-150))) sign_I[1]=0;
003d7a  4969              LDR      r1,|L1.16160|
003d7c  f9b80054          LDRSH    r0,[r8,#0x54]  ; bat
003d80  f9b11000          LDRSH    r1,[r1,#0]  ; IKB
003d84  ebb00f41          CMP      r0,r1,LSL #1
003d88  dc03              BGT      |L1.15762|
003d8a  4249              RSBS     r1,r1,#0
003d8c  ebb00f41          CMP      r0,r1,LSL #1
003d90  da0e              BGE      |L1.15792|
                  |L1.15762|
003d92  f9b90000          LDRSH    r0,[r9,#0]  ; TBAT
003d96  f9b41040          LDRSH    r1,[r4,#0x40]  ; main_kb_cnt
003d9a  ebc01000          RSB      r0,r0,r0,LSL #4
003d9e  eb0a0280          ADD      r2,r10,r0,LSL #2
003da2  428a              CMP      r2,r1
003da4  dd04              BLE      |L1.15792|
003da6  eb0b0080          ADD      r0,r11,r0,LSL #2
003daa  4288              CMP      r0,r1
003dac  da00              BGE      |L1.15792|
003dae  707d              STRB     r5,[r7,#1]
                  |L1.15792|
;;;7387   																 
;;;7388   if((main_kb_cnt==((TBAT*60)-10)) &&(spc_stat==spcOFF))
003db0  f9b90000          LDRSH    r0,[r9,#0]  ; TBAT
003db4  ebc01100          RSB      r1,r0,r0,LSL #4
003db8  f06f0009          MVN      r0,#9
003dbc  eb000081          ADD      r0,r0,r1,LSL #2
003dc0  f9b41040          LDRSH    r1,[r4,#0x40]  ; main_kb_cnt
003dc4  4288              CMP      r0,r1
003dc6  d121              BNE      |L1.15884|
003dc8  7d20              LDRB     r0,[r4,#0x14]  ; spc_stat
003dca  b9f8              CBNZ     r0,|L1.15884|
;;;7389   	{
;;;7390   	if((sign_U[1]==1) && (sign_I[1]==1) && (lc640_read_int(EE_BAT2_ZAR_CNT)!=BAT_C_REAL[1]) && (NUMBAT==2) && (!(bat[1]._av&1)))
003dcc  7870              LDRB     r0,[r6,#1]  ; sign_U
003dce  2801              CMP      r0,#1
003dd0  d11c              BNE      |L1.15884|
003dd2  7878              LDRB     r0,[r7,#1]  ; sign_I
003dd4  2801              CMP      r0,#1
003dd6  d119              BNE      |L1.15884|
003dd8  f44f75e5          MOV      r5,#0x1ca
003ddc  4628              MOV      r0,r5
003dde  f7fffffe          BL       lc640_read_int
003de2  4950              LDR      r1,|L1.16164|
003de4  f9b11002          LDRSH    r1,[r1,#2]  ; BAT_C_REAL
003de8  4288              CMP      r0,r1
003dea  d00f              BEQ      |L1.15884|
003dec  484e              LDR      r0,|L1.16168|
003dee  8800              LDRH     r0,[r0,#0]  ; NUMBAT
003df0  2802              CMP      r0,#2
003df2  d10b              BNE      |L1.15884|
003df4  f8980089          LDRB     r0,[r8,#0x89]  ; bat
003df8  07c0              LSLS     r0,r0,#31
003dfa  d107              BNE      |L1.15884|
;;;7391   		{
;;;7392   		lc640_write_int(EE_BAT2_ZAR_CNT,BAT_C_REAL[1]);
003dfc  4628              MOV      r0,r5
003dfe  f7fffffe          BL       lc640_write_int
;;;7393   		superviser_cnt++;
003e02  484a              LDR      r0,|L1.16172|
003e04  7801              LDRB     r1,[r0,#0]  ; superviser_cnt
003e06  f1010101          ADD      r1,r1,#1
003e0a  7001              STRB     r1,[r0,#0]
                  |L1.15884|
;;;7394   		}
;;;7395   	
;;;7396   	}
;;;7397   
;;;7398   if(main_kb_cnt==((TBAT*60)-2)) zar_superviser_start();
003e0c  f9b90000          LDRSH    r0,[r9,#0]  ; TBAT
003e10  f06f0101          MVN      r1,#1
003e14  ebc01000          RSB      r0,r0,r0,LSL #4
003e18  eb010080          ADD      r0,r1,r0,LSL #2
003e1c  f9b41040          LDRSH    r1,[r4,#0x40]  ; main_kb_cnt
003e20  4288              CMP      r0,r1
003e22  d102              BNE      |L1.15914|
003e24  e8bd5ff0          POP      {r4-r12,lr}
003e28  e7fe              B        zar_superviser_start
                  |L1.15914|
;;;7399   }
003e2a  e650              B        |L1.15054|
;;;7400   
                          ENDP

                  npn_hndl PROC
;;;7411   //-----------------------------------------------
;;;7412   void npn_hndl(void)
003e2c  e92d03f0          PUSH     {r4-r9}
;;;7413   {
;;;7414   if(NPN_OUT!=npnoOFF)
003e30  483f              LDR      r0,|L1.16176|
;;;7415   	{
;;;7416   /*	if(NPN_SIGN==npnsAVNET)
;;;7417   		{
;;;7418   		if(net_av==1)
;;;7419   			{
;;;7420   			if(npn_tz_cnt<TZNPN)
;;;7421   				{
;;;7422   				npn_tz_cnt++;
;;;7423   				if(npn_tz_cnt==TZNPN)
;;;7424   					{
;;;7425   					npn_stat=npnsOFF;
;;;7426   					}
;;;7427   				}
;;;7428   			}
;;;7429   		else
;;;7430   			{
;;;7431   			if(npn_tz_cnt)
;;;7432   				{
;;;7433   				npn_tz_cnt--;
;;;7434   				if(npn_tz_cnt==0)
;;;7435   					{
;;;7436   					npn_stat=npnsON;
;;;7437   					}
;;;7438   				}
;;;7439   			}
;;;7440   		}*/
;;;7441   /*	if(NPN_SIGN==npnsULOAD)
;;;7442   		{
;;;7443   		if(load_U<UONPN)
;;;7444   			{
;;;7445   			if(npn_tz_cnt<TZNPN)
;;;7446   				{
;;;7447   				npn_tz_cnt++;
;;;7448   				if(npn_tz_cnt==TZNPN)
;;;7449   					{
;;;7450   					npn_stat=npnsOFF;
;;;7451   					}
;;;7452   				}
;;;7453   			}
;;;7454   		else if(load_U>UVNPN)
;;;7455   			{
;;;7456   			if(npn_tz_cnt)
;;;7457   				{
;;;7458   				npn_tz_cnt--;
;;;7459   				if(npn_tz_cnt==0)
;;;7460   					{
;;;7461   					npn_stat=npnsON;
;;;7462   					}
;;;7463   				}
;;;7464   			}
;;;7465   		}*/
;;;7466   
;;;7467   	if((load_U<UONPN)&&((net_Ua<UMN)||(net_Ub<UMN)||(net_Uc<UMN)))
;;;7468   		{
;;;7469   		if(npn_tz_cnt<TZNPN)
003e32  4f40              LDR      r7,|L1.16180|
;;;7470   			{
;;;7471   			npn_tz_cnt++;
;;;7472   			if(npn_tz_cnt==TZNPN)
;;;7473   				{
;;;7474   				npn_stat=npnsOFF;
003e34  4e40              LDR      r6,|L1.16184|
003e36  7800              LDRB     r0,[r0,#0]            ;7414  ; NPN_OUT
003e38  f04f0c00          MOV      r12,#0                ;7414
;;;7475   				}
;;;7476   			}
;;;7477   		}
;;;7478   	else if((load_U>UVNPN)&&(net_Ua>UMN)&&(net_Ub>UMN)&&(net_Uc>UMN))
;;;7479   		{
;;;7480   		if(npn_tz_cnt)
;;;7481   			{
;;;7482   			npn_tz_cnt--;
;;;7483   			if(npn_tz_cnt==0)
;;;7484   				{
;;;7485   				npn_stat=npnsON;
003e3c  f04f0801          MOV      r8,#1
003e40  b120              CBZ      r0,|L1.15948|
003e42  483e              LDR      r0,|L1.16188|
003e44  f9b05000          LDRSH    r5,[r0,#0]            ;7467  ; load_U
003e48  483d              LDR      r0,|L1.16192|
003e4a  e07b              B        |L1.16196|
                  |L1.15948|
003e4c  e0b6              B        |L1.16316|
003e4e  0000              DCW      0x0000
                  |L1.15952|
                          DCD      ica_cntrl_hndl
                  |L1.15956|
                          DCD      PWM_START
                  |L1.15960|
                          DCD      ica_u_necc
                  |L1.15964|
                          DCD      NUMIST
                  |L1.15968|
                          DCD      ||area_number.22||+0x20
                  |L1.15972|
                          DCD      sk_cnt
                  |L1.15976|
                          DCD      sk_stat
                  |L1.15980|
                          DCD      NUMSK
                  |L1.15984|
                          DCD      ||area_number.16||
                  |L1.15988|
                          DCD      ||.bss||+0x400
                  |L1.15992|
                          DCD      sk_av_cnt
                  |L1.15996|
                          DCD      sk_av_stat
                  |L1.16000|
                          DCD      sk_av_stat_old
                  |L1.16004|
                          DCD      SK_SIGN
                  |L1.16008|
003e88  534b2023          DCB      "SK #1 Alarm",0
003e8c  3120416c
003e90  61726d00
                  |L1.16020|
003e94  534b2023          DCB      "SK #2 Alarm",0
003e98  3220416c
003e9c  61726d00
                  |L1.16032|
003ea0  534b2023          DCB      "SK #3 Alarm",0
003ea4  3320416c
003ea8  61726d00
                  |L1.16044|
003eac  534b2023          DCB      "SK #4 Alarm",0
003eb0  3420416c
003eb4  61726d00
                  |L1.16056|
003eb8  534b2023          DCB      "SK #1 Alarm is off",0
003ebc  3120416c
003ec0  61726d20
003ec4  6973206f
003ec8  666600  
003ecb  00                DCB      0
                  |L1.16076|
003ecc  534b2023          DCB      "SK #2 Alarm is off",0
003ed0  3220416c
003ed4  61726d20
003ed8  6973206f
003edc  666600  
003edf  00                DCB      0
                  |L1.16096|
003ee0  534b2023          DCB      "SK #3 Alarm is off",0
003ee4  3320416c
003ee8  61726d20
003eec  6973206f
003ef0  666600  
003ef3  00                DCB      0
                  |L1.16116|
003ef4  534b2023          DCB      "SK #4 Alarm is off",0
003ef8  3420416c
003efc  61726d20
003f00  6973206f
003f04  666600  
003f07  00                DCB      0
                  |L1.16136|
                          DCD      sign_U
                  |L1.16140|
                          DCD      sign_I
                  |L1.16144|
                          DCD      bat
                  |L1.16148|
                          DCD      u_necc_up
                  |L1.16152|
                          DCD      TBAT
                  |L1.16156|
                          DCD      u_necc_dn
                  |L1.16160|
                          DCD      IKB
                  |L1.16164|
                          DCD      BAT_C_REAL
                  |L1.16168|
                          DCD      NUMBAT
                  |L1.16172|
                          DCD      superviser_cnt
                  |L1.16176|
                          DCD      NPN_OUT
                  |L1.16180|
                          DCD      npn_tz_cnt
                  |L1.16184|
                          DCD      npn_stat
                  |L1.16188|
                          DCD      load_U
                  |L1.16192|
                          DCD      UONPN
                  |L1.16196|
003f44  f9b09000          LDRSH    r9,[r0,#0]            ;7467  ; UONPN
003f48  48fe              LDR      r0,|L1.17220|
003f4a  4639              MOV      r1,r7                 ;7469
003f4c  454d              CMP      r5,r9                 ;7467
003f4e  f9b02000          LDRSH    r2,[r0,#0]            ;7467
003f52  48fd              LDR      r0,|L1.17224|
003f54  f9b11000          LDRSH    r1,[r1,#0]            ;7469
003f58  f9b03000          LDRSH    r3,[r0,#0]            ;7467
003f5c  48fb              LDR      r0,|L1.17228|
003f5e  f9b04000          LDRSH    r4,[r0,#0]            ;7467
003f62  48fb              LDR      r0,|L1.17232|
003f64  f9b00000          LDRSH    r0,[r0,#0]            ;7467
003f68  da13              BGE      |L1.16274|
003f6a  4282              CMP      r2,r0                 ;7467
003f6c  db03              BLT      |L1.16246|
003f6e  4283              CMP      r3,r0                 ;7467
003f70  db01              BLT      |L1.16246|
003f72  4284              CMP      r4,r0                 ;7467
003f74  da0d              BGE      |L1.16274|
                  |L1.16246|
003f76  48f7              LDR      r0,|L1.17236|
003f78  f9b02000          LDRSH    r2,[r0,#0]            ;7469  ; TZNPN
003f7c  4291              CMP      r1,r2                 ;7469
003f7e  da21              BGE      |L1.16324|
003f80  f1010101          ADD      r1,r1,#1              ;7471
003f84  b208              SXTH     r0,r1                 ;7471
003f86  8038              STRH     r0,[r7,#0]            ;7471
003f88  4290              CMP      r0,r2                 ;7472
003f8a  d11b              BNE      |L1.16324|
003f8c  f886c000          STRB     r12,[r6,#0]           ;7474
003f90  e018              B        |L1.16324|
                  |L1.16274|
003f92  f8dfc3c4          LDR      r12,|L1.17240|
003f96  f9bcc000          LDRSH    r12,[r12,#0]          ;7478  ; UVNPN
003f9a  4565              CMP      r5,r12                ;7478
003f9c  dd12              BLE      |L1.16324|
003f9e  4282              CMP      r2,r0                 ;7478
003fa0  dd10              BLE      |L1.16324|
003fa2  4283              CMP      r3,r0                 ;7478
003fa4  dd0e              BLE      |L1.16324|
003fa6  4284              CMP      r4,r0                 ;7478
003fa8  dd0c              BLE      |L1.16324|
003faa  b159              CBZ      r1,|L1.16324|
003fac  f1a10101          SUB      r1,r1,#1              ;7482
003fb0  b208              SXTH     r0,r1                 ;7482
003fb2  8038              STRH     r0,[r7,#0]            ;7482
003fb4  b930              CBNZ     r0,|L1.16324|
003fb6  f8868000          STRB     r8,[r6,#0]
003fba  e003              B        |L1.16324|
                  |L1.16316|
;;;7486   				}
;;;7487   			}
;;;7488   		}
;;;7489   	}
;;;7490   else
;;;7491   	{
;;;7492   	npn_tz_cnt=0;
003fbc  f8a7c000          STRH     r12,[r7,#0]
;;;7493   	npn_stat=npnsON;
003fc0  f8868000          STRB     r8,[r6,#0]
                  |L1.16324|
;;;7494   	}
;;;7495   
;;;7496   if(npn_stat==npnsOFF) mess_send(MESS2RELE_HNDL,PARAM_RELE_NPN,1,15);
003fc4  7830              LDRB     r0,[r6,#0]  ; npn_stat
003fc6  2800              CMP      r0,#0
003fc8  d107              BNE      |L1.16346|
003fca  e8bd03f0          POP      {r4-r9}
003fce  230f              MOVS     r3,#0xf
003fd0  2201              MOVS     r2,#1
003fd2  216e              MOVS     r1,#0x6e
003fd4  20d2              MOVS     r0,#0xd2
003fd6  f7ffbffe          B.W      mess_send
                  |L1.16346|
;;;7497   
;;;7498   
;;;7499   }
003fda  e8bd03f0          POP      {r4-r9}
003fde  4770              BX       lr
;;;7500   
                          ENDP

                  speedChargeHndl PROC
;;;7502   //-----------------------------------------------
;;;7503   void speedChargeHndl(void)
003fe0  e92d4ff8          PUSH     {r3-r11,lr}
;;;7504   {
;;;7505   /*
;;;7506   if(sp_ch_stat==scsOFF)
;;;7507   	{
;;;7508   	if((sk_stat[1]==1)&&(sk_stat_old[1]=0))
;;;7509   	}*/
;;;7510   	 
;;;7511   if(sp_ch_stat==scsSTEP1)
003fe4  4edd              LDR      r6,|L1.17244|
;;;7512   	{
;;;7513   	if(sp_ch_stat_old!=sp_ch_stat)
;;;7514   		{
;;;7515   		sp_ch_stat_cnt=5;
;;;7516   		}
;;;7517   	if(sp_ch_stat_cnt)
;;;7518   		{
;;;7519   		sp_ch_stat_cnt--;
;;;7520   		if(sp_ch_stat_cnt==0)
;;;7521   			{
;;;7522   			sp_ch_stat=scsERR1; 	//  ;
;;;7523   
;;;7524   			}
;;;7525   		}
;;;7526   	if(sk_stat[0]==1)sp_ch_stat=scsWRK;
003fe6  f8df8378          LDR      r8,|L1.17248|
003fea  4dde              LDR      r5,|L1.17252|
003fec  7832              LDRB     r2,[r6,#0]            ;7511  ; sp_ch_stat
003fee  2702              MOVS     r7,#2
003ff0  f8981000          LDRB     r1,[r8,#0]
003ff4  7828              LDRB     r0,[r5,#0]            ;7513
003ff6  4cdc              LDR      r4,|L1.17256|
003ff8  2a01              CMP      r2,#1                 ;7511
003ffa  d112              BNE      |L1.16418|
003ffc  2801              CMP      r0,#1                 ;7513
003ffe  d002              BEQ      |L1.16390|
004000  f04f0205          MOV      r2,#5                 ;7515
004004  8022              STRH     r2,[r4,#0]            ;7515
                  |L1.16390|
004006  f9b42000          LDRSH    r2,[r4,#0]            ;7517  ; sp_ch_stat_cnt
00400a  b13a              CBZ      r2,|L1.16412|
00400c  f1a20201          SUB      r2,r2,#1              ;7519
004010  b212              SXTH     r2,r2                 ;7519
004012  8022              STRH     r2,[r4,#0]            ;7519
004014  b912              CBNZ     r2,|L1.16412|
004016  f04f0203          MOV      r2,#3                 ;7522
00401a  7032              STRB     r2,[r6,#0]            ;7522
                  |L1.16412|
00401c  2901              CMP      r1,#1
00401e  d100              BNE      |L1.16418|
004020  7037              STRB     r7,[r6,#0]
                  |L1.16418|
;;;7527   	}
;;;7528   
;;;7529   if(sp_ch_stat==scsWRK)
004022  7832              LDRB     r2,[r6,#0]  ; sp_ch_stat
004024  2a02              CMP      r2,#2
004026  d116              BNE      |L1.16470|
;;;7530   	{
;;;7531   	if(sp_ch_stat_old!=sp_ch_stat)
;;;7532   		{
;;;7533   		sp_ch_wrk_cnt=(signed long)speedChrgTimeInHour*100L;
004028  4bd0              LDR      r3,|L1.17260|
00402a  2802              CMP      r0,#2                 ;7531
00402c  d007              BEQ      |L1.16446|
00402e  4ad0              LDR      r2,|L1.17264|
004030  f04f0c64          MOV      r12,#0x64
004034  f9b22000          LDRSH    r2,[r2,#0]  ; speedChrgTimeInHour
004038  fb02f20c          MUL      r2,r2,r12
00403c  601a              STR      r2,[r3,#0]  ; sp_ch_wrk_cnt
                  |L1.16446|
;;;7534   		}
;;;7535   	sp_ch_wrk_cnt--;
00403e  681a              LDR      r2,[r3,#0]  ; sp_ch_wrk_cnt
004040  f1a20201          SUB      r2,r2,#1
004044  601a              STR      r2,[r3,#0]  ; sp_ch_wrk_cnt
;;;7536   	if(sp_ch_wrk_cnt==0)
004046  b912              CBNZ     r2,|L1.16462|
;;;7537   		{
;;;7538   		sp_ch_stat=scsOFF;
004048  f04f0200          MOV      r2,#0
00404c  7032              STRB     r2,[r6,#0]
                  |L1.16462|
;;;7539   		}
;;;7540   	if(sk_stat[0]==0)sp_ch_stat=scsERR2;
00404e  b911              CBNZ     r1,|L1.16470|
004050  f04f0104          MOV      r1,#4
004054  7031              STRB     r1,[r6,#0]
                  |L1.16470|
;;;7541   	
;;;7542   	}
;;;7543   
;;;7544   if(sp_ch_stat==scsERR1)		//   
004056  7831              LDRB     r1,[r6,#0]  ; sp_ch_stat
;;;7545   	{
;;;7546   	if((sp_ch_stat_old!=sp_ch_stat)||(sp_ch_stat_cnt==0))
;;;7547   		{
;;;7548   		sp_ch_stat_cnt=10;
004058  f04f090a          MOV      r9,#0xa
;;;7549   		}
;;;7550   	sp_ch_stat_cnt--;
;;;7551   	if((sp_ch_stat_cnt==10)||(sp_ch_stat_cnt==9))
;;;7552   		{
;;;7553   		show_mess(	"     ",
00405c  f2413a88          MOV      r10,#0x1388
004060  2903              CMP      r1,#3                 ;7544
004062  d116              BNE      |L1.16530|
004064  2803              CMP      r0,#3                 ;7546
004066  d101              BNE      |L1.16492|
004068  8820              LDRH     r0,[r4,#0]            ;7546  ; sp_ch_stat_cnt
00406a  b908              CBNZ     r0,|L1.16496|
                  |L1.16492|
00406c  f8a49000          STRH     r9,[r4,#0]            ;7548
                  |L1.16496|
004070  8820              LDRH     r0,[r4,#0]            ;7550  ; sp_ch_stat_cnt
004072  f1a00001          SUB      r0,r0,#1              ;7550
004076  b200              SXTH     r0,r0                 ;7550
004078  8020              STRH     r0,[r4,#0]            ;7550
00407a  280a              CMP      r0,#0xa               ;7551
00407c  d001              BEQ      |L1.16514|
00407e  2809              CMP      r0,#9                 ;7551
004080  d107              BNE      |L1.16530|
                  |L1.16514|
004082  a3bc              ADR      r3,|L1.17268|
004084  a2c1              ADR      r2,|L1.17292|
004086  a1c7              ADR      r1,|L1.17316|
004088  a0cc              ADR      r0,|L1.17340|
00408a  f8cda000          STR      r10,[sp,#0]
00408e  f7fffffe          BL       show_mess
                  |L1.16530|
;;;7554   					"         ",
;;;7555   					"             ",
;;;7556   					"   !!  ",
;;;7557   					5000);
;;;7558   		}
;;;7559   	}
;;;7560   if(sp_ch_stat==scsERR2)		//   
004092  7830              LDRB     r0,[r6,#0]  ; sp_ch_stat
004094  2804              CMP      r0,#4
004096  d11c              BNE      |L1.16594|
;;;7561   	{
;;;7562   	if((sp_ch_stat_old!=sp_ch_stat)||(sp_ch_stat_cnt==0))
004098  7828              LDRB     r0,[r5,#0]  ; sp_ch_stat_old
00409a  2804              CMP      r0,#4
00409c  d101              BNE      |L1.16546|
00409e  8820              LDRH     r0,[r4,#0]  ; sp_ch_stat_cnt
0040a0  b908              CBNZ     r0,|L1.16550|
                  |L1.16546|
;;;7563   		{
;;;7564   		sp_ch_stat_cnt=10;
0040a2  f8a49000          STRH     r9,[r4,#0]
                  |L1.16550|
;;;7565   		}
;;;7566   	sp_ch_stat_cnt--;
0040a6  8820              LDRH     r0,[r4,#0]  ; sp_ch_stat_cnt
0040a8  f1a00001          SUB      r0,r0,#1
0040ac  b200              SXTH     r0,r0
0040ae  8020              STRH     r0,[r4,#0]
;;;7567   	if((sp_ch_stat_cnt==10)||(sp_ch_stat_cnt==9))
0040b0  280a              CMP      r0,#0xa
0040b2  d001              BEQ      |L1.16568|
0040b4  2809              CMP      r0,#9
0040b6  d107              BNE      |L1.16584|
                  |L1.16568|
;;;7568   		{
;;;7569   		show_mess(	"     ",
0040b8  a3c6              ADR      r3,|L1.17364|
0040ba  a2cc              ADR      r2,|L1.17388|
0040bc  a1d1              ADR      r1,|L1.17412|
0040be  a0bf              ADR      r0,|L1.17340|
0040c0  f8cda000          STR      r10,[sp,#0]
0040c4  f7fffffe          BL       show_mess
                  |L1.16584|
;;;7570   					"        ",
;;;7571   					"          ",
;;;7572   					"    !!!   ",
;;;7573   					5000);
;;;7574   		}
;;;7575   	if(sk_stat[0]==1)sp_ch_stat=scsWRK;
0040c8  f8980000          LDRB     r0,[r8,#0]  ; sk_stat
0040cc  2801              CMP      r0,#1
0040ce  d100              BNE      |L1.16594|
0040d0  7037              STRB     r7,[r6,#0]
                  |L1.16594|
;;;7576   	}
;;;7577   
;;;7578   
;;;7579   sp_ch_stat_old=sp_ch_stat;
0040d2  7830              LDRB     r0,[r6,#0]  ; sp_ch_stat
0040d4  7028              STRB     r0,[r5,#0]
;;;7580   
;;;7581   
;;;7582   
;;;7583   /*
;;;7584   if(speedChIsOn)
;;;7585   	{
;;;7586   	speedChTimeCnt++;
;;;7587   	if(speedChTimeCnt>=((signed long)speedChrgTimeInHour*3600L))
;;;7588   		{
;;;7589   		speedChIsOn=0;
;;;7590   		}
;;;7591   	if(speedChrgBlckStat)
;;;7592   		{
;;;7593   		speedChIsOn=0;
;;;7594   		speedChTimeCnt=0;
;;;7595   		}
;;;7596   	}
;;;7597   
;;;7598   
;;;7599   
;;;7600   if(speedChrgAvtEn)
;;;7601   	{
;;;7602   	if(!speedChIsOn)
;;;7603   		{
;;;7604   		if((load_U<u_necc)&&((u_necc-load_U)>speedChrgDU)&&(abs(Ib_ips_termokompensat/10-IZMAX)<5)&&(!speedChrgBlckStat))
;;;7605   			{
;;;7606   			speedChIsOn=1;
;;;7607   			}
;;;7608   		}
;;;7609   	}
;;;7610   
;;;7611   
;;;7612   
;;;7613   if((speedChrgBlckSrc!=1)&&(speedChrgBlckSrc!=2)) speedChrgBlckStat=0;
;;;7614   else
;;;7615   	{
;;;7616   	speedChrgBlckStat=0;
;;;7617   	if(speedChrgBlckSrc==1)
;;;7618   		{
;;;7619   		if(((speedChrgBlckLog==0)&&(adc_buff_[11]>2000)) || ((speedChrgBlckLog==1)&&(adc_buff_[11]<2000))) speedChrgBlckStat=1;
;;;7620   		}
;;;7621   	else if(speedChrgBlckSrc==2)
;;;7622   		{
;;;7623   		if(((speedChrgBlckLog==0)&&(adc_buff_[13]>2000)) || ((speedChrgBlckLog==1)&&(adc_buff_[13]<2000))) speedChrgBlckStat=1;
;;;7624   		}
;;;7625   	}
;;;7626   */
;;;7627   /*
;;;7628   if(speedChrgBlckStat==1)
;;;7629   	{
;;;7630   
;;;7631   	//speedChargeStartStop();
;;;7632   
;;;7633   	speedChrgShowCnt++;
;;;7634   	if(speedChrgShowCnt>=30)	
;;;7635   		{
;;;7636   		speedChrgShowCnt=0;
;;;7637   		show_mess(	"          ",
;;;7638   					"               ",
;;;7639   					"     !!!    ",
;;;7640   					"                    ",
;;;7641   					5000);
;;;7642   		}
;;;7643   	} 
;;;7644   else speedChrgShowCnt=0;  */
;;;7645   
;;;7646   
;;;7647   }
0040d6  e8bd8ff8          POP      {r3-r11,pc}
;;;7648   
                          ENDP

                  speedChargeStartStop PROC
;;;7649   //-----------------------------------------------
;;;7650   void speedChargeStartStop(void)
0040da  48a0              LDR      r0,|L1.17244|
;;;7651   {
;;;7652   /*if(speedChIsOn)
;;;7653   	{
;;;7654   	speedChIsOn=0;
;;;7655   	}
;;;7656   
;;;7657   else
;;;7658   	{
;;;7659   	if(speedChrgBlckStat==0)
;;;7660   		{
;;;7661   		speedChIsOn=1;
;;;7662   		speedChTimeCnt=0;
;;;7663   		}
;;;7664   	else
;;;7665   		{
;;;7666   		show_mess(	"          ",
;;;7667   	          		"               ",
;;;7668   	          		"    !   ",
;;;7669   	          		"                    ",2000);	 
;;;7670   		}
;;;7671   	}*/
;;;7672   
;;;7673   if(sp_ch_stat!=scsOFF)
0040dc  7801              LDRB     r1,[r0,#0]  ; sp_ch_stat
0040de  b119              CBZ      r1,|L1.16616|
;;;7674   	{
;;;7675   	sp_ch_stat=scsOFF;
0040e0  f04f0100          MOV      r1,#0
0040e4  7001              STRB     r1,[r0,#0]
;;;7676   	}
;;;7677   
;;;7678   else
;;;7679   	{
;;;7680   	sp_ch_stat=scsSTEP1;
;;;7681   	}
;;;7682   }
0040e6  4770              BX       lr
                  |L1.16616|
0040e8  f04f0101          MOV      r1,#1                 ;7680
0040ec  7001              STRB     r1,[r0,#0]            ;7680
0040ee  4770              BX       lr
;;;7683   
                          ENDP

                  averageChargeHndl PROC
;;;7684   //-----------------------------------------------
;;;7685   void averageChargeHndl(void)
0040f0  e92d4ffe          PUSH     {r1-r11,lr}
;;;7686   {
;;;7687   /*
;;;7688   if(hv_vz_stat==hvsOFF)
;;;7689   	{
;;;7690   	if((sk_stat[1]==1)&&(sk_stat_old[1]=0))
;;;7691   	} */
;;;7692   if(hv_vz_stat==hvsSTEP1)
0040f4  f8dfa324          LDR      r10,|L1.17436|
;;;7693   	{
;;;7694   	if(hv_vz_stat_old!=hv_vz_stat)
0040f8  4dc9              LDR      r5,|L1.17440|
;;;7695   		{
;;;7696   		hv_vz_stat_cnt=5;
0040fa  2705              MOVS     r7,#5
0040fc  f89a1000          LDRB     r1,[r10,#0]           ;7692  ; hv_vz_stat
004100  7828              LDRB     r0,[r5,#0]            ;7694
;;;7697   		}
;;;7698   	if(hv_vz_stat_cnt)
;;;7699   		{
;;;7700   		hv_vz_stat_cnt--;
;;;7701   		if(hv_vz_stat_cnt==0)
;;;7702   			{
;;;7703   			hv_vz_stat=hvsERR1; 	//  ;
;;;7704   
;;;7705   			}
;;;7706   		}
;;;7707   	if(sk_stat[0]==1)hv_vz_stat=hvsSTEP2;
004102  4e97              LDR      r6,|L1.17248|
004104  4cc7              LDR      r4,|L1.17444|
004106  2901              CMP      r1,#1                 ;7692
004108  d115              BNE      |L1.16694|
00410a  2801              CMP      r0,#1                 ;7694
00410c  d000              BEQ      |L1.16656|
00410e  8027              STRH     r7,[r4,#0]            ;7696
                  |L1.16656|
004110  f9b41000          LDRSH    r1,[r4,#0]            ;7698  ; hv_vz_stat_cnt
004114  b141              CBZ      r1,|L1.16680|
004116  f1a10101          SUB      r1,r1,#1              ;7700
00411a  b209              SXTH     r1,r1                 ;7700
00411c  8021              STRH     r1,[r4,#0]            ;7700
00411e  b919              CBNZ     r1,|L1.16680|
004120  f04f0106          MOV      r1,#6                 ;7703
004124  f88a1000          STRB     r1,[r10,#0]           ;7703
                  |L1.16680|
004128  7831              LDRB     r1,[r6,#0]  ; sk_stat
00412a  2901              CMP      r1,#1
00412c  d103              BNE      |L1.16694|
00412e  f04f0102          MOV      r1,#2
004132  f88a1000          STRB     r1,[r10,#0]
                  |L1.16694|
;;;7708   	}
;;;7709   
;;;7710   if(hv_vz_stat==hvsSTEP2)
004136  f89a1000          LDRB     r1,[r10,#0]  ; hv_vz_stat
00413a  2902              CMP      r1,#2
00413c  d12c              BNE      |L1.16792|
;;;7711   	{
;;;7712   	if((hv_vz_stat_old!=hv_vz_stat)||(hv_vz_stat_cnt==0))
00413e  2802              CMP      r0,#2
004140  d101              BNE      |L1.16710|
004142  8820              LDRH     r0,[r4,#0]  ; hv_vz_stat_cnt
004144  b910              CBNZ     r0,|L1.16716|
                  |L1.16710|
;;;7713   		{
;;;7714   		hv_vz_stat_cnt=15;
004146  f04f000f          MOV      r0,#0xf
00414a  8020              STRH     r0,[r4,#0]
                  |L1.16716|
;;;7715   		}
;;;7716   	hv_vz_stat_cnt--;
00414c  8820              LDRH     r0,[r4,#0]  ; hv_vz_stat_cnt
00414e  f1a00001          SUB      r0,r0,#1
004152  b200              SXTH     r0,r0
004154  8020              STRH     r0,[r4,#0]
;;;7717   	if((hv_vz_stat_cnt==14)/*||(hv_vz_stat_cnt==13)||(hv_vz_stat_cnt==12)*/)
;;;7718   		{
;;;7719   		show_mess_number(	"     !!!    ",
004156  f44f5896          MOV      r8,#0x12c0
00415a  280e              CMP      r0,#0xe               ;7717
00415c  d10c              BNE      |L1.16760|
00415e  49b2              LDR      r1,|L1.17448|
004160  2001              MOVS     r0,#1
004162  a3b2              ADR      r3,|L1.17452|
004164  f9b11000          LDRSH    r1,[r1,#0]  ; UVZ
004168  9002              STR      r0,[sp,#8]
00416a  e9cd8100          STRD     r8,r1,[sp,#0]
00416e  a2b5              ADR      r2,|L1.17476|
004170  a1ba              ADR      r1,|L1.17500|
004172  a0c0              ADR      r0,|L1.17524|
004174  f7fffffe          BL       show_mess_number
                  |L1.16760|
;;;7720   					"     ",
;;;7721   					"       @",
;;;7722   					" !!",
;;;7723   					4800,UVZ,1);
;;;7724   		}
;;;7725   	if((hv_vz_stat_cnt==8)/*||(hv_vz_stat_cnt==7)||(hv_vz_stat_cnt==6)*/)
004178  8820              LDRH     r0,[r4,#0]  ; hv_vz_stat_cnt
00417a  2808              CMP      r0,#8
00417c  d107              BNE      |L1.16782|
;;;7726   		{
;;;7727   		show_mess(	"         ",
00417e  a3c3              ADR      r3,|L1.17548|
004180  a2c8              ADR      r2,|L1.17572|
004182  a1ce              ADR      r1,|L1.17596|
004184  a0d3              ADR      r0,|L1.17620|
004186  f8cd8000          STR      r8,[sp,#0]
00418a  f7fffffe          BL       show_mess
                  |L1.16782|
;;;7728   					"            ",
;;;7729   					"         ",
;;;7730   					"              ",
;;;7731   					4800);
;;;7732   		} 
;;;7733   	if(sk_stat[1]==1)hv_vz_stat=hvsWRK;
00418e  7870              LDRB     r0,[r6,#1]  ; sk_stat
004190  2801              CMP      r0,#1
004192  d101              BNE      |L1.16792|
004194  f88a7000          STRB     r7,[r10,#0]
                  |L1.16792|
;;;7734   	}
;;;7735   
;;;7736   if(hv_vz_stat==hvsSTEP3)
004198  f89a0000          LDRB     r0,[r10,#0]  ; hv_vz_stat
;;;7737   	{
;;;7738   	if((hv_vz_stat_old!=hv_vz_stat)||(hv_vz_stat_cnt==0))
;;;7739   		{
;;;7740   		hv_vz_stat_cnt=10;
00419c  f04f080a          MOV      r8,#0xa
;;;7741   		}
;;;7742   	hv_vz_stat_cnt--;
;;;7743   	if((hv_vz_stat_cnt==10)||(hv_vz_stat_cnt==9))
;;;7744   		{
;;;7745   		show_mess(	"            ",
0041a0  f2413988          MOV      r9,#0x1388
0041a4  2803              CMP      r0,#3                 ;7736
0041a6  d11c              BNE      |L1.16866|
0041a8  7828              LDRB     r0,[r5,#0]            ;7738  ; hv_vz_stat_old
0041aa  2803              CMP      r0,#3                 ;7738
0041ac  d101              BNE      |L1.16818|
0041ae  8820              LDRH     r0,[r4,#0]            ;7738  ; hv_vz_stat_cnt
0041b0  b908              CBNZ     r0,|L1.16822|
                  |L1.16818|
0041b2  f8a48000          STRH     r8,[r4,#0]            ;7740
                  |L1.16822|
0041b6  8820              LDRH     r0,[r4,#0]            ;7742  ; hv_vz_stat_cnt
0041b8  f1a00001          SUB      r0,r0,#1              ;7742
0041bc  b200              SXTH     r0,r0                 ;7742
0041be  8020              STRH     r0,[r4,#0]            ;7742
0041c0  280a              CMP      r0,#0xa               ;7743
0041c2  d001              BEQ      |L1.16840|
0041c4  2809              CMP      r0,#9                 ;7743
0041c6  d107              BNE      |L1.16856|
                  |L1.16840|
0041c8  a3c8              ADR      r3,|L1.17644|
0041ca  a2ce              ADR      r2,|L1.17668|
0041cc  a1d3              ADR      r1,|L1.17692|
0041ce  a0d9              ADR      r0,|L1.17716|
0041d0  f8cd9000          STR      r9,[sp,#0]
0041d4  f7fffffe          BL       show_mess
                  |L1.16856|
;;;7746   					"             ",
;;;7747   					"       ",
;;;7748   					"               ",
;;;7749   					5000);
;;;7750   		}
;;;7751   	if(sk_stat[1]==1)hv_vz_stat=hvsWRK;
0041d8  7870              LDRB     r0,[r6,#1]  ; sk_stat
0041da  2801              CMP      r0,#1
0041dc  d101              BNE      |L1.16866|
0041de  f88a7000          STRB     r7,[r10,#0]
                  |L1.16866|
;;;7752   	}
;;;7753   
;;;7754   if(hv_vz_stat==hvsWRK)
0041e2  f89a0000          LDRB     r0,[r10,#0]  ; hv_vz_stat
0041e6  f04f0b00          MOV      r11,#0
0041ea  2805              CMP      r0,#5
0041ec  d127              BNE      |L1.16958|
;;;7755   	{
;;;7756   	if(hv_vz_stat_old!=hv_vz_stat)
0041ee  7828              LDRB     r0,[r5,#0]  ; hv_vz_stat_old
;;;7757   		{
;;;7758   		hv_vz_wrk_cnt=3600L/*100L*/*((long)VZ_HR);
0041f0  4ad6              LDR      r2,|L1.17740|
;;;7759   		hv_vz_up_cnt=0L;
0041f2  49d7              LDR      r1,|L1.17744|
0041f4  2805              CMP      r0,#5                 ;7756
0041f6  d009              BEQ      |L1.16908|
0041f8  48d6              LDR      r0,|L1.17748|
0041fa  f44f6361          MOV      r3,#0xe10             ;7758
0041fe  f9b00000          LDRSH    r0,[r0,#0]            ;7758  ; VZ_HR
004202  fb00f003          MUL      r0,r0,r3              ;7758
004206  6010              STR      r0,[r2,#0]            ;7758  ; hv_vz_wrk_cnt
004208  f8c1b000          STR      r11,[r1,#0]  ; hv_vz_up_cnt
                  |L1.16908|
;;;7760   		}
;;;7761   	hv_vz_wrk_cnt--;
00420c  6810              LDR      r0,[r2,#0]  ; hv_vz_wrk_cnt
00420e  f1a00001          SUB      r0,r0,#1
004212  6010              STR      r0,[r2,#0]  ; hv_vz_wrk_cnt
;;;7762   	hv_vz_up_cnt++;
004214  680a              LDR      r2,[r1,#0]  ; hv_vz_up_cnt
004216  f1020201          ADD      r2,r2,#1
00421a  600a              STR      r2,[r1,#0]  ; hv_vz_up_cnt
;;;7763   
;;;7764   	if(hv_vz_wrk_cnt==0)
00421c  b918              CBNZ     r0,|L1.16934|
;;;7765   		{
;;;7766   		hv_vz_stat=hvsERR4;
00421e  f04f0009          MOV      r0,#9
004222  f88a0000          STRB     r0,[r10,#0]
                  |L1.16934|
;;;7767   		}
;;;7768   	if(sk_stat[0]==0)hv_vz_stat=hvsERR2;
004226  7830              LDRB     r0,[r6,#0]  ; sk_stat
004228  b918              CBNZ     r0,|L1.16946|
00422a  f04f0007          MOV      r0,#7
00422e  f88a0000          STRB     r0,[r10,#0]
                  |L1.16946|
;;;7769   	if(sk_stat[1]==0)hv_vz_stat=hvsERR3;
004232  7870              LDRB     r0,[r6,#1]  ; sk_stat
004234  b918              CBNZ     r0,|L1.16958|
004236  f04f0008          MOV      r0,#8
00423a  f88a0000          STRB     r0,[r10,#0]
                  |L1.16958|
;;;7770   	}
;;;7771   
;;;7772   if(hv_vz_stat==hvsERR1)		//   
00423e  f89a0000          LDRB     r0,[r10,#0]  ; hv_vz_stat
004242  2806              CMP      r0,#6
004244  d117              BNE      |L1.17014|
;;;7773   	{
;;;7774   	if((hv_vz_stat_old!=hv_vz_stat)||(hv_vz_stat_cnt==0))
004246  7828              LDRB     r0,[r5,#0]  ; hv_vz_stat_old
004248  2806              CMP      r0,#6
00424a  d101              BNE      |L1.16976|
00424c  8820              LDRH     r0,[r4,#0]  ; hv_vz_stat_cnt
00424e  b908              CBNZ     r0,|L1.16980|
                  |L1.16976|
;;;7775   		{
;;;7776   		hv_vz_stat_cnt=10;
004250  f8a48000          STRH     r8,[r4,#0]
                  |L1.16980|
;;;7777   		}
;;;7778   	hv_vz_stat_cnt--;
004254  8820              LDRH     r0,[r4,#0]  ; hv_vz_stat_cnt
004256  f1a00001          SUB      r0,r0,#1
00425a  b200              SXTH     r0,r0
00425c  8020              STRH     r0,[r4,#0]
;;;7779   	if((hv_vz_stat_cnt==10)||(hv_vz_stat_cnt==9))
00425e  280a              CMP      r0,#0xa
004260  d001              BEQ      |L1.16998|
004262  2809              CMP      r0,#9
004264  d107              BNE      |L1.17014|
                  |L1.16998|
;;;7780   		{
;;;7781   		show_mess(	"  ",
004266  a343              ADR      r3,|L1.17268|
004268  a248              ADR      r2,|L1.17292|
00426a  a14e              ADR      r1,|L1.17316|
00426c  a0ba              ADR      r0,|L1.17752|
00426e  f8cd9000          STR      r9,[sp,#0]
004272  f7fffffe          BL       show_mess
                  |L1.17014|
;;;7782   					"         ",
;;;7783   					"             ",
;;;7784   					"   !!  ",
;;;7785   					5000);
;;;7786   		}
;;;7787   	}
;;;7788   if(hv_vz_stat==hvsERR2)		//   
004276  f89a0000          LDRB     r0,[r10,#0]  ; hv_vz_stat
00427a  2807              CMP      r0,#7
00427c  d11c              BNE      |L1.17080|
;;;7789   	{
;;;7790   	if((hv_vz_stat_old!=hv_vz_stat)||(hv_vz_stat_cnt==0))
00427e  7828              LDRB     r0,[r5,#0]  ; hv_vz_stat_old
004280  2807              CMP      r0,#7
004282  d101              BNE      |L1.17032|
004284  8820              LDRH     r0,[r4,#0]  ; hv_vz_stat_cnt
004286  b908              CBNZ     r0,|L1.17036|
                  |L1.17032|
;;;7791   		{
;;;7792   		hv_vz_stat_cnt=10;
004288  f8a48000          STRH     r8,[r4,#0]
                  |L1.17036|
;;;7793   		}
;;;7794   	hv_vz_stat_cnt--;
00428c  8820              LDRH     r0,[r4,#0]  ; hv_vz_stat_cnt
00428e  f1a00001          SUB      r0,r0,#1
004292  b200              SXTH     r0,r0
004294  8020              STRH     r0,[r4,#0]
;;;7795   	if((hv_vz_stat_cnt==10)||(hv_vz_stat_cnt==9))
004296  280a              CMP      r0,#0xa
004298  d001              BEQ      |L1.17054|
00429a  2809              CMP      r0,#9
00429c  d107              BNE      |L1.17070|
                  |L1.17054|
;;;7796   		{
;;;7797   		show_mess(	"  ",
00429e  a34d              ADR      r3,|L1.17364|
0042a0  a252              ADR      r2,|L1.17388|
0042a2  a158              ADR      r1,|L1.17412|
0042a4  a0ac              ADR      r0,|L1.17752|
0042a6  f8cd9000          STR      r9,[sp,#0]
0042aa  f7fffffe          BL       show_mess
                  |L1.17070|
;;;7798   					"        ",
;;;7799   					"          ",
;;;7800   					"    !!!   ",
;;;7801   					5000);
;;;7802   		}
;;;7803   	if(sk_stat[0]==1)hv_vz_stat=hvsWRK;
0042ae  7830              LDRB     r0,[r6,#0]  ; sk_stat
0042b0  2801              CMP      r0,#1
0042b2  d101              BNE      |L1.17080|
0042b4  f88a7000          STRB     r7,[r10,#0]
                  |L1.17080|
;;;7804   	}
;;;7805   
;;;7806   if(hv_vz_stat==hvsERR3)		//  " "
0042b8  f89a0000          LDRB     r0,[r10,#0]  ; hv_vz_stat
0042bc  2808              CMP      r0,#8
0042be  d11c              BNE      |L1.17146|
;;;7807   	{
;;;7808   	if((hv_vz_stat_old!=hv_vz_stat)||(hv_vz_stat_cnt==0))
0042c0  7828              LDRB     r0,[r5,#0]  ; hv_vz_stat_old
0042c2  2808              CMP      r0,#8
0042c4  d101              BNE      |L1.17098|
0042c6  8820              LDRH     r0,[r4,#0]  ; hv_vz_stat_cnt
0042c8  b908              CBNZ     r0,|L1.17102|
                  |L1.17098|
;;;7809   		{
;;;7810   		hv_vz_stat_cnt=10;
0042ca  f8a48000          STRH     r8,[r4,#0]
                  |L1.17102|
;;;7811   		}
;;;7812   	hv_vz_stat_cnt--;
0042ce  8820              LDRH     r0,[r4,#0]  ; hv_vz_stat_cnt
0042d0  f1a00001          SUB      r0,r0,#1
0042d4  b200              SXTH     r0,r0
0042d6  8020              STRH     r0,[r4,#0]
;;;7813   	if((hv_vz_stat_cnt==10)||(hv_vz_stat_cnt==9))
0042d8  280a              CMP      r0,#0xa
0042da  d001              BEQ      |L1.17120|
0042dc  2809              CMP      r0,#9
0042de  d107              BNE      |L1.17136|
                  |L1.17120|
;;;7814   		{
;;;7815   		show_mess(	"  ",
0042e0  a3a3              ADR      r3,|L1.17776|
0042e2  a2a9              ADR      r2,|L1.17800|
0042e4  a1ae              ADR      r1,|L1.17824|
0042e6  a09c              ADR      r0,|L1.17752|
0042e8  f8cd9000          STR      r9,[sp,#0]
0042ec  f7fffffe          BL       show_mess
                  |L1.17136|
;;;7816   					"      ",
;;;7817   					"      ",
;;;7818   					"    !!!     ",
;;;7819   					5000);
;;;7820   		}
;;;7821   	if(sk_stat[1]==1)hv_vz_stat=hvsWRK;
0042f0  7870              LDRB     r0,[r6,#1]  ; sk_stat
0042f2  2801              CMP      r0,#1
0042f4  d101              BNE      |L1.17146|
0042f6  f88a7000          STRB     r7,[r10,#0]
                  |L1.17146|
;;;7822   	}
;;;7823   if(hv_vz_stat==hvsERR4)		//    
0042fa  f89a0000          LDRB     r0,[r10,#0]  ; hv_vz_stat
0042fe  2809              CMP      r0,#9
004300  d11b              BNE      |L1.17210|
;;;7824   	{
;;;7825   	if((hv_vz_stat_old!=hv_vz_stat)||(hv_vz_stat_cnt==0))
004302  7828              LDRB     r0,[r5,#0]  ; hv_vz_stat_old
004304  2809              CMP      r0,#9
004306  d101              BNE      |L1.17164|
004308  8820              LDRH     r0,[r4,#0]  ; hv_vz_stat_cnt
00430a  b908              CBNZ     r0,|L1.17168|
                  |L1.17164|
;;;7826   		{
;;;7827   		hv_vz_stat_cnt=10;
00430c  f8a48000          STRH     r8,[r4,#0]
                  |L1.17168|
;;;7828   		}
;;;7829   	hv_vz_stat_cnt--;
004310  8820              LDRH     r0,[r4,#0]  ; hv_vz_stat_cnt
004312  f1a00001          SUB      r0,r0,#1
004316  b200              SXTH     r0,r0
004318  8020              STRH     r0,[r4,#0]
;;;7830   	if((hv_vz_stat_cnt==10)||(hv_vz_stat_cnt==9))
00431a  280a              CMP      r0,#0xa
00431c  d001              BEQ      |L1.17186|
00431e  2809              CMP      r0,#9
004320  d107              BNE      |L1.17202|
                  |L1.17186|
;;;7831   		{
;;;7832   		show_mess(	"           ",
004322  a372              ADR      r3,|L1.17644|
004324  a277              ADR      r2,|L1.17668|
004326  a17d              ADR      r1,|L1.17692|
004328  a0a3              ADR      r0,|L1.17848|
00432a  f8cd9000          STR      r9,[sp,#0]
00432e  f7fffffe          BL       show_mess
                  |L1.17202|
;;;7833   					"             ",
;;;7834   					"       ",
;;;7835   					"               ",
;;;7836   					5000);
;;;7837   		}
;;;7838   	if(sk_stat[1]==0)hv_vz_stat=hvsOFF;
004332  7870              LDRB     r0,[r6,#1]  ; sk_stat
004334  b908              CBNZ     r0,|L1.17210|
004336  f88ab000          STRB     r11,[r10,#0]
                  |L1.17210|
;;;7839   	}
;;;7840   hv_vz_stat_old=hv_vz_stat;
00433a  f89a0000          LDRB     r0,[r10,#0]  ; hv_vz_stat
00433e  7028              STRB     r0,[r5,#0]
;;;7841   /*
;;;7842   if(speedChIsOn)
;;;7843   	{
;;;7844   	speedChTimeCnt++;
;;;7845   	if(speedChTimeCnt>=((signed long)speedChrgTimeInHour*3600L))
;;;7846   		{
;;;7847   		speedChIsOn=0;
;;;7848   		}
;;;7849   	if(speedChrgBlckStat)
;;;7850   		{
;;;7851   		speedChIsOn=0;
;;;7852   		speedChTimeCnt=0;
;;;7853   		}
;;;7854   	}
;;;7855   
;;;7856   
;;;7857   
;;;7858   if(speedChrgAvtEn)
;;;7859   	{
;;;7860   	if(!speedChIsOn)
;;;7861   		{
;;;7862   		if((load_U<u_necc)&&((u_necc-load_U)>speedChrgDU)&&(abs(Ib_ips_termokompensat/10-IZMAX)<5)&&(!speedChrgBlckStat))
;;;7863   			{
;;;7864   			speedChIsOn=1;
;;;7865   			}
;;;7866   		}
;;;7867   	}
;;;7868   
;;;7869   
;;;7870   
;;;7871   if((speedChrgBlckSrc!=1)&&(speedChrgBlckSrc!=2)) speedChrgBlckStat=0;
;;;7872   else
;;;7873   	{
;;;7874   	speedChrgBlckStat=0;
;;;7875   	if(speedChrgBlckSrc==1)
;;;7876   		{
;;;7877   		if(((speedChrgBlckLog==0)&&(adc_buff_[11]>2000)) || ((speedChrgBlckLog==1)&&(adc_buff_[11]<2000))) speedChrgBlckStat=1;
;;;7878   		}
;;;7879   	else if(speedChrgBlckSrc==2)
;;;7880   		{
;;;7881   		if(((speedChrgBlckLog==0)&&(adc_buff_[13]>2000)) || ((speedChrgBlckLog==1)&&(adc_buff_[13]<2000))) speedChrgBlckStat=1;
;;;7882   		}
;;;7883   	}
;;;7884   
;;;7885   
;;;7886   if(speedChrgBlckStat==1)
;;;7887   	{
;;;7888   
;;;7889   	//speedChargeStartStop();
;;;7890   
;;;7891   	speedChrgShowCnt++;
;;;7892   	if(speedChrgShowCnt>=30)	
;;;7893   		{
;;;7894   		speedChrgShowCnt=0;
;;;7895   		show_mess(	"          ",
;;;7896   					"               ",
;;;7897   					"     !!!    ",
;;;7898   					"                    ",
;;;7899   					5000);
;;;7900   		}
;;;7901   	}
;;;7902   else speedChrgShowCnt=0;
;;;7903   
;;;7904   */
;;;7905   }
004340  e8bd8ffe          POP      {r1-r11,pc}
                  |L1.17220|
                          DCD      net_Ua
                  |L1.17224|
                          DCD      net_Ub
                  |L1.17228|
                          DCD      net_Uc
                  |L1.17232|
                          DCD      UMN
                  |L1.17236|
                          DCD      TZNPN
                  |L1.17240|
                          DCD      UVNPN
                  |L1.17244|
                          DCD      sp_ch_stat
                  |L1.17248|
                          DCD      sk_stat
                  |L1.17252|
                          DCD      sp_ch_stat_old
                  |L1.17256|
                          DCD      sp_ch_stat_cnt
                  |L1.17260|
                          DCD      sp_ch_wrk_cnt
                  |L1.17264|
                          DCD      speedChrgTimeInHour
                  |L1.17268|
004374  2020c1c5          DCB      "  ",193,197,199," ",194,197,205,210,200,203,223,214,200
004378  c720c2c5
00437c  cdd2c8cb
004380  dfd6c8  
004383  c8212120          DCB      200,"!!  ",0
004387  2000    
004389  00                DCB      0
00438a  00                DCB      0
00438b  00                DCB      0
                  |L1.17292|
00438c  20202020          DCB      "      ",194,202,203,222,215,197,205,"       ",0
004390  2020c2ca
004394  cbded7c5
004398  cd202020
00439c  20202020
0043a0  00      
0043a1  00                DCB      0
0043a2  00                DCB      0
0043a3  00                DCB      0
                  |L1.17316|
0043a4  202020cd          DCB      "   ",205,197," ",204,206,198,197,210," ",193,219,210,220
0043a8  c520ccce
0043ac  c6c5d220
0043b0  c1dbd2dc
0043b4  20202020          DCB      "    ",0
0043b8  00      
0043b9  00                DCB      0
0043ba  00                DCB      0
0043bb  00                DCB      0
                  |L1.17340|
0043bc  2020d3d1          DCB      "  ",211,209,202,206,208,197,205,205,219,201," ",199,192
0043c0  caced0c5
0043c4  cdcddbc9
0043c8  20c7c0  
0043cb  d0dfc420          DCB      208,223,196,"  ",0
0043cf  2000    
0043d1  00                DCB      0
0043d2  00                DCB      0
0043d3  00                DCB      0
                  |L1.17364|
0043d4  20202020          DCB      "    ",194,197,205,210,200,203,223,214,200,223,"!!!   ",0
0043d8  c2c5cdd2
0043dc  c8cbdfd6
0043e0  c8df2121
0043e4  21202020
0043e8  00      
0043e9  00                DCB      0
0043ea  00                DCB      0
0043eb  00                DCB      0
                  |L1.17388|
0043ec  20202020          DCB      "     ",205,197,200,209,207,208,192,194,205,192,"     ",0
0043f0  20cdc5c8
0043f4  d1cfd0c0
0043f8  c2cdc020
0043fc  20202020
004400  00      
004401  00                DCB      0
004402  00                DCB      0
004403  00                DCB      0
                  |L1.17412|
004404  20202020          DCB      "    ",199,192,193,203,206,202,200,208,206,194,192,205," "
004408  c7c0c1cb
00440c  cecac8d0
004410  cec2c0cd
004414  20      
004415  20202000          DCB      "   ",0
004419  00                DCB      0
00441a  00                DCB      0
00441b  00                DCB      0
                  |L1.17436|
                          DCD      hv_vz_stat
                  |L1.17440|
                          DCD      hv_vz_stat_old
                  |L1.17444|
                          DCD      hv_vz_stat_cnt
                  |L1.17448|
                          DCD      UVZ
                  |L1.17452|
00442c  ced2cacb          DCB      206,210,202,203,222,215,200,210,197," ",205,192,195,208,211
004430  ded7c8d2
004434  c520cdc0
004438  c3d0d3  
00443b  c7cad321          DCB      199,202,211,"!!",0
00443f  2100    
004441  00                DCB      0
004442  00                DCB      0
004443  00                DCB      0
                  |L1.17476|
004444  20f3e2e5          DCB      " ",243,226,229,235,232,247,229,237,238," ",228,238,"   "
004448  ebe8f7e5
00444c  edee20e4
004450  ee202020
004454  202040c2          DCB      "  @",194,0
004458  00      
004459  00                DCB      0
00445a  00                DCB      0
00445b  00                DCB      0
                  |L1.17500|
00445c  2020cde0          DCB      "  ",205,224,239,240,255,230,229,237,232,229," ",225,243
004460  eff0ffe6
004464  e5ede8e5
004468  20e1f3  
00446b  e4e5f220          DCB      228,229,242,"  ",0
00446f  2000    
004471  00                DCB      0
004472  00                DCB      0
004473  00                DCB      0
                  |L1.17524|
004474  20202020          DCB      "     ",194,205,200,204,192,205,200,197,"!!!    ",0
004478  20c2cdc8
00447c  ccc0cdc8
004480  c5212121
004484  20202020
004488  00      
004489  00                DCB      0
00448a  00                DCB      0
00448b  00                DCB      0
                  |L1.17548|
00448c  20202020          DCB      "      ",202,205,206,207,202,200,"        ",0
004490  2020cacd
004494  cecfcac8
004498  20202020
00449c  20202020
0044a0  00      
0044a1  00                DCB      0
0044a2  00                DCB      0
0044a3  00                DCB      0
                  |L1.17572|
0044a4  20202020          DCB      "    ",214,197,205,210,208,192,203,220,205,206,201,"    "
0044a8  d6c5cdd2
0044ac  d0c0cbdc
0044b0  cdcec920
0044b4  202020  
0044b7  2000              DCB      " ",0
0044b9  00                DCB      0
0044ba  00                DCB      0
0044bb  00                DCB      0
                  |L1.17596|
0044bc  20202020          DCB      "     ",205,192,198,192,210,200,197,204,"       ",0
0044c0  20cdc0c6
0044c4  c0d2c8c5
0044c8  cc202020
0044cc  20202020
0044d0  00      
0044d1  00                DCB      0
0044d2  00                DCB      0
0044d3  00                DCB      0
                  |L1.17620|
0044d4  20202020          DCB      "    ",207,206,196,210,194,197,208,196,200,210,197,"    "
0044d8  cfcec4d2
0044dc  c2c5d0c4
0044e0  c8d2c520
0044e4  202020  
0044e7  2000              DCB      " ",0
0044e9  00                DCB      0
0044ea  00                DCB      0
0044eb  00                DCB      0
                  |L1.17644|
0044ec  20202020          DCB      "       ",199,192,208,223,196,"        ",0
0044f0  202020c7
0044f4  c0d0dfc4
0044f8  20202020
0044fc  20202020
004500  00      
004501  00                DCB      0
004502  00                DCB      0
004503  00                DCB      0
                  |L1.17668|
004504  202020c2          DCB      "   ",194,219,208,192,194,205,200,194,192,222,217,200,201
004508  dbd0c0c2
00450c  cdc8c2c0
004510  ded9c8c9
004514  20202020          DCB      "    ",0
004518  00      
004519  00                DCB      0
00451a  00                DCB      0
00451b  00                DCB      0
                  |L1.17692|
00451c  20202020          DCB      "      ",210,211,204,193,203,197,208,"       ",0
004520  2020d2d3
004524  ccc1cbc5
004528  d0202020
00452c  20202020
004530  00      
004531  00                DCB      0
004532  00                DCB      0
004533  00                DCB      0
                  |L1.17716|
004534  20202020          DCB      "     ",194,202,203,222,215,200,210,197,"       ",0
004538  20c2cacb
00453c  ded7c8d2
004540  c5202020
004544  20202020
004548  00      
004549  00                DCB      0
00454a  00                DCB      0
00454b  00                DCB      0
                  |L1.17740|
                          DCD      hv_vz_wrk_cnt
                  |L1.17744|
                          DCD      hv_vz_up_cnt
                  |L1.17748|
                          DCD      VZ_HR
                  |L1.17752|
004558  c2dbd0c0          DCB      194,219,208,192,194,205,200,194,192,222,217,200,201," ",199
00455c  c2cdc8c2
004560  c0ded9c8
004564  c920c7  
004567  c0d0dfc4          DCB      192,208,223,196," ",0
00456b  2000    
00456d  00                DCB      0
00456e  00                DCB      0
00456f  00                DCB      0
                  |L1.17776|
004570  20202020          DCB      "    ",210,211,204,193,203,197,208,192,"!!!     ",0
004574  d2d3ccc1
004578  cbc5d0c0
00457c  21212120
004580  20202020
004584  00      
004585  00                DCB      0
004586  00                DCB      0
004587  00                DCB      0
                  |L1.17800|
004588  2020cfce          DCB      "  ",207,206,209,203,197," ",194,202,203,222,215,197,205
00458c  d1cbc520
004590  c2cacbde
004594  d7c5cd  
004597  c8df2020          DCB      200,223,"   ",0
00459b  2000    
00459d  00                DCB      0
00459e  00                DCB      0
00459f  00                DCB      0
                  |L1.17824|
0045a0  2020c1d3          DCB      "  ",193,211,196,197,210," ",207,208,206,196,206,203,198
0045a4  c4c5d220
0045a8  cfd0cec4
0045ac  cecbc6  
0045af  c5cd2020          DCB      197,205,"   ",0
0045b3  2000    
0045b5  00                DCB      0
0045b6  00                DCB      0
0045b7  00                DCB      0
                  |L1.17848|
0045b8  20202020          DCB      "     ",194,219,202,203,222,215,200,210,197,"      ",0
0045bc  20c2dbca
0045c0  cbded7c8
0045c4  d2c52020
0045c8  20202020
0045cc  00      
0045cd  00                DCB      0
0045ce  00                DCB      0
0045cf  00                DCB      0
                          ENDP

                  averageChargeStartStop PROC
;;;7907   //-----------------------------------------------
;;;7908   void averageChargeStartStop(void)
0045d0  48fa              LDR      r0,|L1.18876|
;;;7909   {
;;;7910   if(hv_vz_stat!=hvsOFF)
0045d2  7801              LDRB     r1,[r0,#0]  ; hv_vz_stat
0045d4  b119              CBZ      r1,|L1.17886|
;;;7911   	{
;;;7912   	hv_vz_stat=hvsOFF;
0045d6  f04f0100          MOV      r1,#0
0045da  7001              STRB     r1,[r0,#0]
;;;7913   	}
;;;7914   
;;;7915   else
;;;7916   	{
;;;7917   	hv_vz_stat=hvsSTEP1;
;;;7918   	}
;;;7919   }
0045dc  4770              BX       lr
                  |L1.17886|
0045de  f04f0101          MOV      r1,#1                 ;7917
0045e2  7001              STRB     r1,[r0,#0]            ;7917
0045e4  4770              BX       lr
;;;7920   
                          ENDP

                  numOfForvardBps_hndl PROC
;;;7921   //-----------------------------------------------
;;;7922   void	numOfForvardBps_hndl(void)			//       
0045e6  e92d41f0          PUSH     {r4-r8,lr}
;;;7923   {
;;;7924   
;;;7925   numOfForvardBps_old=numOfForvardBps;
0045ea  4cf5              LDR      r4,|L1.18880|
0045ec  7e60              LDRB     r0,[r4,#0x19]  ; numOfForvardBps
0045ee  76a0              STRB     r0,[r4,#0x1a]
;;;7926   
;;;7927   numOfForvardBps=0;
0045f0  f04f0500          MOV      r5,#0
0045f4  7665              STRB     r5,[r4,#0x19]
;;;7928   
;;;7929   //FORVARDBPSCHHOUR=10;
;;;7930   
;;;7931   if((FORVARDBPSCHHOUR<=0)||(FORVARDBPSCHHOUR>500))
0045f6  4ef3              LDR      r6,|L1.18884|
0045f8  f9b60000          LDRSH    r0,[r6,#0]  ; FORVARDBPSCHHOUR
0045fc  2800              CMP      r0,#0
0045fe  dd02              BLE      |L1.17926|
004600  f5b07ffa          CMP      r0,#0x1f4
004604  dd02              BLE      |L1.17932|
                  |L1.17926|
;;;7932   	{
;;;7933   	FORVARDBPSCHHOUR=0;
004606  8035              STRH     r5,[r6,#0]
                  |L1.17928|
;;;7934   	return;
;;;7935   	}
;;;7936   
;;;7937   numOfForvardBps_minCnt++;
;;;7938   
;;;7939   
;;;7940   if(numOfForvardBps_minCnt>=60)
;;;7941   	{
;;;7942   	numOfForvardBps_minCnt=0;
;;;7943   	numOfForvardBps_hourCnt=lc640_read_int(EE_FORVBPSHOURCNT);
;;;7944   	numOfForvardBps_hourCnt++;
;;;7945   	if(numOfForvardBps_hourCnt>=(FORVARDBPSCHHOUR*NUMIST))
;;;7946   		{
;;;7947   		numOfForvardBps_hourCnt=0;
;;;7948   		}
;;;7949   	lc640_write_int(EE_FORVBPSHOURCNT,numOfForvardBps_hourCnt);
;;;7950   	}
;;;7951   
;;;7952   numOfForvardBps=numOfForvardBps_hourCnt/FORVARDBPSCHHOUR;
;;;7953   
;;;7954   //if(numOfForvardBps)
;;;7955   //numOfForvardBps_old=numOfForvardBps; 
;;;7956   }
004608  e8bd81f0          POP      {r4-r8,pc}
                  |L1.17932|
00460c  7ee0              LDRB     r0,[r4,#0x1b]         ;7937  ; numOfForvardBps_minCnt
00460e  f1000001          ADD      r0,r0,#1              ;7937
004612  b2c0              UXTB     r0,r0                 ;7937
004614  76e0              STRB     r0,[r4,#0x1b]         ;7937
004616  283c              CMP      r0,#0x3c              ;7940
004618  d31a              BCC      |L1.18000|
00461a  76e5              STRB     r5,[r4,#0x1b]         ;7942
00461c  f44f7794          MOV      r7,#0x128             ;7943
004620  4638              MOV      r0,r7                 ;7943
004622  f7fffffe          BL       lc640_read_int
004626  f1000001          ADD      r0,r0,#1              ;7944
00462a  b200              SXTH     r0,r0                 ;7944
00462c  f8a40066          STRH     r0,[r4,#0x66]         ;7944
004630  4ae5              LDR      r2,|L1.18888|
004632  f9b61000          LDRSH    r1,[r6,#0]            ;7945  ; FORVARDBPSCHHOUR
004636  f9b22000          LDRSH    r2,[r2,#0]            ;7945  ; NUMIST
00463a  fb01f102          MUL      r1,r1,r2              ;7945
00463e  4281              CMP      r1,r0                 ;7945
004640  dc01              BGT      |L1.17990|
004642  f8a45066          STRH     r5,[r4,#0x66]         ;7947
                  |L1.17990|
004646  f9b41066          LDRSH    r1,[r4,#0x66]         ;7949  ; numOfForvardBps_hourCnt
00464a  4638              MOV      r0,r7                 ;7949
00464c  f7fffffe          BL       lc640_write_int
                  |L1.18000|
004650  f9b40066          LDRSH    r0,[r4,#0x66]         ;7952  ; numOfForvardBps_hourCnt
004654  f9b61000          LDRSH    r1,[r6,#0]            ;7952  ; FORVARDBPSCHHOUR
004658  fb90f0f1          SDIV     r0,r0,r1              ;7952
00465c  7660              STRB     r0,[r4,#0x19]         ;7952
00465e  e7d3              B        |L1.17928|
;;;7957   
                          ENDP

                  numOfForvardBps_init PROC
;;;7958   //-----------------------------------------------
;;;7959   void	numOfForvardBps_init(void)			//         
004660  b510              PUSH     {r4,lr}
;;;7960   {									//    -   
;;;7961   lc640_write_int(EE_FORVBPSHOURCNT,0);
004662  2100              MOVS     r1,#0
004664  f44f7094          MOV      r0,#0x128
004668  f7fffffe          BL       lc640_write_int
;;;7962   numOfForvardBps_minCnt=58;
00466c  49d4              LDR      r1,|L1.18880|
00466e  f04f003a          MOV      r0,#0x3a
004672  76c8              STRB     r0,[r1,#0x1b]
;;;7963   }
004674  bd10              POP      {r4,pc}
;;;7964   
                          ENDP

                  outVoltContrHndl PROC
;;;7965   //-----------------------------------------------
;;;7966   void outVoltContrHndl(void)
004676  b570              PUSH     {r4-r6,lr}
;;;7967   { 
;;;7968   if((load_U>U_OUT_KONTR_MAX)||(load_U<U_OUT_KONTR_MIN))
004678  4cd4              LDR      r4,|L1.18892|
00467a  48d5              LDR      r0,|L1.18896|
;;;7969   	{
;;;7970   	outVoltContrHndlCnt_=0;
;;;7971   	if(outVoltContrHndlCnt<U_OUT_KONTR_DELAY)
00467c  4ad5              LDR      r2,|L1.18900|
00467e  f9b41000          LDRSH    r1,[r4,#0]            ;7968  ; load_U
004682  f9b06000          LDRSH    r6,[r0,#0]            ;7968  ; U_OUT_KONTR_MAX
004686  2500              MOVS     r5,#0                 ;7970
004688  f9b20000          LDRSH    r0,[r2,#0]
00468c  4bd2              LDR      r3,|L1.18904|
00468e  42b1              CMP      r1,r6                 ;7968
004690  dc04              BGT      |L1.18076|
004692  4ed2              LDR      r6,|L1.18908|
004694  f9b66000          LDRSH    r6,[r6,#0]            ;7968  ; U_OUT_KONTR_MIN
004698  42b1              CMP      r1,r6                 ;7968
00469a  da0f              BGE      |L1.18108|
                  |L1.18076|
00469c  801d              STRH     r5,[r3,#0]            ;7970
00469e  49d0              LDR      r1,|L1.18912|
0046a0  f9b11000          LDRSH    r1,[r1,#0]  ; U_OUT_KONTR_DELAY
0046a4  4288              CMP      r0,r1
0046a6  da1b              BGE      |L1.18144|
;;;7972   		{
;;;7973   		outVoltContrHndlCnt++;
0046a8  f1000001          ADD      r0,r0,#1
0046ac  b200              SXTH     r0,r0
0046ae  8010              STRH     r0,[r2,#0]
;;;7974   		if(outVoltContrHndlCnt==U_OUT_KONTR_DELAY)
0046b0  4288              CMP      r0,r1
0046b2  d115              BNE      |L1.18144|
;;;7975   			{
;;;7976   			avar_uout_hndl(1);
0046b4  2001              MOVS     r0,#1
0046b6  f7fffffe          BL       avar_uout_hndl
0046ba  e011              B        |L1.18144|
                  |L1.18108|
;;;7977   			}
;;;7978   		}
;;;7979   	}
;;;7980   else
;;;7981   	{
;;;7982   	if(outVoltContrHndlCnt)
0046bc  b180              CBZ      r0,|L1.18144|
;;;7983   		{
;;;7984   		if(outVoltContrHndlCnt_<5)
0046be  f9b30000          LDRSH    r0,[r3,#0]  ; outVoltContrHndlCnt_
0046c2  2805              CMP      r0,#5
0046c4  da0c              BGE      |L1.18144|
;;;7985   			{
;;;7986   			outVoltContrHndlCnt_++;
0046c6  f1000001          ADD      r0,r0,#1
0046ca  b200              SXTH     r0,r0
0046cc  8018              STRH     r0,[r3,#0]
;;;7987   			if(outVoltContrHndlCnt_>=5)
0046ce  2805              CMP      r0,#5
0046d0  db06              BLT      |L1.18144|
;;;7988   				{
;;;7989   				outVoltContrHndlCnt=0;
0046d2  8015              STRH     r5,[r2,#0]
;;;7990   				if(uout_av)avar_uout_hndl(0);
0046d4  48c3              LDR      r0,|L1.18916|
0046d6  7800              LDRB     r0,[r0,#0]  ; uout_av
0046d8  b110              CBZ      r0,|L1.18144|
0046da  2000              MOVS     r0,#0
0046dc  f7fffffe          BL       avar_uout_hndl
                  |L1.18144|
;;;7991   				}
;;;7992   			}
;;;7993   		}
;;;7994   	}
;;;7995   
;;;7996   if (load_U<(USIGN*10)) 
0046e0  48c1              LDR      r0,|L1.18920|
0046e2  f9b41000          LDRSH    r1,[r4,#0]  ; load_U
0046e6  f9b00000          LDRSH    r0,[r0,#0]  ; USIGN
0046ea  eb000080          ADD      r0,r0,r0,LSL #2
0046ee  ebb10f40          CMP      r1,r0,LSL #1
0046f2  da0b              BGE      |L1.18188|
;;;7997   	{
;;;7998   	if(!bSILENT)
0046f4  48bd              LDR      r0,|L1.18924|
0046f6  6800              LDR      r0,[r0,#0]  ; bSILENT
0046f8  2800              CMP      r0,#0
0046fa  d107              BNE      |L1.18188|
;;;7999   		{
;;;8000   		mess_send(MESS2RELE_HNDL,PARAM_RELE_BAT_IS_DISCHARGED,1,20);
0046fc  e8bd4070          POP      {r4-r6,lr}
004700  2314              MOVS     r3,#0x14
004702  2201              MOVS     r2,#1
004704  2172              MOVS     r1,#0x72
004706  20d2              MOVS     r0,#0xd2
004708  f7ffbffe          B.W      mess_send
                  |L1.18188|
;;;8001   		}
;;;8002   
;;;8003   	//bU_BAT2REL_AV_BAT=1;
;;;8004   	}
;;;8005   
;;;8006   
;;;8007   }
00470c  bd70              POP      {r4-r6,pc}
;;;8008   
                          ENDP

                  vent_resurs_hndl PROC
;;;8009   //-----------------------------------------------
;;;8010   void vent_resurs_hndl(void)
00470e  e92d47f0          PUSH     {r4-r10,lr}
;;;8011   {
;;;8012   char i;
;;;8013   char crc_in,crc_eval;
;;;8014   
;;;8015   for(i=0;i<NUMIST;i++)
004712  f04f0200          MOV      r2,#0
;;;8016   	{
;;;8017   	if((bps[i]._buff[7]&0xc0)==0x00)
;;;8018   		{
;;;8019   		bps[i]._vent_resurs_temp[0]=bps[i]._buff[7];
;;;8020   		}
;;;8021   	else if((bps[i]._buff[7]&0xc0)==0x40)
;;;8022   		{
;;;8023   		bps[i]._vent_resurs_temp[1]=bps[i]._buff[7];
;;;8024   		}
;;;8025   	else if((bps[i]._buff[7]&0xc0)==0x80)
;;;8026   		{
;;;8027   		bps[i]._vent_resurs_temp[2]=bps[i]._buff[7];
;;;8028   		}
;;;8029   	else if((bps[i]._buff[7]&0xc0)==0xc0)
;;;8030   		{
;;;8031   		bps[i]._vent_resurs_temp[3]=bps[i]._buff[7];
;;;8032   		}
;;;8033   	crc_in=0;
;;;8034   	crc_in|=(bps[i]._vent_resurs_temp[0]&0x30)>>4;
;;;8035   	crc_in|=(bps[i]._vent_resurs_temp[1]&0x30)>>2;
;;;8036   	crc_in|=(bps[i]._vent_resurs_temp[2]&0x30);
;;;8037   	crc_in|=(bps[i]._vent_resurs_temp[3]&0x30)<<2;
;;;8038   
;;;8039   	crc_eval =bps[i]._vent_resurs_temp[0]&0x0f;
;;;8040   	crc_eval^=bps[i]._vent_resurs_temp[1]&0x0f;
;;;8041   	crc_eval^=bps[i]._vent_resurs_temp[2]&0x0f;
;;;8042   	crc_eval^=bps[i]._vent_resurs_temp[3]&0x0f;
;;;8043   
;;;8044   	if(crc_eval==crc_in)
;;;8045   		{
;;;8046   		unsigned short temp_US;
;;;8047   		temp_US=0;
;;;8048   
;;;8049   		temp_US|=(bps[i]._vent_resurs_temp[3]&0x0f);
;;;8050   		temp_US<<=4;
;;;8051   		temp_US|=(bps[i]._vent_resurs_temp[2]&0x0f);
;;;8052   		temp_US<<=4;
;;;8053   		temp_US|=(bps[i]._vent_resurs_temp[1]&0x0f);
;;;8054   		temp_US<<=4;
;;;8055   		temp_US|=(bps[i]._vent_resurs_temp[0]&0x0f);
;;;8056   
;;;8057   		if(bps[i]._vent_resurs!=temp_US)bps[i]._vent_resurs=temp_US;
;;;8058   		}
;;;8059   
;;;8060   	if((bps[i]._vent_resurs>TVENTMAX*10)&&(TVENTMAX>0))
004716  48b6              LDR      r0,|L1.18928|
004718  f8dfc2d8          LDR      r12,|L1.18932|
00471c  f9b06000          LDRSH    r6,[r0,#0]
004720  48a9              LDR      r0,|L1.18888|
004722  f9b07000          LDRSH    r7,[r0,#0]            ;8015
004726  e06e              B        |L1.18438|
                  |L1.18216|
004728  ebc200c2          RSB      r0,r2,r2,LSL #3       ;8017
00472c  eb001002          ADD      r0,r0,r2,LSL #4       ;8017
004730  eb0c0080          ADD      r0,r12,r0,LSL #2      ;8017
004734  7b41              LDRB     r1,[r0,#0xd]          ;8017
004736  098b              LSRS     r3,r1,#6              ;8017
004738  d006              BEQ      |L1.18248|
00473a  2301              MOVS     r3,#1                 ;8021
00473c  ebb31f91          CMP      r3,r1,LSR #6          ;8021
004740  d105              BNE      |L1.18254|
004742  f8801055          STRB     r1,[r0,#0x55]         ;8023
004746  e00f              B        |L1.18280|
                  |L1.18248|
004748  f8801054          STRB     r1,[r0,#0x54]         ;8019
00474c  e00c              B        |L1.18280|
                  |L1.18254|
00474e  2302              MOVS     r3,#2                 ;8025
004750  ebb31f91          CMP      r3,r1,LSR #6          ;8025
004754  d102              BNE      |L1.18268|
004756  f8801056          STRB     r1,[r0,#0x56]         ;8027
00475a  e005              B        |L1.18280|
                  |L1.18268|
00475c  2303              MOVS     r3,#3                 ;8029
00475e  ebb31f91          CMP      r3,r1,LSR #6          ;8029
004762  d101              BNE      |L1.18280|
004764  f8801057          STRB     r1,[r0,#0x57]         ;8031
                  |L1.18280|
004768  f8101f54          LDRB     r1,[r0,#0x54]!        ;8034
00476c  f3c11401          UBFX     r4,r1,#4,#2           ;8034
004770  7843              LDRB     r3,[r0,#1]            ;8035
004772  f0030530          AND      r5,r3,#0x30           ;8035
004776  ea440495          ORR      r4,r4,r5,LSR #2       ;8035
00477a  f8909002          LDRB     r9,[r0,#2]            ;8036
00477e  f0090830          AND      r8,r9,#0x30           ;8036
004782  ea480804          ORR      r8,r8,r4              ;8036
004786  78c5              LDRB     r5,[r0,#3]            ;8037
004788  f1a00054          SUB      r0,r0,#0x54           ;8037
00478c  f0050430          AND      r4,r5,#0x30           ;8037
004790  ea480884          ORR      r8,r8,r4,LSL #2       ;8037
004794  f001010f          AND      r1,r1,#0xf            ;8039
004798  f003040f          AND      r4,r3,#0xf            ;8040
00479c  ea840a01          EOR      r10,r4,r1             ;8040
0047a0  f009030f          AND      r3,r9,#0xf            ;8041
0047a4  ea83090a          EOR      r9,r3,r10             ;8041
0047a8  f005050f          AND      r5,r5,#0xf            ;8042
0047ac  ea850909          EOR      r9,r5,r9              ;8042
0047b0  45c1              CMP      r9,r8                 ;8044
0047b2  d113              BNE      |L1.18396|
0047b4  ea4f1505          LSL      r5,r5,#4              ;8050
0047b8  ea430305          ORR      r3,r3,r5              ;8051
0047bc  ea4f1303          LSL      r3,r3,#4              ;8052
0047c0  ea440403          ORR      r4,r4,r3              ;8053
0047c4  ea4f5304          LSL      r3,r4,#20             ;8054
0047c8  ea4f4313          LSR      r3,r3,#16             ;8054
0047cc  ea410103          ORR      r1,r1,r3              ;8055
0047d0  f8b03058          LDRH     r3,[r0,#0x58]         ;8057
0047d4  428b              CMP      r3,r1                 ;8057
0047d6  d001              BEQ      |L1.18396|
0047d8  f8a01058          STRH     r1,[r0,#0x58]         ;8057
                  |L1.18396|
0047dc  f8b01058          LDRH     r1,[r0,#0x58]
0047e0  eb060386          ADD      r3,r6,r6,LSL #2
0047e4  ebb10f43          CMP      r1,r3,LSL #1
0047e8  dd06              BLE      |L1.18424|
0047ea  2e00              CMP      r6,#0
0047ec  dd04              BLE      |L1.18424|
;;;8061   		{
;;;8062   		bps[i]._av|=(1<<4);
0047ee  7841              LDRB     r1,[r0,#1]
0047f0  f0410110          ORR      r1,r1,#0x10
0047f4  7041              STRB     r1,[r0,#1]
0047f6  e003              B        |L1.18432|
                  |L1.18424|
;;;8063   		}
;;;8064   	else bps[i]._av&=~(1<<4);
0047f8  7841              LDRB     r1,[r0,#1]
0047fa  f0210110          BIC      r1,r1,#0x10
0047fe  7041              STRB     r1,[r0,#1]
                  |L1.18432|
004800  f1020201          ADD      r2,r2,#1              ;8015
004804  b2d2              UXTB     r2,r2                 ;8015
                  |L1.18438|
004806  42ba              CMP      r2,r7                 ;8015
004808  db8e              BLT      |L1.18216|
;;;8065   	}
;;;8066   }
00480a  e8bd87f0          POP      {r4-r10,pc}
;;;8067   
                          ENDP

                  vent_hndl PROC
;;;8068   //-----------------------------------------------
;;;8069   void vent_hndl(void)
00480e  e92d4ff0          PUSH     {r4-r11,lr}
;;;8070   {
004812  b087              SUB      sp,sp,#0x1c
;;;8071   if(RELEVENTSIGN==rvsAKB)
004814  4878              LDR      r0,|L1.18936|
;;;8072   	{
;;;8073   	if(vent_stat==0)
004816  4c6a              LDR      r4,|L1.18880|
;;;8074   		{
;;;8075   		if	(
;;;8076   			(BAT_IS_ON[0]==bisON)&&((bat[0]._Tb>TVENTON)||(bat[0]._nd))
004818  4978              LDR      r1,|L1.18940|
;;;8077   			||
;;;8078   			(BAT_IS_ON[1]==bisON)&&((bat[1]._Tb>TVENTON)||(bat[1]._nd))
;;;8079   			)
;;;8080   			{
;;;8081   			vent_stat=1;
;;;8082   			}
;;;8083   		}
;;;8084   	else if(vent_stat==1)
;;;8085   		{
;;;8086   		if	(
;;;8087   			((BAT_IS_ON[0]!=bisON)||((BAT_IS_ON[0]==bisON)&&(bat[0]._Tb<TVENTOFF)&&(!bat[0]._nd)))
00481a  4a79              LDR      r2,|L1.18944|
00481c  7800              LDRB     r0,[r0,#0]            ;8071  ; RELEVENTSIGN
00481e  f9943000          LDRSB    r3,[r4,#0]            ;8073
004822  f9b11000          LDRSH    r1,[r1,#0]            ;8076
004826  f9b22000          LDRSH    r2,[r2,#0]
00482a  b148              CBZ      r0,|L1.18496|
;;;8088   			&&
;;;8089   			((BAT_IS_ON[1]!=bisON)||((BAT_IS_ON[1]==bisON)&&(bat[1]._Tb<TVENTOFF)&&(!bat[1]._nd)))
;;;8090   			)
;;;8091   			{
;;;8092   			vent_stat=0;
;;;8093   			}
;;;8094   		}
;;;8095   	}
;;;8096   else if(RELEVENTSIGN==rvsBPS)
00482c  2802              CMP      r0,#2
00482e  d03c              BEQ      |L1.18602|
;;;8097   	{
;;;8098   /*	if	(
;;;8099   		(((bps[0]._flags_tm&0x06)||(bps[0]._cnt>=30)))||
;;;8100   		(((bps[1]._flags_tm&0x06)||(bps[1]._cnt>=30))&&(NUMIST>1))||
;;;8101   		(((bps[2]._flags_tm&0x06)||(bps[2]._cnt>=30))&&(NUMIST>2))||
;;;8102   		(((bps[3]._flags_tm&0x06)||(bps[3]._cnt>=30))&&(NUMIST>3))||
;;;8103   		(((bps[4]._flags_tm&0x06)||(bps[4]._cnt>=30))&&(NUMIST>4))||
;;;8104   		(((bps[5]._flags_tm&0x06)||(bps[5]._cnt>=30))&&(NUMIST>5))||
;;;8105   		(((bps[6]._flags_tm&0x06)||(bps[6]._cnt>=30))&&(NUMIST>6))
;;;8106   		)
;;;8107   		{
;;;8108   		vent_stat=1;
;;;8109   		}
;;;8110   	else vent_stat=0;
;;;8111   	*/
;;;8112   
;;;8113   	if	(
;;;8114   		((NUMIST)&&((bps[0]._Ti>TVENTON)||(bps[0]._cnt>=30)))
;;;8115   		||
;;;8116   		((NUMIST>1)&&((bps[1]._Ti>TVENTON)||(bps[1]._cnt>=30)))
;;;8117   		||
;;;8118   		((NUMIST>2)&&((bps[2]._Ti>TVENTON)||(bps[2]._cnt>=30)))
;;;8119   		||
;;;8120   		((NUMIST>3)&&((bps[3]._Ti>TVENTON)||(bps[3]._cnt>=30)))
;;;8121   		||
;;;8122   		((NUMIST>4)&&((bps[4]._Ti>TVENTON)||(bps[4]._cnt>=30)))
;;;8123   		||
;;;8124   		((NUMIST>5)&&((bps[5]._Ti>TVENTON)||(bps[5]._cnt>=30)))
;;;8125   		||
;;;8126   		((NUMIST>6)&&((bps[6]._Ti>TVENTON)||(bps[6]._cnt>=30)))
;;;8127   		||
;;;8128   		((NUMIST>7)&&((bps[7]._Ti>TVENTON)||(bps[7]._cnt>=30)))
;;;8129   		)
;;;8130   		{
;;;8131   		vent_stat=1;
;;;8132   		}
;;;8133   	else if(vent_stat==1)
;;;8134   		{
;;;8135   		if	(
;;;8136   			((!NUMIST)||((NUMIST)&&(bps[0]._Ti<TVENTOFF)&&(bps[0]._cnt<10)))
;;;8137   			&&
;;;8138   			((NUMIST<2)||((NUMIST>=2)&&(bps[1]._Ti<TVENTOFF)&&(bps[1]._cnt<10)))
;;;8139   			&&
;;;8140   			((NUMIST<3)||((NUMIST>=3)&&(bps[2]._Ti<TVENTOFF)&&(bps[2]._cnt<10)))
;;;8141   			&&
;;;8142   			((NUMIST<4)||((NUMIST>=4)&&(bps[3]._Ti<TVENTOFF)&&(bps[3]._cnt<10)))
;;;8143   			&&
;;;8144   			((NUMIST<5)||((NUMIST>=5)&&(bps[4]._Ti<TVENTOFF)&&(bps[4]._cnt<10)))
;;;8145   			&&
;;;8146   			((NUMIST<6)||((NUMIST>=6)&&(bps[5]._Ti<TVENTOFF)&&(bps[5]._cnt<10)))
;;;8147   			&&
;;;8148   			((NUMIST<7)||((NUMIST>=7)&&(bps[6]._Ti<TVENTOFF)&&(bps[6]._cnt<10)))
;;;8149   			&&
;;;8150   			((NUMIST<8)||((NUMIST>=8)&&(bps[7]._Ti<TVENTOFF)&&(bps[7]._cnt<10)))
;;;8151   			)
;;;8152   			{
;;;8153   			vent_stat=0;
;;;8154   			}
;;;8155   		}
;;;8156   	}
;;;8157   else if(RELEVENTSIGN==rvsEXT)
004830  2801              CMP      r0,#1
004832  d07e              BEQ      |L1.18738|
;;;8158   	{
;;;8159   	if	(
;;;8160   		((NUMDT)&&((t_ext[0]>TVENTON)||(ND_EXT[0])))
;;;8161   		||
;;;8162   		((NUMDT>1)&&((t_ext[1]>TVENTON)||(ND_EXT[1])))
;;;8163   		||
;;;8164   		((NUMDT>2)&&((t_ext[2]>TVENTON)||(ND_EXT[2])))
;;;8165   		)
;;;8166   		{
;;;8167   		vent_stat=1;
;;;8168   		}
;;;8169   	else if(vent_stat==1)
;;;8170   		{
;;;8171   		if	(
;;;8172   			((!NUMDT)||((NUMDT)&&(t_ext[0]<TVENTOFF)&&(!ND_EXT[0])))
;;;8173   			&&
;;;8174   			((NUMDT<2)||((NUMDT>=2)&&(t_ext[1]<TVENTOFF)&&(!ND_EXT[1])))
;;;8175   			&&
;;;8176   			((NUMDT<3)||((NUMDT>=3)&&(t_ext[2]<TVENTOFF)&&(!ND_EXT[2])))
;;;8177   			)
;;;8178   			{
;;;8179   			vent_stat=0;
;;;8180   			}
;;;8181   		}
;;;8182   	}
;;;8183   else vent_stat=1;
004834  f04f0001          MOV      r0,#1
004838  7020              STRB     r0,[r4,#0]
                  |L1.18490|
;;;8184   }
00483a  b007              ADD      sp,sp,#0x1c
00483c  e8bd8ff0          POP      {r4-r11,pc}
                  |L1.18496|
004840  4f70              LDR      r7,|L1.18948|
004842  f8df81c4          LDR      r8,|L1.18952|
004846  f9b7000a          LDRSH    r0,[r7,#0xa]          ;8076
00484a  7b3d              LDRB     r5,[r7,#0xc]          ;8076
00484c  f9b76056          LDRSH    r6,[r7,#0x56]         ;8078
004850  f898c000          LDRB     r12,[r8,#0]           ;8075
004854  f8977058          LDRB     r7,[r7,#0x58]         ;8078
004858  f8988001          LDRB     r8,[r8,#1]            ;8078
00485c  b12b              CBZ      r3,|L1.18538|
00485e  2b01              CMP      r3,#1                 ;8084
004860  d1eb              BNE      |L1.18490|
004862  f1bc0f55          CMP      r12,#0x55             ;8086
004866  d115              BNE      |L1.18580|
004868  e010              B        |L1.18572|
                  |L1.18538|
00486a  f1bc0f55          CMP      r12,#0x55             ;8075
00486e  d102              BNE      |L1.18550|
004870  4288              CMP      r0,r1                 ;8076
004872  dc07              BGT      |L1.18564|
004874  b935              CBNZ     r5,|L1.18564|
                  |L1.18550|
004876  f1b80f55          CMP      r8,#0x55              ;8078
00487a  d1de              BNE      |L1.18490|
00487c  428e              CMP      r6,r1                 ;8078
00487e  dc01              BGT      |L1.18564|
004880  2f00              CMP      r7,#0                 ;8078
004882  d0da              BEQ      |L1.18490|
                  |L1.18564|
004884  f04f0001          MOV      r0,#1                 ;8081
004888  7020              STRB     r0,[r4,#0]            ;8081
00488a  e7d6              B        |L1.18490|
                  |L1.18572|
00488c  4290              CMP      r0,r2                 ;8087
00488e  dad4              BGE      |L1.18490|
004890  2d00              CMP      r5,#0                 ;8087
004892  d1d2              BNE      |L1.18490|
                  |L1.18580|
004894  f1b80f55          CMP      r8,#0x55              ;8089
004898  d103              BNE      |L1.18594|
00489a  4296              CMP      r6,r2                 ;8089
00489c  dacd              BGE      |L1.18490|
00489e  2f00              CMP      r7,#0                 ;8089
0048a0  d1cb              BNE      |L1.18490|
                  |L1.18594|
0048a2  f04f0000          MOV      r0,#0                 ;8092
0048a6  7020              STRB     r0,[r4,#0]            ;8092
0048a8  e7c7              B        |L1.18490|
                  |L1.18602|
0048aa  4e52              LDR      r6,|L1.18932|
0048ac  4846              LDR      r0,|L1.18888|
0048ae  6ab5              LDR      r5,[r6,#0x28]         ;8114
0048b0  f9b00000          LDRSH    r0,[r0,#0]            ;8113  ; NUMIST
0048b4  78f6              LDRB     r6,[r6,#3]            ;8114
0048b6  b118              CBZ      r0,|L1.18624|
0048b8  428d              CMP      r5,r1                 ;8114
0048ba  dc7a              BGT      |L1.18866|
0048bc  2e1e              CMP      r6,#0x1e              ;8114
0048be  d278              BCS      |L1.18866|
                  |L1.18624|
0048c0  f8dfc130          LDR      r12,|L1.18932|
0048c4  2801              CMP      r0,#1                 ;8116
0048c6  f8dc7084          LDR      r7,[r12,#0x84]        ;8116
0048ca  f89cc05f          LDRB     r12,[r12,#0x5f]       ;8116
0048ce  f8cdc018          STR      r12,[sp,#0x18]        ;8116
0048d2  dd06              BLE      |L1.18658|
0048d4  428f              CMP      r7,r1                 ;8116
0048d6  dc6c              BGT      |L1.18866|
0048d8  f8ddc018          LDR      r12,[sp,#0x18]        ;8116
0048dc  f1bc0f1e          CMP      r12,#0x1e             ;8116
0048e0  d267              BCS      |L1.18866|
                  |L1.18658|
0048e2  f8dfc110          LDR      r12,|L1.18932|
0048e6  2802              CMP      r0,#2                 ;8118
0048e8  f8dc80e0          LDR      r8,[r12,#0xe0]        ;8118
0048ec  f8cd8014          STR      r8,[sp,#0x14]         ;8118
0048f0  f89cc0bb          LDRB     r12,[r12,#0xbb]       ;8118
0048f4  f8cdc010          STR      r12,[sp,#0x10]        ;8118
0048f8  dd08              BLE      |L1.18700|
0048fa  f8ddc014          LDR      r12,[sp,#0x14]        ;8118
0048fe  458c              CMP      r12,r1                ;8118
004900  dc57              BGT      |L1.18866|
004902  f8ddc010          LDR      r12,[sp,#0x10]        ;8118
004906  f1bc0f1e          CMP      r12,#0x1e             ;8118
00490a  d252              BCS      |L1.18866|
                  |L1.18700|
00490c  f8dfc0e4          LDR      r12,|L1.18932|
004910  2803              CMP      r0,#3                 ;8120
004912  f8dc813c          LDR      r8,[r12,#0x13c]       ;8120
004916  f8cd800c          STR      r8,[sp,#0xc]          ;8120
00491a  f89cc117          LDRB     r12,[r12,#0x117]      ;8120
00491e  f8cdc008          STR      r12,[sp,#8]           ;8120
004922  dd0a              BLE      |L1.18746|
004924  f8ddc00c          LDR      r12,[sp,#0xc]         ;8120
004928  458c              CMP      r12,r1                ;8120
00492a  dc42              BGT      |L1.18866|
00492c  f8ddc008          LDR      r12,[sp,#8]           ;8120
004930  e000              B        |L1.18740|
                  |L1.18738|
004932  e0a9              B        |L1.19080|
                  |L1.18740|
004934  f1bc0f1e          CMP      r12,#0x1e             ;8120
004938  d23b              BCS      |L1.18866|
                  |L1.18746|
00493a  f8df80b8          LDR      r8,|L1.18932|
00493e  2804              CMP      r0,#4                 ;8122
004940  f8d8c198          LDR      r12,[r8,#0x198]       ;8122
004944  f8988173          LDRB     r8,[r8,#0x173]        ;8122
004948  f8cd8004          STR      r8,[sp,#4]            ;8122
00494c  dd06              BLE      |L1.18780|
00494e  458c              CMP      r12,r1                ;8122
004950  dc2f              BGT      |L1.18866|
004952  f8dd8004          LDR      r8,[sp,#4]            ;8122
004956  f1b80f1e          CMP      r8,#0x1e              ;8122
00495a  d22a              BCS      |L1.18866|
                  |L1.18780|
00495c  f8df9094          LDR      r9,|L1.18932|
004960  2805              CMP      r0,#5                 ;8124
004962  f8d981f4          LDR      r8,[r9,#0x1f4]        ;8124
004966  f89991cf          LDRB     r9,[r9,#0x1cf]        ;8124
00496a  f8cd9000          STR      r9,[sp,#0]            ;8124
00496e  dd06              BLE      |L1.18814|
004970  4588              CMP      r8,r1                 ;8124
004972  dc1e              BGT      |L1.18866|
004974  f8dd9000          LDR      r9,[sp,#0]            ;8124
004978  f1b90f1e          CMP      r9,#0x1e              ;8124
00497c  d219              BCS      |L1.18866|
                  |L1.18814|
00497e  f8dfa074          LDR      r10,|L1.18932|
004982  2806              CMP      r0,#6                 ;8126
004984  f89ae22b          LDRB     lr,[r10,#0x22b]       ;8126
004988  f8da9250          LDR      r9,[r10,#0x250]       ;8126
00498c  dd04              BLE      |L1.18840|
00498e  4589              CMP      r9,r1                 ;8126
004990  dc0f              BGT      |L1.18866|
004992  f1be0f1e          CMP      lr,#0x1e              ;8126
004996  d20c              BCS      |L1.18866|
                  |L1.18840|
004998  f8dfb058          LDR      r11,|L1.18932|
00499c  2807              CMP      r0,#7                 ;8128
00499e  f8dba2ac          LDR      r10,[r11,#0x2ac]      ;8128
0049a2  f89bb287          LDRB     r11,[r11,#0x287]      ;8128
0049a6  dd31              BLE      |L1.18956|
0049a8  458a              CMP      r10,r1                ;8128
0049aa  dc02              BGT      |L1.18866|
0049ac  f1bb0f1e          CMP      r11,#0x1e             ;8128
0049b0  d32c              BCC      |L1.18956|
                  |L1.18866|
0049b2  f04f0001          MOV      r0,#1                 ;8131
0049b6  7020              STRB     r0,[r4,#0]            ;8131
                  |L1.18872|
0049b8  e73f              B        |L1.18490|
0049ba  0000              DCW      0x0000
                  |L1.18876|
                          DCD      hv_vz_stat
                  |L1.18880|
                          DCD      ||area_number.22||
                  |L1.18884|
                          DCD      FORVARDBPSCHHOUR
                  |L1.18888|
                          DCD      NUMIST
                  |L1.18892|
                          DCD      load_U
                  |L1.18896|
                          DCD      U_OUT_KONTR_MAX
                  |L1.18900|
                          DCD      outVoltContrHndlCnt
                  |L1.18904|
                          DCD      outVoltContrHndlCnt_
                  |L1.18908|
                          DCD      U_OUT_KONTR_MIN
                  |L1.18912|
                          DCD      U_OUT_KONTR_DELAY
                  |L1.18916|
                          DCD      uout_av
                  |L1.18920|
                          DCD      USIGN
                  |L1.18924|
                          DCD      bSILENT
                  |L1.18928|
                          DCD      TVENTMAX
                  |L1.18932|
                          DCD      bps
                  |L1.18936|
                          DCD      RELEVENTSIGN
                  |L1.18940|
                          DCD      TVENTON
                  |L1.18944|
                          DCD      TVENTOFF
                  |L1.18948|
                          DCD      bat
                  |L1.18952|
                          DCD      BAT_IS_ON
                  |L1.18956|
004a0c  2b01              CMP      r3,#1                 ;8133
004a0e  d1d3              BNE      |L1.18872|
004a10  b118              CBZ      r0,|L1.18970|
004a12  4295              CMP      r5,r2                 ;8136
004a14  dad0              BGE      |L1.18872|
004a16  2e0a              CMP      r6,#0xa               ;8136
004a18  d2ce              BCS      |L1.18872|
                  |L1.18970|
004a1a  2802              CMP      r0,#2                 ;8138
004a1c  db04              BLT      |L1.18984|
004a1e  4297              CMP      r7,r2                 ;8138
004a20  daca              BGE      |L1.18872|
004a22  9906              LDR      r1,[sp,#0x18]         ;8138
004a24  290a              CMP      r1,#0xa               ;8138
004a26  d2c7              BCS      |L1.18872|
                  |L1.18984|
004a28  2803              CMP      r0,#3                 ;8140
004a2a  db05              BLT      |L1.19000|
004a2c  9905              LDR      r1,[sp,#0x14]         ;8140
004a2e  4291              CMP      r1,r2                 ;8140
004a30  dac2              BGE      |L1.18872|
004a32  9904              LDR      r1,[sp,#0x10]         ;8140
004a34  290a              CMP      r1,#0xa               ;8140
004a36  d2bf              BCS      |L1.18872|
                  |L1.19000|
004a38  2804              CMP      r0,#4                 ;8142
004a3a  db05              BLT      |L1.19016|
004a3c  9903              LDR      r1,[sp,#0xc]          ;8142
004a3e  4291              CMP      r1,r2                 ;8142
004a40  daba              BGE      |L1.18872|
004a42  9902              LDR      r1,[sp,#8]            ;8142
004a44  290a              CMP      r1,#0xa               ;8142
004a46  d2b7              BCS      |L1.18872|
                  |L1.19016|
004a48  2805              CMP      r0,#5                 ;8144
004a4a  db04              BLT      |L1.19030|
004a4c  4594              CMP      r12,r2                ;8144
004a4e  dab3              BGE      |L1.18872|
004a50  9901              LDR      r1,[sp,#4]            ;8144
004a52  290a              CMP      r1,#0xa               ;8144
004a54  d2b0              BCS      |L1.18872|
                  |L1.19030|
004a56  2806              CMP      r0,#6                 ;8146
004a58  db04              BLT      |L1.19044|
004a5a  4590              CMP      r8,r2                 ;8146
004a5c  daac              BGE      |L1.18872|
004a5e  9900              LDR      r1,[sp,#0]            ;8146
004a60  290a              CMP      r1,#0xa               ;8146
004a62  d2a9              BCS      |L1.18872|
                  |L1.19044|
004a64  2807              CMP      r0,#7                 ;8148
004a66  db04              BLT      |L1.19058|
004a68  4591              CMP      r9,r2                 ;8148
004a6a  daa5              BGE      |L1.18872|
004a6c  f1be0f0a          CMP      lr,#0xa               ;8148
004a70  d2a2              BCS      |L1.18872|
                  |L1.19058|
004a72  2808              CMP      r0,#8                 ;8150
004a74  db04              BLT      |L1.19072|
004a76  4592              CMP      r10,r2                ;8150
004a78  da9e              BGE      |L1.18872|
004a7a  f1bb0f0a          CMP      r11,#0xa              ;8150
004a7e  d29b              BCS      |L1.18872|
                  |L1.19072|
004a80  f04f0000          MOV      r0,#0                 ;8153
004a84  7020              STRB     r0,[r4,#0]            ;8153
                  |L1.19078|
004a86  e6d8              B        |L1.18490|
                  |L1.19080|
004a88  4822              LDR      r0,|L1.19220|
004a8a  4d23              LDR      r5,|L1.19224|
004a8c  4e23              LDR      r6,|L1.19228|
004a8e  f9b00000          LDRSH    r0,[r0,#0]            ;8159  ; NUMDT
004a92  f9b55000          LDRSH    r5,[r5,#0]            ;8160
004a96  7836              LDRB     r6,[r6,#0]            ;8160
004a98  b110              CBZ      r0,|L1.19104|
004a9a  428d              CMP      r5,r1                 ;8160
004a9c  dc1d              BGT      |L1.19162|
004a9e  b9e6              CBNZ     r6,|L1.19162|
                  |L1.19104|
004aa0  4f1d              LDR      r7,|L1.19224|
004aa2  f8dfc078          LDR      r12,|L1.19228|
004aa6  2801              CMP      r0,#1                 ;8162
004aa8  f9b77002          LDRSH    r7,[r7,#2]            ;8162
004aac  f89cc001          LDRB     r12,[r12,#1]          ;8162
004ab0  dd04              BLE      |L1.19132|
004ab2  428f              CMP      r7,r1                 ;8162
004ab4  dc11              BGT      |L1.19162|
004ab6  f1bc0f00          CMP      r12,#0                ;8162
004aba  d10e              BNE      |L1.19162|
                  |L1.19132|
004abc  f8df8058          LDR      r8,|L1.19224|
004ac0  f8df9058          LDR      r9,|L1.19228|
004ac4  2802              CMP      r0,#2                 ;8164
004ac6  f9b88004          LDRSH    r8,[r8,#4]            ;8164
004aca  f8999002          LDRB     r9,[r9,#2]            ;8164
004ace  dd08              BLE      |L1.19170|
004ad0  4588              CMP      r8,r1                 ;8164
004ad2  dc02              BGT      |L1.19162|
004ad4  f1b90f00          CMP      r9,#0                 ;8164
004ad8  d003              BEQ      |L1.19170|
                  |L1.19162|
004ada  f04f0001          MOV      r0,#1                 ;8167
004ade  7020              STRB     r0,[r4,#0]            ;8167
004ae0  e6ab              B        |L1.18490|
                  |L1.19170|
004ae2  2b01              CMP      r3,#1                 ;8169
004ae4  d1cf              BNE      |L1.19078|
004ae6  b118              CBZ      r0,|L1.19184|
004ae8  4295              CMP      r5,r2                 ;8172
004aea  dacc              BGE      |L1.19078|
004aec  2e00              CMP      r6,#0                 ;8172
004aee  d1ca              BNE      |L1.19078|
                  |L1.19184|
004af0  2802              CMP      r0,#2                 ;8174
004af2  db04              BLT      |L1.19198|
004af4  4297              CMP      r7,r2                 ;8174
004af6  dac6              BGE      |L1.19078|
004af8  f1bc0f00          CMP      r12,#0                ;8174
004afc  d1c3              BNE      |L1.19078|
                  |L1.19198|
004afe  2803              CMP      r0,#3                 ;8176
004b00  db04              BLT      |L1.19212|
004b02  4590              CMP      r8,r2                 ;8176
004b04  dabf              BGE      |L1.19078|
004b06  f1b90f00          CMP      r9,#0                 ;8176
004b0a  d1bc              BNE      |L1.19078|
                  |L1.19212|
004b0c  f04f0000          MOV      r0,#0                 ;8179
004b10  7020              STRB     r0,[r4,#0]            ;8179
004b12  e692              B        |L1.18490|
;;;8185   
                          ENDP

                  |L1.19220|
                          DCD      NUMDT
                  |L1.19224|
                          DCD      t_ext
                  |L1.19228|
                          DCD      ND_EXT

                          AREA ||area_number.2||, CODE, READONLY, ALIGN=2

                          EXPORTAS ||area_number.2||, ||.text||
                  samokalibr_init PROC
;;;232    //-----------------------------------------------
;;;233    void ke_start(char in)
000000  4902              LDR      r1,|L2.12|
;;;234    {          
000002  f24060f9          MOV      r0,#0x6f9
;;;235    ke_start_stat=(enum_ke_start_stat)0;		 
000006  87c8              STRH     r0,[r1,#0x3e]
000008  4770              BX       lr
;;;236    
;;;237    if(spc_stat==spcVZ)ke_start_stat=kssNOT_VZ;
;;;238    #ifndef UKU_220_IPS_TERMOKOMPENSAT
;;;239    else if(BAT_IS_ON[in]!=bisON)ke_start_stat=kssNOT_BAT;
;;;240    #endif
;;;241    else if(bat[in]._av&(1<<0))ke_start_stat=kssNOT_BAT_AV;
;;;242    else if(bat[in]._temper_stat&(1<<1))ke_start_stat=kssNOT_BAT_AV_T;
;;;243    else if(bat[in]._av&(1<<1))ke_start_stat=kssNOT_BAT_AV_ASS;
;;;244    else if(bat[in]._Ib>IKB)ke_start_stat=kssNOT_BAT_ZAR;
;;;245    else if(bat[in]._Ib<-IKB)ke_start_stat=kssNOT_BAT_RAZR;
;;;246    else if((spc_stat==spcKE)&&(spc_bat==0))ke_start_stat=kssNOT_KE1;
;;;247    else if((spc_stat==spcKE)&&(spc_bat==1))ke_start_stat=kssNOT_KE2;
;;;248    else 
;;;249    	{
;;;250    
;;;251    	ke_start_stat=kssYES;
;;;252    
;;;253    	spc_stat=spcKE;
;;;254    	__ee_spc_stat=spcKE;
;;;255    	lc640_write_int(EE_SPC_STAT,__ee_spc_stat);
;;;256    	
;;;257    	spc_bat=in;
;;;258    	__ee_spc_bat=in;
;;;259    	lc640_write_int(EE_SPC_BAT,__ee_spc_bat);
;;;260    
;;;261    	bat[in]._zar_cnt_ke=0;
;;;262    	lc640_write_int(ADR_EE_BAT_ZAR_CNT_KE[in],0);
;;;263    	
;;;264    	spc_phase=0;
;;;265    	__ee_spc_phase=0;
;;;266    	lc640_write_int(EE_SPC_PHASE,__ee_spc_phase);
;;;267    
;;;268    	//ke_mem_hndl(in,lc640_read_int(ADR_EE_BAT_ZAR_CNT_KE[spc_bat]));
;;;269    
;;;270    		{					
;;;271    		signed short temp_temp;
;;;272    		signed char temp;
;;;273    		temp_temp=bat[in]._u_old[((bat_u_old_cnt+1)&0x07)]; 
;;;274    		    
;;;275    		temp=LPC_RTC->YEAR;
;;;276    		gran_char(&temp,1,99);
;;;277    		*((char*)(&(ke_date[0])))=temp;
;;;278    			
;;;279    		temp=LPC_RTC->MONTH;
;;;280    		gran_char(&temp,1,12);
;;;281    		*(((char*)(&(ke_date[0])))+1)=temp;
;;;282    		
;;;283    		temp=LPC_RTC->DOM;
;;;284    		gran_char(&temp,1,31);
;;;285    		*(((char*)(&(ke_date[0])))+2)=temp;			
;;;286    				
;;;287    		*(((char*)(&(ke_date[0])))+3)=*((char*)&temp_temp);
;;;288    		lc640_write_long(EE_SPC_KE_DATE0,ke_date[0]);
;;;289    
;;;290    		temp=LPC_RTC->HOUR;
;;;291    		gran_char(&temp,0,23);
;;;292    		*((char*)(&(ke_date[1])))=temp;
;;;293                   
;;;294    		temp=LPC_RTC->MIN;
;;;295    		gran_char(&temp,0,59);
;;;296    		*(((char*)(&(ke_date[1])))+1)=temp;
;;;297    	          
;;;298    		temp=LPC_RTC->SEC;
;;;299    		gran_char(&temp,0,59);
;;;300    		*(((char*)(&(ke_date[1])))+2)=temp;
;;;301    			
;;;302    		*(((char*)(&(ke_date[1])))+3)=*(((char*)&temp_temp)+1);
;;;303    		lc640_write_long(EE_SPC_KE_DATE1,ke_date[1]);
;;;304    		}
;;;305    
;;;306    	}
;;;307    }
;;;308    
                          ENDP

00000a  0000              DCW      0x0000
                  |L2.12|
                          DCD      ||area_number.22||

                          AREA ||area_number.3||, CODE, READONLY, ALIGN=2

                          EXPORTAS ||area_number.3||, ||.text||
                  adc_drv6 PROC
;;;232    //-----------------------------------------------
;;;233    void ke_start(char in)
000000  e92d41f0          PUSH     {r4-r8,lr}
;;;234    {          
000004  4c80              LDR      r4,|L3.520|
;;;235    ke_start_stat=(enum_ke_start_stat)0;		 
000006  8860              LDRH     r0,[r4,#2]  ; adc_self_ch_buff
000008  8821              LDRH     r1,[r4,#0]  ; adc_self_ch_buff
00000a  1a40              SUBS     r0,r0,r1
00000c  b200              SXTH     r0,r0
;;;236    
;;;237    if(spc_stat==spcVZ)ke_start_stat=kssNOT_VZ;
00000e  f7fffffe          BL       abs_pal
000012  1da5              ADDS     r5,r4,#6
000014  8028              STRH     r0,[r5,#0]
000016  88a0              LDRH     r0,[r4,#4]  ; adc_self_ch_buff
;;;238    #ifndef UKU_220_IPS_TERMOKOMPENSAT
;;;239    else if(BAT_IS_ON[in]!=bisON)ke_start_stat=kssNOT_BAT;
;;;240    #endif
;;;241    else if(bat[in]._av&(1<<0))ke_start_stat=kssNOT_BAT_AV;
000018  8861              LDRH     r1,[r4,#2]  ; adc_self_ch_buff
00001a  1a40              SUBS     r0,r0,r1
00001c  b200              SXTH     r0,r0
00001e  f7fffffe          BL       abs_pal
000022  8068              STRH     r0,[r5,#2]
000024  88a0              LDRH     r0,[r4,#4]  ; adc_self_ch_buff
000026  8821              LDRH     r1,[r4,#0]  ; adc_self_ch_buff
000028  1a40              SUBS     r0,r0,r1
00002a  b200              SXTH     r0,r0
00002c  f7fffffe          BL       abs_pal
000030  80a8              STRH     r0,[r5,#4]
000032  f44f7196          MOV      r1,#0x12c
;;;242    else if(bat[in]._temper_stat&(1<<1))ke_start_stat=kssNOT_BAT_AV_T;
;;;243    else if(bat[in]._av&(1<<1))ke_start_stat=kssNOT_BAT_AV_ASS;
;;;244    else if(bat[in]._Ib>IKB)ke_start_stat=kssNOT_BAT_ZAR;
;;;245    else if(bat[in]._Ib<-IKB)ke_start_stat=kssNOT_BAT_RAZR;
;;;246    else if((spc_stat==spcKE)&&(spc_bat==0))ke_start_stat=kssNOT_KE1;
;;;247    else if((spc_stat==spcKE)&&(spc_bat==1))ke_start_stat=kssNOT_KE2;
;;;248    else 
;;;249    	{
;;;250    
;;;251    	ke_start_stat=kssYES;
;;;252    
;;;253    	spc_stat=spcKE;
;;;254    	__ee_spc_stat=spcKE;
;;;255    	lc640_write_int(EE_SPC_STAT,__ee_spc_stat);
;;;256    	
;;;257    	spc_bat=in;
;;;258    	__ee_spc_bat=in;
;;;259    	lc640_write_int(EE_SPC_BAT,__ee_spc_bat);
;;;260    
;;;261    	bat[in]._zar_cnt_ke=0;
;;;262    	lc640_write_int(ADR_EE_BAT_ZAR_CNT_KE[in],0);
;;;263    	
;;;264    	spc_phase=0;
;;;265    	__ee_spc_phase=0;
;;;266    	lc640_write_int(EE_SPC_PHASE,__ee_spc_phase);
;;;267    
;;;268    	//ke_mem_hndl(in,lc640_read_int(ADR_EE_BAT_ZAR_CNT_KE[spc_bat]));
;;;269    
;;;270    		{					
;;;271    		signed short temp_temp;
;;;272    		signed char temp;
;;;273    		temp_temp=bat[in]._u_old[((bat_u_old_cnt+1)&0x07)]; 
;;;274    		    
;;;275    		temp=LPC_RTC->YEAR;
;;;276    		gran_char(&temp,1,99);
;;;277    		*((char*)(&(ke_date[0])))=temp;
;;;278    			
;;;279    		temp=LPC_RTC->MONTH;
;;;280    		gran_char(&temp,1,12);
;;;281    		*(((char*)(&(ke_date[0])))+1)=temp;
;;;282    		
;;;283    		temp=LPC_RTC->DOM;
;;;284    		gran_char(&temp,1,31);
;;;285    		*(((char*)(&(ke_date[0])))+2)=temp;			
;;;286    				
;;;287    		*(((char*)(&(ke_date[0])))+3)=*((char*)&temp_temp);
;;;288    		lc640_write_long(EE_SPC_KE_DATE0,ke_date[0]);
;;;289    
;;;290    		temp=LPC_RTC->HOUR;
;;;291    		gran_char(&temp,0,23);
;;;292    		*((char*)(&(ke_date[1])))=temp;
;;;293                   
;;;294    		temp=LPC_RTC->MIN;
;;;295    		gran_char(&temp,0,59);
;;;296    		*(((char*)(&(ke_date[1])))+1)=temp;
;;;297    	          
;;;298    		temp=LPC_RTC->SEC;
;;;299    		gran_char(&temp,0,59);
;;;300    		*(((char*)(&(ke_date[1])))+2)=temp;
;;;301    			
;;;302    		*(((char*)(&(ke_date[1])))+3)=*(((char*)&temp_temp)+1);
;;;303    		lc640_write_long(EE_SPC_KE_DATE1,ke_date[1]);
;;;304    		}
;;;305    
;;;306    	}
;;;307    }
000036  f1a40696          SUB      r6,r4,#0x96
00003a  4288              CMP      r0,r1
00003c  da02              BGE      |L3.68|
00003e  88a0              LDRH     r0,[r4,#4]            ;242  ; adc_self_ch_buff
000040  8570              STRH     r0,[r6,#0x2a]         ;242
000042  e00c              B        |L3.94|
                  |L3.68|
000044  f9b50002          LDRSH    r0,[r5,#2]            ;242  ; adc_self_ch_disp
000048  4288              CMP      r0,r1                 ;242
00004a  da02              BGE      |L3.82|
00004c  8860              LDRH     r0,[r4,#2]            ;243  ; adc_self_ch_buff
00004e  8570              STRH     r0,[r6,#0x2a]         ;243
000050  e005              B        |L3.94|
                  |L3.82|
000052  f9b50000          LDRSH    r0,[r5,#0]            ;243  ; adc_self_ch_disp
000056  4288              CMP      r0,r1
000058  da01              BGE      |L3.94|
00005a  8820              LDRH     r0,[r4,#0]            ;244  ; adc_self_ch_buff
00005c  8570              STRH     r0,[r6,#0x2a]         ;244
                  |L3.94|
00005e  78f7              LDRB     r7,[r6,#3]            ;244  ; adc_ch_net
000060  2200              MOVS     r2,#0                 ;244
000062  b3f7              CBZ      r7,|L3.226|
000064  79b3              LDRB     r3,[r6,#6]            ;244  ; adc_window_flag
000066  4869              LDR      r0,|L3.524|
000068  b18b              CBZ      r3,|L3.142|
00006a  f9b6102a          LDRSH    r1,[r6,#0x2a]         ;244  ; adc_result
00006e  6804              LDR      r4,[r0,#0]            ;245  ; main_power_buffer
000070  eb0404a1          ADD      r4,r4,r1,ASR #2       ;245
000074  6004              STR      r4,[r0,#0]            ;245  ; main_power_buffer
000076  6844              LDR      r4,[r0,#4]            ;245  ; main_power_buffer
000078  eb0404a1          ADD      r4,r4,r1,ASR #2       ;245
00007c  6044              STR      r4,[r0,#4]            ;235  ; main_power_buffer
00007e  6884              LDR      r4,[r0,#8]            ;246  ; main_power_buffer
000080  eb0404a1          ADD      r4,r4,r1,ASR #2       ;246
000084  6084              STR      r4,[r0,#8]            ;246  ; main_power_buffer
000086  68c4              LDR      r4,[r0,#0xc]          ;247  ; main_power_buffer
000088  eb0401a1          ADD      r1,r4,r1,ASR #2       ;247
00008c  60c1              STR      r1,[r0,#0xc]          ;246  ; main_power_buffer
                  |L3.142|
00008e  f9b6102a          LDRSH    r1,[r6,#0x2a]         ;246  ; adc_result
000092  2964              CMP      r1,#0x64
000094  da04              BGE      |L3.160|
000096  8df1              LDRH     r1,[r6,#0x2e]         ;247  ; adc_zero_cnt
000098  f1010101          ADD      r1,r1,#1              ;251
00009c  85f1              STRH     r1,[r6,#0x2e]         ;251
00009e  e000              B        |L3.162|
                  |L3.160|
0000a0  85f2              STRH     r2,[r6,#0x2e]         ;254
                  |L3.162|
0000a2  f9b6402e          LDRSH    r4,[r6,#0x2e]         ;254  ; adc_zero_cnt
0000a6  f44f61fa          MOV      r1,#0x7d0             ;255
0000aa  428c              CMP      r4,r1                 ;255
0000ac  db05              BLT      |L3.186|
0000ae  85f1              STRH     r1,[r6,#0x2e]         ;257
0000b0  6002              STR      r2,[r0,#0]            ;258  ; main_power_buffer
0000b2  6042              STR      r2,[r0,#4]            ;258  ; main_power_buffer
0000b4  6082              STR      r2,[r0,#8]            ;259  ; main_power_buffer
0000b6  60c2              STR      r2,[r0,#0xc]          ;259  ; main_power_buffer
0000b8  8532              STRH     r2,[r6,#0x28]         ;259
                  |L3.186|
0000ba  8df1              LDRH     r1,[r6,#0x2e]         ;259  ; adc_zero_cnt
0000bc  2905              CMP      r1,#5                 ;259
0000be  d14f              BNE      |L3.352|
0000c0  b1bb              CBZ      r3,|L3.242|
0000c2  8db1              LDRH     r1,[r6,#0x2c]         ;262  ; adc_gorb_cnt
0000c4  f1010101          ADD      r1,r1,#1              ;262
0000c8  b209              SXTH     r1,r1                 ;262
0000ca  85b1              STRH     r1,[r6,#0x2c]         ;262
0000cc  f5b17f00          CMP      r1,#0x200             ;264
0000d0  db00              BLT      |L3.212|
0000d2  85b2              STRH     r2,[r6,#0x2c]         ;266
                  |L3.212|
0000d4  f9b6102c          LDRSH    r1,[r6,#0x2c]         ;266  ; adc_gorb_cnt
0000d8  064c              LSLS     r4,r1,#25             ;266
0000da  d10a              BNE      |L3.242|
0000dc  ea4f11e1          ASR      r1,r1,#7              ;273
0000e0  e000              B        |L3.228|
                  |L3.226|
0000e2  e015              B        |L3.272|
                  |L3.228|
0000e4  f8504021          LDR      r4,[r0,r1,LSL #2]     ;273
0000e8  ea4f2424          ASR      r4,r4,#8              ;273
0000ec  8534              STRH     r4,[r6,#0x28]         ;273
0000ee  f8402021          STR      r2,[r0,r1,LSL #2]     ;273
                  |L3.242|
0000f2  f9b60030          LDRSH    r0,[r6,#0x30]         ;275  ; adc_window_cnt
0000f6  2896              CMP      r0,#0x96              ;276
0000f8  dd01              BLE      |L3.254|
0000fa  b103              CBZ      r3,|L3.254|
0000fc  71b2              STRB     r2,[r6,#6]            ;276
                  |L3.254|
0000fe  381f              SUBS     r0,r0,#0x1f           ;276
000100  2827              CMP      r0,#0x27              ;276
000102  d22d              BCS      |L3.352|
000104  79b0              LDRB     r0,[r6,#6]            ;277  ; adc_window_flag
000106  bb58              CBNZ     r0,|L3.352|
000108  f04f0001          MOV      r0,#1                 ;277
00010c  71b0              STRB     r0,[r6,#6]            ;277
00010e  e027              B        |L3.352|
                  |L3.272|
000110  483f              LDR      r0,|L3.528|
000112  7935              LDRB     r5,[r6,#4]            ;280  ; adc_ch
000114  7973              LDRB     r3,[r6,#5]            ;280  ; adc_ch_cnt
000116  eb001485          ADD      r4,r0,r5,LSL #6       ;280
00011a  f9b6102a          LDRSH    r1,[r6,#0x2a]         ;280  ; adc_result
00011e  f8441023          STR      r1,[r4,r3,LSL #2]     ;281
000122  0798              LSLS     r0,r3,#30             ;283
000124  d10f              BNE      |L3.326|
000126  4601              MOV      r1,r0                 ;284
                  |L3.296|
000128  f854c020          LDR      r12,[r4,r0,LSL #2]    ;284
00012c  4461              ADD      r1,r1,r12             ;284
00012e  f1000001          ADD      r0,r0,#1              ;284
000132  b2c0              UXTB     r0,r0                 ;285
000134  2810              CMP      r0,#0x10              ;285
000136  d3f7              BCC      |L3.296|
000138  ea4f1021          ASR      r0,r1,#4              ;287
00013c  4933              LDR      r1,|L3.524|
00013e  f1a10120          SUB      r1,r1,#0x20           ;288
000142  f8210015          STRH     r0,[r1,r5,LSL #1]     ;288
                  |L3.326|
000146  1c6d              ADDS     r5,r5,#1              ;290
000148  b2e8              UXTB     r0,r5                 ;290
00014a  7130              STRB     r0,[r6,#4]            ;291
00014c  2810              CMP      r0,#0x10              ;291
00014e  d307              BCC      |L3.352|
000150  7132              STRB     r2,[r6,#4]            ;291
000152  f1030301          ADD      r3,r3,#1              ;291
000156  b2d8              UXTB     r0,r3                 ;292
000158  7170              STRB     r0,[r6,#5]            ;292
00015a  2810              CMP      r0,#0x10              ;294
00015c  d300              BCC      |L3.352|
00015e  7172              STRB     r2,[r6,#5]            ;295
                  |L3.352|
000160  70b2              STRB     r2,[r6,#2]            ;295
000162  f1070701          ADD      r7,r7,#1              ;295
000166  f0070001          AND      r0,r7,#1              ;295
00016a  70f0              STRB     r0,[r6,#3]            ;296
00016c  4a29              LDR      r2,|L3.532|
00016e  b130              CBZ      r0,|L3.382|
000170  6810              LDR      r0,[r2,#0]            ;298
000172  f02000ff          BIC      r0,r0,#0xff           ;299
000176  f1000004          ADD      r0,r0,#4              ;299
00017a  6010              STR      r0,[r2,#0]            ;299
00017c  e03d              B        |L3.506|
                  |L3.382|
00017e  7931              LDRB     r1,[r6,#4]            ;300  ; adc_ch
000180  0708              LSLS     r0,r1,#28             ;300
000182  d406              BMI      |L3.402|
000184  6810              LDR      r0,[r2,#0]            ;302
000186  f02000ff          BIC      r0,r0,#0xff           ;302
00018a  f1000001          ADD      r0,r0,#1              ;303
00018e  6010              STR      r0,[r2,#0]            ;303
000190  e005              B        |L3.414|
                  |L3.402|
000192  6810              LDR      r0,[r2,#0]
000194  f02000ff          BIC      r0,r0,#0xff
000198  f1000002          ADD      r0,r0,#2              ;247
00019c  6010              STR      r0,[r2,#0]
                  |L3.414|
00019e  481e              LDR      r0,|L3.536|
0001a0  6803              LDR      r3,[r0,#0]
0001a2  f0435380          ORR      r3,r3,#0x10000000
0001a6  6003              STR      r3,[r0,#0]
0001a8  6a03              LDR      r3,[r0,#0x20]
0001aa  f0434380          ORR      r3,r3,#0x40000000
0001ae  6203              STR      r3,[r0,#0x20]
0001b0  6e03              LDR      r3,[r0,#0x60]
0001b2  f0436380          ORR      r3,r3,#0x4000000
0001b6  6603              STR      r3,[r0,#0x60]
0001b8  07cb              LSLS     r3,r1,#31
0001ba  d00a              BEQ      |L3.466|
0001bc  6943              LDR      r3,[r0,#0x14]
0001be  f0435380          ORR      r3,r3,#0x10000000
0001c2  6143              STR      r3,[r0,#0x14]
                  |L3.452|
0001c4  078b              LSLS     r3,r1,#30
0001c6  d409              BMI      |L3.476|
0001c8  6b43              LDR      r3,[r0,#0x34]
0001ca  f0234380          BIC      r3,r3,#0x40000000
0001ce  6343              STR      r3,[r0,#0x34]
0001d0  e008              B        |L3.484|
                  |L3.466|
0001d2  6943              LDR      r3,[r0,#0x14]
0001d4  f0235380          BIC      r3,r3,#0x10000000
0001d8  6143              STR      r3,[r0,#0x14]
0001da  e7f3              B        |L3.452|
                  |L3.476|
0001dc  6b43              LDR      r3,[r0,#0x34]
0001de  f0434380          ORR      r3,r3,#0x40000000
0001e2  6343              STR      r3,[r0,#0x34]
                  |L3.484|
0001e4  0749              LSLS     r1,r1,#29
0001e6  d404              BMI      |L3.498|
0001e8  6f41              LDR      r1,[r0,#0x74]
0001ea  f0216180          BIC      r1,r1,#0x4000000
0001ee  6741              STR      r1,[r0,#0x74]
0001f0  e003              B        |L3.506|
                  |L3.498|
0001f2  6f41              LDR      r1,[r0,#0x74]
0001f4  f0416180          ORR      r1,r1,#0x4000000
0001f8  6741              STR      r1,[r0,#0x74]
                  |L3.506|
0001fa  6810              LDR      r0,[r2,#0]
0001fc  f0407080          ORR      r0,r0,#0x1000000
000200  6010              STR      r0,[r2,#0]
000202  e8bd81f0          POP      {r4-r8,pc}
;;;308    
                          ENDP

000206  0000              DCW      0x0000
                  |L3.520|
                          DCD      ||area_number.22||+0x96
                  |L3.524|
                          DCD      ||.bss||+0x420
                  |L3.528|
                          DCD      ||.bss||
                  |L3.532|
                          DCD      0x40034000
                  |L3.536|
                          DCD      0x2009c000

                          AREA ||area_number.4||, CODE, READONLY, ALIGN=2

                          EXPORTAS ||area_number.4||, ||.text||
                  inv_drv PROC
;;;232    //-----------------------------------------------
;;;233    void ke_start(char in)
000000  b570              PUSH     {r4-r6,lr}
;;;234    {          
000002  4604              MOV      r4,r0
000004  f04f0207          MOV      r2,#7
;;;235    ke_start_stat=(enum_ke_start_stat)0;		 
000008  f04f0101          MOV      r1,#1
00000c  48a4              LDR      r0,|L4.672|
;;;236    
;;;237    if(spc_stat==spcVZ)ke_start_stat=kssNOT_VZ;
00000e  f7fffffe          BL       gran_char
000012  48a4              LDR      r0,|L4.676|
000014  eb040144          ADD      r1,r4,r4,LSL #1
;;;238    #ifndef UKU_220_IPS_TERMOKOMPENSAT
;;;239    else if(BAT_IS_ON[in]!=bisON)ke_start_stat=kssNOT_BAT;
;;;240    #endif
;;;241    else if(bat[in]._av&(1<<0))ke_start_stat=kssNOT_BAT_AV;
000018  eb001541          ADD      r5,r0,r1,LSL #5
00001c  f8950047          LDRB     r0,[r5,#0x47]
000020  f8951046          LDRB     r1,[r5,#0x46]
000024  ea800001          EOR      r0,r0,r1
000028  4a9f              LDR      r2,|L4.680|
00002a  b100              CBZ      r0,|L4.46|
00002c  7050              STRB     r0,[r2,#1]
                  |L4.46|
00002e  ea010100          AND      r1,r1,r0
000032  b101              CBZ      r1,|L4.54|
;;;242    else if(bat[in]._temper_stat&(1<<1))ke_start_stat=kssNOT_BAT_AV_T;
;;;243    else if(bat[in]._av&(1<<1))ke_start_stat=kssNOT_BAT_AV_ASS;
;;;244    else if(bat[in]._Ib>IKB)ke_start_stat=kssNOT_BAT_ZAR;
;;;245    else if(bat[in]._Ib<-IKB)ke_start_stat=kssNOT_BAT_RAZR;
;;;246    else if((spc_stat==spcKE)&&(spc_bat==0))ke_start_stat=kssNOT_KE1;
;;;247    else if((spc_stat==spcKE)&&(spc_bat==1))ke_start_stat=kssNOT_KE2;
;;;248    else 
;;;249    	{
;;;250    
;;;251    	ke_start_stat=kssYES;
;;;252    
;;;253    	spc_stat=spcKE;
;;;254    	__ee_spc_stat=spcKE;
;;;255    	lc640_write_int(EE_SPC_STAT,__ee_spc_stat);
;;;256    	
;;;257    	spc_bat=in;
;;;258    	__ee_spc_bat=in;
;;;259    	lc640_write_int(EE_SPC_BAT,__ee_spc_bat);
;;;260    
;;;261    	bat[in]._zar_cnt_ke=0;
;;;262    	lc640_write_int(ADR_EE_BAT_ZAR_CNT_KE[in],0);
;;;263    	
;;;264    	spc_phase=0;
;;;265    	__ee_spc_phase=0;
;;;266    	lc640_write_int(EE_SPC_PHASE,__ee_spc_phase);
;;;267    
;;;268    	//ke_mem_hndl(in,lc640_read_int(ADR_EE_BAT_ZAR_CNT_KE[spc_bat]));
;;;269    
;;;270    		{					
;;;271    		signed short temp_temp;
;;;272    		signed char temp;
;;;273    		temp_temp=bat[in]._u_old[((bat_u_old_cnt+1)&0x07)]; 
;;;274    		    
;;;275    		temp=LPC_RTC->YEAR;
;;;276    		gran_char(&temp,1,99);
;;;277    		*((char*)(&(ke_date[0])))=temp;
;;;278    			
;;;279    		temp=LPC_RTC->MONTH;
;;;280    		gran_char(&temp,1,12);
;;;281    		*(((char*)(&(ke_date[0])))+1)=temp;
;;;282    		
;;;283    		temp=LPC_RTC->DOM;
;;;284    		gran_char(&temp,1,31);
;;;285    		*(((char*)(&(ke_date[0])))+2)=temp;			
;;;286    				
;;;287    		*(((char*)(&(ke_date[0])))+3)=*((char*)&temp_temp);
;;;288    		lc640_write_long(EE_SPC_KE_DATE0,ke_date[0]);
;;;289    
;;;290    		temp=LPC_RTC->HOUR;
;;;291    		gran_char(&temp,0,23);
;;;292    		*((char*)(&(ke_date[1])))=temp;
;;;293                   
;;;294    		temp=LPC_RTC->MIN;
;;;295    		gran_char(&temp,0,59);
;;;296    		*(((char*)(&(ke_date[1])))+1)=temp;
;;;297    	          
;;;298    		temp=LPC_RTC->SEC;
;;;299    		gran_char(&temp,0,59);
;;;300    		*(((char*)(&(ke_date[1])))+2)=temp;
;;;301    			
;;;302    		*(((char*)(&(ke_date[1])))+3)=*(((char*)&temp_temp)+1);
;;;303    		lc640_write_long(EE_SPC_KE_DATE1,ke_date[1]);
;;;304    		}
;;;305    
;;;306    	}
;;;307    }
000034  7091              STRB     r1,[r2,#2]
                  |L4.54|
000036  ea000301          AND      r3,r0,r1
00003a  07db              LSLS     r3,r3,#31
00003c  d027              BEQ      |L4.142|
00003e  78d0              LDRB     r0,[r2,#3]            ;242  ; plazma_inv
000040  f1000001          ADD      r0,r0,#1              ;242
000044  70d0              STRB     r0,[r2,#3]            ;242
000046  b134              CBZ      r4,|L4.86|
000048  2c01              CMP      r4,#1                 ;242
00004a  d00b              BEQ      |L4.100|
00004c  2c02              CMP      r4,#2                 ;243
00004e  d010              BEQ      |L4.114|
000050  2c03              CMP      r4,#3                 ;243
000052  d015              BEQ      |L4.128|
000054  e120              B        |L4.664|
                  |L4.86|
000056  2301              MOVS     r3,#1
000058  461a              MOV      r2,r3                 ;244
00005a  210e              MOVS     r1,#0xe               ;244
00005c  a093              ADR      r0,|L4.684|
00005e  f7fffffe          BL       snmp_trap_send
000062  e119              B        |L4.664|
                  |L4.100|
000064  2301              MOVS     r3,#1                 ;244
000066  2202              MOVS     r2,#2                 ;244
000068  210e              MOVS     r1,#0xe               ;244
00006a  a097              ADR      r0,|L4.712|
00006c  f7fffffe          BL       snmp_trap_send
000070  e112              B        |L4.664|
                  |L4.114|
000072  2301              MOVS     r3,#1                 ;245
000074  2203              MOVS     r2,#3                 ;245
000076  210e              MOVS     r1,#0xe               ;245
000078  a09a              ADR      r0,|L4.740|
00007a  f7fffffe          BL       snmp_trap_send
00007e  e10b              B        |L4.664|
                  |L4.128|
000080  2301              MOVS     r3,#1                 ;246
000082  2204              MOVS     r2,#4                 ;246
000084  210e              MOVS     r1,#0xe               ;246
000086  a09e              ADR      r0,|L4.768|
000088  f7fffffe          BL       snmp_trap_send
00008c  e104              B        |L4.664|
                  |L4.142|
00008e  0783              LSLS     r3,r0,#30             ;246
000090  d529              BPL      |L4.230|
000092  078b              LSLS     r3,r1,#30
000094  d527              BPL      |L4.230|
000096  78d0              LDRB     r0,[r2,#3]            ;247  ; plazma_inv
000098  f1000001          ADD      r0,r0,#1              ;251
00009c  70d0              STRB     r0,[r2,#3]            ;251
00009e  b134              CBZ      r4,|L4.174|
0000a0  2c01              CMP      r4,#1                 ;254
0000a2  d00b              BEQ      |L4.188|
0000a4  2c02              CMP      r4,#2                 ;255
0000a6  d010              BEQ      |L4.202|
0000a8  2c03              CMP      r4,#3                 ;255
0000aa  d015              BEQ      |L4.216|
0000ac  e0f4              B        |L4.664|
                  |L4.174|
0000ae  2302              MOVS     r3,#2                 ;257
0000b0  2201              MOVS     r2,#1                 ;258
0000b2  210e              MOVS     r1,#0xe               ;258
0000b4  a099              ADR      r0,|L4.796|
0000b6  f7fffffe          BL       snmp_trap_send
0000ba  e0ed              B        |L4.664|
                  |L4.188|
0000bc  2302              MOVS     r3,#2                 ;259
0000be  461a              MOV      r2,r3                 ;261
0000c0  210e              MOVS     r1,#0xe               ;262
0000c2  a09d              ADR      r0,|L4.824|
0000c4  f7fffffe          BL       snmp_trap_send
0000c8  e0e6              B        |L4.664|
                  |L4.202|
0000ca  2302              MOVS     r3,#2                 ;262
0000cc  2203              MOVS     r2,#3                 ;264
0000ce  210e              MOVS     r1,#0xe               ;265
0000d0  a0a0              ADR      r0,|L4.852|
0000d2  f7fffffe          BL       snmp_trap_send
0000d6  e0df              B        |L4.664|
                  |L4.216|
0000d8  2302              MOVS     r3,#2                 ;266
0000da  2204              MOVS     r2,#4                 ;266
0000dc  210e              MOVS     r1,#0xe               ;273
0000de  a0a4              ADR      r0,|L4.880|
0000e0  f7fffffe          BL       snmp_trap_send
0000e4  e0d8              B        |L4.664|
                  |L4.230|
0000e6  0743              LSLS     r3,r0,#29             ;273
0000e8  d529              BPL      |L4.318|
0000ea  074b              LSLS     r3,r1,#29             ;273
0000ec  d527              BPL      |L4.318|
0000ee  78d0              LDRB     r0,[r2,#3]            ;273  ; plazma_inv
0000f0  f1000001          ADD      r0,r0,#1              ;275
0000f4  70d0              STRB     r0,[r2,#3]            ;275
0000f6  b134              CBZ      r4,|L4.262|
0000f8  2c01              CMP      r4,#1                 ;276
0000fa  d00b              BEQ      |L4.276|
0000fc  2c02              CMP      r4,#2                 ;276
0000fe  d010              BEQ      |L4.290|
000100  2c03              CMP      r4,#3                 ;276
000102  d015              BEQ      |L4.304|
000104  e0c8              B        |L4.664|
                  |L4.262|
000106  2303              MOVS     r3,#3                 ;277
000108  2201              MOVS     r2,#1                 ;277
00010a  210e              MOVS     r1,#0xe               ;277
00010c  a09f              ADR      r0,|L4.908|
00010e  f7fffffe          BL       snmp_trap_send
000112  e0c1              B        |L4.664|
                  |L4.276|
000114  2303              MOVS     r3,#3                 ;280
000116  2202              MOVS     r2,#2                 ;280
000118  210e              MOVS     r1,#0xe               ;280
00011a  a0a3              ADR      r0,|L4.936|
00011c  f7fffffe          BL       snmp_trap_send
000120  e0ba              B        |L4.664|
                  |L4.290|
000122  2303              MOVS     r3,#3                 ;283
000124  461a              MOV      r2,r3                 ;283
000126  210e              MOVS     r1,#0xe               ;284
000128  a0a6              ADR      r0,|L4.964|
00012a  f7fffffe          BL       snmp_trap_send
00012e  e0b3              B        |L4.664|
                  |L4.304|
000130  2303              MOVS     r3,#3                 ;285
000132  2204              MOVS     r2,#4                 ;285
000134  210e              MOVS     r1,#0xe               ;285
000136  a0aa              ADR      r0,|L4.992|
000138  f7fffffe          BL       snmp_trap_send
00013c  e0ac              B        |L4.664|
                  |L4.318|
00013e  0703              LSLS     r3,r0,#28             ;288
000140  d529              BPL      |L4.406|
000142  070b              LSLS     r3,r1,#28             ;288
000144  d527              BPL      |L4.406|
000146  78d0              LDRB     r0,[r2,#3]            ;290  ; plazma_inv
000148  f1000001          ADD      r0,r0,#1              ;290
00014c  70d0              STRB     r0,[r2,#3]            ;291
00014e  b134              CBZ      r4,|L4.350|
000150  2c01              CMP      r4,#1                 ;291
000152  d00b              BEQ      |L4.364|
000154  2c02              CMP      r4,#2                 ;292
000156  d010              BEQ      |L4.378|
000158  2c03              CMP      r4,#3                 ;292
00015a  d015              BEQ      |L4.392|
00015c  e09c              B        |L4.664|
                  |L4.350|
00015e  2304              MOVS     r3,#4                 ;295
000160  2201              MOVS     r2,#1                 ;295
000162  210e              MOVS     r1,#0xe               ;295
000164  a0a5              ADR      r0,|L4.1020|
000166  f7fffffe          BL       snmp_trap_send
00016a  e095              B        |L4.664|
                  |L4.364|
00016c  2304              MOVS     r3,#4                 ;296
00016e  2202              MOVS     r2,#2                 ;298
000170  210e              MOVS     r1,#0xe               ;298
000172  a0ab              ADR      r0,|L4.1056|
000174  f7fffffe          BL       snmp_trap_send
000178  e08e              B        |L4.664|
                  |L4.378|
00017a  2304              MOVS     r3,#4                 ;299
00017c  2203              MOVS     r2,#3                 ;300
00017e  210e              MOVS     r1,#0xe               ;300
000180  a0b0              ADR      r0,|L4.1092|
000182  f7fffffe          BL       snmp_trap_send
000186  e087              B        |L4.664|
                  |L4.392|
000188  2304              MOVS     r3,#4                 ;303
00018a  461a              MOV      r2,r3                 ;303
00018c  210e              MOVS     r1,#0xe               ;303
00018e  a0b6              ADR      r0,|L4.1128|
000190  f7fffffe          BL       snmp_trap_send
000194  e080              B        |L4.664|
                  |L4.406|
000196  06c3              LSLS     r3,r0,#27             ;247
000198  d529              BPL      |L4.494|
00019a  06cb              LSLS     r3,r1,#27             ;247
00019c  d527              BPL      |L4.494|
00019e  78d0              LDRB     r0,[r2,#3]  ; plazma_inv
0001a0  f1000001          ADD      r0,r0,#1
0001a4  70d0              STRB     r0,[r2,#3]
0001a6  b134              CBZ      r4,|L4.438|
0001a8  2c01              CMP      r4,#1
0001aa  d00b              BEQ      |L4.452|
0001ac  2c02              CMP      r4,#2
0001ae  d010              BEQ      |L4.466|
0001b0  2c03              CMP      r4,#3
0001b2  d015              BEQ      |L4.480|
0001b4  e070              B        |L4.664|
                  |L4.438|
0001b6  2305              MOVS     r3,#5
0001b8  2201              MOVS     r2,#1
0001ba  210e              MOVS     r1,#0xe
0001bc  a0b3              ADR      r0,|L4.1164|
0001be  f7fffffe          BL       snmp_trap_send
0001c2  e069              B        |L4.664|
                  |L4.452|
0001c4  2305              MOVS     r3,#5
0001c6  2202              MOVS     r2,#2
0001c8  210e              MOVS     r1,#0xe
0001ca  a0b9              ADR      r0,|L4.1200|
0001cc  f7fffffe          BL       snmp_trap_send
0001d0  e062              B        |L4.664|
                  |L4.466|
0001d2  2305              MOVS     r3,#5
0001d4  2203              MOVS     r2,#3
0001d6  210e              MOVS     r1,#0xe
0001d8  a0be              ADR      r0,|L4.1236|
0001da  f7fffffe          BL       snmp_trap_send
0001de  e05b              B        |L4.664|
                  |L4.480|
0001e0  2305              MOVS     r3,#5
0001e2  2204              MOVS     r2,#4
0001e4  210e              MOVS     r1,#0xe
0001e6  a0c4              ADR      r0,|L4.1272|
0001e8  f7fffffe          BL       snmp_trap_send
0001ec  e054              B        |L4.664|
                  |L4.494|
0001ee  0683              LSLS     r3,r0,#26
0001f0  d529              BPL      |L4.582|
0001f2  068b              LSLS     r3,r1,#26
0001f4  d527              BPL      |L4.582|
0001f6  78d0              LDRB     r0,[r2,#3]  ; plazma_inv
0001f8  f1000001          ADD      r0,r0,#1
0001fc  70d0              STRB     r0,[r2,#3]
0001fe  b134              CBZ      r4,|L4.526|
000200  2c01              CMP      r4,#1
000202  d00b              BEQ      |L4.540|
000204  2c02              CMP      r4,#2
000206  d010              BEQ      |L4.554|
000208  2c03              CMP      r4,#3
00020a  d015              BEQ      |L4.568|
00020c  e044              B        |L4.664|
                  |L4.526|
00020e  2306              MOVS     r3,#6
000210  2201              MOVS     r2,#1
000212  210e              MOVS     r1,#0xe
000214  a0c1              ADR      r0,|L4.1308|
000216  f7fffffe          BL       snmp_trap_send
00021a  e03d              B        |L4.664|
                  |L4.540|
00021c  2306              MOVS     r3,#6
00021e  2202              MOVS     r2,#2
000220  210e              MOVS     r1,#0xe
000222  a0c7              ADR      r0,|L4.1344|
000224  f7fffffe          BL       snmp_trap_send
000228  e036              B        |L4.664|
                  |L4.554|
00022a  2306              MOVS     r3,#6
00022c  2203              MOVS     r2,#3
00022e  210e              MOVS     r1,#0xe
000230  a0cc              ADR      r0,|L4.1380|
000232  f7fffffe          BL       snmp_trap_send
000236  e02f              B        |L4.664|
                  |L4.568|
000238  2306              MOVS     r3,#6
00023a  2204              MOVS     r2,#4
00023c  210e              MOVS     r1,#0xe
00023e  a0d2              ADR      r0,|L4.1416|
000240  f7fffffe          BL       snmp_trap_send
000244  e028              B        |L4.664|
                  |L4.582|
000246  b300              CBZ      r0,|L4.650|
000248  b9f9              CBNZ     r1,|L4.650|
00024a  78d0              LDRB     r0,[r2,#3]  ; plazma_inv
00024c  f1000001          ADD      r0,r0,#1
000250  70d0              STRB     r0,[r2,#3]
000252  b134              CBZ      r4,|L4.610|
000254  2c01              CMP      r4,#1
000256  d00b              BEQ      |L4.624|
000258  2c02              CMP      r4,#2
00025a  d010              BEQ      |L4.638|
00025c  2c03              CMP      r4,#3
00025e  d015              BEQ      |L4.652|
000260  e01a              B        |L4.664|
                  |L4.610|
000262  2300              MOVS     r3,#0
000264  2201              MOVS     r2,#1
000266  210e              MOVS     r1,#0xe
000268  a0d0              ADR      r0,|L4.1452|
00026a  f7fffffe          BL       snmp_trap_send
00026e  e013              B        |L4.664|
                  |L4.624|
000270  2300              MOVS     r3,#0
000272  2202              MOVS     r2,#2
000274  210e              MOVS     r1,#0xe
000276  a0d2              ADR      r0,|L4.1472|
000278  f7fffffe          BL       snmp_trap_send
00027c  e00c              B        |L4.664|
                  |L4.638|
00027e  2300              MOVS     r3,#0
000280  2203              MOVS     r2,#3
000282  210e              MOVS     r1,#0xe
000284  a0d3              ADR      r0,|L4.1492|
000286  f7fffffe          BL       snmp_trap_send
                  |L4.650|
00028a  e005              B        |L4.664|
                  |L4.652|
00028c  2300              MOVS     r3,#0
00028e  2204              MOVS     r2,#4
000290  210e              MOVS     r1,#0xe
000292  a0d5              ADR      r0,|L4.1512|
000294  f7fffffe          BL       snmp_trap_send
                  |L4.664|
000298  f8150f46          LDRB     r0,[r5,#0x46]!
00029c  7068              STRB     r0,[r5,#1]
00029e  bd70              POP      {r4-r6,pc}
;;;308    
                          ENDP

                  |L4.672|
                          DCD      first_inv_slot
                  |L4.676|
                          DCD      inv
                  |L4.680|
                          DCD      ||area_number.22||+0x8c
                  |L4.684|
0002ac  496e7665          DCB      "Invertor #1 Alarm, overload",0
0002b0  72746f72
0002b4  20233120
0002b8  416c6172
0002bc  6d2c206f
0002c0  7665726c
0002c4  6f616400
                  |L4.712|
0002c8  496e7665          DCB      "Invertor #2 Alarm, overload",0
0002cc  72746f72
0002d0  20233220
0002d4  416c6172
0002d8  6d2c206f
0002dc  7665726c
0002e0  6f616400
                  |L4.740|
0002e4  496e7665          DCB      "Invertor #3 Alarm, overload",0
0002e8  72746f72
0002ec  20233320
0002f0  416c6172
0002f4  6d2c206f
0002f8  7665726c
0002fc  6f616400
                  |L4.768|
000300  496e7665          DCB      "Invertor #4 Alarm, overload",0
000304  72746f72
000308  20233420
00030c  416c6172
000310  6d2c206f
000314  7665726c
000318  6f616400
                  |L4.796|
00031c  496e7665          DCB      "Invertor #1 Alarm, overheat",0
000320  72746f72
000324  20233120
000328  416c6172
00032c  6d2c206f
000330  76657268
000334  65617400
                  |L4.824|
000338  496e7665          DCB      "Invertor #2 Alarm, overheat",0
00033c  72746f72
000340  20233220
000344  416c6172
000348  6d2c206f
00034c  76657268
000350  65617400
                  |L4.852|
000354  496e7665          DCB      "Invertor #3 Alarm, overheat",0
000358  72746f72
00035c  20233320
000360  416c6172
000364  6d2c206f
000368  76657268
00036c  65617400
                  |L4.880|
000370  496e7665          DCB      "Invertor #4 Alarm, overheat",0
000374  72746f72
000378  20233420
00037c  416c6172
000380  6d2c206f
000384  76657268
000388  65617400
                  |L4.908|
00038c  496e7665          DCB      "Invertor #1 Alarm, is warm",0
000390  72746f72
000394  20233120
000398  416c6172
00039c  6d2c2069
0003a0  73207761
0003a4  726d00  
0003a7  00                DCB      0
                  |L4.936|
0003a8  496e7665          DCB      "Invertor #2 Alarm, is warm",0
0003ac  72746f72
0003b0  20233220
0003b4  416c6172
0003b8  6d2c2069
0003bc  73207761
0003c0  726d00  
0003c3  00                DCB      0
                  |L4.964|
0003c4  496e7665          DCB      "Invertor #3 Alarm, is warm",0
0003c8  72746f72
0003cc  20233320
0003d0  416c6172
0003d4  6d2c2069
0003d8  73207761
0003dc  726d00  
0003df  00                DCB      0
                  |L4.992|
0003e0  496e7665          DCB      "Invertor #4 Alarm, is warm",0
0003e4  72746f72
0003e8  20233420
0003ec  416c6172
0003f0  6d2c2069
0003f4  73207761
0003f8  726d00  
0003fb  00                DCB      0
                  |L4.1020|
0003fc  496e7665          DCB      "Invertor #1 Alarm, voltage is up",0
000400  72746f72
000404  20233120
000408  416c6172
00040c  6d2c2076
000410  6f6c7461
000414  67652069
000418  73207570
00041c  00      
00041d  00                DCB      0
00041e  00                DCB      0
00041f  00                DCB      0
                  |L4.1056|
000420  496e7665          DCB      "Invertor #2 Alarm, voltage is up",0
000424  72746f72
000428  20233220
00042c  416c6172
000430  6d2c2076
000434  6f6c7461
000438  67652069
00043c  73207570
000440  00      
000441  00                DCB      0
000442  00                DCB      0
000443  00                DCB      0
                  |L4.1092|
000444  496e7665          DCB      "Invertor #3 Alarm, voltage is up",0
000448  72746f72
00044c  20233320
000450  416c6172
000454  6d2c2076
000458  6f6c7461
00045c  67652069
000460  73207570
000464  00      
000465  00                DCB      0
000466  00                DCB      0
000467  00                DCB      0
                  |L4.1128|
000468  496e7665          DCB      "Invertor #4 Alarm, voltage is up",0
00046c  72746f72
000470  20233420
000474  416c6172
000478  6d2c2076
00047c  6f6c7461
000480  67652069
000484  73207570
000488  00      
000489  00                DCB      0
00048a  00                DCB      0
00048b  00                DCB      0
                  |L4.1164|
00048c  496e7665          DCB      "Invertor #1 Alarm, voltage is down",0
000490  72746f72
000494  20233120
000498  416c6172
00049c  6d2c2076
0004a0  6f6c7461
0004a4  67652069
0004a8  7320646f
0004ac  776e00  
0004af  00                DCB      0
                  |L4.1200|
0004b0  496e7665          DCB      "Invertor #2 Alarm, voltage is down",0
0004b4  72746f72
0004b8  20233220
0004bc  416c6172
0004c0  6d2c2076
0004c4  6f6c7461
0004c8  67652069
0004cc  7320646f
0004d0  776e00  
0004d3  00                DCB      0
                  |L4.1236|
0004d4  496e7665          DCB      "Invertor #3 Alarm, voltage is down",0
0004d8  72746f72
0004dc  20233320
0004e0  416c6172
0004e4  6d2c2076
0004e8  6f6c7461
0004ec  67652069
0004f0  7320646f
0004f4  776e00  
0004f7  00                DCB      0
                  |L4.1272|
0004f8  496e7665          DCB      "Invertor #4 Alarm, voltage is down",0
0004fc  72746f72
000500  20233420
000504  416c6172
000508  6d2c2076
00050c  6f6c7461
000510  67652069
000514  7320646f
000518  776e00  
00051b  00                DCB      0
                  |L4.1308|
00051c  496e7665          DCB      "Invertor #1 Alarm, output is offed",0
000520  72746f72
000524  20233120
000528  416c6172
00052c  6d2c206f
000530  75747075
000534  74206973
000538  206f6666
00053c  656400  
00053f  00                DCB      0
                  |L4.1344|
000540  496e7665          DCB      "Invertor #2 Alarm, output is offed",0
000544  72746f72
000548  20233220
00054c  416c6172
000550  6d2c206f
000554  75747075
000558  74206973
00055c  206f6666
000560  656400  
000563  00                DCB      0
                  |L4.1380|
000564  496e7665          DCB      "Invertor #3 Alarm, output is offed",0
000568  72746f72
00056c  20233320
000570  416c6172
000574  6d2c206f
000578  75747075
00057c  74206973
000580  206f6666
000584  656400  
000587  00                DCB      0
                  |L4.1416|
000588  496e7665          DCB      "Invertor #4 Alarm, output is offed",0
00058c  72746f72
000590  20233420
000594  416c6172
000598  6d2c206f
00059c  75747075
0005a0  74206973
0005a4  206f6666
0005a8  656400  
0005ab  00                DCB      0
                  |L4.1452|
0005ac  496e7665          DCB      "Invertor #1 is norm",0
0005b0  72746f72
0005b4  20233120
0005b8  6973206e
0005bc  6f726d00
                  |L4.1472|
0005c0  496e7665          DCB      "Invertor #2 is norm",0
0005c4  72746f72
0005c8  20233220
0005cc  6973206e
0005d0  6f726d00
                  |L4.1492|
0005d4  496e7665          DCB      "Invertor #3 is norm",0
0005d8  72746f72
0005dc  20233320
0005e0  6973206e
0005e4  6f726d00
                  |L4.1512|
0005e8  496e7665          DCB      "Invertor #4 is norm",0
0005ec  72746f72
0005f0  20233420
0005f4  6973206e
0005f8  6f726d00

                          AREA ||area_number.5||, CODE, READONLY, ALIGN=2

                          EXPORTAS ||area_number.5||, ||.text||
                  klimat_hndl PROC
;;;232    //-----------------------------------------------
;;;233    void ke_start(char in)
000000  e92d41f0          PUSH     {r4-r8,lr}
;;;234    {          
000004  4d66              LDR      r5,|L5.416|
;;;235    ke_start_stat=(enum_ke_start_stat)0;		 
000006  4867              LDR      r0,|L5.420|
000008  4c67              LDR      r4,|L5.424|
00000a  f9b51000          LDRSH    r1,[r5,#0]  ; t_box
;;;236    
;;;237    if(spc_stat==spcVZ)ke_start_stat=kssNOT_VZ;
00000e  f9b02000          LDRSH    r2,[r0,#0]  ; TBOXMAX
000012  f9b40000          LDRSH    r0,[r4,#0]
000016  4291              CMP      r1,r2
;;;238    #ifndef UKU_220_IPS_TERMOKOMPENSAT
;;;239    else if(BAT_IS_ON[in]!=bisON)ke_start_stat=kssNOT_BAT;
;;;240    #endif
;;;241    else if(bat[in]._av&(1<<0))ke_start_stat=kssNOT_BAT_AV;
000018  dd03              BLE      |L5.34|
00001a  f1000001          ADD      r0,r0,#1
00001e  8020              STRH     r0,[r4,#0]
000020  e003              B        |L5.42|
                  |L5.34|
000022  da02              BGE      |L5.42|
000024  f1a00001          SUB      r0,r0,#1
000028  8020              STRH     r0,[r4,#0]
                  |L5.42|
00002a  2206              MOVS     r2,#6
00002c  2100              MOVS     r1,#0
00002e  485e              LDR      r0,|L5.424|
000030  f7fffffe          BL       gran
;;;242    else if(bat[in]._temper_stat&(1<<1))ke_start_stat=kssNOT_BAT_AV_T;
;;;243    else if(bat[in]._av&(1<<1))ke_start_stat=kssNOT_BAT_AV_ASS;
;;;244    else if(bat[in]._Ib>IKB)ke_start_stat=kssNOT_BAT_ZAR;
;;;245    else if(bat[in]._Ib<-IKB)ke_start_stat=kssNOT_BAT_RAZR;
;;;246    else if((spc_stat==spcKE)&&(spc_bat==0))ke_start_stat=kssNOT_KE1;
;;;247    else if((spc_stat==spcKE)&&(spc_bat==1))ke_start_stat=kssNOT_KE2;
;;;248    else 
;;;249    	{
;;;250    
;;;251    	ke_start_stat=kssYES;
;;;252    
;;;253    	spc_stat=spcKE;
;;;254    	__ee_spc_stat=spcKE;
;;;255    	lc640_write_int(EE_SPC_STAT,__ee_spc_stat);
;;;256    	
;;;257    	spc_bat=in;
;;;258    	__ee_spc_bat=in;
;;;259    	lc640_write_int(EE_SPC_BAT,__ee_spc_bat);
;;;260    
;;;261    	bat[in]._zar_cnt_ke=0;
;;;262    	lc640_write_int(ADR_EE_BAT_ZAR_CNT_KE[in],0);
;;;263    	
;;;264    	spc_phase=0;
;;;265    	__ee_spc_phase=0;
;;;266    	lc640_write_int(EE_SPC_PHASE,__ee_spc_phase);
;;;267    
;;;268    	//ke_mem_hndl(in,lc640_read_int(ADR_EE_BAT_ZAR_CNT_KE[spc_bat]));
;;;269    
;;;270    		{					
;;;271    		signed short temp_temp;
;;;272    		signed char temp;
;;;273    		temp_temp=bat[in]._u_old[((bat_u_old_cnt+1)&0x07)]; 
;;;274    		    
;;;275    		temp=LPC_RTC->YEAR;
;;;276    		gran_char(&temp,1,99);
;;;277    		*((char*)(&(ke_date[0])))=temp;
;;;278    			
;;;279    		temp=LPC_RTC->MONTH;
;;;280    		gran_char(&temp,1,12);
;;;281    		*(((char*)(&(ke_date[0])))+1)=temp;
;;;282    		
;;;283    		temp=LPC_RTC->DOM;
;;;284    		gran_char(&temp,1,31);
;;;285    		*(((char*)(&(ke_date[0])))+2)=temp;			
;;;286    				
;;;287    		*(((char*)(&(ke_date[0])))+3)=*((char*)&temp_temp);
;;;288    		lc640_write_long(EE_SPC_KE_DATE0,ke_date[0]);
;;;289    
;;;290    		temp=LPC_RTC->HOUR;
;;;291    		gran_char(&temp,0,23);
;;;292    		*((char*)(&(ke_date[1])))=temp;
;;;293                   
;;;294    		temp=LPC_RTC->MIN;
;;;295    		gran_char(&temp,0,59);
;;;296    		*(((char*)(&(ke_date[1])))+1)=temp;
;;;297    	          
;;;298    		temp=LPC_RTC->SEC;
;;;299    		gran_char(&temp,0,59);
;;;300    		*(((char*)(&(ke_date[1])))+2)=temp;
;;;301    			
;;;302    		*(((char*)(&(ke_date[1])))+3)=*(((char*)&temp_temp)+1);
;;;303    		lc640_write_long(EE_SPC_KE_DATE1,ke_date[1]);
;;;304    		}
;;;305    
;;;306    	}
;;;307    }
000034  f9b40000          LDRSH    r0,[r4,#0]  ; av_tbox_cnt
000038  495c              LDR      r1,|L5.428|
00003a  2601              MOVS     r6,#1
00003c  2805              CMP      r0,#5                 ;242
00003e  dd00              BLE      |L5.66|
000040  700e              STRB     r6,[r1,#0]            ;242
                  |L5.66|
000042  2400              MOVS     r4,#0                 ;242
000044  2801              CMP      r0,#1                 ;242
000046  da00              BGE      |L5.74|
000048  700c              STRB     r4,[r1,#0]            ;242
                  |L5.74|
00004a  4959              LDR      r1,|L5.432|
00004c  f9b50000          LDRSH    r0,[r5,#0]            ;243  ; t_box
000050  4a58              LDR      r2,|L5.436|
000052  f9b11000          LDRSH    r1,[r1,#0]            ;243  ; TBOXREG
000056  4f58              LDR      r7,|L5.440|
000058  1e8b              SUBS     r3,r1,#2              ;244
00005a  4298              CMP      r0,r3                 ;244
00005c  da0f              BGE      |L5.126|
00005e  f9921000          LDRSB    r1,[r2,#0]            ;244  ; t_box_cnt
000062  291e              CMP      r1,#0x1e              ;244
000064  da1e              BGE      |L5.164|
000066  f1010101          ADD      r1,r1,#1              ;244
00006a  b249              SXTB     r1,r1                 ;244
00006c  7011              STRB     r1,[r2,#0]
00006e  291e              CMP      r1,#0x1e              ;245
000070  db18              BLT      |L5.164|
000072  8839              LDRH     r1,[r7,#0]            ;245  ; main_vent_pos
000074  f1a10101          SUB      r1,r1,#1              ;245
000078  8039              STRH     r1,[r7,#0]            ;245
00007a  7014              STRB     r4,[r2,#0]
00007c  e012              B        |L5.164|
                  |L5.126|
00007e  4288              CMP      r0,r1                 ;246
000080  dd0f              BLE      |L5.162|
000082  f9921000          LDRSB    r1,[r2,#0]            ;246  ; t_box_cnt
000086  291e              CMP      r1,#0x1e              ;247
000088  da0c              BGE      |L5.164|
00008a  f1010101          ADD      r1,r1,#1              ;247
00008e  b249              SXTB     r1,r1                 ;246
000090  7011              STRB     r1,[r2,#0]            ;246
000092  291e              CMP      r1,#0x1e
000094  db06              BLT      |L5.164|
000096  8839              LDRH     r1,[r7,#0]            ;247  ; main_vent_pos
000098  f1010101          ADD      r1,r1,#1              ;251
00009c  8039              STRH     r1,[r7,#0]            ;251
00009e  7014              STRB     r4,[r2,#0]            ;253
0000a0  e000              B        |L5.164|
                  |L5.162|
0000a2  7014              STRB     r4,[r2,#0]            ;254
                  |L5.164|
0000a4  4945              LDR      r1,|L5.444|
0000a6  f9b11000          LDRSH    r1,[r1,#0]            ;255  ; TBOXVENTMAX
0000aa  4288              CMP      r0,r1                 ;255
0000ac  dd05              BLE      |L5.186|
0000ae  2214              MOVS     r2,#0x14              ;257
0000b0  2100              MOVS     r1,#0                 ;258
0000b2  4841              LDR      r0,|L5.440|
0000b4  f7fffffe          BL       gran
0000b8  e007              B        |L5.202|
                  |L5.186|
0000ba  4841              LDR      r0,|L5.448|
0000bc  2100              MOVS     r1,#0                 ;259
0000be  8800              LDRH     r0,[r0,#0]            ;261  ; pos_vent
0000c0  3009              ADDS     r0,r0,#9              ;262
0000c2  b202              SXTH     r2,r0                 ;262
0000c4  483c              LDR      r0,|L5.440|
0000c6  f7fffffe          BL       gran
                  |L5.202|
0000ca  20f0              MOVS     r0,#0xf0              ;262
0000cc  f7fffffe          BL       mess_find_unvol
0000d0  b128              CBZ      r0,|L5.222|
0000d2  483c              LDR      r0,|L5.452|
0000d4  6801              LDR      r1,[r0,#0]            ;266  ; mess_data
0000d6  29f1              CMP      r1,#0xf1              ;266
0000d8  d101              BNE      |L5.222|
0000da  6840              LDR      r0,[r0,#4]            ;266  ; mess_data
0000dc  8038              STRH     r0,[r7,#0]            ;273
                  |L5.222|
0000de  f9b71000          LDRSH    r1,[r7,#0]            ;273  ; main_vent_pos
0000e2  4839              LDR      r0,|L5.456|
0000e4  2901              CMP      r1,#1                 ;273
0000e6  dc01              BGT      |L5.236|
0000e8  7006              STRB     r6,[r0,#0]            ;273
0000ea  e000              B        |L5.238|
                  |L5.236|
0000ec  7004              STRB     r4,[r0,#0]            ;273
                  |L5.238|
0000ee  4837              LDR      r0,|L5.460|
0000f0  f8df80dc          LDR      r8,|L5.464|
0000f4  f9b00000          LDRSH    r0,[r0,#0]            ;275  ; TBATDISABLE
0000f8  f1a00132          SUB      r1,r0,#0x32           ;276
0000fc  2928              CMP      r1,#0x28              ;276
0000fe  d821              BHI      |L5.324|
000100  f9b51000          LDRSH    r1,[r5,#0]            ;276  ; t_box
000104  4f33              LDR      r7,|L5.468|
000106  4281              CMP      r1,r0                 ;277
000108  dd03              BLE      |L5.274|
00010a  8838              LDRH     r0,[r7,#0]            ;277  ; tbatdisable_cnt
00010c  f1000001          ADD      r0,r0,#1              ;277
000110  8038              STRH     r0,[r7,#0]            ;279
                  |L5.274|
000112  4831              LDR      r0,|L5.472|
000114  f9b00000          LDRSH    r0,[r0,#0]            ;280  ; TBATENABLE
000118  4281              CMP      r1,r0                 ;280
00011a  da03              BGE      |L5.292|
00011c  8838              LDRH     r0,[r7,#0]            ;281  ; tbatdisable_cnt
00011e  f1a00001          SUB      r0,r0,#1              ;281
000122  8038              STRH     r0,[r7,#0]            ;283
                  |L5.292|
000124  2206              MOVS     r2,#6                 ;283
000126  2100              MOVS     r1,#0                 ;284
000128  482a              LDR      r0,|L5.468|
00012a  f7fffffe          BL       gran
00012e  f9b70000          LDRSH    r0,[r7,#0]            ;284  ; tbatdisable_cnt
000132  2805              CMP      r0,#5                 ;285
000134  dd01              BLE      |L5.314|
000136  f8886000          STRB     r6,[r8,#0]            ;287
                  |L5.314|
00013a  2801              CMP      r0,#1                 ;287
00013c  da04              BGE      |L5.328|
00013e  f8884000          STRB     r4,[r8,#0]            ;288
000142  e001              B        |L5.328|
                  |L5.324|
000144  f8884000          STRB     r4,[r8,#0]            ;288
                  |L5.328|
000148  4824              LDR      r0,|L5.476|
00014a  4f25              LDR      r7,|L5.480|
00014c  f9b00000          LDRSH    r0,[r0,#0]            ;291  ; TLOADDISABLE
000150  f1a00132          SUB      r1,r0,#0x32           ;291
000154  291e              CMP      r1,#0x1e              ;292
000156  d820              BHI      |L5.410|
000158  f9b51000          LDRSH    r1,[r5,#0]            ;292  ; t_box
00015c  4d21              LDR      r5,|L5.484|
00015e  4281              CMP      r1,r0                 ;295
000160  dd03              BLE      |L5.362|
000162  8828              LDRH     r0,[r5,#0]            ;295  ; tloaddisable_cnt
000164  f1000001          ADD      r0,r0,#1              ;295
000168  8028              STRH     r0,[r5,#0]            ;296
                  |L5.362|
00016a  481f              LDR      r0,|L5.488|
00016c  f9b00000          LDRSH    r0,[r0,#0]            ;296  ; TLOADENABLE
000170  4281              CMP      r1,r0                 ;298
000172  da03              BGE      |L5.380|
000174  8828              LDRH     r0,[r5,#0]            ;299  ; tloaddisable_cnt
000176  f1a00001          SUB      r0,r0,#1              ;299
00017a  8028              STRH     r0,[r5,#0]            ;299
                  |L5.380|
00017c  2206              MOVS     r2,#6                 ;300
00017e  2100              MOVS     r1,#0                 ;300
000180  4818              LDR      r0,|L5.484|
000182  f7fffffe          BL       gran
000186  f9b50000          LDRSH    r0,[r5,#0]            ;302  ; tloaddisable_cnt
00018a  2805              CMP      r0,#5                 ;303
00018c  dd00              BLE      |L5.400|
00018e  703e              STRB     r6,[r7,#0]            ;303
                  |L5.400|
000190  2801              CMP      r0,#1                 ;303
000192  da00              BGE      |L5.406|
000194  703c              STRB     r4,[r7,#0]
                  |L5.406|
000196  e8bd81f0          POP      {r4-r8,pc}            ;247
                  |L5.410|
00019a  703c              STRB     r4,[r7,#0]            ;247
00019c  e7fb              B        |L5.406|
;;;308    
                          ENDP

00019e  0000              DCW      0x0000
                  |L5.416|
                          DCD      t_box
                  |L5.420|
                          DCD      TBOXMAX
                  |L5.424|
                          DCD      av_tbox_cnt
                  |L5.428|
                          DCD      av_tbox_stat
                  |L5.432|
                          DCD      TBOXREG
                  |L5.436|
                          DCD      t_box_cnt
                  |L5.440|
                          DCD      main_vent_pos
                  |L5.444|
                          DCD      TBOXVENTMAX
                  |L5.448|
                          DCD      pos_vent
                  |L5.452|
                          DCD      mess_data
                  |L5.456|
                          DCD      mixer_vent_stat
                  |L5.460|
                          DCD      TBATDISABLE
                  |L5.464|
                          DCD      tbatdisable_stat
                  |L5.468|
                          DCD      tbatdisable_cnt
                  |L5.472|
                          DCD      TBATENABLE
                  |L5.476|
                          DCD      TLOADDISABLE
                  |L5.480|
                          DCD      tloaddisable_stat
                  |L5.484|
                          DCD      tloaddisable_cnt
                  |L5.488|
                          DCD      TLOADENABLE

                          AREA ||.bss||, DATA, NOINIT, ALIGN=2

                  adc_buff
                          %        1024
                  adc_buff_
                          %        32
                  main_power_buffer
                          %        32

                          AREA ||area_number.8||, DATA, NOINIT, ALIGN=1

                          EXPORTAS ||area_number.8||, ||.bss||
                  adc_buff_max
                          %        24

                          AREA ||area_number.9||, DATA, NOINIT, ALIGN=1

                          EXPORTAS ||area_number.9||, ||.bss||
                  net_buff
                          %        64

                          AREA ||.constdata||, DATA, READONLY, ALIGN=0

                  sk_buff_KONTUR
000000  0d0b0f0e          DCB      0x0d,0x0b,0x0f,0x0e

                          AREA ||area_number.12||, DATA, READONLY, ALIGN=0

                          EXPORTAS ||area_number.12||, ||.constdata||
                  sk_buff_RSTKM
000000  0d0b0f0e          DCB      0x0d,0x0b,0x0f,0x0e

                          AREA ||area_number.13||, DATA, READONLY, ALIGN=0

                          EXPORTAS ||area_number.13||, ||.constdata||
                  sk_buff_GLONASS
000000  0b0d0f0e          DCB      0x0b,0x0d,0x0f,0x0e

                          AREA ||area_number.14||, DATA, READONLY, ALIGN=0

                          EXPORTAS ||area_number.14||, ||.constdata||
                  sk_buff_3U
000000  0b0d0f0e          DCB      0x0b,0x0d,0x0f,0x0e

                          AREA ||area_number.15||, DATA, READONLY, ALIGN=0

                          EXPORTAS ||area_number.15||, ||.constdata||
                  sk_buff_6U
000000  0b0d0f0e          DCB      0x0b,0x0d,0x0f,0x0e

                          AREA ||area_number.16||, DATA, READONLY, ALIGN=0

                          EXPORTAS ||area_number.16||, ||.constdata||
                  sk_buff_220
000000  0b0d0f0e          DCB      0x0b,0x0d,0x0f,0x0e

                          AREA ||area_number.17||, DATA, READONLY, ALIGN=0

                          EXPORTAS ||area_number.17||, ||.constdata||
                  sk_buff_TELECORE2015
000000  0b0d0f0e          DCB      0x0b,0x0d,0x0f,0x0e

                          AREA ||.data||, DATA, ALIGN=1

                  adc_buff_min
000000  13881388          DCW      0x1388,0x1388
000004  13881388          DCW      0x1388,0x1388
000008  13881388          DCW      0x1388,0x1388
00000c  13881388          DCW      0x1388,0x1388
000010  13881388          DCW      0x1388,0x1388
                          DCDU     0x00000000

                          AREA ||area_number.19||, DATA, ALIGN=1

                          EXPORTAS ||area_number.19||, ||.data||
                  unet_buff_min
000000  1388              DCW      0x1388

                          AREA ||area_number.20||, DATA, ALIGN=0

                          EXPORTAS ||area_number.20||, ||.data||
                  adc_stat
000000  01                DCB      0x01

                          AREA ||area_number.21||, DATA, ALIGN=1

                          EXPORTAS ||area_number.21||, ||.data||
                  bat_ver_cnt
000000  0096              DCW      0x0096

                          AREA ||area_number.22||, DATA, ALIGN=2

                          EXPORTAS ||area_number.22||, ||.data||
                  vent_stat
000000  00                DCB      0x00
                  cntrlStatIsDownCnt
000001  00                DCB      0x00
                  adc_self_ch_cnt
000002  00                DCB      0x00
                  adc_ch_net
000003  00                DCB      0x00
                  adc_ch
000004  00                DCB      0x00
                  adc_ch_cnt
000005  00                DCB      0x00
                  adc_window_flag
000006  00                DCB      0x00
                  ch_cnt0
000007  00                DCB      0x00
                  b1Hz_ch
000008  00                DCB      0x00
                  i
000009  00                DCB      0x00
                  iiii
00000a  00                DCB      0x00
                  bAVG
00000b  00                DCB      0x00
                  avg_num
00000c  00                DCB      0x00
                  kb_full_ver
00000d  00                DCB      0x00
                  kb_start_ips
00000e  00                DCB      0x00
                  num_of_wrks_bps
00000f  00                DCB      0x00
                  num_necc_up
000010  00                DCB      0x00
                  num_necc_down
000011  00                DCB      0x00
                  sh_cnt0
000012  00                DCB      0x00
                  b1Hz_sh
000013  00                DCB      0x00
                  spc_stat
000014  00                DCB      0x00
                  spc_bat
000015  00                DCB      0x00
                  spc_phase
000016  00                DCB      0x00
                  bAVZ
000017  00                DCB      0x00
                  ke_start_stat
000018  00                DCB      0x00
                  numOfForvardBps
000019  00                DCB      0x00
                  numOfForvardBps_old
00001a  00                DCB      0x00
                  numOfForvardBps_minCnt
00001b  00                DCB      0x00
                  bPARALLEL_NOT_ENOUG
00001c  00                DCB      0x00
                  bPARALLEL_ENOUG
00001d  00                DCB      0x00
                  bPARALLEL
00001e  00                DCB      0x00
                  cntrl_hndl_plazma
00001f  00                DCB      0x00
                  cntrl_stat
000020  0258              DCW      0x0258
                  cntrl_stat_old
000022  0258              DCW      0x0258
                  avg_main_cnt
000024  0014              DCW      0x0014
                  num_necc_block_cnt
000026  0000              DCB      0x00,0x00
                  net_buff_
000028  0000              DCB      0x00,0x00
                  adc_result
00002a  0000              DCB      0x00,0x00
                  adc_gorb_cnt
00002c  0000              DCB      0x00,0x00
                  adc_zero_cnt
00002e  0000              DCB      0x00,0x00
                  adc_window_cnt
000030  0000              DCB      0x00,0x00
                  adc_net_buff_cnt
000032  0000              DCB      0x00,0x00
                  plazma_sk
000034  0000              DCB      0x00,0x00
                  cntrl_stat_new
000036  0000              DCB      0x00,0x00
                  Ibmax
000038  0000              DCB      0x00,0x00
                  IZMAX_
00003a  0000              DCB      0x00,0x00
                  Ubpsmax
00003c  0000              DCB      0x00,0x00
                  samokalibr_cnt
00003e  0000              DCB      0x00,0x00
                  main_kb_cnt
000040  0000              DCB      0x00,0x00
                  kb_cnt_1lev
000042  0000              DCB      0x00,0x00
                  kb_cnt_2lev
000044  0000              DCB      0x00,0x00
                  kb_start
000046  0000              DCB      0x00,0x00
                  ibat_ips
000048  0000              DCB      0x00,0x00
                  ibat_ips_
00004a  0000              DCB      0x00,0x00
                  bps_on_mask
00004c  0000              DCB      0x00,0x00
                  bps_off_mask
00004e  0000              DCB      0x00,0x00
                  vz_cnt_s
000050  0000              DCB      0x00,0x00
                  vz_cnt_s_
000052  0000              DCB      0x00,0x00
                  vz_cnt_h
000054  0000              DCB      0x00,0x00
                  vz_cnt_h_
000056  0000              DCB      0x00,0x00
                  cnt_end_ke
000058  0000              DCB      0x00,0x00
                  __ee_vz_cnt
00005a  0000              DCB      0x00,0x00
                  __ee_spc_stat
00005c  0000              DCB      0x00,0x00
                  __ee_spc_bat
00005e  0000              DCB      0x00,0x00
                  __ee_spc_phase
000060  0000              DCB      0x00,0x00
                  cntrl_stat_blok_cnt
000062  0000              DCB      0x00,0x00
                  cntrl_stat_blok_cnt_
000064  0000              DCB      0x00,0x00
                  numOfForvardBps_hourCnt
000066  0000              DCB      0x00,0x00
                  ibat
                          DCD      0x00000000
                  ibat_
                          DCD      0x00000000
                  i_avg_max
                          DCD      0x00000000
                  i_avg_min
                          DCD      0x00000000
                  i_avg_summ
                          DCD      0x00000000
                  i_avg
                          DCD      0x00000000
                  avg
                          DCD      0x00000000
                  cntrl_stat_blok_cnt_plus
                          DCD      0x00000000
                  cntrl_stat_blok_cnt_minus
                          DCD      0x00000000
                  plazma_inv
                          DCD      0x00000000
                  net_metr_buff_
                          DCD      0x00000000
000094  0000              DCB      0x00,0x00
                  adc_self_ch_buff
000096  0000              DCB      0x00,0x00
                          DCD      0x00000000
                  adc_self_ch_disp
                          DCD      0x00000000
0000a0  00000000          DCB      0x00,0x00,0x00,0x00
                  ke_date
                          %        8

                          AREA ||area_number.23||, DATA, ALIGN=1

                          EXPORTAS ||area_number.23||, ||.data||
                  unet_buff_max
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.24||, DATA, ALIGN=0

                          EXPORTAS ||area_number.24||, ||.data||
                  adc_cnt
000000  00                DCB      0x00

                          AREA ||area_number.25||, DATA, ALIGN=0

                          EXPORTAS ||area_number.25||, ||.data||
                  adc_cnt1
000000  00                DCB      0x00

                          AREA ||area_number.26||, DATA, ALIGN=1

                          EXPORTAS ||area_number.26||, ||.data||
                  zero_cnt
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.27||, DATA, ALIGN=0

                          EXPORTAS ||area_number.27||, ||.data||
                  net_buff_cnt
000000  00                DCB      0x00

                          AREA ||area_number.28||, DATA, ALIGN=1

                          EXPORTAS ||area_number.28||, ||.data||
                  ADWR
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.29||, DATA, ALIGN=1

                          EXPORTAS ||area_number.29||, ||.data||
                  period_cnt
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.30||, DATA, ALIGN=1

                          EXPORTAS ||area_number.30||, ||.data||
                  non_zero_cnt
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.31||, DATA, ALIGN=0

                          EXPORTAS ||area_number.31||, ||.data||
                  rele_stat
000000  00                DCB      0x00

                          AREA ||area_number.32||, DATA, ALIGN=0

                          EXPORTAS ||area_number.32||, ||.data||
                  bRELE_OUT
000000  00                DCB      0x00

                          AREA ||area_number.33||, DATA, ALIGN=2

                          EXPORTAS ||area_number.33||, ||.data||
                  main_power_buffer_
                          DCD      0x00000000

                          AREA ||area_number.34||, DATA, ALIGN=1

                          EXPORTAS ||area_number.34||, ||.data||
                  main_power_buffer_cnt
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.35||, DATA, ALIGN=1

                          EXPORTAS ||area_number.35||, ||.data||
                  adc_buff_out_
                          DCDU     0x00000000
000004  0000              DCB      0x00,0x00

                          AREA ||area_number.36||, DATA, ALIGN=1

                          EXPORTAS ||area_number.36||, ||.data||
                  plazma_adc_cnt
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.37||, DATA, ALIGN=0

                          EXPORTAS ||area_number.37||, ||.data||
                  unh_cnt0
000000  00                DCB      0x00

                          AREA ||area_number.38||, DATA, ALIGN=0

                          EXPORTAS ||area_number.38||, ||.data||
                  unh_cnt1
000000  00                DCB      0x00

                          AREA ||area_number.39||, DATA, ALIGN=0

                          EXPORTAS ||area_number.39||, ||.data||
                  b1Hz_unh
000000  00                DCB      0x00

                          AREA ||area_number.40||, DATA, ALIGN=0

                          EXPORTAS ||area_number.40||, ||.data||
                  ch_cnt1
000000  00                DCB      0x00

                          AREA ||area_number.41||, DATA, ALIGN=0

                          EXPORTAS ||area_number.41||, ||.data||
                  b1_30Hz_ch
000000  00                DCB      0x00

                          AREA ||area_number.42||, DATA, ALIGN=0

                          EXPORTAS ||area_number.42||, ||.data||
                  ch_cnt2
000000  00                DCB      0x00

                          AREA ||area_number.43||, DATA, ALIGN=0

                          EXPORTAS ||area_number.43||, ||.data||
                  b1_10Hz_ch
000000  00                DCB      0x00

                          AREA ||area_number.44||, DATA, ALIGN=1

                          EXPORTAS ||area_number.44||, ||.data||
                  IZMAX_70
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.45||, DATA, ALIGN=1

                          EXPORTAS ||area_number.45||, ||.data||
                  IZMAX_130
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.46||, DATA, ALIGN=1

                          EXPORTAS ||area_number.46||, ||.data||
                  cntrl_stat_blck_cnt
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.47||, DATA, ALIGN=0

                          EXPORTAS ||area_number.47||, ||.data||
                  avg_cnt
000000  00                DCB      0x00

                          AREA ||area_number.48||, DATA, ALIGN=0

                          EXPORTAS ||area_number.48||, ||.data||
                  bps_all_off_cnt
000000  00                DCB      0x00

                          AREA ||area_number.49||, DATA, ALIGN=0

                          EXPORTAS ||area_number.49||, ||.data||
                  bps_mask_off_cnt
000000  00                DCB      0x00

                          AREA ||area_number.50||, DATA, ALIGN=0

                          EXPORTAS ||area_number.50||, ||.data||
                  bps_mask_on_off_cnt
000000  00                DCB      0x00

                          AREA ||area_number.51||, DATA, ALIGN=0

                          EXPORTAS ||area_number.51||, ||.data||
                  bps_hndl_2sec_cnt
000000  00                DCB      0x00

                          AREA ||area_number.52||, DATA, ALIGN=0

                          EXPORTAS ||area_number.52||, ||.data||
                  plazma_bat
000000  00                DCB      0x00

                          AREA ||area_number.53||, DATA, ALIGN=0

                          EXPORTAS ||area_number.53||, ||.data||
                  plazma_cntrl_stat
000000  00                DCB      0x00
