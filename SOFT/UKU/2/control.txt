; generated by ARM C/C++ Compiler, 4.1 [Build 644]
; commandline ArmCC [--list --debug -c --asm --interleave -o.\EXE\control.o --asm_dir=.\ --list_dir=.\ --depend=.\EXE\control.d --feedback=.\EXE\UKU_220_IPS_TERMOKOMPENSAT.fed --cpu=Cortex-M3 --apcs=interwork -O1 -IC:\Keil\ARM\CMSIS\Include -IC:\Keil\ARM\INC\NXP\LPC17xx -D__MICROLIB -DUKU_220_IPS_TERMOKOMPENSAT -DUKU2071x --omf_browse=.\EXE\control.crf control.c]
                          THUMB

                          AREA ||.text||, CODE, READONLY, ALIGN=2

                  ke_start PROC
;;;228    //-----------------------------------------------
;;;229    void ke_start(char in)
000000  e92d41fc          PUSH     {r2-r8,lr}
;;;230    {          
000004  4604              MOV      r4,r0
;;;231    ke_start_stat=(enum_ke_start_stat)0;		 
000006  4efe              LDR      r6,|L1.1024|
000008  f04f0700          MOV      r7,#0
00000c  75f7              STRB     r7,[r6,#0x17]
;;;232    
;;;233    if(spc_stat==spcVZ)ke_start_stat=kssNOT_VZ;
00000e  7cf0              LDRB     r0,[r6,#0x13]  ; spc_stat
000010  f04f0301          MOV      r3,#1
000014  2802              CMP      r0,#2
000016  d008              BEQ      |L1.42|
;;;234    else if(BAT_IS_ON[in]!=bisON)ke_start_stat=kssNOT_BAT;
000018  49fa              LDR      r1,|L1.1028|
00001a  5d09              LDRB     r1,[r1,r4]
00001c  2955              CMP      r1,#0x55
00001e  d006              BEQ      |L1.46|
000020  f04f0065          MOV      r0,#0x65
000024  75f0              STRB     r0,[r6,#0x17]
                  |L1.38|
;;;235    else if(bat[in]._av&(1<<0))ke_start_stat=kssNOT_BAT_AV;
;;;236    else if(bat[in]._temper_stat&(1<<1))ke_start_stat=kssNOT_BAT_AV_T;
;;;237    else if(bat[in]._av&(1<<1))ke_start_stat=kssNOT_BAT_AV_ASS;
;;;238    else if(bat[in]._Ib>IKB)ke_start_stat=kssNOT_BAT_ZAR;
;;;239    else if(bat[in]._Ib<-IKB)ke_start_stat=kssNOT_BAT_RAZR;
;;;240    else if((spc_stat==spcKE)&&(spc_bat==0))ke_start_stat=kssNOT_KE1;
;;;241    else if((spc_stat==spcKE)&&(spc_bat==1))ke_start_stat=kssNOT_KE2;
;;;242    else 
;;;243    	{
;;;244    
;;;245    	ke_start_stat=kssYES;
;;;246    
;;;247    	spc_stat=spcKE;
;;;248    	__ee_spc_stat=spcKE;
;;;249    	lc640_write_int(EE_SPC_STAT,__ee_spc_stat);
;;;250    	
;;;251    	spc_bat=in;
;;;252    	__ee_spc_bat=in;
;;;253    	lc640_write_int(EE_SPC_BAT,__ee_spc_bat);
;;;254    
;;;255    	bat[in]._zar_cnt_ke=0;
;;;256    	lc640_write_int(ADR_EE_BAT_ZAR_CNT_KE[in],0);
;;;257    	
;;;258    	spc_phase=0;
;;;259    	__ee_spc_phase=0;
;;;260    	lc640_write_int(EE_SPC_PHASE,__ee_spc_phase);
;;;261    
;;;262    	//ke_mem_hndl(in,lc640_read_int(ADR_EE_BAT_ZAR_CNT_KE[spc_bat]));
;;;263    
;;;264    		{					
;;;265    		signed short temp_temp;
;;;266    		signed char temp;
;;;267    		temp_temp=bat[in]._u_old[((bat_u_old_cnt+1)&0x07)]; 
;;;268    		    
;;;269    		temp=LPC_RTC->YEAR;
;;;270    		gran_char(&temp,1,99);
;;;271    		*((char*)(&(ke_date[0])))=temp;
;;;272    			
;;;273    		temp=LPC_RTC->MONTH;
;;;274    		gran_char(&temp,1,12);
;;;275    		*(((char*)(&(ke_date[0])))+1)=temp;
;;;276    		
;;;277    		temp=LPC_RTC->DOM;
;;;278    		gran_char(&temp,1,31);
;;;279    		*(((char*)(&(ke_date[0])))+2)=temp;			
;;;280    				
;;;281    		*(((char*)(&(ke_date[0])))+3)=*((char*)&temp_temp);
;;;282    		lc640_write_long(EE_SPC_KE_DATE0,ke_date[0]);
;;;283    
;;;284    		temp=LPC_RTC->HOUR;
;;;285    		gran_char(&temp,0,23);
;;;286    		*((char*)(&(ke_date[1])))=temp;
;;;287                   
;;;288    		temp=LPC_RTC->MIN;
;;;289    		gran_char(&temp,0,59);
;;;290    		*(((char*)(&(ke_date[1])))+1)=temp;
;;;291    	          
;;;292    		temp=LPC_RTC->SEC;
;;;293    		gran_char(&temp,0,59);
;;;294    		*(((char*)(&(ke_date[1])))+2)=temp;
;;;295    			
;;;296    		*(((char*)(&(ke_date[1])))+3)=*(((char*)&temp_temp)+1);
;;;297    		lc640_write_long(EE_SPC_KE_DATE1,ke_date[1]);
;;;298    		}
;;;299    
;;;300    	}
;;;301    }
000026  e8bd81fc          POP      {r2-r8,pc}
                  |L1.42|
00002a  75f3              STRB     r3,[r6,#0x17]         ;233
00002c  e7fb              B        |L1.38|
                  |L1.46|
00002e  eb040144          ADD      r1,r4,r4,LSL #1       ;235
000032  eb011204          ADD      r2,r1,r4,LSL #4       ;235
000036  49f4              LDR      r1,|L1.1032|
000038  eb010582          ADD      r5,r1,r2,LSL #2       ;235
00003c  f895103d          LDRB     r1,[r5,#0x3d]         ;235
000040  07ca              LSLS     r2,r1,#31             ;235
000042  d003              BEQ      |L1.76|
000044  f04f0066          MOV      r0,#0x66              ;235
000048  75f0              STRB     r0,[r6,#0x17]         ;235
00004a  e7ec              B        |L1.38|
                  |L1.76|
00004c  f895203f          LDRB     r2,[r5,#0x3f]         ;236
000050  0792              LSLS     r2,r2,#30             ;236
000052  d503              BPL      |L1.92|
000054  f04f0067          MOV      r0,#0x67              ;236
000058  75f0              STRB     r0,[r6,#0x17]         ;236
00005a  e7e4              B        |L1.38|
                  |L1.92|
00005c  0789              LSLS     r1,r1,#30             ;237
00005e  d503              BPL      |L1.104|
000060  f04f0068          MOV      r0,#0x68              ;237
000064  75f0              STRB     r0,[r6,#0x17]         ;237
000066  e7de              B        |L1.38|
                  |L1.104|
000068  4ae8              LDR      r2,|L1.1036|
00006a  f9b51008          LDRSH    r1,[r5,#8]            ;238
00006e  f9b22000          LDRSH    r2,[r2,#0]            ;238  ; IKB
000072  4291              CMP      r1,r2                 ;238
000074  dd03              BLE      |L1.126|
000076  f04f0069          MOV      r0,#0x69              ;238
00007a  75f0              STRB     r0,[r6,#0x17]         ;238
00007c  e7d3              B        |L1.38|
                  |L1.126|
00007e  4252              RSBS     r2,r2,#0              ;239
000080  4291              CMP      r1,r2                 ;239
000082  da03              BGE      |L1.140|
000084  f04f006a          MOV      r0,#0x6a              ;239
000088  75f0              STRB     r0,[r6,#0x17]         ;239
00008a  e7cc              B        |L1.38|
                  |L1.140|
00008c  49dc              LDR      r1,|L1.1024|
00008e  2801              CMP      r0,#1                 ;240
000090  7d09              LDRB     r1,[r1,#0x14]         ;240
000092  d100              BNE      |L1.150|
000094  b111              CBZ      r1,|L1.156|
                  |L1.150|
000096  2801              CMP      r0,#1                 ;241
000098  d004              BEQ      |L1.164|
00009a  e005              B        |L1.168|
                  |L1.156|
00009c  f04f006b          MOV      r0,#0x6b              ;240
0000a0  75f0              STRB     r0,[r6,#0x17]         ;240
0000a2  e7c0              B        |L1.38|
                  |L1.164|
0000a4  2901              CMP      r1,#1                 ;241
0000a6  d07e              BEQ      |L1.422|
                  |L1.168|
0000a8  f04f0064          MOV      r0,#0x64              ;245
0000ac  75f0              STRB     r0,[r6,#0x17]         ;245
0000ae  74f3              STRB     r3,[r6,#0x13]         ;247
0000b0  f8a6305c          STRH     r3,[r6,#0x5c]         ;248
0000b4  4619              MOV      r1,r3                 ;249
0000b6  f44f70f8          MOV      r0,#0x1f0             ;249
0000ba  f7fffffe          BL       lc640_write_int
0000be  7534              STRB     r4,[r6,#0x14]         ;251
0000c0  f8a6405e          STRH     r4,[r6,#0x5e]         ;252
0000c4  4621              MOV      r1,r4                 ;253
0000c6  f44f70fa          MOV      r0,#0x1f4             ;253
0000ca  f7fffffe          BL       lc640_write_int
0000ce  61af              STR      r7,[r5,#0x18]         ;255
0000d0  48cf              LDR      r0,|L1.1040|
0000d2  2100              MOVS     r1,#0                 ;256
0000d4  f9300014          LDRSH    r0,[r0,r4,LSL #1]     ;256
0000d8  f7fffffe          BL       lc640_write_int
0000dc  7577              STRB     r7,[r6,#0x15]         ;258
0000de  f8a67060          STRH     r7,[r6,#0x60]         ;259
0000e2  4639              MOV      r1,r7                 ;260
0000e4  f44f70fb          MOV      r0,#0x1f6             ;260
0000e8  f7fffffe          BL       lc640_write_int
0000ec  48c9              LDR      r0,|L1.1044|
0000ee  8800              LDRH     r0,[r0,#0]            ;267  ; bat_u_old_cnt
0000f0  f1000001          ADD      r0,r0,#1              ;267
0000f4  f0000007          AND      r0,r0,#7              ;267
0000f8  eb050040          ADD      r0,r5,r0,LSL #1       ;267
0000fc  8c00              LDRH     r0,[r0,#0x20]         ;267
0000fe  9001              STR      r0,[sp,#4]            ;267
000100  4dc5              LDR      r5,|L1.1048|
000102  8ba8              LDRH     r0,[r5,#0x1c]         ;269
000104  9000              STR      r0,[sp,#0]            ;269
000106  f04f0263          MOV      r2,#0x63              ;270
00010a  f04f0101          MOV      r1,#1                 ;270
00010e  4668              MOV      r0,sp                 ;270
000110  f7fffffe          BL       gran_char
000114  4cba              LDR      r4,|L1.1024|
000116  f89d0000          LDRB     r0,[sp,#0]            ;271
00011a  34a8              ADDS     r4,r4,#0xa8           ;271
00011c  7020              STRB     r0,[r4,#0]            ;271
00011e  7e28              LDRB     r0,[r5,#0x18]         ;273
000120  9000              STR      r0,[sp,#0]            ;273
000122  220c              MOVS     r2,#0xc               ;274
000124  2101              MOVS     r1,#1                 ;274
000126  4668              MOV      r0,sp                 ;274
000128  f7fffffe          BL       gran_char
00012c  f89d0000          LDRB     r0,[sp,#0]            ;275
000130  7060              STRB     r0,[r4,#1]            ;275
000132  7b28              LDRB     r0,[r5,#0xc]          ;277
000134  9000              STR      r0,[sp,#0]            ;277
000136  221f              MOVS     r2,#0x1f              ;278
000138  2101              MOVS     r1,#1                 ;278
00013a  4668              MOV      r0,sp                 ;278
00013c  f7fffffe          BL       gran_char
000140  f89d0000          LDRB     r0,[sp,#0]            ;279
000144  70a0              STRB     r0,[r4,#2]            ;279
000146  f89d0004          LDRB     r0,[sp,#4]            ;281
00014a  70e0              STRB     r0,[r4,#3]            ;281
00014c  f44f70fc          MOV      r0,#0x1f8             ;282
000150  6821              LDR      r1,[r4,#0]            ;282  ; ke_date
000152  f7fffffe          BL       lc640_write_long
000156  7a28              LDRB     r0,[r5,#8]            ;284
000158  9000              STR      r0,[sp,#0]            ;284
00015a  2217              MOVS     r2,#0x17              ;285
00015c  2100              MOVS     r1,#0                 ;285
00015e  4668              MOV      r0,sp                 ;285
000160  f7fffffe          BL       gran_char
000164  f89d0000          LDRB     r0,[sp,#0]            ;286
000168  7120              STRB     r0,[r4,#4]            ;286
00016a  7928              LDRB     r0,[r5,#4]            ;288
00016c  9000              STR      r0,[sp,#0]            ;288
00016e  223b              MOVS     r2,#0x3b              ;289
000170  2100              MOVS     r1,#0                 ;289
000172  4668              MOV      r0,sp                 ;289
000174  f7fffffe          BL       gran_char
000178  f89d0000          LDRB     r0,[sp,#0]            ;290
00017c  7160              STRB     r0,[r4,#5]            ;290
00017e  7828              LDRB     r0,[r5,#0]            ;292
000180  9000              STR      r0,[sp,#0]            ;292
000182  223b              MOVS     r2,#0x3b              ;293
000184  2100              MOVS     r1,#0                 ;293
000186  4668              MOV      r0,sp                 ;293
000188  f7fffffe          BL       gran_char
00018c  f89d0000          LDRB     r0,[sp,#0]            ;294
000190  71a0              STRB     r0,[r4,#6]            ;294
000192  f89d0005          LDRB     r0,[sp,#5]            ;296
000196  71e0              STRB     r0,[r4,#7]            ;296
000198  f44f70fe          MOV      r0,#0x1fc             ;297
00019c  6861              LDR      r1,[r4,#4]            ;297  ; ke_date
00019e  f7fffffe          BL       lc640_write_long
0001a2  e740              B        |L1.38|
0001a4  e7ff              B        |L1.422|
                  |L1.422|
0001a6  f04f006c          MOV      r0,#0x6c              ;241
0001aa  75f0              STRB     r0,[r6,#0x17]         ;241
0001ac  e73b              B        |L1.38|
;;;302    
                          ENDP

                  ke_drv PROC
;;;303    //-----------------------------------------------
;;;304    void ke_drv(void)
0001ae  e92d47f0          PUSH     {r4-r10,lr}
;;;305    {
;;;306    
;;;307    if(spc_stat==spcKE)
0001b2  4c93              LDR      r4,|L1.1024|
0001b4  7ce0              LDRB     r0,[r4,#0x13]  ; spc_stat
0001b6  2801              CMP      r0,#1
0001b8  d17d              BNE      |L1.694|
0001ba  4621              MOV      r1,r4
0001bc  2601              MOVS     r6,#1
;;;308    	{
;;;309    	if(spc_phase==0)
;;;310    		{
;;;311    		mess_send(MESS2BAT_HNDL,PARAM_BAT_MASK_OFF_AFTER_2SEC,(1<<(1-spc_bat)),20);
0001be  7d09              LDRB     r1,[r1,#0x14]
0001c0  7d60              LDRB     r0,[r4,#0x15]         ;309  ; spc_phase
0001c2  f1c10201          RSB      r2,r1,#1
0001c6  fa06f102          LSL      r1,r6,r2
;;;312    		mess_send(MESS2BPS_HNDL,PARAM_BPS_ALL_OFF_AFTER_2SEC,0xffff,20);
;;;313    
;;;314    		bat[spc_bat]._zar_cnt_ke+=abs(bat[spc_bat]._Ib);
;;;315    	    	
;;;316    		if(bat[spc_bat]._zar_cnt_ke>=AH_CONSTANT)
;;;317    			{
;;;318    			bat[spc_bat]._zar_cnt_ke-=AH_CONSTANT;
;;;319    			lc640_write_int(ADR_EE_BAT_ZAR_CNT_KE[spc_bat],lc640_read_int(ADR_EE_BAT_ZAR_CNT_KE[spc_bat])+1);
0001ca  4f91              LDR      r7,|L1.1040|
0001cc  4d8e              LDR      r5,|L1.1032|
0001ce  b20a              SXTH     r2,r1                 ;311
0001d0  b110              CBZ      r0,|L1.472|
;;;320    			}
;;;321    		}
;;;322    
;;;323    	else if(spc_phase==1)
0001d2  2801              CMP      r0,#1
0001d4  d034              BEQ      |L1.576|
0001d6  e038              B        |L1.586|
                  |L1.472|
0001d8  2314              MOVS     r3,#0x14              ;311
0001da  21ca              MOVS     r1,#0xca              ;311
0001dc  20c8              MOVS     r0,#0xc8              ;311
0001de  f7fffffe          BL       mess_send
0001e2  2314              MOVS     r3,#0x14              ;312
0001e4  f04f32ff          MOV      r2,#0xffffffff        ;312
0001e8  21ce              MOVS     r1,#0xce              ;312
0001ea  20cd              MOVS     r0,#0xcd              ;312
0001ec  f7fffffe          BL       mess_send
0001f0  7d20              LDRB     r0,[r4,#0x14]         ;314  ; spc_bat
0001f2  eb000140          ADD      r1,r0,r0,LSL #1       ;314
0001f6  eb011000          ADD      r0,r1,r0,LSL #4       ;314
0001fa  eb050080          ADD      r0,r5,r0,LSL #2       ;314
0001fe  f9b00008          LDRSH    r0,[r0,#8]            ;314
000202  f7fffffe          BL       abs
000206  7d21              LDRB     r1,[r4,#0x14]         ;314  ; spc_bat
000208  eb010241          ADD      r2,r1,r1,LSL #1       ;314
00020c  eb021201          ADD      r2,r2,r1,LSL #4       ;314
000210  eb050282          ADD      r2,r5,r2,LSL #2       ;314
000214  6993              LDR      r3,[r2,#0x18]         ;314
000216  4418              ADD      r0,r0,r3              ;314
000218  6190              STR      r0,[r2,#0x18]         ;314
00021a  f64843a0          MOV      r3,#0x8ca0            ;316
00021e  4298              CMP      r0,r3                 ;316
000220  db13              BLT      |L1.586|
000222  eba00003          SUB      r0,r0,r3              ;318
000226  6190              STR      r0,[r2,#0x18]         ;318
000228  f8370011          LDRH     r0,[r7,r1,LSL #1]     ;319
00022c  f7fffffe          BL       lc640_read_int
000230  1c40              ADDS     r0,r0,#1              ;319
000232  b201              SXTH     r1,r0                 ;319
000234  7d20              LDRB     r0,[r4,#0x14]         ;319  ; spc_bat
000236  f9370010          LDRSH    r0,[r7,r0,LSL #1]     ;319
00023a  f7fffffe          BL       lc640_write_int
00023e  e004              B        |L1.586|
                  |L1.576|
;;;324    		{
;;;325    		mess_send(MESS2BAT_HNDL,PARAM_BAT_MASK_OFF_AFTER_2SEC,(1<<(1-spc_bat)),20);
000240  2314              MOVS     r3,#0x14
000242  21ca              MOVS     r1,#0xca
000244  20c8              MOVS     r0,#0xc8
000246  f7fffffe          BL       mess_send
                  |L1.586|
;;;326    		}
;;;327    
;;;328    	if(bat[spc_bat]._Ub<(USIGN*10))
00024a  7d21              LDRB     r1,[r4,#0x14]  ; spc_bat
;;;329    		{
;;;330    		cnt_end_ke++;
;;;331    		if(cnt_end_ke>=30)
;;;332    			{
;;;333    			
;;;334    			if((spc_stat==spcKE)&&(spc_phase==0))
;;;335    				{
;;;336    				lc640_write_int(ADR_EE_BAT_C_REAL[spc_bat],lc640_read_int(ADR_EE_BAT_ZAR_CNT_KE[spc_bat]));
;;;337    				ke_mem_hndl(spc_bat,lc640_read_int(ADR_EE_BAT_ZAR_CNT_KE[spc_bat]));
;;;338    				lc640_write_int(ADR_EE_BAT_ZAR_CNT[spc_bat],0);
;;;339    				cntrl_stat=50;
;;;340    				cntrl_stat_old=50;
;;;341    				}
;;;342    
;;;343    			if((BAT_IS_ON[1-spc_bat]) == bisON)
;;;344    				{
;;;345    				spc_phase=1;
;;;346    				__ee_spc_phase=1;
;;;347    				lc640_write_int(EE_SPC_PHASE,1);
;;;348    				}			
;;;349    			else
;;;350    				{
;;;351    				spc_stat=spcOFF;
;;;352    				__ee_spc_stat=spcOFF;
;;;353    				lc640_write_int(EE_SPC_STAT,spcOFF);
00024c  f44f79f8          MOV      r9,#0x1f0
000250  eb010041          ADD      r0,r1,r1,LSL #1       ;328
000254  eb001001          ADD      r0,r0,r1,LSL #4       ;328
000258  eb050080          ADD      r0,r5,r0,LSL #2       ;328
00025c  f04f0800          MOV      r8,#0                 ;309
000260  f9b02002          LDRSH    r2,[r0,#2]            ;328
000264  486d              LDR      r0,|L1.1052|
000266  f9b00000          LDRSH    r0,[r0,#0]            ;328  ; USIGN
00026a  eb000080          ADD      r0,r0,r0,LSL #2       ;328
00026e  ebb20f40          CMP      r2,r0,LSL #1          ;328
000272  da47              BGE      |L1.772|
000274  f8b40058          LDRH     r0,[r4,#0x58]         ;330  ; cnt_end_ke
000278  f1000001          ADD      r0,r0,#1              ;330
00027c  b200              SXTH     r0,r0                 ;330
00027e  f8a40058          STRH     r0,[r4,#0x58]         ;330
000282  281e              CMP      r0,#0x1e              ;331
000284  db40              BLT      |L1.776|
000286  7ce0              LDRB     r0,[r4,#0x13]         ;334  ; spc_stat
000288  2801              CMP      r0,#1                 ;334
00028a  d122              BNE      |L1.722|
00028c  7d60              LDRB     r0,[r4,#0x15]         ;334  ; spc_phase
00028e  bb00              CBNZ     r0,|L1.722|
000290  f8370011          LDRH     r0,[r7,r1,LSL #1]     ;336
000294  f7fffffe          BL       lc640_read_int
000298  b201              SXTH     r1,r0                 ;336
00029a  4861              LDR      r0,|L1.1056|
00029c  7d22              LDRB     r2,[r4,#0x14]         ;336  ; spc_bat
00029e  f9300012          LDRSH    r0,[r0,r2,LSL #1]     ;336
0002a2  f7fffffe          BL       lc640_write_int
0002a6  7d20              LDRB     r0,[r4,#0x14]         ;337  ; spc_bat
0002a8  f8370010          LDRH     r0,[r7,r0,LSL #1]     ;337
0002ac  f7fffffe          BL       lc640_read_int
0002b0  b281              UXTH     r1,r0                 ;337
0002b2  7d20              LDRB     r0,[r4,#0x14]         ;337  ; spc_bat
0002b4  e000              B        |L1.696|
                  |L1.694|
0002b6  e049              B        |L1.844|
                  |L1.696|
0002b8  f7fffffe          BL       ke_mem_hndl
0002bc  4859              LDR      r0,|L1.1060|
0002be  7d21              LDRB     r1,[r4,#0x14]         ;338  ; spc_bat
0002c0  f9300011          LDRSH    r0,[r0,r1,LSL #1]     ;338
0002c4  2100              MOVS     r1,#0                 ;338
0002c6  f7fffffe          BL       lc640_write_int
0002ca  f04f0032          MOV      r0,#0x32              ;339
0002ce  8420              STRH     r0,[r4,#0x20]         ;339
0002d0  8460              STRH     r0,[r4,#0x22]         ;340
                  |L1.722|
0002d2  7d20              LDRB     r0,[r4,#0x14]         ;343  ; spc_bat
0002d4  494b              LDR      r1,|L1.1028|
0002d6  f1c00001          RSB      r0,r0,#1              ;343
0002da  5c08              LDRB     r0,[r1,r0]            ;343
0002dc  2855              CMP      r0,#0x55              ;343
0002de  d008              BEQ      |L1.754|
0002e0  f8848013          STRB     r8,[r4,#0x13]         ;351
0002e4  f8a4805c          STRH     r8,[r4,#0x5c]         ;352
0002e8  2100              MOVS     r1,#0
0002ea  4648              MOV      r0,r9
0002ec  f7fffffe          BL       lc640_write_int
0002f0  e00a              B        |L1.776|
                  |L1.754|
0002f2  7566              STRB     r6,[r4,#0x15]         ;345
0002f4  f8a46060          STRH     r6,[r4,#0x60]         ;346
0002f8  2101              MOVS     r1,#1                 ;347
0002fa  f44f70fb          MOV      r0,#0x1f6             ;347
0002fe  f7fffffe          BL       lc640_write_int
000302  e001              B        |L1.776|
                  |L1.772|
;;;354    				}
;;;355    			}
;;;356    		}
;;;357    	else cnt_end_ke=0;
000304  f8a48058          STRH     r8,[r4,#0x58]
                  |L1.776|
;;;358    
;;;359    	if((bat[spc_bat]._Ub>=bat[1-spc_bat]._Ub)&&(spc_phase==1))
000308  7d21              LDRB     r1,[r4,#0x14]  ; spc_bat
00030a  eb010041          ADD      r0,r1,r1,LSL #1
00030e  eb001001          ADD      r0,r0,r1,LSL #4
000312  eb050080          ADD      r0,r5,r0,LSL #2
000316  f9b02002          LDRSH    r2,[r0,#2]
00031a  f1c10001          RSB      r0,r1,#1
00031e  eb000140          ADD      r1,r0,r0,LSL #1
000322  eb011000          ADD      r0,r1,r0,LSL #4
000326  eb050080          ADD      r0,r5,r0,LSL #2
00032a  f9b00002          LDRSH    r0,[r0,#2]
00032e  4282              CMP      r2,r0
000330  db0c              BLT      |L1.844|
000332  7d60              LDRB     r0,[r4,#0x15]  ; spc_phase
000334  2801              CMP      r0,#1
000336  d109              BNE      |L1.844|
;;;360    		{
;;;361    		spc_stat=spcOFF;
000338  f8848013          STRB     r8,[r4,#0x13]
;;;362    		__ee_spc_stat=spcOFF;
00033c  f8a4805c          STRH     r8,[r4,#0x5c]
;;;363    		lc640_write_int(EE_SPC_STAT,spcOFF);
000340  4648              MOV      r0,r9
000342  e8bd47f0          POP      {r4-r10,lr}
000346  2100              MOVS     r1,#0
000348  f7ffbffe          B.W      lc640_write_int
                  |L1.844|
;;;364    		}
;;;365    	}
;;;366    			
;;;367    }
00034c  e8bd87f0          POP      {r4-r10,pc}
;;;368    
                          ENDP

                  vz_start PROC
;;;369    //-----------------------------------------------
;;;370    char vz_start(char hour)
000350  b570              PUSH     {r4-r6,lr}
;;;371    {          
000352  4605              MOV      r5,r0
;;;372    char out;
;;;373    out=0;
000354  f04f0600          MOV      r6,#0
;;;374    if(spc_stat==spcOFF)
000358  4c29              LDR      r4,|L1.1024|
00035a  7ce0              LDRB     r0,[r4,#0x13]  ; spc_stat
00035c  bb18              CBNZ     r0,|L1.934|
;;;375    	{
;;;376    	spc_stat=spcVZ;
00035e  f104041e          ADD      r4,r4,#0x1e
000362  f04f0102          MOV      r1,#2
000366  f8041c0b          STRB     r1,[r4,#-0xb]
;;;377    	__ee_spc_stat=spcVZ; 
00036a  87e1              STRH     r1,[r4,#0x3e]
;;;378    	lc640_write_int(EE_SPC_STAT,__ee_spc_stat);   
00036c  f44f70f8          MOV      r0,#0x1f0
000370  f7fffffe          BL       lc640_write_int
;;;379    	vz_cnt_h=hour;
000374  86e5              STRH     r5,[r4,#0x36]
;;;380    	__ee_vz_cnt=hour*60;
000376  ebc51005          RSB      r0,r5,r5,LSL #4
00037a  ea4f0180          LSL      r1,r0,#2
00037e  460d              MOV      r5,r1
000380  87a1              STRH     r1,[r4,#0x3c]
;;;381    	lc640_write_int(EE_VZ_CNT,__ee_vz_cnt);
000382  f44f70f9          MOV      r0,#0x1f2
000386  f7fffffe          BL       lc640_write_int
;;;382    	lc640_write_int(EE_SPC_VZ_LENGT,hour*60);	
00038a  4629              MOV      r1,r5
00038c  f44f70ff          MOV      r0,#0x1fe
000390  f7fffffe          BL       lc640_write_int
;;;383    	vz_cnt_h_=0;
000394  4630              MOV      r0,r6
000396  8720              STRH     r0,[r4,#0x38]
;;;384    	vz_cnt_s=0;
000398  8660              STRH     r0,[r4,#0x32]
;;;385    	out=1;
00039a  f04f0601          MOV      r6,#1
;;;386    	vz_mem_hndl(1);
00039e  f04f0001          MOV      r0,#1
0003a2  f7fffffe          BL       vz_mem_hndl
                  |L1.934|
;;;387    	}
;;;388    //else if((spc_stat==spc_KE1p1)||(spc_stat==spc_KE1p2)) out=22; 
;;;389    //else if((spc_stat==spc_KE2p1)||(spc_stat==spc_KE2p2)) out=33;
;;;390    //plazma=out;	
;;;391    return out;
0003a6  4630              MOV      r0,r6
;;;392    }
0003a8  bd70              POP      {r4-r6,pc}
;;;393    
                          ENDP

                  vz_stop PROC
;;;394    //-----------------------------------------------
;;;395    void vz_stop(void)
0003aa  b510              PUSH     {r4,lr}
;;;396    {
;;;397    if(spc_stat==spcVZ)
0003ac  4c14              LDR      r4,|L1.1024|
0003ae  7ce0              LDRB     r0,[r4,#0x13]  ; spc_stat
0003b0  2802              CMP      r0,#2
0003b2  d113              BNE      |L1.988|
;;;398         {
;;;399    vz_mem_hndl(vz_cnt_h);          
0003b4  f104041e          ADD      r4,r4,#0x1e
0003b8  8ee0              LDRH     r0,[r4,#0x36]  ; vz_cnt_h
0003ba  f7fffffe          BL       vz_mem_hndl
;;;400    vz_cnt_s=0;
0003be  f04f0000          MOV      r0,#0
0003c2  8660              STRH     r0,[r4,#0x32]
;;;401    vz_cnt_h=0;
0003c4  86e0              STRH     r0,[r4,#0x36]
;;;402    vz_cnt_h_=0;
0003c6  8720              STRH     r0,[r4,#0x38]
;;;403    spc_stat=spcOFF;
0003c8  f8040c0b          STRB     r0,[r4,#-0xb]
;;;404    
;;;405    		__ee_spc_stat=spcOFF;
0003cc  87e0              STRH     r0,[r4,#0x3e]
;;;406    		lc640_write_int(EE_SPC_STAT,spcOFF);
0003ce  4601              MOV      r1,r0
0003d0  e8bd4010          POP      {r4,lr}
0003d4  f44f70f8          MOV      r0,#0x1f0
0003d8  f7ffbffe          B.W      lc640_write_int
                  |L1.988|
;;;407         }
;;;408    
;;;409    }
0003dc  bd10              POP      {r4,pc}
;;;410    
                          ENDP

                  avz_next_date_hndl PROC
;;;411    //-----------------------------------------------
;;;412    void avz_next_date_hndl(void)
0003de  b570              PUSH     {r4-r6,lr}
;;;413    {
;;;414    if((LPC_RTC->MONTH+AVZ)>12)lc640_write_int(EE_YEAR_AVZ,LPC_RTC->YEAR+1);
0003e0  4c0d              LDR      r4,|L1.1048|
0003e2  3c20              SUBS     r4,r4,#0x20
0003e4  f8940038          LDRB     r0,[r4,#0x38]
0003e8  4d0f              LDR      r5,|L1.1064|
0003ea  7829              LDRB     r1,[r5,#0]  ; AVZ
0003ec  4408              ADD      r0,r0,r1
0003ee  280c              CMP      r0,#0xc
0003f0  d91c              BLS      |L1.1068|
0003f2  8fa0              LDRH     r0,[r4,#0x3c]
0003f4  1c40              ADDS     r0,r0,#1
0003f6  b201              SXTH     r1,r0
0003f8  20b8              MOVS     r0,#0xb8
0003fa  f7fffffe          BL       lc640_write_int
0003fe  e01a              B        |L1.1078|
                  |L1.1024|
                          DCD      ||area_number.21||
                  |L1.1028|
                          DCD      BAT_IS_ON
                  |L1.1032|
                          DCD      bat
                  |L1.1036|
                          DCD      IKB
                  |L1.1040|
                          DCD      ADR_EE_BAT_ZAR_CNT_KE
                  |L1.1044|
                          DCD      bat_u_old_cnt
                  |L1.1048|
                          DCD      0x40024020
                  |L1.1052|
                          DCD      USIGN
                  |L1.1056|
                          DCD      ADR_EE_BAT_C_REAL
                  |L1.1060|
                          DCD      ADR_EE_BAT_ZAR_CNT
                  |L1.1064|
                          DCD      AVZ
                  |L1.1068|
;;;415    else lc640_write_int(EE_YEAR_AVZ,LPC_RTC->YEAR);
00042c  f9b4103c          LDRSH    r1,[r4,#0x3c]
000430  20b8              MOVS     r0,#0xb8
000432  f7fffffe          BL       lc640_write_int
                  |L1.1078|
;;;416    
;;;417    //lc640_write_int(EE_YEAR_AVZ,6);
;;;418    
;;;419    if((LPC_RTC->MONTH+AVZ)>12)lc640_write_int(EE_MONTH_AVZ,(LPC_RTC->MONTH+AVZ)-12);
000436  f8941038          LDRB     r1,[r4,#0x38]
00043a  7828              LDRB     r0,[r5,#0]  ; AVZ
00043c  4401              ADD      r1,r1,r0
00043e  290c              CMP      r1,#0xc
000440  d907              BLS      |L1.1106|
000442  f8941038          LDRB     r1,[r4,#0x38]
000446  380c              SUBS     r0,r0,#0xc
000448  4401              ADD      r1,r1,r0
00044a  20b6              MOVS     r0,#0xb6
00044c  f7fffffe          BL       lc640_write_int
000450  e005              B        |L1.1118|
                  |L1.1106|
;;;420    else lc640_write_int(EE_MONTH_AVZ,LPC_RTC->MONTH+AVZ);                                                 
000452  f8941038          LDRB     r1,[r4,#0x38]
000456  4401              ADD      r1,r1,r0
000458  20b6              MOVS     r0,#0xb6
00045a  f7fffffe          BL       lc640_write_int
                  |L1.1118|
;;;421    
;;;422    //lc640_write_int(EE_MONTH_AVZ,5);
;;;423    
;;;424    if(LPC_RTC->DOM>28) lc640_write_int(EE_DATE_AVZ,28);
00045e  f894002c          LDRB     r0,[r4,#0x2c]
000462  281c              CMP      r0,#0x1c
000464  d904              BLS      |L1.1136|
000466  211c              MOVS     r1,#0x1c
000468  20b4              MOVS     r0,#0xb4
00046a  f7fffffe          BL       lc640_write_int
00046e  e004              B        |L1.1146|
                  |L1.1136|
;;;425    else lc640_write_int(EE_DATE_AVZ,LPC_RTC->DOM);
000470  f894102c          LDRB     r1,[r4,#0x2c]
000474  20b4              MOVS     r0,#0xb4
000476  f7fffffe          BL       lc640_write_int
                  |L1.1146|
;;;426    
;;;427    //lc640_write_int(EE_DATE_AVZ,4);
;;;428    
;;;429    lc640_write_int(EE_HOUR_AVZ,LPC_RTC->HOUR);
00047a  f1040420          ADD      r4,r4,#0x20
00047e  7a21              LDRB     r1,[r4,#8]
000480  f04f00ae          MOV      r0,#0xae
000484  f7fffffe          BL       lc640_write_int
;;;430    lc640_write_int(EE_MIN_AVZ,LPC_RTC->MIN);
000488  7921              LDRB     r1,[r4,#4]
00048a  20b0              MOVS     r0,#0xb0
00048c  f7fffffe          BL       lc640_write_int
;;;431    lc640_write_int(EE_SEC_AVZ,LPC_RTC->SEC);
000490  7821              LDRB     r1,[r4,#0]
000492  e8bd4070          POP      {r4-r6,lr}
000496  20b2              MOVS     r0,#0xb2
000498  f7ffbffe          B.W      lc640_write_int
;;;432    
;;;433    }
;;;434    
                          ENDP

                  avz_drv PROC
;;;435    //-----------------------------------------------
;;;436    void avz_drv(void)                               
00049c  b510              PUSH     {r4,lr}
;;;437    {                
;;;438    if(AVZ!=AVZ_OFF)
00049e  48fd              LDR      r0,|L1.2196|
;;;439    	{
;;;440    	if((LPC_RTC->YEAR==YEAR_AVZ)&&(LPC_RTC->MONTH==MONTH_AVZ)&&(LPC_RTC->DOM==DATE_AVZ)&&(LPC_RTC->HOUR==HOUR_AVZ)&&(LPC_RTC->MIN==MIN_AVZ)&&(LPC_RTC->SEC==SEC_AVZ))
;;;441    		{
;;;442    		bAVZ=1;
0004a0  4cfd              LDR      r4,|L1.2200|
0004a2  7800              LDRB     r0,[r0,#0]            ;438  ; AVZ
0004a4  b330              CBZ      r0,|L1.1268|
0004a6  48fd              LDR      r0,|L1.2204|
0004a8  8f82              LDRH     r2,[r0,#0x3c]         ;440
0004aa  49fd              LDR      r1,|L1.2208|
0004ac  8809              LDRH     r1,[r1,#0]            ;440  ; YEAR_AVZ
0004ae  428a              CMP      r2,r1                 ;440
0004b0  d120              BNE      |L1.1268|
0004b2  f8902038          LDRB     r2,[r0,#0x38]         ;440
0004b6  49fb              LDR      r1,|L1.2212|
0004b8  8809              LDRH     r1,[r1,#0]            ;440  ; MONTH_AVZ
0004ba  428a              CMP      r2,r1                 ;440
0004bc  d11a              BNE      |L1.1268|
0004be  f890102c          LDRB     r1,[r0,#0x2c]         ;440
0004c2  4af9              LDR      r2,|L1.2216|
0004c4  8812              LDRH     r2,[r2,#0]            ;440  ; DATE_AVZ
0004c6  4291              CMP      r1,r2                 ;440
0004c8  d114              BNE      |L1.1268|
0004ca  f8901028          LDRB     r1,[r0,#0x28]         ;440
0004ce  4af7              LDR      r2,|L1.2220|
0004d0  8812              LDRH     r2,[r2,#0]            ;440  ; HOUR_AVZ
0004d2  4291              CMP      r1,r2                 ;440
0004d4  d10e              BNE      |L1.1268|
0004d6  f8901024          LDRB     r1,[r0,#0x24]         ;440
0004da  4af5              LDR      r2,|L1.2224|
0004dc  8812              LDRH     r2,[r2,#0]            ;440  ; MIN_AVZ
0004de  4291              CMP      r1,r2                 ;440
0004e0  d108              BNE      |L1.1268|
0004e2  f8900020          LDRB     r0,[r0,#0x20]         ;440
0004e6  49f3              LDR      r1,|L1.2228|
0004e8  8809              LDRH     r1,[r1,#0]            ;440  ; SEC_AVZ
0004ea  4288              CMP      r0,r1                 ;440
0004ec  d102              BNE      |L1.1268|
0004ee  f04f0001          MOV      r0,#1
0004f2  75a0              STRB     r0,[r4,#0x16]
                  |L1.1268|
;;;443    		}
;;;444    	}
;;;445    if(bAVZ)
0004f4  7da0              LDRB     r0,[r4,#0x16]  ; bAVZ
0004f6  2800              CMP      r0,#0
0004f8  d00c              BEQ      |L1.1300|
;;;446    	{
;;;447    	if(vz_start(AVZ_TIME))
0004fa  48ef              LDR      r0,|L1.2232|
0004fc  8800              LDRH     r0,[r0,#0]  ; AVZ_TIME
0004fe  b2c0              UXTB     r0,r0
000500  f7fffffe          BL       vz_start
000504  2800              CMP      r0,#0
000506  d005              BEQ      |L1.1300|
;;;448    		{
;;;449    		bAVZ=0;
000508  f04f0000          MOV      r0,#0
00050c  75a0              STRB     r0,[r4,#0x16]
;;;450    		avz_next_date_hndl();
00050e  e8bd4010          POP      {r4,lr}
000512  e7fe              B        avz_next_date_hndl
                  |L1.1300|
;;;451    		}
;;;452    	}	
;;;453    
;;;454    }
000514  bd10              POP      {r4,pc}
;;;455    
                          ENDP

                  vz_drv PROC
;;;456    //-----------------------------------------------
;;;457    void vz_drv(void)
000516  b570              PUSH     {r4-r6,lr}
;;;458    { 
;;;459    if(spc_stat==spcVZ)
000518  4cdf              LDR      r4,|L1.2200|
00051a  7ce0              LDRB     r0,[r4,#0x13]  ; spc_stat
00051c  2802              CMP      r0,#2
00051e  d144              BNE      |L1.1450|
;;;460    	{
;;;461    	if(vz_cnt_s_<3600)
000520  f8b40052          LDRH     r0,[r4,#0x52]  ; vz_cnt_s_
000524  f44f6161          MOV      r1,#0xe10
;;;462    		{
;;;463    		vz_cnt_s_++;
;;;464    		if(vz_cnt_s_>=3600)
;;;465    			{
;;;466    			vz_cnt_s_=0;
000528  2500              MOVS     r5,#0
00052a  4288              CMP      r0,r1                 ;461
00052c  d215              BCS      |L1.1370|
00052e  f1000001          ADD      r0,r0,#1              ;463
000532  b280              UXTH     r0,r0                 ;463
000534  f8a40052          STRH     r0,[r4,#0x52]         ;463
000538  4288              CMP      r0,r1                 ;464
00053a  d30e              BCC      |L1.1370|
00053c  f8a45052          STRH     r5,[r4,#0x52]
;;;467    			if(vz_cnt_h)
000540  f8b40054          LDRH     r0,[r4,#0x54]  ; vz_cnt_h
000544  b148              CBZ      r0,|L1.1370|
;;;468    				{
;;;469    				vz_cnt_h--;
000546  f1a00001          SUB      r0,r0,#1
00054a  f8240f54          STRH     r0,[r4,#0x54]!
;;;470    				vz_cnt_h_++;
00054e  8860              LDRH     r0,[r4,#2]  ; vz_cnt_h_
000550  f1000001          ADD      r0,r0,#1
000554  8060              STRH     r0,[r4,#2]
000556  f1a40454          SUB      r4,r4,#0x54
                  |L1.1370|
;;;471    				}
;;;472    			}
;;;473    		}
;;;474    
;;;475    
;;;476    	if(vz_cnt_s<60)
00055a  f8b40050          LDRH     r0,[r4,#0x50]  ; vz_cnt_s
00055e  283c              CMP      r0,#0x3c
000560  d223              BCS      |L1.1450|
;;;477    		{
;;;478    		vz_cnt_s++;
000562  f1000001          ADD      r0,r0,#1
000566  b280              UXTH     r0,r0
000568  f8a40050          STRH     r0,[r4,#0x50]
;;;479    		if(vz_cnt_s>=60)
00056c  283c              CMP      r0,#0x3c
00056e  d31c              BCC      |L1.1450|
;;;480    			{
;;;481    			vz_cnt_s=0;
000570  f8245f50          STRH     r5,[r4,#0x50]!
;;;482    			
;;;483    			__ee_vz_cnt--;
000574  8960              LDRH     r0,[r4,#0xa]  ; __ee_vz_cnt
000576  f1a00001          SUB      r0,r0,#1
00057a  b201              SXTH     r1,r0
00057c  8161              STRH     r1,[r4,#0xa]
;;;484    			lc640_write_int(EE_VZ_CNT,__ee_vz_cnt);
00057e  f44f70f9          MOV      r0,#0x1f2
000582  f7fffffe          BL       lc640_write_int
;;;485    			if(!__ee_vz_cnt)
000586  8960              LDRH     r0,[r4,#0xa]  ; __ee_vz_cnt
000588  f1a40450          SUB      r4,r4,#0x50
00058c  2800              CMP      r0,#0
00058e  d10c              BNE      |L1.1450|
;;;486    				{
;;;487    				spc_stat=spcOFF;
000590  74e5              STRB     r5,[r4,#0x13]
;;;488    						__ee_spc_stat=spcOFF;
000592  f8a4505c          STRH     r5,[r4,#0x5c]
;;;489    		lc640_write_int(EE_SPC_STAT,spcOFF);
000596  4601              MOV      r1,r0
000598  f44f70f8          MOV      r0,#0x1f0
00059c  f7fffffe          BL       lc640_write_int
;;;490    				vz_mem_hndl(0);
0005a0  e8bd4070          POP      {r4-r6,lr}
0005a4  2000              MOVS     r0,#0
0005a6  f7ffbffe          B.W      vz_mem_hndl
                  |L1.1450|
;;;491    				}
;;;492    			}
;;;493    		}
;;;494    
;;;495    	}
;;;496    
;;;497    
;;;498    } 
0005aa  bd70              POP      {r4-r6,pc}
;;;499    
                          ENDP

                  kb_init PROC
;;;503    //-----------------------------------------------
;;;504    void kb_init(void)
0005ac  48c3              LDR      r0,|L1.2236|
;;;505    {
;;;506    main_kb_cnt=(TBAT*60)-60/*120*/;
0005ae  f06f013b          MVN      r1,#0x3b
0005b2  8800              LDRH     r0,[r0,#0]  ; TBAT
0005b4  ebc01000          RSB      r0,r0,r0,LSL #4
0005b8  eb010080          ADD      r0,r1,r0,LSL #2
0005bc  49b6              LDR      r1,|L1.2200|
0005be  f8a10040          STRH     r0,[r1,#0x40]
;;;507    }
0005c2  4770              BX       lr
;;;508    
                          ENDP

                  kb_hndl PROC
;;;509    //-----------------------------------------------
;;;510    void kb_hndl(void)
0005c4  e92d5ff0          PUSH     {r4-r12,lr}
;;;511    {
;;;512    
;;;513    static signed short ibat[2],ibat_[2];
;;;514    #ifdef UKU_TELECORE2015
;;;515    if(((++main_kb_cnt>=TBAT*60)&&(TBAT))&&(BAT_TYPE==0))
;;;516    #else 
;;;517    if(((++main_kb_cnt>=TBAT*60)&&(TBAT)))
0005c8  f8df82cc          LDR      r8,|L1.2200|
;;;518    #endif
;;;519    	{
;;;520    	main_kb_cnt=0;
;;;521    	
;;;522    	kb_start[0]=0;
;;;523    	kb_start[1]=0;
;;;524    	kb_start_ips=0;
;;;525    
;;;526    	if( (BAT_IS_ON[0]==bisON) && (bat[0]._Ub>80) && ( (abs(bat[0]._Ib)<IKB) || (bat[0]._av&1) ) ) kb_start[0]=1;
;;;527    	if( (BAT_IS_ON[1]==bisON) && (bat[1]._Ub>80) && ( (abs(bat[1]._Ib)<IKB) || (bat[1]._av&1) ) ) kb_start[1]=1;
;;;528    #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;529    	if( (!ips_bat_av_vzvod)                      && ((abs(Ib_ips_termokompensat)<IKB) || (bat_ips._av&1) ) ) kb_start_ips=1;
0005cc  f8dfa2f0          LDR      r10,|L1.2240|
0005d0  2500              MOVS     r5,#0                 ;517
0005d2  f8b80040          LDRH     r0,[r8,#0x40]         ;517  ; main_kb_cnt
0005d6  4ebb              LDR      r6,|L1.2244|
0005d8  1c40              ADDS     r0,r0,#1              ;517
0005da  b201              SXTH     r1,r0                 ;517
0005dc  48b7              LDR      r0,|L1.2236|
0005de  f8a81040          STRH     r1,[r8,#0x40]         ;517
0005e2  f8df92e4          LDR      r9,|L1.2248|
0005e6  f9b00000          LDRSH    r0,[r0,#0]            ;517  ; TBAT
;;;530    #endif	
;;;531    	if( (net_av) || (num_of_wrks_bps==0) || ( (spc_stat!=spcOFF) && (spc_stat!=spcVZ) ) ) 
;;;532    		{
;;;533    		kb_start[0]=0;
;;;534    		kb_start[1]=0;
;;;535    		kb_start_ips=0;
;;;536    		}
;;;537    
;;;538    	if((kb_start[0]==1)||(kb_start[1]==1)||(kb_start_ips==1))
;;;539    		{
;;;540    		kb_cnt_1lev=10;
0005ea  270a              MOVS     r7,#0xa
0005ec  ebc01200          RSB      r2,r0,r0,LSL #4       ;517
0005f0  f04f0b01          MOV      r11,#1                ;526
0005f4  f1080446          ADD      r4,r8,#0x46           ;522
0005f8  ebb10f82          CMP      r1,r2,LSL #2          ;517
0005fc  db61              BLT      |L1.1730|
0005fe  b3f0              CBZ      r0,|L1.1662|
000600  f8a85040          STRH     r5,[r8,#0x40]         ;520
000604  7025              STRB     r5,[r4,#0]            ;522
000606  7065              STRB     r5,[r4,#1]            ;523
000608  f888500d          STRB     r5,[r8,#0xd]          ;524
00060c  48af              LDR      r0,|L1.2252|
00060e  7800              LDRB     r0,[r0,#0]            ;526  ; BAT_IS_ON
000610  2855              CMP      r0,#0x55              ;526
000612  d111              BNE      |L1.1592|
000614  f9b60002          LDRSH    r0,[r6,#2]            ;526  ; bat
000618  2850              CMP      r0,#0x50              ;526
00061a  dd0d              BLE      |L1.1592|
00061c  f9b60008          LDRSH    r0,[r6,#8]            ;526  ; bat
000620  f7fffffe          BL       abs
000624  f9b91000          LDRSH    r1,[r9,#0]            ;526  ; IKB
000628  4288              CMP      r0,r1                 ;526
00062a  db03              BLT      |L1.1588|
00062c  f896003d          LDRB     r0,[r6,#0x3d]         ;526  ; bat
000630  07c0              LSLS     r0,r0,#31             ;526
000632  d001              BEQ      |L1.1592|
                  |L1.1588|
000634  f884b000          STRB     r11,[r4,#0]           ;526
                  |L1.1592|
000638  48a4              LDR      r0,|L1.2252|
00063a  7840              LDRB     r0,[r0,#1]            ;527  ; BAT_IS_ON
00063c  2855              CMP      r0,#0x55              ;527
00063e  d111              BNE      |L1.1636|
000640  f9b6004e          LDRSH    r0,[r6,#0x4e]         ;527  ; bat
000644  2850              CMP      r0,#0x50              ;527
000646  dd0d              BLE      |L1.1636|
000648  f9b60054          LDRSH    r0,[r6,#0x54]         ;527  ; bat
00064c  f7fffffe          BL       abs
000650  f9b91000          LDRSH    r1,[r9,#0]            ;527  ; IKB
000654  4288              CMP      r0,r1                 ;527
000656  db03              BLT      |L1.1632|
000658  f8960089          LDRB     r0,[r6,#0x89]         ;527  ; bat
00065c  07c0              LSLS     r0,r0,#31             ;527
00065e  d001              BEQ      |L1.1636|
                  |L1.1632|
000660  f884b001          STRB     r11,[r4,#1]           ;527
                  |L1.1636|
000664  489a              LDR      r0,|L1.2256|
000666  7800              LDRB     r0,[r0,#0]            ;529  ; ips_bat_av_vzvod
000668  b980              CBNZ     r0,|L1.1676|
00066a  f9ba0000          LDRSH    r0,[r10,#0]           ;529  ; Ib_ips_termokompensat
00066e  f7fffffe          BL       abs
000672  f9b91000          LDRSH    r1,[r9,#0]            ;529  ; IKB
000676  4288              CMP      r0,r1                 ;529
000678  db06              BLT      |L1.1672|
00067a  4896              LDR      r0,|L1.2260|
00067c  e000              B        |L1.1664|
                  |L1.1662|
00067e  e020              B        |L1.1730|
                  |L1.1664|
000680  f890003d          LDRB     r0,[r0,#0x3d]         ;529  ; bat_ips
000684  07c0              LSLS     r0,r0,#31             ;529
000686  d001              BEQ      |L1.1676|
                  |L1.1672|
000688  f888b00d          STRB     r11,[r8,#0xd]         ;529
                  |L1.1676|
00068c  4892              LDR      r0,|L1.2264|
00068e  7800              LDRB     r0,[r0,#0]            ;531  ; net_av
000690  b938              CBNZ     r0,|L1.1698|
000692  f898000e          LDRB     r0,[r8,#0xe]          ;531  ; num_of_wrks_bps
000696  b120              CBZ      r0,|L1.1698|
000698  f8980013          LDRB     r0,[r8,#0x13]         ;531  ; spc_stat
00069c  b128              CBZ      r0,|L1.1706|
00069e  2802              CMP      r0,#2                 ;531
0006a0  d003              BEQ      |L1.1706|
                  |L1.1698|
0006a2  7025              STRB     r5,[r4,#0]            ;533
0006a4  7065              STRB     r5,[r4,#1]            ;534
0006a6  f888500d          STRB     r5,[r8,#0xd]          ;535
                  |L1.1706|
0006aa  7820              LDRB     r0,[r4,#0]            ;538  ; kb_start
0006ac  2801              CMP      r0,#1                 ;538
0006ae  d020              BEQ      |L1.1778|
0006b0  7860              LDRB     r0,[r4,#1]            ;538  ; kb_start
0006b2  2801              CMP      r0,#1                 ;538
0006b4  d01d              BEQ      |L1.1778|
0006b6  f898000d          LDRB     r0,[r8,#0xd]          ;538  ; kb_start_ips
0006ba  2801              CMP      r0,#1                 ;538
0006bc  d019              BEQ      |L1.1778|
;;;541    		}
;;;542    	else kb_cnt_1lev=0;
0006be  f8a85042          STRH     r5,[r8,#0x42]
                  |L1.1730|
;;;543    	}
;;;544    
;;;545    if(kb_cnt_1lev)
0006c2  4641              MOV      r1,r8
0006c4  f9b80042          LDRSH    r0,[r8,#0x42]  ; kb_cnt_1lev
;;;546    	{
;;;547    	kb_cnt_1lev--;
;;;548    
;;;549    	if(kb_cnt_1lev>5)mess_send(MESS2CNTRL_HNDL,PARAM_CNTRL_STAT_PLUS,30,15);
;;;550    	else if(kb_cnt_1lev>0) mess_send(MESS2CNTRL_HNDL,PARAM_CNTRL_STAT_MINUS,30,15);
;;;551    
;;;552    
;;;553    	if(kb_cnt_1lev==5)
;;;554    		{
;;;555    		ibat[0]=abs(bat[0]._Ib);
0006c8  f8df81cc          LDR      r8,|L1.2200|
0006cc  2800              CMP      r0,#0                 ;545
0006ce  f1080868          ADD      r8,r8,#0x68
0006d2  d07e              BEQ      |L1.2002|
0006d4  f1a00001          SUB      r0,r0,#1              ;547
0006d8  b200              SXTH     r0,r0                 ;547
0006da  468b              MOV      r11,r1                ;547
0006dc  f8a10042          STRH     r0,[r1,#0x42]         ;547
0006e0  2805              CMP      r0,#5                 ;549
0006e2  dd09              BLE      |L1.1784|
0006e4  230f              MOVS     r3,#0xf               ;549
0006e6  221e              MOVS     r2,#0x1e              ;549
0006e8  2164              MOVS     r1,#0x64              ;549
0006ea  20e1              MOVS     r0,#0xe1              ;549
0006ec  f7fffffe          BL       mess_send
0006f0  e00a              B        |L1.1800|
                  |L1.1778|
0006f2  f8a87042          STRH     r7,[r8,#0x42]         ;540
0006f6  e7e4              B        |L1.1730|
                  |L1.1784|
0006f8  2800              CMP      r0,#0                 ;550
0006fa  dd05              BLE      |L1.1800|
0006fc  230f              MOVS     r3,#0xf               ;550
0006fe  221e              MOVS     r2,#0x1e              ;550
000700  2169              MOVS     r1,#0x69              ;550
000702  20e1              MOVS     r0,#0xe1              ;550
000704  f7fffffe          BL       mess_send
                  |L1.1800|
000708  f8bb0042          LDRH     r0,[r11,#0x42]        ;553  ; kb_cnt_1lev
00070c  2805              CMP      r0,#5                 ;553
00070e  d111              BNE      |L1.1844|
000710  f9b60008          LDRSH    r0,[r6,#8]  ; bat
000714  f7fffffe          BL       abs
000718  f8a80000          STRH     r0,[r8,#0]
;;;556    		ibat[1]=abs(bat[1]._Ib);
00071c  f9b60054          LDRSH    r0,[r6,#0x54]  ; bat
000720  f7fffffe          BL       abs
000724  f8a80002          STRH     r0,[r8,#2]
;;;557    		ibat_ips=abs(Ib_ips_termokompensat);
000728  f9ba0000          LDRSH    r0,[r10,#0]  ; Ib_ips_termokompensat
00072c  f7fffffe          BL       abs
000730  f8ab0048          STRH     r0,[r11,#0x48]
                  |L1.1844|
;;;558    		}
;;;559    	
;;;560    	if(kb_cnt_1lev==0)
000734  4858              LDR      r0,|L1.2200|
000736  f8b00042          LDRH     r0,[r0,#0x42]  ; kb_cnt_1lev
00073a  2800              CMP      r0,#0
00073c  d158              BNE      |L1.2032|
;;;561    		{
;;;562    		ibat_[0]=abs(bat[0]._Ib);
00073e  f9b60008          LDRSH    r0,[r6,#8]  ; bat
000742  f7fffffe          BL       abs
000746  f8dfb150          LDR      r11,|L1.2200|
00074a  f10b0b6c          ADD      r11,r11,#0x6c
00074e  f8ab0000          STRH     r0,[r11,#0]
;;;563    		ibat_[1]=abs(bat[1]._Ib);
000752  f9b60054          LDRSH    r0,[r6,#0x54]  ; bat
000756  f7fffffe          BL       abs
00075a  f8ab0002          STRH     r0,[r11,#2]
;;;564    		ibat_ips_=abs(Ib_ips_termokompensat);
00075e  f9ba0000          LDRSH    r0,[r10,#0]  ; Ib_ips_termokompensat
000762  f7fffffe          BL       abs
000766  f8dfa130          LDR      r10,|L1.2200|
00076a  f8aa004a          STRH     r0,[r10,#0x4a]
;;;565    
;;;566    		kb_cnt_2lev=0;
00076e  f8aa5044          STRH     r5,[r10,#0x44]
;;;567    
;;;568    
;;;569    		if(( (ibat[0]+ibat_[0]) < IKB )&& (kb_start[0]==1))
000772  f9b80000          LDRSH    r0,[r8,#0]  ; ibat
000776  f9bb1000          LDRSH    r1,[r11,#0]  ; ibat_
00077a  4408              ADD      r0,r0,r1
00077c  f9b91000          LDRSH    r1,[r9,#0]  ; IKB
000780  4288              CMP      r0,r1
000782  da02              BGE      |L1.1930|
000784  7820              LDRB     r0,[r4,#0]  ; kb_start
000786  2801              CMP      r0,#1
000788  d034              BEQ      |L1.2036|
                  |L1.1930|
;;;570    			{
;;;571    			kb_cnt_2lev=10;  
;;;572    			}
;;;573    		else if(bat[0]._Ub>200)
00078a  f9b60002          LDRSH    r0,[r6,#2]  ; bat
00078e  28c8              CMP      r0,#0xc8
000790  dd04              BLE      |L1.1948|
;;;574    			{
;;;575    			kb_start[0]=0;
000792  7025              STRB     r5,[r4,#0]
;;;576    			avar_bat_hndl(0,0);
000794  2100              MOVS     r1,#0
000796  4608              MOV      r0,r1
000798  f7fffffe          BL       avar_bat_hndl
                  |L1.1948|
;;;577    			}
;;;578    		
;;;579    		if(( (ibat[1]+ibat_[1]) < IKB ) && (kb_start[1]==1))
00079c  f9b80002          LDRSH    r0,[r8,#2]  ; ibat
0007a0  f9bb1002          LDRSH    r1,[r11,#2]  ; ibat_
0007a4  4408              ADD      r0,r0,r1
0007a6  f9b91000          LDRSH    r1,[r9,#0]  ; IKB
0007aa  4288              CMP      r0,r1
0007ac  da02              BGE      |L1.1972|
0007ae  7860              LDRB     r0,[r4,#1]  ; kb_start
0007b0  2801              CMP      r0,#1
0007b2  d022              BEQ      |L1.2042|
                  |L1.1972|
;;;580    			{
;;;581    			kb_cnt_2lev=10;     
;;;582    			}
;;;583    		else  if(bat[1]._Ub>200)
0007b4  f9b6004e          LDRSH    r0,[r6,#0x4e]  ; bat
0007b8  28c8              CMP      r0,#0xc8
0007ba  dd04              BLE      |L1.1990|
;;;584    			{
;;;585    			kb_start[1]=0;
0007bc  7065              STRB     r5,[r4,#1]
;;;586    			avar_bat_hndl(1,0);
0007be  2100              MOVS     r1,#0
0007c0  2001              MOVS     r0,#1
0007c2  f7fffffe          BL       avar_bat_hndl
                  |L1.1990|
;;;587    			}
;;;588    #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;589    		if(( (ibat_ips+ibat_ips_) < IKB ) && (kb_start_ips==1))
0007c6  f9ba0048          LDRSH    r0,[r10,#0x48]  ; ibat_ips
0007ca  f9ba104a          LDRSH    r1,[r10,#0x4a]  ; ibat_ips_
0007ce  4408              ADD      r0,r0,r1
0007d0  e000              B        |L1.2004|
                  |L1.2002|
0007d2  e01b              B        |L1.2060|
                  |L1.2004|
0007d4  f9b91000          LDRSH    r1,[r9,#0]  ; IKB
0007d8  4288              CMP      r0,r1
0007da  da09              BGE      |L1.2032|
0007dc  f89a000d          LDRB     r0,[r10,#0xd]  ; kb_start_ips
0007e0  2801              CMP      r0,#1
0007e2  d105              BNE      |L1.2032|
;;;590    			{
;;;591    			if(KB_ALGORITM==1)
0007e4  483d              LDR      r0,|L1.2268|
0007e6  8800              LDRH     r0,[r0,#0]  ; KB_ALGORITM
0007e8  2801              CMP      r0,#1
0007ea  d009              BEQ      |L1.2048|
;;;592    				{
;;;593    				avar_bat_ips_hndl(1);
;;;594    				kb_start_ips=0;
;;;595    				}
;;;596    			else
;;;597    				{
;;;598    				kb_cnt_2lev=10;     
0007ec  f8aa7044          STRH     r7,[r10,#0x44]
                  |L1.2032|
;;;599    				}
;;;600    			}
;;;601    #endif
;;;602    		}	
;;;603    
;;;604    
;;;605    	}
;;;606    else if(kb_cnt_2lev)
;;;607    	{
;;;608    	kb_cnt_2lev--;
;;;609    
;;;610    	if(kb_cnt_2lev>5)mess_send(MESS2CNTRL_HNDL,PARAM_CNTRL_STAT_PLUS,200,15);
;;;611    	else if(kb_cnt_2lev>0) mess_send(MESS2CNTRL_HNDL,PARAM_CNTRL_STAT_MINUS,200,15);
;;;612    
;;;613    
;;;614    	if(kb_cnt_2lev==5)
;;;615    		{
;;;616    		ibat[0]=abs(bat[0]._Ib);
;;;617    		ibat[1]=abs(bat[1]._Ib);
;;;618    		ibat_ips=abs(Ib_ips_termokompensat);
;;;619    		}
;;;620    	
;;;621    	if(kb_cnt_2lev==0)
;;;622    		{
;;;623    		ibat_[0]=abs(bat[0]._Ib);
;;;624    		ibat_[1]=abs(bat[1]._Ib);
;;;625    		ibat_ips_=abs(Ib_ips_termokompensat);
;;;626    
;;;627    		kb_full_ver=0;
;;;628    
;;;629    		if(( (ibat[0]+ibat_[0]) < IKB ) && (kb_start[0]==1))
;;;630    			{
;;;631    			kb_full_ver=1;  
;;;632    			}
;;;633    		else if(bat[0]._Ub>200)			
;;;634    			{
;;;635    			kb_start[0]=0;
;;;636    			avar_bat_hndl(0,0);
;;;637    			}
;;;638    
;;;639    		if(( (ibat[1]+ibat_[1]) < IKB ) && (kb_start[1]==1))
;;;640    			{
;;;641    			kb_full_ver=1;     
;;;642    			}
;;;643    		else	if(bat[1]._Ub>200)		
;;;644    			{
;;;645    			kb_start[1]=0;
;;;646    			avar_bat_hndl(1,0);
;;;647    			}
;;;648    #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;649    		if(( (ibat_ips+ibat_ips_) < IKB )  && (kb_start_ips==1))
;;;650    			{
;;;651    			if(KB_ALGORITM==2)
;;;652    				{
;;;653    				avar_bat_ips_hndl(1);
;;;654    				kb_start_ips=0;
;;;655    				}
;;;656    			else
;;;657    				{
;;;658    				kb_full_ver=1;     
;;;659    				}
;;;660    			}
;;;661    #endif
;;;662    		}	
;;;663    	}
;;;664    
;;;665    else if(kb_full_ver)
;;;666    	{
;;;667    	
;;;668    	mess_send(MESS2CNTRL_HNDL,PARAM_CNTRL_STAT_STEP_DOWN,0,15);
;;;669    
;;;670    	if( abs(bat[0]._Ib) > IKB ) 
;;;671    		{
;;;672    		if(kb_start[0]==1)
;;;673    			{
;;;674    			kb_start[0]=0;
;;;675    			avar_bat_hndl(0,0);
;;;676    			}
;;;677    		}
;;;678    
;;;679    	if( abs(bat[1]._Ib) > IKB ) 
;;;680    		{
;;;681    		if(kb_start[1]==1)
;;;682    			{
;;;683    			kb_start[1]=0;
;;;684    			avar_bat_hndl(1,0);
;;;685    			}
;;;686    		}
;;;687    #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;688    	if( abs(Ib_ips_termokompensat) > IKB ) 
;;;689    		{
;;;690    		if(kb_start_ips==1)
;;;691    			{
;;;692    			kb_start_ips=0;
;;;693    			avar_bat_ips_hndl(0);
;;;694    			}
;;;695    		}
;;;696    #endif
;;;697    
;;;698    	if ((kb_start[0]==0) && (kb_start[1]==0) && (kb_start_ips==0)) 
;;;699    		{
;;;700    		kb_full_ver=0;
;;;701    		}
;;;702    
;;;703    	if(( (mess_find(MESS2KB_HNDL))	&& (mess_data[0]==PARAM_CNTRL_IS_DOWN) ) || (load_U<(USIGN*10)) )
;;;704    		{
;;;705    		kb_full_ver=0;
;;;706    		if((kb_start[0]==1)&&((load_I>(2*IKB)/10))&&(!(bat[0]._av&0x01))) avar_bat_hndl(0,1);
;;;707    		if((kb_start[1]==1)&&((load_I>(2*IKB)/10))&&(!(bat[1]._av&0x01))) avar_bat_hndl(1,1);
;;;708    #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;709    		if((kb_start_ips==1)&&((load_I>(2*IKB)/10))&&(!(bat_ips._av&0x01))) avar_bat_ips_hndl(1);
;;;710    #endif
;;;711    		}
;;;712    	}
;;;713    
;;;714    }
0007f0  e8bd9ff0          POP      {r4-r12,pc}
                  |L1.2036|
0007f4  f8aa7044          STRH     r7,[r10,#0x44]        ;571
0007f8  e7d0              B        |L1.1948|
                  |L1.2042|
0007fa  f8aa7044          STRH     r7,[r10,#0x44]        ;581
0007fe  e7e2              B        |L1.1990|
                  |L1.2048|
000800  2001              MOVS     r0,#1                 ;593
000802  f7fffffe          BL       avar_bat_ips_hndl
000806  f88a500d          STRB     r5,[r10,#0xd]         ;594
                  |L1.2058|
00080a  e7f1              B        |L1.2032|
                  |L1.2060|
00080c  f9b10044          LDRSH    r0,[r1,#0x44]         ;606  ; kb_cnt_2lev
000810  b3f0              CBZ      r0,|L1.2192|
000812  f1a00001          SUB      r0,r0,#1              ;608
000816  b200              SXTH     r0,r0                 ;608
000818  460f              MOV      r7,r1                 ;608
00081a  f8a10044          STRH     r0,[r1,#0x44]         ;608
00081e  2805              CMP      r0,#5                 ;610
000820  dd06              BLE      |L1.2096|
000822  230f              MOVS     r3,#0xf               ;610
000824  22c8              MOVS     r2,#0xc8              ;610
000826  2164              MOVS     r1,#0x64              ;610
000828  20e1              MOVS     r0,#0xe1              ;610
00082a  f7fffffe          BL       mess_send
00082e  e007              B        |L1.2112|
                  |L1.2096|
000830  2800              CMP      r0,#0                 ;611
000832  dd05              BLE      |L1.2112|
000834  230f              MOVS     r3,#0xf               ;611
000836  22c8              MOVS     r2,#0xc8              ;611
000838  2169              MOVS     r1,#0x69              ;611
00083a  20e1              MOVS     r0,#0xe1              ;611
00083c  f7fffffe          BL       mess_send
                  |L1.2112|
000840  f8b70044          LDRH     r0,[r7,#0x44]         ;614  ; kb_cnt_2lev
000844  2805              CMP      r0,#5                 ;614
000846  d111              BNE      |L1.2156|
000848  f9b60008          LDRSH    r0,[r6,#8]            ;616  ; bat
00084c  f7fffffe          BL       abs
000850  f8a80000          STRH     r0,[r8,#0]            ;616
000854  f9b60054          LDRSH    r0,[r6,#0x54]         ;617  ; bat
000858  f7fffffe          BL       abs
00085c  f8a80002          STRH     r0,[r8,#2]            ;617
000860  f9ba0000          LDRSH    r0,[r10,#0]           ;618  ; Ib_ips_termokompensat
000864  f7fffffe          BL       abs
000868  f8a70048          STRH     r0,[r7,#0x48]         ;618
                  |L1.2156|
00086c  480a              LDR      r0,|L1.2200|
00086e  f8b00044          LDRH     r0,[r0,#0x44]         ;621  ; kb_cnt_2lev
000872  2800              CMP      r0,#0                 ;621
                  |L1.2164|
000874  d1bc              BNE      |L1.2032|
000876  f9b60008          LDRSH    r0,[r6,#8]            ;623  ; bat
00087a  f7fffffe          BL       abs
00087e  4f06              LDR      r7,|L1.2200|
000880  376c              ADDS     r7,r7,#0x6c           ;623
000882  8038              STRH     r0,[r7,#0]            ;623
000884  f9b60054          LDRSH    r0,[r6,#0x54]         ;624  ; bat
000888  f7fffffe          BL       abs
00088c  8078              STRH     r0,[r7,#2]            ;624
00088e  e027              B        |L1.2272|
                  |L1.2192|
000890  e07b              B        |L1.2442|
000892  0000              DCW      0x0000
                  |L1.2196|
                          DCD      AVZ
                  |L1.2200|
                          DCD      ||area_number.21||
                  |L1.2204|
                          DCD      0x40024000
                  |L1.2208|
                          DCD      YEAR_AVZ
                  |L1.2212|
                          DCD      MONTH_AVZ
                  |L1.2216|
                          DCD      DATE_AVZ
                  |L1.2220|
                          DCD      HOUR_AVZ
                  |L1.2224|
                          DCD      MIN_AVZ
                  |L1.2228|
                          DCD      SEC_AVZ
                  |L1.2232|
                          DCD      AVZ_TIME
                  |L1.2236|
                          DCD      TBAT
                  |L1.2240|
                          DCD      Ib_ips_termokompensat
                  |L1.2244|
                          DCD      bat
                  |L1.2248|
                          DCD      IKB
                  |L1.2252|
                          DCD      BAT_IS_ON
                  |L1.2256|
                          DCD      ips_bat_av_vzvod
                  |L1.2260|
                          DCD      bat_ips
                  |L1.2264|
                          DCD      net_av
                  |L1.2268|
                          DCD      KB_ALGORITM
                  |L1.2272|
0008e0  f9ba0000          LDRSH    r0,[r10,#0]           ;625  ; Ib_ips_termokompensat
0008e4  f7fffffe          BL       abs
0008e8  f1a70a6c          SUB      r10,r7,#0x6c          ;625
0008ec  f8aa004a          STRH     r0,[r10,#0x4a]        ;625
0008f0  f88a500c          STRB     r5,[r10,#0xc]         ;627
0008f4  f9b80000          LDRSH    r0,[r8,#0]            ;629  ; ibat
0008f8  f9b71000          LDRSH    r1,[r7,#0]            ;629  ; ibat_
0008fc  4408              ADD      r0,r0,r1              ;629
0008fe  f9b91000          LDRSH    r1,[r9,#0]            ;629  ; IKB
000902  4288              CMP      r0,r1                 ;629
000904  da02              BGE      |L1.2316|
000906  7820              LDRB     r0,[r4,#0]            ;629  ; kb_start
000908  2801              CMP      r0,#1                 ;629
00090a  d032              BEQ      |L1.2418|
                  |L1.2316|
00090c  f9b60002          LDRSH    r0,[r6,#2]            ;633  ; bat
000910  28c8              CMP      r0,#0xc8              ;633
000912  dd04              BLE      |L1.2334|
000914  7025              STRB     r5,[r4,#0]            ;635
000916  2100              MOVS     r1,#0                 ;636
000918  4608              MOV      r0,r1                 ;636
00091a  f7fffffe          BL       avar_bat_hndl
                  |L1.2334|
00091e  f9b80002          LDRSH    r0,[r8,#2]            ;639  ; ibat
000922  f9b71002          LDRSH    r1,[r7,#2]            ;639  ; ibat_
000926  4408              ADD      r0,r0,r1              ;639
000928  f9b91000          LDRSH    r1,[r9,#0]            ;639  ; IKB
00092c  4288              CMP      r0,r1                 ;639
00092e  da02              BGE      |L1.2358|
000930  7860              LDRB     r0,[r4,#1]            ;639  ; kb_start
000932  2801              CMP      r0,#1                 ;639
000934  d020              BEQ      |L1.2424|
                  |L1.2358|
000936  f9b6004e          LDRSH    r0,[r6,#0x4e]         ;643  ; bat
00093a  28c8              CMP      r0,#0xc8              ;643
00093c  dd04              BLE      |L1.2376|
00093e  7065              STRB     r5,[r4,#1]            ;645
000940  2100              MOVS     r1,#0                 ;646
000942  2001              MOVS     r0,#1                 ;646
000944  f7fffffe          BL       avar_bat_hndl
                  |L1.2376|
000948  f9ba0048          LDRSH    r0,[r10,#0x48]        ;649  ; ibat_ips
00094c  f9ba104a          LDRSH    r1,[r10,#0x4a]        ;649  ; ibat_ips_
000950  4408              ADD      r0,r0,r1              ;649
000952  f9b91000          LDRSH    r1,[r9,#0]            ;649  ; IKB
000956  4288              CMP      r0,r1                 ;649
000958  f6bfaf57          BGE      |L1.2058|
00095c  f89a000d          LDRB     r0,[r10,#0xd]         ;649  ; kb_start_ips
000960  2801              CMP      r0,#1                 ;649
000962  d187              BNE      |L1.2164|
000964  48f9              LDR      r0,|L1.3404|
000966  8800              LDRH     r0,[r0,#0]            ;651  ; KB_ALGORITM
000968  2802              CMP      r0,#2                 ;651
00096a  d008              BEQ      |L1.2430|
00096c  f88ab00c          STRB     r11,[r10,#0xc]        ;658
                  |L1.2416|
000970  e73e              B        |L1.2032|
                  |L1.2418|
000972  f88ab00c          STRB     r11,[r10,#0xc]        ;631
000976  e7d2              B        |L1.2334|
                  |L1.2424|
000978  f88ab00c          STRB     r11,[r10,#0xc]        ;641
00097c  e7e4              B        |L1.2376|
                  |L1.2430|
00097e  2001              MOVS     r0,#1                 ;653
000980  f7fffffe          BL       avar_bat_ips_hndl
000984  f88a500d          STRB     r5,[r10,#0xd]         ;654
000988  e732              B        |L1.2032|
                  |L1.2442|
00098a  7b08              LDRB     r0,[r1,#0xc]          ;665  ; kb_full_ver
00098c  4688              MOV      r8,r1                 ;665
00098e  2800              CMP      r0,#0                 ;665
000990  d0ee              BEQ      |L1.2416|
000992  230f              MOVS     r3,#0xf               ;668
000994  2200              MOVS     r2,#0                 ;668
000996  216e              MOVS     r1,#0x6e              ;668
000998  20e1              MOVS     r0,#0xe1              ;668
00099a  f7fffffe          BL       mess_send
00099e  f9b60008          LDRSH    r0,[r6,#8]            ;670  ; bat
0009a2  f7fffffe          BL       abs
0009a6  f9b91000          LDRSH    r1,[r9,#0]            ;670  ; IKB
0009aa  4288              CMP      r0,r1                 ;670
0009ac  dd07              BLE      |L1.2494|
0009ae  7820              LDRB     r0,[r4,#0]            ;672  ; kb_start
0009b0  2801              CMP      r0,#1                 ;672
0009b2  d104              BNE      |L1.2494|
0009b4  7025              STRB     r5,[r4,#0]            ;674
0009b6  2100              MOVS     r1,#0                 ;675
0009b8  4608              MOV      r0,r1                 ;675
0009ba  f7fffffe          BL       avar_bat_hndl
                  |L1.2494|
0009be  f9b60054          LDRSH    r0,[r6,#0x54]         ;679  ; bat
0009c2  f7fffffe          BL       abs
0009c6  f9b91000          LDRSH    r1,[r9,#0]            ;679  ; IKB
0009ca  4288              CMP      r0,r1                 ;679
0009cc  dd06              BLE      |L1.2524|
0009ce  7860              LDRB     r0,[r4,#1]            ;681  ; kb_start
0009d0  2801              CMP      r0,#1                 ;681
0009d2  d103              BNE      |L1.2524|
0009d4  7065              STRB     r5,[r4,#1]            ;683
0009d6  2100              MOVS     r1,#0                 ;684
0009d8  f7fffffe          BL       avar_bat_hndl
                  |L1.2524|
0009dc  f9ba0000          LDRSH    r0,[r10,#0]           ;688  ; Ib_ips_termokompensat
0009e0  f7fffffe          BL       abs
0009e4  f9b91000          LDRSH    r1,[r9,#0]            ;688  ; IKB
0009e8  4288              CMP      r0,r1                 ;688
0009ea  dd08              BLE      |L1.2558|
0009ec  f898000d          LDRB     r0,[r8,#0xd]          ;690  ; kb_start_ips
0009f0  2801              CMP      r0,#1                 ;690
0009f2  d104              BNE      |L1.2558|
0009f4  f888500d          STRB     r5,[r8,#0xd]          ;692
0009f8  2000              MOVS     r0,#0                 ;693
0009fa  f7fffffe          BL       avar_bat_ips_hndl
                  |L1.2558|
0009fe  7820              LDRB     r0,[r4,#0]            ;698  ; kb_start
000a00  b930              CBNZ     r0,|L1.2576|
000a02  7860              LDRB     r0,[r4,#1]            ;698  ; kb_start
000a04  b920              CBNZ     r0,|L1.2576|
000a06  f898000d          LDRB     r0,[r8,#0xd]          ;698  ; kb_start_ips
000a0a  b908              CBNZ     r0,|L1.2576|
000a0c  f888500c          STRB     r5,[r8,#0xc]          ;700
                  |L1.2576|
000a10  20e6              MOVS     r0,#0xe6              ;703
000a12  f7fffffe          BL       mess_find
000a16  b118              CBZ      r0,|L1.2592|
000a18  48cd              LDR      r0,|L1.3408|
000a1a  6800              LDR      r0,[r0,#0]            ;703  ; mess_data
000a1c  28e7              CMP      r0,#0xe7              ;703
000a1e  d00a              BEQ      |L1.2614|
                  |L1.2592|
000a20  48cc              LDR      r0,|L1.3412|
000a22  49cd              LDR      r1,|L1.3416|
000a24  f9b00000          LDRSH    r0,[r0,#0]            ;703  ; USIGN
000a28  f9b11000          LDRSH    r1,[r1,#0]            ;703  ; load_U
000a2c  eb000080          ADD      r0,r0,r0,LSL #2       ;703
000a30  ebb10f40          CMP      r1,r0,LSL #1          ;703
                  |L1.2612|
000a34  da9c              BGE      |L1.2416|
                  |L1.2614|
000a36  f888500c          STRB     r5,[r8,#0xc]          ;705
000a3a  7820              LDRB     r0,[r4,#0]            ;706  ; kb_start
000a3c  4dc7              LDR      r5,|L1.3420|
000a3e  2801              CMP      r0,#1                 ;706
000a40  d10f              BNE      |L1.2658|
000a42  f9b90000          LDRSH    r0,[r9,#0]            ;706  ; IKB
000a46  f9b51000          LDRSH    r1,[r5,#0]            ;706  ; load_I
000a4a  0040              LSLS     r0,r0,#1              ;706
000a4c  fb90f0f7          SDIV     r0,r0,r7              ;706
000a50  4288              CMP      r0,r1                 ;706
000a52  da06              BGE      |L1.2658|
000a54  f896003d          LDRB     r0,[r6,#0x3d]         ;706  ; bat
000a58  07c0              LSLS     r0,r0,#31             ;706
000a5a  d102              BNE      |L1.2658|
000a5c  2101              MOVS     r1,#1                 ;706
000a5e  f7fffffe          BL       avar_bat_hndl
                  |L1.2658|
000a62  7860              LDRB     r0,[r4,#1]            ;707  ; kb_start
000a64  2801              CMP      r0,#1                 ;707
000a66  d110              BNE      |L1.2698|
000a68  f9b90000          LDRSH    r0,[r9,#0]            ;707  ; IKB
000a6c  f9b51000          LDRSH    r1,[r5,#0]            ;707  ; load_I
000a70  0040              LSLS     r0,r0,#1              ;707
000a72  fb90f0f7          SDIV     r0,r0,r7              ;707
000a76  4288              CMP      r0,r1                 ;707
000a78  da07              BGE      |L1.2698|
000a7a  f8960089          LDRB     r0,[r6,#0x89]         ;707  ; bat
000a7e  07c0              LSLS     r0,r0,#31             ;707
000a80  d103              BNE      |L1.2698|
000a82  2101              MOVS     r1,#1                 ;707
000a84  4608              MOV      r0,r1                 ;707
000a86  f7fffffe          BL       avar_bat_hndl
                  |L1.2698|
000a8a  f898000d          LDRB     r0,[r8,#0xd]          ;709  ; kb_start_ips
000a8e  2801              CMP      r0,#1                 ;709
                  |L1.2704|
000a90  f47faebb          BNE      |L1.2058|
000a94  f9b90000          LDRSH    r0,[r9,#0]            ;709  ; IKB
000a98  f9b51000          LDRSH    r1,[r5,#0]            ;709  ; load_I
000a9c  0040              LSLS     r0,r0,#1              ;709
000a9e  fb90f0f7          SDIV     r0,r0,r7              ;709
000aa2  4288              CMP      r0,r1                 ;709
000aa4  dac6              BGE      |L1.2612|
000aa6  48ae              LDR      r0,|L1.3424|
000aa8  f890003d          LDRB     r0,[r0,#0x3d]         ;709  ; bat_ips
000aac  07c0              LSLS     r0,r0,#31             ;709
000aae  d1ef              BNE      |L1.2704|
000ab0  e8bd5ff0          POP      {r4-r12,lr}           ;709
000ab4  2001              MOVS     r0,#1                 ;709
000ab6  f7ffbffe          B.W      avar_bat_ips_hndl
;;;715    
                          ENDP

                  samokalibr_hndl PROC
;;;724    //-----------------------------------------------
;;;725    void samokalibr_hndl(void)
000aba  e92d47f0          PUSH     {r4-r10,lr}
;;;726    {
;;;727    if(++samokalibr_cnt>=1800)samokalibr_cnt=0;
000abe  4ca9              LDR      r4,|L1.3428|
000ac0  8fe0              LDRH     r0,[r4,#0x3e]  ; samokalibr_cnt
000ac2  1c40              ADDS     r0,r0,#1
000ac4  b200              SXTH     r0,r0
000ac6  87e0              STRH     r0,[r4,#0x3e]
000ac8  f5b06fe1          CMP      r0,#0x708
000acc  db02              BLT      |L1.2772|
000ace  f04f0000          MOV      r0,#0
000ad2  87e0              STRH     r0,[r4,#0x3e]
                  |L1.2772|
;;;728    
;;;729    if(samokalibr_cnt>=1785U)
000ad4  f9b4003e          LDRSH    r0,[r4,#0x3e]  ; samokalibr_cnt
000ad8  f5b06fdf          CMP      r0,#0x6f8
000adc  d911              BLS      |L1.2818|
;;;730    	{
;;;731    	mess_send(MESS2RELE_HNDL,PARAM_RELE_SAMOKALIBR,1,15);
000ade  230f              MOVS     r3,#0xf
000ae0  2201              MOVS     r2,#1
000ae2  2164              MOVS     r1,#0x64
000ae4  20d2              MOVS     r0,#0xd2
000ae6  f7fffffe          BL       mess_send
;;;732    	mess_send(MESS2IND_HNDL,PARAM_SAMOKALIBR,0,15);
000aea  230f              MOVS     r3,#0xf
000aec  2200              MOVS     r2,#0
000aee  21d8              MOVS     r1,#0xd8
000af0  20d7              MOVS     r0,#0xd7
000af2  f7fffffe          BL       mess_send
;;;733    	mess_send(MESS2MATEMAT,PARAM_SAMOKALIBR,0,15);
000af6  230f              MOVS     r3,#0xf
000af8  2200              MOVS     r2,#0
000afa  21d8              MOVS     r1,#0xd8
000afc  20dc              MOVS     r0,#0xdc
000afe  f7fffffe          BL       mess_send
                  |L1.2818|
;;;734    	} 
;;;735    
;;;736    if(samokalibr_cnt==1799U)
000b02  f9b4003e          LDRSH    r0,[r4,#0x3e]  ; samokalibr_cnt
000b06  f5a061e0          SUB      r1,r0,#0x700
000b0a  3907              SUBS     r1,#7
000b0c  d133              BNE      |L1.2934|
;;;737    	{
;;;738    	if((Kibat0[0]!=ad7705_buff_[0])&&(abs(bat[0]._Ib/10)<IZMAX)) lc640_write_int(ADR_KI0BAT[0],ad7705_buff_[0]);
000b0e  4d96              LDR      r5,|L1.3432|
000b10  4c96              LDR      r4,|L1.3436|
000b12  4e97              LDR      r6,|L1.3440|
000b14  8828              LDRH     r0,[r5,#0]  ; Kibat0
000b16  8821              LDRH     r1,[r4,#0]  ; ad7705_buff_
000b18  270a              MOVS     r7,#0xa
000b1a  f8df8258          LDR      r8,|L1.3444|
000b1e  f8df9258          LDR      r9,|L1.3448|
000b22  4288              CMP      r0,r1
000b24  d010              BEQ      |L1.2888|
000b26  f9b60008          LDRSH    r0,[r6,#8]  ; bat
000b2a  fb90f0f7          SDIV     r0,r0,r7
000b2e  b200              SXTH     r0,r0
000b30  f7fffffe          BL       abs
000b34  f9b81000          LDRSH    r1,[r8,#0]  ; IZMAX
000b38  4288              CMP      r0,r1
000b3a  da05              BGE      |L1.2888|
000b3c  f9b41000          LDRSH    r1,[r4,#0]  ; ad7705_buff_
000b40  f9b90000          LDRSH    r0,[r9,#0]  ; ADR_KI0BAT
000b44  f7fffffe          BL       lc640_write_int
                  |L1.2888|
;;;739    	if((Kibat0[1]!=ad7705_buff_[1])&&(abs(bat[0]._Ib/10)<IZMAX)) lc640_write_int(ADR_KI0BAT[1],ad7705_buff_[1]);
000b48  8868              LDRH     r0,[r5,#2]  ; Kibat0
000b4a  8861              LDRH     r1,[r4,#2]  ; ad7705_buff_
000b4c  4288              CMP      r0,r1
000b4e  d012              BEQ      |L1.2934|
000b50  f9b60008          LDRSH    r0,[r6,#8]  ; bat
000b54  fb90f0f7          SDIV     r0,r0,r7
000b58  b200              SXTH     r0,r0
000b5a  f7fffffe          BL       abs
000b5e  f9b81000          LDRSH    r1,[r8,#0]  ; IZMAX
000b62  4288              CMP      r0,r1
000b64  da07              BGE      |L1.2934|
000b66  f9b41002          LDRSH    r1,[r4,#2]  ; ad7705_buff_
000b6a  f9b90002          LDRSH    r0,[r9,#2]  ; ADR_KI0BAT
000b6e  e8bd47f0          POP      {r4-r10,lr}
000b72  f7ffbffe          B.W      lc640_write_int
                  |L1.2934|
;;;740    	
;;;741    	}	 	
;;;742    }
000b76  e8bd87f0          POP      {r4-r10,pc}
;;;743    
                          ENDP

                  ubat_old_drv PROC
;;;746    //-----------------------------------------------
;;;747    void ubat_old_drv(void)
000b7a  b510              PUSH     {r4,lr}
;;;748    {        
;;;749    bat_u_old_cnt++;
000b7c  4c7f              LDR      r4,|L1.3452|
000b7e  8820              LDRH     r0,[r4,#0]  ; bat_u_old_cnt
000b80  f1000001          ADD      r0,r0,#1
000b84  8020              STRH     r0,[r4,#0]
;;;750    gran_ring(&bat_u_old_cnt,0,8);
000b86  f04f0208          MOV      r2,#8
000b8a  f04f0100          MOV      r1,#0
000b8e  4620              MOV      r0,r4
000b90  f7fffffe          BL       gran_ring
;;;751    
;;;752    bat[0]._u_old[bat_u_old_cnt]=bat[0]._Ub;
000b94  4976              LDR      r1,|L1.3440|
000b96  f9b40000          LDRSH    r0,[r4,#0]  ; bat_u_old_cnt
000b9a  eb010040          ADD      r0,r1,r0,LSL #1
000b9e  884a              LDRH     r2,[r1,#2]  ; bat
000ba0  8402              STRH     r2,[r0,#0x20]
;;;753    bat[1]._u_old[bat_u_old_cnt]=bat[1]._Ub;
000ba2  f8b1104e          LDRH     r1,[r1,#0x4e]  ; bat
000ba6  f8a0106c          STRH     r1,[r0,#0x6c]
;;;754    }
000baa  bd10              POP      {r4,pc}
;;;755    
                          ENDP

                  unet_drv PROC
;;;756    //-----------------------------------------------
;;;757    void unet_drv(void)
000bac  b570              PUSH     {r4-r6,lr}
;;;758    {
;;;759    if(net_U<UMN)
000bae  4d74              LDR      r5,|L1.3456|
000bb0  4874              LDR      r0,|L1.3460|
;;;760    	{
;;;761    	if((unet_drv_cnt<10)&&(main_1Hz_cnt>15))
000bb2  4a75              LDR      r2,|L1.3464|
000bb4  f9b51000          LDRSH    r1,[r5,#0]            ;759  ; net_U
000bb8  f9b03000          LDRSH    r3,[r0,#0]            ;759  ; UMN
000bbc  f9920000          LDRSB    r0,[r2,#0]
000bc0  4299              CMP      r1,r3                 ;759
000bc2  da1f              BGE      |L1.3076|
;;;762    		{
;;;763    		unet_drv_cnt++;
;;;764    		if(unet_drv_cnt>=10)
;;;765    			{
;;;766    			net_Ustore=net_U;
000bc4  4c71              LDR      r4,|L1.3468|
000bc6  280a              CMP      r0,#0xa               ;761
000bc8  da0f              BGE      |L1.3050|
000bca  4b71              LDR      r3,|L1.3472|
000bcc  f9b33000          LDRSH    r3,[r3,#0]            ;761  ; main_1Hz_cnt
000bd0  2b0f              CMP      r3,#0xf               ;761
000bd2  dd0a              BLE      |L1.3050|
000bd4  f1000001          ADD      r0,r0,#1              ;763
000bd8  b240              SXTB     r0,r0                 ;763
000bda  7010              STRB     r0,[r2,#0]            ;763
000bdc  280a              CMP      r0,#0xa               ;764
000bde  db09              BLT      |L1.3060|
000be0  8021              STRH     r1,[r4,#0]
;;;767    		 	avar_unet_hndl(1);
000be2  2001              MOVS     r0,#1
000be4  f7fffffe          BL       avar_unet_hndl
000be8  e004              B        |L1.3060|
                  |L1.3050|
;;;768    			
;;;769    			}
;;;770    		}
;;;771    	else if(unet_drv_cnt>=10)unet_drv_cnt=10;
000bea  280a              CMP      r0,#0xa
000bec  db02              BLT      |L1.3060|
000bee  f04f000a          MOV      r0,#0xa
000bf2  7010              STRB     r0,[r2,#0]
                  |L1.3060|
;;;772    
;;;773    	if(net_U<net_Ustore) net_Ustore=net_U;	
000bf4  f9b50000          LDRSH    r0,[r5,#0]  ; net_U
000bf8  f9b41000          LDRSH    r1,[r4,#0]  ; net_Ustore
000bfc  4288              CMP      r0,r1
000bfe  da00              BGE      |L1.3074|
000c00  8020              STRH     r0,[r4,#0]
                  |L1.3074|
;;;774    	}
;;;775    
;;;776    else if(net_U>UMN)
;;;777    	{                 
;;;778    	if(unet_drv_cnt)
;;;779    		{
;;;780    		unet_drv_cnt--;
;;;781    		if(unet_drv_cnt<=0)
;;;782    			{
;;;783    			avar_unet_hndl(0);
;;;784    			}
;;;785    		}
;;;786    	else if(unet_drv_cnt<0)unet_drv_cnt=0;
;;;787    	
;;;788    	}
;;;789    
;;;790    }
000c02  bd70              POP      {r4-r6,pc}
                  |L1.3076|
000c04  ddfd              BLE      |L1.3074|
000c06  2800              CMP      r0,#0                 ;778
000c08  d0fb              BEQ      |L1.3074|
000c0a  f1a00001          SUB      r0,r0,#1              ;780
000c0e  b240              SXTB     r0,r0                 ;780
000c10  7010              STRB     r0,[r2,#0]            ;780
000c12  2800              CMP      r0,#0                 ;781
000c14  dcf5              BGT      |L1.3074|
000c16  e8bd4070          POP      {r4-r6,lr}            ;783
000c1a  2000              MOVS     r0,#0                 ;783
000c1c  f7ffbffe          B.W      avar_unet_hndl
;;;791    
                          ENDP

                  matemat PROC
;;;792    //-----------------------------------------------
;;;793    void matemat(void)
000c20  e92d4ffe          PUSH     {r1-r11,lr}
;;;794    {
;;;795    //signed short temp_SS;
;;;796    signed long temp_SL/*,temp_SL_*/;
;;;797    char /*temp,*/i;
;;;798    //signed short temp_SS;
;;;799    
;;;800    #ifdef UKU_MGTS
;;;801    // 
;;;802    temp_SL=(signed long)net_buff_;
;;;803    temp_SL*=Kunet;
;;;804    temp_SL/=110000L;
;;;805    net_U=(signed short)temp_SL;
;;;806    #endif
;;;807    
;;;808    #ifdef UKU_RSTKM
;;;809    // 
;;;810    temp_SL=(signed long)net_buff_;
;;;811    temp_SL*=Kunet;
;;;812    temp_SL/=110000L;
;;;813    net_U=(signed short)temp_SL;
;;;814    #endif
;;;815    
;;;816    #ifdef UKU_3U
;;;817    // 
;;;818    temp_SL=(signed long)net_buff_;
;;;819    temp_SL*=Kunet;
;;;820    temp_SL/=36000L;
;;;821    net_U=(signed short)temp_SL;
;;;822    #endif
;;;823    
;;;824    #ifdef UKU_6U
;;;825    // 
;;;826    
;;;827    if((AUSW_MAIN%10)||(AUSW_MAIN==2400)||(AUSW_MAIN==4800)||(AUSW_MAIN==6000))
;;;828    	{
;;;829    
;;;830    	if(bps[11]._device==dNET_METR)
;;;831    		{
;;;832    		net_metr_buff_[0]=((signed short)bps[11]._buff[0])+(((signed short)bps[11]._buff[1])<<8);
;;;833    		net_metr_buff_[1]=((signed short)bps[11]._buff[2])+(((signed short)bps[11]._buff[3])<<8);
;;;834    		net_metr_buff_[2]=((signed short)bps[11]._buff[4])+(((signed short)bps[11]._buff[5])<<8);
;;;835    
;;;836    		temp_SL=(signed long)net_metr_buff_[0];
;;;837    		temp_SL*=KunetA;
;;;838    		temp_SL/=6000L;
;;;839    		net_Ua=(signed short)temp_SL;
;;;840    	
;;;841    		temp_SL=(signed long)net_metr_buff_[1];
;;;842    		temp_SL*=KunetB;
;;;843    		temp_SL/=6000L;
;;;844    		net_Ub=(signed short)temp_SL;
;;;845    	
;;;846    		temp_SL=(signed long)net_metr_buff_[2];
;;;847    		temp_SL*=KunetC;
;;;848    		temp_SL/=6000L;
;;;849    		net_Uc=(signed short)temp_SL;
;;;850    		}
;;;851    	else
;;;852    		{
;;;853    		temp_SL=(signed long)net_buff_;
;;;854    		temp_SL*=KunetA;
;;;855    		temp_SL/=110000L;
;;;856    		net_Ua=(signed short)temp_SL;
;;;857    	
;;;858    		temp_SL=(signed long)adc_buff_[3];
;;;859    		temp_SL*=KunetB;
;;;860    		temp_SL/=6000L;
;;;861    		net_Ub=(signed short)temp_SL;
;;;862    	
;;;863    		temp_SL=(signed long)adc_buff_[10];
;;;864    		temp_SL*=KunetC;
;;;865    		temp_SL/=6000L;
;;;866    		net_Uc=(signed short)temp_SL;
;;;867    		}
;;;868    
;;;869    	net_U=net_Ua;
;;;870    	if(net_Ub<net_U)net_U=net_Ub;
;;;871    	if(net_Uc<net_U)net_U=net_Uc;
;;;872    	}
;;;873    else 
;;;874    	{
;;;875    	temp_SL=(signed long)net_buff_;
;;;876    	temp_SL*=Kunet;
;;;877    	temp_SL/=110000L;
;;;878    	net_U=(signed short)temp_SL;
;;;879    	}
;;;880    
;;;881    
;;;882    
;;;883    
;;;884    #endif
;;;885    
;;;886    #ifdef UKU_GLONASS
;;;887    // 
;;;888    temp_SL=(signed long)net_buff_;
;;;889    temp_SL*=Kunet;
;;;890    temp_SL/=110000L;
;;;891    net_U=(signed short)temp_SL;
;;;892    #endif
;;;893    
;;;894    #ifdef UKU_KONTUR
;;;895    // 
;;;896    temp_SL=(signed long)net_buff_;
;;;897    temp_SL*=Kunet;
;;;898    temp_SL/=110000L;
;;;899    net_U=(signed short)temp_SL;
;;;900    #endif
;;;901    
;;;902    
;;;903    #ifdef UKU_220_V2
;;;904    // 
;;;905    
;;;906    if(AUSW_MAIN==22033)
;;;907    	{
;;;908    	temp_SL=(signed long)net_buff_;
;;;909    	temp_SL*=KunetA;
;;;910    	temp_SL/=6000L;
;;;911    	net_Ua=(signed short)temp_SL;
;;;912    
;;;913    	temp_SL=(signed long)adc_buff_[3];
;;;914    	temp_SL*=KunetB;
;;;915    	temp_SL/=6000L;
;;;916    	net_Ub=(signed short)temp_SL;
;;;917    
;;;918    	temp_SL=(signed long)adc_buff_[10];
;;;919    	temp_SL*=KunetC;
;;;920    	temp_SL/=6000L;
;;;921    	net_Uc=(signed short)temp_SL;
;;;922    
;;;923    	net_U=net_Ua;
;;;924    	if(net_Ub<net_U)net_U=net_Ub;
;;;925    	if(net_Uc<net_U)net_U=net_Uc;
;;;926    	}
;;;927    else
;;;928    	{
;;;929    	temp_SL=(signed long)net_buff_;
;;;930    	temp_SL*=Kunet;
;;;931    	temp_SL/=5000L;
;;;932    	net_U=(signed short)temp_SL;
;;;933    	}
;;;934    #endif
;;;935    
;;;936    
;;;937    #ifdef UKU_220
;;;938    // 
;;;939    
;;;940    if(AUSW_MAIN==22035)
;;;941    	{
;;;942    	temp_SL=(signed long)net_buff_;
;;;943    	temp_SL*=KunetA;
;;;944    	temp_SL/=6000L;
;;;945    	net_Ua=(signed short)temp_SL;
;;;946    
;;;947    	temp_SL=(signed long)adc_buff_[3];
;;;948    	temp_SL*=KunetB;
;;;949    	temp_SL/=6000L;
;;;950    	net_Ub=(signed short)temp_SL;
;;;951    
;;;952    	temp_SL=(signed long)adc_buff_[10];
;;;953    	temp_SL*=KunetC;
;;;954    	temp_SL/=6000L;
;;;955    	net_Uc=(signed short)temp_SL;
;;;956    
;;;957    	net_U=net_Ua;
;;;958    	if(net_Ub<net_U)net_U=net_Ub;
;;;959    	if(net_Uc<net_U)net_U=net_Uc;
;;;960    	}
;;;961    else
;;;962    	{
;;;963    	temp_SL=(signed long)net_buff_;
;;;964    	temp_SL*=Kunet;
;;;965    	#ifdef _ACDC_
;;;966    	temp_SL/=500L;
;;;967    	#else
;;;968    	temp_SL/=5000L;
;;;969    	#endif
;;;970    	net_U=(signed short)temp_SL;
;;;971    	
;;;972    	}
;;;973    #endif
;;;974    
;;;975    #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;976    // 
;;;977    
;;;978    
;;;979    	if(bps[11]._device==dNET_METR)
000c24  485b              LDR      r0,|L1.3476|
;;;980    		{
;;;981    		net_metr_buff_[0]=((signed short)bps[11]._buff[0])+(((signed short)bps[11]._buff[1])<<8);
;;;982    		net_metr_buff_[1]=((signed short)bps[11]._buff[2])+(((signed short)bps[11]._buff[3])<<8);
;;;983    		net_metr_buff_[2]=((signed short)bps[11]._buff[4])+(((signed short)bps[11]._buff[5])<<8);
;;;984    
;;;985    		temp_SL=(signed long)net_metr_buff_[2];
;;;986    		temp_SL*=KunetA;
;;;987    		temp_SL/=6000L;
;;;988    		net_Ua=(signed short)temp_SL;
;;;989    	
;;;990    		temp_SL=(signed long)net_metr_buff_[1];
;;;991    		temp_SL*=KunetB;
000c26  495e              LDR      r1,|L1.3488|
000c28  4a5b              LDR      r2,|L1.3480|
000c2a  f89003f4          LDRB     r0,[r0,#0x3f4]        ;979  ; bps
;;;992    		temp_SL/=6000L;
;;;993    		net_Ub=(signed short)temp_SL;
;;;994    	
;;;995    		temp_SL=(signed long)net_metr_buff_[0];
;;;996    		temp_SL*=KunetC;
000c2e  4b5d              LDR      r3,|L1.3492|
000c30  9002              STR      r0,[sp,#8]            ;986
000c32  f9b1b000          LDRSH    r11,[r1,#0]           ;991
000c36  f8dfc164          LDR      r12,|L1.3484|
000c3a  f9b2a000          LDRSH    r10,[r2,#0]           ;986
000c3e  f9b31000          LDRSH    r1,[r3,#0]
000c42  4d59              LDR      r5,|L1.3496|
;;;997    		temp_SL/=6000L;
;;;998    		net_Uc=(signed short)temp_SL;
000c44  4c59              LDR      r4,|L1.3500|
;;;999    
;;;1000   		net_F3=((signed short)bps[11]._buff[6])+(((signed short)bps[11]._buff[7])<<8);
;;;1001   
;;;1002   		net_U=net_Ua;
;;;1003   		if(net_Ub<net_U)net_U=net_Ub;
;;;1004   		if(net_Uc<net_U)net_U=net_Uc;
;;;1005   		}
;;;1006   	  else if(AUSW_MAIN==22033)
;;;1007   	{
;;;1008   	temp_SL=(signed long)net_buff_;
000c46  4f47              LDR      r7,|L1.3428|
000c48  f2456611          MOV      r6,#0x5611            ;1006
;;;1009   	temp_SL*=KunetA;
;;;1010   	temp_SL/=4000L;
;;;1011   	net_Ua=(signed short)temp_SL;
;;;1012   
;;;1013   	temp_SL=(signed long)adc_buff_[3];
;;;1014   	temp_SL*=KunetB;
;;;1015   	temp_SL/=6000L;
;;;1016   	net_Ub=(signed short)temp_SL;
;;;1017   
;;;1018   	temp_SL=(signed long)adc_buff_[10];
;;;1019   	temp_SL*=KunetC;
;;;1020   	temp_SL/=6000L;
;;;1021   	net_Uc=(signed short)temp_SL;
;;;1022   
;;;1023   	net_U=net_Ua;
;;;1024   	if(net_Ub<net_U)net_U=net_Ub;
;;;1025   	if(net_Uc<net_U)net_U=net_Uc;
;;;1026   	}
;;;1027   else if((AUSW_MAIN==22063)||(AUSW_MAIN==22023)||(AUSW_MAIN==22043)||(AUSW_MAIN==22018))
;;;1028   	{
;;;1029   	temp_SL=(signed long)net_buff_;
;;;1030   	temp_SL*=KunetA;
;;;1031   	temp_SL/=40000L;
;;;1032   	net_Ua=(signed short)temp_SL;
;;;1033   
;;;1034   	temp_SL=(signed long)adc_buff_[3];
;;;1035   	temp_SL*=KunetB;
;;;1036   	temp_SL/=6000L;
;;;1037   	net_Ub=(signed short)temp_SL;
;;;1038   
;;;1039   	temp_SL=(signed long)adc_buff_[10];
;;;1040   	temp_SL*=KunetC;
;;;1041   	temp_SL/=6000L;
;;;1042   	net_Uc=(signed short)temp_SL;
;;;1043   
;;;1044   	net_U=net_Ua;
;;;1045   	if(net_Ub<net_U)net_U=net_Ub;
;;;1046   	if(net_Uc<net_U)net_U=net_Uc;
;;;1047   	}
;;;1048   else	if((AUSW_MAIN==22010)||(AUSW_MAIN==22011) )
;;;1049   	{
;;;1050   	temp_SL=(signed long)net_buff_;
;;;1051   	temp_SL*=Kunet;
;;;1052   	temp_SL/=35000L;
;;;1053   	net_U=(signed short)temp_SL;
;;;1054   	
;;;1055   	}
;;;1056   else
;;;1057   	{
;;;1058   	temp_SL=(signed long)net_buff_;
;;;1059   	temp_SL*=Kunet;
;;;1060   	#ifdef _ACDC_
;;;1061   	temp_SL/=500L;
000c4c  f44f78fa          MOV      r8,#0x1f4
000c50  9101              STR      r1,[sp,#4]            ;979
000c52  2807              CMP      r0,#7                 ;979
000c54  d036              BEQ      |L1.3268|
000c56  4639              MOV      r1,r7                 ;1008
000c58  4b56              LDR      r3,|L1.3508|
000c5a  8d0a              LDRH     r2,[r1,#0x28]         ;1008
000c5c  494e              LDR      r1,|L1.3480|
000c5e  f8df9140          LDR      r9,|L1.3488|
000c62  f2417a70          MOV      r10,#0x1770           ;987
000c66  f9b11000          LDRSH    r1,[r1,#0]            ;986
000c6a  f9b99000          LDRSH    r9,[r9,#0]            ;991
000c6e  434a              MULS     r2,r1,r2              ;1009
000c70  f9b31006          LDRSH    r1,[r3,#6]            ;1013
000c74  f9b33014          LDRSH    r3,[r3,#0x14]         ;1018
000c78  fb01f109          MUL      r1,r1,r9              ;1014
000c7c  f8df9124          LDR      r9,|L1.3492|
000c80  fb91f1fa          SDIV     r1,r1,r10             ;1015
000c84  f9b99000          LDRSH    r9,[r9,#0]            ;996
000c88  4849              LDR      r0,|L1.3504|
000c8a  fb03f309          MUL      r3,r3,r9              ;1019
000c8e  fb93f3fa          SDIV     r3,r3,r10             ;1020
000c92  8800              LDRH     r0,[r0,#0]            ;1006  ; AUSW_MAIN
000c94  b209              SXTH     r1,r1                 ;1016
000c96  b21b              SXTH     r3,r3                 ;1021
000c98  42b0              CMP      r0,r6                 ;1006
000c9a  d155              BNE      |L1.3400|
000c9c  f44f607a          MOV      r0,#0xfa0             ;1010
000ca0  fb92f0f0          SDIV     r0,r2,r0              ;1010
000ca4  b200              SXTH     r0,r0                 ;1011
000ca6  f8ac0000          STRH     r0,[r12,#0]           ;1011
000caa  8029              STRH     r1,[r5,#0]            ;1016
000cac  8023              STRH     r3,[r4,#0]            ;1021
000cae  4a34              LDR      r2,|L1.3456|
000cb0  8010              STRH     r0,[r2,#0]            ;1023
000cb2  4281              CMP      r1,r0                 ;1024
000cb4  da00              BGE      |L1.3256|
000cb6  8011              STRH     r1,[r2,#0]            ;1024
                  |L1.3256|
000cb8  f9b20000          LDRSH    r0,[r2,#0]            ;1025  ; net_U
000cbc  4283              CMP      r3,r0                 ;1025
000cbe  da00              BGE      |L1.3266|
000cc0  8013              STRH     r3,[r2,#0]            ;1025
                  |L1.3266|
000cc2  e0b6              B        |L1.3634|
                  |L1.3268|
000cc4  483c              LDR      r0,|L1.3512|
000cc6  4b27              LDR      r3,|L1.3428|
000cc8  7801              LDRB     r1,[r0,#0]            ;981  ; bps
000cca  7842              LDRB     r2,[r0,#1]            ;981  ; bps
000ccc  f1030394          ADD      r3,r3,#0x94           ;981
000cd0  eb012102          ADD      r1,r1,r2,LSL #8       ;981
000cd4  fa1ff981          UXTH     r9,r1                 ;981
000cd8  f8a39000          STRH     r9,[r3,#0]            ;981
000cdc  7881              LDRB     r1,[r0,#2]            ;982  ; bps
000cde  78c2              LDRB     r2,[r0,#3]            ;982  ; bps
000ce0  eb012102          ADD      r1,r1,r2,LSL #8       ;982
000ce4  b28a              UXTH     r2,r1                 ;982
000ce6  805a              STRH     r2,[r3,#2]            ;982
000ce8  7901              LDRB     r1,[r0,#4]            ;983  ; bps
000cea  f890e005          LDRB     lr,[r0,#5]            ;983  ; bps
000cee  eb01210e          ADD      r1,r1,lr,LSL #8       ;983
000cf2  b289              UXTH     r1,r1                 ;983
000cf4  8099              STRH     r1,[r3,#4]            ;983
000cf6  fb01f10a          MUL      r1,r1,r10             ;986
000cfa  f2417370          MOV      r3,#0x1770            ;987
000cfe  fb91f1f3          SDIV     r1,r1,r3              ;987
000d02  fa0ffa81          SXTH     r10,r1                ;988
000d06  f8aca000          STRH     r10,[r12,#0]          ;988
000d0a  fb02f20b          MUL      r2,r2,r11             ;991
000d0e  fb92f1f3          SDIV     r1,r2,r3              ;992
000d12  b209              SXTH     r1,r1                 ;993
000d14  8029              STRH     r1,[r5,#0]            ;993
000d16  9a01              LDR      r2,[sp,#4]            ;996
000d18  fb09f902          MUL      r9,r9,r2              ;996
000d1c  fb99f2f3          SDIV     r2,r9,r3              ;997
000d20  b212              SXTH     r2,r2                 ;998
000d22  8022              STRH     r2,[r4,#0]            ;998
000d24  7983              LDRB     r3,[r0,#6]            ;1000  ; bps
000d26  79c0              LDRB     r0,[r0,#7]            ;1000  ; bps
000d28  eb032000          ADD      r0,r3,r0,LSL #8       ;1000
000d2c  4b23              LDR      r3,|L1.3516|
000d2e  8018              STRH     r0,[r3,#0]            ;1000
000d30  4813              LDR      r0,|L1.3456|
000d32  f8a0a000          STRH     r10,[r0,#0]           ;1002
000d36  4551              CMP      r1,r10                ;1003
000d38  da00              BGE      |L1.3388|
000d3a  8001              STRH     r1,[r0,#0]            ;1003
                  |L1.3388|
000d3c  f9b01000          LDRSH    r1,[r0,#0]            ;1004  ; net_U
000d40  428a              CMP      r2,r1                 ;1004
000d42  da76              BGE      |L1.3634|
000d44  8002              STRH     r2,[r0,#0]            ;1004
000d46  e074              B        |L1.3634|
                  |L1.3400|
000d48  e03a              B        |L1.3520|
000d4a  0000              DCW      0x0000
                  |L1.3404|
                          DCD      KB_ALGORITM
                  |L1.3408|
                          DCD      mess_data
                  |L1.3412|
                          DCD      USIGN
                  |L1.3416|
                          DCD      load_U
                  |L1.3420|
                          DCD      load_I
                  |L1.3424|
                          DCD      bat_ips
                  |L1.3428|
                          DCD      ||area_number.21||
                  |L1.3432|
                          DCD      Kibat0
                  |L1.3436|
                          DCD      ad7705_buff_
                  |L1.3440|
                          DCD      bat
                  |L1.3444|
                          DCD      IZMAX
                  |L1.3448|
                          DCD      ADR_KI0BAT
                  |L1.3452|
                          DCD      bat_u_old_cnt
                  |L1.3456|
                          DCD      net_U
                  |L1.3460|
                          DCD      UMN
                  |L1.3464|
                          DCD      unet_drv_cnt
                  |L1.3468|
                          DCD      net_Ustore
                  |L1.3472|
                          DCD      main_1Hz_cnt
                  |L1.3476|
                          DCD      bps
                  |L1.3480|
                          DCD      KunetA
                  |L1.3484|
                          DCD      net_Ua
                  |L1.3488|
                          DCD      KunetB
                  |L1.3492|
                          DCD      KunetC
                  |L1.3496|
                          DCD      net_Ub
                  |L1.3500|
                          DCD      net_Uc
                  |L1.3504|
                          DCD      AUSW_MAIN
                  |L1.3508|
                          DCD      ||.bss||+0x400
                  |L1.3512|
                          DCD      bps+0x3fa
                  |L1.3516|
                          DCD      net_F3
                  |L1.3520|
000dc0  f5a049ac          SUB      r9,r0,#0x5600         ;1027
000dc4  f1b9092f          SUBS     r9,r9,#0x2f           ;1027
000dc8  d008              BEQ      |L1.3548|
000dca  f1190928          ADDS     r9,r9,#0x28           ;1027
000dce  d005              BEQ      |L1.3548|
000dd0  f1b90914          SUBS     r9,r9,#0x14           ;1027
000dd4  d002              BEQ      |L1.3548|
000dd6  f1190919          ADDS     r9,r9,#0x19           ;1027
000dda  d113              BNE      |L1.3588|
                  |L1.3548|
000ddc  f6494040          MOV      r0,#0x9c40            ;1031
000de0  fb92f0f0          SDIV     r0,r2,r0              ;1031
000de4  b200              SXTH     r0,r0                 ;1032
000de6  f8ac0000          STRH     r0,[r12,#0]           ;1032
000dea  8029              STRH     r1,[r5,#0]            ;1037
000dec  8023              STRH     r3,[r4,#0]            ;1042
000dee  4af9              LDR      r2,|L1.4564|
000df0  8010              STRH     r0,[r2,#0]            ;1044
000df2  4281              CMP      r1,r0                 ;1045
000df4  da00              BGE      |L1.3576|
000df6  8011              STRH     r1,[r2,#0]            ;1045
                  |L1.3576|
000df8  f9b20000          LDRSH    r0,[r2,#0]            ;1046  ; net_U
000dfc  4283              CMP      r3,r0                 ;1046
000dfe  da18              BGE      |L1.3634|
000e00  8013              STRH     r3,[r2,#0]            ;1046
000e02  e016              B        |L1.3634|
                  |L1.3588|
000e04  49f4              LDR      r1,|L1.4568|
000e06  f5a043aa          SUB      r3,r0,#0x5500         ;1048
000e0a  f9b12000          LDRSH    r2,[r1,#0]            ;1051
000e0e  49f3              LDR      r1,|L1.4572|
000e10  8d09              LDRH     r1,[r1,#0x28]         ;1008
000e12  4351              MULS     r1,r2,r1              ;1051
000e14  3bfa              SUBS     r3,r3,#0xfa           ;1048
000e16  d001              BEQ      |L1.3612|
000e18  1e5a              SUBS     r2,r3,#1              ;1048
000e1a  d106              BNE      |L1.3626|
                  |L1.3612|
000e1c  f64800b8          MOV      r0,#0x88b8            ;1052
000e20  fb91f0f0          SDIV     r0,r1,r0              ;1052
000e24  49eb              LDR      r1,|L1.4564|
000e26  8008              STRH     r0,[r1,#0]            ;1053
000e28  e003              B        |L1.3634|
                  |L1.3626|
000e2a  fb91f0f8          SDIV     r0,r1,r8
;;;1062   	#else
;;;1063   	temp_SL/=5000L;
;;;1064   	#endif
;;;1065   	net_U=(signed short)temp_SL;
000e2e  49e9              LDR      r1,|L1.4564|
000e30  8008              STRH     r0,[r1,#0]
                  |L1.3634|
;;;1066   	
;;;1067   	}
;;;1068   if(bps[11]._device!=dNET_METR) net_F3=net_F;
000e32  9802              LDR      r0,[sp,#8]
000e34  2807              CMP      r0,#7
000e36  d003              BEQ      |L1.3648|
000e38  48e9              LDR      r0,|L1.4576|
000e3a  8801              LDRH     r1,[r0,#0]  ; net_F
000e3c  48e9              LDR      r0,|L1.4580|
000e3e  8001              STRH     r1,[r0,#0]
                  |L1.3648|
;;;1069   #endif
;;;1070   
;;;1071   #ifdef UKU_TELECORE2015
;;;1072   // 
;;;1073   temp_SL=(signed long)net_buff_;
;;;1074   temp_SL*=Kunet;
;;;1075   temp_SL/=110000L;
;;;1076   net_U=(signed short)temp_SL;
;;;1077   #endif
;;;1078   
;;;1079   // 
;;;1080   temp_SL=(signed long)adc_buff_[0];
000e40  f8dfa3a4          LDR      r10,|L1.4584|
000e44  f9ba1000          LDRSH    r1,[r10,#0]  ; adc_buff_
;;;1081   temp_SL*=Kubat[0];
000e48  4be8              LDR      r3,|L1.4588|
000e4a  f9b30000          LDRSH    r0,[r3,#0]  ; Kubat
000e4e  4348              MULS     r0,r1,r0
;;;1082   temp_SL/=2000L;
000e50  f44f65fa          MOV      r5,#0x7d0
000e54  fb90f0f5          SDIV     r0,r0,r5
;;;1083   bat[0]._Ub=(signed short)temp_SL;
000e58  4ce5              LDR      r4,|L1.4592|
000e5a  8060              STRH     r0,[r4,#2]
;;;1084   
;;;1085   #ifdef UKU_220
;;;1086   // 
;;;1087   temp_SL=(signed long)adc_buff_[0];
;;;1088   temp_SL*=Kubat[0];
;;;1089   temp_SL/=400L;
;;;1090   bat[0]._Ub=(signed short)temp_SL;
;;;1091   #endif
;;;1092   
;;;1093   #ifdef UKU_220_V2
;;;1094   // 
;;;1095   temp_SL=(signed long)adc_buff_[0];
;;;1096   temp_SL*=Kubat[0];
;;;1097   temp_SL/=400L;
;;;1098   bat[0]._Ub=(signed short)temp_SL;
;;;1099   #endif
;;;1100   
;;;1101   temp_SL=(signed long)adc_buff_[4];
000e5c  f9ba2008          LDRSH    r2,[r10,#8]  ; adc_buff_
;;;1102   temp_SL*=Kubatm[0];
000e60  49e4              LDR      r1,|L1.4596|
000e62  f9b10000          LDRSH    r0,[r1,#0]  ; Kubatm
000e66  fb00f002          MUL      r0,r0,r2
;;;1103   temp_SL/=700L;
000e6a  f44f722f          MOV      r2,#0x2bc
000e6e  fb90f0f2          SDIV     r0,r0,r2
;;;1104   bat[0]._Ubm=(signed short)temp_SL;
000e72  80a0              STRH     r0,[r4,#4]
;;;1105   
;;;1106   #ifdef UKU_KONTUR
;;;1107   temp_SL=(signed long)adc_buff_[4];
;;;1108   temp_SL*=Kubatm[0];
;;;1109   temp_SL/=2000L;
;;;1110   bat[0]._Ubm=(signed short)temp_SL;
;;;1111   #endif
;;;1112   
;;;1113   temp_SL=(signed long)adc_buff_[12];
000e74  f9bac018          LDRSH    r12,[r10,#0x18]  ; adc_buff_
;;;1114   temp_SL*=Kubat[1];
000e78  f9b30002          LDRSH    r0,[r3,#2]  ; Kubat
000e7c  fb00f00c          MUL      r0,r0,r12
;;;1115   temp_SL/=2000L;
000e80  fb90f0f5          SDIV     r0,r0,r5
;;;1116   bat[1]._Ub=(signed short)temp_SL;
000e84  f8a4004e          STRH     r0,[r4,#0x4e]
;;;1117   
;;;1118   #ifdef UKU_220
;;;1119   temp_SL=(signed long)adc_buff_[12];
;;;1120   temp_SL*=Kubat[1];
;;;1121   temp_SL/=400L;
;;;1122   bat[1]._Ub=(signed short)temp_SL;
;;;1123   #endif
;;;1124   
;;;1125   #ifdef UKU_220_V2
;;;1126   temp_SL=(signed long)adc_buff_[12];
;;;1127   temp_SL*=Kubat[1];
;;;1128   temp_SL/=400L;
;;;1129   bat[1]._Ub=(signed short)temp_SL;
;;;1130   #endif
;;;1131   
;;;1132   temp_SL=(signed long)adc_buff_[1];
000e88  f9ba3002          LDRSH    r3,[r10,#2]  ; adc_buff_
;;;1133   temp_SL*=Kubatm[1];
000e8c  f9b10002          LDRSH    r0,[r1,#2]  ; Kubatm
000e90  fb00f003          MUL      r0,r0,r3
;;;1134   temp_SL/=700L;
000e94  fb90f0f2          SDIV     r0,r0,r2
;;;1135   bat[1]._Ubm=(signed short)temp_SL;
000e98  f8a40050          STRH     r0,[r4,#0x50]
;;;1136   #ifdef UKU_KONTUR
;;;1137   temp_SL=(signed long)adc_buff_[1];
;;;1138   temp_SL*=Kubatm[1];
;;;1139   temp_SL/=2000L;
;;;1140   bat[1]._Ubm=(signed short)temp_SL;
;;;1141   #endif
;;;1142   
;;;1143   #ifdef UKU_TELECORE2015
;;;1144   temp_SL=(signed long)adc_buff_[2];
;;;1145   temp_SL*=Kubat[0];
;;;1146   temp_SL/=2000L;
;;;1147   bat[0]._Ub=(signed short)temp_SL;
;;;1148   #endif
;;;1149   
;;;1150   /*
;;;1151   // 
;;;1152   if(!mess_find_unvol(MESS2MATEMAT))
;;;1153   	{
;;;1154   	temp_SL=(signed long)ad7705_buff_[0];
;;;1155   	temp_SL-=(signed long)Kibat0[0];
;;;1156   	temp_SL*=(signed long)Kibat1[0];
;;;1157   	if((AUSW_MAIN==24120)||(AUSW_MAIN==24210))temp_SL/=300L;
;;;1158   	else temp_SL/=1000L;
;;;1159   	bat[0]._Ib=(signed short)temp_SL;
;;;1160   
;;;1161   	temp_SL=(signed long)ad7705_buff_[1];
;;;1162   	temp_SL-=(signed long)Kibat0[1];
;;;1163   	temp_SL*=(signed long)Kibat1[1];
;;;1164   	if((AUSW_MAIN==24120)||(AUSW_MAIN==24210))temp_SL/=300L;
;;;1165   	else temp_SL/=1000L;
;;;1166   	bat[1]._Ib=(signed short)temp_SL;
;;;1167   	}
;;;1168   */
;;;1169   
;;;1170   
;;;1171   // 
;;;1172   if(!mess_find_unvol(MESS2MATEMAT))
000e9c  f04f00dc          MOV      r0,#0xdc
000ea0  f7fffffe          BL       mess_find_unvol
;;;1173   	{
;;;1174   	temp_SL=(signed long)ad7705_buff_[0];
;;;1175   	temp_SL-=(signed long)Kibat0[0];
;;;1176   	temp_SL*=(signed long)Kibat1[0];
;;;1177   	if((AUSW_MAIN==24120)||(AUSW_MAIN==24210))temp_SL/=300L;
;;;1178   	else if((AUSW_MAIN==22010)||(AUSW_MAIN==22035)||(AUSW_MAIN==22033))temp_SL/=2000L;
000ea4  f2456913          MOV      r9,#0x5613
000ea8  bbf0              CBNZ     r0,|L1.3880|
000eaa  f8dfc34c          LDR      r12,|L1.4600|
000eae  f8bc0000          LDRH     r0,[r12,#0]           ;1174  ; ad7705_buff_
000eb2  f8dfb348          LDR      r11,|L1.4604|
000eb6  f8bb1000          LDRH     r1,[r11,#0]           ;1175  ; Kibat0
000eba  eba00001          SUB      r0,r0,r1              ;1175
000ebe  4ad0              LDR      r2,|L1.4608|
000ec0  f9b21000          LDRSH    r1,[r2,#0]            ;1176  ; Kibat1
000ec4  fb01f100          MUL      r1,r1,r0              ;1176
000ec8  48ce              LDR      r0,|L1.4612|
000eca  f6456338          MOV      r3,#0x5e38            ;1177
000ece  8800              LDRH     r0,[r0,#0]            ;1177  ; AUSW_MAIN
000ed0  4298              CMP      r0,r3                 ;1177
000ed2  d004              BEQ      |L1.3806|
000ed4  f5a04ebc          SUB      lr,r0,#0x5e00         ;1177
000ed8  f1be0e92          SUBS     lr,lr,#0x92           ;1177
000edc  d104              BNE      |L1.3816|
                  |L1.3806|
000ede  f44f7e96          MOV      lr,#0x12c             ;1177
000ee2  fb91f1fe          SDIV     r1,r1,lr              ;1177
000ee6  e00f              B        |L1.3848|
                  |L1.3816|
000ee8  f5a04ea8          SUB      lr,r0,#0x5400
000eec  f5be7efd          SUBS     lr,lr,#0x1fa
000ef0  d003              BEQ      |L1.3834|
000ef2  4548              CMP      r0,r9
000ef4  d001              BEQ      |L1.3834|
000ef6  42b0              CMP      r0,r6
000ef8  d102              BNE      |L1.3840|
                  |L1.3834|
000efa  fb91f1f5          SDIV     r1,r1,r5
000efe  e003              B        |L1.3848|
                  |L1.3840|
;;;1179   	else temp_SL/=1000L;
000f00  f44f7e7a          MOV      lr,#0x3e8
000f04  fb91f1fe          SDIV     r1,r1,lr
                  |L1.3848|
;;;1180   	#ifdef UKU_TELECORE2015
;;;1181   	temp_SL/=2L;
;;;1182   	//temp_SL=-temp_SL;
;;;1183   	#endif
;;;1184   	bat[0]._Ib=(signed short)temp_SL;
000f08  8121              STRH     r1,[r4,#8]
;;;1185   
;;;1186   	temp_SL=(signed long)ad7705_buff_[1];
000f0a  f8bc1002          LDRH     r1,[r12,#2]  ; ad7705_buff_
;;;1187   	temp_SL-=(signed long)Kibat0[1];
000f0e  f8bbc002          LDRH     r12,[r11,#2]  ; Kibat0
000f12  eba10c0c          SUB      r12,r1,r12
;;;1188   	temp_SL*=(signed long)Kibat1[1];
000f16  f9b21002          LDRSH    r1,[r2,#2]  ; Kibat1
000f1a  fb01f10c          MUL      r1,r1,r12
;;;1189   	if((AUSW_MAIN==24120)||(AUSW_MAIN==24210))temp_SL/=300L;
000f1e  4298              CMP      r0,r3
000f20  d005              BEQ      |L1.3886|
000f22  f5a042bc          SUB      r2,r0,#0x5e00
000f26  e000              B        |L1.3882|
                  |L1.3880|
000f28  e017              B        |L1.3930|
                  |L1.3882|
000f2a  3a92              SUBS     r2,r2,#0x92
000f2c  d104              BNE      |L1.3896|
                  |L1.3886|
000f2e  f44f7096          MOV      r0,#0x12c
000f32  fb91f0f0          SDIV     r0,r1,r0
000f36  e00e              B        |L1.3926|
                  |L1.3896|
;;;1190   	else if((AUSW_MAIN==22010)||(AUSW_MAIN==22035)||(AUSW_MAIN==22033))temp_SL/=2000L;
000f38  f5a042aa          SUB      r2,r0,#0x5500
000f3c  3afa              SUBS     r2,r2,#0xfa
000f3e  d003              BEQ      |L1.3912|
000f40  4548              CMP      r0,r9
000f42  d001              BEQ      |L1.3912|
000f44  42b0              CMP      r0,r6
000f46  d102              BNE      |L1.3918|
                  |L1.3912|
000f48  fb91f0f5          SDIV     r0,r1,r5
000f4c  e003              B        |L1.3926|
                  |L1.3918|
;;;1191   	else temp_SL/=1000L;
000f4e  f44f707a          MOV      r0,#0x3e8
000f52  fb91f0f0          SDIV     r0,r1,r0
                  |L1.3926|
;;;1192   	bat[1]._Ib=(signed short)temp_SL;
000f56  f8a40054          STRH     r0,[r4,#0x54]
                  |L1.3930|
;;;1193   	}
;;;1194   
;;;1195   
;;;1196   
;;;1197   
;;;1198   
;;;1199   // 
;;;1200   
;;;1201   #ifdef UKU_KONTUR
;;;1202   if((adc_buff_[6]>800)&&(adc_buff_[6]<3800))bat[0]._nd=0;
;;;1203   else bat[0]._nd=1;
;;;1204   temp_SL=(signed long)adc_buff_[6];
;;;1205   temp_SL*=Ktbat[0];
;;;1206   temp_SL/=20000L;
;;;1207   temp_SL-=273L;
;;;1208   bat[0]._Tb=(signed short)temp_SL;
;;;1209   #else
;;;1210   if((adc_buff_[6]>800)&&(adc_buff_[6]<3800))bat[0]._nd=0;
000f5a  f9ba000c          LDRSH    r0,[r10,#0xc]  ; adc_buff_
000f5e  46d6              MOV      lr,r10
000f60  4684              MOV      r12,r0
000f62  f2a03021          SUB      r0,r0,#0x321
000f66  f64031b7          MOV      r1,#0xbb7
000f6a  2300              MOVS     r3,#0
;;;1211   else bat[0]._nd=1;
000f6c  f04f0a01          MOV      r10,#1
000f70  9000              STR      r0,[sp,#0]            ;1210
000f72  4288              CMP      r0,r1                 ;1210
000f74  d201              BCS      |L1.3962|
000f76  7323              STRB     r3,[r4,#0xc]          ;1210
000f78  e001              B        |L1.3966|
                  |L1.3962|
000f7a  f884a00c          STRB     r10,[r4,#0xc]
                  |L1.3966|
;;;1212   temp_SL=(signed long)adc_buff_[6];
;;;1213   temp_SL*=Ktbat[0];
000f7e  48a2              LDR      r0,|L1.4616|
000f80  f9b02000          LDRSH    r2,[r0,#0]  ; Ktbat
000f84  fb02f20c          MUL      r2,r2,r12
;;;1214   temp_SL/=20000L;
000f88  f6446020          MOV      r0,#0x4e20
000f8c  fb92f2f0          SDIV     r2,r2,r0
;;;1215   temp_SL-=273L;
000f90  f2a21211          SUB      r2,r2,#0x111
;;;1216   bat[0]._Tb=(signed short)temp_SL;
000f94  8162              STRH     r2,[r4,#0xa]
;;;1217   #endif
;;;1218   
;;;1219   #ifdef UKU_KONTUR
;;;1220   if((adc_buff_[7]>800)&&(adc_buff_[7]<3800))bat[1]._nd=0;
;;;1221   else bat[1]._nd=1;
;;;1222   temp_SL=(signed long)adc_buff_[7];
;;;1223   temp_SL*=Ktbat[1];
;;;1224   temp_SL/=20000L;
;;;1225   temp_SL-=273L;
;;;1226   bat[1]._Tb=(signed short)temp_SL;
;;;1227   #else
;;;1228   if((adc_buff_[7]>800)&&(adc_buff_[7]<3800))bat[1]._nd=0;
000f96  f9be200e          LDRSH    r2,[lr,#0xe]  ; adc_buff_
000f9a  f64031b7          MOV      r1,#0xbb7
000f9e  f2a23b21          SUB      r11,r2,#0x321
000fa2  458b              CMP      r11,r1
000fa4  d202              BCS      |L1.4012|
000fa6  f8843058          STRB     r3,[r4,#0x58]
000faa  e001              B        |L1.4016|
                  |L1.4012|
;;;1229   else bat[1]._nd=1;
000fac  f884a058          STRB     r10,[r4,#0x58]
                  |L1.4016|
;;;1230   temp_SL=(signed long)adc_buff_[7];
;;;1231   temp_SL*=Ktbat[1];
000fb0  4995              LDR      r1,|L1.4616|
000fb2  f9b11002          LDRSH    r1,[r1,#2]  ; Ktbat
000fb6  4351              MULS     r1,r2,r1
;;;1232   temp_SL/=20000L;
000fb8  f6446020          MOV      r0,#0x4e20
000fbc  fb91f0f0          SDIV     r0,r1,r0
;;;1233   temp_SL-=273L;
000fc0  f2a01011          SUB      r0,r0,#0x111
;;;1234   bat[1]._Tb=(signed short)temp_SL;
000fc4  498a              LDR      r1,|L1.4592|
000fc6  f8a10056          STRH     r0,[r1,#0x56]
;;;1235   #endif
;;;1236   
;;;1237   #ifdef UKU_6U
;;;1238   
;;;1239   if(NUMMAKB==2)
;;;1240   	{
;;;1241   	if(makb[0]._cnt<5)
;;;1242   		{
;;;1243   		if(makb[0]._T_nd[0]==0)
;;;1244   			{
;;;1245   			bat[0]._Tb=makb[0]._T[0];
;;;1246   			bat[0]._nd=0;
;;;1247   			}
;;;1248   		}
;;;1249   
;;;1250   	if(makb[1]._cnt<5)
;;;1251   		{
;;;1252   		if(makb[1]._T_nd[0]==0)
;;;1253   			{
;;;1254   			bat[1]._Tb=makb[1]._T[0];
;;;1255   			bat[1]._nd=0;
;;;1256   			}
;;;1257   		}
;;;1258   
;;;1259   	}
;;;1260   else if(NUMMAKB==4)
;;;1261   	{
;;;1262   	signed short temp_t;
;;;1263   	temp_t=-20;
;;;1264   	if(makb[0]._cnt<5)
;;;1265   		{
;;;1266   		if(makb[0]._T_nd[0]==0)
;;;1267   			{
;;;1268   			temp_t=makb[0]._T[0];
;;;1269   			bat[0]._nd=0;
;;;1270   			}
;;;1271   		}
;;;1272   	if(makb[1]._cnt<5)
;;;1273   		{
;;;1274   		if(makb[1]._T_nd[0]==0)
;;;1275   			{
;;;1276   			if(temp_t<makb[1]._T[0])
;;;1277   				{
;;;1278   				bat[0]._nd=0;
;;;1279   				temp_t=makb[1]._T[0];
;;;1280   				}
;;;1281   			}
;;;1282   		}
;;;1283   	if(temp_t!=-20)bat[0]._Tb = temp_t;
;;;1284   
;;;1285    	temp_t=-20;
;;;1286   	if(makb[2]._cnt<5)
;;;1287   		{
;;;1288   		if(makb[2]._T_nd[0]==0)
;;;1289   			{
;;;1290   			temp_t=makb[2]._T[0];
;;;1291   			bat[1]._nd=0;
;;;1292   			}
;;;1293   		}
;;;1294   	if(makb[3]._cnt<5)
;;;1295   		{
;;;1296   		if(makb[3]._T_nd[0]==0)
;;;1297   			{
;;;1298   			if(temp_t<makb[3]._T[0])
;;;1299   				{
;;;1300   				bat[1]._nd=0;
;;;1301   				temp_t=makb[3]._T[0];
;;;1302   				}
;;;1303   			}
;;;1304   		}
;;;1305   	if(temp_t!=-20)bat[1]._Tb = temp_t;
;;;1306   	}
;;;1307   
;;;1308   #endif
;;;1309   
;;;1310   
;;;1311   // 
;;;1312   temp_SL=(signed long)adc_buff_[2];
000fca  f9be1004          LDRSH    r1,[lr,#4]  ; adc_buff_
;;;1313   temp_SL*=Kuload;
000fce  488f              LDR      r0,|L1.4620|
000fd0  f9b00000          LDRSH    r0,[r0,#0]  ; Kuload
000fd4  fb01f000          MUL      r0,r1,r0
;;;1314   temp_SL/=2000L;
000fd8  f44f62fa          MOV      r2,#0x7d0
000fdc  fb90f0f2          SDIV     r0,r0,r2
;;;1315   load_U=(signed short)temp_SL;
000fe0  4c8b              LDR      r4,|L1.4624|
000fe2  8020              STRH     r0,[r4,#0]
;;;1316   
;;;1317   #ifdef UKU_220 
;;;1318   // 
;;;1319   temp_SL=(signed long)adc_buff_[2];
;;;1320   temp_SL*=Kuload;
;;;1321   temp_SL/=350L;
;;;1322   load_U=(signed short)temp_SL;
;;;1323   #endif
;;;1324   
;;;1325   #ifdef UKU_220_V2 
;;;1326   // 
;;;1327   temp_SL=(signed long)adc_buff_[2];
;;;1328   temp_SL*=Kuload;
;;;1329   temp_SL/=350L;
;;;1330   load_U=(signed short)temp_SL;
;;;1331   #endif
;;;1332   
;;;1333   #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;1334   // 
;;;1335   temp_SL=(signed long)adc_buff_[1];
000fe4  f9be2002          LDRSH    r2,[lr,#2]  ; adc_buff_
;;;1336   temp_SL*=Kuout;
000fe8  488a              LDR      r0,|L1.4628|
000fea  f9b00000          LDRSH    r0,[r0,#0]  ; Kuout
000fee  fb02f200          MUL      r2,r2,r0
;;;1337   if(AUSW_MAIN==22010)temp_SL/=400L;
000ff2  4884              LDR      r0,|L1.4612|
000ff4  f24555fa          MOV      r5,#0x55fa
000ff8  8800              LDRH     r0,[r0,#0]  ; AUSW_MAIN
000ffa  42a8              CMP      r0,r5
000ffc  d104              BNE      |L1.4104|
000ffe  f44f75c8          MOV      r5,#0x190
001002  fb92f2f5          SDIV     r2,r2,r5
001006  e001              B        |L1.4108|
                  |L1.4104|
;;;1338   else temp_SL/=500L;
001008  fb92f2f8          SDIV     r2,r2,r8
                  |L1.4108|
;;;1339   out_U=(signed short)temp_SL;
00100c  fa0ffb82          SXTH     r11,r2
001010  4a81              LDR      r2,|L1.4632|
001012  f8a2b000          STRH     r11,[r2,#0]
;;;1340   load_U=out_U;
001016  f8a4b000          STRH     r11,[r4,#0]
;;;1341   
;;;1342   // 
;;;1343   temp_SL=(signed long)adc_buff_[2];
;;;1344   temp_SL*=Kubps;
00101a  4a80              LDR      r2,|L1.4636|
00101c  f9b22000          LDRSH    r2,[r2,#0]  ; Kubps
001020  fb01f102          MUL      r1,r1,r2
;;;1345   if(AUSW_MAIN==22010)temp_SL/=400L;
001024  d104              BNE      |L1.4144|
001026  f44f72c8          MOV      r2,#0x190
00102a  fb91f1f2          SDIV     r1,r1,r2
00102e  e001              B        |L1.4148|
                  |L1.4144|
;;;1346   else temp_SL/=500L;
001030  fb91f1f8          SDIV     r1,r1,r8
                  |L1.4148|
;;;1347   bps_U=(signed short)temp_SL;
001034  4d7a              LDR      r5,|L1.4640|
001036  b209              SXTH     r1,r1
001038  8029              STRH     r1,[r5,#0]
;;;1348   
;;;1349   if(bps_U<100)
00103a  2964              CMP      r1,#0x64
00103c  da18              BGE      |L1.4208|
;;;1350   	{
;;;1351   	char i;
;;;1352   	for(i=0;i<NUMIST;i++)
00103e  f04f0100          MOV      r1,#0
001042  4a78              LDR      r2,|L1.4644|
001044  f8dfe1e0          LDR      lr,|L1.4648|
001048  f9b28000          LDRSH    r8,[r2,#0]
00104c  e00e              B        |L1.4204|
                  |L1.4174|
;;;1353   		{
;;;1354   		if(bps[i]._Uin>bps_U)bps_U=bps[i]._Uin;
00104e  ebc102c1          RSB      r2,r1,r1,LSL #3
001052  eb021201          ADD      r2,r2,r1,LSL #4
001056  eb0e0282          ADD      r2,lr,r2,LSL #2
00105a  f9b54000          LDRSH    r4,[r5,#0]  ; bps_U
00105e  6a12              LDR      r2,[r2,#0x20]
001060  42a2              CMP      r2,r4
001062  dd00              BLE      |L1.4198|
001064  802a              STRH     r2,[r5,#0]
                  |L1.4198|
001066  f1010101          ADD      r1,r1,#1              ;1352
00106a  b2c9              UXTB     r1,r1                 ;1352
                  |L1.4204|
00106c  4541              CMP      r1,r8                 ;1352
00106e  dbee              BLT      |L1.4174|
                  |L1.4208|
;;;1355   		}
;;;1356   	}
;;;1357   
;;;1358   //  
;;;1359   temp_SL=0;
001070  f04f0500          MOV      r5,#0
;;;1360   for (i=0;i<NUMIST;i++)
001074  4629              MOV      r1,r5
001076  4a6b              LDR      r2,|L1.4644|
001078  4c6b              LDR      r4,|L1.4648|
00107a  f9b22000          LDRSH    r2,[r2,#0]            ;1352
00107e  e00b              B        |L1.4248|
                  |L1.4224|
;;;1361   	{
;;;1362   	temp_SL+=((signed long)bps[i]._Ii);
001080  ebc108c1          RSB      r8,r1,r1,LSL #3
001084  eb081801          ADD      r8,r8,r1,LSL #4
001088  eb040888          ADD      r8,r4,r8,LSL #2
00108c  f8d88024          LDR      r8,[r8,#0x24]
001090  4445              ADD      r5,r5,r8
001092  f1010101          ADD      r1,r1,#1              ;1360
001096  b2c9              UXTB     r1,r1                 ;1360
                  |L1.4248|
001098  4291              CMP      r1,r2                 ;1360
00109a  dbf1              BLT      |L1.4224|
;;;1363   	}
;;;1364   bps_I=(signed short)temp_SL;
00109c  4963              LDR      r1,|L1.4652|
00109e  800d              STRH     r5,[r1,#0]
;;;1365   
;;;1366   
;;;1367   #endif
;;;1368   
;;;1369   
;;;1370   #ifdef UKU_KONTUR
;;;1371   //   1(  )
;;;1372   if((adc_buff_[5]>800)&&(adc_buff_[5]<3800))ND_EXT[0]=0;
;;;1373   else ND_EXT[0]=1;
;;;1374   temp_SL=(signed long)adc_buff_[5];
;;;1375   temp_SL*=Ktext[0];
;;;1376   temp_SL/=20000L;
;;;1377   temp_SL-=273L;
;;;1378   t_ext[0]=(signed short)temp_SL;
;;;1379   #else 
;;;1380   //   1(  )
;;;1381   if((adc_buff_[5]>800)&&(adc_buff_[5]<3800))ND_EXT[0]=0;
0010a0  4951              LDR      r1,|L1.4584|
0010a2  f8df818c          LDR      r8,|L1.4656|
0010a6  f9b1500a          LDRSH    r5,[r1,#0xa]  ; adc_buff_
0010aa  f64031b7          MOV      r1,#0xbb7
0010ae  f2a53e21          SUB      lr,r5,#0x321
0010b2  458e              CMP      lr,r1
0010b4  d202              BCS      |L1.4284|
0010b6  f8c83000          STR      r3,[r8,#0]  ; ND_EXT
0010ba  e001              B        |L1.4288|
                  |L1.4284|
;;;1382   else ND_EXT[0]=1;
0010bc  f8c8a000          STR      r10,[r8,#0]  ; ND_EXT
                  |L1.4288|
;;;1383   temp_SL=(signed long)adc_buff_[5];
;;;1384   temp_SL*=Ktext[0];
0010c0  495c              LDR      r1,|L1.4660|
0010c2  f9b11000          LDRSH    r1,[r1,#0]  ; Ktext
0010c6  434d              MULS     r5,r1,r5
;;;1385   temp_SL/=20000L;
0010c8  f6446e20          MOV      lr,#0x4e20
0010cc  fb95f5fe          SDIV     r5,r5,lr
;;;1386   temp_SL-=273L;
0010d0  f2a51511          SUB      r5,r5,#0x111
;;;1387   t_ext[0]=(signed short)temp_SL;
0010d4  f8dfe160          LDR      lr,|L1.4664|
0010d8  f8ae5000          STRH     r5,[lr,#0]
;;;1388   #endif
;;;1389   
;;;1390   #ifdef UKU_220
;;;1391   
;;;1392   //   2(  )
;;;1393   if((adc_buff_[3]>800)&&(adc_buff_[3]<3800))ND_EXT[1]=0;
;;;1394   else ND_EXT[1]=1;
;;;1395   temp_SL=(signed long)adc_buff_[3];
;;;1396   temp_SL*=Ktext[1];
;;;1397   temp_SL/=20000L;
;;;1398   temp_SL-=273L;
;;;1399   t_ext[1]=(signed short)temp_SL;
;;;1400   
;;;1401   //   3(  MSAN)
;;;1402   if((adc_buff_[10]>800)&&(adc_buff_[10]<3800))ND_EXT[2]=0;
;;;1403   else ND_EXT[2]=1;
;;;1404   temp_SL=(signed long)adc_buff_[10];
;;;1405   temp_SL*=Ktext[2];
;;;1406   temp_SL/=20000L;
;;;1407   temp_SL-=273L;
;;;1408   t_ext[2]=(signed short)temp_SL;
;;;1409   
;;;1410   #else
;;;1411   
;;;1412   
;;;1413   #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;1414   
;;;1415   //   
;;;1416   if((adc_buff_[6]>800)&&(adc_buff_[6]<3800))ND_EXT[0]=0;
0010dc  9d00              LDR      r5,[sp,#0]
0010de  f6403eb7          MOV      lr,#0xbb7
0010e2  4575              CMP      r5,lr
0010e4  d202              BCS      |L1.4332|
0010e6  f8c83000          STR      r3,[r8,#0]  ; ND_EXT
0010ea  e001              B        |L1.4336|
                  |L1.4332|
;;;1417   else ND_EXT[0]=1;
0010ec  f8c8a000          STR      r10,[r8,#0]  ; ND_EXT
                  |L1.4336|
;;;1418   temp_SL=(signed long)adc_buff_[6];
;;;1419   temp_SL*=Ktext[0];
0010f0  fb01f10c          MUL      r1,r1,r12
;;;1420   temp_SL/=20000L;
0010f4  f6446520          MOV      r5,#0x4e20
0010f8  fb91f1f5          SDIV     r1,r1,r5
;;;1421   temp_SL-=273L;
0010fc  f2a11111          SUB      r1,r1,#0x111
;;;1422   t_ext[0]=(signed short)temp_SL;
001100  4d4d              LDR      r5,|L1.4664|
001102  8029              STRH     r1,[r5,#0]
;;;1423   
;;;1424   #else
;;;1425   
;;;1426   
;;;1427   
;;;1428   //   2(  )
;;;1429   if((adc_buff_[10]>800)&&(adc_buff_[10]<3800))ND_EXT[1]=0;
;;;1430   else ND_EXT[1]=1;
;;;1431   temp_SL=(signed long)adc_buff_[10];
;;;1432   temp_SL*=Ktext[1];
;;;1433   temp_SL/=20000L;
;;;1434   temp_SL-=273L;
;;;1435   t_ext[1]=(signed short)temp_SL;
;;;1436   
;;;1437   //   3(  MSAN)
;;;1438   if((adc_buff_[3]>800)&&(adc_buff_[3]<3800))ND_EXT[2]=0;
;;;1439   else ND_EXT[2]=1;
;;;1440   temp_SL=(signed long)adc_buff_[3];
;;;1441   temp_SL*=Ktext[2];
;;;1442   temp_SL/=20000L;
;;;1443   temp_SL-=273L;
;;;1444   t_ext[2]=(signed short)temp_SL;
;;;1445   
;;;1446   #endif
;;;1447   #endif
;;;1448   
;;;1449   #ifdef UKU_220_V2
;;;1450   
;;;1451   //   2(  )
;;;1452   if((adc_buff_[3]>800)&&(adc_buff_[3]<3800))ND_EXT[1]=0;
;;;1453   else ND_EXT[1]=1;
;;;1454   temp_SL=(signed long)adc_buff_[3];
;;;1455   temp_SL*=Ktext[1];
;;;1456   temp_SL/=20000L;
;;;1457   temp_SL-=273L;
;;;1458   t_ext[1]=(signed short)temp_SL;
;;;1459   
;;;1460   //   3(  MSAN)
;;;1461   if((adc_buff_[10]>800)&&(adc_buff_[10]<3800))ND_EXT[2]=0;
;;;1462   else ND_EXT[2]=1;
;;;1463   temp_SL=(signed long)adc_buff_[10];
;;;1464   temp_SL*=Ktext[2];
;;;1465   temp_SL/=20000L;
;;;1466   temp_SL-=273L;
;;;1467   t_ext[2]=(signed short)temp_SL;
;;;1468   
;;;1469   #else
;;;1470   
;;;1471   #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;1472   // 
;;;1473   if(bps[8]._device==dIBAT_METR)
001104  f89412e0          LDRB     r1,[r4,#0x2e0]  ; bps
;;;1474   	{
;;;1475   	ibat_metr_buff_[0]=((signed long)bps[8]._buff[0])+(((signed long)bps[8]._buff[1])<<8);
;;;1476   	ibat_metr_buff_[1]=((signed long)bps[8]._buff[2])+(((signed long)bps[8]._buff[3])<<8);
;;;1477   	bIBAT_SMKLBR=((signed short)bps[8]._buff[4])+(((signed short)bps[8]._buff[5])<<8);
;;;1478   
;;;1479   	if(!bIBAT_SMKLBR)
;;;1480   		{
;;;1481   		signed long temp_SL;
;;;1482   		temp_SL=(signed long)ibat_metr_buff_[0];
;;;1483   		temp_SL-=(signed long)ibat_metr_buff_[1];
;;;1484   		temp_SL*=(signed long)Kibat1[0];
;;;1485   		if((AUSW_MAIN==22010)||(AUSW_MAIN==22011)||(AUSW_MAIN==22035)||(AUSW_MAIN==22033)||(AUSW_MAIN==22063)||(AUSW_MAIN==22023)||(AUSW_MAIN==22043))temp_SL/=2000L;
;;;1486   	
;;;1487   		Ib_ips_termokompensat =(signed short)temp_SL;
001108  f8dfc130          LDR      r12,|L1.4668|
00110c  2909              CMP      r1,#9                 ;1473
00110e  d13d              BNE      |L1.4492|
001110  f89412e6          LDRB     r1,[r4,#0x2e6]        ;1475  ; bps
001114  f89452e7          LDRB     r5,[r4,#0x2e7]        ;1475  ; bps
001118  f8dfe124          LDR      lr,|L1.4672|
00111c  eb012105          ADD      r1,r1,r5,LSL #8       ;1475
001120  f8ce1000          STR      r1,[lr,#0]            ;1475  ; ibat_metr_buff_
001124  f89452e8          LDRB     r5,[r4,#0x2e8]        ;1476  ; bps
001128  f894a2e9          LDRB     r10,[r4,#0x2e9]       ;1476  ; bps
00112c  eb05250a          ADD      r5,r5,r10,LSL #8      ;1476
001130  f8ce5004          STR      r5,[lr,#4]            ;1476  ; ibat_metr_buff_
001134  f894a2ea          LDRB     r10,[r4,#0x2ea]       ;1477  ; bps
001138  f894e2eb          LDRB     lr,[r4,#0x2eb]        ;1477  ; bps
00113c  eb0a2a0e          ADD      r10,r10,lr,LSL #8     ;1477
001140  f8dfe100          LDR      lr,|L1.4676|
001144  fa0ffa8a          SXTH     r10,r10               ;1477
001148  f8aea000          STRH     r10,[lr,#0]           ;1477
00114c  f1ba0f00          CMP      r10,#0                ;1479
001150  d11c              BNE      |L1.4492|
001152  eba10505          SUB      r5,r1,r5              ;1483
001156  492a              LDR      r1,|L1.4608|
001158  f9b11000          LDRSH    r1,[r1,#0]            ;1484  ; Kibat1
00115c  fb01f105          MUL      r1,r1,r5              ;1484
001160  f5a045aa          SUB      r5,r0,#0x5500         ;1485
001164  3dfa              SUBS     r5,r5,#0xfa           ;1485
001166  d00b              BEQ      |L1.4480|
001168  1e6d              SUBS     r5,r5,#1              ;1485
00116a  d009              BEQ      |L1.4480|
00116c  4548              CMP      r0,r9                 ;1485
00116e  d007              BEQ      |L1.4480|
001170  42b0              CMP      r0,r6                 ;1485
001172  d005              BEQ      |L1.4480|
001174  3d34              SUBS     r5,r5,#0x34           ;1485
001176  d003              BEQ      |L1.4480|
001178  3528              ADDS     r5,r5,#0x28           ;1485
00117a  d001              BEQ      |L1.4480|
00117c  3d14              SUBS     r5,r5,#0x14           ;1485
00117e  d103              BNE      |L1.4488|
                  |L1.4480|
001180  f44f65fa          MOV      r5,#0x7d0             ;1485
001184  fb91f1f5          SDIV     r1,r1,r5              ;1485
                  |L1.4488|
001188  f8ac1000          STRH     r1,[r12,#0]
                  |L1.4492|
;;;1488   		}
;;;1489   	}
;;;1490   
;;;1491   bat[0]._Ub=load_U;
00118c  4d18              LDR      r5,|L1.4592|
00118e  f8a5b002          STRH     r11,[r5,#2]
;;;1492   if(AUSW_MAIN==22018) Ib_ips_termokompensat=bat[0]._Ib;
001192  f5a041ac          SUB      r1,r0,#0x5600
001196  3902              SUBS     r1,#2
001198  d103              BNE      |L1.4514|
00119a  8928              LDRH     r0,[r5,#8]  ; bat
00119c  f8ac0000          STRH     r0,[r12,#0]
0011a0  e002              B        |L1.4520|
                  |L1.4514|
;;;1493   else bat[0]._Ib=Ib_ips_termokompensat;
0011a2  f8bc0000          LDRH     r0,[r12,#0]  ; Ib_ips_termokompensat
0011a6  8128              STRH     r0,[r5,#8]
                  |L1.4520|
;;;1494   
;;;1495   #endif
;;;1496   #endif
;;;1497   
;;;1498   
;;;1499   #ifdef UKU_TELECORE2015
;;;1500   
;;;1501   //   1
;;;1502   if((adc_buff_[7]>800)&&(adc_buff_[7]<3800))ND_EXT[0]=0;
;;;1503   else ND_EXT[0]=1;
;;;1504   temp_SL=(signed long)adc_buff_[7];
;;;1505   temp_SL*=Ktext[0];
;;;1506   temp_SL/=20000L;
;;;1507   temp_SL-=273L;
;;;1508   t_ext[0]=(signed short)temp_SL;
;;;1509   
;;;1510   
;;;1511   //   2
;;;1512   if((adc_buff_[6]>800)&&(adc_buff_[6]<3800))ND_EXT[1]=0;
;;;1513   else ND_EXT[1]=1;
;;;1514   temp_SL=(signed long)adc_buff_[6];
;;;1515   temp_SL*=Ktext[1];
;;;1516   temp_SL/=20000L;
;;;1517   temp_SL-=273L;
;;;1518   t_ext[1]=(signed short)temp_SL;
;;;1519   
;;;1520   #endif
;;;1521   
;;;1522   // 
;;;1523   temp_SL=(signed long)adc_buff_ext_[0];
0011a8  4e27              LDR      r6,|L1.4680|
0011aa  8831              LDRH     r1,[r6,#0]  ; adc_buff_ext_
;;;1524   temp_SL*=Kunet_ext[0];
0011ac  f8df909c          LDR      r9,|L1.4684|
0011b0  f9b90000          LDRSH    r0,[r9,#0]  ; Kunet_ext
0011b4  4348              MULS     r0,r1,r0
;;;1525   temp_SL/=4000L;
0011b6  f44f6a7a          MOV      r10,#0xfa0
0011ba  fb90f0fa          SDIV     r0,r0,r10
;;;1526   Uvv[0]=(signed short)temp_SL;
0011be  4924              LDR      r1,|L1.4688|
0011c0  b280              UXTH     r0,r0
0011c2  8008              STRH     r0,[r1,#0]
;;;1527   if(Uvv[0]<100) Uvv0=Uvv[0];
0011c4  f8dfe08c          LDR      lr,|L1.4692|
0011c8  2864              CMP      r0,#0x64
0011ca  d245              BCS      |L1.4696|
0011cc  f8ae0000          STRH     r0,[lr,#0]
0011d0  e046              B        |L1.4704|
0011d2  0000              DCW      0x0000
                  |L1.4564|
                          DCD      net_U
                  |L1.4568|
                          DCD      Kunet
                  |L1.4572|
                          DCD      ||area_number.21||
                  |L1.4576|
                          DCD      net_F
                  |L1.4580|
                          DCD      net_F3
                  |L1.4584|
                          DCD      ||.bss||+0x400
                  |L1.4588|
                          DCD      Kubat
                  |L1.4592|
                          DCD      bat
                  |L1.4596|
                          DCD      Kubatm
                  |L1.4600|
                          DCD      ad7705_buff_
                  |L1.4604|
                          DCD      Kibat0
                  |L1.4608|
                          DCD      Kibat1
                  |L1.4612|
                          DCD      AUSW_MAIN
                  |L1.4616|
                          DCD      Ktbat
                  |L1.4620|
                          DCD      Kuload
                  |L1.4624|
                          DCD      load_U
                  |L1.4628|
                          DCD      Kuout
                  |L1.4632|
                          DCD      out_U
                  |L1.4636|
                          DCD      Kubps
                  |L1.4640|
                          DCD      bps_U
                  |L1.4644|
                          DCD      NUMIST
                  |L1.4648|
                          DCD      bps
                  |L1.4652|
                          DCD      bps_I
                  |L1.4656|
                          DCD      ND_EXT
                  |L1.4660|
                          DCD      Ktext
                  |L1.4664|
                          DCD      t_ext
                  |L1.4668|
                          DCD      Ib_ips_termokompensat
                  |L1.4672|
                          DCD      ibat_metr_buff_
                  |L1.4676|
                          DCD      bIBAT_SMKLBR
                  |L1.4680|
                          DCD      adc_buff_ext_
                  |L1.4684|
                          DCD      Kunet_ext
                  |L1.4688|
                          DCD      Uvv
                  |L1.4692|
                          DCD      Uvv0
                  |L1.4696|
;;;1528   else Uvv0=net_U;
001258  48fd              LDR      r0,|L1.5712|
00125a  8800              LDRH     r0,[r0,#0]  ; net_U
00125c  f8ae0000          STRH     r0,[lr,#0]
                  |L1.4704|
;;;1529   
;;;1530   // 
;;;1531   temp_SL=(signed long)adc_buff_ext_[1];
001260  8876              LDRH     r6,[r6,#2]  ; adc_buff_ext_
;;;1532   temp_SL*=Kunet_ext[1];
001262  f9b90002          LDRSH    r0,[r9,#2]  ; Kunet_ext
001266  4370              MULS     r0,r6,r0
;;;1533   temp_SL/=4000L;
001268  fb90f0fa          SDIV     r0,r0,r10
;;;1534   Uvv[1]=(signed short)temp_SL;
00126c  8048              STRH     r0,[r1,#2]
;;;1535   
;;;1536   
;;;1537   //  
;;;1538   temp_SL=(signed long)eb2_data_short[0];
00126e  49f9              LDR      r1,|L1.5716|
001270  f9b10000          LDRSH    r0,[r1,#0]  ; eb2_data_short
;;;1539   temp_SL*=Kvv_eb2[0];
001274  f8df93e0          LDR      r9,|L1.5720|
001278  f9b96000          LDRSH    r6,[r9,#0]  ; Kvv_eb2
00127c  4346              MULS     r6,r0,r6
;;;1540   temp_SL/=6000L;
00127e  f2417070          MOV      r0,#0x1770
001282  fb96faf0          SDIV     r10,r6,r0
;;;1541   Uvv_eb2[0]=(signed short)temp_SL;
001286  4ef5              LDR      r6,|L1.5724|
001288  f8a6a000          STRH     r10,[r6,#0]
;;;1542   
;;;1543   temp_SL=(signed long)eb2_data_short[1];
00128c  f9b1e002          LDRSH    lr,[r1,#2]  ; eb2_data_short
;;;1544   temp_SL*=Kvv_eb2[1];
001290  f9b9a002          LDRSH    r10,[r9,#2]  ; Kvv_eb2
001294  fb0afa0e          MUL      r10,r10,lr
;;;1545   temp_SL/=6000L;
001298  fb9afaf0          SDIV     r10,r10,r0
;;;1546   Uvv_eb2[1]=(signed short)temp_SL;
00129c  f8a6a002          STRH     r10,[r6,#2]
;;;1547   
;;;1548   temp_SL=(signed long)eb2_data_short[2];
0012a0  f9b1a004          LDRSH    r10,[r1,#4]  ; eb2_data_short
;;;1549   temp_SL*=Kvv_eb2[2];
0012a4  f9b99004          LDRSH    r9,[r9,#4]  ; Kvv_eb2
0012a8  fb09f90a          MUL      r9,r9,r10
;;;1550   temp_SL/=6000L;
0012ac  fb99f9f0          SDIV     r9,r9,r0
;;;1551   Uvv_eb2[2]=(signed short)temp_SL;
0012b0  f8a69004          STRH     r9,[r6,#4]
;;;1552   
;;;1553   //  
;;;1554   temp_SL=(signed long)eb2_data_short[3];
0012b4  f9b1a006          LDRSH    r10,[r1,#6]  ; eb2_data_short
;;;1555   temp_SL*=Kpes_eb2[0];
0012b8  4ee9              LDR      r6,|L1.5728|
0012ba  f9b69000          LDRSH    r9,[r6,#0]  ; Kpes_eb2
0012be  fb09f90a          MUL      r9,r9,r10
;;;1556   temp_SL/=6000L;
0012c2  fb99faf0          SDIV     r10,r9,r0
;;;1557   Upes_eb2[0]=(signed short)temp_SL;
0012c6  f8df939c          LDR      r9,|L1.5732|
0012ca  f8a9a000          STRH     r10,[r9,#0]
;;;1558   
;;;1559   temp_SL=(signed long)eb2_data_short[4];
0012ce  f9b1e008          LDRSH    lr,[r1,#8]  ; eb2_data_short
;;;1560   temp_SL*=Kpes_eb2[1];
0012d2  f9b6a002          LDRSH    r10,[r6,#2]  ; Kpes_eb2
0012d6  fb0afa0e          MUL      r10,r10,lr
;;;1561   temp_SL/=6000L;
0012da  fb9afaf0          SDIV     r10,r10,r0
;;;1562   Upes_eb2[1]=(signed short)temp_SL;
0012de  f8a9a002          STRH     r10,[r9,#2]
;;;1563   
;;;1564   temp_SL=(signed long)eb2_data_short[5];
0012e2  f9b1100a          LDRSH    r1,[r1,#0xa]  ; eb2_data_short
;;;1565   temp_SL*=Kpes_eb2[2];
0012e6  f9b66004          LDRSH    r6,[r6,#4]  ; Kpes_eb2
0012ea  fb06f601          MUL      r6,r6,r1
;;;1566   temp_SL/=6000L;
0012ee  fb96f0f0          SDIV     r0,r6,r0
;;;1567   Upes_eb2[2]=(signed short)temp_SL;
0012f2  f8a90004          STRH     r0,[r9,#4]
;;;1568   
;;;1569   //  
;;;1570   
;;;1571   ibt._T[0]=t_ext[1]+273;
0012f6  48dc              LDR      r0,|L1.5736|
0012f8  4edc              LDR      r6,|L1.5740|
0012fa  8841              LDRH     r1,[r0,#2]  ; t_ext
0012fc  f2011111          ADD      r1,r1,#0x111
001300  fa0ff981          SXTH     r9,r1
001304  f8a69000          STRH     r9,[r6,#0]
;;;1572   ibt._T[1]=t_ext[2]+273;
001308  8880              LDRH     r0,[r0,#4]  ; t_ext
00130a  f2001011          ADD      r0,r0,#0x111
00130e  fa0ffa80          SXTH     r10,r0
001312  f8a6a002          STRH     r10,[r6,#2]
;;;1573   
;;;1574   ibt._nd[0]=ND_EXT[1];
001316  f8d80004          LDR      r0,[r8,#4]  ; ND_EXT
00131a  b2c1              UXTB     r1,r0
00131c  7231              STRB     r1,[r6,#8]
;;;1575   ibt._nd[1]=ND_EXT[2];
00131e  f8d80008          LDR      r0,[r8,#8]  ; ND_EXT
001322  b2c0              UXTB     r0,r0
001324  7270              STRB     r0,[r6,#9]
;;;1576   
;;;1577   #ifndef UKU_TELECORE2015
;;;1578   if((ibt._nd[0]==0) &&  (ibt._nd[1]==0))
;;;1579   	{
;;;1580   	t_box=((ibt._T[0]+ibt._T[1])/2)-273;
001326  4ed2              LDR      r6,|L1.5744|
001328  b901              CBNZ     r1,|L1.4908|
00132a  b110              CBZ      r0,|L1.4914|
                  |L1.4908|
;;;1581   	}
;;;1582   else if((ibt._nd[0]==1) &&  (ibt._nd[1]==0))
00132c  2901              CMP      r1,#1
00132e  d00a              BEQ      |L1.4934|
001330  e00a              B        |L1.4936|
                  |L1.4914|
001332  eb09000a          ADD      r0,r9,r10             ;1580
001336  eb0070d0          ADD      r0,r0,r0,LSR #31      ;1580
00133a  f46f7188          MVN      r1,#0x110             ;1580
00133e  eb010060          ADD      r0,r1,r0,ASR #1       ;1580
001342  8030              STRH     r0,[r6,#0]            ;1580
001344  e01e              B        |L1.4996|
                  |L1.4934|
001346  b108              CBZ      r0,|L1.4940|
                  |L1.4936|
;;;1583   	{
;;;1584   	t_box=ibt._T[1]-273;
;;;1585   	}
;;;1586   else if((ibt._nd[0]==0) &&  (ibt._nd[1]==1))
001348  b129              CBZ      r1,|L1.4950|
00134a  e006              B        |L1.4954|
                  |L1.4940|
00134c  f2aa1a11          SUB      r10,r10,#0x111        ;1584
001350  f8a6a000          STRH     r10,[r6,#0]           ;1584
001354  e016              B        |L1.4996|
                  |L1.4950|
001356  2801              CMP      r0,#1
001358  d002              BEQ      |L1.4960|
                  |L1.4954|
;;;1587   	{
;;;1588   	t_box=ibt._T[0]-273;
;;;1589   	}
;;;1590   else if((ibt._nd[0]==1) &&  (ibt._nd[1]==1))
00135a  2901              CMP      r1,#1
00135c  d005              BEQ      |L1.4970|
00135e  e011              B        |L1.4996|
                  |L1.4960|
001360  f2a91911          SUB      r9,r9,#0x111          ;1588
001364  f8a69000          STRH     r9,[r6,#0]            ;1588
001368  e00c              B        |L1.4996|
                  |L1.4970|
00136a  2801              CMP      r0,#1
00136c  d10a              BNE      |L1.4996|
;;;1591   	{
;;;1592   	if(t_ext_can_nd<5)t_box= t_ext_can;
00136e  48c1              LDR      r0,|L1.5748|
001370  7800              LDRB     r0,[r0,#0]  ; t_ext_can_nd
001372  2805              CMP      r0,#5
001374  d203              BCS      |L1.4990|
001376  48c0              LDR      r0,|L1.5752|
001378  8800              LDRH     r0,[r0,#0]  ; t_ext_can
00137a  8030              STRH     r0,[r6,#0]
00137c  e002              B        |L1.4996|
                  |L1.4990|
;;;1593   	else t_box=20;
00137e  f04f0014          MOV      r0,#0x14
001382  8030              STRH     r0,[r6,#0]
                  |L1.4996|
;;;1594   	}
;;;1595   #endif
;;;1596   /*
;;;1597   //  
;;;1598   
;;;1599   ibt._T[0]=bat[0]._Tb+273;
;;;1600   ibt._T[1]=bat[1]._Tb+273;
;;;1601   ibt._T[2]=t_ext[1]+273;
;;;1602   ibt._T[3]=t_ext[2]+273;
;;;1603   
;;;1604   ibt._nd[0]=bat[0]._nd;
;;;1605   ibt._nd[1]=bat[1]._nd;
;;;1606   ibt._nd[2]=ND_EXT[1];
;;;1607   ibt._nd[3]=ND_EXT[2];
;;;1608   
;;;1609   ibt._avg1=0;
;;;1610   ibt._avg_cnt=4;
;;;1611   
;;;1612   if(ibt._nd[0]==0)
;;;1613   	{
;;;1614   	ibt._avg1+=ibt._T[0];
;;;1615   	}
;;;1616   else 
;;;1617   	{
;;;1618   	ibt._avg_cnt--;
;;;1619   	}
;;;1620   
;;;1621   if(ibt._nd[1]==0)
;;;1622   	{
;;;1623   	ibt._avg1+=ibt._T[1];
;;;1624   	}
;;;1625   else 
;;;1626   	{
;;;1627   	ibt._avg_cnt--;
;;;1628   	}
;;;1629   
;;;1630   if(ibt._nd[2]==0)
;;;1631   	{
;;;1632   	ibt._avg1+=ibt._T[2];
;;;1633   	}
;;;1634   else 
;;;1635   	{
;;;1636   	ibt._avg_cnt--;
;;;1637   	}
;;;1638   
;;;1639   if(ibt._nd[3]==0)
;;;1640   	{
;;;1641   	ibt._avg1+=ibt._T[3];
;;;1642   	}
;;;1643   else 
;;;1644   	{
;;;1645   	ibt._avg_cnt--;
;;;1646   	}
;;;1647   
;;;1648   if(ibt._avg_cnt==0)
;;;1649   	{
;;;1650   	}
;;;1651   else
;;;1652   	{
;;;1653   	ibt._avg1/=ibt._avg_cnt;
;;;1654   	}
;;;1655   
;;;1656   
;;;1657   if(ibt._nd[0]!=0)
;;;1658   	{
;;;1659   	ibt._T_dispers[0]=0;
;;;1660   	}
;;;1661   else 
;;;1662   	{
;;;1663   	ibt._T_dispers[0]=abs(ibt._T[0]-ibt._avg1);
;;;1664   	}
;;;1665   
;;;1666   if(ibt._nd[1]!=0)
;;;1667   	{
;;;1668   	ibt._T_dispers[1]=0;
;;;1669   	}
;;;1670   else 
;;;1671   	{
;;;1672   	ibt._T_dispers[1]=abs(ibt._T[1]-ibt._avg1);
;;;1673   	}
;;;1674   
;;;1675   if(ibt._nd[2]!=0)
;;;1676   	{
;;;1677   	ibt._T_dispers[2]=0;
;;;1678   	}
;;;1679   else 
;;;1680   	{
;;;1681   	ibt._T_dispers[2]=abs(ibt._T[2]-ibt._avg1);
;;;1682   	}
;;;1683   
;;;1684   if(ibt._nd[3]!=0)
;;;1685   	{
;;;1686   	ibt._T_dispers[3]=0;
;;;1687   	}
;;;1688   else 
;;;1689   	{
;;;1690   	ibt._T_dispers[3]=abs(ibt._T[3]-ibt._avg1);
;;;1691   	}
;;;1692   
;;;1693   if(	ibt._nd[0]&&
;;;1694   	ibt._nd[1]&&
;;;1695   	ibt._nd[2]&&
;;;1696   	ibt._nd[3]
;;;1697   	)
;;;1698   	{
;;;1699   	t_box=(bps[0]._Ti);
;;;1700   	}
;;;1701   
;;;1702   else if(	ibt._nd[0]||
;;;1703   	ibt._nd[1]||
;;;1704   	ibt._nd[2]||
;;;1705   	ibt._nd[3]
;;;1706   	)
;;;1707   	{
;;;1708   	t_box=(ibt._avg1-273);
;;;1709   	}
;;;1710   else 
;;;1711   	{
;;;1712   	ibt._max_dispers_num=0;
;;;1713   	ibt._max_dispers=ibt._T_dispers[0];
;;;1714   
;;;1715   	if(ibt._T_dispers[1]>ibt._max_dispers)
;;;1716   		{
;;;1717   		ibt._max_dispers_num=1;
;;;1718   		ibt._max_dispers=ibt._T_dispers[1];
;;;1719   		}
;;;1720   	if(ibt._T_dispers[2]>ibt._max_dispers)
;;;1721   		{
;;;1722   		ibt._max_dispers_num=2;
;;;1723   		ibt._max_dispers=ibt._T_dispers[2];
;;;1724   		}
;;;1725   	if(ibt._T_dispers[3]>ibt._max_dispers)
;;;1726   		{
;;;1727   		ibt._max_dispers_num=3;
;;;1728   		ibt._max_dispers=ibt._T_dispers[3];
;;;1729   		}
;;;1730   
;;;1731   	ibt._avg2=0;
;;;1732   
;;;1733   	if(ibt._max_dispers_num!=0)
;;;1734   		{
;;;1735   		ibt._avg2+=ibt._T[0];
;;;1736   		}
;;;1737   	if(ibt._max_dispers_num!=1)
;;;1738   		{
;;;1739   		ibt._avg2+=ibt._T[1];
;;;1740   		}
;;;1741   	if(ibt._max_dispers_num!=2)
;;;1742   		{
;;;1743   		ibt._avg2+=ibt._T[2];
;;;1744   		}
;;;1745   	if(ibt._max_dispers_num!=3)
;;;1746   		{
;;;1747   		ibt._avg2+=ibt._T[3];
;;;1748   		}
;;;1749   
;;;1750   	t_box=(ibt._avg2/3)-273;
;;;1751   
;;;1752   	}*/
;;;1753   
;;;1754   
;;;1755   //*********************************************
;;;1756   
;;;1757   #ifndef TELECORE
;;;1758   if((BAT_IS_ON[0]==bisON)&&(bat[0]._Ub>200)) Ibmax=bat[0]._Ib;
001384  48bd              LDR      r0,|L1.5756|
001386  7801              LDRB     r1,[r0,#0]  ; BAT_IS_ON
001388  2955              CMP      r1,#0x55
00138a  d104              BNE      |L1.5014|
00138c  f1bb0fc8          CMP      r11,#0xc8
001390  dd01              BLE      |L1.5014|
001392  8929              LDRH     r1,[r5,#8]  ; bat
001394  8739              STRH     r1,[r7,#0x38]
                  |L1.5014|
;;;1759   if((BAT_IS_ON[1]==bisON)&&(bat[1]._Ub>200)&&(bat[1]._Ib>bat[0]._Ib)) Ibmax=bat[1]._Ib;
001396  7840              LDRB     r0,[r0,#1]  ; BAT_IS_ON
001398  2855              CMP      r0,#0x55
00139a  d10a              BNE      |L1.5042|
00139c  f9b5004e          LDRSH    r0,[r5,#0x4e]  ; bat
0013a0  28c8              CMP      r0,#0xc8
0013a2  dd06              BLE      |L1.5042|
0013a4  f9b50054          LDRSH    r0,[r5,#0x54]  ; bat
0013a8  f9b51008          LDRSH    r1,[r5,#8]  ; bat
0013ac  4288              CMP      r0,r1
0013ae  dd00              BLE      |L1.5042|
0013b0  8738              STRH     r0,[r7,#0x38]
                  |L1.5042|
;;;1760   #endif
;;;1761   
;;;1762   #ifdef TELECORE
;;;1763   Ibmax=0;
;;;1764   /*
;;;1765   if((NUMBAT_TELECORE>0)&&(lakb[0]._communicationFullErrorStat==0)&&(lakb[0]._ch_curr/10>Ibmax))Ibmax=lakb[0]._ch_curr/10;
;;;1766   if((NUMBAT_TELECORE>1)&&(lakb[1]._communicationFullErrorStat==0)&&(lakb[1]._ch_curr/10>Ibmax))Ibmax=lakb[1]._ch_curr/10;
;;;1767   if((NUMBAT_TELECORE>2)&&(lakb[2]._communicationFullErrorStat==0)&&(lakb[2]._ch_curr/10>Ibmax))Ibmax=lakb[2]._ch_curr/10;
;;;1768   */
;;;1769   if((NUMBAT_TELECORE>0)&&(bat[0]._Ib/10>Ibmax))Ibmax=bat[0]._Ib/10;
;;;1770   if((NUMBAT_TELECORE>1)&&(bat[1]._Ib/10>Ibmax))Ibmax=bat[1]._Ib/10;
;;;1771   //if((BAT_IS_ON[0]==bisON)&&(bat[0]._Ub>200)) Ibmax=bat[0]._Ib/1;
;;;1772   //if((BAT_IS_ON[1]==bisON)&&(bat[1]._Ub>200)&&(bat[1]._Ib>bat[0]._Ib)) Ibmax=bat[1]._Ib;
;;;1773   #endif
;;;1774   //Ibmax=bat[0]._Ib;
;;;1775   //if((AUSW_MAIN==22063)||(AUSW_MAIN==22023)||(AUSW_MAIN==22043))Ibmax=Ib_ips_termokompensat;
;;;1776   #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;1777   Ibmax=Ib_ips_termokompensat;
0013b2  f8bc0000          LDRH     r0,[r12,#0]  ; Ib_ips_termokompensat
0013b6  8738              STRH     r0,[r7,#0x38]
;;;1778   #endif
;;;1779   for(i=0;i<NUMIST;i++)
0013b8  f04f0100          MOV      r1,#0
0013bc  e02f              B        |L1.5150|
                  |L1.5054|
;;;1780   	{
;;;1781   	if(bps[i]._cnt<25)
0013be  ebc100c1          RSB      r0,r1,r1,LSL #3
0013c2  eb001001          ADD      r0,r0,r1,LSL #4
0013c6  eb040080          ADD      r0,r4,r0,LSL #2
0013ca  78c6              LDRB     r6,[r0,#3]
0013cc  2e19              CMP      r6,#0x19
0013ce  d21c              BCS      |L1.5130|
;;;1782        	{
;;;1783        	bps[i]._Ii=bps[i]._buff[0]+(bps[i]._buff[1]*256);
0013d0  7986              LDRB     r6,[r0,#6]
0013d2  79c7              LDRB     r7,[r0,#7]
0013d4  eb062607          ADD      r6,r6,r7,LSL #8
0013d8  6246              STR      r6,[r0,#0x24]
;;;1784        	bps[i]._Uin=bps[i]._buff[2]+(bps[i]._buff[3]*256);
0013da  7a06              LDRB     r6,[r0,#8]
0013dc  7a47              LDRB     r7,[r0,#9]
0013de  eb062607          ADD      r6,r6,r7,LSL #8
0013e2  6206              STR      r6,[r0,#0x20]
;;;1785        	bps[i]._Uii=bps[i]._buff[4]+(bps[i]._buff[5]*256);
0013e4  7a86              LDRB     r6,[r0,#0xa]
0013e6  7ac7              LDRB     r7,[r0,#0xb]
0013e8  eb062607          ADD      r6,r6,r7,LSL #8
0013ec  61c6              STR      r6,[r0,#0x1c]
;;;1786        	bps[i]._Ti=(signed)(bps[i]._buff[6]);
0013ee  7b06              LDRB     r6,[r0,#0xc]
0013f0  6286              STR      r6,[r0,#0x28]
;;;1787        	bps[i]._adr_ee=bps[i]._buff[7];
0013f2  7b46              LDRB     r6,[r0,#0xd]
0013f4  f8806052          STRB     r6,[r0,#0x52]
;;;1788        	bps[i]._flags_tm=bps[i]._buff[8];
0013f8  7b86              LDRB     r6,[r0,#0xe]
0013fa  f8806042          STRB     r6,[r0,#0x42]
;;;1789   	     bps[i]._rotor=bps[i]._buff[10]+(bps[i]._buff[11]*256);    
0013fe  7c06              LDRB     r6,[r0,#0x10]
001400  7c47              LDRB     r7,[r0,#0x11]
001402  eb062607          ADD      r6,r6,r7,LSL #8
001406  64c6              STR      r6,[r0,#0x4c]
001408  e006              B        |L1.5144|
                  |L1.5130|
;;;1790        	} 
;;;1791   	else 
;;;1792        	{
;;;1793        	bps[i]._Uii=0; 
00140a  61c3              STR      r3,[r0,#0x1c]
;;;1794        	bps[i]._Ii=0;
00140c  6243              STR      r3,[r0,#0x24]
;;;1795        	bps[i]._Uin=0;
00140e  6203              STR      r3,[r0,#0x20]
;;;1796        	bps[i]._Ti=0;
001410  6283              STR      r3,[r0,#0x28]
;;;1797        	bps[i]._flags_tm=0; 
001412  f8803042          STRB     r3,[r0,#0x42]
;;;1798   	     bps[i]._rotor=0;    
001416  64c3              STR      r3,[r0,#0x4c]
                  |L1.5144|
001418  f1010101          ADD      r1,r1,#1              ;1779
00141c  b2c9              UXTB     r1,r1                 ;1779
                  |L1.5150|
00141e  4291              CMP      r1,r2                 ;1779
001420  dbcd              BLT      |L1.5054|
;;;1799        	}
;;;1800        
;;;1801        }
;;;1802   
;;;1803   load_I=0;
001422  4e97              LDR      r6,|L1.5760|
;;;1804   #ifdef TELECORE
;;;1805   
;;;1806   /*for(i=0;i<NUMBAT_TELECORE;i++)
;;;1807   	{
;;;1808   	load_I-=lakb[i]._ch_curr/10;
;;;1809   	}*/
;;;1810   load_I=-(bat[0]._Ib/10)-(bat[1]._Ib/10);
;;;1811   #else
;;;1812   load_I=-(bat[0]._Ib/10)-(bat[1]._Ib/10);
001424  f9b51008          LDRSH    r1,[r5,#8]  ; bat
001428  f04f000a          MOV      r0,#0xa
00142c  fb91f1f0          SDIV     r1,r1,r0
001430  f9b55054          LDRSH    r5,[r5,#0x54]  ; bat
001434  fb95f0f0          SDIV     r0,r5,r0
001438  4408              ADD      r0,r0,r1
00143a  f1c00000          RSB      r0,r0,#0
00143e  b207              SXTH     r7,r0
001440  8037              STRH     r7,[r6,#0]
;;;1813   #endif
;;;1814   Isumm=0;
001442  4d90              LDR      r5,|L1.5764|
001444  802b              STRH     r3,[r5,#0]
;;;1815   
;;;1816   for(i=0;i<NUMIST;i++)
001446  f04f0000          MOV      r0,#0
00144a  e012              B        |L1.5234|
                  |L1.5196|
;;;1817        {
;;;1818        if(bps[i]._cnt<5)Isumm+=bps[i]._Ii;
00144c  ebc001c0          RSB      r1,r0,r0,LSL #3
001450  eb011100          ADD      r1,r1,r0,LSL #4
001454  eb040181          ADD      r1,r4,r1,LSL #2
001458  f891c003          LDRB     r12,[r1,#3]
00145c  f1bc0f05          CMP      r12,#5
001460  d204              BCS      |L1.5228|
001462  6a49              LDR      r1,[r1,#0x24]
001464  f8b5c000          LDRH     r12,[r5,#0]  ; Isumm
001468  4461              ADD      r1,r1,r12
00146a  8029              STRH     r1,[r5,#0]
                  |L1.5228|
00146c  f1000001          ADD      r0,r0,#1              ;1816
001470  b2c0              UXTB     r0,r0                 ;1816
                  |L1.5234|
001472  4290              CMP      r0,r2                 ;1816
001474  dbea              BLT      |L1.5196|
;;;1819        }  
;;;1820        
;;;1821   load_I=load_I+Isumm;
001476  8828              LDRH     r0,[r5,#0]  ; Isumm
001478  4438              ADD      r0,r0,r7
00147a  b200              SXTH     r0,r0
00147c  8030              STRH     r0,[r6,#0]
;;;1822   if(load_I<0)load_I=0;
00147e  2800              CMP      r0,#0
001480  da00              BGE      |L1.5252|
001482  8033              STRH     r3,[r6,#0]
                  |L1.5252|
;;;1823   
;;;1824   #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;1825   load_I=0;
001484  8033              STRH     r3,[r6,#0]
;;;1826   
;;;1827   Isumm=0;
001486  802b              STRH     r3,[r5,#0]
;;;1828   
;;;1829   for(i=0;i<NUMIST;i++)
001488  f04f0000          MOV      r0,#0
00148c  e00f              B        |L1.5294|
                  |L1.5262|
;;;1830        {
;;;1831        if(bps[i]._cnt<5)Isumm+=bps[i]._Ii;
00148e  ebc001c0          RSB      r1,r0,r0,LSL #3
001492  eb011100          ADD      r1,r1,r0,LSL #4
001496  eb040181          ADD      r1,r4,r1,LSL #2
00149a  78cf              LDRB     r7,[r1,#3]
00149c  2f05              CMP      r7,#5
00149e  d203              BCS      |L1.5288|
0014a0  6a49              LDR      r1,[r1,#0x24]
0014a2  882f              LDRH     r7,[r5,#0]  ; Isumm
0014a4  4439              ADD      r1,r1,r7
0014a6  8029              STRH     r1,[r5,#0]
                  |L1.5288|
0014a8  f1000001          ADD      r0,r0,#1              ;1829
0014ac  b2c0              UXTB     r0,r0                 ;1829
                  |L1.5294|
0014ae  4290              CMP      r0,r2                 ;1829
0014b0  dbed              BLT      |L1.5262|
;;;1832        }  
;;;1833        
;;;1834   load_I=load_I+Isumm;
0014b2  8829              LDRH     r1,[r5,#0]  ; Isumm
0014b4  eb030001          ADD      r0,r3,r1
0014b8  b200              SXTH     r0,r0
0014ba  8030              STRH     r0,[r6,#0]
;;;1835   if(load_I<0)load_I=0;
0014bc  2800              CMP      r0,#0
0014be  da00              BGE      |L1.5314|
0014c0  8033              STRH     r3,[r6,#0]
                  |L1.5314|
;;;1836   
;;;1837   #endif
;;;1838   
;;;1839   
;;;1840   
;;;1841   #ifdef UKU_GLONASS
;;;1842   inv[0]._Uio=6;
;;;1843   if (NUMINV)
;;;1844   	{
;;;1845   	for(i=0;i<NUMINV;i++)
;;;1846   		{
;;;1847   		if(bps[i+first_inv_slot]._cnt<25)
;;;1848        		{
;;;1849        		inv[i]._Ii=bps[i+first_inv_slot]._buff[0]+(bps[i+first_inv_slot]._buff[1]*256);
;;;1850        		inv[i]._Uin=bps[i+first_inv_slot]._buff[2]+(bps[i+first_inv_slot]._buff[3]*256);
;;;1851        		inv[i]._Uio=bps[i+first_inv_slot]._buff[4]+(bps[i+first_inv_slot]._buff[5]*256);
;;;1852        		inv[i]._Ti=(signed)(bps[i+first_inv_slot]._buff[6]);
;;;1853        		inv[i]._flags_tm=bps[i+first_inv_slot]._buff[8];
;;;1854   	    	//	inv[i]._rotor=bps[i+first_inv_slot]._buff[10]+(bps[i+first_inv_slot]._buff[11]*256);
;;;1855   			inv[i]._cnt=0;    
;;;1856        		} 
;;;1857   		else 
;;;1858        		{
;;;1859        		inv[i]._Uio=0; 
;;;1860        		inv[i]._Ii=0;
;;;1861        		inv[i]._Uin=0;
;;;1862        		inv[i]._Ti=0;
;;;1863        		inv[i]._flags_tm=0; 
;;;1864   //	     	inv[i]._rotor0;
;;;1865   			inv[i]._cnt=25;    
;;;1866        		}
;;;1867        	}
;;;1868      	}
;;;1869   #endif
;;;1870   
;;;1871   #ifndef UKU_GLONASS
;;;1872   if (NUMINV)
0014c2  4871              LDR      r0,|L1.5768|
0014c4  f9b05000          LDRSH    r5,[r0,#0]  ; NUMINV
0014c8  2d00              CMP      r5,#0
0014ca  d066              BEQ      |L1.5530|
;;;1873   	{
;;;1874   	for(i=0;i<NUMINV;i++)
0014cc  f04f0200          MOV      r2,#0
;;;1875   		{
;;;1876   		if(bps[i+20]._cnt<25)
;;;1877        		{
;;;1878        		inv[i]._Ii=bps[i+20]._buff[0]+(bps[i+20]._buff[1]*256);
0014d0  4e6e              LDR      r6,|L1.5772|
0014d2  e060              B        |L1.5526|
                  |L1.5332|
0014d4  f1020014          ADD      r0,r2,#0x14           ;1876
0014d8  ebc001c0          RSB      r1,r0,r0,LSL #3       ;1876
0014dc  eb011000          ADD      r0,r1,r0,LSL #4       ;1876
0014e0  eb040080          ADD      r0,r4,r0,LSL #2       ;1876
0014e4  78c1              LDRB     r1,[r0,#3]            ;1876
0014e6  2919              CMP      r1,#0x19              ;1876
0014e8  d239              BCS      |L1.5470|
0014ea  7981              LDRB     r1,[r0,#6]
0014ec  79c7              LDRB     r7,[r0,#7]
0014ee  eb012707          ADD      r7,r1,r7,LSL #8
0014f2  eb020142          ADD      r1,r2,r2,LSL #1
0014f6  eb061141          ADD      r1,r6,r1,LSL #5
0014fa  61cf              STR      r7,[r1,#0x1c]
;;;1879        		inv[i]._Pio=bps[i+20]._buff[2]+(bps[i+20]._buff[3]*256);
0014fc  7a07              LDRB     r7,[r0,#8]
0014fe  f890c009          LDRB     r12,[r0,#9]
001502  eb07270c          ADD      r7,r7,r12,LSL #8
001506  62cf              STR      r7,[r1,#0x2c]
;;;1880        		inv[i]._Uio=bps[i+20]._buff[4]+(bps[i+20]._buff[5]*256);
001508  7a87              LDRB     r7,[r0,#0xa]
00150a  f890c00b          LDRB     r12,[r0,#0xb]
00150e  eb07270c          ADD      r7,r7,r12,LSL #8
001512  618f              STR      r7,[r1,#0x18]
;;;1881        		inv[i]._Ti=(signed)(bps[i+20]._buff[6]);
001514  7b07              LDRB     r7,[r0,#0xc]
001516  620f              STR      r7,[r1,#0x20]
;;;1882        		inv[i]._flags_tm=bps[i+20]._buff[7];
001518  7b47              LDRB     r7,[r0,#0xd]
00151a  f8817046          STRB     r7,[r1,#0x46]
;;;1883        		inv[i]._Uin=bps[i+20]._buff[8]+(bps[i+20]._buff[9]*256);
00151e  7b87              LDRB     r7,[r0,#0xe]
001520  f890c00f          LDRB     r12,[r0,#0xf]
001524  eb07270c          ADD      r7,r7,r12,LSL #8
001528  628f              STR      r7,[r1,#0x28]
;;;1884        		inv[i]._Uil=bps[i+20]._buff[10]+(bps[i+20]._buff[11]*256);
00152a  7c07              LDRB     r7,[r0,#0x10]
00152c  f890c011          LDRB     r12,[r0,#0x11]
001530  eb07270c          ADD      r7,r7,r12,LSL #8
001534  624f              STR      r7,[r1,#0x24]
;;;1885   			inv[i]._cnt=0;
001536  708b              STRB     r3,[r1,#2]
;;;1886   			inv[i]._Uoutmin=bps[i+20]._buff[12]; 
001538  7c87              LDRB     r7,[r0,#0x12]
00153a  f8817059          STRB     r7,[r1,#0x59]
;;;1887   			inv[i]._Uoutmax=bps[i+20]._buff[13]; 
00153e  7cc7              LDRB     r7,[r0,#0x13]
001540  f881705a          STRB     r7,[r1,#0x5a]
;;;1888   			inv[i]._Pnom=bps[i+20]._buff[14]; 
001544  7d07              LDRB     r7,[r0,#0x14]
001546  f8817058          STRB     r7,[r1,#0x58]
;;;1889   			inv[i]._net_contr_en=bps[i+20]._buff[15];
00154a  7d47              LDRB     r7,[r0,#0x15]
00154c  f881705b          STRB     r7,[r1,#0x5b]
;;;1890   			inv[i]._pwm_en=bps[i+20]._buff[16];  
001550  7d87              LDRB     r7,[r0,#0x16]
001552  f881705c          STRB     r7,[r1,#0x5c]
;;;1891   			inv[i]._phase_mode=bps[i+20]._buff[17];  
001556  7dc0              LDRB     r0,[r0,#0x17]
001558  f881005d          STRB     r0,[r1,#0x5d]
00155c  e018              B        |L1.5520|
                  |L1.5470|
;;;1892        		} 
;;;1893   		else 
;;;1894        		{
;;;1895         		inv[i]._Ii=0;
00155e  eb020042          ADD      r0,r2,r2,LSL #1
001562  eb061040          ADD      r0,r6,r0,LSL #5
001566  61c3              STR      r3,[r0,#0x1c]
;;;1896   			inv[i]._Pio=0;
001568  62c3              STR      r3,[r0,#0x2c]
;;;1897   			inv[i]._Uio=0;
00156a  6183              STR      r3,[r0,#0x18]
;;;1898        		inv[i]._Ti=0;
00156c  6203              STR      r3,[r0,#0x20]
;;;1899        		inv[i]._flags_tm=0; 
00156e  f8803046          STRB     r3,[r0,#0x46]
;;;1900        		inv[i]._Uil=0;
001572  6243              STR      r3,[r0,#0x24]
;;;1901        		inv[i]._Uin=0;
001574  6283              STR      r3,[r0,#0x28]
;;;1902   			inv[i]._cnt=25; 
001576  f04f0119          MOV      r1,#0x19
00157a  7081              STRB     r1,[r0,#2]
;;;1903   			inv[i]._Uoutmin=0; 
00157c  f8803059          STRB     r3,[r0,#0x59]
;;;1904   			inv[i]._Uoutmax=0; 
001580  f880305a          STRB     r3,[r0,#0x5a]
;;;1905   			inv[i]._Pnom=0; 
001584  f8803058          STRB     r3,[r0,#0x58]
;;;1906   			inv[i]._net_contr_en=0;
001588  f880305b          STRB     r3,[r0,#0x5b]
;;;1907   			inv[i]._pwm_en=0;   
00158c  f880305c          STRB     r3,[r0,#0x5c]
                  |L1.5520|
001590  f1020201          ADD      r2,r2,#1              ;1874
001594  b2d2              UXTB     r2,r2                 ;1874
                  |L1.5526|
001596  42aa              CMP      r2,r5                 ;1874
001598  db9c              BLT      |L1.5332|
                  |L1.5530|
;;;1908   			   
;;;1909        		}
;;;1910        	}
;;;1911      	}
;;;1912   #endif
;;;1913   
;;;1914   #ifdef GLADKOV
;;;1915   inv[0]._Ii=bps[4]._buff[0]+(bps[4]._buff[1]*256);
;;;1916   inv[0]._Pio=bps[4]._buff[2]+(bps[4]._buff[3]*256);
;;;1917   inv[0]._Uio=bps[4]._buff[4]+(bps[4]._buff[5]*256);
;;;1918   inv[0]._Ti=(signed)(bps[4]._buff[6]);
;;;1919   inv[0]._flags_tm=bps[4]._buff[7];
;;;1920   inv[0]._Uin=bps[4]._buff[8]+(bps[4]._buff[9]*256);
;;;1921   inv[0]._Uil=bps[4]._buff[10]+(bps[4]._buff[11]*256);
;;;1922   inv[0]._cnt=0;    
;;;1923   
;;;1924   inv[1]._Ii=bps[21]._buff[0]+(bps[21]._buff[1]*256);
;;;1925   inv[1]._Pio=bps[21]._buff[2]+(bps[21]._buff[3]*256);
;;;1926   inv[1]._Uio=bps[21]._buff[4]+(bps[21]._buff[5]*256);
;;;1927   inv[1]._Ti=(signed)(bps[21]._buff[6]);
;;;1928   inv[1]._flags_tm=bps[21]._buff[7];
;;;1929   inv[1]._Uin=bps[21]._buff[8]+(bps[21]._buff[9]*256);
;;;1930   inv[1]._Uil=bps[21]._buff[10]+(bps[21]._buff[11]*256);
;;;1931   inv[1]._cnt=0;    
;;;1932   #endif
;;;1933   
;;;1934   /*
;;;1935   if((BAT_IS_ON[0]==bisON)&&(BAT_TYPE==1))
;;;1936   	{
;;;1937   	lakb[0]._battCommState=0;
;;;1938   	if(lakb[0]._cnt>10)lakb[0]._battCommState=2;
;;;1939   	else if(lakb[0]._bRS485ERR==1)lakb[0]._battCommState=1;
;;;1940   	
;;;1941   	if(lakb[0]._battCommState==0)
;;;1942   		{	
;;;1943   		bat[0]._Ub=(signed short)((lakb[0]._tot_bat_volt+5)/10);
;;;1944   		bat[0]._Ib=(signed short)lakb[0]._ch_curr;
;;;1945   		if(lakb[0]._dsch_curr) bat[0]._Ib=(signed short) (-lakb[0]._dsch_curr);
;;;1946   		bat[0]._Tb=(signed short)lakb[0]._max_cell_temp;
;;;1947   		}
;;;1948   	}
;;;1949   */
;;;1950   
;;;1951   #ifdef UKU_TELECORE2015
;;;1952   
;;;1953   	if(BAT_TYPE==2)
;;;1954   		{
;;;1955   		lakb[0]._ch_curr/*temp_SS*/=((ascii2halFhex(liBatteryInBuff[113]))<<12)+
;;;1956   					 		((ascii2halFhex(liBatteryInBuff[114]))<<8)+
;;;1957   							((ascii2halFhex(liBatteryInBuff[115]))<<4)+
;;;1958   							((ascii2halFhex(liBatteryInBuff[116])));
;;;1959   		
;;;1960   		/*if(temp_SS&0x8000)		lakb[0]._ch_curr=~temp_SS;
;;;1961   		else 				lakb[0]._ch_curr=temp_SS;*/
;;;1962   	
;;;1963   		lakb[0]._tot_bat_volt=	(unsigned short)(((ascii2halFhex(liBatteryInBuff[117]))<<12)+
;;;1964   							((ascii2halFhex(liBatteryInBuff[118]))<<8)+
;;;1965   							((ascii2halFhex(liBatteryInBuff[119]))<<4)+
;;;1966   							((ascii2halFhex(liBatteryInBuff[120]))))/100;
;;;1967   	
;;;1968   		lakb[0]._max_cell_temp= 	(((ascii2halFhex(liBatteryInBuff[93]))<<12)+
;;;1969   							((ascii2halFhex(liBatteryInBuff[94]))<<8)+
;;;1970   							((ascii2halFhex(liBatteryInBuff[95]))<<4)+
;;;1971   							((ascii2halFhex(liBatteryInBuff[96]))))/10-273;
;;;1972   	
;;;1973   		lakb[0]._s_o_c_abs=		(unsigned short)((ascii2halFhex(liBatteryInBuff[121]))<<12)+
;;;1974   							((ascii2halFhex(liBatteryInBuff[122]))<<8)+
;;;1975   							((ascii2halFhex(liBatteryInBuff[123]))<<4)+
;;;1976   							((ascii2halFhex(liBatteryInBuff[124])));
;;;1977   	
;;;1978   		lakb[0]._rat_cap=		(unsigned short)((ascii2halFhex(liBatteryInBuff[127]))<<12)+
;;;1979   							((ascii2halFhex(liBatteryInBuff[128]))<<8)+
;;;1980   							((ascii2halFhex(liBatteryInBuff[129]))<<4)+
;;;1981   							((ascii2halFhex(liBatteryInBuff[130])));
;;;1982   	
;;;1983   		lakb[0]._s_o_c=		lakb[0]._s_o_c_abs/(lakb[0]._rat_cap/100);
;;;1984   	
;;;1985   	
;;;1986   	/*	lakb[0]._rat_cap= (lakb_damp[i][13]*256)+ lakb_damp[i][14];
;;;1987   		lakb[0]._max_cell_volt= (lakb_damp[i][0]*256)+ lakb_damp[i][1];
;;;1988   		lakb[0]._min_cell_volt= (lakb_damp[i][2]*256)+ lakb_damp[i][3];
;;;1989   		lakb[0]._max_cell_temp= lakb_damp[i][4];
;;;1990   		lakb[0]._min_cell_temp= lakb_damp[i][5];
;;;1991   		lakb[0]._tot_bat_volt= (lakb_damp[i][6]*256)+ lakb_damp[i][7];
;;;1992   		lakb[0]._ch_curr= (lakb_damp[i][8]*256)+ lakb_damp[i][8];
;;;1993   		lakb[0]._dsch_curr= (lakb_damp[i][10]*256)+ lakb_damp[i][11];
;;;1994   		lakb[0]._s_o_c= lakb_damp[i][12];
;;;1995   		lakb[0]._r_b_t= lakb_damp[i][15];
;;;1996   		lakb[0]._c_c_l_v= (lakb_damp[i][16]*256)+ lakb_damp[i][17];
;;;1997   		lakb[0]._s_o_h= lakb_damp[i][18];
;;;1998   	
;;;1999   		if(lakb[i]._rat_cap==0)
;;;2000   			{
;;;2001   			if(lakb[i]._isOnCnt)
;;;2002   				{
;;;2003   				lakb[i]._isOnCnt--;
;;;2004   				if(lakb[i]._isOnCnt==0)
;;;2005   					{
;;;2006   					if(lakb[i]._battIsOn!=0) bLAKB_KONF_CH=1;
;;;2007   					}
;;;2008   				}
;;;2009   			}
;;;2010   		else 
;;;2011   			{
;;;2012   			if(lakb[i]._isOnCnt<50)
;;;2013   				{
;;;2014   				lakb[i]._isOnCnt++;
;;;2015   				if(lakb[i]._isOnCnt==50)
;;;2016   					{
;;;2017   					if(lakb[i]._battIsOn!=1) bLAKB_KONF_CH=1;
;;;2018   					}
;;;2019   				}
;;;2020   			}
;;;2021   		gran(&lakb[i]._isOnCnt,0,50);*/
;;;2022   		}
;;;2023   	else if(BAT_TYPE==3)
;;;2024   		{
;;;2025   		//short numOfPacks;
;;;2026   		//short numOfCells, numOfTemperCells, baseOfData;
;;;2027   		
;;;2028   		#ifndef UKU_TELECORE2016
;;;2029   		numOfCells=((ascii2halFhex(liBatteryInBuff[17]))<<4)+((ascii2halFhex(liBatteryInBuff[18])));
;;;2030   		numOfTemperCells=((ascii2halFhex(liBatteryInBuff[17+(numOfCells*4)+2]))<<4)+((ascii2halFhex(liBatteryInBuff[18+(numOfCells*4)+2])));
;;;2031   		numOfPacks=((ascii2halFhex(liBatteryInBuff[15]))<<4)+((ascii2halFhex(liBatteryInBuff[16])));
;;;2032   		if(numOfPacks)numOfPacks-=1;
;;;2033   		if((numOfPacks<0)||(numOfPacks>NUMBAT_TELECORE))numOfPacks=0;
;;;2034   		plazma_numOfCells=numOfCells;
;;;2035   		plazma_numOfTemperCells=numOfTemperCells;
;;;2036   		plazma_numOfPacks=numOfPacks;
;;;2037   
;;;2038   
;;;2039   		baseOfData=16+(numOfCells*4)+2+(numOfTemperCells*4)+2;
;;;2040   
;;;2041   		lakb[numOfPacks]._ch_curr=(signed short)(
;;;2042   							((ascii2halFhex(liBatteryInBuff[1+baseOfData]))<<12)+
;;;2043   							((ascii2halFhex(liBatteryInBuff[2+baseOfData]))<<8)+
;;;2044   							((ascii2halFhex(liBatteryInBuff[3+baseOfData]))<<4)+
;;;2045   							((ascii2halFhex(liBatteryInBuff[4+baseOfData])))
;;;2046   							);	  
;;;2047   
;;;2048   		lakb[numOfPacks]._tot_bat_volt=(signed short)(
;;;2049   							((ascii2halFhex(liBatteryInBuff[1+baseOfData+4]))<<12)+
;;;2050   							((ascii2halFhex(liBatteryInBuff[2+baseOfData+4]))<<8)+
;;;2051   							((ascii2halFhex(liBatteryInBuff[3+baseOfData+4]))<<4)+
;;;2052   							((ascii2halFhex(liBatteryInBuff[4+baseOfData+4])))
;;;2053   							)/10;
;;;2054   
;;;2055   		lakb[numOfPacks]._max_cell_temp=(signed short)(
;;;2056   							((ascii2halFhex(liBatteryInBuff[1+baseOfData-4]))<<12)+
;;;2057   							((ascii2halFhex(liBatteryInBuff[2+baseOfData-4]))<<8)+
;;;2058   							((ascii2halFhex(liBatteryInBuff[3+baseOfData-4]))<<4)+
;;;2059   							((ascii2halFhex(liBatteryInBuff[4+baseOfData-4])))
;;;2060   							)-2730;
;;;2061   
;;;2062   		lakb[numOfPacks]._s_o_c=(signed short)(
;;;2063   							((ascii2halFhex(liBatteryInBuff[1+baseOfData+8]))<<12)+
;;;2064   							((ascii2halFhex(liBatteryInBuff[2+baseOfData+8]))<<8)+
;;;2065   							((ascii2halFhex(liBatteryInBuff[3+baseOfData+8]))<<4)+
;;;2066   							((ascii2halFhex(liBatteryInBuff[4+baseOfData+8])))
;;;2067   							)/10;
;;;2068   
;;;2069   		lakb[numOfPacks]._s_o_h=(signed short)(
;;;2070   							((ascii2halFhex(liBatteryInBuff[1+baseOfData+14]))<<12)+
;;;2071   							((ascii2halFhex(liBatteryInBuff[2+baseOfData+14]))<<8)+
;;;2072   							((ascii2halFhex(liBatteryInBuff[3+baseOfData+14]))<<4)+
;;;2073   							((ascii2halFhex(liBatteryInBuff[4+baseOfData+14])))
;;;2074   							)/10;
;;;2075   		#endif
;;;2076   		
;;;2077   		#ifdef UKU_TELECORE2016
;;;2078   		{
;;;2079   		char i;
;;;2080   		
;;;2081   		for(i=0;i<NUMBAT_TELECORE;i++)
;;;2082   			{
;;;2083   			lakb[i]._s_o_c_percent= (signed short)(((unsigned long)lakb[i]._s_o_c*100UL)/(unsigned long)lakb[i]._s_o_h);
;;;2084   			}
;;;2085   		}
;;;2086   		#endif								  
;;;2087   		}
;;;2088   	
;;;2089   if(sacredSunSilentCnt<3) 
;;;2090   	{
;;;2091       	bat[0]._Ub=lakb[0]._tot_bat_volt;
;;;2092       	bat[0]._Tb=lakb[0]._max_cell_temp;
;;;2093      	//bat[0]._Ib=lakb[0]._ch_curr/10;
;;;2094   	}
;;;2095   else 
;;;2096   	{
;;;2097       	//bat[0]._Ub=0;
;;;2098       	//bat[0]._Tb=0;
;;;2099      	//bat[0]._Ib=0;
;;;2100   	}
;;;2101   
;;;2102   if(BAT_TYPE==1)
;;;2103   	{
;;;2104   	char i;
;;;2105   	for(i=0;i<1;i++)
;;;2106   		{
;;;2107   		lakb[i]._rat_cap= (lakb_damp[i][13]*256)+ lakb_damp[i][14];
;;;2108   		lakb[i]._max_cell_volt= (lakb_damp[i][0]*256)+ lakb_damp[i][1];
;;;2109   		lakb[i]._min_cell_volt= (lakb_damp[i][2]*256)+ lakb_damp[i][3];
;;;2110   		lakb[i]._max_cell_temp= lakb_damp[i][4];
;;;2111   		lakb[i]._min_cell_temp= lakb_damp[i][5];
;;;2112   		lakb[i]._tot_bat_volt= (lakb_damp[i][6]*256)+ lakb_damp[i][7];
;;;2113   		lakb[i]._ch_curr= (lakb_damp[i][8]*256)+ lakb_damp[i][9];
;;;2114   		lakb[i]._dsch_curr= (lakb_damp[i][10]*256)+ lakb_damp[i][11];
;;;2115   		lakb[i]._s_o_c= lakb_damp[i][12];
;;;2116   		lakb[i]._r_b_t= lakb_damp[i][15];
;;;2117   		lakb[i]._c_c_l_v= (lakb_damp[i][16]*256)+ lakb_damp[i][17];
;;;2118   		lakb[i]._s_o_h= lakb_damp[i][18];
;;;2119   		lakb[i]._flags1= lakb_damp[i][34];
;;;2120   		lakb[i]._flags2= lakb_damp[i][35];
;;;2121   		lakb[i]._b_p_ser_num= lakb_damp[i][36];
;;;2122   
;;;2123   /*		if(lakb[i]._rat_cap==0)
;;;2124   			{
;;;2125   			if(lakb[i]._isOnCnt)
;;;2126   				{
;;;2127   				lakb[i]._isOnCnt--;
;;;2128   				if(lakb[i]._isOnCnt==0)
;;;2129   					{
;;;2130   					if(lakb[i]._battIsOn!=0) bLAKB_KONF_CH=1;
;;;2131   					}
;;;2132   				}
;;;2133   			}
;;;2134   		else 
;;;2135   			{
;;;2136   			if(lakb[i]._isOnCnt<50)
;;;2137   				{
;;;2138   				lakb[i]._isOnCnt++;
;;;2139   				if(lakb[i]._isOnCnt==50)
;;;2140   					{
;;;2141   					if(lakb[i]._battIsOn!=1) bLAKB_KONF_CH=1;
;;;2142   					}
;;;2143   				}
;;;2144   			} */
;;;2145   		gran(&lakb[i]._isOnCnt,0,50);
;;;2146   	 	}
;;;2147   
;;;2148   	if(lakb_damp[0][41]==100)
;;;2149   		{
;;;2150   		li_bat._485Error=1;
;;;2151   		}
;;;2152   	if(lakb_damp[0][41]==0)
;;;2153   		{
;;;2154   		//if(bRS485ERR)bLAKB_KONF_CH=1;
;;;2155   		li_bat._485Error=0;
;;;2156   		}
;;;2157   	li_bat._485ErrorCnt=lakb_damp[0][41];
;;;2158   
;;;2159   
;;;2160   	}
;;;2161   
;;;2162   
;;;2163   #endif
;;;2164   
;;;2165   
;;;2166   #ifdef UKU_TELECORE2015
;;;2167   //   
;;;2168   //TODO          
;;;2169   li_bat._batStat=bsOK;
;;;2170   if(BAT_TYPE==1) //COSLIGHT
;;;2171   	{
;;;2172   	if(li_bat._batStat==bsOK)
;;;2173   		{
;;;2174   		li_bat._Ub=lakb[0]._tot_bat_volt/10;
;;;2175   
;;;2176   		if(lakb[0]._ch_curr)li_bat._Ib=lakb[0]._ch_curr/10;
;;;2177   		else if(lakb[0]._dsch_curr) li_bat._Ib=bat[0]._Ib/10;//lakb[0]._dsch_curr/10;
;;;2178   	
;;;2179   		li_bat._ratCap=lakb[0]._rat_cap/100;
;;;2180   		li_bat._soc=lakb[0]._s_o_c;
;;;2181   		li_bat._soh=lakb[0]._s_o_h;
;;;2182   		li_bat._cclv=lakb[0]._c_c_l_v/10;
;;;2183   		li_bat._Tb=lakb[0]._max_cell_temp;
;;;2184   		li_bat._rbt=lakb[0]._r_b_t;
;;;2185   		}
;;;2186   	else 
;;;2187   		{
;;;2188   		li_bat._Ub=bat[0]._Ub;
;;;2189   		li_bat._Ib=bat[0]._Ib/10;
;;;2190   		li_bat._Tb=bat[0]._Tb;
;;;2191   		}
;;;2192   
;;;2193   	if((li_bat._485Error)||(li_bat._canError))
;;;2194   		{
;;;2195   		li_bat._batStat=bsOFF;
;;;2196   		}
;;;2197   	else li_bat._batStat=bsOK;
;;;2198   	}
;;;2199   else if(BAT_TYPE==2) //SACRED SUN
;;;2200   	{
;;;2201   	}
;;;2202   else if(BAT_TYPE==3) //ZTT
;;;2203   	{
;;;2204   	if(li_bat._batStat==bsOK)
;;;2205   		{
;;;2206   
;;;2207   		}
;;;2208   	}
;;;2209   #endif
;;;2210   
;;;2211   
;;;2212   /*
;;;2213   if((BAT_IS_ON[0]==bisON)&&(BAT_TYPE[0]==1)&&(BAT_LINK==0))
;;;2214   	{
;;;2215   
;;;2216   
;;;2217   	if(bat_drv_rx_buff[13]<=0x39)bbb[0]=bat_drv_rx_buff[13]-0x30;
;;;2218   	else bbb[0]=bat_drv_rx_buff[13]-55;
;;;2219   	if(bat_drv_rx_buff[14]<=0x39)bbb[1]=bat_drv_rx_buff[14]-0x30;
;;;2220   	else bbb[1]=bat_drv_rx_buff[14]-55;
;;;2221   	if(bat_drv_rx_buff[15]<=0x39)bbb[2]=bat_drv_rx_buff[15]-0x30;
;;;2222   	else bbb[2]=bat_drv_rx_buff[15]-55;
;;;2223   	if(bat_drv_rx_buff[16]<=0x39)bbb[3]=bat_drv_rx_buff[16]-0x30;
;;;2224   	else bbb[3]=bat_drv_rx_buff[16]-55;
;;;2225   
;;;2226   	tempSS=0;
;;;2227   	tempSS=((bbb[0]*4096)+(bbb[1]*256)+(bbb[2]*16)+bbb[3]);
;;;2228   
;;;2229   	bat[0]._max_cell_volt=(tempSS+5)/10;
;;;2230   
;;;2231   	if(bat_drv_rx_buff[17]<=0x39)bbb[0]=bat_drv_rx_buff[17]-0x30;
;;;2232   	else bbb[0]=bat_drv_rx_buff[17]-55;
;;;2233   	if(bat_drv_rx_buff[18]<=0x39)bbb[1]=bat_drv_rx_buff[18]-0x30;
;;;2234   	else bbb[1]=bat_drv_rx_buff[18]-55;
;;;2235   	if(bat_drv_rx_buff[19]<=0x39)bbb[2]=bat_drv_rx_buff[19]-0x30;
;;;2236   	else bbb[2]=bat_drv_rx_buff[19]-55;
;;;2237   	if(bat_drv_rx_buff[20]<=0x39)bbb[3]=bat_drv_rx_buff[20]-0x30;
;;;2238   	else bbb[3]=bat_drv_rx_buff[20]-55;
;;;2239   
;;;2240   	tempSS=0;
;;;2241   	tempSS=((bbb[0]*4096)+(bbb[1]*256)+(bbb[2]*16)+bbb[3]);
;;;2242   
;;;2243   	bat[0]._min_cell_volt=(tempSS+5)/10;
;;;2244   
;;;2245   
;;;2246   	}*/
;;;2247   
;;;2248   
;;;2249   
;;;2250   }
00159a  e8bd8ffe          POP      {r1-r11,pc}
;;;2251   
                          ENDP

                  mnemo_hndl PROC
;;;2252   //-----------------------------------------------
;;;2253   void mnemo_hndl(void)
00159e  4a3c              LDR      r2,|L1.5776|
;;;2254   {
;;;2255   if(((ind==iMn_220)||(ind==iMn))&&(sub_ind==0)&&(MNEMO_ON==mnON))
;;;2256   	{
;;;2257   	if(mnemo_cnt)mnemo_cnt--;
0015a0  493c              LDR      r1,|L1.5780|
0015a2  7810              LDRB     r0,[r2,#0]            ;2255  ; a_ind
0015a4  2804              CMP      r0,#4                 ;2255
0015a6  d001              BEQ      |L1.5548|
0015a8  2801              CMP      r0,#1                 ;2255
0015aa  d105              BNE      |L1.5560|
                  |L1.5548|
0015ac  7850              LDRB     r0,[r2,#1]            ;2255  ; a_ind
0015ae  b918              CBNZ     r0,|L1.5560|
0015b0  4839              LDR      r0,|L1.5784|
0015b2  7800              LDRB     r0,[r0,#0]            ;2255  ; MNEMO_ON
0015b4  2855              CMP      r0,#0x55              ;2255
0015b6  d003              BEQ      |L1.5568|
                  |L1.5560|
;;;2258   	}
;;;2259   else mnemo_cnt=MNEMO_TIME;
0015b8  4838              LDR      r0,|L1.5788|
0015ba  8800              LDRH     r0,[r0,#0]  ; MNEMO_TIME
0015bc  7008              STRB     r0,[r1,#0]
                  |L1.5566|
;;;2260   }
0015be  4770              BX       lr
                  |L1.5568|
0015c0  7808              LDRB     r0,[r1,#0]            ;2257  ; mnemo_cnt
0015c2  2800              CMP      r0,#0                 ;2257
0015c4  d0fb              BEQ      |L1.5566|
0015c6  f1a00001          SUB      r0,r0,#1              ;2257
0015ca  7008              STRB     r0,[r1,#0]            ;2257
0015cc  4770              BX       lr
;;;2261   
                          ENDP

                  adc_init PROC
;;;2262   //-----------------------------------------------
;;;2263   void adc_init(void)
0015ce  4834              LDR      r0,|L1.5792|
;;;2264   {
;;;2265   
;;;2266   SET_REG(LPC_PINCON->PINSEL1,1,(25-16)*2,2);
0015d0  6841              LDR      r1,[r0,#4]
0015d2  f4212140          BIC      r1,r1,#0xc0000
0015d6  f4412180          ORR      r1,r1,#0x40000
0015da  6041              STR      r1,[r0,#4]
;;;2267   SET_REG(LPC_PINCON->PINSEL1,1,(24-16)*2,2);
0015dc  6841              LDR      r1,[r0,#4]
0015de  f4213140          BIC      r1,r1,#0x30000
0015e2  f4413180          ORR      r1,r1,#0x10000
0015e6  6041              STR      r1,[r0,#4]
;;;2268   SET_REG(LPC_PINCON->PINSEL1,1,(23-16)*2,2);
0015e8  6841              LDR      r1,[r0,#4]
0015ea  f4214140          BIC      r1,r1,#0xc000
0015ee  f4414180          ORR      r1,r1,#0x4000
0015f2  6041              STR      r1,[r0,#4]
;;;2269   
;;;2270   
;;;2271   SET_REG(LPC_PINCON->PINMODE1,2,(25-16)*2,2);
0015f4  6c41              LDR      r1,[r0,#0x44]
0015f6  f4212140          BIC      r1,r1,#0xc0000
0015fa  f4412100          ORR      r1,r1,#0x80000
0015fe  6441              STR      r1,[r0,#0x44]
;;;2272   SET_REG(LPC_PINCON->PINMODE1,2,(24-16)*2,2);
001600  6c41              LDR      r1,[r0,#0x44]
001602  f4213140          BIC      r1,r1,#0x30000
001606  f4413100          ORR      r1,r1,#0x20000
00160a  6441              STR      r1,[r0,#0x44]
;;;2273   SET_REG(LPC_PINCON->PINMODE1,2,(23-16)*2,2);
00160c  6c41              LDR      r1,[r0,#0x44]
00160e  f4214140          BIC      r1,r1,#0xc000
001612  f4414100          ORR      r1,r1,#0x8000
001616  6441              STR      r1,[r0,#0x44]
;;;2274   
;;;2275   SET_REG(LPC_ADC->ADCR,0,24,3);
001618  4822              LDR      r0,|L1.5796|
00161a  6801              LDR      r1,[r0,#0]
00161c  f02161e0          BIC      r1,r1,#0x7000000
001620  6001              STR      r1,[r0,#0]
;;;2276   
;;;2277   SET_REG(LPC_ADC->ADCR,1,21,1);
001622  6801              LDR      r1,[r0,#0]
001624  f4411100          ORR      r1,r1,#0x200000
001628  6001              STR      r1,[r0,#0]
;;;2278   SET_REG(LPC_ADC->ADCR,0,16,1);
00162a  6801              LDR      r1,[r0,#0]
00162c  f4213180          BIC      r1,r1,#0x10000
001630  6001              STR      r1,[r0,#0]
;;;2279   SET_REG(LPC_ADC->ADCR,1,8,8);
001632  6801              LDR      r1,[r0,#0]
001634  f421417f          BIC      r1,r1,#0xff00
001638  f4417180          ORR      r1,r1,#0x100
00163c  6001              STR      r1,[r0,#0]
;;;2280   
;;;2281   //SET_REG(LPC_GPIO0->FIODIR,7,5,3);
;;;2282   //SET_REG(LPC_GPIO0->FIOPIN,4,5,3);
;;;2283   	
;;;2284   	/*if(adc_ch<=7)*///SET_REG(LPC_ADC->ADCR,1<<5,0,8);
;;;2285        /*else if(adc_ch==8) SET_REG(LPC_ADC->ADCR,1<<2,0,8);
;;;2286        else SET_REG(LPC_ADC->ADCR,1<<4,0,8);*/
;;;2287   
;;;2288   LPC_ADC->ADINTEN     =  (1<< 8);      /* global enable interrupt            */
00163e  f44f7180          MOV      r1,#0x100
001642  60c1              STR      r1,[r0,#0xc]
001644  4818              LDR      r0,|L1.5800|
001646  f44f0180          MOV      r1,#0x400000
00164a  6001              STR      r1,[r0,#0]
;;;2289   
;;;2290   NVIC_EnableIRQ(ADC_IRQn);             /* enable ADC Interrupt               */
;;;2291   
;;;2292   
;;;2293   }
00164c  4770              BX       lr
00164e  0000              DCW      0x0000
                  |L1.5712|
                          DCD      net_U
                  |L1.5716|
                          DCD      eb2_data_short
                  |L1.5720|
                          DCD      Kvv_eb2
                  |L1.5724|
                          DCD      Uvv_eb2
                  |L1.5728|
                          DCD      Kpes_eb2
                  |L1.5732|
                          DCD      Upes_eb2
                  |L1.5736|
                          DCD      t_ext
                  |L1.5740|
                          DCD      ibt
                  |L1.5744|
                          DCD      t_box
                  |L1.5748|
                          DCD      t_ext_can_nd
                  |L1.5752|
                          DCD      t_ext_can
                  |L1.5756|
                          DCD      BAT_IS_ON
                  |L1.5760|
                          DCD      load_I
                  |L1.5764|
                          DCD      Isumm
                  |L1.5768|
                          DCD      NUMINV
                  |L1.5772|
                          DCD      inv
                  |L1.5776|
                          DCD      a_ind
                  |L1.5780|
                          DCD      mnemo_cnt
                  |L1.5784|
                          DCD      MNEMO_ON
                  |L1.5788|
                          DCD      MNEMO_TIME
                  |L1.5792|
                          DCD      0x4002c000
                  |L1.5796|
                          DCD      0x40034000
                  |L1.5800|
                          DCD      0xe000e100
                          ENDP

                  adc_drv7 PROC
;;;2295   //-----------------------------------------------
;;;2296   void adc_drv7(void) //(U - )
0016ac  e92d41f0          PUSH     {r4-r8,lr}
;;;2297   {
;;;2298   //int temp_S;
;;;2299   //char i;
;;;2300   //signed short temp_SS;
;;;2301   
;;;2302   adc_self_ch_disp[0]=abs_pal(adc_self_ch_buff[1]-adc_self_ch_buff[0]);//adc_self_ch_buff[0]&0x0f80;
0016b0  4cff              LDR      r4,|L1.6832|
0016b2  8860              LDRH     r0,[r4,#2]  ; adc_self_ch_buff
0016b4  8821              LDRH     r1,[r4,#0]  ; adc_self_ch_buff
0016b6  1a40              SUBS     r0,r0,r1
0016b8  b200              SXTH     r0,r0
0016ba  f7fffffe          BL       abs_pal
0016be  1da6              ADDS     r6,r4,#6
0016c0  8030              STRH     r0,[r6,#0]
;;;2303   adc_self_ch_disp[1]=abs_pal(adc_self_ch_buff[2]-adc_self_ch_buff[1]);//adc_self_ch_buff[1]&0x0f80;
0016c2  88a0              LDRH     r0,[r4,#4]  ; adc_self_ch_buff
0016c4  8861              LDRH     r1,[r4,#2]  ; adc_self_ch_buff
0016c6  1a40              SUBS     r0,r0,r1
0016c8  b200              SXTH     r0,r0
0016ca  f7fffffe          BL       abs_pal
0016ce  8070              STRH     r0,[r6,#2]
;;;2304   adc_self_ch_disp[2]=abs_pal(adc_self_ch_buff[2]-adc_self_ch_buff[0]);//adc_self_ch_buff[2]&0x0f80;
0016d0  88a0              LDRH     r0,[r4,#4]  ; adc_self_ch_buff
0016d2  8821              LDRH     r1,[r4,#0]  ; adc_self_ch_buff
0016d4  1a40              SUBS     r0,r0,r1
0016d6  b200              SXTH     r0,r0
0016d8  f7fffffe          BL       abs_pal
0016dc  80b0              STRH     r0,[r6,#4]
;;;2305   
;;;2306   //adc_self_ch_disp[0]=adc_self_ch_buff[0]&0x0ff0;
;;;2307   //adc_self_ch_disp[1]=adc_self_ch_buff[1]&0x0ff0;
;;;2308   //adc_self_ch_disp[2]=adc_self_ch_buff[2]&0x0ff0;
;;;2309   
;;;2310   
;;;2311   if(adc_self_ch_disp[2]<300)//==adc_self_ch_disp[2])
0016de  f44f7196          MOV      r1,#0x12c
;;;2312   	{
;;;2313   	adc_result=adc_self_ch_buff[2];
0016e2  f1a4059a          SUB      r5,r4,#0x9a
0016e6  4288              CMP      r0,r1                 ;2311
0016e8  da02              BGE      |L1.5872|
0016ea  88a0              LDRH     r0,[r4,#4]  ; adc_self_ch_buff
0016ec  8568              STRH     r0,[r5,#0x2a]
0016ee  e00c              B        |L1.5898|
                  |L1.5872|
;;;2314   	} 
;;;2315   else if(adc_self_ch_disp[1]<300)//==adc_self_ch_disp[2])
0016f0  f9b60002          LDRSH    r0,[r6,#2]  ; adc_self_ch_disp
0016f4  4288              CMP      r0,r1
0016f6  da02              BGE      |L1.5886|
;;;2316   	{
;;;2317   	adc_result=adc_self_ch_buff[1];
0016f8  8860              LDRH     r0,[r4,#2]  ; adc_self_ch_buff
0016fa  8568              STRH     r0,[r5,#0x2a]
0016fc  e005              B        |L1.5898|
                  |L1.5886|
;;;2318   	}
;;;2319   else if(adc_self_ch_disp[0]<300)//==adc_self_ch_disp[1])
0016fe  f9b60000          LDRSH    r0,[r6,#0]  ; adc_self_ch_disp
001702  4288              CMP      r0,r1
001704  da01              BGE      |L1.5898|
;;;2320   	{
;;;2321   	adc_result=adc_self_ch_buff[0];
001706  8820              LDRH     r0,[r4,#0]  ; adc_self_ch_buff
001708  8568              STRH     r0,[r5,#0x2a]
                  |L1.5898|
;;;2322   	}
;;;2323       //adc_result=92;
;;;2324   
;;;2325   if(adc_ch_net)
00170a  78af              LDRB     r7,[r5,#2]  ; adc_ch_net
00170c  2600              MOVS     r6,#0
00170e  b32f              CBZ      r7,|L1.5980|
;;;2326   	{
;;;2327   
;;;2328   	main_power_buffer[0]+=(long)(adc_result);
001710  48e8              LDR      r0,|L1.6836|
001712  f9b5102a          LDRSH    r1,[r5,#0x2a]  ; adc_result
001716  6802              LDR      r2,[r0,#0]  ; main_power_buffer
001718  440a              ADD      r2,r2,r1
00171a  6002              STR      r2,[r0,#0]  ; main_power_buffer
;;;2329   	main_power_buffer[1]+=(long)(adc_result);
00171c  6842              LDR      r2,[r0,#4]  ; main_power_buffer
00171e  440a              ADD      r2,r2,r1
001720  6042              STR      r2,[r0,#4]  ; main_power_buffer
;;;2330   	main_power_buffer[2]+=(long)(adc_result);
001722  6882              LDR      r2,[r0,#8]  ; main_power_buffer
001724  440a              ADD      r2,r2,r1
001726  6082              STR      r2,[r0,#8]  ; main_power_buffer
;;;2331   	main_power_buffer[3]+=(long)(adc_result);
001728  68c2              LDR      r2,[r0,#0xc]  ; main_power_buffer
00172a  4411              ADD      r1,r1,r2
00172c  60c1              STR      r1,[r0,#0xc]  ; main_power_buffer
;;;2332   
;;;2333   	adc_net_buff_cnt++;
00172e  8e69              LDRH     r1,[r5,#0x32]  ; adc_net_buff_cnt
001730  f1010101          ADD      r1,r1,#1
001734  b209              SXTH     r1,r1
001736  8669              STRH     r1,[r5,#0x32]
;;;2334   	if(adc_net_buff_cnt>=0x1000)
001738  f5b15f80          CMP      r1,#0x1000
00173c  db00              BLT      |L1.5952|
;;;2335   		{
;;;2336   		adc_net_buff_cnt=0;
00173e  866e              STRH     r6,[r5,#0x32]
                  |L1.5952|
;;;2337   		}
;;;2338   	if((adc_net_buff_cnt&0x03ff)==0)
001740  f9b51032          LDRSH    r1,[r5,#0x32]  ; adc_net_buff_cnt
001744  058a              LSLS     r2,r1,#22
001746  d131              BNE      |L1.6060|
;;;2339   		{
;;;2340   		#ifdef UKU_220
;;;2341   		net_buff_=(short)((main_power_buffer[adc_net_buff_cnt>>10])>>11);
;;;2342   		#else
;;;2343   		#ifdef UKU_220_V2
;;;2344   		net_buff_=(short)((main_power_buffer[adc_net_buff_cnt>>10])>>11);
;;;2345   		#else
;;;2346   		net_buff_=(short)((main_power_buffer[adc_net_buff_cnt>>10])>>8);
001748  ea4f21a1          ASR      r1,r1,#10
00174c  f8502021          LDR      r2,[r0,r1,LSL #2]
001750  ea4f2222          ASR      r2,r2,#8
001754  852a              STRH     r2,[r5,#0x28]
;;;2347   		#endif
;;;2348   		#endif
;;;2349   		main_power_buffer[adc_net_buff_cnt>>10]=0;
001756  f8406021          STR      r6,[r0,r1,LSL #2]
00175a  e027              B        |L1.6060|
                  |L1.5980|
;;;2350   		}
;;;2351   
;;;2352   
;;;2353   	} 
;;;2354   else if(!adc_ch_net)
;;;2355   	{
;;;2356   	adc_buff[adc_ch][adc_ch_cnt]=(long)adc_result;
00175c  48d6              LDR      r0,|L1.6840|
00175e  78ec              LDRB     r4,[r5,#3]  ; adc_ch
001760  792a              LDRB     r2,[r5,#4]  ; adc_ch_cnt
001762  eb001384          ADD      r3,r0,r4,LSL #6
001766  f9b5102a          LDRSH    r1,[r5,#0x2a]  ; adc_result
00176a  f8431022          STR      r1,[r3,r2,LSL #2]
;;;2357   	
;;;2358   	if((adc_ch_cnt&0x03)==0)
00176e  0790              LSLS     r0,r2,#30
001770  d10f              BNE      |L1.6034|
;;;2359   		{
;;;2360   		long temp_L;
;;;2361   		char i;
;;;2362   		temp_L=0;
001772  4601              MOV      r1,r0
                  |L1.6004|
;;;2363   		for(i=0;i<16;i++)
;;;2364   			{
;;;2365   			temp_L+=adc_buff[adc_ch][i];
001774  f853c020          LDR      r12,[r3,r0,LSL #2]
001778  4461              ADD      r1,r1,r12
00177a  f1000001          ADD      r0,r0,#1              ;2363
00177e  b2c0              UXTB     r0,r0                 ;2363
001780  2810              CMP      r0,#0x10              ;2363
001782  d3f7              BCC      |L1.6004|
;;;2366   			}
;;;2367   		adc_buff_[adc_ch]= (short)(temp_L>>4);
001784  ea4f1021          ASR      r0,r1,#4
001788  49ca              LDR      r1,|L1.6836|
00178a  f1a10120          SUB      r1,r1,#0x20
00178e  f8210014          STRH     r0,[r1,r4,LSL #1]
                  |L1.6034|
;;;2368   
;;;2369   		//adc_buff_[3]=346;
;;;2370   		}
;;;2371   	if(++adc_ch>=16) 
001792  1c64              ADDS     r4,r4,#1
001794  b2e0              UXTB     r0,r4
001796  70e8              STRB     r0,[r5,#3]
001798  2810              CMP      r0,#0x10
00179a  d307              BCC      |L1.6060|
;;;2372   		{
;;;2373   		adc_ch=0;
00179c  70ee              STRB     r6,[r5,#3]
;;;2374   		adc_ch_cnt++;
00179e  f1020201          ADD      r2,r2,#1
0017a2  b2d0              UXTB     r0,r2
0017a4  7128              STRB     r0,[r5,#4]
;;;2375   		if(adc_ch_cnt>=16)adc_ch_cnt=0;
0017a6  2810              CMP      r0,#0x10
0017a8  d300              BCC      |L1.6060|
0017aa  712e              STRB     r6,[r5,#4]
                  |L1.6060|
;;;2376   		}
;;;2377   	}
;;;2378   
;;;2379   //adc_buff[adc_ch][adc_cnt1]=(adc_self_ch_buff[2]+adc_self_ch_buff[1])/2;
;;;2380   
;;;2381   //if(adc_buff[adc_ch][adc_cnt1]<adc_buff_min[adc_ch])adc_buff_min[adc_ch]=adc_buff[adc_ch][adc_cnt1];
;;;2382   //if(adc_buff[adc_ch][adc_cnt1]>adc_buff_max[adc_ch])adc_buff_max[adc_ch]=adc_buff[adc_ch][adc_cnt1];
;;;2383   /*
;;;2384   	{
;;;2385   	if((adc_cnt1&0x03)==0)
;;;2386   		{
;;;2387   		temp_S=0;
;;;2388   		for(i=0;i<16;i++)
;;;2389   			{
;;;2390   			temp_S+=adc_buff[adc_ch][i];
;;;2391   			} 
;;;2392            	adc_buff_[adc_ch]=temp_S>>4;
;;;2393             }
;;;2394   	}*/
;;;2395   
;;;2396   
;;;2397   		  
;;;2398   
;;;2399   adc_self_ch_cnt=0;
0017ac  706e              STRB     r6,[r5,#1]
;;;2400   
;;;2401   adc_ch_net++;
0017ae  f1070701          ADD      r7,r7,#1
;;;2402   adc_ch_net&=1;
0017b2  f0070001          AND      r0,r7,#1
0017b6  70a8              STRB     r0,[r5,#2]
;;;2403   
;;;2404   //SET_REG(LPC_GPIO0->FIODIR,7,5,3);
;;;2405   //SET_REG(LPC_GPIO0->FIOPIN,adc_ch,5,3);
;;;2406   
;;;2407   if(adc_ch_net)
;;;2408   	{
;;;2409   	//LPC_GPIO2->FIODIR|=(1<<7);
;;;2410   	//LPC_GPIO2->FIOPIN|=(1<<7);
;;;2411   	SET_REG(LPC_ADC->ADCR,1<<2,0,8);
0017b8  4ac0              LDR      r2,|L1.6844|
0017ba  b130              CBZ      r0,|L1.6090|
0017bc  6810              LDR      r0,[r2,#0]
0017be  f02000ff          BIC      r0,r0,#0xff
0017c2  f1000004          ADD      r0,r0,#4
0017c6  6010              STR      r0,[r2,#0]
0017c8  e03d              B        |L1.6214|
                  |L1.6090|
;;;2412   	}
;;;2413   else
;;;2414   	{
;;;2415   	//LPC_GPIO2->FIODIR|=(1<<7);
;;;2416   	//LPC_GPIO2->FIOPIN&=~(1<<7);
;;;2417   	if(!(adc_ch&(1<<3)))SET_REG(LPC_ADC->ADCR,1<<0,0,8);
0017ca  78e9              LDRB     r1,[r5,#3]  ; adc_ch
0017cc  0708              LSLS     r0,r1,#28
0017ce  d406              BMI      |L1.6110|
0017d0  6810              LDR      r0,[r2,#0]
0017d2  f02000ff          BIC      r0,r0,#0xff
0017d6  f1000001          ADD      r0,r0,#1
0017da  6010              STR      r0,[r2,#0]
0017dc  e005              B        |L1.6122|
                  |L1.6110|
;;;2418   	else 			SET_REG(LPC_ADC->ADCR,1<<1,0,8);
0017de  6810              LDR      r0,[r2,#0]
0017e0  f02000ff          BIC      r0,r0,#0xff
0017e4  f1000002          ADD      r0,r0,#2
0017e8  6010              STR      r0,[r2,#0]
                  |L1.6122|
;;;2419   
;;;2420   
;;;2421   	SET_REG(LPC_GPIO0->FIODIR,1,28,1);
0017ea  48b5              LDR      r0,|L1.6848|
0017ec  6803              LDR      r3,[r0,#0]
0017ee  f0435380          ORR      r3,r3,#0x10000000
0017f2  6003              STR      r3,[r0,#0]
;;;2422   	SET_REG(LPC_GPIO1->FIODIR,1,30,1);
0017f4  6a03              LDR      r3,[r0,#0x20]
0017f6  f0434380          ORR      r3,r3,#0x40000000
0017fa  6203              STR      r3,[r0,#0x20]
;;;2423   	SET_REG(LPC_GPIO3->FIODIR,1,26,1);
0017fc  6e03              LDR      r3,[r0,#0x60]
0017fe  f0436380          ORR      r3,r3,#0x4000000
001802  6603              STR      r3,[r0,#0x60]
;;;2424   
;;;2425   	if(!(adc_ch&(1<<0)))SET_REG(LPC_GPIO0->FIOPIN,0,28,1);
001804  07cb              LSLS     r3,r1,#31
001806  d00a              BEQ      |L1.6174|
;;;2426   	else 			SET_REG(LPC_GPIO0->FIOPIN,1,28,1);
001808  6943              LDR      r3,[r0,#0x14]
00180a  f0435380          ORR      r3,r3,#0x10000000
00180e  6143              STR      r3,[r0,#0x14]
                  |L1.6160|
;;;2427   
;;;2428   	if(!(adc_ch&(1<<1)))SET_REG(LPC_GPIO1->FIOPIN,0,30,1);
001810  078b              LSLS     r3,r1,#30
001812  d409              BMI      |L1.6184|
001814  6b43              LDR      r3,[r0,#0x34]
001816  f0234380          BIC      r3,r3,#0x40000000
00181a  6343              STR      r3,[r0,#0x34]
00181c  e008              B        |L1.6192|
                  |L1.6174|
00181e  6943              LDR      r3,[r0,#0x14]         ;2425
001820  f0235380          BIC      r3,r3,#0x10000000     ;2425
001824  6143              STR      r3,[r0,#0x14]         ;2425
001826  e7f3              B        |L1.6160|
                  |L1.6184|
;;;2429   	else 			SET_REG(LPC_GPIO1->FIOPIN,1,30,1);
001828  6b43              LDR      r3,[r0,#0x34]
00182a  f0434380          ORR      r3,r3,#0x40000000
00182e  6343              STR      r3,[r0,#0x34]
                  |L1.6192|
;;;2430   
;;;2431   	if(!(adc_ch&(1<<2)))SET_REG(LPC_GPIO3->FIOPIN,0,26,1);
001830  0749              LSLS     r1,r1,#29
001832  d404              BMI      |L1.6206|
001834  6f41              LDR      r1,[r0,#0x74]
001836  f0216180          BIC      r1,r1,#0x4000000
00183a  6741              STR      r1,[r0,#0x74]
00183c  e003              B        |L1.6214|
                  |L1.6206|
;;;2432   	else 			SET_REG(LPC_GPIO3->FIOPIN,1,26,1);
00183e  6f41              LDR      r1,[r0,#0x74]
001840  f0416180          ORR      r1,r1,#0x4000000
001844  6741              STR      r1,[r0,#0x74]
                  |L1.6214|
;;;2433   	}
;;;2434   	
;;;2435   
;;;2436   
;;;2437   
;;;2438   LPC_ADC->ADCR |=  (1<<24);
001846  6810              LDR      r0,[r2,#0]
001848  f0407080          ORR      r0,r0,#0x1000000
00184c  6010              STR      r0,[r2,#0]
                  |L1.6222|
;;;2439   
;;;2440   }
00184e  e8bd81f0          POP      {r4-r8,pc}
;;;2441   
                          ENDP

                  avg_hndl PROC
;;;2698   //-----------------------------------------------
;;;2699   void avg_hndl(void)
001852  b5f0              PUSH     {r4-r7,lr}
;;;2700   { 
;;;2701   char i;
;;;2702   
;;;2703   //#define AVGCNTMAX	5
;;;2704   if(avg_main_cnt)
001854  4c96              LDR      r4,|L1.6832|
001856  3c9a              SUBS     r4,r4,#0x9a
001858  f9b40024          LDRSH    r0,[r4,#0x24]  ; avg_main_cnt
00185c  b118              CBZ      r0,|L1.6246|
;;;2705   	{
;;;2706   	avg_main_cnt--;
00185e  f1a00001          SUB      r0,r0,#1
001862  84a0              STRH     r0,[r4,#0x24]
;;;2707   	goto avg_hndl_end;
001864  e090              B        |L1.6536|
                  |L1.6246|
;;;2708   	}                 
;;;2709   
;;;2710   avg_num=0;
001866  f04f0500          MOV      r5,#0
00186a  72e5              STRB     r5,[r4,#0xb]
;;;2711   
;;;2712   for(i=0;i<NUMIST;i++)
00186c  4628              MOV      r0,r5
00186e  4996              LDR      r1,|L1.6856|
;;;2713   	{
;;;2714   	if((bps[i]._state==bsWRK)&&(bps[i]._cnt<20))avg_num++;
001870  4b94              LDR      r3,|L1.6852|
001872  f9b12000          LDRSH    r2,[r1,#0]            ;2712
001876  e012              B        |L1.6302|
                  |L1.6264|
001878  ebc001c0          RSB      r1,r0,r0,LSL #3
00187c  eb011100          ADD      r1,r1,r0,LSL #4
001880  eb030181          ADD      r1,r3,r1,LSL #2
001884  788e              LDRB     r6,[r1,#2]
001886  2e01              CMP      r6,#1
001888  d106              BNE      |L1.6296|
00188a  78c9              LDRB     r1,[r1,#3]
00188c  2914              CMP      r1,#0x14
00188e  d203              BCS      |L1.6296|
001890  7ae1              LDRB     r1,[r4,#0xb]  ; avg_num
001892  f1010101          ADD      r1,r1,#1
001896  72e1              STRB     r1,[r4,#0xb]
                  |L1.6296|
001898  f1000001          ADD      r0,r0,#1              ;2712
00189c  b2c0              UXTB     r0,r0                 ;2712
                  |L1.6302|
00189e  4290              CMP      r0,r2                 ;2712
0018a0  dbea              BLT      |L1.6264|
;;;2715   	}
;;;2716   
;;;2717   /*if((K[NUMI]>=1)&&(bps_state[0]==ssWRK))	avg_num++;
;;;2718   if((K[NUMI]>=2)&&(bps_state[1]==ssWRK))	avg_num++;
;;;2719   if((K[NUMI]>=3)&&(bps_state[2]==ssWRK))	avg_num++;*/
;;;2720   
;;;2721   	
;;;2722   if(avg_num<2)
0018a2  7ae6              LDRB     r6,[r4,#0xb]  ; avg_num
0018a4  2e02              CMP      r6,#2
0018a6  d36f              BCC      |L1.6536|
;;;2723   	{
;;;2724   	goto avg_hndl_end;
;;;2725   	}
;;;2726   	
;;;2727   else
;;;2728   	{
;;;2729   	i_avg_min=5000;
0018a8  f2413088          MOV      r0,#0x1388
0018ac  67a0              STR      r0,[r4,#0x78]  ; i_avg_min
;;;2730   	i_avg_max=0;
0018ae  6765              STR      r5,[r4,#0x74]  ; i_avg_max
;;;2731   	i_avg_summ=0;
0018b0  67e5              STR      r5,[r4,#0x7c]  ; i_avg_summ
;;;2732   	for(i=0;i<NUMIST;i++)
0018b2  f04f0100          MOV      r1,#0
0018b6  e017              B        |L1.6376|
                  |L1.6328|
;;;2733   		{
;;;2734   		if(bps[i]._state==bsWRK)
0018b8  ebc100c1          RSB      r0,r1,r1,LSL #3
0018bc  eb001001          ADD      r0,r0,r1,LSL #4
0018c0  eb030080          ADD      r0,r3,r0,LSL #2
0018c4  7887              LDRB     r7,[r0,#2]
0018c6  2f01              CMP      r7,#1
0018c8  d10b              BNE      |L1.6370|
;;;2735   			{
;;;2736   			if(bps[i]._Ii>i_avg_max)i_avg_max=bps[i]._Ii;
0018ca  6a40              LDR      r0,[r0,#0x24]
0018cc  6f67              LDR      r7,[r4,#0x74]  ; i_avg_max
0018ce  42b8              CMP      r0,r7
0018d0  dd00              BLE      |L1.6356|
0018d2  6760              STR      r0,[r4,#0x74]  ; i_avg_max
                  |L1.6356|
;;;2737   			if(bps[i]._Ii<i_avg_min)i_avg_min=bps[i]._Ii;
0018d4  6fa7              LDR      r7,[r4,#0x78]  ; i_avg_min
0018d6  42b8              CMP      r0,r7
0018d8  da00              BGE      |L1.6364|
0018da  67a0              STR      r0,[r4,#0x78]  ; i_avg_min
                  |L1.6364|
;;;2738   			
;;;2739   			i_avg_summ+=bps[i]._Ii;
0018dc  6fe7              LDR      r7,[r4,#0x7c]  ; i_avg_summ
0018de  4438              ADD      r0,r0,r7
0018e0  67e0              STR      r0,[r4,#0x7c]  ; i_avg_summ
                  |L1.6370|
0018e2  f1010101          ADD      r1,r1,#1              ;2732
0018e6  b2c9              UXTB     r1,r1                 ;2732
                  |L1.6376|
0018e8  4291              CMP      r1,r2                 ;2732
0018ea  dbe5              BLT      |L1.6328|
;;;2740   			}
;;;2741   		}
;;;2742   	i_avg=i_avg_summ/avg_num;	
0018ec  6fe0              LDR      r0,[r4,#0x7c]  ; i_avg_summ
0018ee  4f70              LDR      r7,|L1.6832|
0018f0  fb90f6f6          SDIV     r6,r0,r6
0018f4  3f1a              SUBS     r7,r7,#0x1a
0018f6  603e              STR      r6,[r7,#0]  ; i_avg
;;;2743   	
;;;2744   	if(i_avg_min==0)i_avg_min=1;
0018f8  6fa0              LDR      r0,[r4,#0x78]  ; i_avg_min
0018fa  2101              MOVS     r1,#1                 ;2714
0018fc  b900              CBNZ     r0,|L1.6400|
0018fe  67a1              STR      r1,[r4,#0x78]  ; i_avg_min
                  |L1.6400|
;;;2745   
;;;2746   	avg=i_avg_max;
001900  6f60              LDR      r0,[r4,#0x74]  ; i_avg_max
;;;2747   	avg*=100;
001902  f04f0c64          MOV      r12,#0x64
001906  fb00f00c          MUL      r0,r0,r12
;;;2748   	avg/=i_avg_min;
00190a  f8d4c078          LDR      r12,[r4,#0x78]  ; i_avg_min
00190e  fb90f0fc          SDIV     r0,r0,r12
001912  6078              STR      r0,[r7,#4]  ; avg
;;;2749   
;;;2750   	if(avg>160) bAVG=1;
001914  28a0              CMP      r0,#0xa0
001916  dd00              BLE      |L1.6426|
001918  72a1              STRB     r1,[r4,#0xa]
                  |L1.6426|
;;;2751   	if(avg<120) bAVG=0;
00191a  2878              CMP      r0,#0x78
00191c  da00              BGE      |L1.6432|
00191e  72a5              STRB     r5,[r4,#0xa]
                  |L1.6432|
;;;2752   
;;;2753   	if(bAVG==1)
001920  7aa0              LDRB     r0,[r4,#0xa]  ; bAVG
001922  2801              CMP      r0,#1
001924  d130              BNE      |L1.6536|
;;;2754   		{
;;;2755   		for(i=0;i<NUMIST;i++)
001926  f04f0100          MOV      r1,#0
;;;2756   			{
;;;2757   			if(bps[i]._state==bsWRK)
;;;2758   				{
;;;2759   				if(bps[i]._Ii>i_avg)bps[i]._x_--;
;;;2760   				if(bps[i]._Ii<i_avg)bps[i]._x_++;
;;;2761   			
;;;2762   				if(bps[i]._x_<-50)bps[i]._x_=-50;
00192a  f06f0431          MVN      r4,#0x31
00192e  e029              B        |L1.6532|
                  |L1.6448|
001930  ebc100c1          RSB      r0,r1,r1,LSL #3       ;2757
001934  eb001001          ADD      r0,r0,r1,LSL #4       ;2757
001938  eb030080          ADD      r0,r3,r0,LSL #2       ;2757
00193c  7885              LDRB     r5,[r0,#2]            ;2757
00193e  2d01              CMP      r5,#1                 ;2757
001940  d11d              BNE      |L1.6526|
001942  6a45              LDR      r5,[r0,#0x24]         ;2759
001944  42b5              CMP      r5,r6                 ;2759
001946  dd05              BLE      |L1.6484|
001948  f8b05050          LDRH     r5,[r0,#0x50]         ;2759
00194c  f1a50501          SUB      r5,r5,#1              ;2759
001950  f8a05050          STRH     r5,[r0,#0x50]         ;2759
                  |L1.6484|
001954  da05              BGE      |L1.6498|
001956  f8b05050          LDRH     r5,[r0,#0x50]         ;2760
00195a  f1050501          ADD      r5,r5,#1              ;2760
00195e  f8a05050          STRH     r5,[r0,#0x50]         ;2760
                  |L1.6498|
001962  f9b05050          LDRSH    r5,[r0,#0x50]
001966  42a5              CMP      r5,r4
001968  da01              BGE      |L1.6510|
00196a  f8a04050          STRH     r4,[r0,#0x50]
                  |L1.6510|
;;;2763   				if(bps[i]._x_>50)bps[i]._x_=50;	
00196e  f9b05050          LDRSH    r5,[r0,#0x50]
001972  2d32              CMP      r5,#0x32
001974  dd03              BLE      |L1.6526|
001976  f04f0532          MOV      r5,#0x32
00197a  f8a05050          STRH     r5,[r0,#0x50]
                  |L1.6526|
00197e  f1010101          ADD      r1,r1,#1              ;2755
001982  b2c9              UXTB     r1,r1                 ;2755
                  |L1.6532|
001984  4291              CMP      r1,r2                 ;2755
001986  dbd3              BLT      |L1.6448|
                  |L1.6536|
;;;2764   				}
;;;2765   			}		
;;;2766   		}			
;;;2767   	}   	 
;;;2768   
;;;2769   
;;;2770   avg_hndl_end:
;;;2771   __nop();  
001988  bf00              NOP      
;;;2772   }
00198a  bdf0              POP      {r4-r7,pc}
;;;2773   
                          ENDP

                  rele_hndl PROC
;;;2786   //*************-----------------------------------------------
;;;2787   void rele_hndl(void)
00198c  e92d41f0          PUSH     {r4-r8,lr}
;;;2788   {
;;;2789   //static char cnt_rel_sam;
;;;2790   //char temp;
;;;2791   
;;;2792   //temp=0;
;;;2793   
;;;2794   
;;;2795   SET_REG(LPC_PINCON->PINSEL0,0,4*2,6*2);
001990  484e              LDR      r0,|L1.6860|
001992  6801              LDR      r1,[r0,#0]
001994  4a4e              LDR      r2,|L1.6864|
001996  ea010102          AND      r1,r1,r2
00199a  6001              STR      r1,[r0,#0]
;;;2796   SET_REG(LPC_GPIO0->FIODIR,63,4,6);
00199c  4c48              LDR      r4,|L1.6848|
00199e  6821              LDR      r1,[r4,#0]
0019a0  f441717c          ORR      r1,r1,#0x3f0
0019a4  6021              STR      r1,[r4,#0]
;;;2797   SET_REG(LPC_PINCON->PINSEL7,0,(25-16)*2,2);
0019a6  69c1              LDR      r1,[r0,#0x1c]
0019a8  f4212140          BIC      r1,r1,#0xc0000
0019ac  61c1              STR      r1,[r0,#0x1c]
;;;2798   SET_REG(LPC_GPIO3->FIODIR,1,25,1);
0019ae  6e21              LDR      r1,[r4,#0x60]
0019b0  f0417100          ORR      r1,r1,#0x2000000
0019b4  6621              STR      r1,[r4,#0x60]
;;;2799   SET_REG(LPC_PINCON->PINSEL1,0,(29-16)*2,2);
0019b6  6841              LDR      r1,[r0,#4]
0019b8  f0216140          BIC      r1,r1,#0xc000000
0019bc  6041              STR      r1,[r0,#4]
;;;2800   SET_REG(LPC_GPIO0->FIODIR,1,29,1);
0019be  6820              LDR      r0,[r4,#0]
0019c0  f0405000          ORR      r0,r0,#0x20000000
0019c4  6020              STR      r0,[r4,#0]
;;;2801   
;;;2802   
;;;2803   
;;;2804   
;;;2805   
;;;2806   
;;;2807   if((((bat[0]._rel_stat)  || (tbatdisable_stat!=tbdsON))&&(tbatdisable_cmnd))	&& (main_1Hz_cnt>5))
0019c6  4844              LDR      r0,|L1.6872|
0019c8  4d42              LDR      r5,|L1.6868|
0019ca  4945              LDR      r1,|L1.6880|
0019cc  7802              LDRB     r2,[r0,#0]  ; tbatdisable_stat
0019ce  4843              LDR      r0,|L1.6876|
0019d0  f895303c          LDRB     r3,[r5,#0x3c]  ; bat
0019d4  f9b11000          LDRSH    r1,[r1,#0]
0019d8  7800              LDRB     r0,[r0,#0]
0019da  4313              ORRS     r3,r3,r2
0019dc  d007              BEQ      |L1.6638|
0019de  b130              CBZ      r0,|L1.6638|
0019e0  2905              CMP      r1,#5
0019e2  dd04              BLE      |L1.6638|
;;;2808   	{
;;;2809   	SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_BAT1,1);
0019e4  69a3              LDR      r3,[r4,#0x18]
0019e6  f4437380          ORR      r3,r3,#0x100
0019ea  61a3              STR      r3,[r4,#0x18]
0019ec  e003              B        |L1.6646|
                  |L1.6638|
;;;2810   	}
;;;2811   else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_BAT1,1);	  	
0019ee  69e3              LDR      r3,[r4,#0x1c]
0019f0  f4437380          ORR      r3,r3,#0x100
0019f4  61e3              STR      r3,[r4,#0x1c]
                  |L1.6646|
;;;2812   
;;;2813   if((((bat[1]._rel_stat) || (tbatdisable_stat!=tbdsON))&&(tbatdisable_cmnd))	&& (main_1Hz_cnt>5))
0019f6  f8953088          LDRB     r3,[r5,#0x88]  ; bat
0019fa  4313              ORRS     r3,r3,r2
0019fc  d007              BEQ      |L1.6670|
0019fe  b130              CBZ      r0,|L1.6670|
001a00  2905              CMP      r1,#5
001a02  dd04              BLE      |L1.6670|
;;;2814   	{
;;;2815   	SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_BAT2,1);
001a04  69a0              LDR      r0,[r4,#0x18]
001a06  f0400040          ORR      r0,r0,#0x40
001a0a  61a0              STR      r0,[r4,#0x18]
001a0c  e003              B        |L1.6678|
                  |L1.6670|
;;;2816   	}
;;;2817   else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_BAT2,1);
001a0e  69e0              LDR      r0,[r4,#0x1c]
001a10  f0400040          ORR      r0,r0,#0x40
001a14  61e0              STR      r0,[r4,#0x1c]
                  |L1.6678|
;;;2818   
;;;2819   
;;;2820   if(mess_find_unvol((MESS2RELE_HNDL))&&(mess_data[0]==PARAM_RELE_SAMOKALIBR)) 
001a16  20d2              MOVS     r0,#0xd2
001a18  f7fffffe          BL       mess_find_unvol
001a1c  4d31              LDR      r5,|L1.6884|
001a1e  b110              CBZ      r0,|L1.6694|
001a20  6828              LDR      r0,[r5,#0]  ; mess_data
001a22  2864              CMP      r0,#0x64
001a24  d06e              BEQ      |L1.6916|
                  |L1.6694|
;;;2821   	{
;;;2822   	if(mess_data[1]==1)SET_REG(LPC_GPIO0->FIOSET,1,29,1);
;;;2823   	else if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,29,1);
;;;2824   	}
;;;2825   else SET_REG(LPC_GPIO0->FIOCLR,1,29,1);
001a26  69e0              LDR      r0,[r4,#0x1c]
001a28  f0405000          ORR      r0,r0,#0x20000000
001a2c  61e0              STR      r0,[r4,#0x1c]
                  |L1.6702|
;;;2826   
;;;2827   
;;;2828   #ifndef UKU2071x
;;;2829   //  
;;;2830   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_NET))
;;;2831   	{
;;;2832   	if(mess_data[1]==0) 			SET_REG(LPC_GPIO3->FIOSET,1,SHIFT_REL_AV_NET,1);
;;;2833   	else 						SET_REG(LPC_GPIO3->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;2834   	}
;;;2835   else	if(!(avar_ind_stat&0x00000001)) 	SET_REG(LPC_GPIO3->FIOSET,1,SHIFT_REL_AV_NET,1);
;;;2836   else 							SET_REG(LPC_GPIO3->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;2837   #endif
;;;2838   #ifdef UKU2071x
;;;2839   //  
;;;2840   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_NET))
001a2e  20d2              MOVS     r0,#0xd2
001a30  f7fffffe          BL       mess_find_unvol
;;;2841   	{
;;;2842   	if(mess_data[1]==0)				SET_REG(LPC_GPIO3->FIOCLR,1,SHIFT_REL_AV_NET,1); 
;;;2843   	else 						SET_REG(LPC_GPIO3->FIOSET,1,SHIFT_REL_AV_NET,1);
;;;2844   	}
;;;2845   else	if(!(avar_ind_stat&0x00000001))	SET_REG(LPC_GPIO3->FIOCLR,1,SHIFT_REL_AV_NET,1);
001a34  4e2c              LDR      r6,|L1.6888|
001a36  b110              CBZ      r0,|L1.6718|
001a38  6828              LDR      r0,[r5,#0]            ;2840  ; mess_data
001a3a  2866              CMP      r0,#0x66              ;2840
001a3c  d074              BEQ      |L1.6952|
                  |L1.6718|
001a3e  6830              LDR      r0,[r6,#0]  ; avar_ind_stat
001a40  07c0              LSLS     r0,r0,#31
001a42  d07d              BEQ      |L1.6976|
;;;2846   else 					  		SET_REG(LPC_GPIO3->FIOSET,1,SHIFT_REL_AV_NET,1);
001a44  6fa0              LDR      r0,[r4,#0x78]
001a46  f0407000          ORR      r0,r0,#0x2000000
001a4a  67a0              STR      r0,[r4,#0x78]
                  |L1.6732|
;;;2847   #endif
;;;2848   
;;;2849   #ifdef UKU_3U
;;;2850   //  
;;;2851   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BAT1))
;;;2852   	{
;;;2853   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT1,1);
;;;2854   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT1,1);
;;;2855        }
;;;2856   else 
;;;2857   	{
;;;2858   	if(!(avar_ind_stat&0x00000002)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT1,1);
;;;2859        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT1,1);
;;;2860   	} 
;;;2861   
;;;2862   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BAT2))
;;;2863   	{
;;;2864   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT2,1);
;;;2865   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT2,1);
;;;2866        }
;;;2867   else 
;;;2868   	{
;;;2869   	if(!(avar_ind_stat&0x00000004)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT2,1);
;;;2870        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT2,1);
;;;2871   	} 
;;;2872   
;;;2873   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BPS))
;;;2874   	{
;;;2875   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
;;;2876   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
;;;2877        }
;;;2878   else 
;;;2879   	{
;;;2880   	if(!(avar_ind_stat&0x000007f8)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
;;;2881        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
;;;2882   	} 
;;;2883   
;;;2884   #endif
;;;2885   
;;;2886   
;;;2887   #ifdef UKU_GLONASS
;;;2888   //  
;;;2889   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BAT1))
;;;2890   	{
;;;2891   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT1,1);
;;;2892   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT1,1);
;;;2893        }
;;;2894   else 
;;;2895   	{
;;;2896   	if(!(avar_ind_stat&0x00000002)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT1,1);
;;;2897        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT1,1);
;;;2898   	} 
;;;2899   
;;;2900   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BAT2))
;;;2901   	{
;;;2902   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT2,1);
;;;2903   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT2,1);
;;;2904        }
;;;2905   else 
;;;2906   	{
;;;2907   	if(!(avar_ind_stat&0x00000004)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT2,1);
;;;2908        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT2,1);
;;;2909   	} 
;;;2910   
;;;2911   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BPS))
;;;2912   	{
;;;2913   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
;;;2914   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
;;;2915        }
;;;2916   else 
;;;2917   	{
;;;2918   	if(!(avar_ind_stat&0x000007f8)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
;;;2919        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
;;;2920   	} 
;;;2921   
;;;2922   #endif
;;;2923   
;;;2924   #ifdef U 
;;;2925   
;;;2926   #endif
;;;2927   
;;;2928   #ifdef UKU_RSTKM
;;;2929   
;;;2930   //  
;;;2931   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_COMM))
;;;2932   	{
;;;2933   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_COMM,1);
;;;2934   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_COMM,1);
;;;2935   	}
;;;2936   else 
;;;2937   	{
;;;2938        if(  (!(avar_ind_stat&0x00007fff))/* &&
;;;2939             ((!SK_REL_EN[0]) || (sk_av_stat[0]!=sasON))  &&
;;;2940             ((!SK_REL_EN[1]) || (sk_av_stat[1]!=sasON))  &&
;;;2941             ((!SK_REL_EN[2]) || (sk_av_stat[2]!=sasON))  &&
;;;2942             ((!SK_REL_EN[3]) || (sk_av_stat[3]!=sasON))*/  )SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_COMM,1);
;;;2943        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_COMM,1);
;;;2944   	}
;;;2945   	
;;;2946   
;;;2947   // 
;;;2948   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_LIGHT))
;;;2949   	{
;;;2950   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LIGHT,1);
;;;2951   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LIGHT,1);
;;;2952        }
;;;2953   else 
;;;2954   	{
;;;2955   	if(sk_av_stat[0]!=sasON) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LIGHT,1);
;;;2956        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LIGHT,1);
;;;2957   	}
;;;2958   
;;;2959   
;;;2960   //  
;;;2961   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_LOAD_OFF))
;;;2962   	{
;;;2963   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LOAD_OFF,1);
;;;2964   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LOAD_OFF,1);
;;;2965        }
;;;2966   else if(tloaddisable_cmnd==0)
;;;2967   	{
;;;2968   	SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LOAD_OFF,1);
;;;2969   	}
;;;2970   else if((tloaddisable_cmnd)&&(tloaddisable_cmnd<=11))
;;;2971   	{
;;;2972   	SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LOAD_OFF,1);
;;;2973   	}
;;;2974   
;;;2975   else 
;;;2976   	{
;;;2977   	if(!(tloaddisable_stat==tldsON)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LOAD_OFF,1);
;;;2978        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LOAD_OFF,1);
;;;2979   	} 
;;;2980   
;;;2981   //  
;;;2982   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_VENT))
;;;2983   	{
;;;2984   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;2985   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT,1);
;;;2986   	}
;;;2987   else 
;;;2988   	{
;;;2989   	if(mixer_vent_stat==mvsOFF) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;2990        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT,1);
;;;2991   	} 
;;;2992   
;;;2993   #endif
;;;2994   
;;;2995   #ifdef UKU_KONTUR
;;;2996   
;;;2997   //  
;;;2998   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_COMM))
;;;2999   	{
;;;3000   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_COMM,1);
;;;3001   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_COMM,1);
;;;3002   	}
;;;3003   else 
;;;3004   	{
;;;3005        if(  (!(avar_ind_stat&0x00007fff)) &&
;;;3006             ((!SK_REL_EN[0]) || (sk_av_stat[0]!=sasON))  &&
;;;3007             ((!SK_REL_EN[1]) || (sk_av_stat[1]!=sasON))  &&
;;;3008             ((!SK_REL_EN[2]) || (sk_av_stat[2]!=sasON))  /*&&
;;;3009             ((!SK_REL_EN[3]) || (sk_av_stat[3]!=sasON))*/  )SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_COMM,1);
;;;3010        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_COMM,1);
;;;3011   	}
;;;3012   
;;;3013   	
;;;3014   //rel_warm_plazma=0;
;;;3015   //    
;;;3016   /*
;;;3017   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_WARM))
;;;3018   	{
;;;3019   	if(mess_data[1]==0)
;;;3020   		{
;;;3021   		SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_WARM,1);
;;;3022   		rel_warm_plazma=1;
;;;3023   		}
;;;3024   	else if(mess_data[1]==1) 
;;;3025   		{
;;;3026   		SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_WARM,1);
;;;3027   		rel_warm_plazma=2;
;;;3028   		}
;;;3029        }
;;;3030   else 
;;;3031   	{
;;;3032   	if(warm_stat_k==wsOFF) 
;;;3033   		{
;;;3034   		SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_WARM,1);
;;;3035   		rel_warm_plazma=3;
;;;3036   		}
;;;3037        else 
;;;3038   		{
;;;3039   		SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_WARM,1);
;;;3040   		rel_warm_plazma=4;
;;;3041   		}
;;;3042   	}
;;;3043   */
;;;3044   // 
;;;3045   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_LIGHT))
;;;3046   	{
;;;3047   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LIGHT,1);
;;;3048   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LIGHT,1);
;;;3049        }
;;;3050   else 
;;;3051   	{
;;;3052   	if(sk_av_stat[0]!=sasON) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LIGHT,1);
;;;3053        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LIGHT,1);
;;;3054   	}
;;;3055   
;;;3056   
;;;3057   
;;;3058   //  
;;;3059   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_LOAD_OFF))
;;;3060   	{
;;;3061   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LOAD_OFF,1);
;;;3062   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LOAD_OFF,1);
;;;3063        }
;;;3064   else if(tloaddisable_cmnd==0)
;;;3065   	{
;;;3066   	SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LOAD_OFF,1);
;;;3067   	}
;;;3068   else if((tloaddisable_cmnd)&&(tloaddisable_cmnd<=11))
;;;3069   	{
;;;3070   	SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LOAD_OFF,1);
;;;3071   	}
;;;3072   
;;;3073   else 
;;;3074   	{
;;;3075   	if(!(tloaddisable_stat==tldsON)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LOAD_OFF,1);
;;;3076        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LOAD_OFF,1);
;;;3077   	} 
;;;3078   
;;;3079   //    
;;;3080   if(RELE_LOG)
;;;3081   	{
;;;3082   	if((mess_find_unvol(MESS2RELE_HNDL))&&(mess_data[0]==PARAM_RELE_VENT_WARM))
;;;3083   		{
;;;3084   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT_WARM,1);
;;;3085   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT_WARM,1);
;;;3086   		}
;;;3087   	else 
;;;3088   		{
;;;3089   		if(warm_stat_k==wsOFF) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT_WARM,1);
;;;3090   	     else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT_WARM,1);
;;;3091   		} 
;;;3092   
;;;3093   	}
;;;3094   else 
;;;3095   	{
;;;3096   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_VENT_WARM))
;;;3097   		{
;;;3098   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT_WARM,1);
;;;3099   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT_WARM,1);
;;;3100   		}
;;;3101   	else 
;;;3102   		{
;;;3103   		if(vent_stat_k==vsOFF) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT_WARM,1);
;;;3104   	     else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT_WARM,1);
;;;3105   		} 
;;;3106   	}
;;;3107   #endif
;;;3108   
;;;3109   #ifdef UKU_6U
;;;3110   //  
;;;3111   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BAT1))
;;;3112   	{
;;;3113   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT1,1);
;;;3114   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT1,1);
;;;3115        }
;;;3116   else 
;;;3117   	{
;;;3118   	if(!(avar_ind_stat&0x00000002)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT1,1);
;;;3119        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT1,1);
;;;3120   	} 
;;;3121   
;;;3122   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BAT2))
;;;3123   	{
;;;3124   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT2,1);
;;;3125   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT2,1);
;;;3126       }
;;;3127   else if(NPN_OUT==npnoRELEAVBAT2)
;;;3128   	{
;;;3129   	if(npn_stat==npnsOFF)//&&(mess_find_unvol(MESS2RELE_HNDL))&&(mess_data[0]==PARAM_RELE_NPN))
;;;3130   		{
;;;3131   		/*if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT2,1);
;;;3132   		else if(mess_data[1]==1)*/ SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT2,1);
;;;3133        	}
;;;3134   	else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT2,1);
;;;3135   	}
;;;3136   else 
;;;3137   	{
;;;3138   	if(!(avar_ind_stat&0x00000004)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT2,1);
;;;3139       else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT2,1);
;;;3140   	} 
;;;3141   
;;;3142   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BPS))
;;;3143   	{
;;;3144   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
;;;3145   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
;;;3146        }
;;;3147   else 
;;;3148   	{
;;;3149   	if(!(avar_ind_stat&0x000007f8)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
;;;3150        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
;;;3151   	} 
;;;3152   
;;;3153   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_VENT))
;;;3154   	{
;;;3155   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT,1);
;;;3156   	else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;3157   	}
;;;3158   else if((NPN_OUT==npnoRELEVENT))
;;;3159   	{
;;;3160   	if(npn_stat==npnsOFF)//&&(mess_find_unvol(MESS2RELE_HNDL))&&(mess_data[0]==PARAM_RELE_NPN))
;;;3161   		{
;;;3162   		/*if(mess_data[1]==0)*/ SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;3163   		//else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;3164       	}
;;;3165   	else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT,1);
;;;3166   	}
;;;3167   else 
;;;3168   	{
;;;3169   	if(!vent_stat) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT,1);
;;;3170   	else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;3171   	}
;;;3172   
;;;3173   #endif
;;;3174   
;;;3175   #ifdef UKU_220
;;;3176   //  
;;;3177   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BAT))
;;;3178   	{
;;;3179   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT,1);
;;;3180   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT,1);
;;;3181        }
;;;3182   else 
;;;3183   	{
;;;3184   	if(!(avar_ind_stat&0x00000002)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT,1);
;;;3185        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT,1);
;;;3186   	} 
;;;3187   
;;;3188   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BPS))
;;;3189   	{
;;;3190   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
;;;3191   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
;;;3192        }
;;;3193   else 
;;;3194   	{
;;;3195   	if(!(avar_ind_stat&0x000007f8)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
;;;3196        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
;;;3197   	} 
;;;3198   
;;;3199   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_VENT))
;;;3200   	{
;;;3201   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT,1);
;;;3202   	else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;3203   	}
;;;3204   else 
;;;3205   	{
;;;3206   	if((RELE_VENT_LOGIC==0)||(RELE_VENT_LOGIC==1))
;;;3207   		{
;;;3208   		if(vent_stat) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT,1);
;;;3209   		else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;3210   		}
;;;3211   	else 
;;;3212   		{
;;;3213   		if((avar_ind_stat&0x00000004)) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT,1);
;;;3214        	else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;3215   		}
;;;3216   	}
;;;3217   
;;;3218   #endif
;;;3219   
;;;3220   #ifdef UKU_220_V2
;;;3221   //  
;;;3222   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BAT))
;;;3223   	{
;;;3224   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT,1);
;;;3225   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT,1);
;;;3226        }
;;;3227   else 
;;;3228   	{
;;;3229   	if(!(avar_ind_stat&0x00000002)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT,1);
;;;3230        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT,1);
;;;3231   	} 
;;;3232   
;;;3233   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BPS))
;;;3234   	{
;;;3235   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
;;;3236   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
;;;3237        }
;;;3238   else 
;;;3239   	{
;;;3240   	if(!(avar_ind_stat&0x000007f8)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
;;;3241        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
;;;3242   	} 
;;;3243   
;;;3244   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_VENT))
;;;3245   	{
;;;3246   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT,1);
;;;3247   	else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;3248   	}
;;;3249   else 
;;;3250   	{
;;;3251   	if((RELE_VENT_LOGIC==0)||(RELE_VENT_LOGIC==1))
;;;3252   		{
;;;3253   		if(vent_stat) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT,1);
;;;3254   		else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;3255   		}
;;;3256   	else 
;;;3257   		{
;;;3258   		if((avar_ind_stat&0x00000004)) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT,1);
;;;3259        	else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;3260   		}
;;;3261   	}
;;;3262   
;;;3263   #endif
;;;3264   
;;;3265   #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;3266   
;;;3267   if((AUSW_MAIN==22010)||(AUSW_MAIN==22011))
001a4c  4827              LDR      r0,|L1.6892|
;;;3268   	{
;;;3269   	#ifndef UKU2071x
;;;3270   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_NET))
;;;3271   		{
;;;3272   		if(mess_data[1]==0) SET_REG(LPC_GPIO3->FIOSET,1,25,1);
;;;3273   		else SET_REG(LPC_GPIO3->FIOCLR,1,25,1);
;;;3274   		}
;;;3275   	else	if(!(avar_ind_stat&0x00000001)) SET_REG(LPC_GPIO3->FIOSET,1,25,1);
;;;3276   	else SET_REG(LPC_GPIO3->FIOCLR,1,25,1);
;;;3277   	#endif
;;;3278   	#ifdef UKU2071x
;;;3279   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_NET))
;;;3280   		{
;;;3281   		if(mess_data[1]==0) SET_REG(LPC_GPIO3->FIOCLR,1,25,1);
;;;3282   		else SET_REG(LPC_GPIO3->FIOSET,1,25,1);
;;;3283   		}
;;;3284   	else	if(!(avar_ind_stat&0x00000001)) SET_REG(LPC_GPIO3->FIOCLR,1,25,1);
;;;3285   	else SET_REG(LPC_GPIO3->FIOSET,1,25,1);
;;;3286   	#endif
;;;3287   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BPS))
;;;3288   		{
;;;3289   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,7,1);
;;;3290   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,7,1);
;;;3291   	     }
;;;3292   	else 
;;;3293   		{
;;;3294   		if(!(avar_ind_stat&0x100007f8)) SET_REG(LPC_GPIO0->FIOCLR,1,7,1);
;;;3295   	     else SET_REG(LPC_GPIO0->FIOSET,1,7,1);
;;;3296   		} 
;;;3297   
;;;3298   	//  
;;;3299   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BAT))
;;;3300   		{
;;;3301   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,4,1);
;;;3302   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,4,1);
;;;3303        	}
;;;3304   	else 
;;;3305   		{
;;;3306   		if(!(ips_bat_av_stat)) SET_REG(LPC_GPIO0->FIOCLR,1,4,1);
001a4e  f8df80a0          LDR      r8,|L1.6896|
001a52  4f28              LDR      r7,|L1.6900|
001a54  8800              LDRH     r0,[r0,#0]            ;3267  ; AUSW_MAIN
001a56  f5a041aa          SUB      r1,r0,#0x5500         ;3267
001a5a  39fa              SUBS     r1,r1,#0xfa           ;3267
001a5c  d001              BEQ      |L1.6754|
001a5e  1e49              SUBS     r1,r1,#1              ;3267
001a60  d173              BNE      |L1.6986|
                  |L1.6754|
001a62  20d2              MOVS     r0,#0xd2              ;3279
001a64  f7fffffe          BL       mess_find_unvol
001a68  b110              CBZ      r0,|L1.6768|
001a6a  6828              LDR      r0,[r5,#0]            ;3279  ; mess_data
001a6c  2866              CMP      r0,#0x66              ;3279
001a6e  d06f              BEQ      |L1.6992|
                  |L1.6768|
001a70  6830              LDR      r0,[r6,#0]            ;3284  ; avar_ind_stat
001a72  07c0              LSLS     r0,r0,#31             ;3284
001a74  d078              BEQ      |L1.7016|
001a76  6fa0              LDR      r0,[r4,#0x78]         ;3285
001a78  f0407000          ORR      r0,r0,#0x2000000      ;3285
001a7c  67a0              STR      r0,[r4,#0x78]         ;3285
                  |L1.6782|
001a7e  20d2              MOVS     r0,#0xd2              ;3287
001a80  f7fffffe          BL       mess_find_unvol
001a84  b110              CBZ      r0,|L1.6796|
001a86  6828              LDR      r0,[r5,#0]            ;3287  ; mess_data
001a88  286a              CMP      r0,#0x6a              ;3287
001a8a  d074              BEQ      |L1.7030|
                  |L1.6796|
001a8c  6830              LDR      r0,[r6,#0]            ;3294  ; avar_ind_stat
001a8e  4238              TST      r0,r7                 ;3294
001a90  d070              BEQ      |L1.7028|
001a92  69a0              LDR      r0,[r4,#0x18]         ;3295
001a94  f0400080          ORR      r0,r0,#0x80           ;3295
001a98  61a0              STR      r0,[r4,#0x18]         ;3295
                  |L1.6810|
001a9a  20d2              MOVS     r0,#0xd2              ;3299
001a9c  f7fffffe          BL       mess_find_unvol
001aa0  b110              CBZ      r0,|L1.6824|
001aa2  6828              LDR      r0,[r5,#0]            ;3299  ; mess_data
001aa4  2867              CMP      r0,#0x67              ;3299
001aa6  d07a              BEQ      |L1.7070|
                  |L1.6824|
001aa8  f8980000          LDRB     r0,[r8,#0]  ; ips_bat_av_stat
001aac  b3a0              CBZ      r0,|L1.6936|
;;;3307        	else SET_REG(LPC_GPIO0->FIOSET,1,4,1);
001aae  e024              B        |L1.6906|
                  |L1.6832|
                          DCD      ||area_number.21||+0x9a
                  |L1.6836|
                          DCD      ||.bss||+0x420
                  |L1.6840|
                          DCD      ||.bss||
                  |L1.6844|
                          DCD      0x40034000
                  |L1.6848|
                          DCD      0x2009c000
                  |L1.6852|
                          DCD      bps
                  |L1.6856|
                          DCD      NUMIST
                  |L1.6860|
                          DCD      0x4002c000
                  |L1.6864|
                          DCD      0xfff000ff
                  |L1.6868|
                          DCD      bat
                  |L1.6872|
                          DCD      tbatdisable_stat
                  |L1.6876|
                          DCD      tbatdisable_cmnd
                  |L1.6880|
                          DCD      main_1Hz_cnt
                  |L1.6884|
                          DCD      mess_data
                  |L1.6888|
                          DCD      avar_ind_stat
                  |L1.6892|
                          DCD      AUSW_MAIN
                  |L1.6896|
                          DCD      ips_bat_av_stat
                  |L1.6900|
                          DCD      0x100007f8
001af8  e004              B        |L1.6916|
                  |L1.6906|
001afa  69a0              LDR      r0,[r4,#0x18]
001afc  f0400010          ORR      r0,r0,#0x10
001b00  61a0              STR      r0,[r4,#0x18]
001b02  e1d7              B        |L1.7860|
                  |L1.6916|
001b04  6868              LDR      r0,[r5,#4]            ;2822  ; mess_data
001b06  2801              CMP      r0,#1                 ;2822
001b08  d009              BEQ      |L1.6942|
001b0a  2800              CMP      r0,#0                 ;2823
001b0c  d18f              BNE      |L1.6702|
001b0e  69e0              LDR      r0,[r4,#0x1c]         ;2823
001b10  f0405000          ORR      r0,r0,#0x20000000     ;2823
001b14  61e0              STR      r0,[r4,#0x1c]         ;2823
001b16  e78a              B        |L1.6702|
                  |L1.6936|
001b18  e050              B        |L1.7100|
001b1a  e005              B        |L1.6952|
001b1c  e010              B        |L1.6976|
                  |L1.6942|
001b1e  69a0              LDR      r0,[r4,#0x18]         ;2822
001b20  f0405000          ORR      r0,r0,#0x20000000     ;2822
001b24  61a0              STR      r0,[r4,#0x18]         ;2822
001b26  e782              B        |L1.6702|
                  |L1.6952|
001b28  6868              LDR      r0,[r5,#4]            ;2842  ; mess_data
001b2a  b120              CBZ      r0,|L1.6966|
001b2c  6fa0              LDR      r0,[r4,#0x78]         ;2843
001b2e  f0407000          ORR      r0,r0,#0x2000000      ;2843
001b32  67a0              STR      r0,[r4,#0x78]         ;2843
001b34  e78a              B        |L1.6732|
                  |L1.6966|
001b36  6fe0              LDR      r0,[r4,#0x7c]         ;2842
001b38  f0407000          ORR      r0,r0,#0x2000000      ;2842
001b3c  67e0              STR      r0,[r4,#0x7c]         ;2842
001b3e  e785              B        |L1.6732|
                  |L1.6976|
001b40  6fe0              LDR      r0,[r4,#0x7c]         ;2845
001b42  f0407000          ORR      r0,r0,#0x2000000      ;2845
001b46  67e0              STR      r0,[r4,#0x7c]         ;2845
001b48  e780              B        |L1.6732|
                  |L1.6986|
001b4a  e03c              B        |L1.7110|
001b4c  e000              B        |L1.6992|
001b4e  e00b              B        |L1.7016|
                  |L1.6992|
001b50  6868              LDR      r0,[r5,#4]            ;3281  ; mess_data
001b52  b120              CBZ      r0,|L1.7006|
001b54  6fa0              LDR      r0,[r4,#0x78]         ;3282
001b56  f0407000          ORR      r0,r0,#0x2000000      ;3282
001b5a  67a0              STR      r0,[r4,#0x78]         ;3282
001b5c  e78f              B        |L1.6782|
                  |L1.7006|
001b5e  6fe0              LDR      r0,[r4,#0x7c]         ;3281
001b60  f0407000          ORR      r0,r0,#0x2000000      ;3281
001b64  67e0              STR      r0,[r4,#0x7c]         ;3281
001b66  e78a              B        |L1.6782|
                  |L1.7016|
001b68  6fe0              LDR      r0,[r4,#0x7c]         ;3284
001b6a  f0407000          ORR      r0,r0,#0x2000000      ;3284
001b6e  67e0              STR      r0,[r4,#0x7c]         ;3284
001b70  e785              B        |L1.6782|
001b72  e000              B        |L1.7030|
                  |L1.7028|
001b74  e00e              B        |L1.7060|
                  |L1.7030|
001b76  6868              LDR      r0,[r5,#4]            ;3289  ; mess_data
001b78  b138              CBZ      r0,|L1.7050|
001b7a  2801              CMP      r0,#1                 ;3290
001b7c  d18d              BNE      |L1.6810|
001b7e  69a0              LDR      r0,[r4,#0x18]         ;3290
001b80  f0400080          ORR      r0,r0,#0x80           ;3290
001b84  61a0              STR      r0,[r4,#0x18]         ;3290
001b86  e788              B        |L1.6810|
001b88  e009              B        |L1.7070|
                  |L1.7050|
001b8a  69e0              LDR      r0,[r4,#0x1c]         ;3289
001b8c  f0400080          ORR      r0,r0,#0x80           ;3289
001b90  61e0              STR      r0,[r4,#0x1c]         ;3289
001b92  e782              B        |L1.6810|
                  |L1.7060|
001b94  69e0              LDR      r0,[r4,#0x1c]         ;3294
001b96  f0400080          ORR      r0,r0,#0x80           ;3294
001b9a  61e0              STR      r0,[r4,#0x1c]         ;3294
001b9c  e77d              B        |L1.6810|
                  |L1.7070|
001b9e  6868              LDR      r0,[r5,#4]            ;3301  ; mess_data
001ba0  b110              CBZ      r0,|L1.7080|
001ba2  2801              CMP      r0,#1                 ;3302
001ba4  d005              BEQ      |L1.7090|
001ba6  e185              B        |L1.7860|
                  |L1.7080|
001ba8  69e0              LDR      r0,[r4,#0x1c]         ;3301
001baa  f0400010          ORR      r0,r0,#0x10           ;3301
001bae  61e0              STR      r0,[r4,#0x1c]         ;3301
001bb0  e180              B        |L1.7860|
                  |L1.7090|
001bb2  69a0              LDR      r0,[r4,#0x18]         ;3302
001bb4  f0400010          ORR      r0,r0,#0x10           ;3302
001bb8  61a0              STR      r0,[r4,#0x18]         ;3302
001bba  e17b              B        |L1.7860|
                  |L1.7100|
001bbc  69e0              LDR      r0,[r4,#0x1c]         ;3306
001bbe  f0400010          ORR      r0,r0,#0x10           ;3306
001bc2  61e0              STR      r0,[r4,#0x1c]         ;3306
001bc4  e176              B        |L1.7860|
                  |L1.7110|
;;;3308   		}
;;;3309   	}
;;;3310   
;;;3311   else	if(AUSW_MAIN==22023)
001bc6  f5a041ac          SUB      r1,r0,#0x5600
001bca  3907              SUBS     r1,#7
001bcc  d162              BNE      |L1.7316|
;;;3312   	{
;;;3313   
;;;3314   	//  
;;;3315   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BAT))
001bce  20d2              MOVS     r0,#0xd2
001bd0  f7fffffe          BL       mess_find_unvol
001bd4  b110              CBZ      r0,|L1.7132|
001bd6  6828              LDR      r0,[r5,#0]  ; mess_data
001bd8  2867              CMP      r0,#0x67
001bda  d023              BEQ      |L1.7204|
                  |L1.7132|
;;;3316   		{
;;;3317   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,4,1);
;;;3318   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,4,1);
;;;3319        	}
;;;3320   	else 
;;;3321   		{
;;;3322   		if(!(ips_bat_av_stat)) SET_REG(LPC_GPIO0->FIOCLR,1,4,1);
001bdc  f8980000          LDRB     r0,[r8,#0]  ; ips_bat_av_stat
001be0  b370              CBZ      r0,|L1.7232|
;;;3323        	else SET_REG(LPC_GPIO0->FIOSET,1,4,1);
001be2  69a0              LDR      r0,[r4,#0x18]
001be4  f0400010          ORR      r0,r0,#0x10
001be8  61a0              STR      r0,[r4,#0x18]
                  |L1.7146|
;;;3324   		} 
;;;3325   
;;;3326   
;;;3327   	//         .    
;;;3328   	#ifndef UKU2071x
;;;3329   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_NET))
;;;3330   		{
;;;3331   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;3332   		else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_NET,1);
;;;3333   		}
;;;3334   	else	if(!(avar_ind_stat&0x00000001)) SET_REG(LPC_GPIO1->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;3335   	else SET_REG(LPC_GPIO3->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;3336   	#endif
;;;3337   	#ifdef UKU2071x
;;;3338   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_NET))
001bea  20d2              MOVS     r0,#0xd2
001bec  f7fffffe          BL       mess_find_unvol
001bf0  b110              CBZ      r0,|L1.7160|
001bf2  6828              LDR      r0,[r5,#0]  ; mess_data
001bf4  2866              CMP      r0,#0x66
001bf6  d028              BEQ      |L1.7242|
                  |L1.7160|
;;;3339   		{
;;;3340   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_NET,1);
;;;3341   		else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;3342   		}
;;;3343   	else	if(!(avar_ind_stat&0x00000001)) SET_REG(LPC_GPIO1->FIOSET,1,SHIFT_REL_AV_NET,1);
001bf8  6830              LDR      r0,[r6,#0]  ; avar_ind_stat
001bfa  07c0              LSLS     r0,r0,#31
001bfc  d031              BEQ      |L1.7266|
;;;3344   	else SET_REG(LPC_GPIO3->FIOSET,1,SHIFT_REL_AV_NET,1);
001bfe  6fa0              LDR      r0,[r4,#0x78]
001c00  f0407000          ORR      r0,r0,#0x2000000
001c04  67a0              STR      r0,[r4,#0x78]
                  |L1.7174|
;;;3345   	#endif
;;;3346   
;;;3347   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BPS))
001c06  20d2              MOVS     r0,#0xd2
001c08  f7fffffe          BL       mess_find_unvol
001c0c  b110              CBZ      r0,|L1.7188|
001c0e  6828              LDR      r0,[r5,#0]  ; mess_data
001c10  286a              CMP      r0,#0x6a
001c12  d02b              BEQ      |L1.7276|
                  |L1.7188|
;;;3348   		{
;;;3349   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,7,1);
;;;3350   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,7,1);
;;;3351   	     }
;;;3352   	else 
;;;3353   		{
;;;3354   		if(!(avar_ind_stat&0x100007f8)) SET_REG(LPC_GPIO0->FIOCLR,1,7,1);
001c14  6830              LDR      r0,[r6,#0]  ; avar_ind_stat
001c16  4238              TST      r0,r7
001c18  d037              BEQ      |L1.7306|
;;;3355   	     else SET_REG(LPC_GPIO0->FIOSET,1,7,1);
001c1a  69a0              LDR      r0,[r4,#0x18]
001c1c  f0400080          ORR      r0,r0,#0x80
001c20  61a0              STR      r0,[r4,#0x18]
001c22  e147              B        |L1.7860|
                  |L1.7204|
001c24  6868              LDR      r0,[r5,#4]            ;3317  ; mess_data
001c26  b130              CBZ      r0,|L1.7222|
001c28  2801              CMP      r0,#1                 ;3318
001c2a  d1de              BNE      |L1.7146|
001c2c  69a0              LDR      r0,[r4,#0x18]         ;3318
001c2e  f0400010          ORR      r0,r0,#0x10           ;3318
001c32  61a0              STR      r0,[r4,#0x18]         ;3318
001c34  e7d9              B        |L1.7146|
                  |L1.7222|
001c36  69e0              LDR      r0,[r4,#0x1c]         ;3317
001c38  f0400010          ORR      r0,r0,#0x10           ;3317
001c3c  61e0              STR      r0,[r4,#0x1c]         ;3317
001c3e  e7d4              B        |L1.7146|
                  |L1.7232|
001c40  69e0              LDR      r0,[r4,#0x1c]         ;3322
001c42  f0400010          ORR      r0,r0,#0x10           ;3322
001c46  61e0              STR      r0,[r4,#0x1c]         ;3322
001c48  e7cf              B        |L1.7146|
                  |L1.7242|
001c4a  6868              LDR      r0,[r5,#4]            ;3340  ; mess_data
001c4c  b120              CBZ      r0,|L1.7256|
001c4e  69e0              LDR      r0,[r4,#0x1c]         ;3341
001c50  f0407000          ORR      r0,r0,#0x2000000      ;3341
001c54  61e0              STR      r0,[r4,#0x1c]         ;3341
001c56  e7d6              B        |L1.7174|
                  |L1.7256|
001c58  69a0              LDR      r0,[r4,#0x18]         ;3340
001c5a  f0407000          ORR      r0,r0,#0x2000000      ;3340
001c5e  61a0              STR      r0,[r4,#0x18]         ;3340
001c60  e7d1              B        |L1.7174|
                  |L1.7266|
001c62  6ba0              LDR      r0,[r4,#0x38]         ;3343
001c64  f0407000          ORR      r0,r0,#0x2000000      ;3343
001c68  63a0              STR      r0,[r4,#0x38]         ;3343
001c6a  e7cc              B        |L1.7174|
                  |L1.7276|
001c6c  6868              LDR      r0,[r5,#4]            ;3349  ; mess_data
001c6e  b110              CBZ      r0,|L1.7286|
001c70  2801              CMP      r0,#1                 ;3350
001c72  d005              BEQ      |L1.7296|
001c74  e11e              B        |L1.7860|
                  |L1.7286|
001c76  69e0              LDR      r0,[r4,#0x1c]         ;3349
001c78  f0400080          ORR      r0,r0,#0x80           ;3349
001c7c  61e0              STR      r0,[r4,#0x1c]         ;3349
001c7e  e119              B        |L1.7860|
                  |L1.7296|
001c80  69a0              LDR      r0,[r4,#0x18]         ;3350
001c82  f0400080          ORR      r0,r0,#0x80           ;3350
001c86  61a0              STR      r0,[r4,#0x18]         ;3350
001c88  e114              B        |L1.7860|
                  |L1.7306|
001c8a  69e0              LDR      r0,[r4,#0x1c]         ;3354
001c8c  f0400080          ORR      r0,r0,#0x80           ;3354
001c90  61e0              STR      r0,[r4,#0x1c]         ;3354
001c92  e10f              B        |L1.7860|
                  |L1.7316|
;;;3356   		} 
;;;3357   	}
;;;3358   else	if(AUSW_MAIN==22043)
001c94  f5a041ac          SUB      r1,r0,#0x5600
001c98  391b              SUBS     r1,r1,#0x1b
001c9a  d170              BNE      |L1.7550|
;;;3359   	{
;;;3360   	//  
;;;3361   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BAT))
001c9c  20d2              MOVS     r0,#0xd2
001c9e  f7fffffe          BL       mess_find_unvol
001ca2  b110              CBZ      r0,|L1.7338|
001ca4  6828              LDR      r0,[r5,#0]  ; mess_data
001ca6  2867              CMP      r0,#0x67
001ca8  d031              BEQ      |L1.7438|
                  |L1.7338|
;;;3362   		{
;;;3363   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,4,1);
;;;3364   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,4,1);
;;;3365        	}
;;;3366   	else 
;;;3367   		{
;;;3368   		if(!(ips_bat_av_stat)) SET_REG(LPC_GPIO0->FIOCLR,1,4,1);
001caa  f8980000          LDRB     r0,[r8,#0]  ; ips_bat_av_stat
001cae  b3b8              CBZ      r0,|L1.7456|
;;;3369        	else SET_REG(LPC_GPIO0->FIOSET,1,4,1);
001cb0  69a0              LDR      r0,[r4,#0x18]
001cb2  f0400010          ORR      r0,r0,#0x10
001cb6  61a0              STR      r0,[r4,#0x18]
                  |L1.7352|
;;;3370   		} 
;;;3371   	//         .    
;;;3372   	#ifndef UKU2071x 
;;;3373   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_NET))
;;;3374   		{
;;;3375   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;3376   		else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_NET,1);
;;;3377   		}
;;;3378   	else	if(!(avar_ind_stat&0x00000001)) SET_REG(LPC_GPIO1->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;3379   	else SET_REG(LPC_GPIO3->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;3380   	#endif
;;;3381   	#ifdef UKU2071x 
;;;3382   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_NET))
001cb8  20d2              MOVS     r0,#0xd2
001cba  f7fffffe          BL       mess_find_unvol
001cbe  b110              CBZ      r0,|L1.7366|
001cc0  6828              LDR      r0,[r5,#0]  ; mess_data
001cc2  2866              CMP      r0,#0x66
001cc4  d037              BEQ      |L1.7478|
                  |L1.7366|
;;;3383   		{
;;;3384   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_NET,1);
;;;3385   		else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;3386   		}
;;;3387   	else	if(!(avar_ind_stat&0x00000001)) SET_REG(LPC_GPIO1->FIOSET,1,SHIFT_REL_AV_NET,1);
001cc6  6830              LDR      r0,[r6,#0]  ; avar_ind_stat
001cc8  07c0              LSLS     r0,r0,#31
001cca  d040              BEQ      |L1.7502|
;;;3388   	else SET_REG(LPC_GPIO3->FIOSET,1,SHIFT_REL_AV_NET,1);
001ccc  6fa0              LDR      r0,[r4,#0x78]
001cce  f0407000          ORR      r0,r0,#0x2000000
001cd2  67a0              STR      r0,[r4,#0x78]
                  |L1.7380|
;;;3389   	#endif
;;;3390   
;;;3391   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BPS))
001cd4  20d2              MOVS     r0,#0xd2
001cd6  f7fffffe          BL       mess_find_unvol
001cda  b110              CBZ      r0,|L1.7394|
001cdc  6828              LDR      r0,[r5,#0]  ; mess_data
001cde  286a              CMP      r0,#0x6a
001ce0  d03a              BEQ      |L1.7512|
                  |L1.7394|
;;;3392   		{
;;;3393   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,7,1);
;;;3394   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,7,1);
;;;3395   	     }
;;;3396   	else 
;;;3397   		{
;;;3398   		if(!(avar_ind_stat&0x100007f8)) SET_REG(LPC_GPIO0->FIOCLR,1,7,1);
001ce2  6830              LDR      r0,[r6,#0]  ; avar_ind_stat
001ce4  4238              TST      r0,r7
001ce6  d045              BEQ      |L1.7540|
;;;3399   	     else SET_REG(LPC_GPIO0->FIOSET,1,7,1);
001ce8  69a0              LDR      r0,[r4,#0x18]
001cea  f0400080          ORR      r0,r0,#0x80
001cee  61a0              STR      r0,[r4,#0x18]
                  |L1.7408|
;;;3400   		}
;;;3401   	//  
;;;3402   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BPS))
001cf0  20d2              MOVS     r0,#0xd2
001cf2  f7fffffe          BL       mess_find_unvol
001cf6  b110              CBZ      r0,|L1.7422|
001cf8  6828              LDR      r0,[r5,#0]  ; mess_data
001cfa  286a              CMP      r0,#0x6a
001cfc  d040              BEQ      |L1.7552|
                  |L1.7422|
;;;3403   		{
;;;3404   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
;;;3405   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
;;;3406        	}
;;;3407   	else 
;;;3408   		{
;;;3409   		if(!(avar_ind_stat&0x100007f8)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
001cfe  6830              LDR      r0,[r6,#0]  ; avar_ind_stat
001d00  4238              TST      r0,r7
001d02  d04c              BEQ      |L1.7582|
;;;3410        	else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
001d04  69a0              LDR      r0,[r4,#0x18]
001d06  f0400020          ORR      r0,r0,#0x20
001d0a  61a0              STR      r0,[r4,#0x18]
001d0c  e0d2              B        |L1.7860|
                  |L1.7438|
001d0e  6868              LDR      r0,[r5,#4]            ;3363  ; mess_data
001d10  b138              CBZ      r0,|L1.7458|
001d12  2801              CMP      r0,#1                 ;3364
001d14  d1d0              BNE      |L1.7352|
001d16  69a0              LDR      r0,[r4,#0x18]         ;3364
001d18  f0400010          ORR      r0,r0,#0x10           ;3364
001d1c  61a0              STR      r0,[r4,#0x18]         ;3364
001d1e  e7cb              B        |L1.7352|
                  |L1.7456|
001d20  e004              B        |L1.7468|
                  |L1.7458|
001d22  69e0              LDR      r0,[r4,#0x1c]         ;3363
001d24  f0400010          ORR      r0,r0,#0x10           ;3363
001d28  61e0              STR      r0,[r4,#0x1c]         ;3363
001d2a  e7c5              B        |L1.7352|
                  |L1.7468|
001d2c  69e0              LDR      r0,[r4,#0x1c]         ;3368
001d2e  f0400010          ORR      r0,r0,#0x10           ;3368
001d32  61e0              STR      r0,[r4,#0x1c]         ;3368
001d34  e7c0              B        |L1.7352|
                  |L1.7478|
001d36  6868              LDR      r0,[r5,#4]            ;3384  ; mess_data
001d38  b120              CBZ      r0,|L1.7492|
001d3a  69e0              LDR      r0,[r4,#0x1c]         ;3385
001d3c  f0407000          ORR      r0,r0,#0x2000000      ;3385
001d40  61e0              STR      r0,[r4,#0x1c]         ;3385
001d42  e7c7              B        |L1.7380|
                  |L1.7492|
001d44  69a0              LDR      r0,[r4,#0x18]         ;3384
001d46  f0407000          ORR      r0,r0,#0x2000000      ;3384
001d4a  61a0              STR      r0,[r4,#0x18]         ;3384
001d4c  e7c2              B        |L1.7380|
                  |L1.7502|
001d4e  6ba0              LDR      r0,[r4,#0x38]         ;3387
001d50  f0407000          ORR      r0,r0,#0x2000000      ;3387
001d54  63a0              STR      r0,[r4,#0x38]         ;3387
001d56  e7bd              B        |L1.7380|
                  |L1.7512|
001d58  6868              LDR      r0,[r5,#4]            ;3393  ; mess_data
001d5a  b130              CBZ      r0,|L1.7530|
001d5c  2801              CMP      r0,#1                 ;3394
001d5e  d1c7              BNE      |L1.7408|
001d60  69a0              LDR      r0,[r4,#0x18]         ;3394
001d62  f0400080          ORR      r0,r0,#0x80           ;3394
001d66  61a0              STR      r0,[r4,#0x18]         ;3394
001d68  e7c2              B        |L1.7408|
                  |L1.7530|
001d6a  69e0              LDR      r0,[r4,#0x1c]         ;3393
001d6c  f0400080          ORR      r0,r0,#0x80           ;3393
001d70  61e0              STR      r0,[r4,#0x1c]         ;3393
001d72  e7bd              B        |L1.7408|
                  |L1.7540|
001d74  69e0              LDR      r0,[r4,#0x1c]         ;3398
001d76  f0400080          ORR      r0,r0,#0x80           ;3398
001d7a  61e0              STR      r0,[r4,#0x1c]         ;3398
001d7c  e7b8              B        |L1.7408|
                  |L1.7550|
001d7e  e013              B        |L1.7592|
                  |L1.7552|
001d80  6868              LDR      r0,[r5,#4]            ;3404  ; mess_data
001d82  b110              CBZ      r0,|L1.7562|
001d84  2801              CMP      r0,#1                 ;3405
001d86  d005              BEQ      |L1.7572|
001d88  e094              B        |L1.7860|
                  |L1.7562|
001d8a  69e0              LDR      r0,[r4,#0x1c]         ;3404
001d8c  f0400020          ORR      r0,r0,#0x20           ;3404
001d90  61e0              STR      r0,[r4,#0x1c]         ;3404
001d92  e08f              B        |L1.7860|
                  |L1.7572|
001d94  69a0              LDR      r0,[r4,#0x18]         ;3405
001d96  f0400020          ORR      r0,r0,#0x20           ;3405
001d9a  61a0              STR      r0,[r4,#0x18]         ;3405
001d9c  e08a              B        |L1.7860|
                  |L1.7582|
001d9e  69e0              LDR      r0,[r4,#0x1c]         ;3409
001da0  f0400020          ORR      r0,r0,#0x20           ;3409
001da4  61e0              STR      r0,[r4,#0x1c]         ;3409
001da6  e085              B        |L1.7860|
                  |L1.7592|
;;;3411   		} 
;;;3412   	}
;;;3413   else	if((AUSW_MAIN==22033)||(AUSW_MAIN==22018))
001da8  f5a041ac          SUB      r1,r0,#0x5600
001dac  3911              SUBS     r1,r1,#0x11
001dae  d001              BEQ      |L1.7604|
001db0  310f              ADDS     r1,r1,#0xf
001db2  d163              BNE      |L1.7804|
                  |L1.7604|
;;;3414   	{
;;;3415   	#ifndef UKU2071x 
;;;3416   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_NET))
;;;3417   		{
;;;3418   		if(mess_data[1]==0) SET_REG(LPC_GPIO3->FIOSET,1,25,1);
;;;3419   		else SET_REG(LPC_GPIO3->FIOCLR,1,25,1);
;;;3420   		}
;;;3421   	else	if(!(avar_ind_stat&0x00000001)) SET_REG(LPC_GPIO3->FIOSET,1,25,1);
;;;3422   	else SET_REG(LPC_GPIO3->FIOCLR,1,25,1);
;;;3423   	#endif
;;;3424   	#ifdef UKU2071x 
;;;3425   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_NET))
001db4  20d2              MOVS     r0,#0xd2
001db6  f7fffffe          BL       mess_find_unvol
001dba  b110              CBZ      r0,|L1.7618|
001dbc  6828              LDR      r0,[r5,#0]  ; mess_data
001dbe  2866              CMP      r0,#0x66
001dc0  d023              BEQ      |L1.7690|
                  |L1.7618|
;;;3426   		{
;;;3427   		if(mess_data[1]==0) SET_REG(LPC_GPIO3->FIOCLR,1,25,1);
;;;3428   		else SET_REG(LPC_GPIO3->FIOSET,1,25,1);
;;;3429   		}
;;;3430   	else	if(!(avar_ind_stat&0x00000001)) SET_REG(LPC_GPIO3->FIOCLR,1,25,1);
001dc2  6830              LDR      r0,[r6,#0]  ; avar_ind_stat
001dc4  07c0              LSLS     r0,r0,#31
001dc6  d02c              BEQ      |L1.7714|
;;;3431   	else SET_REG(LPC_GPIO3->FIOSET,1,25,1);
001dc8  6fa0              LDR      r0,[r4,#0x78]
001dca  f0407000          ORR      r0,r0,#0x2000000
001dce  67a0              STR      r0,[r4,#0x78]
                  |L1.7632|
;;;3432   	#endif
;;;3433   	
;;;3434   	
;;;3435   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BPS))
001dd0  20d2              MOVS     r0,#0xd2
001dd2  f7fffffe          BL       mess_find_unvol
001dd6  b110              CBZ      r0,|L1.7646|
001dd8  6828              LDR      r0,[r5,#0]  ; mess_data
001dda  286a              CMP      r0,#0x6a
001ddc  d026              BEQ      |L1.7724|
                  |L1.7646|
;;;3436   		{
;;;3437   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,7,1);
;;;3438   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,7,1);
;;;3439   	     }
;;;3440   	else 
;;;3441   		{
;;;3442   		if(!(avar_ind_stat&0x100007f8)) SET_REG(LPC_GPIO0->FIOCLR,1,7,1);
001dde  6830              LDR      r0,[r6,#0]  ; avar_ind_stat
001de0  4238              TST      r0,r7
001de2  d031              BEQ      |L1.7752|
;;;3443   	     else SET_REG(LPC_GPIO0->FIOSET,1,7,1);
001de4  69a0              LDR      r0,[r4,#0x18]
001de6  f0400080          ORR      r0,r0,#0x80
001dea  61a0              STR      r0,[r4,#0x18]
                  |L1.7660|
;;;3444   		} 
;;;3445   
;;;3446   	//  
;;;3447   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BAT))
001dec  20d2              MOVS     r0,#0xd2
001dee  f7fffffe          BL       mess_find_unvol
001df2  b110              CBZ      r0,|L1.7674|
001df4  6828              LDR      r0,[r5,#0]  ; mess_data
001df6  2867              CMP      r0,#0x67
001df8  d02b              BEQ      |L1.7762|
                  |L1.7674|
;;;3448   		{
;;;3449   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,4,1);
;;;3450   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,4,1);
;;;3451        	}
;;;3452   	else 
;;;3453   		{
;;;3454   		if(!(ips_bat_av_stat)) SET_REG(LPC_GPIO0->FIOCLR,1,4,1);
001dfa  f8980000          LDRB     r0,[r8,#0]  ; ips_bat_av_stat
001dfe  b390              CBZ      r0,|L1.7782|
;;;3455        	else SET_REG(LPC_GPIO0->FIOSET,1,4,1);
001e00  69a0              LDR      r0,[r4,#0x18]
001e02  f0400010          ORR      r0,r0,#0x10
001e06  61a0              STR      r0,[r4,#0x18]
001e08  e054              B        |L1.7860|
                  |L1.7690|
001e0a  6868              LDR      r0,[r5,#4]            ;3427  ; mess_data
001e0c  b120              CBZ      r0,|L1.7704|
001e0e  6fa0              LDR      r0,[r4,#0x78]         ;3428
001e10  f0407000          ORR      r0,r0,#0x2000000      ;3428
001e14  67a0              STR      r0,[r4,#0x78]         ;3428
001e16  e7db              B        |L1.7632|
                  |L1.7704|
001e18  6fe0              LDR      r0,[r4,#0x7c]         ;3427
001e1a  f0407000          ORR      r0,r0,#0x2000000      ;3427
001e1e  67e0              STR      r0,[r4,#0x7c]         ;3427
001e20  e7d6              B        |L1.7632|
                  |L1.7714|
001e22  6fe0              LDR      r0,[r4,#0x7c]         ;3430
001e24  f0407000          ORR      r0,r0,#0x2000000      ;3430
001e28  67e0              STR      r0,[r4,#0x7c]         ;3430
001e2a  e7d1              B        |L1.7632|
                  |L1.7724|
001e2c  6868              LDR      r0,[r5,#4]            ;3437  ; mess_data
001e2e  b130              CBZ      r0,|L1.7742|
001e30  2801              CMP      r0,#1                 ;3438
001e32  d1db              BNE      |L1.7660|
001e34  69a0              LDR      r0,[r4,#0x18]         ;3438
001e36  f0400080          ORR      r0,r0,#0x80           ;3438
001e3a  61a0              STR      r0,[r4,#0x18]         ;3438
001e3c  e7d6              B        |L1.7660|
                  |L1.7742|
001e3e  69e0              LDR      r0,[r4,#0x1c]         ;3437
001e40  f0400080          ORR      r0,r0,#0x80           ;3437
001e44  61e0              STR      r0,[r4,#0x1c]         ;3437
001e46  e7d1              B        |L1.7660|
                  |L1.7752|
001e48  69e0              LDR      r0,[r4,#0x1c]         ;3442
001e4a  f0400080          ORR      r0,r0,#0x80           ;3442
001e4e  61e0              STR      r0,[r4,#0x1c]         ;3442
001e50  e7cc              B        |L1.7660|
                  |L1.7762|
001e52  6868              LDR      r0,[r5,#4]            ;3449  ; mess_data
001e54  b110              CBZ      r0,|L1.7772|
001e56  2801              CMP      r0,#1                 ;3450
001e58  d006              BEQ      |L1.7784|
001e5a  e02b              B        |L1.7860|
                  |L1.7772|
001e5c  69e0              LDR      r0,[r4,#0x1c]         ;3449
001e5e  f0400010          ORR      r0,r0,#0x10           ;3449
001e62  61e0              STR      r0,[r4,#0x1c]         ;3449
001e64  e026              B        |L1.7860|
                  |L1.7782|
001e66  e004              B        |L1.7794|
                  |L1.7784|
001e68  69a0              LDR      r0,[r4,#0x18]         ;3450
001e6a  f0400010          ORR      r0,r0,#0x10           ;3450
001e6e  61a0              STR      r0,[r4,#0x18]         ;3450
001e70  e020              B        |L1.7860|
                  |L1.7794|
001e72  69e0              LDR      r0,[r4,#0x1c]         ;3454
001e74  f0400010          ORR      r0,r0,#0x10           ;3454
001e78  61e0              STR      r0,[r4,#0x1c]         ;3454
001e7a  e01b              B        |L1.7860|
                  |L1.7804|
;;;3456   		} 
;;;3457   	} 	 
;;;3458   else	
;;;3459   	{
;;;3460   	//         .    
;;;3461   	#ifndef UKU2071x 
;;;3462   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_NET))
;;;3463   		{
;;;3464   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;3465   		else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_NET,1);
;;;3466   		}
;;;3467   	else	if(!(avar_ind_stat&0x00000001)) SET_REG(LPC_GPIO1->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;3468   	else SET_REG(LPC_GPIO3->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;3469   	#endif
;;;3470   	#ifdef UKU2071x 
;;;3471   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_NET))
001e7c  20d2              MOVS     r0,#0xd2
001e7e  f7fffffe          BL       mess_find_unvol
001e82  b110              CBZ      r0,|L1.7818|
001e84  6828              LDR      r0,[r5,#0]  ; mess_data
001e86  2866              CMP      r0,#0x66
001e88  d02d              BEQ      |L1.7910|
                  |L1.7818|
;;;3472   		{
;;;3473   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_NET,1);
;;;3474   		else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;3475   		}
;;;3476   	else	if(!(avar_ind_stat&0x00000001)) SET_REG(LPC_GPIO1->FIOSET,1,SHIFT_REL_AV_NET,1);
001e8a  6830              LDR      r0,[r6,#0]  ; avar_ind_stat
001e8c  07c0              LSLS     r0,r0,#31
001e8e  d036              BEQ      |L1.7934|
;;;3477   	else SET_REG(LPC_GPIO3->FIOSET,1,SHIFT_REL_AV_NET,1);
001e90  6fa0              LDR      r0,[r4,#0x78]
001e92  f0407000          ORR      r0,r0,#0x2000000
001e96  67a0              STR      r0,[r4,#0x78]
                  |L1.7832|
;;;3478   	#endif
;;;3479   
;;;3480   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BPS))
001e98  20d2              MOVS     r0,#0xd2
001e9a  f7fffffe          BL       mess_find_unvol
001e9e  b110              CBZ      r0,|L1.7846|
001ea0  6828              LDR      r0,[r5,#0]  ; mess_data
001ea2  286a              CMP      r0,#0x6a
001ea4  d030              BEQ      |L1.7944|
                  |L1.7846|
;;;3481   		{
;;;3482   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
;;;3483   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
;;;3484        	}
;;;3485   	else 
;;;3486   		{
;;;3487   		if(!(avar_ind_stat&0x100007f8)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
001ea6  6830              LDR      r0,[r6,#0]  ; avar_ind_stat
001ea8  4238              TST      r0,r7
001eaa  d03b              BEQ      |L1.7972|
;;;3488        	else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
001eac  69a0              LDR      r0,[r4,#0x18]
001eae  f0400020          ORR      r0,r0,#0x20
001eb2  61a0              STR      r0,[r4,#0x18]
                  |L1.7860|
;;;3489   		}
;;;3490   	}
;;;3491   //   
;;;3492   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_EXT))	 
001eb4  20d2              MOVS     r0,#0xd2
001eb6  f7fffffe          BL       mess_find_unvol
001eba  b110              CBZ      r0,|L1.7874|
001ebc  6828              LDR      r0,[r5,#0]  ; mess_data
001ebe  2871              CMP      r0,#0x71
001ec0  d036              BEQ      |L1.7984|
                  |L1.7874|
;;;3493   	{
;;;3494   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,9,1);
;;;3495   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,9,1);
;;;3496   	}
;;;3497   else if(DOP_RELE_FUNC==0)	//     
001ec2  48fb              LDR      r0,|L1.8880|
001ec4  f9b00000          LDRSH    r0,[r0,#0]  ; DOP_RELE_FUNC
001ec8  b388              CBZ      r0,|L1.7982|
;;;3498   	{
;;;3499   	if(!speedChIsOn) SET_REG(LPC_GPIO0->FIOCLR,1,9,1);
;;;3500   	else SET_REG(LPC_GPIO0->FIOSET,1,9,1);
;;;3501   	}
;;;3502   else if(DOP_RELE_FUNC==1)  //      
001eca  2801              CMP      r0,#1
001ecc  d10a              BNE      |L1.7908|
;;;3503   	{
;;;3504   	if((mess_find_unvol(MESS2RELE_HNDL))&& (mess_data[0]==PARAM_RELE_BAT_IS_DISCHARGED)) SET_REG(LPC_GPIO0->FIOCLR,1,9,1);
001ece  20d2              MOVS     r0,#0xd2
001ed0  f7fffffe          BL       mess_find_unvol
001ed4  b110              CBZ      r0,|L1.7900|
001ed6  6828              LDR      r0,[r5,#0]  ; mess_data
001ed8  2872              CMP      r0,#0x72
001eda  d044              BEQ      |L1.8038|
                  |L1.7900|
;;;3505   	else SET_REG(LPC_GPIO0->FIOSET,1,9,1);
001edc  69a0              LDR      r0,[r4,#0x18]
001ede  f4407000          ORR      r0,r0,#0x200
001ee2  61a0              STR      r0,[r4,#0x18]
                  |L1.7908|
;;;3506   	}	 	
;;;3507   #endif
;;;3508   
;;;3509   #ifdef UKU_KONTUR
;;;3510   
;;;3511   //  
;;;3512   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_COMM))
;;;3513   	{
;;;3514   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_COMM,1);
;;;3515   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_COMM,1);
;;;3516   	}
;;;3517   else 
;;;3518   	{
;;;3519        if(  (!(avar_ind_stat&0x00007fff)) &&
;;;3520             ((!SK_REL_EN[0]) || (sk_av_stat[0]!=sasON))  &&
;;;3521             ((!SK_REL_EN[1]) || (sk_av_stat[1]!=sasON))  &&
;;;3522             ((!SK_REL_EN[2]) || (sk_av_stat[2]!=sasON))  /*&&
;;;3523             ((!SK_REL_EN[3]) || (sk_av_stat[3]!=sasON))*/  )SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_COMM,1);
;;;3524        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_COMM,1);
;;;3525   	}
;;;3526   
;;;3527   	
;;;3528   //rel_warm_plazma=0;
;;;3529   //    
;;;3530   /*
;;;3531   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_WARM))
;;;3532   	{
;;;3533   	if(mess_data[1]==0)
;;;3534   		{
;;;3535   		SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_WARM,1);
;;;3536   		rel_warm_plazma=1;
;;;3537   		}
;;;3538   	else if(mess_data[1]==1) 
;;;3539   		{
;;;3540   		SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_WARM,1);
;;;3541   		rel_warm_plazma=2;
;;;3542   		}
;;;3543        }
;;;3544   else 
;;;3545   	{
;;;3546   	if(warm_stat_k==wsOFF) 
;;;3547   		{
;;;3548   		SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_WARM,1);
;;;3549   		rel_warm_plazma=3;
;;;3550   		}
;;;3551        else 
;;;3552   		{
;;;3553   		SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_WARM,1);
;;;3554   		rel_warm_plazma=4;
;;;3555   		}
;;;3556   	}
;;;3557   */
;;;3558   // 
;;;3559   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_LIGHT))
;;;3560   	{
;;;3561   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LIGHT,1);
;;;3562   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LIGHT,1);
;;;3563        }
;;;3564   else 
;;;3565   	{
;;;3566   	if(sk_av_stat[0]!=sasON) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LIGHT,1);
;;;3567        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LIGHT,1);
;;;3568   	}
;;;3569   
;;;3570   
;;;3571   
;;;3572   //  
;;;3573   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_LOAD_OFF))
;;;3574   	{
;;;3575   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LOAD_OFF,1);
;;;3576   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LOAD_OFF,1);
;;;3577        }
;;;3578   else if(tloaddisable_cmnd==0)
;;;3579   	{
;;;3580   	SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LOAD_OFF,1);
;;;3581   	}
;;;3582   else if((tloaddisable_cmnd)&&(tloaddisable_cmnd<=11))
;;;3583   	{
;;;3584   	SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LOAD_OFF,1);
;;;3585   	}
;;;3586   
;;;3587   else 
;;;3588   	{
;;;3589   	if(!(tloaddisable_stat==tldsON)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LOAD_OFF,1);
;;;3590        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LOAD_OFF,1);
;;;3591   	} 
;;;3592   
;;;3593   //    
;;;3594   if(RELE_LOG)
;;;3595   	{
;;;3596   	if((mess_find_unvol(MESS2RELE_HNDL))&&(mess_data[0]==PARAM_RELE_VENT_WARM))
;;;3597   		{
;;;3598   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT_WARM,1);
;;;3599   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT_WARM,1);
;;;3600   		}
;;;3601   	else 
;;;3602   		{
;;;3603   		if(warm_stat_k==wsOFF) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT_WARM,1);
;;;3604   	     else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT_WARM,1);
;;;3605   		} 
;;;3606   
;;;3607   	}
;;;3608   else 
;;;3609   	{
;;;3610   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_VENT_WARM))
;;;3611   		{
;;;3612   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT_WARM,1);
;;;3613   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT_WARM,1);
;;;3614   		}
;;;3615   	else 
;;;3616   		{
;;;3617   		if(vent_stat_k==vsOFF) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT_WARM,1);
;;;3618   	     else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT_WARM,1);
;;;3619   		} 
;;;3620   	}
;;;3621   #endif
;;;3622   
;;;3623   
;;;3624   #ifdef UKU_TELECORE2015
;;;3625   //  
;;;3626   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_NET))
;;;3627   	{
;;;3628   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;3629   	else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_NET,1);
;;;3630   	}
;;;3631   else	if(!(avar_ind_stat&0x00000001)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;3632   else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_NET,1);
;;;3633   
;;;3634   
;;;3635   // 
;;;3636   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_LIGHT))
;;;3637   	{
;;;3638   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LIGHT,1);
;;;3639   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LIGHT,1);
;;;3640        }
;;;3641   else 
;;;3642   	{
;;;3643   	if(sk_av_stat[0]!=sasON) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LIGHT,1);
;;;3644        else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LIGHT,1);
;;;3645   	}
;;;3646   
;;;3647   // 
;;;3648   if((mess_find_unvol(MESS2RELE_HNDL))&&(mess_data[0]==PARAM_RELE_WARM))
;;;3649   	{
;;;3650   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_WARM,1);
;;;3651   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_WARM,1);
;;;3652   	}
;;;3653   else 
;;;3654   	{
;;;3655   	if(warm_stat_k==wsOFF) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_WARM,1);
;;;3656        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_WARM,1);
;;;3657   	} 
;;;3658   // 
;;;3659   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_VENT))
;;;3660   	{
;;;3661   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT,1);
;;;3662   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;3663   	}
;;;3664   else 
;;;3665   	{
;;;3666   	if(vent_stat_k==vsOFF) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT,1);
;;;3667        else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;3668   	} 
;;;3669   
;;;3670   //  
;;;3671   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_VVENT))
;;;3672   	{
;;;3673   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VVENT,1);
;;;3674   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VVENT,1);
;;;3675   	}
;;;3676   else 
;;;3677   	{
;;;3678   	if(vvent_stat_k==vsOFF) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VVENT,1);
;;;3679        else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VVENT,1);
;;;3680   	} 
;;;3681   
;;;3682   #endif
;;;3683   
;;;3684   }
001ee4  e4b3              B        |L1.6222|
                  |L1.7910|
001ee6  6868              LDR      r0,[r5,#4]            ;3473  ; mess_data
001ee8  b120              CBZ      r0,|L1.7924|
001eea  69e0              LDR      r0,[r4,#0x1c]         ;3474
001eec  f0407000          ORR      r0,r0,#0x2000000      ;3474
001ef0  61e0              STR      r0,[r4,#0x1c]         ;3474
001ef2  e7d1              B        |L1.7832|
                  |L1.7924|
001ef4  69a0              LDR      r0,[r4,#0x18]         ;3473
001ef6  f0407000          ORR      r0,r0,#0x2000000      ;3473
001efa  61a0              STR      r0,[r4,#0x18]         ;3473
001efc  e7cc              B        |L1.7832|
                  |L1.7934|
001efe  6ba0              LDR      r0,[r4,#0x38]         ;3476
001f00  f0407000          ORR      r0,r0,#0x2000000      ;3476
001f04  63a0              STR      r0,[r4,#0x38]         ;3476
001f06  e7c7              B        |L1.7832|
                  |L1.7944|
001f08  6868              LDR      r0,[r5,#4]            ;3482  ; mess_data
001f0a  b130              CBZ      r0,|L1.7962|
001f0c  2801              CMP      r0,#1                 ;3483
001f0e  d1d1              BNE      |L1.7860|
001f10  69a0              LDR      r0,[r4,#0x18]         ;3483
001f12  f0400020          ORR      r0,r0,#0x20           ;3483
001f16  61a0              STR      r0,[r4,#0x18]         ;3483
001f18  e7cc              B        |L1.7860|
                  |L1.7962|
001f1a  69e0              LDR      r0,[r4,#0x1c]         ;3482
001f1c  f0400020          ORR      r0,r0,#0x20           ;3482
001f20  61e0              STR      r0,[r4,#0x1c]         ;3482
001f22  e7c7              B        |L1.7860|
                  |L1.7972|
001f24  69e0              LDR      r0,[r4,#0x1c]         ;3487
001f26  f0400020          ORR      r0,r0,#0x20           ;3487
001f2a  61e0              STR      r0,[r4,#0x1c]         ;3487
001f2c  e7c2              B        |L1.7860|
                  |L1.7982|
001f2e  e00d              B        |L1.8012|
                  |L1.7984|
001f30  6868              LDR      r0,[r5,#4]            ;3494  ; mess_data
001f32  b130              CBZ      r0,|L1.8002|
001f34  2801              CMP      r0,#1                 ;3495
001f36  d1d5              BNE      |L1.7908|
001f38  69a0              LDR      r0,[r4,#0x18]         ;3495
001f3a  f4407000          ORR      r0,r0,#0x200          ;3495
001f3e  61a0              STR      r0,[r4,#0x18]         ;3495
001f40  e485              B        |L1.6222|
                  |L1.8002|
001f42  69e0              LDR      r0,[r4,#0x1c]         ;3494
001f44  f4407000          ORR      r0,r0,#0x200          ;3494
001f48  61e0              STR      r0,[r4,#0x1c]         ;3494
001f4a  e480              B        |L1.6222|
                  |L1.8012|
001f4c  48d9              LDR      r0,|L1.8884|
001f4e  8800              LDRH     r0,[r0,#0]            ;3499  ; speedChIsOn
001f50  b120              CBZ      r0,|L1.8028|
001f52  69a0              LDR      r0,[r4,#0x18]         ;3500
001f54  f4407000          ORR      r0,r0,#0x200          ;3500
001f58  61a0              STR      r0,[r4,#0x18]         ;3500
001f5a  e478              B        |L1.6222|
                  |L1.8028|
001f5c  69e0              LDR      r0,[r4,#0x1c]         ;3499
001f5e  f4407000          ORR      r0,r0,#0x200          ;3499
001f62  61e0              STR      r0,[r4,#0x1c]         ;3499
001f64  e473              B        |L1.6222|
                  |L1.8038|
001f66  69e0              LDR      r0,[r4,#0x1c]         ;3504
001f68  f4407000          ORR      r0,r0,#0x200          ;3504
001f6c  61e0              STR      r0,[r4,#0x1c]         ;3504
001f6e  e46e              B        |L1.6222|
;;;3685   
                          ENDP

                  bps_hndl PROC
;;;3686   //-----------------------------------------------
;;;3687   void bps_hndl(void)
001f70  e92d5ff0          PUSH     {r4-r12,lr}
;;;3688   {
;;;3689   char ptr__,i;
;;;3690   unsigned short tempUS;
;;;3691   
;;;3692   if(sh_cnt0<10)
001f74  4ed0              LDR      r6,|L1.8888|
;;;3693   	{
;;;3694   	sh_cnt0++;
;;;3695   	if(sh_cnt0>=10)
;;;3696   		{
;;;3697   		sh_cnt0=0;
001f76  2700              MOVS     r7,#0
;;;3698   		b1Hz_sh=1;
001f78  f04f0a01          MOV      r10,#1
001f7c  7c70              LDRB     r0,[r6,#0x11]         ;3692  ; sh_cnt0
001f7e  280a              CMP      r0,#0xa               ;3692
001f80  d208              BCS      |L1.8084|
001f82  f1000001          ADD      r0,r0,#1              ;3694
001f86  b2c0              UXTB     r0,r0                 ;3694
001f88  7470              STRB     r0,[r6,#0x11]         ;3694
001f8a  280a              CMP      r0,#0xa               ;3695
001f8c  d302              BCC      |L1.8084|
001f8e  7477              STRB     r7,[r6,#0x11]         ;3697
001f90  f886a012          STRB     r10,[r6,#0x12]
                  |L1.8084|
;;;3699   		}
;;;3700   	}
;;;3701   
;;;3702   /*if(sh_cnt1<5)
;;;3703   	{
;;;3704   	sh_cnt1++;
;;;3705   	if(sh_cnt1==5)
;;;3706   		{
;;;3707   		sh_cnt1=0;
;;;3708   		b2Hz_sh=1;
;;;3709   		}
;;;3710   	} */
;;;3711   
;;;3712   
;;;3713   /*
;;;3714   if(mess_find(MESS_SRC_ON_OFF))
;;;3715   	{
;;;3716   	if(mess_data[0]==_MESS_SRC_MASK_BLOK_2SEC)
;;;3717   		{
;;;3718   		char i;
;;;3719   		for(i=0;i<NUMIST;i++)
;;;3720   			{
;;;3721   			if(mess_data[1]&(1<<i))src[i]._ist_blok_cnt=20;
;;;3722   			}
;;;3723   		
;;;3724   		}
;;;3725   	else if(mess_data[0]==_MESS_SRC_MASK_UNBLOK)
;;;3726   		{
;;;3727   		char i;
;;;3728   		for(i=0;i<NUMIST;i++)
;;;3729   			{
;;;3730   			if(mess_data[1]&(1<<i))src[i]._ist_blok_cnt=0;
;;;3731   			}
;;;3732   		
;;;3733   		}
;;;3734   	}
;;;3735   	
;;;3736   else if(mess_find(_MESS_SRC_MASK_ON))
;;;3737   	{				
;;;3738   	if(mess_data[0]==_MESS_SRC_MASK_ON)
;;;3739   		{
;;;3740   		char i;
;;;3741   		for(i=0;i<NUMIST;i++)
;;;3742   			{
;;;3743   			if(mess_data[1]&(1<<i))
;;;3744   				{
;;;3745   				src[i]._ist_blok_cnt=0;
;;;3746   				src[i]._flags_tu=2;
;;;3747   				}
;;;3748   			}
;;;3749   		
;;;3750   		}				
;;;3751   	}*/
;;;3752   
;;;3753   
;;;3754   
;;;3755   /*else*/ 
;;;3756   bps_on_mask=0;
001f94  f8a6704c          STRH     r7,[r6,#0x4c]
;;;3757   bps_off_mask=0;
001f98  f8a6704e          STRH     r7,[r6,#0x4e]
;;;3758   
;;;3759   if(mess_find_unvol(MESS2BPS_HNDL))
001f9c  20cd              MOVS     r0,#0xcd
001f9e  f7fffffe          BL       mess_find_unvol
;;;3760   	{
;;;3761   	if(mess_data[0]==PARAM_BPS_ALL_OFF_AFTER_2SEC)
;;;3762   		{
;;;3763   		bps_off_mask=0xffff;
;;;3764   		}
;;;3765   
;;;3766   	if(mess_data[0]==PARAM_BPS_MASK_OFF_AFTER_2SEC)
;;;3767   		{
;;;3768   		bps_off_mask=mess_data[1];
;;;3769   		}
;;;3770   
;;;3771   	if(mess_data[0]==PARAM_BPS_MASK_ON)
;;;3772   		{
;;;3773   		bps_on_mask=mess_data[1];
;;;3774   		}
;;;3775   
;;;3776   	if(mess_data[0]==PARAM_BPS_ALL_ON)
;;;3777   		{
;;;3778   		bps_on_mask=0xffff;
;;;3779   		}
;;;3780   
;;;3781   	if(mess_data[0]==PARAM_BPS_MASK_ON_OFF_AFTER_2SEC)
;;;3782   		{
;;;3783   		bps_on_mask=mess_data[1];
;;;3784   		bps_off_mask=~(mess_data[1]);
;;;3785   		}
;;;3786   
;;;3787   
;;;3788   	for(i=0;i<=NUMIST;i++)
;;;3789   		{
;;;3790   		if(bps_off_mask&(1<<i)) bps[i]._blok_cnt++;
001fa2  f8df8318          LDR      r8,|L1.8892|
001fa6  f8dfb318          LDR      r11,|L1.8896|
001faa  b3a0              CBZ      r0,|L1.8214|
001fac  4ac5              LDR      r2,|L1.8900|
001fae  f64f73ff          MOV      r3,#0xffff            ;3763
001fb2  6810              LDR      r0,[r2,#0]            ;3761  ; mess_data
001fb4  28ce              CMP      r0,#0xce              ;3761
001fb6  d101              BNE      |L1.8124|
001fb8  f8a6304e          STRH     r3,[r6,#0x4e]         ;3763
                  |L1.8124|
001fbc  28cf              CMP      r0,#0xcf              ;3766
001fbe  d102              BNE      |L1.8134|
001fc0  6851              LDR      r1,[r2,#4]            ;3768  ; mess_data
001fc2  f8a6104e          STRH     r1,[r6,#0x4e]         ;3768
                  |L1.8134|
001fc6  28d1              CMP      r0,#0xd1              ;3771
001fc8  d102              BNE      |L1.8144|
001fca  6851              LDR      r1,[r2,#4]            ;3773  ; mess_data
001fcc  f8a6104c          STRH     r1,[r6,#0x4c]         ;3773
                  |L1.8144|
001fd0  28d2              CMP      r0,#0xd2              ;3776
001fd2  d101              BNE      |L1.8152|
001fd4  f8a6304c          STRH     r3,[r6,#0x4c]         ;3778
                  |L1.8152|
001fd8  28d0              CMP      r0,#0xd0              ;3781
001fda  d106              BNE      |L1.8170|
001fdc  6850              LDR      r0,[r2,#4]            ;3783  ; mess_data
001fde  f8a6004c          STRH     r0,[r6,#0x4c]         ;3783
001fe2  ea6f0000          MVN      r0,r0                 ;3784
001fe6  f8a6004e          STRH     r0,[r6,#0x4e]         ;3784
                  |L1.8170|
001fea  f04f0400          MOV      r4,#0                 ;3788
001fee  e037              B        |L1.8288|
                  |L1.8176|
001ff0  f8b6004e          LDRH     r0,[r6,#0x4e]  ; bps_off_mask
001ff4  fa0af904          LSL      r9,r10,r4
001ff8  ea190f00          TST      r9,r0
001ffc  d00c              BEQ      |L1.8216|
001ffe  ebc400c4          RSB      r0,r4,r4,LSL #3
002002  eb001004          ADD      r0,r0,r4,LSL #4
002006  eb080080          ADD      r0,r8,r0,LSL #2
00200a  f8301f40          LDRH     r1,[r0,#0x40]!
00200e  f1010101          ADD      r1,r1,#1
002012  8001              STRH     r1,[r0,#0]
002014  e008              B        |L1.8232|
                  |L1.8214|
002016  e028              B        |L1.8298|
                  |L1.8216|
;;;3791   		else bps[i]._blok_cnt=0;
002018  ebc400c4          RSB      r0,r4,r4,LSL #3
00201c  eb001004          ADD      r0,r0,r4,LSL #4
002020  eb080080          ADD      r0,r8,r0,LSL #2
002024  f8a07040          STRH     r7,[r0,#0x40]
                  |L1.8232|
;;;3792   		gran(&bps[i]._blok_cnt,0,50);
002028  ebc400c4          RSB      r0,r4,r4,LSL #3
00202c  eb001004          ADD      r0,r0,r4,LSL #4
002030  eb080580          ADD      r5,r8,r0,LSL #2
002034  f1050040          ADD      r0,r5,#0x40
002038  2232              MOVS     r2,#0x32
00203a  2100              MOVS     r1,#0
00203c  f7fffffe          BL       gran
;;;3793   		if(bps[i]._blok_cnt>20) bps[i]._flags_tu=1;
002040  f9b50040          LDRSH    r0,[r5,#0x40]
002044  2814              CMP      r0,#0x14
002046  dd01              BLE      |L1.8268|
002048  f885a02c          STRB     r10,[r5,#0x2c]
                  |L1.8268|
;;;3794   		if(bps_on_mask&(1<<i)) bps[i]._flags_tu=0;
00204c  f8b6004c          LDRH     r0,[r6,#0x4c]  ; bps_on_mask
002050  ea190f00          TST      r9,r0
002054  d001              BEQ      |L1.8282|
002056  f885702c          STRB     r7,[r5,#0x2c]
                  |L1.8282|
00205a  f1040401          ADD      r4,r4,#1              ;3788
00205e  b2e4              UXTB     r4,r4                 ;3788
                  |L1.8288|
002060  f9bb0000          LDRSH    r0,[r11,#0]           ;3788  ; NUMIST
002064  4284              CMP      r4,r0                 ;3788
002066  ddc3              BLE      |L1.8176|
002068  e08a              B        |L1.8576|
                  |L1.8298|
;;;3795   	     }
;;;3796   
;;;3797   	
;;;3798   /*
;;;3799   
;;;3800   	if(bps_all_off_cnt>20)
;;;3801   		{
;;;3802   		for(i=0;i<=NUMIST;i++)
;;;3803   			{
;;;3804   	     	bps[i]._flags_tu=1;
;;;3805   	     	}
;;;3806   		}
;;;3807   	else if(bps_mask_off_cnt>20)
;;;3808   		{
;;;3809   		for(i=0;i<=NUMIST;i++)
;;;3810   			{
;;;3811   			if(mess_data[1]&(1<<i)) bps[i]._flags_tu=1;
;;;3812   	     	}
;;;3813   		}	
;;;3814   		
;;;3815   	else if(bps_mask_on_off_cnt>20)
;;;3816   		{
;;;3817   		for(i=0;i<=NUMIST;i++)
;;;3818   			{
;;;3819   			if(mess_data[1]&(1<<i)) bps[i]._flags_tu=1;
;;;3820   			else bps[i]._flags_tu=0;
;;;3821   	     	}
;;;3822   		}
;;;3823   		
;;;3824   	if(mess_data[0]==PARAM_BPS_MASK_ON)
;;;3825   		{
;;;3826   		for(i=0;i<=NUMIST;i++)
;;;3827   			{
;;;3828   			if(mess_data[1]&(1<<i)) bps[i]._flags_tu=0;
;;;3829   	     	}
;;;3830   		}
;;;3831   */										
;;;3832   	}
;;;3833   
;;;3834   
;;;3835   else if(b1Hz_sh)
00206a  7cb0              LDRB     r0,[r6,#0x12]  ; b1Hz_sh
00206c  b3f0              CBZ      r0,|L1.8428|
;;;3836   	{
;;;3837   	ptr__=0;
00206e  f04f0400          MOV      r4,#0
;;;3838        for(i=0;i<=NUMIST;i++)
002072  4621              MOV      r1,r4
002074  f9bb0000          LDRSH    r0,[r11,#0]           ;3788
002078  e00a              B        |L1.8336|
                  |L1.8314|
;;;3839   		{
;;;3840   	     bps[i]._flags_tu=1;
00207a  ebc102c1          RSB      r2,r1,r1,LSL #3
00207e  eb021201          ADD      r2,r2,r1,LSL #4
002082  eb080282          ADD      r2,r8,r2,LSL #2
002086  f882a02c          STRB     r10,[r2,#0x2c]
00208a  f1010101          ADD      r1,r1,#1              ;3838
00208e  b2c9              UXTB     r1,r1                 ;3838
                  |L1.8336|
002090  4281              CMP      r1,r0                 ;3838
002092  ddf2              BLE      |L1.8314|
;;;3841   	     }	
;;;3842     	     
;;;3843     	for(i=0;(i<NUMIST)&&(ptr__<num_necc);i++)
002094  f04f0100          MOV      r1,#0
002098  e022              B        |L1.8416|
                  |L1.8346|
;;;3844     		{
;;;3845   		char ii,iii;
;;;3846   
;;;3847   		ii=(char)NUMIST;
00209a  b2c2              UXTB     r2,r0
;;;3848   		//if(ii<0)ii=0;
;;;3849   		if(ii>32)ii=32;
00209c  2a20              CMP      r2,#0x20
00209e  d901              BLS      |L1.8356|
0020a0  f04f0220          MOV      r2,#0x20
                  |L1.8356|
;;;3850   		iii=numOfForvardBps;
0020a4  7e33              LDRB     r3,[r6,#0x18]  ; numOfForvardBps
;;;3851   		if(iii<0)iii=0;
;;;3852   		if(iii>=NUMIST)iii=0;
0020a6  4283              CMP      r3,r0
0020a8  db01              BLT      |L1.8366|
0020aa  f04f0300          MOV      r3,#0
                  |L1.8366|
;;;3853   		iii+=i;
0020ae  440b              ADD      r3,r3,r1
0020b0  b2db              UXTB     r3,r3
;;;3854   		iii=iii%ii;
0020b2  fbb3f5f2          UDIV     r5,r3,r2
0020b6  fb023215          MLS      r2,r2,r5,r3
;;;3855   		
;;;3856     	     if((bps[iii]._state==bsRDY)||(bps[iii]._state==bsWRK))
0020ba  ebc203c2          RSB      r3,r2,r2,LSL #3
0020be  eb031202          ADD      r2,r3,r2,LSL #4
0020c2  eb080282          ADD      r2,r8,r2,LSL #2
0020c6  7893              LDRB     r3,[r2,#2]
0020c8  2b02              CMP      r3,#2
0020ca  d001              BEQ      |L1.8400|
0020cc  2b01              CMP      r3,#1
0020ce  d104              BNE      |L1.8410|
                  |L1.8400|
;;;3857     	         	{
;;;3858     	         	bps[iii]._flags_tu=0;
0020d0  f882702c          STRB     r7,[r2,#0x2c]
;;;3859     	         	ptr__++;
0020d4  f1040401          ADD      r4,r4,#1
0020d8  b2e4              UXTB     r4,r4
                  |L1.8410|
0020da  f1010101          ADD      r1,r1,#1              ;3843
0020de  b2c9              UXTB     r1,r1                 ;3843
                  |L1.8416|
0020e0  4281              CMP      r1,r0                 ;3843
0020e2  da06              BGE      |L1.8434|
0020e4  4a78              LDR      r2,|L1.8904|
0020e6  f9b22000          LDRSH    r2,[r2,#0]            ;3843  ; num_necc
0020ea  e000              B        |L1.8430|
                  |L1.8428|
0020ec  e048              B        |L1.8576|
                  |L1.8430|
0020ee  4294              CMP      r4,r2                 ;3843
0020f0  dbd3              BLT      |L1.8346|
                  |L1.8434|
;;;3860     	         	}
;;;3861   			
;;;3862     	     }
;;;3863   	bps[numOfForvardBps_old]._flags_tu=0;
0020f2  7e71              LDRB     r1,[r6,#0x19]  ; numOfForvardBps_old
0020f4  ebc102c1          RSB      r2,r1,r1,LSL #3
0020f8  eb021101          ADD      r1,r2,r1,LSL #4
0020fc  eb080181          ADD      r1,r8,r1,LSL #2
002100  f881702c          STRB     r7,[r1,#0x2c]
;;;3864   
;;;3865   	if(main_1Hz_cnt<60)
002104  4971              LDR      r1,|L1.8908|
002106  f9b11000          LDRSH    r1,[r1,#0]  ; main_1Hz_cnt
00210a  293c              CMP      r1,#0x3c
00210c  da0f              BGE      |L1.8494|
;;;3866   		{
;;;3867        	for(i=0;i<=NUMIST;i++)
00210e  f04f0100          MOV      r1,#0
002112  e00a              B        |L1.8490|
                  |L1.8468|
;;;3868   			{
;;;3869   	     	bps[i]._flags_tu=0;
002114  ebc102c1          RSB      r2,r1,r1,LSL #3
002118  eb021201          ADD      r2,r2,r1,LSL #4
00211c  eb080282          ADD      r2,r8,r2,LSL #2
002120  f882702c          STRB     r7,[r2,#0x2c]
002124  f1010101          ADD      r1,r1,#1              ;3867
002128  b2c9              UXTB     r1,r1                 ;3867
                  |L1.8490|
00212a  4281              CMP      r1,r0                 ;3867
00212c  ddf2              BLE      |L1.8468|
                  |L1.8494|
;;;3870   	     	}	
;;;3871   		}
;;;3872   	if(ipsBlckStat)
00212e  4968              LDR      r1,|L1.8912|
002130  8809              LDRH     r1,[r1,#0]  ; ipsBlckStat
002132  b179              CBZ      r1,|L1.8532|
;;;3873   		{
;;;3874        	for(i=0;i<=NUMIST;i++)
002134  f04f0100          MOV      r1,#0
002138  e00a              B        |L1.8528|
                  |L1.8506|
;;;3875   			{
;;;3876   	     	bps[i]._flags_tu=1;
00213a  ebc102c1          RSB      r2,r1,r1,LSL #3
00213e  eb021201          ADD      r2,r2,r1,LSL #4
002142  eb080282          ADD      r2,r8,r2,LSL #2
002146  f882a02c          STRB     r10,[r2,#0x2c]
00214a  f1010101          ADD      r1,r1,#1              ;3874
00214e  b2c9              UXTB     r1,r1                 ;3874
                  |L1.8528|
002150  4281              CMP      r1,r0                 ;3874
002152  ddf2              BLE      |L1.8506|
                  |L1.8532|
;;;3877   	     	}
;;;3878   		}
;;;3879   
;;;3880        for(i=0;i<=NUMIST;i++)
002154  f04f0100          MOV      r1,#0
;;;3881   		{
;;;3882   	    if(bps[i]._flags_tu==1) 	bps[i]._x_=-50;
002158  f06f0331          MVN      r3,#0x31
00215c  e00e              B        |L1.8572|
                  |L1.8542|
00215e  ebc102c1          RSB      r2,r1,r1,LSL #3
002162  eb021201          ADD      r2,r2,r1,LSL #4
002166  eb080282          ADD      r2,r8,r2,LSL #2
00216a  f892402c          LDRB     r4,[r2,#0x2c]
00216e  2c01              CMP      r4,#1
002170  d101              BNE      |L1.8566|
002172  f8a23050          STRH     r3,[r2,#0x50]
                  |L1.8566|
002176  f1010101          ADD      r1,r1,#1              ;3880
00217a  b2c9              UXTB     r1,r1                 ;3880
                  |L1.8572|
00217c  4281              CMP      r1,r0                 ;3880
00217e  ddee              BLE      |L1.8542|
                  |L1.8576|
;;;3883   	   	}	
;;;3884   		 
;;;3885     	}
;;;3886   
;;;3887   
;;;3888   for(i=0;i<NUMIST;i++)
002180  f04f0000          MOV      r0,#0
;;;3889        {
;;;3890        if(bps[i]._ist_blok_host_cnt!=0)
;;;3891             {
;;;3892             bps[i]._flags_tu=99;
002184  f04f0463          MOV      r4,#0x63
002188  f9bb1000          LDRSH    r1,[r11,#0]           ;3788
00218c  e00f              B        |L1.8622|
                  |L1.8590|
00218e  ebc002c0          RSB      r2,r0,r0,LSL #3       ;3890
002192  eb021200          ADD      r2,r2,r0,LSL #4       ;3890
002196  eb080282          ADD      r2,r8,r2,LSL #2       ;3890
00219a  6bd3              LDR      r3,[r2,#0x3c]         ;3890
00219c  b123              CBZ      r3,|L1.8616|
00219e  f882402c          STRB     r4,[r2,#0x2c]
;;;3893   	     bps[i]._ist_blok_host_cnt--;
0021a2  f1a30301          SUB      r3,r3,#1
0021a6  63d3              STR      r3,[r2,#0x3c]
                  |L1.8616|
0021a8  f1000001          ADD      r0,r0,#1              ;3888
0021ac  b2c0              UXTB     r0,r0                 ;3888
                  |L1.8622|
0021ae  4288              CMP      r0,r1                 ;3888
0021b0  dbed              BLT      |L1.8590|
;;;3894             }
;;;3895        }
;;;3896   
;;;3897   
;;;3898   
;;;3899   
;;;3900   b1Hz_sh=0;
0021b2  74b7              STRB     r7,[r6,#0x12]
;;;3901   
;;;3902   
;;;3903   num_of_wrks_bps=0;
0021b4  73b7              STRB     r7,[r6,#0xe]
;;;3904   tempUS=0;
0021b6  f04f0200          MOV      r2,#0
;;;3905   for(i=0;i<NUMIST;i++)
0021ba  4610              MOV      r0,r2
0021bc  e013              B        |L1.8678|
                  |L1.8638|
;;;3906   	{
;;;3907   	if(bps[i]._state==bsWRK)
0021be  ebc003c0          RSB      r3,r0,r0,LSL #3
0021c2  eb031300          ADD      r3,r3,r0,LSL #4
0021c6  eb080383          ADD      r3,r8,r3,LSL #2
0021ca  789c              LDRB     r4,[r3,#2]
0021cc  2c01              CMP      r4,#1
0021ce  d107              BNE      |L1.8672|
;;;3908   		{
;;;3909   		num_of_wrks_bps++;
0021d0  7bb4              LDRB     r4,[r6,#0xe]  ; num_of_wrks_bps
0021d2  f1040401          ADD      r4,r4,#1
0021d6  73b4              STRB     r4,[r6,#0xe]
;;;3910   		if(bps[i]._Uii>tempUS)tempUS=bps[i]._Uii;
0021d8  69db              LDR      r3,[r3,#0x1c]
0021da  4293              CMP      r3,r2
0021dc  dd00              BLE      |L1.8672|
0021de  b29a              UXTH     r2,r3
                  |L1.8672|
0021e0  f1000001          ADD      r0,r0,#1              ;3905
0021e4  b2c0              UXTB     r0,r0                 ;3905
                  |L1.8678|
0021e6  4288              CMP      r0,r1                 ;3905
0021e8  dbe9              BLT      |L1.8638|
;;;3911   		}
;;;3912   	}
;;;3913   Ubpsmax=tempUS;
0021ea  87b2              STRH     r2,[r6,#0x3c]
;;;3914   
;;;3915   bPARALLEL_ENOUG=0;
0021ec  7737              STRB     r7,[r6,#0x1c]
;;;3916   bPARALLEL_NOT_ENOUG=1;
0021ee  f886a01b          STRB     r10,[r6,#0x1b]
;;;3917   
;;;3918   for(i=0;i<NUMIST;i++)
0021f2  f04f0000          MOV      r0,#0
;;;3919   	{
;;;3920   	if(bps[i]._Ti>=TSIGN)
0021f6  4a37              LDR      r2,|L1.8916|
0021f8  f9b23000          LDRSH    r3,[r2,#0]
;;;3921   		{
;;;3922   		bPARALLEL_ENOUG=1;
;;;3923   		}
;;;3924   	if(bps[i]._Ti>=(TSIGN-5))
0021fc  f1a30405          SUB      r4,r3,#5
002200  e010              B        |L1.8740|
                  |L1.8706|
002202  ebc002c0          RSB      r2,r0,r0,LSL #3       ;3920
002206  eb021200          ADD      r2,r2,r0,LSL #4       ;3920
00220a  eb080282          ADD      r2,r8,r2,LSL #2       ;3920
00220e  6a92              LDR      r2,[r2,#0x28]         ;3920
002210  429a              CMP      r2,r3                 ;3920
002212  db01              BLT      |L1.8728|
002214  f886a01c          STRB     r10,[r6,#0x1c]        ;3922
                  |L1.8728|
002218  42a2              CMP      r2,r4
00221a  db00              BLT      |L1.8734|
;;;3925   		{
;;;3926   		bPARALLEL_NOT_ENOUG=0;
00221c  76f7              STRB     r7,[r6,#0x1b]
                  |L1.8734|
00221e  f1000001          ADD      r0,r0,#1              ;3918
002222  b2c0              UXTB     r0,r0                 ;3918
                  |L1.8740|
002224  4288              CMP      r0,r1                 ;3918
002226  dbec              BLT      |L1.8706|
;;;3927   		}
;;;3928   	}
;;;3929   
;;;3930   if(bPARALLEL_ENOUG==1)
002228  7f30              LDRB     r0,[r6,#0x1c]  ; bPARALLEL_ENOUG
00222a  2801              CMP      r0,#1
00222c  d008              BEQ      |L1.8768|
;;;3931   	{
;;;3932   	bPARALLEL=1;
;;;3933   	}
;;;3934   else if(bPARALLEL && bPARALLEL_NOT_ENOUG)
00222e  7f70              LDRB     r0,[r6,#0x1d]  ; bPARALLEL
002230  2800              CMP      r0,#0
002232  d003              BEQ      |L1.8764|
002234  7ef0              LDRB     r0,[r6,#0x1b]  ; bPARALLEL_NOT_ENOUG
002236  2800              CMP      r0,#0
002238  d000              BEQ      |L1.8764|
;;;3935   	{
;;;3936   	bPARALLEL=0;
00223a  7777              STRB     r7,[r6,#0x1d]
                  |L1.8764|
;;;3937   	}
;;;3938   }
00223c  e8bd9ff0          POP      {r4-r12,pc}
                  |L1.8768|
002240  f886a01d          STRB     r10,[r6,#0x1d]        ;3932
002244  e7fa              B        |L1.8764|
;;;3939   
                          ENDP

                  powerAntiAliasingHndl PROC
;;;3946   //-----------------------------------------------
;;;3947   void powerAntiAliasingHndl(void)
002246  b570              PUSH     {r4-r6,lr}
;;;3948   {
;;;3949   if((power_summary_tempo/10UL)==(power_summary_tempo_old/10UL))
002248  230a              MOVS     r3,#0xa
00224a  4c24              LDR      r4,|L1.8924|
00224c  4822              LDR      r0,|L1.8920|
;;;3950   	{
;;;3951   	if(powerSummaryCnt<15)powerSummaryCnt++;
;;;3952   	if(powerSummaryCnt>=10)
;;;3953   		{
;;;3954   		power_summary=power_summary_tempo;
;;;3955   		}
;;;3956   	}
;;;3957   else powerSummaryCnt=0;
00224e  2500              MOVS     r5,#0
002250  6822              LDR      r2,[r4,#0]            ;3949  ; power_summary_tempo_old
002252  6800              LDR      r0,[r0,#0]            ;3949  ; power_summary_tempo
002254  fbb2f6f3          UDIV     r6,r2,r3              ;3949
002258  fbb0f1f3          UDIV     r1,r0,r3              ;3949
00225c  4a20              LDR      r2,|L1.8928|
00225e  42b1              CMP      r1,r6                 ;3949
002260  d10b              BNE      |L1.8826|
002262  7811              LDRB     r1,[r2,#0]            ;3951  ; powerSummaryCnt
002264  290f              CMP      r1,#0xf               ;3951
002266  d202              BCS      |L1.8814|
002268  f1010101          ADD      r1,r1,#1              ;3951
00226c  7011              STRB     r1,[r2,#0]            ;3951
                  |L1.8814|
00226e  7811              LDRB     r1,[r2,#0]            ;3952  ; powerSummaryCnt
002270  290a              CMP      r1,#0xa               ;3952
002272  d303              BCC      |L1.8828|
002274  491b              LDR      r1,|L1.8932|
002276  6008              STR      r0,[r1,#0]            ;3954  ; power_summary
002278  e000              B        |L1.8828|
                  |L1.8826|
00227a  7015              STRB     r5,[r2,#0]
                  |L1.8828|
;;;3958   power_summary_tempo_old=power_summary_tempo;
00227c  6020              STR      r0,[r4,#0]  ; power_summary_tempo_old
;;;3959   
;;;3960   if((power_current_tempo/10UL)==(power_current_tempo_old/10UL))
00227e  481a              LDR      r0,|L1.8936|
002280  4c1a              LDR      r4,|L1.8940|
002282  f9b00000          LDRSH    r0,[r0,#0]  ; power_current_tempo
002286  f9b42000          LDRSH    r2,[r4,#0]  ; power_current_tempo_old
00228a  fbb0f1f3          UDIV     r1,r0,r3
00228e  fbb2f3f3          UDIV     r3,r2,r3
;;;3961   	{
;;;3962   	if(powerCurrentCnt<15)powerCurrentCnt++;
002292  4a17              LDR      r2,|L1.8944|
002294  4299              CMP      r1,r3                 ;3960
002296  d12f              BNE      |L1.8952|
002298  7811              LDRB     r1,[r2,#0]  ; powerCurrentCnt
00229a  290f              CMP      r1,#0xf
00229c  d202              BCS      |L1.8868|
00229e  f1010101          ADD      r1,r1,#1
0022a2  7011              STRB     r1,[r2,#0]
                  |L1.8868|
;;;3963   	if(powerCurrentCnt>=10)
0022a4  7811              LDRB     r1,[r2,#0]  ; powerCurrentCnt
0022a6  290a              CMP      r1,#0xa
0022a8  d327              BCC      |L1.8954|
;;;3964   		{
;;;3965   		power_current=power_current_tempo;
0022aa  4912              LDR      r1,|L1.8948|
0022ac  8008              STRH     r0,[r1,#0]
0022ae  e024              B        |L1.8954|
                  |L1.8880|
                          DCD      DOP_RELE_FUNC
                  |L1.8884|
                          DCD      speedChIsOn
                  |L1.8888|
                          DCD      ||area_number.21||
                  |L1.8892|
                          DCD      bps
                  |L1.8896|
                          DCD      NUMIST
                  |L1.8900|
                          DCD      mess_data
                  |L1.8904|
                          DCD      num_necc
                  |L1.8908|
                          DCD      main_1Hz_cnt
                  |L1.8912|
                          DCD      ipsBlckStat
                  |L1.8916|
                          DCD      TSIGN
                  |L1.8920|
                          DCD      power_summary_tempo
                  |L1.8924|
                          DCD      power_summary_tempo_old
                  |L1.8928|
                          DCD      powerSummaryCnt
                  |L1.8932|
                          DCD      power_summary
                  |L1.8936|
                          DCD      power_current_tempo
                  |L1.8940|
                          DCD      power_current_tempo_old
                  |L1.8944|
                          DCD      powerCurrentCnt
                  |L1.8948|
                          DCD      power_current
                  |L1.8952|
;;;3966   		}
;;;3967   	}
;;;3968   else powerCurrentCnt=0;
0022f8  7015              STRB     r5,[r2,#0]
                  |L1.8954|
;;;3969   power_current_tempo_old=power_current_tempo;
0022fa  8020              STRH     r0,[r4,#0]
;;;3970   }
0022fc  bd70              POP      {r4-r6,pc}
;;;3971   
                          ENDP

                  ips_current_average_hndl PROC
;;;3972   //-----------------------------------------------
;;;3973   void ips_current_average_hndl(void)
0022fe  e92d43f0          PUSH     {r4-r9,lr}
;;;3974   {
002302  b085              SUB      sp,sp,#0x14
;;;3975   if(++ica_timer_cnt>=10)
002304  4cff              LDR      r4,|L1.9988|
;;;3976   	{
;;;3977   	ica_timer_cnt=0;
002306  2500              MOVS     r5,#0
;;;3978   	ica_plazma[0]++;
;;;3979   
;;;3980   	ica_my_current=bps_I;
;;;3981   
;;;3982   	if((ica_my_current>ica_your_current)&&((ica_my_current-ica_your_current)>=10)&&(ICA_EN==1))
002308  4eff              LDR      r6,|L1.9992|
00230a  7820              LDRB     r0,[r4,#0]            ;3975  ; ica_timer_cnt
00230c  1c40              ADDS     r0,r0,#1              ;3975
00230e  b2c0              UXTB     r0,r0                 ;3975
002310  7020              STRB     r0,[r4,#0]            ;3975
002312  280a              CMP      r0,#0xa               ;3975
002314  d340              BCC      |L1.9112|
002316  7025              STRB     r5,[r4,#0]            ;3977
002318  f8dfc3f0          LDR      r12,|L1.9996|
00231c  f89c0000          LDRB     r0,[r12,#0]           ;3978  ; ica_plazma
002320  f1000001          ADD      r0,r0,#1              ;3978
002324  f88c0000          STRB     r0,[r12,#0]           ;3978
002328  48f9              LDR      r0,|L1.10000|
00232a  49fa              LDR      r1,|L1.10004|
00232c  f9b00000          LDRSH    r0,[r0,#0]            ;3980  ; bps_I
002330  8008              STRH     r0,[r1,#0]            ;3980
002332  49f9              LDR      r1,|L1.10008|
;;;3983   		{
;;;3984   		ica_plazma[1]++;
;;;3985   		ica_u_necc--;
002334  f8df83e4          LDR      r8,|L1.10012|
002338  4662              MOV      r2,r12                ;3978
00233a  4637              MOV      r7,r6                 ;3982
00233c  f9b11000          LDRSH    r1,[r1,#0]            ;3982  ; ica_your_current
002340  7852              LDRB     r2,[r2,#1]            ;3984
002342  f9b83000          LDRSH    r3,[r8,#0]
002346  f9b77000          LDRSH    r7,[r7,#0]            ;3982
00234a  4288              CMP      r0,r1                 ;3982
00234c  dd06              BLE      |L1.9052|
00234e  eba00901          SUB      r9,r0,r1              ;3982
002352  f1b90f0a          CMP      r9,#0xa               ;3982
002356  db01              BLT      |L1.9052|
002358  2f01              CMP      r7,#1                 ;3982
00235a  d007              BEQ      |L1.9068|
                  |L1.9052|
;;;3986   		}
;;;3987   	else if((ica_my_current<ica_your_current)&&((ica_your_current-ica_my_current)>=10)&&(ICA_EN==1))
00235c  4288              CMP      r0,r1
00235e  da16              BGE      |L1.9102|
002360  1a08              SUBS     r0,r1,r0
002362  280a              CMP      r0,#0xa
002364  db13              BLT      |L1.9102|
002366  2f01              CMP      r7,#1
002368  d009              BEQ      |L1.9086|
00236a  e010              B        |L1.9102|
                  |L1.9068|
00236c  f1020201          ADD      r2,r2,#1              ;3984
002370  f88c2001          STRB     r2,[r12,#1]           ;3984
002374  f1a30301          SUB      r3,r3,#1              ;3985
002378  f8a83000          STRH     r3,[r8,#0]            ;3985
00237c  e007              B        |L1.9102|
                  |L1.9086|
;;;3988   		{
;;;3989   		ica_plazma[1]--;
00237e  f1a20201          SUB      r2,r2,#1
002382  f88c2001          STRB     r2,[r12,#1]
;;;3990   		ica_u_necc++;
002386  f1030301          ADD      r3,r3,#1
00238a  f8a83000          STRH     r3,[r8,#0]
                  |L1.9102|
;;;3991   		}
;;;3992   	gran(&ica_u_necc,-20,20);
00238e  2214              MOVS     r2,#0x14
002390  4251              RSBS     r1,r2,#0
002392  48e2              LDR      r0,|L1.10012|
002394  f7fffffe          BL       gran
                  |L1.9112|
;;;3993   	}
;;;3994   
;;;3995   if((ica_timer_cnt==8)&&(ICA_EN==1))
002398  7820              LDRB     r0,[r4,#0]  ; ica_timer_cnt
00239a  2808              CMP      r0,#8
00239c  d134              BNE      |L1.9224|
00239e  8830              LDRH     r0,[r6,#0]  ; ICA_EN
0023a0  2801              CMP      r0,#1
0023a2  d131              BNE      |L1.9224|
;;;3996   	{
;;;3997   	char modbus_buff[20],i;
;;;3998   	short crc_temp;
;;;3999   
;;;4000   	modbus_buff[0] = ICA_MODBUS_ADDRESS;
0023a4  48de              LDR      r0,|L1.10016|
0023a6  8800              LDRH     r0,[r0,#0]  ; ICA_MODBUS_ADDRESS
0023a8  f88d0000          STRB     r0,[sp,#0]
;;;4001   	modbus_buff[1] = 4;
0023ac  f04f0004          MOV      r0,#4
0023b0  f88d0001          STRB     r0,[sp,#1]
;;;4002   	modbus_buff[2] = 0;
0023b4  f88d5002          STRB     r5,[sp,#2]
;;;4003   	modbus_buff[3] = 2;
0023b8  f04f0002          MOV      r0,#2
0023bc  f88d0003          STRB     r0,[sp,#3]
;;;4004   	modbus_buff[4] = 0;	
0023c0  f88d5004          STRB     r5,[sp,#4]
;;;4005   	modbus_buff[5] = 1;
0023c4  f04f0001          MOV      r0,#1
0023c8  f88d0005          STRB     r0,[sp,#5]
;;;4006   
;;;4007   	crc_temp= CRC16_2(modbus_buff,6);
0023cc  f04f0106          MOV      r1,#6
0023d0  4668              MOV      r0,sp
0023d2  f7fffffe          BL       CRC16_2
;;;4008   
;;;4009   	modbus_buff[6]= (char)crc_temp;
0023d6  f88d0006          STRB     r0,[sp,#6]
;;;4010   	modbus_buff[7]= (char)(crc_temp>>8);
0023da  ea4f2020          ASR      r0,r0,#8
0023de  f88d0007          STRB     r0,[sp,#7]
;;;4011   
;;;4012   	if(ICA_CH==0)
0023e2  48d0              LDR      r0,|L1.10020|
0023e4  f9b00000          LDRSH    r0,[r0,#0]  ; ICA_CH
0023e8  b188              CBZ      r0,|L1.9230|
;;;4013   		{
;;;4014   		for (i=0;i<8;i++)
;;;4015   			{
;;;4016   			putchar_sc16is700(modbus_buff[i]);
;;;4017   			}
;;;4018   		}
;;;4019   	else if(ICA_CH==1)
0023ea  2801              CMP      r0,#1
0023ec  d10c              BNE      |L1.9224|
;;;4020   		{
;;;4021   		static U8 rem_IP[4];
;;;4022   		rem_IP[0]=ICA_MODBUS_TCP_IP1;
0023ee  48ce              LDR      r0,|L1.10024|
0023f0  8801              LDRH     r1,[r0,#0]  ; ICA_MODBUS_TCP_IP1
0023f2  48ce              LDR      r0,|L1.10028|
0023f4  7001              STRB     r1,[r0,#0]
;;;4023   		rem_IP[1]=ICA_MODBUS_TCP_IP2;
0023f6  49ce              LDR      r1,|L1.10032|
0023f8  8809              LDRH     r1,[r1,#0]  ; ICA_MODBUS_TCP_IP2
0023fa  7041              STRB     r1,[r0,#1]
;;;4024   		rem_IP[2]=ICA_MODBUS_TCP_IP3;
0023fc  49cd              LDR      r1,|L1.10036|
0023fe  8809              LDRH     r1,[r1,#0]  ; ICA_MODBUS_TCP_IP3
002400  7081              STRB     r1,[r0,#2]
;;;4025   		rem_IP[3]=ICA_MODBUS_TCP_IP4;
002402  49cd              LDR      r1,|L1.10040|
002404  8809              LDRH     r1,[r1,#0]  ; ICA_MODBUS_TCP_IP4
002406  70c1              STRB     r1,[r0,#3]
                  |L1.9224|
;;;4026     		//tcp_soc_avg = tcp_get_socket (TCP_TYPE_CLIENT, 0, 30, tcp_callback);
;;;4027     		if (tcp_soc_avg != 0) 
;;;4028   			{
;;;4029       		
;;;4030   			//tcp_connect_stat=0;
;;;4031       		//tcp_connect (tcp_soc_avg, rem_IP, 502, 1000);
;;;4032   			/*while(!tcp_connect_stat)
;;;4033   				{
;;;4034   				}*/
;;;4035   			//delay_us(500);
;;;4036   			//tcp_close(tcp_soc_avg);
;;;4037   
;;;4038   			}
;;;4039   		}
;;;4040   	}
;;;4041   
;;;4042   if((ica_timer_cnt==3)&&(ICA_EN==1))
;;;4043   	{
;;;4044   	//if(tcp_connect_stat)
;;;4045   		{
;;;4046   		//tcp_close(tcp_soc_avg);
;;;4047   		//tcp_connect_stat=3;
;;;4048   		}
;;;4049   	}
;;;4050   
;;;4051   }
002408  b005              ADD      sp,sp,#0x14
00240a  e8bd83f0          POP      {r4-r9,pc}
                  |L1.9230|
00240e  f04f0400          MOV      r4,#0                 ;4014
002412  466d              MOV      r5,sp                 ;3997
                  |L1.9236|
002414  5d28              LDRB     r0,[r5,r4]            ;4016
002416  f7fffffe          BL       putchar_sc16is700
00241a  f1040401          ADD      r4,r4,#1              ;4014
00241e  b2e4              UXTB     r4,r4                 ;4014
002420  2c08              CMP      r4,#8                 ;4014
002422  d3f7              BCC      |L1.9236|
002424  e7f0              B        |L1.9224|
;;;4052   
                          ENDP

                  ipsBlckHndl PROC
;;;4135   //-----------------------------------------------
;;;4136   void ipsBlckHndl(char in)
002426  b510              PUSH     {r4,lr}
;;;4137   {
;;;4138   
;;;4139   ipsBlckStat=0;
002428  4bc4              LDR      r3,|L1.10044|
00242a  f04f0000          MOV      r0,#0
00242e  8018              STRH     r0,[r3,#0]
;;;4140   if(ipsBlckSrc==1)
002430  48c3              LDR      r0,|L1.10048|
002432  f04f0401          MOV      r4,#1
;;;4141   	{
;;;4142   	if(((ipsBlckLog==0)&&(adc_buff_[11]>2000)) || ((ipsBlckLog==1)&&(adc_buff_[11]<2000))) ipsBlckStat=1;
002436  f44f62fa          MOV      r2,#0x7d0
00243a  f9b01000          LDRSH    r1,[r0,#0]            ;4140  ; ipsBlckSrc
00243e  48c1              LDR      r0,|L1.10052|
002440  2901              CMP      r1,#1                 ;4140
002442  f9b00000          LDRSH    r0,[r0,#0]
002446  d006              BEQ      |L1.9302|
;;;4143   	}
;;;4144   else if(ipsBlckSrc==2)
002448  2902              CMP      r1,#2
00244a  d10f              BNE      |L1.9324|
00244c  49be              LDR      r1,|L1.10056|
;;;4145   	{
;;;4146   	if(((ipsBlckLog==0)&&(adc_buff_[13]>2000)) || ((ipsBlckLog==1)&&(adc_buff_[13]<2000))) ipsBlckStat=1;
00244e  f9b1101a          LDRSH    r1,[r1,#0x1a]
002452  b160              CBZ      r0,|L1.9326|
002454  e00d              B        |L1.9330|
                  |L1.9302|
002456  49bc              LDR      r1,|L1.10056|
002458  f9b11016          LDRSH    r1,[r1,#0x16]         ;4142
00245c  b908              CBNZ     r0,|L1.9314|
00245e  4291              CMP      r1,r2                 ;4142
002460  dc03              BGT      |L1.9322|
                  |L1.9314|
002462  2801              CMP      r0,#1                 ;4142
002464  d102              BNE      |L1.9324|
002466  4291              CMP      r1,r2                 ;4142
002468  da00              BGE      |L1.9324|
                  |L1.9322|
00246a  801c              STRH     r4,[r3,#0]            ;4142
                  |L1.9324|
;;;4147   	}
;;;4148   }
00246c  bd10              POP      {r4,pc}
                  |L1.9326|
00246e  4291              CMP      r1,r2                 ;4146
002470  dc03              BGT      |L1.9338|
                  |L1.9330|
002472  2801              CMP      r0,#1                 ;4146
002474  d1fa              BNE      |L1.9324|
002476  4291              CMP      r1,r2                 ;4146
002478  daf8              BGE      |L1.9324|
                  |L1.9338|
00247a  801c              STRH     r4,[r3,#0]            ;4146
00247c  bd10              POP      {r4,pc}
;;;4149   
                          ENDP

                  bps_drv PROC
;;;4150   //-----------------------------------------------
;;;4151   void bps_drv(char in)
00247e  e92d41f0          PUSH     {r4-r8,lr}
;;;4152   {
002482  4606              MOV      r6,r0
;;;4153   char temp;
;;;4154   
;;;4155   if (bps[in]._device!=dSRC) return;
002484  ebc600c6          RSB      r0,r6,r6,LSL #3
002488  49b0              LDR      r1,|L1.10060|
00248a  eb001006          ADD      r0,r0,r6,LSL #4
00248e  f8112020          LDRB     r2,[r1,r0,LSL #2]
002492  2a03              CMP      r2,#3
002494  d177              BNE      |L1.9606|
;;;4156   temp=bps[in]._flags_tm;
002496  eb010480          ADD      r4,r1,r0,LSL #2
00249a  f8945042          LDRB     r5,[r4,#0x42]
;;;4157   if(temp&(1<<AV_T))
00249e  07a8              LSLS     r0,r5,#30
0024a0  d517              BPL      |L1.9426|
;;;4158   	{
;;;4159   	if(bps[in]._temp_av_cnt<1200) 
0024a2  f9b41046          LDRSH    r1,[r4,#0x46]
0024a6  f44f6096          MOV      r0,#0x4b0
0024aa  4281              CMP      r1,r0
0024ac  da22              BGE      |L1.9460|
;;;4160   		{
;;;4161   		bps[in]._temp_av_cnt++;
0024ae  f1010101          ADD      r1,r1,#1
0024b2  b209              SXTH     r1,r1
0024b4  f8a41046          STRH     r1,[r4,#0x46]
;;;4162   		if(bps[in]._temp_av_cnt>=1200)
0024b8  4281              CMP      r1,r0
0024ba  db1b              BLT      |L1.9460|
;;;4163   			{
;;;4164   			bps[in]._temp_av_cnt=1200;
0024bc  f8a40046          STRH     r0,[r4,#0x46]
;;;4165   		   	if(!(bps[in]._av&(1<<0)))avar_bps_hndl(in,0,1);
0024c0  7860              LDRB     r0,[r4,#1]
0024c2  07c0              LSLS     r0,r0,#31
0024c4  d116              BNE      |L1.9460|
0024c6  2201              MOVS     r2,#1
0024c8  2100              MOVS     r1,#0
0024ca  4630              MOV      r0,r6
0024cc  f7fffffe          BL       avar_bps_hndl
0024d0  e010              B        |L1.9460|
                  |L1.9426|
;;;4166   			}
;;;4167   		}
;;;4168   	}
;;;4169   
;;;4170   else if(!(temp&(1<<AV_T)))
;;;4171   	{
;;;4172   	if(bps[in]._temp_av_cnt) 
0024d2  f9b41046          LDRSH    r1,[r4,#0x46]
0024d6  b169              CBZ      r1,|L1.9460|
;;;4173   		{
;;;4174   		bps[in]._temp_av_cnt--;
0024d8  f1a10101          SUB      r1,r1,#1
0024dc  b208              SXTH     r0,r1
0024de  f8a40046          STRH     r0,[r4,#0x46]
;;;4175   		if(!bps[in]._temp_av_cnt)
0024e2  b938              CBNZ     r0,|L1.9460|
;;;4176   			{
;;;4177   			if(bps[in]._av&(1<<0))avar_bps_hndl(in,0,0);
0024e4  7860              LDRB     r0,[r4,#1]
0024e6  07c0              LSLS     r0,r0,#31
0024e8  d004              BEQ      |L1.9460|
0024ea  2200              MOVS     r2,#0
0024ec  4611              MOV      r1,r2
0024ee  4630              MOV      r0,r6
0024f0  f7fffffe          BL       avar_bps_hndl
                  |L1.9460|
;;;4178   			}
;;;4179   		} 	
;;;4180   
;;;4181   	}
;;;4182   
;;;4183   if((temp&(1<<AVUMAX)))
0024f4  0729              LSLS     r1,r5,#28
;;;4184   	{
;;;4185   	if(bps[in]._umax_av_cnt<10) 
;;;4186   		{
;;;4187   		bps[in]._umax_av_cnt++;
;;;4188   		if(bps[in]._umax_av_cnt>=10)
;;;4189   			{ 
;;;4190   			bps[in]._umax_av_cnt=10;
0024f6  f04f070a          MOV      r7,#0xa
0024fa  f04f0000          MOV      r0,#0                 ;4165
0024fe  d515              BPL      |L1.9516|
002500  f9b40048          LDRSH    r0,[r4,#0x48]         ;4185
002504  280a              CMP      r0,#0xa               ;4185
002506  da26              BGE      |L1.9558|
002508  f1000001          ADD      r0,r0,#1              ;4187
00250c  b200              SXTH     r0,r0                 ;4187
00250e  f8a40048          STRH     r0,[r4,#0x48]         ;4187
002512  280a              CMP      r0,#0xa               ;4188
002514  db1f              BLT      |L1.9558|
002516  f8a47048          STRH     r7,[r4,#0x48]
;;;4191   			if(!(bps[in]._av&(1<<1)))avar_bps_hndl(in,1,1);
00251a  7860              LDRB     r0,[r4,#1]
00251c  0780              LSLS     r0,r0,#30
00251e  d41a              BMI      |L1.9558|
002520  2201              MOVS     r2,#1
002522  4611              MOV      r1,r2
002524  4630              MOV      r0,r6
002526  f7fffffe          BL       avar_bps_hndl
00252a  e014              B        |L1.9558|
                  |L1.9516|
;;;4192   		  	/*if((K[APV]!=ON)||((apv_cnt[in,0]==0)&&(apv_cnt[in,1]==0)&&(apv_cnt[in,2]==0)&&(apv_flags[in]==afOFF)))avar_s_hndl(in,1,1);
;;;4193   			if((apv_cnt[in,0]==0)&&(apv_cnt[in,1]==0)&&(apv_cnt[in,2]==0)&&(apv_flags[in]==afON))
;;;4194   				{
;;;4195   				apv_cnt[in,0]=APV_INIT;
;;;4196   				apv_cnt[in,1]=APV_INIT;
;;;4197   				apv_cnt[in,2]=APV_INIT;
;;;4198   				apv_flags[in]=afOFF;
;;;4199   				}				*/
;;;4200   						
;;;4201   			}
;;;4202   		} 
;;;4203   	}		
;;;4204   else if(!(temp&(1<<AVUMAX)))
;;;4205   	{
;;;4206   	if(bps[in]._umax_av_cnt>0) 
00252c  f9b41048          LDRSH    r1,[r4,#0x48]
002530  2900              CMP      r1,#0
002532  dd0d              BLE      |L1.9552|
;;;4207   		{
;;;4208   		bps[in]._umax_av_cnt--;
002534  f1a10101          SUB      r1,r1,#1
002538  b208              SXTH     r0,r1
00253a  f8a40048          STRH     r0,[r4,#0x48]
;;;4209   		if(bps[in]._umax_av_cnt==0)
00253e  b950              CBNZ     r0,|L1.9558|
;;;4210   			{
;;;4211   			bps[in]._umax_av_cnt=0;
;;;4212   			avar_bps_hndl(in,1,0);
002540  f04f0200          MOV      r2,#0
002544  f04f0101          MOV      r1,#1
002548  4630              MOV      r0,r6
00254a  f7fffffe          BL       avar_bps_hndl
00254e  e002              B        |L1.9558|
                  |L1.9552|
;;;4213   	 //		apv_cnt[in,0]=0;
;;;4214   	//		apv_cnt[in,1]=0;
;;;4215   	 //		apv_cnt[in,2]=0;			
;;;4216   			}
;;;4217   		}
;;;4218   	else if(bps[in]._umax_av_cnt<0) bps[in]._umax_av_cnt=0;		 
002550  da01              BGE      |L1.9558|
002552  f8a40048          STRH     r0,[r4,#0x48]
                  |L1.9558|
;;;4219   	}
;;;4220   
;;;4221   if(temp&(1<<AVUMIN))
002556  06e8              LSLS     r0,r5,#27
002558  d516              BPL      |L1.9608|
;;;4222   	{
;;;4223   	if(bps[in]._umin_av_cnt<10) 
00255a  f9b4004a          LDRSH    r0,[r4,#0x4a]
00255e  280a              CMP      r0,#0xa
002560  da20              BGE      |L1.9636|
;;;4224   		{
;;;4225   		bps[in]._umin_av_cnt++;
002562  f1000001          ADD      r0,r0,#1
002566  b200              SXTH     r0,r0
002568  f8a4004a          STRH     r0,[r4,#0x4a]
;;;4226   		if(bps[in]._umin_av_cnt>=10)
00256c  280a              CMP      r0,#0xa
00256e  db19              BLT      |L1.9636|
;;;4227   			{ 
;;;4228   			bps[in]._umin_av_cnt=10;
002570  f8a4704a          STRH     r7,[r4,#0x4a]
;;;4229   			if(!(bps[in]._av&(1<<2)))avar_bps_hndl(in,2,1);
002574  7860              LDRB     r0,[r4,#1]
002576  0740              LSLS     r0,r0,#29
002578  d414              BMI      |L1.9636|
00257a  2201              MOVS     r2,#1
00257c  2102              MOVS     r1,#2
00257e  4630              MOV      r0,r6
002580  f7fffffe          BL       avar_bps_hndl
002584  e00e              B        |L1.9636|
                  |L1.9606|
002586  e047              B        |L1.9752|
                  |L1.9608|
;;;4230   		  	/*	if((K[APV]!=ON)||((apv_cnt[in,0]==0)&&(apv_cnt[in,1]==0)&&(apv_cnt[in,2]==0)&&(apv_flags[in]==afOFF)))avar_s_hndl(in,2,1);
;;;4231   			if((apv_cnt[in,0]==0)&&(apv_cnt[in,1]==0)&&(apv_cnt[in,2]==0)&&(apv_flags[in]==afON))
;;;4232   				{
;;;4233   				apv_cnt[in,0]=APV_INIT;
;;;4234   				apv_cnt[in,1]=APV_INIT;
;;;4235   				apv_cnt[in,2]=APV_INIT;
;;;4236   				apv_flags[in]=afOFF;
;;;4237   				}*/				
;;;4238   			}
;;;4239   		} 
;;;4240   	}	
;;;4241   	
;;;4242   else if(!(temp&(1<<AVUMIN)))
;;;4243   	{
;;;4244   	if(bps[in]._umin_av_cnt) 
002588  f9b4004a          LDRSH    r0,[r4,#0x4a]
00258c  b150              CBZ      r0,|L1.9636|
;;;4245   		{
;;;4246   		bps[in]._umin_av_cnt--;
00258e  f1a00001          SUB      r0,r0,#1
002592  b201              SXTH     r1,r0
002594  f8a4104a          STRH     r1,[r4,#0x4a]
;;;4247   		if(bps[in]._umin_av_cnt==0)
002598  b921              CBNZ     r1,|L1.9636|
;;;4248   			{
;;;4249   			bps[in]._umin_av_cnt=0;
;;;4250   			avar_bps_hndl(in,2,0);
00259a  2200              MOVS     r2,#0
00259c  2102              MOVS     r1,#2
00259e  4630              MOV      r0,r6
0025a0  f7fffffe          BL       avar_bps_hndl
                  |L1.9636|
;;;4251   		//	apv_cnt[in,0]=0;
;;;4252   		//	apv_cnt[in,1]=0;
;;;4253   		//	apv_cnt[in,2]=0;
;;;4254   			}
;;;4255   		}
;;;4256   	else if(bps[in]._umin_av_cnt>10)bps[in]._umin_av_cnt--;	 
;;;4257   	}
;;;4258   
;;;4259   //bps[in]._state=bsOFF;
;;;4260   
;;;4261   if (bps[in]._av&0x0f)					bps[in]._state=bsAV;
0025a4  7860              LDRB     r0,[r4,#1]
0025a6  0700              LSLS     r0,r0,#28
0025a8  d003              BEQ      |L1.9650|
0025aa  f04f0004          MOV      r0,#4
0025ae  70a0              STRB     r0,[r4,#2]
0025b0  e017              B        |L1.9698|
                  |L1.9650|
;;;4262   else if ( (net_av) && (bps[in]._cnt>20)/*&& 
0025b2  4867              LDR      r0,|L1.10064|
0025b4  7800              LDRB     r0,[r0,#0]  ; net_av
0025b6  b130              CBZ      r0,|L1.9670|
0025b8  78e0              LDRB     r0,[r4,#3]
0025ba  2814              CMP      r0,#0x14
0025bc  d903              BLS      |L1.9670|
;;;4263   		(bps[in]._Uii<200)*/)				bps[in]._state=bsOFF_AV_NET;
0025be  f04f0005          MOV      r0,#5
0025c2  70a0              STRB     r0,[r4,#2]
0025c4  e00d              B        |L1.9698|
                  |L1.9670|
;;;4264   else if (bps[in]._flags_tm&BIN8(100000))	bps[in]._state=bsRDY;
0025c6  f8940042          LDRB     r0,[r4,#0x42]
0025ca  0680              LSLS     r0,r0,#26
0025cc  d503              BPL      |L1.9686|
0025ce  f04f0002          MOV      r0,#2
0025d2  70a0              STRB     r0,[r4,#2]
0025d4  e005              B        |L1.9698|
                  |L1.9686|
;;;4265   else if (bps[in]._cnt<20)				bps[in]._state=bsWRK;
0025d6  78e0              LDRB     r0,[r4,#3]
0025d8  2814              CMP      r0,#0x14
0025da  d202              BCS      |L1.9698|
0025dc  f04f0001          MOV      r0,#1
0025e0  70a0              STRB     r0,[r4,#2]
                  |L1.9698|
;;;4266   
;;;4267   
;;;4268   
;;;4269   //else if(bps[in]._flags_tm&BIN8(100000)) bps[in]._state=ssBL;
;;;4270   //else if((!(bps[in]._flags_tm&BIN8(100000)))&&(net_U>100))bps[in]._state=ssWRK;
;;;4271   //else bps[0]._state=ssNOT;
;;;4272   
;;;4273   //bps[in]._is_ready=0;
;;;4274   //bps[in]._is_wrk=0;
;;;4275   //if(bps[in]._av_net) bps[in]._flags_bp='N';//  
;;;4276   //else if(bps[in]._av_u_max) bps[in]._flags_bp='P';//  (u_.av_.bAS1T)) bps_state[0]=ssAV;
;;;4277   //else if(bps[in]._av_u_min) bps[in]._flags_bp='M';//  
;;;4278   //else if(bps[in]._av_temper) bps[in]._flags_bp='T';// 
;;;4279   //else if(bps[in]._flags_tm&BIN8(100000)) 
;;;4280   //	{
;;;4281   //	bps[in]._flags_bp='B';// 
;;;4282   //	bps[in]._is_ready=1;
;;;4283   //	}
;;;4284   //else if((!(bps[in]._flags_tm&BIN8(100000)))&&(net_U>100))
;;;4285   //     {
;;;4286   //     bps[in]._flags_bp='W';// 
;;;4287   //     bps[in]._is_ready=1;
;;;4288   //     bps[in]._is_wrk=1;
;;;4289        
;;;4290   //     }
;;;4291   //else bps[in]._is_ready=1;     
;;;4292   
;;;4293   
;;;4294   
;;;4295   
;;;4296   
;;;4297   /*
;;;4298   bps[in]._flags_tu&=BIN8(11111110);
;;;4299   if(bps[in]._ist_blok_cnt)
;;;4300   	{
;;;4301   	bps[in]._ist_blok_cnt--;
;;;4302   	bps[in]._flags_tu|=BIN8(1);
;;;4303   	}
;;;4304   
;;;4305   	   */ 
;;;4306   
;;;4307   //    
;;;4308   if(bps[in]._cnt>=10) bps[in]._flags_tu|=BIN8(10000000);
0025e2  78e0              LDRB     r0,[r4,#3]
0025e4  280a              CMP      r0,#0xa
0025e6  d306              BCC      |L1.9718|
0025e8  f894002c          LDRB     r0,[r4,#0x2c]
0025ec  f0400080          ORR      r0,r0,#0x80
0025f0  f884002c          STRB     r0,[r4,#0x2c]
0025f4  e005              B        |L1.9730|
                  |L1.9718|
;;;4309   else bps[in]._flags_tu&=BIN8(1111111);
0025f6  f894002c          LDRB     r0,[r4,#0x2c]
0025fa  f000007f          AND      r0,r0,#0x7f
0025fe  f884002c          STRB     r0,[r4,#0x2c]
                  |L1.9730|
;;;4310   	
;;;4311   bps[in]._vol_u=cntrl_stat+bps[in]._x_;	
002602  494a              LDR      r1,|L1.10028|
002604  f9b40050          LDRSH    r0,[r4,#0x50]
002608  3970              SUBS     r1,r1,#0x70
00260a  f9b11020          LDRSH    r1,[r1,#0x20]  ; cntrl_stat
00260e  4408              ADD      r0,r0,r1
002610  6320              STR      r0,[r4,#0x30]
;;;4312   bps[in]._vol_i=1000; 
002612  f44f707a          MOV      r0,#0x3e8
002616  6360              STR      r0,[r4,#0x34]
                  |L1.9752|
;;;4313   }
002618  e464              B        |L1.7908|
;;;4314   
                          ENDP

                  avt_hndl PROC
;;;4315   //-----------------------------------------------
;;;4316   void avt_hndl(void)
00261a  b570              PUSH     {r4-r6,lr}
;;;4317   {
;;;4318   char i;
;;;4319   for(i=0;i<12;i++)
00261c  f04f0000          MOV      r0,#0
;;;4320   	{
;;;4321   	if(eb2_data_short[6]&(1<<i))
002620  494c              LDR      r1,|L1.10068|
;;;4322   		{
;;;4323   		avt_stat[i]=avtON;
002622  4d4d              LDR      r5,|L1.10072|
002624  f04f0401          MOV      r4,#1                 ;4321
002628  f9b1200c          LDRSH    r2,[r1,#0xc]          ;4321
00262c  4603              MOV      r3,r0                 ;4319
                  |L1.9774|
00262e  fa04f100          LSL      r1,r4,r0              ;4321
002632  420a              TST      r2,r1                 ;4321
002634  d001              BEQ      |L1.9786|
002636  542c              STRB     r4,[r5,r0]
002638  e000              B        |L1.9788|
                  |L1.9786|
;;;4324   		}
;;;4325   	else avt_stat[i]=avtOFF;
00263a  542b              STRB     r3,[r5,r0]
                  |L1.9788|
00263c  f1000001          ADD      r0,r0,#1              ;4319
002640  b2c0              UXTB     r0,r0                 ;4319
002642  280c              CMP      r0,#0xc               ;4319
002644  d3f3              BCC      |L1.9774|
;;;4326   	}
;;;4327   
;;;4328   if((avt_stat_old[0]!=avt_stat[0])&&(NUMAVT>=1))
002646  4e45              LDR      r6,|L1.10076|
002648  7828              LDRB     r0,[r5,#0]  ; avt_stat
00264a  4c45              LDR      r4,|L1.10080|
00264c  7831              LDRB     r1,[r6,#0]  ; avt_stat_old
00264e  4281              CMP      r1,r0
002650  d00b              BEQ      |L1.9834|
002652  f9b41000          LDRSH    r1,[r4,#0]  ; NUMAVT
002656  2901              CMP      r1,#1
002658  db07              BLT      |L1.9834|
;;;4329   	{
;;;4330   	if(avt_stat[0]==avtON) 	snmp_trap_send("Avtomat #1 is ON ",11,1,1);
00265a  2801              CMP      r0,#1
00265c  d04e              BEQ      |L1.9980|
;;;4331   	else 				snmp_trap_send("Avtomat #1 is OFF",11,1,0);
00265e  2300              MOVS     r3,#0
002660  2201              MOVS     r2,#1
002662  210b              MOVS     r1,#0xb
002664  a03f              ADR      r0,|L1.10084|
002666  f7fffffe          BL       snmp_trap_send
                  |L1.9834|
;;;4332   	}
;;;4333   if((avt_stat_old[1]!=avt_stat[1])&&(NUMAVT>=2))
00266a  7871              LDRB     r1,[r6,#1]  ; avt_stat_old
00266c  7868              LDRB     r0,[r5,#1]  ; avt_stat
00266e  4281              CMP      r1,r0
002670  d00b              BEQ      |L1.9866|
002672  f9b41000          LDRSH    r1,[r4,#0]  ; NUMAVT
002676  2902              CMP      r1,#2
002678  db07              BLT      |L1.9866|
;;;4334   	{
;;;4335   	if(avt_stat[1]==avtON) 	snmp_trap_send("Avtomat #2 is ON ",11,2,1);
00267a  2801              CMP      r0,#1
00267c  d03f              BEQ      |L1.9982|
;;;4336   	else 				snmp_trap_send("Avtomat #2 is OFF",11,2,0);
00267e  2300              MOVS     r3,#0
002680  2202              MOVS     r2,#2
002682  210b              MOVS     r1,#0xb
002684  a03c              ADR      r0,|L1.10104|
002686  f7fffffe          BL       snmp_trap_send
                  |L1.9866|
;;;4337   	}
;;;4338   if((avt_stat_old[2]!=avt_stat[2])&&(NUMAVT>=3))
00268a  78b1              LDRB     r1,[r6,#2]  ; avt_stat_old
00268c  78a8              LDRB     r0,[r5,#2]  ; avt_stat
00268e  4281              CMP      r1,r0
002690  d00b              BEQ      |L1.9898|
002692  f9b41000          LDRSH    r1,[r4,#0]  ; NUMAVT
002696  2903              CMP      r1,#3
002698  db07              BLT      |L1.9898|
;;;4339   	{
;;;4340   	if(avt_stat[2]==avtON) 	snmp_trap_send("Avtomat #3 is ON ",11,3,1);
00269a  2801              CMP      r0,#1
00269c  d030              BEQ      |L1.9984|
;;;4341   	else 				snmp_trap_send("Avtomat #3 is OFF",11,3,0);
00269e  2300              MOVS     r3,#0
0026a0  2203              MOVS     r2,#3
0026a2  210b              MOVS     r1,#0xb
0026a4  a039              ADR      r0,|L1.10124|
0026a6  f7fffffe          BL       snmp_trap_send
                  |L1.9898|
;;;4342   	}
;;;4343   if((avt_stat_old[3]!=avt_stat[3])&&(NUMAVT>=4))
0026aa  78f1              LDRB     r1,[r6,#3]  ; avt_stat_old
0026ac  78e8              LDRB     r0,[r5,#3]  ; avt_stat
0026ae  4281              CMP      r1,r0
0026b0  d00b              BEQ      |L1.9930|
0026b2  f9b41000          LDRSH    r1,[r4,#0]  ; NUMAVT
0026b6  2904              CMP      r1,#4
0026b8  db07              BLT      |L1.9930|
;;;4344   	{
;;;4345   	if(avt_stat[3]==avtON) 	snmp_trap_send("Avtomat #4 is ON ",11,4,1);
0026ba  2801              CMP      r0,#1
0026bc  d021              BEQ      |L1.9986|
;;;4346   	else 				snmp_trap_send("Avtomat #4 is OFF",11,4,0);
0026be  2300              MOVS     r3,#0
0026c0  2204              MOVS     r2,#4
0026c2  210b              MOVS     r1,#0xb
0026c4  a036              ADR      r0,|L1.10144|
0026c6  f7fffffe          BL       snmp_trap_send
                  |L1.9930|
;;;4347   	}
;;;4348   if((avt_stat_old[4]!=avt_stat[4])&&(NUMAVT>=5))
0026ca  7931              LDRB     r1,[r6,#4]  ; avt_stat_old
0026cc  7928              LDRB     r0,[r5,#4]  ; avt_stat
0026ce  4281              CMP      r1,r0
0026d0  d00b              BEQ      |L1.9962|
0026d2  f9b41000          LDRSH    r1,[r4,#0]  ; NUMAVT
0026d6  2905              CMP      r1,#5
0026d8  db07              BLT      |L1.9962|
;;;4349   	{
;;;4350   	if(avt_stat[4]==avtON) 	snmp_trap_send("Avtomat #5 is ON ",11,5,1);
0026da  2801              CMP      r0,#1
0026dc  d074              BEQ      |L1.10184|
;;;4351   	else 				snmp_trap_send("Avtomat #5 is OFF",11,5,0);
0026de  2300              MOVS     r3,#0
0026e0  2205              MOVS     r2,#5
0026e2  210b              MOVS     r1,#0xb
0026e4  a033              ADR      r0,|L1.10164|
0026e6  f7fffffe          BL       snmp_trap_send
                  |L1.9962|
;;;4352   	}
;;;4353   if((avt_stat_old[5]!=avt_stat[5])&&(NUMAVT>=6))
0026ea  7971              LDRB     r1,[r6,#5]  ; avt_stat_old
0026ec  7968              LDRB     r0,[r5,#5]  ; avt_stat
0026ee  4281              CMP      r1,r0
0026f0  d074              BEQ      |L1.10204|
0026f2  f9b41000          LDRSH    r1,[r4,#0]  ; NUMAVT
0026f6  2906              CMP      r1,#6
0026f8  db70              BLT      |L1.10204|
;;;4354   	{
;;;4355   	if(avt_stat[5]==avtON) 	snmp_trap_send("Avtomat #6 is ON ",11,6,1);
0026fa  e067              B        |L1.10188|
                  |L1.9980|
0026fc  e0a8              B        |L1.10320|
                  |L1.9982|
0026fe  e0ae              B        |L1.10334|
                  |L1.9984|
002700  e0b4              B        |L1.10348|
                  |L1.9986|
002702  e0ba              B        |L1.10362|
                  |L1.9988|
                          DCD      ica_timer_cnt
                  |L1.9992|
                          DCD      ICA_EN
                  |L1.9996|
                          DCD      ica_plazma
                  |L1.10000|
                          DCD      bps_I
                  |L1.10004|
                          DCD      ica_my_current
                  |L1.10008|
                          DCD      ica_your_current
                  |L1.10012|
                          DCD      ica_u_necc
                  |L1.10016|
                          DCD      ICA_MODBUS_ADDRESS
                  |L1.10020|
                          DCD      ICA_CH
                  |L1.10024|
                          DCD      ICA_MODBUS_TCP_IP1
                  |L1.10028|
                          DCD      ||area_number.21||+0x70
                  |L1.10032|
                          DCD      ICA_MODBUS_TCP_IP2
                  |L1.10036|
                          DCD      ICA_MODBUS_TCP_IP3
                  |L1.10040|
                          DCD      ICA_MODBUS_TCP_IP4
                  |L1.10044|
                          DCD      ipsBlckStat
                  |L1.10048|
                          DCD      ipsBlckSrc
                  |L1.10052|
                          DCD      ipsBlckLog
                  |L1.10056|
                          DCD      ||.bss||+0x400
                  |L1.10060|
                          DCD      bps
                  |L1.10064|
                          DCD      net_av
                  |L1.10068|
                          DCD      eb2_data_short
                  |L1.10072|
                          DCD      avt_stat
                  |L1.10076|
                          DCD      avt_stat_old
                  |L1.10080|
                          DCD      NUMAVT
                  |L1.10084|
002764  4176746f          DCB      "Avtomat #1 is OFF",0
002768  6d617420
00276c  23312069
002770  73204f46
002774  4600    
002776  00                DCB      0
002777  00                DCB      0
                  |L1.10104|
002778  4176746f          DCB      "Avtomat #2 is OFF",0
00277c  6d617420
002780  23322069
002784  73204f46
002788  4600    
00278a  00                DCB      0
00278b  00                DCB      0
                  |L1.10124|
00278c  4176746f          DCB      "Avtomat #3 is OFF",0
002790  6d617420
002794  23332069
002798  73204f46
00279c  4600    
00279e  00                DCB      0
00279f  00                DCB      0
                  |L1.10144|
0027a0  4176746f          DCB      "Avtomat #4 is OFF",0
0027a4  6d617420
0027a8  23342069
0027ac  73204f46
0027b0  4600    
0027b2  00                DCB      0
0027b3  00                DCB      0
                  |L1.10164|
0027b4  4176746f          DCB      "Avtomat #5 is OFF",0
0027b8  6d617420
0027bc  23352069
0027c0  73204f46
0027c4  4600    
0027c6  00                DCB      0
0027c7  00                DCB      0
                  |L1.10184|
0027c8  e05e              B        |L1.10376|
0027ca  e007              B        |L1.10204|
                  |L1.10188|
0027cc  2801              CMP      r0,#1
0027ce  d062              BEQ      |L1.10390|
;;;4356   	else 				snmp_trap_send("Avtomat #6 is OFF",11,6,0);
0027d0  2300              MOVS     r3,#0
0027d2  2206              MOVS     r2,#6
0027d4  210b              MOVS     r1,#0xb
0027d6  a0ff              ADR      r0,|L1.11220|
0027d8  f7fffffe          BL       snmp_trap_send
                  |L1.10204|
;;;4357   	}
;;;4358   if((avt_stat_old[6]!=avt_stat[6])&&(NUMAVT>=7))
0027dc  79b1              LDRB     r1,[r6,#6]  ; avt_stat_old
0027de  79a8              LDRB     r0,[r5,#6]  ; avt_stat
0027e0  4281              CMP      r1,r0
0027e2  d00b              BEQ      |L1.10236|
0027e4  f9b41000          LDRSH    r1,[r4,#0]  ; NUMAVT
0027e8  2907              CMP      r1,#7
0027ea  db07              BLT      |L1.10236|
;;;4359   	{
;;;4360   	if(avt_stat[6]==avtON) 	snmp_trap_send("Avtomat #7 is ON ",11,7,1);
0027ec  2801              CMP      r0,#1
0027ee  d059              BEQ      |L1.10404|
;;;4361   	else 				snmp_trap_send("Avtomat #7 is OFF",11,7,0);
0027f0  2300              MOVS     r3,#0
0027f2  2207              MOVS     r2,#7
0027f4  210b              MOVS     r1,#0xb
0027f6  a0fc              ADR      r0,|L1.11240|
0027f8  f7fffffe          BL       snmp_trap_send
                  |L1.10236|
;;;4362   	}
;;;4363   if((avt_stat_old[7]!=avt_stat[7])&&(NUMAVT>=8))
0027fc  79f1              LDRB     r1,[r6,#7]  ; avt_stat_old
0027fe  79e8              LDRB     r0,[r5,#7]  ; avt_stat
002800  4281              CMP      r1,r0
002802  d00b              BEQ      |L1.10268|
002804  f9b41000          LDRSH    r1,[r4,#0]  ; NUMAVT
002808  2908              CMP      r1,#8
00280a  db07              BLT      |L1.10268|
;;;4364   	{
;;;4365   	if(avt_stat[7]==avtON) 	snmp_trap_send("Avtomat #8 is ON ",11,8,1);
00280c  2801              CMP      r0,#1
00280e  d050              BEQ      |L1.10418|
;;;4366   	else 				snmp_trap_send("Avtomat #8 is OFF",11,8,0);
002810  2300              MOVS     r3,#0
002812  2208              MOVS     r2,#8
002814  210b              MOVS     r1,#0xb
002816  a0f9              ADR      r0,|L1.11260|
002818  f7fffffe          BL       snmp_trap_send
                  |L1.10268|
;;;4367   	}
;;;4368   if((avt_stat_old[8]!=avt_stat[8])&&(NUMAVT>=9))
00281c  7a31              LDRB     r1,[r6,#8]  ; avt_stat_old
00281e  7a28              LDRB     r0,[r5,#8]  ; avt_stat
002820  4281              CMP      r1,r0
002822  d00b              BEQ      |L1.10300|
002824  f9b41000          LDRSH    r1,[r4,#0]  ; NUMAVT
002828  2909              CMP      r1,#9
00282a  db07              BLT      |L1.10300|
;;;4369   	{
;;;4370   	if(avt_stat[8]==avtON) 	snmp_trap_send("Avtomat #9 is ON ",11,9,1);
00282c  2801              CMP      r0,#1
00282e  d047              BEQ      |L1.10432|
;;;4371   	else 				snmp_trap_send("Avtomat #9 is OFF",11,9,0);
002830  2300              MOVS     r3,#0
002832  2209              MOVS     r2,#9
002834  210b              MOVS     r1,#0xb
002836  a0f6              ADR      r0,|L1.11280|
002838  f7fffffe          BL       snmp_trap_send
                  |L1.10300|
;;;4372   	}
;;;4373   
;;;4374   for(i=0;i<12;i++)
00283c  f04f0000          MOV      r0,#0
                  |L1.10304|
;;;4375   	{
;;;4376   	avt_stat_old[i]=avt_stat[i];
002840  5c29              LDRB     r1,[r5,r0]
002842  5431              STRB     r1,[r6,r0]
002844  f1000001          ADD      r0,r0,#1              ;4374
002848  b2c0              UXTB     r0,r0                 ;4374
00284a  280c              CMP      r0,#0xc               ;4374
00284c  d3f8              BCC      |L1.10304|
;;;4377   	}
;;;4378   }
00284e  bd70              POP      {r4-r6,pc}
                  |L1.10320|
002850  2301              MOVS     r3,#1                 ;4330
002852  461a              MOV      r2,r3                 ;4330
002854  210b              MOVS     r1,#0xb               ;4330
002856  a0f3              ADR      r0,|L1.11300|
002858  f7fffffe          BL       snmp_trap_send
00285c  e705              B        |L1.9834|
                  |L1.10334|
00285e  2301              MOVS     r3,#1                 ;4335
002860  2202              MOVS     r2,#2                 ;4335
002862  210b              MOVS     r1,#0xb               ;4335
002864  a0f4              ADR      r0,|L1.11320|
002866  f7fffffe          BL       snmp_trap_send
00286a  e70e              B        |L1.9866|
                  |L1.10348|
00286c  2301              MOVS     r3,#1                 ;4340
00286e  2203              MOVS     r2,#3                 ;4340
002870  210b              MOVS     r1,#0xb               ;4340
002872  a0f6              ADR      r0,|L1.11340|
002874  f7fffffe          BL       snmp_trap_send
002878  e717              B        |L1.9898|
                  |L1.10362|
00287a  2301              MOVS     r3,#1                 ;4345
00287c  2204              MOVS     r2,#4                 ;4345
00287e  210b              MOVS     r1,#0xb               ;4345
002880  a0f7              ADR      r0,|L1.11360|
002882  f7fffffe          BL       snmp_trap_send
002886  e720              B        |L1.9930|
                  |L1.10376|
002888  2301              MOVS     r3,#1                 ;4350
00288a  2205              MOVS     r2,#5                 ;4350
00288c  210b              MOVS     r1,#0xb               ;4350
00288e  a0f9              ADR      r0,|L1.11380|
002890  f7fffffe          BL       snmp_trap_send
002894  e729              B        |L1.9962|
                  |L1.10390|
002896  2301              MOVS     r3,#1                 ;4355
002898  2206              MOVS     r2,#6                 ;4355
00289a  210b              MOVS     r1,#0xb               ;4355
00289c  a0fa              ADR      r0,|L1.11400|
00289e  f7fffffe          BL       snmp_trap_send
0028a2  e79b              B        |L1.10204|
                  |L1.10404|
0028a4  2301              MOVS     r3,#1                 ;4360
0028a6  2207              MOVS     r2,#7                 ;4360
0028a8  210b              MOVS     r1,#0xb               ;4360
0028aa  a0fc              ADR      r0,|L1.11420|
0028ac  f7fffffe          BL       snmp_trap_send
0028b0  e7a4              B        |L1.10236|
                  |L1.10418|
0028b2  2301              MOVS     r3,#1                 ;4365
0028b4  2208              MOVS     r2,#8                 ;4365
0028b6  210b              MOVS     r1,#0xb               ;4365
0028b8  a0fd              ADR      r0,|L1.11440|
0028ba  f7fffffe          BL       snmp_trap_send
0028be  e7ad              B        |L1.10268|
                  |L1.10432|
0028c0  2301              MOVS     r3,#1                 ;4370
0028c2  2209              MOVS     r2,#9                 ;4370
0028c4  210b              MOVS     r1,#0xb               ;4370
0028c6  a0ff              ADR      r0,|L1.11460|
0028c8  f7fffffe          BL       snmp_trap_send
0028cc  e7b6              B        |L1.10300|
;;;4379   
                          ENDP

                  bat_hndl PROC
;;;4380   //-----------------------------------------------
;;;4381   void bat_hndl(void)
0028ce  b570              PUSH     {r4-r6,lr}
;;;4382   {
;;;4383   /*if(mess_find(_MESS_BAT_MASK_ON))
;;;4384   	{
;;;4385   	if(mess_data[0]==_MESS_BAT_MASK_ON)
;;;4386   		{
;;;4387   		char i;
;;;4388   		for(i=0;i<2;i++)
;;;4389   			{
;;;4390   			if(mess_data[1]&(1<<i))
;;;4391   				{
;;;4392   				bat[i]._cnt_to_block=0;
;;;4393        			bat[i]._rel_stat=0;
;;;4394        			}
;;;4395   			}
;;;4396   		}
;;;4397   	}
;;;4398   if(mess_find(_MESS_BAT_MASK_OFF))
;;;4399   	{		
;;;4400   	if(mess_data[0]==_MESS_BAT_MASK_OFF)
;;;4401   		{
;;;4402   		char i;
;;;4403   		for(i=0;i<2;i++)
;;;4404   			{
;;;4405   			if((mess_data[1]&(1<<i)) && (bat[i]._cnt_to_block==0) && (bat[i]._rel_stat==0))
;;;4406   				{
;;;4407   				bat[i]._cnt_to_block=20;
;;;4408   				bat[i]._rel_stat=1;
;;;4409        			}
;;;4410   			}
;;;4411   		
;;;4412   		}		
;;;4413   	}*/
;;;4414   
;;;4415   if(mess_find_unvol(MESS2BAT_HNDL))
0028d0  20c8              MOVS     r0,#0xc8
0028d2  f7fffffe          BL       mess_find_unvol
;;;4416   	{ 
;;;4417   	char i;
;;;4418   	
;;;4419   	if(mess_data[0]==PARAM_BAT_ALL_OFF_AFTER_2SEC)
;;;4420   		{
;;;4421   		for(i=0;i<MAX_NUM_OF_BAT;i++)
0028d6  2200              MOVS     r2,#0
;;;4422   			{
;;;4423   			if(bat[i]._cnt_to_block<50)bat[i]._cnt_to_block++;
0028d8  49ff              LDR      r1,|L1.11480|
0028da  b3a8              CBZ      r0,|L1.10568|
0028dc  4bff              LDR      r3,|L1.11484|
;;;4424   			}
;;;4425   		}
;;;4426   
;;;4427   	else if(mess_data[0]==PARAM_BAT_MASK_OFF_AFTER_2SEC)
;;;4428   		{
;;;4429   		for(i=0;i<MAX_NUM_OF_BAT;i++)
;;;4430   			{
;;;4431   			if(mess_data[1]&(1<<i))
0028de  2401              MOVS     r4,#1
0028e0  6818              LDR      r0,[r3,#0]            ;4419  ; mess_data
0028e2  28c9              CMP      r0,#0xc9              ;4419
0028e4  d01c              BEQ      |L1.10528|
0028e6  28ca              CMP      r0,#0xca              ;4427
0028e8  d02f              BEQ      |L1.10570|
;;;4432   				{
;;;4433   				if(bat[i]._cnt_to_block<50) bat[i]._cnt_to_block++;
;;;4434   				}
;;;4435   			else bat[i]._cnt_to_block=0;
;;;4436   			}
;;;4437   		}
;;;4438   	else 
;;;4439   	 	{
;;;4440   		for(i=0;i<MAX_NUM_OF_BAT;i++)
0028ea  4610              MOV      r0,r2
                  |L1.10476|
;;;4441   			{
;;;4442   			bat[i]._cnt_to_block=0;
0028ec  eb000340          ADD      r3,r0,r0,LSL #1
0028f0  eb031300          ADD      r3,r3,r0,LSL #4
0028f4  f8012023          STRB     r2,[r1,r3,LSL #2]
0028f8  f1000001          ADD      r0,r0,#1              ;4440
0028fc  b2c0              UXTB     r0,r0                 ;4440
0028fe  2802              CMP      r0,#2                 ;4440
002900  d3f4              BCC      |L1.10476|
                  |L1.10498|
;;;4443   			}
;;;4444   
;;;4445   		}
;;;4446   	for(i=0;i<MAX_NUM_OF_BAT;i++)
002902  f04f0000          MOV      r0,#0
                  |L1.10502|
;;;4447   		{
;;;4448   		if(bat[i]._cnt_to_block>20)bat[i]._rel_stat=1;
002906  eb000340          ADD      r3,r0,r0,LSL #1
00290a  eb031300          ADD      r3,r3,r0,LSL #4
00290e  f8115023          LDRB     r5,[r1,r3,LSL #2]
002912  2d14              CMP      r5,#0x14
002914  d939              BLS      |L1.10634|
002916  eb010383          ADD      r3,r1,r3,LSL #2
00291a  f883403c          STRB     r4,[r3,#0x3c]
00291e  e038              B        |L1.10642|
                  |L1.10528|
002920  f04f0000          MOV      r0,#0                 ;4421
                  |L1.10532|
002924  eb000340          ADD      r3,r0,r0,LSL #1       ;4423
002928  eb031500          ADD      r5,r3,r0,LSL #4       ;4423
00292c  f8113025          LDRB     r3,[r1,r5,LSL #2]     ;4423
002930  2b32              CMP      r3,#0x32              ;4423
002932  d203              BCS      |L1.10556|
002934  f1030301          ADD      r3,r3,#1              ;4423
002938  f8013025          STRB     r3,[r1,r5,LSL #2]     ;4423
                  |L1.10556|
00293c  f1000001          ADD      r0,r0,#1              ;4421
002940  b2c0              UXTB     r0,r0                 ;4421
002942  2802              CMP      r0,#2                 ;4421
002944  d3ee              BCC      |L1.10532|
002946  e7dc              B        |L1.10498|
                  |L1.10568|
002948  e029              B        |L1.10654|
                  |L1.10570|
00294a  f04f0000          MOV      r0,#0                 ;4429
00294e  685e              LDR      r6,[r3,#4]            ;4431
                  |L1.10576|
002950  fa04f300          LSL      r3,r4,r0              ;4431
002954  421e              TST      r6,r3                 ;4431
002956  d00c              BEQ      |L1.10610|
002958  eb000340          ADD      r3,r0,r0,LSL #1       ;4433
00295c  eb031500          ADD      r5,r3,r0,LSL #4       ;4433
002960  f8113025          LDRB     r3,[r1,r5,LSL #2]     ;4433
002964  2b32              CMP      r3,#0x32              ;4433
002966  d20a              BCS      |L1.10622|
002968  f1030301          ADD      r3,r3,#1              ;4433
00296c  f8013025          STRB     r3,[r1,r5,LSL #2]     ;4433
002970  e005              B        |L1.10622|
                  |L1.10610|
002972  eb000340          ADD      r3,r0,r0,LSL #1       ;4435
002976  eb031300          ADD      r3,r3,r0,LSL #4       ;4435
00297a  f8012023          STRB     r2,[r1,r3,LSL #2]     ;4435
                  |L1.10622|
00297e  f1000001          ADD      r0,r0,#1              ;4429
002982  b2c0              UXTB     r0,r0                 ;4429
002984  2802              CMP      r0,#2                 ;4429
002986  d3e3              BCC      |L1.10576|
002988  e7bb              B        |L1.10498|
                  |L1.10634|
;;;4449   		else bat[i]._rel_stat=0;
00298a  eb010383          ADD      r3,r1,r3,LSL #2
00298e  f883203c          STRB     r2,[r3,#0x3c]
                  |L1.10642|
002992  f1000001          ADD      r0,r0,#1              ;4446
002996  b2c0              UXTB     r0,r0                 ;4446
002998  2802              CMP      r0,#2                 ;4446
00299a  d3b4              BCC      |L1.10502|
;;;4450   		}
;;;4451   
;;;4452   	}
;;;4453   
;;;4454   else 
;;;4455   	{
;;;4456   	char i;
;;;4457   	for(i=0;i<MAX_NUM_OF_BAT;i++)
;;;4458   		{
;;;4459   		bat[i]._cnt_to_block=0;
;;;4460   		bat[i]._rel_stat=0;
;;;4461   		}
;;;4462   
;;;4463   	}
;;;4464   
;;;4465   /*if(mess_find_unvol(MESS2BAT_HNDL1))
;;;4466   	{
;;;4467   	if(PARAM_BAT_ON)
;;;4468   		{
;;;4469   		char i;
;;;4470   		for(i=0;i<MAX_NUM_OF_BAT;i++)
;;;4471   			{
;;;4472   			if(mess_data[1]&(1<<i))
;;;4473   				{
;;;4474   				bat[i]._cnt_to_block=0;
;;;4475   				bat[i]._rel_stat=0;
;;;4476   				}
;;;4477   			}
;;;4478   		}
;;;4479   	} */
;;;4480   }
00299c  bd70              POP      {r4-r6,pc}
                  |L1.10654|
00299e  f04f0000          MOV      r0,#0                 ;4457
                  |L1.10658|
0029a2  eb000340          ADD      r3,r0,r0,LSL #1       ;4459
0029a6  eb031300          ADD      r3,r3,r0,LSL #4       ;4459
0029aa  f8012023          STRB     r2,[r1,r3,LSL #2]     ;4459
0029ae  eb010383          ADD      r3,r1,r3,LSL #2       ;4460
0029b2  f883203c          STRB     r2,[r3,#0x3c]         ;4460
0029b6  f1000001          ADD      r0,r0,#1              ;4457
0029ba  b2c0              UXTB     r0,r0                 ;4457
0029bc  2802              CMP      r0,#2                 ;4457
0029be  d3f0              BCC      |L1.10658|
0029c0  bd70              POP      {r4-r6,pc}
;;;4481   
                          ENDP

                  klimat_hndl PROC
;;;4611   //-----------------------------------------------
;;;4612   void klimat_hndl(void)
0029c2  e92d41f0          PUSH     {r4-r8,lr}
;;;4613   {
;;;4614   
;;;4615   
;;;4616   if(t_box>TBOXMAX)
0029c6  4dc6              LDR      r5,|L1.11488|
0029c8  48c6              LDR      r0,|L1.11492|
;;;4617   	{
;;;4618   	av_tbox_cnt++;
0029ca  4cc7              LDR      r4,|L1.11496|
0029cc  f9b51000          LDRSH    r1,[r5,#0]            ;4616  ; t_box
0029d0  f9b02000          LDRSH    r2,[r0,#0]            ;4616  ; TBOXMAX
0029d4  f9b40000          LDRSH    r0,[r4,#0]
0029d8  4291              CMP      r1,r2                 ;4616
0029da  dd03              BLE      |L1.10724|
0029dc  f1000001          ADD      r0,r0,#1
0029e0  8020              STRH     r0,[r4,#0]
0029e2  e003              B        |L1.10732|
                  |L1.10724|
;;;4619   	} 
;;;4620   else if(t_box<TBOXMAX)
0029e4  da02              BGE      |L1.10732|
;;;4621   	{
;;;4622   	av_tbox_cnt--;
0029e6  f1a00001          SUB      r0,r0,#1
0029ea  8020              STRH     r0,[r4,#0]
                  |L1.10732|
;;;4623   	}
;;;4624   gran(&av_tbox_cnt,0,6);
0029ec  2206              MOVS     r2,#6
0029ee  2100              MOVS     r1,#0
0029f0  48bd              LDR      r0,|L1.11496|
0029f2  f7fffffe          BL       gran
;;;4625   
;;;4626   if(av_tbox_cnt>5)
0029f6  f9b40000          LDRSH    r0,[r4,#0]  ; av_tbox_cnt
;;;4627   	{
;;;4628   	av_tbox_stat=atsON;
0029fa  49bc              LDR      r1,|L1.11500|
0029fc  2601              MOVS     r6,#1
0029fe  2805              CMP      r0,#5                 ;4626
002a00  dd00              BLE      |L1.10756|
002a02  700e              STRB     r6,[r1,#0]
                  |L1.10756|
002a04  2400              MOVS     r4,#0                 ;4624
;;;4629   	}
;;;4630   if(av_tbox_cnt<1)
002a06  2801              CMP      r0,#1
002a08  da00              BGE      |L1.10764|
;;;4631   	{
;;;4632   	av_tbox_stat=atsOFF;
002a0a  700c              STRB     r4,[r1,#0]
                  |L1.10764|
;;;4633   	}
;;;4634   
;;;4635   if(t_box<(TBOXREG-2))
002a0c  49b8              LDR      r1,|L1.11504|
002a0e  f9b50000          LDRSH    r0,[r5,#0]  ; t_box
;;;4636   	{
;;;4637   	if(t_box_cnt<30)
002a12  4ab8              LDR      r2,|L1.11508|
002a14  f9b11000          LDRSH    r1,[r1,#0]            ;4635  ; TBOXREG
;;;4638   		{
;;;4639   		t_box_cnt++;
;;;4640   		if(t_box_cnt>=30)
;;;4641   			{
;;;4642   			main_vent_pos--;
002a18  4fb7              LDR      r7,|L1.11512|
002a1a  1e8b              SUBS     r3,r1,#2              ;4635
002a1c  4298              CMP      r0,r3                 ;4635
002a1e  da0f              BGE      |L1.10816|
002a20  f9921000          LDRSB    r1,[r2,#0]            ;4637  ; t_box_cnt
002a24  291e              CMP      r1,#0x1e              ;4637
002a26  da1e              BGE      |L1.10854|
002a28  f1010101          ADD      r1,r1,#1              ;4639
002a2c  b249              SXTB     r1,r1                 ;4639
002a2e  7011              STRB     r1,[r2,#0]            ;4639
002a30  291e              CMP      r1,#0x1e              ;4640
002a32  db18              BLT      |L1.10854|
002a34  8839              LDRH     r1,[r7,#0]  ; main_vent_pos
002a36  f1a10101          SUB      r1,r1,#1
002a3a  8039              STRH     r1,[r7,#0]
;;;4643   			t_box_cnt=0;
002a3c  7014              STRB     r4,[r2,#0]
002a3e  e012              B        |L1.10854|
                  |L1.10816|
;;;4644   			}
;;;4645   		}
;;;4646   	}
;;;4647   else if(t_box>(TBOXREG))
002a40  4288              CMP      r0,r1
002a42  dd0f              BLE      |L1.10852|
;;;4648   	{
;;;4649   	if(t_box_cnt<30)
002a44  f9921000          LDRSB    r1,[r2,#0]  ; t_box_cnt
002a48  291e              CMP      r1,#0x1e
002a4a  da0c              BGE      |L1.10854|
;;;4650   		{
;;;4651   		t_box_cnt++;
002a4c  f1010101          ADD      r1,r1,#1
002a50  b249              SXTB     r1,r1
002a52  7011              STRB     r1,[r2,#0]
;;;4652   		if(t_box_cnt>=30)
002a54  291e              CMP      r1,#0x1e
002a56  db06              BLT      |L1.10854|
;;;4653   			{
;;;4654   			main_vent_pos++;
002a58  8839              LDRH     r1,[r7,#0]  ; main_vent_pos
002a5a  f1010101          ADD      r1,r1,#1
002a5e  8039              STRH     r1,[r7,#0]
;;;4655   			t_box_cnt=0;
002a60  7014              STRB     r4,[r2,#0]
002a62  e000              B        |L1.10854|
                  |L1.10852|
;;;4656   			}
;;;4657   		}
;;;4658   	}
;;;4659   else
;;;4660   	{
;;;4661   	t_box_cnt=0;
002a64  7014              STRB     r4,[r2,#0]
                  |L1.10854|
;;;4662   	}
;;;4663   
;;;4664   #ifndef UKU_KONTUR
;;;4665   if(t_box>TBOXVENTMAX)gran(&main_vent_pos,0,20); 
002a66  49a5              LDR      r1,|L1.11516|
002a68  f9b11000          LDRSH    r1,[r1,#0]  ; TBOXVENTMAX
002a6c  4288              CMP      r0,r1
002a6e  dd05              BLE      |L1.10876|
002a70  2214              MOVS     r2,#0x14
002a72  2100              MOVS     r1,#0
002a74  48a0              LDR      r0,|L1.11512|
002a76  f7fffffe          BL       gran
002a7a  e007              B        |L1.10892|
                  |L1.10876|
;;;4666   else gran(&main_vent_pos,0,pos_vent+9);
002a7c  48a0              LDR      r0,|L1.11520|
002a7e  2100              MOVS     r1,#0
002a80  8800              LDRH     r0,[r0,#0]  ; pos_vent
002a82  3009              ADDS     r0,r0,#9
002a84  b202              SXTH     r2,r0
002a86  489c              LDR      r0,|L1.11512|
002a88  f7fffffe          BL       gran
                  |L1.10892|
;;;4667   
;;;4668   if((mess_find_unvol(MESS2VENT_HNDL))&&(mess_data[0]==PARAM_VENT_CB))
002a8c  20f0              MOVS     r0,#0xf0
002a8e  f7fffffe          BL       mess_find_unvol
002a92  b128              CBZ      r0,|L1.10912|
002a94  4891              LDR      r0,|L1.11484|
002a96  6801              LDR      r1,[r0,#0]  ; mess_data
002a98  29f1              CMP      r1,#0xf1
002a9a  d101              BNE      |L1.10912|
;;;4669   	{
;;;4670   	main_vent_pos=mess_data[1];
002a9c  6840              LDR      r0,[r0,#4]  ; mess_data
002a9e  8038              STRH     r0,[r7,#0]
                  |L1.10912|
;;;4671   	}
;;;4672   
;;;4673   
;;;4674   if(main_vent_pos<=1)mixer_vent_stat=mvsON;
002aa0  f9b71000          LDRSH    r1,[r7,#0]  ; main_vent_pos
002aa4  4897              LDR      r0,|L1.11524|
002aa6  2901              CMP      r1,#1
002aa8  dc01              BGT      |L1.10926|
002aaa  7006              STRB     r6,[r0,#0]
002aac  e000              B        |L1.10928|
                  |L1.10926|
;;;4675   else mixer_vent_stat=mvsOFF;
002aae  7004              STRB     r4,[r0,#0]
                  |L1.10928|
;;;4676   #endif
;;;4677   
;;;4678   #ifdef UKU_KONTUR
;;;4679   
;;;4680   if(t_box>TBOXVENTON) t_box_vent_on_cnt++;
;;;4681   else if(t_box<TBOXVENTOFF) t_box_vent_on_cnt--;
;;;4682   gran(&t_box_vent_on_cnt,0,10);
;;;4683   
;;;4684   if(t_box_vent_on_cnt>9) vent_stat_k=vsON;
;;;4685   else if(t_box_vent_on_cnt<1) vent_stat_k=vsOFF;
;;;4686   
;;;4687   if(t_box<TBOXWARMON) t_box_warm_on_cnt++;
;;;4688   else if(t_box>TBOXWARMOFF) t_box_warm_on_cnt--;
;;;4689   gran(&t_box_warm_on_cnt,0,10);
;;;4690   
;;;4691   if(t_box_warm_on_cnt>9) warm_stat_k=wsON;
;;;4692   else if(t_box_warm_on_cnt<1) warm_stat_k=wsOFF;
;;;4693   
;;;4694   #endif
;;;4695   
;;;4696   if((TBATDISABLE>=50) && (TBATDISABLE<=90))
002ab0  4895              LDR      r0,|L1.11528|
;;;4697   	{
;;;4698   	if(t_box>TBATDISABLE)
;;;4699   		{
;;;4700   		tbatdisable_cnt++;
;;;4701   		}
;;;4702   	if(t_box<TBATENABLE)
;;;4703   		{
;;;4704   		tbatdisable_cnt--;
;;;4705   		}
;;;4706   	gran(&tbatdisable_cnt,0,6);
;;;4707   
;;;4708   	if(tbatdisable_cnt>5)
;;;4709   		{
;;;4710   		tbatdisable_stat=tbdsOFF;
002ab2  f8df8258          LDR      r8,|L1.11532|
002ab6  f9b00000          LDRSH    r0,[r0,#0]            ;4696  ; TBATDISABLE
002aba  f1a00132          SUB      r1,r0,#0x32           ;4696
002abe  2928              CMP      r1,#0x28              ;4696
002ac0  d821              BHI      |L1.11014|
002ac2  f9b51000          LDRSH    r1,[r5,#0]            ;4698  ; t_box
002ac6  4f92              LDR      r7,|L1.11536|
002ac8  4281              CMP      r1,r0                 ;4698
002aca  dd03              BLE      |L1.10964|
002acc  8838              LDRH     r0,[r7,#0]            ;4700  ; tbatdisable_cnt
002ace  f1000001          ADD      r0,r0,#1              ;4700
002ad2  8038              STRH     r0,[r7,#0]            ;4700
                  |L1.10964|
002ad4  488f              LDR      r0,|L1.11540|
002ad6  f9b00000          LDRSH    r0,[r0,#0]            ;4702  ; TBATENABLE
002ada  4281              CMP      r1,r0                 ;4702
002adc  da03              BGE      |L1.10982|
002ade  8838              LDRH     r0,[r7,#0]            ;4704  ; tbatdisable_cnt
002ae0  f1a00001          SUB      r0,r0,#1              ;4704
002ae4  8038              STRH     r0,[r7,#0]            ;4704
                  |L1.10982|
002ae6  2206              MOVS     r2,#6                 ;4706
002ae8  2100              MOVS     r1,#0                 ;4706
002aea  4889              LDR      r0,|L1.11536|
002aec  f7fffffe          BL       gran
002af0  f9b70000          LDRSH    r0,[r7,#0]            ;4708  ; tbatdisable_cnt
002af4  2805              CMP      r0,#5                 ;4708
002af6  dd01              BLE      |L1.11004|
002af8  f8886000          STRB     r6,[r8,#0]
                  |L1.11004|
;;;4711   		}
;;;4712   	if(tbatdisable_cnt<1)
002afc  2801              CMP      r0,#1
002afe  da04              BGE      |L1.11018|
;;;4713   		{
;;;4714   		tbatdisable_stat=tbdsON;
002b00  f8884000          STRB     r4,[r8,#0]
002b04  e001              B        |L1.11018|
                  |L1.11014|
;;;4715   		}
;;;4716   	}
;;;4717   else 
;;;4718   	{
;;;4719   	tbatdisable_stat=tbdsON;
002b06  f8884000          STRB     r4,[r8,#0]
                  |L1.11018|
;;;4720   	}
;;;4721   
;;;4722   if((TLOADDISABLE>=50) && (TLOADDISABLE<=80))
002b0a  4883              LDR      r0,|L1.11544|
;;;4723   	{
;;;4724   	if(t_box>TLOADDISABLE)
;;;4725   		{
;;;4726   		tloaddisable_cnt++;
;;;4727   		}
;;;4728   	if(t_box<TLOADENABLE)
;;;4729   		{
;;;4730   		tloaddisable_cnt--;
;;;4731   		}
;;;4732   	gran(&tloaddisable_cnt,0,6);
;;;4733   
;;;4734   	if(tloaddisable_cnt>5)
;;;4735   		{
;;;4736   		tloaddisable_stat=tldsOFF;
002b0c  4f83              LDR      r7,|L1.11548|
002b0e  f9b00000          LDRSH    r0,[r0,#0]            ;4722  ; TLOADDISABLE
002b12  f1a00132          SUB      r1,r0,#0x32           ;4722
002b16  291e              CMP      r1,#0x1e              ;4722
002b18  d81f              BHI      |L1.11098|
002b1a  f9b51000          LDRSH    r1,[r5,#0]            ;4724  ; t_box
002b1e  4d80              LDR      r5,|L1.11552|
002b20  4281              CMP      r1,r0                 ;4724
002b22  dd03              BLE      |L1.11052|
002b24  8828              LDRH     r0,[r5,#0]            ;4726  ; tloaddisable_cnt
002b26  f1000001          ADD      r0,r0,#1              ;4726
002b2a  8028              STRH     r0,[r5,#0]            ;4726
                  |L1.11052|
002b2c  487d              LDR      r0,|L1.11556|
002b2e  f9b00000          LDRSH    r0,[r0,#0]            ;4728  ; TLOADENABLE
002b32  4281              CMP      r1,r0                 ;4728
002b34  da03              BGE      |L1.11070|
002b36  8828              LDRH     r0,[r5,#0]            ;4730  ; tloaddisable_cnt
002b38  f1a00001          SUB      r0,r0,#1              ;4730
002b3c  8028              STRH     r0,[r5,#0]            ;4730
                  |L1.11070|
002b3e  2206              MOVS     r2,#6                 ;4732
002b40  2100              MOVS     r1,#0                 ;4732
002b42  4877              LDR      r0,|L1.11552|
002b44  f7fffffe          BL       gran
002b48  f9b50000          LDRSH    r0,[r5,#0]            ;4734  ; tloaddisable_cnt
002b4c  2805              CMP      r0,#5                 ;4734
002b4e  dd00              BLE      |L1.11090|
002b50  703e              STRB     r6,[r7,#0]
                  |L1.11090|
;;;4737   		}
;;;4738   	if(tloaddisable_cnt<1)
002b52  2801              CMP      r0,#1
002b54  da00              BGE      |L1.11096|
;;;4739   		{
;;;4740   		tloaddisable_stat=tldsON;
002b56  703c              STRB     r4,[r7,#0]
                  |L1.11096|
;;;4741   		}
;;;4742   	}
;;;4743   else 
;;;4744   	{
;;;4745   	tloaddisable_stat=tldsON;
;;;4746   	}
;;;4747   
;;;4748   }
002b58  e55e              B        |L1.9752|
                  |L1.11098|
002b5a  703c              STRB     r4,[r7,#0]            ;4745
002b5c  e55c              B        |L1.9752|
;;;4749   #endif
                          ENDP

                  bat_drv PROC
;;;4885   //-----------------------------------------------
;;;4886   void bat_drv(char in)
002b5e  e92d5ffc          PUSH     {r2-r12,lr}
;;;4887   {
002b62  4605              MOV      r5,r0
;;;4888   unsigned short /*tempUS,*/tempUS_;
;;;4889   unsigned long tempUL,tempUL_;
;;;4890   unsigned short b_zar;
;;;4891   //static unsigned short time_cnt[2];
;;;4892   
;;;4893   
;;;4894   
;;;4895   if(cntrl_stat_blok_cnt_plus[in])cntrl_stat_blok_cnt_plus[in]--;
002b64  4970              LDR      r1,|L1.11560|
002b66  f9310015          LDRSH    r0,[r1,r5,LSL #1]
002b6a  b118              CBZ      r0,|L1.11124|
002b6c  f1a00001          SUB      r0,r0,#1
002b70  f8210015          STRH     r0,[r1,r5,LSL #1]
                  |L1.11124|
;;;4896   if(cntrl_stat_blok_cnt_minus[in])cntrl_stat_blok_cnt_minus[in]--;
002b74  4a6c              LDR      r2,|L1.11560|
002b76  1d12              ADDS     r2,r2,#4
002b78  f9320015          LDRSH    r0,[r2,r5,LSL #1]
002b7c  b118              CBZ      r0,|L1.11142|
002b7e  f1a00001          SUB      r0,r0,#1
002b82  f8220015          STRH     r0,[r2,r5,LSL #1]
                  |L1.11142|
;;;4897   
;;;4898   
;;;4899   if(bat[in]._Ib>IZMAX) cntrl_stat_blok_cnt_plus[in]=100;
002b86  eb050045          ADD      r0,r5,r5,LSL #1
002b8a  eb001305          ADD      r3,r0,r5,LSL #4
002b8e  4852              LDR      r0,|L1.11480|
002b90  f04f0b64          MOV      r11,#0x64
002b94  eb000483          ADD      r4,r0,r3,LSL #2
002b98  4b64              LDR      r3,|L1.11564|
002b9a  f9b40008          LDRSH    r0,[r4,#8]
002b9e  f9b33000          LDRSH    r3,[r3,#0]  ; IZMAX
002ba2  4298              CMP      r0,r3
002ba4  dd01              BLE      |L1.11178|
002ba6  f821b015          STRH     r11,[r1,r5,LSL #1]
                  |L1.11178|
;;;4900   if(bat[in]._Ib<0)     cntrl_stat_blok_cnt_minus[in]=100;
002baa  2800              CMP      r0,#0
002bac  da01              BGE      |L1.11186|
002bae  f822b015          STRH     r11,[r2,r5,LSL #1]
                  |L1.11186|
;;;4901   
;;;4902   if(cntrl_stat_blok_cnt_plus[in] && cntrl_stat_blok_cnt_minus[in])
;;;4903        {
;;;4904        if(!cntrl_stat_blok_cnt_)
002bb2  485d              LDR      r0,|L1.11560|
002bb4  f8313015          LDRH     r3,[r1,r5,LSL #1]     ;4902
002bb8  3888              SUBS     r0,r0,#0x88
002bba  2700              MOVS     r7,#0
002bbc  b143              CBZ      r3,|L1.11216|
002bbe  f8323015          LDRH     r3,[r2,r5,LSL #1]     ;4902
002bc2  b12b              CBZ      r3,|L1.11216|
002bc4  f8b03064          LDRH     r3,[r0,#0x64]  ; cntrl_stat_blok_cnt_
002bc8  b11b              CBZ      r3,|L1.11218|
;;;4905             {
;;;4906             cntrl_stat_blok_cnt_=600; 
;;;4907             cntrl_stat_blok_cnt_plus[in]=0;
;;;4908             cntrl_stat_blok_cnt_minus[in]=0;
;;;4909             }
;;;4910        else cntrl_stat_blok_cnt=3000;
002bca  f64031b8          MOV      r1,#0xbb8
002bce  e0af              B        |L1.11568|
                  |L1.11216|
002bd0  e0b0              B        |L1.11572|
                  |L1.11218|
002bd2  e0c0              B        |L1.11606|
                  |L1.11220|
002bd4  4176746f          DCB      "Avtomat #6 is OFF",0
002bd8  6d617420
002bdc  23362069
002be0  73204f46
002be4  4600    
002be6  00                DCB      0
002be7  00                DCB      0
                  |L1.11240|
002be8  4176746f          DCB      "Avtomat #7 is OFF",0
002bec  6d617420
002bf0  23372069
002bf4  73204f46
002bf8  4600    
002bfa  00                DCB      0
002bfb  00                DCB      0
                  |L1.11260|
002bfc  4176746f          DCB      "Avtomat #8 is OFF",0
002c00  6d617420
002c04  23382069
002c08  73204f46
002c0c  4600    
002c0e  00                DCB      0
002c0f  00                DCB      0
                  |L1.11280|
002c10  4176746f          DCB      "Avtomat #9 is OFF",0
002c14  6d617420
002c18  23392069
002c1c  73204f46
002c20  4600    
002c22  00                DCB      0
002c23  00                DCB      0
                  |L1.11300|
002c24  4176746f          DCB      "Avtomat #1 is ON ",0
002c28  6d617420
002c2c  23312069
002c30  73204f4e
002c34  2000    
002c36  00                DCB      0
002c37  00                DCB      0
                  |L1.11320|
002c38  4176746f          DCB      "Avtomat #2 is ON ",0
002c3c  6d617420
002c40  23322069
002c44  73204f4e
002c48  2000    
002c4a  00                DCB      0
002c4b  00                DCB      0
                  |L1.11340|
002c4c  4176746f          DCB      "Avtomat #3 is ON ",0
002c50  6d617420
002c54  23332069
002c58  73204f4e
002c5c  2000    
002c5e  00                DCB      0
002c5f  00                DCB      0
                  |L1.11360|
002c60  4176746f          DCB      "Avtomat #4 is ON ",0
002c64  6d617420
002c68  23342069
002c6c  73204f4e
002c70  2000    
002c72  00                DCB      0
002c73  00                DCB      0
                  |L1.11380|
002c74  4176746f          DCB      "Avtomat #5 is ON ",0
002c78  6d617420
002c7c  23352069
002c80  73204f4e
002c84  2000    
002c86  00                DCB      0
002c87  00                DCB      0
                  |L1.11400|
002c88  4176746f          DCB      "Avtomat #6 is ON ",0
002c8c  6d617420
002c90  23362069
002c94  73204f4e
002c98  2000    
002c9a  00                DCB      0
002c9b  00                DCB      0
                  |L1.11420|
002c9c  4176746f          DCB      "Avtomat #7 is ON ",0
002ca0  6d617420
002ca4  23372069
002ca8  73204f4e
002cac  2000    
002cae  00                DCB      0
002caf  00                DCB      0
                  |L1.11440|
002cb0  4176746f          DCB      "Avtomat #8 is ON ",0
002cb4  6d617420
002cb8  23382069
002cbc  73204f4e
002cc0  2000    
002cc2  00                DCB      0
002cc3  00                DCB      0
                  |L1.11460|
002cc4  4176746f          DCB      "Avtomat #9 is ON ",0
002cc8  6d617420
002ccc  23392069
002cd0  73204f4e
002cd4  2000    
002cd6  00                DCB      0
002cd7  00                DCB      0
                  |L1.11480|
                          DCD      bat
                  |L1.11484|
                          DCD      mess_data
                  |L1.11488|
                          DCD      t_box
                  |L1.11492|
                          DCD      TBOXMAX
                  |L1.11496|
                          DCD      av_tbox_cnt
                  |L1.11500|
                          DCD      av_tbox_stat
                  |L1.11504|
                          DCD      TBOXREG
                  |L1.11508|
                          DCD      t_box_cnt
                  |L1.11512|
                          DCD      main_vent_pos
                  |L1.11516|
                          DCD      TBOXVENTMAX
                  |L1.11520|
                          DCD      pos_vent
                  |L1.11524|
                          DCD      mixer_vent_stat
                  |L1.11528|
                          DCD      TBATDISABLE
                  |L1.11532|
                          DCD      tbatdisable_stat
                  |L1.11536|
                          DCD      tbatdisable_cnt
                  |L1.11540|
                          DCD      TBATENABLE
                  |L1.11544|
                          DCD      TLOADDISABLE
                  |L1.11548|
                          DCD      tloaddisable_stat
                  |L1.11552|
                          DCD      tloaddisable_cnt
                  |L1.11556|
                          DCD      TLOADENABLE
                  |L1.11560|
                          DCD      ||area_number.21||+0x88
                  |L1.11564|
                          DCD      IZMAX
                  |L1.11568|
002d30  f8a01062          STRH     r1,[r0,#0x62]
                  |L1.11572|
;;;4911        }
;;;4912   cntrl_stat_blok_cnt=0;
002d34  f8a07062          STRH     r7,[r0,#0x62]
;;;4913   
;;;4914   if(++(bat[in]._time_cnt)>=10)
002d38  f894003e          LDRB     r0,[r4,#0x3e]
002d3c  1c40              ADDS     r0,r0,#1
002d3e  b2c0              UXTB     r0,r0
002d40  f884003e          STRB     r0,[r4,#0x3e]
002d44  280a              CMP      r0,#0xa
002d46  d301              BCC      |L1.11596|
;;;4915   	{
;;;4916   	bat[in]._time_cnt=0;
002d48  f884703e          STRB     r7,[r4,#0x3e]
                  |L1.11596|
;;;4917   	//bat[in]._zar_cnt++;
;;;4918   	}
;;;4919   
;;;4920   if(main_10Hz_cnt==50)
002d4c  4eff              LDR      r6,|L1.12620|
002d4e  8830              LDRH     r0,[r6,#0]  ; main_10Hz_cnt
002d50  2832              CMP      r0,#0x32
002d52  d009              BEQ      |L1.11624|
002d54  e017              B        |L1.11654|
                  |L1.11606|
002d56  f44f7316          MOV      r3,#0x258             ;4906
002d5a  f8a03064          STRH     r3,[r0,#0x64]         ;4906
002d5e  f8217015          STRH     r7,[r1,r5,LSL #1]     ;4907
002d62  f8227015          STRH     r7,[r2,r5,LSL #1]     ;4908
002d66  e7e5              B        |L1.11572|
                  |L1.11624|
;;;4921   	{
;;;4922   	if(!bat[in]._rel_stat)
002d68  f894003c          LDRB     r0,[r4,#0x3c]
002d6c  b958              CBNZ     r0,|L1.11654|
;;;4923   		{
;;;4924   		
;;;4925   		if(bat[in]._Ub<80) 
002d6e  f9b40002          LDRSH    r0,[r4,#2]
002d72  2850              CMP      r0,#0x50
002d74  da07              BGE      |L1.11654|
;;;4926   			{
;;;4927   			
;;;4928   			if(!(bat[in]._av&1))
002d76  f894003d          LDRB     r0,[r4,#0x3d]
002d7a  07c0              LSLS     r0,r0,#31
002d7c  d103              BNE      |L1.11654|
;;;4929   				{
;;;4930   				avar_bat_hndl(in,1);
002d7e  2101              MOVS     r1,#1
002d80  4628              MOV      r0,r5
002d82  f7fffffe          BL       avar_bat_hndl
                  |L1.11654|
;;;4931   				//if(in==0)plazma_bat++;
;;;4932   				}
;;;4933   			}				
;;;4934   
;;;4935   		}
;;;4936   	}
;;;4937   
;;;4938   if(main_10Hz_cnt>200)
002d86  f9b60000          LDRSH    r0,[r6,#0]  ; main_10Hz_cnt
;;;4939   	{
;;;4940   	if(abs(bat[in]._Ib)>IKB) 
002d8a  4ef1              LDR      r6,|L1.12624|
002d8c  28c8              CMP      r0,#0xc8              ;4938
002d8e  dd0f              BLE      |L1.11696|
002d90  f9b40008          LDRSH    r0,[r4,#8]
002d94  f7fffffe          BL       abs
002d98  f9b61000          LDRSH    r1,[r6,#0]  ; IKB
002d9c  4288              CMP      r0,r1
002d9e  dd07              BLE      |L1.11696|
;;;4941   		{
;;;4942   		if((bat[in]._av&1))avar_bat_hndl(in,0);
002da0  f894003d          LDRB     r0,[r4,#0x3d]
002da4  07c0              LSLS     r0,r0,#31
002da6  d003              BEQ      |L1.11696|
002da8  2100              MOVS     r1,#0
002daa  4628              MOV      r0,r5
002dac  f7fffffe          BL       avar_bat_hndl
                  |L1.11696|
;;;4943   		}
;;;4944   	}
;;;4945   
;;;4946   
;;;4947   
;;;4948   if(bat[in]._Ib>(-IKB))
002db0  48e7              LDR      r0,|L1.12624|
002db2  f9b41008          LDRSH    r1,[r4,#8]
002db6  f9b00000          LDRSH    r0,[r0,#0]  ; IKB
002dba  4240              RSBS     r0,r0,#0
002dbc  4281              CMP      r1,r0
002dbe  dd14              BLE      |L1.11754|
;;;4949   	{
;;;4950   	if(bat[in]._cnt_wrk<10)
002dc0  7b60              LDRB     r0,[r4,#0xd]
002dc2  280a              CMP      r0,#0xa
002dc4  d20d              BCS      |L1.11746|
;;;4951   		{
;;;4952   		bat[in]._cnt_wrk++;
002dc6  f1000001          ADD      r0,r0,#1
002dca  b2c0              UXTB     r0,r0
002dcc  7360              STRB     r0,[r4,#0xd]
;;;4953   		if((bat[in]._cnt_wrk>=10)&&(bat[in]._wrk)) 
002dce  280a              CMP      r0,#0xa
002dd0  d371              BCC      |L1.11958|
002dd2  7ba0              LDRB     r0,[r4,#0xe]
002dd4  2800              CMP      r0,#0
002dd6  d06e              BEQ      |L1.11958|
;;;4954   			{
;;;4955   			bat[in]._wrk=0;
002dd8  73a7              STRB     r7,[r4,#0xe]
;;;4956   			//beep_init(0x7L,'O');
;;;4957   			//wrk_mem_hndl(0);
;;;4958   			wrk_mem_hndl(in);
002dda  4628              MOV      r0,r5
002ddc  f7fffffe          BL       wrk_mem_hndl
002de0  e069              B        |L1.11958|
                  |L1.11746|
;;;4959   			//plazma++;
;;;4960   			}
;;;4961   		}
;;;4962   	else bat[in]._cnt_wrk=10;	
002de2  f04f000a          MOV      r0,#0xa
002de6  7360              STRB     r0,[r4,#0xd]
002de8  e065              B        |L1.11958|
                  |L1.11754|
;;;4963   	}	
;;;4964   
;;;4965   else if(bat[in]._Ib<(-IKB))
002dea  da64              BGE      |L1.11958|
;;;4966   	{
;;;4967   	if(bat[in]._cnt_wrk)
002dec  7b60              LDRB     r0,[r4,#0xd]
002dee  b3f0              CBZ      r0,|L1.11886|
;;;4968   		{
;;;4969   		bat[in]._cnt_wrk--;
002df0  f1a00001          SUB      r0,r0,#1
002df4  b2c0              UXTB     r0,r0
002df6  7360              STRB     r0,[r4,#0xd]
;;;4970   		if((bat[in]._cnt_wrk==0)&&(bat[in]._wrk==0)) 
002df8  bbc8              CBNZ     r0,|L1.11886|
002dfa  7ba0              LDRB     r0,[r4,#0xe]
002dfc  bbb8              CBNZ     r0,|L1.11886|
;;;4971   			{
;;;4972   			bat[in]._wrk=1;
002dfe  f04f0001          MOV      r0,#1
002e02  73a0              STRB     r0,[r4,#0xe]
;;;4973   
;;;4974   				{
;;;4975   				char temp;
;;;4976   				signed short temp_temp;
;;;4977   				temp_temp=bat[in]._u_old[((bat_u_old_cnt+1)&0x07)];
002e04  48d3              LDR      r0,|L1.12628|
002e06  8800              LDRH     r0,[r0,#0]  ; bat_u_old_cnt
002e08  f1000001          ADD      r0,r0,#1
002e0c  f0000007          AND      r0,r0,#7
002e10  eb040040          ADD      r0,r4,r0,LSL #1
002e14  8c00              LDRH     r0,[r0,#0x20]
002e16  9000              STR      r0,[sp,#0]
;;;4978   			 
;;;4979   				temp=LPC_RTC->YEAR;
002e18  4ecf              LDR      r6,|L1.12632|
002e1a  8bb0              LDRH     r0,[r6,#0x1c]
002e1c  9001              STR      r0,[sp,#4]
;;;4980   				gran_char((signed char*)&temp,1,99);
002e1e  f04f0263          MOV      r2,#0x63
002e22  f04f0101          MOV      r1,#1
002e26  a801              ADD      r0,sp,#4
002e28  f7fffffe          BL       gran_char
;;;4981   				*((char*)(&(bat[in]._wrk_date[0])))=temp;
002e2c  f104041c          ADD      r4,r4,#0x1c
002e30  f89d0004          LDRB     r0,[sp,#4]
002e34  7620              STRB     r0,[r4,#0x18]
;;;4982   			
;;;4983   				temp=LPC_RTC->MONTH;
002e36  7e30              LDRB     r0,[r6,#0x18]
002e38  9001              STR      r0,[sp,#4]
;;;4984   				gran_char((signed char*)&temp,1,12);
002e3a  f04f020c          MOV      r2,#0xc
002e3e  f04f0101          MOV      r1,#1
002e42  a801              ADD      r0,sp,#4
002e44  f7fffffe          BL       gran_char
;;;4985   				*(((char*)(&(bat[in]._wrk_date[0])))+1)=temp;
002e48  f89d0004          LDRB     r0,[sp,#4]
002e4c  7660              STRB     r0,[r4,#0x19]
;;;4986   			
;;;4987   				temp=LPC_RTC->DOM;
002e4e  7b30              LDRB     r0,[r6,#0xc]
002e50  9001              STR      r0,[sp,#4]
;;;4988   				gran_char((signed char*)&temp,1,31);
002e52  221f              MOVS     r2,#0x1f
002e54  2101              MOVS     r1,#1
002e56  a801              ADD      r0,sp,#4
002e58  f7fffffe          BL       gran_char
;;;4989   				*(((char*)(&(bat[in]._wrk_date[0])))+2)=temp;			
002e5c  f89d0004          LDRB     r0,[sp,#4]
002e60  76a0              STRB     r0,[r4,#0x1a]
;;;4990   				
;;;4991   				*(((char*)(&(bat[in]._wrk_date[0])))+3)=*((char*)&temp_temp);
002e62  f89d0000          LDRB     r0,[sp,#0]
002e66  76e0              STRB     r0,[r4,#0x1b]
;;;4992   
;;;4993   				temp=LPC_RTC->HOUR;
002e68  7a30              LDRB     r0,[r6,#8]
002e6a  9001              STR      r0,[sp,#4]
;;;4994   				gran_char((signed char*)&temp,0,23);
002e6c  e000              B        |L1.11888|
                  |L1.11886|
002e6e  e022              B        |L1.11958|
                  |L1.11888|
002e70  2217              MOVS     r2,#0x17
002e72  2100              MOVS     r1,#0
002e74  a801              ADD      r0,sp,#4
002e76  f7fffffe          BL       gran_char
;;;4995   				*((char*)(&(bat[in]._wrk_date[1])))=temp;
002e7a  f89d0004          LDRB     r0,[sp,#4]
002e7e  7720              STRB     r0,[r4,#0x1c]
;;;4996                  	
;;;4997   				temp=LPC_RTC->MIN;
002e80  7930              LDRB     r0,[r6,#4]
002e82  9001              STR      r0,[sp,#4]
;;;4998   				gran_char((signed char*)&temp,0,59);
002e84  223b              MOVS     r2,#0x3b
002e86  2100              MOVS     r1,#0
002e88  a801              ADD      r0,sp,#4
002e8a  f7fffffe          BL       gran_char
;;;4999   				*(((char*)(&(bat[in]._wrk_date[1])))+1)=temp;
002e8e  f89d0004          LDRB     r0,[sp,#4]
002e92  7760              STRB     r0,[r4,#0x1d]
;;;5000   	          
;;;5001   				temp=LPC_RTC->SEC;
002e94  7830              LDRB     r0,[r6,#0]
002e96  9001              STR      r0,[sp,#4]
;;;5002   				gran_char((signed char*)&temp,0,59);
002e98  223b              MOVS     r2,#0x3b
002e9a  2100              MOVS     r1,#0
002e9c  a801              ADD      r0,sp,#4
002e9e  f7fffffe          BL       gran_char
;;;5003   				*(((char*)(&(bat[in]._wrk_date[1])))+2)=temp;
002ea2  f89d0004          LDRB     r0,[sp,#4]
002ea6  77a0              STRB     r0,[r4,#0x1e]
;;;5004   			
;;;5005   				*(((char*)(&(bat[in]._wrk_date[1])))+3)=*(((char*)&temp_temp)+1);
002ea8  f89d0001          LDRB     r0,[sp,#1]
002eac  77e0              STRB     r0,[r4,#0x1f]
;;;5006   				bat[in]._Iintegr=0;		//  
002eae  8027              STRH     r7,[r4,#0]
;;;5007   				bat[in]._Iintegr_=0;	//  
002eb0  8067              STRH     r7,[r4,#2]
002eb2  f1a4041c          SUB      r4,r4,#0x1c
                  |L1.11958|
;;;5008   				}
;;;5009   	
;;;5010   			}
;;;5011   
;;;5012   		}
;;;5013   	else bat[in]._cnt_wrk=0;	 
;;;5014   	
;;;5015   	}					
;;;5016   
;;;5017   /*
;;;5018   if(Ibat>=(-IKB))
;;;5019   	{
;;;5020   	if(cnt_wrk<10)
;;;5021   		{
;;;5022   		cnt_wrk++;
;;;5023   		if((cnt_wrk>=10)&&(wrk!=wrkOFF)) 
;;;5024   			{
;;;5025   			wrk=wrkOFF;
;;;5026   			//beep_init(0x7L,'O');
;;;5027   			wrk_mem_hndl(ibat_integr);
;;;5028   			}
;;;5029   		}
;;;5030   	else cnt_wrk=10;	
;;;5031   	}	
;;;5032   
;;;5033   else if((Ibat<(-IKB))&&(spc_stat!=spc_KE))
;;;5034   	{
;;;5035   	if(cnt_wrk)
;;;5036   		{
;;;5037   		cnt_wrk--;
;;;5038   		if((cnt_wrk==0)&&(wrk!=wrkON)) 
;;;5039   			{
;;;5040   			char temp;
;;;5041   			signed short temp_temp;
;;;5042   			temp_temp=ubat_old[((ubat_old_cnt+1)&0x07)];
;;;5043   			 
;;;5044   			wrk=wrkON;
;;;5045   			
;;;5046   			temp=_year;
;;;5047   			gran_char(&temp,1,99);
;;;5048   			*((char*)(&(wrk_date[0])))=temp;
;;;5049   			
;;;5050   			temp=_month;
;;;5051   			gran_char(&temp,1,12);
;;;5052   			*(((char*)(&(wrk_date[0])))+1)=temp;
;;;5053   			
;;;5054   			temp=_date;
;;;5055   			gran_char(&temp,1,31);
;;;5056   			*(((char*)(&(wrk_date[0])))+2)=temp;			
;;;5057   				
;;;5058   			*(((char*)(&(wrk_date[0])))+3)=*((char*)&temp_temp);
;;;5059   
;;;5060   			temp=_hour;
;;;5061   			gran_char(&temp,0,23);
;;;5062   			*((char*)(&(wrk_date[1])))=temp;
;;;5063                  
;;;5064   			temp=_min;
;;;5065   			gran_char(&temp,0,59);
;;;5066   			*(((char*)(&(wrk_date[1])))+1)=temp;
;;;5067   	          
;;;5068   			temp=_sec;
;;;5069   			gran_char(&temp,0,59);
;;;5070   			*(((char*)(&(wrk_date[1])))+2)=temp;
;;;5071   			
;;;5072   			*(((char*)(&(wrk_date[1])))+3)=*(((char*)&temp_temp)+1);
;;;5073   
;;;5074   			
;;;5075   			//beep_init(0xFL,'O'); 
;;;5076   			ibat_integr=0;
;;;5077   			ibat_integr_=0;
;;;5078   			}
;;;5079   		}
;;;5080   	else cnt_wrk=0;	 
;;;5081   	
;;;5082   	}
;;;5083   if(wrk==wrkON)
;;;5084   	{
;;;5085   	ibat_integr_+=-Ibat;
;;;5086   	if(ibat_integr_>=SEC_IN_HOUR*10L)
;;;5087   		{
;;;5088   		ibat_integr_-=SEC_IN_HOUR*10L;
;;;5089   		ibat_integr++;
;;;5090   		}
;;;5091   	}
;;;5092   
;;;5093   */
;;;5094   
;;;5095   
;;;5096   /*if(bat[in]._cnt_to_block)
;;;5097   	{
;;;5098   	bat[in]._cnt_to_block--;
;;;5099   	if(!(bat[in]._cnt_to_block))
;;;5100   		{
;;;5101   		//bat[in]._rel_stat=1;
;;;5102   		}
;;;5103   	}
;;;5104   */
;;;5105   
;;;5106   
;;;5107   
;;;5108   
;;;5109   //unsigned int tempUI,tempUI_;
;;;5110   //unsigned int b_zar; 
;;;5111   //char i;
;;;5112   //Ibat[0]=5000;                     
;;;5113   
;;;5114   
;;;5115                               
;;;5116   if(bat[in]._time_cnt==0)
;;;5117   	{
;;;5118   	bat[in]._zar_cnt+=(signed long)bat[in]._Ib;
;;;5119   	
;;;5120   	if(bat[in]._zar_cnt>=AH_CONSTANT)
002eb6  f64848a0          MOV      r8,#0x8ca0
002eba  f894003e          LDRB     r0,[r4,#0x3e]         ;5116
002ebe  2800              CMP      r0,#0                 ;5116
002ec0  d17e              BNE      |L1.12224|
002ec2  f9b41008          LDRSH    r1,[r4,#8]            ;5118
002ec6  6960              LDR      r0,[r4,#0x14]         ;5118
002ec8  4408              ADD      r0,r0,r1              ;5118
002eca  6160              STR      r0,[r4,#0x14]         ;5118
;;;5121   		{
;;;5122   		if(BAT_C_REAL[in]==0x5555) tempUS_=BAT_C_NOM[in];
;;;5123   		else tempUS_=BAT_C_REAL[in];
;;;5124   		
;;;5125   		b_zar=lc640_read_int(ADR_EE_BAT_ZAR_CNT[in]);
002ecc  f8df928c          LDR      r9,|L1.12636|
002ed0  f8dfa28c          LDR      r10,|L1.12640|
002ed4  4540              CMP      r0,r8                 ;5120
002ed6  db2a              BLT      |L1.12078|
002ed8  f93a1015          LDRSH    r1,[r10,r5,LSL #1]    ;5122
002edc  f5a140aa          SUB      r0,r1,#0x5500         ;5122
002ee0  3855              SUBS     r0,r0,#0x55           ;5122
002ee2  d103              BNE      |L1.12012|
002ee4  489f              LDR      r0,|L1.12644|
002ee6  f8306015          LDRH     r6,[r0,r5,LSL #1]     ;5122
002eea  e001              B        |L1.12016|
                  |L1.12012|
002eec  f83a6015          LDRH     r6,[r10,r5,LSL #1]    ;5123
                  |L1.12016|
002ef0  f8390015          LDRH     r0,[r9,r5,LSL #1]
002ef4  f7fffffe          BL       lc640_read_int
002ef8  b280              UXTH     r0,r0
;;;5126   
;;;5127   		if(b_zar<(tempUS_/**10*/))
002efa  42b0              CMP      r0,r6
002efc  d20e              BCS      |L1.12060|
;;;5128   			{
;;;5129   			bat[in]._zar_cnt-=AH_CONSTANT;
002efe  6961              LDR      r1,[r4,#0x14]
002f00  f5a14100          SUB      r1,r1,#0x8000
002f04  f5a1614a          SUB      r1,r1,#0xca0
002f08  6161              STR      r1,[r4,#0x14]
;;;5130   
;;;5131   			lc640_write_int(ADR_EE_BAT_ZAR_CNT[in],b_zar+1);
002f0a  f9392015          LDRSH    r2,[r9,r5,LSL #1]
002f0e  f1000001          ADD      r0,r0,#1
002f12  b201              SXTH     r1,r0
002f14  4610              MOV      r0,r2
002f16  f7fffffe          BL       lc640_write_int
002f1a  e033              B        |L1.12164|
                  |L1.12060|
;;;5132   			}
;;;5133   		else if(b_zar>(tempUS_/**10*/))  
002f1c  d932              BLS      |L1.12164|
;;;5134   			{
;;;5135   			lc640_write_int(ADR_EE_BAT_ZAR_CNT[in],tempUS_);
002f1e  f9390015          LDRSH    r0,[r9,r5,LSL #1]
002f22  b231              SXTH     r1,r6
002f24  f7fffffe          BL       lc640_write_int
;;;5136   			bat[in]._zar_cnt=AH_CONSTANT;
002f28  f8c48014          STR      r8,[r4,#0x14]
002f2c  e02a              B        |L1.12164|
                  |L1.12078|
;;;5137   
;;;5138   			}
;;;5139   
;;;5140   		}
;;;5141   
;;;5142   	else if(bat[in]._zar_cnt<=-AH_CONSTANT)
002f2e  498e              LDR      r1,|L1.12648|
002f30  4288              CMP      r0,r1
002f32  dc27              BGT      |L1.12164|
;;;5143   		{
;;;5144   		if(BAT_C_REAL[in]==0x5555) tempUS_=BAT_C_NOM[in];
002f34  f93a1015          LDRSH    r1,[r10,r5,LSL #1]
002f38  f5a140aa          SUB      r0,r1,#0x5500
002f3c  3855              SUBS     r0,r0,#0x55
002f3e  d103              BNE      |L1.12104|
002f40  4888              LDR      r0,|L1.12644|
002f42  f8306015          LDRH     r6,[r0,r5,LSL #1]
002f46  e001              B        |L1.12108|
                  |L1.12104|
;;;5145   		else tempUS_=BAT_C_REAL[in];
002f48  f83a6015          LDRH     r6,[r10,r5,LSL #1]
                  |L1.12108|
;;;5146   		
;;;5147   		b_zar=lc640_read_int(ADR_EE_BAT_ZAR_CNT[in]);
002f4c  f8390015          LDRH     r0,[r9,r5,LSL #1]
002f50  f7fffffe          BL       lc640_read_int
002f54  b280              UXTH     r0,r0
;;;5148   
;;;5149   		if(b_zar>tempUS_)
002f56  42b0              CMP      r0,r6
002f58  d905              BLS      |L1.12134|
;;;5150   			{
;;;5151   			lc640_write_int(ADR_EE_BAT_ZAR_CNT[in],tempUS_);
002f5a  f9390015          LDRSH    r0,[r9,r5,LSL #1]
002f5e  b231              SXTH     r1,r6
002f60  f7fffffe          BL       lc640_write_int
;;;5152   			b_zar=tempUS_;
002f64  4630              MOV      r0,r6
                  |L1.12134|
;;;5153   			}
;;;5154   		if(b_zar)
002f66  b158              CBZ      r0,|L1.12160|
;;;5155   			{
;;;5156   			bat[in]._zar_cnt+=AH_CONSTANT;
002f68  6961              LDR      r1,[r4,#0x14]
002f6a  4441              ADD      r1,r1,r8
002f6c  6161              STR      r1,[r4,#0x14]
;;;5157   
;;;5158   			lc640_write_int(ADR_EE_BAT_ZAR_CNT[in],b_zar-1);
002f6e  f9392015          LDRSH    r2,[r9,r5,LSL #1]
002f72  f1a00001          SUB      r0,r0,#1
002f76  b201              SXTH     r1,r0
002f78  4610              MOV      r0,r2
002f7a  f7fffffe          BL       lc640_write_int
002f7e  e001              B        |L1.12164|
                  |L1.12160|
;;;5159   			}
;;;5160   		else 
;;;5161   			{
;;;5162   			bat[in]._zar_cnt=-AH_CONSTANT;
002f80  4879              LDR      r0,|L1.12648|
002f82  6160              STR      r0,[r4,#0x14]
                  |L1.12164|
;;;5163   			}
;;;5164   
;;;5165   		}
;;;5166   
;;;5167   			
;;;5168   	tempUL=(unsigned long)lc640_read_int(ADR_EE_BAT_ZAR_CNT[in]);
002f84  f8390015          LDRH     r0,[r9,r5,LSL #1]
002f88  f7fffffe          BL       lc640_read_int
002f8c  4601              MOV      r1,r0
;;;5169   	
;;;5170   	if(BAT_C_REAL[in]==0x5555) tempUL_=(unsigned long)BAT_C_NOM[in];
002f8e  f93a0015          LDRSH    r0,[r10,r5,LSL #1]
002f92  f5a042aa          SUB      r2,r0,#0x5500
002f96  3a55              SUBS     r2,r2,#0x55
002f98  d102              BNE      |L1.12192|
002f9a  4872              LDR      r0,|L1.12644|
002f9c  f9300015          LDRSH    r0,[r0,r5,LSL #1]
                  |L1.12192|
;;;5171   	else tempUL_=(unsigned long)BAT_C_REAL[in];
;;;5172   		           	
;;;5173   	tempUL*=1000L;
002fa0  f44f727a          MOV      r2,#0x3e8
002fa4  fb01f102          MUL      r1,r1,r2
;;;5174   
;;;5175   
;;;5176   	if(tempUL_==0) tempUL=0;
002fa8  b168              CBZ      r0,|L1.12230|
;;;5177   	else tempUL/=tempUL_;
002faa  fbb1f0f0          UDIV     r0,r1,r0
                  |L1.12206|
;;;5178   
;;;5179   	tempUL/=10L;
002fae  f04f010a          MOV      r1,#0xa
002fb2  fbb0f0f1          UDIV     r0,r0,r1
;;;5180   
;;;5181   	bat[in]._zar=(unsigned short)tempUL;
002fb6  8220              STRH     r0,[r4,#0x10]
;;;5182   
;;;5183   	if(BAT_TYPE==1)
002fb8  486c              LDR      r0,|L1.12652|
002fba  8800              LDRH     r0,[r0,#0]  ; BAT_TYPE
002fbc  2801              CMP      r0,#1
002fbe  e000              B        |L1.12226|
                  |L1.12224|
002fc0  e00f              B        |L1.12258|
                  |L1.12226|
002fc2  d003              BEQ      |L1.12236|
002fc4  e007              B        |L1.12246|
                  |L1.12230|
002fc6  f04f0000          MOV      r0,#0                 ;5176
002fca  e7f0              B        |L1.12206|
                  |L1.12236|
;;;5184   		{
;;;5185   		bat[in]._zar=lakb[in]._s_o_c;
002fcc  4868              LDR      r0,|L1.12656|
002fce  eb001085          ADD      r0,r0,r5,LSL #6
002fd2  8a40              LDRH     r0,[r0,#0x12]
002fd4  8220              STRH     r0,[r4,#0x10]
                  |L1.12246|
;;;5186   		}
;;;5187   	
;;;5188   	gran((signed short*)&bat[in]._zar,0,100);
002fd6  f1040010          ADD      r0,r4,#0x10
002fda  2264              MOVS     r2,#0x64
002fdc  2100              MOVS     r1,#0
002fde  f7fffffe          BL       gran
                  |L1.12258|
;;;5189        }
;;;5190   
;;;5191   
;;;5192   //         
;;;5193   if(bat[in]._wrk==1)
002fe2  7ba0              LDRB     r0,[r4,#0xe]
002fe4  2801              CMP      r0,#1
002fe6  d113              BNE      |L1.12304|
;;;5194   	{
;;;5195   	if(bat[in]._Iintegr<36000)
002fe8  8ba0              LDRH     r0,[r4,#0x1c]
002fea  4540              CMP      r0,r8
002fec  d20f              BCS      |L1.12302|
;;;5196   		{          
;;;5197   		bat[in]._Iintegr+=abs(bat[in]._Ib);
002fee  f9b40008          LDRSH    r0,[r4,#8]
002ff2  f7fffffe          BL       abs
002ff6  8ba1              LDRH     r1,[r4,#0x1c]
002ff8  4408              ADD      r0,r0,r1
002ffa  b280              UXTH     r0,r0
002ffc  83a0              STRH     r0,[r4,#0x1c]
;;;5198   		if(bat[in]._Iintegr>=36000)
002ffe  4540              CMP      r0,r8
003000  d306              BCC      |L1.12304|
;;;5199   			{
;;;5200   			bat[in]._Iintegr=0;		//  
003002  83a7              STRH     r7,[r4,#0x1c]
;;;5201   			bat[in]._Iintegr_++;	//  
003004  8be0              LDRH     r0,[r4,#0x1e]
003006  f1000001          ADD      r0,r0,#1
00300a  83e0              STRH     r0,[r4,#0x1e]
00300c  e000              B        |L1.12304|
                  |L1.12302|
;;;5202   			}
;;;5203   		}
;;;5204   	else 
;;;5205   		{
;;;5206   		bat[in]._Iintegr=0;
00300e  83a7              STRH     r7,[r4,#0x1c]
                  |L1.12304|
;;;5207   		}	
;;;5208   	} 
;;;5209   	    
;;;5210   //
;;;5211   if((bat[in]._Tb>TBATSIGN)&&(!bat[in]._nd))	
003010  4958              LDR      r1,|L1.12660|
003012  f9b4000a          LDRSH    r0,[r4,#0xa]
003016  f9b11000          LDRSH    r1,[r1,#0]  ; TBATSIGN
00301a  4288              CMP      r0,r1
00301c  dd01              BLE      |L1.12322|
00301e  7b20              LDRB     r0,[r4,#0xc]
003020  b3e8              CBZ      r0,|L1.12446|
                  |L1.12322|
;;;5212   	{
;;;5213   	bat[in]._sign_temper_cnt++;
;;;5214   	}
;;;5215   else 
;;;5216   	{
;;;5217   	bat[in]._sign_temper_cnt--;
003022  f8b40040          LDRH     r0,[r4,#0x40]
003026  f1a00001          SUB      r0,r0,#1
00302a  f8a40040          STRH     r0,[r4,#0x40]
                  |L1.12334|
;;;5218   	}
;;;5219   
;;;5220   gran(&bat[in]._sign_temper_cnt,0,600);
00302e  f44f7916          MOV      r9,#0x258
003032  f1040040          ADD      r0,r4,#0x40
003036  464a              MOV      r2,r9
003038  2100              MOVS     r1,#0
00303a  f7fffffe          BL       gran
;;;5221   if(bat[in]._sign_temper_cnt>=590)	bat[in]._temper_stat|=(1<<0);
00303e  f9b40040          LDRSH    r0,[r4,#0x40]
003042  f240264e          MOV      r6,#0x24e
003046  42b0              CMP      r0,r6
003048  db05              BLT      |L1.12374|
00304a  f894103f          LDRB     r1,[r4,#0x3f]
00304e  f0410101          ORR      r1,r1,#1
003052  f884103f          STRB     r1,[r4,#0x3f]
                  |L1.12374|
;;;5222   if(bat[in]._sign_temper_cnt<=10)	bat[in]._temper_stat&=~(1<<0);
003056  280a              CMP      r0,#0xa
003058  dc05              BGT      |L1.12390|
00305a  f894003f          LDRB     r0,[r4,#0x3f]
00305e  f0200001          BIC      r0,r0,#1
003062  f884003f          STRB     r0,[r4,#0x3f]
                  |L1.12390|
;;;5223   
;;;5224   
;;;5225   if((bat[in]._Tb>TBATMAX)&&(!bat[in]._nd))	
003066  4944              LDR      r1,|L1.12664|
003068  f9b4000a          LDRSH    r0,[r4,#0xa]
00306c  f9b11000          LDRSH    r1,[r1,#0]  ; TBATMAX
003070  4288              CMP      r0,r1
003072  dd01              BLE      |L1.12408|
003074  7b20              LDRB     r0,[r4,#0xc]
003076  b3a0              CBZ      r0,|L1.12514|
                  |L1.12408|
;;;5226   	{
;;;5227   	bat[in]._max_temper_cnt++;
;;;5228   	}
;;;5229   else 
;;;5230   	{
;;;5231   	bat[in]._max_temper_cnt--;
003078  f8b40042          LDRH     r0,[r4,#0x42]
00307c  f1a00001          SUB      r0,r0,#1
003080  f8a40042          STRH     r0,[r4,#0x42]
                  |L1.12420|
;;;5232   	}
;;;5233   
;;;5234   gran(&bat[in]._max_temper_cnt,0,600);
003084  f1040042          ADD      r0,r4,#0x42
003088  464a              MOV      r2,r9
00308a  2100              MOVS     r1,#0
00308c  f7fffffe          BL       gran
;;;5235   if(bat[in]._max_temper_cnt>=590)	bat[in]._temper_stat|=(1<<1);
003090  f9b40042          LDRSH    r0,[r4,#0x42]
003094  42b0              CMP      r0,r6
003096  db07              BLT      |L1.12456|
003098  f894103f          LDRB     r1,[r4,#0x3f]
00309c  e000              B        |L1.12448|
                  |L1.12446|
00309e  e021              B        |L1.12516|
                  |L1.12448|
0030a0  f0410102          ORR      r1,r1,#2
0030a4  f884103f          STRB     r1,[r4,#0x3f]
                  |L1.12456|
;;;5236   if(bat[in]._max_temper_cnt<=10)	bat[in]._temper_stat&=~(1<<1);
0030a8  280a              CMP      r0,#0xa
0030aa  dc05              BGT      |L1.12472|
0030ac  f894003f          LDRB     r0,[r4,#0x3f]
0030b0  f0200002          BIC      r0,r0,#2
0030b4  f884003f          STRB     r0,[r4,#0x3f]
                  |L1.12472|
;;;5237   
;;;5238   
;;;5239   
;;;5240   //  
;;;5241   if(bat[in]._resurs_cnt<36000)
0030b8  6c60              LDR      r0,[r4,#0x44]
0030ba  4540              CMP      r0,r8
0030bc  da20              BGE      |L1.12544|
;;;5242   	{               
;;;5243   	bat[in]._resurs_cnt++;
0030be  f1000001          ADD      r0,r0,#1
0030c2  6460              STR      r0,[r4,#0x44]
;;;5244   	if(bat[in]._resurs_cnt>=36000)
0030c4  4540              CMP      r0,r8
0030c6  db1c              BLT      |L1.12546|
;;;5245   		{
;;;5246   		bat[in]._resurs_cnt=0;
0030c8  6467              STR      r7,[r4,#0x44]
;;;5247   		lc640_write_int(ADR_EE_BAT_RESURS[in],lc640_read_int(ADR_EE_BAT_RESURS[in])+1);
0030ca  4e2c              LDR      r6,|L1.12668|
0030cc  f8360015          LDRH     r0,[r6,r5,LSL #1]
0030d0  f7fffffe          BL       lc640_read_int
0030d4  1c40              ADDS     r0,r0,#1
0030d6  b201              SXTH     r1,r0
0030d8  f9360015          LDRSH    r0,[r6,r5,LSL #1]
0030dc  f7fffffe          BL       lc640_write_int
0030e0  e00f              B        |L1.12546|
                  |L1.12514|
0030e2  e006              B        |L1.12530|
                  |L1.12516|
0030e4  f8b40040          LDRH     r0,[r4,#0x40]         ;5213
0030e8  f1000001          ADD      r0,r0,#1              ;5213
0030ec  f8a40040          STRH     r0,[r4,#0x40]         ;5213
0030f0  e79d              B        |L1.12334|
                  |L1.12530|
0030f2  f8b40042          LDRH     r0,[r4,#0x42]         ;5227
0030f6  f1000001          ADD      r0,r0,#1              ;5227
0030fa  f8a40042          STRH     r0,[r4,#0x42]         ;5227
0030fe  e7c1              B        |L1.12420|
                  |L1.12544|
;;;5248   		}
;;;5249   	}
;;;5250   else bat[in]._resurs_cnt=0;
003100  6467              STR      r7,[r4,#0x44]
                  |L1.12546|
;;;5251   
;;;5252   
;;;5253   #ifndef UKU_220_V2
;;;5254   #ifndef UKU_GLONASS
;;;5255   #ifndef UKU_6U
;;;5256   //#ifndef UKU_220
;;;5257   if(UBM_AV)
003102  4e1f              LDR      r6,|L1.12672|
003104  8830              LDRH     r0,[r6,#0]  ; UBM_AV
003106  2800              CMP      r0,#0
003108  d07d              BEQ      |L1.12806|
;;;5258        {
;;;5259        signed short temp_SS;
;;;5260   #ifdef UKU_220
;;;5261   temp_SS=bat[in]._Ub/2;
;;;5262   #else
;;;5263        if(U0B<600)
00310a  481e              LDR      r0,|L1.12676|
00310c  f9b00000          LDRSH    r0,[r0,#0]  ; U0B
003110  4548              CMP      r0,r9
003112  da08              BGE      |L1.12582|
;;;5264             {
;;;5265             temp_SS=bat[in]._Ub/4;
003114  f9b40002          LDRSH    r0,[r4,#2]
003118  ea4f71e0          ASR      r1,r0,#31
00311c  eb007091          ADD      r0,r0,r1,LSR #30
003120  ea4f00a0          ASR      r0,r0,#2
003124  e006              B        |L1.12596|
                  |L1.12582|
;;;5266             }
;;;5267        else temp_SS=bat[in]._Ub/5;
003126  f9b40002          LDRSH    r0,[r4,#2]
00312a  f04f0105          MOV      r1,#5
00312e  fb90f0f1          SDIV     r0,r0,r1
003132  b200              SXTH     r0,r0
                  |L1.12596|
;;;5268   	
;;;5269   	temp_SS+=temp_SS;     
003134  ea4f0040          LSL      r0,r0,#1
;;;5270   #endif
;;;5271        temp_SS-=(bat[in]._Ubm);
003138  88a1              LDRH     r1,[r4,#4]
00313a  eba00001          SUB      r0,r0,r1
00313e  b200              SXTH     r0,r0
;;;5272   
;;;5273        temp_SS=abs(temp_SS);
003140  f7fffffe          BL       abs
;;;5274   
;;;5275        temp_SS*=10;
003144  eb000080          ADD      r0,r0,r0,LSL #2
003148  e01e              B        |L1.12680|
00314a  0000              DCW      0x0000
                  |L1.12620|
                          DCD      main_10Hz_cnt
                  |L1.12624|
                          DCD      IKB
                  |L1.12628|
                          DCD      bat_u_old_cnt
                  |L1.12632|
                          DCD      0x40024020
                  |L1.12636|
                          DCD      ADR_EE_BAT_ZAR_CNT
                  |L1.12640|
                          DCD      BAT_C_REAL
                  |L1.12644|
                          DCD      BAT_C_NOM
                  |L1.12648|
                          DCD      0xffff7360
                  |L1.12652|
                          DCD      BAT_TYPE
                  |L1.12656|
                          DCD      lakb
                  |L1.12660|
                          DCD      TBATSIGN
                  |L1.12664|
                          DCD      TBATMAX
                  |L1.12668|
                          DCD      ADR_EE_BAT_RESURS
                  |L1.12672|
                          DCD      UBM_AV
                  |L1.12676|
                          DCD      U0B
                  |L1.12680|
003188  ea4f0040          LSL      r0,r0,#1
00318c  b200              SXTH     r0,r0
;;;5276   
;;;5277        temp_SS/=12;
00318e  f04f010c          MOV      r1,#0xc
003192  fb90f0f1          SDIV     r0,r0,r1
003196  b200              SXTH     r0,r0
;;;5278   
;;;5279        bat[in]._dUbm=temp_SS;
003198  80e0              STRH     r0,[r4,#6]
;;;5280   
;;;5281   
;;;5282        if(	(bat[in]._dUbm>UBM_AV) &&
00319a  f9b61000          LDRSH    r1,[r6,#0]  ; UBM_AV
00319e  4288              CMP      r0,r1
0031a0  dd36              BLE      |L1.12816|
;;;5283   		(abs(bat[in]._Ib)<(5*IKB)) &&
0031a2  f9b40008          LDRSH    r0,[r4,#8]
0031a6  f7fffffe          BL       abs
0031aa  4601              MOV      r1,r0
0031ac  48f8              LDR      r0,|L1.13712|
0031ae  f9b00000          LDRSH    r0,[r0,#0]  ; IKB
0031b2  eb000080          ADD      r0,r0,r0,LSL #2
0031b6  4281              CMP      r1,r0
0031b8  da2a              BGE      |L1.12816|
;;;5284   		(bat[in]._Ub>((short)(((long)USIGN*115)/100))) &&
0031ba  48f6              LDR      r0,|L1.13716|
0031bc  2173              MOVS     r1,#0x73
0031be  f9b00000          LDRSH    r0,[r0,#0]  ; USIGN
0031c2  4348              MULS     r0,r1,r0
0031c4  fb90f0fb          SDIV     r0,r0,r11
0031c8  f9b41002          LDRSH    r1,[r4,#2]
0031cc  b200              SXTH     r0,r0
0031ce  4288              CMP      r0,r1
0031d0  da1e              BGE      |L1.12816|
;;;5285   		(!(bat[in]._av & 2))  )
0031d2  f894003d          LDRB     r0,[r4,#0x3d]
0031d6  0780              LSLS     r0,r0,#30
0031d8  d41a              BMI      |L1.12816|
;;;5286   		{
;;;5287   		bat[in]._cnt_as++;
0031da  f8b40048          LDRH     r0,[r4,#0x48]
0031de  f1000001          ADD      r0,r0,#1
0031e2  b200              SXTH     r0,r0
0031e4  f8a40048          STRH     r0,[r4,#0x48]
;;;5288   		if(bat[in]._cnt_as==3000)
0031e8  f5a06130          SUB      r1,r0,#0xb00
0031ec  39b8              SUBS     r1,r1,#0xb8
0031ee  d103              BNE      |L1.12792|
;;;5289   			{
;;;5290   			avar_bat_as_hndl(in,1);
0031f0  2101              MOVS     r1,#1
0031f2  4628              MOV      r0,r5
0031f4  f7fffffe          BL       avar_bat_as_hndl
                  |L1.12792|
;;;5291   			}
;;;5292   		if(bat[in]._cnt_as>=3005) bat[in]._cnt_as=3005;
0031f8  f9b41048          LDRSH    r1,[r4,#0x48]
0031fc  f64030bd          MOV      r0,#0xbbd
003200  4281              CMP      r1,r0
003202  db03              BLT      |L1.12812|
003204  e000              B        |L1.12808|
                  |L1.12806|
003206  e001              B        |L1.12812|
                  |L1.12808|
003208  f8a40048          STRH     r0,[r4,#0x48]
                  |L1.12812|
;;;5293   		}
;;;5294   	else 
;;;5295   		{
;;;5296   		bat[in]._cnt_as=0;
;;;5297   		}
;;;5298        
;;;5299        }
;;;5300   #endif 
;;;5301   #endif 
;;;5302   #endif
;;;5303   
;;;5304   }
00320c  e8bd9ffc          POP      {r2-r12,pc}
                  |L1.12816|
003210  f8a47048          STRH     r7,[r4,#0x48]         ;5296
003214  e7fa              B        |L1.12812|
;;;5305   
                          ENDP

                  u_necc_hndl PROC
;;;5312   //-----------------------------------------------
;;;5313   void u_necc_hndl(void)
003216  b538              PUSH     {r3-r5,lr}
;;;5314   {
;;;5315   signed long temp_L;
;;;5316   signed long temp_SL;
;;;5317   //signed short temp_SS;
;;;5318   signed short t[2];
;;;5319   //char i;
;;;5320   
;;;5321   //temp_SS=0;
;;;5322   
;;;5323   #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;5324   
;;;5325   if(!TERMOKOMPENS)
003218  48df              LDR      r0,|L1.13720|
;;;5326   	{
;;;5327   	//u_necc=U0B;
;;;5328   	u_necc=UB20;
00321a  4ce1              LDR      r4,|L1.13728|
00321c  8801              LDRH     r1,[r0,#0]            ;5325  ; TERMOKOMPENS
00321e  48df              LDR      r0,|L1.13724|
003220  f9b02000          LDRSH    r2,[r0,#0]
003224  b139              CBZ      r1,|L1.12854|
;;;5329   	}
;;;5330   else
;;;5331   	{
;;;5332   	if(ND_EXT[0])t[0]=20;
003226  48df              LDR      r0,|L1.13732|
003228  6800              LDR      r0,[r0,#0]  ; ND_EXT
00322a  b130              CBZ      r0,|L1.12858|
00322c  f04f0014          MOV      r0,#0x14
003230  f8ad0000          STRH     r0,[sp,#0]
003234  e005              B        |L1.12866|
                  |L1.12854|
003236  8022              STRH     r2,[r4,#0]            ;5328
003238  e027              B        |L1.12938|
                  |L1.12858|
;;;5333   	else t[0]=t_ext[0];
00323a  48db              LDR      r0,|L1.13736|
00323c  8800              LDRH     r0,[r0,#0]  ; t_ext
00323e  f8ad0000          STRH     r0,[sp,#0]
                  |L1.12866|
;;;5334   
;;;5335   	mat_temper=t[0];
003242  4bda              LDR      r3,|L1.13740|
003244  f9bd1000          LDRSH    r1,[sp,#0]
003248  6019              STR      r1,[r3,#0]  ; mat_temper
;;;5336   			
;;;5337   	if(mat_temper<0)temp_SL=UB0; 
00324a  48d9              LDR      r0,|L1.13744|
00324c  2900              CMP      r1,#0
00324e  f9b00000          LDRSH    r0,[r0,#0]
003252  db12              BLT      |L1.12922|
;;;5338   	else 
;;;5339   		{
;;;5340   		if(mat_temper>40)mat_temper=40; 
003254  2928              CMP      r1,#0x28
003256  dd02              BLE      |L1.12894|
003258  f04f0128          MOV      r1,#0x28
00325c  6019              STR      r1,[r3,#0]  ; mat_temper
                  |L1.12894|
;;;5341   		temp_SL=(UB20-UB0)*10;
00325e  eba20100          SUB      r1,r2,r0
003262  eb010181          ADD      r1,r1,r1,LSL #2
003266  ea4f0141          LSL      r1,r1,#1
;;;5342   		temp_SL*=mat_temper;
00326a  681a              LDR      r2,[r3,#0]  ; mat_temper
00326c  fb01f102          MUL      r1,r1,r2
;;;5343   		temp_SL/=200;
003270  f04f02c8          MOV      r2,#0xc8
003274  fb91f1f2          SDIV     r1,r1,r2
;;;5344   		temp_SL+=UB0;
003278  4408              ADD      r0,r0,r1
                  |L1.12922|
;;;5345   		}
;;;5346   	if(spc_stat==spcVZ)
00327a  49ce              LDR      r1,|L1.13748|
00327c  7cc9              LDRB     r1,[r1,#0x13]  ; spc_stat
00327e  2902              CMP      r1,#2
003280  d102              BNE      |L1.12936|
;;;5347   		{
;;;5348   		temp_SL=UVZ;
003282  48cd              LDR      r0,|L1.13752|
003284  f9b00000          LDRSH    r0,[r0,#0]  ; UVZ
                  |L1.12936|
;;;5349   		}
;;;5350   	u_necc=(unsigned int)temp_SL;
003288  8020              STRH     r0,[r4,#0]
                  |L1.12938|
;;;5351   	///u_necc=3456;
;;;5352   	}  
;;;5353   
;;;5354   //u_necc=2355;
;;;5355   
;;;5356   if(speedChIsOn)
00328a  48cc              LDR      r0,|L1.13756|
00328c  8800              LDRH     r0,[r0,#0]  ; speedChIsOn
00328e  b110              CBZ      r0,|L1.12950|
;;;5357   	{
;;;5358   	u_necc=speedChrgVolt;
003290  48cb              LDR      r0,|L1.13760|
003292  8800              LDRH     r0,[r0,#0]  ; speedChrgVolt
003294  8020              STRH     r0,[r4,#0]
                  |L1.12950|
;;;5359   	}
;;;5360   
;;;5361   if(mess_find_unvol(MESS2UNECC_HNDL))
003296  20be              MOVS     r0,#0xbe
003298  f7fffffe          BL       mess_find_unvol
00329c  b128              CBZ      r0,|L1.12970|
;;;5362   	{		
;;;5363   	if(mess_data[0]==PARAM_UNECC_SET)
00329e  48c9              LDR      r0,|L1.13764|
0032a0  6801              LDR      r1,[r0,#0]  ; mess_data
0032a2  29bf              CMP      r1,#0xbf
0032a4  d101              BNE      |L1.12970|
;;;5364   		{
;;;5365   		u_necc=mess_data[1];
0032a6  6840              LDR      r0,[r0,#4]  ; mess_data
0032a8  8020              STRH     r0,[r4,#0]
                  |L1.12970|
;;;5366   		}		
;;;5367   	}
;;;5368   if(ICA_EN)u_necc+=ica_u_necc;
0032aa  48c7              LDR      r0,|L1.13768|
0032ac  8800              LDRH     r0,[r0,#0]  ; ICA_EN
0032ae  b120              CBZ      r0,|L1.12986|
0032b0  49c6              LDR      r1,|L1.13772|
0032b2  8820              LDRH     r0,[r4,#0]  ; u_necc
0032b4  8809              LDRH     r1,[r1,#0]  ; ica_u_necc
0032b6  4408              ADD      r0,r0,r1
0032b8  8020              STRH     r0,[r4,#0]
                  |L1.12986|
;;;5369   #endif
;;;5370   
;;;5371   
;;;5372   #ifndef UKU_220_IPS_TERMOKOMPENSAT
;;;5373   
;;;5374   #ifndef UKU_TELECORE2015
;;;5375   if(unh_cnt0<10)
;;;5376   	{
;;;5377   	unh_cnt0++;
;;;5378   	if(unh_cnt0>=10)
;;;5379   		{
;;;5380   		unh_cnt0=0;
;;;5381   		b1Hz_unh=1;
;;;5382   		}
;;;5383   	}
;;;5384   
;;;5385   if(unh_cnt1<5)
;;;5386   	{
;;;5387   	unh_cnt1++;
;;;5388   	if(unh_cnt1==5)
;;;5389   		{
;;;5390   		unh_cnt1=0;
;;;5391   //		b2Hz_unh=1;
;;;5392   		}
;;;5393   	} 
;;;5394   
;;;5395   
;;;5396   
;;;5397   if(mess_find_unvol(MESS2UNECC_HNDL))
;;;5398   	{		
;;;5399   	if(mess_data[0]==PARAM_UNECC_SET)
;;;5400   		{
;;;5401   		u_necc=mess_data[1];
;;;5402   		}		
;;;5403   	}
;;;5404   
;;;5405   
;;;5406   else if(b1Hz_unh)
;;;5407   	{
;;;5408   	
;;;5409   	if((BAT_IS_ON[0]!=bisON) && (BAT_IS_ON[1]!=bisON))
;;;5410   		{
;;;5411   		
;;;5412   		u_necc=U0B;
;;;5413   		}
;;;5414   	else 
;;;5415   		{
;;;5416   		if(BAT_TYPE==0) //  
;;;5417   			{
;;;5418   			for(i=0;i<2;i++)
;;;5419   				{
;;;5420   				if(BAT_IS_ON[i]==bisON)
;;;5421   					{
;;;5422   					if(bat[i]._nd)t[i]=20;
;;;5423   					else t[i]=bat[i]._Tb;
;;;5424   					}
;;;5425   				else
;;;5426   					{
;;;5427   					t[i]=-20;
;;;5428   					}
;;;5429   				}
;;;5430   			if(t[0]>t[1])mat_temper=t[0];
;;;5431   			else mat_temper=t[1];
;;;5432   			
;;;5433   		
;;;5434   			if(mat_temper<0)temp_SL=UB0; 
;;;5435   			else 
;;;5436   				{
;;;5437   				if(mat_temper>40)mat_temper=40; 
;;;5438   				temp_SL=(UB20-UB0)*10;
;;;5439   				temp_SL*=mat_temper;
;;;5440   				temp_SL/=200;
;;;5441   				temp_SL+=UB0;
;;;5442   				}
;;;5443   			if(spc_stat==spcVZ)
;;;5444   				{
;;;5445   				temp_SL=UVZ;
;;;5446   				}
;;;5447   			u_necc=(unsigned int)temp_SL;
;;;5448   			}
;;;5449   		else if(BAT_TYPE==1) //  
;;;5450   			{
;;;5451   			u_necc=U0B;
;;;5452   					
;;;5453   			u_necc=bat[0]._Ub+10;
;;;5454   
;;;5455   			
;;;5456   			if(spc_stat==spcVZ)
;;;5457   				{
;;;5458   				u_necc=UVZ;
;;;5459   				}
;;;5460   			if(u_necc>=UB0) u_necc=UB0;
;;;5461   			if(u_necc>=UB20) u_necc=UB20;
;;;5462   			}
;;;5463   		}  
;;;5464   	}
;;;5465   #endif
;;;5466   #ifdef UKU_TELECORE2015
;;;5467   
;;;5468   if(unh_cnt0<10)
;;;5469   	{
;;;5470   	unh_cnt0++;
;;;5471   	if(unh_cnt0>=10)
;;;5472   		{
;;;5473   		unh_cnt0=0;
;;;5474   		b1Hz_unh=1;
;;;5475   		}
;;;5476   	}
;;;5477   
;;;5478   if(unh_cnt1<5)
;;;5479   	{
;;;5480   	unh_cnt1++;
;;;5481   	if(unh_cnt1==5)
;;;5482   		{
;;;5483   		unh_cnt1=0;
;;;5484   //		b2Hz_unh=1;
;;;5485   		}
;;;5486   	} 
;;;5487   
;;;5488   
;;;5489   
;;;5490   if(mess_find_unvol(MESS2UNECC_HNDL))
;;;5491   	{		
;;;5492   	if(mess_data[0]==PARAM_UNECC_SET)
;;;5493   		{
;;;5494   		u_necc=mess_data[1];
;;;5495   		}		
;;;5496   	}
;;;5497   
;;;5498   
;;;5499   else if(b1Hz_unh)
;;;5500   	{
;;;5501   	b1Hz_unh=0;
;;;5502   
;;;5503   	if(BAT_TYPE==0)
;;;5504   		{
;;;5505   		if(bat[0]._nd)mat_temper=20;
;;;5506   		else mat_temper=bat[0]._Tb;
;;;5507   
;;;5508   			
;;;5509   		if(mat_temper<0)temp_SL=UB0; 
;;;5510   		else 
;;;5511   			{
;;;5512   			if(mat_temper>40)mat_temper=40; 
;;;5513   			temp_SL=(UB20-UB0)*10;
;;;5514   			temp_SL*=mat_temper;
;;;5515   			temp_SL/=200;
;;;5516   			temp_SL+=UB0;
;;;5517   			}
;;;5518   		if(spc_stat==spcVZ)
;;;5519   			{
;;;5520   			temp_SL=UVZ;
;;;5521   			}
;;;5522   		u_necc=(unsigned int)temp_SL;
;;;5523   	///u_necc=3456;
;;;5524   		}
;;;5525   	else if(BAT_TYPE==1)
;;;5526   		{
;;;5527   		
;;;5528   		gran(&DU_LI_BAT,1,30);
;;;5529   		u_necc=li_bat._Ub+DU_LI_BAT;
;;;5530   		gran(&u_necc,0,UB0);
;;;5531   		gran(&u_necc,0,UB20);
;;;5532   		gran(&u_necc,0,540);		
;;;5533   
;;;5534   
;;;5535   		if(li_bat._batStat!=bsOK)
;;;5536   			{
;;;5537   			u_necc=U0B;
;;;5538   			}
;;;5539   		if(spc_stat==spcVZ)
;;;5540   			{
;;;5541   			u_necc=UVZ;
;;;5542   			}
;;;5543   		/* 
;;;5544   		u_necc=U0B;
;;;5545   		
;;;5546   
;;;5547   	
;;;5548   		u_necc=UB0;
;;;5549   		u_necc=li_bat._Ub+10;
;;;5550   		if((li_bat._Ub<450)||(li_bat._Ub>550))
;;;5551   			{
;;;5552   			lakb_error_cnt++;
;;;5553   			if(lakb_error_cnt>=30)
;;;5554   				{
;;;5555   				lakb_error_cnt=30;
;;;5556   				u_necc=U0B;
;;;5557   				}
;;;5558   			}
;;;5559   		else lakb_error_cnt=0;*/
;;;5560   		}
;;;5561   	else if(BAT_TYPE==2)
;;;5562   		{
;;;5563   		u_necc=U0B;
;;;5564   		
;;;5565   		if(spc_stat==spcVZ)
;;;5566   			{
;;;5567   			u_necc=UVZ;
;;;5568   			}
;;;5569   	
;;;5570   		u_necc=UB0;
;;;5571   		}
;;;5572   
;;;5573   	else if(BAT_TYPE==3)
;;;5574   		{
;;;5575   		u_necc=U0B;
;;;5576   		
;;;5577   		if(spc_stat==spcVZ)
;;;5578   			{
;;;5579   			u_necc=UVZ;
;;;5580   			}
;;;5581   
;;;5582   		gran(&DU_LI_BAT,1,30);
;;;5583   
;;;5584   
;;;5585   		if(lakbNotErrorNum==0)
;;;5586   			{
;;;5587   			u_necc=U0B;
;;;5588   			}
;;;5589   		else 
;;;5590   			{
;;;5591   			signed short i;
;;;5592   			//signed short u_necc_max;
;;;5593   			//u_necc_max=0;
;;;5594   			char soc_flag=0;
;;;5595   
;;;5596   			for(i=(NUMBAT_TELECORE-1);i>=0;i--)
;;;5597   				{
;;;5598   				if(lakb[i]._communicationFullErrorStat==0)u_necc=lakb[i]._tot_bat_volt+DU_LI_BAT;
;;;5599   				if(lakb[i]._s_o_c_percent<QSODERG_LI_BAT)soc_flag=1;
;;;5600   				}
;;;5601   
;;;5602   			if(soc_flag==0)u_necc=USODERG_LI_BAT;
;;;5603   			}
;;;5604   		gran(&u_necc,0,UB0);
;;;5605   		//gran(&u_necc,0,UB20);
;;;5606   		gran(&u_necc,0,540);
;;;5607   		}
;;;5608   	}
;;;5609   
;;;5610   #endif 
;;;5611   
;;;5612   //u_necc=2356;
;;;5613   #endif//gran(&u_necc,400,UMAX);
;;;5614   
;;;5615   temp_L=(signed long) u_necc;
0032ba  f9b40000          LDRSH    r0,[r4,#0]  ; u_necc
;;;5616   temp_L*=98L;
0032be  f04f0162          MOV      r1,#0x62
0032c2  fb00f101          MUL      r1,r0,r1
;;;5617   temp_L/=100L;
0032c6  f04f0264          MOV      r2,#0x64
0032ca  fb91f1f2          SDIV     r1,r1,r2
;;;5618   u_necc_dn=(signed short)temp_L;
0032ce  4bc0              LDR      r3,|L1.13776|
0032d0  8019              STRH     r1,[r3,#0]
;;;5619   
;;;5620   temp_L=(signed long) u_necc;
;;;5621   temp_L*=102L;
0032d2  f04f0166          MOV      r1,#0x66
0032d6  fb00f001          MUL      r0,r0,r1
;;;5622   temp_L/=100L;
0032da  fb90f0f2          SDIV     r0,r0,r2
;;;5623   u_necc_up=(signed short)temp_L;
0032de  49bd              LDR      r1,|L1.13780|
0032e0  8008              STRH     r0,[r1,#0]
;;;5624   
;;;5625   
;;;5626   }
0032e2  bd38              POP      {r3-r5,pc}
;;;5627   
                          ENDP

                  num_necc_hndl PROC
;;;5629   //-----------------------------------------------
;;;5630   void num_necc_hndl(void)
0032e4  e92d41f0          PUSH     {r4-r8,lr}
;;;5631   {
;;;5632   
;;;5633   static short num_necc_block_cnt;
;;;5634   if(num_necc_block_cnt) num_necc_block_cnt--;
0032e8  4cb2              LDR      r4,|L1.13748|
0032ea  f9b40026          LDRSH    r0,[r4,#0x26]  ; num_necc_block_cnt
0032ee  b110              CBZ      r0,|L1.13046|
0032f0  f1a00001          SUB      r0,r0,#1
0032f4  84e0              STRH     r0,[r4,#0x26]
                  |L1.13046|
;;;5635   
;;;5636   Isumm_=Isumm;
0032f6  48b8              LDR      r0,|L1.13784|
0032f8  4db8              LDR      r5,|L1.13788|
0032fa  8800              LDRH     r0,[r0,#0]  ; Isumm
0032fc  8028              STRH     r0,[r5,#0]
;;;5637   
;;;5638   if(bat[0]._Ib<0) Isumm_+=(abs(bat[0]._Ib))/10;
0032fe  4eb8              LDR      r6,|L1.13792|
003300  270a              MOVS     r7,#0xa
003302  f9b60008          LDRSH    r0,[r6,#8]  ; bat
003306  2800              CMP      r0,#0
003308  da06              BGE      |L1.13080|
00330a  f7fffffe          BL       abs
00330e  fb90f0f7          SDIV     r0,r0,r7
003312  8829              LDRH     r1,[r5,#0]  ; Isumm_
003314  4408              ADD      r0,r0,r1
003316  8028              STRH     r0,[r5,#0]
                  |L1.13080|
;;;5639   if(bat[1]._Ib<0) Isumm_+=(abs(bat[1]._Ib))/10;
003318  f9b60054          LDRSH    r0,[r6,#0x54]  ; bat
00331c  2800              CMP      r0,#0
00331e  da06              BGE      |L1.13102|
003320  f7fffffe          BL       abs
003324  fb90f0f7          SDIV     r0,r0,r7
003328  8829              LDRH     r1,[r5,#0]  ; Isumm_
00332a  4408              ADD      r0,r0,r1
00332c  8028              STRH     r0,[r5,#0]
                  |L1.13102|
;;;5640   
;;;5641   num_necc_up=(Isumm_/((signed short)IMAX))+1;
00332e  48ad              LDR      r0,|L1.13796|
003330  f9b51000          LDRSH    r1,[r5,#0]  ; Isumm_
003334  f9b00000          LDRSH    r0,[r0,#0]  ; IMAX
003338  fb91f0f0          SDIV     r0,r1,r0
00333c  f1000001          ADD      r0,r0,#1
003340  b2c0              UXTB     r0,r0
003342  73e0              STRB     r0,[r4,#0xf]
;;;5642   ////Isumm_+=(signed short)((IMAX*(10-KIMAX))/10);
;;;5643   ////Isumm_+=(signed short)(IMAX-IMIN);
;;;5644   
;;;5645   num_necc_down=(Isumm_/((signed short)IMIN))+1;
003344  4aa8              LDR      r2,|L1.13800|
003346  f9b22000          LDRSH    r2,[r2,#0]  ; IMIN
00334a  fb91f1f2          SDIV     r1,r1,r2
00334e  f1010101          ADD      r1,r1,#1
003352  b2ca              UXTB     r2,r1
003354  7422              STRB     r2,[r4,#0x10]
;;;5646   
;;;5647   if(num_necc_up>num_necc)
003356  49a5              LDR      r1,|L1.13804|
;;;5648   	{
;;;5649   	num_necc=num_necc_up;
;;;5650   	num_necc_block_cnt=60;
003358  f04f053c          MOV      r5,#0x3c
00335c  f9b13000          LDRSH    r3,[r1,#0]            ;5647  ; num_necc
003360  4298              CMP      r0,r3                 ;5647
003362  dd02              BLE      |L1.13162|
003364  8008              STRH     r0,[r1,#0]            ;5649
003366  84e5              STRH     r5,[r4,#0x26]
003368  e005              B        |L1.13174|
                  |L1.13162|
;;;5651   	}
;;;5652   else if(num_necc_down<num_necc)
00336a  429a              CMP      r2,r3
00336c  da03              BGE      |L1.13174|
;;;5653   	{
;;;5654   	if(!num_necc_block_cnt)
00336e  8ce0              LDRH     r0,[r4,#0x26]  ; num_necc_block_cnt
003370  b908              CBNZ     r0,|L1.13174|
;;;5655   		{
;;;5656   		num_necc=num_necc_down;
003372  800a              STRH     r2,[r1,#0]
;;;5657   		num_necc_block_cnt=60;
003374  84e5              STRH     r5,[r4,#0x26]
                  |L1.13174|
;;;5658   		}
;;;5659   	}
;;;5660   
;;;5661   if(PAR) num_necc=NUMIST;
003376  489e              LDR      r0,|L1.13808|
003378  8802              LDRH     r2,[r0,#0]  ; PAR
00337a  489e              LDR      r0,|L1.13812|
00337c  b10a              CBZ      r2,|L1.13186|
00337e  8802              LDRH     r2,[r0,#0]  ; NUMIST
003380  800a              STRH     r2,[r1,#0]
                  |L1.13186|
;;;5662   
;;;5663   #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;5664   if(bPARALLEL) num_necc=NUMIST;
003382  7f62              LDRB     r2,[r4,#0x1d]  ; bPARALLEL
003384  b10a              CBZ      r2,|L1.13194|
003386  8802              LDRH     r2,[r0,#0]  ; NUMIST
003388  800a              STRH     r2,[r1,#0]
                  |L1.13194|
;;;5665   #endif
;;;5666   
;;;5667   gran(&num_necc,1,NUMIST);
00338a  f9b02000          LDRSH    r2,[r0,#0]  ; NUMIST
00338e  e8bd41f0          POP      {r4-r8,lr}
003392  2101              MOVS     r1,#1
003394  4895              LDR      r0,|L1.13804|
003396  f7ffbffe          B.W      gran
;;;5668   
;;;5669   }
;;;5670   
                          ENDP

                  cntrl_hndl PROC
;;;5673   //-----------------------------------------------
;;;5674   void cntrl_hndl(void)
00339a  e92d5ff0          PUSH     {r4-r12,lr}
;;;5675   {
;;;5676   
;;;5677   IZMAX_=IZMAX;
00339e  4896              LDR      r0,|L1.13816|
0033a0  4c84              LDR      r4,|L1.13748|
0033a2  f9b01000          LDRSH    r1,[r0,#0]  ; IZMAX
0033a6  8761              STRH     r1,[r4,#0x3a]
;;;5678   
;;;5679   //cntrl_hndl_plazma=10;
;;;5680   
;;;5681   if(speedChIsOn)IZMAX_=speedChrgCurr;
0033a8  4884              LDR      r0,|L1.13756|
0033aa  8800              LDRH     r0,[r0,#0]  ; speedChIsOn
0033ac  b110              CBZ      r0,|L1.13236|
0033ae  4893              LDR      r0,|L1.13820|
0033b0  8800              LDRH     r0,[r0,#0]  ; speedChrgCurr
0033b2  8760              STRH     r0,[r4,#0x3a]
                  |L1.13236|
;;;5682   
;;;5683   if(cntrl_stat_blok_cnt)cntrl_stat_blok_cnt--;
0033b4  f9b40062          LDRSH    r0,[r4,#0x62]  ; cntrl_stat_blok_cnt
0033b8  b118              CBZ      r0,|L1.13250|
0033ba  f1a00001          SUB      r0,r0,#1
0033be  f8a40062          STRH     r0,[r4,#0x62]
                  |L1.13250|
;;;5684   if(cntrl_stat_blok_cnt_)cntrl_stat_blok_cnt_--;
0033c2  f9b40064          LDRSH    r0,[r4,#0x64]  ; cntrl_stat_blok_cnt_
0033c6  b118              CBZ      r0,|L1.13264|
0033c8  f1a00001          SUB      r0,r0,#1
0033cc  f8a40064          STRH     r0,[r4,#0x64]
                  |L1.13264|
;;;5685   
;;;5686   if((bat[0]._temper_stat&0x03)||(bat[1]._temper_stat&0x03))IZMAX_=IZMAX/10;
0033d0  4883              LDR      r0,|L1.13792|
0033d2  f04f080a          MOV      r8,#0xa
0033d6  f890203f          LDRB     r2,[r0,#0x3f]  ; bat
0033da  0792              LSLS     r2,r2,#30
0033dc  d103              BNE      |L1.13286|
0033de  f890008b          LDRB     r0,[r0,#0x8b]  ; bat
0033e2  0780              LSLS     r0,r0,#30
0033e4  d002              BEQ      |L1.13292|
                  |L1.13286|
0033e6  fb91f0f8          SDIV     r0,r1,r8
0033ea  8760              STRH     r0,[r4,#0x3a]
                  |L1.13292|
;;;5687   
;;;5688   
;;;5689   #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;5690   if((REG_SPEED<1)||(REG_SPEED>5)) REG_SPEED=1;
0033ec  4884              LDR      r0,|L1.13824|
0033ee  2501              MOVS     r5,#1
0033f0  f9b01000          LDRSH    r1,[r0,#0]  ; REG_SPEED
0033f4  1e49              SUBS     r1,r1,#1
0033f6  2905              CMP      r1,#5
0033f8  d300              BCC      |L1.13308|
0033fa  8005              STRH     r5,[r0,#0]
                  |L1.13308|
;;;5691   if(ch_cnt0<(10*REG_SPEED))
0033fc  f9b00000          LDRSH    r0,[r0,#0]  ; REG_SPEED
003400  2600              MOVS     r6,#0                 ;5681
003402  eb000180          ADD      r1,r0,r0,LSL #2
003406  79a0              LDRB     r0,[r4,#6]  ; ch_cnt0
003408  ebb00f41          CMP      r0,r1,LSL #1
00340c  da08              BGE      |L1.13344|
;;;5692   	{
;;;5693   	ch_cnt0++;
00340e  f1000001          ADD      r0,r0,#1
003412  b2c0              UXTB     r0,r0
003414  71a0              STRB     r0,[r4,#6]
;;;5694   	if(ch_cnt0>=10*REG_SPEED)
003416  ebb00f41          CMP      r0,r1,LSL #1
00341a  db01              BLT      |L1.13344|
;;;5695   		{
;;;5696   		ch_cnt0=0;
00341c  71a6              STRB     r6,[r4,#6]
;;;5697   		b1Hz_ch=1;
00341e  71e5              STRB     r5,[r4,#7]
                  |L1.13344|
;;;5698   		}
;;;5699   	}
;;;5700   #endif
;;;5701   #ifndef UKU_220_IPS_TERMOKOMPENSAT
;;;5702   if(ch_cnt0<10)
;;;5703   	{
;;;5704   	ch_cnt0++;
;;;5705   	if(ch_cnt0>=10)
;;;5706   		{
;;;5707   		ch_cnt0=0;
;;;5708   		b1Hz_ch=1;
;;;5709   		}
;;;5710   	}
;;;5711   #endif
;;;5712   
;;;5713   
;;;5714   if(mess_find_unvol(MESS2CNTRL_HNDL))
003420  20e1              MOVS     r0,#0xe1
003422  f7fffffe          BL       mess_find_unvol
;;;5715   	{
;;;5716   	if(mess_data[0]==PARAM_CNTRL_STAT_PLUS)
;;;5717   		{
;;;5718   		cntrl_stat=cntrl_stat_old+mess_data[1];
;;;5719   		}
;;;5720   	else if(mess_data[0]==PARAM_CNTRL_STAT_MINUS)
;;;5721   		{
;;;5722   		cntrl_stat=cntrl_stat_old-mess_data[1];
;;;5723   		}
;;;5724   	else if(mess_data[0]==PARAM_CNTRL_STAT_STEP_DOWN)
;;;5725   		{
;;;5726   		cntrl_stat--;
;;;5727   
;;;5728   		if((cntrl_stat<=30)||(load_U<USIGN)) mess_send(MESS2KB_HNDL,PARAM_CNTRL_IS_DOWN,0,10);
;;;5729   
;;;5730   		}
;;;5731   	else if(mess_data[0]==PARAM_CNTRL_STAT_SET)
;;;5732   		{
;;;5733   		cntrl_stat=mess_data[1];
;;;5734   		}
;;;5735   
;;;5736   	else if(mess_data[0]==PARAM_CNTRL_STAT_FAST_REG)
;;;5737   		{
;;;5738   		#ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;5739   		if(load_U>u_necc)
003426  f8df9178          LDR      r9,|L1.13728|
;;;5740   			{
;;;5741   			cntrl_hndl_plazma=11;
;;;5742   			if(((bps_U-u_necc)>40)&&(cntrl_stat>0))cntrl_stat-=5;
00342a  4a76              LDR      r2,|L1.13828|
;;;5743   			else if((cntrl_stat)&&b1Hz_ch)cntrl_stat--;
;;;5744   			}
;;;5745   		else if(bps_U<u_necc)
;;;5746   			{
;;;5747   			cntrl_hndl_plazma=12;	
;;;5748   			if(((u_necc-bps_U)>40)&&(cntrl_stat<1015))cntrl_stat+=5;
;;;5749   			else	if((cntrl_stat<1020)&&b1Hz_ch)cntrl_stat++;
;;;5750   			}
;;;5751   		#elif defined(UKU_220)
;;;5752   		if(load_U>u_necc)
;;;5753   			{
;;;5754   			cntrl_hndl_plazma=13;
;;;5755   			if(((load_U-u_necc)>40)&&(cntrl_stat>0))cntrl_stat-=5;
;;;5756   			else if((cntrl_stat)&&b1Hz_ch)cntrl_stat--;
;;;5757   			}
;;;5758   		else if(load_U<u_necc)
;;;5759   			{
;;;5760   			cntrl_hndl_plazma=14;	
;;;5761   			if(((u_necc-load_U)>40)&&(cntrl_stat<1015))cntrl_stat+=5;
;;;5762   			else	if((cntrl_stat<1020)&&b1Hz_ch)cntrl_stat++;
;;;5763   			}
;;;5764   		#elif defined(UKU_220_V2)
;;;5765   		if(load_U>u_necc)
;;;5766   			{
;;;5767   			cntrl_hndl_plazma=15;
;;;5768   			if(((load_U-u_necc)>40)&&(cntrl_stat>0))cntrl_stat-=5;
;;;5769   			else if((cntrl_stat)&&b1Hz_ch)cntrl_stat--;
;;;5770   			}
;;;5771   		else if(load_U<u_necc)
;;;5772   			{
;;;5773   			cntrl_hndl_plazma=16;	
;;;5774   			if(((u_necc-load_U)>40)&&(cntrl_stat<1015))cntrl_stat+=5;
;;;5775   			else	if((cntrl_stat<1020)&&b1Hz_ch)cntrl_stat++;
;;;5776   			}
;;;5777   		#else
;;;5778   
;;;5779   		if(load_U>u_necc)
;;;5780   			{
;;;5781   			cntrl_hndl_plazma=17;
;;;5782   			if(((load_U-u_necc)>10)&&(cntrl_stat>0))cntrl_stat-=5;
;;;5783   			else if((cntrl_stat)&&b1Hz_ch)cntrl_stat--;
;;;5784   			}
;;;5785   		else if(load_U<u_necc)
;;;5786   			{
;;;5787   			cntrl_hndl_plazma=18;	
;;;5788   			if(((u_necc-load_U)>10)&&(cntrl_stat<1015))cntrl_stat+=5;
;;;5789   			else	if((cntrl_stat<1020)&&b1Hz_ch)cntrl_stat++;
;;;5790   			}
;;;5791   		#endif	
;;;5792   	 	}
;;;5793   	}
;;;5794   
;;;5795   #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;5796   else if((b1Hz_ch)&&((!bIBAT_SMKLBR)||(bps[8]._cnt>40)))
00342c  4f76              LDR      r7,|L1.13832|
;;;5797   	{
;;;5798   	cntrl_stat_new=cntrl_stat_old;
;;;5799   	cntrl_hndl_plazma=19;
;;;5800   	if((Ibmax/10)>(2*IZMAX_))
;;;5801   		{
;;;5802   		cntrl_hndl_plazma=20;
;;;5803             if(cntrl_stat_blok_cnt)cntrl_stat_new--;
;;;5804   		else	cntrl_stat_new-=10;
;;;5805   		}		
;;;5806   	else if(((Ibmax/10)<(IZMAX_*2))&&(Ibmax>(IZMAX_*15)))
;;;5807   		{
;;;5808   		cntrl_hndl_plazma=21;
;;;5809             if(cntrl_stat_blok_cnt)cntrl_stat_new--;
;;;5810             else	cntrl_stat_new-=3;
;;;5811   		}   
;;;5812   	else if((Ibmax<(IZMAX_*15))&&((Ibmax/10)>IZMAX_))
;;;5813   		{
;;;5814   		cntrl_hndl_plazma=22;
;;;5815   		cntrl_stat_new--;
;;;5816   		}
;;;5817   		
;;;5818   	else if(bps_U<u_necc)
;;;5819   		{
;;;5820   		cntrl_hndl_plazma=23;
;;;5821   		if(bps_U<(u_necc-(UB0-UB20)))
;;;5822   			{
;;;5823   			cntrl_hndl_plazma=24;
;;;5824   			if(Ibmax<0)
;;;5825   				{
;;;5826   				cntrl_hndl_plazma=25;
;;;5827                       if(cntrl_stat_blok_cnt)cntrl_stat_new++;
;;;5828   				else cntrl_stat_new+=10;
;;;5829   				}
;;;5830   			else if(Ibmax<(IZMAX_*5))
;;;5831   				{
;;;5832   				cntrl_hndl_plazma=26;
;;;5833                       if(cntrl_stat_blok_cnt)cntrl_stat_new++;
;;;5834   				else	cntrl_stat_new+=2;
;;;5835   				}
;;;5836   			else if(Ibmax<((IZMAX_*10)/*-10*/))//(Ibmax<((IZMAX_*95)/10))
;;;5837   				{
;;;5838   				cntrl_hndl_plazma=27;
;;;5839   				cntrl_stat_new++;
;;;5840   				}					
;;;5841   			}
;;;5842   		else if(bps_U<(u_necc-((UB0-UB20)/4)))
;;;5843   			{
;;;5844   			cntrl_hndl_plazma=28;
;;;5845   			if(Ibmax<(IZMAX_*5))
;;;5846   				{
;;;5847   				cntrl_hndl_plazma=29;
;;;5848                       if(cntrl_stat_blok_cnt)cntrl_stat_new++;
;;;5849   				else	cntrl_stat_new+=2;
;;;5850   				}
;;;5851   			else if(Ibmax<((IZMAX_*10)/*-10*/))//(Ibmax<((IZMAX_*95)/10))
;;;5852   				{
;;;5853   				cntrl_hndl_plazma=30;
;;;5854   				cntrl_stat_new++;
;;;5855   				}					
;;;5856   			}	
;;;5857   		else if(bps_U<(u_necc-1))
;;;5858   			{
;;;5859   			cntrl_hndl_plazma=31;
;;;5860   			if(Ibmax<((IZMAX_*10)/*-10*/))//(Ibmax<((IZMAX_*95)/10))
;;;5861   				{
;;;5862   				cntrl_hndl_plazma=32;
;;;5863   				cntrl_stat_new++;
;;;5864   				}					
;;;5865   			}					
;;;5866   		}	
;;;5867   	else if((bps_U>u_necc)/*&&(!cntrl_blok)*/)
;;;5868   		{ 	
;;;5869   		cntrl_hndl_plazma=33;
;;;5870   		if(bps_U>(u_necc+(UB0-UB20)))
;;;5871   			{
;;;5872   			cntrl_hndl_plazma=34;
;;;5873                  if(cntrl_stat_blok_cnt)cntrl_stat_new--;
;;;5874   			else	cntrl_stat_new-=10;
;;;5875   			}
;;;5876   		else if(bps_U>(u_necc+((UB0-UB20)/4)))
;;;5877   			{
;;;5878   			cntrl_hndl_plazma=35;
;;;5879                  if(cntrl_stat_blok_cnt)cntrl_stat_new--;
;;;5880   			else cntrl_stat_new-=2;
;;;5881   			}	
;;;5882   		else if(bps_U>(u_necc+1))
;;;5883   			{
;;;5884   			cntrl_hndl_plazma=36;
;;;5885   			cntrl_stat_new--;
;;;5886   			}					
;;;5887   		}
;;;5888   
;;;5889   	gran(&cntrl_stat_new,10,1010);			
00342e  f2403bf2          MOV      r11,#0x3f2
003432  b380              CBZ      r0,|L1.13462|
003434  4963              LDR      r1,|L1.13764|
003436  6808              LDR      r0,[r1,#0]            ;5716  ; mess_data
003438  2864              CMP      r0,#0x64              ;5716
00343a  d009              BEQ      |L1.13392|
00343c  2869              CMP      r0,#0x69              ;5720
00343e  d00c              BEQ      |L1.13402|
003440  4b72              LDR      r3,|L1.13836|
003442  286e              CMP      r0,#0x6e              ;5724
003444  d00f              BEQ      |L1.13414|
003446  28e5              CMP      r0,#0xe5              ;5731
003448  d022              BEQ      |L1.13456|
00344a  28e6              CMP      r0,#0xe6              ;5736
00344c  d024              BEQ      |L1.13464|
                  |L1.13390|
00344e  e1b2              B        |L1.14262|
                  |L1.13392|
003450  6848              LDR      r0,[r1,#4]            ;5718  ; mess_data
003452  8c61              LDRH     r1,[r4,#0x22]         ;5718  ; cntrl_stat_old
003454  4408              ADD      r0,r0,r1              ;5718
003456  8420              STRH     r0,[r4,#0x20]         ;5718
003458  e1ad              B        |L1.14262|
                  |L1.13402|
00345a  6848              LDR      r0,[r1,#4]            ;5722  ; mess_data
00345c  8c61              LDRH     r1,[r4,#0x22]         ;5722  ; cntrl_stat_old
00345e  eba10000          SUB      r0,r1,r0              ;5722
003462  8420              STRH     r0,[r4,#0x20]         ;5722
003464  e1a7              B        |L1.14262|
                  |L1.13414|
003466  8c20              LDRH     r0,[r4,#0x20]         ;5726  ; cntrl_stat
003468  f1a00001          SUB      r0,r0,#1              ;5726
00346c  b200              SXTH     r0,r0                 ;5726
00346e  8420              STRH     r0,[r4,#0x20]         ;5726
003470  281e              CMP      r0,#0x1e              ;5728
003472  dd06              BLE      |L1.13442|
003474  4947              LDR      r1,|L1.13716|
003476  f9b30000          LDRSH    r0,[r3,#0]            ;5728  ; load_U
00347a  f9b11000          LDRSH    r1,[r1,#0]            ;5728  ; USIGN
00347e  4288              CMP      r0,r1                 ;5728
003480  dae5              BGE      |L1.13390|
                  |L1.13442|
003482  230a              MOVS     r3,#0xa               ;5728
003484  2200              MOVS     r2,#0                 ;5728
003486  21e7              MOVS     r1,#0xe7              ;5728
003488  20e6              MOVS     r0,#0xe6              ;5728
00348a  f7fffffe          BL       mess_send
00348e  e192              B        |L1.14262|
                  |L1.13456|
003490  6848              LDR      r0,[r1,#4]            ;5733  ; mess_data
003492  8420              STRH     r0,[r4,#0x20]         ;5733
003494  e18f              B        |L1.14262|
                  |L1.13462|
003496  e042              B        |L1.13598|
                  |L1.13464|
003498  f9b31000          LDRSH    r1,[r3,#0]            ;5739  ; load_U
00349c  f9b90000          LDRSH    r0,[r9,#0]            ;5739  ; u_necc
0034a0  4281              CMP      r1,r0                 ;5739
0034a2  dd1b              BLE      |L1.13532|
0034a4  f04f010b          MOV      r1,#0xb               ;5741
0034a8  77a1              STRB     r1,[r4,#0x1e]         ;5741
0034aa  f9b21000          LDRSH    r1,[r2,#0]            ;5742  ; bps_U
0034ae  eba10000          SUB      r0,r1,r0              ;5742
0034b2  2828              CMP      r0,#0x28              ;5742
0034b4  dd07              BLE      |L1.13510|
0034b6  f9b40020          LDRSH    r0,[r4,#0x20]         ;5742  ; cntrl_stat
0034ba  2800              CMP      r0,#0                 ;5742
0034bc  dd03              BLE      |L1.13510|
0034be  f1a00005          SUB      r0,r0,#5              ;5742
0034c2  8420              STRH     r0,[r4,#0x20]         ;5742
0034c4  e177              B        |L1.14262|
                  |L1.13510|
0034c6  f9b40020          LDRSH    r0,[r4,#0x20]         ;5743  ; cntrl_stat
0034ca  2800              CMP      r0,#0                 ;5743
0034cc  d0bf              BEQ      |L1.13390|
0034ce  79e1              LDRB     r1,[r4,#7]            ;5743  ; b1Hz_ch
0034d0  2900              CMP      r1,#0                 ;5743
0034d2  d0bc              BEQ      |L1.13390|
0034d4  f1a00001          SUB      r0,r0,#1              ;5743
0034d8  8420              STRH     r0,[r4,#0x20]         ;5743
0034da  e16c              B        |L1.14262|
                  |L1.13532|
0034dc  f9b21000          LDRSH    r1,[r2,#0]            ;5745  ; bps_U
0034e0  4281              CMP      r1,r0                 ;5745
0034e2  dab4              BGE      |L1.13390|
0034e4  f04f020c          MOV      r2,#0xc               ;5747
0034e8  77a2              STRB     r2,[r4,#0x1e]         ;5747
0034ea  eba00001          SUB      r0,r0,r1              ;5748
0034ee  2828              CMP      r0,#0x28              ;5748
0034f0  dd09              BLE      |L1.13574|
0034f2  f9b40020          LDRSH    r0,[r4,#0x20]         ;5748  ; cntrl_stat
0034f6  f24031f7          MOV      r1,#0x3f7             ;5748
0034fa  4288              CMP      r0,r1                 ;5748
0034fc  da03              BGE      |L1.13574|
0034fe  f1000005          ADD      r0,r0,#5              ;5748
003502  8420              STRH     r0,[r4,#0x20]         ;5748
003504  e157              B        |L1.14262|
                  |L1.13574|
003506  f9b40020          LDRSH    r0,[r4,#0x20]         ;5749  ; cntrl_stat
00350a  f5b07f7f          CMP      r0,#0x3fc             ;5749
00350e  da05              BGE      |L1.13596|
003510  79e1              LDRB     r1,[r4,#7]            ;5749  ; b1Hz_ch
003512  2900              CMP      r1,#0                 ;5749
003514  d002              BEQ      |L1.13596|
003516  f1000001          ADD      r0,r0,#1              ;5749
00351a  8420              STRH     r0,[r4,#0x20]         ;5749
                  |L1.13596|
00351c  e14b              B        |L1.14262|
                  |L1.13598|
00351e  79e0              LDRB     r0,[r4,#7]            ;5796  ; b1Hz_ch
003520  2800              CMP      r0,#0                 ;5796
003522  d077              BEQ      |L1.13844|
003524  483a              LDR      r0,|L1.13840|
003526  8800              LDRH     r0,[r0,#0]            ;5796  ; bIBAT_SMKLBR
003528  b118              CBZ      r0,|L1.13618|
00352a  f89702e3          LDRB     r0,[r7,#0x2e3]        ;5796  ; bps
00352e  2828              CMP      r0,#0x28              ;5796
003530  d970              BLS      |L1.13844|
                  |L1.13618|
003532  f9b40022          LDRSH    r0,[r4,#0x22]         ;5798  ; cntrl_stat_old
003536  86e0              STRH     r0,[r4,#0x36]         ;5798
003538  f04f0113          MOV      r1,#0x13              ;5799
00353c  77a1              STRB     r1,[r4,#0x1e]         ;5799
00353e  f9b41038          LDRSH    r1,[r4,#0x38]         ;5800  ; Ibmax
003542  8f63              LDRH     r3,[r4,#0x3a]         ;5800  ; IZMAX_
003544  fb91fcf8          SDIV     r12,r1,r8             ;5800
003548  ebbc0f43          CMP      r12,r3,LSL #1         ;5800
00354c  dd0d              BLE      |L1.13674|
00354e  f04f0114          MOV      r1,#0x14              ;5802
003552  77a1              STRB     r1,[r4,#0x1e]         ;5802
003554  f8b41062          LDRH     r1,[r4,#0x62]         ;5803  ; cntrl_stat_blok_cnt
003558  b119              CBZ      r1,|L1.13666|
00355a  f1a00001          SUB      r0,r0,#1              ;5803
00355e  86e0              STRH     r0,[r4,#0x36]         ;5803
003560  e121              B        |L1.14246|
                  |L1.13666|
003562  f1a0000a          SUB      r0,r0,#0xa            ;5804
003566  86e0              STRH     r0,[r4,#0x36]         ;5804
003568  e11d              B        |L1.14246|
                  |L1.13674|
00356a  da54              BGE      |L1.13846|
00356c  ebc31803          RSB      r8,r3,r3,LSL #4       ;5806
003570  4588              CMP      r8,r1                 ;5806
003572  da50              BGE      |L1.13846|
003574  f04f0115          MOV      r1,#0x15              ;5808
003578  77a1              STRB     r1,[r4,#0x1e]         ;5808
00357a  f8b41062          LDRH     r1,[r4,#0x62]         ;5809  ; cntrl_stat_blok_cnt
00357e  b119              CBZ      r1,|L1.13704|
003580  f1a00001          SUB      r0,r0,#1              ;5809
003584  86e0              STRH     r0,[r4,#0x36]         ;5809
003586  e10e              B        |L1.14246|
                  |L1.13704|
003588  f1a00003          SUB      r0,r0,#3              ;5810
00358c  86e0              STRH     r0,[r4,#0x36]         ;5810
00358e  e10a              B        |L1.14246|
                  |L1.13712|
                          DCD      IKB
                  |L1.13716|
                          DCD      USIGN
                  |L1.13720|
                          DCD      TERMOKOMPENS
                  |L1.13724|
                          DCD      UB20
                  |L1.13728|
                          DCD      u_necc
                  |L1.13732|
                          DCD      ND_EXT
                  |L1.13736|
                          DCD      t_ext
                  |L1.13740|
                          DCD      mat_temper
                  |L1.13744|
                          DCD      UB0
                  |L1.13748|
                          DCD      ||area_number.21||
                  |L1.13752|
                          DCD      UVZ
                  |L1.13756|
                          DCD      speedChIsOn
                  |L1.13760|
                          DCD      speedChrgVolt
                  |L1.13764|
                          DCD      mess_data
                  |L1.13768|
                          DCD      ICA_EN
                  |L1.13772|
                          DCD      ica_u_necc
                  |L1.13776|
                          DCD      u_necc_dn
                  |L1.13780|
                          DCD      u_necc_up
                  |L1.13784|
                          DCD      Isumm
                  |L1.13788|
                          DCD      Isumm_
                  |L1.13792|
                          DCD      bat
                  |L1.13796|
                          DCD      IMAX
                  |L1.13800|
                          DCD      IMIN
                  |L1.13804|
                          DCD      num_necc
                  |L1.13808|
                          DCD      PAR
                  |L1.13812|
                          DCD      NUMIST
                  |L1.13816|
                          DCD      IZMAX
                  |L1.13820|
                          DCD      speedChrgCurr
                  |L1.13824|
                          DCD      REG_SPEED
                  |L1.13828|
                          DCD      bps_U
                  |L1.13832|
                          DCD      bps
                  |L1.13836|
                          DCD      load_U
                  |L1.13840|
                          DCD      bIBAT_SMKLBR
                  |L1.13844|
003614  e0cf              B        |L1.14262|
                  |L1.13846|
003616  ebc31803          RSB      r8,r3,r3,LSL #4       ;5812
00361a  4588              CMP      r8,r1                 ;5812
00361c  dd08              BLE      |L1.13872|
00361e  459c              CMP      r12,r3                ;5812
003620  dd06              BLE      |L1.13872|
003622  f04f0116          MOV      r1,#0x16              ;5814
003626  77a1              STRB     r1,[r4,#0x1e]         ;5814
003628  f1a00001          SUB      r0,r0,#1              ;5815
00362c  86e0              STRH     r0,[r4,#0x36]         ;5815
00362e  e0ba              B        |L1.14246|
                  |L1.13872|
003630  f9b2c000          LDRSH    r12,[r2,#0]           ;5818  ; bps_U
003634  f9b92000          LDRSH    r2,[r9,#0]            ;5818  ; u_necc
003638  f8df9564          LDR      r9,|L1.15264|
00363c  f8dfa564          LDR      r10,|L1.15268|
003640  4594              CMP      r12,r2                ;5818
003642  da76              BGE      |L1.14130|
003644  f04f0817          MOV      r8,#0x17              ;5820
003648  f884801e          STRB     r8,[r4,#0x1e]         ;5820
00364c  f9b98000          LDRSH    r8,[r9,#0]            ;5821  ; UB0
003650  f9ba9000          LDRSH    r9,[r10,#0]           ;5821  ; UB20
003654  eba80809          SUB      r8,r8,r9              ;5821
003658  eba20908          SUB      r9,r2,r8              ;5821
00365c  45e1              CMP      r9,r12                ;5821
00365e  dd2e              BLE      |L1.14014|
003660  f04f0218          MOV      r2,#0x18              ;5823
003664  77a2              STRB     r2,[r4,#0x1e]         ;5823
003666  2900              CMP      r1,#0                 ;5824
003668  da0d              BGE      |L1.13958|
00366a  f04f0119          MOV      r1,#0x19              ;5826
00366e  77a1              STRB     r1,[r4,#0x1e]         ;5826
003670  f8b41062          LDRH     r1,[r4,#0x62]         ;5827  ; cntrl_stat_blok_cnt
003674  b119              CBZ      r1,|L1.13950|
003676  f1000001          ADD      r0,r0,#1              ;5827
00367a  86e0              STRH     r0,[r4,#0x36]         ;5827
00367c  e093              B        |L1.14246|
                  |L1.13950|
00367e  f100000a          ADD      r0,r0,#0xa            ;5828
003682  86e0              STRH     r0,[r4,#0x36]         ;5828
003684  e08f              B        |L1.14246|
                  |L1.13958|
003686  eb030283          ADD      r2,r3,r3,LSL #2       ;5830
00368a  428a              CMP      r2,r1                 ;5830
00368c  dd0d              BLE      |L1.13994|
00368e  f04f011a          MOV      r1,#0x1a              ;5832
003692  77a1              STRB     r1,[r4,#0x1e]         ;5832
003694  f8b41062          LDRH     r1,[r4,#0x62]         ;5833  ; cntrl_stat_blok_cnt
003698  b119              CBZ      r1,|L1.13986|
00369a  f1000001          ADD      r0,r0,#1              ;5833
00369e  86e0              STRH     r0,[r4,#0x36]         ;5833
0036a0  e081              B        |L1.14246|
                  |L1.13986|
0036a2  f1000002          ADD      r0,r0,#2              ;5834
0036a6  86e0              STRH     r0,[r4,#0x36]         ;5834
0036a8  e07d              B        |L1.14246|
                  |L1.13994|
0036aa  ebb10f42          CMP      r1,r2,LSL #1          ;5836
0036ae  da7a              BGE      |L1.14246|
0036b0  f04f011b          MOV      r1,#0x1b              ;5838
0036b4  77a1              STRB     r1,[r4,#0x1e]         ;5838
0036b6  f1000001          ADD      r0,r0,#1              ;5839
0036ba  86e0              STRH     r0,[r4,#0x36]         ;5839
0036bc  e073              B        |L1.14246|
                  |L1.14014|
0036be  ea4f79e8          ASR      r9,r8,#31             ;5842
0036c2  eb087899          ADD      r8,r8,r9,LSR #30      ;5842
0036c6  eba208a8          SUB      r8,r2,r8,ASR #2       ;5842
0036ca  45e0              CMP      r8,r12                ;5842
0036cc  dd1e              BLE      |L1.14092|
0036ce  f04f021c          MOV      r2,#0x1c              ;5844
0036d2  77a2              STRB     r2,[r4,#0x1e]         ;5844
0036d4  eb030283          ADD      r2,r3,r3,LSL #2       ;5845
0036d8  428a              CMP      r2,r1                 ;5845
0036da  dd0d              BLE      |L1.14072|
0036dc  f04f011d          MOV      r1,#0x1d              ;5847
0036e0  77a1              STRB     r1,[r4,#0x1e]         ;5847
0036e2  f8b41062          LDRH     r1,[r4,#0x62]         ;5848  ; cntrl_stat_blok_cnt
0036e6  b119              CBZ      r1,|L1.14064|
0036e8  f1000001          ADD      r0,r0,#1              ;5848
0036ec  86e0              STRH     r0,[r4,#0x36]         ;5848
0036ee  e05a              B        |L1.14246|
                  |L1.14064|
0036f0  f1000002          ADD      r0,r0,#2              ;5849
0036f4  86e0              STRH     r0,[r4,#0x36]         ;5849
0036f6  e056              B        |L1.14246|
                  |L1.14072|
0036f8  ebb10f42          CMP      r1,r2,LSL #1          ;5851
0036fc  da53              BGE      |L1.14246|
0036fe  f04f011e          MOV      r1,#0x1e              ;5853
003702  77a1              STRB     r1,[r4,#0x1e]         ;5853
003704  f1000001          ADD      r0,r0,#1              ;5854
003708  86e0              STRH     r0,[r4,#0x36]         ;5854
00370a  e04c              B        |L1.14246|
                  |L1.14092|
00370c  1e52              SUBS     r2,r2,#1              ;5857
00370e  4594              CMP      r12,r2                ;5857
003710  da49              BGE      |L1.14246|
003712  f04f021f          MOV      r2,#0x1f              ;5859
003716  77a2              STRB     r2,[r4,#0x1e]         ;5859
003718  eb030283          ADD      r2,r3,r3,LSL #2       ;5860
00371c  ebb10f42          CMP      r1,r2,LSL #1          ;5860
003720  da41              BGE      |L1.14246|
003722  f04f0120          MOV      r1,#0x20              ;5862
003726  77a1              STRB     r1,[r4,#0x1e]         ;5862
003728  f1000001          ADD      r0,r0,#1              ;5863
00372c  86e0              STRH     r0,[r4,#0x36]         ;5863
00372e  e03a              B        |L1.14246|
003730  e7ff              B        |L1.14130|
                  |L1.14130|
003732  dd38              BLE      |L1.14246|
003734  f04f0121          MOV      r1,#0x21              ;5869
003738  77a1              STRB     r1,[r4,#0x1e]         ;5869
00373a  f9b91000          LDRSH    r1,[r9,#0]            ;5870  ; UB0
00373e  f9ba3000          LDRSH    r3,[r10,#0]           ;5870  ; UB20
003742  eba10103          SUB      r1,r1,r3              ;5870
003746  eb010302          ADD      r3,r1,r2              ;5870
00374a  4563              CMP      r3,r12                ;5870
00374c  da0d              BGE      |L1.14186|
00374e  f04f0122          MOV      r1,#0x22              ;5872
003752  77a1              STRB     r1,[r4,#0x1e]         ;5872
003754  f8b41062          LDRH     r1,[r4,#0x62]         ;5873  ; cntrl_stat_blok_cnt
003758  b119              CBZ      r1,|L1.14178|
00375a  f1a00001          SUB      r0,r0,#1              ;5873
00375e  86e0              STRH     r0,[r4,#0x36]         ;5873
003760  e021              B        |L1.14246|
                  |L1.14178|
003762  f1a0000a          SUB      r0,r0,#0xa            ;5874
003766  86e0              STRH     r0,[r4,#0x36]         ;5874
003768  e01d              B        |L1.14246|
                  |L1.14186|
00376a  17cb              ASRS     r3,r1,#31             ;5876
00376c  eb017193          ADD      r1,r1,r3,LSR #30      ;5876
003770  eb0201a1          ADD      r1,r2,r1,ASR #2       ;5876
003774  4561              CMP      r1,r12                ;5876
003776  da0d              BGE      |L1.14228|
003778  f04f0123          MOV      r1,#0x23              ;5878
00377c  77a1              STRB     r1,[r4,#0x1e]         ;5878
00377e  f8b41062          LDRH     r1,[r4,#0x62]         ;5879  ; cntrl_stat_blok_cnt
003782  b119              CBZ      r1,|L1.14220|
003784  f1a00001          SUB      r0,r0,#1              ;5879
003788  86e0              STRH     r0,[r4,#0x36]         ;5879
00378a  e00c              B        |L1.14246|
                  |L1.14220|
00378c  f1a00002          SUB      r0,r0,#2              ;5880
003790  86e0              STRH     r0,[r4,#0x36]         ;5880
003792  e008              B        |L1.14246|
                  |L1.14228|
003794  1c52              ADDS     r2,r2,#1              ;5882
003796  4594              CMP      r12,r2                ;5882
003798  dd05              BLE      |L1.14246|
00379a  f04f0124          MOV      r1,#0x24              ;5884
00379e  77a1              STRB     r1,[r4,#0x1e]         ;5884
0037a0  f1a00001          SUB      r0,r0,#1              ;5885
0037a4  86e0              STRH     r0,[r4,#0x36]         ;5885
                  |L1.14246|
0037a6  465a              MOV      r2,r11
0037a8  210a              MOVS     r1,#0xa
0037aa  48ff              LDR      r0,|L1.15272|
0037ac  f7fffffe          BL       gran
;;;5890   	cntrl_stat_old=cntrl_stat_new;
0037b0  8ee0              LDRH     r0,[r4,#0x36]  ; cntrl_stat_new
0037b2  8460              STRH     r0,[r4,#0x22]
;;;5891   	cntrl_stat=cntrl_stat_new;	
0037b4  8420              STRH     r0,[r4,#0x20]
                  |L1.14262|
;;;5892   	}
;;;5893   #else
;;;5894   else if((b1Hz_ch)&&((!bIBAT_SMKLBR)||(bps[8]._cnt>40)))
;;;5895   	{
;;;5896   	cntrl_hndl_plazma=37;
;;;5897   	cntrl_stat_new=cntrl_stat_old;
;;;5898   	
;;;5899   	if((Ibmax/10)>(2*IZMAX_))
;;;5900   		{
;;;5901   		cntrl_hndl_plazma=38;
;;;5902             if(cntrl_stat_blok_cnt)cntrl_stat_new--;
;;;5903   		else	cntrl_stat_new-=10;
;;;5904   		}		
;;;5905   	else if(((Ibmax/10)<(IZMAX_*2))&&(Ibmax>(IZMAX_*15)))
;;;5906   		{
;;;5907   		cntrl_hndl_plazma=39;
;;;5908             if(cntrl_stat_blok_cnt)cntrl_stat_new--;
;;;5909             else	cntrl_stat_new-=3;
;;;5910   		}   
;;;5911   	else if((Ibmax<(IZMAX_*15))&&((Ibmax/10)>IZMAX_))
;;;5912   		{
;;;5913   		cntrl_hndl_plazma=40;
;;;5914   		cntrl_stat_new--;
;;;5915   		}
;;;5916   		
;;;5917   	else if(load_U<u_necc)
;;;5918   		{
;;;5919   		cntrl_hndl_plazma=41;
;;;5920   		if(load_U<(u_necc-(UB0-UB20)))
;;;5921   			{
;;;5922   			cntrl_hndl_plazma=42;
;;;5923   			if(Ibmax<0)
;;;5924   				{
;;;5925   				cntrl_hndl_plazma=43;
;;;5926                       if(cntrl_stat_blok_cnt)cntrl_stat_new++;
;;;5927   				else cntrl_stat_new+=10;
;;;5928   				}
;;;5929   			else if(Ibmax<(IZMAX_*5))
;;;5930   				{
;;;5931   				cntrl_hndl_plazma=44;
;;;5932                       if(cntrl_stat_blok_cnt)cntrl_stat_new++;
;;;5933   				else	cntrl_stat_new+=2;
;;;5934   				}
;;;5935   			else if(Ibmax<((IZMAX_*95)/10))
;;;5936   				{
;;;5937   				cntrl_hndl_plazma=45;
;;;5938   				cntrl_stat_new++;
;;;5939   				}					
;;;5940   			}
;;;5941   		else if(load_U<(u_necc-((UB0-UB20)/4)))
;;;5942   			{
;;;5943   			cntrl_hndl_plazma=46;
;;;5944   			if(Ibmax<(IZMAX_*5))
;;;5945   				{
;;;5946   				cntrl_hndl_plazma=47;
;;;5947                       if(cntrl_stat_blok_cnt)cntrl_stat_new++;
;;;5948   				else	cntrl_stat_new+=2;
;;;5949   				}
;;;5950   			else if(Ibmax<((IZMAX_*95)/10))
;;;5951   				{
;;;5952   				cntrl_hndl_plazma=48;
;;;5953   				cntrl_stat_new++;
;;;5954   				}					
;;;5955   			}	
;;;5956   		else if(load_U<(u_necc-1))
;;;5957   			{
;;;5958   			cntrl_hndl_plazma=49;
;;;5959   			if(Ibmax<((IZMAX_*95)/10))
;;;5960   				{
;;;5961   				cntrl_hndl_plazma=50;
;;;5962   				cntrl_stat_new++;
;;;5963   				}					
;;;5964   			}					
;;;5965   		}	
;;;5966   	else if((load_U>u_necc)/*&&(!cntrl_blok)*/)
;;;5967   		{
;;;5968   		cntrl_hndl_plazma=51;
;;;5969   		if(load_U>(u_necc+(UB0-UB20)))
;;;5970   			{
;;;5971   			cntrl_hndl_plazma=52;
;;;5972                  if(cntrl_stat_blok_cnt)cntrl_stat_new--;
;;;5973   			else	cntrl_stat_new-=10;
;;;5974   			}
;;;5975   		else if(load_U>(u_necc+((UB0-UB20)/4)))
;;;5976   			{
;;;5977   			cntrl_hndl_plazma=53;
;;;5978                  if(cntrl_stat_blok_cnt)cntrl_stat_new--;
;;;5979   			else cntrl_stat_new-=2;
;;;5980   			}	
;;;5981   		else if(load_U>(u_necc+1))
;;;5982   			{
;;;5983   			cntrl_hndl_plazma=54;
;;;5984   			cntrl_stat_new--;
;;;5985   			}					
;;;5986   		}
;;;5987   
;;;5988   	gran(&cntrl_stat_new,10,1010);			
;;;5989   	cntrl_stat_old=cntrl_stat_new;
;;;5990   	cntrl_stat=cntrl_stat_new;	
;;;5991   	}
;;;5992   #endif
;;;5993   
;;;5994   iiii=0;
0037b6  7266              STRB     r6,[r4,#9]
;;;5995   for(i=0;i<NUMIST;i++)
0037b8  7226              STRB     r6,[r4,#8]
0037ba  48fc              LDR      r0,|L1.15276|
0037bc  f9b01000          LDRSH    r1,[r0,#0]
0037c0  e00c              B        |L1.14300|
                  |L1.14274|
;;;5996        {
;;;5997        if(bps[i]._cnt<30)iiii=1;
0037c2  ebc002c0          RSB      r2,r0,r0,LSL #3
0037c6  eb021200          ADD      r2,r2,r0,LSL #4
0037ca  eb070282          ADD      r2,r7,r2,LSL #2
0037ce  78d2              LDRB     r2,[r2,#3]
0037d0  2a1e              CMP      r2,#0x1e
0037d2  d200              BCS      |L1.14294|
0037d4  7265              STRB     r5,[r4,#9]
                  |L1.14294|
0037d6  f1000001          ADD      r0,r0,#1              ;5995
0037da  7220              STRB     r0,[r4,#8]            ;5995
                  |L1.14300|
0037dc  7a20              LDRB     r0,[r4,#8]            ;5995  ; i
0037de  4288              CMP      r0,r1                 ;5995
0037e0  dbef              BLT      |L1.14274|
;;;5998        }
;;;5999   
;;;6000   if(iiii==0)
0037e2  7a60              LDRB     r0,[r4,#9]  ; iiii
0037e4  b920              CBNZ     r0,|L1.14320|
;;;6001        {
;;;6002        cntrl_stat=600;	
0037e6  f44f7016          MOV      r0,#0x258
0037ea  8420              STRH     r0,[r4,#0x20]
;;;6003        cntrl_stat_old=600;
0037ec  8460              STRH     r0,[r4,#0x22]
;;;6004        cntrl_stat_new=600;
0037ee  86e0              STRH     r0,[r4,#0x36]
                  |L1.14320|
;;;6005   	#ifdef UKU_TELECORE2015
;;;6006   	//cntrl_stat=0;
;;;6007   	//cntrl_stat_old=0;
;;;6008   	//cntrl_stat_new=0;
;;;6009   	#endif
;;;6010        }
;;;6011   gran(&cntrl_stat,10,1010); 
0037f0  48ed              LDR      r0,|L1.15272|
0037f2  465a              MOV      r2,r11
0037f4  210a              MOVS     r1,#0xa
0037f6  3816              SUBS     r0,r0,#0x16
0037f8  f7fffffe          BL       gran
;;;6012   b1Hz_ch=0;
0037fc  71e6              STRB     r6,[r4,#7]
                  |L1.14334|
;;;6013   }
0037fe  e8bd9ff0          POP      {r4-r12,pc}
;;;6014   #endif
                          ENDP

                  ext_drv PROC
;;;6259   //-----------------------------------------------
;;;6260   void ext_drv(void)
003802  e92d5ff0          PUSH     {r4-r12,lr}
;;;6261   {
;;;6262   char i;
;;;6263   
;;;6264   
;;;6265   for(i=0;i<NUMSK;i++)
003806  f04f0000          MOV      r0,#0
00380a  4aeb              LDR      r2,|L1.15288|
;;;6266   	{
;;;6267   	#ifdef UKU_MGTS
;;;6268   	if(adc_buff_[sk_buff_RSTKM[i]]<2000)
;;;6269   	#endif
;;;6270   	#ifdef UKU_RSTKM
;;;6271   	if(adc_buff_[sk_buff_RSTKM[i]]<2000)
;;;6272   	#endif
;;;6273   	#ifdef UKU_3U
;;;6274   	if(adc_buff_[sk_buff_3U[i]]<2000)
;;;6275   	#endif
;;;6276   	#ifdef UKU_GLONASS
;;;6277   	if(adc_buff_[sk_buff_GLONASS[i]]<2000)
;;;6278   	#endif
;;;6279   	#ifdef UKU_KONTUR
;;;6280   	if(adc_buff_[sk_buff_KONTUR[i]]<2000)
;;;6281   	#endif
;;;6282   	#ifdef UKU_6U
;;;6283   	if(adc_buff_[sk_buff_6U[i]]<2000)
;;;6284   	#endif
;;;6285   	#ifdef UKU_220
;;;6286   	if(adc_buff_[sk_buff_220[i]]<2000)
;;;6287   	#endif
;;;6288   	#ifdef UKU_220_V2
;;;6289   	if(adc_buff_[sk_buff_220[i]]<2000)
;;;6290   	#endif
;;;6291   	#ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;6292   	if(adc_buff_[sk_buff_220[i]]<2000)
;;;6293   	#endif
;;;6294   	#ifdef UKU_TELECORE2015
;;;6295   	if(adc_buff_[sk_buff_TELECORE2015[i]]<2000)	 //TODO
;;;6296   	#endif
;;;6297   
;;;6298   		{
;;;6299   		if(sk_cnt[i]<10)
00380c  4be8              LDR      r3,|L1.15280|
;;;6300   			{
;;;6301   			sk_cnt[i]++;
;;;6302   			if(sk_cnt[i]>=10)
;;;6303   				{
;;;6304   				sk_stat[i]=ssON;
00380e  4de9              LDR      r5,|L1.15284|
003810  f04f0a01          MOV      r10,#1
;;;6305   				}
;;;6306   			}
;;;6307   		else 
;;;6308   			{
;;;6309   			sk_cnt[i]=10;
003814  f04f0b0a          MOV      r11,#0xa
003818  4606              MOV      r6,r0                 ;6265
00381a  f9b24000          LDRSH    r4,[r2,#0]            ;6265
00381e  e025              B        |L1.14444|
                  |L1.14368|
003820  49e6              LDR      r1,|L1.15292|
003822  4fe7              LDR      r7,|L1.15296|
003824  5c09              LDRB     r1,[r1,r0]            ;6292
003826  f9371011          LDRSH    r1,[r7,r1,LSL #1]     ;6292
00382a  f5b16ffa          CMP      r1,#0x7d0             ;6292
00382e  da0e              BGE      |L1.14414|
003830  5619              LDRSB    r1,[r3,r0]            ;6299
003832  290a              CMP      r1,#0xa               ;6299
003834  da08              BGE      |L1.14408|
003836  f1010101          ADD      r1,r1,#1              ;6301
00383a  b249              SXTB     r1,r1                 ;6301
00383c  5419              STRB     r1,[r3,r0]            ;6301
00383e  290a              CMP      r1,#0xa               ;6302
003840  db11              BLT      |L1.14438|
003842  f805a000          STRB     r10,[r5,r0]           ;6304
003846  e00e              B        |L1.14438|
                  |L1.14408|
003848  f803b000          STRB     r11,[r3,r0]
00384c  e00b              B        |L1.14438|
                  |L1.14414|
;;;6310   			}
;;;6311                  
;;;6312   		}
;;;6313   	else
;;;6314   		{
;;;6315   		if(sk_cnt[i]>0)
00384e  5619              LDRSB    r1,[r3,r0]
003850  2900              CMP      r1,#0
003852  dd07              BLE      |L1.14436|
;;;6316   			{
;;;6317   			sk_cnt[i]--;
003854  f1a10101          SUB      r1,r1,#1
003858  b249              SXTB     r1,r1
00385a  5419              STRB     r1,[r3,r0]
;;;6318   			if(sk_cnt[i]<=0)
00385c  2900              CMP      r1,#0
00385e  dc02              BGT      |L1.14438|
;;;6319   				{
;;;6320   				sk_stat[i]=ssOFF;
003860  542e              STRB     r6,[r5,r0]
003862  e000              B        |L1.14438|
                  |L1.14436|
;;;6321   				}
;;;6322   			}
;;;6323   		else 
;;;6324   			{
;;;6325   			sk_cnt[i]=0;
003864  541e              STRB     r6,[r3,r0]
                  |L1.14438|
003866  f1000001          ADD      r0,r0,#1              ;6265
00386a  b2c0              UXTB     r0,r0                 ;6265
                  |L1.14444|
00386c  42a0              CMP      r0,r4                 ;6265
00386e  dbd7              BLT      |L1.14368|
;;;6326   			}
;;;6327   		}
;;;6328   	}
;;;6329   
;;;6330   for(i=0;i<NUMSK;i++)
003870  f04f0400          MOV      r4,#0
;;;6331   	{
;;;6332   	if(((SK_SIGN[i]==0)&&(sk_stat[i]==ssON))||((SK_SIGN[i])&&(sk_stat[i]==ssOFF)) )
;;;6333   		{
;;;6334   		if(sk_av_cnt[i]<10)
003874  f8df934c          LDR      r9,|L1.15300|
;;;6335   			{
;;;6336   			sk_av_cnt[i]++;
;;;6337   			if(sk_av_cnt[i]>=10)
;;;6338   				{
;;;6339   				sk_av_stat[i]=sasON;
003878  4fd3              LDR      r7,|L1.15304|
;;;6340   				}
;;;6341   			}
;;;6342   		else 
;;;6343   			{
;;;6344   			sk_av_cnt[i]=10;
;;;6345   			}
;;;6346   		}
;;;6347   	else
;;;6348   		{
;;;6349   		if(sk_av_cnt[i]>=0)
;;;6350   			{
;;;6351   			sk_av_cnt[i]--;
;;;6352   			if(sk_av_cnt[i]<=0)
;;;6353   				{
;;;6354   				sk_av_stat[i]=sasOFF;
;;;6355   				}
;;;6356   			}
;;;6357   		else 
;;;6358   			{
;;;6359   			sk_av_cnt[i]=0;
;;;6360   			}
;;;6361   		}
;;;6362   
;;;6363   #ifndef UKU_KONTUR
;;;6364   	if(sk_av_stat_old[i]!=sk_av_stat[i])
00387a  f8df8350          LDR      r8,|L1.15308|
00387e  e083              B        |L1.14728|
                  |L1.14464|
003880  48d3              LDR      r0,|L1.15312|
003882  f9300014          LDRSH    r0,[r0,r4,LSL #1]     ;6332
003886  b910              CBNZ     r0,|L1.14478|
003888  5d29              LDRB     r1,[r5,r4]            ;6332
00388a  2901              CMP      r1,#1                 ;6332
00388c  d00f              BEQ      |L1.14510|
                  |L1.14478|
00388e  b108              CBZ      r0,|L1.14484|
003890  5d28              LDRB     r0,[r5,r4]            ;6332
003892  b160              CBZ      r0,|L1.14510|
                  |L1.14484|
003894  f9190004          LDRSB    r0,[r9,r4]            ;6349
003898  2800              CMP      r0,#0                 ;6349
00389a  db19              BLT      |L1.14544|
00389c  f1a00001          SUB      r0,r0,#1              ;6351
0038a0  b240              SXTB     r0,r0                 ;6351
0038a2  f8090004          STRB     r0,[r9,r4]            ;6351
0038a6  2800              CMP      r0,#0                 ;6352
0038a8  dc14              BGT      |L1.14548|
0038aa  553e              STRB     r6,[r7,r4]            ;6354
0038ac  e012              B        |L1.14548|
                  |L1.14510|
0038ae  f9190004          LDRSB    r0,[r9,r4]            ;6334
0038b2  280a              CMP      r0,#0xa               ;6334
0038b4  da09              BGE      |L1.14538|
0038b6  f1000001          ADD      r0,r0,#1              ;6336
0038ba  b240              SXTB     r0,r0                 ;6336
0038bc  f8090004          STRB     r0,[r9,r4]            ;6336
0038c0  280a              CMP      r0,#0xa               ;6337
0038c2  db07              BLT      |L1.14548|
0038c4  f807a004          STRB     r10,[r7,r4]           ;6339
0038c8  e004              B        |L1.14548|
                  |L1.14538|
0038ca  f809b004          STRB     r11,[r9,r4]           ;6344
0038ce  e001              B        |L1.14548|
                  |L1.14544|
0038d0  f8096004          STRB     r6,[r9,r4]            ;6359
                  |L1.14548|
0038d4  f8181004          LDRB     r1,[r8,r4]
0038d8  5d38              LDRB     r0,[r7,r4]
0038da  4281              CMP      r1,r0
0038dc  d04e              BEQ      |L1.14716|
;;;6365   		{
;;;6366   		plazma_sk++;
0038de  4ab2              LDR      r2,|L1.15272|
0038e0  3a36              SUBS     r2,r2,#0x36
0038e2  8e91              LDRH     r1,[r2,#0x34]  ; plazma_sk
0038e4  f1010101          ADD      r1,r1,#1
0038e8  8691              STRH     r1,[r2,#0x34]
;;;6367   		if(sk_av_stat[i]==sasON)
0038ea  2801              CMP      r0,#1
0038ec  d007              BEQ      |L1.14590|
;;;6368   			{
;;;6369   			if(i==0)snmp_trap_send("SK #1 Alarm",15,1,1);
;;;6370   			else if(i==1)snmp_trap_send("SK #2 Alarm",15,2,1);
;;;6371   			else if(i==2)snmp_trap_send("SK #3 Alarm",15,3,1);
;;;6372   			else if(i==3)snmp_trap_send("SK #4 Alarm",15,4,1);
;;;6373   			}
;;;6374   		else 
;;;6375   			{
;;;6376   			if(i==0)snmp_trap_send("SK #1 Alarm is off",15,1,0);
0038ee  b354              CBZ      r4,|L1.14662|
;;;6377   			else if(i==1)snmp_trap_send("SK #2 Alarm is off",15,2,0);
0038f0  2c01              CMP      r4,#1
0038f2  d02f              BEQ      |L1.14676|
;;;6378   			else if(i==2)snmp_trap_send("SK #3 Alarm is off",15,3,0);
0038f4  2c02              CMP      r4,#2
0038f6  d034              BEQ      |L1.14690|
;;;6379   			else if(i==3)snmp_trap_send("SK #4 Alarm is off",15,4,0);
0038f8  2c03              CMP      r4,#3
0038fa  d039              BEQ      |L1.14704|
0038fc  e03e              B        |L1.14716|
                  |L1.14590|
0038fe  b134              CBZ      r4,|L1.14606|
003900  2c01              CMP      r4,#1                 ;6370
003902  d00b              BEQ      |L1.14620|
003904  2c02              CMP      r4,#2                 ;6371
003906  d010              BEQ      |L1.14634|
003908  2c03              CMP      r4,#3                 ;6372
00390a  d015              BEQ      |L1.14648|
00390c  e036              B        |L1.14716|
                  |L1.14606|
00390e  2301              MOVS     r3,#1                 ;6369
003910  461a              MOV      r2,r3                 ;6369
003912  210f              MOVS     r1,#0xf               ;6369
003914  a0af              ADR      r0,|L1.15316|
003916  f7fffffe          BL       snmp_trap_send
00391a  e02f              B        |L1.14716|
                  |L1.14620|
00391c  2301              MOVS     r3,#1                 ;6370
00391e  2202              MOVS     r2,#2                 ;6370
003920  210f              MOVS     r1,#0xf               ;6370
003922  a0af              ADR      r0,|L1.15328|
003924  f7fffffe          BL       snmp_trap_send
003928  e028              B        |L1.14716|
                  |L1.14634|
00392a  2301              MOVS     r3,#1                 ;6371
00392c  2203              MOVS     r2,#3                 ;6371
00392e  210f              MOVS     r1,#0xf               ;6371
003930  a0ae              ADR      r0,|L1.15340|
003932  f7fffffe          BL       snmp_trap_send
003936  e021              B        |L1.14716|
                  |L1.14648|
003938  2301              MOVS     r3,#1                 ;6372
00393a  2204              MOVS     r2,#4                 ;6372
00393c  210f              MOVS     r1,#0xf               ;6372
00393e  a0ae              ADR      r0,|L1.15352|
003940  f7fffffe          BL       snmp_trap_send
003944  e01a              B        |L1.14716|
                  |L1.14662|
003946  2300              MOVS     r3,#0                 ;6376
003948  2201              MOVS     r2,#1                 ;6376
00394a  210f              MOVS     r1,#0xf               ;6376
00394c  a0ad              ADR      r0,|L1.15364|
00394e  f7fffffe          BL       snmp_trap_send
003952  e013              B        |L1.14716|
                  |L1.14676|
003954  2300              MOVS     r3,#0                 ;6377
003956  2202              MOVS     r2,#2                 ;6377
003958  210f              MOVS     r1,#0xf               ;6377
00395a  a0af              ADR      r0,|L1.15384|
00395c  f7fffffe          BL       snmp_trap_send
003960  e00c              B        |L1.14716|
                  |L1.14690|
003962  2300              MOVS     r3,#0                 ;6378
003964  2203              MOVS     r2,#3                 ;6378
003966  210f              MOVS     r1,#0xf               ;6378
003968  a0b0              ADR      r0,|L1.15404|
00396a  f7fffffe          BL       snmp_trap_send
00396e  e005              B        |L1.14716|
                  |L1.14704|
003970  2300              MOVS     r3,#0
003972  2204              MOVS     r2,#4
003974  210f              MOVS     r1,#0xf
003976  a0b2              ADR      r0,|L1.15424|
003978  f7fffffe          BL       snmp_trap_send
                  |L1.14716|
;;;6380   			}
;;;6381   	 	}
;;;6382   #endif
;;;6383   
;;;6384   #ifdef UKU_KONTUR
;;;6385   	if(sk_av_stat_old[i]!=sk_av_stat[i])
;;;6386   		{
;;;6387   		plazma_sk++;
;;;6388   		if(sk_av_stat[i]==sasON)
;;;6389   			{
;;;6390   			if(i==0)snmp_trap_send("Door is opened",15,1,1);
;;;6391   			else if(i==1)snmp_trap_send("Smoke Alarm",15,2,1);
;;;6392   			else if(i==2)snmp_trap_send("Shock Sensor Alarm",15,3,1);
;;;6393   			else if(i==3)snmp_trap_send("SK #4 Alarm",15,4,1);
;;;6394   			}
;;;6395   		else 
;;;6396   			{
;;;6397   			if(i==0)snmp_trap_send("Door is closed",15,1,0);
;;;6398   			else if(i==1)snmp_trap_send("Smoke Alarm is off",15,2,0);
;;;6399   			else if(i==2)snmp_trap_send("Shock Sensor Alarm is off",15,3,0);
;;;6400   			else if(i==3)snmp_trap_send("SK #4 Alarm is off",15,4,0);
;;;6401   			}
;;;6402   	 	}
;;;6403   #endif
;;;6404   	sk_av_stat_old[i]=sk_av_stat[i];
00397c  5d38              LDRB     r0,[r7,r4]
00397e  f8080004          STRB     r0,[r8,r4]
003982  f1040401          ADD      r4,r4,#1              ;6330
003986  b2e4              UXTB     r4,r4                 ;6330
                  |L1.14728|
003988  488b              LDR      r0,|L1.15288|
00398a  f9b00000          LDRSH    r0,[r0,#0]            ;6330  ; NUMSK
00398e  4284              CMP      r4,r0                 ;6330
003990  f6ffaf76          BLT      |L1.14464|
;;;6405   	}
;;;6406   }
003994  e733              B        |L1.14334|
;;;6407   
                          ENDP

                  zar_superviser_start PROC
;;;6444   //-----------------------------------------------
;;;6445   void zar_superviser_start(void)
003996  4aaf              LDR      r2,|L1.15444|
;;;6446   {
;;;6447   sign_U[0]=1;
003998  f04f0001          MOV      r0,#1
00399c  7010              STRB     r0,[r2,#0]
;;;6448   sign_I[0]=1;
00399e  49ae              LDR      r1,|L1.15448|
0039a0  7008              STRB     r0,[r1,#0]
;;;6449   sign_U[1]=1;
0039a2  7050              STRB     r0,[r2,#1]
;;;6450   sign_I[1]=1;
0039a4  7048              STRB     r0,[r1,#1]
;;;6451   
;;;6452   }
0039a6  4770              BX       lr
;;;6453   
                          ENDP

                  zar_superviser_drv PROC
;;;6409   //-----------------------------------------------
;;;6410   void zar_superviser_drv(void)
0039a8  e92d5ff0          PUSH     {r4-r12,lr}
;;;6411   {
;;;6412   
;;;6413   if(((bat[0]._Ub>u_necc_up) || (bat[0]._Ub<u_necc_dn))&&(main_kb_cnt<((TBAT*60)-30))&&(main_kb_cnt>((TBAT*60)-150))) sign_U[0]=0;
0039ac  48ac              LDR      r0,|L1.15456|
0039ae  f8df92b4          LDR      r9,|L1.15460|
0039b2  f8df82a8          LDR      r8,|L1.15452|
0039b6  f9b0c000          LDRSH    r12,[r0,#0]  ; u_necc_up
0039ba  f9b90000          LDRSH    r0,[r9,#0]
0039be  4c7a              LDR      r4,|L1.15272|
0039c0  ebc01100          RSB      r1,r0,r0,LSL #4
0039c4  3c36              SUBS     r4,r4,#0x36
0039c6  f9b87002          LDRSH    r7,[r8,#2]  ; bat
0039ca  f06f0a1d          MVN      r10,#0x1d
0039ce  f06f0b95          MVN      r11,#0x95
0039d2  2500              MOVS     r5,#0
0039d4  4e9f              LDR      r6,|L1.15444|
0039d6  f9b40040          LDRSH    r0,[r4,#0x40]
0039da  eb0a0281          ADD      r2,r10,r1,LSL #2
0039de  eb0b0381          ADD      r3,r11,r1,LSL #2
0039e2  4567              CMP      r7,r12
0039e4  dc05              BGT      |L1.14834|
0039e6  f8dfc280          LDR      r12,|L1.15464|
0039ea  f9bcc000          LDRSH    r12,[r12,#0]  ; u_necc_dn
0039ee  4567              CMP      r7,r12
0039f0  da04              BGE      |L1.14844|
                  |L1.14834|
0039f2  4282              CMP      r2,r0
0039f4  dd02              BLE      |L1.14844|
0039f6  4283              CMP      r3,r0
0039f8  da00              BGE      |L1.14844|
0039fa  7035              STRB     r5,[r6,#0]
                  |L1.14844|
;;;6414   
;;;6415   if(((bat[0]._Ib>(2*IKB)) || (bat[0]._Ib<(-IKB*2))) &&(main_kb_cnt<((TBAT*60)-30))&&(main_kb_cnt>((TBAT*60)-150))) sign_I[0]=0;
0039fc  4f9b              LDR      r7,|L1.15468|
0039fe  f9b8c008          LDRSH    r12,[r8,#8]  ; bat
003a02  f9b7e000          LDRSH    lr,[r7,#0]  ; IKB
003a06  4f94              LDR      r7,|L1.15448|
003a08  ebbc0f4e          CMP      r12,lr,LSL #1
003a0c  dc04              BGT      |L1.14872|
003a0e  f1ce0e00          RSB      lr,lr,#0
003a12  ebbc0f4e          CMP      r12,lr,LSL #1
003a16  da04              BGE      |L1.14882|
                  |L1.14872|
003a18  4282              CMP      r2,r0
003a1a  dd02              BLE      |L1.14882|
003a1c  4283              CMP      r3,r0
003a1e  da00              BGE      |L1.14882|
003a20  703d              STRB     r5,[r7,#0]
                  |L1.14882|
;;;6416   																 
;;;6417   if((main_kb_cnt==((TBAT*60)-10)) &&(spc_stat==spcOFF))
003a22  f06f0209          MVN      r2,#9
003a26  eb020181          ADD      r1,r2,r1,LSL #2
003a2a  4281              CMP      r1,r0
003a2c  d120              BNE      |L1.14960|
003a2e  7ce0              LDRB     r0,[r4,#0x13]  ; spc_stat
003a30  b9f0              CBNZ     r0,|L1.14960|
;;;6418   	{
;;;6419   	if((sign_U[0]==1) && (sign_I[0]==1) && (lc640_read_int(EE_BAT1_ZAR_CNT)!=BAT_C_REAL[0]) && (NUMBAT) && (!(bat[0]._av&1)))
003a32  7830              LDRB     r0,[r6,#0]  ; sign_U
003a34  2801              CMP      r0,#1
003a36  d11b              BNE      |L1.14960|
003a38  7838              LDRB     r0,[r7,#0]  ; sign_I
003a3a  2801              CMP      r0,#1
003a3c  d118              BNE      |L1.14960|
003a3e  f44f70d6          MOV      r0,#0x1ac
003a42  f7fffffe          BL       lc640_read_int
003a46  498a              LDR      r1,|L1.15472|
003a48  f9b11000          LDRSH    r1,[r1,#0]  ; BAT_C_REAL
003a4c  4288              CMP      r0,r1
003a4e  d00f              BEQ      |L1.14960|
003a50  4888              LDR      r0,|L1.15476|
003a52  8800              LDRH     r0,[r0,#0]  ; NUMBAT
003a54  b160              CBZ      r0,|L1.14960|
003a56  f898003d          LDRB     r0,[r8,#0x3d]  ; bat
003a5a  07c0              LSLS     r0,r0,#31
003a5c  d108              BNE      |L1.14960|
;;;6420   		{
;;;6421   		lc640_write_int(EE_BAT1_ZAR_CNT,BAT_C_REAL[0]);
003a5e  f44f70d6          MOV      r0,#0x1ac
003a62  f7fffffe          BL       lc640_write_int
;;;6422   		superviser_cnt++;
003a66  4884              LDR      r0,|L1.15480|
003a68  7801              LDRB     r1,[r0,#0]  ; superviser_cnt
003a6a  f1010101          ADD      r1,r1,#1
003a6e  7001              STRB     r1,[r0,#0]
                  |L1.14960|
;;;6423   		}
;;;6424   	
;;;6425   	}
;;;6426   
;;;6427   if(((bat[0]._Ub>u_necc_up) || (bat[1]._Ub<u_necc_dn))&&(main_kb_cnt<((TBAT*60)-30))&&(main_kb_cnt>((TBAT*60)-150))) sign_U[1]=0;
003a70  487b              LDR      r0,|L1.15456|
003a72  f9b81002          LDRSH    r1,[r8,#2]  ; bat
003a76  f9b00000          LDRSH    r0,[r0,#0]  ; u_necc_up
003a7a  4281              CMP      r1,r0
003a7c  dc06              BGT      |L1.14988|
003a7e  487a              LDR      r0,|L1.15464|
003a80  f9b8104e          LDRSH    r1,[r8,#0x4e]  ; bat
003a84  f9b00000          LDRSH    r0,[r0,#0]  ; u_necc_dn
003a88  4281              CMP      r1,r0
003a8a  da0e              BGE      |L1.15018|
                  |L1.14988|
003a8c  f9b90000          LDRSH    r0,[r9,#0]  ; TBAT
003a90  f9b41040          LDRSH    r1,[r4,#0x40]  ; main_kb_cnt
003a94  ebc01000          RSB      r0,r0,r0,LSL #4
003a98  eb0a0280          ADD      r2,r10,r0,LSL #2
003a9c  428a              CMP      r2,r1
003a9e  dd04              BLE      |L1.15018|
003aa0  eb0b0080          ADD      r0,r11,r0,LSL #2
003aa4  4288              CMP      r0,r1
003aa6  da00              BGE      |L1.15018|
003aa8  7075              STRB     r5,[r6,#1]
                  |L1.15018|
;;;6428   
;;;6429   if(((bat[1]._Ib>(2*IKB)) || (bat[1]._Ib<(-IKB*2))) &&(main_kb_cnt<((TBAT*60)-30))&&(main_kb_cnt>((TBAT*60)-150))) sign_I[1]=0;
003aaa  4970              LDR      r1,|L1.15468|
003aac  f9b80054          LDRSH    r0,[r8,#0x54]  ; bat
003ab0  f9b11000          LDRSH    r1,[r1,#0]  ; IKB
003ab4  ebb00f41          CMP      r0,r1,LSL #1
003ab8  dc03              BGT      |L1.15042|
003aba  4249              RSBS     r1,r1,#0
003abc  ebb00f41          CMP      r0,r1,LSL #1
003ac0  da0e              BGE      |L1.15072|
                  |L1.15042|
003ac2  f9b90000          LDRSH    r0,[r9,#0]  ; TBAT
003ac6  f9b41040          LDRSH    r1,[r4,#0x40]  ; main_kb_cnt
003aca  ebc01000          RSB      r0,r0,r0,LSL #4
003ace  eb0a0280          ADD      r2,r10,r0,LSL #2
003ad2  428a              CMP      r2,r1
003ad4  dd04              BLE      |L1.15072|
003ad6  eb0b0080          ADD      r0,r11,r0,LSL #2
003ada  4288              CMP      r0,r1
003adc  da00              BGE      |L1.15072|
003ade  707d              STRB     r5,[r7,#1]
                  |L1.15072|
;;;6430   																 
;;;6431   if((main_kb_cnt==((TBAT*60)-10)) &&(spc_stat==spcOFF))
003ae0  f9b90000          LDRSH    r0,[r9,#0]  ; TBAT
003ae4  ebc01100          RSB      r1,r0,r0,LSL #4
003ae8  f06f0009          MVN      r0,#9
003aec  eb000081          ADD      r0,r0,r1,LSL #2
003af0  f9b41040          LDRSH    r1,[r4,#0x40]  ; main_kb_cnt
003af4  4288              CMP      r0,r1
003af6  d121              BNE      |L1.15164|
003af8  7ce0              LDRB     r0,[r4,#0x13]  ; spc_stat
003afa  b9f8              CBNZ     r0,|L1.15164|
;;;6432   	{
;;;6433   	if((sign_U[1]==1) && (sign_I[1]==1) && (lc640_read_int(EE_BAT2_ZAR_CNT)!=BAT_C_REAL[1]) && (NUMBAT==2) && (!(bat[1]._av&1)))
003afc  7870              LDRB     r0,[r6,#1]  ; sign_U
003afe  2801              CMP      r0,#1
003b00  d11c              BNE      |L1.15164|
003b02  7878              LDRB     r0,[r7,#1]  ; sign_I
003b04  2801              CMP      r0,#1
003b06  d119              BNE      |L1.15164|
003b08  f44f75e5          MOV      r5,#0x1ca
003b0c  4628              MOV      r0,r5
003b0e  f7fffffe          BL       lc640_read_int
003b12  4957              LDR      r1,|L1.15472|
003b14  f9b11002          LDRSH    r1,[r1,#2]  ; BAT_C_REAL
003b18  4288              CMP      r0,r1
003b1a  d00f              BEQ      |L1.15164|
003b1c  4855              LDR      r0,|L1.15476|
003b1e  8800              LDRH     r0,[r0,#0]  ; NUMBAT
003b20  2802              CMP      r0,#2
003b22  d10b              BNE      |L1.15164|
003b24  f8980089          LDRB     r0,[r8,#0x89]  ; bat
003b28  07c0              LSLS     r0,r0,#31
003b2a  d107              BNE      |L1.15164|
;;;6434   		{
;;;6435   		lc640_write_int(EE_BAT2_ZAR_CNT,BAT_C_REAL[1]);
003b2c  4628              MOV      r0,r5
003b2e  f7fffffe          BL       lc640_write_int
;;;6436   		superviser_cnt++;
003b32  4851              LDR      r0,|L1.15480|
003b34  7801              LDRB     r1,[r0,#0]  ; superviser_cnt
003b36  f1010101          ADD      r1,r1,#1
003b3a  7001              STRB     r1,[r0,#0]
                  |L1.15164|
;;;6437   		}
;;;6438   	
;;;6439   	}
;;;6440   
;;;6441   if(main_kb_cnt==((TBAT*60)-2)) zar_superviser_start();
003b3c  f9b90000          LDRSH    r0,[r9,#0]  ; TBAT
003b40  f06f0101          MVN      r1,#1
003b44  ebc01000          RSB      r0,r0,r0,LSL #4
003b48  eb010080          ADD      r0,r1,r0,LSL #2
003b4c  f9b41040          LDRSH    r1,[r4,#0x40]  ; main_kb_cnt
003b50  4288              CMP      r0,r1
003b52  d102              BNE      |L1.15194|
003b54  e8bd5ff0          POP      {r4-r12,lr}
003b58  e7fe              B        zar_superviser_start
                  |L1.15194|
;;;6442   }
003b5a  e650              B        |L1.14334|
;;;6443   
                          ENDP

                  npn_hndl PROC
;;;6454   //-----------------------------------------------
;;;6455   void npn_hndl(void)
003b5c  e92d03f0          PUSH     {r4-r9}
;;;6456   {
;;;6457   if(NPN_OUT!=npnoOFF)
003b60  4846              LDR      r0,|L1.15484|
;;;6458   	{
;;;6459   /*	if(NPN_SIGN==npnsAVNET)
;;;6460   		{
;;;6461   		if(net_av==1)
;;;6462   			{
;;;6463   			if(npn_tz_cnt<TZNPN)
;;;6464   				{
;;;6465   				npn_tz_cnt++;
;;;6466   				if(npn_tz_cnt==TZNPN)
;;;6467   					{
;;;6468   					npn_stat=npnsOFF;
;;;6469   					}
;;;6470   				}
;;;6471   			}
;;;6472   		else
;;;6473   			{
;;;6474   			if(npn_tz_cnt)
;;;6475   				{
;;;6476   				npn_tz_cnt--;
;;;6477   				if(npn_tz_cnt==0)
;;;6478   					{
;;;6479   					npn_stat=npnsON;
;;;6480   					}
;;;6481   				}
;;;6482   			}
;;;6483   		}*/
;;;6484   /*	if(NPN_SIGN==npnsULOAD)
;;;6485   		{
;;;6486   		if(load_U<UONPN)
;;;6487   			{
;;;6488   			if(npn_tz_cnt<TZNPN)
;;;6489   				{
;;;6490   				npn_tz_cnt++;
;;;6491   				if(npn_tz_cnt==TZNPN)
;;;6492   					{
;;;6493   					npn_stat=npnsOFF;
;;;6494   					}
;;;6495   				}
;;;6496   			}
;;;6497   		else if(load_U>UVNPN)
;;;6498   			{
;;;6499   			if(npn_tz_cnt)
;;;6500   				{
;;;6501   				npn_tz_cnt--;
;;;6502   				if(npn_tz_cnt==0)
;;;6503   					{
;;;6504   					npn_stat=npnsON;
;;;6505   					}
;;;6506   				}
;;;6507   			}
;;;6508   		}*/
;;;6509   
;;;6510   	if((load_U<UONPN)&&((net_Ua<UMN)||(net_Ub<UMN)||(net_Uc<UMN)))
;;;6511   		{
;;;6512   		if(npn_tz_cnt<TZNPN)
003b62  4f47              LDR      r7,|L1.15488|
;;;6513   			{
;;;6514   			npn_tz_cnt++;
;;;6515   			if(npn_tz_cnt==TZNPN)
;;;6516   				{
;;;6517   				npn_stat=npnsOFF;
003b64  4e47              LDR      r6,|L1.15492|
003b66  7800              LDRB     r0,[r0,#0]            ;6457  ; NPN_OUT
003b68  f04f0c00          MOV      r12,#0                ;6457
;;;6518   				}
;;;6519   			}
;;;6520   		}
;;;6521   	else if((load_U>UVNPN)&&(net_Ua>UMN)&&(net_Ub>UMN)&&(net_Uc>UMN))
;;;6522   		{
;;;6523   		if(npn_tz_cnt)
;;;6524   			{
;;;6525   			npn_tz_cnt--;
;;;6526   			if(npn_tz_cnt==0)
;;;6527   				{
;;;6528   				npn_stat=npnsON;
003b6c  f04f0801          MOV      r8,#1
003b70  b1a8              CBZ      r0,|L1.15262|
003b72  4845              LDR      r0,|L1.15496|
003b74  4639              MOV      r1,r7                 ;6512
003b76  f9b05000          LDRSH    r5,[r0,#0]            ;6510  ; load_U
003b7a  4844              LDR      r0,|L1.15500|
003b7c  f9b11000          LDRSH    r1,[r1,#0]            ;6512
003b80  f9b09000          LDRSH    r9,[r0,#0]            ;6510  ; UONPN
003b84  4842              LDR      r0,|L1.15504|
003b86  f9b02000          LDRSH    r2,[r0,#0]            ;6510
003b8a  4842              LDR      r0,|L1.15508|
003b8c  f9b03000          LDRSH    r3,[r0,#0]            ;6510
003b90  4841              LDR      r0,|L1.15512|
003b92  f9b04000          LDRSH    r4,[r0,#0]            ;6510
003b96  4841              LDR      r0,|L1.15516|
003b98  f9b00000          LDRSH    r0,[r0,#0]            ;6510
003b9c  e080              B        |L1.15520|
                  |L1.15262|
003b9e  e0aa              B        |L1.15606|
                  |L1.15264|
                          DCD      UB0
                  |L1.15268|
                          DCD      UB20
                  |L1.15272|
                          DCD      ||area_number.21||+0x36
                  |L1.15276|
                          DCD      NUMIST
                  |L1.15280|
                          DCD      sk_cnt
                  |L1.15284|
                          DCD      sk_stat
                  |L1.15288|
                          DCD      NUMSK
                  |L1.15292|
                          DCD      ||area_number.15||
                  |L1.15296|
                          DCD      ||.bss||+0x400
                  |L1.15300|
                          DCD      sk_av_cnt
                  |L1.15304|
                          DCD      sk_av_stat
                  |L1.15308|
                          DCD      sk_av_stat_old
                  |L1.15312|
                          DCD      SK_SIGN
                  |L1.15316|
003bd4  534b2023          DCB      "SK #1 Alarm",0
003bd8  3120416c
003bdc  61726d00
                  |L1.15328|
003be0  534b2023          DCB      "SK #2 Alarm",0
003be4  3220416c
003be8  61726d00
                  |L1.15340|
003bec  534b2023          DCB      "SK #3 Alarm",0
003bf0  3320416c
003bf4  61726d00
                  |L1.15352|
003bf8  534b2023          DCB      "SK #4 Alarm",0
003bfc  3420416c
003c00  61726d00
                  |L1.15364|
003c04  534b2023          DCB      "SK #1 Alarm is off",0
003c08  3120416c
003c0c  61726d20
003c10  6973206f
003c14  666600  
003c17  00                DCB      0
                  |L1.15384|
003c18  534b2023          DCB      "SK #2 Alarm is off",0
003c1c  3220416c
003c20  61726d20
003c24  6973206f
003c28  666600  
003c2b  00                DCB      0
                  |L1.15404|
003c2c  534b2023          DCB      "SK #3 Alarm is off",0
003c30  3320416c
003c34  61726d20
003c38  6973206f
003c3c  666600  
003c3f  00                DCB      0
                  |L1.15424|
003c40  534b2023          DCB      "SK #4 Alarm is off",0
003c44  3420416c
003c48  61726d20
003c4c  6973206f
003c50  666600  
003c53  00                DCB      0
                  |L1.15444|
                          DCD      sign_U
                  |L1.15448|
                          DCD      sign_I
                  |L1.15452|
                          DCD      bat
                  |L1.15456|
                          DCD      u_necc_up
                  |L1.15460|
                          DCD      TBAT
                  |L1.15464|
                          DCD      u_necc_dn
                  |L1.15468|
                          DCD      IKB
                  |L1.15472|
                          DCD      BAT_C_REAL
                  |L1.15476|
                          DCD      NUMBAT
                  |L1.15480|
                          DCD      superviser_cnt
                  |L1.15484|
                          DCD      NPN_OUT
                  |L1.15488|
                          DCD      npn_tz_cnt
                  |L1.15492|
                          DCD      npn_stat
                  |L1.15496|
                          DCD      load_U
                  |L1.15500|
                          DCD      UONPN
                  |L1.15504|
                          DCD      net_Ua
                  |L1.15508|
                          DCD      net_Ub
                  |L1.15512|
                          DCD      net_Uc
                  |L1.15516|
                          DCD      UMN
                  |L1.15520|
003ca0  454d              CMP      r5,r9                 ;6510
003ca2  da13              BGE      |L1.15564|
003ca4  4282              CMP      r2,r0                 ;6510
003ca6  db03              BLT      |L1.15536|
003ca8  4283              CMP      r3,r0                 ;6510
003caa  db01              BLT      |L1.15536|
003cac  4284              CMP      r4,r0                 ;6510
003cae  da0d              BGE      |L1.15564|
                  |L1.15536|
003cb0  48ff              LDR      r0,|L1.16560|
003cb2  f9b02000          LDRSH    r2,[r0,#0]            ;6512  ; TZNPN
003cb6  4291              CMP      r1,r2                 ;6512
003cb8  da21              BGE      |L1.15614|
003cba  f1010101          ADD      r1,r1,#1              ;6514
003cbe  b208              SXTH     r0,r1                 ;6514
003cc0  8038              STRH     r0,[r7,#0]            ;6514
003cc2  4290              CMP      r0,r2                 ;6515
003cc4  d11b              BNE      |L1.15614|
003cc6  f886c000          STRB     r12,[r6,#0]           ;6517
003cca  e018              B        |L1.15614|
                  |L1.15564|
003ccc  f8dfc3e4          LDR      r12,|L1.16564|
003cd0  f9bcc000          LDRSH    r12,[r12,#0]          ;6521  ; UVNPN
003cd4  4565              CMP      r5,r12                ;6521
003cd6  dd12              BLE      |L1.15614|
003cd8  4282              CMP      r2,r0                 ;6521
003cda  dd10              BLE      |L1.15614|
003cdc  4283              CMP      r3,r0                 ;6521
003cde  dd0e              BLE      |L1.15614|
003ce0  4284              CMP      r4,r0                 ;6521
003ce2  dd0c              BLE      |L1.15614|
003ce4  b159              CBZ      r1,|L1.15614|
003ce6  f1a10101          SUB      r1,r1,#1              ;6525
003cea  b208              SXTH     r0,r1                 ;6525
003cec  8038              STRH     r0,[r7,#0]            ;6525
003cee  b930              CBNZ     r0,|L1.15614|
003cf0  f8868000          STRB     r8,[r6,#0]
003cf4  e003              B        |L1.15614|
                  |L1.15606|
;;;6529   				}
;;;6530   			}
;;;6531   		}
;;;6532   	}
;;;6533   else
;;;6534   	{
;;;6535   	npn_tz_cnt=0;
003cf6  f8a7c000          STRH     r12,[r7,#0]
;;;6536   	npn_stat=npnsON;
003cfa  f8868000          STRB     r8,[r6,#0]
                  |L1.15614|
;;;6537   	}
;;;6538   
;;;6539   if(npn_stat==npnsOFF) mess_send(MESS2RELE_HNDL,PARAM_RELE_NPN,1,15);
003cfe  7830              LDRB     r0,[r6,#0]  ; npn_stat
003d00  2800              CMP      r0,#0
003d02  d107              BNE      |L1.15636|
003d04  e8bd03f0          POP      {r4-r9}
003d08  230f              MOVS     r3,#0xf
003d0a  2201              MOVS     r2,#1
003d0c  216e              MOVS     r1,#0x6e
003d0e  20d2              MOVS     r0,#0xd2
003d10  f7ffbffe          B.W      mess_send
                  |L1.15636|
;;;6540   
;;;6541   
;;;6542   }
003d14  e8bd03f0          POP      {r4-r9}
003d18  4770              BX       lr
;;;6543   
                          ENDP

                  speedChargeHndl PROC
;;;6544   //-----------------------------------------------
;;;6545   void speedChargeHndl(void)
003d1a  b5f8              PUSH     {r3-r7,lr}
;;;6546   {
;;;6547   if(speedChIsOn)
003d1c  4fe6              LDR      r7,|L1.16568|
;;;6548   	{
;;;6549   	speedChTimeCnt++;
;;;6550   	if(speedChTimeCnt>=((signed long)speedChrgTimeInHour*3600L))
;;;6551   		{
;;;6552   		speedChIsOn=0;
;;;6553   		}
;;;6554   	if(speedChrgBlckStat)
003d1e  4de7              LDR      r5,|L1.16572|
003d20  2400              MOVS     r4,#0                 ;6547
003d22  8838              LDRH     r0,[r7,#0]            ;6547  ; speedChIsOn
003d24  b198              CBZ      r0,|L1.15694|
003d26  4ae6              LDR      r2,|L1.16576|
003d28  6811              LDR      r1,[r2,#0]            ;6549  ; speedChTimeCnt
003d2a  f1010101          ADD      r1,r1,#1              ;6549
003d2e  6011              STR      r1,[r2,#0]            ;6549  ; speedChTimeCnt
003d30  48e4              LDR      r0,|L1.16580|
003d32  f9b00000          LDRSH    r0,[r0,#0]            ;6550  ; speedChrgTimeInHour
003d36  ebc01340          RSB      r3,r0,r0,LSL #5       ;6550
003d3a  ebc32000          RSB      r0,r3,r0,LSL #8       ;6550
003d3e  ebb11f00          CMP      r1,r0,LSL #4          ;6550
003d42  db00              BLT      |L1.15686|
003d44  803c              STRH     r4,[r7,#0]            ;6552
                  |L1.15686|
003d46  8828              LDRH     r0,[r5,#0]  ; speedChrgBlckStat
003d48  b108              CBZ      r0,|L1.15694|
;;;6555   		{
;;;6556   		speedChIsOn=0;
003d4a  803c              STRH     r4,[r7,#0]
;;;6557   		speedChTimeCnt=0;
003d4c  6014              STR      r4,[r2,#0]  ; speedChTimeCnt
                  |L1.15694|
;;;6558   		}
;;;6559   	}
;;;6560   
;;;6561   
;;;6562   
;;;6563   if(speedChrgAvtEn)
003d4e  48de              LDR      r0,|L1.16584|
;;;6564   	{
;;;6565   	if(!speedChIsOn)
;;;6566   		{
;;;6567   		if((load_U<u_necc)&&((u_necc-load_U)>speedChrgDU)&&(abs(Ib_ips_termokompensat/10-IZMAX)<5)&&(!speedChrgBlckStat))
;;;6568   			{
;;;6569   			speedChIsOn=1;
003d50  2601              MOVS     r6,#1
003d52  8800              LDRH     r0,[r0,#0]            ;6563  ; speedChrgAvtEn
003d54  b300              CBZ      r0,|L1.15768|
003d56  8838              LDRH     r0,[r7,#0]            ;6565  ; speedChIsOn
003d58  b9f0              CBNZ     r0,|L1.15768|
003d5a  48dc              LDR      r0,|L1.16588|
003d5c  49dc              LDR      r1,|L1.16592|
003d5e  f9b00000          LDRSH    r0,[r0,#0]            ;6567  ; load_U
003d62  f9b11000          LDRSH    r1,[r1,#0]            ;6567  ; u_necc
003d66  4288              CMP      r0,r1                 ;6567
003d68  da16              BGE      |L1.15768|
003d6a  1a08              SUBS     r0,r1,r0              ;6567
003d6c  49d9              LDR      r1,|L1.16596|
003d6e  f9b11000          LDRSH    r1,[r1,#0]            ;6567  ; speedChrgDU
003d72  4288              CMP      r0,r1                 ;6567
003d74  dd10              BLE      |L1.15768|
003d76  48d8              LDR      r0,|L1.16600|
003d78  210a              MOVS     r1,#0xa               ;6567
003d7a  f9b00000          LDRSH    r0,[r0,#0]            ;6567  ; Ib_ips_termokompensat
003d7e  fb90f0f1          SDIV     r0,r0,r1              ;6567
003d82  49d6              LDR      r1,|L1.16604|
003d84  8809              LDRH     r1,[r1,#0]            ;6567  ; IZMAX
003d86  1a40              SUBS     r0,r0,r1              ;6567
003d88  b200              SXTH     r0,r0                 ;6567
003d8a  f7fffffe          BL       abs
003d8e  2805              CMP      r0,#5                 ;6567
003d90  da02              BGE      |L1.15768|
003d92  8828              LDRH     r0,[r5,#0]            ;6567  ; speedChrgBlckStat
003d94  b900              CBNZ     r0,|L1.15768|
003d96  803e              STRH     r6,[r7,#0]
                  |L1.15768|
;;;6570   			}
;;;6571   		}
;;;6572   	}
;;;6573   
;;;6574   
;;;6575   
;;;6576   if((speedChrgBlckSrc!=1)&&(speedChrgBlckSrc!=2)) speedChrgBlckStat=0;
003d98  48d1              LDR      r0,|L1.16608|
003d9a  f9b00000          LDRSH    r0,[r0,#0]  ; speedChrgBlckSrc
003d9e  2801              CMP      r0,#1
003da0  d003              BEQ      |L1.15786|
003da2  2802              CMP      r0,#2
003da4  d001              BEQ      |L1.15786|
003da6  802c              STRH     r4,[r5,#0]
003da8  e026              B        |L1.15864|
                  |L1.15786|
;;;6577   else
;;;6578   	{
;;;6579   	speedChrgBlckStat=0;
003daa  802c              STRH     r4,[r5,#0]
;;;6580   	if(speedChrgBlckSrc==1)
;;;6581   		{
;;;6582   		if(((speedChrgBlckLog==0)&&(adc_buff_[11]>2000)) || ((speedChrgBlckLog==1)&&(adc_buff_[11]<2000))) speedChrgBlckStat=1;
003dac  4bcd              LDR      r3,|L1.16612|
003dae  49ce              LDR      r1,|L1.16616|
003db0  f44f62fa          MOV      r2,#0x7d0
003db4  2801              CMP      r0,#1                 ;6580
003db6  d002              BEQ      |L1.15806|
;;;6583   		}
;;;6584   	else if(speedChrgBlckSrc==2)
003db8  2802              CMP      r0,#2
003dba  d00f              BEQ      |L1.15836|
003dbc  e01c              B        |L1.15864|
                  |L1.15806|
003dbe  f9b30000          LDRSH    r0,[r3,#0]            ;6582  ; speedChrgBlckLog
003dc2  b918              CBNZ     r0,|L1.15820|
003dc4  f9b13016          LDRSH    r3,[r1,#0x16]         ;6582  ; adc_buff_
003dc8  4293              CMP      r3,r2                 ;6582
003dca  dc05              BGT      |L1.15832|
                  |L1.15820|
003dcc  2801              CMP      r0,#1                 ;6582
003dce  d113              BNE      |L1.15864|
003dd0  f9b10016          LDRSH    r0,[r1,#0x16]         ;6582  ; adc_buff_
003dd4  4290              CMP      r0,r2                 ;6582
003dd6  da0f              BGE      |L1.15864|
                  |L1.15832|
003dd8  802e              STRH     r6,[r5,#0]            ;6582
003dda  e00d              B        |L1.15864|
                  |L1.15836|
;;;6585   		{
;;;6586   		if(((speedChrgBlckLog==0)&&(adc_buff_[13]>2000)) || ((speedChrgBlckLog==1)&&(adc_buff_[13]<2000))) speedChrgBlckStat=1;
003ddc  f9b30000          LDRSH    r0,[r3,#0]  ; speedChrgBlckLog
003de0  b918              CBNZ     r0,|L1.15850|
003de2  f9b1301a          LDRSH    r3,[r1,#0x1a]  ; adc_buff_
003de6  4293              CMP      r3,r2
003de8  dc05              BGT      |L1.15862|
                  |L1.15850|
003dea  2801              CMP      r0,#1
003dec  d104              BNE      |L1.15864|
003dee  f9b1001a          LDRSH    r0,[r1,#0x1a]  ; adc_buff_
003df2  4290              CMP      r0,r2
003df4  da00              BGE      |L1.15864|
                  |L1.15862|
003df6  802e              STRH     r6,[r5,#0]
                  |L1.15864|
;;;6587   		}
;;;6588   	}
;;;6589   
;;;6590   
;;;6591   if(speedChrgBlckStat==1)
003df8  8828              LDRH     r0,[r5,#0]  ; speedChrgBlckStat
;;;6592   	{
;;;6593   
;;;6594   	//speedChargeStartStop();
;;;6595   
;;;6596   	speedChrgShowCnt++;
003dfa  49bc              LDR      r1,|L1.16620|
003dfc  2801              CMP      r0,#1                 ;6591
003dfe  d001              BEQ      |L1.15876|
;;;6597   	if(speedChrgShowCnt>=30)	
;;;6598   		{
;;;6599   		speedChrgShowCnt=0;
;;;6600   		show_mess(	"          ",
;;;6601   					"               ",
;;;6602   					"     !!!    ",
;;;6603   					"                    ",
;;;6604   					5000);
;;;6605   		}
;;;6606   	}
;;;6607   else speedChrgShowCnt=0;
003e00  700c              STRB     r4,[r1,#0]
                  |L1.15874|
;;;6608   
;;;6609   
;;;6610   }
003e02  bdf8              POP      {r3-r7,pc}
                  |L1.15876|
003e04  7808              LDRB     r0,[r1,#0]            ;6596  ; speedChrgShowCnt
003e06  f1000001          ADD      r0,r0,#1              ;6596
003e0a  b2c0              UXTB     r0,r0                 ;6596
003e0c  7008              STRB     r0,[r1,#0]            ;6596
003e0e  281e              CMP      r0,#0x1e              ;6597
003e10  d3f7              BCC      |L1.15874|
003e12  700c              STRB     r4,[r1,#0]            ;6599
003e14  f2413088          MOV      r0,#0x1388            ;6600
003e18  9000              STR      r0,[sp,#0]            ;6600
003e1a  a3b5              ADR      r3,|L1.16624|
003e1c  a2ba              ADR      r2,|L1.16648|
003e1e  a1c0              ADR      r1,|L1.16672|
003e20  a0c5              ADR      r0,|L1.16696|
003e22  f7fffffe          BL       show_mess
003e26  bdf8              POP      {r3-r7,pc}
;;;6611   
                          ENDP

                  speedChargeStartStop PROC
;;;6612   //-----------------------------------------------
;;;6613   void speedChargeStartStop(void)
003e28  b508              PUSH     {r3,lr}
;;;6614   {
;;;6615   if(speedChIsOn)
003e2a  48a3              LDR      r0,|L1.16568|
003e2c  2100              MOVS     r1,#0
003e2e  8802              LDRH     r2,[r0,#0]  ; speedChIsOn
003e30  b10a              CBZ      r2,|L1.15926|
;;;6616   	{
;;;6617   	speedChIsOn=0;
003e32  8001              STRH     r1,[r0,#0]
;;;6618   	}
;;;6619   
;;;6620   else
;;;6621   	{
;;;6622   	if(speedChrgBlckStat==0)
;;;6623   		{
;;;6624   		speedChIsOn=1;
;;;6625   		speedChTimeCnt=0;
;;;6626   		}
;;;6627   	else
;;;6628   		{
;;;6629   		show_mess(	"          ",
;;;6630   	          		"               ",
;;;6631   	          		"    !   ",
;;;6632   	          		"                    ",2000);	 
;;;6633   		}
;;;6634   	}
;;;6635   }
003e34  bd08              POP      {r3,pc}
                  |L1.15926|
003e36  4aa1              LDR      r2,|L1.16572|
003e38  8812              LDRH     r2,[r2,#0]            ;6622  ; speedChrgBlckStat
003e3a  b14a              CBZ      r2,|L1.15952|
003e3c  f44f60fa          MOV      r0,#0x7d0             ;6629
003e40  9000              STR      r0,[sp,#0]            ;6629
003e42  a3ab              ADR      r3,|L1.16624|
003e44  a2c2              ADR      r2,|L1.16720|
003e46  a1c8              ADR      r1,|L1.16744|
003e48  a0cd              ADR      r0,|L1.16768|
003e4a  f7fffffe          BL       show_mess
003e4e  bd08              POP      {r3,pc}
                  |L1.15952|
003e50  f04f0201          MOV      r2,#1                 ;6624
003e54  8002              STRH     r2,[r0,#0]            ;6624
003e56  489a              LDR      r0,|L1.16576|
003e58  6001              STR      r1,[r0,#0]            ;6625  ; speedChTimeCnt
003e5a  bd08              POP      {r3,pc}
;;;6636   
                          ENDP

                  numOfForvardBps_hndl PROC
;;;6637   //-----------------------------------------------
;;;6638   void	numOfForvardBps_hndl(void)			//       
003e5c  e92d41f0          PUSH     {r4-r8,lr}
;;;6639   {
;;;6640   
;;;6641   numOfForvardBps_old=numOfForvardBps;
003e60  4ccd              LDR      r4,|L1.16792|
003e62  7e20              LDRB     r0,[r4,#0x18]  ; numOfForvardBps
003e64  7660              STRB     r0,[r4,#0x19]
;;;6642   
;;;6643   numOfForvardBps=0;
003e66  f04f0500          MOV      r5,#0
003e6a  7625              STRB     r5,[r4,#0x18]
;;;6644   
;;;6645   //FORVARDBPSCHHOUR=10;
;;;6646   
;;;6647   if((FORVARDBPSCHHOUR<=0)||(FORVARDBPSCHHOUR>500))
003e6c  4ecb              LDR      r6,|L1.16796|
003e6e  f9b60000          LDRSH    r0,[r6,#0]  ; FORVARDBPSCHHOUR
003e72  2800              CMP      r0,#0
003e74  dd02              BLE      |L1.15996|
003e76  f5b07ffa          CMP      r0,#0x1f4
003e7a  dd02              BLE      |L1.16002|
                  |L1.15996|
;;;6648   	{
;;;6649   	FORVARDBPSCHHOUR=0;
003e7c  8035              STRH     r5,[r6,#0]
                  |L1.15998|
;;;6650   	return;
;;;6651   	}
;;;6652   
;;;6653   numOfForvardBps_minCnt++;
;;;6654   
;;;6655   
;;;6656   if(numOfForvardBps_minCnt>=60)
;;;6657   	{
;;;6658   	numOfForvardBps_minCnt=0;
;;;6659   	numOfForvardBps_hourCnt=lc640_read_int(EE_FORVBPSHOURCNT);
;;;6660   	numOfForvardBps_hourCnt++;
;;;6661   	if(numOfForvardBps_hourCnt>=(FORVARDBPSCHHOUR*NUMIST))
;;;6662   		{
;;;6663   		numOfForvardBps_hourCnt=0;
;;;6664   		}
;;;6665   	lc640_write_int(EE_FORVBPSHOURCNT,numOfForvardBps_hourCnt);
;;;6666   	}
;;;6667   
;;;6668   numOfForvardBps=numOfForvardBps_hourCnt/FORVARDBPSCHHOUR;
;;;6669   
;;;6670   //if(numOfForvardBps)
;;;6671   //numOfForvardBps_old=numOfForvardBps; 
;;;6672   }
003e7e  e8bd81f0          POP      {r4-r8,pc}
                  |L1.16002|
003e82  7ea0              LDRB     r0,[r4,#0x1a]         ;6653  ; numOfForvardBps_minCnt
003e84  f1000001          ADD      r0,r0,#1              ;6653
003e88  b2c0              UXTB     r0,r0                 ;6653
003e8a  76a0              STRB     r0,[r4,#0x1a]         ;6653
003e8c  283c              CMP      r0,#0x3c              ;6656
003e8e  d31a              BCC      |L1.16070|
003e90  76a5              STRB     r5,[r4,#0x1a]         ;6658
003e92  f44f7794          MOV      r7,#0x128             ;6659
003e96  4638              MOV      r0,r7                 ;6659
003e98  f7fffffe          BL       lc640_read_int
003e9c  f1000001          ADD      r0,r0,#1              ;6660
003ea0  b200              SXTH     r0,r0                 ;6660
003ea2  f8a40066          STRH     r0,[r4,#0x66]         ;6660
003ea6  4abe              LDR      r2,|L1.16800|
003ea8  f9b61000          LDRSH    r1,[r6,#0]            ;6661  ; FORVARDBPSCHHOUR
003eac  f9b22000          LDRSH    r2,[r2,#0]            ;6661  ; NUMIST
003eb0  fb01f102          MUL      r1,r1,r2              ;6661
003eb4  4281              CMP      r1,r0                 ;6661
003eb6  dc01              BGT      |L1.16060|
003eb8  f8a45066          STRH     r5,[r4,#0x66]         ;6663
                  |L1.16060|
003ebc  f9b41066          LDRSH    r1,[r4,#0x66]         ;6665  ; numOfForvardBps_hourCnt
003ec0  4638              MOV      r0,r7                 ;6665
003ec2  f7fffffe          BL       lc640_write_int
                  |L1.16070|
003ec6  f9b40066          LDRSH    r0,[r4,#0x66]         ;6668  ; numOfForvardBps_hourCnt
003eca  f9b61000          LDRSH    r1,[r6,#0]            ;6668  ; FORVARDBPSCHHOUR
003ece  fb90f0f1          SDIV     r0,r0,r1              ;6668
003ed2  7620              STRB     r0,[r4,#0x18]         ;6668
003ed4  e7d3              B        |L1.15998|
;;;6673   
                          ENDP

                  numOfForvardBps_init PROC
;;;6674   //-----------------------------------------------
;;;6675   void	numOfForvardBps_init(void)			//         
003ed6  b510              PUSH     {r4,lr}
;;;6676   {									//    -   
;;;6677   lc640_write_int(EE_FORVBPSHOURCNT,0);
003ed8  2100              MOVS     r1,#0
003eda  f44f7094          MOV      r0,#0x128
003ede  f7fffffe          BL       lc640_write_int
;;;6678   numOfForvardBps_minCnt=58;
003ee2  49ad              LDR      r1,|L1.16792|
003ee4  f04f003a          MOV      r0,#0x3a
003ee8  7688              STRB     r0,[r1,#0x1a]
;;;6679   }
003eea  bd10              POP      {r4,pc}
;;;6680   
                          ENDP

                  outVoltContrHndl PROC
;;;6681   //-----------------------------------------------
;;;6682   void outVoltContrHndl(void)
003eec  b570              PUSH     {r4-r6,lr}
;;;6683   { 
;;;6684   if((load_U>U_OUT_KONTR_MAX)||(load_U<U_OUT_KONTR_MIN))
003eee  4c77              LDR      r4,|L1.16588|
003ef0  48ac              LDR      r0,|L1.16804|
;;;6685   	{
;;;6686   	outVoltContrHndlCnt_=0;
;;;6687   	if(outVoltContrHndlCnt<U_OUT_KONTR_DELAY)
003ef2  4aad              LDR      r2,|L1.16808|
003ef4  f9b41000          LDRSH    r1,[r4,#0]            ;6684  ; load_U
003ef8  f9b06000          LDRSH    r6,[r0,#0]            ;6684  ; U_OUT_KONTR_MAX
003efc  2500              MOVS     r5,#0                 ;6686
003efe  f9b20000          LDRSH    r0,[r2,#0]
003f02  4baa              LDR      r3,|L1.16812|
003f04  42b1              CMP      r1,r6                 ;6684
003f06  dc04              BGT      |L1.16146|
003f08  4ea9              LDR      r6,|L1.16816|
003f0a  f9b66000          LDRSH    r6,[r6,#0]            ;6684  ; U_OUT_KONTR_MIN
003f0e  42b1              CMP      r1,r6                 ;6684
003f10  da0f              BGE      |L1.16178|
                  |L1.16146|
003f12  801d              STRH     r5,[r3,#0]            ;6686
003f14  49a7              LDR      r1,|L1.16820|
003f16  f9b11000          LDRSH    r1,[r1,#0]  ; U_OUT_KONTR_DELAY
003f1a  4288              CMP      r0,r1
003f1c  da1b              BGE      |L1.16214|
;;;6688   		{
;;;6689   		outVoltContrHndlCnt++;
003f1e  f1000001          ADD      r0,r0,#1
003f22  b200              SXTH     r0,r0
003f24  8010              STRH     r0,[r2,#0]
;;;6690   		if(outVoltContrHndlCnt==U_OUT_KONTR_DELAY)
003f26  4288              CMP      r0,r1
003f28  d115              BNE      |L1.16214|
;;;6691   			{
;;;6692   			avar_uout_hndl(1);
003f2a  2001              MOVS     r0,#1
003f2c  f7fffffe          BL       avar_uout_hndl
003f30  e011              B        |L1.16214|
                  |L1.16178|
;;;6693   			}
;;;6694   		}
;;;6695   	}
;;;6696   else
;;;6697   	{
;;;6698   	if(outVoltContrHndlCnt)
003f32  b180              CBZ      r0,|L1.16214|
;;;6699   		{
;;;6700   		if(outVoltContrHndlCnt_<5)
003f34  f9b30000          LDRSH    r0,[r3,#0]  ; outVoltContrHndlCnt_
003f38  2805              CMP      r0,#5
003f3a  da0c              BGE      |L1.16214|
;;;6701   			{
;;;6702   			outVoltContrHndlCnt_++;
003f3c  f1000001          ADD      r0,r0,#1
003f40  b200              SXTH     r0,r0
003f42  8018              STRH     r0,[r3,#0]
;;;6703   			if(outVoltContrHndlCnt_>=5)
003f44  2805              CMP      r0,#5
003f46  db06              BLT      |L1.16214|
;;;6704   				{
;;;6705   				outVoltContrHndlCnt=0;
003f48  8015              STRH     r5,[r2,#0]
;;;6706   				if(uout_av)avar_uout_hndl(0);
003f4a  489b              LDR      r0,|L1.16824|
003f4c  7800              LDRB     r0,[r0,#0]  ; uout_av
003f4e  b110              CBZ      r0,|L1.16214|
003f50  2000              MOVS     r0,#0
003f52  f7fffffe          BL       avar_uout_hndl
                  |L1.16214|
;;;6707   				}
;;;6708   			}
;;;6709   		}
;;;6710   	}
;;;6711   
;;;6712   if (load_U<(USIGN*10)) 
003f56  4899              LDR      r0,|L1.16828|
003f58  f9b41000          LDRSH    r1,[r4,#0]  ; load_U
003f5c  f9b00000          LDRSH    r0,[r0,#0]  ; USIGN
003f60  eb000080          ADD      r0,r0,r0,LSL #2
003f64  ebb10f40          CMP      r1,r0,LSL #1
003f68  da0b              BGE      |L1.16258|
;;;6713   	{
;;;6714   	if(!bSILENT)
003f6a  4895              LDR      r0,|L1.16832|
003f6c  6800              LDR      r0,[r0,#0]  ; bSILENT
003f6e  2800              CMP      r0,#0
003f70  d107              BNE      |L1.16258|
;;;6715   		{
;;;6716   		mess_send(MESS2RELE_HNDL,PARAM_RELE_BAT_IS_DISCHARGED,1,20);
003f72  e8bd4070          POP      {r4-r6,lr}
003f76  2314              MOVS     r3,#0x14
003f78  2201              MOVS     r2,#1
003f7a  2172              MOVS     r1,#0x72
003f7c  20d2              MOVS     r0,#0xd2
003f7e  f7ffbffe          B.W      mess_send
                  |L1.16258|
;;;6717   		}
;;;6718   
;;;6719   	//bU_BAT2REL_AV_BAT=1;
;;;6720   	}
;;;6721   
;;;6722   
;;;6723   }
003f82  bd70              POP      {r4-r6,pc}
;;;6724   
                          ENDP

                  vent_resurs_hndl PROC
;;;6725   //-----------------------------------------------
;;;6726   void vent_resurs_hndl(void)
003f84  e92d41f0          PUSH     {r4-r8,lr}
;;;6727   {
;;;6728   char i;
;;;6729   char crc_in,crc_eval;
;;;6730   
;;;6731   for(i=0;i<NUMIST;i++)
003f88  f04f0200          MOV      r2,#0
003f8c  4884              LDR      r0,|L1.16800|
;;;6732   	{
;;;6733   	if((bps[i]._buff[7]&0xc0)==0x00)
003f8e  4f8d              LDR      r7,|L1.16836|
003f90  f9b06000          LDRSH    r6,[r0,#0]            ;6731
003f94  e06e              B        |L1.16500|
                  |L1.16278|
003f96  ebc200c2          RSB      r0,r2,r2,LSL #3
003f9a  eb001002          ADD      r0,r0,r2,LSL #4
003f9e  eb070080          ADD      r0,r7,r0,LSL #2
003fa2  7b41              LDRB     r1,[r0,#0xd]
003fa4  098b              LSRS     r3,r1,#6
003fa6  d006              BEQ      |L1.16310|
;;;6734   		{
;;;6735   		bps[i]._vent_resurs_temp[0]=bps[i]._buff[7];
;;;6736   		}
;;;6737   	else if((bps[i]._buff[7]&0xc0)==0x40)
003fa8  2301              MOVS     r3,#1
003faa  ebb31f91          CMP      r3,r1,LSR #6
003fae  d105              BNE      |L1.16316|
;;;6738   		{
;;;6739   		bps[i]._vent_resurs_temp[1]=bps[i]._buff[7];
003fb0  f8801055          STRB     r1,[r0,#0x55]
003fb4  e00f              B        |L1.16342|
                  |L1.16310|
003fb6  f8801054          STRB     r1,[r0,#0x54]         ;6735
003fba  e00c              B        |L1.16342|
                  |L1.16316|
;;;6740   		}
;;;6741   	else if((bps[i]._buff[7]&0xc0)==0x80)
003fbc  2302              MOVS     r3,#2
003fbe  ebb31f91          CMP      r3,r1,LSR #6
003fc2  d102              BNE      |L1.16330|
;;;6742   		{
;;;6743   		bps[i]._vent_resurs_temp[2]=bps[i]._buff[7];
003fc4  f8801056          STRB     r1,[r0,#0x56]
003fc8  e005              B        |L1.16342|
                  |L1.16330|
;;;6744   		}
;;;6745   	else if((bps[i]._buff[7]&0xc0)==0xc0)
003fca  2303              MOVS     r3,#3
003fcc  ebb31f91          CMP      r3,r1,LSR #6
003fd0  d101              BNE      |L1.16342|
;;;6746   		{
;;;6747   		bps[i]._vent_resurs_temp[3]=bps[i]._buff[7];
003fd2  f8801057          STRB     r1,[r0,#0x57]
                  |L1.16342|
;;;6748   		}
;;;6749   	crc_in=0;
;;;6750   	crc_in|=(bps[i]._vent_resurs_temp[0]&0x30)>>4;
003fd6  f8101f54          LDRB     r1,[r0,#0x54]!
003fda  f3c11401          UBFX     r4,r1,#4,#2
;;;6751   	crc_in|=(bps[i]._vent_resurs_temp[1]&0x30)>>2;
003fde  7843              LDRB     r3,[r0,#1]
003fe0  f0030530          AND      r5,r3,#0x30
003fe4  ea440595          ORR      r5,r4,r5,LSR #2
;;;6752   	crc_in|=(bps[i]._vent_resurs_temp[2]&0x30);
003fe8  7884              LDRB     r4,[r0,#2]
003fea  f0040c30          AND      r12,r4,#0x30
003fee  ea4c0c05          ORR      r12,r12,r5
;;;6753   	crc_in|=(bps[i]._vent_resurs_temp[3]&0x30)<<2;
003ff2  78c5              LDRB     r5,[r0,#3]
003ff4  f1a00054          SUB      r0,r0,#0x54
003ff8  f0050830          AND      r8,r5,#0x30
003ffc  ea4c0c88          ORR      r12,r12,r8,LSL #2
;;;6754   
;;;6755   	crc_eval =bps[i]._vent_resurs_temp[0]&0x0f;
004000  f001010f          AND      r1,r1,#0xf
;;;6756   	crc_eval^=bps[i]._vent_resurs_temp[1]&0x0f;
004004  f003030f          AND      r3,r3,#0xf
004008  ea830801          EOR      r8,r3,r1
;;;6757   	crc_eval^=bps[i]._vent_resurs_temp[2]&0x0f;
00400c  f004040f          AND      r4,r4,#0xf
004010  ea840808          EOR      r8,r4,r8
;;;6758   	crc_eval^=bps[i]._vent_resurs_temp[3]&0x0f;
004014  f005050f          AND      r5,r5,#0xf
004018  ea850808          EOR      r8,r5,r8
;;;6759   
;;;6760   	if(crc_eval==crc_in)
00401c  45e0              CMP      r8,r12
00401e  d113              BNE      |L1.16456|
;;;6761   		{
;;;6762   		unsigned short temp_US;
;;;6763   		temp_US=0;
;;;6764   
;;;6765   		temp_US|=(bps[i]._vent_resurs_temp[3]&0x0f);
;;;6766   		temp_US<<=4;
004020  ea4f1505          LSL      r5,r5,#4
;;;6767   		temp_US|=(bps[i]._vent_resurs_temp[2]&0x0f);
004024  ea440405          ORR      r4,r4,r5
;;;6768   		temp_US<<=4;
004028  ea4f1404          LSL      r4,r4,#4
;;;6769   		temp_US|=(bps[i]._vent_resurs_temp[1]&0x0f);
00402c  ea430304          ORR      r3,r3,r4
;;;6770   		temp_US<<=4;
004030  ea4f5303          LSL      r3,r3,#20
004034  ea4f4313          LSR      r3,r3,#16
;;;6771   		temp_US|=(bps[i]._vent_resurs_temp[0]&0x0f);
004038  ea410103          ORR      r1,r1,r3
;;;6772   
;;;6773   		if(bps[i]._vent_resurs!=temp_US)bps[i]._vent_resurs=temp_US;
00403c  f8b03058          LDRH     r3,[r0,#0x58]
004040  428b              CMP      r3,r1
004042  d001              BEQ      |L1.16456|
004044  f8a01058          STRH     r1,[r0,#0x58]
                  |L1.16456|
;;;6774   		}
;;;6775   
;;;6776   	if(bps[i]._vent_resurs>TVENTMAX*10)
004048  495f              LDR      r1,|L1.16840|
00404a  f8b03058          LDRH     r3,[r0,#0x58]
00404e  f9b11000          LDRSH    r1,[r1,#0]  ; TVENTMAX
004052  eb010181          ADD      r1,r1,r1,LSL #2
004056  ebb30f41          CMP      r3,r1,LSL #1
00405a  dd04              BLE      |L1.16486|
;;;6777   		{
;;;6778   		bps[i]._av|=(1<<4);
00405c  7841              LDRB     r1,[r0,#1]
00405e  f0410110          ORR      r1,r1,#0x10
004062  7041              STRB     r1,[r0,#1]
004064  e003              B        |L1.16494|
                  |L1.16486|
;;;6779   		}
;;;6780   	else bps[i]._av&=~(1<<4);
004066  7841              LDRB     r1,[r0,#1]
004068  f0210110          BIC      r1,r1,#0x10
00406c  7041              STRB     r1,[r0,#1]
                  |L1.16494|
00406e  f1020201          ADD      r2,r2,#1              ;6731
004072  b2d2              UXTB     r2,r2                 ;6731
                  |L1.16500|
004074  42b2              CMP      r2,r6                 ;6731
004076  db8e              BLT      |L1.16278|
;;;6781   	}
;;;6782   }
004078  e701              B        |L1.15998|
;;;6783   
                          ENDP

                  vent_hndl PROC
;;;6784   //-----------------------------------------------
;;;6785   void vent_hndl(void)
00407a  e92d4ff0          PUSH     {r4-r11,lr}
;;;6786   {
00407e  b087              SUB      sp,sp,#0x1c
;;;6787   if(RELEVENTSIGN==rvsAKB)
004080  4852              LDR      r0,|L1.16844|
;;;6788   	{
;;;6789   	if(vent_stat==0)
004082  4c45              LDR      r4,|L1.16792|
;;;6790   		{
;;;6791   		if	(
;;;6792   			(BAT_IS_ON[0]==bisON)&&((bat[0]._Tb>TVENTON)||(bat[0]._nd))
004084  4952              LDR      r1,|L1.16848|
;;;6793   			||
;;;6794   			(BAT_IS_ON[1]==bisON)&&((bat[1]._Tb>TVENTON)||(bat[1]._nd))
;;;6795   			)
;;;6796   			{
;;;6797   			vent_stat=1;
;;;6798   			}
;;;6799   		}
;;;6800   	else if(vent_stat==1)
;;;6801   		{
;;;6802   		if	(
;;;6803   			((BAT_IS_ON[0]!=bisON)||((BAT_IS_ON[0]==bisON)&&(bat[0]._Tb<TVENTOFF)&&(!bat[0]._nd)))
004086  4a53              LDR      r2,|L1.16852|
004088  7800              LDRB     r0,[r0,#0]            ;6787  ; RELEVENTSIGN
00408a  f9943000          LDRSB    r3,[r4,#0]            ;6789
00408e  f9b11000          LDRSH    r1,[r1,#0]            ;6792
004092  f9b22000          LDRSH    r2,[r2,#0]
004096  b140              CBZ      r0,|L1.16554|
;;;6804   			&&
;;;6805   			((BAT_IS_ON[1]!=bisON)||((BAT_IS_ON[1]==bisON)&&(bat[1]._Tb<TVENTOFF)&&(!bat[1]._nd)))
;;;6806   			)
;;;6807   			{
;;;6808   			vent_stat=0;
;;;6809   			}
;;;6810   		}
;;;6811   	}
;;;6812   else if(RELEVENTSIGN==rvsBPS)
004098  2802              CMP      r0,#2
00409a  d007              BEQ      |L1.16556|
;;;6813   	{
;;;6814   /*	if	(
;;;6815   		(((bps[0]._flags_tm&0x06)||(bps[0]._cnt>=30)))||
;;;6816   		(((bps[1]._flags_tm&0x06)||(bps[1]._cnt>=30))&&(NUMIST>1))||
;;;6817   		(((bps[2]._flags_tm&0x06)||(bps[2]._cnt>=30))&&(NUMIST>2))||
;;;6818   		(((bps[3]._flags_tm&0x06)||(bps[3]._cnt>=30))&&(NUMIST>3))||
;;;6819   		(((bps[4]._flags_tm&0x06)||(bps[4]._cnt>=30))&&(NUMIST>4))||
;;;6820   		(((bps[5]._flags_tm&0x06)||(bps[5]._cnt>=30))&&(NUMIST>5))||
;;;6821   		(((bps[6]._flags_tm&0x06)||(bps[6]._cnt>=30))&&(NUMIST>6))
;;;6822   		)
;;;6823   		{
;;;6824   		vent_stat=1;
;;;6825   		}
;;;6826   	else vent_stat=0;
;;;6827   	*/
;;;6828   
;;;6829   	if	(
;;;6830   		((NUMIST)&&((bps[0]._Ti>TVENTON)||(bps[0]._cnt>=30)))
;;;6831   		||
;;;6832   		((NUMIST>1)&&((bps[1]._Ti>TVENTON)||(bps[1]._cnt>=30)))
;;;6833   		||
;;;6834   		((NUMIST>2)&&((bps[2]._Ti>TVENTON)||(bps[2]._cnt>=30)))
;;;6835   		||
;;;6836   		((NUMIST>3)&&((bps[3]._Ti>TVENTON)||(bps[3]._cnt>=30)))
;;;6837   		||
;;;6838   		((NUMIST>4)&&((bps[4]._Ti>TVENTON)||(bps[4]._cnt>=30)))
;;;6839   		||
;;;6840   		((NUMIST>5)&&((bps[5]._Ti>TVENTON)||(bps[5]._cnt>=30)))
;;;6841   		||
;;;6842   		((NUMIST>6)&&((bps[6]._Ti>TVENTON)||(bps[6]._cnt>=30)))
;;;6843   		||
;;;6844   		((NUMIST>7)&&((bps[7]._Ti>TVENTON)||(bps[7]._cnt>=30)))
;;;6845   		)
;;;6846   		{
;;;6847   		vent_stat=1;
;;;6848   		}
;;;6849   	else if(vent_stat==1)
;;;6850   		{
;;;6851   		if	(
;;;6852   			((!NUMIST)||((NUMIST)&&(bps[0]._Ti<TVENTOFF)&&(bps[0]._cnt<10)))
;;;6853   			&&
;;;6854   			((NUMIST<2)||((NUMIST>=2)&&(bps[1]._Ti<TVENTOFF)&&(bps[1]._cnt<10)))
;;;6855   			&&
;;;6856   			((NUMIST<3)||((NUMIST>=3)&&(bps[2]._Ti<TVENTOFF)&&(bps[2]._cnt<10)))
;;;6857   			&&
;;;6858   			((NUMIST<4)||((NUMIST>=4)&&(bps[3]._Ti<TVENTOFF)&&(bps[3]._cnt<10)))
;;;6859   			&&
;;;6860   			((NUMIST<5)||((NUMIST>=5)&&(bps[4]._Ti<TVENTOFF)&&(bps[4]._cnt<10)))
;;;6861   			&&
;;;6862   			((NUMIST<6)||((NUMIST>=6)&&(bps[5]._Ti<TVENTOFF)&&(bps[5]._cnt<10)))
;;;6863   			&&
;;;6864   			((NUMIST<7)||((NUMIST>=7)&&(bps[6]._Ti<TVENTOFF)&&(bps[6]._cnt<10)))
;;;6865   			&&
;;;6866   			((NUMIST<8)||((NUMIST>=8)&&(bps[7]._Ti<TVENTOFF)&&(bps[7]._cnt<10)))
;;;6867   			)
;;;6868   			{
;;;6869   			vent_stat=0;
;;;6870   			}
;;;6871   		}
;;;6872   	}
;;;6873   else if(RELEVENTSIGN==rvsEXT)
00409c  2801              CMP      r0,#1
00409e  d006              BEQ      |L1.16558|
;;;6874   	{
;;;6875   	if	(
;;;6876   		((NUMDT)&&((t_ext[0]>TVENTON)||(ND_EXT[0])))
;;;6877   		||
;;;6878   		((NUMDT>1)&&((t_ext[1]>TVENTON)||(ND_EXT[1])))
;;;6879   		||
;;;6880   		((NUMDT>2)&&((t_ext[2]>TVENTON)||(ND_EXT[2])))
;;;6881   		)
;;;6882   		{
;;;6883   		vent_stat=1;
;;;6884   		}
;;;6885   	else if(vent_stat==1)
;;;6886   		{
;;;6887   		if	(
;;;6888   			((!NUMDT)||((NUMDT)&&(t_ext[0]<TVENTOFF)&&(!ND_EXT[0])))
;;;6889   			&&
;;;6890   			((NUMDT<2)||((NUMDT>=2)&&(t_ext[1]<TVENTOFF)&&(!ND_EXT[1])))
;;;6891   			&&
;;;6892   			((NUMDT<3)||((NUMDT>=3)&&(t_ext[2]<TVENTOFF)&&(!ND_EXT[2])))
;;;6893   			)
;;;6894   			{
;;;6895   			vent_stat=0;
;;;6896   			}
;;;6897   		}
;;;6898   	}
;;;6899   else vent_stat=1;
0040a0  f04f0001          MOV      r0,#1
0040a4  7020              STRB     r0,[r4,#0]
                  |L1.16550|
;;;6900   }
0040a6  b007              ADD      sp,sp,#0x1c
0040a8  e096              B        |L1.16856|
                  |L1.16554|
0040aa  e097              B        |L1.16860|
                  |L1.16556|
0040ac  e0cd              B        |L1.16970|
                  |L1.16558|
0040ae  e190              B        |L1.17362|
                  |L1.16560|
                          DCD      TZNPN
                  |L1.16564|
                          DCD      UVNPN
                  |L1.16568|
                          DCD      speedChIsOn
                  |L1.16572|
                          DCD      speedChrgBlckStat
                  |L1.16576|
                          DCD      speedChTimeCnt
                  |L1.16580|
                          DCD      speedChrgTimeInHour
                  |L1.16584|
                          DCD      speedChrgAvtEn
                  |L1.16588|
                          DCD      load_U
                  |L1.16592|
                          DCD      u_necc
                  |L1.16596|
                          DCD      speedChrgDU
                  |L1.16600|
                          DCD      Ib_ips_termokompensat
                  |L1.16604|
                          DCD      IZMAX
                  |L1.16608|
                          DCD      speedChrgBlckSrc
                  |L1.16612|
                          DCD      speedChrgBlckLog
                  |L1.16616|
                          DCD      ||.bss||+0x400
                  |L1.16620|
                          DCD      speedChrgShowCnt
                  |L1.16624|
0040f0  20202020          DCB      "                    ",0
0040f4  20202020
0040f8  20202020
0040fc  20202020
004100  20202020
004104  00      
004105  00                DCB      0
004106  00                DCB      0
004107  00                DCB      0
                  |L1.16648|
004108  20202020          DCB      "     ",199,192,207,208,197,217,197,205,"!!!    ",0
00410c  20c7c0cf
004110  d0c5d9c5
004114  cd212121
004118  20202020
00411c  00      
00411d  00                DCB      0
00411e  00                DCB      0
00411f  00                DCB      0
                  |L1.16672|
004120  20202020          DCB      "       ",199,192,208,223,196,"        ",0
004124  202020c7
004128  c0d0dfc4
00412c  20202020
004130  20202020
004134  00      
004135  00                DCB      0
004136  00                DCB      0
004137  00                DCB      0
                  |L1.16696|
004138  20202020          DCB      "     ",211,209,202,206,208,197,205,205,219,201,"     ",0
00413c  20d3d1ca
004140  ced0c5cd
004144  cddbc920
004148  20202020
00414c  00      
00414d  00                DCB      0
00414e  00                DCB      0
00414f  00                DCB      0
                  |L1.16720|
004150  20202020          DCB      "    ",231,224,225,235,238,234,232,240,238,226,224,237,"!"
004154  e7e0e1eb
004158  eeeae8f0
00415c  eee2e0ed
004160  21      
004161  20202000          DCB      "   ",0
004165  00                DCB      0
004166  00                DCB      0
004167  00                DCB      0
                  |L1.16744|
004168  20202020          DCB      "       ",231,224,240,255,228,"        ",0
00416c  202020e7
004170  e0f0ffe4
004174  20202020
004178  20202020
00417c  00      
00417d  00                DCB      0
00417e  00                DCB      0
00417f  00                DCB      0
                  |L1.16768|
004180  20202020          DCB      "     ",211,241,234,238,240,229,237,237,251,233,"     ",0
004184  20d3f1ea
004188  eef0e5ed
00418c  edfbe920
004190  20202020
004194  00      
004195  00                DCB      0
004196  00                DCB      0
004197  00                DCB      0
                  |L1.16792|
                          DCD      ||area_number.21||
                  |L1.16796|
                          DCD      FORVARDBPSCHHOUR
                  |L1.16800|
                          DCD      NUMIST
                  |L1.16804|
                          DCD      U_OUT_KONTR_MAX
                  |L1.16808|
                          DCD      outVoltContrHndlCnt
                  |L1.16812|
                          DCD      outVoltContrHndlCnt_
                  |L1.16816|
                          DCD      U_OUT_KONTR_MIN
                  |L1.16820|
                          DCD      U_OUT_KONTR_DELAY
                  |L1.16824|
                          DCD      uout_av
                  |L1.16828|
                          DCD      USIGN
                  |L1.16832|
                          DCD      bSILENT
                  |L1.16836|
                          DCD      bps
                  |L1.16840|
                          DCD      TVENTMAX
                  |L1.16844|
                          DCD      RELEVENTSIGN
                  |L1.16848|
                          DCD      TVENTON
                  |L1.16852|
                          DCD      TVENTOFF
                  |L1.16856|
0041d8  e8bd8ff0          POP      {r4-r11,pc}
                  |L1.16860|
0041dc  4fa0              LDR      r7,|L1.17504|
0041de  f8df8284          LDR      r8,|L1.17508|
0041e2  f9b7000a          LDRSH    r0,[r7,#0xa]          ;6792
0041e6  7b3d              LDRB     r5,[r7,#0xc]          ;6792
0041e8  f9b76056          LDRSH    r6,[r7,#0x56]         ;6794
0041ec  f898c000          LDRB     r12,[r8,#0]           ;6791
0041f0  f8977058          LDRB     r7,[r7,#0x58]         ;6794
0041f4  f8988001          LDRB     r8,[r8,#1]            ;6794
0041f8  b133              CBZ      r3,|L1.16904|
0041fa  2b01              CMP      r3,#1                 ;6800
                  |L1.16892|
0041fc  f47faf53          BNE      |L1.16550|
004200  f1bc0f55          CMP      r12,#0x55             ;6802
004204  d116              BNE      |L1.16948|
004206  e011              B        |L1.16940|
                  |L1.16904|
004208  f1bc0f55          CMP      r12,#0x55             ;6791
00420c  d102              BNE      |L1.16916|
00420e  4288              CMP      r0,r1                 ;6792
004210  dc08              BGT      |L1.16932|
004212  b93d              CBNZ     r5,|L1.16932|
                  |L1.16916|
004214  f1b80f55          CMP      r8,#0x55              ;6794
004218  d1f0              BNE      |L1.16892|
00421a  428e              CMP      r6,r1                 ;6794
00421c  dc02              BGT      |L1.16932|
00421e  2f00              CMP      r7,#0                 ;6794
004220  f43faf41          BEQ      |L1.16550|
                  |L1.16932|
004224  f04f0001          MOV      r0,#1                 ;6797
004228  7020              STRB     r0,[r4,#0]            ;6797
                  |L1.16938|
00422a  e73c              B        |L1.16550|
                  |L1.16940|
00422c  4290              CMP      r0,r2                 ;6803
00422e  dafc              BGE      |L1.16938|
004230  2d00              CMP      r5,#0                 ;6803
004232  d1fa              BNE      |L1.16938|
                  |L1.16948|
004234  f1b80f55          CMP      r8,#0x55              ;6805
004238  d103              BNE      |L1.16962|
00423a  4296              CMP      r6,r2                 ;6805
00423c  daf5              BGE      |L1.16938|
00423e  2f00              CMP      r7,#0                 ;6805
004240  d1f3              BNE      |L1.16938|
                  |L1.16962|
004242  f04f0000          MOV      r0,#0                 ;6808
004246  7020              STRB     r0,[r4,#0]            ;6808
004248  e72d              B        |L1.16550|
                  |L1.16970|
00424a  4e88              LDR      r6,|L1.17516|
00424c  4886              LDR      r0,|L1.17512|
00424e  6ab5              LDR      r5,[r6,#0x28]         ;6830
004250  f9b00000          LDRSH    r0,[r0,#0]            ;6829  ; NUMIST
004254  78f6              LDRB     r6,[r6,#3]            ;6830
004256  b118              CBZ      r0,|L1.16992|
004258  428d              CMP      r5,r1                 ;6830
00425a  dc78              BGT      |L1.17230|
00425c  2e1e              CMP      r6,#0x1e              ;6830
00425e  d276              BCS      |L1.17230|
                  |L1.16992|
004260  f8dfc208          LDR      r12,|L1.17516|
004264  2801              CMP      r0,#1                 ;6832
004266  f8dc7084          LDR      r7,[r12,#0x84]        ;6832
00426a  f89cc05f          LDRB     r12,[r12,#0x5f]       ;6832
00426e  f8cdc018          STR      r12,[sp,#0x18]        ;6832
004272  dd06              BLE      |L1.17026|
004274  428f              CMP      r7,r1                 ;6832
004276  dc6a              BGT      |L1.17230|
004278  f8ddc018          LDR      r12,[sp,#0x18]        ;6832
00427c  f1bc0f1e          CMP      r12,#0x1e             ;6832
004280  d265              BCS      |L1.17230|
                  |L1.17026|
004282  f8dfc1e8          LDR      r12,|L1.17516|
004286  2802              CMP      r0,#2                 ;6834
004288  f8dc80e0          LDR      r8,[r12,#0xe0]        ;6834
00428c  f8cd8014          STR      r8,[sp,#0x14]         ;6834
004290  f89cc0bb          LDRB     r12,[r12,#0xbb]       ;6834
004294  f8cdc010          STR      r12,[sp,#0x10]        ;6834
004298  dd08              BLE      |L1.17068|
00429a  f8ddc014          LDR      r12,[sp,#0x14]        ;6834
00429e  458c              CMP      r12,r1                ;6834
0042a0  dc55              BGT      |L1.17230|
0042a2  f8ddc010          LDR      r12,[sp,#0x10]        ;6834
0042a6  f1bc0f1e          CMP      r12,#0x1e             ;6834
0042aa  d250              BCS      |L1.17230|
                  |L1.17068|
0042ac  f8dfc1bc          LDR      r12,|L1.17516|
0042b0  2803              CMP      r0,#3                 ;6836
0042b2  f8dc813c          LDR      r8,[r12,#0x13c]       ;6836
0042b6  f8cd800c          STR      r8,[sp,#0xc]          ;6836
0042ba  f89cc117          LDRB     r12,[r12,#0x117]      ;6836
0042be  f8cdc008          STR      r12,[sp,#8]           ;6836
0042c2  dd08              BLE      |L1.17110|
0042c4  f8ddc00c          LDR      r12,[sp,#0xc]         ;6836
0042c8  458c              CMP      r12,r1                ;6836
0042ca  dc40              BGT      |L1.17230|
0042cc  f8ddc008          LDR      r12,[sp,#8]           ;6836
0042d0  f1bc0f1e          CMP      r12,#0x1e             ;6836
0042d4  d23b              BCS      |L1.17230|
                  |L1.17110|
0042d6  f8df8194          LDR      r8,|L1.17516|
0042da  2804              CMP      r0,#4                 ;6838
0042dc  f8d8c198          LDR      r12,[r8,#0x198]       ;6838
0042e0  f8988173          LDRB     r8,[r8,#0x173]        ;6838
0042e4  f8cd8004          STR      r8,[sp,#4]            ;6838
0042e8  dd06              BLE      |L1.17144|
0042ea  458c              CMP      r12,r1                ;6838
0042ec  dc2f              BGT      |L1.17230|
0042ee  f8dd8004          LDR      r8,[sp,#4]            ;6838
0042f2  f1b80f1e          CMP      r8,#0x1e              ;6838
0042f6  d22a              BCS      |L1.17230|
                  |L1.17144|
0042f8  f8df9170          LDR      r9,|L1.17516|
0042fc  2805              CMP      r0,#5                 ;6840
0042fe  f8d981f4          LDR      r8,[r9,#0x1f4]        ;6840
004302  f89991cf          LDRB     r9,[r9,#0x1cf]        ;6840
004306  f8cd9000          STR      r9,[sp,#0]            ;6840
00430a  dd06              BLE      |L1.17178|
00430c  4588              CMP      r8,r1                 ;6840
00430e  dc1e              BGT      |L1.17230|
004310  f8dd9000          LDR      r9,[sp,#0]            ;6840
004314  f1b90f1e          CMP      r9,#0x1e              ;6840
004318  d219              BCS      |L1.17230|
                  |L1.17178|
00431a  f8dfa150          LDR      r10,|L1.17516|
00431e  2806              CMP      r0,#6                 ;6842
004320  f89ae22b          LDRB     lr,[r10,#0x22b]       ;6842
004324  f8da9250          LDR      r9,[r10,#0x250]       ;6842
004328  dd04              BLE      |L1.17204|
00432a  4589              CMP      r9,r1                 ;6842
00432c  dc0f              BGT      |L1.17230|
00432e  f1be0f1e          CMP      lr,#0x1e              ;6842
004332  d20c              BCS      |L1.17230|
                  |L1.17204|
004334  f8dfb134          LDR      r11,|L1.17516|
004338  2807              CMP      r0,#7                 ;6844
00433a  f8dba2ac          LDR      r10,[r11,#0x2ac]      ;6844
00433e  f89bb287          LDRB     r11,[r11,#0x287]      ;6844
004342  dd08              BLE      |L1.17238|
004344  458a              CMP      r10,r1                ;6844
004346  dc02              BGT      |L1.17230|
004348  f1bb0f1e          CMP      r11,#0x1e             ;6844
00434c  d303              BCC      |L1.17238|
                  |L1.17230|
00434e  f04f0001          MOV      r0,#1                 ;6847
004352  7020              STRB     r0,[r4,#0]            ;6847
                  |L1.17236|
004354  e6a7              B        |L1.16550|
                  |L1.17238|
004356  2b01              CMP      r3,#1                 ;6849
004358  d1fc              BNE      |L1.17236|
00435a  b118              CBZ      r0,|L1.17252|
00435c  4295              CMP      r5,r2                 ;6852
00435e  daf9              BGE      |L1.17236|
004360  2e0a              CMP      r6,#0xa               ;6852
004362  d2f7              BCS      |L1.17236|
                  |L1.17252|
004364  2802              CMP      r0,#2                 ;6854
004366  db04              BLT      |L1.17266|
004368  4297              CMP      r7,r2                 ;6854
00436a  daf3              BGE      |L1.17236|
00436c  9906              LDR      r1,[sp,#0x18]         ;6854
00436e  290a              CMP      r1,#0xa               ;6854
004370  d2f0              BCS      |L1.17236|
                  |L1.17266|
004372  2803              CMP      r0,#3                 ;6856
004374  db05              BLT      |L1.17282|
004376  9905              LDR      r1,[sp,#0x14]         ;6856
004378  4291              CMP      r1,r2                 ;6856
00437a  daeb              BGE      |L1.17236|
00437c  9904              LDR      r1,[sp,#0x10]         ;6856
00437e  290a              CMP      r1,#0xa               ;6856
004380  d2e8              BCS      |L1.17236|
                  |L1.17282|
004382  2804              CMP      r0,#4                 ;6858
004384  db05              BLT      |L1.17298|
004386  9903              LDR      r1,[sp,#0xc]          ;6858
004388  4291              CMP      r1,r2                 ;6858
00438a  dae3              BGE      |L1.17236|
00438c  9902              LDR      r1,[sp,#8]            ;6858
00438e  290a              CMP      r1,#0xa               ;6858
004390  d2e0              BCS      |L1.17236|
                  |L1.17298|
004392  2805              CMP      r0,#5                 ;6860
004394  db04              BLT      |L1.17312|
004396  4594              CMP      r12,r2                ;6860
004398  dadc              BGE      |L1.17236|
00439a  9901              LDR      r1,[sp,#4]            ;6860
00439c  290a              CMP      r1,#0xa               ;6860
00439e  d2d9              BCS      |L1.17236|
                  |L1.17312|
0043a0  2806              CMP      r0,#6                 ;6862
0043a2  db04              BLT      |L1.17326|
0043a4  4590              CMP      r8,r2                 ;6862
0043a6  dad5              BGE      |L1.17236|
0043a8  9900              LDR      r1,[sp,#0]            ;6862
0043aa  290a              CMP      r1,#0xa               ;6862
0043ac  d2d2              BCS      |L1.17236|
                  |L1.17326|
0043ae  2807              CMP      r0,#7                 ;6864
0043b0  db04              BLT      |L1.17340|
0043b2  4591              CMP      r9,r2                 ;6864
0043b4  dace              BGE      |L1.17236|
0043b6  f1be0f0a          CMP      lr,#0xa               ;6864
0043ba  d2cb              BCS      |L1.17236|
                  |L1.17340|
0043bc  2808              CMP      r0,#8                 ;6866
0043be  db04              BLT      |L1.17354|
0043c0  4592              CMP      r10,r2                ;6866
0043c2  dac7              BGE      |L1.17236|
0043c4  f1bb0f0a          CMP      r11,#0xa              ;6866
0043c8  d2c4              BCS      |L1.17236|
                  |L1.17354|
0043ca  f04f0000          MOV      r0,#0                 ;6869
0043ce  7020              STRB     r0,[r4,#0]            ;6869
                  |L1.17360|
0043d0  e669              B        |L1.16550|
                  |L1.17362|
0043d2  4827              LDR      r0,|L1.17520|
0043d4  4d27              LDR      r5,|L1.17524|
0043d6  4e28              LDR      r6,|L1.17528|
0043d8  f9b00000          LDRSH    r0,[r0,#0]            ;6875  ; NUMDT
0043dc  f9b55000          LDRSH    r5,[r5,#0]            ;6876
0043e0  6836              LDR      r6,[r6,#0]            ;6876
0043e2  b110              CBZ      r0,|L1.17386|
0043e4  428d              CMP      r5,r1                 ;6876
0043e6  dc1d              BGT      |L1.17444|
0043e8  b9e6              CBNZ     r6,|L1.17444|
                  |L1.17386|
0043ea  4f22              LDR      r7,|L1.17524|
0043ec  f8dfc088          LDR      r12,|L1.17528|
0043f0  2801              CMP      r0,#1                 ;6878
0043f2  f9b77002          LDRSH    r7,[r7,#2]            ;6878
0043f6  f8dcc004          LDR      r12,[r12,#4]          ;6878
0043fa  dd04              BLE      |L1.17414|
0043fc  428f              CMP      r7,r1                 ;6878
0043fe  dc11              BGT      |L1.17444|
004400  f1bc0f00          CMP      r12,#0                ;6878
004404  d10e              BNE      |L1.17444|
                  |L1.17414|
004406  f8df806c          LDR      r8,|L1.17524|
00440a  f8df906c          LDR      r9,|L1.17528|
00440e  2802              CMP      r0,#2                 ;6880
004410  f9b88004          LDRSH    r8,[r8,#4]            ;6880
004414  f8d99008          LDR      r9,[r9,#8]            ;6880
004418  dd08              BLE      |L1.17452|
00441a  4588              CMP      r8,r1                 ;6880
00441c  dc02              BGT      |L1.17444|
00441e  f1b90f00          CMP      r9,#0                 ;6880
004422  d003              BEQ      |L1.17452|
                  |L1.17444|
004424  f04f0001          MOV      r0,#1                 ;6883
004428  7020              STRB     r0,[r4,#0]            ;6883
00442a  e63c              B        |L1.16550|
                  |L1.17452|
00442c  2b01              CMP      r3,#1                 ;6885
00442e  d191              BNE      |L1.17236|
004430  b118              CBZ      r0,|L1.17466|
004432  4295              CMP      r5,r2                 ;6888
004434  da8e              BGE      |L1.17236|
004436  2e00              CMP      r6,#0                 ;6888
004438  d18c              BNE      |L1.17236|
                  |L1.17466|
00443a  2802              CMP      r0,#2                 ;6890
00443c  db04              BLT      |L1.17480|
00443e  4297              CMP      r7,r2                 ;6890
004440  da88              BGE      |L1.17236|
004442  f1bc0f00          CMP      r12,#0                ;6890
004446  d185              BNE      |L1.17236|
                  |L1.17480|
004448  2803              CMP      r0,#3                 ;6892
00444a  db04              BLT      |L1.17494|
00444c  4590              CMP      r8,r2                 ;6892
00444e  dabf              BGE      |L1.17360|
004450  f1b90f00          CMP      r9,#0                 ;6892
004454  d1bc              BNE      |L1.17360|
                  |L1.17494|
004456  f04f0000          MOV      r0,#0                 ;6895
00445a  7020              STRB     r0,[r4,#0]            ;6895
00445c  e623              B        |L1.16550|
;;;6901   
                          ENDP

00445e  0000              DCW      0x0000
                  |L1.17504|
                          DCD      bat
                  |L1.17508|
                          DCD      BAT_IS_ON
                  |L1.17512|
                          DCD      NUMIST
                  |L1.17516|
                          DCD      bps
                  |L1.17520|
                          DCD      NUMDT
                  |L1.17524|
                          DCD      t_ext
                  |L1.17528|
                          DCD      ND_EXT

                          AREA ||area_number.2||, CODE, READONLY, ALIGN=2

                          EXPORTAS ||area_number.2||, ||.text||
                  samokalibr_init PROC
;;;228    //-----------------------------------------------
;;;229    void ke_start(char in)
000000  4902              LDR      r1,|L2.12|
;;;230    {          
000002  f24060f9          MOV      r0,#0x6f9
;;;231    ke_start_stat=(enum_ke_start_stat)0;		 
000006  87c8              STRH     r0,[r1,#0x3e]
000008  4770              BX       lr
;;;232    
;;;233    if(spc_stat==spcVZ)ke_start_stat=kssNOT_VZ;
;;;234    else if(BAT_IS_ON[in]!=bisON)ke_start_stat=kssNOT_BAT;
;;;235    else if(bat[in]._av&(1<<0))ke_start_stat=kssNOT_BAT_AV;
;;;236    else if(bat[in]._temper_stat&(1<<1))ke_start_stat=kssNOT_BAT_AV_T;
;;;237    else if(bat[in]._av&(1<<1))ke_start_stat=kssNOT_BAT_AV_ASS;
;;;238    else if(bat[in]._Ib>IKB)ke_start_stat=kssNOT_BAT_ZAR;
;;;239    else if(bat[in]._Ib<-IKB)ke_start_stat=kssNOT_BAT_RAZR;
;;;240    else if((spc_stat==spcKE)&&(spc_bat==0))ke_start_stat=kssNOT_KE1;
;;;241    else if((spc_stat==spcKE)&&(spc_bat==1))ke_start_stat=kssNOT_KE2;
;;;242    else 
;;;243    	{
;;;244    
;;;245    	ke_start_stat=kssYES;
;;;246    
;;;247    	spc_stat=spcKE;
;;;248    	__ee_spc_stat=spcKE;
;;;249    	lc640_write_int(EE_SPC_STAT,__ee_spc_stat);
;;;250    	
;;;251    	spc_bat=in;
;;;252    	__ee_spc_bat=in;
;;;253    	lc640_write_int(EE_SPC_BAT,__ee_spc_bat);
;;;254    
;;;255    	bat[in]._zar_cnt_ke=0;
;;;256    	lc640_write_int(ADR_EE_BAT_ZAR_CNT_KE[in],0);
;;;257    	
;;;258    	spc_phase=0;
;;;259    	__ee_spc_phase=0;
;;;260    	lc640_write_int(EE_SPC_PHASE,__ee_spc_phase);
;;;261    
;;;262    	//ke_mem_hndl(in,lc640_read_int(ADR_EE_BAT_ZAR_CNT_KE[spc_bat]));
;;;263    
;;;264    		{					
;;;265    		signed short temp_temp;
;;;266    		signed char temp;
;;;267    		temp_temp=bat[in]._u_old[((bat_u_old_cnt+1)&0x07)]; 
;;;268    		    
;;;269    		temp=LPC_RTC->YEAR;
;;;270    		gran_char(&temp,1,99);
;;;271    		*((char*)(&(ke_date[0])))=temp;
;;;272    			
;;;273    		temp=LPC_RTC->MONTH;
;;;274    		gran_char(&temp,1,12);
;;;275    		*(((char*)(&(ke_date[0])))+1)=temp;
;;;276    		
;;;277    		temp=LPC_RTC->DOM;
;;;278    		gran_char(&temp,1,31);
;;;279    		*(((char*)(&(ke_date[0])))+2)=temp;			
;;;280    				
;;;281    		*(((char*)(&(ke_date[0])))+3)=*((char*)&temp_temp);
;;;282    		lc640_write_long(EE_SPC_KE_DATE0,ke_date[0]);
;;;283    
;;;284    		temp=LPC_RTC->HOUR;
;;;285    		gran_char(&temp,0,23);
;;;286    		*((char*)(&(ke_date[1])))=temp;
;;;287                   
;;;288    		temp=LPC_RTC->MIN;
;;;289    		gran_char(&temp,0,59);
;;;290    		*(((char*)(&(ke_date[1])))+1)=temp;
;;;291    	          
;;;292    		temp=LPC_RTC->SEC;
;;;293    		gran_char(&temp,0,59);
;;;294    		*(((char*)(&(ke_date[1])))+2)=temp;
;;;295    			
;;;296    		*(((char*)(&(ke_date[1])))+3)=*(((char*)&temp_temp)+1);
;;;297    		lc640_write_long(EE_SPC_KE_DATE1,ke_date[1]);
;;;298    		}
;;;299    
;;;300    	}
;;;301    }
;;;302    
                          ENDP

00000a  0000              DCW      0x0000
                  |L2.12|
                          DCD      ||area_number.21||

                          AREA ||area_number.3||, CODE, READONLY, ALIGN=2

                          EXPORTAS ||area_number.3||, ||.text||
                  adc_drv6 PROC
;;;228    //-----------------------------------------------
;;;229    void ke_start(char in)
000000  e92d41f0          PUSH     {r4-r8,lr}
;;;230    {          
000004  4c80              LDR      r4,|L3.520|
;;;231    ke_start_stat=(enum_ke_start_stat)0;		 
000006  8860              LDRH     r0,[r4,#2]  ; adc_self_ch_buff
000008  8821              LDRH     r1,[r4,#0]  ; adc_self_ch_buff
00000a  1a40              SUBS     r0,r0,r1
00000c  b200              SXTH     r0,r0
;;;232    
;;;233    if(spc_stat==spcVZ)ke_start_stat=kssNOT_VZ;
00000e  f7fffffe          BL       abs_pal
000012  1da5              ADDS     r5,r4,#6
000014  8028              STRH     r0,[r5,#0]
000016  88a0              LDRH     r0,[r4,#4]  ; adc_self_ch_buff
;;;234    else if(BAT_IS_ON[in]!=bisON)ke_start_stat=kssNOT_BAT;
000018  8861              LDRH     r1,[r4,#2]  ; adc_self_ch_buff
00001a  1a40              SUBS     r0,r0,r1
00001c  b200              SXTH     r0,r0
00001e  f7fffffe          BL       abs_pal
000022  8068              STRH     r0,[r5,#2]
000024  88a0              LDRH     r0,[r4,#4]  ; adc_self_ch_buff
;;;235    else if(bat[in]._av&(1<<0))ke_start_stat=kssNOT_BAT_AV;
;;;236    else if(bat[in]._temper_stat&(1<<1))ke_start_stat=kssNOT_BAT_AV_T;
;;;237    else if(bat[in]._av&(1<<1))ke_start_stat=kssNOT_BAT_AV_ASS;
;;;238    else if(bat[in]._Ib>IKB)ke_start_stat=kssNOT_BAT_ZAR;
;;;239    else if(bat[in]._Ib<-IKB)ke_start_stat=kssNOT_BAT_RAZR;
;;;240    else if((spc_stat==spcKE)&&(spc_bat==0))ke_start_stat=kssNOT_KE1;
;;;241    else if((spc_stat==spcKE)&&(spc_bat==1))ke_start_stat=kssNOT_KE2;
;;;242    else 
;;;243    	{
;;;244    
;;;245    	ke_start_stat=kssYES;
;;;246    
;;;247    	spc_stat=spcKE;
;;;248    	__ee_spc_stat=spcKE;
;;;249    	lc640_write_int(EE_SPC_STAT,__ee_spc_stat);
;;;250    	
;;;251    	spc_bat=in;
;;;252    	__ee_spc_bat=in;
;;;253    	lc640_write_int(EE_SPC_BAT,__ee_spc_bat);
;;;254    
;;;255    	bat[in]._zar_cnt_ke=0;
;;;256    	lc640_write_int(ADR_EE_BAT_ZAR_CNT_KE[in],0);
;;;257    	
;;;258    	spc_phase=0;
;;;259    	__ee_spc_phase=0;
;;;260    	lc640_write_int(EE_SPC_PHASE,__ee_spc_phase);
;;;261    
;;;262    	//ke_mem_hndl(in,lc640_read_int(ADR_EE_BAT_ZAR_CNT_KE[spc_bat]));
;;;263    
;;;264    		{					
;;;265    		signed short temp_temp;
;;;266    		signed char temp;
;;;267    		temp_temp=bat[in]._u_old[((bat_u_old_cnt+1)&0x07)]; 
;;;268    		    
;;;269    		temp=LPC_RTC->YEAR;
;;;270    		gran_char(&temp,1,99);
;;;271    		*((char*)(&(ke_date[0])))=temp;
;;;272    			
;;;273    		temp=LPC_RTC->MONTH;
;;;274    		gran_char(&temp,1,12);
;;;275    		*(((char*)(&(ke_date[0])))+1)=temp;
;;;276    		
;;;277    		temp=LPC_RTC->DOM;
;;;278    		gran_char(&temp,1,31);
;;;279    		*(((char*)(&(ke_date[0])))+2)=temp;			
;;;280    				
;;;281    		*(((char*)(&(ke_date[0])))+3)=*((char*)&temp_temp);
;;;282    		lc640_write_long(EE_SPC_KE_DATE0,ke_date[0]);
;;;283    
;;;284    		temp=LPC_RTC->HOUR;
;;;285    		gran_char(&temp,0,23);
;;;286    		*((char*)(&(ke_date[1])))=temp;
;;;287                   
;;;288    		temp=LPC_RTC->MIN;
;;;289    		gran_char(&temp,0,59);
;;;290    		*(((char*)(&(ke_date[1])))+1)=temp;
;;;291    	          
;;;292    		temp=LPC_RTC->SEC;
;;;293    		gran_char(&temp,0,59);
;;;294    		*(((char*)(&(ke_date[1])))+2)=temp;
;;;295    			
;;;296    		*(((char*)(&(ke_date[1])))+3)=*(((char*)&temp_temp)+1);
;;;297    		lc640_write_long(EE_SPC_KE_DATE1,ke_date[1]);
;;;298    		}
;;;299    
;;;300    	}
;;;301    }
000026  8821              LDRH     r1,[r4,#0]  ; adc_self_ch_buff
000028  1a40              SUBS     r0,r0,r1
00002a  b200              SXTH     r0,r0                 ;233
00002c  f7fffffe          BL       abs_pal
000030  80a8              STRH     r0,[r5,#4]            ;235
000032  f44f7196          MOV      r1,#0x12c             ;235
000036  f1a4069a          SUB      r6,r4,#0x9a           ;235
00003a  4288              CMP      r0,r1                 ;235
00003c  da02              BGE      |L3.68|
00003e  88a0              LDRH     r0,[r4,#4]            ;235  ; adc_self_ch_buff
000040  8570              STRH     r0,[r6,#0x2a]         ;235
000042  e00c              B        |L3.94|
                  |L3.68|
000044  f9b50002          LDRSH    r0,[r5,#2]            ;235  ; adc_self_ch_disp
000048  4288              CMP      r0,r1                 ;235
00004a  da02              BGE      |L3.82|
00004c  8860              LDRH     r0,[r4,#2]            ;236  ; adc_self_ch_buff
00004e  8570              STRH     r0,[r6,#0x2a]         ;236
000050  e005              B        |L3.94|
                  |L3.82|
000052  f9b50000          LDRSH    r0,[r5,#0]            ;236  ; adc_self_ch_disp
000056  4288              CMP      r0,r1                 ;236
000058  da01              BGE      |L3.94|
00005a  8820              LDRH     r0,[r4,#0]  ; adc_self_ch_buff
00005c  8570              STRH     r0,[r6,#0x2a]         ;237
                  |L3.94|
00005e  78b7              LDRB     r7,[r6,#2]            ;237  ; adc_ch_net
000060  2200              MOVS     r2,#0                 ;237
000062  b3f7              CBZ      r7,|L3.226|
000064  7973              LDRB     r3,[r6,#5]            ;237  ; adc_window_flag
000066  4869              LDR      r0,|L3.524|
000068  b18b              CBZ      r3,|L3.142|
00006a  f9b6102a          LDRSH    r1,[r6,#0x2a]         ;238  ; adc_result
00006e  6804              LDR      r4,[r0,#0]            ;238  ; main_power_buffer
000070  eb0404a1          ADD      r4,r4,r1,ASR #2       ;238
000074  6004              STR      r4,[r0,#0]            ;238  ; main_power_buffer
000076  6844              LDR      r4,[r0,#4]            ;238  ; main_power_buffer
000078  eb0404a1          ADD      r4,r4,r1,ASR #2       ;238
00007c  6044              STR      r4,[r0,#4]  ; main_power_buffer
00007e  6884              LDR      r4,[r0,#8]            ;239  ; main_power_buffer
000080  eb0404a1          ADD      r4,r4,r1,ASR #2       ;239
000084  6084              STR      r4,[r0,#8]            ;239  ; main_power_buffer
000086  68c4              LDR      r4,[r0,#0xc]          ;239  ; main_power_buffer
000088  eb0401a1          ADD      r1,r4,r1,ASR #2       ;239
00008c  60c1              STR      r1,[r0,#0xc]          ;231  ; main_power_buffer
                  |L3.142|
00008e  f9b6102a          LDRSH    r1,[r6,#0x2a]         ;240  ; adc_result
000092  2964              CMP      r1,#0x64              ;240
000094  da04              BGE      |L3.160|
000096  8df1              LDRH     r1,[r6,#0x2e]         ;241  ; adc_zero_cnt
000098  f1010101          ADD      r1,r1,#1              ;241
00009c  85f1              STRH     r1,[r6,#0x2e]         ;240
00009e  e000              B        |L3.162|
                  |L3.160|
0000a0  85f2              STRH     r2,[r6,#0x2e]         ;240
                  |L3.162|
0000a2  f9b6402e          LDRSH    r4,[r6,#0x2e]  ; adc_zero_cnt
0000a6  f44f61fa          MOV      r1,#0x7d0             ;241
0000aa  428c              CMP      r4,r1                 ;245
0000ac  db05              BLT      |L3.186|
0000ae  85f1              STRH     r1,[r6,#0x2e]         ;247
0000b0  6002              STR      r2,[r0,#0]            ;248  ; main_power_buffer
0000b2  6042              STR      r2,[r0,#4]            ;248  ; main_power_buffer
0000b4  6082              STR      r2,[r0,#8]            ;249  ; main_power_buffer
0000b6  60c2              STR      r2,[r0,#0xc]          ;249  ; main_power_buffer
0000b8  8532              STRH     r2,[r6,#0x28]         ;249
                  |L3.186|
0000ba  8df1              LDRH     r1,[r6,#0x2e]         ;249  ; adc_zero_cnt
0000bc  2905              CMP      r1,#5                 ;249
0000be  d14f              BNE      |L3.352|
0000c0  b1bb              CBZ      r3,|L3.242|
0000c2  8db1              LDRH     r1,[r6,#0x2c]         ;252  ; adc_gorb_cnt
0000c4  f1010101          ADD      r1,r1,#1              ;253
0000c8  b209              SXTH     r1,r1                 ;253
0000ca  85b1              STRH     r1,[r6,#0x2c]         ;253
0000cc  f5b17f00          CMP      r1,#0x200             ;253
0000d0  db00              BLT      |L3.212|
0000d2  85b2              STRH     r2,[r6,#0x2c]         ;256
                  |L3.212|
0000d4  f9b6102c          LDRSH    r1,[r6,#0x2c]         ;256  ; adc_gorb_cnt
0000d8  064c              LSLS     r4,r1,#25             ;256
0000da  d10a              BNE      |L3.242|
0000dc  ea4f11e1          ASR      r1,r1,#7              ;258
0000e0  e000              B        |L3.228|
                  |L3.226|
0000e2  e015              B        |L3.272|
                  |L3.228|
0000e4  f8504021          LDR      r4,[r0,r1,LSL #2]     ;260
0000e8  ea4f2424          ASR      r4,r4,#8              ;260
0000ec  8534              STRH     r4,[r6,#0x28]         ;267
0000ee  f8402021          STR      r2,[r0,r1,LSL #2]     ;267
                  |L3.242|
0000f2  f9b60030          LDRSH    r0,[r6,#0x30]         ;267  ; adc_window_cnt
0000f6  2896              CMP      r0,#0x96              ;267
0000f8  dd01              BLE      |L3.254|
0000fa  b103              CBZ      r3,|L3.254|
0000fc  7172              STRB     r2,[r6,#5]            ;267
                  |L3.254|
0000fe  381f              SUBS     r0,r0,#0x1f           ;267
000100  2827              CMP      r0,#0x27              ;269
000102  d22d              BCS      |L3.352|
000104  7970              LDRB     r0,[r6,#5]            ;269  ; adc_window_flag
000106  bb58              CBNZ     r0,|L3.352|
000108  f04f0001          MOV      r0,#1                 ;270
00010c  7170              STRB     r0,[r6,#5]            ;270
00010e  e027              B        |L3.352|
                  |L3.272|
000110  483f              LDR      r0,|L3.528|
000112  78f5              LDRB     r5,[r6,#3]            ;270  ; adc_ch
000114  7933              LDRB     r3,[r6,#4]            ;271  ; adc_ch_cnt
000116  eb001485          ADD      r4,r0,r5,LSL #6       ;271
00011a  f9b6102a          LDRSH    r1,[r6,#0x2a]         ;271  ; adc_result
00011e  f8441023          STR      r1,[r4,r3,LSL #2]     ;273
000122  0798              LSLS     r0,r3,#30             ;274
000124  d10f              BNE      |L3.326|
000126  4601              MOV      r1,r0                 ;274
                  |L3.296|
000128  f854c020          LDR      r12,[r4,r0,LSL #2]    ;274
00012c  4461              ADD      r1,r1,r12             ;275
00012e  f1000001          ADD      r0,r0,#1              ;275
000132  b2c0              UXTB     r0,r0                 ;277
000134  2810              CMP      r0,#0x10              ;277
000136  d3f7              BCC      |L3.296|
000138  ea4f1021          ASR      r0,r1,#4              ;278
00013c  4933              LDR      r1,|L3.524|
00013e  f1a10120          SUB      r1,r1,#0x20           ;278
000142  f8210015          STRH     r0,[r1,r5,LSL #1]     ;279
                  |L3.326|
000146  1c6d              ADDS     r5,r5,#1              ;281
000148  b2e8              UXTB     r0,r5                 ;281
00014a  70f0              STRB     r0,[r6,#3]            ;281
00014c  2810              CMP      r0,#0x10              ;282
00014e  d307              BCC      |L3.352|
000150  70f2              STRB     r2,[r6,#3]            ;282
000152  f1030301          ADD      r3,r3,#1              ;282
000156  b2d8              UXTB     r0,r3                 ;284
000158  7130              STRB     r0,[r6,#4]            ;284
00015a  2810              CMP      r0,#0x10              ;285
00015c  d300              BCC      |L3.352|
00015e  7132              STRB     r2,[r6,#4]            ;285
                  |L3.352|
000160  7072              STRB     r2,[r6,#1]            ;285
000162  f1070701          ADD      r7,r7,#1              ;285
000166  f0070001          AND      r0,r7,#1              ;286
00016a  70b0              STRB     r0,[r6,#2]            ;288
00016c  4a29              LDR      r2,|L3.532|
00016e  b130              CBZ      r0,|L3.382|
000170  6810              LDR      r0,[r2,#0]            ;289
000172  f02000ff          BIC      r0,r0,#0xff           ;289
000176  f1000004          ADD      r0,r0,#4              ;289
00017a  6010              STR      r0,[r2,#0]            ;290
00017c  e03d              B        |L3.506|
                  |L3.382|
00017e  78f1              LDRB     r1,[r6,#3]            ;292  ; adc_ch
000180  0708              LSLS     r0,r1,#28             ;292
000182  d406              BMI      |L3.402|
000184  6810              LDR      r0,[r2,#0]            ;293
000186  f02000ff          BIC      r0,r0,#0xff           ;293
00018a  f1000001          ADD      r0,r0,#1              ;293
00018e  6010              STR      r0,[r2,#0]            ;294
000190  e005              B        |L3.414|
                  |L3.402|
000192  6810              LDR      r0,[r2,#0]            ;296
000194  f02000ff          BIC      r0,r0,#0xff           ;296
000198  f1000002          ADD      r0,r0,#2              ;297
00019c  6010              STR      r0,[r2,#0]            ;297
                  |L3.414|
00019e  481e              LDR      r0,|L3.536|
0001a0  6803              LDR      r3,[r0,#0]            ;297
0001a2  f0435380          ORR      r3,r3,#0x10000000
0001a6  6003              STR      r3,[r0,#0]            ;241
0001a8  6a03              LDR      r3,[r0,#0x20]         ;241
0001aa  f0434380          ORR      r3,r3,#0x40000000     ;241
0001ae  6203              STR      r3,[r0,#0x20]
0001b0  6e03              LDR      r3,[r0,#0x60]
0001b2  f0436380          ORR      r3,r3,#0x4000000
0001b6  6603              STR      r3,[r0,#0x60]
0001b8  07cb              LSLS     r3,r1,#31
0001ba  d00a              BEQ      |L3.466|
0001bc  6943              LDR      r3,[r0,#0x14]
0001be  f0435380          ORR      r3,r3,#0x10000000
0001c2  6143              STR      r3,[r0,#0x14]
                  |L3.452|
0001c4  078b              LSLS     r3,r1,#30
0001c6  d409              BMI      |L3.476|
0001c8  6b43              LDR      r3,[r0,#0x34]
0001ca  f0234380          BIC      r3,r3,#0x40000000
0001ce  6343              STR      r3,[r0,#0x34]
0001d0  e008              B        |L3.484|
                  |L3.466|
0001d2  6943              LDR      r3,[r0,#0x14]
0001d4  f0235380          BIC      r3,r3,#0x10000000
0001d8  6143              STR      r3,[r0,#0x14]
0001da  e7f3              B        |L3.452|
                  |L3.476|
0001dc  6b43              LDR      r3,[r0,#0x34]
0001de  f0434380          ORR      r3,r3,#0x40000000
0001e2  6343              STR      r3,[r0,#0x34]
                  |L3.484|
0001e4  0749              LSLS     r1,r1,#29
0001e6  d404              BMI      |L3.498|
0001e8  6f41              LDR      r1,[r0,#0x74]
0001ea  f0216180          BIC      r1,r1,#0x4000000
0001ee  6741              STR      r1,[r0,#0x74]
0001f0  e003              B        |L3.506|
                  |L3.498|
0001f2  6f41              LDR      r1,[r0,#0x74]
0001f4  f0416180          ORR      r1,r1,#0x4000000
0001f8  6741              STR      r1,[r0,#0x74]
                  |L3.506|
0001fa  6810              LDR      r0,[r2,#0]
0001fc  f0407080          ORR      r0,r0,#0x1000000
000200  6010              STR      r0,[r2,#0]
000202  e8bd81f0          POP      {r4-r8,pc}
;;;302    
                          ENDP

000206  0000              DCW      0x0000
                  |L3.520|
                          DCD      ||area_number.21||+0x9a
                  |L3.524|
                          DCD      ||.bss||+0x420
                  |L3.528|
                          DCD      ||.bss||
                  |L3.532|
                          DCD      0x40034000
                  |L3.536|
                          DCD      0x2009c000

                          AREA ||area_number.4||, CODE, READONLY, ALIGN=2

                          EXPORTAS ||area_number.4||, ||.text||
                  inv_drv PROC
;;;228    //-----------------------------------------------
;;;229    void ke_start(char in)
000000  b570              PUSH     {r4-r6,lr}
;;;230    {          
000002  4604              MOV      r4,r0
000004  f04f0207          MOV      r2,#7
;;;231    ke_start_stat=(enum_ke_start_stat)0;		 
000008  f04f0101          MOV      r1,#1
00000c  48a4              LDR      r0,|L4.672|
;;;232    
;;;233    if(spc_stat==spcVZ)ke_start_stat=kssNOT_VZ;
00000e  f7fffffe          BL       gran_char
000012  48a4              LDR      r0,|L4.676|
000014  eb040144          ADD      r1,r4,r4,LSL #1
;;;234    else if(BAT_IS_ON[in]!=bisON)ke_start_stat=kssNOT_BAT;
000018  eb001541          ADD      r5,r0,r1,LSL #5
00001c  f8950047          LDRB     r0,[r5,#0x47]
000020  f8951046          LDRB     r1,[r5,#0x46]
000024  ea800001          EOR      r0,r0,r1
;;;235    else if(bat[in]._av&(1<<0))ke_start_stat=kssNOT_BAT_AV;
;;;236    else if(bat[in]._temper_stat&(1<<1))ke_start_stat=kssNOT_BAT_AV_T;
;;;237    else if(bat[in]._av&(1<<1))ke_start_stat=kssNOT_BAT_AV_ASS;
;;;238    else if(bat[in]._Ib>IKB)ke_start_stat=kssNOT_BAT_ZAR;
;;;239    else if(bat[in]._Ib<-IKB)ke_start_stat=kssNOT_BAT_RAZR;
;;;240    else if((spc_stat==spcKE)&&(spc_bat==0))ke_start_stat=kssNOT_KE1;
;;;241    else if((spc_stat==spcKE)&&(spc_bat==1))ke_start_stat=kssNOT_KE2;
;;;242    else 
;;;243    	{
;;;244    
;;;245    	ke_start_stat=kssYES;
;;;246    
;;;247    	spc_stat=spcKE;
;;;248    	__ee_spc_stat=spcKE;
;;;249    	lc640_write_int(EE_SPC_STAT,__ee_spc_stat);
;;;250    	
;;;251    	spc_bat=in;
;;;252    	__ee_spc_bat=in;
;;;253    	lc640_write_int(EE_SPC_BAT,__ee_spc_bat);
;;;254    
;;;255    	bat[in]._zar_cnt_ke=0;
;;;256    	lc640_write_int(ADR_EE_BAT_ZAR_CNT_KE[in],0);
;;;257    	
;;;258    	spc_phase=0;
;;;259    	__ee_spc_phase=0;
;;;260    	lc640_write_int(EE_SPC_PHASE,__ee_spc_phase);
;;;261    
;;;262    	//ke_mem_hndl(in,lc640_read_int(ADR_EE_BAT_ZAR_CNT_KE[spc_bat]));
;;;263    
;;;264    		{					
;;;265    		signed short temp_temp;
;;;266    		signed char temp;
;;;267    		temp_temp=bat[in]._u_old[((bat_u_old_cnt+1)&0x07)]; 
;;;268    		    
;;;269    		temp=LPC_RTC->YEAR;
;;;270    		gran_char(&temp,1,99);
;;;271    		*((char*)(&(ke_date[0])))=temp;
;;;272    			
;;;273    		temp=LPC_RTC->MONTH;
;;;274    		gran_char(&temp,1,12);
;;;275    		*(((char*)(&(ke_date[0])))+1)=temp;
;;;276    		
;;;277    		temp=LPC_RTC->DOM;
;;;278    		gran_char(&temp,1,31);
;;;279    		*(((char*)(&(ke_date[0])))+2)=temp;			
;;;280    				
;;;281    		*(((char*)(&(ke_date[0])))+3)=*((char*)&temp_temp);
;;;282    		lc640_write_long(EE_SPC_KE_DATE0,ke_date[0]);
;;;283    
;;;284    		temp=LPC_RTC->HOUR;
;;;285    		gran_char(&temp,0,23);
;;;286    		*((char*)(&(ke_date[1])))=temp;
;;;287                   
;;;288    		temp=LPC_RTC->MIN;
;;;289    		gran_char(&temp,0,59);
;;;290    		*(((char*)(&(ke_date[1])))+1)=temp;
;;;291    	          
;;;292    		temp=LPC_RTC->SEC;
;;;293    		gran_char(&temp,0,59);
;;;294    		*(((char*)(&(ke_date[1])))+2)=temp;
;;;295    			
;;;296    		*(((char*)(&(ke_date[1])))+3)=*(((char*)&temp_temp)+1);
;;;297    		lc640_write_long(EE_SPC_KE_DATE1,ke_date[1]);
;;;298    		}
;;;299    
;;;300    	}
;;;301    }
000028  4a9f              LDR      r2,|L4.680|
00002a  b100              CBZ      r0,|L4.46|
00002c  7050              STRB     r0,[r2,#1]
                  |L4.46|
00002e  ea010100          AND      r1,r1,r0              ;235
000032  b101              CBZ      r1,|L4.54|
000034  7091              STRB     r1,[r2,#2]            ;235
                  |L4.54|
000036  ea000301          AND      r3,r0,r1              ;235
00003a  07db              LSLS     r3,r3,#31             ;235
00003c  d027              BEQ      |L4.142|
00003e  78d0              LDRB     r0,[r2,#3]            ;235  ; plazma_inv
000040  f1000001          ADD      r0,r0,#1              ;235
000044  70d0              STRB     r0,[r2,#3]            ;235
000046  b134              CBZ      r4,|L4.86|
000048  2c01              CMP      r4,#1                 ;235
00004a  d00b              BEQ      |L4.100|
00004c  2c02              CMP      r4,#2                 ;236
00004e  d010              BEQ      |L4.114|
000050  2c03              CMP      r4,#3                 ;236
000052  d015              BEQ      |L4.128|
000054  e120              B        |L4.664|
                  |L4.86|
000056  2301              MOVS     r3,#1                 ;236
000058  461a              MOV      r2,r3                 ;236
00005a  210e              MOVS     r1,#0xe
00005c  a093              ADR      r0,|L4.684|
00005e  f7fffffe          BL       snmp_trap_send
000062  e119              B        |L4.664|
                  |L4.100|
000064  2301              MOVS     r3,#1                 ;237
000066  2202              MOVS     r2,#2
000068  210e              MOVS     r1,#0xe               ;238
00006a  a097              ADR      r0,|L4.712|
00006c  f7fffffe          BL       snmp_trap_send
000070  e112              B        |L4.664|
                  |L4.114|
000072  2301              MOVS     r3,#1                 ;238
000074  2203              MOVS     r2,#3                 ;238
000076  210e              MOVS     r1,#0xe               ;238
000078  a09a              ADR      r0,|L4.740|
00007a  f7fffffe          BL       snmp_trap_send
00007e  e10b              B        |L4.664|
                  |L4.128|
000080  2301              MOVS     r3,#1                 ;239
000082  2204              MOVS     r2,#4                 ;239
000084  210e              MOVS     r1,#0xe               ;239
000086  a09e              ADR      r0,|L4.768|
000088  f7fffffe          BL       snmp_trap_send
00008c  e104              B        |L4.664|
                  |L4.142|
00008e  0783              LSLS     r3,r0,#30             ;240
000090  d529              BPL      |L4.230|
000092  078b              LSLS     r3,r1,#30             ;240
000094  d527              BPL      |L4.230|
000096  78d0              LDRB     r0,[r2,#3]            ;241  ; plazma_inv
000098  f1000001          ADD      r0,r0,#1              ;241
00009c  70d0              STRB     r0,[r2,#3]            ;240
00009e  b134              CBZ      r4,|L4.174|
0000a0  2c01              CMP      r4,#1                 ;240
0000a2  d00b              BEQ      |L4.188|
0000a4  2c02              CMP      r4,#2                 ;241
0000a6  d010              BEQ      |L4.202|
0000a8  2c03              CMP      r4,#3                 ;245
0000aa  d015              BEQ      |L4.216|
0000ac  e0f4              B        |L4.664|
                  |L4.174|
0000ae  2302              MOVS     r3,#2                 ;247
0000b0  2201              MOVS     r2,#1                 ;248
0000b2  210e              MOVS     r1,#0xe               ;248
0000b4  a099              ADR      r0,|L4.796|
0000b6  f7fffffe          BL       snmp_trap_send
0000ba  e0ed              B        |L4.664|
                  |L4.188|
0000bc  2302              MOVS     r3,#2                 ;249
0000be  461a              MOV      r2,r3                 ;251
0000c0  210e              MOVS     r1,#0xe               ;252
0000c2  a09d              ADR      r0,|L4.824|
0000c4  f7fffffe          BL       snmp_trap_send
0000c8  e0e6              B        |L4.664|
                  |L4.202|
0000ca  2302              MOVS     r3,#2                 ;253
0000cc  2203              MOVS     r2,#3                 ;253
0000ce  210e              MOVS     r1,#0xe               ;255
0000d0  a0a0              ADR      r0,|L4.852|
0000d2  f7fffffe          BL       snmp_trap_send
0000d6  e0df              B        |L4.664|
                  |L4.216|
0000d8  2302              MOVS     r3,#2                 ;256
0000da  2204              MOVS     r2,#4                 ;256
0000dc  210e              MOVS     r1,#0xe               ;258
0000de  a0a4              ADR      r0,|L4.880|
0000e0  f7fffffe          BL       snmp_trap_send
0000e4  e0d8              B        |L4.664|
                  |L4.230|
0000e6  0743              LSLS     r3,r0,#29             ;260
0000e8  d529              BPL      |L4.318|
0000ea  074b              LSLS     r3,r1,#29             ;260
0000ec  d527              BPL      |L4.318|
0000ee  78d0              LDRB     r0,[r2,#3]            ;267  ; plazma_inv
0000f0  f1000001          ADD      r0,r0,#1              ;267
0000f4  70d0              STRB     r0,[r2,#3]            ;267
0000f6  b134              CBZ      r4,|L4.262|
0000f8  2c01              CMP      r4,#1                 ;267
0000fa  d00b              BEQ      |L4.276|
0000fc  2c02              CMP      r4,#2                 ;267
0000fe  d010              BEQ      |L4.290|
000100  2c03              CMP      r4,#3                 ;269
000102  d015              BEQ      |L4.304|
000104  e0c8              B        |L4.664|
                  |L4.262|
000106  2303              MOVS     r3,#3                 ;270
000108  2201              MOVS     r2,#1                 ;270
00010a  210e              MOVS     r1,#0xe               ;270
00010c  a09f              ADR      r0,|L4.908|
00010e  f7fffffe          BL       snmp_trap_send
000112  e0c1              B        |L4.664|
                  |L4.276|
000114  2303              MOVS     r3,#3                 ;271
000116  2202              MOVS     r2,#2                 ;271
000118  210e              MOVS     r1,#0xe               ;271
00011a  a0a3              ADR      r0,|L4.936|
00011c  f7fffffe          BL       snmp_trap_send
000120  e0ba              B        |L4.664|
                  |L4.290|
000122  2303              MOVS     r3,#3                 ;274
000124  461a              MOV      r2,r3                 ;274
000126  210e              MOVS     r1,#0xe               ;274
000128  a0a6              ADR      r0,|L4.964|
00012a  f7fffffe          BL       snmp_trap_send
00012e  e0b3              B        |L4.664|
                  |L4.304|
000130  2303              MOVS     r3,#3                 ;275
000132  2204              MOVS     r2,#4                 ;277
000134  210e              MOVS     r1,#0xe               ;277
000136  a0aa              ADR      r0,|L4.992|
000138  f7fffffe          BL       snmp_trap_send
00013c  e0ac              B        |L4.664|
                  |L4.318|
00013e  0703              LSLS     r3,r0,#28             ;278
000140  d529              BPL      |L4.406|
000142  070b              LSLS     r3,r1,#28             ;279
000144  d527              BPL      |L4.406|
000146  78d0              LDRB     r0,[r2,#3]            ;281  ; plazma_inv
000148  f1000001          ADD      r0,r0,#1              ;281
00014c  70d0              STRB     r0,[r2,#3]            ;282
00014e  b134              CBZ      r4,|L4.350|
000150  2c01              CMP      r4,#1                 ;282
000152  d00b              BEQ      |L4.364|
000154  2c02              CMP      r4,#2                 ;282
000156  d010              BEQ      |L4.378|
000158  2c03              CMP      r4,#3                 ;284
00015a  d015              BEQ      |L4.392|
00015c  e09c              B        |L4.664|
                  |L4.350|
00015e  2304              MOVS     r3,#4                 ;285
000160  2201              MOVS     r2,#1                 ;285
000162  210e              MOVS     r1,#0xe               ;285
000164  a0a5              ADR      r0,|L4.1020|
000166  f7fffffe          BL       snmp_trap_send
00016a  e095              B        |L4.664|
                  |L4.364|
00016c  2304              MOVS     r3,#4                 ;288
00016e  2202              MOVS     r2,#2                 ;289
000170  210e              MOVS     r1,#0xe               ;289
000172  a0ab              ADR      r0,|L4.1056|
000174  f7fffffe          BL       snmp_trap_send
000178  e08e              B        |L4.664|
                  |L4.378|
00017a  2304              MOVS     r3,#4                 ;290
00017c  2203              MOVS     r2,#3                 ;290
00017e  210e              MOVS     r1,#0xe               ;292
000180  a0b0              ADR      r0,|L4.1092|
000182  f7fffffe          BL       snmp_trap_send
000186  e087              B        |L4.664|
                  |L4.392|
000188  2304              MOVS     r3,#4                 ;293
00018a  461a              MOV      r2,r3                 ;293
00018c  210e              MOVS     r1,#0xe               ;294
00018e  a0b6              ADR      r0,|L4.1128|
000190  f7fffffe          BL       snmp_trap_send
000194  e080              B        |L4.664|
                  |L4.406|
000196  06c3              LSLS     r3,r0,#27             ;296
000198  d529              BPL      |L4.494|
00019a  06cb              LSLS     r3,r1,#27             ;297
00019c  d527              BPL      |L4.494|
00019e  78d0              LDRB     r0,[r2,#3]            ;297  ; plazma_inv
0001a0  f1000001          ADD      r0,r0,#1              ;297
0001a4  70d0              STRB     r0,[r2,#3]
0001a6  b134              CBZ      r4,|L4.438|
0001a8  2c01              CMP      r4,#1                 ;241
0001aa  d00b              BEQ      |L4.452|
0001ac  2c02              CMP      r4,#2
0001ae  d010              BEQ      |L4.466|
0001b0  2c03              CMP      r4,#3
0001b2  d015              BEQ      |L4.480|
0001b4  e070              B        |L4.664|
                  |L4.438|
0001b6  2305              MOVS     r3,#5
0001b8  2201              MOVS     r2,#1
0001ba  210e              MOVS     r1,#0xe
0001bc  a0b3              ADR      r0,|L4.1164|
0001be  f7fffffe          BL       snmp_trap_send
0001c2  e069              B        |L4.664|
                  |L4.452|
0001c4  2305              MOVS     r3,#5
0001c6  2202              MOVS     r2,#2
0001c8  210e              MOVS     r1,#0xe
0001ca  a0b9              ADR      r0,|L4.1200|
0001cc  f7fffffe          BL       snmp_trap_send
0001d0  e062              B        |L4.664|
                  |L4.466|
0001d2  2305              MOVS     r3,#5
0001d4  2203              MOVS     r2,#3
0001d6  210e              MOVS     r1,#0xe
0001d8  a0be              ADR      r0,|L4.1236|
0001da  f7fffffe          BL       snmp_trap_send
0001de  e05b              B        |L4.664|
                  |L4.480|
0001e0  2305              MOVS     r3,#5
0001e2  2204              MOVS     r2,#4
0001e4  210e              MOVS     r1,#0xe
0001e6  a0c4              ADR      r0,|L4.1272|
0001e8  f7fffffe          BL       snmp_trap_send
0001ec  e054              B        |L4.664|
                  |L4.494|
0001ee  0683              LSLS     r3,r0,#26
0001f0  d529              BPL      |L4.582|
0001f2  068b              LSLS     r3,r1,#26
0001f4  d527              BPL      |L4.582|
0001f6  78d0              LDRB     r0,[r2,#3]  ; plazma_inv
0001f8  f1000001          ADD      r0,r0,#1
0001fc  70d0              STRB     r0,[r2,#3]
0001fe  b134              CBZ      r4,|L4.526|
000200  2c01              CMP      r4,#1
000202  d00b              BEQ      |L4.540|
000204  2c02              CMP      r4,#2
000206  d010              BEQ      |L4.554|
000208  2c03              CMP      r4,#3
00020a  d015              BEQ      |L4.568|
00020c  e044              B        |L4.664|
                  |L4.526|
00020e  2306              MOVS     r3,#6
000210  2201              MOVS     r2,#1
000212  210e              MOVS     r1,#0xe
000214  a0c1              ADR      r0,|L4.1308|
000216  f7fffffe          BL       snmp_trap_send
00021a  e03d              B        |L4.664|
                  |L4.540|
00021c  2306              MOVS     r3,#6
00021e  2202              MOVS     r2,#2
000220  210e              MOVS     r1,#0xe
000222  a0c7              ADR      r0,|L4.1344|
000224  f7fffffe          BL       snmp_trap_send
000228  e036              B        |L4.664|
                  |L4.554|
00022a  2306              MOVS     r3,#6
00022c  2203              MOVS     r2,#3
00022e  210e              MOVS     r1,#0xe
000230  a0cc              ADR      r0,|L4.1380|
000232  f7fffffe          BL       snmp_trap_send
000236  e02f              B        |L4.664|
                  |L4.568|
000238  2306              MOVS     r3,#6
00023a  2204              MOVS     r2,#4
00023c  210e              MOVS     r1,#0xe
00023e  a0d2              ADR      r0,|L4.1416|
000240  f7fffffe          BL       snmp_trap_send
000244  e028              B        |L4.664|
                  |L4.582|
000246  b300              CBZ      r0,|L4.650|
000248  b9f9              CBNZ     r1,|L4.650|
00024a  78d0              LDRB     r0,[r2,#3]  ; plazma_inv
00024c  f1000001          ADD      r0,r0,#1
000250  70d0              STRB     r0,[r2,#3]
000252  b134              CBZ      r4,|L4.610|
000254  2c01              CMP      r4,#1
000256  d00b              BEQ      |L4.624|
000258  2c02              CMP      r4,#2
00025a  d010              BEQ      |L4.638|
00025c  2c03              CMP      r4,#3
00025e  d015              BEQ      |L4.652|
000260  e01a              B        |L4.664|
                  |L4.610|
000262  2300              MOVS     r3,#0
000264  2201              MOVS     r2,#1
000266  210e              MOVS     r1,#0xe
000268  a0d0              ADR      r0,|L4.1452|
00026a  f7fffffe          BL       snmp_trap_send
00026e  e013              B        |L4.664|
                  |L4.624|
000270  2300              MOVS     r3,#0
000272  2202              MOVS     r2,#2
000274  210e              MOVS     r1,#0xe
000276  a0d2              ADR      r0,|L4.1472|
000278  f7fffffe          BL       snmp_trap_send
00027c  e00c              B        |L4.664|
                  |L4.638|
00027e  2300              MOVS     r3,#0
000280  2203              MOVS     r2,#3
000282  210e              MOVS     r1,#0xe
000284  a0d3              ADR      r0,|L4.1492|
000286  f7fffffe          BL       snmp_trap_send
                  |L4.650|
00028a  e005              B        |L4.664|
                  |L4.652|
00028c  2300              MOVS     r3,#0
00028e  2204              MOVS     r2,#4
000290  210e              MOVS     r1,#0xe
000292  a0d5              ADR      r0,|L4.1512|
000294  f7fffffe          BL       snmp_trap_send
                  |L4.664|
000298  f8150f46          LDRB     r0,[r5,#0x46]!
00029c  7068              STRB     r0,[r5,#1]
00029e  bd70              POP      {r4-r6,pc}
;;;302    
                          ENDP

                  |L4.672|
                          DCD      first_inv_slot
                  |L4.676|
                          DCD      inv
                  |L4.680|
                          DCD      ||area_number.21||+0x90
                  |L4.684|
0002ac  496e7665          DCB      "Invertor #1 Alarm, overload",0
0002b0  72746f72
0002b4  20233120
0002b8  416c6172
0002bc  6d2c206f
0002c0  7665726c
0002c4  6f616400
                  |L4.712|
0002c8  496e7665          DCB      "Invertor #2 Alarm, overload",0
0002cc  72746f72
0002d0  20233220
0002d4  416c6172
0002d8  6d2c206f
0002dc  7665726c
0002e0  6f616400
                  |L4.740|
0002e4  496e7665          DCB      "Invertor #3 Alarm, overload",0
0002e8  72746f72
0002ec  20233320
0002f0  416c6172
0002f4  6d2c206f
0002f8  7665726c
0002fc  6f616400
                  |L4.768|
000300  496e7665          DCB      "Invertor #4 Alarm, overload",0
000304  72746f72
000308  20233420
00030c  416c6172
000310  6d2c206f
000314  7665726c
000318  6f616400
                  |L4.796|
00031c  496e7665          DCB      "Invertor #1 Alarm, overheat",0
000320  72746f72
000324  20233120
000328  416c6172
00032c  6d2c206f
000330  76657268
000334  65617400
                  |L4.824|
000338  496e7665          DCB      "Invertor #2 Alarm, overheat",0
00033c  72746f72
000340  20233220
000344  416c6172
000348  6d2c206f
00034c  76657268
000350  65617400
                  |L4.852|
000354  496e7665          DCB      "Invertor #3 Alarm, overheat",0
000358  72746f72
00035c  20233320
000360  416c6172
000364  6d2c206f
000368  76657268
00036c  65617400
                  |L4.880|
000370  496e7665          DCB      "Invertor #4 Alarm, overheat",0
000374  72746f72
000378  20233420
00037c  416c6172
000380  6d2c206f
000384  76657268
000388  65617400
                  |L4.908|
00038c  496e7665          DCB      "Invertor #1 Alarm, is warm",0
000390  72746f72
000394  20233120
000398  416c6172
00039c  6d2c2069
0003a0  73207761
0003a4  726d00  
0003a7  00                DCB      0
                  |L4.936|
0003a8  496e7665          DCB      "Invertor #2 Alarm, is warm",0
0003ac  72746f72
0003b0  20233220
0003b4  416c6172
0003b8  6d2c2069
0003bc  73207761
0003c0  726d00  
0003c3  00                DCB      0
                  |L4.964|
0003c4  496e7665          DCB      "Invertor #3 Alarm, is warm",0
0003c8  72746f72
0003cc  20233320
0003d0  416c6172
0003d4  6d2c2069
0003d8  73207761
0003dc  726d00  
0003df  00                DCB      0
                  |L4.992|
0003e0  496e7665          DCB      "Invertor #4 Alarm, is warm",0
0003e4  72746f72
0003e8  20233420
0003ec  416c6172
0003f0  6d2c2069
0003f4  73207761
0003f8  726d00  
0003fb  00                DCB      0
                  |L4.1020|
0003fc  496e7665          DCB      "Invertor #1 Alarm, voltage is up",0
000400  72746f72
000404  20233120
000408  416c6172
00040c  6d2c2076
000410  6f6c7461
000414  67652069
000418  73207570
00041c  00      
00041d  00                DCB      0
00041e  00                DCB      0
00041f  00                DCB      0
                  |L4.1056|
000420  496e7665          DCB      "Invertor #2 Alarm, voltage is up",0
000424  72746f72
000428  20233220
00042c  416c6172
000430  6d2c2076
000434  6f6c7461
000438  67652069
00043c  73207570
000440  00      
000441  00                DCB      0
000442  00                DCB      0
000443  00                DCB      0
                  |L4.1092|
000444  496e7665          DCB      "Invertor #3 Alarm, voltage is up",0
000448  72746f72
00044c  20233320
000450  416c6172
000454  6d2c2076
000458  6f6c7461
00045c  67652069
000460  73207570
000464  00      
000465  00                DCB      0
000466  00                DCB      0
000467  00                DCB      0
                  |L4.1128|
000468  496e7665          DCB      "Invertor #4 Alarm, voltage is up",0
00046c  72746f72
000470  20233420
000474  416c6172
000478  6d2c2076
00047c  6f6c7461
000480  67652069
000484  73207570
000488  00      
000489  00                DCB      0
00048a  00                DCB      0
00048b  00                DCB      0
                  |L4.1164|
00048c  496e7665          DCB      "Invertor #1 Alarm, voltage is down",0
000490  72746f72
000494  20233120
000498  416c6172
00049c  6d2c2076
0004a0  6f6c7461
0004a4  67652069
0004a8  7320646f
0004ac  776e00  
0004af  00                DCB      0
                  |L4.1200|
0004b0  496e7665          DCB      "Invertor #2 Alarm, voltage is down",0
0004b4  72746f72
0004b8  20233220
0004bc  416c6172
0004c0  6d2c2076
0004c4  6f6c7461
0004c8  67652069
0004cc  7320646f
0004d0  776e00  
0004d3  00                DCB      0
                  |L4.1236|
0004d4  496e7665          DCB      "Invertor #3 Alarm, voltage is down",0
0004d8  72746f72
0004dc  20233320
0004e0  416c6172
0004e4  6d2c2076
0004e8  6f6c7461
0004ec  67652069
0004f0  7320646f
0004f4  776e00  
0004f7  00                DCB      0
                  |L4.1272|
0004f8  496e7665          DCB      "Invertor #4 Alarm, voltage is down",0
0004fc  72746f72
000500  20233420
000504  416c6172
000508  6d2c2076
00050c  6f6c7461
000510  67652069
000514  7320646f
000518  776e00  
00051b  00                DCB      0
                  |L4.1308|
00051c  496e7665          DCB      "Invertor #1 Alarm, output is offed",0
000520  72746f72
000524  20233120
000528  416c6172
00052c  6d2c206f
000530  75747075
000534  74206973
000538  206f6666
00053c  656400  
00053f  00                DCB      0
                  |L4.1344|
000540  496e7665          DCB      "Invertor #2 Alarm, output is offed",0
000544  72746f72
000548  20233220
00054c  416c6172
000550  6d2c206f
000554  75747075
000558  74206973
00055c  206f6666
000560  656400  
000563  00                DCB      0
                  |L4.1380|
000564  496e7665          DCB      "Invertor #3 Alarm, output is offed",0
000568  72746f72
00056c  20233320
000570  416c6172
000574  6d2c206f
000578  75747075
00057c  74206973
000580  206f6666
000584  656400  
000587  00                DCB      0
                  |L4.1416|
000588  496e7665          DCB      "Invertor #4 Alarm, output is offed",0
00058c  72746f72
000590  20233420
000594  416c6172
000598  6d2c206f
00059c  75747075
0005a0  74206973
0005a4  206f6666
0005a8  656400  
0005ab  00                DCB      0
                  |L4.1452|
0005ac  496e7665          DCB      "Invertor #1 is norm",0
0005b0  72746f72
0005b4  20233120
0005b8  6973206e
0005bc  6f726d00
                  |L4.1472|
0005c0  496e7665          DCB      "Invertor #2 is norm",0
0005c4  72746f72
0005c8  20233220
0005cc  6973206e
0005d0  6f726d00
                  |L4.1492|
0005d4  496e7665          DCB      "Invertor #3 is norm",0
0005d8  72746f72
0005dc  20233320
0005e0  6973206e
0005e4  6f726d00
                  |L4.1512|
0005e8  496e7665          DCB      "Invertor #4 is norm",0
0005ec  72746f72
0005f0  20233420
0005f4  6973206e
0005f8  6f726d00

                          AREA ||.bss||, DATA, NOINIT, ALIGN=2

                  adc_buff
                          %        1024
                  adc_buff_
                          %        32
                  main_power_buffer
                          %        32

                          AREA ||area_number.7||, DATA, NOINIT, ALIGN=1

                          EXPORTAS ||area_number.7||, ||.bss||
                  adc_buff_max
                          %        24

                          AREA ||area_number.8||, DATA, NOINIT, ALIGN=1

                          EXPORTAS ||area_number.8||, ||.bss||
                  net_buff
                          %        64

                          AREA ||.constdata||, DATA, READONLY, ALIGN=0

                  sk_buff_KONTUR
000000  0d0b0f0e          DCB      0x0d,0x0b,0x0f,0x0e

                          AREA ||area_number.11||, DATA, READONLY, ALIGN=0

                          EXPORTAS ||area_number.11||, ||.constdata||
                  sk_buff_RSTKM
000000  0d0b0f0e          DCB      0x0d,0x0b,0x0f,0x0e

                          AREA ||area_number.12||, DATA, READONLY, ALIGN=0

                          EXPORTAS ||area_number.12||, ||.constdata||
                  sk_buff_GLONASS
000000  0b0d0f0e          DCB      0x0b,0x0d,0x0f,0x0e

                          AREA ||area_number.13||, DATA, READONLY, ALIGN=0

                          EXPORTAS ||area_number.13||, ||.constdata||
                  sk_buff_3U
000000  0b0d0f0e          DCB      0x0b,0x0d,0x0f,0x0e

                          AREA ||area_number.14||, DATA, READONLY, ALIGN=0

                          EXPORTAS ||area_number.14||, ||.constdata||
                  sk_buff_6U
000000  0b0d0f0e          DCB      0x0b,0x0d,0x0f,0x0e

                          AREA ||area_number.15||, DATA, READONLY, ALIGN=0

                          EXPORTAS ||area_number.15||, ||.constdata||
                  sk_buff_220
000000  0b0d0f0e          DCB      0x0b,0x0d,0x0f,0x0e

                          AREA ||area_number.16||, DATA, READONLY, ALIGN=0

                          EXPORTAS ||area_number.16||, ||.constdata||
                  sk_buff_TELECORE2015
000000  0b0d0f0e          DCB      0x0b,0x0d,0x0f,0x0e

                          AREA ||.data||, DATA, ALIGN=1

                  adc_buff_min
000000  13881388          DCW      0x1388,0x1388
000004  13881388          DCW      0x1388,0x1388
000008  13881388          DCW      0x1388,0x1388
00000c  13881388          DCW      0x1388,0x1388
000010  13881388          DCW      0x1388,0x1388
                          DCDU     0x00000000

                          AREA ||area_number.18||, DATA, ALIGN=1

                          EXPORTAS ||area_number.18||, ||.data||
                  unet_buff_min
000000  1388              DCW      0x1388

                          AREA ||area_number.19||, DATA, ALIGN=0

                          EXPORTAS ||area_number.19||, ||.data||
                  adc_stat
000000  01                DCB      0x01

                          AREA ||area_number.20||, DATA, ALIGN=1

                          EXPORTAS ||area_number.20||, ||.data||
                  bat_ver_cnt
000000  0096              DCW      0x0096

                          AREA ||area_number.21||, DATA, ALIGN=2

                          EXPORTAS ||area_number.21||, ||.data||
                  vent_stat
000000  00                DCB      0x00
                  adc_self_ch_cnt
000001  00                DCB      0x00
                  adc_ch_net
000002  00                DCB      0x00
                  adc_ch
000003  00                DCB      0x00
                  adc_ch_cnt
000004  00                DCB      0x00
                  adc_window_flag
000005  00                DCB      0x00
                  ch_cnt0
000006  00                DCB      0x00
                  b1Hz_ch
000007  00                DCB      0x00
                  i
000008  00                DCB      0x00
                  iiii
000009  00                DCB      0x00
                  bAVG
00000a  00                DCB      0x00
                  avg_num
00000b  00                DCB      0x00
                  kb_full_ver
00000c  00                DCB      0x00
                  kb_start_ips
00000d  00                DCB      0x00
                  num_of_wrks_bps
00000e  00                DCB      0x00
                  num_necc_up
00000f  00                DCB      0x00
                  num_necc_down
000010  00                DCB      0x00
                  sh_cnt0
000011  00                DCB      0x00
                  b1Hz_sh
000012  00                DCB      0x00
                  spc_stat
000013  00                DCB      0x00
                  spc_bat
000014  00                DCB      0x00
                  spc_phase
000015  00                DCB      0x00
                  bAVZ
000016  00                DCB      0x00
                  ke_start_stat
000017  00                DCB      0x00
                  numOfForvardBps
000018  00                DCB      0x00
                  numOfForvardBps_old
000019  00                DCB      0x00
                  numOfForvardBps_minCnt
00001a  00                DCB      0x00
                  bPARALLEL_NOT_ENOUG
00001b  00                DCB      0x00
                  bPARALLEL_ENOUG
00001c  00                DCB      0x00
                  bPARALLEL
00001d  00                DCB      0x00
                  cntrl_hndl_plazma
00001e  0000              DCB      0x00,0x00
                  cntrl_stat
000020  0258              DCW      0x0258
                  cntrl_stat_old
000022  0258              DCW      0x0258
                  avg_main_cnt
000024  0014              DCW      0x0014
                  num_necc_block_cnt
000026  0000              DCB      0x00,0x00
                  net_buff_
000028  0000              DCB      0x00,0x00
                  adc_result
00002a  0000              DCB      0x00,0x00
                  adc_gorb_cnt
00002c  0000              DCB      0x00,0x00
                  adc_zero_cnt
00002e  0000              DCB      0x00,0x00
                  adc_window_cnt
000030  0000              DCB      0x00,0x00
                  adc_net_buff_cnt
000032  0000              DCB      0x00,0x00
                  plazma_sk
000034  0000              DCB      0x00,0x00
                  cntrl_stat_new
000036  0000              DCB      0x00,0x00
                  Ibmax
000038  0000              DCB      0x00,0x00
                  IZMAX_
00003a  0000              DCB      0x00,0x00
                  Ubpsmax
00003c  0000              DCB      0x00,0x00
                  samokalibr_cnt
00003e  0000              DCB      0x00,0x00
                  main_kb_cnt
000040  0000              DCB      0x00,0x00
                  kb_cnt_1lev
000042  0000              DCB      0x00,0x00
                  kb_cnt_2lev
000044  0000              DCB      0x00,0x00
                  kb_start
000046  0000              DCB      0x00,0x00
                  ibat_ips
000048  0000              DCB      0x00,0x00
                  ibat_ips_
00004a  0000              DCB      0x00,0x00
                  bps_on_mask
00004c  0000              DCB      0x00,0x00
                  bps_off_mask
00004e  0000              DCB      0x00,0x00
                  vz_cnt_s
000050  0000              DCB      0x00,0x00
                  vz_cnt_s_
000052  0000              DCB      0x00,0x00
                  vz_cnt_h
000054  0000              DCB      0x00,0x00
                  vz_cnt_h_
000056  0000              DCB      0x00,0x00
                  cnt_end_ke
000058  0000              DCB      0x00,0x00
                  __ee_vz_cnt
00005a  0000              DCB      0x00,0x00
                  __ee_spc_stat
00005c  0000              DCB      0x00,0x00
                  __ee_spc_bat
00005e  0000              DCB      0x00,0x00
                  __ee_spc_phase
000060  0000              DCB      0x00,0x00
                  cntrl_stat_blok_cnt
000062  0000              DCB      0x00,0x00
                  cntrl_stat_blok_cnt_
000064  0000              DCB      0x00,0x00
                  numOfForvardBps_hourCnt
000066  0000              DCB      0x00,0x00
                  ibat
                          DCD      0x00000000
                  ibat_
                          DCD      0x00000000
                  rem_IP
                          DCD      0x00000000
                  i_avg_max
                          DCD      0x00000000
                  i_avg_min
                          DCD      0x00000000
                  i_avg_summ
                          DCD      0x00000000
                  i_avg
                          DCD      0x00000000
                  avg
                          DCD      0x00000000
                  cntrl_stat_blok_cnt_plus
                          DCD      0x00000000
                  cntrl_stat_blok_cnt_minus
                          DCD      0x00000000
                  plazma_inv
                          DCD      0x00000000
                  net_metr_buff_
                          DCD      0x00000000
000098  0000              DCB      0x00,0x00
                  adc_self_ch_buff
00009a  0000              DCB      0x00,0x00
                          DCD      0x00000000
                  adc_self_ch_disp
                          DCD      0x00000000
0000a4  00000000          DCB      0x00,0x00,0x00,0x00
                  ke_date
                          %        8

                          AREA ||area_number.22||, DATA, ALIGN=1

                          EXPORTAS ||area_number.22||, ||.data||
                  unet_buff_max
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.23||, DATA, ALIGN=0

                          EXPORTAS ||area_number.23||, ||.data||
                  adc_cnt
000000  00                DCB      0x00

                          AREA ||area_number.24||, DATA, ALIGN=0

                          EXPORTAS ||area_number.24||, ||.data||
                  adc_cnt1
000000  00                DCB      0x00

                          AREA ||area_number.25||, DATA, ALIGN=1

                          EXPORTAS ||area_number.25||, ||.data||
                  zero_cnt
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.26||, DATA, ALIGN=0

                          EXPORTAS ||area_number.26||, ||.data||
                  net_buff_cnt
000000  00                DCB      0x00

                          AREA ||area_number.27||, DATA, ALIGN=1

                          EXPORTAS ||area_number.27||, ||.data||
                  ADWR
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.28||, DATA, ALIGN=1

                          EXPORTAS ||area_number.28||, ||.data||
                  period_cnt
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.29||, DATA, ALIGN=1

                          EXPORTAS ||area_number.29||, ||.data||
                  non_zero_cnt
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.30||, DATA, ALIGN=0

                          EXPORTAS ||area_number.30||, ||.data||
                  rele_stat
000000  00                DCB      0x00

                          AREA ||area_number.31||, DATA, ALIGN=0

                          EXPORTAS ||area_number.31||, ||.data||
                  bRELE_OUT
000000  00                DCB      0x00

                          AREA ||area_number.32||, DATA, ALIGN=2

                          EXPORTAS ||area_number.32||, ||.data||
                  main_power_buffer_
                          DCD      0x00000000

                          AREA ||area_number.33||, DATA, ALIGN=1

                          EXPORTAS ||area_number.33||, ||.data||
                  main_power_buffer_cnt
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.34||, DATA, ALIGN=1

                          EXPORTAS ||area_number.34||, ||.data||
                  adc_buff_out_
                          DCDU     0x00000000
000004  0000              DCB      0x00,0x00

                          AREA ||area_number.35||, DATA, ALIGN=1

                          EXPORTAS ||area_number.35||, ||.data||
                  plazma_adc_cnt
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.36||, DATA, ALIGN=0

                          EXPORTAS ||area_number.36||, ||.data||
                  unh_cnt0
000000  00                DCB      0x00

                          AREA ||area_number.37||, DATA, ALIGN=0

                          EXPORTAS ||area_number.37||, ||.data||
                  unh_cnt1
000000  00                DCB      0x00

                          AREA ||area_number.38||, DATA, ALIGN=0

                          EXPORTAS ||area_number.38||, ||.data||
                  b1Hz_unh
000000  00                DCB      0x00

                          AREA ||area_number.39||, DATA, ALIGN=0

                          EXPORTAS ||area_number.39||, ||.data||
                  ch_cnt1
000000  00                DCB      0x00

                          AREA ||area_number.40||, DATA, ALIGN=0

                          EXPORTAS ||area_number.40||, ||.data||
                  b1_30Hz_ch
000000  00                DCB      0x00

                          AREA ||area_number.41||, DATA, ALIGN=1

                          EXPORTAS ||area_number.41||, ||.data||
                  cntrl_stat_blck_cnt
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.42||, DATA, ALIGN=0

                          EXPORTAS ||area_number.42||, ||.data||
                  avg_cnt
000000  00                DCB      0x00

                          AREA ||area_number.43||, DATA, ALIGN=0

                          EXPORTAS ||area_number.43||, ||.data||
                  bps_all_off_cnt
000000  00                DCB      0x00

                          AREA ||area_number.44||, DATA, ALIGN=0

                          EXPORTAS ||area_number.44||, ||.data||
                  bps_mask_off_cnt
000000  00                DCB      0x00

                          AREA ||area_number.45||, DATA, ALIGN=0

                          EXPORTAS ||area_number.45||, ||.data||
                  bps_mask_on_off_cnt
000000  00                DCB      0x00

                          AREA ||area_number.46||, DATA, ALIGN=0

                          EXPORTAS ||area_number.46||, ||.data||
                  bps_hndl_2sec_cnt
000000  00                DCB      0x00

                          AREA ||area_number.47||, DATA, ALIGN=0

                          EXPORTAS ||area_number.47||, ||.data||
                  plazma_bat
000000  00                DCB      0x00

                          AREA ||area_number.48||, DATA, ALIGN=0

                          EXPORTAS ||area_number.48||, ||.data||
                  plazma_cntrl_stat
000000  00                DCB      0x00
