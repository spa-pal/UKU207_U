; generated by ARM C/C++ Compiler, 4.1 [Build 644]
; commandline ArmCC [--list --debug -c --asm --interleave -o.\EXE\control.o --asm_dir=.\ --list_dir=.\ --depend=.\EXE\control.d --feedback=.\EXE\UKU_220_IPS_TERMOKOMPENSAT.fed --cpu=Cortex-M3 --apcs=interwork -O1 -IC:\Keil\ARM\CMSIS\Include -IC:\Keil\ARM\INC\NXP\LPC17xx -D__MICROLIB -DUKU_220_IPS_TERMOKOMPENSAT -DUKU2071x --omf_browse=.\EXE\control.crf control.c]
                          THUMB

                          AREA ||.text||, CODE, READONLY, ALIGN=2

                  ke_start PROC
;;;249    //-----------------------------------------------
;;;250    void ke_start(char in)
000000  e92d41fc          PUSH     {r2-r8,lr}
;;;251    {          
000004  4606              MOV      r6,r0
;;;252    ke_start_stat=(enum_ke_start_stat)0;		 
000006  4df9              LDR      r5,|L1.1004|
000008  f04f0700          MOV      r7,#0
00000c  762f              STRB     r7,[r5,#0x18]
;;;253    
;;;254    if(spc_stat==spcVZ)ke_start_stat=kssNOT_VZ;
00000e  7d28              LDRB     r0,[r5,#0x14]  ; spc_stat
000010  f04f0301          MOV      r3,#1
000014  2802              CMP      r0,#2
000016  d00f              BEQ      |L1.56|
;;;255    #ifndef UKU_220_IPS_TERMOKOMPENSAT
;;;256    else if(BAT_IS_ON[in]!=bisON)ke_start_stat=kssNOT_BAT;
;;;257    #endif
;;;258    else if(bat[in]._av&(1<<0))ke_start_stat=kssNOT_BAT_AV;
000018  eb060146          ADD      r1,r6,r6,LSL #1
00001c  eb011206          ADD      r2,r1,r6,LSL #4
000020  49f3              LDR      r1,|L1.1008|
000022  eb010482          ADD      r4,r1,r2,LSL #2
000026  f894103d          LDRB     r1,[r4,#0x3d]
00002a  07ca              LSLS     r2,r1,#31
00002c  d006              BEQ      |L1.60|
00002e  f04f0066          MOV      r0,#0x66
000032  7628              STRB     r0,[r5,#0x18]
                  |L1.52|
;;;259    else if(bat[in]._temper_stat&(1<<1))ke_start_stat=kssNOT_BAT_AV_T;
;;;260    else if(bat[in]._av&(1<<1))ke_start_stat=kssNOT_BAT_AV_ASS;
;;;261    else if(bat[in]._Ib>IKB)ke_start_stat=kssNOT_BAT_ZAR;
;;;262    else if(bat[in]._Ib<-IKB)ke_start_stat=kssNOT_BAT_RAZR;
;;;263    else if((spc_stat==spcKE)&&(spc_bat==0))ke_start_stat=kssNOT_KE1;
;;;264    else if((spc_stat==spcKE)&&(spc_bat==1))ke_start_stat=kssNOT_KE2;
;;;265    else 
;;;266    	{
;;;267    
;;;268    	ke_start_stat=kssYES;
;;;269    
;;;270    	spc_stat=spcKE;
;;;271    	__ee_spc_stat=spcKE;
;;;272    	lc640_write_int(EE_SPC_STAT,__ee_spc_stat);
;;;273    	
;;;274    	spc_bat=in;
;;;275    	__ee_spc_bat=in;
;;;276    	lc640_write_int(EE_SPC_BAT,__ee_spc_bat);
;;;277    
;;;278    	bat[in]._zar_cnt_ke=0;
;;;279    	lc640_write_int(ADR_EE_BAT_ZAR_CNT_KE[in],0);
;;;280    	
;;;281    	spc_phase=0;
;;;282    	__ee_spc_phase=0;
;;;283    	lc640_write_int(EE_SPC_PHASE,__ee_spc_phase);
;;;284    
;;;285    	//ke_mem_hndl(in,lc640_read_int(ADR_EE_BAT_ZAR_CNT_KE[spc_bat]));
;;;286    
;;;287    		{					
;;;288    		signed short temp_temp;
;;;289    		signed char temp;
;;;290    		temp_temp=bat[in]._u_old[((bat_u_old_cnt+1)&0x07)]; 
;;;291    		    
;;;292    		temp=LPC_RTC->YEAR;
;;;293    		gran_char(&temp,1,99);
;;;294    		*((char*)(&(ke_date[0])))=temp;
;;;295    			
;;;296    		temp=LPC_RTC->MONTH;
;;;297    		gran_char(&temp,1,12);
;;;298    		*(((char*)(&(ke_date[0])))+1)=temp;
;;;299    		
;;;300    		temp=LPC_RTC->DOM;
;;;301    		gran_char(&temp,1,31);
;;;302    		*(((char*)(&(ke_date[0])))+2)=temp;			
;;;303    				
;;;304    		*(((char*)(&(ke_date[0])))+3)=*((char*)&temp_temp);
;;;305    		lc640_write_long(EE_SPC_KE_DATE0,ke_date[0]);
;;;306    
;;;307    		temp=LPC_RTC->HOUR;
;;;308    		gran_char(&temp,0,23);
;;;309    		*((char*)(&(ke_date[1])))=temp;
;;;310                   
;;;311    		temp=LPC_RTC->MIN;
;;;312    		gran_char(&temp,0,59);
;;;313    		*(((char*)(&(ke_date[1])))+1)=temp;
;;;314    	          
;;;315    		temp=LPC_RTC->SEC;
;;;316    		gran_char(&temp,0,59);
;;;317    		*(((char*)(&(ke_date[1])))+2)=temp;
;;;318    			
;;;319    		*(((char*)(&(ke_date[1])))+3)=*(((char*)&temp_temp)+1);
;;;320    		lc640_write_long(EE_SPC_KE_DATE1,ke_date[1]);
;;;321    		}
;;;322    
;;;323    	}
;;;324    }
000034  e8bd81fc          POP      {r2-r8,pc}
                  |L1.56|
000038  762b              STRB     r3,[r5,#0x18]         ;254
00003a  e7fb              B        |L1.52|
                  |L1.60|
00003c  f894203f          LDRB     r2,[r4,#0x3f]         ;259
000040  0792              LSLS     r2,r2,#30             ;259
000042  d503              BPL      |L1.76|
000044  f04f0067          MOV      r0,#0x67              ;259
000048  7628              STRB     r0,[r5,#0x18]         ;259
00004a  e7f3              B        |L1.52|
                  |L1.76|
00004c  0789              LSLS     r1,r1,#30             ;260
00004e  d503              BPL      |L1.88|
000050  f04f0068          MOV      r0,#0x68              ;260
000054  7628              STRB     r0,[r5,#0x18]         ;260
000056  e7ed              B        |L1.52|
                  |L1.88|
000058  4ae6              LDR      r2,|L1.1012|
00005a  f9b41008          LDRSH    r1,[r4,#8]            ;261
00005e  f9b22000          LDRSH    r2,[r2,#0]            ;261  ; IKB
000062  4291              CMP      r1,r2                 ;261
000064  dd03              BLE      |L1.110|
000066  f04f0069          MOV      r0,#0x69              ;261
00006a  7628              STRB     r0,[r5,#0x18]         ;261
00006c  e7e2              B        |L1.52|
                  |L1.110|
00006e  4252              RSBS     r2,r2,#0              ;262
000070  4291              CMP      r1,r2                 ;262
000072  da03              BGE      |L1.124|
000074  f04f006a          MOV      r0,#0x6a              ;262
000078  7628              STRB     r0,[r5,#0x18]         ;262
00007a  e7db              B        |L1.52|
                  |L1.124|
00007c  49db              LDR      r1,|L1.1004|
00007e  2801              CMP      r0,#1                 ;263
000080  7d49              LDRB     r1,[r1,#0x15]         ;263
000082  d100              BNE      |L1.134|
000084  b111              CBZ      r1,|L1.140|
                  |L1.134|
000086  2801              CMP      r0,#1                 ;264
000088  d004              BEQ      |L1.148|
00008a  e005              B        |L1.152|
                  |L1.140|
00008c  f04f006b          MOV      r0,#0x6b              ;263
000090  7628              STRB     r0,[r5,#0x18]         ;263
000092  e7cf              B        |L1.52|
                  |L1.148|
000094  2901              CMP      r1,#1                 ;264
000096  d07e              BEQ      |L1.406|
                  |L1.152|
000098  f04f0064          MOV      r0,#0x64              ;268
00009c  7628              STRB     r0,[r5,#0x18]         ;268
00009e  752b              STRB     r3,[r5,#0x14]         ;270
0000a0  f8a5305c          STRH     r3,[r5,#0x5c]         ;271
0000a4  4619              MOV      r1,r3                 ;272
0000a6  f44f70f8          MOV      r0,#0x1f0             ;272
0000aa  f7fffffe          BL       lc640_write_int
0000ae  756e              STRB     r6,[r5,#0x15]         ;274
0000b0  f8a5605e          STRH     r6,[r5,#0x5e]         ;275
0000b4  4631              MOV      r1,r6                 ;276
0000b6  f44f70fa          MOV      r0,#0x1f4             ;276
0000ba  f7fffffe          BL       lc640_write_int
0000be  61a7              STR      r7,[r4,#0x18]         ;278
0000c0  48cd              LDR      r0,|L1.1016|
0000c2  2100              MOVS     r1,#0                 ;279
0000c4  f9300016          LDRSH    r0,[r0,r6,LSL #1]     ;279
0000c8  f7fffffe          BL       lc640_write_int
0000cc  75af              STRB     r7,[r5,#0x16]         ;281
0000ce  f8a57060          STRH     r7,[r5,#0x60]         ;282
0000d2  4639              MOV      r1,r7                 ;283
0000d4  f44f70fb          MOV      r0,#0x1f6             ;283
0000d8  f7fffffe          BL       lc640_write_int
0000dc  48c7              LDR      r0,|L1.1020|
0000de  8800              LDRH     r0,[r0,#0]            ;290  ; bat_u_old_cnt
0000e0  f1000001          ADD      r0,r0,#1              ;290
0000e4  f0000007          AND      r0,r0,#7              ;290
0000e8  eb040040          ADD      r0,r4,r0,LSL #1       ;290
0000ec  8c00              LDRH     r0,[r0,#0x20]         ;290
0000ee  9001              STR      r0,[sp,#4]            ;290
0000f0  4dc3              LDR      r5,|L1.1024|
0000f2  8ba8              LDRH     r0,[r5,#0x1c]         ;292
0000f4  9000              STR      r0,[sp,#0]            ;292
0000f6  f04f0263          MOV      r2,#0x63              ;293
0000fa  f04f0101          MOV      r1,#1                 ;293
0000fe  4668              MOV      r0,sp                 ;293
000100  f7fffffe          BL       gran_char
000104  4cb9              LDR      r4,|L1.1004|
000106  f89d0000          LDRB     r0,[sp,#0]            ;294
00010a  34a8              ADDS     r4,r4,#0xa8           ;294
00010c  7020              STRB     r0,[r4,#0]            ;294
00010e  7e28              LDRB     r0,[r5,#0x18]         ;296
000110  9000              STR      r0,[sp,#0]            ;296
000112  220c              MOVS     r2,#0xc               ;297
000114  2101              MOVS     r1,#1                 ;297
000116  4668              MOV      r0,sp                 ;297
000118  f7fffffe          BL       gran_char
00011c  f89d0000          LDRB     r0,[sp,#0]            ;298
000120  7060              STRB     r0,[r4,#1]            ;298
000122  7b28              LDRB     r0,[r5,#0xc]          ;300
000124  9000              STR      r0,[sp,#0]            ;300
000126  221f              MOVS     r2,#0x1f              ;301
000128  2101              MOVS     r1,#1                 ;301
00012a  4668              MOV      r0,sp                 ;301
00012c  f7fffffe          BL       gran_char
000130  f89d0000          LDRB     r0,[sp,#0]            ;302
000134  70a0              STRB     r0,[r4,#2]            ;302
000136  f89d0004          LDRB     r0,[sp,#4]            ;304
00013a  70e0              STRB     r0,[r4,#3]            ;304
00013c  f44f70fc          MOV      r0,#0x1f8             ;305
000140  6821              LDR      r1,[r4,#0]            ;305  ; ke_date
000142  f7fffffe          BL       lc640_write_long
000146  7a28              LDRB     r0,[r5,#8]            ;307
000148  9000              STR      r0,[sp,#0]            ;307
00014a  2217              MOVS     r2,#0x17              ;308
00014c  2100              MOVS     r1,#0                 ;308
00014e  4668              MOV      r0,sp                 ;308
000150  f7fffffe          BL       gran_char
000154  f89d0000          LDRB     r0,[sp,#0]            ;309
000158  7120              STRB     r0,[r4,#4]            ;309
00015a  7928              LDRB     r0,[r5,#4]            ;311
00015c  9000              STR      r0,[sp,#0]            ;311
00015e  223b              MOVS     r2,#0x3b              ;312
000160  2100              MOVS     r1,#0                 ;312
000162  4668              MOV      r0,sp                 ;312
000164  f7fffffe          BL       gran_char
000168  f89d0000          LDRB     r0,[sp,#0]            ;313
00016c  7160              STRB     r0,[r4,#5]            ;313
00016e  7828              LDRB     r0,[r5,#0]            ;315
000170  9000              STR      r0,[sp,#0]            ;315
000172  223b              MOVS     r2,#0x3b              ;316
000174  2100              MOVS     r1,#0                 ;316
000176  4668              MOV      r0,sp                 ;316
000178  f7fffffe          BL       gran_char
00017c  f89d0000          LDRB     r0,[sp,#0]            ;317
000180  71a0              STRB     r0,[r4,#6]            ;317
000182  f89d0005          LDRB     r0,[sp,#5]            ;319
000186  71e0              STRB     r0,[r4,#7]            ;319
000188  f44f70fe          MOV      r0,#0x1fc             ;320
00018c  6861              LDR      r1,[r4,#4]            ;320  ; ke_date
00018e  f7fffffe          BL       lc640_write_long
000192  e74f              B        |L1.52|
000194  e7ff              B        |L1.406|
                  |L1.406|
000196  f04f006c          MOV      r0,#0x6c              ;264
00019a  7628              STRB     r0,[r5,#0x18]         ;264
00019c  e74a              B        |L1.52|
;;;325    
                          ENDP

                  ke_drv PROC
;;;326    //-----------------------------------------------
;;;327    void ke_drv(void)
00019e  e92d47f0          PUSH     {r4-r10,lr}
;;;328    {
;;;329    
;;;330    if(spc_stat==spcKE)
0001a2  4c92              LDR      r4,|L1.1004|
0001a4  7d20              LDRB     r0,[r4,#0x14]  ; spc_stat
0001a6  2801              CMP      r0,#1
0001a8  d17d              BNE      |L1.678|
0001aa  4621              MOV      r1,r4
0001ac  2601              MOVS     r6,#1
;;;331    	{
;;;332    	if(spc_phase==0)
;;;333    		{
;;;334    		mess_send(MESS2BAT_HNDL,PARAM_BAT_MASK_OFF_AFTER_2SEC,(1<<(1-spc_bat)),20);
0001ae  7d49              LDRB     r1,[r1,#0x15]
0001b0  7da0              LDRB     r0,[r4,#0x16]         ;332  ; spc_phase
0001b2  f1c10201          RSB      r2,r1,#1
0001b6  fa06f102          LSL      r1,r6,r2
;;;335    		mess_send(MESS2BPS_HNDL,PARAM_BPS_ALL_OFF_AFTER_2SEC,0xffff,20);
;;;336    
;;;337    		bat[spc_bat]._zar_cnt_ke+=abs(bat[spc_bat]._Ib);
;;;338    	    	
;;;339    		if(bat[spc_bat]._zar_cnt_ke>=AH_CONSTANT)
;;;340    			{
;;;341    			bat[spc_bat]._zar_cnt_ke-=AH_CONSTANT;
;;;342    			lc640_write_int(ADR_EE_BAT_ZAR_CNT_KE[spc_bat],lc640_read_int(ADR_EE_BAT_ZAR_CNT_KE[spc_bat])+1);
0001ba  4f8f              LDR      r7,|L1.1016|
0001bc  4d8c              LDR      r5,|L1.1008|
0001be  b20a              SXTH     r2,r1                 ;334
0001c0  b110              CBZ      r0,|L1.456|
;;;343    			}
;;;344    		}
;;;345    
;;;346    	else if(spc_phase==1)
0001c2  2801              CMP      r0,#1
0001c4  d034              BEQ      |L1.560|
0001c6  e038              B        |L1.570|
                  |L1.456|
0001c8  2314              MOVS     r3,#0x14              ;334
0001ca  21ca              MOVS     r1,#0xca              ;334
0001cc  20c8              MOVS     r0,#0xc8              ;334
0001ce  f7fffffe          BL       mess_send
0001d2  2314              MOVS     r3,#0x14              ;335
0001d4  f04f32ff          MOV      r2,#0xffffffff        ;335
0001d8  21ce              MOVS     r1,#0xce              ;335
0001da  20cd              MOVS     r0,#0xcd              ;335
0001dc  f7fffffe          BL       mess_send
0001e0  7d60              LDRB     r0,[r4,#0x15]         ;337  ; spc_bat
0001e2  eb000140          ADD      r1,r0,r0,LSL #1       ;337
0001e6  eb011000          ADD      r0,r1,r0,LSL #4       ;337
0001ea  eb050080          ADD      r0,r5,r0,LSL #2       ;337
0001ee  f9b00008          LDRSH    r0,[r0,#8]            ;337
0001f2  f7fffffe          BL       abs
0001f6  7d61              LDRB     r1,[r4,#0x15]         ;337  ; spc_bat
0001f8  eb010241          ADD      r2,r1,r1,LSL #1       ;337
0001fc  eb021201          ADD      r2,r2,r1,LSL #4       ;337
000200  eb050282          ADD      r2,r5,r2,LSL #2       ;337
000204  6993              LDR      r3,[r2,#0x18]         ;337
000206  4418              ADD      r0,r0,r3              ;337
000208  6190              STR      r0,[r2,#0x18]         ;337
00020a  f64843a0          MOV      r3,#0x8ca0            ;339
00020e  4298              CMP      r0,r3                 ;339
000210  db13              BLT      |L1.570|
000212  eba00003          SUB      r0,r0,r3              ;341
000216  6190              STR      r0,[r2,#0x18]         ;341
000218  f8370011          LDRH     r0,[r7,r1,LSL #1]     ;342
00021c  f7fffffe          BL       lc640_read_int
000220  1c40              ADDS     r0,r0,#1              ;342
000222  b201              SXTH     r1,r0                 ;342
000224  7d60              LDRB     r0,[r4,#0x15]         ;342  ; spc_bat
000226  f9370010          LDRSH    r0,[r7,r0,LSL #1]     ;342
00022a  f7fffffe          BL       lc640_write_int
00022e  e004              B        |L1.570|
                  |L1.560|
;;;347    		{
;;;348    		mess_send(MESS2BAT_HNDL,PARAM_BAT_MASK_OFF_AFTER_2SEC,(1<<(1-spc_bat)),20);
000230  2314              MOVS     r3,#0x14
000232  21ca              MOVS     r1,#0xca
000234  20c8              MOVS     r0,#0xc8
000236  f7fffffe          BL       mess_send
                  |L1.570|
;;;349    		}
;;;350    
;;;351    	if(bat[spc_bat]._Ub<(USIGN*10))
00023a  7d61              LDRB     r1,[r4,#0x15]  ; spc_bat
;;;352    		{
;;;353    		cnt_end_ke++;
;;;354    		if(cnt_end_ke>=30)
;;;355    			{
;;;356    			
;;;357    			if((spc_stat==spcKE)&&(spc_phase==0))
;;;358    				{
;;;359    				lc640_write_int(ADR_EE_BAT_C_REAL[spc_bat],lc640_read_int(ADR_EE_BAT_ZAR_CNT_KE[spc_bat]));
;;;360    				ke_mem_hndl(spc_bat,lc640_read_int(ADR_EE_BAT_ZAR_CNT_KE[spc_bat]));
;;;361    				lc640_write_int(ADR_EE_BAT_ZAR_CNT[spc_bat],0);
;;;362    				cntrl_stat=50;
;;;363    				cntrl_stat_old=50;
;;;364    				}
;;;365    
;;;366    			if((BAT_IS_ON[1-spc_bat]) == bisON)
;;;367    				{
;;;368    				spc_phase=1;
;;;369    				__ee_spc_phase=1;
;;;370    				lc640_write_int(EE_SPC_PHASE,1);
;;;371    				}			
;;;372    			else
;;;373    				{
;;;374    				spc_stat=spcOFF;
;;;375    				__ee_spc_stat=spcOFF;
;;;376    				lc640_write_int(EE_SPC_STAT,spcOFF);
00023c  f44f79f8          MOV      r9,#0x1f0
000240  eb010041          ADD      r0,r1,r1,LSL #1       ;351
000244  eb001001          ADD      r0,r0,r1,LSL #4       ;351
000248  eb050080          ADD      r0,r5,r0,LSL #2       ;351
00024c  f04f0800          MOV      r8,#0                 ;332
000250  f9b02002          LDRSH    r2,[r0,#2]            ;351
000254  486b              LDR      r0,|L1.1028|
000256  f9b00000          LDRSH    r0,[r0,#0]            ;351  ; USIGN
00025a  eb000080          ADD      r0,r0,r0,LSL #2       ;351
00025e  ebb20f40          CMP      r2,r0,LSL #1          ;351
000262  da47              BGE      |L1.756|
000264  f8b40058          LDRH     r0,[r4,#0x58]         ;353  ; cnt_end_ke
000268  f1000001          ADD      r0,r0,#1              ;353
00026c  b200              SXTH     r0,r0                 ;353
00026e  f8a40058          STRH     r0,[r4,#0x58]         ;353
000272  281e              CMP      r0,#0x1e              ;354
000274  db40              BLT      |L1.760|
000276  7d20              LDRB     r0,[r4,#0x14]         ;357  ; spc_stat
000278  2801              CMP      r0,#1                 ;357
00027a  d122              BNE      |L1.706|
00027c  7da0              LDRB     r0,[r4,#0x16]         ;357  ; spc_phase
00027e  bb00              CBNZ     r0,|L1.706|
000280  f8370011          LDRH     r0,[r7,r1,LSL #1]     ;359
000284  f7fffffe          BL       lc640_read_int
000288  b201              SXTH     r1,r0                 ;359
00028a  485f              LDR      r0,|L1.1032|
00028c  7d62              LDRB     r2,[r4,#0x15]         ;359  ; spc_bat
00028e  f9300012          LDRSH    r0,[r0,r2,LSL #1]     ;359
000292  f7fffffe          BL       lc640_write_int
000296  7d60              LDRB     r0,[r4,#0x15]         ;360  ; spc_bat
000298  f8370010          LDRH     r0,[r7,r0,LSL #1]     ;360
00029c  f7fffffe          BL       lc640_read_int
0002a0  b281              UXTH     r1,r0                 ;360
0002a2  7d60              LDRB     r0,[r4,#0x15]         ;360  ; spc_bat
0002a4  e000              B        |L1.680|
                  |L1.678|
0002a6  e049              B        |L1.828|
                  |L1.680|
0002a8  f7fffffe          BL       ke_mem_hndl
0002ac  4857              LDR      r0,|L1.1036|
0002ae  7d61              LDRB     r1,[r4,#0x15]         ;361  ; spc_bat
0002b0  f9300011          LDRSH    r0,[r0,r1,LSL #1]     ;361
0002b4  2100              MOVS     r1,#0                 ;361
0002b6  f7fffffe          BL       lc640_write_int
0002ba  f04f0032          MOV      r0,#0x32              ;362
0002be  8420              STRH     r0,[r4,#0x20]         ;362
0002c0  8460              STRH     r0,[r4,#0x22]         ;363
                  |L1.706|
0002c2  7d60              LDRB     r0,[r4,#0x15]         ;366  ; spc_bat
0002c4  4952              LDR      r1,|L1.1040|
0002c6  f1c00001          RSB      r0,r0,#1              ;366
0002ca  5c08              LDRB     r0,[r1,r0]            ;366
0002cc  2855              CMP      r0,#0x55              ;366
0002ce  d008              BEQ      |L1.738|
0002d0  f8848014          STRB     r8,[r4,#0x14]         ;374
0002d4  f8a4805c          STRH     r8,[r4,#0x5c]         ;375
0002d8  2100              MOVS     r1,#0
0002da  4648              MOV      r0,r9
0002dc  f7fffffe          BL       lc640_write_int
0002e0  e00a              B        |L1.760|
                  |L1.738|
0002e2  75a6              STRB     r6,[r4,#0x16]         ;368
0002e4  f8a46060          STRH     r6,[r4,#0x60]         ;369
0002e8  2101              MOVS     r1,#1                 ;370
0002ea  f44f70fb          MOV      r0,#0x1f6             ;370
0002ee  f7fffffe          BL       lc640_write_int
0002f2  e001              B        |L1.760|
                  |L1.756|
;;;377    				}
;;;378    			}
;;;379    		}
;;;380    	else cnt_end_ke=0;
0002f4  f8a48058          STRH     r8,[r4,#0x58]
                  |L1.760|
;;;381    
;;;382    	if((bat[spc_bat]._Ub>=bat[1-spc_bat]._Ub)&&(spc_phase==1))
0002f8  7d61              LDRB     r1,[r4,#0x15]  ; spc_bat
0002fa  eb010041          ADD      r0,r1,r1,LSL #1
0002fe  eb001001          ADD      r0,r0,r1,LSL #4
000302  eb050080          ADD      r0,r5,r0,LSL #2
000306  f9b02002          LDRSH    r2,[r0,#2]
00030a  f1c10001          RSB      r0,r1,#1
00030e  eb000140          ADD      r1,r0,r0,LSL #1
000312  eb011000          ADD      r0,r1,r0,LSL #4
000316  eb050080          ADD      r0,r5,r0,LSL #2
00031a  f9b00002          LDRSH    r0,[r0,#2]
00031e  4282              CMP      r2,r0
000320  db0c              BLT      |L1.828|
000322  7da0              LDRB     r0,[r4,#0x16]  ; spc_phase
000324  2801              CMP      r0,#1
000326  d109              BNE      |L1.828|
;;;383    		{
;;;384    		spc_stat=spcOFF;
000328  f8848014          STRB     r8,[r4,#0x14]
;;;385    		__ee_spc_stat=spcOFF;
00032c  f8a4805c          STRH     r8,[r4,#0x5c]
;;;386    		lc640_write_int(EE_SPC_STAT,spcOFF);
000330  4648              MOV      r0,r9
000332  e8bd47f0          POP      {r4-r10,lr}
000336  2100              MOVS     r1,#0
000338  f7ffbffe          B.W      lc640_write_int
                  |L1.828|
;;;387    		}
;;;388    	}
;;;389    			
;;;390    }
00033c  e8bd87f0          POP      {r4-r10,pc}
;;;391    
                          ENDP

                  vz_start PROC
;;;392    //-----------------------------------------------
;;;393    char vz_start(char hour)
000340  b570              PUSH     {r4-r6,lr}
;;;394    {          
000342  4605              MOV      r5,r0
;;;395    char out;
;;;396    out=0;
000344  f04f0600          MOV      r6,#0
;;;397    if((spc_stat==spcOFF)&&(speedChrgBlckStat!=1))
000348  4c28              LDR      r4,|L1.1004|
00034a  7d20              LDRB     r0,[r4,#0x14]  ; spc_stat
00034c  bb90              CBNZ     r0,|L1.948|
00034e  4831              LDR      r0,|L1.1044|
000350  8800              LDRH     r0,[r0,#0]  ; speedChrgBlckStat
000352  2801              CMP      r0,#1
000354  d02e              BEQ      |L1.948|
;;;398    	{
;;;399    	spc_stat=spcVZ;
000356  f04f0102          MOV      r1,#2
00035a  7521              STRB     r1,[r4,#0x14]
;;;400    	__ee_spc_stat=spcVZ; 
00035c  f8a4105c          STRH     r1,[r4,#0x5c]
;;;401    	lc640_write_int(EE_SPC_STAT,__ee_spc_stat);   
000360  f44f70f8          MOV      r0,#0x1f0
000364  f7fffffe          BL       lc640_write_int
;;;402    	vz_cnt_h=hour;
000368  f8a45054          STRH     r5,[r4,#0x54]
;;;403    	__ee_vz_cnt=hour*60;
00036c  ebc51005          RSB      r0,r5,r5,LSL #4
000370  ea4f0080          LSL      r0,r0,#2
000374  f8a4005a          STRH     r0,[r4,#0x5a]
;;;404    	if(hour==0)__ee_vz_cnt=30;
000378  b91d              CBNZ     r5,|L1.898|
00037a  f04f001e          MOV      r0,#0x1e
00037e  f8a4005a          STRH     r0,[r4,#0x5a]
                  |L1.898|
;;;405    	lc640_write_int(EE_VZ_CNT,__ee_vz_cnt);
000382  f1040450          ADD      r4,r4,#0x50
000386  f44f70f9          MOV      r0,#0x1f2
00038a  f9b4100a          LDRSH    r1,[r4,#0xa]  ; __ee_vz_cnt
00038e  f7fffffe          BL       lc640_write_int
;;;406    	lc640_write_int(EE_SPC_VZ_LENGT,__ee_vz_cnt);	
000392  f9b4100a          LDRSH    r1,[r4,#0xa]  ; __ee_vz_cnt
000396  f44f70ff          MOV      r0,#0x1fe
00039a  f7fffffe          BL       lc640_write_int
;;;407    	vz_cnt_h_=0;
00039e  f04f0000          MOV      r0,#0
0003a2  80e0              STRH     r0,[r4,#6]
;;;408    	vz_cnt_s=0;
0003a4  8020              STRH     r0,[r4,#0]
;;;409    	vz_cnt_s_=0;
0003a6  8060              STRH     r0,[r4,#2]
;;;410    	out=1;
0003a8  f04f0601          MOV      r6,#1
;;;411    	vz_mem_hndl(1);
0003ac  f04f0001          MOV      r0,#1
0003b0  f7fffffe          BL       vz_mem_hndl
                  |L1.948|
;;;412    	}
;;;413    //else if((spc_stat==spc_KE1p1)||(spc_stat==spc_KE1p2)) out=22; 
;;;414    //else if((spc_stat==spc_KE2p1)||(spc_stat==spc_KE2p2)) out=33;
;;;415    //plazma=out;	
;;;416    return out;
0003b4  4630              MOV      r0,r6
;;;417    }
0003b6  bd70              POP      {r4-r6,pc}
;;;418    
                          ENDP

                  vz_stop PROC
;;;419    //-----------------------------------------------
;;;420    void vz_stop(void)
0003b8  b510              PUSH     {r4,lr}
;;;421    {
;;;422    if(spc_stat==spcVZ)
0003ba  4c0c              LDR      r4,|L1.1004|
0003bc  7d20              LDRB     r0,[r4,#0x14]  ; spc_stat
0003be  2802              CMP      r0,#2
0003c0  d113              BNE      |L1.1002|
;;;423         {
;;;424    vz_mem_hndl(vz_cnt_h);          
0003c2  f104041e          ADD      r4,r4,#0x1e
0003c6  8ee0              LDRH     r0,[r4,#0x36]  ; vz_cnt_h
0003c8  f7fffffe          BL       vz_mem_hndl
;;;425    vz_cnt_s=0;
0003cc  f04f0000          MOV      r0,#0
0003d0  8660              STRH     r0,[r4,#0x32]
;;;426    vz_cnt_h=0;
0003d2  86e0              STRH     r0,[r4,#0x36]
;;;427    vz_cnt_h_=0;
0003d4  8720              STRH     r0,[r4,#0x38]
;;;428    spc_stat=spcOFF;
0003d6  f8040c0a          STRB     r0,[r4,#-0xa]
;;;429    
;;;430    		__ee_spc_stat=spcOFF;
0003da  87e0              STRH     r0,[r4,#0x3e]
;;;431    		lc640_write_int(EE_SPC_STAT,spcOFF);
0003dc  4601              MOV      r1,r0
0003de  e8bd4010          POP      {r4,lr}
0003e2  f44f70f8          MOV      r0,#0x1f0
0003e6  f7ffbffe          B.W      lc640_write_int
                  |L1.1002|
;;;432         }
;;;433    
;;;434    }
0003ea  bd10              POP      {r4,pc}
                  |L1.1004|
                          DCD      ||area_number.23||
                  |L1.1008|
                          DCD      bat
                  |L1.1012|
                          DCD      IKB
                  |L1.1016|
                          DCD      ADR_EE_BAT_ZAR_CNT_KE
                  |L1.1020|
                          DCD      bat_u_old_cnt
                  |L1.1024|
                          DCD      0x40024020
                  |L1.1028|
                          DCD      USIGN
                  |L1.1032|
                          DCD      ADR_EE_BAT_C_REAL
                  |L1.1036|
                          DCD      ADR_EE_BAT_ZAR_CNT
                  |L1.1040|
                          DCD      BAT_IS_ON
                  |L1.1044|
                          DCD      speedChrgBlckStat
                          ENDP

                  avz_next_date_hndl PROC
;;;436    //-----------------------------------------------
;;;437    void avz_next_date_hndl(void)
000418  b570              PUSH     {r4-r6,lr}
;;;438    {
;;;439    if((LPC_RTC->MONTH+AVZ)>12)lc640_write_int(EE_YEAR_AVZ,LPC_RTC->YEAR+1);
00041a  4cff              LDR      r4,|L1.2072|
00041c  f8940038          LDRB     r0,[r4,#0x38]
000420  4dfe              LDR      r5,|L1.2076|
000422  7829              LDRB     r1,[r5,#0]  ; AVZ
000424  4408              ADD      r0,r0,r1
000426  280c              CMP      r0,#0xc
000428  d906              BLS      |L1.1080|
00042a  8fa0              LDRH     r0,[r4,#0x3c]
00042c  1c40              ADDS     r0,r0,#1
00042e  b201              SXTH     r1,r0
000430  20b8              MOVS     r0,#0xb8
000432  f7fffffe          BL       lc640_write_int
000436  e004              B        |L1.1090|
                  |L1.1080|
;;;440    else lc640_write_int(EE_YEAR_AVZ,LPC_RTC->YEAR);
000438  f9b4103c          LDRSH    r1,[r4,#0x3c]
00043c  20b8              MOVS     r0,#0xb8
00043e  f7fffffe          BL       lc640_write_int
                  |L1.1090|
;;;441    
;;;442    //lc640_write_int(EE_YEAR_AVZ,6);
;;;443    
;;;444    if((LPC_RTC->MONTH+AVZ)>12)lc640_write_int(EE_MONTH_AVZ,(LPC_RTC->MONTH+AVZ)-12);
000442  f8941038          LDRB     r1,[r4,#0x38]
000446  7828              LDRB     r0,[r5,#0]  ; AVZ
000448  4401              ADD      r1,r1,r0
00044a  290c              CMP      r1,#0xc
00044c  d907              BLS      |L1.1118|
00044e  f8941038          LDRB     r1,[r4,#0x38]
000452  380c              SUBS     r0,r0,#0xc
000454  4401              ADD      r1,r1,r0
000456  20b6              MOVS     r0,#0xb6
000458  f7fffffe          BL       lc640_write_int
00045c  e005              B        |L1.1130|
                  |L1.1118|
;;;445    else lc640_write_int(EE_MONTH_AVZ,LPC_RTC->MONTH+AVZ);                                                 
00045e  f8941038          LDRB     r1,[r4,#0x38]
000462  4401              ADD      r1,r1,r0
000464  20b6              MOVS     r0,#0xb6
000466  f7fffffe          BL       lc640_write_int
                  |L1.1130|
;;;446    
;;;447    //lc640_write_int(EE_MONTH_AVZ,5);
;;;448    
;;;449    if(LPC_RTC->DOM>28) lc640_write_int(EE_DATE_AVZ,28);
00046a  f894002c          LDRB     r0,[r4,#0x2c]
00046e  281c              CMP      r0,#0x1c
000470  d904              BLS      |L1.1148|
000472  211c              MOVS     r1,#0x1c
000474  20b4              MOVS     r0,#0xb4
000476  f7fffffe          BL       lc640_write_int
00047a  e004              B        |L1.1158|
                  |L1.1148|
;;;450    else lc640_write_int(EE_DATE_AVZ,LPC_RTC->DOM);
00047c  f894102c          LDRB     r1,[r4,#0x2c]
000480  20b4              MOVS     r0,#0xb4
000482  f7fffffe          BL       lc640_write_int
                  |L1.1158|
;;;451    
;;;452    //lc640_write_int(EE_DATE_AVZ,4);
;;;453    
;;;454    lc640_write_int(EE_HOUR_AVZ,LPC_RTC->HOUR);
000486  f1040420          ADD      r4,r4,#0x20
00048a  7a21              LDRB     r1,[r4,#8]
00048c  f04f00ae          MOV      r0,#0xae
000490  f7fffffe          BL       lc640_write_int
;;;455    lc640_write_int(EE_MIN_AVZ,LPC_RTC->MIN);
000494  7921              LDRB     r1,[r4,#4]
000496  20b0              MOVS     r0,#0xb0
000498  f7fffffe          BL       lc640_write_int
;;;456    lc640_write_int(EE_SEC_AVZ,LPC_RTC->SEC);
00049c  7821              LDRB     r1,[r4,#0]
00049e  e8bd4070          POP      {r4-r6,lr}
0004a2  20b2              MOVS     r0,#0xb2
0004a4  f7ffbffe          B.W      lc640_write_int
;;;457    
;;;458    }
;;;459    
                          ENDP

                  avz_drv PROC
;;;460    //-----------------------------------------------
;;;461    void avz_drv(void)                               
0004a8  b510              PUSH     {r4,lr}
;;;462    {                
;;;463    if(AVZ!=AVZ_OFF)
0004aa  48dc              LDR      r0,|L1.2076|
;;;464    	{
;;;465    	if((LPC_RTC->YEAR==YEAR_AVZ)&&(LPC_RTC->MONTH==MONTH_AVZ)&&(LPC_RTC->DOM==DATE_AVZ)&&(LPC_RTC->HOUR==HOUR_AVZ)&&(LPC_RTC->MIN==MIN_AVZ)&&(LPC_RTC->SEC==SEC_AVZ))
;;;466    		{
;;;467    		bAVZ=1;
0004ac  4cdc              LDR      r4,|L1.2080|
0004ae  7800              LDRB     r0,[r0,#0]            ;463  ; AVZ
0004b0  b330              CBZ      r0,|L1.1280|
0004b2  48d9              LDR      r0,|L1.2072|
0004b4  8f82              LDRH     r2,[r0,#0x3c]         ;465
0004b6  49db              LDR      r1,|L1.2084|
0004b8  8809              LDRH     r1,[r1,#0]            ;465  ; YEAR_AVZ
0004ba  428a              CMP      r2,r1                 ;465
0004bc  d120              BNE      |L1.1280|
0004be  f8902038          LDRB     r2,[r0,#0x38]         ;465
0004c2  49d9              LDR      r1,|L1.2088|
0004c4  8809              LDRH     r1,[r1,#0]            ;465  ; MONTH_AVZ
0004c6  428a              CMP      r2,r1                 ;465
0004c8  d11a              BNE      |L1.1280|
0004ca  f890102c          LDRB     r1,[r0,#0x2c]         ;465
0004ce  4ad7              LDR      r2,|L1.2092|
0004d0  8812              LDRH     r2,[r2,#0]            ;465  ; DATE_AVZ
0004d2  4291              CMP      r1,r2                 ;465
0004d4  d114              BNE      |L1.1280|
0004d6  f8901028          LDRB     r1,[r0,#0x28]         ;465
0004da  4ad5              LDR      r2,|L1.2096|
0004dc  8812              LDRH     r2,[r2,#0]            ;465  ; HOUR_AVZ
0004de  4291              CMP      r1,r2                 ;465
0004e0  d10e              BNE      |L1.1280|
0004e2  f8901024          LDRB     r1,[r0,#0x24]         ;465
0004e6  4ad3              LDR      r2,|L1.2100|
0004e8  8812              LDRH     r2,[r2,#0]            ;465  ; MIN_AVZ
0004ea  4291              CMP      r1,r2                 ;465
0004ec  d108              BNE      |L1.1280|
0004ee  f8900020          LDRB     r0,[r0,#0x20]         ;465
0004f2  49d1              LDR      r1,|L1.2104|
0004f4  8809              LDRH     r1,[r1,#0]            ;465  ; SEC_AVZ
0004f6  4288              CMP      r0,r1                 ;465
0004f8  d102              BNE      |L1.1280|
0004fa  f04f0001          MOV      r0,#1
0004fe  75e0              STRB     r0,[r4,#0x17]
                  |L1.1280|
;;;468    		}
;;;469    	}
;;;470    if(bAVZ)
000500  7de0              LDRB     r0,[r4,#0x17]  ; bAVZ
000502  2800              CMP      r0,#0
000504  d00c              BEQ      |L1.1312|
;;;471    	{
;;;472    	if(vz_start(AVZ_TIME))
000506  48cd              LDR      r0,|L1.2108|
000508  8800              LDRH     r0,[r0,#0]  ; AVZ_TIME
00050a  b2c0              UXTB     r0,r0
00050c  f7fffffe          BL       vz_start
000510  2800              CMP      r0,#0
000512  d005              BEQ      |L1.1312|
;;;473    		{
;;;474    		bAVZ=0;
000514  f04f0000          MOV      r0,#0
000518  75e0              STRB     r0,[r4,#0x17]
;;;475    		avz_next_date_hndl();
00051a  e8bd4010          POP      {r4,lr}
00051e  e7fe              B        avz_next_date_hndl
                  |L1.1312|
;;;476    		}
;;;477    	}	
;;;478    
;;;479    }
000520  e763              B        |L1.1002|
;;;480    
                          ENDP

                  vz_drv PROC
;;;481    //-----------------------------------------------
;;;482    void vz_drv(void)
000522  b538              PUSH     {r3-r5,lr}
;;;483    { 
;;;484    if(spc_stat==spcVZ)
000524  4cbe              LDR      r4,|L1.2080|
000526  7d20              LDRB     r0,[r4,#0x14]  ; spc_stat
000528  2802              CMP      r0,#2
00052a  d116              BNE      |L1.1370|
;;;485    	{
;;;486    	if(sk_stat[0]==1)
00052c  48c4              LDR      r0,|L1.2112|
00052e  7800              LDRB     r0,[r0,#0]  ; sk_stat
000530  2801              CMP      r0,#1
000532  d013              BEQ      |L1.1372|
;;;487    		{
;;;488    
;;;489    	if(vz_cnt_s_<3600)
;;;490    		{
;;;491    		vz_cnt_s_++;
;;;492    		if(vz_cnt_s_>=3600)
;;;493    			{
;;;494    			vz_cnt_s_=0;
;;;495    			if(vz_cnt_h)
;;;496    				{
;;;497    				vz_cnt_h--;
;;;498    				vz_cnt_h_++;
;;;499    				}
;;;500    			}
;;;501    		}
;;;502    
;;;503    
;;;504    	if(vz_cnt_s<60)
;;;505    		{
;;;506    		vz_cnt_s++;
;;;507    		if(vz_cnt_s>=60)
;;;508    			{
;;;509    			vz_cnt_s=0;
;;;510    			
;;;511    			__ee_vz_cnt--;
;;;512    			lc640_write_int(EE_VZ_CNT,__ee_vz_cnt);
;;;513    			if((!__ee_vz_cnt)||(speedChrgBlckStat==1))
;;;514    				{
;;;515    				spc_stat=spcOFF;
;;;516    						__ee_spc_stat=spcOFF;
;;;517    		lc640_write_int(EE_SPC_STAT,spcOFF);
;;;518    
;;;519    				hv_vz_stat=hvsOFF;
;;;520    		lc640_write(EE_HV_VZ_STAT,hvsOFF);
;;;521    				vz_mem_hndl(0);
;;;522    				}
;;;523    			}
;;;524    		}
;;;525    
;;;526    		}
;;;527    	else 
;;;528    		{
;;;529    		if(((LPC_RTC->SEC)%10)==0)
000534  48c3              LDR      r0,|L1.2116|
000536  7800              LDRB     r0,[r0,#0]
000538  f04f010a          MOV      r1,#0xa
00053c  fbb0f2f1          UDIV     r2,r0,r1
000540  fb010012          MLS      r0,r1,r2,r0
000544  2800              CMP      r0,#0
000546  d108              BNE      |L1.1370|
;;;530    			{
;;;531    			show_mess(	"ÂÛÐÀÂÍÈÂÀÞÙÈÉ ÇÀÐßÄ ",
000548  f2413088          MOV      r0,#0x1388
00054c  9000              STR      r0,[sp,#0]
00054e  a3be              ADR      r3,|L1.2120|
000550  a2c3              ADR      r2,|L1.2144|
000552  a1c9              ADR      r1,|L1.2168|
000554  a0ce              ADR      r0,|L1.2192|
000556  f7fffffe          BL       show_mess
                  |L1.1370|
;;;532    						"    ÇÀÁËÎÊÈÐÎÂÀÍ    ",
;;;533    						"     ÍÅÈÑÏÐÀÂÍÀ     ",
;;;534    						"    ÂÅÍÒÈËßÖÈß!!!   ",
;;;535    						5000);			
;;;536    			}
;;;537    		}
;;;538    /*	if(vz_cnt_s_>=3)
;;;539    		{
;;;540    		if(sk_stat[0]==0)
;;;541    		} */
;;;542    
;;;543    	}
;;;544    
;;;545    
;;;546    } 
00055a  bd38              POP      {r3-r5,pc}
                  |L1.1372|
00055c  f8b40052          LDRH     r0,[r4,#0x52]         ;489  ; vz_cnt_s_
000560  f44f6161          MOV      r1,#0xe10             ;489
000564  2500              MOVS     r5,#0                 ;494
000566  4288              CMP      r0,r1                 ;489
000568  d215              BCS      |L1.1430|
00056a  f1000001          ADD      r0,r0,#1              ;491
00056e  b280              UXTH     r0,r0                 ;491
000570  f8a40052          STRH     r0,[r4,#0x52]         ;491
000574  4288              CMP      r0,r1                 ;492
000576  d30e              BCC      |L1.1430|
000578  f8a45052          STRH     r5,[r4,#0x52]         ;494
00057c  f8b40054          LDRH     r0,[r4,#0x54]         ;495  ; vz_cnt_h
000580  b148              CBZ      r0,|L1.1430|
000582  f1a00001          SUB      r0,r0,#1              ;497
000586  f8240f54          STRH     r0,[r4,#0x54]!        ;497
00058a  8860              LDRH     r0,[r4,#2]            ;498  ; vz_cnt_h_
00058c  f1000001          ADD      r0,r0,#1              ;498
000590  8060              STRH     r0,[r4,#2]            ;498
000592  f1a40454          SUB      r4,r4,#0x54           ;498
                  |L1.1430|
000596  f8b40050          LDRH     r0,[r4,#0x50]         ;504  ; vz_cnt_s
00059a  283c              CMP      r0,#0x3c              ;504
00059c  d2dd              BCS      |L1.1370|
00059e  f1000001          ADD      r0,r0,#1              ;506
0005a2  b280              UXTH     r0,r0                 ;506
0005a4  f8a40050          STRH     r0,[r4,#0x50]         ;506
0005a8  283c              CMP      r0,#0x3c              ;507
0005aa  d3d6              BCC      |L1.1370|
0005ac  f8245f50          STRH     r5,[r4,#0x50]!        ;509
0005b0  8960              LDRH     r0,[r4,#0xa]          ;511  ; __ee_vz_cnt
0005b2  f1a00001          SUB      r0,r0,#1              ;511
0005b6  b201              SXTH     r1,r0                 ;511
0005b8  8161              STRH     r1,[r4,#0xa]          ;511
0005ba  f44f70f9          MOV      r0,#0x1f2             ;512
0005be  f7fffffe          BL       lc640_write_int
0005c2  8960              LDRH     r0,[r4,#0xa]          ;513  ; __ee_vz_cnt
0005c4  f1a40450          SUB      r4,r4,#0x50           ;513
0005c8  b118              CBZ      r0,|L1.1490|
0005ca  48b7              LDR      r0,|L1.2216|
0005cc  8800              LDRH     r0,[r0,#0]            ;513  ; speedChrgBlckStat
0005ce  2801              CMP      r0,#1                 ;513
0005d0  d1c3              BNE      |L1.1370|
                  |L1.1490|
0005d2  7525              STRB     r5,[r4,#0x14]         ;515
0005d4  f8a4505c          STRH     r5,[r4,#0x5c]         ;516
0005d8  2100              MOVS     r1,#0                 ;517
0005da  f44f70f8          MOV      r0,#0x1f0             ;517
0005de  f7fffffe          BL       lc640_write_int
0005e2  48b2              LDR      r0,|L1.2220|
0005e4  7005              STRB     r5,[r0,#0]            ;519
0005e6  2100              MOVS     r1,#0                 ;520
0005e8  f44f70b4          MOV      r0,#0x168             ;520
0005ec  f7fffffe          BL       lc640_write
0005f0  e8bd4038          POP      {r3-r5,lr}            ;521
0005f4  2000              MOVS     r0,#0                 ;521
0005f6  f7ffbffe          B.W      vz_mem_hndl
;;;547    
                          ENDP

                  kb_init PROC
;;;551    //-----------------------------------------------
;;;552    void kb_init(void)
0005fa  48ad              LDR      r0,|L1.2224|
;;;553    {
;;;554    main_kb_cnt=(TBAT*60)-60/*120*/;
0005fc  f06f013b          MVN      r1,#0x3b
000600  8800              LDRH     r0,[r0,#0]  ; TBAT
000602  ebc01000          RSB      r0,r0,r0,LSL #4
000606  eb010080          ADD      r0,r1,r0,LSL #2
00060a  4985              LDR      r1,|L1.2080|
00060c  f8a10040          STRH     r0,[r1,#0x40]
;;;555    }
000610  4770              BX       lr
;;;556    
                          ENDP

                  kb_hndl PROC
;;;557    //-----------------------------------------------
;;;558    void kb_hndl(void)
000612  e92d5ff0          PUSH     {r4-r12,lr}
;;;559    {
;;;560    
;;;561    static signed short ibat[2],ibat_[2];
;;;562    #ifdef UKU_TELECORE2015
;;;563    if(((++main_kb_cnt>=TBAT*60)&&(TBAT))&&(BAT_TYPE==0))
;;;564    #else 
;;;565    if(((++main_kb_cnt>=TBAT*60)&&(TBAT)))
000616  f8df8208          LDR      r8,|L1.2080|
;;;566    #endif
;;;567    	{
;;;568    	main_kb_cnt=0;
;;;569    	
;;;570    	kb_start[0]=0;
;;;571    	kb_start[1]=0;
;;;572    	kb_start_ips=0;
;;;573    
;;;574    	if( (BAT_IS_ON[0]==bisON) && (bat[0]._Ub>80) && ( (abs(bat[0]._Ib)<IKB) || (bat[0]._av&1) ) ) kb_start[0]=1;
;;;575    	if( (BAT_IS_ON[1]==bisON) && (bat[1]._Ub>80) && ( (abs(bat[1]._Ib)<IKB) || (bat[1]._av&1) ) ) kb_start[1]=1;
;;;576    #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;577    	if( (!ips_bat_av_vzvod)                      && ((abs(Ib_ips_termokompensat)<IKB) || (bat_ips._av&1) ) ) kb_start_ips=1;
00061a  f8dfa298          LDR      r10,|L1.2228|
00061e  2500              MOVS     r5,#0                 ;565
000620  f8b80040          LDRH     r0,[r8,#0x40]         ;565  ; main_kb_cnt
000624  4ea4              LDR      r6,|L1.2232|
000626  1c40              ADDS     r0,r0,#1              ;565
000628  b201              SXTH     r1,r0                 ;565
00062a  48a1              LDR      r0,|L1.2224|
00062c  f8a81040          STRH     r1,[r8,#0x40]         ;565
000630  f8df9288          LDR      r9,|L1.2236|
000634  f9b00000          LDRSH    r0,[r0,#0]            ;565  ; TBAT
;;;578    #endif	
;;;579    	if( (net_av) || (num_of_wrks_bps==0) || ( (spc_stat!=spcOFF) && (spc_stat!=spcVZ) ) ) 
;;;580    		{
;;;581    		kb_start[0]=0;
;;;582    		kb_start[1]=0;
;;;583    		kb_start_ips=0;
;;;584    		}
;;;585    
;;;586    	if((kb_start[0]==1)||(kb_start[1]==1)||(kb_start_ips==1))
;;;587    		{
;;;588    		kb_cnt_1lev=10;
000638  270a              MOVS     r7,#0xa
00063a  ebc01200          RSB      r2,r0,r0,LSL #4       ;565
00063e  f04f0b01          MOV      r11,#1                ;574
000642  f1080446          ADD      r4,r8,#0x46           ;570
000646  ebb10f82          CMP      r1,r2,LSL #2          ;565
00064a  db61              BLT      |L1.1808|
00064c  b3f0              CBZ      r0,|L1.1740|
00064e  f8a85040          STRH     r5,[r8,#0x40]         ;568
000652  7025              STRB     r5,[r4,#0]            ;570
000654  7065              STRB     r5,[r4,#1]            ;571
000656  f888500e          STRB     r5,[r8,#0xe]          ;572
00065a  4899              LDR      r0,|L1.2240|
00065c  7800              LDRB     r0,[r0,#0]            ;574  ; BAT_IS_ON
00065e  2855              CMP      r0,#0x55              ;574
000660  d111              BNE      |L1.1670|
000662  f9b60002          LDRSH    r0,[r6,#2]            ;574  ; bat
000666  2850              CMP      r0,#0x50              ;574
000668  dd0d              BLE      |L1.1670|
00066a  f9b60008          LDRSH    r0,[r6,#8]            ;574  ; bat
00066e  f7fffffe          BL       abs
000672  f9b91000          LDRSH    r1,[r9,#0]            ;574  ; IKB
000676  4288              CMP      r0,r1                 ;574
000678  db03              BLT      |L1.1666|
00067a  f896003d          LDRB     r0,[r6,#0x3d]         ;574  ; bat
00067e  07c0              LSLS     r0,r0,#31             ;574
000680  d001              BEQ      |L1.1670|
                  |L1.1666|
000682  f884b000          STRB     r11,[r4,#0]           ;574
                  |L1.1670|
000686  488e              LDR      r0,|L1.2240|
000688  7840              LDRB     r0,[r0,#1]            ;575  ; BAT_IS_ON
00068a  2855              CMP      r0,#0x55              ;575
00068c  d111              BNE      |L1.1714|
00068e  f9b6004e          LDRSH    r0,[r6,#0x4e]         ;575  ; bat
000692  2850              CMP      r0,#0x50              ;575
000694  dd0d              BLE      |L1.1714|
000696  f9b60054          LDRSH    r0,[r6,#0x54]         ;575  ; bat
00069a  f7fffffe          BL       abs
00069e  f9b91000          LDRSH    r1,[r9,#0]            ;575  ; IKB
0006a2  4288              CMP      r0,r1                 ;575
0006a4  db03              BLT      |L1.1710|
0006a6  f8960089          LDRB     r0,[r6,#0x89]         ;575  ; bat
0006aa  07c0              LSLS     r0,r0,#31             ;575
0006ac  d001              BEQ      |L1.1714|
                  |L1.1710|
0006ae  f884b001          STRB     r11,[r4,#1]           ;575
                  |L1.1714|
0006b2  4884              LDR      r0,|L1.2244|
0006b4  7800              LDRB     r0,[r0,#0]            ;577  ; ips_bat_av_vzvod
0006b6  b980              CBNZ     r0,|L1.1754|
0006b8  f9ba0000          LDRSH    r0,[r10,#0]           ;577  ; Ib_ips_termokompensat
0006bc  f7fffffe          BL       abs
0006c0  f9b91000          LDRSH    r1,[r9,#0]            ;577  ; IKB
0006c4  4288              CMP      r0,r1                 ;577
0006c6  db06              BLT      |L1.1750|
0006c8  487f              LDR      r0,|L1.2248|
0006ca  e000              B        |L1.1742|
                  |L1.1740|
0006cc  e020              B        |L1.1808|
                  |L1.1742|
0006ce  f890003d          LDRB     r0,[r0,#0x3d]         ;577  ; bat_ips
0006d2  07c0              LSLS     r0,r0,#31             ;577
0006d4  d001              BEQ      |L1.1754|
                  |L1.1750|
0006d6  f888b00e          STRB     r11,[r8,#0xe]         ;577
                  |L1.1754|
0006da  487c              LDR      r0,|L1.2252|
0006dc  7800              LDRB     r0,[r0,#0]            ;579  ; net_av
0006de  b938              CBNZ     r0,|L1.1776|
0006e0  f898000f          LDRB     r0,[r8,#0xf]          ;579  ; num_of_wrks_bps
0006e4  b120              CBZ      r0,|L1.1776|
0006e6  f8980014          LDRB     r0,[r8,#0x14]         ;579  ; spc_stat
0006ea  b128              CBZ      r0,|L1.1784|
0006ec  2802              CMP      r0,#2                 ;579
0006ee  d003              BEQ      |L1.1784|
                  |L1.1776|
0006f0  7025              STRB     r5,[r4,#0]            ;581
0006f2  7065              STRB     r5,[r4,#1]            ;582
0006f4  f888500e          STRB     r5,[r8,#0xe]          ;583
                  |L1.1784|
0006f8  7820              LDRB     r0,[r4,#0]            ;586  ; kb_start
0006fa  2801              CMP      r0,#1                 ;586
0006fc  d020              BEQ      |L1.1856|
0006fe  7860              LDRB     r0,[r4,#1]            ;586  ; kb_start
000700  2801              CMP      r0,#1                 ;586
000702  d01d              BEQ      |L1.1856|
000704  f898000e          LDRB     r0,[r8,#0xe]          ;586  ; kb_start_ips
000708  2801              CMP      r0,#1                 ;586
00070a  d019              BEQ      |L1.1856|
;;;589    		}
;;;590    	else kb_cnt_1lev=0;
00070c  f8a85042          STRH     r5,[r8,#0x42]
                  |L1.1808|
;;;591    	}
;;;592    
;;;593    if(kb_cnt_1lev)
000710  4641              MOV      r1,r8
000712  f9b80042          LDRSH    r0,[r8,#0x42]  ; kb_cnt_1lev
;;;594    	{
;;;595    	kb_cnt_1lev--;
;;;596    
;;;597    	if(kb_cnt_1lev>5)mess_send(MESS2CNTRL_HNDL,PARAM_CNTRL_STAT_PLUS,30,15);
;;;598    	else if(kb_cnt_1lev>0) mess_send(MESS2CNTRL_HNDL,PARAM_CNTRL_STAT_MINUS,30,15);
;;;599    
;;;600    
;;;601    	if(kb_cnt_1lev==5)
;;;602    		{
;;;603    		ibat[0]=abs(bat[0]._Ib);
000716  f8df8108          LDR      r8,|L1.2080|
00071a  2800              CMP      r0,#0                 ;593
00071c  f108086a          ADD      r8,r8,#0x6a
000720  d077              BEQ      |L1.2066|
000722  f1a00001          SUB      r0,r0,#1              ;595
000726  b200              SXTH     r0,r0                 ;595
000728  468b              MOV      r11,r1                ;595
00072a  f8a10042          STRH     r0,[r1,#0x42]         ;595
00072e  2805              CMP      r0,#5                 ;597
000730  dd09              BLE      |L1.1862|
000732  230f              MOVS     r3,#0xf               ;597
000734  221e              MOVS     r2,#0x1e              ;597
000736  2164              MOVS     r1,#0x64              ;597
000738  20e1              MOVS     r0,#0xe1              ;597
00073a  f7fffffe          BL       mess_send
00073e  e00a              B        |L1.1878|
                  |L1.1856|
000740  f8a87042          STRH     r7,[r8,#0x42]         ;588
000744  e7e4              B        |L1.1808|
                  |L1.1862|
000746  2800              CMP      r0,#0                 ;598
000748  dd05              BLE      |L1.1878|
00074a  230f              MOVS     r3,#0xf               ;598
00074c  221e              MOVS     r2,#0x1e              ;598
00074e  2169              MOVS     r1,#0x69              ;598
000750  20e1              MOVS     r0,#0xe1              ;598
000752  f7fffffe          BL       mess_send
                  |L1.1878|
000756  f8bb0042          LDRH     r0,[r11,#0x42]        ;601  ; kb_cnt_1lev
00075a  2805              CMP      r0,#5                 ;601
00075c  d111              BNE      |L1.1922|
00075e  f9b60008          LDRSH    r0,[r6,#8]  ; bat
000762  f7fffffe          BL       abs
000766  f8a80000          STRH     r0,[r8,#0]
;;;604    		ibat[1]=abs(bat[1]._Ib);
00076a  f9b60054          LDRSH    r0,[r6,#0x54]  ; bat
00076e  f7fffffe          BL       abs
000772  f8a80002          STRH     r0,[r8,#2]
;;;605    		ibat_ips=abs(Ib_ips_termokompensat);
000776  f9ba0000          LDRSH    r0,[r10,#0]  ; Ib_ips_termokompensat
00077a  f7fffffe          BL       abs
00077e  f8ab0048          STRH     r0,[r11,#0x48]
                  |L1.1922|
;;;606    		}
;;;607    	
;;;608    	if(kb_cnt_1lev==0)
000782  4827              LDR      r0,|L1.2080|
000784  f8b00042          LDRH     r0,[r0,#0x42]  ; kb_cnt_1lev
000788  2800              CMP      r0,#0
00078a  d143              BNE      |L1.2068|
;;;609    		{
;;;610    		ibat_[0]=abs(bat[0]._Ib);
00078c  f9b60008          LDRSH    r0,[r6,#8]  ; bat
000790  f7fffffe          BL       abs
000794  f8dfb088          LDR      r11,|L1.2080|
000798  f10b0b6e          ADD      r11,r11,#0x6e
00079c  f8ab0000          STRH     r0,[r11,#0]
;;;611    		ibat_[1]=abs(bat[1]._Ib);
0007a0  f9b60054          LDRSH    r0,[r6,#0x54]  ; bat
0007a4  f7fffffe          BL       abs
0007a8  f8ab0002          STRH     r0,[r11,#2]
;;;612    		ibat_ips_=abs(Ib_ips_termokompensat);
0007ac  f9ba0000          LDRSH    r0,[r10,#0]  ; Ib_ips_termokompensat
0007b0  f7fffffe          BL       abs
0007b4  f8dfa068          LDR      r10,|L1.2080|
0007b8  f8aa004a          STRH     r0,[r10,#0x4a]
;;;613    
;;;614    		kb_cnt_2lev=0;
0007bc  f8aa5044          STRH     r5,[r10,#0x44]
;;;615    
;;;616    
;;;617    		if(( (ibat[0]+ibat_[0]) < IKB )&& (kb_start[0]==1))
0007c0  f9b80000          LDRSH    r0,[r8,#0]  ; ibat
0007c4  f9bb1000          LDRSH    r1,[r11,#0]  ; ibat_
0007c8  4408              ADD      r0,r0,r1
0007ca  f9b91000          LDRSH    r1,[r9,#0]  ; IKB
0007ce  4288              CMP      r0,r1
0007d0  da02              BGE      |L1.2008|
0007d2  7820              LDRB     r0,[r4,#0]  ; kb_start
0007d4  2801              CMP      r0,#1
0007d6  d01e              BEQ      |L1.2070|
                  |L1.2008|
;;;618    			{
;;;619    			kb_cnt_2lev=10;  
;;;620    			}
;;;621    		else if(bat[0]._Ub>200)
0007d8  f9b60002          LDRSH    r0,[r6,#2]  ; bat
0007dc  28c8              CMP      r0,#0xc8
0007de  dd04              BLE      |L1.2026|
;;;622    			{
;;;623    			kb_start[0]=0;
0007e0  7025              STRB     r5,[r4,#0]
;;;624    			avar_bat_hndl(0,0);
0007e2  2100              MOVS     r1,#0
0007e4  4608              MOV      r0,r1
0007e6  f7fffffe          BL       avar_bat_hndl
                  |L1.2026|
;;;625    			}
;;;626    		
;;;627    		if(( (ibat[1]+ibat_[1]) < IKB ) && (kb_start[1]==1))
0007ea  f9b80002          LDRSH    r0,[r8,#2]  ; ibat
0007ee  f9bb1002          LDRSH    r1,[r11,#2]  ; ibat_
0007f2  4408              ADD      r0,r0,r1
0007f4  f9b91000          LDRSH    r1,[r9,#0]  ; IKB
0007f8  4288              CMP      r0,r1
0007fa  da02              BGE      |L1.2050|
0007fc  7860              LDRB     r0,[r4,#1]  ; kb_start
0007fe  2801              CMP      r0,#1
000800  d066              BEQ      |L1.2256|
                  |L1.2050|
;;;628    			{
;;;629    			kb_cnt_2lev=10;     
;;;630    			}
;;;631    		else  if(bat[1]._Ub>200)
000802  f9b6004e          LDRSH    r0,[r6,#0x4e]  ; bat
000806  28c8              CMP      r0,#0xc8
000808  dd65              BLE      |L1.2262|
;;;632    			{
;;;633    			kb_start[1]=0;
00080a  7065              STRB     r5,[r4,#1]
;;;634    			avar_bat_hndl(1,0);
00080c  2100              MOVS     r1,#0
00080e  2001              MOVS     r0,#1
000810  e05f              B        |L1.2258|
                  |L1.2066|
000812  e081              B        |L1.2328|
                  |L1.2068|
000814  e072              B        |L1.2300|
                  |L1.2070|
000816  e073              B        |L1.2304|
                  |L1.2072|
                          DCD      0x40024000
                  |L1.2076|
                          DCD      AVZ
                  |L1.2080|
                          DCD      ||area_number.23||
                  |L1.2084|
                          DCD      YEAR_AVZ
                  |L1.2088|
                          DCD      MONTH_AVZ
                  |L1.2092|
                          DCD      DATE_AVZ
                  |L1.2096|
                          DCD      HOUR_AVZ
                  |L1.2100|
                          DCD      MIN_AVZ
                  |L1.2104|
                          DCD      SEC_AVZ
                  |L1.2108|
                          DCD      AVZ_TIME
                  |L1.2112|
                          DCD      sk_stat
                  |L1.2116|
                          DCD      0x40024020
                  |L1.2120|
000848  20202020          DCB      "    ",194,197,205,210,200,203,223,214,200,223,"!!!   ",0
00084c  c2c5cdd2
000850  c8cbdfd6
000854  c8df2121
000858  21202020
00085c  00      
00085d  00                DCB      0
00085e  00                DCB      0
00085f  00                DCB      0
                  |L1.2144|
000860  20202020          DCB      "     ",205,197,200,209,207,208,192,194,205,192,"     ",0
000864  20cdc5c8
000868  d1cfd0c0
00086c  c2cdc020
000870  20202020
000874  00      
000875  00                DCB      0
000876  00                DCB      0
000877  00                DCB      0
                  |L1.2168|
000878  20202020          DCB      "    ",199,192,193,203,206,202,200,208,206,194,192,205," "
00087c  c7c0c1cb
000880  cecac8d0
000884  cec2c0cd
000888  20      
000889  20202000          DCB      "   ",0
00088d  00                DCB      0
00088e  00                DCB      0
00088f  00                DCB      0
                  |L1.2192|
000890  c2dbd0c0          DCB      194,219,208,192,194,205,200,194,192,222,217,200,201," ",199
000894  c2cdc8c2
000898  c0ded9c8
00089c  c920c7  
00089f  c0d0dfc4          DCB      192,208,223,196," ",0
0008a3  2000    
0008a5  00                DCB      0
0008a6  00                DCB      0
0008a7  00                DCB      0
                  |L1.2216|
                          DCD      speedChrgBlckStat
                  |L1.2220|
                          DCD      hv_vz_stat
                  |L1.2224|
                          DCD      TBAT
                  |L1.2228|
                          DCD      Ib_ips_termokompensat
                  |L1.2232|
                          DCD      bat
                  |L1.2236|
                          DCD      IKB
                  |L1.2240|
                          DCD      BAT_IS_ON
                  |L1.2244|
                          DCD      ips_bat_av_vzvod
                  |L1.2248|
                          DCD      bat_ips
                  |L1.2252|
                          DCD      net_av
                  |L1.2256|
0008d0  e019              B        |L1.2310|
                  |L1.2258|
0008d2  f7fffffe          BL       avar_bat_hndl
                  |L1.2262|
;;;635    			}
;;;636    #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;637    		if(( (ibat_ips+ibat_ips_) < IKB ) && (kb_start_ips==1))
0008d6  f9ba0048          LDRSH    r0,[r10,#0x48]  ; ibat_ips
0008da  f9ba104a          LDRSH    r1,[r10,#0x4a]  ; ibat_ips_
0008de  4408              ADD      r0,r0,r1
0008e0  f9b91000          LDRSH    r1,[r9,#0]  ; IKB
0008e4  4288              CMP      r0,r1
0008e6  da09              BGE      |L1.2300|
0008e8  f89a000e          LDRB     r0,[r10,#0xe]  ; kb_start_ips
0008ec  2801              CMP      r0,#1
0008ee  d105              BNE      |L1.2300|
;;;638    			{
;;;639    			if(KB_ALGORITM==1)
0008f0  48fb              LDR      r0,|L1.3296|
0008f2  8800              LDRH     r0,[r0,#0]  ; KB_ALGORITM
0008f4  2801              CMP      r0,#1
0008f6  d009              BEQ      |L1.2316|
;;;640    				{
;;;641    				avar_bat_ips_hndl(1);
;;;642    				kb_start_ips=0;
;;;643    				}
;;;644    			else
;;;645    				{
;;;646    				kb_cnt_2lev=10;     
0008f8  f8aa7044          STRH     r7,[r10,#0x44]
                  |L1.2300|
;;;647    				}
;;;648    			}
;;;649    #endif
;;;650    		}	
;;;651    
;;;652    
;;;653    	}
;;;654    else if(kb_cnt_2lev)
;;;655    	{
;;;656    	kb_cnt_2lev--;
;;;657    
;;;658    	if(kb_cnt_2lev>5)mess_send(MESS2CNTRL_HNDL,PARAM_CNTRL_STAT_PLUS,200,15);
;;;659    	else if(kb_cnt_2lev>0) mess_send(MESS2CNTRL_HNDL,PARAM_CNTRL_STAT_MINUS,200,15);
;;;660    
;;;661    
;;;662    	if(kb_cnt_2lev==5)
;;;663    		{
;;;664    		ibat[0]=abs(bat[0]._Ib);
;;;665    		ibat[1]=abs(bat[1]._Ib);
;;;666    		ibat_ips=abs(Ib_ips_termokompensat);
;;;667    		}
;;;668    	
;;;669    	if(kb_cnt_2lev==0)
;;;670    		{
;;;671    		ibat_[0]=abs(bat[0]._Ib);
;;;672    		ibat_[1]=abs(bat[1]._Ib);
;;;673    		ibat_ips_=abs(Ib_ips_termokompensat);
;;;674    
;;;675    		kb_full_ver=0;
;;;676    
;;;677    		if(( (ibat[0]+ibat_[0]) < IKB ) && (kb_start[0]==1))
;;;678    			{
;;;679    			kb_full_ver=1;  
;;;680    			}
;;;681    		else if(bat[0]._Ub>200)			
;;;682    			{
;;;683    			kb_start[0]=0;
;;;684    			avar_bat_hndl(0,0);
;;;685    			}
;;;686    
;;;687    		if(( (ibat[1]+ibat_[1]) < IKB ) && (kb_start[1]==1))
;;;688    			{
;;;689    			kb_full_ver=1;     
;;;690    			}
;;;691    		else	if(bat[1]._Ub>200)		
;;;692    			{
;;;693    			kb_start[1]=0;
;;;694    			avar_bat_hndl(1,0);
;;;695    			}
;;;696    #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;697    		if(( (ibat_ips+ibat_ips_) < IKB )  && (kb_start_ips==1))
;;;698    			{
;;;699    			if(KB_ALGORITM==2)
;;;700    				{
;;;701    				avar_bat_ips_hndl(1);
;;;702    				kb_start_ips=0;
;;;703    				}
;;;704    			else
;;;705    				{
;;;706    				kb_full_ver=1;     
;;;707    				}
;;;708    			}
;;;709    #endif
;;;710    		}	
;;;711    	}
;;;712    
;;;713    else if(kb_full_ver)
;;;714    	{
;;;715    	
;;;716    	mess_send(MESS2CNTRL_HNDL,PARAM_CNTRL_STAT_STEP_DOWN,0,15);
;;;717    
;;;718    	if( abs(bat[0]._Ib) > IKB ) 
;;;719    		{
;;;720    		if(kb_start[0]==1)
;;;721    			{
;;;722    			kb_start[0]=0;
;;;723    			avar_bat_hndl(0,0);
;;;724    			}
;;;725    		}
;;;726    
;;;727    	if( abs(bat[1]._Ib) > IKB ) 
;;;728    		{
;;;729    		if(kb_start[1]==1)
;;;730    			{
;;;731    			kb_start[1]=0;
;;;732    			avar_bat_hndl(1,0);
;;;733    			}
;;;734    		}
;;;735    #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;736    	if( abs(Ib_ips_termokompensat) > IKB ) 
;;;737    		{
;;;738    		if(kb_start_ips==1)
;;;739    			{
;;;740    			kb_start_ips=0;
;;;741    			avar_bat_ips_hndl(0);
;;;742    			}
;;;743    		}
;;;744    #endif
;;;745    
;;;746    	if ((kb_start[0]==0) && (kb_start[1]==0) && (kb_start_ips==0)) 
;;;747    		{
;;;748    		kb_full_ver=0;
;;;749    		}
;;;750    
;;;751    	if(( (mess_find(MESS2KB_HNDL))	&& (mess_data[0]==PARAM_CNTRL_IS_DOWN) ) || (load_U<(USIGN*10)) )
;;;752    		{
;;;753    		kb_full_ver=0;
;;;754    		if((kb_start[0]==1)&&((load_I>(2*IKB)/10))&&(!(bat[0]._av&0x01))) avar_bat_hndl(0,1);
;;;755    		if((kb_start[1]==1)&&((load_I>(2*IKB)/10))&&(!(bat[1]._av&0x01))) avar_bat_hndl(1,1);
;;;756    #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;757    		if((kb_start_ips==1)&&((load_I>(2*IKB)/10))&&(!(bat_ips._av&0x01))) avar_bat_ips_hndl(1);
;;;758    #endif
;;;759    		}
;;;760    	}
;;;761    
;;;762    }
0008fc  e8bd9ff0          POP      {r4-r12,pc}
                  |L1.2304|
000900  f8aa7044          STRH     r7,[r10,#0x44]        ;619
000904  e771              B        |L1.2026|
                  |L1.2310|
000906  f8aa7044          STRH     r7,[r10,#0x44]        ;629
00090a  e7e4              B        |L1.2262|
                  |L1.2316|
00090c  2001              MOVS     r0,#1                 ;641
00090e  f7fffffe          BL       avar_bat_ips_hndl
000912  f88a500e          STRB     r5,[r10,#0xe]         ;642
                  |L1.2326|
000916  e7f1              B        |L1.2300|
                  |L1.2328|
000918  f9b10044          LDRSH    r0,[r1,#0x44]         ;654  ; kb_cnt_2lev
00091c  b3f0              CBZ      r0,|L1.2460|
00091e  f1a00001          SUB      r0,r0,#1              ;656
000922  b200              SXTH     r0,r0                 ;656
000924  460f              MOV      r7,r1                 ;656
000926  f8a10044          STRH     r0,[r1,#0x44]         ;656
00092a  2805              CMP      r0,#5                 ;658
00092c  dd06              BLE      |L1.2364|
00092e  230f              MOVS     r3,#0xf               ;658
000930  22c8              MOVS     r2,#0xc8              ;658
000932  2164              MOVS     r1,#0x64              ;658
000934  20e1              MOVS     r0,#0xe1              ;658
000936  f7fffffe          BL       mess_send
00093a  e007              B        |L1.2380|
                  |L1.2364|
00093c  2800              CMP      r0,#0                 ;659
00093e  dd05              BLE      |L1.2380|
000940  230f              MOVS     r3,#0xf               ;659
000942  22c8              MOVS     r2,#0xc8              ;659
000944  2169              MOVS     r1,#0x69              ;659
000946  20e1              MOVS     r0,#0xe1              ;659
000948  f7fffffe          BL       mess_send
                  |L1.2380|
00094c  f8b70044          LDRH     r0,[r7,#0x44]         ;662  ; kb_cnt_2lev
000950  2805              CMP      r0,#5                 ;662
000952  d111              BNE      |L1.2424|
000954  f9b60008          LDRSH    r0,[r6,#8]            ;664  ; bat
000958  f7fffffe          BL       abs
00095c  f8a80000          STRH     r0,[r8,#0]            ;664
000960  f9b60054          LDRSH    r0,[r6,#0x54]         ;665  ; bat
000964  f7fffffe          BL       abs
000968  f8a80002          STRH     r0,[r8,#2]            ;665
00096c  f9ba0000          LDRSH    r0,[r10,#0]           ;666  ; Ib_ips_termokompensat
000970  f7fffffe          BL       abs
000974  f8a70048          STRH     r0,[r7,#0x48]         ;666
                  |L1.2424|
000978  48da              LDR      r0,|L1.3300|
00097a  f8b00044          LDRH     r0,[r0,#0x44]         ;669  ; kb_cnt_2lev
00097e  2800              CMP      r0,#0                 ;669
                  |L1.2432|
000980  d1bc              BNE      |L1.2300|
000982  f9b60008          LDRSH    r0,[r6,#8]            ;671  ; bat
000986  f7fffffe          BL       abs
00098a  4fd6              LDR      r7,|L1.3300|
00098c  376e              ADDS     r7,r7,#0x6e           ;671
00098e  8038              STRH     r0,[r7,#0]            ;671
000990  f9b60054          LDRSH    r0,[r6,#0x54]         ;672  ; bat
000994  f7fffffe          BL       abs
000998  8078              STRH     r0,[r7,#2]            ;672
00099a  e000              B        |L1.2462|
                  |L1.2460|
00099c  e054              B        |L1.2632|
                  |L1.2462|
00099e  f9ba0000          LDRSH    r0,[r10,#0]           ;673  ; Ib_ips_termokompensat
0009a2  f7fffffe          BL       abs
0009a6  f8dfa33c          LDR      r10,|L1.3300|
0009aa  f8aa004a          STRH     r0,[r10,#0x4a]        ;673
0009ae  f88a500d          STRB     r5,[r10,#0xd]         ;675
0009b2  f9b80000          LDRSH    r0,[r8,#0]            ;677  ; ibat
0009b6  f9b71000          LDRSH    r1,[r7,#0]            ;677  ; ibat_
0009ba  4408              ADD      r0,r0,r1              ;677
0009bc  f9b91000          LDRSH    r1,[r9,#0]            ;677  ; IKB
0009c0  4288              CMP      r0,r1                 ;677
0009c2  da02              BGE      |L1.2506|
0009c4  7820              LDRB     r0,[r4,#0]            ;677  ; kb_start
0009c6  2801              CMP      r0,#1                 ;677
0009c8  d032              BEQ      |L1.2608|
                  |L1.2506|
0009ca  f9b60002          LDRSH    r0,[r6,#2]            ;681  ; bat
0009ce  28c8              CMP      r0,#0xc8              ;681
0009d0  dd04              BLE      |L1.2524|
0009d2  7025              STRB     r5,[r4,#0]            ;683
0009d4  2100              MOVS     r1,#0                 ;684
0009d6  4608              MOV      r0,r1                 ;684
0009d8  f7fffffe          BL       avar_bat_hndl
                  |L1.2524|
0009dc  f9b80002          LDRSH    r0,[r8,#2]            ;687  ; ibat
0009e0  f9b71002          LDRSH    r1,[r7,#2]            ;687  ; ibat_
0009e4  4408              ADD      r0,r0,r1              ;687
0009e6  f9b91000          LDRSH    r1,[r9,#0]            ;687  ; IKB
0009ea  4288              CMP      r0,r1                 ;687
0009ec  da02              BGE      |L1.2548|
0009ee  7860              LDRB     r0,[r4,#1]            ;687  ; kb_start
0009f0  2801              CMP      r0,#1                 ;687
0009f2  d020              BEQ      |L1.2614|
                  |L1.2548|
0009f4  f9b6004e          LDRSH    r0,[r6,#0x4e]         ;691  ; bat
0009f8  28c8              CMP      r0,#0xc8              ;691
0009fa  dd04              BLE      |L1.2566|
0009fc  7065              STRB     r5,[r4,#1]            ;693
0009fe  2100              MOVS     r1,#0                 ;694
000a00  2001              MOVS     r0,#1                 ;694
000a02  f7fffffe          BL       avar_bat_hndl
                  |L1.2566|
000a06  f9ba0048          LDRSH    r0,[r10,#0x48]        ;697  ; ibat_ips
000a0a  f9ba104a          LDRSH    r1,[r10,#0x4a]        ;697  ; ibat_ips_
000a0e  4408              ADD      r0,r0,r1              ;697
000a10  f9b91000          LDRSH    r1,[r9,#0]            ;697  ; IKB
000a14  4288              CMP      r0,r1                 ;697
000a16  f6bfaf7e          BGE      |L1.2326|
000a1a  f89a000e          LDRB     r0,[r10,#0xe]         ;697  ; kb_start_ips
000a1e  2801              CMP      r0,#1                 ;697
000a20  d1ae              BNE      |L1.2432|
000a22  48af              LDR      r0,|L1.3296|
000a24  8800              LDRH     r0,[r0,#0]            ;699  ; KB_ALGORITM
000a26  2802              CMP      r0,#2                 ;699
000a28  d008              BEQ      |L1.2620|
000a2a  f88ab00d          STRB     r11,[r10,#0xd]        ;706
                  |L1.2606|
000a2e  e765              B        |L1.2300|
                  |L1.2608|
000a30  f88ab00d          STRB     r11,[r10,#0xd]        ;679
000a34  e7d2              B        |L1.2524|
                  |L1.2614|
000a36  f88ab00d          STRB     r11,[r10,#0xd]        ;689
000a3a  e7e4              B        |L1.2566|
                  |L1.2620|
000a3c  2001              MOVS     r0,#1                 ;701
000a3e  f7fffffe          BL       avar_bat_ips_hndl
000a42  f88a500e          STRB     r5,[r10,#0xe]         ;702
000a46  e759              B        |L1.2300|
                  |L1.2632|
000a48  7b48              LDRB     r0,[r1,#0xd]          ;713  ; kb_full_ver
000a4a  4688              MOV      r8,r1                 ;713
000a4c  2800              CMP      r0,#0                 ;713
000a4e  d0ee              BEQ      |L1.2606|
000a50  230f              MOVS     r3,#0xf               ;716
000a52  2200              MOVS     r2,#0                 ;716
000a54  216e              MOVS     r1,#0x6e              ;716
000a56  20e1              MOVS     r0,#0xe1              ;716
000a58  f7fffffe          BL       mess_send
000a5c  f9b60008          LDRSH    r0,[r6,#8]            ;718  ; bat
000a60  f7fffffe          BL       abs
000a64  f9b91000          LDRSH    r1,[r9,#0]            ;718  ; IKB
000a68  4288              CMP      r0,r1                 ;718
000a6a  dd07              BLE      |L1.2684|
000a6c  7820              LDRB     r0,[r4,#0]            ;720  ; kb_start
000a6e  2801              CMP      r0,#1                 ;720
000a70  d104              BNE      |L1.2684|
000a72  7025              STRB     r5,[r4,#0]            ;722
000a74  2100              MOVS     r1,#0                 ;723
000a76  4608              MOV      r0,r1                 ;723
000a78  f7fffffe          BL       avar_bat_hndl
                  |L1.2684|
000a7c  f9b60054          LDRSH    r0,[r6,#0x54]         ;727  ; bat
000a80  f7fffffe          BL       abs
000a84  f9b91000          LDRSH    r1,[r9,#0]            ;727  ; IKB
000a88  4288              CMP      r0,r1                 ;727
000a8a  dd06              BLE      |L1.2714|
000a8c  7860              LDRB     r0,[r4,#1]            ;729  ; kb_start
000a8e  2801              CMP      r0,#1                 ;729
000a90  d103              BNE      |L1.2714|
000a92  7065              STRB     r5,[r4,#1]            ;731
000a94  2100              MOVS     r1,#0                 ;732
000a96  f7fffffe          BL       avar_bat_hndl
                  |L1.2714|
000a9a  f9ba0000          LDRSH    r0,[r10,#0]           ;736  ; Ib_ips_termokompensat
000a9e  f7fffffe          BL       abs
000aa2  f9b91000          LDRSH    r1,[r9,#0]            ;736  ; IKB
000aa6  4288              CMP      r0,r1                 ;736
000aa8  dd08              BLE      |L1.2748|
000aaa  f898000e          LDRB     r0,[r8,#0xe]          ;738  ; kb_start_ips
000aae  2801              CMP      r0,#1                 ;738
000ab0  d104              BNE      |L1.2748|
000ab2  f888500e          STRB     r5,[r8,#0xe]          ;740
000ab6  2000              MOVS     r0,#0                 ;741
000ab8  f7fffffe          BL       avar_bat_ips_hndl
                  |L1.2748|
000abc  7820              LDRB     r0,[r4,#0]            ;746  ; kb_start
000abe  b930              CBNZ     r0,|L1.2766|
000ac0  7860              LDRB     r0,[r4,#1]            ;746  ; kb_start
000ac2  b920              CBNZ     r0,|L1.2766|
000ac4  f898000e          LDRB     r0,[r8,#0xe]          ;746  ; kb_start_ips
000ac8  b908              CBNZ     r0,|L1.2766|
000aca  f888500d          STRB     r5,[r8,#0xd]          ;748
                  |L1.2766|
000ace  20e6              MOVS     r0,#0xe6              ;751
000ad0  f7fffffe          BL       mess_find
000ad4  b118              CBZ      r0,|L1.2782|
000ad6  4884              LDR      r0,|L1.3304|
000ad8  6800              LDR      r0,[r0,#0]            ;751  ; mess_data
000ada  28e7              CMP      r0,#0xe7              ;751
000adc  d00a              BEQ      |L1.2804|
                  |L1.2782|
000ade  4883              LDR      r0,|L1.3308|
000ae0  4983              LDR      r1,|L1.3312|
000ae2  f9b00000          LDRSH    r0,[r0,#0]            ;751  ; USIGN
000ae6  f9b11000          LDRSH    r1,[r1,#0]            ;751  ; load_U
000aea  eb000080          ADD      r0,r0,r0,LSL #2       ;751
000aee  ebb10f40          CMP      r1,r0,LSL #1          ;751
                  |L1.2802|
000af2  da9c              BGE      |L1.2606|
                  |L1.2804|
000af4  f888500d          STRB     r5,[r8,#0xd]          ;753
000af8  7820              LDRB     r0,[r4,#0]            ;754  ; kb_start
000afa  4d7e              LDR      r5,|L1.3316|
000afc  2801              CMP      r0,#1                 ;754
000afe  d10f              BNE      |L1.2848|
000b00  f9b90000          LDRSH    r0,[r9,#0]            ;754  ; IKB
000b04  f9b51000          LDRSH    r1,[r5,#0]            ;754  ; load_I
000b08  0040              LSLS     r0,r0,#1              ;754
000b0a  fb90f0f7          SDIV     r0,r0,r7              ;754
000b0e  4288              CMP      r0,r1                 ;754
000b10  da06              BGE      |L1.2848|
000b12  f896003d          LDRB     r0,[r6,#0x3d]         ;754  ; bat
000b16  07c0              LSLS     r0,r0,#31             ;754
000b18  d102              BNE      |L1.2848|
000b1a  2101              MOVS     r1,#1                 ;754
000b1c  f7fffffe          BL       avar_bat_hndl
                  |L1.2848|
000b20  7860              LDRB     r0,[r4,#1]            ;755  ; kb_start
000b22  2801              CMP      r0,#1                 ;755
000b24  d110              BNE      |L1.2888|
000b26  f9b90000          LDRSH    r0,[r9,#0]            ;755  ; IKB
000b2a  f9b51000          LDRSH    r1,[r5,#0]            ;755  ; load_I
000b2e  0040              LSLS     r0,r0,#1              ;755
000b30  fb90f0f7          SDIV     r0,r0,r7              ;755
000b34  4288              CMP      r0,r1                 ;755
000b36  da07              BGE      |L1.2888|
000b38  f8960089          LDRB     r0,[r6,#0x89]         ;755  ; bat
000b3c  07c0              LSLS     r0,r0,#31             ;755
000b3e  d103              BNE      |L1.2888|
000b40  2101              MOVS     r1,#1                 ;755
000b42  4608              MOV      r0,r1                 ;755
000b44  f7fffffe          BL       avar_bat_hndl
                  |L1.2888|
000b48  f898000e          LDRB     r0,[r8,#0xe]          ;757  ; kb_start_ips
000b4c  2801              CMP      r0,#1                 ;757
                  |L1.2894|
000b4e  f47faee2          BNE      |L1.2326|
000b52  f9b90000          LDRSH    r0,[r9,#0]            ;757  ; IKB
000b56  f9b51000          LDRSH    r1,[r5,#0]            ;757  ; load_I
000b5a  0040              LSLS     r0,r0,#1              ;757
000b5c  fb90f0f7          SDIV     r0,r0,r7              ;757
000b60  4288              CMP      r0,r1                 ;757
000b62  dac6              BGE      |L1.2802|
000b64  4864              LDR      r0,|L1.3320|
000b66  f890003d          LDRB     r0,[r0,#0x3d]         ;757  ; bat_ips
000b6a  07c0              LSLS     r0,r0,#31             ;757
000b6c  d1ef              BNE      |L1.2894|
000b6e  e8bd5ff0          POP      {r4-r12,lr}           ;757
000b72  2001              MOVS     r0,#1                 ;757
000b74  f7ffbffe          B.W      avar_bat_ips_hndl
;;;763    
                          ENDP

                  samokalibr_hndl PROC
;;;772    //-----------------------------------------------
;;;773    void samokalibr_hndl(void)
000b78  e92d47f0          PUSH     {r4-r10,lr}
;;;774    {
;;;775    if(++samokalibr_cnt>=1800)samokalibr_cnt=0;
000b7c  4c59              LDR      r4,|L1.3300|
000b7e  8fe0              LDRH     r0,[r4,#0x3e]  ; samokalibr_cnt
000b80  1c40              ADDS     r0,r0,#1
000b82  b200              SXTH     r0,r0
000b84  87e0              STRH     r0,[r4,#0x3e]
000b86  f5b06fe1          CMP      r0,#0x708
000b8a  db02              BLT      |L1.2962|
000b8c  f04f0000          MOV      r0,#0
000b90  87e0              STRH     r0,[r4,#0x3e]
                  |L1.2962|
;;;776    
;;;777    if(samokalibr_cnt>=1785U)
000b92  f9b4003e          LDRSH    r0,[r4,#0x3e]  ; samokalibr_cnt
000b96  f5b06fdf          CMP      r0,#0x6f8
000b9a  d911              BLS      |L1.3008|
;;;778    	{
;;;779    	mess_send(MESS2RELE_HNDL,PARAM_RELE_SAMOKALIBR,1,15);
000b9c  230f              MOVS     r3,#0xf
000b9e  2201              MOVS     r2,#1
000ba0  2164              MOVS     r1,#0x64
000ba2  20d2              MOVS     r0,#0xd2
000ba4  f7fffffe          BL       mess_send
;;;780    	mess_send(MESS2IND_HNDL,PARAM_SAMOKALIBR,0,15);
000ba8  230f              MOVS     r3,#0xf
000baa  2200              MOVS     r2,#0
000bac  21d8              MOVS     r1,#0xd8
000bae  20d7              MOVS     r0,#0xd7
000bb0  f7fffffe          BL       mess_send
;;;781    	mess_send(MESS2MATEMAT,PARAM_SAMOKALIBR,0,15);
000bb4  230f              MOVS     r3,#0xf
000bb6  2200              MOVS     r2,#0
000bb8  21d8              MOVS     r1,#0xd8
000bba  20dc              MOVS     r0,#0xdc
000bbc  f7fffffe          BL       mess_send
                  |L1.3008|
;;;782    	} 
;;;783    
;;;784    if(samokalibr_cnt==1799U)
000bc0  f9b4003e          LDRSH    r0,[r4,#0x3e]  ; samokalibr_cnt
000bc4  f5a061e0          SUB      r1,r0,#0x700
000bc8  3907              SUBS     r1,#7
000bca  d133              BNE      |L1.3124|
;;;785    	{
;;;786    	if((Kibat0[0]!=ad7705_buff_[0])&&(abs(bat[0]._Ib/10)<IZMAX)) lc640_write_int(ADR_KI0BAT[0],ad7705_buff_[0]);
000bcc  4d4b              LDR      r5,|L1.3324|
000bce  4c4c              LDR      r4,|L1.3328|
000bd0  4e4c              LDR      r6,|L1.3332|
000bd2  8828              LDRH     r0,[r5,#0]  ; Kibat0
000bd4  8821              LDRH     r1,[r4,#0]  ; ad7705_buff_
000bd6  270a              MOVS     r7,#0xa
000bd8  f8df812c          LDR      r8,|L1.3336|
000bdc  f8df912c          LDR      r9,|L1.3340|
000be0  4288              CMP      r0,r1
000be2  d010              BEQ      |L1.3078|
000be4  f9b60008          LDRSH    r0,[r6,#8]  ; bat
000be8  fb90f0f7          SDIV     r0,r0,r7
000bec  b200              SXTH     r0,r0
000bee  f7fffffe          BL       abs
000bf2  f9b81000          LDRSH    r1,[r8,#0]  ; IZMAX
000bf6  4288              CMP      r0,r1
000bf8  da05              BGE      |L1.3078|
000bfa  f9b41000          LDRSH    r1,[r4,#0]  ; ad7705_buff_
000bfe  f9b90000          LDRSH    r0,[r9,#0]  ; ADR_KI0BAT
000c02  f7fffffe          BL       lc640_write_int
                  |L1.3078|
;;;787    	if((Kibat0[1]!=ad7705_buff_[1])&&(abs(bat[0]._Ib/10)<IZMAX)) lc640_write_int(ADR_KI0BAT[1],ad7705_buff_[1]);
000c06  8868              LDRH     r0,[r5,#2]  ; Kibat0
000c08  8861              LDRH     r1,[r4,#2]  ; ad7705_buff_
000c0a  4288              CMP      r0,r1
000c0c  d012              BEQ      |L1.3124|
000c0e  f9b60008          LDRSH    r0,[r6,#8]  ; bat
000c12  fb90f0f7          SDIV     r0,r0,r7
000c16  b200              SXTH     r0,r0
000c18  f7fffffe          BL       abs
000c1c  f9b81000          LDRSH    r1,[r8,#0]  ; IZMAX
000c20  4288              CMP      r0,r1
000c22  da07              BGE      |L1.3124|
000c24  f9b41002          LDRSH    r1,[r4,#2]  ; ad7705_buff_
000c28  f9b90002          LDRSH    r0,[r9,#2]  ; ADR_KI0BAT
000c2c  e8bd47f0          POP      {r4-r10,lr}
000c30  f7ffbffe          B.W      lc640_write_int
                  |L1.3124|
;;;788    	
;;;789    	}	 	
;;;790    }
000c34  e8bd87f0          POP      {r4-r10,pc}
;;;791    
                          ENDP

                  ubat_old_drv PROC
;;;794    //-----------------------------------------------
;;;795    void ubat_old_drv(void)
000c38  b510              PUSH     {r4,lr}
;;;796    {        
;;;797    bat_u_old_cnt++;
000c3a  4c35              LDR      r4,|L1.3344|
000c3c  8820              LDRH     r0,[r4,#0]  ; bat_u_old_cnt
000c3e  f1000001          ADD      r0,r0,#1
000c42  8020              STRH     r0,[r4,#0]
;;;798    gran_ring(&bat_u_old_cnt,0,8);
000c44  f04f0208          MOV      r2,#8
000c48  f04f0100          MOV      r1,#0
000c4c  4620              MOV      r0,r4
000c4e  f7fffffe          BL       gran_ring
;;;799    
;;;800    bat[0]._u_old[bat_u_old_cnt]=bat[0]._Ub;
000c52  492c              LDR      r1,|L1.3332|
000c54  f9b40000          LDRSH    r0,[r4,#0]  ; bat_u_old_cnt
000c58  eb010040          ADD      r0,r1,r0,LSL #1
000c5c  884a              LDRH     r2,[r1,#2]  ; bat
000c5e  8402              STRH     r2,[r0,#0x20]
;;;801    bat[1]._u_old[bat_u_old_cnt]=bat[1]._Ub;
000c60  f8b1104e          LDRH     r1,[r1,#0x4e]  ; bat
000c64  f8a0106c          STRH     r1,[r0,#0x6c]
;;;802    }
000c68  e45a              B        |L1.1312|
;;;803    
                          ENDP

                  unet_drv PROC
;;;804    //-----------------------------------------------
;;;805    void unet_drv(void)
000c6a  b570              PUSH     {r4-r6,lr}
;;;806    {
;;;807    if(net_U<UMN)
000c6c  4d29              LDR      r5,|L1.3348|
000c6e  482a              LDR      r0,|L1.3352|
;;;808    	{
;;;809    	if((unet_drv_cnt<10)&&(main_1Hz_cnt>15))
000c70  4a2a              LDR      r2,|L1.3356|
000c72  f9b51000          LDRSH    r1,[r5,#0]            ;807  ; net_U
000c76  f9b03000          LDRSH    r3,[r0,#0]            ;807  ; UMN
000c7a  f9920000          LDRSB    r0,[r2,#0]
000c7e  4299              CMP      r1,r3                 ;807
000c80  da1f              BGE      |L1.3266|
;;;810    		{
;;;811    		unet_drv_cnt++;
;;;812    		if(unet_drv_cnt>=10)
;;;813    			{
;;;814    			net_Ustore=net_U;
000c82  4c27              LDR      r4,|L1.3360|
000c84  280a              CMP      r0,#0xa               ;809
000c86  da0f              BGE      |L1.3240|
000c88  4b26              LDR      r3,|L1.3364|
000c8a  f9b33000          LDRSH    r3,[r3,#0]            ;809  ; main_1Hz_cnt
000c8e  2b0f              CMP      r3,#0xf               ;809
000c90  dd0a              BLE      |L1.3240|
000c92  f1000001          ADD      r0,r0,#1              ;811
000c96  b240              SXTB     r0,r0                 ;811
000c98  7010              STRB     r0,[r2,#0]            ;811
000c9a  280a              CMP      r0,#0xa               ;812
000c9c  db09              BLT      |L1.3250|
000c9e  8021              STRH     r1,[r4,#0]
;;;815    		 	avar_unet_hndl(1);
000ca0  2001              MOVS     r0,#1
000ca2  f7fffffe          BL       avar_unet_hndl
000ca6  e004              B        |L1.3250|
                  |L1.3240|
;;;816    			
;;;817    			}
;;;818    		}
;;;819    	else if(unet_drv_cnt>=10)unet_drv_cnt=10;
000ca8  280a              CMP      r0,#0xa
000caa  db02              BLT      |L1.3250|
000cac  f04f000a          MOV      r0,#0xa
000cb0  7010              STRB     r0,[r2,#0]
                  |L1.3250|
;;;820    
;;;821    	if(net_U<net_Ustore) net_Ustore=net_U;	
000cb2  f9b50000          LDRSH    r0,[r5,#0]  ; net_U
000cb6  f9b41000          LDRSH    r1,[r4,#0]  ; net_Ustore
000cba  4288              CMP      r0,r1
000cbc  da00              BGE      |L1.3264|
000cbe  8020              STRH     r0,[r4,#0]
                  |L1.3264|
;;;822    	}
;;;823    
;;;824    else if(net_U>UMN)
;;;825    	{                 
;;;826    	if(unet_drv_cnt)
;;;827    		{
;;;828    		unet_drv_cnt--;
;;;829    		if(unet_drv_cnt<=0)
;;;830    			{
;;;831    			avar_unet_hndl(0);
;;;832    			}
;;;833    		}
;;;834    	else if(unet_drv_cnt<0)unet_drv_cnt=0;
;;;835    	
;;;836    	}
;;;837    
;;;838    }
000cc0  bd70              POP      {r4-r6,pc}
                  |L1.3266|
000cc2  ddfd              BLE      |L1.3264|
000cc4  2800              CMP      r0,#0                 ;826
000cc6  d0fb              BEQ      |L1.3264|
000cc8  f1a00001          SUB      r0,r0,#1              ;828
000ccc  b240              SXTB     r0,r0                 ;828
000cce  7010              STRB     r0,[r2,#0]            ;828
000cd0  2800              CMP      r0,#0                 ;829
000cd2  dcf5              BGT      |L1.3264|
000cd4  e8bd4070          POP      {r4-r6,lr}            ;831
000cd8  2000              MOVS     r0,#0                 ;831
000cda  f7ffbffe          B.W      avar_unet_hndl
000cde  0000              DCW      0x0000
                  |L1.3296|
                          DCD      KB_ALGORITM
                  |L1.3300|
                          DCD      ||area_number.23||
                  |L1.3304|
                          DCD      mess_data
                  |L1.3308|
                          DCD      USIGN
                  |L1.3312|
                          DCD      load_U
                  |L1.3316|
                          DCD      load_I
                  |L1.3320|
                          DCD      bat_ips
                  |L1.3324|
                          DCD      Kibat0
                  |L1.3328|
                          DCD      ad7705_buff_
                  |L1.3332|
                          DCD      bat
                  |L1.3336|
                          DCD      IZMAX
                  |L1.3340|
                          DCD      ADR_KI0BAT
                  |L1.3344|
                          DCD      bat_u_old_cnt
                  |L1.3348|
                          DCD      net_U
                  |L1.3352|
                          DCD      UMN
                  |L1.3356|
                          DCD      unet_drv_cnt
                  |L1.3360|
                          DCD      net_Ustore
                  |L1.3364|
                          DCD      main_1Hz_cnt
                          ENDP

                  matemat PROC
;;;840    //-----------------------------------------------
;;;841    void matemat(void)
000d28  e92d5ffc          PUSH     {r2-r12,lr}
;;;842    {
;;;843    //signed short temp_SS;
;;;844    signed long temp_SL/*,temp_SL_*/;
;;;845    char /*temp,*/i;
;;;846    //signed short temp_SS;
;;;847    
;;;848    #ifdef UKU_MGTS
;;;849    //íàïðÿæåíèå ñåòè
;;;850    temp_SL=(signed long)net_buff_;
;;;851    temp_SL*=Kunet;
;;;852    temp_SL/=110000L;
;;;853    net_U=(signed short)temp_SL;
;;;854    #endif
;;;855    
;;;856    #ifdef UKU_RSTKM
;;;857    //íàïðÿæåíèå ñåòè
;;;858    temp_SL=(signed long)net_buff_;
;;;859    temp_SL*=Kunet;
;;;860    temp_SL/=110000L;
;;;861    net_U=(signed short)temp_SL;
;;;862    #endif
;;;863    
;;;864    #ifdef UKU_3U
;;;865    //íàïðÿæåíèå ñåòè
;;;866    temp_SL=(signed long)net_buff_;
;;;867    temp_SL*=Kunet;
;;;868    temp_SL/=36000L;
;;;869    net_U=(signed short)temp_SL;
;;;870    #endif
;;;871    
;;;872    #ifdef UKU_6U
;;;873    //íàïðÿæåíèå ñåòè
;;;874    
;;;875    if((AUSW_MAIN%10)||(AUSW_MAIN==2400)||(AUSW_MAIN==4800)||(AUSW_MAIN==6000))
;;;876    	{
;;;877    
;;;878    	if(bps[11]._device==dNET_METR)
;;;879    		{
;;;880    		net_metr_buff_[0]=((signed short)bps[11]._buff[0])+(((signed short)bps[11]._buff[1])<<8);
;;;881    		net_metr_buff_[1]=((signed short)bps[11]._buff[2])+(((signed short)bps[11]._buff[3])<<8);
;;;882    		net_metr_buff_[2]=((signed short)bps[11]._buff[4])+(((signed short)bps[11]._buff[5])<<8);
;;;883    
;;;884    		temp_SL=(signed long)net_metr_buff_[0];
;;;885    		temp_SL*=KunetA;
;;;886    		temp_SL/=6000L;
;;;887    		net_Ua=(signed short)temp_SL;
;;;888    	
;;;889    		temp_SL=(signed long)net_metr_buff_[1];
;;;890    		temp_SL*=KunetB;
;;;891    		temp_SL/=6000L;
;;;892    		net_Ub=(signed short)temp_SL;
;;;893    	
;;;894    		temp_SL=(signed long)net_metr_buff_[2];
;;;895    		temp_SL*=KunetC;
;;;896    		temp_SL/=6000L;
;;;897    		net_Uc=(signed short)temp_SL;
;;;898    		}
;;;899    	else
;;;900    		{
;;;901    		temp_SL=(signed long)net_buff_;
;;;902    		temp_SL*=KunetA;
;;;903    		temp_SL/=110000L;
;;;904    		net_Ua=(signed short)temp_SL;
;;;905    	
;;;906    		temp_SL=(signed long)adc_buff_[3];
;;;907    		temp_SL*=KunetB;
;;;908    		temp_SL/=6000L;
;;;909    		net_Ub=(signed short)temp_SL;
;;;910    	
;;;911    		temp_SL=(signed long)adc_buff_[10];
;;;912    		temp_SL*=KunetC;
;;;913    		temp_SL/=6000L;
;;;914    		net_Uc=(signed short)temp_SL;
;;;915    		}
;;;916    
;;;917    	net_U=net_Ua;
;;;918    	if(net_Ub<net_U)net_U=net_Ub;
;;;919    	if(net_Uc<net_U)net_U=net_Uc;
;;;920    	}
;;;921    else 
;;;922    	{
;;;923    	temp_SL=(signed long)net_buff_;
;;;924    	temp_SL*=Kunet;
;;;925    	temp_SL/=110000L;
;;;926    	net_U=(signed short)temp_SL;
;;;927    	}
;;;928    
;;;929    
;;;930    
;;;931    
;;;932    #endif
;;;933    
;;;934    #ifdef UKU_GLONASS
;;;935    //íàïðÿæåíèå ñåòè
;;;936    temp_SL=(signed long)net_buff_;
;;;937    temp_SL*=Kunet;
;;;938    temp_SL/=110000L;
;;;939    net_U=(signed short)temp_SL;
;;;940    #endif
;;;941    
;;;942    #ifdef UKU_KONTUR
;;;943    //íàïðÿæåíèå ñåòè
;;;944    temp_SL=(signed long)net_buff_;
;;;945    temp_SL*=Kunet;
;;;946    temp_SL/=110000L;
;;;947    net_U=(signed short)temp_SL;
;;;948    #endif
;;;949    
;;;950    #ifdef IPS_SGEP_GAZPROM
;;;951    //íàïðÿæåíèå ñåòè
;;;952    temp_SL=(signed long)net_buff_;
;;;953    temp_SL*=Kunet;
;;;954    temp_SL/=110000L;
;;;955    net_U=(signed short)temp_SL;
;;;956    #endif
;;;957    
;;;958    #ifdef UKU_220_V2
;;;959    //íàïðÿæåíèå ñåòè
;;;960    
;;;961    if(AUSW_MAIN==22033)
;;;962    	{
;;;963    	temp_SL=(signed long)net_buff_;
;;;964    	temp_SL*=KunetA;
;;;965    	temp_SL/=6000L;
;;;966    	net_Ua=(signed short)temp_SL;
;;;967    
;;;968    	temp_SL=(signed long)adc_buff_[3];
;;;969    	temp_SL*=KunetB;
;;;970    	temp_SL/=6000L;
;;;971    	net_Ub=(signed short)temp_SL;
;;;972    
;;;973    	temp_SL=(signed long)adc_buff_[10];
;;;974    	temp_SL*=KunetC;
;;;975    	temp_SL/=6000L;
;;;976    	net_Uc=(signed short)temp_SL;
;;;977    
;;;978    	net_U=net_Ua;
;;;979    	if(net_Ub<net_U)net_U=net_Ub;
;;;980    	if(net_Uc<net_U)net_U=net_Uc;
;;;981    	}
;;;982    else
;;;983    	{
;;;984    	temp_SL=(signed long)net_buff_;
;;;985    	temp_SL*=Kunet;
;;;986    	temp_SL/=5000L;
;;;987    	net_U=(signed short)temp_SL;
;;;988    	}
;;;989    #endif
;;;990    
;;;991    
;;;992    #ifdef UKU_220
;;;993    //íàïðÿæåíèå ñåòè
;;;994    
;;;995    if(AUSW_MAIN==22035)
;;;996    	{
;;;997    	temp_SL=(signed long)net_buff_;
;;;998    	temp_SL*=KunetA;
;;;999    	temp_SL/=6000L;
;;;1000   	net_Ua=(signed short)temp_SL;
;;;1001   
;;;1002   	temp_SL=(signed long)adc_buff_[3];
;;;1003   	temp_SL*=KunetB;
;;;1004   	temp_SL/=6000L;
;;;1005   	net_Ub=(signed short)temp_SL;
;;;1006   
;;;1007   	temp_SL=(signed long)adc_buff_[10];
;;;1008   	temp_SL*=KunetC;
;;;1009   	temp_SL/=6000L;
;;;1010   	net_Uc=(signed short)temp_SL;
;;;1011   
;;;1012   	net_U=net_Ua;
;;;1013   	if(net_Ub<net_U)net_U=net_Ub;
;;;1014   	if(net_Uc<net_U)net_U=net_Uc;
;;;1015   	}
;;;1016   else
;;;1017   	{
;;;1018   	temp_SL=(signed long)net_buff_;
;;;1019   	temp_SL*=Kunet;
;;;1020   	#ifdef _ACDC_
;;;1021   	temp_SL/=500L;
;;;1022   	#else
;;;1023   	temp_SL/=5000L;
;;;1024   	#endif
;;;1025   	net_U=(signed short)temp_SL;
;;;1026   	
;;;1027   	}
;;;1028   #endif
;;;1029   
;;;1030   #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;1031   //íàïðÿæåíèå ñåòè
;;;1032   
;;;1033   
;;;1034   	if(bps[11]._device==dNET_METR)
000d2c  48f8              LDR      r0,|L1.4368|
;;;1035   		{
;;;1036   		net_metr_buff_[0]=((signed short)bps[11]._buff[0])+(((signed short)bps[11]._buff[1])<<8);
;;;1037   		net_metr_buff_[1]=((signed short)bps[11]._buff[2])+(((signed short)bps[11]._buff[3])<<8);
;;;1038   		net_metr_buff_[2]=((signed short)bps[11]._buff[4])+(((signed short)bps[11]._buff[5])<<8);
;;;1039   
;;;1040   		temp_SL=(signed long)net_metr_buff_[2];
;;;1041   		temp_SL*=KunetA;
000d2e  4af9              LDR      r2,|L1.4372|
;;;1042   		temp_SL/=6000L;
;;;1043   		net_Ua=(signed short)temp_SL;
;;;1044   	
;;;1045   		temp_SL=(signed long)net_metr_buff_[1];
;;;1046   		temp_SL*=KunetB;
000d30  49fa              LDR      r1,|L1.4380|
000d32  f89003f4          LDRB     r0,[r0,#0x3f4]        ;1034  ; bps
;;;1047   		temp_SL/=6000L;
;;;1048   		net_Ub=(signed short)temp_SL;
;;;1049   	
;;;1050   		temp_SL=(signed long)net_metr_buff_[0];
;;;1051   		temp_SL*=KunetC;
000d36  4bfa              LDR      r3,|L1.4384|
000d38  9001              STR      r0,[sp,#4]            ;1041
000d3a  f8dfc3dc          LDR      r12,|L1.4376|
000d3e  f9b29000          LDRSH    r9,[r2,#0]            ;1041
000d42  f9b1b000          LDRSH    r11,[r1,#0]           ;1046
000d46  f9b3a000          LDRSH    r10,[r3,#0]
000d4a  4df6              LDR      r5,|L1.4388|
;;;1052   		temp_SL/=6000L;
;;;1053   		net_Uc=(signed short)temp_SL;
000d4c  4cf6              LDR      r4,|L1.4392|
;;;1054   
;;;1055   		net_F3=((signed short)bps[11]._buff[6])+(((signed short)bps[11]._buff[7])<<8);
;;;1056   
;;;1057   		net_U=net_Ua;
;;;1058   		if(net_Ub<net_U)net_U=net_Ub;
;;;1059   		if(net_Uc<net_U)net_U=net_Uc;
;;;1060   		}
;;;1061   	  else if(AUSW_MAIN==22033)
;;;1062   	{
;;;1063   	temp_SL=(signed long)net_buff_;
000d4e  4ff7              LDR      r7,|L1.4396|
000d50  f2456611          MOV      r6,#0x5611            ;1061
000d54  2807              CMP      r0,#7                 ;1034
000d56  d036              BEQ      |L1.3526|
000d58  4639              MOV      r1,r7
;;;1064   	temp_SL*=KunetA;
;;;1065   	temp_SL/=4000L;
;;;1066   	net_Ua=(signed short)temp_SL;
;;;1067   
;;;1068   	temp_SL=(signed long)adc_buff_[3];
000d5a  4bf6              LDR      r3,|L1.4404|
000d5c  8d0a              LDRH     r2,[r1,#0x28]         ;1063
000d5e  49ed              LDR      r1,|L1.4372|
000d60  f8df83b8          LDR      r8,|L1.4380|
000d64  f8df93b8          LDR      r9,|L1.4384|
000d68  f9b11000          LDRSH    r1,[r1,#0]            ;1041
000d6c  f9b88000          LDRSH    r8,[r8,#0]            ;1046
000d70  434a              MULS     r2,r1,r2              ;1064
000d72  f9b31006          LDRSH    r1,[r3,#6]
;;;1069   	temp_SL*=KunetB;
;;;1070   	temp_SL/=6000L;
;;;1071   	net_Ub=(signed short)temp_SL;
;;;1072   
;;;1073   	temp_SL=(signed long)adc_buff_[10];
000d76  f9b33014          LDRSH    r3,[r3,#0x14]
000d7a  fb01f108          MUL      r1,r1,r8              ;1069
000d7e  f2417870          MOV      r8,#0x1770            ;1042
000d82  f9b99000          LDRSH    r9,[r9,#0]            ;1051
000d86  fb91f1f8          SDIV     r1,r1,r8              ;1070
;;;1074   	temp_SL*=KunetC;
000d8a  fb03f309          MUL      r3,r3,r9
;;;1075   	temp_SL/=6000L;
000d8e  fb93f3f8          SDIV     r3,r3,r8
000d92  48e7              LDR      r0,|L1.4400|
000d94  b209              SXTH     r1,r1                 ;1071
;;;1076   	net_Uc=(signed short)temp_SL;
000d96  b21b              SXTH     r3,r3
000d98  8800              LDRH     r0,[r0,#0]            ;1061  ; AUSW_MAIN
000d9a  42b0              CMP      r0,r6                 ;1061
000d9c  d154              BNE      |L1.3656|
000d9e  f44f607a          MOV      r0,#0xfa0             ;1065
000da2  fb92f0f0          SDIV     r0,r2,r0              ;1065
000da6  b200              SXTH     r0,r0                 ;1066
000da8  f8ac0000          STRH     r0,[r12,#0]           ;1066
000dac  8029              STRH     r1,[r5,#0]            ;1071
000dae  8023              STRH     r3,[r4,#0]
;;;1077   
;;;1078   	net_U=net_Ua;
000db0  4ae1              LDR      r2,|L1.4408|
000db2  8010              STRH     r0,[r2,#0]
;;;1079   	if(net_Ub<net_U)net_U=net_Ub;
000db4  4281              CMP      r1,r0
000db6  da00              BGE      |L1.3514|
000db8  8011              STRH     r1,[r2,#0]
                  |L1.3514|
;;;1080   	if(net_Uc<net_U)net_U=net_Uc;
000dba  f9b20000          LDRSH    r0,[r2,#0]  ; net_U
000dbe  4283              CMP      r3,r0
000dc0  da00              BGE      |L1.3524|
000dc2  8013              STRH     r3,[r2,#0]
                  |L1.3524|
000dc4  e07e              B        |L1.3780|
                  |L1.3526|
000dc6  48dd              LDR      r0,|L1.4412|
000dc8  4bd8              LDR      r3,|L1.4396|
000dca  7801              LDRB     r1,[r0,#0]            ;1036  ; bps
000dcc  7842              LDRB     r2,[r0,#1]            ;1036  ; bps
000dce  f1030394          ADD      r3,r3,#0x94           ;1036
000dd2  eb012102          ADD      r1,r1,r2,LSL #8       ;1036
000dd6  fa1ff881          UXTH     r8,r1                 ;1036
000dda  f8a38000          STRH     r8,[r3,#0]            ;1036
000dde  7881              LDRB     r1,[r0,#2]            ;1037  ; bps
000de0  78c2              LDRB     r2,[r0,#3]            ;1037  ; bps
000de2  eb012102          ADD      r1,r1,r2,LSL #8       ;1037
000de6  b28a              UXTH     r2,r1                 ;1037
000de8  805a              STRH     r2,[r3,#2]            ;1037
000dea  7901              LDRB     r1,[r0,#4]            ;1038  ; bps
000dec  f890e005          LDRB     lr,[r0,#5]            ;1038  ; bps
000df0  eb01210e          ADD      r1,r1,lr,LSL #8       ;1038
000df4  b289              UXTH     r1,r1                 ;1038
000df6  8099              STRH     r1,[r3,#4]            ;1038
000df8  fb01f109          MUL      r1,r1,r9              ;1041
000dfc  f2417370          MOV      r3,#0x1770            ;1042
000e00  fb91f1f3          SDIV     r1,r1,r3              ;1042
000e04  fa0ff981          SXTH     r9,r1                 ;1043
000e08  f8ac9000          STRH     r9,[r12,#0]           ;1043
000e0c  fb02f20b          MUL      r2,r2,r11             ;1046
000e10  fb92f1f3          SDIV     r1,r2,r3              ;1047
000e14  b209              SXTH     r1,r1                 ;1048
000e16  8029              STRH     r1,[r5,#0]            ;1048
000e18  fb08f80a          MUL      r8,r8,r10             ;1051
000e1c  fb98f2f3          SDIV     r2,r8,r3              ;1052
000e20  b212              SXTH     r2,r2                 ;1053
000e22  8022              STRH     r2,[r4,#0]            ;1053
000e24  7983              LDRB     r3,[r0,#6]            ;1055  ; bps
000e26  79c0              LDRB     r0,[r0,#7]            ;1055  ; bps
000e28  eb032000          ADD      r0,r3,r0,LSL #8       ;1055
000e2c  4bc4              LDR      r3,|L1.4416|
000e2e  8018              STRH     r0,[r3,#0]            ;1055
000e30  48c1              LDR      r0,|L1.4408|
000e32  f8a09000          STRH     r9,[r0,#0]            ;1057
000e36  4549              CMP      r1,r9                 ;1058
000e38  da00              BGE      |L1.3644|
000e3a  8001              STRH     r1,[r0,#0]            ;1058
                  |L1.3644|
000e3c  f9b01000          LDRSH    r1,[r0,#0]            ;1059  ; net_U
000e40  428a              CMP      r2,r1                 ;1059
000e42  da3f              BGE      |L1.3780|
000e44  8002              STRH     r2,[r0,#0]            ;1059
000e46  e03d              B        |L1.3780|
                  |L1.3656|
;;;1081   	}
;;;1082   else if((AUSW_MAIN==22063)||(AUSW_MAIN==22023)||(AUSW_MAIN==22043)||(AUSW_MAIN==22044)||(AUSW_MAIN==22018))
000e48  f5a048ac          SUB      r8,r0,#0x5600
000e4c  f1b8082f          SUBS     r8,r8,#0x2f
000e50  d00b              BEQ      |L1.3690|
000e52  f1180828          ADDS     r8,r8,#0x28
000e56  d008              BEQ      |L1.3690|
000e58  f1b80814          SUBS     r8,r8,#0x14
000e5c  d005              BEQ      |L1.3690|
000e5e  f1b80801          SUBS     r8,r8,#1
000e62  d002              BEQ      |L1.3690|
000e64  f118081a          ADDS     r8,r8,#0x1a
000e68  d113              BNE      |L1.3730|
                  |L1.3690|
;;;1083   	{
;;;1084   	temp_SL=(signed long)net_buff_;
;;;1085   	temp_SL*=KunetA;
;;;1086   	temp_SL/=40000L;
000e6a  f6494040          MOV      r0,#0x9c40
000e6e  fb92f0f0          SDIV     r0,r2,r0
;;;1087   	net_Ua=(signed short)temp_SL;
000e72  b200              SXTH     r0,r0
000e74  f8ac0000          STRH     r0,[r12,#0]
;;;1088   
;;;1089   	temp_SL=(signed long)adc_buff_[3];
;;;1090   	temp_SL*=KunetB;
;;;1091   	temp_SL/=6000L;
;;;1092   	net_Ub=(signed short)temp_SL;
000e78  8029              STRH     r1,[r5,#0]
;;;1093   
;;;1094   	temp_SL=(signed long)adc_buff_[10];
;;;1095   	temp_SL*=KunetC;
;;;1096   	temp_SL/=6000L;
;;;1097   	net_Uc=(signed short)temp_SL;
000e7a  8023              STRH     r3,[r4,#0]
;;;1098   
;;;1099   	net_U=net_Ua;
000e7c  4aae              LDR      r2,|L1.4408|
000e7e  8010              STRH     r0,[r2,#0]
;;;1100   	if(net_Ub<net_U)net_U=net_Ub;
000e80  4281              CMP      r1,r0
000e82  da00              BGE      |L1.3718|
000e84  8011              STRH     r1,[r2,#0]
                  |L1.3718|
;;;1101   	if(net_Uc<net_U)net_U=net_Uc;
000e86  f9b20000          LDRSH    r0,[r2,#0]  ; net_U
000e8a  4283              CMP      r3,r0
000e8c  da1a              BGE      |L1.3780|
000e8e  8013              STRH     r3,[r2,#0]
000e90  e018              B        |L1.3780|
                  |L1.3730|
;;;1102   	}
;;;1103   else	if((AUSW_MAIN==22010)||(AUSW_MAIN==22011) )
;;;1104   	{
;;;1105   	temp_SL=(signed long)net_buff_;
;;;1106   	temp_SL*=Kunet;
000e92  49ac              LDR      r1,|L1.4420|
000e94  f5a043aa          SUB      r3,r0,#0x5500         ;1103
000e98  f9b12000          LDRSH    r2,[r1,#0]
000e9c  49a3              LDR      r1,|L1.4396|
000e9e  8d09              LDRH     r1,[r1,#0x28]         ;1063
000ea0  4351              MULS     r1,r2,r1
000ea2  3bfa              SUBS     r3,r3,#0xfa           ;1103
000ea4  d001              BEQ      |L1.3754|
000ea6  1e5a              SUBS     r2,r3,#1              ;1103
000ea8  d106              BNE      |L1.3768|
                  |L1.3754|
;;;1107   	temp_SL/=35000L;
000eaa  f64800b8          MOV      r0,#0x88b8
000eae  fb91f0f0          SDIV     r0,r1,r0
;;;1108   	net_U=(signed short)temp_SL;
000eb2  49a1              LDR      r1,|L1.4408|
000eb4  8008              STRH     r0,[r1,#0]
000eb6  e005              B        |L1.3780|
                  |L1.3768|
;;;1109   	
;;;1110   	}
;;;1111   else
;;;1112   	{
;;;1113   	temp_SL=(signed long)net_buff_;
;;;1114   	temp_SL*=Kunet;
;;;1115   	#ifdef _ACDC_
;;;1116   	temp_SL/=500L;
000eb8  f44f70fa          MOV      r0,#0x1f4
000ebc  fb91f0f0          SDIV     r0,r1,r0
;;;1117   	#else
;;;1118   	temp_SL/=5000L;
;;;1119   	#endif
;;;1120   	net_U=(signed short)temp_SL;
000ec0  499d              LDR      r1,|L1.4408|
000ec2  8008              STRH     r0,[r1,#0]
                  |L1.3780|
;;;1121   	
;;;1122   	}
;;;1123   if(bps[11]._device!=dNET_METR) net_F3=net_F;
000ec4  9801              LDR      r0,[sp,#4]
000ec6  2807              CMP      r0,#7
000ec8  d003              BEQ      |L1.3794|
000eca  489f              LDR      r0,|L1.4424|
000ecc  8801              LDRH     r1,[r0,#0]  ; net_F
000ece  489c              LDR      r0,|L1.4416|
000ed0  8001              STRH     r1,[r0,#0]
                  |L1.3794|
;;;1124   #endif
;;;1125   
;;;1126   #ifdef UKU_TELECORE2015
;;;1127   //íàïðÿæåíèå ñåòè
;;;1128   temp_SL=(signed long)net_buff_;
;;;1129   temp_SL*=Kunet;
;;;1130   temp_SL/=110000L;
;;;1131   net_U=(signed short)temp_SL;
;;;1132   #endif
;;;1133   
;;;1134   #ifdef UKU_TELECORE2017
;;;1135   //íàïðÿæåíèå ñåòè
;;;1136   temp_SL=(signed long)net_buff_;
;;;1137   temp_SL*=Kunet;
;;;1138   temp_SL/=110000L;
;;;1139   net_U=(signed short)temp_SL;
;;;1140   #endif
;;;1141   
;;;1142   //Íàïðÿæåíèÿ áàòàðåé
;;;1143   temp_SL=(signed long)adc_buff_[0];
000ed2  f8df8260          LDR      r8,|L1.4404|
000ed6  f9b82000          LDRSH    r2,[r8,#0]  ; adc_buff_
;;;1144   temp_SL*=Kubat[0];
000eda  499c              LDR      r1,|L1.4428|
000edc  f9b10000          LDRSH    r0,[r1,#0]  ; Kubat
000ee0  4350              MULS     r0,r2,r0
;;;1145   temp_SL/=2000L;
000ee2  f44f65fa          MOV      r5,#0x7d0
000ee6  fb90f0f5          SDIV     r0,r0,r5
;;;1146   bat[0]._Ub=(signed short)temp_SL;
000eea  4c99              LDR      r4,|L1.4432|
000eec  8060              STRH     r0,[r4,#2]
;;;1147   
;;;1148   #ifdef UKU_220
;;;1149   //Íàïðÿæåíèÿ áàòàðåé
;;;1150   temp_SL=(signed long)adc_buff_[0];
;;;1151   temp_SL*=Kubat[0];
;;;1152   temp_SL/=400L;
;;;1153   bat[0]._Ub=(signed short)temp_SL;
;;;1154   #endif
;;;1155   
;;;1156   #ifdef UKU_220_V2
;;;1157   //Íàïðÿæåíèÿ áàòàðåé
;;;1158   temp_SL=(signed long)adc_buff_[0];
;;;1159   temp_SL*=Kubat[0];
;;;1160   temp_SL/=400L;
;;;1161   bat[0]._Ub=(signed short)temp_SL;
;;;1162   #endif
;;;1163   
;;;1164   temp_SL=(signed long)adc_buff_[4];
000eee  f9b83008          LDRSH    r3,[r8,#8]  ; adc_buff_
;;;1165   temp_SL*=Kubatm[0];
000ef2  4a98              LDR      r2,|L1.4436|
000ef4  f9b20000          LDRSH    r0,[r2,#0]  ; Kubatm
000ef8  fb00f003          MUL      r0,r0,r3
;;;1166   temp_SL/=700L;
000efc  f44f732f          MOV      r3,#0x2bc
000f00  fb90f0f3          SDIV     r0,r0,r3
;;;1167   bat[0]._Ubm=(signed short)temp_SL;
000f04  80a0              STRH     r0,[r4,#4]
;;;1168   
;;;1169   #ifdef UKU_KONTUR
;;;1170   temp_SL=(signed long)adc_buff_[4];
;;;1171   temp_SL*=Kubatm[0];
;;;1172   temp_SL/=2000L;
;;;1173   bat[0]._Ubm=(signed short)temp_SL;
;;;1174   #endif
;;;1175   
;;;1176   temp_SL=(signed long)adc_buff_[12];
000f06  f9b80018          LDRSH    r0,[r8,#0x18]  ; adc_buff_
;;;1177   temp_SL*=Kubat[1];
000f0a  f9b11002          LDRSH    r1,[r1,#2]  ; Kubat
000f0e  fb01f100          MUL      r1,r1,r0
;;;1178   temp_SL/=2000L;
000f12  fb91f0f5          SDIV     r0,r1,r5
;;;1179   bat[1]._Ub=(signed short)temp_SL;
000f16  f8a4004e          STRH     r0,[r4,#0x4e]
;;;1180   
;;;1181   #ifdef UKU_220
;;;1182   temp_SL=(signed long)adc_buff_[12];
;;;1183   temp_SL*=Kubat[1];
;;;1184   temp_SL/=400L;
;;;1185   bat[1]._Ub=(signed short)temp_SL;
;;;1186   #endif
;;;1187   
;;;1188   #ifdef UKU_220_V2
;;;1189   temp_SL=(signed long)adc_buff_[12];
;;;1190   temp_SL*=Kubat[1];
;;;1191   temp_SL/=400L;
;;;1192   bat[1]._Ub=(signed short)temp_SL;
;;;1193   #endif
;;;1194   
;;;1195   temp_SL=(signed long)adc_buff_[1];
000f1a  f9b81002          LDRSH    r1,[r8,#2]  ; adc_buff_
;;;1196   temp_SL*=Kubatm[1];
000f1e  f9b20002          LDRSH    r0,[r2,#2]  ; Kubatm
000f22  fb00f001          MUL      r0,r0,r1
;;;1197   temp_SL/=700L;
000f26  fb90f0f3          SDIV     r0,r0,r3
;;;1198   bat[1]._Ubm=(signed short)temp_SL;
000f2a  f8a40050          STRH     r0,[r4,#0x50]
;;;1199   #ifdef UKU_KONTUR
;;;1200   temp_SL=(signed long)adc_buff_[1];
;;;1201   temp_SL*=Kubatm[1];
;;;1202   temp_SL/=2000L;
;;;1203   bat[1]._Ubm=(signed short)temp_SL;
;;;1204   #endif
;;;1205   
;;;1206   #ifdef UKU_TELECORE2015
;;;1207   temp_SL=(signed long)adc_buff_[2];
;;;1208   temp_SL*=Kubat[0];
;;;1209   temp_SL/=2000L;
;;;1210   bat[0]._Ub=(signed short)temp_SL;
;;;1211   #endif
;;;1212   
;;;1213   /*
;;;1214   //Òîêè áàòàðåé
;;;1215   if(!mess_find_unvol(MESS2MATEMAT))
;;;1216   	{
;;;1217   	temp_SL=(signed long)ad7705_buff_[0];
;;;1218   	temp_SL-=(signed long)Kibat0[0];
;;;1219   	temp_SL*=(signed long)Kibat1[0];
;;;1220   	if((AUSW_MAIN==24120)||(AUSW_MAIN==24210))temp_SL/=300L;
;;;1221   	else temp_SL/=1000L;
;;;1222   	bat[0]._Ib=(signed short)temp_SL;
;;;1223   
;;;1224   	temp_SL=(signed long)ad7705_buff_[1];
;;;1225   	temp_SL-=(signed long)Kibat0[1];
;;;1226   	temp_SL*=(signed long)Kibat1[1];
;;;1227   	if((AUSW_MAIN==24120)||(AUSW_MAIN==24210))temp_SL/=300L;
;;;1228   	else temp_SL/=1000L;
;;;1229   	bat[1]._Ib=(signed short)temp_SL;
;;;1230   	}
;;;1231   */
;;;1232   
;;;1233   
;;;1234   //Òîêè áàòàðåé
;;;1235   if(!mess_find_unvol(MESS2MATEMAT))
000f2e  f04f00dc          MOV      r0,#0xdc
000f32  f7fffffe          BL       mess_find_unvol
;;;1236   	{
;;;1237   	temp_SL=(signed long)ad7705_buff_[0];
;;;1238   	temp_SL-=(signed long)Kibat0[0];
;;;1239   	temp_SL*=(signed long)Kibat1[0];
;;;1240   	if((AUSW_MAIN==24120)||(AUSW_MAIN==24210))temp_SL/=300L;
;;;1241   	else if((AUSW_MAIN==22010)||(AUSW_MAIN==22035)||(AUSW_MAIN==22033))temp_SL/=2000L;
000f36  f2456a13          MOV      r10,#0x5613
000f3a  bbe8              CBNZ     r0,|L1.4024|
000f3c  f8df9218          LDR      r9,|L1.4440|
000f40  f8b90000          LDRH     r0,[r9,#0]            ;1237  ; ad7705_buff_
000f44  f8dfb214          LDR      r11,|L1.4444|
000f48  f8bb1000          LDRH     r1,[r11,#0]           ;1238  ; Kibat0
000f4c  eba00001          SUB      r0,r0,r1              ;1238
000f50  4a83              LDR      r2,|L1.4448|
000f52  f9b21000          LDRSH    r1,[r2,#0]            ;1239  ; Kibat1
000f56  fb01f100          MUL      r1,r1,r0              ;1239
000f5a  4875              LDR      r0,|L1.4400|
000f5c  f6456338          MOV      r3,#0x5e38            ;1240
000f60  f6456c92          MOV      r12,#0x5e92           ;1240
000f64  8800              LDRH     r0,[r0,#0]            ;1240  ; AUSW_MAIN
000f66  4298              CMP      r0,r3                 ;1240
000f68  d001              BEQ      |L1.3950|
000f6a  4560              CMP      r0,r12                ;1240
000f6c  d104              BNE      |L1.3960|
                  |L1.3950|
000f6e  f44f7e96          MOV      lr,#0x12c             ;1240
000f72  fb91f1fe          SDIV     r1,r1,lr              ;1240
000f76  e00f              B        |L1.3992|
                  |L1.3960|
000f78  f5a04ea8          SUB      lr,r0,#0x5400
000f7c  f5be7efd          SUBS     lr,lr,#0x1fa
000f80  d003              BEQ      |L1.3978|
000f82  4550              CMP      r0,r10
000f84  d001              BEQ      |L1.3978|
000f86  42b0              CMP      r0,r6
000f88  d102              BNE      |L1.3984|
                  |L1.3978|
000f8a  fb91f1f5          SDIV     r1,r1,r5
000f8e  e003              B        |L1.3992|
                  |L1.3984|
;;;1242   	else temp_SL/=1000L;
000f90  f44f7e7a          MOV      lr,#0x3e8
000f94  fb91f1fe          SDIV     r1,r1,lr
                  |L1.3992|
;;;1243   	#ifdef UKU_TELECORE2015
;;;1244   	temp_SL/=2L;
;;;1245   	//temp_SL=-temp_SL;
;;;1246   	#endif
;;;1247   	//#ifdef UKU_TELECORE2017
;;;1248   	//temp_SL/=-2L;
;;;1249   	//temp_SL=-temp_SL;
;;;1250   	//#endif
;;;1251   	bat[0]._Ib=(signed short)temp_SL;
000f98  8121              STRH     r1,[r4,#8]
;;;1252   
;;;1253   	temp_SL=(signed long)ad7705_buff_[1];
000f9a  f8b91002          LDRH     r1,[r9,#2]  ; ad7705_buff_
;;;1254   	temp_SL-=(signed long)Kibat0[1];
000f9e  f8bb9002          LDRH     r9,[r11,#2]  ; Kibat0
000fa2  eba10909          SUB      r9,r1,r9
;;;1255   	temp_SL*=(signed long)Kibat1[1];
000fa6  f9b21002          LDRSH    r1,[r2,#2]  ; Kibat1
000faa  fb01f109          MUL      r1,r1,r9
;;;1256   	if((AUSW_MAIN==24120)||(AUSW_MAIN==24210))temp_SL/=300L;
000fae  4298              CMP      r0,r3
000fb0  d001              BEQ      |L1.4022|
000fb2  4560              CMP      r0,r12
000fb4  d106              BNE      |L1.4036|
                  |L1.4022|
000fb6  e000              B        |L1.4026|
                  |L1.4024|
000fb8  e015              B        |L1.4070|
                  |L1.4026|
000fba  f44f7096          MOV      r0,#0x12c
000fbe  fb91f0f0          SDIV     r0,r1,r0
000fc2  e00e              B        |L1.4066|
                  |L1.4036|
;;;1257   	else if((AUSW_MAIN==22010)||(AUSW_MAIN==22035)||(AUSW_MAIN==22033))temp_SL/=2000L;
000fc4  f5a042aa          SUB      r2,r0,#0x5500
000fc8  3afa              SUBS     r2,r2,#0xfa
000fca  d003              BEQ      |L1.4052|
000fcc  4550              CMP      r0,r10
000fce  d001              BEQ      |L1.4052|
000fd0  42b0              CMP      r0,r6
000fd2  d102              BNE      |L1.4058|
                  |L1.4052|
000fd4  fb91f0f5          SDIV     r0,r1,r5
000fd8  e003              B        |L1.4066|
                  |L1.4058|
;;;1258   	else temp_SL/=1000L;
000fda  f44f707a          MOV      r0,#0x3e8
000fde  fb91f0f0          SDIV     r0,r1,r0
                  |L1.4066|
;;;1259   	bat[1]._Ib=(signed short)temp_SL;
000fe2  f8a40054          STRH     r0,[r4,#0x54]
                  |L1.4070|
;;;1260   	}
;;;1261   
;;;1262   
;;;1263   
;;;1264   
;;;1265   
;;;1266   //Òåìïåðàòóðû áàòàðåé
;;;1267   
;;;1268   #ifdef UKU_KONTUR
;;;1269   if((adc_buff_[6]>800)&&(adc_buff_[6]<3800))bat[0]._nd=0;
;;;1270   else bat[0]._nd=1;
;;;1271   temp_SL=(signed long)adc_buff_[6];
;;;1272   temp_SL*=Ktbat[0];
;;;1273   temp_SL/=20000L;
;;;1274   temp_SL-=273L;
;;;1275   bat[0]._Tb=(signed short)temp_SL;
;;;1276   #else
;;;1277   if((adc_buff_[6]>800)&&(adc_buff_[6]<3800))bat[0]._nd=0;
000fe6  f9b8000c          LDRSH    r0,[r8,#0xc]  ; adc_buff_
000fea  f64031b7          MOV      r1,#0xbb7
000fee  4684              MOV      r12,r0
000ff0  f2a03021          SUB      r0,r0,#0x321
000ff4  2300              MOVS     r3,#0
;;;1278   else bat[0]._nd=1;
000ff6  f04f0901          MOV      r9,#1
000ffa  9000              STR      r0,[sp,#0]            ;1277
000ffc  4288              CMP      r0,r1                 ;1277
000ffe  d201              BCS      |L1.4100|
001000  7323              STRB     r3,[r4,#0xc]          ;1277
001002  e001              B        |L1.4104|
                  |L1.4100|
001004  f884900c          STRB     r9,[r4,#0xc]
                  |L1.4104|
;;;1279   temp_SL=(signed long)adc_buff_[6];
;;;1280   temp_SL*=Ktbat[0];
001008  4a56              LDR      r2,|L1.4452|
00100a  f9b20000          LDRSH    r0,[r2,#0]  ; Ktbat
00100e  fb00f00c          MUL      r0,r0,r12
;;;1281   temp_SL/=20000L;
001012  f6446e20          MOV      lr,#0x4e20
001016  fb90f0fe          SDIV     r0,r0,lr
;;;1282   temp_SL-=273L;
00101a  f2a01011          SUB      r0,r0,#0x111
;;;1283   bat[0]._Tb=(signed short)temp_SL;
00101e  8160              STRH     r0,[r4,#0xa]
;;;1284   #endif
;;;1285   
;;;1286   #ifdef UKU_KONTUR
;;;1287   if((adc_buff_[7]>800)&&(adc_buff_[7]<3800))bat[1]._nd=0;
;;;1288   else bat[1]._nd=1;
;;;1289   temp_SL=(signed long)adc_buff_[7];
;;;1290   temp_SL*=Ktbat[1];
;;;1291   temp_SL/=20000L;
;;;1292   temp_SL-=273L;
;;;1293   bat[1]._Tb=(signed short)temp_SL;
;;;1294   #else
;;;1295   if((adc_buff_[7]>800)&&(adc_buff_[7]<3800))bat[1]._nd=0;
001020  f9b8000e          LDRSH    r0,[r8,#0xe]  ; adc_buff_
001024  f64031b7          MOV      r1,#0xbb7
001028  f2a03b21          SUB      r11,r0,#0x321
00102c  458b              CMP      r11,r1
00102e  d202              BCS      |L1.4150|
001030  f8843058          STRB     r3,[r4,#0x58]
001034  e001              B        |L1.4154|
                  |L1.4150|
;;;1296   else bat[1]._nd=1;
001036  f8849058          STRB     r9,[r4,#0x58]
                  |L1.4154|
;;;1297   temp_SL=(signed long)adc_buff_[7];
;;;1298   temp_SL*=Ktbat[1];
00103a  f9b21002          LDRSH    r1,[r2,#2]  ; Ktbat
00103e  4341              MULS     r1,r0,r1
;;;1299   temp_SL/=20000L;
001040  f6446020          MOV      r0,#0x4e20
001044  fb91f0f0          SDIV     r0,r1,r0
;;;1300   temp_SL-=273L;
001048  f2a01011          SUB      r0,r0,#0x111
;;;1301   bat[1]._Tb=(signed short)temp_SL;
00104c  4940              LDR      r1,|L1.4432|
00104e  f8a10056          STRH     r0,[r1,#0x56]
;;;1302   #endif
;;;1303   
;;;1304   #ifdef UKU_6U
;;;1305   
;;;1306   if(NUMMAKB==2)
;;;1307   	{
;;;1308   	if(makb[0]._cnt<5)
;;;1309   		{
;;;1310   		if(makb[0]._T_nd[0]==0)
;;;1311   			{
;;;1312   			bat[0]._Tb=makb[0]._T[0];
;;;1313   			bat[0]._nd=0;
;;;1314   			}
;;;1315   		}
;;;1316   
;;;1317   	if(makb[1]._cnt<5)
;;;1318   		{
;;;1319   		if(makb[1]._T_nd[0]==0)
;;;1320   			{
;;;1321   			bat[1]._Tb=makb[1]._T[0];
;;;1322   			bat[1]._nd=0;
;;;1323   			}
;;;1324   		}
;;;1325   
;;;1326   	}
;;;1327   else if(NUMMAKB==4)
;;;1328   	{
;;;1329   	signed short temp_t;
;;;1330   	temp_t=-20;
;;;1331   	if(makb[0]._cnt<5)
;;;1332   		{
;;;1333   		if(makb[0]._T_nd[0]==0)
;;;1334   			{
;;;1335   			temp_t=makb[0]._T[0];
;;;1336   			bat[0]._nd=0;
;;;1337   			}
;;;1338   		}
;;;1339   	if(makb[1]._cnt<5)
;;;1340   		{
;;;1341   		if(makb[1]._T_nd[0]==0)
;;;1342   			{
;;;1343   			if(temp_t<makb[1]._T[0])
;;;1344   				{
;;;1345   				bat[0]._nd=0;
;;;1346   				temp_t=makb[1]._T[0];
;;;1347   				}
;;;1348   			}
;;;1349   		}
;;;1350   	if(temp_t!=-20)bat[0]._Tb = temp_t;
;;;1351   
;;;1352    	temp_t=-20;
;;;1353   	if(makb[2]._cnt<5)
;;;1354   		{
;;;1355   		if(makb[2]._T_nd[0]==0)
;;;1356   			{
;;;1357   			temp_t=makb[2]._T[0];
;;;1358   			bat[1]._nd=0;
;;;1359   			}
;;;1360   		}
;;;1361   	if(makb[3]._cnt<5)
;;;1362   		{
;;;1363   		if(makb[3]._T_nd[0]==0)
;;;1364   			{
;;;1365   			if(temp_t<makb[3]._T[0])
;;;1366   				{
;;;1367   				bat[1]._nd=0;
;;;1368   				temp_t=makb[3]._T[0];
;;;1369   				}
;;;1370   			}
;;;1371   		}
;;;1372   	if(temp_t!=-20)bat[1]._Tb = temp_t;
;;;1373   	}
;;;1374   
;;;1375   #endif
;;;1376   
;;;1377   
;;;1378   //Íàïðÿæåíèå íàãðóçêè
;;;1379   temp_SL=(signed long)adc_buff_[2];
001052  f9b81004          LDRSH    r1,[r8,#4]  ; adc_buff_
;;;1380   temp_SL*=Kuload;
001056  4844              LDR      r0,|L1.4456|
001058  f9b00000          LDRSH    r0,[r0,#0]  ; Kuload
00105c  fb01f000          MUL      r0,r1,r0
;;;1381   temp_SL/=2000L;
001060  f44f62fa          MOV      r2,#0x7d0
001064  fb90f0f2          SDIV     r0,r0,r2
;;;1382   load_U=(signed short)temp_SL;
001068  f8dfe100          LDR      lr,|L1.4460|
00106c  f8ae0000          STRH     r0,[lr,#0]
;;;1383   
;;;1384   #ifdef UKU_220 
;;;1385   //Íàïðÿæåíèå íàãðóçêè
;;;1386   temp_SL=(signed long)adc_buff_[2];
;;;1387   temp_SL*=Kuload;
;;;1388   temp_SL/=350L;
;;;1389   load_U=(signed short)temp_SL;
;;;1390   #endif
;;;1391   
;;;1392   #ifdef UKU_220_V2 
;;;1393   //Íàïðÿæåíèå íàãðóçêè
;;;1394   temp_SL=(signed long)adc_buff_[2];
;;;1395   temp_SL*=Kuload;
;;;1396   temp_SL/=350L;
;;;1397   load_U=(signed short)temp_SL;
;;;1398   #endif
;;;1399   
;;;1400   #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;1401   //Íàïðÿæåíèå øèíû
;;;1402   temp_SL=(signed long)adc_buff_[1];
001070  f9b82002          LDRSH    r2,[r8,#2]  ; adc_buff_
;;;1403   temp_SL*=Kuout;
001074  483e              LDR      r0,|L1.4464|
001076  f9b00000          LDRSH    r0,[r0,#0]  ; Kuout
00107a  fb02f200          MUL      r2,r2,r0
;;;1404   if(AUSW_MAIN==22010)temp_SL/=400L;
00107e  482c              LDR      r0,|L1.4400|
001080  f24554fa          MOV      r4,#0x55fa
001084  f44f75c8          MOV      r5,#0x190
001088  8800              LDRH     r0,[r0,#0]  ; AUSW_MAIN
00108a  42a0              CMP      r0,r4
00108c  d102              BNE      |L1.4244|
00108e  fb92f2f5          SDIV     r2,r2,r5
001092  e003              B        |L1.4252|
                  |L1.4244|
;;;1405   else temp_SL/=500L;
001094  f44f7bfa          MOV      r11,#0x1f4
001098  fb92f2fb          SDIV     r2,r2,r11
                  |L1.4252|
;;;1406   out_U=(signed short)temp_SL;
00109c  fa0ffb82          SXTH     r11,r2
0010a0  4a34              LDR      r2,|L1.4468|
0010a2  f8a2b000          STRH     r11,[r2,#0]
;;;1407   load_U=out_U;
0010a6  f8aeb000          STRH     r11,[lr,#0]
;;;1408   
;;;1409   //Íàïðÿæåíèå âûïðÿìèòåëåé
;;;1410   temp_SL=(signed long)adc_buff_[2];
;;;1411   temp_SL*=Kubps;
0010aa  4a33              LDR      r2,|L1.4472|
0010ac  f9b22000          LDRSH    r2,[r2,#0]  ; Kubps
0010b0  fb01f102          MUL      r1,r1,r2
;;;1412   if(AUSW_MAIN==22010)temp_SL/=400L;
0010b4  d102              BNE      |L1.4284|
0010b6  fb91f1f5          SDIV     r1,r1,r5
0010ba  e003              B        |L1.4292|
                  |L1.4284|
;;;1413   else temp_SL/=500L;
0010bc  f44f72fa          MOV      r2,#0x1f4
0010c0  fb91f1f2          SDIV     r1,r1,r2
                  |L1.4292|
;;;1414   bps_U=(signed short)temp_SL;
0010c4  4d2d              LDR      r5,|L1.4476|
0010c6  b209              SXTH     r1,r1
0010c8  8029              STRH     r1,[r5,#0]
;;;1415   
;;;1416   if(bps_U<100)
0010ca  2964              CMP      r1,#0x64
0010cc  da18              BGE      |L1.4352|
;;;1417   	{
;;;1418   	char i;
;;;1419   	for(i=0;i<NUMIST;i++)
0010ce  f04f0100          MOV      r1,#0
0010d2  4a2b              LDR      r2,|L1.4480|
0010d4  f8dfe038          LDR      lr,|L1.4368|
0010d8  f9b28000          LDRSH    r8,[r2,#0]
0010dc  e00e              B        |L1.4348|
                  |L1.4318|
;;;1420   		{
;;;1421   		if(bps[i]._Uin>bps_U)bps_U=bps[i]._Uin;
0010de  ebc102c1          RSB      r2,r1,r1,LSL #3
0010e2  eb021201          ADD      r2,r2,r1,LSL #4
0010e6  eb0e0282          ADD      r2,lr,r2,LSL #2
0010ea  f9b54000          LDRSH    r4,[r5,#0]  ; bps_U
0010ee  6a12              LDR      r2,[r2,#0x20]
0010f0  42a2              CMP      r2,r4
0010f2  dd00              BLE      |L1.4342|
0010f4  802a              STRH     r2,[r5,#0]
                  |L1.4342|
0010f6  f1010101          ADD      r1,r1,#1              ;1419
0010fa  b2c9              UXTB     r1,r1                 ;1419
                  |L1.4348|
0010fc  4541              CMP      r1,r8                 ;1419
0010fe  dbee              BLT      |L1.4318|
                  |L1.4352|
;;;1422   		}
;;;1423   	}
;;;1424   
;;;1425   //Ñóììàðíûé òîê âûïðÿìèòåëåé
;;;1426   temp_SL=0;
001100  f04f0500          MOV      r5,#0
;;;1427   for (i=0;i<NUMIST;i++)
001104  4629              MOV      r1,r5
001106  4a1e              LDR      r2,|L1.4480|
001108  4c01              LDR      r4,|L1.4368|
00110a  f9b22000          LDRSH    r2,[r2,#0]            ;1419
00110e  e045              B        |L1.4508|
                  |L1.4368|
                          DCD      bps
                  |L1.4372|
                          DCD      KunetA
                  |L1.4376|
                          DCD      net_Ua
                  |L1.4380|
                          DCD      KunetB
                  |L1.4384|
                          DCD      KunetC
                  |L1.4388|
                          DCD      net_Ub
                  |L1.4392|
                          DCD      net_Uc
                  |L1.4396|
                          DCD      ||area_number.23||
                  |L1.4400|
                          DCD      AUSW_MAIN
                  |L1.4404|
                          DCD      ||.bss||+0x400
                  |L1.4408|
                          DCD      net_U
                  |L1.4412|
                          DCD      bps+0x3fa
                  |L1.4416|
                          DCD      net_F3
                  |L1.4420|
                          DCD      Kunet
                  |L1.4424|
                          DCD      net_F
                  |L1.4428|
                          DCD      Kubat
                  |L1.4432|
                          DCD      bat
                  |L1.4436|
                          DCD      Kubatm
                  |L1.4440|
                          DCD      ad7705_buff_
                  |L1.4444|
                          DCD      Kibat0
                  |L1.4448|
                          DCD      Kibat1
                  |L1.4452|
                          DCD      Ktbat
                  |L1.4456|
                          DCD      Kuload
                  |L1.4460|
                          DCD      load_U
                  |L1.4464|
                          DCD      Kuout
                  |L1.4468|
                          DCD      out_U
                  |L1.4472|
                          DCD      Kubps
                  |L1.4476|
                          DCD      bps_U
                  |L1.4480|
                          DCD      NUMIST
                  |L1.4484|
;;;1428   	{
;;;1429   	temp_SL+=((signed long)bps[i]._Ii);
001184  ebc108c1          RSB      r8,r1,r1,LSL #3
001188  eb081801          ADD      r8,r8,r1,LSL #4
00118c  eb040888          ADD      r8,r4,r8,LSL #2
001190  f8d88024          LDR      r8,[r8,#0x24]
001194  4445              ADD      r5,r5,r8
001196  f1010101          ADD      r1,r1,#1              ;1427
00119a  b2c9              UXTB     r1,r1                 ;1427
                  |L1.4508|
00119c  4291              CMP      r1,r2                 ;1427
00119e  dbf1              BLT      |L1.4484|
;;;1430   	}
;;;1431   bps_I=(signed short)temp_SL;
0011a0  49ff              LDR      r1,|L1.5536|
0011a2  800d              STRH     r5,[r1,#0]
;;;1432   
;;;1433   
;;;1434   #endif
;;;1435   
;;;1436   
;;;1437   #ifdef UKU_KONTUR
;;;1438   //Âíåøíèé äàò÷èê òåìïåðàòóðû ¹1(òåìïåðàòóðà âíåøíåãî âîçäóõà)
;;;1439   if((adc_buff_[5]>800)&&(adc_buff_[5]<3800))ND_EXT[0]=0;
;;;1440   else ND_EXT[0]=1;
;;;1441   temp_SL=(signed long)adc_buff_[5];
;;;1442   temp_SL*=Ktext[0];
;;;1443   temp_SL/=20000L;
;;;1444   temp_SL-=273L;
;;;1445   t_ext[0]=(signed short)temp_SL;
;;;1446   #else 
;;;1447   //Âíåøíèé äàò÷èê òåìïåðàòóðû ¹1(òåìïåðàòóðà âíåøíåãî âîçäóõà)
;;;1448   if((adc_buff_[5]>800)&&(adc_buff_[5]<3800))ND_EXT[0]=0;
0011a4  49ff              LDR      r1,|L1.5540|
0011a6  f8df8400          LDR      r8,|L1.5544|
0011aa  f9b1500a          LDRSH    r5,[r1,#0xa]  ; adc_buff_
0011ae  f64031b7          MOV      r1,#0xbb7
0011b2  f2a53e21          SUB      lr,r5,#0x321
0011b6  458e              CMP      lr,r1
0011b8  d202              BCS      |L1.4544|
0011ba  f8883000          STRB     r3,[r8,#0]
0011be  e001              B        |L1.4548|
                  |L1.4544|
;;;1449   else ND_EXT[0]=1;
0011c0  f8889000          STRB     r9,[r8,#0]
                  |L1.4548|
;;;1450   temp_SL=(signed long)adc_buff_[5];
;;;1451   temp_SL*=Ktext[0];
0011c4  49f9              LDR      r1,|L1.5548|
0011c6  f9b11000          LDRSH    r1,[r1,#0]  ; Ktext
0011ca  434d              MULS     r5,r1,r5
;;;1452   temp_SL/=20000L;
0011cc  f6446e20          MOV      lr,#0x4e20
0011d0  fb95f5fe          SDIV     r5,r5,lr
;;;1453   temp_SL-=273L;
0011d4  f2a51511          SUB      r5,r5,#0x111
;;;1454   t_ext[0]=(signed short)temp_SL;
0011d8  f8dfe3d4          LDR      lr,|L1.5552|
0011dc  f8ae5000          STRH     r5,[lr,#0]
;;;1455   /*
;;;1456   if((adc_buff_[6]>800)&&(adc_buff_[6]<3800))ND_EXT[1]=0;
;;;1457   else ND_EXT[1]=1;
;;;1458   temp_SL=(signed long)adc_buff_[6];
;;;1459   temp_SL*=Ktext[1];
;;;1460   temp_SL/=20000L;
;;;1461   temp_SL-=273L;
;;;1462   t_ext[1]=(signed short)temp_SL;	*/
;;;1463   #endif
;;;1464   
;;;1465   #ifdef UKU_220
;;;1466   
;;;1467   //Âíåøíèé äàò÷èê òåìïåðàòóðû ¹2(òåìïåðàòóðà îòñåêà ÝÏÓ)
;;;1468   if((adc_buff_[3]>800)&&(adc_buff_[3]<3800))ND_EXT[1]=0;
;;;1469   else ND_EXT[1]=1;
;;;1470   temp_SL=(signed long)adc_buff_[3];
;;;1471   temp_SL*=Ktext[1];
;;;1472   temp_SL/=20000L;
;;;1473   temp_SL-=273L;
;;;1474   t_ext[1]=(signed short)temp_SL;
;;;1475   
;;;1476   //Âíåøíèé äàò÷èê òåìïåðàòóðû ¹3(òåìïåðàòóðà îòñåêà MSAN)
;;;1477   if((adc_buff_[10]>800)&&(adc_buff_[10]<3800))ND_EXT[2]=0;
;;;1478   else ND_EXT[2]=1;
;;;1479   temp_SL=(signed long)adc_buff_[10];
;;;1480   temp_SL*=Ktext[2];
;;;1481   temp_SL/=20000L;
;;;1482   temp_SL-=273L;
;;;1483   t_ext[2]=(signed short)temp_SL;
;;;1484   
;;;1485   #else
;;;1486   
;;;1487   
;;;1488   #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;1489   
;;;1490   //Âíåøíèé äàò÷èê òåìïåðàòóðû 
;;;1491   if((adc_buff_[6]>800)&&(adc_buff_[6]<3800))ND_EXT[0]=0;
0011e0  9d00              LDR      r5,[sp,#0]
0011e2  f6403eb7          MOV      lr,#0xbb7
0011e6  4575              CMP      r5,lr
0011e8  d202              BCS      |L1.4592|
0011ea  f8883000          STRB     r3,[r8,#0]
0011ee  e001              B        |L1.4596|
                  |L1.4592|
;;;1492   else ND_EXT[0]=1;
0011f0  f8889000          STRB     r9,[r8,#0]
                  |L1.4596|
;;;1493   temp_SL=(signed long)adc_buff_[6];
;;;1494   temp_SL*=Ktext[0];
0011f4  fb01f10c          MUL      r1,r1,r12
;;;1495   temp_SL/=20000L;
0011f8  f6446520          MOV      r5,#0x4e20
0011fc  fb91f1f5          SDIV     r1,r1,r5
;;;1496   temp_SL-=273L;
001200  f2a11111          SUB      r1,r1,#0x111
;;;1497   t_ext[0]=(signed short)temp_SL;
001204  4dea              LDR      r5,|L1.5552|
001206  8029              STRH     r1,[r5,#0]
;;;1498   
;;;1499   #else
;;;1500   
;;;1501   
;;;1502   
;;;1503   //Âíåøíèé äàò÷èê òåìïåðàòóðû ¹2(òåìïåðàòóðà îòñåêà ÝÏÓ)
;;;1504   if((adc_buff_[6]>800)&&(adc_buff_[6]<3800))ND_EXT[1]=0;
;;;1505   else ND_EXT[1]=1;
;;;1506   temp_SL=(signed long)adc_buff_[6];
;;;1507   temp_SL*=Ktext[1];
;;;1508   temp_SL/=20000L;
;;;1509   temp_SL-=273L;
;;;1510   t_ext[1]=(signed short)temp_SL;
;;;1511   
;;;1512   //Âíåøíèé äàò÷èê òåìïåðàòóðû ¹3(òåìïåðàòóðà îòñåêà MSAN)
;;;1513   if((adc_buff_[3]>800)&&(adc_buff_[3]<3800))ND_EXT[2]=0;
;;;1514   else ND_EXT[2]=1;
;;;1515   temp_SL=(signed long)adc_buff_[3];
;;;1516   temp_SL*=Ktext[2];
;;;1517   temp_SL/=20000L;
;;;1518   temp_SL-=273L;
;;;1519   t_ext[2]=(signed short)temp_SL;
;;;1520   
;;;1521   #endif
;;;1522   #endif
;;;1523   
;;;1524   #ifdef UKU_220_V2
;;;1525   
;;;1526   //Âíåøíèé äàò÷èê òåìïåðàòóðû ¹2(òåìïåðàòóðà îòñåêà ÝÏÓ)
;;;1527   if((adc_buff_[3]>800)&&(adc_buff_[3]<3800))ND_EXT[1]=0;
;;;1528   else ND_EXT[1]=1;
;;;1529   temp_SL=(signed long)adc_buff_[3];
;;;1530   temp_SL*=Ktext[1];
;;;1531   temp_SL/=20000L;
;;;1532   temp_SL-=273L;
;;;1533   t_ext[1]=(signed short)temp_SL;
;;;1534   
;;;1535   //Âíåøíèé äàò÷èê òåìïåðàòóðû ¹3(òåìïåðàòóðà îòñåêà MSAN)
;;;1536   if((adc_buff_[10]>800)&&(adc_buff_[10]<3800))ND_EXT[2]=0;
;;;1537   else ND_EXT[2]=1;
;;;1538   temp_SL=(signed long)adc_buff_[10];
;;;1539   temp_SL*=Ktext[2];
;;;1540   temp_SL/=20000L;
;;;1541   temp_SL-=273L;
;;;1542   t_ext[2]=(signed short)temp_SL;
;;;1543   
;;;1544   #else
;;;1545   
;;;1546   #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;1547   //Òîê áàòàðåè
;;;1548   if(bps[8]._device==dIBAT_METR)
001208  f89412e0          LDRB     r1,[r4,#0x2e0]  ; bps
;;;1549   	{
;;;1550   	ibat_metr_buff_[0]=((signed long)bps[8]._buff[0])+(((signed long)bps[8]._buff[1])<<8);
;;;1551   	ibat_metr_buff_[1]=((signed long)bps[8]._buff[2])+(((signed long)bps[8]._buff[3])<<8);
;;;1552   	bIBAT_SMKLBR=((signed short)bps[8]._buff[4])+(((signed short)bps[8]._buff[5])<<8);
;;;1553   
;;;1554   	if(!bIBAT_SMKLBR)
;;;1555   		{
;;;1556   		signed long temp_SL;
;;;1557   		temp_SL=(signed long)ibat_metr_buff_[0];
;;;1558   		temp_SL-=(signed long)ibat_metr_buff_[1];
;;;1559   		temp_SL*=(signed long)Kibat1[0];
;;;1560   		if((AUSW_MAIN==22010)||(AUSW_MAIN==22011)||(AUSW_MAIN==22035)||(AUSW_MAIN==22033)||(AUSW_MAIN==22063)||(AUSW_MAIN==22023)||(AUSW_MAIN==22043)||(AUSW_MAIN==22044))temp_SL/=2000L;
;;;1561   	
;;;1562   		Ib_ips_termokompensat =(signed short)temp_SL;
00120c  f8dfc3a4          LDR      r12,|L1.5556|
001210  2909              CMP      r1,#9                 ;1548
001212  d13f              BNE      |L1.4756|
001214  f89412e6          LDRB     r1,[r4,#0x2e6]        ;1550  ; bps
001218  f89452e7          LDRB     r5,[r4,#0x2e7]        ;1550  ; bps
00121c  f8dfe398          LDR      lr,|L1.5560|
001220  eb012105          ADD      r1,r1,r5,LSL #8       ;1550
001224  f8ce1000          STR      r1,[lr,#0]            ;1550  ; ibat_metr_buff_
001228  f89452e8          LDRB     r5,[r4,#0x2e8]        ;1551  ; bps
00122c  f89492e9          LDRB     r9,[r4,#0x2e9]        ;1551  ; bps
001230  eb052509          ADD      r5,r5,r9,LSL #8       ;1551
001234  f8ce5004          STR      r5,[lr,#4]            ;1551  ; ibat_metr_buff_
001238  f89492ea          LDRB     r9,[r4,#0x2ea]        ;1552  ; bps
00123c  f894e2eb          LDRB     lr,[r4,#0x2eb]        ;1552  ; bps
001240  eb09290e          ADD      r9,r9,lr,LSL #8       ;1552
001244  f8dfe374          LDR      lr,|L1.5564|
001248  fa0ff989          SXTH     r9,r9                 ;1552
00124c  f8ae9000          STRH     r9,[lr,#0]            ;1552
001250  f1b90f00          CMP      r9,#0                 ;1554
001254  d11e              BNE      |L1.4756|
001256  eba10505          SUB      r5,r1,r5              ;1558
00125a  49d9              LDR      r1,|L1.5568|
00125c  f9b11000          LDRSH    r1,[r1,#0]            ;1559  ; Kibat1
001260  fb01f105          MUL      r1,r1,r5              ;1559
001264  f5a045aa          SUB      r5,r0,#0x5500         ;1560
001268  3dfa              SUBS     r5,r5,#0xfa           ;1560
00126a  d00d              BEQ      |L1.4744|
00126c  1e6d              SUBS     r5,r5,#1              ;1560
00126e  d00b              BEQ      |L1.4744|
001270  4550              CMP      r0,r10                ;1560
001272  d009              BEQ      |L1.4744|
001274  42b0              CMP      r0,r6                 ;1560
001276  d007              BEQ      |L1.4744|
001278  3d34              SUBS     r5,r5,#0x34           ;1560
00127a  d005              BEQ      |L1.4744|
00127c  3528              ADDS     r5,r5,#0x28           ;1560
00127e  d003              BEQ      |L1.4744|
001280  3d14              SUBS     r5,r5,#0x14           ;1560
001282  d001              BEQ      |L1.4744|
001284  1e6d              SUBS     r5,r5,#1              ;1560
001286  d103              BNE      |L1.4752|
                  |L1.4744|
001288  f44f65fa          MOV      r5,#0x7d0             ;1560
00128c  fb91f1f5          SDIV     r1,r1,r5              ;1560
                  |L1.4752|
001290  f8ac1000          STRH     r1,[r12,#0]
                  |L1.4756|
;;;1563   		}
;;;1564   	}
;;;1565   
;;;1566   bat[0]._Ub=load_U;
001294  4dcb              LDR      r5,|L1.5572|
001296  f8a5b002          STRH     r11,[r5,#2]
;;;1567   if(AUSW_MAIN==22018) Ib_ips_termokompensat=bat[0]._Ib;
00129a  f5a041ac          SUB      r1,r0,#0x5600
00129e  3902              SUBS     r1,#2
0012a0  d103              BNE      |L1.4778|
0012a2  8928              LDRH     r0,[r5,#8]  ; bat
0012a4  f8ac0000          STRH     r0,[r12,#0]
0012a8  e002              B        |L1.4784|
                  |L1.4778|
;;;1568   else bat[0]._Ib=Ib_ips_termokompensat;
0012aa  f8bc0000          LDRH     r0,[r12,#0]  ; Ib_ips_termokompensat
0012ae  8128              STRH     r0,[r5,#8]
                  |L1.4784|
;;;1569   
;;;1570   #endif
;;;1571   #endif
;;;1572   
;;;1573   
;;;1574   #ifdef UKU_TELECORE2015
;;;1575   
;;;1576   //Âíåøíèé äàò÷èê òåìïåðàòóðû ¹1
;;;1577   if((adc_buff_[7]>800)&&(adc_buff_[7]<3800))ND_EXT[0]=0;
;;;1578   else ND_EXT[0]=1;
;;;1579   temp_SL=(signed long)adc_buff_[7];
;;;1580   temp_SL*=Ktext[0];
;;;1581   temp_SL/=20000L;
;;;1582   temp_SL-=273L;
;;;1583   t_ext[0]=(signed short)temp_SL;
;;;1584   
;;;1585   
;;;1586   //Âíåøíèé äàò÷èê òåìïåðàòóðû ¹2
;;;1587   if((adc_buff_[6]>800)&&(adc_buff_[6]<3800))ND_EXT[1]=0;
;;;1588   else ND_EXT[1]=1;
;;;1589   temp_SL=(signed long)adc_buff_[6];
;;;1590   temp_SL*=Ktext[1];
;;;1591   temp_SL/=20000L;
;;;1592   temp_SL-=273L;
;;;1593   t_ext[1]=(signed short)temp_SL;
;;;1594   
;;;1595   #endif
;;;1596   
;;;1597   #ifdef UKU_TELECORE2017
;;;1598   
;;;1599   //Âíåøíèé äàò÷èê òåìïåðàòóðû ¹1
;;;1600   if((adc_buff_[7]>800)&&(adc_buff_[7]<3800))ND_EXT[0]=0;
;;;1601   else ND_EXT[0]=1;
;;;1602   temp_SL=(signed long)adc_buff_[7];
;;;1603   temp_SL*=Ktext[0];
;;;1604   temp_SL/=20000L;
;;;1605   temp_SL-=273L;
;;;1606   t_ext[0]=(signed short)temp_SL;
;;;1607   
;;;1608   
;;;1609   //Âíåøíèé äàò÷èê òåìïåðàòóðû ¹2
;;;1610   if((adc_buff_[6]>800)&&(adc_buff_[6]<3800))ND_EXT[1]=0;
;;;1611   else ND_EXT[1]=1;
;;;1612   temp_SL=(signed long)adc_buff_[6];
;;;1613   temp_SL*=Ktext[1];
;;;1614   temp_SL/=20000L;
;;;1615   temp_SL-=273L;
;;;1616   t_ext[1]=(signed short)temp_SL;
;;;1617   
;;;1618   #endif
;;;1619   
;;;1620   //íàïðÿæåíèå ââîäà
;;;1621   temp_SL=(signed long)adc_buff_ext_[0];
0012b0  f8df9314          LDR      r9,|L1.5576|
0012b4  f8b91000          LDRH     r1,[r9,#0]  ; adc_buff_ext_
;;;1622   temp_SL*=Kunet_ext[0];
0012b8  f8dfa310          LDR      r10,|L1.5580|
0012bc  f9ba0000          LDRSH    r0,[r10,#0]  ; Kunet_ext
0012c0  4348              MULS     r0,r1,r0
;;;1623   temp_SL/=4000L;
0012c2  f44f667a          MOV      r6,#0xfa0
0012c6  fb90f0f6          SDIV     r0,r0,r6
;;;1624   Uvv[0]=(signed short)temp_SL;
0012ca  49c1              LDR      r1,|L1.5584|
0012cc  b280              UXTH     r0,r0
0012ce  8008              STRH     r0,[r1,#0]
;;;1625   if(Uvv[0]<100) Uvv0=Uvv[0];
0012d0  f8dfe300          LDR      lr,|L1.5588|
0012d4  2864              CMP      r0,#0x64
0012d6  d202              BCS      |L1.4830|
0012d8  f8ae0000          STRH     r0,[lr,#0]
0012dc  e003              B        |L1.4838|
                  |L1.4830|
;;;1626   else Uvv0=net_U;
0012de  48be              LDR      r0,|L1.5592|
0012e0  8800              LDRH     r0,[r0,#0]  ; net_U
0012e2  f8ae0000          STRH     r0,[lr,#0]
                  |L1.4838|
;;;1627   
;;;1628   //íàïðÿæåíèå ïýñ
;;;1629   temp_SL=(signed long)adc_buff_ext_[1];
0012e6  f8b99002          LDRH     r9,[r9,#2]  ; adc_buff_ext_
;;;1630   temp_SL*=Kunet_ext[1];
0012ea  f9ba0002          LDRSH    r0,[r10,#2]  ; Kunet_ext
0012ee  fb00f009          MUL      r0,r0,r9
;;;1631   temp_SL/=4000L;
0012f2  fb90f0f6          SDIV     r0,r0,r6
;;;1632   Uvv[1]=(signed short)temp_SL;
0012f6  8048              STRH     r0,[r1,#2]
;;;1633   
;;;1634   
;;;1635   //íàïðÿæåíèå ââîäà òðåõôàçíîå
;;;1636   temp_SL=(signed long)eb2_data_short[0];
0012f8  49b8              LDR      r1,|L1.5596|
0012fa  f9b10000          LDRSH    r0,[r1,#0]  ; eb2_data_short
;;;1637   temp_SL*=Kvv_eb2[0];
0012fe  4eb8              LDR      r6,|L1.5600|
001300  f9b69000          LDRSH    r9,[r6,#0]  ; Kvv_eb2
001304  fb09f900          MUL      r9,r9,r0
;;;1638   temp_SL/=6000L;
001308  f2417070          MOV      r0,#0x1770
00130c  fb99faf0          SDIV     r10,r9,r0
;;;1639   Uvv_eb2[0]=(signed short)temp_SL;
001310  f8df92d0          LDR      r9,|L1.5604|
001314  f8a9a000          STRH     r10,[r9,#0]
;;;1640   
;;;1641   temp_SL=(signed long)eb2_data_short[1];
001318  f9b1e002          LDRSH    lr,[r1,#2]  ; eb2_data_short
;;;1642   temp_SL*=Kvv_eb2[1];
00131c  f9b6a002          LDRSH    r10,[r6,#2]  ; Kvv_eb2
001320  fb0afa0e          MUL      r10,r10,lr
;;;1643   temp_SL/=6000L;
001324  fb9afaf0          SDIV     r10,r10,r0
;;;1644   Uvv_eb2[1]=(signed short)temp_SL;
001328  f8a9a002          STRH     r10,[r9,#2]
;;;1645   
;;;1646   temp_SL=(signed long)eb2_data_short[2];
00132c  f9b1a004          LDRSH    r10,[r1,#4]  ; eb2_data_short
;;;1647   temp_SL*=Kvv_eb2[2];
001330  f9b66004          LDRSH    r6,[r6,#4]  ; Kvv_eb2
001334  fb06f60a          MUL      r6,r6,r10
;;;1648   temp_SL/=6000L;
001338  fb96f6f0          SDIV     r6,r6,r0
;;;1649   Uvv_eb2[2]=(signed short)temp_SL;
00133c  f8a96004          STRH     r6,[r9,#4]
;;;1650   
;;;1651   //íàïðÿæåíèå ïýñ òðåõôàçíîå
;;;1652   temp_SL=(signed long)eb2_data_short[3];
001340  f9b1a006          LDRSH    r10,[r1,#6]  ; eb2_data_short
;;;1653   temp_SL*=Kpes_eb2[0];
001344  f8df92a0          LDR      r9,|L1.5608|
001348  f9b96000          LDRSH    r6,[r9,#0]  ; Kpes_eb2
00134c  fb06f60a          MUL      r6,r6,r10
;;;1654   temp_SL/=6000L;
001350  fb96faf0          SDIV     r10,r6,r0
;;;1655   Upes_eb2[0]=(signed short)temp_SL;
001354  4ea5              LDR      r6,|L1.5612|
001356  f8a6a000          STRH     r10,[r6,#0]
;;;1656   
;;;1657   temp_SL=(signed long)eb2_data_short[4];
00135a  f9b1e008          LDRSH    lr,[r1,#8]  ; eb2_data_short
;;;1658   temp_SL*=Kpes_eb2[1];
00135e  f9b9a002          LDRSH    r10,[r9,#2]  ; Kpes_eb2
001362  fb0afa0e          MUL      r10,r10,lr
;;;1659   temp_SL/=6000L;
001366  fb9afaf0          SDIV     r10,r10,r0
;;;1660   Upes_eb2[1]=(signed short)temp_SL;
00136a  f8a6a002          STRH     r10,[r6,#2]
;;;1661   
;;;1662   temp_SL=(signed long)eb2_data_short[5];
00136e  f9b1100a          LDRSH    r1,[r1,#0xa]  ; eb2_data_short
;;;1663   temp_SL*=Kpes_eb2[2];
001372  f9b99004          LDRSH    r9,[r9,#4]  ; Kpes_eb2
001376  fb09f901          MUL      r9,r9,r1
;;;1664   temp_SL/=6000L;
00137a  fb99f0f0          SDIV     r0,r9,r0
;;;1665   Upes_eb2[2]=(signed short)temp_SL;
00137e  80b0              STRH     r0,[r6,#4]
;;;1666   
;;;1667   //Âû÷èñëåíèå òåìïåðàòóðû øêàôà
;;;1668   
;;;1669   ibt._T[0]=t_ext[1]+273;
001380  488b              LDR      r0,|L1.5552|
001382  4e9b              LDR      r6,|L1.5616|
001384  8841              LDRH     r1,[r0,#2]  ; t_ext
001386  f2011111          ADD      r1,r1,#0x111
00138a  fa0ff981          SXTH     r9,r1
00138e  f8a69000          STRH     r9,[r6,#0]
;;;1670   ibt._T[1]=t_ext[2]+273;
001392  8880              LDRH     r0,[r0,#4]  ; t_ext
001394  f2001011          ADD      r0,r0,#0x111
001398  fa0ffa80          SXTH     r10,r0
00139c  f8a6a002          STRH     r10,[r6,#2]
;;;1671   
;;;1672   ibt._nd[0]=ND_EXT[1];
0013a0  f8981001          LDRB     r1,[r8,#1]  ; ND_EXT
0013a4  7231              STRB     r1,[r6,#8]
;;;1673   ibt._nd[1]=ND_EXT[2];
0013a6  f8980002          LDRB     r0,[r8,#2]  ; ND_EXT
0013aa  7270              STRB     r0,[r6,#9]
;;;1674   
;;;1675   #ifndef UKU_TELECORE2015
;;;1676   if((ibt._nd[0]==0) &&  (ibt._nd[1]==0))
;;;1677   	{
;;;1678   	t_box=((ibt._T[0]+ibt._T[1])/2)-273;
0013ac  4e91              LDR      r6,|L1.5620|
0013ae  b901              CBNZ     r1,|L1.5042|
0013b0  b110              CBZ      r0,|L1.5048|
                  |L1.5042|
;;;1679   	}
;;;1680   else if((ibt._nd[0]==1) &&  (ibt._nd[1]==0))
0013b2  2901              CMP      r1,#1
0013b4  d00a              BEQ      |L1.5068|
0013b6  e00a              B        |L1.5070|
                  |L1.5048|
0013b8  eb09000a          ADD      r0,r9,r10             ;1678
0013bc  eb0070d0          ADD      r0,r0,r0,LSR #31      ;1678
0013c0  f46f7188          MVN      r1,#0x110             ;1678
0013c4  eb010060          ADD      r0,r1,r0,ASR #1       ;1678
0013c8  8030              STRH     r0,[r6,#0]            ;1678
0013ca  e01e              B        |L1.5130|
                  |L1.5068|
0013cc  b108              CBZ      r0,|L1.5074|
                  |L1.5070|
;;;1681   	{
;;;1682   	t_box=ibt._T[1]-273;
;;;1683   	}
;;;1684   else if((ibt._nd[0]==0) &&  (ibt._nd[1]==1))
0013ce  b129              CBZ      r1,|L1.5084|
0013d0  e006              B        |L1.5088|
                  |L1.5074|
0013d2  f2aa1a11          SUB      r10,r10,#0x111        ;1682
0013d6  f8a6a000          STRH     r10,[r6,#0]           ;1682
0013da  e016              B        |L1.5130|
                  |L1.5084|
0013dc  2801              CMP      r0,#1
0013de  d002              BEQ      |L1.5094|
                  |L1.5088|
;;;1685   	{
;;;1686   	t_box=ibt._T[0]-273;
;;;1687   	}
;;;1688   else if((ibt._nd[0]==1) &&  (ibt._nd[1]==1))
0013e0  2901              CMP      r1,#1
0013e2  d005              BEQ      |L1.5104|
0013e4  e011              B        |L1.5130|
                  |L1.5094|
0013e6  f2a91911          SUB      r9,r9,#0x111          ;1686
0013ea  f8a69000          STRH     r9,[r6,#0]            ;1686
0013ee  e00c              B        |L1.5130|
                  |L1.5104|
0013f0  2801              CMP      r0,#1
0013f2  d10a              BNE      |L1.5130|
;;;1689   	{
;;;1690   	if(t_ext_can_nd<5)t_box= t_ext_can;
0013f4  4880              LDR      r0,|L1.5624|
0013f6  7800              LDRB     r0,[r0,#0]  ; t_ext_can_nd
0013f8  2805              CMP      r0,#5
0013fa  d203              BCS      |L1.5124|
0013fc  487f              LDR      r0,|L1.5628|
0013fe  8800              LDRH     r0,[r0,#0]  ; t_ext_can
001400  8030              STRH     r0,[r6,#0]
001402  e002              B        |L1.5130|
                  |L1.5124|
;;;1691   	else t_box=20;
001404  f04f0014          MOV      r0,#0x14
001408  8030              STRH     r0,[r6,#0]
                  |L1.5130|
;;;1692   	}
;;;1693   #endif
;;;1694   /*
;;;1695   //Âû÷èñëåíèå òåìïåðàòóðû øêàôà
;;;1696   
;;;1697   ibt._T[0]=bat[0]._Tb+273;
;;;1698   ibt._T[1]=bat[1]._Tb+273;
;;;1699   ibt._T[2]=t_ext[1]+273;
;;;1700   ibt._T[3]=t_ext[2]+273;
;;;1701   
;;;1702   ibt._nd[0]=bat[0]._nd;
;;;1703   ibt._nd[1]=bat[1]._nd;
;;;1704   ibt._nd[2]=ND_EXT[1];
;;;1705   ibt._nd[3]=ND_EXT[2];
;;;1706   
;;;1707   ibt._avg1=0;
;;;1708   ibt._avg_cnt=4;
;;;1709   
;;;1710   if(ibt._nd[0]==0)
;;;1711   	{
;;;1712   	ibt._avg1+=ibt._T[0];
;;;1713   	}
;;;1714   else 
;;;1715   	{
;;;1716   	ibt._avg_cnt--;
;;;1717   	}
;;;1718   
;;;1719   if(ibt._nd[1]==0)
;;;1720   	{
;;;1721   	ibt._avg1+=ibt._T[1];
;;;1722   	}
;;;1723   else 
;;;1724   	{
;;;1725   	ibt._avg_cnt--;
;;;1726   	}
;;;1727   
;;;1728   if(ibt._nd[2]==0)
;;;1729   	{
;;;1730   	ibt._avg1+=ibt._T[2];
;;;1731   	}
;;;1732   else 
;;;1733   	{
;;;1734   	ibt._avg_cnt--;
;;;1735   	}
;;;1736   
;;;1737   if(ibt._nd[3]==0)
;;;1738   	{
;;;1739   	ibt._avg1+=ibt._T[3];
;;;1740   	}
;;;1741   else 
;;;1742   	{
;;;1743   	ibt._avg_cnt--;
;;;1744   	}
;;;1745   
;;;1746   if(ibt._avg_cnt==0)
;;;1747   	{
;;;1748   	}
;;;1749   else
;;;1750   	{
;;;1751   	ibt._avg1/=ibt._avg_cnt;
;;;1752   	}
;;;1753   
;;;1754   
;;;1755   if(ibt._nd[0]!=0)
;;;1756   	{
;;;1757   	ibt._T_dispers[0]=0;
;;;1758   	}
;;;1759   else 
;;;1760   	{
;;;1761   	ibt._T_dispers[0]=abs(ibt._T[0]-ibt._avg1);
;;;1762   	}
;;;1763   
;;;1764   if(ibt._nd[1]!=0)
;;;1765   	{
;;;1766   	ibt._T_dispers[1]=0;
;;;1767   	}
;;;1768   else 
;;;1769   	{
;;;1770   	ibt._T_dispers[1]=abs(ibt._T[1]-ibt._avg1);
;;;1771   	}
;;;1772   
;;;1773   if(ibt._nd[2]!=0)
;;;1774   	{
;;;1775   	ibt._T_dispers[2]=0;
;;;1776   	}
;;;1777   else 
;;;1778   	{
;;;1779   	ibt._T_dispers[2]=abs(ibt._T[2]-ibt._avg1);
;;;1780   	}
;;;1781   
;;;1782   if(ibt._nd[3]!=0)
;;;1783   	{
;;;1784   	ibt._T_dispers[3]=0;
;;;1785   	}
;;;1786   else 
;;;1787   	{
;;;1788   	ibt._T_dispers[3]=abs(ibt._T[3]-ibt._avg1);
;;;1789   	}
;;;1790   
;;;1791   if(	ibt._nd[0]&&
;;;1792   	ibt._nd[1]&&
;;;1793   	ibt._nd[2]&&
;;;1794   	ibt._nd[3]
;;;1795   	)
;;;1796   	{
;;;1797   	t_box=(bps[0]._Ti);
;;;1798   	}
;;;1799   
;;;1800   else if(	ibt._nd[0]||
;;;1801   	ibt._nd[1]||
;;;1802   	ibt._nd[2]||
;;;1803   	ibt._nd[3]
;;;1804   	)
;;;1805   	{
;;;1806   	t_box=(ibt._avg1-273);
;;;1807   	}
;;;1808   else 
;;;1809   	{
;;;1810   	ibt._max_dispers_num=0;
;;;1811   	ibt._max_dispers=ibt._T_dispers[0];
;;;1812   
;;;1813   	if(ibt._T_dispers[1]>ibt._max_dispers)
;;;1814   		{
;;;1815   		ibt._max_dispers_num=1;
;;;1816   		ibt._max_dispers=ibt._T_dispers[1];
;;;1817   		}
;;;1818   	if(ibt._T_dispers[2]>ibt._max_dispers)
;;;1819   		{
;;;1820   		ibt._max_dispers_num=2;
;;;1821   		ibt._max_dispers=ibt._T_dispers[2];
;;;1822   		}
;;;1823   	if(ibt._T_dispers[3]>ibt._max_dispers)
;;;1824   		{
;;;1825   		ibt._max_dispers_num=3;
;;;1826   		ibt._max_dispers=ibt._T_dispers[3];
;;;1827   		}
;;;1828   
;;;1829   	ibt._avg2=0;
;;;1830   
;;;1831   	if(ibt._max_dispers_num!=0)
;;;1832   		{
;;;1833   		ibt._avg2+=ibt._T[0];
;;;1834   		}
;;;1835   	if(ibt._max_dispers_num!=1)
;;;1836   		{
;;;1837   		ibt._avg2+=ibt._T[1];
;;;1838   		}
;;;1839   	if(ibt._max_dispers_num!=2)
;;;1840   		{
;;;1841   		ibt._avg2+=ibt._T[2];
;;;1842   		}
;;;1843   	if(ibt._max_dispers_num!=3)
;;;1844   		{
;;;1845   		ibt._avg2+=ibt._T[3];
;;;1846   		}
;;;1847   
;;;1848   	t_box=(ibt._avg2/3)-273;
;;;1849   
;;;1850   	}*/
;;;1851   
;;;1852   
;;;1853   //*********************************************
;;;1854   
;;;1855   #ifndef TELECORE
;;;1856   if((BAT_IS_ON[0]==bisON)&&(bat[0]._Ub>200)) Ibmax=bat[0]._Ib;
00140a  487d              LDR      r0,|L1.5632|
00140c  7801              LDRB     r1,[r0,#0]  ; BAT_IS_ON
00140e  2955              CMP      r1,#0x55
001410  d104              BNE      |L1.5148|
001412  f1bb0fc8          CMP      r11,#0xc8
001416  dd01              BLE      |L1.5148|
001418  8929              LDRH     r1,[r5,#8]  ; bat
00141a  8739              STRH     r1,[r7,#0x38]
                  |L1.5148|
;;;1857   if((BAT_IS_ON[1]==bisON)&&(bat[1]._Ub>200)&&(bat[1]._Ib>bat[0]._Ib)) Ibmax=bat[1]._Ib;
00141c  7840              LDRB     r0,[r0,#1]  ; BAT_IS_ON
00141e  2855              CMP      r0,#0x55
001420  d10a              BNE      |L1.5176|
001422  f9b5004e          LDRSH    r0,[r5,#0x4e]  ; bat
001426  28c8              CMP      r0,#0xc8
001428  dd06              BLE      |L1.5176|
00142a  f9b50054          LDRSH    r0,[r5,#0x54]  ; bat
00142e  f9b51008          LDRSH    r1,[r5,#8]  ; bat
001432  4288              CMP      r0,r1
001434  dd00              BLE      |L1.5176|
001436  8738              STRH     r0,[r7,#0x38]
                  |L1.5176|
;;;1858   #endif
;;;1859   
;;;1860   #ifdef TELECORE
;;;1861   Ibmax=0;
;;;1862   /*
;;;1863   if((NUMBAT_TELECORE>0)&&(lakb[0]._communicationFullErrorStat==0)&&(lakb[0]._ch_curr/10>Ibmax))Ibmax=lakb[0]._ch_curr/10;
;;;1864   if((NUMBAT_TELECORE>1)&&(lakb[1]._communicationFullErrorStat==0)&&(lakb[1]._ch_curr/10>Ibmax))Ibmax=lakb[1]._ch_curr/10;
;;;1865   if((NUMBAT_TELECORE>2)&&(lakb[2]._communicationFullErrorStat==0)&&(lakb[2]._ch_curr/10>Ibmax))Ibmax=lakb[2]._ch_curr/10;
;;;1866   */
;;;1867   if((NUMBAT_TELECORE>0)&&(bat[0]._Ib/10>Ibmax))Ibmax=bat[0]._Ib/10;
;;;1868   if((NUMBAT_TELECORE>1)&&(bat[1]._Ib/10>Ibmax))Ibmax=bat[1]._Ib/10;
;;;1869   //if((BAT_IS_ON[0]==bisON)&&(bat[0]._Ub>200)) Ibmax=bat[0]._Ib/1;
;;;1870   //if((BAT_IS_ON[1]==bisON)&&(bat[1]._Ub>200)&&(bat[1]._Ib>bat[0]._Ib)) Ibmax=bat[1]._Ib;
;;;1871   #endif
;;;1872   //Ibmax=bat[0]._Ib;
;;;1873   //if((AUSW_MAIN==22063)||(AUSW_MAIN==22023)||(AUSW_MAIN==22043))Ibmax=Ib_ips_termokompensat;
;;;1874   
;;;1875   #ifdef UKU_TELECORE2017
;;;1876   Ibmax=0;
;;;1877   if((NUMBAT_TELECORE>0)&&(bat[0]._Ib/10>Ibmax))Ibmax=bat[0]._Ib/10;
;;;1878   if((NUMBAT_TELECORE>1)&&(bat[1]._Ib/10>Ibmax))Ibmax=bat[1]._Ib/10;
;;;1879   #endif
;;;1880   
;;;1881   #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;1882   Ibmax=Ib_ips_termokompensat;
001438  f8bc0000          LDRH     r0,[r12,#0]  ; Ib_ips_termokompensat
00143c  8738              STRH     r0,[r7,#0x38]
;;;1883   #endif
;;;1884   for(i=0;i<NUMIST;i++)
00143e  f04f0100          MOV      r1,#0
001442  e02f              B        |L1.5284|
                  |L1.5188|
;;;1885   	{
;;;1886   	if(bps[i]._cnt<25)
001444  ebc100c1          RSB      r0,r1,r1,LSL #3
001448  eb001001          ADD      r0,r0,r1,LSL #4
00144c  eb040080          ADD      r0,r4,r0,LSL #2
001450  78c6              LDRB     r6,[r0,#3]
001452  2e19              CMP      r6,#0x19
001454  d21c              BCS      |L1.5264|
;;;1887        	{
;;;1888        	bps[i]._Ii=bps[i]._buff[0]+(bps[i]._buff[1]*256);
001456  7986              LDRB     r6,[r0,#6]
001458  79c7              LDRB     r7,[r0,#7]
00145a  eb062607          ADD      r6,r6,r7,LSL #8
00145e  6246              STR      r6,[r0,#0x24]
;;;1889        	bps[i]._Uin=bps[i]._buff[2]+(bps[i]._buff[3]*256);
001460  7a06              LDRB     r6,[r0,#8]
001462  7a47              LDRB     r7,[r0,#9]
001464  eb062607          ADD      r6,r6,r7,LSL #8
001468  6206              STR      r6,[r0,#0x20]
;;;1890        	bps[i]._Uii=bps[i]._buff[4]+(bps[i]._buff[5]*256);
00146a  7a86              LDRB     r6,[r0,#0xa]
00146c  7ac7              LDRB     r7,[r0,#0xb]
00146e  eb062607          ADD      r6,r6,r7,LSL #8
001472  61c6              STR      r6,[r0,#0x1c]
;;;1891        	bps[i]._Ti=(signed)(bps[i]._buff[6]);
001474  7b06              LDRB     r6,[r0,#0xc]
001476  6286              STR      r6,[r0,#0x28]
;;;1892        	bps[i]._adr_ee=bps[i]._buff[7];
001478  7b46              LDRB     r6,[r0,#0xd]
00147a  f8806052          STRB     r6,[r0,#0x52]
;;;1893        	bps[i]._flags_tm=bps[i]._buff[8];
00147e  7b86              LDRB     r6,[r0,#0xe]
001480  f8806042          STRB     r6,[r0,#0x42]
;;;1894   	     bps[i]._rotor=bps[i]._buff[10]+(bps[i]._buff[11]*256);    
001484  7c06              LDRB     r6,[r0,#0x10]
001486  7c47              LDRB     r7,[r0,#0x11]
001488  eb062607          ADD      r6,r6,r7,LSL #8
00148c  64c6              STR      r6,[r0,#0x4c]
00148e  e006              B        |L1.5278|
                  |L1.5264|
;;;1895        	} 
;;;1896   	else 
;;;1897        	{
;;;1898        	bps[i]._Uii=0; 
001490  61c3              STR      r3,[r0,#0x1c]
;;;1899        	bps[i]._Ii=0;
001492  6243              STR      r3,[r0,#0x24]
;;;1900        	bps[i]._Uin=0;
001494  6203              STR      r3,[r0,#0x20]
;;;1901        	bps[i]._Ti=0;
001496  6283              STR      r3,[r0,#0x28]
;;;1902        	bps[i]._flags_tm=0; 
001498  f8803042          STRB     r3,[r0,#0x42]
;;;1903   	     bps[i]._rotor=0;    
00149c  64c3              STR      r3,[r0,#0x4c]
                  |L1.5278|
00149e  f1010101          ADD      r1,r1,#1              ;1884
0014a2  b2c9              UXTB     r1,r1                 ;1884
                  |L1.5284|
0014a4  4291              CMP      r1,r2                 ;1884
0014a6  dbcd              BLT      |L1.5188|
;;;1904        	}
;;;1905        
;;;1906        }
;;;1907   
;;;1908   load_I=0;
0014a8  4e56              LDR      r6,|L1.5636|
;;;1909   #ifdef TELECORE
;;;1910   
;;;1911   /*for(i=0;i<NUMBAT_TELECORE;i++)
;;;1912   	{
;;;1913   	load_I-=lakb[i]._ch_curr/10;
;;;1914   	}*/
;;;1915   load_I=-(bat[0]._Ib/10)-(bat[1]._Ib/10);
;;;1916   #elif UKU_TELECORE2017
;;;1917   load_I=-(bat[0]._Ib/10)-(bat[1]._Ib/10);
;;;1918   #else
;;;1919   load_I=-(bat[0]._Ib/10)-(bat[1]._Ib/10);
0014aa  f9b51008          LDRSH    r1,[r5,#8]  ; bat
0014ae  f04f000a          MOV      r0,#0xa
0014b2  fb91f1f0          SDIV     r1,r1,r0
0014b6  f9b55054          LDRSH    r5,[r5,#0x54]  ; bat
0014ba  fb95f0f0          SDIV     r0,r5,r0
0014be  4408              ADD      r0,r0,r1
0014c0  f1c00000          RSB      r0,r0,#0
0014c4  b207              SXTH     r7,r0
0014c6  8037              STRH     r7,[r6,#0]
;;;1920   #endif
;;;1921   Isumm=0;
0014c8  4d4f              LDR      r5,|L1.5640|
0014ca  802b              STRH     r3,[r5,#0]
;;;1922   
;;;1923   for(i=0;i<NUMIST;i++)
0014cc  f04f0000          MOV      r0,#0
0014d0  e012              B        |L1.5368|
                  |L1.5330|
;;;1924        {
;;;1925        if(bps[i]._cnt<5)Isumm+=bps[i]._Ii;
0014d2  ebc001c0          RSB      r1,r0,r0,LSL #3
0014d6  eb011100          ADD      r1,r1,r0,LSL #4
0014da  eb040181          ADD      r1,r4,r1,LSL #2
0014de  f891c003          LDRB     r12,[r1,#3]
0014e2  f1bc0f05          CMP      r12,#5
0014e6  d204              BCS      |L1.5362|
0014e8  6a49              LDR      r1,[r1,#0x24]
0014ea  f8b5c000          LDRH     r12,[r5,#0]  ; Isumm
0014ee  4461              ADD      r1,r1,r12
0014f0  8029              STRH     r1,[r5,#0]
                  |L1.5362|
0014f2  f1000001          ADD      r0,r0,#1              ;1923
0014f6  b2c0              UXTB     r0,r0                 ;1923
                  |L1.5368|
0014f8  4290              CMP      r0,r2                 ;1923
0014fa  dbea              BLT      |L1.5330|
;;;1926        }  
;;;1927        
;;;1928   load_I=load_I+Isumm;
0014fc  8828              LDRH     r0,[r5,#0]  ; Isumm
0014fe  4438              ADD      r0,r0,r7
001500  b200              SXTH     r0,r0
001502  8030              STRH     r0,[r6,#0]
;;;1929   if(load_I<0)load_I=0;
001504  2800              CMP      r0,#0
001506  da00              BGE      |L1.5386|
001508  8033              STRH     r3,[r6,#0]
                  |L1.5386|
;;;1930   
;;;1931   #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;1932   load_I=0;
00150a  8033              STRH     r3,[r6,#0]
;;;1933   
;;;1934   Isumm=0;
00150c  802b              STRH     r3,[r5,#0]
;;;1935   
;;;1936   for(i=0;i<NUMIST;i++)
00150e  f04f0000          MOV      r0,#0
001512  e00f              B        |L1.5428|
                  |L1.5396|
;;;1937        {
;;;1938        if(bps[i]._cnt<5)Isumm+=bps[i]._Ii;
001514  ebc001c0          RSB      r1,r0,r0,LSL #3
001518  eb011100          ADD      r1,r1,r0,LSL #4
00151c  eb040181          ADD      r1,r4,r1,LSL #2
001520  78cf              LDRB     r7,[r1,#3]
001522  2f05              CMP      r7,#5
001524  d203              BCS      |L1.5422|
001526  6a49              LDR      r1,[r1,#0x24]
001528  882f              LDRH     r7,[r5,#0]  ; Isumm
00152a  4439              ADD      r1,r1,r7
00152c  8029              STRH     r1,[r5,#0]
                  |L1.5422|
00152e  f1000001          ADD      r0,r0,#1              ;1936
001532  b2c0              UXTB     r0,r0                 ;1936
                  |L1.5428|
001534  4290              CMP      r0,r2                 ;1936
001536  dbed              BLT      |L1.5396|
;;;1939        }  
;;;1940        
;;;1941   load_I=load_I+Isumm;
001538  8829              LDRH     r1,[r5,#0]  ; Isumm
00153a  eb030001          ADD      r0,r3,r1
00153e  b200              SXTH     r0,r0
001540  8030              STRH     r0,[r6,#0]
;;;1942   if(load_I<0)load_I=0;
001542  2800              CMP      r0,#0
001544  da00              BGE      |L1.5448|
001546  8033              STRH     r3,[r6,#0]
                  |L1.5448|
;;;1943   
;;;1944   #endif
;;;1945   #ifdef IPS_SGEP_GAZPROM
;;;1946   load_I=Isumm;
;;;1947   #endif
;;;1948   
;;;1949   
;;;1950   #ifdef UKU_GLONASS
;;;1951   inv[0]._Uio=6;
;;;1952   if (NUMINV)
;;;1953   	{
;;;1954   	for(i=0;i<NUMINV;i++)
;;;1955   		{
;;;1956   		if(bps[i+first_inv_slot]._cnt<25)
;;;1957        		{
;;;1958        		inv[i]._Ii=bps[i+first_inv_slot]._buff[0]+(bps[i+first_inv_slot]._buff[1]*256);
;;;1959        		inv[i]._Uin=bps[i+first_inv_slot]._buff[2]+(bps[i+first_inv_slot]._buff[3]*256);
;;;1960        		inv[i]._Uio=bps[i+first_inv_slot]._buff[4]+(bps[i+first_inv_slot]._buff[5]*256);
;;;1961        		inv[i]._Ti=(signed)(bps[i+first_inv_slot]._buff[6]);
;;;1962        		inv[i]._flags_tm=bps[i+first_inv_slot]._buff[8];
;;;1963   	    	//	inv[i]._rotor=bps[i+first_inv_slot]._buff[10]+(bps[i+first_inv_slot]._buff[11]*256);
;;;1964   			inv[i]._cnt=0;    
;;;1965        		} 
;;;1966   		else 
;;;1967        		{
;;;1968        		inv[i]._Uio=0; 
;;;1969        		inv[i]._Ii=0;
;;;1970        		inv[i]._Uin=0;
;;;1971        		inv[i]._Ti=0;
;;;1972        		inv[i]._flags_tm=0; 
;;;1973   //	     	inv[i]._rotor0;
;;;1974   			inv[i]._cnt=25;    
;;;1975        		}
;;;1976        	}
;;;1977      	}
;;;1978   #endif
;;;1979   
;;;1980   #ifndef UKU_GLONASS
;;;1981   if (NUMINV)
001548  4830              LDR      r0,|L1.5644|
00154a  f9b05000          LDRSH    r5,[r0,#0]  ; NUMINV
00154e  2d00              CMP      r5,#0
001550  d07e              BEQ      |L1.5712|
;;;1982   	{
;;;1983   	for(i=0;i<NUMINV;i++)
001552  f04f0200          MOV      r2,#0
;;;1984   		{
;;;1985   		if(bps[i+20]._cnt<25)
;;;1986        		{
;;;1987        		inv[i]._Ii=bps[i+20]._buff[0]+(bps[i+20]._buff[1]*256);
001556  4e2e              LDR      r6,|L1.5648|
001558  e09e              B        |L1.5784|
                  |L1.5466|
00155a  f1020014          ADD      r0,r2,#0x14           ;1985
00155e  ebc001c0          RSB      r1,r0,r0,LSL #3       ;1985
001562  eb011000          ADD      r0,r1,r0,LSL #4       ;1985
001566  eb040080          ADD      r0,r4,r0,LSL #2       ;1985
00156a  78c1              LDRB     r1,[r0,#3]            ;1985
00156c  2919              CMP      r1,#0x19              ;1985
00156e  d277              BCS      |L1.5728|
001570  7981              LDRB     r1,[r0,#6]
001572  79c7              LDRB     r7,[r0,#7]
001574  eb012707          ADD      r7,r1,r7,LSL #8
001578  eb020142          ADD      r1,r2,r2,LSL #1
00157c  eb061141          ADD      r1,r6,r1,LSL #5
001580  61cf              STR      r7,[r1,#0x1c]
;;;1988        		inv[i]._Pio=bps[i+20]._buff[2]+(bps[i+20]._buff[3]*256);
001582  7a07              LDRB     r7,[r0,#8]
001584  f890c009          LDRB     r12,[r0,#9]
001588  eb07270c          ADD      r7,r7,r12,LSL #8
00158c  62cf              STR      r7,[r1,#0x2c]
;;;1989        		inv[i]._Uio=bps[i+20]._buff[4]+(bps[i+20]._buff[5]*256);
00158e  7a87              LDRB     r7,[r0,#0xa]
001590  f890c00b          LDRB     r12,[r0,#0xb]
001594  eb07270c          ADD      r7,r7,r12,LSL #8
001598  618f              STR      r7,[r1,#0x18]
;;;1990        		inv[i]._Ti=(signed)(bps[i+20]._buff[6]);
00159a  7b07              LDRB     r7,[r0,#0xc]
00159c  620f              STR      r7,[r1,#0x20]
;;;1991        		inv[i]._flags_tm=bps[i+20]._buff[7];
00159e  e039              B        |L1.5652|
                  |L1.5536|
                          DCD      bps_I
                  |L1.5540|
                          DCD      ||.bss||+0x400
                  |L1.5544|
                          DCD      ND_EXT
                  |L1.5548|
                          DCD      Ktext
                  |L1.5552|
                          DCD      t_ext
                  |L1.5556|
                          DCD      Ib_ips_termokompensat
                  |L1.5560|
                          DCD      ibat_metr_buff_
                  |L1.5564|
                          DCD      bIBAT_SMKLBR
                  |L1.5568|
                          DCD      Kibat1
                  |L1.5572|
                          DCD      bat
                  |L1.5576|
                          DCD      adc_buff_ext_
                  |L1.5580|
                          DCD      Kunet_ext
                  |L1.5584|
                          DCD      Uvv
                  |L1.5588|
                          DCD      Uvv0
                  |L1.5592|
                          DCD      net_U
                  |L1.5596|
                          DCD      eb2_data_short
                  |L1.5600|
                          DCD      Kvv_eb2
                  |L1.5604|
                          DCD      Uvv_eb2
                  |L1.5608|
                          DCD      Kpes_eb2
                  |L1.5612|
                          DCD      Upes_eb2
                  |L1.5616|
                          DCD      ibt
                  |L1.5620|
                          DCD      t_box
                  |L1.5624|
                          DCD      t_ext_can_nd
                  |L1.5628|
                          DCD      t_ext_can
                  |L1.5632|
                          DCD      BAT_IS_ON
                  |L1.5636|
                          DCD      load_I
                  |L1.5640|
                          DCD      Isumm
                  |L1.5644|
                          DCD      NUMINV
                  |L1.5648|
                          DCD      inv
                  |L1.5652|
001614  7b47              LDRB     r7,[r0,#0xd]
001616  f8817046          STRB     r7,[r1,#0x46]
;;;1992        		inv[i]._Uin=bps[i+20]._buff[8]+(bps[i+20]._buff[9]*256);
00161a  7b87              LDRB     r7,[r0,#0xe]
00161c  f890c00f          LDRB     r12,[r0,#0xf]
001620  eb07270c          ADD      r7,r7,r12,LSL #8
001624  628f              STR      r7,[r1,#0x28]
;;;1993        		inv[i]._Uil=bps[i+20]._buff[10]+(bps[i+20]._buff[11]*256);
001626  7c07              LDRB     r7,[r0,#0x10]
001628  f890c011          LDRB     r12,[r0,#0x11]
00162c  eb07270c          ADD      r7,r7,r12,LSL #8
001630  624f              STR      r7,[r1,#0x24]
;;;1994   			inv[i]._cnt=0;
001632  708b              STRB     r3,[r1,#2]
;;;1995   			inv[i]._Uoutmin=bps[i+20]._buff[12]; 
001634  7c87              LDRB     r7,[r0,#0x12]
001636  f8817059          STRB     r7,[r1,#0x59]
;;;1996   			inv[i]._Uoutmax=bps[i+20]._buff[13]; 
00163a  7cc7              LDRB     r7,[r0,#0x13]
00163c  f881705a          STRB     r7,[r1,#0x5a]
;;;1997   			inv[i]._Pnom=bps[i+20]._buff[14]; 
001640  7d07              LDRB     r7,[r0,#0x14]
001642  f8817058          STRB     r7,[r1,#0x58]
;;;1998   			inv[i]._net_contr_en=bps[i+20]._buff[15];
001646  7d47              LDRB     r7,[r0,#0x15]
001648  f881705b          STRB     r7,[r1,#0x5b]
;;;1999   			inv[i]._pwm_en=bps[i+20]._buff[16];  
00164c  7d87              LDRB     r7,[r0,#0x16]
00164e  e001              B        |L1.5716|
                  |L1.5712|
001650  e025              B        |L1.5790|
001652  e005              B        |L1.5728|
                  |L1.5716|
001654  f881705c          STRB     r7,[r1,#0x5c]
;;;2000   			inv[i]._phase_mode=bps[i+20]._buff[17];  
001658  7dc0              LDRB     r0,[r0,#0x17]
00165a  f881005d          STRB     r0,[r1,#0x5d]
00165e  e018              B        |L1.5778|
                  |L1.5728|
;;;2001        		} 
;;;2002   		else 
;;;2003        		{
;;;2004         		inv[i]._Ii=0;
001660  eb020042          ADD      r0,r2,r2,LSL #1
001664  eb061040          ADD      r0,r6,r0,LSL #5
001668  61c3              STR      r3,[r0,#0x1c]
;;;2005   			inv[i]._Pio=0;
00166a  62c3              STR      r3,[r0,#0x2c]
;;;2006   			inv[i]._Uio=0;
00166c  6183              STR      r3,[r0,#0x18]
;;;2007        		inv[i]._Ti=0;
00166e  6203              STR      r3,[r0,#0x20]
;;;2008        		inv[i]._flags_tm=0; 
001670  f8803046          STRB     r3,[r0,#0x46]
;;;2009        		inv[i]._Uil=0;
001674  6243              STR      r3,[r0,#0x24]
;;;2010        		inv[i]._Uin=0;
001676  6283              STR      r3,[r0,#0x28]
;;;2011   			inv[i]._cnt=25; 
001678  f04f0119          MOV      r1,#0x19
00167c  7081              STRB     r1,[r0,#2]
;;;2012   			inv[i]._Uoutmin=0; 
00167e  f8803059          STRB     r3,[r0,#0x59]
;;;2013   			inv[i]._Uoutmax=0; 
001682  f880305a          STRB     r3,[r0,#0x5a]
;;;2014   			inv[i]._Pnom=0; 
001686  f8803058          STRB     r3,[r0,#0x58]
;;;2015   			inv[i]._net_contr_en=0;
00168a  f880305b          STRB     r3,[r0,#0x5b]
;;;2016   			inv[i]._pwm_en=0;   
00168e  f880305c          STRB     r3,[r0,#0x5c]
                  |L1.5778|
001692  f1020201          ADD      r2,r2,#1              ;1983
001696  b2d2              UXTB     r2,r2                 ;1983
                  |L1.5784|
001698  42aa              CMP      r2,r5                 ;1983
00169a  f6ffaf5e          BLT      |L1.5466|
                  |L1.5790|
;;;2017   			   
;;;2018        		}
;;;2019        	}
;;;2020      	}
;;;2021   #endif
;;;2022   
;;;2023   #ifdef GLADKOV
;;;2024   inv[0]._Ii=bps[4]._buff[0]+(bps[4]._buff[1]*256);
;;;2025   inv[0]._Pio=bps[4]._buff[2]+(bps[4]._buff[3]*256);
;;;2026   inv[0]._Uio=bps[4]._buff[4]+(bps[4]._buff[5]*256);
;;;2027   inv[0]._Ti=(signed)(bps[4]._buff[6]);
;;;2028   inv[0]._flags_tm=bps[4]._buff[7];
;;;2029   inv[0]._Uin=bps[4]._buff[8]+(bps[4]._buff[9]*256);
;;;2030   inv[0]._Uil=bps[4]._buff[10]+(bps[4]._buff[11]*256);
;;;2031   inv[0]._cnt=0;    
;;;2032   
;;;2033   inv[1]._Ii=bps[21]._buff[0]+(bps[21]._buff[1]*256);
;;;2034   inv[1]._Pio=bps[21]._buff[2]+(bps[21]._buff[3]*256);
;;;2035   inv[1]._Uio=bps[21]._buff[4]+(bps[21]._buff[5]*256);
;;;2036   inv[1]._Ti=(signed)(bps[21]._buff[6]);
;;;2037   inv[1]._flags_tm=bps[21]._buff[7];
;;;2038   inv[1]._Uin=bps[21]._buff[8]+(bps[21]._buff[9]*256);
;;;2039   inv[1]._Uil=bps[21]._buff[10]+(bps[21]._buff[11]*256);
;;;2040   inv[1]._cnt=0;    
;;;2041   #endif
;;;2042   
;;;2043   /*
;;;2044   if((BAT_IS_ON[0]==bisON)&&(BAT_TYPE==1))
;;;2045   	{
;;;2046   	lakb[0]._battCommState=0;
;;;2047   	if(lakb[0]._cnt>10)lakb[0]._battCommState=2;
;;;2048   	else if(lakb[0]._bRS485ERR==1)lakb[0]._battCommState=1;
;;;2049   	
;;;2050   	if(lakb[0]._battCommState==0)
;;;2051   		{	
;;;2052   		bat[0]._Ub=(signed short)((lakb[0]._tot_bat_volt+5)/10);
;;;2053   		bat[0]._Ib=(signed short)lakb[0]._ch_curr;
;;;2054   		if(lakb[0]._dsch_curr) bat[0]._Ib=(signed short) (-lakb[0]._dsch_curr);
;;;2055   		bat[0]._Tb=(signed short)lakb[0]._max_cell_temp;
;;;2056   		}
;;;2057   	}
;;;2058   */
;;;2059   
;;;2060   #ifdef UKU_TELECORE2015
;;;2061   
;;;2062   	if(BAT_TYPE==2)
;;;2063   		{
;;;2064   		lakb[0]._ch_curr/*temp_SS*/=((ascii2halFhex(liBatteryInBuff[113]))<<12)+
;;;2065   					 		((ascii2halFhex(liBatteryInBuff[114]))<<8)+
;;;2066   							((ascii2halFhex(liBatteryInBuff[115]))<<4)+
;;;2067   							((ascii2halFhex(liBatteryInBuff[116])));
;;;2068   		
;;;2069   		/*if(temp_SS&0x8000)		lakb[0]._ch_curr=~temp_SS;
;;;2070   		else 				lakb[0]._ch_curr=temp_SS;*/
;;;2071   	
;;;2072   		lakb[0]._tot_bat_volt=	(unsigned short)(((ascii2halFhex(liBatteryInBuff[117]))<<12)+
;;;2073   							((ascii2halFhex(liBatteryInBuff[118]))<<8)+
;;;2074   							((ascii2halFhex(liBatteryInBuff[119]))<<4)+
;;;2075   							((ascii2halFhex(liBatteryInBuff[120]))))/100;
;;;2076   	
;;;2077   		lakb[0]._max_cell_temp= 	(((ascii2halFhex(liBatteryInBuff[93]))<<12)+
;;;2078   							((ascii2halFhex(liBatteryInBuff[94]))<<8)+
;;;2079   							((ascii2halFhex(liBatteryInBuff[95]))<<4)+
;;;2080   							((ascii2halFhex(liBatteryInBuff[96]))))/10-273;
;;;2081   	
;;;2082   		lakb[0]._s_o_c_abs=		(unsigned short)((ascii2halFhex(liBatteryInBuff[121]))<<12)+
;;;2083   							((ascii2halFhex(liBatteryInBuff[122]))<<8)+
;;;2084   							((ascii2halFhex(liBatteryInBuff[123]))<<4)+
;;;2085   							((ascii2halFhex(liBatteryInBuff[124])));
;;;2086   	
;;;2087   		lakb[0]._rat_cap=		(unsigned short)((ascii2halFhex(liBatteryInBuff[127]))<<12)+
;;;2088   							((ascii2halFhex(liBatteryInBuff[128]))<<8)+
;;;2089   							((ascii2halFhex(liBatteryInBuff[129]))<<4)+
;;;2090   							((ascii2halFhex(liBatteryInBuff[130])));
;;;2091   	
;;;2092   		lakb[0]._s_o_c=		lakb[0]._s_o_c_abs/(lakb[0]._rat_cap/100);
;;;2093   	
;;;2094   	
;;;2095   	/*	lakb[0]._rat_cap= (lakb_damp[i][13]*256)+ lakb_damp[i][14];
;;;2096   		lakb[0]._max_cell_volt= (lakb_damp[i][0]*256)+ lakb_damp[i][1];
;;;2097   		lakb[0]._min_cell_volt= (lakb_damp[i][2]*256)+ lakb_damp[i][3];
;;;2098   		lakb[0]._max_cell_temp= lakb_damp[i][4];
;;;2099   		lakb[0]._min_cell_temp= lakb_damp[i][5];
;;;2100   		lakb[0]._tot_bat_volt= (lakb_damp[i][6]*256)+ lakb_damp[i][7];
;;;2101   		lakb[0]._ch_curr= (lakb_damp[i][8]*256)+ lakb_damp[i][8];
;;;2102   		lakb[0]._dsch_curr= (lakb_damp[i][10]*256)+ lakb_damp[i][11];
;;;2103   		lakb[0]._s_o_c= lakb_damp[i][12];
;;;2104   		lakb[0]._r_b_t= lakb_damp[i][15];
;;;2105   		lakb[0]._c_c_l_v= (lakb_damp[i][16]*256)+ lakb_damp[i][17];
;;;2106   		lakb[0]._s_o_h= lakb_damp[i][18];
;;;2107   	
;;;2108   		if(lakb[i]._rat_cap==0)
;;;2109   			{
;;;2110   			if(lakb[i]._isOnCnt)
;;;2111   				{
;;;2112   				lakb[i]._isOnCnt--;
;;;2113   				if(lakb[i]._isOnCnt==0)
;;;2114   					{
;;;2115   					if(lakb[i]._battIsOn!=0) bLAKB_KONF_CH=1;
;;;2116   					}
;;;2117   				}
;;;2118   			}
;;;2119   		else 
;;;2120   			{
;;;2121   			if(lakb[i]._isOnCnt<50)
;;;2122   				{
;;;2123   				lakb[i]._isOnCnt++;
;;;2124   				if(lakb[i]._isOnCnt==50)
;;;2125   					{
;;;2126   					if(lakb[i]._battIsOn!=1) bLAKB_KONF_CH=1;
;;;2127   					}
;;;2128   				}
;;;2129   			}
;;;2130   		gran(&lakb[i]._isOnCnt,0,50);*/
;;;2131   		}
;;;2132   	else if(BAT_TYPE==3)
;;;2133   		{
;;;2134   		//short numOfPacks;
;;;2135   		//short numOfCells, numOfTemperCells, baseOfData;
;;;2136   		
;;;2137   		#ifndef UKU_TELECORE2016
;;;2138   		numOfCells=((ascii2halFhex(liBatteryInBuff[17]))<<4)+((ascii2halFhex(liBatteryInBuff[18])));
;;;2139   		numOfTemperCells=((ascii2halFhex(liBatteryInBuff[17+(numOfCells*4)+2]))<<4)+((ascii2halFhex(liBatteryInBuff[18+(numOfCells*4)+2])));
;;;2140   		numOfPacks=((ascii2halFhex(liBatteryInBuff[15]))<<4)+((ascii2halFhex(liBatteryInBuff[16])));
;;;2141   		if(numOfPacks)numOfPacks-=1;
;;;2142   		if((numOfPacks<0)||(numOfPacks>NUMBAT_TELECORE))numOfPacks=0;
;;;2143   		plazma_numOfCells=numOfCells;
;;;2144   		plazma_numOfTemperCells=numOfTemperCells;
;;;2145   		plazma_numOfPacks=numOfPacks;
;;;2146   
;;;2147   
;;;2148   		baseOfData=16+(numOfCells*4)+2+(numOfTemperCells*4)+2;
;;;2149   
;;;2150   		lakb[numOfPacks]._ch_curr=(signed short)(
;;;2151   							((ascii2halFhex(liBatteryInBuff[1+baseOfData]))<<12)+
;;;2152   							((ascii2halFhex(liBatteryInBuff[2+baseOfData]))<<8)+
;;;2153   							((ascii2halFhex(liBatteryInBuff[3+baseOfData]))<<4)+
;;;2154   							((ascii2halFhex(liBatteryInBuff[4+baseOfData])))
;;;2155   							);	  
;;;2156   
;;;2157   		lakb[numOfPacks]._tot_bat_volt=(signed short)(
;;;2158   							((ascii2halFhex(liBatteryInBuff[1+baseOfData+4]))<<12)+
;;;2159   							((ascii2halFhex(liBatteryInBuff[2+baseOfData+4]))<<8)+
;;;2160   							((ascii2halFhex(liBatteryInBuff[3+baseOfData+4]))<<4)+
;;;2161   							((ascii2halFhex(liBatteryInBuff[4+baseOfData+4])))
;;;2162   							)/10;
;;;2163   
;;;2164   		lakb[numOfPacks]._max_cell_temp=(signed short)(
;;;2165   							((ascii2halFhex(liBatteryInBuff[1+baseOfData-4]))<<12)+
;;;2166   							((ascii2halFhex(liBatteryInBuff[2+baseOfData-4]))<<8)+
;;;2167   							((ascii2halFhex(liBatteryInBuff[3+baseOfData-4]))<<4)+
;;;2168   							((ascii2halFhex(liBatteryInBuff[4+baseOfData-4])))
;;;2169   							)-2730;
;;;2170   
;;;2171   		lakb[numOfPacks]._s_o_c=(signed short)(
;;;2172   							((ascii2halFhex(liBatteryInBuff[1+baseOfData+8]))<<12)+
;;;2173   							((ascii2halFhex(liBatteryInBuff[2+baseOfData+8]))<<8)+
;;;2174   							((ascii2halFhex(liBatteryInBuff[3+baseOfData+8]))<<4)+
;;;2175   							((ascii2halFhex(liBatteryInBuff[4+baseOfData+8])))
;;;2176   							)/10;
;;;2177   
;;;2178   		lakb[numOfPacks]._s_o_h=(signed short)(
;;;2179   							((ascii2halFhex(liBatteryInBuff[1+baseOfData+14]))<<12)+
;;;2180   							((ascii2halFhex(liBatteryInBuff[2+baseOfData+14]))<<8)+
;;;2181   							((ascii2halFhex(liBatteryInBuff[3+baseOfData+14]))<<4)+
;;;2182   							((ascii2halFhex(liBatteryInBuff[4+baseOfData+14])))
;;;2183   							)/10;
;;;2184   		#endif
;;;2185   		
;;;2186   		#ifdef UKU_TELECORE2016
;;;2187   		{
;;;2188   		char i;
;;;2189   		
;;;2190   		for(i=0;i<NUMBAT_TELECORE;i++)
;;;2191   			{
;;;2192   			lakb[i]._s_o_c_percent= (signed short)(((unsigned long)lakb[i]._s_o_c*100UL)/(unsigned long)lakb[i]._s_o_h);
;;;2193   			}
;;;2194   		}
;;;2195   		#endif
;;;2196   		
;;;2197   										  
;;;2198   		}
;;;2199   	
;;;2200   if(sacredSunSilentCnt<3) 
;;;2201   	{
;;;2202       	bat[0]._Ub=lakb[0]._tot_bat_volt;
;;;2203       	bat[0]._Tb=lakb[0]._max_cell_temp;
;;;2204      	//bat[0]._Ib=lakb[0]._ch_curr/10;
;;;2205   	}
;;;2206   else 
;;;2207   	{
;;;2208       	//bat[0]._Ub=0;
;;;2209       	//bat[0]._Tb=0;
;;;2210      	//bat[0]._Ib=0;
;;;2211   	}
;;;2212   
;;;2213   if(BAT_TYPE==1)
;;;2214   	{
;;;2215   	char i;
;;;2216   	for(i=0;i<1;i++)
;;;2217   		{
;;;2218   		lakb[i]._rat_cap= (lakb_damp[i][13]*256)+ lakb_damp[i][14];
;;;2219   		lakb[i]._max_cell_volt= (lakb_damp[i][0]*256)+ lakb_damp[i][1];
;;;2220   		lakb[i]._min_cell_volt= (lakb_damp[i][2]*256)+ lakb_damp[i][3];
;;;2221   		lakb[i]._max_cell_temp= lakb_damp[i][4];
;;;2222   		lakb[i]._min_cell_temp= lakb_damp[i][5];
;;;2223   		lakb[i]._tot_bat_volt= (lakb_damp[i][6]*256)+ lakb_damp[i][7];
;;;2224   		lakb[i]._ch_curr= (lakb_damp[i][8]*256)+ lakb_damp[i][9];
;;;2225   		lakb[i]._dsch_curr= (lakb_damp[i][10]*256)+ lakb_damp[i][11];
;;;2226   		lakb[i]._s_o_c= lakb_damp[i][12];
;;;2227   		lakb[i]._r_b_t= lakb_damp[i][15];
;;;2228   		lakb[i]._c_c_l_v= (lakb_damp[i][16]*256)+ lakb_damp[i][17];
;;;2229   		lakb[i]._s_o_h= lakb_damp[i][18];
;;;2230   		lakb[i]._flags1= lakb_damp[i][34];
;;;2231   		lakb[i]._flags2= lakb_damp[i][35];
;;;2232   		lakb[i]._b_p_ser_num= lakb_damp[i][36];
;;;2233   
;;;2234   /*		if(lakb[i]._rat_cap==0)
;;;2235   			{
;;;2236   			if(lakb[i]._isOnCnt)
;;;2237   				{
;;;2238   				lakb[i]._isOnCnt--;
;;;2239   				if(lakb[i]._isOnCnt==0)
;;;2240   					{
;;;2241   					if(lakb[i]._battIsOn!=0) bLAKB_KONF_CH=1;
;;;2242   					}
;;;2243   				}
;;;2244   			}
;;;2245   		else 
;;;2246   			{
;;;2247   			if(lakb[i]._isOnCnt<50)
;;;2248   				{
;;;2249   				lakb[i]._isOnCnt++;
;;;2250   				if(lakb[i]._isOnCnt==50)
;;;2251   					{
;;;2252   					if(lakb[i]._battIsOn!=1) bLAKB_KONF_CH=1;
;;;2253   					}
;;;2254   				}
;;;2255   			} */
;;;2256   		gran(&lakb[i]._isOnCnt,0,50);
;;;2257   	 	}
;;;2258   
;;;2259   	if(lakb_damp[0][41]==100)
;;;2260   		{
;;;2261   		li_bat._485Error=1;
;;;2262   		}
;;;2263   	if(lakb_damp[0][41]==0)
;;;2264   		{
;;;2265   		//if(bRS485ERR)bLAKB_KONF_CH=1;
;;;2266   		li_bat._485Error=0;
;;;2267   		}
;;;2268   	li_bat._485ErrorCnt=lakb_damp[0][41];
;;;2269   
;;;2270   
;;;2271   	}
;;;2272   
;;;2273   
;;;2274   #endif
;;;2275   
;;;2276   		#ifdef UKU_TELECORE2017
;;;2277   		{
;;;2278   		char i;
;;;2279   		
;;;2280   		for(i=0;i<NUMBAT_TELECORE;i++)
;;;2281   			{
;;;2282   			lakb[i]._s_o_c_percent= (signed short)(((unsigned long)lakb[i]._s_o_c*100UL)/(unsigned long)lakb[i]._s_o_h);
;;;2283   			}
;;;2284   		}
;;;2285   		#endif
;;;2286   #ifdef UKU_TELECORE2015
;;;2287   //âû÷èñëåíèå ïàðàìåòðîâ ðàáîòû áàòàðåè
;;;2288   //TODO äîïèñàòü äëÿ âñåõ áàòàðåé âñå ïàðàìåòðû è ïðè îòöåïêå áàòàðåé
;;;2289   li_bat._batStat=bsOK;
;;;2290   if(BAT_TYPE==1) //COSLIGHT
;;;2291   	{
;;;2292   	if(li_bat._batStat==bsOK)
;;;2293   		{
;;;2294   		li_bat._Ub=lakb[0]._tot_bat_volt/10;
;;;2295   
;;;2296   		if(lakb[0]._ch_curr)li_bat._Ib=lakb[0]._ch_curr/10;
;;;2297   		else if(lakb[0]._dsch_curr) li_bat._Ib=bat[0]._Ib/10;//lakb[0]._dsch_curr/10;
;;;2298   	
;;;2299   		li_bat._ratCap=lakb[0]._rat_cap/100;
;;;2300   		li_bat._soc=lakb[0]._s_o_c;
;;;2301   		li_bat._soh=lakb[0]._s_o_h;
;;;2302   		li_bat._cclv=lakb[0]._c_c_l_v/10;
;;;2303   		li_bat._Tb=lakb[0]._max_cell_temp;
;;;2304   		li_bat._rbt=lakb[0]._r_b_t;
;;;2305   		}
;;;2306   	else 
;;;2307   		{
;;;2308   		li_bat._Ub=bat[0]._Ub;
;;;2309   		li_bat._Ib=bat[0]._Ib/10;
;;;2310   		li_bat._Tb=bat[0]._Tb;
;;;2311   		}
;;;2312   
;;;2313   	if((li_bat._485Error)||(li_bat._canError))
;;;2314   		{
;;;2315   		li_bat._batStat=bsOFF;
;;;2316   		}
;;;2317   	else li_bat._batStat=bsOK;
;;;2318   	}
;;;2319   else if(BAT_TYPE==2) //SACRED SUN
;;;2320   	{
;;;2321   	}
;;;2322   else if(BAT_TYPE==3) //ZTT
;;;2323   	{
;;;2324   	if(li_bat._batStat==bsOK)
;;;2325   		{
;;;2326   
;;;2327   		}
;;;2328   	}
;;;2329   #endif
;;;2330   
;;;2331   
;;;2332   /*
;;;2333   if((BAT_IS_ON[0]==bisON)&&(BAT_TYPE[0]==1)&&(BAT_LINK==0))
;;;2334   	{
;;;2335   
;;;2336   
;;;2337   	if(bat_drv_rx_buff[13]<=0x39)bbb[0]=bat_drv_rx_buff[13]-0x30;
;;;2338   	else bbb[0]=bat_drv_rx_buff[13]-55;
;;;2339   	if(bat_drv_rx_buff[14]<=0x39)bbb[1]=bat_drv_rx_buff[14]-0x30;
;;;2340   	else bbb[1]=bat_drv_rx_buff[14]-55;
;;;2341   	if(bat_drv_rx_buff[15]<=0x39)bbb[2]=bat_drv_rx_buff[15]-0x30;
;;;2342   	else bbb[2]=bat_drv_rx_buff[15]-55;
;;;2343   	if(bat_drv_rx_buff[16]<=0x39)bbb[3]=bat_drv_rx_buff[16]-0x30;
;;;2344   	else bbb[3]=bat_drv_rx_buff[16]-55;
;;;2345   
;;;2346   	tempSS=0;
;;;2347   	tempSS=((bbb[0]*4096)+(bbb[1]*256)+(bbb[2]*16)+bbb[3]);
;;;2348   
;;;2349   	bat[0]._max_cell_volt=(tempSS+5)/10;
;;;2350   
;;;2351   	if(bat_drv_rx_buff[17]<=0x39)bbb[0]=bat_drv_rx_buff[17]-0x30;
;;;2352   	else bbb[0]=bat_drv_rx_buff[17]-55;
;;;2353   	if(bat_drv_rx_buff[18]<=0x39)bbb[1]=bat_drv_rx_buff[18]-0x30;
;;;2354   	else bbb[1]=bat_drv_rx_buff[18]-55;
;;;2355   	if(bat_drv_rx_buff[19]<=0x39)bbb[2]=bat_drv_rx_buff[19]-0x30;
;;;2356   	else bbb[2]=bat_drv_rx_buff[19]-55;
;;;2357   	if(bat_drv_rx_buff[20]<=0x39)bbb[3]=bat_drv_rx_buff[20]-0x30;
;;;2358   	else bbb[3]=bat_drv_rx_buff[20]-55;
;;;2359   
;;;2360   	tempSS=0;
;;;2361   	tempSS=((bbb[0]*4096)+(bbb[1]*256)+(bbb[2]*16)+bbb[3]);
;;;2362   
;;;2363   	bat[0]._min_cell_volt=(tempSS+5)/10;
;;;2364   
;;;2365   
;;;2366   	}*/
;;;2367   
;;;2368   
;;;2369   
;;;2370   }
00169e  e8bd9ffc          POP      {r2-r12,pc}
;;;2371   
                          ENDP

                  mnemo_hndl PROC
;;;2372   //-----------------------------------------------
;;;2373   void mnemo_hndl(void)
0016a2  4afc              LDR      r2,|L1.6804|
;;;2374   {
;;;2375   if(((ind==iMn_220)||(ind==iMn))&&(sub_ind==0)&&(MNEMO_ON==mnON))
;;;2376   	{
;;;2377   	if(mnemo_cnt)mnemo_cnt--;
0016a4  49fc              LDR      r1,|L1.6808|
0016a6  7810              LDRB     r0,[r2,#0]            ;2375  ; a_ind
0016a8  2804              CMP      r0,#4                 ;2375
0016aa  d001              BEQ      |L1.5808|
0016ac  2801              CMP      r0,#1                 ;2375
0016ae  d105              BNE      |L1.5820|
                  |L1.5808|
0016b0  7850              LDRB     r0,[r2,#1]            ;2375  ; a_ind
0016b2  b918              CBNZ     r0,|L1.5820|
0016b4  48f9              LDR      r0,|L1.6812|
0016b6  7800              LDRB     r0,[r0,#0]            ;2375  ; MNEMO_ON
0016b8  2855              CMP      r0,#0x55              ;2375
0016ba  d003              BEQ      |L1.5828|
                  |L1.5820|
;;;2378   	}
;;;2379   else mnemo_cnt=MNEMO_TIME;
0016bc  48f8              LDR      r0,|L1.6816|
0016be  8800              LDRH     r0,[r0,#0]  ; MNEMO_TIME
0016c0  7008              STRB     r0,[r1,#0]
                  |L1.5826|
;;;2380   }
0016c2  4770              BX       lr
                  |L1.5828|
0016c4  7808              LDRB     r0,[r1,#0]            ;2377  ; mnemo_cnt
0016c6  2800              CMP      r0,#0                 ;2377
0016c8  d0fb              BEQ      |L1.5826|
0016ca  f1a00001          SUB      r0,r0,#1              ;2377
0016ce  7008              STRB     r0,[r1,#0]            ;2377
0016d0  4770              BX       lr
;;;2381   
                          ENDP

                  adc_init PROC
;;;2382   //-----------------------------------------------
;;;2383   void adc_init(void)
0016d2  48f4              LDR      r0,|L1.6820|
;;;2384   {
;;;2385   
;;;2386   SET_REG(LPC_PINCON->PINSEL1,1,(25-16)*2,2);
0016d4  6841              LDR      r1,[r0,#4]
0016d6  f4212140          BIC      r1,r1,#0xc0000
0016da  f4412180          ORR      r1,r1,#0x40000
0016de  6041              STR      r1,[r0,#4]
;;;2387   SET_REG(LPC_PINCON->PINSEL1,1,(24-16)*2,2);
0016e0  6841              LDR      r1,[r0,#4]
0016e2  f4213140          BIC      r1,r1,#0x30000
0016e6  f4413180          ORR      r1,r1,#0x10000
0016ea  6041              STR      r1,[r0,#4]
;;;2388   SET_REG(LPC_PINCON->PINSEL1,1,(23-16)*2,2);
0016ec  6841              LDR      r1,[r0,#4]
0016ee  f4214140          BIC      r1,r1,#0xc000
0016f2  f4414180          ORR      r1,r1,#0x4000
0016f6  6041              STR      r1,[r0,#4]
;;;2389   
;;;2390   
;;;2391   SET_REG(LPC_PINCON->PINMODE1,2,(25-16)*2,2);
0016f8  6c41              LDR      r1,[r0,#0x44]
0016fa  f4212140          BIC      r1,r1,#0xc0000
0016fe  f4412100          ORR      r1,r1,#0x80000
001702  6441              STR      r1,[r0,#0x44]
;;;2392   SET_REG(LPC_PINCON->PINMODE1,2,(24-16)*2,2);
001704  6c41              LDR      r1,[r0,#0x44]
001706  f4213140          BIC      r1,r1,#0x30000
00170a  f4413100          ORR      r1,r1,#0x20000
00170e  6441              STR      r1,[r0,#0x44]
;;;2393   SET_REG(LPC_PINCON->PINMODE1,2,(23-16)*2,2);
001710  6c41              LDR      r1,[r0,#0x44]
001712  f4214140          BIC      r1,r1,#0xc000
001716  f4414100          ORR      r1,r1,#0x8000
00171a  6441              STR      r1,[r0,#0x44]
;;;2394   
;;;2395   SET_REG(LPC_ADC->ADCR,0,24,3);
00171c  48e2              LDR      r0,|L1.6824|
00171e  6801              LDR      r1,[r0,#0]
001720  f02161e0          BIC      r1,r1,#0x7000000
001724  6001              STR      r1,[r0,#0]
;;;2396   
;;;2397   SET_REG(LPC_ADC->ADCR,1,21,1);
001726  6801              LDR      r1,[r0,#0]
001728  f4411100          ORR      r1,r1,#0x200000
00172c  6001              STR      r1,[r0,#0]
;;;2398   SET_REG(LPC_ADC->ADCR,0,16,1);
00172e  6801              LDR      r1,[r0,#0]
001730  f4213180          BIC      r1,r1,#0x10000
001734  6001              STR      r1,[r0,#0]
;;;2399   SET_REG(LPC_ADC->ADCR,1,8,8);
001736  6801              LDR      r1,[r0,#0]
001738  f421417f          BIC      r1,r1,#0xff00
00173c  f4417180          ORR      r1,r1,#0x100
001740  6001              STR      r1,[r0,#0]
;;;2400   
;;;2401   //SET_REG(LPC_GPIO0->FIODIR,7,5,3);
;;;2402   //SET_REG(LPC_GPIO0->FIOPIN,4,5,3);
;;;2403   	
;;;2404   	/*if(adc_ch<=7)*///SET_REG(LPC_ADC->ADCR,1<<5,0,8);
;;;2405        /*else if(adc_ch==8) SET_REG(LPC_ADC->ADCR,1<<2,0,8);
;;;2406        else SET_REG(LPC_ADC->ADCR,1<<4,0,8);*/
;;;2407   
;;;2408   LPC_ADC->ADINTEN     =  (1<< 8);      /* global enable interrupt            */
001742  f44f7180          MOV      r1,#0x100
001746  60c1              STR      r1,[r0,#0xc]
001748  48d8              LDR      r0,|L1.6828|
00174a  f44f0180          MOV      r1,#0x400000
00174e  6001              STR      r1,[r0,#0]
;;;2409   
;;;2410   NVIC_EnableIRQ(ADC_IRQn);             /* enable ADC Interrupt               */
;;;2411   
;;;2412   
;;;2413   }
001750  4770              BX       lr
;;;2414   
                          ENDP

                  adc_drv7 PROC
;;;2415   //-----------------------------------------------
;;;2416   void adc_drv7(void) //(Uñåòè - ïîñòîÿíêà)
001752  e92d41f0          PUSH     {r4-r8,lr}
;;;2417   {
;;;2418   //int temp_S;
;;;2419   //char i;
;;;2420   //signed short temp_SS;
;;;2421   
;;;2422   adc_self_ch_disp[0]=abs_pal(adc_self_ch_buff[1]-adc_self_ch_buff[0]);//adc_self_ch_buff[0]&0x0f80;
001756  4cd6              LDR      r4,|L1.6832|
001758  8860              LDRH     r0,[r4,#2]  ; adc_self_ch_buff
00175a  8821              LDRH     r1,[r4,#0]  ; adc_self_ch_buff
00175c  1a40              SUBS     r0,r0,r1
00175e  b200              SXTH     r0,r0
001760  f7fffffe          BL       abs_pal
001764  1da6              ADDS     r6,r4,#6
001766  8030              STRH     r0,[r6,#0]
;;;2423   adc_self_ch_disp[1]=abs_pal(adc_self_ch_buff[2]-adc_self_ch_buff[1]);//adc_self_ch_buff[1]&0x0f80;
001768  88a0              LDRH     r0,[r4,#4]  ; adc_self_ch_buff
00176a  8861              LDRH     r1,[r4,#2]  ; adc_self_ch_buff
00176c  1a40              SUBS     r0,r0,r1
00176e  b200              SXTH     r0,r0
001770  f7fffffe          BL       abs_pal
001774  8070              STRH     r0,[r6,#2]
;;;2424   adc_self_ch_disp[2]=abs_pal(adc_self_ch_buff[2]-adc_self_ch_buff[0]);//adc_self_ch_buff[2]&0x0f80;
001776  88a0              LDRH     r0,[r4,#4]  ; adc_self_ch_buff
001778  8821              LDRH     r1,[r4,#0]  ; adc_self_ch_buff
00177a  1a40              SUBS     r0,r0,r1
00177c  b200              SXTH     r0,r0
00177e  f7fffffe          BL       abs_pal
001782  80b0              STRH     r0,[r6,#4]
;;;2425   
;;;2426   //adc_self_ch_disp[0]=adc_self_ch_buff[0]&0x0ff0;
;;;2427   //adc_self_ch_disp[1]=adc_self_ch_buff[1]&0x0ff0;
;;;2428   //adc_self_ch_disp[2]=adc_self_ch_buff[2]&0x0ff0;
;;;2429   
;;;2430   
;;;2431   if(adc_self_ch_disp[2]<300)//==adc_self_ch_disp[2])
001784  f44f7196          MOV      r1,#0x12c
;;;2432   	{
;;;2433   	adc_result=adc_self_ch_buff[2];
001788  f1a4059a          SUB      r5,r4,#0x9a
00178c  4288              CMP      r0,r1                 ;2431
00178e  da02              BGE      |L1.6038|
001790  88a0              LDRH     r0,[r4,#4]  ; adc_self_ch_buff
001792  8568              STRH     r0,[r5,#0x2a]
001794  e00c              B        |L1.6064|
                  |L1.6038|
;;;2434   	} 
;;;2435   else if(adc_self_ch_disp[1]<300)//==adc_self_ch_disp[2])
001796  f9b60002          LDRSH    r0,[r6,#2]  ; adc_self_ch_disp
00179a  4288              CMP      r0,r1
00179c  da02              BGE      |L1.6052|
;;;2436   	{
;;;2437   	adc_result=adc_self_ch_buff[1];
00179e  8860              LDRH     r0,[r4,#2]  ; adc_self_ch_buff
0017a0  8568              STRH     r0,[r5,#0x2a]
0017a2  e005              B        |L1.6064|
                  |L1.6052|
;;;2438   	}
;;;2439   else if(adc_self_ch_disp[0]<300)//==adc_self_ch_disp[1])
0017a4  f9b60000          LDRSH    r0,[r6,#0]  ; adc_self_ch_disp
0017a8  4288              CMP      r0,r1
0017aa  da01              BGE      |L1.6064|
;;;2440   	{
;;;2441   	adc_result=adc_self_ch_buff[0];
0017ac  8820              LDRH     r0,[r4,#0]  ; adc_self_ch_buff
0017ae  8568              STRH     r0,[r5,#0x2a]
                  |L1.6064|
;;;2442   	}
;;;2443       //adc_result=92;
;;;2444   
;;;2445   if(adc_ch_net)
0017b0  78ef              LDRB     r7,[r5,#3]  ; adc_ch_net
0017b2  2600              MOVS     r6,#0
0017b4  b32f              CBZ      r7,|L1.6146|
;;;2446   	{
;;;2447   
;;;2448   	main_power_buffer[0]+=(long)(adc_result);
0017b6  48bf              LDR      r0,|L1.6836|
0017b8  f9b5102a          LDRSH    r1,[r5,#0x2a]  ; adc_result
0017bc  6802              LDR      r2,[r0,#0]  ; main_power_buffer
0017be  440a              ADD      r2,r2,r1
0017c0  6002              STR      r2,[r0,#0]  ; main_power_buffer
;;;2449   	main_power_buffer[1]+=(long)(adc_result);
0017c2  6842              LDR      r2,[r0,#4]  ; main_power_buffer
0017c4  440a              ADD      r2,r2,r1
0017c6  6042              STR      r2,[r0,#4]  ; main_power_buffer
;;;2450   	main_power_buffer[2]+=(long)(adc_result);
0017c8  6882              LDR      r2,[r0,#8]  ; main_power_buffer
0017ca  440a              ADD      r2,r2,r1
0017cc  6082              STR      r2,[r0,#8]  ; main_power_buffer
;;;2451   	main_power_buffer[3]+=(long)(adc_result);
0017ce  68c2              LDR      r2,[r0,#0xc]  ; main_power_buffer
0017d0  4411              ADD      r1,r1,r2
0017d2  60c1              STR      r1,[r0,#0xc]  ; main_power_buffer
;;;2452   
;;;2453   	adc_net_buff_cnt++;
0017d4  8e69              LDRH     r1,[r5,#0x32]  ; adc_net_buff_cnt
0017d6  f1010101          ADD      r1,r1,#1
0017da  b209              SXTH     r1,r1
0017dc  8669              STRH     r1,[r5,#0x32]
;;;2454   	if(adc_net_buff_cnt>=0x1000)
0017de  f5b15f80          CMP      r1,#0x1000
0017e2  db00              BLT      |L1.6118|
;;;2455   		{
;;;2456   		adc_net_buff_cnt=0;
0017e4  866e              STRH     r6,[r5,#0x32]
                  |L1.6118|
;;;2457   		}
;;;2458   	if((adc_net_buff_cnt&0x03ff)==0)
0017e6  f9b51032          LDRSH    r1,[r5,#0x32]  ; adc_net_buff_cnt
0017ea  058a              LSLS     r2,r1,#22
0017ec  d131              BNE      |L1.6226|
;;;2459   		{
;;;2460   		#ifdef UKU_220
;;;2461   		net_buff_=(short)((main_power_buffer[adc_net_buff_cnt>>10])>>11);
;;;2462   		#else
;;;2463   		#ifdef UKU_220_V2
;;;2464   		net_buff_=(short)((main_power_buffer[adc_net_buff_cnt>>10])>>11);
;;;2465   		#else
;;;2466   		net_buff_=(short)((main_power_buffer[adc_net_buff_cnt>>10])>>8);
0017ee  ea4f21a1          ASR      r1,r1,#10
0017f2  f8502021          LDR      r2,[r0,r1,LSL #2]
0017f6  ea4f2222          ASR      r2,r2,#8
0017fa  852a              STRH     r2,[r5,#0x28]
;;;2467   		#endif
;;;2468   		#endif
;;;2469   		main_power_buffer[adc_net_buff_cnt>>10]=0;
0017fc  f8406021          STR      r6,[r0,r1,LSL #2]
001800  e027              B        |L1.6226|
                  |L1.6146|
;;;2470   		}
;;;2471   
;;;2472   
;;;2473   	} 
;;;2474   else if(!adc_ch_net)
;;;2475   	{
;;;2476   	adc_buff[adc_ch][adc_ch_cnt]=(long)adc_result;
001802  48ad              LDR      r0,|L1.6840|
001804  792c              LDRB     r4,[r5,#4]  ; adc_ch
001806  796a              LDRB     r2,[r5,#5]  ; adc_ch_cnt
001808  eb001384          ADD      r3,r0,r4,LSL #6
00180c  f9b5102a          LDRSH    r1,[r5,#0x2a]  ; adc_result
001810  f8431022          STR      r1,[r3,r2,LSL #2]
;;;2477   	
;;;2478   	if((adc_ch_cnt&0x03)==0)
001814  0790              LSLS     r0,r2,#30
001816  d10f              BNE      |L1.6200|
;;;2479   		{
;;;2480   		long temp_L;
;;;2481   		char i;
;;;2482   		temp_L=0;
001818  4601              MOV      r1,r0
                  |L1.6170|
;;;2483   		for(i=0;i<16;i++)
;;;2484   			{
;;;2485   			temp_L+=adc_buff[adc_ch][i];
00181a  f853c020          LDR      r12,[r3,r0,LSL #2]
00181e  4461              ADD      r1,r1,r12
001820  f1000001          ADD      r0,r0,#1              ;2483
001824  b2c0              UXTB     r0,r0                 ;2483
001826  2810              CMP      r0,#0x10              ;2483
001828  d3f7              BCC      |L1.6170|
;;;2486   			}
;;;2487   		adc_buff_[adc_ch]= (short)(temp_L>>4);
00182a  ea4f1021          ASR      r0,r1,#4
00182e  49a1              LDR      r1,|L1.6836|
001830  f1a10120          SUB      r1,r1,#0x20
001834  f8210014          STRH     r0,[r1,r4,LSL #1]
                  |L1.6200|
;;;2488   
;;;2489   		//adc_buff_[3]=346;
;;;2490   		}
;;;2491   	if(++adc_ch>=16) 
001838  1c64              ADDS     r4,r4,#1
00183a  b2e0              UXTB     r0,r4
00183c  7128              STRB     r0,[r5,#4]
00183e  2810              CMP      r0,#0x10
001840  d307              BCC      |L1.6226|
;;;2492   		{
;;;2493   		adc_ch=0;
001842  712e              STRB     r6,[r5,#4]
;;;2494   		adc_ch_cnt++;
001844  f1020201          ADD      r2,r2,#1
001848  b2d0              UXTB     r0,r2
00184a  7168              STRB     r0,[r5,#5]
;;;2495   		if(adc_ch_cnt>=16)adc_ch_cnt=0;
00184c  2810              CMP      r0,#0x10
00184e  d300              BCC      |L1.6226|
001850  716e              STRB     r6,[r5,#5]
                  |L1.6226|
;;;2496   		}
;;;2497   	}
;;;2498   
;;;2499   //adc_buff[adc_ch][adc_cnt1]=(adc_self_ch_buff[2]+adc_self_ch_buff[1])/2;
;;;2500   
;;;2501   //if(adc_buff[adc_ch][adc_cnt1]<adc_buff_min[adc_ch])adc_buff_min[adc_ch]=adc_buff[adc_ch][adc_cnt1];
;;;2502   //if(adc_buff[adc_ch][adc_cnt1]>adc_buff_max[adc_ch])adc_buff_max[adc_ch]=adc_buff[adc_ch][adc_cnt1];
;;;2503   /*
;;;2504   	{
;;;2505   	if((adc_cnt1&0x03)==0)
;;;2506   		{
;;;2507   		temp_S=0;
;;;2508   		for(i=0;i<16;i++)
;;;2509   			{
;;;2510   			temp_S+=adc_buff[adc_ch][i];
;;;2511   			} 
;;;2512            	adc_buff_[adc_ch]=temp_S>>4;
;;;2513             }
;;;2514   	}*/
;;;2515   
;;;2516   
;;;2517   		  
;;;2518   
;;;2519   adc_self_ch_cnt=0;
001852  70ae              STRB     r6,[r5,#2]
;;;2520   
;;;2521   adc_ch_net++;
001854  f1070701          ADD      r7,r7,#1
;;;2522   adc_ch_net&=1;
001858  f0070001          AND      r0,r7,#1
00185c  70e8              STRB     r0,[r5,#3]
;;;2523   
;;;2524   //SET_REG(LPC_GPIO0->FIODIR,7,5,3);
;;;2525   //SET_REG(LPC_GPIO0->FIOPIN,adc_ch,5,3);
;;;2526   
;;;2527   if(adc_ch_net)
;;;2528   	{
;;;2529   	//LPC_GPIO2->FIODIR|=(1<<7);
;;;2530   	//LPC_GPIO2->FIOPIN|=(1<<7);
;;;2531   	SET_REG(LPC_ADC->ADCR,1<<2,0,8);
00185e  4a92              LDR      r2,|L1.6824|
001860  b130              CBZ      r0,|L1.6256|
001862  6810              LDR      r0,[r2,#0]
001864  f02000ff          BIC      r0,r0,#0xff
001868  f1000004          ADD      r0,r0,#4
00186c  6010              STR      r0,[r2,#0]
00186e  e03d              B        |L1.6380|
                  |L1.6256|
;;;2532   	}
;;;2533   else
;;;2534   	{
;;;2535   	//LPC_GPIO2->FIODIR|=(1<<7);
;;;2536   	//LPC_GPIO2->FIOPIN&=~(1<<7);
;;;2537   	if(!(adc_ch&(1<<3)))SET_REG(LPC_ADC->ADCR,1<<0,0,8);
001870  7929              LDRB     r1,[r5,#4]  ; adc_ch
001872  0708              LSLS     r0,r1,#28
001874  d406              BMI      |L1.6276|
001876  6810              LDR      r0,[r2,#0]
001878  f02000ff          BIC      r0,r0,#0xff
00187c  f1000001          ADD      r0,r0,#1
001880  6010              STR      r0,[r2,#0]
001882  e005              B        |L1.6288|
                  |L1.6276|
;;;2538   	else 			SET_REG(LPC_ADC->ADCR,1<<1,0,8);
001884  6810              LDR      r0,[r2,#0]
001886  f02000ff          BIC      r0,r0,#0xff
00188a  f1000002          ADD      r0,r0,#2
00188e  6010              STR      r0,[r2,#0]
                  |L1.6288|
;;;2539   
;;;2540   
;;;2541   	SET_REG(LPC_GPIO0->FIODIR,1,28,1);
001890  488a              LDR      r0,|L1.6844|
001892  6803              LDR      r3,[r0,#0]
001894  f0435380          ORR      r3,r3,#0x10000000
001898  6003              STR      r3,[r0,#0]
;;;2542   	SET_REG(LPC_GPIO1->FIODIR,1,30,1);
00189a  6a03              LDR      r3,[r0,#0x20]
00189c  f0434380          ORR      r3,r3,#0x40000000
0018a0  6203              STR      r3,[r0,#0x20]
;;;2543   	SET_REG(LPC_GPIO3->FIODIR,1,26,1);
0018a2  6e03              LDR      r3,[r0,#0x60]
0018a4  f0436380          ORR      r3,r3,#0x4000000
0018a8  6603              STR      r3,[r0,#0x60]
;;;2544   
;;;2545   	if(!(adc_ch&(1<<0)))SET_REG(LPC_GPIO0->FIOPIN,0,28,1);
0018aa  07cb              LSLS     r3,r1,#31
0018ac  d00a              BEQ      |L1.6340|
;;;2546   	else 			SET_REG(LPC_GPIO0->FIOPIN,1,28,1);
0018ae  6943              LDR      r3,[r0,#0x14]
0018b0  f0435380          ORR      r3,r3,#0x10000000
0018b4  6143              STR      r3,[r0,#0x14]
                  |L1.6326|
;;;2547   
;;;2548   	if(!(adc_ch&(1<<1)))SET_REG(LPC_GPIO1->FIOPIN,0,30,1);
0018b6  078b              LSLS     r3,r1,#30
0018b8  d409              BMI      |L1.6350|
0018ba  6b43              LDR      r3,[r0,#0x34]
0018bc  f0234380          BIC      r3,r3,#0x40000000
0018c0  6343              STR      r3,[r0,#0x34]
0018c2  e008              B        |L1.6358|
                  |L1.6340|
0018c4  6943              LDR      r3,[r0,#0x14]         ;2545
0018c6  f0235380          BIC      r3,r3,#0x10000000     ;2545
0018ca  6143              STR      r3,[r0,#0x14]         ;2545
0018cc  e7f3              B        |L1.6326|
                  |L1.6350|
;;;2549   	else 			SET_REG(LPC_GPIO1->FIOPIN,1,30,1);
0018ce  6b43              LDR      r3,[r0,#0x34]
0018d0  f0434380          ORR      r3,r3,#0x40000000
0018d4  6343              STR      r3,[r0,#0x34]
                  |L1.6358|
;;;2550   
;;;2551   	if(!(adc_ch&(1<<2)))SET_REG(LPC_GPIO3->FIOPIN,0,26,1);
0018d6  0749              LSLS     r1,r1,#29
0018d8  d404              BMI      |L1.6372|
0018da  6f41              LDR      r1,[r0,#0x74]
0018dc  f0216180          BIC      r1,r1,#0x4000000
0018e0  6741              STR      r1,[r0,#0x74]
0018e2  e003              B        |L1.6380|
                  |L1.6372|
;;;2552   	else 			SET_REG(LPC_GPIO3->FIOPIN,1,26,1);
0018e4  6f41              LDR      r1,[r0,#0x74]
0018e6  f0416180          ORR      r1,r1,#0x4000000
0018ea  6741              STR      r1,[r0,#0x74]
                  |L1.6380|
;;;2553   	}
;;;2554   	
;;;2555   
;;;2556   
;;;2557   
;;;2558   LPC_ADC->ADCR |=  (1<<24);
0018ec  6810              LDR      r0,[r2,#0]
0018ee  f0407080          ORR      r0,r0,#0x1000000
0018f2  6010              STR      r0,[r2,#0]
;;;2559   
;;;2560   }
0018f4  e8bd81f0          POP      {r4-r8,pc}
;;;2561   
                          ENDP

                  avg_hndl PROC
;;;2818   //-----------------------------------------------
;;;2819   void avg_hndl(void)
0018f8  b5f0              PUSH     {r4-r7,lr}
;;;2820   { 
;;;2821   char i;
;;;2822   
;;;2823   //#define AVGCNTMAX	5
;;;2824   if(avg_main_cnt)
0018fa  4c6d              LDR      r4,|L1.6832|
0018fc  3c9a              SUBS     r4,r4,#0x9a
0018fe  f9b40024          LDRSH    r0,[r4,#0x24]  ; avg_main_cnt
001902  b118              CBZ      r0,|L1.6412|
;;;2825   	{
;;;2826   	avg_main_cnt--;
001904  f1a00001          SUB      r0,r0,#1
001908  84a0              STRH     r0,[r4,#0x24]
;;;2827   	goto avg_hndl_end;
00190a  e090              B        |L1.6702|
                  |L1.6412|
;;;2828   	}                 
;;;2829   
;;;2830   avg_num=0;
00190c  f04f0500          MOV      r5,#0
001910  7325              STRB     r5,[r4,#0xc]
;;;2831   
;;;2832   for(i=0;i<NUMIST;i++)
001912  4628              MOV      r0,r5
001914  496b              LDR      r1,|L1.6852|
;;;2833   	{
;;;2834   	if((bps[i]._state==bsWRK)&&(bps[i]._cnt<20))avg_num++;
001916  4b6a              LDR      r3,|L1.6848|
001918  f9b12000          LDRSH    r2,[r1,#0]            ;2832
00191c  e012              B        |L1.6468|
                  |L1.6430|
00191e  ebc001c0          RSB      r1,r0,r0,LSL #3
001922  eb011100          ADD      r1,r1,r0,LSL #4
001926  eb030181          ADD      r1,r3,r1,LSL #2
00192a  788e              LDRB     r6,[r1,#2]
00192c  2e01              CMP      r6,#1
00192e  d106              BNE      |L1.6462|
001930  78c9              LDRB     r1,[r1,#3]
001932  2914              CMP      r1,#0x14
001934  d203              BCS      |L1.6462|
001936  7b21              LDRB     r1,[r4,#0xc]  ; avg_num
001938  f1010101          ADD      r1,r1,#1
00193c  7321              STRB     r1,[r4,#0xc]
                  |L1.6462|
00193e  f1000001          ADD      r0,r0,#1              ;2832
001942  b2c0              UXTB     r0,r0                 ;2832
                  |L1.6468|
001944  4290              CMP      r0,r2                 ;2832
001946  dbea              BLT      |L1.6430|
;;;2835   	}
;;;2836   
;;;2837   /*if((K[NUMI]>=1)&&(bps_state[0]==ssWRK))	avg_num++;
;;;2838   if((K[NUMI]>=2)&&(bps_state[1]==ssWRK))	avg_num++;
;;;2839   if((K[NUMI]>=3)&&(bps_state[2]==ssWRK))	avg_num++;*/
;;;2840   
;;;2841   	
;;;2842   if(avg_num<2)
001948  7b26              LDRB     r6,[r4,#0xc]  ; avg_num
00194a  2e02              CMP      r6,#2
00194c  d36f              BCC      |L1.6702|
;;;2843   	{
;;;2844   	goto avg_hndl_end;
;;;2845   	}
;;;2846   	
;;;2847   else
;;;2848   	{
;;;2849   	i_avg_min=5000;
00194e  f2413088          MOV      r0,#0x1388
001952  67a0              STR      r0,[r4,#0x78]  ; i_avg_min
;;;2850   	i_avg_max=0;
001954  6765              STR      r5,[r4,#0x74]  ; i_avg_max
;;;2851   	i_avg_summ=0;
001956  67e5              STR      r5,[r4,#0x7c]  ; i_avg_summ
;;;2852   	for(i=0;i<NUMIST;i++)
001958  f04f0100          MOV      r1,#0
00195c  e017              B        |L1.6542|
                  |L1.6494|
;;;2853   		{
;;;2854   		if(bps[i]._state==bsWRK)
00195e  ebc100c1          RSB      r0,r1,r1,LSL #3
001962  eb001001          ADD      r0,r0,r1,LSL #4
001966  eb030080          ADD      r0,r3,r0,LSL #2
00196a  7887              LDRB     r7,[r0,#2]
00196c  2f01              CMP      r7,#1
00196e  d10b              BNE      |L1.6536|
;;;2855   			{
;;;2856   			if(bps[i]._Ii>i_avg_max)i_avg_max=bps[i]._Ii;
001970  6a40              LDR      r0,[r0,#0x24]
001972  6f67              LDR      r7,[r4,#0x74]  ; i_avg_max
001974  42b8              CMP      r0,r7
001976  dd00              BLE      |L1.6522|
001978  6760              STR      r0,[r4,#0x74]  ; i_avg_max
                  |L1.6522|
;;;2857   			if(bps[i]._Ii<i_avg_min)i_avg_min=bps[i]._Ii;
00197a  6fa7              LDR      r7,[r4,#0x78]  ; i_avg_min
00197c  42b8              CMP      r0,r7
00197e  da00              BGE      |L1.6530|
001980  67a0              STR      r0,[r4,#0x78]  ; i_avg_min
                  |L1.6530|
;;;2858   			
;;;2859   			i_avg_summ+=bps[i]._Ii;
001982  6fe7              LDR      r7,[r4,#0x7c]  ; i_avg_summ
001984  4438              ADD      r0,r0,r7
001986  67e0              STR      r0,[r4,#0x7c]  ; i_avg_summ
                  |L1.6536|
001988  f1010101          ADD      r1,r1,#1              ;2852
00198c  b2c9              UXTB     r1,r1                 ;2852
                  |L1.6542|
00198e  4291              CMP      r1,r2                 ;2852
001990  dbe5              BLT      |L1.6494|
;;;2860   			}
;;;2861   		}
;;;2862   	i_avg=i_avg_summ/avg_num;	
001992  6fe0              LDR      r0,[r4,#0x7c]  ; i_avg_summ
001994  4f46              LDR      r7,|L1.6832|
001996  fb90f6f6          SDIV     r6,r0,r6
00199a  3f1a              SUBS     r7,r7,#0x1a
00199c  603e              STR      r6,[r7,#0]  ; i_avg
;;;2863   	
;;;2864   	if(i_avg_min==0)i_avg_min=1;
00199e  6fa0              LDR      r0,[r4,#0x78]  ; i_avg_min
0019a0  2101              MOVS     r1,#1                 ;2834
0019a2  b900              CBNZ     r0,|L1.6566|
0019a4  67a1              STR      r1,[r4,#0x78]  ; i_avg_min
                  |L1.6566|
;;;2865   
;;;2866   	avg=i_avg_max;
0019a6  6f60              LDR      r0,[r4,#0x74]  ; i_avg_max
;;;2867   	avg*=100;
0019a8  f04f0c64          MOV      r12,#0x64
0019ac  fb00f00c          MUL      r0,r0,r12
;;;2868   	avg/=i_avg_min;
0019b0  f8d4c078          LDR      r12,[r4,#0x78]  ; i_avg_min
0019b4  fb90f0fc          SDIV     r0,r0,r12
0019b8  6078              STR      r0,[r7,#4]  ; avg
;;;2869   
;;;2870   	if(avg>160) bAVG=1;
0019ba  28a0              CMP      r0,#0xa0
0019bc  dd00              BLE      |L1.6592|
0019be  72e1              STRB     r1,[r4,#0xb]
                  |L1.6592|
;;;2871   	if(avg<120) bAVG=0;
0019c0  2878              CMP      r0,#0x78
0019c2  da00              BGE      |L1.6598|
0019c4  72e5              STRB     r5,[r4,#0xb]
                  |L1.6598|
;;;2872   
;;;2873   	if(bAVG==1)
0019c6  7ae0              LDRB     r0,[r4,#0xb]  ; bAVG
0019c8  2801              CMP      r0,#1
0019ca  d130              BNE      |L1.6702|
;;;2874   		{
;;;2875   		for(i=0;i<NUMIST;i++)
0019cc  f04f0100          MOV      r1,#0
;;;2876   			{
;;;2877   			if(bps[i]._state==bsWRK)
;;;2878   				{
;;;2879   				if(bps[i]._Ii>i_avg)bps[i]._x_--;
;;;2880   				if(bps[i]._Ii<i_avg)bps[i]._x_++;
;;;2881   			
;;;2882   				if(bps[i]._x_<-50)bps[i]._x_=-50;
0019d0  f06f0431          MVN      r4,#0x31
0019d4  e029              B        |L1.6698|
                  |L1.6614|
0019d6  ebc100c1          RSB      r0,r1,r1,LSL #3       ;2877
0019da  eb001001          ADD      r0,r0,r1,LSL #4       ;2877
0019de  eb030080          ADD      r0,r3,r0,LSL #2       ;2877
0019e2  7885              LDRB     r5,[r0,#2]            ;2877
0019e4  2d01              CMP      r5,#1                 ;2877
0019e6  d11d              BNE      |L1.6692|
0019e8  6a45              LDR      r5,[r0,#0x24]         ;2879
0019ea  42b5              CMP      r5,r6                 ;2879
0019ec  dd05              BLE      |L1.6650|
0019ee  f8b05050          LDRH     r5,[r0,#0x50]         ;2879
0019f2  f1a50501          SUB      r5,r5,#1              ;2879
0019f6  f8a05050          STRH     r5,[r0,#0x50]         ;2879
                  |L1.6650|
0019fa  da05              BGE      |L1.6664|
0019fc  f8b05050          LDRH     r5,[r0,#0x50]         ;2880
001a00  f1050501          ADD      r5,r5,#1              ;2880
001a04  f8a05050          STRH     r5,[r0,#0x50]         ;2880
                  |L1.6664|
001a08  f9b05050          LDRSH    r5,[r0,#0x50]
001a0c  42a5              CMP      r5,r4
001a0e  da01              BGE      |L1.6676|
001a10  f8a04050          STRH     r4,[r0,#0x50]
                  |L1.6676|
;;;2883   				if(bps[i]._x_>50)bps[i]._x_=50;	
001a14  f9b05050          LDRSH    r5,[r0,#0x50]
001a18  2d32              CMP      r5,#0x32
001a1a  dd03              BLE      |L1.6692|
001a1c  f04f0532          MOV      r5,#0x32
001a20  f8a05050          STRH     r5,[r0,#0x50]
                  |L1.6692|
001a24  f1010101          ADD      r1,r1,#1              ;2875
001a28  b2c9              UXTB     r1,r1                 ;2875
                  |L1.6698|
001a2a  4291              CMP      r1,r2                 ;2875
001a2c  dbd3              BLT      |L1.6614|
                  |L1.6702|
;;;2884   				}
;;;2885   			}		
;;;2886   		}			
;;;2887   	}   	 
;;;2888   
;;;2889   
;;;2890   avg_hndl_end:
;;;2891   __nop();  
001a2e  bf00              NOP      
;;;2892   }
001a30  bdf0              POP      {r4-r7,pc}
;;;2893   
                          ENDP

                  rele_hndl PROC
;;;2906   //*************-----------------------------------------------
;;;2907   void rele_hndl(void)
001a32  e92d5ff0          PUSH     {r4-r12,lr}
;;;2908   {
;;;2909   //static char cnt_rel_sam;
;;;2910   //char temp;
;;;2911   
;;;2912   //temp=0;
;;;2913   
;;;2914   
;;;2915   SET_REG(LPC_PINCON->PINSEL0,0,4*2,6*2);
001a36  481b              LDR      r0,|L1.6820|
001a38  6801              LDR      r1,[r0,#0]
001a3a  4a23              LDR      r2,|L1.6856|
001a3c  ea010102          AND      r1,r1,r2
001a40  6001              STR      r1,[r0,#0]
;;;2916   SET_REG(LPC_GPIO0->FIODIR,63,4,6);
001a42  4c1e              LDR      r4,|L1.6844|
001a44  6821              LDR      r1,[r4,#0]
001a46  f441717c          ORR      r1,r1,#0x3f0
001a4a  6021              STR      r1,[r4,#0]
;;;2917   SET_REG(LPC_PINCON->PINSEL7,0,(25-16)*2,2);
001a4c  69c1              LDR      r1,[r0,#0x1c]
001a4e  f4212140          BIC      r1,r1,#0xc0000
001a52  61c1              STR      r1,[r0,#0x1c]
;;;2918   SET_REG(LPC_GPIO3->FIODIR,1,25,1);
001a54  6e21              LDR      r1,[r4,#0x60]
001a56  f0417100          ORR      r1,r1,#0x2000000
001a5a  6621              STR      r1,[r4,#0x60]
;;;2919   SET_REG(LPC_PINCON->PINSEL1,0,(29-16)*2,2);
001a5c  6841              LDR      r1,[r0,#4]
001a5e  f0216140          BIC      r1,r1,#0xc000000
001a62  6041              STR      r1,[r0,#4]
;;;2920   SET_REG(LPC_GPIO0->FIODIR,1,29,1);
001a64  6820              LDR      r0,[r4,#0]
001a66  f0405000          ORR      r0,r0,#0x20000000
001a6a  6020              STR      r0,[r4,#0]
;;;2921   
;;;2922   
;;;2923   
;;;2924   
;;;2925   
;;;2926   
;;;2927   if((((bat[0]._rel_stat)  || (tbatdisable_stat!=tbdsON))&&(tbatdisable_cmnd))	&& (main_1Hz_cnt>5))
001a6c  4818              LDR      r0,|L1.6864|
001a6e  4d17              LDR      r5,|L1.6860|
001a70  4919              LDR      r1,|L1.6872|
001a72  7802              LDRB     r2,[r0,#0]  ; tbatdisable_stat
001a74  4817              LDR      r0,|L1.6868|
001a76  f895303c          LDRB     r3,[r5,#0x3c]  ; bat
001a7a  f9b11000          LDRSH    r1,[r1,#0]
001a7e  7800              LDRB     r0,[r0,#0]
001a80  4313              ORRS     r3,r3,r2
001a82  d02c              BEQ      |L1.6878|
001a84  b350              CBZ      r0,|L1.6876|
001a86  2905              CMP      r1,#5
001a88  dd29              BLE      |L1.6878|
;;;2928   	{
;;;2929   	SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_BAT1,1);
001a8a  69a3              LDR      r3,[r4,#0x18]
001a8c  f4437380          ORR      r3,r3,#0x100
001a90  61a3              STR      r3,[r4,#0x18]
001a92  e028              B        |L1.6886|
                  |L1.6804|
                          DCD      a_ind
                  |L1.6808|
                          DCD      mnemo_cnt
                  |L1.6812|
                          DCD      MNEMO_ON
                  |L1.6816|
                          DCD      MNEMO_TIME
                  |L1.6820|
                          DCD      0x4002c000
                  |L1.6824|
                          DCD      0x40034000
                  |L1.6828|
                          DCD      0xe000e100
                  |L1.6832|
                          DCD      ||area_number.23||+0x9a
                  |L1.6836|
                          DCD      ||.bss||+0x420
                  |L1.6840|
                          DCD      ||.bss||
                  |L1.6844|
                          DCD      0x2009c000
                  |L1.6848|
                          DCD      bps
                  |L1.6852|
                          DCD      NUMIST
                  |L1.6856|
                          DCD      0xfff000ff
                  |L1.6860|
                          DCD      bat
                  |L1.6864|
                          DCD      tbatdisable_stat
                  |L1.6868|
                          DCD      tbatdisable_cmnd
                  |L1.6872|
                          DCD      main_1Hz_cnt
                  |L1.6876|
001adc  e7ff              B        |L1.6878|
                  |L1.6878|
;;;2930   	}
;;;2931   else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_BAT1,1);	  	
001ade  69e3              LDR      r3,[r4,#0x1c]
001ae0  f4437380          ORR      r3,r3,#0x100
001ae4  61e3              STR      r3,[r4,#0x1c]
                  |L1.6886|
;;;2932   
;;;2933   if((((bat[1]._rel_stat) || (tbatdisable_stat!=tbdsON))&&(tbatdisable_cmnd))	&& (main_1Hz_cnt>5))
001ae6  f8953088          LDRB     r3,[r5,#0x88]  ; bat
001aea  4313              ORRS     r3,r3,r2
001aec  d007              BEQ      |L1.6910|
001aee  b130              CBZ      r0,|L1.6910|
001af0  2905              CMP      r1,#5
001af2  dd04              BLE      |L1.6910|
;;;2934   	{
;;;2935   	SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_BAT2,1);
001af4  69a0              LDR      r0,[r4,#0x18]
001af6  f0400040          ORR      r0,r0,#0x40
001afa  61a0              STR      r0,[r4,#0x18]
001afc  e003              B        |L1.6918|
                  |L1.6910|
;;;2936   	}
;;;2937   else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_BAT2,1);
001afe  69e0              LDR      r0,[r4,#0x1c]
001b00  f0400040          ORR      r0,r0,#0x40
001b04  61e0              STR      r0,[r4,#0x1c]
                  |L1.6918|
;;;2938   
;;;2939   
;;;2940   if(mess_find_unvol((MESS2RELE_HNDL))&&(mess_data[0]==PARAM_RELE_SAMOKALIBR)) 
001b06  20d2              MOVS     r0,#0xd2
001b08  f7fffffe          BL       mess_find_unvol
001b0c  4df7              LDR      r5,|L1.7916|
001b0e  b110              CBZ      r0,|L1.6934|
001b10  6828              LDR      r0,[r5,#0]  ; mess_data
001b12  2864              CMP      r0,#0x64
001b14  d048              BEQ      |L1.7080|
                  |L1.6934|
;;;2941   	{
;;;2942   	if(mess_data[1]==1)SET_REG(LPC_GPIO0->FIOSET,1,29,1);
;;;2943   	else if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,29,1);
;;;2944   	}
;;;2945   else SET_REG(LPC_GPIO0->FIOCLR,1,29,1);
001b16  69e0              LDR      r0,[r4,#0x1c]
001b18  f0405000          ORR      r0,r0,#0x20000000
001b1c  61e0              STR      r0,[r4,#0x1c]
                  |L1.6942|
;;;2946   
;;;2947   
;;;2948   #ifndef UKU2071x
;;;2949   //Ðåëå àâàðèè ñåòè
;;;2950   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_NET))
;;;2951   	{
;;;2952   	if(mess_data[1]==0) 			SET_REG(LPC_GPIO3->FIOSET,1,SHIFT_REL_AV_NET,1);
;;;2953   	else 						SET_REG(LPC_GPIO3->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;2954   	}
;;;2955   else	if(!(avar_ind_stat&0x00000001)) 	SET_REG(LPC_GPIO3->FIOSET,1,SHIFT_REL_AV_NET,1);
;;;2956   else 							SET_REG(LPC_GPIO3->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;2957   #endif
;;;2958   #ifdef UKU2071x
;;;2959   //Ðåëå àâàðèè ñåòè
;;;2960   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_NET))
001b1e  20d2              MOVS     r0,#0xd2
001b20  f7fffffe          BL       mess_find_unvol
;;;2961   	{
;;;2962   	if(mess_data[1]==0)				SET_REG(LPC_GPIO3->FIOCLR,1,SHIFT_REL_AV_NET,1); 
;;;2963   	else 						SET_REG(LPC_GPIO3->FIOSET,1,SHIFT_REL_AV_NET,1);
;;;2964   	}
;;;2965   else	if(!(avar_ind_stat&0x00000001))	SET_REG(LPC_GPIO3->FIOCLR,1,SHIFT_REL_AV_NET,1);
001b24  4ef2              LDR      r6,|L1.7920|
001b26  b110              CBZ      r0,|L1.6958|
001b28  6828              LDR      r0,[r5,#0]            ;2960  ; mess_data
001b2a  2866              CMP      r0,#0x66              ;2960
001b2c  d04b              BEQ      |L1.7110|
                  |L1.6958|
001b2e  6830              LDR      r0,[r6,#0]  ; avar_ind_stat
001b30  07c0              LSLS     r0,r0,#31
001b32  d054              BEQ      |L1.7134|
;;;2966   else 					  		SET_REG(LPC_GPIO3->FIOSET,1,SHIFT_REL_AV_NET,1);
001b34  6fa0              LDR      r0,[r4,#0x78]
001b36  f0407000          ORR      r0,r0,#0x2000000
001b3a  67a0              STR      r0,[r4,#0x78]
                  |L1.6972|
;;;2967   #endif
;;;2968   
;;;2969   #ifdef UKU_3U
;;;2970   //Ðåëå àâàðèé áàòàðåé
;;;2971   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BAT1))
;;;2972   	{
;;;2973   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT1,1);
;;;2974   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT1,1);
;;;2975        }
;;;2976   else 
;;;2977   	{
;;;2978   	if(!(avar_ind_stat&0x00000002)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT1,1);
;;;2979        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT1,1);
;;;2980   	} 
;;;2981   
;;;2982   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BAT2))
;;;2983   	{
;;;2984   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT2,1);
;;;2985   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT2,1);
;;;2986        }
;;;2987   else 
;;;2988   	{
;;;2989   	if(!(avar_ind_stat&0x00000004)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT2,1);
;;;2990        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT2,1);
;;;2991   	} 
;;;2992   
;;;2993   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BPS))
;;;2994   	{
;;;2995   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
;;;2996   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
;;;2997        }
;;;2998   else 
;;;2999   	{
;;;3000   	if(!(avar_ind_stat&0x000007f8)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
;;;3001        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
;;;3002   	} 
;;;3003   
;;;3004   #endif
;;;3005   
;;;3006   
;;;3007   #ifdef UKU_GLONASS
;;;3008   //Ðåëå àâàðèé áàòàðåé
;;;3009   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BAT1))
;;;3010   	{
;;;3011   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT1,1);
;;;3012   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT1,1);
;;;3013        }
;;;3014   else 
;;;3015   	{
;;;3016   	if(!(avar_ind_stat&0x00000002)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT1,1);
;;;3017        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT1,1);
;;;3018   	} 
;;;3019   
;;;3020   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BAT2))
;;;3021   	{
;;;3022   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT2,1);
;;;3023   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT2,1);
;;;3024        }
;;;3025   else 
;;;3026   	{
;;;3027   	if(!(avar_ind_stat&0x00000004)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT2,1);
;;;3028        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT2,1);
;;;3029   	} 
;;;3030   
;;;3031   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BPS))
;;;3032   	{
;;;3033   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
;;;3034   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
;;;3035        }
;;;3036   else 
;;;3037   	{
;;;3038   	if(!(avar_ind_stat&0x000007f8)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
;;;3039        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
;;;3040   	} 
;;;3041   
;;;3042   #endif
;;;3043   
;;;3044   #ifdef U 
;;;3045   
;;;3046   #endif
;;;3047   
;;;3048   #ifdef UKU_RSTKM
;;;3049   
;;;3050   //Ðåëå îáùåé àâàðèè
;;;3051   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_COMM))
;;;3052   	{
;;;3053   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_COMM,1);
;;;3054   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_COMM,1);
;;;3055   	}
;;;3056   else 
;;;3057   	{
;;;3058        if(  (!(avar_ind_stat&0x00007fff))/* &&
;;;3059             ((!SK_REL_EN[0]) || (sk_av_stat[0]!=sasON))  &&
;;;3060             ((!SK_REL_EN[1]) || (sk_av_stat[1]!=sasON))  &&
;;;3061             ((!SK_REL_EN[2]) || (sk_av_stat[2]!=sasON))  &&
;;;3062             ((!SK_REL_EN[3]) || (sk_av_stat[3]!=sasON))*/  )SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_COMM,1);
;;;3063        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_COMM,1);
;;;3064   	}
;;;3065   	
;;;3066   
;;;3067   //Ðåëå îñâåùåíèÿ
;;;3068   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_LIGHT))
;;;3069   	{
;;;3070   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LIGHT,1);
;;;3071   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LIGHT,1);
;;;3072        }
;;;3073   else 
;;;3074   	{
;;;3075   	if(sk_av_stat[0]!=sasON) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LIGHT,1);
;;;3076        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LIGHT,1);
;;;3077   	}
;;;3078   
;;;3079   
;;;3080   //Ðåëå âûêëþ÷åíèÿ íàãðóçêè
;;;3081   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_LOAD_OFF))
;;;3082   	{
;;;3083   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LOAD_OFF,1);
;;;3084   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LOAD_OFF,1);
;;;3085        }
;;;3086   else if(tloaddisable_cmnd==0)
;;;3087   	{
;;;3088   	SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LOAD_OFF,1);
;;;3089   	}
;;;3090   else if((tloaddisable_cmnd)&&(tloaddisable_cmnd<=11))
;;;3091   	{
;;;3092   	SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LOAD_OFF,1);
;;;3093   	}
;;;3094   
;;;3095   else 
;;;3096   	{
;;;3097   	if(!(tloaddisable_stat==tldsON)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LOAD_OFF,1);
;;;3098        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LOAD_OFF,1);
;;;3099   	} 
;;;3100   
;;;3101   //Ðåëå îñåâîãî âåíòèëÿòîðà
;;;3102   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_VENT))
;;;3103   	{
;;;3104   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;3105   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT,1);
;;;3106   	}
;;;3107   else 
;;;3108   	{
;;;3109   	if(mixer_vent_stat==mvsOFF) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;3110        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT,1);
;;;3111   	} 
;;;3112   
;;;3113   #endif
;;;3114   
;;;3115   #ifdef UKU_KONTUR
;;;3116   
;;;3117   //Ðåëå îáùåé àâàðèè
;;;3118   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_COMM))
;;;3119   	{
;;;3120   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_COMM,1);
;;;3121   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_COMM,1);
;;;3122   	}
;;;3123   else 
;;;3124   	{
;;;3125        if(  (!(avar_ind_stat&0x00007fff)) &&
;;;3126             ((!SK_REL_EN[0]) || (sk_av_stat[0]!=sasON))  &&
;;;3127             ((!SK_REL_EN[1]) || (sk_av_stat[1]!=sasON))  &&
;;;3128             ((!SK_REL_EN[2]) || (sk_av_stat[2]!=sasON))  /*&&
;;;3129             ((!SK_REL_EN[3]) || (sk_av_stat[3]!=sasON))*/  )SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_COMM,1);
;;;3130        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_COMM,1);
;;;3131   	}
;;;3132   
;;;3133   	
;;;3134   //rel_warm_plazma=0;
;;;3135   //Ðåëå îñâåùåíèÿ   
;;;3136   /*
;;;3137   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_WARM))
;;;3138   	{
;;;3139   	if(mess_data[1]==0)
;;;3140   		{
;;;3141   		SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_WARM,1);
;;;3142   		rel_warm_plazma=1;
;;;3143   		}
;;;3144   	else if(mess_data[1]==1) 
;;;3145   		{
;;;3146   		SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_WARM,1);
;;;3147   		rel_warm_plazma=2;
;;;3148   		}
;;;3149        }
;;;3150   else 
;;;3151   	{
;;;3152   	if(warm_stat_k==wsOFF) 
;;;3153   		{
;;;3154   		SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_WARM,1);
;;;3155   		rel_warm_plazma=3;
;;;3156   		}
;;;3157        else 
;;;3158   		{
;;;3159   		SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_WARM,1);
;;;3160   		rel_warm_plazma=4;
;;;3161   		}
;;;3162   	}
;;;3163   */
;;;3164   //Ðåëå îñâåùåíèÿ
;;;3165   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_LIGHT))
;;;3166   	{
;;;3167   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LIGHT,1);
;;;3168   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LIGHT,1);
;;;3169        }
;;;3170   else 
;;;3171   	{
;;;3172   	if(sk_av_stat[0]!=sasON) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LIGHT,1);
;;;3173        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LIGHT,1);
;;;3174   	}
;;;3175   
;;;3176   
;;;3177   
;;;3178   //Ðåëå âûêëþ÷åíèÿ íàãðóçêè
;;;3179   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_LOAD_OFF))
;;;3180   	{
;;;3181   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LOAD_OFF,1);
;;;3182   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LOAD_OFF,1);
;;;3183        }
;;;3184   else if(tloaddisable_cmnd==0)
;;;3185   	{
;;;3186   	SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LOAD_OFF,1);
;;;3187   	}
;;;3188   else if((tloaddisable_cmnd)&&(tloaddisable_cmnd<=11))
;;;3189   	{
;;;3190   	SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LOAD_OFF,1);
;;;3191   	}
;;;3192   
;;;3193   else 
;;;3194   	{
;;;3195   	if(!(tloaddisable_stat==tldsON)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LOAD_OFF,1);
;;;3196        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LOAD_OFF,1);
;;;3197   	} 
;;;3198   
;;;3199   //Ðåëå îñåâîãî âåíòèëÿòîðà èëè îòîïèòåëÿ
;;;3200   if(RELE_LOG)
;;;3201   	{
;;;3202   	if((mess_find_unvol(MESS2RELE_HNDL))&&(mess_data[0]==PARAM_RELE_VENT_WARM))
;;;3203   		{
;;;3204   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT_WARM,1);
;;;3205   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT_WARM,1);
;;;3206   		}
;;;3207   	else 
;;;3208   		{
;;;3209   		if(warm_stat_k==wsOFF) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT_WARM,1);
;;;3210   	     else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT_WARM,1);
;;;3211   		} 
;;;3212   
;;;3213   	}
;;;3214   else 
;;;3215   	{
;;;3216   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_VENT_WARM))
;;;3217   		{
;;;3218   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT_WARM,1);
;;;3219   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT_WARM,1);
;;;3220   		}
;;;3221   	else 
;;;3222   		{
;;;3223   		if(vent_stat_k==vsOFF) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT_WARM,1);
;;;3224   	     else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT_WARM,1);
;;;3225   		} 
;;;3226   	}
;;;3227   #endif
;;;3228   
;;;3229   #ifdef UKU_6U
;;;3230   //Ðåëå àâàðèé áàòàðåé
;;;3231   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BAT1))
;;;3232   	{
;;;3233   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT1,1);
;;;3234   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT1,1);
;;;3235        }
;;;3236   else 
;;;3237   	{
;;;3238   	if(!(avar_ind_stat&0x00000002)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT1,1);
;;;3239        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT1,1);
;;;3240   	} 
;;;3241   
;;;3242   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BAT2))
;;;3243   	{
;;;3244   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT2,1);
;;;3245   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT2,1);
;;;3246       }
;;;3247   else if(NPN_OUT==npnoRELEAVBAT2)
;;;3248   	{
;;;3249   	if(npn_stat==npnsOFF)//&&(mess_find_unvol(MESS2RELE_HNDL))&&(mess_data[0]==PARAM_RELE_NPN))
;;;3250   		{
;;;3251   		/*if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT2,1);
;;;3252   		else if(mess_data[1]==1)*/ SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT2,1);
;;;3253        	}
;;;3254   	else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT2,1);
;;;3255   	}
;;;3256   else 
;;;3257   	{
;;;3258   	if(!(avar_ind_stat&0x00000004)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT2,1);
;;;3259       else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT2,1);
;;;3260   	} 
;;;3261   
;;;3262   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BPS))
;;;3263   	{
;;;3264   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
;;;3265   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
;;;3266        }
;;;3267   else 
;;;3268   	{
;;;3269   	if(!(avar_ind_stat&0x000007f8)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
;;;3270        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
;;;3271   	} 
;;;3272   
;;;3273   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_VENT))
;;;3274   	{
;;;3275   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT,1);
;;;3276   	else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;3277   	}
;;;3278   else if((NPN_OUT==npnoRELEVENT))
;;;3279   	{
;;;3280   	if(npn_stat==npnsOFF)//&&(mess_find_unvol(MESS2RELE_HNDL))&&(mess_data[0]==PARAM_RELE_NPN))
;;;3281   		{
;;;3282   		/*if(mess_data[1]==0)*/ SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;3283   		//else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;3284       	}
;;;3285   	else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT,1);
;;;3286   	}
;;;3287   else 
;;;3288   	{
;;;3289   	if(!vent_stat) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT,1);
;;;3290   	else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;3291   	}
;;;3292   
;;;3293   #endif
;;;3294   
;;;3295   #ifdef UKU_220
;;;3296   //Ðåëå àâàðèé áàòàðåé
;;;3297   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BAT))
;;;3298   	{
;;;3299   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT,1);
;;;3300   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT,1);
;;;3301        }
;;;3302   else 
;;;3303   	{
;;;3304   	if(!(avar_ind_stat&0x00000002)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT,1);
;;;3305        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT,1);
;;;3306   	} 
;;;3307   
;;;3308   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BPS))
;;;3309   	{
;;;3310   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
;;;3311   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
;;;3312        }
;;;3313   else 
;;;3314   	{
;;;3315   	if(!(avar_ind_stat&0x000007f8)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
;;;3316        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
;;;3317   	} 
;;;3318   
;;;3319   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_VENT))
;;;3320   	{
;;;3321   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT,1);
;;;3322   	else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;3323   	}
;;;3324   else 
;;;3325   	{
;;;3326   	if((RELE_VENT_LOGIC==0)||(RELE_VENT_LOGIC==1))
;;;3327   		{
;;;3328   		if(vent_stat) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT,1);
;;;3329   		else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;3330   		}
;;;3331   	else 
;;;3332   		{
;;;3333   		if((avar_ind_stat&0x00000004)) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT,1);
;;;3334        	else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;3335   		}
;;;3336   	}
;;;3337   
;;;3338   #endif
;;;3339   
;;;3340   #ifdef UKU_220_V2
;;;3341   //Ðåëå àâàðèé áàòàðåé
;;;3342   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BAT))
;;;3343   	{
;;;3344   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT,1);
;;;3345   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT,1);
;;;3346        }
;;;3347   else 
;;;3348   	{
;;;3349   	if(!(avar_ind_stat&0x00000002)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT,1);
;;;3350        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT,1);
;;;3351   	} 
;;;3352   
;;;3353   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BPS))
;;;3354   	{
;;;3355   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
;;;3356   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
;;;3357        }
;;;3358   else 
;;;3359   	{
;;;3360   	if(!(avar_ind_stat&0x000007f8)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
;;;3361        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
;;;3362   	} 
;;;3363   
;;;3364   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_VENT))
;;;3365   	{
;;;3366   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT,1);
;;;3367   	else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;3368   	}
;;;3369   else 
;;;3370   	{
;;;3371   	if((RELE_VENT_LOGIC==0)||(RELE_VENT_LOGIC==1))
;;;3372   		{
;;;3373   		if(vent_stat) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT,1);
;;;3374   		else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;3375   		}
;;;3376   	else 
;;;3377   		{
;;;3378   		if((avar_ind_stat&0x00000004)) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT,1);
;;;3379        	else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;3380   		}
;;;3381   	}
;;;3382   
;;;3383   #endif
;;;3384   
;;;3385   #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;3386   
;;;3387   if((AUSW_MAIN==22010)||(AUSW_MAIN==22011))
001b3c  48ed              LDR      r0,|L1.7924|
;;;3388   	{
;;;3389   	#ifndef UKU2071x
;;;3390   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_NET))
;;;3391   		{
;;;3392   		if(mess_data[1]==0) SET_REG(LPC_GPIO3->FIOSET,1,25,1);
;;;3393   		else SET_REG(LPC_GPIO3->FIOCLR,1,25,1);
;;;3394   		}
;;;3395   	else	if(!(avar_ind_stat&0x00000001)) SET_REG(LPC_GPIO3->FIOSET,1,25,1);
;;;3396   	else SET_REG(LPC_GPIO3->FIOCLR,1,25,1);
;;;3397   	#endif
;;;3398   
;;;3399   	#ifdef UKU2071x
;;;3400   		#ifndef APSENERGIA
;;;3401   		if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_NET))
;;;3402   			{
;;;3403   			if(mess_data[1]==0) SET_REG(LPC_GPIO3->FIOCLR,1,25,1);
;;;3404   			else SET_REG(LPC_GPIO3->FIOSET,1,25,1);
;;;3405   			}
;;;3406   		else	if(!(avar_ind_stat&0x00000001)) SET_REG(LPC_GPIO3->FIOCLR,1,25,1);
;;;3407   		else SET_REG(LPC_GPIO3->FIOSET,1,25,1);
;;;3408   		#endif
;;;3409   
;;;3410   		#ifdef APSENERGIA
;;;3411   		if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_NET))
;;;3412   			{
;;;3413   			if(mess_data[1]==0) SET_REG(LPC_GPIO3->FIOCLR,1,25,1);
;;;3414   			else SET_REG(LPC_GPIO3->FIOSET,1,25,1);
;;;3415   			}
;;;3416   		else if((mess_find_unvol(MESS2RELE_HNDL))&& (mess_data[0]==PARAM_RELE_BAT_IS_DISCHARGED))  SET_REG(LPC_GPIO3->FIOCLR,1,25,1);
;;;3417   		else SET_REG(LPC_GPIO3->FIOSET,1,25,1);
;;;3418   		#endif
;;;3419   
;;;3420   	#endif
;;;3421   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BPS))
;;;3422   		{
;;;3423   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,7,1);
;;;3424   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,7,1);
;;;3425   	     }
;;;3426   	else 
;;;3427   		{
;;;3428   		if(!(avar_ind_stat&0x100007f8)) SET_REG(LPC_GPIO0->FIOCLR,1,7,1);
;;;3429   	     else SET_REG(LPC_GPIO0->FIOSET,1,7,1);
;;;3430   		} 
;;;3431   
;;;3432   	//Ðåëå àâàðèé áàòàðåé
;;;3433   	#ifndef APSENERGIA
;;;3434   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BAT))
;;;3435   		{
;;;3436   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,4,1);
;;;3437   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,4,1);
;;;3438        	}
;;;3439   	else 
;;;3440   		{
;;;3441   		if(!(ips_bat_av_stat)) SET_REG(LPC_GPIO0->FIOCLR,1,4,1);
001b3e  f8df83b8          LDR      r8,|L1.7928|
001b42  4fee              LDR      r7,|L1.7932|
001b44  8800              LDRH     r0,[r0,#0]            ;3387  ; AUSW_MAIN
001b46  f5a041aa          SUB      r1,r0,#0x5500         ;3387
001b4a  39fa              SUBS     r1,r1,#0xfa           ;3387
001b4c  d001              BEQ      |L1.6994|
001b4e  1e49              SUBS     r1,r1,#1              ;3387
001b50  d16f              BNE      |L1.7218|
                  |L1.6994|
001b52  20d2              MOVS     r0,#0xd2              ;3401
001b54  f7fffffe          BL       mess_find_unvol
001b58  b110              CBZ      r0,|L1.7008|
001b5a  6828              LDR      r0,[r5,#0]            ;3401  ; mess_data
001b5c  2866              CMP      r0,#0x66              ;3401
001b5e  d043              BEQ      |L1.7144|
                  |L1.7008|
001b60  6830              LDR      r0,[r6,#0]            ;3406  ; avar_ind_stat
001b62  07c0              LSLS     r0,r0,#31             ;3406
001b64  d04d              BEQ      |L1.7170|
001b66  6fa0              LDR      r0,[r4,#0x78]         ;3407
001b68  f0407000          ORR      r0,r0,#0x2000000      ;3407
001b6c  67a0              STR      r0,[r4,#0x78]         ;3407
                  |L1.7022|
001b6e  20d2              MOVS     r0,#0xd2              ;3421
001b70  f7fffffe          BL       mess_find_unvol
001b74  b110              CBZ      r0,|L1.7036|
001b76  6828              LDR      r0,[r5,#0]            ;3421  ; mess_data
001b78  286a              CMP      r0,#0x6a              ;3421
001b7a  d047              BEQ      |L1.7180|
                  |L1.7036|
001b7c  6830              LDR      r0,[r6,#0]            ;3428  ; avar_ind_stat
001b7e  4238              TST      r0,r7                 ;3428
001b80  d052              BEQ      |L1.7208|
001b82  69a0              LDR      r0,[r4,#0x18]         ;3429
001b84  f0400080          ORR      r0,r0,#0x80           ;3429
001b88  61a0              STR      r0,[r4,#0x18]         ;3429
                  |L1.7050|
001b8a  20d2              MOVS     r0,#0xd2              ;3434
001b8c  f7fffffe          BL       mess_find_unvol
001b90  b110              CBZ      r0,|L1.7064|
001b92  6828              LDR      r0,[r5,#0]            ;3434  ; mess_data
001b94  2867              CMP      r0,#0x67              ;3434
001b96  d04d              BEQ      |L1.7220|
                  |L1.7064|
001b98  f8980000          LDRB     r0,[r8,#0]  ; ips_bat_av_stat
001b9c  b380              CBZ      r0,|L1.7168|
;;;3442        	else SET_REG(LPC_GPIO0->FIOSET,1,4,1);
001b9e  69a0              LDR      r0,[r4,#0x18]
001ba0  f0400010          ORR      r0,r0,#0x10
001ba4  61a0              STR      r0,[r4,#0x18]
001ba6  e1dc              B        |L1.8034|
                  |L1.7080|
001ba8  6868              LDR      r0,[r5,#4]            ;2942  ; mess_data
001baa  2801              CMP      r0,#1                 ;2942
001bac  d006              BEQ      |L1.7100|
001bae  2800              CMP      r0,#0                 ;2943
001bb0  d1b5              BNE      |L1.6942|
001bb2  69e0              LDR      r0,[r4,#0x1c]         ;2943
001bb4  f0405000          ORR      r0,r0,#0x20000000     ;2943
001bb8  61e0              STR      r0,[r4,#0x1c]         ;2943
001bba  e7b0              B        |L1.6942|
                  |L1.7100|
001bbc  69a0              LDR      r0,[r4,#0x18]         ;2942
001bbe  f0405000          ORR      r0,r0,#0x20000000     ;2942
001bc2  61a0              STR      r0,[r4,#0x18]         ;2942
001bc4  e7ab              B        |L1.6942|
                  |L1.7110|
001bc6  6868              LDR      r0,[r5,#4]            ;2962  ; mess_data
001bc8  b120              CBZ      r0,|L1.7124|
001bca  6fa0              LDR      r0,[r4,#0x78]         ;2963
001bcc  f0407000          ORR      r0,r0,#0x2000000      ;2963
001bd0  67a0              STR      r0,[r4,#0x78]         ;2963
001bd2  e7b3              B        |L1.6972|
                  |L1.7124|
001bd4  6fe0              LDR      r0,[r4,#0x7c]         ;2962
001bd6  f0407000          ORR      r0,r0,#0x2000000      ;2962
001bda  67e0              STR      r0,[r4,#0x7c]         ;2962
001bdc  e7ae              B        |L1.6972|
                  |L1.7134|
001bde  6fe0              LDR      r0,[r4,#0x7c]         ;2965
001be0  f0407000          ORR      r0,r0,#0x2000000      ;2965
001be4  67e0              STR      r0,[r4,#0x7c]         ;2965
001be6  e7a9              B        |L1.6972|
                  |L1.7144|
001be8  6868              LDR      r0,[r5,#4]            ;3403  ; mess_data
001bea  b120              CBZ      r0,|L1.7158|
001bec  6fa0              LDR      r0,[r4,#0x78]         ;3404
001bee  f0407000          ORR      r0,r0,#0x2000000      ;3404
001bf2  67a0              STR      r0,[r4,#0x78]         ;3404
001bf4  e7bb              B        |L1.7022|
                  |L1.7158|
001bf6  6fe0              LDR      r0,[r4,#0x7c]         ;3403
001bf8  f0407000          ORR      r0,r0,#0x2000000      ;3403
001bfc  67e0              STR      r0,[r4,#0x7c]         ;3403
001bfe  e7b6              B        |L1.7022|
                  |L1.7168|
001c00  e027              B        |L1.7250|
                  |L1.7170|
001c02  6fe0              LDR      r0,[r4,#0x7c]         ;3406
001c04  f0407000          ORR      r0,r0,#0x2000000      ;3406
001c08  67e0              STR      r0,[r4,#0x7c]         ;3406
001c0a  e7b0              B        |L1.7022|
                  |L1.7180|
001c0c  6868              LDR      r0,[r5,#4]            ;3423  ; mess_data
001c0e  b130              CBZ      r0,|L1.7198|
001c10  2801              CMP      r0,#1                 ;3424
001c12  d1ba              BNE      |L1.7050|
001c14  69a0              LDR      r0,[r4,#0x18]         ;3424
001c16  f0400080          ORR      r0,r0,#0x80           ;3424
001c1a  61a0              STR      r0,[r4,#0x18]         ;3424
001c1c  e7b5              B        |L1.7050|
                  |L1.7198|
001c1e  69e0              LDR      r0,[r4,#0x1c]         ;3423
001c20  f0400080          ORR      r0,r0,#0x80           ;3423
001c24  61e0              STR      r0,[r4,#0x1c]         ;3423
001c26  e7b0              B        |L1.7050|
                  |L1.7208|
001c28  69e0              LDR      r0,[r4,#0x1c]         ;3428
001c2a  f0400080          ORR      r0,r0,#0x80           ;3428
001c2e  61e0              STR      r0,[r4,#0x1c]         ;3428
001c30  e7ab              B        |L1.7050|
                  |L1.7218|
001c32  e013              B        |L1.7260|
                  |L1.7220|
001c34  6868              LDR      r0,[r5,#4]            ;3436  ; mess_data
001c36  b110              CBZ      r0,|L1.7230|
001c38  2801              CMP      r0,#1                 ;3437
001c3a  d005              BEQ      |L1.7240|
001c3c  e191              B        |L1.8034|
                  |L1.7230|
001c3e  69e0              LDR      r0,[r4,#0x1c]         ;3436
001c40  f0400010          ORR      r0,r0,#0x10           ;3436
001c44  61e0              STR      r0,[r4,#0x1c]         ;3436
001c46  e18c              B        |L1.8034|
                  |L1.7240|
001c48  69a0              LDR      r0,[r4,#0x18]         ;3437
001c4a  f0400010          ORR      r0,r0,#0x10           ;3437
001c4e  61a0              STR      r0,[r4,#0x18]         ;3437
001c50  e187              B        |L1.8034|
                  |L1.7250|
001c52  69e0              LDR      r0,[r4,#0x1c]         ;3441
001c54  f0400010          ORR      r0,r0,#0x10           ;3441
001c58  61e0              STR      r0,[r4,#0x1c]         ;3441
001c5a  e182              B        |L1.8034|
                  |L1.7260|
;;;3443   		}
;;;3444   	#endif
;;;3445   	#ifdef APSENERGIA
;;;3446   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BAT))
;;;3447   		{
;;;3448   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,4,1);
;;;3449   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,4,1);
;;;3450        	}
;;;3451   	else 
;;;3452   		{
;;;3453   		if(!apsEnergiaStat)SET_REG(LPC_GPIO0->FIOSET,1,4,1);
;;;3454   		else SET_REG(LPC_GPIO0->FIOCLR,1,4,1);
;;;3455   		}
;;;3456   	#endif
;;;3457   	}
;;;3458   
;;;3459   else	if(AUSW_MAIN==22023)
001c5c  f5a041ac          SUB      r1,r0,#0x5600
001c60  3907              SUBS     r1,#7
001c62  d162              BNE      |L1.7466|
;;;3460   	{
;;;3461   
;;;3462   	//Ðåëå àâàðèé áàòàðåé
;;;3463   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BAT))
001c64  20d2              MOVS     r0,#0xd2
001c66  f7fffffe          BL       mess_find_unvol
001c6a  b110              CBZ      r0,|L1.7282|
001c6c  6828              LDR      r0,[r5,#0]  ; mess_data
001c6e  2867              CMP      r0,#0x67
001c70  d023              BEQ      |L1.7354|
                  |L1.7282|
;;;3464   		{
;;;3465   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,4,1);
;;;3466   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,4,1);
;;;3467        	}
;;;3468   	else 
;;;3469   		{
;;;3470   		if(!(ips_bat_av_stat)) SET_REG(LPC_GPIO0->FIOCLR,1,4,1);
001c72  f8980000          LDRB     r0,[r8,#0]  ; ips_bat_av_stat
001c76  b370              CBZ      r0,|L1.7382|
;;;3471        	else SET_REG(LPC_GPIO0->FIOSET,1,4,1);
001c78  69a0              LDR      r0,[r4,#0x18]
001c7a  f0400010          ORR      r0,r0,#0x10
001c7e  61a0              STR      r0,[r4,#0x18]
                  |L1.7296|
;;;3472   		} 
;;;3473   
;;;3474   
;;;3475   	//Ðåëå àâàðèè ñåòè ÒÓÒ ÊÀÊÀß òî ËÀÆÀ ñ àâàðèåé ñåòè. Îáðàùåíèå ê ðàçíûì ïîðòàì
;;;3476   	#ifndef UKU2071x
;;;3477   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_NET))
;;;3478   		{
;;;3479   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;3480   		else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_NET,1);
;;;3481   		}
;;;3482   	else	if(!(avar_ind_stat&0x00000001)) SET_REG(LPC_GPIO1->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;3483   	else SET_REG(LPC_GPIO3->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;3484   	#endif
;;;3485   	#ifdef UKU2071x
;;;3486   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_NET))
001c80  20d2              MOVS     r0,#0xd2
001c82  f7fffffe          BL       mess_find_unvol
001c86  b110              CBZ      r0,|L1.7310|
001c88  6828              LDR      r0,[r5,#0]  ; mess_data
001c8a  2866              CMP      r0,#0x66
001c8c  d028              BEQ      |L1.7392|
                  |L1.7310|
;;;3487   		{
;;;3488   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_NET,1);
;;;3489   		else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;3490   		}
;;;3491   	else	if(!(avar_ind_stat&0x00000001)) SET_REG(LPC_GPIO1->FIOSET,1,SHIFT_REL_AV_NET,1);
001c8e  6830              LDR      r0,[r6,#0]  ; avar_ind_stat
001c90  07c0              LSLS     r0,r0,#31
001c92  d031              BEQ      |L1.7416|
;;;3492   	else SET_REG(LPC_GPIO3->FIOSET,1,SHIFT_REL_AV_NET,1);
001c94  6fa0              LDR      r0,[r4,#0x78]
001c96  f0407000          ORR      r0,r0,#0x2000000
001c9a  67a0              STR      r0,[r4,#0x78]
                  |L1.7324|
;;;3493   	#endif
;;;3494   
;;;3495   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BPS))
001c9c  20d2              MOVS     r0,#0xd2
001c9e  f7fffffe          BL       mess_find_unvol
001ca2  b110              CBZ      r0,|L1.7338|
001ca4  6828              LDR      r0,[r5,#0]  ; mess_data
001ca6  286a              CMP      r0,#0x6a
001ca8  d02b              BEQ      |L1.7426|
                  |L1.7338|
;;;3496   		{
;;;3497   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,7,1);
;;;3498   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,7,1);
;;;3499   	     }
;;;3500   	else 
;;;3501   		{
;;;3502   		if(!(avar_ind_stat&0x100007f8)) SET_REG(LPC_GPIO0->FIOCLR,1,7,1);
001caa  6830              LDR      r0,[r6,#0]  ; avar_ind_stat
001cac  4238              TST      r0,r7
001cae  d037              BEQ      |L1.7456|
;;;3503   	     else SET_REG(LPC_GPIO0->FIOSET,1,7,1);
001cb0  69a0              LDR      r0,[r4,#0x18]
001cb2  f0400080          ORR      r0,r0,#0x80
001cb6  61a0              STR      r0,[r4,#0x18]
001cb8  e153              B        |L1.8034|
                  |L1.7354|
001cba  6868              LDR      r0,[r5,#4]            ;3465  ; mess_data
001cbc  b130              CBZ      r0,|L1.7372|
001cbe  2801              CMP      r0,#1                 ;3466
001cc0  d1de              BNE      |L1.7296|
001cc2  69a0              LDR      r0,[r4,#0x18]         ;3466
001cc4  f0400010          ORR      r0,r0,#0x10           ;3466
001cc8  61a0              STR      r0,[r4,#0x18]         ;3466
001cca  e7d9              B        |L1.7296|
                  |L1.7372|
001ccc  69e0              LDR      r0,[r4,#0x1c]         ;3465
001cce  f0400010          ORR      r0,r0,#0x10           ;3465
001cd2  61e0              STR      r0,[r4,#0x1c]         ;3465
001cd4  e7d4              B        |L1.7296|
                  |L1.7382|
001cd6  69e0              LDR      r0,[r4,#0x1c]         ;3470
001cd8  f0400010          ORR      r0,r0,#0x10           ;3470
001cdc  61e0              STR      r0,[r4,#0x1c]         ;3470
001cde  e7cf              B        |L1.7296|
                  |L1.7392|
001ce0  6868              LDR      r0,[r5,#4]            ;3488  ; mess_data
001ce2  b120              CBZ      r0,|L1.7406|
001ce4  69e0              LDR      r0,[r4,#0x1c]         ;3489
001ce6  f0407000          ORR      r0,r0,#0x2000000      ;3489
001cea  61e0              STR      r0,[r4,#0x1c]         ;3489
001cec  e7d6              B        |L1.7324|
                  |L1.7406|
001cee  69a0              LDR      r0,[r4,#0x18]         ;3488
001cf0  f0407000          ORR      r0,r0,#0x2000000      ;3488
001cf4  61a0              STR      r0,[r4,#0x18]         ;3488
001cf6  e7d1              B        |L1.7324|
                  |L1.7416|
001cf8  6ba0              LDR      r0,[r4,#0x38]         ;3491
001cfa  f0407000          ORR      r0,r0,#0x2000000      ;3491
001cfe  63a0              STR      r0,[r4,#0x38]         ;3491
001d00  e7cc              B        |L1.7324|
                  |L1.7426|
001d02  6868              LDR      r0,[r5,#4]            ;3497  ; mess_data
001d04  b110              CBZ      r0,|L1.7436|
001d06  2801              CMP      r0,#1                 ;3498
001d08  d005              BEQ      |L1.7446|
001d0a  e12a              B        |L1.8034|
                  |L1.7436|
001d0c  69e0              LDR      r0,[r4,#0x1c]         ;3497
001d0e  f0400080          ORR      r0,r0,#0x80           ;3497
001d12  61e0              STR      r0,[r4,#0x1c]         ;3497
001d14  e125              B        |L1.8034|
                  |L1.7446|
001d16  69a0              LDR      r0,[r4,#0x18]         ;3498
001d18  f0400080          ORR      r0,r0,#0x80           ;3498
001d1c  61a0              STR      r0,[r4,#0x18]         ;3498
001d1e  e120              B        |L1.8034|
                  |L1.7456|
001d20  69e0              LDR      r0,[r4,#0x1c]         ;3502
001d22  f0400080          ORR      r0,r0,#0x80           ;3502
001d26  61e0              STR      r0,[r4,#0x1c]         ;3502
001d28  e11b              B        |L1.8034|
                  |L1.7466|
;;;3504   		} 
;;;3505   	}
;;;3506   else	if((AUSW_MAIN==22043)||(AUSW_MAIN==22044))
001d2a  f5a041ac          SUB      r1,r0,#0x5600
001d2e  391b              SUBS     r1,r1,#0x1b
001d30  d001              BEQ      |L1.7478|
001d32  1e49              SUBS     r1,r1,#1
001d34  d170              BNE      |L1.7704|
                  |L1.7478|
;;;3507   	{
;;;3508   	//Ðåëå àâàðèé áàòàðåé
;;;3509   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BAT))
001d36  20d2              MOVS     r0,#0xd2
001d38  f7fffffe          BL       mess_find_unvol
001d3c  b110              CBZ      r0,|L1.7492|
001d3e  6828              LDR      r0,[r5,#0]  ; mess_data
001d40  2867              CMP      r0,#0x67
001d42  d031              BEQ      |L1.7592|
                  |L1.7492|
;;;3510   		{
;;;3511   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,4,1);
;;;3512   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,4,1);
;;;3513        	}
;;;3514   	else 
;;;3515   		{
;;;3516   		if(!(ips_bat_av_stat)) SET_REG(LPC_GPIO0->FIOCLR,1,4,1);
001d44  f8980000          LDRB     r0,[r8,#0]  ; ips_bat_av_stat
001d48  b3b8              CBZ      r0,|L1.7610|
;;;3517        	else SET_REG(LPC_GPIO0->FIOSET,1,4,1);
001d4a  69a0              LDR      r0,[r4,#0x18]
001d4c  f0400010          ORR      r0,r0,#0x10
001d50  61a0              STR      r0,[r4,#0x18]
                  |L1.7506|
;;;3518   		} 
;;;3519   	//Ðåëå àâàðèè ñåòè ÒÓÒ ÊÀÊÀß òî ËÀÆÀ ñ àâàðèåé ñåòè. Îáðàùåíèå ê ðàçíûì ïîðòàì
;;;3520   	#ifndef UKU2071x 
;;;3521   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_NET))
;;;3522   		{
;;;3523   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;3524   		else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_NET,1);
;;;3525   		}
;;;3526   	else	if(!(avar_ind_stat&0x00000001)) SET_REG(LPC_GPIO1->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;3527   	else SET_REG(LPC_GPIO3->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;3528   	#endif
;;;3529   	#ifdef UKU2071x 
;;;3530   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_NET))
001d52  20d2              MOVS     r0,#0xd2
001d54  f7fffffe          BL       mess_find_unvol
001d58  b110              CBZ      r0,|L1.7520|
001d5a  6828              LDR      r0,[r5,#0]  ; mess_data
001d5c  2866              CMP      r0,#0x66
001d5e  d037              BEQ      |L1.7632|
                  |L1.7520|
;;;3531   		{
;;;3532   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_NET,1);
;;;3533   		else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;3534   		}
;;;3535   	else	if(!(avar_ind_stat&0x00000001)) SET_REG(LPC_GPIO1->FIOSET,1,SHIFT_REL_AV_NET,1);
001d60  6830              LDR      r0,[r6,#0]  ; avar_ind_stat
001d62  07c0              LSLS     r0,r0,#31
001d64  d040              BEQ      |L1.7656|
;;;3536   	else SET_REG(LPC_GPIO3->FIOSET,1,SHIFT_REL_AV_NET,1);
001d66  6fa0              LDR      r0,[r4,#0x78]
001d68  f0407000          ORR      r0,r0,#0x2000000
001d6c  67a0              STR      r0,[r4,#0x78]
                  |L1.7534|
;;;3537   	#endif
;;;3538   
;;;3539   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BPS))
001d6e  20d2              MOVS     r0,#0xd2
001d70  f7fffffe          BL       mess_find_unvol
001d74  b110              CBZ      r0,|L1.7548|
001d76  6828              LDR      r0,[r5,#0]  ; mess_data
001d78  286a              CMP      r0,#0x6a
001d7a  d03a              BEQ      |L1.7666|
                  |L1.7548|
;;;3540   		{
;;;3541   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,7,1);
;;;3542   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,7,1);
;;;3543   	     }
;;;3544   	else 
;;;3545   		{
;;;3546   		if(!(avar_ind_stat&0x100007f8)) SET_REG(LPC_GPIO0->FIOCLR,1,7,1);
001d7c  6830              LDR      r0,[r6,#0]  ; avar_ind_stat
001d7e  4238              TST      r0,r7
001d80  d045              BEQ      |L1.7694|
;;;3547   	     else SET_REG(LPC_GPIO0->FIOSET,1,7,1);
001d82  69a0              LDR      r0,[r4,#0x18]
001d84  f0400080          ORR      r0,r0,#0x80
001d88  61a0              STR      r0,[r4,#0x18]
                  |L1.7562|
;;;3548   		}
;;;3549   	//Ðåëå àâàðèè ÁÏÑ
;;;3550   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BPS))
001d8a  20d2              MOVS     r0,#0xd2
001d8c  f7fffffe          BL       mess_find_unvol
001d90  b110              CBZ      r0,|L1.7576|
001d92  6828              LDR      r0,[r5,#0]  ; mess_data
001d94  286a              CMP      r0,#0x6a
001d96  d040              BEQ      |L1.7706|
                  |L1.7576|
;;;3551   		{
;;;3552   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
;;;3553   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
;;;3554        	}
;;;3555   	else 
;;;3556   		{
;;;3557   		if(!(avar_ind_stat&0x100007f8)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
001d98  6830              LDR      r0,[r6,#0]  ; avar_ind_stat
001d9a  4238              TST      r0,r7
001d9c  d04c              BEQ      |L1.7736|
;;;3558        	else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
001d9e  69a0              LDR      r0,[r4,#0x18]
001da0  f0400020          ORR      r0,r0,#0x20
001da4  61a0              STR      r0,[r4,#0x18]
001da6  e0dc              B        |L1.8034|
                  |L1.7592|
001da8  6868              LDR      r0,[r5,#4]            ;3511  ; mess_data
001daa  b138              CBZ      r0,|L1.7612|
001dac  2801              CMP      r0,#1                 ;3512
001dae  d1d0              BNE      |L1.7506|
001db0  69a0              LDR      r0,[r4,#0x18]         ;3512
001db2  f0400010          ORR      r0,r0,#0x10           ;3512
001db6  61a0              STR      r0,[r4,#0x18]         ;3512
001db8  e7cb              B        |L1.7506|
                  |L1.7610|
001dba  e004              B        |L1.7622|
                  |L1.7612|
001dbc  69e0              LDR      r0,[r4,#0x1c]         ;3511
001dbe  f0400010          ORR      r0,r0,#0x10           ;3511
001dc2  61e0              STR      r0,[r4,#0x1c]         ;3511
001dc4  e7c5              B        |L1.7506|
                  |L1.7622|
001dc6  69e0              LDR      r0,[r4,#0x1c]         ;3516
001dc8  f0400010          ORR      r0,r0,#0x10           ;3516
001dcc  61e0              STR      r0,[r4,#0x1c]         ;3516
001dce  e7c0              B        |L1.7506|
                  |L1.7632|
001dd0  6868              LDR      r0,[r5,#4]            ;3532  ; mess_data
001dd2  b120              CBZ      r0,|L1.7646|
001dd4  69e0              LDR      r0,[r4,#0x1c]         ;3533
001dd6  f0407000          ORR      r0,r0,#0x2000000      ;3533
001dda  61e0              STR      r0,[r4,#0x1c]         ;3533
001ddc  e7c7              B        |L1.7534|
                  |L1.7646|
001dde  69a0              LDR      r0,[r4,#0x18]         ;3532
001de0  f0407000          ORR      r0,r0,#0x2000000      ;3532
001de4  61a0              STR      r0,[r4,#0x18]         ;3532
001de6  e7c2              B        |L1.7534|
                  |L1.7656|
001de8  6ba0              LDR      r0,[r4,#0x38]         ;3535
001dea  f0407000          ORR      r0,r0,#0x2000000      ;3535
001dee  63a0              STR      r0,[r4,#0x38]         ;3535
001df0  e7bd              B        |L1.7534|
                  |L1.7666|
001df2  6868              LDR      r0,[r5,#4]            ;3541  ; mess_data
001df4  b130              CBZ      r0,|L1.7684|
001df6  2801              CMP      r0,#1                 ;3542
001df8  d1c7              BNE      |L1.7562|
001dfa  69a0              LDR      r0,[r4,#0x18]         ;3542
001dfc  f0400080          ORR      r0,r0,#0x80           ;3542
001e00  61a0              STR      r0,[r4,#0x18]         ;3542
001e02  e7c2              B        |L1.7562|
                  |L1.7684|
001e04  69e0              LDR      r0,[r4,#0x1c]         ;3541
001e06  f0400080          ORR      r0,r0,#0x80           ;3541
001e0a  61e0              STR      r0,[r4,#0x1c]         ;3541
001e0c  e7bd              B        |L1.7562|
                  |L1.7694|
001e0e  69e0              LDR      r0,[r4,#0x1c]         ;3546
001e10  f0400080          ORR      r0,r0,#0x80           ;3546
001e14  61e0              STR      r0,[r4,#0x1c]         ;3546
001e16  e7b8              B        |L1.7562|
                  |L1.7704|
001e18  e013              B        |L1.7746|
                  |L1.7706|
001e1a  6868              LDR      r0,[r5,#4]            ;3552  ; mess_data
001e1c  b110              CBZ      r0,|L1.7716|
001e1e  2801              CMP      r0,#1                 ;3553
001e20  d005              BEQ      |L1.7726|
001e22  e09e              B        |L1.8034|
                  |L1.7716|
001e24  69e0              LDR      r0,[r4,#0x1c]         ;3552
001e26  f0400020          ORR      r0,r0,#0x20           ;3552
001e2a  61e0              STR      r0,[r4,#0x1c]         ;3552
001e2c  e099              B        |L1.8034|
                  |L1.7726|
001e2e  69a0              LDR      r0,[r4,#0x18]         ;3553
001e30  f0400020          ORR      r0,r0,#0x20           ;3553
001e34  61a0              STR      r0,[r4,#0x18]         ;3553
001e36  e094              B        |L1.8034|
                  |L1.7736|
001e38  69e0              LDR      r0,[r4,#0x1c]         ;3557
001e3a  f0400020          ORR      r0,r0,#0x20           ;3557
001e3e  61e0              STR      r0,[r4,#0x1c]         ;3557
001e40  e08f              B        |L1.8034|
                  |L1.7746|
;;;3559   		} 
;;;3560   	}
;;;3561   else	if((AUSW_MAIN==22033)||(AUSW_MAIN==22018))
001e42  f5a041ac          SUB      r1,r0,#0x5600
001e46  3911              SUBS     r1,r1,#0x11
001e48  d001              BEQ      |L1.7758|
001e4a  310f              ADDS     r1,r1,#0xf
001e4c  d16d              BNE      |L1.7978|
                  |L1.7758|
;;;3562   	{
;;;3563   	#ifndef UKU2071x 
;;;3564   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_NET))
;;;3565   		{
;;;3566   		if(mess_data[1]==0) SET_REG(LPC_GPIO3->FIOSET,1,25,1);
;;;3567   		else SET_REG(LPC_GPIO3->FIOCLR,1,25,1);
;;;3568   		}
;;;3569   	else	if(!(avar_ind_stat&0x00000001)) SET_REG(LPC_GPIO3->FIOSET,1,25,1);
;;;3570   	else SET_REG(LPC_GPIO3->FIOCLR,1,25,1);
;;;3571   	#endif
;;;3572   	#ifdef UKU2071x 
;;;3573   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_NET))
001e4e  20d2              MOVS     r0,#0xd2
001e50  f7fffffe          BL       mess_find_unvol
001e54  b110              CBZ      r0,|L1.7772|
001e56  6828              LDR      r0,[r5,#0]  ; mess_data
001e58  2866              CMP      r0,#0x66
001e5a  d023              BEQ      |L1.7844|
                  |L1.7772|
;;;3574   		{
;;;3575   		if(mess_data[1]==0) SET_REG(LPC_GPIO3->FIOCLR,1,25,1);
;;;3576   		else SET_REG(LPC_GPIO3->FIOSET,1,25,1);
;;;3577   		}
;;;3578   	else	if(!(avar_ind_stat&0x00000001)) SET_REG(LPC_GPIO3->FIOCLR,1,25,1);
001e5c  6830              LDR      r0,[r6,#0]  ; avar_ind_stat
001e5e  07c0              LSLS     r0,r0,#31
001e60  d02c              BEQ      |L1.7868|
;;;3579   	else SET_REG(LPC_GPIO3->FIOSET,1,25,1);
001e62  6fa0              LDR      r0,[r4,#0x78]
001e64  f0407000          ORR      r0,r0,#0x2000000
001e68  67a0              STR      r0,[r4,#0x78]
                  |L1.7786|
;;;3580   	#endif
;;;3581   	
;;;3582   	
;;;3583   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BPS))
001e6a  20d2              MOVS     r0,#0xd2
001e6c  f7fffffe          BL       mess_find_unvol
001e70  b110              CBZ      r0,|L1.7800|
001e72  6828              LDR      r0,[r5,#0]  ; mess_data
001e74  286a              CMP      r0,#0x6a
001e76  d026              BEQ      |L1.7878|
                  |L1.7800|
;;;3584   		{
;;;3585   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,7,1);
;;;3586   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,7,1);
;;;3587   	     }
;;;3588   	else 
;;;3589   		{
;;;3590   		if(!(avar_ind_stat&0x100007f8)) SET_REG(LPC_GPIO0->FIOCLR,1,7,1);
001e78  6830              LDR      r0,[r6,#0]  ; avar_ind_stat
001e7a  4238              TST      r0,r7
001e7c  d031              BEQ      |L1.7906|
;;;3591   	     else SET_REG(LPC_GPIO0->FIOSET,1,7,1);
001e7e  69a0              LDR      r0,[r4,#0x18]
001e80  f0400080          ORR      r0,r0,#0x80
001e84  61a0              STR      r0,[r4,#0x18]
                  |L1.7814|
;;;3592   		} 
;;;3593   
;;;3594   	//Ðåëå àâàðèé áàòàðåé
;;;3595   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BAT))
001e86  20d2              MOVS     r0,#0xd2
001e88  f7fffffe          BL       mess_find_unvol
001e8c  b110              CBZ      r0,|L1.7828|
001e8e  6828              LDR      r0,[r5,#0]  ; mess_data
001e90  2867              CMP      r0,#0x67
001e92  d036              BEQ      |L1.7938|
                  |L1.7828|
;;;3596   		{
;;;3597   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,4,1);
;;;3598   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,4,1);
;;;3599        	}
;;;3600   	else 
;;;3601   		{
;;;3602   		if(!(ips_bat_av_stat)) SET_REG(LPC_GPIO0->FIOCLR,1,4,1);
001e94  f8980000          LDRB     r0,[r8,#0]  ; ips_bat_av_stat
001e98  b390              CBZ      r0,|L1.7936|
;;;3603        	else SET_REG(LPC_GPIO0->FIOSET,1,4,1);
001e9a  69a0              LDR      r0,[r4,#0x18]
001e9c  f0400010          ORR      r0,r0,#0x10
001ea0  61a0              STR      r0,[r4,#0x18]
001ea2  e05e              B        |L1.8034|
                  |L1.7844|
001ea4  6868              LDR      r0,[r5,#4]            ;3575  ; mess_data
001ea6  b120              CBZ      r0,|L1.7858|
001ea8  6fa0              LDR      r0,[r4,#0x78]         ;3576
001eaa  f0407000          ORR      r0,r0,#0x2000000      ;3576
001eae  67a0              STR      r0,[r4,#0x78]         ;3576
001eb0  e7db              B        |L1.7786|
                  |L1.7858|
001eb2  6fe0              LDR      r0,[r4,#0x7c]         ;3575
001eb4  f0407000          ORR      r0,r0,#0x2000000      ;3575
001eb8  67e0              STR      r0,[r4,#0x7c]         ;3575
001eba  e7d6              B        |L1.7786|
                  |L1.7868|
001ebc  6fe0              LDR      r0,[r4,#0x7c]         ;3578
001ebe  f0407000          ORR      r0,r0,#0x2000000      ;3578
001ec2  67e0              STR      r0,[r4,#0x7c]         ;3578
001ec4  e7d1              B        |L1.7786|
                  |L1.7878|
001ec6  6868              LDR      r0,[r5,#4]            ;3585  ; mess_data
001ec8  b130              CBZ      r0,|L1.7896|
001eca  2801              CMP      r0,#1                 ;3586
001ecc  d1db              BNE      |L1.7814|
001ece  69a0              LDR      r0,[r4,#0x18]         ;3586
001ed0  f0400080          ORR      r0,r0,#0x80           ;3586
001ed4  61a0              STR      r0,[r4,#0x18]         ;3586
001ed6  e7d6              B        |L1.7814|
                  |L1.7896|
001ed8  69e0              LDR      r0,[r4,#0x1c]         ;3585
001eda  f0400080          ORR      r0,r0,#0x80           ;3585
001ede  61e0              STR      r0,[r4,#0x1c]         ;3585
001ee0  e7d1              B        |L1.7814|
                  |L1.7906|
001ee2  69e0              LDR      r0,[r4,#0x1c]         ;3590
001ee4  f0400080          ORR      r0,r0,#0x80           ;3590
001ee8  61e0              STR      r0,[r4,#0x1c]         ;3590
001eea  e7cc              B        |L1.7814|
                  |L1.7916|
                          DCD      mess_data
                  |L1.7920|
                          DCD      avar_ind_stat
                  |L1.7924|
                          DCD      AUSW_MAIN
                  |L1.7928|
                          DCD      ips_bat_av_stat
                  |L1.7932|
                          DCD      0x100007f8
                  |L1.7936|
001f00  e00e              B        |L1.7968|
                  |L1.7938|
001f02  6868              LDR      r0,[r5,#4]            ;3597  ; mess_data
001f04  b110              CBZ      r0,|L1.7948|
001f06  2801              CMP      r0,#1                 ;3598
001f08  d005              BEQ      |L1.7958|
001f0a  e02a              B        |L1.8034|
                  |L1.7948|
001f0c  69e0              LDR      r0,[r4,#0x1c]         ;3597
001f0e  f0400010          ORR      r0,r0,#0x10           ;3597
001f12  61e0              STR      r0,[r4,#0x1c]         ;3597
001f14  e025              B        |L1.8034|
                  |L1.7958|
001f16  69a0              LDR      r0,[r4,#0x18]         ;3598
001f18  f0400010          ORR      r0,r0,#0x10           ;3598
001f1c  61a0              STR      r0,[r4,#0x18]         ;3598
001f1e  e020              B        |L1.8034|
                  |L1.7968|
001f20  69e0              LDR      r0,[r4,#0x1c]         ;3602
001f22  f0400010          ORR      r0,r0,#0x10           ;3602
001f26  61e0              STR      r0,[r4,#0x1c]         ;3602
001f28  e01b              B        |L1.8034|
                  |L1.7978|
;;;3604   		} 
;;;3605   	} 	 
;;;3606   else	
;;;3607   	{
;;;3608   	//Ðåëå àâàðèè ñåòè ÒÓÒ ÊÀÊÀß òî ËÀÆÀ ñ àâàðèåé ñåòè. Îáðàùåíèå ê ðàçíûì ïîðòàì
;;;3609   	#ifndef UKU2071x 
;;;3610   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_NET))
;;;3611   		{
;;;3612   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;3613   		else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_NET,1);
;;;3614   		}
;;;3615   	else	if(!(avar_ind_stat&0x00000001)) SET_REG(LPC_GPIO1->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;3616   	else SET_REG(LPC_GPIO3->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;3617   	#endif
;;;3618   	#ifdef UKU2071x 
;;;3619   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_NET))
001f2a  20d2              MOVS     r0,#0xd2
001f2c  f7fffffe          BL       mess_find_unvol
001f30  b110              CBZ      r0,|L1.7992|
001f32  6828              LDR      r0,[r5,#0]  ; mess_data
001f34  2866              CMP      r0,#0x66
001f36  d026              BEQ      |L1.8070|
                  |L1.7992|
;;;3620   		{
;;;3621   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_NET,1);
;;;3622   		else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;3623   		}
;;;3624   	else	if(!(avar_ind_stat&0x00000001)) SET_REG(LPC_GPIO1->FIOSET,1,SHIFT_REL_AV_NET,1);
001f38  6830              LDR      r0,[r6,#0]  ; avar_ind_stat
001f3a  07c0              LSLS     r0,r0,#31
001f3c  d02f              BEQ      |L1.8094|
;;;3625   	else SET_REG(LPC_GPIO3->FIOSET,1,SHIFT_REL_AV_NET,1);
001f3e  6fa0              LDR      r0,[r4,#0x78]
001f40  f0407000          ORR      r0,r0,#0x2000000
001f44  67a0              STR      r0,[r4,#0x78]
                  |L1.8006|
;;;3626   	#endif
;;;3627   
;;;3628   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BPS))
001f46  20d2              MOVS     r0,#0xd2
001f48  f7fffffe          BL       mess_find_unvol
001f4c  b110              CBZ      r0,|L1.8020|
001f4e  6828              LDR      r0,[r5,#0]  ; mess_data
001f50  286a              CMP      r0,#0x6a
001f52  d029              BEQ      |L1.8104|
                  |L1.8020|
;;;3629   		{
;;;3630   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
;;;3631   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
;;;3632        	}
;;;3633   	else 
;;;3634   		{
;;;3635   		if(!(avar_ind_stat&0x100007f8)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
001f54  6830              LDR      r0,[r6,#0]  ; avar_ind_stat
001f56  4238              TST      r0,r7
001f58  d034              BEQ      |L1.8132|
;;;3636        	else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
001f5a  69a0              LDR      r0,[r4,#0x18]
001f5c  f0400020          ORR      r0,r0,#0x20
001f60  61a0              STR      r0,[r4,#0x18]
                  |L1.8034|
;;;3637   		}
;;;3638   	}
;;;3639   //Äîïîëíèòåëüíîå ðåëå ÓÊÓ 
;;;3640   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_EXT))	 
001f62  20d2              MOVS     r0,#0xd2
001f64  f7fffffe          BL       mess_find_unvol
;;;3641   	{
;;;3642   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,9,1);
;;;3643   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,9,1);
;;;3644   	}
;;;3645   else if(DOP_RELE_FUNC==0)	//åñëè äîïðåëå ïîäêëþ÷åíî ê óñêîðåííîìó çàðÿäó
;;;3646   	{
;;;3647   	if((!speedChIsOn)&&(spc_stat!=spcVZ)&&(hv_vz_stat==hvsOFF)&&(sp_ch_stat==scsOFF)&&(load_U/10<UVENTOFF))   SET_REG(LPC_GPIO0->FIOCLR,1,9,1);
001f68  f8df83e4          LDR      r8,|L1.9040|
001f6c  4ef9              LDR      r6,|L1.9044|
001f6e  4ffa              LDR      r7,|L1.9048|
001f70  b110              CBZ      r0,|L1.8056|
001f72  6828              LDR      r0,[r5,#0]            ;3640  ; mess_data
001f74  2871              CMP      r0,#0x71              ;3640
001f76  d02a              BEQ      |L1.8142|
                  |L1.8056|
001f78  48f8              LDR      r0,|L1.9052|
001f7a  f9b00000          LDRSH    r0,[r0,#0]            ;3645  ; DOP_RELE_FUNC
001f7e  b380              CBZ      r0,|L1.8162|
;;;3648   	else if((speedChIsOn)||(spc_stat==spcVZ)||(hv_vz_stat!=hvsOFF)||(sp_ch_stat!=scsOFF)) SET_REG(LPC_GPIO0->FIOSET,1,9,1);
;;;3649   	}
;;;3650   else if(DOP_RELE_FUNC==1)  //åñëè äîïðåëå ïîäêëþ÷åíî ê èíäèêàöèè ðàçðÿæåííîé áàòàðåè
001f80  2801              CMP      r0,#1
001f82  d05c              BEQ      |L1.8254|
001f84  e066              B        |L1.8276|
                  |L1.8070|
001f86  6868              LDR      r0,[r5,#4]            ;3621  ; mess_data
001f88  b120              CBZ      r0,|L1.8084|
001f8a  69e0              LDR      r0,[r4,#0x1c]         ;3622
001f8c  f0407000          ORR      r0,r0,#0x2000000      ;3622
001f90  61e0              STR      r0,[r4,#0x1c]         ;3622
001f92  e7d8              B        |L1.8006|
                  |L1.8084|
001f94  69a0              LDR      r0,[r4,#0x18]         ;3621
001f96  f0407000          ORR      r0,r0,#0x2000000      ;3621
001f9a  61a0              STR      r0,[r4,#0x18]         ;3621
001f9c  e7d3              B        |L1.8006|
                  |L1.8094|
001f9e  6ba0              LDR      r0,[r4,#0x38]         ;3624
001fa0  f0407000          ORR      r0,r0,#0x2000000      ;3624
001fa4  63a0              STR      r0,[r4,#0x38]         ;3624
001fa6  e7ce              B        |L1.8006|
                  |L1.8104|
001fa8  6868              LDR      r0,[r5,#4]            ;3630  ; mess_data
001faa  b130              CBZ      r0,|L1.8122|
001fac  2801              CMP      r0,#1                 ;3631
001fae  d1d8              BNE      |L1.8034|
001fb0  69a0              LDR      r0,[r4,#0x18]         ;3631
001fb2  f0400020          ORR      r0,r0,#0x20           ;3631
001fb6  61a0              STR      r0,[r4,#0x18]         ;3631
001fb8  e7d3              B        |L1.8034|
                  |L1.8122|
001fba  69e0              LDR      r0,[r4,#0x1c]         ;3630
001fbc  f0400020          ORR      r0,r0,#0x20           ;3630
001fc0  61e0              STR      r0,[r4,#0x1c]         ;3630
001fc2  e7ce              B        |L1.8034|
                  |L1.8132|
001fc4  69e0              LDR      r0,[r4,#0x1c]         ;3635
001fc6  f0400020          ORR      r0,r0,#0x20           ;3635
001fca  61e0              STR      r0,[r4,#0x1c]         ;3635
001fcc  e7c9              B        |L1.8034|
                  |L1.8142|
001fce  6868              LDR      r0,[r5,#4]            ;3642  ; mess_data
001fd0  b110              CBZ      r0,|L1.8152|
001fd2  2801              CMP      r0,#1                 ;3643
001fd4  d006              BEQ      |L1.8164|
001fd6  e03d              B        |L1.8276|
                  |L1.8152|
001fd8  69e0              LDR      r0,[r4,#0x1c]         ;3642
001fda  f4407000          ORR      r0,r0,#0x200          ;3642
001fde  61e0              STR      r0,[r4,#0x1c]         ;3642
001fe0  e038              B        |L1.8276|
                  |L1.8162|
001fe2  e004              B        |L1.8174|
                  |L1.8164|
001fe4  69a0              LDR      r0,[r4,#0x18]         ;3643
001fe6  f4407000          ORR      r0,r0,#0x200          ;3643
001fea  61a0              STR      r0,[r4,#0x18]         ;3643
001fec  e032              B        |L1.8276|
                  |L1.8174|
001fee  48dc              LDR      r0,|L1.9056|
001ff0  49dc              LDR      r1,|L1.9060|
001ff2  f9b00000          LDRSH    r0,[r0,#0]            ;3647  ; speedChIsOn
001ff6  b9a8              CBNZ     r0,|L1.8228|
001ff8  7d0a              LDRB     r2,[r1,#0x14]         ;3647  ; spc_stat
001ffa  2a02              CMP      r2,#2                 ;3647
001ffc  d012              BEQ      |L1.8228|
001ffe  783a              LDRB     r2,[r7,#0]            ;3647  ; hv_vz_stat
002000  b982              CBNZ     r2,|L1.8228|
002002  7832              LDRB     r2,[r6,#0]            ;3647  ; sp_ch_stat
002004  b972              CBNZ     r2,|L1.8228|
002006  f9b82000          LDRSH    r2,[r8,#0]            ;3647  ; load_U
00200a  230a              MOVS     r3,#0xa               ;3647
00200c  fb92f2f3          SDIV     r2,r2,r3              ;3647
002010  4bd5              LDR      r3,|L1.9064|
002012  f9b33000          LDRSH    r3,[r3,#0]            ;3647  ; UVENTOFF
002016  429a              CMP      r2,r3                 ;3647
002018  da04              BGE      |L1.8228|
00201a  69e0              LDR      r0,[r4,#0x1c]         ;3647
00201c  f4407000          ORR      r0,r0,#0x200          ;3647
002020  61e0              STR      r0,[r4,#0x1c]         ;3647
002022  e017              B        |L1.8276|
                  |L1.8228|
002024  b930              CBNZ     r0,|L1.8244|
002026  7d08              LDRB     r0,[r1,#0x14]         ;3648  ; spc_stat
002028  2802              CMP      r0,#2                 ;3648
00202a  d003              BEQ      |L1.8244|
00202c  7838              LDRB     r0,[r7,#0]            ;3648  ; hv_vz_stat
00202e  b908              CBNZ     r0,|L1.8244|
002030  7830              LDRB     r0,[r6,#0]            ;3648  ; sp_ch_stat
002032  b178              CBZ      r0,|L1.8276|
                  |L1.8244|
002034  69a0              LDR      r0,[r4,#0x18]         ;3648
002036  f4407000          ORR      r0,r0,#0x200          ;3648
00203a  61a0              STR      r0,[r4,#0x18]         ;3648
00203c  e00a              B        |L1.8276|
                  |L1.8254|
;;;3651   	{
;;;3652   	if((mess_find_unvol(MESS2RELE_HNDL))&& (mess_data[0]==PARAM_RELE_BAT_IS_DISCHARGED)) SET_REG(LPC_GPIO0->FIOCLR,1,9,1);
00203e  20d2              MOVS     r0,#0xd2
002040  f7fffffe          BL       mess_find_unvol
002044  b110              CBZ      r0,|L1.8268|
002046  6828              LDR      r0,[r5,#0]  ; mess_data
002048  2872              CMP      r0,#0x72
00204a  d017              BEQ      |L1.8316|
                  |L1.8268|
;;;3653   	else SET_REG(LPC_GPIO0->FIOSET,1,9,1);
00204c  69a0              LDR      r0,[r4,#0x18]
00204e  f4407000          ORR      r0,r0,#0x200
002052  61a0              STR      r0,[r4,#0x18]
                  |L1.8276|
;;;3654   	}
;;;3655   	
;;;3656   //Áëîê âûíîñíîé ðåëå
;;;3657   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_BDR1))
002054  20d2              MOVS     r0,#0xd2
002056  f7fffffe          BL       mess_find_unvol
;;;3658   	{
;;;3659   	if(mess_data[1]==0) 		bdr_transmit_stat&=0xfe;
00205a  f8df9310          LDR      r9,|L1.9068|
;;;3660   	else if(mess_data[1]==1) 	bdr_transmit_stat|=0x01;
;;;3661   	}
;;;3662   else 
;;;3663   	{
;;;3664   	if(bdr_avar_stat&0x01)  	bdr_transmit_stat|=0x01;
00205e  4cc4              LDR      r4,|L1.9072|
002060  b110              CBZ      r0,|L1.8296|
002062  6828              LDR      r0,[r5,#0]            ;3657  ; mess_data
002064  2875              CMP      r0,#0x75              ;3657
002066  d00e              BEQ      |L1.8326|
                  |L1.8296|
002068  7820              LDRB     r0,[r4,#0]  ; bdr_avar_stat
00206a  07c0              LSLS     r0,r0,#31
00206c  d01e              BEQ      |L1.8364|
00206e  f8990000          LDRB     r0,[r9,#0]  ; bdr_transmit_stat
002072  f0400001          ORR      r0,r0,#1
002076  f8890000          STRB     r0,[r9,#0]
00207a  e01d              B        |L1.8376|
                  |L1.8316|
00207c  69e0              LDR      r0,[r4,#0x1c]         ;3652
00207e  f4407000          ORR      r0,r0,#0x200          ;3652
002082  61e0              STR      r0,[r4,#0x1c]         ;3652
002084  e7e6              B        |L1.8276|
                  |L1.8326|
002086  6868              LDR      r0,[r5,#4]            ;3659  ; mess_data
002088  b110              CBZ      r0,|L1.8336|
00208a  2801              CMP      r0,#1                 ;3660
00208c  d007              BEQ      |L1.8350|
00208e  e013              B        |L1.8376|
                  |L1.8336|
002090  f8990000          LDRB     r0,[r9,#0]            ;3659  ; bdr_transmit_stat
002094  f00000fe          AND      r0,r0,#0xfe           ;3659
002098  f8890000          STRB     r0,[r9,#0]            ;3659
00209c  e00c              B        |L1.8376|
                  |L1.8350|
00209e  f8990000          LDRB     r0,[r9,#0]            ;3660  ; bdr_transmit_stat
0020a2  f0400001          ORR      r0,r0,#1              ;3660
0020a6  f8890000          STRB     r0,[r9,#0]            ;3660
0020aa  e005              B        |L1.8376|
                  |L1.8364|
;;;3665   	else 						bdr_transmit_stat&=0xfe;
0020ac  f8990000          LDRB     r0,[r9,#0]  ; bdr_transmit_stat
0020b0  f00000fe          AND      r0,r0,#0xfe
0020b4  f8890000          STRB     r0,[r9,#0]
                  |L1.8376|
;;;3666   	}	
;;;3667   
;;;3668   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_BDR2))
0020b8  20d2              MOVS     r0,#0xd2
0020ba  f7fffffe          BL       mess_find_unvol
0020be  b110              CBZ      r0,|L1.8390|
0020c0  6828              LDR      r0,[r5,#0]  ; mess_data
0020c2  2876              CMP      r0,#0x76
0020c4  d009              BEQ      |L1.8410|
                  |L1.8390|
;;;3669   	{
;;;3670   	if(mess_data[1]==0) 		bdr_transmit_stat&=0xfd;
;;;3671   	else if(mess_data[1]==1) 	bdr_transmit_stat|=0x02;
;;;3672   	}
;;;3673   else 
;;;3674   	{
;;;3675   	if(bdr_avar_stat&0x01)  	bdr_transmit_stat|=0x02;
0020c6  7820              LDRB     r0,[r4,#0]  ; bdr_avar_stat
0020c8  07c0              LSLS     r0,r0,#31
0020ca  d019              BEQ      |L1.8448|
0020cc  f8990000          LDRB     r0,[r9,#0]  ; bdr_transmit_stat
0020d0  f0400002          ORR      r0,r0,#2
0020d4  f8890000          STRB     r0,[r9,#0]
0020d8  e018              B        |L1.8460|
                  |L1.8410|
0020da  6868              LDR      r0,[r5,#4]            ;3670  ; mess_data
0020dc  b110              CBZ      r0,|L1.8420|
0020de  2801              CMP      r0,#1                 ;3671
0020e0  d007              BEQ      |L1.8434|
0020e2  e013              B        |L1.8460|
                  |L1.8420|
0020e4  f8990000          LDRB     r0,[r9,#0]            ;3670  ; bdr_transmit_stat
0020e8  f00000fd          AND      r0,r0,#0xfd           ;3670
0020ec  f8890000          STRB     r0,[r9,#0]            ;3670
0020f0  e00c              B        |L1.8460|
                  |L1.8434|
0020f2  f8990000          LDRB     r0,[r9,#0]            ;3671  ; bdr_transmit_stat
0020f6  f0400002          ORR      r0,r0,#2              ;3671
0020fa  f8890000          STRB     r0,[r9,#0]            ;3671
0020fe  e005              B        |L1.8460|
                  |L1.8448|
;;;3676   	else 						bdr_transmit_stat&=0xfd;
002100  f8990000          LDRB     r0,[r9,#0]  ; bdr_transmit_stat
002104  f00000fd          AND      r0,r0,#0xfd
002108  f8890000          STRB     r0,[r9,#0]
                  |L1.8460|
;;;3677   	}	
;;;3678   	
;;;3679   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_BDR3))
00210c  20d2              MOVS     r0,#0xd2
00210e  f7fffffe          BL       mess_find_unvol
002112  b110              CBZ      r0,|L1.8474|
002114  6828              LDR      r0,[r5,#0]  ; mess_data
002116  2877              CMP      r0,#0x77
002118  d009              BEQ      |L1.8494|
                  |L1.8474|
;;;3680   	{
;;;3681   	if(mess_data[1]==0) 		bdr_transmit_stat&=0xfb;
;;;3682   	else if(mess_data[1]==1) 	bdr_transmit_stat|=0x04;
;;;3683   	}
;;;3684   else 
;;;3685   	{
;;;3686   	if(bdr_avar_stat&0x01)  	bdr_transmit_stat|=0x04;
00211a  7820              LDRB     r0,[r4,#0]  ; bdr_avar_stat
00211c  07c0              LSLS     r0,r0,#31
00211e  d019              BEQ      |L1.8532|
002120  f8990000          LDRB     r0,[r9,#0]  ; bdr_transmit_stat
002124  f0400004          ORR      r0,r0,#4
002128  f8890000          STRB     r0,[r9,#0]
00212c  e018              B        |L1.8544|
                  |L1.8494|
00212e  6868              LDR      r0,[r5,#4]            ;3681  ; mess_data
002130  b110              CBZ      r0,|L1.8504|
002132  2801              CMP      r0,#1                 ;3682
002134  d007              BEQ      |L1.8518|
002136  e013              B        |L1.8544|
                  |L1.8504|
002138  f8990000          LDRB     r0,[r9,#0]            ;3681  ; bdr_transmit_stat
00213c  f00000fb          AND      r0,r0,#0xfb           ;3681
002140  f8890000          STRB     r0,[r9,#0]            ;3681
002144  e00c              B        |L1.8544|
                  |L1.8518|
002146  f8990000          LDRB     r0,[r9,#0]            ;3682  ; bdr_transmit_stat
00214a  f0400004          ORR      r0,r0,#4              ;3682
00214e  f8890000          STRB     r0,[r9,#0]            ;3682
002152  e005              B        |L1.8544|
                  |L1.8532|
;;;3687   	else 						bdr_transmit_stat&=0xfb;
002154  f8990000          LDRB     r0,[r9,#0]  ; bdr_transmit_stat
002158  f00000fb          AND      r0,r0,#0xfb
00215c  f8890000          STRB     r0,[r9,#0]
                  |L1.8544|
;;;3688   	}	
;;;3689   	
;;;3690   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_BDR4))
002160  20d2              MOVS     r0,#0xd2
002162  f7fffffe          BL       mess_find_unvol
002166  b110              CBZ      r0,|L1.8558|
002168  6828              LDR      r0,[r5,#0]  ; mess_data
00216a  2878              CMP      r0,#0x78
00216c  d009              BEQ      |L1.8578|
                  |L1.8558|
;;;3691   	{
;;;3692   	if(mess_data[1]==0) 		bdr_transmit_stat&=0xf7;
;;;3693   	else if(mess_data[1]==1) 	bdr_transmit_stat|=0x08;
;;;3694   	}
;;;3695   else 
;;;3696   	{
;;;3697   	if(bdr_avar_stat&0x01)  	bdr_transmit_stat|=0x08;
00216e  7820              LDRB     r0,[r4,#0]  ; bdr_avar_stat
002170  07c0              LSLS     r0,r0,#31
002172  d019              BEQ      |L1.8616|
002174  f8990000          LDRB     r0,[r9,#0]  ; bdr_transmit_stat
002178  f0400008          ORR      r0,r0,#8
00217c  f8890000          STRB     r0,[r9,#0]
002180  e018              B        |L1.8628|
                  |L1.8578|
002182  6868              LDR      r0,[r5,#4]            ;3692  ; mess_data
002184  b110              CBZ      r0,|L1.8588|
002186  2801              CMP      r0,#1                 ;3693
002188  d007              BEQ      |L1.8602|
00218a  e013              B        |L1.8628|
                  |L1.8588|
00218c  f8990000          LDRB     r0,[r9,#0]            ;3692  ; bdr_transmit_stat
002190  f00000f7          AND      r0,r0,#0xf7           ;3692
002194  f8890000          STRB     r0,[r9,#0]            ;3692
002198  e00c              B        |L1.8628|
                  |L1.8602|
00219a  f8990000          LDRB     r0,[r9,#0]            ;3693  ; bdr_transmit_stat
00219e  f0400008          ORR      r0,r0,#8              ;3693
0021a2  f8890000          STRB     r0,[r9,#0]            ;3693
0021a6  e005              B        |L1.8628|
                  |L1.8616|
;;;3698   	else 						bdr_transmit_stat&=0xf7;
0021a8  f8990000          LDRB     r0,[r9,#0]  ; bdr_transmit_stat
0021ac  f00000f7          AND      r0,r0,#0xf7
0021b0  f8890000          STRB     r0,[r9,#0]
                  |L1.8628|
;;;3699   	}	
;;;3700   					 	
;;;3701   #endif
;;;3702   
;;;3703   #ifdef UKU_KONTUR
;;;3704   
;;;3705   //Ðåëå îáùåé àâàðèè
;;;3706   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_COMM))
;;;3707   	{
;;;3708   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_COMM,1);
;;;3709   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_COMM,1);
;;;3710   	}
;;;3711   else 
;;;3712   	{
;;;3713        if(  (!(avar_ind_stat&0x00007fff)) &&
;;;3714             ((!SK_REL_EN[0]) || (sk_av_stat[0]!=sasON))  &&
;;;3715             ((!SK_REL_EN[1]) || (sk_av_stat[1]!=sasON))  &&
;;;3716             ((!SK_REL_EN[2]) || (sk_av_stat[2]!=sasON))  /*&&
;;;3717             ((!SK_REL_EN[3]) || (sk_av_stat[3]!=sasON))*/  )SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_COMM,1);
;;;3718        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_COMM,1);
;;;3719   	}
;;;3720   
;;;3721   	
;;;3722   //rel_warm_plazma=0;
;;;3723   //Ðåëå îñâåùåíèÿ   
;;;3724   /*
;;;3725   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_WARM))
;;;3726   	{
;;;3727   	if(mess_data[1]==0)
;;;3728   		{
;;;3729   		SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_WARM,1);
;;;3730   		rel_warm_plazma=1;
;;;3731   		}
;;;3732   	else if(mess_data[1]==1) 
;;;3733   		{
;;;3734   		SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_WARM,1);
;;;3735   		rel_warm_plazma=2;
;;;3736   		}
;;;3737        }
;;;3738   else 
;;;3739   	{
;;;3740   	if(warm_stat_k==wsOFF) 
;;;3741   		{
;;;3742   		SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_WARM,1);
;;;3743   		rel_warm_plazma=3;
;;;3744   		}
;;;3745        else 
;;;3746   		{
;;;3747   		SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_WARM,1);
;;;3748   		rel_warm_plazma=4;
;;;3749   		}
;;;3750   	}
;;;3751   */
;;;3752   //Ðåëå îñâåùåíèÿ
;;;3753   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_LIGHT))
;;;3754   	{
;;;3755   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LIGHT,1);
;;;3756   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LIGHT,1);
;;;3757        }
;;;3758   else 
;;;3759   	{
;;;3760   	if(sk_av_stat[0]!=sasON) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LIGHT,1);
;;;3761        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LIGHT,1);
;;;3762   	}
;;;3763   
;;;3764   
;;;3765   
;;;3766   //Ðåëå âûêëþ÷åíèÿ íàãðóçêè
;;;3767   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_LOAD_OFF))
;;;3768   	{
;;;3769   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LOAD_OFF,1);
;;;3770   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LOAD_OFF,1);
;;;3771        }
;;;3772   else if(tloaddisable_cmnd==0)
;;;3773   	{
;;;3774   	SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LOAD_OFF,1);
;;;3775   	}
;;;3776   else if((tloaddisable_cmnd)&&(tloaddisable_cmnd<=11))
;;;3777   	{
;;;3778   	SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LOAD_OFF,1);
;;;3779   	}
;;;3780   
;;;3781   else 
;;;3782   	{
;;;3783   	if(!(tloaddisable_stat==tldsON)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LOAD_OFF,1);
;;;3784        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LOAD_OFF,1);
;;;3785   	} 
;;;3786   
;;;3787   //Ðåëå îñåâîãî âåíòèëÿòîðà èëè îòîïèòåëÿ
;;;3788   if(RELE_LOG)
;;;3789   	{
;;;3790   	if((mess_find_unvol(MESS2RELE_HNDL))&&(mess_data[0]==PARAM_RELE_VENT_WARM))
;;;3791   		{
;;;3792   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT_WARM,1);
;;;3793   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT_WARM,1);
;;;3794   		}
;;;3795   	else 
;;;3796   		{
;;;3797   		if(warm_stat_k==wsOFF) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT_WARM,1);
;;;3798   	     else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT_WARM,1);
;;;3799   		} 
;;;3800   
;;;3801   	}
;;;3802   else 
;;;3803   	{
;;;3804   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_VENT_WARM))
;;;3805   		{
;;;3806   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT_WARM,1);
;;;3807   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT_WARM,1);
;;;3808   		}
;;;3809   	else 
;;;3810   		{
;;;3811   		if(vent_stat_k==vsOFF) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT_WARM,1);
;;;3812   	     else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT_WARM,1);
;;;3813   		} 
;;;3814   	}
;;;3815   #endif
;;;3816   
;;;3817   
;;;3818   #ifdef UKU_TELECORE2015
;;;3819   //Ðåëå àâàðèè ñåòè
;;;3820   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_NET))
;;;3821   	{
;;;3822   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;3823   	else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_NET,1);
;;;3824   	}
;;;3825   else	if(!(avar_ind_stat&0x00000001)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;3826   else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_NET,1);
;;;3827   
;;;3828   
;;;3829   //Ðåëå îñâåùåíèÿ
;;;3830   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_LIGHT))
;;;3831   	{
;;;3832   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LIGHT,1);
;;;3833   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LIGHT,1);
;;;3834        }
;;;3835   else 
;;;3836   	{
;;;3837   	if(sk_av_stat[0]!=sasON) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LIGHT,1);
;;;3838        else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LIGHT,1);
;;;3839   	}
;;;3840   
;;;3841   //Ðåëå îòîïèòåëÿ
;;;3842   if((mess_find_unvol(MESS2RELE_HNDL))&&(mess_data[0]==PARAM_RELE_WARM))
;;;3843   	{
;;;3844   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_WARM,1);
;;;3845   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_WARM,1);
;;;3846   	}
;;;3847   else 
;;;3848   	{
;;;3849   	if(warm_stat_k==wsOFF) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_WARM,1);
;;;3850        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_WARM,1);
;;;3851   	} 
;;;3852   //Ðåëå âåíòèëÿòîðà
;;;3853   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_VENT))
;;;3854   	{
;;;3855   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT,1);
;;;3856   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;3857   	}
;;;3858   else 
;;;3859   	{
;;;3860   	if(vent_stat_k==vsOFF) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT,1);
;;;3861        else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;3862   	} 
;;;3863   
;;;3864   //Ðåëå âíóòðåííåãî âåíòèëÿòîðà
;;;3865   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_VVENT))
;;;3866   	{
;;;3867   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VVENT,1);
;;;3868   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VVENT,1);
;;;3869   	}
;;;3870   else 
;;;3871   	{
;;;3872   	if(vvent_stat_k==vsOFF) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VVENT,1);
;;;3873        else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VVENT,1);
;;;3874   	} 
;;;3875   
;;;3876   #endif
;;;3877   
;;;3878   #ifdef UKU_TELECORE2017
;;;3879   //Ðåëå àâàðèè ñåòè
;;;3880   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_NET))
;;;3881   	{
;;;3882   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;3883   	else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_NET,1);
;;;3884   	}
;;;3885   else	if(!(avar_ind_stat&0x00000001)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;3886   else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_NET,1);
;;;3887   
;;;3888   
;;;3889   //Ðåëå îñâåùåíèÿ
;;;3890   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_LIGHT))
;;;3891   	{
;;;3892   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LIGHT,1);
;;;3893   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LIGHT,1);
;;;3894        }
;;;3895   else 
;;;3896   	{
;;;3897   	if(sk_av_stat[0]!=sasON) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LIGHT,1);
;;;3898        else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LIGHT,1);
;;;3899   	}
;;;3900   
;;;3901   //Ðåëå îòîïèòåëÿ
;;;3902   if((mess_find_unvol(MESS2RELE_HNDL))&&(mess_data[0]==PARAM_RELE_WARM))
;;;3903   	{
;;;3904   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_WARM,1);
;;;3905   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_WARM,1);
;;;3906   	}
;;;3907   else 
;;;3908   	{
;;;3909   	if(warm_stat_k==wsOFF) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_WARM,1);
;;;3910        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_WARM,1);
;;;3911   	} 
;;;3912   //Ðåëå âåíòèëÿòîðà
;;;3913   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_VENT))
;;;3914   	{
;;;3915   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT,1);
;;;3916   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;3917   	}
;;;3918   else 
;;;3919   	{
;;;3920   	if(vent_stat_k==vsOFF) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT,1);
;;;3921        else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;3922   	} 
;;;3923   
;;;3924   //Ðåëå âíóòðåííåãî âåíòèëÿòîðà
;;;3925   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_VVENT))
;;;3926   	{
;;;3927   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VVENT,1);
;;;3928   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VVENT,1);
;;;3929   	}
;;;3930   else 
;;;3931   	{
;;;3932   	if(vvent_stat_k==vsOFF) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VVENT,1);
;;;3933        else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VVENT,1);
;;;3934   	} 
;;;3935   
;;;3936   //Ðåëå âûêëþ÷åíèÿ íàãðóçêè
;;;3937   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_LOAD_OFF))
;;;3938   	{
;;;3939   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LOAD_OFF,1);
;;;3940   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LOAD_OFF,1);
;;;3941        }
;;;3942   else if(tloaddisable_cmnd==0)
;;;3943   	{
;;;3944   	SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LOAD_OFF,1);
;;;3945   	}
;;;3946   else if((tloaddisable_cmnd)&&(tloaddisable_cmnd<=11))
;;;3947   	{
;;;3948   	SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LOAD_OFF,1);
;;;3949   	}
;;;3950   
;;;3951   else 
;;;3952   	{
;;;3953   	if(!(tloaddisable_stat==tldsON)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LOAD_OFF,1);
;;;3954        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LOAD_OFF,1);
;;;3955   	} 
;;;3956   
;;;3957   
;;;3958   #endif
;;;3959   
;;;3960   #ifdef IPS_SGEP_GAZPROM
;;;3961   rele_hndl_plazma[0]++;
;;;3962   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BPS))
;;;3963   	{
;;;3964   	rele_hndl_plazma[1]++;
;;;3965   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
;;;3966   	else/* if(mess_data[1]==1)*/ SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
;;;3967        }
;;;3968   else 
;;;3969   	{
;;;3970   	if(!(avar_ind_stat&0x000007f8)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
;;;3971        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
;;;3972   	} 
;;;3973   
;;;3974   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_NET))
;;;3975   	{
;;;3976   	rele_hndl_plazma[2]++;
;;;3977   	if(mess_data[1]==0) SET_REG(LPC_GPIO3->FIOSET,1,25,1);
;;;3978   	else SET_REG(LPC_GPIO3->FIOCLR,1,25,1);
;;;3979   	}
;;;3980   else	if(!(avar_ind_stat&0x00000001)) SET_REG(LPC_GPIO3->FIOCLR,1,25,1);
;;;3981   else SET_REG(LPC_GPIO3->FIOSET,1,25,1);
;;;3982   #endif
;;;3983   
;;;3984   if(NUMBDR==1)
0021b4  486f              LDR      r0,|L1.9076|
0021b6  8800              LDRH     r0,[r0,#0]  ; NUMBDR
0021b8  2801              CMP      r0,#1
0021ba  d17e              BNE      |L1.8890|
;;;3985   	{
;;;3986   	char ii_;
;;;3987   	char bdr_avar_stat_temp=0;
0021bc  f04f0000          MOV      r0,#0
;;;3988   	for	(ii_=0;ii_<4;ii_++)
0021c0  4601              MOV      r1,r0
;;;3989   		{
;;;3990   		//ÀÁ ðàçðÿæåíà
;;;3991   		if((RELE_SET_MASK[ii_]&0x01)&&
;;;3992   			(load_U<(USIGN*10)))			bdr_avar_stat_temp|=(1<<ii_);
;;;3993   		//Óñêîðåííûé çàðÿä
;;;3994   		if((RELE_SET_MASK[ii_]&0x02)&&
;;;3995   			(sp_ch_stat==scsWRK))			bdr_avar_stat_temp|=(1<<ii_);
;;;3996   		//Âûðàâíèâàþùèé çàðÿä
;;;3997   		if((RELE_SET_MASK[ii_]&0x04)&&
;;;3998   			(hv_vz_stat==scsWRK))			bdr_avar_stat_temp|=(1<<ii_);
;;;3999   		//Îáùàÿ àâàðèÿ ÇÂÓ
;;;4000   		if((RELE_SET_MASK[ii_]&0x08)&&
;;;4001   			(avar_stat))					bdr_avar_stat_temp|=(1<<ii_);
;;;4002   		//Uâûõ çàâûøåíî
;;;4003   		if((RELE_SET_MASK[ii_]&0x10)&&
;;;4004   			(uout_av==1))					bdr_avar_stat_temp|=(1<<ii_);
0021c2  f8dfa1b4          LDR      r10,|L1.9080|
;;;4005   		//Uâûõ çàíèæåíî
;;;4006   		if((RELE_SET_MASK[ii_]&0x20)&&
;;;4007   			(uout_av==2))					bdr_avar_stat_temp|=(1<<ii_);
;;;4008   		if((RELE_SET_MASK[ii_]&0x40)&&
;;;4009   			(
;;;4010   			((bps[0]._av&(1<<4))&&(NUMIST>=1))||
0021c6  f8df91b4          LDR      r9,|L1.9084|
0021ca  4d6d              LDR      r5,|L1.9088|
0021cc  f8dfb1b4          LDR      r11,|L1.9092|
0021d0  f04f0301          MOV      r3,#1                 ;2942
                  |L1.8660|
0021d4  f93b2011          LDRSH    r2,[r11,r1,LSL #1]    ;3991
0021d8  ea5f7cc2          LSLS     r12,r2,#31            ;3991
0021dc  d010              BEQ      |L1.8704|
0021de  f8dfc1a8          LDR      r12,|L1.9096|
0021e2  f9b8e000          LDRSH    lr,[r8,#0]            ;3992  ; load_U
0021e6  f9bcc000          LDRSH    r12,[r12,#0]          ;3992  ; USIGN
0021ea  eb0c0c8c          ADD      r12,r12,r12,LSL #2    ;3992
0021ee  ebbe0f4c          CMP      lr,r12,LSL #1         ;3992
0021f2  da05              BGE      |L1.8704|
0021f4  fa03fc01          LSL      r12,r3,r1             ;3992
0021f8  ea4c0c00          ORR      r12,r12,r0            ;3992
0021fc  f00c00ff          AND      r0,r12,#0xff          ;3992
                  |L1.8704|
002200  ea5f7c82          LSLS     r12,r2,#30            ;3994
002204  d50a              BPL      |L1.8732|
002206  f896c000          LDRB     r12,[r6,#0]           ;3995  ; sp_ch_stat
00220a  f1bc0f02          CMP      r12,#2                ;3995
00220e  d105              BNE      |L1.8732|
002210  fa03fc01          LSL      r12,r3,r1             ;3995
002214  ea4c0c00          ORR      r12,r12,r0            ;3995
002218  f00c00ff          AND      r0,r12,#0xff          ;3995
                  |L1.8732|
00221c  ea5f7c42          LSLS     r12,r2,#29            ;3997
002220  d50a              BPL      |L1.8760|
002222  f897c000          LDRB     r12,[r7,#0]           ;3998  ; hv_vz_stat
002226  f1bc0f02          CMP      r12,#2                ;3998
00222a  d105              BNE      |L1.8760|
00222c  fa03fc01          LSL      r12,r3,r1             ;3998
002230  ea4c0c00          ORR      r12,r12,r0            ;3998
002234  f00c00ff          AND      r0,r12,#0xff          ;3998
                  |L1.8760|
002238  ea5f7c02          LSLS     r12,r2,#28            ;4000
00223c  d50c              BPL      |L1.8792|
00223e  f8dfc14c          LDR      r12,|L1.9100|
002242  f8dcc000          LDR      r12,[r12,#0]          ;4001  ; avar_stat
002246  f1bc0f00          CMP      r12,#0                ;4001
00224a  d005              BEQ      |L1.8792|
00224c  fa03fc01          LSL      r12,r3,r1             ;4001
002250  ea4c0c00          ORR      r12,r12,r0            ;4001
002254  f00c00ff          AND      r0,r12,#0xff          ;4001
                  |L1.8792|
002258  ea5f6cc2          LSLS     r12,r2,#27            ;4003
00225c  d50a              BPL      |L1.8820|
00225e  f89ac000          LDRB     r12,[r10,#0]          ;4004  ; uout_av
002262  f1bc0f01          CMP      r12,#1                ;4004
002266  d105              BNE      |L1.8820|
002268  fa03fc01          LSL      r12,r3,r1             ;4004
00226c  ea4c0c00          ORR      r12,r12,r0            ;4004
002270  f00c00ff          AND      r0,r12,#0xff          ;4004
                  |L1.8820|
002274  ea5f6c82          LSLS     r12,r2,#26            ;4006
002278  d50a              BPL      |L1.8848|
00227a  f89ac000          LDRB     r12,[r10,#0]          ;4007  ; uout_av
00227e  f1bc0f02          CMP      r12,#2                ;4007
002282  d105              BNE      |L1.8848|
002284  fa03fc01          LSL      r12,r3,r1             ;4007
002288  ea4c0c00          ORR      r12,r12,r0            ;4007
00228c  f00c00ff          AND      r0,r12,#0xff          ;4007
                  |L1.8848|
002290  ea5f6c42          LSLS     r12,r2,#25            ;4008
002294  d525              BPL      |L1.8930|
002296  f899c001          LDRB     r12,[r9,#1]  ; bps
00229a  ea5f6ccc          LSLS     r12,r12,#27
00229e  d504              BPL      |L1.8874|
0022a0  f9b5c000          LDRSH    r12,[r5,#0]  ; NUMIST
0022a4  f1bc0f01          CMP      r12,#1
0022a8  da15              BGE      |L1.8918|
                  |L1.8874|
;;;4011   			((bps[1]._av&(1<<4))&&(NUMIST>=2))||
0022aa  f899c05d          LDRB     r12,[r9,#0x5d]  ; bps
0022ae  ea5f6ccc          LSLS     r12,r12,#27
0022b2  d506              BPL      |L1.8898|
0022b4  f9b5c000          LDRSH    r12,[r5,#0]  ; NUMIST
0022b8  e000              B        |L1.8892|
                  |L1.8890|
0022ba  e047              B        |L1.9036|
                  |L1.8892|
0022bc  f1bc0f02          CMP      r12,#2
0022c0  da09              BGE      |L1.8918|
                  |L1.8898|
;;;4012   			((bps[2]._av&(1<<4))&&(NUMIST>=3))
0022c2  f899c0b9          LDRB     r12,[r9,#0xb9]  ; bps
0022c6  ea5f6ccc          LSLS     r12,r12,#27
0022ca  d50a              BPL      |L1.8930|
0022cc  f9b5c000          LDRSH    r12,[r5,#0]  ; NUMIST
0022d0  f1bc0f03          CMP      r12,#3
0022d4  db05              BLT      |L1.8930|
                  |L1.8918|
;;;4013   			))bdr_avar_stat_temp|=(1<<ii_);
0022d6  fa03fc01          LSL      r12,r3,r1
0022da  ea4c0c00          ORR      r12,r12,r0
0022de  f00c00ff          AND      r0,r12,#0xff
                  |L1.8930|
;;;4014   		if((RELE_SET_MASK[ii_]&0x80)&&
0022e2  ea5f6c02          LSLS     r12,r2,#24
0022e6  d523              BPL      |L1.9008|
;;;4015   			(
;;;4016   			((bps[0]._av&(0x0f))&&(NUMIST>=1))||
0022e8  f899c001          LDRB     r12,[r9,#1]  ; bps
0022ec  ea5f7c0c          LSLS     r12,r12,#28
0022f0  d004              BEQ      |L1.8956|
0022f2  f9b5c000          LDRSH    r12,[r5,#0]  ; NUMIST
0022f6  f1bc0f01          CMP      r12,#1
0022fa  da13              BGE      |L1.8996|
                  |L1.8956|
;;;4017   			((bps[1]._av&(0x0f))&&(NUMIST>=2))||
0022fc  f899c05d          LDRB     r12,[r9,#0x5d]  ; bps
002300  ea5f7c0c          LSLS     r12,r12,#28
002304  d004              BEQ      |L1.8976|
002306  f9b5c000          LDRSH    r12,[r5,#0]  ; NUMIST
00230a  f1bc0f02          CMP      r12,#2
00230e  da09              BGE      |L1.8996|
                  |L1.8976|
;;;4018   			((bps[2]._av&(0x0f))&&(NUMIST>=3))
002310  f899c0b9          LDRB     r12,[r9,#0xb9]  ; bps
002314  ea5f7c0c          LSLS     r12,r12,#28
002318  d00a              BEQ      |L1.9008|
00231a  f9b5c000          LDRSH    r12,[r5,#0]  ; NUMIST
00231e  f1bc0f03          CMP      r12,#3
002322  db05              BLT      |L1.9008|
                  |L1.8996|
;;;4019   			))bdr_avar_stat_temp|=(1<<ii_);
002324  fa03fc01          LSL      r12,r3,r1
002328  ea4c0c00          ORR      r12,r12,r0
00232c  f00c00ff          AND      r0,r12,#0xff
                  |L1.9008|
;;;4020   
;;;4021   		if(!(RELE_SET_MASK[ii_]&(1<<15))) bdr_avar_stat_temp^=(1<<ii_); 
002330  0412              LSLS     r2,r2,#16
002332  d404              BMI      |L1.9022|
002334  fa03f201          LSL      r2,r3,r1
002338  ea820200          EOR      r2,r2,r0
00233c  b2d0              UXTB     r0,r2
                  |L1.9022|
00233e  f1010101          ADD      r1,r1,#1              ;3988
002342  b2c9              UXTB     r1,r1                 ;3988
002344  2904              CMP      r1,#4                 ;3988
002346  f4ffaf45          BCC      |L1.8660|
;;;4022   		}
;;;4023   	bdr_avar_stat=bdr_avar_stat_temp;
00234a  7020              STRB     r0,[r4,#0]
                  |L1.9036|
;;;4024   	}
;;;4025   }
00234c  e8bd9ff0          POP      {r4-r12,pc}
                  |L1.9040|
                          DCD      load_U
                  |L1.9044|
                          DCD      sp_ch_stat
                  |L1.9048|
                          DCD      hv_vz_stat
                  |L1.9052|
                          DCD      DOP_RELE_FUNC
                  |L1.9056|
                          DCD      speedChIsOn
                  |L1.9060|
                          DCD      ||area_number.23||
                  |L1.9064|
                          DCD      UVENTOFF
                  |L1.9068|
                          DCD      bdr_transmit_stat
                  |L1.9072|
                          DCD      bdr_avar_stat
                  |L1.9076|
                          DCD      NUMBDR
                  |L1.9080|
                          DCD      uout_av
                  |L1.9084|
                          DCD      bps
                  |L1.9088|
                          DCD      NUMIST
                  |L1.9092|
                          DCD      RELE_SET_MASK
                  |L1.9096|
                          DCD      USIGN
                  |L1.9100|
                          DCD      avar_stat
                          ENDP

                  bps_hndl PROC
;;;4028   //-----------------------------------------------
;;;4029   void bps_hndl(void)
002390  e92d5ff0          PUSH     {r4-r12,lr}
;;;4030   {
;;;4031   char ptr__,i;
;;;4032   unsigned short tempUS;
;;;4033   
;;;4034   if(sh_cnt0<10)
002394  4eff              LDR      r6,|L1.10132|
;;;4035   	{
;;;4036   	sh_cnt0++;
;;;4037   	if(sh_cnt0>=10)
;;;4038   		{
;;;4039   		sh_cnt0=0;
002396  2700              MOVS     r7,#0
;;;4040   		b1Hz_sh=1;
002398  f04f0a01          MOV      r10,#1
00239c  7cb0              LDRB     r0,[r6,#0x12]         ;4034  ; sh_cnt0
00239e  280a              CMP      r0,#0xa               ;4034
0023a0  d208              BCS      |L1.9140|
0023a2  f1000001          ADD      r0,r0,#1              ;4036
0023a6  b2c0              UXTB     r0,r0                 ;4036
0023a8  74b0              STRB     r0,[r6,#0x12]         ;4036
0023aa  280a              CMP      r0,#0xa               ;4037
0023ac  d302              BCC      |L1.9140|
0023ae  74b7              STRB     r7,[r6,#0x12]         ;4039
0023b0  f886a013          STRB     r10,[r6,#0x13]
                  |L1.9140|
;;;4041   		}
;;;4042   	}
;;;4043   
;;;4044   /*if(sh_cnt1<5)
;;;4045   	{
;;;4046   	sh_cnt1++;
;;;4047   	if(sh_cnt1==5)
;;;4048   		{
;;;4049   		sh_cnt1=0;
;;;4050   		b2Hz_sh=1;
;;;4051   		}
;;;4052   	} */
;;;4053   
;;;4054   
;;;4055   /*
;;;4056   if(mess_find(MESS_SRC_ON_OFF))
;;;4057   	{
;;;4058   	if(mess_data[0]==_MESS_SRC_MASK_BLOK_2SEC)
;;;4059   		{
;;;4060   		char i;
;;;4061   		for(i=0;i<NUMIST;i++)
;;;4062   			{
;;;4063   			if(mess_data[1]&(1<<i))src[i]._ist_blok_cnt=20;
;;;4064   			}
;;;4065   		
;;;4066   		}
;;;4067   	else if(mess_data[0]==_MESS_SRC_MASK_UNBLOK)
;;;4068   		{
;;;4069   		char i;
;;;4070   		for(i=0;i<NUMIST;i++)
;;;4071   			{
;;;4072   			if(mess_data[1]&(1<<i))src[i]._ist_blok_cnt=0;
;;;4073   			}
;;;4074   		
;;;4075   		}
;;;4076   	}
;;;4077   	
;;;4078   else if(mess_find(_MESS_SRC_MASK_ON))
;;;4079   	{				
;;;4080   	if(mess_data[0]==_MESS_SRC_MASK_ON)
;;;4081   		{
;;;4082   		char i;
;;;4083   		for(i=0;i<NUMIST;i++)
;;;4084   			{
;;;4085   			if(mess_data[1]&(1<<i))
;;;4086   				{
;;;4087   				src[i]._ist_blok_cnt=0;
;;;4088   				src[i]._flags_tu=2;
;;;4089   				}
;;;4090   			}
;;;4091   		
;;;4092   		}				
;;;4093   	}*/
;;;4094   
;;;4095   
;;;4096   
;;;4097   /*else*/ 
;;;4098   bps_on_mask=0;
0023b4  f8a6704c          STRH     r7,[r6,#0x4c]
;;;4099   bps_off_mask=0;
0023b8  f8a6704e          STRH     r7,[r6,#0x4e]
;;;4100   
;;;4101   if(mess_find_unvol(MESS2BPS_HNDL))
0023bc  20cd              MOVS     r0,#0xcd
0023be  f7fffffe          BL       mess_find_unvol
;;;4102   	{
;;;4103   	if(mess_data[0]==PARAM_BPS_ALL_OFF_AFTER_2SEC)
;;;4104   		{
;;;4105   		bps_off_mask=0xffff;
;;;4106   		}
;;;4107   
;;;4108   	if(mess_data[0]==PARAM_BPS_MASK_OFF_AFTER_2SEC)
;;;4109   		{
;;;4110   		bps_off_mask=mess_data[1];
;;;4111   		}
;;;4112   
;;;4113   	if(mess_data[0]==PARAM_BPS_MASK_ON)
;;;4114   		{
;;;4115   		bps_on_mask=mess_data[1];
;;;4116   		}
;;;4117   
;;;4118   	if(mess_data[0]==PARAM_BPS_ALL_ON)
;;;4119   		{
;;;4120   		bps_on_mask=0xffff;
;;;4121   		}
;;;4122   
;;;4123   	if(mess_data[0]==PARAM_BPS_MASK_ON_OFF_AFTER_2SEC)
;;;4124   		{
;;;4125   		bps_on_mask=mess_data[1];
;;;4126   		bps_off_mask=~(mess_data[1]);
;;;4127   		}
;;;4128   
;;;4129   
;;;4130   	for(i=0;i<=NUMIST;i++)
;;;4131   		{
;;;4132   		if(bps_off_mask&(1<<i)) bps[i]._blok_cnt++;
0023c2  f8df83d4          LDR      r8,|L1.10136|
0023c6  f8dfb3d4          LDR      r11,|L1.10140|
0023ca  b3a0              CBZ      r0,|L1.9270|
0023cc  4af4              LDR      r2,|L1.10144|
0023ce  f64f73ff          MOV      r3,#0xffff            ;4105
0023d2  6810              LDR      r0,[r2,#0]            ;4103  ; mess_data
0023d4  28ce              CMP      r0,#0xce              ;4103
0023d6  d101              BNE      |L1.9180|
0023d8  f8a6304e          STRH     r3,[r6,#0x4e]         ;4105
                  |L1.9180|
0023dc  28cf              CMP      r0,#0xcf              ;4108
0023de  d102              BNE      |L1.9190|
0023e0  6851              LDR      r1,[r2,#4]            ;4110  ; mess_data
0023e2  f8a6104e          STRH     r1,[r6,#0x4e]         ;4110
                  |L1.9190|
0023e6  28d1              CMP      r0,#0xd1              ;4113
0023e8  d102              BNE      |L1.9200|
0023ea  6851              LDR      r1,[r2,#4]            ;4115  ; mess_data
0023ec  f8a6104c          STRH     r1,[r6,#0x4c]         ;4115
                  |L1.9200|
0023f0  28d2              CMP      r0,#0xd2              ;4118
0023f2  d101              BNE      |L1.9208|
0023f4  f8a6304c          STRH     r3,[r6,#0x4c]         ;4120
                  |L1.9208|
0023f8  28d0              CMP      r0,#0xd0              ;4123
0023fa  d106              BNE      |L1.9226|
0023fc  6850              LDR      r0,[r2,#4]            ;4125  ; mess_data
0023fe  f8a6004c          STRH     r0,[r6,#0x4c]         ;4125
002402  ea6f0000          MVN      r0,r0                 ;4126
002406  f8a6004e          STRH     r0,[r6,#0x4e]         ;4126
                  |L1.9226|
00240a  f04f0400          MOV      r4,#0                 ;4130
00240e  e037              B        |L1.9344|
                  |L1.9232|
002410  f8b6004e          LDRH     r0,[r6,#0x4e]  ; bps_off_mask
002414  fa0af904          LSL      r9,r10,r4
002418  ea190f00          TST      r9,r0
00241c  d00c              BEQ      |L1.9272|
00241e  ebc400c4          RSB      r0,r4,r4,LSL #3
002422  eb001004          ADD      r0,r0,r4,LSL #4
002426  eb080080          ADD      r0,r8,r0,LSL #2
00242a  f8301f40          LDRH     r1,[r0,#0x40]!
00242e  f1010101          ADD      r1,r1,#1
002432  8001              STRH     r1,[r0,#0]
002434  e008              B        |L1.9288|
                  |L1.9270|
002436  e028              B        |L1.9354|
                  |L1.9272|
;;;4133   		else bps[i]._blok_cnt=0;
002438  ebc400c4          RSB      r0,r4,r4,LSL #3
00243c  eb001004          ADD      r0,r0,r4,LSL #4
002440  eb080080          ADD      r0,r8,r0,LSL #2
002444  f8a07040          STRH     r7,[r0,#0x40]
                  |L1.9288|
;;;4134   		gran(&bps[i]._blok_cnt,0,50);
002448  ebc400c4          RSB      r0,r4,r4,LSL #3
00244c  eb001004          ADD      r0,r0,r4,LSL #4
002450  eb080580          ADD      r5,r8,r0,LSL #2
002454  f1050040          ADD      r0,r5,#0x40
002458  2232              MOVS     r2,#0x32
00245a  2100              MOVS     r1,#0
00245c  f7fffffe          BL       gran
;;;4135   		if(bps[i]._blok_cnt>20) bps[i]._flags_tu=1;
002460  f9b50040          LDRSH    r0,[r5,#0x40]
002464  2814              CMP      r0,#0x14
002466  dd01              BLE      |L1.9324|
002468  f885a02c          STRB     r10,[r5,#0x2c]
                  |L1.9324|
;;;4136   		if(bps_on_mask&(1<<i)) bps[i]._flags_tu=0;
00246c  f8b6004c          LDRH     r0,[r6,#0x4c]  ; bps_on_mask
002470  ea190f00          TST      r9,r0
002474  d001              BEQ      |L1.9338|
002476  f885702c          STRB     r7,[r5,#0x2c]
                  |L1.9338|
00247a  f1040401          ADD      r4,r4,#1              ;4130
00247e  b2e4              UXTB     r4,r4                 ;4130
                  |L1.9344|
002480  f9bb0000          LDRSH    r0,[r11,#0]           ;4130  ; NUMIST
002484  4284              CMP      r4,r0                 ;4130
002486  ddc3              BLE      |L1.9232|
002488  e08a              B        |L1.9632|
                  |L1.9354|
;;;4137   	     }
;;;4138   
;;;4139   	
;;;4140   /*
;;;4141   
;;;4142   	if(bps_all_off_cnt>20)
;;;4143   		{
;;;4144   		for(i=0;i<=NUMIST;i++)
;;;4145   			{
;;;4146   	     	bps[i]._flags_tu=1;
;;;4147   	     	}
;;;4148   		}
;;;4149   	else if(bps_mask_off_cnt>20)
;;;4150   		{
;;;4151   		for(i=0;i<=NUMIST;i++)
;;;4152   			{
;;;4153   			if(mess_data[1]&(1<<i)) bps[i]._flags_tu=1;
;;;4154   	     	}
;;;4155   		}	
;;;4156   		
;;;4157   	else if(bps_mask_on_off_cnt>20)
;;;4158   		{
;;;4159   		for(i=0;i<=NUMIST;i++)
;;;4160   			{
;;;4161   			if(mess_data[1]&(1<<i)) bps[i]._flags_tu=1;
;;;4162   			else bps[i]._flags_tu=0;
;;;4163   	     	}
;;;4164   		}
;;;4165   		
;;;4166   	if(mess_data[0]==PARAM_BPS_MASK_ON)
;;;4167   		{
;;;4168   		for(i=0;i<=NUMIST;i++)
;;;4169   			{
;;;4170   			if(mess_data[1]&(1<<i)) bps[i]._flags_tu=0;
;;;4171   	     	}
;;;4172   		}
;;;4173   */										
;;;4174   	}
;;;4175   
;;;4176   
;;;4177   else if(b1Hz_sh)
00248a  7cf0              LDRB     r0,[r6,#0x13]  ; b1Hz_sh
00248c  b3f0              CBZ      r0,|L1.9484|
;;;4178   	{
;;;4179   	ptr__=0;
00248e  f04f0400          MOV      r4,#0
;;;4180        for(i=0;i<=NUMIST;i++)
002492  4621              MOV      r1,r4
002494  f9bb0000          LDRSH    r0,[r11,#0]           ;4130
002498  e00a              B        |L1.9392|
                  |L1.9370|
;;;4181   		{
;;;4182   	     bps[i]._flags_tu=1;
00249a  ebc102c1          RSB      r2,r1,r1,LSL #3
00249e  eb021201          ADD      r2,r2,r1,LSL #4
0024a2  eb080282          ADD      r2,r8,r2,LSL #2
0024a6  f882a02c          STRB     r10,[r2,#0x2c]
0024aa  f1010101          ADD      r1,r1,#1              ;4180
0024ae  b2c9              UXTB     r1,r1                 ;4180
                  |L1.9392|
0024b0  4281              CMP      r1,r0                 ;4180
0024b2  ddf2              BLE      |L1.9370|
;;;4183   	     }	
;;;4184     	     
;;;4185     	for(i=0;(i<NUMIST)&&(ptr__<num_necc);i++)
0024b4  f04f0100          MOV      r1,#0
0024b8  e022              B        |L1.9472|
                  |L1.9402|
;;;4186     		{
;;;4187   		char ii,iii;
;;;4188   
;;;4189   		ii=(char)NUMIST;
0024ba  b2c2              UXTB     r2,r0
;;;4190   		//if(ii<0)ii=0;
;;;4191   		if(ii>32)ii=32;
0024bc  2a20              CMP      r2,#0x20
0024be  d901              BLS      |L1.9412|
0024c0  f04f0220          MOV      r2,#0x20
                  |L1.9412|
;;;4192   		iii=numOfForvardBps;
0024c4  7e73              LDRB     r3,[r6,#0x19]  ; numOfForvardBps
;;;4193   		//if(iii<0)iii=0;
;;;4194   		if(iii>=NUMIST)iii=0;
0024c6  4283              CMP      r3,r0
0024c8  db01              BLT      |L1.9422|
0024ca  f04f0300          MOV      r3,#0
                  |L1.9422|
;;;4195   		iii+=i;
0024ce  440b              ADD      r3,r3,r1
0024d0  b2db              UXTB     r3,r3
;;;4196   		iii=iii%ii;
0024d2  fbb3f5f2          UDIV     r5,r3,r2
0024d6  fb023215          MLS      r2,r2,r5,r3
;;;4197   		
;;;4198     	     if((bps[iii]._state==bsRDY)||(bps[iii]._state==bsWRK))
0024da  ebc203c2          RSB      r3,r2,r2,LSL #3
0024de  eb031202          ADD      r2,r3,r2,LSL #4
0024e2  eb080282          ADD      r2,r8,r2,LSL #2
0024e6  7893              LDRB     r3,[r2,#2]
0024e8  2b02              CMP      r3,#2
0024ea  d001              BEQ      |L1.9456|
0024ec  2b01              CMP      r3,#1
0024ee  d104              BNE      |L1.9466|
                  |L1.9456|
;;;4199     	         	{
;;;4200     	         	bps[iii]._flags_tu=0;
0024f0  f882702c          STRB     r7,[r2,#0x2c]
;;;4201     	         	ptr__++;
0024f4  f1040401          ADD      r4,r4,#1
0024f8  b2e4              UXTB     r4,r4
                  |L1.9466|
0024fa  f1010101          ADD      r1,r1,#1              ;4185
0024fe  b2c9              UXTB     r1,r1                 ;4185
                  |L1.9472|
002500  4281              CMP      r1,r0                 ;4185
002502  da06              BGE      |L1.9490|
002504  4aa7              LDR      r2,|L1.10148|
002506  f9b22000          LDRSH    r2,[r2,#0]            ;4185  ; num_necc
00250a  e000              B        |L1.9486|
                  |L1.9484|
00250c  e048              B        |L1.9632|
                  |L1.9486|
00250e  4294              CMP      r4,r2                 ;4185
002510  dbd3              BLT      |L1.9402|
                  |L1.9490|
;;;4202     	         	}
;;;4203   			
;;;4204     	     }
;;;4205   	bps[numOfForvardBps_old]._flags_tu=0;
002512  7eb1              LDRB     r1,[r6,#0x1a]  ; numOfForvardBps_old
002514  ebc102c1          RSB      r2,r1,r1,LSL #3
002518  eb021101          ADD      r1,r2,r1,LSL #4
00251c  eb080181          ADD      r1,r8,r1,LSL #2
002520  f881702c          STRB     r7,[r1,#0x2c]
;;;4206   
;;;4207   	if(main_1Hz_cnt<60)
002524  49a0              LDR      r1,|L1.10152|
002526  f9b11000          LDRSH    r1,[r1,#0]  ; main_1Hz_cnt
00252a  293c              CMP      r1,#0x3c
00252c  da0f              BGE      |L1.9550|
;;;4208   		{
;;;4209        	for(i=0;i<=NUMIST;i++)
00252e  f04f0100          MOV      r1,#0
002532  e00a              B        |L1.9546|
                  |L1.9524|
;;;4210   			{
;;;4211   	     	bps[i]._flags_tu=0;
002534  ebc102c1          RSB      r2,r1,r1,LSL #3
002538  eb021201          ADD      r2,r2,r1,LSL #4
00253c  eb080282          ADD      r2,r8,r2,LSL #2
002540  f882702c          STRB     r7,[r2,#0x2c]
002544  f1010101          ADD      r1,r1,#1              ;4209
002548  b2c9              UXTB     r1,r1                 ;4209
                  |L1.9546|
00254a  4281              CMP      r1,r0                 ;4209
00254c  ddf2              BLE      |L1.9524|
                  |L1.9550|
;;;4212   	     	}	
;;;4213   		}
;;;4214   	if(ipsBlckStat)
00254e  4997              LDR      r1,|L1.10156|
002550  8809              LDRH     r1,[r1,#0]  ; ipsBlckStat
002552  b179              CBZ      r1,|L1.9588|
;;;4215   		{
;;;4216        	for(i=0;i<=NUMIST;i++)
002554  f04f0100          MOV      r1,#0
002558  e00a              B        |L1.9584|
                  |L1.9562|
;;;4217   			{
;;;4218   	     	bps[i]._flags_tu=1;
00255a  ebc102c1          RSB      r2,r1,r1,LSL #3
00255e  eb021201          ADD      r2,r2,r1,LSL #4
002562  eb080282          ADD      r2,r8,r2,LSL #2
002566  f882a02c          STRB     r10,[r2,#0x2c]
00256a  f1010101          ADD      r1,r1,#1              ;4216
00256e  b2c9              UXTB     r1,r1                 ;4216
                  |L1.9584|
002570  4281              CMP      r1,r0                 ;4216
002572  ddf2              BLE      |L1.9562|
                  |L1.9588|
;;;4219   	     	}
;;;4220   		}
;;;4221   
;;;4222        for(i=0;i<=NUMIST;i++)
002574  f04f0100          MOV      r1,#0
;;;4223   		{
;;;4224   	    if(bps[i]._flags_tu==1) 	bps[i]._x_=-50;
002578  f06f0331          MVN      r3,#0x31
00257c  e00e              B        |L1.9628|
                  |L1.9598|
00257e  ebc102c1          RSB      r2,r1,r1,LSL #3
002582  eb021201          ADD      r2,r2,r1,LSL #4
002586  eb080282          ADD      r2,r8,r2,LSL #2
00258a  f892402c          LDRB     r4,[r2,#0x2c]
00258e  2c01              CMP      r4,#1
002590  d101              BNE      |L1.9622|
002592  f8a23050          STRH     r3,[r2,#0x50]
                  |L1.9622|
002596  f1010101          ADD      r1,r1,#1              ;4222
00259a  b2c9              UXTB     r1,r1                 ;4222
                  |L1.9628|
00259c  4281              CMP      r1,r0                 ;4222
00259e  ddee              BLE      |L1.9598|
                  |L1.9632|
;;;4225   	   	}	
;;;4226   		 
;;;4227     	}
;;;4228   
;;;4229   
;;;4230   for(i=0;i<NUMIST;i++)
0025a0  f04f0000          MOV      r0,#0
;;;4231        {
;;;4232        if(bps[i]._ist_blok_host_cnt!=0)
;;;4233             {
;;;4234             bps[i]._flags_tu=99;
0025a4  f04f0463          MOV      r4,#0x63
0025a8  f9bb1000          LDRSH    r1,[r11,#0]           ;4130
0025ac  e00f              B        |L1.9678|
                  |L1.9646|
0025ae  ebc002c0          RSB      r2,r0,r0,LSL #3       ;4232
0025b2  eb021200          ADD      r2,r2,r0,LSL #4       ;4232
0025b6  eb080282          ADD      r2,r8,r2,LSL #2       ;4232
0025ba  6bd3              LDR      r3,[r2,#0x3c]         ;4232
0025bc  b123              CBZ      r3,|L1.9672|
0025be  f882402c          STRB     r4,[r2,#0x2c]
;;;4235   	     bps[i]._ist_blok_host_cnt--;
0025c2  f1a30301          SUB      r3,r3,#1
0025c6  63d3              STR      r3,[r2,#0x3c]
                  |L1.9672|
0025c8  f1000001          ADD      r0,r0,#1              ;4230
0025cc  b2c0              UXTB     r0,r0                 ;4230
                  |L1.9678|
0025ce  4288              CMP      r0,r1                 ;4230
0025d0  dbed              BLT      |L1.9646|
;;;4236             }
;;;4237        }
;;;4238   
;;;4239   
;;;4240   
;;;4241   
;;;4242   b1Hz_sh=0;
0025d2  74f7              STRB     r7,[r6,#0x13]
;;;4243   
;;;4244   
;;;4245   num_of_wrks_bps=0;
0025d4  73f7              STRB     r7,[r6,#0xf]
;;;4246   tempUS=0;
0025d6  f04f0200          MOV      r2,#0
;;;4247   for(i=0;i<NUMIST;i++)
0025da  4610              MOV      r0,r2
0025dc  e013              B        |L1.9734|
                  |L1.9694|
;;;4248   	{
;;;4249   	if(bps[i]._state==bsWRK)
0025de  ebc003c0          RSB      r3,r0,r0,LSL #3
0025e2  eb031300          ADD      r3,r3,r0,LSL #4
0025e6  eb080383          ADD      r3,r8,r3,LSL #2
0025ea  789c              LDRB     r4,[r3,#2]
0025ec  2c01              CMP      r4,#1
0025ee  d107              BNE      |L1.9728|
;;;4250   		{
;;;4251   		num_of_wrks_bps++;
0025f0  7bf4              LDRB     r4,[r6,#0xf]  ; num_of_wrks_bps
0025f2  f1040401          ADD      r4,r4,#1
0025f6  73f4              STRB     r4,[r6,#0xf]
;;;4252   		if(bps[i]._Uii>tempUS)tempUS=bps[i]._Uii;
0025f8  69db              LDR      r3,[r3,#0x1c]
0025fa  4293              CMP      r3,r2
0025fc  dd00              BLE      |L1.9728|
0025fe  b29a              UXTH     r2,r3
                  |L1.9728|
002600  f1000001          ADD      r0,r0,#1              ;4247
002604  b2c0              UXTB     r0,r0                 ;4247
                  |L1.9734|
002606  4288              CMP      r0,r1                 ;4247
002608  dbe9              BLT      |L1.9694|
;;;4253   		}
;;;4254   	}
;;;4255   Ubpsmax=tempUS;
00260a  87b2              STRH     r2,[r6,#0x3c]
;;;4256   
;;;4257   bPARALLEL_ENOUG=0;
00260c  7777              STRB     r7,[r6,#0x1d]
;;;4258   bPARALLEL_NOT_ENOUG=1;
00260e  f886a01c          STRB     r10,[r6,#0x1c]
;;;4259   
;;;4260   for(i=0;i<NUMIST;i++)
002612  f04f0000          MOV      r0,#0
;;;4261   	{
;;;4262   	if(bps[i]._Ti>=TSIGN)
002616  4a66              LDR      r2,|L1.10160|
002618  f9b23000          LDRSH    r3,[r2,#0]
;;;4263   		{
;;;4264   		bPARALLEL_ENOUG=1;
;;;4265   		}
;;;4266   	if(bps[i]._Ti>=(TSIGN-5))
00261c  f1a30405          SUB      r4,r3,#5
002620  e010              B        |L1.9796|
                  |L1.9762|
002622  ebc002c0          RSB      r2,r0,r0,LSL #3       ;4262
002626  eb021200          ADD      r2,r2,r0,LSL #4       ;4262
00262a  eb080282          ADD      r2,r8,r2,LSL #2       ;4262
00262e  6a92              LDR      r2,[r2,#0x28]         ;4262
002630  429a              CMP      r2,r3                 ;4262
002632  db01              BLT      |L1.9784|
002634  f886a01d          STRB     r10,[r6,#0x1d]        ;4264
                  |L1.9784|
002638  42a2              CMP      r2,r4
00263a  db00              BLT      |L1.9790|
;;;4267   		{
;;;4268   		bPARALLEL_NOT_ENOUG=0;
00263c  7737              STRB     r7,[r6,#0x1c]
                  |L1.9790|
00263e  f1000001          ADD      r0,r0,#1              ;4260
002642  b2c0              UXTB     r0,r0                 ;4260
                  |L1.9796|
002644  4288              CMP      r0,r1                 ;4260
002646  dbec              BLT      |L1.9762|
;;;4269   		}
;;;4270   	}
;;;4271   
;;;4272   if(bPARALLEL_ENOUG==1)
002648  7f70              LDRB     r0,[r6,#0x1d]  ; bPARALLEL_ENOUG
00264a  2801              CMP      r0,#1
00264c  d007              BEQ      |L1.9822|
;;;4273   	{
;;;4274   	bPARALLEL=1;
;;;4275   	}
;;;4276   else if(bPARALLEL && bPARALLEL_NOT_ENOUG)
00264e  7fb0              LDRB     r0,[r6,#0x1e]  ; bPARALLEL
002650  2800              CMP      r0,#0
002652  d003              BEQ      |L1.9820|
002654  7f30              LDRB     r0,[r6,#0x1c]  ; bPARALLEL_NOT_ENOUG
002656  2800              CMP      r0,#0
002658  d000              BEQ      |L1.9820|
;;;4277   	{
;;;4278   	bPARALLEL=0;
00265a  77b7              STRB     r7,[r6,#0x1e]
                  |L1.9820|
;;;4279   	}
;;;4280   }
00265c  e676              B        |L1.9036|
                  |L1.9822|
00265e  f886a01e          STRB     r10,[r6,#0x1e]        ;4274
002662  e673              B        |L1.9036|
;;;4281   
                          ENDP

                  powerAntiAliasingHndl PROC
;;;4288   //-----------------------------------------------
;;;4289   void powerAntiAliasingHndl(void)
002664  b570              PUSH     {r4-r6,lr}
;;;4290   {
;;;4291   if((power_summary_tempo/10UL)==(power_summary_tempo_old/10UL))
002666  230a              MOVS     r3,#0xa
002668  4c53              LDR      r4,|L1.10168|
00266a  4852              LDR      r0,|L1.10164|
;;;4292   	{
;;;4293   	if(powerSummaryCnt<15)powerSummaryCnt++;
;;;4294   	if(powerSummaryCnt>=10)
;;;4295   		{
;;;4296   		power_summary=power_summary_tempo;
;;;4297   		}
;;;4298   	}
;;;4299   else powerSummaryCnt=0;
00266c  2500              MOVS     r5,#0
00266e  6822              LDR      r2,[r4,#0]            ;4291  ; power_summary_tempo_old
002670  6800              LDR      r0,[r0,#0]            ;4291  ; power_summary_tempo
002672  fbb2f6f3          UDIV     r6,r2,r3              ;4291
002676  fbb0f1f3          UDIV     r1,r0,r3              ;4291
00267a  4a50              LDR      r2,|L1.10172|
00267c  42b1              CMP      r1,r6                 ;4291
00267e  d10b              BNE      |L1.9880|
002680  7811              LDRB     r1,[r2,#0]            ;4293  ; powerSummaryCnt
002682  290f              CMP      r1,#0xf               ;4293
002684  d202              BCS      |L1.9868|
002686  f1010101          ADD      r1,r1,#1              ;4293
00268a  7011              STRB     r1,[r2,#0]            ;4293
                  |L1.9868|
00268c  7811              LDRB     r1,[r2,#0]            ;4294  ; powerSummaryCnt
00268e  290a              CMP      r1,#0xa               ;4294
002690  d303              BCC      |L1.9882|
002692  494b              LDR      r1,|L1.10176|
002694  6008              STR      r0,[r1,#0]            ;4296  ; power_summary
002696  e000              B        |L1.9882|
                  |L1.9880|
002698  7015              STRB     r5,[r2,#0]
                  |L1.9882|
;;;4300   power_summary_tempo_old=power_summary_tempo;
00269a  6020              STR      r0,[r4,#0]  ; power_summary_tempo_old
;;;4301   
;;;4302   if((power_current_tempo/10UL)==(power_current_tempo_old/10UL))
00269c  4849              LDR      r0,|L1.10180|
00269e  4c4a              LDR      r4,|L1.10184|
0026a0  f9b00000          LDRSH    r0,[r0,#0]  ; power_current_tempo
0026a4  f9b42000          LDRSH    r2,[r4,#0]  ; power_current_tempo_old
0026a8  fbb0f1f3          UDIV     r1,r0,r3
0026ac  fbb2f3f3          UDIV     r3,r2,r3
;;;4303   	{
;;;4304   	if(powerCurrentCnt<15)powerCurrentCnt++;
0026b0  4a46              LDR      r2,|L1.10188|
0026b2  4299              CMP      r1,r3                 ;4302
0026b4  d10b              BNE      |L1.9934|
0026b6  7811              LDRB     r1,[r2,#0]  ; powerCurrentCnt
0026b8  290f              CMP      r1,#0xf
0026ba  d202              BCS      |L1.9922|
0026bc  f1010101          ADD      r1,r1,#1
0026c0  7011              STRB     r1,[r2,#0]
                  |L1.9922|
;;;4305   	if(powerCurrentCnt>=10)
0026c2  7811              LDRB     r1,[r2,#0]  ; powerCurrentCnt
0026c4  290a              CMP      r1,#0xa
0026c6  d303              BCC      |L1.9936|
;;;4306   		{
;;;4307   		power_current=power_current_tempo;
0026c8  4941              LDR      r1,|L1.10192|
0026ca  8008              STRH     r0,[r1,#0]
0026cc  e000              B        |L1.9936|
                  |L1.9934|
;;;4308   		}
;;;4309   	}
;;;4310   else powerCurrentCnt=0;
0026ce  7015              STRB     r5,[r2,#0]
                  |L1.9936|
;;;4311   power_current_tempo_old=power_current_tempo;
0026d0  8020              STRH     r0,[r4,#0]
;;;4312   }
0026d2  bd70              POP      {r4-r6,pc}
;;;4313   
                          ENDP

                  energometr_hndl PROC
;;;4423   //-----------------------------------------------
;;;4424   void energometr_hndl(void)
0026d4  4770              BX       lr
;;;4425   {
;;;4426   //2F 3F 21 0D 0A 
;;;4427   //05 33 0A 2F 45 4B 54 35 43 45 31 30 32 4D 76 30 31 0D 0A 
;;;4428   //2F 3F 21 0D 0A 
;;;4429   //05 33 0A 2F 45 4B 54 35 43 45 31 30 32 4D 76 30 31 0D 0A 
;;;4430   //06 30 35 31 0D 0A 
;;;4431   //06 33 0A 01 50 30 02 28 31 31 38 36 35 32 39 32 32 29 03 2A 
;;;4432   
;;;4433   #ifdef CE102M_ENABLED
;;;4434   /*if
;;;4435   uart_out1 (5,0xaf,0x3f,0x21,0x8d,0x0a,0);*/
;;;4436   
;;;4437   if(read_power_cnt_main_cnt)
;;;4438   	{
;;;4439   	read_power_cnt_main_cnt--;
;;;4440   	if(read_power_cnt_main_cnt==0)
;;;4441   		{
;;;4442   		rx_read_power_cnt_phase=0;
;;;4443   		if(bENERGOMETR_UIP==0)bENERGOMETR_UIP=1;
;;;4444   		else if(bENERGOMETR_UIP==1)bENERGOMETR_UIP=2;
;;;4445   		else bENERGOMETR_UIP=0;
;;;4446   		//bENERGOMETR_UIP=2;
;;;4447   		}
;;;4448   	}
;;;4449   
;;;4450   if (rx_read_power_cnt_phase==0)
;;;4451   	{
;;;4452   	char command_with_crc[20];
;;;4453   	
;;;4454      	command_with_crc[0]=0xaf;  // /
;;;4455   	command_with_crc[1]=0x3f;  // ?
;;;4456   	command_with_crc[2]=0x21;  // !
;;;4457   	command_with_crc[3]=0x8d;  // CR
;;;4458   	command_with_crc[4]=0x0a;  // LF
;;;4459   
;;;4460   	uart_out__adr1(command_with_crc,5);
;;;4461   
;;;4462   	rx_wr_index1=0;
;;;4463   	rx_read_power_cnt_phase=1;
;;;4464   
;;;4465   	read_power_cnt_main_cnt=50;
;;;4466   	}
;;;4467   if ((rx_read_power_cnt_phase==2)&&(!ce102m_delayCnt))
;;;4468   	{
;;;4469   	char command_with_crc[20];
;;;4470   	
;;;4471   	command_with_crc[0]=0x06;  //  
;;;4472   	command_with_crc[1]=0x30;  // 0
;;;4473   	command_with_crc[2]=0x35;  // 5
;;;4474   	command_with_crc[3]=0xb1;  // 1
;;;4475   	command_with_crc[4]=0x8d;  // CR
;;;4476   	command_with_crc[5]=0x0a;  // LF
;;;4477   	
;;;4478   	uart_out__adr1(command_with_crc,6);
;;;4479   	
;;;4480   	rx_wr_index1=0;
;;;4481   	rx_read_power_cnt_phase=3;
;;;4482   
;;;4483   	read_power_cnt_main_cnt=50;
;;;4484   	}  
;;;4485   
;;;4486   if ((rx_read_power_cnt_phase==4)&&(!ce102m_delayCnt))
;;;4487   	{
;;;4488   	char command_with_crc[20];
;;;4489   	
;;;4490   	command_with_crc[0]=0x81;  //  
;;;4491   	command_with_crc[1]=0xd2;  // 0
;;;4492   	command_with_crc[2]=0xb1;  // 5
;;;4493   	command_with_crc[3]=0x82;  // 1
;;;4494   	command_with_crc[4]=0x56;  // CR
;;;4495   	command_with_crc[5]=0xcf;  // LF
;;;4496   	command_with_crc[6]=0xcc;  // 1
;;;4497   	command_with_crc[7]=0xd4;  // CR
;;;4498   	command_with_crc[8]=0x41;  // LF
;;;4499   	command_with_crc[9]=0x28;  // 1
;;;4500   	command_with_crc[10]=0xa9;  // CR
;;;4501   	command_with_crc[11]=0x03;  // LF
;;;4502   	command_with_crc[12]=0x5f;  // LF
;;;4503   		
;;;4504   	uart_out__adr1(command_with_crc,13);
;;;4505   	
;;;4506   	rx_wr_index1=0;
;;;4507   	rx_read_power_cnt_phase=5;
;;;4508   
;;;4509   	read_power_cnt_main_cnt=50;
;;;4510   	}  
;;;4511   
;;;4512   if ((rx_read_power_cnt_phase==8)&&(!ce102m_delayCnt))
;;;4513   	{
;;;4514   	char command_with_crc[20];
;;;4515   	
;;;4516   	command_with_crc[0]=0x81;  //  
;;;4517   	command_with_crc[1]=0xd2;  // 0
;;;4518   	command_with_crc[2]=0xb1;  // 5
;;;4519   	command_with_crc[3]=0x82;  // 1
;;;4520   	command_with_crc[4]=0xc3;  // CR
;;;4521   	command_with_crc[5]=0x55;  // LF
;;;4522   	command_with_crc[6]=0xd2;  // 1
;;;4523   	command_with_crc[7]=0xd2;  // CR
;;;4524   	command_with_crc[8]=0xc5;  // LF
;;;4525   	command_with_crc[9]=0x28;  // 1
;;;4526   	command_with_crc[10]=0xa9;  // CR
;;;4527   	command_with_crc[11]=0x03;  // LF
;;;4528   	command_with_crc[12]=0x5a;  // LF
;;;4529   		
;;;4530   	uart_out__adr1(command_with_crc,13);
;;;4531   	
;;;4532   	rx_wr_index1=0;
;;;4533   	rx_read_power_cnt_phase=9;
;;;4534   
;;;4535   	read_power_cnt_main_cnt=50;
;;;4536   	}  
;;;4537   
;;;4538   if ((rx_read_power_cnt_phase==20)&&(!ce102m_delayCnt))
;;;4539   	{
;;;4540   	char command_with_crc[20];
;;;4541   	
;;;4542   	command_with_crc[0]=0x81;  //  		01
;;;4543   	command_with_crc[1]=0xd2;  // R		52
;;;4544   	command_with_crc[2]=0xb1;  // 1		31
;;;4545   	command_with_crc[3]=0x82;  // 		02
;;;4546   	command_with_crc[4]=0x50;  // P		50
;;;4547   	command_with_crc[5]=0xcf;  // O	  	4f
;;;4548   	command_with_crc[6]=0xd7;  // W		57
;;;4549   	command_with_crc[7]=0xc5;  // E		45
;;;4550   	command_with_crc[8]=0x50;  // P		50
;;;4551   	command_with_crc[9]=0x28;  // (		28
;;;4552   	command_with_crc[10]=0xa9;  // )	29
;;;4553   	command_with_crc[11]=0x03;  // 		03
;;;4554   	command_with_crc[12]=0xe4;  // d	64
;;;4555   		
;;;4556   	uart_out__adr1(command_with_crc,13);
;;;4557   	
;;;4558   	rx_wr_index1=0;
;;;4559   	rx_read_power_cnt_phase=21;
;;;4560   
;;;4561   	read_power_cnt_main_cnt=50;
;;;4562   	}  
;;;4563   
;;;4564   
;;;4565   #endif
;;;4566   }
;;;4567   
                          ENDP

                  ips_current_average_hndl PROC
;;;4568   //-----------------------------------------------
;;;4569   void ips_current_average_hndl(void)
0026d6  e92d4ff0          PUSH     {r4-r11,lr}
;;;4570   {
0026da  b089              SUB      sp,sp,#0x24
;;;4571   if((++ica_timer_cnt>=10) && (num_of_wrks_bps))
0026dc  4c3d              LDR      r4,|L1.10196|
;;;4572   	{
;;;4573   	ica_timer_cnt=0;
;;;4574   	ica_plazma[0]++;
;;;4575   
;;;4576   	ica_my_current=bps_I;
;;;4577   
;;;4578   	if((ica_my_current>ica_your_current)&&((ica_my_current-ica_your_current)>=5)&&((ICA_EN==1)||((ICA_EN==2)&&(ica_cntrl_hndl_cnt>5))))
0026de  4f3e              LDR      r7,|L1.10200|
0026e0  4e2c              LDR      r6,|L1.10132|
0026e2  7820              LDRB     r0,[r4,#0]            ;4571  ; ica_timer_cnt
0026e4  2500              MOVS     r5,#0                 ;4571
0026e6  1c40              ADDS     r0,r0,#1              ;4571
0026e8  b2c0              UXTB     r0,r0                 ;4571
0026ea  7020              STRB     r0,[r4,#0]            ;4571
0026ec  280a              CMP      r0,#0xa               ;4571
0026ee  d34f              BCC      |L1.10128|
0026f0  7bf0              LDRB     r0,[r6,#0xf]          ;4571  ; num_of_wrks_bps
0026f2  b398              CBZ      r0,|L1.10076|
0026f4  7025              STRB     r5,[r4,#0]            ;4573
0026f6  f8df90e4          LDR      r9,|L1.10204|
0026fa  f8990000          LDRB     r0,[r9,#0]            ;4574  ; ica_plazma
0026fe  f1000001          ADD      r0,r0,#1              ;4574
002702  f8890000          STRB     r0,[r9,#0]            ;4574
002706  4836              LDR      r0,|L1.10208|
002708  f9b01000          LDRSH    r1,[r0,#0]            ;4576  ; bps_I
00270c  4835              LDR      r0,|L1.10212|
00270e  8001              STRH     r1,[r0,#0]            ;4576
002710  4835              LDR      r0,|L1.10216|
;;;4579   		{
;;;4580   		ica_plazma[1]++;
;;;4581   		ica_u_necc--;
002712  f8dfa0d8          LDR      r10,|L1.10220|
002716  f9b02000          LDRSH    r2,[r0,#0]            ;4578  ; ica_your_current
00271a  4648              MOV      r0,r9                 ;4574
00271c  f9bac000          LDRSH    r12,[r10,#0]
002720  7843              LDRB     r3,[r0,#1]            ;4580
002722  4833              LDR      r0,|L1.10224|
002724  4291              CMP      r1,r2                 ;4578
002726  f9b08000          LDRSH    r8,[r0,#0]            ;4578
00272a  4638              MOV      r0,r7                 ;4578
00272c  f9b00000          LDRSH    r0,[r0,#0]            ;4578
002730  dd15              BLE      |L1.10078|
002732  eba10b02          SUB      r11,r1,r2             ;4578
002736  f1bb0f05          CMP      r11,#5                ;4578
00273a  db10              BLT      |L1.10078|
00273c  2801              CMP      r0,#1                 ;4578
00273e  d004              BEQ      |L1.10058|
002740  2802              CMP      r0,#2                 ;4578
002742  d10c              BNE      |L1.10078|
002744  f1b80f05          CMP      r8,#5                 ;4578
002748  dd09              BLE      |L1.10078|
                  |L1.10058|
00274a  f1030301          ADD      r3,r3,#1              ;4580
00274e  f8893001          STRB     r3,[r9,#1]            ;4580
002752  f1ac0c01          SUB      r12,r12,#1
002756  f8aac000          STRH     r12,[r10,#0]
00275a  e014              B        |L1.10118|
                  |L1.10076|
00275c  e018              B        |L1.10128|
                  |L1.10078|
;;;4582   		}
;;;4583   	else if((ica_my_current<ica_your_current)&&((ica_your_current-ica_my_current)>=5)&&((ICA_EN==1)||((ICA_EN==2)&&(ica_cntrl_hndl_cnt>5))))
00275e  4291              CMP      r1,r2
002760  da11              BGE      |L1.10118|
002762  1a51              SUBS     r1,r2,r1
002764  2905              CMP      r1,#5
002766  db0e              BLT      |L1.10118|
002768  2801              CMP      r0,#1
00276a  d004              BEQ      |L1.10102|
00276c  2802              CMP      r0,#2
00276e  d10a              BNE      |L1.10118|
002770  f1b80f05          CMP      r8,#5
002774  dd07              BLE      |L1.10118|
                  |L1.10102|
;;;4584   		{
;;;4585   		ica_plazma[1]--;
002776  f1a30301          SUB      r3,r3,#1
00277a  f8893001          STRB     r3,[r9,#1]
;;;4586   		ica_u_necc++;
00277e  f10c0c01          ADD      r12,r12,#1
002782  f8aac000          STRH     r12,[r10,#0]
                  |L1.10118|
;;;4587   		}
;;;4588   	gran(&ica_u_necc,-100,100);
002786  2264              MOVS     r2,#0x64
002788  4251              RSBS     r1,r2,#0
00278a  4818              LDR      r0,|L1.10220|
00278c  f7fffffe          BL       gran
                  |L1.10128|
;;;4589   	}
;;;4590   
;;;4591   
;;;4592   if((ICA_EN==1) /*&& (num_of_wrks_bps)*/)
002790  8838              LDRH     r0,[r7,#0]  ; ICA_EN
002792  e02f              B        |L1.10228|
                  |L1.10132|
                          DCD      ||area_number.23||
                  |L1.10136|
                          DCD      bps
                  |L1.10140|
                          DCD      NUMIST
                  |L1.10144|
                          DCD      mess_data
                  |L1.10148|
                          DCD      num_necc
                  |L1.10152|
                          DCD      main_1Hz_cnt
                  |L1.10156|
                          DCD      ipsBlckStat
                  |L1.10160|
                          DCD      TSIGN
                  |L1.10164|
                          DCD      power_summary_tempo
                  |L1.10168|
                          DCD      power_summary_tempo_old
                  |L1.10172|
                          DCD      powerSummaryCnt
                  |L1.10176|
                          DCD      power_summary
                  |L1.10180|
                          DCD      power_current_tempo
                  |L1.10184|
                          DCD      power_current_tempo_old
                  |L1.10188|
                          DCD      powerCurrentCnt
                  |L1.10192|
                          DCD      power_current
                  |L1.10196|
                          DCD      ica_timer_cnt
                  |L1.10200|
                          DCD      ICA_EN
                  |L1.10204|
                          DCD      ica_plazma
                  |L1.10208|
                          DCD      bps_I
                  |L1.10212|
                          DCD      ica_my_current
                  |L1.10216|
                          DCD      ica_your_current
                  |L1.10220|
                          DCD      ica_u_necc
                  |L1.10224|
                          DCD      ica_cntrl_hndl_cnt
                  |L1.10228|
0027f4  2801              CMP      r0,#1
0027f6  d15d              BNE      |L1.10420|
;;;4593   	{
;;;4594   	
;;;4595   	if(ica_timer_cnt==8)
0027f8  7820              LDRB     r0,[r4,#0]  ; ica_timer_cnt
;;;4596   		{
;;;4597   		char modbus_buff[20],i;
;;;4598   		short crc_temp;
;;;4599   	
;;;4600   		modbus_buff[0] = ICA_MODBUS_ADDRESS;
0027fa  4bfe              LDR      r3,|L1.11252|
;;;4601   		modbus_buff[1] = 4;
;;;4602   		modbus_buff[2] = 0;
;;;4603   		modbus_buff[3] = 2;
;;;4604   		modbus_buff[4] = 0;	
;;;4605   		modbus_buff[5] = 1;
;;;4606   	
;;;4607   		crc_temp= CRC16_2(modbus_buff,6);
;;;4608   	
;;;4609   		modbus_buff[6]= (char)crc_temp;
;;;4610   		modbus_buff[7]= (char)(crc_temp>>8);
;;;4611   	
;;;4612   		if(ICA_CH==0)
0027fc  4ffe              LDR      r7,|L1.11256|
0027fe  2808              CMP      r0,#8                 ;4595
002800  d05b              BEQ      |L1.10426|
;;;4613   			{
;;;4614   			for (i=0;i<8;i++)
;;;4615   				{
;;;4616   				putchar_sc16is700(modbus_buff[i]);
;;;4617   				}
;;;4618   			}
;;;4619   		else if(ICA_CH==2)
;;;4620   			{
;;;4621   			uart_out1 (5,4,0,2,0,1,0);
;;;4622   			}
;;;4623   		}
;;;4624   	else
;;;4625   		{
;;;4626   		char modbus_buff[20],i;
;;;4627   		short crc_temp, tempSSSS;
;;;4628   
;;;4629   		tempSSSS=cntrl_stat_old;
002802  f9b64022          LDRSH    r4,[r6,#0x22]  ; cntrl_stat_old
;;;4630   		if(	(main_kb_cnt==(TBAT*60)-21) || (main_kb_cnt==(TBAT*60)-20) || (main_kb_cnt==(TBAT*60)-19)) tempSSSS=((short)TBAT)|0x4000;
002806  48fd              LDR      r0,|L1.11260|
002808  f06f0214          MVN      r2,#0x14
00280c  f9b00000          LDRSH    r0,[r0,#0]  ; TBAT
002810  ebc01100          RSB      r1,r0,r0,LSL #4
002814  eb020c81          ADD      r12,r2,r1,LSL #2
002818  f9b62040          LDRSH    r2,[r6,#0x40]  ; main_kb_cnt
00281c  4594              CMP      r12,r2
00281e  d00b              BEQ      |L1.10296|
002820  f06f0c13          MVN      r12,#0x13
002824  eb0c0c81          ADD      r12,r12,r1,LSL #2
002828  4594              CMP      r12,r2
00282a  d005              BEQ      |L1.10296|
00282c  f06f0c12          MVN      r12,#0x12
002830  eb0c0181          ADD      r1,r12,r1,LSL #2
002834  4291              CMP      r1,r2
002836  d101              BNE      |L1.10300|
                  |L1.10296|
002838  f4404480          ORR      r4,r0,#0x4000
                  |L1.10300|
;;;4631   
;;;4632   
;;;4633   		modbus_buff[0] = ICA_MODBUS_ADDRESS;
00283c  8818              LDRH     r0,[r3,#0]  ; ICA_MODBUS_ADDRESS
00283e  f88d0010          STRB     r0,[sp,#0x10]
;;;4634   		modbus_buff[1] = 6;
002842  f04f0006          MOV      r0,#6
002846  f88d0011          STRB     r0,[sp,#0x11]
;;;4635   		modbus_buff[2] = 0;
00284a  f88d5012          STRB     r5,[sp,#0x12]
;;;4636   		modbus_buff[3] = 100;
00284e  f04f0064          MOV      r0,#0x64
002852  f88d0013          STRB     r0,[sp,#0x13]
;;;4637   		modbus_buff[4] = (char)(tempSSSS/256);	
002856  ea4f70e4          ASR      r0,r4,#31
00285a  eb046010          ADD      r0,r4,r0,LSR #24
00285e  ea4f2120          ASR      r1,r0,#8
002862  f88d1014          STRB     r1,[sp,#0x14]
;;;4638   		modbus_buff[5] = (char)(tempSSSS%256);
002866  4620              MOV      r0,r4
002868  f88d0015          STRB     r0,[sp,#0x15]
;;;4639   	
;;;4640   		crc_temp= CRC16_2(modbus_buff,6);
00286c  f04f0106          MOV      r1,#6
002870  a804              ADD      r0,sp,#0x10
002872  f7fffffe          BL       CRC16_2
;;;4641   	
;;;4642   		modbus_buff[6]= (char)crc_temp;
002876  f88d0016          STRB     r0,[sp,#0x16]
;;;4643   		modbus_buff[7]= (char)(crc_temp>>8);
00287a  ea4f2020          ASR      r0,r0,#8
00287e  f88d0017          STRB     r0,[sp,#0x17]
;;;4644   	
;;;4645   		crc_temp= CRC16_2(modbus_buff,6);
002882  f04f0106          MOV      r1,#6
002886  a804              ADD      r0,sp,#0x10
002888  f7fffffe          BL       CRC16_2
;;;4646   	
;;;4647   		plazma_ica1=tempSSSS;
00288c  f8a64068          STRH     r4,[r6,#0x68]
;;;4648   		if(ICA_CH==0)
002890  f9b70000          LDRSH    r0,[r7,#0]  ; ICA_CH
002894  b3f0              CBZ      r0,|L1.10516|
;;;4649   			{
;;;4650   			for (i=0;i<8;i++)
;;;4651   				{
;;;4652   				putchar_sc16is700(modbus_buff[i]);
;;;4653   				}
;;;4654   			}
;;;4655   		else if(ICA_CH==2)
002896  2802              CMP      r0,#2
002898  d10c              BNE      |L1.10420|
;;;4656   			{
;;;4657   			uart_out1 (5,6,0,100,modbus_buff[4],modbus_buff[5],0);
00289a  f89d0015          LDRB     r0,[sp,#0x15]
00289e  f89d1014          LDRB     r1,[sp,#0x14]
0028a2  e9cd0501          STRD     r0,r5,[sp,#4]
0028a6  9100              STR      r1,[sp,#0]
0028a8  2364              MOVS     r3,#0x64
0028aa  2200              MOVS     r2,#0
0028ac  2106              MOVS     r1,#6
0028ae  2005              MOVS     r0,#5
0028b0  f7fffffe          BL       uart_out1
                  |L1.10420|
;;;4658   			}
;;;4659   		}
;;;4660   	}
;;;4661   }
0028b4  b009              ADD      sp,sp,#0x24
0028b6  e8bd8ff0          POP      {r4-r11,pc}
                  |L1.10426|
0028ba  8818              LDRH     r0,[r3,#0]            ;4600  ; ICA_MODBUS_ADDRESS
0028bc  f88d0010          STRB     r0,[sp,#0x10]         ;4600
0028c0  f04f0004          MOV      r0,#4                 ;4601
0028c4  f88d0011          STRB     r0,[sp,#0x11]         ;4601
0028c8  f88d5012          STRB     r5,[sp,#0x12]         ;4602
0028cc  f04f0002          MOV      r0,#2                 ;4603
0028d0  f88d0013          STRB     r0,[sp,#0x13]         ;4603
0028d4  f88d5014          STRB     r5,[sp,#0x14]         ;4604
0028d8  f04f0401          MOV      r4,#1                 ;4605
0028dc  f88d4015          STRB     r4,[sp,#0x15]         ;4605
0028e0  f04f0106          MOV      r1,#6                 ;4607
0028e4  a804              ADD      r0,sp,#0x10           ;4607
0028e6  f7fffffe          BL       CRC16_2
0028ea  f88d0016          STRB     r0,[sp,#0x16]         ;4609
0028ee  ea4f2020          ASR      r0,r0,#8              ;4610
0028f2  f88d0017          STRB     r0,[sp,#0x17]         ;4610
0028f6  f9b70000          LDRSH    r0,[r7,#0]            ;4612  ; ICA_CH
0028fa  b160              CBZ      r0,|L1.10518|
0028fc  2802              CMP      r0,#2                 ;4619
0028fe  d1d9              BNE      |L1.10420|
002900  e9cd5400          STRD     r5,r4,[sp,#0]         ;4621
002904  2302              MOVS     r3,#2                 ;4621
002906  2200              MOVS     r2,#0                 ;4621
002908  2104              MOVS     r1,#4                 ;4621
00290a  2005              MOVS     r0,#5                 ;4621
00290c  9502              STR      r5,[sp,#8]            ;4621
00290e  f7fffffe          BL       uart_out1
002912  e7cf              B        |L1.10420|
                  |L1.10516|
002914  e00b              B        |L1.10542|
                  |L1.10518|
002916  f04f0400          MOV      r4,#0                 ;4614
00291a  ad04              ADD      r5,sp,#0x10           ;4597
                  |L1.10524|
00291c  5d28              LDRB     r0,[r5,r4]            ;4616
00291e  f7fffffe          BL       putchar_sc16is700
002922  f1040401          ADD      r4,r4,#1              ;4614
002926  b2e4              UXTB     r4,r4                 ;4614
002928  2c08              CMP      r4,#8                 ;4614
00292a  d3f7              BCC      |L1.10524|
00292c  e7c2              B        |L1.10420|
                  |L1.10542|
00292e  f04f0400          MOV      r4,#0                 ;4650
002932  ad04              ADD      r5,sp,#0x10           ;4626
                  |L1.10548|
002934  5d28              LDRB     r0,[r5,r4]            ;4652
002936  f7fffffe          BL       putchar_sc16is700
00293a  f1040401          ADD      r4,r4,#1              ;4650
00293e  b2e4              UXTB     r4,r4                 ;4650
002940  2c08              CMP      r4,#8                 ;4650
002942  d3f7              BCC      |L1.10548|
002944  e7b6              B        |L1.10420|
;;;4662   
                          ENDP

                  ipsBlckHndl PROC
;;;4745   //-----------------------------------------------
;;;4746   void ipsBlckHndl(char in)
002946  b510              PUSH     {r4,lr}
;;;4747   {
;;;4748   
;;;4749   ipsBlckStat=0;
002948  4bad              LDR      r3,|L1.11264|
00294a  f04f0000          MOV      r0,#0
00294e  8018              STRH     r0,[r3,#0]
;;;4750   if(ipsBlckSrc==1)
002950  48ac              LDR      r0,|L1.11268|
002952  f04f0401          MOV      r4,#1
;;;4751   	{
;;;4752   	if(((ipsBlckLog==0)&&(adc_buff_[11]>2000)) || ((ipsBlckLog==1)&&(adc_buff_[11]<2000))) ipsBlckStat=1;
002956  f44f62fa          MOV      r2,#0x7d0
00295a  f9b01000          LDRSH    r1,[r0,#0]            ;4750  ; ipsBlckSrc
00295e  48aa              LDR      r0,|L1.11272|
002960  2901              CMP      r1,#1                 ;4750
002962  f9b00000          LDRSH    r0,[r0,#0]
002966  d006              BEQ      |L1.10614|
;;;4753   	}
;;;4754   else if(ipsBlckSrc==2)
002968  2902              CMP      r1,#2
00296a  d10f              BNE      |L1.10636|
00296c  49a7              LDR      r1,|L1.11276|
;;;4755   	{
;;;4756   	if(((ipsBlckLog==0)&&(adc_buff_[13]>2000)) || ((ipsBlckLog==1)&&(adc_buff_[13]<2000))) ipsBlckStat=1;
00296e  f9b1101a          LDRSH    r1,[r1,#0x1a]
002972  b160              CBZ      r0,|L1.10638|
002974  e00d              B        |L1.10642|
                  |L1.10614|
002976  49a5              LDR      r1,|L1.11276|
002978  f9b11016          LDRSH    r1,[r1,#0x16]         ;4752
00297c  b908              CBNZ     r0,|L1.10626|
00297e  4291              CMP      r1,r2                 ;4752
002980  dc03              BGT      |L1.10634|
                  |L1.10626|
002982  2801              CMP      r0,#1                 ;4752
002984  d102              BNE      |L1.10636|
002986  4291              CMP      r1,r2                 ;4752
002988  da00              BGE      |L1.10636|
                  |L1.10634|
00298a  801c              STRH     r4,[r3,#0]            ;4752
                  |L1.10636|
;;;4757   	}
;;;4758   }
00298c  bd10              POP      {r4,pc}
                  |L1.10638|
00298e  4291              CMP      r1,r2                 ;4756
002990  dc03              BGT      |L1.10650|
                  |L1.10642|
002992  2801              CMP      r0,#1                 ;4756
002994  d1fa              BNE      |L1.10636|
002996  4291              CMP      r1,r2                 ;4756
002998  daf8              BGE      |L1.10636|
                  |L1.10650|
00299a  801c              STRH     r4,[r3,#0]            ;4756
00299c  bd10              POP      {r4,pc}
;;;4759   
                          ENDP

                  bps_drv PROC
;;;4760   //-----------------------------------------------
;;;4761   void bps_drv(char in)
00299e  e92d41f0          PUSH     {r4-r8,lr}
;;;4762   {
0029a2  4606              MOV      r6,r0
;;;4763   char temp;
;;;4764   
;;;4765   if (bps[in]._device!=dSRC) return;
0029a4  ebc600c6          RSB      r0,r6,r6,LSL #3
0029a8  4999              LDR      r1,|L1.11280|
0029aa  eb001006          ADD      r0,r0,r6,LSL #4
0029ae  f8112020          LDRB     r2,[r1,r0,LSL #2]
0029b2  2a03              CMP      r2,#3
0029b4  d177              BNE      |L1.10918|
;;;4766   temp=bps[in]._flags_tm;
0029b6  eb010480          ADD      r4,r1,r0,LSL #2
0029ba  f8945042          LDRB     r5,[r4,#0x42]
;;;4767   if(temp&(1<<AV_T))
0029be  07a8              LSLS     r0,r5,#30
0029c0  d517              BPL      |L1.10738|
;;;4768   	{
;;;4769   	if(bps[in]._temp_av_cnt<1200) 
0029c2  f9b41046          LDRSH    r1,[r4,#0x46]
0029c6  f44f6096          MOV      r0,#0x4b0
0029ca  4281              CMP      r1,r0
0029cc  da22              BGE      |L1.10772|
;;;4770   		{
;;;4771   		bps[in]._temp_av_cnt++;
0029ce  f1010101          ADD      r1,r1,#1
0029d2  b209              SXTH     r1,r1
0029d4  f8a41046          STRH     r1,[r4,#0x46]
;;;4772   		if(bps[in]._temp_av_cnt>=1200)
0029d8  4281              CMP      r1,r0
0029da  db1b              BLT      |L1.10772|
;;;4773   			{
;;;4774   			bps[in]._temp_av_cnt=1200;
0029dc  f8a40046          STRH     r0,[r4,#0x46]
;;;4775   		   	if(!(bps[in]._av&(1<<0)))avar_bps_hndl(in,0,1);
0029e0  7860              LDRB     r0,[r4,#1]
0029e2  07c0              LSLS     r0,r0,#31
0029e4  d116              BNE      |L1.10772|
0029e6  2201              MOVS     r2,#1
0029e8  2100              MOVS     r1,#0
0029ea  4630              MOV      r0,r6
0029ec  f7fffffe          BL       avar_bps_hndl
0029f0  e010              B        |L1.10772|
                  |L1.10738|
;;;4776   			}
;;;4777   		}
;;;4778   	}
;;;4779   
;;;4780   else if(!(temp&(1<<AV_T)))
;;;4781   	{
;;;4782   	if(bps[in]._temp_av_cnt) 
0029f2  f9b41046          LDRSH    r1,[r4,#0x46]
0029f6  b169              CBZ      r1,|L1.10772|
;;;4783   		{
;;;4784   		bps[in]._temp_av_cnt--;
0029f8  f1a10101          SUB      r1,r1,#1
0029fc  b208              SXTH     r0,r1
0029fe  f8a40046          STRH     r0,[r4,#0x46]
;;;4785   		if(!bps[in]._temp_av_cnt)
002a02  b938              CBNZ     r0,|L1.10772|
;;;4786   			{
;;;4787   			if(bps[in]._av&(1<<0))avar_bps_hndl(in,0,0);
002a04  7860              LDRB     r0,[r4,#1]
002a06  07c0              LSLS     r0,r0,#31
002a08  d004              BEQ      |L1.10772|
002a0a  2200              MOVS     r2,#0
002a0c  4611              MOV      r1,r2
002a0e  4630              MOV      r0,r6
002a10  f7fffffe          BL       avar_bps_hndl
                  |L1.10772|
;;;4788   			}
;;;4789   		} 	
;;;4790   
;;;4791   	}
;;;4792   
;;;4793   if((temp&(1<<AVUMAX)))
002a14  0729              LSLS     r1,r5,#28
;;;4794   	{
;;;4795   	if(bps[in]._umax_av_cnt<10) 
;;;4796   		{
;;;4797   		bps[in]._umax_av_cnt++;
;;;4798   		if(bps[in]._umax_av_cnt>=10)
;;;4799   			{ 
;;;4800   			bps[in]._umax_av_cnt=10;
002a16  f04f070a          MOV      r7,#0xa
002a1a  f04f0000          MOV      r0,#0                 ;4775
002a1e  d515              BPL      |L1.10828|
002a20  f9b40048          LDRSH    r0,[r4,#0x48]         ;4795
002a24  280a              CMP      r0,#0xa               ;4795
002a26  da26              BGE      |L1.10870|
002a28  f1000001          ADD      r0,r0,#1              ;4797
002a2c  b200              SXTH     r0,r0                 ;4797
002a2e  f8a40048          STRH     r0,[r4,#0x48]         ;4797
002a32  280a              CMP      r0,#0xa               ;4798
002a34  db1f              BLT      |L1.10870|
002a36  f8a47048          STRH     r7,[r4,#0x48]
;;;4801   			if(!(bps[in]._av&(1<<1)))avar_bps_hndl(in,1,1);
002a3a  7860              LDRB     r0,[r4,#1]
002a3c  0780              LSLS     r0,r0,#30
002a3e  d41a              BMI      |L1.10870|
002a40  2201              MOVS     r2,#1
002a42  4611              MOV      r1,r2
002a44  4630              MOV      r0,r6
002a46  f7fffffe          BL       avar_bps_hndl
002a4a  e014              B        |L1.10870|
                  |L1.10828|
;;;4802   		  	/*if((K[APV]!=ON)||((apv_cnt[in,0]==0)&&(apv_cnt[in,1]==0)&&(apv_cnt[in,2]==0)&&(apv_flags[in]==afOFF)))avar_s_hndl(in,1,1);
;;;4803   			if((apv_cnt[in,0]==0)&&(apv_cnt[in,1]==0)&&(apv_cnt[in,2]==0)&&(apv_flags[in]==afON))
;;;4804   				{
;;;4805   				apv_cnt[in,0]=APV_INIT;
;;;4806   				apv_cnt[in,1]=APV_INIT;
;;;4807   				apv_cnt[in,2]=APV_INIT;
;;;4808   				apv_flags[in]=afOFF;
;;;4809   				}				*/
;;;4810   						
;;;4811   			}
;;;4812   		} 
;;;4813   	}		
;;;4814   else if(!(temp&(1<<AVUMAX)))
;;;4815   	{
;;;4816   	if(bps[in]._umax_av_cnt>0) 
002a4c  f9b41048          LDRSH    r1,[r4,#0x48]
002a50  2900              CMP      r1,#0
002a52  dd0d              BLE      |L1.10864|
;;;4817   		{
;;;4818   		bps[in]._umax_av_cnt--;
002a54  f1a10101          SUB      r1,r1,#1
002a58  b208              SXTH     r0,r1
002a5a  f8a40048          STRH     r0,[r4,#0x48]
;;;4819   		if(bps[in]._umax_av_cnt==0)
002a5e  b950              CBNZ     r0,|L1.10870|
;;;4820   			{
;;;4821   			bps[in]._umax_av_cnt=0;
;;;4822   			avar_bps_hndl(in,1,0);
002a60  f04f0200          MOV      r2,#0
002a64  f04f0101          MOV      r1,#1
002a68  4630              MOV      r0,r6
002a6a  f7fffffe          BL       avar_bps_hndl
002a6e  e002              B        |L1.10870|
                  |L1.10864|
;;;4823   	 //		apv_cnt[in,0]=0;
;;;4824   	//		apv_cnt[in,1]=0;
;;;4825   	 //		apv_cnt[in,2]=0;			
;;;4826   			}
;;;4827   		}
;;;4828   	else if(bps[in]._umax_av_cnt<0) bps[in]._umax_av_cnt=0;		 
002a70  da01              BGE      |L1.10870|
002a72  f8a40048          STRH     r0,[r4,#0x48]
                  |L1.10870|
;;;4829   	}
;;;4830   
;;;4831   if(temp&(1<<AVUMIN))
002a76  06e8              LSLS     r0,r5,#27
002a78  d516              BPL      |L1.10920|
;;;4832   	{
;;;4833   	if(bps[in]._umin_av_cnt<10) 
002a7a  f9b4004a          LDRSH    r0,[r4,#0x4a]
002a7e  280a              CMP      r0,#0xa
002a80  da20              BGE      |L1.10948|
;;;4834   		{
;;;4835   		bps[in]._umin_av_cnt++;
002a82  f1000001          ADD      r0,r0,#1
002a86  b200              SXTH     r0,r0
002a88  f8a4004a          STRH     r0,[r4,#0x4a]
;;;4836   		if(bps[in]._umin_av_cnt>=10)
002a8c  280a              CMP      r0,#0xa
002a8e  db19              BLT      |L1.10948|
;;;4837   			{ 
;;;4838   			bps[in]._umin_av_cnt=10;
002a90  f8a4704a          STRH     r7,[r4,#0x4a]
;;;4839   			if(!(bps[in]._av&(1<<2)))avar_bps_hndl(in,2,1);
002a94  7860              LDRB     r0,[r4,#1]
002a96  0740              LSLS     r0,r0,#29
002a98  d414              BMI      |L1.10948|
002a9a  2201              MOVS     r2,#1
002a9c  2102              MOVS     r1,#2
002a9e  4630              MOV      r0,r6
002aa0  f7fffffe          BL       avar_bps_hndl
002aa4  e00e              B        |L1.10948|
                  |L1.10918|
002aa6  e046              B        |L1.11062|
                  |L1.10920|
;;;4840   		  	/*	if((K[APV]!=ON)||((apv_cnt[in,0]==0)&&(apv_cnt[in,1]==0)&&(apv_cnt[in,2]==0)&&(apv_flags[in]==afOFF)))avar_s_hndl(in,2,1);
;;;4841   			if((apv_cnt[in,0]==0)&&(apv_cnt[in,1]==0)&&(apv_cnt[in,2]==0)&&(apv_flags[in]==afON))
;;;4842   				{
;;;4843   				apv_cnt[in,0]=APV_INIT;
;;;4844   				apv_cnt[in,1]=APV_INIT;
;;;4845   				apv_cnt[in,2]=APV_INIT;
;;;4846   				apv_flags[in]=afOFF;
;;;4847   				}*/				
;;;4848   			}
;;;4849   		} 
;;;4850   	}	
;;;4851   	
;;;4852   else if(!(temp&(1<<AVUMIN)))
;;;4853   	{
;;;4854   	if(bps[in]._umin_av_cnt) 
002aa8  f9b4004a          LDRSH    r0,[r4,#0x4a]
002aac  b150              CBZ      r0,|L1.10948|
;;;4855   		{
;;;4856   		bps[in]._umin_av_cnt--;
002aae  f1a00001          SUB      r0,r0,#1
002ab2  b201              SXTH     r1,r0
002ab4  f8a4104a          STRH     r1,[r4,#0x4a]
;;;4857   		if(bps[in]._umin_av_cnt==0)
002ab8  b921              CBNZ     r1,|L1.10948|
;;;4858   			{
;;;4859   			bps[in]._umin_av_cnt=0;
;;;4860   			avar_bps_hndl(in,2,0);
002aba  2200              MOVS     r2,#0
002abc  2102              MOVS     r1,#2
002abe  4630              MOV      r0,r6
002ac0  f7fffffe          BL       avar_bps_hndl
                  |L1.10948|
;;;4861   		//	apv_cnt[in,0]=0;
;;;4862   		//	apv_cnt[in,1]=0;
;;;4863   		//	apv_cnt[in,2]=0;
;;;4864   			}
;;;4865   		}
;;;4866   	else if(bps[in]._umin_av_cnt>10)bps[in]._umin_av_cnt--;	 
;;;4867   	}
;;;4868   
;;;4869   //bps[in]._state=bsOFF;
;;;4870   
;;;4871   if (bps[in]._av&0x0f)					bps[in]._state=bsAV;
002ac4  7860              LDRB     r0,[r4,#1]
002ac6  0700              LSLS     r0,r0,#28
002ac8  d003              BEQ      |L1.10962|
002aca  f04f0004          MOV      r0,#4
002ace  70a0              STRB     r0,[r4,#2]
002ad0  e017              B        |L1.11010|
                  |L1.10962|
;;;4872   else if ( (net_av) && (bps[in]._cnt>20)/*&& 
002ad2  4850              LDR      r0,|L1.11284|
002ad4  7800              LDRB     r0,[r0,#0]  ; net_av
002ad6  b130              CBZ      r0,|L1.10982|
002ad8  78e0              LDRB     r0,[r4,#3]
002ada  2814              CMP      r0,#0x14
002adc  d903              BLS      |L1.10982|
;;;4873   		(bps[in]._Uii<200)*/)				bps[in]._state=bsOFF_AV_NET;
002ade  f04f0005          MOV      r0,#5
002ae2  70a0              STRB     r0,[r4,#2]
002ae4  e00d              B        |L1.11010|
                  |L1.10982|
;;;4874   else if (bps[in]._flags_tm&BIN8(100000))	bps[in]._state=bsRDY;
002ae6  f8940042          LDRB     r0,[r4,#0x42]
002aea  0680              LSLS     r0,r0,#26
002aec  d503              BPL      |L1.10998|
002aee  f04f0002          MOV      r0,#2
002af2  70a0              STRB     r0,[r4,#2]
002af4  e005              B        |L1.11010|
                  |L1.10998|
;;;4875   else if (bps[in]._cnt<20)				bps[in]._state=bsWRK;
002af6  78e0              LDRB     r0,[r4,#3]
002af8  2814              CMP      r0,#0x14
002afa  d202              BCS      |L1.11010|
002afc  f04f0001          MOV      r0,#1
002b00  70a0              STRB     r0,[r4,#2]
                  |L1.11010|
;;;4876   
;;;4877   
;;;4878   
;;;4879   //else if(bps[in]._flags_tm&BIN8(100000)) bps[in]._state=ssBL;
;;;4880   //else if((!(bps[in]._flags_tm&BIN8(100000)))&&(net_U>100))bps[in]._state=ssWRK;
;;;4881   //else bps[0]._state=ssNOT;
;;;4882   
;;;4883   //bps[in]._is_ready=0;
;;;4884   //bps[in]._is_wrk=0;
;;;4885   //if(bps[in]._av_net) bps[in]._flags_bp='N';// íå ïîäêëþ÷åí
;;;4886   //else if(bps[in]._av_u_max) bps[in]._flags_bp='P';// çàâûøåíî íàïðÿæåíèå(u_.av_.bAS1T)) bps_state[0]=ssAV;
;;;4887   //else if(bps[in]._av_u_min) bps[in]._flags_bp='M';// çàíèæåíî íàïðÿæåíèå
;;;4888   //else if(bps[in]._av_temper) bps[in]._flags_bp='T';// òåìïåðàòóðà
;;;4889   //else if(bps[in]._flags_tm&BIN8(100000)) 
;;;4890   //	{
;;;4891   //	bps[in]._flags_bp='B';// çàáëîêèðîâàí
;;;4892   //	bps[in]._is_ready=1;
;;;4893   //	}
;;;4894   //else if((!(bps[in]._flags_tm&BIN8(100000)))&&(net_U>100))
;;;4895   //     {
;;;4896   //     bps[in]._flags_bp='W';// ðàáîòàåò
;;;4897   //     bps[in]._is_ready=1;
;;;4898   //     bps[in]._is_wrk=1;
;;;4899        
;;;4900   //     }
;;;4901   //else bps[in]._is_ready=1;     
;;;4902   
;;;4903   
;;;4904   
;;;4905   
;;;4906   
;;;4907   /*
;;;4908   bps[in]._flags_tu&=BIN8(11111110);
;;;4909   if(bps[in]._ist_blok_cnt)
;;;4910   	{
;;;4911   	bps[in]._ist_blok_cnt--;
;;;4912   	bps[in]._flags_tu|=BIN8(1);
;;;4913   	}
;;;4914   
;;;4915   	   */ 
;;;4916   
;;;4917   //Ïåðåñáðîñ ÁÏÑà ïðè ïîòåðå ñâÿçè
;;;4918   if(bps[in]._cnt>=10) bps[in]._flags_tu|=BIN8(10000000);
002b02  78e0              LDRB     r0,[r4,#3]
002b04  280a              CMP      r0,#0xa
002b06  d306              BCC      |L1.11030|
002b08  f894002c          LDRB     r0,[r4,#0x2c]
002b0c  f0400080          ORR      r0,r0,#0x80
002b10  f884002c          STRB     r0,[r4,#0x2c]
002b14  e005              B        |L1.11042|
                  |L1.11030|
;;;4919   else bps[in]._flags_tu&=BIN8(1111111);
002b16  f894002c          LDRB     r0,[r4,#0x2c]
002b1a  f000007f          AND      r0,r0,#0x7f
002b1e  f884002c          STRB     r0,[r4,#0x2c]
                  |L1.11042|
;;;4920   	
;;;4921   bps[in]._vol_u=cntrl_stat+bps[in]._x_;	
002b22  493d              LDR      r1,|L1.11288|
002b24  f9b40050          LDRSH    r0,[r4,#0x50]
002b28  f9b11020          LDRSH    r1,[r1,#0x20]  ; cntrl_stat
002b2c  4408              ADD      r0,r0,r1
002b2e  6320              STR      r0,[r4,#0x30]
;;;4922   bps[in]._vol_i=1000; 
002b30  f44f707a          MOV      r0,#0x3e8
002b34  6360              STR      r0,[r4,#0x34]
                  |L1.11062|
;;;4923   }
002b36  e8bd81f0          POP      {r4-r8,pc}
;;;4924   
                          ENDP

                  avt_hndl PROC
;;;4925   //-----------------------------------------------
;;;4926   void avt_hndl(void)
002b3a  b570              PUSH     {r4-r6,lr}
;;;4927   {
;;;4928   char i;
;;;4929   for(i=0;i<12;i++)
002b3c  f04f0000          MOV      r0,#0
;;;4930   	{
;;;4931   	if(eb2_data_short[6]&(1<<i))
002b40  4936              LDR      r1,|L1.11292|
;;;4932   		{
;;;4933   		avt_stat[i]=avtON;
002b42  4d37              LDR      r5,|L1.11296|
002b44  f04f0401          MOV      r4,#1                 ;4931
002b48  f9b1200c          LDRSH    r2,[r1,#0xc]          ;4931
002b4c  4603              MOV      r3,r0                 ;4929
                  |L1.11086|
002b4e  fa04f100          LSL      r1,r4,r0              ;4931
002b52  420a              TST      r2,r1                 ;4931
002b54  d001              BEQ      |L1.11098|
002b56  542c              STRB     r4,[r5,r0]
002b58  e000              B        |L1.11100|
                  |L1.11098|
;;;4934   		}
;;;4935   	else avt_stat[i]=avtOFF;
002b5a  542b              STRB     r3,[r5,r0]
                  |L1.11100|
002b5c  f1000001          ADD      r0,r0,#1              ;4929
002b60  b2c0              UXTB     r0,r0                 ;4929
002b62  280c              CMP      r0,#0xc               ;4929
002b64  d3f3              BCC      |L1.11086|
;;;4936   	}
;;;4937   
;;;4938   if((avt_stat_old[0]!=avt_stat[0])&&(NUMAVT>=1))
002b66  4e2f              LDR      r6,|L1.11300|
002b68  7828              LDRB     r0,[r5,#0]  ; avt_stat
002b6a  4c2f              LDR      r4,|L1.11304|
002b6c  7831              LDRB     r1,[r6,#0]  ; avt_stat_old
002b6e  4281              CMP      r1,r0
002b70  d00b              BEQ      |L1.11146|
002b72  f9b41000          LDRSH    r1,[r4,#0]  ; NUMAVT
002b76  2901              CMP      r1,#1
002b78  db07              BLT      |L1.11146|
;;;4939   	{
;;;4940   	if(avt_stat[0]==avtON) 	snmp_trap_send("Avtomat #1 is ON ",11,1,1);
002b7a  2801              CMP      r0,#1
002b7c  d07e              BEQ      |L1.11388|
;;;4941   	else 				snmp_trap_send("Avtomat #1 is OFF",11,1,0);
002b7e  2300              MOVS     r3,#0
002b80  2201              MOVS     r2,#1
002b82  210b              MOVS     r1,#0xb
002b84  a029              ADR      r0,|L1.11308|
002b86  f7fffffe          BL       snmp_trap_send
                  |L1.11146|
;;;4942   	}
;;;4943   if((avt_stat_old[1]!=avt_stat[1])&&(NUMAVT>=2))
002b8a  7871              LDRB     r1,[r6,#1]  ; avt_stat_old
002b8c  7868              LDRB     r0,[r5,#1]  ; avt_stat
002b8e  4281              CMP      r1,r0
002b90  d00b              BEQ      |L1.11178|
002b92  f9b41000          LDRSH    r1,[r4,#0]  ; NUMAVT
002b96  2902              CMP      r1,#2
002b98  db07              BLT      |L1.11178|
;;;4944   	{
;;;4945   	if(avt_stat[1]==avtON) 	snmp_trap_send("Avtomat #2 is ON ",11,2,1);
002b9a  2801              CMP      r0,#1
002b9c  d06f              BEQ      |L1.11390|
;;;4946   	else 				snmp_trap_send("Avtomat #2 is OFF",11,2,0);
002b9e  2300              MOVS     r3,#0
002ba0  2202              MOVS     r2,#2
002ba2  210b              MOVS     r1,#0xb
002ba4  a026              ADR      r0,|L1.11328|
002ba6  f7fffffe          BL       snmp_trap_send
                  |L1.11178|
;;;4947   	}
;;;4948   if((avt_stat_old[2]!=avt_stat[2])&&(NUMAVT>=3))
002baa  78b1              LDRB     r1,[r6,#2]  ; avt_stat_old
002bac  78a8              LDRB     r0,[r5,#2]  ; avt_stat
002bae  4281              CMP      r1,r0
002bb0  d00b              BEQ      |L1.11210|
002bb2  f9b41000          LDRSH    r1,[r4,#0]  ; NUMAVT
002bb6  2903              CMP      r1,#3
002bb8  db07              BLT      |L1.11210|
;;;4949   	{
;;;4950   	if(avt_stat[2]==avtON) 	snmp_trap_send("Avtomat #3 is ON ",11,3,1);
002bba  2801              CMP      r0,#1
002bbc  d07e              BEQ      |L1.11452|
;;;4951   	else 				snmp_trap_send("Avtomat #3 is OFF",11,3,0);
002bbe  2300              MOVS     r3,#0
002bc0  2203              MOVS     r2,#3
002bc2  210b              MOVS     r1,#0xb
002bc4  a023              ADR      r0,|L1.11348|
002bc6  f7fffffe          BL       snmp_trap_send
                  |L1.11210|
;;;4952   	}
;;;4953   if((avt_stat_old[3]!=avt_stat[3])&&(NUMAVT>=4))
002bca  78f1              LDRB     r1,[r6,#3]  ; avt_stat_old
002bcc  78e8              LDRB     r0,[r5,#3]  ; avt_stat
002bce  4281              CMP      r1,r0
002bd0  d00b              BEQ      |L1.11242|
002bd2  f9b41000          LDRSH    r1,[r4,#0]  ; NUMAVT
002bd6  2904              CMP      r1,#4
002bd8  db07              BLT      |L1.11242|
;;;4954   	{
;;;4955   	if(avt_stat[3]==avtON) 	snmp_trap_send("Avtomat #4 is ON ",11,4,1);
002bda  2801              CMP      r0,#1
002bdc  d06f              BEQ      |L1.11454|
;;;4956   	else 				snmp_trap_send("Avtomat #4 is OFF",11,4,0);
002bde  2300              MOVS     r3,#0
002be0  2204              MOVS     r2,#4
002be2  210b              MOVS     r1,#0xb
002be4  a020              ADR      r0,|L1.11368|
002be6  f7fffffe          BL       snmp_trap_send
                  |L1.11242|
;;;4957   	}
;;;4958   if((avt_stat_old[4]!=avt_stat[4])&&(NUMAVT>=5))
002bea  7931              LDRB     r1,[r6,#4]  ; avt_stat_old
002bec  7928              LDRB     r0,[r5,#4]  ; avt_stat
002bee  4281              CMP      r1,r0
002bf0  d052              BEQ      |L1.11416|
002bf2  e045              B        |L1.11392|
                  |L1.11252|
                          DCD      ICA_MODBUS_ADDRESS
                  |L1.11256|
                          DCD      ICA_CH
                  |L1.11260|
                          DCD      TBAT
                  |L1.11264|
                          DCD      ipsBlckStat
                  |L1.11268|
                          DCD      ipsBlckSrc
                  |L1.11272|
                          DCD      ipsBlckLog
                  |L1.11276|
                          DCD      ||.bss||+0x400
                  |L1.11280|
                          DCD      bps
                  |L1.11284|
                          DCD      net_av
                  |L1.11288|
                          DCD      ||area_number.23||
                  |L1.11292|
                          DCD      eb2_data_short
                  |L1.11296|
                          DCD      avt_stat
                  |L1.11300|
                          DCD      avt_stat_old
                  |L1.11304|
                          DCD      NUMAVT
                  |L1.11308|
002c2c  4176746f          DCB      "Avtomat #1 is OFF",0
002c30  6d617420
002c34  23312069
002c38  73204f46
002c3c  4600    
002c3e  00                DCB      0
002c3f  00                DCB      0
                  |L1.11328|
002c40  4176746f          DCB      "Avtomat #2 is OFF",0
002c44  6d617420
002c48  23322069
002c4c  73204f46
002c50  4600    
002c52  00                DCB      0
002c53  00                DCB      0
                  |L1.11348|
002c54  4176746f          DCB      "Avtomat #3 is OFF",0
002c58  6d617420
002c5c  23332069
002c60  73204f46
002c64  4600    
002c66  00                DCB      0
002c67  00                DCB      0
                  |L1.11368|
002c68  4176746f          DCB      "Avtomat #4 is OFF",0
002c6c  6d617420
002c70  23342069
002c74  73204f46
002c78  4600    
002c7a  00                DCB      0
002c7b  00                DCB      0
                  |L1.11388|
002c7c  e059              B        |L1.11570|
                  |L1.11390|
002c7e  e05f              B        |L1.11584|
                  |L1.11392|
002c80  f9b41000          LDRSH    r1,[r4,#0]  ; NUMAVT
002c84  2905              CMP      r1,#5
002c86  db07              BLT      |L1.11416|
;;;4959   	{
;;;4960   	if(avt_stat[4]==avtON) 	snmp_trap_send("Avtomat #5 is ON ",11,5,1);
002c88  2801              CMP      r0,#1
002c8a  d06e              BEQ      |L1.11626|
;;;4961   	else 				snmp_trap_send("Avtomat #5 is OFF",11,5,0);
002c8c  2300              MOVS     r3,#0
002c8e  2205              MOVS     r2,#5
002c90  210b              MOVS     r1,#0xb
002c92  a0ff              ADR      r0,|L1.12432|
002c94  f7fffffe          BL       snmp_trap_send
                  |L1.11416|
;;;4962   	}
;;;4963   if((avt_stat_old[5]!=avt_stat[5])&&(NUMAVT>=6))
002c98  7971              LDRB     r1,[r6,#5]  ; avt_stat_old
002c9a  7968              LDRB     r0,[r5,#5]  ; avt_stat
002c9c  4281              CMP      r1,r0
002c9e  d00b              BEQ      |L1.11448|
002ca0  f9b41000          LDRSH    r1,[r4,#0]  ; NUMAVT
002ca4  2906              CMP      r1,#6
002ca6  db07              BLT      |L1.11448|
;;;4964   	{
;;;4965   	if(avt_stat[5]==avtON) 	snmp_trap_send("Avtomat #6 is ON ",11,6,1);
002ca8  2801              CMP      r0,#1
002caa  d065              BEQ      |L1.11640|
;;;4966   	else 				snmp_trap_send("Avtomat #6 is OFF",11,6,0);
002cac  2300              MOVS     r3,#0
002cae  2206              MOVS     r2,#6
002cb0  210b              MOVS     r1,#0xb
002cb2  a0fc              ADR      r0,|L1.12452|
002cb4  f7fffffe          BL       snmp_trap_send
                  |L1.11448|
;;;4967   	}
;;;4968   if((avt_stat_old[6]!=avt_stat[6])&&(NUMAVT>=7))
002cb8  79b1              LDRB     r1,[r6,#6]  ; avt_stat_old
002cba  e001              B        |L1.11456|
                  |L1.11452|
002cbc  e047              B        |L1.11598|
                  |L1.11454|
002cbe  e04d              B        |L1.11612|
                  |L1.11456|
002cc0  79a8              LDRB     r0,[r5,#6]  ; avt_stat
002cc2  4281              CMP      r1,r0
002cc4  d00b              BEQ      |L1.11486|
002cc6  f9b41000          LDRSH    r1,[r4,#0]  ; NUMAVT
002cca  2907              CMP      r1,#7
002ccc  db07              BLT      |L1.11486|
;;;4969   	{
;;;4970   	if(avt_stat[6]==avtON) 	snmp_trap_send("Avtomat #7 is ON ",11,7,1);
002cce  2801              CMP      r0,#1
002cd0  d059              BEQ      |L1.11654|
;;;4971   	else 				snmp_trap_send("Avtomat #7 is OFF",11,7,0);
002cd2  2300              MOVS     r3,#0
002cd4  2207              MOVS     r2,#7
002cd6  210b              MOVS     r1,#0xb
002cd8  a0f7              ADR      r0,|L1.12472|
002cda  f7fffffe          BL       snmp_trap_send
                  |L1.11486|
;;;4972   	}
;;;4973   if((avt_stat_old[7]!=avt_stat[7])&&(NUMAVT>=8))
002cde  79f1              LDRB     r1,[r6,#7]  ; avt_stat_old
002ce0  79e8              LDRB     r0,[r5,#7]  ; avt_stat
002ce2  4281              CMP      r1,r0
002ce4  d00b              BEQ      |L1.11518|
002ce6  f9b41000          LDRSH    r1,[r4,#0]  ; NUMAVT
002cea  2908              CMP      r1,#8
002cec  db07              BLT      |L1.11518|
;;;4974   	{
;;;4975   	if(avt_stat[7]==avtON) 	snmp_trap_send("Avtomat #8 is ON ",11,8,1);
002cee  2801              CMP      r0,#1
002cf0  d050              BEQ      |L1.11668|
;;;4976   	else 				snmp_trap_send("Avtomat #8 is OFF",11,8,0);
002cf2  2300              MOVS     r3,#0
002cf4  2208              MOVS     r2,#8
002cf6  210b              MOVS     r1,#0xb
002cf8  a0f4              ADR      r0,|L1.12492|
002cfa  f7fffffe          BL       snmp_trap_send
                  |L1.11518|
;;;4977   	}
;;;4978   if((avt_stat_old[8]!=avt_stat[8])&&(NUMAVT>=9))
002cfe  7a31              LDRB     r1,[r6,#8]  ; avt_stat_old
002d00  7a28              LDRB     r0,[r5,#8]  ; avt_stat
002d02  4281              CMP      r1,r0
002d04  d00b              BEQ      |L1.11550|
002d06  f9b41000          LDRSH    r1,[r4,#0]  ; NUMAVT
002d0a  2909              CMP      r1,#9
002d0c  db07              BLT      |L1.11550|
;;;4979   	{
;;;4980   	if(avt_stat[8]==avtON) 	snmp_trap_send("Avtomat #9 is ON ",11,9,1);
002d0e  2801              CMP      r0,#1
002d10  d047              BEQ      |L1.11682|
;;;4981   	else 				snmp_trap_send("Avtomat #9 is OFF",11,9,0);
002d12  2300              MOVS     r3,#0
002d14  2209              MOVS     r2,#9
002d16  210b              MOVS     r1,#0xb
002d18  a0f1              ADR      r0,|L1.12512|
002d1a  f7fffffe          BL       snmp_trap_send
                  |L1.11550|
;;;4982   	}
;;;4983   
;;;4984   for(i=0;i<12;i++)
002d1e  f04f0000          MOV      r0,#0
                  |L1.11554|
;;;4985   	{
;;;4986   	avt_stat_old[i]=avt_stat[i];
002d22  5c29              LDRB     r1,[r5,r0]
002d24  5431              STRB     r1,[r6,r0]
002d26  f1000001          ADD      r0,r0,#1              ;4984
002d2a  b2c0              UXTB     r0,r0                 ;4984
002d2c  280c              CMP      r0,#0xc               ;4984
002d2e  d3f8              BCC      |L1.11554|
;;;4987   	}
;;;4988   }
002d30  bd70              POP      {r4-r6,pc}
                  |L1.11570|
002d32  2301              MOVS     r3,#1                 ;4940
002d34  461a              MOV      r2,r3                 ;4940
002d36  210b              MOVS     r1,#0xb               ;4940
002d38  a0ee              ADR      r0,|L1.12532|
002d3a  f7fffffe          BL       snmp_trap_send
002d3e  e724              B        |L1.11146|
                  |L1.11584|
002d40  2301              MOVS     r3,#1                 ;4945
002d42  2202              MOVS     r2,#2                 ;4945
002d44  210b              MOVS     r1,#0xb               ;4945
002d46  a0f0              ADR      r0,|L1.12552|
002d48  f7fffffe          BL       snmp_trap_send
002d4c  e72d              B        |L1.11178|
                  |L1.11598|
002d4e  2301              MOVS     r3,#1                 ;4950
002d50  2203              MOVS     r2,#3                 ;4950
002d52  210b              MOVS     r1,#0xb               ;4950
002d54  a0f1              ADR      r0,|L1.12572|
002d56  f7fffffe          BL       snmp_trap_send
002d5a  e736              B        |L1.11210|
                  |L1.11612|
002d5c  2301              MOVS     r3,#1                 ;4955
002d5e  2204              MOVS     r2,#4                 ;4955
002d60  210b              MOVS     r1,#0xb               ;4955
002d62  a0f3              ADR      r0,|L1.12592|
002d64  f7fffffe          BL       snmp_trap_send
002d68  e73f              B        |L1.11242|
                  |L1.11626|
002d6a  2301              MOVS     r3,#1                 ;4960
002d6c  2205              MOVS     r2,#5                 ;4960
002d6e  210b              MOVS     r1,#0xb               ;4960
002d70  a0f4              ADR      r0,|L1.12612|
002d72  f7fffffe          BL       snmp_trap_send
002d76  e78f              B        |L1.11416|
                  |L1.11640|
002d78  2301              MOVS     r3,#1                 ;4965
002d7a  2206              MOVS     r2,#6                 ;4965
002d7c  210b              MOVS     r1,#0xb               ;4965
002d7e  a0f6              ADR      r0,|L1.12632|
002d80  f7fffffe          BL       snmp_trap_send
002d84  e798              B        |L1.11448|
                  |L1.11654|
002d86  2301              MOVS     r3,#1                 ;4970
002d88  2207              MOVS     r2,#7                 ;4970
002d8a  210b              MOVS     r1,#0xb               ;4970
002d8c  a0f7              ADR      r0,|L1.12652|
002d8e  f7fffffe          BL       snmp_trap_send
002d92  e7a4              B        |L1.11486|
                  |L1.11668|
002d94  2301              MOVS     r3,#1                 ;4975
002d96  2208              MOVS     r2,#8                 ;4975
002d98  210b              MOVS     r1,#0xb               ;4975
002d9a  a0f9              ADR      r0,|L1.12672|
002d9c  f7fffffe          BL       snmp_trap_send
002da0  e7ad              B        |L1.11518|
                  |L1.11682|
002da2  2301              MOVS     r3,#1                 ;4980
002da4  2209              MOVS     r2,#9                 ;4980
002da6  210b              MOVS     r1,#0xb               ;4980
002da8  a0fa              ADR      r0,|L1.12692|
002daa  f7fffffe          BL       snmp_trap_send
002dae  e7b6              B        |L1.11550|
;;;4989   
                          ENDP

                  bat_hndl PROC
;;;4990   //-----------------------------------------------
;;;4991   void bat_hndl(void)
002db0  b570              PUSH     {r4-r6,lr}
;;;4992   {
;;;4993   /*if(mess_find(_MESS_BAT_MASK_ON))
;;;4994   	{
;;;4995   	if(mess_data[0]==_MESS_BAT_MASK_ON)
;;;4996   		{
;;;4997   		char i;
;;;4998   		for(i=0;i<2;i++)
;;;4999   			{
;;;5000   			if(mess_data[1]&(1<<i))
;;;5001   				{
;;;5002   				bat[i]._cnt_to_block=0;
;;;5003        			bat[i]._rel_stat=0;
;;;5004        			}
;;;5005   			}
;;;5006   		}
;;;5007   	}
;;;5008   if(mess_find(_MESS_BAT_MASK_OFF))
;;;5009   	{		
;;;5010   	if(mess_data[0]==_MESS_BAT_MASK_OFF)
;;;5011   		{
;;;5012   		char i;
;;;5013   		for(i=0;i<2;i++)
;;;5014   			{
;;;5015   			if((mess_data[1]&(1<<i)) && (bat[i]._cnt_to_block==0) && (bat[i]._rel_stat==0))
;;;5016   				{
;;;5017   				bat[i]._cnt_to_block=20;
;;;5018   				bat[i]._rel_stat=1;
;;;5019        			}
;;;5020   			}
;;;5021   		
;;;5022   		}		
;;;5023   	}*/
;;;5024   
;;;5025   if(mess_find_unvol(MESS2BAT_HNDL))
002db2  20c8              MOVS     r0,#0xc8
002db4  f7fffffe          BL       mess_find_unvol
;;;5026   	{ 
;;;5027   	char i;
;;;5028   	
;;;5029   	if(mess_data[0]==PARAM_BAT_ALL_OFF_AFTER_2SEC)
;;;5030   		{
;;;5031   		for(i=0;i<MAX_NUM_OF_BAT;i++)
;;;5032   			{
;;;5033   			if(bat[i]._cnt_to_block<50)bat[i]._cnt_to_block++;
002db8  49fb              LDR      r1,|L1.12712|
002dba  2200              MOVS     r2,#0                 ;5031
002dbc  b3a8              CBZ      r0,|L1.11818|
002dbe  4bfb              LDR      r3,|L1.12716|
;;;5034   			}
;;;5035   		}
;;;5036   
;;;5037   	else if(mess_data[0]==PARAM_BAT_MASK_OFF_AFTER_2SEC)
;;;5038   		{
;;;5039   		for(i=0;i<MAX_NUM_OF_BAT;i++)
;;;5040   			{
;;;5041   			if(mess_data[1]&(1<<i))
002dc0  2401              MOVS     r4,#1
002dc2  6818              LDR      r0,[r3,#0]            ;5029  ; mess_data
002dc4  28c9              CMP      r0,#0xc9              ;5029
002dc6  d01c              BEQ      |L1.11778|
002dc8  28ca              CMP      r0,#0xca              ;5037
002dca  d02f              BEQ      |L1.11820|
;;;5042   				{
;;;5043   				if(bat[i]._cnt_to_block<50) bat[i]._cnt_to_block++;
;;;5044   				}
;;;5045   			else bat[i]._cnt_to_block=0;
;;;5046   			}
;;;5047   		}
;;;5048   	else 
;;;5049   	 	{
;;;5050   		for(i=0;i<MAX_NUM_OF_BAT;i++)
002dcc  4610              MOV      r0,r2
                  |L1.11726|
;;;5051   			{
;;;5052   			bat[i]._cnt_to_block=0;
002dce  eb000340          ADD      r3,r0,r0,LSL #1
002dd2  eb031300          ADD      r3,r3,r0,LSL #4
002dd6  f8012023          STRB     r2,[r1,r3,LSL #2]
002dda  f1000001          ADD      r0,r0,#1              ;5050
002dde  b2c0              UXTB     r0,r0                 ;5050
002de0  2802              CMP      r0,#2                 ;5050
002de2  d3f4              BCC      |L1.11726|
                  |L1.11748|
;;;5053   			}
;;;5054   
;;;5055   		}
;;;5056   	for(i=0;i<MAX_NUM_OF_BAT;i++)
002de4  f04f0000          MOV      r0,#0
                  |L1.11752|
;;;5057   		{
;;;5058   		if(bat[i]._cnt_to_block>20)bat[i]._rel_stat=1;
002de8  eb000340          ADD      r3,r0,r0,LSL #1
002dec  eb031300          ADD      r3,r3,r0,LSL #4
002df0  f8115023          LDRB     r5,[r1,r3,LSL #2]
002df4  2d14              CMP      r5,#0x14
002df6  d939              BLS      |L1.11884|
002df8  eb010383          ADD      r3,r1,r3,LSL #2
002dfc  f883403c          STRB     r4,[r3,#0x3c]
002e00  e038              B        |L1.11892|
                  |L1.11778|
002e02  f04f0000          MOV      r0,#0                 ;5031
                  |L1.11782|
002e06  eb000340          ADD      r3,r0,r0,LSL #1       ;5033
002e0a  eb031500          ADD      r5,r3,r0,LSL #4       ;5033
002e0e  f8113025          LDRB     r3,[r1,r5,LSL #2]     ;5033
002e12  2b32              CMP      r3,#0x32              ;5033
002e14  d203              BCS      |L1.11806|
002e16  f1030301          ADD      r3,r3,#1              ;5033
002e1a  f8013025          STRB     r3,[r1,r5,LSL #2]     ;5033
                  |L1.11806|
002e1e  f1000001          ADD      r0,r0,#1              ;5031
002e22  b2c0              UXTB     r0,r0                 ;5031
002e24  2802              CMP      r0,#2                 ;5031
002e26  d3ee              BCC      |L1.11782|
002e28  e7dc              B        |L1.11748|
                  |L1.11818|
002e2a  e029              B        |L1.11904|
                  |L1.11820|
002e2c  f04f0000          MOV      r0,#0                 ;5039
002e30  685e              LDR      r6,[r3,#4]            ;5041
                  |L1.11826|
002e32  fa04f300          LSL      r3,r4,r0              ;5041
002e36  421e              TST      r6,r3                 ;5041
002e38  d00c              BEQ      |L1.11860|
002e3a  eb000340          ADD      r3,r0,r0,LSL #1       ;5043
002e3e  eb031500          ADD      r5,r3,r0,LSL #4       ;5043
002e42  f8113025          LDRB     r3,[r1,r5,LSL #2]     ;5043
002e46  2b32              CMP      r3,#0x32              ;5043
002e48  d20a              BCS      |L1.11872|
002e4a  f1030301          ADD      r3,r3,#1              ;5043
002e4e  f8013025          STRB     r3,[r1,r5,LSL #2]     ;5043
002e52  e005              B        |L1.11872|
                  |L1.11860|
002e54  eb000340          ADD      r3,r0,r0,LSL #1       ;5045
002e58  eb031300          ADD      r3,r3,r0,LSL #4       ;5045
002e5c  f8012023          STRB     r2,[r1,r3,LSL #2]     ;5045
                  |L1.11872|
002e60  f1000001          ADD      r0,r0,#1              ;5039
002e64  b2c0              UXTB     r0,r0                 ;5039
002e66  2802              CMP      r0,#2                 ;5039
002e68  d3e3              BCC      |L1.11826|
002e6a  e7bb              B        |L1.11748|
                  |L1.11884|
;;;5059   		else bat[i]._rel_stat=0;
002e6c  eb010383          ADD      r3,r1,r3,LSL #2
002e70  f883203c          STRB     r2,[r3,#0x3c]
                  |L1.11892|
002e74  f1000001          ADD      r0,r0,#1              ;5056
002e78  b2c0              UXTB     r0,r0                 ;5056
002e7a  2802              CMP      r0,#2                 ;5056
002e7c  d3b4              BCC      |L1.11752|
;;;5060   		}
;;;5061   
;;;5062   	}
;;;5063   
;;;5064   else 
;;;5065   	{
;;;5066   	char i;
;;;5067   	for(i=0;i<MAX_NUM_OF_BAT;i++)
;;;5068   		{
;;;5069   		bat[i]._cnt_to_block=0;
;;;5070   		bat[i]._rel_stat=0;
;;;5071   		}
;;;5072   
;;;5073   	}
;;;5074   
;;;5075   /*if(mess_find_unvol(MESS2BAT_HNDL1))
;;;5076   	{
;;;5077   	if(PARAM_BAT_ON)
;;;5078   		{
;;;5079   		char i;
;;;5080   		for(i=0;i<MAX_NUM_OF_BAT;i++)
;;;5081   			{
;;;5082   			if(mess_data[1]&(1<<i))
;;;5083   				{
;;;5084   				bat[i]._cnt_to_block=0;
;;;5085   				bat[i]._rel_stat=0;
;;;5086   				}
;;;5087   			}
;;;5088   		}
;;;5089   	} */
;;;5090   }
002e7e  bd70              POP      {r4-r6,pc}
                  |L1.11904|
002e80  f04f0000          MOV      r0,#0                 ;5067
                  |L1.11908|
002e84  eb000340          ADD      r3,r0,r0,LSL #1       ;5069
002e88  eb031300          ADD      r3,r3,r0,LSL #4       ;5069
002e8c  f8012023          STRB     r2,[r1,r3,LSL #2]     ;5069
002e90  eb010383          ADD      r3,r1,r3,LSL #2       ;5070
002e94  f883203c          STRB     r2,[r3,#0x3c]         ;5070
002e98  f1000001          ADD      r0,r0,#1              ;5067
002e9c  b2c0              UXTB     r0,r0                 ;5067
002e9e  2802              CMP      r0,#2                 ;5067
002ea0  d3f0              BCC      |L1.11908|
002ea2  bd70              POP      {r4-r6,pc}
;;;5091   
                          ENDP

                  bat_drv PROC
;;;5729   //-----------------------------------------------
;;;5730   void bat_drv(char in)
002ea4  e92d4ffe          PUSH     {r1-r11,lr}
;;;5731   {
002ea8  4605              MOV      r5,r0
;;;5732   unsigned short /*tempUS,*/tempUS_;
;;;5733   unsigned long tempUL,tempUL_;
;;;5734   unsigned short b_zar;
;;;5735   //static unsigned short time_cnt[2];
;;;5736   
;;;5737   
;;;5738   
;;;5739   if(cntrl_stat_blok_cnt_plus[in])cntrl_stat_blok_cnt_plus[in]--;
002eaa  49c1              LDR      r1,|L1.12720|
002eac  f9310015          LDRSH    r0,[r1,r5,LSL #1]
002eb0  b118              CBZ      r0,|L1.11962|
002eb2  f1a00001          SUB      r0,r0,#1
002eb6  f8210015          STRH     r0,[r1,r5,LSL #1]
                  |L1.11962|
;;;5740   if(cntrl_stat_blok_cnt_minus[in])cntrl_stat_blok_cnt_minus[in]--;
002eba  4abd              LDR      r2,|L1.12720|
002ebc  1d12              ADDS     r2,r2,#4
002ebe  f9320015          LDRSH    r0,[r2,r5,LSL #1]
002ec2  b118              CBZ      r0,|L1.11980|
002ec4  f1a00001          SUB      r0,r0,#1
002ec8  f8220015          STRH     r0,[r2,r5,LSL #1]
                  |L1.11980|
;;;5741   
;;;5742   
;;;5743   if(bat[in]._Ib>IZMAX) cntrl_stat_blok_cnt_plus[in]=100;
002ecc  eb050045          ADD      r0,r5,r5,LSL #1
002ed0  4bb5              LDR      r3,|L1.12712|
002ed2  eb001005          ADD      r0,r0,r5,LSL #4
002ed6  eb030480          ADD      r4,r3,r0,LSL #2
002eda  4bb6              LDR      r3,|L1.12724|
002edc  9002              STR      r0,[sp,#8]
002ede  f9b40008          LDRSH    r0,[r4,#8]
002ee2  f9b33000          LDRSH    r3,[r3,#0]  ; IZMAX
002ee6  f04f0b64          MOV      r11,#0x64
002eea  4298              CMP      r0,r3
002eec  dd01              BLE      |L1.12018|
002eee  f821b015          STRH     r11,[r1,r5,LSL #1]
                  |L1.12018|
;;;5744   if(bat[in]._Ib<0)     cntrl_stat_blok_cnt_minus[in]=100;
002ef2  2800              CMP      r0,#0
002ef4  da01              BGE      |L1.12026|
002ef6  f822b015          STRH     r11,[r2,r5,LSL #1]
                  |L1.12026|
;;;5745   
;;;5746   if(cntrl_stat_blok_cnt_plus[in] && cntrl_stat_blok_cnt_minus[in])
;;;5747        {
;;;5748        if(!cntrl_stat_blok_cnt_)
002efa  48ad              LDR      r0,|L1.12720|
002efc  f8313015          LDRH     r3,[r1,r5,LSL #1]     ;5746
002f00  3888              SUBS     r0,r0,#0x88
002f02  2700              MOVS     r7,#0
002f04  b14b              CBZ      r3,|L1.12058|
002f06  f8323015          LDRH     r3,[r2,r5,LSL #1]     ;5746
002f0a  b133              CBZ      r3,|L1.12058|
002f0c  f8b03064          LDRH     r3,[r0,#0x64]  ; cntrl_stat_blok_cnt_
002f10  b1a3              CBZ      r3,|L1.12092|
;;;5749             {
;;;5750             cntrl_stat_blok_cnt_=600; 
;;;5751             cntrl_stat_blok_cnt_plus[in]=0;
;;;5752             cntrl_stat_blok_cnt_minus[in]=0;
;;;5753             }
;;;5754        else cntrl_stat_blok_cnt=3000;
002f12  f64031b8          MOV      r1,#0xbb8
002f16  f8a01062          STRH     r1,[r0,#0x62]
                  |L1.12058|
;;;5755        }
;;;5756   cntrl_stat_blok_cnt=0;
002f1a  f8a07062          STRH     r7,[r0,#0x62]
;;;5757   
;;;5758   if(++(bat[in]._time_cnt)>=10)
002f1e  f894003e          LDRB     r0,[r4,#0x3e]
002f22  1c40              ADDS     r0,r0,#1
002f24  b2c0              UXTB     r0,r0
002f26  f884003e          STRB     r0,[r4,#0x3e]
002f2a  280a              CMP      r0,#0xa
002f2c  d301              BCC      |L1.12082|
;;;5759   	{
;;;5760   	bat[in]._time_cnt=0;
002f2e  f884703e          STRB     r7,[r4,#0x3e]
                  |L1.12082|
;;;5761   	//bat[in]._zar_cnt++;
;;;5762   	}
;;;5763   
;;;5764   if(main_10Hz_cnt==50)
002f32  4ea1              LDR      r6,|L1.12728|
002f34  8830              LDRH     r0,[r6,#0]  ; main_10Hz_cnt
002f36  2832              CMP      r0,#0x32
002f38  d009              BEQ      |L1.12110|
002f3a  e017              B        |L1.12140|
                  |L1.12092|
002f3c  f44f7316          MOV      r3,#0x258             ;5750
002f40  f8a03064          STRH     r3,[r0,#0x64]         ;5750
002f44  f8217015          STRH     r7,[r1,r5,LSL #1]     ;5751
002f48  f8227015          STRH     r7,[r2,r5,LSL #1]     ;5752
002f4c  e7e5              B        |L1.12058|
                  |L1.12110|
;;;5765   	{
;;;5766   	if(!bat[in]._rel_stat)
002f4e  f894003c          LDRB     r0,[r4,#0x3c]
002f52  b958              CBNZ     r0,|L1.12140|
;;;5767   		{
;;;5768   		
;;;5769   		if(bat[in]._Ub<80) 
002f54  f9b40002          LDRSH    r0,[r4,#2]
002f58  2850              CMP      r0,#0x50
002f5a  da07              BGE      |L1.12140|
;;;5770   			{
;;;5771   			
;;;5772   			if(!(bat[in]._av&1))
002f5c  f894003d          LDRB     r0,[r4,#0x3d]
002f60  07c0              LSLS     r0,r0,#31
002f62  d103              BNE      |L1.12140|
;;;5773   				{
;;;5774   				avar_bat_hndl(in,1);
002f64  2101              MOVS     r1,#1
002f66  4628              MOV      r0,r5
002f68  f7fffffe          BL       avar_bat_hndl
                  |L1.12140|
;;;5775   				//if(in==0)plazma_bat++;
;;;5776   				}
;;;5777   			}				
;;;5778   
;;;5779   		}
;;;5780   	}
;;;5781   
;;;5782   if(main_10Hz_cnt>200)
002f6c  f9b60000          LDRSH    r0,[r6,#0]  ; main_10Hz_cnt
;;;5783   	{
;;;5784   	if(abs(bat[in]._Ib)>IKB) 
002f70  4e92              LDR      r6,|L1.12732|
002f72  28c8              CMP      r0,#0xc8              ;5782
002f74  dd0f              BLE      |L1.12182|
002f76  f9b40008          LDRSH    r0,[r4,#8]
002f7a  f7fffffe          BL       abs
002f7e  f9b61000          LDRSH    r1,[r6,#0]  ; IKB
002f82  4288              CMP      r0,r1
002f84  dd07              BLE      |L1.12182|
;;;5785   		{
;;;5786   		if((bat[in]._av&1))avar_bat_hndl(in,0);
002f86  f894003d          LDRB     r0,[r4,#0x3d]
002f8a  07c0              LSLS     r0,r0,#31
002f8c  d003              BEQ      |L1.12182|
002f8e  2100              MOVS     r1,#0
002f90  4628              MOV      r0,r5
002f92  f7fffffe          BL       avar_bat_hndl
                  |L1.12182|
;;;5787   		}
;;;5788   	}
;;;5789   
;;;5790   #ifdef APSENERGIA
;;;5791   //if(bat[in]._Ib>(-IKB))
;;;5792   
;;;5793   
;;;5794   #endif
;;;5795   
;;;5796   if(bat[in]._Ib>(-IKB))
002f96  4889              LDR      r0,|L1.12732|
002f98  f9b41008          LDRSH    r1,[r4,#8]
002f9c  f9b00000          LDRSH    r0,[r0,#0]  ; IKB
002fa0  4240              RSBS     r0,r0,#0
002fa2  4281              CMP      r1,r0
002fa4  dd14              BLE      |L1.12240|
;;;5797   	{
;;;5798   	if(bat[in]._cnt_wrk<10)
002fa6  7b60              LDRB     r0,[r4,#0xd]
002fa8  280a              CMP      r0,#0xa
002faa  d20d              BCS      |L1.12232|
;;;5799   		{
;;;5800   		bat[in]._cnt_wrk++;
002fac  f1000001          ADD      r0,r0,#1
002fb0  b2c0              UXTB     r0,r0
002fb2  7360              STRB     r0,[r4,#0xd]
;;;5801   		if((bat[in]._cnt_wrk>=10)&&(bat[in]._wrk)) 
002fb4  280a              CMP      r0,#0xa
002fb6  d306              BCC      |L1.12230|
002fb8  7ba0              LDRB     r0,[r4,#0xe]
002fba  2800              CMP      r0,#0
002fbc  d003              BEQ      |L1.12230|
;;;5802   			{
;;;5803   			bat[in]._wrk=0;
002fbe  73a7              STRB     r7,[r4,#0xe]
;;;5804   			//beep_init(0x7L,'O');
;;;5805   			//wrk_mem_hndl(0);
;;;5806   			wrk_mem_hndl(in);
002fc0  4628              MOV      r0,r5
002fc2  f7fffffe          BL       wrk_mem_hndl
                  |L1.12230|
002fc6  e106              B        |L1.12758|
                  |L1.12232|
;;;5807   			//plazma++;
;;;5808   			}
;;;5809   		}
;;;5810   	else bat[in]._cnt_wrk=10;	
002fc8  f04f000a          MOV      r0,#0xa
002fcc  7360              STRB     r0,[r4,#0xd]
002fce  e102              B        |L1.12758|
                  |L1.12240|
;;;5811   	}	
;;;5812   
;;;5813   else if(bat[in]._Ib<(-IKB))
002fd0  da40              BGE      |L1.12372|
;;;5814   	{
;;;5815   	if(bat[in]._cnt_wrk)
002fd2  7b60              LDRB     r0,[r4,#0xd]
002fd4  b3f0              CBZ      r0,|L1.12372|
;;;5816   		{
;;;5817   		bat[in]._cnt_wrk--;
002fd6  f1a00001          SUB      r0,r0,#1
002fda  b2c0              UXTB     r0,r0
002fdc  7360              STRB     r0,[r4,#0xd]
;;;5818   		if((bat[in]._cnt_wrk==0)&&(bat[in]._wrk==0)) 
002fde  bbc8              CBNZ     r0,|L1.12372|
002fe0  7ba0              LDRB     r0,[r4,#0xe]
002fe2  bbb8              CBNZ     r0,|L1.12372|
;;;5819   			{
;;;5820   			bat[in]._wrk=1;
002fe4  f04f0001          MOV      r0,#1
002fe8  73a0              STRB     r0,[r4,#0xe]
;;;5821   
;;;5822   				{
;;;5823   				char temp;
;;;5824   				signed short temp_temp;
;;;5825   				temp_temp=bat[in]._u_old[((bat_u_old_cnt+1)&0x07)];
002fea  4875              LDR      r0,|L1.12736|
002fec  8800              LDRH     r0,[r0,#0]  ; bat_u_old_cnt
002fee  f1000001          ADD      r0,r0,#1
002ff2  f0000007          AND      r0,r0,#7
002ff6  eb040040          ADD      r0,r4,r0,LSL #1
002ffa  8c00              LDRH     r0,[r0,#0x20]
002ffc  9000              STR      r0,[sp,#0]
;;;5826   			 
;;;5827   				temp=LPC_RTC->YEAR;
002ffe  4e71              LDR      r6,|L1.12740|
003000  8bb0              LDRH     r0,[r6,#0x1c]
003002  9001              STR      r0,[sp,#4]
;;;5828   				gran_char((signed char*)&temp,1,99);
003004  f04f0263          MOV      r2,#0x63
003008  f04f0101          MOV      r1,#1
00300c  a801              ADD      r0,sp,#4
00300e  f7fffffe          BL       gran_char
;;;5829   				*((char*)(&(bat[in]._wrk_date[0])))=temp;
003012  f104041c          ADD      r4,r4,#0x1c
003016  f89d0004          LDRB     r0,[sp,#4]
00301a  7620              STRB     r0,[r4,#0x18]
;;;5830   			
;;;5831   				temp=LPC_RTC->MONTH;
00301c  7e30              LDRB     r0,[r6,#0x18]
00301e  9001              STR      r0,[sp,#4]
;;;5832   				gran_char((signed char*)&temp,1,12);
003020  f04f020c          MOV      r2,#0xc
003024  f04f0101          MOV      r1,#1
003028  a801              ADD      r0,sp,#4
00302a  f7fffffe          BL       gran_char
;;;5833   				*(((char*)(&(bat[in]._wrk_date[0])))+1)=temp;
00302e  f89d0004          LDRB     r0,[sp,#4]
003032  7660              STRB     r0,[r4,#0x19]
;;;5834   			
;;;5835   				temp=LPC_RTC->DOM;
003034  7b30              LDRB     r0,[r6,#0xc]
003036  9001              STR      r0,[sp,#4]
;;;5836   				gran_char((signed char*)&temp,1,31);
003038  221f              MOVS     r2,#0x1f
00303a  2101              MOVS     r1,#1
00303c  a801              ADD      r0,sp,#4
00303e  f7fffffe          BL       gran_char
;;;5837   				*(((char*)(&(bat[in]._wrk_date[0])))+2)=temp;			
003042  f89d0004          LDRB     r0,[sp,#4]
003046  76a0              STRB     r0,[r4,#0x1a]
;;;5838   				
;;;5839   				*(((char*)(&(bat[in]._wrk_date[0])))+3)=*((char*)&temp_temp);
003048  f89d0000          LDRB     r0,[sp,#0]
00304c  76e0              STRB     r0,[r4,#0x1b]
;;;5840   
;;;5841   				temp=LPC_RTC->HOUR;
00304e  7a30              LDRB     r0,[r6,#8]
003050  9001              STR      r0,[sp,#4]
;;;5842   				gran_char((signed char*)&temp,0,23);
003052  e000              B        |L1.12374|
                  |L1.12372|
003054  e0bf              B        |L1.12758|
                  |L1.12374|
003056  2217              MOVS     r2,#0x17
003058  2100              MOVS     r1,#0
00305a  a801              ADD      r0,sp,#4
00305c  f7fffffe          BL       gran_char
;;;5843   				*((char*)(&(bat[in]._wrk_date[1])))=temp;
003060  f89d0004          LDRB     r0,[sp,#4]
003064  7720              STRB     r0,[r4,#0x1c]
;;;5844                  	
;;;5845   				temp=LPC_RTC->MIN;
003066  7930              LDRB     r0,[r6,#4]
003068  9001              STR      r0,[sp,#4]
;;;5846   				gran_char((signed char*)&temp,0,59);
00306a  223b              MOVS     r2,#0x3b
00306c  2100              MOVS     r1,#0
00306e  a801              ADD      r0,sp,#4
003070  f7fffffe          BL       gran_char
;;;5847   				*(((char*)(&(bat[in]._wrk_date[1])))+1)=temp;
003074  f89d0004          LDRB     r0,[sp,#4]
003078  7760              STRB     r0,[r4,#0x1d]
;;;5848   	          
;;;5849   				temp=LPC_RTC->SEC;
00307a  7830              LDRB     r0,[r6,#0]
00307c  9001              STR      r0,[sp,#4]
;;;5850   				gran_char((signed char*)&temp,0,59);
00307e  223b              MOVS     r2,#0x3b
003080  2100              MOVS     r1,#0
003082  a801              ADD      r0,sp,#4
003084  f7fffffe          BL       gran_char
;;;5851   				*(((char*)(&(bat[in]._wrk_date[1])))+2)=temp;
003088  f89d0004          LDRB     r0,[sp,#4]
00308c  77a0              STRB     r0,[r4,#0x1e]
;;;5852   			
;;;5853   				*(((char*)(&(bat[in]._wrk_date[1])))+3)=*(((char*)&temp_temp)+1);
00308e  e09b              B        |L1.12744|
                  |L1.12432|
003090  4176746f          DCB      "Avtomat #5 is OFF",0
003094  6d617420
003098  23352069
00309c  73204f46
0030a0  4600    
0030a2  00                DCB      0
0030a3  00                DCB      0
                  |L1.12452|
0030a4  4176746f          DCB      "Avtomat #6 is OFF",0
0030a8  6d617420
0030ac  23362069
0030b0  73204f46
0030b4  4600    
0030b6  00                DCB      0
0030b7  00                DCB      0
                  |L1.12472|
0030b8  4176746f          DCB      "Avtomat #7 is OFF",0
0030bc  6d617420
0030c0  23372069
0030c4  73204f46
0030c8  4600    
0030ca  00                DCB      0
0030cb  00                DCB      0
                  |L1.12492|
0030cc  4176746f          DCB      "Avtomat #8 is OFF",0
0030d0  6d617420
0030d4  23382069
0030d8  73204f46
0030dc  4600    
0030de  00                DCB      0
0030df  00                DCB      0
                  |L1.12512|
0030e0  4176746f          DCB      "Avtomat #9 is OFF",0
0030e4  6d617420
0030e8  23392069
0030ec  73204f46
0030f0  4600    
0030f2  00                DCB      0
0030f3  00                DCB      0
                  |L1.12532|
0030f4  4176746f          DCB      "Avtomat #1 is ON ",0
0030f8  6d617420
0030fc  23312069
003100  73204f4e
003104  2000    
003106  00                DCB      0
003107  00                DCB      0
                  |L1.12552|
003108  4176746f          DCB      "Avtomat #2 is ON ",0
00310c  6d617420
003110  23322069
003114  73204f4e
003118  2000    
00311a  00                DCB      0
00311b  00                DCB      0
                  |L1.12572|
00311c  4176746f          DCB      "Avtomat #3 is ON ",0
003120  6d617420
003124  23332069
003128  73204f4e
00312c  2000    
00312e  00                DCB      0
00312f  00                DCB      0
                  |L1.12592|
003130  4176746f          DCB      "Avtomat #4 is ON ",0
003134  6d617420
003138  23342069
00313c  73204f4e
003140  2000    
003142  00                DCB      0
003143  00                DCB      0
                  |L1.12612|
003144  4176746f          DCB      "Avtomat #5 is ON ",0
003148  6d617420
00314c  23352069
003150  73204f4e
003154  2000    
003156  00                DCB      0
003157  00                DCB      0
                  |L1.12632|
003158  4176746f          DCB      "Avtomat #6 is ON ",0
00315c  6d617420
003160  23362069
003164  73204f4e
003168  2000    
00316a  00                DCB      0
00316b  00                DCB      0
                  |L1.12652|
00316c  4176746f          DCB      "Avtomat #7 is ON ",0
003170  6d617420
003174  23372069
003178  73204f4e
00317c  2000    
00317e  00                DCB      0
00317f  00                DCB      0
                  |L1.12672|
003180  4176746f          DCB      "Avtomat #8 is ON ",0
003184  6d617420
003188  23382069
00318c  73204f4e
003190  2000    
003192  00                DCB      0
003193  00                DCB      0
                  |L1.12692|
003194  4176746f          DCB      "Avtomat #9 is ON ",0
003198  6d617420
00319c  23392069
0031a0  73204f4e
0031a4  2000    
0031a6  00                DCB      0
0031a7  00                DCB      0
                  |L1.12712|
                          DCD      bat
                  |L1.12716|
                          DCD      mess_data
                  |L1.12720|
                          DCD      ||area_number.23||+0x88
                  |L1.12724|
                          DCD      IZMAX
                  |L1.12728|
                          DCD      main_10Hz_cnt
                  |L1.12732|
                          DCD      IKB
                  |L1.12736|
                          DCD      bat_u_old_cnt
                  |L1.12740|
                          DCD      0x40024020
                  |L1.12744|
0031c8  f89d0001          LDRB     r0,[sp,#1]
0031cc  77e0              STRB     r0,[r4,#0x1f]
;;;5854   				bat[in]._Iintegr=0;		//Ñ÷åò÷èê äåñÿòêîâ ìèëèàìïåðñåêóíä
0031ce  8027              STRH     r7,[r4,#0]
;;;5855   				bat[in]._Iintegr_=0;	//Ñ÷åò÷èê ñîòåí ìèëèàìïåð÷àñîâ
0031d0  8067              STRH     r7,[r4,#2]
0031d2  f1a4041c          SUB      r4,r4,#0x1c
                  |L1.12758|
;;;5856   				}
;;;5857   	
;;;5858   			}
;;;5859   
;;;5860   		}
;;;5861   	else bat[in]._cnt_wrk=0;	 
;;;5862   	
;;;5863   	}					
;;;5864   
;;;5865   /*
;;;5866   if(Ibat>=(-IKB))
;;;5867   	{
;;;5868   	if(cnt_wrk<10)
;;;5869   		{
;;;5870   		cnt_wrk++;
;;;5871   		if((cnt_wrk>=10)&&(wrk!=wrkOFF)) 
;;;5872   			{
;;;5873   			wrk=wrkOFF;
;;;5874   			//beep_init(0x7L,'O');
;;;5875   			wrk_mem_hndl(ibat_integr);
;;;5876   			}
;;;5877   		}
;;;5878   	else cnt_wrk=10;	
;;;5879   	}	
;;;5880   
;;;5881   else if((Ibat<(-IKB))&&(spc_stat!=spc_KE))
;;;5882   	{
;;;5883   	if(cnt_wrk)
;;;5884   		{
;;;5885   		cnt_wrk--;
;;;5886   		if((cnt_wrk==0)&&(wrk!=wrkON)) 
;;;5887   			{
;;;5888   			char temp;
;;;5889   			signed short temp_temp;
;;;5890   			temp_temp=ubat_old[((ubat_old_cnt+1)&0x07)];
;;;5891   			 
;;;5892   			wrk=wrkON;
;;;5893   			
;;;5894   			temp=_year;
;;;5895   			gran_char(&temp,1,99);
;;;5896   			*((char*)(&(wrk_date[0])))=temp;
;;;5897   			
;;;5898   			temp=_month;
;;;5899   			gran_char(&temp,1,12);
;;;5900   			*(((char*)(&(wrk_date[0])))+1)=temp;
;;;5901   			
;;;5902   			temp=_date;
;;;5903   			gran_char(&temp,1,31);
;;;5904   			*(((char*)(&(wrk_date[0])))+2)=temp;			
;;;5905   				
;;;5906   			*(((char*)(&(wrk_date[0])))+3)=*((char*)&temp_temp);
;;;5907   
;;;5908   			temp=_hour;
;;;5909   			gran_char(&temp,0,23);
;;;5910   			*((char*)(&(wrk_date[1])))=temp;
;;;5911                  
;;;5912   			temp=_min;
;;;5913   			gran_char(&temp,0,59);
;;;5914   			*(((char*)(&(wrk_date[1])))+1)=temp;
;;;5915   	          
;;;5916   			temp=_sec;
;;;5917   			gran_char(&temp,0,59);
;;;5918   			*(((char*)(&(wrk_date[1])))+2)=temp;
;;;5919   			
;;;5920   			*(((char*)(&(wrk_date[1])))+3)=*(((char*)&temp_temp)+1);
;;;5921   
;;;5922   			
;;;5923   			//beep_init(0xFL,'O'); 
;;;5924   			ibat_integr=0;
;;;5925   			ibat_integr_=0;
;;;5926   			}
;;;5927   		}
;;;5928   	else cnt_wrk=0;	 
;;;5929   	
;;;5930   	}
;;;5931   if(wrk==wrkON)
;;;5932   	{
;;;5933   	ibat_integr_+=-Ibat;
;;;5934   	if(ibat_integr_>=SEC_IN_HOUR*10L)
;;;5935   		{
;;;5936   		ibat_integr_-=SEC_IN_HOUR*10L;
;;;5937   		ibat_integr++;
;;;5938   		}
;;;5939   	}
;;;5940   
;;;5941   */
;;;5942   
;;;5943   
;;;5944   /*if(bat[in]._cnt_to_block)
;;;5945   	{
;;;5946   	bat[in]._cnt_to_block--;
;;;5947   	if(!(bat[in]._cnt_to_block))
;;;5948   		{
;;;5949   		//bat[in]._rel_stat=1;
;;;5950   		}
;;;5951   	}
;;;5952   */
;;;5953   
;;;5954   
;;;5955   
;;;5956   
;;;5957   //unsigned int tempUI,tempUI_;
;;;5958   //unsigned int b_zar; 
;;;5959   //char i;
;;;5960   //Ibat[0]=5000;                     
;;;5961   
;;;5962   
;;;5963                               
;;;5964   if(bat[in]._time_cnt==0)
;;;5965   	{
;;;5966   	bat[in]._zar_cnt+=(signed long)bat[in]._Ib;
;;;5967   	
;;;5968   	if(bat[in]._zar_cnt>=AH_CONSTANT)
0031d6  f64848a0          MOV      r8,#0x8ca0
0031da  f894003e          LDRB     r0,[r4,#0x3e]         ;5964
0031de  2800              CMP      r0,#0                 ;5964
0031e0  d17e              BNE      |L1.13024|
0031e2  f9b41008          LDRSH    r1,[r4,#8]            ;5966
0031e6  6960              LDR      r0,[r4,#0x14]         ;5966
0031e8  4408              ADD      r0,r0,r1              ;5966
0031ea  6160              STR      r0,[r4,#0x14]         ;5966
;;;5969   		{
;;;5970   		if(BAT_C_REAL[in]==0x5555) tempUS_=BAT_C_NOM[in];
;;;5971   		else tempUS_=BAT_C_REAL[in];
;;;5972   		
;;;5973   		b_zar=lc640_read_int(ADR_EE_BAT_ZAR_CNT[in]);
0031ec  f8df93ec          LDR      r9,|L1.13788|
0031f0  f8dfa3ec          LDR      r10,|L1.13792|
0031f4  4540              CMP      r0,r8                 ;5968
0031f6  db2a              BLT      |L1.12878|
0031f8  f93a1015          LDRSH    r1,[r10,r5,LSL #1]    ;5970
0031fc  f5a140aa          SUB      r0,r1,#0x5500         ;5970
003200  3855              SUBS     r0,r0,#0x55           ;5970
003202  d103              BNE      |L1.12812|
003204  48f7              LDR      r0,|L1.13796|
003206  f8306015          LDRH     r6,[r0,r5,LSL #1]     ;5970
00320a  e001              B        |L1.12816|
                  |L1.12812|
00320c  f83a6015          LDRH     r6,[r10,r5,LSL #1]    ;5971
                  |L1.12816|
003210  f8390015          LDRH     r0,[r9,r5,LSL #1]
003214  f7fffffe          BL       lc640_read_int
003218  b280              UXTH     r0,r0
;;;5974   
;;;5975   		if(b_zar<(tempUS_/**10*/))
00321a  42b0              CMP      r0,r6
00321c  d20e              BCS      |L1.12860|
;;;5976   			{
;;;5977   			bat[in]._zar_cnt-=AH_CONSTANT;
00321e  6961              LDR      r1,[r4,#0x14]
003220  f5a14100          SUB      r1,r1,#0x8000
003224  f5a1614a          SUB      r1,r1,#0xca0
003228  6161              STR      r1,[r4,#0x14]
;;;5978   
;;;5979   			lc640_write_int(ADR_EE_BAT_ZAR_CNT[in],b_zar+1);
00322a  f9392015          LDRSH    r2,[r9,r5,LSL #1]
00322e  f1000001          ADD      r0,r0,#1
003232  b201              SXTH     r1,r0
003234  4610              MOV      r0,r2
003236  f7fffffe          BL       lc640_write_int
00323a  e033              B        |L1.12964|
                  |L1.12860|
;;;5980   			}
;;;5981   		else if(b_zar>(tempUS_/**10*/))  
00323c  d932              BLS      |L1.12964|
;;;5982   			{
;;;5983   			lc640_write_int(ADR_EE_BAT_ZAR_CNT[in],tempUS_);
00323e  f9390015          LDRSH    r0,[r9,r5,LSL #1]
003242  b231              SXTH     r1,r6
003244  f7fffffe          BL       lc640_write_int
;;;5984   			bat[in]._zar_cnt=AH_CONSTANT;
003248  f8c48014          STR      r8,[r4,#0x14]
00324c  e02a              B        |L1.12964|
                  |L1.12878|
;;;5985   
;;;5986   			}
;;;5987   
;;;5988   		}
;;;5989   
;;;5990   	else if(bat[in]._zar_cnt<=-AH_CONSTANT)
00324e  49e6              LDR      r1,|L1.13800|
003250  4288              CMP      r0,r1
003252  dc27              BGT      |L1.12964|
;;;5991   		{
;;;5992   		if(BAT_C_REAL[in]==0x5555) tempUS_=BAT_C_NOM[in];
003254  f93a1015          LDRSH    r1,[r10,r5,LSL #1]
003258  f5a140aa          SUB      r0,r1,#0x5500
00325c  3855              SUBS     r0,r0,#0x55
00325e  d103              BNE      |L1.12904|
003260  48e0              LDR      r0,|L1.13796|
003262  f8306015          LDRH     r6,[r0,r5,LSL #1]
003266  e001              B        |L1.12908|
                  |L1.12904|
;;;5993   		else tempUS_=BAT_C_REAL[in];
003268  f83a6015          LDRH     r6,[r10,r5,LSL #1]
                  |L1.12908|
;;;5994   		
;;;5995   		b_zar=lc640_read_int(ADR_EE_BAT_ZAR_CNT[in]);
00326c  f8390015          LDRH     r0,[r9,r5,LSL #1]
003270  f7fffffe          BL       lc640_read_int
003274  b280              UXTH     r0,r0
;;;5996   
;;;5997   		if(b_zar>tempUS_)
003276  42b0              CMP      r0,r6
003278  d905              BLS      |L1.12934|
;;;5998   			{
;;;5999   			lc640_write_int(ADR_EE_BAT_ZAR_CNT[in],tempUS_);
00327a  f9390015          LDRSH    r0,[r9,r5,LSL #1]
00327e  b231              SXTH     r1,r6
003280  f7fffffe          BL       lc640_write_int
;;;6000   			b_zar=tempUS_;
003284  4630              MOV      r0,r6
                  |L1.12934|
;;;6001   			}
;;;6002   		if(b_zar)
003286  b158              CBZ      r0,|L1.12960|
;;;6003   			{
;;;6004   			bat[in]._zar_cnt+=AH_CONSTANT;
003288  6961              LDR      r1,[r4,#0x14]
00328a  4441              ADD      r1,r1,r8
00328c  6161              STR      r1,[r4,#0x14]
;;;6005   
;;;6006   			lc640_write_int(ADR_EE_BAT_ZAR_CNT[in],b_zar-1);
00328e  f9392015          LDRSH    r2,[r9,r5,LSL #1]
003292  f1a00001          SUB      r0,r0,#1
003296  b201              SXTH     r1,r0
003298  4610              MOV      r0,r2
00329a  f7fffffe          BL       lc640_write_int
00329e  e001              B        |L1.12964|
                  |L1.12960|
;;;6007   			}
;;;6008   		else 
;;;6009   			{
;;;6010   			bat[in]._zar_cnt=-AH_CONSTANT;
0032a0  48d1              LDR      r0,|L1.13800|
0032a2  6160              STR      r0,[r4,#0x14]
                  |L1.12964|
;;;6011   			}
;;;6012   
;;;6013   		}
;;;6014   
;;;6015   			
;;;6016   	tempUL=(unsigned long)lc640_read_int(ADR_EE_BAT_ZAR_CNT[in]);
0032a4  f8390015          LDRH     r0,[r9,r5,LSL #1]
0032a8  f7fffffe          BL       lc640_read_int
0032ac  4601              MOV      r1,r0
;;;6017   	
;;;6018   	if(BAT_C_REAL[in]==0x5555) tempUL_=(unsigned long)BAT_C_NOM[in];
0032ae  f93a0015          LDRSH    r0,[r10,r5,LSL #1]
0032b2  f5a042aa          SUB      r2,r0,#0x5500
0032b6  3a55              SUBS     r2,r2,#0x55
0032b8  d102              BNE      |L1.12992|
0032ba  48ca              LDR      r0,|L1.13796|
0032bc  f9300015          LDRSH    r0,[r0,r5,LSL #1]
                  |L1.12992|
;;;6019   	else tempUL_=(unsigned long)BAT_C_REAL[in];
;;;6020   		           	
;;;6021   	tempUL*=1000L;
0032c0  f44f727a          MOV      r2,#0x3e8
0032c4  fb01f102          MUL      r1,r1,r2
;;;6022   
;;;6023   
;;;6024   	if(tempUL_==0) tempUL=0;
0032c8  b168              CBZ      r0,|L1.13030|
;;;6025   	else tempUL/=tempUL_;
0032ca  fbb1f0f0          UDIV     r0,r1,r0
                  |L1.13006|
;;;6026   
;;;6027   	tempUL/=10L;
0032ce  f04f010a          MOV      r1,#0xa
0032d2  fbb0f0f1          UDIV     r0,r0,r1
;;;6028   
;;;6029   	bat[in]._zar=(unsigned short)tempUL;
0032d6  8220              STRH     r0,[r4,#0x10]
;;;6030   
;;;6031   	if(BAT_TYPE==1)
0032d8  48c4              LDR      r0,|L1.13804|
0032da  8800              LDRH     r0,[r0,#0]  ; BAT_TYPE
0032dc  2801              CMP      r0,#1
0032de  e000              B        |L1.13026|
                  |L1.13024|
0032e0  e010              B        |L1.13060|
                  |L1.13026|
0032e2  d003              BEQ      |L1.13036|
0032e4  e008              B        |L1.13048|
                  |L1.13030|
0032e6  f04f0000          MOV      r0,#0                 ;6024
0032ea  e7f0              B        |L1.13006|
                  |L1.13036|
;;;6032   		{
;;;6033   		bat[in]._zar=lakb[in]._s_o_c;
0032ec  49c0              LDR      r1,|L1.13808|
0032ee  9802              LDR      r0,[sp,#8]
0032f0  eb010080          ADD      r0,r1,r0,LSL #2
0032f4  8a40              LDRH     r0,[r0,#0x12]
0032f6  8220              STRH     r0,[r4,#0x10]
                  |L1.13048|
;;;6034   		}
;;;6035   	
;;;6036   	gran((signed short*)&bat[in]._zar,0,100);
0032f8  f1040010          ADD      r0,r4,#0x10
0032fc  2264              MOVS     r2,#0x64
0032fe  2100              MOVS     r1,#0
003300  f7fffffe          BL       gran
                  |L1.13060|
;;;6037        }
;;;6038   
;;;6039   
;;;6040   //Ïîäñ÷åò òîêà ðàçðÿäà áàòàðåè      
;;;6041   if(bat[in]._wrk==1)
003304  7ba0              LDRB     r0,[r4,#0xe]
003306  2801              CMP      r0,#1
003308  d113              BNE      |L1.13106|
;;;6042   	{
;;;6043   	if(bat[in]._Iintegr<36000)
00330a  8ba0              LDRH     r0,[r4,#0x1c]
00330c  4540              CMP      r0,r8
00330e  d20f              BCS      |L1.13104|
;;;6044   		{          
;;;6045   		bat[in]._Iintegr+=abs(bat[in]._Ib);
003310  f9b40008          LDRSH    r0,[r4,#8]
003314  f7fffffe          BL       abs
003318  8ba1              LDRH     r1,[r4,#0x1c]
00331a  4408              ADD      r0,r0,r1
00331c  b280              UXTH     r0,r0
00331e  83a0              STRH     r0,[r4,#0x1c]
;;;6046   		if(bat[in]._Iintegr>=36000)
003320  4540              CMP      r0,r8
003322  d306              BCC      |L1.13106|
;;;6047   			{
;;;6048   			bat[in]._Iintegr=0;		//Ñ÷åò÷èê äåñÿòêîâ ìèëèàìïåðñåêóíä
003324  83a7              STRH     r7,[r4,#0x1c]
;;;6049   			bat[in]._Iintegr_++;	//Ñ÷åò÷èê ñîòåí ìèëèàìïåð÷àñîâ
003326  8be0              LDRH     r0,[r4,#0x1e]
003328  f1000001          ADD      r0,r0,#1
00332c  83e0              STRH     r0,[r4,#0x1e]
00332e  e000              B        |L1.13106|
                  |L1.13104|
;;;6050   			}
;;;6051   		}
;;;6052   	else 
;;;6053   		{
;;;6054   		bat[in]._Iintegr=0;
003330  83a7              STRH     r7,[r4,#0x1c]
                  |L1.13106|
;;;6055   		}	
;;;6056   	} 
;;;6057   	    
;;;6058   #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;6059   if((t_ext[0]>TBATSIGN)&&(!ND_EXT[0]))	
003332  f8df92c0          LDR      r9,|L1.13812|
003336  49b0              LDR      r1,|L1.13816|
003338  f8dfa2c0          LDR      r10,|L1.13820|
00333c  f9b90000          LDRSH    r0,[r9,#0]  ; t_ext
003340  f9b11000          LDRSH    r1,[r1,#0]  ; TBATSIGN
003344  4288              CMP      r0,r1
003346  dd02              BLE      |L1.13134|
003348  f89a0000          LDRB     r0,[r10,#0]  ; ND_EXT
00334c  b3e8              CBZ      r0,|L1.13258|
                  |L1.13134|
;;;6060   	{
;;;6061   	bat[in]._sign_temper_cnt++;
;;;6062   	}
;;;6063   else 
;;;6064   	{
;;;6065   	bat[in]._sign_temper_cnt--;
00334e  f8b40040          LDRH     r0,[r4,#0x40]
003352  f1a00001          SUB      r0,r0,#1
003356  f8a40040          STRH     r0,[r4,#0x40]
                  |L1.13146|
;;;6066   	}
;;;6067   #else
;;;6068   if((bat[in]._Tb>TBATSIGN)&&(!bat[in]._nd))	
;;;6069   	{
;;;6070   	bat[in]._sign_temper_cnt++;
;;;6071   	}
;;;6072   else 
;;;6073   	{
;;;6074   	bat[in]._sign_temper_cnt--;
;;;6075   	}
;;;6076   #endif
;;;6077   gran(&bat[in]._sign_temper_cnt,0,600);
00335a  f1040040          ADD      r0,r4,#0x40
00335e  f44f7216          MOV      r2,#0x258
003362  2100              MOVS     r1,#0
003364  f7fffffe          BL       gran
;;;6078   if(bat[in]._sign_temper_cnt>=590)	bat[in]._temper_stat|=(1<<0);
003368  f9b40040          LDRSH    r0,[r4,#0x40]
00336c  f240264e          MOV      r6,#0x24e
003370  42b0              CMP      r0,r6
003372  db05              BLT      |L1.13184|
003374  f894103f          LDRB     r1,[r4,#0x3f]
003378  f0410101          ORR      r1,r1,#1
00337c  f884103f          STRB     r1,[r4,#0x3f]
                  |L1.13184|
;;;6079   if(bat[in]._sign_temper_cnt<=10)	bat[in]._temper_stat&=~(1<<0);
003380  280a              CMP      r0,#0xa
003382  dc05              BGT      |L1.13200|
003384  f894003f          LDRB     r0,[r4,#0x3f]
003388  f0200001          BIC      r0,r0,#1
00338c  f884003f          STRB     r0,[r4,#0x3f]
                  |L1.13200|
;;;6080   
;;;6081   #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;6082   if((t_ext[0]>TBATMAX)&&(!ND_EXT[0]))	
003390  499b              LDR      r1,|L1.13824|
003392  f9b90000          LDRSH    r0,[r9,#0]  ; t_ext
003396  f9b11000          LDRSH    r1,[r1,#0]  ; TBATMAX
00339a  4288              CMP      r0,r1
00339c  dd02              BLE      |L1.13220|
00339e  f89a0000          LDRB     r0,[r10,#0]  ; ND_EXT
0033a2  b3b0              CBZ      r0,|L1.13330|
                  |L1.13220|
;;;6083   	{
;;;6084   	bat[in]._max_temper_cnt++;
;;;6085   	}
;;;6086   else 
;;;6087   	{
;;;6088   	bat[in]._max_temper_cnt--;
0033a4  f8b40042          LDRH     r0,[r4,#0x42]
0033a8  f1a00001          SUB      r0,r0,#1
0033ac  f8a40042          STRH     r0,[r4,#0x42]
                  |L1.13232|
;;;6089   	}
;;;6090   #else
;;;6091   if((bat[in]._Tb>TBATMAX)&&(!bat[in]._nd))	
;;;6092   	{
;;;6093   	bat[in]._max_temper_cnt++;
;;;6094   	}
;;;6095   else 
;;;6096   	{
;;;6097   	bat[in]._max_temper_cnt--;
;;;6098   	}
;;;6099   #endif
;;;6100   
;;;6101   gran(&bat[in]._max_temper_cnt,0,600);
0033b0  f44f7916          MOV      r9,#0x258
0033b4  f1040042          ADD      r0,r4,#0x42
0033b8  464a              MOV      r2,r9
0033ba  2100              MOVS     r1,#0
0033bc  f7fffffe          BL       gran
;;;6102   if(bat[in]._max_temper_cnt>=590)	bat[in]._temper_stat|=(1<<1);
0033c0  f9b40042          LDRSH    r0,[r4,#0x42]
0033c4  42b0              CMP      r0,r6
0033c6  db07              BLT      |L1.13272|
0033c8  e000              B        |L1.13260|
                  |L1.13258|
0033ca  e023              B        |L1.13332|
                  |L1.13260|
0033cc  f894103f          LDRB     r1,[r4,#0x3f]
0033d0  f0410102          ORR      r1,r1,#2
0033d4  f884103f          STRB     r1,[r4,#0x3f]
                  |L1.13272|
;;;6103   if(bat[in]._max_temper_cnt<=10)	bat[in]._temper_stat&=~(1<<1);
0033d8  280a              CMP      r0,#0xa
0033da  dc05              BGT      |L1.13288|
0033dc  f894003f          LDRB     r0,[r4,#0x3f]
0033e0  f0200002          BIC      r0,r0,#2
0033e4  f884003f          STRB     r0,[r4,#0x3f]
                  |L1.13288|
;;;6104   
;;;6105   
;;;6106   
;;;6107   //Ïîäñ÷åò íàðàáîòêè áàòàðåè
;;;6108   if(bat[in]._resurs_cnt<36000)
0033e8  6c60              LDR      r0,[r4,#0x44]
0033ea  4540              CMP      r0,r8
0033ec  da20              BGE      |L1.13360|
;;;6109   	{               
;;;6110   	bat[in]._resurs_cnt++;
0033ee  f1000001          ADD      r0,r0,#1
0033f2  6460              STR      r0,[r4,#0x44]
;;;6111   	if(bat[in]._resurs_cnt>=36000)
0033f4  4540              CMP      r0,r8
0033f6  db1c              BLT      |L1.13362|
;;;6112   		{
;;;6113   		bat[in]._resurs_cnt=0;
0033f8  6467              STR      r7,[r4,#0x44]
;;;6114   		lc640_write_int(ADR_EE_BAT_RESURS[in],lc640_read_int(ADR_EE_BAT_RESURS[in])+1);
0033fa  4e82              LDR      r6,|L1.13828|
0033fc  f8360015          LDRH     r0,[r6,r5,LSL #1]
003400  f7fffffe          BL       lc640_read_int
003404  1c40              ADDS     r0,r0,#1
003406  b201              SXTH     r1,r0
003408  f9360015          LDRSH    r0,[r6,r5,LSL #1]
00340c  f7fffffe          BL       lc640_write_int
003410  e00f              B        |L1.13362|
                  |L1.13330|
003412  e006              B        |L1.13346|
                  |L1.13332|
003414  f8b40040          LDRH     r0,[r4,#0x40]         ;6061
003418  f1000001          ADD      r0,r0,#1              ;6061
00341c  f8a40040          STRH     r0,[r4,#0x40]         ;6061
003420  e79b              B        |L1.13146|
                  |L1.13346|
003422  f8b40042          LDRH     r0,[r4,#0x42]         ;6084
003426  f1000001          ADD      r0,r0,#1              ;6084
00342a  f8a40042          STRH     r0,[r4,#0x42]         ;6084
00342e  e7bf              B        |L1.13232|
                  |L1.13360|
;;;6115   		}
;;;6116   	}
;;;6117   else bat[in]._resurs_cnt=0;
003430  6467              STR      r7,[r4,#0x44]
                  |L1.13362|
;;;6118   
;;;6119   
;;;6120   #ifndef UKU_220_V2
;;;6121   #ifndef UKU_GLONASS
;;;6122   #ifndef UKU_6U
;;;6123   //#ifndef UKU_220
;;;6124   if(UBM_AV)
003432  4e75              LDR      r6,|L1.13832|
003434  8830              LDRH     r0,[r6,#0]  ; UBM_AV
003436  2800              CMP      r0,#0
003438  d05e              BEQ      |L1.13560|
;;;6125        {
;;;6126        signed short temp_SS;
;;;6127   #ifdef UKU_220
;;;6128   temp_SS=bat[in]._Ub/2;
;;;6129   #else
;;;6130        if(U0B<600)
00343a  4874              LDR      r0,|L1.13836|
00343c  f9b00000          LDRSH    r0,[r0,#0]  ; U0B
003440  4548              CMP      r0,r9
003442  da08              BGE      |L1.13398|
;;;6131             {
;;;6132             temp_SS=bat[in]._Ub/4;
003444  f9b40002          LDRSH    r0,[r4,#2]
003448  ea4f71e0          ASR      r1,r0,#31
00344c  eb007091          ADD      r0,r0,r1,LSR #30
003450  ea4f00a0          ASR      r0,r0,#2
003454  e006              B        |L1.13412|
                  |L1.13398|
;;;6133             }
;;;6134        else temp_SS=bat[in]._Ub/5;
003456  f9b40002          LDRSH    r0,[r4,#2]
00345a  f04f0105          MOV      r1,#5
00345e  fb90f0f1          SDIV     r0,r0,r1
003462  b200              SXTH     r0,r0
                  |L1.13412|
;;;6135   	
;;;6136   	temp_SS+=temp_SS;     
003464  ea4f0040          LSL      r0,r0,#1
;;;6137   #endif
;;;6138        temp_SS-=(bat[in]._Ubm);
003468  88a1              LDRH     r1,[r4,#4]
00346a  eba00001          SUB      r0,r0,r1
00346e  b200              SXTH     r0,r0
;;;6139   
;;;6140        temp_SS=abs(temp_SS);
003470  f7fffffe          BL       abs
;;;6141   
;;;6142        temp_SS*=10;
003474  eb000080          ADD      r0,r0,r0,LSL #2
003478  ea4f0040          LSL      r0,r0,#1
00347c  b200              SXTH     r0,r0
;;;6143   
;;;6144        temp_SS/=12;
00347e  f04f010c          MOV      r1,#0xc
003482  fb90f0f1          SDIV     r0,r0,r1
003486  b200              SXTH     r0,r0
;;;6145   
;;;6146        bat[in]._dUbm=temp_SS;
003488  80e0              STRH     r0,[r4,#6]
;;;6147   
;;;6148   
;;;6149        if(	(bat[in]._dUbm>UBM_AV) &&
00348a  f9b61000          LDRSH    r1,[r6,#0]  ; UBM_AV
00348e  4288              CMP      r0,r1
003490  dd34              BLE      |L1.13564|
;;;6150   		(abs(bat[in]._Ib)<(5*IKB)) &&
003492  f9b40008          LDRSH    r0,[r4,#8]
003496  f7fffffe          BL       abs
00349a  4601              MOV      r1,r0
00349c  485c              LDR      r0,|L1.13840|
00349e  f9b00000          LDRSH    r0,[r0,#0]  ; IKB
0034a2  eb000080          ADD      r0,r0,r0,LSL #2
0034a6  4281              CMP      r1,r0
0034a8  da28              BGE      |L1.13564|
;;;6151   		(bat[in]._Ub>((short)(((long)USIGN*115)/100))) &&
0034aa  485a              LDR      r0,|L1.13844|
0034ac  2173              MOVS     r1,#0x73
0034ae  f9b00000          LDRSH    r0,[r0,#0]  ; USIGN
0034b2  4348              MULS     r0,r1,r0
0034b4  fb90f0fb          SDIV     r0,r0,r11
0034b8  f9b41002          LDRSH    r1,[r4,#2]
0034bc  b200              SXTH     r0,r0
0034be  4288              CMP      r0,r1
0034c0  da1c              BGE      |L1.13564|
;;;6152   		(!(bat[in]._av & 2))  )
0034c2  f894003d          LDRB     r0,[r4,#0x3d]
0034c6  0780              LSLS     r0,r0,#30
0034c8  d418              BMI      |L1.13564|
;;;6153   		{
;;;6154   		bat[in]._cnt_as++;
0034ca  f8b40048          LDRH     r0,[r4,#0x48]
0034ce  f1000001          ADD      r0,r0,#1
0034d2  b200              SXTH     r0,r0
0034d4  f8a40048          STRH     r0,[r4,#0x48]
;;;6155   		if(bat[in]._cnt_as==3000)
0034d8  f5a06130          SUB      r1,r0,#0xb00
0034dc  39b8              SUBS     r1,r1,#0xb8
0034de  d103              BNE      |L1.13544|
;;;6156   			{
;;;6157   			avar_bat_as_hndl(in,1);
0034e0  2101              MOVS     r1,#1
0034e2  4628              MOV      r0,r5
0034e4  f7fffffe          BL       avar_bat_as_hndl
                  |L1.13544|
;;;6158   			}
;;;6159   		if(bat[in]._cnt_as>=3005) bat[in]._cnt_as=3005;
0034e8  f9b41048          LDRSH    r1,[r4,#0x48]
0034ec  f64030bd          MOV      r0,#0xbbd
0034f0  4281              CMP      r1,r0
0034f2  db01              BLT      |L1.13560|
0034f4  f8a40048          STRH     r0,[r4,#0x48]
                  |L1.13560|
;;;6160   		}
;;;6161   	else 
;;;6162   		{
;;;6163   		bat[in]._cnt_as=0;
;;;6164   		}
;;;6165        
;;;6166        }
;;;6167   #endif 
;;;6168   #endif 
;;;6169   #endif
;;;6170   
;;;6171   }
0034f8  e8bd8ffe          POP      {r1-r11,pc}
                  |L1.13564|
0034fc  f8a47048          STRH     r7,[r4,#0x48]         ;6163
003500  e7fa              B        |L1.13560|
;;;6172   
                          ENDP

                  u_necc_hndl PROC
;;;6176   //-----------------------------------------------
;;;6177   void u_necc_hndl(void)
003502  b538              PUSH     {r3-r5,lr}
;;;6178   {
;;;6179   signed long temp_L;
;;;6180   signed long temp_SL;
;;;6181   //signed short temp_SS;
;;;6182   
;;;6183   //char i;
;;;6184   
;;;6185   //temp_SS=0;
;;;6186   signed short t[2];
;;;6187   
;;;6188   
;;;6189   
;;;6190   
;;;6191   #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;6192   
;;;6193   if(!TERMOKOMPENS)
003504  4844              LDR      r0,|L1.13848|
;;;6194   	{
;;;6195   	//u_necc=U0B;
;;;6196   	u_necc=UB20;
003506  4c47              LDR      r4,|L1.13860|
003508  8801              LDRH     r1,[r0,#0]            ;6193  ; TERMOKOMPENS
00350a  4844              LDR      r0,|L1.13852|
00350c  f9b03000          LDRSH    r3,[r0,#0]
;;;6197   	}
;;;6198   else
;;;6199   	{
;;;6200   	if(ND_EXT[0])t[0]=20;
;;;6201   	else t[0]=t_ext[0];
;;;6202   
;;;6203   	mat_temper=t[0];
;;;6204   			
;;;6205   	if(mat_temper<0)temp_SL=UB0; 
;;;6206   	else 
;;;6207   		{
;;;6208   		if(mat_temper>40)mat_temper=40; 
;;;6209   		temp_SL=(UB20-UB0)*10;
;;;6210   		temp_SL*=mat_temper;
;;;6211   		temp_SL/=200;
;;;6212   		temp_SL+=UB0;
;;;6213   		}
;;;6214   	if((spc_stat==spcVZ)&&(sk_stat[0]==1))
;;;6215   		{
;;;6216   		temp_SL=UVZ;
003510  4843              LDR      r0,|L1.13856|
003512  f9b02000          LDRSH    r2,[r0,#0]
003516  b139              CBZ      r1,|L1.13608|
003518  4838              LDR      r0,|L1.13820|
00351a  7800              LDRB     r0,[r0,#0]            ;6200  ; ND_EXT
00351c  b130              CBZ      r0,|L1.13612|
00351e  f04f0014          MOV      r0,#0x14              ;6200
003522  f8ad0000          STRH     r0,[sp,#0]            ;6200
003526  e005              B        |L1.13620|
                  |L1.13608|
003528  8023              STRH     r3,[r4,#0]            ;6196
00352a  e029              B        |L1.13696|
                  |L1.13612|
00352c  4831              LDR      r0,|L1.13812|
00352e  8800              LDRH     r0,[r0,#0]            ;6201  ; t_ext
003530  f8ad0000          STRH     r0,[sp,#0]            ;6201
                  |L1.13620|
003534  4d3c              LDR      r5,|L1.13864|
003536  f9bd1000          LDRSH    r1,[sp,#0]            ;6203
00353a  6029              STR      r1,[r5,#0]            ;6203  ; mat_temper
00353c  483b              LDR      r0,|L1.13868|
00353e  2900              CMP      r1,#0                 ;6205
003540  f9b00000          LDRSH    r0,[r0,#0]            ;6205
003544  db12              BLT      |L1.13676|
003546  2928              CMP      r1,#0x28              ;6208
003548  dd02              BLE      |L1.13648|
00354a  f04f0128          MOV      r1,#0x28              ;6208
00354e  6029              STR      r1,[r5,#0]            ;6208  ; mat_temper
                  |L1.13648|
003550  eba30100          SUB      r1,r3,r0              ;6209
003554  eb010181          ADD      r1,r1,r1,LSL #2       ;6209
003558  ea4f0141          LSL      r1,r1,#1              ;6209
00355c  682b              LDR      r3,[r5,#0]            ;6210  ; mat_temper
00355e  fb01f103          MUL      r1,r1,r3              ;6210
003562  f04f03c8          MOV      r3,#0xc8              ;6211
003566  fb91f1f3          SDIV     r1,r1,r3              ;6211
00356a  4408              ADD      r0,r0,r1              ;6212
                  |L1.13676|
00356c  4930              LDR      r1,|L1.13872|
00356e  7d09              LDRB     r1,[r1,#0x14]         ;6214  ; spc_stat
003570  2902              CMP      r1,#2                 ;6214
003572  d104              BNE      |L1.13694|
003574  492f              LDR      r1,|L1.13876|
003576  7809              LDRB     r1,[r1,#0]            ;6214  ; sk_stat
003578  2901              CMP      r1,#1                 ;6214
00357a  d100              BNE      |L1.13694|
00357c  4610              MOV      r0,r2
                  |L1.13694|
;;;6217   		}
;;;6218   	u_necc=(unsigned int)temp_SL;
00357e  8020              STRH     r0,[r4,#0]
                  |L1.13696|
;;;6219   	///u_necc=3456;
;;;6220   	}  
;;;6221   
;;;6222   //u_necc=2355;
;;;6223   
;;;6224   if((speedChIsOn)||(sp_ch_stat==scsWRK))
003580  482d              LDR      r0,|L1.13880|
003582  8800              LDRH     r0,[r0,#0]  ; speedChIsOn
003584  b918              CBNZ     r0,|L1.13710|
003586  482d              LDR      r0,|L1.13884|
003588  7800              LDRB     r0,[r0,#0]  ; sp_ch_stat
00358a  2802              CMP      r0,#2
00358c  d102              BNE      |L1.13716|
                  |L1.13710|
;;;6225   	{
;;;6226   	u_necc=speedChrgVolt;
00358e  482c              LDR      r0,|L1.13888|
003590  8800              LDRH     r0,[r0,#0]  ; speedChrgVolt
003592  8020              STRH     r0,[r4,#0]
                  |L1.13716|
;;;6227   	}
;;;6228   if(hv_vz_stat==hvsWRK)
003594  482b              LDR      r0,|L1.13892|
003596  7800              LDRB     r0,[r0,#0]  ; hv_vz_stat
003598  2805              CMP      r0,#5
00359a  d100              BNE      |L1.13726|
;;;6229   	{
;;;6230   	u_necc=UVZ;
00359c  8022              STRH     r2,[r4,#0]
                  |L1.13726|
;;;6231   	}
;;;6232   if(mess_find_unvol(MESS2UNECC_HNDL))
00359e  20be              MOVS     r0,#0xbe
0035a0  f7fffffe          BL       mess_find_unvol
0035a4  b128              CBZ      r0,|L1.13746|
;;;6233   	{		
;;;6234   	if(mess_data[0]==PARAM_UNECC_SET)
0035a6  4828              LDR      r0,|L1.13896|
0035a8  6801              LDR      r1,[r0,#0]  ; mess_data
0035aa  29bf              CMP      r1,#0xbf
0035ac  d101              BNE      |L1.13746|
;;;6235   		{
;;;6236   		u_necc=mess_data[1];
0035ae  6840              LDR      r0,[r0,#4]  ; mess_data
0035b0  8020              STRH     r0,[r4,#0]
                  |L1.13746|
;;;6237   		}		
;;;6238   	}
;;;6239   //if(ICA_EN)u_necc+=ica_u_necc;
;;;6240   #endif
;;;6241   
;;;6242   
;;;6243   #ifndef UKU_220_IPS_TERMOKOMPENSAT
;;;6244   
;;;6245   #ifndef UKU_TELECORE2015
;;;6246   #ifndef UKU_TELECORE2017
;;;6247   if(unh_cnt0<10)
;;;6248   	{
;;;6249   	unh_cnt0++;
;;;6250   	if(unh_cnt0>=10)
;;;6251   		{
;;;6252   		unh_cnt0=0;
;;;6253   		b1Hz_unh=1;
;;;6254   		}
;;;6255   	}
;;;6256   
;;;6257   if(unh_cnt1<5)
;;;6258   	{
;;;6259   	unh_cnt1++;
;;;6260   	if(unh_cnt1==5)
;;;6261   		{
;;;6262   		unh_cnt1=0;
;;;6263   //		b2Hz_unh=1;
;;;6264   		}
;;;6265   	} 
;;;6266   
;;;6267   
;;;6268   
;;;6269   if(mess_find_unvol(MESS2UNECC_HNDL))
;;;6270   	{		
;;;6271   	if(mess_data[0]==PARAM_UNECC_SET)
;;;6272   		{
;;;6273   		u_necc=mess_data[1];
;;;6274   		}		
;;;6275   	}
;;;6276   
;;;6277   
;;;6278   else if(b1Hz_unh)
;;;6279   	{
;;;6280   	
;;;6281   	if((BAT_IS_ON[0]!=bisON) && (BAT_IS_ON[1]!=bisON))
;;;6282   		{
;;;6283   		
;;;6284   		u_necc=U0B;
;;;6285   		#ifdef IPS_SGEP_GAZPROM
;;;6286   		u_necc=UB0;
;;;6287   		#endif
;;;6288   		}
;;;6289   	else 
;;;6290   		{
;;;6291   		if(BAT_TYPE==0) //åñëè áàòàðåÿ îáû÷íàÿ
;;;6292   			{
;;;6293   			for(i=0;i<2;i++)
;;;6294   				{
;;;6295   				if(BAT_IS_ON[i]==bisON)
;;;6296   					{
;;;6297   					if(bat[i]._nd)t[i]=20;
;;;6298   					else t[i]=bat[i]._Tb;
;;;6299   					}
;;;6300   				else
;;;6301   					{
;;;6302   					t[i]=-20;
;;;6303   					}
;;;6304   				}
;;;6305   			if(t[0]>t[1])mat_temper=t[0];
;;;6306   			else mat_temper=t[1];
;;;6307   			
;;;6308   		
;;;6309   			if(mat_temper<0)temp_SL=UB0; 
;;;6310   			else 
;;;6311   				{
;;;6312   				if(mat_temper>40)mat_temper=40; 
;;;6313   				temp_SL=(UB20-UB0)*10;
;;;6314   				temp_SL*=mat_temper;
;;;6315   				temp_SL/=200;
;;;6316   				temp_SL+=UB0;
;;;6317   				}
;;;6318   			if((spc_stat==spcVZ)&&(sk_stat[0]==1))
;;;6319   				{
;;;6320   				temp_SL=UVZ;
;;;6321   				}
;;;6322   			u_necc=(unsigned int)temp_SL;
;;;6323   			}
;;;6324   		else if(BAT_TYPE==1) //åñëè áàòàðåÿ êèòàéñêàÿ
;;;6325   			{
;;;6326   			u_necc=U0B;
;;;6327   					
;;;6328   			u_necc=bat[0]._Ub+10;
;;;6329   
;;;6330   			
;;;6331   			if((spc_stat==spcVZ)&&(sk_stat[0]==1))
;;;6332   				{
;;;6333   				u_necc=UVZ;
;;;6334   				}
;;;6335   			if(u_necc>=UB0) u_necc=UB0;
;;;6336   			if(u_necc>=UB20) u_necc=UB20;
;;;6337   			}
;;;6338   		}  
;;;6339   	}
;;;6340   #endif
;;;6341   #endif
;;;6342   
;;;6343   #ifdef UKU_TELECORE2015
;;;6344   
;;;6345   if(unh_cnt0<10)
;;;6346   	{
;;;6347   	unh_cnt0++;
;;;6348   	if(unh_cnt0>=10)
;;;6349   		{
;;;6350   		unh_cnt0=0;
;;;6351   		b1Hz_unh=1;
;;;6352   		}
;;;6353   	}
;;;6354   
;;;6355   if(unh_cnt1<5)
;;;6356   	{
;;;6357   	unh_cnt1++;
;;;6358   	if(unh_cnt1==5)
;;;6359   		{
;;;6360   		unh_cnt1=0;
;;;6361   //		b2Hz_unh=1;
;;;6362   		}
;;;6363   	} 
;;;6364   
;;;6365   
;;;6366   
;;;6367   if(mess_find_unvol(MESS2UNECC_HNDL))
;;;6368   	{		
;;;6369   	if(mess_data[0]==PARAM_UNECC_SET)
;;;6370   		{
;;;6371   		u_necc=mess_data[1];
;;;6372   		}		
;;;6373   	}
;;;6374   
;;;6375   
;;;6376   else if(b1Hz_unh)
;;;6377   	{
;;;6378   	b1Hz_unh=0;
;;;6379   
;;;6380   	if(BAT_TYPE==0)
;;;6381   		{
;;;6382   		if(bat[0]._nd)mat_temper=20;
;;;6383   		else mat_temper=bat[0]._Tb;
;;;6384   
;;;6385   			
;;;6386   		if(mat_temper<0)temp_SL=UB0; 
;;;6387   		else 
;;;6388   			{
;;;6389   			if(mat_temper>40)mat_temper=40; 
;;;6390   			temp_SL=(UB20-UB0)*10;
;;;6391   			temp_SL*=mat_temper;
;;;6392   			temp_SL/=200;
;;;6393   			temp_SL+=UB0;
;;;6394   			}
;;;6395   		if((spc_stat==spcVZ)&&(sk_stat[0]==1))
;;;6396   			{
;;;6397   			temp_SL=UVZ;
;;;6398   			}
;;;6399   		u_necc=(unsigned int)temp_SL;
;;;6400   	///u_necc=3456;
;;;6401   		}
;;;6402   	else if(BAT_TYPE==1)
;;;6403   		{
;;;6404   		
;;;6405   		gran(&DU_LI_BAT,1,30);
;;;6406   		u_necc=li_bat._Ub+DU_LI_BAT;
;;;6407   		gran(&u_necc,0,UB0);
;;;6408   		gran(&u_necc,0,UB20);
;;;6409   		gran(&u_necc,0,540);		
;;;6410   
;;;6411   
;;;6412   		if(li_bat._batStat!=bsOK)
;;;6413   			{
;;;6414   			u_necc=U0B;
;;;6415   			}
;;;6416   		if((spc_stat==spcVZ)&&(sk_stat[0]==1))
;;;6417   			{
;;;6418   			u_necc=UVZ;
;;;6419   			}
;;;6420   		/* 
;;;6421   		u_necc=U0B;
;;;6422   		
;;;6423   
;;;6424   	
;;;6425   		u_necc=UB0;
;;;6426   		u_necc=li_bat._Ub+10;
;;;6427   		if((li_bat._Ub<450)||(li_bat._Ub>550))
;;;6428   			{
;;;6429   			lakb_error_cnt++;
;;;6430   			if(lakb_error_cnt>=30)
;;;6431   				{
;;;6432   				lakb_error_cnt=30;
;;;6433   				u_necc=U0B;
;;;6434   				}
;;;6435   			}
;;;6436   		else lakb_error_cnt=0;*/
;;;6437   		}
;;;6438   	else if(BAT_TYPE==2)
;;;6439   		{
;;;6440   		u_necc=U0B;
;;;6441   		
;;;6442   		if((spc_stat==spcVZ)&&(sk_stat[0]==1))
;;;6443   			{
;;;6444   			u_necc=UVZ;
;;;6445   			}
;;;6446   	
;;;6447   		u_necc=UB0;
;;;6448   		}
;;;6449   
;;;6450   	else if(BAT_TYPE==3)
;;;6451   		{
;;;6452   		u_necc=U0B;
;;;6453   		
;;;6454   		if((spc_stat==spcVZ)&&(sk_stat[0]==1))
;;;6455   			{
;;;6456   			u_necc=UVZ;
;;;6457   			}
;;;6458   
;;;6459   		gran(&DU_LI_BAT,1,30);
;;;6460   
;;;6461   
;;;6462   		if(lakbNotErrorNum==0)
;;;6463   			{
;;;6464   			u_necc=U0B;
;;;6465   			}
;;;6466   		else 
;;;6467   			{
;;;6468   			signed short i;
;;;6469   			//signed short u_necc_max;
;;;6470   			//u_necc_max=0;
;;;6471   			char soc_flag=0;
;;;6472   
;;;6473   			for(i=(NUMBAT_TELECORE-1);i>=0;i--)
;;;6474   				{
;;;6475   				if(lakb[i]._communicationFullErrorStat==0)u_necc=lakb[i]._tot_bat_volt+DU_LI_BAT;
;;;6476   				if(lakb[i]._s_o_c_percent<QSODERG_LI_BAT)soc_flag=1;
;;;6477   				}
;;;6478   
;;;6479   			if(soc_flag==0)u_necc=USODERG_LI_BAT;
;;;6480   			}
;;;6481   		gran(&u_necc,0,UB0);
;;;6482   		//gran(&u_necc,0,UB20);
;;;6483   		gran(&u_necc,0,540);
;;;6484   		}
;;;6485   	}
;;;6486   
;;;6487   #endif 
;;;6488   
;;;6489   #ifdef UKU_TELECORE2017
;;;6490   
;;;6491   if(unh_cnt0<10)
;;;6492   	{
;;;6493   	unh_cnt0++;
;;;6494   	if(unh_cnt0>=10)
;;;6495   		{
;;;6496   		unh_cnt0=0;
;;;6497   		b1Hz_unh=1;
;;;6498   		}
;;;6499   	}
;;;6500   
;;;6501   if(unh_cnt1<5)
;;;6502   	{
;;;6503   	unh_cnt1++;
;;;6504   	if(unh_cnt1==5)
;;;6505   		{
;;;6506   		unh_cnt1=0;
;;;6507   //		b2Hz_unh=1;
;;;6508   		}
;;;6509   	} 
;;;6510   
;;;6511   
;;;6512   
;;;6513   if(mess_find_unvol(MESS2UNECC_HNDL))
;;;6514   	{		
;;;6515   	if(mess_data[0]==PARAM_UNECC_SET)
;;;6516   		{
;;;6517   		u_necc=mess_data[1];
;;;6518   		}		
;;;6519   	}
;;;6520   
;;;6521   
;;;6522   else if(b1Hz_unh)
;;;6523   	{
;;;6524   	b1Hz_unh=0;
;;;6525   
;;;6526   	if(BAT_TYPE==0)
;;;6527   		{
;;;6528   		if(bat[0]._nd)mat_temper=20;
;;;6529   		else mat_temper=bat[0]._Tb;
;;;6530   
;;;6531   			
;;;6532   		if(mat_temper<0)temp_SL=UB0; 
;;;6533   		else 
;;;6534   			{
;;;6535   			if(mat_temper>40)mat_temper=40; 
;;;6536   			temp_SL=(UB20-UB0)*10;
;;;6537   			temp_SL*=mat_temper;
;;;6538   			temp_SL/=200;
;;;6539   			temp_SL+=UB0;
;;;6540   			}
;;;6541   		if((spc_stat==spcVZ)&&(sk_stat[0]==1))
;;;6542   			{
;;;6543   			temp_SL=UVZ;
;;;6544   			}
;;;6545   		u_necc=(unsigned int)temp_SL;
;;;6546   	///u_necc=3456;
;;;6547   		}
;;;6548   	else if(BAT_TYPE==1)
;;;6549   		{
;;;6550   		
;;;6551   		gran(&DU_LI_BAT,1,30);
;;;6552   		u_necc=li_bat._Ub+DU_LI_BAT;
;;;6553   		gran(&u_necc,0,UB0);
;;;6554   		gran(&u_necc,0,UB20);
;;;6555   		gran(&u_necc,0,540);		
;;;6556   
;;;6557   
;;;6558   		if(li_bat._batStat!=bsOK)
;;;6559   			{
;;;6560   			u_necc=U0B;
;;;6561   			}
;;;6562   		if((spc_stat==spcVZ)&&(sk_stat[0]==1))
;;;6563   			{
;;;6564   			u_necc=UVZ;
;;;6565   			}
;;;6566   		}
;;;6567   	else if(BAT_TYPE==2)
;;;6568   		{
;;;6569   		u_necc=U0B;
;;;6570   		
;;;6571   		if((spc_stat==spcVZ)&&(sk_stat[0]==1))
;;;6572   			{
;;;6573   			u_necc=UVZ;
;;;6574   			}
;;;6575   	
;;;6576   		u_necc=UB0;
;;;6577   		}
;;;6578   
;;;6579   	else if(BAT_TYPE==3)
;;;6580   		{
;;;6581   		u_necc=U0B;
;;;6582   		
;;;6583   		if((spc_stat==spcVZ)&&(sk_stat[0]==1))
;;;6584   			{
;;;6585   			u_necc=UVZ;
;;;6586   			}
;;;6587   
;;;6588   		gran(&DU_LI_BAT,1,30);
;;;6589   
;;;6590   
;;;6591   		if(lakbNotErrorNum==0)
;;;6592   			{
;;;6593   			u_necc=U0B;
;;;6594   			}
;;;6595   		else 
;;;6596   			{
;;;6597   			signed short i;
;;;6598   			//signed short u_necc_max;
;;;6599   			//u_necc_max=0;
;;;6600   			char soc_flag=0;
;;;6601   
;;;6602   			for(i=(NUMBAT_TELECORE-1);i>=0;i--)
;;;6603   				{
;;;6604   				if(lakb[i]._communicationFullErrorStat==0)u_necc=lakb[i]._tot_bat_volt+DU_LI_BAT;
;;;6605   				if(lakb[i]._s_o_c_percent<QSODERG_LI_BAT)soc_flag=1;
;;;6606   				}
;;;6607   
;;;6608   			if(soc_flag==0)u_necc=USODERG_LI_BAT;
;;;6609   			}
;;;6610   		gran(&u_necc,0,UB0);
;;;6611   		//gran(&u_necc,0,UB20);
;;;6612   		gran(&u_necc,0,540);
;;;6613   		}
;;;6614   	}
;;;6615   
;;;6616   #endif 
;;;6617   //u_necc=2356;
;;;6618   #endif//gran(&u_necc,400,UMAX);
;;;6619   
;;;6620   
;;;6621   
;;;6622   temp_L=(signed long) u_necc;
0035b2  f9b40000          LDRSH    r0,[r4,#0]  ; u_necc
;;;6623   temp_L*=98L;
0035b6  f04f0162          MOV      r1,#0x62
0035ba  fb00f101          MUL      r1,r0,r1
;;;6624   temp_L/=100L;
0035be  f04f0264          MOV      r2,#0x64
0035c2  fb91f1f2          SDIV     r1,r1,r2
;;;6625   u_necc_dn=(signed short)temp_L;
0035c6  4b21              LDR      r3,|L1.13900|
0035c8  8019              STRH     r1,[r3,#0]
;;;6626   
;;;6627   temp_L=(signed long) u_necc;
;;;6628   temp_L*=102L;
0035ca  f04f0166          MOV      r1,#0x66
0035ce  fb00f001          MUL      r0,r0,r1
;;;6629   temp_L/=100L;
0035d2  fb90f0f2          SDIV     r0,r0,r2
;;;6630   u_necc_up=(signed short)temp_L;
0035d6  491e              LDR      r1,|L1.13904|
0035d8  8008              STRH     r0,[r1,#0]
;;;6631   /*
;;;6632   #ifdef IPS_SGEP_GAZPROM
;;;6633   u_necc=248;
;;;6634   #endif */
;;;6635   }
0035da  bd38              POP      {r3-r5,pc}
                  |L1.13788|
                          DCD      ADR_EE_BAT_ZAR_CNT
                  |L1.13792|
                          DCD      BAT_C_REAL
                  |L1.13796|
                          DCD      BAT_C_NOM
                  |L1.13800|
                          DCD      0xffff7360
                  |L1.13804|
                          DCD      BAT_TYPE
                  |L1.13808|
                          DCD      lakb
                  |L1.13812|
                          DCD      t_ext
                  |L1.13816|
                          DCD      TBATSIGN
                  |L1.13820|
                          DCD      ND_EXT
                  |L1.13824|
                          DCD      TBATMAX
                  |L1.13828|
                          DCD      ADR_EE_BAT_RESURS
                  |L1.13832|
                          DCD      UBM_AV
                  |L1.13836|
                          DCD      U0B
                  |L1.13840|
                          DCD      IKB
                  |L1.13844|
                          DCD      USIGN
                  |L1.13848|
                          DCD      TERMOKOMPENS
                  |L1.13852|
                          DCD      UB20
                  |L1.13856|
                          DCD      UVZ
                  |L1.13860|
                          DCD      u_necc
                  |L1.13864|
                          DCD      mat_temper
                  |L1.13868|
                          DCD      UB0
                  |L1.13872|
                          DCD      ||area_number.23||
                  |L1.13876|
                          DCD      sk_stat
                  |L1.13880|
                          DCD      speedChIsOn
                  |L1.13884|
                          DCD      sp_ch_stat
                  |L1.13888|
                          DCD      speedChrgVolt
                  |L1.13892|
                          DCD      hv_vz_stat
                  |L1.13896|
                          DCD      mess_data
                  |L1.13900|
                          DCD      u_necc_dn
                  |L1.13904|
                          DCD      u_necc_up
                          ENDP

                  num_necc_hndl PROC
;;;6638   //-----------------------------------------------
;;;6639   void num_necc_hndl(void)
003654  e92d41f0          PUSH     {r4-r8,lr}
;;;6640   {
;;;6641   
;;;6642   static short num_necc_block_cnt;
;;;6643   if(num_necc_block_cnt) num_necc_block_cnt--;
003658  4cf7              LDR      r4,|L1.14904|
00365a  f9b40026          LDRSH    r0,[r4,#0x26]  ; num_necc_block_cnt
00365e  b110              CBZ      r0,|L1.13926|
003660  f1a00001          SUB      r0,r0,#1
003664  84e0              STRH     r0,[r4,#0x26]
                  |L1.13926|
;;;6644   
;;;6645   Isumm_=Isumm;
003666  48f5              LDR      r0,|L1.14908|
003668  4df5              LDR      r5,|L1.14912|
00366a  8800              LDRH     r0,[r0,#0]  ; Isumm
00366c  8028              STRH     r0,[r5,#0]
;;;6646   
;;;6647   if(bat[0]._Ib<0) Isumm_+=(abs(bat[0]._Ib))/10;
00366e  4ef5              LDR      r6,|L1.14916|
003670  270a              MOVS     r7,#0xa
003672  f9b60008          LDRSH    r0,[r6,#8]  ; bat
003676  2800              CMP      r0,#0
003678  da06              BGE      |L1.13960|
00367a  f7fffffe          BL       abs
00367e  fb90f0f7          SDIV     r0,r0,r7
003682  8829              LDRH     r1,[r5,#0]  ; Isumm_
003684  4408              ADD      r0,r0,r1
003686  8028              STRH     r0,[r5,#0]
                  |L1.13960|
;;;6648   if(bat[1]._Ib<0) Isumm_+=(abs(bat[1]._Ib))/10;
003688  f9b60054          LDRSH    r0,[r6,#0x54]  ; bat
00368c  2800              CMP      r0,#0
00368e  da06              BGE      |L1.13982|
003690  f7fffffe          BL       abs
003694  fb90f0f7          SDIV     r0,r0,r7
003698  8829              LDRH     r1,[r5,#0]  ; Isumm_
00369a  4408              ADD      r0,r0,r1
00369c  8028              STRH     r0,[r5,#0]
                  |L1.13982|
;;;6649   
;;;6650   num_necc_up=(Isumm_/((signed short)IMAX))+1;
00369e  48ea              LDR      r0,|L1.14920|
0036a0  f9b51000          LDRSH    r1,[r5,#0]  ; Isumm_
0036a4  f9b00000          LDRSH    r0,[r0,#0]  ; IMAX
0036a8  fb91f0f0          SDIV     r0,r1,r0
0036ac  f1000001          ADD      r0,r0,#1
0036b0  b2c0              UXTB     r0,r0
0036b2  7420              STRB     r0,[r4,#0x10]
;;;6651   ////Isumm_+=(signed short)((IMAX*(10-KIMAX))/10);
;;;6652   ////Isumm_+=(signed short)(IMAX-IMIN);
;;;6653   
;;;6654   num_necc_down=(Isumm_/((signed short)IMIN))+1;
0036b4  4ae5              LDR      r2,|L1.14924|
0036b6  f9b22000          LDRSH    r2,[r2,#0]  ; IMIN
0036ba  fb91f1f2          SDIV     r1,r1,r2
0036be  f1010101          ADD      r1,r1,#1
0036c2  b2ca              UXTB     r2,r1
0036c4  7462              STRB     r2,[r4,#0x11]
;;;6655   
;;;6656   if(num_necc_up>num_necc)
0036c6  49e2              LDR      r1,|L1.14928|
;;;6657   	{
;;;6658   	num_necc=num_necc_up;
;;;6659   	num_necc_block_cnt=60;
0036c8  f04f053c          MOV      r5,#0x3c
0036cc  f9b13000          LDRSH    r3,[r1,#0]            ;6656  ; num_necc
0036d0  4298              CMP      r0,r3                 ;6656
0036d2  dd02              BLE      |L1.14042|
0036d4  8008              STRH     r0,[r1,#0]            ;6658
0036d6  84e5              STRH     r5,[r4,#0x26]
0036d8  e005              B        |L1.14054|
                  |L1.14042|
;;;6660   	}
;;;6661   else if(num_necc_down<num_necc)
0036da  429a              CMP      r2,r3
0036dc  da03              BGE      |L1.14054|
;;;6662   	{
;;;6663   	if(!num_necc_block_cnt)
0036de  8ce0              LDRH     r0,[r4,#0x26]  ; num_necc_block_cnt
0036e0  b908              CBNZ     r0,|L1.14054|
;;;6664   		{
;;;6665   		num_necc=num_necc_down;
0036e2  800a              STRH     r2,[r1,#0]
;;;6666   		num_necc_block_cnt=60;
0036e4  84e5              STRH     r5,[r4,#0x26]
                  |L1.14054|
;;;6667   		}
;;;6668   	}
;;;6669   
;;;6670   if(PAR) num_necc=NUMIST;
0036e6  48db              LDR      r0,|L1.14932|
0036e8  8802              LDRH     r2,[r0,#0]  ; PAR
0036ea  48db              LDR      r0,|L1.14936|
0036ec  b10a              CBZ      r2,|L1.14066|
0036ee  8802              LDRH     r2,[r0,#0]  ; NUMIST
0036f0  800a              STRH     r2,[r1,#0]
                  |L1.14066|
;;;6671   
;;;6672   #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;6673   if(bPARALLEL) num_necc=NUMIST;
0036f2  7fa2              LDRB     r2,[r4,#0x1e]  ; bPARALLEL
0036f4  b10a              CBZ      r2,|L1.14074|
0036f6  8802              LDRH     r2,[r0,#0]  ; NUMIST
0036f8  800a              STRH     r2,[r1,#0]
                  |L1.14074|
;;;6674   #endif
;;;6675   
;;;6676   gran(&num_necc,1,NUMIST);
0036fa  f9b02000          LDRSH    r2,[r0,#0]  ; NUMIST
0036fe  e8bd41f0          POP      {r4-r8,lr}
003702  2101              MOVS     r1,#1
003704  48d2              LDR      r0,|L1.14928|
003706  f7ffbffe          B.W      gran
;;;6677   
;;;6678   }
;;;6679   
                          ENDP

                  cntrl_hndl PROC
;;;6682   //-----------------------------------------------
;;;6683   void cntrl_hndl(void)
00370a  e92d5ff0          PUSH     {r4-r12,lr}
;;;6684   {
;;;6685   
;;;6686   
;;;6687   
;;;6688   IZMAX_=IZMAX;
00370e  48d3              LDR      r0,|L1.14940|
003710  4cc9              LDR      r4,|L1.14904|
003712  f9b01000          LDRSH    r1,[r0,#0]  ; IZMAX
003716  8761              STRH     r1,[r4,#0x3a]
;;;6689   
;;;6690   //cntrl_hndl_plazma=10;
;;;6691   
;;;6692   if((speedChIsOn)||(sp_ch_stat==scsWRK))IZMAX_=speedChrgCurr;
003718  48d1              LDR      r0,|L1.14944|
00371a  8800              LDRH     r0,[r0,#0]  ; speedChIsOn
00371c  b918              CBNZ     r0,|L1.14118|
00371e  48d1              LDR      r0,|L1.14948|
003720  7800              LDRB     r0,[r0,#0]  ; sp_ch_stat
003722  2802              CMP      r0,#2
003724  d102              BNE      |L1.14124|
                  |L1.14118|
003726  48d0              LDR      r0,|L1.14952|
003728  8800              LDRH     r0,[r0,#0]  ; speedChrgCurr
00372a  8760              STRH     r0,[r4,#0x3a]
                  |L1.14124|
;;;6693   
;;;6694   if(cntrl_stat_blok_cnt)cntrl_stat_blok_cnt--;
00372c  f9b40062          LDRSH    r0,[r4,#0x62]  ; cntrl_stat_blok_cnt
003730  b118              CBZ      r0,|L1.14138|
003732  f1a00001          SUB      r0,r0,#1
003736  f8a40062          STRH     r0,[r4,#0x62]
                  |L1.14138|
;;;6695   if(cntrl_stat_blok_cnt_)cntrl_stat_blok_cnt_--;
00373a  f9b40064          LDRSH    r0,[r4,#0x64]  ; cntrl_stat_blok_cnt_
00373e  b118              CBZ      r0,|L1.14152|
003740  f1a00001          SUB      r0,r0,#1
003744  f8a40064          STRH     r0,[r4,#0x64]
                  |L1.14152|
;;;6696   
;;;6697   if((bat[0]._temper_stat&0x03)||(bat[1]._temper_stat&0x03))IZMAX_=IZMAX/10;
003748  48be              LDR      r0,|L1.14916|
00374a  f04f080a          MOV      r8,#0xa
00374e  f890203f          LDRB     r2,[r0,#0x3f]  ; bat
003752  0792              LSLS     r2,r2,#30
003754  d103              BNE      |L1.14174|
003756  f890008b          LDRB     r0,[r0,#0x8b]  ; bat
00375a  0780              LSLS     r0,r0,#30
00375c  d002              BEQ      |L1.14180|
                  |L1.14174|
00375e  fb91f0f8          SDIV     r0,r1,r8
003762  8760              STRH     r0,[r4,#0x3a]
                  |L1.14180|
;;;6698   
;;;6699   
;;;6700   #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;6701   if((REG_SPEED<1)||(REG_SPEED>5)) REG_SPEED=1;
003764  48c1              LDR      r0,|L1.14956|
003766  2601              MOVS     r6,#1
003768  f9b01000          LDRSH    r1,[r0,#0]  ; REG_SPEED
00376c  1e49              SUBS     r1,r1,#1
00376e  2905              CMP      r1,#5
003770  d300              BCC      |L1.14196|
003772  8006              STRH     r6,[r0,#0]
                  |L1.14196|
;;;6702   if(ch_cnt0<(10*REG_SPEED))
003774  f9b00000          LDRSH    r0,[r0,#0]  ; REG_SPEED
003778  79e1              LDRB     r1,[r4,#7]  ; ch_cnt0
00377a  eb000080          ADD      r0,r0,r0,LSL #2
00377e  2500              MOVS     r5,#0                 ;6692
003780  ebb10f40          CMP      r1,r0,LSL #1
003784  da08              BGE      |L1.14232|
;;;6703   	{
;;;6704   	ch_cnt0++;
003786  f1010101          ADD      r1,r1,#1
00378a  b2c9              UXTB     r1,r1
00378c  71e1              STRB     r1,[r4,#7]
;;;6705   	if(ch_cnt0>=10*REG_SPEED)
00378e  ebb10f40          CMP      r1,r0,LSL #1
003792  db01              BLT      |L1.14232|
;;;6706   		{
;;;6707   		ch_cnt0=0;
003794  71e5              STRB     r5,[r4,#7]
;;;6708   		b1Hz_ch=1;
003796  7226              STRB     r6,[r4,#8]
                  |L1.14232|
;;;6709   		}
;;;6710   	}
;;;6711   #endif
;;;6712   #ifndef UKU_220_IPS_TERMOKOMPENSAT
;;;6713   if(ch_cnt0<10)
;;;6714   	{
;;;6715   	ch_cnt0++;
;;;6716   	if(ch_cnt0>=10)
;;;6717   		{
;;;6718   		ch_cnt0=0;
;;;6719   		b1Hz_ch=1;
;;;6720   		}
;;;6721   	}
;;;6722   #endif
;;;6723   
;;;6724   
;;;6725   if(mess_find_unvol(MESS2CNTRL_HNDL))
003798  20e1              MOVS     r0,#0xe1
00379a  f7fffffe          BL       mess_find_unvol
;;;6726   	{
;;;6727   	if(mess_data[0]==PARAM_CNTRL_STAT_PLUS)
;;;6728   		{
;;;6729   		cntrl_stat=cntrl_stat_old+mess_data[1];
;;;6730   		}
;;;6731   	else if(mess_data[0]==PARAM_CNTRL_STAT_MINUS)
;;;6732   		{
;;;6733   		cntrl_stat=cntrl_stat_old-mess_data[1];
;;;6734   		}
;;;6735   	else if(mess_data[0]==PARAM_CNTRL_STAT_STEP_DOWN)
;;;6736   		{
;;;6737   		static char cntrlStatIsDownCnt;
;;;6738   		cntrl_stat--;
;;;6739   
;;;6740   		if((cntrl_stat<=30)||(load_U<USIGN))
;;;6741   			{
;;;6742   			if(++cntrlStatIsDownCnt==250)mess_send(MESS2KB_HNDL,PARAM_CNTRL_IS_DOWN,0,10);
;;;6743   			}
;;;6744   		else 
;;;6745   			{
;;;6746   			cntrlStatIsDownCnt=0;
;;;6747   			}
;;;6748   
;;;6749   		}
;;;6750   	else if(mess_data[0]==PARAM_CNTRL_STAT_SET)
;;;6751   		{
;;;6752   		cntrl_stat=mess_data[1];
;;;6753   		}
;;;6754   
;;;6755   	else if(mess_data[0]==PARAM_CNTRL_STAT_FAST_REG)
;;;6756   		{
;;;6757   		#ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;6758   		if(load_U>u_necc)
00379e  f8df92d0          LDR      r9,|L1.14960|
;;;6759   			{
;;;6760   			cntrl_hndl_plazma=11;
;;;6761   			if(((bps_U-u_necc)>40)&&(cntrl_stat>0))cntrl_stat-=5;
0037a2  4ab4              LDR      r2,|L1.14964|
;;;6762   			else if((cntrl_stat)&&b1Hz_ch)cntrl_stat--;
;;;6763   			}
;;;6764   		else if(bps_U<u_necc)
;;;6765   			{
;;;6766   			cntrl_hndl_plazma=12;	
;;;6767   			if(((u_necc-bps_U)>40)&&(cntrl_stat<1015))cntrl_stat+=5;
;;;6768   			else	if((cntrl_stat<1020)&&b1Hz_ch)cntrl_stat++;
;;;6769   			}
;;;6770   		#elif defined(UKU_220)
;;;6771   		if(load_U>u_necc)
;;;6772   			{
;;;6773   			cntrl_hndl_plazma=13;
;;;6774   			if(((load_U-u_necc)>40)&&(cntrl_stat>0))cntrl_stat-=5;
;;;6775   			else if((cntrl_stat)&&b1Hz_ch)cntrl_stat--;
;;;6776   			}
;;;6777   		else if(load_U<u_necc)
;;;6778   			{
;;;6779   			cntrl_hndl_plazma=14;	
;;;6780   			if(((u_necc-load_U)>40)&&(cntrl_stat<1015))cntrl_stat+=5;
;;;6781   			else	if((cntrl_stat<1020)&&b1Hz_ch)cntrl_stat++;
;;;6782   			}
;;;6783   		#elif defined(UKU_220_V2)
;;;6784   		if(load_U>u_necc)
;;;6785   			{
;;;6786   			cntrl_hndl_plazma=15;
;;;6787   			if(((load_U-u_necc)>40)&&(cntrl_stat>0))cntrl_stat-=5;
;;;6788   			else if((cntrl_stat)&&b1Hz_ch)cntrl_stat--;
;;;6789   			}
;;;6790   		else if(load_U<u_necc)
;;;6791   			{
;;;6792   			cntrl_hndl_plazma=16;	
;;;6793   			if(((u_necc-load_U)>40)&&(cntrl_stat<1015))cntrl_stat+=5;
;;;6794   			else	if((cntrl_stat<1020)&&b1Hz_ch)cntrl_stat++;
;;;6795   			}
;;;6796   		#else
;;;6797   
;;;6798   		if(load_U>u_necc)
;;;6799   			{
;;;6800   			cntrl_hndl_plazma=17;
;;;6801   			if(((load_U-u_necc)>10)&&(cntrl_stat>0))cntrl_stat-=5;
;;;6802   			else if((cntrl_stat)&&b1Hz_ch)cntrl_stat--;
;;;6803   			}
;;;6804   		else if(load_U<u_necc)
;;;6805   			{
;;;6806   			cntrl_hndl_plazma=18;	
;;;6807   			if(((u_necc-load_U)>10)&&(cntrl_stat<1015))cntrl_stat+=5;
;;;6808   			else	if((cntrl_stat<1020)&&b1Hz_ch)cntrl_stat++;
;;;6809   			}
;;;6810   		#endif	
;;;6811   	 	}
;;;6812   	}
;;;6813   
;;;6814   #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;6815   else if((b1Hz_ch)&&((!bIBAT_SMKLBR)||(bps[8]._cnt>40)))
0037a4  f8dfb2d0          LDR      r11,|L1.14968|
;;;6816   	{
;;;6817   	cntrl_stat_new=cntrl_stat_old;
;;;6818   	cntrl_hndl_plazma=19;
;;;6819   	if((Ibmax/10)>(2*IZMAX_))
;;;6820   		{
;;;6821   		cntrl_hndl_plazma=20;
;;;6822             if(cntrl_stat_blok_cnt)cntrl_stat_new--;
;;;6823   		else	cntrl_stat_new-=10;
;;;6824   		}		
;;;6825   	else if(((Ibmax/10)<(IZMAX_*2))&&(Ibmax>(IZMAX_*15)))
;;;6826   		{
;;;6827   		cntrl_hndl_plazma=21;
;;;6828             if(cntrl_stat_blok_cnt)cntrl_stat_new--;
;;;6829             else	cntrl_stat_new-=3;
;;;6830   		}   
;;;6831   	else if((Ibmax<(IZMAX_*15))&&((Ibmax/10)>IZMAX_))
;;;6832   		{
;;;6833   		cntrl_hndl_plazma=22;
;;;6834   		cntrl_stat_new--;
;;;6835   		}
;;;6836   		
;;;6837   	else if(bps_U<u_necc)
;;;6838   		{
;;;6839   		cntrl_hndl_plazma=23;
;;;6840   		if(bps_U<(u_necc-(UB0-UB20)))
;;;6841   			{
;;;6842   			cntrl_hndl_plazma=24;
;;;6843   			if(Ibmax<0)
;;;6844   				{
;;;6845   				cntrl_hndl_plazma=25;
;;;6846                       if(cntrl_stat_blok_cnt)cntrl_stat_new++;
;;;6847   				else cntrl_stat_new+=10;
;;;6848   				}
;;;6849   			else if(Ibmax<(IZMAX_*5))
;;;6850   				{
;;;6851   				cntrl_hndl_plazma=26;
;;;6852                       if(cntrl_stat_blok_cnt)cntrl_stat_new++;
;;;6853   				else	cntrl_stat_new+=2;
;;;6854   				}
;;;6855   			else if(Ibmax<((IZMAX_*10)/*-10*/))//(Ibmax<((IZMAX_*95)/10))
;;;6856   				{
;;;6857   				cntrl_hndl_plazma=27;
;;;6858   				cntrl_stat_new++;
;;;6859   				}					
;;;6860   			}
;;;6861   		else if(bps_U<(u_necc-((UB0-UB20)/4)))
;;;6862   			{
;;;6863   			cntrl_hndl_plazma=28;
;;;6864   			if(Ibmax<(IZMAX_*5))
;;;6865   				{
;;;6866   				cntrl_hndl_plazma=29;
;;;6867                       if(cntrl_stat_blok_cnt)cntrl_stat_new++;
;;;6868   				else	cntrl_stat_new+=2;
;;;6869   				}
;;;6870   			else if(Ibmax<((IZMAX_*10)/*-10*/))//(Ibmax<((IZMAX_*95)/10))
;;;6871   				{
;;;6872   				cntrl_hndl_plazma=30;
;;;6873   				cntrl_stat_new++;
;;;6874   				}					
;;;6875   			}	
;;;6876   		else if(bps_U<(u_necc-1))
;;;6877   			{
;;;6878   			cntrl_hndl_plazma=31;
;;;6879   			if(Ibmax<((IZMAX_*10)/*-10*/))//(Ibmax<((IZMAX_*95)/10))
;;;6880   				{
;;;6881   				cntrl_hndl_plazma=32;
;;;6882   				cntrl_stat_new++;
;;;6883   				}					
;;;6884   			}					
;;;6885   		}	
;;;6886   	else if((bps_U>u_necc)/*&&(!cntrl_blok)*/)
;;;6887   		{ 	
;;;6888   		cntrl_hndl_plazma=33;
;;;6889   		if(bps_U>(u_necc+(UB0-UB20)))
;;;6890   			{
;;;6891   			cntrl_hndl_plazma=34;
;;;6892                  if(cntrl_stat_blok_cnt)cntrl_stat_new--;
;;;6893   			else	cntrl_stat_new-=10;
;;;6894   			}
;;;6895   		else if(bps_U>(u_necc+((UB0-UB20)/4)))
;;;6896   			{
;;;6897   			cntrl_hndl_plazma=35;
;;;6898                  if(cntrl_stat_blok_cnt)cntrl_stat_new--;
;;;6899   			else cntrl_stat_new-=2;
;;;6900   			}	
;;;6901   		else if(bps_U>(u_necc+1))
;;;6902   			{
;;;6903   			cntrl_hndl_plazma=36;
;;;6904   			cntrl_stat_new--;
;;;6905   			}					
;;;6906   		}
;;;6907   
;;;6908   	if(hv_vz_stat==hvsOFF)
;;;6909   		{
;;;6910   		if(((sk_stat[1]==1)&&(sk_stat_old[1]==0))&&(VZ_KIND==1))cntrl_stat_new=50;
;;;6911   		}
;;;6912   
;;;6913   	gran(&cntrl_stat_new,10,1010);			
;;;6914   	cntrl_stat_old=cntrl_stat_new;
;;;6915   	cntrl_stat=cntrl_stat_new;
;;;6916   	
;;;6917   	if(ICA_EN==0)
;;;6918   		{
;;;6919   		if(ica_cntrl_hndl_cnt)
0037a8  4fb4              LDR      r7,|L1.14972|
0037aa  2800              CMP      r0,#0                 ;6725
0037ac  d07c              BEQ      |L1.14504|
0037ae  49b4              LDR      r1,|L1.14976|
0037b0  6808              LDR      r0,[r1,#0]            ;6727  ; mess_data
0037b2  2864              CMP      r0,#0x64              ;6727
0037b4  d009              BEQ      |L1.14282|
0037b6  2869              CMP      r0,#0x69              ;6731
0037b8  d00c              BEQ      |L1.14292|
0037ba  4bb2              LDR      r3,|L1.14980|
0037bc  286e              CMP      r0,#0x6e              ;6735
0037be  d00f              BEQ      |L1.14304|
0037c0  28e5              CMP      r0,#0xe5              ;6750
0037c2  d02a              BEQ      |L1.14362|
0037c4  28e6              CMP      r0,#0xe6              ;6755
0037c6  d02b              BEQ      |L1.14368|
                  |L1.14280|
0037c8  e1ce              B        |L1.15208|
                  |L1.14282|
0037ca  6848              LDR      r0,[r1,#4]            ;6729  ; mess_data
0037cc  8c61              LDRH     r1,[r4,#0x22]         ;6729  ; cntrl_stat_old
0037ce  4408              ADD      r0,r0,r1              ;6729
0037d0  8420              STRH     r0,[r4,#0x20]         ;6729
0037d2  e1c9              B        |L1.15208|
                  |L1.14292|
0037d4  6848              LDR      r0,[r1,#4]            ;6733  ; mess_data
0037d6  8c61              LDRH     r1,[r4,#0x22]         ;6733  ; cntrl_stat_old
0037d8  eba10000          SUB      r0,r1,r0              ;6733
0037dc  8420              STRH     r0,[r4,#0x20]         ;6733
0037de  e1c3              B        |L1.15208|
                  |L1.14304|
0037e0  8c20              LDRH     r0,[r4,#0x20]         ;6738  ; cntrl_stat
0037e2  f1a00001          SUB      r0,r0,#1              ;6738
0037e6  b200              SXTH     r0,r0                 ;6738
0037e8  8420              STRH     r0,[r4,#0x20]         ;6738
0037ea  281e              CMP      r0,#0x1e              ;6740
0037ec  dd06              BLE      |L1.14332|
0037ee  49a6              LDR      r1,|L1.14984|
0037f0  f9b30000          LDRSH    r0,[r3,#0]            ;6740  ; load_U
0037f4  f9b11000          LDRSH    r1,[r1,#0]            ;6740  ; USIGN
0037f8  4288              CMP      r0,r1                 ;6740
0037fa  da0c              BGE      |L1.14358|
                  |L1.14332|
0037fc  7860              LDRB     r0,[r4,#1]            ;6742  ; cntrlStatIsDownCnt
0037fe  1c40              ADDS     r0,r0,#1              ;6742
003800  b2c0              UXTB     r0,r0                 ;6742
003802  7060              STRB     r0,[r4,#1]            ;6742
003804  28fa              CMP      r0,#0xfa              ;6742
003806  d1df              BNE      |L1.14280|
003808  230a              MOVS     r3,#0xa               ;6742
00380a  2200              MOVS     r2,#0                 ;6742
00380c  21e7              MOVS     r1,#0xe7              ;6742
00380e  20e6              MOVS     r0,#0xe6              ;6742
003810  f7fffffe          BL       mess_send
003814  e1a8              B        |L1.15208|
                  |L1.14358|
003816  7065              STRB     r5,[r4,#1]            ;6746
003818  e1a6              B        |L1.15208|
                  |L1.14362|
00381a  6848              LDR      r0,[r1,#4]            ;6752  ; mess_data
00381c  8420              STRH     r0,[r4,#0x20]         ;6752
00381e  e1a3              B        |L1.15208|
                  |L1.14368|
003820  f9b31000          LDRSH    r1,[r3,#0]            ;6758  ; load_U
003824  f9b90000          LDRSH    r0,[r9,#0]            ;6758  ; u_necc
003828  4281              CMP      r1,r0                 ;6758
00382a  dd1b              BLE      |L1.14436|
00382c  f04f010b          MOV      r1,#0xb               ;6760
003830  77e1              STRB     r1,[r4,#0x1f]         ;6760
003832  f9b21000          LDRSH    r1,[r2,#0]            ;6761  ; bps_U
003836  eba10000          SUB      r0,r1,r0              ;6761
00383a  2828              CMP      r0,#0x28              ;6761
00383c  dd07              BLE      |L1.14414|
00383e  f9b40020          LDRSH    r0,[r4,#0x20]         ;6761  ; cntrl_stat
003842  2800              CMP      r0,#0                 ;6761
003844  dd03              BLE      |L1.14414|
003846  f1a00005          SUB      r0,r0,#5              ;6761
00384a  8420              STRH     r0,[r4,#0x20]         ;6761
00384c  e18c              B        |L1.15208|
                  |L1.14414|
00384e  f9b40020          LDRSH    r0,[r4,#0x20]         ;6762  ; cntrl_stat
003852  2800              CMP      r0,#0                 ;6762
003854  d0b8              BEQ      |L1.14280|
003856  7a21              LDRB     r1,[r4,#8]            ;6762  ; b1Hz_ch
003858  2900              CMP      r1,#0                 ;6762
00385a  d0b5              BEQ      |L1.14280|
00385c  f1a00001          SUB      r0,r0,#1              ;6762
003860  8420              STRH     r0,[r4,#0x20]         ;6762
003862  e181              B        |L1.15208|
                  |L1.14436|
003864  f9b21000          LDRSH    r1,[r2,#0]            ;6764  ; bps_U
003868  4281              CMP      r1,r0                 ;6764
00386a  daad              BGE      |L1.14280|
00386c  f04f020c          MOV      r2,#0xc               ;6766
003870  77e2              STRB     r2,[r4,#0x1f]         ;6766
003872  eba00001          SUB      r0,r0,r1              ;6767
003876  2828              CMP      r0,#0x28              ;6767
003878  dd0a              BLE      |L1.14480|
00387a  f9b40020          LDRSH    r0,[r4,#0x20]         ;6767  ; cntrl_stat
00387e  f24031f7          MOV      r1,#0x3f7             ;6767
003882  4288              CMP      r0,r1                 ;6767
003884  da04              BGE      |L1.14480|
003886  f1000005          ADD      r0,r0,#5              ;6767
00388a  8420              STRH     r0,[r4,#0x20]         ;6767
00388c  e16c              B        |L1.15208|
00388e  e00b              B        |L1.14504|
                  |L1.14480|
003890  f9b40020          LDRSH    r0,[r4,#0x20]         ;6768  ; cntrl_stat
003894  f5b07f7f          CMP      r0,#0x3fc             ;6768
003898  da96              BGE      |L1.14280|
00389a  7a21              LDRB     r1,[r4,#8]            ;6768  ; b1Hz_ch
00389c  2900              CMP      r1,#0                 ;6768
00389e  d093              BEQ      |L1.14280|
0038a0  f1000001          ADD      r0,r0,#1              ;6768
0038a4  8420              STRH     r0,[r4,#0x20]         ;6768
0038a6  e15f              B        |L1.15208|
                  |L1.14504|
0038a8  7a20              LDRB     r0,[r4,#8]            ;6815  ; b1Hz_ch
0038aa  2800              CMP      r0,#0                 ;6815
0038ac  d08c              BEQ      |L1.14280|
0038ae  4877              LDR      r0,|L1.14988|
0038b0  8800              LDRH     r0,[r0,#0]            ;6815  ; bIBAT_SMKLBR
0038b2  b118              CBZ      r0,|L1.14524|
0038b4  f89b02e3          LDRB     r0,[r11,#0x2e3]       ;6815  ; bps
0038b8  2828              CMP      r0,#0x28              ;6815
0038ba  d985              BLS      |L1.14280|
                  |L1.14524|
0038bc  f9b40022          LDRSH    r0,[r4,#0x22]         ;6817  ; cntrl_stat_old
0038c0  86e0              STRH     r0,[r4,#0x36]         ;6817
0038c2  f04f0113          MOV      r1,#0x13              ;6818
0038c6  77e1              STRB     r1,[r4,#0x1f]         ;6818
0038c8  f9b41038          LDRSH    r1,[r4,#0x38]         ;6819  ; Ibmax
0038cc  8f63              LDRH     r3,[r4,#0x3a]         ;6819  ; IZMAX_
0038ce  fb91fcf8          SDIV     r12,r1,r8             ;6819
0038d2  ebbc0f43          CMP      r12,r3,LSL #1         ;6819
0038d6  dd0d              BLE      |L1.14580|
0038d8  f04f0114          MOV      r1,#0x14              ;6821
0038dc  77e1              STRB     r1,[r4,#0x1f]         ;6821
0038de  f8b41062          LDRH     r1,[r4,#0x62]         ;6822  ; cntrl_stat_blok_cnt
0038e2  b119              CBZ      r1,|L1.14572|
0038e4  f1a00001          SUB      r0,r0,#1              ;6822
0038e8  86e0              STRH     r0,[r4,#0x36]         ;6822
0038ea  e10f              B        |L1.15116|
                  |L1.14572|
0038ec  f1a0000a          SUB      r0,r0,#0xa            ;6823
0038f0  86e0              STRH     r0,[r4,#0x36]         ;6823
0038f2  e10b              B        |L1.15116|
                  |L1.14580|
0038f4  da11              BGE      |L1.14618|
0038f6  ebc31803          RSB      r8,r3,r3,LSL #4       ;6825
0038fa  4588              CMP      r8,r1                 ;6825
0038fc  da0d              BGE      |L1.14618|
0038fe  f04f0115          MOV      r1,#0x15              ;6827
003902  77e1              STRB     r1,[r4,#0x1f]         ;6827
003904  f8b41062          LDRH     r1,[r4,#0x62]         ;6828  ; cntrl_stat_blok_cnt
003908  b119              CBZ      r1,|L1.14610|
00390a  f1a00001          SUB      r0,r0,#1              ;6828
00390e  86e0              STRH     r0,[r4,#0x36]         ;6828
003910  e0fc              B        |L1.15116|
                  |L1.14610|
003912  f1a00003          SUB      r0,r0,#3              ;6829
003916  86e0              STRH     r0,[r4,#0x36]         ;6829
003918  e0f8              B        |L1.15116|
                  |L1.14618|
00391a  ebc31803          RSB      r8,r3,r3,LSL #4       ;6831
00391e  4588              CMP      r8,r1                 ;6831
003920  dd08              BLE      |L1.14644|
003922  459c              CMP      r12,r3                ;6831
003924  dd06              BLE      |L1.14644|
003926  f04f0116          MOV      r1,#0x16              ;6833
00392a  77e1              STRB     r1,[r4,#0x1f]         ;6833
00392c  f1a00001          SUB      r0,r0,#1              ;6834
003930  86e0              STRH     r0,[r4,#0x36]         ;6834
003932  e0eb              B        |L1.15116|
                  |L1.14644|
003934  f9b2c000          LDRSH    r12,[r2,#0]           ;6837  ; bps_U
003938  f9b92000          LDRSH    r2,[r9,#0]            ;6837  ; u_necc
00393c  f8df8150          LDR      r8,|L1.14992|
003940  f8df9150          LDR      r9,|L1.14996|
003944  4594              CMP      r12,r2                ;6837
003946  da75              BGE      |L1.14900|
003948  f04f0a17          MOV      r10,#0x17             ;6839
00394c  f884a01f          STRB     r10,[r4,#0x1f]        ;6839
003950  f9b88000          LDRSH    r8,[r8,#0]            ;6840  ; UB0
003954  f9b99000          LDRSH    r9,[r9,#0]            ;6840  ; UB20
003958  eba80809          SUB      r8,r8,r9              ;6840
00395c  eba20908          SUB      r9,r2,r8              ;6840
003960  45e1              CMP      r9,r12                ;6840
003962  dd2e              BLE      |L1.14786|
003964  f04f0218          MOV      r2,#0x18              ;6842
003968  77e2              STRB     r2,[r4,#0x1f]         ;6842
00396a  2900              CMP      r1,#0                 ;6843
00396c  da0d              BGE      |L1.14730|
00396e  f04f0119          MOV      r1,#0x19              ;6845
003972  77e1              STRB     r1,[r4,#0x1f]         ;6845
003974  f8b41062          LDRH     r1,[r4,#0x62]         ;6846  ; cntrl_stat_blok_cnt
003978  b119              CBZ      r1,|L1.14722|
00397a  f1000001          ADD      r0,r0,#1              ;6846
00397e  86e0              STRH     r0,[r4,#0x36]         ;6846
003980  e0c4              B        |L1.15116|
                  |L1.14722|
003982  f100000a          ADD      r0,r0,#0xa            ;6847
003986  86e0              STRH     r0,[r4,#0x36]         ;6847
003988  e0c0              B        |L1.15116|
                  |L1.14730|
00398a  eb030283          ADD      r2,r3,r3,LSL #2       ;6849
00398e  428a              CMP      r2,r1                 ;6849
003990  dd0d              BLE      |L1.14766|
003992  f04f011a          MOV      r1,#0x1a              ;6851
003996  77e1              STRB     r1,[r4,#0x1f]         ;6851
003998  f8b41062          LDRH     r1,[r4,#0x62]         ;6852  ; cntrl_stat_blok_cnt
00399c  b119              CBZ      r1,|L1.14758|
00399e  f1000001          ADD      r0,r0,#1              ;6852
0039a2  86e0              STRH     r0,[r4,#0x36]         ;6852
0039a4  e0b2              B        |L1.15116|
                  |L1.14758|
0039a6  f1000002          ADD      r0,r0,#2              ;6853
0039aa  86e0              STRH     r0,[r4,#0x36]         ;6853
0039ac  e0ae              B        |L1.15116|
                  |L1.14766|
0039ae  ebb10f42          CMP      r1,r2,LSL #1          ;6855
0039b2  da05              BGE      |L1.14784|
0039b4  f04f011b          MOV      r1,#0x1b              ;6857
0039b8  77e1              STRB     r1,[r4,#0x1f]         ;6857
0039ba  f1000001          ADD      r0,r0,#1              ;6858
0039be  86e0              STRH     r0,[r4,#0x36]         ;6858
                  |L1.14784|
0039c0  e0a4              B        |L1.15116|
                  |L1.14786|
0039c2  ea4f79e8          ASR      r9,r8,#31             ;6861
0039c6  eb087899          ADD      r8,r8,r9,LSR #30      ;6861
0039ca  eba208a8          SUB      r8,r2,r8,ASR #2       ;6861
0039ce  45e0              CMP      r8,r12                ;6861
0039d0  dd1e              BLE      |L1.14864|
0039d2  f04f021c          MOV      r2,#0x1c              ;6863
0039d6  77e2              STRB     r2,[r4,#0x1f]         ;6863
0039d8  eb030283          ADD      r2,r3,r3,LSL #2       ;6864
0039dc  428a              CMP      r2,r1                 ;6864
0039de  dd0d              BLE      |L1.14844|
0039e0  f04f011d          MOV      r1,#0x1d              ;6866
0039e4  77e1              STRB     r1,[r4,#0x1f]         ;6866
0039e6  f8b41062          LDRH     r1,[r4,#0x62]         ;6867  ; cntrl_stat_blok_cnt
0039ea  b119              CBZ      r1,|L1.14836|
0039ec  f1000001          ADD      r0,r0,#1              ;6867
0039f0  86e0              STRH     r0,[r4,#0x36]         ;6867
0039f2  e08b              B        |L1.15116|
                  |L1.14836|
0039f4  f1000002          ADD      r0,r0,#2              ;6868
0039f8  86e0              STRH     r0,[r4,#0x36]         ;6868
0039fa  e087              B        |L1.15116|
                  |L1.14844|
0039fc  ebb10f42          CMP      r1,r2,LSL #1          ;6870
003a00  da05              BGE      |L1.14862|
003a02  f04f011e          MOV      r1,#0x1e              ;6872
003a06  77e1              STRB     r1,[r4,#0x1f]         ;6872
003a08  f1000001          ADD      r0,r0,#1              ;6873
003a0c  86e0              STRH     r0,[r4,#0x36]         ;6873
                  |L1.14862|
003a0e  e07d              B        |L1.15116|
                  |L1.14864|
003a10  1e52              SUBS     r2,r2,#1              ;6876
003a12  4594              CMP      r12,r2                ;6876
003a14  da7a              BGE      |L1.15116|
003a16  f04f021f          MOV      r2,#0x1f              ;6878
003a1a  77e2              STRB     r2,[r4,#0x1f]         ;6878
003a1c  eb030283          ADD      r2,r3,r3,LSL #2       ;6879
003a20  ebb10f42          CMP      r1,r2,LSL #1          ;6879
003a24  da72              BGE      |L1.15116|
003a26  f04f0120          MOV      r1,#0x20              ;6881
003a2a  77e1              STRB     r1,[r4,#0x1f]         ;6881
003a2c  f1000001          ADD      r0,r0,#1              ;6882
003a30  86e0              STRH     r0,[r4,#0x36]         ;6882
003a32  e06b              B        |L1.15116|
                  |L1.14900|
003a34  e030              B        |L1.15000|
003a36  0000              DCW      0x0000
                  |L1.14904|
                          DCD      ||area_number.23||
                  |L1.14908|
                          DCD      Isumm
                  |L1.14912|
                          DCD      Isumm_
                  |L1.14916|
                          DCD      bat
                  |L1.14920|
                          DCD      IMAX
                  |L1.14924|
                          DCD      IMIN
                  |L1.14928|
                          DCD      num_necc
                  |L1.14932|
                          DCD      PAR
                  |L1.14936|
                          DCD      NUMIST
                  |L1.14940|
                          DCD      IZMAX
                  |L1.14944|
                          DCD      speedChIsOn
                  |L1.14948|
                          DCD      sp_ch_stat
                  |L1.14952|
                          DCD      speedChrgCurr
                  |L1.14956|
                          DCD      REG_SPEED
                  |L1.14960|
                          DCD      u_necc
                  |L1.14964|
                          DCD      bps_U
                  |L1.14968|
                          DCD      bps
                  |L1.14972|
                          DCD      ica_cntrl_hndl_cnt
                  |L1.14976|
                          DCD      mess_data
                  |L1.14980|
                          DCD      load_U
                  |L1.14984|
                          DCD      USIGN
                  |L1.14988|
                          DCD      bIBAT_SMKLBR
                  |L1.14992|
                          DCD      UB0
                  |L1.14996|
                          DCD      UB20
                  |L1.15000|
003a98  dd38              BLE      |L1.15116|
003a9a  f04f0121          MOV      r1,#0x21              ;6888
003a9e  77e1              STRB     r1,[r4,#0x1f]         ;6888
003aa0  f9b81000          LDRSH    r1,[r8,#0]            ;6889  ; UB0
003aa4  f9b93000          LDRSH    r3,[r9,#0]            ;6889  ; UB20
003aa8  eba10103          SUB      r1,r1,r3              ;6889
003aac  eb010302          ADD      r3,r1,r2              ;6889
003ab0  4563              CMP      r3,r12                ;6889
003ab2  da0d              BGE      |L1.15056|
003ab4  f04f0122          MOV      r1,#0x22              ;6891
003ab8  77e1              STRB     r1,[r4,#0x1f]         ;6891
003aba  f8b41062          LDRH     r1,[r4,#0x62]         ;6892  ; cntrl_stat_blok_cnt
003abe  b119              CBZ      r1,|L1.15048|
003ac0  f1a00001          SUB      r0,r0,#1              ;6892
003ac4  86e0              STRH     r0,[r4,#0x36]         ;6892
003ac6  e021              B        |L1.15116|
                  |L1.15048|
003ac8  f1a0000a          SUB      r0,r0,#0xa            ;6893
003acc  86e0              STRH     r0,[r4,#0x36]         ;6893
003ace  e01d              B        |L1.15116|
                  |L1.15056|
003ad0  17cb              ASRS     r3,r1,#31             ;6895
003ad2  eb017193          ADD      r1,r1,r3,LSR #30      ;6895
003ad6  eb0201a1          ADD      r1,r2,r1,ASR #2       ;6895
003ada  4561              CMP      r1,r12                ;6895
003adc  da0d              BGE      |L1.15098|
003ade  f04f0123          MOV      r1,#0x23              ;6897
003ae2  77e1              STRB     r1,[r4,#0x1f]         ;6897
003ae4  f8b41062          LDRH     r1,[r4,#0x62]         ;6898  ; cntrl_stat_blok_cnt
003ae8  b119              CBZ      r1,|L1.15090|
003aea  f1a00001          SUB      r0,r0,#1              ;6898
003aee  86e0              STRH     r0,[r4,#0x36]         ;6898
003af0  e00c              B        |L1.15116|
                  |L1.15090|
003af2  f1a00002          SUB      r0,r0,#2              ;6899
003af6  86e0              STRH     r0,[r4,#0x36]         ;6899
003af8  e008              B        |L1.15116|
                  |L1.15098|
003afa  1c52              ADDS     r2,r2,#1              ;6901
003afc  4594              CMP      r12,r2                ;6901
003afe  dd05              BLE      |L1.15116|
003b00  f04f0124          MOV      r1,#0x24              ;6903
003b04  77e1              STRB     r1,[r4,#0x1f]         ;6903
003b06  f1a00001          SUB      r0,r0,#1              ;6904
003b0a  86e0              STRH     r0,[r4,#0x36]         ;6904
                  |L1.15116|
003b0c  48ff              LDR      r0,|L1.16140|
003b0e  7800              LDRB     r0,[r0,#0]            ;6908  ; hv_vz_stat
003b10  b968              CBNZ     r0,|L1.15150|
003b12  48ff              LDR      r0,|L1.16144|
003b14  7840              LDRB     r0,[r0,#1]            ;6910  ; sk_stat
003b16  2801              CMP      r0,#1                 ;6910
003b18  d109              BNE      |L1.15150|
003b1a  48fe              LDR      r0,|L1.16148|
003b1c  7840              LDRB     r0,[r0,#1]            ;6910  ; sk_stat_old
003b1e  b930              CBNZ     r0,|L1.15150|
003b20  48fd              LDR      r0,|L1.16152|
003b22  8800              LDRH     r0,[r0,#0]            ;6910  ; VZ_KIND
003b24  2801              CMP      r0,#1                 ;6910
003b26  d102              BNE      |L1.15150|
003b28  f04f0032          MOV      r0,#0x32              ;6910
003b2c  86e0              STRH     r0,[r4,#0x36]         ;6910
                  |L1.15150|
003b2e  f24032f2          MOV      r2,#0x3f2             ;6913
003b32  210a              MOVS     r1,#0xa               ;6913
003b34  48f9              LDR      r0,|L1.16156|
003b36  f7fffffe          BL       gran
003b3a  8ee0              LDRH     r0,[r4,#0x36]         ;6914  ; cntrl_stat_new
003b3c  8460              STRH     r0,[r4,#0x22]         ;6914
003b3e  8420              STRH     r0,[r4,#0x20]         ;6915
003b40  48f7              LDR      r0,|L1.16160|
003b42  f9b00000          LDRSH    r0,[r0,#0]            ;6917  ; ICA_EN
003b46  b930              CBNZ     r0,|L1.15190|
003b48  8839              LDRH     r1,[r7,#0]  ; ica_cntrl_hndl_cnt
003b4a  b121              CBZ      r1,|L1.15190|
;;;6920   			{
;;;6921   			cntrl_stat = ica_cntrl_hndl;
003b4c  49f5              LDR      r1,|L1.16164|
003b4e  8809              LDRH     r1,[r1,#0]  ; ica_cntrl_hndl
003b50  8421              STRH     r1,[r4,#0x20]
;;;6922   			cntrl_stat_new = ica_cntrl_hndl;//=10*PWM_START;
003b52  86e1              STRH     r1,[r4,#0x36]
;;;6923   			cntrl_stat_old = ica_cntrl_hndl;//=10*PWM_START;
003b54  8461              STRH     r1,[r4,#0x22]
                  |L1.15190|
;;;6924   			}
;;;6925   		}
;;;6926   	
;;;6927   	if((ICA_EN==1)||(ICA_EN==2))
003b56  2801              CMP      r0,#1
003b58  d001              BEQ      |L1.15198|
003b5a  2802              CMP      r0,#2
003b5c  d104              BNE      |L1.15208|
                  |L1.15198|
;;;6928   		{
;;;6929   		cntrl_stat=cntrl_stat_new+ica_u_necc;
003b5e  49f2              LDR      r1,|L1.16168|
003b60  8ee0              LDRH     r0,[r4,#0x36]  ; cntrl_stat_new
003b62  8809              LDRH     r1,[r1,#0]  ; ica_u_necc
003b64  4408              ADD      r0,r0,r1
003b66  8420              STRH     r0,[r4,#0x20]
                  |L1.15208|
;;;6930   		}			
;;;6931   	}
;;;6932   #else
;;;6933   else if((b1Hz_ch)&&((!bIBAT_SMKLBR)||(bps[8]._cnt>40)))
;;;6934   	{
;;;6935   	cntrl_hndl_plazma=37;
;;;6936   	cntrl_stat_new=cntrl_stat_old;
;;;6937   	
;;;6938   	if((Ibmax/10)>(2*IZMAX_))
;;;6939   		{
;;;6940   		cntrl_hndl_plazma=38;
;;;6941             if(cntrl_stat_blok_cnt)cntrl_stat_new--;
;;;6942   		else	cntrl_stat_new-=10;
;;;6943   		}		
;;;6944   	else if(((Ibmax/10)<(IZMAX_*2))&&(Ibmax>(IZMAX_*15)))
;;;6945   		{
;;;6946   		cntrl_hndl_plazma=39;
;;;6947             if(cntrl_stat_blok_cnt)cntrl_stat_new--;
;;;6948             else	cntrl_stat_new-=3;
;;;6949   		}   
;;;6950   	else if((Ibmax<(IZMAX_*15))&&((Ibmax/10)>IZMAX_))
;;;6951   		{
;;;6952   		cntrl_hndl_plazma=40;
;;;6953   		cntrl_stat_new--;
;;;6954   		}
;;;6955   		
;;;6956   	else if(load_U<u_necc)
;;;6957   		{
;;;6958   		cntrl_hndl_plazma=41;
;;;6959   		if(load_U<(u_necc-(UB0-UB20)))
;;;6960   			{
;;;6961   			cntrl_hndl_plazma=42;
;;;6962   			if(Ibmax<0)
;;;6963   				{
;;;6964   				cntrl_hndl_plazma=43;
;;;6965                       if(cntrl_stat_blok_cnt)cntrl_stat_new++;
;;;6966   				else cntrl_stat_new+=10;
;;;6967   				}
;;;6968   			else if(Ibmax<(IZMAX_*5))
;;;6969   				{
;;;6970   				cntrl_hndl_plazma=44;
;;;6971                       if(cntrl_stat_blok_cnt)cntrl_stat_new++;
;;;6972   				else	cntrl_stat_new+=2;
;;;6973   				}
;;;6974   			else if(Ibmax<((IZMAX_*95)/10))
;;;6975   				{
;;;6976   				cntrl_hndl_plazma=45;
;;;6977   				cntrl_stat_new++;
;;;6978   				}					
;;;6979   			}
;;;6980   		else if(load_U<(u_necc-((UB0-UB20)/4)))
;;;6981   			{
;;;6982   			cntrl_hndl_plazma=46;
;;;6983   			if(Ibmax<(IZMAX_*5))
;;;6984   				{
;;;6985   				cntrl_hndl_plazma=47;
;;;6986                       if(cntrl_stat_blok_cnt)cntrl_stat_new++;
;;;6987   				else	cntrl_stat_new+=2;
;;;6988   				}
;;;6989   			else if(Ibmax<((IZMAX_*95)/10))
;;;6990   				{
;;;6991   				cntrl_hndl_plazma=48;
;;;6992   				cntrl_stat_new++;
;;;6993   				}					
;;;6994   			}	
;;;6995   		else if(load_U<(u_necc-1))
;;;6996   			{
;;;6997   			cntrl_hndl_plazma=49;
;;;6998   			if(Ibmax<((IZMAX_*95)/10))
;;;6999   				{
;;;7000   				cntrl_hndl_plazma=50;
;;;7001   				cntrl_stat_new++;
;;;7002   				}					
;;;7003   			}					
;;;7004   		}	
;;;7005   	else if((load_U>u_necc)/*&&(!cntrl_blok)*/)
;;;7006   		{
;;;7007   		cntrl_hndl_plazma=51;
;;;7008   		if(load_U>(u_necc+(UB0-UB20)))
;;;7009   			{
;;;7010   			cntrl_hndl_plazma=52;
;;;7011                  if(cntrl_stat_blok_cnt)cntrl_stat_new--;
;;;7012   			else	cntrl_stat_new-=10;
;;;7013   			}
;;;7014   		else if(load_U>(u_necc+((UB0-UB20)/4)))
;;;7015   			{
;;;7016   			cntrl_hndl_plazma=53;
;;;7017                  if(cntrl_stat_blok_cnt)cntrl_stat_new--;
;;;7018   			else cntrl_stat_new-=2;
;;;7019   			}	
;;;7020   		else if(load_U>(u_necc+1))
;;;7021   			{
;;;7022   			cntrl_hndl_plazma=54;
;;;7023   			cntrl_stat_new--;
;;;7024   			}					
;;;7025   		}
;;;7026   
;;;7027   	gran(&cntrl_stat_new,10,1010);			
;;;7028   	cntrl_stat_old=cntrl_stat_new;
;;;7029   	cntrl_stat=cntrl_stat_new;	
;;;7030   	}
;;;7031   #endif
;;;7032   
;;;7033   iiii=0;
003b68  72a5              STRB     r5,[r4,#0xa]
;;;7034   for(i=0;i<NUMIST;i++)
003b6a  7265              STRB     r5,[r4,#9]
003b6c  48ef              LDR      r0,|L1.16172|
003b6e  465a              MOV      r2,r11                ;6815
003b70  f9b01000          LDRSH    r1,[r0,#0]
003b74  e00c              B        |L1.15248|
                  |L1.15222|
;;;7035        {
;;;7036        if(bps[i]._cnt<30)iiii=1;
003b76  ebc003c0          RSB      r3,r0,r0,LSL #3
003b7a  eb031300          ADD      r3,r3,r0,LSL #4
003b7e  eb020383          ADD      r3,r2,r3,LSL #2
003b82  78db              LDRB     r3,[r3,#3]
003b84  2b1e              CMP      r3,#0x1e
003b86  d200              BCS      |L1.15242|
003b88  72a6              STRB     r6,[r4,#0xa]
                  |L1.15242|
003b8a  f1000001          ADD      r0,r0,#1              ;7034
003b8e  7260              STRB     r0,[r4,#9]            ;7034
                  |L1.15248|
003b90  7a60              LDRB     r0,[r4,#9]            ;7034  ; i
003b92  4288              CMP      r0,r1                 ;7034
003b94  dbef              BLT      |L1.15222|
;;;7037        }
;;;7038   
;;;7039   if(iiii==0)
003b96  7aa0              LDRB     r0,[r4,#0xa]  ; iiii
003b98  b920              CBNZ     r0,|L1.15268|
;;;7040        {
;;;7041        cntrl_stat=600;	
003b9a  f44f7016          MOV      r0,#0x258
003b9e  8420              STRH     r0,[r4,#0x20]
;;;7042        cntrl_stat_old=600;
003ba0  8460              STRH     r0,[r4,#0x22]
;;;7043        cntrl_stat_new=600;
003ba2  86e0              STRH     r0,[r4,#0x36]
                  |L1.15268|
;;;7044   	#ifdef UKU_TELECORE2015
;;;7045   	//cntrl_stat=0;
;;;7046   	//cntrl_stat_old=0;
;;;7047   	//cntrl_stat_new=0;
;;;7048   	#endif
;;;7049        }
;;;7050   
;;;7051   #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;7052   if(ica_cntrl_hndl_cnt)	ica_cntrl_hndl_cnt--;
003ba4  f9b70000          LDRSH    r0,[r7,#0]  ; ica_cntrl_hndl_cnt
003ba8  b110              CBZ      r0,|L1.15280|
003baa  f1a00001          SUB      r0,r0,#1
003bae  8038              STRH     r0,[r7,#0]
                  |L1.15280|
;;;7053   
;;;7054   
;;;7055   
;;;7056   #endif
;;;7057   
;;;7058   
;;;7059   gran(&cntrl_stat,10,1010); 
003bb0  48da              LDR      r0,|L1.16156|
003bb2  f24032f2          MOV      r2,#0x3f2
003bb6  210a              MOVS     r1,#0xa
003bb8  3816              SUBS     r0,r0,#0x16
003bba  f7fffffe          BL       gran
;;;7060   b1Hz_ch=0;
003bbe  7225              STRB     r5,[r4,#8]
                  |L1.15296|
;;;7061   }
003bc0  e8bd9ff0          POP      {r4-r12,pc}
;;;7062   #endif
                          ENDP

                  ext_drv PROC
;;;7551   //-----------------------------------------------
;;;7552   void ext_drv(void)
003bc4  e92d5ff0          PUSH     {r4-r12,lr}
;;;7553   {
;;;7554   char i;
;;;7555   
;;;7556   
;;;7557   for(i=0;i<NUMSK;i++)
003bc8  f04f0000          MOV      r0,#0
003bcc  4ad9              LDR      r2,|L1.16180|
;;;7558   	{
;;;7559   	#ifdef UKU_MGTS
;;;7560   	if(adc_buff_[sk_buff_RSTKM[i]]<2000)
;;;7561   	#endif
;;;7562   	#ifdef UKU_RSTKM
;;;7563   	if(adc_buff_[sk_buff_RSTKM[i]]<2000)
;;;7564   	#endif
;;;7565   	#ifdef UKU_3U
;;;7566   	if(adc_buff_[sk_buff_3U[i]]<2000)
;;;7567   	#endif
;;;7568   	#ifdef UKU_GLONASS
;;;7569   	if(adc_buff_[sk_buff_GLONASS[i]]<2000)
;;;7570   	#endif
;;;7571   	#ifdef UKU_KONTUR
;;;7572   	if(adc_buff_[sk_buff_KONTUR[i]]<2000)
;;;7573   	#endif
;;;7574   	#ifdef UKU_6U
;;;7575   	if(adc_buff_[sk_buff_6U[i]]<2000)
;;;7576   	#endif
;;;7577   	#ifdef UKU_220
;;;7578   	if(adc_buff_[sk_buff_220[i]]<2000)
;;;7579   	#endif
;;;7580   	#ifdef UKU_220_V2
;;;7581   	if(adc_buff_[sk_buff_220[i]]<2000)
;;;7582   	#endif
;;;7583   	#ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;7584   	if(adc_buff_[sk_buff_220[i]]<2000)
;;;7585   	#endif
;;;7586   	#ifdef UKU_TELECORE2015	
;;;7587   	if(adc_buff_[sk_buff_TELECORE2015[i]]<2000)	 //TODO
;;;7588   	#endif
;;;7589   	#ifdef UKU_TELECORE2017
;;;7590   	if(adc_buff_[sk_buff_TELECORE2015[i]]<2000)	 //TODO
;;;7591   	#endif
;;;7592   	#ifdef IPS_SGEP_GAZPROM
;;;7593   	if(adc_buff_[sk_buff_6U[i]]<2000)
;;;7594   	#endif		
;;;7595   		{
;;;7596   		if(sk_cnt[i]<10)
003bce  4bd8              LDR      r3,|L1.16176|
;;;7597   			{
;;;7598   			sk_cnt[i]++;
;;;7599   			if(sk_cnt[i]>=10)
;;;7600   				{
;;;7601   				sk_stat[i]=ssON;
003bd0  4dcf              LDR      r5,|L1.16144|
003bd2  f04f0a01          MOV      r10,#1
;;;7602   				}
;;;7603   			}
;;;7604   		else 
;;;7605   			{
;;;7606   			sk_cnt[i]=10;
003bd6  f04f0b0a          MOV      r11,#0xa
003bda  4606              MOV      r6,r0                 ;7557
003bdc  f9b24000          LDRSH    r4,[r2,#0]            ;7557
003be0  e025              B        |L1.15406|
                  |L1.15330|
003be2  49d5              LDR      r1,|L1.16184|
003be4  4fd5              LDR      r7,|L1.16188|
003be6  5c09              LDRB     r1,[r1,r0]            ;7584
003be8  f9371011          LDRSH    r1,[r7,r1,LSL #1]     ;7584
003bec  f5b16ffa          CMP      r1,#0x7d0             ;7584
003bf0  da0e              BGE      |L1.15376|
003bf2  5619              LDRSB    r1,[r3,r0]            ;7596
003bf4  290a              CMP      r1,#0xa               ;7596
003bf6  da08              BGE      |L1.15370|
003bf8  f1010101          ADD      r1,r1,#1              ;7598
003bfc  b249              SXTB     r1,r1                 ;7598
003bfe  5419              STRB     r1,[r3,r0]            ;7598
003c00  290a              CMP      r1,#0xa               ;7599
003c02  db11              BLT      |L1.15400|
003c04  f805a000          STRB     r10,[r5,r0]           ;7601
003c08  e00e              B        |L1.15400|
                  |L1.15370|
003c0a  f803b000          STRB     r11,[r3,r0]
003c0e  e00b              B        |L1.15400|
                  |L1.15376|
;;;7607   			}
;;;7608                  
;;;7609   		}
;;;7610   	else
;;;7611   		{
;;;7612   		if(sk_cnt[i]>0)
003c10  5619              LDRSB    r1,[r3,r0]
003c12  2900              CMP      r1,#0
003c14  dd07              BLE      |L1.15398|
;;;7613   			{
;;;7614   			sk_cnt[i]--;
003c16  f1a10101          SUB      r1,r1,#1
003c1a  b249              SXTB     r1,r1
003c1c  5419              STRB     r1,[r3,r0]
;;;7615   			if(sk_cnt[i]<=0)
003c1e  2900              CMP      r1,#0
003c20  dc02              BGT      |L1.15400|
;;;7616   				{
;;;7617   				sk_stat[i]=ssOFF;
003c22  542e              STRB     r6,[r5,r0]
003c24  e000              B        |L1.15400|
                  |L1.15398|
;;;7618   				}
;;;7619   			}
;;;7620   		else 
;;;7621   			{
;;;7622   			sk_cnt[i]=0;
003c26  541e              STRB     r6,[r3,r0]
                  |L1.15400|
003c28  f1000001          ADD      r0,r0,#1              ;7557
003c2c  b2c0              UXTB     r0,r0                 ;7557
                  |L1.15406|
003c2e  42a0              CMP      r0,r4                 ;7557
003c30  dbd7              BLT      |L1.15330|
;;;7623   			}
;;;7624   		}
;;;7625   	}
;;;7626   
;;;7627   for(i=0;i<NUMSK;i++)
003c32  f04f0400          MOV      r4,#0
;;;7628   	{
;;;7629   	if(((SK_SIGN[i]==0)&&(sk_stat[i]==ssON))||((SK_SIGN[i])&&(sk_stat[i]==ssOFF)) )
;;;7630   		{
;;;7631   		if(sk_av_cnt[i]<10)
003c36  f8df9308          LDR      r9,|L1.16192|
;;;7632   			{
;;;7633   			sk_av_cnt[i]++;
;;;7634   			if(sk_av_cnt[i]>=10)
;;;7635   				{
;;;7636   				sk_av_stat[i]=sasON;
003c3a  4fc2              LDR      r7,|L1.16196|
;;;7637   				}
;;;7638   			}
;;;7639   		else 
;;;7640   			{
;;;7641   			sk_av_cnt[i]=10;
;;;7642   			}
;;;7643   		}
;;;7644   	else
;;;7645   		{
;;;7646   		if(sk_av_cnt[i]>=0)
;;;7647   			{
;;;7648   			sk_av_cnt[i]--;
;;;7649   			if(sk_av_cnt[i]<=0)
;;;7650   				{
;;;7651   				sk_av_stat[i]=sasOFF;
;;;7652   				}
;;;7653   			}
;;;7654   		else 
;;;7655   			{
;;;7656   			sk_av_cnt[i]=0;
;;;7657   			}
;;;7658   		}
;;;7659   
;;;7660   #ifndef UKU_KONTUR
;;;7661   	if(sk_av_stat_old[i]!=sk_av_stat[i])
003c3c  f8df8308          LDR      r8,|L1.16200|
003c40  e083              B        |L1.15690|
                  |L1.15426|
003c42  48c2              LDR      r0,|L1.16204|
003c44  f9300014          LDRSH    r0,[r0,r4,LSL #1]     ;7629
003c48  b910              CBNZ     r0,|L1.15440|
003c4a  5d29              LDRB     r1,[r5,r4]            ;7629
003c4c  2901              CMP      r1,#1                 ;7629
003c4e  d00f              BEQ      |L1.15472|
                  |L1.15440|
003c50  b108              CBZ      r0,|L1.15446|
003c52  5d28              LDRB     r0,[r5,r4]            ;7629
003c54  b160              CBZ      r0,|L1.15472|
                  |L1.15446|
003c56  f9190004          LDRSB    r0,[r9,r4]            ;7646
003c5a  2800              CMP      r0,#0                 ;7646
003c5c  db19              BLT      |L1.15506|
003c5e  f1a00001          SUB      r0,r0,#1              ;7648
003c62  b240              SXTB     r0,r0                 ;7648
003c64  f8090004          STRB     r0,[r9,r4]            ;7648
003c68  2800              CMP      r0,#0                 ;7649
003c6a  dc14              BGT      |L1.15510|
003c6c  553e              STRB     r6,[r7,r4]            ;7651
003c6e  e012              B        |L1.15510|
                  |L1.15472|
003c70  f9190004          LDRSB    r0,[r9,r4]            ;7631
003c74  280a              CMP      r0,#0xa               ;7631
003c76  da09              BGE      |L1.15500|
003c78  f1000001          ADD      r0,r0,#1              ;7633
003c7c  b240              SXTB     r0,r0                 ;7633
003c7e  f8090004          STRB     r0,[r9,r4]            ;7633
003c82  280a              CMP      r0,#0xa               ;7634
003c84  db07              BLT      |L1.15510|
003c86  f807a004          STRB     r10,[r7,r4]           ;7636
003c8a  e004              B        |L1.15510|
                  |L1.15500|
003c8c  f809b004          STRB     r11,[r9,r4]           ;7641
003c90  e001              B        |L1.15510|
                  |L1.15506|
003c92  f8096004          STRB     r6,[r9,r4]            ;7656
                  |L1.15510|
003c96  f8181004          LDRB     r1,[r8,r4]
003c9a  5d38              LDRB     r0,[r7,r4]
003c9c  4281              CMP      r1,r0
003c9e  d04e              BEQ      |L1.15678|
;;;7662   		{
;;;7663   		plazma_sk++;
003ca0  4a9e              LDR      r2,|L1.16156|
003ca2  3a36              SUBS     r2,r2,#0x36
003ca4  8e91              LDRH     r1,[r2,#0x34]  ; plazma_sk
003ca6  f1010101          ADD      r1,r1,#1
003caa  8691              STRH     r1,[r2,#0x34]
;;;7664   		if(sk_av_stat[i]==sasON)
003cac  2801              CMP      r0,#1
003cae  d007              BEQ      |L1.15552|
;;;7665   			{
;;;7666   			if(i==0)snmp_trap_send("SK #1 Alarm",15,1,1);
;;;7667   			else if(i==1)
;;;7668   				{
;;;7669   				#ifndef UKU_TELEKORE2017
;;;7670   				snmp_trap_send("SK #2 Alarm",15,2,1);
;;;7671   				#endif
;;;7672   				#ifdef UKU_TELEKORE2017
;;;7673   				snmp_trap_send("Door open",15,2,1);
;;;7674   				#endif
;;;7675   				}
;;;7676   			else if(i==2)snmp_trap_send("SK #3 Alarm",15,3,1);
;;;7677   			else if(i==3)snmp_trap_send("SK #4 Alarm",15,4,1);
;;;7678   			}
;;;7679   		else 
;;;7680   			{
;;;7681   			if(i==0)snmp_trap_send("SK #1 Alarm is off",15,1,0);
003cb0  b354              CBZ      r4,|L1.15624|
;;;7682   			else if(i==1)
003cb2  2c01              CMP      r4,#1
003cb4  d02f              BEQ      |L1.15638|
;;;7683   				{
;;;7684   				#ifndef UKU_TELEKORE2017
;;;7685   				snmp_trap_send("SK #2 Alarm is off",15,2,0);
;;;7686   				#endif
;;;7687   				#ifdef UKU_TELEKORE2017
;;;7688   				snmp_trap_send("Door open clear",15,2,0);
;;;7689   				#endif
;;;7690   				}
;;;7691   			else if(i==2)snmp_trap_send("SK #3 Alarm is off",15,3,0);
003cb6  2c02              CMP      r4,#2
003cb8  d034              BEQ      |L1.15652|
;;;7692   			else if(i==3)snmp_trap_send("SK #4 Alarm is off",15,4,0);
003cba  2c03              CMP      r4,#3
003cbc  d039              BEQ      |L1.15666|
003cbe  e03e              B        |L1.15678|
                  |L1.15552|
003cc0  b134              CBZ      r4,|L1.15568|
003cc2  2c01              CMP      r4,#1                 ;7667
003cc4  d00b              BEQ      |L1.15582|
003cc6  2c02              CMP      r4,#2                 ;7676
003cc8  d010              BEQ      |L1.15596|
003cca  2c03              CMP      r4,#3                 ;7677
003ccc  d015              BEQ      |L1.15610|
003cce  e036              B        |L1.15678|
                  |L1.15568|
003cd0  2301              MOVS     r3,#1                 ;7666
003cd2  461a              MOV      r2,r3                 ;7666
003cd4  210f              MOVS     r1,#0xf               ;7666
003cd6  a09e              ADR      r0,|L1.16208|
003cd8  f7fffffe          BL       snmp_trap_send
003cdc  e02f              B        |L1.15678|
                  |L1.15582|
003cde  2301              MOVS     r3,#1                 ;7670
003ce0  2202              MOVS     r2,#2                 ;7670
003ce2  210f              MOVS     r1,#0xf               ;7670
003ce4  a09d              ADR      r0,|L1.16220|
003ce6  f7fffffe          BL       snmp_trap_send
003cea  e028              B        |L1.15678|
                  |L1.15596|
003cec  2301              MOVS     r3,#1                 ;7676
003cee  2203              MOVS     r2,#3                 ;7676
003cf0  210f              MOVS     r1,#0xf               ;7676
003cf2  a09d              ADR      r0,|L1.16232|
003cf4  f7fffffe          BL       snmp_trap_send
003cf8  e021              B        |L1.15678|
                  |L1.15610|
003cfa  2301              MOVS     r3,#1                 ;7677
003cfc  2204              MOVS     r2,#4                 ;7677
003cfe  210f              MOVS     r1,#0xf               ;7677
003d00  a09c              ADR      r0,|L1.16244|
003d02  f7fffffe          BL       snmp_trap_send
003d06  e01a              B        |L1.15678|
                  |L1.15624|
003d08  2300              MOVS     r3,#0                 ;7681
003d0a  2201              MOVS     r2,#1                 ;7681
003d0c  210f              MOVS     r1,#0xf               ;7681
003d0e  a09c              ADR      r0,|L1.16256|
003d10  f7fffffe          BL       snmp_trap_send
003d14  e013              B        |L1.15678|
                  |L1.15638|
003d16  2300              MOVS     r3,#0                 ;7685
003d18  2202              MOVS     r2,#2                 ;7685
003d1a  210f              MOVS     r1,#0xf               ;7685
003d1c  a09d              ADR      r0,|L1.16276|
003d1e  f7fffffe          BL       snmp_trap_send
003d22  e00c              B        |L1.15678|
                  |L1.15652|
003d24  2300              MOVS     r3,#0                 ;7691
003d26  2203              MOVS     r2,#3                 ;7691
003d28  210f              MOVS     r1,#0xf               ;7691
003d2a  a09f              ADR      r0,|L1.16296|
003d2c  f7fffffe          BL       snmp_trap_send
003d30  e005              B        |L1.15678|
                  |L1.15666|
003d32  2300              MOVS     r3,#0
003d34  2204              MOVS     r2,#4
003d36  210f              MOVS     r1,#0xf
003d38  a0a0              ADR      r0,|L1.16316|
003d3a  f7fffffe          BL       snmp_trap_send
                  |L1.15678|
;;;7693   			}
;;;7694   	 	}
;;;7695   #endif
;;;7696   
;;;7697   #ifdef UKU_KONTUR
;;;7698   	if(sk_av_stat_old[i]!=sk_av_stat[i])
;;;7699   		{
;;;7700   		plazma_sk++;
;;;7701   		if(sk_av_stat[i]==sasON)
;;;7702   			{
;;;7703   			if(i==0)snmp_trap_send("Door is opened",15,1,1);
;;;7704   			else if(i==1)snmp_trap_send("Smoke Alarm",15,2,1);
;;;7705   			else if(i==2)snmp_trap_send("Shock Sensor Alarm",15,3,1);
;;;7706   			else if(i==3)snmp_trap_send("SK #4 Alarm",15,4,1);
;;;7707   			}
;;;7708   		else 
;;;7709   			{
;;;7710   			if(i==0)snmp_trap_send("Door is closed",15,1,0);
;;;7711   			else if(i==1)snmp_trap_send("Smoke Alarm is off",15,2,0);
;;;7712   			else if(i==2)snmp_trap_send("Shock Sensor Alarm is off",15,3,0);
;;;7713   			else if(i==3)snmp_trap_send("SK #4 Alarm is off",15,4,0);
;;;7714   			}
;;;7715   	 	}
;;;7716   #endif
;;;7717   	sk_av_stat_old[i]=sk_av_stat[i];
003d3e  5d38              LDRB     r0,[r7,r4]
003d40  f8080004          STRB     r0,[r8,r4]
003d44  f1040401          ADD      r4,r4,#1              ;7627
003d48  b2e4              UXTB     r4,r4                 ;7627
                  |L1.15690|
003d4a  487a              LDR      r0,|L1.16180|
003d4c  f9b00000          LDRSH    r0,[r0,#0]            ;7627  ; NUMSK
003d50  4284              CMP      r4,r0                 ;7627
003d52  f6ffaf76          BLT      |L1.15426|
;;;7718   	}
;;;7719   }
003d56  e733              B        |L1.15296|
;;;7720   
                          ENDP

                  zar_superviser_start PROC
;;;7757   //-----------------------------------------------
;;;7758   void zar_superviser_start(void)
003d58  4a9d              LDR      r2,|L1.16336|
;;;7759   {
;;;7760   sign_U[0]=1;
003d5a  f04f0001          MOV      r0,#1
003d5e  7010              STRB     r0,[r2,#0]
;;;7761   sign_I[0]=1;
003d60  499c              LDR      r1,|L1.16340|
003d62  7008              STRB     r0,[r1,#0]
;;;7762   sign_U[1]=1;
003d64  7050              STRB     r0,[r2,#1]
;;;7763   sign_I[1]=1;
003d66  7048              STRB     r0,[r1,#1]
;;;7764   
;;;7765   }
003d68  4770              BX       lr
;;;7766   
                          ENDP

                  zar_superviser_drv PROC
;;;7722   //-----------------------------------------------
;;;7723   void zar_superviser_drv(void)
003d6a  e92d5ff0          PUSH     {r4-r12,lr}
;;;7724   {
;;;7725   
;;;7726   if(((bat[0]._Ub>u_necc_up) || (bat[0]._Ub<u_necc_dn))&&(main_kb_cnt<((TBAT*60)-30))&&(main_kb_cnt>((TBAT*60)-150))) sign_U[0]=0;
003d6e  489b              LDR      r0,|L1.16348|
003d70  f8df926c          LDR      r9,|L1.16352|
003d74  f8df8260          LDR      r8,|L1.16344|
003d78  f9b0c000          LDRSH    r12,[r0,#0]  ; u_necc_up
003d7c  f9b90000          LDRSH    r0,[r9,#0]
003d80  4c66              LDR      r4,|L1.16156|
003d82  ebc01100          RSB      r1,r0,r0,LSL #4
003d86  3c36              SUBS     r4,r4,#0x36
003d88  f9b87002          LDRSH    r7,[r8,#2]  ; bat
003d8c  f06f0a1d          MVN      r10,#0x1d
003d90  f06f0b95          MVN      r11,#0x95
003d94  2500              MOVS     r5,#0
003d96  4e8e              LDR      r6,|L1.16336|
003d98  f9b40040          LDRSH    r0,[r4,#0x40]
003d9c  eb0a0281          ADD      r2,r10,r1,LSL #2
003da0  eb0b0381          ADD      r3,r11,r1,LSL #2
003da4  4567              CMP      r7,r12
003da6  dc05              BGT      |L1.15796|
003da8  f8dfc238          LDR      r12,|L1.16356|
003dac  f9bcc000          LDRSH    r12,[r12,#0]  ; u_necc_dn
003db0  4567              CMP      r7,r12
003db2  da04              BGE      |L1.15806|
                  |L1.15796|
003db4  4282              CMP      r2,r0
003db6  dd02              BLE      |L1.15806|
003db8  4283              CMP      r3,r0
003dba  da00              BGE      |L1.15806|
003dbc  7035              STRB     r5,[r6,#0]
                  |L1.15806|
;;;7727   
;;;7728   if(((bat[0]._Ib>(2*IKB)) || (bat[0]._Ib<(-IKB*2))) &&(main_kb_cnt<((TBAT*60)-30))&&(main_kb_cnt>((TBAT*60)-150))) sign_I[0]=0;
003dbe  4f8a              LDR      r7,|L1.16360|
003dc0  f9b8c008          LDRSH    r12,[r8,#8]  ; bat
003dc4  f9b7e000          LDRSH    lr,[r7,#0]  ; IKB
003dc8  4f82              LDR      r7,|L1.16340|
003dca  ebbc0f4e          CMP      r12,lr,LSL #1
003dce  dc04              BGT      |L1.15834|
003dd0  f1ce0e00          RSB      lr,lr,#0
003dd4  ebbc0f4e          CMP      r12,lr,LSL #1
003dd8  da04              BGE      |L1.15844|
                  |L1.15834|
003dda  4282              CMP      r2,r0
003ddc  dd02              BLE      |L1.15844|
003dde  4283              CMP      r3,r0
003de0  da00              BGE      |L1.15844|
003de2  703d              STRB     r5,[r7,#0]
                  |L1.15844|
;;;7729   																 
;;;7730   if((main_kb_cnt==((TBAT*60)-10)) &&(spc_stat==spcOFF))
003de4  f06f0209          MVN      r2,#9
003de8  eb020181          ADD      r1,r2,r1,LSL #2
003dec  4281              CMP      r1,r0
003dee  d120              BNE      |L1.15922|
003df0  7d20              LDRB     r0,[r4,#0x14]  ; spc_stat
003df2  b9f0              CBNZ     r0,|L1.15922|
;;;7731   	{
;;;7732   	if((sign_U[0]==1) && (sign_I[0]==1) && (lc640_read_int(EE_BAT1_ZAR_CNT)!=BAT_C_REAL[0]) && (NUMBAT) && (!(bat[0]._av&1)))
003df4  7830              LDRB     r0,[r6,#0]  ; sign_U
003df6  2801              CMP      r0,#1
003df8  d11b              BNE      |L1.15922|
003dfa  7838              LDRB     r0,[r7,#0]  ; sign_I
003dfc  2801              CMP      r0,#1
003dfe  d118              BNE      |L1.15922|
003e00  f44f70d6          MOV      r0,#0x1ac
003e04  f7fffffe          BL       lc640_read_int
003e08  4978              LDR      r1,|L1.16364|
003e0a  f9b11000          LDRSH    r1,[r1,#0]  ; BAT_C_REAL
003e0e  4288              CMP      r0,r1
003e10  d00f              BEQ      |L1.15922|
003e12  4877              LDR      r0,|L1.16368|
003e14  8800              LDRH     r0,[r0,#0]  ; NUMBAT
003e16  b160              CBZ      r0,|L1.15922|
003e18  f898003d          LDRB     r0,[r8,#0x3d]  ; bat
003e1c  07c0              LSLS     r0,r0,#31
003e1e  d108              BNE      |L1.15922|
;;;7733   		{
;;;7734   		lc640_write_int(EE_BAT1_ZAR_CNT,BAT_C_REAL[0]);
003e20  f44f70d6          MOV      r0,#0x1ac
003e24  f7fffffe          BL       lc640_write_int
;;;7735   		superviser_cnt++;
003e28  4872              LDR      r0,|L1.16372|
003e2a  7801              LDRB     r1,[r0,#0]  ; superviser_cnt
003e2c  f1010101          ADD      r1,r1,#1
003e30  7001              STRB     r1,[r0,#0]
                  |L1.15922|
;;;7736   		}
;;;7737   	
;;;7738   	}
;;;7739   
;;;7740   if(((bat[0]._Ub>u_necc_up) || (bat[1]._Ub<u_necc_dn))&&(main_kb_cnt<((TBAT*60)-30))&&(main_kb_cnt>((TBAT*60)-150))) sign_U[1]=0;
003e32  486a              LDR      r0,|L1.16348|
003e34  f9b81002          LDRSH    r1,[r8,#2]  ; bat
003e38  f9b00000          LDRSH    r0,[r0,#0]  ; u_necc_up
003e3c  4281              CMP      r1,r0
003e3e  dc06              BGT      |L1.15950|
003e40  4868              LDR      r0,|L1.16356|
003e42  f9b8104e          LDRSH    r1,[r8,#0x4e]  ; bat
003e46  f9b00000          LDRSH    r0,[r0,#0]  ; u_necc_dn
003e4a  4281              CMP      r1,r0
003e4c  da0e              BGE      |L1.15980|
                  |L1.15950|
003e4e  f9b90000          LDRSH    r0,[r9,#0]  ; TBAT
003e52  f9b41040          LDRSH    r1,[r4,#0x40]  ; main_kb_cnt
003e56  ebc01000          RSB      r0,r0,r0,LSL #4
003e5a  eb0a0280          ADD      r2,r10,r0,LSL #2
003e5e  428a              CMP      r2,r1
003e60  dd04              BLE      |L1.15980|
003e62  eb0b0080          ADD      r0,r11,r0,LSL #2
003e66  4288              CMP      r0,r1
003e68  da00              BGE      |L1.15980|
003e6a  7075              STRB     r5,[r6,#1]
                  |L1.15980|
;;;7741   
;;;7742   if(((bat[1]._Ib>(2*IKB)) || (bat[1]._Ib<(-IKB*2))) &&(main_kb_cnt<((TBAT*60)-30))&&(main_kb_cnt>((TBAT*60)-150))) sign_I[1]=0;
003e6c  495e              LDR      r1,|L1.16360|
003e6e  f9b80054          LDRSH    r0,[r8,#0x54]  ; bat
003e72  f9b11000          LDRSH    r1,[r1,#0]  ; IKB
003e76  ebb00f41          CMP      r0,r1,LSL #1
003e7a  dc03              BGT      |L1.16004|
003e7c  4249              RSBS     r1,r1,#0
003e7e  ebb00f41          CMP      r0,r1,LSL #1
003e82  da0e              BGE      |L1.16034|
                  |L1.16004|
003e84  f9b90000          LDRSH    r0,[r9,#0]  ; TBAT
003e88  f9b41040          LDRSH    r1,[r4,#0x40]  ; main_kb_cnt
003e8c  ebc01000          RSB      r0,r0,r0,LSL #4
003e90  eb0a0280          ADD      r2,r10,r0,LSL #2
003e94  428a              CMP      r2,r1
003e96  dd04              BLE      |L1.16034|
003e98  eb0b0080          ADD      r0,r11,r0,LSL #2
003e9c  4288              CMP      r0,r1
003e9e  da00              BGE      |L1.16034|
003ea0  707d              STRB     r5,[r7,#1]
                  |L1.16034|
;;;7743   																 
;;;7744   if((main_kb_cnt==((TBAT*60)-10)) &&(spc_stat==spcOFF))
003ea2  f9b90000          LDRSH    r0,[r9,#0]  ; TBAT
003ea6  ebc01100          RSB      r1,r0,r0,LSL #4
003eaa  f06f0009          MVN      r0,#9
003eae  eb000081          ADD      r0,r0,r1,LSL #2
003eb2  f9b41040          LDRSH    r1,[r4,#0x40]  ; main_kb_cnt
003eb6  4288              CMP      r0,r1
003eb8  d121              BNE      |L1.16126|
003eba  7d20              LDRB     r0,[r4,#0x14]  ; spc_stat
003ebc  b9f8              CBNZ     r0,|L1.16126|
;;;7745   	{
;;;7746   	if((sign_U[1]==1) && (sign_I[1]==1) && (lc640_read_int(EE_BAT2_ZAR_CNT)!=BAT_C_REAL[1]) && (NUMBAT==2) && (!(bat[1]._av&1)))
003ebe  7870              LDRB     r0,[r6,#1]  ; sign_U
003ec0  2801              CMP      r0,#1
003ec2  d11c              BNE      |L1.16126|
003ec4  7878              LDRB     r0,[r7,#1]  ; sign_I
003ec6  2801              CMP      r0,#1
003ec8  d119              BNE      |L1.16126|
003eca  f44f75e5          MOV      r5,#0x1ca
003ece  4628              MOV      r0,r5
003ed0  f7fffffe          BL       lc640_read_int
003ed4  4945              LDR      r1,|L1.16364|
003ed6  f9b11002          LDRSH    r1,[r1,#2]  ; BAT_C_REAL
003eda  4288              CMP      r0,r1
003edc  d00f              BEQ      |L1.16126|
003ede  4844              LDR      r0,|L1.16368|
003ee0  8800              LDRH     r0,[r0,#0]  ; NUMBAT
003ee2  2802              CMP      r0,#2
003ee4  d10b              BNE      |L1.16126|
003ee6  f8980089          LDRB     r0,[r8,#0x89]  ; bat
003eea  07c0              LSLS     r0,r0,#31
003eec  d107              BNE      |L1.16126|
;;;7747   		{
;;;7748   		lc640_write_int(EE_BAT2_ZAR_CNT,BAT_C_REAL[1]);
003eee  4628              MOV      r0,r5
003ef0  f7fffffe          BL       lc640_write_int
;;;7749   		superviser_cnt++;
003ef4  483f              LDR      r0,|L1.16372|
003ef6  7801              LDRB     r1,[r0,#0]  ; superviser_cnt
003ef8  f1010101          ADD      r1,r1,#1
003efc  7001              STRB     r1,[r0,#0]
                  |L1.16126|
;;;7750   		}
;;;7751   	
;;;7752   	}
;;;7753   
;;;7754   if(main_kb_cnt==((TBAT*60)-2)) zar_superviser_start();
003efe  f9b90000          LDRSH    r0,[r9,#0]  ; TBAT
003f02  f06f0101          MVN      r1,#1
003f06  ebc01000          RSB      r0,r0,r0,LSL #4
003f0a  e075              B        |L1.16376|
                  |L1.16140|
                          DCD      hv_vz_stat
                  |L1.16144|
                          DCD      sk_stat
                  |L1.16148|
                          DCD      sk_stat_old
                  |L1.16152|
                          DCD      VZ_KIND
                  |L1.16156|
                          DCD      ||area_number.23||+0x36
                  |L1.16160|
                          DCD      ICA_EN
                  |L1.16164|
                          DCD      ica_cntrl_hndl
                  |L1.16168|
                          DCD      ica_u_necc
                  |L1.16172|
                          DCD      NUMIST
                  |L1.16176|
                          DCD      sk_cnt
                  |L1.16180|
                          DCD      NUMSK
                  |L1.16184|
                          DCD      ||area_number.17||
                  |L1.16188|
                          DCD      ||.bss||+0x400
                  |L1.16192|
                          DCD      sk_av_cnt
                  |L1.16196|
                          DCD      sk_av_stat
                  |L1.16200|
                          DCD      sk_av_stat_old
                  |L1.16204|
                          DCD      SK_SIGN
                  |L1.16208|
003f50  534b2023          DCB      "SK #1 Alarm",0
003f54  3120416c
003f58  61726d00
                  |L1.16220|
003f5c  534b2023          DCB      "SK #2 Alarm",0
003f60  3220416c
003f64  61726d00
                  |L1.16232|
003f68  534b2023          DCB      "SK #3 Alarm",0
003f6c  3320416c
003f70  61726d00
                  |L1.16244|
003f74  534b2023          DCB      "SK #4 Alarm",0
003f78  3420416c
003f7c  61726d00
                  |L1.16256|
003f80  534b2023          DCB      "SK #1 Alarm is off",0
003f84  3120416c
003f88  61726d20
003f8c  6973206f
003f90  666600  
003f93  00                DCB      0
                  |L1.16276|
003f94  534b2023          DCB      "SK #2 Alarm is off",0
003f98  3220416c
003f9c  61726d20
003fa0  6973206f
003fa4  666600  
003fa7  00                DCB      0
                  |L1.16296|
003fa8  534b2023          DCB      "SK #3 Alarm is off",0
003fac  3320416c
003fb0  61726d20
003fb4  6973206f
003fb8  666600  
003fbb  00                DCB      0
                  |L1.16316|
003fbc  534b2023          DCB      "SK #4 Alarm is off",0
003fc0  3420416c
003fc4  61726d20
003fc8  6973206f
003fcc  666600  
003fcf  00                DCB      0
                  |L1.16336|
                          DCD      sign_U
                  |L1.16340|
                          DCD      sign_I
                  |L1.16344|
                          DCD      bat
                  |L1.16348|
                          DCD      u_necc_up
                  |L1.16352|
                          DCD      TBAT
                  |L1.16356|
                          DCD      u_necc_dn
                  |L1.16360|
                          DCD      IKB
                  |L1.16364|
                          DCD      BAT_C_REAL
                  |L1.16368|
                          DCD      NUMBAT
                  |L1.16372|
                          DCD      superviser_cnt
                  |L1.16376|
003ff8  eb010080          ADD      r0,r1,r0,LSL #2
003ffc  f9b41040          LDRSH    r1,[r4,#0x40]  ; main_kb_cnt
004000  4288              CMP      r0,r1
004002  d102              BNE      |L1.16394|
004004  e8bd5ff0          POP      {r4-r12,lr}
004008  e7fe              B        zar_superviser_start
                  |L1.16394|
;;;7755   }
00400a  e5d9              B        |L1.15296|
;;;7756   
                          ENDP

                  npn_hndl PROC
;;;7767   //-----------------------------------------------
;;;7768   void npn_hndl(void)
00400c  e92d03f0          PUSH     {r4-r9}
;;;7769   {
;;;7770   if(NPN_OUT!=npnoOFF)
004010  48ff              LDR      r0,|L1.17424|
004012  f04f0c00          MOV      r12,#0
;;;7771   	{
;;;7772   /*	if(NPN_SIGN==npnsAVNET)
;;;7773   		{
;;;7774   		if(net_av==1)
;;;7775   			{
;;;7776   			if(npn_tz_cnt<TZNPN)
;;;7777   				{
;;;7778   				npn_tz_cnt++;
;;;7779   				if(npn_tz_cnt==TZNPN)
;;;7780   					{
;;;7781   					npn_stat=npnsOFF;
;;;7782   					}
;;;7783   				}
;;;7784   			}
;;;7785   		else
;;;7786   			{
;;;7787   			if(npn_tz_cnt)
;;;7788   				{
;;;7789   				npn_tz_cnt--;
;;;7790   				if(npn_tz_cnt==0)
;;;7791   					{
;;;7792   					npn_stat=npnsON;
;;;7793   					}
;;;7794   				}
;;;7795   			}
;;;7796   		}*/
;;;7797   /*	if(NPN_SIGN==npnsULOAD)
;;;7798   		{
;;;7799   		if(load_U<UONPN)
;;;7800   			{
;;;7801   			if(npn_tz_cnt<TZNPN)
;;;7802   				{
;;;7803   				npn_tz_cnt++;
;;;7804   				if(npn_tz_cnt==TZNPN)
;;;7805   					{
;;;7806   					npn_stat=npnsOFF;
;;;7807   					}
;;;7808   				}
;;;7809   			}
;;;7810   		else if(load_U>UVNPN)
;;;7811   			{
;;;7812   			if(npn_tz_cnt)
;;;7813   				{
;;;7814   				npn_tz_cnt--;
;;;7815   				if(npn_tz_cnt==0)
;;;7816   					{
;;;7817   					npn_stat=npnsON;
;;;7818   					}
;;;7819   				}
;;;7820   			}
;;;7821   		}*/
;;;7822   
;;;7823   	if((load_U<UONPN)&&((net_Ua<UMN)||(net_Ub<UMN)||(net_Uc<UMN)))
;;;7824   		{
;;;7825   		if(npn_tz_cnt<TZNPN)
;;;7826   			{
;;;7827   			npn_tz_cnt++;
;;;7828   			if(npn_tz_cnt==TZNPN)
;;;7829   				{
;;;7830   				npn_stat=npnsOFF;
;;;7831   				}
;;;7832   			}
;;;7833   		}
;;;7834   	else if((load_U>UVNPN)&&(net_Ua>UMN)&&(net_Ub>UMN)&&(net_Uc>UMN))
;;;7835   		{
;;;7836   		if(npn_tz_cnt)
;;;7837   			{
;;;7838   			npn_tz_cnt--;
;;;7839   			if(npn_tz_cnt==0)
;;;7840   				{
;;;7841   				npn_stat=npnsON;
004016  f04f0801          MOV      r8,#1
00401a  7800              LDRB     r0,[r0,#0]            ;7770  ; NPN_OUT
00401c  4ffd              LDR      r7,|L1.17428|
00401e  4efe              LDR      r6,|L1.17432|
004020  b3e8              CBZ      r0,|L1.16542|
004022  48fe              LDR      r0,|L1.17436|
004024  4639              MOV      r1,r7                 ;7825
004026  f9b05000          LDRSH    r5,[r0,#0]            ;7823  ; load_U
00402a  48fd              LDR      r0,|L1.17440|
00402c  f9b11000          LDRSH    r1,[r1,#0]            ;7825
004030  f9b09000          LDRSH    r9,[r0,#0]            ;7823  ; UONPN
004034  48fb              LDR      r0,|L1.17444|
004036  454d              CMP      r5,r9                 ;7823
004038  f9b02000          LDRSH    r2,[r0,#0]            ;7823
00403c  48fa              LDR      r0,|L1.17448|
00403e  f9b03000          LDRSH    r3,[r0,#0]            ;7823
004042  48fa              LDR      r0,|L1.17452|
004044  f9b04000          LDRSH    r4,[r0,#0]            ;7823
004048  48f9              LDR      r0,|L1.17456|
00404a  f9b00000          LDRSH    r0,[r0,#0]            ;7823
00404e  da13              BGE      |L1.16504|
004050  4282              CMP      r2,r0                 ;7823
004052  db03              BLT      |L1.16476|
004054  4283              CMP      r3,r0                 ;7823
004056  db01              BLT      |L1.16476|
004058  4284              CMP      r4,r0                 ;7823
00405a  da0d              BGE      |L1.16504|
                  |L1.16476|
00405c  48f5              LDR      r0,|L1.17460|
00405e  f9b02000          LDRSH    r2,[r0,#0]            ;7825  ; TZNPN
004062  4291              CMP      r1,r2                 ;7825
004064  da23              BGE      |L1.16558|
004066  f1010101          ADD      r1,r1,#1              ;7827
00406a  b208              SXTH     r0,r1                 ;7827
00406c  8038              STRH     r0,[r7,#0]            ;7827
00406e  4290              CMP      r0,r2                 ;7828
004070  d11d              BNE      |L1.16558|
004072  f886c000          STRB     r12,[r6,#0]           ;7830
004076  e01a              B        |L1.16558|
                  |L1.16504|
004078  f8dfc3bc          LDR      r12,|L1.17464|
00407c  f9bcc000          LDRSH    r12,[r12,#0]          ;7834  ; UVNPN
004080  4565              CMP      r5,r12                ;7834
004082  dd14              BLE      |L1.16558|
004084  4282              CMP      r2,r0                 ;7834
004086  dd12              BLE      |L1.16558|
004088  4283              CMP      r3,r0                 ;7834
00408a  dd10              BLE      |L1.16558|
00408c  4284              CMP      r4,r0                 ;7834
00408e  dd0e              BLE      |L1.16558|
004090  b169              CBZ      r1,|L1.16558|
004092  f1a10101          SUB      r1,r1,#1              ;7838
004096  b208              SXTH     r0,r1                 ;7838
004098  8038              STRH     r0,[r7,#0]            ;7838
00409a  b940              CBNZ     r0,|L1.16558|
00409c  e000              B        |L1.16544|
                  |L1.16542|
00409e  e002              B        |L1.16550|
                  |L1.16544|
0040a0  f8868000          STRB     r8,[r6,#0]
0040a4  e003              B        |L1.16558|
                  |L1.16550|
;;;7842   				}
;;;7843   			}
;;;7844   		}
;;;7845   	}
;;;7846   else
;;;7847   	{
;;;7848   	npn_tz_cnt=0;
0040a6  f8a7c000          STRH     r12,[r7,#0]
;;;7849   	npn_stat=npnsON;
0040aa  f8868000          STRB     r8,[r6,#0]
                  |L1.16558|
;;;7850   	}
;;;7851   
;;;7852   if(npn_stat==npnsOFF) mess_send(MESS2RELE_HNDL,PARAM_RELE_NPN,1,15);
0040ae  7830              LDRB     r0,[r6,#0]  ; npn_stat
0040b0  2800              CMP      r0,#0
0040b2  d107              BNE      |L1.16580|
0040b4  e8bd03f0          POP      {r4-r9}
0040b8  230f              MOVS     r3,#0xf
0040ba  2201              MOVS     r2,#1
0040bc  216e              MOVS     r1,#0x6e
0040be  20d2              MOVS     r0,#0xd2
0040c0  f7ffbffe          B.W      mess_send
                  |L1.16580|
;;;7853   
;;;7854   
;;;7855   }
0040c4  e8bd03f0          POP      {r4-r9}
0040c8  4770              BX       lr
;;;7856   
                          ENDP

                  loadoff_hndl PROC
;;;7858   //-----------------------------------------------
;;;7859   void loadoff_hndl(void)
0040ca  b5f0              PUSH     {r4-r7,lr}
;;;7860   {
;;;7861   if((load_U>UONPN)||(load_U<UVNPN))
0040cc  48d3              LDR      r0,|L1.17436|
;;;7862   	{
;;;7863   	if(load_off_cnt<TZNPN)
0040ce  4ddb              LDR      r5,|L1.17468|
;;;7864   		{
;;;7865   		load_off_cnt++;
;;;7866   		if(load_off_cnt>=TZNPN)
;;;7867   			{
;;;7868   			load_off_stat=npnsOFF;
0040d0  2700              MOVS     r7,#0
0040d2  f9b01000          LDRSH    r1,[r0,#0]            ;7861  ; load_U
0040d6  48d2              LDR      r0,|L1.17440|
0040d8  4ed9              LDR      r6,|L1.17472|
0040da  f9b02000          LDRSH    r2,[r0,#0]            ;7861  ; UONPN
0040de  f9b50000          LDRSH    r0,[r5,#0]            ;7863
0040e2  4291              CMP      r1,r2                 ;7861
0040e4  dc04              BGT      |L1.16624|
0040e6  4bd4              LDR      r3,|L1.17464|
0040e8  f9b33000          LDRSH    r3,[r3,#0]            ;7861  ; UVNPN
0040ec  4299              CMP      r1,r3                 ;7861
0040ee  da0d              BGE      |L1.16652|
                  |L1.16624|
0040f0  49d0              LDR      r1,|L1.17460|
0040f2  f9b11000          LDRSH    r1,[r1,#0]            ;7863  ; TZNPN
0040f6  4288              CMP      r0,r1                 ;7863
0040f8  da1c              BGE      |L1.16692|
0040fa  f1000001          ADD      r0,r0,#1              ;7865
0040fe  b200              SXTH     r0,r0                 ;7865
004100  8028              STRH     r0,[r5,#0]            ;7865
004102  4288              CMP      r0,r1                 ;7866
004104  db16              BLT      |L1.16692|
004106  7037              STRB     r7,[r6,#0]
;;;7869   			load_off_cnt=TZNPN;
004108  8029              STRH     r1,[r5,#0]
00410a  e013              B        |L1.16692|
                  |L1.16652|
;;;7870   			}
;;;7871   		}
;;;7872   	}
;;;7873   else if((load_U>(UVNPN+dUNPN))&&(load_U<(UONPN-dUNPN)))
00410c  4ccd              LDR      r4,|L1.17476|
00410e  f9b44000          LDRSH    r4,[r4,#0]  ; dUNPN
004112  4423              ADD      r3,r3,r4
004114  428b              CMP      r3,r1
004116  da0d              BGE      |L1.16692|
004118  1b12              SUBS     r2,r2,r4
00411a  428a              CMP      r2,r1
00411c  dd0a              BLE      |L1.16692|
;;;7874   	{
;;;7875   	if(load_off_cnt)
00411e  b148              CBZ      r0,|L1.16692|
;;;7876   		{
;;;7877   		load_off_cnt--;
004120  f1a00001          SUB      r0,r0,#1
004124  b200              SXTH     r0,r0
004126  8028              STRH     r0,[r5,#0]
;;;7878   		if(load_off_cnt<=0)
004128  2800              CMP      r0,#0
00412a  dc03              BGT      |L1.16692|
;;;7879   			{
;;;7880   			load_off_stat=npnsON;
00412c  f04f0001          MOV      r0,#1
004130  7030              STRB     r0,[r6,#0]
;;;7881   			load_off_cnt=0;
004132  802f              STRH     r7,[r5,#0]
                  |L1.16692|
;;;7882   			}
;;;7883   		}
;;;7884   	}
;;;7885   
;;;7886   
;;;7887   if(load_off_stat==npnsOFF) tloaddisable_cmnd=10;
004134  7830              LDRB     r0,[r6,#0]  ; load_off_stat
004136  2800              CMP      r0,#0
004138  d103              BNE      |L1.16706|
00413a  49c3              LDR      r1,|L1.17480|
00413c  f04f000a          MOV      r0,#0xa
004140  7008              STRB     r0,[r1,#0]
                  |L1.16706|
;;;7888   
;;;7889   
;;;7890   }
004142  bdf0              POP      {r4-r7,pc}
;;;7891   
                          ENDP

                  speedChargeStartStop PROC
;;;8054   //-----------------------------------------------
;;;8055   void speedChargeStartStop(void)
004144  b508              PUSH     {r3,lr}
;;;8056   {
;;;8057   /*if(speedChIsOn)
;;;8058   	{
;;;8059   	speedChIsOn=0;
;;;8060   	}
;;;8061   
;;;8062   else
;;;8063   	{
;;;8064   	if(speedChrgBlckStat==0)
;;;8065   		{
;;;8066   		speedChIsOn=1;
;;;8067   		speedChTimeCnt=0;
;;;8068   		}
;;;8069   	else
;;;8070   		{
;;;8071   		show_mess(	"     Óñêîðåííûé     ",
;;;8072   	          		"       çàðÿä        ",
;;;8073   	          		"    çàáëîêèðîâàí!   ",
;;;8074   	          		"                    ",2000);	 
;;;8075   		}
;;;8076   	}*/
;;;8077   
;;;8078   if(sp_ch_stat!=scsOFF)
004146  48c1              LDR      r0,|L1.17484|
004148  7801              LDRB     r1,[r0,#0]  ; sp_ch_stat
00414a  b119              CBZ      r1,|L1.16724|
;;;8079   	{
;;;8080   	sp_ch_stat=scsOFF;
00414c  f04f0100          MOV      r1,#0
004150  7001              STRB     r1,[r0,#0]
;;;8081   	}
;;;8082   
;;;8083   else
;;;8084   	{
;;;8085   	if(speedChrgBlckStat==0)
;;;8086   		{
;;;8087   		sp_ch_stat=scsSTEP1;
;;;8088   		}
;;;8089   	else 
;;;8090   		{
;;;8091   		show_mess(	"     Óñêîðåííûé     ",
;;;8092   	          		"       çàðÿä        ",
;;;8093   	          		"    çàáëîêèðîâàí!   ",
;;;8094   	          		"                    ",2000);
;;;8095   		}
;;;8096   	}
;;;8097   }
004152  bd08              POP      {r3,pc}
                  |L1.16724|
004154  49be              LDR      r1,|L1.17488|
004156  8809              LDRH     r1,[r1,#0]            ;8085  ; speedChrgBlckStat
004158  b149              CBZ      r1,|L1.16750|
00415a  f44f60fa          MOV      r0,#0x7d0             ;8091
00415e  9000              STR      r0,[sp,#0]            ;8091
004160  a3bc              ADR      r3,|L1.17492|
004162  a2c2              ADR      r2,|L1.17516|
004164  a1c7              ADR      r1,|L1.17540|
004166  a0cd              ADR      r0,|L1.17564|
004168  f7fffffe          BL       show_mess
00416c  bd08              POP      {r3,pc}
                  |L1.16750|
00416e  f04f0101          MOV      r1,#1                 ;8087
004172  7001              STRB     r1,[r0,#0]            ;8087
004174  bd08              POP      {r3,pc}
;;;8098   
                          ENDP

                  speedChargeHndl PROC
;;;7892   //-----------------------------------------------
;;;7893   void speedChargeHndl(void)
004176  e92d4ff8          PUSH     {r3-r11,lr}
;;;7894   {
;;;7895   /*
;;;7896   if(sp_ch_stat==scsOFF)
;;;7897   	{
;;;7898   	if((sk_stat[1]==1)&&(sk_stat_old[1]=0))
;;;7899   	}*/
;;;7900   	 
;;;7901   if(sp_ch_stat==scsSTEP1)
00417a  f8df82d0          LDR      r8,|L1.17484|
;;;7902   	{
;;;7903   	if(sp_ch_stat_old!=sp_ch_stat)
;;;7904   		{
;;;7905   		sp_ch_stat_cnt=5;
;;;7906   		}
;;;7907   	if(sp_ch_stat_cnt)
;;;7908   		{
;;;7909   		sp_ch_stat_cnt--;
;;;7910   		if(sp_ch_stat_cnt==0)
;;;7911   			{
;;;7912   			sp_ch_stat=scsERR1; 	//Íå âêëþ÷èëàñü âåíòèëÿöèÿ;
;;;7913   
;;;7914   			}
;;;7915   		}
;;;7916   	if(sk_stat[0]==1)sp_ch_stat=scsWRK;
00417e  f8dfa334          LDR      r10,|L1.17588|
004182  4ecd              LDR      r6,|L1.17592|
004184  f8982000          LDRB     r2,[r8,#0]            ;7901  ; sp_ch_stat
004188  f89a1000          LDRB     r1,[r10,#0]
00418c  7830              LDRB     r0,[r6,#0]            ;7903
00418e  4ccb              LDR      r4,|L1.17596|
004190  f04f0902          MOV      r9,#2
004194  2a01              CMP      r2,#1                 ;7901
004196  d114              BNE      |L1.16834|
004198  2801              CMP      r0,#1                 ;7903
00419a  d002              BEQ      |L1.16802|
00419c  f04f0205          MOV      r2,#5                 ;7905
0041a0  8022              STRH     r2,[r4,#0]            ;7905
                  |L1.16802|
0041a2  f9b42000          LDRSH    r2,[r4,#0]            ;7907  ; sp_ch_stat_cnt
0041a6  b142              CBZ      r2,|L1.16826|
0041a8  f1a20201          SUB      r2,r2,#1              ;7909
0041ac  b212              SXTH     r2,r2                 ;7909
0041ae  8022              STRH     r2,[r4,#0]            ;7909
0041b0  b91a              CBNZ     r2,|L1.16826|
0041b2  f04f0203          MOV      r2,#3                 ;7912
0041b6  f8882000          STRB     r2,[r8,#0]            ;7912
                  |L1.16826|
0041ba  2901              CMP      r1,#1
0041bc  d101              BNE      |L1.16834|
0041be  f8889000          STRB     r9,[r8,#0]
                  |L1.16834|
;;;7917   	}
;;;7918   
;;;7919   if(sp_ch_stat==scsWRK)
0041c2  f8982000          LDRB     r2,[r8,#0]  ; sp_ch_stat
0041c6  2500              MOVS     r5,#0
0041c8  2a02              CMP      r2,#2
0041ca  d11c              BNE      |L1.16902|
;;;7920   	{
;;;7921   	if(sp_ch_stat_old!=sp_ch_stat)
;;;7922   		{
;;;7923   		sp_ch_wrk_cnt=(signed long)speedChrgTimeInHour*3600L;
0041cc  4bbc              LDR      r3,|L1.17600|
;;;7924   		hv_vz_up_cnt=0;
0041ce  4fbd              LDR      r7,|L1.17604|
0041d0  2802              CMP      r0,#2                 ;7921
0041d2  d008              BEQ      |L1.16870|
0041d4  4abc              LDR      r2,|L1.17608|
0041d6  f44f6c61          MOV      r12,#0xe10            ;7923
0041da  f9b22000          LDRSH    r2,[r2,#0]            ;7923  ; speedChrgTimeInHour
0041de  fb02f20c          MUL      r2,r2,r12             ;7923
0041e2  601a              STR      r2,[r3,#0]            ;7923  ; sp_ch_wrk_cnt
0041e4  603d              STR      r5,[r7,#0]  ; hv_vz_up_cnt
                  |L1.16870|
;;;7925   		}
;;;7926   	sp_ch_wrk_cnt--;
0041e6  681a              LDR      r2,[r3,#0]  ; sp_ch_wrk_cnt
0041e8  f1a20201          SUB      r2,r2,#1
0041ec  601a              STR      r2,[r3,#0]  ; sp_ch_wrk_cnt
;;;7927   	hv_vz_up_cnt++;
0041ee  683b              LDR      r3,[r7,#0]  ; hv_vz_up_cnt
0041f0  f1030301          ADD      r3,r3,#1
0041f4  603b              STR      r3,[r7,#0]  ; hv_vz_up_cnt
;;;7928   	if(sp_ch_wrk_cnt==0)
0041f6  b90a              CBNZ     r2,|L1.16892|
;;;7929   		{
;;;7930   		sp_ch_stat=scsOFF;
0041f8  f8885000          STRB     r5,[r8,#0]
                  |L1.16892|
;;;7931   		}
;;;7932   	if(sk_stat[0]==0)sp_ch_stat=scsERR2;
0041fc  b919              CBNZ     r1,|L1.16902|
0041fe  f04f0104          MOV      r1,#4
004202  f8881000          STRB     r1,[r8,#0]
                  |L1.16902|
;;;7933   	
;;;7934   	}
;;;7935   
;;;7936   if(sp_ch_stat==scsERR1)		//Îòñóòñòâóåò âåíòèëÿöèÿ ïðè âêëþ÷åíèè
004206  f8981000          LDRB     r1,[r8,#0]  ; sp_ch_stat
;;;7937   	{
;;;7938   	if((sp_ch_stat_old!=sp_ch_stat)||(sp_ch_stat_cnt==0))
;;;7939   		{
;;;7940   		sp_ch_stat_cnt=10;
00420a  270a              MOVS     r7,#0xa
;;;7941   		}
;;;7942   	sp_ch_stat_cnt--;
;;;7943   	if((sp_ch_stat_cnt==10)||(sp_ch_stat_cnt==9))
;;;7944   		{
;;;7945   		show_mess(	"  ÓÑÊÎÐÅÍÍÛÉ ÇÀÐßÄ  ",
00420c  f2413b88          MOV      r11,#0x1388
004210  2903              CMP      r1,#3                 ;7936
004212  d115              BNE      |L1.16960|
004214  2803              CMP      r0,#3                 ;7938
004216  d101              BNE      |L1.16924|
004218  8820              LDRH     r0,[r4,#0]            ;7938  ; sp_ch_stat_cnt
00421a  b900              CBNZ     r0,|L1.16926|
                  |L1.16924|
00421c  8027              STRH     r7,[r4,#0]            ;7940
                  |L1.16926|
00421e  8820              LDRH     r0,[r4,#0]            ;7942  ; sp_ch_stat_cnt
004220  f1a00001          SUB      r0,r0,#1              ;7942
004224  b200              SXTH     r0,r0                 ;7942
004226  8020              STRH     r0,[r4,#0]            ;7942
004228  280a              CMP      r0,#0xa               ;7943
00422a  d001              BEQ      |L1.16944|
00422c  2809              CMP      r0,#9                 ;7943
00422e  d107              BNE      |L1.16960|
                  |L1.16944|
004230  a3a6              ADR      r3,|L1.17612|
004232  a2ac              ADR      r2,|L1.17636|
004234  a1b1              ADR      r1,|L1.17660|
004236  a0b7              ADR      r0,|L1.17684|
004238  f8cdb000          STR      r11,[sp,#0]
00423c  f7fffffe          BL       show_mess
                  |L1.16960|
;;;7946   					"   ÍÅ ÌÎÆÅÒ ÁÛÒÜ    ",
;;;7947   					"      ÂÊËÞ×ÅÍ       ",
;;;7948   					"  ÁÅÇ ÂÅÍÒÈËßÖÈÈ!!  ",
;;;7949   					5000);
;;;7950   		}
;;;7951   	}
;;;7952   if(sp_ch_stat==scsERR2)		//Ïðîïàëà âåíòèëÿöèÿ ïðè ðàáîòå
004240  f8980000          LDRB     r0,[r8,#0]  ; sp_ch_stat
004244  2804              CMP      r0,#4
004246  d11e              BNE      |L1.17030|
;;;7953   	{
;;;7954   	if((sp_ch_stat_old!=sp_ch_stat)||(sp_ch_stat_cnt==0))
004248  7830              LDRB     r0,[r6,#0]  ; sp_ch_stat_old
00424a  2804              CMP      r0,#4
00424c  d101              BNE      |L1.16978|
00424e  8820              LDRH     r0,[r4,#0]  ; sp_ch_stat_cnt
004250  b900              CBNZ     r0,|L1.16980|
                  |L1.16978|
;;;7955   		{
;;;7956   		sp_ch_stat_cnt=10;
004252  8027              STRH     r7,[r4,#0]
                  |L1.16980|
;;;7957   		}
;;;7958   	sp_ch_stat_cnt--;
004254  8820              LDRH     r0,[r4,#0]  ; sp_ch_stat_cnt
004256  f1a00001          SUB      r0,r0,#1
00425a  b200              SXTH     r0,r0
00425c  8020              STRH     r0,[r4,#0]
;;;7959   	if((sp_ch_stat_cnt==10)||(sp_ch_stat_cnt==9))
00425e  280a              CMP      r0,#0xa
004260  d001              BEQ      |L1.16998|
004262  2809              CMP      r0,#9
004264  d109              BNE      |L1.17018|
                  |L1.16998|
;;;7960   		{
;;;7961   		show_mess(	"  ÓÑÊÎÐÅÍÍÛÉ ÇÀÐßÄ  ",
004266  4bb1              LDR      r3,|L1.17708|
004268  a0aa              ADR      r0,|L1.17684|
00426a  f1030218          ADD      r2,r3,#0x18
00426e  f1020118          ADD      r1,r2,#0x18
004272  f8cdb000          STR      r11,[sp,#0]
004276  f7fffffe          BL       show_mess
                  |L1.17018|
;;;7962   					"    ÇÀÁËÎÊÈÐÎÂÀÍ    ",
;;;7963   					"     ÍÅÈÑÏÐÀÂÍÀ     ",
;;;7964   					"    ÂÅÍÒÈËßÖÈß!!!   ",
;;;7965   					5000);
;;;7966   		}
;;;7967   	if(sk_stat[0]==1)sp_ch_stat=scsWRK;
00427a  f89a0000          LDRB     r0,[r10,#0]  ; sk_stat
00427e  2801              CMP      r0,#1
004280  d101              BNE      |L1.17030|
004282  f8889000          STRB     r9,[r8,#0]
                  |L1.17030|
;;;7968   	}
;;;7969   
;;;7970   
;;;7971   sp_ch_stat_old=sp_ch_stat;
004286  f8980000          LDRB     r0,[r8,#0]  ; sp_ch_stat
00428a  7030              STRB     r0,[r6,#0]
;;;7972   
;;;7973   
;;;7974   
;;;7975   if(speedChrgAvtEn==1)
00428c  49a8              LDR      r1,|L1.17712|
;;;7976   	{
;;;7977   	if(sp_ch_stat==scsOFF)
;;;7978   		{
;;;7979   		if((load_U<u_necc)&&((u_necc-load_U)>speedChrgDU)&&(abs(Ib_ips_termokompensat/10-IZMAX)<5)&&(!speedChrgBlckStat))
00428e  4c70              LDR      r4,|L1.17488|
004290  8809              LDRH     r1,[r1,#0]            ;7975  ; speedChrgAvtEn
004292  2901              CMP      r1,#1                 ;7975
004294  d11f              BNE      |L1.17110|
004296  b9f0              CBNZ     r0,|L1.17110|
004298  4860              LDR      r0,|L1.17436|
00429a  49a6              LDR      r1,|L1.17716|
00429c  f9b00000          LDRSH    r0,[r0,#0]  ; load_U
0042a0  f9b11000          LDRSH    r1,[r1,#0]  ; u_necc
0042a4  4288              CMP      r0,r1
0042a6  da16              BGE      |L1.17110|
0042a8  1a08              SUBS     r0,r1,r0
0042aa  49a3              LDR      r1,|L1.17720|
0042ac  f9b11000          LDRSH    r1,[r1,#0]  ; speedChrgDU
0042b0  4288              CMP      r0,r1
0042b2  dd10              BLE      |L1.17110|
0042b4  48a1              LDR      r0,|L1.17724|
0042b6  49a2              LDR      r1,|L1.17728|
0042b8  f9b00000          LDRSH    r0,[r0,#0]  ; Ib_ips_termokompensat
0042bc  8809              LDRH     r1,[r1,#0]  ; IZMAX
0042be  fb90f0f7          SDIV     r0,r0,r7
0042c2  1a40              SUBS     r0,r0,r1
0042c4  b200              SXTH     r0,r0
0042c6  f7fffffe          BL       abs
0042ca  2805              CMP      r0,#5
0042cc  da03              BGE      |L1.17110|
0042ce  8820              LDRH     r0,[r4,#0]  ; speedChrgBlckStat
0042d0  b908              CBNZ     r0,|L1.17110|
;;;7980   			{
;;;7981   			speedChargeStartStop();
0042d2  f7fffffe          BL       speedChargeStartStop
                  |L1.17110|
;;;7982   			}
;;;7983   		}
;;;7984   	}
;;;7985   
;;;7986   
;;;7987   
;;;7988   /*
;;;7989   if(speedChIsOn)
;;;7990   	{
;;;7991   	speedChTimeCnt++;
;;;7992   	if(speedChTimeCnt>=((signed long)speedChrgTimeInHour*3600L))
;;;7993   		{
;;;7994   		speedChIsOn=0;
;;;7995   		}
;;;7996   	if(speedChrgBlckStat)
;;;7997   		{
;;;7998   		speedChIsOn=0;
;;;7999   		speedChTimeCnt=0;
;;;8000   		}
;;;8001   	}
;;;8002   
;;;8003   
;;;8004   
;;;8005   if(speedChrgAvtEn)
;;;8006   	{
;;;8007   	if(!speedChIsOn)
;;;8008   		{
;;;8009   		if((load_U<u_necc)&&((u_necc-load_U)>speedChrgDU)&&(abs(Ib_ips_termokompensat/10-IZMAX)<5)&&(!speedChrgBlckStat))
;;;8010   			{
;;;8011   			speedChIsOn=1;
;;;8012   			}
;;;8013   		}
;;;8014   	}
;;;8015   
;;;8016   
;;;8017   */
;;;8018   if(/*(speedChrgBlckSrc!=1)&&*/(speedChrgBlckSrc!=2)) speedChrgBlckStat=0;
0042d6  489b              LDR      r0,|L1.17732|
0042d8  8800              LDRH     r0,[r0,#0]  ; speedChrgBlckSrc
0042da  2802              CMP      r0,#2
0042dc  d002              BEQ      |L1.17124|
0042de  8025              STRH     r5,[r4,#0]
                  |L1.17120|
;;;8019   else
;;;8020   	{
;;;8021   	speedChrgBlckStat=0;
;;;8022   	if(speedChrgBlckSrc==1)
;;;8023   		{
;;;8024   		if(((speedChrgBlckLog==0)&&(adc_buff_[11]>2000)) || ((speedChrgBlckLog==1)&&(adc_buff_[11]<2000))) speedChrgBlckStat=1;
;;;8025   		}
;;;8026   	else if(speedChrgBlckSrc==2)
;;;8027   		{
;;;8028   		if(((speedChrgBlckLog==0)&&(adc_buff_[13]>2000)) || ((speedChrgBlckLog==1)&&(adc_buff_[13]<2000))) speedChrgBlckStat=1;
;;;8029   		}
;;;8030   	}
;;;8031   
;;;8032   /*
;;;8033   if(speedChrgBlckStat==1)
;;;8034   	{
;;;8035   
;;;8036   	//speedChargeStartStop();
;;;8037   
;;;8038   	speedChrgShowCnt++;
;;;8039   	if(speedChrgShowCnt>=30)	
;;;8040   		{
;;;8041   		speedChrgShowCnt=0;
;;;8042   		show_mess(	"     ÓÑÊÎÐÅÍÍÛÉ     ",
;;;8043   					"       ÇÀÐßÄ        ",
;;;8044   					"     ÇÀÏÐÅÙÅÍ!!!    ",
;;;8045   					"                    ",
;;;8046   					5000);
;;;8047   		}
;;;8048   	} 
;;;8049   else speedChrgShowCnt=0;  */
;;;8050   
;;;8051   
;;;8052   }
0042e0  e8bd8ff8          POP      {r3-r11,pc}
                  |L1.17124|
0042e4  8025              STRH     r5,[r4,#0]            ;8021
0042e6  4898              LDR      r0,|L1.17736|
0042e8  4998              LDR      r1,|L1.17740|
0042ea  f44f63fa          MOV      r3,#0x7d0             ;8024
0042ee  f9b00000          LDRSH    r0,[r0,#0]            ;8028  ; speedChrgBlckLog
0042f2  b918              CBNZ     r0,|L1.17148|
0042f4  f9b1201a          LDRSH    r2,[r1,#0x1a]         ;8028  ; adc_buff_
0042f8  429a              CMP      r2,r3                 ;8028
0042fa  dc05              BGT      |L1.17160|
                  |L1.17148|
0042fc  2801              CMP      r0,#1                 ;8028
0042fe  d1ef              BNE      |L1.17120|
004300  f9b1001a          LDRSH    r0,[r1,#0x1a]         ;8028  ; adc_buff_
004304  4298              CMP      r0,r3                 ;8028
004306  daeb              BGE      |L1.17120|
                  |L1.17160|
004308  f04f0001          MOV      r0,#1                 ;8028
00430c  8020              STRH     r0,[r4,#0]            ;8028
00430e  e7e7              B        |L1.17120|
;;;8053   
                          ENDP

                  averageChargeHndl PROC
;;;8099   //-----------------------------------------------
;;;8100   void averageChargeHndl(void)
004310  e92d4ff8          PUSH     {r3-r11,lr}
;;;8101   {
;;;8102   /*
;;;8103   if(hv_vz_stat==hvsOFF)
;;;8104   	{
;;;8105   	if((sk_stat[1]==1)&&(sk_stat_old[1]=0))
;;;8106   	} */
;;;8107   if(hv_vz_stat==hvsSTEP1)
004314  f8dfa238          LDR      r10,|L1.17744|
;;;8108   	{
;;;8109   	if(hv_vz_stat_old!=hv_vz_stat)
;;;8110   		{
;;;8111   		hv_vz_stat_cnt=5;
;;;8112   		}
;;;8113   	if(hv_vz_stat_cnt)
;;;8114   		{
;;;8115   		hv_vz_stat_cnt--;
;;;8116   		if(hv_vz_stat_cnt==0)
;;;8117   			{
;;;8118   			hv_vz_stat=hvsERR1; 	//Íå âêëþ÷èëàñü âåíòèëÿöèÿ;
;;;8119   			lc640_write(EE_HV_VZ_STAT,hvsERR1);
;;;8120   			}
;;;8121   		}
;;;8122   	if(sk_stat[0]==1)
004318  4e66              LDR      r6,|L1.17588|
00431a  4d8e              LDR      r5,|L1.17748|
00431c  f89a0000          LDRB     r0,[r10,#0]           ;8107  ; hv_vz_stat
004320  4c8d              LDR      r4,|L1.17752|
004322  f04f0905          MOV      r9,#5                 ;8111
004326  2801              CMP      r0,#1                 ;8107
004328  d131              BNE      |L1.17294|
00432a  7828              LDRB     r0,[r5,#0]            ;8109  ; hv_vz_stat_old
00432c  2801              CMP      r0,#1                 ;8109
00432e  d001              BEQ      |L1.17204|
004330  f8a49000          STRH     r9,[r4,#0]            ;8111
                  |L1.17204|
004334  f9b40000          LDRSH    r0,[r4,#0]            ;8113  ; hv_vz_stat_cnt
004338  b168              CBZ      r0,|L1.17238|
00433a  f1a00001          SUB      r0,r0,#1              ;8115
00433e  b200              SXTH     r0,r0                 ;8115
004340  8020              STRH     r0,[r4,#0]            ;8115
004342  b940              CBNZ     r0,|L1.17238|
004344  f04f0006          MOV      r0,#6                 ;8118
004348  f88a0000          STRB     r0,[r10,#0]           ;8118
00434c  4601              MOV      r1,r0                 ;8119
00434e  f44f70b4          MOV      r0,#0x168             ;8119
004352  f7fffffe          BL       lc640_write
                  |L1.17238|
004356  7830              LDRB     r0,[r6,#0]  ; sk_stat
004358  2801              CMP      r0,#1
00435a  d118              BNE      |L1.17294|
;;;8123   		{
;;;8124   		hv_vz_stat=hvsSTEP2;
00435c  f04f0002          MOV      r0,#2
004360  f88a0000          STRB     r0,[r10,#0]
;;;8125   		lc640_write(EE_HV_VZ_STAT,hvsSTEP2);
004364  4601              MOV      r1,r0
004366  f44f70b4          MOV      r0,#0x168
00436a  f7fffffe          BL       lc640_write
;;;8126   		tree_up(iHV_STEP2_2,1,0,0);
00436e  2300              MOVS     r3,#0
004370  461a              MOV      r2,r3
004372  2101              MOVS     r1,#1
004374  20d4              MOVS     r0,#0xd4
004376  f7fffffe          BL       tree_up
;;;8127   		tree_up(iHV_STEP2_1,0,0,0);
00437a  2300              MOVS     r3,#0
00437c  461a              MOV      r2,r3
00437e  4619              MOV      r1,r3
004380  20d3              MOVS     r0,#0xd3
004382  f7fffffe          BL       tree_up
;;;8128   		ret(1200);
004386  f44f6096          MOV      r0,#0x4b0
00438a  f7fffffe          BL       ||ret||
                  |L1.17294|
;;;8129   		}
;;;8130   	}
;;;8131   
;;;8132   if(hv_vz_stat==hvsSTEP2)
00438e  f89a0000          LDRB     r0,[r10,#0]  ; hv_vz_stat
004392  2802              CMP      r0,#2
004394  d10b              BNE      |L1.17326|
;;;8133   	{
;;;8134   	if((hv_vz_stat_old!=hv_vz_stat)||(hv_vz_stat_cnt==0))
004396  7829              LDRB     r1,[r5,#0]  ; hv_vz_stat_old
004398  2902              CMP      r1,#2
00439a  d101              BNE      |L1.17312|
00439c  8821              LDRH     r1,[r4,#0]  ; hv_vz_stat_cnt
00439e  b911              CBNZ     r1,|L1.17318|
                  |L1.17312|
;;;8135   		{
;;;8136   		hv_vz_stat_cnt=15;
0043a0  f04f010f          MOV      r1,#0xf
0043a4  8021              STRH     r1,[r4,#0]
                  |L1.17318|
;;;8137   		}
;;;8138   	hv_vz_stat_cnt--;
0043a6  8821              LDRH     r1,[r4,#0]  ; hv_vz_stat_cnt
0043a8  f1a10101          SUB      r1,r1,#1
0043ac  8021              STRH     r1,[r4,#0]
                  |L1.17326|
;;;8139   	//if((hv_vz_stat_cnt==14)/*||(hv_vz_stat_cnt==13)||(hv_vz_stat_cnt==12)*/)
;;;8140   	//	{
;;;8141   //		show_mess_number(	"     ÂÍÈÌÀÍÈÅ!!!    ",
;;;8142   	//				"  Íàïðÿæåíèå áóäåò  ",
;;;8143   	//				" óâåëè÷åíî äî     @Â",
;;;8144   	//				"ÎÒÊËÞ×ÈÒÅ ÍÀÃÐÓÇÊÓ!!",
;;;8145   	//				4800,UVZ,1);
;;;8146   	//	}
;;;8147   	//if((hv_vz_stat_cnt==8)/*||(hv_vz_stat_cnt==7)||(hv_vz_stat_cnt==6)*/)
;;;8148   	//	{
;;;8149   	//	show_mess(	"    ÏÎÄÒÂÅÐÄÈÒÅ     ",
;;;8150   	//				"     ÍÀÆÀÒÈÅÌ       ",
;;;8151   	//				"    ÖÅÍÒÐÀËÜÍÎÉ     ",
;;;8152   	//				"      ÊÍÎÏÊÈ        ",
;;;8153   	//				4800);
;;;8154   	//	} 
;;;8155   /*	if(sk_stat[1]==1)
;;;8156   		{
;;;8157   		hv_vz_stat=hvsWRK;
;;;8158   		lc640_write(EE_HV_VZ_STAT,hvsWRK);
;;;8159   		}*/
;;;8160   	}
;;;8161   
;;;8162   if(hv_vz_stat==hvsSTEP3)
;;;8163   	{
;;;8164   	if((hv_vz_stat_old!=hv_vz_stat)||(hv_vz_stat_cnt==0))
;;;8165   		{
;;;8166   		hv_vz_stat_cnt=10;
0043ae  270a              MOVS     r7,#0xa
;;;8167   		}
;;;8168   	hv_vz_stat_cnt--;
;;;8169   	if((hv_vz_stat_cnt==10)||(hv_vz_stat_cnt==9))
;;;8170   		{
;;;8171   		show_mess(	"     ÂÊËÞ×ÈÒÅ       ",
0043b0  f2413888          MOV      r8,#0x1388
0043b4  2803              CMP      r0,#3                 ;8162
0043b6  d120              BNE      |L1.17402|
0043b8  7828              LDRB     r0,[r5,#0]            ;8164  ; hv_vz_stat_old
0043ba  2803              CMP      r0,#3                 ;8164
0043bc  d101              BNE      |L1.17346|
0043be  8820              LDRH     r0,[r4,#0]            ;8164  ; hv_vz_stat_cnt
0043c0  b900              CBNZ     r0,|L1.17348|
                  |L1.17346|
0043c2  8027              STRH     r7,[r4,#0]            ;8166
                  |L1.17348|
0043c4  8820              LDRH     r0,[r4,#0]            ;8168  ; hv_vz_stat_cnt
0043c6  f1a00001          SUB      r0,r0,#1              ;8168
0043ca  b200              SXTH     r0,r0                 ;8168
0043cc  8020              STRH     r0,[r4,#0]            ;8168
0043ce  280a              CMP      r0,#0xa               ;8169
0043d0  d001              BEQ      |L1.17366|
0043d2  2809              CMP      r0,#9                 ;8169
0043d4  d107              BNE      |L1.17382|
                  |L1.17366|
0043d6  a361              ADR      r3,|L1.17756|
0043d8  a266              ADR      r2,|L1.17780|
0043da  a16c              ADR      r1,|L1.17804|
0043dc  a071              ADR      r0,|L1.17828|
0043de  f8cd8000          STR      r8,[sp,#0]
0043e2  f7fffffe          BL       show_mess
                  |L1.17382|
;;;8172   					"      ÒÓÌÁËÅÐ       ",
;;;8173   					"   ÂÛÐÀÂÍÈÂÀÞÙÈÉ    ",
;;;8174   					"       ÇÀÐßÄ        ",
;;;8175   					5000);
;;;8176   		}
;;;8177   	if(sk_stat[1]==1)
0043e6  7870              LDRB     r0,[r6,#1]  ; sk_stat
0043e8  2801              CMP      r0,#1
0043ea  d106              BNE      |L1.17402|
;;;8178   		{
;;;8179   		hv_vz_stat=hvsWRK;
0043ec  f88a9000          STRB     r9,[r10,#0]
;;;8180   		lc640_write(EE_HV_VZ_STAT,hvsWRK);
0043f0  2105              MOVS     r1,#5
0043f2  f44f70b4          MOV      r0,#0x168
0043f6  f7fffffe          BL       lc640_write
                  |L1.17402|
;;;8181   		}
;;;8182   	}
;;;8183   
;;;8184   if(hv_vz_stat==hvsWRK)
0043fa  f89a0000          LDRB     r0,[r10,#0]  ; hv_vz_stat
0043fe  f04f0b00          MOV      r11,#0
004402  2805              CMP      r0,#5
004404  d103              BNE      |L1.17422|
;;;8185   	{
;;;8186   	if(hv_vz_stat_old!=hv_vz_stat)
004406  7828              LDRB     r0,[r5,#0]  ; hv_vz_stat_old
;;;8187   		{
;;;8188   		hv_vz_wrk_cnt=3600L/*100L*/*((long)VZ_HR);
004408  4a6c              LDR      r2,|L1.17852|
;;;8189   		if(VZ_HR==0)  	hv_vz_wrk_cnt=1800L;
;;;8190   		hv_vz_up_cnt=0L;
00440a  492e              LDR      r1,|L1.17604|
00440c  e0d8              B        |L1.17856|
                  |L1.17422|
00440e  e10f              B        |L1.17968|
                  |L1.17424|
                          DCD      NPN_OUT
                  |L1.17428|
                          DCD      npn_tz_cnt
                  |L1.17432|
                          DCD      npn_stat
                  |L1.17436|
                          DCD      load_U
                  |L1.17440|
                          DCD      UONPN
                  |L1.17444|
                          DCD      net_Ua
                  |L1.17448|
                          DCD      net_Ub
                  |L1.17452|
                          DCD      net_Uc
                  |L1.17456|
                          DCD      UMN
                  |L1.17460|
                          DCD      TZNPN
                  |L1.17464|
                          DCD      UVNPN
                  |L1.17468|
                          DCD      load_off_cnt
                  |L1.17472|
                          DCD      load_off_stat
                  |L1.17476|
                          DCD      dUNPN
                  |L1.17480|
                          DCD      tloaddisable_cmnd
                  |L1.17484|
                          DCD      sp_ch_stat
                  |L1.17488|
                          DCD      speedChrgBlckStat
                  |L1.17492|
004454  20202020          DCB      "                    ",0
004458  20202020
00445c  20202020
004460  20202020
004464  20202020
004468  00      
004469  00                DCB      0
00446a  00                DCB      0
00446b  00                DCB      0
                  |L1.17516|
00446c  20202020          DCB      "    ",231,224,225,235,238,234,232,240,238,226,224,237,"!"
004470  e7e0e1eb
004474  eeeae8f0
004478  eee2e0ed
00447c  21      
00447d  20202000          DCB      "   ",0
004481  00                DCB      0
004482  00                DCB      0
004483  00                DCB      0
                  |L1.17540|
004484  20202020          DCB      "       ",231,224,240,255,228,"        ",0
004488  202020e7
00448c  e0f0ffe4
004490  20202020
004494  20202020
004498  00      
004499  00                DCB      0
00449a  00                DCB      0
00449b  00                DCB      0
                  |L1.17564|
00449c  20202020          DCB      "     ",211,241,234,238,240,229,237,237,251,233,"     ",0
0044a0  20d3f1ea
0044a4  eef0e5ed
0044a8  edfbe920
0044ac  20202020
0044b0  00      
0044b1  00                DCB      0
0044b2  00                DCB      0
0044b3  00                DCB      0
                  |L1.17588|
                          DCD      sk_stat
                  |L1.17592|
                          DCD      sp_ch_stat_old
                  |L1.17596|
                          DCD      sp_ch_stat_cnt
                  |L1.17600|
                          DCD      sp_ch_wrk_cnt
                  |L1.17604|
                          DCD      hv_vz_up_cnt
                  |L1.17608|
                          DCD      speedChrgTimeInHour
                  |L1.17612|
0044cc  2020c1c5          DCB      "  ",193,197,199," ",194,197,205,210,200,203,223,214,200
0044d0  c720c2c5
0044d4  cdd2c8cb
0044d8  dfd6c8  
0044db  c8212120          DCB      200,"!!  ",0
0044df  2000    
0044e1  00                DCB      0
0044e2  00                DCB      0
0044e3  00                DCB      0
                  |L1.17636|
0044e4  20202020          DCB      "      ",194,202,203,222,215,197,205,"       ",0
0044e8  2020c2ca
0044ec  cbded7c5
0044f0  cd202020
0044f4  20202020
0044f8  00      
0044f9  00                DCB      0
0044fa  00                DCB      0
0044fb  00                DCB      0
                  |L1.17660|
0044fc  202020cd          DCB      "   ",205,197," ",204,206,198,197,210," ",193,219,210,220
004500  c520ccce
004504  c6c5d220
004508  c1dbd2dc
00450c  20202020          DCB      "    ",0
004510  00      
004511  00                DCB      0
004512  00                DCB      0
004513  00                DCB      0
                  |L1.17684|
004514  2020d3d1          DCB      "  ",211,209,202,206,208,197,205,205,219,201," ",199,192
004518  caced0c5
00451c  cdcddbc9
004520  20c7c0  
004523  d0dfc420          DCB      208,223,196,"  ",0
004527  2000    
004529  00                DCB      0
00452a  00                DCB      0
00452b  00                DCB      0
                  |L1.17708|
                          DCD      ||.text||+0x848
                  |L1.17712|
                          DCD      speedChrgAvtEn
                  |L1.17716|
                          DCD      u_necc
                  |L1.17720|
                          DCD      speedChrgDU
                  |L1.17724|
                          DCD      Ib_ips_termokompensat
                  |L1.17728|
                          DCD      IZMAX
                  |L1.17732|
                          DCD      speedChrgBlckSrc
                  |L1.17736|
                          DCD      speedChrgBlckLog
                  |L1.17740|
                          DCD      ||.bss||+0x400
                  |L1.17744|
                          DCD      hv_vz_stat
                  |L1.17748|
                          DCD      hv_vz_stat_old
                  |L1.17752|
                          DCD      hv_vz_stat_cnt
                  |L1.17756|
00455c  20202020          DCB      "       ",199,192,208,223,196,"        ",0
004560  202020c7
004564  c0d0dfc4
004568  20202020
00456c  20202020
004570  00      
004571  00                DCB      0
004572  00                DCB      0
004573  00                DCB      0
                  |L1.17780|
004574  202020c2          DCB      "   ",194,219,208,192,194,205,200,194,192,222,217,200,201
004578  dbd0c0c2
00457c  cdc8c2c0
004580  ded9c8c9
004584  20202020          DCB      "    ",0
004588  00      
004589  00                DCB      0
00458a  00                DCB      0
00458b  00                DCB      0
                  |L1.17804|
00458c  20202020          DCB      "      ",210,211,204,193,203,197,208,"       ",0
004590  2020d2d3
004594  ccc1cbc5
004598  d0202020
00459c  20202020
0045a0  00      
0045a1  00                DCB      0
0045a2  00                DCB      0
0045a3  00                DCB      0
                  |L1.17828|
0045a4  20202020          DCB      "     ",194,202,203,222,215,200,210,197,"       ",0
0045a8  20c2cacb
0045ac  ded7c8d2
0045b0  c5202020
0045b4  20202020
0045b8  00      
0045b9  00                DCB      0
0045ba  00                DCB      0
0045bb  00                DCB      0
                  |L1.17852|
                          DCD      hv_vz_wrk_cnt
                  |L1.17856|
0045c0  2805              CMP      r0,#5                 ;8186
0045c2  d00d              BEQ      |L1.17888|
0045c4  48f9              LDR      r0,|L1.18860|
0045c6  f44f6361          MOV      r3,#0xe10             ;8188
0045ca  f9b00000          LDRSH    r0,[r0,#0]            ;8188  ; VZ_HR
0045ce  fb00f303          MUL      r3,r0,r3              ;8188
0045d2  6013              STR      r3,[r2,#0]            ;8188  ; hv_vz_wrk_cnt
0045d4  b910              CBNZ     r0,|L1.17884|
0045d6  f44f60e1          MOV      r0,#0x708             ;8189
0045da  6010              STR      r0,[r2,#0]            ;8189  ; hv_vz_wrk_cnt
                  |L1.17884|
0045dc  f8c1b000          STR      r11,[r1,#0]  ; hv_vz_up_cnt
                  |L1.17888|
;;;8191   		}
;;;8192   	hv_vz_wrk_cnt--;
0045e0  6810              LDR      r0,[r2,#0]  ; hv_vz_wrk_cnt
0045e2  f1a00001          SUB      r0,r0,#1
0045e6  6010              STR      r0,[r2,#0]  ; hv_vz_wrk_cnt
;;;8193   	hv_vz_up_cnt++;
0045e8  680a              LDR      r2,[r1,#0]  ; hv_vz_up_cnt
0045ea  f1020201          ADD      r2,r2,#1
0045ee  600a              STR      r2,[r1,#0]  ; hv_vz_up_cnt
;;;8194   
;;;8195   	if(hv_vz_wrk_cnt==0)
0045f0  b940              CBNZ     r0,|L1.17924|
;;;8196   		{
;;;8197   		hv_vz_stat=hvsERR4;
0045f2  f04f0009          MOV      r0,#9
0045f6  f88a0000          STRB     r0,[r10,#0]
;;;8198   		lc640_write(EE_HV_VZ_STAT,hvsERR4);
0045fa  4601              MOV      r1,r0
0045fc  f44f70b4          MOV      r0,#0x168
004600  f7fffffe          BL       lc640_write
                  |L1.17924|
;;;8199   		}
;;;8200   	if(sk_stat[0]==0)
004604  7830              LDRB     r0,[r6,#0]  ; sk_stat
004606  b940              CBNZ     r0,|L1.17946|
;;;8201   		{
;;;8202   		hv_vz_stat=hvsERR2;
004608  f04f0007          MOV      r0,#7
00460c  f88a0000          STRB     r0,[r10,#0]
;;;8203   		lc640_write(EE_HV_VZ_STAT,hvsERR2);
004610  4601              MOV      r1,r0
004612  f44f70b4          MOV      r0,#0x168
004616  f7fffffe          BL       lc640_write
                  |L1.17946|
;;;8204   		}
;;;8205   	if(sk_stat[1]==0)
00461a  7870              LDRB     r0,[r6,#1]  ; sk_stat
00461c  b940              CBNZ     r0,|L1.17968|
;;;8206   		{
;;;8207   		hv_vz_stat=hvsERR3;
00461e  f04f0008          MOV      r0,#8
004622  f88a0000          STRB     r0,[r10,#0]
;;;8208   		lc640_write(EE_HV_VZ_STAT,hvsERR3);
004626  4601              MOV      r1,r0
004628  f44f70b4          MOV      r0,#0x168
00462c  f7fffffe          BL       lc640_write
                  |L1.17968|
;;;8209   		}
;;;8210   	}
;;;8211   
;;;8212   if(hv_vz_stat==hvsERR1)		//Îòñóòñòâóåò âåíòèëÿöèÿ ïðè âêëþ÷åíèè
004630  f89a0000          LDRB     r0,[r10,#0]  ; hv_vz_stat
004634  2806              CMP      r0,#6
004636  d119              BNE      |L1.18028|
;;;8213   	{
;;;8214   	if((hv_vz_stat_old!=hv_vz_stat)||(hv_vz_stat_cnt==0))
004638  7828              LDRB     r0,[r5,#0]  ; hv_vz_stat_old
00463a  2806              CMP      r0,#6
00463c  d101              BNE      |L1.17986|
00463e  8820              LDRH     r0,[r4,#0]  ; hv_vz_stat_cnt
004640  b900              CBNZ     r0,|L1.17988|
                  |L1.17986|
;;;8215   		{
;;;8216   		hv_vz_stat_cnt=10;
004642  8027              STRH     r7,[r4,#0]
                  |L1.17988|
;;;8217   		}
;;;8218   	hv_vz_stat_cnt--;
004644  8820              LDRH     r0,[r4,#0]  ; hv_vz_stat_cnt
004646  f1a00001          SUB      r0,r0,#1
00464a  b200              SXTH     r0,r0
00464c  8020              STRH     r0,[r4,#0]
;;;8219   	if((hv_vz_stat_cnt==10)||(hv_vz_stat_cnt==9))
00464e  280a              CMP      r0,#0xa
004650  d001              BEQ      |L1.18006|
004652  2809              CMP      r0,#9
004654  d10a              BNE      |L1.18028|
                  |L1.18006|
;;;8220   		{
;;;8221   		show_mess(	"ÂÛÐÀÂÍÈÂÀÞÙÈÉ ÇÀÐßÄ ",
004656  f2af138c          ADR      r3,|L1.17612|
00465a  f2af1278          ADR      r2,|L1.17636|
00465e  f2af1164          ADR      r1,|L1.17660|
004662  48d3              LDR      r0,|L1.18864|
004664  f8cd8000          STR      r8,[sp,#0]
004668  f7fffffe          BL       show_mess
                  |L1.18028|
;;;8222   					"   ÍÅ ÌÎÆÅÒ ÁÛÒÜ    ",
;;;8223   					"      ÂÊËÞ×ÅÍ       ",
;;;8224   					"  ÁÅÇ ÂÅÍÒÈËßÖÈÈ!!  ",
;;;8225   					5000);
;;;8226   		}
;;;8227   	}
;;;8228   if(hv_vz_stat==hvsERR2)		//Ïðîïàëà âåíòèëÿöèÿ ïðè ðàáîòå
00466c  f89a0000          LDRB     r0,[r10,#0]  ; hv_vz_stat
004670  2807              CMP      r0,#7
004672  d123              BNE      |L1.18108|
;;;8229   	{
;;;8230   	if((hv_vz_stat_old!=hv_vz_stat)||(hv_vz_stat_cnt==0))
004674  7828              LDRB     r0,[r5,#0]  ; hv_vz_stat_old
004676  2807              CMP      r0,#7
004678  d101              BNE      |L1.18046|
00467a  8820              LDRH     r0,[r4,#0]  ; hv_vz_stat_cnt
00467c  b900              CBNZ     r0,|L1.18048|
                  |L1.18046|
;;;8231   		{
;;;8232   		hv_vz_stat_cnt=10;
00467e  8027              STRH     r7,[r4,#0]
                  |L1.18048|
;;;8233   		}
;;;8234   	hv_vz_stat_cnt--;
004680  8820              LDRH     r0,[r4,#0]  ; hv_vz_stat_cnt
004682  f1a00001          SUB      r0,r0,#1
004686  b200              SXTH     r0,r0
004688  8020              STRH     r0,[r4,#0]
;;;8235   	if((hv_vz_stat_cnt==10)||(hv_vz_stat_cnt==9))
00468a  280a              CMP      r0,#0xa
00468c  d001              BEQ      |L1.18066|
00468e  2809              CMP      r0,#9
004690  d10a              BNE      |L1.18088|
                  |L1.18066|
;;;8236   		{
;;;8237   		show_mess(	"ÂÛÐÀÂÍÈÂÀÞÙÈÉ ÇÀÐßÄ ",
004692  4bc7              LDR      r3,|L1.18864|
004694  48c6              LDR      r0,|L1.18864|
004696  3b48              SUBS     r3,r3,#0x48
004698  f1030218          ADD      r2,r3,#0x18
00469c  f1020118          ADD      r1,r2,#0x18
0046a0  f8cd8000          STR      r8,[sp,#0]
0046a4  f7fffffe          BL       show_mess
                  |L1.18088|
;;;8238   					"    ÇÀÁËÎÊÈÐÎÂÀÍ    ",
;;;8239   					"     ÍÅÈÑÏÐÀÂÍÀ     ",
;;;8240   					"    ÂÅÍÒÈËßÖÈß!!!   ",
;;;8241   					5000);
;;;8242   		}
;;;8243   	if(sk_stat[0]==1)
0046a8  7830              LDRB     r0,[r6,#0]  ; sk_stat
0046aa  2801              CMP      r0,#1
0046ac  d106              BNE      |L1.18108|
;;;8244   		{
;;;8245   		hv_vz_stat=hvsWRK;
0046ae  f88a9000          STRB     r9,[r10,#0]
;;;8246   		lc640_write(EE_HV_VZ_STAT,hvsWRK);
0046b2  2105              MOVS     r1,#5
0046b4  f44f70b4          MOV      r0,#0x168
0046b8  f7fffffe          BL       lc640_write
                  |L1.18108|
;;;8247   		}
;;;8248   	}
;;;8249   
;;;8250   if(hv_vz_stat==hvsERR3)		//Îòêëþ÷åí òóìáëåð "Âûðàâíèâàþùèé çàðÿä"
0046bc  f89a0000          LDRB     r0,[r10,#0]  ; hv_vz_stat
0046c0  2808              CMP      r0,#8
0046c2  d120              BNE      |L1.18182|
;;;8251   	{
;;;8252   	if((hv_vz_stat_old!=hv_vz_stat)||(hv_vz_stat_cnt==0))
0046c4  7828              LDRB     r0,[r5,#0]  ; hv_vz_stat_old
0046c6  2808              CMP      r0,#8
0046c8  d101              BNE      |L1.18126|
0046ca  8820              LDRH     r0,[r4,#0]  ; hv_vz_stat_cnt
0046cc  b900              CBNZ     r0,|L1.18128|
                  |L1.18126|
;;;8253   		{
;;;8254   		hv_vz_stat_cnt=10;
0046ce  8027              STRH     r7,[r4,#0]
                  |L1.18128|
;;;8255   		}
;;;8256   	hv_vz_stat_cnt--;
0046d0  8820              LDRH     r0,[r4,#0]  ; hv_vz_stat_cnt
0046d2  f1a00001          SUB      r0,r0,#1
0046d6  b200              SXTH     r0,r0
0046d8  8020              STRH     r0,[r4,#0]
;;;8257   	if((hv_vz_stat_cnt==10)||(hv_vz_stat_cnt==9))
0046da  280a              CMP      r0,#0xa
0046dc  d001              BEQ      |L1.18146|
0046de  2809              CMP      r0,#9
0046e0  d107              BNE      |L1.18162|
                  |L1.18146|
;;;8258   		{
;;;8259   		show_mess(	"ÂÛÐÀÂÍÈÂÀÞÙÈÉ ÇÀÐßÄ ",
0046e2  a3b4              ADR      r3,|L1.18868|
0046e4  a2b9              ADR      r2,|L1.18892|
0046e6  a1bf              ADR      r1,|L1.18916|
0046e8  48b1              LDR      r0,|L1.18864|
0046ea  f8cd8000          STR      r8,[sp,#0]
0046ee  f7fffffe          BL       show_mess
                  |L1.18162|
;;;8260   					"  ÁÓÄÅÒ ÏÐÎÄÎËÆÅÍ   ",
;;;8261   					"  ÏÎÑËÅ ÂÊËÞ×ÅÍÈß   ",
;;;8262   					"    ÒÓÌÁËÅÐÀ!!!     ",
;;;8263   					5000);
;;;8264   		}
;;;8265   	if(sk_stat[1]==1)
0046f2  7870              LDRB     r0,[r6,#1]  ; sk_stat
0046f4  2801              CMP      r0,#1
0046f6  d106              BNE      |L1.18182|
;;;8266   		{
;;;8267   		hv_vz_stat=hvsWRK;
0046f8  f88a9000          STRB     r9,[r10,#0]
;;;8268   		lc640_write(EE_HV_VZ_STAT,hvsWRK);
0046fc  2105              MOVS     r1,#5
0046fe  f44f70b4          MOV      r0,#0x168
004702  f7fffffe          BL       lc640_write
                  |L1.18182|
;;;8269   		}
;;;8270   	}
;;;8271   if(hv_vz_stat==hvsERR4)		//ÂÇ çàêîí÷èëñÿ à òóìáëåð âêëþ÷åí
004706  f89a0000          LDRB     r0,[r10,#0]  ; hv_vz_stat
00470a  2809              CMP      r0,#9
00470c  d124              BNE      |L1.18264|
;;;8272   	{
;;;8273   	if((hv_vz_stat_old!=hv_vz_stat)||(hv_vz_stat_cnt==0))
00470e  7828              LDRB     r0,[r5,#0]  ; hv_vz_stat_old
004710  2809              CMP      r0,#9
004712  d101              BNE      |L1.18200|
004714  8820              LDRH     r0,[r4,#0]  ; hv_vz_stat_cnt
004716  b900              CBNZ     r0,|L1.18202|
                  |L1.18200|
;;;8274   		{
;;;8275   		hv_vz_stat_cnt=10;
004718  8027              STRH     r7,[r4,#0]
                  |L1.18202|
;;;8276   		}
;;;8277   	hv_vz_stat_cnt--;
00471a  8820              LDRH     r0,[r4,#0]  ; hv_vz_stat_cnt
00471c  f1a00001          SUB      r0,r0,#1
004720  b200              SXTH     r0,r0
004722  8020              STRH     r0,[r4,#0]
;;;8278   	if((hv_vz_stat_cnt==10)||(hv_vz_stat_cnt==9))
004724  280a              CMP      r0,#0xa
004726  d001              BEQ      |L1.18220|
004728  2809              CMP      r0,#9
00472a  d10a              BNE      |L1.18242|
                  |L1.18220|
;;;8279   		{
;;;8280   		show_mess(	"     ÂÛÊËÞ×ÈÒÅ      ",
00472c  f2af13d4          ADR      r3,|L1.17756|
004730  f2af12c0          ADR      r2,|L1.17780|
004734  f2af11ac          ADR      r1,|L1.17804|
004738  a0b0              ADR      r0,|L1.18940|
00473a  f8cd8000          STR      r8,[sp,#0]
00473e  f7fffffe          BL       show_mess
                  |L1.18242|
;;;8281   					"      ÒÓÌÁËÅÐ       ",
;;;8282   					"   ÂÛÐÀÂÍÈÂÀÞÙÈÉ    ",
;;;8283   					"       ÇÀÐßÄ        ",
;;;8284   					5000);
;;;8285   		}
;;;8286   	if(sk_stat[1]==0)
004742  7870              LDRB     r0,[r6,#1]  ; sk_stat
004744  b940              CBNZ     r0,|L1.18264|
;;;8287   		{
;;;8288   		hv_vz_stat=hvsOFF;
004746  f88ab000          STRB     r11,[r10,#0]
;;;8289   		lc640_write(EE_HV_VZ_STAT,hvsOFF);
00474a  2100              MOVS     r1,#0
00474c  f44f70b4          MOV      r0,#0x168
004750  f7fffffe          BL       lc640_write
;;;8290   		vz_stop();
004754  f7fffffe          BL       vz_stop
                  |L1.18264|
;;;8291   
;;;8292   		}
;;;8293   	}
;;;8294   hv_vz_stat_old=hv_vz_stat;
004758  f89a0000          LDRB     r0,[r10,#0]  ; hv_vz_stat
00475c  7028              STRB     r0,[r5,#0]
;;;8295   /*
;;;8296   if(speedChIsOn)
;;;8297   	{
;;;8298   	speedChTimeCnt++;
;;;8299   	if(speedChTimeCnt>=((signed long)speedChrgTimeInHour*3600L))
;;;8300   		{
;;;8301   		speedChIsOn=0;
;;;8302   		}
;;;8303   	if(speedChrgBlckStat)
;;;8304   		{
;;;8305   		speedChIsOn=0;
;;;8306   		speedChTimeCnt=0;
;;;8307   		}
;;;8308   	}
;;;8309   
;;;8310   
;;;8311   
;;;8312   if(speedChrgAvtEn)
;;;8313   	{
;;;8314   	if(!speedChIsOn)
;;;8315   		{
;;;8316   		if((load_U<u_necc)&&((u_necc-load_U)>speedChrgDU)&&(abs(Ib_ips_termokompensat/10-IZMAX)<5)&&(!speedChrgBlckStat))
;;;8317   			{
;;;8318   			speedChIsOn=1;
;;;8319   			}
;;;8320   		}
;;;8321   	}
;;;8322   
;;;8323   
;;;8324   
;;;8325   if((speedChrgBlckSrc!=1)&&(speedChrgBlckSrc!=2)) speedChrgBlckStat=0;
;;;8326   else
;;;8327   	{
;;;8328   	speedChrgBlckStat=0;
;;;8329   	if(speedChrgBlckSrc==1)
;;;8330   		{
;;;8331   		if(((speedChrgBlckLog==0)&&(adc_buff_[11]>2000)) || ((speedChrgBlckLog==1)&&(adc_buff_[11]<2000))) speedChrgBlckStat=1;
;;;8332   		}
;;;8333   	else if(speedChrgBlckSrc==2)
;;;8334   		{
;;;8335   		if(((speedChrgBlckLog==0)&&(adc_buff_[13]>2000)) || ((speedChrgBlckLog==1)&&(adc_buff_[13]<2000))) speedChrgBlckStat=1;
;;;8336   		}
;;;8337   	}
;;;8338   
;;;8339   
;;;8340   if(speedChrgBlckStat==1)
;;;8341   	{
;;;8342   
;;;8343   	//speedChargeStartStop();
;;;8344   
;;;8345   	speedChrgShowCnt++;
;;;8346   	if(speedChrgShowCnt>=30)	
;;;8347   		{
;;;8348   		speedChrgShowCnt=0;
;;;8349   		show_mess(	"     ÓÑÊÎÐÅÍÍÛÉ     ",
;;;8350   					"       ÇÀÐßÄ        ",
;;;8351   					"     ÇÀÏÐÅÙÅÍ!!!    ",
;;;8352   					"                    ",
;;;8353   					5000);
;;;8354   		}
;;;8355   	}
;;;8356   else speedChrgShowCnt=0;
;;;8357   
;;;8358   */
;;;8359   }
00475e  e5bf              B        |L1.17120|
;;;8360   
                          ENDP

                  averageChargeStartStop PROC
;;;8361   //-----------------------------------------------
;;;8362   void averageChargeStartStop(void)
004760  49ac              LDR      r1,|L1.18964|
;;;8363   {
;;;8364   if(hv_vz_stat!=hvsOFF)
;;;8365   	{
;;;8366   	hv_vz_stat=hvsOFF;
;;;8367   	lc640_write(EE_HV_VZ_STAT,hvsOFF);
004762  f44f70b4          MOV      r0,#0x168
004766  780a              LDRB     r2,[r1,#0]            ;8364  ; hv_vz_stat
004768  b132              CBZ      r2,|L1.18296|
00476a  f04f0200          MOV      r2,#0                 ;8366
00476e  700a              STRB     r2,[r1,#0]            ;8366
004770  f04f0100          MOV      r1,#0
004774  f7ffbffe          B.W      lc640_write
                  |L1.18296|
;;;8368   	}
;;;8369   
;;;8370   else
;;;8371   	{
;;;8372   	hv_vz_stat=hvsSTEP1;
004778  f04f0201          MOV      r2,#1
00477c  700a              STRB     r2,[r1,#0]
;;;8373   	lc640_write(EE_HV_VZ_STAT,hvsSTEP1);
00477e  4611              MOV      r1,r2
004780  f7ffbffe          B.W      lc640_write
;;;8374   	}
;;;8375   }
;;;8376   
                          ENDP

                  numOfForvardBps_hndl PROC
;;;8377   //-----------------------------------------------
;;;8378   void	numOfForvardBps_hndl(void)			//Ïðîãðàììà ñìåíû ïåðâîãî èñòî÷íèêà äëÿ ðàâíîìåðíîãî èçíîñà ÁÏÑîâ
004784  e92d41f0          PUSH     {r4-r8,lr}
;;;8379   {
;;;8380   
;;;8381   numOfForvardBps_old=numOfForvardBps;
004788  4ca3              LDR      r4,|L1.18968|
00478a  7e60              LDRB     r0,[r4,#0x19]  ; numOfForvardBps
00478c  76a0              STRB     r0,[r4,#0x1a]
;;;8382   
;;;8383   numOfForvardBps=0;
00478e  f04f0500          MOV      r5,#0
004792  7665              STRB     r5,[r4,#0x19]
;;;8384   
;;;8385   //FORVARDBPSCHHOUR=10;
;;;8386   
;;;8387   if((FORVARDBPSCHHOUR<=0)||(FORVARDBPSCHHOUR>500))
004794  4ea1              LDR      r6,|L1.18972|
004796  f9b60000          LDRSH    r0,[r6,#0]  ; FORVARDBPSCHHOUR
00479a  2800              CMP      r0,#0
00479c  dd02              BLE      |L1.18340|
00479e  f5b07ffa          CMP      r0,#0x1f4
0047a2  dd02              BLE      |L1.18346|
                  |L1.18340|
;;;8388   	{
;;;8389   	FORVARDBPSCHHOUR=0;
0047a4  8035              STRH     r5,[r6,#0]
                  |L1.18342|
;;;8390   	return;
;;;8391   	}
;;;8392   
;;;8393   numOfForvardBps_minCnt++;
;;;8394   
;;;8395   
;;;8396   if(numOfForvardBps_minCnt>=60)
;;;8397   	{
;;;8398   	numOfForvardBps_minCnt=0;
;;;8399   	numOfForvardBps_hourCnt=lc640_read_int(EE_FORVBPSHOURCNT);
;;;8400   	numOfForvardBps_hourCnt++;
;;;8401   	if(numOfForvardBps_hourCnt>=(FORVARDBPSCHHOUR*NUMIST))
;;;8402   		{
;;;8403   		numOfForvardBps_hourCnt=0;
;;;8404   		}
;;;8405   	lc640_write_int(EE_FORVBPSHOURCNT,numOfForvardBps_hourCnt);
;;;8406   	}
;;;8407   
;;;8408   numOfForvardBps=numOfForvardBps_hourCnt/FORVARDBPSCHHOUR;
;;;8409   
;;;8410   //if(numOfForvardBps)
;;;8411   //numOfForvardBps_old=numOfForvardBps; 
;;;8412   }
0047a6  e8bd81f0          POP      {r4-r8,pc}
                  |L1.18346|
0047aa  7ee0              LDRB     r0,[r4,#0x1b]         ;8393  ; numOfForvardBps_minCnt
0047ac  f1000001          ADD      r0,r0,#1              ;8393
0047b0  b2c0              UXTB     r0,r0                 ;8393
0047b2  76e0              STRB     r0,[r4,#0x1b]         ;8393
0047b4  283c              CMP      r0,#0x3c              ;8396
0047b6  d31a              BCC      |L1.18414|
0047b8  76e5              STRB     r5,[r4,#0x1b]         ;8398
0047ba  f44f7794          MOV      r7,#0x128             ;8399
0047be  4638              MOV      r0,r7                 ;8399
0047c0  f7fffffe          BL       lc640_read_int
0047c4  f1000001          ADD      r0,r0,#1              ;8400
0047c8  b200              SXTH     r0,r0                 ;8400
0047ca  f8a40066          STRH     r0,[r4,#0x66]         ;8400
0047ce  4a94              LDR      r2,|L1.18976|
0047d0  f9b61000          LDRSH    r1,[r6,#0]            ;8401  ; FORVARDBPSCHHOUR
0047d4  f9b22000          LDRSH    r2,[r2,#0]            ;8401  ; NUMIST
0047d8  fb01f102          MUL      r1,r1,r2              ;8401
0047dc  4281              CMP      r1,r0                 ;8401
0047de  dc01              BGT      |L1.18404|
0047e0  f8a45066          STRH     r5,[r4,#0x66]         ;8403
                  |L1.18404|
0047e4  f9b41066          LDRSH    r1,[r4,#0x66]         ;8405  ; numOfForvardBps_hourCnt
0047e8  4638              MOV      r0,r7                 ;8405
0047ea  f7fffffe          BL       lc640_write_int
                  |L1.18414|
0047ee  f9b40066          LDRSH    r0,[r4,#0x66]         ;8408  ; numOfForvardBps_hourCnt
0047f2  f9b61000          LDRSH    r1,[r6,#0]            ;8408  ; FORVARDBPSCHHOUR
0047f6  fb90f0f1          SDIV     r0,r0,r1              ;8408
0047fa  7660              STRB     r0,[r4,#0x19]         ;8408
0047fc  e7d3              B        |L1.18342|
;;;8413   
                          ENDP

                  numOfForvardBps_init PROC
;;;8414   //-----------------------------------------------
;;;8415   void	numOfForvardBps_init(void)			//Ïðîãðàììà ñáðîñà ñèñòåìû ñìåíû ïåðâîãî èñòî÷íèêà äëÿ ðàâíîìåðíîãî èçíîñà ÁÏÑîâ
0047fe  b510              PUSH     {r4,lr}
;;;8416   {									//Äîëæíà âûçûâàòüñÿ ïðè èçìåíåíèè êîë-âà èñòî÷íèêîâ â ñòðóêòóðå
;;;8417   lc640_write_int(EE_FORVBPSHOURCNT,0);
004800  2100              MOVS     r1,#0
004802  f44f7094          MOV      r0,#0x128
004806  f7fffffe          BL       lc640_write_int
;;;8418   numOfForvardBps_minCnt=58;
00480a  4983              LDR      r1,|L1.18968|
00480c  f04f003a          MOV      r0,#0x3a
004810  76c8              STRB     r0,[r1,#0x1b]
;;;8419   }
004812  bd10              POP      {r4,pc}
;;;8420   
                          ENDP

                  outVoltContrHndl PROC
;;;8421   //-----------------------------------------------
;;;8422   void outVoltContrHndl(void)
004814  b570              PUSH     {r4-r6,lr}
;;;8423   { 
;;;8424   if((load_U>U_OUT_KONTR_MAX)||(load_U<U_OUT_KONTR_MIN))
004816  4c83              LDR      r4,|L1.18980|
004818  4883              LDR      r0,|L1.18984|
;;;8425   	{
;;;8426   	outVoltContrHndlCnt_=0;
;;;8427   	if(outVoltContrHndlCnt<U_OUT_KONTR_DELAY)
00481a  4a84              LDR      r2,|L1.18988|
00481c  f9b41000          LDRSH    r1,[r4,#0]            ;8424  ; load_U
004820  f9b06000          LDRSH    r6,[r0,#0]            ;8424  ; U_OUT_KONTR_MAX
004824  2500              MOVS     r5,#0                 ;8426
004826  f9b20000          LDRSH    r0,[r2,#0]
00482a  4b81              LDR      r3,|L1.18992|
00482c  42b1              CMP      r1,r6                 ;8424
00482e  dc04              BGT      |L1.18490|
004830  4e80              LDR      r6,|L1.18996|
004832  f9b66000          LDRSH    r6,[r6,#0]            ;8424  ; U_OUT_KONTR_MIN
004836  42b1              CMP      r1,r6                 ;8424
004838  da0f              BGE      |L1.18522|
                  |L1.18490|
00483a  801d              STRH     r5,[r3,#0]            ;8426
00483c  497e              LDR      r1,|L1.19000|
00483e  f9b11000          LDRSH    r1,[r1,#0]  ; U_OUT_KONTR_DELAY
004842  4288              CMP      r0,r1
004844  da1b              BGE      |L1.18558|
;;;8428   		{
;;;8429   		outVoltContrHndlCnt++;
004846  f1000001          ADD      r0,r0,#1
00484a  b200              SXTH     r0,r0
00484c  8010              STRH     r0,[r2,#0]
;;;8430   		if(outVoltContrHndlCnt==U_OUT_KONTR_DELAY)
00484e  4288              CMP      r0,r1
004850  d115              BNE      |L1.18558|
;;;8431   			{
;;;8432   			avar_uout_hndl(1);
004852  2001              MOVS     r0,#1
004854  f7fffffe          BL       avar_uout_hndl
004858  e011              B        |L1.18558|
                  |L1.18522|
;;;8433   			}
;;;8434   		}
;;;8435   	}
;;;8436   else
;;;8437   	{
;;;8438   	if(outVoltContrHndlCnt)
00485a  b180              CBZ      r0,|L1.18558|
;;;8439   		{
;;;8440   		if(outVoltContrHndlCnt_<5)
00485c  f9b30000          LDRSH    r0,[r3,#0]  ; outVoltContrHndlCnt_
004860  2805              CMP      r0,#5
004862  da0c              BGE      |L1.18558|
;;;8441   			{
;;;8442   			outVoltContrHndlCnt_++;
004864  f1000001          ADD      r0,r0,#1
004868  b200              SXTH     r0,r0
00486a  8018              STRH     r0,[r3,#0]
;;;8443   			if(outVoltContrHndlCnt_>=5)
00486c  2805              CMP      r0,#5
00486e  db06              BLT      |L1.18558|
;;;8444   				{
;;;8445   				outVoltContrHndlCnt=0;
004870  8015              STRH     r5,[r2,#0]
;;;8446   				if(uout_av)avar_uout_hndl(0);
004872  4872              LDR      r0,|L1.19004|
004874  7800              LDRB     r0,[r0,#0]  ; uout_av
004876  b110              CBZ      r0,|L1.18558|
004878  2000              MOVS     r0,#0
00487a  f7fffffe          BL       avar_uout_hndl
                  |L1.18558|
;;;8447   				}
;;;8448   			}
;;;8449   		}
;;;8450   	}
;;;8451   
;;;8452   if (load_U<(USIGN*10)) 
00487e  4870              LDR      r0,|L1.19008|
004880  f9b41000          LDRSH    r1,[r4,#0]  ; load_U
004884  f9b00000          LDRSH    r0,[r0,#0]  ; USIGN
004888  eb000080          ADD      r0,r0,r0,LSL #2
00488c  ebb10f40          CMP      r1,r0,LSL #1
004890  da0b              BGE      |L1.18602|
;;;8453   	{
;;;8454   	if(!bSILENT)
004892  486c              LDR      r0,|L1.19012|
004894  6800              LDR      r0,[r0,#0]  ; bSILENT
004896  2800              CMP      r0,#0
004898  d107              BNE      |L1.18602|
;;;8455   		{
;;;8456   		mess_send(MESS2RELE_HNDL,PARAM_RELE_BAT_IS_DISCHARGED,1,20);
00489a  e8bd4070          POP      {r4-r6,lr}
00489e  2314              MOVS     r3,#0x14
0048a0  2201              MOVS     r2,#1
0048a2  2172              MOVS     r1,#0x72
0048a4  20d2              MOVS     r0,#0xd2
0048a6  f7ffbffe          B.W      mess_send
                  |L1.18602|
;;;8457   		}
;;;8458   
;;;8459   	//bU_BAT2REL_AV_BAT=1;
;;;8460   	}
;;;8461   
;;;8462   
;;;8463   }
0048aa  bd70              POP      {r4-r6,pc}
;;;8464   
                          ENDP

                  vent_resurs_hndl PROC
;;;8465   //-----------------------------------------------
;;;8466   void vent_resurs_hndl(void)
0048ac  e92d47f0          PUSH     {r4-r10,lr}
;;;8467   {
;;;8468   char i;
;;;8469   char crc_in,crc_eval;
;;;8470   
;;;8471   for(i=0;i<NUMIST;i++)
0048b0  f04f0200          MOV      r2,#0
;;;8472   	{
;;;8473   	if((bps[i]._buff[7]&0xc0)==0x00)
;;;8474   		{
;;;8475   		bps[i]._vent_resurs_temp[0]=bps[i]._buff[7];
;;;8476   		}
;;;8477   	else if((bps[i]._buff[7]&0xc0)==0x40)
;;;8478   		{
;;;8479   		bps[i]._vent_resurs_temp[1]=bps[i]._buff[7];
;;;8480   		}
;;;8481   	else if((bps[i]._buff[7]&0xc0)==0x80)
;;;8482   		{
;;;8483   		bps[i]._vent_resurs_temp[2]=bps[i]._buff[7];
;;;8484   		}
;;;8485   	else if((bps[i]._buff[7]&0xc0)==0xc0)
;;;8486   		{
;;;8487   		bps[i]._vent_resurs_temp[3]=bps[i]._buff[7];
;;;8488   		}
;;;8489   	crc_in=0;
;;;8490   	crc_in|=(bps[i]._vent_resurs_temp[0]&0x30)>>4;
;;;8491   	crc_in|=(bps[i]._vent_resurs_temp[1]&0x30)>>2;
;;;8492   	crc_in|=(bps[i]._vent_resurs_temp[2]&0x30);
;;;8493   	crc_in|=(bps[i]._vent_resurs_temp[3]&0x30)<<2;
;;;8494   
;;;8495   	crc_eval =bps[i]._vent_resurs_temp[0]&0x0f;
;;;8496   	crc_eval^=bps[i]._vent_resurs_temp[1]&0x0f;
;;;8497   	crc_eval^=bps[i]._vent_resurs_temp[2]&0x0f;
;;;8498   	crc_eval^=bps[i]._vent_resurs_temp[3]&0x0f;
;;;8499   
;;;8500   	if(crc_eval==crc_in)
;;;8501   		{
;;;8502   		unsigned short temp_US;
;;;8503   		temp_US=0;
;;;8504   
;;;8505   		temp_US|=(bps[i]._vent_resurs_temp[3]&0x0f);
;;;8506   		temp_US<<=4;
;;;8507   		temp_US|=(bps[i]._vent_resurs_temp[2]&0x0f);
;;;8508   		temp_US<<=4;
;;;8509   		temp_US|=(bps[i]._vent_resurs_temp[1]&0x0f);
;;;8510   		temp_US<<=4;
;;;8511   		temp_US|=(bps[i]._vent_resurs_temp[0]&0x0f);
;;;8512   
;;;8513   		if(bps[i]._vent_resurs!=temp_US)bps[i]._vent_resurs=temp_US;
;;;8514   		}
;;;8515   
;;;8516   	if((bps[i]._vent_resurs>TVENTMAX*10)&&(TVENTMAX>0))
0048b4  4864              LDR      r0,|L1.19016|
0048b6  f8dfc194          LDR      r12,|L1.19020|
0048ba  f9b06000          LDRSH    r6,[r0,#0]
0048be  4858              LDR      r0,|L1.18976|
0048c0  f9b07000          LDRSH    r7,[r0,#0]            ;8471
0048c4  e06e              B        |L1.18852|
                  |L1.18630|
0048c6  ebc200c2          RSB      r0,r2,r2,LSL #3       ;8473
0048ca  eb001002          ADD      r0,r0,r2,LSL #4       ;8473
0048ce  eb0c0080          ADD      r0,r12,r0,LSL #2      ;8473
0048d2  7b41              LDRB     r1,[r0,#0xd]          ;8473
0048d4  098b              LSRS     r3,r1,#6              ;8473
0048d6  d006              BEQ      |L1.18662|
0048d8  2301              MOVS     r3,#1                 ;8477
0048da  ebb31f91          CMP      r3,r1,LSR #6          ;8477
0048de  d105              BNE      |L1.18668|
0048e0  f8801055          STRB     r1,[r0,#0x55]         ;8479
0048e4  e00f              B        |L1.18694|
                  |L1.18662|
0048e6  f8801054          STRB     r1,[r0,#0x54]         ;8475
0048ea  e00c              B        |L1.18694|
                  |L1.18668|
0048ec  2302              MOVS     r3,#2                 ;8481
0048ee  ebb31f91          CMP      r3,r1,LSR #6          ;8481
0048f2  d102              BNE      |L1.18682|
0048f4  f8801056          STRB     r1,[r0,#0x56]         ;8483
0048f8  e005              B        |L1.18694|
                  |L1.18682|
0048fa  2303              MOVS     r3,#3                 ;8485
0048fc  ebb31f91          CMP      r3,r1,LSR #6          ;8485
004900  d101              BNE      |L1.18694|
004902  f8801057          STRB     r1,[r0,#0x57]         ;8487
                  |L1.18694|
004906  f8101f54          LDRB     r1,[r0,#0x54]!        ;8490
00490a  f3c11401          UBFX     r4,r1,#4,#2           ;8490
00490e  7843              LDRB     r3,[r0,#1]            ;8491
004910  f0030530          AND      r5,r3,#0x30           ;8491
004914  ea440495          ORR      r4,r4,r5,LSR #2       ;8491
004918  f8909002          LDRB     r9,[r0,#2]            ;8492
00491c  f0090830          AND      r8,r9,#0x30           ;8492
004920  ea480804          ORR      r8,r8,r4              ;8492
004924  78c5              LDRB     r5,[r0,#3]            ;8493
004926  f1a00054          SUB      r0,r0,#0x54           ;8493
00492a  f0050430          AND      r4,r5,#0x30           ;8493
00492e  ea480884          ORR      r8,r8,r4,LSL #2       ;8493
004932  f001010f          AND      r1,r1,#0xf            ;8495
004936  f003040f          AND      r4,r3,#0xf            ;8496
00493a  ea840a01          EOR      r10,r4,r1             ;8496
00493e  f009030f          AND      r3,r9,#0xf            ;8497
004942  ea83090a          EOR      r9,r3,r10             ;8497
004946  f005050f          AND      r5,r5,#0xf            ;8498
00494a  ea850909          EOR      r9,r5,r9              ;8498
00494e  45c1              CMP      r9,r8                 ;8500
004950  d113              BNE      |L1.18810|
004952  ea4f1505          LSL      r5,r5,#4              ;8506
004956  ea430305          ORR      r3,r3,r5              ;8507
00495a  ea4f1303          LSL      r3,r3,#4              ;8508
00495e  ea440403          ORR      r4,r4,r3              ;8509
004962  ea4f5304          LSL      r3,r4,#20             ;8510
004966  ea4f4313          LSR      r3,r3,#16             ;8510
00496a  ea410103          ORR      r1,r1,r3              ;8511
00496e  f8b03058          LDRH     r3,[r0,#0x58]         ;8513
004972  428b              CMP      r3,r1                 ;8513
004974  d001              BEQ      |L1.18810|
004976  f8a01058          STRH     r1,[r0,#0x58]         ;8513
                  |L1.18810|
00497a  f8b01058          LDRH     r1,[r0,#0x58]
00497e  eb060386          ADD      r3,r6,r6,LSL #2
004982  ebb10f43          CMP      r1,r3,LSL #1
004986  dd06              BLE      |L1.18838|
004988  2e00              CMP      r6,#0
00498a  dd04              BLE      |L1.18838|
;;;8517   		{
;;;8518   		bps[i]._av|=(1<<4);
00498c  7841              LDRB     r1,[r0,#1]
00498e  f0410110          ORR      r1,r1,#0x10
004992  7041              STRB     r1,[r0,#1]
004994  e003              B        |L1.18846|
                  |L1.18838|
;;;8519   		}
;;;8520   	else bps[i]._av&=~(1<<4);
004996  7841              LDRB     r1,[r0,#1]
004998  f0210110          BIC      r1,r1,#0x10
00499c  7041              STRB     r1,[r0,#1]
                  |L1.18846|
00499e  f1020201          ADD      r2,r2,#1              ;8471
0049a2  b2d2              UXTB     r2,r2                 ;8471
                  |L1.18852|
0049a4  42ba              CMP      r2,r7                 ;8471
0049a6  db8e              BLT      |L1.18630|
;;;8521   	}
;;;8522   }
0049a8  e8bd87f0          POP      {r4-r10,pc}
                  |L1.18860|
                          DCD      VZ_HR
                  |L1.18864|
                          DCD      ||.text||+0x890
                  |L1.18868|
0049b4  20202020          DCB      "    ",210,211,204,193,203,197,208,192,"!!!     ",0
0049b8  d2d3ccc1
0049bc  cbc5d0c0
0049c0  21212120
0049c4  20202020
0049c8  00      
0049c9  00                DCB      0
0049ca  00                DCB      0
0049cb  00                DCB      0
                  |L1.18892|
0049cc  2020cfce          DCB      "  ",207,206,209,203,197," ",194,202,203,222,215,197,205
0049d0  d1cbc520
0049d4  c2cacbde
0049d8  d7c5cd  
0049db  c8df2020          DCB      200,223,"   ",0
0049df  2000    
0049e1  00                DCB      0
0049e2  00                DCB      0
0049e3  00                DCB      0
                  |L1.18916|
0049e4  2020c1d3          DCB      "  ",193,211,196,197,210," ",207,208,206,196,206,203,198
0049e8  c4c5d220
0049ec  cfd0cec4
0049f0  cecbc6  
0049f3  c5cd2020          DCB      197,205,"   ",0
0049f7  2000    
0049f9  00                DCB      0
0049fa  00                DCB      0
0049fb  00                DCB      0
                  |L1.18940|
0049fc  20202020          DCB      "     ",194,219,202,203,222,215,200,210,197,"      ",0
004a00  20c2dbca
004a04  cbded7c8
004a08  d2c52020
004a0c  20202020
004a10  00      
004a11  00                DCB      0
004a12  00                DCB      0
004a13  00                DCB      0
                  |L1.18964|
                          DCD      hv_vz_stat
                  |L1.18968|
                          DCD      ||area_number.23||
                  |L1.18972|
                          DCD      FORVARDBPSCHHOUR
                  |L1.18976|
                          DCD      NUMIST
                  |L1.18980|
                          DCD      load_U
                  |L1.18984|
                          DCD      U_OUT_KONTR_MAX
                  |L1.18988|
                          DCD      outVoltContrHndlCnt
                  |L1.18992|
                          DCD      outVoltContrHndlCnt_
                  |L1.18996|
                          DCD      U_OUT_KONTR_MIN
                  |L1.19000|
                          DCD      U_OUT_KONTR_DELAY
                  |L1.19004|
                          DCD      uout_av
                  |L1.19008|
                          DCD      USIGN
                  |L1.19012|
                          DCD      bSILENT
                  |L1.19016|
                          DCD      TVENTMAX
                  |L1.19020|
                          DCD      bps
                          ENDP

                  vent_hndl PROC
;;;8524   //-----------------------------------------------
;;;8525   void vent_hndl(void)
004a50  e92d4ff0          PUSH     {r4-r11,lr}
;;;8526   {
004a54  b087              SUB      sp,sp,#0x1c
;;;8527   if(RELEVENTSIGN==rvsAKB)
004a56  48ab              LDR      r0,|L1.19716|
;;;8528   	{
;;;8529   	if(vent_stat==0)
004a58  4cab              LDR      r4,|L1.19720|
;;;8530   		{
;;;8531   		if	(
;;;8532   			(BAT_IS_ON[0]==bisON)&&((bat[0]._Tb>TVENTON)||(bat[0]._nd))
004a5a  49ac              LDR      r1,|L1.19724|
;;;8533   			||
;;;8534   			(BAT_IS_ON[1]==bisON)&&((bat[1]._Tb>TVENTON)||(bat[1]._nd))
;;;8535   			)
;;;8536   			{
;;;8537   			vent_stat=1;
;;;8538   			}
;;;8539   		}
;;;8540   	else if(vent_stat==1)
;;;8541   		{
;;;8542   		if	(
;;;8543   			((BAT_IS_ON[0]!=bisON)||((BAT_IS_ON[0]==bisON)&&(bat[0]._Tb<TVENTOFF)&&(!bat[0]._nd)))
004a5c  4aac              LDR      r2,|L1.19728|
004a5e  7800              LDRB     r0,[r0,#0]            ;8527  ; RELEVENTSIGN
004a60  f9943000          LDRSB    r3,[r4,#0]            ;8529
004a64  f9b11000          LDRSH    r1,[r1,#0]            ;8532
004a68  f9b22000          LDRSH    r2,[r2,#0]
004a6c  b148              CBZ      r0,|L1.19074|
;;;8544   			&&
;;;8545   			((BAT_IS_ON[1]!=bisON)||((BAT_IS_ON[1]==bisON)&&(bat[1]._Tb<TVENTOFF)&&(!bat[1]._nd)))
;;;8546   			)
;;;8547   			{
;;;8548   			vent_stat=0;
;;;8549   			}
;;;8550   		}
;;;8551   	}
;;;8552   else if(RELEVENTSIGN==rvsBPS)
004a6e  2802              CMP      r0,#2
004a70  d03c              BEQ      |L1.19180|
;;;8553   	{
;;;8554   /*	if	(
;;;8555   		(((bps[0]._flags_tm&0x06)||(bps[0]._cnt>=30)))||
;;;8556   		(((bps[1]._flags_tm&0x06)||(bps[1]._cnt>=30))&&(NUMIST>1))||
;;;8557   		(((bps[2]._flags_tm&0x06)||(bps[2]._cnt>=30))&&(NUMIST>2))||
;;;8558   		(((bps[3]._flags_tm&0x06)||(bps[3]._cnt>=30))&&(NUMIST>3))||
;;;8559   		(((bps[4]._flags_tm&0x06)||(bps[4]._cnt>=30))&&(NUMIST>4))||
;;;8560   		(((bps[5]._flags_tm&0x06)||(bps[5]._cnt>=30))&&(NUMIST>5))||
;;;8561   		(((bps[6]._flags_tm&0x06)||(bps[6]._cnt>=30))&&(NUMIST>6))
;;;8562   		)
;;;8563   		{
;;;8564   		vent_stat=1;
;;;8565   		}
;;;8566   	else vent_stat=0;
;;;8567   	*/
;;;8568   
;;;8569   	if	(
;;;8570   		((NUMIST)&&((bps[0]._Ti>TVENTON)||(bps[0]._cnt>=30)))
;;;8571   		||
;;;8572   		((NUMIST>1)&&((bps[1]._Ti>TVENTON)||(bps[1]._cnt>=30)))
;;;8573   		||
;;;8574   		((NUMIST>2)&&((bps[2]._Ti>TVENTON)||(bps[2]._cnt>=30)))
;;;8575   		||
;;;8576   		((NUMIST>3)&&((bps[3]._Ti>TVENTON)||(bps[3]._cnt>=30)))
;;;8577   		||
;;;8578   		((NUMIST>4)&&((bps[4]._Ti>TVENTON)||(bps[4]._cnt>=30)))
;;;8579   		||
;;;8580   		((NUMIST>5)&&((bps[5]._Ti>TVENTON)||(bps[5]._cnt>=30)))
;;;8581   		||
;;;8582   		((NUMIST>6)&&((bps[6]._Ti>TVENTON)||(bps[6]._cnt>=30)))
;;;8583   		||
;;;8584   		((NUMIST>7)&&((bps[7]._Ti>TVENTON)||(bps[7]._cnt>=30)))
;;;8585   		)
;;;8586   		{
;;;8587   		vent_stat=1;
;;;8588   		}
;;;8589   	else if(vent_stat==1)
;;;8590   		{
;;;8591   		if	(
;;;8592   			((!NUMIST)||((NUMIST)&&(bps[0]._Ti<TVENTOFF)&&(bps[0]._cnt<10)))
;;;8593   			&&
;;;8594   			((NUMIST<2)||((NUMIST>=2)&&(bps[1]._Ti<TVENTOFF)&&(bps[1]._cnt<10)))
;;;8595   			&&
;;;8596   			((NUMIST<3)||((NUMIST>=3)&&(bps[2]._Ti<TVENTOFF)&&(bps[2]._cnt<10)))
;;;8597   			&&
;;;8598   			((NUMIST<4)||((NUMIST>=4)&&(bps[3]._Ti<TVENTOFF)&&(bps[3]._cnt<10)))
;;;8599   			&&
;;;8600   			((NUMIST<5)||((NUMIST>=5)&&(bps[4]._Ti<TVENTOFF)&&(bps[4]._cnt<10)))
;;;8601   			&&
;;;8602   			((NUMIST<6)||((NUMIST>=6)&&(bps[5]._Ti<TVENTOFF)&&(bps[5]._cnt<10)))
;;;8603   			&&
;;;8604   			((NUMIST<7)||((NUMIST>=7)&&(bps[6]._Ti<TVENTOFF)&&(bps[6]._cnt<10)))
;;;8605   			&&
;;;8606   			((NUMIST<8)||((NUMIST>=8)&&(bps[7]._Ti<TVENTOFF)&&(bps[7]._cnt<10)))
;;;8607   			)
;;;8608   			{
;;;8609   			vent_stat=0;
;;;8610   			}
;;;8611   		}
;;;8612   	}
;;;8613   else if(RELEVENTSIGN==rvsEXT)
004a72  2801              CMP      r0,#1
004a74  d07e              BEQ      |L1.19316|
;;;8614   	{
;;;8615   	if	(
;;;8616   		((NUMDT)&&((t_ext[0]>TVENTON)||(ND_EXT[0])))
;;;8617   		||
;;;8618   		((NUMDT>1)&&((t_ext[1]>TVENTON)||(ND_EXT[1])))
;;;8619   		||
;;;8620   		((NUMDT>2)&&((t_ext[2]>TVENTON)||(ND_EXT[2])))
;;;8621   		)
;;;8622   		{
;;;8623   		vent_stat=1;
;;;8624   		}
;;;8625   	else if(vent_stat==1)
;;;8626   		{
;;;8627   		if	(
;;;8628   			((!NUMDT)||((NUMDT)&&(t_ext[0]<TVENTOFF)&&(!ND_EXT[0])))
;;;8629   			&&
;;;8630   			((NUMDT<2)||((NUMDT>=2)&&(t_ext[1]<TVENTOFF)&&(!ND_EXT[1])))
;;;8631   			&&
;;;8632   			((NUMDT<3)||((NUMDT>=3)&&(t_ext[2]<TVENTOFF)&&(!ND_EXT[2])))
;;;8633   			)
;;;8634   			{
;;;8635   			vent_stat=0;
;;;8636   			}
;;;8637   		}
;;;8638   	}
;;;8639   else vent_stat=1;
004a76  f04f0001          MOV      r0,#1
004a7a  7020              STRB     r0,[r4,#0]
                  |L1.19068|
;;;8640   }
004a7c  b007              ADD      sp,sp,#0x1c
004a7e  e8bd8ff0          POP      {r4-r11,pc}
                  |L1.19074|
004a82  4fa4              LDR      r7,|L1.19732|
004a84  f8df8290          LDR      r8,|L1.19736|
004a88  f9b7000a          LDRSH    r0,[r7,#0xa]          ;8532
004a8c  7b3d              LDRB     r5,[r7,#0xc]          ;8532
004a8e  f9b76056          LDRSH    r6,[r7,#0x56]         ;8534
004a92  f898c000          LDRB     r12,[r8,#0]           ;8531
004a96  f8977058          LDRB     r7,[r7,#0x58]         ;8534
004a9a  f8988001          LDRB     r8,[r8,#1]            ;8534
004a9e  b12b              CBZ      r3,|L1.19116|
004aa0  2b01              CMP      r3,#1                 ;8540
004aa2  d1eb              BNE      |L1.19068|
004aa4  f1bc0f55          CMP      r12,#0x55             ;8542
004aa8  d115              BNE      |L1.19158|
004aaa  e010              B        |L1.19150|
                  |L1.19116|
004aac  f1bc0f55          CMP      r12,#0x55             ;8531
004ab0  d102              BNE      |L1.19128|
004ab2  4288              CMP      r0,r1                 ;8532
004ab4  dc07              BGT      |L1.19142|
004ab6  b935              CBNZ     r5,|L1.19142|
                  |L1.19128|
004ab8  f1b80f55          CMP      r8,#0x55              ;8534
004abc  d1de              BNE      |L1.19068|
004abe  428e              CMP      r6,r1                 ;8534
004ac0  dc01              BGT      |L1.19142|
004ac2  2f00              CMP      r7,#0                 ;8534
004ac4  d0da              BEQ      |L1.19068|
                  |L1.19142|
004ac6  f04f0001          MOV      r0,#1                 ;8537
004aca  7020              STRB     r0,[r4,#0]            ;8537
004acc  e7d6              B        |L1.19068|
                  |L1.19150|
004ace  4290              CMP      r0,r2                 ;8543
004ad0  dad4              BGE      |L1.19068|
004ad2  2d00              CMP      r5,#0                 ;8543
004ad4  d1d2              BNE      |L1.19068|
                  |L1.19158|
004ad6  f1b80f55          CMP      r8,#0x55              ;8545
004ada  d103              BNE      |L1.19172|
004adc  4296              CMP      r6,r2                 ;8545
004ade  dacd              BGE      |L1.19068|
004ae0  2f00              CMP      r7,#0                 ;8545
004ae2  d1cb              BNE      |L1.19068|
                  |L1.19172|
004ae4  f04f0000          MOV      r0,#0                 ;8548
004ae8  7020              STRB     r0,[r4,#0]            ;8548
004aea  e7c7              B        |L1.19068|
                  |L1.19180|
004aec  4e8c              LDR      r6,|L1.19744|
004aee  488b              LDR      r0,|L1.19740|
004af0  6ab5              LDR      r5,[r6,#0x28]         ;8570
004af2  f9b00000          LDRSH    r0,[r0,#0]            ;8569  ; NUMIST
004af6  78f6              LDRB     r6,[r6,#3]            ;8570
004af8  b118              CBZ      r0,|L1.19202|
004afa  428d              CMP      r5,r1                 ;8570
004afc  dc7a              BGT      |L1.19444|
004afe  2e1e              CMP      r6,#0x1e              ;8570
004b00  d278              BCS      |L1.19444|
                  |L1.19202|
004b02  f8dfc21c          LDR      r12,|L1.19744|
004b06  2801              CMP      r0,#1                 ;8572
004b08  f8dc7084          LDR      r7,[r12,#0x84]        ;8572
004b0c  f89cc05f          LDRB     r12,[r12,#0x5f]       ;8572
004b10  f8cdc018          STR      r12,[sp,#0x18]        ;8572
004b14  dd06              BLE      |L1.19236|
004b16  428f              CMP      r7,r1                 ;8572
004b18  dc6c              BGT      |L1.19444|
004b1a  f8ddc018          LDR      r12,[sp,#0x18]        ;8572
004b1e  f1bc0f1e          CMP      r12,#0x1e             ;8572
004b22  d267              BCS      |L1.19444|
                  |L1.19236|
004b24  f8dfc1f8          LDR      r12,|L1.19744|
004b28  2802              CMP      r0,#2                 ;8574
004b2a  f8dc80e0          LDR      r8,[r12,#0xe0]        ;8574
004b2e  f8cd8014          STR      r8,[sp,#0x14]         ;8574
004b32  f89cc0bb          LDRB     r12,[r12,#0xbb]       ;8574
004b36  f8cdc010          STR      r12,[sp,#0x10]        ;8574
004b3a  dd08              BLE      |L1.19278|
004b3c  f8ddc014          LDR      r12,[sp,#0x14]        ;8574
004b40  458c              CMP      r12,r1                ;8574
004b42  dc57              BGT      |L1.19444|
004b44  f8ddc010          LDR      r12,[sp,#0x10]        ;8574
004b48  f1bc0f1e          CMP      r12,#0x1e             ;8574
004b4c  d252              BCS      |L1.19444|
                  |L1.19278|
004b4e  f8dfc1d0          LDR      r12,|L1.19744|
004b52  2803              CMP      r0,#3                 ;8576
004b54  f8dc813c          LDR      r8,[r12,#0x13c]       ;8576
004b58  f8cd800c          STR      r8,[sp,#0xc]          ;8576
004b5c  f89cc117          LDRB     r12,[r12,#0x117]      ;8576
004b60  f8cdc008          STR      r12,[sp,#8]           ;8576
004b64  dd0a              BLE      |L1.19324|
004b66  f8ddc00c          LDR      r12,[sp,#0xc]         ;8576
004b6a  458c              CMP      r12,r1                ;8576
004b6c  dc42              BGT      |L1.19444|
004b6e  f8ddc008          LDR      r12,[sp,#8]           ;8576
004b72  e000              B        |L1.19318|
                  |L1.19316|
004b74  e080              B        |L1.19576|
                  |L1.19318|
004b76  f1bc0f1e          CMP      r12,#0x1e             ;8576
004b7a  d23b              BCS      |L1.19444|
                  |L1.19324|
004b7c  f8df81a0          LDR      r8,|L1.19744|
004b80  2804              CMP      r0,#4                 ;8578
004b82  f8d8c198          LDR      r12,[r8,#0x198]       ;8578
004b86  f8988173          LDRB     r8,[r8,#0x173]        ;8578
004b8a  f8cd8004          STR      r8,[sp,#4]            ;8578
004b8e  dd06              BLE      |L1.19358|
004b90  458c              CMP      r12,r1                ;8578
004b92  dc2f              BGT      |L1.19444|
004b94  f8dd8004          LDR      r8,[sp,#4]            ;8578
004b98  f1b80f1e          CMP      r8,#0x1e              ;8578
004b9c  d22a              BCS      |L1.19444|
                  |L1.19358|
004b9e  f8df9180          LDR      r9,|L1.19744|
004ba2  2805              CMP      r0,#5                 ;8580
004ba4  f8d981f4          LDR      r8,[r9,#0x1f4]        ;8580
004ba8  f89991cf          LDRB     r9,[r9,#0x1cf]        ;8580
004bac  f8cd9000          STR      r9,[sp,#0]            ;8580
004bb0  dd06              BLE      |L1.19392|
004bb2  4588              CMP      r8,r1                 ;8580
004bb4  dc1e              BGT      |L1.19444|
004bb6  f8dd9000          LDR      r9,[sp,#0]            ;8580
004bba  f1b90f1e          CMP      r9,#0x1e              ;8580
004bbe  d219              BCS      |L1.19444|
                  |L1.19392|
004bc0  f8dfa15c          LDR      r10,|L1.19744|
004bc4  2806              CMP      r0,#6                 ;8582
004bc6  f89ae22b          LDRB     lr,[r10,#0x22b]       ;8582
004bca  f8da9250          LDR      r9,[r10,#0x250]       ;8582
004bce  dd04              BLE      |L1.19418|
004bd0  4589              CMP      r9,r1                 ;8582
004bd2  dc0f              BGT      |L1.19444|
004bd4  f1be0f1e          CMP      lr,#0x1e              ;8582
004bd8  d20c              BCS      |L1.19444|
                  |L1.19418|
004bda  f8dfb144          LDR      r11,|L1.19744|
004bde  2807              CMP      r0,#7                 ;8584
004be0  f8dba2ac          LDR      r10,[r11,#0x2ac]      ;8584
004be4  f89bb287          LDRB     r11,[r11,#0x287]      ;8584
004be8  dd08              BLE      |L1.19452|
004bea  458a              CMP      r10,r1                ;8584
004bec  dc02              BGT      |L1.19444|
004bee  f1bb0f1e          CMP      r11,#0x1e             ;8584
004bf2  d303              BCC      |L1.19452|
                  |L1.19444|
004bf4  f04f0001          MOV      r0,#1                 ;8587
004bf8  7020              STRB     r0,[r4,#0]            ;8587
                  |L1.19450|
004bfa  e73f              B        |L1.19068|
                  |L1.19452|
004bfc  2b01              CMP      r3,#1                 ;8589
004bfe  d1fc              BNE      |L1.19450|
004c00  b118              CBZ      r0,|L1.19466|
004c02  4295              CMP      r5,r2                 ;8592
004c04  daf9              BGE      |L1.19450|
004c06  2e0a              CMP      r6,#0xa               ;8592
004c08  d2f7              BCS      |L1.19450|
                  |L1.19466|
004c0a  2802              CMP      r0,#2                 ;8594
004c0c  db04              BLT      |L1.19480|
004c0e  4297              CMP      r7,r2                 ;8594
004c10  daf3              BGE      |L1.19450|
004c12  9906              LDR      r1,[sp,#0x18]         ;8594
004c14  290a              CMP      r1,#0xa               ;8594
004c16  d2f0              BCS      |L1.19450|
                  |L1.19480|
004c18  2803              CMP      r0,#3                 ;8596
004c1a  db05              BLT      |L1.19496|
004c1c  9905              LDR      r1,[sp,#0x14]         ;8596
004c1e  4291              CMP      r1,r2                 ;8596
004c20  daeb              BGE      |L1.19450|
004c22  9904              LDR      r1,[sp,#0x10]         ;8596
004c24  290a              CMP      r1,#0xa               ;8596
004c26  d2e8              BCS      |L1.19450|
                  |L1.19496|
004c28  2804              CMP      r0,#4                 ;8598
004c2a  db05              BLT      |L1.19512|
004c2c  9903              LDR      r1,[sp,#0xc]          ;8598
004c2e  4291              CMP      r1,r2                 ;8598
004c30  dae3              BGE      |L1.19450|
004c32  9902              LDR      r1,[sp,#8]            ;8598
004c34  290a              CMP      r1,#0xa               ;8598
004c36  d2e0              BCS      |L1.19450|
                  |L1.19512|
004c38  2805              CMP      r0,#5                 ;8600
004c3a  db04              BLT      |L1.19526|
004c3c  4594              CMP      r12,r2                ;8600
004c3e  dadc              BGE      |L1.19450|
004c40  9901              LDR      r1,[sp,#4]            ;8600
004c42  290a              CMP      r1,#0xa               ;8600
004c44  d2d9              BCS      |L1.19450|
                  |L1.19526|
004c46  2806              CMP      r0,#6                 ;8602
004c48  db04              BLT      |L1.19540|
004c4a  4590              CMP      r8,r2                 ;8602
004c4c  dad5              BGE      |L1.19450|
004c4e  9900              LDR      r1,[sp,#0]            ;8602
004c50  290a              CMP      r1,#0xa               ;8602
004c52  d2d2              BCS      |L1.19450|
                  |L1.19540|
004c54  2807              CMP      r0,#7                 ;8604
004c56  db04              BLT      |L1.19554|
004c58  4591              CMP      r9,r2                 ;8604
004c5a  dace              BGE      |L1.19450|
004c5c  f1be0f0a          CMP      lr,#0xa               ;8604
004c60  d2cb              BCS      |L1.19450|
                  |L1.19554|
004c62  2808              CMP      r0,#8                 ;8606
004c64  db04              BLT      |L1.19568|
004c66  4592              CMP      r10,r2                ;8606
004c68  dac7              BGE      |L1.19450|
004c6a  f1bb0f0a          CMP      r11,#0xa              ;8606
004c6e  d2c4              BCS      |L1.19450|
                  |L1.19568|
004c70  f04f0000          MOV      r0,#0                 ;8609
004c74  7020              STRB     r0,[r4,#0]            ;8609
                  |L1.19574|
004c76  e701              B        |L1.19068|
                  |L1.19576|
004c78  482a              LDR      r0,|L1.19748|
004c7a  4d2b              LDR      r5,|L1.19752|
004c7c  4e2b              LDR      r6,|L1.19756|
004c7e  f9b00000          LDRSH    r0,[r0,#0]            ;8615  ; NUMDT
004c82  f9b55000          LDRSH    r5,[r5,#0]            ;8616
004c86  7836              LDRB     r6,[r6,#0]            ;8616
004c88  b110              CBZ      r0,|L1.19600|
004c8a  428d              CMP      r5,r1                 ;8616
004c8c  dc1d              BGT      |L1.19658|
004c8e  b9e6              CBNZ     r6,|L1.19658|
                  |L1.19600|
004c90  4f25              LDR      r7,|L1.19752|
004c92  f8dfc098          LDR      r12,|L1.19756|
004c96  2801              CMP      r0,#1                 ;8618
004c98  f9b77002          LDRSH    r7,[r7,#2]            ;8618
004c9c  f89cc001          LDRB     r12,[r12,#1]          ;8618
004ca0  dd04              BLE      |L1.19628|
004ca2  428f              CMP      r7,r1                 ;8618
004ca4  dc11              BGT      |L1.19658|
004ca6  f1bc0f00          CMP      r12,#0                ;8618
004caa  d10e              BNE      |L1.19658|
                  |L1.19628|
004cac  f8df8078          LDR      r8,|L1.19752|
004cb0  f8df9078          LDR      r9,|L1.19756|
004cb4  2802              CMP      r0,#2                 ;8620
004cb6  f9b88004          LDRSH    r8,[r8,#4]            ;8620
004cba  f8999002          LDRB     r9,[r9,#2]            ;8620
004cbe  dd08              BLE      |L1.19666|
004cc0  4588              CMP      r8,r1                 ;8620
004cc2  dc02              BGT      |L1.19658|
004cc4  f1b90f00          CMP      r9,#0                 ;8620
004cc8  d003              BEQ      |L1.19666|
                  |L1.19658|
004cca  f04f0001          MOV      r0,#1                 ;8623
004cce  7020              STRB     r0,[r4,#0]            ;8623
004cd0  e6d4              B        |L1.19068|
                  |L1.19666|
004cd2  2b01              CMP      r3,#1                 ;8625
004cd4  d191              BNE      |L1.19450|
004cd6  b118              CBZ      r0,|L1.19680|
004cd8  4295              CMP      r5,r2                 ;8628
004cda  da8e              BGE      |L1.19450|
004cdc  2e00              CMP      r6,#0                 ;8628
004cde  d18c              BNE      |L1.19450|
                  |L1.19680|
004ce0  2802              CMP      r0,#2                 ;8630
004ce2  db04              BLT      |L1.19694|
004ce4  4297              CMP      r7,r2                 ;8630
004ce6  da88              BGE      |L1.19450|
004ce8  f1bc0f00          CMP      r12,#0                ;8630
004cec  d185              BNE      |L1.19450|
                  |L1.19694|
004cee  2803              CMP      r0,#3                 ;8632
004cf0  db04              BLT      |L1.19708|
004cf2  4590              CMP      r8,r2                 ;8632
004cf4  dabf              BGE      |L1.19574|
004cf6  f1b90f00          CMP      r9,#0                 ;8632
004cfa  d1bc              BNE      |L1.19574|
                  |L1.19708|
004cfc  f04f0000          MOV      r0,#0                 ;8635
004d00  7020              STRB     r0,[r4,#0]            ;8635
004d02  e6bb              B        |L1.19068|
;;;8641   
                          ENDP

                  |L1.19716|
                          DCD      RELEVENTSIGN
                  |L1.19720|
                          DCD      ||area_number.23||
                  |L1.19724|
                          DCD      TVENTON
                  |L1.19728|
                          DCD      TVENTOFF
                  |L1.19732|
                          DCD      bat
                  |L1.19736|
                          DCD      BAT_IS_ON
                  |L1.19740|
                          DCD      NUMIST
                  |L1.19744|
                          DCD      bps
                  |L1.19748|
                          DCD      NUMDT
                  |L1.19752|
                          DCD      t_ext
                  |L1.19756|
                          DCD      ND_EXT

                          AREA ||area_number.2||, CODE, READONLY, ALIGN=2

                          EXPORTAS ||area_number.2||, ||.text||
                  samokalibr_init PROC
;;;249    //-----------------------------------------------
;;;250    void ke_start(char in)
000000  4902              LDR      r1,|L2.12|
;;;251    {          
000002  f24060f9          MOV      r0,#0x6f9
;;;252    ke_start_stat=(enum_ke_start_stat)0;		 
000006  87c8              STRH     r0,[r1,#0x3e]
000008  4770              BX       lr
;;;253    
;;;254    if(spc_stat==spcVZ)ke_start_stat=kssNOT_VZ;
;;;255    #ifndef UKU_220_IPS_TERMOKOMPENSAT
;;;256    else if(BAT_IS_ON[in]!=bisON)ke_start_stat=kssNOT_BAT;
;;;257    #endif
;;;258    else if(bat[in]._av&(1<<0))ke_start_stat=kssNOT_BAT_AV;
;;;259    else if(bat[in]._temper_stat&(1<<1))ke_start_stat=kssNOT_BAT_AV_T;
;;;260    else if(bat[in]._av&(1<<1))ke_start_stat=kssNOT_BAT_AV_ASS;
;;;261    else if(bat[in]._Ib>IKB)ke_start_stat=kssNOT_BAT_ZAR;
;;;262    else if(bat[in]._Ib<-IKB)ke_start_stat=kssNOT_BAT_RAZR;
;;;263    else if((spc_stat==spcKE)&&(spc_bat==0))ke_start_stat=kssNOT_KE1;
;;;264    else if((spc_stat==spcKE)&&(spc_bat==1))ke_start_stat=kssNOT_KE2;
;;;265    else 
;;;266    	{
;;;267    
;;;268    	ke_start_stat=kssYES;
;;;269    
;;;270    	spc_stat=spcKE;
;;;271    	__ee_spc_stat=spcKE;
;;;272    	lc640_write_int(EE_SPC_STAT,__ee_spc_stat);
;;;273    	
;;;274    	spc_bat=in;
;;;275    	__ee_spc_bat=in;
;;;276    	lc640_write_int(EE_SPC_BAT,__ee_spc_bat);
;;;277    
;;;278    	bat[in]._zar_cnt_ke=0;
;;;279    	lc640_write_int(ADR_EE_BAT_ZAR_CNT_KE[in],0);
;;;280    	
;;;281    	spc_phase=0;
;;;282    	__ee_spc_phase=0;
;;;283    	lc640_write_int(EE_SPC_PHASE,__ee_spc_phase);
;;;284    
;;;285    	//ke_mem_hndl(in,lc640_read_int(ADR_EE_BAT_ZAR_CNT_KE[spc_bat]));
;;;286    
;;;287    		{					
;;;288    		signed short temp_temp;
;;;289    		signed char temp;
;;;290    		temp_temp=bat[in]._u_old[((bat_u_old_cnt+1)&0x07)]; 
;;;291    		    
;;;292    		temp=LPC_RTC->YEAR;
;;;293    		gran_char(&temp,1,99);
;;;294    		*((char*)(&(ke_date[0])))=temp;
;;;295    			
;;;296    		temp=LPC_RTC->MONTH;
;;;297    		gran_char(&temp,1,12);
;;;298    		*(((char*)(&(ke_date[0])))+1)=temp;
;;;299    		
;;;300    		temp=LPC_RTC->DOM;
;;;301    		gran_char(&temp,1,31);
;;;302    		*(((char*)(&(ke_date[0])))+2)=temp;			
;;;303    				
;;;304    		*(((char*)(&(ke_date[0])))+3)=*((char*)&temp_temp);
;;;305    		lc640_write_long(EE_SPC_KE_DATE0,ke_date[0]);
;;;306    
;;;307    		temp=LPC_RTC->HOUR;
;;;308    		gran_char(&temp,0,23);
;;;309    		*((char*)(&(ke_date[1])))=temp;
;;;310                   
;;;311    		temp=LPC_RTC->MIN;
;;;312    		gran_char(&temp,0,59);
;;;313    		*(((char*)(&(ke_date[1])))+1)=temp;
;;;314    	          
;;;315    		temp=LPC_RTC->SEC;
;;;316    		gran_char(&temp,0,59);
;;;317    		*(((char*)(&(ke_date[1])))+2)=temp;
;;;318    			
;;;319    		*(((char*)(&(ke_date[1])))+3)=*(((char*)&temp_temp)+1);
;;;320    		lc640_write_long(EE_SPC_KE_DATE1,ke_date[1]);
;;;321    		}
;;;322    
;;;323    	}
;;;324    }
;;;325    
                          ENDP

00000a  0000              DCW      0x0000
                  |L2.12|
                          DCD      ||area_number.23||

                          AREA ||area_number.3||, CODE, READONLY, ALIGN=2

                          EXPORTAS ||area_number.3||, ||.text||
                  adc_drv6 PROC
;;;249    //-----------------------------------------------
;;;250    void ke_start(char in)
000000  e92d41f0          PUSH     {r4-r8,lr}
;;;251    {          
000004  4c80              LDR      r4,|L3.520|
;;;252    ke_start_stat=(enum_ke_start_stat)0;		 
000006  8860              LDRH     r0,[r4,#2]  ; adc_self_ch_buff
000008  8821              LDRH     r1,[r4,#0]  ; adc_self_ch_buff
00000a  1a40              SUBS     r0,r0,r1
00000c  b200              SXTH     r0,r0
;;;253    
;;;254    if(spc_stat==spcVZ)ke_start_stat=kssNOT_VZ;
00000e  f7fffffe          BL       abs_pal
000012  1da5              ADDS     r5,r4,#6
000014  8028              STRH     r0,[r5,#0]
000016  88a0              LDRH     r0,[r4,#4]  ; adc_self_ch_buff
;;;255    #ifndef UKU_220_IPS_TERMOKOMPENSAT
;;;256    else if(BAT_IS_ON[in]!=bisON)ke_start_stat=kssNOT_BAT;
;;;257    #endif
;;;258    else if(bat[in]._av&(1<<0))ke_start_stat=kssNOT_BAT_AV;
000018  8861              LDRH     r1,[r4,#2]  ; adc_self_ch_buff
00001a  1a40              SUBS     r0,r0,r1
00001c  b200              SXTH     r0,r0
00001e  f7fffffe          BL       abs_pal
000022  8068              STRH     r0,[r5,#2]
000024  88a0              LDRH     r0,[r4,#4]  ; adc_self_ch_buff
000026  8821              LDRH     r1,[r4,#0]  ; adc_self_ch_buff
000028  1a40              SUBS     r0,r0,r1
00002a  b200              SXTH     r0,r0
00002c  f7fffffe          BL       abs_pal
000030  80a8              STRH     r0,[r5,#4]
000032  f44f7196          MOV      r1,#0x12c
;;;259    else if(bat[in]._temper_stat&(1<<1))ke_start_stat=kssNOT_BAT_AV_T;
;;;260    else if(bat[in]._av&(1<<1))ke_start_stat=kssNOT_BAT_AV_ASS;
;;;261    else if(bat[in]._Ib>IKB)ke_start_stat=kssNOT_BAT_ZAR;
;;;262    else if(bat[in]._Ib<-IKB)ke_start_stat=kssNOT_BAT_RAZR;
;;;263    else if((spc_stat==spcKE)&&(spc_bat==0))ke_start_stat=kssNOT_KE1;
;;;264    else if((spc_stat==spcKE)&&(spc_bat==1))ke_start_stat=kssNOT_KE2;
;;;265    else 
;;;266    	{
;;;267    
;;;268    	ke_start_stat=kssYES;
;;;269    
;;;270    	spc_stat=spcKE;
;;;271    	__ee_spc_stat=spcKE;
;;;272    	lc640_write_int(EE_SPC_STAT,__ee_spc_stat);
;;;273    	
;;;274    	spc_bat=in;
;;;275    	__ee_spc_bat=in;
;;;276    	lc640_write_int(EE_SPC_BAT,__ee_spc_bat);
;;;277    
;;;278    	bat[in]._zar_cnt_ke=0;
;;;279    	lc640_write_int(ADR_EE_BAT_ZAR_CNT_KE[in],0);
;;;280    	
;;;281    	spc_phase=0;
;;;282    	__ee_spc_phase=0;
;;;283    	lc640_write_int(EE_SPC_PHASE,__ee_spc_phase);
;;;284    
;;;285    	//ke_mem_hndl(in,lc640_read_int(ADR_EE_BAT_ZAR_CNT_KE[spc_bat]));
;;;286    
;;;287    		{					
;;;288    		signed short temp_temp;
;;;289    		signed char temp;
;;;290    		temp_temp=bat[in]._u_old[((bat_u_old_cnt+1)&0x07)]; 
;;;291    		    
;;;292    		temp=LPC_RTC->YEAR;
;;;293    		gran_char(&temp,1,99);
;;;294    		*((char*)(&(ke_date[0])))=temp;
;;;295    			
;;;296    		temp=LPC_RTC->MONTH;
;;;297    		gran_char(&temp,1,12);
;;;298    		*(((char*)(&(ke_date[0])))+1)=temp;
;;;299    		
;;;300    		temp=LPC_RTC->DOM;
;;;301    		gran_char(&temp,1,31);
;;;302    		*(((char*)(&(ke_date[0])))+2)=temp;			
;;;303    				
;;;304    		*(((char*)(&(ke_date[0])))+3)=*((char*)&temp_temp);
;;;305    		lc640_write_long(EE_SPC_KE_DATE0,ke_date[0]);
;;;306    
;;;307    		temp=LPC_RTC->HOUR;
;;;308    		gran_char(&temp,0,23);
;;;309    		*((char*)(&(ke_date[1])))=temp;
;;;310                   
;;;311    		temp=LPC_RTC->MIN;
;;;312    		gran_char(&temp,0,59);
;;;313    		*(((char*)(&(ke_date[1])))+1)=temp;
;;;314    	          
;;;315    		temp=LPC_RTC->SEC;
;;;316    		gran_char(&temp,0,59);
;;;317    		*(((char*)(&(ke_date[1])))+2)=temp;
;;;318    			
;;;319    		*(((char*)(&(ke_date[1])))+3)=*(((char*)&temp_temp)+1);
;;;320    		lc640_write_long(EE_SPC_KE_DATE1,ke_date[1]);
;;;321    		}
;;;322    
;;;323    	}
;;;324    }
000036  f1a4069a          SUB      r6,r4,#0x9a
00003a  4288              CMP      r0,r1
00003c  da02              BGE      |L3.68|
00003e  88a0              LDRH     r0,[r4,#4]            ;259  ; adc_self_ch_buff
000040  8570              STRH     r0,[r6,#0x2a]         ;259
000042  e00c              B        |L3.94|
                  |L3.68|
000044  f9b50002          LDRSH    r0,[r5,#2]            ;259  ; adc_self_ch_disp
000048  4288              CMP      r0,r1                 ;259
00004a  da02              BGE      |L3.82|
00004c  8860              LDRH     r0,[r4,#2]            ;260  ; adc_self_ch_buff
00004e  8570              STRH     r0,[r6,#0x2a]         ;260
000050  e005              B        |L3.94|
                  |L3.82|
000052  f9b50000          LDRSH    r0,[r5,#0]            ;260  ; adc_self_ch_disp
000056  4288              CMP      r0,r1
000058  da01              BGE      |L3.94|
00005a  8820              LDRH     r0,[r4,#0]            ;261  ; adc_self_ch_buff
00005c  8570              STRH     r0,[r6,#0x2a]         ;261
                  |L3.94|
00005e  78f7              LDRB     r7,[r6,#3]            ;261  ; adc_ch_net
000060  2200              MOVS     r2,#0                 ;261
000062  b3f7              CBZ      r7,|L3.226|
000064  79b3              LDRB     r3,[r6,#6]            ;261  ; adc_window_flag
000066  4869              LDR      r0,|L3.524|
000068  b18b              CBZ      r3,|L3.142|
00006a  f9b6102a          LDRSH    r1,[r6,#0x2a]         ;261  ; adc_result
00006e  6804              LDR      r4,[r0,#0]            ;262  ; main_power_buffer
000070  eb0404a1          ADD      r4,r4,r1,ASR #2       ;262
000074  6004              STR      r4,[r0,#0]            ;262  ; main_power_buffer
000076  6844              LDR      r4,[r0,#4]            ;262  ; main_power_buffer
000078  eb0404a1          ADD      r4,r4,r1,ASR #2       ;262
00007c  6044              STR      r4,[r0,#4]            ;252  ; main_power_buffer
00007e  6884              LDR      r4,[r0,#8]            ;263  ; main_power_buffer
000080  eb0404a1          ADD      r4,r4,r1,ASR #2       ;263
000084  6084              STR      r4,[r0,#8]            ;263  ; main_power_buffer
000086  68c4              LDR      r4,[r0,#0xc]          ;264  ; main_power_buffer
000088  eb0401a1          ADD      r1,r4,r1,ASR #2       ;264
00008c  60c1              STR      r1,[r0,#0xc]          ;263  ; main_power_buffer
                  |L3.142|
00008e  f9b6102a          LDRSH    r1,[r6,#0x2a]         ;263  ; adc_result
000092  2964              CMP      r1,#0x64
000094  da04              BGE      |L3.160|
000096  8df1              LDRH     r1,[r6,#0x2e]         ;264  ; adc_zero_cnt
000098  f1010101          ADD      r1,r1,#1              ;268
00009c  85f1              STRH     r1,[r6,#0x2e]         ;268
00009e  e000              B        |L3.162|
                  |L3.160|
0000a0  85f2              STRH     r2,[r6,#0x2e]         ;271
                  |L3.162|
0000a2  f9b6402e          LDRSH    r4,[r6,#0x2e]         ;271  ; adc_zero_cnt
0000a6  f44f61fa          MOV      r1,#0x7d0             ;272
0000aa  428c              CMP      r4,r1                 ;272
0000ac  db05              BLT      |L3.186|
0000ae  85f1              STRH     r1,[r6,#0x2e]         ;274
0000b0  6002              STR      r2,[r0,#0]            ;275  ; main_power_buffer
0000b2  6042              STR      r2,[r0,#4]            ;275  ; main_power_buffer
0000b4  6082              STR      r2,[r0,#8]            ;276  ; main_power_buffer
0000b6  60c2              STR      r2,[r0,#0xc]          ;276  ; main_power_buffer
0000b8  8532              STRH     r2,[r6,#0x28]         ;276
                  |L3.186|
0000ba  8df1              LDRH     r1,[r6,#0x2e]         ;276  ; adc_zero_cnt
0000bc  2905              CMP      r1,#5                 ;276
0000be  d14f              BNE      |L3.352|
0000c0  b1bb              CBZ      r3,|L3.242|
0000c2  8db1              LDRH     r1,[r6,#0x2c]         ;279  ; adc_gorb_cnt
0000c4  f1010101          ADD      r1,r1,#1              ;279
0000c8  b209              SXTH     r1,r1                 ;279
0000ca  85b1              STRH     r1,[r6,#0x2c]         ;279
0000cc  f5b17f00          CMP      r1,#0x200             ;281
0000d0  db00              BLT      |L3.212|
0000d2  85b2              STRH     r2,[r6,#0x2c]         ;283
                  |L3.212|
0000d4  f9b6102c          LDRSH    r1,[r6,#0x2c]         ;283  ; adc_gorb_cnt
0000d8  064c              LSLS     r4,r1,#25             ;283
0000da  d10a              BNE      |L3.242|
0000dc  ea4f11e1          ASR      r1,r1,#7              ;290
0000e0  e000              B        |L3.228|
                  |L3.226|
0000e2  e015              B        |L3.272|
                  |L3.228|
0000e4  f8504021          LDR      r4,[r0,r1,LSL #2]     ;290
0000e8  ea4f2424          ASR      r4,r4,#8              ;290
0000ec  8534              STRH     r4,[r6,#0x28]         ;290
0000ee  f8402021          STR      r2,[r0,r1,LSL #2]     ;290
                  |L3.242|
0000f2  f9b60030          LDRSH    r0,[r6,#0x30]         ;292  ; adc_window_cnt
0000f6  2896              CMP      r0,#0x96              ;293
0000f8  dd01              BLE      |L3.254|
0000fa  b103              CBZ      r3,|L3.254|
0000fc  71b2              STRB     r2,[r6,#6]            ;293
                  |L3.254|
0000fe  381f              SUBS     r0,r0,#0x1f           ;293
000100  2827              CMP      r0,#0x27              ;293
000102  d22d              BCS      |L3.352|
000104  79b0              LDRB     r0,[r6,#6]            ;294  ; adc_window_flag
000106  bb58              CBNZ     r0,|L3.352|
000108  f04f0001          MOV      r0,#1                 ;294
00010c  71b0              STRB     r0,[r6,#6]            ;294
00010e  e027              B        |L3.352|
                  |L3.272|
000110  483f              LDR      r0,|L3.528|
000112  7935              LDRB     r5,[r6,#4]            ;297  ; adc_ch
000114  7973              LDRB     r3,[r6,#5]            ;297  ; adc_ch_cnt
000116  eb001485          ADD      r4,r0,r5,LSL #6       ;297
00011a  f9b6102a          LDRSH    r1,[r6,#0x2a]         ;297  ; adc_result
00011e  f8441023          STR      r1,[r4,r3,LSL #2]     ;298
000122  0798              LSLS     r0,r3,#30             ;300
000124  d10f              BNE      |L3.326|
000126  4601              MOV      r1,r0                 ;301
                  |L3.296|
000128  f854c020          LDR      r12,[r4,r0,LSL #2]    ;301
00012c  4461              ADD      r1,r1,r12             ;301
00012e  f1000001          ADD      r0,r0,#1              ;301
000132  b2c0              UXTB     r0,r0                 ;302
000134  2810              CMP      r0,#0x10              ;302
000136  d3f7              BCC      |L3.296|
000138  ea4f1021          ASR      r0,r1,#4              ;304
00013c  4933              LDR      r1,|L3.524|
00013e  f1a10120          SUB      r1,r1,#0x20           ;305
000142  f8210015          STRH     r0,[r1,r5,LSL #1]     ;305
                  |L3.326|
000146  1c6d              ADDS     r5,r5,#1              ;307
000148  b2e8              UXTB     r0,r5                 ;307
00014a  7130              STRB     r0,[r6,#4]            ;308
00014c  2810              CMP      r0,#0x10              ;308
00014e  d307              BCC      |L3.352|
000150  7132              STRB     r2,[r6,#4]            ;308
000152  f1030301          ADD      r3,r3,#1              ;308
000156  b2d8              UXTB     r0,r3                 ;309
000158  7170              STRB     r0,[r6,#5]            ;309
00015a  2810              CMP      r0,#0x10              ;311
00015c  d300              BCC      |L3.352|
00015e  7172              STRB     r2,[r6,#5]            ;312
                  |L3.352|
000160  70b2              STRB     r2,[r6,#2]            ;312
000162  f1070701          ADD      r7,r7,#1              ;312
000166  f0070001          AND      r0,r7,#1              ;312
00016a  70f0              STRB     r0,[r6,#3]            ;313
00016c  4a29              LDR      r2,|L3.532|
00016e  b130              CBZ      r0,|L3.382|
000170  6810              LDR      r0,[r2,#0]            ;315
000172  f02000ff          BIC      r0,r0,#0xff           ;316
000176  f1000004          ADD      r0,r0,#4              ;316
00017a  6010              STR      r0,[r2,#0]            ;316
00017c  e03d              B        |L3.506|
                  |L3.382|
00017e  7931              LDRB     r1,[r6,#4]            ;317  ; adc_ch
000180  0708              LSLS     r0,r1,#28             ;317
000182  d406              BMI      |L3.402|
000184  6810              LDR      r0,[r2,#0]            ;319
000186  f02000ff          BIC      r0,r0,#0xff           ;319
00018a  f1000001          ADD      r0,r0,#1              ;320
00018e  6010              STR      r0,[r2,#0]            ;320
000190  e005              B        |L3.414|
                  |L3.402|
000192  6810              LDR      r0,[r2,#0]
000194  f02000ff          BIC      r0,r0,#0xff
000198  f1000002          ADD      r0,r0,#2              ;264
00019c  6010              STR      r0,[r2,#0]
                  |L3.414|
00019e  481e              LDR      r0,|L3.536|
0001a0  6803              LDR      r3,[r0,#0]
0001a2  f0435380          ORR      r3,r3,#0x10000000
0001a6  6003              STR      r3,[r0,#0]
0001a8  6a03              LDR      r3,[r0,#0x20]
0001aa  f0434380          ORR      r3,r3,#0x40000000
0001ae  6203              STR      r3,[r0,#0x20]
0001b0  6e03              LDR      r3,[r0,#0x60]
0001b2  f0436380          ORR      r3,r3,#0x4000000
0001b6  6603              STR      r3,[r0,#0x60]
0001b8  07cb              LSLS     r3,r1,#31
0001ba  d00a              BEQ      |L3.466|
0001bc  6943              LDR      r3,[r0,#0x14]
0001be  f0435380          ORR      r3,r3,#0x10000000
0001c2  6143              STR      r3,[r0,#0x14]
                  |L3.452|
0001c4  078b              LSLS     r3,r1,#30
0001c6  d409              BMI      |L3.476|
0001c8  6b43              LDR      r3,[r0,#0x34]
0001ca  f0234380          BIC      r3,r3,#0x40000000
0001ce  6343              STR      r3,[r0,#0x34]
0001d0  e008              B        |L3.484|
                  |L3.466|
0001d2  6943              LDR      r3,[r0,#0x14]
0001d4  f0235380          BIC      r3,r3,#0x10000000
0001d8  6143              STR      r3,[r0,#0x14]
0001da  e7f3              B        |L3.452|
                  |L3.476|
0001dc  6b43              LDR      r3,[r0,#0x34]
0001de  f0434380          ORR      r3,r3,#0x40000000
0001e2  6343              STR      r3,[r0,#0x34]
                  |L3.484|
0001e4  0749              LSLS     r1,r1,#29
0001e6  d404              BMI      |L3.498|
0001e8  6f41              LDR      r1,[r0,#0x74]
0001ea  f0216180          BIC      r1,r1,#0x4000000
0001ee  6741              STR      r1,[r0,#0x74]
0001f0  e003              B        |L3.506|
                  |L3.498|
0001f2  6f41              LDR      r1,[r0,#0x74]
0001f4  f0416180          ORR      r1,r1,#0x4000000
0001f8  6741              STR      r1,[r0,#0x74]
                  |L3.506|
0001fa  6810              LDR      r0,[r2,#0]
0001fc  f0407080          ORR      r0,r0,#0x1000000
000200  6010              STR      r0,[r2,#0]
000202  e8bd81f0          POP      {r4-r8,pc}
;;;325    
                          ENDP

000206  0000              DCW      0x0000
                  |L3.520|
                          DCD      ||area_number.23||+0x9a
                  |L3.524|
                          DCD      ||.bss||+0x420
                  |L3.528|
                          DCD      ||.bss||
                  |L3.532|
                          DCD      0x40034000
                  |L3.536|
                          DCD      0x2009c000

                          AREA ||area_number.4||, CODE, READONLY, ALIGN=2

                          EXPORTAS ||area_number.4||, ||.text||
                  ips_current_average_hndl_ PROC
;;;249    //-----------------------------------------------
;;;250    void ke_start(char in)
000000  e92d43f0          PUSH     {r4-r9,lr}
;;;251    {          
000004  b085              SUB      sp,sp,#0x14
;;;252    ke_start_stat=(enum_ke_start_stat)0;		 
000006  4c64              LDR      r4,|L4.408|
000008  4e64              LDR      r6,|L4.412|
00000a  2500              MOVS     r5,#0
00000c  7820              LDRB     r0,[r4,#0]  ; ica_timer_cnt
;;;253    
;;;254    if(spc_stat==spcVZ)ke_start_stat=kssNOT_VZ;
00000e  1c40              ADDS     r0,r0,#1
000010  b2c0              UXTB     r0,r0
000012  7020              STRB     r0,[r4,#0]
000014  280a              CMP      r0,#0xa
000016  d340              BCC      |L4.154|
;;;255    #ifndef UKU_220_IPS_TERMOKOMPENSAT
;;;256    else if(BAT_IS_ON[in]!=bisON)ke_start_stat=kssNOT_BAT;
;;;257    #endif
;;;258    else if(bat[in]._av&(1<<0))ke_start_stat=kssNOT_BAT_AV;
000018  7025              STRB     r5,[r4,#0]
00001a  f8dfc184          LDR      r12,|L4.416|
00001e  f89c0000          LDRB     r0,[r12,#0]  ; ica_plazma
000022  f1000001          ADD      r0,r0,#1
000026  f88c0000          STRB     r0,[r12,#0]
00002a  485e              LDR      r0,|L4.420|
00002c  495e              LDR      r1,|L4.424|
00002e  f9b00000          LDRSH    r0,[r0,#0]  ; bps_I
000032  8008              STRH     r0,[r1,#0]
;;;259    else if(bat[in]._temper_stat&(1<<1))ke_start_stat=kssNOT_BAT_AV_T;
;;;260    else if(bat[in]._av&(1<<1))ke_start_stat=kssNOT_BAT_AV_ASS;
;;;261    else if(bat[in]._Ib>IKB)ke_start_stat=kssNOT_BAT_ZAR;
;;;262    else if(bat[in]._Ib<-IKB)ke_start_stat=kssNOT_BAT_RAZR;
;;;263    else if((spc_stat==spcKE)&&(spc_bat==0))ke_start_stat=kssNOT_KE1;
;;;264    else if((spc_stat==spcKE)&&(spc_bat==1))ke_start_stat=kssNOT_KE2;
;;;265    else 
;;;266    	{
;;;267    
;;;268    	ke_start_stat=kssYES;
;;;269    
;;;270    	spc_stat=spcKE;
;;;271    	__ee_spc_stat=spcKE;
;;;272    	lc640_write_int(EE_SPC_STAT,__ee_spc_stat);
;;;273    	
;;;274    	spc_bat=in;
;;;275    	__ee_spc_bat=in;
;;;276    	lc640_write_int(EE_SPC_BAT,__ee_spc_bat);
;;;277    
;;;278    	bat[in]._zar_cnt_ke=0;
;;;279    	lc640_write_int(ADR_EE_BAT_ZAR_CNT_KE[in],0);
;;;280    	
;;;281    	spc_phase=0;
;;;282    	__ee_spc_phase=0;
;;;283    	lc640_write_int(EE_SPC_PHASE,__ee_spc_phase);
;;;284    
;;;285    	//ke_mem_hndl(in,lc640_read_int(ADR_EE_BAT_ZAR_CNT_KE[spc_bat]));
;;;286    
;;;287    		{					
;;;288    		signed short temp_temp;
;;;289    		signed char temp;
;;;290    		temp_temp=bat[in]._u_old[((bat_u_old_cnt+1)&0x07)]; 
;;;291    		    
;;;292    		temp=LPC_RTC->YEAR;
;;;293    		gran_char(&temp,1,99);
;;;294    		*((char*)(&(ke_date[0])))=temp;
;;;295    			
;;;296    		temp=LPC_RTC->MONTH;
;;;297    		gran_char(&temp,1,12);
;;;298    		*(((char*)(&(ke_date[0])))+1)=temp;
;;;299    		
;;;300    		temp=LPC_RTC->DOM;
;;;301    		gran_char(&temp,1,31);
;;;302    		*(((char*)(&(ke_date[0])))+2)=temp;			
;;;303    				
;;;304    		*(((char*)(&(ke_date[0])))+3)=*((char*)&temp_temp);
;;;305    		lc640_write_long(EE_SPC_KE_DATE0,ke_date[0]);
;;;306    
;;;307    		temp=LPC_RTC->HOUR;
;;;308    		gran_char(&temp,0,23);
;;;309    		*((char*)(&(ke_date[1])))=temp;
;;;310                   
;;;311    		temp=LPC_RTC->MIN;
;;;312    		gran_char(&temp,0,59);
;;;313    		*(((char*)(&(ke_date[1])))+1)=temp;
;;;314    	          
;;;315    		temp=LPC_RTC->SEC;
;;;316    		gran_char(&temp,0,59);
;;;317    		*(((char*)(&(ke_date[1])))+2)=temp;
;;;318    			
;;;319    		*(((char*)(&(ke_date[1])))+3)=*(((char*)&temp_temp)+1);
;;;320    		lc640_write_long(EE_SPC_KE_DATE1,ke_date[1]);
;;;321    		}
;;;322    
;;;323    	}
;;;324    }
000034  495d              LDR      r1,|L4.428|
000036  f8df8178          LDR      r8,|L4.432|
00003a  4662              MOV      r2,r12
00003c  4637              MOV      r7,r6                 ;259
00003e  f9b11000          LDRSH    r1,[r1,#0]            ;259  ; ica_your_current
000042  7852              LDRB     r2,[r2,#1]            ;259
000044  f9b83000          LDRSH    r3,[r8,#0]            ;259
000048  f9b77000          LDRSH    r7,[r7,#0]            ;259
00004c  4288              CMP      r0,r1                 ;260
00004e  dd06              BLE      |L4.94|
000050  eba00901          SUB      r9,r0,r1              ;260
000054  f1b90f0a          CMP      r9,#0xa               ;260
000058  db01              BLT      |L4.94|
00005a  2f01              CMP      r7,#1                 ;261
00005c  d007              BEQ      |L4.110|
                  |L4.94|
00005e  4288              CMP      r0,r1                 ;261
000060  da16              BGE      |L4.144|
000062  1a08              SUBS     r0,r1,r0              ;261
000064  280a              CMP      r0,#0xa               ;261
000066  db13              BLT      |L4.144|
000068  2f01              CMP      r7,#1                 ;261
00006a  d009              BEQ      |L4.128|
00006c  e010              B        |L4.144|
                  |L4.110|
00006e  f1020201          ADD      r2,r2,#1              ;262
000072  f88c2001          STRB     r2,[r12,#1]           ;262
000076  f1a30301          SUB      r3,r3,#1              ;262
00007a  f8a83000          STRH     r3,[r8,#0]
00007e  e007              B        |L4.144|
                  |L4.128|
000080  f1a20201          SUB      r2,r2,#1              ;263
000084  f88c2001          STRB     r2,[r12,#1]           ;263
000088  f1030301          ADD      r3,r3,#1              ;264
00008c  f8a83000          STRH     r3,[r8,#0]            ;263
                  |L4.144|
000090  2214              MOVS     r2,#0x14              ;263
000092  4251              RSBS     r1,r2,#0
000094  4846              LDR      r0,|L4.432|
000096  f7fffffe          BL       gran
                  |L4.154|
00009a  7820              LDRB     r0,[r4,#0]            ;268  ; ica_timer_cnt
00009c  f8df8114          LDR      r8,|L4.436|
0000a0  4f45              LDR      r7,|L4.440|
0000a2  2808              CMP      r0,#8                 ;271
0000a4  d125              BNE      |L4.242|
0000a6  8830              LDRH     r0,[r6,#0]            ;272  ; ICA_EN
0000a8  2801              CMP      r0,#1                 ;272
0000aa  d122              BNE      |L4.242|
0000ac  f8b80000          LDRH     r0,[r8,#0]            ;272  ; ICA_MODBUS_ADDRESS
0000b0  f88d0000          STRB     r0,[sp,#0]            ;275
0000b4  f04f0004          MOV      r0,#4                 ;276
0000b8  f88d0001          STRB     r0,[sp,#1]            ;276
0000bc  f88d5002          STRB     r5,[sp,#2]            ;276
0000c0  f04f0002          MOV      r0,#2                 ;279
0000c4  f88d0003          STRB     r0,[sp,#3]            ;279
0000c8  f88d5004          STRB     r5,[sp,#4]            ;279
0000cc  f04f0001          MOV      r0,#1                 ;281
0000d0  f88d0005          STRB     r0,[sp,#5]            ;282
0000d4  f04f0106          MOV      r1,#6                 ;283
0000d8  4668              MOV      r0,sp                 ;283
0000da  f7fffffe          BL       CRC16_2
0000de  f88d0006          STRB     r0,[sp,#6]            ;290
0000e2  ea4f2020          ASR      r0,r0,#8              ;290
0000e6  f88d0007          STRB     r0,[sp,#7]            ;290
0000ea  f9b70000          LDRSH    r0,[r7,#0]            ;290  ; ICA_CH
0000ee  b3e8              CBZ      r0,|L4.364|
0000f0  2801              CMP      r0,#1                 ;292
                  |L4.242|
0000f2  4832              LDR      r0,|L4.444|
0000f4  f06f0214          MVN      r2,#0x14              ;292
0000f8  f9b00000          LDRSH    r0,[r0,#0]            ;293  ; TBAT
0000fc  ebc01100          RSB      r1,r0,r0,LSL #4       ;293
000100  eb020181          ADD      r1,r2,r1,LSL #2       ;293
000104  4a2e              LDR      r2,|L4.448|
000106  f9b22040          LDRSH    r2,[r2,#0x40]         ;294  ; main_kb_cnt
00010a  4291              CMP      r1,r2                 ;294
00010c  d134              BNE      |L4.376|
00010e  8831              LDRH     r1,[r6,#0]            ;296  ; ICA_EN
000110  2901              CMP      r1,#1                 ;296
000112  d131              BNE      |L4.376|
000114  f8b81000          LDRH     r1,[r8,#0]            ;297  ; ICA_MODBUS_ADDRESS
000118  f88d1000          STRB     r1,[sp,#0]            ;297
00011c  f04f0106          MOV      r1,#6                 ;298
000120  f88d1001          STRB     r1,[sp,#1]            ;298
000124  f88d5002          STRB     r5,[sp,#2]            ;300
000128  f04f011e          MOV      r1,#0x1e              ;301
00012c  f88d1003          STRB     r1,[sp,#3]            ;301
000130  ea4f71e0          ASR      r1,r0,#31             ;302
000134  eb006111          ADD      r1,r0,r1,LSR #24      ;302
000138  ea4f2221          ASR      r2,r1,#8              ;304
00013c  f88d2004          STRB     r2,[sp,#4]            ;305
000140  f88d0005          STRB     r0,[sp,#5]            ;305
000144  f04f0106          MOV      r1,#6                 ;305
000148  4668              MOV      r0,sp                 ;307
00014a  f7fffffe          BL       CRC16_2
00014e  f88d0006          STRB     r0,[sp,#6]            ;308
000152  ea4f2020          ASR      r0,r0,#8              ;308
000156  f88d0007          STRB     r0,[sp,#7]            ;309
00015a  8838              LDRH     r0,[r7,#0]            ;311  ; ICA_CH
00015c  2800              CMP      r0,#0                 ;311
00015e  d10b              BNE      |L4.376|
000160  4604              MOV      r4,r0                 ;312
000162  466d              MOV      r5,sp                 ;312
                  |L4.356|
000164  5d28              LDRB     r0,[r5,r4]            ;312
000166  f7fffffe          BL       putchar_sc16is700
00016a  e000              B        |L4.366|
                  |L4.364|
00016c  e007              B        |L4.382|
                  |L4.366|
00016e  f1040401          ADD      r4,r4,#1              ;315
000172  b2e4              UXTB     r4,r4                 ;316
000174  2c08              CMP      r4,#8                 ;316
000176  d3f5              BCC      |L4.356|
                  |L4.376|
000178  b005              ADD      sp,sp,#0x14           ;316
00017a  e8bd83f0          POP      {r4-r9,pc}            ;316
                  |L4.382|
00017e  f04f0400          MOV      r4,#0                 ;317
000182  46e9              MOV      r9,sp                 ;319
                  |L4.388|
000184  f8190004          LDRB     r0,[r9,r4]            ;319
000188  f7fffffe          BL       putchar_sc16is700
00018c  f1040401          ADD      r4,r4,#1              ;320
000190  b2e4              UXTB     r4,r4                 ;320
000192  2c08              CMP      r4,#8
000194  d3f6              BCC      |L4.388|
000196  e7ac              B        |L4.242|
;;;325    
                          ENDP

                  |L4.408|
                          DCD      ica_timer_cnt
                  |L4.412|
                          DCD      ICA_EN
                  |L4.416|
                          DCD      ica_plazma
                  |L4.420|
                          DCD      bps_I
                  |L4.424|
                          DCD      ica_my_current
                  |L4.428|
                          DCD      ica_your_current
                  |L4.432|
                          DCD      ica_u_necc
                  |L4.436|
                          DCD      ICA_MODBUS_ADDRESS
                  |L4.440|
                          DCD      ICA_CH
                  |L4.444|
                          DCD      TBAT
                  |L4.448|
                          DCD      ||area_number.23||

                          AREA ||area_number.5||, CODE, READONLY, ALIGN=2

                          EXPORTAS ||area_number.5||, ||.text||
                  inv_drv PROC
;;;249    //-----------------------------------------------
;;;250    void ke_start(char in)
000000  b570              PUSH     {r4-r6,lr}
;;;251    {          
000002  4604              MOV      r4,r0
000004  f04f0207          MOV      r2,#7
;;;252    ke_start_stat=(enum_ke_start_stat)0;		 
000008  f04f0101          MOV      r1,#1
00000c  48a4              LDR      r0,|L5.672|
;;;253    
;;;254    if(spc_stat==spcVZ)ke_start_stat=kssNOT_VZ;
00000e  f7fffffe          BL       gran_char
000012  48a4              LDR      r0,|L5.676|
000014  eb040144          ADD      r1,r4,r4,LSL #1
;;;255    #ifndef UKU_220_IPS_TERMOKOMPENSAT
;;;256    else if(BAT_IS_ON[in]!=bisON)ke_start_stat=kssNOT_BAT;
;;;257    #endif
;;;258    else if(bat[in]._av&(1<<0))ke_start_stat=kssNOT_BAT_AV;
000018  eb001541          ADD      r5,r0,r1,LSL #5
00001c  f8950047          LDRB     r0,[r5,#0x47]
000020  f8951046          LDRB     r1,[r5,#0x46]
000024  ea800001          EOR      r0,r0,r1
000028  4a9f              LDR      r2,|L5.680|
00002a  b100              CBZ      r0,|L5.46|
00002c  7050              STRB     r0,[r2,#1]
                  |L5.46|
00002e  ea010100          AND      r1,r1,r0
000032  b101              CBZ      r1,|L5.54|
;;;259    else if(bat[in]._temper_stat&(1<<1))ke_start_stat=kssNOT_BAT_AV_T;
;;;260    else if(bat[in]._av&(1<<1))ke_start_stat=kssNOT_BAT_AV_ASS;
;;;261    else if(bat[in]._Ib>IKB)ke_start_stat=kssNOT_BAT_ZAR;
;;;262    else if(bat[in]._Ib<-IKB)ke_start_stat=kssNOT_BAT_RAZR;
;;;263    else if((spc_stat==spcKE)&&(spc_bat==0))ke_start_stat=kssNOT_KE1;
;;;264    else if((spc_stat==spcKE)&&(spc_bat==1))ke_start_stat=kssNOT_KE2;
;;;265    else 
;;;266    	{
;;;267    
;;;268    	ke_start_stat=kssYES;
;;;269    
;;;270    	spc_stat=spcKE;
;;;271    	__ee_spc_stat=spcKE;
;;;272    	lc640_write_int(EE_SPC_STAT,__ee_spc_stat);
;;;273    	
;;;274    	spc_bat=in;
;;;275    	__ee_spc_bat=in;
;;;276    	lc640_write_int(EE_SPC_BAT,__ee_spc_bat);
;;;277    
;;;278    	bat[in]._zar_cnt_ke=0;
;;;279    	lc640_write_int(ADR_EE_BAT_ZAR_CNT_KE[in],0);
;;;280    	
;;;281    	spc_phase=0;
;;;282    	__ee_spc_phase=0;
;;;283    	lc640_write_int(EE_SPC_PHASE,__ee_spc_phase);
;;;284    
;;;285    	//ke_mem_hndl(in,lc640_read_int(ADR_EE_BAT_ZAR_CNT_KE[spc_bat]));
;;;286    
;;;287    		{					
;;;288    		signed short temp_temp;
;;;289    		signed char temp;
;;;290    		temp_temp=bat[in]._u_old[((bat_u_old_cnt+1)&0x07)]; 
;;;291    		    
;;;292    		temp=LPC_RTC->YEAR;
;;;293    		gran_char(&temp,1,99);
;;;294    		*((char*)(&(ke_date[0])))=temp;
;;;295    			
;;;296    		temp=LPC_RTC->MONTH;
;;;297    		gran_char(&temp,1,12);
;;;298    		*(((char*)(&(ke_date[0])))+1)=temp;
;;;299    		
;;;300    		temp=LPC_RTC->DOM;
;;;301    		gran_char(&temp,1,31);
;;;302    		*(((char*)(&(ke_date[0])))+2)=temp;			
;;;303    				
;;;304    		*(((char*)(&(ke_date[0])))+3)=*((char*)&temp_temp);
;;;305    		lc640_write_long(EE_SPC_KE_DATE0,ke_date[0]);
;;;306    
;;;307    		temp=LPC_RTC->HOUR;
;;;308    		gran_char(&temp,0,23);
;;;309    		*((char*)(&(ke_date[1])))=temp;
;;;310                   
;;;311    		temp=LPC_RTC->MIN;
;;;312    		gran_char(&temp,0,59);
;;;313    		*(((char*)(&(ke_date[1])))+1)=temp;
;;;314    	          
;;;315    		temp=LPC_RTC->SEC;
;;;316    		gran_char(&temp,0,59);
;;;317    		*(((char*)(&(ke_date[1])))+2)=temp;
;;;318    			
;;;319    		*(((char*)(&(ke_date[1])))+3)=*(((char*)&temp_temp)+1);
;;;320    		lc640_write_long(EE_SPC_KE_DATE1,ke_date[1]);
;;;321    		}
;;;322    
;;;323    	}
;;;324    }
000034  7091              STRB     r1,[r2,#2]
                  |L5.54|
000036  ea000301          AND      r3,r0,r1
00003a  07db              LSLS     r3,r3,#31
00003c  d027              BEQ      |L5.142|
00003e  78d0              LDRB     r0,[r2,#3]            ;259  ; plazma_inv
000040  f1000001          ADD      r0,r0,#1              ;259
000044  70d0              STRB     r0,[r2,#3]            ;259
000046  b134              CBZ      r4,|L5.86|
000048  2c01              CMP      r4,#1                 ;259
00004a  d00b              BEQ      |L5.100|
00004c  2c02              CMP      r4,#2                 ;260
00004e  d010              BEQ      |L5.114|
000050  2c03              CMP      r4,#3                 ;260
000052  d015              BEQ      |L5.128|
000054  e120              B        |L5.664|
                  |L5.86|
000056  2301              MOVS     r3,#1
000058  461a              MOV      r2,r3                 ;261
00005a  210e              MOVS     r1,#0xe               ;261
00005c  a093              ADR      r0,|L5.684|
00005e  f7fffffe          BL       snmp_trap_send
000062  e119              B        |L5.664|
                  |L5.100|
000064  2301              MOVS     r3,#1                 ;261
000066  2202              MOVS     r2,#2                 ;261
000068  210e              MOVS     r1,#0xe               ;261
00006a  a097              ADR      r0,|L5.712|
00006c  f7fffffe          BL       snmp_trap_send
000070  e112              B        |L5.664|
                  |L5.114|
000072  2301              MOVS     r3,#1                 ;262
000074  2203              MOVS     r2,#3                 ;262
000076  210e              MOVS     r1,#0xe               ;262
000078  a09a              ADR      r0,|L5.740|
00007a  f7fffffe          BL       snmp_trap_send
00007e  e10b              B        |L5.664|
                  |L5.128|
000080  2301              MOVS     r3,#1                 ;263
000082  2204              MOVS     r2,#4                 ;263
000084  210e              MOVS     r1,#0xe               ;263
000086  a09e              ADR      r0,|L5.768|
000088  f7fffffe          BL       snmp_trap_send
00008c  e104              B        |L5.664|
                  |L5.142|
00008e  0783              LSLS     r3,r0,#30             ;263
000090  d529              BPL      |L5.230|
000092  078b              LSLS     r3,r1,#30
000094  d527              BPL      |L5.230|
000096  78d0              LDRB     r0,[r2,#3]            ;264  ; plazma_inv
000098  f1000001          ADD      r0,r0,#1              ;268
00009c  70d0              STRB     r0,[r2,#3]            ;268
00009e  b134              CBZ      r4,|L5.174|
0000a0  2c01              CMP      r4,#1                 ;271
0000a2  d00b              BEQ      |L5.188|
0000a4  2c02              CMP      r4,#2                 ;272
0000a6  d010              BEQ      |L5.202|
0000a8  2c03              CMP      r4,#3                 ;272
0000aa  d015              BEQ      |L5.216|
0000ac  e0f4              B        |L5.664|
                  |L5.174|
0000ae  2302              MOVS     r3,#2                 ;274
0000b0  2201              MOVS     r2,#1                 ;275
0000b2  210e              MOVS     r1,#0xe               ;275
0000b4  a099              ADR      r0,|L5.796|
0000b6  f7fffffe          BL       snmp_trap_send
0000ba  e0ed              B        |L5.664|
                  |L5.188|
0000bc  2302              MOVS     r3,#2                 ;276
0000be  461a              MOV      r2,r3                 ;278
0000c0  210e              MOVS     r1,#0xe               ;279
0000c2  a09d              ADR      r0,|L5.824|
0000c4  f7fffffe          BL       snmp_trap_send
0000c8  e0e6              B        |L5.664|
                  |L5.202|
0000ca  2302              MOVS     r3,#2                 ;279
0000cc  2203              MOVS     r2,#3                 ;281
0000ce  210e              MOVS     r1,#0xe               ;282
0000d0  a0a0              ADR      r0,|L5.852|
0000d2  f7fffffe          BL       snmp_trap_send
0000d6  e0df              B        |L5.664|
                  |L5.216|
0000d8  2302              MOVS     r3,#2                 ;283
0000da  2204              MOVS     r2,#4                 ;283
0000dc  210e              MOVS     r1,#0xe               ;290
0000de  a0a4              ADR      r0,|L5.880|
0000e0  f7fffffe          BL       snmp_trap_send
0000e4  e0d8              B        |L5.664|
                  |L5.230|
0000e6  0743              LSLS     r3,r0,#29             ;290
0000e8  d529              BPL      |L5.318|
0000ea  074b              LSLS     r3,r1,#29             ;290
0000ec  d527              BPL      |L5.318|
0000ee  78d0              LDRB     r0,[r2,#3]            ;290  ; plazma_inv
0000f0  f1000001          ADD      r0,r0,#1              ;292
0000f4  70d0              STRB     r0,[r2,#3]            ;292
0000f6  b134              CBZ      r4,|L5.262|
0000f8  2c01              CMP      r4,#1                 ;293
0000fa  d00b              BEQ      |L5.276|
0000fc  2c02              CMP      r4,#2                 ;293
0000fe  d010              BEQ      |L5.290|
000100  2c03              CMP      r4,#3                 ;293
000102  d015              BEQ      |L5.304|
000104  e0c8              B        |L5.664|
                  |L5.262|
000106  2303              MOVS     r3,#3                 ;294
000108  2201              MOVS     r2,#1                 ;294
00010a  210e              MOVS     r1,#0xe               ;294
00010c  a09f              ADR      r0,|L5.908|
00010e  f7fffffe          BL       snmp_trap_send
000112  e0c1              B        |L5.664|
                  |L5.276|
000114  2303              MOVS     r3,#3                 ;297
000116  2202              MOVS     r2,#2                 ;297
000118  210e              MOVS     r1,#0xe               ;297
00011a  a0a3              ADR      r0,|L5.936|
00011c  f7fffffe          BL       snmp_trap_send
000120  e0ba              B        |L5.664|
                  |L5.290|
000122  2303              MOVS     r3,#3                 ;300
000124  461a              MOV      r2,r3                 ;300
000126  210e              MOVS     r1,#0xe               ;301
000128  a0a6              ADR      r0,|L5.964|
00012a  f7fffffe          BL       snmp_trap_send
00012e  e0b3              B        |L5.664|
                  |L5.304|
000130  2303              MOVS     r3,#3                 ;302
000132  2204              MOVS     r2,#4                 ;302
000134  210e              MOVS     r1,#0xe               ;302
000136  a0aa              ADR      r0,|L5.992|
000138  f7fffffe          BL       snmp_trap_send
00013c  e0ac              B        |L5.664|
                  |L5.318|
00013e  0703              LSLS     r3,r0,#28             ;305
000140  d529              BPL      |L5.406|
000142  070b              LSLS     r3,r1,#28             ;305
000144  d527              BPL      |L5.406|
000146  78d0              LDRB     r0,[r2,#3]            ;307  ; plazma_inv
000148  f1000001          ADD      r0,r0,#1              ;307
00014c  70d0              STRB     r0,[r2,#3]            ;308
00014e  b134              CBZ      r4,|L5.350|
000150  2c01              CMP      r4,#1                 ;308
000152  d00b              BEQ      |L5.364|
000154  2c02              CMP      r4,#2                 ;309
000156  d010              BEQ      |L5.378|
000158  2c03              CMP      r4,#3                 ;309
00015a  d015              BEQ      |L5.392|
00015c  e09c              B        |L5.664|
                  |L5.350|
00015e  2304              MOVS     r3,#4                 ;312
000160  2201              MOVS     r2,#1                 ;312
000162  210e              MOVS     r1,#0xe               ;312
000164  a0a5              ADR      r0,|L5.1020|
000166  f7fffffe          BL       snmp_trap_send
00016a  e095              B        |L5.664|
                  |L5.364|
00016c  2304              MOVS     r3,#4                 ;313
00016e  2202              MOVS     r2,#2                 ;315
000170  210e              MOVS     r1,#0xe               ;315
000172  a0ab              ADR      r0,|L5.1056|
000174  f7fffffe          BL       snmp_trap_send
000178  e08e              B        |L5.664|
                  |L5.378|
00017a  2304              MOVS     r3,#4                 ;316
00017c  2203              MOVS     r2,#3                 ;317
00017e  210e              MOVS     r1,#0xe               ;317
000180  a0b0              ADR      r0,|L5.1092|
000182  f7fffffe          BL       snmp_trap_send
000186  e087              B        |L5.664|
                  |L5.392|
000188  2304              MOVS     r3,#4                 ;320
00018a  461a              MOV      r2,r3                 ;320
00018c  210e              MOVS     r1,#0xe               ;320
00018e  a0b6              ADR      r0,|L5.1128|
000190  f7fffffe          BL       snmp_trap_send
000194  e080              B        |L5.664|
                  |L5.406|
000196  06c3              LSLS     r3,r0,#27             ;264
000198  d529              BPL      |L5.494|
00019a  06cb              LSLS     r3,r1,#27             ;264
00019c  d527              BPL      |L5.494|
00019e  78d0              LDRB     r0,[r2,#3]  ; plazma_inv
0001a0  f1000001          ADD      r0,r0,#1
0001a4  70d0              STRB     r0,[r2,#3]
0001a6  b134              CBZ      r4,|L5.438|
0001a8  2c01              CMP      r4,#1
0001aa  d00b              BEQ      |L5.452|
0001ac  2c02              CMP      r4,#2
0001ae  d010              BEQ      |L5.466|
0001b0  2c03              CMP      r4,#3
0001b2  d015              BEQ      |L5.480|
0001b4  e070              B        |L5.664|
                  |L5.438|
0001b6  2305              MOVS     r3,#5
0001b8  2201              MOVS     r2,#1
0001ba  210e              MOVS     r1,#0xe
0001bc  a0b3              ADR      r0,|L5.1164|
0001be  f7fffffe          BL       snmp_trap_send
0001c2  e069              B        |L5.664|
                  |L5.452|
0001c4  2305              MOVS     r3,#5
0001c6  2202              MOVS     r2,#2
0001c8  210e              MOVS     r1,#0xe
0001ca  a0b9              ADR      r0,|L5.1200|
0001cc  f7fffffe          BL       snmp_trap_send
0001d0  e062              B        |L5.664|
                  |L5.466|
0001d2  2305              MOVS     r3,#5
0001d4  2203              MOVS     r2,#3
0001d6  210e              MOVS     r1,#0xe
0001d8  a0be              ADR      r0,|L5.1236|
0001da  f7fffffe          BL       snmp_trap_send
0001de  e05b              B        |L5.664|
                  |L5.480|
0001e0  2305              MOVS     r3,#5
0001e2  2204              MOVS     r2,#4
0001e4  210e              MOVS     r1,#0xe
0001e6  a0c4              ADR      r0,|L5.1272|
0001e8  f7fffffe          BL       snmp_trap_send
0001ec  e054              B        |L5.664|
                  |L5.494|
0001ee  0683              LSLS     r3,r0,#26
0001f0  d529              BPL      |L5.582|
0001f2  068b              LSLS     r3,r1,#26
0001f4  d527              BPL      |L5.582|
0001f6  78d0              LDRB     r0,[r2,#3]  ; plazma_inv
0001f8  f1000001          ADD      r0,r0,#1
0001fc  70d0              STRB     r0,[r2,#3]
0001fe  b134              CBZ      r4,|L5.526|
000200  2c01              CMP      r4,#1
000202  d00b              BEQ      |L5.540|
000204  2c02              CMP      r4,#2
000206  d010              BEQ      |L5.554|
000208  2c03              CMP      r4,#3
00020a  d015              BEQ      |L5.568|
00020c  e044              B        |L5.664|
                  |L5.526|
00020e  2306              MOVS     r3,#6
000210  2201              MOVS     r2,#1
000212  210e              MOVS     r1,#0xe
000214  a0c1              ADR      r0,|L5.1308|
000216  f7fffffe          BL       snmp_trap_send
00021a  e03d              B        |L5.664|
                  |L5.540|
00021c  2306              MOVS     r3,#6
00021e  2202              MOVS     r2,#2
000220  210e              MOVS     r1,#0xe
000222  a0c7              ADR      r0,|L5.1344|
000224  f7fffffe          BL       snmp_trap_send
000228  e036              B        |L5.664|
                  |L5.554|
00022a  2306              MOVS     r3,#6
00022c  2203              MOVS     r2,#3
00022e  210e              MOVS     r1,#0xe
000230  a0cc              ADR      r0,|L5.1380|
000232  f7fffffe          BL       snmp_trap_send
000236  e02f              B        |L5.664|
                  |L5.568|
000238  2306              MOVS     r3,#6
00023a  2204              MOVS     r2,#4
00023c  210e              MOVS     r1,#0xe
00023e  a0d2              ADR      r0,|L5.1416|
000240  f7fffffe          BL       snmp_trap_send
000244  e028              B        |L5.664|
                  |L5.582|
000246  b300              CBZ      r0,|L5.650|
000248  b9f9              CBNZ     r1,|L5.650|
00024a  78d0              LDRB     r0,[r2,#3]  ; plazma_inv
00024c  f1000001          ADD      r0,r0,#1
000250  70d0              STRB     r0,[r2,#3]
000252  b134              CBZ      r4,|L5.610|
000254  2c01              CMP      r4,#1
000256  d00b              BEQ      |L5.624|
000258  2c02              CMP      r4,#2
00025a  d010              BEQ      |L5.638|
00025c  2c03              CMP      r4,#3
00025e  d015              BEQ      |L5.652|
000260  e01a              B        |L5.664|
                  |L5.610|
000262  2300              MOVS     r3,#0
000264  2201              MOVS     r2,#1
000266  210e              MOVS     r1,#0xe
000268  a0d0              ADR      r0,|L5.1452|
00026a  f7fffffe          BL       snmp_trap_send
00026e  e013              B        |L5.664|
                  |L5.624|
000270  2300              MOVS     r3,#0
000272  2202              MOVS     r2,#2
000274  210e              MOVS     r1,#0xe
000276  a0d2              ADR      r0,|L5.1472|
000278  f7fffffe          BL       snmp_trap_send
00027c  e00c              B        |L5.664|
                  |L5.638|
00027e  2300              MOVS     r3,#0
000280  2203              MOVS     r2,#3
000282  210e              MOVS     r1,#0xe
000284  a0d3              ADR      r0,|L5.1492|
000286  f7fffffe          BL       snmp_trap_send
                  |L5.650|
00028a  e005              B        |L5.664|
                  |L5.652|
00028c  2300              MOVS     r3,#0
00028e  2204              MOVS     r2,#4
000290  210e              MOVS     r1,#0xe
000292  a0d5              ADR      r0,|L5.1512|
000294  f7fffffe          BL       snmp_trap_send
                  |L5.664|
000298  f8150f46          LDRB     r0,[r5,#0x46]!
00029c  7068              STRB     r0,[r5,#1]
00029e  bd70              POP      {r4-r6,pc}
;;;325    
                          ENDP

                  |L5.672|
                          DCD      first_inv_slot
                  |L5.676|
                          DCD      inv
                  |L5.680|
                          DCD      ||area_number.23||+0x90
                  |L5.684|
0002ac  496e7665          DCB      "Invertor #1 Alarm, overload",0
0002b0  72746f72
0002b4  20233120
0002b8  416c6172
0002bc  6d2c206f
0002c0  7665726c
0002c4  6f616400
                  |L5.712|
0002c8  496e7665          DCB      "Invertor #2 Alarm, overload",0
0002cc  72746f72
0002d0  20233220
0002d4  416c6172
0002d8  6d2c206f
0002dc  7665726c
0002e0  6f616400
                  |L5.740|
0002e4  496e7665          DCB      "Invertor #3 Alarm, overload",0
0002e8  72746f72
0002ec  20233320
0002f0  416c6172
0002f4  6d2c206f
0002f8  7665726c
0002fc  6f616400
                  |L5.768|
000300  496e7665          DCB      "Invertor #4 Alarm, overload",0
000304  72746f72
000308  20233420
00030c  416c6172
000310  6d2c206f
000314  7665726c
000318  6f616400
                  |L5.796|
00031c  496e7665          DCB      "Invertor #1 Alarm, overheat",0
000320  72746f72
000324  20233120
000328  416c6172
00032c  6d2c206f
000330  76657268
000334  65617400
                  |L5.824|
000338  496e7665          DCB      "Invertor #2 Alarm, overheat",0
00033c  72746f72
000340  20233220
000344  416c6172
000348  6d2c206f
00034c  76657268
000350  65617400
                  |L5.852|
000354  496e7665          DCB      "Invertor #3 Alarm, overheat",0
000358  72746f72
00035c  20233320
000360  416c6172
000364  6d2c206f
000368  76657268
00036c  65617400
                  |L5.880|
000370  496e7665          DCB      "Invertor #4 Alarm, overheat",0
000374  72746f72
000378  20233420
00037c  416c6172
000380  6d2c206f
000384  76657268
000388  65617400
                  |L5.908|
00038c  496e7665          DCB      "Invertor #1 Alarm, is warm",0
000390  72746f72
000394  20233120
000398  416c6172
00039c  6d2c2069
0003a0  73207761
0003a4  726d00  
0003a7  00                DCB      0
                  |L5.936|
0003a8  496e7665          DCB      "Invertor #2 Alarm, is warm",0
0003ac  72746f72
0003b0  20233220
0003b4  416c6172
0003b8  6d2c2069
0003bc  73207761
0003c0  726d00  
0003c3  00                DCB      0
                  |L5.964|
0003c4  496e7665          DCB      "Invertor #3 Alarm, is warm",0
0003c8  72746f72
0003cc  20233320
0003d0  416c6172
0003d4  6d2c2069
0003d8  73207761
0003dc  726d00  
0003df  00                DCB      0
                  |L5.992|
0003e0  496e7665          DCB      "Invertor #4 Alarm, is warm",0
0003e4  72746f72
0003e8  20233420
0003ec  416c6172
0003f0  6d2c2069
0003f4  73207761
0003f8  726d00  
0003fb  00                DCB      0
                  |L5.1020|
0003fc  496e7665          DCB      "Invertor #1 Alarm, voltage is up",0
000400  72746f72
000404  20233120
000408  416c6172
00040c  6d2c2076
000410  6f6c7461
000414  67652069
000418  73207570
00041c  00      
00041d  00                DCB      0
00041e  00                DCB      0
00041f  00                DCB      0
                  |L5.1056|
000420  496e7665          DCB      "Invertor #2 Alarm, voltage is up",0
000424  72746f72
000428  20233220
00042c  416c6172
000430  6d2c2076
000434  6f6c7461
000438  67652069
00043c  73207570
000440  00      
000441  00                DCB      0
000442  00                DCB      0
000443  00                DCB      0
                  |L5.1092|
000444  496e7665          DCB      "Invertor #3 Alarm, voltage is up",0
000448  72746f72
00044c  20233320
000450  416c6172
000454  6d2c2076
000458  6f6c7461
00045c  67652069
000460  73207570
000464  00      
000465  00                DCB      0
000466  00                DCB      0
000467  00                DCB      0
                  |L5.1128|
000468  496e7665          DCB      "Invertor #4 Alarm, voltage is up",0
00046c  72746f72
000470  20233420
000474  416c6172
000478  6d2c2076
00047c  6f6c7461
000480  67652069
000484  73207570
000488  00      
000489  00                DCB      0
00048a  00                DCB      0
00048b  00                DCB      0
                  |L5.1164|
00048c  496e7665          DCB      "Invertor #1 Alarm, voltage is down",0
000490  72746f72
000494  20233120
000498  416c6172
00049c  6d2c2076
0004a0  6f6c7461
0004a4  67652069
0004a8  7320646f
0004ac  776e00  
0004af  00                DCB      0
                  |L5.1200|
0004b0  496e7665          DCB      "Invertor #2 Alarm, voltage is down",0
0004b4  72746f72
0004b8  20233220
0004bc  416c6172
0004c0  6d2c2076
0004c4  6f6c7461
0004c8  67652069
0004cc  7320646f
0004d0  776e00  
0004d3  00                DCB      0
                  |L5.1236|
0004d4  496e7665          DCB      "Invertor #3 Alarm, voltage is down",0
0004d8  72746f72
0004dc  20233320
0004e0  416c6172
0004e4  6d2c2076
0004e8  6f6c7461
0004ec  67652069
0004f0  7320646f
0004f4  776e00  
0004f7  00                DCB      0
                  |L5.1272|
0004f8  496e7665          DCB      "Invertor #4 Alarm, voltage is down",0
0004fc  72746f72
000500  20233420
000504  416c6172
000508  6d2c2076
00050c  6f6c7461
000510  67652069
000514  7320646f
000518  776e00  
00051b  00                DCB      0
                  |L5.1308|
00051c  496e7665          DCB      "Invertor #1 Alarm, output is offed",0
000520  72746f72
000524  20233120
000528  416c6172
00052c  6d2c206f
000530  75747075
000534  74206973
000538  206f6666
00053c  656400  
00053f  00                DCB      0
                  |L5.1344|
000540  496e7665          DCB      "Invertor #2 Alarm, output is offed",0
000544  72746f72
000548  20233220
00054c  416c6172
000550  6d2c206f
000554  75747075
000558  74206973
00055c  206f6666
000560  656400  
000563  00                DCB      0
                  |L5.1380|
000564  496e7665          DCB      "Invertor #3 Alarm, output is offed",0
000568  72746f72
00056c  20233320
000570  416c6172
000574  6d2c206f
000578  75747075
00057c  74206973
000580  206f6666
000584  656400  
000587  00                DCB      0
                  |L5.1416|
000588  496e7665          DCB      "Invertor #4 Alarm, output is offed",0
00058c  72746f72
000590  20233420
000594  416c6172
000598  6d2c206f
00059c  75747075
0005a0  74206973
0005a4  206f6666
0005a8  656400  
0005ab  00                DCB      0
                  |L5.1452|
0005ac  496e7665          DCB      "Invertor #1 is norm",0
0005b0  72746f72
0005b4  20233120
0005b8  6973206e
0005bc  6f726d00
                  |L5.1472|
0005c0  496e7665          DCB      "Invertor #2 is norm",0
0005c4  72746f72
0005c8  20233220
0005cc  6973206e
0005d0  6f726d00
                  |L5.1492|
0005d4  496e7665          DCB      "Invertor #3 is norm",0
0005d8  72746f72
0005dc  20233320
0005e0  6973206e
0005e4  6f726d00
                  |L5.1512|
0005e8  496e7665          DCB      "Invertor #4 is norm",0
0005ec  72746f72
0005f0  20233420
0005f4  6973206e
0005f8  6f726d00

                          AREA ||area_number.6||, CODE, READONLY, ALIGN=2

                          EXPORTAS ||area_number.6||, ||.text||
                  klimat_hndl PROC
;;;249    //-----------------------------------------------
;;;250    void ke_start(char in)
000000  e92d41f0          PUSH     {r4-r8,lr}
;;;251    {          
000004  4d66              LDR      r5,|L6.416|
;;;252    ke_start_stat=(enum_ke_start_stat)0;		 
000006  4867              LDR      r0,|L6.420|
000008  4c67              LDR      r4,|L6.424|
00000a  f9b51000          LDRSH    r1,[r5,#0]  ; t_box
;;;253    
;;;254    if(spc_stat==spcVZ)ke_start_stat=kssNOT_VZ;
00000e  f9b02000          LDRSH    r2,[r0,#0]  ; TBOXMAX
000012  f9b40000          LDRSH    r0,[r4,#0]
000016  4291              CMP      r1,r2
;;;255    #ifndef UKU_220_IPS_TERMOKOMPENSAT
;;;256    else if(BAT_IS_ON[in]!=bisON)ke_start_stat=kssNOT_BAT;
;;;257    #endif
;;;258    else if(bat[in]._av&(1<<0))ke_start_stat=kssNOT_BAT_AV;
000018  dd03              BLE      |L6.34|
00001a  f1000001          ADD      r0,r0,#1
00001e  8020              STRH     r0,[r4,#0]
000020  e003              B        |L6.42|
                  |L6.34|
000022  da02              BGE      |L6.42|
000024  f1a00001          SUB      r0,r0,#1
000028  8020              STRH     r0,[r4,#0]
                  |L6.42|
00002a  2206              MOVS     r2,#6
00002c  2100              MOVS     r1,#0
00002e  485e              LDR      r0,|L6.424|
000030  f7fffffe          BL       gran
;;;259    else if(bat[in]._temper_stat&(1<<1))ke_start_stat=kssNOT_BAT_AV_T;
;;;260    else if(bat[in]._av&(1<<1))ke_start_stat=kssNOT_BAT_AV_ASS;
;;;261    else if(bat[in]._Ib>IKB)ke_start_stat=kssNOT_BAT_ZAR;
;;;262    else if(bat[in]._Ib<-IKB)ke_start_stat=kssNOT_BAT_RAZR;
;;;263    else if((spc_stat==spcKE)&&(spc_bat==0))ke_start_stat=kssNOT_KE1;
;;;264    else if((spc_stat==spcKE)&&(spc_bat==1))ke_start_stat=kssNOT_KE2;
;;;265    else 
;;;266    	{
;;;267    
;;;268    	ke_start_stat=kssYES;
;;;269    
;;;270    	spc_stat=spcKE;
;;;271    	__ee_spc_stat=spcKE;
;;;272    	lc640_write_int(EE_SPC_STAT,__ee_spc_stat);
;;;273    	
;;;274    	spc_bat=in;
;;;275    	__ee_spc_bat=in;
;;;276    	lc640_write_int(EE_SPC_BAT,__ee_spc_bat);
;;;277    
;;;278    	bat[in]._zar_cnt_ke=0;
;;;279    	lc640_write_int(ADR_EE_BAT_ZAR_CNT_KE[in],0);
;;;280    	
;;;281    	spc_phase=0;
;;;282    	__ee_spc_phase=0;
;;;283    	lc640_write_int(EE_SPC_PHASE,__ee_spc_phase);
;;;284    
;;;285    	//ke_mem_hndl(in,lc640_read_int(ADR_EE_BAT_ZAR_CNT_KE[spc_bat]));
;;;286    
;;;287    		{					
;;;288    		signed short temp_temp;
;;;289    		signed char temp;
;;;290    		temp_temp=bat[in]._u_old[((bat_u_old_cnt+1)&0x07)]; 
;;;291    		    
;;;292    		temp=LPC_RTC->YEAR;
;;;293    		gran_char(&temp,1,99);
;;;294    		*((char*)(&(ke_date[0])))=temp;
;;;295    			
;;;296    		temp=LPC_RTC->MONTH;
;;;297    		gran_char(&temp,1,12);
;;;298    		*(((char*)(&(ke_date[0])))+1)=temp;
;;;299    		
;;;300    		temp=LPC_RTC->DOM;
;;;301    		gran_char(&temp,1,31);
;;;302    		*(((char*)(&(ke_date[0])))+2)=temp;			
;;;303    				
;;;304    		*(((char*)(&(ke_date[0])))+3)=*((char*)&temp_temp);
;;;305    		lc640_write_long(EE_SPC_KE_DATE0,ke_date[0]);
;;;306    
;;;307    		temp=LPC_RTC->HOUR;
;;;308    		gran_char(&temp,0,23);
;;;309    		*((char*)(&(ke_date[1])))=temp;
;;;310                   
;;;311    		temp=LPC_RTC->MIN;
;;;312    		gran_char(&temp,0,59);
;;;313    		*(((char*)(&(ke_date[1])))+1)=temp;
;;;314    	          
;;;315    		temp=LPC_RTC->SEC;
;;;316    		gran_char(&temp,0,59);
;;;317    		*(((char*)(&(ke_date[1])))+2)=temp;
;;;318    			
;;;319    		*(((char*)(&(ke_date[1])))+3)=*(((char*)&temp_temp)+1);
;;;320    		lc640_write_long(EE_SPC_KE_DATE1,ke_date[1]);
;;;321    		}
;;;322    
;;;323    	}
;;;324    }
000034  f9b40000          LDRSH    r0,[r4,#0]  ; av_tbox_cnt
000038  495c              LDR      r1,|L6.428|
00003a  2601              MOVS     r6,#1
00003c  2805              CMP      r0,#5                 ;259
00003e  dd00              BLE      |L6.66|
000040  700e              STRB     r6,[r1,#0]            ;259
                  |L6.66|
000042  2400              MOVS     r4,#0                 ;259
000044  2801              CMP      r0,#1                 ;259
000046  da00              BGE      |L6.74|
000048  700c              STRB     r4,[r1,#0]            ;259
                  |L6.74|
00004a  4959              LDR      r1,|L6.432|
00004c  f9b50000          LDRSH    r0,[r5,#0]            ;260  ; t_box
000050  4a58              LDR      r2,|L6.436|
000052  f9b11000          LDRSH    r1,[r1,#0]            ;260  ; TBOXREG
000056  4f58              LDR      r7,|L6.440|
000058  1e8b              SUBS     r3,r1,#2              ;261
00005a  4298              CMP      r0,r3                 ;261
00005c  da0f              BGE      |L6.126|
00005e  f9921000          LDRSB    r1,[r2,#0]            ;261  ; t_box_cnt
000062  291e              CMP      r1,#0x1e              ;261
000064  da1e              BGE      |L6.164|
000066  f1010101          ADD      r1,r1,#1              ;261
00006a  b249              SXTB     r1,r1                 ;261
00006c  7011              STRB     r1,[r2,#0]
00006e  291e              CMP      r1,#0x1e              ;262
000070  db18              BLT      |L6.164|
000072  8839              LDRH     r1,[r7,#0]            ;262  ; main_vent_pos
000074  f1a10101          SUB      r1,r1,#1              ;262
000078  8039              STRH     r1,[r7,#0]            ;262
00007a  7014              STRB     r4,[r2,#0]
00007c  e012              B        |L6.164|
                  |L6.126|
00007e  4288              CMP      r0,r1                 ;263
000080  dd0f              BLE      |L6.162|
000082  f9921000          LDRSB    r1,[r2,#0]            ;263  ; t_box_cnt
000086  291e              CMP      r1,#0x1e              ;264
000088  da0c              BGE      |L6.164|
00008a  f1010101          ADD      r1,r1,#1              ;264
00008e  b249              SXTB     r1,r1                 ;263
000090  7011              STRB     r1,[r2,#0]            ;263
000092  291e              CMP      r1,#0x1e
000094  db06              BLT      |L6.164|
000096  8839              LDRH     r1,[r7,#0]            ;264  ; main_vent_pos
000098  f1010101          ADD      r1,r1,#1              ;268
00009c  8039              STRH     r1,[r7,#0]            ;268
00009e  7014              STRB     r4,[r2,#0]            ;270
0000a0  e000              B        |L6.164|
                  |L6.162|
0000a2  7014              STRB     r4,[r2,#0]            ;271
                  |L6.164|
0000a4  4945              LDR      r1,|L6.444|
0000a6  f9b11000          LDRSH    r1,[r1,#0]            ;272  ; TBOXVENTMAX
0000aa  4288              CMP      r0,r1                 ;272
0000ac  dd05              BLE      |L6.186|
0000ae  2214              MOVS     r2,#0x14              ;274
0000b0  2100              MOVS     r1,#0                 ;275
0000b2  4841              LDR      r0,|L6.440|
0000b4  f7fffffe          BL       gran
0000b8  e007              B        |L6.202|
                  |L6.186|
0000ba  4841              LDR      r0,|L6.448|
0000bc  2100              MOVS     r1,#0                 ;276
0000be  8800              LDRH     r0,[r0,#0]            ;278  ; pos_vent
0000c0  3009              ADDS     r0,r0,#9              ;279
0000c2  b202              SXTH     r2,r0                 ;279
0000c4  483c              LDR      r0,|L6.440|
0000c6  f7fffffe          BL       gran
                  |L6.202|
0000ca  20f0              MOVS     r0,#0xf0              ;279
0000cc  f7fffffe          BL       mess_find_unvol
0000d0  b128              CBZ      r0,|L6.222|
0000d2  483c              LDR      r0,|L6.452|
0000d4  6801              LDR      r1,[r0,#0]            ;283  ; mess_data
0000d6  29f1              CMP      r1,#0xf1              ;283
0000d8  d101              BNE      |L6.222|
0000da  6840              LDR      r0,[r0,#4]            ;283  ; mess_data
0000dc  8038              STRH     r0,[r7,#0]            ;290
                  |L6.222|
0000de  f9b71000          LDRSH    r1,[r7,#0]            ;290  ; main_vent_pos
0000e2  4839              LDR      r0,|L6.456|
0000e4  2901              CMP      r1,#1                 ;290
0000e6  dc01              BGT      |L6.236|
0000e8  7006              STRB     r6,[r0,#0]            ;290
0000ea  e000              B        |L6.238|
                  |L6.236|
0000ec  7004              STRB     r4,[r0,#0]            ;290
                  |L6.238|
0000ee  4837              LDR      r0,|L6.460|
0000f0  f8df80dc          LDR      r8,|L6.464|
0000f4  f9b00000          LDRSH    r0,[r0,#0]            ;292  ; TBATDISABLE
0000f8  f1a00132          SUB      r1,r0,#0x32           ;293
0000fc  2928              CMP      r1,#0x28              ;293
0000fe  d821              BHI      |L6.324|
000100  f9b51000          LDRSH    r1,[r5,#0]            ;293  ; t_box
000104  4f33              LDR      r7,|L6.468|
000106  4281              CMP      r1,r0                 ;294
000108  dd03              BLE      |L6.274|
00010a  8838              LDRH     r0,[r7,#0]            ;294  ; tbatdisable_cnt
00010c  f1000001          ADD      r0,r0,#1              ;294
000110  8038              STRH     r0,[r7,#0]            ;296
                  |L6.274|
000112  4831              LDR      r0,|L6.472|
000114  f9b00000          LDRSH    r0,[r0,#0]            ;297  ; TBATENABLE
000118  4281              CMP      r1,r0                 ;297
00011a  da03              BGE      |L6.292|
00011c  8838              LDRH     r0,[r7,#0]            ;298  ; tbatdisable_cnt
00011e  f1a00001          SUB      r0,r0,#1              ;298
000122  8038              STRH     r0,[r7,#0]            ;300
                  |L6.292|
000124  2206              MOVS     r2,#6                 ;300
000126  2100              MOVS     r1,#0                 ;301
000128  482a              LDR      r0,|L6.468|
00012a  f7fffffe          BL       gran
00012e  f9b70000          LDRSH    r0,[r7,#0]            ;301  ; tbatdisable_cnt
000132  2805              CMP      r0,#5                 ;302
000134  dd01              BLE      |L6.314|
000136  f8886000          STRB     r6,[r8,#0]            ;304
                  |L6.314|
00013a  2801              CMP      r0,#1                 ;304
00013c  da04              BGE      |L6.328|
00013e  f8884000          STRB     r4,[r8,#0]            ;305
000142  e001              B        |L6.328|
                  |L6.324|
000144  f8884000          STRB     r4,[r8,#0]            ;305
                  |L6.328|
000148  4824              LDR      r0,|L6.476|
00014a  4f25              LDR      r7,|L6.480|
00014c  f9b00000          LDRSH    r0,[r0,#0]            ;308  ; TLOADDISABLE
000150  f1a00132          SUB      r1,r0,#0x32           ;308
000154  291e              CMP      r1,#0x1e              ;309
000156  d820              BHI      |L6.410|
000158  f9b51000          LDRSH    r1,[r5,#0]            ;309  ; t_box
00015c  4d21              LDR      r5,|L6.484|
00015e  4281              CMP      r1,r0                 ;312
000160  dd03              BLE      |L6.362|
000162  8828              LDRH     r0,[r5,#0]            ;312  ; tloaddisable_cnt
000164  f1000001          ADD      r0,r0,#1              ;312
000168  8028              STRH     r0,[r5,#0]            ;313
                  |L6.362|
00016a  481f              LDR      r0,|L6.488|
00016c  f9b00000          LDRSH    r0,[r0,#0]            ;313  ; TLOADENABLE
000170  4281              CMP      r1,r0                 ;315
000172  da03              BGE      |L6.380|
000174  8828              LDRH     r0,[r5,#0]            ;316  ; tloaddisable_cnt
000176  f1a00001          SUB      r0,r0,#1              ;316
00017a  8028              STRH     r0,[r5,#0]            ;316
                  |L6.380|
00017c  2206              MOVS     r2,#6                 ;317
00017e  2100              MOVS     r1,#0                 ;317
000180  4818              LDR      r0,|L6.484|
000182  f7fffffe          BL       gran
000186  f9b50000          LDRSH    r0,[r5,#0]            ;319  ; tloaddisable_cnt
00018a  2805              CMP      r0,#5                 ;320
00018c  dd00              BLE      |L6.400|
00018e  703e              STRB     r6,[r7,#0]            ;320
                  |L6.400|
000190  2801              CMP      r0,#1                 ;320
000192  da00              BGE      |L6.406|
000194  703c              STRB     r4,[r7,#0]
                  |L6.406|
000196  e8bd81f0          POP      {r4-r8,pc}            ;264
                  |L6.410|
00019a  703c              STRB     r4,[r7,#0]            ;264
00019c  e7fb              B        |L6.406|
;;;325    
                          ENDP

00019e  0000              DCW      0x0000
                  |L6.416|
                          DCD      t_box
                  |L6.420|
                          DCD      TBOXMAX
                  |L6.424|
                          DCD      av_tbox_cnt
                  |L6.428|
                          DCD      av_tbox_stat
                  |L6.432|
                          DCD      TBOXREG
                  |L6.436|
                          DCD      t_box_cnt
                  |L6.440|
                          DCD      main_vent_pos
                  |L6.444|
                          DCD      TBOXVENTMAX
                  |L6.448|
                          DCD      pos_vent
                  |L6.452|
                          DCD      mess_data
                  |L6.456|
                          DCD      mixer_vent_stat
                  |L6.460|
                          DCD      TBATDISABLE
                  |L6.464|
                          DCD      tbatdisable_stat
                  |L6.468|
                          DCD      tbatdisable_cnt
                  |L6.472|
                          DCD      TBATENABLE
                  |L6.476|
                          DCD      TLOADDISABLE
                  |L6.480|
                          DCD      tloaddisable_stat
                  |L6.484|
                          DCD      tloaddisable_cnt
                  |L6.488|
                          DCD      TLOADENABLE

                          AREA ||.bss||, DATA, NOINIT, ALIGN=2

                  adc_buff
                          %        1024
                  adc_buff_
                          %        32
                  main_power_buffer
                          %        32

                          AREA ||area_number.9||, DATA, NOINIT, ALIGN=1

                          EXPORTAS ||area_number.9||, ||.bss||
                  adc_buff_max
                          %        24

                          AREA ||area_number.10||, DATA, NOINIT, ALIGN=1

                          EXPORTAS ||area_number.10||, ||.bss||
                  net_buff
                          %        64

                          AREA ||.constdata||, DATA, READONLY, ALIGN=0

                  sk_buff_KONTUR
000000  0d0b0f0e          DCB      0x0d,0x0b,0x0f,0x0e

                          AREA ||area_number.13||, DATA, READONLY, ALIGN=0

                          EXPORTAS ||area_number.13||, ||.constdata||
                  sk_buff_RSTKM
000000  0d0b0f0e          DCB      0x0d,0x0b,0x0f,0x0e

                          AREA ||area_number.14||, DATA, READONLY, ALIGN=0

                          EXPORTAS ||area_number.14||, ||.constdata||
                  sk_buff_GLONASS
000000  0b0d0f0e          DCB      0x0b,0x0d,0x0f,0x0e

                          AREA ||area_number.15||, DATA, READONLY, ALIGN=0

                          EXPORTAS ||area_number.15||, ||.constdata||
                  sk_buff_3U
000000  0b0d0f0e          DCB      0x0b,0x0d,0x0f,0x0e

                          AREA ||area_number.16||, DATA, READONLY, ALIGN=0

                          EXPORTAS ||area_number.16||, ||.constdata||
                  sk_buff_6U
000000  0b0d0f0e          DCB      0x0b,0x0d,0x0f,0x0e

                          AREA ||area_number.17||, DATA, READONLY, ALIGN=0

                          EXPORTAS ||area_number.17||, ||.constdata||
                  sk_buff_220
000000  0b0d0f0e          DCB      0x0b,0x0d,0x0f,0x0e

                          AREA ||area_number.18||, DATA, READONLY, ALIGN=0

                          EXPORTAS ||area_number.18||, ||.constdata||
                  sk_buff_TELECORE2015
000000  0b0d0f0e          DCB      0x0b,0x0d,0x0f,0x0e

                          AREA ||.data||, DATA, ALIGN=1

                  adc_buff_min
000000  13881388          DCW      0x1388,0x1388
000004  13881388          DCW      0x1388,0x1388
000008  13881388          DCW      0x1388,0x1388
00000c  13881388          DCW      0x1388,0x1388
000010  13881388          DCW      0x1388,0x1388
                          DCDU     0x00000000

                          AREA ||area_number.20||, DATA, ALIGN=1

                          EXPORTAS ||area_number.20||, ||.data||
                  unet_buff_min
000000  1388              DCW      0x1388

                          AREA ||area_number.21||, DATA, ALIGN=0

                          EXPORTAS ||area_number.21||, ||.data||
                  adc_stat
000000  01                DCB      0x01

                          AREA ||area_number.22||, DATA, ALIGN=1

                          EXPORTAS ||area_number.22||, ||.data||
                  bat_ver_cnt
000000  0096              DCW      0x0096

                          AREA ||area_number.23||, DATA, ALIGN=2

                          EXPORTAS ||area_number.23||, ||.data||
                  vent_stat
000000  00                DCB      0x00
                  cntrlStatIsDownCnt
000001  00                DCB      0x00
                  adc_self_ch_cnt
000002  00                DCB      0x00
                  adc_ch_net
000003  00                DCB      0x00
                  adc_ch
000004  00                DCB      0x00
                  adc_ch_cnt
000005  00                DCB      0x00
                  adc_window_flag
000006  00                DCB      0x00
                  ch_cnt0
000007  00                DCB      0x00
                  b1Hz_ch
000008  00                DCB      0x00
                  i
000009  00                DCB      0x00
                  iiii
00000a  00                DCB      0x00
                  bAVG
00000b  00                DCB      0x00
                  avg_num
00000c  00                DCB      0x00
                  kb_full_ver
00000d  00                DCB      0x00
                  kb_start_ips
00000e  00                DCB      0x00
                  num_of_wrks_bps
00000f  00                DCB      0x00
                  num_necc_up
000010  00                DCB      0x00
                  num_necc_down
000011  00                DCB      0x00
                  sh_cnt0
000012  00                DCB      0x00
                  b1Hz_sh
000013  00                DCB      0x00
                  spc_stat
000014  00                DCB      0x00
                  spc_bat
000015  00                DCB      0x00
                  spc_phase
000016  00                DCB      0x00
                  bAVZ
000017  00                DCB      0x00
                  ke_start_stat
000018  00                DCB      0x00
                  numOfForvardBps
000019  00                DCB      0x00
                  numOfForvardBps_old
00001a  00                DCB      0x00
                  numOfForvardBps_minCnt
00001b  00                DCB      0x00
                  bPARALLEL_NOT_ENOUG
00001c  00                DCB      0x00
                  bPARALLEL_ENOUG
00001d  00                DCB      0x00
                  bPARALLEL
00001e  00                DCB      0x00
                  cntrl_hndl_plazma
00001f  00                DCB      0x00
                  cntrl_stat
000020  0258              DCW      0x0258
                  cntrl_stat_old
000022  0258              DCW      0x0258
                  avg_main_cnt
000024  0014              DCW      0x0014
                  num_necc_block_cnt
000026  0000              DCB      0x00,0x00
                  net_buff_
000028  0000              DCB      0x00,0x00
                  adc_result
00002a  0000              DCB      0x00,0x00
                  adc_gorb_cnt
00002c  0000              DCB      0x00,0x00
                  adc_zero_cnt
00002e  0000              DCB      0x00,0x00
                  adc_window_cnt
000030  0000              DCB      0x00,0x00
                  adc_net_buff_cnt
000032  0000              DCB      0x00,0x00
                  plazma_sk
000034  0000              DCB      0x00,0x00
                  cntrl_stat_new
000036  0000              DCB      0x00,0x00
                  Ibmax
000038  0000              DCB      0x00,0x00
                  IZMAX_
00003a  0000              DCB      0x00,0x00
                  Ubpsmax
00003c  0000              DCB      0x00,0x00
                  samokalibr_cnt
00003e  0000              DCB      0x00,0x00
                  main_kb_cnt
000040  0000              DCB      0x00,0x00
                  kb_cnt_1lev
000042  0000              DCB      0x00,0x00
                  kb_cnt_2lev
000044  0000              DCB      0x00,0x00
                  kb_start
000046  0000              DCB      0x00,0x00
                  ibat_ips
000048  0000              DCB      0x00,0x00
                  ibat_ips_
00004a  0000              DCB      0x00,0x00
                  bps_on_mask
00004c  0000              DCB      0x00,0x00
                  bps_off_mask
00004e  0000              DCB      0x00,0x00
                  vz_cnt_s
000050  0000              DCB      0x00,0x00
                  vz_cnt_s_
000052  0000              DCB      0x00,0x00
                  vz_cnt_h
000054  0000              DCB      0x00,0x00
                  vz_cnt_h_
000056  0000              DCB      0x00,0x00
                  cnt_end_ke
000058  0000              DCB      0x00,0x00
                  __ee_vz_cnt
00005a  0000              DCB      0x00,0x00
                  __ee_spc_stat
00005c  0000              DCB      0x00,0x00
                  __ee_spc_bat
00005e  0000              DCB      0x00,0x00
                  __ee_spc_phase
000060  0000              DCB      0x00,0x00
                  cntrl_stat_blok_cnt
000062  0000              DCB      0x00,0x00
                  cntrl_stat_blok_cnt_
000064  0000              DCB      0x00,0x00
                  numOfForvardBps_hourCnt
000066  0000              DCB      0x00,0x00
                  plazma_ica1
000068  0000              DCB      0x00,0x00
                  ibat
00006a  0000              DCB      0x00,0x00
00006c  0000              DCB      0x00,0x00
                  ibat_
00006e  0000              DCB      0x00,0x00
000070  00000000          DCB      0x00,0x00,0x00,0x00
                  i_avg_max
                          DCD      0x00000000
                  i_avg_min
                          DCD      0x00000000
                  i_avg_summ
                          DCD      0x00000000
                  i_avg
                          DCD      0x00000000
                  avg
                          DCD      0x00000000
                  cntrl_stat_blok_cnt_plus
                          DCD      0x00000000
                  cntrl_stat_blok_cnt_minus
                          DCD      0x00000000
                  plazma_inv
                          DCD      0x00000000
                  net_metr_buff_
                          DCD      0x00000000
000098  0000              DCB      0x00,0x00
                  adc_self_ch_buff
00009a  0000              DCB      0x00,0x00
                          DCD      0x00000000
                  adc_self_ch_disp
                          DCD      0x00000000
0000a4  00000000          DCB      0x00,0x00,0x00,0x00
                  ke_date
                          %        8

                          AREA ||area_number.24||, DATA, ALIGN=0

                          EXPORTAS ||area_number.24||, ||.data||
                  rx_read_power_cnt_phase
000000  0f                DCB      0x0f

                          AREA ||area_number.25||, DATA, ALIGN=1

                          EXPORTAS ||area_number.25||, ||.data||
                  read_power_cnt_main_cnt
000000  0064              DCW      0x0064

                          AREA ||area_number.26||, DATA, ALIGN=0

                          EXPORTAS ||area_number.26||, ||.data||
                  rx_read_power_cnt_plazma
000000  00                DCB      0x00

                          AREA ||area_number.27||, DATA, ALIGN=0

                          EXPORTAS ||area_number.27||, ||.data||
                  rx_read_power_cnt_flag
000000  00                DCB      0x00

                          AREA ||area_number.28||, DATA, ALIGN=0

                          EXPORTAS ||area_number.28||, ||.data||
                  bENERGOMETR_UIP
000000  00                DCB      0x00

                          AREA ||area_number.29||, DATA, ALIGN=1

                          EXPORTAS ||area_number.29||, ||.data||
                  unet_buff_max
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.30||, DATA, ALIGN=0

                          EXPORTAS ||area_number.30||, ||.data||
                  adc_cnt
000000  00                DCB      0x00

                          AREA ||area_number.31||, DATA, ALIGN=0

                          EXPORTAS ||area_number.31||, ||.data||
                  adc_cnt1
000000  00                DCB      0x00

                          AREA ||area_number.32||, DATA, ALIGN=1

                          EXPORTAS ||area_number.32||, ||.data||
                  zero_cnt
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.33||, DATA, ALIGN=0

                          EXPORTAS ||area_number.33||, ||.data||
                  net_buff_cnt
000000  00                DCB      0x00

                          AREA ||area_number.34||, DATA, ALIGN=1

                          EXPORTAS ||area_number.34||, ||.data||
                  ADWR
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.35||, DATA, ALIGN=1

                          EXPORTAS ||area_number.35||, ||.data||
                  period_cnt
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.36||, DATA, ALIGN=1

                          EXPORTAS ||area_number.36||, ||.data||
                  non_zero_cnt
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.37||, DATA, ALIGN=0

                          EXPORTAS ||area_number.37||, ||.data||
                  rele_stat
000000  00                DCB      0x00

                          AREA ||area_number.38||, DATA, ALIGN=0

                          EXPORTAS ||area_number.38||, ||.data||
                  bRELE_OUT
000000  00                DCB      0x00

                          AREA ||area_number.39||, DATA, ALIGN=2

                          EXPORTAS ||area_number.39||, ||.data||
                  main_power_buffer_
                          DCD      0x00000000

                          AREA ||area_number.40||, DATA, ALIGN=1

                          EXPORTAS ||area_number.40||, ||.data||
                  main_power_buffer_cnt
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.41||, DATA, ALIGN=1

                          EXPORTAS ||area_number.41||, ||.data||
                  adc_buff_out_
                          DCDU     0x00000000
000004  0000              DCB      0x00,0x00

                          AREA ||area_number.42||, DATA, ALIGN=1

                          EXPORTAS ||area_number.42||, ||.data||
                  plazma_adc_cnt
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.43||, DATA, ALIGN=0

                          EXPORTAS ||area_number.43||, ||.data||
                  unh_cnt0
000000  00                DCB      0x00

                          AREA ||area_number.44||, DATA, ALIGN=0

                          EXPORTAS ||area_number.44||, ||.data||
                  unh_cnt1
000000  00                DCB      0x00

                          AREA ||area_number.45||, DATA, ALIGN=0

                          EXPORTAS ||area_number.45||, ||.data||
                  b1Hz_unh
000000  00                DCB      0x00

                          AREA ||area_number.46||, DATA, ALIGN=0

                          EXPORTAS ||area_number.46||, ||.data||
                  ch_cnt1
000000  00                DCB      0x00

                          AREA ||area_number.47||, DATA, ALIGN=0

                          EXPORTAS ||area_number.47||, ||.data||
                  b1_30Hz_ch
000000  00                DCB      0x00

                          AREA ||area_number.48||, DATA, ALIGN=0

                          EXPORTAS ||area_number.48||, ||.data||
                  ch_cnt2
000000  00                DCB      0x00

                          AREA ||area_number.49||, DATA, ALIGN=0

                          EXPORTAS ||area_number.49||, ||.data||
                  b1_10Hz_ch
000000  00                DCB      0x00

                          AREA ||area_number.50||, DATA, ALIGN=1

                          EXPORTAS ||area_number.50||, ||.data||
                  IZMAX_70
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.51||, DATA, ALIGN=1

                          EXPORTAS ||area_number.51||, ||.data||
                  IZMAX_130
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.52||, DATA, ALIGN=1

                          EXPORTAS ||area_number.52||, ||.data||
                  cntrl_stat_blck_cnt
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.53||, DATA, ALIGN=0

                          EXPORTAS ||area_number.53||, ||.data||
                  avg_cnt
000000  00                DCB      0x00

                          AREA ||area_number.54||, DATA, ALIGN=0

                          EXPORTAS ||area_number.54||, ||.data||
                  bps_all_off_cnt
000000  00                DCB      0x00

                          AREA ||area_number.55||, DATA, ALIGN=0

                          EXPORTAS ||area_number.55||, ||.data||
                  bps_mask_off_cnt
000000  00                DCB      0x00

                          AREA ||area_number.56||, DATA, ALIGN=0

                          EXPORTAS ||area_number.56||, ||.data||
                  bps_mask_on_off_cnt
000000  00                DCB      0x00

                          AREA ||area_number.57||, DATA, ALIGN=0

                          EXPORTAS ||area_number.57||, ||.data||
                  bps_hndl_2sec_cnt
000000  00                DCB      0x00

                          AREA ||area_number.58||, DATA, ALIGN=0

                          EXPORTAS ||area_number.58||, ||.data||
                  plazma_bat
000000  00                DCB      0x00

                          AREA ||area_number.59||, DATA, ALIGN=0

                          EXPORTAS ||area_number.59||, ||.data||
                  plazma_cntrl_stat
000000  00                DCB      0x00

                          AREA ||area_number.60||, DATA, ALIGN=1

                          EXPORTAS ||area_number.60||, ||.data||
                  ce102m_delayCnt
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.61||, DATA, ALIGN=1

                          EXPORTAS ||area_number.61||, ||.data||
                  volta_short
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.62||, DATA, ALIGN=1

                          EXPORTAS ||area_number.62||, ||.data||
                  curr_short
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.63||, DATA, ALIGN=2

                          EXPORTAS ||area_number.63||, ||.data||
                  power_int
                          DCD      0x00000000

                          AREA ||area_number.64||, DATA, ALIGN=1

                          EXPORTAS ||area_number.64||, ||.data||
                  plazma_ica2
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.65||, DATA, ALIGN=0

                          EXPORTAS ||area_number.65||, ||.data||
                  rele_hndl_plazma
000000  000000            DCB      0x00,0x00,0x00
