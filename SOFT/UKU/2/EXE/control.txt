; generated by ARM C/C++ Compiler, RVCT4.0 [Build 728]
; commandline ArmCC [--debug -c --asm --interleave -o.\EXE\control.o --depend=.\EXE\control.d --feedback=.\EXE\UKU_220_IPS_TERMOKOMPENSAT.fed --cpu=Cortex-M3 --apcs=interwork -O1 -IC:\Keil\ARM\INC -IC:\Keil\ARM\INC\NXP\LPC17xx -D__MICROLIB -DUKU_220_IPS_TERMOKOMPENSAT -DUKU2071x --omf_browse=.\EXE\control.crf control.c]
                          THUMB

                          AREA ||.text||, CODE, READONLY, ALIGN=2

                  ke_start PROC
;;;213    //-----------------------------------------------
;;;214    void ke_start(char in)
000000  e92d41fc          PUSH     {r2-r8,lr}
;;;215    {          
000004  4604              MOV      r4,r0
;;;216    ke_start_stat=(enum_ke_start_stat)0;		 
000006  4efc              LDR      r6,|L1.1016|
000008  2700              MOVS     r7,#0
00000a  75f7              STRB     r7,[r6,#0x17]
;;;217    
;;;218    if(spc_stat==spcVZ)ke_start_stat=kssNOT_VZ;
00000c  7cf0              LDRB     r0,[r6,#0x13]  ; spc_stat
00000e  2301              MOVS     r3,#1
000010  2802              CMP      r0,#2
000012  d102              BNE      |L1.26|
000014  75f3              STRB     r3,[r6,#0x17]
                  |L1.22|
;;;219    else if(BAT_IS_ON[in]!=bisON)ke_start_stat=kssNOT_BAT;
;;;220    else if(bat[in]._av&(1<<0))ke_start_stat=kssNOT_BAT_AV;
;;;221    else if(bat[in]._temper_stat&(1<<1))ke_start_stat=kssNOT_BAT_AV_T;
;;;222    else if(bat[in]._av&(1<<1))ke_start_stat=kssNOT_BAT_AV_ASS;
;;;223    else if(bat[in]._Ib>IKB)ke_start_stat=kssNOT_BAT_ZAR;
;;;224    else if(bat[in]._Ib<-IKB)ke_start_stat=kssNOT_BAT_RAZR;
;;;225    else if((spc_stat==spcKE)&&(spc_bat==0))ke_start_stat=kssNOT_KE1;
;;;226    else if((spc_stat==spcKE)&&(spc_bat==1))ke_start_stat=kssNOT_KE2;
;;;227    else 
;;;228    	{
;;;229    
;;;230    	ke_start_stat=kssYES;
;;;231    
;;;232    	spc_stat=spcKE;
;;;233    	__ee_spc_stat=spcKE;
;;;234    	lc640_write_int(EE_SPC_STAT,__ee_spc_stat);
;;;235    	
;;;236    	spc_bat=in;
;;;237    	__ee_spc_bat=in;
;;;238    	lc640_write_int(EE_SPC_BAT,__ee_spc_bat);
;;;239    
;;;240    	bat[in]._zar_cnt_ke=0;
;;;241    	lc640_write_int(ADR_EE_BAT_ZAR_CNT_KE[in],0);
;;;242    	
;;;243    	spc_phase=0;
;;;244    	__ee_spc_phase=0;
;;;245    	lc640_write_int(EE_SPC_PHASE,__ee_spc_phase);
;;;246    
;;;247    	//ke_mem_hndl(in,lc640_read_int(ADR_EE_BAT_ZAR_CNT_KE[spc_bat]));
;;;248    
;;;249    		{					
;;;250    		signed short temp_temp;
;;;251    		signed char temp;
;;;252    		temp_temp=bat[in]._u_old[((bat_u_old_cnt+1)&0x07)]; 
;;;253    		    
;;;254    		temp=LPC_RTC->YEAR;
;;;255    		gran_char(&temp,1,99);
;;;256    		*((char*)(&(ke_date[0])))=temp;
;;;257    			
;;;258    		temp=LPC_RTC->MONTH;
;;;259    		gran_char(&temp,1,12);
;;;260    		*(((char*)(&(ke_date[0])))+1)=temp;
;;;261    		
;;;262    		temp=LPC_RTC->DOM;
;;;263    		gran_char(&temp,1,31);
;;;264    		*(((char*)(&(ke_date[0])))+2)=temp;			
;;;265    				
;;;266    		*(((char*)(&(ke_date[0])))+3)=*((char*)&temp_temp);
;;;267    		lc640_write_long(EE_SPC_KE_DATE0,ke_date[0]);
;;;268    
;;;269    		temp=LPC_RTC->HOUR;
;;;270    		gran_char(&temp,0,23);
;;;271    		*((char*)(&(ke_date[1])))=temp;
;;;272                   
;;;273    		temp=LPC_RTC->MIN;
;;;274    		gran_char(&temp,0,59);
;;;275    		*(((char*)(&(ke_date[1])))+1)=temp;
;;;276    	          
;;;277    		temp=LPC_RTC->SEC;
;;;278    		gran_char(&temp,0,59);
;;;279    		*(((char*)(&(ke_date[1])))+2)=temp;
;;;280    			
;;;281    		*(((char*)(&(ke_date[1])))+3)=*(((char*)&temp_temp)+1);
;;;282    		lc640_write_long(EE_SPC_KE_DATE1,ke_date[1]);
;;;283    		}
;;;284    
;;;285    	}
;;;286    }
000016  e8bd81fc          POP      {r2-r8,pc}
                  |L1.26|
00001a  49f8              LDR      r1,|L1.1020|
00001c  5d09              LDRB     r1,[r1,r4]            ;219
00001e  2955              CMP      r1,#0x55              ;219
000020  d002              BEQ      |L1.40|
000022  2065              MOVS     r0,#0x65              ;219
000024  75f0              STRB     r0,[r6,#0x17]         ;219
000026  e7f6              B        |L1.22|
                  |L1.40|
000028  eb040144          ADD      r1,r4,r4,LSL #1       ;220
00002c  eb011204          ADD      r2,r1,r4,LSL #4       ;220
000030  49f3              LDR      r1,|L1.1024|
000032  eb010582          ADD      r5,r1,r2,LSL #2       ;220
000036  f895103d          LDRB     r1,[r5,#0x3d]         ;220
00003a  07ca              LSLS     r2,r1,#31             ;220
00003c  d002              BEQ      |L1.68|
00003e  2066              MOVS     r0,#0x66              ;220
000040  75f0              STRB     r0,[r6,#0x17]         ;220
000042  e7e8              B        |L1.22|
                  |L1.68|
000044  f895203f          LDRB     r2,[r5,#0x3f]         ;221
000048  0792              LSLS     r2,r2,#30             ;221
00004a  d502              BPL      |L1.82|
00004c  2067              MOVS     r0,#0x67              ;221
00004e  75f0              STRB     r0,[r6,#0x17]         ;221
000050  e7e1              B        |L1.22|
                  |L1.82|
000052  0789              LSLS     r1,r1,#30             ;222
000054  d502              BPL      |L1.92|
000056  2068              MOVS     r0,#0x68              ;222
000058  75f0              STRB     r0,[r6,#0x17]         ;222
00005a  e7dc              B        |L1.22|
                  |L1.92|
00005c  4ae9              LDR      r2,|L1.1028|
00005e  f9b51008          LDRSH    r1,[r5,#8]            ;223
000062  f9b22000          LDRSH    r2,[r2,#0]            ;223  ; IKB
000066  4291              CMP      r1,r2                 ;223
000068  dd02              BLE      |L1.112|
00006a  2069              MOVS     r0,#0x69              ;223
00006c  75f0              STRB     r0,[r6,#0x17]         ;223
00006e  e7d2              B        |L1.22|
                  |L1.112|
000070  4252              RSBS     r2,r2,#0              ;224
000072  4291              CMP      r1,r2                 ;224
000074  da02              BGE      |L1.124|
000076  206a              MOVS     r0,#0x6a              ;224
000078  75f0              STRB     r0,[r6,#0x17]         ;224
00007a  e7cc              B        |L1.22|
                  |L1.124|
00007c  49de              LDR      r1,|L1.1016|
00007e  2801              CMP      r0,#1                 ;225
000080  7d09              LDRB     r1,[r1,#0x14]         ;225
000082  d103              BNE      |L1.140|
000084  b911              CBNZ     r1,|L1.140|
000086  206b              MOVS     r0,#0x6b              ;225
000088  75f0              STRB     r0,[r6,#0x17]         ;225
00008a  e7c4              B        |L1.22|
                  |L1.140|
00008c  2801              CMP      r0,#1                 ;226
00008e  d104              BNE      |L1.154|
000090  2901              CMP      r1,#1                 ;226
000092  d102              BNE      |L1.154|
000094  206c              MOVS     r0,#0x6c              ;226
000096  75f0              STRB     r0,[r6,#0x17]         ;226
000098  e7bd              B        |L1.22|
                  |L1.154|
00009a  2064              MOVS     r0,#0x64              ;230
00009c  75f0              STRB     r0,[r6,#0x17]         ;230
00009e  74f3              STRB     r3,[r6,#0x13]         ;232
0000a0  f8a63054          STRH     r3,[r6,#0x54]         ;233
0000a4  4619              MOV      r1,r3                 ;234
0000a6  f44f70f8          MOV      r0,#0x1f0             ;234
0000aa  f7fffffe          BL       lc640_write_int
0000ae  7534              STRB     r4,[r6,#0x14]         ;236
0000b0  4621              MOV      r1,r4                 ;237
0000b2  f8a64056          STRH     r4,[r6,#0x56]         ;237
0000b6  f44f70fa          MOV      r0,#0x1f4             ;238
0000ba  f7fffffe          BL       lc640_write_int
0000be  61af              STR      r7,[r5,#0x18]         ;240
0000c0  48d1              LDR      r0,|L1.1032|
0000c2  2100              MOVS     r1,#0                 ;241
0000c4  f9300014          LDRSH    r0,[r0,r4,LSL #1]     ;241
0000c8  f7fffffe          BL       lc640_write_int
0000cc  7577              STRB     r7,[r6,#0x15]         ;243
0000ce  f8a67058          STRH     r7,[r6,#0x58]         ;244
0000d2  4639              MOV      r1,r7                 ;245
0000d4  f44f70fb          MOV      r0,#0x1f6             ;245
0000d8  f7fffffe          BL       lc640_write_int
0000dc  48cb              LDR      r0,|L1.1036|
0000de  8800              LDRH     r0,[r0,#0]            ;252  ; bat_u_old_cnt
0000e0  1c40              ADDS     r0,r0,#1              ;252
0000e2  f0000007          AND      r0,r0,#7              ;252
0000e6  eb050040          ADD      r0,r5,r0,LSL #1       ;252
0000ea  8c00              LDRH     r0,[r0,#0x20]         ;252
0000ec  9001              STR      r0,[sp,#4]            ;252
0000ee  4dc8              LDR      r5,|L1.1040|
0000f0  8ba8              LDRH     r0,[r5,#0x1c]         ;254
0000f2  9000              STR      r0,[sp,#0]            ;254
0000f4  f04f0263          MOV      r2,#0x63              ;255
0000f8  f04f0101          MOV      r1,#1                 ;255
0000fc  4668              MOV      r0,sp                 ;255
0000fe  f7fffffe          BL       gran_char
000102  4cbd              LDR      r4,|L1.1016|
000104  f89d0000          LDRB     r0,[sp,#0]            ;256
000108  349c              ADDS     r4,r4,#0x9c           ;256
00010a  7020              STRB     r0,[r4,#0]            ;256
00010c  7e28              LDRB     r0,[r5,#0x18]         ;258
00010e  9000              STR      r0,[sp,#0]            ;258
000110  220c              MOVS     r2,#0xc               ;259
000112  2101              MOVS     r1,#1                 ;259
000114  4668              MOV      r0,sp                 ;259
000116  f7fffffe          BL       gran_char
00011a  f89d0000          LDRB     r0,[sp,#0]            ;260
00011e  7060              STRB     r0,[r4,#1]            ;260
000120  7b28              LDRB     r0,[r5,#0xc]          ;262
000122  9000              STR      r0,[sp,#0]            ;262
000124  221f              MOVS     r2,#0x1f              ;263
000126  2101              MOVS     r1,#1                 ;263
000128  4668              MOV      r0,sp                 ;263
00012a  f7fffffe          BL       gran_char
00012e  f89d0000          LDRB     r0,[sp,#0]            ;264
000132  70a0              STRB     r0,[r4,#2]            ;264
000134  f89d0004          LDRB     r0,[sp,#4]            ;266
000138  70e0              STRB     r0,[r4,#3]            ;266
00013a  f44f70fc          MOV      r0,#0x1f8             ;267
00013e  6821              LDR      r1,[r4,#0]            ;267  ; ke_date
000140  f7fffffe          BL       lc640_write_long
000144  7a28              LDRB     r0,[r5,#8]            ;269
000146  9000              STR      r0,[sp,#0]            ;269
000148  2217              MOVS     r2,#0x17              ;270
00014a  2100              MOVS     r1,#0                 ;270
00014c  4668              MOV      r0,sp                 ;270
00014e  f7fffffe          BL       gran_char
000152  f89d0000          LDRB     r0,[sp,#0]            ;271
000156  7120              STRB     r0,[r4,#4]            ;271
000158  7928              LDRB     r0,[r5,#4]            ;273
00015a  9000              STR      r0,[sp,#0]            ;273
00015c  223b              MOVS     r2,#0x3b              ;274
00015e  2100              MOVS     r1,#0                 ;274
000160  4668              MOV      r0,sp                 ;274
000162  f7fffffe          BL       gran_char
000166  f89d0000          LDRB     r0,[sp,#0]            ;275
00016a  7160              STRB     r0,[r4,#5]            ;275
00016c  7828              LDRB     r0,[r5,#0]            ;277
00016e  9000              STR      r0,[sp,#0]            ;277
000170  223b              MOVS     r2,#0x3b              ;278
000172  2100              MOVS     r1,#0                 ;278
000174  4668              MOV      r0,sp                 ;278
000176  f7fffffe          BL       gran_char
00017a  f89d0000          LDRB     r0,[sp,#0]            ;279
00017e  71a0              STRB     r0,[r4,#6]            ;279
000180  f89d0005          LDRB     r0,[sp,#5]            ;281
000184  71e0              STRB     r0,[r4,#7]            ;281
000186  f44f70fe          MOV      r0,#0x1fc             ;282
00018a  6861              LDR      r1,[r4,#4]            ;282  ; ke_date
00018c  f7fffffe          BL       lc640_write_long
000190  e741              B        |L1.22|
;;;287    
                          ENDP

                  ke_drv PROC
;;;288    //-----------------------------------------------
;;;289    void ke_drv(void)
000192  e92d47f0          PUSH     {r4-r10,lr}
;;;290    {
;;;291    
;;;292    if(spc_stat==spcKE)
000196  4c98              LDR      r4,|L1.1016|
000198  7ce0              LDRB     r0,[r4,#0x13]  ; spc_stat
00019a  2801              CMP      r0,#1
00019c  d17e              BNE      |L1.668|
00019e  4621              MOV      r1,r4
;;;293    	{
;;;294    	if(spc_phase==0)
;;;295    		{
;;;296    		mess_send(MESS2BAT_HNDL,PARAM_BAT_MASK_OFF_AFTER_2SEC,(1<<(1-spc_bat)),20);
0001a0  7d09              LDRB     r1,[r1,#0x14]
0001a2  2701              MOVS     r7,#1                 ;292
0001a4  f1c10201          RSB      r2,r1,#1
0001a8  7d60              LDRB     r0,[r4,#0x15]         ;294  ; spc_phase
0001aa  fa07f102          LSL      r1,r7,r2
;;;297    		mess_send(MESS2BPS_HNDL,PARAM_BPS_ALL_OFF_AFTER_2SEC,0xffff,20);
;;;298    
;;;299    		bat[spc_bat]._zar_cnt_ke+=abs(bat[spc_bat]._Ib);
;;;300    	    	
;;;301    		if(bat[spc_bat]._zar_cnt_ke>=AH_CONSTANT)
;;;302    			{
;;;303    			bat[spc_bat]._zar_cnt_ke-=AH_CONSTANT;
;;;304    			lc640_write_int(ADR_EE_BAT_ZAR_CNT_KE[spc_bat],lc640_read_int(ADR_EE_BAT_ZAR_CNT_KE[spc_bat])+1);
0001ae  4e96              LDR      r6,|L1.1032|
0001b0  4d93              LDR      r5,|L1.1024|
0001b2  b20a              SXTH     r2,r1                 ;296
0001b4  bb88              CBNZ     r0,|L1.538|
0001b6  2314              MOVS     r3,#0x14              ;296
0001b8  21ca              MOVS     r1,#0xca              ;296
0001ba  20c8              MOVS     r0,#0xc8              ;296
0001bc  f7fffffe          BL       mess_send
0001c0  2314              MOVS     r3,#0x14              ;297
0001c2  1eba              SUBS     r2,r7,#2              ;297
0001c4  21ce              MOVS     r1,#0xce              ;297
0001c6  20cd              MOVS     r0,#0xcd              ;297
0001c8  f7fffffe          BL       mess_send
0001cc  7d20              LDRB     r0,[r4,#0x14]         ;299  ; spc_bat
0001ce  eb000140          ADD      r1,r0,r0,LSL #1       ;299
0001d2  eb011000          ADD      r0,r1,r0,LSL #4       ;299
0001d6  eb050080          ADD      r0,r5,r0,LSL #2       ;299
0001da  f9b00008          LDRSH    r0,[r0,#8]            ;299
0001de  f7fffffe          BL       abs
0001e2  7d21              LDRB     r1,[r4,#0x14]         ;299  ; spc_bat
0001e4  eb010241          ADD      r2,r1,r1,LSL #1       ;299
0001e8  eb021201          ADD      r2,r2,r1,LSL #4       ;299
0001ec  eb050282          ADD      r2,r5,r2,LSL #2       ;299
0001f0  6993              LDR      r3,[r2,#0x18]         ;299
0001f2  4418              ADD      r0,r0,r3              ;299
0001f4  6190              STR      r0,[r2,#0x18]         ;299
0001f6  f64843a0          MOV      r3,#0x8ca0            ;301
0001fa  4298              CMP      r0,r3                 ;301
0001fc  db15              BLT      |L1.554|
0001fe  1ac0              SUBS     r0,r0,r3              ;303
000200  6190              STR      r0,[r2,#0x18]         ;303
000202  f8360011          LDRH     r0,[r6,r1,LSL #1]
000206  f7fffffe          BL       lc640_read_int
00020a  1c40              ADDS     r0,r0,#1
00020c  b201              SXTH     r1,r0
00020e  7d20              LDRB     r0,[r4,#0x14]  ; spc_bat
000210  f9360010          LDRSH    r0,[r6,r0,LSL #1]
000214  f7fffffe          BL       lc640_write_int
000218  e007              B        |L1.554|
                  |L1.538|
00021a  e7ff              B        |L1.540|
                  |L1.540|
;;;305    			}
;;;306    		}
;;;307    
;;;308    	else if(spc_phase==1)
00021c  2801              CMP      r0,#1
00021e  d104              BNE      |L1.554|
;;;309    		{
;;;310    		mess_send(MESS2BAT_HNDL,PARAM_BAT_MASK_OFF_AFTER_2SEC,(1<<(1-spc_bat)),20);
000220  2314              MOVS     r3,#0x14
000222  21ca              MOVS     r1,#0xca
000224  20c8              MOVS     r0,#0xc8
000226  f7fffffe          BL       mess_send
                  |L1.554|
;;;311    		}
;;;312    
;;;313    	if(bat[spc_bat]._Ub<(USIGN*10))
00022a  7d20              LDRB     r0,[r4,#0x14]  ; spc_bat
;;;314    		{
;;;315    		cnt_end_ke++;
;;;316    		if(cnt_end_ke>=30)
;;;317    			{
;;;318    			
;;;319    			if((spc_stat==spcKE)&&(spc_phase==0))
;;;320    				{
;;;321    				lc640_write_int(ADR_EE_BAT_C_REAL[spc_bat],lc640_read_int(ADR_EE_BAT_ZAR_CNT_KE[spc_bat]));
;;;322    				ke_mem_hndl(spc_bat,lc640_read_int(ADR_EE_BAT_ZAR_CNT_KE[spc_bat]));
;;;323    				lc640_write_int(ADR_EE_BAT_ZAR_CNT[spc_bat],0);
;;;324    				cntrl_stat=50;
;;;325    				cntrl_stat_old=50;
;;;326    				}
;;;327    
;;;328    			if((BAT_IS_ON[1-spc_bat]) == bisON)
;;;329    				{
;;;330    				spc_phase=1;
;;;331    				__ee_spc_phase=1;
;;;332    				lc640_write_int(EE_SPC_PHASE,1);
;;;333    				}			
;;;334    			else
;;;335    				{
;;;336    				spc_stat=spcOFF;
;;;337    				__ee_spc_stat=spcOFF;
;;;338    				lc640_write_int(EE_SPC_STAT,spcOFF);
00022c  f44f79f8          MOV      r9,#0x1f0
000230  eb000140          ADD      r1,r0,r0,LSL #1       ;313
000234  eb011100          ADD      r1,r1,r0,LSL #4       ;313
000238  eb050181          ADD      r1,r5,r1,LSL #2       ;313
00023c  f9b12002          LDRSH    r2,[r1,#2]            ;313
000240  4974              LDR      r1,|L1.1044|
000242  f04f0800          MOV      r8,#0                 ;294
000246  f9b11000          LDRSH    r1,[r1,#0]            ;313  ; USIGN
00024a  eb010181          ADD      r1,r1,r1,LSL #2       ;313
00024e  ebb20f41          CMP      r2,r1,LSL #1          ;313
000252  da45              BGE      |L1.736|
000254  f8b41050          LDRH     r1,[r4,#0x50]         ;315  ; cnt_end_ke
000258  1c49              ADDS     r1,r1,#1              ;315
00025a  b209              SXTH     r1,r1                 ;315
00025c  f8a41050          STRH     r1,[r4,#0x50]         ;315
000260  291e              CMP      r1,#0x1e              ;316
000262  db3f              BLT      |L1.740|
000264  7ce1              LDRB     r1,[r4,#0x13]         ;319  ; spc_stat
000266  2901              CMP      r1,#1                 ;319
000268  d121              BNE      |L1.686|
00026a  7d61              LDRB     r1,[r4,#0x15]         ;319  ; spc_phase
00026c  b9f9              CBNZ     r1,|L1.686|
00026e  f8360010          LDRH     r0,[r6,r0,LSL #1]     ;321
000272  f7fffffe          BL       lc640_read_int
000276  b201              SXTH     r1,r0                 ;321
000278  4867              LDR      r0,|L1.1048|
00027a  7d22              LDRB     r2,[r4,#0x14]         ;321  ; spc_bat
00027c  f9300012          LDRSH    r0,[r0,r2,LSL #1]     ;321
000280  f7fffffe          BL       lc640_write_int
000284  7d20              LDRB     r0,[r4,#0x14]         ;322  ; spc_bat
000286  f8360010          LDRH     r0,[r6,r0,LSL #1]     ;322
00028a  f7fffffe          BL       lc640_read_int
00028e  b281              UXTH     r1,r0                 ;322
000290  7d20              LDRB     r0,[r4,#0x14]         ;322  ; spc_bat
000292  f7fffffe          BL       ke_mem_hndl
000296  4861              LDR      r0,|L1.1052|
000298  7d21              LDRB     r1,[r4,#0x14]         ;323  ; spc_bat
00029a  e000              B        |L1.670|
                  |L1.668|
00029c  e044              B        |L1.808|
                  |L1.670|
00029e  f9300011          LDRSH    r0,[r0,r1,LSL #1]     ;323
0002a2  2100              MOVS     r1,#0                 ;323
0002a4  f7fffffe          BL       lc640_write_int
0002a8  2032              MOVS     r0,#0x32              ;324
0002aa  8360              STRH     r0,[r4,#0x1a]         ;324
0002ac  83a0              STRH     r0,[r4,#0x1c]         ;325
                  |L1.686|
0002ae  7d20              LDRB     r0,[r4,#0x14]         ;328  ; spc_bat
0002b0  4952              LDR      r1,|L1.1020|
0002b2  f1c00001          RSB      r0,r0,#1              ;328
0002b6  5c08              LDRB     r0,[r1,r0]            ;328
0002b8  2855              CMP      r0,#0x55              ;328
0002ba  d108              BNE      |L1.718|
0002bc  7567              STRB     r7,[r4,#0x15]         ;330
0002be  f8a47058          STRH     r7,[r4,#0x58]         ;331
0002c2  2101              MOVS     r1,#1                 ;332
0002c4  f44f70fb          MOV      r0,#0x1f6             ;332
0002c8  f7fffffe          BL       lc640_write_int
0002cc  e00a              B        |L1.740|
                  |L1.718|
0002ce  f8848013          STRB     r8,[r4,#0x13]         ;336
0002d2  f8a48054          STRH     r8,[r4,#0x54]         ;337
0002d6  2100              MOVS     r1,#0
0002d8  4648              MOV      r0,r9
0002da  f7fffffe          BL       lc640_write_int
0002de  e001              B        |L1.740|
                  |L1.736|
;;;339    				}
;;;340    			}
;;;341    		}
;;;342    	else cnt_end_ke=0;
0002e0  f8a48050          STRH     r8,[r4,#0x50]
                  |L1.740|
;;;343    
;;;344    	if((bat[spc_bat]._Ub>=bat[1-spc_bat]._Ub)&&(spc_phase==1))
0002e4  7d20              LDRB     r0,[r4,#0x14]  ; spc_bat
0002e6  eb000140          ADD      r1,r0,r0,LSL #1
0002ea  eb011100          ADD      r1,r1,r0,LSL #4
0002ee  f1c00001          RSB      r0,r0,#1
0002f2  eb000240          ADD      r2,r0,r0,LSL #1
0002f6  eb021000          ADD      r0,r2,r0,LSL #4
0002fa  eb050181          ADD      r1,r5,r1,LSL #2
0002fe  eb050080          ADD      r0,r5,r0,LSL #2
000302  f9b11002          LDRSH    r1,[r1,#2]
000306  f9b00002          LDRSH    r0,[r0,#2]
00030a  4281              CMP      r1,r0
00030c  db0c              BLT      |L1.808|
00030e  7d60              LDRB     r0,[r4,#0x15]  ; spc_phase
000310  2801              CMP      r0,#1
000312  d109              BNE      |L1.808|
;;;345    		{
;;;346    		spc_stat=spcOFF;
000314  f8848013          STRB     r8,[r4,#0x13]
;;;347    		__ee_spc_stat=spcOFF;
000318  f8a48054          STRH     r8,[r4,#0x54]
;;;348    		lc640_write_int(EE_SPC_STAT,spcOFF);
00031c  4648              MOV      r0,r9
00031e  e8bd47f0          POP      {r4-r10,lr}
000322  2100              MOVS     r1,#0
000324  f7ffbffe          B.W      lc640_write_int
                  |L1.808|
;;;349    		}
;;;350    	}
;;;351    			
;;;352    }
000328  e8bd87f0          POP      {r4-r10,pc}
;;;353    
                          ENDP

                  vz_start PROC
;;;354    //-----------------------------------------------
;;;355    char vz_start(char hour)
00032c  b570              PUSH     {r4-r6,lr}
;;;356    {          
00032e  4604              MOV      r4,r0
;;;357    char out;
;;;358    out=0;
000330  2600              MOVS     r6,#0
;;;359    if(spc_stat==spcOFF)
000332  4d31              LDR      r5,|L1.1016|
000334  7ce8              LDRB     r0,[r5,#0x13]  ; spc_stat
000336  b9f8              CBNZ     r0,|L1.888|
;;;360    	{
;;;361    	spc_stat=spcVZ;
000338  2102              MOVS     r1,#2
00033a  f1050516          ADD      r5,r5,#0x16
00033e  f8051c03          STRB     r1,[r5,#-3]
;;;362    	__ee_spc_stat=spcVZ; 
000342  87e9              STRH     r1,[r5,#0x3e]
;;;363    	lc640_write_int(EE_SPC_STAT,__ee_spc_stat);   
000344  f44f70f8          MOV      r0,#0x1f0
000348  f7fffffe          BL       lc640_write_int
;;;364    	vz_cnt_h=hour;
00034c  86ec              STRH     r4,[r5,#0x36]
;;;365    	__ee_vz_cnt=hour*60;
00034e  ebc41004          RSB      r0,r4,r4,LSL #4
000352  0084              LSLS     r4,r0,#2
000354  87ac              STRH     r4,[r5,#0x3c]
000356  4621              MOV      r1,r4
;;;366    	lc640_write_int(EE_VZ_CNT,__ee_vz_cnt);
000358  f44f70f9          MOV      r0,#0x1f2
00035c  f7fffffe          BL       lc640_write_int
;;;367    	lc640_write_int(EE_SPC_VZ_LENGT,hour*60);	
000360  4621              MOV      r1,r4
000362  f44f70ff          MOV      r0,#0x1fe
000366  f7fffffe          BL       lc640_write_int
;;;368    	vz_cnt_h_=0;
00036a  2000              MOVS     r0,#0
00036c  8728              STRH     r0,[r5,#0x38]
;;;369    	vz_cnt_s=0;
00036e  8668              STRH     r0,[r5,#0x32]
;;;370    	out=1;
000370  2601              MOVS     r6,#1
;;;371    	vz_mem_hndl(1);
000372  2001              MOVS     r0,#1
000374  f7fffffe          BL       vz_mem_hndl
                  |L1.888|
;;;372    	}
;;;373    //else if((spc_stat==spc_KE1p1)||(spc_stat==spc_KE1p2)) out=22; 
;;;374    //else if((spc_stat==spc_KE2p1)||(spc_stat==spc_KE2p2)) out=33;
;;;375    //plazma=out;	
;;;376    return out;
000378  4630              MOV      r0,r6
;;;377    }
00037a  bd70              POP      {r4-r6,pc}
;;;378    
                          ENDP

                  vz_stop PROC
;;;379    //-----------------------------------------------
;;;380    void vz_stop(void)
00037c  b510              PUSH     {r4,lr}
;;;381    {
;;;382    if(spc_stat==spcVZ)
00037e  4c1e              LDR      r4,|L1.1016|
000380  7ce0              LDRB     r0,[r4,#0x13]  ; spc_stat
000382  2802              CMP      r0,#2
000384  d112              BNE      |L1.940|
;;;383         {
;;;384    vz_mem_hndl(vz_cnt_h);          
000386  f1040412          ADD      r4,r4,#0x12
00038a  8f60              LDRH     r0,[r4,#0x3a]  ; vz_cnt_h
00038c  f7fffffe          BL       vz_mem_hndl
;;;385    vz_cnt_s=0;
000390  2000              MOVS     r0,#0
000392  86e0              STRH     r0,[r4,#0x36]
;;;386    vz_cnt_h=0;
000394  8760              STRH     r0,[r4,#0x3a]
;;;387    vz_cnt_h_=0;
000396  87a0              STRH     r0,[r4,#0x3c]
;;;388    spc_stat=spcOFF;
000398  7060              STRB     r0,[r4,#1]
;;;389    
;;;390    		__ee_spc_stat=spcOFF;
00039a  f8a40042          STRH     r0,[r4,#0x42]
;;;391    		lc640_write_int(EE_SPC_STAT,spcOFF);
00039e  e8bd4010          POP      {r4,lr}
0003a2  2100              MOVS     r1,#0
0003a4  f44f70f8          MOV      r0,#0x1f0
0003a8  f7ffbffe          B.W      lc640_write_int
                  |L1.940|
;;;392         }
;;;393    
;;;394    }
0003ac  bd10              POP      {r4,pc}
;;;395    
                          ENDP

                  avz_next_date_hndl PROC
;;;396    //-----------------------------------------------
;;;397    void avz_next_date_hndl(void)
0003ae  b570              PUSH     {r4-r6,lr}
;;;398    {
;;;399    if((LPC_RTC->MONTH+AVZ)>12)lc640_write_int(EE_YEAR_AVZ,LPC_RTC->YEAR+1);
0003b0  4c17              LDR      r4,|L1.1040|
0003b2  3c20              SUBS     r4,r4,#0x20
0003b4  f8940038          LDRB     r0,[r4,#0x38]
0003b8  4d19              LDR      r5,|L1.1056|
0003ba  7829              LDRB     r1,[r5,#0]  ; AVZ
0003bc  4408              ADD      r0,r0,r1
0003be  280c              CMP      r0,#0xc
0003c0  d906              BLS      |L1.976|
0003c2  8fa0              LDRH     r0,[r4,#0x3c]
0003c4  1c40              ADDS     r0,r0,#1
0003c6  b201              SXTH     r1,r0
0003c8  20b8              MOVS     r0,#0xb8
0003ca  f7fffffe          BL       lc640_write_int
0003ce  e004              B        |L1.986|
                  |L1.976|
;;;400    else lc640_write_int(EE_YEAR_AVZ,LPC_RTC->YEAR);
0003d0  f9b4103c          LDRSH    r1,[r4,#0x3c]
0003d4  20b8              MOVS     r0,#0xb8
0003d6  f7fffffe          BL       lc640_write_int
                  |L1.986|
;;;401    
;;;402    //lc640_write_int(EE_YEAR_AVZ,6);
;;;403    
;;;404    if((LPC_RTC->MONTH+AVZ)>12)lc640_write_int(EE_MONTH_AVZ,(LPC_RTC->MONTH+AVZ)-12);
0003da  f8941038          LDRB     r1,[r4,#0x38]
0003de  7828              LDRB     r0,[r5,#0]  ; AVZ
0003e0  4401              ADD      r1,r1,r0
0003e2  290c              CMP      r1,#0xc
0003e4  d91e              BLS      |L1.1060|
0003e6  f8941038          LDRB     r1,[r4,#0x38]
0003ea  380c              SUBS     r0,r0,#0xc
0003ec  4401              ADD      r1,r1,r0
0003ee  20b6              MOVS     r0,#0xb6
0003f0  f7fffffe          BL       lc640_write_int
0003f4  e01c              B        |L1.1072|
0003f6  0000              DCW      0x0000
                  |L1.1016|
                          DCD      ||area_number.21||
                  |L1.1020|
                          DCD      BAT_IS_ON
                  |L1.1024|
                          DCD      bat
                  |L1.1028|
                          DCD      IKB
                  |L1.1032|
                          DCD      ADR_EE_BAT_ZAR_CNT_KE
                  |L1.1036|
                          DCD      bat_u_old_cnt
                  |L1.1040|
                          DCD      0x40024020
                  |L1.1044|
                          DCD      USIGN
                  |L1.1048|
                          DCD      ADR_EE_BAT_C_REAL
                  |L1.1052|
                          DCD      ADR_EE_BAT_ZAR_CNT
                  |L1.1056|
                          DCD      AVZ
                  |L1.1060|
;;;405    else lc640_write_int(EE_MONTH_AVZ,LPC_RTC->MONTH+AVZ);                                                 
000424  f8941038          LDRB     r1,[r4,#0x38]
000428  4401              ADD      r1,r1,r0
00042a  20b6              MOVS     r0,#0xb6
00042c  f7fffffe          BL       lc640_write_int
                  |L1.1072|
;;;406    
;;;407    //lc640_write_int(EE_MONTH_AVZ,5);
;;;408    
;;;409    if(LPC_RTC->DOM>28) lc640_write_int(EE_DATE_AVZ,28);
000430  f894002c          LDRB     r0,[r4,#0x2c]
000434  281c              CMP      r0,#0x1c
000436  d904              BLS      |L1.1090|
000438  211c              MOVS     r1,#0x1c
00043a  20b4              MOVS     r0,#0xb4
00043c  f7fffffe          BL       lc640_write_int
000440  e004              B        |L1.1100|
                  |L1.1090|
;;;410    else lc640_write_int(EE_DATE_AVZ,LPC_RTC->DOM);
000442  f894102c          LDRB     r1,[r4,#0x2c]
000446  20b4              MOVS     r0,#0xb4
000448  f7fffffe          BL       lc640_write_int
                  |L1.1100|
;;;411    
;;;412    //lc640_write_int(EE_DATE_AVZ,4);
;;;413    
;;;414    lc640_write_int(EE_HOUR_AVZ,LPC_RTC->HOUR);
00044c  f1040420          ADD      r4,r4,#0x20
000450  7a21              LDRB     r1,[r4,#8]
000452  f04f00ae          MOV      r0,#0xae
000456  f7fffffe          BL       lc640_write_int
;;;415    lc640_write_int(EE_MIN_AVZ,LPC_RTC->MIN);
00045a  7921              LDRB     r1,[r4,#4]
00045c  20b0              MOVS     r0,#0xb0
00045e  f7fffffe          BL       lc640_write_int
;;;416    lc640_write_int(EE_SEC_AVZ,LPC_RTC->SEC);
000462  7821              LDRB     r1,[r4,#0]
000464  e8bd4070          POP      {r4-r6,lr}
000468  20b2              MOVS     r0,#0xb2
00046a  f7ffbffe          B.W      lc640_write_int
;;;417    
;;;418    }
;;;419    
                          ENDP

                  avz_drv PROC
;;;420    //-----------------------------------------------
;;;421    void avz_drv(void)                               
00046e  b510              PUSH     {r4,lr}
;;;422    {                
;;;423    if(AVZ!=AVZ_OFF)
000470  48fc              LDR      r0,|L1.2148|
;;;424    	{
;;;425    	if((LPC_RTC->YEAR==YEAR_AVZ)&&(LPC_RTC->MONTH==MONTH_AVZ)&&(LPC_RTC->DOM==DATE_AVZ)&&(LPC_RTC->HOUR==HOUR_AVZ)&&(LPC_RTC->MIN==MIN_AVZ)&&(LPC_RTC->SEC==SEC_AVZ))
;;;426    		{
;;;427    		bAVZ=1;
000472  4cfd              LDR      r4,|L1.2152|
000474  7800              LDRB     r0,[r0,#0]            ;423  ; AVZ
000476  b328              CBZ      r0,|L1.1220|
000478  48fc              LDR      r0,|L1.2156|
00047a  8f82              LDRH     r2,[r0,#0x3c]         ;425
00047c  49fc              LDR      r1,|L1.2160|
00047e  8809              LDRH     r1,[r1,#0]            ;425  ; YEAR_AVZ
000480  428a              CMP      r2,r1                 ;425
000482  d11f              BNE      |L1.1220|
000484  f8902038          LDRB     r2,[r0,#0x38]         ;425
000488  49fa              LDR      r1,|L1.2164|
00048a  8809              LDRH     r1,[r1,#0]            ;425  ; MONTH_AVZ
00048c  428a              CMP      r2,r1                 ;425
00048e  d119              BNE      |L1.1220|
000490  f890102c          LDRB     r1,[r0,#0x2c]         ;425
000494  4af8              LDR      r2,|L1.2168|
000496  8812              LDRH     r2,[r2,#0]            ;425  ; DATE_AVZ
000498  4291              CMP      r1,r2                 ;425
00049a  d113              BNE      |L1.1220|
00049c  f8901028          LDRB     r1,[r0,#0x28]         ;425
0004a0  4af6              LDR      r2,|L1.2172|
0004a2  8812              LDRH     r2,[r2,#0]            ;425  ; HOUR_AVZ
0004a4  4291              CMP      r1,r2                 ;425
0004a6  d10d              BNE      |L1.1220|
0004a8  f8901024          LDRB     r1,[r0,#0x24]         ;425
0004ac  4af4              LDR      r2,|L1.2176|
0004ae  8812              LDRH     r2,[r2,#0]            ;425  ; MIN_AVZ
0004b0  4291              CMP      r1,r2                 ;425
0004b2  d107              BNE      |L1.1220|
0004b4  f8900020          LDRB     r0,[r0,#0x20]         ;425
0004b8  49f2              LDR      r1,|L1.2180|
0004ba  8809              LDRH     r1,[r1,#0]            ;425  ; SEC_AVZ
0004bc  4288              CMP      r0,r1                 ;425
0004be  d101              BNE      |L1.1220|
0004c0  2001              MOVS     r0,#1
0004c2  75a0              STRB     r0,[r4,#0x16]
                  |L1.1220|
;;;428    		}
;;;429    	}
;;;430    if(bAVZ)
0004c4  7da0              LDRB     r0,[r4,#0x16]  ; bAVZ
0004c6  2800              CMP      r0,#0
0004c8  d00b              BEQ      |L1.1250|
;;;431    	{
;;;432    	if(vz_start(AVZ_TIME))
0004ca  48ef              LDR      r0,|L1.2184|
0004cc  8800              LDRH     r0,[r0,#0]  ; AVZ_TIME
0004ce  b2c0              UXTB     r0,r0
0004d0  f7fffffe          BL       vz_start
0004d4  2800              CMP      r0,#0
0004d6  d004              BEQ      |L1.1250|
;;;433    		{
;;;434    		bAVZ=0;
0004d8  2000              MOVS     r0,#0
0004da  75a0              STRB     r0,[r4,#0x16]
;;;435    		avz_next_date_hndl();
0004dc  e8bd4010          POP      {r4,lr}
0004e0  e7fe              B        avz_next_date_hndl
                  |L1.1250|
;;;436    		}
;;;437    	}	
;;;438    
;;;439    }
0004e2  bd10              POP      {r4,pc}
;;;440    
                          ENDP

                  vz_drv PROC
;;;441    //-----------------------------------------------
;;;442    void vz_drv(void)
0004e4  b570              PUSH     {r4-r6,lr}
;;;443    { 
;;;444    if(spc_stat==spcVZ)
0004e6  4ce0              LDR      r4,|L1.2152|
0004e8  7ce0              LDRB     r0,[r4,#0x13]  ; spc_stat
0004ea  2802              CMP      r0,#2
0004ec  d13f              BNE      |L1.1390|
;;;445    	{
;;;446    	if(vz_cnt_s_<3600)
0004ee  f8b4004a          LDRH     r0,[r4,#0x4a]  ; vz_cnt_s_
0004f2  f44f6161          MOV      r1,#0xe10
;;;447    		{
;;;448    		vz_cnt_s_++;
;;;449    		if(vz_cnt_s_>=3600)
;;;450    			{
;;;451    			vz_cnt_s_=0;
0004f6  2500              MOVS     r5,#0
0004f8  4288              CMP      r0,r1                 ;446
0004fa  d212              BCS      |L1.1314|
0004fc  1c40              ADDS     r0,r0,#1              ;448
0004fe  b280              UXTH     r0,r0                 ;448
000500  f8a4004a          STRH     r0,[r4,#0x4a]         ;448
000504  4288              CMP      r0,r1                 ;449
000506  d30c              BCC      |L1.1314|
000508  f8a4504a          STRH     r5,[r4,#0x4a]
;;;452    			if(vz_cnt_h)
00050c  f8b4004c          LDRH     r0,[r4,#0x4c]  ; vz_cnt_h
000510  b138              CBZ      r0,|L1.1314|
;;;453    				{
;;;454    				vz_cnt_h--;
000512  1e40              SUBS     r0,r0,#1
000514  f8240f4c          STRH     r0,[r4,#0x4c]!
;;;455    				vz_cnt_h_++;
000518  8860              LDRH     r0,[r4,#2]  ; vz_cnt_h_
00051a  1c40              ADDS     r0,r0,#1
00051c  8060              STRH     r0,[r4,#2]
00051e  f1a4044c          SUB      r4,r4,#0x4c
                  |L1.1314|
;;;456    				}
;;;457    			}
;;;458    		}
;;;459    
;;;460    
;;;461    	if(vz_cnt_s<60)
000522  f8b40048          LDRH     r0,[r4,#0x48]  ; vz_cnt_s
000526  283c              CMP      r0,#0x3c
000528  d221              BCS      |L1.1390|
;;;462    		{
;;;463    		vz_cnt_s++;
00052a  1c40              ADDS     r0,r0,#1
00052c  b280              UXTH     r0,r0
00052e  f8a40048          STRH     r0,[r4,#0x48]
;;;464    		if(vz_cnt_s>=60)
000532  283c              CMP      r0,#0x3c
000534  d31b              BCC      |L1.1390|
;;;465    			{
;;;466    			vz_cnt_s=0;
000536  f8245f48          STRH     r5,[r4,#0x48]!
;;;467    			
;;;468    			__ee_vz_cnt--;
00053a  8960              LDRH     r0,[r4,#0xa]  ; __ee_vz_cnt
00053c  1e40              SUBS     r0,r0,#1
00053e  b201              SXTH     r1,r0
000540  8161              STRH     r1,[r4,#0xa]
;;;469    			lc640_write_int(EE_VZ_CNT,__ee_vz_cnt);
000542  f44f70f9          MOV      r0,#0x1f2
000546  f7fffffe          BL       lc640_write_int
;;;470    			if(!__ee_vz_cnt)
00054a  8960              LDRH     r0,[r4,#0xa]  ; __ee_vz_cnt
00054c  f1a40448          SUB      r4,r4,#0x48
000550  2800              CMP      r0,#0
000552  d10c              BNE      |L1.1390|
;;;471    				{
;;;472    				spc_stat=spcOFF;
000554  74e5              STRB     r5,[r4,#0x13]
;;;473    						__ee_spc_stat=spcOFF;
000556  f8a45054          STRH     r5,[r4,#0x54]
;;;474    		lc640_write_int(EE_SPC_STAT,spcOFF);
00055a  4601              MOV      r1,r0
00055c  f44f70f8          MOV      r0,#0x1f0
000560  f7fffffe          BL       lc640_write_int
;;;475    				vz_mem_hndl(0);
000564  e8bd4070          POP      {r4-r6,lr}
000568  2000              MOVS     r0,#0
00056a  f7ffbffe          B.W      vz_mem_hndl
                  |L1.1390|
;;;476    				}
;;;477    			}
;;;478    		}
;;;479    
;;;480    	}
;;;481    
;;;482    
;;;483    } 
00056e  bd70              POP      {r4-r6,pc}
;;;484    
                          ENDP

                  kb_init PROC
;;;488    //-----------------------------------------------
;;;489    void kb_init(void)
000570  48c6              LDR      r0,|L1.2188|
;;;490    {
;;;491    main_kb_cnt=(TBAT*60)-60/*120*/;
000572  f06f013b          MVN      r1,#0x3b
000576  8800              LDRH     r0,[r0,#0]  ; TBAT
000578  ebc01000          RSB      r0,r0,r0,LSL #4
00057c  eb010080          ADD      r0,r1,r0,LSL #2
000580  49b9              LDR      r1,|L1.2152|
000582  8788              STRH     r0,[r1,#0x3c]
;;;492    }
000584  4770              BX       lr
;;;493    
                          ENDP

                  kb_hndl PROC
;;;494    //-----------------------------------------------
;;;495    void kb_hndl(void)
000586  e92d5ff0          PUSH     {r4-r12,lr}
;;;496    {
;;;497    
;;;498    static signed short ibat[2],ibat_[2],ibat_ips,ibat_ips_;
;;;499    #ifdef UKU_TELECORE2015
;;;500    if(((++main_kb_cnt>=TBAT*60)&&(TBAT))&&(BAT_TYPE==0))
;;;501    #else 
;;;502    if(((++main_kb_cnt>=TBAT*60)&&(TBAT)))
00058a  f8dfb2dc          LDR      r11,|L1.2152|
;;;503    #endif
;;;504    	{
;;;505    	main_kb_cnt=0;
;;;506    	
;;;507    	kb_start[0]=0;
;;;508    	kb_start[1]=0;
;;;509    	kb_start_ips=0;
;;;510    
;;;511    	if( (BAT_IS_ON[0]==bisON) && (bat[0]._Ub>80) && ( (abs(bat[0]._Ib)<IKB) || (bat[0]._av&1) ) ) kb_start[0]=1;
;;;512    	if( (BAT_IS_ON[1]==bisON) && (bat[1]._Ub>80) && ( (abs(bat[1]._Ib)<IKB) || (bat[1]._av&1) ) ) kb_start[1]=1;
;;;513    #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;514    	if( (!ips_bat_av_vzvod)                      && ((abs(Ib_ips_termokompensat)<IKB) || (bat_ips._av&1) ) ) kb_start_ips=1;
00058e  f8df8300          LDR      r8,|L1.2192|
000592  f8bb003c          LDRH     r0,[r11,#0x3c]        ;502  ; main_kb_cnt
000596  2500              MOVS     r5,#0                 ;502
000598  1c40              ADDS     r0,r0,#1              ;502
00059a  b201              SXTH     r1,r0                 ;502
00059c  48bb              LDR      r0,|L1.2188|
00059e  f8ab103c          STRH     r1,[r11,#0x3c]        ;502
0005a2  f9b00000          LDRSH    r0,[r0,#0]            ;502  ; TBAT
0005a6  4ebb              LDR      r6,|L1.2196|
0005a8  ebc01200          RSB      r2,r0,r0,LSL #4       ;502
0005ac  f8dfa2e8          LDR      r10,|L1.2200|
;;;515    #endif	
;;;516    	if( (net_av) || (num_of_wrks_bps==0) || ( (spc_stat!=spcOFF) && (spc_stat!=spcVZ) ) ) 
;;;517    		{
;;;518    		kb_start[0]=0;
;;;519    		kb_start[1]=0;
;;;520    		kb_start_ips=0;
;;;521    		}
;;;522    
;;;523    	if((kb_start[0]==1)||(kb_start[1]==1)||(kb_start_ips==1))
;;;524    		{
;;;525    		kb_cnt_1lev=10;
0005b0  270a              MOVS     r7,#0xa
0005b2  f04f0901          MOV      r9,#1                 ;511
0005b6  f10b0442          ADD      r4,r11,#0x42          ;507
0005ba  ebb10f82          CMP      r1,r2,LSL #2          ;502
0005be  db63              BLT      |L1.1672|
0005c0  2800              CMP      r0,#0                 ;502
0005c2  d061              BEQ      |L1.1672|
0005c4  f8ab503c          STRH     r5,[r11,#0x3c]        ;505
0005c8  7025              STRB     r5,[r4,#0]            ;507
0005ca  7065              STRB     r5,[r4,#1]            ;508
0005cc  f88b500d          STRB     r5,[r11,#0xd]         ;509
0005d0  48b2              LDR      r0,|L1.2204|
0005d2  7800              LDRB     r0,[r0,#0]            ;511  ; BAT_IS_ON
0005d4  2855              CMP      r0,#0x55              ;511
0005d6  d111              BNE      |L1.1532|
0005d8  f9b60002          LDRSH    r0,[r6,#2]            ;511  ; bat
0005dc  2850              CMP      r0,#0x50              ;511
0005de  dd0d              BLE      |L1.1532|
0005e0  f9b60008          LDRSH    r0,[r6,#8]            ;511  ; bat
0005e4  f7fffffe          BL       abs
0005e8  f9ba1000          LDRSH    r1,[r10,#0]           ;511  ; IKB
0005ec  4288              CMP      r0,r1                 ;511
0005ee  db03              BLT      |L1.1528|
0005f0  f896003d          LDRB     r0,[r6,#0x3d]         ;511  ; bat
0005f4  07c0              LSLS     r0,r0,#31             ;511
0005f6  d001              BEQ      |L1.1532|
                  |L1.1528|
0005f8  f8849000          STRB     r9,[r4,#0]            ;511
                  |L1.1532|
0005fc  48a7              LDR      r0,|L1.2204|
0005fe  7840              LDRB     r0,[r0,#1]            ;512  ; BAT_IS_ON
000600  2855              CMP      r0,#0x55              ;512
000602  d111              BNE      |L1.1576|
000604  f9b6004e          LDRSH    r0,[r6,#0x4e]         ;512  ; bat
000608  2850              CMP      r0,#0x50              ;512
00060a  dd0d              BLE      |L1.1576|
00060c  f9b60054          LDRSH    r0,[r6,#0x54]         ;512  ; bat
000610  f7fffffe          BL       abs
000614  f9ba1000          LDRSH    r1,[r10,#0]           ;512  ; IKB
000618  4288              CMP      r0,r1                 ;512
00061a  db03              BLT      |L1.1572|
00061c  f8960089          LDRB     r0,[r6,#0x89]         ;512  ; bat
000620  07c0              LSLS     r0,r0,#31             ;512
000622  d001              BEQ      |L1.1576|
                  |L1.1572|
000624  f8849001          STRB     r9,[r4,#1]            ;512
                  |L1.1576|
000628  489d              LDR      r0,|L1.2208|
00062a  7800              LDRB     r0,[r0,#0]            ;514  ; ips_bat_av_vzvod
00062c  b970              CBNZ     r0,|L1.1612|
00062e  f9b80000          LDRSH    r0,[r8,#0]            ;514  ; Ib_ips_termokompensat
000632  f7fffffe          BL       abs
000636  f9ba1000          LDRSH    r1,[r10,#0]           ;514  ; IKB
00063a  4288              CMP      r0,r1                 ;514
00063c  db04              BLT      |L1.1608|
00063e  4899              LDR      r0,|L1.2212|
000640  f890003d          LDRB     r0,[r0,#0x3d]         ;514  ; bat_ips
000644  07c0              LSLS     r0,r0,#31             ;514
000646  d001              BEQ      |L1.1612|
                  |L1.1608|
000648  f88b900d          STRB     r9,[r11,#0xd]         ;514
                  |L1.1612|
00064c  4896              LDR      r0,|L1.2216|
00064e  7800              LDRB     r0,[r0,#0]            ;516  ; net_av
000650  b938              CBNZ     r0,|L1.1634|
000652  f89b000e          LDRB     r0,[r11,#0xe]         ;516  ; num_of_wrks_bps
000656  b120              CBZ      r0,|L1.1634|
000658  f89b0013          LDRB     r0,[r11,#0x13]        ;516  ; spc_stat
00065c  b128              CBZ      r0,|L1.1642|
00065e  2802              CMP      r0,#2                 ;516
000660  d003              BEQ      |L1.1642|
                  |L1.1634|
000662  7025              STRB     r5,[r4,#0]            ;518
000664  7065              STRB     r5,[r4,#1]            ;519
000666  f88b500d          STRB     r5,[r11,#0xd]         ;520
                  |L1.1642|
00066a  7820              LDRB     r0,[r4,#0]            ;523  ; kb_start
00066c  2801              CMP      r0,#1                 ;523
00066e  d006              BEQ      |L1.1662|
000670  7860              LDRB     r0,[r4,#1]            ;523  ; kb_start
000672  2801              CMP      r0,#1                 ;523
000674  d003              BEQ      |L1.1662|
000676  f89b000d          LDRB     r0,[r11,#0xd]         ;523  ; kb_start_ips
00067a  2801              CMP      r0,#1                 ;523
00067c  d102              BNE      |L1.1668|
                  |L1.1662|
00067e  f8ab703e          STRH     r7,[r11,#0x3e]
000682  e001              B        |L1.1672|
                  |L1.1668|
;;;526    		}
;;;527    	else kb_cnt_1lev=0;
000684  f8ab503e          STRH     r5,[r11,#0x3e]
                  |L1.1672|
;;;528    	}
;;;529    
;;;530    if(kb_cnt_1lev)
000688  4659              MOV      r1,r11
00068a  f9bb003e          LDRSH    r0,[r11,#0x3e]  ; kb_cnt_1lev
;;;531    	{
;;;532    	kb_cnt_1lev--;
;;;533    
;;;534    	if(kb_cnt_1lev>5)mess_send(MESS2CNTRL_HNDL,PARAM_CNTRL_STAT_PLUS,30,15);
;;;535    	else if(kb_cnt_1lev>0) mess_send(MESS2CNTRL_HNDL,PARAM_CNTRL_STAT_MINUS,30,15);
;;;536    
;;;537    
;;;538    	if(kb_cnt_1lev==5)
;;;539    		{
;;;540    		ibat[0]=abs(bat[0]._Ib);
00068e  f8dfb1d8          LDR      r11,|L1.2152|
000692  2800              CMP      r0,#0                 ;530
000694  f10b0b60          ADD      r11,r11,#0x60
000698  d06f              BEQ      |L1.1914|
00069a  1e40              SUBS     r0,r0,#1              ;532
00069c  b200              SXTH     r0,r0                 ;532
00069e  4689              MOV      r9,r1                 ;532
0006a0  87c8              STRH     r0,[r1,#0x3e]         ;532
0006a2  2805              CMP      r0,#5                 ;534
0006a4  dd06              BLE      |L1.1716|
0006a6  230f              MOVS     r3,#0xf               ;534
0006a8  221e              MOVS     r2,#0x1e              ;534
0006aa  2164              MOVS     r1,#0x64              ;534
0006ac  20e1              MOVS     r0,#0xe1              ;534
0006ae  f7fffffe          BL       mess_send
0006b2  e007              B        |L1.1732|
                  |L1.1716|
0006b4  2800              CMP      r0,#0                 ;535
0006b6  dd05              BLE      |L1.1732|
0006b8  230f              MOVS     r3,#0xf               ;535
0006ba  221e              MOVS     r2,#0x1e              ;535
0006bc  2169              MOVS     r1,#0x69              ;535
0006be  20e1              MOVS     r0,#0xe1              ;535
0006c0  f7fffffe          BL       mess_send
                  |L1.1732|
0006c4  f8b9003e          LDRH     r0,[r9,#0x3e]         ;538  ; kb_cnt_1lev
0006c8  2805              CMP      r0,#5                 ;538
0006ca  d111              BNE      |L1.1776|
0006cc  f9b60008          LDRSH    r0,[r6,#8]  ; bat
0006d0  f7fffffe          BL       abs
0006d4  f8ab0000          STRH     r0,[r11,#0]
;;;541    		ibat[1]=abs(bat[1]._Ib);
0006d8  f9b60054          LDRSH    r0,[r6,#0x54]  ; bat
0006dc  f7fffffe          BL       abs
0006e0  f8ab0002          STRH     r0,[r11,#2]
;;;542    		ibat_ips=abs(Ib_ips_termokompensat);
0006e4  f9b80000          LDRSH    r0,[r8,#0]  ; Ib_ips_termokompensat
0006e8  f7fffffe          BL       abs
0006ec  f8a90020          STRH     r0,[r9,#0x20]
                  |L1.1776|
;;;543    		}
;;;544    	
;;;545    	if(kb_cnt_1lev==0)
0006f0  485d              LDR      r0,|L1.2152|
0006f2  8fc0              LDRH     r0,[r0,#0x3e]  ; kb_cnt_1lev
0006f4  2800              CMP      r0,#0
0006f6  d159              BNE      |L1.1964|
;;;546    		{
;;;547    		ibat_[0]=abs(bat[0]._Ib);
0006f8  f9b60008          LDRSH    r0,[r6,#8]  ; bat
0006fc  f7fffffe          BL       abs
000700  f8df9164          LDR      r9,|L1.2152|
000704  f1090964          ADD      r9,r9,#0x64
000708  f8a90000          STRH     r0,[r9,#0]
;;;548    		ibat_[1]=abs(bat[1]._Ib);
00070c  f9b60054          LDRSH    r0,[r6,#0x54]  ; bat
000710  f7fffffe          BL       abs
000714  f8a90002          STRH     r0,[r9,#2]
;;;549    		ibat_ips_=abs(Ib_ips_termokompensat);
000718  f9b80000          LDRSH    r0,[r8,#0]  ; Ib_ips_termokompensat
00071c  f7fffffe          BL       abs
000720  f8df8144          LDR      r8,|L1.2152|
000724  f8a80022          STRH     r0,[r8,#0x22]
;;;550    
;;;551    		kb_cnt_2lev=0;
000728  f8a85040          STRH     r5,[r8,#0x40]
;;;552    
;;;553    
;;;554    		if(( (ibat[0]+ibat_[0]) < IKB )&& (kb_start[0]==1))
00072c  f9bb0000          LDRSH    r0,[r11,#0]  ; ibat
000730  f9b91000          LDRSH    r1,[r9,#0]  ; ibat_
000734  4408              ADD      r0,r0,r1
000736  f9ba1000          LDRSH    r1,[r10,#0]  ; IKB
00073a  4288              CMP      r0,r1
00073c  da05              BGE      |L1.1866|
00073e  7820              LDRB     r0,[r4,#0]  ; kb_start
000740  2801              CMP      r0,#1
000742  d102              BNE      |L1.1866|
;;;555    			{
;;;556    			kb_cnt_2lev=10;  
000744  f8a87040          STRH     r7,[r8,#0x40]
000748  e008              B        |L1.1884|
                  |L1.1866|
;;;557    			}
;;;558    		else if(bat[0]._Ub>200)
00074a  f9b60002          LDRSH    r0,[r6,#2]  ; bat
00074e  28c8              CMP      r0,#0xc8
000750  dd04              BLE      |L1.1884|
;;;559    			{
;;;560    			kb_start[0]=0;
000752  7025              STRB     r5,[r4,#0]
;;;561    			avar_bat_hndl(0,0);
000754  2100              MOVS     r1,#0
000756  4608              MOV      r0,r1
000758  f7fffffe          BL       avar_bat_hndl
                  |L1.1884|
;;;562    			}
;;;563    		
;;;564    		if(( (ibat[1]+ibat_[1]) < IKB ) && (kb_start[1]==1))
00075c  f9bb0002          LDRSH    r0,[r11,#2]  ; ibat
000760  f9b91002          LDRSH    r1,[r9,#2]  ; ibat_
000764  4408              ADD      r0,r0,r1
000766  f9ba1000          LDRSH    r1,[r10,#0]  ; IKB
00076a  4288              CMP      r0,r1
00076c  da06              BGE      |L1.1916|
00076e  7860              LDRB     r0,[r4,#1]  ; kb_start
000770  2801              CMP      r0,#1
000772  d103              BNE      |L1.1916|
;;;565    			{
;;;566    			kb_cnt_2lev=10;     
000774  f8a87040          STRH     r7,[r8,#0x40]
000778  e009              B        |L1.1934|
                  |L1.1914|
00077a  e019              B        |L1.1968|
                  |L1.1916|
;;;567    			}
;;;568    		else  if(bat[1]._Ub>200)
00077c  f9b6004e          LDRSH    r0,[r6,#0x4e]  ; bat
000780  28c8              CMP      r0,#0xc8
000782  dd04              BLE      |L1.1934|
;;;569    			{
;;;570    			kb_start[1]=0;
000784  7065              STRB     r5,[r4,#1]
;;;571    			avar_bat_hndl(1,0);
000786  2100              MOVS     r1,#0
000788  2001              MOVS     r0,#1
00078a  f7fffffe          BL       avar_bat_hndl
                  |L1.1934|
;;;572    			}
;;;573    #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;574    		if(( (ibat_ips+ibat_ips_) < IKB ) && (kb_start_ips==1))
00078e  f9b80020          LDRSH    r0,[r8,#0x20]  ; ibat_ips
000792  f9b81022          LDRSH    r1,[r8,#0x22]  ; ibat_ips_
000796  4408              ADD      r0,r0,r1
000798  f9ba1000          LDRSH    r1,[r10,#0]  ; IKB
00079c  4288              CMP      r0,r1
00079e  da05              BGE      |L1.1964|
0007a0  f898000d          LDRB     r0,[r8,#0xd]  ; kb_start_ips
0007a4  2801              CMP      r0,#1
0007a6  d101              BNE      |L1.1964|
;;;575    			{
;;;576    			kb_cnt_2lev=10;     
0007a8  f8a87040          STRH     r7,[r8,#0x40]
                  |L1.1964|
;;;577    			}
;;;578    /*		else  if(bat[1]._Ub>200)
;;;579    			{
;;;580    			kb_start[1]=0;
;;;581    			avar_bat_hndl(1,0);
;;;582    			} */
;;;583    #endif
;;;584    		}	
;;;585    
;;;586    
;;;587    	}
;;;588    else if(kb_cnt_2lev)
;;;589    	{
;;;590    	kb_cnt_2lev--;
;;;591    
;;;592    	if(kb_cnt_2lev>5)mess_send(MESS2CNTRL_HNDL,PARAM_CNTRL_STAT_PLUS,200,15);
;;;593    	else if(kb_cnt_2lev>0) mess_send(MESS2CNTRL_HNDL,PARAM_CNTRL_STAT_MINUS,200,15);
;;;594    
;;;595    
;;;596    	if(kb_cnt_2lev==5)
;;;597    		{
;;;598    		ibat[0]=abs(bat[0]._Ib);
;;;599    		ibat[1]=abs(bat[1]._Ib);
;;;600    		ibat_ips=abs(Ib_ips_termokompensat);
;;;601    		}
;;;602    	
;;;603    	if(kb_cnt_2lev==0)
;;;604    		{
;;;605    		ibat_[0]=abs(bat[0]._Ib);
;;;606    		ibat_[1]=abs(bat[1]._Ib);
;;;607    		ibat_ips_=abs(Ib_ips_termokompensat);
;;;608    
;;;609    		kb_full_ver=0;
;;;610    
;;;611    		if(( (ibat[0]+ibat_[0]) < IKB ) && (kb_start[0]==1))
;;;612    			{
;;;613    			kb_full_ver=1;  
;;;614    			}
;;;615    		else if(bat[0]._Ub>200)			
;;;616    			{
;;;617    			kb_start[0]=0;
;;;618    			avar_bat_hndl(0,0);
;;;619    			}
;;;620    
;;;621    		if(( (ibat[1]+ibat_[1]) < IKB ) && (kb_start[1]==1))
;;;622    			{
;;;623    			kb_full_ver=1;     
;;;624    			}
;;;625    		else	if(bat[1]._Ub>200)		
;;;626    			{
;;;627    			kb_start[1]=0;
;;;628    			avar_bat_hndl(1,0);
;;;629    			}
;;;630    #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;631    		if(( (ibat_ips+ibat_ips_) < IKB )  && (kb_start_ips==1))
;;;632    			{
;;;633    			kb_full_ver=1;     
;;;634    			}
;;;635    #endif
;;;636    		}	
;;;637    	}
;;;638    
;;;639    else if(kb_full_ver)
;;;640    	{
;;;641    	
;;;642    	mess_send(MESS2CNTRL_HNDL,PARAM_CNTRL_STAT_STEP_DOWN,0,15);
;;;643    
;;;644    	if( abs(bat[0]._Ib) > IKB ) 
;;;645    		{
;;;646    		if(kb_start[0]==1)
;;;647    			{
;;;648    			kb_start[0]=0;
;;;649    			avar_bat_hndl(0,0);
;;;650    			}
;;;651    		}
;;;652    
;;;653    	if( abs(bat[1]._Ib) > IKB ) 
;;;654    		{
;;;655    		if(kb_start[1]==1)
;;;656    			{
;;;657    			kb_start[1]=0;
;;;658    			avar_bat_hndl(1,0);
;;;659    			}
;;;660    		}
;;;661    #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;662    	if( abs(Ib_ips_termokompensat) > IKB ) 
;;;663    		{
;;;664    		if(kb_start_ips==1)
;;;665    			{
;;;666    			kb_start_ips=0;
;;;667    			avar_bat_ips_hndl(0);
;;;668    			}
;;;669    		}
;;;670    #endif
;;;671    
;;;672    	if ((kb_start[0]==0) && (kb_start[1]==0) && (kb_start_ips==0)) 
;;;673    		{
;;;674    		kb_full_ver=0;
;;;675    		}
;;;676    
;;;677    	if(( (mess_find(MESS2KB_HNDL))	&& (mess_data[0]==PARAM_CNTRL_IS_DOWN) ) || (load_U<(USIGN*10)) )
;;;678    		{
;;;679    		kb_full_ver=0;
;;;680    		if((kb_start[0]==1)&&((load_I>(2*IKB)/10))&&(!(bat[0]._av&0x01))) avar_bat_hndl(0,1);
;;;681    		if((kb_start[1]==1)&&((load_I>(2*IKB)/10))&&(!(bat[1]._av&0x01))) avar_bat_hndl(1,1);
;;;682    #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;683    		if((kb_start_ips==1)&&((load_I>(2*IKB)/10))&&(!(bat_ips._av&0x01))) avar_bat_ips_hndl(1);
;;;684    #endif
;;;685    		}
;;;686    	}
;;;687    
;;;688    }
0007ac  e8bd9ff0          POP      {r4-r12,pc}
                  |L1.1968|
0007b0  f9b10040          LDRSH    r0,[r1,#0x40]         ;588  ; kb_cnt_2lev
0007b4  2800              CMP      r0,#0                 ;588
0007b6  d054              BEQ      |L1.2146|
0007b8  1e40              SUBS     r0,r0,#1              ;590
0007ba  b200              SXTH     r0,r0                 ;590
0007bc  460f              MOV      r7,r1                 ;590
0007be  f8a10040          STRH     r0,[r1,#0x40]         ;590
0007c2  2805              CMP      r0,#5                 ;592
0007c4  dd06              BLE      |L1.2004|
0007c6  230f              MOVS     r3,#0xf               ;592
0007c8  22c8              MOVS     r2,#0xc8              ;592
0007ca  2164              MOVS     r1,#0x64              ;592
0007cc  20e1              MOVS     r0,#0xe1              ;592
0007ce  f7fffffe          BL       mess_send
0007d2  e007              B        |L1.2020|
                  |L1.2004|
0007d4  2800              CMP      r0,#0                 ;593
0007d6  dd05              BLE      |L1.2020|
0007d8  230f              MOVS     r3,#0xf               ;593
0007da  22c8              MOVS     r2,#0xc8              ;593
0007dc  2169              MOVS     r1,#0x69              ;593
0007de  20e1              MOVS     r0,#0xe1              ;593
0007e0  f7fffffe          BL       mess_send
                  |L1.2020|
0007e4  f8b70040          LDRH     r0,[r7,#0x40]         ;596  ; kb_cnt_2lev
0007e8  2805              CMP      r0,#5                 ;596
0007ea  d110              BNE      |L1.2062|
0007ec  f9b60008          LDRSH    r0,[r6,#8]            ;598  ; bat
0007f0  f7fffffe          BL       abs
0007f4  f8ab0000          STRH     r0,[r11,#0]           ;598
0007f8  f9b60054          LDRSH    r0,[r6,#0x54]         ;599  ; bat
0007fc  f7fffffe          BL       abs
000800  f8ab0002          STRH     r0,[r11,#2]           ;599
000804  f9b80000          LDRSH    r0,[r8,#0]            ;600  ; Ib_ips_termokompensat
000808  f7fffffe          BL       abs
00080c  8438              STRH     r0,[r7,#0x20]         ;600
                  |L1.2062|
00080e  4816              LDR      r0,|L1.2152|
000810  f8b00040          LDRH     r0,[r0,#0x40]         ;603  ; kb_cnt_2lev
000814  2800              CMP      r0,#0                 ;603
                  |L1.2070|
000816  d1c9              BNE      |L1.1964|
000818  f9b60008          LDRSH    r0,[r6,#8]            ;605  ; bat
00081c  f7fffffe          BL       abs
000820  4f11              LDR      r7,|L1.2152|
000822  3764              ADDS     r7,r7,#0x64           ;605
000824  8038              STRH     r0,[r7,#0]            ;605
000826  f9b60054          LDRSH    r0,[r6,#0x54]         ;606  ; bat
00082a  f7fffffe          BL       abs
00082e  8078              STRH     r0,[r7,#2]            ;606
000830  f9b80000          LDRSH    r0,[r8,#0]            ;607  ; Ib_ips_termokompensat
000834  f7fffffe          BL       abs
000838  f8df802c          LDR      r8,|L1.2152|
00083c  f8a80022          STRH     r0,[r8,#0x22]         ;607
000840  f888500c          STRB     r5,[r8,#0xc]          ;609
000844  f9bb0000          LDRSH    r0,[r11,#0]           ;611  ; ibat
000848  f9b71000          LDRSH    r1,[r7,#0]            ;611  ; ibat_
00084c  4408              ADD      r0,r0,r1              ;611
00084e  f9ba1000          LDRSH    r1,[r10,#0]           ;611  ; IKB
000852  4288              CMP      r0,r1                 ;611
000854  da2a              BGE      |L1.2220|
000856  7820              LDRB     r0,[r4,#0]            ;611  ; kb_start
000858  2801              CMP      r0,#1                 ;611
00085a  d127              BNE      |L1.2220|
00085c  f888900c          STRB     r9,[r8,#0xc]          ;613
000860  e02d              B        |L1.2238|
                  |L1.2146|
000862  e055              B        |L1.2320|
                  |L1.2148|
                          DCD      AVZ
                  |L1.2152|
                          DCD      ||area_number.21||
                  |L1.2156|
                          DCD      0x40024000
                  |L1.2160|
                          DCD      YEAR_AVZ
                  |L1.2164|
                          DCD      MONTH_AVZ
                  |L1.2168|
                          DCD      DATE_AVZ
                  |L1.2172|
                          DCD      HOUR_AVZ
                  |L1.2176|
                          DCD      MIN_AVZ
                  |L1.2180|
                          DCD      SEC_AVZ
                  |L1.2184|
                          DCD      AVZ_TIME
                  |L1.2188|
                          DCD      TBAT
                  |L1.2192|
                          DCD      Ib_ips_termokompensat
                  |L1.2196|
                          DCD      bat
                  |L1.2200|
                          DCD      IKB
                  |L1.2204|
                          DCD      BAT_IS_ON
                  |L1.2208|
                          DCD      ips_bat_av_vzvod
                  |L1.2212|
                          DCD      bat_ips
                  |L1.2216|
                          DCD      net_av
                  |L1.2220|
0008ac  f9b60002          LDRSH    r0,[r6,#2]            ;615  ; bat
0008b0  28c8              CMP      r0,#0xc8              ;615
0008b2  dd04              BLE      |L1.2238|
0008b4  7025              STRB     r5,[r4,#0]            ;617
0008b6  2100              MOVS     r1,#0                 ;618
0008b8  4608              MOV      r0,r1                 ;618
0008ba  f7fffffe          BL       avar_bat_hndl
                  |L1.2238|
0008be  f9bb0002          LDRSH    r0,[r11,#2]           ;621  ; ibat
0008c2  f9b71002          LDRSH    r1,[r7,#2]            ;621  ; ibat_
0008c6  4408              ADD      r0,r0,r1              ;621
0008c8  f9ba1000          LDRSH    r1,[r10,#0]           ;621  ; IKB
0008cc  4288              CMP      r0,r1                 ;621
0008ce  da05              BGE      |L1.2268|
0008d0  7860              LDRB     r0,[r4,#1]            ;621  ; kb_start
0008d2  2801              CMP      r0,#1                 ;621
0008d4  d102              BNE      |L1.2268|
0008d6  f888900c          STRB     r9,[r8,#0xc]          ;623
0008da  e008              B        |L1.2286|
                  |L1.2268|
0008dc  f9b6004e          LDRSH    r0,[r6,#0x4e]         ;625  ; bat
0008e0  28c8              CMP      r0,#0xc8              ;625
0008e2  dd04              BLE      |L1.2286|
0008e4  7065              STRB     r5,[r4,#1]            ;627
0008e6  2100              MOVS     r1,#0                 ;628
0008e8  2001              MOVS     r0,#1                 ;628
0008ea  f7fffffe          BL       avar_bat_hndl
                  |L1.2286|
0008ee  f9b80020          LDRSH    r0,[r8,#0x20]         ;631  ; ibat_ips
0008f2  f9b81022          LDRSH    r1,[r8,#0x22]         ;631  ; ibat_ips_
0008f6  4408              ADD      r0,r0,r1              ;631
0008f8  f9ba1000          LDRSH    r1,[r10,#0]           ;631  ; IKB
0008fc  4288              CMP      r0,r1                 ;631
0008fe  f6bfaf55          BGE      |L1.1964|
000902  f898000d          LDRB     r0,[r8,#0xd]          ;631  ; kb_start_ips
000906  2801              CMP      r0,#1                 ;631
000908  d185              BNE      |L1.2070|
00090a  f888900c          STRB     r9,[r8,#0xc]          ;633
                  |L1.2318|
00090e  e74d              B        |L1.1964|
                  |L1.2320|
000910  7b08              LDRB     r0,[r1,#0xc]          ;639  ; kb_full_ver
000912  4689              MOV      r9,r1                 ;639
000914  2800              CMP      r0,#0                 ;639
000916  d0fa              BEQ      |L1.2318|
000918  230f              MOVS     r3,#0xf               ;642
00091a  2200              MOVS     r2,#0                 ;642
00091c  216e              MOVS     r1,#0x6e              ;642
00091e  20e1              MOVS     r0,#0xe1              ;642
000920  f7fffffe          BL       mess_send
000924  f9b60008          LDRSH    r0,[r6,#8]            ;644  ; bat
000928  f7fffffe          BL       abs
00092c  f9ba1000          LDRSH    r1,[r10,#0]           ;644  ; IKB
000930  4288              CMP      r0,r1                 ;644
000932  dd07              BLE      |L1.2372|
000934  7820              LDRB     r0,[r4,#0]            ;646  ; kb_start
000936  2801              CMP      r0,#1                 ;646
000938  d104              BNE      |L1.2372|
00093a  7025              STRB     r5,[r4,#0]            ;648
00093c  2100              MOVS     r1,#0                 ;649
00093e  4608              MOV      r0,r1                 ;649
000940  f7fffffe          BL       avar_bat_hndl
                  |L1.2372|
000944  f9b60054          LDRSH    r0,[r6,#0x54]         ;653  ; bat
000948  f7fffffe          BL       abs
00094c  f9ba1000          LDRSH    r1,[r10,#0]           ;653  ; IKB
000950  4288              CMP      r0,r1                 ;653
000952  dd06              BLE      |L1.2402|
000954  7860              LDRB     r0,[r4,#1]            ;655  ; kb_start
000956  2801              CMP      r0,#1                 ;655
000958  d103              BNE      |L1.2402|
00095a  7065              STRB     r5,[r4,#1]            ;657
00095c  2100              MOVS     r1,#0                 ;658
00095e  f7fffffe          BL       avar_bat_hndl
                  |L1.2402|
000962  f9b80000          LDRSH    r0,[r8,#0]            ;662  ; Ib_ips_termokompensat
000966  f7fffffe          BL       abs
00096a  f9ba1000          LDRSH    r1,[r10,#0]           ;662  ; IKB
00096e  4288              CMP      r0,r1                 ;662
000970  dd08              BLE      |L1.2436|
000972  f899000d          LDRB     r0,[r9,#0xd]          ;664  ; kb_start_ips
000976  2801              CMP      r0,#1                 ;664
000978  d104              BNE      |L1.2436|
00097a  f889500d          STRB     r5,[r9,#0xd]          ;666
00097e  2000              MOVS     r0,#0                 ;667
000980  f7fffffe          BL       avar_bat_ips_hndl
                  |L1.2436|
000984  7820              LDRB     r0,[r4,#0]            ;672  ; kb_start
000986  b930              CBNZ     r0,|L1.2454|
000988  7860              LDRB     r0,[r4,#1]            ;672  ; kb_start
00098a  b920              CBNZ     r0,|L1.2454|
00098c  f899000d          LDRB     r0,[r9,#0xd]          ;672  ; kb_start_ips
000990  b908              CBNZ     r0,|L1.2454|
000992  f889500c          STRB     r5,[r9,#0xc]          ;674
                  |L1.2454|
000996  20e6              MOVS     r0,#0xe6              ;677
000998  f7fffffe          BL       mess_find
00099c  b118              CBZ      r0,|L1.2470|
00099e  48ff              LDR      r0,|L1.3484|
0009a0  6800              LDR      r0,[r0,#0]            ;677  ; mess_data
0009a2  28e7              CMP      r0,#0xe7              ;677
0009a4  d00a              BEQ      |L1.2492|
                  |L1.2470|
0009a6  48fe              LDR      r0,|L1.3488|
0009a8  49fe              LDR      r1,|L1.3492|
0009aa  f9b00000          LDRSH    r0,[r0,#0]            ;677  ; USIGN
0009ae  f9b11000          LDRSH    r1,[r1,#0]            ;677  ; load_U
0009b2  eb000080          ADD      r0,r0,r0,LSL #2       ;677
0009b6  ebb10f40          CMP      r1,r0,LSL #1          ;677
                  |L1.2490|
0009ba  daa8              BGE      |L1.2318|
                  |L1.2492|
0009bc  f889500c          STRB     r5,[r9,#0xc]          ;679
0009c0  7820              LDRB     r0,[r4,#0]            ;680  ; kb_start
0009c2  4df9              LDR      r5,|L1.3496|
0009c4  2801              CMP      r0,#1                 ;680
0009c6  d10f              BNE      |L1.2536|
0009c8  f9ba0000          LDRSH    r0,[r10,#0]           ;680  ; IKB
0009cc  f9b51000          LDRSH    r1,[r5,#0]            ;680  ; load_I
0009d0  0040              LSLS     r0,r0,#1              ;680
0009d2  fb90f0f7          SDIV     r0,r0,r7              ;680
0009d6  4288              CMP      r0,r1                 ;680
0009d8  da06              BGE      |L1.2536|
0009da  f896003d          LDRB     r0,[r6,#0x3d]         ;680  ; bat
0009de  07c0              LSLS     r0,r0,#31             ;680
0009e0  d102              BNE      |L1.2536|
0009e2  2101              MOVS     r1,#1                 ;680
0009e4  f7fffffe          BL       avar_bat_hndl
                  |L1.2536|
0009e8  7860              LDRB     r0,[r4,#1]            ;681  ; kb_start
0009ea  2801              CMP      r0,#1                 ;681
0009ec  d110              BNE      |L1.2576|
0009ee  f9ba0000          LDRSH    r0,[r10,#0]           ;681  ; IKB
0009f2  f9b51000          LDRSH    r1,[r5,#0]            ;681  ; load_I
0009f6  0040              LSLS     r0,r0,#1              ;681
0009f8  fb90f0f7          SDIV     r0,r0,r7              ;681
0009fc  4288              CMP      r0,r1                 ;681
0009fe  da07              BGE      |L1.2576|
000a00  f8960089          LDRB     r0,[r6,#0x89]         ;681  ; bat
000a04  07c0              LSLS     r0,r0,#31             ;681
000a06  d103              BNE      |L1.2576|
000a08  2101              MOVS     r1,#1                 ;681
000a0a  4608              MOV      r0,r1                 ;681
000a0c  f7fffffe          BL       avar_bat_hndl
                  |L1.2576|
000a10  f899000d          LDRB     r0,[r9,#0xd]          ;683  ; kb_start_ips
000a14  2801              CMP      r0,#1                 ;683
                  |L1.2582|
000a16  f47faf7a          BNE      |L1.2318|
000a1a  f9ba0000          LDRSH    r0,[r10,#0]           ;683  ; IKB
000a1e  f9b51000          LDRSH    r1,[r5,#0]            ;683  ; load_I
000a22  0040              LSLS     r0,r0,#1              ;683
000a24  fb90f0f7          SDIV     r0,r0,r7              ;683
000a28  4288              CMP      r0,r1                 ;683
000a2a  dac6              BGE      |L1.2490|
000a2c  48df              LDR      r0,|L1.3500|
000a2e  f890003d          LDRB     r0,[r0,#0x3d]         ;683  ; bat_ips
000a32  07c0              LSLS     r0,r0,#31             ;683
000a34  d1ef              BNE      |L1.2582|
000a36  e8bd5ff0          POP      {r4-r12,lr}           ;683
000a3a  2001              MOVS     r0,#1                 ;683
000a3c  f7ffbffe          B.W      avar_bat_ips_hndl
;;;689    
                          ENDP

                  samokalibr_hndl PROC
;;;698    //-----------------------------------------------
;;;699    void samokalibr_hndl(void)
000a40  b570              PUSH     {r4-r6,lr}
;;;700    {
;;;701    if(++samokalibr_cnt>=1800)samokalibr_cnt=0;
000a42  4cdb              LDR      r4,|L1.3504|
000a44  8f60              LDRH     r0,[r4,#0x3a]  ; samokalibr_cnt
000a46  1c40              ADDS     r0,r0,#1
000a48  b200              SXTH     r0,r0
000a4a  8760              STRH     r0,[r4,#0x3a]
000a4c  f5b06fe1          CMP      r0,#0x708
000a50  db01              BLT      |L1.2646|
000a52  2000              MOVS     r0,#0
000a54  8760              STRH     r0,[r4,#0x3a]
                  |L1.2646|
;;;702    
;;;703    if(samokalibr_cnt>=1785U)
000a56  f9b4003a          LDRSH    r0,[r4,#0x3a]  ; samokalibr_cnt
000a5a  f5b06fdf          CMP      r0,#0x6f8
000a5e  d911              BLS      |L1.2692|
;;;704    	{
;;;705    	mess_send(MESS2RELE_HNDL,PARAM_RELE_SAMOKALIBR,1,15);
000a60  230f              MOVS     r3,#0xf
000a62  2201              MOVS     r2,#1
000a64  2164              MOVS     r1,#0x64
000a66  20d2              MOVS     r0,#0xd2
000a68  f7fffffe          BL       mess_send
;;;706    	mess_send(MESS2IND_HNDL,PARAM_SAMOKALIBR,0,15);
000a6c  230f              MOVS     r3,#0xf
000a6e  2200              MOVS     r2,#0
000a70  21d8              MOVS     r1,#0xd8
000a72  20d7              MOVS     r0,#0xd7
000a74  f7fffffe          BL       mess_send
;;;707    	mess_send(MESS2MATEMAT,PARAM_SAMOKALIBR,0,15);
000a78  230f              MOVS     r3,#0xf
000a7a  2200              MOVS     r2,#0
000a7c  21d8              MOVS     r1,#0xd8
000a7e  20dc              MOVS     r0,#0xdc
000a80  f7fffffe          BL       mess_send
                  |L1.2692|
;;;708    	} 
;;;709    
;;;710    if(samokalibr_cnt==1799U)
000a84  f9b4003a          LDRSH    r0,[r4,#0x3a]  ; samokalibr_cnt
000a88  f5a061e0          SUB      r1,r0,#0x700
000a8c  3907              SUBS     r1,#7
000a8e  d118              BNE      |L1.2754|
;;;711    	{
;;;712    	if(Kibat0[0]!=ad7705_buff_[0]) lc640_write_int(ADR_KI0BAT[0],ad7705_buff_[0]);
000a90  4ec8              LDR      r6,|L1.3508|
000a92  4cc9              LDR      r4,|L1.3512|
000a94  8830              LDRH     r0,[r6,#0]  ; Kibat0
000a96  8821              LDRH     r1,[r4,#0]  ; ad7705_buff_
000a98  4dc8              LDR      r5,|L1.3516|
000a9a  4288              CMP      r0,r1
000a9c  d005              BEQ      |L1.2730|
000a9e  f9b41000          LDRSH    r1,[r4,#0]  ; ad7705_buff_
000aa2  f9b50000          LDRSH    r0,[r5,#0]  ; ADR_KI0BAT
000aa6  f7fffffe          BL       lc640_write_int
                  |L1.2730|
;;;713    	if(Kibat0[1]!=ad7705_buff_[1]) lc640_write_int(ADR_KI0BAT[1],ad7705_buff_[1]);
000aaa  8870              LDRH     r0,[r6,#2]  ; Kibat0
000aac  8861              LDRH     r1,[r4,#2]  ; ad7705_buff_
000aae  4288              CMP      r0,r1
000ab0  d007              BEQ      |L1.2754|
000ab2  f9b41002          LDRSH    r1,[r4,#2]  ; ad7705_buff_
000ab6  f9b50002          LDRSH    r0,[r5,#2]  ; ADR_KI0BAT
000aba  e8bd4070          POP      {r4-r6,lr}
000abe  f7ffbffe          B.W      lc640_write_int
                  |L1.2754|
;;;714    	
;;;715    	}	 	
;;;716    }
000ac2  bd70              POP      {r4-r6,pc}
;;;717    
                          ENDP

                  ubat_old_drv PROC
;;;720    //-----------------------------------------------
;;;721    void ubat_old_drv(void)
000ac4  b510              PUSH     {r4,lr}
;;;722    {        
;;;723    bat_u_old_cnt++;
000ac6  4cbe              LDR      r4,|L1.3520|
000ac8  8820              LDRH     r0,[r4,#0]  ; bat_u_old_cnt
000aca  1c40              ADDS     r0,r0,#1
000acc  8020              STRH     r0,[r4,#0]
;;;724    gran_ring(&bat_u_old_cnt,0,8);
000ace  2208              MOVS     r2,#8
000ad0  2100              MOVS     r1,#0
000ad2  4620              MOV      r0,r4
000ad4  f7fffffe          BL       gran_ring
;;;725    
;;;726    bat[0]._u_old[bat_u_old_cnt]=bat[0]._Ub;
000ad8  49ba              LDR      r1,|L1.3524|
000ada  f9b40000          LDRSH    r0,[r4,#0]  ; bat_u_old_cnt
000ade  884a              LDRH     r2,[r1,#2]  ; bat
000ae0  eb010040          ADD      r0,r1,r0,LSL #1
000ae4  8402              STRH     r2,[r0,#0x20]
;;;727    bat[1]._u_old[bat_u_old_cnt]=bat[1]._Ub;
000ae6  f8b1104e          LDRH     r1,[r1,#0x4e]  ; bat
000aea  f8a0106c          STRH     r1,[r0,#0x6c]
;;;728    }
000aee  bd10              POP      {r4,pc}
;;;729    
                          ENDP

                  unet_drv PROC
;;;730    //-----------------------------------------------
;;;731    void unet_drv(void)
000af0  b570              PUSH     {r4-r6,lr}
;;;732    {
;;;733    if(net_U<UMN)
000af2  4db5              LDR      r5,|L1.3528|
000af4  48b5              LDR      r0,|L1.3532|
;;;734    	{
;;;735    	if((unet_drv_cnt<10)&&(main_1Hz_cnt>15))
000af6  4ab6              LDR      r2,|L1.3536|
000af8  f9b51000          LDRSH    r1,[r5,#0]            ;733  ; net_U
000afc  f9b03000          LDRSH    r3,[r0,#0]            ;733  ; UMN
000b00  f9920000          LDRSB    r0,[r2,#0]
000b04  4299              CMP      r1,r3                 ;733
000b06  da1d              BGE      |L1.2884|
;;;736    		{
;;;737    		unet_drv_cnt++;
;;;738    		if(unet_drv_cnt>=10)
;;;739    			{
;;;740    			net_Ustore=net_U;
000b08  4cb2              LDR      r4,|L1.3540|
000b0a  280a              CMP      r0,#0xa               ;735
000b0c  da0e              BGE      |L1.2860|
000b0e  4bb2              LDR      r3,|L1.3544|
000b10  f9b33000          LDRSH    r3,[r3,#0]            ;735  ; main_1Hz_cnt
000b14  2b0f              CMP      r3,#0xf               ;735
000b16  dd09              BLE      |L1.2860|
000b18  1c40              ADDS     r0,r0,#1              ;737
000b1a  b240              SXTB     r0,r0                 ;737
000b1c  7010              STRB     r0,[r2,#0]            ;737
000b1e  280a              CMP      r0,#0xa               ;738
000b20  db08              BLT      |L1.2868|
000b22  8021              STRH     r1,[r4,#0]
;;;741    		 	avar_unet_hndl(1);
000b24  2001              MOVS     r0,#1
000b26  f7fffffe          BL       avar_unet_hndl
000b2a  e003              B        |L1.2868|
                  |L1.2860|
;;;742    			
;;;743    			}
;;;744    		}
;;;745    	else if(unet_drv_cnt>=10)unet_drv_cnt=10;
000b2c  280a              CMP      r0,#0xa
000b2e  db01              BLT      |L1.2868|
000b30  200a              MOVS     r0,#0xa
000b32  7010              STRB     r0,[r2,#0]
                  |L1.2868|
;;;746    
;;;747    	if(net_U<net_Ustore) net_Ustore=net_U;	
000b34  f9b50000          LDRSH    r0,[r5,#0]  ; net_U
000b38  f9b41000          LDRSH    r1,[r4,#0]  ; net_Ustore
000b3c  4288              CMP      r0,r1
000b3e  da00              BGE      |L1.2882|
000b40  8020              STRH     r0,[r4,#0]
                  |L1.2882|
;;;748    	}
;;;749    
;;;750    else if(net_U>UMN)
;;;751    	{                 
;;;752    	if(unet_drv_cnt)
;;;753    		{
;;;754    		unet_drv_cnt--;
;;;755    		if(unet_drv_cnt<=0)
;;;756    			{
;;;757    			avar_unet_hndl(0);
;;;758    			}
;;;759    		}
;;;760    	else if(unet_drv_cnt<0)unet_drv_cnt=0;
;;;761    	
;;;762    	}
;;;763    
;;;764    }
000b42  bd70              POP      {r4-r6,pc}
                  |L1.2884|
000b44  ddfd              BLE      |L1.2882|
000b46  2800              CMP      r0,#0                 ;752
000b48  d0fb              BEQ      |L1.2882|
000b4a  1e40              SUBS     r0,r0,#1              ;754
000b4c  b240              SXTB     r0,r0                 ;754
000b4e  7010              STRB     r0,[r2,#0]            ;754
000b50  2800              CMP      r0,#0                 ;755
000b52  dcf6              BGT      |L1.2882|
000b54  e8bd4070          POP      {r4-r6,lr}            ;757
000b58  2000              MOVS     r0,#0                 ;757
000b5a  f7ffbffe          B.W      avar_unet_hndl
;;;765    
                          ENDP

                  matemat PROC
;;;766    //-----------------------------------------------
;;;767    void matemat(void)
000b5e  e92d5ffc          PUSH     {r2-r12,lr}
;;;768    {
;;;769    //signed short temp_SS;
;;;770    signed long temp_SL/*,temp_SL_*/;
;;;771    char /*temp,*/i;
;;;772    signed short temp_SS;
;;;773    
;;;774    #ifdef UKU_MGTS
;;;775    // 
;;;776    temp_SL=(signed long)net_buff_;
;;;777    temp_SL*=Kunet;
;;;778    temp_SL/=110000L;
;;;779    net_U=(signed short)temp_SL;
;;;780    #endif
;;;781    
;;;782    #ifdef UKU_RSTKM
;;;783    // 
;;;784    temp_SL=(signed long)net_buff_;
;;;785    temp_SL*=Kunet;
;;;786    temp_SL/=110000L;
;;;787    net_U=(signed short)temp_SL;
;;;788    #endif
;;;789    
;;;790    #ifdef UKU_3U
;;;791    // 
;;;792    temp_SL=(signed long)net_buff_;
;;;793    temp_SL*=Kunet;
;;;794    temp_SL/=36000L;
;;;795    net_U=(signed short)temp_SL;
;;;796    #endif
;;;797    
;;;798    #ifdef UKU_6U
;;;799    // 
;;;800    
;;;801    if((AUSW_MAIN%10)||(AUSW_MAIN==2400)||(AUSW_MAIN==4800)||(AUSW_MAIN==6000))
;;;802    	{
;;;803    
;;;804    	if(bps[11]._device==dNET_METR)
;;;805    		{
;;;806    		net_metr_buff_[0]=((signed short)bps[11]._buff[0])+(((signed short)bps[11]._buff[1])<<8);
;;;807    		net_metr_buff_[1]=((signed short)bps[11]._buff[2])+(((signed short)bps[11]._buff[3])<<8);
;;;808    		net_metr_buff_[2]=((signed short)bps[11]._buff[4])+(((signed short)bps[11]._buff[5])<<8);
;;;809    
;;;810    		temp_SL=(signed long)net_metr_buff_[0];
;;;811    		temp_SL*=KunetA;
;;;812    		temp_SL/=6000L;
;;;813    		net_Ua=(signed short)temp_SL;
;;;814    	
;;;815    		temp_SL=(signed long)net_metr_buff_[1];
;;;816    		temp_SL*=KunetB;
;;;817    		temp_SL/=6000L;
;;;818    		net_Ub=(signed short)temp_SL;
;;;819    	
;;;820    		temp_SL=(signed long)net_metr_buff_[2];
;;;821    		temp_SL*=KunetC;
;;;822    		temp_SL/=6000L;
;;;823    		net_Uc=(signed short)temp_SL;
;;;824    		}
;;;825    	else
;;;826    		{
;;;827    		temp_SL=(signed long)net_buff_;
;;;828    		temp_SL*=KunetA;
;;;829    		temp_SL/=110000L;
;;;830    		net_Ua=(signed short)temp_SL;
;;;831    	
;;;832    		temp_SL=(signed long)adc_buff_[3];
;;;833    		temp_SL*=KunetB;
;;;834    		temp_SL/=6000L;
;;;835    		net_Ub=(signed short)temp_SL;
;;;836    	
;;;837    		temp_SL=(signed long)adc_buff_[10];
;;;838    		temp_SL*=KunetC;
;;;839    		temp_SL/=6000L;
;;;840    		net_Uc=(signed short)temp_SL;
;;;841    		}
;;;842    
;;;843    	net_U=net_Ua;
;;;844    	if(net_Ub<net_U)net_U=net_Ub;
;;;845    	if(net_Uc<net_U)net_U=net_Uc;
;;;846    	}
;;;847    else 
;;;848    	{
;;;849    	temp_SL=(signed long)net_buff_;
;;;850    	temp_SL*=Kunet;
;;;851    	temp_SL/=110000L;
;;;852    	net_U=(signed short)temp_SL;
;;;853    	}
;;;854    
;;;855    
;;;856    
;;;857    
;;;858    #endif
;;;859    
;;;860    #ifdef UKU_GLONASS
;;;861    // 
;;;862    temp_SL=(signed long)net_buff_;
;;;863    temp_SL*=Kunet;
;;;864    temp_SL/=110000L;
;;;865    net_U=(signed short)temp_SL;
;;;866    #endif
;;;867    
;;;868    #ifdef UKU_KONTUR
;;;869    // 
;;;870    temp_SL=(signed long)net_buff_;
;;;871    temp_SL*=Kunet;
;;;872    temp_SL/=110000L;
;;;873    net_U=(signed short)temp_SL;
;;;874    #endif
;;;875    
;;;876    
;;;877    #ifdef UKU_220_V2
;;;878    // 
;;;879    	temp_SL=(signed long)net_buff_;
;;;880    	temp_SL*=Kunet;
;;;881    	temp_SL/=5000L;
;;;882    	net_U=(signed short)temp_SL;
;;;883    
;;;884    #endif
;;;885    
;;;886    
;;;887    #ifdef UKU_220
;;;888    // 
;;;889    
;;;890    if(AUSW_MAIN==22035)
;;;891    	{
;;;892    	temp_SL=(signed long)net_buff_;
;;;893    	temp_SL*=KunetA;
;;;894    	temp_SL/=6000L;
;;;895    	net_Ua=(signed short)temp_SL;
;;;896    
;;;897    	temp_SL=(signed long)adc_buff_[3];
;;;898    	temp_SL*=KunetB;
;;;899    	temp_SL/=6000L;
;;;900    	net_Ub=(signed short)temp_SL;
;;;901    
;;;902    	temp_SL=(signed long)adc_buff_[10];
;;;903    	temp_SL*=KunetC;
;;;904    	temp_SL/=6000L;
;;;905    	net_Uc=(signed short)temp_SL;
;;;906    
;;;907    	net_U=net_Ua;
;;;908    	if(net_Ub<net_U)net_U=net_Ub;
;;;909    	if(net_Uc<net_U)net_U=net_Uc;
;;;910    	}
;;;911    else
;;;912    	{
;;;913    	temp_SL=(signed long)net_buff_;
;;;914    	temp_SL*=Kunet;
;;;915    	#ifdef _ACDC_
;;;916    	temp_SL/=500L;
;;;917    	#else
;;;918    	temp_SL/=5000L;
;;;919    	#endif
;;;920    	net_U=(signed short)temp_SL;
;;;921    	
;;;922    	}
;;;923    #endif
;;;924    
;;;925    #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;926    // 
;;;927    
;;;928    
;;;929    	if(bps[11]._device==dNET_METR)
000b62  489e              LDR      r0,|L1.3548|
;;;930    		{
;;;931    		net_metr_buff_[0]=((signed short)bps[11]._buff[0])+(((signed short)bps[11]._buff[1])<<8);
;;;932    		net_metr_buff_[1]=((signed short)bps[11]._buff[2])+(((signed short)bps[11]._buff[3])<<8);
;;;933    		net_metr_buff_[2]=((signed short)bps[11]._buff[4])+(((signed short)bps[11]._buff[5])<<8);
;;;934    
;;;935    		temp_SL=(signed long)net_metr_buff_[2];
;;;936    		temp_SL*=KunetA;
000b64  4b9e              LDR      r3,|L1.3552|
000b66  f890039c          LDRB     r0,[r0,#0x39c]        ;929  ; bps
000b6a  9001              STR      r0,[sp,#4]
;;;937    		temp_SL/=6000L;
;;;938    		net_Ua=(signed short)temp_SL;
;;;939    	
;;;940    		temp_SL=(signed long)net_metr_buff_[1];
;;;941    		temp_SL*=KunetB;
000b6c  4a9e              LDR      r2,|L1.3560|
;;;942    		temp_SL/=6000L;
;;;943    		net_Ub=(signed short)temp_SL;
;;;944    	
;;;945    		temp_SL=(signed long)net_metr_buff_[0];
;;;946    		temp_SL*=KunetC;
000b6e  499f              LDR      r1,|L1.3564|
000b70  f8df8270          LDR      r8,|L1.3556|
000b74  f9b39000          LDRSH    r9,[r3,#0]            ;936
000b78  f9b2b000          LDRSH    r11,[r2,#0]           ;941
000b7c  f9b1a000          LDRSH    r10,[r1,#0]
000b80  f8dfc26c          LDR      r12,|L1.3568|
;;;947    		temp_SL/=6000L;
;;;948    		net_Uc=(signed short)temp_SL;
000b84  4c9b              LDR      r4,|L1.3572|
;;;949    
;;;950    		net_F3=((signed short)bps[11]._buff[6])+(((signed short)bps[11]._buff[7])<<8);
;;;951    
;;;952    		net_U=net_Ua;
;;;953    		if(net_Ub<net_U)net_U=net_Ub;
;;;954    		if(net_Uc<net_U)net_U=net_Uc;
;;;955    		}
;;;956    	  else if(AUSW_MAIN==22033)
;;;957    	{
;;;958    	temp_SL=(signed long)net_buff_;
000b86  4e8a              LDR      r6,|L1.3504|
000b88  f2456711          MOV      r7,#0x5611            ;956
;;;959    	temp_SL*=KunetA;
;;;960    	temp_SL/=4000L;
;;;961    	net_Ua=(signed short)temp_SL;
;;;962    
;;;963    	temp_SL=(signed long)adc_buff_[3];
;;;964    	temp_SL*=KunetB;
;;;965    	temp_SL/=6000L;
;;;966    	net_Ub=(signed short)temp_SL;
;;;967    
;;;968    	temp_SL=(signed long)adc_buff_[10];
;;;969    	temp_SL*=KunetC;
;;;970    	temp_SL/=6000L;
;;;971    	net_Uc=(signed short)temp_SL;
;;;972    
;;;973    	net_U=net_Ua;
;;;974    	if(net_Ub<net_U)net_U=net_Ub;
;;;975    	if(net_Uc<net_U)net_U=net_Uc;
;;;976    	}
;;;977    else if((AUSW_MAIN==22063)||(AUSW_MAIN==22023)||(AUSW_MAIN==22043))
;;;978    	{
;;;979    	temp_SL=(signed long)net_buff_;
;;;980    	temp_SL*=KunetA;
;;;981    	temp_SL/=40000L;
;;;982    	net_Ua=(signed short)temp_SL;
;;;983    
;;;984    	temp_SL=(signed long)adc_buff_[3];
;;;985    	temp_SL*=KunetB;
;;;986    	temp_SL/=6000L;
;;;987    	net_Ub=(signed short)temp_SL;
;;;988    
;;;989    	temp_SL=(signed long)adc_buff_[10];
;;;990    	temp_SL*=KunetC;
;;;991    	temp_SL/=6000L;
;;;992    	net_Uc=(signed short)temp_SL;
;;;993    
;;;994    	net_U=net_Ua;
;;;995    	if(net_Ub<net_U)net_U=net_Ub;
;;;996    	if(net_Uc<net_U)net_U=net_Uc;
;;;997    	}
;;;998    else	if((AUSW_MAIN==22010)||(AUSW_MAIN==22011) )
000b8c  f24555fa          MOV      r5,#0x55fa
000b90  2807              CMP      r0,#7                 ;929
000b92  d13e              BNE      |L1.3090|
000b94  4898              LDR      r0,|L1.3576|
000b96  f1060388          ADD      r3,r6,#0x88           ;931
000b9a  7801              LDRB     r1,[r0,#0]            ;931  ; bps
000b9c  7842              LDRB     r2,[r0,#1]            ;931  ; bps
000b9e  eb012102          ADD      r1,r1,r2,LSL #8       ;931
000ba2  b28a              UXTH     r2,r1                 ;931
000ba4  801a              STRH     r2,[r3,#0]            ;931
000ba6  9200              STR      r2,[sp,#0]            ;931
000ba8  7881              LDRB     r1,[r0,#2]            ;932  ; bps
000baa  78c2              LDRB     r2,[r0,#3]            ;932  ; bps
000bac  eb012102          ADD      r1,r1,r2,LSL #8       ;932
000bb0  b289              UXTH     r1,r1                 ;932
000bb2  8059              STRH     r1,[r3,#2]            ;932
000bb4  7902              LDRB     r2,[r0,#4]            ;933  ; bps
000bb6  f890e005          LDRB     lr,[r0,#5]            ;933  ; bps
000bba  eb02220e          ADD      r2,r2,lr,LSL #8       ;933
000bbe  b292              UXTH     r2,r2                 ;933
000bc0  809a              STRH     r2,[r3,#4]            ;933
000bc2  fb02f209          MUL      r2,r2,r9              ;936
000bc6  f2417970          MOV      r9,#0x1770            ;937
000bca  fb92f2f9          SDIV     r2,r2,r9              ;937
000bce  b213              SXTH     r3,r2                 ;938
000bd0  f8a83000          STRH     r3,[r8,#0]            ;938
000bd4  fb01f10b          MUL      r1,r1,r11             ;941
000bd8  fb91f1f9          SDIV     r1,r1,r9              ;942
000bdc  b209              SXTH     r1,r1                 ;943
000bde  f8ac1000          STRH     r1,[r12,#0]           ;943
000be2  9a00              LDR      r2,[sp,#0]            ;945
000be4  fb02f20a          MUL      r2,r2,r10             ;946
000be8  fb92f2f9          SDIV     r2,r2,r9              ;947
000bec  b212              SXTH     r2,r2                 ;948
000bee  8022              STRH     r2,[r4,#0]            ;948
000bf0  7984              LDRB     r4,[r0,#6]            ;950  ; bps
000bf2  79c0              LDRB     r0,[r0,#7]            ;950  ; bps
000bf4  eb042000          ADD      r0,r4,r0,LSL #8       ;950
000bf8  4c80              LDR      r4,|L1.3580|
000bfa  8020              STRH     r0,[r4,#0]            ;950
000bfc  4872              LDR      r0,|L1.3528|
000bfe  8003              STRH     r3,[r0,#0]            ;952
000c00  4299              CMP      r1,r3                 ;953
000c02  da00              BGE      |L1.3078|
000c04  8001              STRH     r1,[r0,#0]            ;953
                  |L1.3078|
000c06  f9b01000          LDRSH    r1,[r0,#0]            ;954  ; net_U
000c0a  428a              CMP      r2,r1                 ;954
000c0c  da72              BGE      |L1.3316|
000c0e  8002              STRH     r2,[r0,#0]            ;954
000c10  e070              B        |L1.3316|
                  |L1.3090|
000c12  4967              LDR      r1,|L1.3504|
000c14  4a7b              LDR      r2,|L1.3588|
000c16  8ccb              LDRH     r3,[r1,#0x26]         ;958
000c18  4971              LDR      r1,|L1.3552|
000c1a  f8df91cc          LDR      r9,|L1.3560|
000c1e  f9b11000          LDRSH    r1,[r1,#0]            ;936
000c22  f9b99000          LDRSH    r9,[r9,#0]            ;941
000c26  434b              MULS     r3,r1,r3              ;959
000c28  f9b21006          LDRSH    r1,[r2,#6]            ;963
000c2c  f2417a70          MOV      r10,#0x1770           ;937
000c30  fb01f109          MUL      r1,r1,r9              ;964
000c34  f8df91b4          LDR      r9,|L1.3564|
000c38  f9b22014          LDRSH    r2,[r2,#0x14]         ;968
000c3c  f9b99000          LDRSH    r9,[r9,#0]            ;946
000c40  fb91f1fa          SDIV     r1,r1,r10             ;965
000c44  fb02f209          MUL      r2,r2,r9              ;969
000c48  fb92f2fa          SDIV     r2,r2,r10             ;970
000c4c  486c              LDR      r0,|L1.3584|
000c4e  b209              SXTH     r1,r1                 ;966
000c50  8800              LDRH     r0,[r0,#0]            ;956  ; AUSW_MAIN
000c52  b212              SXTH     r2,r2                 ;971
000c54  42b8              CMP      r0,r7                 ;956
000c56  d114              BNE      |L1.3202|
000c58  f44f607a          MOV      r0,#0xfa0             ;960
000c5c  fb93f0f0          SDIV     r0,r3,r0              ;960
000c60  b200              SXTH     r0,r0                 ;961
000c62  f8a80000          STRH     r0,[r8,#0]            ;961
000c66  f8ac1000          STRH     r1,[r12,#0]           ;966
000c6a  8022              STRH     r2,[r4,#0]            ;971
000c6c  4b56              LDR      r3,|L1.3528|
000c6e  8018              STRH     r0,[r3,#0]            ;973
000c70  4281              CMP      r1,r0                 ;974
000c72  da00              BGE      |L1.3190|
000c74  8019              STRH     r1,[r3,#0]            ;974
                  |L1.3190|
000c76  f9b30000          LDRSH    r0,[r3,#0]            ;975  ; net_U
000c7a  4282              CMP      r2,r0                 ;975
000c7c  da3a              BGE      |L1.3316|
000c7e  801a              STRH     r2,[r3,#0]            ;975
000c80  e038              B        |L1.3316|
                  |L1.3202|
000c82  f5a049ac          SUB      r9,r0,#0x5600         ;977
000c86  f1b9092f          SUBS     r9,r9,#0x2f           ;977
000c8a  d005              BEQ      |L1.3224|
000c8c  f1190928          ADDS     r9,r9,#0x28           ;977
000c90  d002              BEQ      |L1.3224|
000c92  f1b90914          SUBS     r9,r9,#0x14           ;977
000c96  d114              BNE      |L1.3266|
                  |L1.3224|
000c98  f6494040          MOV      r0,#0x9c40            ;981
000c9c  fb93f0f0          SDIV     r0,r3,r0              ;981
000ca0  b200              SXTH     r0,r0                 ;982
000ca2  f8a80000          STRH     r0,[r8,#0]            ;982
000ca6  f8ac1000          STRH     r1,[r12,#0]           ;987
000caa  8022              STRH     r2,[r4,#0]            ;992
000cac  4b46              LDR      r3,|L1.3528|
000cae  8018              STRH     r0,[r3,#0]            ;994
000cb0  4281              CMP      r1,r0                 ;995
000cb2  da00              BGE      |L1.3254|
000cb4  8019              STRH     r1,[r3,#0]            ;995
                  |L1.3254|
000cb6  f9b30000          LDRSH    r0,[r3,#0]            ;996  ; net_U
000cba  4282              CMP      r2,r0                 ;996
000cbc  da1a              BGE      |L1.3316|
000cbe  801a              STRH     r2,[r3,#0]            ;996
000cc0  e018              B        |L1.3316|
                  |L1.3266|
;;;999    	{
;;;1000   	temp_SL=(signed long)net_buff_;
;;;1001   	temp_SL*=Kunet;
000cc2  4951              LDR      r1,|L1.3592|
000cc4  f9b12000          LDRSH    r2,[r1,#0]
000cc8  4939              LDR      r1,|L1.3504|
000cca  8cc9              LDRH     r1,[r1,#0x26]         ;958
000ccc  4351              MULS     r1,r2,r1
000cce  42a8              CMP      r0,r5                 ;998
000cd0  d003              BEQ      |L1.3290|
000cd2  f5a042aa          SUB      r2,r0,#0x5500         ;998
000cd6  3afb              SUBS     r2,r2,#0xfb           ;998
000cd8  d106              BNE      |L1.3304|
                  |L1.3290|
;;;1002   	temp_SL/=35000L;
000cda  f64800b8          MOV      r0,#0x88b8
000cde  fb91f0f0          SDIV     r0,r1,r0
;;;1003   	net_U=(signed short)temp_SL;
000ce2  4939              LDR      r1,|L1.3528|
000ce4  8008              STRH     r0,[r1,#0]
000ce6  e005              B        |L1.3316|
                  |L1.3304|
;;;1004   	
;;;1005   	}
;;;1006   else
;;;1007   	{
;;;1008   	temp_SL=(signed long)net_buff_;
;;;1009   	temp_SL*=Kunet;
;;;1010   	#ifdef _ACDC_
;;;1011   	temp_SL/=500L;
000ce8  f44f70fa          MOV      r0,#0x1f4
000cec  fb91f0f0          SDIV     r0,r1,r0
;;;1012   	#else
;;;1013   	temp_SL/=5000L;
;;;1014   	#endif
;;;1015   	net_U=(signed short)temp_SL;
000cf0  4935              LDR      r1,|L1.3528|
000cf2  8008              STRH     r0,[r1,#0]
                  |L1.3316|
;;;1016   	
;;;1017   	}
;;;1018   if(bps[11]._device!=dNET_METR) net_F3=net_F;
000cf4  9801              LDR      r0,[sp,#4]
000cf6  2807              CMP      r0,#7
000cf8  d003              BEQ      |L1.3330|
000cfa  4844              LDR      r0,|L1.3596|
000cfc  8801              LDRH     r1,[r0,#0]  ; net_F
000cfe  483f              LDR      r0,|L1.3580|
000d00  8001              STRH     r1,[r0,#0]
                  |L1.3330|
;;;1019   #endif
;;;1020   
;;;1021   #ifdef UKU_TELECORE2015
;;;1022   // 
;;;1023   temp_SL=(signed long)net_buff_;
;;;1024   temp_SL*=Kunet;
;;;1025   temp_SL/=110000L;
;;;1026   net_U=(signed short)temp_SL;
;;;1027   #endif
;;;1028   
;;;1029   // 
;;;1030   temp_SL=(signed long)adc_buff_[0];
000d02  4840              LDR      r0,|L1.3588|
000d04  f9b02000          LDRSH    r2,[r0,#0]  ; adc_buff_
;;;1031   temp_SL*=Kubat[0];
000d08  f8dfc104          LDR      r12,|L1.3600|
000d0c  f9bc1000          LDRSH    r1,[r12,#0]  ; Kubat
000d10  4351              MULS     r1,r2,r1
;;;1032   temp_SL/=2000L;
000d12  f44f68fa          MOV      r8,#0x7d0
000d16  fb91f1f8          SDIV     r1,r1,r8
;;;1033   bat[0]._Ub=(signed short)temp_SL;
000d1a  4c2a              LDR      r4,|L1.3524|
000d1c  8061              STRH     r1,[r4,#2]
;;;1034   
;;;1035   #ifdef UKU_220
;;;1036   // 
;;;1037   temp_SL=(signed long)adc_buff_[0];
;;;1038   temp_SL*=Kubat[0];
;;;1039   temp_SL/=400L;
;;;1040   bat[0]._Ub=(signed short)temp_SL;
;;;1041   #endif
;;;1042   
;;;1043   #ifdef UKU_220_V2
;;;1044   // 
;;;1045   temp_SL=(signed long)adc_buff_[0];
;;;1046   temp_SL*=Kubat[0];
;;;1047   temp_SL/=400L;
;;;1048   bat[0]._Ub=(signed short)temp_SL;
;;;1049   #endif
;;;1050   
;;;1051   temp_SL=(signed long)adc_buff_[4];
000d1e  f9b02008          LDRSH    r2,[r0,#8]  ; adc_buff_
;;;1052   temp_SL*=Kubatm[0];
000d22  4b3c              LDR      r3,|L1.3604|
000d24  f9b31000          LDRSH    r1,[r3,#0]  ; Kubatm
000d28  4351              MULS     r1,r2,r1
;;;1053   temp_SL/=700L;
000d2a  f44f722f          MOV      r2,#0x2bc
000d2e  fb91f1f2          SDIV     r1,r1,r2
;;;1054   bat[0]._Ubm=(signed short)temp_SL;
000d32  80a1              STRH     r1,[r4,#4]
;;;1055   
;;;1056   #ifdef UKU_KONTUR
;;;1057   temp_SL=(signed long)adc_buff_[4];
;;;1058   temp_SL*=Kubatm[0];
;;;1059   temp_SL/=2000L;
;;;1060   bat[0]._Ubm=(signed short)temp_SL;
;;;1061   #endif
;;;1062   
;;;1063   temp_SL=(signed long)adc_buff_[12];
000d34  f9b01018          LDRSH    r1,[r0,#0x18]  ; adc_buff_
;;;1064   temp_SL*=Kubat[1];
000d38  f9bcc002          LDRSH    r12,[r12,#2]  ; Kubat
000d3c  fb0cfc01          MUL      r12,r12,r1
;;;1065   temp_SL/=2000L;
000d40  fb9cf1f8          SDIV     r1,r12,r8
;;;1066   bat[1]._Ub=(signed short)temp_SL;
000d44  f8a4104e          STRH     r1,[r4,#0x4e]
;;;1067   
;;;1068   #ifdef UKU_220
;;;1069   temp_SL=(signed long)adc_buff_[12];
;;;1070   temp_SL*=Kubat[1];
;;;1071   temp_SL/=400L;
;;;1072   bat[1]._Ub=(signed short)temp_SL;
;;;1073   #endif
;;;1074   
;;;1075   #ifdef UKU_220_V2
;;;1076   temp_SL=(signed long)adc_buff_[12];
;;;1077   temp_SL*=Kubat[1];
;;;1078   temp_SL/=400L;
;;;1079   bat[1]._Ub=(signed short)temp_SL;
;;;1080   #endif
;;;1081   
;;;1082   temp_SL=(signed long)adc_buff_[1];
000d48  f9b00002          LDRSH    r0,[r0,#2]  ; adc_buff_
;;;1083   temp_SL*=Kubatm[1];
000d4c  f9b31002          LDRSH    r1,[r3,#2]  ; Kubatm
000d50  4341              MULS     r1,r0,r1
;;;1084   temp_SL/=700L;
000d52  fb91f0f2          SDIV     r0,r1,r2
;;;1085   bat[1]._Ubm=(signed short)temp_SL;
000d56  f8a40050          STRH     r0,[r4,#0x50]
;;;1086   #ifdef UKU_KONTUR
;;;1087   temp_SL=(signed long)adc_buff_[1];
;;;1088   temp_SL*=Kubatm[1];
;;;1089   temp_SL/=2000L;
;;;1090   bat[1]._Ubm=(signed short)temp_SL;
;;;1091   #endif
;;;1092   
;;;1093   #ifdef UKU_TELECORE2015
;;;1094   temp_SL=(signed long)adc_buff_[2];
;;;1095   temp_SL*=Kubat[0];
;;;1096   temp_SL/=2000L;
;;;1097   bat[0]._Ub=(signed short)temp_SL;
;;;1098   #endif
;;;1099   
;;;1100   /*
;;;1101   // 
;;;1102   if(!mess_find_unvol(MESS2MATEMAT))
;;;1103   	{
;;;1104   	temp_SL=(signed long)ad7705_buff_[0];
;;;1105   	temp_SL-=(signed long)Kibat0[0];
;;;1106   	temp_SL*=(signed long)Kibat1[0];
;;;1107   	if((AUSW_MAIN==24120)||(AUSW_MAIN==24210))temp_SL/=300L;
;;;1108   	else temp_SL/=1000L;
;;;1109   	bat[0]._Ib=(signed short)temp_SL;
;;;1110   
;;;1111   	temp_SL=(signed long)ad7705_buff_[1];
;;;1112   	temp_SL-=(signed long)Kibat0[1];
;;;1113   	temp_SL*=(signed long)Kibat1[1];
;;;1114   	if((AUSW_MAIN==24120)||(AUSW_MAIN==24210))temp_SL/=300L;
;;;1115   	else temp_SL/=1000L;
;;;1116   	bat[1]._Ib=(signed short)temp_SL;
;;;1117   	}
;;;1118   */
;;;1119   
;;;1120   
;;;1121   // 
;;;1122   if(!mess_find_unvol(MESS2MATEMAT))
000d5a  20dc              MOVS     r0,#0xdc
000d5c  f7fffffe          BL       mess_find_unvol
;;;1123   	{
;;;1124   	temp_SL=(signed long)ad7705_buff_[0];
;;;1125   	temp_SL-=(signed long)Kibat0[0];
;;;1126   	temp_SL*=(signed long)Kibat1[0];
;;;1127   	if((AUSW_MAIN==24120)||(AUSW_MAIN==24210))temp_SL/=300L;
;;;1128   	else if((AUSW_MAIN==22010)||(AUSW_MAIN==22035)||(AUSW_MAIN==22033))temp_SL/=2000L;
000d60  f2456313          MOV      r3,#0x5613
000d64  b9c0              CBNZ     r0,|L1.3480|
000d66  f8df9050          LDR      r9,|L1.3512|
000d6a  f8b90000          LDRH     r0,[r9,#0]            ;1124  ; ad7705_buff_
000d6e  f8dfa044          LDR      r10,|L1.3508|
000d72  f8ba1000          LDRH     r1,[r10,#0]           ;1125  ; Kibat0
000d76  1a40              SUBS     r0,r0,r1              ;1125
000d78  f8dfb09c          LDR      r11,|L1.3608|
000d7c  f9bb1000          LDRSH    r1,[r11,#0]           ;1126  ; Kibat1
000d80  4341              MULS     r1,r0,r1              ;1126
000d82  481f              LDR      r0,|L1.3584|
000d84  f6456238          MOV      r2,#0x5e38            ;1127
000d88  8800              LDRH     r0,[r0,#0]            ;1127  ; AUSW_MAIN
000d8a  f6456c92          MOV      r12,#0x5e92           ;1127
000d8e  4290              CMP      r0,r2                 ;1127
000d90  d001              BEQ      |L1.3478|
000d92  4560              CMP      r0,r12                ;1127
000d94  d147              BNE      |L1.3622|
                  |L1.3478|
000d96  e041              B        |L1.3612|
                  |L1.3480|
000d98  e075              B        |L1.3718|
000d9a  0000              DCW      0x0000
                  |L1.3484|
                          DCD      mess_data
                  |L1.3488|
                          DCD      USIGN
                  |L1.3492|
                          DCD      load_U
                  |L1.3496|
                          DCD      load_I
                  |L1.3500|
                          DCD      bat_ips
                  |L1.3504|
                          DCD      ||area_number.21||
                  |L1.3508|
                          DCD      Kibat0
                  |L1.3512|
                          DCD      ad7705_buff_
                  |L1.3516|
                          DCD      ADR_KI0BAT
                  |L1.3520|
                          DCD      bat_u_old_cnt
                  |L1.3524|
                          DCD      bat
                  |L1.3528|
                          DCD      net_U
                  |L1.3532|
                          DCD      UMN
                  |L1.3536|
                          DCD      unet_drv_cnt
                  |L1.3540|
                          DCD      net_Ustore
                  |L1.3544|
                          DCD      main_1Hz_cnt
                  |L1.3548|
                          DCD      bps
                  |L1.3552|
                          DCD      KunetA
                  |L1.3556|
                          DCD      net_Ua
                  |L1.3560|
                          DCD      KunetB
                  |L1.3564|
                          DCD      KunetC
                  |L1.3568|
                          DCD      net_Ub
                  |L1.3572|
                          DCD      net_Uc
                  |L1.3576|
                          DCD      bps+0x3a2
                  |L1.3580|
                          DCD      net_F3
                  |L1.3584|
                          DCD      AUSW_MAIN
                  |L1.3588|
                          DCD      ||.bss||+0x400
                  |L1.3592|
                          DCD      Kunet
                  |L1.3596|
                          DCD      net_F
                  |L1.3600|
                          DCD      Kubat
                  |L1.3604|
                          DCD      Kubatm
                  |L1.3608|
                          DCD      Kibat1
                  |L1.3612|
000e1c  f44f7e96          MOV      lr,#0x12c             ;1127
000e20  fb91f1fe          SDIV     r1,r1,lr              ;1127
000e24  e00c              B        |L1.3648|
                  |L1.3622|
000e26  42a8              CMP      r0,r5
000e28  d003              BEQ      |L1.3634|
000e2a  4298              CMP      r0,r3
000e2c  d001              BEQ      |L1.3634|
000e2e  42b8              CMP      r0,r7
000e30  d102              BNE      |L1.3640|
                  |L1.3634|
000e32  fb91f1f8          SDIV     r1,r1,r8
000e36  e003              B        |L1.3648|
                  |L1.3640|
;;;1129   	else temp_SL/=1000L;
000e38  f44f7e7a          MOV      lr,#0x3e8
000e3c  fb91f1fe          SDIV     r1,r1,lr
                  |L1.3648|
;;;1130   	#ifdef UKU_TELECORE2015
;;;1131   	temp_SL/=2L;
;;;1132   	temp_SL=-temp_SL;
;;;1133   	#endif
;;;1134   	bat[0]._Ib=(signed short)temp_SL;
000e40  8121              STRH     r1,[r4,#8]
;;;1135   
;;;1136   	temp_SL=(signed long)ad7705_buff_[1];
000e42  f8b91002          LDRH     r1,[r9,#2]  ; ad7705_buff_
;;;1137   	temp_SL-=(signed long)Kibat0[1];
000e46  f8ba9002          LDRH     r9,[r10,#2]  ; Kibat0
000e4a  eba10909          SUB      r9,r1,r9
;;;1138   	temp_SL*=(signed long)Kibat1[1];
000e4e  f9bb1002          LDRSH    r1,[r11,#2]  ; Kibat1
000e52  fb01f109          MUL      r1,r1,r9
;;;1139   	if((AUSW_MAIN==24120)||(AUSW_MAIN==24210))temp_SL/=300L;
000e56  4290              CMP      r0,r2
000e58  d001              BEQ      |L1.3678|
000e5a  4560              CMP      r0,r12
000e5c  d104              BNE      |L1.3688|
                  |L1.3678|
000e5e  f44f7096          MOV      r0,#0x12c
000e62  fb91f0f0          SDIV     r0,r1,r0
000e66  e00c              B        |L1.3714|
                  |L1.3688|
;;;1140   	else if((AUSW_MAIN==22010)||(AUSW_MAIN==22035)||(AUSW_MAIN==22033))temp_SL/=2000L;
000e68  42a8              CMP      r0,r5
000e6a  d003              BEQ      |L1.3700|
000e6c  4298              CMP      r0,r3
000e6e  d001              BEQ      |L1.3700|
000e70  42b8              CMP      r0,r7
000e72  d102              BNE      |L1.3706|
                  |L1.3700|
000e74  fb91f0f8          SDIV     r0,r1,r8
000e78  e003              B        |L1.3714|
                  |L1.3706|
;;;1141   	else temp_SL/=1000L;
000e7a  f44f707a          MOV      r0,#0x3e8
000e7e  fb91f0f0          SDIV     r0,r1,r0
                  |L1.3714|
;;;1142   	bat[1]._Ib=(signed short)temp_SL;
000e82  f8a40054          STRH     r0,[r4,#0x54]
                  |L1.3718|
;;;1143   	}
;;;1144   
;;;1145   
;;;1146   
;;;1147   
;;;1148   
;;;1149   // 
;;;1150   
;;;1151   #ifdef UKU_KONTUR
;;;1152   if((adc_buff_[6]>800)&&(adc_buff_[6]<3800))bat[0]._nd=0;
;;;1153   else bat[0]._nd=1;
;;;1154   temp_SL=(signed long)adc_buff_[6];
;;;1155   temp_SL*=Ktbat[0];
;;;1156   temp_SL/=20000L;
;;;1157   temp_SL-=273L;
;;;1158   bat[0]._Tb=(signed short)temp_SL;
;;;1159   #else
;;;1160   if((adc_buff_[6]>800)&&(adc_buff_[6]<3800))bat[0]._nd=0;
000e86  f8dfa460          LDR      r10,|L1.4840|
000e8a  f6403bb7          MOV      r11,#0xbb7
000e8e  f9ba100c          LDRSH    r1,[r10,#0xc]  ; adc_buff_
;;;1161   else bat[0]._nd=1;
000e92  2201              MOVS     r2,#1
000e94  f2a13c21          SUB      r12,r1,#0x321         ;1160
000e98  2000              MOVS     r0,#0                 ;1160
000e9a  45dc              CMP      r12,r11               ;1160
000e9c  d201              BCS      |L1.3746|
000e9e  7320              STRB     r0,[r4,#0xc]          ;1160
000ea0  e000              B        |L1.3748|
                  |L1.3746|
000ea2  7322              STRB     r2,[r4,#0xc]
                  |L1.3748|
;;;1162   temp_SL=(signed long)adc_buff_[6];
;;;1163   temp_SL*=Ktbat[0];
000ea4  f8df9444          LDR      r9,|L1.4844|
000ea8  f9b99000          LDRSH    r9,[r9,#0]  ; Ktbat
000eac  fb09f901          MUL      r9,r9,r1
;;;1164   temp_SL/=20000L;
000eb0  f6446e20          MOV      lr,#0x4e20
000eb4  fb99f9fe          SDIV     r9,r9,lr
;;;1165   temp_SL-=273L;
000eb8  f2a91911          SUB      r9,r9,#0x111
;;;1166   bat[0]._Tb=(signed short)temp_SL;
000ebc  f8a4900a          STRH     r9,[r4,#0xa]
;;;1167   #endif
;;;1168   
;;;1169   #ifdef UKU_KONTUR
;;;1170   if((adc_buff_[7]>800)&&(adc_buff_[7]<3800))bat[1]._nd=0;
;;;1171   else bat[1]._nd=1;
;;;1172   temp_SL=(signed long)adc_buff_[7];
;;;1173   temp_SL*=Ktbat[1];
;;;1174   temp_SL/=20000L;
;;;1175   temp_SL-=273L;
;;;1176   bat[1]._Tb=(signed short)temp_SL;
;;;1177   #else
;;;1178   if((adc_buff_[7]>800)&&(adc_buff_[7]<3800))bat[1]._nd=0;
000ec0  f9ba900e          LDRSH    r9,[r10,#0xe]  ; adc_buff_
000ec4  f6403bb7          MOV      r11,#0xbb7
000ec8  f2a93e21          SUB      lr,r9,#0x321
000ecc  45de              CMP      lr,r11
000ece  d202              BCS      |L1.3798|
000ed0  f8840058          STRB     r0,[r4,#0x58]
000ed4  e001              B        |L1.3802|
                  |L1.3798|
;;;1179   else bat[1]._nd=1;
000ed6  f8842058          STRB     r2,[r4,#0x58]
                  |L1.3802|
;;;1180   temp_SL=(signed long)adc_buff_[7];
;;;1181   temp_SL*=Ktbat[1];
000eda  f8dfb410          LDR      r11,|L1.4844|
000ede  f9bbb002          LDRSH    r11,[r11,#2]  ; Ktbat
000ee2  fb0bfb09          MUL      r11,r11,r9
;;;1182   temp_SL/=20000L;
000ee6  f6446e20          MOV      lr,#0x4e20
000eea  fb9bf9fe          SDIV     r9,r11,lr
;;;1183   temp_SL-=273L;
000eee  f2a91911          SUB      r9,r9,#0x111
;;;1184   bat[1]._Tb=(signed short)temp_SL;
000ef2  4cff              LDR      r4,|L1.4848|
000ef4  f8a49056          STRH     r9,[r4,#0x56]
;;;1185   #endif
;;;1186   
;;;1187   #ifdef UKU_6U
;;;1188   
;;;1189   if(NUMMAKB==2)
;;;1190   	{
;;;1191   	if(makb[0]._cnt<5)
;;;1192   		{
;;;1193   		if(makb[0]._T_nd[0]==0)
;;;1194   			{
;;;1195   			bat[0]._Tb=makb[0]._T[0];
;;;1196   			bat[0]._nd=0;
;;;1197   			}
;;;1198   		}
;;;1199   
;;;1200   	if(makb[1]._cnt<5)
;;;1201   		{
;;;1202   		if(makb[1]._T_nd[0]==0)
;;;1203   			{
;;;1204   			bat[1]._Tb=makb[1]._T[0];
;;;1205   			bat[1]._nd=0;
;;;1206   			}
;;;1207   		}
;;;1208   
;;;1209   	}
;;;1210   else if(NUMMAKB==4)
;;;1211   	{
;;;1212   	signed short temp_t;
;;;1213   	temp_t=-20;
;;;1214   	if(makb[0]._cnt<5)
;;;1215   		{
;;;1216   		if(makb[0]._T_nd[0]==0)
;;;1217   			{
;;;1218   			temp_t=makb[0]._T[0];
;;;1219   			bat[0]._nd=0;
;;;1220   			}
;;;1221   		}
;;;1222   	if(makb[1]._cnt<5)
;;;1223   		{
;;;1224   		if(makb[1]._T_nd[0]==0)
;;;1225   			{
;;;1226   			if(temp_t<makb[1]._T[0])
;;;1227   				{
;;;1228   				bat[0]._nd=0;
;;;1229   				temp_t=makb[1]._T[0];
;;;1230   				}
;;;1231   			}
;;;1232   		}
;;;1233   	if(temp_t!=-20)bat[0]._Tb = temp_t;
;;;1234   
;;;1235    	temp_t=-20;
;;;1236   	if(makb[2]._cnt<5)
;;;1237   		{
;;;1238   		if(makb[2]._T_nd[0]==0)
;;;1239   			{
;;;1240   			temp_t=makb[2]._T[0];
;;;1241   			bat[1]._nd=0;
;;;1242   			}
;;;1243   		}
;;;1244   	if(makb[3]._cnt<5)
;;;1245   		{
;;;1246   		if(makb[3]._T_nd[0]==0)
;;;1247   			{
;;;1248   			if(temp_t<makb[3]._T[0])
;;;1249   				{
;;;1250   				bat[1]._nd=0;
;;;1251   				temp_t=makb[3]._T[0];
;;;1252   				}
;;;1253   			}
;;;1254   		}
;;;1255   	if(temp_t!=-20)bat[1]._Tb = temp_t;
;;;1256   	}
;;;1257   
;;;1258   #endif
;;;1259   
;;;1260   
;;;1261   // 
;;;1262   temp_SL=(signed long)adc_buff_[2];
000ef8  f9ba4004          LDRSH    r4,[r10,#4]  ; adc_buff_
;;;1263   temp_SL*=Kuload;
000efc  f8df93f4          LDR      r9,|L1.4852|
000f00  f9b99000          LDRSH    r9,[r9,#0]  ; Kuload
000f04  fb04f409          MUL      r4,r4,r9
;;;1264   temp_SL/=2000L;
000f08  f44f68fa          MOV      r8,#0x7d0
000f0c  fb94f8f8          SDIV     r8,r4,r8
;;;1265   load_U=(signed short)temp_SL;
000f10  f8dfb3e4          LDR      r11,|L1.4856|
000f14  f8ab8000          STRH     r8,[r11,#0]
;;;1266   
;;;1267   #ifdef UKU_220 
;;;1268   // 
;;;1269   temp_SL=(signed long)adc_buff_[2];
;;;1270   temp_SL*=Kuload;
;;;1271   temp_SL/=350L;
;;;1272   load_U=(signed short)temp_SL;
;;;1273   #endif
;;;1274   
;;;1275   #ifdef UKU_220_V2 
;;;1276   // 
;;;1277   temp_SL=(signed long)adc_buff_[2];
;;;1278   temp_SL*=Kuload;
;;;1279   temp_SL/=350L;
;;;1280   load_U=(signed short)temp_SL;
;;;1281   #endif
;;;1282   
;;;1283   #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;1284   // 
;;;1285   temp_SL=(signed long)adc_buff_[2];
;;;1286   temp_SL*=Kuload;
;;;1287   if(AUSW_MAIN==22010)temp_SL/=400L;
000f18  f8df83e0          LDR      r8,|L1.4860|
000f1c  f8b88000          LDRH     r8,[r8,#0]  ; AUSW_MAIN
000f20  f5a845aa          SUB      r5,r8,#0x5500
000f24  3dfa              SUBS     r5,r5,#0xfa
000f26  d104              BNE      |L1.3890|
000f28  f44f75c8          MOV      r5,#0x190
000f2c  fb94f4f5          SDIV     r4,r4,r5
000f30  e003              B        |L1.3898|
                  |L1.3890|
;;;1288   else temp_SL/=500L;
000f32  f44f75fa          MOV      r5,#0x1f4
000f36  fb94f4f5          SDIV     r4,r4,r5
                  |L1.3898|
;;;1289   load_U=(signed short)temp_SL;
000f3a  fa0ff984          SXTH     r9,r4
000f3e  f8ab9000          STRH     r9,[r11,#0]
;;;1290   #endif
;;;1291   
;;;1292   
;;;1293   #ifdef UKU_KONTUR
;;;1294   //   1(  )
;;;1295   if((adc_buff_[5]>800)&&(adc_buff_[5]<3800))ND_EXT[0]=0;
;;;1296   else ND_EXT[0]=1;
;;;1297   temp_SL=(signed long)adc_buff_[5];
;;;1298   temp_SL*=Ktext[0];
;;;1299   temp_SL/=20000L;
;;;1300   temp_SL-=273L;
;;;1301   t_ext[0]=(signed short)temp_SL;
;;;1302   #else 
;;;1303   //   1(  )
;;;1304   if((adc_buff_[5]>800)&&(adc_buff_[5]<3800))ND_EXT[0]=0;
000f42  f9baa00a          LDRSH    r10,[r10,#0xa]  ; adc_buff_
000f46  f6403bb7          MOV      r11,#0xbb7
000f4a  f2aa3521          SUB      r5,r10,#0x321
000f4e  4cec              LDR      r4,|L1.4864|
000f50  455d              CMP      r5,r11
000f52  d201              BCS      |L1.3928|
000f54  6020              STR      r0,[r4,#0]  ; ND_EXT
000f56  e000              B        |L1.3930|
                  |L1.3928|
;;;1305   else ND_EXT[0]=1;
000f58  6022              STR      r2,[r4,#0]  ; ND_EXT
                  |L1.3930|
;;;1306   temp_SL=(signed long)adc_buff_[5];
;;;1307   temp_SL*=Ktext[0];
000f5a  4dea              LDR      r5,|L1.4868|
000f5c  f9b55000          LDRSH    r5,[r5,#0]  ; Ktext
000f60  fb05fa0a          MUL      r10,r5,r10
;;;1308   temp_SL/=20000L;
000f64  fb9afafe          SDIV     r10,r10,lr
000f68  46f3              MOV      r11,lr
;;;1309   temp_SL-=273L;
000f6a  f2aa1a11          SUB      r10,r10,#0x111
;;;1310   t_ext[0]=(signed short)temp_SL;
000f6e  f8dfe398          LDR      lr,|L1.4872|
000f72  f8aea000          STRH     r10,[lr,#0]
;;;1311   #endif
;;;1312   
;;;1313   #ifdef UKU_220
;;;1314   
;;;1315   //   2(  )
;;;1316   if((adc_buff_[3]>800)&&(adc_buff_[3]<3800))ND_EXT[1]=0;
;;;1317   else ND_EXT[1]=1;
;;;1318   temp_SL=(signed long)adc_buff_[3];
;;;1319   temp_SL*=Ktext[1];
;;;1320   temp_SL/=20000L;
;;;1321   temp_SL-=273L;
;;;1322   t_ext[1]=(signed short)temp_SL;
;;;1323   
;;;1324   //   3(  MSAN)
;;;1325   if((adc_buff_[10]>800)&&(adc_buff_[10]<3800))ND_EXT[2]=0;
;;;1326   else ND_EXT[2]=1;
;;;1327   temp_SL=(signed long)adc_buff_[10];
;;;1328   temp_SL*=Ktext[2];
;;;1329   temp_SL/=20000L;
;;;1330   temp_SL-=273L;
;;;1331   t_ext[2]=(signed short)temp_SL;
;;;1332   
;;;1333   #else
;;;1334   
;;;1335   
;;;1336   #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;1337   
;;;1338   //   
;;;1339   if((adc_buff_[6]>800)&&(adc_buff_[6]<3800))ND_EXT[0]=0;
000f76  f6403ab7          MOV      r10,#0xbb7
000f7a  45d4              CMP      r12,r10
000f7c  d201              BCS      |L1.3970|
000f7e  6020              STR      r0,[r4,#0]  ; ND_EXT
000f80  e000              B        |L1.3972|
                  |L1.3970|
;;;1340   else ND_EXT[0]=1;
000f82  6022              STR      r2,[r4,#0]  ; ND_EXT
                  |L1.3972|
;;;1341   temp_SL=(signed long)adc_buff_[6];
;;;1342   temp_SL*=Ktext[0];
000f84  434d              MULS     r5,r1,r5
;;;1343   temp_SL/=20000L;
000f86  fb95f1fb          SDIV     r1,r5,r11
;;;1344   temp_SL-=273L;
000f8a  f2a11111          SUB      r1,r1,#0x111
;;;1345   t_ext[0]=(signed short)temp_SL;
000f8e  f8ae1000          STRH     r1,[lr,#0]
;;;1346   
;;;1347   #else
;;;1348   
;;;1349   
;;;1350   
;;;1351   //   2(  )
;;;1352   if((adc_buff_[10]>800)&&(adc_buff_[10]<3800))ND_EXT[1]=0;
;;;1353   else ND_EXT[1]=1;
;;;1354   temp_SL=(signed long)adc_buff_[10];
;;;1355   temp_SL*=Ktext[1];
;;;1356   temp_SL/=20000L;
;;;1357   temp_SL-=273L;
;;;1358   t_ext[1]=(signed short)temp_SL;
;;;1359   
;;;1360   //   3(  MSAN)
;;;1361   if((adc_buff_[3]>800)&&(adc_buff_[3]<3800))ND_EXT[2]=0;
;;;1362   else ND_EXT[2]=1;
;;;1363   temp_SL=(signed long)adc_buff_[3];
;;;1364   temp_SL*=Ktext[2];
;;;1365   temp_SL/=20000L;
;;;1366   temp_SL-=273L;
;;;1367   t_ext[2]=(signed short)temp_SL;
;;;1368   
;;;1369   #endif
;;;1370   #endif
;;;1371   
;;;1372   #ifdef UKU_220_V2
;;;1373   
;;;1374   //   2(  )
;;;1375   if((adc_buff_[3]>800)&&(adc_buff_[3]<3800))ND_EXT[1]=0;
;;;1376   else ND_EXT[1]=1;
;;;1377   temp_SL=(signed long)adc_buff_[3];
;;;1378   temp_SL*=Ktext[1];
;;;1379   temp_SL/=20000L;
;;;1380   temp_SL-=273L;
;;;1381   t_ext[1]=(signed short)temp_SL;
;;;1382   
;;;1383   //   3(  MSAN)
;;;1384   if((adc_buff_[10]>800)&&(adc_buff_[10]<3800))ND_EXT[2]=0;
;;;1385   else ND_EXT[2]=1;
;;;1386   temp_SL=(signed long)adc_buff_[10];
;;;1387   temp_SL*=Ktext[2];
;;;1388   temp_SL/=20000L;
;;;1389   temp_SL-=273L;
;;;1390   t_ext[2]=(signed short)temp_SL;
;;;1391   
;;;1392   #else
;;;1393   
;;;1394   #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;1395   // 
;;;1396   if(bps[8]._device==dIBAT_METR)
000f92  4dde              LDR      r5,|L1.4876|
;;;1397   	{
;;;1398   	ibat_metr_buff_[0]=((signed long)bps[8]._buff[0])+(((signed long)bps[8]._buff[1])<<8);
;;;1399   	ibat_metr_buff_[1]=((signed long)bps[8]._buff[2])+(((signed long)bps[8]._buff[3])<<8);
;;;1400   	bIBAT_SMKLBR=((signed short)bps[8]._buff[4])+(((signed short)bps[8]._buff[5])<<8);
;;;1401   
;;;1402   	if(!bIBAT_SMKLBR)
;;;1403   		{
;;;1404   		signed long temp_SL;
;;;1405   		temp_SL=(signed long)ibat_metr_buff_[0];
;;;1406   		temp_SL-=(signed long)ibat_metr_buff_[1];
;;;1407   		temp_SL*=(signed long)Kibat1[0];
;;;1408   		if((AUSW_MAIN==22010)||(AUSW_MAIN==22011)||(AUSW_MAIN==22035)||(AUSW_MAIN==22033)||(AUSW_MAIN==22063)||(AUSW_MAIN==22023)||(AUSW_MAIN==22043))temp_SL/=2000L;
;;;1409   	
;;;1410   		Ib_ips_termokompensat =(signed short)temp_SL;
000f94  4ade              LDR      r2,|L1.4880|
000f96  f89512a0          LDRB     r1,[r5,#0x2a0]        ;1396  ; bps
000f9a  2909              CMP      r1,#9                 ;1396
000f9c  d13f              BNE      |L1.4126|
000f9e  f89512a6          LDRB     r1,[r5,#0x2a6]        ;1398  ; bps
000fa2  f895c2a7          LDRB     r12,[r5,#0x2a7]       ;1398  ; bps
000fa6  f8dfb36c          LDR      r11,|L1.4884|
000faa  eb01210c          ADD      r1,r1,r12,LSL #8      ;1398
000fae  f8cb1000          STR      r1,[r11,#0]           ;1398  ; ibat_metr_buff_
000fb2  f895c2a8          LDRB     r12,[r5,#0x2a8]       ;1399  ; bps
000fb6  f895a2a9          LDRB     r10,[r5,#0x2a9]       ;1399  ; bps
000fba  eb0c2c0a          ADD      r12,r12,r10,LSL #8    ;1399
000fbe  f8cbc004          STR      r12,[r11,#4]          ;1399  ; ibat_metr_buff_
000fc2  f895a2aa          LDRB     r10,[r5,#0x2aa]       ;1400  ; bps
000fc6  f895b2ab          LDRB     r11,[r5,#0x2ab]       ;1400  ; bps
000fca  eb0a2a0b          ADD      r10,r10,r11,LSL #8    ;1400
000fce  f8dfb348          LDR      r11,|L1.4888|
000fd2  fa0ffa8a          SXTH     r10,r10               ;1400
000fd6  f8aba000          STRH     r10,[r11,#0]          ;1400
000fda  f1ba0f00          CMP      r10,#0                ;1402
000fde  d11e              BNE      |L1.4126|
000fe0  eba10c0c          SUB      r12,r1,r12            ;1406
000fe4  49cd              LDR      r1,|L1.4892|
000fe6  f9b11000          LDRSH    r1,[r1,#0]            ;1407  ; Kibat1
000fea  fb01f10c          MUL      r1,r1,r12             ;1407
000fee  f5a84ca8          SUB      r12,r8,#0x5400        ;1408
000ff2  f5bc7cfd          SUBS     r12,r12,#0x1fa        ;1408
000ff6  d00d              BEQ      |L1.4116|
000ff8  f1bc0c01          SUBS     r12,r12,#1            ;1408
000ffc  d00a              BEQ      |L1.4116|
000ffe  4598              CMP      r8,r3                 ;1408
001000  d008              BEQ      |L1.4116|
001002  45b8              CMP      r8,r7                 ;1408
001004  d006              BEQ      |L1.4116|
001006  f1bc0334          SUBS     r3,r12,#0x34          ;1408
00100a  d003              BEQ      |L1.4116|
00100c  3328              ADDS     r3,r3,#0x28           ;1408
00100e  d001              BEQ      |L1.4116|
001010  3b14              SUBS     r3,r3,#0x14           ;1408
001012  d103              BNE      |L1.4124|
                  |L1.4116|
001014  f44f63fa          MOV      r3,#0x7d0             ;1408
001018  fb91f1f3          SDIV     r1,r1,r3              ;1408
                  |L1.4124|
00101c  8011              STRH     r1,[r2,#0]
                  |L1.4126|
;;;1411   		}
;;;1412   	}
;;;1413   
;;;1414   bat[0]._Ub=load_U;
00101e  4fb4              LDR      r7,|L1.4848|
001020  f8a79002          STRH     r9,[r7,#2]
;;;1415   bat[0]._Ib=Ib_ips_termokompensat;
001024  f9b21000          LDRSH    r1,[r2,#0]  ; Ib_ips_termokompensat
001028  8139              STRH     r1,[r7,#8]
;;;1416   
;;;1417   #endif
;;;1418   #endif
;;;1419   
;;;1420   
;;;1421   #ifdef UKU_TELECORE2015
;;;1422   
;;;1423   //   1
;;;1424   if((adc_buff_[7]>800)&&(adc_buff_[7]<3800))ND_EXT[0]=0;
;;;1425   else ND_EXT[0]=1;
;;;1426   temp_SL=(signed long)adc_buff_[7];
;;;1427   temp_SL*=Ktext[0];
;;;1428   temp_SL/=20000L;
;;;1429   temp_SL-=273L;
;;;1430   t_ext[0]=(signed short)temp_SL;
;;;1431   
;;;1432   
;;;1433   //   2
;;;1434   if((adc_buff_[6]>800)&&(adc_buff_[6]<3800))ND_EXT[1]=0;
;;;1435   else ND_EXT[1]=1;
;;;1436   temp_SL=(signed long)adc_buff_[6];
;;;1437   temp_SL*=Ktext[1];
;;;1438   temp_SL/=20000L;
;;;1439   temp_SL-=273L;
;;;1440   t_ext[1]=(signed short)temp_SL;
;;;1441   
;;;1442   #endif
;;;1443   
;;;1444   // 
;;;1445   temp_SL=(signed long)adc_buff_ext_[0];
00102a  4bbd              LDR      r3,|L1.4896|
00102c  f8b38000          LDRH     r8,[r3,#0]  ; adc_buff_ext_
;;;1446   temp_SL*=Kunet_ext[0];
001030  f8dfc2f0          LDR      r12,|L1.4900|
001034  f9bc2000          LDRSH    r2,[r12,#0]  ; Kunet_ext
001038  fb02f208          MUL      r2,r2,r8
;;;1447   temp_SL/=4000L;
00103c  f44f6b7a          MOV      r11,#0xfa0
001040  fb92f2fb          SDIV     r2,r2,r11
;;;1448   Uvv[0]=(signed short)temp_SL;
001044  f8df82e0          LDR      r8,|L1.4904|
001048  b292              UXTH     r2,r2
00104a  f8a82000          STRH     r2,[r8,#0]
;;;1449   if(Uvv[0]<100) Uvv0=Uvv[0];
00104e  f8dfa2dc          LDR      r10,|L1.4908|
001052  2a64              CMP      r2,#0x64
001054  d202              BCS      |L1.4188|
001056  f8aa2000          STRH     r2,[r10,#0]
00105a  e003              B        |L1.4196|
                  |L1.4188|
;;;1450   else Uvv0=net_U;
00105c  4ab4              LDR      r2,|L1.4912|
00105e  8812              LDRH     r2,[r2,#0]  ; net_U
001060  f8aa2000          STRH     r2,[r10,#0]
                  |L1.4196|
;;;1451   
;;;1452   // 
;;;1453   temp_SL=(signed long)adc_buff_ext_[1];
001064  885a              LDRH     r2,[r3,#2]  ; adc_buff_ext_
;;;1454   temp_SL*=Kunet_ext[1];
001066  f9bc3002          LDRSH    r3,[r12,#2]  ; Kunet_ext
00106a  4353              MULS     r3,r2,r3
;;;1455   temp_SL/=4000L;
00106c  fb93f2fb          SDIV     r2,r3,r11
;;;1456   Uvv[1]=(signed short)temp_SL;
001070  f8a82002          STRH     r2,[r8,#2]
;;;1457   
;;;1458   
;;;1459   //  
;;;1460   temp_SL=(signed long)eb2_data_short[0];
001074  4aaf              LDR      r2,|L1.4916|
001076  f9b23000          LDRSH    r3,[r2,#0]  ; eb2_data_short
;;;1461   temp_SL*=Kvv_eb2[0];
00107a  f8dfc2bc          LDR      r12,|L1.4920|
00107e  f9bc8000          LDRSH    r8,[r12,#0]  ; Kvv_eb2
001082  fb08f803          MUL      r8,r8,r3
;;;1462   temp_SL/=6000L;
001086  f2417370          MOV      r3,#0x1770
00108a  fb98faf3          SDIV     r10,r8,r3
;;;1463   Uvv_eb2[0]=(signed short)temp_SL;
00108e  f8df82ac          LDR      r8,|L1.4924|
001092  f8a8a000          STRH     r10,[r8,#0]
;;;1464   
;;;1465   temp_SL=(signed long)eb2_data_short[1];
001096  f9b2a002          LDRSH    r10,[r2,#2]  ; eb2_data_short
;;;1466   temp_SL*=Kvv_eb2[1];
00109a  f9bcb002          LDRSH    r11,[r12,#2]  ; Kvv_eb2
00109e  fb0bfb0a          MUL      r11,r11,r10
;;;1467   temp_SL/=6000L;
0010a2  fb9bfaf3          SDIV     r10,r11,r3
;;;1468   Uvv_eb2[1]=(signed short)temp_SL;
0010a6  f8a8a002          STRH     r10,[r8,#2]
;;;1469   
;;;1470   temp_SL=(signed long)eb2_data_short[2];
0010aa  f9b2a004          LDRSH    r10,[r2,#4]  ; eb2_data_short
;;;1471   temp_SL*=Kvv_eb2[2];
0010ae  f9bcc004          LDRSH    r12,[r12,#4]  ; Kvv_eb2
0010b2  fb0cfc0a          MUL      r12,r12,r10
;;;1472   temp_SL/=6000L;
0010b6  fb9cfcf3          SDIV     r12,r12,r3
;;;1473   Uvv_eb2[2]=(signed short)temp_SL;
0010ba  f8a8c004          STRH     r12,[r8,#4]
;;;1474   
;;;1475   //  
;;;1476   temp_SL=(signed long)eb2_data_short[3];
0010be  f9b28006          LDRSH    r8,[r2,#6]  ; eb2_data_short
;;;1477   temp_SL*=Kpes_eb2[0];
0010c2  f8dfc27c          LDR      r12,|L1.4928|
0010c6  f9bca000          LDRSH    r10,[r12,#0]  ; Kpes_eb2
0010ca  fb0afa08          MUL      r10,r10,r8
;;;1478   temp_SL/=6000L;
0010ce  fb9afaf3          SDIV     r10,r10,r3
;;;1479   Upes_eb2[0]=(signed short)temp_SL;
0010d2  f8df8270          LDR      r8,|L1.4932|
0010d6  f8a8a000          STRH     r10,[r8,#0]
;;;1480   
;;;1481   temp_SL=(signed long)eb2_data_short[4];
0010da  f9b2a008          LDRSH    r10,[r2,#8]  ; eb2_data_short
;;;1482   temp_SL*=Kpes_eb2[1];
0010de  f9bcb002          LDRSH    r11,[r12,#2]  ; Kpes_eb2
0010e2  fb0bfb0a          MUL      r11,r11,r10
;;;1483   temp_SL/=6000L;
0010e6  fb9bfaf3          SDIV     r10,r11,r3
;;;1484   Upes_eb2[1]=(signed short)temp_SL;
0010ea  f8a8a002          STRH     r10,[r8,#2]
;;;1485   
;;;1486   temp_SL=(signed long)eb2_data_short[5];
0010ee  f9b2200a          LDRSH    r2,[r2,#0xa]  ; eb2_data_short
;;;1487   temp_SL*=Kpes_eb2[2];
0010f2  f9bcc004          LDRSH    r12,[r12,#4]  ; Kpes_eb2
0010f6  fb0cfc02          MUL      r12,r12,r2
;;;1488   temp_SL/=6000L;
0010fa  fb9cf2f3          SDIV     r2,r12,r3
;;;1489   Upes_eb2[2]=(signed short)temp_SL;
0010fe  f8a82004          STRH     r2,[r8,#4]
;;;1490   
;;;1491   //  
;;;1492   
;;;1493   ibt._T[0]=t_ext[1]+273;
001102  f8be2002          LDRH     r2,[lr,#2]  ; t_ext
001106  f8df8240          LDR      r8,|L1.4936|
00110a  f2021211          ADD      r2,r2,#0x111
00110e  fa0ffc82          SXTH     r12,r2
001112  f8a8c000          STRH     r12,[r8,#0]
;;;1494   ibt._T[1]=t_ext[2]+273;
001116  f8be2004          LDRH     r2,[lr,#4]  ; t_ext
00111a  f2021211          ADD      r2,r2,#0x111
00111e  fa0ffa82          SXTH     r10,r2
001122  f8a8a002          STRH     r10,[r8,#2]
;;;1495   
;;;1496   ibt._nd[0]=ND_EXT[1];
001126  6862              LDR      r2,[r4,#4]  ; ND_EXT
001128  b2d3              UXTB     r3,r2
00112a  f8883008          STRB     r3,[r8,#8]
;;;1497   ibt._nd[1]=ND_EXT[2];
00112e  68a2              LDR      r2,[r4,#8]  ; ND_EXT
001130  b2d2              UXTB     r2,r2
001132  f8882009          STRB     r2,[r8,#9]
;;;1498   
;;;1499   #ifndef UKU_TELECORE2015
;;;1500   if((ibt._nd[0]==0) &&  (ibt._nd[1]==0))
;;;1501   	{
;;;1502   	t_box=((ibt._T[0]+ibt._T[1])/2)-273;
001136  4c85              LDR      r4,|L1.4940|
001138  b953              CBNZ     r3,|L1.4432|
00113a  b94a              CBNZ     r2,|L1.4432|
00113c  eb0c020a          ADD      r2,r12,r10
001140  eb0272d2          ADD      r2,r2,r2,LSR #31
001144  f46f7388          MVN      r3,#0x110
001148  eb030262          ADD      r2,r3,r2,ASR #1
00114c  8022              STRH     r2,[r4,#0]
00114e  e01d              B        |L1.4492|
                  |L1.4432|
;;;1503   	}
;;;1504   else if((ibt._nd[0]==1) &&  (ibt._nd[1]==0))
001150  2b01              CMP      r3,#1
001152  d105              BNE      |L1.4448|
001154  b922              CBNZ     r2,|L1.4448|
;;;1505   	{
;;;1506   	t_box=ibt._T[1]-273;
001156  f2aa1a11          SUB      r10,r10,#0x111
00115a  f8a4a000          STRH     r10,[r4,#0]
00115e  e015              B        |L1.4492|
                  |L1.4448|
;;;1507   	}
;;;1508   else if((ibt._nd[0]==0) &&  (ibt._nd[1]==1))
001160  b933              CBNZ     r3,|L1.4464|
001162  2a01              CMP      r2,#1
001164  d104              BNE      |L1.4464|
;;;1509   	{
;;;1510   	t_box=ibt._T[0]-273;
001166  f2ac1c11          SUB      r12,r12,#0x111
00116a  f8a4c000          STRH     r12,[r4,#0]
00116e  e00d              B        |L1.4492|
                  |L1.4464|
;;;1511   	}
;;;1512   else if((ibt._nd[0]==1) &&  (ibt._nd[1]==1))
001170  2b01              CMP      r3,#1
001172  d10b              BNE      |L1.4492|
001174  2a01              CMP      r2,#1
001176  d109              BNE      |L1.4492|
;;;1513   	{
;;;1514   	if(t_ext_can_nd<5)t_box= t_ext_can;
001178  4a75              LDR      r2,|L1.4944|
00117a  7812              LDRB     r2,[r2,#0]  ; t_ext_can_nd
00117c  2a05              CMP      r2,#5
00117e  d203              BCS      |L1.4488|
001180  4a74              LDR      r2,|L1.4948|
001182  8812              LDRH     r2,[r2,#0]  ; t_ext_can
001184  8022              STRH     r2,[r4,#0]
001186  e001              B        |L1.4492|
                  |L1.4488|
;;;1515   	else t_box=20;
001188  2214              MOVS     r2,#0x14
00118a  8022              STRH     r2,[r4,#0]
                  |L1.4492|
;;;1516   	}
;;;1517   #endif
;;;1518   /*
;;;1519   //  
;;;1520   
;;;1521   ibt._T[0]=bat[0]._Tb+273;
;;;1522   ibt._T[1]=bat[1]._Tb+273;
;;;1523   ibt._T[2]=t_ext[1]+273;
;;;1524   ibt._T[3]=t_ext[2]+273;
;;;1525   
;;;1526   ibt._nd[0]=bat[0]._nd;
;;;1527   ibt._nd[1]=bat[1]._nd;
;;;1528   ibt._nd[2]=ND_EXT[1];
;;;1529   ibt._nd[3]=ND_EXT[2];
;;;1530   
;;;1531   ibt._avg1=0;
;;;1532   ibt._avg_cnt=4;
;;;1533   
;;;1534   if(ibt._nd[0]==0)
;;;1535   	{
;;;1536   	ibt._avg1+=ibt._T[0];
;;;1537   	}
;;;1538   else 
;;;1539   	{
;;;1540   	ibt._avg_cnt--;
;;;1541   	}
;;;1542   
;;;1543   if(ibt._nd[1]==0)
;;;1544   	{
;;;1545   	ibt._avg1+=ibt._T[1];
;;;1546   	}
;;;1547   else 
;;;1548   	{
;;;1549   	ibt._avg_cnt--;
;;;1550   	}
;;;1551   
;;;1552   if(ibt._nd[2]==0)
;;;1553   	{
;;;1554   	ibt._avg1+=ibt._T[2];
;;;1555   	}
;;;1556   else 
;;;1557   	{
;;;1558   	ibt._avg_cnt--;
;;;1559   	}
;;;1560   
;;;1561   if(ibt._nd[3]==0)
;;;1562   	{
;;;1563   	ibt._avg1+=ibt._T[3];
;;;1564   	}
;;;1565   else 
;;;1566   	{
;;;1567   	ibt._avg_cnt--;
;;;1568   	}
;;;1569   
;;;1570   if(ibt._avg_cnt==0)
;;;1571   	{
;;;1572   	}
;;;1573   else
;;;1574   	{
;;;1575   	ibt._avg1/=ibt._avg_cnt;
;;;1576   	}
;;;1577   
;;;1578   
;;;1579   if(ibt._nd[0]!=0)
;;;1580   	{
;;;1581   	ibt._T_dispers[0]=0;
;;;1582   	}
;;;1583   else 
;;;1584   	{
;;;1585   	ibt._T_dispers[0]=abs(ibt._T[0]-ibt._avg1);
;;;1586   	}
;;;1587   
;;;1588   if(ibt._nd[1]!=0)
;;;1589   	{
;;;1590   	ibt._T_dispers[1]=0;
;;;1591   	}
;;;1592   else 
;;;1593   	{
;;;1594   	ibt._T_dispers[1]=abs(ibt._T[1]-ibt._avg1);
;;;1595   	}
;;;1596   
;;;1597   if(ibt._nd[2]!=0)
;;;1598   	{
;;;1599   	ibt._T_dispers[2]=0;
;;;1600   	}
;;;1601   else 
;;;1602   	{
;;;1603   	ibt._T_dispers[2]=abs(ibt._T[2]-ibt._avg1);
;;;1604   	}
;;;1605   
;;;1606   if(ibt._nd[3]!=0)
;;;1607   	{
;;;1608   	ibt._T_dispers[3]=0;
;;;1609   	}
;;;1610   else 
;;;1611   	{
;;;1612   	ibt._T_dispers[3]=abs(ibt._T[3]-ibt._avg1);
;;;1613   	}
;;;1614   
;;;1615   if(	ibt._nd[0]&&
;;;1616   	ibt._nd[1]&&
;;;1617   	ibt._nd[2]&&
;;;1618   	ibt._nd[3]
;;;1619   	)
;;;1620   	{
;;;1621   	t_box=(bps[0]._Ti);
;;;1622   	}
;;;1623   
;;;1624   else if(	ibt._nd[0]||
;;;1625   	ibt._nd[1]||
;;;1626   	ibt._nd[2]||
;;;1627   	ibt._nd[3]
;;;1628   	)
;;;1629   	{
;;;1630   	t_box=(ibt._avg1-273);
;;;1631   	}
;;;1632   else 
;;;1633   	{
;;;1634   	ibt._max_dispers_num=0;
;;;1635   	ibt._max_dispers=ibt._T_dispers[0];
;;;1636   
;;;1637   	if(ibt._T_dispers[1]>ibt._max_dispers)
;;;1638   		{
;;;1639   		ibt._max_dispers_num=1;
;;;1640   		ibt._max_dispers=ibt._T_dispers[1];
;;;1641   		}
;;;1642   	if(ibt._T_dispers[2]>ibt._max_dispers)
;;;1643   		{
;;;1644   		ibt._max_dispers_num=2;
;;;1645   		ibt._max_dispers=ibt._T_dispers[2];
;;;1646   		}
;;;1647   	if(ibt._T_dispers[3]>ibt._max_dispers)
;;;1648   		{
;;;1649   		ibt._max_dispers_num=3;
;;;1650   		ibt._max_dispers=ibt._T_dispers[3];
;;;1651   		}
;;;1652   
;;;1653   	ibt._avg2=0;
;;;1654   
;;;1655   	if(ibt._max_dispers_num!=0)
;;;1656   		{
;;;1657   		ibt._avg2+=ibt._T[0];
;;;1658   		}
;;;1659   	if(ibt._max_dispers_num!=1)
;;;1660   		{
;;;1661   		ibt._avg2+=ibt._T[1];
;;;1662   		}
;;;1663   	if(ibt._max_dispers_num!=2)
;;;1664   		{
;;;1665   		ibt._avg2+=ibt._T[2];
;;;1666   		}
;;;1667   	if(ibt._max_dispers_num!=3)
;;;1668   		{
;;;1669   		ibt._avg2+=ibt._T[3];
;;;1670   		}
;;;1671   
;;;1672   	t_box=(ibt._avg2/3)-273;
;;;1673   
;;;1674   	}*/
;;;1675   
;;;1676   
;;;1677   //*********************************************
;;;1678   
;;;1679   if((BAT_IS_ON[0]==bisON)&&(bat[0]._Ub>200)) Ibmax=bat[0]._Ib;
00118c  4a72              LDR      r2,|L1.4952|
00118e  7813              LDRB     r3,[r2,#0]  ; BAT_IS_ON
001190  2b55              CMP      r3,#0x55
001192  d103              BNE      |L1.4508|
001194  f1b90fc8          CMP      r9,#0xc8
001198  dd00              BLE      |L1.4508|
00119a  86f1              STRH     r1,[r6,#0x36]
                  |L1.4508|
;;;1680   if((BAT_IS_ON[1]==bisON)&&(bat[1]._Ub>200)&&(bat[1]._Ib>bat[0]._Ib)) Ibmax=bat[1]._Ib;
00119c  7852              LDRB     r2,[r2,#1]  ; BAT_IS_ON
00119e  2a55              CMP      r2,#0x55
0011a0  d108              BNE      |L1.4532|
0011a2  f9b7204e          LDRSH    r2,[r7,#0x4e]  ; bat
0011a6  2ac8              CMP      r2,#0xc8
0011a8  dd04              BLE      |L1.4532|
0011aa  f9b72054          LDRSH    r2,[r7,#0x54]  ; bat
0011ae  428a              CMP      r2,r1
0011b0  dd00              BLE      |L1.4532|
0011b2  86f2              STRH     r2,[r6,#0x36]
                  |L1.4532|
;;;1681   
;;;1682   //if((AUSW_MAIN==22063)||(AUSW_MAIN==22023)||(AUSW_MAIN==22043))Ibmax=Ib_ips_termokompensat;
;;;1683   #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;1684   Ibmax=Ib_ips_termokompensat;
0011b4  86f1              STRH     r1,[r6,#0x36]
;;;1685   #endif
;;;1686   for(i=0;i<NUMIST;i++)
0011b6  2300              MOVS     r3,#0
0011b8  4a68              LDR      r2,|L1.4956|
0011ba  f9b24000          LDRSH    r4,[r2,#0]
0011be  e032              B        |L1.4646|
                  |L1.4544|
;;;1687   	{
;;;1688   	if(bps[i]._cnt<25)
0011c0  ebc302c3          RSB      r2,r3,r3,LSL #3
0011c4  eb020242          ADD      r2,r2,r2,LSL #1
0011c8  eb050282          ADD      r2,r5,r2,LSL #2
0011cc  78d6              LDRB     r6,[r2,#3]
0011ce  2e19              CMP      r6,#0x19
0011d0  d220              BCS      |L1.4628|
;;;1689        	{
;;;1690        	bps[i]._Ii=bps[i]._buff[0]+(bps[i]._buff[1]*256);
0011d2  7996              LDRB     r6,[r2,#6]
0011d4  f892c007          LDRB     r12,[r2,#7]
0011d8  eb06260c          ADD      r6,r6,r12,LSL #8
0011dc  6256              STR      r6,[r2,#0x24]
;;;1691        	bps[i]._Uin=bps[i]._buff[2]+(bps[i]._buff[3]*256);
0011de  7a16              LDRB     r6,[r2,#8]
0011e0  f892c009          LDRB     r12,[r2,#9]
0011e4  eb06260c          ADD      r6,r6,r12,LSL #8
0011e8  6216              STR      r6,[r2,#0x20]
;;;1692        	bps[i]._Uii=bps[i]._buff[4]+(bps[i]._buff[5]*256);
0011ea  7a96              LDRB     r6,[r2,#0xa]
0011ec  f892c00b          LDRB     r12,[r2,#0xb]
0011f0  eb06260c          ADD      r6,r6,r12,LSL #8
0011f4  61d6              STR      r6,[r2,#0x1c]
;;;1693        	bps[i]._Ti=(signed)(bps[i]._buff[6]);
0011f6  7b16              LDRB     r6,[r2,#0xc]
0011f8  6296              STR      r6,[r2,#0x28]
;;;1694        	bps[i]._adr_ee=bps[i]._buff[7];
0011fa  7b56              LDRB     r6,[r2,#0xd]
0011fc  f8826052          STRB     r6,[r2,#0x52]
;;;1695        	bps[i]._flags_tm=bps[i]._buff[8];
001200  7b96              LDRB     r6,[r2,#0xe]
001202  f8826042          STRB     r6,[r2,#0x42]
;;;1696   	     bps[i]._rotor=bps[i]._buff[10]+(bps[i]._buff[11]*256);    
001206  7c16              LDRB     r6,[r2,#0x10]
001208  f892c011          LDRB     r12,[r2,#0x11]
00120c  eb06260c          ADD      r6,r6,r12,LSL #8
001210  64d6              STR      r6,[r2,#0x4c]
001212  e006              B        |L1.4642|
                  |L1.4628|
;;;1697        	} 
;;;1698   	else 
;;;1699        	{
;;;1700        	bps[i]._Uii=0; 
001214  61d0              STR      r0,[r2,#0x1c]
;;;1701        	bps[i]._Ii=0;
001216  6250              STR      r0,[r2,#0x24]
;;;1702        	bps[i]._Uin=0;
001218  6210              STR      r0,[r2,#0x20]
;;;1703        	bps[i]._Ti=0;
00121a  6290              STR      r0,[r2,#0x28]
;;;1704        	bps[i]._flags_tm=0; 
00121c  f8820042          STRB     r0,[r2,#0x42]
;;;1705   	     bps[i]._rotor=0;    
001220  64d0              STR      r0,[r2,#0x4c]
                  |L1.4642|
001222  1c5b              ADDS     r3,r3,#1              ;1686
001224  b2db              UXTB     r3,r3                 ;1686
                  |L1.4646|
001226  42a3              CMP      r3,r4                 ;1686
001228  dbca              BLT      |L1.4544|
;;;1706        	}
;;;1707        
;;;1708        }
;;;1709   
;;;1710   
;;;1711   
;;;1712   load_I=-(bat[0]._Ib/10)-(bat[1]._Ib/10);
00122a  220a              MOVS     r2,#0xa
00122c  fb91f1f2          SDIV     r1,r1,r2
001230  f9b73054          LDRSH    r3,[r7,#0x54]  ; bat
001234  4e4a              LDR      r6,|L1.4960|
001236  fb93f2f2          SDIV     r2,r3,r2
00123a  4411              ADD      r1,r1,r2
00123c  4249              RSBS     r1,r1,#0
00123e  b20f              SXTH     r7,r1
001240  8037              STRH     r7,[r6,#0]
;;;1713   
;;;1714   Isumm=0;
001242  4b48              LDR      r3,|L1.4964|
001244  8018              STRH     r0,[r3,#0]
;;;1715   
;;;1716   for(i=0;i<NUMIST;i++)
001246  2100              MOVS     r1,#0
001248  e011              B        |L1.4718|
                  |L1.4682|
;;;1717        {
;;;1718        if(bps[i]._cnt<5)Isumm+=bps[i]._Ii;
00124a  ebc102c1          RSB      r2,r1,r1,LSL #3
00124e  eb020242          ADD      r2,r2,r2,LSL #1
001252  eb050282          ADD      r2,r5,r2,LSL #2
001256  f892c003          LDRB     r12,[r2,#3]
00125a  f1bc0f05          CMP      r12,#5
00125e  d204              BCS      |L1.4714|
001260  6a52              LDR      r2,[r2,#0x24]
001262  f8b3c000          LDRH     r12,[r3,#0]  ; Isumm
001266  4462              ADD      r2,r2,r12
001268  801a              STRH     r2,[r3,#0]
                  |L1.4714|
00126a  1c49              ADDS     r1,r1,#1              ;1716
00126c  b2c9              UXTB     r1,r1                 ;1716
                  |L1.4718|
00126e  42a1              CMP      r1,r4                 ;1716
001270  dbeb              BLT      |L1.4682|
;;;1719        }  
;;;1720        
;;;1721   load_I=load_I+Isumm;
001272  8819              LDRH     r1,[r3,#0]  ; Isumm
001274  4439              ADD      r1,r1,r7
001276  b209              SXTH     r1,r1
001278  8031              STRH     r1,[r6,#0]
;;;1722   if(load_I<0)load_I=0;
00127a  2900              CMP      r1,#0
00127c  da00              BGE      |L1.4736|
00127e  8030              STRH     r0,[r6,#0]
                  |L1.4736|
;;;1723   
;;;1724   #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;1725   load_I=0;
001280  8030              STRH     r0,[r6,#0]
;;;1726   
;;;1727   Isumm=0;
001282  8018              STRH     r0,[r3,#0]
;;;1728   
;;;1729   for(i=0;i<NUMIST;i++)
001284  2100              MOVS     r1,#0
001286  e00e              B        |L1.4774|
                  |L1.4744|
;;;1730        {
;;;1731        if(bps[i]._cnt<5)Isumm+=bps[i]._Ii;
001288  ebc102c1          RSB      r2,r1,r1,LSL #3
00128c  eb020242          ADD      r2,r2,r2,LSL #1
001290  eb050282          ADD      r2,r5,r2,LSL #2
001294  78d7              LDRB     r7,[r2,#3]
001296  2f05              CMP      r7,#5
001298  d203              BCS      |L1.4770|
00129a  6a52              LDR      r2,[r2,#0x24]
00129c  881f              LDRH     r7,[r3,#0]  ; Isumm
00129e  443a              ADD      r2,r2,r7
0012a0  801a              STRH     r2,[r3,#0]
                  |L1.4770|
0012a2  1c49              ADDS     r1,r1,#1              ;1729
0012a4  b2c9              UXTB     r1,r1                 ;1729
                  |L1.4774|
0012a6  42a1              CMP      r1,r4                 ;1729
0012a8  dbee              BLT      |L1.4744|
;;;1732        }  
;;;1733        
;;;1734   load_I=load_I+Isumm;
0012aa  881a              LDRH     r2,[r3,#0]  ; Isumm
0012ac  1881              ADDS     r1,r0,r2
0012ae  b209              SXTH     r1,r1
0012b0  8031              STRH     r1,[r6,#0]
;;;1735   if(load_I<0)load_I=0;
0012b2  2900              CMP      r1,#0
0012b4  da00              BGE      |L1.4792|
0012b6  8030              STRH     r0,[r6,#0]
                  |L1.4792|
;;;1736   
;;;1737   #endif
;;;1738   
;;;1739   
;;;1740   
;;;1741   #ifdef UKU_GLONASS
;;;1742   inv[0]._Uio=6;
;;;1743   if (NUMINV)
;;;1744   	{
;;;1745   	for(i=0;i<NUMINV;i++)
;;;1746   		{
;;;1747   		if(bps[i+first_inv_slot]._cnt<25)
;;;1748        		{
;;;1749        		inv[i]._Ii=bps[i+first_inv_slot]._buff[0]+(bps[i+first_inv_slot]._buff[1]*256);
;;;1750        		inv[i]._Uin=bps[i+first_inv_slot]._buff[2]+(bps[i+first_inv_slot]._buff[3]*256);
;;;1751        		inv[i]._Uio=bps[i+first_inv_slot]._buff[4]+(bps[i+first_inv_slot]._buff[5]*256);
;;;1752        		inv[i]._Ti=(signed)(bps[i+first_inv_slot]._buff[6]);
;;;1753        		inv[i]._flags_tm=bps[i+first_inv_slot]._buff[8];
;;;1754   	    	//	inv[i]._rotor=bps[i+first_inv_slot]._buff[10]+(bps[i+first_inv_slot]._buff[11]*256);
;;;1755   			inv[i]._cnt=0;    
;;;1756        		} 
;;;1757   		else 
;;;1758        		{
;;;1759        		inv[i]._Uio=0; 
;;;1760        		inv[i]._Ii=0;
;;;1761        		inv[i]._Uin=0;
;;;1762        		inv[i]._Ti=0;
;;;1763        		inv[i]._flags_tm=0; 
;;;1764   //	     	inv[i]._rotor0;
;;;1765   			inv[i]._cnt=25;    
;;;1766        		}
;;;1767        	}
;;;1768      	}
;;;1769   #endif
;;;1770   
;;;1771   #ifndef UKU_GLONASS
;;;1772   if (NUMINV)
0012b8  492b              LDR      r1,|L1.4968|
0012ba  f9b14000          LDRSH    r4,[r1,#0]  ; NUMINV
0012be  2c00              CMP      r4,#0
0012c0  d07e              BEQ      |L1.5056|
;;;1773   	{
;;;1774   	for(i=0;i<NUMINV;i++)
0012c2  2300              MOVS     r3,#0
;;;1775   		{
;;;1776   		if(bps[i+20]._cnt<25)
;;;1777        		{
;;;1778        		inv[i]._Ii=bps[i+20]._buff[0]+(bps[i+20]._buff[1]*256);
0012c4  4e29              LDR      r6,|L1.4972|
0012c6  e0a6              B        |L1.5142|
                  |L1.4808|
0012c8  f1030114          ADD      r1,r3,#0x14           ;1776
0012cc  ebc101c1          RSB      r1,r1,r1,LSL #3       ;1776
0012d0  eb010141          ADD      r1,r1,r1,LSL #1       ;1776
0012d4  eb050181          ADD      r1,r5,r1,LSL #2       ;1776
0012d8  78ca              LDRB     r2,[r1,#3]            ;1776
0012da  2a19              CMP      r2,#0x19              ;1776
0012dc  d271              BCS      |L1.5058|
0012de  798a              LDRB     r2,[r1,#6]
0012e0  79cf              LDRB     r7,[r1,#7]
0012e2  eb022707          ADD      r7,r2,r7,LSL #8
0012e6  e043              B        |L1.4976|
                  |L1.4840|
                          DCD      ||.bss||+0x400
                  |L1.4844|
                          DCD      Ktbat
                  |L1.4848|
                          DCD      bat
                  |L1.4852|
                          DCD      Kuload
                  |L1.4856|
                          DCD      load_U
                  |L1.4860|
                          DCD      AUSW_MAIN
                  |L1.4864|
                          DCD      ND_EXT
                  |L1.4868|
                          DCD      Ktext
                  |L1.4872|
                          DCD      t_ext
                  |L1.4876|
                          DCD      bps
                  |L1.4880|
                          DCD      Ib_ips_termokompensat
                  |L1.4884|
                          DCD      ibat_metr_buff_
                  |L1.4888|
                          DCD      bIBAT_SMKLBR
                  |L1.4892|
                          DCD      Kibat1
                  |L1.4896|
                          DCD      adc_buff_ext_
                  |L1.4900|
                          DCD      Kunet_ext
                  |L1.4904|
                          DCD      Uvv
                  |L1.4908|
                          DCD      Uvv0
                  |L1.4912|
                          DCD      net_U
                  |L1.4916|
                          DCD      eb2_data_short
                  |L1.4920|
                          DCD      Kvv_eb2
                  |L1.4924|
                          DCD      Uvv_eb2
                  |L1.4928|
                          DCD      Kpes_eb2
                  |L1.4932|
                          DCD      Upes_eb2
                  |L1.4936|
                          DCD      ibt
                  |L1.4940|
                          DCD      t_box
                  |L1.4944|
                          DCD      t_ext_can_nd
                  |L1.4948|
                          DCD      t_ext_can
                  |L1.4952|
                          DCD      BAT_IS_ON
                  |L1.4956|
                          DCD      NUMIST
                  |L1.4960|
                          DCD      load_I
                  |L1.4964|
                          DCD      Isumm
                  |L1.4968|
                          DCD      NUMINV
                  |L1.4972|
                          DCD      inv
                  |L1.4976|
001370  eb030243          ADD      r2,r3,r3,LSL #1
001374  eb061242          ADD      r2,r6,r2,LSL #5
001378  61d7              STR      r7,[r2,#0x1c]
;;;1779        		inv[i]._Pio=bps[i+20]._buff[2]+(bps[i+20]._buff[3]*256);
00137a  7a0f              LDRB     r7,[r1,#8]
00137c  f891c009          LDRB     r12,[r1,#9]
001380  eb07270c          ADD      r7,r7,r12,LSL #8
001384  62d7              STR      r7,[r2,#0x2c]
;;;1780        		inv[i]._Uio=bps[i+20]._buff[4]+(bps[i+20]._buff[5]*256);
001386  7a8f              LDRB     r7,[r1,#0xa]
001388  f891c00b          LDRB     r12,[r1,#0xb]
00138c  eb07270c          ADD      r7,r7,r12,LSL #8
001390  6197              STR      r7,[r2,#0x18]
;;;1781        		inv[i]._Ti=(signed)(bps[i+20]._buff[6]);
001392  7b0f              LDRB     r7,[r1,#0xc]
001394  6217              STR      r7,[r2,#0x20]
;;;1782        		inv[i]._flags_tm=bps[i+20]._buff[7];
001396  7b4f              LDRB     r7,[r1,#0xd]
001398  f8827046          STRB     r7,[r2,#0x46]
;;;1783        		inv[i]._Uin=bps[i+20]._buff[8]+(bps[i+20]._buff[9]*256);
00139c  7b8f              LDRB     r7,[r1,#0xe]
00139e  f891c00f          LDRB     r12,[r1,#0xf]
0013a2  eb07270c          ADD      r7,r7,r12,LSL #8
0013a6  6297              STR      r7,[r2,#0x28]
;;;1784        		inv[i]._Uil=bps[i+20]._buff[10]+(bps[i+20]._buff[11]*256);
0013a8  7c0f              LDRB     r7,[r1,#0x10]
0013aa  f891c011          LDRB     r12,[r1,#0x11]
0013ae  eb07270c          ADD      r7,r7,r12,LSL #8
0013b2  6257              STR      r7,[r2,#0x24]
;;;1785   			inv[i]._cnt=0;
0013b4  7090              STRB     r0,[r2,#2]
;;;1786   			inv[i]._Uoutmin=bps[i+20]._buff[12]; 
0013b6  7c8f              LDRB     r7,[r1,#0x12]
0013b8  f8827059          STRB     r7,[r2,#0x59]
;;;1787   			inv[i]._Uoutmax=bps[i+20]._buff[13]; 
0013bc  7ccf              LDRB     r7,[r1,#0x13]
0013be  e001              B        |L1.5060|
                  |L1.5056|
0013c0  e02c              B        |L1.5148|
                  |L1.5058|
0013c2  e00e              B        |L1.5090|
                  |L1.5060|
0013c4  f882705a          STRB     r7,[r2,#0x5a]
;;;1788   			inv[i]._Pnom=bps[i+20]._buff[14]; 
0013c8  7d0f              LDRB     r7,[r1,#0x14]
0013ca  f8827058          STRB     r7,[r2,#0x58]
;;;1789   			inv[i]._net_contr_en=bps[i+20]._buff[15];
0013ce  7d4f              LDRB     r7,[r1,#0x15]
0013d0  f882705b          STRB     r7,[r2,#0x5b]
;;;1790   			inv[i]._pwm_en=bps[i+20]._buff[16];  
0013d4  7d8f              LDRB     r7,[r1,#0x16]
0013d6  f882705c          STRB     r7,[r2,#0x5c]
;;;1791   			inv[i]._phase_mode=bps[i+20]._buff[17];  
0013da  7dc9              LDRB     r1,[r1,#0x17]
0013dc  f882105d          STRB     r1,[r2,#0x5d]
0013e0  e017              B        |L1.5138|
                  |L1.5090|
;;;1792        		} 
;;;1793   		else 
;;;1794        		{
;;;1795         		inv[i]._Ii=0;
0013e2  eb030143          ADD      r1,r3,r3,LSL #1
0013e6  eb061141          ADD      r1,r6,r1,LSL #5
0013ea  61c8              STR      r0,[r1,#0x1c]
;;;1796   			inv[i]._Pio=0;
0013ec  62c8              STR      r0,[r1,#0x2c]
;;;1797   			inv[i]._Uio=0;
0013ee  6188              STR      r0,[r1,#0x18]
;;;1798        		inv[i]._Ti=0;
0013f0  6208              STR      r0,[r1,#0x20]
;;;1799        		inv[i]._flags_tm=0; 
0013f2  f8810046          STRB     r0,[r1,#0x46]
;;;1800        		inv[i]._Uil=0;
0013f6  6248              STR      r0,[r1,#0x24]
;;;1801        		inv[i]._Uin=0;
0013f8  6288              STR      r0,[r1,#0x28]
;;;1802   			inv[i]._cnt=25; 
0013fa  2219              MOVS     r2,#0x19
0013fc  708a              STRB     r2,[r1,#2]
;;;1803   			inv[i]._Uoutmin=0; 
0013fe  f8810059          STRB     r0,[r1,#0x59]
;;;1804   			inv[i]._Uoutmax=0; 
001402  f881005a          STRB     r0,[r1,#0x5a]
;;;1805   			inv[i]._Pnom=0; 
001406  f8810058          STRB     r0,[r1,#0x58]
;;;1806   			inv[i]._net_contr_en=0;
00140a  f881005b          STRB     r0,[r1,#0x5b]
;;;1807   			inv[i]._pwm_en=0;   
00140e  f881005c          STRB     r0,[r1,#0x5c]
                  |L1.5138|
001412  1c5b              ADDS     r3,r3,#1              ;1774
001414  b2db              UXTB     r3,r3                 ;1774
                  |L1.5142|
001416  42a3              CMP      r3,r4                 ;1774
001418  f6ffaf56          BLT      |L1.4808|
                  |L1.5148|
;;;1808   			   
;;;1809        		}
;;;1810        	}
;;;1811      	}
;;;1812   #endif
;;;1813   
;;;1814   #ifdef GLADKOV
;;;1815   inv[0]._Ii=bps[4]._buff[0]+(bps[4]._buff[1]*256);
;;;1816   inv[0]._Pio=bps[4]._buff[2]+(bps[4]._buff[3]*256);
;;;1817   inv[0]._Uio=bps[4]._buff[4]+(bps[4]._buff[5]*256);
;;;1818   inv[0]._Ti=(signed)(bps[4]._buff[6]);
;;;1819   inv[0]._flags_tm=bps[4]._buff[7];
;;;1820   inv[0]._Uin=bps[4]._buff[8]+(bps[4]._buff[9]*256);
;;;1821   inv[0]._Uil=bps[4]._buff[10]+(bps[4]._buff[11]*256);
;;;1822   inv[0]._cnt=0;    
;;;1823   
;;;1824   inv[1]._Ii=bps[21]._buff[0]+(bps[21]._buff[1]*256);
;;;1825   inv[1]._Pio=bps[21]._buff[2]+(bps[21]._buff[3]*256);
;;;1826   inv[1]._Uio=bps[21]._buff[4]+(bps[21]._buff[5]*256);
;;;1827   inv[1]._Ti=(signed)(bps[21]._buff[6]);
;;;1828   inv[1]._flags_tm=bps[21]._buff[7];
;;;1829   inv[1]._Uin=bps[21]._buff[8]+(bps[21]._buff[9]*256);
;;;1830   inv[1]._Uil=bps[21]._buff[10]+(bps[21]._buff[11]*256);
;;;1831   inv[1]._cnt=0;    
;;;1832   #endif
;;;1833   
;;;1834   /*
;;;1835   if((BAT_IS_ON[0]==bisON)&&(BAT_TYPE==1))
;;;1836   	{
;;;1837   	lakb[0]._battCommState=0;
;;;1838   	if(lakb[0]._cnt>10)lakb[0]._battCommState=2;
;;;1839   	else if(lakb[0]._bRS485ERR==1)lakb[0]._battCommState=1;
;;;1840   	
;;;1841   	if(lakb[0]._battCommState==0)
;;;1842   		{	
;;;1843   		bat[0]._Ub=(signed short)((lakb[0]._tot_bat_volt+5)/10);
;;;1844   		bat[0]._Ib=(signed short)lakb[0]._ch_curr;
;;;1845   		if(lakb[0]._dsch_curr) bat[0]._Ib=(signed short) (-lakb[0]._dsch_curr);
;;;1846   		bat[0]._Tb=(signed short)lakb[0]._max_cell_temp;
;;;1847   		}
;;;1848   	}
;;;1849   */
;;;1850   
;;;1851   #ifdef UKU_TELECORE2015
;;;1852   
;;;1853   	lakb[0]._ch_curr/*temp_SS*/=((ascii2halFhex(sacredSunBatteryInBuff[113]))<<12)+
;;;1854   						((ascii2halFhex(sacredSunBatteryInBuff[114]))<<8)+
;;;1855   						((ascii2halFhex(sacredSunBatteryInBuff[115]))<<4)+
;;;1856   						((ascii2halFhex(sacredSunBatteryInBuff[116])));
;;;1857   	
;;;1858   	/*if(temp_SS&0x8000)		lakb[0]._ch_curr=~temp_SS;
;;;1859   	else 				lakb[0]._ch_curr=temp_SS;*/
;;;1860   
;;;1861   	lakb[0]._tot_bat_volt=	(unsigned short)(((ascii2halFhex(sacredSunBatteryInBuff[117]))<<12)+
;;;1862   						((ascii2halFhex(sacredSunBatteryInBuff[118]))<<8)+
;;;1863   						((ascii2halFhex(sacredSunBatteryInBuff[119]))<<4)+
;;;1864   						((ascii2halFhex(sacredSunBatteryInBuff[120]))))/100;
;;;1865   
;;;1866   	lakb[0]._max_cell_temp= 	(((ascii2halFhex(sacredSunBatteryInBuff[93]))<<12)+
;;;1867   						((ascii2halFhex(sacredSunBatteryInBuff[94]))<<8)+
;;;1868   						((ascii2halFhex(sacredSunBatteryInBuff[95]))<<4)+
;;;1869   						((ascii2halFhex(sacredSunBatteryInBuff[96]))))/10-273;
;;;1870   
;;;1871   	lakb[0]._s_o_c_abs=		(unsigned short)((ascii2halFhex(sacredSunBatteryInBuff[121]))<<12)+
;;;1872   						((ascii2halFhex(sacredSunBatteryInBuff[122]))<<8)+
;;;1873   						((ascii2halFhex(sacredSunBatteryInBuff[123]))<<4)+
;;;1874   						((ascii2halFhex(sacredSunBatteryInBuff[124])));
;;;1875   
;;;1876   	lakb[0]._rat_cap=		(unsigned short)((ascii2halFhex(sacredSunBatteryInBuff[127]))<<12)+
;;;1877   						((ascii2halFhex(sacredSunBatteryInBuff[128]))<<8)+
;;;1878   						((ascii2halFhex(sacredSunBatteryInBuff[129]))<<4)+
;;;1879   						((ascii2halFhex(sacredSunBatteryInBuff[130])));
;;;1880   
;;;1881   	lakb[0]._s_o_c=		lakb[0]._s_o_c_abs/(lakb[0]._rat_cap/100);
;;;1882   
;;;1883   
;;;1884   /*	lakb[0]._rat_cap= (lakb_damp[i][13]*256)+ lakb_damp[i][14];
;;;1885   	lakb[0]._max_cell_volt= (lakb_damp[i][0]*256)+ lakb_damp[i][1];
;;;1886   	lakb[0]._min_cell_volt= (lakb_damp[i][2]*256)+ lakb_damp[i][3];
;;;1887   	lakb[0]._max_cell_temp= lakb_damp[i][4];
;;;1888   	lakb[0]._min_cell_temp= lakb_damp[i][5];
;;;1889   	lakb[0]._tot_bat_volt= (lakb_damp[i][6]*256)+ lakb_damp[i][7];
;;;1890   	lakb[0]._ch_curr= (lakb_damp[i][8]*256)+ lakb_damp[i][8];
;;;1891   	lakb[0]._dsch_curr= (lakb_damp[i][10]*256)+ lakb_damp[i][11];
;;;1892   	lakb[0]._s_o_c= lakb_damp[i][12];
;;;1893   	lakb[0]._r_b_t= lakb_damp[i][15];
;;;1894   	lakb[0]._c_c_l_v= (lakb_damp[i][16]*256)+ lakb_damp[i][17];
;;;1895   	lakb[0]._s_o_h= lakb_damp[i][18];
;;;1896   
;;;1897   	if(lakb[i]._rat_cap==0)
;;;1898   		{
;;;1899   		if(lakb[i]._isOnCnt)
;;;1900   			{
;;;1901   			lakb[i]._isOnCnt--;
;;;1902   			if(lakb[i]._isOnCnt==0)
;;;1903   				{
;;;1904   				if(lakb[i]._battIsOn!=0) bLAKB_KONF_CH=1;
;;;1905   				}
;;;1906   			}
;;;1907   		}
;;;1908   	else 
;;;1909   		{
;;;1910   		if(lakb[i]._isOnCnt<50)
;;;1911   			{
;;;1912   			lakb[i]._isOnCnt++;
;;;1913   			if(lakb[i]._isOnCnt==50)
;;;1914   				{
;;;1915   				if(lakb[i]._battIsOn!=1) bLAKB_KONF_CH=1;
;;;1916   				}
;;;1917   			}
;;;1918   		}
;;;1919   	gran(&lakb[i]._isOnCnt,0,50);*/
;;;1920   
;;;1921   	
;;;1922   if(sacredSunSilentCnt<3) 
;;;1923   	{
;;;1924       	bat[0]._Ub=lakb[0]._tot_bat_volt;
;;;1925       	bat[0]._Tb=lakb[0]._max_cell_temp;
;;;1926      	bat[0]._Ib=lakb[0]._ch_curr/10;
;;;1927   	}
;;;1928   else 
;;;1929   	{
;;;1930       	//bat[0]._Ub=0;
;;;1931       	//bat[0]._Tb=0;
;;;1932      	//bat[0]._Ib=0;
;;;1933   	}
;;;1934   
;;;1935   if(BAT_TYPE==1)
;;;1936   	{
;;;1937   	char i;
;;;1938   	for(i=0;i<1;i++)
;;;1939   		{
;;;1940   		lakb[i]._rat_cap= (lakb_damp[i][13]*256)+ lakb_damp[i][14];
;;;1941   		lakb[i]._max_cell_volt= (lakb_damp[i][0]*256)+ lakb_damp[i][1];
;;;1942   		lakb[i]._min_cell_volt= (lakb_damp[i][2]*256)+ lakb_damp[i][3];
;;;1943   		lakb[i]._max_cell_temp= lakb_damp[i][4];
;;;1944   		lakb[i]._min_cell_temp= lakb_damp[i][5];
;;;1945   		lakb[i]._tot_bat_volt= (lakb_damp[i][6]*256)+ lakb_damp[i][7];
;;;1946   		lakb[i]._ch_curr= (lakb_damp[i][8]*256)+ lakb_damp[i][9];
;;;1947   		lakb[i]._dsch_curr= (lakb_damp[i][10]*256)+ lakb_damp[i][11];
;;;1948   		lakb[i]._s_o_c= lakb_damp[i][12];
;;;1949   		lakb[i]._r_b_t= lakb_damp[i][15];
;;;1950   		lakb[i]._c_c_l_v= (lakb_damp[i][16]*256)+ lakb_damp[i][17];
;;;1951   		lakb[i]._s_o_h= lakb_damp[i][18];
;;;1952   		lakb[i]._flags1= lakb_damp[i][34];
;;;1953   		lakb[i]._flags2= lakb_damp[i][35];
;;;1954   		lakb[i]._b_p_ser_num= lakb_damp[i][36];
;;;1955   
;;;1956   /*		if(lakb[i]._rat_cap==0)
;;;1957   			{
;;;1958   			if(lakb[i]._isOnCnt)
;;;1959   				{
;;;1960   				lakb[i]._isOnCnt--;
;;;1961   				if(lakb[i]._isOnCnt==0)
;;;1962   					{
;;;1963   					if(lakb[i]._battIsOn!=0) bLAKB_KONF_CH=1;
;;;1964   					}
;;;1965   				}
;;;1966   			}
;;;1967   		else 
;;;1968   			{
;;;1969   			if(lakb[i]._isOnCnt<50)
;;;1970   				{
;;;1971   				lakb[i]._isOnCnt++;
;;;1972   				if(lakb[i]._isOnCnt==50)
;;;1973   					{
;;;1974   					if(lakb[i]._battIsOn!=1) bLAKB_KONF_CH=1;
;;;1975   					}
;;;1976   				}
;;;1977   			} */
;;;1978   		gran(&lakb[i]._isOnCnt,0,50);
;;;1979   	 	}
;;;1980   
;;;1981   	if(lakb_damp[0][41]==100)
;;;1982   		{
;;;1983   		li_bat._485Error=1;
;;;1984   		}
;;;1985   	if(lakb_damp[0][41]==0)
;;;1986   		{
;;;1987   		//if(bRS485ERR)bLAKB_KONF_CH=1;
;;;1988   		li_bat._485Error=0;
;;;1989   		}
;;;1990   	li_bat._485ErrorCnt=lakb_damp[0][41];
;;;1991   
;;;1992   
;;;1993   	}
;;;1994   
;;;1995   
;;;1996   #endif
;;;1997   
;;;1998   
;;;1999   #ifdef UKU_TELECORE2015
;;;2000   //   
;;;2001   //TODO          
;;;2002   li_bat._batStat=bsOK;
;;;2003   if(BAT_TYPE==1) //COSLIGHT
;;;2004   	{
;;;2005   	if(li_bat._batStat==bsOK)
;;;2006   		{
;;;2007   		li_bat._Ub=lakb[0]._tot_bat_volt/10;
;;;2008   
;;;2009   		if(lakb[0]._ch_curr)li_bat._Ib=lakb[0]._ch_curr/10;
;;;2010   		else if(lakb[0]._dsch_curr) li_bat._Ib=bat[0]._Ib/10;//lakb[0]._dsch_curr/10;
;;;2011   	
;;;2012   		li_bat._ratCap=lakb[0]._rat_cap/100;
;;;2013   		li_bat._soc=lakb[0]._s_o_c;
;;;2014   		li_bat._soh=lakb[0]._s_o_h;
;;;2015   		li_bat._cclv=lakb[0]._c_c_l_v/10;
;;;2016   		li_bat._Tb=lakb[0]._max_cell_temp;
;;;2017   		li_bat._rbt=lakb[0]._r_b_t;
;;;2018   		}
;;;2019   	else 
;;;2020   		{
;;;2021   		li_bat._Ub=bat[0]._Ub;
;;;2022   		li_bat._Ib=bat[0]._Ib/10;
;;;2023   		li_bat._Tb=bat[0]._Tb;
;;;2024   		}
;;;2025   
;;;2026   	if((li_bat._485Error)||(li_bat._canError))
;;;2027   		{
;;;2028   		li_bat._batStat=bsOFF;
;;;2029   		}
;;;2030   	else li_bat._batStat=bsOK;
;;;2031   	}
;;;2032   #endif
;;;2033   
;;;2034   
;;;2035   /*
;;;2036   if((BAT_IS_ON[0]==bisON)&&(BAT_TYPE[0]==1)&&(BAT_LINK==0))
;;;2037   	{
;;;2038   
;;;2039   
;;;2040   	if(bat_drv_rx_buff[13]<=0x39)bbb[0]=bat_drv_rx_buff[13]-0x30;
;;;2041   	else bbb[0]=bat_drv_rx_buff[13]-55;
;;;2042   	if(bat_drv_rx_buff[14]<=0x39)bbb[1]=bat_drv_rx_buff[14]-0x30;
;;;2043   	else bbb[1]=bat_drv_rx_buff[14]-55;
;;;2044   	if(bat_drv_rx_buff[15]<=0x39)bbb[2]=bat_drv_rx_buff[15]-0x30;
;;;2045   	else bbb[2]=bat_drv_rx_buff[15]-55;
;;;2046   	if(bat_drv_rx_buff[16]<=0x39)bbb[3]=bat_drv_rx_buff[16]-0x30;
;;;2047   	else bbb[3]=bat_drv_rx_buff[16]-55;
;;;2048   
;;;2049   	tempSS=0;
;;;2050   	tempSS=((bbb[0]*4096)+(bbb[1]*256)+(bbb[2]*16)+bbb[3]);
;;;2051   
;;;2052   	bat[0]._max_cell_volt=(tempSS+5)/10;
;;;2053   
;;;2054   	if(bat_drv_rx_buff[17]<=0x39)bbb[0]=bat_drv_rx_buff[17]-0x30;
;;;2055   	else bbb[0]=bat_drv_rx_buff[17]-55;
;;;2056   	if(bat_drv_rx_buff[18]<=0x39)bbb[1]=bat_drv_rx_buff[18]-0x30;
;;;2057   	else bbb[1]=bat_drv_rx_buff[18]-55;
;;;2058   	if(bat_drv_rx_buff[19]<=0x39)bbb[2]=bat_drv_rx_buff[19]-0x30;
;;;2059   	else bbb[2]=bat_drv_rx_buff[19]-55;
;;;2060   	if(bat_drv_rx_buff[20]<=0x39)bbb[3]=bat_drv_rx_buff[20]-0x30;
;;;2061   	else bbb[3]=bat_drv_rx_buff[20]-55;
;;;2062   
;;;2063   	tempSS=0;
;;;2064   	tempSS=((bbb[0]*4096)+(bbb[1]*256)+(bbb[2]*16)+bbb[3]);
;;;2065   
;;;2066   	bat[0]._min_cell_volt=(tempSS+5)/10;
;;;2067   
;;;2068   
;;;2069   	}*/
;;;2070   
;;;2071   
;;;2072   
;;;2073   }
00141c  e8bd9ffc          POP      {r2-r12,pc}
;;;2074   
                          ENDP

                  mnemo_hndl PROC
;;;2075   //-----------------------------------------------
;;;2076   void mnemo_hndl(void)
001420  4aff              LDR      r2,|L1.6176|
;;;2077   {
;;;2078   if(((ind==iMn_220)||(ind==iMn))&&(sub_ind==0)&&(MNEMO_ON==mnON))
001422  7810              LDRB     r0,[r2,#0]  ; a_ind
;;;2079   	{
;;;2080   	if(mnemo_cnt)mnemo_cnt--;
001424  49ff              LDR      r1,|L1.6180|
001426  2804              CMP      r0,#4                 ;2078
001428  d001              BEQ      |L1.5166|
00142a  2801              CMP      r0,#1                 ;2078
00142c  d10b              BNE      |L1.5190|
                  |L1.5166|
00142e  7850              LDRB     r0,[r2,#1]            ;2078  ; a_ind
001430  b948              CBNZ     r0,|L1.5190|
001432  48fd              LDR      r0,|L1.6184|
001434  7800              LDRB     r0,[r0,#0]            ;2078  ; MNEMO_ON
001436  2855              CMP      r0,#0x55              ;2078
001438  d105              BNE      |L1.5190|
00143a  7808              LDRB     r0,[r1,#0]  ; mnemo_cnt
00143c  2800              CMP      r0,#0
00143e  d001              BEQ      |L1.5188|
001440  1e40              SUBS     r0,r0,#1
001442  7008              STRB     r0,[r1,#0]
                  |L1.5188|
;;;2081   	}
;;;2082   else mnemo_cnt=MNEMO_TIME;
;;;2083   }
001444  4770              BX       lr
                  |L1.5190|
001446  48f9              LDR      r0,|L1.6188|
001448  8800              LDRH     r0,[r0,#0]            ;2082  ; MNEMO_TIME
00144a  7008              STRB     r0,[r1,#0]            ;2082
00144c  4770              BX       lr
;;;2084   
                          ENDP

                  adc_init PROC
;;;2085   //-----------------------------------------------
;;;2086   void adc_init(void)
00144e  48f8              LDR      r0,|L1.6192|
;;;2087   {
;;;2088   
;;;2089   SET_REG(LPC_PINCON->PINSEL1,1,(25-16)*2,2);
001450  6841              LDR      r1,[r0,#4]
001452  f4212140          BIC      r1,r1,#0xc0000
001456  f4412180          ORR      r1,r1,#0x40000
00145a  6041              STR      r1,[r0,#4]
;;;2090   SET_REG(LPC_PINCON->PINSEL1,1,(24-16)*2,2);
00145c  6841              LDR      r1,[r0,#4]
00145e  f4213140          BIC      r1,r1,#0x30000
001462  f4413180          ORR      r1,r1,#0x10000
001466  6041              STR      r1,[r0,#4]
;;;2091   SET_REG(LPC_PINCON->PINSEL1,1,(23-16)*2,2);
001468  6841              LDR      r1,[r0,#4]
00146a  f4214140          BIC      r1,r1,#0xc000
00146e  f4414180          ORR      r1,r1,#0x4000
001472  6041              STR      r1,[r0,#4]
;;;2092   
;;;2093   
;;;2094   SET_REG(LPC_PINCON->PINMODE1,2,(25-16)*2,2);
001474  6c41              LDR      r1,[r0,#0x44]
001476  f4212140          BIC      r1,r1,#0xc0000
00147a  f4412100          ORR      r1,r1,#0x80000
00147e  6441              STR      r1,[r0,#0x44]
;;;2095   SET_REG(LPC_PINCON->PINMODE1,2,(24-16)*2,2);
001480  6c41              LDR      r1,[r0,#0x44]
001482  f4213140          BIC      r1,r1,#0x30000
001486  f4413100          ORR      r1,r1,#0x20000
00148a  6441              STR      r1,[r0,#0x44]
;;;2096   SET_REG(LPC_PINCON->PINMODE1,2,(23-16)*2,2);
00148c  6c41              LDR      r1,[r0,#0x44]
00148e  f4214140          BIC      r1,r1,#0xc000
001492  f4414100          ORR      r1,r1,#0x8000
001496  6441              STR      r1,[r0,#0x44]
;;;2097   
;;;2098   SET_REG(LPC_ADC->ADCR,0,24,3);
001498  48e6              LDR      r0,|L1.6196|
00149a  6801              LDR      r1,[r0,#0]
00149c  f02161e0          BIC      r1,r1,#0x7000000
0014a0  6001              STR      r1,[r0,#0]
;;;2099   
;;;2100   SET_REG(LPC_ADC->ADCR,1,21,1);
0014a2  6801              LDR      r1,[r0,#0]
0014a4  f4411100          ORR      r1,r1,#0x200000
0014a8  6001              STR      r1,[r0,#0]
;;;2101   SET_REG(LPC_ADC->ADCR,0,16,1);
0014aa  6801              LDR      r1,[r0,#0]
0014ac  f4213180          BIC      r1,r1,#0x10000
0014b0  6001              STR      r1,[r0,#0]
;;;2102   SET_REG(LPC_ADC->ADCR,1,8,8);
0014b2  6801              LDR      r1,[r0,#0]
0014b4  f421417f          BIC      r1,r1,#0xff00
0014b8  f4417180          ORR      r1,r1,#0x100
0014bc  6001              STR      r1,[r0,#0]
;;;2103   
;;;2104   //SET_REG(LPC_GPIO0->FIODIR,7,5,3);
;;;2105   //SET_REG(LPC_GPIO0->FIOPIN,4,5,3);
;;;2106   	
;;;2107   	/*if(adc_ch<=7)*///SET_REG(LPC_ADC->ADCR,1<<5,0,8);
;;;2108        /*else if(adc_ch==8) SET_REG(LPC_ADC->ADCR,1<<2,0,8);
;;;2109        else SET_REG(LPC_ADC->ADCR,1<<4,0,8);*/
;;;2110   
;;;2111   LPC_ADC->ADINTEN     =  (1<< 8);      /* global enable interrupt            */
0014be  1581              ASRS     r1,r0,#22
0014c0  60c1              STR      r1,[r0,#0xc]
0014c2  0388              LSLS     r0,r1,#14
0014c4  49dc              LDR      r1,|L1.6200|
0014c6  6008              STR      r0,[r1,#0]
;;;2112   
;;;2113   NVIC_EnableIRQ(ADC_IRQn);             /* enable ADC Interrupt               */
;;;2114   
;;;2115   
;;;2116   }
0014c8  4770              BX       lr
;;;2117   
                          ENDP

                  adc_drv7 PROC
;;;2118   //-----------------------------------------------
;;;2119   void adc_drv7(void) //(U - )
0014ca  e92d41f0          PUSH     {r4-r8,lr}
;;;2120   {
;;;2121   //int temp_S;
;;;2122   //char i;
;;;2123   //signed short temp_SS;
;;;2124   
;;;2125   adc_self_ch_disp[0]=abs_pal(adc_self_ch_buff[1]-adc_self_ch_buff[0]);//adc_self_ch_buff[0]&0x0f80;
0014ce  4cdb              LDR      r4,|L1.6204|
0014d0  8860              LDRH     r0,[r4,#2]  ; adc_self_ch_buff
0014d2  8821              LDRH     r1,[r4,#0]  ; adc_self_ch_buff
0014d4  1a40              SUBS     r0,r0,r1
0014d6  b200              SXTH     r0,r0
0014d8  f7fffffe          BL       abs_pal
0014dc  1da5              ADDS     r5,r4,#6
0014de  8028              STRH     r0,[r5,#0]
;;;2126   adc_self_ch_disp[1]=abs_pal(adc_self_ch_buff[2]-adc_self_ch_buff[1]);//adc_self_ch_buff[1]&0x0f80;
0014e0  88a0              LDRH     r0,[r4,#4]  ; adc_self_ch_buff
0014e2  8861              LDRH     r1,[r4,#2]  ; adc_self_ch_buff
0014e4  1a40              SUBS     r0,r0,r1
0014e6  b200              SXTH     r0,r0
0014e8  f7fffffe          BL       abs_pal
0014ec  8068              STRH     r0,[r5,#2]
;;;2127   adc_self_ch_disp[2]=abs_pal(adc_self_ch_buff[2]-adc_self_ch_buff[0]);//adc_self_ch_buff[2]&0x0f80;
0014ee  88a0              LDRH     r0,[r4,#4]  ; adc_self_ch_buff
0014f0  8821              LDRH     r1,[r4,#0]  ; adc_self_ch_buff
0014f2  1a40              SUBS     r0,r0,r1
0014f4  b200              SXTH     r0,r0
0014f6  f7fffffe          BL       abs_pal
0014fa  80a8              STRH     r0,[r5,#4]
;;;2128   
;;;2129   //adc_self_ch_disp[0]=adc_self_ch_buff[0]&0x0ff0;
;;;2130   //adc_self_ch_disp[1]=adc_self_ch_buff[1]&0x0ff0;
;;;2131   //adc_self_ch_disp[2]=adc_self_ch_buff[2]&0x0ff0;
;;;2132   
;;;2133   
;;;2134   if(adc_self_ch_disp[2]<300)//==adc_self_ch_disp[2])
0014fc  f44f7196          MOV      r1,#0x12c
;;;2135   	{
;;;2136   	adc_result=adc_self_ch_buff[2];
001500  f1a4038e          SUB      r3,r4,#0x8e
001504  4288              CMP      r0,r1                 ;2134
001506  da02              BGE      |L1.5390|
001508  88a0              LDRH     r0,[r4,#4]  ; adc_self_ch_buff
00150a  8518              STRH     r0,[r3,#0x28]
00150c  e00c              B        |L1.5416|
                  |L1.5390|
;;;2137   	} 
;;;2138   else if(adc_self_ch_disp[1]<300)//==adc_self_ch_disp[2])
00150e  f9b50002          LDRSH    r0,[r5,#2]  ; adc_self_ch_disp
001512  4288              CMP      r0,r1
001514  da02              BGE      |L1.5404|
;;;2139   	{
;;;2140   	adc_result=adc_self_ch_buff[1];
001516  8860              LDRH     r0,[r4,#2]  ; adc_self_ch_buff
001518  8518              STRH     r0,[r3,#0x28]
00151a  e005              B        |L1.5416|
                  |L1.5404|
;;;2141   	}
;;;2142   else if(adc_self_ch_disp[0]<300)//==adc_self_ch_disp[1])
00151c  f9b50000          LDRSH    r0,[r5,#0]  ; adc_self_ch_disp
001520  4288              CMP      r0,r1
001522  da01              BGE      |L1.5416|
;;;2143   	{
;;;2144   	adc_result=adc_self_ch_buff[0];
001524  8820              LDRH     r0,[r4,#0]  ; adc_self_ch_buff
001526  8518              STRH     r0,[r3,#0x28]
                  |L1.5416|
;;;2145   	}
;;;2146       //adc_result=92;
;;;2147   
;;;2148   if(adc_ch_net)
001528  789d              LDRB     r5,[r3,#2]  ; adc_ch_net
00152a  2400              MOVS     r4,#0
00152c  b315              CBZ      r5,|L1.5492|
;;;2149   	{
;;;2150   
;;;2151   	main_power_buffer[0]+=(long)(adc_result);
00152e  48c4              LDR      r0,|L1.6208|
001530  f9b31028          LDRSH    r1,[r3,#0x28]  ; adc_result
001534  6802              LDR      r2,[r0,#0]  ; main_power_buffer
001536  440a              ADD      r2,r2,r1
001538  6002              STR      r2,[r0,#0]  ; main_power_buffer
;;;2152   	main_power_buffer[1]+=(long)(adc_result);
00153a  6842              LDR      r2,[r0,#4]  ; main_power_buffer
00153c  440a              ADD      r2,r2,r1
00153e  6042              STR      r2,[r0,#4]  ; main_power_buffer
;;;2153   	main_power_buffer[2]+=(long)(adc_result);
001540  6882              LDR      r2,[r0,#8]  ; main_power_buffer
001542  440a              ADD      r2,r2,r1
001544  6082              STR      r2,[r0,#8]  ; main_power_buffer
;;;2154   	main_power_buffer[3]+=(long)(adc_result);
001546  68c2              LDR      r2,[r0,#0xc]  ; main_power_buffer
001548  4411              ADD      r1,r1,r2
00154a  60c1              STR      r1,[r0,#0xc]  ; main_power_buffer
;;;2155   
;;;2156   	adc_net_buff_cnt++;
00154c  8e19              LDRH     r1,[r3,#0x30]  ; adc_net_buff_cnt
00154e  1c49              ADDS     r1,r1,#1
001550  b209              SXTH     r1,r1
001552  8619              STRH     r1,[r3,#0x30]
;;;2157   	if(adc_net_buff_cnt>=0x1000)
001554  f5b15f80          CMP      r1,#0x1000
001558  db00              BLT      |L1.5468|
;;;2158   		{
;;;2159   		adc_net_buff_cnt=0;
00155a  861c              STRH     r4,[r3,#0x30]
                  |L1.5468|
;;;2160   		}
;;;2161   	if((adc_net_buff_cnt&0x03ff)==0)
00155c  f9b31030          LDRSH    r1,[r3,#0x30]  ; adc_net_buff_cnt
001560  058a              LSLS     r2,r1,#22
001562  d12b              BNE      |L1.5564|
;;;2162   		{
;;;2163   		#ifdef UKU_220
;;;2164   		net_buff_=(short)((main_power_buffer[adc_net_buff_cnt>>10])>>11);
;;;2165   		#else
;;;2166   		#ifdef UKU_220_V2
;;;2167   		net_buff_=(short)((main_power_buffer[adc_net_buff_cnt>>10])>>11);
;;;2168   		#else
;;;2169   		net_buff_=(short)((main_power_buffer[adc_net_buff_cnt>>10])>>8);
001564  1289              ASRS     r1,r1,#10
001566  f8502021          LDR      r2,[r0,r1,LSL #2]
00156a  1212              ASRS     r2,r2,#8
00156c  84da              STRH     r2,[r3,#0x26]
;;;2170   		#endif
;;;2171   		#endif
;;;2172   		main_power_buffer[adc_net_buff_cnt>>10]=0;
00156e  f8404021          STR      r4,[r0,r1,LSL #2]
001572  e023              B        |L1.5564|
                  |L1.5492|
;;;2173   		}
;;;2174   
;;;2175   
;;;2176   	} 
;;;2177   else if(!adc_ch_net)
;;;2178   	{
;;;2179   	adc_buff[adc_ch][adc_ch_cnt]=(long)adc_result;
001574  49b3              LDR      r1,|L1.6212|
001576  78de              LDRB     r6,[r3,#3]  ; adc_ch
001578  791f              LDRB     r7,[r3,#4]  ; adc_ch_cnt
00157a  f9b30028          LDRSH    r0,[r3,#0x28]  ; adc_result
00157e  eb011286          ADD      r2,r1,r6,LSL #6
001582  f8420027          STR      r0,[r2,r7,LSL #2]
;;;2180   	
;;;2181   	if((adc_ch_cnt&0x03)==0)
001586  07b8              LSLS     r0,r7,#30
001588  d10c              BNE      |L1.5540|
;;;2182   		{
;;;2183   		long temp_L;
;;;2184   		char i;
;;;2185   		temp_L=0;
00158a  2100              MOVS     r1,#0
                  |L1.5516|
;;;2186   		for(i=0;i<16;i++)
;;;2187   			{
;;;2188   			temp_L+=adc_buff[adc_ch][i];
00158c  f852c020          LDR      r12,[r2,r0,LSL #2]
001590  4461              ADD      r1,r1,r12
001592  1c40              ADDS     r0,r0,#1              ;2186
001594  b2c0              UXTB     r0,r0                 ;2186
001596  2810              CMP      r0,#0x10              ;2186
001598  d3f8              BCC      |L1.5516|
;;;2189   			}
;;;2190   		adc_buff_[adc_ch]= (short)(temp_L>>4);
00159a  1108              ASRS     r0,r1,#4
00159c  49a8              LDR      r1,|L1.6208|
00159e  3920              SUBS     r1,r1,#0x20
0015a0  f8210016          STRH     r0,[r1,r6,LSL #1]
                  |L1.5540|
;;;2191   
;;;2192   		//adc_buff_[3]=346;
;;;2193   		}
;;;2194   	if(++adc_ch>=16) 
0015a4  1c76              ADDS     r6,r6,#1
0015a6  b2f0              UXTB     r0,r6
0015a8  70d8              STRB     r0,[r3,#3]
0015aa  2810              CMP      r0,#0x10
0015ac  d306              BCC      |L1.5564|
;;;2195   		{
;;;2196   		adc_ch=0;
0015ae  70dc              STRB     r4,[r3,#3]
;;;2197   		adc_ch_cnt++;
0015b0  1c7f              ADDS     r7,r7,#1
0015b2  b2f8              UXTB     r0,r7
0015b4  7118              STRB     r0,[r3,#4]
;;;2198   		if(adc_ch_cnt>=16)adc_ch_cnt=0;
0015b6  2810              CMP      r0,#0x10
0015b8  d300              BCC      |L1.5564|
0015ba  711c              STRB     r4,[r3,#4]
                  |L1.5564|
;;;2199   		}
;;;2200   	}
;;;2201   
;;;2202   //adc_buff[adc_ch][adc_cnt1]=(adc_self_ch_buff[2]+adc_self_ch_buff[1])/2;
;;;2203   
;;;2204   //if(adc_buff[adc_ch][adc_cnt1]<adc_buff_min[adc_ch])adc_buff_min[adc_ch]=adc_buff[adc_ch][adc_cnt1];
;;;2205   //if(adc_buff[adc_ch][adc_cnt1]>adc_buff_max[adc_ch])adc_buff_max[adc_ch]=adc_buff[adc_ch][adc_cnt1];
;;;2206   /*
;;;2207   	{
;;;2208   	if((adc_cnt1&0x03)==0)
;;;2209   		{
;;;2210   		temp_S=0;
;;;2211   		for(i=0;i<16;i++)
;;;2212   			{
;;;2213   			temp_S+=adc_buff[adc_ch][i];
;;;2214   			} 
;;;2215            	adc_buff_[adc_ch]=temp_S>>4;
;;;2216             }
;;;2217   	}*/
;;;2218   
;;;2219   
;;;2220   		  
;;;2221   
;;;2222   adc_self_ch_cnt=0;
0015bc  705c              STRB     r4,[r3,#1]
;;;2223   
;;;2224   adc_ch_net++;
0015be  1c6d              ADDS     r5,r5,#1
;;;2225   adc_ch_net&=1;
0015c0  f0050001          AND      r0,r5,#1
0015c4  7098              STRB     r0,[r3,#2]
;;;2226   
;;;2227   //SET_REG(LPC_GPIO0->FIODIR,7,5,3);
;;;2228   //SET_REG(LPC_GPIO0->FIOPIN,adc_ch,5,3);
;;;2229   
;;;2230   if(adc_ch_net)
;;;2231   	{
;;;2232   	//LPC_GPIO2->FIODIR|=(1<<7);
;;;2233   	//LPC_GPIO2->FIOPIN|=(1<<7);
;;;2234   	SET_REG(LPC_ADC->ADCR,1<<2,0,8);
0015c6  4a9b              LDR      r2,|L1.6196|
0015c8  b128              CBZ      r0,|L1.5590|
0015ca  6810              LDR      r0,[r2,#0]
0015cc  f02000ff          BIC      r0,r0,#0xff
0015d0  1d00              ADDS     r0,r0,#4
0015d2  6010              STR      r0,[r2,#0]
0015d4  e03b              B        |L1.5710|
                  |L1.5590|
;;;2235   	}
;;;2236   else
;;;2237   	{
;;;2238   	//LPC_GPIO2->FIODIR|=(1<<7);
;;;2239   	//LPC_GPIO2->FIOPIN&=~(1<<7);
;;;2240   	if(!(adc_ch&(1<<3)))SET_REG(LPC_ADC->ADCR,1<<0,0,8);
0015d6  78d8              LDRB     r0,[r3,#3]  ; adc_ch
0015d8  0701              LSLS     r1,r0,#28
0015da  d405              BMI      |L1.5608|
0015dc  6811              LDR      r1,[r2,#0]
0015de  f02101ff          BIC      r1,r1,#0xff
0015e2  1c49              ADDS     r1,r1,#1
0015e4  6011              STR      r1,[r2,#0]
0015e6  e004              B        |L1.5618|
                  |L1.5608|
;;;2241   	else 			SET_REG(LPC_ADC->ADCR,1<<1,0,8);
0015e8  6811              LDR      r1,[r2,#0]
0015ea  f02101ff          BIC      r1,r1,#0xff
0015ee  1c89              ADDS     r1,r1,#2
0015f0  6011              STR      r1,[r2,#0]
                  |L1.5618|
;;;2242   
;;;2243   
;;;2244   	SET_REG(LPC_GPIO0->FIODIR,1,28,1);
0015f2  4995              LDR      r1,|L1.6216|
0015f4  680b              LDR      r3,[r1,#0]
0015f6  f0435380          ORR      r3,r3,#0x10000000
0015fa  600b              STR      r3,[r1,#0]
;;;2245   	SET_REG(LPC_GPIO1->FIODIR,1,30,1);
0015fc  6a0b              LDR      r3,[r1,#0x20]
0015fe  f0434380          ORR      r3,r3,#0x40000000
001602  620b              STR      r3,[r1,#0x20]
;;;2246   	SET_REG(LPC_GPIO3->FIODIR,1,26,1);
001604  6e0b              LDR      r3,[r1,#0x60]
001606  f0436380          ORR      r3,r3,#0x4000000
00160a  660b              STR      r3,[r1,#0x60]
;;;2247   
;;;2248   	if(!(adc_ch&(1<<0)))SET_REG(LPC_GPIO0->FIOPIN,0,28,1);
00160c  07c3              LSLS     r3,r0,#31
00160e  d104              BNE      |L1.5658|
001610  694b              LDR      r3,[r1,#0x14]
001612  f0235380          BIC      r3,r3,#0x10000000
001616  614b              STR      r3,[r1,#0x14]
001618  e003              B        |L1.5666|
                  |L1.5658|
;;;2249   	else 			SET_REG(LPC_GPIO0->FIOPIN,1,28,1);
00161a  694b              LDR      r3,[r1,#0x14]
00161c  f0435380          ORR      r3,r3,#0x10000000
001620  614b              STR      r3,[r1,#0x14]
                  |L1.5666|
;;;2250   
;;;2251   	if(!(adc_ch&(1<<1)))SET_REG(LPC_GPIO1->FIOPIN,0,30,1);
001622  0783              LSLS     r3,r0,#30
001624  d404              BMI      |L1.5680|
001626  6b4b              LDR      r3,[r1,#0x34]
001628  f0234380          BIC      r3,r3,#0x40000000
00162c  634b              STR      r3,[r1,#0x34]
00162e  e003              B        |L1.5688|
                  |L1.5680|
;;;2252   	else 			SET_REG(LPC_GPIO1->FIOPIN,1,30,1);
001630  6b4b              LDR      r3,[r1,#0x34]
001632  f0434380          ORR      r3,r3,#0x40000000
001636  634b              STR      r3,[r1,#0x34]
                  |L1.5688|
;;;2253   
;;;2254   	if(!(adc_ch&(1<<2)))SET_REG(LPC_GPIO3->FIOPIN,0,26,1);
001638  0740              LSLS     r0,r0,#29
00163a  d404              BMI      |L1.5702|
00163c  6f48              LDR      r0,[r1,#0x74]
00163e  f0206080          BIC      r0,r0,#0x4000000
001642  6748              STR      r0,[r1,#0x74]
001644  e003              B        |L1.5710|
                  |L1.5702|
;;;2255   	else 			SET_REG(LPC_GPIO3->FIOPIN,1,26,1);
001646  6f48              LDR      r0,[r1,#0x74]
001648  f0406080          ORR      r0,r0,#0x4000000
00164c  6748              STR      r0,[r1,#0x74]
                  |L1.5710|
;;;2256   	}
;;;2257   	
;;;2258   
;;;2259   
;;;2260   
;;;2261   LPC_ADC->ADCR |=  (1<<24);
00164e  6810              LDR      r0,[r2,#0]
001650  f0407080          ORR      r0,r0,#0x1000000
001654  6010              STR      r0,[r2,#0]
                  |L1.5718|
;;;2262   
;;;2263   }
001656  e8bd81f0          POP      {r4-r8,pc}
;;;2264   
                          ENDP

                  avg_hndl PROC
;;;2521   //-----------------------------------------------
;;;2522   void avg_hndl(void)
00165a  b5f0              PUSH     {r4-r7,lr}
;;;2523   { 
;;;2524   char i;
;;;2525   
;;;2526   #define AVGCNTMAX	5
;;;2527   if(avg_main_cnt)
00165c  4c77              LDR      r4,|L1.6204|
00165e  3c8e              SUBS     r4,r4,#0x8e
001660  f9b4001e          LDRSH    r0,[r4,#0x1e]  ; avg_main_cnt
001664  b110              CBZ      r0,|L1.5740|
;;;2528   	{
;;;2529   	avg_main_cnt--;
001666  1e40              SUBS     r0,r0,#1
001668  83e0              STRH     r0,[r4,#0x1e]
;;;2530   	goto avg_hndl_end;
00166a  e083              B        |L1.6004|
                  |L1.5740|
;;;2531   	}                 
;;;2532   
;;;2533   avg_num=0;
00166c  2500              MOVS     r5,#0
00166e  72e5              STRB     r5,[r4,#0xb]
;;;2534   
;;;2535   for(i=0;i<NUMIST;i++)
001670  2000              MOVS     r0,#0
001672  4977              LDR      r1,|L1.6224|
;;;2536   	{
;;;2537   	if((bps[i]._state==bsWRK)&&(bps[i]._cnt<20))avg_num++;
001674  4b75              LDR      r3,|L1.6220|
001676  f9b12000          LDRSH    r2,[r1,#0]            ;2535
00167a  e010              B        |L1.5790|
                  |L1.5756|
00167c  ebc001c0          RSB      r1,r0,r0,LSL #3
001680  eb010141          ADD      r1,r1,r1,LSL #1
001684  eb030181          ADD      r1,r3,r1,LSL #2
001688  788e              LDRB     r6,[r1,#2]
00168a  2e01              CMP      r6,#1
00168c  d105              BNE      |L1.5786|
00168e  78c9              LDRB     r1,[r1,#3]
001690  2914              CMP      r1,#0x14
001692  d202              BCS      |L1.5786|
001694  7ae1              LDRB     r1,[r4,#0xb]  ; avg_num
001696  1c49              ADDS     r1,r1,#1
001698  72e1              STRB     r1,[r4,#0xb]
                  |L1.5786|
00169a  1c40              ADDS     r0,r0,#1              ;2535
00169c  b2c0              UXTB     r0,r0                 ;2535
                  |L1.5790|
00169e  4290              CMP      r0,r2                 ;2535
0016a0  dbec              BLT      |L1.5756|
;;;2538   	}
;;;2539   
;;;2540   /*if((K[NUMI]>=1)&&(bps_state[0]==ssWRK))	avg_num++;
;;;2541   if((K[NUMI]>=2)&&(bps_state[1]==ssWRK))	avg_num++;
;;;2542   if((K[NUMI]>=3)&&(bps_state[2]==ssWRK))	avg_num++;*/
;;;2543   
;;;2544   	
;;;2545   if(avg_num<2)
0016a2  7ae6              LDRB     r6,[r4,#0xb]  ; avg_num
0016a4  2e02              CMP      r6,#2
0016a6  d365              BCC      |L1.6004|
;;;2546   	{
;;;2547   	goto avg_hndl_end;
;;;2548   	}
;;;2549   	
;;;2550   else
;;;2551   	{
;;;2552   	i_avg_min=5000;
0016a8  f2413088          MOV      r0,#0x1388
0016ac  66e0              STR      r0,[r4,#0x6c]  ; i_avg_min
;;;2553   	i_avg_max=0;
0016ae  66a5              STR      r5,[r4,#0x68]  ; i_avg_max
;;;2554   	i_avg_summ=0;
0016b0  6725              STR      r5,[r4,#0x70]  ; i_avg_summ
;;;2555   	for(i=0;i<NUMIST;i++)
0016b2  2100              MOVS     r1,#0
0016b4  e016              B        |L1.5860|
                  |L1.5814|
;;;2556   		{
;;;2557   		if(bps[i]._state==bsWRK)
0016b6  ebc100c1          RSB      r0,r1,r1,LSL #3
0016ba  eb000040          ADD      r0,r0,r0,LSL #1
0016be  eb030080          ADD      r0,r3,r0,LSL #2
0016c2  7887              LDRB     r7,[r0,#2]
0016c4  2f01              CMP      r7,#1
0016c6  d10b              BNE      |L1.5856|
;;;2558   			{
;;;2559   			if(bps[i]._Ii>i_avg_max)i_avg_max=bps[i]._Ii;
0016c8  6a40              LDR      r0,[r0,#0x24]
0016ca  6ea7              LDR      r7,[r4,#0x68]  ; i_avg_max
0016cc  42b8              CMP      r0,r7
0016ce  dd00              BLE      |L1.5842|
0016d0  66a0              STR      r0,[r4,#0x68]  ; i_avg_max
                  |L1.5842|
;;;2560   			if(bps[i]._Ii<i_avg_min)i_avg_min=bps[i]._Ii;
0016d2  6ee7              LDR      r7,[r4,#0x6c]  ; i_avg_min
0016d4  42b8              CMP      r0,r7
0016d6  da00              BGE      |L1.5850|
0016d8  66e0              STR      r0,[r4,#0x6c]  ; i_avg_min
                  |L1.5850|
;;;2561   			
;;;2562   			i_avg_summ+=bps[i]._Ii;
0016da  6f27              LDR      r7,[r4,#0x70]  ; i_avg_summ
0016dc  4438              ADD      r0,r0,r7
0016de  6720              STR      r0,[r4,#0x70]  ; i_avg_summ
                  |L1.5856|
0016e0  1c49              ADDS     r1,r1,#1              ;2555
0016e2  b2c9              UXTB     r1,r1                 ;2555
                  |L1.5860|
0016e4  4291              CMP      r1,r2                 ;2555
0016e6  dbe6              BLT      |L1.5814|
;;;2563   			}
;;;2564   		}
;;;2565   	i_avg=i_avg_summ/avg_num;	
0016e8  6f20              LDR      r0,[r4,#0x70]  ; i_avg_summ
0016ea  fb90f6f6          SDIV     r6,r0,r6
0016ee  6766              STR      r6,[r4,#0x74]  ; i_avg
;;;2566   	
;;;2567   	if(i_avg_min==0)i_avg_min=1;
0016f0  6ee0              LDR      r0,[r4,#0x6c]  ; i_avg_min
0016f2  2101              MOVS     r1,#1                 ;2537
0016f4  b900              CBNZ     r0,|L1.5880|
0016f6  66e1              STR      r1,[r4,#0x6c]  ; i_avg_min
                  |L1.5880|
;;;2568   
;;;2569   	avg=i_avg_max;
0016f8  6ea0              LDR      r0,[r4,#0x68]  ; i_avg_max
;;;2570   	avg*=100;
0016fa  2764              MOVS     r7,#0x64
0016fc  4378              MULS     r0,r7,r0
;;;2571   	avg/=i_avg_min;
0016fe  6ee7              LDR      r7,[r4,#0x6c]  ; i_avg_min
001700  fb90f0f7          SDIV     r0,r0,r7
001704  67a0              STR      r0,[r4,#0x78]  ; avg
;;;2572   
;;;2573   	if(avg>160) bAVG=1;
001706  28a0              CMP      r0,#0xa0
001708  dd00              BLE      |L1.5900|
00170a  72a1              STRB     r1,[r4,#0xa]
                  |L1.5900|
;;;2574   	if(avg<120) bAVG=0;
00170c  2878              CMP      r0,#0x78
00170e  da00              BGE      |L1.5906|
001710  72a5              STRB     r5,[r4,#0xa]
                  |L1.5906|
;;;2575   
;;;2576   	if(bAVG==1)
001712  7aa0              LDRB     r0,[r4,#0xa]  ; bAVG
001714  2801              CMP      r0,#1
001716  d12d              BNE      |L1.6004|
;;;2577   		{
;;;2578   		for(i=0;i<NUMIST;i++)
001718  2100              MOVS     r1,#0
;;;2579   			{
;;;2580   			if(bps[i]._state==bsWRK)
;;;2581   				{
;;;2582   				if(bps[i]._Ii>i_avg)bps[i]._x_--;
;;;2583   				if(bps[i]._Ii<i_avg)bps[i]._x_++;
;;;2584   			
;;;2585   				if(bps[i]._x_<-50)bps[i]._x_=-50;
00171a  f06f0531          MVN      r5,#0x31
00171e  e027              B        |L1.6000|
                  |L1.5920|
001720  ebc100c1          RSB      r0,r1,r1,LSL #3       ;2580
001724  eb000040          ADD      r0,r0,r0,LSL #1       ;2580
001728  eb030080          ADD      r0,r3,r0,LSL #2       ;2580
00172c  7884              LDRB     r4,[r0,#2]            ;2580
00172e  2c01              CMP      r4,#1                 ;2580
001730  d11c              BNE      |L1.5996|
001732  6a44              LDR      r4,[r0,#0x24]         ;2582
001734  42b4              CMP      r4,r6                 ;2582
001736  dd05              BLE      |L1.5956|
001738  f8b04050          LDRH     r4,[r0,#0x50]         ;2582
00173c  f1a40401          SUB      r4,r4,#1              ;2582
001740  f8a04050          STRH     r4,[r0,#0x50]         ;2582
                  |L1.5956|
001744  da05              BGE      |L1.5970|
001746  f8b04050          LDRH     r4,[r0,#0x50]         ;2583
00174a  f1040401          ADD      r4,r4,#1              ;2583
00174e  f8a04050          STRH     r4,[r0,#0x50]         ;2583
                  |L1.5970|
001752  f9b04050          LDRSH    r4,[r0,#0x50]
001756  42ac              CMP      r4,r5
001758  da01              BGE      |L1.5982|
00175a  f8a05050          STRH     r5,[r0,#0x50]
                  |L1.5982|
;;;2586   				if(bps[i]._x_>50)bps[i]._x_=50;	
00175e  f9b04050          LDRSH    r4,[r0,#0x50]
001762  2c32              CMP      r4,#0x32
001764  dd02              BLE      |L1.5996|
001766  2432              MOVS     r4,#0x32
001768  f8a04050          STRH     r4,[r0,#0x50]
                  |L1.5996|
00176c  1c49              ADDS     r1,r1,#1              ;2578
00176e  b2c9              UXTB     r1,r1                 ;2578
                  |L1.6000|
001770  4291              CMP      r1,r2                 ;2578
001772  dbd5              BLT      |L1.5920|
                  |L1.6004|
;;;2587   				}
;;;2588   			}		
;;;2589   		}			
;;;2590   	}   	 
;;;2591   
;;;2592   
;;;2593   avg_hndl_end:
;;;2594   __nop();  
001774  bf00              NOP      
;;;2595   }
001776  bdf0              POP      {r4-r7,pc}
;;;2596   
                          ENDP

                  rele_hndl PROC
;;;2609   //*************-----------------------------------------------
;;;2610   void rele_hndl(void)
001778  e92d41f0          PUSH     {r4-r8,lr}
;;;2611   {
;;;2612   //static char cnt_rel_sam;
;;;2613   //char temp;
;;;2614   
;;;2615   //temp=0;
;;;2616   
;;;2617   
;;;2618   SET_REG(LPC_PINCON->PINSEL0,0,4*2,6*2);
00177c  482c              LDR      r0,|L1.6192|
00177e  6801              LDR      r1,[r0,#0]
001780  4a34              LDR      r2,|L1.6228|
001782  4011              ANDS     r1,r1,r2
001784  6001              STR      r1,[r0,#0]
;;;2619   SET_REG(LPC_GPIO0->FIODIR,63,4,6);
001786  4c30              LDR      r4,|L1.6216|
001788  6821              LDR      r1,[r4,#0]
00178a  f441717c          ORR      r1,r1,#0x3f0
00178e  6021              STR      r1,[r4,#0]
;;;2620   SET_REG(LPC_PINCON->PINSEL7,0,(25-16)*2,2);
001790  69c1              LDR      r1,[r0,#0x1c]
001792  f4212140          BIC      r1,r1,#0xc0000
001796  61c1              STR      r1,[r0,#0x1c]
;;;2621   SET_REG(LPC_GPIO3->FIODIR,1,25,1);
001798  6e21              LDR      r1,[r4,#0x60]
00179a  f0417100          ORR      r1,r1,#0x2000000
00179e  6621              STR      r1,[r4,#0x60]
;;;2622   SET_REG(LPC_PINCON->PINSEL1,0,(29-16)*2,2);
0017a0  6841              LDR      r1,[r0,#4]
0017a2  f0216140          BIC      r1,r1,#0xc000000
0017a6  6041              STR      r1,[r0,#4]
;;;2623   SET_REG(LPC_GPIO0->FIODIR,1,29,1);
0017a8  6820              LDR      r0,[r4,#0]
0017aa  f0405000          ORR      r0,r0,#0x20000000
0017ae  6020              STR      r0,[r4,#0]
;;;2624   
;;;2625   
;;;2626   
;;;2627   
;;;2628   
;;;2629   
;;;2630   if((((bat[0]._rel_stat)  || (tbatdisable_stat!=tbdsON))&&(tbatdisable_cmnd))	&& (main_1Hz_cnt>5))
0017b0  482a              LDR      r0,|L1.6236|
0017b2  4d29              LDR      r5,|L1.6232|
0017b4  7802              LDRB     r2,[r0,#0]  ; tbatdisable_stat
0017b6  482a              LDR      r0,|L1.6240|
0017b8  492a              LDR      r1,|L1.6244|
0017ba  f895303c          LDRB     r3,[r5,#0x3c]  ; bat
0017be  7800              LDRB     r0,[r0,#0]
0017c0  f9b11000          LDRSH    r1,[r1,#0]
0017c4  4313              ORRS     r3,r3,r2
0017c6  d007              BEQ      |L1.6104|
0017c8  b130              CBZ      r0,|L1.6104|
0017ca  2905              CMP      r1,#5
0017cc  dd04              BLE      |L1.6104|
;;;2631   	{
;;;2632   	SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_BAT1,1);
0017ce  69a3              LDR      r3,[r4,#0x18]
0017d0  f4437380          ORR      r3,r3,#0x100
0017d4  61a3              STR      r3,[r4,#0x18]
0017d6  e003              B        |L1.6112|
                  |L1.6104|
;;;2633   	}
;;;2634   else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_BAT1,1);	  	
0017d8  69e3              LDR      r3,[r4,#0x1c]
0017da  f4437380          ORR      r3,r3,#0x100
0017de  61e3              STR      r3,[r4,#0x1c]
                  |L1.6112|
;;;2635   
;;;2636   if((((bat[1]._rel_stat) || (tbatdisable_stat!=tbdsON))&&(tbatdisable_cmnd))	&& (main_1Hz_cnt>5))
0017e0  f8953088          LDRB     r3,[r5,#0x88]  ; bat
0017e4  4313              ORRS     r3,r3,r2
0017e6  d007              BEQ      |L1.6136|
0017e8  b130              CBZ      r0,|L1.6136|
0017ea  2905              CMP      r1,#5
0017ec  dd04              BLE      |L1.6136|
;;;2637   	{
;;;2638   	SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_BAT2,1);
0017ee  69a0              LDR      r0,[r4,#0x18]
0017f0  f0400040          ORR      r0,r0,#0x40
0017f4  61a0              STR      r0,[r4,#0x18]
0017f6  e003              B        |L1.6144|
                  |L1.6136|
;;;2639   	}
;;;2640   else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_BAT2,1);
0017f8  69e0              LDR      r0,[r4,#0x1c]
0017fa  f0400040          ORR      r0,r0,#0x40
0017fe  61e0              STR      r0,[r4,#0x1c]
                  |L1.6144|
;;;2641   
;;;2642   
;;;2643   if(mess_find_unvol((MESS2RELE_HNDL))&&(mess_data[0]==PARAM_RELE_SAMOKALIBR)) 
001800  20d2              MOVS     r0,#0xd2
001802  f7fffffe          BL       mess_find_unvol
001806  4d18              LDR      r5,|L1.6248|
001808  b380              CBZ      r0,|L1.6252|
00180a  6828              LDR      r0,[r5,#0]  ; mess_data
00180c  2864              CMP      r0,#0x64
00180e  d134              BNE      |L1.6266|
;;;2644   	{
;;;2645   	if(mess_data[1]==1)SET_REG(LPC_GPIO0->FIOSET,1,29,1);
001810  6868              LDR      r0,[r5,#4]  ; mess_data
001812  2801              CMP      r0,#1
001814  d12b              BNE      |L1.6254|
001816  69a0              LDR      r0,[r4,#0x18]
001818  f0405000          ORR      r0,r0,#0x20000000
00181c  61a0              STR      r0,[r4,#0x18]
00181e  e030              B        |L1.6274|
                  |L1.6176|
                          DCD      a_ind
                  |L1.6180|
                          DCD      mnemo_cnt
                  |L1.6184|
                          DCD      MNEMO_ON
                  |L1.6188|
                          DCD      MNEMO_TIME
                  |L1.6192|
                          DCD      0x4002c000
                  |L1.6196|
                          DCD      0x40034000
                  |L1.6200|
                          DCD      0xe000e100
                  |L1.6204|
                          DCD      ||area_number.21||+0x8e
                  |L1.6208|
                          DCD      ||.bss||+0x420
                  |L1.6212|
                          DCD      ||.bss||
                  |L1.6216|
                          DCD      0x2009c000
                  |L1.6220|
                          DCD      bps
                  |L1.6224|
                          DCD      NUMIST
                  |L1.6228|
                          DCD      0xfff000ff
                  |L1.6232|
                          DCD      bat
                  |L1.6236|
                          DCD      tbatdisable_stat
                  |L1.6240|
                          DCD      tbatdisable_cmnd
                  |L1.6244|
                          DCD      main_1Hz_cnt
                  |L1.6248|
                          DCD      mess_data
                  |L1.6252|
00186c  e005              B        |L1.6266|
                  |L1.6254|
;;;2646   	else if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,29,1);
00186e  b940              CBNZ     r0,|L1.6274|
001870  69e0              LDR      r0,[r4,#0x1c]
001872  f0405000          ORR      r0,r0,#0x20000000
001876  61e0              STR      r0,[r4,#0x1c]
001878  e003              B        |L1.6274|
                  |L1.6266|
;;;2647   	}
;;;2648   else SET_REG(LPC_GPIO0->FIOCLR,1,29,1);
00187a  69e0              LDR      r0,[r4,#0x1c]
00187c  f0405000          ORR      r0,r0,#0x20000000
001880  61e0              STR      r0,[r4,#0x1c]
                  |L1.6274|
;;;2649   
;;;2650   
;;;2651   #ifndef UKU2071x
;;;2652   //  
;;;2653   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_NET))
;;;2654   	{
;;;2655   	if(mess_data[1]==0) 			SET_REG(LPC_GPIO3->FIOSET,1,SHIFT_REL_AV_NET,1);
;;;2656   	else 						SET_REG(LPC_GPIO3->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;2657   	}
;;;2658   else	if(!(avar_ind_stat&0x00000001)) 	SET_REG(LPC_GPIO3->FIOSET,1,SHIFT_REL_AV_NET,1);
;;;2659   else 							SET_REG(LPC_GPIO3->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;2660   #endif
;;;2661   #ifdef UKU2071x
;;;2662   //  
;;;2663   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_NET))
001882  20d2              MOVS     r0,#0xd2
001884  f7fffffe          BL       mess_find_unvol
;;;2664   	{
;;;2665   	if(mess_data[1]==0)				SET_REG(LPC_GPIO3->FIOCLR,1,SHIFT_REL_AV_NET,1); 
;;;2666   	else 						SET_REG(LPC_GPIO3->FIOSET,1,SHIFT_REL_AV_NET,1);
;;;2667   	}
;;;2668   else	if(!(avar_ind_stat&0x00000001))	SET_REG(LPC_GPIO3->FIOCLR,1,SHIFT_REL_AV_NET,1);
001888  4efb              LDR      r6,|L1.7288|
00188a  b170              CBZ      r0,|L1.6314|
00188c  6828              LDR      r0,[r5,#0]            ;2663  ; mess_data
00188e  2866              CMP      r0,#0x66              ;2663
001890  d10b              BNE      |L1.6314|
001892  6868              LDR      r0,[r5,#4]            ;2665  ; mess_data
001894  b920              CBNZ     r0,|L1.6304|
001896  6fe0              LDR      r0,[r4,#0x7c]         ;2665
001898  f0407000          ORR      r0,r0,#0x2000000      ;2665
00189c  67e0              STR      r0,[r4,#0x7c]         ;2665
00189e  e010              B        |L1.6338|
                  |L1.6304|
0018a0  6fa0              LDR      r0,[r4,#0x78]         ;2666
0018a2  f0407000          ORR      r0,r0,#0x2000000      ;2666
0018a6  67a0              STR      r0,[r4,#0x78]         ;2666
0018a8  e00b              B        |L1.6338|
                  |L1.6314|
0018aa  6830              LDR      r0,[r6,#0]  ; avar_ind_stat
0018ac  07c0              LSLS     r0,r0,#31
0018ae  d104              BNE      |L1.6330|
0018b0  6fe0              LDR      r0,[r4,#0x7c]
0018b2  f0407000          ORR      r0,r0,#0x2000000
0018b6  67e0              STR      r0,[r4,#0x7c]
0018b8  e003              B        |L1.6338|
                  |L1.6330|
;;;2669   else 					  		SET_REG(LPC_GPIO3->FIOSET,1,SHIFT_REL_AV_NET,1);
0018ba  6fa0              LDR      r0,[r4,#0x78]
0018bc  f0407000          ORR      r0,r0,#0x2000000
0018c0  67a0              STR      r0,[r4,#0x78]
                  |L1.6338|
;;;2670   #endif
;;;2671   
;;;2672   #ifdef UKU_3U
;;;2673   //  
;;;2674   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BAT1))
;;;2675   	{
;;;2676   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT1,1);
;;;2677   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT1,1);
;;;2678        }
;;;2679   else 
;;;2680   	{
;;;2681   	if(!(avar_ind_stat&0x00000002)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT1,1);
;;;2682        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT1,1);
;;;2683   	} 
;;;2684   
;;;2685   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BAT2))
;;;2686   	{
;;;2687   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT2,1);
;;;2688   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT2,1);
;;;2689        }
;;;2690   else 
;;;2691   	{
;;;2692   	if(!(avar_ind_stat&0x00000004)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT2,1);
;;;2693        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT2,1);
;;;2694   	} 
;;;2695   
;;;2696   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BPS))
;;;2697   	{
;;;2698   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
;;;2699   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
;;;2700        }
;;;2701   else 
;;;2702   	{
;;;2703   	if(!(avar_ind_stat&0x000007f8)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
;;;2704        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
;;;2705   	} 
;;;2706   
;;;2707   #endif
;;;2708   
;;;2709   
;;;2710   #ifdef UKU_GLONASS
;;;2711   //  
;;;2712   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BAT1))
;;;2713   	{
;;;2714   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT1,1);
;;;2715   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT1,1);
;;;2716        }
;;;2717   else 
;;;2718   	{
;;;2719   	if(!(avar_ind_stat&0x00000002)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT1,1);
;;;2720        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT1,1);
;;;2721   	} 
;;;2722   
;;;2723   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BAT2))
;;;2724   	{
;;;2725   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT2,1);
;;;2726   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT2,1);
;;;2727        }
;;;2728   else 
;;;2729   	{
;;;2730   	if(!(avar_ind_stat&0x00000004)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT2,1);
;;;2731        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT2,1);
;;;2732   	} 
;;;2733   
;;;2734   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BPS))
;;;2735   	{
;;;2736   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
;;;2737   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
;;;2738        }
;;;2739   else 
;;;2740   	{
;;;2741   	if(!(avar_ind_stat&0x000007f8)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
;;;2742        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
;;;2743   	} 
;;;2744   
;;;2745   #endif
;;;2746   
;;;2747   #ifdef U /*
;;;2748   
;;;2749   
;;;2750   
;;;2751   /*
;;;2752   //  
;;;2753   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BAT))
;;;2754   	{
;;;2755   	if(mess_data[1]==0) temp&=~(1<<SHIFT_REL_AV_BAT);
;;;2756   	else if(mess_data[1]==1) temp|=(1<<SHIFT_REL_AV_BAT);
;;;2757        }
;;;2758   else 
;;;2759   	{
;;;2760   	if(!(avar_ind_stat&0x00000006)) temp&=~(1<<SHIFT_REL_AV_BAT);
;;;2761        else temp|=(1<<SHIFT_REL_AV_BAT);
;;;2762   	} 
;;;2763   */
;;;2764   
;;;2765   #endif
;;;2766   
;;;2767   #ifdef UKU_RSTKM
;;;2768   
;;;2769   //  
;;;2770   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_COMM))
;;;2771   	{
;;;2772   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_COMM,1);
;;;2773   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_COMM,1);
;;;2774   	}
;;;2775   else 
;;;2776   	{
;;;2777        if(  (!(avar_ind_stat&0x00007fff))/* &&
;;;2778             ((!SK_REL_EN[0]) || (sk_av_stat[0]!=sasON))  &&
;;;2779             ((!SK_REL_EN[1]) || (sk_av_stat[1]!=sasON))  &&
;;;2780             ((!SK_REL_EN[2]) || (sk_av_stat[2]!=sasON))  &&
;;;2781             ((!SK_REL_EN[3]) || (sk_av_stat[3]!=sasON))*/  )SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_COMM,1);
;;;2782        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_COMM,1);
;;;2783   	}
;;;2784   	
;;;2785   
;;;2786   // 
;;;2787   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_LIGHT))
;;;2788   	{
;;;2789   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LIGHT,1);
;;;2790   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LIGHT,1);
;;;2791        }
;;;2792   else 
;;;2793   	{
;;;2794   	if(sk_av_stat[0]!=sasON) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LIGHT,1);
;;;2795        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LIGHT,1);
;;;2796   	}
;;;2797   
;;;2798   
;;;2799   //  
;;;2800   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_LOAD_OFF))
;;;2801   	{
;;;2802   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LOAD_OFF,1);
;;;2803   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LOAD_OFF,1);
;;;2804        }
;;;2805   else if(tloaddisable_cmnd==0)
;;;2806   	{
;;;2807   	SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LOAD_OFF,1);
;;;2808   	}
;;;2809   else if((tloaddisable_cmnd)&&(tloaddisable_cmnd<=11))
;;;2810   	{
;;;2811   	SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LOAD_OFF,1);
;;;2812   	}
;;;2813   
;;;2814   else 
;;;2815   	{
;;;2816   	if(!(tloaddisable_stat==tldsON)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LOAD_OFF,1);
;;;2817        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LOAD_OFF,1);
;;;2818   	} 
;;;2819   
;;;2820   //  
;;;2821   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_VENT))
;;;2822   	{
;;;2823   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;2824   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT,1);
;;;2825   	}
;;;2826   else 
;;;2827   	{
;;;2828   	if(mixer_vent_stat==mvsOFF) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;2829        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT,1);
;;;2830   	} 
;;;2831   
;;;2832   #endif
;;;2833   
;;;2834   #ifdef UKU_KONTUR
;;;2835   
;;;2836   //  
;;;2837   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_COMM))
;;;2838   	{
;;;2839   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_COMM,1);
;;;2840   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_COMM,1);
;;;2841   	}
;;;2842   else 
;;;2843   	{
;;;2844        if(  (!(avar_ind_stat&0x00007fff)) &&
;;;2845             ((!SK_REL_EN[0]) || (sk_av_stat[0]!=sasON))  &&
;;;2846             ((!SK_REL_EN[1]) || (sk_av_stat[1]!=sasON))  &&
;;;2847             ((!SK_REL_EN[2]) || (sk_av_stat[2]!=sasON))  /*&&
;;;2848             ((!SK_REL_EN[3]) || (sk_av_stat[3]!=sasON))*/  )SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_COMM,1);
;;;2849        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_COMM,1);
;;;2850   	}
;;;2851   
;;;2852   	
;;;2853   //rel_warm_plazma=0;
;;;2854   //    
;;;2855   /*
;;;2856   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_WARM))
;;;2857   	{
;;;2858   	if(mess_data[1]==0)
;;;2859   		{
;;;2860   		SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_WARM,1);
;;;2861   		rel_warm_plazma=1;
;;;2862   		}
;;;2863   	else if(mess_data[1]==1) 
;;;2864   		{
;;;2865   		SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_WARM,1);
;;;2866   		rel_warm_plazma=2;
;;;2867   		}
;;;2868        }
;;;2869   else 
;;;2870   	{
;;;2871   	if(warm_stat_k==wsOFF) 
;;;2872   		{
;;;2873   		SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_WARM,1);
;;;2874   		rel_warm_plazma=3;
;;;2875   		}
;;;2876        else 
;;;2877   		{
;;;2878   		SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_WARM,1);
;;;2879   		rel_warm_plazma=4;
;;;2880   		}
;;;2881   	}
;;;2882   */
;;;2883   // 
;;;2884   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_LIGHT))
;;;2885   	{
;;;2886   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LIGHT,1);
;;;2887   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LIGHT,1);
;;;2888        }
;;;2889   else 
;;;2890   	{
;;;2891   	if(sk_av_stat[0]!=sasON) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LIGHT,1);
;;;2892        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LIGHT,1);
;;;2893   	}
;;;2894   
;;;2895   
;;;2896   
;;;2897   //  
;;;2898   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_LOAD_OFF))
;;;2899   	{
;;;2900   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LOAD_OFF,1);
;;;2901   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LOAD_OFF,1);
;;;2902        }
;;;2903   else if(tloaddisable_cmnd==0)
;;;2904   	{
;;;2905   	SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LOAD_OFF,1);
;;;2906   	}
;;;2907   else if((tloaddisable_cmnd)&&(tloaddisable_cmnd<=11))
;;;2908   	{
;;;2909   	SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LOAD_OFF,1);
;;;2910   	}
;;;2911   
;;;2912   else 
;;;2913   	{
;;;2914   	if(!(tloaddisable_stat==tldsON)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LOAD_OFF,1);
;;;2915        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LOAD_OFF,1);
;;;2916   	} 
;;;2917   
;;;2918   //    
;;;2919   if(RELE_LOG)
;;;2920   	{
;;;2921   	if((mess_find_unvol(MESS2RELE_HNDL))&&(mess_data[0]==PARAM_RELE_VENT_WARM))
;;;2922   		{
;;;2923   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT_WARM,1);
;;;2924   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT_WARM,1);
;;;2925   		}
;;;2926   	else 
;;;2927   		{
;;;2928   		if(warm_stat_k==wsOFF) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT_WARM,1);
;;;2929   	     else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT_WARM,1);
;;;2930   		} 
;;;2931   
;;;2932   	}
;;;2933   else 
;;;2934   	{
;;;2935   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_VENT_WARM))
;;;2936   		{
;;;2937   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT_WARM,1);
;;;2938   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT_WARM,1);
;;;2939   		}
;;;2940   	else 
;;;2941   		{
;;;2942   		if(vent_stat_k==vsOFF) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT_WARM,1);
;;;2943   	     else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT_WARM,1);
;;;2944   		} 
;;;2945   	}
;;;2946   #endif
;;;2947   
;;;2948   #ifdef UKU_6U
;;;2949   //  
;;;2950   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BAT1))
;;;2951   	{
;;;2952   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT1,1);
;;;2953   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT1,1);
;;;2954        }
;;;2955   else 
;;;2956   	{
;;;2957   	if(!(avar_ind_stat&0x00000002)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT1,1);
;;;2958        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT1,1);
;;;2959   	} 
;;;2960   
;;;2961   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BAT2))
;;;2962   	{
;;;2963   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT2,1);
;;;2964   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT2,1);
;;;2965       }
;;;2966   else if(NPN_OUT==npnoRELEAVBAT2)
;;;2967   	{
;;;2968   	if(npn_stat==npnsOFF)//&&(mess_find_unvol(MESS2RELE_HNDL))&&(mess_data[0]==PARAM_RELE_NPN))
;;;2969   		{
;;;2970   		/*if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT2,1);
;;;2971   		else if(mess_data[1]==1)*/ SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT2,1);
;;;2972        	}
;;;2973   	else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT2,1);
;;;2974   	}
;;;2975   else 
;;;2976   	{
;;;2977   	if(!(avar_ind_stat&0x00000004)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT2,1);
;;;2978       else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT2,1);
;;;2979   	} 
;;;2980   
;;;2981   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BPS))
;;;2982   	{
;;;2983   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
;;;2984   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
;;;2985        }
;;;2986   else 
;;;2987   	{
;;;2988   	if(!(avar_ind_stat&0x000007f8)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
;;;2989        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
;;;2990   	} 
;;;2991   
;;;2992   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_VENT))
;;;2993   	{
;;;2994   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT,1);
;;;2995   	else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;2996   	}
;;;2997   else if((NPN_OUT==npnoRELEVENT))
;;;2998   	{
;;;2999   	if(npn_stat==npnsOFF)//&&(mess_find_unvol(MESS2RELE_HNDL))&&(mess_data[0]==PARAM_RELE_NPN))
;;;3000   		{
;;;3001   		/*if(mess_data[1]==0)*/ SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;3002   		//else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;3003       	}
;;;3004   	else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT,1);
;;;3005   	}
;;;3006   else 
;;;3007   	{
;;;3008   	if(!vent_stat) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT,1);
;;;3009   	else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;3010   	}
;;;3011   
;;;3012   #endif
;;;3013   
;;;3014   #ifdef UKU_220
;;;3015   //  
;;;3016   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BAT))
;;;3017   	{
;;;3018   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT,1);
;;;3019   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT,1);
;;;3020        }
;;;3021   else 
;;;3022   	{
;;;3023   	if(!(avar_ind_stat&0x00000002)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT,1);
;;;3024        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT,1);
;;;3025   	} 
;;;3026   
;;;3027   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BPS))
;;;3028   	{
;;;3029   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
;;;3030   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
;;;3031        }
;;;3032   else 
;;;3033   	{
;;;3034   	if(!(avar_ind_stat&0x000007f8)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
;;;3035        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
;;;3036   	} 
;;;3037   
;;;3038   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_VENT))
;;;3039   	{
;;;3040   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT,1);
;;;3041   	else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;3042   	}
;;;3043   else 
;;;3044   	{
;;;3045   	if((RELE_VENT_LOGIC==0)||(RELE_VENT_LOGIC==1))
;;;3046   		{
;;;3047   		if(vent_stat) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT,1);
;;;3048   		else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;3049   		}
;;;3050   	else 
;;;3051   		{
;;;3052   		if((avar_ind_stat&0x00000004)) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT,1);
;;;3053        	else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;3054   		}
;;;3055   	}
;;;3056   
;;;3057   #endif
;;;3058   
;;;3059   #ifdef UKU_220_V2
;;;3060   //  
;;;3061   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BAT))
;;;3062   	{
;;;3063   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT,1);
;;;3064   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT,1);
;;;3065        }
;;;3066   else 
;;;3067   	{
;;;3068   	if(!(avar_ind_stat&0x00000002)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BAT,1);
;;;3069        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BAT,1);
;;;3070   	} 
;;;3071   
;;;3072   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BPS))
;;;3073   	{
;;;3074   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
;;;3075   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
;;;3076        }
;;;3077   else 
;;;3078   	{
;;;3079   	if(!(avar_ind_stat&0x000007f8)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
;;;3080        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
;;;3081   	} 
;;;3082   
;;;3083   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_VENT))
;;;3084   	{
;;;3085   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT,1);
;;;3086   	else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;3087   	}
;;;3088   else 
;;;3089   	{
;;;3090   	if((RELE_VENT_LOGIC==0)||(RELE_VENT_LOGIC==1))
;;;3091   		{
;;;3092   		if(vent_stat) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT,1);
;;;3093   		else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;3094   		}
;;;3095   	else 
;;;3096   		{
;;;3097   		if((avar_ind_stat&0x00000004)) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT,1);
;;;3098        	else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;3099   		}
;;;3100   	}
;;;3101   
;;;3102   #endif
;;;3103   
;;;3104   #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;3105   
;;;3106   if((AUSW_MAIN==22010)||(AUSW_MAIN==22011))
0018c2  48ee              LDR      r0,|L1.7292|
;;;3107   	{
;;;3108   	#ifndef UKU2071x
;;;3109   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_NET))
;;;3110   		{
;;;3111   		if(mess_data[1]==0) SET_REG(LPC_GPIO3->FIOSET,1,25,1);
;;;3112   		else SET_REG(LPC_GPIO3->FIOCLR,1,25,1);
;;;3113   		}
;;;3114   	else	if(!(avar_ind_stat&0x00000001)) SET_REG(LPC_GPIO3->FIOSET,1,25,1);
;;;3115   	else SET_REG(LPC_GPIO3->FIOCLR,1,25,1);
;;;3116   	#endif
;;;3117   	#ifdef UKU2071x
;;;3118   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_NET))
;;;3119   		{
;;;3120   		if(mess_data[1]==0) SET_REG(LPC_GPIO3->FIOCLR,1,25,1);
;;;3121   		else SET_REG(LPC_GPIO3->FIOSET,1,25,1);
;;;3122   		}
;;;3123   	else	if(!(avar_ind_stat&0x00000001)) SET_REG(LPC_GPIO3->FIOCLR,1,25,1);
;;;3124   	else SET_REG(LPC_GPIO3->FIOSET,1,25,1);
;;;3125   	#endif
;;;3126   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BPS))
;;;3127   		{
;;;3128   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,7,1);
;;;3129   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,7,1);
;;;3130   	     }
;;;3131   	else 
;;;3132   		{
;;;3133   		if(!(avar_ind_stat&0x000007f8)) SET_REG(LPC_GPIO0->FIOCLR,1,7,1);
;;;3134   	     else SET_REG(LPC_GPIO0->FIOSET,1,7,1);
;;;3135   		} 
;;;3136   
;;;3137   	//  
;;;3138   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BAT))
;;;3139   		{
;;;3140   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,4,1);
;;;3141   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,4,1);
;;;3142        	}
;;;3143   	else 
;;;3144   		{
;;;3145   		if(!(ips_bat_av_stat)) SET_REG(LPC_GPIO0->FIOCLR,1,4,1);
0018c4  4fee              LDR      r7,|L1.7296|
0018c6  8800              LDRH     r0,[r0,#0]            ;3106  ; AUSW_MAIN
0018c8  f5a041aa          SUB      r1,r0,#0x5500         ;3106
0018cc  39fa              SUBS     r1,r1,#0xfa           ;3106
0018ce  d001              BEQ      |L1.6356|
0018d0  1e49              SUBS     r1,r1,#1              ;3106
0018d2  d161              BNE      |L1.6552|
                  |L1.6356|
0018d4  20d2              MOVS     r0,#0xd2              ;3118
0018d6  f7fffffe          BL       mess_find_unvol
0018da  b170              CBZ      r0,|L1.6394|
0018dc  6828              LDR      r0,[r5,#0]            ;3118  ; mess_data
0018de  2866              CMP      r0,#0x66              ;3118
0018e0  d10b              BNE      |L1.6394|
0018e2  6868              LDR      r0,[r5,#4]            ;3120  ; mess_data
0018e4  b920              CBNZ     r0,|L1.6384|
0018e6  6fe0              LDR      r0,[r4,#0x7c]         ;3120
0018e8  f0407000          ORR      r0,r0,#0x2000000      ;3120
0018ec  67e0              STR      r0,[r4,#0x7c]         ;3120
0018ee  e010              B        |L1.6418|
                  |L1.6384|
0018f0  6fa0              LDR      r0,[r4,#0x78]         ;3121
0018f2  f0407000          ORR      r0,r0,#0x2000000      ;3121
0018f6  67a0              STR      r0,[r4,#0x78]         ;3121
0018f8  e00b              B        |L1.6418|
                  |L1.6394|
0018fa  6830              LDR      r0,[r6,#0]            ;3123  ; avar_ind_stat
0018fc  07c0              LSLS     r0,r0,#31             ;3123
0018fe  d104              BNE      |L1.6410|
001900  6fe0              LDR      r0,[r4,#0x7c]         ;3123
001902  f0407000          ORR      r0,r0,#0x2000000      ;3123
001906  67e0              STR      r0,[r4,#0x7c]         ;3123
001908  e003              B        |L1.6418|
                  |L1.6410|
00190a  6fa0              LDR      r0,[r4,#0x78]         ;3124
00190c  f0407000          ORR      r0,r0,#0x2000000      ;3124
001910  67a0              STR      r0,[r4,#0x78]         ;3124
                  |L1.6418|
001912  20d2              MOVS     r0,#0xd2              ;3126
001914  f7fffffe          BL       mess_find_unvol
001918  b180              CBZ      r0,|L1.6460|
00191a  6828              LDR      r0,[r5,#0]            ;3126  ; mess_data
00191c  286a              CMP      r0,#0x6a              ;3126
00191e  d10d              BNE      |L1.6460|
001920  6868              LDR      r0,[r5,#4]            ;3128  ; mess_data
001922  b920              CBNZ     r0,|L1.6446|
001924  69e0              LDR      r0,[r4,#0x1c]         ;3128
001926  f0400080          ORR      r0,r0,#0x80           ;3128
00192a  61e0              STR      r0,[r4,#0x1c]         ;3128
00192c  e013              B        |L1.6486|
                  |L1.6446|
00192e  2801              CMP      r0,#1                 ;3129
001930  d111              BNE      |L1.6486|
001932  69a0              LDR      r0,[r4,#0x18]         ;3129
001934  f0400080          ORR      r0,r0,#0x80           ;3129
001938  61a0              STR      r0,[r4,#0x18]         ;3129
00193a  e00c              B        |L1.6486|
                  |L1.6460|
00193c  6830              LDR      r0,[r6,#0]            ;3133  ; avar_ind_stat
00193e  f4106fff          TST      r0,#0x7f8             ;3133
001942  d104              BNE      |L1.6478|
001944  69e0              LDR      r0,[r4,#0x1c]         ;3133
001946  f0400080          ORR      r0,r0,#0x80           ;3133
00194a  61e0              STR      r0,[r4,#0x1c]         ;3133
00194c  e003              B        |L1.6486|
                  |L1.6478|
00194e  69a0              LDR      r0,[r4,#0x18]         ;3134
001950  f0400080          ORR      r0,r0,#0x80           ;3134
001954  61a0              STR      r0,[r4,#0x18]         ;3134
                  |L1.6486|
001956  20d2              MOVS     r0,#0xd2              ;3138
001958  f7fffffe          BL       mess_find_unvol
00195c  b180              CBZ      r0,|L1.6528|
00195e  6828              LDR      r0,[r5,#0]            ;3138  ; mess_data
001960  2867              CMP      r0,#0x67              ;3138
001962  d10d              BNE      |L1.6528|
001964  6868              LDR      r0,[r5,#4]            ;3140  ; mess_data
001966  b920              CBNZ     r0,|L1.6514|
001968  69e0              LDR      r0,[r4,#0x1c]         ;3140
00196a  f0400010          ORR      r0,r0,#0x10           ;3140
00196e  61e0              STR      r0,[r4,#0x1c]         ;3140
                  |L1.6512|
001970  e1ae              B        |L1.7376|
                  |L1.6514|
001972  2801              CMP      r0,#1                 ;3141
001974  d1fc              BNE      |L1.6512|
001976  69a0              LDR      r0,[r4,#0x18]         ;3141
001978  f0400010          ORR      r0,r0,#0x10           ;3141
00197c  61a0              STR      r0,[r4,#0x18]         ;3141
00197e  e1a7              B        |L1.7376|
                  |L1.6528|
001980  7838              LDRB     r0,[r7,#0]  ; ips_bat_av_stat
001982  b920              CBNZ     r0,|L1.6542|
001984  69e0              LDR      r0,[r4,#0x1c]
001986  f0400010          ORR      r0,r0,#0x10
00198a  61e0              STR      r0,[r4,#0x1c]
00198c  e1a0              B        |L1.7376|
                  |L1.6542|
;;;3146        	else SET_REG(LPC_GPIO0->FIOSET,1,4,1);
00198e  69a0              LDR      r0,[r4,#0x18]
001990  f0400010          ORR      r0,r0,#0x10
001994  61a0              STR      r0,[r4,#0x18]
001996  e19b              B        |L1.7376|
                  |L1.6552|
;;;3147   		}
;;;3148   	}
;;;3149   
;;;3150   else	if(AUSW_MAIN==22023)
001998  f5a041ac          SUB      r1,r0,#0x5600
00199c  3907              SUBS     r1,#7
00199e  d161              BNE      |L1.6756|
;;;3151   	{
;;;3152   
;;;3153   	//  
;;;3154   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BAT))
0019a0  20d2              MOVS     r0,#0xd2
0019a2  f7fffffe          BL       mess_find_unvol
0019a6  b180              CBZ      r0,|L1.6602|
0019a8  6828              LDR      r0,[r5,#0]  ; mess_data
0019aa  2867              CMP      r0,#0x67
0019ac  d10d              BNE      |L1.6602|
;;;3155   		{
;;;3156   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,4,1);
0019ae  6868              LDR      r0,[r5,#4]  ; mess_data
0019b0  b920              CBNZ     r0,|L1.6588|
0019b2  69e0              LDR      r0,[r4,#0x1c]
0019b4  f0400010          ORR      r0,r0,#0x10
0019b8  61e0              STR      r0,[r4,#0x1c]
0019ba  e011              B        |L1.6624|
                  |L1.6588|
;;;3157   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,4,1);
0019bc  2801              CMP      r0,#1
0019be  d10f              BNE      |L1.6624|
0019c0  69a0              LDR      r0,[r4,#0x18]
0019c2  f0400010          ORR      r0,r0,#0x10
0019c6  61a0              STR      r0,[r4,#0x18]
0019c8  e00a              B        |L1.6624|
                  |L1.6602|
;;;3158        	}
;;;3159   	else 
;;;3160   		{
;;;3161   		if(!(ips_bat_av_stat)) SET_REG(LPC_GPIO0->FIOCLR,1,4,1);
0019ca  7838              LDRB     r0,[r7,#0]  ; ips_bat_av_stat
0019cc  b920              CBNZ     r0,|L1.6616|
0019ce  69e0              LDR      r0,[r4,#0x1c]
0019d0  f0400010          ORR      r0,r0,#0x10
0019d4  61e0              STR      r0,[r4,#0x1c]
0019d6  e003              B        |L1.6624|
                  |L1.6616|
;;;3162        	else SET_REG(LPC_GPIO0->FIOSET,1,4,1);
0019d8  69a0              LDR      r0,[r4,#0x18]
0019da  f0400010          ORR      r0,r0,#0x10
0019de  61a0              STR      r0,[r4,#0x18]
                  |L1.6624|
;;;3163   		} 
;;;3164   
;;;3165   
;;;3166   	//         .    
;;;3167   	#ifndef UKU2071x
;;;3168   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_NET))
;;;3169   		{
;;;3170   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;3171   		else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_NET,1);
;;;3172   		}
;;;3173   	else	if(!(avar_ind_stat&0x00000001)) SET_REG(LPC_GPIO1->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;3174   	else SET_REG(LPC_GPIO3->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;3175   	#endif
;;;3176   	#ifdef UKU2071x
;;;3177   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_NET))
0019e0  20d2              MOVS     r0,#0xd2
0019e2  f7fffffe          BL       mess_find_unvol
0019e6  b170              CBZ      r0,|L1.6662|
0019e8  6828              LDR      r0,[r5,#0]  ; mess_data
0019ea  2866              CMP      r0,#0x66
0019ec  d10b              BNE      |L1.6662|
;;;3178   		{
;;;3179   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_NET,1);
0019ee  6868              LDR      r0,[r5,#4]  ; mess_data
0019f0  b920              CBNZ     r0,|L1.6652|
0019f2  69a0              LDR      r0,[r4,#0x18]
0019f4  f0407000          ORR      r0,r0,#0x2000000
0019f8  61a0              STR      r0,[r4,#0x18]
0019fa  e010              B        |L1.6686|
                  |L1.6652|
;;;3180   		else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_NET,1);
0019fc  69e0              LDR      r0,[r4,#0x1c]
0019fe  f0407000          ORR      r0,r0,#0x2000000
001a02  61e0              STR      r0,[r4,#0x1c]
001a04  e00b              B        |L1.6686|
                  |L1.6662|
;;;3181   		}
;;;3182   	else	if(!(avar_ind_stat&0x00000001)) SET_REG(LPC_GPIO1->FIOSET,1,SHIFT_REL_AV_NET,1);
001a06  6830              LDR      r0,[r6,#0]  ; avar_ind_stat
001a08  07c0              LSLS     r0,r0,#31
001a0a  d104              BNE      |L1.6678|
001a0c  6ba0              LDR      r0,[r4,#0x38]
001a0e  f0407000          ORR      r0,r0,#0x2000000
001a12  63a0              STR      r0,[r4,#0x38]
001a14  e003              B        |L1.6686|
                  |L1.6678|
;;;3183   	else SET_REG(LPC_GPIO3->FIOSET,1,SHIFT_REL_AV_NET,1);
001a16  6fa0              LDR      r0,[r4,#0x78]
001a18  f0407000          ORR      r0,r0,#0x2000000
001a1c  67a0              STR      r0,[r4,#0x78]
                  |L1.6686|
;;;3184   	#endif
;;;3185   
;;;3186   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BPS))
001a1e  20d2              MOVS     r0,#0xd2
001a20  f7fffffe          BL       mess_find_unvol
001a24  b180              CBZ      r0,|L1.6728|
001a26  6828              LDR      r0,[r5,#0]  ; mess_data
001a28  286a              CMP      r0,#0x6a
001a2a  d10d              BNE      |L1.6728|
;;;3187   		{
;;;3188   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,7,1);
001a2c  6868              LDR      r0,[r5,#4]  ; mess_data
001a2e  b920              CBNZ     r0,|L1.6714|
001a30  69e0              LDR      r0,[r4,#0x1c]
001a32  f0400080          ORR      r0,r0,#0x80
001a36  61e0              STR      r0,[r4,#0x1c]
001a38  e14a              B        |L1.7376|
                  |L1.6714|
;;;3189   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,7,1);
001a3a  2801              CMP      r0,#1
001a3c  d198              BNE      |L1.6512|
001a3e  69a0              LDR      r0,[r4,#0x18]
001a40  f0400080          ORR      r0,r0,#0x80
001a44  61a0              STR      r0,[r4,#0x18]
001a46  e143              B        |L1.7376|
                  |L1.6728|
;;;3190   	     }
;;;3191   	else 
;;;3192   		{
;;;3193   		if(!(avar_ind_stat&0x000007f8)) SET_REG(LPC_GPIO0->FIOCLR,1,7,1);
001a48  6830              LDR      r0,[r6,#0]  ; avar_ind_stat
001a4a  f4106fff          TST      r0,#0x7f8
001a4e  d104              BNE      |L1.6746|
001a50  69e0              LDR      r0,[r4,#0x1c]
001a52  f0400080          ORR      r0,r0,#0x80
001a56  61e0              STR      r0,[r4,#0x1c]
                  |L1.6744|
001a58  e13a              B        |L1.7376|
                  |L1.6746|
;;;3194   	     else SET_REG(LPC_GPIO0->FIOSET,1,7,1);
001a5a  69a0              LDR      r0,[r4,#0x18]
001a5c  f0400080          ORR      r0,r0,#0x80
001a60  61a0              STR      r0,[r4,#0x18]
001a62  e135              B        |L1.7376|
                  |L1.6756|
;;;3195   		} 
;;;3196   	}
;;;3197   else	if(AUSW_MAIN==22043)
001a64  f5a041ac          SUB      r1,r0,#0x5600
001a68  391b              SUBS     r1,r1,#0x1b
001a6a  d175              BNE      |L1.7000|
;;;3198   	{
;;;3199   	//  
;;;3200   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BAT))
001a6c  20d2              MOVS     r0,#0xd2
001a6e  f7fffffe          BL       mess_find_unvol
001a72  b180              CBZ      r0,|L1.6806|
001a74  6828              LDR      r0,[r5,#0]  ; mess_data
001a76  2867              CMP      r0,#0x67
001a78  d10d              BNE      |L1.6806|
;;;3201   		{
;;;3202   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,4,1);
001a7a  6868              LDR      r0,[r5,#4]  ; mess_data
001a7c  b920              CBNZ     r0,|L1.6792|
001a7e  69e0              LDR      r0,[r4,#0x1c]
001a80  f0400010          ORR      r0,r0,#0x10
001a84  61e0              STR      r0,[r4,#0x1c]
001a86  e011              B        |L1.6828|
                  |L1.6792|
;;;3203   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,4,1);
001a88  2801              CMP      r0,#1
001a8a  d10f              BNE      |L1.6828|
001a8c  69a0              LDR      r0,[r4,#0x18]
001a8e  f0400010          ORR      r0,r0,#0x10
001a92  61a0              STR      r0,[r4,#0x18]
001a94  e00a              B        |L1.6828|
                  |L1.6806|
;;;3204        	}
;;;3205   	else 
;;;3206   		{
;;;3207   		if(!(ips_bat_av_stat)) SET_REG(LPC_GPIO0->FIOCLR,1,4,1);
001a96  7838              LDRB     r0,[r7,#0]  ; ips_bat_av_stat
001a98  b920              CBNZ     r0,|L1.6820|
001a9a  69e0              LDR      r0,[r4,#0x1c]
001a9c  f0400010          ORR      r0,r0,#0x10
001aa0  61e0              STR      r0,[r4,#0x1c]
001aa2  e003              B        |L1.6828|
                  |L1.6820|
;;;3208        	else SET_REG(LPC_GPIO0->FIOSET,1,4,1);
001aa4  69a0              LDR      r0,[r4,#0x18]
001aa6  f0400010          ORR      r0,r0,#0x10
001aaa  61a0              STR      r0,[r4,#0x18]
                  |L1.6828|
;;;3209   		} 
;;;3210   	//         .    
;;;3211   	#ifndef UKU2071x 
;;;3212   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_NET))
;;;3213   		{
;;;3214   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;3215   		else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_NET,1);
;;;3216   		}
;;;3217   	else	if(!(avar_ind_stat&0x00000001)) SET_REG(LPC_GPIO1->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;3218   	else SET_REG(LPC_GPIO3->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;3219   	#endif
;;;3220   	#ifdef UKU2071x 
;;;3221   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_NET))
001aac  20d2              MOVS     r0,#0xd2
001aae  f7fffffe          BL       mess_find_unvol
001ab2  b170              CBZ      r0,|L1.6866|
001ab4  6828              LDR      r0,[r5,#0]  ; mess_data
001ab6  2866              CMP      r0,#0x66
001ab8  d10b              BNE      |L1.6866|
;;;3222   		{
;;;3223   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_NET,1);
001aba  6868              LDR      r0,[r5,#4]  ; mess_data
001abc  b920              CBNZ     r0,|L1.6856|
001abe  69a0              LDR      r0,[r4,#0x18]
001ac0  f0407000          ORR      r0,r0,#0x2000000
001ac4  61a0              STR      r0,[r4,#0x18]
001ac6  e010              B        |L1.6890|
                  |L1.6856|
;;;3224   		else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_NET,1);
001ac8  69e0              LDR      r0,[r4,#0x1c]
001aca  f0407000          ORR      r0,r0,#0x2000000
001ace  61e0              STR      r0,[r4,#0x1c]
001ad0  e00b              B        |L1.6890|
                  |L1.6866|
;;;3225   		}
;;;3226   	else	if(!(avar_ind_stat&0x00000001)) SET_REG(LPC_GPIO1->FIOSET,1,SHIFT_REL_AV_NET,1);
001ad2  6830              LDR      r0,[r6,#0]  ; avar_ind_stat
001ad4  07c0              LSLS     r0,r0,#31
001ad6  d104              BNE      |L1.6882|
001ad8  6ba0              LDR      r0,[r4,#0x38]
001ada  f0407000          ORR      r0,r0,#0x2000000
001ade  63a0              STR      r0,[r4,#0x38]
001ae0  e003              B        |L1.6890|
                  |L1.6882|
;;;3227   	else SET_REG(LPC_GPIO3->FIOSET,1,SHIFT_REL_AV_NET,1);
001ae2  6fa0              LDR      r0,[r4,#0x78]
001ae4  f0407000          ORR      r0,r0,#0x2000000
001ae8  67a0              STR      r0,[r4,#0x78]
                  |L1.6890|
;;;3228   	#endif
;;;3229   
;;;3230   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BPS))
001aea  20d2              MOVS     r0,#0xd2
001aec  f7fffffe          BL       mess_find_unvol
001af0  b180              CBZ      r0,|L1.6932|
001af2  6828              LDR      r0,[r5,#0]  ; mess_data
001af4  286a              CMP      r0,#0x6a
001af6  d10d              BNE      |L1.6932|
;;;3231   		{
;;;3232   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,7,1);
001af8  6868              LDR      r0,[r5,#4]  ; mess_data
001afa  b920              CBNZ     r0,|L1.6918|
001afc  69e0              LDR      r0,[r4,#0x1c]
001afe  f0400080          ORR      r0,r0,#0x80
001b02  61e0              STR      r0,[r4,#0x1c]
001b04  e013              B        |L1.6958|
                  |L1.6918|
;;;3233   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,7,1);
001b06  2801              CMP      r0,#1
001b08  d111              BNE      |L1.6958|
001b0a  69a0              LDR      r0,[r4,#0x18]
001b0c  f0400080          ORR      r0,r0,#0x80
001b10  61a0              STR      r0,[r4,#0x18]
001b12  e00c              B        |L1.6958|
                  |L1.6932|
;;;3234   	     }
;;;3235   	else 
;;;3236   		{
;;;3237   		if(!(avar_ind_stat&0x000007f8)) SET_REG(LPC_GPIO0->FIOCLR,1,7,1);
001b14  6830              LDR      r0,[r6,#0]  ; avar_ind_stat
001b16  f4106fff          TST      r0,#0x7f8
001b1a  d104              BNE      |L1.6950|
001b1c  69e0              LDR      r0,[r4,#0x1c]
001b1e  f0400080          ORR      r0,r0,#0x80
001b22  61e0              STR      r0,[r4,#0x1c]
001b24  e003              B        |L1.6958|
                  |L1.6950|
;;;3238   	     else SET_REG(LPC_GPIO0->FIOSET,1,7,1);
001b26  69a0              LDR      r0,[r4,#0x18]
001b28  f0400080          ORR      r0,r0,#0x80
001b2c  61a0              STR      r0,[r4,#0x18]
                  |L1.6958|
;;;3239   		}
;;;3240   	//  
;;;3241   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BPS))
001b2e  20d2              MOVS     r0,#0xd2
001b30  f7fffffe          BL       mess_find_unvol
001b34  b188              CBZ      r0,|L1.7002|
001b36  6828              LDR      r0,[r5,#0]  ; mess_data
001b38  286a              CMP      r0,#0x6a
001b3a  d10e              BNE      |L1.7002|
;;;3242   		{
;;;3243   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
001b3c  6868              LDR      r0,[r5,#4]  ; mess_data
001b3e  b920              CBNZ     r0,|L1.6986|
001b40  69e0              LDR      r0,[r4,#0x1c]
001b42  f0400020          ORR      r0,r0,#0x20
001b46  61e0              STR      r0,[r4,#0x1c]
001b48  e0c2              B        |L1.7376|
                  |L1.6986|
;;;3244   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
001b4a  2801              CMP      r0,#1
001b4c  d184              BNE      |L1.6744|
001b4e  69a0              LDR      r0,[r4,#0x18]
001b50  f0400020          ORR      r0,r0,#0x20
001b54  61a0              STR      r0,[r4,#0x18]
001b56  e0bb              B        |L1.7376|
                  |L1.7000|
001b58  e00d              B        |L1.7030|
                  |L1.7002|
;;;3245        	}
;;;3246   	else 
;;;3247   		{
;;;3248   		if(!(avar_ind_stat&0x000007f8)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
001b5a  6830              LDR      r0,[r6,#0]  ; avar_ind_stat
001b5c  f4106fff          TST      r0,#0x7f8
001b60  d104              BNE      |L1.7020|
001b62  69e0              LDR      r0,[r4,#0x1c]
001b64  f0400020          ORR      r0,r0,#0x20
001b68  61e0              STR      r0,[r4,#0x1c]
001b6a  e0b1              B        |L1.7376|
                  |L1.7020|
;;;3249        	else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
001b6c  69a0              LDR      r0,[r4,#0x18]
001b6e  f0400020          ORR      r0,r0,#0x20
001b72  61a0              STR      r0,[r4,#0x18]
001b74  e0ac              B        |L1.7376|
                  |L1.7030|
;;;3250   		} 
;;;3251   	}
;;;3252   else	if(AUSW_MAIN==22033)
001b76  f5a041ac          SUB      r1,r0,#0x5600
001b7a  3911              SUBS     r1,r1,#0x11
001b7c  d161              BNE      |L1.7234|
;;;3253   	{
;;;3254   	#ifndef UKU2071x 
;;;3255   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_NET))
;;;3256   		{
;;;3257   		if(mess_data[1]==0) SET_REG(LPC_GPIO3->FIOSET,1,25,1);
;;;3258   		else SET_REG(LPC_GPIO3->FIOCLR,1,25,1);
;;;3259   		}
;;;3260   	else	if(!(avar_ind_stat&0x00000001)) SET_REG(LPC_GPIO3->FIOSET,1,25,1);
;;;3261   	else SET_REG(LPC_GPIO3->FIOCLR,1,25,1);
;;;3262   	#endif
;;;3263   	#ifdef UKU2071x 
;;;3264   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_NET))
001b7e  20d2              MOVS     r0,#0xd2
001b80  f7fffffe          BL       mess_find_unvol
001b84  b170              CBZ      r0,|L1.7076|
001b86  6828              LDR      r0,[r5,#0]  ; mess_data
001b88  2866              CMP      r0,#0x66
001b8a  d10b              BNE      |L1.7076|
;;;3265   		{
;;;3266   		if(mess_data[1]==0) SET_REG(LPC_GPIO3->FIOCLR,1,25,1);
001b8c  6868              LDR      r0,[r5,#4]  ; mess_data
001b8e  b920              CBNZ     r0,|L1.7066|
001b90  6fe0              LDR      r0,[r4,#0x7c]
001b92  f0407000          ORR      r0,r0,#0x2000000
001b96  67e0              STR      r0,[r4,#0x7c]
001b98  e010              B        |L1.7100|
                  |L1.7066|
;;;3267   		else SET_REG(LPC_GPIO3->FIOSET,1,25,1);
001b9a  6fa0              LDR      r0,[r4,#0x78]
001b9c  f0407000          ORR      r0,r0,#0x2000000
001ba0  67a0              STR      r0,[r4,#0x78]
001ba2  e00b              B        |L1.7100|
                  |L1.7076|
;;;3268   		}
;;;3269   	else	if(!(avar_ind_stat&0x00000001)) SET_REG(LPC_GPIO3->FIOCLR,1,25,1);
001ba4  6830              LDR      r0,[r6,#0]  ; avar_ind_stat
001ba6  07c0              LSLS     r0,r0,#31
001ba8  d104              BNE      |L1.7092|
001baa  6fe0              LDR      r0,[r4,#0x7c]
001bac  f0407000          ORR      r0,r0,#0x2000000
001bb0  67e0              STR      r0,[r4,#0x7c]
001bb2  e003              B        |L1.7100|
                  |L1.7092|
;;;3270   	else SET_REG(LPC_GPIO3->FIOSET,1,25,1);
001bb4  6fa0              LDR      r0,[r4,#0x78]
001bb6  f0407000          ORR      r0,r0,#0x2000000
001bba  67a0              STR      r0,[r4,#0x78]
                  |L1.7100|
;;;3271   	#endif
;;;3272   	
;;;3273   	
;;;3274   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BPS))
001bbc  20d2              MOVS     r0,#0xd2
001bbe  f7fffffe          BL       mess_find_unvol
001bc2  b180              CBZ      r0,|L1.7142|
001bc4  6828              LDR      r0,[r5,#0]  ; mess_data
001bc6  286a              CMP      r0,#0x6a
001bc8  d10d              BNE      |L1.7142|
;;;3275   		{
;;;3276   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,7,1);
001bca  6868              LDR      r0,[r5,#4]  ; mess_data
001bcc  b920              CBNZ     r0,|L1.7128|
001bce  69e0              LDR      r0,[r4,#0x1c]
001bd0  f0400080          ORR      r0,r0,#0x80
001bd4  61e0              STR      r0,[r4,#0x1c]
001bd6  e013              B        |L1.7168|
                  |L1.7128|
;;;3277   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,7,1);
001bd8  2801              CMP      r0,#1
001bda  d111              BNE      |L1.7168|
001bdc  69a0              LDR      r0,[r4,#0x18]
001bde  f0400080          ORR      r0,r0,#0x80
001be2  61a0              STR      r0,[r4,#0x18]
001be4  e00c              B        |L1.7168|
                  |L1.7142|
;;;3278   	     }
;;;3279   	else 
;;;3280   		{
;;;3281   		if(!(avar_ind_stat&0x000007f8)) SET_REG(LPC_GPIO0->FIOCLR,1,7,1);
001be6  6830              LDR      r0,[r6,#0]  ; avar_ind_stat
001be8  f4106fff          TST      r0,#0x7f8
001bec  d104              BNE      |L1.7160|
001bee  69e0              LDR      r0,[r4,#0x1c]
001bf0  f0400080          ORR      r0,r0,#0x80
001bf4  61e0              STR      r0,[r4,#0x1c]
001bf6  e003              B        |L1.7168|
                  |L1.7160|
;;;3282   	     else SET_REG(LPC_GPIO0->FIOSET,1,7,1);
001bf8  69a0              LDR      r0,[r4,#0x18]
001bfa  f0400080          ORR      r0,r0,#0x80
001bfe  61a0              STR      r0,[r4,#0x18]
                  |L1.7168|
;;;3283   		} 
;;;3284   
;;;3285   	//  
;;;3286   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BAT))
001c00  20d2              MOVS     r0,#0xd2
001c02  f7fffffe          BL       mess_find_unvol
001c06  b180              CBZ      r0,|L1.7210|
001c08  6828              LDR      r0,[r5,#0]  ; mess_data
001c0a  2867              CMP      r0,#0x67
001c0c  d10d              BNE      |L1.7210|
;;;3287   		{
;;;3288   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,4,1);
001c0e  6868              LDR      r0,[r5,#4]  ; mess_data
001c10  b920              CBNZ     r0,|L1.7196|
001c12  69e0              LDR      r0,[r4,#0x1c]
001c14  f0400010          ORR      r0,r0,#0x10
001c18  61e0              STR      r0,[r4,#0x1c]
001c1a  e059              B        |L1.7376|
                  |L1.7196|
;;;3289   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,4,1);
001c1c  2801              CMP      r0,#1
001c1e  d157              BNE      |L1.7376|
001c20  69a0              LDR      r0,[r4,#0x18]
001c22  f0400010          ORR      r0,r0,#0x10
001c26  61a0              STR      r0,[r4,#0x18]
001c28  e052              B        |L1.7376|
                  |L1.7210|
;;;3290        	}
;;;3291   	else 
;;;3292   		{
;;;3293   		if(!(ips_bat_av_stat)) SET_REG(LPC_GPIO0->FIOCLR,1,4,1);
001c2a  7838              LDRB     r0,[r7,#0]  ; ips_bat_av_stat
001c2c  b920              CBNZ     r0,|L1.7224|
001c2e  69e0              LDR      r0,[r4,#0x1c]
001c30  f0400010          ORR      r0,r0,#0x10
001c34  61e0              STR      r0,[r4,#0x1c]
001c36  e04b              B        |L1.7376|
                  |L1.7224|
;;;3294        	else SET_REG(LPC_GPIO0->FIOSET,1,4,1);
001c38  69a0              LDR      r0,[r4,#0x18]
001c3a  f0400010          ORR      r0,r0,#0x10
001c3e  61a0              STR      r0,[r4,#0x18]
001c40  e046              B        |L1.7376|
                  |L1.7234|
;;;3295   		} 
;;;3296   	} 	 
;;;3297   else	
;;;3298   	{
;;;3299   	//         .    
;;;3300   	#ifndef UKU2071x 
;;;3301   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_NET))
;;;3302   		{
;;;3303   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;3304   		else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_NET,1);
;;;3305   		}
;;;3306   	else	if(!(avar_ind_stat&0x00000001)) SET_REG(LPC_GPIO1->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;3307   	else SET_REG(LPC_GPIO3->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;3308   	#endif
;;;3309   	#ifdef UKU2071x 
;;;3310   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_NET))
001c42  20d2              MOVS     r0,#0xd2
001c44  f7fffffe          BL       mess_find_unvol
001c48  b170              CBZ      r0,|L1.7272|
001c4a  6828              LDR      r0,[r5,#0]  ; mess_data
001c4c  2866              CMP      r0,#0x66
001c4e  d10b              BNE      |L1.7272|
;;;3311   		{
;;;3312   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_NET,1);
001c50  6868              LDR      r0,[r5,#4]  ; mess_data
001c52  b920              CBNZ     r0,|L1.7262|
001c54  69a0              LDR      r0,[r4,#0x18]
001c56  f0407000          ORR      r0,r0,#0x2000000
001c5a  61a0              STR      r0,[r4,#0x18]
001c5c  e016              B        |L1.7308|
                  |L1.7262|
;;;3313   		else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_NET,1);
001c5e  69e0              LDR      r0,[r4,#0x1c]
001c60  f0407000          ORR      r0,r0,#0x2000000
001c64  61e0              STR      r0,[r4,#0x1c]
001c66  e011              B        |L1.7308|
                  |L1.7272|
;;;3314   		}
;;;3315   	else	if(!(avar_ind_stat&0x00000001)) SET_REG(LPC_GPIO1->FIOSET,1,SHIFT_REL_AV_NET,1);
001c68  6830              LDR      r0,[r6,#0]  ; avar_ind_stat
001c6a  07c0              LSLS     r0,r0,#31
001c6c  d10a              BNE      |L1.7300|
001c6e  6ba0              LDR      r0,[r4,#0x38]
001c70  f0407000          ORR      r0,r0,#0x2000000
001c74  63a0              STR      r0,[r4,#0x38]
001c76  e009              B        |L1.7308|
                  |L1.7288|
                          DCD      avar_ind_stat
                  |L1.7292|
                          DCD      AUSW_MAIN
                  |L1.7296|
                          DCD      ips_bat_av_stat
                  |L1.7300|
;;;3316   	else SET_REG(LPC_GPIO3->FIOSET,1,SHIFT_REL_AV_NET,1);
001c84  6fa0              LDR      r0,[r4,#0x78]
001c86  f0407000          ORR      r0,r0,#0x2000000
001c8a  67a0              STR      r0,[r4,#0x78]
                  |L1.7308|
;;;3317   	#endif
;;;3318   
;;;3319   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_BPS))
001c8c  20d2              MOVS     r0,#0xd2
001c8e  f7fffffe          BL       mess_find_unvol
001c92  b180              CBZ      r0,|L1.7350|
001c94  6828              LDR      r0,[r5,#0]  ; mess_data
001c96  286a              CMP      r0,#0x6a
001c98  d10d              BNE      |L1.7350|
;;;3320   		{
;;;3321   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
001c9a  6868              LDR      r0,[r5,#4]  ; mess_data
001c9c  b920              CBNZ     r0,|L1.7336|
001c9e  69e0              LDR      r0,[r4,#0x1c]
001ca0  f0400020          ORR      r0,r0,#0x20
001ca4  61e0              STR      r0,[r4,#0x1c]
001ca6  e013              B        |L1.7376|
                  |L1.7336|
;;;3322   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
001ca8  2801              CMP      r0,#1
001caa  d111              BNE      |L1.7376|
001cac  69a0              LDR      r0,[r4,#0x18]
001cae  f0400020          ORR      r0,r0,#0x20
001cb2  61a0              STR      r0,[r4,#0x18]
001cb4  e00c              B        |L1.7376|
                  |L1.7350|
;;;3323        	}
;;;3324   	else 
;;;3325   		{
;;;3326   		if(!(avar_ind_stat&0x000007f8)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_BPS,1);
001cb6  6830              LDR      r0,[r6,#0]  ; avar_ind_stat
001cb8  f4106fff          TST      r0,#0x7f8
001cbc  d104              BNE      |L1.7368|
001cbe  69e0              LDR      r0,[r4,#0x1c]
001cc0  f0400020          ORR      r0,r0,#0x20
001cc4  61e0              STR      r0,[r4,#0x1c]
001cc6  e003              B        |L1.7376|
                  |L1.7368|
;;;3327        	else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_BPS,1);
001cc8  69a0              LDR      r0,[r4,#0x18]
001cca  f0400020          ORR      r0,r0,#0x20
001cce  61a0              STR      r0,[r4,#0x18]
                  |L1.7376|
;;;3328   		}
;;;3329   	}
;;;3330   //   
;;;3331   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_EXT))	 
001cd0  20d2              MOVS     r0,#0xd2
001cd2  f7fffffe          BL       mess_find_unvol
001cd6  b180              CBZ      r0,|L1.7418|
001cd8  6828              LDR      r0,[r5,#0]  ; mess_data
001cda  2871              CMP      r0,#0x71
001cdc  d10d              BNE      |L1.7418|
;;;3332   	{
;;;3333   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,9,1);
001cde  6868              LDR      r0,[r5,#4]  ; mess_data
001ce0  b920              CBNZ     r0,|L1.7404|
001ce2  69e0              LDR      r0,[r4,#0x1c]
001ce4  f4407000          ORR      r0,r0,#0x200
001ce8  61e0              STR      r0,[r4,#0x1c]
                  |L1.7402|
;;;3334   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,9,1);
;;;3335   	}
;;;3336   else 
;;;3337   	{
;;;3338   	if(!speedChIsOn) SET_REG(LPC_GPIO0->FIOCLR,1,9,1);
;;;3339   	else SET_REG(LPC_GPIO0->FIOSET,1,9,1);
;;;3340   	} 	
;;;3341   #endif
;;;3342   
;;;3343   #ifdef UKU_KONTUR
;;;3344   
;;;3345   //  
;;;3346   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_COMM))
;;;3347   	{
;;;3348   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_COMM,1);
;;;3349   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_COMM,1);
;;;3350   	}
;;;3351   else 
;;;3352   	{
;;;3353        if(  (!(avar_ind_stat&0x00007fff)) &&
;;;3354             ((!SK_REL_EN[0]) || (sk_av_stat[0]!=sasON))  &&
;;;3355             ((!SK_REL_EN[1]) || (sk_av_stat[1]!=sasON))  &&
;;;3356             ((!SK_REL_EN[2]) || (sk_av_stat[2]!=sasON))  /*&&
;;;3357             ((!SK_REL_EN[3]) || (sk_av_stat[3]!=sasON))*/  )SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_COMM,1);
;;;3358        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_COMM,1);
;;;3359   	}
;;;3360   
;;;3361   	
;;;3362   //rel_warm_plazma=0;
;;;3363   //    
;;;3364   /*
;;;3365   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_WARM))
;;;3366   	{
;;;3367   	if(mess_data[1]==0)
;;;3368   		{
;;;3369   		SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_WARM,1);
;;;3370   		rel_warm_plazma=1;
;;;3371   		}
;;;3372   	else if(mess_data[1]==1) 
;;;3373   		{
;;;3374   		SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_WARM,1);
;;;3375   		rel_warm_plazma=2;
;;;3376   		}
;;;3377        }
;;;3378   else 
;;;3379   	{
;;;3380   	if(warm_stat_k==wsOFF) 
;;;3381   		{
;;;3382   		SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_WARM,1);
;;;3383   		rel_warm_plazma=3;
;;;3384   		}
;;;3385        else 
;;;3386   		{
;;;3387   		SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_WARM,1);
;;;3388   		rel_warm_plazma=4;
;;;3389   		}
;;;3390   	}
;;;3391   */
;;;3392   // 
;;;3393   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_LIGHT))
;;;3394   	{
;;;3395   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LIGHT,1);
;;;3396   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LIGHT,1);
;;;3397        }
;;;3398   else 
;;;3399   	{
;;;3400   	if(sk_av_stat[0]!=sasON) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LIGHT,1);
;;;3401        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LIGHT,1);
;;;3402   	}
;;;3403   
;;;3404   
;;;3405   
;;;3406   //  
;;;3407   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_LOAD_OFF))
;;;3408   	{
;;;3409   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LOAD_OFF,1);
;;;3410   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LOAD_OFF,1);
;;;3411        }
;;;3412   else if(tloaddisable_cmnd==0)
;;;3413   	{
;;;3414   	SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LOAD_OFF,1);
;;;3415   	}
;;;3416   else if((tloaddisable_cmnd)&&(tloaddisable_cmnd<=11))
;;;3417   	{
;;;3418   	SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LOAD_OFF,1);
;;;3419   	}
;;;3420   
;;;3421   else 
;;;3422   	{
;;;3423   	if(!(tloaddisable_stat==tldsON)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LOAD_OFF,1);
;;;3424        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LOAD_OFF,1);
;;;3425   	} 
;;;3426   
;;;3427   //    
;;;3428   if(RELE_LOG)
;;;3429   	{
;;;3430   	if((mess_find_unvol(MESS2RELE_HNDL))&&(mess_data[0]==PARAM_RELE_VENT_WARM))
;;;3431   		{
;;;3432   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT_WARM,1);
;;;3433   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT_WARM,1);
;;;3434   		}
;;;3435   	else 
;;;3436   		{
;;;3437   		if(warm_stat_k==wsOFF) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT_WARM,1);
;;;3438   	     else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT_WARM,1);
;;;3439   		} 
;;;3440   
;;;3441   	}
;;;3442   else 
;;;3443   	{
;;;3444   	if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_VENT_WARM))
;;;3445   		{
;;;3446   		if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT_WARM,1);
;;;3447   		else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT_WARM,1);
;;;3448   		}
;;;3449   	else 
;;;3450   		{
;;;3451   		if(vent_stat_k==vsOFF) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT_WARM,1);
;;;3452   	     else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT_WARM,1);
;;;3453   		} 
;;;3454   	}
;;;3455   #endif
;;;3456   
;;;3457   
;;;3458   #ifdef UKU_TELECORE2015
;;;3459   //  
;;;3460   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_AV_NET))
;;;3461   	{
;;;3462   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;3463   	else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_NET,1);
;;;3464   	}
;;;3465   else	if(!(avar_ind_stat&0x00000001)) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_AV_NET,1);
;;;3466   else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_AV_NET,1);
;;;3467   
;;;3468   
;;;3469   // 
;;;3470   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_LIGHT))
;;;3471   	{
;;;3472   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LIGHT,1);
;;;3473   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LIGHT,1);
;;;3474        }
;;;3475   else 
;;;3476   	{
;;;3477   	if(sk_av_stat[0]!=sasON) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_LIGHT,1);
;;;3478        else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_LIGHT,1);
;;;3479   	}
;;;3480   
;;;3481   // 
;;;3482   if((mess_find_unvol(MESS2RELE_HNDL))&&(mess_data[0]==PARAM_RELE_WARM))
;;;3483   	{
;;;3484   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_WARM,1);
;;;3485   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_WARM,1);
;;;3486   	}
;;;3487   else 
;;;3488   	{
;;;3489   	if(warm_stat_k==wsOFF) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_WARM,1);
;;;3490        else SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_WARM,1);
;;;3491   	} 
;;;3492   // 
;;;3493   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_VENT))
;;;3494   	{
;;;3495   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT,1);
;;;3496   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;3497   	}
;;;3498   else 
;;;3499   	{
;;;3500   	if(vent_stat_k==vsOFF) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VENT,1);
;;;3501        else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VENT,1);
;;;3502   	} 
;;;3503   
;;;3504   //  
;;;3505   if((mess_find_unvol(MESS2RELE_HNDL))&&	(mess_data[0]==PARAM_RELE_VVENT))
;;;3506   	{
;;;3507   	if(mess_data[1]==0) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VVENT,1);
;;;3508   	else if(mess_data[1]==1) SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VVENT,1);
;;;3509   	}
;;;3510   else 
;;;3511   	{
;;;3512   	if(vvent_stat_k==vsOFF) SET_REG(LPC_GPIO0->FIOSET,1,SHIFT_REL_VVENT,1);
;;;3513        else SET_REG(LPC_GPIO0->FIOCLR,1,SHIFT_REL_VVENT,1);
;;;3514   	} 
;;;3515   
;;;3516   #endif
;;;3517   
;;;3518   }
001cea  e4b4              B        |L1.5718|
                  |L1.7404|
001cec  2801              CMP      r0,#1                 ;3334
001cee  d1fc              BNE      |L1.7402|
001cf0  69a0              LDR      r0,[r4,#0x18]         ;3334
001cf2  f4407000          ORR      r0,r0,#0x200          ;3334
001cf6  61a0              STR      r0,[r4,#0x18]         ;3334
001cf8  e4ad              B        |L1.5718|
                  |L1.7418|
001cfa  48fd              LDR      r0,|L1.8432|
001cfc  8800              LDRH     r0,[r0,#0]            ;3338  ; speedChIsOn
001cfe  b920              CBNZ     r0,|L1.7434|
001d00  69e0              LDR      r0,[r4,#0x1c]         ;3338
001d02  f4407000          ORR      r0,r0,#0x200          ;3338
001d06  61e0              STR      r0,[r4,#0x1c]         ;3338
001d08  e4a5              B        |L1.5718|
                  |L1.7434|
001d0a  69a0              LDR      r0,[r4,#0x18]         ;3339
001d0c  f4407000          ORR      r0,r0,#0x200          ;3339
001d10  61a0              STR      r0,[r4,#0x18]         ;3339
001d12  e4a0              B        |L1.5718|
;;;3519   
                          ENDP

                  bps_hndl PROC
;;;3520   //-----------------------------------------------
;;;3521   void bps_hndl(void)
001d14  e92d5ff0          PUSH     {r4-r12,lr}
;;;3522   {
;;;3523   char ptr__,i;
;;;3524   
;;;3525   if(sh_cnt0<10)
001d18  4ef6              LDR      r6,|L1.8436|
;;;3526   	{
;;;3527   	sh_cnt0++;
;;;3528   	if(sh_cnt0>=10)
;;;3529   		{
;;;3530   		sh_cnt0=0;
001d1a  2700              MOVS     r7,#0
001d1c  7c70              LDRB     r0,[r6,#0x11]         ;3525  ; sh_cnt0
;;;3531   		b1Hz_sh=1;
001d1e  f04f0a01          MOV      r10,#1
001d22  280a              CMP      r0,#0xa               ;3525
001d24  d207              BCS      |L1.7478|
001d26  1c40              ADDS     r0,r0,#1              ;3527
001d28  b2c0              UXTB     r0,r0                 ;3527
001d2a  7470              STRB     r0,[r6,#0x11]         ;3527
001d2c  280a              CMP      r0,#0xa               ;3528
001d2e  d302              BCC      |L1.7478|
001d30  7477              STRB     r7,[r6,#0x11]         ;3530
001d32  f886a012          STRB     r10,[r6,#0x12]
                  |L1.7478|
;;;3532   		}
;;;3533   	}
;;;3534   
;;;3535   /*if(sh_cnt1<5)
;;;3536   	{
;;;3537   	sh_cnt1++;
;;;3538   	if(sh_cnt1==5)
;;;3539   		{
;;;3540   		sh_cnt1=0;
;;;3541   		b2Hz_sh=1;
;;;3542   		}
;;;3543   	} */
;;;3544   
;;;3545   
;;;3546   /*
;;;3547   if(mess_find(MESS_SRC_ON_OFF))
;;;3548   	{
;;;3549   	if(mess_data[0]==_MESS_SRC_MASK_BLOK_2SEC)
;;;3550   		{
;;;3551   		char i;
;;;3552   		for(i=0;i<NUMIST;i++)
;;;3553   			{
;;;3554   			if(mess_data[1]&(1<<i))src[i]._ist_blok_cnt=20;
;;;3555   			}
;;;3556   		
;;;3557   		}
;;;3558   	else if(mess_data[0]==_MESS_SRC_MASK_UNBLOK)
;;;3559   		{
;;;3560   		char i;
;;;3561   		for(i=0;i<NUMIST;i++)
;;;3562   			{
;;;3563   			if(mess_data[1]&(1<<i))src[i]._ist_blok_cnt=0;
;;;3564   			}
;;;3565   		
;;;3566   		}
;;;3567   	}
;;;3568   	
;;;3569   else if(mess_find(_MESS_SRC_MASK_ON))
;;;3570   	{				
;;;3571   	if(mess_data[0]==_MESS_SRC_MASK_ON)
;;;3572   		{
;;;3573   		char i;
;;;3574   		for(i=0;i<NUMIST;i++)
;;;3575   			{
;;;3576   			if(mess_data[1]&(1<<i))
;;;3577   				{
;;;3578   				src[i]._ist_blok_cnt=0;
;;;3579   				src[i]._flags_tu=2;
;;;3580   				}
;;;3581   			}
;;;3582   		
;;;3583   		}				
;;;3584   	}*/
;;;3585   
;;;3586   
;;;3587   
;;;3588   /*else*/ 
;;;3589   bps_on_mask=0;
001d36  f8a67044          STRH     r7,[r6,#0x44]
;;;3590   bps_off_mask=0;
001d3a  f8a67046          STRH     r7,[r6,#0x46]
;;;3591   
;;;3592   if(mess_find_unvol(MESS2BPS_HNDL))
001d3e  20cd              MOVS     r0,#0xcd
001d40  f7fffffe          BL       mess_find_unvol
;;;3593   	{
;;;3594   	if(mess_data[0]==PARAM_BPS_ALL_OFF_AFTER_2SEC)
;;;3595   		{
;;;3596   		bps_off_mask=0xffff;
;;;3597   		}
;;;3598   
;;;3599   	if(mess_data[0]==PARAM_BPS_MASK_OFF_AFTER_2SEC)
;;;3600   		{
;;;3601   		bps_off_mask=mess_data[1];
;;;3602   		}
;;;3603   
;;;3604   	if(mess_data[0]==PARAM_BPS_MASK_ON)
;;;3605   		{
;;;3606   		bps_on_mask=mess_data[1];
;;;3607   		}
;;;3608   
;;;3609   	if(mess_data[0]==PARAM_BPS_ALL_ON)
;;;3610   		{
;;;3611   		bps_on_mask=0xffff;
;;;3612   		}
;;;3613   
;;;3614   	if(mess_data[0]==PARAM_BPS_MASK_ON_OFF_AFTER_2SEC)
;;;3615   		{
;;;3616   		bps_on_mask=mess_data[1];
;;;3617   		bps_off_mask=~(mess_data[1]);
;;;3618   		}
;;;3619   
;;;3620   
;;;3621   	for(i=0;i<=NUMIST;i++)
;;;3622   		{
;;;3623   		if(bps_off_mask&(1<<i)) bps[i]._blok_cnt++;
001d44  f8df83b0          LDR      r8,|L1.8440|
001d48  f8dfb3b0          LDR      r11,|L1.8444|
001d4c  2800              CMP      r0,#0                 ;3592
001d4e  d059              BEQ      |L1.7684|
001d50  4beb              LDR      r3,|L1.8448|
001d52  f64f72ff          MOV      r2,#0xffff            ;3596
001d56  6818              LDR      r0,[r3,#0]            ;3594  ; mess_data
001d58  28ce              CMP      r0,#0xce              ;3594
001d5a  d101              BNE      |L1.7520|
001d5c  f8a62046          STRH     r2,[r6,#0x46]         ;3596
                  |L1.7520|
001d60  28cf              CMP      r0,#0xcf              ;3599
001d62  d102              BNE      |L1.7530|
001d64  6859              LDR      r1,[r3,#4]            ;3601  ; mess_data
001d66  f8a61046          STRH     r1,[r6,#0x46]         ;3601
                  |L1.7530|
001d6a  28d1              CMP      r0,#0xd1              ;3604
001d6c  d102              BNE      |L1.7540|
001d6e  6859              LDR      r1,[r3,#4]            ;3606  ; mess_data
001d70  f8a61044          STRH     r1,[r6,#0x44]         ;3606
                  |L1.7540|
001d74  28d2              CMP      r0,#0xd2              ;3609
001d76  d101              BNE      |L1.7548|
001d78  f8a62044          STRH     r2,[r6,#0x44]         ;3611
                  |L1.7548|
001d7c  28d0              CMP      r0,#0xd0              ;3614
001d7e  d105              BNE      |L1.7564|
001d80  6858              LDR      r0,[r3,#4]            ;3616  ; mess_data
001d82  f8a60044          STRH     r0,[r6,#0x44]         ;3616
001d86  43c0              MVNS     r0,r0                 ;3617
001d88  f8a60046          STRH     r0,[r6,#0x46]         ;3617
                  |L1.7564|
001d8c  2400              MOVS     r4,#0                 ;3621
001d8e  e034              B        |L1.7674|
                  |L1.7568|
001d90  f8b60046          LDRH     r0,[r6,#0x46]  ; bps_off_mask
001d94  fa0af904          LSL      r9,r10,r4
001d98  ea190f00          TST      r9,r0
001d9c  d00a              BEQ      |L1.7604|
001d9e  ebc400c4          RSB      r0,r4,r4,LSL #3
001da2  eb000040          ADD      r0,r0,r0,LSL #1
001da6  eb080080          ADD      r0,r8,r0,LSL #2
001daa  f8301f40          LDRH     r1,[r0,#0x40]!
001dae  1c49              ADDS     r1,r1,#1
001db0  8001              STRH     r1,[r0,#0]
001db2  e007              B        |L1.7620|
                  |L1.7604|
;;;3624   		else bps[i]._blok_cnt=0;
001db4  ebc400c4          RSB      r0,r4,r4,LSL #3
001db8  eb000040          ADD      r0,r0,r0,LSL #1
001dbc  eb080080          ADD      r0,r8,r0,LSL #2
001dc0  f8a07040          STRH     r7,[r0,#0x40]
                  |L1.7620|
;;;3625   		gran(&bps[i]._blok_cnt,0,50);
001dc4  ebc400c4          RSB      r0,r4,r4,LSL #3
001dc8  eb000040          ADD      r0,r0,r0,LSL #1
001dcc  eb080580          ADD      r5,r8,r0,LSL #2
001dd0  f1050040          ADD      r0,r5,#0x40
001dd4  2232              MOVS     r2,#0x32
001dd6  2100              MOVS     r1,#0
001dd8  f7fffffe          BL       gran
;;;3626   		if(bps[i]._blok_cnt>20) bps[i]._flags_tu=1;
001ddc  f9b50040          LDRSH    r0,[r5,#0x40]
001de0  2814              CMP      r0,#0x14
001de2  dd01              BLE      |L1.7656|
001de4  f885a02c          STRB     r10,[r5,#0x2c]
                  |L1.7656|
;;;3627   		if(bps_on_mask&(1<<i)) bps[i]._flags_tu=0;
001de8  f8b60044          LDRH     r0,[r6,#0x44]  ; bps_on_mask
001dec  ea190f00          TST      r9,r0
001df0  d001              BEQ      |L1.7670|
001df2  f885702c          STRB     r7,[r5,#0x2c]
                  |L1.7670|
001df6  1c64              ADDS     r4,r4,#1              ;3621
001df8  b2e4              UXTB     r4,r4                 ;3621
                  |L1.7674|
001dfa  f9bb0000          LDRSH    r0,[r11,#0]           ;3621  ; NUMIST
001dfe  4284              CMP      r4,r0                 ;3621
001e00  ddc6              BLE      |L1.7568|
001e02  e04f              B        |L1.7844|
                  |L1.7684|
;;;3628   	     }
;;;3629   
;;;3630   	
;;;3631   /*
;;;3632   
;;;3633   	if(bps_all_off_cnt>20)
;;;3634   		{
;;;3635   		for(i=0;i<=NUMIST;i++)
;;;3636   			{
;;;3637   	     	bps[i]._flags_tu=1;
;;;3638   	     	}
;;;3639   		}
;;;3640   	else if(bps_mask_off_cnt>20)
;;;3641   		{
;;;3642   		for(i=0;i<=NUMIST;i++)
;;;3643   			{
;;;3644   			if(mess_data[1]&(1<<i)) bps[i]._flags_tu=1;
;;;3645   	     	}
;;;3646   		}	
;;;3647   		
;;;3648   	else if(bps_mask_on_off_cnt>20)
;;;3649   		{
;;;3650   		for(i=0;i<=NUMIST;i++)
;;;3651   			{
;;;3652   			if(mess_data[1]&(1<<i)) bps[i]._flags_tu=1;
;;;3653   			else bps[i]._flags_tu=0;
;;;3654   	     	}
;;;3655   		}
;;;3656   		
;;;3657   	if(mess_data[0]==PARAM_BPS_MASK_ON)
;;;3658   		{
;;;3659   		for(i=0;i<=NUMIST;i++)
;;;3660   			{
;;;3661   			if(mess_data[1]&(1<<i)) bps[i]._flags_tu=0;
;;;3662   	     	}
;;;3663   		}
;;;3664   */										
;;;3665   	}
;;;3666   
;;;3667   
;;;3668   else if(b1Hz_sh)
001e04  7cb0              LDRB     r0,[r6,#0x12]  ; b1Hz_sh
001e06  b3f0              CBZ      r0,|L1.7814|
;;;3669   	{
;;;3670   	ptr__=0;
001e08  2400              MOVS     r4,#0
;;;3671        for(i=0;i<=NUMIST;i++)
001e0a  2100              MOVS     r1,#0
001e0c  f9bb0000          LDRSH    r0,[r11,#0]           ;3621
001e10  e009              B        |L1.7718|
                  |L1.7698|
;;;3672   		{
;;;3673   	     bps[i]._flags_tu=1;
001e12  ebc102c1          RSB      r2,r1,r1,LSL #3
001e16  eb020242          ADD      r2,r2,r2,LSL #1
001e1a  eb080282          ADD      r2,r8,r2,LSL #2
001e1e  f882a02c          STRB     r10,[r2,#0x2c]
001e22  1c49              ADDS     r1,r1,#1              ;3671
001e24  b2c9              UXTB     r1,r1                 ;3671
                  |L1.7718|
001e26  4281              CMP      r1,r0                 ;3671
001e28  ddf3              BLE      |L1.7698|
;;;3674   	     }	
;;;3675     	     
;;;3676     	for(i=0;(i<NUMIST)&&(ptr__<num_necc);i++)
001e2a  2100              MOVS     r1,#0
001e2c  e01e              B        |L1.7788|
                  |L1.7726|
;;;3677     		{
;;;3678   		char ii,iii;
;;;3679   
;;;3680   		ii=(char)NUMIST;
001e2e  b2c2              UXTB     r2,r0
;;;3681   		if(ii<0)ii=0;
;;;3682   		if(ii>32)ii=32;
001e30  2a20              CMP      r2,#0x20
001e32  d900              BLS      |L1.7734|
001e34  2220              MOVS     r2,#0x20
                  |L1.7734|
;;;3683   		iii=numOfForvardBps;
001e36  7e33              LDRB     r3,[r6,#0x18]  ; numOfForvardBps
;;;3684   		if(iii<0)iii=0;
;;;3685   		if(iii>=NUMIST)iii=0;
001e38  4283              CMP      r3,r0
001e3a  db00              BLT      |L1.7742|
001e3c  2300              MOVS     r3,#0
                  |L1.7742|
;;;3686   		iii+=i;
001e3e  440b              ADD      r3,r3,r1
001e40  b2db              UXTB     r3,r3
;;;3687   		iii=iii%ii;
001e42  fbb3f5f2          UDIV     r5,r3,r2
001e46  fb023215          MLS      r2,r2,r5,r3
;;;3688   		
;;;3689     	     if((bps[iii]._state==bsRDY)||(bps[iii]._state==bsWRK))
001e4a  ebc202c2          RSB      r2,r2,r2,LSL #3
001e4e  eb020242          ADD      r2,r2,r2,LSL #1
001e52  eb080382          ADD      r3,r8,r2,LSL #2
001e56  789a              LDRB     r2,[r3,#2]
001e58  2a02              CMP      r2,#2
001e5a  d001              BEQ      |L1.7776|
001e5c  2a01              CMP      r2,#1
001e5e  d103              BNE      |L1.7784|
                  |L1.7776|
;;;3690     	         	{
;;;3691     	         	bps[iii]._flags_tu=0;
001e60  f883702c          STRB     r7,[r3,#0x2c]
;;;3692     	         	ptr__++;
001e64  1c64              ADDS     r4,r4,#1
001e66  b2e4              UXTB     r4,r4
                  |L1.7784|
001e68  1c49              ADDS     r1,r1,#1              ;3676
001e6a  b2c9              UXTB     r1,r1                 ;3676
                  |L1.7788|
001e6c  4281              CMP      r1,r0                 ;3676
001e6e  da04              BGE      |L1.7802|
001e70  4aa4              LDR      r2,|L1.8452|
001e72  f9b22000          LDRSH    r2,[r2,#0]            ;3676  ; num_necc
001e76  4294              CMP      r4,r2                 ;3676
001e78  dbd9              BLT      |L1.7726|
                  |L1.7802|
;;;3693     	         	}
;;;3694     	     }
;;;3695   	if(main_1Hz_cnt<60)
001e7a  49a3              LDR      r1,|L1.8456|
001e7c  f9b11000          LDRSH    r1,[r1,#0]  ; main_1Hz_cnt
001e80  293c              CMP      r1,#0x3c
001e82  da0f              BGE      |L1.7844|
;;;3696   		{
;;;3697        	for(i=0;i<=NUMIST;i++)
001e84  e000              B        |L1.7816|
                  |L1.7814|
001e86  e00d              B        |L1.7844|
                  |L1.7816|
001e88  2100              MOVS     r1,#0
001e8a  e009              B        |L1.7840|
                  |L1.7820|
;;;3698   			{
;;;3699   	     	bps[i]._flags_tu=0;
001e8c  ebc102c1          RSB      r2,r1,r1,LSL #3
001e90  eb020242          ADD      r2,r2,r2,LSL #1
001e94  eb080282          ADD      r2,r8,r2,LSL #2
001e98  f882702c          STRB     r7,[r2,#0x2c]
001e9c  1c49              ADDS     r1,r1,#1              ;3697
001e9e  b2c9              UXTB     r1,r1                 ;3697
                  |L1.7840|
001ea0  4281              CMP      r1,r0                 ;3697
001ea2  ddf3              BLE      |L1.7820|
                  |L1.7844|
;;;3700   	     	}	
;;;3701   		}
;;;3702   	
;;;3703   		 
;;;3704     	}
;;;3705   
;;;3706   
;;;3707   for(i=0;i<NUMIST;i++)
001ea4  2000              MOVS     r0,#0
;;;3708        {
;;;3709        if(bps[i]._ist_blok_host_cnt!=0)
;;;3710             {
;;;3711             bps[i]._flags_tu=99;
001ea6  2463              MOVS     r4,#0x63
001ea8  f9bb3000          LDRSH    r3,[r11,#0]           ;3621
001eac  e00d              B        |L1.7882|
                  |L1.7854|
001eae  ebc001c0          RSB      r1,r0,r0,LSL #3       ;3709
001eb2  eb010141          ADD      r1,r1,r1,LSL #1       ;3709
001eb6  eb080181          ADD      r1,r8,r1,LSL #2       ;3709
001eba  6bca              LDR      r2,[r1,#0x3c]         ;3709
001ebc  b11a              CBZ      r2,|L1.7878|
001ebe  f881402c          STRB     r4,[r1,#0x2c]
;;;3712   	     bps[i]._ist_blok_host_cnt--;
001ec2  1e52              SUBS     r2,r2,#1
001ec4  63ca              STR      r2,[r1,#0x3c]
                  |L1.7878|
001ec6  1c40              ADDS     r0,r0,#1              ;3707
001ec8  b2c0              UXTB     r0,r0                 ;3707
                  |L1.7882|
001eca  4298              CMP      r0,r3                 ;3707
001ecc  dbef              BLT      |L1.7854|
;;;3713             }
;;;3714        }
;;;3715   
;;;3716   
;;;3717   
;;;3718   
;;;3719   b1Hz_sh=0;
001ece  74b7              STRB     r7,[r6,#0x12]
;;;3720   
;;;3721   
;;;3722   num_of_wrks_bps=0;
001ed0  73b7              STRB     r7,[r6,#0xe]
;;;3723   for(i=0;i<NUMIST;i++)
001ed2  2000              MOVS     r0,#0
001ed4  e00d              B        |L1.7922|
                  |L1.7894|
;;;3724   	{
;;;3725   	if(bps[i]._state==bsWRK)num_of_wrks_bps++;
001ed6  ebc001c0          RSB      r1,r0,r0,LSL #3
001eda  eb010141          ADD      r1,r1,r1,LSL #1
001ede  eb080181          ADD      r1,r8,r1,LSL #2
001ee2  7889              LDRB     r1,[r1,#2]
001ee4  2901              CMP      r1,#1
001ee6  d102              BNE      |L1.7918|
001ee8  7bb1              LDRB     r1,[r6,#0xe]  ; num_of_wrks_bps
001eea  1c49              ADDS     r1,r1,#1
001eec  73b1              STRB     r1,[r6,#0xe]
                  |L1.7918|
001eee  1c40              ADDS     r0,r0,#1              ;3723
001ef0  b2c0              UXTB     r0,r0                 ;3723
                  |L1.7922|
001ef2  4298              CMP      r0,r3                 ;3723
001ef4  dbef              BLT      |L1.7894|
;;;3726   	}
;;;3727   
;;;3728   
;;;3729   }
001ef6  e8bd9ff0          POP      {r4-r12,pc}
;;;3730   
                          ENDP

                  powerAntiAliasingHndl PROC
;;;3737   //-----------------------------------------------
;;;3738   void powerAntiAliasingHndl(void)
001efa  b570              PUSH     {r4-r6,lr}
;;;3739   {
;;;3740   if((power_summary_tempo/10UL)==(power_summary_tempo_old/10UL))
001efc  230a              MOVS     r3,#0xa
001efe  4c84              LDR      r4,|L1.8464|
001f00  4882              LDR      r0,|L1.8460|
001f02  6822              LDR      r2,[r4,#0]  ; power_summary_tempo_old
001f04  6800              LDR      r0,[r0,#0]  ; power_summary_tempo
001f06  fbb2f6f3          UDIV     r6,r2,r3
001f0a  fbb0f1f3          UDIV     r1,r0,r3
;;;3741   	{
;;;3742   	if(powerSummaryCnt<15)powerSummaryCnt++;
001f0e  4a81              LDR      r2,|L1.8468|
;;;3743   	if(powerSummaryCnt>=10)
;;;3744   		{
;;;3745   		power_summary=power_summary_tempo;
;;;3746   		}
;;;3747   	}
;;;3748   else powerSummaryCnt=0;
001f10  2500              MOVS     r5,#0
001f12  42b1              CMP      r1,r6                 ;3740
001f14  d10a              BNE      |L1.7980|
001f16  7811              LDRB     r1,[r2,#0]            ;3742  ; powerSummaryCnt
001f18  290f              CMP      r1,#0xf               ;3742
001f1a  d201              BCS      |L1.7968|
001f1c  1c49              ADDS     r1,r1,#1              ;3742
001f1e  7011              STRB     r1,[r2,#0]            ;3742
                  |L1.7968|
001f20  7811              LDRB     r1,[r2,#0]            ;3743  ; powerSummaryCnt
001f22  290a              CMP      r1,#0xa               ;3743
001f24  d303              BCC      |L1.7982|
001f26  497c              LDR      r1,|L1.8472|
001f28  6008              STR      r0,[r1,#0]            ;3745  ; power_summary
001f2a  e000              B        |L1.7982|
                  |L1.7980|
001f2c  7015              STRB     r5,[r2,#0]
                  |L1.7982|
;;;3749   power_summary_tempo_old=power_summary_tempo;
001f2e  6020              STR      r0,[r4,#0]  ; power_summary_tempo_old
;;;3750   
;;;3751   if((power_current_tempo/10UL)==(power_current_tempo_old/10UL))
001f30  487a              LDR      r0,|L1.8476|
001f32  4c7b              LDR      r4,|L1.8480|
001f34  f9b00000          LDRSH    r0,[r0,#0]  ; power_current_tempo
001f38  f9b42000          LDRSH    r2,[r4,#0]  ; power_current_tempo_old
001f3c  fbb0f1f3          UDIV     r1,r0,r3
001f40  fbb2f3f3          UDIV     r3,r2,r3
;;;3752   	{
;;;3753   	if(powerCurrentCnt<15)powerCurrentCnt++;
001f44  4a77              LDR      r2,|L1.8484|
001f46  4299              CMP      r1,r3                 ;3751
001f48  d10a              BNE      |L1.8032|
001f4a  7811              LDRB     r1,[r2,#0]  ; powerCurrentCnt
001f4c  290f              CMP      r1,#0xf
001f4e  d201              BCS      |L1.8020|
001f50  1c49              ADDS     r1,r1,#1
001f52  7011              STRB     r1,[r2,#0]
                  |L1.8020|
;;;3754   	if(powerCurrentCnt>=10)
001f54  7811              LDRB     r1,[r2,#0]  ; powerCurrentCnt
001f56  290a              CMP      r1,#0xa
001f58  d303              BCC      |L1.8034|
;;;3755   		{
;;;3756   		power_current=power_current_tempo;
001f5a  4973              LDR      r1,|L1.8488|
001f5c  8008              STRH     r0,[r1,#0]
001f5e  e000              B        |L1.8034|
                  |L1.8032|
;;;3757   		}
;;;3758   	}
;;;3759   else powerCurrentCnt=0;
001f60  7015              STRB     r5,[r2,#0]
                  |L1.8034|
;;;3760   power_current_tempo_old=power_current_tempo;
001f62  8020              STRH     r0,[r4,#0]
;;;3761   }
001f64  bd70              POP      {r4-r6,pc}
;;;3762   
                          ENDP

                  bps_drv PROC
;;;3845   //-----------------------------------------------
;;;3846   void bps_drv(char in)
001f66  e92d41f0          PUSH     {r4-r8,lr}
;;;3847   {
001f6a  4606              MOV      r6,r0
;;;3848   char temp;
;;;3849   
;;;3850   if (bps[in]._device!=dSRC) return;
001f6c  ebc600c6          RSB      r0,r6,r6,LSL #3
001f70  4961              LDR      r1,|L1.8440|
001f72  eb000040          ADD      r0,r0,r0,LSL #1
001f76  f8112020          LDRB     r2,[r1,r0,LSL #2]
001f7a  2a03              CMP      r2,#3
001f7c  d173              BNE      |L1.8294|
;;;3851   temp=bps[in]._flags_tm;
001f7e  eb010480          ADD      r4,r1,r0,LSL #2
001f82  f8945042          LDRB     r5,[r4,#0x42]
;;;3852   if(temp&(1<<AV_T))
001f86  07a8              LSLS     r0,r5,#30
001f88  d516              BPL      |L1.8120|
;;;3853   	{
;;;3854   	if(bps[in]._temp_av_cnt<1200) 
001f8a  f9b40046          LDRSH    r0,[r4,#0x46]
001f8e  f44f6196          MOV      r1,#0x4b0
001f92  4288              CMP      r0,r1
001f94  da20              BGE      |L1.8152|
;;;3855   		{
;;;3856   		bps[in]._temp_av_cnt++;
001f96  1c40              ADDS     r0,r0,#1
001f98  b200              SXTH     r0,r0
001f9a  f8a40046          STRH     r0,[r4,#0x46]
;;;3857   		if(bps[in]._temp_av_cnt>=1200)
001f9e  4288              CMP      r0,r1
001fa0  db1a              BLT      |L1.8152|
;;;3858   			{
;;;3859   			bps[in]._temp_av_cnt=1200;
001fa2  f8a41046          STRH     r1,[r4,#0x46]
;;;3860   		   	if(!(bps[in]._av&(1<<0)))avar_bps_hndl(in,0,1);
001fa6  7860              LDRB     r0,[r4,#1]
001fa8  07c0              LSLS     r0,r0,#31
001faa  d115              BNE      |L1.8152|
001fac  2201              MOVS     r2,#1
001fae  2100              MOVS     r1,#0
001fb0  4630              MOV      r0,r6
001fb2  f7fffffe          BL       avar_bps_hndl
001fb6  e00f              B        |L1.8152|
                  |L1.8120|
;;;3861   			}
;;;3862   		}
;;;3863   	}
;;;3864   
;;;3865   else if(!(temp&(1<<AV_T)))
;;;3866   	{
;;;3867   	if(bps[in]._temp_av_cnt) 
001fb8  f9b40046          LDRSH    r0,[r4,#0x46]
001fbc  b160              CBZ      r0,|L1.8152|
;;;3868   		{
;;;3869   		bps[in]._temp_av_cnt--;
001fbe  1e40              SUBS     r0,r0,#1
001fc0  b200              SXTH     r0,r0
001fc2  f8a40046          STRH     r0,[r4,#0x46]
;;;3870   		if(!bps[in]._temp_av_cnt)
001fc6  b938              CBNZ     r0,|L1.8152|
;;;3871   			{
;;;3872   			if(bps[in]._av&(1<<0))avar_bps_hndl(in,0,0);
001fc8  7860              LDRB     r0,[r4,#1]
001fca  07c0              LSLS     r0,r0,#31
001fcc  d004              BEQ      |L1.8152|
001fce  2200              MOVS     r2,#0
001fd0  4611              MOV      r1,r2
001fd2  4630              MOV      r0,r6
001fd4  f7fffffe          BL       avar_bps_hndl
                  |L1.8152|
;;;3873   			}
;;;3874   		} 	
;;;3875   
;;;3876   	}
;;;3877   
;;;3878   if((temp&(1<<AVUMAX)))
001fd8  0728              LSLS     r0,r5,#28
;;;3879   	{
;;;3880   	if(bps[in]._umax_av_cnt<10) 
;;;3881   		{
;;;3882   		bps[in]._umax_av_cnt++;
;;;3883   		if(bps[in]._umax_av_cnt>=10)
;;;3884   			{ 
;;;3885   			bps[in]._umax_av_cnt=10;
001fda  f04f070a          MOV      r7,#0xa
001fde  f04f0100          MOV      r1,#0                 ;3860
001fe2  d514              BPL      |L1.8206|
001fe4  f9b40048          LDRSH    r0,[r4,#0x48]         ;3880
001fe8  280a              CMP      r0,#0xa               ;3880
001fea  da25              BGE      |L1.8248|
001fec  1c40              ADDS     r0,r0,#1              ;3882
001fee  b200              SXTH     r0,r0                 ;3882
001ff0  f8a40048          STRH     r0,[r4,#0x48]         ;3882
001ff4  280a              CMP      r0,#0xa               ;3883
001ff6  db1f              BLT      |L1.8248|
001ff8  f8a47048          STRH     r7,[r4,#0x48]
;;;3886   			if(!(bps[in]._av&(1<<1)))avar_bps_hndl(in,1,1);
001ffc  7860              LDRB     r0,[r4,#1]
001ffe  0780              LSLS     r0,r0,#30
002000  d41a              BMI      |L1.8248|
002002  2201              MOVS     r2,#1
002004  4611              MOV      r1,r2
002006  4630              MOV      r0,r6
002008  f7fffffe          BL       avar_bps_hndl
00200c  e014              B        |L1.8248|
                  |L1.8206|
;;;3887   		  	/*if((K[APV]!=ON)||((apv_cnt[in,0]==0)&&(apv_cnt[in,1]==0)&&(apv_cnt[in,2]==0)&&(apv_flags[in]==afOFF)))avar_s_hndl(in,1,1);
;;;3888   			if((apv_cnt[in,0]==0)&&(apv_cnt[in,1]==0)&&(apv_cnt[in,2]==0)&&(apv_flags[in]==afON))
;;;3889   				{
;;;3890   				apv_cnt[in,0]=APV_INIT;
;;;3891   				apv_cnt[in,1]=APV_INIT;
;;;3892   				apv_cnt[in,2]=APV_INIT;
;;;3893   				apv_flags[in]=afOFF;
;;;3894   				}				*/
;;;3895   						
;;;3896   			}
;;;3897   		} 
;;;3898   	}		
;;;3899   else if(!(temp&(1<<AVUMAX)))
;;;3900   	{
;;;3901   	if(bps[in]._umax_av_cnt>0) 
00200e  f9b40048          LDRSH    r0,[r4,#0x48]
002012  2800              CMP      r0,#0
002014  dd0d              BLE      |L1.8242|
;;;3902   		{
;;;3903   		bps[in]._umax_av_cnt--;
002016  f1a00001          SUB      r0,r0,#1
00201a  b200              SXTH     r0,r0
00201c  f8a40048          STRH     r0,[r4,#0x48]
;;;3904   		if(bps[in]._umax_av_cnt==0)
002020  b950              CBNZ     r0,|L1.8248|
;;;3905   			{
;;;3906   			bps[in]._umax_av_cnt=0;
;;;3907   			avar_bps_hndl(in,1,0);
002022  f04f0200          MOV      r2,#0
002026  f04f0101          MOV      r1,#1
00202a  4630              MOV      r0,r6
00202c  f7fffffe          BL       avar_bps_hndl
002030  e002              B        |L1.8248|
                  |L1.8242|
;;;3908   	 //		apv_cnt[in,0]=0;
;;;3909   	//		apv_cnt[in,1]=0;
;;;3910   	 //		apv_cnt[in,2]=0;			
;;;3911   			}
;;;3912   		}
;;;3913   	else if(bps[in]._umax_av_cnt<0) bps[in]._umax_av_cnt=0;		 
002032  da01              BGE      |L1.8248|
002034  f8a41048          STRH     r1,[r4,#0x48]
                  |L1.8248|
;;;3914   	}
;;;3915   
;;;3916   if(temp&(1<<AVUMIN))
002038  06e8              LSLS     r0,r5,#27
00203a  d515              BPL      |L1.8296|
;;;3917   	{
;;;3918   	if(bps[in]._umin_av_cnt<10) 
00203c  f9b4004a          LDRSH    r0,[r4,#0x4a]
002040  280a              CMP      r0,#0xa
002042  da1e              BGE      |L1.8322|
;;;3919   		{
;;;3920   		bps[in]._umin_av_cnt++;
002044  1c40              ADDS     r0,r0,#1
002046  b200              SXTH     r0,r0
002048  f8a4004a          STRH     r0,[r4,#0x4a]
;;;3921   		if(bps[in]._umin_av_cnt>=10)
00204c  280a              CMP      r0,#0xa
00204e  db18              BLT      |L1.8322|
;;;3922   			{ 
;;;3923   			bps[in]._umin_av_cnt=10;
002050  f8a4704a          STRH     r7,[r4,#0x4a]
;;;3924   			if(!(bps[in]._av&(1<<2)))avar_bps_hndl(in,2,1);
002054  7860              LDRB     r0,[r4,#1]
002056  0740              LSLS     r0,r0,#29
002058  d413              BMI      |L1.8322|
00205a  2201              MOVS     r2,#1
00205c  2102              MOVS     r1,#2
00205e  4630              MOV      r0,r6
002060  f7fffffe          BL       avar_bps_hndl
002064  e00d              B        |L1.8322|
                  |L1.8294|
002066  e041              B        |L1.8428|
                  |L1.8296|
;;;3925   		  	/*	if((K[APV]!=ON)||((apv_cnt[in,0]==0)&&(apv_cnt[in,1]==0)&&(apv_cnt[in,2]==0)&&(apv_flags[in]==afOFF)))avar_s_hndl(in,2,1);
;;;3926   			if((apv_cnt[in,0]==0)&&(apv_cnt[in,1]==0)&&(apv_cnt[in,2]==0)&&(apv_flags[in]==afON))
;;;3927   				{
;;;3928   				apv_cnt[in,0]=APV_INIT;
;;;3929   				apv_cnt[in,1]=APV_INIT;
;;;3930   				apv_cnt[in,2]=APV_INIT;
;;;3931   				apv_flags[in]=afOFF;
;;;3932   				}*/				
;;;3933   			}
;;;3934   		} 
;;;3935   	}	
;;;3936   	
;;;3937   else if(!(temp&(1<<AVUMIN)))
;;;3938   	{
;;;3939   	if(bps[in]._umin_av_cnt) 
002068  f9b4004a          LDRSH    r0,[r4,#0x4a]
00206c  b148              CBZ      r0,|L1.8322|
;;;3940   		{
;;;3941   		bps[in]._umin_av_cnt--;
00206e  1e40              SUBS     r0,r0,#1
002070  b200              SXTH     r0,r0
002072  f8a4004a          STRH     r0,[r4,#0x4a]
;;;3942   		if(bps[in]._umin_av_cnt==0)
002076  b920              CBNZ     r0,|L1.8322|
;;;3943   			{
;;;3944   			bps[in]._umin_av_cnt=0;
;;;3945   			avar_bps_hndl(in,2,0);
002078  2200              MOVS     r2,#0
00207a  2102              MOVS     r1,#2
00207c  4630              MOV      r0,r6
00207e  f7fffffe          BL       avar_bps_hndl
                  |L1.8322|
;;;3946   		//	apv_cnt[in,0]=0;
;;;3947   		//	apv_cnt[in,1]=0;
;;;3948   		//	apv_cnt[in,2]=0;
;;;3949   			}
;;;3950   		}
;;;3951   	else if(bps[in]._umin_av_cnt>10)bps[in]._umin_av_cnt--;	 
;;;3952   	}
;;;3953   
;;;3954   //bps[in]._state=bsOFF;
;;;3955   
;;;3956   if (bps[in]._av&0x0f)					bps[in]._state=bsAV;
002082  7860              LDRB     r0,[r4,#1]
002084  0700              LSLS     r0,r0,#28
002086  d002              BEQ      |L1.8334|
002088  2004              MOVS     r0,#4
00208a  70a0              STRB     r0,[r4,#2]
00208c  e014              B        |L1.8376|
                  |L1.8334|
;;;3957   else if ( (net_av) && (bps[in]._cnt>20)/*&& 
00208e  4827              LDR      r0,|L1.8492|
002090  7800              LDRB     r0,[r0,#0]  ; net_av
002092  b128              CBZ      r0,|L1.8352|
002094  78e0              LDRB     r0,[r4,#3]
002096  2814              CMP      r0,#0x14
002098  d902              BLS      |L1.8352|
;;;3958   		(bps[in]._Uii<200)*/)				bps[in]._state=bsOFF_AV_NET;
00209a  2005              MOVS     r0,#5
00209c  70a0              STRB     r0,[r4,#2]
00209e  e00b              B        |L1.8376|
                  |L1.8352|
;;;3959   else if (bps[in]._flags_tm&BIN8(100000))	bps[in]._state=bsRDY;
0020a0  f8940042          LDRB     r0,[r4,#0x42]
0020a4  0680              LSLS     r0,r0,#26
0020a6  d502              BPL      |L1.8366|
0020a8  2002              MOVS     r0,#2
0020aa  70a0              STRB     r0,[r4,#2]
0020ac  e004              B        |L1.8376|
                  |L1.8366|
;;;3960   else if (bps[in]._cnt<20)				bps[in]._state=bsWRK;
0020ae  78e0              LDRB     r0,[r4,#3]
0020b0  2814              CMP      r0,#0x14
0020b2  d201              BCS      |L1.8376|
0020b4  2001              MOVS     r0,#1
0020b6  70a0              STRB     r0,[r4,#2]
                  |L1.8376|
;;;3961   
;;;3962   
;;;3963   
;;;3964   //else if(bps[in]._flags_tm&BIN8(100000)) bps[in]._state=ssBL;
;;;3965   //else if((!(bps[in]._flags_tm&BIN8(100000)))&&(net_U>100))bps[in]._state=ssWRK;
;;;3966   //else bps[0]._state=ssNOT;
;;;3967   
;;;3968   //bps[in]._is_ready=0;
;;;3969   //bps[in]._is_wrk=0;
;;;3970   //if(bps[in]._av_net) bps[in]._flags_bp='N';//  
;;;3971   //else if(bps[in]._av_u_max) bps[in]._flags_bp='P';//  (u_.av_.bAS1T)) bps_state[0]=ssAV;
;;;3972   //else if(bps[in]._av_u_min) bps[in]._flags_bp='M';//  
;;;3973   //else if(bps[in]._av_temper) bps[in]._flags_bp='T';// 
;;;3974   //else if(bps[in]._flags_tm&BIN8(100000)) 
;;;3975   //	{
;;;3976   //	bps[in]._flags_bp='B';// 
;;;3977   //	bps[in]._is_ready=1;
;;;3978   //	}
;;;3979   //else if((!(bps[in]._flags_tm&BIN8(100000)))&&(net_U>100))
;;;3980   //     {
;;;3981   //     bps[in]._flags_bp='W';// 
;;;3982   //     bps[in]._is_ready=1;
;;;3983   //     bps[in]._is_wrk=1;
;;;3984        
;;;3985   //     }
;;;3986   //else bps[in]._is_ready=1;     
;;;3987   
;;;3988   
;;;3989   
;;;3990   
;;;3991   
;;;3992   /*
;;;3993   bps[in]._flags_tu&=BIN8(11111110);
;;;3994   if(bps[in]._ist_blok_cnt)
;;;3995   	{
;;;3996   	bps[in]._ist_blok_cnt--;
;;;3997   	bps[in]._flags_tu|=BIN8(1);
;;;3998   	}
;;;3999   
;;;4000   	   */ 
;;;4001   
;;;4002   //    
;;;4003   if(bps[in]._cnt>=10) bps[in]._flags_tu|=BIN8(10000000);
0020b8  78e0              LDRB     r0,[r4,#3]
0020ba  280a              CMP      r0,#0xa
0020bc  d306              BCC      |L1.8396|
0020be  f894002c          LDRB     r0,[r4,#0x2c]
0020c2  f0400080          ORR      r0,r0,#0x80
0020c6  f884002c          STRB     r0,[r4,#0x2c]
0020ca  e005              B        |L1.8408|
                  |L1.8396|
;;;4004   else bps[in]._flags_tu&=BIN8(1111111);
0020cc  f894002c          LDRB     r0,[r4,#0x2c]
0020d0  f000007f          AND      r0,r0,#0x7f
0020d4  f884002c          STRB     r0,[r4,#0x2c]
                  |L1.8408|
;;;4005   	
;;;4006   bps[in]._vol_u=cntrl_stat+bps[in]._x_;	
0020d8  4906              LDR      r1,|L1.8436|
0020da  f9b40050          LDRSH    r0,[r4,#0x50]
0020de  f9b1101a          LDRSH    r1,[r1,#0x1a]  ; cntrl_stat
0020e2  4408              ADD      r0,r0,r1
0020e4  6320              STR      r0,[r4,#0x30]
;;;4007   bps[in]._vol_i=1000; 
0020e6  f44f707a          MOV      r0,#0x3e8
0020ea  6360              STR      r0,[r4,#0x34]
                  |L1.8428|
;;;4008   }
0020ec  e5fd              B        |L1.7402|
0020ee  0000              DCW      0x0000
                  |L1.8432|
                          DCD      speedChIsOn
                  |L1.8436|
                          DCD      ||area_number.21||
                  |L1.8440|
                          DCD      bps
                  |L1.8444|
                          DCD      NUMIST
                  |L1.8448|
                          DCD      mess_data
                  |L1.8452|
                          DCD      num_necc
                  |L1.8456|
                          DCD      main_1Hz_cnt
                  |L1.8460|
                          DCD      power_summary_tempo
                  |L1.8464|
                          DCD      power_summary_tempo_old
                  |L1.8468|
                          DCD      powerSummaryCnt
                  |L1.8472|
                          DCD      power_summary
                  |L1.8476|
                          DCD      power_current_tempo
                  |L1.8480|
                          DCD      power_current_tempo_old
                  |L1.8484|
                          DCD      powerCurrentCnt
                  |L1.8488|
                          DCD      power_current
                  |L1.8492|
                          DCD      net_av
                          ENDP

                  avt_hndl PROC
;;;4010   //-----------------------------------------------
;;;4011   void avt_hndl(void)
002130  b570              PUSH     {r4-r6,lr}
;;;4012   {
;;;4013   char i;
;;;4014   for(i=0;i<12;i++)
002132  2000              MOVS     r0,#0
;;;4015   	{
;;;4016   	if(eb2_data_short[6]&(1<<i))
002134  49fb              LDR      r1,|L1.9508|
002136  2601              MOVS     r6,#1
002138  f9b1400c          LDRSH    r4,[r1,#0xc]
;;;4017   		{
;;;4018   		avt_stat[i]=avtON;
00213c  4dfa              LDR      r5,|L1.9512|
00213e  2300              MOVS     r3,#0                 ;4014
                  |L1.8512|
002140  fa06f100          LSL      r1,r6,r0              ;4016
002144  420c              TST      r4,r1                 ;4016
002146  d001              BEQ      |L1.8524|
002148  542e              STRB     r6,[r5,r0]
00214a  e000              B        |L1.8526|
                  |L1.8524|
;;;4019   		}
;;;4020   	else avt_stat[i]=avtOFF;
00214c  542b              STRB     r3,[r5,r0]
                  |L1.8526|
00214e  1c40              ADDS     r0,r0,#1              ;4014
002150  b2c0              UXTB     r0,r0                 ;4014
002152  280c              CMP      r0,#0xc               ;4014
002154  d3f4              BCC      |L1.8512|
;;;4021   	}
;;;4022   
;;;4023   if((avt_stat_old[0]!=avt_stat[0])&&(NUMAVT>=1))
002156  4ef5              LDR      r6,|L1.9516|
002158  7828              LDRB     r0,[r5,#0]  ; avt_stat
00215a  7831              LDRB     r1,[r6,#0]  ; avt_stat_old
00215c  4cf4              LDR      r4,|L1.9520|
00215e  4281              CMP      r1,r0
002160  d012              BEQ      |L1.8584|
002162  f9b41000          LDRSH    r1,[r4,#0]  ; NUMAVT
002166  2901              CMP      r1,#1
002168  db0e              BLT      |L1.8584|
;;;4024   	{
;;;4025   	if(avt_stat[0]==avtON) 	snmp_trap_send("Avtomat #1 is ON ",11,1,1);
00216a  2801              CMP      r0,#1
00216c  d106              BNE      |L1.8572|
00216e  2301              MOVS     r3,#1
002170  461a              MOV      r2,r3
002172  210b              MOVS     r1,#0xb
002174  a0ef              ADR      r0,|L1.9524|
002176  f7fffffe          BL       snmp_trap_send
00217a  e005              B        |L1.8584|
                  |L1.8572|
;;;4026   	else 				snmp_trap_send("Avtomat #1 is OFF",11,1,0);
00217c  2300              MOVS     r3,#0
00217e  2201              MOVS     r2,#1
002180  210b              MOVS     r1,#0xb
002182  a0f1              ADR      r0,|L1.9544|
002184  f7fffffe          BL       snmp_trap_send
                  |L1.8584|
;;;4027   	}
;;;4028   if((avt_stat_old[1]!=avt_stat[1])&&(NUMAVT>=2))
002188  7871              LDRB     r1,[r6,#1]  ; avt_stat_old
00218a  7868              LDRB     r0,[r5,#1]  ; avt_stat
00218c  4281              CMP      r1,r0
00218e  d012              BEQ      |L1.8630|
002190  f9b41000          LDRSH    r1,[r4,#0]  ; NUMAVT
002194  2902              CMP      r1,#2
002196  db0e              BLT      |L1.8630|
;;;4029   	{
;;;4030   	if(avt_stat[1]==avtON) 	snmp_trap_send("Avtomat #2 is ON ",11,2,1);
002198  2801              CMP      r0,#1
00219a  d106              BNE      |L1.8618|
00219c  2301              MOVS     r3,#1
00219e  2202              MOVS     r2,#2
0021a0  210b              MOVS     r1,#0xb
0021a2  a0ee              ADR      r0,|L1.9564|
0021a4  f7fffffe          BL       snmp_trap_send
0021a8  e005              B        |L1.8630|
                  |L1.8618|
;;;4031   	else 				snmp_trap_send("Avtomat #2 is OFF",11,2,0);
0021aa  2300              MOVS     r3,#0
0021ac  2202              MOVS     r2,#2
0021ae  210b              MOVS     r1,#0xb
0021b0  a0ef              ADR      r0,|L1.9584|
0021b2  f7fffffe          BL       snmp_trap_send
                  |L1.8630|
;;;4032   	}
;;;4033   if((avt_stat_old[2]!=avt_stat[2])&&(NUMAVT>=3))
0021b6  78b1              LDRB     r1,[r6,#2]  ; avt_stat_old
0021b8  78a8              LDRB     r0,[r5,#2]  ; avt_stat
0021ba  4281              CMP      r1,r0
0021bc  d012              BEQ      |L1.8676|
0021be  f9b41000          LDRSH    r1,[r4,#0]  ; NUMAVT
0021c2  2903              CMP      r1,#3
0021c4  db0e              BLT      |L1.8676|
;;;4034   	{
;;;4035   	if(avt_stat[2]==avtON) 	snmp_trap_send("Avtomat #3 is ON ",11,3,1);
0021c6  2801              CMP      r0,#1
0021c8  d106              BNE      |L1.8664|
0021ca  2301              MOVS     r3,#1
0021cc  2203              MOVS     r2,#3
0021ce  210b              MOVS     r1,#0xb
0021d0  a0ec              ADR      r0,|L1.9604|
0021d2  f7fffffe          BL       snmp_trap_send
0021d6  e005              B        |L1.8676|
                  |L1.8664|
;;;4036   	else 				snmp_trap_send("Avtomat #3 is OFF",11,3,0);
0021d8  2300              MOVS     r3,#0
0021da  2203              MOVS     r2,#3
0021dc  210b              MOVS     r1,#0xb
0021de  a0ee              ADR      r0,|L1.9624|
0021e0  f7fffffe          BL       snmp_trap_send
                  |L1.8676|
;;;4037   	}
;;;4038   if((avt_stat_old[3]!=avt_stat[3])&&(NUMAVT>=4))
0021e4  78f1              LDRB     r1,[r6,#3]  ; avt_stat_old
0021e6  78e8              LDRB     r0,[r5,#3]  ; avt_stat
0021e8  4281              CMP      r1,r0
0021ea  d012              BEQ      |L1.8722|
0021ec  f9b41000          LDRSH    r1,[r4,#0]  ; NUMAVT
0021f0  2904              CMP      r1,#4
0021f2  db0e              BLT      |L1.8722|
;;;4039   	{
;;;4040   	if(avt_stat[3]==avtON) 	snmp_trap_send("Avtomat #4 is ON ",11,4,1);
0021f4  2801              CMP      r0,#1
0021f6  d106              BNE      |L1.8710|
0021f8  2301              MOVS     r3,#1
0021fa  2204              MOVS     r2,#4
0021fc  210b              MOVS     r1,#0xb
0021fe  a0eb              ADR      r0,|L1.9644|
002200  f7fffffe          BL       snmp_trap_send
002204  e005              B        |L1.8722|
                  |L1.8710|
;;;4041   	else 				snmp_trap_send("Avtomat #4 is OFF",11,4,0);
002206  2300              MOVS     r3,#0
002208  2204              MOVS     r2,#4
00220a  210b              MOVS     r1,#0xb
00220c  a0ec              ADR      r0,|L1.9664|
00220e  f7fffffe          BL       snmp_trap_send
                  |L1.8722|
;;;4042   	}
;;;4043   if((avt_stat_old[4]!=avt_stat[4])&&(NUMAVT>=5))
002212  7931              LDRB     r1,[r6,#4]  ; avt_stat_old
002214  7928              LDRB     r0,[r5,#4]  ; avt_stat
002216  4281              CMP      r1,r0
002218  d012              BEQ      |L1.8768|
00221a  f9b41000          LDRSH    r1,[r4,#0]  ; NUMAVT
00221e  2905              CMP      r1,#5
002220  db0e              BLT      |L1.8768|
;;;4044   	{
;;;4045   	if(avt_stat[4]==avtON) 	snmp_trap_send("Avtomat #5 is ON ",11,5,1);
002222  2801              CMP      r0,#1
002224  d106              BNE      |L1.8756|
002226  2301              MOVS     r3,#1
002228  2205              MOVS     r2,#5
00222a  210b              MOVS     r1,#0xb
00222c  a0e9              ADR      r0,|L1.9684|
00222e  f7fffffe          BL       snmp_trap_send
002232  e005              B        |L1.8768|
                  |L1.8756|
;;;4046   	else 				snmp_trap_send("Avtomat #5 is OFF",11,5,0);
002234  2300              MOVS     r3,#0
002236  2205              MOVS     r2,#5
002238  210b              MOVS     r1,#0xb
00223a  a0eb              ADR      r0,|L1.9704|
00223c  f7fffffe          BL       snmp_trap_send
                  |L1.8768|
;;;4047   	}
;;;4048   if((avt_stat_old[5]!=avt_stat[5])&&(NUMAVT>=6))
002240  7971              LDRB     r1,[r6,#5]  ; avt_stat_old
002242  7968              LDRB     r0,[r5,#5]  ; avt_stat
002244  4281              CMP      r1,r0
002246  d012              BEQ      |L1.8814|
002248  f9b41000          LDRSH    r1,[r4,#0]  ; NUMAVT
00224c  2906              CMP      r1,#6
00224e  db0e              BLT      |L1.8814|
;;;4049   	{
;;;4050   	if(avt_stat[5]==avtON) 	snmp_trap_send("Avtomat #6 is ON ",11,6,1);
002250  2801              CMP      r0,#1
002252  d106              BNE      |L1.8802|
002254  2301              MOVS     r3,#1
002256  2206              MOVS     r2,#6
002258  210b              MOVS     r1,#0xb
00225a  a0e8              ADR      r0,|L1.9724|
00225c  f7fffffe          BL       snmp_trap_send
002260  e005              B        |L1.8814|
                  |L1.8802|
;;;4051   	else 				snmp_trap_send("Avtomat #6 is OFF",11,6,0);
002262  2300              MOVS     r3,#0
002264  2206              MOVS     r2,#6
002266  210b              MOVS     r1,#0xb
002268  a0e9              ADR      r0,|L1.9744|
00226a  f7fffffe          BL       snmp_trap_send
                  |L1.8814|
;;;4052   	}
;;;4053   if((avt_stat_old[6]!=avt_stat[6])&&(NUMAVT>=7))
00226e  79b1              LDRB     r1,[r6,#6]  ; avt_stat_old
002270  79a8              LDRB     r0,[r5,#6]  ; avt_stat
002272  4281              CMP      r1,r0
002274  d012              BEQ      |L1.8860|
002276  f9b41000          LDRSH    r1,[r4,#0]  ; NUMAVT
00227a  2907              CMP      r1,#7
00227c  db0e              BLT      |L1.8860|
;;;4054   	{
;;;4055   	if(avt_stat[6]==avtON) 	snmp_trap_send("Avtomat #7 is ON ",11,7,1);
00227e  2801              CMP      r0,#1
002280  d106              BNE      |L1.8848|
002282  2301              MOVS     r3,#1
002284  2207              MOVS     r2,#7
002286  210b              MOVS     r1,#0xb
002288  a0e6              ADR      r0,|L1.9764|
00228a  f7fffffe          BL       snmp_trap_send
00228e  e005              B        |L1.8860|
                  |L1.8848|
;;;4056   	else 				snmp_trap_send("Avtomat #7 is OFF",11,7,0);
002290  2300              MOVS     r3,#0
002292  2207              MOVS     r2,#7
002294  210b              MOVS     r1,#0xb
002296  a0e8              ADR      r0,|L1.9784|
002298  f7fffffe          BL       snmp_trap_send
                  |L1.8860|
;;;4057   	}
;;;4058   if((avt_stat_old[7]!=avt_stat[7])&&(NUMAVT>=8))
00229c  79f1              LDRB     r1,[r6,#7]  ; avt_stat_old
00229e  79e8              LDRB     r0,[r5,#7]  ; avt_stat
0022a0  4281              CMP      r1,r0
0022a2  d012              BEQ      |L1.8906|
0022a4  f9b41000          LDRSH    r1,[r4,#0]  ; NUMAVT
0022a8  2908              CMP      r1,#8
0022aa  db0e              BLT      |L1.8906|
;;;4059   	{
;;;4060   	if(avt_stat[7]==avtON) 	snmp_trap_send("Avtomat #8 is ON ",11,8,1);
0022ac  2801              CMP      r0,#1
0022ae  d106              BNE      |L1.8894|
0022b0  2301              MOVS     r3,#1
0022b2  2208              MOVS     r2,#8
0022b4  210b              MOVS     r1,#0xb
0022b6  a0e5              ADR      r0,|L1.9804|
0022b8  f7fffffe          BL       snmp_trap_send
0022bc  e005              B        |L1.8906|
                  |L1.8894|
;;;4061   	else 				snmp_trap_send("Avtomat #8 is OFF",11,8,0);
0022be  2300              MOVS     r3,#0
0022c0  2208              MOVS     r2,#8
0022c2  210b              MOVS     r1,#0xb
0022c4  a0e6              ADR      r0,|L1.9824|
0022c6  f7fffffe          BL       snmp_trap_send
                  |L1.8906|
;;;4062   	}
;;;4063   if((avt_stat_old[8]!=avt_stat[8])&&(NUMAVT>=9))
0022ca  7a31              LDRB     r1,[r6,#8]  ; avt_stat_old
0022cc  7a28              LDRB     r0,[r5,#8]  ; avt_stat
0022ce  4281              CMP      r1,r0
0022d0  d012              BEQ      |L1.8952|
0022d2  f9b41000          LDRSH    r1,[r4,#0]  ; NUMAVT
0022d6  2909              CMP      r1,#9
0022d8  db0e              BLT      |L1.8952|
;;;4064   	{
;;;4065   	if(avt_stat[8]==avtON) 	snmp_trap_send("Avtomat #9 is ON ",11,9,1);
0022da  2801              CMP      r0,#1
0022dc  d106              BNE      |L1.8940|
0022de  2301              MOVS     r3,#1
0022e0  2209              MOVS     r2,#9
0022e2  210b              MOVS     r1,#0xb
0022e4  a0e3              ADR      r0,|L1.9844|
0022e6  f7fffffe          BL       snmp_trap_send
0022ea  e005              B        |L1.8952|
                  |L1.8940|
;;;4066   	else 				snmp_trap_send("Avtomat #9 is OFF",11,9,0);
0022ec  2300              MOVS     r3,#0
0022ee  2209              MOVS     r2,#9
0022f0  210b              MOVS     r1,#0xb
0022f2  a0e5              ADR      r0,|L1.9864|
0022f4  f7fffffe          BL       snmp_trap_send
                  |L1.8952|
;;;4067   	}
;;;4068   
;;;4069   for(i=0;i<12;i++)
0022f8  2000              MOVS     r0,#0
                  |L1.8954|
;;;4070   	{
;;;4071   	avt_stat_old[i]=avt_stat[i];
0022fa  5c29              LDRB     r1,[r5,r0]
0022fc  5431              STRB     r1,[r6,r0]
0022fe  1c40              ADDS     r0,r0,#1              ;4069
002300  b2c0              UXTB     r0,r0                 ;4069
002302  280c              CMP      r0,#0xc               ;4069
002304  d3f9              BCC      |L1.8954|
;;;4072   	}
;;;4073   }
002306  bd70              POP      {r4-r6,pc}
;;;4074   
                          ENDP

                  bat_hndl PROC
;;;4075   //-----------------------------------------------
;;;4076   void bat_hndl(void)
002308  b570              PUSH     {r4-r6,lr}
;;;4077   {
;;;4078   /*if(mess_find(_MESS_BAT_MASK_ON))
;;;4079   	{
;;;4080   	if(mess_data[0]==_MESS_BAT_MASK_ON)
;;;4081   		{
;;;4082   		char i;
;;;4083   		for(i=0;i<2;i++)
;;;4084   			{
;;;4085   			if(mess_data[1]&(1<<i))
;;;4086   				{
;;;4087   				bat[i]._cnt_to_block=0;
;;;4088        			bat[i]._rel_stat=0;
;;;4089        			}
;;;4090   			}
;;;4091   		}
;;;4092   	}
;;;4093   if(mess_find(_MESS_BAT_MASK_OFF))
;;;4094   	{		
;;;4095   	if(mess_data[0]==_MESS_BAT_MASK_OFF)
;;;4096   		{
;;;4097   		char i;
;;;4098   		for(i=0;i<2;i++)
;;;4099   			{
;;;4100   			if((mess_data[1]&(1<<i)) && (bat[i]._cnt_to_block==0) && (bat[i]._rel_stat==0))
;;;4101   				{
;;;4102   				bat[i]._cnt_to_block=20;
;;;4103   				bat[i]._rel_stat=1;
;;;4104        			}
;;;4105   			}
;;;4106   		
;;;4107   		}		
;;;4108   	}*/
;;;4109   
;;;4110   if(mess_find_unvol(MESS2BAT_HNDL))
00230a  20c8              MOVS     r0,#0xc8
00230c  f7fffffe          BL       mess_find_unvol
;;;4111   	{ 
;;;4112   	char i;
;;;4113   	
;;;4114   	if(mess_data[0]==PARAM_BAT_ALL_OFF_AFTER_2SEC)
;;;4115   		{
;;;4116   		for(i=0;i<MAX_NUM_OF_BAT;i++)
002310  2200              MOVS     r2,#0
;;;4117   			{
;;;4118   			if(bat[i]._cnt_to_block<50)bat[i]._cnt_to_block++;
002312  49e2              LDR      r1,|L1.9884|
002314  2800              CMP      r0,#0                 ;4110
002316  d056              BEQ      |L1.9158|
002318  4be1              LDR      r3,|L1.9888|
;;;4119   			}
;;;4120   		}
;;;4121   
;;;4122   	else if(mess_data[0]==PARAM_BAT_MASK_OFF_AFTER_2SEC)
;;;4123   		{
;;;4124   		for(i=0;i<MAX_NUM_OF_BAT;i++)
;;;4125   			{
;;;4126   			if(mess_data[1]&(1<<i))
00231a  2401              MOVS     r4,#1
00231c  6818              LDR      r0,[r3,#0]            ;4114  ; mess_data
00231e  28c9              CMP      r0,#0xc9              ;4114
002320  d110              BNE      |L1.9028|
002322  2000              MOVS     r0,#0                 ;4116
                  |L1.8996|
002324  eb000340          ADD      r3,r0,r0,LSL #1       ;4118
002328  eb031500          ADD      r5,r3,r0,LSL #4       ;4118
00232c  f8113025          LDRB     r3,[r1,r5,LSL #2]     ;4118
002330  2b32              CMP      r3,#0x32              ;4118
002332  d202              BCS      |L1.9018|
002334  1c5b              ADDS     r3,r3,#1              ;4118
002336  f8013025          STRB     r3,[r1,r5,LSL #2]     ;4118
                  |L1.9018|
00233a  1c40              ADDS     r0,r0,#1              ;4116
00233c  b2c0              UXTB     r0,r0                 ;4116
00233e  2802              CMP      r0,#2                 ;4116
002340  d3f0              BCC      |L1.8996|
002342  e029              B        |L1.9112|
                  |L1.9028|
002344  28ca              CMP      r0,#0xca              ;4122
002346  d11c              BNE      |L1.9090|
002348  2000              MOVS     r0,#0                 ;4124
00234a  685e              LDR      r6,[r3,#4]
                  |L1.9036|
00234c  fa04f300          LSL      r3,r4,r0
002350  421e              TST      r6,r3
002352  d00b              BEQ      |L1.9068|
;;;4127   				{
;;;4128   				if(bat[i]._cnt_to_block<50) bat[i]._cnt_to_block++;
002354  eb000340          ADD      r3,r0,r0,LSL #1
002358  eb031500          ADD      r5,r3,r0,LSL #4
00235c  f8113025          LDRB     r3,[r1,r5,LSL #2]
002360  2b32              CMP      r3,#0x32
002362  d209              BCS      |L1.9080|
002364  1c5b              ADDS     r3,r3,#1
002366  f8013025          STRB     r3,[r1,r5,LSL #2]
00236a  e005              B        |L1.9080|
                  |L1.9068|
;;;4129   				}
;;;4130   			else bat[i]._cnt_to_block=0;
00236c  eb000340          ADD      r3,r0,r0,LSL #1
002370  eb031300          ADD      r3,r3,r0,LSL #4
002374  f8012023          STRB     r2,[r1,r3,LSL #2]
                  |L1.9080|
002378  1c40              ADDS     r0,r0,#1              ;4124
00237a  b2c0              UXTB     r0,r0                 ;4124
00237c  2802              CMP      r0,#2                 ;4124
00237e  d3e5              BCC      |L1.9036|
002380  e00a              B        |L1.9112|
                  |L1.9090|
;;;4131   			}
;;;4132   		}
;;;4133   	else 
;;;4134   	 	{
;;;4135   		for(i=0;i<MAX_NUM_OF_BAT;i++)
002382  2000              MOVS     r0,#0
                  |L1.9092|
;;;4136   			{
;;;4137   			bat[i]._cnt_to_block=0;
002384  eb000340          ADD      r3,r0,r0,LSL #1
002388  eb031300          ADD      r3,r3,r0,LSL #4
00238c  f8012023          STRB     r2,[r1,r3,LSL #2]
002390  1c40              ADDS     r0,r0,#1              ;4135
002392  b2c0              UXTB     r0,r0                 ;4135
002394  2802              CMP      r0,#2                 ;4135
002396  d3f5              BCC      |L1.9092|
                  |L1.9112|
;;;4138   			}
;;;4139   
;;;4140   		}
;;;4141   	for(i=0;i<MAX_NUM_OF_BAT;i++)
002398  2000              MOVS     r0,#0
                  |L1.9114|
;;;4142   		{
;;;4143   		if(bat[i]._cnt_to_block>20)bat[i]._rel_stat=1;
00239a  eb000340          ADD      r3,r0,r0,LSL #1
00239e  eb031300          ADD      r3,r3,r0,LSL #4
0023a2  f8115023          LDRB     r5,[r1,r3,LSL #2]
0023a6  2d14              CMP      r5,#0x14
0023a8  d904              BLS      |L1.9140|
0023aa  eb010383          ADD      r3,r1,r3,LSL #2
0023ae  f883403c          STRB     r4,[r3,#0x3c]
0023b2  e003              B        |L1.9148|
                  |L1.9140|
;;;4144   		else bat[i]._rel_stat=0;
0023b4  eb010383          ADD      r3,r1,r3,LSL #2
0023b8  f883203c          STRB     r2,[r3,#0x3c]
                  |L1.9148|
0023bc  1c40              ADDS     r0,r0,#1              ;4141
0023be  b2c0              UXTB     r0,r0                 ;4141
0023c0  2802              CMP      r0,#2                 ;4141
0023c2  d3ea              BCC      |L1.9114|
;;;4145   		}
;;;4146   
;;;4147   	}
;;;4148   
;;;4149   else 
;;;4150   	{
;;;4151   	char i;
;;;4152   	for(i=0;i<MAX_NUM_OF_BAT;i++)
;;;4153   		{
;;;4154   		bat[i]._cnt_to_block=0;
;;;4155   		bat[i]._rel_stat=0;
;;;4156   		}
;;;4157   
;;;4158   	}
;;;4159   
;;;4160   /*if(mess_find_unvol(MESS2BAT_HNDL1))
;;;4161   	{
;;;4162   	if(PARAM_BAT_ON)
;;;4163   		{
;;;4164   		char i;
;;;4165   		for(i=0;i<MAX_NUM_OF_BAT;i++)
;;;4166   			{
;;;4167   			if(mess_data[1]&(1<<i))
;;;4168   				{
;;;4169   				bat[i]._cnt_to_block=0;
;;;4170   				bat[i]._rel_stat=0;
;;;4171   				}
;;;4172   			}
;;;4173   		}
;;;4174   	} */
;;;4175   }
0023c4  bd70              POP      {r4-r6,pc}
                  |L1.9158|
0023c6  2000              MOVS     r0,#0                 ;4152
                  |L1.9160|
0023c8  eb000340          ADD      r3,r0,r0,LSL #1       ;4154
0023cc  eb031300          ADD      r3,r3,r0,LSL #4       ;4154
0023d0  f8012023          STRB     r2,[r1,r3,LSL #2]     ;4154
0023d4  eb010383          ADD      r3,r1,r3,LSL #2       ;4155
0023d8  f883203c          STRB     r2,[r3,#0x3c]         ;4155
0023dc  1c40              ADDS     r0,r0,#1              ;4152
0023de  b2c0              UXTB     r0,r0                 ;4152
0023e0  2802              CMP      r0,#2                 ;4152
0023e2  d3f1              BCC      |L1.9160|
0023e4  bd70              POP      {r4-r6,pc}
;;;4176   
                          ENDP

                  klimat_hndl PROC
;;;4244   //-----------------------------------------------
;;;4245   void klimat_hndl(void)
0023e6  e92d41f0          PUSH     {r4-r8,lr}
;;;4246   {
;;;4247   
;;;4248   
;;;4249   if(t_box>TBOXMAX)
0023ea  4eae              LDR      r6,|L1.9892|
0023ec  48ae              LDR      r0,|L1.9896|
;;;4250   	{
;;;4251   	av_tbox_cnt++;
0023ee  4caf              LDR      r4,|L1.9900|
0023f0  f9b61000          LDRSH    r1,[r6,#0]            ;4249  ; t_box
0023f4  f9b02000          LDRSH    r2,[r0,#0]            ;4249  ; TBOXMAX
0023f8  f9b40000          LDRSH    r0,[r4,#0]
0023fc  4291              CMP      r1,r2                 ;4249
0023fe  dd03              BLE      |L1.9224|
002400  f1000001          ADD      r0,r0,#1
002404  8020              STRH     r0,[r4,#0]
002406  e003              B        |L1.9232|
                  |L1.9224|
;;;4252   	} 
;;;4253   else if(t_box<TBOXMAX)
002408  da02              BGE      |L1.9232|
;;;4254   	{
;;;4255   	av_tbox_cnt--;
00240a  f1a00001          SUB      r0,r0,#1
00240e  8020              STRH     r0,[r4,#0]
                  |L1.9232|
;;;4256   	}
;;;4257   gran(&av_tbox_cnt,0,6);
002410  2206              MOVS     r2,#6
002412  2100              MOVS     r1,#0
002414  48a5              LDR      r0,|L1.9900|
002416  f7fffffe          BL       gran
;;;4258   
;;;4259   if(av_tbox_cnt>5)
00241a  f9b40000          LDRSH    r0,[r4,#0]  ; av_tbox_cnt
;;;4260   	{
;;;4261   	av_tbox_stat=atsON;
00241e  49a4              LDR      r1,|L1.9904|
002420  2501              MOVS     r5,#1
002422  2805              CMP      r0,#5                 ;4259
002424  dd00              BLE      |L1.9256|
002426  700d              STRB     r5,[r1,#0]
                  |L1.9256|
002428  2400              MOVS     r4,#0                 ;4257
;;;4262   	}
;;;4263   if(av_tbox_cnt<1)
00242a  2801              CMP      r0,#1
00242c  da00              BGE      |L1.9264|
;;;4264   	{
;;;4265   	av_tbox_stat=atsOFF;
00242e  700c              STRB     r4,[r1,#0]
                  |L1.9264|
;;;4266   	}
;;;4267   
;;;4268   if(t_box<(TBOXREG-2))
002430  49a0              LDR      r1,|L1.9908|
002432  f9b60000          LDRSH    r0,[r6,#0]  ; t_box
002436  f9b11000          LDRSH    r1,[r1,#0]  ; TBOXREG
;;;4269   	{
;;;4270   	if(t_box_cnt<30)
00243a  4a9f              LDR      r2,|L1.9912|
00243c  1e8b              SUBS     r3,r1,#2              ;4268
;;;4271   		{
;;;4272   		t_box_cnt++;
;;;4273   		if(t_box_cnt>=30)
;;;4274   			{
;;;4275   			main_vent_pos--;
00243e  4f9f              LDR      r7,|L1.9916|
002440  4298              CMP      r0,r3                 ;4268
002442  da0d              BGE      |L1.9312|
002444  f9921000          LDRSB    r1,[r2,#0]            ;4270  ; t_box_cnt
002448  291e              CMP      r1,#0x1e              ;4270
00244a  da1a              BGE      |L1.9346|
00244c  1c49              ADDS     r1,r1,#1              ;4272
00244e  b249              SXTB     r1,r1                 ;4272
002450  7011              STRB     r1,[r2,#0]            ;4272
002452  291e              CMP      r1,#0x1e              ;4273
002454  db15              BLT      |L1.9346|
002456  8839              LDRH     r1,[r7,#0]  ; main_vent_pos
002458  1e49              SUBS     r1,r1,#1
00245a  8039              STRH     r1,[r7,#0]
;;;4276   			t_box_cnt=0;
00245c  7014              STRB     r4,[r2,#0]
00245e  e010              B        |L1.9346|
                  |L1.9312|
;;;4277   			}
;;;4278   		}
;;;4279   	}
;;;4280   else if(t_box>(TBOXREG))
002460  4288              CMP      r0,r1
002462  dd0d              BLE      |L1.9344|
;;;4281   	{
;;;4282   	if(t_box_cnt<30)
002464  f9921000          LDRSB    r1,[r2,#0]  ; t_box_cnt
002468  291e              CMP      r1,#0x1e
00246a  da0a              BGE      |L1.9346|
;;;4283   		{
;;;4284   		t_box_cnt++;
00246c  1c49              ADDS     r1,r1,#1
00246e  b249              SXTB     r1,r1
002470  7011              STRB     r1,[r2,#0]
;;;4285   		if(t_box_cnt>=30)
002472  291e              CMP      r1,#0x1e
002474  db05              BLT      |L1.9346|
;;;4286   			{
;;;4287   			main_vent_pos++;
002476  8839              LDRH     r1,[r7,#0]  ; main_vent_pos
002478  1c49              ADDS     r1,r1,#1
00247a  8039              STRH     r1,[r7,#0]
;;;4288   			t_box_cnt=0;
00247c  7014              STRB     r4,[r2,#0]
00247e  e000              B        |L1.9346|
                  |L1.9344|
;;;4289   			}
;;;4290   		}
;;;4291   	}
;;;4292   else
;;;4293   	{
;;;4294   	t_box_cnt=0;
002480  7014              STRB     r4,[r2,#0]
                  |L1.9346|
;;;4295   	}
;;;4296   
;;;4297   #ifndef UKU_KONTUR
;;;4298   if(t_box>TBOXVENTMAX)gran(&main_vent_pos,0,20); 
002482  498f              LDR      r1,|L1.9920|
002484  f9b11000          LDRSH    r1,[r1,#0]  ; TBOXVENTMAX
002488  4288              CMP      r0,r1
00248a  dd05              BLE      |L1.9368|
00248c  2214              MOVS     r2,#0x14
00248e  2100              MOVS     r1,#0
002490  488a              LDR      r0,|L1.9916|
002492  f7fffffe          BL       gran
002496  e007              B        |L1.9384|
                  |L1.9368|
;;;4299   else gran(&main_vent_pos,0,pos_vent+9);
002498  488a              LDR      r0,|L1.9924|
00249a  2100              MOVS     r1,#0
00249c  8800              LDRH     r0,[r0,#0]  ; pos_vent
00249e  3009              ADDS     r0,r0,#9
0024a0  b202              SXTH     r2,r0
0024a2  4886              LDR      r0,|L1.9916|
0024a4  f7fffffe          BL       gran
                  |L1.9384|
;;;4300   
;;;4301   if((mess_find_unvol(MESS2VENT_HNDL))&&(mess_data[0]==PARAM_VENT_CB))
0024a8  20f0              MOVS     r0,#0xf0
0024aa  f7fffffe          BL       mess_find_unvol
0024ae  b128              CBZ      r0,|L1.9404|
0024b0  487b              LDR      r0,|L1.9888|
0024b2  6801              LDR      r1,[r0,#0]  ; mess_data
0024b4  29f1              CMP      r1,#0xf1
0024b6  d101              BNE      |L1.9404|
;;;4302   	{
;;;4303   	main_vent_pos=mess_data[1];
0024b8  6840              LDR      r0,[r0,#4]  ; mess_data
0024ba  8038              STRH     r0,[r7,#0]
                  |L1.9404|
;;;4304   	}
;;;4305   
;;;4306   
;;;4307   if(main_vent_pos<=1)mixer_vent_stat=mvsON;
0024bc  f9b71000          LDRSH    r1,[r7,#0]  ; main_vent_pos
0024c0  4881              LDR      r0,|L1.9928|
0024c2  2901              CMP      r1,#1
0024c4  dc01              BGT      |L1.9418|
0024c6  7005              STRB     r5,[r0,#0]
0024c8  e000              B        |L1.9420|
                  |L1.9418|
;;;4308   else mixer_vent_stat=mvsOFF;
0024ca  7004              STRB     r4,[r0,#0]
                  |L1.9420|
;;;4309   #endif
;;;4310   
;;;4311   #ifdef UKU_KONTUR
;;;4312   
;;;4313   if(t_box>TBOXVENTON) t_box_vent_on_cnt++;
;;;4314   else if(t_box<TBOXVENTOFF) t_box_vent_on_cnt--;
;;;4315   gran(&t_box_vent_on_cnt,0,10);
;;;4316   
;;;4317   if(t_box_vent_on_cnt>9) vent_stat_k=vsON;
;;;4318   else if(t_box_vent_on_cnt<1) vent_stat_k=vsOFF;
;;;4319   
;;;4320   if(t_box<TBOXWARMON) t_box_warm_on_cnt++;
;;;4321   else if(t_box>TBOXWARMOFF) t_box_warm_on_cnt--;
;;;4322   gran(&t_box_warm_on_cnt,0,10);
;;;4323   
;;;4324   if(t_box_warm_on_cnt>9) warm_stat_k=wsON;
;;;4325   else if(t_box_warm_on_cnt<1) warm_stat_k=wsOFF;
;;;4326   
;;;4327   #endif
;;;4328   
;;;4329   if((TBATDISABLE>=50) && (TBATDISABLE<=90))
0024cc  487f              LDR      r0,|L1.9932|
;;;4330   	{
;;;4331   	if(t_box>TBATDISABLE)
;;;4332   		{
;;;4333   		tbatdisable_cnt++;
;;;4334   		}
;;;4335   	if(t_box<TBATENABLE)
;;;4336   		{
;;;4337   		tbatdisable_cnt--;
;;;4338   		}
;;;4339   	gran(&tbatdisable_cnt,0,6);
;;;4340   
;;;4341   	if(tbatdisable_cnt>5)
;;;4342   		{
;;;4343   		tbatdisable_stat=tbdsOFF;
0024ce  4f80              LDR      r7,|L1.9936|
0024d0  f9b00000          LDRSH    r0,[r0,#0]            ;4329  ; TBATDISABLE
0024d4  f1a00132          SUB      r1,r0,#0x32           ;4329
0024d8  2928              CMP      r1,#0x28              ;4329
0024da  d822              BHI      |L1.9506|
0024dc  f9b61000          LDRSH    r1,[r6,#0]            ;4331  ; t_box
0024e0  f8df81f0          LDR      r8,|L1.9940|
0024e4  4281              CMP      r1,r0                 ;4331
0024e6  dd04              BLE      |L1.9458|
0024e8  f8b80000          LDRH     r0,[r8,#0]            ;4333  ; tbatdisable_cnt
0024ec  1c40              ADDS     r0,r0,#1              ;4333
0024ee  f8a80000          STRH     r0,[r8,#0]            ;4333
                  |L1.9458|
0024f2  4879              LDR      r0,|L1.9944|
0024f4  f9b00000          LDRSH    r0,[r0,#0]            ;4335  ; TBATENABLE
0024f8  4281              CMP      r1,r0                 ;4335
0024fa  da04              BGE      |L1.9478|
0024fc  f8b80000          LDRH     r0,[r8,#0]            ;4337  ; tbatdisable_cnt
002500  1e40              SUBS     r0,r0,#1              ;4337
002502  f8a80000          STRH     r0,[r8,#0]            ;4337
                  |L1.9478|
002506  2206              MOVS     r2,#6                 ;4339
002508  2100              MOVS     r1,#0                 ;4339
00250a  4872              LDR      r0,|L1.9940|
00250c  f7fffffe          BL       gran
002510  f9b80000          LDRSH    r0,[r8,#0]            ;4341  ; tbatdisable_cnt
002514  2805              CMP      r0,#5                 ;4341
002516  dd00              BLE      |L1.9498|
002518  703d              STRB     r5,[r7,#0]
                  |L1.9498|
;;;4344   		}
;;;4345   	if(tbatdisable_cnt<1)
00251a  2801              CMP      r0,#1
00251c  da00              BGE      |L1.9504|
;;;4346   		{
;;;4347   		tbatdisable_stat=tbdsON;
00251e  703c              STRB     r4,[r7,#0]
                  |L1.9504|
002520  e0dd              B        |L1.9950|
                  |L1.9506|
002522  e0db              B        |L1.9948|
                  |L1.9508|
                          DCD      eb2_data_short
                  |L1.9512|
                          DCD      avt_stat
                  |L1.9516|
                          DCD      avt_stat_old
                  |L1.9520|
                          DCD      NUMAVT
                  |L1.9524|
002534  4176746f          DCB      "Avtomat #1 is ON ",0
002538  6d617420
00253c  23312069
002540  73204f4e
002544  2000    
002546  00                DCB      0
002547  00                DCB      0
                  |L1.9544|
002548  4176746f          DCB      "Avtomat #1 is OFF",0
00254c  6d617420
002550  23312069
002554  73204f46
002558  4600    
00255a  00                DCB      0
00255b  00                DCB      0
                  |L1.9564|
00255c  4176746f          DCB      "Avtomat #2 is ON ",0
002560  6d617420
002564  23322069
002568  73204f4e
00256c  2000    
00256e  00                DCB      0
00256f  00                DCB      0
                  |L1.9584|
002570  4176746f          DCB      "Avtomat #2 is OFF",0
002574  6d617420
002578  23322069
00257c  73204f46
002580  4600    
002582  00                DCB      0
002583  00                DCB      0
                  |L1.9604|
002584  4176746f          DCB      "Avtomat #3 is ON ",0
002588  6d617420
00258c  23332069
002590  73204f4e
002594  2000    
002596  00                DCB      0
002597  00                DCB      0
                  |L1.9624|
002598  4176746f          DCB      "Avtomat #3 is OFF",0
00259c  6d617420
0025a0  23332069
0025a4  73204f46
0025a8  4600    
0025aa  00                DCB      0
0025ab  00                DCB      0
                  |L1.9644|
0025ac  4176746f          DCB      "Avtomat #4 is ON ",0
0025b0  6d617420
0025b4  23342069
0025b8  73204f4e
0025bc  2000    
0025be  00                DCB      0
0025bf  00                DCB      0
                  |L1.9664|
0025c0  4176746f          DCB      "Avtomat #4 is OFF",0
0025c4  6d617420
0025c8  23342069
0025cc  73204f46
0025d0  4600    
0025d2  00                DCB      0
0025d3  00                DCB      0
                  |L1.9684|
0025d4  4176746f          DCB      "Avtomat #5 is ON ",0
0025d8  6d617420
0025dc  23352069
0025e0  73204f4e
0025e4  2000    
0025e6  00                DCB      0
0025e7  00                DCB      0
                  |L1.9704|
0025e8  4176746f          DCB      "Avtomat #5 is OFF",0
0025ec  6d617420
0025f0  23352069
0025f4  73204f46
0025f8  4600    
0025fa  00                DCB      0
0025fb  00                DCB      0
                  |L1.9724|
0025fc  4176746f          DCB      "Avtomat #6 is ON ",0
002600  6d617420
002604  23362069
002608  73204f4e
00260c  2000    
00260e  00                DCB      0
00260f  00                DCB      0
                  |L1.9744|
002610  4176746f          DCB      "Avtomat #6 is OFF",0
002614  6d617420
002618  23362069
00261c  73204f46
002620  4600    
002622  00                DCB      0
002623  00                DCB      0
                  |L1.9764|
002624  4176746f          DCB      "Avtomat #7 is ON ",0
002628  6d617420
00262c  23372069
002630  73204f4e
002634  2000    
002636  00                DCB      0
002637  00                DCB      0
                  |L1.9784|
002638  4176746f          DCB      "Avtomat #7 is OFF",0
00263c  6d617420
002640  23372069
002644  73204f46
002648  4600    
00264a  00                DCB      0
00264b  00                DCB      0
                  |L1.9804|
00264c  4176746f          DCB      "Avtomat #8 is ON ",0
002650  6d617420
002654  23382069
002658  73204f4e
00265c  2000    
00265e  00                DCB      0
00265f  00                DCB      0
                  |L1.9824|
002660  4176746f          DCB      "Avtomat #8 is OFF",0
002664  6d617420
002668  23382069
00266c  73204f46
002670  4600    
002672  00                DCB      0
002673  00                DCB      0
                  |L1.9844|
002674  4176746f          DCB      "Avtomat #9 is ON ",0
002678  6d617420
00267c  23392069
002680  73204f4e
002684  2000    
002686  00                DCB      0
002687  00                DCB      0
                  |L1.9864|
002688  4176746f          DCB      "Avtomat #9 is OFF",0
00268c  6d617420
002690  23392069
002694  73204f46
002698  4600    
00269a  00                DCB      0
00269b  00                DCB      0
                  |L1.9884|
                          DCD      bat
                  |L1.9888|
                          DCD      mess_data
                  |L1.9892|
                          DCD      t_box
                  |L1.9896|
                          DCD      TBOXMAX
                  |L1.9900|
                          DCD      av_tbox_cnt
                  |L1.9904|
                          DCD      av_tbox_stat
                  |L1.9908|
                          DCD      TBOXREG
                  |L1.9912|
                          DCD      t_box_cnt
                  |L1.9916|
                          DCD      main_vent_pos
                  |L1.9920|
                          DCD      TBOXVENTMAX
                  |L1.9924|
                          DCD      pos_vent
                  |L1.9928|
                          DCD      mixer_vent_stat
                  |L1.9932|
                          DCD      TBATDISABLE
                  |L1.9936|
                          DCD      tbatdisable_stat
                  |L1.9940|
                          DCD      tbatdisable_cnt
                  |L1.9944|
                          DCD      TBATENABLE
                  |L1.9948|
;;;4348   		}
;;;4349   	}
;;;4350   else 
;;;4351   	{
;;;4352   	tbatdisable_stat=tbdsON;
0026dc  703c              STRB     r4,[r7,#0]
                  |L1.9950|
;;;4353   	}
;;;4354   
;;;4355   if((TLOADDISABLE>=50) && (TLOADDISABLE<=80))
0026de  48ff              LDR      r0,|L1.10972|
;;;4356   	{
;;;4357   	if(t_box>TLOADDISABLE)
;;;4358   		{
;;;4359   		tloaddisable_cnt++;
;;;4360   		}
;;;4361   	if(t_box<TLOADENABLE)
;;;4362   		{
;;;4363   		tloaddisable_cnt--;
;;;4364   		}
;;;4365   	gran(&tloaddisable_cnt,0,6);
;;;4366   
;;;4367   	if(tloaddisable_cnt>5)
;;;4368   		{
;;;4369   		tloaddisable_stat=tldsOFF;
0026e0  4fff              LDR      r7,|L1.10976|
0026e2  f9b00000          LDRSH    r0,[r0,#0]            ;4355  ; TLOADDISABLE
0026e6  f1a00132          SUB      r1,r0,#0x32           ;4355
0026ea  291e              CMP      r1,#0x1e              ;4355
0026ec  d81d              BHI      |L1.10026|
0026ee  f9b61000          LDRSH    r1,[r6,#0]            ;4357  ; t_box
0026f2  4efc              LDR      r6,|L1.10980|
0026f4  4281              CMP      r1,r0                 ;4357
0026f6  dd02              BLE      |L1.9982|
0026f8  8830              LDRH     r0,[r6,#0]            ;4359  ; tloaddisable_cnt
0026fa  1c40              ADDS     r0,r0,#1              ;4359
0026fc  8030              STRH     r0,[r6,#0]            ;4359
                  |L1.9982|
0026fe  48fa              LDR      r0,|L1.10984|
002700  f9b00000          LDRSH    r0,[r0,#0]            ;4361  ; TLOADENABLE
002704  4281              CMP      r1,r0                 ;4361
002706  da02              BGE      |L1.9998|
002708  8830              LDRH     r0,[r6,#0]            ;4363  ; tloaddisable_cnt
00270a  1e40              SUBS     r0,r0,#1              ;4363
00270c  8030              STRH     r0,[r6,#0]            ;4363
                  |L1.9998|
00270e  2206              MOVS     r2,#6                 ;4365
002710  2100              MOVS     r1,#0                 ;4365
002712  48f4              LDR      r0,|L1.10980|
002714  f7fffffe          BL       gran
002718  f9b60000          LDRSH    r0,[r6,#0]            ;4367  ; tloaddisable_cnt
00271c  2805              CMP      r0,#5                 ;4367
00271e  dd00              BLE      |L1.10018|
002720  703d              STRB     r5,[r7,#0]
                  |L1.10018|
;;;4370   		}
;;;4371   	if(tloaddisable_cnt<1)
002722  2801              CMP      r0,#1
002724  da00              BGE      |L1.10024|
;;;4372   		{
;;;4373   		tloaddisable_stat=tldsON;
002726  703c              STRB     r4,[r7,#0]
                  |L1.10024|
;;;4374   		}
;;;4375   	}
;;;4376   else 
;;;4377   	{
;;;4378   	tloaddisable_stat=tldsON;
;;;4379   	}
;;;4380   
;;;4381   }
002728  e4e0              B        |L1.8428|
                  |L1.10026|
00272a  703c              STRB     r4,[r7,#0]            ;4378
00272c  e4de              B        |L1.8428|
;;;4382   #endif
                          ENDP

                  bat_drv PROC
;;;4518   //-----------------------------------------------
;;;4519   void bat_drv(char in)
00272e  e92d5ffc          PUSH     {r2-r12,lr}
;;;4520   {
002732  4605              MOV      r5,r0
;;;4521   unsigned short /*tempUS,*/tempUS_;
;;;4522   unsigned long tempUL,tempUL_;
;;;4523   unsigned short b_zar;
;;;4524   //static unsigned short time_cnt[2];
;;;4525   
;;;4526   
;;;4527   
;;;4528   if(cntrl_stat_blok_cnt_plus[in])cntrl_stat_blok_cnt_plus[in]--;
002734  49ed              LDR      r1,|L1.10988|
002736  f9310015          LDRSH    r0,[r1,r5,LSL #1]
00273a  b110              CBZ      r0,|L1.10050|
00273c  1e40              SUBS     r0,r0,#1
00273e  f8210015          STRH     r0,[r1,r5,LSL #1]
                  |L1.10050|
;;;4529   if(cntrl_stat_blok_cnt_minus[in])cntrl_stat_blok_cnt_minus[in]--;
002742  4aea              LDR      r2,|L1.10988|
002744  1d12              ADDS     r2,r2,#4
002746  f9320015          LDRSH    r0,[r2,r5,LSL #1]
00274a  b110              CBZ      r0,|L1.10066|
00274c  1e40              SUBS     r0,r0,#1
00274e  f8220015          STRH     r0,[r2,r5,LSL #1]
                  |L1.10066|
;;;4530   
;;;4531   
;;;4532   if(bat[in]._Ib>IZMAX) cntrl_stat_blok_cnt_plus[in]=100;
002752  eb050045          ADD      r0,r5,r5,LSL #1
002756  eb001305          ADD      r3,r0,r5,LSL #4
00275a  48e5              LDR      r0,|L1.10992|
00275c  f04f0b64          MOV      r11,#0x64
002760  eb000483          ADD      r4,r0,r3,LSL #2
002764  4be3              LDR      r3,|L1.10996|
002766  f9b40008          LDRSH    r0,[r4,#8]
00276a  f9b33000          LDRSH    r3,[r3,#0]  ; IZMAX
00276e  4298              CMP      r0,r3
002770  dd01              BLE      |L1.10102|
002772  f821b015          STRH     r11,[r1,r5,LSL #1]
                  |L1.10102|
;;;4533   if(bat[in]._Ib<0)     cntrl_stat_blok_cnt_minus[in]=100;
002776  2800              CMP      r0,#0
002778  da01              BGE      |L1.10110|
00277a  f822b015          STRH     r11,[r2,r5,LSL #1]
                  |L1.10110|
;;;4534   
;;;4535   if(cntrl_stat_blok_cnt_plus[in] && cntrl_stat_blok_cnt_minus[in])
;;;4536        {
;;;4537        if(!cntrl_stat_blok_cnt_)
00277e  48db              LDR      r0,|L1.10988|
002780  f8313015          LDRH     r3,[r1,r5,LSL #1]     ;4535
002784  387c              SUBS     r0,r0,#0x7c
002786  2700              MOVS     r7,#0
002788  b193              CBZ      r3,|L1.10160|
00278a  f8323015          LDRH     r3,[r2,r5,LSL #1]     ;4535
00278e  b17b              CBZ      r3,|L1.10160|
002790  f8b0305c          LDRH     r3,[r0,#0x5c]  ; cntrl_stat_blok_cnt_
002794  b943              CBNZ     r3,|L1.10152|
;;;4538             {
;;;4539             cntrl_stat_blok_cnt_=600; 
002796  f44f7316          MOV      r3,#0x258
00279a  f8a0305c          STRH     r3,[r0,#0x5c]
;;;4540             cntrl_stat_blok_cnt_plus[in]=0;
00279e  f8217015          STRH     r7,[r1,r5,LSL #1]
;;;4541             cntrl_stat_blok_cnt_minus[in]=0;
0027a2  f8227015          STRH     r7,[r2,r5,LSL #1]
0027a6  e003              B        |L1.10160|
                  |L1.10152|
;;;4542             }
;;;4543        else cntrl_stat_blok_cnt=3000;
0027a8  f64031b8          MOV      r1,#0xbb8
0027ac  f8a0105a          STRH     r1,[r0,#0x5a]
                  |L1.10160|
;;;4544        }
;;;4545   cntrl_stat_blok_cnt=0;
0027b0  f8a0705a          STRH     r7,[r0,#0x5a]
;;;4546   
;;;4547   if(++(bat[in]._time_cnt)>=10)
0027b4  f894003e          LDRB     r0,[r4,#0x3e]
0027b8  1c40              ADDS     r0,r0,#1
0027ba  b2c0              UXTB     r0,r0
0027bc  f884003e          STRB     r0,[r4,#0x3e]
0027c0  280a              CMP      r0,#0xa
0027c2  d301              BCC      |L1.10184|
;;;4548   	{
;;;4549   	bat[in]._time_cnt=0;
0027c4  f884703e          STRB     r7,[r4,#0x3e]
                  |L1.10184|
;;;4550   	//bat[in]._zar_cnt++;
;;;4551   	}
;;;4552   
;;;4553   if(main_10Hz_cnt==50)
0027c8  4ecb              LDR      r6,|L1.11000|
0027ca  8830              LDRH     r0,[r6,#0]  ; main_10Hz_cnt
0027cc  2832              CMP      r0,#0x32
0027ce  d10e              BNE      |L1.10222|
;;;4554   	{
;;;4555   	if(!bat[in]._rel_stat)
0027d0  f894003c          LDRB     r0,[r4,#0x3c]
0027d4  b958              CBNZ     r0,|L1.10222|
;;;4556   		{
;;;4557   		
;;;4558   		if(bat[in]._Ub<80) 
0027d6  f9b40002          LDRSH    r0,[r4,#2]
0027da  2850              CMP      r0,#0x50
0027dc  da07              BGE      |L1.10222|
;;;4559   			{
;;;4560   			
;;;4561   			if(!(bat[in]._av&1))
0027de  f894003d          LDRB     r0,[r4,#0x3d]
0027e2  07c0              LSLS     r0,r0,#31
0027e4  d103              BNE      |L1.10222|
;;;4562   				{
;;;4563   				avar_bat_hndl(in,1);
0027e6  2101              MOVS     r1,#1
0027e8  4628              MOV      r0,r5
0027ea  f7fffffe          BL       avar_bat_hndl
                  |L1.10222|
;;;4564   				//if(in==0)plazma_bat++;
;;;4565   				}
;;;4566   			}				
;;;4567   
;;;4568   		}
;;;4569   	}
;;;4570   
;;;4571   if(main_10Hz_cnt>200)
0027ee  f9b60000          LDRSH    r0,[r6,#0]  ; main_10Hz_cnt
;;;4572   	{
;;;4573   	if(abs(bat[in]._Ib)>IKB) 
0027f2  4ec2              LDR      r6,|L1.11004|
0027f4  28c8              CMP      r0,#0xc8              ;4571
0027f6  dd0f              BLE      |L1.10264|
0027f8  f9b40008          LDRSH    r0,[r4,#8]
0027fc  f7fffffe          BL       abs
002800  f9b61000          LDRSH    r1,[r6,#0]  ; IKB
002804  4288              CMP      r0,r1
002806  dd07              BLE      |L1.10264|
;;;4574   		{
;;;4575   		if((bat[in]._av&1))avar_bat_hndl(in,0);
002808  f894003d          LDRB     r0,[r4,#0x3d]
00280c  07c0              LSLS     r0,r0,#31
00280e  d003              BEQ      |L1.10264|
002810  2100              MOVS     r1,#0
002812  4628              MOV      r0,r5
002814  f7fffffe          BL       avar_bat_hndl
                  |L1.10264|
;;;4576   		}
;;;4577   	}
;;;4578   
;;;4579   
;;;4580   
;;;4581   if(bat[in]._Ib>(-IKB))
002818  49b8              LDR      r1,|L1.11004|
00281a  f9b40008          LDRSH    r0,[r4,#8]
00281e  f9b11000          LDRSH    r1,[r1,#0]  ; IKB
002822  4249              RSBS     r1,r1,#0
002824  4288              CMP      r0,r1
002826  dd12              BLE      |L1.10318|
;;;4582   	{
;;;4583   	if(bat[in]._cnt_wrk<10)
002828  7b60              LDRB     r0,[r4,#0xd]
00282a  280a              CMP      r0,#0xa
00282c  d20c              BCS      |L1.10312|
;;;4584   		{
;;;4585   		bat[in]._cnt_wrk++;
00282e  1c40              ADDS     r0,r0,#1
002830  b2c0              UXTB     r0,r0
002832  7360              STRB     r0,[r4,#0xd]
;;;4586   		if((bat[in]._cnt_wrk>=10)&&(bat[in]._wrk)) 
002834  280a              CMP      r0,#0xa
002836  d36e              BCC      |L1.10518|
002838  7ba0              LDRB     r0,[r4,#0xe]
00283a  2800              CMP      r0,#0
00283c  d06b              BEQ      |L1.10518|
;;;4587   			{
;;;4588   			bat[in]._wrk=0;
00283e  73a7              STRB     r7,[r4,#0xe]
;;;4589   			//beep_init(0x7L,'O');
;;;4590   			//wrk_mem_hndl(0);
;;;4591   			wrk_mem_hndl(in);
002840  4628              MOV      r0,r5
002842  f7fffffe          BL       wrk_mem_hndl
002846  e066              B        |L1.10518|
                  |L1.10312|
;;;4592   			//plazma++;
;;;4593   			}
;;;4594   		}
;;;4595   	else bat[in]._cnt_wrk=10;	
002848  200a              MOVS     r0,#0xa
00284a  7360              STRB     r0,[r4,#0xd]
00284c  e063              B        |L1.10518|
                  |L1.10318|
;;;4596   	}	
;;;4597   
;;;4598   else if(bat[in]._Ib<(-IKB))
00284e  da62              BGE      |L1.10518|
;;;4599   	{
;;;4600   	if(bat[in]._cnt_wrk)
002850  7b60              LDRB     r0,[r4,#0xd]
002852  2800              CMP      r0,#0
002854  d05f              BEQ      |L1.10518|
;;;4601   		{
;;;4602   		bat[in]._cnt_wrk--;
002856  1e40              SUBS     r0,r0,#1
002858  b2c0              UXTB     r0,r0
00285a  7360              STRB     r0,[r4,#0xd]
;;;4603   		if((bat[in]._cnt_wrk==0)&&(bat[in]._wrk==0)) 
00285c  2800              CMP      r0,#0
00285e  d15a              BNE      |L1.10518|
002860  7ba0              LDRB     r0,[r4,#0xe]
002862  2800              CMP      r0,#0
002864  d157              BNE      |L1.10518|
;;;4604   			{
;;;4605   			bat[in]._wrk=1;
002866  2001              MOVS     r0,#1
002868  73a0              STRB     r0,[r4,#0xe]
;;;4606   
;;;4607   				{
;;;4608   				char temp;
;;;4609   				signed short temp_temp;
;;;4610   				temp_temp=bat[in]._u_old[((bat_u_old_cnt+1)&0x07)];
00286a  48a5              LDR      r0,|L1.11008|
00286c  8800              LDRH     r0,[r0,#0]  ; bat_u_old_cnt
00286e  1c40              ADDS     r0,r0,#1
002870  f0000007          AND      r0,r0,#7
002874  eb040040          ADD      r0,r4,r0,LSL #1
002878  8c00              LDRH     r0,[r0,#0x20]
00287a  9000              STR      r0,[sp,#0]
;;;4611   			 
;;;4612   				temp=LPC_RTC->YEAR;
00287c  4ea1              LDR      r6,|L1.11012|
00287e  8bb0              LDRH     r0,[r6,#0x1c]
002880  9001              STR      r0,[sp,#4]
;;;4613   				gran_char((signed char*)&temp,1,99);
002882  f04f0263          MOV      r2,#0x63
002886  f04f0101          MOV      r1,#1
00288a  a801              ADD      r0,sp,#4
00288c  f7fffffe          BL       gran_char
;;;4614   				*((char*)(&(bat[in]._wrk_date[0])))=temp;
002890  f89d0004          LDRB     r0,[sp,#4]
002894  f104041c          ADD      r4,r4,#0x1c
002898  7620              STRB     r0,[r4,#0x18]
;;;4615   			
;;;4616   				temp=LPC_RTC->MONTH;
00289a  7e30              LDRB     r0,[r6,#0x18]
00289c  9001              STR      r0,[sp,#4]
;;;4617   				gran_char((signed char*)&temp,1,12);
00289e  f04f020c          MOV      r2,#0xc
0028a2  f04f0101          MOV      r1,#1
0028a6  a801              ADD      r0,sp,#4
0028a8  f7fffffe          BL       gran_char
;;;4618   				*(((char*)(&(bat[in]._wrk_date[0])))+1)=temp;
0028ac  f89d0004          LDRB     r0,[sp,#4]
0028b0  7660              STRB     r0,[r4,#0x19]
;;;4619   			
;;;4620   				temp=LPC_RTC->DOM;
0028b2  7b30              LDRB     r0,[r6,#0xc]
0028b4  9001              STR      r0,[sp,#4]
;;;4621   				gran_char((signed char*)&temp,1,31);
0028b6  221f              MOVS     r2,#0x1f
0028b8  2101              MOVS     r1,#1
0028ba  a801              ADD      r0,sp,#4
0028bc  f7fffffe          BL       gran_char
;;;4622   				*(((char*)(&(bat[in]._wrk_date[0])))+2)=temp;			
0028c0  f89d0004          LDRB     r0,[sp,#4]
0028c4  76a0              STRB     r0,[r4,#0x1a]
;;;4623   				
;;;4624   				*(((char*)(&(bat[in]._wrk_date[0])))+3)=*((char*)&temp_temp);
0028c6  f89d0000          LDRB     r0,[sp,#0]
0028ca  76e0              STRB     r0,[r4,#0x1b]
;;;4625   
;;;4626   				temp=LPC_RTC->HOUR;
0028cc  7a30              LDRB     r0,[r6,#8]
0028ce  9001              STR      r0,[sp,#4]
;;;4627   				gran_char((signed char*)&temp,0,23);
0028d0  2217              MOVS     r2,#0x17
0028d2  2100              MOVS     r1,#0
0028d4  a801              ADD      r0,sp,#4
0028d6  f7fffffe          BL       gran_char
;;;4628   				*((char*)(&(bat[in]._wrk_date[1])))=temp;
0028da  f89d0004          LDRB     r0,[sp,#4]
0028de  7720              STRB     r0,[r4,#0x1c]
;;;4629                  	
;;;4630   				temp=LPC_RTC->MIN;
0028e0  7930              LDRB     r0,[r6,#4]
0028e2  9001              STR      r0,[sp,#4]
;;;4631   				gran_char((signed char*)&temp,0,59);
0028e4  223b              MOVS     r2,#0x3b
0028e6  2100              MOVS     r1,#0
0028e8  a801              ADD      r0,sp,#4
0028ea  f7fffffe          BL       gran_char
;;;4632   				*(((char*)(&(bat[in]._wrk_date[1])))+1)=temp;
0028ee  f89d0004          LDRB     r0,[sp,#4]
0028f2  7760              STRB     r0,[r4,#0x1d]
;;;4633   	          
;;;4634   				temp=LPC_RTC->SEC;
0028f4  7830              LDRB     r0,[r6,#0]
0028f6  9001              STR      r0,[sp,#4]
;;;4635   				gran_char((signed char*)&temp,0,59);
0028f8  223b              MOVS     r2,#0x3b
0028fa  2100              MOVS     r1,#0
0028fc  a801              ADD      r0,sp,#4
0028fe  f7fffffe          BL       gran_char
;;;4636   				*(((char*)(&(bat[in]._wrk_date[1])))+2)=temp;
002902  f89d0004          LDRB     r0,[sp,#4]
002906  77a0              STRB     r0,[r4,#0x1e]
;;;4637   			
;;;4638   				*(((char*)(&(bat[in]._wrk_date[1])))+3)=*(((char*)&temp_temp)+1);
002908  f89d0001          LDRB     r0,[sp,#1]
00290c  77e0              STRB     r0,[r4,#0x1f]
;;;4639   				bat[in]._Iintegr=0;		//  
00290e  8027              STRH     r7,[r4,#0]
;;;4640   				bat[in]._Iintegr_=0;	//  
002910  8067              STRH     r7,[r4,#2]
002912  f1a4041c          SUB      r4,r4,#0x1c
                  |L1.10518|
;;;4641   				}
;;;4642   	
;;;4643   			}
;;;4644   
;;;4645   		}
;;;4646   	else bat[in]._cnt_wrk=0;	 
;;;4647   	
;;;4648   	}					
;;;4649   
;;;4650   /*
;;;4651   if(Ibat>=(-IKB))
;;;4652   	{
;;;4653   	if(cnt_wrk<10)
;;;4654   		{
;;;4655   		cnt_wrk++;
;;;4656   		if((cnt_wrk>=10)&&(wrk!=wrkOFF)) 
;;;4657   			{
;;;4658   			wrk=wrkOFF;
;;;4659   			//beep_init(0x7L,'O');
;;;4660   			wrk_mem_hndl(ibat_integr);
;;;4661   			}
;;;4662   		}
;;;4663   	else cnt_wrk=10;	
;;;4664   	}	
;;;4665   
;;;4666   else if((Ibat<(-IKB))&&(spc_stat!=spc_KE))
;;;4667   	{
;;;4668   	if(cnt_wrk)
;;;4669   		{
;;;4670   		cnt_wrk--;
;;;4671   		if((cnt_wrk==0)&&(wrk!=wrkON)) 
;;;4672   			{
;;;4673   			char temp;
;;;4674   			signed short temp_temp;
;;;4675   			temp_temp=ubat_old[((ubat_old_cnt+1)&0x07)];
;;;4676   			 
;;;4677   			wrk=wrkON;
;;;4678   			
;;;4679   			temp=_year;
;;;4680   			gran_char(&temp,1,99);
;;;4681   			*((char*)(&(wrk_date[0])))=temp;
;;;4682   			
;;;4683   			temp=_month;
;;;4684   			gran_char(&temp,1,12);
;;;4685   			*(((char*)(&(wrk_date[0])))+1)=temp;
;;;4686   			
;;;4687   			temp=_date;
;;;4688   			gran_char(&temp,1,31);
;;;4689   			*(((char*)(&(wrk_date[0])))+2)=temp;			
;;;4690   				
;;;4691   			*(((char*)(&(wrk_date[0])))+3)=*((char*)&temp_temp);
;;;4692   
;;;4693   			temp=_hour;
;;;4694   			gran_char(&temp,0,23);
;;;4695   			*((char*)(&(wrk_date[1])))=temp;
;;;4696                  
;;;4697   			temp=_min;
;;;4698   			gran_char(&temp,0,59);
;;;4699   			*(((char*)(&(wrk_date[1])))+1)=temp;
;;;4700   	          
;;;4701   			temp=_sec;
;;;4702   			gran_char(&temp,0,59);
;;;4703   			*(((char*)(&(wrk_date[1])))+2)=temp;
;;;4704   			
;;;4705   			*(((char*)(&(wrk_date[1])))+3)=*(((char*)&temp_temp)+1);
;;;4706   
;;;4707   			
;;;4708   			//beep_init(0xFL,'O'); 
;;;4709   			ibat_integr=0;
;;;4710   			ibat_integr_=0;
;;;4711   			}
;;;4712   		}
;;;4713   	else cnt_wrk=0;	 
;;;4714   	
;;;4715   	}
;;;4716   if(wrk==wrkON)
;;;4717   	{
;;;4718   	ibat_integr_+=-Ibat;
;;;4719   	if(ibat_integr_>=SEC_IN_HOUR*10L)
;;;4720   		{
;;;4721   		ibat_integr_-=SEC_IN_HOUR*10L;
;;;4722   		ibat_integr++;
;;;4723   		}
;;;4724   	}
;;;4725   
;;;4726   */
;;;4727   
;;;4728   
;;;4729   /*if(bat[in]._cnt_to_block)
;;;4730   	{
;;;4731   	bat[in]._cnt_to_block--;
;;;4732   	if(!(bat[in]._cnt_to_block))
;;;4733   		{
;;;4734   		//bat[in]._rel_stat=1;
;;;4735   		}
;;;4736   	}
;;;4737   */
;;;4738   
;;;4739   
;;;4740   
;;;4741   
;;;4742   //unsigned int tempUI,tempUI_;
;;;4743   //unsigned int b_zar; 
;;;4744   //char i;
;;;4745   //Ibat[0]=5000;                     
;;;4746   
;;;4747   
;;;4748                               
;;;4749   if(bat[in]._time_cnt==0)
002916  f894003e          LDRB     r0,[r4,#0x3e]
;;;4750   	{
;;;4751   	bat[in]._zar_cnt+=(signed long)bat[in]._Ib;
;;;4752   	
;;;4753   	if(bat[in]._zar_cnt>=AH_CONSTANT)
00291a  f64848a0          MOV      r8,#0x8ca0
00291e  2800              CMP      r0,#0                 ;4749
002920  d170              BNE      |L1.10756|
002922  f9b41008          LDRSH    r1,[r4,#8]            ;4751
002926  6960              LDR      r0,[r4,#0x14]         ;4751
002928  4408              ADD      r0,r0,r1              ;4751
00292a  6160              STR      r0,[r4,#0x14]         ;4751
;;;4754   		{
;;;4755   		if(BAT_C_REAL[in]==0x5555) tempUS_=BAT_C_NOM[in];
;;;4756   		else tempUS_=BAT_C_REAL[in];
;;;4757   		
;;;4758   		b_zar=lc640_read_int(ADR_EE_BAT_ZAR_CNT[in]);
00292c  f8df91d8          LDR      r9,|L1.11016|
002930  f8dfa1d8          LDR      r10,|L1.11020|
002934  4540              CMP      r0,r8                 ;4753
002936  db29              BLT      |L1.10636|
002938  f93a1015          LDRSH    r1,[r10,r5,LSL #1]    ;4755
00293c  f5a140aa          SUB      r0,r1,#0x5500         ;4755
002940  3855              SUBS     r0,r0,#0x55           ;4755
002942  d103              BNE      |L1.10572|
002944  4872              LDR      r0,|L1.11024|
002946  f8306015          LDRH     r6,[r0,r5,LSL #1]     ;4755
00294a  e001              B        |L1.10576|
                  |L1.10572|
00294c  f83a6015          LDRH     r6,[r10,r5,LSL #1]    ;4756
                  |L1.10576|
002950  f8390015          LDRH     r0,[r9,r5,LSL #1]
002954  f7fffffe          BL       lc640_read_int
002958  b281              UXTH     r1,r0
;;;4759   
;;;4760   		if(b_zar<(tempUS_/**10*/))
00295a  42b1              CMP      r1,r6
00295c  d20d              BCS      |L1.10618|
;;;4761   			{
;;;4762   			bat[in]._zar_cnt-=AH_CONSTANT;
00295e  6960              LDR      r0,[r4,#0x14]
002960  f5a04000          SUB      r0,r0,#0x8000
002964  f5a0604a          SUB      r0,r0,#0xca0
002968  6160              STR      r0,[r4,#0x14]
;;;4763   
;;;4764   			lc640_write_int(ADR_EE_BAT_ZAR_CNT[in],b_zar+1);
00296a  f1010101          ADD      r1,r1,#1
00296e  f9390015          LDRSH    r0,[r9,r5,LSL #1]
002972  b209              SXTH     r1,r1
002974  f7fffffe          BL       lc640_write_int
002978  e031              B        |L1.10718|
                  |L1.10618|
;;;4765   			}
;;;4766   		else if(b_zar>(tempUS_/**10*/))  
00297a  d930              BLS      |L1.10718|
;;;4767   			{
;;;4768   			lc640_write_int(ADR_EE_BAT_ZAR_CNT[in],tempUS_);
00297c  f9390015          LDRSH    r0,[r9,r5,LSL #1]
002980  b231              SXTH     r1,r6
002982  f7fffffe          BL       lc640_write_int
;;;4769   			bat[in]._zar_cnt=AH_CONSTANT;
002986  f8c48014          STR      r8,[r4,#0x14]
00298a  e028              B        |L1.10718|
                  |L1.10636|
;;;4770   
;;;4771   			}
;;;4772   
;;;4773   		}
;;;4774   
;;;4775   	else if(bat[in]._zar_cnt<=-AH_CONSTANT)
00298c  4961              LDR      r1,|L1.11028|
00298e  4288              CMP      r0,r1
002990  dc25              BGT      |L1.10718|
;;;4776   		{
;;;4777   		if(BAT_C_REAL[in]==0x5555) tempUS_=BAT_C_NOM[in];
002992  f93a0015          LDRSH    r0,[r10,r5,LSL #1]
002996  f5a041aa          SUB      r1,r0,#0x5500
00299a  3955              SUBS     r1,r1,#0x55
00299c  d103              BNE      |L1.10662|
00299e  485c              LDR      r0,|L1.11024|
0029a0  f8306015          LDRH     r6,[r0,r5,LSL #1]
0029a4  e001              B        |L1.10666|
                  |L1.10662|
;;;4778   		else tempUS_=BAT_C_REAL[in];
0029a6  f83a6015          LDRH     r6,[r10,r5,LSL #1]
                  |L1.10666|
;;;4779   		
;;;4780   		b_zar=lc640_read_int(ADR_EE_BAT_ZAR_CNT[in]);
0029aa  f8390015          LDRH     r0,[r9,r5,LSL #1]
0029ae  f7fffffe          BL       lc640_read_int
0029b2  b281              UXTH     r1,r0
;;;4781   
;;;4782   		if(b_zar>tempUS_)
0029b4  42b1              CMP      r1,r6
0029b6  d905              BLS      |L1.10692|
;;;4783   			{
;;;4784   			lc640_write_int(ADR_EE_BAT_ZAR_CNT[in],tempUS_);
0029b8  f9390015          LDRSH    r0,[r9,r5,LSL #1]
0029bc  b231              SXTH     r1,r6
0029be  f7fffffe          BL       lc640_write_int
;;;4785   			b_zar=tempUS_;
0029c2  4631              MOV      r1,r6
                  |L1.10692|
;;;4786   			}
;;;4787   		if(b_zar)
0029c4  b149              CBZ      r1,|L1.10714|
;;;4788   			{
;;;4789   			bat[in]._zar_cnt+=AH_CONSTANT;
0029c6  6960              LDR      r0,[r4,#0x14]
0029c8  4440              ADD      r0,r0,r8
0029ca  6160              STR      r0,[r4,#0x14]
;;;4790   
;;;4791   			lc640_write_int(ADR_EE_BAT_ZAR_CNT[in],b_zar-1);
0029cc  1e49              SUBS     r1,r1,#1
0029ce  f9390015          LDRSH    r0,[r9,r5,LSL #1]
0029d2  b209              SXTH     r1,r1
0029d4  f7fffffe          BL       lc640_write_int
0029d8  e001              B        |L1.10718|
                  |L1.10714|
;;;4792   			}
;;;4793   		else 
;;;4794   			{
;;;4795   			bat[in]._zar_cnt=-AH_CONSTANT;
0029da  484e              LDR      r0,|L1.11028|
0029dc  6160              STR      r0,[r4,#0x14]
                  |L1.10718|
;;;4796   			}
;;;4797   
;;;4798   		}
;;;4799   
;;;4800   			
;;;4801   	tempUL=(unsigned long)lc640_read_int(ADR_EE_BAT_ZAR_CNT[in]);
0029de  f8390015          LDRH     r0,[r9,r5,LSL #1]
0029e2  f7fffffe          BL       lc640_read_int
;;;4802   	
;;;4803   	if(BAT_C_REAL[in]==0x5555) tempUL_=(unsigned long)BAT_C_NOM[in];
0029e6  f93a1015          LDRSH    r1,[r10,r5,LSL #1]
0029ea  f5a142aa          SUB      r2,r1,#0x5500
0029ee  3a55              SUBS     r2,r2,#0x55
0029f0  d102              BNE      |L1.10744|
0029f2  4947              LDR      r1,|L1.11024|
0029f4  f9311015          LDRSH    r1,[r1,r5,LSL #1]
                  |L1.10744|
;;;4804   	else tempUL_=(unsigned long)BAT_C_REAL[in];
;;;4805   		           	
;;;4806   	tempUL*=1000L;
0029f8  f44f727a          MOV      r2,#0x3e8
0029fc  4350              MULS     r0,r2,r0
;;;4807   
;;;4808   
;;;4809   	if(tempUL_==0) tempUL=0;
0029fe  b911              CBNZ     r1,|L1.10758|
002a00  2000              MOVS     r0,#0
002a02  e002              B        |L1.10762|
                  |L1.10756|
002a04  e018              B        |L1.10808|
                  |L1.10758|
;;;4810   	else tempUL/=tempUL_;
002a06  fbb0f0f1          UDIV     r0,r0,r1
                  |L1.10762|
;;;4811   
;;;4812   	tempUL/=10L;
002a0a  210a              MOVS     r1,#0xa
002a0c  fbb0f0f1          UDIV     r0,r0,r1
;;;4813   
;;;4814   	bat[in]._zar=(unsigned short)tempUL;
002a10  8220              STRH     r0,[r4,#0x10]
;;;4815   
;;;4816   	if(BAT_TYPE==1)
002a12  4841              LDR      r0,|L1.11032|
002a14  8800              LDRH     r0,[r0,#0]  ; BAT_TYPE
002a16  2801              CMP      r0,#1
002a18  d108              BNE      |L1.10796|
;;;4817   		{
;;;4818   		bat[in]._zar=lakb[in]._s_o_c;
002a1a  eb050085          ADD      r0,r5,r5,LSL #2
002a1e  493f              LDR      r1,|L1.11036|
002a20  eb0000c5          ADD      r0,r0,r5,LSL #3
002a24  eb010080          ADD      r0,r1,r0,LSL #2
002a28  8a40              LDRH     r0,[r0,#0x12]
002a2a  8220              STRH     r0,[r4,#0x10]
                  |L1.10796|
;;;4819   		}
;;;4820   	
;;;4821   	gran((signed short*)&bat[in]._zar,0,100);
002a2c  f1040010          ADD      r0,r4,#0x10
002a30  2264              MOVS     r2,#0x64
002a32  2100              MOVS     r1,#0
002a34  f7fffffe          BL       gran
                  |L1.10808|
;;;4822        }
;;;4823   
;;;4824   
;;;4825   //         
;;;4826   if(bat[in]._wrk==1)
002a38  7ba0              LDRB     r0,[r4,#0xe]
002a3a  2801              CMP      r0,#1
002a3c  d112              BNE      |L1.10852|
;;;4827   	{
;;;4828   	if(bat[in]._Iintegr<36000)
002a3e  8ba0              LDRH     r0,[r4,#0x1c]
002a40  4540              CMP      r0,r8
002a42  d20e              BCS      |L1.10850|
;;;4829   		{          
;;;4830   		bat[in]._Iintegr+=abs(bat[in]._Ib);
002a44  f9b40008          LDRSH    r0,[r4,#8]
002a48  f7fffffe          BL       abs
002a4c  8ba1              LDRH     r1,[r4,#0x1c]
002a4e  4408              ADD      r0,r0,r1
002a50  b280              UXTH     r0,r0
002a52  83a0              STRH     r0,[r4,#0x1c]
;;;4831   		if(bat[in]._Iintegr>=36000)
002a54  4540              CMP      r0,r8
002a56  d305              BCC      |L1.10852|
;;;4832   			{
;;;4833   			bat[in]._Iintegr=0;		//  
002a58  83a7              STRH     r7,[r4,#0x1c]
;;;4834   			bat[in]._Iintegr_++;	//  
002a5a  8be0              LDRH     r0,[r4,#0x1e]
002a5c  1c40              ADDS     r0,r0,#1
002a5e  83e0              STRH     r0,[r4,#0x1e]
002a60  e000              B        |L1.10852|
                  |L1.10850|
;;;4835   			}
;;;4836   		}
;;;4837   	else 
;;;4838   		{
;;;4839   		bat[in]._Iintegr=0;
002a62  83a7              STRH     r7,[r4,#0x1c]
                  |L1.10852|
;;;4840   		}	
;;;4841   	} 
;;;4842   	    
;;;4843   //
;;;4844   if((bat[in]._Tb>TBATSIGN)&&(!bat[in]._nd))	
002a64  492e              LDR      r1,|L1.11040|
002a66  f9b4000a          LDRSH    r0,[r4,#0xa]
002a6a  f9b11000          LDRSH    r1,[r1,#0]  ; TBATSIGN
002a6e  4288              CMP      r0,r1
002a70  dd07              BLE      |L1.10882|
002a72  7b20              LDRB     r0,[r4,#0xc]
002a74  b928              CBNZ     r0,|L1.10882|
;;;4845   	{
;;;4846   	bat[in]._sign_temper_cnt++;
002a76  f8b40040          LDRH     r0,[r4,#0x40]
002a7a  1c40              ADDS     r0,r0,#1
002a7c  f8a40040          STRH     r0,[r4,#0x40]
002a80  e004              B        |L1.10892|
                  |L1.10882|
;;;4847   	}
;;;4848   else 
;;;4849   	{
;;;4850   	bat[in]._sign_temper_cnt--;
002a82  f8b40040          LDRH     r0,[r4,#0x40]
002a86  1e40              SUBS     r0,r0,#1
002a88  f8a40040          STRH     r0,[r4,#0x40]
                  |L1.10892|
;;;4851   	}
;;;4852   
;;;4853   gran(&bat[in]._sign_temper_cnt,0,600);
002a8c  f44f7616          MOV      r6,#0x258
002a90  f1040040          ADD      r0,r4,#0x40
002a94  4632              MOV      r2,r6
002a96  2100              MOVS     r1,#0
002a98  f7fffffe          BL       gran
;;;4854   if(bat[in]._sign_temper_cnt>=590)	bat[in]._temper_stat|=(1<<0);
002a9c  f9b40040          LDRSH    r0,[r4,#0x40]
002aa0  f240294e          MOV      r9,#0x24e
002aa4  4548              CMP      r0,r9
002aa6  db05              BLT      |L1.10932|
002aa8  f894103f          LDRB     r1,[r4,#0x3f]
002aac  f0410101          ORR      r1,r1,#1
002ab0  f884103f          STRB     r1,[r4,#0x3f]
                  |L1.10932|
;;;4855   if(bat[in]._sign_temper_cnt<=10)	bat[in]._temper_stat&=~(1<<0);
002ab4  280a              CMP      r0,#0xa
002ab6  dc05              BGT      |L1.10948|
002ab8  f894003f          LDRB     r0,[r4,#0x3f]
002abc  f0200001          BIC      r0,r0,#1
002ac0  f884003f          STRB     r0,[r4,#0x3f]
                  |L1.10948|
;;;4856   
;;;4857   
;;;4858   if((bat[in]._Tb>TBATMAX)&&(!bat[in]._nd))	
002ac4  4917              LDR      r1,|L1.11044|
002ac6  f9b4000a          LDRSH    r0,[r4,#0xa]
002aca  f9b11000          LDRSH    r1,[r1,#0]  ; TBATMAX
002ace  4288              CMP      r0,r1
002ad0  dd2f              BLE      |L1.11058|
002ad2  7b20              LDRB     r0,[r4,#0xc]
002ad4  bb40              CBNZ     r0,|L1.11048|
;;;4859   	{
;;;4860   	bat[in]._max_temper_cnt++;
002ad6  f8b40042          LDRH     r0,[r4,#0x42]
002ada  e026              B        |L1.11050|
                  |L1.10972|
                          DCD      TLOADDISABLE
                  |L1.10976|
                          DCD      tloaddisable_stat
                  |L1.10980|
                          DCD      tloaddisable_cnt
                  |L1.10984|
                          DCD      TLOADENABLE
                  |L1.10988|
                          DCD      ||area_number.21||+0x7c
                  |L1.10992|
                          DCD      bat
                  |L1.10996|
                          DCD      IZMAX
                  |L1.11000|
                          DCD      main_10Hz_cnt
                  |L1.11004|
                          DCD      IKB
                  |L1.11008|
                          DCD      bat_u_old_cnt
                  |L1.11012|
                          DCD      0x40024020
                  |L1.11016|
                          DCD      ADR_EE_BAT_ZAR_CNT
                  |L1.11020|
                          DCD      BAT_C_REAL
                  |L1.11024|
                          DCD      BAT_C_NOM
                  |L1.11028|
                          DCD      0xffff7360
                  |L1.11032|
                          DCD      BAT_TYPE
                  |L1.11036|
                          DCD      lakb
                  |L1.11040|
                          DCD      TBATSIGN
                  |L1.11044|
                          DCD      TBATMAX
                  |L1.11048|
002b28  e003              B        |L1.11058|
                  |L1.11050|
002b2a  1c40              ADDS     r0,r0,#1
002b2c  f8a40042          STRH     r0,[r4,#0x42]
002b30  e004              B        |L1.11068|
                  |L1.11058|
;;;4861   	}
;;;4862   else 
;;;4863   	{
;;;4864   	bat[in]._max_temper_cnt--;
002b32  f8b40042          LDRH     r0,[r4,#0x42]
002b36  1e40              SUBS     r0,r0,#1
002b38  f8a40042          STRH     r0,[r4,#0x42]
                  |L1.11068|
;;;4865   	}
;;;4866   
;;;4867   gran(&bat[in]._max_temper_cnt,0,600);
002b3c  f1040042          ADD      r0,r4,#0x42
002b40  4632              MOV      r2,r6
002b42  2100              MOVS     r1,#0
002b44  f7fffffe          BL       gran
;;;4868   if(bat[in]._max_temper_cnt>=590)	bat[in]._temper_stat|=(1<<1);
002b48  f9b40042          LDRSH    r0,[r4,#0x42]
002b4c  4548              CMP      r0,r9
002b4e  db05              BLT      |L1.11100|
002b50  f894103f          LDRB     r1,[r4,#0x3f]
002b54  f0410102          ORR      r1,r1,#2
002b58  f884103f          STRB     r1,[r4,#0x3f]
                  |L1.11100|
;;;4869   if(bat[in]._max_temper_cnt<=10)	bat[in]._temper_stat&=~(1<<1);
002b5c  280a              CMP      r0,#0xa
002b5e  dc05              BGT      |L1.11116|
002b60  f894003f          LDRB     r0,[r4,#0x3f]
002b64  f0200002          BIC      r0,r0,#2
002b68  f884003f          STRB     r0,[r4,#0x3f]
                  |L1.11116|
;;;4870   
;;;4871   
;;;4872   
;;;4873   //  
;;;4874   if(bat[in]._resurs_cnt<36000)
002b6c  6c60              LDR      r0,[r4,#0x44]
002b6e  4540              CMP      r0,r8
002b70  da11              BGE      |L1.11158|
;;;4875   	{               
;;;4876   	bat[in]._resurs_cnt++;
002b72  1c40              ADDS     r0,r0,#1
002b74  6460              STR      r0,[r4,#0x44]
;;;4877   	if(bat[in]._resurs_cnt>=36000)
002b76  4540              CMP      r0,r8
002b78  db0e              BLT      |L1.11160|
;;;4878   		{
;;;4879   		bat[in]._resurs_cnt=0;
002b7a  6467              STR      r7,[r4,#0x44]
;;;4880   		lc640_write_int(ADR_EE_BAT_RESURS[in],lc640_read_int(ADR_EE_BAT_RESURS[in])+1);
002b7c  f8df8410          LDR      r8,|L1.12176|
002b80  f8380015          LDRH     r0,[r8,r5,LSL #1]
002b84  f7fffffe          BL       lc640_read_int
002b88  1c40              ADDS     r0,r0,#1
002b8a  b201              SXTH     r1,r0
002b8c  f9380015          LDRSH    r0,[r8,r5,LSL #1]
002b90  f7fffffe          BL       lc640_write_int
002b94  e000              B        |L1.11160|
                  |L1.11158|
;;;4881   		}
;;;4882   	}
;;;4883   else bat[in]._resurs_cnt=0;
002b96  6467              STR      r7,[r4,#0x44]
                  |L1.11160|
;;;4884   
;;;4885   
;;;4886   #ifndef UKU_220_V2
;;;4887   #ifndef UKU_GLONASS
;;;4888   #ifndef UKU_6U
;;;4889   //#ifndef UKU_220
;;;4890   if(UBM_AV)
002b98  f8df83f8          LDR      r8,|L1.12180|
002b9c  f8b80000          LDRH     r0,[r8,#0]  ; UBM_AV
002ba0  2800              CMP      r0,#0
002ba2  d055              BEQ      |L1.11344|
;;;4891        {
;;;4892        signed short temp_SS;
;;;4893   #ifdef UKU_220
;;;4894   temp_SS=bat[in]._Ub/2;
;;;4895   #else
;;;4896        if(U0B<600)
002ba4  48fc              LDR      r0,|L1.12184|
002ba6  f9b00000          LDRSH    r0,[r0,#0]  ; U0B
002baa  42b0              CMP      r0,r6
002bac  da06              BGE      |L1.11196|
;;;4897             {
;;;4898             temp_SS=bat[in]._Ub/4;
002bae  f9b40002          LDRSH    r0,[r4,#2]
002bb2  17c1              ASRS     r1,r0,#31
002bb4  eb007091          ADD      r0,r0,r1,LSR #30
002bb8  1080              ASRS     r0,r0,#2
002bba  e005              B        |L1.11208|
                  |L1.11196|
;;;4899             }
;;;4900        else temp_SS=bat[in]._Ub/5;
002bbc  f9b40002          LDRSH    r0,[r4,#2]
002bc0  2105              MOVS     r1,#5
002bc2  fb90f0f1          SDIV     r0,r0,r1
002bc6  b200              SXTH     r0,r0
                  |L1.11208|
;;;4901   	
;;;4902   	temp_SS+=temp_SS;     
002bc8  0040              LSLS     r0,r0,#1
;;;4903   #endif
;;;4904        temp_SS-=(bat[in]._Ubm);
002bca  88a1              LDRH     r1,[r4,#4]
002bcc  1a40              SUBS     r0,r0,r1
002bce  b200              SXTH     r0,r0
;;;4905   
;;;4906        temp_SS=abs(temp_SS);
002bd0  f7fffffe          BL       abs
;;;4907   
;;;4908        temp_SS*=10;
002bd4  eb000080          ADD      r0,r0,r0,LSL #2
002bd8  0040              LSLS     r0,r0,#1
002bda  b200              SXTH     r0,r0
;;;4909   
;;;4910        temp_SS/=12;
002bdc  210c              MOVS     r1,#0xc
002bde  fb90f0f1          SDIV     r0,r0,r1
002be2  b200              SXTH     r0,r0
;;;4911   
;;;4912        bat[in]._dUbm=temp_SS;
002be4  80e0              STRH     r0,[r4,#6]
;;;4913   
;;;4914   
;;;4915        if(	(bat[in]._dUbm>UBM_AV) &&
002be6  f9b81000          LDRSH    r1,[r8,#0]  ; UBM_AV
002bea  4288              CMP      r0,r1
002bec  dd32              BLE      |L1.11348|
;;;4916   		(abs(bat[in]._Ib)<(5*IKB)) &&
002bee  f9b40008          LDRSH    r0,[r4,#8]
002bf2  f7fffffe          BL       abs
002bf6  49e9              LDR      r1,|L1.12188|
002bf8  f9b11000          LDRSH    r1,[r1,#0]  ; IKB
002bfc  eb010181          ADD      r1,r1,r1,LSL #2
002c00  4288              CMP      r0,r1
002c02  da27              BGE      |L1.11348|
;;;4917   		(bat[in]._Ub>((short)(((long)USIGN*115)/100))) &&
002c04  48e6              LDR      r0,|L1.12192|
002c06  2173              MOVS     r1,#0x73
002c08  f9b00000          LDRSH    r0,[r0,#0]  ; USIGN
002c0c  4348              MULS     r0,r1,r0
002c0e  fb90f0fb          SDIV     r0,r0,r11
002c12  f9b41002          LDRSH    r1,[r4,#2]
002c16  b200              SXTH     r0,r0
002c18  4288              CMP      r0,r1
002c1a  da1b              BGE      |L1.11348|
;;;4918   		(!(bat[in]._av & 2))  )
002c1c  f894003d          LDRB     r0,[r4,#0x3d]
002c20  0780              LSLS     r0,r0,#30
002c22  d417              BMI      |L1.11348|
;;;4919   		{
;;;4920   		bat[in]._cnt_as++;
002c24  f8b40048          LDRH     r0,[r4,#0x48]
002c28  1c40              ADDS     r0,r0,#1
002c2a  b200              SXTH     r0,r0
002c2c  f8a40048          STRH     r0,[r4,#0x48]
;;;4921   		if(bat[in]._cnt_as==3000)
002c30  f5a06130          SUB      r1,r0,#0xb00
002c34  39b8              SUBS     r1,r1,#0xb8
002c36  d103              BNE      |L1.11328|
;;;4922   			{
;;;4923   			avar_bat_as_hndl(in,1);
002c38  2101              MOVS     r1,#1
002c3a  4628              MOV      r0,r5
002c3c  f7fffffe          BL       avar_bat_as_hndl
                  |L1.11328|
;;;4924   			}
;;;4925   		if(bat[in]._cnt_as>=3005) bat[in]._cnt_as=3005;
002c40  f9b41048          LDRSH    r1,[r4,#0x48]
002c44  f64030bd          MOV      r0,#0xbbd
002c48  4281              CMP      r1,r0
002c4a  db01              BLT      |L1.11344|
002c4c  f8a40048          STRH     r0,[r4,#0x48]
                  |L1.11344|
;;;4926   		}
;;;4927   	else 
;;;4928   		{
;;;4929   		bat[in]._cnt_as=0;
;;;4930   		}
;;;4931        
;;;4932        }
;;;4933   #endif 
;;;4934   #endif 
;;;4935   #endif
;;;4936   
;;;4937   }
002c50  e8bd9ffc          POP      {r2-r12,pc}
                  |L1.11348|
002c54  f8a47048          STRH     r7,[r4,#0x48]         ;4929
002c58  e7fa              B        |L1.11344|
;;;4938   
                          ENDP

                  u_necc_hndl PROC
;;;4945   //-----------------------------------------------
;;;4946   void u_necc_hndl(void)
002c5a  b538              PUSH     {r3-r5,lr}
;;;4947   {
;;;4948   signed long temp_L;
;;;4949   signed long temp_SL;
;;;4950   //signed short temp_SS;
;;;4951   signed short t[2];
;;;4952   char i;
;;;4953   
;;;4954   //temp_SS=0;
;;;4955   
;;;4956   #ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;4957   
;;;4958   if(!TERMOKOMPENS)
002c5c  48d1              LDR      r0,|L1.12196|
;;;4959   	{
;;;4960   	u_necc=U0B;
002c5e  4cd2              LDR      r4,|L1.12200|
002c60  8800              LDRH     r0,[r0,#0]            ;4958  ; TERMOKOMPENS
002c62  b918              CBNZ     r0,|L1.11372|
002c64  48cc              LDR      r0,|L1.12184|
002c66  8800              LDRH     r0,[r0,#0]  ; U0B
002c68  8020              STRH     r0,[r4,#0]
002c6a  e02c              B        |L1.11462|
                  |L1.11372|
;;;4961   	}
;;;4962   else
;;;4963   	{
;;;4964   	if(ND_EXT[0])t[0]=20;
002c6c  48cf              LDR      r0,|L1.12204|
002c6e  6800              LDR      r0,[r0,#0]  ; ND_EXT
002c70  b118              CBZ      r0,|L1.11386|
002c72  2014              MOVS     r0,#0x14
002c74  f8ad0000          STRH     r0,[sp,#0]
002c78  e003              B        |L1.11394|
                  |L1.11386|
;;;4965   	else t[0]=t_ext[0];
002c7a  48cd              LDR      r0,|L1.12208|
002c7c  8800              LDRH     r0,[r0,#0]  ; t_ext
002c7e  f8ad0000          STRH     r0,[sp,#0]
                  |L1.11394|
;;;4966   
;;;4967   	mat_temper=t[0];
002c82  4acc              LDR      r2,|L1.12212|
002c84  f9bd1000          LDRSH    r1,[sp,#0]
002c88  6011              STR      r1,[r2,#0]  ; mat_temper
;;;4968   			
;;;4969   	if(mat_temper<0)temp_SL=UB0; 
002c8a  48cb              LDR      r0,|L1.12216|
002c8c  2900              CMP      r1,#0
002c8e  f9b00000          LDRSH    r0,[r0,#0]
002c92  db10              BLT      |L1.11446|
;;;4970   	else 
;;;4971   		{
;;;4972   		if(mat_temper>40)mat_temper=40; 
002c94  2928              CMP      r1,#0x28
002c96  dd01              BLE      |L1.11420|
002c98  2128              MOVS     r1,#0x28
002c9a  6011              STR      r1,[r2,#0]  ; mat_temper
                  |L1.11420|
;;;4973   		temp_SL=(UB20-UB0)*10;
002c9c  49c7              LDR      r1,|L1.12220|
002c9e  f9b11000          LDRSH    r1,[r1,#0]  ; UB20
002ca2  1a09              SUBS     r1,r1,r0
002ca4  eb010181          ADD      r1,r1,r1,LSL #2
002ca8  0049              LSLS     r1,r1,#1
;;;4974   		temp_SL*=mat_temper;
002caa  6812              LDR      r2,[r2,#0]  ; mat_temper
002cac  4351              MULS     r1,r2,r1
;;;4975   		temp_SL/=200;
002cae  22c8              MOVS     r2,#0xc8
002cb0  fb91f1f2          SDIV     r1,r1,r2
;;;4976   		temp_SL+=UB0;
002cb4  4408              ADD      r0,r0,r1
                  |L1.11446|
;;;4977   		}
;;;4978   	if(spc_stat==spcVZ)
002cb6  49c2              LDR      r1,|L1.12224|
002cb8  7cc9              LDRB     r1,[r1,#0x13]  ; spc_stat
002cba  2902              CMP      r1,#2
002cbc  d102              BNE      |L1.11460|
;;;4979   		{
;;;4980   		temp_SL=UVZ;
002cbe  48c1              LDR      r0,|L1.12228|
002cc0  f9b00000          LDRSH    r0,[r0,#0]  ; UVZ
                  |L1.11460|
;;;4981   		}
;;;4982   	u_necc=(unsigned int)temp_SL;
002cc4  8020              STRH     r0,[r4,#0]
                  |L1.11462|
;;;4983   	///u_necc=3456;
;;;4984   	}  
;;;4985   
;;;4986   //u_necc=2355;
;;;4987   
;;;4988   if(speedChIsOn)
002cc6  48c0              LDR      r0,|L1.12232|
002cc8  8800              LDRH     r0,[r0,#0]  ; speedChIsOn
002cca  b110              CBZ      r0,|L1.11474|
;;;4989   	{
;;;4990   	u_necc=speedChrgVolt;
002ccc  48bf              LDR      r0,|L1.12236|
002cce  8800              LDRH     r0,[r0,#0]  ; speedChrgVolt
002cd0  8020              STRH     r0,[r4,#0]
                  |L1.11474|
;;;4991   	}
;;;4992   
;;;4993   if(mess_find_unvol(MESS2UNECC_HNDL))
002cd2  20be              MOVS     r0,#0xbe
002cd4  f7fffffe          BL       mess_find_unvol
002cd8  b128              CBZ      r0,|L1.11494|
;;;4994   	{		
;;;4995   	if(mess_data[0]==PARAM_UNECC_SET)
002cda  48bd              LDR      r0,|L1.12240|
002cdc  6801              LDR      r1,[r0,#0]  ; mess_data
002cde  29bf              CMP      r1,#0xbf
002ce0  d101              BNE      |L1.11494|
;;;4996   		{
;;;4997   		u_necc=mess_data[1];
002ce2  6840              LDR      r0,[r0,#4]  ; mess_data
002ce4  8020              STRH     r0,[r4,#0]
                  |L1.11494|
;;;4998   		}		
;;;4999   	}
;;;5000   #endif
;;;5001   
;;;5002   
;;;5003   #ifndef UKU_220_IPS_TERMOKOMPENSAT
;;;5004   
;;;5005   #ifndef UKU_TELECORE2015
;;;5006   if(unh_cnt0<10)
;;;5007   	{
;;;5008   	unh_cnt0++;
;;;5009   	if(unh_cnt0>=10)
;;;5010   		{
;;;5011   		unh_cnt0=0;
;;;5012   		b1Hz_unh=1;
;;;5013   		}
;;;5014   	}
;;;5015   
;;;5016   if(unh_cnt1<5)
;;;5017   	{
;;;5018   	unh_cnt1++;
;;;5019   	if(unh_cnt1==5)
;;;5020   		{
;;;5021   		unh_cnt1=0;
;;;5022   //		b2Hz_unh=1;
;;;5023   		}
;;;5024   	} 
;;;5025   
;;;5026   
;;;5027   
;;;5028   if(mess_find_unvol(MESS2UNECC_HNDL))
;;;5029   	{		
;;;5030   	if(mess_data[0]==PARAM_UNECC_SET)
;;;5031   		{
;;;5032   		u_necc=mess_data[1];
;;;5033   		}		
;;;5034   	}
;;;5035   
;;;5036   
;;;5037   else if(b1Hz_unh)
;;;5038   	{
;;;5039   	
;;;5040   	if((BAT_IS_ON[0]!=bisON) && (BAT_IS_ON[1]!=bisON))
;;;5041   		{
;;;5042   		
;;;5043   		u_necc=U0B;
;;;5044   		}
;;;5045   	else 
;;;5046   		{
;;;5047   		if(BAT_TYPE==0) //  
;;;5048   			{
;;;5049   			for(i=0;i<2;i++)
;;;5050   				{
;;;5051   				if(BAT_IS_ON[i]==bisON)
;;;5052   					{
;;;5053   					if(bat[i]._nd)t[i]=20;
;;;5054   					else t[i]=bat[i]._Tb;
;;;5055   					}
;;;5056   				else
;;;5057   					{
;;;5058   					t[i]=-20;
;;;5059   					}
;;;5060   				}
;;;5061   			if(t[0]>t[1])mat_temper=t[0];
;;;5062   			else mat_temper=t[1];
;;;5063   			
;;;5064   		
;;;5065   			if(mat_temper<0)temp_SL=UB0; 
;;;5066   			else 
;;;5067   				{
;;;5068   				if(mat_temper>40)mat_temper=40; 
;;;5069   				temp_SL=(UB20-UB0)*10;
;;;5070   				temp_SL*=mat_temper;
;;;5071   				temp_SL/=200;
;;;5072   				temp_SL+=UB0;
;;;5073   				}
;;;5074   			if(spc_stat==spcVZ)
;;;5075   				{
;;;5076   				temp_SL=UVZ;
;;;5077   				}
;;;5078   			u_necc=(unsigned int)temp_SL;
;;;5079   			}
;;;5080   		else if(BAT_TYPE==1) //  
;;;5081   			{
;;;5082   			u_necc=U0B;
;;;5083   					
;;;5084   			u_necc=bat[0]._Ub+10;
;;;5085   
;;;5086   			
;;;5087   			if(spc_stat==spcVZ)
;;;5088   				{
;;;5089   				u_necc=UVZ;
;;;5090   				}
;;;5091   			if(u_necc>=UB0) u_necc=UB0;
;;;5092   			if(u_necc>=UB20) u_necc=UB20;
;;;5093   			}
;;;5094   		}  
;;;5095   	}
;;;5096   #endif
;;;5097   #ifdef UKU_TELECORE2015
;;;5098   
;;;5099   if(unh_cnt0<10)
;;;5100   	{
;;;5101   	unh_cnt0++;
;;;5102   	if(unh_cnt0>=10)
;;;5103   		{
;;;5104   		unh_cnt0=0;
;;;5105   		b1Hz_unh=1;
;;;5106   		}
;;;5107   	}
;;;5108   
;;;5109   if(unh_cnt1<5)
;;;5110   	{
;;;5111   	unh_cnt1++;
;;;5112   	if(unh_cnt1==5)
;;;5113   		{
;;;5114   		unh_cnt1=0;
;;;5115   //		b2Hz_unh=1;
;;;5116   		}
;;;5117   	} 
;;;5118   
;;;5119   
;;;5120   
;;;5121   if(mess_find_unvol(MESS2UNECC_HNDL))
;;;5122   	{		
;;;5123   	if(mess_data[0]==PARAM_UNECC_SET)
;;;5124   		{
;;;5125   		u_necc=mess_data[1];
;;;5126   		}		
;;;5127   	}
;;;5128   
;;;5129   
;;;5130   else if(b1Hz_unh)
;;;5131   	{
;;;5132   	b1Hz_unh=0;
;;;5133   
;;;5134   	if(BAT_TYPE==0)
;;;5135   		{
;;;5136   		if(bat[0]._nd)mat_temper=20;
;;;5137   		else mat_temper=bat[0]._Tb;
;;;5138   
;;;5139   			
;;;5140   		if(mat_temper<0)temp_SL=UB0; 
;;;5141   		else 
;;;5142   			{
;;;5143   			if(mat_temper>40)mat_temper=40; 
;;;5144   			temp_SL=(UB20-UB0)*10;
;;;5145   			temp_SL*=mat_temper;
;;;5146   			temp_SL/=200;
;;;5147   			temp_SL+=UB0;
;;;5148   			}
;;;5149   		if(spc_stat==spcVZ)
;;;5150   			{
;;;5151   			temp_SL=UVZ;
;;;5152   			}
;;;5153   		u_necc=(unsigned int)temp_SL;
;;;5154   	///u_necc=3456;
;;;5155   		}
;;;5156   	else if(BAT_TYPE==1)
;;;5157   		{
;;;5158   		
;;;5159   		gran(&DU_LI_BAT,1,30);
;;;5160   		u_necc=li_bat._Ub+DU_LI_BAT;
;;;5161   		gran(&u_necc,0,UB0);
;;;5162   		gran(&u_necc,0,UB20);
;;;5163   		gran(&u_necc,0,540);		
;;;5164   
;;;5165   
;;;5166   		if(li_bat._batStat!=bsOK)
;;;5167   			{
;;;5168   			u_necc=U0B;
;;;5169   			}
;;;5170   		if(spc_stat==spcVZ)
;;;5171   			{
;;;5172   			u_necc=UVZ;
;;;5173   			}
;;;5174   		/* 
;;;5175   		u_necc=U0B;
;;;5176   		
;;;5177   
;;;5178   	
;;;5179   		u_necc=UB0;
;;;5180   		u_necc=li_bat._Ub+10;
;;;5181   		if((li_bat._Ub<450)||(li_bat._Ub>550))
;;;5182   			{
;;;5183   			lakb_error_cnt++;
;;;5184   			if(lakb_error_cnt>=30)
;;;5185   				{
;;;5186   				lakb_error_cnt=30;
;;;5187   				u_necc=U0B;
;;;5188   				}
;;;5189   			}
;;;5190   		else lakb_error_cnt=0;*/
;;;5191   		}
;;;5192   	else if(BAT_TYPE==2)
;;;5193   		{
;;;5194   		u_necc=U0B;
;;;5195   		
;;;5196   		if(spc_stat==spcVZ)
;;;5197   			{
;;;5198   			u_necc=UVZ;
;;;5199   			}
;;;5200   	
;;;5201   		u_necc=UB0;
;;;5202   		}
;;;5203   
;;;5204   
;;;5205   	
;;;5206   		 
;;;5207   	}
;;;5208   
;;;5209   #endif 
;;;5210   
;;;5211   //u_necc=2356;
;;;5212   #endif//gran(&u_necc,400,UMAX);
;;;5213   
;;;5214   temp_L=(signed long) u_necc;
002ce6  f9b40000          LDRSH    r0,[r4,#0]  ; u_necc
;;;5215   temp_L*=98L;
002cea  2162              MOVS     r1,#0x62
002cec  4341              MULS     r1,r0,r1
;;;5216   temp_L/=100L;
002cee  2264              MOVS     r2,#0x64
002cf0  fb91f1f2          SDIV     r1,r1,r2
;;;5217   u_necc_dn=(signed short)temp_L;
002cf4  4bb7              LDR      r3,|L1.12244|
002cf6  8019              STRH     r1,[r3,#0]
;;;5218   
;;;5219   temp_L=(signed long) u_necc;
;;;5220   temp_L*=102L;
002cf8  2166              MOVS     r1,#0x66
002cfa  4348              MULS     r0,r1,r0
;;;5221   temp_L/=100L;
002cfc  fb90f0f2          SDIV     r0,r0,r2
;;;5222   u_necc_up=(signed short)temp_L;
002d00  49b5              LDR      r1,|L1.12248|
002d02  8008              STRH     r0,[r1,#0]
;;;5223   
;;;5224   
;;;5225   }
002d04  bd38              POP      {r3-r5,pc}
;;;5226   
                          ENDP

                  num_necc_hndl PROC
;;;5228   //-----------------------------------------------
;;;5229   void num_necc_hndl(void)
002d06  e92d41f0          PUSH     {r4-r8,lr}
;;;5230   {
;;;5231   
;;;5232   static short num_necc_block_cnt;
;;;5233   if(num_necc_block_cnt) num_necc_block_cnt--;
002d0a  4cad              LDR      r4,|L1.12224|
002d0c  f9b40024          LDRSH    r0,[r4,#0x24]  ; num_necc_block_cnt
002d10  b108              CBZ      r0,|L1.11542|
002d12  1e40              SUBS     r0,r0,#1
002d14  84a0              STRH     r0,[r4,#0x24]
                  |L1.11542|
;;;5234   
;;;5235   Isumm_=Isumm;
002d16  48b1              LDR      r0,|L1.12252|
002d18  4db1              LDR      r5,|L1.12256|
002d1a  8800              LDRH     r0,[r0,#0]  ; Isumm
002d1c  8028              STRH     r0,[r5,#0]
;;;5236   
;;;5237   if(bat[0]._Ib<0) Isumm_+=(abs(bat[0]._Ib))/10;
002d1e  4fb1              LDR      r7,|L1.12260|
002d20  260a              MOVS     r6,#0xa
002d22  f9b70008          LDRSH    r0,[r7,#8]  ; bat
002d26  2800              CMP      r0,#0
002d28  da06              BGE      |L1.11576|
002d2a  f7fffffe          BL       abs
002d2e  fb90f0f6          SDIV     r0,r0,r6
002d32  8829              LDRH     r1,[r5,#0]  ; Isumm_
002d34  4408              ADD      r0,r0,r1
002d36  8028              STRH     r0,[r5,#0]
                  |L1.11576|
;;;5238   if(bat[1]._Ib<0) Isumm_+=(abs(bat[1]._Ib))/10;
002d38  f9b70054          LDRSH    r0,[r7,#0x54]  ; bat
002d3c  2800              CMP      r0,#0
002d3e  da06              BGE      |L1.11598|
002d40  f7fffffe          BL       abs
002d44  fb90f0f6          SDIV     r0,r0,r6
002d48  8829              LDRH     r1,[r5,#0]  ; Isumm_
002d4a  4408              ADD      r0,r0,r1
002d4c  8028              STRH     r0,[r5,#0]
                  |L1.11598|
;;;5239   
;;;5240   num_necc_up=(Isumm_/((signed short)IMAX))+1;
002d4e  48a6              LDR      r0,|L1.12264|
002d50  f9b51000          LDRSH    r1,[r5,#0]  ; Isumm_
002d54  f9b00000          LDRSH    r0,[r0,#0]  ; IMAX
002d58  fb91f0f0          SDIV     r0,r1,r0
002d5c  1c40              ADDS     r0,r0,#1
002d5e  b2c0              UXTB     r0,r0
002d60  73e0              STRB     r0,[r4,#0xf]
;;;5241   ////Isumm_+=(signed short)((IMAX*(10-KIMAX))/10);
;;;5242   ////Isumm_+=(signed short)(IMAX-IMIN);
;;;5243   
;;;5244   num_necc_down=(Isumm_/((signed short)IMIN))+1;
002d62  4aa2              LDR      r2,|L1.12268|
002d64  f9b22000          LDRSH    r2,[r2,#0]  ; IMIN
002d68  fb91f1f2          SDIV     r1,r1,r2
002d6c  1c49              ADDS     r1,r1,#1
002d6e  b2c9              UXTB     r1,r1
002d70  7421              STRB     r1,[r4,#0x10]
;;;5245   
;;;5246   if(num_necc_up>num_necc)
002d72  4b9f              LDR      r3,|L1.12272|
;;;5247   	{
;;;5248   	num_necc=num_necc_up;
;;;5249   	num_necc_block_cnt=60;
002d74  253c              MOVS     r5,#0x3c
002d76  f9b32000          LDRSH    r2,[r3,#0]            ;5246  ; num_necc
002d7a  4290              CMP      r0,r2                 ;5246
002d7c  dd02              BLE      |L1.11652|
002d7e  8018              STRH     r0,[r3,#0]            ;5248
002d80  84a5              STRH     r5,[r4,#0x24]
002d82  e005              B        |L1.11664|
                  |L1.11652|
;;;5250   	}
;;;5251   else if(num_necc_down<num_necc)
002d84  4291              CMP      r1,r2
002d86  da03              BGE      |L1.11664|
;;;5252   	{
;;;5253   	if(!num_necc_block_cnt)
002d88  8ca0              LDRH     r0,[r4,#0x24]  ; num_necc_block_cnt
002d8a  b908              CBNZ     r0,|L1.11664|
;;;5254   		{
;;;5255   		num_necc=num_necc_down;
002d8c  8019              STRH     r1,[r3,#0]
;;;5256   		num_necc_block_cnt=60;
002d8e  84a5              STRH     r5,[r4,#0x24]
                  |L1.11664|
;;;5257   		}
;;;5258   	}
;;;5259   
;;;5260   if(PAR) num_necc=NUMIST;
002d90  4898              LDR      r0,|L1.12276|
002d92  8801              LDRH     r1,[r0,#0]  ; PAR
002d94  4898              LDR      r0,|L1.12280|
002d96  b109              CBZ      r1,|L1.11676|
002d98  8801              LDRH     r1,[r0,#0]  ; NUMIST
002d9a  8019              STRH     r1,[r3,#0]
                  |L1.11676|
;;;5261   
;;;5262   gran(&num_necc,1,NUMIST);
002d9c  f9b02000          LDRSH    r2,[r0,#0]  ; NUMIST
002da0  e8bd41f0          POP      {r4-r8,lr}
002da4  2101              MOVS     r1,#1
002da6  4892              LDR      r0,|L1.12272|
002da8  f7ffbffe          B.W      gran
;;;5263   
;;;5264   }
;;;5265   
                          ENDP

                  cntrl_hndl PROC
;;;5266   //-----------------------------------------------
;;;5267   void cntrl_hndl(void)
002dac  e92d5ff0          PUSH     {r4-r12,lr}
;;;5268   {
;;;5269   
;;;5270   IZMAX_=IZMAX;
002db0  4892              LDR      r0,|L1.12284|
002db2  4c83              LDR      r4,|L1.12224|
002db4  f9b00000          LDRSH    r0,[r0,#0]  ; IZMAX
002db8  8720              STRH     r0,[r4,#0x38]
;;;5271   
;;;5272   if(speedChIsOn)IZMAX_=speedChrgCurr;
002dba  4983              LDR      r1,|L1.12232|
002dbc  8809              LDRH     r1,[r1,#0]  ; speedChIsOn
002dbe  b111              CBZ      r1,|L1.11718|
002dc0  498f              LDR      r1,|L1.12288|
002dc2  8809              LDRH     r1,[r1,#0]  ; speedChrgCurr
002dc4  8721              STRH     r1,[r4,#0x38]
                  |L1.11718|
;;;5273   
;;;5274   if(cntrl_stat_blok_cnt)cntrl_stat_blok_cnt--;
002dc6  f9b4105a          LDRSH    r1,[r4,#0x5a]  ; cntrl_stat_blok_cnt
002dca  b111              CBZ      r1,|L1.11730|
002dcc  1e49              SUBS     r1,r1,#1
002dce  f8a4105a          STRH     r1,[r4,#0x5a]
                  |L1.11730|
;;;5275   if(cntrl_stat_blok_cnt_)cntrl_stat_blok_cnt_--;
002dd2  f9b4105c          LDRSH    r1,[r4,#0x5c]  ; cntrl_stat_blok_cnt_
002dd6  b111              CBZ      r1,|L1.11742|
002dd8  1e49              SUBS     r1,r1,#1
002dda  f8a4105c          STRH     r1,[r4,#0x5c]
                  |L1.11742|
;;;5276   
;;;5277   if((bat[0]._temper_stat&0x03)||(bat[1]._temper_stat&0x03))IZMAX_=IZMAX/10;
002dde  4981              LDR      r1,|L1.12260|
002de0  f04f050a          MOV      r5,#0xa
002de4  f891203f          LDRB     r2,[r1,#0x3f]  ; bat
002de8  0792              LSLS     r2,r2,#30
002dea  d103              BNE      |L1.11764|
002dec  f891108b          LDRB     r1,[r1,#0x8b]  ; bat
002df0  0789              LSLS     r1,r1,#30
002df2  d002              BEQ      |L1.11770|
                  |L1.11764|
002df4  fb90f0f5          SDIV     r0,r0,r5
002df8  8720              STRH     r0,[r4,#0x38]
                  |L1.11770|
;;;5278   
;;;5279   
;;;5280   if(ch_cnt0<10)
002dfa  79a0              LDRB     r0,[r4,#6]  ; ch_cnt0
002dfc  2600              MOVS     r6,#0                 ;5272
;;;5281   	{
;;;5282   	ch_cnt0++;
;;;5283   	if(ch_cnt0>=10)
;;;5284   		{
;;;5285   		ch_cnt0=0;
;;;5286   		b1Hz_ch=1;
002dfe  2701              MOVS     r7,#1
002e00  280a              CMP      r0,#0xa               ;5280
002e02  d206              BCS      |L1.11794|
002e04  1c40              ADDS     r0,r0,#1              ;5282
002e06  b2c0              UXTB     r0,r0                 ;5282
002e08  71a0              STRB     r0,[r4,#6]            ;5282
002e0a  280a              CMP      r0,#0xa               ;5283
002e0c  d301              BCC      |L1.11794|
002e0e  71a6              STRB     r6,[r4,#6]            ;5285
002e10  71e7              STRB     r7,[r4,#7]
                  |L1.11794|
;;;5287   		}
;;;5288   	}
;;;5289   
;;;5290   
;;;5291   
;;;5292   
;;;5293   if(mess_find_unvol(MESS2CNTRL_HNDL))
002e12  20e1              MOVS     r0,#0xe1
002e14  f7fffffe          BL       mess_find_unvol
;;;5294   	{
;;;5295   	if(mess_data[0]==PARAM_CNTRL_STAT_PLUS)
;;;5296   		{
;;;5297   		cntrl_stat=cntrl_stat_old+mess_data[1];
;;;5298   		}
;;;5299   	else if(mess_data[0]==PARAM_CNTRL_STAT_MINUS)
;;;5300   		{
;;;5301   		cntrl_stat=cntrl_stat_old-mess_data[1];
;;;5302   		}
;;;5303   	else if(mess_data[0]==PARAM_CNTRL_STAT_STEP_DOWN)
;;;5304   		{
;;;5305   		cntrl_stat--;
;;;5306   
;;;5307   		if((cntrl_stat<=30)||(load_U<USIGN)) mess_send(MESS2KB_HNDL,PARAM_CNTRL_IS_DOWN,0,10);
002e18  4b7a              LDR      r3,|L1.12292|
;;;5308   
;;;5309   		}
;;;5310   	else if(mess_data[0]==PARAM_CNTRL_STAT_SET)
;;;5311   		{
;;;5312   		cntrl_stat=mess_data[1];
;;;5313   		}
;;;5314   
;;;5315   	else if(mess_data[0]==PARAM_CNTRL_STAT_FAST_REG)
;;;5316   		{
;;;5317   		#ifdef UKU_220
;;;5318   		if(load_U>u_necc)
;;;5319   			{
;;;5320   			if(((load_U-u_necc)>40)&&(cntrl_stat>0))cntrl_stat-=5;
;;;5321   			else if((cntrl_stat)&&b1Hz_ch)cntrl_stat--;
;;;5322   			}
;;;5323   		else if(load_U<u_necc)
;;;5324   			{	
;;;5325   			if(((u_necc-load_U)>40)&&(cntrl_stat<1015))cntrl_stat+=5;
;;;5326   			else	if((cntrl_stat<1020)&&b1Hz_ch)cntrl_stat++;
;;;5327   			}
;;;5328   		#endif	
;;;5329   
;;;5330   		#ifndef UKU_220
;;;5331   
;;;5332   		#ifdef UKU_220_V2
;;;5333   		if(load_U>u_necc)
;;;5334   			{
;;;5335   			if(((load_U-u_necc)>40)&&(cntrl_stat>0))cntrl_stat-=5;
;;;5336   			else if((cntrl_stat)&&b1Hz_ch)cntrl_stat--;
;;;5337   			}
;;;5338   		else if(load_U<u_necc)
;;;5339   			{	
;;;5340   			if(((u_necc-load_U)>40)&&(cntrl_stat<1015))cntrl_stat+=5;
;;;5341   			else	if((cntrl_stat<1020)&&b1Hz_ch)cntrl_stat++;
;;;5342   			}
;;;5343   		#else
;;;5344   
;;;5345   		if(load_U>u_necc)
002e1a  f8dfc18c          LDR      r12,|L1.12200|
;;;5346   			{
;;;5347   			if(((load_U-u_necc)>10)&&(cntrl_stat>0))cntrl_stat-=5;
;;;5348   			else if((cntrl_stat)&&b1Hz_ch)cntrl_stat--;
;;;5349   			}
;;;5350   		else if(load_U<u_necc)
;;;5351   			{	
;;;5352   			if(((u_necc-load_U)>10)&&(cntrl_stat<1015))cntrl_stat+=5;
;;;5353   			else	if((cntrl_stat<1020)&&b1Hz_ch)cntrl_stat++;
;;;5354   			}
;;;5355   		#endif	
;;;5356   		#endif
;;;5357   		 }
;;;5358   
;;;5359   	}
;;;5360   
;;;5361   else if((b1Hz_ch)&&((!bIBAT_SMKLBR)||(bps[8]._cnt>40)))
002e1e  f8df81e8          LDR      r8,|L1.12296|
;;;5362   	{
;;;5363   	cntrl_stat_new=cntrl_stat_old;
;;;5364   	
;;;5365   	if((Ibmax/10)>(2*IZMAX_))
;;;5366   		{
;;;5367             if(cntrl_stat_blok_cnt)cntrl_stat_new--;
;;;5368   		else	cntrl_stat_new-=10;
;;;5369   		}		
;;;5370   	else if(((Ibmax/10)<(IZMAX_*2))&&(Ibmax>(IZMAX_*15)))
;;;5371   		{
;;;5372             if(cntrl_stat_blok_cnt)cntrl_stat_new--;
;;;5373             else	cntrl_stat_new-=3;
;;;5374   		}   
;;;5375   	else if((Ibmax<(IZMAX_*15))&&((Ibmax/10)>IZMAX_))
;;;5376   		{
;;;5377   		cntrl_stat_new--;
;;;5378   		}
;;;5379   		
;;;5380   	else if(load_U<u_necc)
;;;5381   		{
;;;5382   		if(load_U<(u_necc-(UB0-UB20)))
;;;5383   			{
;;;5384   			if(Ibmax<0)
;;;5385   				{
;;;5386                       if(cntrl_stat_blok_cnt)cntrl_stat_new++;
;;;5387   				else cntrl_stat_new+=10;
;;;5388   				}
;;;5389   			else if(Ibmax<(IZMAX_*5))
;;;5390   				{
;;;5391                       if(cntrl_stat_blok_cnt)cntrl_stat_new++;
;;;5392   				else	cntrl_stat_new+=2;
;;;5393   				}
;;;5394   			else if(Ibmax<((IZMAX_*95)/10))
;;;5395   				{
;;;5396   				cntrl_stat_new++;
;;;5397   				}					
;;;5398   			}
;;;5399   		else if(load_U<(u_necc-((UB0-UB20)/4)))
;;;5400   			{
;;;5401   			if(Ibmax<(IZMAX_*5))
;;;5402   				{
;;;5403                       if(cntrl_stat_blok_cnt)cntrl_stat_new++;
;;;5404   				else	cntrl_stat_new+=2;
;;;5405   				}
;;;5406   			else if(Ibmax<((IZMAX_*95)/10))
;;;5407   				{
;;;5408   				cntrl_stat_new++;
;;;5409   				}					
;;;5410   			}	
;;;5411   		else if(load_U<(u_necc-1))
;;;5412   			{
;;;5413   			if(Ibmax<((IZMAX_*95)/10))
;;;5414   				{
;;;5415   				cntrl_stat_new++;
;;;5416   				}					
;;;5417   			}					
;;;5418   		}	
;;;5419   	else if((load_U>u_necc)/*&&(!cntrl_blok)*/)
;;;5420   		{
;;;5421   		if(load_U>(u_necc+(UB0-UB20)))
;;;5422   			{
;;;5423                  if(cntrl_stat_blok_cnt)cntrl_stat_new--;
;;;5424   			else	cntrl_stat_new-=10;
;;;5425   			}
;;;5426   		else if(load_U>(u_necc+((UB0-UB20)/4)))
;;;5427   			{
;;;5428                  if(cntrl_stat_blok_cnt)cntrl_stat_new--;
;;;5429   			else cntrl_stat_new-=2;
;;;5430   			}	
;;;5431   		else if(load_U>(u_necc+1))
;;;5432   			{
;;;5433   			cntrl_stat_new--;
;;;5434   			}					
;;;5435   		}
;;;5436   
;;;5437   	gran(&cntrl_stat_new,10,1010);			
002e22  f2403bf2          MOV      r11,#0x3f2
002e26  2800              CMP      r0,#0                 ;5293
002e28  d05f              BEQ      |L1.12010|
002e2a  4969              LDR      r1,|L1.12240|
002e2c  6808              LDR      r0,[r1,#0]            ;5295  ; mess_data
002e2e  2864              CMP      r0,#0x64              ;5295
002e30  d104              BNE      |L1.11836|
002e32  6848              LDR      r0,[r1,#4]            ;5297  ; mess_data
002e34  8ba1              LDRH     r1,[r4,#0x1c]         ;5297  ; cntrl_stat_old
002e36  4408              ADD      r0,r0,r1              ;5297
002e38  8360              STRH     r0,[r4,#0x1a]         ;5297
                  |L1.11834|
002e3a  e166              B        |L1.12554|
                  |L1.11836|
002e3c  2869              CMP      r0,#0x69              ;5299
002e3e  d104              BNE      |L1.11850|
002e40  6848              LDR      r0,[r1,#4]            ;5301  ; mess_data
002e42  8ba1              LDRH     r1,[r4,#0x1c]         ;5301  ; cntrl_stat_old
002e44  1a08              SUBS     r0,r1,r0              ;5301
002e46  8360              STRH     r0,[r4,#0x1a]         ;5301
002e48  e15f              B        |L1.12554|
                  |L1.11850|
002e4a  286e              CMP      r0,#0x6e              ;5303
002e4c  d113              BNE      |L1.11894|
002e4e  8b60              LDRH     r0,[r4,#0x1a]         ;5305  ; cntrl_stat
002e50  1e40              SUBS     r0,r0,#1              ;5305
002e52  b200              SXTH     r0,r0                 ;5305
002e54  8360              STRH     r0,[r4,#0x1a]         ;5305
002e56  281e              CMP      r0,#0x1e              ;5307
002e58  dd06              BLE      |L1.11880|
002e5a  4951              LDR      r1,|L1.12192|
002e5c  f9b30000          LDRSH    r0,[r3,#0]            ;5307  ; load_U
002e60  f9b11000          LDRSH    r1,[r1,#0]            ;5307  ; USIGN
002e64  4288              CMP      r0,r1                 ;5307
002e66  dae8              BGE      |L1.11834|
                  |L1.11880|
002e68  230a              MOVS     r3,#0xa               ;5307
002e6a  2200              MOVS     r2,#0                 ;5307
002e6c  21e7              MOVS     r1,#0xe7              ;5307
002e6e  20e6              MOVS     r0,#0xe6              ;5307
002e70  f7fffffe          BL       mess_send
002e74  e149              B        |L1.12554|
                  |L1.11894|
002e76  28e5              CMP      r0,#0xe5              ;5310
002e78  d102              BNE      |L1.11904|
002e7a  6848              LDR      r0,[r1,#4]            ;5312  ; mess_data
002e7c  8360              STRH     r0,[r4,#0x1a]         ;5312
002e7e  e144              B        |L1.12554|
                  |L1.11904|
002e80  28e6              CMP      r0,#0xe6              ;5315
002e82  d1da              BNE      |L1.11834|
002e84  f9b30000          LDRSH    r0,[r3,#0]            ;5345  ; load_U
002e88  f9bc1000          LDRSH    r1,[r12,#0]           ;5345  ; u_necc
002e8c  4288              CMP      r0,r1                 ;5345
002e8e  dd14              BLE      |L1.11962|
002e90  eba00001          SUB      r0,r0,r1              ;5347
002e94  280a              CMP      r0,#0xa               ;5347
002e96  dd06              BLE      |L1.11942|
002e98  f9b4001a          LDRSH    r0,[r4,#0x1a]         ;5347  ; cntrl_stat
002e9c  2800              CMP      r0,#0                 ;5347
002e9e  dd02              BLE      |L1.11942|
002ea0  1f40              SUBS     r0,r0,#5              ;5347
002ea2  8360              STRH     r0,[r4,#0x1a]         ;5347
002ea4  e131              B        |L1.12554|
                  |L1.11942|
002ea6  f9b4001a          LDRSH    r0,[r4,#0x1a]         ;5348  ; cntrl_stat
002eaa  2800              CMP      r0,#0                 ;5348
002eac  d0c5              BEQ      |L1.11834|
002eae  79e1              LDRB     r1,[r4,#7]            ;5348  ; b1Hz_ch
002eb0  2900              CMP      r1,#0                 ;5348
002eb2  d0c2              BEQ      |L1.11834|
002eb4  1e40              SUBS     r0,r0,#1              ;5348
002eb6  8360              STRH     r0,[r4,#0x1a]         ;5348
002eb8  e127              B        |L1.12554|
                  |L1.11962|
002eba  dabe              BGE      |L1.11834|
002ebc  1a08              SUBS     r0,r1,r0              ;5352
002ebe  280a              CMP      r0,#0xa               ;5352
002ec0  dd08              BLE      |L1.11988|
002ec2  f9b4001a          LDRSH    r0,[r4,#0x1a]         ;5352  ; cntrl_stat
002ec6  f24031f7          MOV      r1,#0x3f7             ;5352
002eca  4288              CMP      r0,r1                 ;5352
002ecc  da02              BGE      |L1.11988|
002ece  1d40              ADDS     r0,r0,#5              ;5352
002ed0  8360              STRH     r0,[r4,#0x1a]         ;5352
002ed2  e11a              B        |L1.12554|
                  |L1.11988|
002ed4  f9b4001a          LDRSH    r0,[r4,#0x1a]         ;5353  ; cntrl_stat
002ed8  f5b07f7f          CMP      r0,#0x3fc             ;5353
002edc  daad              BGE      |L1.11834|
002ede  79e1              LDRB     r1,[r4,#7]            ;5353  ; b1Hz_ch
002ee0  2900              CMP      r1,#0                 ;5353
002ee2  d0aa              BEQ      |L1.11834|
002ee4  1c40              ADDS     r0,r0,#1              ;5353
002ee6  8360              STRH     r0,[r4,#0x1a]         ;5353
002ee8  e10f              B        |L1.12554|
                  |L1.12010|
002eea  79e0              LDRB     r0,[r4,#7]            ;5361  ; b1Hz_ch
002eec  2800              CMP      r0,#0                 ;5361
002eee  d0a4              BEQ      |L1.11834|
002ef0  4846              LDR      r0,|L1.12300|
002ef2  8800              LDRH     r0,[r0,#0]            ;5361  ; bIBAT_SMKLBR
002ef4  b118              CBZ      r0,|L1.12030|
002ef6  f89802a3          LDRB     r0,[r8,#0x2a3]        ;5361  ; bps
002efa  2828              CMP      r0,#0x28              ;5361
002efc  d99d              BLS      |L1.11834|
                  |L1.12030|
002efe  f9b4001c          LDRSH    r0,[r4,#0x1c]         ;5363  ; cntrl_stat_old
002f02  86a0              STRH     r0,[r4,#0x34]         ;5363
002f04  f9b41036          LDRSH    r1,[r4,#0x36]         ;5365  ; Ibmax
002f08  8f22              LDRH     r2,[r4,#0x38]         ;5365  ; IZMAX_
002f0a  fb91f9f5          SDIV     r9,r1,r5              ;5365
002f0e  ebb90f42          CMP      r9,r2,LSL #1          ;5365
002f12  dd09              BLE      |L1.12072|
002f14  f8b4105a          LDRH     r1,[r4,#0x5a]         ;5367  ; cntrl_stat_blok_cnt
002f18  b119              CBZ      r1,|L1.12066|
002f1a  f1a00001          SUB      r0,r0,#1              ;5367
002f1e  86a0              STRH     r0,[r4,#0x34]         ;5367
002f20  e0eb              B        |L1.12538|
                  |L1.12066|
002f22  380a              SUBS     r0,r0,#0xa            ;5368
002f24  86a0              STRH     r0,[r4,#0x34]         ;5368
002f26  e0e8              B        |L1.12538|
                  |L1.12072|
002f28  da0c              BGE      |L1.12100|
002f2a  ebc21a02          RSB      r10,r2,r2,LSL #4      ;5370
002f2e  458a              CMP      r10,r1                ;5370
002f30  da08              BGE      |L1.12100|
002f32  f8b4105a          LDRH     r1,[r4,#0x5a]         ;5372  ; cntrl_stat_blok_cnt
002f36  b111              CBZ      r1,|L1.12094|
002f38  1e40              SUBS     r0,r0,#1              ;5372
002f3a  86a0              STRH     r0,[r4,#0x34]         ;5372
002f3c  e0dd              B        |L1.12538|
                  |L1.12094|
002f3e  1ec0              SUBS     r0,r0,#3              ;5373
002f40  86a0              STRH     r0,[r4,#0x34]         ;5373
002f42  e0da              B        |L1.12538|
                  |L1.12100|
002f44  ebc21a02          RSB      r10,r2,r2,LSL #4      ;5375
002f48  458a              CMP      r10,r1                ;5375
002f4a  dd04              BLE      |L1.12118|
002f4c  4591              CMP      r9,r2                 ;5375
002f4e  dd02              BLE      |L1.12118|
002f50  1e40              SUBS     r0,r0,#1              ;5377
002f52  86a0              STRH     r0,[r4,#0x34]         ;5377
002f54  e0d1              B        |L1.12538|
                  |L1.12118|
002f56  f9b33000          LDRSH    r3,[r3,#0]            ;5380  ; load_U
002f5a  f9bcc000          LDRSH    r12,[r12,#0]          ;5380  ; u_necc
002f5e  f8df9058          LDR      r9,|L1.12216|
002f62  f8dfa058          LDR      r10,|L1.12220|
002f66  4563              CMP      r3,r12                ;5380
002f68  da7e              BGE      |L1.12392|
002f6a  f9b99000          LDRSH    r9,[r9,#0]            ;5382  ; UB0
002f6e  f9baa000          LDRSH    r10,[r10,#0]          ;5382  ; UB20
002f72  eba9090a          SUB      r9,r9,r10             ;5382
002f76  ebac0a09          SUB      r10,r12,r9            ;5382
002f7a  459a              CMP      r10,r3                ;5382
002f7c  dd63              BLE      |L1.12358|
002f7e  2900              CMP      r1,#0                 ;5384
002f80  da49              BGE      |L1.12310|
002f82  f8b4105a          LDRH     r1,[r4,#0x5a]         ;5386  ; cntrl_stat_blok_cnt
002f86  b111              CBZ      r1,|L1.12174|
002f88  1c40              ADDS     r0,r0,#1              ;5386
002f8a  86a0              STRH     r0,[r4,#0x34]         ;5386
002f8c  e0b5              B        |L1.12538|
                  |L1.12174|
002f8e  e03f              B        |L1.12304|
                  |L1.12176|
                          DCD      ADR_EE_BAT_RESURS
                  |L1.12180|
                          DCD      UBM_AV
                  |L1.12184|
                          DCD      U0B
                  |L1.12188|
                          DCD      IKB
                  |L1.12192|
                          DCD      USIGN
                  |L1.12196|
                          DCD      TERMOKOMPENS
                  |L1.12200|
                          DCD      u_necc
                  |L1.12204|
                          DCD      ND_EXT
                  |L1.12208|
                          DCD      t_ext
                  |L1.12212|
                          DCD      mat_temper
                  |L1.12216|
                          DCD      UB0
                  |L1.12220|
                          DCD      UB20
                  |L1.12224|
                          DCD      ||area_number.21||
                  |L1.12228|
                          DCD      UVZ
                  |L1.12232|
                          DCD      speedChIsOn
                  |L1.12236|
                          DCD      speedChrgVolt
                  |L1.12240|
                          DCD      mess_data
                  |L1.12244|
                          DCD      u_necc_dn
                  |L1.12248|
                          DCD      u_necc_up
                  |L1.12252|
                          DCD      Isumm
                  |L1.12256|
                          DCD      Isumm_
                  |L1.12260|
                          DCD      bat
                  |L1.12264|
                          DCD      IMAX
                  |L1.12268|
                          DCD      IMIN
                  |L1.12272|
                          DCD      num_necc
                  |L1.12276|
                          DCD      PAR
                  |L1.12280|
                          DCD      NUMIST
                  |L1.12284|
                          DCD      IZMAX
                  |L1.12288|
                          DCD      speedChrgCurr
                  |L1.12292|
                          DCD      load_U
                  |L1.12296|
                          DCD      bps
                  |L1.12300|
                          DCD      bIBAT_SMKLBR
                  |L1.12304|
003010  300a              ADDS     r0,r0,#0xa            ;5387
003012  86a0              STRH     r0,[r4,#0x34]         ;5387
003014  e071              B        |L1.12538|
                  |L1.12310|
003016  eb020382          ADD      r3,r2,r2,LSL #2       ;5389
00301a  428b              CMP      r3,r1                 ;5389
00301c  dd08              BLE      |L1.12336|
00301e  f8b4105a          LDRH     r1,[r4,#0x5a]         ;5391  ; cntrl_stat_blok_cnt
003022  b111              CBZ      r1,|L1.12330|
003024  1c40              ADDS     r0,r0,#1              ;5391
003026  86a0              STRH     r0,[r4,#0x34]         ;5391
003028  e067              B        |L1.12538|
                  |L1.12330|
00302a  1c80              ADDS     r0,r0,#2              ;5392
00302c  86a0              STRH     r0,[r4,#0x34]         ;5392
00302e  e064              B        |L1.12538|
                  |L1.12336|
003030  ebc21342          RSB      r3,r2,r2,LSL #5       ;5394
003034  eb031282          ADD      r2,r3,r2,LSL #6       ;5394
003038  fbb2f2f5          UDIV     r2,r2,r5              ;5394
00303c  428a              CMP      r2,r1                 ;5394
00303e  dd5c              BLE      |L1.12538|
003040  1c40              ADDS     r0,r0,#1              ;5396
003042  86a0              STRH     r0,[r4,#0x34]         ;5396
003044  e059              B        |L1.12538|
                  |L1.12358|
003046  ea4f7ae9          ASR      r10,r9,#31            ;5399
00304a  eb09799a          ADD      r9,r9,r10,LSR #30     ;5399
00304e  ebac09a9          SUB      r9,r12,r9,ASR #2      ;5399
003052  4599              CMP      r9,r3                 ;5399
003054  dd19              BLE      |L1.12426|
003056  eb020382          ADD      r3,r2,r2,LSL #2       ;5401
00305a  428b              CMP      r3,r1                 ;5401
00305c  dd0a              BLE      |L1.12404|
00305e  f8b4105a          LDRH     r1,[r4,#0x5a]         ;5403  ; cntrl_stat_blok_cnt
003062  b121              CBZ      r1,|L1.12398|
003064  1c40              ADDS     r0,r0,#1              ;5403
003066  e000              B        |L1.12394|
                  |L1.12392|
003068  e01e              B        |L1.12456|
                  |L1.12394|
00306a  86a0              STRH     r0,[r4,#0x34]         ;5403
00306c  e045              B        |L1.12538|
                  |L1.12398|
00306e  1c80              ADDS     r0,r0,#2              ;5404
003070  86a0              STRH     r0,[r4,#0x34]         ;5404
003072  e042              B        |L1.12538|
                  |L1.12404|
003074  ebc21342          RSB      r3,r2,r2,LSL #5       ;5406
003078  eb031282          ADD      r2,r3,r2,LSL #6       ;5406
00307c  fbb2f2f5          UDIV     r2,r2,r5              ;5406
003080  428a              CMP      r2,r1                 ;5406
003082  dd3a              BLE      |L1.12538|
003084  1c40              ADDS     r0,r0,#1              ;5408
003086  86a0              STRH     r0,[r4,#0x34]         ;5408
003088  e037              B        |L1.12538|
                  |L1.12426|
00308a  f1ac0c01          SUB      r12,r12,#1            ;5411
00308e  4563              CMP      r3,r12                ;5411
003090  da33              BGE      |L1.12538|
003092  ebc21342          RSB      r3,r2,r2,LSL #5       ;5413
003096  eb031282          ADD      r2,r3,r2,LSL #6       ;5413
00309a  fbb2f2f5          UDIV     r2,r2,r5              ;5413
00309e  428a              CMP      r2,r1                 ;5413
0030a0  dd2b              BLE      |L1.12538|
0030a2  1c40              ADDS     r0,r0,#1              ;5415
0030a4  86a0              STRH     r0,[r4,#0x34]         ;5415
0030a6  e028              B        |L1.12538|
                  |L1.12456|
0030a8  dd27              BLE      |L1.12538|
0030aa  f9b91000          LDRSH    r1,[r9,#0]            ;5421  ; UB0
0030ae  f9ba2000          LDRSH    r2,[r10,#0]           ;5421  ; UB20
0030b2  1a89              SUBS     r1,r1,r2              ;5421
0030b4  eb01020c          ADD      r2,r1,r12             ;5421
0030b8  429a              CMP      r2,r3                 ;5421
0030ba  da08              BGE      |L1.12494|
0030bc  f8b4105a          LDRH     r1,[r4,#0x5a]         ;5423  ; cntrl_stat_blok_cnt
0030c0  b111              CBZ      r1,|L1.12488|
0030c2  1e40              SUBS     r0,r0,#1              ;5423
0030c4  86a0              STRH     r0,[r4,#0x34]         ;5423
0030c6  e018              B        |L1.12538|
                  |L1.12488|
0030c8  380a              SUBS     r0,r0,#0xa            ;5424
0030ca  86a0              STRH     r0,[r4,#0x34]         ;5424
0030cc  e015              B        |L1.12538|
                  |L1.12494|
0030ce  17ca              ASRS     r2,r1,#31             ;5426
0030d0  eb017192          ADD      r1,r1,r2,LSR #30      ;5426
0030d4  eb0c01a1          ADD      r1,r12,r1,ASR #2      ;5426
0030d8  4299              CMP      r1,r3                 ;5426
0030da  da08              BGE      |L1.12526|
0030dc  f8b4105a          LDRH     r1,[r4,#0x5a]         ;5428  ; cntrl_stat_blok_cnt
0030e0  b111              CBZ      r1,|L1.12520|
0030e2  1e40              SUBS     r0,r0,#1              ;5428
0030e4  86a0              STRH     r0,[r4,#0x34]         ;5428
0030e6  e008              B        |L1.12538|
                  |L1.12520|
0030e8  1e80              SUBS     r0,r0,#2              ;5429
0030ea  86a0              STRH     r0,[r4,#0x34]         ;5429
0030ec  e005              B        |L1.12538|
                  |L1.12526|
0030ee  f10c0c01          ADD      r12,r12,#1            ;5431
0030f2  4563              CMP      r3,r12                ;5431
0030f4  dd01              BLE      |L1.12538|
0030f6  1e40              SUBS     r0,r0,#1              ;5433
0030f8  86a0              STRH     r0,[r4,#0x34]         ;5433
                  |L1.12538|
0030fa  465a              MOV      r2,r11
0030fc  210a              MOVS     r1,#0xa
0030fe  48ff              LDR      r0,|L1.13564|
003100  f7fffffe          BL       gran
;;;5438   	cntrl_stat_old=cntrl_stat_new;
003104  8ea0              LDRH     r0,[r4,#0x34]  ; cntrl_stat_new
003106  83a0              STRH     r0,[r4,#0x1c]
;;;5439   	cntrl_stat=cntrl_stat_new;	
003108  8360              STRH     r0,[r4,#0x1a]
                  |L1.12554|
;;;5440   	}
;;;5441   
;;;5442   
;;;5443   iiii=0;
00310a  7266              STRB     r6,[r4,#9]
;;;5444   for(i=0;i<NUMIST;i++)
00310c  7226              STRB     r6,[r4,#8]
00310e  48fc              LDR      r0,|L1.13568|
003110  f9b02000          LDRSH    r2,[r0,#0]
003114  e00b              B        |L1.12590|
                  |L1.12566|
;;;5445        {
;;;5446        if(bps[i]._cnt<30)iiii=1;
003116  ebc001c0          RSB      r1,r0,r0,LSL #3
00311a  eb010141          ADD      r1,r1,r1,LSL #1
00311e  eb080181          ADD      r1,r8,r1,LSL #2
003122  78c9              LDRB     r1,[r1,#3]
003124  291e              CMP      r1,#0x1e
003126  d200              BCS      |L1.12586|
003128  7267              STRB     r7,[r4,#9]
                  |L1.12586|
00312a  1c40              ADDS     r0,r0,#1              ;5444
00312c  7220              STRB     r0,[r4,#8]            ;5444
                  |L1.12590|
00312e  7a20              LDRB     r0,[r4,#8]            ;5444  ; i
003130  4290              CMP      r0,r2                 ;5444
003132  dbf0              BLT      |L1.12566|
;;;5447        }
;;;5448   
;;;5449   if(iiii==0)
003134  7a60              LDRB     r0,[r4,#9]  ; iiii
003136  b920              CBNZ     r0,|L1.12610|
;;;5450        {
;;;5451        cntrl_stat=600;	
003138  f44f7016          MOV      r0,#0x258
00313c  8360              STRH     r0,[r4,#0x1a]
;;;5452        cntrl_stat_old=600;
00313e  83a0              STRH     r0,[r4,#0x1c]
;;;5453        cntrl_stat_new=600;
003140  86a0              STRH     r0,[r4,#0x34]
                  |L1.12610|
;;;5454   	#ifdef UKU_TELECORE2015
;;;5455   	cntrl_stat=0;
;;;5456   	cntrl_stat_old=0;
;;;5457   	cntrl_stat_new=0;
;;;5458   	#endif
;;;5459        }
;;;5460   gran(&cntrl_stat,10,1010); 
003142  48ee              LDR      r0,|L1.13564|
003144  465a              MOV      r2,r11
003146  210a              MOVS     r1,#0xa
003148  381a              SUBS     r0,r0,#0x1a
00314a  f7fffffe          BL       gran
;;;5461   b1Hz_ch=0;
00314e  71e6              STRB     r6,[r4,#7]
                  |L1.12624|
;;;5462   }
003150  e8bd9ff0          POP      {r4-r12,pc}
;;;5463   
                          ENDP

                  ext_drv PROC
;;;5464   //-----------------------------------------------
;;;5465   void ext_drv(void)
003154  e92d5ff0          PUSH     {r4-r12,lr}
;;;5466   {
;;;5467   char i;
;;;5468   
;;;5469   
;;;5470   for(i=0;i<NUMSK;i++)
003158  2000              MOVS     r0,#0
00315a  4aec              LDR      r2,|L1.13580|
;;;5471   	{
;;;5472   	#ifdef UKU_MGTS
;;;5473   	if(adc_buff_[sk_buff_RSTKM[i]]<2000)
;;;5474   	#endif
;;;5475   	#ifdef UKU_RSTKM
;;;5476   	if(adc_buff_[sk_buff_RSTKM[i]]<2000)
;;;5477   	#endif
;;;5478   	#ifdef UKU_3U
;;;5479   	if(adc_buff_[sk_buff_3U[i]]<2000)
;;;5480   	#endif
;;;5481   	#ifdef UKU_GLONASS
;;;5482   	if(adc_buff_[sk_buff_GLONASS[i]]<2000)
;;;5483   	#endif
;;;5484   	#ifdef UKU_KONTUR
;;;5485   	if(adc_buff_[sk_buff_KONTUR[i]]<2000)
;;;5486   	#endif
;;;5487   	#ifdef UKU_6U
;;;5488   	if(adc_buff_[sk_buff_6U[i]]<2000)
;;;5489   	#endif
;;;5490   	#ifdef UKU_220
;;;5491   	if(adc_buff_[sk_buff_220[i]]<2000)
;;;5492   	#endif
;;;5493   	#ifdef UKU_220_V2
;;;5494   	if(adc_buff_[sk_buff_220[i]]<2000)
;;;5495   	#endif
;;;5496   	#ifdef UKU_220_IPS_TERMOKOMPENSAT
;;;5497   	if(adc_buff_[sk_buff_220[i]]<2000)
;;;5498   	#endif
;;;5499   	#ifdef UKU_TELECORE2015
;;;5500   	if(adc_buff_[sk_buff_TELECORE2015[i]]<2000)	 //TODO
;;;5501   	#endif
;;;5502   
;;;5503   		{
;;;5504   		if(sk_cnt[i]<10)
00315c  4be9              LDR      r3,|L1.13572|
;;;5505   			{
;;;5506   			sk_cnt[i]++;
;;;5507   			if(sk_cnt[i]>=10)
;;;5508   				{
;;;5509   				sk_stat[i]=ssON;
00315e  4dea              LDR      r5,|L1.13576|
003160  f04f0901          MOV      r9,#1
;;;5510   				}
;;;5511   			}
;;;5512   		else 
;;;5513   			{
;;;5514   			sk_cnt[i]=10;
003164  f04f0a0a          MOV      r10,#0xa
003168  2600              MOVS     r6,#0                 ;5470
00316a  f9b24000          LDRSH    r4,[r2,#0]            ;5470
00316e  e022              B        |L1.12726|
                  |L1.12656|
003170  49e7              LDR      r1,|L1.13584|
003172  4fe8              LDR      r7,|L1.13588|
003174  5c09              LDRB     r1,[r1,r0]            ;5497
003176  f9371011          LDRSH    r1,[r7,r1,LSL #1]     ;5497
00317a  f5b16ffa          CMP      r1,#0x7d0             ;5497
00317e  da0d              BGE      |L1.12700|
003180  5619              LDRSB    r1,[r3,r0]            ;5504
003182  290a              CMP      r1,#0xa               ;5504
003184  da07              BGE      |L1.12694|
003186  1c49              ADDS     r1,r1,#1              ;5506
003188  b249              SXTB     r1,r1                 ;5506
00318a  5419              STRB     r1,[r3,r0]            ;5506
00318c  290a              CMP      r1,#0xa               ;5507
00318e  db10              BLT      |L1.12722|
003190  f8059000          STRB     r9,[r5,r0]            ;5509
003194  e00d              B        |L1.12722|
                  |L1.12694|
003196  f803a000          STRB     r10,[r3,r0]
00319a  e00a              B        |L1.12722|
                  |L1.12700|
;;;5515   			}
;;;5516                  
;;;5517   		}
;;;5518   	else
;;;5519   		{
;;;5520   		if(sk_cnt[i]>=0)
00319c  5619              LDRSB    r1,[r3,r0]
00319e  2900              CMP      r1,#0
0031a0  db06              BLT      |L1.12720|
;;;5521   			{
;;;5522   			sk_cnt[i]--;
0031a2  1e49              SUBS     r1,r1,#1
0031a4  b249              SXTB     r1,r1
0031a6  5419              STRB     r1,[r3,r0]
;;;5523   			if(sk_cnt[i]<=0)
0031a8  2900              CMP      r1,#0
0031aa  dc02              BGT      |L1.12722|
;;;5524   				{
;;;5525   				sk_stat[i]=ssOFF;
0031ac  542e              STRB     r6,[r5,r0]
0031ae  e000              B        |L1.12722|
                  |L1.12720|
;;;5526   				}
;;;5527   			}
;;;5528   		else 
;;;5529   			{
;;;5530   			sk_cnt[i]=0;
0031b0  541e              STRB     r6,[r3,r0]
                  |L1.12722|
0031b2  1c40              ADDS     r0,r0,#1              ;5470
0031b4  b2c0              UXTB     r0,r0                 ;5470
                  |L1.12726|
0031b6  42a0              CMP      r0,r4                 ;5470
0031b8  dbda              BLT      |L1.12656|
;;;5531   			}
;;;5532   		}
;;;5533   	}
;;;5534   
;;;5535   for(i=0;i<NUMSK;i++)
0031ba  2400              MOVS     r4,#0
;;;5536   	{
;;;5537   	if(((SK_SIGN[i]==0)&&(sk_stat[i]==ssON))||((SK_SIGN[i])&&(sk_stat[i]==ssOFF)) )
;;;5538   		{
;;;5539   		if(sk_av_cnt[i]<10)
0031bc  f8dfb358          LDR      r11,|L1.13592|
;;;5540   			{
;;;5541   			sk_av_cnt[i]++;
;;;5542   			if(sk_av_cnt[i]>=10)
;;;5543   				{
;;;5544   				sk_av_stat[i]=sasON;
0031c0  f8df8358          LDR      r8,|L1.13596|
;;;5545   				}
;;;5546   			}
;;;5547   		else 
;;;5548   			{
;;;5549   			sk_av_cnt[i]=10;
;;;5550   			}
;;;5551   		}
;;;5552   	else
;;;5553   		{
;;;5554   		if(sk_av_cnt[i]>=0)
;;;5555   			{
;;;5556   			sk_av_cnt[i]--;
;;;5557   			if(sk_av_cnt[i]<=0)
;;;5558   				{
;;;5559   				sk_av_stat[i]=sasOFF;
;;;5560   				}
;;;5561   			}
;;;5562   		else 
;;;5563   			{
;;;5564   			sk_av_cnt[i]=0;
;;;5565   			}
;;;5566   		}
;;;5567   
;;;5568   #ifndef UKU_KONTUR
;;;5569   	if(sk_av_stat_old[i]!=sk_av_stat[i])
0031c4  4fd6              LDR      r7,|L1.13600|
0031c6  e07e              B        |L1.12998|
                  |L1.12744|
0031c8  48d6              LDR      r0,|L1.13604|
0031ca  f9300014          LDRSH    r0,[r0,r4,LSL #1]     ;5537
0031ce  b910              CBNZ     r0,|L1.12758|
0031d0  5d29              LDRB     r1,[r5,r4]            ;5537
0031d2  2901              CMP      r1,#1                 ;5537
0031d4  d002              BEQ      |L1.12764|
                  |L1.12758|
0031d6  b188              CBZ      r0,|L1.12796|
0031d8  5d28              LDRB     r0,[r5,r4]            ;5537
0031da  b978              CBNZ     r0,|L1.12796|
                  |L1.12764|
0031dc  f91b0004          LDRSB    r0,[r11,r4]           ;5539
0031e0  280a              CMP      r0,#0xa               ;5539
0031e2  da08              BGE      |L1.12790|
0031e4  1c40              ADDS     r0,r0,#1              ;5541
0031e6  b240              SXTB     r0,r0                 ;5541
0031e8  f80b0004          STRB     r0,[r11,r4]           ;5541
0031ec  280a              CMP      r0,#0xa               ;5542
0031ee  db14              BLT      |L1.12826|
0031f0  f8089004          STRB     r9,[r8,r4]            ;5544
0031f4  e011              B        |L1.12826|
                  |L1.12790|
0031f6  f80ba004          STRB     r10,[r11,r4]          ;5549
0031fa  e00e              B        |L1.12826|
                  |L1.12796|
0031fc  f91b0004          LDRSB    r0,[r11,r4]           ;5554
003200  2800              CMP      r0,#0                 ;5554
003202  db08              BLT      |L1.12822|
003204  1e40              SUBS     r0,r0,#1              ;5556
003206  b240              SXTB     r0,r0                 ;5556
003208  f80b0004          STRB     r0,[r11,r4]           ;5556
00320c  2800              CMP      r0,#0                 ;5557
00320e  dc04              BGT      |L1.12826|
003210  f8086004          STRB     r6,[r8,r4]            ;5559
003214  e001              B        |L1.12826|
                  |L1.12822|
003216  f80b6004          STRB     r6,[r11,r4]           ;5564
                  |L1.12826|
00321a  5d39              LDRB     r1,[r7,r4]
00321c  f8180004          LDRB     r0,[r8,r4]
003220  4281              CMP      r1,r0
003222  d04b              BEQ      |L1.12988|
;;;5570   		{
;;;5571   		plazma_sk++;
003224  4ab5              LDR      r2,|L1.13564|
003226  3a34              SUBS     r2,r2,#0x34
003228  8e51              LDRH     r1,[r2,#0x32]  ; plazma_sk
00322a  1c49              ADDS     r1,r1,#1
00322c  8651              STRH     r1,[r2,#0x32]
;;;5572   		if(sk_av_stat[i]==sasON)
00322e  2801              CMP      r0,#1
003230  d122              BNE      |L1.12920|
;;;5573   			{
;;;5574   			if(i==0)snmp_trap_send("SK #1 Alarm",15,1,1);
003232  b934              CBNZ     r4,|L1.12866|
003234  2301              MOVS     r3,#1
003236  461a              MOV      r2,r3
003238  210f              MOVS     r1,#0xf
00323a  a0bb              ADR      r0,|L1.13608|
00323c  f7fffffe          BL       snmp_trap_send
003240  e03c              B        |L1.12988|
                  |L1.12866|
;;;5575   			else if(i==1)snmp_trap_send("SK #2 Alarm",15,2,1);
003242  2c01              CMP      r4,#1
003244  d106              BNE      |L1.12884|
003246  2301              MOVS     r3,#1
003248  2202              MOVS     r2,#2
00324a  210f              MOVS     r1,#0xf
00324c  a0b9              ADR      r0,|L1.13620|
00324e  f7fffffe          BL       snmp_trap_send
003252  e033              B        |L1.12988|
                  |L1.12884|
;;;5576   			else if(i==2)snmp_trap_send("SK #3 Alarm",15,3,1);
003254  2c02              CMP      r4,#2
003256  d106              BNE      |L1.12902|
003258  2301              MOVS     r3,#1
00325a  2203              MOVS     r2,#3
00325c  210f              MOVS     r1,#0xf
00325e  a0b8              ADR      r0,|L1.13632|
003260  f7fffffe          BL       snmp_trap_send
003264  e02a              B        |L1.12988|
                  |L1.12902|
;;;5577   			else if(i==3)snmp_trap_send("SK #4 Alarm",15,4,1);
003266  2c03              CMP      r4,#3
003268  d128              BNE      |L1.12988|
00326a  2301              MOVS     r3,#1
00326c  2204              MOVS     r2,#4
00326e  210f              MOVS     r1,#0xf
003270  a0b6              ADR      r0,|L1.13644|
003272  f7fffffe          BL       snmp_trap_send
003276  e021              B        |L1.12988|
                  |L1.12920|
;;;5578   			}
;;;5579   		else 
;;;5580   			{
;;;5581   			if(i==0)snmp_trap_send("SK #1 Alarm is off",15,1,0);
003278  b934              CBNZ     r4,|L1.12936|
00327a  2300              MOVS     r3,#0
00327c  2201              MOVS     r2,#1
00327e  210f              MOVS     r1,#0xf
003280  a0b5              ADR      r0,|L1.13656|
003282  f7fffffe          BL       snmp_trap_send
003286  e019              B        |L1.12988|
                  |L1.12936|
;;;5582   			else if(i==1)snmp_trap_send("SK #2 Alarm is off",15,2,0);
003288  2c01              CMP      r4,#1
00328a  d106              BNE      |L1.12954|
00328c  2300              MOVS     r3,#0
00328e  2202              MOVS     r2,#2
003290  210f              MOVS     r1,#0xf
003292  a0b6              ADR      r0,|L1.13676|
003294  f7fffffe          BL       snmp_trap_send
003298  e010              B        |L1.12988|
                  |L1.12954|
;;;5583   			else if(i==2)snmp_trap_send("SK #3 Alarm is off",15,3,0);
00329a  2c02              CMP      r4,#2
00329c  d106              BNE      |L1.12972|
00329e  2300              MOVS     r3,#0
0032a0  2203              MOVS     r2,#3
0032a2  210f              MOVS     r1,#0xf
0032a4  a0b6              ADR      r0,|L1.13696|
0032a6  f7fffffe          BL       snmp_trap_send
0032aa  e007              B        |L1.12988|
                  |L1.12972|
;;;5584   			else if(i==3)snmp_trap_send("SK #4 Alarm is off",15,4,0);
0032ac  2c03              CMP      r4,#3
0032ae  d105              BNE      |L1.12988|
0032b0  2300              MOVS     r3,#0
0032b2  2204              MOVS     r2,#4
0032b4  210f              MOVS     r1,#0xf
0032b6  a0b7              ADR      r0,|L1.13716|
0032b8  f7fffffe          BL       snmp_trap_send
                  |L1.12988|
;;;5585   			}
;;;5586   	 	}
;;;5587   #endif
;;;5588   
;;;5589   #ifdef UKU_KONTUR
;;;5590   	if(sk_av_stat_old[i]!=sk_av_stat[i])
;;;5591   		{
;;;5592   		plazma_sk++;
;;;5593   		if(sk_av_stat[i]==sasON)
;;;5594   			{
;;;5595   			if(i==0)snmp_trap_send("Door is opened",15,1,1);
;;;5596   			else if(i==1)snmp_trap_send("Smoke Alarm",15,2,1);
;;;5597   			else if(i==2)snmp_trap_send("Shock Sensor Alarm",15,3,1);
;;;5598   			else if(i==3)snmp_trap_send("SK #4 Alarm",15,4,1);
;;;5599   			}
;;;5600   		else 
;;;5601   			{
;;;5602   			if(i==0)snmp_trap_send("Door is closed",15,1,0);
;;;5603   			else if(i==1)snmp_trap_send("Smoke Alarm is off",15,2,0);
;;;5604   			else if(i==2)snmp_trap_send("Shock Sensor Alarm is off",15,3,0);
;;;5605   			else if(i==3)snmp_trap_send("SK #4 Alarm is off",15,4,0);
;;;5606   			}
;;;5607   	 	}
;;;5608   #endif
;;;5609   	sk_av_stat_old[i]=sk_av_stat[i];
0032bc  f8180004          LDRB     r0,[r8,r4]
0032c0  5538              STRB     r0,[r7,r4]
0032c2  1c64              ADDS     r4,r4,#1              ;5535
0032c4  b2e4              UXTB     r4,r4                 ;5535
                  |L1.12998|
0032c6  4891              LDR      r0,|L1.13580|
0032c8  f9b00000          LDRSH    r0,[r0,#0]            ;5535  ; NUMSK
0032cc  4284              CMP      r4,r0                 ;5535
0032ce  f6ffaf7b          BLT      |L1.12744|
;;;5610   	}
;;;5611   }
0032d2  e73d              B        |L1.12624|
;;;5612   
                          ENDP

                  zar_superviser_start PROC
;;;5649   //-----------------------------------------------
;;;5650   void zar_superviser_start(void)
0032d4  4ab4              LDR      r2,|L1.13736|
;;;5651   {
;;;5652   sign_U[0]=1;
0032d6  2001              MOVS     r0,#1
0032d8  7010              STRB     r0,[r2,#0]
;;;5653   sign_I[0]=1;
0032da  49b4              LDR      r1,|L1.13740|
0032dc  7008              STRB     r0,[r1,#0]
;;;5654   sign_U[1]=1;
0032de  7050              STRB     r0,[r2,#1]
;;;5655   sign_I[1]=1;
0032e0  7048              STRB     r0,[r1,#1]
;;;5656   
;;;5657   }
0032e2  4770              BX       lr
;;;5658   
                          ENDP

                  zar_superviser_drv PROC
;;;5614   //-----------------------------------------------
;;;5615   void zar_superviser_drv(void)
0032e4  e92d5ff0          PUSH     {r4-r12,lr}
;;;5616   {
;;;5617   
;;;5618   if(((bat[0]._Ub>u_necc_up) || (bat[0]._Ub<u_necc_dn))&&(main_kb_cnt<((TBAT*60)-30))&&(main_kb_cnt>((TBAT*60)-150))) sign_U[0]=0;
0032e8  48b2              LDR      r0,|L1.13748|
0032ea  f8dfb2cc          LDR      r11,|L1.13752|
0032ee  f9b0c000          LDRSH    r12,[r0,#0]  ; u_necc_up
0032f2  f9bb0000          LDRSH    r0,[r11,#0]
0032f6  f8dfa2b8          LDR      r10,|L1.13744|
0032fa  4f80              LDR      r7,|L1.13564|
0032fc  ebc01100          RSB      r1,r0,r0,LSL #4
003300  f9ba6002          LDRSH    r6,[r10,#2]  ; bat
003304  3f34              SUBS     r7,r7,#0x34
003306  f06f081d          MVN      r8,#0x1d
00330a  f06f0995          MVN      r9,#0x95
00330e  2400              MOVS     r4,#0
003310  4da5              LDR      r5,|L1.13736|
003312  f9b7003c          LDRSH    r0,[r7,#0x3c]
003316  eb080281          ADD      r2,r8,r1,LSL #2
00331a  eb090381          ADD      r3,r9,r1,LSL #2
00331e  4566              CMP      r6,r12
003320  dc05              BGT      |L1.13102|
003322  f8dfc298          LDR      r12,|L1.13756|
003326  f9bcc000          LDRSH    r12,[r12,#0]  ; u_necc_dn
00332a  4566              CMP      r6,r12
00332c  da04              BGE      |L1.13112|
                  |L1.13102|
00332e  4282              CMP      r2,r0
003330  dd02              BLE      |L1.13112|
003332  4283              CMP      r3,r0
003334  da00              BGE      |L1.13112|
003336  702c              STRB     r4,[r5,#0]
                  |L1.13112|
;;;5619   
;;;5620   if(((bat[0]._Ib>(2*IKB)) || (bat[0]._Ib<(-IKB*2))) &&(main_kb_cnt<((TBAT*60)-30))&&(main_kb_cnt>((TBAT*60)-150))) sign_I[0]=0;
003338  4ea1              LDR      r6,|L1.13760|
00333a  f9bac008          LDRSH    r12,[r10,#8]  ; bat
00333e  f9b6e000          LDRSH    lr,[r6,#0]  ; IKB
003342  4e9a              LDR      r6,|L1.13740|
003344  ebbc0f4e          CMP      r12,lr,LSL #1
003348  dc04              BGT      |L1.13140|
00334a  f1ce0e00          RSB      lr,lr,#0
00334e  ebbc0f4e          CMP      r12,lr,LSL #1
003352  da04              BGE      |L1.13150|
                  |L1.13140|
003354  4282              CMP      r2,r0
003356  dd02              BLE      |L1.13150|
003358  4283              CMP      r3,r0
00335a  da00              BGE      |L1.13150|
00335c  7034              STRB     r4,[r6,#0]
                  |L1.13150|
;;;5621   																 
;;;5622   if((main_kb_cnt==((TBAT*60)-10)) &&(spc_stat==spcOFF))
00335e  f06f0209          MVN      r2,#9
003362  eb020181          ADD      r1,r2,r1,LSL #2
003366  4281              CMP      r1,r0
003368  d11f              BNE      |L1.13226|
00336a  7cf8              LDRB     r0,[r7,#0x13]  ; spc_stat
00336c  b9e8              CBNZ     r0,|L1.13226|
;;;5623   	{
;;;5624   	if((sign_U[0]==1) && (sign_I[0]==1) && (lc640_read_int(EE_BAT1_ZAR_CNT)!=BAT_C_REAL[0]) && (NUMBAT) && (!(bat[0]._av&1)))
00336e  7828              LDRB     r0,[r5,#0]  ; sign_U
003370  2801              CMP      r0,#1
003372  d11a              BNE      |L1.13226|
003374  7830              LDRB     r0,[r6,#0]  ; sign_I
003376  2801              CMP      r0,#1
003378  d117              BNE      |L1.13226|
00337a  f44f70d6          MOV      r0,#0x1ac
00337e  f7fffffe          BL       lc640_read_int
003382  4990              LDR      r1,|L1.13764|
003384  f9b11000          LDRSH    r1,[r1,#0]  ; BAT_C_REAL
003388  4288              CMP      r0,r1
00338a  d00e              BEQ      |L1.13226|
00338c  488e              LDR      r0,|L1.13768|
00338e  8800              LDRH     r0,[r0,#0]  ; NUMBAT
003390  b158              CBZ      r0,|L1.13226|
003392  f89a003d          LDRB     r0,[r10,#0x3d]  ; bat
003396  07c0              LSLS     r0,r0,#31
003398  d107              BNE      |L1.13226|
;;;5625   		{
;;;5626   		lc640_write_int(EE_BAT1_ZAR_CNT,BAT_C_REAL[0]);
00339a  f44f70d6          MOV      r0,#0x1ac
00339e  f7fffffe          BL       lc640_write_int
;;;5627   		superviser_cnt++;
0033a2  498a              LDR      r1,|L1.13772|
0033a4  7808              LDRB     r0,[r1,#0]  ; superviser_cnt
0033a6  1c40              ADDS     r0,r0,#1
0033a8  7008              STRB     r0,[r1,#0]
                  |L1.13226|
;;;5628   		}
;;;5629   	
;;;5630   	}
;;;5631   
;;;5632   if(((bat[0]._Ub>u_necc_up) || (bat[1]._Ub<u_necc_dn))&&(main_kb_cnt<((TBAT*60)-30))&&(main_kb_cnt>((TBAT*60)-150))) sign_U[1]=0;
0033aa  4982              LDR      r1,|L1.13748|
0033ac  f9ba0002          LDRSH    r0,[r10,#2]  ; bat
0033b0  f9b11000          LDRSH    r1,[r1,#0]  ; u_necc_up
0033b4  4288              CMP      r0,r1
0033b6  dc06              BGT      |L1.13254|
0033b8  4880              LDR      r0,|L1.13756|
0033ba  f9ba104e          LDRSH    r1,[r10,#0x4e]  ; bat
0033be  f9b00000          LDRSH    r0,[r0,#0]  ; u_necc_dn
0033c2  4281              CMP      r1,r0
0033c4  da0e              BGE      |L1.13284|
                  |L1.13254|
0033c6  f9bb0000          LDRSH    r0,[r11,#0]  ; TBAT
0033ca  f9b7103c          LDRSH    r1,[r7,#0x3c]  ; main_kb_cnt
0033ce  ebc01000          RSB      r0,r0,r0,LSL #4
0033d2  eb080280          ADD      r2,r8,r0,LSL #2
0033d6  428a              CMP      r2,r1
0033d8  dd04              BLE      |L1.13284|
0033da  eb090080          ADD      r0,r9,r0,LSL #2
0033de  4288              CMP      r0,r1
0033e0  da00              BGE      |L1.13284|
0033e2  706c              STRB     r4,[r5,#1]
                  |L1.13284|
;;;5633   
;;;5634   if(((bat[1]._Ib>(2*IKB)) || (bat[1]._Ib<(-IKB*2))) &&(main_kb_cnt<((TBAT*60)-30))&&(main_kb_cnt>((TBAT*60)-150))) sign_I[1]=0;
0033e4  4976              LDR      r1,|L1.13760|
0033e6  f9ba0054          LDRSH    r0,[r10,#0x54]  ; bat
0033ea  f9b11000          LDRSH    r1,[r1,#0]  ; IKB
0033ee  ebb00f41          CMP      r0,r1,LSL #1
0033f2  dc03              BGT      |L1.13308|
0033f4  4249              RSBS     r1,r1,#0
0033f6  ebb00f41          CMP      r0,r1,LSL #1
0033fa  da0e              BGE      |L1.13338|
                  |L1.13308|
0033fc  f9bb0000          LDRSH    r0,[r11,#0]  ; TBAT
003400  f9b7103c          LDRSH    r1,[r7,#0x3c]  ; main_kb_cnt
003404  ebc01000          RSB      r0,r0,r0,LSL #4
003408  eb080280          ADD      r2,r8,r0,LSL #2
00340c  428a              CMP      r2,r1
00340e  dd04              BLE      |L1.13338|
003410  eb090080          ADD      r0,r9,r0,LSL #2
003414  4288              CMP      r0,r1
003416  da00              BGE      |L1.13338|
003418  7074              STRB     r4,[r6,#1]
                  |L1.13338|
;;;5635   																 
;;;5636   if((main_kb_cnt==((TBAT*60)-10)) &&(spc_stat==spcOFF))
00341a  f9bb0000          LDRSH    r0,[r11,#0]  ; TBAT
00341e  ebc01100          RSB      r1,r0,r0,LSL #4
003422  f06f0009          MVN      r0,#9
003426  eb000081          ADD      r0,r0,r1,LSL #2
00342a  f9b7103c          LDRSH    r1,[r7,#0x3c]  ; main_kb_cnt
00342e  4288              CMP      r0,r1
003430  d120              BNE      |L1.13428|
003432  7cf8              LDRB     r0,[r7,#0x13]  ; spc_stat
003434  b9f0              CBNZ     r0,|L1.13428|
;;;5637   	{
;;;5638   	if((sign_U[1]==1) && (sign_I[1]==1) && (lc640_read_int(EE_BAT2_ZAR_CNT)!=BAT_C_REAL[1]) && (NUMBAT==2) && (!(bat[1]._av&1)))
003436  7868              LDRB     r0,[r5,#1]  ; sign_U
003438  2801              CMP      r0,#1
00343a  d11b              BNE      |L1.13428|
00343c  7870              LDRB     r0,[r6,#1]  ; sign_I
00343e  2801              CMP      r0,#1
003440  d118              BNE      |L1.13428|
003442  f44f74e5          MOV      r4,#0x1ca
003446  4620              MOV      r0,r4
003448  f7fffffe          BL       lc640_read_int
00344c  495d              LDR      r1,|L1.13764|
00344e  f9b11002          LDRSH    r1,[r1,#2]  ; BAT_C_REAL
003452  4288              CMP      r0,r1
003454  d00e              BEQ      |L1.13428|
003456  485c              LDR      r0,|L1.13768|
003458  8800              LDRH     r0,[r0,#0]  ; NUMBAT
00345a  2802              CMP      r0,#2
00345c  d10a              BNE      |L1.13428|
00345e  f89a0089          LDRB     r0,[r10,#0x89]  ; bat
003462  07c0              LSLS     r0,r0,#31
003464  d106              BNE      |L1.13428|
;;;5639   		{
;;;5640   		lc640_write_int(EE_BAT2_ZAR_CNT,BAT_C_REAL[1]);
003466  4620              MOV      r0,r4
003468  f7fffffe          BL       lc640_write_int
;;;5641   		superviser_cnt++;
00346c  4957              LDR      r1,|L1.13772|
00346e  7808              LDRB     r0,[r1,#0]  ; superviser_cnt
003470  1c40              ADDS     r0,r0,#1
003472  7008              STRB     r0,[r1,#0]
                  |L1.13428|
;;;5642   		}
;;;5643   	
;;;5644   	}
;;;5645   
;;;5646   if(main_kb_cnt==((TBAT*60)-2)) zar_superviser_start();
003474  f9bb0000          LDRSH    r0,[r11,#0]  ; TBAT
003478  f06f0101          MVN      r1,#1
00347c  ebc01000          RSB      r0,r0,r0,LSL #4
003480  eb010080          ADD      r0,r1,r0,LSL #2
003484  f9b7103c          LDRSH    r1,[r7,#0x3c]  ; main_kb_cnt
003488  4288              CMP      r0,r1
00348a  d102              BNE      |L1.13458|
00348c  e8bd5ff0          POP      {r4-r12,lr}
003490  e7fe              B        zar_superviser_start
                  |L1.13458|
;;;5647   }
003492  e65d              B        |L1.12624|
;;;5648   
                          ENDP

                  npn_hndl PROC
;;;5659   //-----------------------------------------------
;;;5660   void npn_hndl(void)
003494  e92d03f0          PUSH     {r4-r9}
;;;5661   {
;;;5662   if(NPN_OUT!=npnoOFF)
003498  484d              LDR      r0,|L1.13776|
;;;5663   	{
;;;5664   /*	if(NPN_SIGN==npnsAVNET)
;;;5665   		{
;;;5666   		if(net_av==1)
;;;5667   			{
;;;5668   			if(npn_tz_cnt<TZNPN)
;;;5669   				{
;;;5670   				npn_tz_cnt++;
;;;5671   				if(npn_tz_cnt==TZNPN)
;;;5672   					{
;;;5673   					npn_stat=npnsOFF;
;;;5674   					}
;;;5675   				}
;;;5676   			}
;;;5677   		else
;;;5678   			{
;;;5679   			if(npn_tz_cnt)
;;;5680   				{
;;;5681   				npn_tz_cnt--;
;;;5682   				if(npn_tz_cnt==0)
;;;5683   					{
;;;5684   					npn_stat=npnsON;
;;;5685   					}
;;;5686   				}
;;;5687   			}
;;;5688   		}*/
;;;5689   /*	if(NPN_SIGN==npnsULOAD)
;;;5690   		{
;;;5691   		if(load_U<UONPN)
;;;5692   			{
;;;5693   			if(npn_tz_cnt<TZNPN)
;;;5694   				{
;;;5695   				npn_tz_cnt++;
;;;5696   				if(npn_tz_cnt==TZNPN)
;;;5697   					{
;;;5698   					npn_stat=npnsOFF;
;;;5699   					}
;;;5700   				}
;;;5701   			}
;;;5702   		else if(load_U>UVNPN)
;;;5703   			{
;;;5704   			if(npn_tz_cnt)
;;;5705   				{
;;;5706   				npn_tz_cnt--;
;;;5707   				if(npn_tz_cnt==0)
;;;5708   					{
;;;5709   					npn_stat=npnsON;
;;;5710   					}
;;;5711   				}
;;;5712   			}
;;;5713   		}*/
;;;5714   
;;;5715   	if((load_U<UONPN)&&((net_Ua<UMN)||(net_Ub<UMN)||(net_Uc<UMN)))
;;;5716   		{
;;;5717   		if(npn_tz_cnt<TZNPN)
00349a  4f4e              LDR      r7,|L1.13780|
00349c  7800              LDRB     r0,[r0,#0]            ;5662  ; NPN_OUT
;;;5718   			{
;;;5719   			npn_tz_cnt++;
;;;5720   			if(npn_tz_cnt==TZNPN)
;;;5721   				{
;;;5722   				npn_stat=npnsOFF;
00349e  4e4e              LDR      r6,|L1.13784|
0034a0  f04f0c00          MOV      r12,#0                ;5662
;;;5723   				}
;;;5724   			}
;;;5725   		}
;;;5726   	else if((load_U>UVNPN)&&(net_Ua>UMN)&&(net_Ub>UMN)&&(net_Uc>UMN))
;;;5727   		{
;;;5728   		if(npn_tz_cnt)
;;;5729   			{
;;;5730   			npn_tz_cnt--;
;;;5731   			if(npn_tz_cnt==0)
;;;5732   				{
;;;5733   				npn_stat=npnsON;
0034a4  f04f0801          MOV      r8,#1
0034a8  b328              CBZ      r0,|L1.13558|
0034aa  484c              LDR      r0,|L1.13788|
0034ac  4639              MOV      r1,r7                 ;5717
0034ae  f9b05000          LDRSH    r5,[r0,#0]            ;5715  ; load_U
0034b2  484b              LDR      r0,|L1.13792|
0034b4  f9b11000          LDRSH    r1,[r1,#0]            ;5717
0034b8  f9b09000          LDRSH    r9,[r0,#0]            ;5715  ; UONPN
0034bc  4849              LDR      r0,|L1.13796|
0034be  454d              CMP      r5,r9                 ;5715
0034c0  f9b02000          LDRSH    r2,[r0,#0]            ;5715
0034c4  4848              LDR      r0,|L1.13800|
0034c6  f9b03000          LDRSH    r3,[r0,#0]            ;5715
0034ca  4848              LDR      r0,|L1.13804|
0034cc  f9b04000          LDRSH    r4,[r0,#0]            ;5715
0034d0  4847              LDR      r0,|L1.13808|
0034d2  f9b00000          LDRSH    r0,[r0,#0]            ;5715
0034d6  da0f              BGE      |L1.13560|
0034d8  4282              CMP      r2,r0                 ;5715
0034da  db03              BLT      |L1.13540|
0034dc  4283              CMP      r3,r0                 ;5715
0034de  db01              BLT      |L1.13540|
0034e0  4284              CMP      r4,r0                 ;5715
0034e2  da09              BGE      |L1.13560|
                  |L1.13540|
0034e4  4843              LDR      r0,|L1.13812|
0034e6  f9b00000          LDRSH    r0,[r0,#0]            ;5717  ; TZNPN
0034ea  4281              CMP      r1,r0                 ;5717
0034ec  da05              BGE      |L1.13562|
0034ee  1c49              ADDS     r1,r1,#1              ;5719
0034f0  b209              SXTH     r1,r1                 ;5719
0034f2  8039              STRH     r1,[r7,#0]            ;5719
0034f4  e080              B        |L1.13816|
                  |L1.13558|
0034f6  e098              B        |L1.13866|
                  |L1.13560|
0034f8  e083              B        |L1.13826|
                  |L1.13562|
0034fa  e081              B        |L1.13824|
                  |L1.13564|
                          DCD      ||area_number.21||+0x34
                  |L1.13568|
                          DCD      NUMIST
                  |L1.13572|
                          DCD      sk_cnt
                  |L1.13576|
                          DCD      sk_stat
                  |L1.13580|
                          DCD      NUMSK
                  |L1.13584|
                          DCD      ||area_number.15||
                  |L1.13588|
                          DCD      ||.bss||+0x400
                  |L1.13592|
                          DCD      sk_av_cnt
                  |L1.13596|
                          DCD      sk_av_stat
                  |L1.13600|
                          DCD      sk_av_stat_old
                  |L1.13604|
                          DCD      SK_SIGN
                  |L1.13608|
003528  534b2023          DCB      "SK #1 Alarm",0
00352c  3120416c
003530  61726d00
                  |L1.13620|
003534  534b2023          DCB      "SK #2 Alarm",0
003538  3220416c
00353c  61726d00
                  |L1.13632|
003540  534b2023          DCB      "SK #3 Alarm",0
003544  3320416c
003548  61726d00
                  |L1.13644|
00354c  534b2023          DCB      "SK #4 Alarm",0
003550  3420416c
003554  61726d00
                  |L1.13656|
003558  534b2023          DCB      "SK #1 Alarm is off",0
00355c  3120416c
003560  61726d20
003564  6973206f
003568  666600  
00356b  00                DCB      0
                  |L1.13676|
00356c  534b2023          DCB      "SK #2 Alarm is off",0
003570  3220416c
003574  61726d20
003578  6973206f
00357c  666600  
00357f  00                DCB      0
                  |L1.13696|
003580  534b2023          DCB      "SK #3 Alarm is off",0
003584  3320416c
003588  61726d20
00358c  6973206f
003590  666600  
003593  00                DCB      0
                  |L1.13716|
003594  534b2023          DCB      "SK #4 Alarm is off",0
003598  3420416c
00359c  61726d20
0035a0  6973206f
0035a4  666600  
0035a7  00                DCB      0
                  |L1.13736|
                          DCD      sign_U
                  |L1.13740|
                          DCD      sign_I
                  |L1.13744|
                          DCD      bat
                  |L1.13748|
                          DCD      u_necc_up
                  |L1.13752|
                          DCD      TBAT
                  |L1.13756|
                          DCD      u_necc_dn
                  |L1.13760|
                          DCD      IKB
                  |L1.13764|
                          DCD      BAT_C_REAL
                  |L1.13768|
                          DCD      NUMBAT
                  |L1.13772|
                          DCD      superviser_cnt
                  |L1.13776|
                          DCD      NPN_OUT
                  |L1.13780|
                          DCD      npn_tz_cnt
                  |L1.13784|
                          DCD      npn_stat
                  |L1.13788|
                          DCD      load_U
                  |L1.13792|
                          DCD      UONPN
                  |L1.13796|
                          DCD      net_Ua
                  |L1.13800|
                          DCD      net_Ub
                  |L1.13804|
                          DCD      net_Uc
                  |L1.13808|
                          DCD      UMN
                  |L1.13812|
                          DCD      TZNPN
                  |L1.13816|
0035f8  4281              CMP      r1,r0                 ;5720
0035fa  d11a              BNE      |L1.13874|
0035fc  f886c000          STRB     r12,[r6,#0]           ;5722
                  |L1.13824|
003600  e017              B        |L1.13874|
                  |L1.13826|
003602  f8dfc448          LDR      r12,|L1.14924|
003606  f9bcc000          LDRSH    r12,[r12,#0]          ;5726  ; UVNPN
00360a  4565              CMP      r5,r12                ;5726
00360c  dd11              BLE      |L1.13874|
00360e  4282              CMP      r2,r0                 ;5726
003610  dd0f              BLE      |L1.13874|
003612  4283              CMP      r3,r0                 ;5726
003614  dd0d              BLE      |L1.13874|
003616  4284              CMP      r4,r0                 ;5726
003618  dd0b              BLE      |L1.13874|
00361a  b151              CBZ      r1,|L1.13874|
00361c  1e49              SUBS     r1,r1,#1              ;5730
00361e  b208              SXTH     r0,r1                 ;5730
003620  8038              STRH     r0,[r7,#0]            ;5730
003622  b930              CBNZ     r0,|L1.13874|
003624  f8868000          STRB     r8,[r6,#0]
003628  e003              B        |L1.13874|
                  |L1.13866|
;;;5734   				}
;;;5735   			}
;;;5736   		}
;;;5737   	}
;;;5738   else
;;;5739   	{
;;;5740   	npn_tz_cnt=0;
00362a  f8a7c000          STRH     r12,[r7,#0]
;;;5741   	npn_stat=npnsON;
00362e  f8868000          STRB     r8,[r6,#0]
                  |L1.13874|
;;;5742   	}
;;;5743   
;;;5744   if(npn_stat==npnsOFF) mess_send(MESS2RELE_HNDL,PARAM_RELE_NPN,1,15);
003632  7830              LDRB     r0,[r6,#0]  ; npn_stat
003634  2800              CMP      r0,#0
003636  d107              BNE      |L1.13896|
003638  e8bd03f0          POP      {r4-r9}
00363c  230f              MOVS     r3,#0xf
00363e  2201              MOVS     r2,#1
003640  216e              MOVS     r1,#0x6e
003642  20d2              MOVS     r0,#0xd2
003644  f7ffbffe          B.W      mess_send
                  |L1.13896|
;;;5745   
;;;5746   
;;;5747   }
003648  e8bd03f0          POP      {r4-r9}
00364c  4770              BX       lr
;;;5748   
                          ENDP

                  speedChargeHndl PROC
;;;5749   //-----------------------------------------------
;;;5750   void speedChargeHndl(void)
00364e  b5f8              PUSH     {r3-r7,lr}
;;;5751   {
;;;5752   if(speedChIsOn)
003650  4fff              LDR      r7,|L1.14928|
003652  2400              MOVS     r4,#0
003654  8838              LDRH     r0,[r7,#0]  ; speedChIsOn
;;;5753   	{
;;;5754   	speedChTimeCnt++;
;;;5755   	if(speedChTimeCnt>=((signed long)speedChrgTimeInHour*3600L))
;;;5756   		{
;;;5757   		speedChIsOn=0;
;;;5758   		}
;;;5759   	if(speedChrgBlckStat)
003656  4dff              LDR      r5,|L1.14932|
003658  b190              CBZ      r0,|L1.13952|
00365a  4aff              LDR      r2,|L1.14936|
00365c  6811              LDR      r1,[r2,#0]            ;5754  ; speedChTimeCnt
00365e  1c49              ADDS     r1,r1,#1              ;5754
003660  6011              STR      r1,[r2,#0]            ;5754  ; speedChTimeCnt
003662  48fe              LDR      r0,|L1.14940|
003664  f9b00000          LDRSH    r0,[r0,#0]            ;5755  ; speedChrgTimeInHour
003668  ebc01340          RSB      r3,r0,r0,LSL #5       ;5755
00366c  ebc32000          RSB      r0,r3,r0,LSL #8       ;5755
003670  ebb11f00          CMP      r1,r0,LSL #4          ;5755
003674  db00              BLT      |L1.13944|
003676  803c              STRH     r4,[r7,#0]            ;5757
                  |L1.13944|
003678  8828              LDRH     r0,[r5,#0]  ; speedChrgBlckStat
00367a  b108              CBZ      r0,|L1.13952|
;;;5760   		{
;;;5761   		speedChIsOn=0;
00367c  803c              STRH     r4,[r7,#0]
;;;5762   		speedChTimeCnt=0;
00367e  6014              STR      r4,[r2,#0]  ; speedChTimeCnt
                  |L1.13952|
;;;5763   		}
;;;5764   	}
;;;5765   
;;;5766   
;;;5767   
;;;5768   if(speedChrgAvtEn)
003680  48f7              LDR      r0,|L1.14944|
;;;5769   	{
;;;5770   	if(!speedChIsOn)
;;;5771   		{
;;;5772   		if((load_U<u_necc)&&((u_necc-load_U)>speedChrgDU)&&(abs(Ib_ips_termokompensat/10-IZMAX)<5)&&(!speedChrgBlckStat))
;;;5773   			{
;;;5774   			speedChIsOn=1;
003682  2601              MOVS     r6,#1
003684  8800              LDRH     r0,[r0,#0]            ;5768  ; speedChrgAvtEn
003686  b300              CBZ      r0,|L1.14026|
003688  8838              LDRH     r0,[r7,#0]            ;5770  ; speedChIsOn
00368a  b9f0              CBNZ     r0,|L1.14026|
00368c  48f5              LDR      r0,|L1.14948|
00368e  49f6              LDR      r1,|L1.14952|
003690  f9b00000          LDRSH    r0,[r0,#0]            ;5772  ; load_U
003694  f9b11000          LDRSH    r1,[r1,#0]            ;5772  ; u_necc
003698  4288              CMP      r0,r1                 ;5772
00369a  da16              BGE      |L1.14026|
00369c  1a08              SUBS     r0,r1,r0              ;5772
00369e  49f3              LDR      r1,|L1.14956|
0036a0  f9b11000          LDRSH    r1,[r1,#0]            ;5772  ; speedChrgDU
0036a4  4288              CMP      r0,r1                 ;5772
0036a6  dd10              BLE      |L1.14026|
0036a8  48f1              LDR      r0,|L1.14960|
0036aa  210a              MOVS     r1,#0xa               ;5772
0036ac  f9b00000          LDRSH    r0,[r0,#0]            ;5772  ; Ib_ips_termokompensat
0036b0  fb90f0f1          SDIV     r0,r0,r1              ;5772
0036b4  49ef              LDR      r1,|L1.14964|
0036b6  8809              LDRH     r1,[r1,#0]            ;5772  ; IZMAX
0036b8  1a40              SUBS     r0,r0,r1              ;5772
0036ba  b200              SXTH     r0,r0                 ;5772
0036bc  f7fffffe          BL       abs
0036c0  2805              CMP      r0,#5                 ;5772
0036c2  da02              BGE      |L1.14026|
0036c4  8828              LDRH     r0,[r5,#0]            ;5772  ; speedChrgBlckStat
0036c6  b900              CBNZ     r0,|L1.14026|
0036c8  803e              STRH     r6,[r7,#0]
                  |L1.14026|
;;;5775   			}
;;;5776   		}
;;;5777   	}
;;;5778   
;;;5779   
;;;5780   
;;;5781   if((speedChrgBlckSrc!=1)&&(speedChrgBlckSrc!=2)) speedChrgBlckStat=0;
0036ca  48eb              LDR      r0,|L1.14968|
0036cc  f9b00000          LDRSH    r0,[r0,#0]  ; speedChrgBlckSrc
0036d0  2801              CMP      r0,#1
0036d2  d003              BEQ      |L1.14044|
0036d4  2802              CMP      r0,#2
0036d6  d001              BEQ      |L1.14044|
0036d8  802c              STRH     r4,[r5,#0]
0036da  e025              B        |L1.14120|
                  |L1.14044|
;;;5782   else
;;;5783   	{
;;;5784   	speedChrgBlckStat=0;
0036dc  802c              STRH     r4,[r5,#0]
;;;5785   	if(speedChrgBlckSrc==1)
;;;5786   		{
;;;5787   		if(((speedChrgBlckLog==0)&&(adc_buff_[11]>2000)) || ((speedChrgBlckLog==1)&&(adc_buff_[11]<2000))) speedChrgBlckStat=1;
0036de  4be7              LDR      r3,|L1.14972|
0036e0  49e7              LDR      r1,|L1.14976|
0036e2  f44f62fa          MOV      r2,#0x7d0
0036e6  2801              CMP      r0,#1                 ;5785
0036e8  d10e              BNE      |L1.14088|
0036ea  f9b30000          LDRSH    r0,[r3,#0]  ; speedChrgBlckLog
0036ee  b918              CBNZ     r0,|L1.14072|
0036f0  f9b13016          LDRSH    r3,[r1,#0x16]  ; adc_buff_
0036f4  4293              CMP      r3,r2
0036f6  dc05              BGT      |L1.14084|
                  |L1.14072|
0036f8  2801              CMP      r0,#1
0036fa  d115              BNE      |L1.14120|
0036fc  f9b10016          LDRSH    r0,[r1,#0x16]  ; adc_buff_
003700  4290              CMP      r0,r2
003702  da11              BGE      |L1.14120|
                  |L1.14084|
003704  802e              STRH     r6,[r5,#0]
003706  e00f              B        |L1.14120|
                  |L1.14088|
;;;5788   		}
;;;5789   	else if(speedChrgBlckSrc==2)
003708  2802              CMP      r0,#2
00370a  d10d              BNE      |L1.14120|
;;;5790   		{
;;;5791   		if(((speedChrgBlckLog==0)&&(adc_buff_[13]>2000)) || ((speedChrgBlckLog==1)&&(adc_buff_[13]<2000))) speedChrgBlckStat=1;
00370c  f9b30000          LDRSH    r0,[r3,#0]  ; speedChrgBlckLog
003710  b918              CBNZ     r0,|L1.14106|
003712  f9b1301a          LDRSH    r3,[r1,#0x1a]  ; adc_buff_
003716  4293              CMP      r3,r2
003718  dc05              BGT      |L1.14118|
                  |L1.14106|
00371a  2801              CMP      r0,#1
00371c  d104              BNE      |L1.14120|
00371e  f9b1001a          LDRSH    r0,[r1,#0x1a]  ; adc_buff_
003722  4290              CMP      r0,r2
003724  da00              BGE      |L1.14120|
                  |L1.14118|
003726  802e              STRH     r6,[r5,#0]
                  |L1.14120|
;;;5792   		}
;;;5793   	}
;;;5794   
;;;5795   
;;;5796   if(speedChrgBlckStat==1)
003728  8828              LDRH     r0,[r5,#0]  ; speedChrgBlckStat
;;;5797   	{
;;;5798   
;;;5799   	//speedChargeStartStop();
;;;5800   
;;;5801   	speedChrgShowCnt++;
00372a  49d6              LDR      r1,|L1.14980|
00372c  2801              CMP      r0,#1                 ;5796
00372e  d110              BNE      |L1.14162|
003730  7808              LDRB     r0,[r1,#0]  ; speedChrgShowCnt
003732  1c40              ADDS     r0,r0,#1
003734  b2c0              UXTB     r0,r0
003736  7008              STRB     r0,[r1,#0]
;;;5802   	if(speedChrgShowCnt>=30)	
003738  281e              CMP      r0,#0x1e
00373a  d309              BCC      |L1.14160|
;;;5803   		{
;;;5804   		speedChrgShowCnt=0;
00373c  700c              STRB     r4,[r1,#0]
;;;5805   		show_mess(	"          ",
00373e  f2413388          MOV      r3,#0x1388
003742  9300              STR      r3,[sp,#0]
003744  a3d0              ADR      r3,|L1.14984|
003746  a2d6              ADR      r2,|L1.15008|
003748  a1db              ADR      r1,|L1.15032|
00374a  a0e1              ADR      r0,|L1.15056|
00374c  f7fffffe          BL       show_mess
                  |L1.14160|
;;;5806   					"               ",
;;;5807   					"     !!!    ",
;;;5808   					"                    ",
;;;5809   					5000);
;;;5810   		}
;;;5811   	}
;;;5812   else speedChrgShowCnt=0;
;;;5813   
;;;5814   
;;;5815   }
003750  bdf8              POP      {r3-r7,pc}
                  |L1.14162|
003752  700c              STRB     r4,[r1,#0]            ;5812
003754  bdf8              POP      {r3-r7,pc}
;;;5816   
                          ENDP

                  speedChargeStartStop PROC
;;;5817   //-----------------------------------------------
;;;5818   void speedChargeStartStop(void)
003756  48be              LDR      r0,|L1.14928|
;;;5819   {
;;;5820   if(speedChIsOn)
003758  2100              MOVS     r1,#0
00375a  8802              LDRH     r2,[r0,#0]  ; speedChIsOn
00375c  b10a              CBZ      r2,|L1.14178|
;;;5821   	{
;;;5822   	speedChIsOn=0;
00375e  8001              STRH     r1,[r0,#0]
                  |L1.14176|
;;;5823   	}
;;;5824   
;;;5825   else	if(speedChrgBlckStat==0)
;;;5826   	{
;;;5827   	speedChIsOn=1;
;;;5828   	speedChTimeCnt=0;
;;;5829   	} 
;;;5830   
;;;5831   }
003760  4770              BX       lr
                  |L1.14178|
003762  4abc              LDR      r2,|L1.14932|
003764  8812              LDRH     r2,[r2,#0]            ;5825  ; speedChrgBlckStat
003766  2a00              CMP      r2,#0                 ;5825
003768  d1fa              BNE      |L1.14176|
00376a  2201              MOVS     r2,#1                 ;5827
00376c  8002              STRH     r2,[r0,#0]            ;5827
00376e  48ba              LDR      r0,|L1.14936|
003770  6001              STR      r1,[r0,#0]            ;5828  ; speedChTimeCnt
003772  4770              BX       lr
;;;5832   
                          ENDP

                  numOfForvardBps_hndl PROC
;;;5833   //-----------------------------------------------
;;;5834   void	numOfForvardBps_hndl(void)			//       
003774  e92d41f0          PUSH     {r4-r8,lr}
;;;5835   {
;;;5836   numOfForvardBps=0;
003778  4cdb              LDR      r4,|L1.15080|
00377a  2500              MOVS     r5,#0
00377c  7625              STRB     r5,[r4,#0x18]
;;;5837   
;;;5838   //FORVARDBPSCHHOUR=10;
;;;5839   
;;;5840   if((FORVARDBPSCHHOUR<=0)||(FORVARDBPSCHHOUR>500))
00377e  4edb              LDR      r6,|L1.15084|
003780  f9b60000          LDRSH    r0,[r6,#0]  ; FORVARDBPSCHHOUR
003784  2800              CMP      r0,#0
003786  dd02              BLE      |L1.14222|
003788  f5b07ffa          CMP      r0,#0x1f4
00378c  dd02              BLE      |L1.14228|
                  |L1.14222|
;;;5841   	{
;;;5842   	FORVARDBPSCHHOUR=0;
00378e  8035              STRH     r5,[r6,#0]
                  |L1.14224|
;;;5843   	return;
;;;5844   	}
;;;5845   
;;;5846   numOfForvardBps_minCnt++;
;;;5847   
;;;5848   
;;;5849   if(numOfForvardBps_minCnt>=60)
;;;5850   	{
;;;5851   	numOfForvardBps_minCnt=0;
;;;5852   	numOfForvardBps_hourCnt=lc640_read_int(EE_FORVBPSHOURCNT);
;;;5853   	numOfForvardBps_hourCnt++;
;;;5854   	if(numOfForvardBps_hourCnt>=(FORVARDBPSCHHOUR*NUMIST))
;;;5855   		{
;;;5856   		numOfForvardBps_hourCnt=0;
;;;5857   		}
;;;5858   	lc640_write_int(EE_FORVBPSHOURCNT,numOfForvardBps_hourCnt);
;;;5859   	}
;;;5860   
;;;5861   numOfForvardBps=numOfForvardBps_hourCnt/FORVARDBPSCHHOUR; 
;;;5862   }
003790  e8bd81f0          POP      {r4-r8,pc}
                  |L1.14228|
003794  7e60              LDRB     r0,[r4,#0x19]         ;5846  ; numOfForvardBps_minCnt
003796  1c40              ADDS     r0,r0,#1              ;5846
003798  b2c0              UXTB     r0,r0                 ;5846
00379a  7660              STRB     r0,[r4,#0x19]         ;5846
00379c  283c              CMP      r0,#0x3c              ;5849
00379e  d318              BCC      |L1.14290|
0037a0  7665              STRB     r5,[r4,#0x19]         ;5851
0037a2  f44f7794          MOV      r7,#0x128             ;5852
0037a6  4638              MOV      r0,r7                 ;5852
0037a8  f7fffffe          BL       lc640_read_int
0037ac  1c40              ADDS     r0,r0,#1              ;5853
0037ae  b200              SXTH     r0,r0                 ;5853
0037b0  f8a4005e          STRH     r0,[r4,#0x5e]         ;5853
0037b4  4ace              LDR      r2,|L1.15088|
0037b6  f9b61000          LDRSH    r1,[r6,#0]            ;5854  ; FORVARDBPSCHHOUR
0037ba  f9b22000          LDRSH    r2,[r2,#0]            ;5854  ; NUMIST
0037be  4351              MULS     r1,r2,r1              ;5854
0037c0  4281              CMP      r1,r0                 ;5854
0037c2  dc01              BGT      |L1.14280|
0037c4  f8a4505e          STRH     r5,[r4,#0x5e]         ;5856
                  |L1.14280|
0037c8  f9b4105e          LDRSH    r1,[r4,#0x5e]         ;5858  ; numOfForvardBps_hourCnt
0037cc  4638              MOV      r0,r7                 ;5858
0037ce  f7fffffe          BL       lc640_write_int
                  |L1.14290|
0037d2  f9b4005e          LDRSH    r0,[r4,#0x5e]         ;5861  ; numOfForvardBps_hourCnt
0037d6  f9b61000          LDRSH    r1,[r6,#0]            ;5861  ; FORVARDBPSCHHOUR
0037da  fb90f0f1          SDIV     r0,r0,r1              ;5861
0037de  7620              STRB     r0,[r4,#0x18]         ;5861
0037e0  e7d6              B        |L1.14224|
;;;5863   
                          ENDP

                  numOfForvardBps_init PROC
;;;5864   //-----------------------------------------------
;;;5865   void	numOfForvardBps_init(void)			//         
0037e2  b510              PUSH     {r4,lr}
;;;5866   {									//    -   
;;;5867   lc640_write_int(EE_FORVBPSHOURCNT,0);
0037e4  2100              MOVS     r1,#0
0037e6  f44f7094          MOV      r0,#0x128
0037ea  f7fffffe          BL       lc640_write_int
;;;5868   numOfForvardBps_minCnt=0;
0037ee  49be              LDR      r1,|L1.15080|
0037f0  2000              MOVS     r0,#0
0037f2  7648              STRB     r0,[r1,#0x19]
;;;5869   }
0037f4  bd10              POP      {r4,pc}
;;;5870   
                          ENDP

                  vent_hndl PROC
;;;5871   //-----------------------------------------------
;;;5872   void vent_hndl(void)
0037f6  e92d4ff0          PUSH     {r4-r11,lr}
;;;5873   {
0037fa  b087              SUB      sp,sp,#0x1c
;;;5874   if(RELEVENTSIGN==rvsAKB)
0037fc  48bd              LDR      r0,|L1.15092|
;;;5875   	{
;;;5876   	if(vent_stat==0)
0037fe  4cba              LDR      r4,|L1.15080|
;;;5877   		{
;;;5878   		if	(
;;;5879   			(BAT_IS_ON[0]==bisON)&&((bat[0]._Tb>TVENTON)||(bat[0]._nd))
003800  49bd              LDR      r1,|L1.15096|
;;;5880   			||
;;;5881   			(BAT_IS_ON[1]==bisON)&&((bat[1]._Tb>TVENTON)||(bat[1]._nd))
;;;5882   			)
;;;5883   			{
;;;5884   			vent_stat=1;
;;;5885   			}
;;;5886   		}
;;;5887   	else if(vent_stat==1)
;;;5888   		{
;;;5889   		if	(
;;;5890   			((BAT_IS_ON[0]!=bisON)||((BAT_IS_ON[0]==bisON)&&(bat[0]._Tb<TVENTOFF)&&(!bat[0]._nd)))
003802  4abe              LDR      r2,|L1.15100|
003804  7800              LDRB     r0,[r0,#0]            ;5874  ; RELEVENTSIGN
003806  f9943000          LDRSB    r3,[r4,#0]            ;5876
00380a  f9b11000          LDRSH    r1,[r1,#0]            ;5879
00380e  f9b22000          LDRSH    r2,[r2,#0]
003812  bb98              CBNZ     r0,|L1.14460|
003814  4fba              LDR      r7,|L1.15104|
003816  f8df82ec          LDR      r8,|L1.15108|
00381a  f9b7000a          LDRSH    r0,[r7,#0xa]          ;5879
00381e  7b3d              LDRB     r5,[r7,#0xc]          ;5879
003820  f9b76056          LDRSH    r6,[r7,#0x56]         ;5881
003824  f898c000          LDRB     r12,[r8,#0]           ;5878
003828  f8977058          LDRB     r7,[r7,#0x58]         ;5881
00382c  f8988001          LDRB     r8,[r8,#1]            ;5881
003830  b98b              CBNZ     r3,|L1.14422|
003832  f1bc0f55          CMP      r12,#0x55             ;5878
003836  d102              BNE      |L1.14398|
003838  4288              CMP      r0,r1                 ;5879
00383a  dc07              BGT      |L1.14412|
00383c  b935              CBNZ     r5,|L1.14412|
                  |L1.14398|
00383e  f1b80f55          CMP      r8,#0x55              ;5881
003842  d105              BNE      |L1.14416|
003844  428e              CMP      r6,r1                 ;5881
003846  dc01              BGT      |L1.14412|
003848  2f00              CMP      r7,#0                 ;5881
00384a  d001              BEQ      |L1.14416|
                  |L1.14412|
00384c  2001              MOVS     r0,#1                 ;5884
00384e  7020              STRB     r0,[r4,#0]            ;5884
                  |L1.14416|
;;;5891   			&&
;;;5892   			((BAT_IS_ON[1]!=bisON)||((BAT_IS_ON[1]==bisON)&&(bat[1]._Tb<TVENTOFF)&&(!bat[1]._nd)))
;;;5893   			)
;;;5894   			{
;;;5895   			vent_stat=0;
;;;5896   			}
;;;5897   		}
;;;5898   	}
;;;5899   else if(RELEVENTSIGN==rvsBPS)
;;;5900   	{
;;;5901   /*	if	(
;;;5902   		(((bps[0]._flags_tm&0x06)||(bps[0]._cnt>=30)))||
;;;5903   		(((bps[1]._flags_tm&0x06)||(bps[1]._cnt>=30))&&(NUMIST>1))||
;;;5904   		(((bps[2]._flags_tm&0x06)||(bps[2]._cnt>=30))&&(NUMIST>2))||
;;;5905   		(((bps[3]._flags_tm&0x06)||(bps[3]._cnt>=30))&&(NUMIST>3))||
;;;5906   		(((bps[4]._flags_tm&0x06)||(bps[4]._cnt>=30))&&(NUMIST>4))||
;;;5907   		(((bps[5]._flags_tm&0x06)||(bps[5]._cnt>=30))&&(NUMIST>5))||
;;;5908   		(((bps[6]._flags_tm&0x06)||(bps[6]._cnt>=30))&&(NUMIST>6))
;;;5909   		)
;;;5910   		{
;;;5911   		vent_stat=1;
;;;5912   		}
;;;5913   	else vent_stat=0;
;;;5914   	*/
;;;5915   
;;;5916   	if	(
;;;5917   		((NUMIST)&&((bps[0]._Ti>TVENTON)||(bps[0]._cnt>=30)))
;;;5918   		||
;;;5919   		((NUMIST>1)&&((bps[1]._Ti>TVENTON)||(bps[1]._cnt>=30)))
;;;5920   		||
;;;5921   		((NUMIST>2)&&((bps[2]._Ti>TVENTON)||(bps[2]._cnt>=30)))
;;;5922   		||
;;;5923   		((NUMIST>3)&&((bps[3]._Ti>TVENTON)||(bps[3]._cnt>=30)))
;;;5924   		||
;;;5925   		((NUMIST>4)&&((bps[4]._Ti>TVENTON)||(bps[4]._cnt>=30)))
;;;5926   		||
;;;5927   		((NUMIST>5)&&((bps[5]._Ti>TVENTON)||(bps[5]._cnt>=30)))
;;;5928   		||
;;;5929   		((NUMIST>6)&&((bps[6]._Ti>TVENTON)||(bps[6]._cnt>=30)))
;;;5930   		||
;;;5931   		((NUMIST>7)&&((bps[7]._Ti>TVENTON)||(bps[7]._cnt>=30)))
;;;5932   		)
;;;5933   		{
;;;5934   		vent_stat=1;
;;;5935   		}
;;;5936   	else if(vent_stat==1)
;;;5937   		{
;;;5938   		if	(
;;;5939   			((!NUMIST)||((NUMIST)&&(bps[0]._Ti<TVENTOFF)&&(bps[0]._cnt<10)))
;;;5940   			&&
;;;5941   			((NUMIST<2)||((NUMIST>=2)&&(bps[1]._Ti<TVENTOFF)&&(bps[1]._cnt<10)))
;;;5942   			&&
;;;5943   			((NUMIST<3)||((NUMIST>=3)&&(bps[2]._Ti<TVENTOFF)&&(bps[2]._cnt<10)))
;;;5944   			&&
;;;5945   			((NUMIST<4)||((NUMIST>=4)&&(bps[3]._Ti<TVENTOFF)&&(bps[3]._cnt<10)))
;;;5946   			&&
;;;5947   			((NUMIST<5)||((NUMIST>=5)&&(bps[4]._Ti<TVENTOFF)&&(bps[4]._cnt<10)))
;;;5948   			&&
;;;5949   			((NUMIST<6)||((NUMIST>=6)&&(bps[5]._Ti<TVENTOFF)&&(bps[5]._cnt<10)))
;;;5950   			&&
;;;5951   			((NUMIST<7)||((NUMIST>=7)&&(bps[6]._Ti<TVENTOFF)&&(bps[6]._cnt<10)))
;;;5952   			&&
;;;5953   			((NUMIST<8)||((NUMIST>=8)&&(bps[7]._Ti<TVENTOFF)&&(bps[7]._cnt<10)))
;;;5954   			)
;;;5955   			{
;;;5956   			vent_stat=0;
;;;5957   			}
;;;5958   		}
;;;5959   	}
;;;5960   else if(RELEVENTSIGN==rvsEXT)
;;;5961   	{
;;;5962   	if	(
;;;5963   		((NUMDT)&&((t_ext[0]>TVENTON)||(ND_EXT[0])))
;;;5964   		||
;;;5965   		((NUMDT>1)&&((t_ext[1]>TVENTON)||(ND_EXT[1])))
;;;5966   		||
;;;5967   		((NUMDT>2)&&((t_ext[2]>TVENTON)||(ND_EXT[2])))
;;;5968   		)
;;;5969   		{
;;;5970   		vent_stat=1;
;;;5971   		}
;;;5972   	else if(vent_stat==1)
;;;5973   		{
;;;5974   		if	(
;;;5975   			((!NUMDT)||((NUMDT)&&(t_ext[0]<TVENTOFF)&&(!ND_EXT[0])))
;;;5976   			&&
;;;5977   			((NUMDT<2)||((NUMDT>=2)&&(t_ext[1]<TVENTOFF)&&(!ND_EXT[1])))
;;;5978   			&&
;;;5979   			((NUMDT<3)||((NUMDT>=3)&&(t_ext[2]<TVENTOFF)&&(!ND_EXT[2])))
;;;5980   			)
;;;5981   			{
;;;5982   			vent_stat=0;
;;;5983   			}
;;;5984   		}
;;;5985   	}
;;;5986   else vent_stat=1;
;;;5987   }
003850  b007              ADD      sp,sp,#0x1c
003852  e8bd8ff0          POP      {r4-r11,pc}
                  |L1.14422|
003856  2b01              CMP      r3,#1                 ;5887
003858  d1fa              BNE      |L1.14416|
00385a  f1bc0f55          CMP      r12,#0x55             ;5889
00385e  d103              BNE      |L1.14440|
003860  4290              CMP      r0,r2                 ;5890
003862  daf5              BGE      |L1.14416|
003864  2d00              CMP      r5,#0                 ;5890
003866  d1f3              BNE      |L1.14416|
                  |L1.14440|
003868  f1b80f55          CMP      r8,#0x55              ;5892
00386c  d103              BNE      |L1.14454|
00386e  4296              CMP      r6,r2                 ;5892
003870  daee              BGE      |L1.14416|
003872  2f00              CMP      r7,#0                 ;5892
003874  d1ec              BNE      |L1.14416|
                  |L1.14454|
003876  2000              MOVS     r0,#0                 ;5895
003878  7020              STRB     r0,[r4,#0]            ;5895
00387a  e7e9              B        |L1.14416|
                  |L1.14460|
00387c  e7ff              B        |L1.14462|
                  |L1.14462|
00387e  2802              CMP      r0,#2                 ;5899
003880  d17e              BNE      |L1.14720|
003882  4ea1              LDR      r6,|L1.15112|
003884  489a              LDR      r0,|L1.15088|
003886  6ab5              LDR      r5,[r6,#0x28]         ;5917
003888  f9b00000          LDRSH    r0,[r0,#0]            ;5916  ; NUMIST
00388c  78f6              LDRB     r6,[r6,#3]            ;5917
00388e  b118              CBZ      r0,|L1.14488|
003890  428d              CMP      r5,r1                 ;5917
003892  dc7b              BGT      |L1.14732|
003894  2e1e              CMP      r6,#0x1e              ;5917
003896  d279              BCS      |L1.14732|
                  |L1.14488|
003898  f8dfc26c          LDR      r12,|L1.15112|
00389c  2801              CMP      r0,#1                 ;5919
00389e  f8dc707c          LDR      r7,[r12,#0x7c]        ;5919
0038a2  f89cc057          LDRB     r12,[r12,#0x57]       ;5919
0038a6  f8cdc018          STR      r12,[sp,#0x18]        ;5919
0038aa  dd06              BLE      |L1.14522|
0038ac  428f              CMP      r7,r1                 ;5919
0038ae  dc6d              BGT      |L1.14732|
0038b0  f8ddc018          LDR      r12,[sp,#0x18]        ;5919
0038b4  f1bc0f1e          CMP      r12,#0x1e             ;5919
0038b8  d268              BCS      |L1.14732|
                  |L1.14522|
0038ba  f8dfc24c          LDR      r12,|L1.15112|
0038be  2802              CMP      r0,#2                 ;5921
0038c0  f8dc80d0          LDR      r8,[r12,#0xd0]        ;5921
0038c4  f8cd8014          STR      r8,[sp,#0x14]         ;5921
0038c8  f89cc0ab          LDRB     r12,[r12,#0xab]       ;5921
0038cc  f8cdc010          STR      r12,[sp,#0x10]        ;5921
0038d0  dd08              BLE      |L1.14564|
0038d2  f8ddc014          LDR      r12,[sp,#0x14]        ;5921
0038d6  458c              CMP      r12,r1                ;5921
0038d8  dc58              BGT      |L1.14732|
0038da  f8ddc010          LDR      r12,[sp,#0x10]        ;5921
0038de  f1bc0f1e          CMP      r12,#0x1e             ;5921
0038e2  d253              BCS      |L1.14732|
                  |L1.14564|
0038e4  f8dfc220          LDR      r12,|L1.15112|
0038e8  2803              CMP      r0,#3                 ;5923
0038ea  f8dc8124          LDR      r8,[r12,#0x124]       ;5923
0038ee  f8cd800c          STR      r8,[sp,#0xc]          ;5923
0038f2  f89cc0ff          LDRB     r12,[r12,#0xff]       ;5923
0038f6  f8cdc008          STR      r12,[sp,#8]           ;5923
0038fa  dd08              BLE      |L1.14606|
0038fc  f8ddc00c          LDR      r12,[sp,#0xc]         ;5923
003900  458c              CMP      r12,r1                ;5923
003902  dc43              BGT      |L1.14732|
003904  f8ddc008          LDR      r12,[sp,#8]           ;5923
003908  f1bc0f1e          CMP      r12,#0x1e             ;5923
00390c  d23e              BCS      |L1.14732|
                  |L1.14606|
00390e  f8df81f8          LDR      r8,|L1.15112|
003912  2804              CMP      r0,#4                 ;5925
003914  f8d8c178          LDR      r12,[r8,#0x178]       ;5925
003918  f8988153          LDRB     r8,[r8,#0x153]        ;5925
00391c  f8cd8004          STR      r8,[sp,#4]            ;5925
003920  dd06              BLE      |L1.14640|
003922  458c              CMP      r12,r1                ;5925
003924  dc32              BGT      |L1.14732|
003926  f8dd8004          LDR      r8,[sp,#4]            ;5925
00392a  f1b80f1e          CMP      r8,#0x1e              ;5925
00392e  d22d              BCS      |L1.14732|
                  |L1.14640|
003930  f8df81d4          LDR      r8,|L1.15112|
003934  2805              CMP      r0,#5                 ;5927
003936  f8d891cc          LDR      r9,[r8,#0x1cc]        ;5927
00393a  f89881a7          LDRB     r8,[r8,#0x1a7]        ;5927
00393e  f8cd8000          STR      r8,[sp,#0]            ;5927
003942  dd06              BLE      |L1.14674|
003944  4589              CMP      r9,r1                 ;5927
003946  dc21              BGT      |L1.14732|
003948  f8dd8000          LDR      r8,[sp,#0]            ;5927
00394c  f1b80f1e          CMP      r8,#0x1e              ;5927
003950  d21c              BCS      |L1.14732|
                  |L1.14674|
003952  f8df81b4          LDR      r8,|L1.15112|
003956  2806              CMP      r0,#6                 ;5929
003958  f898a1fb          LDRB     r10,[r8,#0x1fb]       ;5929
00395c  f8d8e220          LDR      lr,[r8,#0x220]        ;5929
003960  dd04              BLE      |L1.14700|
003962  458e              CMP      lr,r1                 ;5929
003964  dc12              BGT      |L1.14732|
003966  f1ba0f1e          CMP      r10,#0x1e             ;5929
00396a  d20f              BCS      |L1.14732|
                  |L1.14700|
00396c  f8dfb198          LDR      r11,|L1.15112|
003970  2807              CMP      r0,#7                 ;5931
003972  f8db8274          LDR      r8,[r11,#0x274]       ;5931
003976  f89bb24f          LDRB     r11,[r11,#0x24f]      ;5931
00397a  dd0a              BLE      |L1.14738|
00397c  4588              CMP      r8,r1                 ;5931
00397e  e001              B        |L1.14724|
                  |L1.14720|
003980  e044              B        |L1.14860|
003982  e003              B        |L1.14732|
                  |L1.14724|
003984  dc02              BGT      |L1.14732|
003986  f1bb0f1e          CMP      r11,#0x1e             ;5931
00398a  d302              BCC      |L1.14738|
                  |L1.14732|
00398c  2001              MOVS     r0,#1                 ;5934
00398e  7020              STRB     r0,[r4,#0]            ;5934
                  |L1.14736|
003990  e75e              B        |L1.14416|
                  |L1.14738|
003992  2b01              CMP      r3,#1                 ;5936
003994  d1fc              BNE      |L1.14736|
003996  b118              CBZ      r0,|L1.14752|
003998  4295              CMP      r5,r2                 ;5939
00399a  daf9              BGE      |L1.14736|
00399c  2e0a              CMP      r6,#0xa               ;5939
00399e  d2f7              BCS      |L1.14736|
                  |L1.14752|
0039a0  2802              CMP      r0,#2                 ;5941
0039a2  db04              BLT      |L1.14766|
0039a4  4297              CMP      r7,r2                 ;5941
0039a6  daf3              BGE      |L1.14736|
0039a8  9906              LDR      r1,[sp,#0x18]         ;5941
0039aa  290a              CMP      r1,#0xa               ;5941
0039ac  d2f0              BCS      |L1.14736|
                  |L1.14766|
0039ae  2803              CMP      r0,#3                 ;5943
0039b0  db05              BLT      |L1.14782|
0039b2  9905              LDR      r1,[sp,#0x14]         ;5943
0039b4  4291              CMP      r1,r2                 ;5943
0039b6  daeb              BGE      |L1.14736|
0039b8  9904              LDR      r1,[sp,#0x10]         ;5943
0039ba  290a              CMP      r1,#0xa               ;5943
0039bc  d2e8              BCS      |L1.14736|
                  |L1.14782|
0039be  2804              CMP      r0,#4                 ;5945
0039c0  db05              BLT      |L1.14798|
0039c2  9903              LDR      r1,[sp,#0xc]          ;5945
0039c4  4291              CMP      r1,r2                 ;5945
0039c6  dae3              BGE      |L1.14736|
0039c8  9902              LDR      r1,[sp,#8]            ;5945
0039ca  290a              CMP      r1,#0xa               ;5945
0039cc  d2e0              BCS      |L1.14736|
                  |L1.14798|
0039ce  2805              CMP      r0,#5                 ;5947
0039d0  db04              BLT      |L1.14812|
0039d2  4594              CMP      r12,r2                ;5947
0039d4  dadc              BGE      |L1.14736|
0039d6  9901              LDR      r1,[sp,#4]            ;5947
0039d8  290a              CMP      r1,#0xa               ;5947
0039da  d2d9              BCS      |L1.14736|
                  |L1.14812|
0039dc  2806              CMP      r0,#6                 ;5949
0039de  db04              BLT      |L1.14826|
0039e0  4591              CMP      r9,r2                 ;5949
0039e2  dad5              BGE      |L1.14736|
0039e4  9900              LDR      r1,[sp,#0]            ;5949
0039e6  290a              CMP      r1,#0xa               ;5949
0039e8  d2d2              BCS      |L1.14736|
                  |L1.14826|
0039ea  2807              CMP      r0,#7                 ;5951
0039ec  db04              BLT      |L1.14840|
0039ee  4596              CMP      lr,r2                 ;5951
0039f0  dace              BGE      |L1.14736|
0039f2  f1ba0f0a          CMP      r10,#0xa              ;5951
0039f6  d2cb              BCS      |L1.14736|
                  |L1.14840|
0039f8  2808              CMP      r0,#8                 ;5953
0039fa  db04              BLT      |L1.14854|
0039fc  4590              CMP      r8,r2                 ;5953
0039fe  dac7              BGE      |L1.14736|
003a00  f1bb0f0a          CMP      r11,#0xa              ;5953
003a04  d2c4              BCS      |L1.14736|
                  |L1.14854|
003a06  2000              MOVS     r0,#0                 ;5956
003a08  7020              STRB     r0,[r4,#0]            ;5956
003a0a  e721              B        |L1.14416|
                  |L1.14860|
003a0c  2801              CMP      r0,#1                 ;5960
003a0e  d11b              BNE      |L1.14920|
003a10  483e              LDR      r0,|L1.15116|
003a12  4d3f              LDR      r5,|L1.15120|
003a14  4e3f              LDR      r6,|L1.15124|
003a16  f9b00000          LDRSH    r0,[r0,#0]            ;5962  ; NUMDT
003a1a  f9b55000          LDRSH    r5,[r5,#0]            ;5963
003a1e  6836              LDR      r6,[r6,#0]            ;5963
003a20  b110              CBZ      r0,|L1.14888|
003a22  428d              CMP      r5,r1                 ;5963
003a24  dc0f              BGT      |L1.14918|
003a26  b976              CBNZ     r6,|L1.14918|
                  |L1.14888|
003a28  4f39              LDR      r7,|L1.15120|
003a2a  f8dfc0e8          LDR      r12,|L1.15124|
003a2e  f9b77002          LDRSH    r7,[r7,#2]            ;5965
003a32  f8dcc004          LDR      r12,[r12,#4]          ;5965
003a36  2801              CMP      r0,#1                 ;5965
003a38  dd04              BLE      |L1.14916|
003a3a  428f              CMP      r7,r1                 ;5965
003a3c  dc7b              BGT      |L1.15158|
003a3e  f1bc0f00          CMP      r12,#0                ;5965
003a42  d178              BNE      |L1.15158|
                  |L1.14916|
003a44  e068              B        |L1.15128|
                  |L1.14918|
003a46  e076              B        |L1.15158|
                  |L1.14920|
003a48  e090              B        |L1.15212|
003a4a  0000              DCW      0x0000
                  |L1.14924|
                          DCD      UVNPN
                  |L1.14928|
                          DCD      speedChIsOn
                  |L1.14932|
                          DCD      speedChrgBlckStat
                  |L1.14936|
                          DCD      speedChTimeCnt
                  |L1.14940|
                          DCD      speedChrgTimeInHour
                  |L1.14944|
                          DCD      speedChrgAvtEn
                  |L1.14948|
                          DCD      load_U
                  |L1.14952|
                          DCD      u_necc
                  |L1.14956|
                          DCD      speedChrgDU
                  |L1.14960|
                          DCD      Ib_ips_termokompensat
                  |L1.14964|
                          DCD      IZMAX
                  |L1.14968|
                          DCD      speedChrgBlckSrc
                  |L1.14972|
                          DCD      speedChrgBlckLog
                  |L1.14976|
                          DCD      ||.bss||+0x400
                  |L1.14980|
                          DCD      speedChrgShowCnt
                  |L1.14984|
003a88  20202020          DCB      "                    ",0
003a8c  20202020
003a90  20202020
003a94  20202020
003a98  20202020
003a9c  00      
003a9d  00                DCB      0
003a9e  00                DCB      0
003a9f  00                DCB      0
                  |L1.15008|
003aa0  20202020          DCB      "     ",199,192,207,208,197,217,197,205,"!!!    ",0
003aa4  20c7c0cf
003aa8  d0c5d9c5
003aac  cd212121
003ab0  20202020
003ab4  00      
003ab5  00                DCB      0
003ab6  00                DCB      0
003ab7  00                DCB      0
                  |L1.15032|
003ab8  20202020          DCB      "       ",199,192,208,223,196,"        ",0
003abc  202020c7
003ac0  c0d0dfc4
003ac4  20202020
003ac8  20202020
003acc  00      
003acd  00                DCB      0
003ace  00                DCB      0
003acf  00                DCB      0
                  |L1.15056|
003ad0  20202020          DCB      "     ",211,209,202,206,208,197,205,205,219,201,"     ",0
003ad4  20d3d1ca
003ad8  ced0c5cd
003adc  cddbc920
003ae0  20202020
003ae4  00      
003ae5  00                DCB      0
003ae6  00                DCB      0
003ae7  00                DCB      0
                  |L1.15080|
                          DCD      ||area_number.21||
                  |L1.15084|
                          DCD      FORVARDBPSCHHOUR
                  |L1.15088|
                          DCD      NUMIST
                  |L1.15092|
                          DCD      RELEVENTSIGN
                  |L1.15096|
                          DCD      TVENTON
                  |L1.15100|
                          DCD      TVENTOFF
                  |L1.15104|
                          DCD      bat
                  |L1.15108|
                          DCD      BAT_IS_ON
                  |L1.15112|
                          DCD      bps
                  |L1.15116|
                          DCD      NUMDT
                  |L1.15120|
                          DCD      t_ext
                  |L1.15124|
                          DCD      ND_EXT
                  |L1.15128|
003b18  f8df8058          LDR      r8,|L1.15220|
003b1c  f8df9058          LDR      r9,|L1.15224|
003b20  f9b88004          LDRSH    r8,[r8,#4]            ;5967
003b24  f8d99008          LDR      r9,[r9,#8]            ;5967
003b28  2802              CMP      r0,#2                 ;5967
003b2a  dd07              BLE      |L1.15164|
003b2c  4588              CMP      r8,r1                 ;5967
003b2e  dc02              BGT      |L1.15158|
003b30  f1b90f00          CMP      r9,#0                 ;5967
003b34  d002              BEQ      |L1.15164|
                  |L1.15158|
003b36  2001              MOVS     r0,#1                 ;5970
003b38  7020              STRB     r0,[r4,#0]            ;5970
                  |L1.15162|
003b3a  e689              B        |L1.14416|
                  |L1.15164|
003b3c  2b01              CMP      r3,#1                 ;5972
003b3e  d1fc              BNE      |L1.15162|
003b40  b118              CBZ      r0,|L1.15178|
003b42  4295              CMP      r5,r2                 ;5975
003b44  daf9              BGE      |L1.15162|
003b46  2e00              CMP      r6,#0                 ;5975
003b48  d1f7              BNE      |L1.15162|
                  |L1.15178|
003b4a  2802              CMP      r0,#2                 ;5977
003b4c  db04              BLT      |L1.15192|
003b4e  4297              CMP      r7,r2                 ;5977
003b50  daf3              BGE      |L1.15162|
003b52  f1bc0f00          CMP      r12,#0                ;5977
003b56  d1f0              BNE      |L1.15162|
                  |L1.15192|
003b58  2803              CMP      r0,#3                 ;5979
003b5a  db04              BLT      |L1.15206|
003b5c  4590              CMP      r8,r2                 ;5979
003b5e  daec              BGE      |L1.15162|
003b60  f1b90f00          CMP      r9,#0                 ;5979
003b64  d1e9              BNE      |L1.15162|
                  |L1.15206|
003b66  2000              MOVS     r0,#0                 ;5982
003b68  7020              STRB     r0,[r4,#0]            ;5982
003b6a  e671              B        |L1.14416|
                  |L1.15212|
003b6c  2001              MOVS     r0,#1                 ;5986
003b6e  7020              STRB     r0,[r4,#0]            ;5986
003b70  e66e              B        |L1.14416|
;;;5988   
                          ENDP

003b72  0000              DCW      0x0000
                  |L1.15220|
                          DCD      t_ext
                  |L1.15224|
                          DCD      ND_EXT

                          AREA ||area_number.2||, CODE, READONLY, ALIGN=2

                          EXPORTAS ||area_number.2||, ||.text||
                  samokalibr_init PROC
;;;213    //-----------------------------------------------
;;;214    void ke_start(char in)
000000  4902              LDR      r1,|L2.12|
;;;215    {          
000002  f24060f9          MOV      r0,#0x6f9
;;;216    ke_start_stat=(enum_ke_start_stat)0;		 
000006  8748              STRH     r0,[r1,#0x3a]
000008  4770              BX       lr
;;;217    
;;;218    if(spc_stat==spcVZ)ke_start_stat=kssNOT_VZ;
;;;219    else if(BAT_IS_ON[in]!=bisON)ke_start_stat=kssNOT_BAT;
;;;220    else if(bat[in]._av&(1<<0))ke_start_stat=kssNOT_BAT_AV;
;;;221    else if(bat[in]._temper_stat&(1<<1))ke_start_stat=kssNOT_BAT_AV_T;
;;;222    else if(bat[in]._av&(1<<1))ke_start_stat=kssNOT_BAT_AV_ASS;
;;;223    else if(bat[in]._Ib>IKB)ke_start_stat=kssNOT_BAT_ZAR;
;;;224    else if(bat[in]._Ib<-IKB)ke_start_stat=kssNOT_BAT_RAZR;
;;;225    else if((spc_stat==spcKE)&&(spc_bat==0))ke_start_stat=kssNOT_KE1;
;;;226    else if((spc_stat==spcKE)&&(spc_bat==1))ke_start_stat=kssNOT_KE2;
;;;227    else 
;;;228    	{
;;;229    
;;;230    	ke_start_stat=kssYES;
;;;231    
;;;232    	spc_stat=spcKE;
;;;233    	__ee_spc_stat=spcKE;
;;;234    	lc640_write_int(EE_SPC_STAT,__ee_spc_stat);
;;;235    	
;;;236    	spc_bat=in;
;;;237    	__ee_spc_bat=in;
;;;238    	lc640_write_int(EE_SPC_BAT,__ee_spc_bat);
;;;239    
;;;240    	bat[in]._zar_cnt_ke=0;
;;;241    	lc640_write_int(ADR_EE_BAT_ZAR_CNT_KE[in],0);
;;;242    	
;;;243    	spc_phase=0;
;;;244    	__ee_spc_phase=0;
;;;245    	lc640_write_int(EE_SPC_PHASE,__ee_spc_phase);
;;;246    
;;;247    	//ke_mem_hndl(in,lc640_read_int(ADR_EE_BAT_ZAR_CNT_KE[spc_bat]));
;;;248    
;;;249    		{					
;;;250    		signed short temp_temp;
;;;251    		signed char temp;
;;;252    		temp_temp=bat[in]._u_old[((bat_u_old_cnt+1)&0x07)]; 
;;;253    		    
;;;254    		temp=LPC_RTC->YEAR;
;;;255    		gran_char(&temp,1,99);
;;;256    		*((char*)(&(ke_date[0])))=temp;
;;;257    			
;;;258    		temp=LPC_RTC->MONTH;
;;;259    		gran_char(&temp,1,12);
;;;260    		*(((char*)(&(ke_date[0])))+1)=temp;
;;;261    		
;;;262    		temp=LPC_RTC->DOM;
;;;263    		gran_char(&temp,1,31);
;;;264    		*(((char*)(&(ke_date[0])))+2)=temp;			
;;;265    				
;;;266    		*(((char*)(&(ke_date[0])))+3)=*((char*)&temp_temp);
;;;267    		lc640_write_long(EE_SPC_KE_DATE0,ke_date[0]);
;;;268    
;;;269    		temp=LPC_RTC->HOUR;
;;;270    		gran_char(&temp,0,23);
;;;271    		*((char*)(&(ke_date[1])))=temp;
;;;272                   
;;;273    		temp=LPC_RTC->MIN;
;;;274    		gran_char(&temp,0,59);
;;;275    		*(((char*)(&(ke_date[1])))+1)=temp;
;;;276    	          
;;;277    		temp=LPC_RTC->SEC;
;;;278    		gran_char(&temp,0,59);
;;;279    		*(((char*)(&(ke_date[1])))+2)=temp;
;;;280    			
;;;281    		*(((char*)(&(ke_date[1])))+3)=*(((char*)&temp_temp)+1);
;;;282    		lc640_write_long(EE_SPC_KE_DATE1,ke_date[1]);
;;;283    		}
;;;284    
;;;285    	}
;;;286    }
;;;287    
                          ENDP

00000a  0000              DCW      0x0000
                  |L2.12|
                          DCD      ||area_number.21||

                          AREA ||area_number.3||, CODE, READONLY, ALIGN=2

                          EXPORTAS ||area_number.3||, ||.text||
                  adc_drv6 PROC
;;;213    //-----------------------------------------------
;;;214    void ke_start(char in)
000000  e92d41f0          PUSH     {r4-r8,lr}
;;;215    {          
000004  4d79              LDR      r5,|L3.492|
;;;216    ke_start_stat=(enum_ke_start_stat)0;		 
000006  8868              LDRH     r0,[r5,#2]  ; adc_self_ch_buff
000008  8829              LDRH     r1,[r5,#0]  ; adc_self_ch_buff
00000a  1a40              SUBS     r0,r0,r1
;;;217    
;;;218    if(spc_stat==spcVZ)ke_start_stat=kssNOT_VZ;
00000c  b200              SXTH     r0,r0
00000e  f7fffffe          BL       abs_pal
000012  1dae              ADDS     r6,r5,#6
000014  8030              STRH     r0,[r6,#0]
;;;219    else if(BAT_IS_ON[in]!=bisON)ke_start_stat=kssNOT_BAT;
;;;220    else if(bat[in]._av&(1<<0))ke_start_stat=kssNOT_BAT_AV;
;;;221    else if(bat[in]._temper_stat&(1<<1))ke_start_stat=kssNOT_BAT_AV_T;
;;;222    else if(bat[in]._av&(1<<1))ke_start_stat=kssNOT_BAT_AV_ASS;
;;;223    else if(bat[in]._Ib>IKB)ke_start_stat=kssNOT_BAT_ZAR;
;;;224    else if(bat[in]._Ib<-IKB)ke_start_stat=kssNOT_BAT_RAZR;
;;;225    else if((spc_stat==spcKE)&&(spc_bat==0))ke_start_stat=kssNOT_KE1;
;;;226    else if((spc_stat==spcKE)&&(spc_bat==1))ke_start_stat=kssNOT_KE2;
;;;227    else 
;;;228    	{
;;;229    
;;;230    	ke_start_stat=kssYES;
;;;231    
;;;232    	spc_stat=spcKE;
;;;233    	__ee_spc_stat=spcKE;
;;;234    	lc640_write_int(EE_SPC_STAT,__ee_spc_stat);
;;;235    	
;;;236    	spc_bat=in;
;;;237    	__ee_spc_bat=in;
;;;238    	lc640_write_int(EE_SPC_BAT,__ee_spc_bat);
;;;239    
;;;240    	bat[in]._zar_cnt_ke=0;
;;;241    	lc640_write_int(ADR_EE_BAT_ZAR_CNT_KE[in],0);
;;;242    	
;;;243    	spc_phase=0;
;;;244    	__ee_spc_phase=0;
;;;245    	lc640_write_int(EE_SPC_PHASE,__ee_spc_phase);
;;;246    
;;;247    	//ke_mem_hndl(in,lc640_read_int(ADR_EE_BAT_ZAR_CNT_KE[spc_bat]));
;;;248    
;;;249    		{					
;;;250    		signed short temp_temp;
;;;251    		signed char temp;
;;;252    		temp_temp=bat[in]._u_old[((bat_u_old_cnt+1)&0x07)]; 
;;;253    		    
;;;254    		temp=LPC_RTC->YEAR;
;;;255    		gran_char(&temp,1,99);
;;;256    		*((char*)(&(ke_date[0])))=temp;
;;;257    			
;;;258    		temp=LPC_RTC->MONTH;
;;;259    		gran_char(&temp,1,12);
;;;260    		*(((char*)(&(ke_date[0])))+1)=temp;
;;;261    		
;;;262    		temp=LPC_RTC->DOM;
;;;263    		gran_char(&temp,1,31);
;;;264    		*(((char*)(&(ke_date[0])))+2)=temp;			
;;;265    				
;;;266    		*(((char*)(&(ke_date[0])))+3)=*((char*)&temp_temp);
;;;267    		lc640_write_long(EE_SPC_KE_DATE0,ke_date[0]);
;;;268    
;;;269    		temp=LPC_RTC->HOUR;
;;;270    		gran_char(&temp,0,23);
;;;271    		*((char*)(&(ke_date[1])))=temp;
;;;272                   
;;;273    		temp=LPC_RTC->MIN;
;;;274    		gran_char(&temp,0,59);
;;;275    		*(((char*)(&(ke_date[1])))+1)=temp;
;;;276    	          
;;;277    		temp=LPC_RTC->SEC;
;;;278    		gran_char(&temp,0,59);
;;;279    		*(((char*)(&(ke_date[1])))+2)=temp;
;;;280    			
;;;281    		*(((char*)(&(ke_date[1])))+3)=*(((char*)&temp_temp)+1);
;;;282    		lc640_write_long(EE_SPC_KE_DATE1,ke_date[1]);
;;;283    		}
;;;284    
;;;285    	}
;;;286    }
000016  88a8              LDRH     r0,[r5,#4]  ; adc_self_ch_buff
000018  8869              LDRH     r1,[r5,#2]  ; adc_self_ch_buff
00001a  1a40              SUBS     r0,r0,r1              ;219
00001c  b200              SXTH     r0,r0                 ;219
00001e  f7fffffe          BL       abs_pal
000022  8070              STRH     r0,[r6,#2]            ;219
000024  88a8              LDRH     r0,[r5,#4]            ;219  ; adc_self_ch_buff
000026  8829              LDRH     r1,[r5,#0]  ; adc_self_ch_buff
000028  1a40              SUBS     r0,r0,r1              ;220
00002a  b200              SXTH     r0,r0                 ;220
00002c  f7fffffe          BL       abs_pal
000030  80b0              STRH     r0,[r6,#4]            ;220
000032  f44f7196          MOV      r1,#0x12c             ;220
000036  f1a5048e          SUB      r4,r5,#0x8e           ;220
00003a  4288              CMP      r0,r1                 ;220
00003c  da02              BGE      |L3.68|
00003e  88a8              LDRH     r0,[r5,#4]            ;220  ; adc_self_ch_buff
000040  8520              STRH     r0,[r4,#0x28]         ;220
000042  e00c              B        |L3.94|
                  |L3.68|
000044  f9b60002          LDRSH    r0,[r6,#2]            ;221  ; adc_self_ch_disp
000048  4288              CMP      r0,r1                 ;221
00004a  da02              BGE      |L3.82|
00004c  8868              LDRH     r0,[r5,#2]            ;221  ; adc_self_ch_buff
00004e  8520              STRH     r0,[r4,#0x28]         ;221
000050  e005              B        |L3.94|
                  |L3.82|
000052  f9b60000          LDRSH    r0,[r6,#0]            ;222  ; adc_self_ch_disp
000056  4288              CMP      r0,r1                 ;222
000058  da01              BGE      |L3.94|
00005a  8828              LDRH     r0,[r5,#0]  ; adc_self_ch_buff
00005c  8520              STRH     r0,[r4,#0x28]         ;223
                  |L3.94|
00005e  78a5              LDRB     r5,[r4,#2]            ;223  ; adc_ch_net
000060  2200              MOVS     r2,#0                 ;223
000062  2d00              CMP      r5,#0                 ;223
000064  d04e              BEQ      |L3.260|
000066  7963              LDRB     r3,[r4,#5]            ;223  ; adc_window_flag
000068  4861              LDR      r0,|L3.496|
00006a  b18b              CBZ      r3,|L3.144|
00006c  f9b41028          LDRSH    r1,[r4,#0x28]         ;223  ; adc_result
000070  6806              LDR      r6,[r0,#0]            ;224  ; main_power_buffer
000072  eb0606a1          ADD      r6,r6,r1,ASR #2       ;224
000076  6006              STR      r6,[r0,#0]            ;224  ; main_power_buffer
000078  6846              LDR      r6,[r0,#4]            ;224  ; main_power_buffer
00007a  eb0606a1          ADD      r6,r6,r1,ASR #2
00007e  6046              STR      r6,[r0,#4]            ;225  ; main_power_buffer
000080  6886              LDR      r6,[r0,#8]            ;225  ; main_power_buffer
000082  eb0606a1          ADD      r6,r6,r1,ASR #2       ;225
000086  6086              STR      r6,[r0,#8]            ;225  ; main_power_buffer
000088  68c6              LDR      r6,[r0,#0xc]          ;225  ; main_power_buffer
00008a  eb0601a1          ADD      r1,r6,r1,ASR #2
00008e  60c1              STR      r1,[r0,#0xc]          ;226  ; main_power_buffer
                  |L3.144|
000090  f9b41028          LDRSH    r1,[r4,#0x28]         ;226  ; adc_result
000094  2964              CMP      r1,#0x64              ;226
000096  da03              BGE      |L3.160|
000098  8da1              LDRH     r1,[r4,#0x2c]  ; adc_zero_cnt
00009a  1c49              ADDS     r1,r1,#1              ;230
00009c  85a1              STRH     r1,[r4,#0x2c]         ;230
00009e  e000              B        |L3.162|
                  |L3.160|
0000a0  85a2              STRH     r2,[r4,#0x2c]         ;233
                  |L3.162|
0000a2  f9b4602c          LDRSH    r6,[r4,#0x2c]         ;233  ; adc_zero_cnt
0000a6  f44f61fa          MOV      r1,#0x7d0             ;234
0000aa  428e              CMP      r6,r1                 ;234
0000ac  db05              BLT      |L3.186|
0000ae  85a1              STRH     r1,[r4,#0x2c]         ;236
0000b0  6002              STR      r2,[r0,#0]            ;237  ; main_power_buffer
0000b2  6042              STR      r2,[r0,#4]            ;237  ; main_power_buffer
0000b4  6082              STR      r2,[r0,#8]            ;237  ; main_power_buffer
0000b6  60c2              STR      r2,[r0,#0xc]          ;238  ; main_power_buffer
0000b8  84e2              STRH     r2,[r4,#0x26]         ;238
                  |L3.186|
0000ba  8da1              LDRH     r1,[r4,#0x2c]         ;238  ; adc_zero_cnt
0000bc  2905              CMP      r1,#5                 ;238
0000be  d145              BNE      |L3.332|
0000c0  b193              CBZ      r3,|L3.232|
0000c2  8d61              LDRH     r1,[r4,#0x2a]         ;241  ; adc_gorb_cnt
0000c4  1c49              ADDS     r1,r1,#1              ;241
0000c6  b209              SXTH     r1,r1                 ;241
0000c8  8561              STRH     r1,[r4,#0x2a]         ;241
0000ca  f5b17f00          CMP      r1,#0x200             ;241
0000ce  db00              BLT      |L3.210|
0000d0  8562              STRH     r2,[r4,#0x2a]         ;244
                  |L3.210|
0000d2  f9b4102a          LDRSH    r1,[r4,#0x2a]         ;245  ; adc_gorb_cnt
0000d6  064e              LSLS     r6,r1,#25             ;245
0000d8  d106              BNE      |L3.232|
0000da  11c9              ASRS     r1,r1,#7              ;245
0000dc  f8506021          LDR      r6,[r0,r1,LSL #2]     ;252
0000e0  1236              ASRS     r6,r6,#8              ;252
0000e2  84e6              STRH     r6,[r4,#0x26]         ;252
0000e4  f8402021          STR      r2,[r0,r1,LSL #2]     ;252
                  |L3.232|
0000e8  f9b4002e          LDRSH    r0,[r4,#0x2e]         ;252  ; adc_window_cnt
0000ec  2896              CMP      r0,#0x96              ;252
0000ee  dd01              BLE      |L3.244|
0000f0  b103              CBZ      r3,|L3.244|
0000f2  7162              STRB     r2,[r4,#5]            ;254
                  |L3.244|
0000f4  381f              SUBS     r0,r0,#0x1f           ;255
0000f6  2827              CMP      r0,#0x27              ;255
0000f8  d228              BCS      |L3.332|
0000fa  7960              LDRB     r0,[r4,#5]            ;255  ; adc_window_flag
0000fc  bb30              CBNZ     r0,|L3.332|
0000fe  2001              MOVS     r0,#1                 ;255
000100  7160              STRB     r0,[r4,#5]            ;255
000102  e023              B        |L3.332|
                  |L3.260|
000104  493b              LDR      r1,|L3.500|
000106  78e6              LDRB     r6,[r4,#3]            ;256  ; adc_ch
000108  7927              LDRB     r7,[r4,#4]            ;256  ; adc_ch_cnt
00010a  f9b40028          LDRSH    r0,[r4,#0x28]         ;256  ; adc_result
00010e  eb011386          ADD      r3,r1,r6,LSL #6       ;258
000112  f8430027          STR      r0,[r3,r7,LSL #2]     ;259
000116  07b8              LSLS     r0,r7,#30             ;259
000118  d10c              BNE      |L3.308|
00011a  2100              MOVS     r1,#0                 ;260
                  |L3.284|
00011c  f853c020          LDR      r12,[r3,r0,LSL #2]    ;260
000120  4461              ADD      r1,r1,r12             ;262
000122  1c40              ADDS     r0,r0,#1              ;262
000124  b2c0              UXTB     r0,r0                 ;263
000126  2810              CMP      r0,#0x10              ;263
000128  d3f8              BCC      |L3.284|
00012a  1108              ASRS     r0,r1,#4              ;263
00012c  4930              LDR      r1,|L3.496|
00012e  3920              SUBS     r1,r1,#0x20           ;264
000130  f8210016          STRH     r0,[r1,r6,LSL #1]     ;264
                  |L3.308|
000134  1c76              ADDS     r6,r6,#1              ;266
000136  b2f0              UXTB     r0,r6                 ;266
000138  70e0              STRB     r0,[r4,#3]            ;266
00013a  2810              CMP      r0,#0x10              ;267
00013c  d306              BCC      |L3.332|
00013e  70e2              STRB     r2,[r4,#3]            ;267
000140  1c7f              ADDS     r7,r7,#1              ;267
000142  b2f8              UXTB     r0,r7                 ;267
000144  7120              STRB     r0,[r4,#4]            ;269
000146  2810              CMP      r0,#0x10              ;269
000148  d300              BCC      |L3.332|
00014a  7122              STRB     r2,[r4,#4]            ;270
                  |L3.332|
00014c  7062              STRB     r2,[r4,#1]            ;270
00014e  1c6d              ADDS     r5,r5,#1              ;270
000150  f0050001          AND      r0,r5,#1              ;270
000154  70a0              STRB     r0,[r4,#2]            ;271
000156  4a28              LDR      r2,|L3.504|
000158  b128              CBZ      r0,|L3.358|
00015a  6810              LDR      r0,[r2,#0]            ;273
00015c  f02000ff          BIC      r0,r0,#0xff           ;274
000160  1d00              ADDS     r0,r0,#4              ;274
000162  6010              STR      r0,[r2,#0]            ;274
000164  e03b              B        |L3.478|
                  |L3.358|
000166  78e0              LDRB     r0,[r4,#3]            ;275  ; adc_ch
000168  0701              LSLS     r1,r0,#28             ;275
00016a  d405              BMI      |L3.376|
00016c  6811              LDR      r1,[r2,#0]            ;277
00016e  f02101ff          BIC      r1,r1,#0xff           ;277
000172  1c49              ADDS     r1,r1,#1              ;278
000174  6011              STR      r1,[r2,#0]            ;278
000176  e004              B        |L3.386|
                  |L3.376|
000178  6811              LDR      r1,[r2,#0]            ;278
00017a  f02101ff          BIC      r1,r1,#0xff           ;279
00017e  1c89              ADDS     r1,r1,#2              ;279
000180  6011              STR      r1,[r2,#0]            ;281
                  |L3.386|
000182  491e              LDR      r1,|L3.508|
000184  680b              LDR      r3,[r1,#0]            ;281
000186  f0435380          ORR      r3,r3,#0x10000000     ;282
00018a  600b              STR      r3,[r1,#0]            ;282
00018c  6a0b              LDR      r3,[r1,#0x20]         ;282
00018e  f0434380          ORR      r3,r3,#0x40000000     ;282
000192  620b              STR      r3,[r1,#0x20]
000194  6e0b              LDR      r3,[r1,#0x60]
000196  f0436380          ORR      r3,r3,#0x4000000
00019a  660b              STR      r3,[r1,#0x60]
00019c  07c3              LSLS     r3,r0,#31
00019e  d104              BNE      |L3.426|
0001a0  694b              LDR      r3,[r1,#0x14]
0001a2  f0235380          BIC      r3,r3,#0x10000000
0001a6  614b              STR      r3,[r1,#0x14]
0001a8  e003              B        |L3.434|
                  |L3.426|
0001aa  694b              LDR      r3,[r1,#0x14]
0001ac  f0435380          ORR      r3,r3,#0x10000000
0001b0  614b              STR      r3,[r1,#0x14]
                  |L3.434|
0001b2  0783              LSLS     r3,r0,#30
0001b4  d404              BMI      |L3.448|
0001b6  6b4b              LDR      r3,[r1,#0x34]
0001b8  f0234380          BIC      r3,r3,#0x40000000
0001bc  634b              STR      r3,[r1,#0x34]
0001be  e003              B        |L3.456|
                  |L3.448|
0001c0  6b4b              LDR      r3,[r1,#0x34]
0001c2  f0434380          ORR      r3,r3,#0x40000000
0001c6  634b              STR      r3,[r1,#0x34]
                  |L3.456|
0001c8  0740              LSLS     r0,r0,#29
0001ca  d404              BMI      |L3.470|
0001cc  6f48              LDR      r0,[r1,#0x74]
0001ce  f0206080          BIC      r0,r0,#0x4000000
0001d2  6748              STR      r0,[r1,#0x74]
0001d4  e003              B        |L3.478|
                  |L3.470|
0001d6  6f48              LDR      r0,[r1,#0x74]
0001d8  f0406080          ORR      r0,r0,#0x4000000
0001dc  6748              STR      r0,[r1,#0x74]
                  |L3.478|
0001de  6810              LDR      r0,[r2,#0]
0001e0  f0407080          ORR      r0,r0,#0x1000000
0001e4  6010              STR      r0,[r2,#0]
0001e6  e8bd81f0          POP      {r4-r8,pc}
;;;287    
                          ENDP

0001ea  0000              DCW      0x0000
                  |L3.492|
                          DCD      ||area_number.21||+0x8e
                  |L3.496|
                          DCD      ||.bss||+0x420
                  |L3.500|
                          DCD      ||.bss||
                  |L3.504|
                          DCD      0x40034000
                  |L3.508|
                          DCD      0x2009c000

                          AREA ||area_number.4||, CODE, READONLY, ALIGN=2

                          EXPORTAS ||area_number.4||, ||.text||
                  inv_drv PROC
;;;213    //-----------------------------------------------
;;;214    void ke_start(char in)
000000  b570              PUSH     {r4-r6,lr}
;;;215    {          
000002  4604              MOV      r4,r0
000004  2207              MOVS     r2,#7
;;;216    ke_start_stat=(enum_ke_start_stat)0;		 
000006  2101              MOVS     r1,#1
000008  489d              LDR      r0,|L4.640|
00000a  f7fffffe          BL       gran_char
;;;217    
;;;218    if(spc_stat==spcVZ)ke_start_stat=kssNOT_VZ;
00000e  489d              LDR      r0,|L4.644|
000010  eb040144          ADD      r1,r4,r4,LSL #1
000014  eb001541          ADD      r5,r0,r1,LSL #5
;;;219    else if(BAT_IS_ON[in]!=bisON)ke_start_stat=kssNOT_BAT;
;;;220    else if(bat[in]._av&(1<<0))ke_start_stat=kssNOT_BAT_AV;
;;;221    else if(bat[in]._temper_stat&(1<<1))ke_start_stat=kssNOT_BAT_AV_T;
;;;222    else if(bat[in]._av&(1<<1))ke_start_stat=kssNOT_BAT_AV_ASS;
;;;223    else if(bat[in]._Ib>IKB)ke_start_stat=kssNOT_BAT_ZAR;
;;;224    else if(bat[in]._Ib<-IKB)ke_start_stat=kssNOT_BAT_RAZR;
;;;225    else if((spc_stat==spcKE)&&(spc_bat==0))ke_start_stat=kssNOT_KE1;
;;;226    else if((spc_stat==spcKE)&&(spc_bat==1))ke_start_stat=kssNOT_KE2;
;;;227    else 
;;;228    	{
;;;229    
;;;230    	ke_start_stat=kssYES;
;;;231    
;;;232    	spc_stat=spcKE;
;;;233    	__ee_spc_stat=spcKE;
;;;234    	lc640_write_int(EE_SPC_STAT,__ee_spc_stat);
;;;235    	
;;;236    	spc_bat=in;
;;;237    	__ee_spc_bat=in;
;;;238    	lc640_write_int(EE_SPC_BAT,__ee_spc_bat);
;;;239    
;;;240    	bat[in]._zar_cnt_ke=0;
;;;241    	lc640_write_int(ADR_EE_BAT_ZAR_CNT_KE[in],0);
;;;242    	
;;;243    	spc_phase=0;
;;;244    	__ee_spc_phase=0;
;;;245    	lc640_write_int(EE_SPC_PHASE,__ee_spc_phase);
;;;246    
;;;247    	//ke_mem_hndl(in,lc640_read_int(ADR_EE_BAT_ZAR_CNT_KE[spc_bat]));
;;;248    
;;;249    		{					
;;;250    		signed short temp_temp;
;;;251    		signed char temp;
;;;252    		temp_temp=bat[in]._u_old[((bat_u_old_cnt+1)&0x07)]; 
;;;253    		    
;;;254    		temp=LPC_RTC->YEAR;
;;;255    		gran_char(&temp,1,99);
;;;256    		*((char*)(&(ke_date[0])))=temp;
;;;257    			
;;;258    		temp=LPC_RTC->MONTH;
;;;259    		gran_char(&temp,1,12);
;;;260    		*(((char*)(&(ke_date[0])))+1)=temp;
;;;261    		
;;;262    		temp=LPC_RTC->DOM;
;;;263    		gran_char(&temp,1,31);
;;;264    		*(((char*)(&(ke_date[0])))+2)=temp;			
;;;265    				
;;;266    		*(((char*)(&(ke_date[0])))+3)=*((char*)&temp_temp);
;;;267    		lc640_write_long(EE_SPC_KE_DATE0,ke_date[0]);
;;;268    
;;;269    		temp=LPC_RTC->HOUR;
;;;270    		gran_char(&temp,0,23);
;;;271    		*((char*)(&(ke_date[1])))=temp;
;;;272                   
;;;273    		temp=LPC_RTC->MIN;
;;;274    		gran_char(&temp,0,59);
;;;275    		*(((char*)(&(ke_date[1])))+1)=temp;
;;;276    	          
;;;277    		temp=LPC_RTC->SEC;
;;;278    		gran_char(&temp,0,59);
;;;279    		*(((char*)(&(ke_date[1])))+2)=temp;
;;;280    			
;;;281    		*(((char*)(&(ke_date[1])))+3)=*(((char*)&temp_temp)+1);
;;;282    		lc640_write_long(EE_SPC_KE_DATE1,ke_date[1]);
;;;283    		}
;;;284    
;;;285    	}
;;;286    }
000018  f8950047          LDRB     r0,[r5,#0x47]
00001c  f8951046          LDRB     r1,[r5,#0x46]         ;219
000020  4048              EORS     r0,r0,r1              ;219
000022  4a99              LDR      r2,|L4.648|
000024  b100              CBZ      r0,|L4.40|
000026  7050              STRB     r0,[r2,#1]
                  |L4.40|
000028  4001              ANDS     r1,r1,r0              ;220
00002a  b101              CBZ      r1,|L4.46|
00002c  7091              STRB     r1,[r2,#2]            ;220
                  |L4.46|
00002e  ea000301          AND      r3,r0,r1              ;220
000032  07db              LSLS     r3,r3,#31             ;220
000034  d025              BEQ      |L4.130|
000036  78d0              LDRB     r0,[r2,#3]            ;220  ; plazma_inv
000038  1c40              ADDS     r0,r0,#1              ;220
00003a  70d0              STRB     r0,[r2,#3]            ;220
00003c  b934              CBNZ     r4,|L4.76|
00003e  2301              MOVS     r3,#1                 ;220
000040  461a              MOV      r2,r3                 ;220
000042  210e              MOVS     r1,#0xe
000044  a091              ADR      r0,|L4.652|
000046  f7fffffe          BL       snmp_trap_send
                  |L4.74|
00004a  e115              B        |L4.632|
                  |L4.76|
00004c  2c01              CMP      r4,#1                 ;221
00004e  d106              BNE      |L4.94|
000050  2301              MOVS     r3,#1
000052  2202              MOVS     r2,#2                 ;222
000054  210e              MOVS     r1,#0xe               ;222
000056  a094              ADR      r0,|L4.680|
000058  f7fffffe          BL       snmp_trap_send
00005c  e10c              B        |L4.632|
                  |L4.94|
00005e  2c02              CMP      r4,#2                 ;223
000060  d106              BNE      |L4.112|
000062  2301              MOVS     r3,#1                 ;223
000064  2203              MOVS     r2,#3                 ;223
000066  210e              MOVS     r1,#0xe               ;223
000068  a096              ADR      r0,|L4.708|
00006a  f7fffffe          BL       snmp_trap_send
00006e  e103              B        |L4.632|
                  |L4.112|
000070  2c03              CMP      r4,#3                 ;224
000072  d1ea              BNE      |L4.74|
000074  2301              MOVS     r3,#1                 ;224
000076  2204              MOVS     r2,#4                 ;224
000078  210e              MOVS     r1,#0xe               ;224
00007a  a099              ADR      r0,|L4.736|
00007c  f7fffffe          BL       snmp_trap_send
                  |L4.128|
000080  e0fa              B        |L4.632|
                  |L4.130|
000082  0783              LSLS     r3,r0,#30             ;225
000084  d527              BPL      |L4.214|
000086  078b              LSLS     r3,r1,#30             ;225
000088  d525              BPL      |L4.214|
00008a  78d0              LDRB     r0,[r2,#3]  ; plazma_inv
00008c  1c40              ADDS     r0,r0,#1              ;226
00008e  70d0              STRB     r0,[r2,#3]            ;226
000090  b934              CBNZ     r4,|L4.160|
000092  2302              MOVS     r3,#2                 ;226
000094  2201              MOVS     r2,#1                 ;226
000096  210e              MOVS     r1,#0xe               ;226
000098  a098              ADR      r0,|L4.764|
00009a  f7fffffe          BL       snmp_trap_send
00009e  e0eb              B        |L4.632|
                  |L4.160|
0000a0  2c01              CMP      r4,#1                 ;233
0000a2  d106              BNE      |L4.178|
0000a4  2302              MOVS     r3,#2                 ;234
0000a6  461a              MOV      r2,r3                 ;234
0000a8  210e              MOVS     r1,#0xe               ;234
0000aa  a09b              ADR      r0,|L4.792|
0000ac  f7fffffe          BL       snmp_trap_send
0000b0  e0e2              B        |L4.632|
                  |L4.178|
0000b2  2c02              CMP      r4,#2                 ;237
0000b4  d106              BNE      |L4.196|
0000b6  2302              MOVS     r3,#2                 ;238
0000b8  2203              MOVS     r2,#3                 ;238
0000ba  210e              MOVS     r1,#0xe               ;238
0000bc  a09d              ADR      r0,|L4.820|
0000be  f7fffffe          BL       snmp_trap_send
0000c2  e0d9              B        |L4.632|
                  |L4.196|
0000c4  2c03              CMP      r4,#3                 ;241
0000c6  d1c0              BNE      |L4.74|
0000c8  2302              MOVS     r3,#2                 ;241
0000ca  2204              MOVS     r2,#4                 ;241
0000cc  210e              MOVS     r1,#0xe               ;243
0000ce  a0a0              ADR      r0,|L4.848|
0000d0  f7fffffe          BL       snmp_trap_send
0000d4  e0d0              B        |L4.632|
                  |L4.214|
0000d6  0743              LSLS     r3,r0,#29             ;245
0000d8  d527              BPL      |L4.298|
0000da  074b              LSLS     r3,r1,#29             ;245
0000dc  d525              BPL      |L4.298|
0000de  78d0              LDRB     r0,[r2,#3]            ;252  ; plazma_inv
0000e0  1c40              ADDS     r0,r0,#1              ;252
0000e2  70d0              STRB     r0,[r2,#3]            ;252
0000e4  b934              CBNZ     r4,|L4.244|
0000e6  2303              MOVS     r3,#3                 ;252
0000e8  2201              MOVS     r2,#1                 ;252
0000ea  210e              MOVS     r1,#0xe               ;252
0000ec  a09f              ADR      r0,|L4.876|
0000ee  f7fffffe          BL       snmp_trap_send
0000f2  e0c1              B        |L4.632|
                  |L4.244|
0000f4  2c01              CMP      r4,#1                 ;255
0000f6  d106              BNE      |L4.262|
0000f8  2303              MOVS     r3,#3                 ;255
0000fa  2202              MOVS     r2,#2                 ;255
0000fc  210e              MOVS     r1,#0xe               ;255
0000fe  a0a2              ADR      r0,|L4.904|
000100  f7fffffe          BL       snmp_trap_send
000104  e0b8              B        |L4.632|
                  |L4.262|
000106  2c02              CMP      r4,#2                 ;256
000108  d106              BNE      |L4.280|
00010a  2303              MOVS     r3,#3                 ;256
00010c  461a              MOV      r2,r3                 ;258
00010e  210e              MOVS     r1,#0xe               ;258
000110  a0a4              ADR      r0,|L4.932|
000112  f7fffffe          BL       snmp_trap_send
000116  e0af              B        |L4.632|
                  |L4.280|
000118  2c03              CMP      r4,#3                 ;259
00011a  d196              BNE      |L4.74|
00011c  2303              MOVS     r3,#3                 ;260
00011e  2204              MOVS     r2,#4                 ;260
000120  210e              MOVS     r1,#0xe               ;262
000122  a0a7              ADR      r0,|L4.960|
000124  f7fffffe          BL       snmp_trap_send
000128  e0a6              B        |L4.632|
                  |L4.298|
00012a  0703              LSLS     r3,r0,#28             ;263
00012c  d527              BPL      |L4.382|
00012e  070b              LSLS     r3,r1,#28             ;264
000130  d525              BPL      |L4.382|
000132  78d0              LDRB     r0,[r2,#3]            ;264  ; plazma_inv
000134  1c40              ADDS     r0,r0,#1              ;266
000136  70d0              STRB     r0,[r2,#3]            ;266
000138  b934              CBNZ     r4,|L4.328|
00013a  2304              MOVS     r3,#4                 ;267
00013c  2201              MOVS     r2,#1                 ;267
00013e  210e              MOVS     r1,#0xe               ;267
000140  a0a6              ADR      r0,|L4.988|
000142  f7fffffe          BL       snmp_trap_send
000146  e097              B        |L4.632|
                  |L4.328|
000148  2c01              CMP      r4,#1                 ;270
00014a  d106              BNE      |L4.346|
00014c  2304              MOVS     r3,#4                 ;270
00014e  2202              MOVS     r2,#2                 ;270
000150  210e              MOVS     r1,#0xe               ;270
000152  a0ab              ADR      r0,|L4.1024|
000154  f7fffffe          BL       snmp_trap_send
000158  e08e              B        |L4.632|
                  |L4.346|
00015a  2c02              CMP      r4,#2                 ;273
00015c  d106              BNE      |L4.364|
00015e  2304              MOVS     r3,#4                 ;274
000160  2203              MOVS     r2,#3                 ;274
000162  210e              MOVS     r1,#0xe               ;274
000164  a0af              ADR      r0,|L4.1060|
000166  f7fffffe          BL       snmp_trap_send
00016a  e085              B        |L4.632|
                  |L4.364|
00016c  2c03              CMP      r4,#3                 ;277
00016e  d187              BNE      |L4.128|
000170  2304              MOVS     r3,#4                 ;278
000172  461a              MOV      r2,r3                 ;278
000174  210e              MOVS     r1,#0xe               ;278
000176  a0b4              ADR      r0,|L4.1096|
000178  f7fffffe          BL       snmp_trap_send
00017c  e07c              B        |L4.632|
                  |L4.382|
00017e  06c3              LSLS     r3,r0,#27             ;279
000180  d527              BPL      |L4.466|
000182  06cb              LSLS     r3,r1,#27             ;281
000184  d525              BPL      |L4.466|
000186  78d0              LDRB     r0,[r2,#3]            ;282  ; plazma_inv
000188  1c40              ADDS     r0,r0,#1              ;282
00018a  70d0              STRB     r0,[r2,#3]            ;282
00018c  b934              CBNZ     r4,|L4.412|
00018e  2305              MOVS     r3,#5                 ;282
000190  2201              MOVS     r2,#1
000192  210e              MOVS     r1,#0xe
000194  a0b5              ADR      r0,|L4.1132|
000196  f7fffffe          BL       snmp_trap_send
00019a  e06d              B        |L4.632|
                  |L4.412|
00019c  2c01              CMP      r4,#1
00019e  d106              BNE      |L4.430|
0001a0  2305              MOVS     r3,#5
0001a2  2202              MOVS     r2,#2
0001a4  210e              MOVS     r1,#0xe
0001a6  a0ba              ADR      r0,|L4.1168|
0001a8  f7fffffe          BL       snmp_trap_send
0001ac  e064              B        |L4.632|
                  |L4.430|
0001ae  2c02              CMP      r4,#2
0001b0  d106              BNE      |L4.448|
0001b2  2305              MOVS     r3,#5
0001b4  2203              MOVS     r2,#3
0001b6  210e              MOVS     r1,#0xe
0001b8  a0be              ADR      r0,|L4.1204|
0001ba  f7fffffe          BL       snmp_trap_send
0001be  e05b              B        |L4.632|
                  |L4.448|
0001c0  2c03              CMP      r4,#3
0001c2  d159              BNE      |L4.632|
0001c4  2305              MOVS     r3,#5
0001c6  2204              MOVS     r2,#4
0001c8  210e              MOVS     r1,#0xe
0001ca  a0c3              ADR      r0,|L4.1240|
0001cc  f7fffffe          BL       snmp_trap_send
0001d0  e052              B        |L4.632|
                  |L4.466|
0001d2  0683              LSLS     r3,r0,#26
0001d4  d527              BPL      |L4.550|
0001d6  068b              LSLS     r3,r1,#26
0001d8  d525              BPL      |L4.550|
0001da  78d0              LDRB     r0,[r2,#3]  ; plazma_inv
0001dc  1c40              ADDS     r0,r0,#1
0001de  70d0              STRB     r0,[r2,#3]
0001e0  b934              CBNZ     r4,|L4.496|
0001e2  2306              MOVS     r3,#6
0001e4  2201              MOVS     r2,#1
0001e6  210e              MOVS     r1,#0xe
0001e8  a0c4              ADR      r0,|L4.1276|
0001ea  f7fffffe          BL       snmp_trap_send
0001ee  e043              B        |L4.632|
                  |L4.496|
0001f0  2c01              CMP      r4,#1
0001f2  d106              BNE      |L4.514|
0001f4  2306              MOVS     r3,#6
0001f6  2202              MOVS     r2,#2
0001f8  210e              MOVS     r1,#0xe
0001fa  a0c9              ADR      r0,|L4.1312|
0001fc  f7fffffe          BL       snmp_trap_send
000200  e03a              B        |L4.632|
                  |L4.514|
000202  2c02              CMP      r4,#2
000204  d106              BNE      |L4.532|
000206  2306              MOVS     r3,#6
000208  2203              MOVS     r2,#3
00020a  210e              MOVS     r1,#0xe
00020c  a0cd              ADR      r0,|L4.1348|
00020e  f7fffffe          BL       snmp_trap_send
000212  e031              B        |L4.632|
                  |L4.532|
000214  2c03              CMP      r4,#3
000216  d12f              BNE      |L4.632|
000218  2306              MOVS     r3,#6
00021a  2204              MOVS     r2,#4
00021c  210e              MOVS     r1,#0xe
00021e  a0d2              ADR      r0,|L4.1384|
000220  f7fffffe          BL       snmp_trap_send
000224  e028              B        |L4.632|
                  |L4.550|
000226  2800              CMP      r0,#0
000228  d026              BEQ      |L4.632|
00022a  2900              CMP      r1,#0
00022c  d124              BNE      |L4.632|
00022e  78d0              LDRB     r0,[r2,#3]  ; plazma_inv
000230  1c40              ADDS     r0,r0,#1
000232  70d0              STRB     r0,[r2,#3]
000234  b934              CBNZ     r4,|L4.580|
000236  2300              MOVS     r3,#0
000238  2201              MOVS     r2,#1
00023a  210e              MOVS     r1,#0xe
00023c  a0d3              ADR      r0,|L4.1420|
00023e  f7fffffe          BL       snmp_trap_send
000242  e019              B        |L4.632|
                  |L4.580|
000244  2c01              CMP      r4,#1
000246  d106              BNE      |L4.598|
000248  2300              MOVS     r3,#0
00024a  2202              MOVS     r2,#2
00024c  210e              MOVS     r1,#0xe
00024e  a0d4              ADR      r0,|L4.1440|
000250  f7fffffe          BL       snmp_trap_send
000254  e010              B        |L4.632|
                  |L4.598|
000256  2c02              CMP      r4,#2
000258  d106              BNE      |L4.616|
00025a  2300              MOVS     r3,#0
00025c  2203              MOVS     r2,#3
00025e  210e              MOVS     r1,#0xe
000260  a0d4              ADR      r0,|L4.1460|
000262  f7fffffe          BL       snmp_trap_send
000266  e007              B        |L4.632|
                  |L4.616|
000268  2c03              CMP      r4,#3
00026a  d105              BNE      |L4.632|
00026c  2300              MOVS     r3,#0
00026e  2204              MOVS     r2,#4
000270  210e              MOVS     r1,#0xe
000272  a0d5              ADR      r0,|L4.1480|
000274  f7fffffe          BL       snmp_trap_send
                  |L4.632|
000278  f8150f46          LDRB     r0,[r5,#0x46]!
00027c  7068              STRB     r0,[r5,#1]
00027e  bd70              POP      {r4-r6,pc}
;;;287    
                          ENDP

                  |L4.640|
                          DCD      first_inv_slot
                  |L4.644|
                          DCD      inv
                  |L4.648|
                          DCD      ||area_number.21||+0x84
                  |L4.652|
00028c  496e7665          DCB      "Invertor #1 Alarm, overload",0
000290  72746f72
000294  20233120
000298  416c6172
00029c  6d2c206f
0002a0  7665726c
0002a4  6f616400
                  |L4.680|
0002a8  496e7665          DCB      "Invertor #2 Alarm, overload",0
0002ac  72746f72
0002b0  20233220
0002b4  416c6172
0002b8  6d2c206f
0002bc  7665726c
0002c0  6f616400
                  |L4.708|
0002c4  496e7665          DCB      "Invertor #3 Alarm, overload",0
0002c8  72746f72
0002cc  20233320
0002d0  416c6172
0002d4  6d2c206f
0002d8  7665726c
0002dc  6f616400
                  |L4.736|
0002e0  496e7665          DCB      "Invertor #4 Alarm, overload",0
0002e4  72746f72
0002e8  20233420
0002ec  416c6172
0002f0  6d2c206f
0002f4  7665726c
0002f8  6f616400
                  |L4.764|
0002fc  496e7665          DCB      "Invertor #1 Alarm, overheat",0
000300  72746f72
000304  20233120
000308  416c6172
00030c  6d2c206f
000310  76657268
000314  65617400
                  |L4.792|
000318  496e7665          DCB      "Invertor #2 Alarm, overheat",0
00031c  72746f72
000320  20233220
000324  416c6172
000328  6d2c206f
00032c  76657268
000330  65617400
                  |L4.820|
000334  496e7665          DCB      "Invertor #3 Alarm, overheat",0
000338  72746f72
00033c  20233320
000340  416c6172
000344  6d2c206f
000348  76657268
00034c  65617400
                  |L4.848|
000350  496e7665          DCB      "Invertor #4 Alarm, overheat",0
000354  72746f72
000358  20233420
00035c  416c6172
000360  6d2c206f
000364  76657268
000368  65617400
                  |L4.876|
00036c  496e7665          DCB      "Invertor #1 Alarm, is warm",0
000370  72746f72
000374  20233120
000378  416c6172
00037c  6d2c2069
000380  73207761
000384  726d00  
000387  00                DCB      0
                  |L4.904|
000388  496e7665          DCB      "Invertor #2 Alarm, is warm",0
00038c  72746f72
000390  20233220
000394  416c6172
000398  6d2c2069
00039c  73207761
0003a0  726d00  
0003a3  00                DCB      0
                  |L4.932|
0003a4  496e7665          DCB      "Invertor #3 Alarm, is warm",0
0003a8  72746f72
0003ac  20233320
0003b0  416c6172
0003b4  6d2c2069
0003b8  73207761
0003bc  726d00  
0003bf  00                DCB      0
                  |L4.960|
0003c0  496e7665          DCB      "Invertor #4 Alarm, is warm",0
0003c4  72746f72
0003c8  20233420
0003cc  416c6172
0003d0  6d2c2069
0003d4  73207761
0003d8  726d00  
0003db  00                DCB      0
                  |L4.988|
0003dc  496e7665          DCB      "Invertor #1 Alarm, voltage is up",0
0003e0  72746f72
0003e4  20233120
0003e8  416c6172
0003ec  6d2c2076
0003f0  6f6c7461
0003f4  67652069
0003f8  73207570
0003fc  00      
0003fd  00                DCB      0
0003fe  00                DCB      0
0003ff  00                DCB      0
                  |L4.1024|
000400  496e7665          DCB      "Invertor #2 Alarm, voltage is up",0
000404  72746f72
000408  20233220
00040c  416c6172
000410  6d2c2076
000414  6f6c7461
000418  67652069
00041c  73207570
000420  00      
000421  00                DCB      0
000422  00                DCB      0
000423  00                DCB      0
                  |L4.1060|
000424  496e7665          DCB      "Invertor #3 Alarm, voltage is up",0
000428  72746f72
00042c  20233320
000430  416c6172
000434  6d2c2076
000438  6f6c7461
00043c  67652069
000440  73207570
000444  00      
000445  00                DCB      0
000446  00                DCB      0
000447  00                DCB      0
                  |L4.1096|
000448  496e7665          DCB      "Invertor #4 Alarm, voltage is up",0
00044c  72746f72
000450  20233420
000454  416c6172
000458  6d2c2076
00045c  6f6c7461
000460  67652069
000464  73207570
000468  00      
000469  00                DCB      0
00046a  00                DCB      0
00046b  00                DCB      0
                  |L4.1132|
00046c  496e7665          DCB      "Invertor #1 Alarm, voltage is down",0
000470  72746f72
000474  20233120
000478  416c6172
00047c  6d2c2076
000480  6f6c7461
000484  67652069
000488  7320646f
00048c  776e00  
00048f  00                DCB      0
                  |L4.1168|
000490  496e7665          DCB      "Invertor #2 Alarm, voltage is down",0
000494  72746f72
000498  20233220
00049c  416c6172
0004a0  6d2c2076
0004a4  6f6c7461
0004a8  67652069
0004ac  7320646f
0004b0  776e00  
0004b3  00                DCB      0
                  |L4.1204|
0004b4  496e7665          DCB      "Invertor #3 Alarm, voltage is down",0
0004b8  72746f72
0004bc  20233320
0004c0  416c6172
0004c4  6d2c2076
0004c8  6f6c7461
0004cc  67652069
0004d0  7320646f
0004d4  776e00  
0004d7  00                DCB      0
                  |L4.1240|
0004d8  496e7665          DCB      "Invertor #4 Alarm, voltage is down",0
0004dc  72746f72
0004e0  20233420
0004e4  416c6172
0004e8  6d2c2076
0004ec  6f6c7461
0004f0  67652069
0004f4  7320646f
0004f8  776e00  
0004fb  00                DCB      0
                  |L4.1276|
0004fc  496e7665          DCB      "Invertor #1 Alarm, output is offed",0
000500  72746f72
000504  20233120
000508  416c6172
00050c  6d2c206f
000510  75747075
000514  74206973
000518  206f6666
00051c  656400  
00051f  00                DCB      0
                  |L4.1312|
000520  496e7665          DCB      "Invertor #2 Alarm, output is offed",0
000524  72746f72
000528  20233220
00052c  416c6172
000530  6d2c206f
000534  75747075
000538  74206973
00053c  206f6666
000540  656400  
000543  00                DCB      0
                  |L4.1348|
000544  496e7665          DCB      "Invertor #3 Alarm, output is offed",0
000548  72746f72
00054c  20233320
000550  416c6172
000554  6d2c206f
000558  75747075
00055c  74206973
000560  206f6666
000564  656400  
000567  00                DCB      0
                  |L4.1384|
000568  496e7665          DCB      "Invertor #4 Alarm, output is offed",0
00056c  72746f72
000570  20233420
000574  416c6172
000578  6d2c206f
00057c  75747075
000580  74206973
000584  206f6666
000588  656400  
00058b  00                DCB      0
                  |L4.1420|
00058c  496e7665          DCB      "Invertor #1 is norm",0
000590  72746f72
000594  20233120
000598  6973206e
00059c  6f726d00
                  |L4.1440|
0005a0  496e7665          DCB      "Invertor #2 is norm",0
0005a4  72746f72
0005a8  20233220
0005ac  6973206e
0005b0  6f726d00
                  |L4.1460|
0005b4  496e7665          DCB      "Invertor #3 is norm",0
0005b8  72746f72
0005bc  20233320
0005c0  6973206e
0005c4  6f726d00
                  |L4.1480|
0005c8  496e7665          DCB      "Invertor #4 is norm",0
0005cc  72746f72
0005d0  20233420
0005d4  6973206e
0005d8  6f726d00

                          AREA ||.bss||, DATA, NOINIT, ALIGN=2

                  adc_buff
                          %        1024
                  adc_buff_
                          %        32
                  main_power_buffer
                          %        32

                          AREA ||area_number.7||, DATA, NOINIT, ALIGN=1

                          EXPORTAS ||area_number.7||, ||.bss||
                  adc_buff_max
                          %        24

                          AREA ||area_number.8||, DATA, NOINIT, ALIGN=1

                          EXPORTAS ||area_number.8||, ||.bss||
                  net_buff
                          %        64

                          AREA ||.constdata||, DATA, READONLY, ALIGN=0

                  sk_buff_KONTUR
000000  0d0b0f0e          DCB      0x0d,0x0b,0x0f,0x0e

                          AREA ||area_number.11||, DATA, READONLY, ALIGN=0

                          EXPORTAS ||area_number.11||, ||.constdata||
                  sk_buff_RSTKM
000000  0d0b0f0e          DCB      0x0d,0x0b,0x0f,0x0e

                          AREA ||area_number.12||, DATA, READONLY, ALIGN=0

                          EXPORTAS ||area_number.12||, ||.constdata||
                  sk_buff_GLONASS
000000  0b0d0f0e          DCB      0x0b,0x0d,0x0f,0x0e

                          AREA ||area_number.13||, DATA, READONLY, ALIGN=0

                          EXPORTAS ||area_number.13||, ||.constdata||
                  sk_buff_3U
000000  0b0d0f0e          DCB      0x0b,0x0d,0x0f,0x0e

                          AREA ||area_number.14||, DATA, READONLY, ALIGN=0

                          EXPORTAS ||area_number.14||, ||.constdata||
                  sk_buff_6U
000000  0b0d0f0e          DCB      0x0b,0x0d,0x0f,0x0e

                          AREA ||area_number.15||, DATA, READONLY, ALIGN=0

                          EXPORTAS ||area_number.15||, ||.constdata||
                  sk_buff_220
000000  0b0d0f0e          DCB      0x0b,0x0d,0x0f,0x0e

                          AREA ||area_number.16||, DATA, READONLY, ALIGN=0

                          EXPORTAS ||area_number.16||, ||.constdata||
                  sk_buff_TELECORE2015
000000  0b0d0f0e          DCB      0x0b,0x0d,0x0f,0x0e

                          AREA ||.data||, DATA, ALIGN=1

                  adc_buff_min
000000  13881388          DCW      0x1388,0x1388
000004  13881388          DCW      0x1388,0x1388
000008  13881388          DCW      0x1388,0x1388
00000c  13881388          DCW      0x1388,0x1388
000010  13881388          DCW      0x1388,0x1388
                          DCDU     0x00000000

                          AREA ||area_number.18||, DATA, ALIGN=1

                          EXPORTAS ||area_number.18||, ||.data||
                  unet_buff_min
000000  1388              DCW      0x1388

                          AREA ||area_number.19||, DATA, ALIGN=0

                          EXPORTAS ||area_number.19||, ||.data||
                  adc_stat
000000  01                DCB      0x01

                          AREA ||area_number.20||, DATA, ALIGN=1

                          EXPORTAS ||area_number.20||, ||.data||
                  bat_ver_cnt
000000  0096              DCW      0x0096

                          AREA ||area_number.21||, DATA, ALIGN=2

                          EXPORTAS ||area_number.21||, ||.data||
                  vent_stat
000000  00                DCB      0x00
                  adc_self_ch_cnt
000001  00                DCB      0x00
                  adc_ch_net
000002  00                DCB      0x00
                  adc_ch
000003  00                DCB      0x00
                  adc_ch_cnt
000004  00                DCB      0x00
                  adc_window_flag
000005  00                DCB      0x00
                  ch_cnt0
000006  00                DCB      0x00
                  b1Hz_ch
000007  00                DCB      0x00
                  i
000008  00                DCB      0x00
                  iiii
000009  00                DCB      0x00
                  bAVG
00000a  00                DCB      0x00
                  avg_num
00000b  00                DCB      0x00
                  kb_full_ver
00000c  00                DCB      0x00
                  kb_start_ips
00000d  00                DCB      0x00
                  num_of_wrks_bps
00000e  00                DCB      0x00
                  num_necc_up
00000f  00                DCB      0x00
                  num_necc_down
000010  00                DCB      0x00
                  sh_cnt0
000011  00                DCB      0x00
                  b1Hz_sh
000012  00                DCB      0x00
                  spc_stat
000013  00                DCB      0x00
                  spc_bat
000014  00                DCB      0x00
                  spc_phase
000015  00                DCB      0x00
                  bAVZ
000016  00                DCB      0x00
                  ke_start_stat
000017  00                DCB      0x00
                  numOfForvardBps
000018  00                DCB      0x00
                  numOfForvardBps_minCnt
000019  00                DCB      0x00
                  cntrl_stat
00001a  0258              DCW      0x0258
                  cntrl_stat_old
00001c  0258              DCW      0x0258
                  avg_main_cnt
00001e  0014              DCW      0x0014
                  ibat_ips
000020  0000              DCB      0x00,0x00
                  ibat_ips_
000022  0000              DCB      0x00,0x00
                  num_necc_block_cnt
000024  0000              DCB      0x00,0x00
                  net_buff_
000026  0000              DCB      0x00,0x00
                  adc_result
000028  0000              DCB      0x00,0x00
                  adc_gorb_cnt
00002a  0000              DCB      0x00,0x00
                  adc_zero_cnt
00002c  0000              DCB      0x00,0x00
                  adc_window_cnt
00002e  0000              DCB      0x00,0x00
                  adc_net_buff_cnt
000030  0000              DCB      0x00,0x00
                  plazma_sk
000032  0000              DCB      0x00,0x00
                  cntrl_stat_new
000034  0000              DCB      0x00,0x00
                  Ibmax
000036  0000              DCB      0x00,0x00
                  IZMAX_
000038  0000              DCB      0x00,0x00
                  samokalibr_cnt
00003a  0000              DCB      0x00,0x00
                  main_kb_cnt
00003c  0000              DCB      0x00,0x00
                  kb_cnt_1lev
00003e  0000              DCB      0x00,0x00
                  kb_cnt_2lev
000040  0000              DCB      0x00,0x00
                  kb_start
000042  0000              DCB      0x00,0x00
                  bps_on_mask
000044  0000              DCB      0x00,0x00
                  bps_off_mask
000046  0000              DCB      0x00,0x00
                  vz_cnt_s
000048  0000              DCB      0x00,0x00
                  vz_cnt_s_
00004a  0000              DCB      0x00,0x00
                  vz_cnt_h
00004c  0000              DCB      0x00,0x00
                  vz_cnt_h_
00004e  0000              DCB      0x00,0x00
                  cnt_end_ke
000050  0000              DCB      0x00,0x00
                  __ee_vz_cnt
000052  0000              DCB      0x00,0x00
                  __ee_spc_stat
000054  0000              DCB      0x00,0x00
                  __ee_spc_bat
000056  0000              DCB      0x00,0x00
                  __ee_spc_phase
000058  0000              DCB      0x00,0x00
                  cntrl_stat_blok_cnt
00005a  0000              DCB      0x00,0x00
                  cntrl_stat_blok_cnt_
00005c  0000              DCB      0x00,0x00
                  numOfForvardBps_hourCnt
00005e  0000              DCB      0x00,0x00
                  ibat
                          DCD      0x00000000
                  ibat_
                          DCD      0x00000000
                  i_avg_max
                          DCD      0x00000000
                  i_avg_min
                          DCD      0x00000000
                  i_avg_summ
                          DCD      0x00000000
                  i_avg
                          DCD      0x00000000
                  avg
                          DCD      0x00000000
                  cntrl_stat_blok_cnt_plus
                          DCD      0x00000000
                  cntrl_stat_blok_cnt_minus
                          DCD      0x00000000
                  plazma_inv
                          DCD      0x00000000
                  net_metr_buff_
                          DCD      0x00000000
00008c  0000              DCB      0x00,0x00
                  adc_self_ch_buff
00008e  0000              DCB      0x00,0x00
                          DCD      0x00000000
                  adc_self_ch_disp
                          DCD      0x00000000
000098  00000000          DCB      0x00,0x00,0x00,0x00
                  ke_date
                          %        8

                          AREA ||area_number.22||, DATA, ALIGN=1

                          EXPORTAS ||area_number.22||, ||.data||
                  unet_buff_max
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.23||, DATA, ALIGN=0

                          EXPORTAS ||area_number.23||, ||.data||
                  adc_cnt
000000  00                DCB      0x00

                          AREA ||area_number.24||, DATA, ALIGN=0

                          EXPORTAS ||area_number.24||, ||.data||
                  adc_cnt1
000000  00                DCB      0x00

                          AREA ||area_number.25||, DATA, ALIGN=1

                          EXPORTAS ||area_number.25||, ||.data||
                  zero_cnt
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.26||, DATA, ALIGN=0

                          EXPORTAS ||area_number.26||, ||.data||
                  net_buff_cnt
000000  00                DCB      0x00

                          AREA ||area_number.27||, DATA, ALIGN=1

                          EXPORTAS ||area_number.27||, ||.data||
                  ADWR
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.28||, DATA, ALIGN=1

                          EXPORTAS ||area_number.28||, ||.data||
                  period_cnt
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.29||, DATA, ALIGN=1

                          EXPORTAS ||area_number.29||, ||.data||
                  non_zero_cnt
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.30||, DATA, ALIGN=0

                          EXPORTAS ||area_number.30||, ||.data||
                  rele_stat
000000  00                DCB      0x00

                          AREA ||area_number.31||, DATA, ALIGN=0

                          EXPORTAS ||area_number.31||, ||.data||
                  bRELE_OUT
000000  00                DCB      0x00

                          AREA ||area_number.32||, DATA, ALIGN=2

                          EXPORTAS ||area_number.32||, ||.data||
                  main_power_buffer_
                          DCD      0x00000000

                          AREA ||area_number.33||, DATA, ALIGN=1

                          EXPORTAS ||area_number.33||, ||.data||
                  main_power_buffer_cnt
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.34||, DATA, ALIGN=1

                          EXPORTAS ||area_number.34||, ||.data||
                  adc_buff_out_
                          DCDU     0x00000000
000004  0000              DCB      0x00,0x00

                          AREA ||area_number.35||, DATA, ALIGN=1

                          EXPORTAS ||area_number.35||, ||.data||
                  plazma_adc_cnt
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.36||, DATA, ALIGN=0

                          EXPORTAS ||area_number.36||, ||.data||
                  unh_cnt0
000000  00                DCB      0x00

                          AREA ||area_number.37||, DATA, ALIGN=0

                          EXPORTAS ||area_number.37||, ||.data||
                  unh_cnt1
000000  00                DCB      0x00

                          AREA ||area_number.38||, DATA, ALIGN=0

                          EXPORTAS ||area_number.38||, ||.data||
                  b1Hz_unh
000000  00                DCB      0x00

                          AREA ||area_number.39||, DATA, ALIGN=0

                          EXPORTAS ||area_number.39||, ||.data||
                  avg_cnt
000000  00                DCB      0x00

                          AREA ||area_number.40||, DATA, ALIGN=0

                          EXPORTAS ||area_number.40||, ||.data||
                  bps_all_off_cnt
000000  00                DCB      0x00

                          AREA ||area_number.41||, DATA, ALIGN=0

                          EXPORTAS ||area_number.41||, ||.data||
                  bps_mask_off_cnt
000000  00                DCB      0x00

                          AREA ||area_number.42||, DATA, ALIGN=0

                          EXPORTAS ||area_number.42||, ||.data||
                  bps_mask_on_off_cnt
000000  00                DCB      0x00

                          AREA ||area_number.43||, DATA, ALIGN=0

                          EXPORTAS ||area_number.43||, ||.data||
                  bps_hndl_2sec_cnt
000000  00                DCB      0x00

                          AREA ||area_number.44||, DATA, ALIGN=0

                          EXPORTAS ||area_number.44||, ||.data||
                  plazma_bat
000000  00                DCB      0x00
